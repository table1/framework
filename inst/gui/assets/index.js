(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function s(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(n){if(n.ep)return;n.ep=!0;const o=s(n);fetch(n.href,o)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function yc(t){const e=Object.create(null);for(const s of t.split(","))e[s]=1;return s=>s in e}const pt={},no=[],xi=()=>{},Bm=()=>!1,La=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),bc=t=>t.startsWith("onUpdate:"),Nt=Object.assign,kc=(t,e)=>{const s=t.indexOf(e);s>-1&&t.splice(s,1)},Pb=Object.prototype.hasOwnProperty,rt=(t,e)=>Pb.call(t,e),Be=Array.isArray,oo=t=>qr(t)==="[object Map]",Do=t=>qr(t)==="[object Set]",Kf=t=>qr(t)==="[object Date]",He=t=>typeof t=="function",At=t=>typeof t=="string",ei=t=>typeof t=="symbol",dt=t=>t!==null&&typeof t=="object",Im=t=>(dt(t)||He(t))&&He(t.then)&&He(t.catch),Um=Object.prototype.toString,qr=t=>Um.call(t),jb=t=>qr(t).slice(8,-1),Nm=t=>qr(t)==="[object Object]",xc=t=>At(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,ir=yc(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ra=t=>{const e=Object.create(null);return(s=>e[s]||(e[s]=t(s)))},Lb=/-\w/g,Hs=Ra(t=>t.replace(Lb,e=>e.slice(1).toUpperCase())),Rb=/\B([A-Z])/g,Fn=Ra(t=>t.replace(Rb,"-$1").toLowerCase()),Ba=Ra(t=>t.charAt(0).toUpperCase()+t.slice(1)),pu=Ra(t=>t?`on${Ba(t)}`:""),sn=(t,e)=>!Object.is(t,e),Nl=(t,...e)=>{for(let s=0;s<t.length;s++)t[s](...e)},zm=(t,e,s,i=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:i,value:s})},sa=t=>{const e=parseFloat(t);return isNaN(e)?t:e},Bb=t=>{const e=At(t)?Number(t):NaN;return isNaN(e)?t:e};let Gf;const Ia=()=>Gf||(Gf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function yr(t){if(Be(t)){const e={};for(let s=0;s<t.length;s++){const i=t[s],n=At(i)?zb(i):yr(i);if(n)for(const o in n)e[o]=n[o]}return e}else if(At(t)||dt(t))return t}const Ib=/;(?![^(]*\))/g,Ub=/:([^]+)/,Nb=/\/\*[^]*?\*\//g;function zb(t){const e={};return t.replace(Nb,"").split(Ib).forEach(s=>{if(s){const i=s.split(Ub);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function Me(t){let e="";if(At(t))e=t;else if(Be(t))for(let s=0;s<t.length;s++){const i=Me(t[s]);i&&(e+=i+" ")}else if(dt(t))for(const s in t)t[s]&&(e+=s+" ");return e.trim()}const Fb="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Hb=yc(Fb);function Fm(t){return!!t||t===""}function Wb(t,e){if(t.length!==e.length)return!1;let s=!0;for(let i=0;s&&i<t.length;i++)s=Ln(t[i],e[i]);return s}function Ln(t,e){if(t===e)return!0;let s=Kf(t),i=Kf(e);if(s||i)return s&&i?t.getTime()===e.getTime():!1;if(s=ei(t),i=ei(e),s||i)return t===e;if(s=Be(t),i=Be(e),s||i)return s&&i?Wb(t,e):!1;if(s=dt(t),i=dt(e),s||i){if(!s||!i)return!1;const n=Object.keys(t).length,o=Object.keys(e).length;if(n!==o)return!1;for(const r in t){const l=t.hasOwnProperty(r),a=e.hasOwnProperty(r);if(l&&!a||!l&&a||!Ln(t[r],e[r]))return!1}}return String(t)===String(e)}function wc(t,e){return t.findIndex(s=>Ln(s,e))}const Hm=t=>!!(t&&t.__v_isRef===!0),H=t=>At(t)?t:t==null?"":Be(t)||dt(t)&&(t.toString===Um||!He(t.toString))?Hm(t)?H(t.value):JSON.stringify(t,Wm,2):String(t),Wm=(t,e)=>Hm(e)?Wm(t,e.value):oo(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((s,[i,n],o)=>(s[mu(i,o)+" =>"]=n,s),{})}:Do(e)?{[`Set(${e.size})`]:[...e.values()].map(s=>mu(s))}:ei(e)?mu(e):dt(e)&&!Be(e)&&!Nm(e)?String(e):e,mu=(t,e="")=>{var s;return ei(t)?`Symbol(${(s=t.description)!=null?s:e})`:t};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let bs;class qb{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=bs,!e&&bs&&(this.index=(bs.scopes||(bs.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].pause();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].resume();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].resume()}}run(e){if(this._active){const s=bs;try{return bs=this,e()}finally{bs=s}}}on(){++this._on===1&&(this.prevScope=bs,bs=this)}off(){this._on>0&&--this._on===0&&(bs=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let s,i;for(s=0,i=this.effects.length;s<i;s++)this.effects[s].stop();for(this.effects.length=0,s=0,i=this.cleanups.length;s<i;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,i=this.scopes.length;s<i;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function Kb(){return bs}let mt;const gu=new WeakSet;class qm{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,bs&&bs.active&&bs.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,gu.has(this)&&(gu.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Gm(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Jf(this),Jm(this);const e=mt,s=Xs;mt=this,Xs=!0;try{return this.fn()}finally{Ym(this),mt=e,Xs=s,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Cc(e);this.deps=this.depsTail=void 0,Jf(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?gu.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){id(this)&&this.run()}get dirty(){return id(this)}}let Km=0,nr,or;function Gm(t,e=!1){if(t.flags|=8,e){t.next=or,or=t;return}t.next=nr,nr=t}function _c(){Km++}function Sc(){if(--Km>0)return;if(or){let e=or;for(or=void 0;e;){const s=e.next;e.next=void 0,e.flags&=-9,e=s}}let t;for(;nr;){let e=nr;for(nr=void 0;e;){const s=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(i){t||(t=i)}e=s}}if(t)throw t}function Jm(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Ym(t){let e,s=t.depsTail,i=s;for(;i;){const n=i.prevDep;i.version===-1?(i===s&&(s=n),Cc(i),Gb(i)):e=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=n}t.deps=e,t.depsTail=s}function id(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Qm(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Qm(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===br)||(t.globalVersion=br,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!id(t))))return;t.flags|=2;const e=t.dep,s=mt,i=Xs;mt=t,Xs=!0;try{Jm(t);const n=t.fn(t._value);(e.version===0||sn(n,t._value))&&(t.flags|=128,t._value=n,e.version++)}catch(n){throw e.version++,n}finally{mt=s,Xs=i,Ym(t),t.flags&=-3}}function Cc(t,e=!1){const{dep:s,prevSub:i,nextSub:n}=t;if(i&&(i.nextSub=n,t.prevSub=void 0),n&&(n.prevSub=i,t.nextSub=void 0),s.subs===t&&(s.subs=i,!i&&s.computed)){s.computed.flags&=-5;for(let o=s.computed.deps;o;o=o.nextDep)Cc(o,!0)}!e&&!--s.sc&&s.map&&s.map.delete(s.key)}function Gb(t){const{prevDep:e,nextDep:s}=t;e&&(e.nextDep=s,t.prevDep=void 0),s&&(s.prevDep=e,t.nextDep=void 0)}let Xs=!0;const Xm=[];function Li(){Xm.push(Xs),Xs=!1}function Ri(){const t=Xm.pop();Xs=t===void 0?!0:t}function Jf(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const s=mt;mt=void 0;try{e()}finally{mt=s}}}let br=0;class Jb{constructor(e,s){this.sub=e,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Ac{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!mt||!Xs||mt===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==mt)s=this.activeLink=new Jb(mt,this),mt.deps?(s.prevDep=mt.depsTail,mt.depsTail.nextDep=s,mt.depsTail=s):mt.deps=mt.depsTail=s,Zm(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const i=s.nextDep;i.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=i),s.prevDep=mt.depsTail,s.nextDep=void 0,mt.depsTail.nextDep=s,mt.depsTail=s,mt.deps===s&&(mt.deps=i)}return s}trigger(e){this.version++,br++,this.notify(e)}notify(e){_c();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{Sc()}}}function Zm(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let i=e.deps;i;i=i.nextDep)Zm(i)}const s=t.dep.subs;s!==t&&(t.prevSub=s,s&&(s.nextSub=t)),t.dep.subs=t}}const nd=new WeakMap,En=Symbol(""),od=Symbol(""),kr=Symbol("");function es(t,e,s){if(Xs&&mt){let i=nd.get(t);i||nd.set(t,i=new Map);let n=i.get(s);n||(i.set(s,n=new Ac),n.map=i,n.key=s),n.track()}}function $i(t,e,s,i,n,o){const r=nd.get(t);if(!r){br++;return}const l=a=>{a&&a.trigger()};if(_c(),e==="clear")r.forEach(l);else{const a=Be(t),d=a&&xc(s);if(a&&s==="length"){const u=Number(i);r.forEach((f,h)=>{(h==="length"||h===kr||!ei(h)&&h>=u)&&l(f)})}else switch((s!==void 0||r.has(void 0))&&l(r.get(s)),d&&l(r.get(kr)),e){case"add":a?d&&l(r.get("length")):(l(r.get(En)),oo(t)&&l(r.get(od)));break;case"delete":a||(l(r.get(En)),oo(t)&&l(r.get(od)));break;case"set":oo(t)&&l(r.get(En));break}}Sc()}function Jn(t){const e=it(t);return e===t?e:(es(e,"iterate",kr),Us(t)?e:e.map(Ht))}function Ua(t){return es(t=it(t),"iterate",kr),t}const Yb={__proto__:null,[Symbol.iterator](){return vu(this,Symbol.iterator,Ht)},concat(...t){return Jn(this).concat(...t.map(e=>Be(e)?Jn(e):e))},entries(){return vu(this,"entries",t=>(t[1]=Ht(t[1]),t))},every(t,e){return Ci(this,"every",t,e,void 0,arguments)},filter(t,e){return Ci(this,"filter",t,e,s=>s.map(Ht),arguments)},find(t,e){return Ci(this,"find",t,e,Ht,arguments)},findIndex(t,e){return Ci(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Ci(this,"findLast",t,e,Ht,arguments)},findLastIndex(t,e){return Ci(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Ci(this,"forEach",t,e,void 0,arguments)},includes(...t){return yu(this,"includes",t)},indexOf(...t){return yu(this,"indexOf",t)},join(t){return Jn(this).join(t)},lastIndexOf(...t){return yu(this,"lastIndexOf",t)},map(t,e){return Ci(this,"map",t,e,void 0,arguments)},pop(){return zo(this,"pop")},push(...t){return zo(this,"push",t)},reduce(t,...e){return Yf(this,"reduce",t,e)},reduceRight(t,...e){return Yf(this,"reduceRight",t,e)},shift(){return zo(this,"shift")},some(t,e){return Ci(this,"some",t,e,void 0,arguments)},splice(...t){return zo(this,"splice",t)},toReversed(){return Jn(this).toReversed()},toSorted(t){return Jn(this).toSorted(t)},toSpliced(...t){return Jn(this).toSpliced(...t)},unshift(...t){return zo(this,"unshift",t)},values(){return vu(this,"values",Ht)}};function vu(t,e,s){const i=Ua(t),n=i[e]();return i!==t&&!Us(t)&&(n._next=n.next,n.next=()=>{const o=n._next();return o.done||(o.value=s(o.value)),o}),n}const Qb=Array.prototype;function Ci(t,e,s,i,n,o){const r=Ua(t),l=r!==t&&!Us(t),a=r[e];if(a!==Qb[e]){const f=a.apply(t,o);return l?Ht(f):f}let d=s;r!==t&&(l?d=function(f,h){return s.call(this,Ht(f),h,t)}:s.length>2&&(d=function(f,h){return s.call(this,f,h,t)}));const u=a.call(r,d,i);return l&&n?n(u):u}function Yf(t,e,s,i){const n=Ua(t);let o=s;return n!==t&&(Us(t)?s.length>3&&(o=function(r,l,a){return s.call(this,r,l,a,t)}):o=function(r,l,a){return s.call(this,r,Ht(l),a,t)}),n[e](o,...i)}function yu(t,e,s){const i=it(t);es(i,"iterate",kr);const n=i[e](...s);return(n===-1||n===!1)&&Dc(s[0])?(s[0]=it(s[0]),i[e](...s)):n}function zo(t,e,s=[]){Li(),_c();const i=it(t)[e].apply(t,s);return Sc(),Ri(),i}const Xb=yc("__proto__,__v_isRef,__isVue"),eg=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(ei));function Zb(t){ei(t)||(t=String(t));const e=it(this);return es(e,"has",t),e.hasOwnProperty(t)}class tg{constructor(e=!1,s=!1){this._isReadonly=e,this._isShallow=s}get(e,s,i){if(s==="__v_skip")return e.__v_skip;const n=this._isReadonly,o=this._isShallow;if(s==="__v_isReactive")return!n;if(s==="__v_isReadonly")return n;if(s==="__v_isShallow")return o;if(s==="__v_raw")return i===(n?o?u1:og:o?ng:ig).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(i)?e:void 0;const r=Be(e);if(!n){let a;if(r&&(a=Yb[s]))return a;if(s==="hasOwnProperty")return Zb}const l=Reflect.get(e,s,ns(e)?e:i);if((ei(s)?eg.has(s):Xb(s))||(n||es(e,"get",s),o))return l;if(ns(l)){const a=r&&xc(s)?l:l.value;return n&&dt(a)?ld(a):a}return dt(l)?n?ld(l):Ys(l):l}}class sg extends tg{constructor(e=!1){super(!1,e)}set(e,s,i,n){let o=e[s];if(!this._isShallow){const a=rn(o);if(!Us(i)&&!rn(i)&&(o=it(o),i=it(i)),!Be(e)&&ns(o)&&!ns(i))return a||(o.value=i),!0}const r=Be(e)&&xc(s)?Number(s)<e.length:rt(e,s),l=Reflect.set(e,s,i,ns(e)?e:n);return e===it(n)&&(r?sn(i,o)&&$i(e,"set",s,i):$i(e,"add",s,i)),l}deleteProperty(e,s){const i=rt(e,s);e[s];const n=Reflect.deleteProperty(e,s);return n&&i&&$i(e,"delete",s,void 0),n}has(e,s){const i=Reflect.has(e,s);return(!ei(s)||!eg.has(s))&&es(e,"has",s),i}ownKeys(e){return es(e,"iterate",Be(e)?"length":En),Reflect.ownKeys(e)}}class e1 extends tg{constructor(e=!1){super(!0,e)}set(e,s){return!0}deleteProperty(e,s){return!0}}const t1=new sg,s1=new e1,i1=new sg(!0);const rd=t=>t,cl=t=>Reflect.getPrototypeOf(t);function n1(t,e,s){return function(...i){const n=this.__v_raw,o=it(n),r=oo(o),l=t==="entries"||t===Symbol.iterator&&r,a=t==="keys"&&r,d=n[t](...i),u=s?rd:e?ia:Ht;return!e&&es(o,"iterate",a?od:En),{next(){const{value:f,done:h}=d.next();return h?{value:f,done:h}:{value:l?[u(f[0]),u(f[1])]:u(f),done:h}},[Symbol.iterator](){return this}}}}function fl(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function o1(t,e){const s={get(n){const o=this.__v_raw,r=it(o),l=it(n);t||(sn(n,l)&&es(r,"get",n),es(r,"get",l));const{has:a}=cl(r),d=e?rd:t?ia:Ht;if(a.call(r,n))return d(o.get(n));if(a.call(r,l))return d(o.get(l));o!==r&&o.get(n)},get size(){const n=this.__v_raw;return!t&&es(it(n),"iterate",En),n.size},has(n){const o=this.__v_raw,r=it(o),l=it(n);return t||(sn(n,l)&&es(r,"has",n),es(r,"has",l)),n===l?o.has(n):o.has(n)||o.has(l)},forEach(n,o){const r=this,l=r.__v_raw,a=it(l),d=e?rd:t?ia:Ht;return!t&&es(a,"iterate",En),l.forEach((u,f)=>n.call(o,d(u),d(f),r))}};return Nt(s,t?{add:fl("add"),set:fl("set"),delete:fl("delete"),clear:fl("clear")}:{add(n){!e&&!Us(n)&&!rn(n)&&(n=it(n));const o=it(this);return cl(o).has.call(o,n)||(o.add(n),$i(o,"add",n,n)),this},set(n,o){!e&&!Us(o)&&!rn(o)&&(o=it(o));const r=it(this),{has:l,get:a}=cl(r);let d=l.call(r,n);d||(n=it(n),d=l.call(r,n));const u=a.call(r,n);return r.set(n,o),d?sn(o,u)&&$i(r,"set",n,o):$i(r,"add",n,o),this},delete(n){const o=it(this),{has:r,get:l}=cl(o);let a=r.call(o,n);a||(n=it(n),a=r.call(o,n)),l&&l.call(o,n);const d=o.delete(n);return a&&$i(o,"delete",n,void 0),d},clear(){const n=it(this),o=n.size!==0,r=n.clear();return o&&$i(n,"clear",void 0,void 0),r}}),["keys","values","entries",Symbol.iterator].forEach(n=>{s[n]=n1(n,t,e)}),s}function Vc(t,e){const s=o1(t,e);return(i,n,o)=>n==="__v_isReactive"?!t:n==="__v_isReadonly"?t:n==="__v_raw"?i:Reflect.get(rt(s,n)&&n in i?s:i,n,o)}const r1={get:Vc(!1,!1)},l1={get:Vc(!1,!0)},a1={get:Vc(!0,!1)};const ig=new WeakMap,ng=new WeakMap,og=new WeakMap,u1=new WeakMap;function d1(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function c1(t){return t.__v_skip||!Object.isExtensible(t)?0:d1(jb(t))}function Ys(t){return rn(t)?t:Mc(t,!1,t1,r1,ig)}function rg(t){return Mc(t,!1,i1,l1,ng)}function ld(t){return Mc(t,!0,s1,a1,og)}function Mc(t,e,s,i,n){if(!dt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const o=c1(t);if(o===0)return t;const r=n.get(t);if(r)return r;const l=new Proxy(t,o===2?i:s);return n.set(t,l),l}function ro(t){return rn(t)?ro(t.__v_raw):!!(t&&t.__v_isReactive)}function rn(t){return!!(t&&t.__v_isReadonly)}function Us(t){return!!(t&&t.__v_isShallow)}function Dc(t){return t?!!t.__v_raw:!1}function it(t){const e=t&&t.__v_raw;return e?it(e):t}function f1(t){return!rt(t,"__v_skip")&&Object.isExtensible(t)&&zm(t,"__v_skip",!0),t}const Ht=t=>dt(t)?Ys(t):t,ia=t=>dt(t)?ld(t):t;function ns(t){return t?t.__v_isRef===!0:!1}function ae(t){return lg(t,!1)}function h1(t){return lg(t,!0)}function lg(t,e){return ns(t)?t:new p1(t,e)}class p1{constructor(e,s){this.dep=new Ac,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?e:it(e),this._value=s?e:Ht(e),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(e){const s=this._rawValue,i=this.__v_isShallow||Us(e)||rn(e);e=i?e:it(e),sn(e,s)&&(this._rawValue=e,this._value=i?e:Ht(e),this.dep.trigger())}}function lt(t){return ns(t)?t.value:t}const m1={get:(t,e,s)=>e==="__v_raw"?t:lt(Reflect.get(t,e,s)),set:(t,e,s,i)=>{const n=t[e];return ns(n)&&!ns(s)?(n.value=s,!0):Reflect.set(t,e,s,i)}};function ag(t){return ro(t)?t:new Proxy(t,m1)}class g1{constructor(e,s,i){this.fn=e,this.setter=s,this._value=void 0,this.dep=new Ac(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=br-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&mt!==this)return Gm(this,!0),!0}get value(){const e=this.dep.track();return Qm(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function v1(t,e,s=!1){let i,n;return He(t)?i=t:(i=t.get,n=t.set),new g1(i,n,s)}const hl={},na=new WeakMap;let _n;function y1(t,e=!1,s=_n){if(s){let i=na.get(s);i||na.set(s,i=[]),i.push(t)}}function b1(t,e,s=pt){const{immediate:i,deep:n,once:o,scheduler:r,augmentJob:l,call:a}=s,d=W=>n?W:Us(W)||n===!1||n===0?Ei(W,1):Ei(W);let u,f,h,g,_=!1,p=!1;if(ns(t)?(f=()=>t.value,_=Us(t)):ro(t)?(f=()=>d(t),_=!0):Be(t)?(p=!0,_=t.some(W=>ro(W)||Us(W)),f=()=>t.map(W=>{if(ns(W))return W.value;if(ro(W))return d(W);if(He(W))return a?a(W,2):W()})):He(t)?e?f=a?()=>a(t,2):t:f=()=>{if(h){Li();try{h()}finally{Ri()}}const W=_n;_n=u;try{return a?a(t,3,[g]):t(g)}finally{_n=W}}:f=xi,e&&n){const W=f,G=n===!0?1/0:n;f=()=>Ei(W(),G)}const V=Kb(),M=()=>{u.stop(),V&&V.active&&kc(V.effects,u)};if(o&&e){const W=e;e=(...G)=>{W(...G),M()}}let N=p?new Array(t.length).fill(hl):hl;const B=W=>{if(!(!(u.flags&1)||!u.dirty&&!W))if(e){const G=u.run();if(n||_||(p?G.some((j,A)=>sn(j,N[A])):sn(G,N))){h&&h();const j=_n;_n=u;try{const A=[G,N===hl?void 0:p&&N[0]===hl?[]:N,g];N=G,a?a(e,3,A):e(...A)}finally{_n=j}}}else u.run()};return l&&l(B),u=new qm(f),u.scheduler=r?()=>r(B,!1):B,g=W=>y1(W,!1,u),h=u.onStop=()=>{const W=na.get(u);if(W){if(a)a(W,4);else for(const G of W)G();na.delete(u)}},e?i?B(!0):N=u.run():r?r(B.bind(null,!0),!0):u.run(),M.pause=u.pause.bind(u),M.resume=u.resume.bind(u),M.stop=M,M}function Ei(t,e=1/0,s){if(e<=0||!dt(t)||t.__v_skip||(s=s||new Map,(s.get(t)||0)>=e))return t;if(s.set(t,e),e--,ns(t))Ei(t.value,e,s);else if(Be(t))for(let i=0;i<t.length;i++)Ei(t[i],e,s);else if(Do(t)||oo(t))t.forEach(i=>{Ei(i,e,s)});else if(Nm(t)){for(const i in t)Ei(t[i],e,s);for(const i of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,i)&&Ei(t[i],e,s)}return t}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Kr(t,e,s,i){try{return i?t(...i):t()}catch(n){Na(n,e,s)}}function ti(t,e,s,i){if(He(t)){const n=Kr(t,e,s,i);return n&&Im(n)&&n.catch(o=>{Na(o,e,s)}),n}if(Be(t)){const n=[];for(let o=0;o<t.length;o++)n.push(ti(t[o],e,s,i));return n}}function Na(t,e,s,i=!0){const n=e?e.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:r}=e&&e.appContext.config||pt;if(e){let l=e.parent;const a=e.proxy,d=`https://vuejs.org/error-reference/#runtime-${s}`;for(;l;){const u=l.ec;if(u){for(let f=0;f<u.length;f++)if(u[f](t,a,d)===!1)return}l=l.parent}if(o){Li(),Kr(o,null,10,[t,a,d]),Ri();return}}k1(t,s,n,i,r)}function k1(t,e,s,i=!0,n=!1){if(n)throw t;console.error(t)}const hs=[];let hi=-1;const lo=[];let Wi=null,Yn=0;const ug=Promise.resolve();let oa=null;function On(t){const e=oa||ug;return t?e.then(this?t.bind(this):t):e}function x1(t){let e=hi+1,s=hs.length;for(;e<s;){const i=e+s>>>1,n=hs[i],o=xr(n);o<t||o===t&&n.flags&2?e=i+1:s=i}return e}function Tc(t){if(!(t.flags&1)){const e=xr(t),s=hs[hs.length-1];!s||!(t.flags&2)&&e>=xr(s)?hs.push(t):hs.splice(x1(e),0,t),t.flags|=1,dg()}}function dg(){oa||(oa=ug.then(fg))}function w1(t){Be(t)?lo.push(...t):Wi&&t.id===-1?Wi.splice(Yn+1,0,t):t.flags&1||(lo.push(t),t.flags|=1),dg()}function Qf(t,e,s=hi+1){for(;s<hs.length;s++){const i=hs[s];if(i&&i.flags&2){if(t&&i.id!==t.uid)continue;hs.splice(s,1),s--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function cg(t){if(lo.length){const e=[...new Set(lo)].sort((s,i)=>xr(s)-xr(i));if(lo.length=0,Wi){Wi.push(...e);return}for(Wi=e,Yn=0;Yn<Wi.length;Yn++){const s=Wi[Yn];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}Wi=null,Yn=0}}const xr=t=>t.id==null?t.flags&2?-1:1/0:t.id;function fg(t){try{for(hi=0;hi<hs.length;hi++){const e=hs[hi];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Kr(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;hi<hs.length;hi++){const e=hs[hi];e&&(e.flags&=-2)}hi=-1,hs.length=0,cg(),oa=null,(hs.length||lo.length)&&fg()}}let Kt=null,hg=null;function ra(t){const e=Kt;return Kt=t,hg=t&&t.type.__scopeId||null,e}function R(t,e=Kt,s){if(!e||t._n)return t;const i=(...n)=>{i._d&&da(-1);const o=ra(e);let r;try{r=t(...n)}finally{ra(o),i._d&&da(1)}return r};return i._n=!0,i._c=!0,i._d=!0,i}function Ke(t,e){if(Kt===null)return t;const s=Ka(Kt),i=t.dirs||(t.dirs=[]);for(let n=0;n<e.length;n++){let[o,r,l,a=pt]=e[n];o&&(He(o)&&(o={mounted:o,updated:o}),o.deep&&Ei(r),i.push({dir:o,instance:s,value:r,oldValue:void 0,arg:l,modifiers:a}))}return t}function yn(t,e,s,i){const n=t.dirs,o=e&&e.dirs;for(let r=0;r<n.length;r++){const l=n[r];o&&(l.oldValue=o[r].value);let a=l.dir[i];a&&(Li(),ti(a,s,8,[t.el,l,t,e]),Ri())}}const pg=Symbol("_vte"),mg=t=>t.__isTeleport,rr=t=>t&&(t.disabled||t.disabled===""),Xf=t=>t&&(t.defer||t.defer===""),Zf=t=>typeof SVGElement<"u"&&t instanceof SVGElement,eh=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,ad=(t,e)=>{const s=t&&t.to;return At(s)?e?e(s):null:s},gg={name:"Teleport",__isTeleport:!0,process(t,e,s,i,n,o,r,l,a,d){const{mc:u,pc:f,pbc:h,o:{insert:g,querySelector:_,createText:p,createComment:V}}=d,M=rr(e.props);let{shapeFlag:N,children:B,dynamicChildren:W}=e;if(t==null){const G=e.el=p(""),j=e.anchor=p("");g(G,s,i),g(j,s,i);const A=(ee,me)=>{N&16&&u(B,ee,me,n,o,r,l,a)},J=()=>{const ee=e.target=ad(e.props,_),me=yg(ee,e,p,g);ee&&(r!=="svg"&&Zf(ee)?r="svg":r!=="mathml"&&eh(ee)&&(r="mathml"),n&&n.isCE&&(n.ce._teleportTargets||(n.ce._teleportTargets=new Set)).add(ee),M||(A(ee,me),zl(e,!1)))};M&&(A(s,j),zl(e,!0)),Xf(e.props)?(e.el.__isMounted=!1,ds(()=>{J(),delete e.el.__isMounted},o)):J()}else{if(Xf(e.props)&&t.el.__isMounted===!1){ds(()=>{gg.process(t,e,s,i,n,o,r,l,a,d)},o);return}e.el=t.el,e.targetStart=t.targetStart;const G=e.anchor=t.anchor,j=e.target=t.target,A=e.targetAnchor=t.targetAnchor,J=rr(t.props),ee=J?s:j,me=J?G:A;if(r==="svg"||Zf(j)?r="svg":(r==="mathml"||eh(j))&&(r="mathml"),W?(h(t.dynamicChildren,W,ee,n,o,r,l),Oc(t,e,!0)):a||f(t,e,ee,me,n,o,r,l,!1),M)J?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):pl(e,s,G,d,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const te=e.target=ad(e.props,_);te&&pl(e,te,null,d,0)}else J&&pl(e,j,A,d,1);zl(e,M)}},remove(t,e,s,{um:i,o:{remove:n}},o){const{shapeFlag:r,children:l,anchor:a,targetStart:d,targetAnchor:u,target:f,props:h}=t;if(f&&(n(d),n(u)),o&&n(a),r&16){const g=o||!rr(h);for(let _=0;_<l.length;_++){const p=l[_];i(p,e,s,g,!!p.dynamicChildren)}}},move:pl,hydrate:_1};function pl(t,e,s,{o:{insert:i},m:n},o=2){o===0&&i(t.targetAnchor,e,s);const{el:r,anchor:l,shapeFlag:a,children:d,props:u}=t,f=o===2;if(f&&i(r,e,s),(!f||rr(u))&&a&16)for(let h=0;h<d.length;h++)n(d[h],e,s,2);f&&i(l,e,s)}function _1(t,e,s,i,n,o,{o:{nextSibling:r,parentNode:l,querySelector:a,insert:d,createText:u}},f){function h(p,V,M,N){V.anchor=f(r(p),V,l(p),s,i,n,o),V.targetStart=M,V.targetAnchor=N}const g=e.target=ad(e.props,a),_=rr(e.props);if(g){const p=g._lpa||g.firstChild;if(e.shapeFlag&16)if(_)h(t,e,p,p&&r(p));else{e.anchor=r(t);let V=p;for(;V;){if(V&&V.nodeType===8){if(V.data==="teleport start anchor")e.targetStart=V;else if(V.data==="teleport anchor"){e.targetAnchor=V,g._lpa=e.targetAnchor&&r(e.targetAnchor);break}}V=r(V)}e.targetAnchor||yg(g,e,u,d),f(p&&r(p),e,g,s,i,n,o)}zl(e,_)}else _&&e.shapeFlag&16&&h(t,e,t,r(t));return e.anchor&&r(e.anchor)}const vg=gg;function zl(t,e){const s=t.ctx;if(s&&s.ut){let i,n;for(e?(i=t.el,n=t.anchor):(i=t.targetStart,n=t.targetAnchor);i&&i!==n;)i.nodeType===1&&i.setAttribute("data-v-owner",s.uid),i=i.nextSibling;s.ut()}}function yg(t,e,s,i){const n=e.targetStart=s(""),o=e.targetAnchor=s("");return n[pg]=o,t&&(i(n,t),i(o,t)),o}const Ti=Symbol("_leaveCb"),ml=Symbol("_enterCb");function S1(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return os(()=>{t.isMounted=!0}),Vg(()=>{t.isUnmounting=!0}),t}const js=[Function,Array],bg={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:js,onEnter:js,onAfterEnter:js,onEnterCancelled:js,onBeforeLeave:js,onLeave:js,onAfterLeave:js,onLeaveCancelled:js,onBeforeAppear:js,onAppear:js,onAfterAppear:js,onAppearCancelled:js},kg=t=>{const e=t.subTree;return e.component?kg(e.component):e},C1={name:"BaseTransition",props:bg,setup(t,{slots:e}){const s=jc(),i=S1();return()=>{const n=e.default&&_g(e.default(),!0);if(!n||!n.length)return;const o=xg(n),r=it(t),{mode:l}=r;if(i.isLeaving)return bu(o);const a=th(o);if(!a)return bu(o);let d=ud(a,r,i,s,f=>d=f);a.type!==ts&&wr(a,d);let u=s.subTree&&th(s.subTree);if(u&&u.type!==ts&&!An(u,a)&&kg(s).type!==ts){let f=ud(u,r,i,s);if(wr(u,f),l==="out-in"&&a.type!==ts)return i.isLeaving=!0,f.afterLeave=()=>{i.isLeaving=!1,s.job.flags&8||s.update(),delete f.afterLeave,u=void 0},bu(o);l==="in-out"&&a.type!==ts?f.delayLeave=(h,g,_)=>{const p=wg(i,u);p[String(u.key)]=u,h[Ti]=()=>{g(),h[Ti]=void 0,delete d.delayedLeave,u=void 0},d.delayedLeave=()=>{_(),delete d.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return o}}};function xg(t){let e=t[0];if(t.length>1){for(const s of t)if(s.type!==ts){e=s;break}}return e}const A1=C1;function wg(t,e){const{leavingVNodes:s}=t;let i=s.get(e.type);return i||(i=Object.create(null),s.set(e.type,i)),i}function ud(t,e,s,i,n){const{appear:o,mode:r,persisted:l=!1,onBeforeEnter:a,onEnter:d,onAfterEnter:u,onEnterCancelled:f,onBeforeLeave:h,onLeave:g,onAfterLeave:_,onLeaveCancelled:p,onBeforeAppear:V,onAppear:M,onAfterAppear:N,onAppearCancelled:B}=e,W=String(t.key),G=wg(s,t),j=(ee,me)=>{ee&&ti(ee,i,9,me)},A=(ee,me)=>{const te=me[1];j(ee,me),Be(ee)?ee.every(F=>F.length<=1)&&te():ee.length<=1&&te()},J={mode:r,persisted:l,beforeEnter(ee){let me=a;if(!s.isMounted)if(o)me=V||a;else return;ee[Ti]&&ee[Ti](!0);const te=G[W];te&&An(t,te)&&te.el[Ti]&&te.el[Ti](),j(me,[ee])},enter(ee){let me=d,te=u,F=f;if(!s.isMounted)if(o)me=M||d,te=N||u,F=B||f;else return;let ce=!1;const le=ee[ml]=ve=>{ce||(ce=!0,ve?j(F,[ee]):j(te,[ee]),J.delayedLeave&&J.delayedLeave(),ee[ml]=void 0)};me?A(me,[ee,le]):le()},leave(ee,me){const te=String(t.key);if(ee[ml]&&ee[ml](!0),s.isUnmounting)return me();j(h,[ee]);let F=!1;const ce=ee[Ti]=le=>{F||(F=!0,me(),le?j(p,[ee]):j(_,[ee]),ee[Ti]=void 0,G[te]===t&&delete G[te])};G[te]=t,g?A(g,[ee,ce]):ce()},clone(ee){const me=ud(ee,e,s,i,n);return n&&n(me),me}};return J}function bu(t){if(za(t))return t=ln(t),t.children=null,t}function th(t){if(!za(t))return mg(t.type)&&t.children?xg(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:s}=t;if(s){if(e&16)return s[0];if(e&32&&He(s.default))return s.default()}}function wr(t,e){t.shapeFlag&6&&t.component?(t.transition=e,wr(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function _g(t,e=!1,s){let i=[],n=0;for(let o=0;o<t.length;o++){let r=t[o];const l=s==null?r.key:String(s)+String(r.key!=null?r.key:o);r.type===se?(r.patchFlag&128&&n++,i=i.concat(_g(r.children,e,l))):(e||r.type!==ts)&&i.push(l!=null?ln(r,{key:l}):r)}if(n>1)for(let o=0;o<i.length;o++)i[o].patchFlag=-2;return i}function Sg(t,e){return He(t)?Nt({name:t.name},e,{setup:t}):t}function Cg(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const la=new WeakMap;function lr(t,e,s,i,n=!1){if(Be(t)){t.forEach((_,p)=>lr(_,e&&(Be(e)?e[p]:e),s,i,n));return}if(ao(i)&&!n){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&lr(t,e,s,i.component.subTree);return}const o=i.shapeFlag&4?Ka(i.component):i.el,r=n?null:o,{i:l,r:a}=t,d=e&&e.r,u=l.refs===pt?l.refs={}:l.refs,f=l.setupState,h=it(f),g=f===pt?Bm:_=>rt(h,_);if(d!=null&&d!==a){if(sh(e),At(d))u[d]=null,g(d)&&(f[d]=null);else if(ns(d)){d.value=null;const _=e;_.k&&(u[_.k]=null)}}if(He(a))Kr(a,l,12,[r,u]);else{const _=At(a),p=ns(a);if(_||p){const V=()=>{if(t.f){const M=_?g(a)?f[a]:u[a]:a.value;if(n)Be(M)&&kc(M,o);else if(Be(M))M.includes(o)||M.push(o);else if(_)u[a]=[o],g(a)&&(f[a]=u[a]);else{const N=[o];a.value=N,t.k&&(u[t.k]=N)}}else _?(u[a]=r,g(a)&&(f[a]=r)):p&&(a.value=r,t.k&&(u[t.k]=r))};if(r){const M=()=>{V(),la.delete(t)};M.id=-1,la.set(t,M),ds(M,s)}else sh(t),V()}}}function sh(t){const e=la.get(t);e&&(e.flags|=8,la.delete(t))}Ia().requestIdleCallback;Ia().cancelIdleCallback;const ao=t=>!!t.type.__asyncLoader,za=t=>t.type.__isKeepAlive;function V1(t,e){Ag(t,"a",e)}function M1(t,e){Ag(t,"da",e)}function Ag(t,e,s=ss){const i=t.__wdc||(t.__wdc=()=>{let n=s;for(;n;){if(n.isDeactivated)return;n=n.parent}return t()});if(Fa(e,i,s),s){let n=s.parent;for(;n&&n.parent;)za(n.parent.vnode)&&D1(i,e,s,n),n=n.parent}}function D1(t,e,s,i){const n=Fa(e,t,i,!0);To(()=>{kc(i[e],n)},s)}function Fa(t,e,s=ss,i=!1){if(s){const n=s[t]||(s[t]=[]),o=e.__weh||(e.__weh=(...r)=>{Li();const l=Gr(s),a=ti(e,s,t,r);return l(),Ri(),a});return i?n.unshift(o):n.push(o),o}}const Ni=t=>(e,s=ss)=>{(!Cr||t==="sp")&&Fa(t,(...i)=>e(...i),s)},T1=Ni("bm"),os=Ni("m"),$1=Ni("bu"),E1=Ni("u"),Vg=Ni("bum"),To=Ni("um"),O1=Ni("sp"),P1=Ni("rtg"),j1=Ni("rtc");function L1(t,e=ss){Fa("ec",t,e)}const Mg="components";function aa(t,e){return Tg(Mg,t,!0,e)||t}const Dg=Symbol.for("v-ndc");function Es(t){return At(t)?Tg(Mg,t,!1)||t:t||Dg}function Tg(t,e,s=!0,i=!1){const n=Kt||ss;if(n){const o=n.type;{const l=Ck(o,!1);if(l&&(l===e||l===Hs(e)||l===Ba(Hs(e))))return o}const r=ih(n[t]||o[t],e)||ih(n.appContext[t],e);return!r&&i?o:r}}function ih(t,e){return t&&(t[e]||t[Hs(e)]||t[Ba(Hs(e))])}function ke(t,e,s,i){let n;const o=s,r=Be(t);if(r||At(t)){const l=r&&ro(t);let a=!1,d=!1;l&&(a=!Us(t),d=rn(t),t=Ua(t)),n=new Array(t.length);for(let u=0,f=t.length;u<f;u++)n[u]=e(a?d?ia(Ht(t[u])):Ht(t[u]):t[u],u,void 0,o)}else if(typeof t=="number"){n=new Array(t);for(let l=0;l<t;l++)n[l]=e(l+1,l,void 0,o)}else if(dt(t))if(t[Symbol.iterator])n=Array.from(t,(l,a)=>e(l,a,void 0,o));else{const l=Object.keys(t);n=new Array(l.length);for(let a=0,d=l.length;a<d;a++){const u=l[a];n[a]=e(t[u],u,a,o)}}else n=[];return n}function R1(t,e){for(let s=0;s<e.length;s++){const i=e[s];if(Be(i))for(let n=0;n<i.length;n++)t[i[n].name]=i[n].fn;else i&&(t[i.name]=i.key?(...n)=>{const o=i.fn(...n);return o&&(o.key=i.key),o}:i.fn)}return t}function vt(t,e,s={},i,n){if(Kt.ce||Kt.parent&&ao(Kt.parent)&&Kt.parent.ce){const d=Object.keys(s).length>0;return e!=="default"&&(s.name=e),v(),ge(se,null,[x("slot",s,i&&i())],d?-2:64)}let o=t[e];o&&o._c&&(o._d=!1),v();const r=o&&$g(o(s)),l=s.key||r&&r.key,a=ge(se,{key:(l&&!ei(l)?l:`_${e}`)+(!r&&i?"_fb":"")},r||(i?i():[]),r&&t._===1?64:-2);return!n&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),o&&o._c&&(o._d=!0),a}function $g(t){return t.some(e=>Sr(e)?!(e.type===ts||e.type===se&&!$g(e.children)):!0)?t:null}const dd=t=>t?Yg(t)?Ka(t):dd(t.parent):null,ar=Nt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>dd(t.parent),$root:t=>dd(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Og(t),$forceUpdate:t=>t.f||(t.f=()=>{Tc(t.update)}),$nextTick:t=>t.n||(t.n=On.bind(t.proxy)),$watch:t=>rk.bind(t)}),ku=(t,e)=>t!==pt&&!t.__isScriptSetup&&rt(t,e),B1={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:s,setupState:i,data:n,props:o,accessCache:r,type:l,appContext:a}=t;let d;if(e[0]!=="$"){const g=r[e];if(g!==void 0)switch(g){case 1:return i[e];case 2:return n[e];case 4:return s[e];case 3:return o[e]}else{if(ku(i,e))return r[e]=1,i[e];if(n!==pt&&rt(n,e))return r[e]=2,n[e];if((d=t.propsOptions[0])&&rt(d,e))return r[e]=3,o[e];if(s!==pt&&rt(s,e))return r[e]=4,s[e];cd&&(r[e]=0)}}const u=ar[e];let f,h;if(u)return e==="$attrs"&&es(t.attrs,"get",""),u(t);if((f=l.__cssModules)&&(f=f[e]))return f;if(s!==pt&&rt(s,e))return r[e]=4,s[e];if(h=a.config.globalProperties,rt(h,e))return h[e]},set({_:t},e,s){const{data:i,setupState:n,ctx:o}=t;return ku(n,e)?(n[e]=s,!0):i!==pt&&rt(i,e)?(i[e]=s,!0):rt(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(o[e]=s,!0)},has({_:{data:t,setupState:e,accessCache:s,ctx:i,appContext:n,propsOptions:o,type:r}},l){let a,d;return!!(s[l]||t!==pt&&l[0]!=="$"&&rt(t,l)||ku(e,l)||(a=o[0])&&rt(a,l)||rt(i,l)||rt(ar,l)||rt(n.config.globalProperties,l)||(d=r.__cssModules)&&d[l])},defineProperty(t,e,s){return s.get!=null?t._.accessCache[e]=0:rt(s,"value")&&this.set(t,e,s.value,null),Reflect.defineProperty(t,e,s)}};function I1(){return U1().slots}function U1(t){const e=jc();return e.setupContext||(e.setupContext=Xg(e))}function nh(t){return Be(t)?t.reduce((e,s)=>(e[s]=null,e),{}):t}let cd=!0;function N1(t){const e=Og(t),s=t.proxy,i=t.ctx;cd=!1,e.beforeCreate&&oh(e.beforeCreate,t,"bc");const{data:n,computed:o,methods:r,watch:l,provide:a,inject:d,created:u,beforeMount:f,mounted:h,beforeUpdate:g,updated:_,activated:p,deactivated:V,beforeDestroy:M,beforeUnmount:N,destroyed:B,unmounted:W,render:G,renderTracked:j,renderTriggered:A,errorCaptured:J,serverPrefetch:ee,expose:me,inheritAttrs:te,components:F,directives:ce,filters:le}=e;if(d&&z1(d,i,null),r)for(const X in r){const Q=r[X];He(Q)&&(i[X]=Q.bind(s))}if(n){const X=n.call(s,s);dt(X)&&(t.data=Ys(X))}if(cd=!0,o)for(const X in o){const Q=o[X],Ee=He(Q)?Q.bind(s,s):He(Q.get)?Q.get.bind(s,s):xi,E=!He(Q)&&He(Q.set)?Q.set.bind(s):xi,xe=re({get:Ee,set:E});Object.defineProperty(i,X,{enumerable:!0,configurable:!0,get:()=>xe.value,set:Oe=>xe.value=Oe})}if(l)for(const X in l)Eg(l[X],i,s,X);if(a){const X=He(a)?a.call(s):a;Reflect.ownKeys(X).forEach(Q=>{Fl(Q,X[Q])})}u&&oh(u,t,"c");function Y(X,Q){Be(Q)?Q.forEach(Ee=>X(Ee.bind(s))):Q&&X(Q.bind(s))}if(Y(T1,f),Y(os,h),Y($1,g),Y(E1,_),Y(V1,p),Y(M1,V),Y(L1,J),Y(j1,j),Y(P1,A),Y(Vg,N),Y(To,W),Y(O1,ee),Be(me))if(me.length){const X=t.exposed||(t.exposed={});me.forEach(Q=>{Object.defineProperty(X,Q,{get:()=>s[Q],set:Ee=>s[Q]=Ee,enumerable:!0})})}else t.exposed||(t.exposed={});G&&t.render===xi&&(t.render=G),te!=null&&(t.inheritAttrs=te),F&&(t.components=F),ce&&(t.directives=ce),ee&&Cg(t)}function z1(t,e,s=xi){Be(t)&&(t=fd(t));for(const i in t){const n=t[i];let o;dt(n)?"default"in n?o=Zs(n.from||i,n.default,!0):o=Zs(n.from||i):o=Zs(n),ns(o)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>o.value,set:r=>o.value=r}):e[i]=o}}function oh(t,e,s){ti(Be(t)?t.map(i=>i.bind(e.proxy)):t.bind(e.proxy),e,s)}function Eg(t,e,s,i){let n=i.includes(".")?Wg(s,i):()=>s[i];if(At(t)){const o=e[t];He(o)&&ze(n,o)}else if(He(t))ze(n,t.bind(s));else if(dt(t))if(Be(t))t.forEach(o=>Eg(o,e,s,i));else{const o=He(t.handler)?t.handler.bind(s):e[t.handler];He(o)&&ze(n,o,t)}}function Og(t){const e=t.type,{mixins:s,extends:i}=e,{mixins:n,optionsCache:o,config:{optionMergeStrategies:r}}=t.appContext,l=o.get(e);let a;return l?a=l:!n.length&&!s&&!i?a=e:(a={},n.length&&n.forEach(d=>ua(a,d,r,!0)),ua(a,e,r)),dt(e)&&o.set(e,a),a}function ua(t,e,s,i=!1){const{mixins:n,extends:o}=e;o&&ua(t,o,s,!0),n&&n.forEach(r=>ua(t,r,s,!0));for(const r in e)if(!(i&&r==="expose")){const l=F1[r]||s&&s[r];t[r]=l?l(t[r],e[r]):e[r]}return t}const F1={data:rh,props:lh,emits:lh,methods:Xo,computed:Xo,beforeCreate:us,created:us,beforeMount:us,mounted:us,beforeUpdate:us,updated:us,beforeDestroy:us,beforeUnmount:us,destroyed:us,unmounted:us,activated:us,deactivated:us,errorCaptured:us,serverPrefetch:us,components:Xo,directives:Xo,watch:W1,provide:rh,inject:H1};function rh(t,e){return e?t?function(){return Nt(He(t)?t.call(this,this):t,He(e)?e.call(this,this):e)}:e:t}function H1(t,e){return Xo(fd(t),fd(e))}function fd(t){if(Be(t)){const e={};for(let s=0;s<t.length;s++)e[t[s]]=t[s];return e}return t}function us(t,e){return t?[...new Set([].concat(t,e))]:e}function Xo(t,e){return t?Nt(Object.create(null),t,e):e}function lh(t,e){return t?Be(t)&&Be(e)?[...new Set([...t,...e])]:Nt(Object.create(null),nh(t),nh(e??{})):e}function W1(t,e){if(!t)return e;if(!e)return t;const s=Nt(Object.create(null),t);for(const i in e)s[i]=us(t[i],e[i]);return s}function Pg(){return{app:null,config:{isNativeTag:Bm,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let q1=0;function K1(t,e){return function(i,n=null){He(i)||(i=Nt({},i)),n!=null&&!dt(n)&&(n=null);const o=Pg(),r=new WeakSet,l=[];let a=!1;const d=o.app={_uid:q1++,_component:i,_props:n,_container:null,_context:o,_instance:null,version:Vk,get config(){return o.config},set config(u){},use(u,...f){return r.has(u)||(u&&He(u.install)?(r.add(u),u.install(d,...f)):He(u)&&(r.add(u),u(d,...f))),d},mixin(u){return o.mixins.includes(u)||o.mixins.push(u),d},component(u,f){return f?(o.components[u]=f,d):o.components[u]},directive(u,f){return f?(o.directives[u]=f,d):o.directives[u]},mount(u,f,h){if(!a){const g=d._ceVNode||x(i,n);return g.appContext=o,h===!0?h="svg":h===!1&&(h=void 0),t(g,u,h),a=!0,d._container=u,u.__vue_app__=d,Ka(g.component)}},onUnmount(u){l.push(u)},unmount(){a&&(ti(l,d._instance,16),t(null,d._container),delete d._container.__vue_app__)},provide(u,f){return o.provides[u]=f,d},runWithContext(u){const f=uo;uo=d;try{return u()}finally{uo=f}}};return d}}let uo=null;function Fl(t,e){if(ss){let s=ss.provides;const i=ss.parent&&ss.parent.provides;i===s&&(s=ss.provides=Object.create(i)),s[t]=e}}function Zs(t,e,s=!1){const i=jc();if(i||uo){let n=uo?uo._context.provides:i?i.parent==null||i.ce?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(n&&t in n)return n[t];if(arguments.length>1)return s&&He(e)?e.call(i&&i.proxy):e}}const jg={},Lg=()=>Object.create(jg),Rg=t=>Object.getPrototypeOf(t)===jg;function G1(t,e,s,i=!1){const n={},o=Lg();t.propsDefaults=Object.create(null),Bg(t,e,n,o);for(const r in t.propsOptions[0])r in n||(n[r]=void 0);s?t.props=i?n:rg(n):t.type.props?t.props=n:t.props=o,t.attrs=o}function J1(t,e,s,i){const{props:n,attrs:o,vnode:{patchFlag:r}}=t,l=it(n),[a]=t.propsOptions;let d=!1;if((i||r>0)&&!(r&16)){if(r&8){const u=t.vnode.dynamicProps;for(let f=0;f<u.length;f++){let h=u[f];if(Ha(t.emitsOptions,h))continue;const g=e[h];if(a)if(rt(o,h))g!==o[h]&&(o[h]=g,d=!0);else{const _=Hs(h);n[_]=hd(a,l,_,g,t,!1)}else g!==o[h]&&(o[h]=g,d=!0)}}}else{Bg(t,e,n,o)&&(d=!0);let u;for(const f in l)(!e||!rt(e,f)&&((u=Fn(f))===f||!rt(e,u)))&&(a?s&&(s[f]!==void 0||s[u]!==void 0)&&(n[f]=hd(a,l,f,void 0,t,!0)):delete n[f]);if(o!==l)for(const f in o)(!e||!rt(e,f))&&(delete o[f],d=!0)}d&&$i(t.attrs,"set","")}function Bg(t,e,s,i){const[n,o]=t.propsOptions;let r=!1,l;if(e)for(let a in e){if(ir(a))continue;const d=e[a];let u;n&&rt(n,u=Hs(a))?!o||!o.includes(u)?s[u]=d:(l||(l={}))[u]=d:Ha(t.emitsOptions,a)||(!(a in i)||d!==i[a])&&(i[a]=d,r=!0)}if(o){const a=it(s),d=l||pt;for(let u=0;u<o.length;u++){const f=o[u];s[f]=hd(n,a,f,d[f],t,!rt(d,f))}}return r}function hd(t,e,s,i,n,o){const r=t[s];if(r!=null){const l=rt(r,"default");if(l&&i===void 0){const a=r.default;if(r.type!==Function&&!r.skipFactory&&He(a)){const{propsDefaults:d}=n;if(s in d)i=d[s];else{const u=Gr(n);i=d[s]=a.call(null,e),u()}}else i=a;n.ce&&n.ce._setProp(s,i)}r[0]&&(o&&!l?i=!1:r[1]&&(i===""||i===Fn(s))&&(i=!0))}return i}const Y1=new WeakMap;function Ig(t,e,s=!1){const i=s?Y1:e.propsCache,n=i.get(t);if(n)return n;const o=t.props,r={},l=[];let a=!1;if(!He(t)){const u=f=>{a=!0;const[h,g]=Ig(f,e,!0);Nt(r,h),g&&l.push(...g)};!s&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!o&&!a)return dt(t)&&i.set(t,no),no;if(Be(o))for(let u=0;u<o.length;u++){const f=Hs(o[u]);ah(f)&&(r[f]=pt)}else if(o)for(const u in o){const f=Hs(u);if(ah(f)){const h=o[u],g=r[f]=Be(h)||He(h)?{type:h}:Nt({},h),_=g.type;let p=!1,V=!0;if(Be(_))for(let M=0;M<_.length;++M){const N=_[M],B=He(N)&&N.name;if(B==="Boolean"){p=!0;break}else B==="String"&&(V=!1)}else p=He(_)&&_.name==="Boolean";g[0]=p,g[1]=V,(p||rt(g,"default"))&&l.push(f)}}const d=[r,l];return dt(t)&&i.set(t,d),d}function ah(t){return t[0]!=="$"&&!ir(t)}const $c=t=>t==="_"||t==="_ctx"||t==="$stable",Ec=t=>Be(t)?t.map(pi):[pi(t)],Q1=(t,e,s)=>{if(e._n)return e;const i=R((...n)=>Ec(e(...n)),s);return i._c=!1,i},Ug=(t,e,s)=>{const i=t._ctx;for(const n in t){if($c(n))continue;const o=t[n];if(He(o))e[n]=Q1(n,o,i);else if(o!=null){const r=Ec(o);e[n]=()=>r}}},Ng=(t,e)=>{const s=Ec(e);t.slots.default=()=>s},zg=(t,e,s)=>{for(const i in e)(s||!$c(i))&&(t[i]=e[i])},X1=(t,e,s)=>{const i=t.slots=Lg();if(t.vnode.shapeFlag&32){const n=e._;n?(zg(i,e,s),s&&zm(i,"_",n,!0)):Ug(e,i)}else e&&Ng(t,e)},Z1=(t,e,s)=>{const{vnode:i,slots:n}=t;let o=!0,r=pt;if(i.shapeFlag&32){const l=e._;l?s&&l===1?o=!1:zg(n,e,s):(o=!e.$stable,Ug(e,n)),r=e}else e&&(Ng(t,e),r={default:1});if(o)for(const l in n)!$c(l)&&r[l]==null&&delete n[l]},ds=pk;function ek(t){return tk(t)}function tk(t,e){const s=Ia();s.__VUE__=!0;const{insert:i,remove:n,patchProp:o,createElement:r,createText:l,createComment:a,setText:d,setElementText:u,parentNode:f,nextSibling:h,setScopeId:g=xi,insertStaticContent:_}=t,p=(C,P,z,Z=null,de=null,ne=null,we=void 0,ye=null,O=!!P.dynamicChildren)=>{if(C===P)return;C&&!An(C,P)&&(Z=D(C),Oe(C,de,ne,!0),C=null),P.patchFlag===-2&&(O=!1,P.dynamicChildren=null);const{type:he,ref:je,shapeFlag:Ce}=P;switch(he){case Wa:V(C,P,z,Z);break;case ts:M(C,P,z,Z);break;case Hl:C==null&&N(P,z,Z,we);break;case se:F(C,P,z,Z,de,ne,we,ye,O);break;default:Ce&1?G(C,P,z,Z,de,ne,we,ye,O):Ce&6?ce(C,P,z,Z,de,ne,we,ye,O):(Ce&64||Ce&128)&&he.process(C,P,z,Z,de,ne,we,ye,O,L)}je!=null&&de?lr(je,C&&C.ref,ne,P||C,!P):je==null&&C&&C.ref!=null&&lr(C.ref,null,ne,C,!0)},V=(C,P,z,Z)=>{if(C==null)i(P.el=l(P.children),z,Z);else{const de=P.el=C.el;P.children!==C.children&&d(de,P.children)}},M=(C,P,z,Z)=>{C==null?i(P.el=a(P.children||""),z,Z):P.el=C.el},N=(C,P,z,Z)=>{[C.el,C.anchor]=_(C.children,P,z,Z,C.el,C.anchor)},B=({el:C,anchor:P},z,Z)=>{let de;for(;C&&C!==P;)de=h(C),i(C,z,Z),C=de;i(P,z,Z)},W=({el:C,anchor:P})=>{let z;for(;C&&C!==P;)z=h(C),n(C),C=z;n(P)},G=(C,P,z,Z,de,ne,we,ye,O)=>{P.type==="svg"?we="svg":P.type==="math"&&(we="mathml"),C==null?j(P,z,Z,de,ne,we,ye,O):ee(C,P,de,ne,we,ye,O)},j=(C,P,z,Z,de,ne,we,ye)=>{let O,he;const{props:je,shapeFlag:Ce,transition:Ae,dirs:Ue}=C;if(O=C.el=r(C.type,ne,je&&je.is,je),Ce&8?u(O,C.children):Ce&16&&J(C.children,O,null,Z,de,xu(C,ne),we,ye),Ue&&yn(C,null,Z,"created"),A(O,C,C.scopeId,we,Z),je){for(const Je in je)Je!=="value"&&!ir(Je)&&o(O,Je,null,je[Je],ne,Z);"value"in je&&o(O,"value",null,je.value,ne),(he=je.onVnodeBeforeMount)&&ai(he,Z,C)}Ue&&yn(C,null,Z,"beforeMount");const Fe=sk(de,Ae);Fe&&Ae.beforeEnter(O),i(O,P,z),((he=je&&je.onVnodeMounted)||Fe||Ue)&&ds(()=>{he&&ai(he,Z,C),Fe&&Ae.enter(O),Ue&&yn(C,null,Z,"mounted")},de)},A=(C,P,z,Z,de)=>{if(z&&g(C,z),Z)for(let ne=0;ne<Z.length;ne++)g(C,Z[ne]);if(de){let ne=de.subTree;if(P===ne||Kg(ne.type)&&(ne.ssContent===P||ne.ssFallback===P)){const we=de.vnode;A(C,we,we.scopeId,we.slotScopeIds,de.parent)}}},J=(C,P,z,Z,de,ne,we,ye,O=0)=>{for(let he=O;he<C.length;he++){const je=C[he]=ye?qi(C[he]):pi(C[he]);p(null,je,P,z,Z,de,ne,we,ye)}},ee=(C,P,z,Z,de,ne,we)=>{const ye=P.el=C.el;let{patchFlag:O,dynamicChildren:he,dirs:je}=P;O|=C.patchFlag&16;const Ce=C.props||pt,Ae=P.props||pt;let Ue;if(z&&bn(z,!1),(Ue=Ae.onVnodeBeforeUpdate)&&ai(Ue,z,P,C),je&&yn(P,C,z,"beforeUpdate"),z&&bn(z,!0),(Ce.innerHTML&&Ae.innerHTML==null||Ce.textContent&&Ae.textContent==null)&&u(ye,""),he?me(C.dynamicChildren,he,ye,z,Z,xu(P,de),ne):we||Q(C,P,ye,null,z,Z,xu(P,de),ne,!1),O>0){if(O&16)te(ye,Ce,Ae,z,de);else if(O&2&&Ce.class!==Ae.class&&o(ye,"class",null,Ae.class,de),O&4&&o(ye,"style",Ce.style,Ae.style,de),O&8){const Fe=P.dynamicProps;for(let Je=0;Je<Fe.length;Je++){const qe=Fe[Je],Ie=Ce[qe],Ze=Ae[qe];(Ze!==Ie||qe==="value")&&o(ye,qe,Ie,Ze,de,z)}}O&1&&C.children!==P.children&&u(ye,P.children)}else!we&&he==null&&te(ye,Ce,Ae,z,de);((Ue=Ae.onVnodeUpdated)||je)&&ds(()=>{Ue&&ai(Ue,z,P,C),je&&yn(P,C,z,"updated")},Z)},me=(C,P,z,Z,de,ne,we)=>{for(let ye=0;ye<P.length;ye++){const O=C[ye],he=P[ye],je=O.el&&(O.type===se||!An(O,he)||O.shapeFlag&198)?f(O.el):z;p(O,he,je,null,Z,de,ne,we,!0)}},te=(C,P,z,Z,de)=>{if(P!==z){if(P!==pt)for(const ne in P)!ir(ne)&&!(ne in z)&&o(C,ne,P[ne],null,de,Z);for(const ne in z){if(ir(ne))continue;const we=z[ne],ye=P[ne];we!==ye&&ne!=="value"&&o(C,ne,ye,we,de,Z)}"value"in z&&o(C,"value",P.value,z.value,de)}},F=(C,P,z,Z,de,ne,we,ye,O)=>{const he=P.el=C?C.el:l(""),je=P.anchor=C?C.anchor:l("");let{patchFlag:Ce,dynamicChildren:Ae,slotScopeIds:Ue}=P;Ue&&(ye=ye?ye.concat(Ue):Ue),C==null?(i(he,z,Z),i(je,z,Z),J(P.children||[],z,je,de,ne,we,ye,O)):Ce>0&&Ce&64&&Ae&&C.dynamicChildren?(me(C.dynamicChildren,Ae,z,de,ne,we,ye),(P.key!=null||de&&P===de.subTree)&&Oc(C,P,!0)):Q(C,P,z,je,de,ne,we,ye,O)},ce=(C,P,z,Z,de,ne,we,ye,O)=>{P.slotScopeIds=ye,C==null?P.shapeFlag&512?de.ctx.activate(P,z,Z,we,O):le(P,z,Z,de,ne,we,O):ve(C,P,O)},le=(C,P,z,Z,de,ne,we)=>{const ye=C.component=xk(C,Z,de);if(za(C)&&(ye.ctx.renderer=L),wk(ye,!1,we),ye.asyncDep){if(de&&de.registerDep(ye,Y,we),!C.el){const O=ye.subTree=x(ts);M(null,O,P,z),C.placeholder=O.el}}else Y(ye,C,P,z,de,ne,we)},ve=(C,P,z)=>{const Z=P.component=C.component;if(fk(C,P,z))if(Z.asyncDep&&!Z.asyncResolved){X(Z,P,z);return}else Z.next=P,Z.update();else P.el=C.el,Z.vnode=P},Y=(C,P,z,Z,de,ne,we)=>{const ye=()=>{if(C.isMounted){let{next:Ce,bu:Ae,u:Ue,parent:Fe,vnode:Je}=C;{const as=Fg(C);if(as){Ce&&(Ce.el=Je.el,X(C,Ce,we)),as.asyncDep.then(()=>{C.isUnmounted||ye()});return}}let qe=Ce,Ie;bn(C,!1),Ce?(Ce.el=Je.el,X(C,Ce,we)):Ce=Je,Ae&&Nl(Ae),(Ie=Ce.props&&Ce.props.onVnodeBeforeUpdate)&&ai(Ie,Fe,Ce,Je),bn(C,!0);const Ze=dh(C),wt=C.subTree;C.subTree=Ze,p(wt,Ze,f(wt.el),D(wt),C,de,ne),Ce.el=Ze.el,qe===null&&hk(C,Ze.el),Ue&&ds(Ue,de),(Ie=Ce.props&&Ce.props.onVnodeUpdated)&&ds(()=>ai(Ie,Fe,Ce,Je),de)}else{let Ce;const{el:Ae,props:Ue}=P,{bm:Fe,m:Je,parent:qe,root:Ie,type:Ze}=C,wt=ao(P);bn(C,!1),Fe&&Nl(Fe),!wt&&(Ce=Ue&&Ue.onVnodeBeforeMount)&&ai(Ce,qe,P),bn(C,!0);{Ie.ce&&Ie.ce._def.shadowRoot!==!1&&Ie.ce._injectChildStyle(Ze);const as=C.subTree=dh(C);p(null,as,z,Z,C,de,ne),P.el=as.el}if(Je&&ds(Je,de),!wt&&(Ce=Ue&&Ue.onVnodeMounted)){const as=P;ds(()=>ai(Ce,qe,as),de)}(P.shapeFlag&256||qe&&ao(qe.vnode)&&qe.vnode.shapeFlag&256)&&C.a&&ds(C.a,de),C.isMounted=!0,P=z=Z=null}};C.scope.on();const O=C.effect=new qm(ye);C.scope.off();const he=C.update=O.run.bind(O),je=C.job=O.runIfDirty.bind(O);je.i=C,je.id=C.uid,O.scheduler=()=>Tc(je),bn(C,!0),he()},X=(C,P,z)=>{P.component=C;const Z=C.vnode.props;C.vnode=P,C.next=null,J1(C,P.props,Z,z),Z1(C,P.children,z),Li(),Qf(C),Ri()},Q=(C,P,z,Z,de,ne,we,ye,O=!1)=>{const he=C&&C.children,je=C?C.shapeFlag:0,Ce=P.children,{patchFlag:Ae,shapeFlag:Ue}=P;if(Ae>0){if(Ae&128){E(he,Ce,z,Z,de,ne,we,ye,O);return}else if(Ae&256){Ee(he,Ce,z,Z,de,ne,we,ye,O);return}}Ue&8?(je&16&&at(he,de,ne),Ce!==he&&u(z,Ce)):je&16?Ue&16?E(he,Ce,z,Z,de,ne,we,ye,O):at(he,de,ne,!0):(je&8&&u(z,""),Ue&16&&J(Ce,z,Z,de,ne,we,ye,O))},Ee=(C,P,z,Z,de,ne,we,ye,O)=>{C=C||no,P=P||no;const he=C.length,je=P.length,Ce=Math.min(he,je);let Ae;for(Ae=0;Ae<Ce;Ae++){const Ue=P[Ae]=O?qi(P[Ae]):pi(P[Ae]);p(C[Ae],Ue,z,null,de,ne,we,ye,O)}he>je?at(C,de,ne,!0,!1,Ce):J(P,z,Z,de,ne,we,ye,O,Ce)},E=(C,P,z,Z,de,ne,we,ye,O)=>{let he=0;const je=P.length;let Ce=C.length-1,Ae=je-1;for(;he<=Ce&&he<=Ae;){const Ue=C[he],Fe=P[he]=O?qi(P[he]):pi(P[he]);if(An(Ue,Fe))p(Ue,Fe,z,null,de,ne,we,ye,O);else break;he++}for(;he<=Ce&&he<=Ae;){const Ue=C[Ce],Fe=P[Ae]=O?qi(P[Ae]):pi(P[Ae]);if(An(Ue,Fe))p(Ue,Fe,z,null,de,ne,we,ye,O);else break;Ce--,Ae--}if(he>Ce){if(he<=Ae){const Ue=Ae+1,Fe=Ue<je?P[Ue].el:Z;for(;he<=Ae;)p(null,P[he]=O?qi(P[he]):pi(P[he]),z,Fe,de,ne,we,ye,O),he++}}else if(he>Ae)for(;he<=Ce;)Oe(C[he],de,ne,!0),he++;else{const Ue=he,Fe=he,Je=new Map;for(he=Fe;he<=Ae;he++){const Tt=P[he]=O?qi(P[he]):pi(P[he]);Tt.key!=null&&Je.set(Tt.key,he)}let qe,Ie=0;const Ze=Ae-Fe+1;let wt=!1,as=0;const vs=new Array(Ze);for(he=0;he<Ze;he++)vs[he]=0;for(he=Ue;he<=Ce;he++){const Tt=C[he];if(Ie>=Ze){Oe(Tt,de,ne,!0);continue}let ct;if(Tt.key!=null)ct=Je.get(Tt.key);else for(qe=Fe;qe<=Ae;qe++)if(vs[qe-Fe]===0&&An(Tt,P[qe])){ct=qe;break}ct===void 0?Oe(Tt,de,ne,!0):(vs[ct-Fe]=he+1,ct>=as?as=ct:wt=!0,p(Tt,P[ct],z,null,de,ne,we,ye,O),Ie++)}const Ks=wt?ik(vs):no;for(qe=Ks.length-1,he=Ze-1;he>=0;he--){const Tt=Fe+he,ct=P[Tt],Yt=P[Tt+1],Wn=Tt+1<je?Yt.el||Yt.placeholder:Z;vs[he]===0?p(null,ct,z,Wn,de,ne,we,ye,O):wt&&(qe<0||he!==Ks[qe]?xe(ct,z,Wn,2):qe--)}}},xe=(C,P,z,Z,de=null)=>{const{el:ne,type:we,transition:ye,children:O,shapeFlag:he}=C;if(he&6){xe(C.component.subTree,P,z,Z);return}if(he&128){C.suspense.move(P,z,Z);return}if(he&64){we.move(C,P,z,L);return}if(we===se){i(ne,P,z);for(let Ce=0;Ce<O.length;Ce++)xe(O[Ce],P,z,Z);i(C.anchor,P,z);return}if(we===Hl){B(C,P,z);return}if(Z!==2&&he&1&&ye)if(Z===0)ye.beforeEnter(ne),i(ne,P,z),ds(()=>ye.enter(ne),de);else{const{leave:Ce,delayLeave:Ae,afterLeave:Ue}=ye,Fe=()=>{C.ctx.isUnmounted?n(ne):i(ne,P,z)},Je=()=>{ne._isLeaving&&ne[Ti](!0),Ce(ne,()=>{Fe(),Ue&&Ue()})};Ae?Ae(ne,Fe,Je):Je()}else i(ne,P,z)},Oe=(C,P,z,Z=!1,de=!1)=>{const{type:ne,props:we,ref:ye,children:O,dynamicChildren:he,shapeFlag:je,patchFlag:Ce,dirs:Ae,cacheIndex:Ue}=C;if(Ce===-2&&(de=!1),ye!=null&&(Li(),lr(ye,null,z,C,!0),Ri()),Ue!=null&&(P.renderCache[Ue]=void 0),je&256){P.ctx.deactivate(C);return}const Fe=je&1&&Ae,Je=!ao(C);let qe;if(Je&&(qe=we&&we.onVnodeBeforeUnmount)&&ai(qe,P,C),je&6)yt(C.component,z,Z);else{if(je&128){C.suspense.unmount(z,Z);return}Fe&&yn(C,null,P,"beforeUnmount"),je&64?C.type.remove(C,P,z,L,Z):he&&!he.hasOnce&&(ne!==se||Ce>0&&Ce&64)?at(he,P,z,!1,!0):(ne===se&&Ce&384||!de&&je&16)&&at(O,P,z),Z&&Qe(C)}(Je&&(qe=we&&we.onVnodeUnmounted)||Fe)&&ds(()=>{qe&&ai(qe,P,C),Fe&&yn(C,null,P,"unmounted")},z)},Qe=C=>{const{type:P,el:z,anchor:Z,transition:de}=C;if(P===se){Ge(z,Z);return}if(P===Hl){W(C);return}const ne=()=>{n(z),de&&!de.persisted&&de.afterLeave&&de.afterLeave()};if(C.shapeFlag&1&&de&&!de.persisted){const{leave:we,delayLeave:ye}=de,O=()=>we(z,ne);ye?ye(C.el,ne,O):O()}else ne()},Ge=(C,P)=>{let z;for(;C!==P;)z=h(C),n(C),C=z;n(P)},yt=(C,P,z)=>{const{bum:Z,scope:de,job:ne,subTree:we,um:ye,m:O,a:he}=C;uh(O),uh(he),Z&&Nl(Z),de.stop(),ne&&(ne.flags|=8,Oe(we,C,P,z)),ye&&ds(ye,P),ds(()=>{C.isUnmounted=!0},P)},at=(C,P,z,Z=!1,de=!1,ne=0)=>{for(let we=ne;we<C.length;we++)Oe(C[we],P,z,Z,de)},D=C=>{if(C.shapeFlag&6)return D(C.component.subTree);if(C.shapeFlag&128)return C.suspense.next();const P=h(C.anchor||C.el),z=P&&P[pg];return z?h(z):P};let S=!1;const m=(C,P,z)=>{C==null?P._vnode&&Oe(P._vnode,null,null,!0):p(P._vnode||null,C,P,null,null,null,z),P._vnode=C,S||(S=!0,Qf(),cg(),S=!1)},L={p,um:Oe,m:xe,r:Qe,mt:le,mc:J,pc:Q,pbc:me,n:D,o:t};return{render:m,hydrate:void 0,createApp:K1(m)}}function xu({type:t,props:e},s){return s==="svg"&&t==="foreignObject"||s==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:s}function bn({effect:t,job:e},s){s?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function sk(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Oc(t,e,s=!1){const i=t.children,n=e.children;if(Be(i)&&Be(n))for(let o=0;o<i.length;o++){const r=i[o];let l=n[o];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=n[o]=qi(n[o]),l.el=r.el),!s&&l.patchFlag!==-2&&Oc(r,l)),l.type===Wa&&l.patchFlag!==-1&&(l.el=r.el),l.type===ts&&!l.el&&(l.el=r.el)}}function ik(t){const e=t.slice(),s=[0];let i,n,o,r,l;const a=t.length;for(i=0;i<a;i++){const d=t[i];if(d!==0){if(n=s[s.length-1],t[n]<d){e[i]=n,s.push(i);continue}for(o=0,r=s.length-1;o<r;)l=o+r>>1,t[s[l]]<d?o=l+1:r=l;d<t[s[o]]&&(o>0&&(e[i]=s[o-1]),s[o]=i)}}for(o=s.length,r=s[o-1];o-- >0;)s[o]=r,r=e[r];return s}function Fg(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Fg(e)}function uh(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const nk=Symbol.for("v-scx"),ok=()=>Zs(nk);function ze(t,e,s){return Hg(t,e,s)}function Hg(t,e,s=pt){const{immediate:i,deep:n,flush:o,once:r}=s,l=Nt({},s),a=e&&i||!e&&o!=="post";let d;if(Cr){if(o==="sync"){const g=ok();d=g.__watcherHandles||(g.__watcherHandles=[])}else if(!a){const g=()=>{};return g.stop=xi,g.resume=xi,g.pause=xi,g}}const u=ss;l.call=(g,_,p)=>ti(g,u,_,p);let f=!1;o==="post"?l.scheduler=g=>{ds(g,u&&u.suspense)}:o!=="sync"&&(f=!0,l.scheduler=(g,_)=>{_?g():Tc(g)}),l.augmentJob=g=>{e&&(g.flags|=4),f&&(g.flags|=2,u&&(g.id=u.uid,g.i=u))};const h=b1(t,e,l);return Cr&&(d?d.push(h):a&&h()),h}function rk(t,e,s){const i=this.proxy,n=At(t)?t.includes(".")?Wg(i,t):()=>i[t]:t.bind(i,i);let o;He(e)?o=e:(o=e.handler,s=e);const r=Gr(this),l=Hg(n,o.bind(i),s);return r(),l}function Wg(t,e){const s=e.split(".");return()=>{let i=t;for(let n=0;n<s.length&&i;n++)i=i[s[n]];return i}}const lk=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Hs(e)}Modifiers`]||t[`${Fn(e)}Modifiers`];function ak(t,e,...s){if(t.isUnmounted)return;const i=t.vnode.props||pt;let n=s;const o=e.startsWith("update:"),r=o&&lk(i,e.slice(7));r&&(r.trim&&(n=s.map(u=>At(u)?u.trim():u)),r.number&&(n=s.map(sa)));let l,a=i[l=pu(e)]||i[l=pu(Hs(e))];!a&&o&&(a=i[l=pu(Fn(e))]),a&&ti(a,t,6,n);const d=i[l+"Once"];if(d){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,ti(d,t,6,n)}}const uk=new WeakMap;function qg(t,e,s=!1){const i=s?uk:e.emitsCache,n=i.get(t);if(n!==void 0)return n;const o=t.emits;let r={},l=!1;if(!He(t)){const a=d=>{const u=qg(d,e,!0);u&&(l=!0,Nt(r,u))};!s&&e.mixins.length&&e.mixins.forEach(a),t.extends&&a(t.extends),t.mixins&&t.mixins.forEach(a)}return!o&&!l?(dt(t)&&i.set(t,null),null):(Be(o)?o.forEach(a=>r[a]=null):Nt(r,o),dt(t)&&i.set(t,r),r)}function Ha(t,e){return!t||!La(e)?!1:(e=e.slice(2).replace(/Once$/,""),rt(t,e[0].toLowerCase()+e.slice(1))||rt(t,Fn(e))||rt(t,e))}function dh(t){const{type:e,vnode:s,proxy:i,withProxy:n,propsOptions:[o],slots:r,attrs:l,emit:a,render:d,renderCache:u,props:f,data:h,setupState:g,ctx:_,inheritAttrs:p}=t,V=ra(t);let M,N;try{if(s.shapeFlag&4){const W=n||i,G=W;M=pi(d.call(G,W,u,f,g,h,_)),N=l}else{const W=e;M=pi(W.length>1?W(f,{attrs:l,slots:r,emit:a}):W(f,null)),N=e.props?l:dk(l)}}catch(W){ur.length=0,Na(W,t,1),M=x(ts)}let B=M;if(N&&p!==!1){const W=Object.keys(N),{shapeFlag:G}=B;W.length&&G&7&&(o&&W.some(bc)&&(N=ck(N,o)),B=ln(B,N,!1,!0))}return s.dirs&&(B=ln(B,null,!1,!0),B.dirs=B.dirs?B.dirs.concat(s.dirs):s.dirs),s.transition&&wr(B,s.transition),M=B,ra(V),M}const dk=t=>{let e;for(const s in t)(s==="class"||s==="style"||La(s))&&((e||(e={}))[s]=t[s]);return e},ck=(t,e)=>{const s={};for(const i in t)(!bc(i)||!(i.slice(9)in e))&&(s[i]=t[i]);return s};function fk(t,e,s){const{props:i,children:n,component:o}=t,{props:r,children:l,patchFlag:a}=e,d=o.emitsOptions;if(e.dirs||e.transition)return!0;if(s&&a>=0){if(a&1024)return!0;if(a&16)return i?ch(i,r,d):!!r;if(a&8){const u=e.dynamicProps;for(let f=0;f<u.length;f++){const h=u[f];if(r[h]!==i[h]&&!Ha(d,h))return!0}}}else return(n||l)&&(!l||!l.$stable)?!0:i===r?!1:i?r?ch(i,r,d):!0:!!r;return!1}function ch(t,e,s){const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!0;for(let n=0;n<i.length;n++){const o=i[n];if(e[o]!==t[o]&&!Ha(s,o))return!0}return!1}function hk({vnode:t,parent:e},s){for(;e;){const i=e.subTree;if(i.suspense&&i.suspense.activeBranch===t&&(i.el=t.el),i===t)(t=e.vnode).el=s,e=e.parent;else break}}const Kg=t=>t.__isSuspense;function pk(t,e){e&&e.pendingBranch?Be(t)?e.effects.push(...t):e.effects.push(t):w1(t)}const se=Symbol.for("v-fgt"),Wa=Symbol.for("v-txt"),ts=Symbol.for("v-cmt"),Hl=Symbol.for("v-stc"),ur=[];let Ts=null;function v(t=!1){ur.push(Ts=t?null:[])}function mk(){ur.pop(),Ts=ur[ur.length-1]||null}let _r=1;function da(t,e=!1){_r+=t,t<0&&Ts&&e&&(Ts.hasOnce=!0)}function Gg(t){return t.dynamicChildren=_r>0?Ts||no:null,mk(),_r>0&&Ts&&Ts.push(t),t}function b(t,e,s,i,n,o){return Gg(c(t,e,s,i,n,o,!0))}function ge(t,e,s,i,n){return Gg(x(t,e,s,i,n,!0))}function Sr(t){return t?t.__v_isVNode===!0:!1}function An(t,e){return t.type===e.type&&t.key===e.key}const Jg=({key:t})=>t??null,Wl=({ref:t,ref_key:e,ref_for:s})=>(typeof t=="number"&&(t=""+t),t!=null?At(t)||ns(t)||He(t)?{i:Kt,r:t,k:e,f:!!s}:t:null);function c(t,e=null,s=null,i=0,n=null,o=t===se?0:1,r=!1,l=!1){const a={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Jg(e),ref:e&&Wl(e),scopeId:hg,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:i,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:Kt};return l?(Pc(a,s),o&128&&t.normalize(a)):s&&(a.shapeFlag|=At(s)?8:16),_r>0&&!r&&Ts&&(a.patchFlag>0||o&6)&&a.patchFlag!==32&&Ts.push(a),a}const x=gk;function gk(t,e=null,s=null,i=0,n=null,o=!1){if((!t||t===Dg)&&(t=ts),Sr(t)){const l=ln(t,e,!0);return s&&Pc(l,s),_r>0&&!o&&Ts&&(l.shapeFlag&6?Ts[Ts.indexOf(t)]=l:Ts.push(l)),l.patchFlag=-2,l}if(Ak(t)&&(t=t.__vccOpts),e){e=vk(e);let{class:l,style:a}=e;l&&!At(l)&&(e.class=Me(l)),dt(a)&&(Dc(a)&&!Be(a)&&(a=Nt({},a)),e.style=yr(a))}const r=At(t)?1:Kg(t)?128:mg(t)?64:dt(t)?4:He(t)?2:0;return c(t,e,s,i,n,r,o,!0)}function vk(t){return t?Dc(t)||Rg(t)?Nt({},t):t:null}function ln(t,e,s=!1,i=!1){const{props:n,ref:o,patchFlag:r,children:l,transition:a}=t,d=e?yk(n||{},e):n,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:d,key:d&&Jg(d),ref:e&&e.ref?s&&o?Be(o)?o.concat(Wl(e)):[o,Wl(e)]:Wl(e):o,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==se?r===-1?16:r|16:r,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:a,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&ln(t.ssContent),ssFallback:t.ssFallback&&ln(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return a&&i&&wr(u,a.clone(u)),u}function oe(t=" ",e=0){return x(Wa,null,t,e)}function qa(t,e){const s=x(Hl,null,t);return s.staticCount=e,s}function I(t="",e=!1){return e?(v(),ge(ts,null,t)):x(ts,null,t)}function pi(t){return t==null||typeof t=="boolean"?x(ts):Be(t)?x(se,null,t.slice()):Sr(t)?qi(t):x(Wa,null,String(t))}function qi(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:ln(t)}function Pc(t,e){let s=0;const{shapeFlag:i}=t;if(e==null)e=null;else if(Be(e))s=16;else if(typeof e=="object")if(i&65){const n=e.default;n&&(n._c&&(n._d=!1),Pc(t,n()),n._c&&(n._d=!0));return}else{s=32;const n=e._;!n&&!Rg(e)?e._ctx=Kt:n===3&&Kt&&(Kt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else He(e)?(e={default:e,_ctx:Kt},s=32):(e=String(e),i&64?(s=16,e=[oe(e)]):s=8);t.children=e,t.shapeFlag|=s}function yk(...t){const e={};for(let s=0;s<t.length;s++){const i=t[s];for(const n in i)if(n==="class")e.class!==i.class&&(e.class=Me([e.class,i.class]));else if(n==="style")e.style=yr([e.style,i.style]);else if(La(n)){const o=e[n],r=i[n];r&&o!==r&&!(Be(o)&&o.includes(r))&&(e[n]=o?[].concat(o,r):r)}else n!==""&&(e[n]=i[n])}return e}function ai(t,e,s,i=null){ti(t,e,7,[s,i])}const bk=Pg();let kk=0;function xk(t,e,s){const i=t.type,n=(e?e.appContext:t.appContext)||bk,o={uid:kk++,vnode:t,type:i,parent:e,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new qb(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(n.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ig(i,n),emitsOptions:qg(i,n),emit:null,emitted:null,propsDefaults:pt,inheritAttrs:i.inheritAttrs,ctx:pt,data:pt,props:pt,attrs:pt,slots:pt,refs:pt,setupState:pt,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=ak.bind(null,o),t.ce&&t.ce(o),o}let ss=null;const jc=()=>ss||Kt;let ca,pd;{const t=Ia(),e=(s,i)=>{let n;return(n=t[s])||(n=t[s]=[]),n.push(i),o=>{n.length>1?n.forEach(r=>r(o)):n[0](o)}};ca=e("__VUE_INSTANCE_SETTERS__",s=>ss=s),pd=e("__VUE_SSR_SETTERS__",s=>Cr=s)}const Gr=t=>{const e=ss;return ca(t),t.scope.on(),()=>{t.scope.off(),ca(e)}},fh=()=>{ss&&ss.scope.off(),ca(null)};function Yg(t){return t.vnode.shapeFlag&4}let Cr=!1;function wk(t,e=!1,s=!1){e&&pd(e);const{props:i,children:n}=t.vnode,o=Yg(t);G1(t,i,o,e),X1(t,n,s||e);const r=o?_k(t,e):void 0;return e&&pd(!1),r}function _k(t,e){const s=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,B1);const{setup:i}=s;if(i){Li();const n=t.setupContext=i.length>1?Xg(t):null,o=Gr(t),r=Kr(i,t,0,[t.props,n]),l=Im(r);if(Ri(),o(),(l||t.sp)&&!ao(t)&&Cg(t),l){if(r.then(fh,fh),e)return r.then(a=>{hh(t,a)}).catch(a=>{Na(a,t,0)});t.asyncDep=r}else hh(t,r)}else Qg(t)}function hh(t,e,s){He(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:dt(e)&&(t.setupState=ag(e)),Qg(t)}function Qg(t,e,s){const i=t.type;t.render||(t.render=i.render||xi);{const n=Gr(t);Li();try{N1(t)}finally{Ri(),n()}}}const Sk={get(t,e){return es(t,"get",""),t[e]}};function Xg(t){const e=s=>{t.exposed=s||{}};return{attrs:new Proxy(t.attrs,Sk),slots:t.slots,emit:t.emit,expose:e}}function Ka(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(ag(f1(t.exposed)),{get(e,s){if(s in e)return e[s];if(s in ar)return ar[s](t)},has(e,s){return s in e||s in ar}})):t.proxy}function Ck(t,e=!0){return He(t)?t.displayName||t.name:t.name||e&&t.__name}function Ak(t){return He(t)&&"__vccOpts"in t}const re=(t,e)=>v1(t,e,Cr);function Ot(t,e,s){try{da(-1);const i=arguments.length;return i===2?dt(e)&&!Be(e)?Sr(e)?x(t,null,[e]):x(t,e):x(t,null,e):(i>3?s=Array.prototype.slice.call(arguments,2):i===3&&Sr(s)&&(s=[s]),x(t,e,s))}finally{da(1)}}const Vk="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let md;const ph=typeof window<"u"&&window.trustedTypes;if(ph)try{md=ph.createPolicy("vue",{createHTML:t=>t})}catch{}const Zg=md?t=>md.createHTML(t):t=>t,Mk="http://www.w3.org/2000/svg",Dk="http://www.w3.org/1998/Math/MathML",Di=typeof document<"u"?document:null,mh=Di&&Di.createElement("template"),Tk={insert:(t,e,s)=>{e.insertBefore(t,s||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,s,i)=>{const n=e==="svg"?Di.createElementNS(Mk,t):e==="mathml"?Di.createElementNS(Dk,t):s?Di.createElement(t,{is:s}):Di.createElement(t);return t==="select"&&i&&i.multiple!=null&&n.setAttribute("multiple",i.multiple),n},createText:t=>Di.createTextNode(t),createComment:t=>Di.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Di.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,s,i,n,o){const r=s?s.previousSibling:e.lastChild;if(n&&(n===o||n.nextSibling))for(;e.insertBefore(n.cloneNode(!0),s),!(n===o||!(n=n.nextSibling)););else{mh.innerHTML=Zg(i==="svg"?`<svg>${t}</svg>`:i==="mathml"?`<math>${t}</math>`:t);const l=mh.content;if(i==="svg"||i==="mathml"){const a=l.firstChild;for(;a.firstChild;)l.appendChild(a.firstChild);l.removeChild(a)}e.insertBefore(l,s)}return[r?r.nextSibling:e.firstChild,s?s.previousSibling:e.lastChild]}},Fi="transition",Fo="animation",Ar=Symbol("_vtc"),e0={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},$k=Nt({},bg,e0),Ek=t=>(t.displayName="Transition",t.props=$k,t),Lc=Ek((t,{slots:e})=>Ot(A1,Ok(t),e)),kn=(t,e=[])=>{Be(t)?t.forEach(s=>s(...e)):t&&t(...e)},gh=t=>t?Be(t)?t.some(e=>e.length>1):t.length>1:!1;function Ok(t){const e={};for(const F in t)F in e0||(e[F]=t[F]);if(t.css===!1)return e;const{name:s="v",type:i,duration:n,enterFromClass:o=`${s}-enter-from`,enterActiveClass:r=`${s}-enter-active`,enterToClass:l=`${s}-enter-to`,appearFromClass:a=o,appearActiveClass:d=r,appearToClass:u=l,leaveFromClass:f=`${s}-leave-from`,leaveActiveClass:h=`${s}-leave-active`,leaveToClass:g=`${s}-leave-to`}=t,_=Pk(n),p=_&&_[0],V=_&&_[1],{onBeforeEnter:M,onEnter:N,onEnterCancelled:B,onLeave:W,onLeaveCancelled:G,onBeforeAppear:j=M,onAppear:A=N,onAppearCancelled:J=B}=e,ee=(F,ce,le,ve)=>{F._enterCancelled=ve,xn(F,ce?u:l),xn(F,ce?d:r),le&&le()},me=(F,ce)=>{F._isLeaving=!1,xn(F,f),xn(F,g),xn(F,h),ce&&ce()},te=F=>(ce,le)=>{const ve=F?A:N,Y=()=>ee(ce,F,le);kn(ve,[ce,Y]),vh(()=>{xn(ce,F?a:o),Ai(ce,F?u:l),gh(ve)||yh(ce,i,p,Y)})};return Nt(e,{onBeforeEnter(F){kn(M,[F]),Ai(F,o),Ai(F,r)},onBeforeAppear(F){kn(j,[F]),Ai(F,a),Ai(F,d)},onEnter:te(!1),onAppear:te(!0),onLeave(F,ce){F._isLeaving=!0;const le=()=>me(F,ce);Ai(F,f),F._enterCancelled?(Ai(F,h),xh(F)):(xh(F),Ai(F,h)),vh(()=>{F._isLeaving&&(xn(F,f),Ai(F,g),gh(W)||yh(F,i,V,le))}),kn(W,[F,le])},onEnterCancelled(F){ee(F,!1,void 0,!0),kn(B,[F])},onAppearCancelled(F){ee(F,!0,void 0,!0),kn(J,[F])},onLeaveCancelled(F){me(F),kn(G,[F])}})}function Pk(t){if(t==null)return null;if(dt(t))return[wu(t.enter),wu(t.leave)];{const e=wu(t);return[e,e]}}function wu(t){return Bb(t)}function Ai(t,e){e.split(/\s+/).forEach(s=>s&&t.classList.add(s)),(t[Ar]||(t[Ar]=new Set)).add(e)}function xn(t,e){e.split(/\s+/).forEach(i=>i&&t.classList.remove(i));const s=t[Ar];s&&(s.delete(e),s.size||(t[Ar]=void 0))}function vh(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let jk=0;function yh(t,e,s,i){const n=t._endId=++jk,o=()=>{n===t._endId&&i()};if(s!=null)return setTimeout(o,s);const{type:r,timeout:l,propCount:a}=Lk(t,e);if(!r)return i();const d=r+"end";let u=0;const f=()=>{t.removeEventListener(d,h),o()},h=g=>{g.target===t&&++u>=a&&f()};setTimeout(()=>{u<a&&f()},l+1),t.addEventListener(d,h)}function Lk(t,e){const s=window.getComputedStyle(t),i=_=>(s[_]||"").split(", "),n=i(`${Fi}Delay`),o=i(`${Fi}Duration`),r=bh(n,o),l=i(`${Fo}Delay`),a=i(`${Fo}Duration`),d=bh(l,a);let u=null,f=0,h=0;e===Fi?r>0&&(u=Fi,f=r,h=o.length):e===Fo?d>0&&(u=Fo,f=d,h=a.length):(f=Math.max(r,d),u=f>0?r>d?Fi:Fo:null,h=u?u===Fi?o.length:a.length:0);const g=u===Fi&&/\b(?:transform|all)(?:,|$)/.test(i(`${Fi}Property`).toString());return{type:u,timeout:f,propCount:h,hasTransform:g}}function bh(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((s,i)=>kh(s)+kh(t[i])))}function kh(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function xh(t){return(t?t.ownerDocument:document).body.offsetHeight}function Rk(t,e,s){const i=t[Ar];i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?t.removeAttribute("class"):s?t.setAttribute("class",e):t.className=e}const fa=Symbol("_vod"),t0=Symbol("_vsh"),nt={name:"show",beforeMount(t,{value:e},{transition:s}){t[fa]=t.style.display==="none"?"":t.style.display,s&&e?s.beforeEnter(t):Ho(t,e)},mounted(t,{value:e},{transition:s}){s&&e&&s.enter(t)},updated(t,{value:e,oldValue:s},{transition:i}){!e!=!s&&(i?e?(i.beforeEnter(t),Ho(t,!0),i.enter(t)):i.leave(t,()=>{Ho(t,!1)}):Ho(t,e))},beforeUnmount(t,{value:e}){Ho(t,e)}};function Ho(t,e){t.style.display=e?t[fa]:"none",t[t0]=!e}const Bk=Symbol(""),Ik=/(?:^|;)\s*display\s*:/;function Uk(t,e,s){const i=t.style,n=At(s);let o=!1;if(s&&!n){if(e)if(At(e))for(const r of e.split(";")){const l=r.slice(0,r.indexOf(":")).trim();s[l]==null&&ql(i,l,"")}else for(const r in e)s[r]==null&&ql(i,r,"");for(const r in s)r==="display"&&(o=!0),ql(i,r,s[r])}else if(n){if(e!==s){const r=i[Bk];r&&(s+=";"+r),i.cssText=s,o=Ik.test(s)}}else e&&t.removeAttribute("style");fa in t&&(t[fa]=o?i.display:"",t[t0]&&(i.display="none"))}const wh=/\s*!important$/;function ql(t,e,s){if(Be(s))s.forEach(i=>ql(t,e,i));else if(s==null&&(s=""),e.startsWith("--"))t.setProperty(e,s);else{const i=Nk(t,e);wh.test(s)?t.setProperty(Fn(i),s.replace(wh,""),"important"):t[i]=s}}const _h=["Webkit","Moz","ms"],_u={};function Nk(t,e){const s=_u[e];if(s)return s;let i=Hs(e);if(i!=="filter"&&i in t)return _u[e]=i;i=Ba(i);for(let n=0;n<_h.length;n++){const o=_h[n]+i;if(o in t)return _u[e]=o}return e}const Sh="http://www.w3.org/1999/xlink";function Ch(t,e,s,i,n,o=Hb(e)){i&&e.startsWith("xlink:")?s==null?t.removeAttributeNS(Sh,e.slice(6,e.length)):t.setAttributeNS(Sh,e,s):s==null||o&&!Fm(s)?t.removeAttribute(e):t.setAttribute(e,o?"":ei(s)?String(s):s)}function Ah(t,e,s,i,n){if(e==="innerHTML"||e==="textContent"){s!=null&&(t[e]=e==="innerHTML"?Zg(s):s);return}const o=t.tagName;if(e==="value"&&o!=="PROGRESS"&&!o.includes("-")){const l=o==="OPTION"?t.getAttribute("value")||"":t.value,a=s==null?t.type==="checkbox"?"on":"":String(s);(l!==a||!("_value"in t))&&(t.value=a),s==null&&t.removeAttribute(e),t._value=s;return}let r=!1;if(s===""||s==null){const l=typeof t[e];l==="boolean"?s=Fm(s):s==null&&l==="string"?(s="",r=!0):l==="number"&&(s=0,r=!0)}try{t[e]=s}catch{}r&&t.removeAttribute(n||e)}function Oi(t,e,s,i){t.addEventListener(e,s,i)}function zk(t,e,s,i){t.removeEventListener(e,s,i)}const Vh=Symbol("_vei");function Fk(t,e,s,i,n=null){const o=t[Vh]||(t[Vh]={}),r=o[e];if(i&&r)r.value=i;else{const[l,a]=Hk(e);if(i){const d=o[e]=Kk(i,n);Oi(t,l,d,a)}else r&&(zk(t,l,r,a),o[e]=void 0)}}const Mh=/(?:Once|Passive|Capture)$/;function Hk(t){let e;if(Mh.test(t)){e={};let i;for(;i=t.match(Mh);)t=t.slice(0,t.length-i[0].length),e[i[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Fn(t.slice(2)),e]}let Su=0;const Wk=Promise.resolve(),qk=()=>Su||(Wk.then(()=>Su=0),Su=Date.now());function Kk(t,e){const s=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=s.attached)return;ti(Gk(i,s.value),e,5,[i])};return s.value=t,s.attached=qk(),s}function Gk(t,e){if(Be(e)){const s=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{s.call(t),t._stopped=!0},e.map(i=>n=>!n._stopped&&i&&i(n))}else return e}const Dh=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Jk=(t,e,s,i,n,o)=>{const r=n==="svg";e==="class"?Rk(t,i,r):e==="style"?Uk(t,s,i):La(e)?bc(e)||Fk(t,e,s,i,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Yk(t,e,i,r))?(Ah(t,e,i),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Ch(t,e,i,r,o,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!At(i))?Ah(t,Hs(e),i,o,e):(e==="true-value"?t._trueValue=i:e==="false-value"&&(t._falseValue=i),Ch(t,e,i,r))};function Yk(t,e,s,i){if(i)return!!(e==="innerHTML"||e==="textContent"||e in t&&Dh(e)&&He(s));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const n=t.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return Dh(e)&&At(s)?!1:e in t}const an=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Be(e)?s=>Nl(e,s):e};function Qk(t){t.target.composing=!0}function Th(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Ns=Symbol("_assign"),vo={created(t,{modifiers:{lazy:e,trim:s,number:i}},n){t[Ns]=an(n);const o=i||n.props&&n.props.type==="number";Oi(t,e?"change":"input",r=>{if(r.target.composing)return;let l=t.value;s&&(l=l.trim()),o&&(l=sa(l)),t[Ns](l)}),s&&Oi(t,"change",()=>{t.value=t.value.trim()}),e||(Oi(t,"compositionstart",Qk),Oi(t,"compositionend",Th),Oi(t,"change",Th))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:s,modifiers:{lazy:i,trim:n,number:o}},r){if(t[Ns]=an(r),t.composing)return;const l=(o||t.type==="number")&&!/^0\d/.test(t.value)?sa(t.value):t.value,a=e??"";l!==a&&(document.activeElement===t&&t.type!=="range"&&(i&&e===s||n&&t.value.trim()===a)||(t.value=a))}},Xk={deep:!0,created(t,e,s){t[Ns]=an(s),Oi(t,"change",()=>{const i=t._modelValue,n=yo(t),o=t.checked,r=t[Ns];if(Be(i)){const l=wc(i,n),a=l!==-1;if(o&&!a)r(i.concat(n));else if(!o&&a){const d=[...i];d.splice(l,1),r(d)}}else if(Do(i)){const l=new Set(i);o?l.add(n):l.delete(n),r(l)}else r(i0(t,o))})},mounted:$h,beforeUpdate(t,e,s){t[Ns]=an(s),$h(t,e,s)}};function $h(t,{value:e,oldValue:s},i){t._modelValue=e;let n;if(Be(e))n=wc(e,i.props.value)>-1;else if(Do(e))n=e.has(i.props.value);else{if(e===s)return;n=Ln(e,i0(t,!0))}t.checked!==n&&(t.checked=n)}const gd={created(t,{value:e},s){t.checked=Ln(e,s.props.value),t[Ns]=an(s),Oi(t,"change",()=>{t[Ns](yo(t))})},beforeUpdate(t,{value:e,oldValue:s},i){t[Ns]=an(i),e!==s&&(t.checked=Ln(e,i.props.value))}},s0={deep:!0,created(t,{value:e,modifiers:{number:s}},i){const n=Do(e);Oi(t,"change",()=>{const o=Array.prototype.filter.call(t.options,r=>r.selected).map(r=>s?sa(yo(r)):yo(r));t[Ns](t.multiple?n?new Set(o):o:o[0]),t._assigning=!0,On(()=>{t._assigning=!1})}),t[Ns]=an(i)},mounted(t,{value:e}){Eh(t,e)},beforeUpdate(t,e,s){t[Ns]=an(s)},updated(t,{value:e}){t._assigning||Eh(t,e)}};function Eh(t,e){const s=t.multiple,i=Be(e);if(!(s&&!i&&!Do(e))){for(let n=0,o=t.options.length;n<o;n++){const r=t.options[n],l=yo(r);if(s)if(i){const a=typeof l;a==="string"||a==="number"?r.selected=e.some(d=>String(d)===String(l)):r.selected=wc(e,l)>-1}else r.selected=e.has(l);else if(Ln(yo(r),e)){t.selectedIndex!==n&&(t.selectedIndex=n);return}}!s&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function yo(t){return"_value"in t?t._value:t.value}function i0(t,e){const s=e?"_trueValue":"_falseValue";return s in t?t[s]:e}const Zk={created(t,e,s){gl(t,e,s,null,"created")},mounted(t,e,s){gl(t,e,s,null,"mounted")},beforeUpdate(t,e,s,i){gl(t,e,s,i,"beforeUpdate")},updated(t,e,s,i){gl(t,e,s,i,"updated")}};function ex(t,e){switch(t){case"SELECT":return s0;case"TEXTAREA":return vo;default:switch(e){case"checkbox":return Xk;case"radio":return gd;default:return vo}}}function gl(t,e,s,i,n){const r=ex(t.tagName,s.props&&s.props.type)[n];r&&r(t,e,s,i)}const tx=["ctrl","shift","alt","meta"],sx={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>tx.some(s=>t[`${s}Key`]&&!e.includes(s))},It=(t,e)=>{const s=t._withMods||(t._withMods={}),i=e.join(".");return s[i]||(s[i]=((n,...o)=>{for(let r=0;r<e.length;r++){const l=sx[e[r]];if(l&&l(n,e))return}return t(n,...o)}))},ix=Nt({patchProp:Jk},Tk);let Oh;function nx(){return Oh||(Oh=ek(ix))}const ox=((...t)=>{const e=nx().createApp(...t),{mount:s}=e;return e.mount=i=>{const n=lx(i);if(!n)return;const o=e._component;!He(o)&&!o.render&&!o.template&&(o.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const r=s(n,!1,rx(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),r},e});function rx(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function lx(t){return At(t)?document.querySelector(t):t}const ax="/framework-logo.png";/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const Qn=typeof document<"u";function n0(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function ux(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&n0(t.default)}const ot=Object.assign;function Cu(t,e){const s={};for(const i in e){const n=e[i];s[i]=si(n)?n.map(t):t(n)}return s}const dr=()=>{},si=Array.isArray;function Ph(t,e){const s={};for(const i in t)s[i]=i in e?e[i]:t[i];return s}const o0=/#/g,dx=/&/g,cx=/\//g,fx=/=/g,hx=/\?/g,r0=/\+/g,px=/%5B/g,mx=/%5D/g,l0=/%5E/g,gx=/%60/g,a0=/%7B/g,vx=/%7C/g,u0=/%7D/g,yx=/%20/g;function Rc(t){return t==null?"":encodeURI(""+t).replace(vx,"|").replace(px,"[").replace(mx,"]")}function bx(t){return Rc(t).replace(a0,"{").replace(u0,"}").replace(l0,"^")}function vd(t){return Rc(t).replace(r0,"%2B").replace(yx,"+").replace(o0,"%23").replace(dx,"%26").replace(gx,"`").replace(a0,"{").replace(u0,"}").replace(l0,"^")}function kx(t){return vd(t).replace(fx,"%3D")}function xx(t){return Rc(t).replace(o0,"%23").replace(hx,"%3F")}function wx(t){return xx(t).replace(cx,"%2F")}function Vr(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const _x=/\/$/,Sx=t=>t.replace(_x,"");function Au(t,e,s="/"){let i,n={},o="",r="";const l=e.indexOf("#");let a=e.indexOf("?");return a=l>=0&&a>l?-1:a,a>=0&&(i=e.slice(0,a),o=e.slice(a,l>0?l:e.length),n=t(o.slice(1))),l>=0&&(i=i||e.slice(0,l),r=e.slice(l,e.length)),i=Mx(i??e,s),{fullPath:i+o+r,path:i,query:n,hash:Vr(r)}}function Cx(t,e){const s=e.query?t(e.query):"";return e.path+(s&&"?")+s+(e.hash||"")}function jh(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function Ax(t,e,s){const i=e.matched.length-1,n=s.matched.length-1;return i>-1&&i===n&&bo(e.matched[i],s.matched[n])&&d0(e.params,s.params)&&t(e.query)===t(s.query)&&e.hash===s.hash}function bo(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function d0(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const s in t)if(!Vx(t[s],e[s]))return!1;return!0}function Vx(t,e){return si(t)?Lh(t,e):si(e)?Lh(e,t):t===e}function Lh(t,e){return si(e)?t.length===e.length&&t.every((s,i)=>s===e[i]):t.length===1&&t[0]===e}function Mx(t,e){if(t.startsWith("/"))return t;if(!t)return e;const s=e.split("/"),i=t.split("/"),n=i[i.length-1];(n===".."||n===".")&&i.push("");let o=s.length-1,r,l;for(r=0;r<i.length;r++)if(l=i[r],l!==".")if(l==="..")o>1&&o--;else break;return s.slice(0,o).join("/")+"/"+i.slice(r).join("/")}const Hi={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let yd=(function(t){return t.pop="pop",t.push="push",t})({}),Vu=(function(t){return t.back="back",t.forward="forward",t.unknown="",t})({});function Dx(t){if(!t)if(Qn){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),Sx(t)}const Tx=/^[^#]+#/;function $x(t,e){return t.replace(Tx,"#")+e}function Ex(t,e){const s=document.documentElement.getBoundingClientRect(),i=t.getBoundingClientRect();return{behavior:e.behavior,left:i.left-s.left-(e.left||0),top:i.top-s.top-(e.top||0)}}const Ga=()=>({left:window.scrollX,top:window.scrollY});function Ox(t){let e;if("el"in t){const s=t.el,i=typeof s=="string"&&s.startsWith("#"),n=typeof s=="string"?i?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!n)return;e=Ex(n,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Rh(t,e){return(history.state?history.state.position-e:-1)+t}const bd=new Map;function Px(t,e){bd.set(t,e)}function jx(t){const e=bd.get(t);return bd.delete(t),e}function Lx(t){return typeof t=="string"||t&&typeof t=="object"}function c0(t){return typeof t=="string"||typeof t=="symbol"}let Dt=(function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t})({});const f0=Symbol("");Dt.MATCHER_NOT_FOUND+"",Dt.NAVIGATION_GUARD_REDIRECT+"",Dt.NAVIGATION_ABORTED+"",Dt.NAVIGATION_CANCELLED+"",Dt.NAVIGATION_DUPLICATED+"";function ko(t,e){return ot(new Error,{type:t,[f0]:!0},e)}function Vi(t,e){return t instanceof Error&&f0 in t&&(e==null||!!(t.type&e))}const Rx=["params","query","hash"];function Bx(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const s of Rx)s in t&&(e[s]=t[s]);return JSON.stringify(e,null,2)}function Ix(t){const e={};if(t===""||t==="?")return e;const s=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<s.length;++i){const n=s[i].replace(r0," "),o=n.indexOf("="),r=Vr(o<0?n:n.slice(0,o)),l=o<0?null:Vr(n.slice(o+1));if(r in e){let a=e[r];si(a)||(a=e[r]=[a]),a.push(l)}else e[r]=l}return e}function Bh(t){let e="";for(let s in t){const i=t[s];if(s=kx(s),i==null){i!==void 0&&(e+=(e.length?"&":"")+s);continue}(si(i)?i.map(n=>n&&vd(n)):[i&&vd(i)]).forEach(n=>{n!==void 0&&(e+=(e.length?"&":"")+s,n!=null&&(e+="="+n))})}return e}function Ux(t){const e={};for(const s in t){const i=t[s];i!==void 0&&(e[s]=si(i)?i.map(n=>n==null?null:""+n):i==null?i:""+i)}return e}const Nx=Symbol(""),Ih=Symbol(""),Ja=Symbol(""),Bc=Symbol(""),kd=Symbol("");function Wo(){let t=[];function e(i){return t.push(i),()=>{const n=t.indexOf(i);n>-1&&t.splice(n,1)}}function s(){t=[]}return{add:e,list:()=>t.slice(),reset:s}}function Ki(t,e,s,i,n,o=r=>r()){const r=i&&(i.enterCallbacks[n]=i.enterCallbacks[n]||[]);return()=>new Promise((l,a)=>{const d=h=>{h===!1?a(ko(Dt.NAVIGATION_ABORTED,{from:s,to:e})):h instanceof Error?a(h):Lx(h)?a(ko(Dt.NAVIGATION_GUARD_REDIRECT,{from:e,to:h})):(r&&i.enterCallbacks[n]===r&&typeof h=="function"&&r.push(h),l())},u=o(()=>t.call(i&&i.instances[n],e,s,d));let f=Promise.resolve(u);t.length<3&&(f=f.then(d)),f.catch(h=>a(h))})}function Mu(t,e,s,i,n=o=>o()){const o=[];for(const r of t)for(const l in r.components){let a=r.components[l];if(!(e!=="beforeRouteEnter"&&!r.instances[l]))if(n0(a)){const d=(a.__vccOpts||a)[e];d&&o.push(Ki(d,s,i,r,l,n))}else{let d=a();o.push(()=>d.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${l}" at "${r.path}"`);const f=ux(u)?u.default:u;r.mods[l]=u,r.components[l]=f;const h=(f.__vccOpts||f)[e];return h&&Ki(h,s,i,r,l,n)()}))}}return o}function zx(t,e){const s=[],i=[],n=[],o=Math.max(e.matched.length,t.matched.length);for(let r=0;r<o;r++){const l=e.matched[r];l&&(t.matched.find(d=>bo(d,l))?i.push(l):s.push(l));const a=t.matched[r];a&&(e.matched.find(d=>bo(d,a))||n.push(a))}return[s,i,n]}/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Fx=()=>location.protocol+"//"+location.host;function h0(t,e){const{pathname:s,search:i,hash:n}=e,o=t.indexOf("#");if(o>-1){let r=n.includes(t.slice(o))?t.slice(o).length:1,l=n.slice(r);return l[0]!=="/"&&(l="/"+l),jh(l,"")}return jh(s,t)+i+n}function Hx(t,e,s,i){let n=[],o=[],r=null;const l=({state:h})=>{const g=h0(t,location),_=s.value,p=e.value;let V=0;if(h){if(s.value=g,e.value=h,r&&r===_){r=null;return}V=p?h.position-p.position:0}else i(g);n.forEach(M=>{M(s.value,_,{delta:V,type:yd.pop,direction:V?V>0?Vu.forward:Vu.back:Vu.unknown})})};function a(){r=s.value}function d(h){n.push(h);const g=()=>{const _=n.indexOf(h);_>-1&&n.splice(_,1)};return o.push(g),g}function u(){if(document.visibilityState==="hidden"){const{history:h}=window;if(!h.state)return;h.replaceState(ot({},h.state,{scroll:Ga()}),"")}}function f(){for(const h of o)h();o=[],window.removeEventListener("popstate",l),window.removeEventListener("pagehide",u),document.removeEventListener("visibilitychange",u)}return window.addEventListener("popstate",l),window.addEventListener("pagehide",u),document.addEventListener("visibilitychange",u),{pauseListeners:a,listen:d,destroy:f}}function Uh(t,e,s,i=!1,n=!1){return{back:t,current:e,forward:s,replaced:i,position:window.history.length,scroll:n?Ga():null}}function Wx(t){const{history:e,location:s}=window,i={value:h0(t,s)},n={value:e.state};n.value||o(i.value,{back:null,current:i.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function o(a,d,u){const f=t.indexOf("#"),h=f>-1?(s.host&&document.querySelector("base")?t:t.slice(f))+a:Fx()+t+a;try{e[u?"replaceState":"pushState"](d,"",h),n.value=d}catch(g){console.error(g),s[u?"replace":"assign"](h)}}function r(a,d){o(a,ot({},e.state,Uh(n.value.back,a,n.value.forward,!0),d,{position:n.value.position}),!0),i.value=a}function l(a,d){const u=ot({},n.value,e.state,{forward:a,scroll:Ga()});o(u.current,u,!0),o(a,ot({},Uh(i.value,a,null),{position:u.position+1},d),!1),i.value=a}return{location:i,state:n,push:l,replace:r}}function qx(t){t=Dx(t);const e=Wx(t),s=Hx(t,e.state,e.location,e.replace);function i(o,r=!0){r||s.pauseListeners(),history.go(o)}const n=ot({location:"",base:t,go:i,createHref:$x.bind(null,t)},e,s);return Object.defineProperty(n,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(n,"state",{enumerable:!0,get:()=>e.state.value}),n}function Kx(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),qx(t)}let Dn=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t})({});var Lt=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t})(Lt||{});const Gx={type:Dn.Static,value:""},Jx=/[a-zA-Z0-9_]/;function Yx(t){if(!t)return[[]];if(t==="/")return[[Gx]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(g){throw new Error(`ERR (${s})/"${d}": ${g}`)}let s=Lt.Static,i=s;const n=[];let o;function r(){o&&n.push(o),o=[]}let l=0,a,d="",u="";function f(){d&&(s===Lt.Static?o.push({type:Dn.Static,value:d}):s===Lt.Param||s===Lt.ParamRegExp||s===Lt.ParamRegExpEnd?(o.length>1&&(a==="*"||a==="+")&&e(`A repeatable param (${d}) must be alone in its segment. eg: '/:ids+.`),o.push({type:Dn.Param,value:d,regexp:u,repeatable:a==="*"||a==="+",optional:a==="*"||a==="?"})):e("Invalid state to consume buffer"),d="")}function h(){d+=a}for(;l<t.length;){if(a=t[l++],a==="\\"&&s!==Lt.ParamRegExp){i=s,s=Lt.EscapeNext;continue}switch(s){case Lt.Static:a==="/"?(d&&f(),r()):a===":"?(f(),s=Lt.Param):h();break;case Lt.EscapeNext:h(),s=i;break;case Lt.Param:a==="("?s=Lt.ParamRegExp:Jx.test(a)?h():(f(),s=Lt.Static,a!=="*"&&a!=="?"&&a!=="+"&&l--);break;case Lt.ParamRegExp:a===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+a:s=Lt.ParamRegExpEnd:u+=a;break;case Lt.ParamRegExpEnd:f(),s=Lt.Static,a!=="*"&&a!=="?"&&a!=="+"&&l--,u="";break;default:e("Unknown state");break}}return s===Lt.ParamRegExp&&e(`Unfinished custom RegExp for param "${d}"`),f(),r(),n}const Nh="[^/]+?",Qx={sensitive:!1,strict:!1,start:!0,end:!0};var cs=(function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t})(cs||{});const Xx=/[.+*?^${}()[\]/\\]/g;function Zx(t,e){const s=ot({},Qx,e),i=[];let n=s.start?"^":"";const o=[];for(const d of t){const u=d.length?[]:[cs.Root];s.strict&&!d.length&&(n+="/");for(let f=0;f<d.length;f++){const h=d[f];let g=cs.Segment+(s.sensitive?cs.BonusCaseSensitive:0);if(h.type===Dn.Static)f||(n+="/"),n+=h.value.replace(Xx,"\\$&"),g+=cs.Static;else if(h.type===Dn.Param){const{value:_,repeatable:p,optional:V,regexp:M}=h;o.push({name:_,repeatable:p,optional:V});const N=M||Nh;if(N!==Nh){g+=cs.BonusCustomRegExp;try{`${N}`}catch(W){throw new Error(`Invalid custom RegExp for param "${_}" (${N}): `+W.message)}}let B=p?`((?:${N})(?:/(?:${N}))*)`:`(${N})`;f||(B=V&&d.length<2?`(?:/${B})`:"/"+B),V&&(B+="?"),n+=B,g+=cs.Dynamic,V&&(g+=cs.BonusOptional),p&&(g+=cs.BonusRepeatable),N===".*"&&(g+=cs.BonusWildcard)}u.push(g)}i.push(u)}if(s.strict&&s.end){const d=i.length-1;i[d][i[d].length-1]+=cs.BonusStrict}s.strict||(n+="/?"),s.end?n+="$":s.strict&&!n.endsWith("/")&&(n+="(?:/|$)");const r=new RegExp(n,s.sensitive?"":"i");function l(d){const u=d.match(r),f={};if(!u)return null;for(let h=1;h<u.length;h++){const g=u[h]||"",_=o[h-1];f[_.name]=g&&_.repeatable?g.split("/"):g}return f}function a(d){let u="",f=!1;for(const h of t){(!f||!u.endsWith("/"))&&(u+="/"),f=!1;for(const g of h)if(g.type===Dn.Static)u+=g.value;else if(g.type===Dn.Param){const{value:_,repeatable:p,optional:V}=g,M=_ in d?d[_]:"";if(si(M)&&!p)throw new Error(`Provided param "${_}" is an array but it is not repeatable (* or + modifiers)`);const N=si(M)?M.join("/"):M;if(!N)if(V)h.length<2&&(u.endsWith("/")?u=u.slice(0,-1):f=!0);else throw new Error(`Missing required param "${_}"`);u+=N}}return u||"/"}return{re:r,score:i,keys:o,parse:l,stringify:a}}function e2(t,e){let s=0;for(;s<t.length&&s<e.length;){const i=e[s]-t[s];if(i)return i;s++}return t.length<e.length?t.length===1&&t[0]===cs.Static+cs.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===cs.Static+cs.Segment?1:-1:0}function p0(t,e){let s=0;const i=t.score,n=e.score;for(;s<i.length&&s<n.length;){const o=e2(i[s],n[s]);if(o)return o;s++}if(Math.abs(n.length-i.length)===1){if(zh(i))return 1;if(zh(n))return-1}return n.length-i.length}function zh(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const t2={strict:!1,end:!0,sensitive:!1};function s2(t,e,s){const i=Zx(Yx(t.path),s),n=ot(i,{record:t,parent:e,children:[],alias:[]});return e&&!n.record.aliasOf==!e.record.aliasOf&&e.children.push(n),n}function i2(t,e){const s=[],i=new Map;e=Ph(t2,e);function n(f){return i.get(f)}function o(f,h,g){const _=!g,p=Hh(f);p.aliasOf=g&&g.record;const V=Ph(e,f),M=[p];if("alias"in f){const W=typeof f.alias=="string"?[f.alias]:f.alias;for(const G of W)M.push(Hh(ot({},p,{components:g?g.record.components:p.components,path:G,aliasOf:g?g.record:p})))}let N,B;for(const W of M){const{path:G}=W;if(h&&G[0]!=="/"){const j=h.record.path,A=j[j.length-1]==="/"?"":"/";W.path=h.record.path+(G&&A+G)}if(N=s2(W,h,V),g?g.alias.push(N):(B=B||N,B!==N&&B.alias.push(N),_&&f.name&&!Wh(N)&&r(f.name)),m0(N)&&a(N),p.children){const j=p.children;for(let A=0;A<j.length;A++)o(j[A],N,g&&g.children[A])}g=g||N}return B?()=>{r(B)}:dr}function r(f){if(c0(f)){const h=i.get(f);h&&(i.delete(f),s.splice(s.indexOf(h),1),h.children.forEach(r),h.alias.forEach(r))}else{const h=s.indexOf(f);h>-1&&(s.splice(h,1),f.record.name&&i.delete(f.record.name),f.children.forEach(r),f.alias.forEach(r))}}function l(){return s}function a(f){const h=r2(f,s);s.splice(h,0,f),f.record.name&&!Wh(f)&&i.set(f.record.name,f)}function d(f,h){let g,_={},p,V;if("name"in f&&f.name){if(g=i.get(f.name),!g)throw ko(Dt.MATCHER_NOT_FOUND,{location:f});V=g.record.name,_=ot(Fh(h.params,g.keys.filter(B=>!B.optional).concat(g.parent?g.parent.keys.filter(B=>B.optional):[]).map(B=>B.name)),f.params&&Fh(f.params,g.keys.map(B=>B.name))),p=g.stringify(_)}else if(f.path!=null)p=f.path,g=s.find(B=>B.re.test(p)),g&&(_=g.parse(p),V=g.record.name);else{if(g=h.name?i.get(h.name):s.find(B=>B.re.test(h.path)),!g)throw ko(Dt.MATCHER_NOT_FOUND,{location:f,currentLocation:h});V=g.record.name,_=ot({},h.params,f.params),p=g.stringify(_)}const M=[];let N=g;for(;N;)M.unshift(N.record),N=N.parent;return{name:V,path:p,params:_,matched:M,meta:o2(M)}}t.forEach(f=>o(f));function u(){s.length=0,i.clear()}return{addRoute:o,resolve:d,removeRoute:r,clearRoutes:u,getRoutes:l,getRecordMatcher:n}}function Fh(t,e){const s={};for(const i of e)i in t&&(s[i]=t[i]);return s}function Hh(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:n2(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function n2(t){const e={},s=t.props||!1;if("component"in t)e.default=s;else for(const i in t.components)e[i]=typeof s=="object"?s[i]:s;return e}function Wh(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function o2(t){return t.reduce((e,s)=>ot(e,s.meta),{})}function r2(t,e){let s=0,i=e.length;for(;s!==i;){const o=s+i>>1;p0(t,e[o])<0?i=o:s=o+1}const n=l2(t);return n&&(i=e.lastIndexOf(n,i-1)),i}function l2(t){let e=t;for(;e=e.parent;)if(m0(e)&&p0(t,e)===0)return e}function m0({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function qh(t){const e=Zs(Ja),s=Zs(Bc),i=re(()=>{const a=lt(t.to);return e.resolve(a)}),n=re(()=>{const{matched:a}=i.value,{length:d}=a,u=a[d-1],f=s.matched;if(!u||!f.length)return-1;const h=f.findIndex(bo.bind(null,u));if(h>-1)return h;const g=Kh(a[d-2]);return d>1&&Kh(u)===g&&f[f.length-1].path!==g?f.findIndex(bo.bind(null,a[d-2])):h}),o=re(()=>n.value>-1&&f2(s.params,i.value.params)),r=re(()=>n.value>-1&&n.value===s.matched.length-1&&d0(s.params,i.value.params));function l(a={}){if(c2(a)){const d=e[lt(t.replace)?"replace":"push"](lt(t.to)).catch(dr);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>d),d}return Promise.resolve()}return{route:i,href:re(()=>i.value.href),isActive:o,isExactActive:r,navigate:l}}function a2(t){return t.length===1?t[0]:t}const u2=Sg({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:qh,setup(t,{slots:e}){const s=Ys(qh(t)),{options:i}=Zs(Ja),n=re(()=>({[Gh(t.activeClass,i.linkActiveClass,"router-link-active")]:s.isActive,[Gh(t.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const o=e.default&&a2(e.default(s));return t.custom?o:Ot("a",{"aria-current":s.isExactActive?t.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:n.value},o)}}}),d2=u2;function c2(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function f2(t,e){for(const s in e){const i=e[s],n=t[s];if(typeof i=="string"){if(i!==n)return!1}else if(!si(n)||n.length!==i.length||i.some((o,r)=>o!==n[r]))return!1}return!0}function Kh(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Gh=(t,e,s)=>t??e??s,h2=Sg({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:s}){const i=Zs(kd),n=re(()=>t.route||i.value),o=Zs(Ih,0),r=re(()=>{let d=lt(o);const{matched:u}=n.value;let f;for(;(f=u[d])&&!f.components;)d++;return d}),l=re(()=>n.value.matched[r.value]);Fl(Ih,re(()=>r.value+1)),Fl(Nx,l),Fl(kd,n);const a=ae();return ze(()=>[a.value,l.value,t.name],([d,u,f],[h,g,_])=>{u&&(u.instances[f]=d,g&&g!==u&&d&&d===h&&(u.leaveGuards.size||(u.leaveGuards=g.leaveGuards),u.updateGuards.size||(u.updateGuards=g.updateGuards))),d&&u&&(!g||!bo(u,g)||!h)&&(u.enterCallbacks[f]||[]).forEach(p=>p(d))},{flush:"post"}),()=>{const d=n.value,u=t.name,f=l.value,h=f&&f.components[u];if(!h)return Jh(s.default,{Component:h,route:d});const g=f.props[u],_=g?g===!0?d.params:typeof g=="function"?g(d):g:null,V=Ot(h,ot({},_,e,{onVnodeUnmounted:M=>{M.component.isUnmounted&&(f.instances[u]=null)},ref:a}));return Jh(s.default,{Component:V,route:d})||V}}});function Jh(t,e){if(!t)return null;const s=t(e);return s.length===1?s[0]:s}const p2=h2;function m2(t){const e=i2(t.routes,t),s=t.parseQuery||Ix,i=t.stringifyQuery||Bh,n=t.history,o=Wo(),r=Wo(),l=Wo(),a=h1(Hi);let d=Hi;Qn&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Cu.bind(null,D=>""+D),f=Cu.bind(null,wx),h=Cu.bind(null,Vr);function g(D,S){let m,L;return c0(D)?(m=e.getRecordMatcher(D),L=S):L=D,e.addRoute(L,m)}function _(D){const S=e.getRecordMatcher(D);S&&e.removeRoute(S)}function p(){return e.getRoutes().map(D=>D.record)}function V(D){return!!e.getRecordMatcher(D)}function M(D,S){if(S=ot({},S||a.value),typeof D=="string"){const z=Au(s,D,S.path),Z=e.resolve({path:z.path},S),de=n.createHref(z.fullPath);return ot(z,Z,{params:h(Z.params),hash:Vr(z.hash),redirectedFrom:void 0,href:de})}let m;if(D.path!=null)m=ot({},D,{path:Au(s,D.path,S.path).path});else{const z=ot({},D.params);for(const Z in z)z[Z]==null&&delete z[Z];m=ot({},D,{params:f(z)}),S.params=f(S.params)}const L=e.resolve(m,S),ie=D.hash||"";L.params=u(h(L.params));const C=Cx(i,ot({},D,{hash:bx(ie),path:L.path})),P=n.createHref(C);return ot({fullPath:C,hash:ie,query:i===Bh?Ux(D.query):D.query||{}},L,{redirectedFrom:void 0,href:P})}function N(D){return typeof D=="string"?Au(s,D,a.value.path):ot({},D)}function B(D,S){if(d!==D)return ko(Dt.NAVIGATION_CANCELLED,{from:S,to:D})}function W(D){return A(D)}function G(D){return W(ot(N(D),{replace:!0}))}function j(D,S){const m=D.matched[D.matched.length-1];if(m&&m.redirect){const{redirect:L}=m;let ie=typeof L=="function"?L(D,S):L;return typeof ie=="string"&&(ie=ie.includes("?")||ie.includes("#")?ie=N(ie):{path:ie},ie.params={}),ot({query:D.query,hash:D.hash,params:ie.path!=null?{}:D.params},ie)}}function A(D,S){const m=d=M(D),L=a.value,ie=D.state,C=D.force,P=D.replace===!0,z=j(m,L);if(z)return A(ot(N(z),{state:typeof z=="object"?ot({},ie,z.state):ie,force:C,replace:P}),S||m);const Z=m;Z.redirectedFrom=S;let de;return!C&&Ax(i,L,m)&&(de=ko(Dt.NAVIGATION_DUPLICATED,{to:Z,from:L}),xe(L,L,!0,!1)),(de?Promise.resolve(de):me(Z,L)).catch(ne=>Vi(ne)?Vi(ne,Dt.NAVIGATION_GUARD_REDIRECT)?ne:E(ne):Q(ne,Z,L)).then(ne=>{if(ne){if(Vi(ne,Dt.NAVIGATION_GUARD_REDIRECT))return A(ot({replace:P},N(ne.to),{state:typeof ne.to=="object"?ot({},ie,ne.to.state):ie,force:C}),S||Z)}else ne=F(Z,L,!0,P,ie);return te(Z,L,ne),ne})}function J(D,S){const m=B(D,S);return m?Promise.reject(m):Promise.resolve()}function ee(D){const S=Ge.values().next().value;return S&&typeof S.runWithContext=="function"?S.runWithContext(D):D()}function me(D,S){let m;const[L,ie,C]=zx(D,S);m=Mu(L.reverse(),"beforeRouteLeave",D,S);for(const z of L)z.leaveGuards.forEach(Z=>{m.push(Ki(Z,D,S))});const P=J.bind(null,D,S);return m.push(P),at(m).then(()=>{m=[];for(const z of o.list())m.push(Ki(z,D,S));return m.push(P),at(m)}).then(()=>{m=Mu(ie,"beforeRouteUpdate",D,S);for(const z of ie)z.updateGuards.forEach(Z=>{m.push(Ki(Z,D,S))});return m.push(P),at(m)}).then(()=>{m=[];for(const z of C)if(z.beforeEnter)if(si(z.beforeEnter))for(const Z of z.beforeEnter)m.push(Ki(Z,D,S));else m.push(Ki(z.beforeEnter,D,S));return m.push(P),at(m)}).then(()=>(D.matched.forEach(z=>z.enterCallbacks={}),m=Mu(C,"beforeRouteEnter",D,S,ee),m.push(P),at(m))).then(()=>{m=[];for(const z of r.list())m.push(Ki(z,D,S));return m.push(P),at(m)}).catch(z=>Vi(z,Dt.NAVIGATION_CANCELLED)?z:Promise.reject(z))}function te(D,S,m){l.list().forEach(L=>ee(()=>L(D,S,m)))}function F(D,S,m,L,ie){const C=B(D,S);if(C)return C;const P=S===Hi,z=Qn?history.state:{};m&&(L||P?n.replace(D.fullPath,ot({scroll:P&&z&&z.scroll},ie)):n.push(D.fullPath,ie)),a.value=D,xe(D,S,m,P),E()}let ce;function le(){ce||(ce=n.listen((D,S,m)=>{if(!yt.listening)return;const L=M(D),ie=j(L,yt.currentRoute.value);if(ie){A(ot(ie,{replace:!0,force:!0}),L).catch(dr);return}d=L;const C=a.value;Qn&&Px(Rh(C.fullPath,m.delta),Ga()),me(L,C).catch(P=>Vi(P,Dt.NAVIGATION_ABORTED|Dt.NAVIGATION_CANCELLED)?P:Vi(P,Dt.NAVIGATION_GUARD_REDIRECT)?(A(ot(N(P.to),{force:!0}),L).then(z=>{Vi(z,Dt.NAVIGATION_ABORTED|Dt.NAVIGATION_DUPLICATED)&&!m.delta&&m.type===yd.pop&&n.go(-1,!1)}).catch(dr),Promise.reject()):(m.delta&&n.go(-m.delta,!1),Q(P,L,C))).then(P=>{P=P||F(L,C,!1),P&&(m.delta&&!Vi(P,Dt.NAVIGATION_CANCELLED)?n.go(-m.delta,!1):m.type===yd.pop&&Vi(P,Dt.NAVIGATION_ABORTED|Dt.NAVIGATION_DUPLICATED)&&n.go(-1,!1)),te(L,C,P)}).catch(dr)}))}let ve=Wo(),Y=Wo(),X;function Q(D,S,m){E(D);const L=Y.list();return L.length?L.forEach(ie=>ie(D,S,m)):console.error(D),Promise.reject(D)}function Ee(){return X&&a.value!==Hi?Promise.resolve():new Promise((D,S)=>{ve.add([D,S])})}function E(D){return X||(X=!D,le(),ve.list().forEach(([S,m])=>D?m(D):S()),ve.reset()),D}function xe(D,S,m,L){const{scrollBehavior:ie}=t;if(!Qn||!ie)return Promise.resolve();const C=!m&&jx(Rh(D.fullPath,0))||(L||!m)&&history.state&&history.state.scroll||null;return On().then(()=>ie(D,S,C)).then(P=>P&&Ox(P)).catch(P=>Q(P,D,S))}const Oe=D=>n.go(D);let Qe;const Ge=new Set,yt={currentRoute:a,listening:!0,addRoute:g,removeRoute:_,clearRoutes:e.clearRoutes,hasRoute:V,getRoutes:p,resolve:M,options:t,push:W,replace:G,go:Oe,back:()=>Oe(-1),forward:()=>Oe(1),beforeEach:o.add,beforeResolve:r.add,afterEach:l.add,onError:Y.add,isReady:Ee,install(D){D.component("RouterLink",d2),D.component("RouterView",p2),D.config.globalProperties.$router=yt,Object.defineProperty(D.config.globalProperties,"$route",{enumerable:!0,get:()=>lt(a)}),Qn&&!Qe&&a.value===Hi&&(Qe=!0,W(n.location).catch(L=>{}));const S={};for(const L in Hi)Object.defineProperty(S,L,{get:()=>a.value[L],enumerable:!0});D.provide(Ja,yt),D.provide(Bc,rg(S)),D.provide(kd,a);const m=D.unmount;Ge.add(D),D.unmount=function(){Ge.delete(D),Ge.size<1&&(d=Hi,ce&&ce(),ce=null,a.value=Hi,Qe=!1,X=!1),m()}}};function at(D){return D.reduce((S,m)=>S.then(()=>ee(m)),Promise.resolve())}return yt}function Ya(){return Zs(Ja)}function $o(t){return Zs(Bc)}const Mi=ae(!1);function g2(){const t=()=>{Mi.value=!Mi.value},e=()=>{Mi.value=!0},s=()=>{Mi.value=!1};return ze(Mi,i=>{i?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},{immediate:!1}),os(()=>{const i=localStorage.getItem("theme");i?Mi.value=i==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches&&(Mi.value=!0),Mi.value?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}),{isDark:Mi,toggle:t,enable:e,disable:s}}function v2(t,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 13.5V3.75m0 9.75a1.5 1.5 0 0 1 0 3m0-3a1.5 1.5 0 0 0 0 3m0 3.75V16.5m12-3V3.75m0 9.75a1.5 1.5 0 0 1 0 3m0-3a1.5 1.5 0 0 0 0 3m0 3.75V16.5m-6-9V3.75m0 3.75a1.5 1.5 0 0 1 0 3m0-3a1.5 1.5 0 0 0 0 3m0 9.75V10.5"})])}function y2(t,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function b2(t,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})])}function k2(t,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125"})])}function Ic(t,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}function Uc(t,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"})])}function xd(t,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}function x2(t,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})])}function w2(t,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"})])}function _2(t,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}function ha(t,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"})])}function Qa(t,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"})])}function g0(t,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"})])}function S2(t,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})])}function Nc(t,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5.25 14.25h13.5m-13.5 0a3 3 0 0 1-3-3m3 3a3 3 0 1 0 0 6h13.5a3 3 0 1 0 0-6m-16.5-3a3 3 0 0 1 3-3h13.5a3 3 0 0 1 3 3m-19.5 0a4.5 4.5 0 0 1 .9-2.7L5.737 5.1a3.375 3.375 0 0 1 2.7-1.35h7.126c1.062 0 2.062.5 2.7 1.35l2.587 3.45a4.5 4.5 0 0 1 .9 2.7m0 0a3 3 0 0 1-3 3m0 3h.008v.008h-.008v-.008Zm0-6h.008v.008h-.008v-.008Zm-3 6h.008v.008h-.008v-.008Zm0-6h.008v.008h-.008v-.008Z"})])}function C2(t,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"})])}function A2(t,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}const V2={key:0,class:"pointer-events-auto w-full max-w-sm rounded-lg bg-white shadow-lg outline-1 outline-black/5 dark:bg-gray-800 dark:-outline-offset-1 dark:outline-white/10"},M2={class:"p-4"},D2={key:0,class:"shrink-0"},T2={key:0,class:"w-0 flex-1 text-sm font-medium text-gray-900 dark:text-white"},$2={class:"text-sm font-medium text-gray-900 dark:text-white"},E2={key:0,class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},O2={__name:"Toast",props:{title:{type:String,required:!0},description:{type:String,default:null},type:{type:String,default:"success",validator:t=>["success","error","warning","info"].includes(t)},variant:{type:String,default:"regular",validator:t=>["regular","condensed"].includes(t)},action:{type:String,default:null},duration:{type:Number,default:5e3},autoClose:{type:Boolean,default:!0}},emits:["close","action"],setup(t,{emit:e}){const s=t,i=e,n=ae(!1);let o=null;const r=re(()=>{const d={success:y2,error:A2,warning:x2,info:Qa},u={success:"text-sky-400",error:"text-red-400",warning:"text-yellow-400",info:"text-blue-400"},f=d[s.type],h=u[s.type];return()=>Ot(f,{class:`size-6 ${h}`})}),l=()=>{n.value=!1,o&&clearTimeout(o),setTimeout(()=>i("close"),200)},a=()=>{i("action"),l()};return os(()=>{n.value=!0,s.autoClose&&s.duration>0&&(o=setTimeout(l,s.duration))}),ze(()=>s.duration,d=>{o&&clearTimeout(o),s.autoClose&&d>0&&(o=setTimeout(l,d))}),(d,u)=>(v(),ge(Lc,{"enter-active-class":"transform transition duration-300 ease-out","enter-from-class":"translate-y-2 opacity-0 sm:translate-x-2 sm:translate-y-0","enter-to-class":"translate-y-0 opacity-100 sm:translate-x-0","leave-active-class":"transition duration-200 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:R(()=>[n.value?(v(),b("div",V2,[c("div",M2,[c("div",{class:Me(t.variant==="condensed"?"flex items-center":"flex items-start")},[t.variant==="regular"?(v(),b("div",D2,[(v(),ge(Es(r.value),{class:"size-6"}))])):I("",!0),c("div",{class:Me([t.variant==="regular"?"ml-3 w-0 flex-1 pt-0.5":"flex w-0 flex-1 justify-between"])},[t.variant==="condensed"?(v(),b("p",T2,H(t.title),1)):(v(),b(se,{key:1},[c("p",$2,H(t.title),1),t.description?(v(),b("p",E2,H(t.description),1)):I("",!0)],64)),t.variant==="condensed"&&t.action?(v(),b("button",{key:2,type:"button",onClick:a,class:"ml-3 shrink-0 rounded-md bg-white text-sm font-medium text-sky-600 hover:text-sky-500 focus:outline-2 focus:outline-offset-2 focus:outline-sky-500 dark:bg-gray-800 dark:text-sky-400 dark:hover:text-sky-300 dark:focus:outline-sky-400"},H(t.action),1)):I("",!0)],2),c("div",{class:"ml-4 flex shrink-0"},[c("button",{type:"button",onClick:l,class:"inline-flex rounded-md text-gray-400 hover:text-gray-500 focus:outline-2 focus:outline-offset-2 focus:outline-sky-600 dark:hover:text-white dark:focus:outline-sky-500"},[...u[0]||(u[0]=[c("span",{class:"sr-only"},"Close",-1),c("svg",{viewBox:"0 0 20 20",fill:"currentColor",class:"size-5"},[c("path",{d:"M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z"})],-1)])])])],2)])])):I("",!0)]),_:1}))}},P2={"aria-live":"assertive",class:"pointer-events-none fixed inset-0 flex items-end px-4 py-6 sm:items-start sm:p-6 z-50"},j2={class:"flex w-full flex-col items-center space-y-4 sm:items-end"},L2={__name:"ToastContainer",setup(t,{expose:e}){const s=ae([]);let i=1;const n=a=>{const d={id:i++,title:a.title,description:a.description||null,type:a.type||"success",variant:a.variant||"regular",action:a.action||null,duration:a.duration!==void 0?a.duration:5e3,autoClose:a.autoClose!==void 0?a.autoClose:!0,onAction:a.onAction||null};return s.value.push(d),d.id},o=a=>{const d=s.value.findIndex(u=>u.id===a);d>-1&&s.value.splice(d,1)},r=a=>{a.onAction&&a.onAction()};return e({addToast:n,removeToast:o,clearAll:()=>{s.value=[]}}),(a,d)=>(v(),ge(vg,{to:"body"},[c("div",P2,[c("div",j2,[(v(!0),b(se,null,ke(s.value,u=>(v(),ge(O2,{key:u.id,title:u.title,description:u.description,type:u.type,variant:u.variant,action:u.action,duration:u.duration,"auto-close":u.autoClose,onClose:f=>o(u.id),onAction:f=>r(u)},null,8,["title","description","type","variant","action","duration","auto-close","onClose","onAction"]))),128))])])]))}};let Sn=null;function R2(t){Sn=t}function Xa(){const t=l=>{if(!Sn){console.warn('ToastContainer not initialized. Add <ToastContainer ref="toastContainer" /> to your App.vue');return}return Sn.addToast(l)};return{show:t,success:(l,a=null,d={})=>t({title:l,description:a,type:"success",...d}),error:(l,a=null,d={})=>t({title:l,description:a,type:"error",...d}),warning:(l,a=null,d={})=>t({title:l,description:a,type:"warning",...d}),info:(l,a=null,d={})=>t({title:l,description:a,type:"info",...d}),remove:l=>{Sn&&Sn.removeToast(l)},clearAll:()=>{Sn&&Sn.clearAll()}}}const B2={class:"flex min-h-screen bg-white dark:bg-zinc-900"},I2={class:"hidden lg:fixed lg:inset-y-0 lg:z-50 lg:flex lg:w-72 lg:flex-col xl:w-80"},U2={class:"flex grow flex-col overflow-y-auto border-r border-zinc-900/10 px-6 pb-8 pt-4 dark:border-white/10"},N2={key:0,class:"mt-6"},z2={class:"mt-10"},F2={role:"list"},H2={class:"relative mt-6"},W2={class:"relative mt-3 pl-2"},q2={role:"list",class:"border-l border-transparent"},K2={class:"truncate"},G2={key:0,class:"relative mt-6"},J2={class:"relative mt-3 pl-2"},Y2={role:"list",class:"border-l border-transparent"},Q2={class:"truncate"},X2={key:0,class:"text-xs text-zinc-400 dark:text-zinc-500"},Z2={class:"sticky bottom-0 mt-6 border-t border-zinc-900/10 pt-6 dark:border-white/10"},ew={class:"lg:pl-72 xl:pl-80 w-full"},tw={class:"h-screen overflow-auto"},sw={__name:"App",setup(t){const e=ae(null),s=$o(),{isDark:i,toggle:n}=g2(),o=ae([]),r=h=>f.findIndex(_=>_.to==="/projects"&&s.path==="/projects/new"?!1:s.path.startsWith(_.to)),l=()=>o.value.findIndex(h=>s.path===`/project/${h.id}`),a=h=>h.to==="/projects"&&s.path==="/projects/new"?!1:s.path.startsWith(h.to),d=()=>Ot("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[Ot("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})]),u=()=>Ot("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[Ot("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})]),f=[{id:"projects",label:"Projects",to:"/projects"},{id:"settings",label:"New Project Defaults",to:"/settings"}];return os(async()=>{R2(e.value);try{const g=await(await fetch("/api/settings/get")).json();o.value=g.projects||[]}catch(h){console.error("Failed to load projects:",h)}}),(h,g)=>{const _=aa("router-link"),p=aa("router-view");return v(),b("div",B2,[c("div",I2,[c("div",U2,[x(_,{to:"/",class:"flex items-center gap-3"},{default:R(()=>[...g[1]||(g[1]=[c("img",{src:ax,alt:"Framework",class:"h-10 w-10"},null,-1),c("span",{class:"text-lg font-semibold text-zinc-900 dark:text-white"},"Framework",-1)])]),_:1}),h.$route.path!=="/projects/new"?(v(),b("div",N2,[x(_,{to:"/projects/new",class:"flex w-full items-center justify-center gap-2 rounded-lg bg-white px-4 py-2.5 text-sm font-medium text-zinc-900 ring-1 ring-zinc-900/10 transition hover:bg-zinc-50 hover:ring-zinc-900/20 dark:bg-white/5 dark:text-white dark:ring-white/10 dark:hover:bg-white/10"},{default:R(()=>[...g[2]||(g[2]=[c("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),oe(" New Project ",-1)])]),_:1})])):I("",!0),c("nav",z2,[c("ul",F2,[c("li",H2,[g[4]||(g[4]=c("h2",{class:"text-xs font-semibold text-zinc-900 dark:text-white"}," Framework ",-1)),c("div",W2,[g[3]||(g[3]=c("div",{class:"absolute inset-y-0 left-2 w-px bg-zinc-900/10 dark:bg-white/5"},null,-1)),r()>=0?(v(),b("div",{key:0,class:"absolute left-2 h-6 w-px bg-sky-500 transition-all duration-200",style:yr({top:`${r()*32+4}px`})},null,4)):I("",!0),c("ul",q2,[(v(),b(se,null,ke(f,V=>c("li",{key:V.id,class:"relative"},[x(_,{to:V.to,class:Me(["flex justify-between gap-2 py-1 pl-4 pr-3 text-sm transition",a(V)?"text-zinc-900 dark:text-white":"text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white"])},{default:R(()=>[c("span",K2,H(V.label),1)]),_:2},1032,["to","class"])])),64))])])]),o.value.length>0?(v(),b("li",G2,[g[6]||(g[6]=c("h2",{class:"text-xs font-semibold text-zinc-900 dark:text-white"}," Your Projects ",-1)),c("div",J2,[g[5]||(g[5]=c("div",{class:"absolute inset-y-0 left-2 w-px bg-zinc-900/10 dark:bg-white/5"},null,-1)),l()>=0?(v(),b("div",{key:0,class:"absolute left-2 h-6 w-px bg-sky-500 transition-all duration-200",style:yr({top:`${l()*32+4}px`})},null,4)):I("",!0),c("ul",Y2,[(v(!0),b(se,null,ke(o.value,V=>(v(),b("li",{key:V.id,class:"relative"},[x(_,{to:`/project/${V.id}`,class:Me(["flex justify-between gap-2 py-1 pl-4 pr-3 text-sm transition",h.$route.path===`/project/${V.id}`?"text-zinc-900 dark:text-white":"text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white"])},{default:R(()=>[c("span",Q2,H(V.name),1),V.type?(v(),b("span",X2,H(V.type==="project"?"":V.type==="course"?"":""),1)):I("",!0)]),_:2},1032,["to","class"])]))),128))])])])):I("",!0),c("li",Z2,[c("button",{onClick:g[0]||(g[0]=(...V)=>lt(n)&&lt(n)(...V)),class:"flex w-full items-center gap-3 text-sm text-zinc-600 transition hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white"},[(v(),ge(Es(lt(i)?u:d),{class:"h-5 w-5 shrink-0"})),oe(" "+H(lt(i)?"Light Mode":"Dark Mode"),1)])])])])])]),c("div",ew,[c("main",tw,[x(p)])]),x(L2,{ref_key:"toastContainer",ref:e},null,512)])}}},iw={key:0,class:"flex items-center justify-center py-12"},nw={key:1,class:"max-w-4xl prose prose-slate dark:prose-invert"},ow={class:"not-prose mb-8"},rw={class:"flex items-center gap-3 mb-2"},lw={class:"px-3 py-1 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded text-sm font-medium"},aw={class:"text-4xl font-bold text-slate-900 dark:text-white mb-4"},uw={class:"text-lg text-slate-600 dark:text-slate-400"},dw={class:"not-prose mb-8"},cw={class:"bg-slate-900 dark:bg-slate-950 rounded-lg p-4 overflow-x-auto"},fw={class:"text-sm text-slate-100"},hw={key:0,class:"not-prose mb-8"},pw={class:"space-y-4"},mw={class:"flex items-baseline gap-2 mb-1"},gw={class:"text-base font-mono font-semibold text-slate-900 dark:text-white"},vw={class:"text-sm text-slate-500 dark:text-slate-400"},yw={key:0,class:"text-xs text-red-600 dark:text-red-400 font-medium"},bw={key:1,class:"text-xs text-slate-500 dark:text-slate-400"},kw={class:"text-sm text-slate-600 dark:text-slate-400"},xw={class:"not-prose mb-8"},ww={class:"text-slate-700 dark:text-slate-300"},_w={key:1,class:"not-prose mb-8"},Sw={class:"text-slate-700 dark:text-slate-300 whitespace-pre-line"},Cw={key:2,class:"not-prose mb-8"},Aw={class:"space-y-6"},Vw={class:"bg-slate-900 dark:bg-slate-950 rounded-lg p-4 overflow-x-auto mb-2"},Mw={class:"text-sm text-slate-100"},Dw={class:"text-sm text-slate-600 dark:text-slate-400"},Tw={key:3,class:"not-prose mb-8"},$w={class:"space-y-2"},Ew={class:"text-indigo-600 dark:text-indigo-400 font-mono font-semibold"},Ow={class:"text-slate-700 dark:text-slate-300"},Pw={key:4,class:"not-prose mb-8"},jw={class:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4"},Lw={class:"list-disc list-inside space-y-1 text-sm text-amber-800 dark:text-amber-300"},Rw={key:5,class:"not-prose"},Bw={class:"flex items-center gap-2 flex-wrap"},Iw={key:2,class:"text-center py-12"},Uw={__name:"DocViewer",props:{functionName:{type:String,required:!0}},setup(t){const e=t,s=ae(null),i=ae(!0),n=async()=>{i.value=!0;try{const o=await fetch(`/docs/${e.functionName}.json`);o.ok?s.value=await o.json():s.value=null}catch(o){console.error("Failed to load documentation:",o),s.value=null}finally{i.value=!1}};return ze(()=>e.functionName,n),os(n),(o,r)=>i.value?(v(),b("div",iw,[...r[0]||(r[0]=[c("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"},null,-1)])])):s.value?(v(),b("div",nw,[c("div",ow,[c("div",rw,[c("span",lw,H(s.value.category),1)]),c("h1",aw,H(s.value.title),1),c("p",uw,H(s.value.description),1)]),c("div",dw,[r[1]||(r[1]=c("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white mb-4"},"Usage",-1)),c("div",cw,[c("pre",fw,[c("code",null,H(s.value.usage),1)])])]),s.value.params&&s.value.params.length>0?(v(),b("div",hw,[r[3]||(r[3]=c("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white mb-4"},"Parameters",-1)),c("div",pw,[(v(!0),b(se,null,ke(s.value.params,l=>(v(),b("div",{key:l.name,class:"border-l-4 border-indigo-500 pl-4"},[c("div",mw,[c("code",gw,H(l.name),1),c("span",vw,H(l.type),1),l.required?(v(),b("span",yw," required ")):I("",!0),l.default?(v(),b("span",bw,[r[2]||(r[2]=oe(" default: ",-1)),c("code",null,H(l.default),1)])):I("",!0)]),c("p",kw,H(l.description),1)]))),128))])])):I("",!0),c("div",xw,[r[4]||(r[4]=c("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white mb-4"},"Returns",-1)),c("p",ww,H(s.value.returns),1)]),s.value.details?(v(),b("div",_w,[r[5]||(r[5]=c("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white mb-4"},"Details",-1)),c("div",Sw,H(s.value.details),1)])):I("",!0),s.value.examples&&s.value.examples.length>0?(v(),b("div",Cw,[r[6]||(r[6]=c("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white mb-4"},"Examples",-1)),c("div",Aw,[(v(!0),b(se,null,ke(s.value.examples,(l,a)=>(v(),b("div",{key:a},[c("div",Vw,[c("pre",Mw,[c("code",null,H(l.code),1)])]),c("p",Dw,H(l.description),1)]))),128))])])):I("",!0),s.value.see_also&&s.value.see_also.length>0?(v(),b("div",Tw,[r[7]||(r[7]=c("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white mb-4"},"See Also",-1)),c("ul",$w,[(v(!0),b(se,null,ke(s.value.see_also,l=>(v(),b("li",{key:l.name},[c("code",Ew,H(l.name)+"() ",1),c("span",Ow," - "+H(l.description),1)]))),128))])])):I("",!0),s.value.notes&&s.value.notes.length>0?(v(),b("div",Pw,[c("div",jw,[r[8]||(r[8]=c("h3",{class:"text-lg font-semibold text-amber-900 dark:text-amber-200 mb-2"},"Notes",-1)),c("ul",Lw,[(v(!0),b(se,null,ke(s.value.notes,(l,a)=>(v(),b("li",{key:a},H(l),1))),128))])])])):I("",!0),s.value.tags&&s.value.tags.length>0?(v(),b("div",Rw,[c("div",Bw,[r[9]||(r[9]=c("span",{class:"text-sm text-slate-500 dark:text-slate-400"},"Tags:",-1)),(v(!0),b(se,null,ke(s.value.tags,l=>(v(),b("span",{key:l,class:"px-2 py-1 bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 rounded text-xs"},H(l),1))),128))])])):I("",!0)])):(v(),b("div",Iw,[...r[10]||(r[10]=[c("p",{class:"text-slate-600 dark:text-slate-400"},"Documentation not found.",-1)])]))}},Nw={class:"flex h-full"},zw={class:"w-64 flex-shrink-0 border-r border-zinc-900/10 dark:border-white/10 overflow-y-auto"},Fw={class:"p-4"},Hw={class:"mt-3 space-y-1"},Ww={class:"mt-3 space-y-1"},qw={class:"mt-3 space-y-1"},Kw={class:"flex-1 overflow-y-auto"},Gw={key:1,class:"flex h-full items-center justify-center p-8"},Yh={__name:"DocsView",setup(t){const e=$o(),s=re(()=>e.params.functionName),i=[{name:"scaffold",title:"scaffold()"}],n=[{name:"data_load",title:"data_load()"}],o=[{name:"cache_get",title:"cache_get()"}];return(r,l)=>{const a=aa("router-link");return v(),b("div",Nw,[c("div",zw,[c("div",Fw,[l[0]||(l[0]=c("h2",{class:"text-xs font-semibold uppercase tracking-wide text-zinc-500 dark:text-zinc-400"}," Core Functions ",-1)),c("ul",Hw,[(v(),b(se,null,ke(i,d=>c("li",{key:d.name},[x(a,{to:`/docs/${d.name}`,class:Me(["block rounded-md px-3 py-2 text-sm font-medium hover:bg-zinc-50 dark:hover:bg-zinc-800",s.value===d.name?"bg-sky-50 text-sky-600 dark:bg-sky-400/10 dark:text-sky-400":"text-zinc-700 dark:text-zinc-300"])},{default:R(()=>[oe(H(d.title),1)]),_:2},1032,["to","class"])])),64))]),l[1]||(l[1]=c("h2",{class:"mt-6 text-xs font-semibold uppercase tracking-wide text-zinc-500 dark:text-zinc-400"}," Data Functions ",-1)),c("ul",Ww,[(v(),b(se,null,ke(n,d=>c("li",{key:d.name},[x(a,{to:`/docs/${d.name}`,class:Me(["block rounded-md px-3 py-2 text-sm font-medium hover:bg-zinc-50 dark:hover:bg-zinc-800",s.value===d.name?"bg-sky-50 text-sky-600 dark:bg-sky-400/10 dark:text-sky-400":"text-zinc-700 dark:text-zinc-300"])},{default:R(()=>[oe(H(d.title),1)]),_:2},1032,["to","class"])])),64))]),l[2]||(l[2]=c("h2",{class:"mt-6 text-xs font-semibold uppercase tracking-wide text-zinc-500 dark:text-zinc-400"}," Cache Functions ",-1)),c("ul",qw,[(v(),b(se,null,ke(o,d=>c("li",{key:d.name},[x(a,{to:`/docs/${d.name}`,class:Me(["block rounded-md px-3 py-2 text-sm font-medium hover:bg-zinc-50 dark:hover:bg-zinc-800",s.value===d.name?"bg-sky-50 text-sky-600 dark:bg-sky-400/10 dark:text-sky-400":"text-zinc-700 dark:text-zinc-300"])},{default:R(()=>[oe(H(d.title),1)]),_:2},1032,["to","class"])])),64))])])]),c("div",Kw,[s.value?(v(),ge(Uw,{key:0,functionName:s.value},null,8,["functionName"])):(v(),b("div",Gw,[...l[3]||(l[3]=[c("div",{class:"text-center"},[c("h2",{class:"text-2xl font-bold text-zinc-900 dark:text-white"},"Framework Documentation"),c("p",{class:"mt-2 text-zinc-600 dark:text-zinc-400"}," Select a function from the sidebar to view its documentation. ")],-1)])]))])])}}},Jw={key:0,class:"px-4 py-5 sm:px-6"},Yw={class:"px-4 py-5 sm:p-6"},Qw={key:1,class:"px-4 py-4 sm:px-6"},Xw={__name:"Card",setup(t){const e=I1(),s=re(()=>{const i=["overflow-hidden","rounded-lg","bg-white","shadow-sm","dark:bg-gray-800/50","dark:shadow-none","dark:outline","dark:-outline-offset-1","dark:outline-white/10"];return(e.header||e.footer)&&i.push("divide-y","divide-gray-200","dark:divide-white/10"),i.join(" ")});return(i,n)=>(v(),b("div",{class:Me(s.value)},[i.$slots.header?(v(),b("div",Jw,[vt(i.$slots,"header")])):I("",!0),c("div",Yw,[vt(i.$slots,"default")]),i.$slots.footer?(v(),b("div",Qw,[vt(i.$slots,"footer")])):I("",!0)],2))}},Re={__name:"Button",props:{variant:{type:String,default:"primary",validator:t=>["primary","secondary","soft"].includes(t)},size:{type:String,default:"md",validator:t=>["xs","sm","md","lg","xl"].includes(t)},rounded:{type:String,default:"md",validator:t=>["sm","md","full"].includes(t)},type:{type:String,default:"button"},href:{type:String,default:null},icon:{type:[Object,Function],default:null},iconPosition:{type:String,default:"left",validator:t=>["left","right"].includes(t)},iconOnly:{type:Boolean,default:!1}},emits:["click"],setup(t,{emit:e}){const s=t,i=e,n=l=>{i("click",l)},o=re(()=>{const l=["font-semibold","focus-visible:outline-2","focus-visible:outline-offset-2"],a={xs:s.iconOnly?"p-2":"px-3 py-2 text-xs",sm:s.iconOnly?"p-2.5":"px-3 py-2 text-sm",md:s.iconOnly?"p-3":"px-3.5 py-2.5 text-sm",lg:s.iconOnly?"p-3":"px-4 py-3 text-sm",xl:s.iconOnly?"p-3.5":"px-4.5 py-3.5 text-sm"};l.push(a[s.size]);const d={sm:"rounded-sm",md:"rounded-md",full:"rounded-full"};return l.push(d[s.rounded]),s.variant==="primary"?l.push("bg-sky-600","text-white","shadow-xs","hover:bg-sky-500","focus-visible:outline-sky-600","dark:bg-sky-500","dark:shadow-none","dark:hover:bg-sky-400","dark:focus-visible:outline-sky-500"):s.variant==="secondary"?l.push("bg-white","text-gray-900","shadow-xs","inset-ring","inset-ring-gray-300","hover:bg-gray-50","dark:bg-white/10","dark:text-white","dark:shadow-none","dark:inset-ring-white/5","dark:hover:bg-white/20"):s.variant==="soft"&&l.push("bg-sky-50","text-sky-600","shadow-xs","hover:bg-sky-100","dark:bg-sky-500/20","dark:text-sky-400","dark:shadow-none","dark:hover:bg-sky-500/30"),s.icon&&!s.iconOnly&&(l.push("inline-flex","items-center"),l.push(s.size==="xl"?"gap-x-2":"gap-x-1.5")),l.join(" ")}),r=re(()=>{const l=[];return s.iconOnly?l.push("size-5"):(l.push("size-5"),s.iconPosition==="left"?l.push("-ml-0.5"):l.push("-mr-0.5")),l.join(" ")});return(l,a)=>(v(),ge(Es(t.href?"a":"button"),{href:t.href,type:t.href?void 0:t.type,class:Me(o.value),onClick:n},{default:R(()=>[t.icon&&t.iconPosition==="left"?(v(),b("svg",{key:0,viewBox:"0 0 20 20",fill:"currentColor","data-slot":"icon","aria-hidden":"true",class:Me(r.value)},[(v(),ge(Es(t.icon)))],2)):I("",!0),vt(l.$slots,"default"),t.icon&&t.iconPosition==="right"?(v(),b("svg",{key:1,viewBox:"0 0 20 20",fill:"currentColor","data-slot":"icon","aria-hidden":"true",class:Me(r.value)},[(v(),ge(Es(t.icon)))],2)):I("",!0)]),_:3},8,["href","type","class"]))}},Zw=["for"],e_={key:1,class:"mt-2 flex"},t_={class:"flex shrink-0 items-center rounded-l-md bg-gray-100 px-2 text-base text-gray-500 outline-1 -outline-offset-1 outline-gray-300 sm:text-sm/6 dark:bg-white/5 dark:text-gray-400 dark:outline-white/10 font-mono"},s_=["id","type","value","placeholder","required","disabled","aria-invalid","aria-describedby"],i_={key:2,class:"mt-2"},n_=["id","type","value","placeholder","required","disabled","aria-invalid","aria-describedby"],o_={key:0,viewBox:"0 0 16 16",fill:"currentColor","data-slot":"icon","aria-hidden":"true",class:"pointer-events-none col-start-1 row-start-1 mr-3 size-5 self-center justify-self-end text-red-500 sm:size-4 dark:text-red-400"},r_=["id"],l_=["id"],q={__name:"Input",props:{id:{type:String,default:()=>`input-${Math.random().toString(36).substr(2,9)}`},modelValue:{type:[String,Number],default:""},type:{type:String,default:"text"},label:{type:String,default:null},placeholder:{type:String,default:""},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},error:{type:String,default:null},hint:{type:String,default:null},monospace:{type:Boolean,default:!1},prefix:{type:String,default:null}},emits:["update:modelValue","blur"],setup(t){const e=t,s=re(()=>{const n=["block","w-full","rounded-md","bg-white","px-3","py-1.5","text-base","outline-1","-outline-offset-1","placeholder:text-gray-400","focus:outline-2","focus:-outline-offset-2","sm:text-sm/6","dark:bg-white/5","dark:placeholder:text-gray-500"];return e.monospace&&n.push("font-mono"),e.error?n.push("col-start-1","row-start-1","pr-10","pl-3","text-red-900","outline-red-300","placeholder:text-red-300","focus:outline-red-600","sm:pr-9","dark:text-red-400","dark:outline-red-500/50","dark:placeholder:text-red-400/70","dark:focus:outline-red-400"):n.push("text-gray-900","outline-gray-300","focus:outline-sky-600","dark:text-white","dark:outline-white/10","dark:focus:outline-sky-500"),n.join(" ")}),i=re(()=>{const n=["-ml-px","block","w-full","grow","rounded-r-md","bg-white","px-3","py-1.5","text-base","outline-1","-outline-offset-1","placeholder:text-gray-400","focus:outline-2","focus:-outline-offset-2","sm:text-sm/6","dark:bg-white/5","dark:placeholder:text-gray-500"];return e.monospace&&n.push("font-mono"),e.error?n.push("text-red-900","outline-red-300","placeholder:text-red-300","focus:outline-red-600","dark:text-red-400","dark:outline-red-500/50","dark:placeholder:text-red-400/70","dark:focus:outline-red-400"):n.push("text-gray-900","outline-gray-300","focus:outline-sky-600","dark:text-white","dark:outline-white/10","dark:focus:outline-sky-500"),n.join(" ")});return(n,o)=>(v(),b("div",null,[t.label?(v(),b("label",{key:0,for:t.id,class:"block text-sm/6 font-medium text-gray-900 dark:text-white"},H(t.label),9,Zw)):I("",!0),t.prefix?(v(),b("div",e_,[c("div",t_,H(t.prefix),1),c("input",{id:t.id,type:t.type,value:t.modelValue,placeholder:t.placeholder,required:t.required,disabled:t.disabled,"aria-invalid":t.error?"true":void 0,"aria-describedby":t.error?`${t.id}-error`:t.hint?`${t.id}-description`:void 0,onInput:o[0]||(o[0]=r=>n.$emit("update:modelValue",r.target.value)),onBlur:o[1]||(o[1]=r=>n.$emit("blur",r)),class:Me(i.value)},null,42,s_)])):(v(),b("div",i_,[c("input",{id:t.id,type:t.type,value:t.modelValue,placeholder:t.placeholder,required:t.required,disabled:t.disabled,"aria-invalid":t.error?"true":void 0,"aria-describedby":t.error?`${t.id}-error`:t.hint?`${t.id}-description`:void 0,onInput:o[2]||(o[2]=r=>n.$emit("update:modelValue",r.target.value)),onBlur:o[3]||(o[3]=r=>n.$emit("blur",r)),class:Me(s.value)},null,42,n_),t.error?(v(),b("svg",o_,[...o[4]||(o[4]=[c("path",{d:"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14ZM8 4a.75.75 0 0 1 .75.75v3a.75.75 0 0 1-1.5 0v-3A.75.75 0 0 1 8 4Zm0 8a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z","clip-rule":"evenodd","fill-rule":"evenodd"},null,-1)])])):I("",!0)])),t.error?(v(),b("p",{key:3,id:`${t.id}-error`,class:"mt-2 text-sm text-red-600 dark:text-red-400"},H(t.error),9,r_)):I("",!0),t.hint&&!t.error?(v(),b("p",{key:4,id:`${t.id}-description`,class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},H(t.hint),9,l_)):I("",!0)]))}},a_={class:"flex gap-3"},u_={class:"flex h-6 shrink-0 items-center"},d_={class:"group grid size-4 grid-cols-1"},c_=["id","name","checked","aria-describedby"],f_={class:"text-sm/6"},h_=["for"],p_=["id"],yi={__name:"Checkbox",props:{id:{type:String,required:!0},name:{type:String,default:null},modelValue:{type:Boolean,default:!1},description:{type:String,default:null}},emits:["update:modelValue"],setup(t){return(e,s)=>(v(),b("div",a_,[c("div",u_,[c("div",d_,[c("input",{id:t.id,type:"checkbox",name:t.name,checked:t.modelValue,"aria-describedby":t.description?`${t.id}-description`:void 0,onChange:s[0]||(s[0]=i=>e.$emit("update:modelValue",i.target.checked)),class:"col-start-1 row-start-1 appearance-none rounded-sm border border-gray-300 bg-white checked:border-sky-600 checked:bg-sky-600 indeterminate:border-sky-600 indeterminate:bg-sky-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:checked:bg-gray-100 dark:border-white/10 dark:bg-white/5 dark:checked:border-sky-500 dark:checked:bg-sky-500 dark:indeterminate:border-sky-500 dark:indeterminate:bg-sky-500 dark:focus-visible:outline-sky-500 dark:disabled:border-white/5 dark:disabled:bg-white/10 dark:disabled:checked:bg-white/10 forced-colors:appearance-auto"},null,40,c_),s[1]||(s[1]=c("svg",{viewBox:"0 0 14 14",fill:"none",class:"pointer-events-none col-start-1 row-start-1 size-3.5 self-center justify-self-center stroke-white group-has-disabled:stroke-gray-950/25 dark:group-has-disabled:stroke-white/25"},[c("path",{d:"M3 8L6 11L11 3.5","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"opacity-0 group-has-checked:opacity-100"}),c("path",{d:"M3 7H11","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"opacity-0 group-has-indeterminate:opacity-100"})],-1))])]),c("div",f_,[c("label",{for:t.id,class:"font-medium text-gray-900 dark:text-white"},[vt(e.$slots,"default")],8,h_),t.description?(v(),b("p",{key:0,id:`${t.id}-description`,class:"text-gray-500 dark:text-gray-400"},H(t.description),9,p_)):I("",!0)])]))}};function m_(t,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z","clip-rule":"evenodd"})])}function g_(t,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"fill-rule":"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z","clip-rule":"evenodd"})])}function v_(t,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 0 1 .67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 1 1-.671-1.34l.041-.022ZM12 9a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z","clip-rule":"evenodd"})])}function y_(t,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-1.72 6.97a.75.75 0 1 0-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 1 0 1.06 1.06L12 13.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L13.06 12l1.72-1.72a.75.75 0 1 0-1.06-1.06L12 10.94l-1.72-1.72Z","clip-rule":"evenodd"})])}const b_={class:"flex gap-3"},k_={class:"flex-1"},Ls={__name:"Alert",props:{type:{type:String,default:"info",validator:t=>["success","error","warning","info"].includes(t)},title:{type:String,default:null},description:{type:String,default:null},dismissible:{type:Boolean,default:!1}},emits:["dismiss"],setup(t,{emit:e}){const s=t,i=e,n={success:{container:"bg-sky-50 dark:bg-sky-900/20 inset-ring inset-ring-sky-200 dark:inset-ring-sky-800",icon:"text-sky-600 dark:text-sky-400",title:"text-sky-800 dark:text-sky-200",description:"text-sky-700 dark:text-sky-300",dismiss:"text-sky-600 hover:text-sky-700 dark:text-sky-400 dark:hover:text-sky-300"},error:{container:"bg-red-50 dark:bg-red-900/20 inset-ring inset-ring-red-200 dark:inset-ring-red-800",icon:"text-red-600 dark:text-red-400",title:"text-red-800 dark:text-red-200",description:"text-red-700 dark:text-red-300",dismiss:"text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300"},warning:{container:"bg-yellow-50 dark:bg-yellow-900/20 inset-ring inset-ring-yellow-200 dark:inset-ring-yellow-800",icon:"text-yellow-600 dark:text-yellow-400",title:"text-yellow-800 dark:text-yellow-200",description:"text-yellow-700 dark:text-yellow-300",dismiss:"text-yellow-600 hover:text-yellow-700 dark:text-yellow-400 dark:hover:text-yellow-300"},info:{container:"bg-blue-50 dark:bg-blue-900/20 inset-ring inset-ring-blue-200 dark:inset-ring-blue-800",icon:"text-blue-600 dark:text-blue-400",title:"text-blue-800 dark:text-blue-200",description:"text-blue-700 dark:text-blue-300",dismiss:"text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300"}},o=re(()=>`rounded-lg p-4 ${n[s.type].container}`),r=re(()=>`text-sm font-medium ${n[s.type].title}`),l=re(()=>{const f=[`text-sm ${n[s.type].description}`];return s.title&&f.push("mt-1"),f.join(" ")}),a=re(()=>`rounded-md p-1 ${n[s.type].dismiss} focus:outline-2 focus:outline-offset-2`),d=re(()=>({success:m_,error:y_,warning:g_,info:v_})[s.type]),u=()=>{i("dismiss")};return(f,h)=>(v(),b("div",{class:Me(o.value),role:"alert"},[c("div",b_,[(v(),ge(Es(d.value),{class:Me(["h-5 w-5 shrink-0",n[t.type].icon])},null,8,["class"])),c("div",k_,[t.title?(v(),b("p",{key:0,class:Me(r.value)},H(t.title),3)):I("",!0),t.description||f.$slots.default?(v(),b("p",{key:1,class:Me(l.value)},[vt(f.$slots,"default",{},()=>[oe(H(t.description),1)])],2)):I("",!0)]),t.dismissible?(v(),b("button",{key:0,type:"button",onClick:u,class:Me(a.value)},[...h[0]||(h[0]=[c("span",{class:"sr-only"},"Dismiss",-1),c("svg",{viewBox:"0 0 20 20",fill:"currentColor",class:"size-5"},[c("path",{d:"M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z"})],-1)])],2)):I("",!0)])],2))}},x_={class:"flex items-center justify-between"},w_={class:"space-y-6"},__={key:0,class:"text-xs text-gray-500 dark:text-gray-400 space-y-1"},S_={key:0},C_={class:"font-mono"},A_={key:1},V_={class:"font-mono"},M_={class:"space-y-2"},D_=["onClick"],T_={class:"flex items-start gap-3"},$_={class:"text-2xl mt-0.5"},E_={class:"flex-1"},O_={class:"font-semibold text-gray-900 dark:text-white"},P_={class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},j_={key:0,class:"text-sky-600 dark:text-sky-400"},L_={key:1,class:"bg-gray-50 dark:bg-gray-800/50 rounded-lg p-4"},R_={class:"space-y-3"},B_={class:"list-decimal list-inside mt-1 space-y-1"},I_={class:"flex items-center justify-end gap-3"},U_={__name:"ProjectWizard",props:{mode:{type:String,default:"modal",validator:t=>["modal","page"].includes(t)},projectsRoot:{type:String,default:""}},emits:["close","created"],setup(t,{emit:e}){const s=t,i=e,n=re(()=>s.mode==="modal"),o=re(()=>(s.projectsRoot||"").trim()),r=j=>/^([A-Za-z]:[\\/]|\\\\|\/|~)/.test(j),l=(j,A)=>{if(!j)return A;const J=A.replace(/^[\\/]+/,"");if(!J)return j;if(j.endsWith("/")||j.endsWith("\\"))return`${j}${J}`;const ee=j.includes("\\")&&!j.includes("/")?"\\":"/";return`${j}${ee}${J}`},a=re(()=>n.value?"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4":"flex w-full justify-center"),d=re(()=>n.value?"max-w-2xl w-full max-h-[90vh] overflow-y-auto":"w-full max-w-2xl shadow-xl"),u=Ys({directory:"",name:"",type:"project",sensitive:!1,use_git:!0,use_renv:!1,attach_defaults:!0}),f=re(()=>{const j=u.directory.trim();return j?r(j)||!o.value?j:l(o.value,j):o.value||""}),h=re(()=>{const j=u.directory.trim();return j?o.value.length>0||r(j):!1}),g=re(()=>o.value?`Folder will be created inside ${o.value}`:"The directory where your project will be created"),_=re(()=>o.value?"analytics-project":"my-analysis"),p=[{id:"project",title:"Data Analysis",description:"Full-featured project with notebooks, scripts, data management, and results tracking",icon:""},{id:"course",title:"Course Materials",description:"Teaching materials with slides, assignments, and course documentation",icon:""},{id:"presentation",title:"Presentation",description:"Single talk or presentation with minimal structure",icon:""}],V=ae(!1),M=ae(""),N=ae(!1),B=()=>{n.value&&i("close")},W=()=>{!u.name&&u.directory&&(u.name=u.directory.split(/[-_]/).map(j=>j.charAt(0).toUpperCase()+j.slice(1)).join(" "))},G=async()=>{M.value="",N.value=!1,V.value=!0;try{const j=f.value||u.directory,A=await fetch("/api/project/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_dir:j,project_name:u.name||u.directory,type:u.type,sensitive:u.sensitive,use_git:u.use_git,use_renv:u.use_renv,attach_defaults:u.attach_defaults})}),J=await A.json();A.ok&&J.success?(N.value=!0,J&&!J.path&&(J.path=j),i("created",J),n.value&&setTimeout(()=>{i("close")},3e3)):M.value=J.error||"Failed to create project"}catch(j){M.value="Network error: "+j.message}finally{V.value=!1}};return(j,A)=>(v(),b("div",{class:Me(a.value),onClick:It(B,["self"])},[x(Xw,{class:Me(d.value)},{header:R(()=>[c("div",x_,[A[9]||(A[9]=c("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Create New Project",-1)),n.value?(v(),b("button",{key:0,onClick:A[0]||(A[0]=J=>j.$emit("close")),class:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition"},[...A[8]||(A[8]=[c("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])):I("",!0)])]),footer:R(()=>[c("div",I_,[x(Re,{variant:"secondary",onClick:A[7]||(A[7]=J=>j.$emit("close"))},{default:R(()=>[...A[23]||(A[23]=[oe(" Cancel ",-1)])]),_:1}),x(Re,{variant:"primary",onClick:G,disabled:V.value||!u.directory},{default:R(()=>[oe(H(V.value?"Creating...":"Create Project"),1)]),_:1},8,["disabled"])])]),default:R(()=>[c("div",w_,[x(q,{modelValue:u.directory,"onUpdate:modelValue":A[1]||(A[1]=J=>u.directory=J),label:"Project Directory",placeholder:_.value,hint:g.value,onInput:W},null,8,["modelValue","placeholder","hint"]),o.value||h.value?(v(),b("div",__,[o.value?(v(),b("p",S_,[A[10]||(A[10]=oe(" Projects will be created inside ",-1)),c("span",C_,H(o.value),1),A[11]||(A[11]=oe(". ",-1))])):I("",!0),h.value?(v(),b("p",A_,[A[12]||(A[12]=oe(" Full path: ",-1)),c("span",V_,H(f.value),1)])):I("",!0)])):I("",!0),x(q,{modelValue:u.name,"onUpdate:modelValue":A[2]||(A[2]=J=>u.name=J),label:"Project Name",placeholder:"My Analysis"},null,8,["modelValue"]),c("div",null,[A[14]||(A[14]=c("label",{class:"block text-sm/6 font-medium text-gray-900 dark:text-white mb-3"}," Project Type ",-1)),c("div",M_,[(v(),b(se,null,ke(p,J=>c("div",{key:J.id,onClick:ee=>u.type=J.id,class:Me(["border-2 rounded-lg p-4 cursor-pointer transition",u.type===J.id?"border-sky-600 bg-sky-50 dark:bg-sky-900/20 dark:border-sky-500":"border-gray-200 dark:border-gray-700 hover:border-sky-300 dark:hover:border-sky-600"])},[c("div",T_,[c("div",$_,H(J.icon),1),c("div",E_,[c("h3",O_,H(J.title),1),c("p",P_,H(J.description),1)]),u.type===J.id?(v(),b("div",j_,[...A[13]||(A[13]=[c("svg",{class:"h-6 w-6",fill:"currentColor",viewBox:"0 0 20 20"},[c("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1)])])):I("",!0)])],10,D_)),64))])]),u.type==="project"?(v(),b("div",L_,[x(yi,{modelValue:u.sensitive,"onUpdate:modelValue":A[3]||(A[3]=J=>u.sensitive=J),id:"sensitive",description:"Creates separate public/private directories for inputs, reference materials, and outputs. Recommended for PHI, PII, or IRB-restricted data."},{default:R(()=>[...A[15]||(A[15]=[oe(" Privacy-first mode ",-1)])]),_:1},8,["modelValue"])])):I("",!0),c("div",R_,[x(yi,{modelValue:u.use_git,"onUpdate:modelValue":A[4]||(A[4]=J=>u.use_git=J),id:"use_git"},{default:R(()=>[...A[16]||(A[16]=[oe(" Initialize git repository ",-1)])]),_:1},8,["modelValue"]),x(yi,{modelValue:u.use_renv,"onUpdate:modelValue":A[5]||(A[5]=J=>u.use_renv=J),id:"use_renv"},{default:R(()=>[...A[17]||(A[17]=[oe(" Enable renv for package management ",-1)])]),_:1},8,["modelValue"]),x(yi,{modelValue:u.attach_defaults,"onUpdate:modelValue":A[6]||(A[6]=J=>u.attach_defaults=J),id:"attach_defaults"},{default:R(()=>[...A[18]||(A[18]=[oe(" Auto-load common packages (dplyr, tidyr, ggplot2) ",-1)])]),_:1},8,["modelValue"])]),M.value?(v(),ge(Ls,{key:2,type:"error",description:M.value},null,8,["description"])):I("",!0),N.value?(v(),ge(Ls,{key:3,type:"success",title:"Project created successfully!"},{default:R(()=>[A[22]||(A[22]=c("p",{class:"mt-2"},"Next steps:",-1)),c("ol",B_,[c("li",null,"cd "+H(f.value),1),A[19]||(A[19]=c("li",null,"R",-1)),A[20]||(A[20]=c("li",null,"library(framework)",-1)),A[21]||(A[21]=c("li",null,"scaffold()",-1))])]),_:1})):I("",!0)])]),_:1},8,["class"])],2))}},N_={class:"flex items-start justify-between"},z_={class:"text-3xl font-bold tracking-tight text-gray-900 dark:text-white"},F_={key:0,class:"mt-2 text-sm text-gray-600 dark:text-gray-400"},H_={key:0},Eo={__name:"PageHeader",props:{title:{type:String,required:!0},description:{type:String,default:null}},setup(t){return(e,s)=>(v(),b("div",N_,[c("div",null,[c("h1",z_,H(t.title),1),t.description?(v(),b("p",F_,H(t.description),1)):I("",!0)]),e.$slots.actions?(v(),b("div",H_,[vt(e.$slots,"actions")])):I("",!0)]))}},pa={__name:"Badge",props:{variant:{type:String,default:"gray",validator:t=>["gray","red","yellow","green","blue","indigo","purple","pink","sky"].includes(t)},pill:{type:Boolean,default:!1},dot:{type:Boolean,default:!1}},setup(t){const e=t,s=re(()=>{const n=["inline-flex","items-center","px-2","py-1","text-xs","font-medium","inset-ring"];n.push(e.pill?"rounded-full":"rounded-md"),e.dot&&n.push("gap-x-1.5");const r={gray:{bg:"bg-gray-50",text:"text-gray-600",ring:"inset-ring-gray-500/10",darkBg:"dark:bg-gray-400/10",darkText:e.dot?"dark:text-gray-200":"dark:text-gray-400",darkRing:e.dot?"dark:inset-ring-white/10":"dark:inset-ring-gray-400/20"},red:{bg:"bg-red-50",text:"text-red-700",ring:"inset-ring-red-600/10",darkBg:"dark:bg-red-400/10",darkText:"dark:text-red-400",darkRing:"dark:inset-ring-red-400/20"},yellow:{bg:"bg-yellow-50",text:"text-yellow-800",ring:"inset-ring-yellow-600/20",darkBg:"dark:bg-yellow-400/10",darkText:"dark:text-yellow-500",darkRing:"dark:inset-ring-yellow-400/20"},green:{bg:"bg-green-50",text:"text-green-700",ring:"inset-ring-green-600/20",darkBg:"dark:bg-green-400/10",darkText:"dark:text-green-400",darkRing:"dark:inset-ring-green-500/20"},sky:{bg:"bg-sky-50",text:"text-sky-700",ring:"inset-ring-sky-600/20",darkBg:"dark:bg-sky-400/10",darkText:"dark:text-sky-400",darkRing:"dark:inset-ring-sky-500/20"},blue:{bg:"bg-blue-50",text:"text-blue-700",ring:"inset-ring-blue-700/10",darkBg:"dark:bg-blue-400/10",darkText:"dark:text-blue-400",darkRing:"dark:inset-ring-blue-400/30"},indigo:{bg:"bg-indigo-50",text:"text-indigo-700",ring:"inset-ring-indigo-700/10",darkBg:"dark:bg-indigo-400/10",darkText:"dark:text-indigo-400",darkRing:"dark:inset-ring-indigo-400/30"},purple:{bg:"bg-purple-50",text:"text-purple-700",ring:"inset-ring-purple-700/10",darkBg:"dark:bg-purple-400/10",darkText:"dark:text-purple-400",darkRing:"dark:inset-ring-purple-400/30"},pink:{bg:"bg-pink-50",text:"text-pink-700",ring:"inset-ring-pink-700/10",darkBg:"dark:bg-pink-400/10",darkText:"dark:text-pink-400",darkRing:"dark:inset-ring-pink-400/20"}}[e.variant];return e.dot?n.push("text-gray-900","inset-ring-gray-200","dark:text-white","dark:inset-ring-white/10"):n.push(r.bg,r.text,r.ring,r.darkBg,r.darkText,r.darkRing),n.join(" ")}),i=re(()=>`size-1.5 ${{gray:"fill-gray-500 dark:fill-gray-400",red:"fill-red-500 dark:fill-red-400",yellow:"fill-yellow-500 dark:fill-yellow-400",green:"fill-green-500 dark:fill-green-400",sky:"fill-sky-500 dark:fill-sky-400",blue:"fill-blue-500 dark:fill-blue-400",indigo:"fill-indigo-500 dark:fill-indigo-400",purple:"fill-purple-500 dark:fill-purple-400",pink:"fill-pink-500 dark:fill-pink-400"}[e.variant]}`);return(n,o)=>(v(),b("span",{class:Me(s.value)},[t.dot?(v(),b("svg",{key:0,viewBox:"0 0 6 6","aria-hidden":"true",class:Me(i.value)},[...o[0]||(o[0]=[c("circle",{r:"3",cx:"3",cy:"3"},null,-1)])],2)):I("",!0),vt(n.$slots,"default")],2))}},v0=(t,e)=>{const s=t.__vccOpts||t;for(const[i,n]of e)s[i]=n;return s},W_={key:0,class:"relative z-50"},q_={class:"fixed inset-0 z-10 overflow-y-auto"},K_={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},G_=["aria-labelledby"],J_=["id"],Y_={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},Q_={__name:"Modal",props:{modelValue:{type:Boolean,default:!1},title:{type:String,default:null},description:{type:String,default:null},icon:{type:String,default:null,validator:t=>["success","error","warning","info"].includes(t)},size:{type:String,default:"md",validator:t=>["sm","md","lg","xl"].includes(t)},variant:{type:String,default:"centered",validator:t=>["centered","side-icon","left"].includes(t)},closeOnBackdrop:{type:Boolean,default:!0}},emits:["update:modelValue","close"],setup(t,{expose:e,emit:s}){const i=t,n=s,o=re(()=>`modal-title-${Math.random().toString(36).substr(2,9)}`),r={sm:"sm:max-w-sm",md:"sm:max-w-lg",lg:"sm:max-w-2xl",xl:"sm:max-w-4xl"},l=re(()=>["relative","transform","overflow-hidden","rounded-lg","bg-white","px-4","pt-5","pb-4","text-left","shadow-xl","transition-all","sm:my-8","sm:w-full","sm:p-6","dark:bg-gray-800","dark:outline","dark:-outline-offset-1","dark:outline-white/10",r[i.size]].join(" ")),a=re(()=>{const M=["flex","items-center","justify-center","rounded-full"];i.variant==="centered"?M.push("mx-auto","size-12"):M.push("shrink-0","sm:mx-0","sm:size-10");const N={success:"bg-sky-100 text-sky-600 dark:bg-sky-500/10 dark:text-sky-400",error:"bg-red-100 text-red-600 dark:bg-red-500/10 dark:text-red-400",warning:"bg-yellow-100 text-yellow-600 dark:bg-yellow-500/10 dark:text-yellow-400",info:"bg-blue-100 text-blue-600 dark:bg-blue-500/10 dark:text-blue-400"};return i.icon&&M.push(N[i.icon]),M.join(" ")}),d=re(()=>{const M=[];return i.variant==="centered"?M.push("mt-3","text-center","sm:mt-5"):i.variant==="left"?M.push("text-left"):M.push("mt-3","text-center","sm:mt-0","sm:ml-4","sm:text-left"),i.variant==="side-icon"&&(i.icon||i.$slots.icon)&&M.push("sm:flex","sm:items-start"),M.join(" ")}),u=re(()=>i.variant==="left"?"text-lg font-bold text-gray-900 dark:text-white mb-4":"text-base font-semibold text-gray-900 dark:text-white"),f=re(()=>(i.variant==="centered","mt-2")),h=re(()=>i.variant==="left"?"mt-6 pt-4 border-t border-gray-200 dark:border-gray-700 flex gap-3 justify-between":i.variant==="centered"?"mt-5 sm:mt-6 flex gap-3 justify-end":"mt-5 sm:mt-4 flex gap-3 justify-end"),g=re(()=>i.icon==="success"?{template:`
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="m4.5 12.75 6 6 9-13.5" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      `}:i.icon==="error"||i.icon==="warning"?{template:`
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      `}:i.icon==="info"?{template:`
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      `}:null),_=()=>{i.closeOnBackdrop&&V()},p=M=>{M.key==="Escape"&&i.modelValue&&V()},V=()=>{n("update:modelValue",!1),n("close")};return os(()=>{window.addEventListener("keydown",p)}),To(()=>{window.removeEventListener("keydown",p)}),e({close:V}),(M,N)=>(v(),ge(vg,{to:"body"},[x(Lc,{name:"modal"},{default:R(()=>[t.modelValue?(v(),b("div",W_,[c("div",{class:"fixed inset-0 bg-gray-500/75 transition-opacity dark:bg-gray-900/50",onClick:_}),c("div",q_,[c("div",K_,[c("div",{class:Me(l.value),role:"dialog","aria-modal":"true","aria-labelledby":o.value},[M.$slots.icon||t.icon?(v(),b("div",{key:0,class:Me(a.value)},[vt(M.$slots,"icon",{},()=>[t.icon?(v(),ge(Es(g.value),{key:0,class:"size-6"})):I("",!0)],!0)],2)):I("",!0),c("div",{class:Me(d.value)},[t.title?(v(),b("h3",{key:0,id:o.value,class:Me(u.value)},H(t.title),11,J_)):I("",!0),t.description||M.$slots.default?(v(),b("div",{key:1,class:Me(f.value)},[t.description?(v(),b("p",Y_,H(t.description),1)):vt(M.$slots,"default",{key:1},void 0,!0)],2)):I("",!0)],2),M.$slots.actions?(v(),b("div",{key:1,class:Me(h.value)},[vt(M.$slots,"actions",{},void 0,!0)],2)):I("",!0)],10,G_)])])])):I("",!0)]),_:3})]))}},nn=v0(Q_,[["__scopeId","data-v-2e078ad9"]]),X_=["title"],Z_={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},e4={key:1,class:"h-4 w-4 text-sky-600 dark:text-sky-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},t4={key:2},co={__name:"CopyButton",props:{value:{type:String,required:!0},showLabel:{type:Boolean,default:!1},variant:{type:String,default:"default",validator:t=>["default","ghost","bare"].includes(t)},successMessage:{type:String,default:"Copied to clipboard"}},setup(t){const e=t,s=Xa(),i=ae(!1);let n=null;const o=re(()=>e.variant==="bare"?"inline-flex items-center text-sm font-medium transition-all":"inline-flex items-center gap-1.5 rounded-md px-2.5 py-1.5 text-sm font-medium transition-all"),r=re(()=>e.variant==="ghost"?"text-zinc-600 hover:bg-zinc-100 dark:text-zinc-400 dark:hover:bg-zinc-800":e.variant==="bare"?"gap-2 rounded-lg transition-all focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-1 focus-visible:outline-sky-500":"bg-zinc-100 text-zinc-700 hover:bg-zinc-200 dark:bg-zinc-800 dark:text-zinc-300 dark:hover:bg-zinc-700"),l=async()=>{try{await navigator.clipboard.writeText(e.value),i.value=!0,s.success("Copied!",e.successMessage),n&&clearTimeout(n),n=setTimeout(()=>{i.value=!1},2e3)}catch(a){s.error("Copy failed","Could not copy to clipboard"),console.error("Failed to copy:",a)}};return(a,d)=>(v(),b("button",{type:"button",onClick:l,class:Me([o.value,r.value,i.value&&"ring-2 ring-sky-500/20"]),title:i.value?"Copied!":"Copy to clipboard"},[vt(a.$slots,"default",{copied:i.value},()=>[i.value?(v(),b("svg",e4,[...d[1]||(d[1]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(v(),b("svg",Z_,[...d[0]||(d[0]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"},null,-1)])])),t.showLabel?(v(),b("span",t4,H(i.value?"Copied!":"Copy"),1)):I("",!0)])],10,X_))}},s4={class:"mx-auto max-w-5xl p-10"},i4={class:"flex gap-3"},n4={key:0,class:"mt-6 flex flex-col gap-3 rounded-2xl border border-zinc-200 bg-white p-5 shadow-sm dark:border-zinc-800 dark:bg-zinc-900 sm:flex-row sm:items-center sm:justify-between"},o4={class:"min-w-0"},r4={class:"mt-1 font-mono text-sm text-zinc-600 dark:text-zinc-400 truncate"},l4={class:"flex items-center gap-2"},a4={key:1,class:"mt-10 grid gap-6 sm:grid-cols-2"},u4={class:"relative"},d4={class:"flex items-start justify-between"},c4={class:"flex-1"},f4={class:"flex items-center gap-3"},h4={class:"flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-sky-500 to-sky-600 shadow-lg shadow-sky-500/20"},p4={key:0,class:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},m4={key:1,class:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},g4={key:2,class:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},v4={class:"mt-4 text-xl font-bold text-zinc-900 dark:text-white"},y4={class:"mt-2 text-sm text-zinc-600 dark:text-zinc-400 font-mono truncate"},b4={key:0,class:"mt-3 flex items-center gap-2 text-xs text-zinc-600 dark:text-zinc-400"},k4={key:0,class:"text-zinc-400 dark:text-zinc-500"},x4={key:1,class:"truncate"},w4={class:"mt-3 flex items-center gap-2 text-xs text-zinc-500 dark:text-zinc-500"},_4={class:"mt-6 flex gap-2"},S4={key:2,class:"mt-12 overflow-hidden rounded-3xl bg-gradient-to-br from-sky-600 via-sky-500 to-teal-500 p-12 shadow-2xl shadow-sky-500/20"},C4={class:"space-y-4"},A4={key:0,class:"mt-2 text-sm text-red-600 dark:text-red-400"},V4={class:"flex gap-3 justify-end"},M4={key:0,class:"space-y-6"},D4={class:"text-lg font-semibold text-zinc-900 dark:text-white mb-3"},T4={class:"grid gap-4"},$4={class:"text-sm text-zinc-600 dark:text-zinc-400 font-mono bg-zinc-50 dark:bg-zinc-800 px-3 py-2 rounded-lg"},E4={key:0,class:"grid grid-cols-2 gap-4"},O4={class:"text-sm text-zinc-600 dark:text-zinc-400"},P4={key:0},j4={class:"text-sm text-zinc-600 dark:text-zinc-400"},L4={class:"text-sm text-zinc-600 dark:text-zinc-400"},R4={class:"flex gap-3 justify-end"},B4={__name:"ProjectsView",setup(t){const e=Ya(),s=$o(),i=ae(!1),n=ae(!1),o=ae(!1),r=ae(""),l=ae(""),a=ae(!1),d=ae(null),u=ae({projects:[]}),f=ae(""),h=ae(null),g=j=>{if(!j)return"Unknown";const A=h.value?.project_types?.[j]?.label;return A||j.split("_").map(J=>J.charAt(0).toUpperCase()+J.slice(1)).join(" ")},_=async()=>{try{const A=await(await fetch("/api/settings/get")).json();u.value.projects=A.projects||[],f.value=A.global?.projects_root&&A.global.projects_root!==""?A.global.projects_root:""}catch(j){console.error("Failed to load settings:",j)}},p=()=>{s.path==="/projects/new"?i.value=!0:e.push("/projects/new")},V=()=>{i.value=!1,s.path==="/projects/new"&&e.push("/projects")},M=j=>{i.value=!1,_(),j?.id?e.push(`/project/${j.id}`):e.push("/projects")},N=()=>{n.value=!1,r.value="",l.value=""},B=j=>{d.value=j,o.value=!0},W=async()=>{l.value="",a.value=!0;try{const j=await fetch("/api/project/import",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_dir:r.value})}),A=await j.text();if(!A){l.value="Server returned empty response",a.value=!1;return}const J=JSON.parse(A);j.ok?(N(),_()):l.value=J.error||"Failed to import project"}catch(j){l.value="Network error: "+j.message}finally{a.value=!1}},G=async()=>{try{const A=await(await fetch("/api/settings-catalog")).json();A.error||(h.value=A)}catch(j){console.error("Failed to load settings catalog:",j)}};return os(()=>{_(),G(),i.value=s.path==="/projects/new"}),ze(()=>s.path,j=>{i.value=j==="/projects/new"},{immediate:!0}),(j,A)=>(v(),b("div",s4,[x(Eo,{title:"Your Projects",description:"Framework projects you've created."},{actions:R(()=>[c("div",i4,[x(Re,{size:"lg",variant:"secondary",onClick:A[0]||(A[0]=J=>n.value=!0)},{default:R(()=>[...A[7]||(A[7]=[oe(" Import Project ",-1)])]),_:1}),x(Re,{size:"lg",onClick:p},{default:R(()=>[...A[8]||(A[8]=[oe(" New Project ",-1)])]),_:1})])]),_:1}),f.value?(v(),b("div",n4,[c("div",o4,[A[9]||(A[9]=c("p",{class:"text-sm font-medium text-zinc-700 dark:text-zinc-200"},"Projects Root",-1)),c("p",r4,H(f.value),1)]),c("div",l4,[x(co,{value:f.value,variant:"ghost","show-label":"","success-message":"Root path copied"},null,8,["value"]),x(Re,{size:"sm",variant:"secondary",onClick:A[1]||(A[1]=J=>lt(e).push("/settings"))},{default:R(()=>[...A[10]||(A[10]=[oe(" Edit ",-1)])]),_:1})])])):I("",!0),u.value.projects&&u.value.projects.length>0?(v(),b("div",a4,[(v(!0),b(se,null,ke(u.value.projects,(J,ee)=>(v(),b("div",{key:ee,class:"group relative overflow-hidden rounded-2xl border border-zinc-200 bg-white p-6 shadow-sm transition-all duration-300 hover:shadow-xl hover:shadow-zinc-900/5 dark:border-zinc-800 dark:bg-zinc-900 dark:hover:shadow-sky-500/5"},[A[18]||(A[18]=c("div",{class:"absolute -right-6 -top-6 h-24 w-24 rounded-full bg-gradient-to-br from-sky-500/10 to-sky-600/10 blur-2xl transition-all duration-300 group-hover:scale-150"},null,-1)),c("div",u4,[c("div",d4,[c("div",c4,[c("div",f4,[c("div",h4,[J.type==="project"?(v(),b("svg",p4,[...A[11]||(A[11]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)])])):J.type==="course"?(v(),b("svg",m4,[...A[12]||(A[12]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"},null,-1)])])):(v(),b("svg",g4,[...A[13]||(A[13]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"},null,-1)])]))]),x(pa,{variant:"sky"},{default:R(()=>[oe(H(g(J.type)),1)]),_:2},1024)]),c("h3",v4,H(J.name),1),c("p",y4,H(J.path),1),J.author?(v(),b("div",b4,[A[14]||(A[14]=c("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),c("span",null,H(J.author),1),J.author_email?(v(),b("span",k4,"")):I("",!0),J.author_email?(v(),b("span",x4,H(J.author_email),1)):I("",!0)])):I("",!0),c("div",w4,[A[15]||(A[15]=c("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),c("span",null,"Created "+H(J.created),1)])])]),c("div",_4,[x(Re,{variant:"primary",size:"md",onClick:me=>j.$router.push(`/project/${J.id}`),class:"flex-1"},{default:R(()=>[...A[16]||(A[16]=[oe(" View Project ",-1)])]),_:1},8,["onClick"]),x(Re,{variant:"secondary",size:"md",onClick:me=>B(J),class:"flex-1"},{default:R(()=>[...A[17]||(A[17]=[oe(" See More ",-1)])]),_:1},8,["onClick"])])])]))),128))])):(v(),b("div",S4,[c("div",{class:"relative"},[A[21]||(A[21]=c("div",{class:"absolute -right-10 -top-10 h-40 w-40 rounded-full bg-white/10 blur-3xl"},null,-1)),A[22]||(A[22]=c("div",{class:"absolute -bottom-10 -left-10 h-40 w-40 rounded-full bg-white/10 blur-3xl"},null,-1)),c("div",{class:"relative text-center"},[A[20]||(A[20]=qa('<div class="mx-auto flex h-16 w-16 items-center justify-center rounded-2xl bg-white/20 backdrop-blur-sm"><svg class="h-8 w-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg></div><h2 class="mt-6 text-3xl font-bold text-white">Ready to start?</h2><p class="mt-3 text-lg text-sky-50"> Create a new Framework project with beautiful structure and best practices built-in. </p>',3)),c("button",{onClick:p,class:"mt-8 inline-flex items-center gap-2 rounded-xl bg-white px-6 py-3 text-base font-semibold text-sky-600 shadow-xl transition-all duration-200 hover:scale-105 hover:shadow-2xl focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-white"},[...A[19]||(A[19]=[c("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),oe(" Create Your First Project ",-1)])])])])])),i.value?(v(),ge(U_,{key:3,"projects-root":f.value,onClose:V,onCreated:M},null,8,["projects-root"])):I("",!0),x(nn,{modelValue:n.value,"onUpdate:modelValue":A[3]||(A[3]=J=>n.value=J),title:"Import Existing Project",size:"md"},{actions:R(()=>[c("div",V4,[x(Re,{variant:"secondary",onClick:N},{default:R(()=>[...A[26]||(A[26]=[oe(" Cancel ",-1)])]),_:1}),x(Re,{variant:"primary",onClick:W,disabled:!r.value||a.value},{default:R(()=>[oe(H(a.value?"Importing...":"Import"),1)]),_:1},8,["disabled"])])]),default:R(()=>[c("div",C4,[A[25]||(A[25]=c("p",{class:"text-sm text-zinc-600 dark:text-zinc-400"}," Import an existing Framework project that isn't in your registry yet. ",-1)),c("div",null,[A[23]||(A[23]=c("label",{for:"import-path",class:"block text-sm font-medium text-zinc-900 dark:text-white mb-2"}," Project Directory Path ",-1)),Ke(c("input",{id:"import-path","onUpdate:modelValue":A[2]||(A[2]=J=>r.value=J),type:"text",placeholder:"/Users/you/projects/my-framework-project",class:Me(["block w-full rounded-lg border-0 px-4 py-2.5 text-zinc-900 shadow-sm ring-1 ring-inset ring-zinc-300 placeholder:text-zinc-400 focus:ring-2 focus:ring-inset focus:ring-sky-600 dark:bg-zinc-800 dark:text-white dark:ring-zinc-700 dark:placeholder:text-zinc-500 dark:focus:ring-sky-500 sm:text-sm sm:leading-6 font-mono",{"ring-red-500 dark:ring-red-500":l.value}])},null,2),[[vo,r.value]]),A[24]||(A[24]=c("p",{class:"mt-2 text-xs text-zinc-500 dark:text-zinc-500"}," Enter the full path to the Framework project directory ",-1)),l.value?(v(),b("p",A4,H(l.value),1)):I("",!0)])])]),_:1},8,["modelValue"]),x(nn,{modelValue:o.value,"onUpdate:modelValue":A[6]||(A[6]=J=>o.value=J),title:"Project Details",size:"lg"},{actions:R(()=>[c("div",R4,[x(Re,{variant:"secondary",onClick:A[4]||(A[4]=J=>o.value=!1)},{default:R(()=>[...A[31]||(A[31]=[oe(" Close ",-1)])]),_:1}),x(Re,{variant:"primary",onClick:A[5]||(A[5]=J=>{j.$router.push(`/project/${d.value.id}`),o.value=!1})},{default:R(()=>[...A[32]||(A[32]=[oe(" View Full Details ",-1)])]),_:1})])]),default:R(()=>[d.value?(v(),b("div",M4,[c("div",null,[c("h3",D4,H(d.value.name),1),x(pa,{variant:"sky",class:"mb-4"},{default:R(()=>[oe(H(d.value.type),1)]),_:1})]),c("div",T4,[c("div",null,[A[27]||(A[27]=c("label",{class:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1"}," Location ",-1)),c("p",$4,H(d.value.path),1)]),d.value.author?(v(),b("div",E4,[c("div",null,[A[28]||(A[28]=c("label",{class:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1"}," Author ",-1)),c("p",O4,H(d.value.author),1)]),d.value.author_email?(v(),b("div",P4,[A[29]||(A[29]=c("label",{class:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1"}," Email ",-1)),c("p",j4,H(d.value.author_email),1)])):I("",!0)])):I("",!0),c("div",null,[A[30]||(A[30]=c("label",{class:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1"}," Created ",-1)),c("p",L4,H(d.value.created),1)])])])):I("",!0)]),_:1},8,["modelValue"])]))}},I4=["for"],U4={class:"mt-2 grid grid-cols-1"},N4=["id","value"],Ft={__name:"Select",props:{id:{type:String,default:()=>`select-${Math.random().toString(36).substr(2,9)}`},modelValue:{type:[String,Number],default:""},label:{type:String,default:null}},emits:["update:modelValue"],setup(t){return(e,s)=>(v(),b("div",null,[t.label?(v(),b("label",{key:0,for:t.id,class:"block text-sm/6 font-medium text-gray-900 dark:text-white"},H(t.label),9,I4)):I("",!0),c("div",U4,[c("select",{id:t.id,value:t.modelValue,onChange:s[0]||(s[0]=i=>e.$emit("update:modelValue",i.target.value)),class:"col-start-1 row-start-1 w-full appearance-none rounded-md bg-white py-1.5 pr-8 pl-3 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 focus-visible:outline-2 focus-visible:-outline-offset-2 focus-visible:outline-sky-600 sm:text-sm/6 dark:bg-white/5 dark:text-white dark:outline-white/10 dark:*:bg-gray-800 dark:focus-visible:outline-sky-500"},[vt(e.$slots,"default")],40,N4),s[1]||(s[1]=c("svg",{viewBox:"0 0 16 16",fill:"currentColor","data-slot":"icon","aria-hidden":"true",class:"pointer-events-none col-start-1 row-start-1 mr-2 size-5 self-center justify-self-end text-gray-500 sm:size-4 dark:text-gray-400"},[c("path",{d:"M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z","clip-rule":"evenodd","fill-rule":"evenodd"})],-1))])]))}},z4={class:"flex items-center gap-3"},F4=["id","name","checked","disabled","aria-label"],H4={key:0,class:"text-sm/6"},W4=["for"],q4=["id"],Le={__name:"Toggle",props:{id:{type:String,default:()=>`toggle-${Math.random().toString(36).substr(2,9)}`},name:{type:String,default:null},modelValue:{type:Boolean,default:!1},label:{type:String,default:null},description:{type:String,default:null},ariaLabel:{type:String,default:null},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(t,{emit:e}){const s=t,i=e,n=o=>{if(!s.disabled){const r=o.target.checked;i("update:modelValue",r),i("change",r)}};return(o,r)=>(v(),b("div",z4,[c("div",{class:Me(["group relative inline-flex w-11 shrink-0 rounded-full p-0.5 inset-ring inset-ring-gray-900/5 outline-offset-2 transition-colors duration-200 ease-in-out dark:inset-ring-white/10",[t.modelValue?"bg-sky-600 outline-sky-600 dark:bg-sky-500 dark:outline-sky-500":"bg-gray-200 outline-sky-600 dark:bg-white/5 dark:outline-sky-500"]])},[c("span",{class:Me(["size-5 rounded-full bg-white shadow-xs ring-1 ring-gray-900/5 transition-transform duration-200 ease-in-out",{"translate-x-5":t.modelValue}])},null,2),c("input",{id:t.id,type:"checkbox",name:t.name,checked:t.modelValue,disabled:t.disabled,"aria-label":t.ariaLabel||t.label,class:"absolute inset-0 appearance-none focus:outline-hidden cursor-pointer disabled:cursor-not-allowed",onChange:n},null,40,F4)],2),t.label||t.description?(v(),b("div",H4,[t.label?(v(),b("label",{key:0,for:t.id,class:Me(["font-medium text-gray-900 cursor-pointer dark:text-white",{"cursor-not-allowed opacity-50":t.disabled}])},H(t.label),11,W4)):I("",!0),t.description?(v(),b("p",{key:1,id:`${t.id}-description`,class:"text-gray-500 dark:text-gray-400"},H(t.description),9,q4)):I("",!0)])):I("",!0)]))}},K4={class:"flex items-center"},G4=["id","name","value","checked"],J4=["for"],vl={__name:"Radio",props:{id:{type:String,required:!0},name:{type:String,required:!0},value:{type:[String,Number,Boolean],required:!0},modelValue:{type:[String,Number,Boolean],default:null}},emits:["update:modelValue"],setup(t){return(e,s)=>(v(),b("div",K4,[c("input",{id:t.id,type:"radio",name:t.name,value:t.value,checked:t.modelValue===t.value,onChange:s[0]||(s[0]=i=>e.$emit("update:modelValue",t.value)),class:"relative size-4 appearance-none rounded-full border border-gray-300 bg-white before:absolute before:inset-1 before:rounded-full before:bg-white not-checked:before:hidden checked:border-sky-600 checked:bg-sky-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:before:bg-gray-400 dark:border-white/10 dark:bg-white/5 dark:checked:border-sky-500 dark:checked:bg-sky-500 dark:focus-visible:outline-sky-500 dark:disabled:border-white/5 dark:disabled:bg-white/10 dark:disabled:before:bg-white/20 forced-colors:appearance-auto forced-colors:before:hidden"},null,40,G4),c("label",{for:t.id,class:"ml-3 block text-sm/6 font-medium text-gray-900 dark:text-white"},[vt(e.$slots,"default")],8,J4)]))}},Y4={class:"text-sm/6 font-semibold text-gray-900 dark:text-white"},Q4={key:0,class:"mt-1 text-sm/6 text-gray-600 dark:text-gray-400"},X4={class:"mt-6 space-y-6"},Z4={__name:"RadioGroup",props:{legend:{type:String,required:!0},description:{type:String,default:null}},setup(t){return(e,s)=>(v(),b("fieldset",null,[c("legend",Y4,H(t.legend),1),t.description?(v(),b("p",Q4,H(t.description),1)):I("",!0),c("div",X4,[vt(e.$slots,"default")])]))}},eS={class:"space-y-4"},tS={class:"flex items-start gap-4"},sS={class:"flex-1"},iS=["onClick"],gt={__name:"Repeater",props:{modelValue:{type:Array,default:()=>[]},addLabel:{type:String,default:"Add Item"},defaultItem:{type:[Object,Function],default:()=>({})}},emits:["update:modelValue"],setup(t,{emit:e}){const s=t,i=e,n=()=>{const l=typeof s.defaultItem=="function"?s.defaultItem():{...s.defaultItem,_id:Date.now()};i("update:modelValue",[...s.modelValue,l])},o=l=>{const a=s.modelValue.filter((d,u)=>u!==l);i("update:modelValue",a)},r=(l,a,d)=>{const u=[...s.modelValue];u[l]={...u[l],[a]:d},i("update:modelValue",u)};return(l,a)=>(v(),b("div",eS,[(v(!0),b(se,null,ke(t.modelValue,(d,u)=>(v(),b("div",{key:d._id||u,class:"rounded-lg border border-gray-200 p-4 dark:border-gray-700"},[c("div",tS,[c("div",sS,[vt(l.$slots,"default",{item:d,index:u,update:(f,h)=>r(u,f,h)})]),c("button",{type:"button",onClick:f=>o(u),class:"shrink-0 rounded-md p-1.5 text-gray-400 transition hover:bg-red-50 hover:text-red-600 dark:hover:bg-red-900/20 dark:hover:text-red-400",title:"Remove"},[...a[0]||(a[0]=[c("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,iS)])]))),128)),x(Re,{variant:"secondary",size:"sm",onClick:n,class:"inline-flex items-center"},{default:R(()=>[a[1]||(a[1]=c("svg",{class:"mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)),oe(" "+H(t.addLabel),1)]),_:1})]))}};let wd=[],y0=[];(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,s=0;e<t.length;e++)(e%2?y0:wd).push(s=s+t[e])})();function nS(t){if(t<768)return!1;for(let e=0,s=wd.length;;){let i=e+s>>1;if(t<wd[i])s=i;else if(t>=y0[i])e=i+1;else return!0;if(e==s)return!1}}function Qh(t){return t>=127462&&t<=127487}const Xh=8205;function oS(t,e,s=!0,i=!0){return(s?b0:rS)(t,e,i)}function b0(t,e,s){if(e==t.length)return e;e&&k0(t.charCodeAt(e))&&x0(t.charCodeAt(e-1))&&e--;let i=Du(t,e);for(e+=Zh(i);e<t.length;){let n=Du(t,e);if(i==Xh||n==Xh||s&&nS(n))e+=Zh(n),i=n;else if(Qh(n)){let o=0,r=e-2;for(;r>=0&&Qh(Du(t,r));)o++,r-=2;if(o%2==0)break;e+=2}else break}return e}function rS(t,e,s){for(;e>0;){let i=b0(t,e-2,s);if(i<e)return i;e--}return 0}function Du(t,e){let s=t.charCodeAt(e);if(!x0(s)||e+1==t.length)return s;let i=t.charCodeAt(e+1);return k0(i)?(s-55296<<10)+(i-56320)+65536:s}function k0(t){return t>=56320&&t<57344}function x0(t){return t>=55296&&t<56320}function Zh(t){return t<65536?1:2}class st{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,s,i){[e,s]=xo(this,e,s);let n=[];return this.decompose(0,e,n,2),i.length&&i.decompose(0,i.length,n,3),this.decompose(s,this.length,n,1),mi.from(n,this.length-(s-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,s=this.length){[e,s]=xo(this,e,s);let i=[];return this.decompose(e,s,i,0),mi.from(i,s-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let s=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),n=new cr(this),o=new cr(e);for(let r=s,l=s;;){if(n.next(r),o.next(r),r=0,n.lineBreak!=o.lineBreak||n.done!=o.done||n.value!=o.value)return!1;if(l+=n.value.length,n.done||l>=i)return!0}}iter(e=1){return new cr(this,e)}iterRange(e,s=this.length){return new w0(this,e,s)}iterLines(e,s){let i;if(e==null)i=this.iter();else{s==null&&(s=this.lines+1);let n=this.line(e).from;i=this.iterRange(n,Math.max(n,s==this.lines+1?this.length:s<=1?0:this.line(s-1).to))}return new _0(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?st.empty:e.length<=32?new $t(e):mi.from($t.split(e,[]))}}class $t extends st{constructor(e,s=lS(e)){super(),this.text=e,this.length=s}get lines(){return this.text.length}get children(){return null}lineInner(e,s,i,n){for(let o=0;;o++){let r=this.text[o],l=n+r.length;if((s?i:l)>=e)return new aS(n,l,i,r);n=l+1,i++}}decompose(e,s,i,n){let o=e<=0&&s>=this.length?this:new $t(ep(this.text,e,s),Math.min(s,this.length)-Math.max(0,e));if(n&1){let r=i.pop(),l=Kl(o.text,r.text.slice(),0,o.length);if(l.length<=32)i.push(new $t(l,r.length+o.length));else{let a=l.length>>1;i.push(new $t(l.slice(0,a)),new $t(l.slice(a)))}}else i.push(o)}replace(e,s,i){if(!(i instanceof $t))return super.replace(e,s,i);[e,s]=xo(this,e,s);let n=Kl(this.text,Kl(i.text,ep(this.text,0,e)),s),o=this.length+i.length-(s-e);return n.length<=32?new $t(n,o):mi.from($t.split(n,[]),o)}sliceString(e,s=this.length,i=`
`){[e,s]=xo(this,e,s);let n="";for(let o=0,r=0;o<=s&&r<this.text.length;r++){let l=this.text[r],a=o+l.length;o>e&&r&&(n+=i),e<a&&s>o&&(n+=l.slice(Math.max(0,e-o),s-o)),o=a+1}return n}flatten(e){for(let s of this.text)e.push(s)}scanIdentical(){return 0}static split(e,s){let i=[],n=-1;for(let o of e)i.push(o),n+=o.length+1,i.length==32&&(s.push(new $t(i,n)),i=[],n=-1);return n>-1&&s.push(new $t(i,n)),s}}class mi extends st{constructor(e,s){super(),this.children=e,this.length=s,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,s,i,n){for(let o=0;;o++){let r=this.children[o],l=n+r.length,a=i+r.lines-1;if((s?a:l)>=e)return r.lineInner(e,s,i,n);n=l+1,i=a+1}}decompose(e,s,i,n){for(let o=0,r=0;r<=s&&o<this.children.length;o++){let l=this.children[o],a=r+l.length;if(e<=a&&s>=r){let d=n&((r<=e?1:0)|(a>=s?2:0));r>=e&&a<=s&&!d?i.push(l):l.decompose(e-r,s-r,i,d)}r=a+1}}replace(e,s,i){if([e,s]=xo(this,e,s),i.lines<this.lines)for(let n=0,o=0;n<this.children.length;n++){let r=this.children[n],l=o+r.length;if(e>=o&&s<=l){let a=r.replace(e-o,s-o,i),d=this.lines-r.lines+a.lines;if(a.lines<d>>4&&a.lines>d>>6){let u=this.children.slice();return u[n]=a,new mi(u,this.length-(s-e)+i.length)}return super.replace(o,l,a)}o=l+1}return super.replace(e,s,i)}sliceString(e,s=this.length,i=`
`){[e,s]=xo(this,e,s);let n="";for(let o=0,r=0;o<this.children.length&&r<=s;o++){let l=this.children[o],a=r+l.length;r>e&&o&&(n+=i),e<a&&s>r&&(n+=l.sliceString(e-r,s-r,i)),r=a+1}return n}flatten(e){for(let s of this.children)s.flatten(e)}scanIdentical(e,s){if(!(e instanceof mi))return 0;let i=0,[n,o,r,l]=s>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;n+=s,o+=s){if(n==r||o==l)return i;let a=this.children[n],d=e.children[o];if(a!=d)return i+a.scanIdentical(d,s);i+=a.length+1}}static from(e,s=e.reduce((i,n)=>i+n.length+1,-1)){let i=0;for(let g of e)i+=g.lines;if(i<32){let g=[];for(let _ of e)_.flatten(g);return new $t(g,s)}let n=Math.max(32,i>>5),o=n<<1,r=n>>1,l=[],a=0,d=-1,u=[];function f(g){let _;if(g.lines>o&&g instanceof mi)for(let p of g.children)f(p);else g.lines>r&&(a>r||!a)?(h(),l.push(g)):g instanceof $t&&a&&(_=u[u.length-1])instanceof $t&&g.lines+_.lines<=32?(a+=g.lines,d+=g.length+1,u[u.length-1]=new $t(_.text.concat(g.text),_.length+1+g.length)):(a+g.lines>n&&h(),a+=g.lines,d+=g.length+1,u.push(g))}function h(){a!=0&&(l.push(u.length==1?u[0]:mi.from(u,d)),d=-1,a=u.length=0)}for(let g of e)f(g);return h(),l.length==1?l[0]:new mi(l,s)}}st.empty=new $t([""],0);function lS(t){let e=-1;for(let s of t)e+=s.length+1;return e}function Kl(t,e,s=0,i=1e9){for(let n=0,o=0,r=!0;o<t.length&&n<=i;o++){let l=t[o],a=n+l.length;a>=s&&(a>i&&(l=l.slice(0,i-n)),n<s&&(l=l.slice(s-n)),r?(e[e.length-1]+=l,r=!1):e.push(l)),n=a+1}return e}function ep(t,e,s){return Kl(t,[""],e,s)}class cr{constructor(e,s=1){this.dir=s,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[s>0?1:(e instanceof $t?e.text.length:e.children.length)<<1]}nextInner(e,s){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,n=this.nodes[i],o=this.offsets[i],r=o>>1,l=n instanceof $t?n.text.length:n.children.length;if(r==(s>0?l:0)){if(i==0)return this.done=!0,this.value="",this;s>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((o&1)==(s>0?0:1)){if(this.offsets[i]+=s,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(n instanceof $t){let a=n.text[r+(s<0?-1:0)];if(this.offsets[i]+=s,a.length>Math.max(0,e))return this.value=e==0?a:s>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=n.children[r+(s<0?-1:0)];e>a.length?(e-=a.length,this.offsets[i]+=s):(s<0&&this.offsets[i]--,this.nodes.push(a),this.offsets.push(s>0?1:(a instanceof $t?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class w0{constructor(e,s,i){this.value="",this.done=!1,this.cursor=new cr(e,s>i?-1:1),this.pos=s>i?e.length:0,this.from=Math.min(s,i),this.to=Math.max(s,i)}nextInner(e,s){if(s<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,s<0?this.pos-this.to:this.from-this.pos);let i=s<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:n}=this.cursor.next(e);return this.pos+=(n.length+e)*s,this.value=n.length<=i?n:s<0?n.slice(n.length-i):n.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class _0{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:s,lineBreak:i,value:n}=this.inner.next(e);return s&&this.afterBreak?(this.value="",this.afterBreak=!1):s?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=n,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(st.prototype[Symbol.iterator]=function(){return this.iter()},cr.prototype[Symbol.iterator]=w0.prototype[Symbol.iterator]=_0.prototype[Symbol.iterator]=function(){return this});class aS{constructor(e,s,i,n){this.from=e,this.to=s,this.number=i,this.text=n}get length(){return this.to-this.from}}function xo(t,e,s){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,s))]}function Gt(t,e,s=!0,i=!0){return oS(t,e,s,i)}function uS(t){return t>=56320&&t<57344}function dS(t){return t>=55296&&t<56320}function ks(t,e){let s=t.charCodeAt(e);if(!dS(s)||e+1==t.length)return s;let i=t.charCodeAt(e+1);return uS(i)?(s-55296<<10)+(i-56320)+65536:s}function zc(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function gi(t){return t<65536?1:2}const _d=/\r\n?|\n/;var ps=(function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t})(ps||(ps={}));class wi{constructor(e){this.sections=e}get length(){let e=0;for(let s=0;s<this.sections.length;s+=2)e+=this.sections[s];return e}get newLength(){let e=0;for(let s=0;s<this.sections.length;s+=2){let i=this.sections[s+1];e+=i<0?this.sections[s]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let s=0,i=0,n=0;s<this.sections.length;){let o=this.sections[s++],r=this.sections[s++];r<0?(e(i,n,o),n+=o):n+=r,i+=o}}iterChangedRanges(e,s=!1){Sd(this,e,s)}get invertedDesc(){let e=[];for(let s=0;s<this.sections.length;){let i=this.sections[s++],n=this.sections[s++];n<0?e.push(i,n):e.push(n,i)}return new wi(e)}composeDesc(e){return this.empty?e:e.empty?this:S0(this,e)}mapDesc(e,s=!1){return e.empty?this:Cd(this,e,s)}mapPos(e,s=-1,i=ps.Simple){let n=0,o=0;for(let r=0;r<this.sections.length;){let l=this.sections[r++],a=this.sections[r++],d=n+l;if(a<0){if(d>e)return o+(e-n);o+=l}else{if(i!=ps.Simple&&d>=e&&(i==ps.TrackDel&&n<e&&d>e||i==ps.TrackBefore&&n<e||i==ps.TrackAfter&&d>e))return null;if(d>e||d==e&&s<0&&!l)return e==n||s<0?o:o+a;o+=a}n=d}if(e>n)throw new RangeError(`Position ${e} is out of range for changeset of length ${n}`);return o}touchesRange(e,s=e){for(let i=0,n=0;i<this.sections.length&&n<=s;){let o=this.sections[i++],r=this.sections[i++],l=n+o;if(r>=0&&n<=s&&l>=e)return n<e&&l>s?"cover":!0;n=l}return!1}toString(){let e="";for(let s=0;s<this.sections.length;){let i=this.sections[s++],n=this.sections[s++];e+=(e?" ":"")+i+(n>=0?":"+n:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(s=>typeof s!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new wi(e)}static create(e){return new wi(e)}}class Rt extends wi{constructor(e,s){super(e),this.inserted=s}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return Sd(this,(s,i,n,o,r)=>e=e.replace(n,n+(i-s),r),!1),e}mapDesc(e,s=!1){return Cd(this,e,s,!0)}invert(e){let s=this.sections.slice(),i=[];for(let n=0,o=0;n<s.length;n+=2){let r=s[n],l=s[n+1];if(l>=0){s[n]=l,s[n+1]=r;let a=n>>1;for(;i.length<a;)i.push(st.empty);i.push(r?e.slice(o,o+r):st.empty)}o+=r}return new Rt(s,i)}compose(e){return this.empty?e:e.empty?this:S0(this,e,!0)}map(e,s=!1){return e.empty?this:Cd(this,e,s,!0)}iterChanges(e,s=!1){Sd(this,e,s)}get desc(){return wi.create(this.sections)}filter(e){let s=[],i=[],n=[],o=new Mr(this);e:for(let r=0,l=0;;){let a=r==e.length?1e9:e[r++];for(;l<a||l==a&&o.len==0;){if(o.done)break e;let u=Math.min(o.len,a-l);Zt(n,u,-1);let f=o.ins==-1?-1:o.off==0?o.ins:0;Zt(s,u,f),f>0&&Xi(i,s,o.text),o.forward(u),l+=u}let d=e[r++];for(;l<d;){if(o.done)break e;let u=Math.min(o.len,d-l);Zt(s,u,-1),Zt(n,u,o.ins==-1?-1:o.off==0?o.ins:0),o.forward(u),l+=u}}return{changes:new Rt(s,i),filtered:wi.create(n)}}toJSON(){let e=[];for(let s=0;s<this.sections.length;s+=2){let i=this.sections[s],n=this.sections[s+1];n<0?e.push(i):n==0?e.push([i]):e.push([i].concat(this.inserted[s>>1].toJSON()))}return e}static of(e,s,i){let n=[],o=[],r=0,l=null;function a(u=!1){if(!u&&!n.length)return;r<s&&Zt(n,s-r,-1);let f=new Rt(n,o);l=l?l.compose(f.map(l)):f,n=[],o=[],r=0}function d(u){if(Array.isArray(u))for(let f of u)d(f);else if(u instanceof Rt){if(u.length!=s)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${s})`);a(),l=l?l.compose(u.map(l)):u}else{let{from:f,to:h=f,insert:g}=u;if(f>h||f<0||h>s)throw new RangeError(`Invalid change range ${f} to ${h} (in doc of length ${s})`);let _=g?typeof g=="string"?st.of(g.split(i||_d)):g:st.empty,p=_.length;if(f==h&&p==0)return;f<r&&a(),f>r&&Zt(n,f-r,-1),Zt(n,h-f,p),Xi(o,n,_),r=h}}return d(e),a(!l),l}static empty(e){return new Rt(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let s=[],i=[];for(let n=0;n<e.length;n++){let o=e[n];if(typeof o=="number")s.push(o,-1);else{if(!Array.isArray(o)||typeof o[0]!="number"||o.some((r,l)=>l&&typeof r!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(o.length==1)s.push(o[0],0);else{for(;i.length<n;)i.push(st.empty);i[n]=st.of(o.slice(1)),s.push(o[0],i[n].length)}}}return new Rt(s,i)}static createSet(e,s){return new Rt(e,s)}}function Zt(t,e,s,i=!1){if(e==0&&s<=0)return;let n=t.length-2;n>=0&&s<=0&&s==t[n+1]?t[n]+=e:n>=0&&e==0&&t[n]==0?t[n+1]+=s:i?(t[n]+=e,t[n+1]+=s):t.push(e,s)}function Xi(t,e,s){if(s.length==0)return;let i=e.length-2>>1;if(i<t.length)t[t.length-1]=t[t.length-1].append(s);else{for(;t.length<i;)t.push(st.empty);t.push(s)}}function Sd(t,e,s){let i=t.inserted;for(let n=0,o=0,r=0;r<t.sections.length;){let l=t.sections[r++],a=t.sections[r++];if(a<0)n+=l,o+=l;else{let d=n,u=o,f=st.empty;for(;d+=l,u+=a,a&&i&&(f=f.append(i[r-2>>1])),!(s||r==t.sections.length||t.sections[r+1]<0);)l=t.sections[r++],a=t.sections[r++];e(n,d,o,u,f),n=d,o=u}}}function Cd(t,e,s,i=!1){let n=[],o=i?[]:null,r=new Mr(t),l=new Mr(e);for(let a=-1;;){if(r.done&&l.len||l.done&&r.len)throw new Error("Mismatched change set lengths");if(r.ins==-1&&l.ins==-1){let d=Math.min(r.len,l.len);Zt(n,d,-1),r.forward(d),l.forward(d)}else if(l.ins>=0&&(r.ins<0||a==r.i||r.off==0&&(l.len<r.len||l.len==r.len&&!s))){let d=l.len;for(Zt(n,l.ins,-1);d;){let u=Math.min(r.len,d);r.ins>=0&&a<r.i&&r.len<=u&&(Zt(n,0,r.ins),o&&Xi(o,n,r.text),a=r.i),r.forward(u),d-=u}l.next()}else if(r.ins>=0){let d=0,u=r.len;for(;u;)if(l.ins==-1){let f=Math.min(u,l.len);d+=f,u-=f,l.forward(f)}else if(l.ins==0&&l.len<u)u-=l.len,l.next();else break;Zt(n,d,a<r.i?r.ins:0),o&&a<r.i&&Xi(o,n,r.text),a=r.i,r.forward(r.len-u)}else{if(r.done&&l.done)return o?Rt.createSet(n,o):wi.create(n);throw new Error("Mismatched change set lengths")}}}function S0(t,e,s=!1){let i=[],n=s?[]:null,o=new Mr(t),r=new Mr(e);for(let l=!1;;){if(o.done&&r.done)return n?Rt.createSet(i,n):wi.create(i);if(o.ins==0)Zt(i,o.len,0,l),o.next();else if(r.len==0&&!r.done)Zt(i,0,r.ins,l),n&&Xi(n,i,r.text),r.next();else{if(o.done||r.done)throw new Error("Mismatched change set lengths");{let a=Math.min(o.len2,r.len),d=i.length;if(o.ins==-1){let u=r.ins==-1?-1:r.off?0:r.ins;Zt(i,a,u,l),n&&u&&Xi(n,i,r.text)}else r.ins==-1?(Zt(i,o.off?0:o.len,a,l),n&&Xi(n,i,o.textBit(a))):(Zt(i,o.off?0:o.len,r.off?0:r.ins,l),n&&!r.off&&Xi(n,i,r.text));l=(o.ins>a||r.ins>=0&&r.len>a)&&(l||i.length>d),o.forward2(a),r.forward(a)}}}}class Mr{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,s=this.i-2>>1;return s>=e.length?st.empty:e[s]}textBit(e){let{inserted:s}=this.set,i=this.i-2>>1;return i>=s.length&&!e?st.empty:s[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Tn{constructor(e,s,i){this.from=e,this.to=s,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,s=-1){let i,n;return this.empty?i=n=e.mapPos(this.from,s):(i=e.mapPos(this.from,1),n=e.mapPos(this.to,-1)),i==this.from&&n==this.to?this:new Tn(i,n,this.flags)}extend(e,s=e){if(e<=this.anchor&&s>=this.anchor)return fe.range(e,s);let i=Math.abs(e-this.anchor)>Math.abs(s-this.anchor)?e:s;return fe.range(this.anchor,i)}eq(e,s=!1){return this.anchor==e.anchor&&this.head==e.head&&(!s||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return fe.range(e.anchor,e.head)}static create(e,s,i){return new Tn(e,s,i)}}class fe{constructor(e,s){this.ranges=e,this.mainIndex=s}map(e,s=-1){return e.empty?this:fe.create(this.ranges.map(i=>i.map(e,s)),this.mainIndex)}eq(e,s=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],s))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new fe([this.main],0)}addRange(e,s=!0){return fe.create([e].concat(this.ranges),s?0:this.mainIndex+1)}replaceRange(e,s=this.mainIndex){let i=this.ranges.slice();return i[s]=e,fe.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new fe(e.ranges.map(s=>Tn.fromJSON(s)),e.main)}static single(e,s=e){return new fe([fe.range(e,s)],0)}static create(e,s=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,n=0;n<e.length;n++){let o=e[n];if(o.empty?o.from<=i:o.from<i)return fe.normalized(e.slice(),s);i=o.to}return new fe(e,s)}static cursor(e,s=0,i,n){return Tn.create(e,e,(s==0?0:s<0?8:16)|(i==null?7:Math.min(6,i))|(n??16777215)<<6)}static range(e,s,i,n){let o=(i??16777215)<<6|(n==null?7:Math.min(6,n));return s<e?Tn.create(s,e,48|o):Tn.create(e,s,(s>e?8:0)|o)}static normalized(e,s=0){let i=e[s];e.sort((n,o)=>n.from-o.from),s=e.indexOf(i);for(let n=1;n<e.length;n++){let o=e[n],r=e[n-1];if(o.empty?o.from<=r.to:o.from<r.to){let l=r.from,a=Math.max(o.to,r.to);n<=s&&s--,e.splice(--n,2,o.anchor>o.head?fe.range(a,l):fe.range(l,a))}}return new fe(e,s)}}function C0(t,e){for(let s of t.ranges)if(s.to>e)throw new RangeError("Selection points outside of document")}let Fc=0;class $e{constructor(e,s,i,n,o){this.combine=e,this.compareInput=s,this.compare=i,this.isStatic=n,this.id=Fc++,this.default=e([]),this.extensions=typeof o=="function"?o(this):o}get reader(){return this}static define(e={}){return new $e(e.combine||(s=>s),e.compareInput||((s,i)=>s===i),e.compare||(e.combine?(s,i)=>s===i:Hc),!!e.static,e.enables)}of(e){return new Gl([],this,0,e)}compute(e,s){if(this.isStatic)throw new Error("Can't compute a static facet");return new Gl(e,this,1,s)}computeN(e,s){if(this.isStatic)throw new Error("Can't compute a static facet");return new Gl(e,this,2,s)}from(e,s){return s||(s=i=>i),this.compute([e],i=>s(i.field(e)))}}function Hc(t,e){return t==e||t.length==e.length&&t.every((s,i)=>s===e[i])}class Gl{constructor(e,s,i,n){this.dependencies=e,this.facet=s,this.type=i,this.value=n,this.id=Fc++}dynamicSlot(e){var s;let i=this.value,n=this.facet.compareInput,o=this.id,r=e[o]>>1,l=this.type==2,a=!1,d=!1,u=[];for(let f of this.dependencies)f=="doc"?a=!0:f=="selection"?d=!0:(((s=e[f.id])!==null&&s!==void 0?s:1)&1)==0&&u.push(e[f.id]);return{create(f){return f.values[r]=i(f),1},update(f,h){if(a&&h.docChanged||d&&(h.docChanged||h.selection)||Ad(f,u)){let g=i(f);if(l?!tp(g,f.values[r],n):!n(g,f.values[r]))return f.values[r]=g,1}return 0},reconfigure:(f,h)=>{let g,_=h.config.address[o];if(_!=null){let p=ga(h,_);if(this.dependencies.every(V=>V instanceof $e?h.facet(V)===f.facet(V):V instanceof Jt?h.field(V,!1)==f.field(V,!1):!0)||(l?tp(g=i(f),p,n):n(g=i(f),p)))return f.values[r]=p,0}else g=i(f);return f.values[r]=g,1}}}}function tp(t,e,s){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!s(t[i],e[i]))return!1;return!0}function Ad(t,e){let s=!1;for(let i of e)fr(t,i)&1&&(s=!0);return s}function cS(t,e,s){let i=s.map(a=>t[a.id]),n=s.map(a=>a.type),o=i.filter(a=>!(a&1)),r=t[e.id]>>1;function l(a){let d=[];for(let u=0;u<i.length;u++){let f=ga(a,i[u]);if(n[u]==2)for(let h of f)d.push(h);else d.push(f)}return e.combine(d)}return{create(a){for(let d of i)fr(a,d);return a.values[r]=l(a),1},update(a,d){if(!Ad(a,o))return 0;let u=l(a);return e.compare(u,a.values[r])?0:(a.values[r]=u,1)},reconfigure(a,d){let u=Ad(a,i),f=d.config.facets[e.id],h=d.facet(e);if(f&&!u&&Hc(s,f))return a.values[r]=h,0;let g=l(a);return e.compare(g,h)?(a.values[r]=h,0):(a.values[r]=g,1)}}}const yl=$e.define({static:!0});class Jt{constructor(e,s,i,n,o){this.id=e,this.createF=s,this.updateF=i,this.compareF=n,this.spec=o,this.provides=void 0}static define(e){let s=new Jt(Fc++,e.create,e.update,e.compare||((i,n)=>i===n),e);return e.provide&&(s.provides=e.provide(s)),s}create(e){let s=e.facet(yl).find(i=>i.field==this);return(s?.create||this.createF)(e)}slot(e){let s=e[this.id]>>1;return{create:i=>(i.values[s]=this.create(i),1),update:(i,n)=>{let o=i.values[s],r=this.updateF(o,n);return this.compareF(o,r)?0:(i.values[s]=r,1)},reconfigure:(i,n)=>{let o=i.facet(yl),r=n.facet(yl),l;return(l=o.find(a=>a.field==this))&&l!=r.find(a=>a.field==this)?(i.values[s]=l.create(i),1):n.config.address[this.id]!=null?(i.values[s]=n.field(this),0):(i.values[s]=this.create(i),1)}}}init(e){return[this,yl.of({field:this,create:e})]}get extension(){return this}}const Vn={lowest:4,low:3,default:2,high:1,highest:0};function qo(t){return e=>new A0(e,t)}const Hn={highest:qo(Vn.highest),high:qo(Vn.high),default:qo(Vn.default),low:qo(Vn.low),lowest:qo(Vn.lowest)};class A0{constructor(e,s){this.inner=e,this.prec=s}}class Za{of(e){return new Vd(this,e)}reconfigure(e){return Za.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Vd{constructor(e,s){this.compartment=e,this.inner=s}}class ma{constructor(e,s,i,n,o,r){for(this.base=e,this.compartments=s,this.dynamicSlots=i,this.address=n,this.staticValues=o,this.facets=r,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let s=this.address[e.id];return s==null?e.default:this.staticValues[s>>1]}static resolve(e,s,i){let n=[],o=Object.create(null),r=new Map;for(let h of fS(e,s,r))h instanceof Jt?n.push(h):(o[h.facet.id]||(o[h.facet.id]=[])).push(h);let l=Object.create(null),a=[],d=[];for(let h of n)l[h.id]=d.length<<1,d.push(g=>h.slot(g));let u=i?.config.facets;for(let h in o){let g=o[h],_=g[0].facet,p=u&&u[h]||[];if(g.every(V=>V.type==0))if(l[_.id]=a.length<<1|1,Hc(p,g))a.push(i.facet(_));else{let V=_.combine(g.map(M=>M.value));a.push(i&&_.compare(V,i.facet(_))?i.facet(_):V)}else{for(let V of g)V.type==0?(l[V.id]=a.length<<1|1,a.push(V.value)):(l[V.id]=d.length<<1,d.push(M=>V.dynamicSlot(M)));l[_.id]=d.length<<1,d.push(V=>cS(V,_,g))}}let f=d.map(h=>h(l));return new ma(e,r,f,l,a,o)}}function fS(t,e,s){let i=[[],[],[],[],[]],n=new Map;function o(r,l){let a=n.get(r);if(a!=null){if(a<=l)return;let d=i[a].indexOf(r);d>-1&&i[a].splice(d,1),r instanceof Vd&&s.delete(r.compartment)}if(n.set(r,l),Array.isArray(r))for(let d of r)o(d,l);else if(r instanceof Vd){if(s.has(r.compartment))throw new RangeError("Duplicate use of compartment in extensions");let d=e.get(r.compartment)||r.inner;s.set(r.compartment,d),o(d,l)}else if(r instanceof A0)o(r.inner,r.prec);else if(r instanceof Jt)i[l].push(r),r.provides&&o(r.provides,l);else if(r instanceof Gl)i[l].push(r),r.facet.extensions&&o(r.facet.extensions,Vn.default);else{let d=r.extension;if(!d)throw new Error(`Unrecognized extension value in extension set (${r}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(d,l)}}return o(t,Vn.default),i.reduce((r,l)=>r.concat(l))}function fr(t,e){if(e&1)return 2;let s=e>>1,i=t.status[s];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;t.status[s]=4;let n=t.computeSlot(t,t.config.dynamicSlots[s]);return t.status[s]=2|n}function ga(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const V0=$e.define(),Md=$e.define({combine:t=>t.some(e=>e),static:!0}),M0=$e.define({combine:t=>t.length?t[0]:void 0,static:!0}),D0=$e.define(),T0=$e.define(),$0=$e.define(),E0=$e.define({combine:t=>t.length?t[0]:!1});class zi{constructor(e,s){this.type=e,this.value=s}static define(){return new hS}}class hS{of(e){return new zi(this,e)}}class pS{constructor(e){this.map=e}of(e){return new We(this,e)}}class We{constructor(e,s){this.type=e,this.value=s}map(e){let s=this.type.map(this.value,e);return s===void 0?void 0:s==this.value?this:new We(this.type,s)}is(e){return this.type==e}static define(e={}){return new pS(e.map||(s=>s))}static mapEffects(e,s){if(!e.length)return e;let i=[];for(let n of e){let o=n.map(s);o&&i.push(o)}return i}}We.reconfigure=We.define();We.appendConfig=We.define();class Bt{constructor(e,s,i,n,o,r){this.startState=e,this.changes=s,this.selection=i,this.effects=n,this.annotations=o,this.scrollIntoView=r,this._doc=null,this._state=null,i&&C0(i,s.newLength),o.some(l=>l.type==Bt.time)||(this.annotations=o.concat(Bt.time.of(Date.now())))}static create(e,s,i,n,o,r){return new Bt(e,s,i,n,o,r)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let s of this.annotations)if(s.type==e)return s.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let s=this.annotation(Bt.userEvent);return!!(s&&(s==e||s.length>e.length&&s.slice(0,e.length)==e&&s[e.length]=="."))}}Bt.time=zi.define();Bt.userEvent=zi.define();Bt.addToHistory=zi.define();Bt.remote=zi.define();function mS(t,e){let s=[];for(let i=0,n=0;;){let o,r;if(i<t.length&&(n==e.length||e[n]>=t[i]))o=t[i++],r=t[i++];else if(n<e.length)o=e[n++],r=e[n++];else return s;!s.length||s[s.length-1]<o?s.push(o,r):s[s.length-1]<r&&(s[s.length-1]=r)}}function O0(t,e,s){var i;let n,o,r;return s?(n=e.changes,o=Rt.empty(e.changes.length),r=t.changes.compose(e.changes)):(n=e.changes.map(t.changes),o=t.changes.mapDesc(e.changes,!0),r=t.changes.compose(n)),{changes:r,selection:e.selection?e.selection.map(o):(i=t.selection)===null||i===void 0?void 0:i.map(n),effects:We.mapEffects(t.effects,n).concat(We.mapEffects(e.effects,o)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function Dd(t,e,s){let i=e.selection,n=fo(e.annotations);return e.userEvent&&(n=n.concat(Bt.userEvent.of(e.userEvent))),{changes:e.changes instanceof Rt?e.changes:Rt.of(e.changes||[],s,t.facet(M0)),selection:i&&(i instanceof fe?i:fe.single(i.anchor,i.head)),effects:fo(e.effects),annotations:n,scrollIntoView:!!e.scrollIntoView}}function P0(t,e,s){let i=Dd(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(s=!1);for(let o=1;o<e.length;o++){e[o].filter===!1&&(s=!1);let r=!!e[o].sequential;i=O0(i,Dd(t,e[o],r?i.changes.newLength:t.doc.length),r)}let n=Bt.create(t,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return vS(s?gS(n):n)}function gS(t){let e=t.startState,s=!0;for(let n of e.facet(D0)){let o=n(t);if(o===!1){s=!1;break}Array.isArray(o)&&(s=s===!0?o:mS(s,o))}if(s!==!0){let n,o;if(s===!1)o=t.changes.invertedDesc,n=Rt.empty(e.doc.length);else{let r=t.changes.filter(s);n=r.changes,o=r.filtered.mapDesc(r.changes).invertedDesc}t=Bt.create(e,n,t.selection&&t.selection.map(o),We.mapEffects(t.effects,o),t.annotations,t.scrollIntoView)}let i=e.facet(T0);for(let n=i.length-1;n>=0;n--){let o=i[n](t);o instanceof Bt?t=o:Array.isArray(o)&&o.length==1&&o[0]instanceof Bt?t=o[0]:t=P0(e,fo(o),!1)}return t}function vS(t){let e=t.startState,s=e.facet($0),i=t;for(let n=s.length-1;n>=0;n--){let o=s[n](t);o&&Object.keys(o).length&&(i=O0(i,Dd(e,o,t.changes.newLength),!0))}return i==t?t:Bt.create(e,t.changes,t.selection,i.effects,i.annotations,i.scrollIntoView)}const yS=[];function fo(t){return t==null?yS:Array.isArray(t)?t:[t]}var St=(function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t})(St||(St={}));const bS=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Td;try{Td=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function kS(t){if(Td)return Td.test(t);for(let e=0;e<t.length;e++){let s=t[e];if(/\w/.test(s)||s>""&&(s.toUpperCase()!=s.toLowerCase()||bS.test(s)))return!0}return!1}function xS(t){return e=>{if(!/\S/.test(e))return St.Space;if(kS(e))return St.Word;for(let s=0;s<t.length;s++)if(e.indexOf(t[s])>-1)return St.Word;return St.Other}}class et{constructor(e,s,i,n,o,r){this.config=e,this.doc=s,this.selection=i,this.values=n,this.status=e.statusTemplate.slice(),this.computeSlot=o,r&&(r._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)fr(this,l<<1);this.computeSlot=null}field(e,s=!0){let i=this.config.address[e.id];if(i==null){if(s)throw new RangeError("Field is not present in this state");return}return fr(this,i),ga(this,i)}update(...e){return P0(this,e,!0)}applyTransaction(e){let s=this.config,{base:i,compartments:n}=s;for(let l of e.effects)l.is(Za.reconfigure)?(s&&(n=new Map,s.compartments.forEach((a,d)=>n.set(d,a)),s=null),n.set(l.value.compartment,l.value.extension)):l.is(We.reconfigure)?(s=null,i=l.value):l.is(We.appendConfig)&&(s=null,i=fo(i).concat(l.value));let o;s?o=e.startState.values.slice():(s=ma.resolve(i,n,this),o=new et(s,this.doc,this.selection,s.dynamicSlots.map(()=>null),(a,d)=>d.reconfigure(a,this),null).values);let r=e.startState.facet(Md)?e.newSelection:e.newSelection.asSingle();new et(s,e.newDoc,r,o,(l,a)=>a.update(l,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(s=>({changes:{from:s.from,to:s.to,insert:e},range:fe.cursor(s.from+e.length)}))}changeByRange(e){let s=this.selection,i=e(s.ranges[0]),n=this.changes(i.changes),o=[i.range],r=fo(i.effects);for(let l=1;l<s.ranges.length;l++){let a=e(s.ranges[l]),d=this.changes(a.changes),u=d.map(n);for(let h=0;h<l;h++)o[h]=o[h].map(u);let f=n.mapDesc(d,!0);o.push(a.range.map(f)),n=n.compose(u),r=We.mapEffects(r,u).concat(We.mapEffects(fo(a.effects),f))}return{changes:n,selection:fe.create(o,s.mainIndex),effects:r}}changes(e=[]){return e instanceof Rt?e:Rt.of(e,this.doc.length,this.facet(et.lineSeparator))}toText(e){return st.of(e.split(this.facet(et.lineSeparator)||_d))}sliceDoc(e=0,s=this.doc.length){return this.doc.sliceString(e,s,this.lineBreak)}facet(e){let s=this.config.address[e.id];return s==null?e.default:(fr(this,s),ga(this,s))}toJSON(e){let s={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let n=e[i];n instanceof Jt&&this.config.address[n.id]!=null&&(s[i]=n.spec.toJSON(this.field(e[i]),this))}return s}static fromJSON(e,s={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let n=[];if(i){for(let o in i)if(Object.prototype.hasOwnProperty.call(e,o)){let r=i[o],l=e[o];n.push(r.init(a=>r.spec.fromJSON(l,a)))}}return et.create({doc:e.doc,selection:fe.fromJSON(e.selection),extensions:s.extensions?n.concat([s.extensions]):n})}static create(e={}){let s=ma.resolve(e.extensions||[],new Map),i=e.doc instanceof st?e.doc:st.of((e.doc||"").split(s.staticFacet(et.lineSeparator)||_d)),n=e.selection?e.selection instanceof fe?e.selection:fe.single(e.selection.anchor,e.selection.head):fe.single(0);return C0(n,i.length),s.staticFacet(Md)||(n=n.asSingle()),new et(s,i,n,s.dynamicSlots.map(()=>null),(o,r)=>r.create(o),null)}get tabSize(){return this.facet(et.tabSize)}get lineBreak(){return this.facet(et.lineSeparator)||`
`}get readOnly(){return this.facet(E0)}phrase(e,...s){for(let i of this.facet(et.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return s.length&&(e=e.replace(/\$(\$|\d*)/g,(i,n)=>{if(n=="$")return"$";let o=+(n||1);return!o||o>s.length?i:s[o-1]})),e}languageDataAt(e,s,i=-1){let n=[];for(let o of this.facet(V0))for(let r of o(this,s,i))Object.prototype.hasOwnProperty.call(r,e)&&n.push(r[e]);return n}charCategorizer(e){return xS(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:s,from:i,length:n}=this.doc.lineAt(e),o=this.charCategorizer(e),r=e-i,l=e-i;for(;r>0;){let a=Gt(s,r,!1);if(o(s.slice(a,r))!=St.Word)break;r=a}for(;l<n;){let a=Gt(s,l);if(o(s.slice(l,a))!=St.Word)break;l=a}return r==l?null:fe.range(r+i,l+i)}}et.allowMultipleSelections=Md;et.tabSize=$e.define({combine:t=>t.length?t[0]:4});et.lineSeparator=M0;et.readOnly=E0;et.phrases=$e.define({compare(t,e){let s=Object.keys(t),i=Object.keys(e);return s.length==i.length&&s.every(n=>t[n]==e[n])}});et.languageData=V0;et.changeFilter=D0;et.transactionFilter=T0;et.transactionExtender=$0;Za.reconfigure=We.define();function Si(t,e,s={}){let i={};for(let n of t)for(let o of Object.keys(n)){let r=n[o],l=i[o];if(l===void 0)i[o]=r;else if(!(l===r||r===void 0))if(Object.hasOwnProperty.call(s,o))i[o]=s[o](l,r);else throw new Error("Config merge conflict for field "+o)}for(let n in e)i[n]===void 0&&(i[n]=e[n]);return i}class Rn{eq(e){return this==e}range(e,s=e){return $d.create(e,s,this)}}Rn.prototype.startSide=Rn.prototype.endSide=0;Rn.prototype.point=!1;Rn.prototype.mapMode=ps.TrackDel;let $d=class j0{constructor(e,s,i){this.from=e,this.to=s,this.value=i}static create(e,s,i){return new j0(e,s,i)}};function Ed(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class Wc{constructor(e,s,i,n){this.from=e,this.to=s,this.value=i,this.maxPoint=n}get length(){return this.to[this.to.length-1]}findIndex(e,s,i,n=0){let o=i?this.to:this.from;for(let r=n,l=o.length;;){if(r==l)return r;let a=r+l>>1,d=o[a]-e||(i?this.value[a].endSide:this.value[a].startSide)-s;if(a==r)return d>=0?r:l;d>=0?l=a:r=a+1}}between(e,s,i,n){for(let o=this.findIndex(s,-1e9,!0),r=this.findIndex(i,1e9,!1,o);o<r;o++)if(n(this.from[o]+e,this.to[o]+e,this.value[o])===!1)return!1}map(e,s){let i=[],n=[],o=[],r=-1,l=-1;for(let a=0;a<this.value.length;a++){let d=this.value[a],u=this.from[a]+e,f=this.to[a]+e,h,g;if(u==f){let _=s.mapPos(u,d.startSide,d.mapMode);if(_==null||(h=g=_,d.startSide!=d.endSide&&(g=s.mapPos(u,d.endSide),g<h)))continue}else if(h=s.mapPos(u,d.startSide),g=s.mapPos(f,d.endSide),h>g||h==g&&d.startSide>0&&d.endSide<=0)continue;(g-h||d.endSide-d.startSide)<0||(r<0&&(r=h),d.point&&(l=Math.max(l,g-h)),i.push(d),n.push(h-r),o.push(g-r))}return{mapped:i.length?new Wc(n,o,i,l):null,pos:r}}}class tt{constructor(e,s,i,n){this.chunkPos=e,this.chunk=s,this.nextLayer=i,this.maxPoint=n}static create(e,s,i,n){return new tt(e,s,i,n)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let s of this.chunk)e+=s.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:s=[],sort:i=!1,filterFrom:n=0,filterTo:o=this.length}=e,r=e.filter;if(s.length==0&&!r)return this;if(i&&(s=s.slice().sort(Ed)),this.isEmpty)return s.length?tt.of(s):this;let l=new L0(this,null,-1).goto(0),a=0,d=[],u=new Bi;for(;l.value||a<s.length;)if(a<s.length&&(l.from-s[a].from||l.startSide-s[a].value.startSide)>=0){let f=s[a++];u.addInner(f.from,f.to,f.value)||d.push(f)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(a==s.length||this.chunkEnd(l.chunkIndex)<s[a].from)&&(!r||n>this.chunkEnd(l.chunkIndex)||o<this.chunkPos[l.chunkIndex])&&u.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!r||n>l.to||o<l.from||r(l.from,l.to,l.value))&&(u.addInner(l.from,l.to,l.value)||d.push($d.create(l.from,l.to,l.value))),l.next());return u.finishInner(this.nextLayer.isEmpty&&!d.length?tt.empty:this.nextLayer.update({add:d,filter:r,filterFrom:n,filterTo:o}))}map(e){if(e.empty||this.isEmpty)return this;let s=[],i=[],n=-1;for(let r=0;r<this.chunk.length;r++){let l=this.chunkPos[r],a=this.chunk[r],d=e.touchesRange(l,l+a.length);if(d===!1)n=Math.max(n,a.maxPoint),s.push(a),i.push(e.mapPos(l));else if(d===!0){let{mapped:u,pos:f}=a.map(l,e);u&&(n=Math.max(n,u.maxPoint),s.push(u),i.push(f))}}let o=this.nextLayer.map(e);return s.length==0?o:new tt(i,s,o||tt.empty,n)}between(e,s,i){if(!this.isEmpty){for(let n=0;n<this.chunk.length;n++){let o=this.chunkPos[n],r=this.chunk[n];if(s>=o&&e<=o+r.length&&r.between(o,e-o,s-o,i)===!1)return}this.nextLayer.between(e,s,i)}}iter(e=0){return Dr.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,s=0){return Dr.from(e).goto(s)}static compare(e,s,i,n,o=-1){let r=e.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=o),l=s.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=o),a=sp(r,l,i),d=new Ko(r,a,o),u=new Ko(l,a,o);i.iterGaps((f,h,g)=>ip(d,f,u,h,g,n)),i.empty&&i.length==0&&ip(d,0,u,0,0,n)}static eq(e,s,i=0,n){n==null&&(n=999999999);let o=e.filter(u=>!u.isEmpty&&s.indexOf(u)<0),r=s.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(o.length!=r.length)return!1;if(!o.length)return!0;let l=sp(o,r),a=new Ko(o,l,0).goto(i),d=new Ko(r,l,0).goto(i);for(;;){if(a.to!=d.to||!Od(a.active,d.active)||a.point&&(!d.point||!a.point.eq(d.point)))return!1;if(a.to>n)return!0;a.next(),d.next()}}static spans(e,s,i,n,o=-1){let r=new Ko(e,null,o).goto(s),l=s,a=r.openStart;for(;;){let d=Math.min(r.to,i);if(r.point){let u=r.activeForPoint(r.to),f=r.pointFrom<s?u.length+1:r.point.startSide<0?u.length:Math.min(u.length,a);n.point(l,d,r.point,u,f,r.pointRank),a=Math.min(r.openEnd(d),u.length)}else d>l&&(n.span(l,d,r.active,a),a=r.openEnd(d));if(r.to>i)return a+(r.point&&r.to>i?1:0);l=r.to,r.next()}}static of(e,s=!1){let i=new Bi;for(let n of e instanceof $d?[e]:s?wS(e):e)i.add(n.from,n.to,n.value);return i.finish()}static join(e){if(!e.length)return tt.empty;let s=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let n=e[i];n!=tt.empty;n=n.nextLayer)s=new tt(n.chunkPos,n.chunk,s,Math.max(n.maxPoint,s.maxPoint));return s}}tt.empty=new tt([],[],null,-1);function wS(t){if(t.length>1)for(let e=t[0],s=1;s<t.length;s++){let i=t[s];if(Ed(e,i)>0)return t.slice().sort(Ed);e=i}return t}tt.empty.nextLayer=tt.empty;class Bi{finishChunk(e){this.chunks.push(new Wc(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,s,i){this.addInner(e,s,i)||(this.nextLayer||(this.nextLayer=new Bi)).add(e,s,i)}addInner(e,s,i){let n=e-this.lastTo||i.startSide-this.last.endSide;if(n<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return n<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(s-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=s,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,s-e)),!0)}addChunk(e,s){if((e-this.lastTo||s.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,s.maxPoint),this.chunks.push(s),this.chunkPos.push(e);let i=s.value.length-1;return this.last=s.value[i],this.lastFrom=s.from[i]+e,this.lastTo=s.to[i]+e,!0}finish(){return this.finishInner(tt.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let s=tt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,s}}function sp(t,e,s){let i=new Map;for(let o of t)for(let r=0;r<o.chunk.length;r++)o.chunk[r].maxPoint<=0&&i.set(o.chunk[r],o.chunkPos[r]);let n=new Set;for(let o of e)for(let r=0;r<o.chunk.length;r++){let l=i.get(o.chunk[r]);l!=null&&(s?s.mapPos(l):l)==o.chunkPos[r]&&!s?.touchesRange(l,l+o.chunk[r].length)&&n.add(o.chunk[r])}return n}class L0{constructor(e,s,i,n=0){this.layer=e,this.skip=s,this.minPoint=i,this.rank=n}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,s=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,s,!1),this}gotoInner(e,s,i){for(;this.chunkIndex<this.layer.chunk.length;){let n=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(n)||this.layer.chunkEnd(this.chunkIndex)<e||n.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let n=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],s,!0);(!i||this.rangeIndex<n)&&this.setRangeIndex(n)}this.next()}forward(e,s){(this.to-e||this.endSide-s)<0&&this.gotoInner(e,s,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],s=this.layer.chunk[this.chunkIndex],i=e+s.from[this.rangeIndex];if(this.from=i,this.to=e+s.to[this.rangeIndex],this.value=s.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Dr{constructor(e){this.heap=e}static from(e,s=null,i=-1){let n=[];for(let o=0;o<e.length;o++)for(let r=e[o];!r.isEmpty;r=r.nextLayer)r.maxPoint>=i&&n.push(new L0(r,s,i,o));return n.length==1?n[0]:new Dr(n)}get startSide(){return this.value?this.value.startSide:0}goto(e,s=-1e9){for(let i of this.heap)i.goto(e,s);for(let i=this.heap.length>>1;i>=0;i--)Tu(this.heap,i);return this.next(),this}forward(e,s){for(let i of this.heap)i.forward(e,s);for(let i=this.heap.length>>1;i>=0;i--)Tu(this.heap,i);(this.to-e||this.value.endSide-s)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Tu(this.heap,0)}}}function Tu(t,e){for(let s=t[e];;){let i=(e<<1)+1;if(i>=t.length)break;let n=t[i];if(i+1<t.length&&n.compare(t[i+1])>=0&&(n=t[i+1],i++),s.compare(n)<0)break;t[i]=s,t[e]=n,e=i}}class Ko{constructor(e,s,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Dr.from(e,s,i)}goto(e,s=-1e9){return this.cursor.goto(e,s),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=s,this.openStart=-1,this.next(),this}forward(e,s){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-s)<0;)this.removeActive(this.minActive);this.cursor.forward(e,s)}removeActive(e){bl(this.active,e),bl(this.activeTo,e),bl(this.activeRank,e),this.minActive=np(this.active,this.activeTo)}addActive(e){let s=0,{value:i,to:n,rank:o}=this.cursor;for(;s<this.activeRank.length&&(o-this.activeRank[s]||n-this.activeTo[s])>0;)s++;kl(this.active,s,i),kl(this.activeTo,s,n),kl(this.activeRank,s,o),e&&kl(e,s,this.cursor.from),this.minActive=np(this.active,this.activeTo)}next(){let e=this.to,s=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let n=this.minActive;if(n>-1&&(this.activeTo[n]-this.cursor.from||this.active[n].endSide-this.cursor.startSide)<0){if(this.activeTo[n]>e){this.to=this.activeTo[n],this.endSide=this.active[n].endSide;break}this.removeActive(n),i&&bl(i,n)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let o=this.cursor.value;if(!o.point)this.addActive(i),this.cursor.next();else if(s&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=o,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=o.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let n=i.length-1;n>=0&&i[n]<e;n--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let s=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&s.push(this.active[i]);return s.reverse()}openEnd(e){let s=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)s++;return s}}function ip(t,e,s,i,n,o){t.goto(e),s.goto(i);let r=i+n,l=i,a=i-e;for(;;){let d=t.to+a-s.to,u=d||t.endSide-s.endSide,f=u<0?t.to+a:s.to,h=Math.min(f,r);if(t.point||s.point?t.point&&s.point&&(t.point==s.point||t.point.eq(s.point))&&Od(t.activeForPoint(t.to),s.activeForPoint(s.to))||o.comparePoint(l,h,t.point,s.point):h>l&&!Od(t.active,s.active)&&o.compareRange(l,h,t.active,s.active),f>r)break;(d||t.openEnd!=s.openEnd)&&o.boundChange&&o.boundChange(f),l=f,u<=0&&t.next(),u>=0&&s.next()}}function Od(t,e){if(t.length!=e.length)return!1;for(let s=0;s<t.length;s++)if(t[s]!=e[s]&&!t[s].eq(e[s]))return!1;return!0}function bl(t,e){for(let s=e,i=t.length-1;s<i;s++)t[s]=t[s+1];t.pop()}function kl(t,e,s){for(let i=t.length-1;i>=e;i--)t[i+1]=t[i];t[e]=s}function np(t,e){let s=-1,i=1e9;for(let n=0;n<e.length;n++)(e[n]-i||t[n].endSide-t[s].endSide)<0&&(s=n,i=e[n]);return s}function Oo(t,e,s=t.length){let i=0;for(let n=0;n<s&&n<t.length;)t.charCodeAt(n)==9?(i+=e-i%e,n++):(i++,n=Gt(t,n));return i}function Pd(t,e,s,i){for(let n=0,o=0;;){if(o>=e)return n;if(n==t.length)break;o+=t.charCodeAt(n)==9?s-o%s:1,n=Gt(t,n)}return i===!0?-1:t.length}const jd="",op=typeof Symbol>"u"?"__"+jd:Symbol.for(jd),Ld=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),rp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class un{constructor(e,s){this.rules=[];let{finish:i}=s||{};function n(r){return/^@/.test(r)?[r]:r.split(/,\s*/)}function o(r,l,a,d){let u=[],f=/^@(\w+)\b/.exec(r[0]),h=f&&f[1]=="keyframes";if(f&&l==null)return a.push(r[0]+";");for(let g in l){let _=l[g];if(/&/.test(g))o(g.split(/,\s*/).map(p=>r.map(V=>p.replace(/&/,V))).reduce((p,V)=>p.concat(V)),_,a);else if(_&&typeof _=="object"){if(!f)throw new RangeError("The value of a property ("+g+") should be a primitive value.");o(n(g),_,u,h)}else _!=null&&u.push(g.replace(/_.*/,"").replace(/[A-Z]/g,p=>"-"+p.toLowerCase())+": "+_+";")}(u.length||h)&&a.push((i&&!f&&!d?r.map(i):r).join(", ")+" {"+u.join(" ")+"}")}for(let r in e)o(n(r),e[r],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=rp[op]||1;return rp[op]=e+1,jd+e.toString(36)}static mount(e,s,i){let n=e[Ld],o=i&&i.nonce;n?o&&n.setNonce(o):n=new _S(e,o),n.mount(Array.isArray(s)?s:[s],e)}}let lp=new Map;class _S{constructor(e,s){let i=e.ownerDocument||e,n=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&n.CSSStyleSheet){let o=lp.get(i);if(o)return e[Ld]=o;this.sheet=new n.CSSStyleSheet,lp.set(i,this)}else this.styleTag=i.createElement("style"),s&&this.styleTag.setAttribute("nonce",s);this.modules=[],e[Ld]=this}mount(e,s){let i=this.sheet,n=0,o=0;for(let r=0;r<e.length;r++){let l=e[r],a=this.modules.indexOf(l);if(a<o&&a>-1&&(this.modules.splice(a,1),o--,a=-1),a==-1){if(this.modules.splice(o++,0,l),i)for(let d=0;d<l.rules.length;d++)i.insertRule(l.rules[d],n++)}else{for(;o<a;)n+=this.modules[o++].rules.length;n+=l.rules.length,o++}}if(i)s.adoptedStyleSheets.indexOf(this.sheet)<0&&(s.adoptedStyleSheets=[this.sheet,...s.adoptedStyleSheets]);else{let r="";for(let a=0;a<this.modules.length;a++)r+=this.modules[a].getRules()+`
`;this.styleTag.textContent=r;let l=s.head||s;this.styleTag.parentNode!=l&&l.insertBefore(this.styleTag,l.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var dn={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Tr={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},SS=typeof navigator<"u"&&/Mac/.test(navigator.platform),CS=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Wt=0;Wt<10;Wt++)dn[48+Wt]=dn[96+Wt]=String(Wt);for(var Wt=1;Wt<=24;Wt++)dn[Wt+111]="F"+Wt;for(var Wt=65;Wt<=90;Wt++)dn[Wt]=String.fromCharCode(Wt+32),Tr[Wt]=String.fromCharCode(Wt);for(var $u in dn)Tr.hasOwnProperty($u)||(Tr[$u]=dn[$u]);function AS(t){var e=SS&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||CS&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",s=!e&&t.key||(t.shiftKey?Tr:dn)[t.keyCode]||t.key||"Unidentified";return s=="Esc"&&(s="Escape"),s=="Del"&&(s="Delete"),s=="Left"&&(s="ArrowLeft"),s=="Up"&&(s="ArrowUp"),s=="Right"&&(s="ArrowRight"),s=="Down"&&(s="ArrowDown"),s}function ft(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,s=arguments[1];if(s&&typeof s=="object"&&s.nodeType==null&&!Array.isArray(s)){for(var i in s)if(Object.prototype.hasOwnProperty.call(s,i)){var n=s[i];typeof n=="string"?t.setAttribute(i,n):n!=null&&(t[i]=n)}e++}for(;e<arguments.length;e++)R0(t,arguments[e]);return t}function R0(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var s=0;s<e.length;s++)R0(t,e[s]);else throw new RangeError("Unsupported child node: "+e)}let fs=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Rd=typeof document<"u"?document:{documentElement:{style:{}}};const Bd=/Edge\/(\d+)/.exec(fs.userAgent),B0=/MSIE \d/.test(fs.userAgent),Id=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(fs.userAgent),eu=!!(B0||Id||Bd),ap=!eu&&/gecko\/(\d+)/i.test(fs.userAgent),Eu=!eu&&/Chrome\/(\d+)/.exec(fs.userAgent),VS="webkitFontSmoothing"in Rd.documentElement.style,Ud=!eu&&/Apple Computer/.test(fs.vendor),up=Ud&&(/Mobile\/\w+/.test(fs.userAgent)||fs.maxTouchPoints>2);var De={mac:up||/Mac/.test(fs.platform),windows:/Win/.test(fs.platform),linux:/Linux|X11/.test(fs.platform),ie:eu,ie_version:B0?Rd.documentMode||6:Id?+Id[1]:Bd?+Bd[1]:0,gecko:ap,gecko_version:ap?+(/Firefox\/(\d+)/.exec(fs.userAgent)||[0,0])[1]:0,chrome:!!Eu,chrome_version:Eu?+Eu[1]:0,ios:up,android:/Android\b/.test(fs.userAgent),webkit_version:VS?+(/\bAppleWebKit\/(\d+)/.exec(fs.userAgent)||[0,0])[1]:0,safari:Ud,safari_version:Ud?+(/\bVersion\/(\d+(\.\d+)?)/.exec(fs.userAgent)||[0,0])[1]:0,tabSize:Rd.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function $r(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function Nd(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function Jl(t,e){if(!e.anchorNode)return!1;try{return Nd(t,e.anchorNode)}catch{return!1}}function Er(t){return t.nodeType==3?In(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function hr(t,e,s,i){return s?dp(t,e,s,i,-1)||dp(t,e,s,i,1):!1}function Bn(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function va(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function dp(t,e,s,i,n){for(;;){if(t==s&&e==i)return!0;if(e==(n<0?0:_i(t))){if(t.nodeName=="DIV")return!1;let o=t.parentNode;if(!o||o.nodeType!=1)return!1;e=Bn(t)+(n<0?0:1),t=o}else if(t.nodeType==1){if(t=t.childNodes[e+(n<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=n<0?_i(t):0}else return!1}}function _i(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function tu(t,e){let s=e?t.left:t.right;return{left:s,right:s,top:t.top,bottom:t.bottom}}function MS(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function I0(t,e){let s=e.width/t.offsetWidth,i=e.height/t.offsetHeight;return(s>.995&&s<1.005||!isFinite(s)||Math.abs(e.width-t.offsetWidth)<1)&&(s=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-t.offsetHeight)<1)&&(i=1),{scaleX:s,scaleY:i}}function DS(t,e,s,i,n,o,r,l){let a=t.ownerDocument,d=a.defaultView||window;for(let u=t,f=!1;u&&!f;)if(u.nodeType==1){let h,g=u==a.body,_=1,p=1;if(g)h=MS(d);else{if(/^(fixed|sticky)$/.test(getComputedStyle(u).position)&&(f=!0),u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let N=u.getBoundingClientRect();({scaleX:_,scaleY:p}=I0(u,N)),h={left:N.left,right:N.left+u.clientWidth*_,top:N.top,bottom:N.top+u.clientHeight*p}}let V=0,M=0;if(n=="nearest")e.top<h.top?(M=e.top-(h.top+r),s>0&&e.bottom>h.bottom+M&&(M=e.bottom-h.bottom+r)):e.bottom>h.bottom&&(M=e.bottom-h.bottom+r,s<0&&e.top-M<h.top&&(M=e.top-(h.top+r)));else{let N=e.bottom-e.top,B=h.bottom-h.top;M=(n=="center"&&N<=B?e.top+N/2-B/2:n=="start"||n=="center"&&s<0?e.top-r:e.bottom-B+r)-h.top}if(i=="nearest"?e.left<h.left?(V=e.left-(h.left+o),s>0&&e.right>h.right+V&&(V=e.right-h.right+o)):e.right>h.right&&(V=e.right-h.right+o,s<0&&e.left<h.left+V&&(V=e.left-(h.left+o))):V=(i=="center"?e.left+(e.right-e.left)/2-(h.right-h.left)/2:i=="start"==l?e.left-o:e.right-(h.right-h.left)+o)-h.left,V||M)if(g)d.scrollBy(V,M);else{let N=0,B=0;if(M){let W=u.scrollTop;u.scrollTop+=M/p,B=(u.scrollTop-W)*p}if(V){let W=u.scrollLeft;u.scrollLeft+=V/_,N=(u.scrollLeft-W)*_}e={left:e.left-N,top:e.top-B,right:e.right-N,bottom:e.bottom-B},N&&Math.abs(N-V)<1&&(i="nearest"),B&&Math.abs(B-M)<1&&(n="nearest")}if(g)break;(e.top<h.top||e.bottom>h.bottom||e.left<h.left||e.right>h.right)&&(e={left:Math.max(e.left,h.left),right:Math.min(e.right,h.right),top:Math.max(e.top,h.top),bottom:Math.min(e.bottom,h.bottom)}),u=u.assignedSlot||u.parentNode}else if(u.nodeType==11)u=u.host;else break}function TS(t){let e=t.ownerDocument,s,i;for(let n=t.parentNode;n&&!(n==e.body||s&&i);)if(n.nodeType==1)!i&&n.scrollHeight>n.clientHeight&&(i=n),!s&&n.scrollWidth>n.clientWidth&&(s=n),n=n.assignedSlot||n.parentNode;else if(n.nodeType==11)n=n.host;else break;return{x:s,y:i}}class $S{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:s,focusNode:i}=e;this.set(s,Math.min(e.anchorOffset,s?_i(s):0),i,Math.min(e.focusOffset,i?_i(i):0))}set(e,s,i,n){this.anchorNode=e,this.anchorOffset=s,this.focusNode=i,this.focusOffset=n}}let Cn=null;De.safari&&De.safari_version>=26&&(Cn=!1);function U0(t){if(t.setActive)return t.setActive();if(Cn)return t.focus(Cn);let e=[];for(let s=t;s&&(e.push(s,s.scrollTop,s.scrollLeft),s!=s.ownerDocument);s=s.parentNode);if(t.focus(Cn==null?{get preventScroll(){return Cn={preventScroll:!0},!0}}:void 0),!Cn){Cn=!1;for(let s=0;s<e.length;){let i=e[s++],n=e[s++],o=e[s++];i.scrollTop!=n&&(i.scrollTop=n),i.scrollLeft!=o&&(i.scrollLeft=o)}}}let cp;function In(t,e,s=e){let i=cp||(cp=document.createRange());return i.setEnd(t,s),i.setStart(t,e),i}function ho(t,e,s,i){let n={key:e,code:e,keyCode:s,which:s,cancelable:!0};i&&({altKey:n.altKey,ctrlKey:n.ctrlKey,shiftKey:n.shiftKey,metaKey:n.metaKey}=i);let o=new KeyboardEvent("keydown",n);o.synthetic=!0,t.dispatchEvent(o);let r=new KeyboardEvent("keyup",n);return r.synthetic=!0,t.dispatchEvent(r),o.defaultPrevented||r.defaultPrevented}function ES(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function N0(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function OS(t,e){let s=e.focusNode,i=e.focusOffset;if(!s||e.anchorNode!=s||e.anchorOffset!=i)return!1;for(i=Math.min(i,_i(s));;)if(i){if(s.nodeType!=1)return!1;let n=s.childNodes[i-1];n.contentEditable=="false"?i--:(s=n,i=_i(s))}else{if(s==t)return!0;i=Bn(s),s=s.parentNode}}function z0(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function F0(t,e){for(let s=t,i=e;;){if(s.nodeType==3&&i>0)return{node:s,offset:i};if(s.nodeType==1&&i>0){if(s.contentEditable=="false")return null;s=s.childNodes[i-1],i=_i(s)}else if(s.parentNode&&!va(s))i=Bn(s),s=s.parentNode;else return null}}function H0(t,e){for(let s=t,i=e;;){if(s.nodeType==3&&i<s.nodeValue.length)return{node:s,offset:i};if(s.nodeType==1&&i<s.childNodes.length){if(s.contentEditable=="false")return null;s=s.childNodes[i],i=0}else if(s.parentNode&&!va(s))i=Bn(s)+1,s=s.parentNode;else return null}}class is{constructor(e,s,i=!0){this.node=e,this.offset=s,this.precise=i}static before(e,s){return new is(e.parentNode,Bn(e),s)}static after(e,s){return new is(e.parentNode,Bn(e)+1,s)}}const qc=[];class ut{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let s=this.posAtStart;for(let i of this.children){if(i==e)return s;s+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,s){if(this.flags&2){let i=this.dom,n=null,o;for(let r of this.children){if(r.flags&7){if(!r.dom&&(o=n?n.nextSibling:i.firstChild)){let l=ut.get(o);(!l||!l.parent&&l.canReuseDOM(r))&&r.reuseDOM(o)}r.sync(e,s),r.flags&=-8}if(o=n?n.nextSibling:i.firstChild,s&&!s.written&&s.node==i&&o!=r.dom&&(s.written=!0),r.dom.parentNode==i)for(;o&&o!=r.dom;)o=fp(o);else i.insertBefore(r.dom,o);n=r.dom}for(o=n?n.nextSibling:i.firstChild,o&&s&&s.node==i&&(s.written=!0);o;)o=fp(o)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,s),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,s){let i;if(e==this.dom)i=this.dom.childNodes[s];else{let n=_i(e)==0?0:s==0?-1:1;for(;;){let o=e.parentNode;if(o==this.dom)break;n==0&&o.firstChild!=o.lastChild&&(e==o.firstChild?n=-1:n=1),e=o}n<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!ut.get(i);)i=i.nextSibling;if(!i)return this.length;for(let n=0,o=0;;n++){let r=this.children[n];if(r.dom==i)return o;o+=r.length+r.breakAfter}}domBoundsAround(e,s,i=0){let n=-1,o=-1,r=-1,l=-1;for(let a=0,d=i,u=i;a<this.children.length;a++){let f=this.children[a],h=d+f.length;if(d<e&&h>s)return f.domBoundsAround(e,s,d);if(h>=e&&n==-1&&(n=a,o=d),d>s&&f.dom.parentNode==this.dom){r=a,l=u;break}u=h,d=h+f.breakAfter}return{from:o,to:l<0?i+this.length:l,startDOM:(n?this.children[n-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:r<this.children.length&&r>=0?this.children[r].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let s=this.parent;s;s=s.parent){if(e&&(s.flags|=2),s.flags&1)return;s.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let s=e.parent;if(!s)return e;e=s}}replaceChildren(e,s,i=qc){this.markDirty();for(let n=e;n<s;n++){let o=this.children[n];o.parent==this&&i.indexOf(o)<0&&o.destroy()}i.length<250?this.children.splice(e,s-e,...i):this.children=[].concat(this.children.slice(0,e),i,this.children.slice(s));for(let n=0;n<i.length;n++)i[n].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new W0(this.children,e,this.children.length)}childPos(e,s=1){return this.childCursor().findPos(e,s)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,s,i,n,o,r){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}ut.prototype.breakAfter=0;function fp(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class W0{constructor(e,s,i){this.children=e,this.pos=s,this.i=i,this.off=0}findPos(e,s=1){for(;;){if(e>this.pos||e==this.pos&&(s>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function q0(t,e,s,i,n,o,r,l,a){let{children:d}=t,u=d.length?d[e]:null,f=o.length?o[o.length-1]:null,h=f?f.breakAfter:r;if(!(e==i&&u&&!r&&!h&&o.length<2&&u.merge(s,n,o.length?f:null,s==0,l,a))){if(i<d.length){let g=d[i];g&&(n<g.length||g.breakAfter&&f?.breakAfter)?(e==i&&(g=g.split(n),n=0),!h&&f&&g.merge(0,n,f,!0,0,a)?o[o.length-1]=g:((n||g.children.length&&!g.children[0].length)&&g.merge(0,n,null,!1,0,a),o.push(g))):g?.breakAfter&&(f?f.breakAfter=1:r=1),i++}for(u&&(u.breakAfter=r,s>0&&(!r&&o.length&&u.merge(s,u.length,o[0],!1,l,0)?u.breakAfter=o.shift().breakAfter:(s<u.length||u.children.length&&u.children[u.children.length-1].length==0)&&u.merge(s,u.length,null,!1,l,0),e++));e<i&&o.length;)if(d[i-1].become(o[o.length-1]))i--,o.pop(),a=o.length?0:l;else if(d[e].become(o[0]))e++,o.shift(),l=o.length?0:a;else break;!o.length&&e&&i<d.length&&!d[e-1].breakAfter&&d[i].merge(0,0,d[e-1],!1,l,a)&&e--,(e<i||o.length)&&t.replaceChildren(e,i,o)}}function K0(t,e,s,i,n,o){let r=t.childCursor(),{i:l,off:a}=r.findPos(s,1),{i:d,off:u}=r.findPos(e,-1),f=e-s;for(let h of i)f+=h.length;t.length+=f,q0(t,d,u,l,a,i,0,n,o)}const PS=256;class ii extends ut{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,s){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(s&&s.node==this.dom&&(s.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,s,i){return this.flags&8||i&&(!(i instanceof ii)||this.length-(s-e)+i.length>PS||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(s),this.markDirty(),!0)}split(e){let s=new ii(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),s.flags|=this.flags&8,s}localPosFromDOM(e,s){return e==this.dom?s:s?this.text.length:0}domAtPos(e){return new is(this.dom,e)}domBoundsAround(e,s,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,s){return jS(this.dom,e,s)}}class Ii extends ut{constructor(e,s=[],i=0){super(),this.mark=e,this.children=s,this.length=i;for(let n of s)n.setParent(this)}setAttrs(e){if(N0(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let s in this.mark.attrs)e.setAttribute(s,this.mark.attrs[s]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,s){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,s)}merge(e,s,i,n,o,r){return i&&(!(i instanceof Ii&&i.mark.eq(this.mark))||e&&o<=0||s<this.length&&r<=0)?!1:(K0(this,e,s,i?i.children.slice():[],o-1,r-1),this.markDirty(),!0)}split(e){let s=[],i=0,n=-1,o=0;for(let l of this.children){let a=i+l.length;a>e&&s.push(i<e?l.split(e-i):l),n<0&&i>=e&&(n=o),i=a,o++}let r=this.length-e;return this.length=e,n>-1&&(this.children.length=n,this.markDirty()),new Ii(this.mark,s,r)}domAtPos(e){return G0(this,e)}coordsAt(e,s){return Y0(this,e,s)}}function jS(t,e,s){let i=t.nodeValue.length;e>i&&(e=i);let n=e,o=e,r=0;e==0&&s<0||e==i&&s>=0?De.chrome||De.gecko||(e?(n--,r=1):o<i&&(o++,r=-1)):s<0?n--:o<i&&o++;let l=In(t,n,o).getClientRects();if(!l.length)return null;let a=l[(r?r<0:s>=0)?0:l.length-1];return De.safari&&!r&&a.width==0&&(a=Array.prototype.find.call(l,d=>d.width)||a),r?tu(a,r<0):a||null}class Zi extends ut{static create(e,s,i){return new Zi(e,s,i)}constructor(e,s,i){super(),this.widget=e,this.length=s,this.side=i,this.prevWidget=null}split(e){let s=Zi.create(this.widget,this.length-e,this.side);return this.length-=e,s}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,s,i,n,o,r){return i&&(!(i instanceof Zi)||!this.widget.compare(i.widget)||e>0&&o<=0||s<this.length&&r<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-s),!0)}become(e){return e instanceof Zi&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return st.empty;let e=this;for(;e.parent;)e=e.parent;let{view:s}=e,i=s&&s.state.doc,n=this.posAtStart;return i?i.slice(n,n+this.length):st.empty}domAtPos(e){return(this.length?e==0:this.side>0)?is.before(this.dom):is.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,s){let i=this.widget.coordsAt(this.dom,e,s);if(i)return i;let n=this.dom.getClientRects(),o=null;if(!n.length)return null;let r=this.side?this.side<0:e>0;for(let l=r?n.length-1:0;o=n[l],!(e>0?l==0:l==n.length-1||o.top<o.bottom);l+=r?-1:1);return tu(o,!r)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class wo extends ut{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof wo&&e.side==this.side}split(){return new wo(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?is.before(this.dom):is.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return st.empty}get isHidden(){return!0}}ii.prototype.children=Zi.prototype.children=wo.prototype.children=qc;function G0(t,e){let s=t.dom,{children:i}=t,n=0;for(let o=0;n<i.length;n++){let r=i[n],l=o+r.length;if(!(l==o&&r.getSide()<=0)){if(e>o&&e<l&&r.dom.parentNode==s)return r.domAtPos(e-o);if(e<=o)break;o=l}}for(let o=n;o>0;o--){let r=i[o-1];if(r.dom.parentNode==s)return r.domAtPos(r.length)}for(let o=n;o<i.length;o++){let r=i[o];if(r.dom.parentNode==s)return r.domAtPos(0)}return new is(s,0)}function J0(t,e,s){let i,{children:n}=t;s>0&&e instanceof Ii&&n.length&&(i=n[n.length-1])instanceof Ii&&i.mark.eq(e.mark)?J0(i,e.children[0],s-1):(n.push(e),e.setParent(t)),t.length+=e.length}function Y0(t,e,s){let i=null,n=-1,o=null,r=-1;function l(d,u){for(let f=0,h=0;f<d.children.length&&h<=u;f++){let g=d.children[f],_=h+g.length;_>=u&&(g.children.length?l(g,u-h):(!o||o.isHidden&&(s>0||RS(o,g)))&&(_>u||h==_&&g.getSide()>0)?(o=g,r=u-h):(h<u||h==_&&g.getSide()<0&&!g.isHidden)&&(i=g,n=u-h)),h=_}}l(t,e);let a=(s<0?i:o)||i||o;return a?a.coordsAt(Math.max(0,a==i?n:r),s):LS(t)}function LS(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let s=Er(e);return s[s.length-1]||null}function RS(t,e){let s=t.coordsAt(0,1),i=e.coordsAt(0,1);return s&&i&&i.top<s.bottom}function zd(t,e){for(let s in t)s=="class"&&e.class?e.class+=" "+t.class:s=="style"&&e.style?e.style+=";"+t.style:e[s]=t[s];return e}const hp=Object.create(null);function ya(t,e,s){if(t==e)return!0;t||(t=hp),e||(e=hp);let i=Object.keys(t),n=Object.keys(e);if(i.length-(s&&i.indexOf(s)>-1?1:0)!=n.length-(s&&n.indexOf(s)>-1?1:0))return!1;for(let o of i)if(o!=s&&(n.indexOf(o)==-1||t[o]!==e[o]))return!1;return!0}function Fd(t,e,s){let i=!1;if(e)for(let n in e)s&&n in s||(i=!0,n=="style"?t.style.cssText="":t.removeAttribute(n));if(s)for(let n in s)e&&e[n]==s[n]||(i=!0,n=="style"?t.style.cssText=s[n]:t.setAttribute(n,s[n]));return i}function BS(t){let e=Object.create(null);for(let s=0;s<t.attributes.length;s++){let i=t.attributes[s];e[i.name]=i.value}return e}class pn{eq(e){return!1}updateDOM(e,s){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,s,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var ms=(function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t})(ms||(ms={}));class Ne extends Rn{constructor(e,s,i,n){super(),this.startSide=e,this.endSide=s,this.widget=i,this.spec=n}get heightRelevant(){return!1}static mark(e){return new Jr(e)}static widget(e){let s=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return s+=i&&!e.inlineOrder?s>0?3e8:-4e8:s>0?1e8:-1e8,new cn(e,s,s,i,e.widget||null,!1)}static replace(e){let s=!!e.block,i,n;if(e.isBlockGap)i=-5e8,n=4e8;else{let{start:o,end:r}=Q0(e,s);i=(o?s?-3e8:-1:5e8)-1,n=(r?s?2e8:1:-6e8)+1}return new cn(e,i,n,s,e.widget||null,!0)}static line(e){return new Yr(e)}static set(e,s=!1){return tt.of(e,s)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Ne.none=tt.empty;class Jr extends Ne{constructor(e){let{start:s,end:i}=Q0(e);super(s?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var s,i;return this==e||e instanceof Jr&&this.tagName==e.tagName&&(this.class||((s=this.attrs)===null||s===void 0?void 0:s.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&ya(this.attrs,e.attrs,"class")}range(e,s=e){if(e>=s)throw new RangeError("Mark decorations may not be empty");return super.range(e,s)}}Jr.prototype.point=!1;class Yr extends Ne{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Yr&&this.spec.class==e.spec.class&&ya(this.spec.attributes,e.spec.attributes)}range(e,s=e){if(s!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,s)}}Yr.prototype.mapMode=ps.TrackBefore;Yr.prototype.point=!0;class cn extends Ne{constructor(e,s,i,n,o,r){super(s,i,o,e),this.block=n,this.isReplace=r,this.mapMode=n?s<=0?ps.TrackBefore:ps.TrackAfter:ps.TrackDel}get type(){return this.startSide!=this.endSide?ms.WidgetRange:this.startSide<=0?ms.WidgetBefore:ms.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof cn&&IS(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,s=e){if(this.isReplace&&(e>s||e==s&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&s!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,s)}}cn.prototype.point=!0;function Q0(t,e=!1){let{inclusiveStart:s,inclusiveEnd:i}=t;return s==null&&(s=t.inclusive),i==null&&(i=t.inclusive),{start:s??e,end:i??e}}function IS(t,e){return t==e||!!(t&&e&&t.compare(e))}function Yl(t,e,s,i=0){let n=s.length-1;n>=0&&s[n]+i>=t?s[n]=Math.max(s[n],e):s.push(t,e)}class Pt extends ut{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,s,i,n,o,r){if(i){if(!(i instanceof Pt))return!1;this.dom||i.transferDOM(this)}return n&&this.setDeco(i?i.attrs:null),K0(this,e,s,i?i.children.slice():[],o,r),!0}split(e){let s=new Pt;if(s.breakAfter=this.breakAfter,this.length==0)return s;let{i,off:n}=this.childPos(e);n&&(s.append(this.children[i].split(n),0),this.children[i].merge(n,this.children[i].length,null,!1,0,0),i++);for(let o=i;o<this.children.length;o++)s.append(this.children[o],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,s}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){ya(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,s){J0(this,e,s)}addLineDeco(e){let s=e.spec.attributes,i=e.spec.class;s&&(this.attrs=zd(s,this.attrs||{})),i&&(this.attrs=zd({class:i},this.attrs||{}))}domAtPos(e){return G0(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,s){var i;this.dom?this.flags&4&&(N0(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(Fd(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,s);let n=this.dom.lastChild;for(;n&&ut.get(n)instanceof Ii;)n=n.lastChild;if(!n||!this.length||n.nodeName!="BR"&&((i=ut.get(n))===null||i===void 0?void 0:i.isEditable)==!1&&(!De.ios||!this.children.some(o=>o instanceof ii))){let o=document.createElement("BR");o.cmIgnore=!0,this.dom.appendChild(o)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,s;for(let i of this.children){if(!(i instanceof ii)||/[^ -~]/.test(i.text))return null;let n=Er(i.dom);if(n.length!=1)return null;e+=n[0].width,s=n[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:s}:null}coordsAt(e,s){let i=Y0(this,e,s);if(!this.children.length&&i&&this.parent){let{heightOracle:n}=this.parent.view.viewState,o=i.bottom-i.top;if(Math.abs(o-n.lineHeight)<2&&n.textHeight<o){let r=(o-n.textHeight)/2;return{top:i.top+r,bottom:i.bottom-r,left:i.left,right:i.left}}}return i}become(e){return e instanceof Pt&&this.children.length==0&&e.children.length==0&&ya(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,s){for(let i=0,n=0;i<e.children.length;i++){let o=e.children[i],r=n+o.length;if(r>=s){if(o instanceof Pt)return o;if(r>s)break}n=r+o.breakAfter}return null}}class ji extends ut{constructor(e,s,i){super(),this.widget=e,this.length=s,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,s,i,n,o,r){return i&&(!(i instanceof ji)||!this.widget.compare(i.widget)||e>0&&o<=0||s<this.length&&r<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-s),!0)}domAtPos(e){return e==0?is.before(this.dom):is.after(this.dom,e==this.length)}split(e){let s=this.length-e;this.length=e;let i=new ji(this.widget,s,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return qc}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):st.empty}domBoundsAround(){return null}become(e){return e instanceof ji&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,s){let i=this.widget.coordsAt(this.dom,e,s);return i||(this.widget instanceof Hd?null:tu(this.dom.getBoundingClientRect(),this.length?e==0:s<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:s,endSide:i}=this.deco;return s==i?!1:e<0?s<0:i>0}}class Hd extends pn{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class pr{constructor(e,s,i,n){this.doc=e,this.pos=s,this.end=i,this.disallowBlockEffectsFor=n,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=s}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof ji&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Pt),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(xl(new wo(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof ji)&&this.getLine()}buildText(e,s,i){for(;e>0;){if(this.textOff==this.text.length){let{value:r,lineBreak:l,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(l){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=r,this.textOff=0}let n=Math.min(this.text.length-this.textOff,e),o=Math.min(n,512);this.flushBuffer(s.slice(s.length-i)),this.getLine().append(xl(new ii(this.text.slice(this.textOff,this.textOff+o)),s),i),this.atCursorPos=!0,this.textOff+=o,e-=o,i=n<=o?0:s.length}}span(e,s,i,n){this.buildText(s-e,i,n),this.pos=s,this.openStart<0&&(this.openStart=n)}point(e,s,i,n,o,r){if(this.disallowBlockEffectsFor[r]&&i instanceof cn){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(s>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=s-e;if(i instanceof cn)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new ji(i.widget||_o.block,l,i));else{let a=Zi.create(i.widget||_o.inline,l,l?0:i.startSide),d=this.atCursorPos&&!a.isEditable&&o<=n.length&&(e<s||i.startSide>0),u=!a.isEditable&&(e<s||o>n.length||i.startSide<=0),f=this.getLine();this.pendingBuffer==2&&!d&&!a.isEditable&&(this.pendingBuffer=0),this.flushBuffer(n),d&&(f.append(xl(new wo(1),n),o),o=n.length+Math.max(0,o-n.length)),f.append(xl(a,n),o),this.atCursorPos=u,this.pendingBuffer=u?e<s||o>n.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=n.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=s),this.openStart<0&&(this.openStart=o)}static build(e,s,i,n,o){let r=new pr(e,s,i,o);return r.openEnd=tt.spans(n,s,i,r),r.openStart<0&&(r.openStart=r.openEnd),r.finish(r.openEnd),r}}function xl(t,e){for(let s of e)t=new Ii(s,[t],t.length);return t}class _o extends pn{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}_o.inline=new _o("span");_o.block=new _o("div");var xt=(function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t})(xt||(xt={}));const Un=xt.LTR,Kc=xt.RTL;function X0(t){let e=[];for(let s=0;s<t.length;s++)e.push(1<<+t[s]);return e}const US=X0("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),NS=X0("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Wd=Object.create(null),ui=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),s=t.charCodeAt(1);Wd[e]=s,Wd[s]=-e}function Z0(t){return t<=247?US[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?NS[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const zS=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class en{get dir(){return this.level%2?Kc:Un}constructor(e,s,i){this.from=e,this.to=s,this.level=i}side(e,s){return this.dir==s==e?this.to:this.from}forward(e,s){return e==(this.dir==s)}static find(e,s,i,n){let o=-1;for(let r=0;r<e.length;r++){let l=e[r];if(l.from<=s&&l.to>=s){if(l.level==i)return r;(o<0||(n!=0?n<0?l.from<s:l.to>s:e[o].level>l.level))&&(o=r)}}if(o<0)throw new RangeError("Index out of range");return o}}function ev(t,e){if(t.length!=e.length)return!1;for(let s=0;s<t.length;s++){let i=t[s],n=e[s];if(i.from!=n.from||i.to!=n.to||i.direction!=n.direction||!ev(i.inner,n.inner))return!1}return!0}const ht=[];function FS(t,e,s,i,n){for(let o=0;o<=i.length;o++){let r=o?i[o-1].to:e,l=o<i.length?i[o].from:s,a=o?256:n;for(let d=r,u=a,f=a;d<l;d++){let h=Z0(t.charCodeAt(d));h==512?h=u:h==8&&f==4&&(h=16),ht[d]=h==4?2:h,h&7&&(f=h),u=h}for(let d=r,u=a,f=a;d<l;d++){let h=ht[d];if(h==128)d<l-1&&u==ht[d+1]&&u&24?h=ht[d]=u:ht[d]=256;else if(h==64){let g=d+1;for(;g<l&&ht[g]==64;)g++;let _=d&&u==8||g<s&&ht[g]==8?f==1?1:8:256;for(let p=d;p<g;p++)ht[p]=_;d=g-1}else h==8&&f==1&&(ht[d]=1);u=h,h&7&&(f=h)}}}function HS(t,e,s,i,n){let o=n==1?2:1;for(let r=0,l=0,a=0;r<=i.length;r++){let d=r?i[r-1].to:e,u=r<i.length?i[r].from:s;for(let f=d,h,g,_;f<u;f++)if(g=Wd[h=t.charCodeAt(f)])if(g<0){for(let p=l-3;p>=0;p-=3)if(ui[p+1]==-g){let V=ui[p+2],M=V&2?n:V&4?V&1?o:n:0;M&&(ht[f]=ht[ui[p]]=M),l=p;break}}else{if(ui.length==189)break;ui[l++]=f,ui[l++]=h,ui[l++]=a}else if((_=ht[f])==2||_==1){let p=_==n;a=p?0:1;for(let V=l-3;V>=0;V-=3){let M=ui[V+2];if(M&2)break;if(p)ui[V+2]|=2;else{if(M&4)break;ui[V+2]|=4}}}}}function WS(t,e,s,i){for(let n=0,o=i;n<=s.length;n++){let r=n?s[n-1].to:t,l=n<s.length?s[n].from:e;for(let a=r;a<l;){let d=ht[a];if(d==256){let u=a+1;for(;;)if(u==l){if(n==s.length)break;u=s[n++].to,l=n<s.length?s[n].from:e}else if(ht[u]==256)u++;else break;let f=o==1,h=(u<e?ht[u]:i)==1,g=f==h?f?1:2:i;for(let _=u,p=n,V=p?s[p-1].to:t;_>a;)_==V&&(_=s[--p].from,V=p?s[p-1].to:t),ht[--_]=g;a=u}else o=d,a++}}}function qd(t,e,s,i,n,o,r){let l=i%2?2:1;if(i%2==n%2)for(let a=e,d=0;a<s;){let u=!0,f=!1;if(d==o.length||a<o[d].from){let p=ht[a];p!=l&&(u=!1,f=p==16)}let h=!u&&l==1?[]:null,g=u?i:i+1,_=a;e:for(;;)if(d<o.length&&_==o[d].from){if(f)break e;let p=o[d];if(!u)for(let V=p.to,M=d+1;;){if(V==s)break e;if(M<o.length&&o[M].from==V)V=o[M++].to;else{if(ht[V]==l)break e;break}}if(d++,h)h.push(p);else{p.from>a&&r.push(new en(a,p.from,g));let V=p.direction==Un!=!(g%2);Kd(t,V?i+1:i,n,p.inner,p.from,p.to,r),a=p.to}_=p.to}else{if(_==s||(u?ht[_]!=l:ht[_]==l))break;_++}h?qd(t,a,_,i+1,n,h,r):a<_&&r.push(new en(a,_,g)),a=_}else for(let a=s,d=o.length;a>e;){let u=!0,f=!1;if(!d||a>o[d-1].to){let p=ht[a-1];p!=l&&(u=!1,f=p==16)}let h=!u&&l==1?[]:null,g=u?i:i+1,_=a;e:for(;;)if(d&&_==o[d-1].to){if(f)break e;let p=o[--d];if(!u)for(let V=p.from,M=d;;){if(V==e)break e;if(M&&o[M-1].to==V)V=o[--M].from;else{if(ht[V-1]==l)break e;break}}if(h)h.push(p);else{p.to<a&&r.push(new en(p.to,a,g));let V=p.direction==Un!=!(g%2);Kd(t,V?i+1:i,n,p.inner,p.from,p.to,r),a=p.from}_=p.from}else{if(_==e||(u?ht[_-1]!=l:ht[_-1]==l))break;_--}h?qd(t,_,a,i+1,n,h,r):_<a&&r.push(new en(_,a,g)),a=_}}function Kd(t,e,s,i,n,o,r){let l=e%2?2:1;FS(t,n,o,i,l),HS(t,n,o,i,l),WS(n,o,i,l),qd(t,n,o,e,s,i,r)}function qS(t,e,s){if(!t)return[new en(0,0,e==Kc?1:0)];if(e==Un&&!s.length&&!zS.test(t))return tv(t.length);if(s.length)for(;t.length>ht.length;)ht[ht.length]=256;let i=[],n=e==Un?0:1;return Kd(t,n,n,s,0,t.length,i),i}function tv(t){return[new en(0,t,0)]}let sv="";function KS(t,e,s,i,n){var o;let r=i.head-t.from,l=en.find(e,r,(o=i.bidiLevel)!==null&&o!==void 0?o:-1,i.assoc),a=e[l],d=a.side(n,s);if(r==d){let h=l+=n?1:-1;if(h<0||h>=e.length)return null;a=e[l=h],r=a.side(!n,s),d=a.side(n,s)}let u=Gt(t.text,r,a.forward(n,s));(u<a.from||u>a.to)&&(u=d),sv=t.text.slice(Math.min(r,u),Math.max(r,u));let f=l==(n?e.length-1:0)?null:e[l+(n?1:-1)];return f&&u==d&&f.level+(n?0:1)<a.level?fe.cursor(f.side(!n,s)+t.from,f.forward(n,s)?1:-1,f.level):fe.cursor(u+t.from,a.forward(n,s)?-1:1,a.level)}function GS(t,e,s){for(let i=e;i<s;i++){let n=Z0(t.charCodeAt(i));if(n==1)return Un;if(n==2||n==4)return Kc}return Un}const iv=$e.define(),nv=$e.define(),ov=$e.define(),rv=$e.define(),Gd=$e.define(),lv=$e.define(),av=$e.define(),Gc=$e.define(),Jc=$e.define(),uv=$e.define({combine:t=>t.some(e=>e)}),dv=$e.define({combine:t=>t.some(e=>e)}),cv=$e.define();class po{constructor(e,s="nearest",i="nearest",n=5,o=5,r=!1){this.range=e,this.y=s,this.x=i,this.yMargin=n,this.xMargin=o,this.isSnapshot=r}map(e){return e.empty?this:new po(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new po(fe.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const wl=We.define({map:(t,e)=>t.map(e)}),fv=We.define();function ws(t,e,s){let i=t.facet(rv);i.length?i[0](e):window.onerror&&window.onerror(String(e),s,void 0,void 0,e)||(s?console.error(s+":",e):console.error(e))}const Pi=$e.define({combine:t=>t.length?t[0]:!0});let JS=0;const eo=$e.define({combine(t){return t.filter((e,s)=>{for(let i=0;i<s;i++)if(t[i].plugin==e.plugin)return!1;return!0})}});class jt{constructor(e,s,i,n,o){this.id=e,this.create=s,this.domEventHandlers=i,this.domEventObservers=n,this.baseExtensions=o(this),this.extension=this.baseExtensions.concat(eo.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(eo.of({plugin:this,arg:e}))}static define(e,s){const{eventHandlers:i,eventObservers:n,provide:o,decorations:r}=s||{};return new jt(JS++,e,i,n,l=>{let a=[];return r&&a.push(Or.of(d=>{let u=d.plugin(l);return u?r(u):Ne.none})),o&&a.push(o(l)),a})}static fromClass(e,s){return jt.define((i,n)=>new e(i,n),s)}}class Ou{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let s=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(s)}catch(i){if(ws(s.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(s){ws(e.state,s,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var s;if(!((s=this.value)===null||s===void 0)&&s.destroy)try{this.value.destroy()}catch(i){ws(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const hv=$e.define(),Yc=$e.define(),Or=$e.define(),pv=$e.define(),Qr=$e.define(),mv=$e.define();function pp(t,e){let s=t.state.facet(mv);if(!s.length)return s;let i=s.map(o=>o instanceof Function?o(t):o),n=[];return tt.spans(i,e.from,e.to,{point(){},span(o,r,l,a){let d=o-e.from,u=r-e.from,f=n;for(let h=l.length-1;h>=0;h--,a--){let g=l[h].spec.bidiIsolate,_;if(g==null&&(g=GS(e.text,d,u)),a>0&&f.length&&(_=f[f.length-1]).to==d&&_.direction==g)_.to=u,f=_.inner;else{let p={from:d,to:u,direction:g,inner:[]};f.push(p),f=p.inner}}}}),n}const gv=$e.define();function Qc(t){let e=0,s=0,i=0,n=0;for(let o of t.state.facet(gv)){let r=o(t);r&&(r.left!=null&&(e=Math.max(e,r.left)),r.right!=null&&(s=Math.max(s,r.right)),r.top!=null&&(i=Math.max(i,r.top)),r.bottom!=null&&(n=Math.max(n,r.bottom)))}return{left:e,right:s,top:i,bottom:n}}const Zo=$e.define();class zs{constructor(e,s,i,n){this.fromA=e,this.toA=s,this.fromB=i,this.toB=n}join(e){return new zs(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let s=e.length,i=this;for(;s>0;s--){let n=e[s-1];if(!(n.fromA>i.toA)){if(n.toA<i.fromA)break;i=i.join(n),e.splice(s-1,1)}}return e.splice(s,0,i),e}static extendWithRanges(e,s){if(s.length==0)return e;let i=[];for(let n=0,o=0,r=0,l=0;;n++){let a=n==e.length?null:e[n],d=r-l,u=a?a.fromB:1e9;for(;o<s.length&&s[o]<u;){let f=s[o],h=s[o+1],g=Math.max(l,f),_=Math.min(u,h);if(g<=_&&new zs(g+d,_+d,g,_).addToSet(i),h>u)break;o+=2}if(!a)return i;new zs(a.fromA,a.toA,a.fromB,a.toB).addToSet(i),r=a.toA,l=a.toB}}}class ba{constructor(e,s,i){this.view=e,this.state=s,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=Rt.empty(this.startState.doc.length);for(let o of i)this.changes=this.changes.compose(o.changes);let n=[];this.changes.iterChangedRanges((o,r,l,a)=>n.push(new zs(o,r,l,a))),this.changedRanges=n}static create(e,s,i){return new ba(e,s,i)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class mp extends ut{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Ne.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Pt],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new zs(0,0,0,e.state.doc.length)],0,null)}update(e){var s;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:d,toA:u})=>u<this.minWidthFrom||d>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let n=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((s=this.domChanged)===null||s===void 0)&&s.newSel?n=this.domChanged.newSel.head:!sC(e.changes,this.hasComposition)&&!e.selectionSet&&(n=e.state.selection.main.head));let o=n>-1?QS(this.view,e.changes,n):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:d,to:u}=this.hasComposition;i=new zs(d,u,e.changes.mapPos(d,-1),e.changes.mapPos(u,1)).addToSet(i.slice())}this.hasComposition=o?{from:o.range.fromB,to:o.range.toB}:null,(De.ie||De.chrome)&&!o&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let r=this.decorations,l=this.updateDeco(),a=eC(r,l,e.changes);return i=zs.extendWithRanges(i,a),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,e.startState.doc.length,o),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,s,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,s,i);let{observer:n}=this.view;n.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let r=De.chrome||De.ios?{node:n.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,r),this.flags&=-8,r&&(r.written||n.selectionRange.focusNode!=r.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(r=>r.flags&=-9);let o=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let r of this.children)r instanceof ji&&r.widget instanceof Hd&&o.push(r.dom);n.updateGaps(o)}updateChildren(e,s,i){let n=i?i.range.addToSet(e.slice()):e,o=this.childCursor(s);for(let r=n.length-1;;r--){let l=r>=0?n[r]:null;if(!l)break;let{fromA:a,toA:d,fromB:u,toB:f}=l,h,g,_,p;if(i&&i.range.fromB<f&&i.range.toB>u){let W=pr.build(this.view.state.doc,u,i.range.fromB,this.decorations,this.dynamicDecorationMap),G=pr.build(this.view.state.doc,i.range.toB,f,this.decorations,this.dynamicDecorationMap);g=W.breakAtStart,_=W.openStart,p=G.openEnd;let j=this.compositionView(i);G.breakAtStart?j.breakAfter=1:G.content.length&&j.merge(j.length,j.length,G.content[0],!1,G.openStart,0)&&(j.breakAfter=G.content[0].breakAfter,G.content.shift()),W.content.length&&j.merge(0,0,W.content[W.content.length-1],!0,0,W.openEnd)&&W.content.pop(),h=W.content.concat(j).concat(G.content)}else({content:h,breakAtStart:g,openStart:_,openEnd:p}=pr.build(this.view.state.doc,u,f,this.decorations,this.dynamicDecorationMap));let{i:V,off:M}=o.findPos(d,1),{i:N,off:B}=o.findPos(a,-1);q0(this,N,B,V,M,h,g,_,p)}i&&this.fixCompositionDOM(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let s of e.transactions)for(let i of s.effects)i.is(fv)&&(this.editContextFormatting=i.value)}compositionView(e){let s=new ii(e.text.nodeValue);s.flags|=8;for(let{deco:n}of e.marks)s=new Ii(n,[s],s.length);let i=new Pt;return i.append(s,0),i}fixCompositionDOM(e){let s=(o,r)=>{r.flags|=8|(r.children.some(a=>a.flags&7)?1:0),this.markedForComposition.add(r);let l=ut.get(o);l&&l!=r&&(l.dom=null),r.setDOM(o)},i=this.childPos(e.range.fromB,1),n=this.children[i.i];s(e.line,n);for(let o=e.marks.length-1;o>=-1;o--)i=n.childPos(i.off,1),n=n.children[i.i],s(o>=0?e.marks[o].node:e.text,n)}updateSelection(e=!1,s=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,n=i==this.dom,o=!n&&!(this.view.state.facet(Pi)||this.dom.tabIndex>-1)&&Jl(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(n||s||o))return;let r=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(l.anchor)),d=l.empty?a:this.moveToLine(this.domAtPos(l.head));if(De.gecko&&l.empty&&!this.hasComposition&&YS(a)){let f=document.createTextNode("");this.view.observer.ignore(()=>a.node.insertBefore(f,a.node.childNodes[a.offset]||null)),a=d=new is(f,0),r=!0}let u=this.view.observer.selectionRange;(r||!u.focusNode||(!hr(a.node,a.offset,u.anchorNode,u.anchorOffset)||!hr(d.node,d.offset,u.focusNode,u.focusOffset))&&!this.suppressWidgetCursorChange(u,l))&&(this.view.observer.ignore(()=>{De.android&&De.chrome&&this.dom.contains(u.focusNode)&&tC(u.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let f=$r(this.view.root);if(f)if(l.empty){if(De.gecko){let h=XS(a.node,a.offset);if(h&&h!=3){let g=(h==1?F0:H0)(a.node,a.offset);g&&(a=new is(g.node,g.offset))}}f.collapse(a.node,a.offset),l.bidiLevel!=null&&f.caretBidiLevel!==void 0&&(f.caretBidiLevel=l.bidiLevel)}else if(f.extend){f.collapse(a.node,a.offset);try{f.extend(d.node,d.offset)}catch{}}else{let h=document.createRange();l.anchor>l.head&&([a,d]=[d,a]),h.setEnd(d.node,d.offset),h.setStart(a.node,a.offset),f.removeAllRanges(),f.addRange(h)}o&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(a,d)),this.impreciseAnchor=a.precise?null:new is(u.anchorNode,u.anchorOffset),this.impreciseHead=d.precise?null:new is(u.focusNode,u.focusOffset)}suppressWidgetCursorChange(e,s){return this.hasComposition&&s.empty&&hr(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==s.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,s=e.state.selection.main,i=$r(e.root),{anchorNode:n,anchorOffset:o}=e.observer.selectionRange;if(!i||!s.empty||!s.assoc||!i.modify)return;let r=Pt.find(this,s.head);if(!r)return;let l=r.posAtStart;if(s.head==l||s.head==l+r.length)return;let a=this.coordsAt(s.head,-1),d=this.coordsAt(s.head,1);if(!a||!d||a.bottom>d.top)return;let u=this.domAtPos(s.head+s.assoc);i.collapse(u.node,u.offset),i.modify("move",s.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let f=e.observer.selectionRange;e.docView.posFromDOM(f.anchorNode,f.anchorOffset)!=s.from&&i.collapse(n,o)}moveToLine(e){let s=this.dom,i;if(e.node!=s)return e;for(let n=e.offset;!i&&n<s.childNodes.length;n++){let o=ut.get(s.childNodes[n]);o instanceof Pt&&(i=o.domAtPos(0))}for(let n=e.offset-1;!i&&n>=0;n--){let o=ut.get(s.childNodes[n]);o instanceof Pt&&(i=o.domAtPos(o.length))}return i?new is(i.node,i.offset,!0):e}nearest(e){for(let s=e;s;){let i=ut.get(s);if(i&&i.rootView==this)return i;s=s.parentNode}return null}posFromDOM(e,s){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,s)+i.posAtStart}domAtPos(e){let{i:s,off:i}=this.childCursor().findPos(e,-1);for(;s<this.children.length-1;){let n=this.children[s];if(i<n.length||n instanceof Pt)break;s++,i=0}return this.children[s].domAtPos(i)}coordsAt(e,s){let i=null,n=0;for(let o=this.length,r=this.children.length-1;r>=0;r--){let l=this.children[r],a=o-l.breakAfter,d=a-l.length;if(a<e)break;if(d<=e&&(d<e||l.covers(-1))&&(a>e||l.covers(1))&&(!i||l instanceof Pt&&!(i instanceof Pt&&s>=0)))i=l,n=d;else if(i&&d==e&&a==e&&l instanceof ji&&Math.abs(s)<2){if(l.deco.startSide<0)break;r&&(i=null)}o=d}return i?i.coordsAt(e-n,s):null}coordsForChar(e){let{i:s,off:i}=this.childPos(e,1),n=this.children[s];if(!(n instanceof Pt))return null;for(;n.children.length;){let{i:l,off:a}=n.childPos(i,1);for(;;l++){if(l==n.children.length)return null;if((n=n.children[l]).length)break}i=a}if(!(n instanceof ii))return null;let o=Gt(n.text,i);if(o==i)return null;let r=In(n.dom,i,o).getClientRects();for(let l=0;l<r.length;l++){let a=r[l];if(l==r.length-1||a.top<a.bottom&&a.left<a.right)return a}return null}measureVisibleLineHeights(e){let s=[],{from:i,to:n}=e,o=this.view.contentDOM.clientWidth,r=o>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,a=this.view.textDirection==xt.LTR;for(let d=0,u=0;u<this.children.length;u++){let f=this.children[u],h=d+f.length;if(h>n)break;if(d>=i){let g=f.dom.getBoundingClientRect();if(s.push(g.height),r){let _=f.dom.lastChild,p=_?Er(_):[];if(p.length){let V=p[p.length-1],M=a?V.right-g.left:g.right-V.left;M>l&&(l=M,this.minWidth=o,this.minWidthFrom=d,this.minWidthTo=h)}}}d=h+f.breakAfter}return s}textDirectionAt(e){let{i:s}=this.childPos(e,1);return getComputedStyle(this.children[s].dom).direction=="rtl"?xt.RTL:xt.LTR}measureTextSize(){for(let o of this.children)if(o instanceof Pt){let r=o.measureTextSize();if(r)return r}let e=document.createElement("div"),s,i,n;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let o=Er(e.firstChild)[0];s=e.getBoundingClientRect().height,i=o?o.width/27:7,n=o?o.height:s,e.remove()}),{lineHeight:s,charWidth:i,textHeight:n}}childCursor(e=this.length){let s=this.children.length;return s&&(e-=this.children[--s].length),new W0(this.children,e,s)}computeBlockGapDeco(){let e=[],s=this.view.viewState;for(let i=0,n=0;;n++){let o=n==s.viewports.length?null:s.viewports[n],r=o?o.from-1:this.length;if(r>i){let l=(s.lineBlockAt(r).bottom-s.lineBlockAt(i).top)/this.view.scaleY;e.push(Ne.replace({widget:new Hd(l),block:!0,inclusive:!0,isBlockGap:!0}).range(i,r))}if(!o)break;i=o.to+1}return Ne.set(e)}updateDeco(){let e=1,s=this.view.state.facet(Or).map(o=>(this.dynamicDecorationMap[e++]=typeof o=="function")?o(this.view):o),i=!1,n=this.view.state.facet(pv).map((o,r)=>{let l=typeof o=="function";return l&&(i=!0),l?o(this.view):o});for(n.length&&(this.dynamicDecorationMap[e++]=i,s.push(tt.join(n))),this.decorations=[this.editContextFormatting,...s,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let d=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=d.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let d of this.view.state.facet(cv))try{if(d(this.view,e.range,e))return!0}catch(u){ws(this.view.state,u,"scroll handler")}let{range:s}=e,i=this.coordsAt(s.head,s.empty?s.assoc:s.head>s.anchor?-1:1),n;if(!i)return;!s.empty&&(n=this.coordsAt(s.anchor,s.anchor>s.head?-1:1))&&(i={left:Math.min(i.left,n.left),top:Math.min(i.top,n.top),right:Math.max(i.right,n.right),bottom:Math.max(i.bottom,n.bottom)});let o=Qc(this.view),r={left:i.left-o.left,top:i.top-o.top,right:i.right+o.right,bottom:i.bottom+o.bottom},{offsetWidth:l,offsetHeight:a}=this.view.scrollDOM;DS(this.view.scrollDOM,r,s.head<s.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,l),-l),Math.max(Math.min(e.yMargin,a),-a),this.view.textDirection==xt.LTR)}}function YS(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function vv(t,e){let s=t.observer.selectionRange;if(!s.focusNode)return null;let i=F0(s.focusNode,s.focusOffset),n=H0(s.focusNode,s.focusOffset),o=i||n;if(n&&i&&n.node!=i.node){let l=ut.get(n.node);if(!l||l instanceof ii&&l.text!=n.node.nodeValue)o=n;else if(t.docView.lastCompositionAfterCursor){let a=ut.get(i.node);!a||a instanceof ii&&a.text!=i.node.nodeValue||(o=n)}}if(t.docView.lastCompositionAfterCursor=o!=i,!o)return null;let r=e-o.offset;return{from:r,to:r+o.node.nodeValue.length,node:o.node}}function QS(t,e,s){let i=vv(t,s);if(!i)return null;let{node:n,from:o,to:r}=i,l=n.nodeValue;if(/[\n\r]/.test(l)||t.state.doc.sliceString(i.from,i.to)!=l)return null;let a=e.invertedDesc,d=new zs(a.mapPos(o),a.mapPos(r),o,r),u=[];for(let f=n.parentNode;;f=f.parentNode){let h=ut.get(f);if(h instanceof Ii)u.push({node:f,deco:h.mark});else{if(h instanceof Pt||f.nodeName=="DIV"&&f.parentNode==t.contentDOM)return{range:d,text:n,marks:u,line:f};if(f!=t.contentDOM)u.push({node:f,deco:new Jr({inclusive:!0,attributes:BS(f),tagName:f.tagName.toLowerCase()})});else return null}}}function XS(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let ZS=class{constructor(){this.changes=[]}compareRange(e,s){Yl(e,s,this.changes)}comparePoint(e,s){Yl(e,s,this.changes)}boundChange(e){Yl(e,e,this.changes)}};function eC(t,e,s){let i=new ZS;return tt.compare(t,e,s,i),i.changes}function tC(t,e){for(let s=t;s&&s!=e;s=s.assignedSlot||s.parentNode)if(s.nodeType==1&&s.contentEditable=="false")return!0;return!1}function sC(t,e){let s=!1;return e&&t.iterChangedRanges((i,n)=>{i<e.to&&n>e.from&&(s=!0)}),s}function iC(t,e,s=1){let i=t.charCategorizer(e),n=t.doc.lineAt(e),o=e-n.from;if(n.length==0)return fe.cursor(e);o==0?s=1:o==n.length&&(s=-1);let r=o,l=o;s<0?r=Gt(n.text,o,!1):l=Gt(n.text,o);let a=i(n.text.slice(r,l));for(;r>0;){let d=Gt(n.text,r,!1);if(i(n.text.slice(d,r))!=a)break;r=d}for(;l<n.length;){let d=Gt(n.text,l);if(i(n.text.slice(l,d))!=a)break;l=d}return fe.range(r+n.from,l+n.from)}function nC(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function oC(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function Pu(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function gp(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function vp(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function Jd(t,e,s){let i,n,o,r,l=!1,a,d,u,f;for(let _=t.firstChild;_;_=_.nextSibling){let p=Er(_);for(let V=0;V<p.length;V++){let M=p[V];n&&Pu(n,M)&&(M=gp(vp(M,n.bottom),n.top));let N=nC(e,M),B=oC(s,M);if(N==0&&B==0)return _.nodeType==3?yp(_,e,s):Jd(_,e,s);(!i||r>B||r==B&&o>N)&&(i=_,n=M,o=N,r=B,l=N?e<M.left?V>0:V<p.length-1:!0),N==0?s>M.bottom&&(!u||u.bottom<M.bottom)?(a=_,u=M):s<M.top&&(!f||f.top>M.top)&&(d=_,f=M):u&&Pu(u,M)?u=vp(u,M.bottom):f&&Pu(f,M)&&(f=gp(f,M.top))}}if(u&&u.bottom>=s?(i=a,n=u):f&&f.top<=s&&(i=d,n=f),!i)return{node:t,offset:0};let h=Math.max(n.left,Math.min(n.right,e));if(i.nodeType==3)return yp(i,h,s);if(l&&i.contentEditable!="false")return Jd(i,h,s);let g=Array.prototype.indexOf.call(t.childNodes,i)+(e>=(n.left+n.right)/2?1:0);return{node:t,offset:g}}function yp(t,e,s){let i=t.nodeValue.length,n=-1,o=1e9,r=0;for(let l=0;l<i;l++){let a=In(t,l,l+1).getClientRects();for(let d=0;d<a.length;d++){let u=a[d];if(u.top==u.bottom)continue;r||(r=e-u.left);let f=(u.top>s?u.top-s:s-u.bottom)-1;if(u.left-1<=e&&u.right+1>=e&&f<o){let h=e>=(u.left+u.right)/2,g=h;if((De.chrome||De.gecko)&&In(t,l).getBoundingClientRect().left==u.right&&(g=!h),f<=0)return{node:t,offset:l+(g?1:0)};n=l+(g?1:0),o=f}}}return{node:t,offset:n>-1?n:r>0?t.nodeValue.length:0}}function yv(t,e,s,i=-1){var n,o;let r=t.contentDOM.getBoundingClientRect(),l=r.top+t.viewState.paddingTop,a,{docHeight:d}=t.viewState,{x:u,y:f}=e,h=f-l;if(h<0)return 0;if(h>d)return t.state.doc.length;for(let W=t.viewState.heightOracle.textHeight/2,G=!1;a=t.elementAtHeight(h),a.type!=ms.Text;)for(;h=i>0?a.bottom+W:a.top-W,!(h>=0&&h<=d);){if(G)return s?null:0;G=!0,i=-i}f=l+h;let g=a.from;if(g<t.viewport.from)return t.viewport.from==0?0:s?null:bp(t,r,a,u,f);if(g>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:s?null:bp(t,r,a,u,f);let _=t.dom.ownerDocument,p=t.root.elementFromPoint?t.root:_,V=p.elementFromPoint(u,f);V&&!t.contentDOM.contains(V)&&(V=null),V||(u=Math.max(r.left+1,Math.min(r.right-1,u)),V=p.elementFromPoint(u,f),V&&!t.contentDOM.contains(V)&&(V=null));let M,N=-1;if(V&&((n=t.docView.nearest(V))===null||n===void 0?void 0:n.isEditable)!=!1){if(_.caretPositionFromPoint){let W=_.caretPositionFromPoint(u,f);W&&({offsetNode:M,offset:N}=W)}else if(_.caretRangeFromPoint){let W=_.caretRangeFromPoint(u,f);W&&({startContainer:M,startOffset:N}=W)}M&&(!t.contentDOM.contains(M)||De.safari&&rC(M,N,u)||De.chrome&&lC(M,N,u))&&(M=void 0),M&&(N=Math.min(_i(M),N))}if(!M||!t.docView.dom.contains(M)){let W=Pt.find(t.docView,g);if(!W)return h>a.top+a.height/2?a.to:a.from;({node:M,offset:N}=Jd(W.dom,u,f))}let B=t.docView.nearest(M);if(!B)return null;if(B.isWidget&&((o=B.dom)===null||o===void 0?void 0:o.nodeType)==1){let W=B.dom.getBoundingClientRect();return e.y<W.top||e.y<=W.bottom&&e.x<=(W.left+W.right)/2?B.posAtStart:B.posAtEnd}else return B.localPosFromDOM(M,N)+B.posAtStart}function bp(t,e,s,i,n){let o=Math.round((i-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&s.height>t.defaultLineHeight*1.5){let l=t.viewState.heightOracle.textHeight,a=Math.floor((n-s.top-(t.defaultLineHeight-l)*.5)/l);o+=a*t.viewState.heightOracle.lineLength}let r=t.state.sliceDoc(s.from,s.to);return s.from+Pd(r,o,t.state.tabSize)}function bv(t,e,s){let i,n=t;if(t.nodeType!=3||e!=(i=t.nodeValue.length))return!1;for(;;){let o=n.nextSibling;if(o){if(o.nodeName=="BR")break;return!1}else{let r=n.parentNode;if(!r||r.nodeName=="DIV")break;n=r}}return In(t,i-1,i).getBoundingClientRect().right>s}function rC(t,e,s){return bv(t,e,s)}function lC(t,e,s){if(e!=0)return bv(t,e,s);for(let n=t;;){let o=n.parentNode;if(!o||o.nodeType!=1||o.firstChild!=n)return!1;if(o.classList.contains("cm-line"))break;n=o}let i=t.nodeType==1?t.getBoundingClientRect():In(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return s-i.left>5}function Yd(t,e,s){let i=t.lineBlockAt(e);if(Array.isArray(i.type)){let n;for(let o of i.type){if(o.from>e)break;if(!(o.to<e)){if(o.from<e&&o.to>e)return o;(!n||o.type==ms.Text&&(n.type!=o.type||(s<0?o.from<e:o.to>e)))&&(n=o)}}return n||i}return i}function aC(t,e,s,i){let n=Yd(t,e.head,e.assoc||-1),o=!i||n.type!=ms.Text||!(t.lineWrapping||n.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>n.from?e.head-1:e.head);if(o){let r=t.dom.getBoundingClientRect(),l=t.textDirectionAt(n.from),a=t.posAtCoords({x:s==(l==xt.LTR)?r.right-1:r.left+1,y:(o.top+o.bottom)/2});if(a!=null)return fe.cursor(a,s?-1:1)}return fe.cursor(s?n.to:n.from,s?-1:1)}function kp(t,e,s,i){let n=t.state.doc.lineAt(e.head),o=t.bidiSpans(n),r=t.textDirectionAt(n.from);for(let l=e,a=null;;){let d=KS(n,o,r,l,s),u=sv;if(!d){if(n.number==(s?t.state.doc.lines:1))return l;u=`
`,n=t.state.doc.line(n.number+(s?1:-1)),o=t.bidiSpans(n),d=t.visualLineSide(n,!s)}if(a){if(!a(u))return l}else{if(!i)return d;a=i(u)}l=d}}function uC(t,e,s){let i=t.state.charCategorizer(e),n=i(s);return o=>{let r=i(o);return n==St.Space&&(n=r),n==r}}function dC(t,e,s,i){let n=e.head,o=s?1:-1;if(n==(s?t.state.doc.length:0))return fe.cursor(n,e.assoc);let r=e.goalColumn,l,a=t.contentDOM.getBoundingClientRect(),d=t.coordsAtPos(n,e.assoc||-1),u=t.documentTop;if(d)r==null&&(r=d.left-a.left),l=o<0?d.top:d.bottom;else{let g=t.viewState.lineBlockAt(n);r==null&&(r=Math.min(a.right-a.left,t.defaultCharacterWidth*(n-g.from))),l=(o<0?g.top:g.bottom)+u}let f=a.left+r,h=i??t.viewState.heightOracle.textHeight>>1;for(let g=0;;g+=10){let _=l+(h+g)*o,p=yv(t,{x:f,y:_},!1,o);if(_<a.top||_>a.bottom||(o<0?p<n:p>n)){let V=t.docView.coordsForChar(p),M=!V||_<V.top?-1:1;return fe.cursor(p,M,void 0,r)}}}function mr(t,e,s){for(;;){let i=0;for(let n of t)n.between(e-1,e+1,(o,r,l)=>{if(e>o&&e<r){let a=i||s||(e-o<r-e?-1:1);e=a<0?o:r,i=a}});if(!i)return e}}function kv(t,e){let s=null;for(let i=0;i<e.ranges.length;i++){let n=e.ranges[i],o=null;if(n.empty){let r=mr(t,n.from,0);r!=n.from&&(o=fe.cursor(r,-1))}else{let r=mr(t,n.from,-1),l=mr(t,n.to,1);(r!=n.from||l!=n.to)&&(o=fe.range(n.from==n.anchor?r:l,n.from==n.head?r:l))}o&&(s||(s=e.ranges.slice()),s[i]=o)}return s?fe.create(s,e.mainIndex):e}function ju(t,e,s){let i=mr(t.state.facet(Qr).map(n=>n(t)),s.from,e.head>s.from?-1:1);return i==s.from?s:fe.cursor(i,i<s.from?1:-1)}const er="";class cC{constructor(e,s){this.points=e,this.text="",this.lineSeparator=s.facet(et.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=er}readRange(e,s){if(!e)return this;let i=e.parentNode;for(let n=e;;){this.findPointBefore(i,n);let o=this.text.length;this.readNode(n);let r=n.nextSibling;if(r==s)break;let l=ut.get(n),a=ut.get(r);(l&&a?l.breakAfter:(l?l.breakAfter:va(n))||va(r)&&(n.nodeName!="BR"||n.cmIgnore)&&this.text.length>o)&&!hC(r,s)&&this.lineBreak(),n=r}return this.findPointBefore(i,s),this}readTextNode(e){let s=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,s.length));for(let i=0,n=this.lineSeparator?null:/\r\n?|\n/g;;){let o=-1,r=1,l;if(this.lineSeparator?(o=s.indexOf(this.lineSeparator,i),r=this.lineSeparator.length):(l=n.exec(s))&&(o=l.index,r=l[0].length),this.append(s.slice(i,o<0?s.length:o)),o<0)break;if(this.lineBreak(),r>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=r-1);i=o+r}}readNode(e){if(e.cmIgnore)return;let s=ut.get(e),i=s&&s.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let n=i.iter();!n.next().done;)n.lineBreak?this.lineBreak():this.append(n.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,s){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==s&&(i.pos=this.text.length)}findPointInside(e,s){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(fC(e,i.node,i.offset)?s:0))}}function fC(t,e,s){for(;;){if(!e||s<_i(e))return!1;if(e==t)return!0;s=Bn(e)+1,e=e.parentNode}}function hC(t,e){let s;for(;!(t==e||!t);t=t.nextSibling){let i=ut.get(t);if(!(i?.isWidget||t.cmIgnore))return!1;i&&(s||(s=[])).push(i)}if(s)for(let i of s){let n=i.overrideDOMText;if(n?.length)return!1}return!0}class xp{constructor(e,s){this.node=e,this.offset=s,this.pos=-1}}class pC{constructor(e,s,i,n){this.typeOver=n,this.bounds=null,this.text="",this.domChanged=s>-1;let{impreciseHead:o,impreciseAnchor:r}=e.docView;if(e.state.readOnly&&s>-1)this.newSel=null;else if(s>-1&&(this.bounds=e.docView.domBoundsAround(s,i,0))){let l=o||r?[]:gC(e),a=new cC(l,e.state);a.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=a.text,this.newSel=vC(l,this.bounds.from)}else{let l=e.observer.selectionRange,a=o&&o.node==l.focusNode&&o.offset==l.focusOffset||!Nd(e.contentDOM,l.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(l.focusNode,l.focusOffset),d=r&&r.node==l.anchorNode&&r.offset==l.anchorOffset||!Nd(e.contentDOM,l.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(l.anchorNode,l.anchorOffset),u=e.viewport;if((De.ios||De.chrome)&&e.state.selection.main.empty&&a!=d&&(u.from>0||u.to<e.state.doc.length)){let f=Math.min(a,d),h=Math.max(a,d),g=u.from-f,_=u.to-h;(g==0||g==1||f==0)&&(_==0||_==-1||h==e.state.doc.length)&&(a=0,d=e.state.doc.length)}this.newSel=fe.single(d,a)}}}function xv(t,e){let s,{newSel:i}=e,n=t.state.selection.main,o=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:r,to:l}=e.bounds,a=n.from,d=null;(o===8||De.android&&e.text.length<l-r)&&(a=n.to,d="end");let u=wv(t.state.doc.sliceString(r,l,er),e.text,a-r,d);u&&(De.chrome&&o==13&&u.toB==u.from+2&&e.text.slice(u.from,u.toB)==er+er&&u.toB--,s={from:r+u.from,to:r+u.toA,insert:st.of(e.text.slice(u.from,u.toB).split(er))})}else i&&(!t.hasFocus&&t.state.facet(Pi)||i.main.eq(n))&&(i=null);if(!s&&!i)return!1;if(!s&&e.typeOver&&!n.empty&&i&&i.main.empty?s={from:n.from,to:n.to,insert:t.state.doc.slice(n.from,n.to)}:(De.mac||De.android)&&s&&s.from==s.to&&s.from==n.head-1&&/^\. ?$/.test(s.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(i&&s.insert.length==2&&(i=fe.single(i.main.anchor-1,i.main.head-1)),s={from:s.from,to:s.to,insert:st.of([s.insert.toString().replace("."," ")])}):s&&s.from>=n.from&&s.to<=n.to&&(s.from!=n.from||s.to!=n.to)&&n.to-n.from-(s.to-s.from)<=4?s={from:n.from,to:n.to,insert:t.state.doc.slice(n.from,s.from).append(s.insert).append(t.state.doc.slice(s.to,n.to))}:De.chrome&&s&&s.from==s.to&&s.from==n.head&&s.insert.toString()==`
 `&&t.lineWrapping&&(i&&(i=fe.single(i.main.anchor-1,i.main.head-1)),s={from:n.from,to:n.to,insert:st.of([" "])}),s)return Xc(t,s,i,o);if(i&&!i.main.eq(n)){let r=!1,l="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(r=!0),l=t.inputState.lastSelectionOrigin,l=="select.pointer"&&(i=kv(t.state.facet(Qr).map(a=>a(t)),i))),t.dispatch({selection:i,scrollIntoView:r,userEvent:l}),!0}else return!1}function Xc(t,e,s,i=-1){if(De.ios&&t.inputState.flushIOSKey(e))return!0;let n=t.state.selection.main;if(De.android&&(e.to==n.to&&(e.from==n.from||e.from==n.from-1&&t.state.sliceDoc(e.from,n.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&ho(t.contentDOM,"Enter",13)||(e.from==n.from-1&&e.to==n.to&&e.insert.length==0||i==8&&e.insert.length<e.to-e.from&&e.to>n.head)&&ho(t.contentDOM,"Backspace",8)||e.from==n.from&&e.to==n.to+1&&e.insert.length==0&&ho(t.contentDOM,"Delete",46)))return!0;let o=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let r,l=()=>r||(r=mC(t,e,s));return t.state.facet(lv).some(a=>a(t,e.from,e.to,o,l))||t.dispatch(l()),!0}function mC(t,e,s){let i,n=t.state,o=n.selection.main,r=-1;if(e.from==e.to&&e.from<o.from||e.from>o.to){let a=e.from<o.from?-1:1,d=a<0?o.from:o.to,u=mr(n.facet(Qr).map(f=>f(t)),d,a);e.from==u&&(r=u)}if(r>-1)i={changes:e,selection:fe.cursor(e.from+e.insert.length,-1)};else if(e.from>=o.from&&e.to<=o.to&&e.to-e.from>=(o.to-o.from)/3&&(!s||s.main.empty&&s.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let a=o.from<e.from?n.sliceDoc(o.from,e.from):"",d=o.to>e.to?n.sliceDoc(e.to,o.to):"";i=n.replaceSelection(t.state.toText(a+e.insert.sliceString(0,void 0,t.state.lineBreak)+d))}else{let a=n.changes(e),d=s&&s.main.to<=a.newLength?s.main:void 0;if(n.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=o.to&&e.to>=o.to-10){let u=t.state.sliceDoc(e.from,e.to),f,h=s&&vv(t,s.main.head);if(h){let p=e.insert.length-(e.to-e.from);f={from:h.from,to:h.to-p}}else f=t.state.doc.lineAt(o.head);let g=o.to-e.to,_=o.to-o.from;i=n.changeByRange(p=>{if(p.from==o.from&&p.to==o.to)return{changes:a,range:d||p.map(a)};let V=p.to-g,M=V-u.length;if(p.to-p.from!=_||t.state.sliceDoc(M,V)!=u||p.to>=f.from&&p.from<=f.to)return{range:p};let N=n.changes({from:M,to:V,insert:e.insert}),B=p.to-o.to;return{changes:N,range:d?fe.range(Math.max(0,d.anchor+B),Math.max(0,d.head+B)):p.map(N)}})}else i={changes:a,selection:d&&n.selection.replaceRange(d)}}let l="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,l+=".compose",t.inputState.compositionFirstChange&&(l+=".start",t.inputState.compositionFirstChange=!1)),n.update(i,{userEvent:l,scrollIntoView:!0})}function wv(t,e,s,i){let n=Math.min(t.length,e.length),o=0;for(;o<n&&t.charCodeAt(o)==e.charCodeAt(o);)o++;if(o==n&&t.length==e.length)return null;let r=t.length,l=e.length;for(;r>0&&l>0&&t.charCodeAt(r-1)==e.charCodeAt(l-1);)r--,l--;if(i=="end"){let a=Math.max(0,o-Math.min(r,l));s-=r+a-o}if(r<o&&t.length<e.length){let a=s<=o&&s>=r?o-s:0;o-=a,l=o+(l-r),r=o}else if(l<o){let a=s<=o&&s>=l?o-s:0;o-=a,r=o+(r-l),l=o}return{from:o,toA:r,toB:l}}function gC(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:s,anchorOffset:i,focusNode:n,focusOffset:o}=t.observer.selectionRange;return s&&(e.push(new xp(s,i)),(n!=s||o!=i)&&e.push(new xp(n,o))),e}function vC(t,e){if(t.length==0)return null;let s=t[0].pos,i=t.length==2?t[1].pos:s;return s>-1&&i>-1?fe.single(s+e,i+e):null}class yC{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,De.safari&&e.contentDOM.addEventListener("input",()=>null),De.gecko&&PC(e.contentDOM.ownerDocument)}handleEvent(e){!AC(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,s){let i=this.handlers[e];if(i){for(let n of i.observers)n(this.view,s);for(let n of i.handlers){if(s.defaultPrevented)break;if(n(this.view,s)){s.preventDefault();break}}}}ensureHandlers(e){let s=bC(e),i=this.handlers,n=this.view.contentDOM;for(let o in s)if(o!="scroll"){let r=!s[o].handlers.length,l=i[o];l&&r!=!l.handlers.length&&(n.removeEventListener(o,this.handleEvent),l=null),l||n.addEventListener(o,this.handleEvent,{passive:r})}for(let o in i)o!="scroll"&&!s[o]&&n.removeEventListener(o,this.handleEvent);this.handlers=s}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&Sv.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),De.android&&De.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let s;return De.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((s=_v.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||kC.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=s||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let s=this.pendingIOSKey;return!s||s.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,ho(this.view.contentDOM,s.key,s.keyCode,s instanceof KeyboardEvent?s:void 0))}ignoreDuringComposition(e){return!/^key/.test(e.type)||e.synthetic?!1:this.composing>0?!0:De.safari&&!De.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function wp(t,e){return(s,i)=>{try{return e.call(t,i,s)}catch(n){ws(s.state,n)}}}function bC(t){let e=Object.create(null);function s(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of t){let n=i.spec,o=n&&n.plugin.domEventHandlers,r=n&&n.plugin.domEventObservers;if(o)for(let l in o){let a=o[l];a&&s(l).handlers.push(wp(i.value,a))}if(r)for(let l in r){let a=r[l];a&&s(l).observers.push(wp(i.value,a))}}for(let i in ni)s(i).handlers.push(ni[i]);for(let i in Ws)s(i).observers.push(Ws[i]);return e}const _v=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],kC="dthko",Sv=[16,17,18,20,91,92,224,225],_l=6;function Sl(t){return Math.max(0,t)*.7+8}function xC(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class wC{constructor(e,s,i,n){this.view=e,this.startEvent=s,this.style=i,this.mustSelect=n,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=s,this.scrollParents=TS(e.contentDOM),this.atoms=e.state.facet(Qr).map(r=>r(e));let o=e.contentDOM.ownerDocument;o.addEventListener("mousemove",this.move=this.move.bind(this)),o.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=s.shiftKey,this.multiple=e.state.facet(et.allowMultipleSelections)&&_C(e,s),this.dragging=CC(e,s)&&Vv(s)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&xC(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let s=0,i=0,n=0,o=0,r=this.view.win.innerWidth,l=this.view.win.innerHeight;this.scrollParents.x&&({left:n,right:r}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:o,bottom:l}=this.scrollParents.y.getBoundingClientRect());let a=Qc(this.view);e.clientX-a.left<=n+_l?s=-Sl(n-e.clientX):e.clientX+a.right>=r-_l&&(s=Sl(e.clientX-r)),e.clientY-a.top<=o+_l?i=-Sl(o-e.clientY):e.clientY+a.bottom>=l-_l&&(i=Sl(e.clientY-l)),this.setScrollSpeed(s,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,s){this.scrollSpeed={x:e,y:s},e||s?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:s}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),s&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=s,s=0),(e||s)&&this.view.win.scrollBy(e,s),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:s}=this,i=kv(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(s.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(s=>s.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function _C(t,e){let s=t.state.facet(iv);return s.length?s[0](e):De.mac?e.metaKey:e.ctrlKey}function SC(t,e){let s=t.state.facet(nv);return s.length?s[0](e):De.mac?!e.altKey:!e.ctrlKey}function CC(t,e){let{main:s}=t.state.selection;if(s.empty)return!1;let i=$r(t.root);if(!i||i.rangeCount==0)return!0;let n=i.getRangeAt(0).getClientRects();for(let o=0;o<n.length;o++){let r=n[o];if(r.left<=e.clientX&&r.right>=e.clientX&&r.top<=e.clientY&&r.bottom>=e.clientY)return!0}return!1}function AC(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let s=e.target,i;s!=t.contentDOM;s=s.parentNode)if(!s||s.nodeType==11||(i=ut.get(s))&&i.ignoreEvent(e))return!1;return!0}const ni=Object.create(null),Ws=Object.create(null),Cv=De.ie&&De.ie_version<15||De.ios&&De.webkit_version<604;function VC(t){let e=t.dom.parentNode;if(!e)return;let s=e.appendChild(document.createElement("textarea"));s.style.cssText="position: fixed; left: -10000px; top: 10px",s.focus(),setTimeout(()=>{t.focus(),s.remove(),Av(t,s.value)},50)}function su(t,e,s){for(let i of t.facet(e))s=i(s,t);return s}function Av(t,e){e=su(t.state,Gc,e);let{state:s}=t,i,n=1,o=s.toText(e),r=o.lines==s.selection.ranges.length;if(Qd!=null&&s.selection.ranges.every(a=>a.empty)&&Qd==o.toString()){let a=-1;i=s.changeByRange(d=>{let u=s.doc.lineAt(d.from);if(u.from==a)return{range:d};a=u.from;let f=s.toText((r?o.line(n++).text:e)+s.lineBreak);return{changes:{from:u.from,insert:f},range:fe.cursor(d.from+f.length)}})}else r?i=s.changeByRange(a=>{let d=o.line(n++);return{changes:{from:a.from,to:a.to,insert:d.text},range:fe.cursor(a.from+d.length)}}):i=s.replaceSelection(o);t.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}Ws.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};ni.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);Ws.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};Ws.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};ni.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let s=null;for(let i of t.state.facet(ov))if(s=i(t,e),s)break;if(!s&&e.button==0&&(s=TC(t,e)),s){let i=!t.hasFocus;t.inputState.startMouseSelection(new wC(t,e,s,i)),i&&t.observer.ignore(()=>{U0(t.contentDOM);let o=t.root.activeElement;o&&!o.contains(t.contentDOM)&&o.blur()});let n=t.inputState.mouseSelection;if(n)return n.start(e),n.dragging===!1}else t.inputState.setSelectionOrigin("select.pointer");return!1};function _p(t,e,s,i){if(i==1)return fe.cursor(e,s);if(i==2)return iC(t.state,e,s);{let n=Pt.find(t.docView,e),o=t.state.doc.lineAt(n?n.posAtEnd:e),r=n?n.posAtStart:o.from,l=n?n.posAtEnd:o.to;return l<t.state.doc.length&&l==o.to&&l++,fe.range(r,l)}}let Sp=(t,e,s)=>e>=s.top&&e<=s.bottom&&t>=s.left&&t<=s.right;function MC(t,e,s,i){let n=Pt.find(t.docView,e);if(!n)return 1;let o=e-n.posAtStart;if(o==0)return 1;if(o==n.length)return-1;let r=n.coordsAt(o,-1);if(r&&Sp(s,i,r))return-1;let l=n.coordsAt(o,1);return l&&Sp(s,i,l)?1:r&&r.bottom>=i?-1:1}function Cp(t,e){let s=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:s,bias:MC(t,s,e.clientX,e.clientY)}}const DC=De.ie&&De.ie_version<=11;let Ap=null,Vp=0,Mp=0;function Vv(t){if(!DC)return t.detail;let e=Ap,s=Mp;return Ap=t,Mp=Date.now(),Vp=!e||s>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(Vp+1)%3:1}function TC(t,e){let s=Cp(t,e),i=Vv(e),n=t.state.selection;return{update(o){o.docChanged&&(s.pos=o.changes.mapPos(s.pos),n=n.map(o.changes))},get(o,r,l){let a=Cp(t,o),d,u=_p(t,a.pos,a.bias,i);if(s.pos!=a.pos&&!r){let f=_p(t,s.pos,s.bias,i),h=Math.min(f.from,u.from),g=Math.max(f.to,u.to);u=h<u.from?fe.range(h,g):fe.range(g,h)}return r?n.replaceRange(n.main.extend(u.from,u.to)):l&&i==1&&n.ranges.length>1&&(d=$C(n,a.pos))?d:l?n.addRange(u):fe.create([u])}}}function $C(t,e){for(let s=0;s<t.ranges.length;s++){let{from:i,to:n}=t.ranges[s];if(i<=e&&n>=e)return fe.create(t.ranges.slice(0,s).concat(t.ranges.slice(s+1)),t.mainIndex==s?0:t.mainIndex-(t.mainIndex>s?1:0))}return null}ni.dragstart=(t,e)=>{let{selection:{main:s}}=t.state;if(e.target.draggable){let n=t.docView.nearest(e.target);if(n&&n.isWidget){let o=n.posAtStart,r=o+n.length;(o>=s.to||r<=s.from)&&(s=fe.range(o,r))}}let{inputState:i}=t;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=s,e.dataTransfer&&(e.dataTransfer.setData("Text",su(t.state,Jc,t.state.sliceDoc(s.from,s.to))),e.dataTransfer.effectAllowed="copyMove"),!1};ni.dragend=t=>(t.inputState.draggedContent=null,!1);function Dp(t,e,s,i){if(s=su(t.state,Gc,s),!s)return;let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:o}=t.inputState,r=i&&o&&SC(t,e)?{from:o.from,to:o.to}:null,l={from:n,insert:s},a=t.state.changes(r?[r,l]:l);t.focus(),t.dispatch({changes:a,selection:{anchor:a.mapPos(n,-1),head:a.mapPos(n,1)},userEvent:r?"move.drop":"input.drop"}),t.inputState.draggedContent=null}ni.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let s=e.dataTransfer.files;if(s&&s.length){let i=Array(s.length),n=0,o=()=>{++n==s.length&&Dp(t,e,i.filter(r=>r!=null).join(t.state.lineBreak),!1)};for(let r=0;r<s.length;r++){let l=new FileReader;l.onerror=o,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(i[r]=l.result),o()},l.readAsText(s[r])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return Dp(t,e,i,!0),!0}return!1};ni.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let s=Cv?null:e.clipboardData;return s?(Av(t,s.getData("text/plain")||s.getData("text/uri-list")),!0):(VC(t),!1)};function EC(t,e){let s=t.dom.parentNode;if(!s)return;let i=s.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),t.focus()},50)}function OC(t){let e=[],s=[],i=!1;for(let n of t.selection.ranges)n.empty||(e.push(t.sliceDoc(n.from,n.to)),s.push(n));if(!e.length){let n=-1;for(let{from:o}of t.selection.ranges){let r=t.doc.lineAt(o);r.number>n&&(e.push(r.text),s.push({from:r.from,to:Math.min(t.doc.length,r.to+1)})),n=r.number}i=!0}return{text:su(t,Jc,e.join(t.lineBreak)),ranges:s,linewise:i}}let Qd=null;ni.copy=ni.cut=(t,e)=>{let{text:s,ranges:i,linewise:n}=OC(t.state);if(!s&&!n)return!1;Qd=n?s:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let o=Cv?null:e.clipboardData;return o?(o.clearData(),o.setData("text/plain",s),!0):(EC(t,s),!1)};const Mv=zi.define();function Dv(t,e){let s=[];for(let i of t.facet(av)){let n=i(t,e);n&&s.push(n)}return s.length?t.update({effects:s,annotations:Mv.of(!0)}):null}function Tv(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let s=Dv(t.state,e);s?t.dispatch(s):t.update([])}},10)}Ws.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),Tv(t)};Ws.blur=t=>{t.observer.clearSelectionRange(),Tv(t)};Ws.compositionstart=Ws.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};Ws.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,De.chrome&&De.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};Ws.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};ni.beforeinput=(t,e)=>{var s,i;if(e.inputType=="insertReplacementText"&&t.observer.editContext){let o=(s=e.dataTransfer)===null||s===void 0?void 0:s.getData("text/plain"),r=e.getTargetRanges();if(o&&r.length){let l=r[0],a=t.posAtDOM(l.startContainer,l.startOffset),d=t.posAtDOM(l.endContainer,l.endOffset);return Xc(t,{from:a,to:d,insert:t.state.toText(o)},null),!0}}let n;if(De.chrome&&De.android&&(n=_v.find(o=>o.inputType==e.inputType))&&(t.observer.delayAndroidKey(n.key,n.keyCode),n.key=="Backspace"||n.key=="Delete")){let o=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var r;(((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0)>o+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return De.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),De.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>Ws.compositionend(t,e),20),!1};const Tp=new Set;function PC(t){Tp.has(t)||(Tp.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const $p=["pre-wrap","normal","pre-line","break-spaces"];let So=!1;function Ep(){So=!1}class jC{constructor(e){this.lineWrapping=e,this.doc=st.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,s){let i=this.doc.lineAt(s).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((s-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return $p.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let s=!1;for(let i=0;i<e.length;i++){let n=e[i];n<0?i++:this.heightSamples[Math.floor(n*10)]||(s=!0,this.heightSamples[Math.floor(n*10)]=!0)}return s}refresh(e,s,i,n,o,r){let l=$p.indexOf(e)>-1,a=Math.round(s)!=Math.round(this.lineHeight)||this.lineWrapping!=l;if(this.lineWrapping=l,this.lineHeight=s,this.charWidth=i,this.textHeight=n,this.lineLength=o,a){this.heightSamples={};for(let d=0;d<r.length;d++){let u=r[d];u<0?d++:this.heightSamples[Math.floor(u*10)]=!0}}return a}}class LC{constructor(e,s){this.from=e,this.heights=s,this.index=0}get more(){return this.index<this.heights.length}}class vi{constructor(e,s,i,n,o){this.from=e,this.length=s,this.top=i,this.height=n,this._content=o}get type(){return typeof this._content=="number"?ms.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof cn?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let s=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new vi(this.from,this.length+e.length,this.top,this.height+e.height,s)}}var kt=(function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t})(kt||(kt={}));const Ql=.001;class gs{constructor(e,s,i=2){this.length=e,this.height=s,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>Ql&&(So=!0),this.height=e)}replace(e,s,i){return gs.of(i)}decomposeLeft(e,s){s.push(this)}decomposeRight(e,s){s.push(this)}applyChanges(e,s,i,n){let o=this,r=i.doc;for(let l=n.length-1;l>=0;l--){let{fromA:a,toA:d,fromB:u,toB:f}=n[l],h=o.lineAt(a,kt.ByPosNoHeight,i.setDoc(s),0,0),g=h.to>=d?h:o.lineAt(d,kt.ByPosNoHeight,i,0,0);for(f+=g.to-d,d=g.to;l>0&&h.from<=n[l-1].toA;)a=n[l-1].fromA,u=n[l-1].fromB,l--,a<h.from&&(h=o.lineAt(a,kt.ByPosNoHeight,i,0,0));u+=h.from-a,a=h.from;let _=Zc.build(i.setDoc(r),e,u,f);o=ka(o,o.replace(a,d,_))}return o.updateHeight(i,0)}static empty(){return new Ms(0,0)}static of(e){if(e.length==1)return e[0];let s=0,i=e.length,n=0,o=0;for(;;)if(s==i)if(n>o*2){let l=e[s-1];l.break?e.splice(--s,1,l.left,null,l.right):e.splice(--s,1,l.left,l.right),i+=1+l.break,n-=l.size}else if(o>n*2){let l=e[i];l.break?e.splice(i,1,l.left,null,l.right):e.splice(i,1,l.left,l.right),i+=2+l.break,o-=l.size}else break;else if(n<o){let l=e[s++];l&&(n+=l.size)}else{let l=e[--i];l&&(o+=l.size)}let r=0;return e[s-1]==null?(r=1,s--):e[s]==null&&(r=1,i++),new RC(gs.of(e.slice(0,s)),r,gs.of(e.slice(i)))}}function ka(t,e){return t==e?t:(t.constructor!=e.constructor&&(So=!0),e)}gs.prototype.size=1;class $v extends gs{constructor(e,s,i){super(e,s),this.deco=i}blockAt(e,s,i,n){return new vi(n,this.length,i,this.height,this.deco||0)}lineAt(e,s,i,n,o){return this.blockAt(0,i,n,o)}forEachLine(e,s,i,n,o,r){e<=o+this.length&&s>=o&&r(this.blockAt(0,i,n,o))}updateHeight(e,s=0,i=!1,n){return n&&n.from<=s&&n.more&&this.setHeight(n.heights[n.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Ms extends $v{constructor(e,s){super(e,s,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,s,i,n){return new vi(n,this.length,i,this.height,this.breaks)}replace(e,s,i){let n=i[0];return i.length==1&&(n instanceof Ms||n instanceof zt&&n.flags&4)&&Math.abs(this.length-n.length)<10?(n instanceof zt?n=new Ms(n.length,this.height):n.height=this.height,this.outdated||(n.outdated=!1),n):gs.of(i)}updateHeight(e,s=0,i=!1,n){return n&&n.from<=s&&n.more?this.setHeight(n.heights[n.index++]):(i||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class zt extends gs{constructor(e){super(e,0)}heightMetrics(e,s){let i=e.doc.lineAt(s).number,n=e.doc.lineAt(s+this.length).number,o=n-i+1,r,l=0;if(e.lineWrapping){let a=Math.min(this.height,e.lineHeight*o);r=a/o,this.length>o+1&&(l=(this.height-a)/(this.length-o-1))}else r=this.height/o;return{firstLine:i,lastLine:n,perLine:r,perChar:l}}blockAt(e,s,i,n){let{firstLine:o,lastLine:r,perLine:l,perChar:a}=this.heightMetrics(s,n);if(s.lineWrapping){let d=n+(e<s.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),u=s.doc.lineAt(d),f=l+u.length*a,h=Math.max(i,e-f/2);return new vi(u.from,u.length,h,f,0)}else{let d=Math.max(0,Math.min(r-o,Math.floor((e-i)/l))),{from:u,length:f}=s.doc.line(o+d);return new vi(u,f,i+l*d,l,0)}}lineAt(e,s,i,n,o){if(s==kt.ByHeight)return this.blockAt(e,i,n,o);if(s==kt.ByPosNoHeight){let{from:g,to:_}=i.doc.lineAt(e);return new vi(g,_-g,0,0,0)}let{firstLine:r,perLine:l,perChar:a}=this.heightMetrics(i,o),d=i.doc.lineAt(e),u=l+d.length*a,f=d.number-r,h=n+l*f+a*(d.from-o-f);return new vi(d.from,d.length,Math.max(n,Math.min(h,n+this.height-u)),u,0)}forEachLine(e,s,i,n,o,r){e=Math.max(e,o),s=Math.min(s,o+this.length);let{firstLine:l,perLine:a,perChar:d}=this.heightMetrics(i,o);for(let u=e,f=n;u<=s;){let h=i.doc.lineAt(u);if(u==e){let _=h.number-l;f+=a*_+d*(e-o-_)}let g=a+d*h.length;r(new vi(h.from,h.length,f,g,0)),f+=g,u=h.to+1}}replace(e,s,i){let n=this.length-s;if(n>0){let o=i[i.length-1];o instanceof zt?i[i.length-1]=new zt(o.length+n):i.push(null,new zt(n-1))}if(e>0){let o=i[0];o instanceof zt?i[0]=new zt(e+o.length):i.unshift(new zt(e-1),null)}return gs.of(i)}decomposeLeft(e,s){s.push(new zt(e-1),null)}decomposeRight(e,s){s.push(null,new zt(this.length-e-1))}updateHeight(e,s=0,i=!1,n){let o=s+this.length;if(n&&n.from<=s+this.length&&n.more){let r=[],l=Math.max(s,n.from),a=-1;for(n.from>s&&r.push(new zt(n.from-s-1).updateHeight(e,s));l<=o&&n.more;){let u=e.doc.lineAt(l).length;r.length&&r.push(null);let f=n.heights[n.index++];a==-1?a=f:Math.abs(f-a)>=Ql&&(a=-2);let h=new Ms(u,f);h.outdated=!1,r.push(h),l+=u+1}l<=o&&r.push(null,new zt(o-l).updateHeight(e,l));let d=gs.of(r);return(a<0||Math.abs(d.height-this.height)>=Ql||Math.abs(a-this.heightMetrics(e,s).perLine)>=Ql)&&(So=!0),ka(this,d)}else(i||this.outdated)&&(this.setHeight(e.heightForGap(s,s+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class RC extends gs{constructor(e,s,i){super(e.length+s+i.length,e.height+i.height,s|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,s,i,n){let o=i+this.left.height;return e<o?this.left.blockAt(e,s,i,n):this.right.blockAt(e,s,o,n+this.left.length+this.break)}lineAt(e,s,i,n,o){let r=n+this.left.height,l=o+this.left.length+this.break,a=s==kt.ByHeight?e<r:e<l,d=a?this.left.lineAt(e,s,i,n,o):this.right.lineAt(e,s,i,r,l);if(this.break||(a?d.to<l:d.from>l))return d;let u=s==kt.ByPosNoHeight?kt.ByPosNoHeight:kt.ByPos;return a?d.join(this.right.lineAt(l,u,i,r,l)):this.left.lineAt(l,u,i,n,o).join(d)}forEachLine(e,s,i,n,o,r){let l=n+this.left.height,a=o+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,s,i,n,o,r),s>=a&&this.right.forEachLine(e,s,i,l,a,r);else{let d=this.lineAt(a,kt.ByPos,i,n,o);e<d.from&&this.left.forEachLine(e,d.from-1,i,n,o,r),d.to>=e&&d.from<=s&&r(d),s>d.to&&this.right.forEachLine(d.to+1,s,i,l,a,r)}}replace(e,s,i){let n=this.left.length+this.break;if(s<n)return this.balanced(this.left.replace(e,s,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-n,s-n,i));let o=[];e>0&&this.decomposeLeft(e,o);let r=o.length;for(let l of i)o.push(l);if(e>0&&Op(o,r-1),s<this.length){let l=o.length;this.decomposeRight(s,o),Op(o,l)}return gs.of(o)}decomposeLeft(e,s){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,s);s.push(this.left),this.break&&(i++,e>=i&&s.push(null)),e>i&&this.right.decomposeLeft(e-i,s)}decomposeRight(e,s){let i=this.left.length,n=i+this.break;if(e>=n)return this.right.decomposeRight(e-n,s);e<i&&this.left.decomposeRight(e,s),this.break&&e<n&&s.push(null),s.push(this.right)}balanced(e,s){return e.size>2*s.size||s.size>2*e.size?gs.of(this.break?[e,null,s]:[e,s]):(this.left=ka(this.left,e),this.right=ka(this.right,s),this.setHeight(e.height+s.height),this.outdated=e.outdated||s.outdated,this.size=e.size+s.size,this.length=e.length+this.break+s.length,this)}updateHeight(e,s=0,i=!1,n){let{left:o,right:r}=this,l=s+o.length+this.break,a=null;return n&&n.from<=s+o.length&&n.more?a=o=o.updateHeight(e,s,i,n):o.updateHeight(e,s,i),n&&n.from<=l+r.length&&n.more?a=r=r.updateHeight(e,l,i,n):r.updateHeight(e,l,i),a?this.balanced(o,r):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Op(t,e){let s,i;t[e]==null&&(s=t[e-1])instanceof zt&&(i=t[e+1])instanceof zt&&t.splice(e-1,3,new zt(s.length+1+i.length))}const BC=5;class Zc{constructor(e,s){this.pos=e,this.oracle=s,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,s){if(this.lineStart>-1){let i=Math.min(s,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof Ms?n.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new Ms(i-this.pos,-1)),this.writtenTo=i,s>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=s}point(e,s,i){if(e<s||i.heightRelevant){let n=i.widget?i.widget.estimatedHeight:0,o=i.widget?i.widget.lineBreaks:0;n<0&&(n=this.oracle.lineHeight);let r=s-e;i.block?this.addBlock(new $v(r,n,i)):(r||o||n>=BC)&&this.addLineDeco(n,o,r)}else s>e&&this.span(e,s);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:s}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=s,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Ms(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,s){let i=new zt(s-e);return this.oracle.doc.lineAt(e).to==s&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Ms)return e;let s=new Ms(0,-1);return this.nodes.push(s),s}addBlock(e){this.enterLine();let s=e.deco;s&&s.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,s&&s.endSide>0&&(this.covering=e)}addLineDeco(e,s,i){let n=this.ensureLine();n.length+=i,n.collapsed+=i,n.widgetHeight=Math.max(n.widgetHeight,e),n.breaks+=s,this.writtenTo=this.pos=this.pos+i}finish(e){let s=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(s instanceof Ms)&&!this.isCovered?this.nodes.push(new Ms(0,-1)):(this.writtenTo<this.pos||s==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let n of this.nodes)n instanceof Ms&&n.updateHeight(this.oracle,i),i+=n?n.length:1;return this.nodes}static build(e,s,i,n){let o=new Zc(i,e);return tt.spans(s,i,n,o,0),o.finish(i)}}function IC(t,e,s){let i=new UC;return tt.compare(t,e,s,i,0),i.changes}class UC{constructor(){this.changes=[]}compareRange(){}comparePoint(e,s,i,n){(e<s||i&&i.heightRelevant||n&&n.heightRelevant)&&Yl(e,s,this.changes,5)}}function NC(t,e){let s=t.getBoundingClientRect(),i=t.ownerDocument,n=i.defaultView||window,o=Math.max(0,s.left),r=Math.min(n.innerWidth,s.right),l=Math.max(0,s.top),a=Math.min(n.innerHeight,s.bottom);for(let d=t.parentNode;d&&d!=i.body;)if(d.nodeType==1){let u=d,f=window.getComputedStyle(u);if((u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth)&&f.overflow!="visible"){let h=u.getBoundingClientRect();o=Math.max(o,h.left),r=Math.min(r,h.right),l=Math.max(l,h.top),a=Math.min(d==t.parentNode?n.innerHeight:a,h.bottom)}d=f.position=="absolute"||f.position=="fixed"?u.offsetParent:u.parentNode}else if(d.nodeType==11)d=d.host;else break;return{left:o-s.left,right:Math.max(o,r)-s.left,top:l-(s.top+e),bottom:Math.max(l,a)-(s.top+e)}}function zC(t){let e=t.getBoundingClientRect(),s=t.ownerDocument.defaultView||window;return e.left<s.innerWidth&&e.right>0&&e.top<s.innerHeight&&e.bottom>0}function FC(t,e){let s=t.getBoundingClientRect();return{left:0,right:s.right-s.left,top:e,bottom:s.bottom-(s.top+e)}}class Lu{constructor(e,s,i,n){this.from=e,this.to=s,this.size=i,this.displaySize=n}static same(e,s){if(e.length!=s.length)return!1;for(let i=0;i<e.length;i++){let n=e[i],o=s[i];if(n.from!=o.from||n.to!=o.to||n.size!=o.size)return!1}return!0}draw(e,s){return Ne.replace({widget:new HC(this.displaySize*(s?e.scaleY:e.scaleX),s)}).range(this.from,this.to)}}class HC extends pn{constructor(e,s){super(),this.size=e,this.vertical=s}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class Pp{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=jp,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=xt.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let s=e.facet(Yc).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new jC(s),this.stateDeco=e.facet(Or).filter(i=>typeof i!="function"),this.heightMap=gs.empty().applyChanges(this.stateDeco,st.empty,this.heightOracle.setDoc(e.doc),[new zs(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Ne.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:s}=this.state.selection;for(let i=0;i<=1;i++){let n=i?s.head:s.anchor;if(!e.some(({from:o,to:r})=>n>=o&&n<=r)){let{from:o,to:r}=this.lineBlockAt(n);e.push(new Cl(o,r))}}return this.viewports=e.sort((i,n)=>i.from-n.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?jp:new ef(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(tr(e,this.scaler))})}update(e,s=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(Or).filter(u=>typeof u!="function");let n=e.changedRanges,o=zs.extendWithRanges(n,IC(i,this.stateDeco,e?e.changes:Rt.empty(this.state.doc.length))),r=this.heightMap.height,l=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);Ep(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),o),(this.heightMap.height!=r||So)&&(e.flags|=2),l?(this.scrollAnchorPos=e.changes.mapPos(l.from,-1),this.scrollAnchorHeight=l.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=r);let a=o.length?this.mapViewport(this.viewport,e.changes):this.viewport;(s&&(s.range.head<a.from||s.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,s));let d=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,e.flags|=this.updateForViewport(),(d||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),s&&(this.scrollTarget=s),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(dv)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let s=e.contentDOM,i=window.getComputedStyle(s),n=this.heightOracle,o=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?xt.RTL:xt.LTR;let r=this.heightOracle.mustRefreshForWrapping(o),l=s.getBoundingClientRect(),a=r||this.mustMeasureContent||this.contentDOMHeight!=l.height;this.contentDOMHeight=l.height,this.mustMeasureContent=!1;let d=0,u=0;if(l.width&&l.height){let{scaleX:W,scaleY:G}=I0(s,l);(W>.005&&Math.abs(this.scaleX-W)>.005||G>.005&&Math.abs(this.scaleY-G)>.005)&&(this.scaleX=W,this.scaleY=G,d|=16,r=a=!0)}let f=(parseInt(i.paddingTop)||0)*this.scaleY,h=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=f||this.paddingBottom!=h)&&(this.paddingTop=f,this.paddingBottom=h,d|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(n.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,d|=16);let g=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=g&&(this.scrollAnchorHeight=-1,this.scrollTop=g),this.scrolledToBottom=z0(e.scrollDOM);let _=(this.printing?FC:NC)(s,this.paddingTop),p=_.top-this.pixelViewport.top,V=_.bottom-this.pixelViewport.bottom;this.pixelViewport=_;let M=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(M!=this.inView&&(this.inView=M,M&&(a=!0)),!this.inView&&!this.scrollTarget&&!zC(e.dom))return 0;let N=l.width;if((this.contentDOMWidth!=N||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=l.width,this.editorHeight=e.scrollDOM.clientHeight,d|=16),a){let W=e.docView.measureVisibleLineHeights(this.viewport);if(n.mustRefreshForHeights(W)&&(r=!0),r||n.lineWrapping&&Math.abs(N-this.contentDOMWidth)>n.charWidth){let{lineHeight:G,charWidth:j,textHeight:A}=e.docView.measureTextSize();r=G>0&&n.refresh(o,G,j,A,Math.max(5,N/j),W),r&&(e.docView.minWidth=0,d|=16)}p>0&&V>0?u=Math.max(p,V):p<0&&V<0&&(u=Math.min(p,V)),Ep();for(let G of this.viewports){let j=G.from==this.viewport.from?W:e.docView.measureVisibleLineHeights(G);this.heightMap=(r?gs.empty().applyChanges(this.stateDeco,st.empty,this.heightOracle,[new zs(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(n,0,r,new LC(G.from,j))}So&&(d|=2)}let B=!this.viewportIsAppropriate(this.viewport,u)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return B&&(d&2&&(d|=this.updateScaler()),this.viewport=this.getViewport(u,this.scrollTarget),d|=this.updateForViewport()),(d&2||B)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(r?[]:this.lineGaps,e)),d|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),d}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,s){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),n=this.heightMap,o=this.heightOracle,{visibleTop:r,visibleBottom:l}=this,a=new Cl(n.lineAt(r-i*1e3,kt.ByHeight,o,0,0).from,n.lineAt(l+(1-i)*1e3,kt.ByHeight,o,0,0).to);if(s){let{head:d}=s.range;if(d<a.from||d>a.to){let u=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),f=n.lineAt(d,kt.ByPos,o,0,0),h;s.y=="center"?h=(f.top+f.bottom)/2-u/2:s.y=="start"||s.y=="nearest"&&d<a.from?h=f.top:h=f.bottom-u,a=new Cl(n.lineAt(h-1e3/2,kt.ByHeight,o,0,0).from,n.lineAt(h+u+1e3/2,kt.ByHeight,o,0,0).to)}}return a}mapViewport(e,s){let i=s.mapPos(e.from,-1),n=s.mapPos(e.to,1);return new Cl(this.heightMap.lineAt(i,kt.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(n,kt.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:s},i=0){if(!this.inView)return!0;let{top:n}=this.heightMap.lineAt(e,kt.ByPos,this.heightOracle,0,0),{bottom:o}=this.heightMap.lineAt(s,kt.ByPos,this.heightOracle,0,0),{visibleTop:r,visibleBottom:l}=this;return(e==0||n<=r-Math.max(10,Math.min(-i,250)))&&(s==this.state.doc.length||o>=l+Math.max(10,Math.min(i,250)))&&n>r-2*1e3&&o<l+2*1e3}mapLineGaps(e,s){if(!e.length||s.empty)return e;let i=[];for(let n of e)s.touchesRange(n.from,n.to)||i.push(new Lu(s.mapPos(n.from),s.mapPos(n.to),n.size,n.displaySize));return i}ensureLineGaps(e,s){let i=this.heightOracle.lineWrapping,n=i?1e4:2e3,o=n>>1,r=n<<1;if(this.defaultTextDirection!=xt.LTR&&!i)return[];let l=[],a=(u,f,h,g)=>{if(f-u<o)return;let _=this.state.selection.main,p=[_.from];_.empty||p.push(_.to);for(let M of p)if(M>u&&M<f){a(u,M-10,h,g),a(M+10,f,h,g);return}let V=qC(e,M=>M.from>=h.from&&M.to<=h.to&&Math.abs(M.from-u)<o&&Math.abs(M.to-f)<o&&!p.some(N=>M.from<N&&M.to>N));if(!V){if(f<h.to&&s&&i&&s.visibleRanges.some(B=>B.from<=f&&B.to>=f)){let B=s.moveToLineBoundary(fe.cursor(f),!1,!0).head;B>u&&(f=B)}let M=this.gapSize(h,u,f,g),N=i||M<2e6?M:2e6;V=new Lu(u,f,M,N)}l.push(V)},d=u=>{if(u.length<r||u.type!=ms.Text)return;let f=WC(u.from,u.to,this.stateDeco);if(f.total<r)return;let h=this.scrollTarget?this.scrollTarget.range.head:null,g,_;if(i){let p=n/this.heightOracle.lineLength*this.heightOracle.lineHeight,V,M;if(h!=null){let N=Vl(f,h),B=((this.visibleBottom-this.visibleTop)/2+p)/u.height;V=N-B,M=N+B}else V=(this.visibleTop-u.top-p)/u.height,M=(this.visibleBottom-u.top+p)/u.height;g=Al(f,V),_=Al(f,M)}else{let p=f.total*this.heightOracle.charWidth,V=n*this.heightOracle.charWidth,M=0;if(p>2e6)for(let j of e)j.from>=u.from&&j.from<u.to&&j.size!=j.displaySize&&j.from*this.heightOracle.charWidth+M<this.pixelViewport.left&&(M=j.size-j.displaySize);let N=this.pixelViewport.left+M,B=this.pixelViewport.right+M,W,G;if(h!=null){let j=Vl(f,h),A=((B-N)/2+V)/p;W=j-A,G=j+A}else W=(N-V)/p,G=(B+V)/p;g=Al(f,W),_=Al(f,G)}g>u.from&&a(u.from,g,u,f),_<u.to&&a(_,u.to,u,f)};for(let u of this.viewportLines)Array.isArray(u.type)?u.type.forEach(d):d(u);return l}gapSize(e,s,i,n){let o=Vl(n,i)-Vl(n,s);return this.heightOracle.lineWrapping?e.height*o:n.total*this.heightOracle.charWidth*o}updateLineGaps(e){Lu.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Ne.set(e.map(s=>s.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let s=this.stateDeco;this.lineGaps.length&&(s=s.concat(this.lineGapDeco));let i=[];tt.spans(s,this.viewport.from,this.viewport.to,{span(o,r){i.push({from:o,to:r})},point(){}},20);let n=0;if(i.length!=this.visibleRanges.length)n=12;else for(let o=0;o<i.length&&!(n&8);o++){let r=this.visibleRanges[o],l=i[o];(r.from!=l.from||r.to!=l.to)&&(n|=4,e&&e.mapPos(r.from,-1)==l.from&&e.mapPos(r.to,1)==l.to||(n|=8))}return this.visibleRanges=i,n}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(s=>s.from<=e&&s.to>=e)||tr(this.heightMap.lineAt(e,kt.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(s=>s.top<=e&&s.bottom>=e)||tr(this.heightMap.lineAt(this.scaler.fromDOM(e),kt.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let s=this.lineBlockAtHeight(e+8);return s.from>=this.viewport.from||this.viewportLines[0].top-e>200?s:this.viewportLines[0]}elementAtHeight(e){return tr(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Cl{constructor(e,s){this.from=e,this.to=s}}function WC(t,e,s){let i=[],n=t,o=0;return tt.spans(s,t,e,{span(){},point(r,l){r>n&&(i.push({from:n,to:r}),o+=r-n),n=l}},20),n<e&&(i.push({from:n,to:e}),o+=e-n),{total:o,ranges:i}}function Al({total:t,ranges:e},s){if(s<=0)return e[0].from;if(s>=1)return e[e.length-1].to;let i=Math.floor(t*s);for(let n=0;;n++){let{from:o,to:r}=e[n],l=r-o;if(i<=l)return o+i;i-=l}}function Vl(t,e){let s=0;for(let{from:i,to:n}of t.ranges){if(e<=n){s+=e-i;break}s+=n-i}return s/t.total}function qC(t,e){for(let s of t)if(e(s))return s}const jp={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class ef{constructor(e,s,i){let n=0,o=0,r=0;this.viewports=i.map(({from:l,to:a})=>{let d=s.lineAt(l,kt.ByPos,e,0,0).top,u=s.lineAt(a,kt.ByPos,e,0,0).bottom;return n+=u-d,{from:l,to:a,top:d,bottom:u,domTop:0,domBottom:0}}),this.scale=(7e6-n)/(s.height-n);for(let l of this.viewports)l.domTop=r+(l.top-o)*this.scale,r=l.domBottom=l.domTop+(l.bottom-l.top),o=l.bottom}toDOM(e){for(let s=0,i=0,n=0;;s++){let o=s<this.viewports.length?this.viewports[s]:null;if(!o||e<o.top)return n+(e-i)*this.scale;if(e<=o.bottom)return o.domTop+(e-o.top);i=o.bottom,n=o.domBottom}}fromDOM(e){for(let s=0,i=0,n=0;;s++){let o=s<this.viewports.length?this.viewports[s]:null;if(!o||e<o.domTop)return i+(e-n)/this.scale;if(e<=o.domBottom)return o.top+(e-o.domTop);i=o.bottom,n=o.domBottom}}eq(e){return e instanceof ef?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((s,i)=>s.from==e.viewports[i].from&&s.to==e.viewports[i].to):!1}}function tr(t,e){if(e.scale==1)return t;let s=e.toDOM(t.top),i=e.toDOM(t.bottom);return new vi(t.from,t.length,s,i-s,Array.isArray(t._content)?t._content.map(n=>tr(n,e)):t._content)}const Ml=$e.define({combine:t=>t.join(" ")}),Xd=$e.define({combine:t=>t.indexOf(!0)>-1}),Zd=un.newName(),Ev=un.newName(),Ov=un.newName(),Pv={"&light":"."+Ev,"&dark":"."+Ov};function ec(t,e,s){return new un(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,n=>{if(n=="&")return t;if(!s||!s[n])throw new RangeError(`Unsupported selector: ${n}`);return s[n]}):t+" "+i}})}const KC=ec("."+Zd,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Pv),GC={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Ru=De.ie&&De.ie_version<=11;class JC{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new $S,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(s=>{for(let i of s)this.queue.push(i);(De.ie&&De.ie_version<=11||De.ios&&e.composing)&&s.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&De.android&&e.constructor.EDIT_CONTEXT!==!1&&!(De.chrome&&De.chrome_version<126)&&(this.editContext=new QC(e),e.state.facet(Pi)&&(e.contentDOM.editContext=this.editContext.editContext)),Ru&&(this.onCharData=s=>{this.queue.push({target:s.target,type:"characterData",oldValue:s.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var s;((s=this.view.docView)===null||s===void 0?void 0:s.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(s=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),s.length>0&&s[s.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(s=>{s.length>0&&s[s.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((s,i)=>s!=e[i]))){this.gapIntersection.disconnect();for(let s of e)this.gapIntersection.observe(s);this.gaps=e}}onSelectionChange(e){let s=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,n=this.selectionRange;if(i.state.facet(Pi)?i.root.activeElement!=this.dom:!Jl(this.dom,n))return;let o=n.anchorNode&&i.docView.nearest(n.anchorNode);if(o&&o.ignoreEvent(e)){s||(this.selectionChanged=!1);return}(De.ie&&De.ie_version<=11||De.android&&De.chrome)&&!i.state.selection.main.empty&&n.focusNode&&hr(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,s=$r(e.root);if(!s)return!1;let i=De.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&YC(this.view,s)||s;if(!i||this.selectionRange.eq(i))return!1;let n=Jl(this.dom,i);return n&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&OS(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),n&&(this.selectionChanged=!0),!0)}setSelectionRange(e,s){this.selectionRange.set(e.node,e.offset,s.node,s.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,s=null;for(let i=this.dom;i;)if(i.nodeType==1)!s&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:s||(s=this.scrollTargets.slice(0,e)),s&&s.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!s&&(s=this.scrollTargets.slice(0,e)),s){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=s)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,GC),Ru&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Ru&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,s){var i;if(!this.delayedAndroidKey){let n=()=>{let o=this.delayedAndroidKey;o&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=o.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&o.force&&ho(this.dom,o.key,o.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(n)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:s,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let s=-1,i=-1,n=!1;for(let o of e){let r=this.readMutation(o);r&&(r.typeOver&&(n=!0),s==-1?{from:s,to:i}=r:(s=Math.min(r.from,s),i=Math.max(r.to,i)))}return{from:s,to:i,typeOver:n}}readChange(){let{from:e,to:s,typeOver:i}=this.processRecords(),n=this.selectionChanged&&Jl(this.dom,this.selectionRange);if(e<0&&!n)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let o=new pC(this.view,e,s,i);return this.view.docView.domChanged={newSel:o.newSel?o.newSel.main:null},o}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let s=this.readChange();if(!s)return this.view.requestMeasure(),!1;let i=this.view.state,n=xv(this.view,s);return this.view.state==i&&(s.domChanged||s.newSel&&!s.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),n}readMutation(e){let s=this.view.docView.nearest(e.target);if(!s||s.ignoreMutation(e))return null;if(s.markDirty(e.type=="attributes"),e.type=="attributes"&&(s.flags|=4),e.type=="childList"){let i=Lp(s,e.previousSibling||e.target.previousSibling,-1),n=Lp(s,e.nextSibling||e.target.nextSibling,1);return{from:i?s.posAfter(i):s.posAtStart,to:n?s.posBefore(n):s.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:s.posAtStart,to:s.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Pi)!=e.state.facet(Pi)&&(e.view.contentDOM.editContext=e.state.facet(Pi)?this.editContext.editContext:null))}destroy(){var e,s,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(s=this.gapIntersection)===null||s===void 0||s.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function Lp(t,e,s){for(;e;){let i=ut.get(e);if(i&&i.parent==t)return i;let n=e.parentNode;e=n!=t.dom?n:s>0?e.nextSibling:e.previousSibling}return null}function Rp(t,e){let s=e.startContainer,i=e.startOffset,n=e.endContainer,o=e.endOffset,r=t.docView.domAtPos(t.state.selection.main.anchor);return hr(r.node,r.offset,n,o)&&([s,i,n,o]=[n,o,s,i]),{anchorNode:s,anchorOffset:i,focusNode:n,focusOffset:o}}function YC(t,e){if(e.getComposedRanges){let n=e.getComposedRanges(t.root)[0];if(n)return Rp(t,n)}let s=null;function i(n){n.preventDefault(),n.stopImmediatePropagation(),s=n.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",i,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",i,!0),s?Rp(t,s):null}class QC{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let s=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let n=e.state.selection.main,{anchor:o,head:r}=n,l=this.toEditorPos(i.updateRangeStart),a=this.toEditorPos(i.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:l,drifted:!1});let d=a-l>i.text.length;l==this.from&&o<this.from?l=o:a==this.to&&o>this.to&&(a=o);let u=wv(e.state.sliceDoc(l,a),i.text,(d?n.from:n.to)-l,d?"end":null);if(!u){let h=fe.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd));h.main.eq(n)||e.dispatch({selection:h,userEvent:"select"});return}let f={from:u.from+l,to:u.toA+l,insert:st.of(i.text.slice(u.from,u.toB).split(`
`))};if((De.mac||De.android)&&f.from==r-1&&/^\. ?$/.test(i.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(f={from:l,to:a,insert:st.of([i.text.replace("."," ")])}),this.pendingContextChange=f,!e.state.readOnly){let h=this.to-this.from+(f.to-f.from+f.insert.length);Xc(e,f,fe.single(this.toEditorPos(i.selectionStart,h),this.toEditorPos(i.selectionEnd,h)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),f.from<f.to&&!f.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(s.text.slice(Math.max(0,i.updateRangeStart-1),Math.min(s.text.length,i.updateRangeStart+1)))&&this.handlers.compositionend(i)},this.handlers.characterboundsupdate=i=>{let n=[],o=null;for(let r=this.toEditorPos(i.rangeStart),l=this.toEditorPos(i.rangeEnd);r<l;r++){let a=e.coordsForChar(r);o=a&&new DOMRect(a.left,a.top,a.right-a.left,a.bottom-a.top)||o||new DOMRect,n.push(o)}s.updateCharacterBounds(i.rangeStart,n)},this.handlers.textformatupdate=i=>{let n=[];for(let o of i.getTextFormats()){let r=o.underlineStyle,l=o.underlineThickness;if(!/none/i.test(r)&&!/none/i.test(l)){let a=this.toEditorPos(o.rangeStart),d=this.toEditorPos(o.rangeEnd);if(a<d){let u=`text-decoration: underline ${/^[a-z]/.test(r)?r+" ":r=="Dashed"?"dashed ":r=="Squiggle"?"wavy ":""}${/thin/i.test(l)?1:2}px`;n.push(Ne.mark({attributes:{style:u}}).range(a,d))}}}e.dispatch({effects:fv.of(Ne.set(n))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:i}=this.composing;this.composing=null,i&&this.reset(e.state)}};for(let i in this.handlers)s.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let n=$r(i.root);n&&n.rangeCount&&this.editContext.updateSelectionBounds(n.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let s=0,i=!1,n=this.pendingContextChange;return e.changes.iterChanges((o,r,l,a,d)=>{if(i)return;let u=d.length-(r-o);if(n&&r>=n.to)if(n.from==o&&n.to==r&&n.insert.eq(d)){n=this.pendingContextChange=null,s+=u,this.to+=u;return}else n=null,this.revertPending(e.state);if(o+=s,r+=s,r<=this.from)this.from+=u,this.to+=u;else if(o<this.to){if(o<this.from||r>this.to||this.to-this.from+d.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(o),this.toContextPos(r),d.toString()),this.to+=u}s+=u}),n&&!i&&this.revertPending(e.state),!i}update(e){let s=this.pendingContextChange,i=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(i.from,i.to)&&e.transactions.some(n=>!n.isUserEvent("input.type")&&n.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||s)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:s}=e.selection.main;this.from=Math.max(0,s-1e4),this.to=Math.min(e.doc.length,s+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let s=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(s.from),this.toContextPos(s.from+s.insert.length),e.doc.sliceString(s.from,s.to))}setSelection(e){let{main:s}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,s.anchor))),n=this.toContextPos(s.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=n)&&this.editContext.updateSelection(i,n)}rangeIsValid(e){let{head:s}=e.selection.main;return!(this.from>0&&s-this.from<500||this.to<e.doc.length&&this.to-s<500||this.to-this.from>1e4*3)}toEditorPos(e,s=this.to-this.from){e=Math.min(e,s);let i=this.composing;return i&&i.drifted?i.editorBase+(e-i.contextBase):e+this.from}toContextPos(e){let s=this.composing;return s&&s.drifted?s.contextBase+(e-s.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class Te{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var s;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(n=>n.forEach(o=>i(o,this)))||(n=>this.update(n)),this.dispatch=this.dispatch.bind(this),this._root=e.root||ES(e.parent)||document,this.viewState=new Pp(e.state||et.create(e)),e.scrollTo&&e.scrollTo.is(wl)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(eo).map(n=>new Ou(n));for(let n of this.plugins)n.update(this);this.observer=new JC(this),this.inputState=new yC(this),this.inputState.ensureHandlers(this.plugins),this.docView=new mp(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((s=document.fonts)===null||s===void 0)&&s.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let s=e.length==1&&e[0]instanceof Bt?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(s,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let s=!1,i=!1,n,o=this.state;for(let h of e){if(h.startState!=o)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");o=h.state}if(this.destroyed){this.viewState.state=o;return}let r=this.hasFocus,l=0,a=null;e.some(h=>h.annotation(Mv))?(this.inputState.notifiedFocused=r,l=1):r!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=r,a=Dv(o,r),a||(l=1));let d=this.observer.delayedAndroidKey,u=null;if(d?(this.observer.clearDelayedAndroidKey(),u=this.observer.readChange(),(u&&!this.state.doc.eq(o.doc)||!this.state.selection.eq(o.selection))&&(u=null)):this.observer.clear(),o.facet(et.phrases)!=this.state.facet(et.phrases))return this.setState(o);n=ba.create(this,o,e),n.flags|=l;let f=this.viewState.scrollTarget;try{this.updateState=2;for(let h of e){if(f&&(f=f.map(h.changes)),h.scrollIntoView){let{main:g}=h.state.selection;f=new po(g.empty?g:fe.cursor(g.head,g.head>g.anchor?-1:1))}for(let g of h.effects)g.is(wl)&&(f=g.value.clip(this.state))}this.viewState.update(n,f),this.bidiCache=xa.update(this.bidiCache,n.changes),n.empty||(this.updatePlugins(n),this.inputState.update(n)),s=this.docView.update(n),this.state.facet(Zo)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(s,e.some(h=>h.isUserEvent("select.pointer")))}finally{this.updateState=0}if(n.startState.facet(Ml)!=n.state.facet(Ml)&&(this.viewState.mustMeasureContent=!0),(s||i||f||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),s&&this.docViewUpdate(),!n.empty)for(let h of this.state.facet(Gd))try{h(n)}catch(g){ws(this.state,g,"update listener")}(a||u)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),u&&!xv(this,u)&&d.force&&ho(this.contentDOM,d.key,d.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let s=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new Pp(e),this.plugins=e.facet(eo).map(i=>new Ou(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new mp(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}s&&this.focus(),this.requestMeasure()}updatePlugins(e){let s=e.startState.facet(eo),i=e.state.facet(eo);if(s!=i){let n=[];for(let o of i){let r=s.indexOf(o);if(r<0)n.push(new Ou(o));else{let l=this.plugins[r];l.mustUpdate=e,n.push(l)}}for(let o of this.plugins)o.mustUpdate!=e&&o.destroy(this);this.plugins=n,this.pluginMap.clear()}else for(let n of this.plugins)n.mustUpdate=e;for(let n=0;n<this.plugins.length;n++)this.plugins[n].update(this);s!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let s=e.value;if(s&&s.docViewUpdate)try{s.docViewUpdate(this)}catch(i){ws(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let s=null,i=this.scrollDOM,n=i.scrollTop*this.scaleY,{scrollAnchorPos:o,scrollAnchorHeight:r}=this.viewState;Math.abs(n-this.viewState.scrollTop)>1&&(r=-1),this.viewState.scrollAnchorHeight=-1;try{for(let l=0;;l++){if(r<0)if(z0(i))o=-1,r=this.viewState.heightMap.height;else{let g=this.viewState.scrollAnchorAt(n);o=g.from,r=g.top}this.updateState=1;let a=this.viewState.measure(this);if(!a&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let d=[];a&4||([this.measureRequests,d]=[d,this.measureRequests]);let u=d.map(g=>{try{return g.read(this)}catch(_){return ws(this.state,_),Bp}}),f=ba.create(this,this.state,[]),h=!1;f.flags|=a,s?s.flags|=a:s=f,this.updateState=2,f.empty||(this.updatePlugins(f),this.inputState.update(f),this.updateAttrs(),h=this.docView.update(f),h&&this.docViewUpdate());for(let g=0;g<d.length;g++)if(u[g]!=Bp)try{let _=d[g];_.write&&_.write(u[g],this)}catch(_){ws(this.state,_)}if(h&&this.docView.updateSelection(!0),!f.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,r=-1;continue}else{let _=(o<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(o).top)-r;if(_>1||_<-1){n=n+_,i.scrollTop=n/this.scaleY,r=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(s&&!s.empty)for(let l of this.state.facet(Gd))l(s)}get themeClasses(){return Zd+" "+(this.state.facet(Xd)?Ov:Ev)+" "+this.state.facet(Ml)}updateAttrs(){let e=Ip(this,hv,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),s={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(Pi)?"true":"false",class:"cm-content",style:`${De.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(s["aria-readonly"]="true"),Ip(this,Yc,s);let i=this.observer.ignore(()=>{let n=Fd(this.contentDOM,this.contentAttrs,s),o=Fd(this.dom,this.editorAttrs,e);return n||o});return this.editorAttrs=e,this.contentAttrs=s,i}showAnnouncements(e){let s=!0;for(let i of e)for(let n of i.effects)if(n.is(Te.announce)){s&&(this.announceDOM.textContent=""),s=!1;let o=this.announceDOM.appendChild(document.createElement("div"));o.textContent=n.value}}mountStyles(){this.styleModules=this.state.facet(Zo);let e=this.state.facet(Te.cspNonce);un.mount(this.root,this.styleModules.concat(KC).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let s=0;s<this.measureRequests.length;s++)if(this.measureRequests[s].key===e.key){this.measureRequests[s]=e;return}}this.measureRequests.push(e)}}plugin(e){let s=this.pluginMap.get(e);return(s===void 0||s&&s.plugin!=e)&&this.pluginMap.set(e,s=this.plugins.find(i=>i.plugin==e)||null),s&&s.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,s,i){return ju(this,e,kp(this,e,s,i))}moveByGroup(e,s){return ju(this,e,kp(this,e,s,i=>uC(this,e.head,i)))}visualLineSide(e,s){let i=this.bidiSpans(e),n=this.textDirectionAt(e.from),o=i[s?i.length-1:0];return fe.cursor(o.side(s,n)+e.from,o.forward(!s,n)?1:-1)}moveToLineBoundary(e,s,i=!0){return aC(this,e,s,i)}moveVertically(e,s,i){return ju(this,e,dC(this,e,s,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,s=0){return this.docView.posFromDOM(e,s)}posAtCoords(e,s=!0){return this.readMeasured(),yv(this,e,s)}coordsAtPos(e,s=1){this.readMeasured();let i=this.docView.coordsAt(e,s);if(!i||i.left==i.right)return i;let n=this.state.doc.lineAt(e),o=this.bidiSpans(n),r=o[en.find(o,e-n.from,-1,s)];return tu(i,r.dir==xt.LTR==s>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(uv)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>XC)return tv(e.length);let s=this.textDirectionAt(e.from),i;for(let o of this.bidiCache)if(o.from==e.from&&o.dir==s&&(o.fresh||ev(o.isolates,i=pp(this,e))))return o.order;i||(i=pp(this,e));let n=qS(e.text,s,i);return this.bidiCache.push(new xa(e.from,e.to,s,i,!0,n)),n}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||De.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{U0(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,s={}){return wl.of(new po(typeof e=="number"?fe.cursor(e):e,s.y,s.x,s.yMargin,s.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:s}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return wl.of(new po(fe.cursor(i.from),"start","start",i.top-e,s,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return jt.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return jt.define(()=>({}),{eventObservers:e})}static theme(e,s){let i=un.newName(),n=[Ml.of(i),Zo.of(ec(`.${i}`,e))];return s&&s.dark&&n.push(Xd.of(!0)),n}static baseTheme(e){return Hn.lowest(Zo.of(ec("."+Zd,e,Pv)))}static findFromDOM(e){var s;let i=e.querySelector(".cm-content"),n=i&&ut.get(i)||ut.get(e);return((s=n?.rootView)===null||s===void 0?void 0:s.view)||null}}Te.styleModule=Zo;Te.inputHandler=lv;Te.clipboardInputFilter=Gc;Te.clipboardOutputFilter=Jc;Te.scrollHandler=cv;Te.focusChangeEffect=av;Te.perLineTextDirection=uv;Te.exceptionSink=rv;Te.updateListener=Gd;Te.editable=Pi;Te.mouseSelectionStyle=ov;Te.dragMovesSelection=nv;Te.clickAddsSelectionRange=iv;Te.decorations=Or;Te.outerDecorations=pv;Te.atomicRanges=Qr;Te.bidiIsolatedRanges=mv;Te.scrollMargins=gv;Te.darkTheme=Xd;Te.cspNonce=$e.define({combine:t=>t.length?t[0]:""});Te.contentAttributes=Yc;Te.editorAttributes=hv;Te.lineWrapping=Te.contentAttributes.of({class:"cm-lineWrapping"});Te.announce=We.define();const XC=4096,Bp={};class xa{constructor(e,s,i,n,o,r){this.from=e,this.to=s,this.dir=i,this.isolates=n,this.fresh=o,this.order=r}static update(e,s){if(s.empty&&!e.some(o=>o.fresh))return e;let i=[],n=e.length?e[e.length-1].dir:xt.LTR;for(let o=Math.max(0,e.length-10);o<e.length;o++){let r=e[o];r.dir==n&&!s.touchesRange(r.from,r.to)&&i.push(new xa(s.mapPos(r.from,1),s.mapPos(r.to,-1),r.dir,r.isolates,!1,r.order))}return i}}function Ip(t,e,s){for(let i=t.state.facet(e),n=i.length-1;n>=0;n--){let o=i[n],r=typeof o=="function"?o(t):o;r&&zd(r,s)}return s}const ZC=De.mac?"mac":De.windows?"win":De.linux?"linux":"key";function e5(t,e){const s=t.split(/-(?!$)/);let i=s[s.length-1];i=="Space"&&(i=" ");let n,o,r,l;for(let a=0;a<s.length-1;++a){const d=s[a];if(/^(cmd|meta|m)$/i.test(d))l=!0;else if(/^a(lt)?$/i.test(d))n=!0;else if(/^(c|ctrl|control)$/i.test(d))o=!0;else if(/^s(hift)?$/i.test(d))r=!0;else if(/^mod$/i.test(d))e=="mac"?l=!0:o=!0;else throw new Error("Unrecognized modifier name: "+d)}return n&&(i="Alt-"+i),o&&(i="Ctrl-"+i),l&&(i="Meta-"+i),r&&(i="Shift-"+i),i}function Dl(t,e,s){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),s!==!1&&e.shiftKey&&(t="Shift-"+t),t}const t5=Hn.default(Te.domEventHandlers({keydown(t,e){return Lv(jv(e.state),t,e,"editor")}})),tf=$e.define({enables:t5}),Up=new WeakMap;function jv(t){let e=t.facet(tf),s=Up.get(e);return s||Up.set(e,s=n5(e.reduce((i,n)=>i.concat(n),[]))),s}function s5(t,e,s){return Lv(jv(t.state),e,t,s)}let Yi=null;const i5=4e3;function n5(t,e=ZC){let s=Object.create(null),i=Object.create(null),n=(r,l)=>{let a=i[r];if(a==null)i[r]=l;else if(a!=l)throw new Error("Key binding "+r+" is used both as a regular binding and as a multi-stroke prefix")},o=(r,l,a,d,u)=>{var f,h;let g=s[r]||(s[r]=Object.create(null)),_=l.split(/ (?!$)/).map(M=>e5(M,e));for(let M=1;M<_.length;M++){let N=_.slice(0,M).join(" ");n(N,!0),g[N]||(g[N]={preventDefault:!0,stopPropagation:!1,run:[B=>{let W=Yi={view:B,prefix:N,scope:r};return setTimeout(()=>{Yi==W&&(Yi=null)},i5),!0}]})}let p=_.join(" ");n(p,!1);let V=g[p]||(g[p]={preventDefault:!1,stopPropagation:!1,run:((h=(f=g._any)===null||f===void 0?void 0:f.run)===null||h===void 0?void 0:h.slice())||[]});a&&V.run.push(a),d&&(V.preventDefault=!0),u&&(V.stopPropagation=!0)};for(let r of t){let l=r.scope?r.scope.split(" "):["editor"];if(r.any)for(let d of l){let u=s[d]||(s[d]=Object.create(null));u._any||(u._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:f}=r;for(let h in u)u[h].run.push(g=>f(g,tc))}let a=r[e]||r.key;if(a)for(let d of l)o(d,a,r.run,r.preventDefault,r.stopPropagation),r.shift&&o(d,"Shift-"+a,r.shift,r.preventDefault,r.stopPropagation)}return s}let tc=null;function Lv(t,e,s,i){tc=e;let n=AS(e),o=ks(n,0),r=gi(o)==n.length&&n!=" ",l="",a=!1,d=!1,u=!1;Yi&&Yi.view==s&&Yi.scope==i&&(l=Yi.prefix+" ",Sv.indexOf(e.keyCode)<0&&(d=!0,Yi=null));let f=new Set,h=V=>{if(V){for(let M of V.run)if(!f.has(M)&&(f.add(M),M(s)))return V.stopPropagation&&(u=!0),!0;V.preventDefault&&(V.stopPropagation&&(u=!0),d=!0)}return!1},g=t[i],_,p;return g&&(h(g[l+Dl(n,e,!r)])?a=!0:r&&(e.altKey||e.metaKey||e.ctrlKey)&&!(De.windows&&e.ctrlKey&&e.altKey)&&!(De.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(_=dn[e.keyCode])&&_!=n?(h(g[l+Dl(_,e,!0)])||e.shiftKey&&(p=Tr[e.keyCode])!=n&&p!=_&&h(g[l+Dl(p,e,!1)]))&&(a=!0):r&&e.shiftKey&&h(g[l+Dl(n,e,!0)])&&(a=!0),!a&&h(g._any)&&(a=!0)),d&&(a=!0),a&&u&&e.stopPropagation(),tc=null,a}class Xr{constructor(e,s,i,n,o){this.className=e,this.left=s,this.top=i,this.width=n,this.height=o}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,s){return s.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,s,i){if(i.empty){let n=e.coordsAtPos(i.head,i.assoc||1);if(!n)return[];let o=Rv(e);return[new Xr(s,n.left-o.left,n.top-o.top,null,n.bottom-n.top)]}else return o5(e,s,i)}}function Rv(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==xt.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function Np(t,e,s,i){let n=t.coordsAtPos(e,s*2);if(!n)return i;let o=t.dom.getBoundingClientRect(),r=(n.top+n.bottom)/2,l=t.posAtCoords({x:o.left+1,y:r}),a=t.posAtCoords({x:o.right-1,y:r});return l==null||a==null?i:{from:Math.max(i.from,Math.min(l,a)),to:Math.min(i.to,Math.max(l,a))}}function o5(t,e,s){if(s.to<=t.viewport.from||s.from>=t.viewport.to)return[];let i=Math.max(s.from,t.viewport.from),n=Math.min(s.to,t.viewport.to),o=t.textDirection==xt.LTR,r=t.contentDOM,l=r.getBoundingClientRect(),a=Rv(t),d=r.querySelector(".cm-line"),u=d&&window.getComputedStyle(d),f=l.left+(u?parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)):0),h=l.right-(u?parseInt(u.paddingRight):0),g=Yd(t,i,1),_=Yd(t,n,-1),p=g.type==ms.Text?g:null,V=_.type==ms.Text?_:null;if(p&&(t.lineWrapping||g.widgetLineBreaks)&&(p=Np(t,i,1,p)),V&&(t.lineWrapping||_.widgetLineBreaks)&&(V=Np(t,n,-1,V)),p&&V&&p.from==V.from&&p.to==V.to)return N(B(s.from,s.to,p));{let G=p?B(s.from,null,p):W(g,!1),j=V?B(null,s.to,V):W(_,!0),A=[];return(p||g).to<(V||_).from-(p&&V?1:0)||g.widgetLineBreaks>1&&G.bottom+t.defaultLineHeight/2<j.top?A.push(M(f,G.bottom,h,j.top)):G.bottom<j.top&&t.elementAtHeight((G.bottom+j.top)/2).type==ms.Text&&(G.bottom=j.top=(G.bottom+j.top)/2),N(G).concat(A).concat(N(j))}function M(G,j,A,J){return new Xr(e,G-a.left,j-a.top,A-G,J-j)}function N({top:G,bottom:j,horizontal:A}){let J=[];for(let ee=0;ee<A.length;ee+=2)J.push(M(A[ee],G,A[ee+1],j));return J}function B(G,j,A){let J=1e9,ee=-1e9,me=[];function te(le,ve,Y,X,Q){let Ee=t.coordsAtPos(le,le==A.to?-2:2),E=t.coordsAtPos(Y,Y==A.from?2:-2);!Ee||!E||(J=Math.min(Ee.top,E.top,J),ee=Math.max(Ee.bottom,E.bottom,ee),Q==xt.LTR?me.push(o&&ve?f:Ee.left,o&&X?h:E.right):me.push(!o&&X?f:E.left,!o&&ve?h:Ee.right))}let F=G??A.from,ce=j??A.to;for(let le of t.visibleRanges)if(le.to>F&&le.from<ce)for(let ve=Math.max(le.from,F),Y=Math.min(le.to,ce);;){let X=t.state.doc.lineAt(ve);for(let Q of t.bidiSpans(X)){let Ee=Q.from+X.from,E=Q.to+X.from;if(Ee>=Y)break;E>ve&&te(Math.max(Ee,ve),G==null&&Ee<=F,Math.min(E,Y),j==null&&E>=ce,Q.dir)}if(ve=X.to+1,ve>=Y)break}return me.length==0&&te(F,G==null,ce,j==null,t.textDirection),{top:J,bottom:ee,horizontal:me}}function W(G,j){let A=l.top+(j?G.top:G.bottom);return{top:A,bottom:A,horizontal:[]}}}function r5(t,e){return t.constructor==e.constructor&&t.eq(e)}class l5{constructor(e,s){this.view=e,this.layer=s,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),s.above&&this.dom.classList.add("cm-layer-above"),s.class&&this.dom.classList.add(s.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),s.mount&&s.mount(this.dom,e)}update(e){e.startState.facet(Xl)!=e.state.facet(Xl)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let s=0,i=e.facet(Xl);for(;s<i.length&&i[s]!=this.layer;)s++;this.dom.style.zIndex=String((this.layer.above?150:-1)-s)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:s}=this.view;(e!=this.scaleX||s!=this.scaleY)&&(this.scaleX=e,this.scaleY=s,this.dom.style.transform=`scale(${1/e}, ${1/s})`)}draw(e){if(e.length!=this.drawn.length||e.some((s,i)=>!r5(s,this.drawn[i]))){let s=this.dom.firstChild,i=0;for(let n of e)n.update&&s&&n.constructor&&this.drawn[i].constructor&&n.update(s,this.drawn[i])?(s=s.nextSibling,i++):this.dom.insertBefore(n.draw(),s);for(;s;){let n=s.nextSibling;s.remove(),s=n}this.drawn=e,De.safari&&De.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Xl=$e.define();function Bv(t){return[jt.define(e=>new l5(e,t)),Xl.of(t)]}const Pr=$e.define({combine(t){return Si(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,s)=>Math.min(e,s),drawRangeCursor:(e,s)=>e||s})}});function a5(t={}){return[Pr.of(t),u5,d5,c5,dv.of(!0)]}function Iv(t){return t.startState.facet(Pr)!=t.state.facet(Pr)}const u5=Bv({above:!0,markers(t){let{state:e}=t,s=e.facet(Pr),i=[];for(let n of e.selection.ranges){let o=n==e.selection.main;if(n.empty||s.drawRangeCursor){let r=o?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",l=n.empty?n:fe.cursor(n.head,n.head>n.anchor?-1:1);for(let a of Xr.forRange(t,r,l))i.push(a)}}return i},update(t,e){t.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let s=Iv(t);return s&&zp(t.state,e),t.docChanged||t.selectionSet||s},mount(t,e){zp(e.state,t)},class:"cm-cursorLayer"});function zp(t,e){e.style.animationDuration=t.facet(Pr).cursorBlinkRate+"ms"}const d5=Bv({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:Xr.forRange(t,"cm-selectionBackground",e)).reduce((e,s)=>e.concat(s))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||Iv(t)},class:"cm-selectionLayer"}),c5=Hn.highest(Te.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),Uv=We.define({map(t,e){return t==null?null:e.mapPos(t)}}),sr=Jt.define({create(){return null},update(t,e){return t!=null&&(t=e.changes.mapPos(t)),e.effects.reduce((s,i)=>i.is(Uv)?i.value:s,t)}}),f5=jt.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let s=t.state.field(sr);s==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(sr)!=s||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:t}=this,e=t.state.field(sr),s=e!=null&&t.coordsAtPos(e);if(!s)return null;let i=t.scrollDOM.getBoundingClientRect();return{left:s.left-i.left+t.scrollDOM.scrollLeft*t.scaleX,top:s.top-i.top+t.scrollDOM.scrollTop*t.scaleY,height:s.bottom-s.top}}drawCursor(t){if(this.cursor){let{scaleX:e,scaleY:s}=this.view;t?(this.cursor.style.left=t.left/e+"px",this.cursor.style.top=t.top/s+"px",this.cursor.style.height=t.height/s+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(sr)!=t&&this.view.dispatch({effects:Uv.of(t)})}},{eventObservers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){(t.target==this.view.contentDOM||!this.view.contentDOM.contains(t.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function h5(){return[sr,f5]}function Fp(t,e,s,i,n){e.lastIndex=0;for(let o=t.iterRange(s,i),r=s,l;!o.next().done;r+=o.value.length)if(!o.lineBreak)for(;l=e.exec(o.value);)n(r+l.index,l)}function p5(t,e){let s=t.visibleRanges;if(s.length==1&&s[0].from==t.viewport.from&&s[0].to==t.viewport.to)return s;let i=[];for(let{from:n,to:o}of s)n=Math.max(t.state.doc.lineAt(n).from,n-e),o=Math.min(t.state.doc.lineAt(o).to,o+e),i.length&&i[i.length-1].to>=n?i[i.length-1].to=o:i.push({from:n,to:o});return i}class m5{constructor(e){const{regexp:s,decoration:i,decorate:n,boundary:o,maxLength:r=1e3}=e;if(!s.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=s,n)this.addMatch=(l,a,d,u)=>n(u,d,d+l[0].length,l,a);else if(typeof i=="function")this.addMatch=(l,a,d,u)=>{let f=i(l,a,d);f&&u(d,d+l[0].length,f)};else if(i)this.addMatch=(l,a,d,u)=>u(d,d+l[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=o,this.maxLength=r}createDeco(e){let s=new Bi,i=s.add.bind(s);for(let{from:n,to:o}of p5(e,this.maxLength))Fp(e.state.doc,this.regexp,n,o,(r,l)=>this.addMatch(l,e,r,i));return s.finish()}updateDeco(e,s){let i=1e9,n=-1;return e.docChanged&&e.changes.iterChanges((o,r,l,a)=>{a>=e.view.viewport.from&&l<=e.view.viewport.to&&(i=Math.min(l,i),n=Math.max(a,n))}),e.viewportMoved||n-i>1e3?this.createDeco(e.view):n>-1?this.updateRange(e.view,s.map(e.changes),i,n):s}updateRange(e,s,i,n){for(let o of e.visibleRanges){let r=Math.max(o.from,i),l=Math.min(o.to,n);if(l>=r){let a=e.state.doc.lineAt(r),d=a.to<l?e.state.doc.lineAt(l):a,u=Math.max(o.from,a.from),f=Math.min(o.to,d.to);if(this.boundary){for(;r>a.from;r--)if(this.boundary.test(a.text[r-1-a.from])){u=r;break}for(;l<d.to;l++)if(this.boundary.test(d.text[l-d.from])){f=l;break}}let h=[],g,_=(p,V,M)=>h.push(M.range(p,V));if(a==d)for(this.regexp.lastIndex=u-a.from;(g=this.regexp.exec(a.text))&&g.index<f-a.from;)this.addMatch(g,e,g.index+a.from,_);else Fp(e.state.doc,this.regexp,u,f,(p,V)=>this.addMatch(V,e,p,_));s=s.update({filterFrom:u,filterTo:f,filter:(p,V)=>p<u||V>f,add:h})}}return s}}const sc=/x/.unicode!=null?"gu":"g",g5=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,sc),v5={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Bu=null;function y5(){var t;if(Bu==null&&typeof document<"u"&&document.body){let e=document.body.style;Bu=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return Bu||!1}const Zl=$e.define({combine(t){let e=Si(t,{render:null,specialChars:g5,addSpecialChars:null});return(e.replaceTabs=!y5())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,sc)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,sc)),e}});function b5(t={}){return[Zl.of(t),k5()]}let Hp=null;function k5(){return Hp||(Hp=jt.fromClass(class{constructor(t){this.view=t,this.decorations=Ne.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(Zl)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new m5({regexp:t.specialChars,decoration:(e,s,i)=>{let{doc:n}=s.state,o=ks(e[0],0);if(o==9){let r=n.lineAt(i),l=s.state.tabSize,a=Oo(r.text,l,i-r.from);return Ne.replace({widget:new S5((l-a%l)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[o]||(this.decorationCache[o]=Ne.replace({widget:new _5(t,o)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(Zl);t.startState.facet(Zl)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const x5="";function w5(t){return t>=32?x5:t==10?"":String.fromCharCode(9216+t)}class _5 extends pn{constructor(e,s){super(),this.options=e,this.code=s}eq(e){return e.code==this.code}toDOM(e){let s=w5(this.code),i=e.state.phrase("Control character")+" "+(v5[this.code]||"0x"+this.code.toString(16)),n=this.options.render&&this.options.render(this.code,i,s);if(n)return n;let o=document.createElement("span");return o.textContent=s,o.title=i,o.setAttribute("aria-label",i),o.className="cm-specialChar",o}ignoreEvent(){return!1}}class S5 extends pn{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function C5(){return V5}const A5=Ne.line({class:"cm-activeLine"}),V5=jt.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,s=[];for(let i of t.state.selection.ranges){let n=t.lineBlockAt(i.head);n.from>e&&(s.push(A5.range(n.from)),e=n.from)}return Ne.set(s)}},{decorations:t=>t.decorations}),ic=2e3;function M5(t,e,s){let i=Math.min(e.line,s.line),n=Math.max(e.line,s.line),o=[];if(e.off>ic||s.off>ic||e.col<0||s.col<0){let r=Math.min(e.off,s.off),l=Math.max(e.off,s.off);for(let a=i;a<=n;a++){let d=t.doc.line(a);d.length<=l&&o.push(fe.range(d.from+r,d.to+l))}}else{let r=Math.min(e.col,s.col),l=Math.max(e.col,s.col);for(let a=i;a<=n;a++){let d=t.doc.line(a),u=Pd(d.text,r,t.tabSize,!0);if(u<0)o.push(fe.cursor(d.to));else{let f=Pd(d.text,l,t.tabSize);o.push(fe.range(d.from+u,d.from+f))}}}return o}function D5(t,e){let s=t.coordsAtPos(t.viewport.from);return s?Math.round(Math.abs((s.left-e)/t.defaultCharacterWidth)):-1}function Wp(t,e){let s=t.posAtCoords({x:e.clientX,y:e.clientY},!1),i=t.state.doc.lineAt(s),n=s-i.from,o=n>ic?-1:n==i.length?D5(t,e.clientX):Oo(i.text,t.state.tabSize,s-i.from);return{line:i.number,col:o,off:n}}function T5(t,e){let s=Wp(t,e),i=t.state.selection;return s?{update(n){if(n.docChanged){let o=n.changes.mapPos(n.startState.doc.line(s.line).from),r=n.state.doc.lineAt(o);s={line:r.number,col:s.col,off:Math.min(s.off,r.length)},i=i.map(n.changes)}},get(n,o,r){let l=Wp(t,n);if(!l)return i;let a=M5(t.state,s,l);return a.length?r?fe.create(a.concat(i.ranges)):fe.create(a):i}}:null}function $5(t){let e=(s=>s.altKey&&s.button==0);return Te.mouseSelectionStyle.of((s,i)=>e(i)?T5(s,i):null)}const E5={Alt:[18,t=>!!t.altKey],Control:[17,t=>!!t.ctrlKey],Shift:[16,t=>!!t.shiftKey],Meta:[91,t=>!!t.metaKey]},O5={style:"cursor: crosshair"};function P5(t={}){let[e,s]=E5[t.key||"Alt"],i=jt.fromClass(class{constructor(n){this.view=n,this.isDown=!1}set(n){this.isDown!=n&&(this.isDown=n,this.view.update([]))}},{eventObservers:{keydown(n){this.set(n.keyCode==e||s(n))},keyup(n){(n.keyCode==e||!s(n))&&this.set(!1)},mousemove(n){this.set(s(n))}}});return[i,Te.contentAttributes.of(n=>{var o;return!((o=n.plugin(i))===null||o===void 0)&&o.isDown?O5:null})]}const Go="-10000px";class Nv{constructor(e,s,i,n){this.facet=s,this.createTooltipView=i,this.removeTooltipView=n,this.input=e.state.facet(s),this.tooltips=this.input.filter(r=>r);let o=null;this.tooltipViews=this.tooltips.map(r=>o=i(r,o))}update(e,s){var i;let n=e.state.facet(this.facet),o=n.filter(a=>a);if(n===this.input){for(let a of this.tooltipViews)a.update&&a.update(e);return!1}let r=[],l=s?[]:null;for(let a=0;a<o.length;a++){let d=o[a],u=-1;if(d){for(let f=0;f<this.tooltips.length;f++){let h=this.tooltips[f];h&&h.create==d.create&&(u=f)}if(u<0)r[a]=this.createTooltipView(d,a?r[a-1]:null),l&&(l[a]=!!d.above);else{let f=r[a]=this.tooltipViews[u];l&&(l[a]=s[u]),f.update&&f.update(e)}}}for(let a of this.tooltipViews)r.indexOf(a)<0&&(this.removeTooltipView(a),(i=a.destroy)===null||i===void 0||i.call(a));return s&&(l.forEach((a,d)=>s[d]=a),s.length=l.length),this.input=n,this.tooltips=o,this.tooltipViews=r,!0}}function j5(t){let e=t.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const Iu=$e.define({combine:t=>{var e,s,i;return{position:De.ios?"absolute":((e=t.find(n=>n.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((s=t.find(n=>n.parent))===null||s===void 0?void 0:s.parent)||null,tooltipSpace:((i=t.find(n=>n.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||j5}}}),qp=new WeakMap,sf=jt.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(Iu);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new Nv(t,nf,(s,i)=>this.createTooltip(s,i),s=>{this.resizeObserver&&this.resizeObserver.unobserve(s.dom),s.dom.remove()}),this.above=this.manager.tooltips.map(s=>!!s.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(s=>{Date.now()>this.lastTransaction-50&&s.length>0&&s[s.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let s=e||t.geometryChanged,i=t.state.facet(Iu);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let n of this.manager.tooltipViews)n.dom.style.position=this.position;s=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let n of this.manager.tooltipViews)this.container.appendChild(n.dom);s=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);s&&this.maybeMeasure()}createTooltip(t,e){let s=t.create(this.view),i=e?e.dom:null;if(s.dom.classList.add("cm-tooltip"),t.arrow&&!s.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let n=document.createElement("div");n.className="cm-tooltip-arrow",s.dom.appendChild(n)}return s.dom.style.position=this.position,s.dom.style.top=Go,s.dom.style.left="0px",this.container.insertBefore(s.dom,i),s.mount&&s.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(s.dom),s}destroy(){var t,e,s;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(t=i.destroy)===null||t===void 0||t.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(s=this.intersectionObserver)===null||s===void 0||s.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=1,e=1,s=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:o}=this.manager.tooltipViews[0];if(De.gecko)s=o.offsetParent!=this.container.ownerDocument.body;else if(o.style.top==Go&&o.style.left=="0px"){let r=o.getBoundingClientRect();s=Math.abs(r.top+1e4)>1||Math.abs(r.left)>1}}if(s||this.position=="absolute")if(this.parent){let o=this.parent.getBoundingClientRect();o.width&&o.height&&(t=o.width/this.parent.offsetWidth,e=o.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:e}=this.view.viewState);let i=this.view.scrollDOM.getBoundingClientRect(),n=Qc(this.view);return{visible:{left:i.left+n.left,top:i.top+n.top,right:i.right-n.right,bottom:i.bottom-n.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((o,r)=>{let l=this.manager.tooltipViews[r];return l.getCoords?l.getCoords(o.pos):this.view.coordsAtPos(o.pos)}),size:this.manager.tooltipViews.map(({dom:o})=>o.getBoundingClientRect()),space:this.view.state.facet(Iu).tooltipSpace(this.view),scaleX:t,scaleY:e,makeAbsolute:s}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let l of this.manager.tooltipViews)l.dom.style.position="absolute"}let{visible:s,space:i,scaleX:n,scaleY:o}=t,r=[];for(let l=0;l<this.manager.tooltips.length;l++){let a=this.manager.tooltips[l],d=this.manager.tooltipViews[l],{dom:u}=d,f=t.pos[l],h=t.size[l];if(!f||a.clip!==!1&&(f.bottom<=Math.max(s.top,i.top)||f.top>=Math.min(s.bottom,i.bottom)||f.right<Math.max(s.left,i.left)-.1||f.left>Math.min(s.right,i.right)+.1)){u.style.top=Go;continue}let g=a.arrow?d.dom.querySelector(".cm-tooltip-arrow"):null,_=g?7:0,p=h.right-h.left,V=(e=qp.get(d))!==null&&e!==void 0?e:h.bottom-h.top,M=d.offset||R5,N=this.view.textDirection==xt.LTR,B=h.width>i.right-i.left?N?i.left:i.right-h.width:N?Math.max(i.left,Math.min(f.left-(g?14:0)+M.x,i.right-p)):Math.min(Math.max(i.left,f.left-p+(g?14:0)-M.x),i.right-p),W=this.above[l];!a.strictSide&&(W?f.top-V-_-M.y<i.top:f.bottom+V+_+M.y>i.bottom)&&W==i.bottom-f.bottom>f.top-i.top&&(W=this.above[l]=!W);let G=(W?f.top-i.top:i.bottom-f.bottom)-_;if(G<V&&d.resize!==!1){if(G<this.view.defaultLineHeight){u.style.top=Go;continue}qp.set(d,V),u.style.height=(V=G)/o+"px"}else u.style.height&&(u.style.height="");let j=W?f.top-V-_-M.y:f.bottom+_+M.y,A=B+p;if(d.overlap!==!0)for(let J of r)J.left<A&&J.right>B&&J.top<j+V&&J.bottom>j&&(j=W?J.top-V-2-_:J.bottom+_+2);if(this.position=="absolute"?(u.style.top=(j-t.parent.top)/o+"px",Kp(u,(B-t.parent.left)/n)):(u.style.top=j/o+"px",Kp(u,B/n)),g){let J=f.left+(N?M.x:-M.x)-(B+14-7);g.style.left=J/n+"px"}d.overlap!==!0&&r.push({left:B,top:j,right:A,bottom:j+V}),u.classList.toggle("cm-tooltip-above",W),u.classList.toggle("cm-tooltip-below",!W),d.positioned&&d.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=Go}},{eventObservers:{scroll(){this.maybeMeasure()}}});function Kp(t,e){let s=parseInt(t.style.left,10);(isNaN(s)||Math.abs(e-s)>1)&&(t.style.left=e+"px")}const L5=Te.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),R5={x:0,y:0},nf=$e.define({enables:[sf,L5]}),wa=$e.define({combine:t=>t.reduce((e,s)=>e.concat(s),[])});class iu{static create(e){return new iu(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new Nv(e,wa,(s,i)=>this.createHostedView(s,i),s=>s.dom.remove())}createHostedView(e,s){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,s?s.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let s of this.manager.tooltipViews)s.mount&&s.mount(e);this.mounted=!0}positioned(e){for(let s of this.manager.tooltipViews)s.positioned&&s.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let s of this.manager.tooltipViews)(e=s.destroy)===null||e===void 0||e.call(s)}passProp(e){let s;for(let i of this.manager.tooltipViews){let n=i[e];if(n!==void 0){if(s===void 0)s=n;else if(s!==n)return}}return s}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const B5=nf.compute([wa],t=>{let e=t.facet(wa);return e.length===0?null:{pos:Math.min(...e.map(s=>s.pos)),end:Math.max(...e.map(s=>{var i;return(i=s.end)!==null&&i!==void 0?i:s.pos})),create:iu.create,above:e[0].above,arrow:e.some(s=>s.arrow)}});class I5{constructor(e,s,i,n,o){this.view=e,this.source=s,this.field=i,this.setHover=n,this.hoverTime=o,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:s}=this,i=e.docView.nearest(s.target);if(!i)return;let n,o=1;if(i instanceof Zi)n=i.posAtStart;else{if(n=e.posAtCoords(s),n==null)return;let l=e.coordsAtPos(n);if(!l||s.y<l.top||s.y>l.bottom||s.x<l.left-e.defaultCharacterWidth||s.x>l.right+e.defaultCharacterWidth)return;let a=e.bidiSpans(e.state.doc.lineAt(n)).find(u=>u.from<=n&&u.to>=n),d=a&&a.dir==xt.RTL?-1:1;o=s.x<l.left?-d:d}let r=this.source(e,n,o);if(r?.then){let l=this.pending={pos:n};r.then(a=>{this.pending==l&&(this.pending=null,a&&!(Array.isArray(a)&&!a.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(a)?a:[a])}))},a=>ws(e.state,a,"hover tooltip"))}else r&&!(Array.isArray(r)&&!r.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(r)?r:[r])})}get tooltip(){let e=this.view.plugin(sf),s=e?e.manager.tooltips.findIndex(i=>i.create==iu.create):-1;return s>-1?e.manager.tooltipViews[s]:null}mousemove(e){var s,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:n,tooltip:o}=this;if(n.length&&o&&!U5(o.dom,e)||this.pending){let{pos:r}=n[0]||this.pending,l=(i=(s=n[0])===null||s===void 0?void 0:s.end)!==null&&i!==void 0?i:r;(r==l?this.view.posAtCoords(this.lastMove)!=r:!N5(this.view,r,l,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:s}=this;if(s.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let s=i=>{e.removeEventListener("mouseleave",s),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",s)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const Tl=4;function U5(t,e){let{left:s,right:i,top:n,bottom:o}=t.getBoundingClientRect(),r;if(r=t.querySelector(".cm-tooltip-arrow")){let l=r.getBoundingClientRect();n=Math.min(l.top,n),o=Math.max(l.bottom,o)}return e.clientX>=s-Tl&&e.clientX<=i+Tl&&e.clientY>=n-Tl&&e.clientY<=o+Tl}function N5(t,e,s,i,n,o){let r=t.scrollDOM.getBoundingClientRect(),l=t.documentTop+t.documentPadding.top+t.contentHeight;if(r.left>i||r.right<i||r.top>n||Math.min(r.bottom,l)<n)return!1;let a=t.posAtCoords({x:i,y:n},!1);return a>=e&&a<=s}function z5(t,e={}){let s=We.define(),i=Jt.define({create(){return[]},update(n,o){if(n.length&&(e.hideOnChange&&(o.docChanged||o.selection)?n=[]:e.hideOn&&(n=n.filter(r=>!e.hideOn(o,r))),o.docChanged)){let r=[];for(let l of n){let a=o.changes.mapPos(l.pos,-1,ps.TrackDel);if(a!=null){let d=Object.assign(Object.create(null),l);d.pos=a,d.end!=null&&(d.end=o.changes.mapPos(d.end)),r.push(d)}}n=r}for(let r of o.effects)r.is(s)&&(n=r.value),r.is(F5)&&(n=[]);return n},provide:n=>wa.from(n)});return{active:i,extension:[i,jt.define(n=>new I5(n,t,i,s,e.hoverTime||300)),B5]}}function zv(t,e){let s=t.plugin(sf);if(!s)return null;let i=s.manager.tooltips.indexOf(e);return i<0?null:s.manager.tooltipViews[i]}const F5=We.define(),Gp=$e.define({combine(t){let e,s;for(let i of t)e=e||i.topContainer,s=s||i.bottomContainer;return{topContainer:e,bottomContainer:s}}});function jr(t,e){let s=t.plugin(Fv),i=s?s.specs.indexOf(e):-1;return i>-1?s.panels[i]:null}const Fv=jt.fromClass(class{constructor(t){this.input=t.state.facet(Lr),this.specs=this.input.filter(s=>s),this.panels=this.specs.map(s=>s(t));let e=t.state.facet(Gp);this.top=new $l(t,!0,e.topContainer),this.bottom=new $l(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(s=>s.top)),this.bottom.sync(this.panels.filter(s=>!s.top));for(let s of this.panels)s.dom.classList.add("cm-panel"),s.mount&&s.mount()}update(t){let e=t.state.facet(Gp);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new $l(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new $l(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let s=t.state.facet(Lr);if(s!=this.input){let i=s.filter(a=>a),n=[],o=[],r=[],l=[];for(let a of i){let d=this.specs.indexOf(a),u;d<0?(u=a(t.view),l.push(u)):(u=this.panels[d],u.update&&u.update(t)),n.push(u),(u.top?o:r).push(u)}this.specs=i,this.panels=n,this.top.sync(o),this.bottom.sync(r);for(let a of l)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}else for(let i of this.panels)i.update&&i.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>Te.scrollMargins.of(e=>{let s=e.plugin(t);return s&&{top:s.top.scrollMargin(),bottom:s.bottom.scrollMargin()}})});class $l{constructor(e,s,i){this.view=e,this.top=s,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let s of this.panels)s.destroy&&e.indexOf(s)<0&&s.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let s=this.container||this.view.dom;s.insertBefore(this.dom,this.top?s.firstChild:null)}let e=this.dom.firstChild;for(let s of this.panels)if(s.dom.parentNode==this.dom){for(;e!=s.dom;)e=Jp(e);e=e.nextSibling}else this.dom.insertBefore(s.dom,e);for(;e;)e=Jp(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function Jp(t){let e=t.nextSibling;return t.remove(),e}const Lr=$e.define({enables:Fv});class Ui extends Rn{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Ui.prototype.elementClass="";Ui.prototype.toDOM=void 0;Ui.prototype.mapMode=ps.TrackBefore;Ui.prototype.startSide=Ui.prototype.endSide=-1;Ui.prototype.point=!0;const ea=$e.define(),H5=$e.define(),W5={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>tt.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},gr=$e.define();function q5(t){return[Hv(),gr.of({...W5,...t})]}const Yp=$e.define({combine:t=>t.some(e=>e)});function Hv(t){return[K5]}const K5=jt.fromClass(class{constructor(t){this.view=t,this.domAfter=null,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(gr).map(e=>new Xp(t,e)),this.fixed=!t.state.facet(Yp);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(t){if(this.updateGutters(t)){let e=this.prevViewport,s=t.view.viewport,i=Math.min(e.to,s.to)-Math.max(e.from,s.from);this.syncGutters(i<(s.to-s.from)*.8)}if(t.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(Yp)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let s=tt.iter(this.view.state.facet(ea),this.view.viewport.from),i=[],n=this.gutters.map(o=>new G5(o,this.view.viewport,-this.view.documentPadding.top));for(let o of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(o.type)){let r=!0;for(let l of o.type)if(l.type==ms.Text&&r){nc(s,i,l.from);for(let a of n)a.line(this.view,l,i);r=!1}else if(l.widget)for(let a of n)a.widget(this.view,l)}else if(o.type==ms.Text){nc(s,i,o.from);for(let r of n)r.line(this.view,o,i)}else if(o.widget)for(let r of n)r.widget(this.view,o);for(let o of n)o.finish();t&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(t){let e=t.startState.facet(gr),s=t.state.facet(gr),i=t.docChanged||t.heightChanged||t.viewportChanged||!tt.eq(t.startState.facet(ea),t.state.facet(ea),t.view.viewport.from,t.view.viewport.to);if(e==s)for(let n of this.gutters)n.update(t)&&(i=!0);else{i=!0;let n=[];for(let o of s){let r=e.indexOf(o);r<0?n.push(new Xp(this.view,o)):(this.gutters[r].update(t),n.push(this.gutters[r]))}for(let o of this.gutters)o.dom.remove(),n.indexOf(o)<0&&o.destroy();for(let o of n)o.config.side=="after"?this.getDOMAfter().appendChild(o.dom):this.dom.appendChild(o.dom);this.gutters=n}return i}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:t=>Te.scrollMargins.of(e=>{let s=e.plugin(t);if(!s||s.gutters.length==0||!s.fixed)return null;let i=s.dom.offsetWidth*e.scaleX,n=s.domAfter?s.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==xt.LTR?{left:i,right:n}:{right:i,left:n}})});function Qp(t){return Array.isArray(t)?t:[t]}function nc(t,e,s){for(;t.value&&t.from<=s;)t.from==s&&e.push(t.value),t.next()}class G5{constructor(e,s,i){this.gutter=e,this.height=i,this.i=0,this.cursor=tt.iter(e.markers,s.from)}addElement(e,s,i){let{gutter:n}=this,o=(s.top-this.height)/e.scaleY,r=s.height/e.scaleY;if(this.i==n.elements.length){let l=new Wv(e,r,o,i);n.elements.push(l),n.dom.appendChild(l.dom)}else n.elements[this.i].update(e,r,o,i);this.height=s.bottom,this.i++}line(e,s,i){let n=[];nc(this.cursor,n,s.from),i.length&&(n=n.concat(i));let o=this.gutter.config.lineMarker(e,s,n);o&&n.unshift(o);let r=this.gutter;n.length==0&&!r.config.renderEmptyElements||this.addElement(e,s,n)}widget(e,s){let i=this.gutter.config.widgetMarker(e,s.widget,s),n=i?[i]:null;for(let o of e.state.facet(H5)){let r=o(e,s.widget,s);r&&(n||(n=[])).push(r)}n&&this.addElement(e,s,n)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let s=e.elements.pop();e.dom.removeChild(s.dom),s.destroy()}}}class Xp{constructor(e,s){this.view=e,this.config=s,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in s.domEventHandlers)this.dom.addEventListener(i,n=>{let o=n.target,r;if(o!=this.dom&&this.dom.contains(o)){for(;o.parentNode!=this.dom;)o=o.parentNode;let a=o.getBoundingClientRect();r=(a.top+a.bottom)/2}else r=n.clientY;let l=e.lineBlockAtHeight(r-e.documentTop);s.domEventHandlers[i](e,l,n)&&n.preventDefault()});this.markers=Qp(s.markers(e)),s.initialSpacer&&(this.spacer=new Wv(e,0,0,[s.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let s=this.markers;if(this.markers=Qp(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let n=this.config.updateSpacer(this.spacer.markers[0],e);n!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[n])}let i=e.view.viewport;return!tt.eq(this.markers,s,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class Wv{constructor(e,s,i,n){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,s,i,n)}update(e,s,i,n){this.height!=s&&(this.height=s,this.dom.style.height=s+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),J5(this.markers,n)||this.setMarkers(e,n)}setMarkers(e,s){let i="cm-gutterElement",n=this.dom.firstChild;for(let o=0,r=0;;){let l=r,a=o<s.length?s[o++]:null,d=!1;if(a){let u=a.elementClass;u&&(i+=" "+u);for(let f=r;f<this.markers.length;f++)if(this.markers[f].compare(a)){l=f,d=!0;break}}else l=this.markers.length;for(;r<l;){let u=this.markers[r++];if(u.toDOM){u.destroy(n);let f=n.nextSibling;n.remove(),n=f}}if(!a)break;a.toDOM&&(d?n=n.nextSibling:this.dom.insertBefore(a.toDOM(e),n)),d&&r++}this.dom.className=i,this.markers=s}destroy(){this.setMarkers(null,[])}}function J5(t,e){if(t.length!=e.length)return!1;for(let s=0;s<t.length;s++)if(!t[s].compare(e[s]))return!1;return!0}const Y5=$e.define(),Q5=$e.define(),to=$e.define({combine(t){return Si(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,s){let i=Object.assign({},e);for(let n in s){let o=i[n],r=s[n];i[n]=o?(l,a,d)=>o(l,a,d)||r(l,a,d):r}return i}})}});class Uu extends Ui{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Nu(t,e){return t.state.facet(to).formatNumber(e,t.state)}const X5=gr.compute([to],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(Y5)},lineMarker(e,s,i){return i.some(n=>n.toDOM)?null:new Uu(Nu(e,e.state.doc.lineAt(s.from).number))},widgetMarker:(e,s,i)=>{for(let n of e.state.facet(Q5)){let o=n(e,s,i);if(o)return o}return null},lineMarkerChange:e=>e.startState.facet(to)!=e.state.facet(to),initialSpacer(e){return new Uu(Nu(e,Zp(e.state.doc.lines)))},updateSpacer(e,s){let i=Nu(s.view,Zp(s.view.state.doc.lines));return i==e.number?e:new Uu(i)},domEventHandlers:t.facet(to).domEventHandlers,side:"before"}));function Z5(t={}){return[to.of(t),Hv(),X5]}function Zp(t){let e=9;for(;e<t;)e=e*10+9;return e}const e3=new class extends Ui{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},t3=ea.compute(["selection"],t=>{let e=[],s=-1;for(let i of t.selection.ranges){let n=t.doc.lineAt(i.head).from;n>s&&(s=n,e.push(e3.range(n)))}return tt.of(e)});function s3(){return t3}const i3=1024;let n3=0;class zu{constructor(e,s){this.from=e,this.to=s}}class Ye{constructor(e={}){this.id=n3++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Ss.match(e)),s=>{let i=e(s);return i===void 0?null:[this,i]}}}Ye.closedBy=new Ye({deserialize:t=>t.split(" ")});Ye.openedBy=new Ye({deserialize:t=>t.split(" ")});Ye.group=new Ye({deserialize:t=>t.split(" ")});Ye.isolate=new Ye({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});Ye.contextHash=new Ye({perNode:!0});Ye.lookAhead=new Ye({perNode:!0});Ye.mounted=new Ye({perNode:!0});class _a{constructor(e,s,i){this.tree=e,this.overlay=s,this.parser=i}static get(e){return e&&e.props&&e.props[Ye.mounted.id]}}const o3=Object.create(null);class Ss{constructor(e,s,i,n=0){this.name=e,this.props=s,this.id=i,this.flags=n}static define(e){let s=e.props&&e.props.length?Object.create(null):o3,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),n=new Ss(e.name||"",s,e.id,i);if(e.props){for(let o of e.props)if(Array.isArray(o)||(o=o(n)),o){if(o[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");s[o[0].id]=o[1]}}return n}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let s=this.prop(Ye.group);return s?s.indexOf(e)>-1:!1}return this.id==e}static match(e){let s=Object.create(null);for(let i in e)for(let n of i.split(" "))s[n]=e[i];return i=>{for(let n=i.prop(Ye.group),o=-1;o<(n?n.length:0);o++){let r=s[o<0?i.name:n[o]];if(r)return r}}}}Ss.none=new Ss("",Object.create(null),0,8);class of{constructor(e){this.types=e;for(let s=0;s<e.length;s++)if(e[s].id!=s)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let s=[];for(let i of this.types){let n=null;for(let o of e){let r=o(i);if(r){n||(n=Object.assign({},i.props));let l=r[1],a=r[0];a.combine&&a.id in n&&(l=a.combine(n[a.id],l)),n[a.id]=l}}s.push(n?new Ss(i.name,n,i.id,i.flags):i)}return new of(s)}}const El=new WeakMap,em=new WeakMap;var qt;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(qt||(qt={}));class Ct{constructor(e,s,i,n,o){if(this.type=e,this.children=s,this.positions=i,this.length=n,this.props=null,o&&o.length){this.props=Object.create(null);for(let[r,l]of o)this.props[typeof r=="number"?r:r.id]=l}}toString(){let e=_a.get(this);if(e&&!e.overlay)return e.tree.toString();let s="";for(let i of this.children){let n=i.toString();n&&(s&&(s+=","),s+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(s.length?"("+s+")":""):s}cursor(e=0){return new rc(this.topNode,e)}cursorAt(e,s=0,i=0){let n=El.get(this)||this.topNode,o=new rc(n);return o.moveTo(e,s),El.set(this,o._tree),o}get topNode(){return new Fs(this,0,0,null)}resolve(e,s=0){let i=Rr(El.get(this)||this.topNode,e,s,!1);return El.set(this,i),i}resolveInner(e,s=0){let i=Rr(em.get(this)||this.topNode,e,s,!0);return em.set(this,i),i}resolveStack(e,s=0){return a3(this,e,s)}iterate(e){let{enter:s,leave:i,from:n=0,to:o=this.length}=e,r=e.mode||0,l=(r&qt.IncludeAnonymous)>0;for(let a=this.cursor(r|qt.IncludeAnonymous);;){let d=!1;if(a.from<=o&&a.to>=n&&(!l&&a.type.isAnonymous||s(a)!==!1)){if(a.firstChild())continue;d=!0}for(;d&&i&&(l||!a.type.isAnonymous)&&i(a),!a.nextSibling();){if(!a.parent())return;d=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let s in this.props)e.push([+s,this.props[s]]);return e}balance(e={}){return this.children.length<=8?this:af(Ss.none,this.children,this.positions,0,this.children.length,0,this.length,(s,i,n)=>new Ct(this.type,s,i,n,this.propValues),e.makeTree||((s,i,n)=>new Ct(Ss.none,s,i,n)))}static build(e){return u3(e)}}Ct.empty=new Ct(Ss.none,[],[],0);class rf{constructor(e,s){this.buffer=e,this.index=s}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new rf(this.buffer,this.index)}}class fn{constructor(e,s,i){this.buffer=e,this.length=s,this.set=i}get type(){return Ss.none}toString(){let e=[];for(let s=0;s<this.buffer.length;)e.push(this.childString(s)),s=this.buffer[s+3];return e.join(",")}childString(e){let s=this.buffer[e],i=this.buffer[e+3],n=this.set.types[s],o=n.name;if(/\W/.test(o)&&!n.isError&&(o=JSON.stringify(o)),e+=4,i==e)return o;let r=[];for(;e<i;)r.push(this.childString(e)),e=this.buffer[e+3];return o+"("+r.join(",")+")"}findChild(e,s,i,n,o){let{buffer:r}=this,l=-1;for(let a=e;a!=s&&!(qv(o,n,r[a+1],r[a+2])&&(l=a,i>0));a=r[a+3]);return l}slice(e,s,i){let n=this.buffer,o=new Uint16Array(s-e),r=0;for(let l=e,a=0;l<s;){o[a++]=n[l++],o[a++]=n[l++]-i;let d=o[a++]=n[l++]-i;o[a++]=n[l++]-e,r=Math.max(r,d)}return new fn(o,r,this.set)}}function qv(t,e,s,i){switch(t){case-2:return s<e;case-1:return i>=e&&s<e;case 0:return s<e&&i>e;case 1:return s<=e&&i>e;case 2:return i>e;case 4:return!0}}function Rr(t,e,s,i){for(var n;t.from==t.to||(s<1?t.from>=e:t.from>e)||(s>-1?t.to<=e:t.to<e);){let r=!i&&t instanceof Fs&&t.index<0?null:t.parent;if(!r)return t;t=r}let o=i?0:qt.IgnoreOverlays;if(i)for(let r=t,l=r.parent;l;r=l,l=r.parent)r instanceof Fs&&r.index<0&&((n=l.enter(e,s,o))===null||n===void 0?void 0:n.from)!=r.from&&(t=l);for(;;){let r=t.enter(e,s,o);if(!r)return t;t=r}}class Kv{cursor(e=0){return new rc(this,e)}getChild(e,s=null,i=null){let n=tm(this,e,s,i);return n.length?n[0]:null}getChildren(e,s=null,i=null){return tm(this,e,s,i)}resolve(e,s=0){return Rr(this,e,s,!1)}resolveInner(e,s=0){return Rr(this,e,s,!0)}matchContext(e){return oc(this.parent,e)}enterUnfinishedNodesBefore(e){let s=this.childBefore(e),i=this;for(;s;){let n=s.lastChild;if(!n||n.to!=s.to)break;n.type.isError&&n.from==n.to?(i=s,s=n.prevSibling):s=n}return i}get node(){return this}get next(){return this.parent}}class Fs extends Kv{constructor(e,s,i,n){super(),this._tree=e,this.from=s,this.index=i,this._parent=n}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,s,i,n,o=0){for(let r=this;;){for(let{children:l,positions:a}=r._tree,d=s>0?l.length:-1;e!=d;e+=s){let u=l[e],f=a[e]+r.from;if(qv(n,i,f,f+u.length)){if(u instanceof fn){if(o&qt.ExcludeBuffers)continue;let h=u.findChild(0,u.buffer.length,s,i-f,n);if(h>-1)return new tn(new r3(r,u,e,f),null,h)}else if(o&qt.IncludeAnonymous||!u.type.isAnonymous||lf(u)){let h;if(!(o&qt.IgnoreMounts)&&(h=_a.get(u))&&!h.overlay)return new Fs(h.tree,f,e,r);let g=new Fs(u,f,e,r);return o&qt.IncludeAnonymous||!g.type.isAnonymous?g:g.nextChild(s<0?u.children.length-1:0,s,i,n)}}}if(o&qt.IncludeAnonymous||!r.type.isAnonymous||(r.index>=0?e=r.index+s:e=s<0?-1:r._parent._tree.children.length,r=r._parent,!r))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,s,i=0){let n;if(!(i&qt.IgnoreOverlays)&&(n=_a.get(this._tree))&&n.overlay){let o=e-this.from;for(let{from:r,to:l}of n.overlay)if((s>0?r<=o:r<o)&&(s<0?l>=o:l>o))return new Fs(n.tree,n.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,s,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function tm(t,e,s,i){let n=t.cursor(),o=[];if(!n.firstChild())return o;if(s!=null){for(let r=!1;!r;)if(r=n.type.is(s),!n.nextSibling())return o}for(;;){if(i!=null&&n.type.is(i))return o;if(n.type.is(e)&&o.push(n.node),!n.nextSibling())return i==null?o:[]}}function oc(t,e,s=e.length-1){for(let i=t;s>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[s]&&e[s]!=i.name)return!1;s--}}return!0}class r3{constructor(e,s,i,n){this.parent=e,this.buffer=s,this.index=i,this.start=n}}class tn extends Kv{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,s,i){super(),this.context=e,this._parent=s,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,s,i){let{buffer:n}=this.context,o=n.findChild(this.index+4,n.buffer[this.index+3],e,s-this.context.start,i);return o<0?null:new tn(this.context,this,o)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,s,i=0){if(i&qt.ExcludeBuffers)return null;let{buffer:n}=this.context,o=n.findChild(this.index+4,n.buffer[this.index+3],s>0?1:-1,e-this.context.start,s);return o<0?null:new tn(this.context,this,o)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,s=e.buffer[this.index+3];return s<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new tn(this.context,this._parent,s):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,s=this._parent?this._parent.index+4:0;return this.index==s?this.externalSibling(-1):new tn(this.context,this._parent,e.findChild(s,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],s=[],{buffer:i}=this.context,n=this.index+4,o=i.buffer[this.index+3];if(o>n){let r=i.buffer[this.index+1];e.push(i.slice(n,o,r)),s.push(0)}return new Ct(this.type,e,s,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function Gv(t){if(!t.length)return null;let e=0,s=t[0];for(let o=1;o<t.length;o++){let r=t[o];(r.from>s.from||r.to<s.to)&&(s=r,e=o)}let i=s instanceof Fs&&s.index<0?null:s.parent,n=t.slice();return i?n[e]=i:n.splice(e,1),new l3(n,s)}class l3{constructor(e,s){this.heads=e,this.node=s}get next(){return Gv(this.heads)}}function a3(t,e,s){let i=t.resolveInner(e,s),n=null;for(let o=i instanceof Fs?i:i.context.parent;o;o=o.parent)if(o.index<0){let r=o.parent;(n||(n=[i])).push(r.resolve(e,s)),o=r}else{let r=_a.get(o.tree);if(r&&r.overlay&&r.overlay[0].from<=e&&r.overlay[r.overlay.length-1].to>=e){let l=new Fs(r.tree,r.overlay[0].from+o.from,-1,o);(n||(n=[i])).push(Rr(l,e,s,!1))}}return n?Gv(n):i}class rc{get name(){return this.type.name}constructor(e,s=0){if(this.mode=s,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Fs)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,s){this.index=e;let{start:i,buffer:n}=this.buffer;return this.type=s||n.set.types[n.buffer[e]],this.from=i+n.buffer[e+1],this.to=i+n.buffer[e+2],!0}yield(e){return e?e instanceof Fs?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,s,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,s,i,this.mode));let{buffer:n}=this.buffer,o=n.findChild(this.index+4,n.buffer[this.index+3],e,s-this.buffer.start,i);return o<0?!1:(this.stack.push(this.index),this.yieldBuf(o))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,s,i=this.mode){return this.buffer?i&qt.ExcludeBuffers?!1:this.enterChild(1,e,s):this.yield(this._tree.enter(e,s,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&qt.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&qt.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:s}=this.buffer,i=this.stack.length-1;if(e<0){let n=i<0?0:this.stack[i]+4;if(this.index!=n)return this.yieldBuf(s.findChild(n,this.index,-1,0,4))}else{let n=s.buffer[this.index+3];if(n<(i<0?s.buffer.length:s.buffer[this.stack[i]+3]))return this.yieldBuf(n)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let s,i,{buffer:n}=this;if(n){if(e>0){if(this.index<n.buffer.buffer.length)return!1}else for(let o=0;o<this.index;o++)if(n.buffer.buffer[o+3]<this.index)return!1;({index:s,parent:i}=n)}else({index:s,_parent:i}=this._tree);for(;i;{index:s,_parent:i}=i)if(s>-1)for(let o=s+e,r=e<0?-1:i._tree.children.length;o!=r;o+=e){let l=i._tree.children[o];if(this.mode&qt.IncludeAnonymous||l instanceof fn||!l.type.isAnonymous||lf(l))return!1}return!0}move(e,s){if(s&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,s=0){for(;(this.from==this.to||(s<1?this.from>=e:this.from>e)||(s>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,s););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,s=null,i=0;if(e&&e.context==this.buffer)e:for(let n=this.index,o=this.stack.length;o>=0;){for(let r=e;r;r=r._parent)if(r.index==n){if(n==this.index)return r;s=r,i=o+1;break e}n=this.stack[--o]}for(let n=i;n<this.stack.length;n++)s=new tn(this.buffer,s,this.stack[n]);return this.bufferNode=new tn(this.buffer,s,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,s){for(let i=0;;){let n=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(n=!0)}for(;;){if(n&&s&&s(this),n=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,n=!0}}}matchContext(e){if(!this.buffer)return oc(this.node.parent,e);let{buffer:s}=this.buffer,{types:i}=s.set;for(let n=e.length-1,o=this.stack.length-1;n>=0;o--){if(o<0)return oc(this._tree,e,n);let r=i[s.buffer[this.stack[o]]];if(!r.isAnonymous){if(e[n]&&e[n]!=r.name)return!1;n--}}return!0}}function lf(t){return t.children.some(e=>e instanceof fn||!e.type.isAnonymous||lf(e))}function u3(t){var e;let{buffer:s,nodeSet:i,maxBufferLength:n=i3,reused:o=[],minRepeatType:r=i.types.length}=t,l=Array.isArray(s)?new rf(s,s.length):s,a=i.types,d=0,u=0;function f(G,j,A,J,ee,me){let{id:te,start:F,end:ce,size:le}=l,ve=u,Y=d;if(le<0)if(l.next(),le==-1){let xe=o[te];A.push(xe),J.push(F-G);return}else if(le==-3){d=te;return}else if(le==-4){u=te;return}else throw new RangeError(`Unrecognized record size: ${le}`);let X=a[te],Q,Ee,E=F-G;if(ce-F<=n&&(Ee=V(l.pos-j,ee))){let xe=new Uint16Array(Ee.size-Ee.skip),Oe=l.pos-Ee.size,Qe=xe.length;for(;l.pos>Oe;)Qe=M(Ee.start,xe,Qe);Q=new fn(xe,ce-Ee.start,i),E=Ee.start-G}else{let xe=l.pos-le;l.next();let Oe=[],Qe=[],Ge=te>=r?te:-1,yt=0,at=ce;for(;l.pos>xe;)Ge>=0&&l.id==Ge&&l.size>=0?(l.end<=at-n&&(_(Oe,Qe,F,yt,l.end,at,Ge,ve,Y),yt=Oe.length,at=l.end),l.next()):me>2500?h(F,xe,Oe,Qe):f(F,xe,Oe,Qe,Ge,me+1);if(Ge>=0&&yt>0&&yt<Oe.length&&_(Oe,Qe,F,yt,F,at,Ge,ve,Y),Oe.reverse(),Qe.reverse(),Ge>-1&&yt>0){let D=g(X,Y);Q=af(X,Oe,Qe,0,Oe.length,0,ce-F,D,D)}else Q=p(X,Oe,Qe,ce-F,ve-ce,Y)}A.push(Q),J.push(E)}function h(G,j,A,J){let ee=[],me=0,te=-1;for(;l.pos>j;){let{id:F,start:ce,end:le,size:ve}=l;if(ve>4)l.next();else{if(te>-1&&ce<te)break;te<0&&(te=le-n),ee.push(F,ce,le),me++,l.next()}}if(me){let F=new Uint16Array(me*4),ce=ee[ee.length-2];for(let le=ee.length-3,ve=0;le>=0;le-=3)F[ve++]=ee[le],F[ve++]=ee[le+1]-ce,F[ve++]=ee[le+2]-ce,F[ve++]=ve;A.push(new fn(F,ee[2]-ce,i)),J.push(ce-G)}}function g(G,j){return(A,J,ee)=>{let me=0,te=A.length-1,F,ce;if(te>=0&&(F=A[te])instanceof Ct){if(!te&&F.type==G&&F.length==ee)return F;(ce=F.prop(Ye.lookAhead))&&(me=J[te]+F.length+ce)}return p(G,A,J,ee,me,j)}}function _(G,j,A,J,ee,me,te,F,ce){let le=[],ve=[];for(;G.length>J;)le.push(G.pop()),ve.push(j.pop()+A-ee);G.push(p(i.types[te],le,ve,me-ee,F-me,ce)),j.push(ee-A)}function p(G,j,A,J,ee,me,te){if(me){let F=[Ye.contextHash,me];te=te?[F].concat(te):[F]}if(ee>25){let F=[Ye.lookAhead,ee];te=te?[F].concat(te):[F]}return new Ct(G,j,A,J,te)}function V(G,j){let A=l.fork(),J=0,ee=0,me=0,te=A.end-n,F={size:0,start:0,skip:0};e:for(let ce=A.pos-G;A.pos>ce;){let le=A.size;if(A.id==j&&le>=0){F.size=J,F.start=ee,F.skip=me,me+=4,J+=4,A.next();continue}let ve=A.pos-le;if(le<0||ve<ce||A.start<te)break;let Y=A.id>=r?4:0,X=A.start;for(A.next();A.pos>ve;){if(A.size<0)if(A.size==-3)Y+=4;else break e;else A.id>=r&&(Y+=4);A.next()}ee=X,J+=le,me+=Y}return(j<0||J==G)&&(F.size=J,F.start=ee,F.skip=me),F.size>4?F:void 0}function M(G,j,A){let{id:J,start:ee,end:me,size:te}=l;if(l.next(),te>=0&&J<r){let F=A;if(te>4){let ce=l.pos-(te-4);for(;l.pos>ce;)A=M(G,j,A)}j[--A]=F,j[--A]=me-G,j[--A]=ee-G,j[--A]=J}else te==-3?d=J:te==-4&&(u=J);return A}let N=[],B=[];for(;l.pos>0;)f(t.start||0,t.bufferStart||0,N,B,-1,0);let W=(e=t.length)!==null&&e!==void 0?e:N.length?B[0]+N[0].length:0;return new Ct(a[t.topID],N.reverse(),B.reverse(),W)}const sm=new WeakMap;function ta(t,e){if(!t.isAnonymous||e instanceof fn||e.type!=t)return 1;let s=sm.get(e);if(s==null){s=1;for(let i of e.children){if(i.type!=t||!(i instanceof Ct)){s=1;break}s+=ta(t,i)}sm.set(e,s)}return s}function af(t,e,s,i,n,o,r,l,a){let d=0;for(let _=i;_<n;_++)d+=ta(t,e[_]);let u=Math.ceil(d*1.5/8),f=[],h=[];function g(_,p,V,M,N){for(let B=V;B<M;){let W=B,G=p[B],j=ta(t,_[B]);for(B++;B<M;B++){let A=ta(t,_[B]);if(j+A>=u)break;j+=A}if(B==W+1){if(j>u){let A=_[W];g(A.children,A.positions,0,A.children.length,p[W]+N);continue}f.push(_[W])}else{let A=p[B-1]+_[B-1].length-G;f.push(af(t,_,p,W,B,G,A,null,a))}h.push(G+N-o)}}return g(e,s,i,n,0),(l||a)(f,h,r)}class Pn{constructor(e,s,i,n,o=!1,r=!1){this.from=e,this.to=s,this.tree=i,this.offset=n,this.open=(o?1:0)|(r?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,s=[],i=!1){let n=[new Pn(0,e.length,e,0,!1,i)];for(let o of s)o.to>e.length&&n.push(o);return n}static applyChanges(e,s,i=128){if(!s.length)return e;let n=[],o=1,r=e.length?e[0]:null;for(let l=0,a=0,d=0;;l++){let u=l<s.length?s[l]:null,f=u?u.fromA:1e9;if(f-a>=i)for(;r&&r.from<f;){let h=r;if(a>=h.from||f<=h.to||d){let g=Math.max(h.from,a)-d,_=Math.min(h.to,f)-d;h=g>=_?null:new Pn(g,_,h.tree,h.offset+d,l>0,!!u)}if(h&&n.push(h),r.to>f)break;r=o<e.length?e[o++]:null}if(!u)break;a=u.toA,d=u.toA-u.toB}return n}}class Jv{startParse(e,s,i){return typeof e=="string"&&(e=new d3(e)),i=i?i.length?i.map(n=>new zu(n.from,n.to)):[new zu(0,0)]:[new zu(0,e.length)],this.createParse(e,s||[],i)}parse(e,s,i){let n=this.startParse(e,s,i);for(;;){let o=n.advance();if(o)return o}}}class d3{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,s){return this.string.slice(e,s)}}new Ye({perNode:!0});let c3=0;class Rs{constructor(e,s,i,n){this.name=e,this.set=s,this.base=i,this.modified=n,this.id=c3++}toString(){let{name:e}=this;for(let s of this.modified)s.name&&(e=`${s.name}(${e})`);return e}static define(e,s){let i=typeof e=="string"?e:"?";if(e instanceof Rs&&(s=e),s?.base)throw new Error("Can not derive from a modified tag");let n=new Rs(i,[],null,[]);if(n.set.push(n),s)for(let o of s.set)n.set.push(o);return n}static defineModifier(e){let s=new Sa(e);return i=>i.modified.indexOf(s)>-1?i:Sa.get(i.base||i,i.modified.concat(s).sort((n,o)=>n.id-o.id))}}let f3=0;class Sa{constructor(e){this.name=e,this.instances=[],this.id=f3++}static get(e,s){if(!s.length)return e;let i=s[0].instances.find(l=>l.base==e&&h3(s,l.modified));if(i)return i;let n=[],o=new Rs(e.name,n,e,s);for(let l of s)l.instances.push(o);let r=p3(s);for(let l of e.set)if(!l.modified.length)for(let a of r)n.push(Sa.get(l,a));return o}}function h3(t,e){return t.length==e.length&&t.every((s,i)=>s==e[i])}function p3(t){let e=[[]];for(let s=0;s<t.length;s++)for(let i=0,n=e.length;i<n;i++)e.push(e[i].concat(t[s]));return e.sort((s,i)=>i.length-s.length)}function m3(t){let e=Object.create(null);for(let s in t){let i=t[s];Array.isArray(i)||(i=[i]);for(let n of s.split(" "))if(n){let o=[],r=2,l=n;for(let f=0;;){if(l=="..."&&f>0&&f+3==n.length){r=1;break}let h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!h)throw new RangeError("Invalid path: "+n);if(o.push(h[0]=="*"?"":h[0][0]=='"'?JSON.parse(h[0]):h[0]),f+=h[0].length,f==n.length)break;let g=n[f++];if(f==n.length&&g=="!"){r=0;break}if(g!="/")throw new RangeError("Invalid path: "+n);l=n.slice(f)}let a=o.length-1,d=o[a];if(!d)throw new RangeError("Invalid path: "+n);let u=new Br(i,r,a>0?o.slice(0,a):null);e[d]=u.sort(e[d])}}return Yv.add(e)}const Yv=new Ye({combine(t,e){let s,i,n;for(;t||e;){if(!t||e&&t.depth>=e.depth?(n=e,e=e.next):(n=t,t=t.next),s&&s.mode==n.mode&&!n.context&&!s.context)continue;let o=new Br(n.tags,n.mode,n.context);s?s.next=o:i=o,s=o}return i}});class Br{constructor(e,s,i,n){this.tags=e,this.mode=s,this.context=i,this.next=n}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Br.empty=new Br([],2,null);function Qv(t,e){let s=Object.create(null);for(let o of t)if(!Array.isArray(o.tag))s[o.tag.id]=o.class;else for(let r of o.tag)s[r.id]=o.class;let{scope:i,all:n=null}=e||{};return{style:o=>{let r=n;for(let l of o)for(let a of l.set){let d=s[a.id];if(d){r=r?r+" "+d:d;break}}return r},scope:i}}function g3(t,e){let s=null;for(let i of t){let n=i.style(e);n&&(s=s?s+" "+n:n)}return s}function v3(t,e,s,i=0,n=t.length){let o=new y3(i,Array.isArray(e)?e:[e],s);o.highlightRange(t.cursor(),i,n,"",o.highlighters),o.flush(n)}class y3{constructor(e,s,i){this.at=e,this.highlighters=s,this.span=i,this.class=""}startSpan(e,s){s!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=s)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,s,i,n,o){let{type:r,from:l,to:a}=e;if(l>=i||a<=s)return;r.isTop&&(o=this.highlighters.filter(g=>!g.scope||g.scope(r)));let d=n,u=b3(e)||Br.empty,f=g3(o,u.tags);if(f&&(d&&(d+=" "),d+=f,u.mode==1&&(n+=(n?" ":"")+f)),this.startSpan(Math.max(s,l),d),u.opaque)return;let h=e.tree&&e.tree.prop(Ye.mounted);if(h&&h.overlay){let g=e.node.enter(h.overlay[0].from+l,1),_=this.highlighters.filter(V=>!V.scope||V.scope(h.tree.type)),p=e.firstChild();for(let V=0,M=l;;V++){let N=V<h.overlay.length?h.overlay[V]:null,B=N?N.from+l:a,W=Math.max(s,M),G=Math.min(i,B);if(W<G&&p)for(;e.from<G&&(this.highlightRange(e,W,G,n,o),this.startSpan(Math.min(G,e.to),d),!(e.to>=B||!e.nextSibling())););if(!N||B>i)break;M=N.to+l,M>s&&(this.highlightRange(g.cursor(),Math.max(s,N.from+l),Math.min(i,M),"",_),this.startSpan(Math.min(i,M),d))}p&&e.parent()}else if(e.firstChild()){h&&(n="");do if(!(e.to<=s)){if(e.from>=i)break;this.highlightRange(e,s,i,n,o),this.startSpan(Math.min(i,e.to),d)}while(e.nextSibling());e.parent()}}}function b3(t){let e=t.type.prop(Yv);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const Se=Rs.define,Ol=Se(),Gi=Se(),im=Se(Gi),nm=Se(Gi),Ji=Se(),Pl=Se(Ji),Fu=Se(Ji),fi=Se(),wn=Se(fi),di=Se(),ci=Se(),lc=Se(),Jo=Se(lc),jl=Se(),Ve={comment:Ol,lineComment:Se(Ol),blockComment:Se(Ol),docComment:Se(Ol),name:Gi,variableName:Se(Gi),typeName:im,tagName:Se(im),propertyName:nm,attributeName:Se(nm),className:Se(Gi),labelName:Se(Gi),namespace:Se(Gi),macroName:Se(Gi),literal:Ji,string:Pl,docString:Se(Pl),character:Se(Pl),attributeValue:Se(Pl),number:Fu,integer:Se(Fu),float:Se(Fu),bool:Se(Ji),regexp:Se(Ji),escape:Se(Ji),color:Se(Ji),url:Se(Ji),keyword:di,self:Se(di),null:Se(di),atom:Se(di),unit:Se(di),modifier:Se(di),operatorKeyword:Se(di),controlKeyword:Se(di),definitionKeyword:Se(di),moduleKeyword:Se(di),operator:ci,derefOperator:Se(ci),arithmeticOperator:Se(ci),logicOperator:Se(ci),bitwiseOperator:Se(ci),compareOperator:Se(ci),updateOperator:Se(ci),definitionOperator:Se(ci),typeOperator:Se(ci),controlOperator:Se(ci),punctuation:lc,separator:Se(lc),bracket:Jo,angleBracket:Se(Jo),squareBracket:Se(Jo),paren:Se(Jo),brace:Se(Jo),content:fi,heading:wn,heading1:Se(wn),heading2:Se(wn),heading3:Se(wn),heading4:Se(wn),heading5:Se(wn),heading6:Se(wn),contentSeparator:Se(fi),list:Se(fi),quote:Se(fi),emphasis:Se(fi),strong:Se(fi),link:Se(fi),monospace:Se(fi),strikethrough:Se(fi),inserted:Se(),deleted:Se(),changed:Se(),invalid:Se(),meta:jl,documentMeta:Se(jl),annotation:Se(jl),processingInstruction:Se(jl),definition:Rs.defineModifier("definition"),constant:Rs.defineModifier("constant"),function:Rs.defineModifier("function"),standard:Rs.defineModifier("standard"),local:Rs.defineModifier("local"),special:Rs.defineModifier("special")};for(let t in Ve){let e=Ve[t];e instanceof Rs&&(e.name=t)}Qv([{tag:Ve.link,class:"tok-link"},{tag:Ve.heading,class:"tok-heading"},{tag:Ve.emphasis,class:"tok-emphasis"},{tag:Ve.strong,class:"tok-strong"},{tag:Ve.keyword,class:"tok-keyword"},{tag:Ve.atom,class:"tok-atom"},{tag:Ve.bool,class:"tok-bool"},{tag:Ve.url,class:"tok-url"},{tag:Ve.labelName,class:"tok-labelName"},{tag:Ve.inserted,class:"tok-inserted"},{tag:Ve.deleted,class:"tok-deleted"},{tag:Ve.literal,class:"tok-literal"},{tag:Ve.string,class:"tok-string"},{tag:Ve.number,class:"tok-number"},{tag:[Ve.regexp,Ve.escape,Ve.special(Ve.string)],class:"tok-string2"},{tag:Ve.variableName,class:"tok-variableName"},{tag:Ve.local(Ve.variableName),class:"tok-variableName tok-local"},{tag:Ve.definition(Ve.variableName),class:"tok-variableName tok-definition"},{tag:Ve.special(Ve.variableName),class:"tok-variableName2"},{tag:Ve.definition(Ve.propertyName),class:"tok-propertyName tok-definition"},{tag:Ve.typeName,class:"tok-typeName"},{tag:Ve.namespace,class:"tok-namespace"},{tag:Ve.className,class:"tok-className"},{tag:Ve.macroName,class:"tok-macroName"},{tag:Ve.propertyName,class:"tok-propertyName"},{tag:Ve.operator,class:"tok-operator"},{tag:Ve.comment,class:"tok-comment"},{tag:Ve.meta,class:"tok-meta"},{tag:Ve.invalid,class:"tok-invalid"},{tag:Ve.punctuation,class:"tok-punctuation"}]);var Hu;const so=new Ye;function k3(t){return $e.define({combine:t?e=>e.concat(t):void 0})}const x3=new Ye;class Qs{constructor(e,s,i=[],n=""){this.data=e,this.name=n,et.prototype.hasOwnProperty("tree")||Object.defineProperty(et.prototype,"tree",{get(){return rs(this)}}),this.parser=s,this.extension=[hn.of(this),et.languageData.of((o,r,l)=>{let a=om(o,r,l),d=a.type.prop(so);if(!d)return[];let u=o.facet(d),f=a.type.prop(x3);if(f){let h=a.resolve(r-a.from,l);for(let g of f)if(g.test(h,o)){let _=o.facet(g.facet);return g.type=="replace"?_:_.concat(u)}}return u})].concat(i)}isActiveAt(e,s,i=-1){return om(e,s,i).type.prop(so)==this.data}findRegions(e){let s=e.facet(hn);if(s?.data==this.data)return[{from:0,to:e.doc.length}];if(!s||!s.allowsNesting)return[];let i=[],n=(o,r)=>{if(o.prop(so)==this.data){i.push({from:r,to:r+o.length});return}let l=o.prop(Ye.mounted);if(l){if(l.tree.prop(so)==this.data){if(l.overlay)for(let a of l.overlay)i.push({from:a.from+r,to:a.to+r});else i.push({from:r,to:r+o.length});return}else if(l.overlay){let a=i.length;if(n(l.tree,l.overlay[0].from+r),i.length>a)return}}for(let a=0;a<o.children.length;a++){let d=o.children[a];d instanceof Ct&&n(d,o.positions[a]+r)}};return n(rs(e),0),i}get allowsNesting(){return!0}}Qs.setState=We.define();function om(t,e,s){let i=t.facet(hn),n=rs(t).topNode;if(!i||i.allowsNesting)for(let o=n;o;o=o.enter(e,s,qt.ExcludeBuffers))o.type.isTop&&(n=o);return n}function rs(t){let e=t.field(Qs.state,!1);return e?e.tree:Ct.empty}class w3{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,s){let i=this.cursorPos-this.string.length;return e<i||s>=this.cursorPos?this.doc.sliceString(e,s):this.string.slice(e-i,s-i)}}let Yo=null;class Co{constructor(e,s,i=[],n,o,r,l,a){this.parser=e,this.state=s,this.fragments=i,this.tree=n,this.treeLen=o,this.viewport=r,this.skipped=l,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,s,i){return new Co(e,s,[],Ct.empty,0,i,[],null)}startParse(){return this.parser.startParse(new w3(this.state.doc),this.fragments)}work(e,s){return s!=null&&s>=this.state.doc.length&&(s=void 0),this.tree!=Ct.empty&&this.isDone(s??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let n=Date.now()+e;e=()=>Date.now()>n}for(this.parse||(this.parse=this.startParse()),s!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>s)&&s<this.state.doc.length&&this.parse.stopAt(s);;){let n=this.parse.advance();if(n)if(this.fragments=this.withoutTempSkipped(Pn.addTree(n,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=n,this.parse=null,this.treeLen<(s??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,s;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(s=this.parse.advance()););}),this.treeLen=e,this.tree=s,this.fragments=this.withoutTempSkipped(Pn.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let s=Yo;Yo=this;try{return e()}finally{Yo=s}}withoutTempSkipped(e){for(let s;s=this.tempSkipped.pop();)e=rm(e,s.from,s.to);return e}changes(e,s){let{fragments:i,tree:n,treeLen:o,viewport:r,skipped:l}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((d,u,f,h)=>a.push({fromA:d,toA:u,fromB:f,toB:h})),i=Pn.applyChanges(i,a),n=Ct.empty,o=0,r={from:e.mapPos(r.from,-1),to:e.mapPos(r.to,1)},this.skipped.length){l=[];for(let d of this.skipped){let u=e.mapPos(d.from,1),f=e.mapPos(d.to,-1);u<f&&l.push({from:u,to:f})}}}return new Co(this.parser,s,i,n,o,r,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let s=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:n,to:o}=this.skipped[i];n<e.to&&o>e.from&&(this.fragments=rm(this.fragments,n,o),this.skipped.splice(i--,1))}return this.skipped.length>=s?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,s){this.skipped.push({from:e,to:s})}static getSkippingParser(e){return new class extends Jv{createParse(s,i,n){let o=n[0].from,r=n[n.length-1].to;return{parsedPos:o,advance(){let a=Yo;if(a){for(let d of n)a.tempSkipped.push(d);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=r,new Ct(Ss.none,[],[],r-o)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let s=this.fragments;return this.treeLen>=e&&s.length&&s[0].from==0&&s[0].to>=e}static get(){return Yo}}function rm(t,e,s){return Pn.applyChanges(t,[{fromA:e,toA:s,fromB:e,toB:s}])}class Ao{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let s=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),s.viewport.to);return s.work(20,i)||s.takeTree(),new Ao(s)}static init(e){let s=Math.min(3e3,e.doc.length),i=Co.create(e.facet(hn).parser,e,{from:0,to:s});return i.work(20,s)||i.takeTree(),new Ao(i)}}Qs.state=Jt.define({create:Ao.init,update(t,e){for(let s of e.effects)if(s.is(Qs.setState))return s.value;return e.startState.facet(hn)!=e.state.facet(hn)?Ao.init(e.state):t.apply(e)}});let Xv=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(Xv=t=>{let e=-1,s=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(s):cancelIdleCallback(e)});const Wu=typeof navigator<"u"&&(!((Hu=navigator.scheduling)===null||Hu===void 0)&&Hu.isInputPending)?()=>navigator.scheduling.isInputPending():null,_3=jt.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let s=this.view.state.field(Qs.state).context;(s.updateViewport(e.view.viewport)||this.view.viewport.to>s.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(s)}scheduleWork(){if(this.working)return;let{state:e}=this.view,s=e.field(Qs.state);(s.tree!=s.context.tree||!s.context.isDone(e.doc.length))&&(this.working=Xv(this.work))}work(e){this.working=null;let s=Date.now();if(this.chunkEnd<s&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=s+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:n}}=this.view,o=i.field(Qs.state);if(o.tree==o.context.tree&&o.context.isDone(n+1e5))return;let r=Date.now()+Math.min(this.chunkBudget,100,e&&!Wu?Math.max(25,e.timeRemaining()-5):1e9),l=o.context.treeLen<n&&i.doc.length>n+1e3,a=o.context.work(()=>Wu&&Wu()||Date.now()>r,n+(l?0:1e5));this.chunkBudget-=Date.now()-s,(a||this.chunkBudget<=0)&&(o.context.takeTree(),this.view.dispatch({effects:Qs.setState.of(new Ao(o.context))})),this.chunkBudget>0&&!(a&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(o.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(s=>ws(this.view.state,s)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),hn=$e.define({combine(t){return t.length?t[0]:null},enables:t=>[Qs.state,_3,Te.contentAttributes.compute([t],e=>{let s=e.facet(t);return s&&s.name?{"data-language":s.name}:{}})]}),S3=$e.define(),uf=$e.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(s=>s!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function Nn(t){let e=t.facet(uf);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function Ir(t,e){let s="",i=t.tabSize,n=t.facet(uf)[0];if(n=="	"){for(;e>=i;)s+="	",e-=i;n=" "}for(let o=0;o<e;o++)s+=n;return s}function df(t,e){t instanceof et&&(t=new nu(t));for(let i of t.state.facet(S3)){let n=i(t,e);if(n!==void 0)return n}let s=rs(t.state);return s.length>=e?C3(t,s,e):null}class nu{constructor(e,s={}){this.state=e,this.options=s,this.unit=Nn(e)}lineAt(e,s=1){let i=this.state.doc.lineAt(e),{simulateBreak:n,simulateDoubleBreak:o}=this.options;return n!=null&&n>=i.from&&n<=i.to?o&&n==e?{text:"",from:e}:(s<0?n<e:n<=e)?{text:i.text.slice(n-i.from),from:n}:{text:i.text.slice(0,n-i.from),from:i.from}:i}textAfterPos(e,s=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:n}=this.lineAt(e,s);return i.slice(e-n,Math.min(i.length,e+100-n))}column(e,s=1){let{text:i,from:n}=this.lineAt(e,s),o=this.countColumn(i,e-n),r=this.options.overrideIndentation?this.options.overrideIndentation(n):-1;return r>-1&&(o+=r-this.countColumn(i,i.search(/\S|$/))),o}countColumn(e,s=e.length){return Oo(e,this.state.tabSize,s)}lineIndent(e,s=1){let{text:i,from:n}=this.lineAt(e,s),o=this.options.overrideIndentation;if(o){let r=o(n);if(r>-1)return r}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Zv=new Ye;function C3(t,e,s){let i=e.resolveStack(s),n=e.resolveInner(s,-1).resolve(s,0).enterUnfinishedNodesBefore(s);if(n!=i.node){let o=[];for(let r=n;r&&!(r.from<i.node.from||r.to>i.node.to||r.from==i.node.from&&r.type==i.node.type);r=r.parent)o.push(r);for(let r=o.length-1;r>=0;r--)i={node:o[r],next:i}}return ey(i,t,s)}function ey(t,e,s){for(let i=t;i;i=i.next){let n=V3(i.node);if(n)return n(cf.create(e,s,i))}return 0}function A3(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function V3(t){let e=t.type.prop(Zv);if(e)return e;let s=t.firstChild,i;if(s&&(i=s.type.prop(Ye.closedBy))){let n=t.lastChild,o=n&&i.indexOf(n.name)>-1;return r=>$3(r,!0,1,void 0,o&&!A3(r)?n.from:void 0)}return t.parent==null?M3:null}function M3(){return 0}class cf extends nu{constructor(e,s,i){super(e.state,e.options),this.base=e,this.pos=s,this.context=i}get node(){return this.context.node}static create(e,s,i){return new cf(e,s,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let s=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(s.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(D3(i,e))break;s=this.state.doc.lineAt(i.from)}return this.lineIndent(s.from)}continue(){return ey(this.context.next,this.base,this.pos)}}function D3(t,e){for(let s=e;s;s=s.parent)if(t==s)return!0;return!1}function T3(t){let e=t.node,s=e.childAfter(e.from),i=e.lastChild;if(!s)return null;let n=t.options.simulateBreak,o=t.state.doc.lineAt(s.from),r=n==null||n<=o.from?o.to:Math.min(o.to,n);for(let l=s.to;;){let a=e.childAfter(l);if(!a||a==i)return null;if(!a.type.isSkipped){if(a.from>=r)return null;let d=/^ */.exec(o.text.slice(s.to-o.from))[0].length;return{from:s.from,to:s.to+d}}l=a.to}}function $3(t,e,s,i,n){let o=t.textAfter,r=o.match(/^\s*/)[0].length,l=i&&o.slice(r,r+i.length)==i||n==t.pos+r,a=T3(t);return a?l?t.column(a.from):t.column(a.to):t.baseIndent+(l?0:t.unit*s)}const E3=200;function O3(){return et.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let s=t.newDoc,{head:i}=t.newSelection.main,n=s.lineAt(i);if(i>n.from+E3)return t;let o=s.sliceString(n.from,i);if(!e.some(d=>d.test(o)))return t;let{state:r}=t,l=-1,a=[];for(let{head:d}of r.selection.ranges){let u=r.doc.lineAt(d);if(u.from==l)continue;l=u.from;let f=df(r,u.from);if(f==null)continue;let h=/^\s*/.exec(u.text)[0],g=Ir(r,f);h!=g&&a.push({from:u.from,to:u.from+h.length,insert:g})}return a.length?[t,{changes:a,sequential:!0}]:t})}const P3=$e.define(),j3=new Ye;function L3(t,e,s){let i=rs(t);if(i.length<s)return null;let n=i.resolveStack(s,1),o=null;for(let r=n;r;r=r.next){let l=r.node;if(l.to<=s||l.from>s)continue;if(o&&l.from<e)break;let a=l.type.prop(j3);if(a&&(l.to<i.length-50||i.length==t.doc.length||!R3(l))){let d=a(l,t);d&&d.from<=s&&d.from>=e&&d.to>s&&(o=d)}}return o}function R3(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function Ca(t,e,s){for(let i of t.facet(P3)){let n=i(t,e,s);if(n)return n}return L3(t,e,s)}function ty(t,e){let s=e.mapPos(t.from,1),i=e.mapPos(t.to,-1);return s>=i?void 0:{from:s,to:i}}const ou=We.define({map:ty}),Zr=We.define({map:ty});function sy(t){let e=[];for(let{head:s}of t.state.selection.ranges)e.some(i=>i.from<=s&&i.to>=s)||e.push(t.lineBlockAt(s));return e}const zn=Jt.define({create(){return Ne.none},update(t,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((s,i)=>t=lm(t,s,i)),t=t.map(e.changes);for(let s of e.effects)if(s.is(ou)&&!B3(t,s.value.from,s.value.to)){let{preparePlaceholder:i}=e.state.facet(oy),n=i?Ne.replace({widget:new W3(i(e.state,s.value))}):am;t=t.update({add:[n.range(s.value.from,s.value.to)]})}else s.is(Zr)&&(t=t.update({filter:(i,n)=>s.value.from!=i||s.value.to!=n,filterFrom:s.value.from,filterTo:s.value.to}));return e.selection&&(t=lm(t,e.selection.main.head)),t},provide:t=>Te.decorations.from(t),toJSON(t,e){let s=[];return t.between(0,e.doc.length,(i,n)=>{s.push(i,n)}),s},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let s=0;s<t.length;){let i=t[s++],n=t[s++];if(typeof i!="number"||typeof n!="number")throw new RangeError("Invalid JSON for fold state");e.push(am.range(i,n))}return Ne.set(e,!0)}});function lm(t,e,s=e){let i=!1;return t.between(e,s,(n,o)=>{n<s&&o>e&&(i=!0)}),i?t.update({filterFrom:e,filterTo:s,filter:(n,o)=>n>=s||o<=e}):t}function Aa(t,e,s){var i;let n=null;return(i=t.field(zn,!1))===null||i===void 0||i.between(e,s,(o,r)=>{(!n||n.from>o)&&(n={from:o,to:r})}),n}function B3(t,e,s){let i=!1;return t.between(e,e,(n,o)=>{n==e&&o==s&&(i=!0)}),i}function iy(t,e){return t.field(zn,!1)?e:e.concat(We.appendConfig.of(ry()))}const I3=t=>{for(let e of sy(t)){let s=Ca(t.state,e.from,e.to);if(s)return t.dispatch({effects:iy(t.state,[ou.of(s),ny(t,s)])}),!0}return!1},U3=t=>{if(!t.state.field(zn,!1))return!1;let e=[];for(let s of sy(t)){let i=Aa(t.state,s.from,s.to);i&&e.push(Zr.of(i),ny(t,i,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function ny(t,e,s=!0){let i=t.state.doc.lineAt(e.from).number,n=t.state.doc.lineAt(e.to).number;return Te.announce.of(`${t.state.phrase(s?"Folded lines":"Unfolded lines")} ${i} ${t.state.phrase("to")} ${n}.`)}const N3=t=>{let{state:e}=t,s=[];for(let i=0;i<e.doc.length;){let n=t.lineBlockAt(i),o=Ca(e,n.from,n.to);o&&s.push(ou.of(o)),i=(o?t.lineBlockAt(o.to):n).to+1}return s.length&&t.dispatch({effects:iy(t.state,s)}),!!s.length},z3=t=>{let e=t.state.field(zn,!1);if(!e||!e.size)return!1;let s=[];return e.between(0,t.state.doc.length,(i,n)=>{s.push(Zr.of({from:i,to:n}))}),t.dispatch({effects:s}),!0},F3=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:I3},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:U3},{key:"Ctrl-Alt-[",run:N3},{key:"Ctrl-Alt-]",run:z3}],H3={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},oy=$e.define({combine(t){return Si(t,H3)}});function ry(t){return[zn,G3]}function ly(t,e){let{state:s}=t,i=s.facet(oy),n=r=>{let l=t.lineBlockAt(t.posAtDOM(r.target)),a=Aa(t.state,l.from,l.to);a&&t.dispatch({effects:Zr.of(a)}),r.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(t,n,e);let o=document.createElement("span");return o.textContent=i.placeholderText,o.setAttribute("aria-label",s.phrase("folded code")),o.title=s.phrase("unfold"),o.className="cm-foldPlaceholder",o.onclick=n,o}const am=Ne.replace({widget:new class extends pn{toDOM(t){return ly(t,null)}}});class W3 extends pn{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return ly(e,this.value)}}const q3={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class qu extends Ui{constructor(e,s){super(),this.config=e,this.open=s}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let s=document.createElement("span");return s.textContent=this.open?this.config.openText:this.config.closedText,s.title=e.state.phrase(this.open?"Fold line":"Unfold line"),s}}function K3(t={}){let e={...q3,...t},s=new qu(e,!0),i=new qu(e,!1),n=jt.fromClass(class{constructor(r){this.from=r.viewport.from,this.markers=this.buildMarkers(r)}update(r){(r.docChanged||r.viewportChanged||r.startState.facet(hn)!=r.state.facet(hn)||r.startState.field(zn,!1)!=r.state.field(zn,!1)||rs(r.startState)!=rs(r.state)||e.foldingChanged(r))&&(this.markers=this.buildMarkers(r.view))}buildMarkers(r){let l=new Bi;for(let a of r.viewportLineBlocks){let d=Aa(r.state,a.from,a.to)?i:Ca(r.state,a.from,a.to)?s:null;d&&l.add(a.from,a.from,d)}return l.finish()}}),{domEventHandlers:o}=e;return[n,q5({class:"cm-foldGutter",markers(r){var l;return((l=r.plugin(n))===null||l===void 0?void 0:l.markers)||tt.empty},initialSpacer(){return new qu(e,!1)},domEventHandlers:{...o,click:(r,l,a)=>{if(o.click&&o.click(r,l,a))return!0;let d=Aa(r.state,l.from,l.to);if(d)return r.dispatch({effects:Zr.of(d)}),!0;let u=Ca(r.state,l.from,l.to);return u?(r.dispatch({effects:ou.of(u)}),!0):!1}}}),ry()]}const G3=Te.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class el{constructor(e,s){this.specs=e;let i;function n(l){let a=un.newName();return(i||(i=Object.create(null)))["."+a]=l,a}const o=typeof s.all=="string"?s.all:s.all?n(s.all):void 0,r=s.scope;this.scope=r instanceof Qs?l=>l.prop(so)==r.data:r?l=>l==r:void 0,this.style=Qv(e.map(l=>({tag:l.tag,class:l.class||n(Object.assign({},l,{tag:null}))})),{all:o}).style,this.module=i?new un(i):null,this.themeType=s.themeType}static define(e,s){return new el(e,s||{})}}const ac=$e.define(),ay=$e.define({combine(t){return t.length?[t[0]]:null}});function Ku(t){let e=t.facet(ac);return e.length?e:t.facet(ay)}function uy(t,e){let s=[Y3],i;return t instanceof el&&(t.module&&s.push(Te.styleModule.of(t.module)),i=t.themeType),e?.fallback?s.push(ay.of(t)):i?s.push(ac.computeN([Te.darkTheme],n=>n.facet(Te.darkTheme)==(i=="dark")?[t]:[])):s.push(ac.of(t)),s}class J3{constructor(e){this.markCache=Object.create(null),this.tree=rs(e.state),this.decorations=this.buildDeco(e,Ku(e.state)),this.decoratedTo=e.viewport.to}update(e){let s=rs(e.state),i=Ku(e.state),n=i!=Ku(e.startState),{viewport:o}=e.view,r=e.changes.mapPos(this.decoratedTo,1);s.length<o.to&&!n&&s.type==this.tree.type&&r>=o.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=r):(s!=this.tree||e.viewportChanged||n)&&(this.tree=s,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=o.to)}buildDeco(e,s){if(!s||!this.tree.length)return Ne.none;let i=new Bi;for(let{from:n,to:o}of e.visibleRanges)v3(this.tree,s,(r,l,a)=>{i.add(r,l,this.markCache[a]||(this.markCache[a]=Ne.mark({class:a})))},n,o);return i.finish()}}const Y3=Hn.high(jt.fromClass(J3,{decorations:t=>t.decorations})),Q3=el.define([{tag:Ve.meta,color:"#404740"},{tag:Ve.link,textDecoration:"underline"},{tag:Ve.heading,textDecoration:"underline",fontWeight:"bold"},{tag:Ve.emphasis,fontStyle:"italic"},{tag:Ve.strong,fontWeight:"bold"},{tag:Ve.strikethrough,textDecoration:"line-through"},{tag:Ve.keyword,color:"#708"},{tag:[Ve.atom,Ve.bool,Ve.url,Ve.contentSeparator,Ve.labelName],color:"#219"},{tag:[Ve.literal,Ve.inserted],color:"#164"},{tag:[Ve.string,Ve.deleted],color:"#a11"},{tag:[Ve.regexp,Ve.escape,Ve.special(Ve.string)],color:"#e40"},{tag:Ve.definition(Ve.variableName),color:"#00f"},{tag:Ve.local(Ve.variableName),color:"#30a"},{tag:[Ve.typeName,Ve.namespace],color:"#085"},{tag:Ve.className,color:"#167"},{tag:[Ve.special(Ve.variableName),Ve.macroName],color:"#256"},{tag:Ve.definition(Ve.propertyName),color:"#00c"},{tag:Ve.comment,color:"#940"},{tag:Ve.invalid,color:"#f00"}]),X3=Te.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),dy=1e4,cy="()[]{}",fy=$e.define({combine(t){return Si(t,{afterCursor:!0,brackets:cy,maxScanDistance:dy,renderMatch:tA})}}),Z3=Ne.mark({class:"cm-matchingBracket"}),eA=Ne.mark({class:"cm-nonmatchingBracket"});function tA(t){let e=[],s=t.matched?Z3:eA;return e.push(s.range(t.start.from,t.start.to)),t.end&&e.push(s.range(t.end.from,t.end.to)),e}const sA=Jt.define({create(){return Ne.none},update(t,e){if(!e.docChanged&&!e.selection)return t;let s=[],i=e.state.facet(fy);for(let n of e.state.selection.ranges){if(!n.empty)continue;let o=bi(e.state,n.head,-1,i)||n.head>0&&bi(e.state,n.head-1,1,i)||i.afterCursor&&(bi(e.state,n.head,1,i)||n.head<e.state.doc.length&&bi(e.state,n.head+1,-1,i));o&&(s=s.concat(i.renderMatch(o,e.state)))}return Ne.set(s,!0)},provide:t=>Te.decorations.from(t)}),iA=[sA,X3];function nA(t={}){return[fy.of(t),iA]}const oA=new Ye;function uc(t,e,s){let i=t.prop(e<0?Ye.openedBy:Ye.closedBy);if(i)return i;if(t.name.length==1){let n=s.indexOf(t.name);if(n>-1&&n%2==(e<0?1:0))return[s[n+e]]}return null}function dc(t){let e=t.type.prop(oA);return e?e(t.node):t}function bi(t,e,s,i={}){let n=i.maxScanDistance||dy,o=i.brackets||cy,r=rs(t),l=r.resolveInner(e,s);for(let a=l;a;a=a.parent){let d=uc(a.type,s,o);if(d&&a.from<a.to){let u=dc(a);if(u&&(s>0?e>=u.from&&e<u.to:e>u.from&&e<=u.to))return rA(t,e,s,a,u,d,o)}}return lA(t,e,s,r,l.type,n,o)}function rA(t,e,s,i,n,o,r){let l=i.parent,a={from:n.from,to:n.to},d=0,u=l?.cursor();if(u&&(s<0?u.childBefore(i.from):u.childAfter(i.to)))do if(s<0?u.to<=i.from:u.from>=i.to){if(d==0&&o.indexOf(u.type.name)>-1&&u.from<u.to){let f=dc(u);return{start:a,end:f?{from:f.from,to:f.to}:void 0,matched:!0}}else if(uc(u.type,s,r))d++;else if(uc(u.type,-s,r)){if(d==0){let f=dc(u);return{start:a,end:f&&f.from<f.to?{from:f.from,to:f.to}:void 0,matched:!1}}d--}}while(s<0?u.prevSibling():u.nextSibling());return{start:a,matched:!1}}function lA(t,e,s,i,n,o,r){let l=s<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),a=r.indexOf(l);if(a<0||a%2==0!=s>0)return null;let d={from:s<0?e-1:e,to:s>0?e+1:e},u=t.doc.iterRange(e,s>0?t.doc.length:0),f=0;for(let h=0;!u.next().done&&h<=o;){let g=u.value;s<0&&(h+=g.length);let _=e+h*s;for(let p=s>0?0:g.length-1,V=s>0?g.length:-1;p!=V;p+=s){let M=r.indexOf(g[p]);if(!(M<0||i.resolveInner(_+p,1).type!=n))if(M%2==0==s>0)f++;else{if(f==1)return{start:d,end:{from:_+p,to:_+p+1},matched:M>>1==a>>1};f--}}s>0&&(h+=g.length)}return u.done?{start:d,matched:!1}:null}function um(t,e,s,i=0,n=0){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));let o=n;for(let r=i;r<e;r++)t.charCodeAt(r)==9?o+=s-o%s:o++;return o}class hy{constructor(e,s,i,n){this.string=e,this.tabSize=s,this.indentUnit=i,this.overrideIndent=n,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let s=this.string.charAt(this.pos),i;if(typeof e=="string"?i=s==e:i=s&&(e instanceof RegExp?e.test(s):e(s)),i)return++this.pos,s}eatWhile(e){let s=this.pos;for(;this.eat(e););return this.pos>s}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let s=this.string.indexOf(e,this.pos);if(s>-1)return this.pos=s,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=um(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:um(this.string,null,this.tabSize)}match(e,s,i){if(typeof e=="string"){let n=r=>i?r.toLowerCase():r,o=this.string.substr(this.pos,e.length);return n(o)==n(e)?(s!==!1&&(this.pos+=e.length),!0):null}else{let n=this.string.slice(this.pos).match(e);return n&&n.index>0?null:(n&&s!==!1&&(this.pos+=n[0].length),n)}}current(){return this.string.slice(this.start,this.pos)}}function aA(t){return{name:t.name||"",token:t.token,blankLine:t.blankLine||(()=>{}),startState:t.startState||(()=>!0),copyState:t.copyState||uA,indent:t.indent||(()=>null),languageData:t.languageData||{},tokenTable:t.tokenTable||pf,mergeTokens:t.mergeTokens!==!1}}function uA(t){if(typeof t!="object")return t;let e={};for(let s in t){let i=t[s];e[s]=i instanceof Array?i.slice():i}return e}const dm=new WeakMap;class ff extends Qs{constructor(e){let s=k3(e.languageData),i=aA(e),n,o=new class extends Jv{createParse(r,l,a){return new cA(n,r,l,a)}};super(s,o,[],e.name),this.topNode=pA(s,this),n=this,this.streamParser=i,this.stateAfter=new Ye({perNode:!0}),this.tokenTable=e.tokenTable?new vy(i.tokenTable):hA}static define(e){return new ff(e)}getIndent(e){let s,{overrideIndentation:i}=e.options;i&&(s=dm.get(e.state),s!=null&&s<e.pos-1e4&&(s=void 0));let n=hf(this,e.node.tree,e.node.from,e.node.from,s??e.pos),o,r;if(n?(r=n.state,o=n.pos+1):(r=this.streamParser.startState(e.unit),o=e.node.from),e.pos-o>1e4)return null;for(;o<e.pos;){let a=e.state.doc.lineAt(o),d=Math.min(e.pos,a.to);if(a.length){let u=i?i(a.from):-1,f=new hy(a.text,e.state.tabSize,e.unit,u<0?void 0:u);for(;f.pos<d-a.from;)my(this.streamParser.token,f,r)}else this.streamParser.blankLine(r,e.unit);if(d==e.pos)break;o=a.to+1}let l=e.lineAt(e.pos);return i&&s==null&&dm.set(e.state,l.from),this.streamParser.indent(r,/^\s*(.*)/.exec(l.text)[1],e)}get allowsNesting(){return!1}}function hf(t,e,s,i,n){let o=s>=i&&s+e.length<=n&&e.prop(t.stateAfter);if(o)return{state:t.streamParser.copyState(o),pos:s+e.length};for(let r=e.children.length-1;r>=0;r--){let l=e.children[r],a=s+e.positions[r],d=l instanceof Ct&&a<n&&hf(t,l,a,i,n);if(d)return d}return null}function py(t,e,s,i,n){if(n&&s<=0&&i>=e.length)return e;!n&&s==0&&e.type==t.topNode&&(n=!0);for(let o=e.children.length-1;o>=0;o--){let r=e.positions[o],l=e.children[o],a;if(r<i&&l instanceof Ct){if(!(a=py(t,l,s-r,i-r,n)))break;return n?new Ct(e.type,e.children.slice(0,o).concat(a),e.positions.slice(0,o+1),r+a.length):a}}return null}function dA(t,e,s,i,n){for(let o of e){let r=o.from+(o.openStart?25:0),l=o.to-(o.openEnd?25:0),a=r<=s&&l>s&&hf(t,o.tree,0-o.offset,s,l),d;if(a&&a.pos<=i&&(d=py(t,o.tree,s+o.offset,a.pos+o.offset,!1)))return{state:a.state,tree:d}}return{state:t.streamParser.startState(n?Nn(n):4),tree:Ct.empty}}class cA{constructor(e,s,i,n){this.lang=e,this.input=s,this.fragments=i,this.ranges=n,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=n[n.length-1].to;let o=Co.get(),r=n[0].from,{state:l,tree:a}=dA(e,i,r,this.to,o?.state);this.state=l,this.parsedPos=this.chunkStart=r+a.length;for(let d=0;d<a.children.length;d++)this.chunks.push(a.children[d]),this.chunkPos.push(a.positions[d]);o&&this.parsedPos<o.viewport.from-1e5&&n.some(d=>d.from<=o.viewport.from&&d.to>=o.viewport.from)&&(this.state=this.lang.streamParser.startState(Nn(o.state)),o.skipUntilInView(this.parsedPos,o.viewport.from),this.parsedPos=o.viewport.from),this.moveRangeIndex()}advance(){let e=Co.get(),s=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),i=Math.min(s,this.chunkStart+512);for(e&&(i=Math.min(i,e.viewport.to));this.parsedPos<i;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=s?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,s),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let s=this.input.chunk(e);if(this.input.lineChunks)s==`
`&&(s="");else{let i=s.indexOf(`
`);i>-1&&(s=s.slice(0,i))}return e+s.length<=this.to?s:s.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,s=this.lineAfter(e),i=e+s.length;for(let n=this.rangeIndex;;){let o=this.ranges[n].to;if(o>=i||(s=s.slice(0,o-(i-s.length)),n++,n==this.ranges.length))break;let r=this.ranges[n].from,l=this.lineAfter(r);s+=l,i=r+l.length}return{line:s,end:i}}skipGapsTo(e,s,i){for(;;){let n=this.ranges[this.rangeIndex].to,o=e+s;if(i>0?n>o:n>=o)break;let r=this.ranges[++this.rangeIndex].from;s+=r-n}return s}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,s,i,n){let o=4;if(this.ranges.length>1){n=this.skipGapsTo(s,n,1),s+=n;let l=this.chunk.length;n=this.skipGapsTo(i,n,-1),i+=n,o+=this.chunk.length-l}let r=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&o==4&&r>=0&&this.chunk[r]==e&&this.chunk[r+2]==s?this.chunk[r+2]=i:this.chunk.push(e,s,i,o),n}parseLine(e){let{line:s,end:i}=this.nextLine(),n=0,{streamParser:o}=this.lang,r=new hy(s,e?e.state.tabSize:4,e?Nn(e.state):2);if(r.eol())o.blankLine(this.state,r.indentUnit);else for(;!r.eol();){let l=my(o.token,r,this.state);if(l&&(n=this.emitToken(this.lang.tokenTable.resolve(l),this.parsedPos+r.start,this.parsedPos+r.pos,n)),r.start>1e4)break}this.parsedPos=i,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=Ct.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:fA,topID:0,maxBufferLength:512,reused:this.chunkReused});e=new Ct(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new Ct(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function my(t,e,s){e.start=e.pos;for(let i=0;i<10;i++){let n=t(e,s);if(e.pos>e.start)return n}throw new Error("Stream parser failed to advance stream.")}const pf=Object.create(null),Ur=[Ss.none],fA=new of(Ur),cm=[],fm=Object.create(null),gy=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])gy[t]=yy(pf,e);class vy{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),gy)}resolve(e){return e?this.table[e]||(this.table[e]=yy(this.extra,e)):0}}const hA=new vy(pf);function Gu(t,e){cm.indexOf(t)>-1||(cm.push(t),console.warn(e))}function yy(t,e){let s=[];for(let l of e.split(" ")){let a=[];for(let d of l.split(".")){let u=t[d]||Ve[d];u?typeof u=="function"?a.length?a=a.map(u):Gu(d,`Modifier ${d} used at start of tag`):a.length?Gu(d,`Tag ${d} used as modifier`):a=Array.isArray(u)?u:[u]:Gu(d,`Unknown highlighting tag ${d}`)}for(let d of a)s.push(d)}if(!s.length)return 0;let i=e.replace(/ /g,"_"),n=i+" "+s.map(l=>l.id),o=fm[n];if(o)return o.id;let r=fm[n]=Ss.define({id:Ur.length,name:i,props:[m3({[i]:s})]});return Ur.push(r),r.id}function pA(t,e){let s=Ss.define({id:Ur.length,name:"Document",props:[so.add(()=>t),Zv.add(()=>i=>e.getIndent(i))],top:!0});return Ur.push(s),s}xt.RTL,xt.LTR;const mA=t=>{let{state:e}=t,s=e.doc.lineAt(e.selection.main.from),i=gf(t.state,s.from);return i.line?gA(t):i.block?yA(t):!1};function mf(t,e){return({state:s,dispatch:i})=>{if(s.readOnly)return!1;let n=t(e,s);return n?(i(s.update(n)),!0):!1}}const gA=mf(xA,0),vA=mf(by,0),yA=mf((t,e)=>by(t,e,kA(e)),0);function gf(t,e){let s=t.languageDataAt("commentTokens",e,1);return s.length?s[0]:{}}const Qo=50;function bA(t,{open:e,close:s},i,n){let o=t.sliceDoc(i-Qo,i),r=t.sliceDoc(n,n+Qo),l=/\s*$/.exec(o)[0].length,a=/^\s*/.exec(r)[0].length,d=o.length-l;if(o.slice(d-e.length,d)==e&&r.slice(a,a+s.length)==s)return{open:{pos:i-l,margin:l&&1},close:{pos:n+a,margin:a&&1}};let u,f;n-i<=2*Qo?u=f=t.sliceDoc(i,n):(u=t.sliceDoc(i,i+Qo),f=t.sliceDoc(n-Qo,n));let h=/^\s*/.exec(u)[0].length,g=/\s*$/.exec(f)[0].length,_=f.length-g-s.length;return u.slice(h,h+e.length)==e&&f.slice(_,_+s.length)==s?{open:{pos:i+h+e.length,margin:/\s/.test(u.charAt(h+e.length))?1:0},close:{pos:n-g-s.length,margin:/\s/.test(f.charAt(_-1))?1:0}}:null}function kA(t){let e=[];for(let s of t.selection.ranges){let i=t.doc.lineAt(s.from),n=s.to<=i.to?i:t.doc.lineAt(s.to);n.from>i.from&&n.from==s.to&&(n=s.to==i.to+1?i:t.doc.lineAt(s.to-1));let o=e.length-1;o>=0&&e[o].to>i.from?e[o].to=n.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:n.to})}return e}function by(t,e,s=e.selection.ranges){let i=s.map(o=>gf(e,o.from).block);if(!i.every(o=>o))return null;let n=s.map((o,r)=>bA(e,i[r],o.from,o.to));if(t!=2&&!n.every(o=>o))return{changes:e.changes(s.map((o,r)=>n[r]?[]:[{from:o.from,insert:i[r].open+" "},{from:o.to,insert:" "+i[r].close}]))};if(t!=1&&n.some(o=>o)){let o=[];for(let r=0,l;r<n.length;r++)if(l=n[r]){let a=i[r],{open:d,close:u}=l;o.push({from:d.pos-a.open.length,to:d.pos+d.margin},{from:u.pos-u.margin,to:u.pos+a.close.length})}return{changes:o}}return null}function xA(t,e,s=e.selection.ranges){let i=[],n=-1;for(let{from:o,to:r}of s){let l=i.length,a=1e9,d=gf(e,o).line;if(d){for(let u=o;u<=r;){let f=e.doc.lineAt(u);if(f.from>n&&(o==r||r>f.from)){n=f.from;let h=/^\s*/.exec(f.text)[0].length,g=h==f.length,_=f.text.slice(h,h+d.length)==d?h:-1;h<f.text.length&&h<a&&(a=h),i.push({line:f,comment:_,token:d,indent:h,empty:g,single:!1})}u=f.to+1}if(a<1e9)for(let u=l;u<i.length;u++)i[u].indent<i[u].line.text.length&&(i[u].indent=a);i.length==l+1&&(i[l].single=!0)}}if(t!=2&&i.some(o=>o.comment<0&&(!o.empty||o.single))){let o=[];for(let{line:l,token:a,indent:d,empty:u,single:f}of i)(f||!u)&&o.push({from:l.from+d,insert:a+" "});let r=e.changes(o);return{changes:r,selection:e.selection.map(r,1)}}else if(t!=1&&i.some(o=>o.comment>=0)){let o=[];for(let{line:r,comment:l,token:a}of i)if(l>=0){let d=r.from+l,u=d+a.length;r.text[u-r.from]==" "&&u++,o.push({from:d,to:u})}return{changes:o}}return null}const cc=zi.define(),wA=zi.define(),_A=$e.define(),ky=$e.define({combine(t){return Si(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,s)=>s},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,s)=>(i,n)=>e(i,n)||s(i,n)})}}),xy=Jt.define({create(){return ki.empty},update(t,e){let s=e.state.facet(ky),i=e.annotation(cc);if(i){let a=_s.fromTransaction(e,i.selection),d=i.side,u=d==0?t.undone:t.done;return a?u=Va(u,u.length,s.minDepth,a):u=Sy(u,e.startState.selection),new ki(d==0?i.rest:u,d==0?u:i.rest)}let n=e.annotation(wA);if((n=="full"||n=="before")&&(t=t.isolate()),e.annotation(Bt.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let o=_s.fromTransaction(e),r=e.annotation(Bt.time),l=e.annotation(Bt.userEvent);return o?t=t.addChanges(o,r,l,s,e):e.selection&&(t=t.addSelection(e.startState.selection,r,l,s.newGroupDelay)),(n=="full"||n=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new ki(t.done.map(_s.fromJSON),t.undone.map(_s.fromJSON))}});function SA(t={}){return[xy,ky.of(t),Te.domEventHandlers({beforeinput(e,s){let i=e.inputType=="historyUndo"?wy:e.inputType=="historyRedo"?fc:null;return i?(e.preventDefault(),i(s)):!1}})]}function ru(t,e){return function({state:s,dispatch:i}){if(!e&&s.readOnly)return!1;let n=s.field(xy,!1);if(!n)return!1;let o=n.pop(t,s,e);return o?(i(o),!0):!1}}const wy=ru(0,!1),fc=ru(1,!1),CA=ru(0,!0),AA=ru(1,!0);class _s{constructor(e,s,i,n,o){this.changes=e,this.effects=s,this.mapped=i,this.startSelection=n,this.selectionsAfter=o}setSelAfter(e){return new _s(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,s,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(s=this.mapped)===null||s===void 0?void 0:s.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(n=>n.toJSON())}}static fromJSON(e){return new _s(e.changes&&Rt.fromJSON(e.changes),[],e.mapped&&wi.fromJSON(e.mapped),e.startSelection&&fe.fromJSON(e.startSelection),e.selectionsAfter.map(fe.fromJSON))}static fromTransaction(e,s){let i=Bs;for(let n of e.startState.facet(_A)){let o=n(e);o.length&&(i=i.concat(o))}return!i.length&&e.changes.empty?null:new _s(e.changes.invert(e.startState.doc),i,void 0,s||e.startState.selection,Bs)}static selection(e){return new _s(void 0,Bs,void 0,void 0,e)}}function Va(t,e,s,i){let n=e+1>s+20?e-s-1:0,o=t.slice(n,e);return o.push(i),o}function VA(t,e){let s=[],i=!1;return t.iterChangedRanges((n,o)=>s.push(n,o)),e.iterChangedRanges((n,o,r,l)=>{for(let a=0;a<s.length;){let d=s[a++],u=s[a++];l>=d&&r<=u&&(i=!0)}}),i}function MA(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((s,i)=>s.empty!=e.ranges[i].empty).length===0}function _y(t,e){return t.length?e.length?t.concat(e):t:e}const Bs=[],DA=200;function Sy(t,e){if(t.length){let s=t[t.length-1],i=s.selectionsAfter.slice(Math.max(0,s.selectionsAfter.length-DA));return i.length&&i[i.length-1].eq(e)?t:(i.push(e),Va(t,t.length-1,1e9,s.setSelAfter(i)))}else return[_s.selection([e])]}function TA(t){let e=t[t.length-1],s=t.slice();return s[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),s}function Ju(t,e){if(!t.length)return t;let s=t.length,i=Bs;for(;s;){let n=$A(t[s-1],e,i);if(n.changes&&!n.changes.empty||n.effects.length){let o=t.slice(0,s);return o[s-1]=n,o}else e=n.mapped,s--,i=n.selectionsAfter}return i.length?[_s.selection(i)]:Bs}function $A(t,e,s){let i=_y(t.selectionsAfter.length?t.selectionsAfter.map(l=>l.map(e)):Bs,s);if(!t.changes)return _s.selection(i);let n=t.changes.map(e),o=e.mapDesc(t.changes,!0),r=t.mapped?t.mapped.composeDesc(o):o;return new _s(n,We.mapEffects(t.effects,e),r,t.startSelection.map(o),i)}const EA=/^(input\.type|delete)($|\.)/;class ki{constructor(e,s,i=0,n=void 0){this.done=e,this.undone=s,this.prevTime=i,this.prevUserEvent=n}isolate(){return this.prevTime?new ki(this.done,this.undone):this}addChanges(e,s,i,n,o){let r=this.done,l=r[r.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!i||EA.test(i))&&(!l.selectionsAfter.length&&s-this.prevTime<n.newGroupDelay&&n.joinToEvent(o,VA(l.changes,e.changes))||i=="input.type.compose")?r=Va(r,r.length-1,n.minDepth,new _s(e.changes.compose(l.changes),_y(We.mapEffects(e.effects,l.changes),l.effects),l.mapped,l.startSelection,Bs)):r=Va(r,r.length,n.minDepth,e),new ki(r,Bs,s,i)}addSelection(e,s,i,n){let o=this.done.length?this.done[this.done.length-1].selectionsAfter:Bs;return o.length>0&&s-this.prevTime<n&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&MA(o[o.length-1],e)?this:new ki(Sy(this.done,e),this.undone,s,i)}addMapping(e){return new ki(Ju(this.done,e),Ju(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,s,i){let n=e==0?this.done:this.undone;if(n.length==0)return null;let o=n[n.length-1],r=o.selectionsAfter[0]||s.selection;if(i&&o.selectionsAfter.length)return s.update({selection:o.selectionsAfter[o.selectionsAfter.length-1],annotations:cc.of({side:e,rest:TA(n),selection:r}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(o.changes){let l=n.length==1?Bs:n.slice(0,n.length-1);return o.mapped&&(l=Ju(l,o.mapped)),s.update({changes:o.changes,selection:o.startSelection,effects:o.effects,annotations:cc.of({side:e,rest:l,selection:r}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}ki.empty=new ki(Bs,Bs);const OA=[{key:"Mod-z",run:wy,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:fc,preventDefault:!0},{linux:"Ctrl-Shift-z",run:fc,preventDefault:!0},{key:"Mod-u",run:CA,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:AA,preventDefault:!0}];function Po(t,e){return fe.create(t.ranges.map(e),t.mainIndex)}function oi(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function ri({state:t,dispatch:e},s){let i=Po(t.selection,s);return i.eq(t.selection,!0)?!1:(e(oi(t,i)),!0)}function lu(t,e){return fe.cursor(e?t.to:t.from)}function Cy(t,e){return ri(t,s=>s.empty?t.moveByChar(s,e):lu(s,e))}function ls(t){return t.textDirectionAt(t.state.selection.main.head)==xt.LTR}const Ay=t=>Cy(t,!ls(t)),Vy=t=>Cy(t,ls(t));function My(t,e){return ri(t,s=>s.empty?t.moveByGroup(s,e):lu(s,e))}const PA=t=>My(t,!ls(t)),jA=t=>My(t,ls(t));function LA(t,e,s){if(e.type.prop(s))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function au(t,e,s){let i=rs(t).resolveInner(e.head),n=s?Ye.closedBy:Ye.openedBy;for(let a=e.head;;){let d=s?i.childAfter(a):i.childBefore(a);if(!d)break;LA(t,d,n)?i=d:a=s?d.to:d.from}let o=i.type.prop(n),r,l;return o&&(r=s?bi(t,i.from,1):bi(t,i.to,-1))&&r.matched?l=s?r.end.to:r.end.from:l=s?i.to:i.from,fe.cursor(l,s?-1:1)}const RA=t=>ri(t,e=>au(t.state,e,!ls(t))),BA=t=>ri(t,e=>au(t.state,e,ls(t)));function Dy(t,e){return ri(t,s=>{if(!s.empty)return lu(s,e);let i=t.moveVertically(s,e);return i.head!=s.head?i:t.moveToLineBoundary(s,e)})}const Ty=t=>Dy(t,!1),$y=t=>Dy(t,!0);function Ey(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,s=0,i=0,n;if(e){for(let o of t.state.facet(Te.scrollMargins)){let r=o(t);r?.top&&(s=Math.max(r?.top,s)),r?.bottom&&(i=Math.max(r?.bottom,i))}n=t.scrollDOM.clientHeight-s-i}else n=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:s,marginBottom:i,selfScroll:e,height:Math.max(t.defaultLineHeight,n-5)}}function Oy(t,e){let s=Ey(t),{state:i}=t,n=Po(i.selection,r=>r.empty?t.moveVertically(r,e,s.height):lu(r,e));if(n.eq(i.selection))return!1;let o;if(s.selfScroll){let r=t.coordsAtPos(i.selection.main.head),l=t.scrollDOM.getBoundingClientRect(),a=l.top+s.marginTop,d=l.bottom-s.marginBottom;r&&r.top>a&&r.bottom<d&&(o=Te.scrollIntoView(n.main.head,{y:"start",yMargin:r.top-a}))}return t.dispatch(oi(i,n),{effects:o}),!0}const hm=t=>Oy(t,!1),hc=t=>Oy(t,!0);function mn(t,e,s){let i=t.lineBlockAt(e.head),n=t.moveToLineBoundary(e,s);if(n.head==e.head&&n.head!=(s?i.to:i.from)&&(n=t.moveToLineBoundary(e,s,!1)),!s&&n.head==i.from&&i.length){let o=/^\s*/.exec(t.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;o&&e.head!=i.from+o&&(n=fe.cursor(i.from+o))}return n}const IA=t=>ri(t,e=>mn(t,e,!0)),UA=t=>ri(t,e=>mn(t,e,!1)),NA=t=>ri(t,e=>mn(t,e,!ls(t))),zA=t=>ri(t,e=>mn(t,e,ls(t))),FA=t=>ri(t,e=>fe.cursor(t.lineBlockAt(e.head).from,1)),HA=t=>ri(t,e=>fe.cursor(t.lineBlockAt(e.head).to,-1));function WA(t,e,s){let i=!1,n=Po(t.selection,o=>{let r=bi(t,o.head,-1)||bi(t,o.head,1)||o.head>0&&bi(t,o.head-1,1)||o.head<t.doc.length&&bi(t,o.head+1,-1);if(!r||!r.end)return o;i=!0;let l=r.start.from==o.head?r.end.to:r.end.from;return fe.cursor(l)});return i?(e(oi(t,n)),!0):!1}const qA=({state:t,dispatch:e})=>WA(t,e);function qs(t,e){let s=Po(t.state.selection,i=>{let n=e(i);return fe.range(i.anchor,n.head,n.goalColumn,n.bidiLevel||void 0)});return s.eq(t.state.selection)?!1:(t.dispatch(oi(t.state,s)),!0)}function Py(t,e){return qs(t,s=>t.moveByChar(s,e))}const jy=t=>Py(t,!ls(t)),Ly=t=>Py(t,ls(t));function Ry(t,e){return qs(t,s=>t.moveByGroup(s,e))}const KA=t=>Ry(t,!ls(t)),GA=t=>Ry(t,ls(t)),JA=t=>qs(t,e=>au(t.state,e,!ls(t))),YA=t=>qs(t,e=>au(t.state,e,ls(t)));function By(t,e){return qs(t,s=>t.moveVertically(s,e))}const Iy=t=>By(t,!1),Uy=t=>By(t,!0);function Ny(t,e){return qs(t,s=>t.moveVertically(s,e,Ey(t).height))}const pm=t=>Ny(t,!1),mm=t=>Ny(t,!0),QA=t=>qs(t,e=>mn(t,e,!0)),XA=t=>qs(t,e=>mn(t,e,!1)),ZA=t=>qs(t,e=>mn(t,e,!ls(t))),e8=t=>qs(t,e=>mn(t,e,ls(t))),t8=t=>qs(t,e=>fe.cursor(t.lineBlockAt(e.head).from)),s8=t=>qs(t,e=>fe.cursor(t.lineBlockAt(e.head).to)),gm=({state:t,dispatch:e})=>(e(oi(t,{anchor:0})),!0),vm=({state:t,dispatch:e})=>(e(oi(t,{anchor:t.doc.length})),!0),ym=({state:t,dispatch:e})=>(e(oi(t,{anchor:t.selection.main.anchor,head:0})),!0),bm=({state:t,dispatch:e})=>(e(oi(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),i8=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),n8=({state:t,dispatch:e})=>{let s=uu(t).map(({from:i,to:n})=>fe.range(i,Math.min(n+1,t.doc.length)));return e(t.update({selection:fe.create(s),userEvent:"select"})),!0},o8=({state:t,dispatch:e})=>{let s=Po(t.selection,i=>{let n=rs(t),o=n.resolveStack(i.from,1);if(i.empty){let r=n.resolveStack(i.from,-1);r.node.from>=o.node.from&&r.node.to<=o.node.to&&(o=r)}for(let r=o;r;r=r.next){let{node:l}=r;if((l.from<i.from&&l.to>=i.to||l.to>i.to&&l.from<=i.from)&&r.next)return fe.range(l.to,l.from)}return i});return s.eq(t.selection)?!1:(e(oi(t,s)),!0)};function zy(t,e){let{state:s}=t,i=s.selection,n=s.selection.ranges.slice();for(let o of s.selection.ranges){let r=s.doc.lineAt(o.head);if(e?r.to<t.state.doc.length:r.from>0)for(let l=o;;){let a=t.moveVertically(l,e);if(a.head<r.from||a.head>r.to){n.some(d=>d.head==a.head)||n.push(a);break}else{if(a.head==l.head)break;l=a}}}return n.length==i.ranges.length?!1:(t.dispatch(oi(s,fe.create(n,n.length-1))),!0)}const r8=t=>zy(t,!1),l8=t=>zy(t,!0),a8=({state:t,dispatch:e})=>{let s=t.selection,i=null;return s.ranges.length>1?i=fe.create([s.main]):s.main.empty||(i=fe.create([fe.cursor(s.main.head)])),i?(e(oi(t,i)),!0):!1};function tl(t,e){if(t.state.readOnly)return!1;let s="delete.selection",{state:i}=t,n=i.changeByRange(o=>{let{from:r,to:l}=o;if(r==l){let a=e(o);a<r?(s="delete.backward",a=Ll(t,a,!1)):a>r&&(s="delete.forward",a=Ll(t,a,!0)),r=Math.min(r,a),l=Math.max(l,a)}else r=Ll(t,r,!1),l=Ll(t,l,!0);return r==l?{range:o}:{changes:{from:r,to:l},range:fe.cursor(r,r<o.head?-1:1)}});return n.changes.empty?!1:(t.dispatch(i.update(n,{scrollIntoView:!0,userEvent:s,effects:s=="delete.selection"?Te.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function Ll(t,e,s){if(t instanceof Te)for(let i of t.state.facet(Te.atomicRanges).map(n=>n(t)))i.between(e,e,(n,o)=>{n<e&&o>e&&(e=s?o:n)});return e}const Fy=(t,e,s)=>tl(t,i=>{let n=i.from,{state:o}=t,r=o.doc.lineAt(n),l,a;if(s&&!e&&n>r.from&&n<r.from+200&&!/[^ \t]/.test(l=r.text.slice(0,n-r.from))){if(l[l.length-1]=="	")return n-1;let d=Oo(l,o.tabSize),u=d%Nn(o)||Nn(o);for(let f=0;f<u&&l[l.length-1-f]==" ";f++)n--;a=n}else a=Gt(r.text,n-r.from,e,e)+r.from,a==n&&r.number!=(e?o.doc.lines:1)?a+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(r.text.slice(a-r.from,n-r.from))&&(a=Gt(r.text,a-r.from,!1,!1)+r.from);return a}),pc=t=>Fy(t,!1,!0),Hy=t=>Fy(t,!0,!1),Wy=(t,e)=>tl(t,s=>{let i=s.head,{state:n}=t,o=n.doc.lineAt(i),r=n.charCategorizer(i);for(let l=null;;){if(i==(e?o.to:o.from)){i==s.head&&o.number!=(e?n.doc.lines:1)&&(i+=e?1:-1);break}let a=Gt(o.text,i-o.from,e)+o.from,d=o.text.slice(Math.min(i,a)-o.from,Math.max(i,a)-o.from),u=r(d);if(l!=null&&u!=l)break;(d!=" "||i!=s.head)&&(l=u),i=a}return i}),qy=t=>Wy(t,!1),u8=t=>Wy(t,!0),d8=t=>tl(t,e=>{let s=t.lineBlockAt(e.head).to;return e.head<s?s:Math.min(t.state.doc.length,e.head+1)}),c8=t=>tl(t,e=>{let s=t.moveToLineBoundary(e,!1).head;return e.head>s?s:Math.max(0,e.head-1)}),f8=t=>tl(t,e=>{let s=t.moveToLineBoundary(e,!0).head;return e.head<s?s:Math.min(t.state.doc.length,e.head+1)}),h8=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let s=t.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:st.of(["",""])},range:fe.cursor(i.from)}));return e(t.update(s,{scrollIntoView:!0,userEvent:"input"})),!0},p8=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let s=t.changeByRange(i=>{if(!i.empty||i.from==0||i.from==t.doc.length)return{range:i};let n=i.from,o=t.doc.lineAt(n),r=n==o.from?n-1:Gt(o.text,n-o.from,!1)+o.from,l=n==o.to?n+1:Gt(o.text,n-o.from,!0)+o.from;return{changes:{from:r,to:l,insert:t.doc.slice(n,l).append(t.doc.slice(r,n))},range:fe.cursor(l)}});return s.changes.empty?!1:(e(t.update(s,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function uu(t){let e=[],s=-1;for(let i of t.selection.ranges){let n=t.doc.lineAt(i.from),o=t.doc.lineAt(i.to);if(!i.empty&&i.to==o.from&&(o=t.doc.lineAt(i.to-1)),s>=n.number){let r=e[e.length-1];r.to=o.to,r.ranges.push(i)}else e.push({from:n.from,to:o.to,ranges:[i]});s=o.number+1}return e}function Ky(t,e,s){if(t.readOnly)return!1;let i=[],n=[];for(let o of uu(t)){if(s?o.to==t.doc.length:o.from==0)continue;let r=t.doc.lineAt(s?o.to+1:o.from-1),l=r.length+1;if(s){i.push({from:o.to,to:r.to},{from:o.from,insert:r.text+t.lineBreak});for(let a of o.ranges)n.push(fe.range(Math.min(t.doc.length,a.anchor+l),Math.min(t.doc.length,a.head+l)))}else{i.push({from:r.from,to:o.from},{from:o.to,insert:t.lineBreak+r.text});for(let a of o.ranges)n.push(fe.range(a.anchor-l,a.head-l))}}return i.length?(e(t.update({changes:i,scrollIntoView:!0,selection:fe.create(n,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const m8=({state:t,dispatch:e})=>Ky(t,e,!1),g8=({state:t,dispatch:e})=>Ky(t,e,!0);function Gy(t,e,s){if(t.readOnly)return!1;let i=[];for(let n of uu(t))s?i.push({from:n.from,insert:t.doc.slice(n.from,n.to)+t.lineBreak}):i.push({from:n.to,insert:t.lineBreak+t.doc.slice(n.from,n.to)});return e(t.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const v8=({state:t,dispatch:e})=>Gy(t,e,!1),y8=({state:t,dispatch:e})=>Gy(t,e,!0),b8=t=>{if(t.state.readOnly)return!1;let{state:e}=t,s=e.changes(uu(e).map(({from:n,to:o})=>(n>0?n--:o<e.doc.length&&o++,{from:n,to:o}))),i=Po(e.selection,n=>{let o;if(t.lineWrapping){let r=t.lineBlockAt(n.head),l=t.coordsAtPos(n.head,n.assoc||1);l&&(o=r.bottom+t.documentTop-l.bottom+t.defaultLineHeight/2)}return t.moveVertically(n,!0,o)}).map(s);return t.dispatch({changes:s,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function k8(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let s=rs(t).resolveInner(e),i=s.childBefore(e),n=s.childAfter(e),o;return i&&n&&i.to<=e&&n.from>=e&&(o=i.type.prop(Ye.closedBy))&&o.indexOf(n.name)>-1&&t.doc.lineAt(i.to).from==t.doc.lineAt(n.from).from&&!/\S/.test(t.sliceDoc(i.to,n.from))?{from:i.to,to:n.from}:null}const km=Jy(!1),x8=Jy(!0);function Jy(t){return({state:e,dispatch:s})=>{if(e.readOnly)return!1;let i=e.changeByRange(n=>{let{from:o,to:r}=n,l=e.doc.lineAt(o),a=!t&&o==r&&k8(e,o);t&&(o=r=(r<=l.to?l:e.doc.lineAt(r)).to);let d=new nu(e,{simulateBreak:o,simulateDoubleBreak:!!a}),u=df(d,o);for(u==null&&(u=Oo(/^\s*/.exec(e.doc.lineAt(o).text)[0],e.tabSize));r<l.to&&/\s/.test(l.text[r-l.from]);)r++;a?{from:o,to:r}=a:o>l.from&&o<l.from+100&&!/\S/.test(l.text.slice(0,o))&&(o=l.from);let f=["",Ir(e,u)];return a&&f.push(Ir(e,d.lineIndent(l.from,-1))),{changes:{from:o,to:r,insert:st.of(f)},range:fe.cursor(o+1+f[1].length)}});return s(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function vf(t,e){let s=-1;return t.changeByRange(i=>{let n=[];for(let r=i.from;r<=i.to;){let l=t.doc.lineAt(r);l.number>s&&(i.empty||i.to>l.from)&&(e(l,n,i),s=l.number),r=l.to+1}let o=t.changes(n);return{changes:n,range:fe.range(o.mapPos(i.anchor,1),o.mapPos(i.head,1))}})}const w8=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let s=Object.create(null),i=new nu(t,{overrideIndentation:o=>{let r=s[o];return r??-1}}),n=vf(t,(o,r,l)=>{let a=df(i,o.from);if(a==null)return;/\S/.test(o.text)||(a=0);let d=/^\s*/.exec(o.text)[0],u=Ir(t,a);(d!=u||l.from<o.from+d.length)&&(s[o.from]=a,r.push({from:o.from,to:o.from+d.length,insert:u}))});return n.changes.empty||e(t.update(n,{userEvent:"indent"})),!0},_8=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(vf(t,(s,i)=>{i.push({from:s.from,insert:t.facet(uf)})}),{userEvent:"input.indent"})),!0),S8=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(vf(t,(s,i)=>{let n=/^\s*/.exec(s.text)[0];if(!n)return;let o=Oo(n,t.tabSize),r=0,l=Ir(t,Math.max(0,o-Nn(t)));for(;r<n.length&&r<l.length&&n.charCodeAt(r)==l.charCodeAt(r);)r++;i.push({from:s.from+r,to:s.from+n.length,insert:l.slice(r)})}),{userEvent:"delete.dedent"})),!0),C8=t=>(t.setTabFocusMode(),!0),A8=[{key:"Ctrl-b",run:Ay,shift:jy,preventDefault:!0},{key:"Ctrl-f",run:Vy,shift:Ly},{key:"Ctrl-p",run:Ty,shift:Iy},{key:"Ctrl-n",run:$y,shift:Uy},{key:"Ctrl-a",run:FA,shift:t8},{key:"Ctrl-e",run:HA,shift:s8},{key:"Ctrl-d",run:Hy},{key:"Ctrl-h",run:pc},{key:"Ctrl-k",run:d8},{key:"Ctrl-Alt-h",run:qy},{key:"Ctrl-o",run:h8},{key:"Ctrl-t",run:p8},{key:"Ctrl-v",run:hc}],V8=[{key:"ArrowLeft",run:Ay,shift:jy,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:PA,shift:KA,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:NA,shift:ZA,preventDefault:!0},{key:"ArrowRight",run:Vy,shift:Ly,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:jA,shift:GA,preventDefault:!0},{mac:"Cmd-ArrowRight",run:zA,shift:e8,preventDefault:!0},{key:"ArrowUp",run:Ty,shift:Iy,preventDefault:!0},{mac:"Cmd-ArrowUp",run:gm,shift:ym},{mac:"Ctrl-ArrowUp",run:hm,shift:pm},{key:"ArrowDown",run:$y,shift:Uy,preventDefault:!0},{mac:"Cmd-ArrowDown",run:vm,shift:bm},{mac:"Ctrl-ArrowDown",run:hc,shift:mm},{key:"PageUp",run:hm,shift:pm},{key:"PageDown",run:hc,shift:mm},{key:"Home",run:UA,shift:XA,preventDefault:!0},{key:"Mod-Home",run:gm,shift:ym},{key:"End",run:IA,shift:QA,preventDefault:!0},{key:"Mod-End",run:vm,shift:bm},{key:"Enter",run:km,shift:km},{key:"Mod-a",run:i8},{key:"Backspace",run:pc,shift:pc,preventDefault:!0},{key:"Delete",run:Hy,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:qy,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:u8,preventDefault:!0},{mac:"Mod-Backspace",run:c8,preventDefault:!0},{mac:"Mod-Delete",run:f8,preventDefault:!0}].concat(A8.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),M8=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:RA,shift:JA},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:BA,shift:YA},{key:"Alt-ArrowUp",run:m8},{key:"Shift-Alt-ArrowUp",run:v8},{key:"Alt-ArrowDown",run:g8},{key:"Shift-Alt-ArrowDown",run:y8},{key:"Mod-Alt-ArrowUp",run:r8},{key:"Mod-Alt-ArrowDown",run:l8},{key:"Escape",run:a8},{key:"Mod-Enter",run:x8},{key:"Alt-l",mac:"Ctrl-l",run:n8},{key:"Mod-i",run:o8,preventDefault:!0},{key:"Mod-[",run:S8},{key:"Mod-]",run:_8},{key:"Mod-Alt-\\",run:w8},{key:"Shift-Mod-k",run:b8},{key:"Shift-Mod-\\",run:qA},{key:"Mod-/",run:mA},{key:"Alt-A",run:vA},{key:"Ctrl-m",mac:"Shift-Alt-m",run:C8}].concat(V8),xm=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class Vo{constructor(e,s,i=0,n=e.length,o,r){this.test=r,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,n),this.bufferStart=i,this.normalize=o?l=>o(xm(l)):xm,this.query=this.normalize(s)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return ks(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let s=zc(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=gi(e);let n=this.normalize(s);if(n.length)for(let o=0,r=i;;o++){let l=n.charCodeAt(o),a=this.match(l,r,this.bufferPos+this.bufferStart);if(o==n.length-1){if(a)return this.value=a,this;break}r==i&&o<s.length&&s.charCodeAt(o)==l&&r++}}}match(e,s,i){let n=null;for(let o=0;o<this.matches.length;o+=2){let r=this.matches[o],l=!1;this.query.charCodeAt(r)==e&&(r==this.query.length-1?n={from:this.matches[o+1],to:i}:(this.matches[o]++,l=!0)),l||(this.matches.splice(o,2),o-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?n={from:s,to:i}:this.matches.push(1,s)),n&&this.test&&!this.test(n.from,n.to,this.buffer,this.bufferStart)&&(n=null),n}}typeof Symbol<"u"&&(Vo.prototype[Symbol.iterator]=function(){return this});const Yy={from:-1,to:-1,match:/.*/.exec("")},yf="gm"+(/x/.unicode==null?"":"u");class Qy{constructor(e,s,i,n=0,o=e.length){if(this.text=e,this.to=o,this.curLine="",this.done=!1,this.value=Yy,/\\[sWDnr]|\n|\r|\[\^/.test(s))return new Xy(e,s,i,n,o);this.re=new RegExp(s,yf+(i?.ignoreCase?"i":"")),this.test=i?.test,this.iter=e.iter();let r=e.lineAt(n);this.curLineStart=r.from,this.matchPos=Ma(e,n),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let s=this.matchPos<=this.to&&this.re.exec(this.curLine);if(s){let i=this.curLineStart+s.index,n=i+s[0].length;if(this.matchPos=Ma(this.text,n+(i==n?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<n||i>this.value.to)&&(!this.test||this.test(i,n,s)))return this.value={from:i,to:n,match:s},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const Yu=new WeakMap;class mo{constructor(e,s){this.from=e,this.text=s}get to(){return this.from+this.text.length}static get(e,s,i){let n=Yu.get(e);if(!n||n.from>=i||n.to<=s){let l=new mo(s,e.sliceString(s,i));return Yu.set(e,l),l}if(n.from==s&&n.to==i)return n;let{text:o,from:r}=n;return r>s&&(o=e.sliceString(s,r)+o,r=s),n.to<i&&(o+=e.sliceString(n.to,i)),Yu.set(e,new mo(r,o)),new mo(s,o.slice(s-r,i-r))}}class Xy{constructor(e,s,i,n,o){this.text=e,this.to=o,this.done=!1,this.value=Yy,this.matchPos=Ma(e,n),this.re=new RegExp(s,yf+(i?.ignoreCase?"i":"")),this.test=i?.test,this.flat=mo.get(e,n,this.chunkEnd(n+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,s=this.re.exec(this.flat.text);if(s&&!s[0]&&s.index==e&&(this.re.lastIndex=e+1,s=this.re.exec(this.flat.text)),s){let i=this.flat.from+s.index,n=i+s[0].length;if((this.flat.to>=this.to||s.index+s[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,n,s)))return this.value={from:i,to:n,match:s},this.matchPos=Ma(this.text,n+(i==n?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=mo.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(Qy.prototype[Symbol.iterator]=Xy.prototype[Symbol.iterator]=function(){return this});function D8(t){try{return new RegExp(t,yf),!0}catch{return!1}}function Ma(t,e){if(e>=t.length)return e;let s=t.lineAt(e),i;for(;e<s.to&&(i=s.text.charCodeAt(e-s.from))>=56320&&i<57344;)e++;return e}function mc(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),s=ft("input",{class:"cm-textfield",name:"line",value:e}),i=ft("form",{class:"cm-gotoLine",onkeydown:o=>{o.keyCode==27?(o.preventDefault(),t.dispatch({effects:vr.of(!1)}),t.focus()):o.keyCode==13&&(o.preventDefault(),n())},onsubmit:o=>{o.preventDefault(),n()}},ft("label",t.state.phrase("Go to line"),": ",s)," ",ft("button",{class:"cm-button",type:"submit"},t.state.phrase("go")),ft("button",{name:"close",onclick:()=>{t.dispatch({effects:vr.of(!1)}),t.focus()},"aria-label":t.state.phrase("close"),type:"button"},[""]));function n(){let o=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(s.value);if(!o)return;let{state:r}=t,l=r.doc.lineAt(r.selection.main.head),[,a,d,u,f]=o,h=u?+u.slice(1):0,g=d?+d:l.number;if(d&&f){let V=g/100;a&&(V=V*(a=="-"?-1:1)+l.number/r.doc.lines),g=Math.round(r.doc.lines*V)}else d&&a&&(g=g*(a=="-"?-1:1)+l.number);let _=r.doc.line(Math.max(1,Math.min(r.doc.lines,g))),p=fe.cursor(_.from+Math.max(0,Math.min(h,_.length)));t.dispatch({effects:[vr.of(!1),Te.scrollIntoView(p.from,{y:"center"})],selection:p}),t.focus()}return{dom:i}}const vr=We.define(),wm=Jt.define({create(){return!0},update(t,e){for(let s of e.effects)s.is(vr)&&(t=s.value);return t},provide:t=>Lr.from(t,e=>e?mc:null)}),T8=t=>{let e=jr(t,mc);if(!e){let s=[vr.of(!0)];t.state.field(wm,!1)==null&&s.push(We.appendConfig.of([wm,$8])),t.dispatch({effects:s}),e=jr(t,mc)}return e&&e.dom.querySelector("input").select(),!0},$8=Te.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),E8={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},O8=$e.define({combine(t){return Si(t,E8,{highlightWordAroundCursor:(e,s)=>e||s,minSelectionLength:Math.min,maxMatches:Math.min})}});function P8(t){return[I8,B8]}const j8=Ne.mark({class:"cm-selectionMatch"}),L8=Ne.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function _m(t,e,s,i){return(s==0||t(e.sliceDoc(s-1,s))!=St.Word)&&(i==e.doc.length||t(e.sliceDoc(i,i+1))!=St.Word)}function R8(t,e,s,i){return t(e.sliceDoc(s,s+1))==St.Word&&t(e.sliceDoc(i-1,i))==St.Word}const B8=jt.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.selectionSet||t.docChanged||t.viewportChanged)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=t.state.facet(O8),{state:s}=t,i=s.selection;if(i.ranges.length>1)return Ne.none;let n=i.main,o,r=null;if(n.empty){if(!e.highlightWordAroundCursor)return Ne.none;let a=s.wordAt(n.head);if(!a)return Ne.none;r=s.charCategorizer(n.head),o=s.sliceDoc(a.from,a.to)}else{let a=n.to-n.from;if(a<e.minSelectionLength||a>200)return Ne.none;if(e.wholeWords){if(o=s.sliceDoc(n.from,n.to),r=s.charCategorizer(n.head),!(_m(r,s,n.from,n.to)&&R8(r,s,n.from,n.to)))return Ne.none}else if(o=s.sliceDoc(n.from,n.to),!o)return Ne.none}let l=[];for(let a of t.visibleRanges){let d=new Vo(s.doc,o,a.from,a.to);for(;!d.next().done;){let{from:u,to:f}=d.value;if((!r||_m(r,s,u,f))&&(n.empty&&u<=n.from&&f>=n.to?l.push(L8.range(u,f)):(u>=n.to||f<=n.from)&&l.push(j8.range(u,f)),l.length>e.maxMatches))return Ne.none}}return Ne.set(l)}},{decorations:t=>t.decorations}),I8=Te.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),U8=({state:t,dispatch:e})=>{let{selection:s}=t,i=fe.create(s.ranges.map(n=>t.wordAt(n.head)||fe.cursor(n.head)),s.mainIndex);return i.eq(s)?!1:(e(t.update({selection:i})),!0)};function N8(t,e){let{main:s,ranges:i}=t.selection,n=t.wordAt(s.head),o=n&&n.from==s.from&&n.to==s.to;for(let r=!1,l=new Vo(t.doc,e,i[i.length-1].to);;)if(l.next(),l.done){if(r)return null;l=new Vo(t.doc,e,0,Math.max(0,i[i.length-1].from-1)),r=!0}else{if(r&&i.some(a=>a.from==l.value.from))continue;if(o){let a=t.wordAt(l.value.from);if(!a||a.from!=l.value.from||a.to!=l.value.to)continue}return l.value}}const z8=({state:t,dispatch:e})=>{let{ranges:s}=t.selection;if(s.some(o=>o.from===o.to))return U8({state:t,dispatch:e});let i=t.sliceDoc(s[0].from,s[0].to);if(t.selection.ranges.some(o=>t.sliceDoc(o.from,o.to)!=i))return!1;let n=N8(t,i);return n?(e(t.update({selection:t.selection.addRange(fe.range(n.from,n.to),!1),effects:Te.scrollIntoView(n.to)})),!0):!1},jo=$e.define({combine(t){return Si(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new eV(e),scrollToMatch:e=>Te.scrollIntoView(e)})}});class Zy{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||D8(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(s,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new q8(this):new H8(this)}getCursor(e,s=0,i){let n=e.doc?e:et.create({doc:e});return i==null&&(i=n.doc.length),this.regexp?Zn(this,n,s,i):Xn(this,n,s,i)}}class eb{constructor(e){this.spec=e}}function Xn(t,e,s,i){return new Vo(e.doc,t.unquoted,s,i,t.caseSensitive?void 0:n=>n.toLowerCase(),t.wholeWord?F8(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function F8(t,e){return(s,i,n,o)=>((o>s||o+n.length<i)&&(o=Math.max(0,s-2),n=t.sliceString(o,Math.min(t.length,i+2))),(e(Da(n,s-o))!=St.Word||e(Ta(n,s-o))!=St.Word)&&(e(Ta(n,i-o))!=St.Word||e(Da(n,i-o))!=St.Word))}class H8 extends eb{constructor(e){super(e)}nextMatch(e,s,i){let n=Xn(this.spec,e,i,e.doc.length).nextOverlapping();if(n.done){let o=Math.min(e.doc.length,s+this.spec.unquoted.length);n=Xn(this.spec,e,0,o).nextOverlapping()}return n.done||n.value.from==s&&n.value.to==i?null:n.value}prevMatchInRange(e,s,i){for(let n=i;;){let o=Math.max(s,n-1e4-this.spec.unquoted.length),r=Xn(this.spec,e,o,n),l=null;for(;!r.nextOverlapping().done;)l=r.value;if(l)return l;if(o==s)return null;n-=1e4}}prevMatch(e,s,i){let n=this.prevMatchInRange(e,0,s);return n||(n=this.prevMatchInRange(e,Math.max(0,i-this.spec.unquoted.length),e.doc.length)),n&&(n.from!=s||n.to!=i)?n:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,s){let i=Xn(this.spec,e,0,e.doc.length),n=[];for(;!i.next().done;){if(n.length>=s)return null;n.push(i.value)}return n}highlight(e,s,i,n){let o=Xn(this.spec,e,Math.max(0,s-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!o.next().done;)n(o.value.from,o.value.to)}}function Zn(t,e,s,i){return new Qy(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?W8(e.charCategorizer(e.selection.main.head)):void 0},s,i)}function Da(t,e){return t.slice(Gt(t,e,!1),e)}function Ta(t,e){return t.slice(e,Gt(t,e))}function W8(t){return(e,s,i)=>!i[0].length||(t(Da(i.input,i.index))!=St.Word||t(Ta(i.input,i.index))!=St.Word)&&(t(Ta(i.input,i.index+i[0].length))!=St.Word||t(Da(i.input,i.index+i[0].length))!=St.Word)}class q8 extends eb{nextMatch(e,s,i){let n=Zn(this.spec,e,i,e.doc.length).next();return n.done&&(n=Zn(this.spec,e,0,s).next()),n.done?null:n.value}prevMatchInRange(e,s,i){for(let n=1;;n++){let o=Math.max(s,i-n*1e4),r=Zn(this.spec,e,o,i),l=null;for(;!r.next().done;)l=r.value;if(l&&(o==s||l.from>o+10))return l;if(o==s)return null}}prevMatch(e,s,i){return this.prevMatchInRange(e,0,s)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(s,i)=>{if(i=="&")return e.match[0];if(i=="$")return"$";for(let n=i.length;n>0;n--){let o=+i.slice(0,n);if(o>0&&o<e.match.length)return e.match[o]+i.slice(n)}return s})}matchAll(e,s){let i=Zn(this.spec,e,0,e.doc.length),n=[];for(;!i.next().done;){if(n.length>=s)return null;n.push(i.value)}return n}highlight(e,s,i,n){let o=Zn(this.spec,e,Math.max(0,s-250),Math.min(i+250,e.doc.length));for(;!o.next().done;)n(o.value.from,o.value.to)}}const Nr=We.define(),bf=We.define(),on=Jt.define({create(t){return new Qu(gc(t).create(),null)},update(t,e){for(let s of e.effects)s.is(Nr)?t=new Qu(s.value.create(),t.panel):s.is(bf)&&(t=new Qu(t.query,s.value?kf:null));return t},provide:t=>Lr.from(t,e=>e.panel)});class Qu{constructor(e,s){this.query=e,this.panel=s}}const K8=Ne.mark({class:"cm-searchMatch"}),G8=Ne.mark({class:"cm-searchMatch cm-searchMatch-selected"}),J8=jt.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(on))}update(t){let e=t.state.field(on);(e!=t.startState.field(on)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return Ne.none;let{view:s}=this,i=new Bi;for(let n=0,o=s.visibleRanges,r=o.length;n<r;n++){let{from:l,to:a}=o[n];for(;n<r-1&&a>o[n+1].from-500;)a=o[++n].to;t.highlight(s.state,l,a,(d,u)=>{let f=s.state.selection.ranges.some(h=>h.from==d&&h.to==u);i.add(d,u,f?G8:K8)})}return i.finish()}},{decorations:t=>t.decorations});function sl(t){return e=>{let s=e.state.field(on,!1);return s&&s.query.spec.valid?t(e,s):ib(e)}}const $a=sl((t,{query:e})=>{let{to:s}=t.state.selection.main,i=e.nextMatch(t.state,s,s);if(!i)return!1;let n=fe.single(i.from,i.to),o=t.state.facet(jo);return t.dispatch({selection:n,effects:[xf(t,i),o.scrollToMatch(n.main,t)],userEvent:"select.search"}),sb(t),!0}),Ea=sl((t,{query:e})=>{let{state:s}=t,{from:i}=s.selection.main,n=e.prevMatch(s,i,i);if(!n)return!1;let o=fe.single(n.from,n.to),r=t.state.facet(jo);return t.dispatch({selection:o,effects:[xf(t,n),r.scrollToMatch(o.main,t)],userEvent:"select.search"}),sb(t),!0}),Y8=sl((t,{query:e})=>{let s=e.matchAll(t.state,1e3);return!s||!s.length?!1:(t.dispatch({selection:fe.create(s.map(i=>fe.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),Q8=({state:t,dispatch:e})=>{let s=t.selection;if(s.ranges.length>1||s.main.empty)return!1;let{from:i,to:n}=s.main,o=[],r=0;for(let l=new Vo(t.doc,t.sliceDoc(i,n));!l.next().done;){if(o.length>1e3)return!1;l.value.from==i&&(r=o.length),o.push(fe.range(l.value.from,l.value.to))}return e(t.update({selection:fe.create(o,r),userEvent:"select.search.matches"})),!0},Sm=sl((t,{query:e})=>{let{state:s}=t,{from:i,to:n}=s.selection.main;if(s.readOnly)return!1;let o=e.nextMatch(s,i,i);if(!o)return!1;let r=o,l=[],a,d,u=[];r.from==i&&r.to==n&&(d=s.toText(e.getReplacement(r)),l.push({from:r.from,to:r.to,insert:d}),r=e.nextMatch(s,r.from,r.to),u.push(Te.announce.of(s.phrase("replaced match on line $",s.doc.lineAt(i).number)+".")));let f=t.state.changes(l);return r&&(a=fe.single(r.from,r.to).map(f),u.push(xf(t,r)),u.push(s.facet(jo).scrollToMatch(a.main,t))),t.dispatch({changes:f,selection:a,effects:u,userEvent:"input.replace"}),!0}),X8=sl((t,{query:e})=>{if(t.state.readOnly)return!1;let s=e.matchAll(t.state,1e9).map(n=>{let{from:o,to:r}=n;return{from:o,to:r,insert:e.getReplacement(n)}});if(!s.length)return!1;let i=t.state.phrase("replaced $ matches",s.length)+".";return t.dispatch({changes:s,effects:Te.announce.of(i),userEvent:"input.replace.all"}),!0});function kf(t){return t.state.facet(jo).createPanel(t)}function gc(t,e){var s,i,n,o,r;let l=t.selection.main,a=l.empty||l.to>l.from+100?"":t.sliceDoc(l.from,l.to);if(e&&!a)return e;let d=t.facet(jo);return new Zy({search:((s=e?.literal)!==null&&s!==void 0?s:d.literal)?a:a.replace(/\n/g,"\\n"),caseSensitive:(i=e?.caseSensitive)!==null&&i!==void 0?i:d.caseSensitive,literal:(n=e?.literal)!==null&&n!==void 0?n:d.literal,regexp:(o=e?.regexp)!==null&&o!==void 0?o:d.regexp,wholeWord:(r=e?.wholeWord)!==null&&r!==void 0?r:d.wholeWord})}function tb(t){let e=jr(t,kf);return e&&e.dom.querySelector("[main-field]")}function sb(t){let e=tb(t);e&&e==t.root.activeElement&&e.select()}const ib=t=>{let e=t.state.field(on,!1);if(e&&e.panel){let s=tb(t);if(s&&s!=t.root.activeElement){let i=gc(t.state,e.query.spec);i.valid&&t.dispatch({effects:Nr.of(i)}),s.focus(),s.select()}}else t.dispatch({effects:[bf.of(!0),e?Nr.of(gc(t.state,e.query.spec)):We.appendConfig.of(sV)]});return!0},nb=t=>{let e=t.state.field(on,!1);if(!e||!e.panel)return!1;let s=jr(t,kf);return s&&s.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:bf.of(!1)}),!0},Z8=[{key:"Mod-f",run:ib,scope:"editor search-panel"},{key:"F3",run:$a,shift:Ea,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:$a,shift:Ea,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:nb,scope:"editor search-panel"},{key:"Mod-Shift-l",run:Q8},{key:"Mod-Alt-g",run:T8},{key:"Mod-d",run:z8,preventDefault:!0}];class eV{constructor(e){this.view=e;let s=this.query=e.state.field(on).query.spec;this.commit=this.commit.bind(this),this.searchField=ft("input",{value:s.search,placeholder:Vs(e,"Find"),"aria-label":Vs(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=ft("input",{value:s.replace,placeholder:Vs(e,"Replace"),"aria-label":Vs(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=ft("input",{type:"checkbox",name:"case",form:"",checked:s.caseSensitive,onchange:this.commit}),this.reField=ft("input",{type:"checkbox",name:"re",form:"",checked:s.regexp,onchange:this.commit}),this.wordField=ft("input",{type:"checkbox",name:"word",form:"",checked:s.wholeWord,onchange:this.commit});function i(n,o,r){return ft("button",{class:"cm-button",name:n,onclick:o,type:"button"},r)}this.dom=ft("div",{onkeydown:n=>this.keydown(n),class:"cm-search"},[this.searchField,i("next",()=>$a(e),[Vs(e,"next")]),i("prev",()=>Ea(e),[Vs(e,"previous")]),i("select",()=>Y8(e),[Vs(e,"all")]),ft("label",null,[this.caseField,Vs(e,"match case")]),ft("label",null,[this.reField,Vs(e,"regexp")]),ft("label",null,[this.wordField,Vs(e,"by word")]),...e.state.readOnly?[]:[ft("br"),this.replaceField,i("replace",()=>Sm(e),[Vs(e,"replace")]),i("replaceAll",()=>X8(e),[Vs(e,"replace all")])],ft("button",{name:"close",onclick:()=>nb(e),"aria-label":Vs(e,"close"),type:"button"},[""])])}commit(){let e=new Zy({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Nr.of(e)}))}keydown(e){s5(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Ea:$a)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),Sm(this.view))}update(e){for(let s of e.transactions)for(let i of s.effects)i.is(Nr)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(jo).top}}function Vs(t,e){return t.state.phrase(e)}const Rl=30,Bl=/[\s\.,:;?!]/;function xf(t,{from:e,to:s}){let i=t.state.doc.lineAt(e),n=t.state.doc.lineAt(s).to,o=Math.max(i.from,e-Rl),r=Math.min(n,s+Rl),l=t.state.sliceDoc(o,r);if(o!=i.from){for(let a=0;a<Rl;a++)if(!Bl.test(l[a+1])&&Bl.test(l[a])){l=l.slice(a);break}}if(r!=n){for(let a=l.length-1;a>l.length-Rl;a--)if(!Bl.test(l[a-1])&&Bl.test(l[a])){l=l.slice(0,a);break}}return Te.announce.of(`${t.state.phrase("current match")}. ${l} ${t.state.phrase("on line")} ${i.number}.`)}const tV=Te.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),sV=[on,Hn.low(J8),tV];class ob{constructor(e,s,i,n){this.state=e,this.pos=s,this.explicit=i,this.view=n,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let s=rs(this.state).resolveInner(this.pos,-1);for(;s&&e.indexOf(s.name)<0;)s=s.parent;return s?{from:s.from,to:this.pos,text:this.state.sliceDoc(s.from,this.pos),type:s.type}:null}matchBefore(e){let s=this.state.doc.lineAt(this.pos),i=Math.max(s.from,this.pos-250),n=s.text.slice(i-s.from,this.pos-s.from),o=n.search(rb(e,!1));return o<0?null:{from:i+o,to:this.pos,text:n.slice(o)}}get aborted(){return this.abortListeners==null}addEventListener(e,s,i){e=="abort"&&this.abortListeners&&(this.abortListeners.push(s),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function Cm(t){let e=Object.keys(t).join(""),s=/\w/.test(e);return s&&(e=e.replace(/\w/g,"")),`[${s?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function iV(t){let e=Object.create(null),s=Object.create(null);for(let{label:n}of t){e[n[0]]=!0;for(let o=1;o<n.length;o++)s[n[o]]=!0}let i=Cm(e)+Cm(s)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function nV(t){let e=t.map(n=>typeof n=="string"?{label:n}:n),[s,i]=e.every(n=>/^\w+$/.test(n.label))?[/\w*$/,/\w+$/]:iV(e);return n=>{let o=n.matchBefore(i);return o||n.explicit?{from:o?o.from:n.pos,options:e,validFor:s}:null}}class Am{constructor(e,s,i,n){this.completion=e,this.source=s,this.match=i,this.score=n}}function jn(t){return t.selection.main.from}function rb(t,e){var s;let{source:i}=t,n=e&&i[0]!="^",o=i[i.length-1]!="$";return!n&&!o?t:new RegExp(`${n?"^":""}(?:${i})${o?"$":""}`,(s=t.flags)!==null&&s!==void 0?s:t.ignoreCase?"i":"")}const lb=zi.define();function oV(t,e,s,i){let{main:n}=t.selection,o=s-n.from,r=i-n.from;return{...t.changeByRange(l=>{if(l!=n&&s!=i&&t.sliceDoc(l.from+o,l.from+r)!=t.sliceDoc(s,i))return{range:l};let a=t.toText(e);return{changes:{from:l.from+o,to:i==n.from?l.to:l.from+r,insert:a},range:fe.cursor(l.from+o+a.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}const Vm=new WeakMap;function rV(t){if(!Array.isArray(t))return t;let e=Vm.get(t);return e||Vm.set(t,e=nV(t)),e}const Oa=We.define(),zr=We.define();class lV{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let s=0;s<e.length;){let i=ks(e,s),n=gi(i);this.chars.push(i);let o=e.slice(s,s+n),r=o.toUpperCase();this.folded.push(ks(r==o?o.toLowerCase():r,0)),s+=n}this.astral=e.length!=this.chars.length}ret(e,s){return this.score=e,this.matched=s,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:s,folded:i,any:n,precise:o,byWord:r}=this;if(s.length==1){let N=ks(e,0),B=gi(N),W=B==e.length?0:-100;if(N!=s[0])if(N==i[0])W+=-200;else return null;return this.ret(W,[0,B])}let l=e.indexOf(this.pattern);if(l==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let a=s.length,d=0;if(l<0){for(let N=0,B=Math.min(e.length,200);N<B&&d<a;){let W=ks(e,N);(W==s[d]||W==i[d])&&(n[d++]=N),N+=gi(W)}if(d<a)return null}let u=0,f=0,h=!1,g=0,_=-1,p=-1,V=/[a-z]/.test(e),M=!0;for(let N=0,B=Math.min(e.length,200),W=0;N<B&&f<a;){let G=ks(e,N);l<0&&(u<a&&G==s[u]&&(o[u++]=N),g<a&&(G==s[g]||G==i[g]?(g==0&&(_=N),p=N+1,g++):g=0));let j,A=G<255?G>=48&&G<=57||G>=97&&G<=122?2:G>=65&&G<=90?1:0:(j=zc(G))!=j.toLowerCase()?1:j!=j.toUpperCase()?2:0;(!N||A==1&&V||W==0&&A!=0)&&(s[f]==G||i[f]==G&&(h=!0)?r[f++]=N:r.length&&(M=!1)),W=A,N+=gi(G)}return f==a&&r[0]==0&&M?this.result(-100+(h?-200:0),r,e):g==a&&_==0?this.ret(-200-e.length+(p==e.length?0:-100),[0,p]):l>-1?this.ret(-700-e.length,[l,l+this.pattern.length]):g==a?this.ret(-900-e.length,[_,p]):f==a?this.result(-100+(h?-200:0)+-700+(M?0:-1100),r,e):s.length==2?null:this.result((n[0]?-700:0)+-200+-1100,n,e)}result(e,s,i){let n=[],o=0;for(let r of s){let l=r+(this.astral?gi(ks(i,r)):1);o&&n[o-1]==r?n[o-1]=l:(n[o++]=r,n[o++]=l)}return this.ret(e-i.length,n)}}class aV{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let s=e.slice(0,this.pattern.length),i=s==this.pattern?0:s.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,s.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const Ut=$e.define({combine(t){return Si(t,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:uV,filterStrict:!1,compareCompletions:(e,s)=>e.label.localeCompare(s.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,s)=>e&&s,closeOnBlur:(e,s)=>e&&s,icons:(e,s)=>e&&s,tooltipClass:(e,s)=>i=>Mm(e(i),s(i)),optionClass:(e,s)=>i=>Mm(e(i),s(i)),addToOptions:(e,s)=>e.concat(s),filterStrict:(e,s)=>e||s})}});function Mm(t,e){return t?e?t+" "+e:t:e}function uV(t,e,s,i,n,o){let r=t.textDirection==xt.RTL,l=r,a=!1,d="top",u,f,h=e.left-n.left,g=n.right-e.right,_=i.right-i.left,p=i.bottom-i.top;if(l&&h<Math.min(_,g)?l=!1:!l&&g<Math.min(_,h)&&(l=!0),_<=(l?h:g))u=Math.max(n.top,Math.min(s.top,n.bottom-p))-e.top,f=Math.min(400,l?h:g);else{a=!0,f=Math.min(400,(r?e.right:n.right-e.left)-30);let N=n.bottom-e.bottom;N>=p||N>e.top?u=s.bottom-e.top:(d="bottom",u=e.bottom-s.top)}let V=(e.bottom-e.top)/o.offsetHeight,M=(e.right-e.left)/o.offsetWidth;return{style:`${d}: ${u/V}px; max-width: ${f/M}px`,class:"cm-completionInfo-"+(a?r?"left-narrow":"right-narrow":l?"left":"right")}}function dV(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(s){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),s.type&&i.classList.add(...s.type.split(/\s+/g).map(n=>"cm-completionIcon-"+n)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(s,i,n,o){let r=document.createElement("span");r.className="cm-completionLabel";let l=s.displayLabel||s.label,a=0;for(let d=0;d<o.length;){let u=o[d++],f=o[d++];u>a&&r.appendChild(document.createTextNode(l.slice(a,u)));let h=r.appendChild(document.createElement("span"));h.appendChild(document.createTextNode(l.slice(u,f))),h.className="cm-completionMatchedText",a=f}return a<l.length&&r.appendChild(document.createTextNode(l.slice(a))),r},position:50},{render(s){if(!s.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=s.detail,i},position:80}),e.sort((s,i)=>s.position-i.position).map(s=>s.render)}function Xu(t,e,s){if(t<=s)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let n=Math.floor(e/s);return{from:n*s,to:(n+1)*s}}let i=Math.floor((t-e)/s);return{from:t-(i+1)*s,to:t-i*s}}class cV{constructor(e,s,i){this.view=e,this.stateField=s,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:a=>this.placeInfo(a),key:this},this.space=null,this.currentClass="";let n=e.state.field(s),{options:o,selected:r}=n.open,l=e.state.facet(Ut);this.optionContent=dV(l),this.optionClass=l.optionClass,this.tooltipClass=l.tooltipClass,this.range=Xu(o.length,r,l.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",a=>{let{options:d}=e.state.field(s).open;for(let u=a.target,f;u&&u!=this.dom;u=u.parentNode)if(u.nodeName=="LI"&&(f=/-(\d+)$/.exec(u.id))&&+f[1]<d.length){this.applyCompletion(e,d[+f[1]]),a.preventDefault();return}}),this.dom.addEventListener("focusout",a=>{let d=e.state.field(this.stateField,!1);d&&d.tooltip&&e.state.facet(Ut).closeOnBlur&&a.relatedTarget!=e.contentDOM&&e.dispatch({effects:zr.of(null)})}),this.showOptions(o,n.id)}mount(){this.updateSel()}showOptions(e,s){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,s,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var s;let i=e.state.field(this.stateField),n=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=n){let{options:o,selected:r,disabled:l}=i.open;(!n.open||n.open.options!=o)&&(this.range=Xu(o.length,r,e.state.facet(Ut).maxRenderedOptions),this.showOptions(o,i.id)),this.updateSel(),l!=((s=n.open)===null||s===void 0?void 0:s.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!l)}}updateTooltipClass(e){let s=this.tooltipClass(e);if(s!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of s.split(" "))i&&this.dom.classList.add(i);this.currentClass=s}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),s=e.open;(s.selected>-1&&s.selected<this.range.from||s.selected>=this.range.to)&&(this.range=Xu(s.options.length,s.selected,this.view.state.facet(Ut).maxRenderedOptions),this.showOptions(s.options,e.id));let i=this.updateSelectedOption(s.selected);if(i){this.destroyInfo();let{completion:n}=s.options[s.selected],{info:o}=n;if(!o)return;let r=typeof o=="string"?document.createTextNode(o):o(n);if(!r)return;"then"in r?r.then(l=>{l&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(l,n)}).catch(l=>ws(this.view.state,l,"completion info")):(this.addInfoPane(r,n),i.setAttribute("aria-describedby",this.info.id))}}addInfoPane(e,s){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",i.id="cm-completionInfo-"+Math.floor(Math.random()*65535).toString(16),e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:n,destroy:o}=e;i.appendChild(n),this.infoDestroy=o||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let s=null;for(let i=this.list.firstChild,n=this.range.from;i;i=i.nextSibling,n++)i.nodeName!="LI"||!i.id?n--:n==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),s=i):i.hasAttribute("aria-selected")&&(i.removeAttribute("aria-selected"),i.removeAttribute("aria-describedby"));return s&&hV(this.list,s),s}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let s=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),n=e.getBoundingClientRect(),o=this.space;if(!o){let r=this.dom.ownerDocument.documentElement;o={left:0,top:0,right:r.clientWidth,bottom:r.clientHeight}}return n.top>Math.min(o.bottom,s.bottom)-10||n.bottom<Math.max(o.top,s.top)+10?null:this.view.state.facet(Ut).positionInfo(this.view,s,n,i,o,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,s,i){const n=document.createElement("ul");n.id=s,n.setAttribute("role","listbox"),n.setAttribute("aria-expanded","true"),n.setAttribute("aria-label",this.view.state.phrase("Completions")),n.addEventListener("mousedown",r=>{r.target==n&&r.preventDefault()});let o=null;for(let r=i.from;r<i.to;r++){let{completion:l,match:a}=e[r],{section:d}=l;if(d){let h=typeof d=="string"?d:d.name;if(h!=o&&(r>i.from||i.from==0))if(o=h,typeof d!="string"&&d.header)n.appendChild(d.header(d));else{let g=n.appendChild(document.createElement("completion-section"));g.textContent=h}}const u=n.appendChild(document.createElement("li"));u.id=s+"-"+r,u.setAttribute("role","option");let f=this.optionClass(l);f&&(u.className=f);for(let h of this.optionContent){let g=h(l,this.view.state,this.view,a);g&&u.appendChild(g)}}return i.from&&n.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&n.classList.add("cm-completionListIncompleteBottom"),n}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function fV(t,e){return s=>new cV(s,t,e)}function hV(t,e){let s=t.getBoundingClientRect(),i=e.getBoundingClientRect(),n=s.height/t.offsetHeight;i.top<s.top?t.scrollTop-=(s.top-i.top)/n:i.bottom>s.bottom&&(t.scrollTop+=(i.bottom-s.bottom)/n)}function Dm(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function pV(t,e){let s=[],i=null,n=null,o=u=>{s.push(u);let{section:f}=u.completion;if(f){i||(i=[]);let h=typeof f=="string"?f:f.name;i.some(g=>g.name==h)||i.push(typeof f=="string"?{name:h}:f)}},r=e.facet(Ut);for(let u of t)if(u.hasResult()){let f=u.result.getMatch;if(u.result.filter===!1)for(let h of u.result.options)o(new Am(h,u.source,f?f(h):[],1e9-s.length));else{let h=e.sliceDoc(u.from,u.to),g,_=r.filterStrict?new aV(h):new lV(h);for(let p of u.result.options)if(g=_.match(p.label)){let V=p.displayLabel?f?f(p,g.matched):[]:g.matched,M=g.score+(p.boost||0);if(o(new Am(p,u.source,V,M)),typeof p.section=="object"&&p.section.rank==="dynamic"){let{name:N}=p.section;n||(n=Object.create(null)),n[N]=Math.max(M,n[N]||-1e9)}}}}if(i){let u=Object.create(null),f=0,h=(g,_)=>(g.rank==="dynamic"&&_.rank==="dynamic"?n[_.name]-n[g.name]:0)||(typeof g.rank=="number"?g.rank:1e9)-(typeof _.rank=="number"?_.rank:1e9)||(g.name<_.name?-1:1);for(let g of i.sort(h))f-=1e5,u[g.name]=f;for(let g of s){let{section:_}=g.completion;_&&(g.score+=u[typeof _=="string"?_:_.name])}}let l=[],a=null,d=r.compareCompletions;for(let u of s.sort((f,h)=>h.score-f.score||d(f.completion,h.completion))){let f=u.completion;!a||a.label!=f.label||a.detail!=f.detail||a.type!=null&&f.type!=null&&a.type!=f.type||a.apply!=f.apply||a.boost!=f.boost?l.push(u):Dm(u.completion)>Dm(a)&&(l[l.length-1]=u),a=u.completion}return l}class io{constructor(e,s,i,n,o,r){this.options=e,this.attrs=s,this.tooltip=i,this.timestamp=n,this.selected=o,this.disabled=r}setSelected(e,s){return e==this.selected||e>=this.options.length?this:new io(this.options,Tm(s,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,s,i,n,o,r){if(n&&!r&&e.some(d=>d.isPending))return n.setDisabled();let l=pV(e,s);if(!l.length)return n&&e.some(d=>d.isPending)?n.setDisabled():null;let a=s.facet(Ut).selectOnOpen?0:-1;if(n&&n.selected!=a&&n.selected!=-1){let d=n.options[n.selected].completion;for(let u=0;u<l.length;u++)if(l[u].completion==d){a=u;break}}return new io(l,Tm(i,a),{pos:e.reduce((d,u)=>u.hasResult()?Math.min(d,u.from):d,1e8),create:kV,above:o.aboveCursor},n?n.timestamp:Date.now(),a,!1)}map(e){return new io(this.options,this.attrs,{...this.tooltip,pos:e.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new io(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class Pa{constructor(e,s,i){this.active=e,this.id=s,this.open=i}static start(){return new Pa(yV,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:s}=e,i=s.facet(Ut),o=(i.override||s.languageDataAt("autocomplete",jn(s)).map(rV)).map(a=>(this.active.find(u=>u.source==a)||new Is(a,this.active.some(u=>u.state!=0)?1:0)).update(e,i));o.length==this.active.length&&o.every((a,d)=>a==this.active[d])&&(o=this.active);let r=this.open,l=e.effects.some(a=>a.is(wf));r&&e.docChanged&&(r=r.map(e.changes)),e.selection||o.some(a=>a.hasResult()&&e.changes.touchesRange(a.from,a.to))||!mV(o,this.active)||l?r=io.build(o,s,this.id,r,i,l):r&&r.disabled&&!o.some(a=>a.isPending)&&(r=null),!r&&o.every(a=>!a.isPending)&&o.some(a=>a.hasResult())&&(o=o.map(a=>a.hasResult()?new Is(a.source,0):a));for(let a of e.effects)a.is(ub)&&(r=r&&r.setSelected(a.value,this.id));return o==this.active&&r==this.open?this:new Pa(o,this.id,r)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?gV:vV}}function mV(t,e){if(t==e)return!0;for(let s=0,i=0;;){for(;s<t.length&&!t[s].hasResult();)s++;for(;i<e.length&&!e[i].hasResult();)i++;let n=s==t.length,o=i==e.length;if(n||o)return n==o;if(t[s++].result!=e[i++].result)return!1}}const gV={"aria-autocomplete":"list"},vV={};function Tm(t,e){let s={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(s["aria-activedescendant"]=t+"-"+e),s}const yV=[];function ab(t,e){if(t.isUserEvent("input.complete")){let i=t.annotation(lb);if(i&&e.activateOnCompletion(i))return 12}let s=t.isUserEvent("input.type");return s&&e.activateOnTyping?5:s?1:t.isUserEvent("delete.backward")?2:t.selection?8:t.docChanged?16:0}class Is{constructor(e,s,i=!1){this.source=e,this.state=s,this.explicit=i}hasResult(){return!1}get isPending(){return this.state==1}update(e,s){let i=ab(e,s),n=this;(i&8||i&16&&this.touches(e))&&(n=new Is(n.source,0)),i&4&&n.state==0&&(n=new Is(this.source,1)),n=n.updateFor(e,i);for(let o of e.effects)if(o.is(Oa))n=new Is(n.source,1,o.value);else if(o.is(zr))n=new Is(n.source,0);else if(o.is(wf))for(let r of o.value)r.source==n.source&&(n=r);return n}updateFor(e,s){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(jn(e.state))}}class go extends Is{constructor(e,s,i,n,o,r){super(e,3,s),this.limit=i,this.result=n,this.from=o,this.to=r}hasResult(){return!0}updateFor(e,s){var i;if(!(s&3))return this.map(e.changes);let n=this.result;n.map&&!e.changes.empty&&(n=n.map(n,e.changes));let o=e.changes.mapPos(this.from),r=e.changes.mapPos(this.to,1),l=jn(e.state);if(l>r||!n||s&2&&(jn(e.startState)==this.from||l<this.limit))return new Is(this.source,s&4?1:0);let a=e.changes.mapPos(this.limit);return bV(n.validFor,e.state,o,r)?new go(this.source,this.explicit,a,n,o,r):n.update&&(n=n.update(n,o,r,new ob(e.state,l,!1)))?new go(this.source,this.explicit,a,n,n.from,(i=n.to)!==null&&i!==void 0?i:jn(e.state)):new Is(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new go(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new Is(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function bV(t,e,s,i){if(!t)return!1;let n=e.sliceDoc(s,i);return typeof t=="function"?t(n,s,i,e):rb(t,!0).test(n)}const wf=We.define({map(t,e){return t.map(s=>s.map(e))}}),ub=We.define(),xs=Jt.define({create(){return Pa.start()},update(t,e){return t.update(e)},provide:t=>[nf.from(t,e=>e.tooltip),Te.contentAttributes.from(t,e=>e.attrs)]});function _f(t,e){const s=e.completion.apply||e.completion.label;let i=t.state.field(xs).active.find(n=>n.source==e.source);return i instanceof go?(typeof s=="string"?t.dispatch({...oV(t.state,s,i.from,i.to),annotations:lb.of(e.completion)}):s(t,e.completion,i.from,i.to),!0):!1}const kV=fV(xs,_f);function Il(t,e="option"){return s=>{let i=s.state.field(xs,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<s.state.facet(Ut).interactionDelay)return!1;let n=1,o;e=="page"&&(o=zv(s,i.open.tooltip))&&(n=Math.max(2,Math.floor(o.dom.offsetHeight/o.dom.querySelector("li").offsetHeight)-1));let{length:r}=i.open.options,l=i.open.selected>-1?i.open.selected+n*(t?1:-1):t?0:r-1;return l<0?l=e=="page"?0:r-1:l>=r&&(l=e=="page"?r-1:0),s.dispatch({effects:ub.of(l)}),!0}}const xV=t=>{let e=t.state.field(xs,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(Ut).interactionDelay?!1:_f(t,e.open.options[e.open.selected])},Zu=t=>t.state.field(xs,!1)?(t.dispatch({effects:Oa.of(!0)}),!0):!1,wV=t=>{let e=t.state.field(xs,!1);return!e||!e.active.some(s=>s.state!=0)?!1:(t.dispatch({effects:zr.of(null)}),!0)};class _V{constructor(e,s){this.active=e,this.context=s,this.time=Date.now(),this.updates=[],this.done=void 0}}const SV=50,CV=1e3,AV=jt.fromClass(class{constructor(t){this.view=t,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of t.state.field(xs).active)e.isPending&&this.startQuery(e)}update(t){let e=t.state.field(xs),s=t.state.facet(Ut);if(!t.selectionSet&&!t.docChanged&&t.startState.field(xs)==e)return;let i=t.transactions.some(o=>{let r=ab(o,s);return r&8||(o.selection||o.docChanged)&&!(r&3)});for(let o=0;o<this.running.length;o++){let r=this.running[o];if(i||r.context.abortOnDocChange&&t.docChanged||r.updates.length+t.transactions.length>SV&&Date.now()-r.time>CV){for(let l of r.context.abortListeners)try{l()}catch(a){ws(this.view.state,a)}r.context.abortListeners=null,this.running.splice(o--,1)}else r.updates.push(...t.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),t.transactions.some(o=>o.effects.some(r=>r.is(Oa)))&&(this.pendingStart=!0);let n=this.pendingStart?50:s.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(o=>o.isPending&&!this.running.some(r=>r.active.source==o.source))?setTimeout(()=>this.startUpdate(),n):-1,this.composing!=0)for(let o of t.transactions)o.isUserEvent("input.type")?this.composing=2:this.composing==2&&o.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:t}=this.view,e=t.field(xs);for(let s of e.active)s.isPending&&!this.running.some(i=>i.active.source==s.source)&&this.startQuery(s);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Ut).updateSyncTime))}startQuery(t){let{state:e}=this.view,s=jn(e),i=new ob(e,s,t.explicit,this.view),n=new _V(t,i);this.running.push(n),Promise.resolve(t.source(i)).then(o=>{n.context.aborted||(n.done=o||null,this.scheduleAccept())},o=>{this.view.dispatch({effects:zr.of(null)}),ws(this.view.state,o)})}scheduleAccept(){this.running.every(t=>t.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Ut).updateSyncTime))}accept(){var t;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],s=this.view.state.facet(Ut),i=this.view.state.field(xs);for(let n=0;n<this.running.length;n++){let o=this.running[n];if(o.done===void 0)continue;if(this.running.splice(n--,1),o.done){let l=jn(o.updates.length?o.updates[0].startState:this.view.state),a=Math.min(l,o.done.from+(o.active.explicit?0:1)),d=new go(o.active.source,o.active.explicit,a,o.done,o.done.from,(t=o.done.to)!==null&&t!==void 0?t:l);for(let u of o.updates)d=d.update(u,s);if(d.hasResult()){e.push(d);continue}}let r=i.active.find(l=>l.source==o.active.source);if(r&&r.isPending)if(o.done==null){let l=new Is(o.active.source,0);for(let a of o.updates)l=l.update(a,s);l.isPending||e.push(l)}else this.startQuery(r)}(e.length||i.open&&i.open.disabled)&&this.view.dispatch({effects:wf.of(e)})}},{eventHandlers:{blur(t){let e=this.view.state.field(xs,!1);if(e&&e.tooltip&&this.view.state.facet(Ut).closeOnBlur){let s=e.open&&zv(this.view,e.open.tooltip);(!s||!s.dom.contains(t.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:zr.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Oa.of(!1)}),20),this.composing=0}}}),VV=typeof navigator=="object"&&/Win/.test(navigator.platform),MV=Hn.highest(Te.domEventHandlers({keydown(t,e){let s=e.state.field(xs,!1);if(!s||!s.open||s.open.disabled||s.open.selected<0||t.key.length>1||t.ctrlKey&&!(VV&&t.altKey)||t.metaKey)return!1;let i=s.open.options[s.open.selected],n=s.active.find(r=>r.source==i.source),o=i.completion.commitCharacters||n.result.commitCharacters;return o&&o.indexOf(t.key)>-1&&_f(e,i),!1}})),DV=Te.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),Fr={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},$n=We.define({map(t,e){let s=e.mapPos(t,-1,ps.TrackAfter);return s??void 0}}),Sf=new class extends Rn{};Sf.startSide=1;Sf.endSide=-1;const db=Jt.define({create(){return tt.empty},update(t,e){if(t=t.map(e.changes),e.selection){let s=e.state.doc.lineAt(e.selection.main.head);t=t.update({filter:i=>i>=s.from&&i<=s.to})}for(let s of e.effects)s.is($n)&&(t=t.update({add:[Sf.range(s.value,s.value+1)]}));return t}});function TV(){return[EV,db]}const ed="()[]{}<>";function cb(t){for(let e=0;e<ed.length;e+=2)if(ed.charCodeAt(e)==t)return ed.charAt(e+1);return zc(t<128?t:t+1)}function fb(t,e){return t.languageDataAt("closeBrackets",e)[0]||Fr}const $V=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),EV=Te.inputHandler.of((t,e,s,i)=>{if(($V?t.composing:t.compositionStarted)||t.state.readOnly)return!1;let n=t.state.selection.main;if(i.length>2||i.length==2&&gi(ks(i,0))==1||e!=n.from||s!=n.to)return!1;let o=jV(t.state,i);return o?(t.dispatch(o),!0):!1}),OV=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let i=fb(t,t.selection.main.head).brackets||Fr.brackets,n=null,o=t.changeByRange(r=>{if(r.empty){let l=LV(t.doc,r.head);for(let a of i)if(a==l&&du(t.doc,r.head)==cb(ks(a,0)))return{changes:{from:r.head-a.length,to:r.head+a.length},range:fe.cursor(r.head-a.length)}}return{range:n=r}});return n||e(t.update(o,{scrollIntoView:!0,userEvent:"delete.backward"})),!n},PV=[{key:"Backspace",run:OV}];function jV(t,e){let s=fb(t,t.selection.main.head),i=s.brackets||Fr.brackets;for(let n of i){let o=cb(ks(n,0));if(e==n)return o==n?IV(t,n,i.indexOf(n+n+n)>-1,s):RV(t,n,o,s.before||Fr.before);if(e==o&&hb(t,t.selection.main.from))return BV(t,n,o)}return null}function hb(t,e){let s=!1;return t.field(db).between(0,t.doc.length,i=>{i==e&&(s=!0)}),s}function du(t,e){let s=t.sliceString(e,e+2);return s.slice(0,gi(ks(s,0)))}function LV(t,e){let s=t.sliceString(e-2,e);return gi(ks(s,0))==s.length?s:s.slice(1)}function RV(t,e,s,i){let n=null,o=t.changeByRange(r=>{if(!r.empty)return{changes:[{insert:e,from:r.from},{insert:s,from:r.to}],effects:$n.of(r.to+e.length),range:fe.range(r.anchor+e.length,r.head+e.length)};let l=du(t.doc,r.head);return!l||/\s/.test(l)||i.indexOf(l)>-1?{changes:{insert:e+s,from:r.head},effects:$n.of(r.head+e.length),range:fe.cursor(r.head+e.length)}:{range:n=r}});return n?null:t.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function BV(t,e,s){let i=null,n=t.changeByRange(o=>o.empty&&du(t.doc,o.head)==s?{changes:{from:o.head,to:o.head+s.length,insert:s},range:fe.cursor(o.head+s.length)}:i={range:o});return i?null:t.update(n,{scrollIntoView:!0,userEvent:"input.type"})}function IV(t,e,s,i){let n=i.stringPrefixes||Fr.stringPrefixes,o=null,r=t.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:e,from:l.to}],effects:$n.of(l.to+e.length),range:fe.range(l.anchor+e.length,l.head+e.length)};let a=l.head,d=du(t.doc,a),u;if(d==e){if($m(t,a))return{changes:{insert:e+e,from:a},effects:$n.of(a+e.length),range:fe.cursor(a+e.length)};if(hb(t,a)){let h=s&&t.sliceDoc(a,a+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:a,to:a+h.length,insert:h},range:fe.cursor(a+h.length)}}}else{if(s&&t.sliceDoc(a-2*e.length,a)==e+e&&(u=Em(t,a-2*e.length,n))>-1&&$m(t,u))return{changes:{insert:e+e+e+e,from:a},effects:$n.of(a+e.length),range:fe.cursor(a+e.length)};if(t.charCategorizer(a)(d)!=St.Word&&Em(t,a,n)>-1&&!UV(t,a,e,n))return{changes:{insert:e+e,from:a},effects:$n.of(a+e.length),range:fe.cursor(a+e.length)}}return{range:o=l}});return o?null:t.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function $m(t,e){let s=rs(t).resolveInner(e+1);return s.parent&&s.from==e}function UV(t,e,s,i){let n=rs(t).resolveInner(e,-1),o=i.reduce((r,l)=>Math.max(r,l.length),0);for(let r=0;r<5;r++){let l=t.sliceDoc(n.from,Math.min(n.to,n.from+s.length+o)),a=l.indexOf(s);if(!a||a>-1&&i.indexOf(l.slice(0,a))>-1){let u=n.firstChild;for(;u&&u.from==n.from&&u.to-u.from>s.length+a;){if(t.sliceDoc(u.to-s.length,u.to)==s)return!1;u=u.firstChild}return!0}let d=n.to==e&&n.parent;if(!d)break;n=d}return!1}function Em(t,e,s){let i=t.charCategorizer(e);if(i(t.sliceDoc(e-1,e))!=St.Word)return e;for(let n of s){let o=e-n.length;if(t.sliceDoc(o,e)==n&&i(t.sliceDoc(o-1,o))!=St.Word)return o}return-1}function NV(t={}){return[MV,xs,Ut.of(t),AV,zV,DV]}const pb=[{key:"Ctrl-Space",run:Zu},{mac:"Alt-`",run:Zu},{mac:"Alt-i",run:Zu},{key:"Escape",run:wV},{key:"ArrowDown",run:Il(!0)},{key:"ArrowUp",run:Il(!1)},{key:"PageDown",run:Il(!0,"page")},{key:"PageUp",run:Il(!1,"page")},{key:"Enter",run:xV}],zV=Hn.highest(tf.computeN([Ut],t=>t.facet(Ut).defaultKeymap?[pb]:[]));class Om{constructor(e,s,i){this.from=e,this.to=s,this.diagnostic=i}}class Mn{constructor(e,s,i){this.diagnostics=e,this.panel=s,this.selected=i}static init(e,s,i){let n=i.facet(Hr).markerFilter;n&&(e=n(e,i));let o=e.slice().sort((g,_)=>g.from-_.from||g.to-_.to),r=new Bi,l=[],a=0,d=i.doc.iter(),u=0,f=i.doc.length;for(let g=0;;){let _=g==o.length?null:o[g];if(!_&&!l.length)break;let p,V;if(l.length)p=a,V=l.reduce((B,W)=>Math.min(B,W.to),_&&_.from>p?_.from:1e8);else{if(p=_.from,p>f)break;V=_.to,l.push(_),g++}for(;g<o.length;){let B=o[g];if(B.from==p&&(B.to>B.from||B.to==p))l.push(B),g++,V=Math.min(B.to,V);else{V=Math.min(B.from,V);break}}V=Math.min(V,f);let M=!1;if(l.some(B=>B.from==p&&(B.to==V||V==f))&&(M=p==V,!M&&V-p<10)){let B=p-(u+d.value.length);B>0&&(d.next(B),u=p);for(let W=p;;){if(W>=V){M=!0;break}if(!d.lineBreak&&u+d.value.length>W)break;W=u+d.value.length,u+=d.value.length,d.next()}}let N=t6(l);if(M)r.add(p,p,Ne.widget({widget:new QV(N),diagnostics:l.slice()}));else{let B=l.reduce((W,G)=>G.markClass?W+" "+G.markClass:W,"");r.add(p,V,Ne.mark({class:"cm-lintRange cm-lintRange-"+N+B,diagnostics:l.slice(),inclusiveEnd:l.some(W=>W.to>V)}))}if(a=V,a==f)break;for(let B=0;B<l.length;B++)l[B].to<=a&&l.splice(B--,1)}let h=r.finish();return new Mn(h,s,Mo(h))}}function Mo(t,e=null,s=0){let i=null;return t.between(s,1e9,(n,o,{spec:r})=>{if(!(e&&r.diagnostics.indexOf(e)<0))if(!i)i=new Om(n,o,e||r.diagnostics[0]);else{if(r.diagnostics.indexOf(i.diagnostic)<0)return!1;i=new Om(i.from,o,i.diagnostic)}}),i}function FV(t,e){let s=e.pos,i=e.end||s,n=t.state.facet(Hr).hideOn(t,s,i);if(n!=null)return n;let o=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(r=>r.is(mb))||t.changes.touchesRange(o.from,Math.max(o.to,i)))}function HV(t,e){return t.field($s,!1)?e:e.concat(We.appendConfig.of(s6))}const mb=We.define(),Cf=We.define(),gb=We.define(),$s=Jt.define({create(){return new Mn(Ne.none,null,null)},update(t,e){if(e.docChanged&&t.diagnostics.size){let s=t.diagnostics.map(e.changes),i=null,n=t.panel;if(t.selected){let o=e.changes.mapPos(t.selected.from,1);i=Mo(s,t.selected.diagnostic,o)||Mo(s,null,o)}!s.size&&n&&e.state.facet(Hr).autoPanel&&(n=null),t=new Mn(s,n,i)}for(let s of e.effects)if(s.is(mb)){let i=e.state.facet(Hr).autoPanel?s.value.length?Wr.open:null:t.panel;t=Mn.init(s.value,i,e.state)}else s.is(Cf)?t=new Mn(t.diagnostics,s.value?Wr.open:null,t.selected):s.is(gb)&&(t=new Mn(t.diagnostics,t.panel,s.value));return t},provide:t=>[Lr.from(t,e=>e.panel),Te.decorations.from(t,e=>e.diagnostics)]}),WV=Ne.mark({class:"cm-lintRange cm-lintRange-active"});function qV(t,e,s){let{diagnostics:i}=t.state.field($s),n,o=-1,r=-1;i.between(e-(s<0?1:0),e+(s>0?1:0),(a,d,{spec:u})=>{if(e>=a&&e<=d&&(a==d||(e>a||s>0)&&(e<d||s<0)))return n=u.diagnostics,o=a,r=d,!1});let l=t.state.facet(Hr).tooltipFilter;return n&&l&&(n=l(n,t.state)),n?{pos:o,end:r,above:t.state.doc.lineAt(o).to<r,create(){return{dom:KV(t,n)}}}:null}function KV(t,e){return ft("ul",{class:"cm-tooltip-lint"},e.map(s=>yb(t,s,!1)))}const GV=t=>{let e=t.state.field($s,!1);(!e||!e.panel)&&t.dispatch({effects:HV(t.state,[Cf.of(!0)])});let s=jr(t,Wr.open);return s&&s.dom.querySelector(".cm-panel-lint ul").focus(),!0},Pm=t=>{let e=t.state.field($s,!1);return!e||!e.panel?!1:(t.dispatch({effects:Cf.of(!1)}),!0)},JV=t=>{let e=t.state.field($s,!1);if(!e)return!1;let s=t.state.selection.main,i=e.diagnostics.iter(s.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==s.from&&i.to==s.to)?!1:(t.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},YV=[{key:"Mod-Shift-m",run:GV,preventDefault:!0},{key:"F8",run:JV}],Hr=$e.define({combine(t){return{sources:t.map(e=>e.source).filter(e=>e!=null),...Si(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:jm,tooltipFilter:jm,needsRefresh:(e,s)=>e?s?i=>e(i)||s(i):e:s,hideOn:(e,s)=>e?s?(i,n,o)=>e(i,n,o)||s(i,n,o):e:s,autoPanel:(e,s)=>e||s})}}});function jm(t,e){return t?e?(s,i)=>e(t(s,i),i):t:e}function vb(t){let e=[];if(t)e:for(let{name:s}of t){for(let i=0;i<s.length;i++){let n=s[i];if(/[a-zA-Z]/.test(n)&&!e.some(o=>o.toLowerCase()==n.toLowerCase())){e.push(n);continue e}}e.push("")}return e}function yb(t,e,s){var i;let n=s?vb(e.actions):[];return ft("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},ft("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(t):e.message),(i=e.actions)===null||i===void 0?void 0:i.map((o,r)=>{let l=!1,a=g=>{if(g.preventDefault(),l)return;l=!0;let _=Mo(t.state.field($s).diagnostics,e);_&&o.apply(t,_.from,_.to)},{name:d}=o,u=n[r]?d.indexOf(n[r]):-1,f=u<0?d:[d.slice(0,u),ft("u",d.slice(u,u+1)),d.slice(u+1)],h=o.markClass?" "+o.markClass:"";return ft("button",{type:"button",class:"cm-diagnosticAction"+h,onclick:a,onmousedown:a,"aria-label":` Action: ${d}${u<0?"":` (access key "${n[r]})"`}.`},f)}),e.source&&ft("div",{class:"cm-diagnosticSource"},e.source))}class QV extends pn{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return ft("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class Lm{constructor(e,s){this.diagnostic=s,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=yb(e,s,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Wr{constructor(e){this.view=e,this.items=[];let s=n=>{if(n.keyCode==27)Pm(this.view),this.view.focus();else if(n.keyCode==38||n.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(n.keyCode==40||n.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(n.keyCode==36)this.moveSelection(0);else if(n.keyCode==35)this.moveSelection(this.items.length-1);else if(n.keyCode==13)this.view.focus();else if(n.keyCode>=65&&n.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:o}=this.items[this.selectedIndex],r=vb(o.actions);for(let l=0;l<r.length;l++)if(r[l].toUpperCase().charCodeAt(0)==n.keyCode){let a=Mo(this.view.state.field($s).diagnostics,o);a&&o.actions[l].apply(e,a.from,a.to)}}else return;n.preventDefault()},i=n=>{for(let o=0;o<this.items.length;o++)this.items[o].dom.contains(n.target)&&this.moveSelection(o)};this.list=ft("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:s,onclick:i}),this.dom=ft("div",{class:"cm-panel-lint"},this.list,ft("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>Pm(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field($s).selected;if(!e)return-1;for(let s=0;s<this.items.length;s++)if(this.items[s].diagnostic==e.diagnostic)return s;return-1}update(){let{diagnostics:e,selected:s}=this.view.state.field($s),i=0,n=!1,o=null,r=new Set;for(e.between(0,this.view.state.doc.length,(l,a,{spec:d})=>{for(let u of d.diagnostics){if(r.has(u))continue;r.add(u);let f=-1,h;for(let g=i;g<this.items.length;g++)if(this.items[g].diagnostic==u){f=g;break}f<0?(h=new Lm(this.view,u),this.items.splice(i,0,h),n=!0):(h=this.items[f],f>i&&(this.items.splice(i,f-i),n=!0)),s&&h.diagnostic==s.diagnostic?h.dom.hasAttribute("aria-selected")||(h.dom.setAttribute("aria-selected","true"),o=h):h.dom.hasAttribute("aria-selected")&&h.dom.removeAttribute("aria-selected"),i++}});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)n=!0,this.items.pop();this.items.length==0&&(this.items.push(new Lm(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),n=!0),o?(this.list.setAttribute("aria-activedescendant",o.id),this.view.requestMeasure({key:this,read:()=>({sel:o.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:l,panel:a})=>{let d=a.height/this.list.offsetHeight;l.top<a.top?this.list.scrollTop-=(a.top-l.top)/d:l.bottom>a.bottom&&(this.list.scrollTop+=(l.bottom-a.bottom)/d)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),n&&this.sync()}sync(){let e=this.list.firstChild;function s(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)s();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)s()}moveSelection(e){if(this.selectedIndex<0)return;let s=this.view.state.field($s),i=Mo(s.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:gb.of(i)})}static open(e){return new Wr(e)}}function XV(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function Ul(t){return XV(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const ZV=Te.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Ul("#d11")},".cm-lintRange-warning":{backgroundImage:Ul("orange")},".cm-lintRange-info":{backgroundImage:Ul("#999")},".cm-lintRange-hint":{backgroundImage:Ul("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function e6(t){return t=="error"?4:t=="warning"?3:t=="info"?2:1}function t6(t){let e="hint",s=1;for(let i of t){let n=e6(i.severity);n>s&&(s=n,e=i.severity)}return e}const s6=[$s,Te.decorations.compute([$s],t=>{let{selected:e,panel:s}=t.field($s);return!e||!s||e.from==e.to?Ne.none:Ne.set([WV.range(e.from,e.to)])}),z5(qV,{hideOn:FV}),ZV],i6=[Z5(),s3(),b5(),SA(),K3(),a5(),h5(),et.allowMultipleSelections.of(!0),O3(),uy(Q3,{fallback:!0}),nA(),TV(),NV(),$5(),P5(),C5(),P8(),tf.of([...PV,...M8,...Z8,...OA,...F3,...pb,...YV])],n6={class:"rounded-lg border border-gray-300 overflow-hidden dark:border-gray-600"},Qi={__name:"CodeEditor",props:{modelValue:{type:String,default:""},language:{type:String,default:"r",validator:t=>["r","markdown","text","gitignore"].includes(t)},minHeight:{type:String,default:"400px"},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:""}},emits:["update:modelValue"],setup(t,{emit:e}){const s=t,i=e,n=ae(null);let o=null;const r=ff.define({token(d){return d.sol()&&d.match(/^#/)?(d.skipToEnd(),"comment"):(d.skipToEnd(),null)}}),l=uy(el.define([{tag:Ve.comment,color:"#16a34a"}])),a=()=>[r,l];return os(()=>{if(!n.value)return;const d=Te.updateListener.of(h=>{h.docChanged&&i("update:modelValue",h.state.doc.toString())}),u=[i6,a(),d,Te.lineWrapping,Te.theme({"&":{minHeight:s.minHeight,fontSize:"13px",fontFamily:'ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, "Liberation Mono", monospace'},".cm-scroller":{fontFamily:'ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, "Liberation Mono", monospace'},".cm-content":{padding:"12px 0"},".cm-line":{padding:"0 12px"}})],f=et.create({doc:s.modelValue||"",extensions:u});o=new Te({state:f,parent:n.value})}),ze(()=>s.modelValue,d=>{o&&d!==o.state.doc.toString()&&o.dispatch({changes:{from:0,to:o.state.doc.length,insert:d}})}),(d,u)=>(v(),b("div",n6,[c("div",{ref_key:"editorRef",ref:n},null,512)]))}},o6={class:"relative"},r6={key:0,class:"absolute z-10 mt-1 w-full max-h-64 overflow-y-auto border border-gray-200 dark:border-gray-700 rounded-md bg-white dark:bg-gray-800 shadow-lg"},l6=["onClick","onMouseenter"],a6={class:"flex items-center justify-between gap-3"},u6={class:"flex-1 min-w-0"},d6={class:"font-medium text-gray-900 dark:text-white"},c6={class:"text-xs text-gray-500 dark:text-gray-400 truncate"},f6={class:"ml-3 text-xs text-gray-400 dark:text-gray-500 shrink-0 flex items-center gap-1.5"},h6={class:"text-[10px] font-medium"},p6={key:1,class:"absolute right-3 top-9 text-gray-400"},Af={__name:"PackageAutocomplete",props:{modelValue:{type:String,default:""},label:{type:String,default:"Search Packages"},placeholder:{type:String,default:"Type to search..."},source:{type:String,default:"cran",validator:t=>["cran","bioconductor","github"].includes(t)}},emits:["update:modelValue","select"],setup(t,{emit:e}){const s=t,i=e,n=re({get:()=>s.modelValue,set:h=>i("update:modelValue",h)}),o=ae([]),r=ae(!1),l=ae(-1);let a=null;ze(n,h=>{if(a&&clearTimeout(a),h.length<2){o.value=[],l.value=-1;return}a=setTimeout(()=>{d(h)},300)});const d=async h=>{r.value=!0;try{const _=await(await fetch(`/api/packages/search?q=${encodeURIComponent(h)}&source=${encodeURIComponent(s.source)}`)).json();o.value=_.packages||[],l.value=o.value.length>0?0:-1}catch(g){console.error("Failed to search packages:",g),o.value=[],l.value=-1}finally{r.value=!1}},u=h=>{o.value.length!==0&&(h.key==="ArrowDown"?(h.preventDefault(),l.value=Math.min(l.value+1,o.value.length-1)):h.key==="ArrowUp"?(h.preventDefault(),l.value=Math.max(l.value-1,0)):h.key==="Enter"&&l.value>=0?(h.preventDefault(),f(o.value[l.value])):h.key==="Escape"&&(o.value=[],l.value=-1))},f=h=>{i("update:modelValue",h.name),i("select",h),o.value=[],l.value=-1};return(h,g)=>(v(),b("div",o6,[x(q,{modelValue:n.value,"onUpdate:modelValue":g[0]||(g[0]=_=>n.value=_),label:t.label,placeholder:t.placeholder,onKeydown:u},null,8,["modelValue","label","placeholder"]),o.value.length>0?(v(),b("div",r6,[(v(!0),b(se,null,ke(o.value,(_,p)=>(v(),b("button",{key:_.name,onClick:V=>f(_),onMouseenter:V=>l.value=p,class:Me(["w-full px-3 py-2 text-left border-b border-gray-200 dark:border-gray-700 last:border-b-0 transition",l.value===p?"bg-sky-50 dark:bg-sky-900/20":"hover:bg-gray-50 dark:hover:bg-gray-700"])},[c("div",a6,[c("div",u6,[c("div",d6,H(_.name),1),c("div",c6,H(_.title),1)]),c("div",f6,[c("span",h6,H(_.source==="cran"?"CRAN":_.source==="bioconductor"?"Bioconductor":_.source),1),g[1]||(g[1]=c("span",null,"",-1)),c("span",null,"v"+H(_.version),1)])])],42,l6))),128))])):I("",!0),r.value?(v(),b("div",p6,[...g[2]||(g[2]=[c("svg",{class:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[c("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),c("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):I("",!0)]))}},m6={class:"flex items-center justify-between"},g6={class:"flex-1"},v6={class:"text-xs text-gray-500 dark:text-gray-400 mb-1"},y6={class:"text-sm text-gray-900 dark:text-white"},Ds={__name:"OverviewCard",props:{title:{type:String,required:!0}},emits:["click"],setup(t){return(e,s)=>(v(),b("button",{onClick:s[0]||(s[0]=i=>e.$emit("click")),class:"w-full text-left px-4 py-3 rounded-md bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 hover:border-sky-300 dark:hover:border-sky-700 transition"},[c("div",m6,[c("div",g6,[c("div",v6,H(t.title),1),c("div",y6,[vt(e.$slots,"default")])]),s[1]||(s[1]=c("svg",{class:"h-5 w-5 text-gray-400 shrink-0 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))])]))}},b6={class:"pt-4 pb-2"},k6={class:"px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider dark:text-gray-400"},ja={__name:"NavigationSectionHeading",setup(t){return(e,s)=>(v(),b("div",b6,[c("h3",k6,[vt(e.$slots,"default")])]))}},x6={class:"space-y-3"},w6={class:"grid gap-4 sm:grid-cols-2"},_6={class:"space-y-3"},S6={class:"space-y-4"},C6={class:"text-xs text-gray-500 dark:text-gray-400"},Vf={__name:"GitHooksPanel",props:{modelValue:{type:Object,required:!0},flush:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{emit:e}){const s=t,i=e,n=()=>({initialize:s.modelValue?.initialize??!0,user_name:s.modelValue?.user_name??"",user_email:s.modelValue?.user_email??"",hooks:{ai_sync:s.modelValue?.hooks?.ai_sync??!1,data_security:s.modelValue?.hooks?.data_security??!1,check_sensitive_dirs:s.modelValue?.hooks?.check_sensitive_dirs??!1}}),o=re(()=>s.flush?"space-y-6":"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 space-y-6"),r=re(n),l=d=>{const u=n(),f={...u.hooks,...d?.hooks||{}};i("update:modelValue",{...u,...d,hooks:f})},a=(d,u)=>{l({hooks:{[d]:u}})};return(d,u)=>(v(),b("div",{class:Me(o.value)},[x(Le,{"model-value":r.value.initialize,label:"Initialize Git",description:"Run git init for every new project.","onUpdate:modelValue":u[0]||(u[0]=f=>l({initialize:f}))},null,8,["model-value"]),c("div",x6,[u[6]||(u[6]=c("div",null,[c("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"Git identity"),c("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Overrides Author Information when provided. ")],-1)),c("div",w6,[x(q,{"model-value":r.value.user_name,label:"Git Name",placeholder:"Jane Analyst",disabled:!r.value.initialize,"onUpdate:modelValue":u[1]||(u[1]=f=>l({user_name:f}))},null,8,["model-value","disabled"]),x(q,{"model-value":r.value.user_email,label:"Git Email",placeholder:"jane@example.com",hint:"Used for git config user.email during project setup.",disabled:!r.value.initialize,"onUpdate:modelValue":u[2]||(u[2]=f=>l({user_email:f}))},null,8,["model-value","disabled"])])]),c("div",_6,[u[8]||(u[8]=c("div",null,[c("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"Git Hooks"),c("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Pre-commit hooks that run automatically before each commit. ")],-1)),c("div",S6,[x(Le,{"model-value":r.value.hooks.ai_sync,label:"Sync AI Files Before Commit",description:"Update non-canonical files so assistants share the same instructions.",disabled:!r.value.initialize,"onUpdate:modelValue":u[3]||(u[3]=f=>a("ai_sync",f))},null,8,["model-value","disabled"]),x(Le,{"model-value":r.value.hooks.data_security,label:"Check for Secrets",description:"Run a lightweight scan for API keys and credentials before commits.",disabled:!r.value.initialize,"onUpdate:modelValue":u[4]||(u[4]=f=>a("data_security",f))},null,8,["model-value","disabled"]),x(Le,{"model-value":r.value.hooks.check_sensitive_dirs,label:"Warn About Unignored Sensitive Directories",description:"Block commits if directories with sensitive names aren't gitignored.",disabled:!r.value.initialize,"onUpdate:modelValue":u[5]||(u[5]=f=>a("check_sensitive_dirs",f))},null,8,["model-value","disabled"])]),c("p",C6,[vt(d.$slots,"note",{},()=>[u[7]||(u[7]=oe(" Project-specific .gitignore templates can be customized in Project Defaults. ",-1))])])])],2))}},A6={class:"space-y-5"},Mf={__name:"ScaffoldBehaviorPanel",props:{modelValue:{type:Object,required:!0},flush:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{emit:e}){const s=t,i=e,n=()=>({source_all_functions:s.modelValue?.source_all_functions??!0,set_theme_on_scaffold:s.modelValue?.set_theme_on_scaffold??!0,ggplot_theme:s.modelValue?.ggplot_theme??"theme_minimal",seed_on_scaffold:s.modelValue?.seed_on_scaffold??!1,seed:s.modelValue?.seed??""}),o=re(n),r=re(()=>s.flush?"space-y-5":"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 space-y-5"),l=a=>{const d=n();i("update:modelValue",{...d,...a})};return(a,d)=>(v(),b("div",{class:Me(r.value)},[c("div",A6,[c("div",null,[d[5]||(d[5]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Auto-Load Functions",-1)),x(Le,{"model-value":o.value.source_all_functions,label:"Source all R files from functions/ directory",description:"Automatically loads all helper functions when scaffold() runs","onUpdate:modelValue":d[0]||(d[0]=u=>l({source_all_functions:u}))},null,8,["model-value"])]),c("div",null,[d[7]||(d[7]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"ggplot2 Theme",-1)),x(Le,{"model-value":o.value.set_theme_on_scaffold,label:"Set ggplot2 theme when scaffold() runs",description:"Automatically sets ggplot2 theme for consistent plot styling","onUpdate:modelValue":d[1]||(d[1]=u=>l({set_theme_on_scaffold:u}))},null,8,["model-value"]),o.value.set_theme_on_scaffold?(v(),ge(Ft,{key:0,"model-value":o.value.ggplot_theme,label:"Theme",class:"mt-4","onUpdate:modelValue":d[2]||(d[2]=u=>l({ggplot_theme:u}))},{default:R(()=>[...d[6]||(d[6]=[c("option",{value:""},"None",-1),c("option",{value:"theme_minimal"},"Minimal",-1),c("option",{value:"theme_bw"},"Black & White",-1),c("option",{value:"theme_classic"},"Classic",-1),c("option",{value:"theme_gray"},"Gray (default)",-1),c("option",{value:"theme_light"},"Light",-1),c("option",{value:"theme_dark"},"Dark",-1),c("option",{value:"theme_void"},"Void",-1)])]),_:1},8,["model-value"])):I("",!0)]),c("div",null,[d[8]||(d[8]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Random Seed",-1)),x(Le,{"model-value":o.value.seed_on_scaffold,label:"Set random seed when scaffold() runs",description:"Ensures deterministic behavior for reproducibility","onUpdate:modelValue":d[3]||(d[3]=u=>l({seed_on_scaffold:u}))},null,8,["model-value"]),o.value.seed_on_scaffold?(v(),ge(q,{key:0,"model-value":o.value.seed,label:"Seed Value",placeholder:"e.g., 1234 or 20241107",hint:"Leave empty to use global default",class:"mt-4","onUpdate:modelValue":d[4]||(d[4]=u=>l({seed:u}))},null,8,["model-value"])):I("",!0)])])],2))}},V6={class:"space-y-6"},M6={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},D6={class:"mb-4 rounded-md border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900 p-4"},T6={class:"flex items-center justify-between mb-3"},$6={class:"flex items-center gap-2"},E6={class:"space-y-3"},O6={class:"grid grid-cols-2 gap-3"},P6={class:"flex items-center gap-2"},j6=["id","checked","onChange"],L6=["for"],R6={key:0},B6={key:1,class:"space-y-3"},I6={class:"grid grid-cols-2 gap-3"},U6={class:"grid grid-cols-2 gap-3"},N6={class:"grid grid-cols-2 gap-3"},z6={key:2,class:"space-y-3"},F6={class:"grid grid-cols-2 gap-3"},H6={class:"grid grid-cols-2 gap-3"},W6={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},q6={class:"space-y-3"},K6={class:"flex items-center gap-2"},G6=["id","checked","onChange"],J6=["for"],Y6={class:"grid grid-cols-2 gap-3"},Q6={class:"grid grid-cols-2 gap-3"},Df={__name:"ConnectionsPanel",props:{databaseConnections:{type:Array,required:!0},s3Connections:{type:Array,required:!0},defaultDatabase:{type:String,default:null},defaultStorageBucket:{type:String,default:null}},emits:["update:databaseConnections","update:s3Connections","update:defaultDatabase","update:defaultStorageBucket"],setup(t){const e=t,s=(l,a)=>!l||l.trim()===""?"Connection name is required":l==="framework_db"?"framework_db is reserved for system use":e.databaseConnections.findIndex((f,h)=>h!==a&&f.name===l)!==-1?"Connection name must be unique":e.s3Connections.findIndex(f=>f.name===l)!==-1?"Connection name must be unique across all connections":null,i=(l,a)=>!l||l.trim()===""?"Connection name is required":l==="framework_db"?"framework_db is reserved for system use":e.s3Connections.findIndex((f,h)=>h!==a&&f.name===l)!==-1?"Connection name must be unique":e.databaseConnections.findIndex(f=>f.name===l)!==-1?"Connection name must be unique across all connections":null,n=(l,a)=>{let d=1,u=l;for(;a.includes(u)||u==="framework_db";)d+=1,u=`${l}_${d}`;return u},o=()=>{const l=e.databaseConnections.map(h=>h.name);let a="postgres",d="database";l.some(h=>h.startsWith("postgres"))?l.some(h=>h.startsWith("mysql"))?l.some(h=>h.startsWith("sqlserver"))||(a="sqlserver",d="sqlserver"):(a="mysql",d="mysql"):(a="postgres",d="postgres");const u=n(d,l),f={_id:Date.now(),name:u,driver:a};return a==="postgres"?{...f,host:'env("POSTGRES_HOST", "localhost")',port:'env("POSTGRES_PORT", "5432")',database:'env("POSTGRES_DB", "mydb")',schema:'env("POSTGRES_SCHEMA", "public")',user:'env("POSTGRES_USER", "postgres")',password:'env("POSTGRES_PASSWORD", "")'}:a==="mysql"?{...f,host:'env("MYSQL_HOST", "localhost")',port:'env("MYSQL_PORT", "3306")',database:'env("MYSQL_DB", "mydb")',user:'env("MYSQL_USER", "root")',password:'env("MYSQL_PASSWORD", "")'}:a==="sqlserver"?{...f,host:'env("SQLSERVER_HOST", "localhost")',port:'env("SQLSERVER_PORT", "1433")',database:'env("SQLSERVER_DB", "mydb")',user:'env("SQLSERVER_USER", "sa")',password:'env("SQLSERVER_PASSWORD", "")'}:f},r=()=>({_id:Date.now(),name:n("s3_bucket",e.s3Connections.map(l=>l.name)),bucket:'env("S3_BUCKET", "my-bucket")',region:'env("S3_REGION", "us-east-1")',endpoint:'env("S3_ENDPOINT", "")',access_key:'env("S3_ACCESS_KEY", "")',secret_key:'env("S3_SECRET_KEY", "")'});return(l,a)=>(v(),b("div",V6,[c("div",M6,[a[7]||(a[7]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Databases",-1)),c("div",D6,[c("div",T6,[c("div",$6,[x(pa,{variant:"gray",size:"sm"},{default:R(()=>[...a[2]||(a[2]=[oe("System",-1)])]),_:1}),a[3]||(a[3]=c("span",{class:"text-sm font-medium text-gray-900 dark:text-gray-100 font-mono"},"framework_db",-1))]),a[4]||(a[4]=c("span",{class:"text-xs text-gray-500 dark:text-gray-400"},"SQLite - Framework metadata",-1))]),a[5]||(a[5]=c("div",{class:"text-sm text-gray-600 dark:text-gray-400 font-mono"}," framework.db ",-1))]),x(gt,{"model-value":t.databaseConnections,"onUpdate:modelValue":a[0]||(a[0]=d=>l.$emit("update:databaseConnections",d)),"add-label":"Add Database","default-item":o},{default:R(({item:d,index:u,update:f})=>[c("div",E6,[c("div",O6,[x(q,{"model-value":d.name,"onUpdate:modelValue":h=>f("name",h),label:"Connection Name",error:s(d.name,u),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),x(Ft,{"model-value":d.driver,"onUpdate:modelValue":h=>f("driver",h),label:"Driver",size:"sm"},{default:R(()=>[...a[6]||(a[6]=[c("option",{value:"sqlite"},"SQLite",-1),c("option",{value:"postgres"},"PostgreSQL",-1),c("option",{value:"mysql"},"MySQL",-1),c("option",{value:"sqlserver"},"SQL Server",-1)])]),_:1},8,["model-value","onUpdate:modelValue"])]),c("div",P6,[c("input",{type:"radio",id:`default-db-${d._id}`,checked:t.defaultDatabase===d.name,onChange:h=>l.$emit("update:defaultDatabase",d.name),class:"h-4 w-4 text-sky-600 focus:ring-sky-500"},null,40,j6),c("label",{for:`default-db-${d._id}`,class:"text-sm text-gray-700 dark:text-gray-300"}," Default database ",8,L6)]),d.driver==="sqlite"?(v(),b("div",R6,[x(q,{"model-value":d.database,"onUpdate:modelValue":h=>f("database",h),label:"Database Path",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])):d.driver==="postgres"||d.driver==="postgresql"?(v(),b("div",B6,[c("div",I6,[x(q,{"model-value":d.host,"onUpdate:modelValue":h=>f("host",h),label:"Host",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":d.port,"onUpdate:modelValue":h=>f("port",h),label:"Port",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])]),c("div",U6,[x(q,{"model-value":d.database,"onUpdate:modelValue":h=>f("database",h),label:"Database",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":d.schema,"onUpdate:modelValue":h=>f("schema",h),label:"Schema",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])]),c("div",N6,[x(q,{"model-value":d.user,"onUpdate:modelValue":h=>f("user",h),label:"User",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":d.password,"onUpdate:modelValue":h=>f("password",h),label:"Password",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])])):d.driver==="mysql"||d.driver==="sqlserver"?(v(),b("div",z6,[c("div",F6,[x(q,{"model-value":d.host,"onUpdate:modelValue":h=>f("host",h),label:"Host",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":d.port,"onUpdate:modelValue":h=>f("port",h),label:"Port",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])]),x(q,{"model-value":d.database,"onUpdate:modelValue":h=>f("database",h),label:"Database",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),c("div",H6,[x(q,{"model-value":d.user,"onUpdate:modelValue":h=>f("user",h),label:"User",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":d.password,"onUpdate:modelValue":h=>f("password",h),label:"Password",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])])):I("",!0)])]),_:1},8,["model-value"])]),c("div",W6,[a[8]||(a[8]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"S3-compatible Storage",-1)),x(gt,{"model-value":t.s3Connections,"onUpdate:modelValue":a[1]||(a[1]=d=>l.$emit("update:s3Connections",d)),"add-label":"Add Bucket","default-item":r},{default:R(({item:d,index:u,update:f})=>[c("div",q6,[x(q,{"model-value":d.name,"onUpdate:modelValue":h=>f("name",h),label:"Connection Name",error:i(d.name,u),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),c("div",K6,[c("input",{type:"radio",id:`default-s3-${d._id}`,checked:t.defaultStorageBucket===d.name,onChange:h=>l.$emit("update:defaultStorageBucket",d.name),class:"h-4 w-4 text-sky-600 focus:ring-sky-500"},null,40,G6),c("label",{for:`default-s3-${d._id}`,class:"text-sm text-gray-700 dark:text-gray-300"}," Default storage bucket ",8,J6)]),c("div",Y6,[x(q,{"model-value":d.bucket,"onUpdate:modelValue":h=>f("bucket",h),label:"Bucket",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":d.region,"onUpdate:modelValue":h=>f("region",h),label:"Region",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])]),x(q,{"model-value":d.endpoint,"onUpdate:modelValue":h=>f("endpoint",h),label:"Endpoint",hint:"Leave empty for AWS S3, or specify custom endpoint for MinIO, etc.",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),c("div",Q6,[x(q,{"model-value":d.access_key,"onUpdate:modelValue":h=>f("access_key",h),label:"Access Key",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":d.secret_key,"onUpdate:modelValue":h=>f("secret_key",h),label:"Secret Key",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])])]),_:1},8,["model-value"])])]))}},X6=["onClick","aria-current"],Z6={class:"mt-4"},eM={__name:"Tabs",props:{modelValue:{type:[String,Number],required:!0},tabs:{type:Array,required:!0,validator:t=>t.every(e=>e.id&&e.label)},variant:{type:String,default:"pills",validator:t=>["pills","underline"].includes(t)},size:{type:String,default:"md",validator:t=>["sm","md","lg"].includes(t)}},emits:["update:modelValue","change"],setup(t,{emit:e}){const s=t,i=e,n=re(()=>s.variant==="underline"?"border-b border-gray-200 dark:border-white/10":""),o=re(()=>{const a=["flex","gap-2"];return s.variant==="underline"?a.push("-mb-px"):a.push("p-1","bg-gray-100","dark:bg-white/5","rounded-lg"),a.join(" ")}),r=a=>{const d=s.modelValue===a,u=["inline-flex","items-center","gap-2","font-medium","transition-colors"],f={sm:"px-2.5 py-1.5 text-xs",md:"px-3 py-2 text-sm",lg:"px-4 py-2.5 text-base"};return u.push(f[s.size]),s.variant==="pills"?(u.push("rounded-md"),d?u.push("bg-white","text-gray-900","shadow-xs","dark:bg-white/10","dark:text-white"):u.push("text-gray-600","hover:text-gray-900","dark:text-gray-400","dark:hover:text-white")):(u.push("border-b-2","pb-3"),d?u.push("border-sky-600","text-sky-600","dark:border-sky-500","dark:text-sky-400"):u.push("border-transparent","text-gray-600","hover:border-gray-300","hover:text-gray-900","dark:text-gray-400","dark:hover:border-gray-600","dark:hover:text-white")),u.join(" ")},l=a=>{i("update:modelValue",a),i("change",a)};return(a,d)=>(v(),b("div",null,[c("div",{class:Me(n.value)},[c("nav",{class:Me(o.value),"aria-label":"Tabs"},[(v(!0),b(se,null,ke(t.tabs,u=>(v(),b("button",{key:u.id,type:"button",onClick:f=>l(u.id),class:Me(r(u.id)),"aria-current":t.modelValue===u.id?"page":void 0},[u.icon?(v(),ge(Es(u.icon),{key:0,class:"size-5"})):I("",!0),oe(" "+H(u.label)+" ",1),u.badge?(v(),ge(pa,{key:1,variant:t.modelValue===u.id?"emerald":"gray",pill:""},{default:R(()=>[oe(H(u.badge),1)]),_:2},1032,["variant"])):I("",!0)],10,X6))),128))],2)],2),c("div",Z6,[vt(a.$slots,"default")])]))}},tM={key:0,class:"mb-4"},sM={key:1,class:"mb-4"},iM={key:2,class:"space-y-6"},nM={key:0,class:"rounded-lg bg-gray-50 p-8 text-center dark:bg-gray-800/40"},oM={key:1,class:"space-y-5"},rM={class:"mb-4"},lM={class:"text-sm font-semibold text-gray-900 dark:text-white"},aM={class:"text-xs text-gray-500 dark:text-gray-400"},uM={class:"space-y-3"},dM={class:"flex items-start gap-3"},cM={class:"grid flex-1 grid-cols-2 gap-3"},fM=["value","onInput","disabled"],hM={class:"relative"},pM=["onUpdate:modelValue","type","placeholder","disabled"],mM=["onClick"],gM=["onClick"],vM={key:0,class:"mt-4"},yM={key:2,class:"rounded-lg border border-gray-200 bg-gray-50 p-4 text-sm dark:border-gray-700 dark:bg-gray-800/60"},bM={key:3,class:"space-y-3"},kM=["disabled"],xM={key:4,class:"mt-4 flex justify-end"},wM={__name:"EnvEditor",props:{loading:{type:Boolean,default:!1},error:{type:String,default:""},showSecurityAlert:{type:Boolean,default:!0},allowAdd:{type:Boolean,default:!0},allowRemove:{type:Boolean,default:!0},allowShowValuesToggle:{type:Boolean,default:!0},allowRegroupOption:{type:Boolean,default:!0},showSaveButton:{type:Boolean,default:!0},saveLabel:{type:String,default:"Save .env"},groups:{type:Object,default:()=>({})},variables:{type:Object,default:()=>({})},rawContent:{type:String,default:""},viewMode:{type:String,default:"grouped"},regroupOnSave:{type:Boolean,default:!1}},emits:["update:variables","update:rawContent","update:viewMode","update:regroupOnSave","save"],setup(t,{emit:e}){const s=t,i=e,n=j=>JSON.parse(JSON.stringify(j||{})),o=ae(n(s.variables)),r=ae(s.rawContent||""),l=ae(s.viewMode||"grouped"),a=ae(!!s.regroupOnSave),d=ae(!1),u=ae({});ze(()=>s.variables,j=>{o.value=n(j)},{deep:!0}),ze(()=>s.rawContent,j=>{r.value=j||""},{immediate:!0}),ze(()=>s.viewMode,j=>{l.value=j||"grouped"}),ze(()=>s.regroupOnSave,j=>{a.value=!!j}),ze(o,j=>{i("update:variables",n(j)),l.value!=="raw"&&(r.value=_(r.value,j,a.value),i("update:rawContent",r.value))},{deep:!0}),ze(r,j=>{if(l.value==="raw"){i("update:rawContent",j);const A=f(j);o.value=A,i("update:variables",n(A))}}),ze(l,(j,A)=>{i("update:viewMode",j),j==="raw"&&A!=="raw"&&(Object.keys(o.value).length>0?r.value=_(r.value,o.value,a.value):!r.value&&s.rawContent&&(r.value=s.rawContent))}),ze(a,j=>{i("update:regroupOnSave",j)});const f=j=>{const A=(j||"").split(/\r?\n/),J={};return A.forEach(ee=>{const me=ee.trim();if(!me||me.startsWith("#")||!me.includes("="))return;const[te,...F]=me.split("=");J[te.trim()]=F.join("=").replace(/^"|"$/g,"")}),J},h=j=>{const A=Object.entries(j||{});return A.length?A.reduce((J,[ee,me])=>{const te=ee.includes("_")?ee.split("_")[0]:"Other";return J[te]||(J[te]={}),J[te][ee]={defined:!!me,used:!1,used_in:[],value:me},J},{}):{}},g=re(()=>{const j=s.groups||{};return Object.keys(j).length?j:h(o.value)}),_=(j,A,J=!1)=>{if(J){const ce={};for(const[Y,X]of Object.entries(A)){const Q=Y.includes("_")?Y.split("_")[0]:"Other";ce[Q]||(ce[Q]=[]),ce[Q].push([Y,X])}const le=[],ve=Object.keys(ce).sort();for(let Y=0;Y<ve.length;Y++){const X=ve[Y],Q=ce[X];Y>0&&(le.push(""),le.push("")),le.push(`# ${X==="Other"?"Other variables":X.toUpperCase()}`);for(const[Ee,E]of Q)le.push(`${Ee}=${E??""}`)}return le.join(`
`)}const ee=(j||"").split(/\r?\n/),me=new Set,te=[];for(const ce of ee){const le=ce.trim();if(!le||le.startsWith("#")||!le.includes("=")){te.push(ce);continue}const[ve,...Y]=le.split("="),X=ve.trim(),Q=Y.join("=").trim();if(X in A){const Ee=A[X]??"";te.push(`${X}=${Ee}`),me.add(X)}else(Object.keys(A).length===0||Q==="")&&te.push(ce)}const F=Object.entries(A).filter(([ce])=>!me.has(ce));if(F.length>0){const ce={};for(const[le,ve]of F){const Y=le.includes("_")?le.split("_")[0]:"Other";ce[Y]||(ce[Y]=[]),ce[Y].push([le,ve])}for(const[le,ve]of Object.entries(ce)){te.length>0&&te[te.length-1]!==""&&(te.push(""),te.push("")),te.push(`# ${le==="Other"?"Other variables":le.toUpperCase()}`);for(const[Y,X]of ve)te.push(`${Y}=${X??""}`)}}return te.join(`
`)},p=()=>{if(!s.allowAdd)return;const j="NEW_VARIABLE";let A=1,J=`${j}_${A}`;for(;o.value[J];)A+=1,J=`${j}_${A}`;o.value={...o.value,[J]:""}},V=j=>{if(!s.allowRemove)return;const A=n(o.value);delete A[j],o.value=A},M=(j,A)=>{if(!A||j===A)return;const J=A.replace(/[^A-Z0-9_]/gi,"").toUpperCase();if(!J)return;const ee=n(o.value);ee[J]||(ee[J]=ee[j],delete ee[j],o.value=ee)},N=j=>{const A=["PASSWORD","SECRET","KEY","TOKEN"],J=j.toUpperCase();return A.some(ee=>J.includes(ee))},B=j=>d.value||u.value[j]||!N(j),W=j=>{u.value[j]=!u.value[j]},G=()=>{d.value=!d.value};return(j,A)=>(v(),b("div",null,[t.error?(v(),b("div",tM,[x(Ls,{type:"error",title:"Error",description:t.error},null,8,["description"])])):I("",!0),t.showSecurityAlert?(v(),b("div",sM,[x(Ls,{type:"warning",title:" Contains Sensitive Data"},{actions:R(()=>[t.viewMode==="grouped"&&t.allowShowValuesToggle?(v(),ge(Re,{key:0,variant:"soft",size:"sm",onClick:G},{default:R(()=>[oe(H(d.value?"Hide Values":"Show Values"),1)]),_:1})):I("",!0)]),default:R(()=>[A[4]||(A[4]=oe(" This file can include passwords and secrets. Keep it out of version control. ",-1))]),_:1})])):I("",!0),x(eM,{modelValue:l.value,"onUpdate:modelValue":A[0]||(A[0]=J=>l.value=J),tabs:[{id:"grouped",label:"Key/Value Editor"},{id:"raw",label:"Raw .env"}],variant:"pills",class:"mb-4"},null,8,["modelValue"]),l.value==="grouped"?(v(),b("div",iM,[Object.keys(g.value).length===0?(v(),b("div",nM,[x(lt(g0),{class:"mx-auto mb-3 h-10 w-10 text-gray-400"}),A[6]||(A[6]=c("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"No environment variables yet.",-1)),t.allowAdd?(v(),ge(Re,{key:0,variant:"primary",class:"mt-4",onClick:p},{default:R(()=>[...A[5]||(A[5]=[oe(" Add Variable ",-1)])]),_:1})):I("",!0)])):(v(),b("div",oM,[(v(!0),b(se,null,ke(g.value,(J,ee)=>(v(),b("div",{key:ee,class:"rounded-lg bg-gray-50 p-5 dark:bg-gray-800/40"},[c("div",rM,[c("p",lM,H(ee==="Other"?"Uncategorized":ee.toUpperCase()),1),c("p",aM,"Variables with the "+H(ee)+" prefix.",1)]),c("div",uM,[(v(!0),b(se,null,ke(J,(me,te)=>(v(),b("div",{key:te,class:"space-y-2"},[c("div",dM,[c("div",cM,[c("input",{value:te,onInput:F=>M(te,F.target.value),type:"text",class:"w-full rounded-md border border-gray-300 bg-white px-3 py-2 font-mono text-sm uppercase text-gray-900 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-100",disabled:t.loading},null,40,fM),c("div",hM,[Ke(c("input",{"onUpdate:modelValue":F=>o.value[te]=F,type:B(te)?"text":"password",placeholder:me.defined?"value":"(not set)",class:"w-full rounded-md border border-gray-300 bg-white px-3 py-2 font-mono text-sm text-gray-900 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-100",disabled:t.loading},null,8,pM),[[Zk,o.value[te]]]),N(te)&&t.allowShowValuesToggle?(v(),b("button",{key:0,type:"button",class:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300",onClick:F=>W(te)},[B(te)?(v(),ge(lt(w2),{key:0,class:"h-4 w-4"})):(v(),ge(lt(_2),{key:1,class:"h-4 w-4"}))],8,mM)):I("",!0)])]),t.allowRemove?(v(),b("button",{key:0,type:"button",class:"mt-2 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300",onClick:F=>V(te)},[...A[7]||(A[7]=[c("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,gM)):I("",!0)])]))),128))]),t.allowAdd?(v(),b("div",vM,[x(Re,{variant:"secondary",size:"sm",onClick:p},{default:R(()=>[...A[8]||(A[8]=[oe(" + Add Variable ",-1)])]),_:1})])):I("",!0)]))),128))])),t.allowRegroupOption?(v(),b("div",yM,[x(Le,{modelValue:a.value,"onUpdate:modelValue":A[1]||(A[1]=J=>a.value=J),label:"Regroup .env file by prefix when saving",description:"Rewrites the file grouped by prefix and strips comments."},null,8,["modelValue"])])):I("",!0)])):(v(),b("div",bM,[Ke(c("textarea",{"onUpdate:modelValue":A[2]||(A[2]=J=>r.value=J),class:"h-80 w-full rounded-md border border-gray-300 bg-white px-3 py-2 font-mono text-sm text-gray-900 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-100",disabled:t.loading},null,8,kM),[[vo,r.value]]),A[9]||(A[9]=c("p",{class:"text-xs text-gray-500"},"Edit the .env file directly. Comments and formatting are preserved.",-1))])),t.showSaveButton?(v(),b("div",xM,[x(Re,{disabled:t.loading,variant:"primary",onClick:A[3]||(A[3]=J=>j.$emit("save"))},{default:R(()=>[oe(H(t.saveLabel),1)]),_:1},8,["disabled"])])):I("",!0)]))}},_M={class:"flex min-h-screen"},SM={class:"w-64 shrink-0 border-r border-gray-200 p-6 dark:border-gray-800"},CM={class:"space-y-1 mb-6"},AM=["onClick"],VM=["fill","viewBox","stroke"],MM=["stroke-linecap","stroke-linejoin","stroke-width","fill","d"],DM={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},TM={class:"flex-1 p-10"},$M={class:"mt-8 space-y-6"},EM={class:"space-y-3"},OM={class:"text-gray-600 dark:text-gray-400"},PM={class:"text-gray-600 dark:text-gray-400"},jM={class:"text-gray-600 dark:text-gray-400"},LM={class:"text-gray-600 dark:text-gray-400"},RM={class:"text-gray-600 dark:text-gray-400"},BM={class:"text-gray-600 dark:text-gray-400"},IM={class:"text-gray-600 dark:text-gray-400"},UM={class:"text-gray-600 dark:text-gray-400"},NM={class:"text-gray-600 dark:text-gray-400"},zM={class:"text-gray-600 dark:text-gray-400"},FM={key:1,class:"text-gray-600 dark:text-gray-400"},HM={key:2,class:"text-gray-600 dark:text-gray-400"},WM={class:"text-gray-600 dark:text-gray-400"},qM={class:"text-gray-600 dark:text-gray-400"},KM={class:"text-gray-600 dark:text-gray-400"},GM={class:"text-gray-600 dark:text-gray-400"},JM={key:1,class:"text-gray-600 dark:text-gray-400"},YM={class:"text-gray-600 dark:text-gray-400"},QM={class:"text-gray-600 dark:text-gray-400"},XM={class:"text-gray-600 dark:text-gray-400"},ZM={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},eD={class:"space-y-5"},tD={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},sD={class:"space-y-5"},iD={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 space-y-6"},nD={class:"space-y-6"},oD={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},rD={key:0,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},lD={key:1,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},aD={class:"space-y-3"},uD={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},dD={class:"grid grid-cols-2 gap-3"},cD={key:2,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},fD={class:"space-y-3"},hD={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},pD={class:"grid grid-cols-2 gap-3"},mD={key:3,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},gD={class:"space-y-3"},vD={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},yD={class:"grid grid-cols-2 gap-3"},bD={key:4,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},kD={class:"space-y-3"},xD={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},wD={class:"grid grid-cols-2 gap-3"},_D={key:5,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},SD={class:"space-y-3"},CD={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},AD={class:"grid grid-cols-2 gap-3"},VD={key:6,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},MD={class:"space-y-3"},DD={key:7,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},TD={class:"space-y-3"},$D={key:8,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},ED={class:"space-y-3"},OD={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},PD={class:"grid grid-cols-2 gap-3"},jD={key:9,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},LD={class:"space-y-3"},RD={class:"flex items-start gap-3 mb-2"},BD={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},ID={class:"grid grid-cols-2 gap-3"},UD={key:10,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},ND={class:"space-y-4"},zD={class:"grid gap-4 sm:grid-cols-2"},FD={class:"p-3 rounded-md"},HD={class:"p-3 rounded-md"},WD={class:"grid gap-4 sm:grid-cols-2"},qD={class:"space-y-3"},KD={class:"space-y-3"},GD={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},JD={class:"grid gap-6 sm:grid-cols-2"},YD={class:"space-y-2"},QD={class:"space-y-2"},XD={key:11,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},ZD={class:"space-y-4"},eT={class:"grid gap-4 sm:grid-cols-2"},tT={class:"p-3 rounded-md"},sT={class:"p-3 rounded-md"},iT={class:"grid gap-4 sm:grid-cols-2"},nT={class:"space-y-3"},oT={class:"space-y-3"},rT={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},lT={class:"grid gap-6 sm:grid-cols-2"},aT={class:"space-y-2"},uT={class:"space-y-2"},dT={key:12,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},cT={class:"space-y-3"},fT={class:"flex items-start gap-3 mb-2"},hT={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},pT={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},mT={class:"space-y-5"},gT={class:"pt-4 border-t border-gray-200 dark:border-gray-700"},vT={class:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between mb-4"},yT={key:0,class:"space-y-3"},bT={class:"flex flex-col gap-3"},kT={class:"grid gap-3 grid-cols-[1fr_160px]"},xT={class:"flex items-center justify-between"},wT={key:1,class:"text-xs text-gray-500 dark:text-gray-400"},_T={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},ST={class:"space-y-6"},CT={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},AT={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},VT={class:"space-y-2"},MT={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},DT={__name:"NewProjectView",setup(t){const e=Ya(),s=$o(),i=Xa(),n=ae(null),o=ae(null),r=ae(!0),l=[{id:"claude",label:"Claude Code",description:"Anthropic's IDE-focused assistant."},{id:"copilot",label:"GitHub Copilot",description:"Complements VS Code and JetBrains editors."},{id:"agents",label:"Multi-Agent (OpenAI Codex, Cursor, etc.)",description:"Shared instructions for multi-model orchestrators."}],a=D=>D?Array.isArray(D)?Array.from(new Set(D.map(S=>String(S)))):typeof D=="string"?[D]:[]:[],d=()=>{Array.isArray(p.value.ai.assistants)||(p.value.ai.assistants=a(p.value.ai.assistants))},u=[{id:"overview",label:"Overview",icon:Qa},{id:"basics",label:"Basics",icon:Ic},{id:"structure",label:"Project Structure",icon:ha},{id:"packages",label:"Packages",icon:Uc},{id:"ai",label:"AI Assistants",svgIcon:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"},{id:"git",label:"Git & Hooks",svgIcon:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"},{id:"connections",label:"Connections",icon:Nc},{id:"scaffold",label:"Scaffold Behavior",svgIcon:"M256 64L576 64L576 576L64 576L64 192L256 192L256 64zM256 224L96 224L96 544L256 544L256 224zM288 544L544 544L544 96L288 96L288 544zM440 152L488 152L488 200L440 200L440 152zM392 152L392 200L344 200L344 152L392 152zM440 248L488 248L488 296L440 296L440 248zM392 248L392 296L344 296L344 248L392 248zM152 280L200 280L200 328L152 328L152 280zM392 344L392 392L344 392L344 344L392 344zM152 376L200 376L200 424L152 424L152 376zM488 344L488 392L440 392L440 344L488 344z",svgViewBox:"0 0 640 640",svgFill:"currentColor",svgStroke:"none",svgStrokeWidth:0,svgPathFill:"currentColor"}],f=ae("basics"),h=ae(!1),g=ae(null),_=ae(!0),p=ae({name:"",location:"",type:"project",author:{name:"",email:"",affiliation:""},scaffold:{seed_on_scaffold:!1,seed:"",set_theme_on_scaffold:!0,ggplot_theme:"theme_minimal",source_all_functions:!0,notebook_format:"quarto",ide:"vscode",positron:!1},packages:{use_renv:!1,default_packages:[]},ai:{enabled:!0,assistants:[],canonical_file:"CLAUDE.md",canonical_content:""},git:{initialize:!0,gitignore_template:"gitignore-project",gitignore_content:"",user_name:"",user_email:"",hooks:{ai_sync:!1,data_security:!1,check_sensitive_dirs:!1}},connections:{databaseConnections:[],s3Connections:[],defaultDatabase:null,defaultStorageBucket:null},env:{variables:{},rawContent:`# PostgreSQL connection
POSTGRES_HOST=127.0.0.1
POSTGRES_PORT=5432
POSTGRES_DB=postgres
POSTGRES_SCHEMA=public
POSTGRES_USER=postgres
POSTGRES_PASSWORD=


# S3-compatible storage (AWS S3, MinIO, etc.)
S3_ACCESS_KEY=
S3_SECRET_KEY=
S3_BUCKET=
S3_REGION=us-east-1
S3_ENDPOINT=`,viewMode:"grouped",regroupOnSave:!1,groups:{}},directories_enabled:{},directories:{},extra_directories:[],extra_directories_enabled:{}}),V=()=>{const D=s.query.section;D&&["overview","author","scaffold","structure","packages","ai","git","connections"].includes(D)&&(f.value=D)};ze(()=>s.query.section,D=>{D&&["overview","author","scaffold","structure","packages","ai","git","connections"].includes(D)?f.value=D:D||(f.value="overview")}),ze(f,D=>{s.query.section!==D&&e.replace({query:{...s.query,section:D}})}),os(async()=>{console.log("[DEBUG] NewProjectView mounted - starting initialization"),V();try{console.log("[DEBUG] Fetching global settings from /api/settings");const D=await fetch("/api/settings");if(console.log("[DEBUG] Settings response status:",D.status,D.ok),D.ok&&(n.value=await D.json(),n.value)){if(n.value.global?.projects_root&&(p.value.location=n.value.global.projects_root),p.value.author={...n.value.author},n.value.defaults?.project_type&&(p.value.type=n.value.defaults.project_type),n.value.defaults?.scaffold&&(p.value.scaffold={...n.value.defaults.scaffold}),n.value.defaults?.positron!==void 0&&(p.value.scaffold.positron=n.value.defaults.positron),n.value.defaults?.packages)if(Array.isArray(n.value.defaults.packages)){const ie=n.value.defaults.packages.map(C=>({name:C.name||"",source:C.source||"cran",auto_attach:C.auto_attach!==!1}));p.value.packages.default_packages.splice(0,p.value.packages.default_packages.length,...ie)}else n.value.defaults.packages.default_packages&&(p.value.packages={use_renv:n.value.defaults.packages.use_renv||!1,default_packages:(n.value.defaults.packages.default_packages||[]).map(ie=>({name:ie.name||"",source:ie.source||"cran",auto_attach:ie.auto_attach!==!1}))});const m=a(n.value.defaults?.ai_assistants);if(p.value.ai={enabled:n.value.defaults?.ai_support!==!1,assistants:m.length>0?m:["claude"],canonical_file:n.value.defaults?.ai_canonical_file||"CLAUDE.md",canonical_content:""},d(),p.value.ai.enabled&&p.value.ai.canonical_file&&X(p.value.ai.canonical_file,p.value.type),p.value.git.initialize=n.value.defaults?.use_git!==!1,p.value.git.user_name=n.value.git?.user_name||"",p.value.git.user_email=n.value.git?.user_email||"",n.value.defaults?.git_hooks&&(p.value.git.hooks={...n.value.defaults.git_hooks}),n.value.defaults?.env){const ie=n.value.defaults.env;typeof ie=="string"?p.value.env.rawContent=ie:ie?.raw&&(p.value.env.rawContent=ie.raw)}const L={project:"gitignore-project",project_sensitive:"gitignore-project_sensitive",course:"gitignore-course",presentation:"gitignore-presentation"};p.value.git.gitignore_template=L[p.value.type]||"gitignore-project",p.value.git.gitignore_template&&ve(p.value.git.gitignore_template)}const S=await fetch("/api/settings-catalog");S.ok&&(o.value=await S.json()),M(),G()}catch(D){console.error("[DEBUG] Failed to load settings:",D),console.error("[DEBUG] Error details:",D.message,D.stack),i.error("Load Error","Could not load default settings")}finally{console.log("[DEBUG] Initialization complete, loading =",r.value),r.value=!1,setTimeout(()=>{if(g.value&&g.value.$el){const D=g.value.$el.querySelector("input");D&&D.focus()}},100)}}),ze(()=>p.value.type,D=>{M();const S={project:"gitignore-project",project_sensitive:"gitignore-project_sensitive",course:"gitignore-course",presentation:"gitignore-presentation"};p.value.git.gitignore_template=S[D]||"gitignore-project"}),ze(()=>p.value.git.gitignore_template,D=>{D&&ve(D)}),ze(()=>p.value.name,()=>{n.value?.global?.projects_root&&Ge()}),ze(()=>p.value.ai.enabled,D=>{D&&p.value.ai.canonical_file&&X(p.value.ai.canonical_file,p.value.type)}),ze(()=>p.value.ai.canonical_file,D=>{D&&p.value.ai.enabled&&X(D,p.value.type)}),ze(()=>p.value.type,D=>{p.value.ai.canonical_file==="CLAUDE.md"&&p.value.ai.enabled&&X("CLAUDE.md",D)});const M=()=>{if(!o.value?.project_types)return;const D=o.value.project_types[p.value.type];if(!D?.directories)return;const S=n.value?.project_types?.[p.value.type];if(!p.value.git.gitignore_template||p.value.git.gitignore_template==="gitignore-project"){const m={project:"gitignore-project",project_sensitive:"gitignore-sensitive",course:"gitignore-course",presentation:"gitignore-presentation"};p.value.git.gitignore_template=m[p.value.type]||"gitignore-project"}ve(p.value.git.gitignore_template),p.value.directories_enabled=Object.entries(D.directories).reduce((m,[L,ie])=>(m[L]=ie.enabled_by_default!==!1,m),{}),p.value.directories=Object.entries(D.directories).reduce((m,[L,ie])=>(m[L]=S?.directories?.[L]||ie.default||"",m),{}),S?.extra_directories&&Array.isArray(S.extra_directories)?(p.value.extra_directories=S.extra_directories.map(m=>({...m,_source:"global"})),p.value.extra_directories_enabled=S.extra_directories.reduce((m,L)=>(L.key&&(m[L.key]=!0),m),{})):(p.value.extra_directories=[],p.value.extra_directories_enabled={}),console.log("[DEBUG] loadProjectTypeDefaults() finished - packages still:",p.value.packages.default_packages)},N=D=>o.value?.project_types?.[D]?.label||D,B=(D="")=>{const S={};return D.split(/\r?\n/).forEach(m=>{const L=m.trim();if(!L||L.startsWith("#")||!L.includes("="))return;const[ie,...C]=L.split("=");S[ie.trim()]=C.join("=").replace(/^"|"$/g,"")}),S},W=(D={})=>{const S=Object.entries(D);return S.length?S.reduce((m,[L,ie])=>{const C=L.includes("_")?L.split("_")[0]:"Other";return m[C]||(m[C]={}),m[C][L]={defined:!!ie,used:!1,used_in:[],value:ie},m},{}):{}},G=()=>{p.value.env.rawContent&&(p.value.env.variables=B(p.value.env.rawContent),p.value.env.groups=W(p.value.env.variables))},j=re(()=>({overview:"Overview",basics:"Basics",author:"Author & Metadata",scaffold:"Scaffold Behavior",structure:"Project Structure",connections:"Connections",env:".env Defaults",packages:"Packages & Dependencies",ai:"AI Assistants",git:"Git & Hooks",review:"Review & Create"})[f.value]||"New Project"),A=re(()=>({overview:"Quick overview of your project settings. We used your Framework Project Defaults as a starting point.",basics:"Essential project settings including name, location, type, and editor support.",author:"Configure author information embedded in project templates.",scaffold:"Runtime settings that control what happens when scaffold() runs.",structure:"Customize which directories to create for this project type.",connections:"Database and storage connections for this project.",env:"Environment variables template for this project.",packages:"Configure package management and default packages.",ai:"Configure AI assistant integration for this project.",git:"Configure version control and git hooks.",review:"Review your project configuration and create the project."})[f.value]||"");re(()=>({vscode:"Positron / VS Code",rstudio:"RStudio","rstudio,vscode":"Both",none:"Other"})[p.value.scaffold.ide]||p.value.scaffold.ide);const J=re(()=>{const D=[];return p.value.git.hooks.ai_sync&&D.push("Sync AI files"),p.value.git.hooks.data_security&&D.push("Check for secrets"),p.value.git.hooks.check_sensitive_dirs&&D.push("Warn about sensitive dirs"),D}),ee=re(()=>{const D=p.value.connections.databaseConnections.length,S=p.value.connections.s3Connections.length;return{databases:D,buckets:S}}),me=re({get(){const D=p.value.git.hooks||{};return{initialize:p.value.git.initialize,user_name:p.value.git.user_name||"",user_email:p.value.git.user_email||"",hooks:{ai_sync:D.ai_sync||!1,data_security:D.data_security||!1,check_sensitive_dirs:D.check_sensitive_dirs||!1}}},set(D){p.value.git.initialize=D.initialize,p.value.git.user_name=D.user_name,p.value.git.user_email=D.user_email,p.value.git.hooks={ai_sync:D.hooks.ai_sync,data_security:D.hooks.data_security,check_sensitive_dirs:D.hooks.check_sensitive_dirs}}});re(()=>{const D=p.value.location,S=n.value?.global?.projects_root;return!D||D===S?"(not set)":D});const te=(D,S)=>{d(),S?p.value.ai.assistants.includes(D)||p.value.ai.assistants.push(D):p.value.ai.assistants=p.value.ai.assistants.filter(m=>m!==D)},F=D=>{p.value.location=D;const S=n.value?.global?.projects_root||"",m=typeof D=="string"?D.trim():"";!m||S&&m===S?(_.value=!0,Ge()):_.value=!1},ce=()=>{p.value.packages.default_packages||(p.value.packages.default_packages=[]),p.value.packages.default_packages.push({name:"",source:"cran",auto_attach:!1})},le=D=>{p.value.packages.default_packages.splice(D,1)},ve=async D=>{try{const S=await fetch(`/api/templates/${D}`);if(S.ok){const m=await S.json();m.success&&m.contents&&(p.value.git.gitignore_content=m.contents)}}catch(S){console.error("Failed to load gitignore template:",S)}},Y=async()=>{p.value.git.gitignore_template&&(await ve(p.value.git.gitignore_template),i.success("Template Reset","Restored default .gitignore template"))},X=async(D,S)=>{try{let m;if(D==="CLAUDE.md")switch(S){case"project_sensitive":m="ai_claude_sensitive";break;case"course":m="ai_claude_course";break;case"presentation":m="ai_claude_presentation";break;default:m="ai_claude_project"}else D==="AGENTS.md"?m="ai_agents":D===".github/copilot-instructions.md"&&(m="ai_copilot");const L=await fetch(`/api/templates/${m}`);if(L.ok){const ie=await L.json();ie.success&&ie.contents&&(p.value.ai.canonical_content=ie.contents)}}catch(m){console.error("Failed to load AI template:",m)}},Q=re(()=>o.value?.project_types?o.value.project_types[p.value.type]?.directories||{}:{});re(()=>Object.values(p.value.directories_enabled).filter(D=>D).length);const Ee=D=>Object.keys(p.value.directories_enabled).filter(m=>p.value.directories_enabled[m]?D==="workspace"?m==="notebooks"||m==="scripts"||m==="functions":D==="input"?m.startsWith("inputs_"):D==="output"?m.startsWith("outputs_"):D==="temporary"?m==="cache"||m==="scratch":!1:!1).length,E=D=>Array.isArray(p.value.extra_directories)?p.value.extra_directories.filter(S=>S.type===D&&S._source==="global"):[],xe=D=>Array.isArray(p.value.extra_directories)?p.value.extra_directories.filter(S=>S.type===D&&S._source!=="global"):[],Oe=(D,S)=>{Array.isArray(p.value.extra_directories)||(p.value.extra_directories=[]);const m=p.value.extra_directories.filter(ie=>ie._source==="global"||ie.type!==D&&ie._source!=="global"),L=S.map(ie=>({...ie,type:D,_source:"project"}));p.value.extra_directories=[...m,...L],L.forEach(ie=>{ie.key&&!p.value.extra_directories_enabled[ie.key]&&(p.value.extra_directories_enabled[ie.key]=!0)})},Qe=D=>{e.push({query:{...s.query,section:D}})},Ge=()=>{if(!_.value||!p.value.name||!p.value.name.trim())return;const D=n.value?.global?.projects_root||"";if(!D)return;const S=(p.value.location||"").trim();if(S&&!S.startsWith(D))return;const m=p.value.name.toLowerCase().trim().replace(/[\s_]+/g,"-").replace(/[^a-z0-9-]/g,"").replace(/-+/g,"-").replace(/^-|-$/g,"");if(!m){p.value.location=D;return}const L=D.replace(/\/+$/,"");p.value.location=`${L}/${m}`},yt=async()=>{if(!p.value.name||!p.value.name.trim()){i.error("Validation Error","Project name is required"),Qe("overview");return}if(!p.value.location||!p.value.location.trim()){i.error("Validation Error","Project location is required"),Qe("overview");return}try{h.value=!0;const D=o.value?.project_types?.[p.value.type],S={};D?.directories&&Object.entries(D.directories).forEach(([z,Z])=>{p.value.directories_enabled[z]&&(S[z]=Z.default)});const m={};p.value.connections.databaseConnections.forEach(z=>{const{_id:Z,name:de,...ne}=z;m[de]=ne});const L={};p.value.connections.s3Connections.forEach(z=>{const{_id:Z,name:de,...ne}=z;L[de]=ne});const ie={name:p.value.name.trim(),location:p.value.location.trim(),type:p.value.type,author:p.value.author,scaffold:p.value.scaffold,packages:p.value.packages,ai:p.value.ai,git:p.value.git,connections:{default_database:p.value.connections.defaultDatabase,default_storage_bucket:p.value.connections.defaultStorageBucket,databases:m,storage_buckets:L},env:{raw:p.value.env.rawContent||""},directories:S},C=await fetch("/api/projects/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ie)});if(!C.ok){const z=await C.json();throw new Error(z.message||"Failed to create project")}const P=await C.json();i.success("Project Created",`${p.value.name} has been created successfully`),e.push("/projects")}catch(D){console.error("Failed to create project:",D),i.error("Creation Failed",D.message||"Could not create the project")}finally{h.value=!1}},at=D=>{(D.metaKey||D.ctrlKey)&&D.key==="s"&&(D.preventDefault(),yt())};return os(()=>{window.addEventListener("keydown",at)}),To(()=>{window.removeEventListener("keydown",at)}),(D,S)=>(v(),b("div",_M,[c("nav",SM,[S[42]||(S[42]=c("h2",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"New Project",-1)),c("div",CM,[(v(),b(se,null,ke(u,m=>(v(),b(se,{key:m.id},[m.id==="basics"?(v(),ge(ja,{key:0},{default:R(()=>[...S[41]||(S[41]=[oe("Settings",-1)])]),_:1})):I("",!0),c("a",{href:"#",onClick:It(L=>f.value=m.id,["prevent"]),class:Me(["flex items-center gap-2 px-3 py-2 rounded-md text-sm transition",f.value===m.id?"bg-sky-50 text-sky-700 font-medium dark:bg-sky-900/20 dark:text-sky-400":"text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-800"])},[m.icon?(v(),ge(Es(m.icon),{key:0,class:"h-4 w-4"})):m.svgIcon?(v(),b("svg",{key:1,class:"h-4 w-4",fill:m.svgFill??"none",viewBox:m.svgViewBox??"0 0 24 24",stroke:m.svgStroke??"currentColor"},[c("path",{"stroke-linecap":m.svgStrokeLinecap??"round","stroke-linejoin":m.svgStrokeLinejoin??"round","stroke-width":m.svgStrokeWidth??2,fill:m.svgPathFill??"none",d:m.svgIcon},null,8,MM)],8,VM)):I("",!0),oe(" "+H(m.label),1)],10,AM)],64))),64))]),c("div",DM,[x(Re,{variant:"primary",size:"md",class:"w-full",disabled:h.value||!p.value.name||!p.value.location,onClick:yt},{default:R(()=>[oe(H(h.value?"Creating...":"Create Project"),1)]),_:1},8,["disabled"])])]),c("div",TM,[x(Eo,{title:j.value,description:A.value},null,8,["title","description"]),c("div",$M,[Ke(c("div",null,[c("div",EM,[x(Ds,{title:"Basics",onClick:S[0]||(S[0]=m=>f.value="basics")},{default:R(()=>[c("span",OM,H(p.value.name||"Untitled Project"),1),p.value.author.name?(v(),b(se,{key:0},[S[43]||(S[43]=c("span",{class:"text-gray-400 dark:text-gray-500 mx-1"},"",-1)),c("span",PM,H(p.value.author.name),1)],64)):I("",!0),S[44]||(S[44]=c("span",{class:"text-gray-400 dark:text-gray-500 mx-1"},"",-1)),c("span",jM,H(N(p.value.type)),1)]),_:1}),x(Ds,{title:"Project Structure",onClick:S[1]||(S[1]=m=>f.value="structure")},{default:R(()=>[c("span",LM,H(N(p.value.type)),1),S[46]||(S[46]=c("span",{class:"text-gray-400 dark:text-gray-500 mx-1"},"",-1)),c("span",RM,H(Ee("workspace"))+" workspace",1),S[47]||(S[47]=c("span",{class:"text-gray-400 dark:text-gray-500 mx-1"},"",-1)),c("span",BM,H(Ee("input"))+" input",1),Ee("output")>0?(v(),b(se,{key:0},[S[45]||(S[45]=c("span",{class:"text-gray-400 dark:text-gray-500 mx-1"},"",-1)),c("span",IM,H(Ee("output"))+" output",1)],64)):I("",!0)]),_:1}),x(Ds,{title:"Packages",onClick:S[2]||(S[2]=m=>f.value="packages")},{default:R(()=>[c("span",UM," renv: "+H(p.value.packages.use_renv?"enabled":"disabled"),1),p.value.packages.default_packages&&p.value.packages.default_packages.length>0?(v(),b(se,{key:0},[S[48]||(S[48]=c("span",{class:"text-gray-400 dark:text-gray-500 mx-1"},"",-1)),c("span",NM,H(p.value.packages.default_packages.length)+" package"+H(p.value.packages.default_packages.length!==1?"s":""),1)],64)):I("",!0)]),_:1}),x(Ds,{title:"AI Assistants",onClick:S[3]||(S[3]=m=>f.value="ai")},{default:R(()=>[p.value.ai.enabled&&Array.isArray(p.value.ai.assistants)&&p.value.ai.assistants.length>0?(v(),b(se,{key:0},[oe(H(p.value.ai.assistants.map(m=>m.charAt(0).toUpperCase()+m.slice(1)).join(", "))+" ",1),S[49]||(S[49]=c("span",{class:"text-gray-400 dark:text-gray-500 mx-1"},"",-1)),c("span",zM,H(p.value.ai.canonical_file),1)],64)):p.value.ai.enabled?(v(),b("span",FM,"Enabled (no assistants selected)")):(v(),b("span",HM,"Disabled"))]),_:1}),x(Ds,{title:"Git & Hooks",onClick:S[4]||(S[4]=m=>f.value="git")},{default:R(()=>[c("span",WM," Git: "+H(p.value.git.initialize?"enabled":"disabled"),1),p.value.git.initialize&&J.value.length>0?(v(),b(se,{key:0},[S[50]||(S[50]=c("span",{class:"text-gray-400 dark:text-gray-500 mx-1"},"",-1)),c("span",qM,H(J.value.join(", ")),1)],64)):I("",!0)]),_:1}),x(Ds,{title:"Connections",onClick:S[5]||(S[5]=m=>f.value="connections")},{default:R(()=>[ee.value.databases>0||ee.value.buckets>0?(v(),b(se,{key:0},[c("span",KM,H(ee.value.databases)+" database"+H(ee.value.databases!==1?"s":""),1),ee.value.buckets>0?(v(),b(se,{key:0},[S[51]||(S[51]=c("span",{class:"text-gray-400 dark:text-gray-500 mx-1"},"",-1)),c("span",GM,H(ee.value.buckets)+" bucket"+H(ee.value.buckets!==1?"s":""),1)],64)):I("",!0)],64)):(v(),b("span",JM,"framework_db only"))]),_:1}),x(Ds,{title:"Scaffold Behavior",onClick:S[6]||(S[6]=m=>f.value="scaffold")},{default:R(()=>[c("span",YM,[p.value.scaffold.source_all_functions?(v(),b(se,{key:0},[S[52]||(S[52]=oe(" Functions loaded from ",-1)),S[53]||(S[53]=c("code",{class:"text-xs bg-gray-100 dark:bg-gray-800 px-1 rounded"},"functions/",-1))],64)):(v(),b(se,{key:1},[oe(" Does not load functions ")],64))]),S[54]||(S[54]=c("span",{class:"text-gray-400 dark:text-gray-500 mx-1"},"",-1)),c("span",QM,[p.value.scaffold.set_theme_on_scaffold?(v(),b(se,{key:0},[oe(" ggplot2: "+H((p.value.scaffold.ggplot_theme||"theme_minimal").replace("theme_","")),1)],64)):(v(),b(se,{key:1},[oe(" No ggplot theme ")],64))]),S[55]||(S[55]=c("span",{class:"text-gray-400 dark:text-gray-500 mx-1"},"",-1)),c("span",XM,H(p.value.scaffold.seed_on_scaffold?"Seed: "+(p.value.scaffold.seed||"default"):"No random seed"),1)]),_:1})])],512),[[nt,f.value==="overview"]]),Ke(c("div",null,[c("div",ZM,[c("div",eD,[x(q,{ref_key:"projectNameInput",ref:g,modelValue:p.value.name,"onUpdate:modelValue":S[7]||(S[7]=m=>p.value.name=m),label:"Project Name",hint:"Human-readable name for your project",placeholder:"My Analysis Project",required:""},null,8,["modelValue"]),x(q,{"model-value":p.value.location,"onUpdate:modelValue":F,label:"Project Location",hint:"Directory where the project will be created",placeholder:"e.g., ~/projects or /Users/yourname/code"},null,8,["model-value"]),x(Ft,{modelValue:p.value.type,"onUpdate:modelValue":S[8]||(S[8]=m=>p.value.type=m),label:"Project Type",hint:"Choose the template structure for your project"},{default:R(()=>[...S[56]||(S[56]=[c("option",{value:"project"},"Research Project",-1),c("option",{value:"course"},"Course",-1),c("option",{value:"presentation"},"Presentation",-1)])]),_:1},8,["modelValue"]),c("div",null,[S[58]||(S[58]=c("label",{class:"block text-sm font-semibold text-gray-900 dark:text-white mb-3"}," Supported Editors ",-1)),x(yi,{modelValue:p.value.scaffold.positron,"onUpdate:modelValue":S[9]||(S[9]=m=>p.value.scaffold.positron=m),id:"support-positron",description:"Enable Positron-specific workspace and settings files"},{default:R(()=>[...S[57]||(S[57]=[oe(" Positron ",-1)])]),_:1},8,["modelValue"]),S[59]||(S[59]=c("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-3"}," RStudio supported by default ",-1))]),x(Ft,{modelValue:p.value.scaffold.notebook_format,"onUpdate:modelValue":S[10]||(S[10]=m=>p.value.scaffold.notebook_format=m),label:"Default Notebook Format",hint:"Format used when creating new notebooks"},{default:R(()=>[...S[60]||(S[60]=[c("option",{value:"quarto"},"Quarto (.qmd)",-1),c("option",{value:"rmarkdown"},"R Markdown (.Rmd)",-1)])]),_:1},8,["modelValue"]),c("div",tD,[S[61]||(S[61]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"}," Author Information ",-1)),S[62]||(S[62]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-5"}," Author information is embedded in project templates and documentation. ",-1)),c("div",sD,[x(q,{modelValue:p.value.author.name,"onUpdate:modelValue":S[11]||(S[11]=m=>p.value.author.name=m),label:"Your Name",placeholder:"Your Name"},null,8,["modelValue"]),x(q,{modelValue:p.value.author.email,"onUpdate:modelValue":S[12]||(S[12]=m=>p.value.author.email=m),type:"email",label:"Email",placeholder:"your.email@example.com"},null,8,["modelValue"]),x(q,{modelValue:p.value.author.affiliation,"onUpdate:modelValue":S[13]||(S[13]=m=>p.value.author.affiliation=m),label:"Affiliation",placeholder:"Organization"},null,8,["modelValue"])])])])])],512),[[nt,f.value==="basics"]]),Ke(c("div",null,[c("div",iD,[S[63]||(S[63]=c("div",null,[c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"}," Scaffold Behavior "),c("p",{class:"text-sm text-gray-600 dark:text-gray-400"},[oe(" Automatic actions when "),c("code",{class:"px-1.5 py-0.5 bg-gray-200 dark:bg-gray-700 rounded text-xs"},"scaffold()"),oe(" runs to initialize your project environment. ")])],-1)),x(Mf,{modelValue:p.value.scaffold,"onUpdate:modelValue":S[14]||(S[14]=m=>p.value.scaffold=m),flush:""},null,8,["modelValue"])])],512),[[nt,f.value==="scaffold"]]),Ke(c("div",nD,[c("div",oD,[x(Z4,{legend:"Project Type",description:"Select a project type to customize the directory structure."},{default:R(()=>[x(vl,{modelValue:p.value.type,"onUpdate:modelValue":S[15]||(S[15]=m=>p.value.type=m),id:"type-project",name:"project-type",value:"project"},{default:R(()=>[...S[64]||(S[64]=[c("div",null,[c("div",{class:"font-medium text-sm"},"Research Project"),c("div",{class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5"}," Full-featured with organized data, work, and output directories ")],-1)])]),_:1},8,["modelValue"]),x(vl,{modelValue:p.value.type,"onUpdate:modelValue":S[16]||(S[16]=m=>p.value.type=m),id:"type-sensitive",name:"project-type",value:"project_sensitive"},{default:R(()=>[...S[65]||(S[65]=[c("div",null,[c("div",{class:"font-medium text-sm"},"Privacy Sensitive Project"),c("div",{class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5"}," Enhanced privacy controls with separate private/public flows ")],-1)])]),_:1},8,["modelValue"]),x(vl,{modelValue:p.value.type,"onUpdate:modelValue":S[17]||(S[17]=m=>p.value.type=m),id:"type-presentation",name:"project-type",value:"presentation"},{default:R(()=>[...S[66]||(S[66]=[c("div",null,[c("div",{class:"font-medium text-sm"},"Presentation"),c("div",{class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5"}," Minimal structure for slides and presentations ")],-1)])]),_:1},8,["modelValue"]),x(vl,{modelValue:p.value.type,"onUpdate:modelValue":S[18]||(S[18]=m=>p.value.type=m),id:"type-course",name:"project-type",value:"course"},{default:R(()=>[...S[67]||(S[67]=[c("div",null,[c("div",{class:"font-medium text-sm"},"Course/Teaching"),c("div",{class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5"}," Simplified structure for teaching materials ")],-1)])]),_:1},8,["modelValue"])]),_:1})]),p.value.type==="presentation"?(v(),b("div",rD,[S[68]||(S[68]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Presentation File",-1)),x(q,{modelValue:p.value.directories.presentation_source,"onUpdate:modelValue":S[19]||(S[19]=m=>p.value.directories.presentation_source=m),label:"Presentation source file",placeholder:"presentation.qmd",hint:"Main Quarto file for your slides"},null,8,["modelValue"])])):I("",!0),p.value.type==="project"?(v(),b("div",lD,[S[71]||(S[71]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Workspaces",-1)),S[72]||(S[72]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Functions, notebooks, and scripts scaffolded into every project.",-1)),c("div",aD,[(v(),b(se,null,ke(["functions","notebooks","scripts"],m=>c("div",{key:m},[x(Le,{id:`dir-${m}`,modelValue:p.value.directories_enabled[m],"onUpdate:modelValue":L=>p.value.directories_enabled[m]=L,label:Q.value[m]?.label||m,description:Q.value[m]?.hint,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),p.value.directories_enabled[m]?(v(),ge(q,{key:0,modelValue:p.value.directories[m],"onUpdate:modelValue":L=>p.value.directories[m]=L,placeholder:Q.value[m]?.default,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)])),64)),(v(!0),b(se,null,ke(E("workspace"),m=>(v(),b("div",{key:`extra-${m.key}`},[x(Le,{id:`extra-dir-${m.key}`,modelValue:p.value.extra_directories_enabled[m.key],"onUpdate:modelValue":L=>p.value.extra_directories_enabled[m.key]=L,label:m.label,description:`Custom: ${m.path}`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),p.value.extra_directories_enabled[m.key]?(v(),ge(q,{key:0,modelValue:m.path,"onUpdate:modelValue":L=>m.path=L,placeholder:m.path,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]))),128))]),c("div",uD,[S[69]||(S[69]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Add Custom Workspace Directories",-1)),S[70]||(S[70]=c("p",{class:"text-xs text-gray-600 dark:text-gray-400 mb-3"},"Add directories specific to this project only.",-1)),x(gt,{"model-value":xe("workspace"),"onUpdate:modelValue":S[20]||(S[20]=m=>Oe("workspace",m)),"add-label":"Add Workspace Directory","default-item":()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:R(({item:m,index:L,update:ie})=>[c("div",dD,[x(q,{"model-value":m.key,"onUpdate:modelValue":C=>ie("key",C),label:"Key",placeholder:"e.g., tests",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":m.label,"onUpdate:modelValue":C=>ie("label",C),label:"Label",placeholder:"e.g., Tests",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":m.path,"onUpdate:modelValue":C=>ie("path",C),label:"Path",placeholder:"e.g., tests",prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])])):I("",!0),p.value.type==="project"?(v(),b("div",cD,[S[75]||(S[75]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Inputs",-1)),S[76]||(S[76]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Define the read-only locations where raw and prepared data live.",-1)),c("div",fD,[(v(),b(se,null,ke(["inputs_raw","inputs_intermediate","inputs_final","docs"],m=>c("div",{key:m},[x(Le,{id:`dir-${m}`,modelValue:p.value.directories_enabled[m],"onUpdate:modelValue":L=>p.value.directories_enabled[m]=L,label:Q.value[m]?.label||m,description:Q.value[m]?.hint,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),p.value.directories_enabled[m]?(v(),ge(q,{key:0,modelValue:p.value.directories[m],"onUpdate:modelValue":L=>p.value.directories[m]=L,placeholder:Q.value[m]?.default,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)])),64)),(v(!0),b(se,null,ke(E("input"),m=>(v(),b("div",{key:`extra-${m.key}`},[x(Le,{id:`extra-dir-${m.key}`,modelValue:p.value.extra_directories_enabled[m.key],"onUpdate:modelValue":L=>p.value.extra_directories_enabled[m.key]=L,label:m.label,description:`Custom: ${m.path}`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),p.value.extra_directories_enabled[m.key]?(v(),ge(q,{key:0,modelValue:m.path,"onUpdate:modelValue":L=>m.path=L,placeholder:m.path,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]))),128))]),c("div",hD,[S[73]||(S[73]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Add Custom Input Directories",-1)),S[74]||(S[74]=c("p",{class:"text-xs text-gray-600 dark:text-gray-400 mb-3"},"Add directories specific to this project only.",-1)),x(gt,{"model-value":xe("input"),"onUpdate:modelValue":S[21]||(S[21]=m=>Oe("input",m)),"add-label":"Add Input Directory","default-item":()=>({key:"",label:"",path:"",type:"input",_id:Date.now()})},{default:R(({item:m,index:L,update:ie})=>[c("div",pD,[x(q,{"model-value":m.key,"onUpdate:modelValue":C=>ie("key",C),label:"Key",placeholder:"e.g., inputs_archive",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":m.label,"onUpdate:modelValue":C=>ie("label",C),label:"Label",placeholder:"e.g., Archive",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":m.path,"onUpdate:modelValue":C=>ie("path",C),label:"Path",placeholder:"e.g., inputs/archive",prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])])):I("",!0),p.value.type==="project"?(v(),b("div",mD,[S[78]||(S[78]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Outputs",-1)),S[79]||(S[79]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Outputs are public by default so results are easy to share.",-1)),c("div",gD,[(v(),b(se,null,ke(["outputs_notebooks","outputs_tables","outputs_figures","outputs_models","outputs_reports"],m=>c("div",{key:m},[x(Le,{id:`dir-${m}`,modelValue:p.value.directories_enabled[m],"onUpdate:modelValue":L=>p.value.directories_enabled[m]=L,label:Q.value[m]?.label||m,description:Q.value[m]?.hint,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),p.value.directories_enabled[m]?(v(),ge(q,{key:0,modelValue:p.value.directories[m],"onUpdate:modelValue":L=>p.value.directories[m]=L,placeholder:Q.value[m]?.default,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)])),64)),(v(!0),b(se,null,ke(E("output"),m=>(v(),b("div",{key:`extra-${m.key}`},[x(Le,{id:`extra-${m.key}`,modelValue:p.value.extra_directories_enabled[m.key],"onUpdate:modelValue":L=>p.value.extra_directories_enabled[m.key]=L,label:m.label,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label"]),p.value.extra_directories_enabled[m.key]?(v(),ge(q,{key:0,modelValue:m.path,"onUpdate:modelValue":L=>m.path=L,placeholder:m.path,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]))),128))]),c("div",vD,[S[77]||(S[77]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Add Custom Output Directories",-1)),x(gt,{"model-value":xe("output"),"onUpdate:modelValue":S[22]||(S[22]=m=>Oe("output",m)),"add-label":"Add Output Directory","default-item":()=>({key:"",label:"",path:"",type:"output",_id:Date.now()})},{default:R(({item:m,index:L,update:ie})=>[c("div",yD,[x(q,{"model-value":m.key,"onUpdate:modelValue":C=>ie("key",C),label:"Key",placeholder:"e.g., outputs_animations",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":m.label,"onUpdate:modelValue":C=>ie("label",C),label:"Label",placeholder:"e.g., Animations",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":m.path,"onUpdate:modelValue":C=>ie("path",C),label:"Path",placeholder:"e.g., outputs/animations",prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])])):I("",!0),p.value.type==="project"?(v(),b("div",bD,[S[81]||(S[81]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Temporary",-1)),S[82]||(S[82]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Scratch space and cache (gitignored by default).",-1)),c("div",kD,[(v(),b(se,null,ke(["cache","scratch"],m=>c("div",{key:m},[x(Le,{id:`dir-${m}`,modelValue:p.value.directories_enabled[m],"onUpdate:modelValue":L=>p.value.directories_enabled[m]=L,label:Q.value[m]?.label||m,description:Q.value[m]?.hint,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),p.value.directories_enabled[m]?(v(),ge(q,{key:0,modelValue:p.value.directories[m],"onUpdate:modelValue":L=>p.value.directories[m]=L,placeholder:Q.value[m]?.default,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)])),64)),(v(!0),b(se,null,ke(E("temporary"),m=>(v(),b("div",{key:`extra-${m.key}`},[x(Le,{id:`extra-${m.key}`,modelValue:p.value.extra_directories_enabled[m.key],"onUpdate:modelValue":L=>p.value.extra_directories_enabled[m.key]=L,label:m.label,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label"]),p.value.extra_directories_enabled[m.key]?(v(),ge(q,{key:0,modelValue:m.path,"onUpdate:modelValue":L=>m.path=L,placeholder:m.path,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]))),128))]),c("div",xD,[S[80]||(S[80]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Add Custom Temporary Directories",-1)),x(gt,{"model-value":xe("temporary"),"onUpdate:modelValue":S[23]||(S[23]=m=>Oe("temporary",m)),"add-label":"Add Temporary Directory","default-item":()=>({key:"",label:"",path:"",type:"temporary",_id:Date.now()})},{default:R(({item:m,index:L,update:ie})=>[c("div",wD,[x(q,{"model-value":m.key,"onUpdate:modelValue":C=>ie("key",C),label:"Key",placeholder:"e.g., temp_downloads",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":m.label,"onUpdate:modelValue":C=>ie("label",C),label:"Label",placeholder:"e.g., Downloads",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":m.path,"onUpdate:modelValue":C=>ie("path",C),label:"Path",placeholder:"e.g., temp/downloads",prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])])):I("",!0),p.value.type==="course"?(v(),b("div",_D,[S[84]||(S[84]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Course Materials",-1)),S[85]||(S[85]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Slides, assignments, readings, and documentation.",-1)),c("div",SD,[(v(),b(se,null,ke(["slides","assignments","readings","course_docs"],m=>c("div",{key:m},[x(Le,{id:`dir-${m}`,modelValue:p.value.directories_enabled[m],"onUpdate:modelValue":L=>p.value.directories_enabled[m]=L,label:Q.value[m]?.label||m,description:Q.value[m]?.hint,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),p.value.directories_enabled[m]?(v(),ge(q,{key:0,modelValue:p.value.directories[m],"onUpdate:modelValue":L=>p.value.directories[m]=L,placeholder:Q.value[m]?.default,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)])),64)),(v(!0),b(se,null,ke(E("workspace"),m=>(v(),b("div",{key:`extra-${m.key}`},[x(Le,{id:`extra-dir-${m.key}`,modelValue:p.value.extra_directories_enabled[m.key],"onUpdate:modelValue":L=>p.value.extra_directories_enabled[m.key]=L,label:m.label,description:`Custom: ${m.path}`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),p.value.extra_directories_enabled[m.key]?(v(),ge(q,{key:0,modelValue:m.path,"onUpdate:modelValue":L=>m.path=L,placeholder:m.path,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]))),128))]),c("div",CD,[S[83]||(S[83]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Add Custom Directories",-1)),x(gt,{"model-value":xe("workspace"),"onUpdate:modelValue":S[24]||(S[24]=m=>Oe("workspace",m)),"add-label":"Add Directory","default-item":()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:R(({item:m,index:L,update:ie})=>[c("div",AD,[x(q,{"model-value":m.key,"onUpdate:modelValue":C=>ie("key",C),label:"Key",placeholder:"e.g., exercises",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":m.label,"onUpdate:modelValue":C=>ie("label",C),label:"Label",placeholder:"e.g., Exercises",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":m.path,"onUpdate:modelValue":C=>ie("path",C),label:"Path",placeholder:"e.g., exercises",prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])])):I("",!0),p.value.type==="course"?(v(),b("div",VD,[S[86]||(S[86]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Workspaces",-1)),S[87]||(S[87]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Module notebooks, functions, and scripts.",-1)),c("div",MD,[(v(),b(se,null,ke(["notebooks","functions","scripts"],m=>c("div",{key:m},[x(Le,{id:`dir-${m}`,modelValue:p.value.directories_enabled[m],"onUpdate:modelValue":L=>p.value.directories_enabled[m]=L,label:Q.value[m]?.label||m,description:Q.value[m]?.hint,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),p.value.directories_enabled[m]?(v(),ge(q,{key:0,modelValue:p.value.directories[m],"onUpdate:modelValue":L=>p.value.directories[m]=L,placeholder:Q.value[m]?.default,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)])),64))])])):I("",!0),p.value.type==="course"?(v(),b("div",DD,[S[88]||(S[88]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Data & Storage",-1)),S[89]||(S[89]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Course datasets and temporary files.",-1)),c("div",TD,[(v(),b(se,null,ke(["data","inputs","outputs","cache"],m=>c("div",{key:m},[x(Le,{id:`dir-${m}`,modelValue:p.value.directories_enabled[m],"onUpdate:modelValue":L=>p.value.directories_enabled[m]=L,label:Q.value[m]?.label||m,description:Q.value[m]?.hint,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),p.value.directories_enabled[m]?(v(),ge(q,{key:0,modelValue:p.value.directories[m],"onUpdate:modelValue":L=>p.value.directories[m]=L,placeholder:Q.value[m]?.default,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)])),64))])])):I("",!0),p.value.type==="presentation"?(v(),b("div",$D,[S[91]||(S[91]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Optional Directories",-1)),S[92]||(S[92]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Add supporting directories for data, scripts, or helper functions.",-1)),c("div",ED,[(v(),b(se,null,ke(["data","scripts","functions"],m=>c("div",{key:m},[x(Le,{id:`dir-${m}`,modelValue:p.value.directories_enabled[m],"onUpdate:modelValue":L=>p.value.directories_enabled[m]=L,label:Q.value[m]?.label||m,description:Q.value[m]?.hint,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),p.value.directories_enabled[m]?(v(),ge(q,{key:0,modelValue:p.value.directories[m],"onUpdate:modelValue":L=>p.value.directories[m]=L,placeholder:Q.value[m]?.default,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)])),64)),(v(!0),b(se,null,ke(E("workspace"),m=>(v(),b("div",{key:`extra-${m.key}`},[x(Le,{id:`extra-dir-${m.key}`,modelValue:p.value.extra_directories_enabled[m.key],"onUpdate:modelValue":L=>p.value.extra_directories_enabled[m.key]=L,label:m.label,description:`Custom: ${m.path}`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),p.value.extra_directories_enabled[m.key]?(v(),ge(q,{key:0,modelValue:m.path,"onUpdate:modelValue":L=>m.path=L,placeholder:m.path,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]))),128))]),c("div",OD,[S[90]||(S[90]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Add Custom Directories",-1)),x(gt,{"model-value":xe("workspace"),"onUpdate:modelValue":S[25]||(S[25]=m=>Oe("workspace",m)),"add-label":"Add Directory","default-item":()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:R(({item:m,index:L,update:ie})=>[c("div",PD,[x(q,{"model-value":m.key,"onUpdate:modelValue":C=>ie("key",C),label:"Key",placeholder:"e.g., assets",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":m.label,"onUpdate:modelValue":C=>ie("label",C),label:"Label",placeholder:"e.g., Assets",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":m.path,"onUpdate:modelValue":C=>ie("path",C),label:"Path",placeholder:"e.g., assets",prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])])):I("",!0),p.value.type==="project_sensitive"?(v(),b("div",jD,[S[94]||(S[94]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Work Directories",-1)),S[95]||(S[95]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Module locations for notebooks, scripts, and helper functions.",-1)),c("div",LD,[(v(),b(se,null,ke(["functions","notebooks","scripts"],m=>c("div",{key:m},[c("div",RD,[x(Le,{id:`dir-${m}`,modelValue:p.value.directories_enabled[m],"onUpdate:modelValue":L=>p.value.directories_enabled[m]=L,label:Q.value[m]?.label||m,description:Q.value[m]?.hint,class:"flex-1"},null,8,["id","modelValue","onUpdate:modelValue","label","description"])]),p.value.directories_enabled[m]?(v(),ge(q,{key:0,modelValue:p.value.directories[m],"onUpdate:modelValue":L=>p.value.directories[m]=L,placeholder:Q.value[m]?.default,class:"mt-2",prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)])),64)),(v(!0),b(se,null,ke(E("workspace"),m=>(v(),b("div",{key:`extra-${m.key}`},[x(Le,{id:`extra-dir-${m.key}`,modelValue:p.value.extra_directories_enabled[m.key],"onUpdate:modelValue":L=>p.value.extra_directories_enabled[m.key]=L,label:m.label,description:`Custom: ${m.path}`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),p.value.extra_directories_enabled[m.key]?(v(),ge(q,{key:0,modelValue:m.path,"onUpdate:modelValue":L=>m.path=L,placeholder:m.path,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]))),128))]),c("div",BD,[S[93]||(S[93]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Add Custom Workspace Directories",-1)),x(gt,{"model-value":xe("workspace"),"onUpdate:modelValue":S[26]||(S[26]=m=>Oe("workspace",m)),"add-label":"Add Workspace Directory","default-item":()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:R(({item:m,index:L,update:ie})=>[c("div",ID,[x(q,{"model-value":m.key,"onUpdate:modelValue":C=>ie("key",C),label:"Key",placeholder:"e.g., helpers",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":m.label,"onUpdate:modelValue":C=>ie("label",C),label:"Label",placeholder:"e.g., Helper Functions",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":m.path,"onUpdate:modelValue":C=>ie("path",C),label:"Path",placeholder:"e.g., helpers",prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])])):I("",!0),p.value.type==="project_sensitive"?(v(),b("div",UD,[S[99]||(S[99]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Inputs",-1)),S[100]||(S[100]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Keep private inputs compartmentalized; publish processed data into public folders when ready. ",-1)),S[101]||(S[101]=c("div",{class:"grid gap-4 sm:grid-cols-2 text-xs font-semibold uppercase text-gray-500 dark:text-gray-400 mb-3"},[c("div",null,"Private"),c("div",null,"Public")],-1)),c("div",ND,[(v(),b(se,null,ke(["raw","intermediate","final"],m=>c("div",{key:m},[c("div",zD,[c("div",FD,[x(Le,{id:`dir-inputs_private_${m}`,modelValue:p.value.directories_enabled[`inputs_private_${m}`],"onUpdate:modelValue":L=>p.value.directories_enabled[`inputs_private_${m}`]=L,label:`${m.charAt(0).toUpperCase()+m.slice(1)} data`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label"]),p.value.directories_enabled[`inputs_private_${m}`]?(v(),ge(q,{key:0,modelValue:p.value.directories[`inputs_private_${m}`],"onUpdate:modelValue":L=>p.value.directories[`inputs_private_${m}`]=L,placeholder:`inputs/private/${m}`,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]),c("div",HD,[x(Le,{id:`dir-inputs_public_${m}`,modelValue:p.value.directories_enabled[`inputs_public_${m}`],"onUpdate:modelValue":L=>p.value.directories_enabled[`inputs_public_${m}`]=L,label:`${m.charAt(0).toUpperCase()+m.slice(1)} data`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label"]),p.value.directories_enabled[`inputs_public_${m}`]?(v(),ge(q,{key:0,modelValue:p.value.directories[`inputs_public_${m}`],"onUpdate:modelValue":L=>p.value.directories[`inputs_public_${m}`]=L,placeholder:`inputs/public/${m}`,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)])])])),64)),c("div",WD,[c("div",qD,[(v(!0),b(se,null,ke(E("input_private"),m=>(v(),b("div",{key:`extra-${m.key}`,class:"p-3 rounded-md"},[x(Le,{id:`extra-dir-${m.key}`,modelValue:p.value.extra_directories_enabled[m.key],"onUpdate:modelValue":L=>p.value.extra_directories_enabled[m.key]=L,label:m.label,description:`Custom: ${m.path}`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),p.value.extra_directories_enabled[m.key]?(v(),ge(q,{key:0,modelValue:m.path,"onUpdate:modelValue":L=>m.path=L,placeholder:m.path,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]))),128))]),c("div",KD,[(v(!0),b(se,null,ke(E("input_public"),m=>(v(),b("div",{key:`extra-${m.key}`,class:"p-3 rounded-md"},[x(Le,{id:`extra-dir-${m.key}`,modelValue:p.value.extra_directories_enabled[m.key],"onUpdate:modelValue":L=>p.value.extra_directories_enabled[m.key]=L,label:m.label,description:`Custom: ${m.path}`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),p.value.extra_directories_enabled[m.key]?(v(),ge(q,{key:0,modelValue:m.path,"onUpdate:modelValue":L=>m.path=L,placeholder:m.path,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]))),128))])])]),c("div",GD,[S[98]||(S[98]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-4"},"Add Custom Input Directories",-1)),c("div",JD,[c("div",null,[S[96]||(S[96]=c("p",{class:"text-xs font-semibold uppercase text-gray-500 dark:text-gray-400 mb-3"},"Private",-1)),x(gt,{"model-value":xe("input_private"),"onUpdate:modelValue":S[27]||(S[27]=m=>Oe("input_private",m)),"add-label":"Add Private Input","default-item":()=>({key:"",label:"",path:"",type:"input_private",_id:Date.now()})},{default:R(({item:m,index:L,update:ie})=>[c("div",YD,[x(q,{"model-value":m.key,"onUpdate:modelValue":C=>ie("key",C),label:"Key",placeholder:"e.g., inputs_private_survey",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":m.label,"onUpdate:modelValue":C=>ie("label",C),label:"Label",placeholder:"e.g., Survey Data",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":m.path,"onUpdate:modelValue":C=>ie("path",C),label:"Path",placeholder:"e.g., inputs/private/survey",prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])]),c("div",null,[S[97]||(S[97]=c("p",{class:"text-xs font-semibold uppercase text-gray-500 dark:text-gray-400 mb-3"},"Public",-1)),x(gt,{"model-value":xe("input_public"),"onUpdate:modelValue":S[28]||(S[28]=m=>Oe("input_public",m)),"add-label":"Add Public Input","default-item":()=>({key:"",label:"",path:"",type:"input_public",_id:Date.now()})},{default:R(({item:m,index:L,update:ie})=>[c("div",QD,[x(q,{"model-value":m.key,"onUpdate:modelValue":C=>ie("key",C),label:"Key",placeholder:"e.g., inputs_public_survey",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":m.label,"onUpdate:modelValue":C=>ie("label",C),label:"Label",placeholder:"e.g., Survey Data",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":m.path,"onUpdate:modelValue":C=>ie("path",C),label:"Path",placeholder:"e.g., inputs/public/survey",prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])])])])):I("",!0),p.value.type==="project_sensitive"?(v(),b("div",XD,[S[105]||(S[105]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Outputs",-1)),S[106]||(S[106]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Review outputs before promotion; private folders remain gitignored while public copies are ready to share. ",-1)),S[107]||(S[107]=c("div",{class:"grid gap-4 sm:grid-cols-2 text-xs font-semibold uppercase text-gray-500 dark:text-gray-400 mb-3"},[c("div",null,"Private"),c("div",null,"Public")],-1)),c("div",ZD,[(v(),b(se,null,ke(["notebooks","tables","figures","models","reports"],m=>c("div",{key:m},[c("div",eT,[c("div",tT,[x(Le,{id:`dir-outputs_private_${m}`,modelValue:p.value.directories_enabled[`outputs_private_${m}`],"onUpdate:modelValue":L=>p.value.directories_enabled[`outputs_private_${m}`]=L,label:m.replace("_"," ").charAt(0).toUpperCase()+m.replace("_"," ").slice(1),class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label"]),p.value.directories_enabled[`outputs_private_${m}`]?(v(),ge(q,{key:0,modelValue:p.value.directories[`outputs_private_${m}`],"onUpdate:modelValue":L=>p.value.directories[`outputs_private_${m}`]=L,placeholder:`outputs/private/${m}`,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]),c("div",sT,[x(Le,{id:`dir-outputs_public_${m}`,modelValue:p.value.directories_enabled[`outputs_public_${m}`],"onUpdate:modelValue":L=>p.value.directories_enabled[`outputs_public_${m}`]=L,label:m.replace("_"," ").charAt(0).toUpperCase()+m.replace("_"," ").slice(1),class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label"]),p.value.directories_enabled[`outputs_public_${m}`]?(v(),ge(q,{key:0,modelValue:p.value.directories[`outputs_public_${m}`],"onUpdate:modelValue":L=>p.value.directories[`outputs_public_${m}`]=L,placeholder:`outputs/public/${m}`,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)])])])),64)),c("div",iT,[c("div",nT,[(v(!0),b(se,null,ke(E("output_private"),m=>(v(),b("div",{key:`extra-${m.key}`,class:"p-3 rounded-md"},[x(Le,{id:`extra-dir-${m.key}`,modelValue:p.value.extra_directories_enabled[m.key],"onUpdate:modelValue":L=>p.value.extra_directories_enabled[m.key]=L,label:m.label,description:`Custom: ${m.path}`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),p.value.extra_directories_enabled[m.key]?(v(),ge(q,{key:0,modelValue:m.path,"onUpdate:modelValue":L=>m.path=L,placeholder:m.path,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]))),128))]),c("div",oT,[(v(!0),b(se,null,ke(E("output_public"),m=>(v(),b("div",{key:`extra-${m.key}`,class:"p-3 rounded-md"},[x(Le,{id:`extra-dir-${m.key}`,modelValue:p.value.extra_directories_enabled[m.key],"onUpdate:modelValue":L=>p.value.extra_directories_enabled[m.key]=L,label:m.label,description:`Custom: ${m.path}`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),p.value.extra_directories_enabled[m.key]?(v(),ge(q,{key:0,modelValue:m.path,"onUpdate:modelValue":L=>m.path=L,placeholder:m.path,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]))),128))])])]),c("div",rT,[S[104]||(S[104]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-4"},"Add Custom Output Directories",-1)),c("div",lT,[c("div",null,[S[102]||(S[102]=c("p",{class:"text-xs font-semibold uppercase text-gray-500 dark:text-gray-400 mb-3"},"Private",-1)),x(gt,{"model-value":xe("output_private"),"onUpdate:modelValue":S[29]||(S[29]=m=>Oe("output_private",m)),"add-label":"Add Private Output","default-item":()=>({key:"",label:"",path:"",type:"output_private",_id:Date.now()})},{default:R(({item:m,index:L,update:ie})=>[c("div",aT,[x(q,{"model-value":m.key,"onUpdate:modelValue":C=>ie("key",C),label:"Key",placeholder:"e.g., outputs_private_videos",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":m.label,"onUpdate:modelValue":C=>ie("label",C),label:"Label",placeholder:"e.g., Videos",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":m.path,"onUpdate:modelValue":C=>ie("path",C),label:"Path",placeholder:"e.g., outputs/private/videos",prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])]),c("div",null,[S[103]||(S[103]=c("p",{class:"text-xs font-semibold uppercase text-gray-500 dark:text-gray-400 mb-3"},"Public",-1)),x(gt,{"model-value":xe("output_public"),"onUpdate:modelValue":S[30]||(S[30]=m=>Oe("output_public",m)),"add-label":"Add Public Output","default-item":()=>({key:"",label:"",path:"",type:"output_public",_id:Date.now()})},{default:R(({item:m,index:L,update:ie})=>[c("div",uT,[x(q,{"model-value":m.key,"onUpdate:modelValue":C=>ie("key",C),label:"Key",placeholder:"e.g., outputs_public_videos",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":m.label,"onUpdate:modelValue":C=>ie("label",C),label:"Label",placeholder:"e.g., Videos",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":m.path,"onUpdate:modelValue":C=>ie("path",C),label:"Path",placeholder:"e.g., outputs/public/videos",prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])])])])):I("",!0),p.value.type==="project_sensitive"?(v(),b("div",dT,[S[108]||(S[108]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Temporary",-1)),S[109]||(S[109]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Scratch space and cache (gitignored by default).",-1)),c("div",cT,[(v(),b(se,null,ke(["cache","scratch"],m=>Ke(c("div",{key:m},[c("div",fT,[x(Le,{id:`dir-${m}`,modelValue:p.value.directories_enabled[m],"onUpdate:modelValue":L=>p.value.directories_enabled[m]=L,label:Q.value[m]?.label,description:Q.value[m]?.hint,class:"flex-1"},null,8,["id","modelValue","onUpdate:modelValue","label","description"])]),p.value.directories_enabled[m]?(v(),ge(q,{key:0,modelValue:p.value.directories[m],"onUpdate:modelValue":L=>p.value.directories[m]=L,placeholder:Q.value[m]?.default,class:"mt-2",prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]),[[nt,Q.value[m]]])),64))])])):I("",!0),c("div",hT,[S[111]||(S[111]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},".gitignore Template",-1)),S[112]||(S[112]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Customize the .gitignore template for this project type. Uses pattern-based matching to catch sensitive directories anywhere in your project tree. ",-1)),x(Qi,{modelValue:p.value.git.gitignore_content,"onUpdate:modelValue":S[31]||(S[31]=m=>p.value.git.gitignore_content=m),language:"gitignore",class:"mb-4"},null,8,["modelValue"]),x(Re,{variant:"secondary",size:"sm",onClick:Y},{default:R(()=>[...S[110]||(S[110]=[oe(" Restore Default ",-1)])]),_:1})])],512),[[nt,f.value==="structure"]]),Ke(c("div",null,[x(Df,{"database-connections":p.value.connections.databaseConnections,"onUpdate:databaseConnections":S[32]||(S[32]=m=>p.value.connections.databaseConnections=m),"s3-connections":p.value.connections.s3Connections,"onUpdate:s3Connections":S[33]||(S[33]=m=>p.value.connections.s3Connections=m),"default-database":p.value.connections.defaultDatabase,"onUpdate:defaultDatabase":S[34]||(S[34]=m=>p.value.connections.defaultDatabase=m),"default-storage-bucket":p.value.connections.defaultStorageBucket,"onUpdate:defaultStorageBucket":S[35]||(S[35]=m=>p.value.connections.defaultStorageBucket=m)},null,8,["database-connections","s3-connections","default-database","default-storage-bucket"])],512),[[nt,f.value==="connections"]]),Ke(c("div",null,[c("div",pT,[c("div",mT,[x(Le,{modelValue:p.value.packages.use_renv,"onUpdate:modelValue":S[36]||(S[36]=m=>p.value.packages.use_renv=m),label:"Enable renv",description:"Use renv for package version management and reproducibility"},null,8,["modelValue"]),c("div",gT,[c("div",vT,[S[114]||(S[114]=c("div",null,[c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300"},"Default Packages"),c("p",{class:"text-xs text-gray-600 dark:text-gray-400 mt-1"},"Installed (and optionally attached) when scaffold() runs.")],-1)),x(Re,{size:"sm",variant:"secondary",onClick:ce},{default:R(()=>[...S[113]||(S[113]=[oe("Add Package",-1)])]),_:1})]),p.value.packages.default_packages&&p.value.packages.default_packages.length?(v(),b("div",yT,[(v(!0),b(se,null,ke(p.value.packages.default_packages,(m,L)=>(v(),b("div",{key:`pkg-${L}`,class:"rounded-md border border-gray-200 p-4 dark:border-gray-700"},[c("div",bT,[c("div",kT,[m.source==="cran"||m.source==="bioconductor"?(v(),ge(Af,{key:0,modelValue:m.name,"onUpdate:modelValue":ie=>m.name=ie,source:m.source,label:"Package",placeholder:m.source==="cran"?"Search CRAN...":"Search Bioconductor...",onSelect:ie=>m.name=ie.name},null,8,["modelValue","onUpdate:modelValue","source","placeholder","onSelect"])):(v(),ge(q,{key:1,modelValue:m.name,"onUpdate:modelValue":ie=>m.name=ie,label:"Package",placeholder:"user/repo"},null,8,["modelValue","onUpdate:modelValue"])),x(Ft,{modelValue:m.source,"onUpdate:modelValue":ie=>m.source=ie,label:"Source"},{default:R(()=>[...S[115]||(S[115]=[c("option",{value:"cran"},"CRAN",-1),c("option",{value:"github"},"GitHub",-1),c("option",{value:"bioconductor"},"Bioconductor",-1)])]),_:1},8,["modelValue","onUpdate:modelValue"])]),c("div",xT,[x(Le,{modelValue:m.auto_attach,"onUpdate:modelValue":ie=>m.auto_attach=ie,label:"Auto-Attach",description:"Call library() when scaffold() runs."},null,8,["modelValue","onUpdate:modelValue"]),x(Re,{size:"sm",variant:"secondary",onClick:ie=>le(L)},{default:R(()=>[...S[116]||(S[116]=[oe("Remove",-1)])]),_:1},8,["onClick"])])])]))),128))])):(v(),b("p",wT,"No packages configured. Add packages to include tidyverse helpers or internal utilities automatically."))])])])],512),[[nt,f.value==="packages"]]),Ke(c("div",null,[c("div",_T,[S[124]||(S[124]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Framework maintains context files for selected assistants and keeps them in sync before commits. ",-1)),c("div",ST,[c("div",null,[x(Le,{modelValue:p.value.ai.enabled,"onUpdate:modelValue":S[37]||(S[37]=m=>p.value.ai.enabled=m),label:"Enable AI Support",description:"Generate and sync assistant-specific context files."},null,8,["modelValue"])]),p.value.ai.enabled?(v(),b(se,{key:0},[c("div",CT,[S[118]||(S[118]=c("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Canonical context file",-1)),S[119]||(S[119]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," This file is the source of truth; other instructions files are synced to it when AI hooks run. ",-1)),x(Ft,{modelValue:p.value.ai.canonical_file,"onUpdate:modelValue":S[38]||(S[38]=m=>p.value.ai.canonical_file=m),label:"Canonical Context File"},{default:R(()=>[...S[117]||(S[117]=[c("option",{value:"AGENTS.md"},"AGENTS.md (multi-agent orchestrator)",-1),c("option",{value:"CLAUDE.md"},"CLAUDE.md",-1),c("option",{value:".github/copilot-instructions.md"},".github/copilot-instructions.md",-1)])]),_:1},8,["modelValue"])]),c("div",AT,[S[120]||(S[120]=c("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Assistants",-1)),S[121]||(S[121]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Choose which assistants receive context updates. ",-1)),c("div",VT,[(v(),b(se,null,ke(l,m=>x(yi,{key:m.id,id:`ai-${m.id}`,"model-value":Array.isArray(p.value.ai.assistants)&&p.value.ai.assistants.includes(m.id),"onUpdate:modelValue":L=>te(m.id,L),description:m.description},{default:R(()=>[oe(H(m.label),1)]),_:2},1032,["id","model-value","onUpdate:modelValue","description"])),64))])]),c("div",MT,[S[122]||(S[122]=c("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Canonical instructions",-1)),S[123]||(S[123]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Edit the canonical file directly. This will be pre-populated when the project is created. ",-1)),x(Qi,{modelValue:p.value.ai.canonical_content,"onUpdate:modelValue":S[39]||(S[39]=m=>p.value.ai.canonical_content=m),language:"markdown","min-height":"500px"},null,8,["modelValue"])])],64)):I("",!0)])])],512),[[nt,f.value==="ai"]]),Ke(c("div",null,[x(Vf,{modelValue:me.value,"onUpdate:modelValue":S[40]||(S[40]=m=>me.value=m)},{note:R(()=>[...S[125]||(S[125]=[oe(" Project-specific .gitignore templates can be customized in Project Defaults. ",-1)])]),_:1},8,["modelValue"])],512),[[nt,f.value==="git"]])])])]))}},TT={class:"mt-2 block text-sm font-semibold text-gray-900 dark:text-white"},$T={key:0,class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},ET={class:"mt-2 text-sm font-semibold text-gray-900 dark:text-white"},OT={key:0,class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},PT={key:1,class:"mt-6"},jT={__name:"EmptyState",props:{title:{type:String,required:!0},description:{type:String,default:null},icon:{type:String,default:null,validator:t=>["database","folder","document","users","inbox","photo"].includes(t)},action:{type:Boolean,default:!1}},emits:["click"],setup(t,{emit:e}){const s=t,i=e,n=re(()=>{const l=["relative","block","w-full","rounded-lg","border-2","border-dashed","border-gray-300","p-12","text-center","dark:border-white/15"];return s.action&&l.push("hover:border-gray-400","focus:outline-2","focus:outline-offset-2","focus:outline-sky-600","dark:hover:border-white/25","dark:focus:outline-sky-500","transition-colors"),l.join(" ")}),o=re(()=>({database:()=>Ot("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Ot("path",{d:"M8 14v20c0 4.418 7.163 8 16 8 1.381 0 2.721-.087 4-.252M8 14c0 4.418 7.163 8 16 8s16-3.582 16-8M8 14c0-4.418 7.163-8 16-8s16 3.582 16 8m0 0v14m0-4c0 4.418-7.163 8-16 8S8 28.418 8 24m32 10v6m0 0v6m0-6h6m-6 0h-6"})]),folder:()=>Ot("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Ot("path",{d:"M3 7v30a4 4 0 004 4h34a4 4 0 004-4V13a4 4 0 00-4-4H23.343a4 4 0 01-2.829-1.172l-2.828-2.828A4 4 0 0014.858 4H7a4 4 0 00-4 4v0zM37 17v6m0 0v6m0-6h6m-6 0h-6"})]),document:()=>Ot("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Ot("path",{d:"M8 4a4 4 0 00-4 4v32a4 4 0 004 4h32a4 4 0 004-4V8a4 4 0 00-4-4H8zm24 16v6m0 0v6m0-6h6m-6 0h-6"})]),users:()=>Ot("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Ot("path",{d:"M17 21a5 5 0 110-10 5 5 0 010 10zm-6.5 8a7.5 7.5 0 0115 0H10.5zM31 21a5 5 0 110-10 5 5 0 010 10zm-6.5 8a7.5 7.5 0 0115 0H24.5z"})]),inbox:()=>Ot("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Ot("path",{d:"M4 8h40M4 8v28a4 4 0 004 4h32a4 4 0 004-4V8M4 8l18 14a2 2 0 002.4 0L44 8"})]),photo:()=>Ot("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Ot("path",{d:"M4 8a4 4 0 014-4h32a4 4 0 014 4v32a4 4 0 01-4 4H8a4 4 0 01-4-4V8zm10 6a3 3 0 100-6 3 3 0 000 6zM4 40l12-12 8 8 8-8L44 40"})])})[s.icon]||null),r=()=>{s.action&&i("click")};return(l,a)=>t.action?(v(),b("button",{key:0,type:"button",onClick:r,class:Me(n.value)},[vt(l.$slots,"icon",{},()=>[t.icon?(v(),ge(Es(o.value),{key:0,class:"mx-auto size-12 text-gray-400 dark:text-gray-500"})):I("",!0)]),c("span",TT,H(t.title),1),t.description?(v(),b("p",$T,H(t.description),1)):I("",!0)],2)):(v(),b("div",{key:1,class:Me(n.value.replace("hover:border-gray-400","").replace("focus:outline-2",""))},[vt(l.$slots,"icon",{},()=>[t.icon?(v(),ge(Es(o.value),{key:0,class:"mx-auto size-12 text-gray-400 dark:text-gray-500"})):I("",!0)]),c("h3",ET,H(t.title),1),t.description?(v(),b("p",OT,H(t.description),1)):I("",!0),l.$slots.actions?(v(),b("div",PT,[vt(l.$slots,"actions")])):I("",!0)],2))}},LT=["for"],RT={class:"mt-2"},BT=["id","value","placeholder","rows","required","disabled"],IT={key:1,class:"mt-2 text-sm text-gray-500 dark:text-gray-400"},vc={__name:"Textarea",props:{id:{type:String,default:()=>`textarea-${Math.random().toString(36).substr(2,9)}`},modelValue:{type:String,default:""},label:{type:String,default:null},placeholder:{type:String,default:""},rows:{type:Number,default:4},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},hint:{type:String,default:null},monospace:{type:Boolean,default:!1},textareaClass:{type:[String,Array,Object],default:""}},emits:["update:modelValue"],setup(t){const e=t,s=re(()=>["block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-sky-600 sm:text-sm/6 dark:bg-white/5 dark:text-white dark:outline-white/10 dark:placeholder:text-gray-500 dark:focus:outline-sky-500",e.monospace?"font-mono text-sm leading-6":"",e.textareaClass]);return(i,n)=>(v(),b("div",null,[t.label?(v(),b("label",{key:0,for:t.id,class:"block text-sm/6 font-medium text-gray-900 dark:text-white"},H(t.label),9,LT)):I("",!0),c("div",RT,[c("textarea",{id:t.id,value:t.modelValue,placeholder:t.placeholder,rows:t.rows,required:t.required,disabled:t.disabled,onInput:n[0]||(n[0]=o=>i.$emit("update:modelValue",o.target.value)),class:Me(s.value)},null,42,BT)]),t.hint?(v(),b("p",IT,H(t.hint),1)):I("",!0)]))}},UT={class:"space-y-6"},NT={key:0},zT={class:"mt-1 font-mono text-sm text-gray-900 dark:text-gray-100 break-words"},FT={key:1},HT={class:"grid gap-4 sm:grid-cols-2"},WT=["value"],qT={class:"sm:col-span-2"},KT={key:0,class:"sm:col-span-2"},GT={class:"space-y-3"},JT={class:"flex items-center justify-between"},YT={key:0,class:"rounded-md border border-dashed border-gray-300 p-4 text-sm text-gray-500 dark:border-gray-600 dark:text-gray-400"},QT={class:"grid gap-3 sm:grid-cols-[1fr_auto] sm:items-start"},XT={class:"mt-3"},ZT={key:0,class:"mt-2 text-xs text-gray-500 dark:text-gray-400"},e$={class:"mt-2 flex justify-end"},t$={key:2,class:"text-sm text-red-600 dark:text-red-400"},s$={key:3,class:"text-sm text-red-600 dark:text-red-400"},i$={key:4,class:"text-sm text-red-600 dark:text-red-400"},n$='{"source": "data-catalog"}',o$={__name:"DataCatalogEditModal",props:{modelValue:{type:Boolean,default:!1},mode:{type:String,default:"edit",validator:t=>["edit","create"].includes(t)},entry:{type:Object,default:null},saving:{type:Boolean,default:!1},error:{type:String,default:null}},emits:["update:modelValue","save"],setup(t,{emit:e}){const s=t,i=e,n=Object.freeze([{value:"csv",label:"CSV (comma-separated)"},{value:"tsv",label:"TSV (tab-separated)"},{value:"csv_custom",label:"Delimited text (custom)"},{value:"rds",label:"RDS (R serialized)"},{value:"excel",label:"Excel (.xlsx / .xls)"},{value:"stata",label:"Stata (.dta)"},{value:"spss",label:"SPSS (.sav / .zsav)"},{value:"spss_por",label:"SPSS Portable (.por)"},{value:"sas",label:"SAS (.sas7bdat / .sas7bcat)"},{value:"sas_xpt",label:"SAS Transport (.xpt)"}]),o=["path","type","description","locked","delimiter"],r=ae(null),l=ae(!1),a=ae(!1),d=re(()=>s.mode==="create"),u=Ys({path:"",fullKey:"",type:"",description:"",delimiter:"",locked:!1,additionalFields:[]}),f=re(()=>u.type==="csv_custom"),h=re(()=>{if(!s.entry&&!d.value)return null;const Y=ee();return Y.length>0?`Duplicate metadata keys: ${Y.join(", ")}`:u.additionalFields.some(X=>!X.key.trim())?"Metadata keys cannot be empty.":null}),g=re(()=>u.path.trim()?null:"File path is required"),_=re(()=>d.value?a.value?g.value:null:g.value);ze(()=>s.entry,Y=>{if(!Y){G();return}W(Y)},{immediate:!0}),ze(()=>u.path,Y=>{if(l.value)return;const X=N(Y);X&&(X.type==="csv"?(u.type="csv",u.delimiter=V("csv")):X.type==="tsv"?(u.type="tsv",u.delimiter=V("tsv")):(u.type=X.type,u.delimiter=""))}),ze(()=>u.type,Y=>{Y&&(Y==="csv"?u.delimiter=V("csv"):Y==="tsv"?u.delimiter=V("tsv"):Y!=="csv_custom"&&(u.delimiter=""))});function p(){return`field-${Math.random().toString(36).slice(2,9)}`}function V(Y){return Y==="csv"?"comma":Y==="tsv"?"tab":""}function M(Y,X){if(!Y)return!1;const Q=Y.toLowerCase();return X==="csv"?Q==="comma"||Y===",":X==="tsv"?Q==="tab"||Y==="	":!1}function N(Y){if(!Y)return null;const X=Y.toLowerCase();return X.endsWith(".csv")?{type:"csv",delimiter:"comma"}:X.endsWith(".tsv")||X.endsWith(".txt")||X.endsWith(".dat")?{type:"tsv",delimiter:"tab"}:X.endsWith(".rds")?{type:"rds",delimiter:""}:X.endsWith(".xlsx")||X.endsWith(".xls")?{type:"excel",delimiter:""}:X.endsWith(".dta")?{type:"stata",delimiter:""}:X.endsWith(".sav")||X.endsWith(".zsav")?{type:"spss",delimiter:""}:X.endsWith(".por")?{type:"spss_por",delimiter:""}:X.endsWith(".sas7bdat")||X.endsWith(".sas7bcat")?{type:"sas",delimiter:""}:X.endsWith(".xpt")?{type:"sas_xpt",delimiter:""}:null}function B(Y){if(!Y){u.type="",u.delimiter="",l.value=!1;return}u.type=Y,l.value=!0,Y==="csv"?u.delimiter=V("csv"):Y==="tsv"?u.delimiter=V("tsv"):u.delimiter=""}function W(Y){if(G(),a.value=!1,d.value){const xe=Y?.data||{};u.fullKey=Y?.fullKey||"",u.path=xe.path||"",u.type=xe.type||"",u.description=xe.description||"",u.locked=!!xe.locked,u.delimiter=xe.delimiter||"",l.value=!1;return}const X=Y.data||{};u.fullKey=Y.fullKey||"",u.path=X.path||"";const Q=N(u.path),Ee=X.type||Q?.type||"";if(u.description=X.description||"",u.locked=!!X.locked,Ee==="csv"){const xe=X.delimiter||Q?.delimiter||V("csv");M(xe,"csv")?(u.type="csv",u.delimiter=V("csv")):xe?(u.type="csv_custom",u.delimiter=xe):(u.type="csv",u.delimiter=V("csv"))}else Ee==="tsv"?(u.type="tsv",u.delimiter=V("tsv")):(u.type=Ee,u.delimiter=f.value&&X.delimiter||"");!u.type&&Q?.type&&(u.type=Q.type,u.delimiter=Q.delimiter||V(Q.type)),l.value=!!X.type||u.type==="csv_custom";const E=Object.entries(X).filter(([xe])=>!o.includes(xe)).map(([xe,Oe])=>({id:p(),key:xe,valueInput:j(Oe),valueType:A(Oe),isMultiline:typeof Oe=="object"&&Oe!==null}));u.additionalFields=E,r.value=null}function G(){u.path="",u.fullKey="",u.type="",u.description="",u.delimiter="",u.locked=!1,u.additionalFields=[],r.value=null,l.value=!1}function j(Y){if(typeof Y=="object"&&Y!==null)try{return JSON.stringify(Y,null,2)}catch{return""}return Y==null?"":String(Y)}function A(Y){return Array.isArray(Y)||typeof Y=="object"&&Y!==null?"object":typeof Y=="boolean"?"boolean":typeof Y=="number"?"number":"string"}function J(Y){if(Y.valueType==="object"){if(!Y.valueInput.trim())return null;try{return JSON.parse(Y.valueInput)}catch{throw new Error(`Invalid JSON for field "${Y.key}"`)}}if(Y.valueType==="number"){const X=Number(Y.valueInput);if(Number.isNaN(X))throw new Error(`Value for "${Y.key}" must be a number`);return X}if(Y.valueType==="boolean"){const X=Y.valueInput.trim().toLowerCase();if(["true","false"].includes(X))return X==="true";throw new Error(`Value for "${Y.key}" must be "true" or "false"`)}return Y.valueInput}function ee(){const Y=new Set,X=[];return u.additionalFields.forEach(Q=>{const Ee=Q.key.trim();Ee&&(Y.has(Ee)||o.includes(Ee)?X.push(Ee):Y.add(Ee))}),X}function me(Y){return Y.key.trim()?o.includes(Y.key.trim())?"Reserved key name":u.additionalFields.some(X=>X!==Y&&X.key.trim()===Y.key.trim())?"Duplicate key":null:"Key is required"}function te(){u.additionalFields.push({id:p(),key:"",valueInput:"",valueType:"string",isMultiline:!1}),r.value=null}function F(Y){u.additionalFields=u.additionalFields.filter(X=>X.id!==Y)}function ce(Y){Y.isMultiline=!Y.isMultiline,Y.isMultiline?(Y.valueType="object",Y.valueInput&&!Y.valueInput.trim().startsWith("{")&&(Y.valueInput="")):(Y.valueType="string",Y.valueInput=Y.valueInput!=null?String(Y.valueInput):"")}const le=()=>{if(r.value=null,a.value=!0,!(g.value||h.value)&&!(!d.value&&!s.entry))try{const Y=ve();i("save",Y)}catch(Y){r.value=Y.message}},ve=()=>{if(!u.path.trim())throw new Error("File path is required");const Y={};Y.path=u.path.trim();const X=u.type==="csv_custom"?"csv":u.type.trim();if(X&&(Y.type=X),u.description.trim()&&(Y.description=u.description.trim()),u.type==="csv_custom"){if(!u.delimiter.trim())throw new Error("Delimiter is required for custom delimited text sources");Y.delimiter=u.delimiter.trim()}else u.delimiter.trim()&&!M(u.delimiter.trim(),u.type)&&(Y.delimiter=u.delimiter.trim());u.locked&&(Y.locked=!0);for(const Ee of u.additionalFields){const E=Ee.key.trim();if(!E||o.includes(E))continue;const xe=J({...Ee,valueType:Ee.valueType??"string"});xe===null||xe===""||(Y[E]=xe)}const Q=(d.value?u.fullKey:s.entry.fullKey||"").trim();if(!Q)throw new Error("Dot notation key is required");return{fullKey:Q,data:Y,isNew:d.value}};return(Y,X)=>(v(),ge(nn,{"model-value":t.modelValue,variant:"left",size:"lg",title:"Edit Data Entry","onUpdate:modelValue":X[6]||(X[6]=Q=>i("update:modelValue",Q))},R1({_:2},[t.entry||d.value?{name:"default",fn:R(()=>[c("div",UT,[d.value?(v(),b("div",FT,[x(q,{modelValue:u.fullKey,"onUpdate:modelValue":X[0]||(X[0]=Q=>u.fullKey=Q),label:"Dot Notation Key",placeholder:"e.g., inputs.raw.custom_dataset",hint:"Use dot notation to place this entry within the catalog hierarchy."},null,8,["modelValue"])])):(v(),b("div",NT,[X[7]||(X[7]=c("p",{class:"text-xs font-medium uppercase tracking-wide text-gray-500 dark:text-gray-400"}," Data Key ",-1)),c("p",zT,H(t.entry.fullKey),1)])),x(q,{modelValue:u.path,"onUpdate:modelValue":X[1]||(X[1]=Q=>u.path=Q),label:"File Path",placeholder:"inputs/raw/example.csv",required:"",error:_.value,monospace:"",hint:"Provide a path relative to the project root (e.g., inputs/raw/data.csv) or an absolute path."},null,8,["modelValue","error"]),c("div",HT,[x(Ft,{"model-value":u.type,label:"Type","onUpdate:modelValue":B},{default:R(()=>[X[8]||(X[8]=c("option",{disabled:"",value:""},"Select file type",-1)),(v(!0),b(se,null,ke(lt(n),Q=>(v(),b("option",{key:Q.value,value:Q.value},H(Q.label),9,WT))),128))]),_:1},8,["model-value"]),c("div",qT,[x(Le,{modelValue:u.locked,"onUpdate:modelValue":X[2]||(X[2]=Q=>u.locked=Q),label:"Locked",description:"Treat this data source as read-only."},null,8,["modelValue"])]),f.value?(v(),b("div",KT,[x(q,{modelValue:u.delimiter,"onUpdate:modelValue":X[3]||(X[3]=Q=>u.delimiter=Q),label:"Delimiter",placeholder:"e.g., tab or |",hint:"Use keywords 'tab', 'comma', 'semicolon', 'space' or supply a single character (e.g., |). Keywords map to their respective delimiters."},null,8,["modelValue"])])):I("",!0)]),x(vc,{modelValue:u.description,"onUpdate:modelValue":X[4]||(X[4]=Q=>u.description=Q),label:"Description",placeholder:"Explain what this source contains or how it was produced.",rows:4},null,8,["modelValue"]),c("div",GT,[c("div",JT,[X[10]||(X[10]=c("h4",{class:"text-sm font-semibold text-gray-900 dark:text-gray-100"}," Additional Metadata ",-1)),x(Re,{size:"sm",variant:"secondary",class:"shadow-none",onClick:te},{default:R(()=>[...X[9]||(X[9]=[oe(" Add Field ",-1)])]),_:1})]),X[12]||(X[12]=c("p",{class:"text-xs text-gray-500 dark:text-gray-400"}," Store any extra properties (e.g., source, codebook details). Complex values can be provided as JSON. ",-1)),u.additionalFields.length===0?(v(),b("div",YT," No additional metadata fields. ")):I("",!0),(v(!0),b(se,null,ke(u.additionalFields,Q=>(v(),b("div",{key:Q.id,class:"rounded-md border border-gray-200 bg-white/80 p-4 dark:border-gray-700 dark:bg-gray-900/40"},[c("div",QT,[x(q,{modelValue:Q.key,"onUpdate:modelValue":Ee=>Q.key=Ee,label:"Key",placeholder:"e.g., source",error:me(Q)},null,8,["modelValue","onUpdate:modelValue","error"]),x(Re,{size:"sm",variant:"secondary",class:"shadow-none",onClick:Ee=>F(Q.id)},{default:R(()=>[...X[11]||(X[11]=[oe(" Remove ",-1)])]),_:1},8,["onClick"])]),c("div",XT,[(v(),ge(Es(Q.isMultiline?vc:q),{modelValue:Q.valueInput,"onUpdate:modelValue":Ee=>Q.valueInput=Ee,label:Q.isMultiline?"Value (JSON)":"Value",rows:Q.isMultiline?4:void 0,placeholder:Q.isMultiline?n$:"comma",monospace:Q.isMultiline?void 0:!1},null,8,["modelValue","onUpdate:modelValue","label","rows","placeholder","monospace"])),Q.isMultiline?(v(),b("p",ZT," Provide valid JSON to store complex data structures. ")):I("",!0),c("div",e$,[x(Re,{size:"xs",variant:"soft",onClick:Ee=>ce(Q)},{default:R(()=>[oe(H(Q.isMultiline?"Use single-line value":"Use JSON value"),1)]),_:2},1032,["onClick"])])])]))),128))]),h.value?(v(),b("p",t$,H(h.value),1)):I("",!0),r.value?(v(),b("p",s$,H(r.value),1)):I("",!0),t.error?(v(),b("p",i$,H(t.error),1)):I("",!0)])]),key:"0"}:void 0,t.entry?{name:"actions",fn:R(()=>[x(Re,{size:"sm",variant:"secondary",class:"shadow-none",onClick:X[5]||(X[5]=Q=>i("update:modelValue",!1))},{default:R(()=>[...X[13]||(X[13]=[oe(" Cancel ",-1)])]),_:1}),x(Re,{size:"sm",disabled:t.saving,onClick:le},{default:R(()=>[oe(H(t.saving?"Saving":"Save Entry"),1)]),_:1},8,["disabled"])]),key:"1"}:void 0]),1032,["model-value"]))}},bb=(t="")=>{const s=String(t??"").trim().replace(/[^a-zA-Z0-9]+/g,"-").replace(/^-+|-+$/g,"").toLowerCase();return s?`data-node-${s}`:"data-node-root"},r$=["id"],l$=["aria-expanded"],a$={class:"flex-1"},u$={key:0,class:"rounded bg-amber-200/70 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},d$={key:1},c$={class:"mt-1 text-xs text-zinc-500 dark:text-zinc-400"},f$={class:"text-xs font-medium uppercase tracking-wide text-zinc-500 dark:text-zinc-400"},h$={class:"flex items-start gap-3"},p$={class:"flex-1"},m$={key:0,class:"rounded bg-amber-200/70 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},g$={key:1},v$={class:"mt-1 text-xs text-zinc-500 dark:text-zinc-400"},y$=["id"],b$={class:"flex items-start justify-between gap-4"},k$={class:"min-w-0 flex items-center gap-2"},x$={class:"text-sm font-semibold text-gray-900 dark:text-white"},w$={key:0,class:"rounded bg-amber-200/70 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},_$={key:1},S$={key:0,class:"inline-flex items-center rounded-full border border-gray-200 bg-white px-2.5 py-1 text-xs font-medium text-gray-700 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-100"},C$={class:"flex items-center gap-2 shrink-0"},A$={class:"mt-5 space-y-4"},V$={key:0,class:"space-y-2"},M$={class:"text-sm leading-relaxed text-gray-600 dark:text-zinc-300"},D$={key:1,class:"flex items-start gap-3"},T$={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},$$={key:1,class:"h-4 w-4 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},E$={class:"min-w-0 flex-1"},O$={class:"mt-1 font-mono text-sm leading-relaxed text-gray-900 dark:text-zinc-100"},P$={key:0,class:"rounded bg-amber-200/60 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},j$={key:1},L$={key:1,class:"text-zinc-500"},R$={class:"flex items-start gap-3 pt-4 border-t border-gray-200 dark:border-zinc-700"},B$={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},I$={key:1,class:"h-4 w-4 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},U$={class:"min-w-0 flex-1"},N$={class:"mt-1 font-mono text-sm leading-relaxed text-gray-900 dark:text-zinc-100"},z$={key:0,class:"rounded bg-amber-200/60 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},F$={key:1},H$={key:1,class:"text-zinc-500"},W$={class:"min-w-0"},q$={class:"text-xs font-medium uppercase tracking-wide text-gray-600 dark:text-zinc-200"},K$={class:"mt-1 whitespace-pre-wrap break-words font-mono text-[13px] text-gray-800 dark:text-zinc-200"},G$={class:"flex items-start gap-3 pt-4 border-t border-gray-200 dark:border-zinc-700"},J$={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Y$={key:1,class:"h-4 w-4 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Q$={class:"min-w-0 flex-1"},X$=["title"],td="mt-1.5 inline-flex h-10 w-10 items-center justify-center rounded-md border border-gray-200 bg-white text-gray-500 transition hover:border-gray-300 hover:text-gray-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-500 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-300 dark:hover:border-gray-500 dark:hover:text-gray-100",Z$=Object.assign({name:"DataCatalogTree"},{__name:"DataCatalogTree",props:{node:{type:Object,required:!0},depth:{type:Number,default:0},expandedKeys:{type:Object,required:!0},autoExpandedKeys:{type:Object,required:!0},toggleGroup:{type:Function,required:!0},searchTerm:{type:String,default:""},hierarchical:{type:Boolean,default:!0},pendingDeletes:{type:Object,default:null}},emits:["edit","delete"],setup(t,{emit:e}){const s=e,i=t,n=re(()=>i.node?.type==="group"),o=re(()=>i.depth===0),r=re(()=>{if(!n.value)return!1;if(!i.hierarchical)return!0;const te=i.node?.fullKey;if(!te)return!1;const F=i.expandedKeys,ce=i.autoExpandedKeys,le=typeof F?.has=="function"?F.has(te):!!F?.[te],ve=typeof ce?.has=="function"?ce.has(te):!!ce?.[te];return le||ve}),l=re(()=>{const te=i.node?.leafCount||0;return`${te} ${te===1?"entry":"entries"}`}),a=re(()=>o.value?"mb-4 rounded-xl border border-gray-200 bg-white p-6 transition hover:border-gray-300 scroll-mt-16 dark:border-gray-700/70 dark:bg-gray-900 dark:hover:border-gray-600":"mb-3 rounded-lg border border-gray-200 bg-white p-4 transition hover:border-gray-300 dark:border-gray-700/60 dark:bg-gray-900/60 dark:hover:border-gray-600"),d=re(()=>o.value?"text-lg font-semibold text-zinc-900 dark:text-white":"text-sm font-semibold text-zinc-900 dark:text-white"),u=re(()=>o.value?"mt-4 space-y-3":"mt-3 space-y-3"),f=re(()=>i.pendingDeletes instanceof Set?i.pendingDeletes:i.pendingDeletes&&typeof i.pendingDeletes=="object"&&i.pendingDeletes.value instanceof Set?i.pendingDeletes.value:new Set),h=re(()=>f.value.has(i.node?.fullKey)),g=re(()=>{const te=i.node?.data||{},F=new Set(["path","type","description","locked","delimiter"]);return Object.keys(te).filter(ce=>!F.has(ce)).reduce((ce,le)=>(ce[le]=te[le],ce),{})}),_=re(()=>{const te="relative rounded-lg p-6 transition focus-within:ring-2",F=o.value?"scroll-mt-16":"";return h.value?`${te} border border-red-200 bg-red-50 hover:bg-red-100 focus-within:ring-red-300 ${F} dark:border-red-500/40 dark:bg-red-900/30 dark:hover:bg-red-900/40 dark:focus-within:ring-red-500/40`:`${te} border border-gray-200 bg-gray-50 hover:bg-gray-100 focus-within:ring-sky-200 ${F} dark:border-gray-700/50 dark:bg-gray-800/50 dark:hover:bg-gray-800/60 dark:focus-within:ring-sky-500/40`}),p=re(()=>h.value?"shadow-none border border-red-200 text-red-700 hover:bg-red-50 dark:border-red-500/40 dark:text-red-200 dark:hover:bg-red-900/30":"shadow-none"),V=re(()=>i.searchTerm.trim().toLowerCase()),M=(te="")=>{const F=te??"",ce=V.value;if(!ce)return[{text:F,highlight:!1}];const le=F.toLowerCase(),ve=[];let Y=0,X=le.indexOf(ce);for(;X!==-1;)X>Y&&ve.push({text:F.slice(Y,X),highlight:!1}),ve.push({text:F.slice(X,X+ce.length),highlight:!0}),Y=X+ce.length,X=le.indexOf(ce,Y);return Y<F.length&&ve.push({text:F.slice(Y),highlight:!1}),ve.length>0?ve:[{text:F,highlight:!1}]},N=re(()=>i.node?.displayName||i.node?.name||""),B=re(()=>M(N.value)),W=re(()=>M(i.node?.data?.path||"")),G=re(()=>M(i.node?.fullKey||"")),j=re(()=>{const te=i.node?.fullKey||"";return te?`data_read('${te}')`:"data_read()"}),A=(te="")=>te.replace(/_/g," "),J=te=>te==null?"":typeof te=="object"?JSON.stringify(te,null,2):String(te),ee=re(()=>{if(!o.value)return null;const te=i.node?.fullKey||i.node?.name;return te?bb(te):null}),me=()=>{!n.value||!i.hierarchical||i.toggleGroup(i.node.fullKey)};return(te,F)=>{const ce=aa("DataCatalogTree",!0);return v(),b("div",null,[n.value?(v(),b("div",{key:0,id:ee.value||void 0,class:Me(a.value)},[t.hierarchical?(v(),b(se,{key:0},[c("button",{type:"button",class:"flex w-full items-start gap-3 text-left transition hover:text-zinc-900 focus:outline-none",onClick:me,"aria-expanded":r.value},[x(lt(b2),{class:Me(["mt-1.5 h-4 w-4 shrink-0 text-zinc-400 transition-transform",{"rotate-90 text-sky-500":r.value}])},null,8,["class"]),c("div",a$,[c("p",{class:Me(d.value)},[(v(!0),b(se,null,ke(B.value,(le,ve)=>(v(),b(se,{key:ve},[le.highlight?(v(),b("mark",u$,H(le.text),1)):(v(),b("span",d$,H(le.text),1))],64))),128))],2),c("p",c$,H(l.value),1)]),c("span",f$,H(r.value?"Hide":"Show"),1)],8,l$),x(Lc,{name:"catalog-collapse"},{default:R(()=>[Ke(c("div",{class:Me(u.value)},[(v(!0),b(se,null,ke(t.node.children,le=>(v(),ge(ce,{key:le.fullKey,node:le,depth:t.depth+1,"expanded-keys":t.expandedKeys,"auto-expanded-keys":t.autoExpandedKeys,"toggle-group":t.toggleGroup,"search-term":t.searchTerm,hierarchical:t.hierarchical,"pending-deletes":t.pendingDeletes,onEdit:F[0]||(F[0]=ve=>s("edit",ve)),onDelete:F[1]||(F[1]=ve=>s("delete",ve))},null,8,["node","depth","expanded-keys","auto-expanded-keys","toggle-group","search-term","hierarchical","pending-deletes"]))),128))],2),[[nt,r.value]])]),_:1})],64)):(v(),b(se,{key:1},[c("div",h$,[c("div",p$,[c("p",{class:Me(d.value)},[(v(!0),b(se,null,ke(B.value,(le,ve)=>(v(),b(se,{key:ve},[le.highlight?(v(),b("mark",m$,H(le.text),1)):(v(),b("span",g$,H(le.text),1))],64))),128))],2),c("p",v$,H(l.value),1)])]),c("div",{class:Me(u.value)},[(v(!0),b(se,null,ke(t.node.children,le=>(v(),ge(ce,{key:le.fullKey,node:le,depth:t.depth+1,"expanded-keys":t.expandedKeys,"auto-expanded-keys":t.autoExpandedKeys,"toggle-group":t.toggleGroup,"search-term":t.searchTerm,hierarchical:t.hierarchical,"pending-deletes":t.pendingDeletes,onEdit:F[2]||(F[2]=ve=>s("edit",ve)),onDelete:F[3]||(F[3]=ve=>s("delete",ve))},null,8,["node","depth","expanded-keys","auto-expanded-keys","toggle-group","search-term","hierarchical","pending-deletes"]))),128))],2)],64))],10,r$)):(v(),b("div",{key:1,id:ee.value||void 0,class:Me(_.value)},[c("div",b$,[c("div",k$,[c("h3",x$,[(v(!0),b(se,null,ke(B.value,(le,ve)=>(v(),b(se,{key:`leaf-${ve}`},[le.highlight?(v(),b("mark",w$,H(le.text),1)):(v(),b("span",_$,H(le.text),1))],64))),128))]),t.node.data?.type?(v(),b("span",S$,H(t.node.data.type),1)):I("",!0)]),c("div",C$,[x(Re,{size:"sm",variant:"secondary",class:Me(p.value),onClick:F[4]||(F[4]=It(le=>s("delete",t.node),["stop"]))},{default:R(()=>[oe(H(h.value?"Undo":"Delete"),1)]),_:1},8,["class"]),x(Re,{size:"sm",variant:"secondary",class:"shadow-none",onClick:F[5]||(F[5]=le=>s("edit",t.node))},{default:R(()=>[...F[6]||(F[6]=[oe(" Edit ",-1)])]),_:1})])]),c("div",A$,[t.node.data?.description?(v(),b("div",V$,[F[7]||(F[7]=c("p",{class:"text-xs font-medium text-gray-600 dark:text-zinc-200"}," Description ",-1)),c("p",M$,H(t.node.data.description),1)])):I("",!0),t.node.fullKey?(v(),b("div",D$,[x(co,{value:t.node.fullKey||"",successMessage:"Dot notation copied",variant:"bare",class:Me(td),title:"Copy dot notation"},{default:R(({copied:le})=>[le?(v(),b("svg",$$,[...F[9]||(F[9]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(v(),b("svg",T$,[...F[8]||(F[8]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"},null,-1)])]))]),_:1},8,["value"]),c("div",E$,[F[10]||(F[10]=c("p",{class:"text-xs font-medium text-gray-700 dark:text-zinc-100"}," Location (in Dot Notation) ",-1)),c("p",O$,[G.value.length>0?(v(!0),b(se,{key:0},ke(G.value,(le,ve)=>(v(),b(se,{key:`key-${ve}`},[le.highlight?(v(),b("mark",P$,H(le.text),1)):(v(),b("span",j$,H(le.text),1))],64))),128)):(v(),b("span",L$,""))])])])):I("",!0),c("div",R$,[x(co,{value:t.node.data?.path||"",successMessage:"Path copied",variant:"bare",class:Me(td),title:"Copy path"},{default:R(({copied:le})=>[le?(v(),b("svg",I$,[...F[12]||(F[12]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(v(),b("svg",B$,[...F[11]||(F[11]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"},null,-1)])]))]),_:1},8,["value"]),c("div",U$,[F[13]||(F[13]=c("p",{class:"text-xs font-medium text-gray-700 dark:text-zinc-100"}," File Path ",-1)),c("p",N$,[W.value.length>0?(v(!0),b(se,{key:0},ke(W.value,(le,ve)=>(v(),b(se,{key:`path-${ve}`},[le.highlight?(v(),b("mark",z$,H(le.text),1)):(v(),b("span",F$,H(le.text),1))],64))),128)):(v(),b("span",H$,""))])])]),(v(!0),b(se,null,ke(g.value,(le,ve)=>(v(),b("div",{key:`meta-${ve}`,class:"flex items-start justify-between gap-3 border-t border-gray-200 pt-4 text-sm dark:border-zinc-700"},[c("div",W$,[c("p",q$,H(A(ve)),1),c("pre",K$,H(J(le)),1)])]))),128)),c("div",G$,[x(co,{value:j.value,successMessage:"data_read() command copied",variant:"bare",class:Me([td,"w-10"]),title:"Copy data_read() helper","aria-label":`Copy ${j.value}`},{default:R(({copied:le})=>[le?(v(),b("svg",Y$,[...F[15]||(F[15]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(v(),b("svg",J$,[...F[14]||(F[14]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8z"},null,-1)])]))]),_:1},8,["value","class","aria-label"]),c("div",Q$,[F[16]||(F[16]=c("p",{class:"text-xs font-medium text-gray-700 dark:text-zinc-100"}," Usage ",-1)),c("p",{class:"mt-1 font-mono text-sm leading-relaxed text-gray-900 dark:text-zinc-100 truncate",title:j.value},H(j.value),9,X$)])])])],10,y$))])}}}),eE=v0(Z$,[["__scopeId","data-v-20f9f092"]]),tE={key:0,class:"flex items-center justify-center h-96"},sE={key:1,class:"flex-1 p-10"},iE={key:2,class:"flex min-h-screen"},nE={class:"w-64 shrink-0 border-r border-gray-200 p-6 dark:border-gray-800 flex flex-col"},oE={class:"mb-4"},rE={class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},lE={class:"flex items-center gap-2"},aE={class:"text-xs text-gray-500 dark:text-gray-400 font-mono truncate"},uE={class:"space-y-1"},dE={key:0,class:"ml-6 mt-1 space-y-0.5"},cE=["href","onClick"],fE={class:"truncate"},hE={key:0,class:"shrink-0 rounded-full bg-gray-100 px-2 py-0.5 text-[10px] font-medium text-gray-500 dark:bg-gray-800 dark:text-gray-300"},pE={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},mE={class:"mt-auto pt-4 border-t border-gray-200 dark:border-gray-700"},gE={class:"text-center py-3"},vE={class:"flex-1 p-10"},yE={id:"overview"},bE={class:"space-y-3"},kE={class:"flex items-center justify-between"},xE={class:"flex-1"},wE={class:"text-sm text-gray-900 dark:text-white"},_E={class:"text-gray-600 dark:text-gray-400"},SE={class:"text-gray-600 dark:text-gray-400"},CE={id:"basics"},AE={key:0},VE={key:1},ME={key:2},DE={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},TE={key:0,class:"space-y-5"},$E={class:"flex items-center gap-2"},EE={class:"flex-1 px-3 py-2 text-sm font-mono text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-md"},OE={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},PE={key:0,class:"space-y-5"},jE={id:"settings"},LE={key:0},RE={key:1},BE={key:2},IE={class:"text-sm text-gray-600 dark:text-gray-400 mb-6"},UE={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 mb-6"},NE={class:"space-y-4 mb-6"},zE={class:"flex items-center gap-2 w-32 shrink-0"},FE={class:"text-sm text-gray-700 dark:text-gray-300 capitalize"},HE={class:"flex-1"},WE={class:"border-t border-gray-200 dark:border-gray-700 pt-4"},qE={class:"space-y-3"},KE={key:0,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 mb-6"},GE={class:"space-y-4 mb-6"},JE={class:"flex items-center gap-2 w-32 shrink-0"},YE={class:"text-sm text-gray-700 dark:text-gray-300 capitalize"},QE={class:"flex-1"},XE={class:"border-t border-gray-200 dark:border-gray-700 pt-4"},ZE={class:"space-y-3"},eO={key:1,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 mb-6"},tO={class:"space-y-4 mb-6"},sO={class:"flex items-center gap-2 w-32 shrink-0"},iO={class:"text-sm text-gray-700 dark:text-gray-300 capitalize"},nO={class:"flex-1"},oO={class:"border-t border-gray-200 dark:border-gray-700 pt-4"},rO={class:"space-y-3"},lO={id:"notebooks"},aO={class:"rounded-lg bg-gray-50 p-12 dark:bg-gray-800/50 text-center"},uO={id:"data"},dO={class:"mb-6 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},cO={class:"mb-6"},fO={key:0,class:"space-y-4"},hO={key:1,class:"mt-4 rounded-lg border border-red-200 bg-red-50 p-4 dark:border-red-500/40 dark:bg-red-900/20"},pO={class:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"},mO={class:"text-sm font-medium text-red-700 dark:text-red-200"},gO={class:"flex gap-2"},vO={class:"mt-3 list-disc space-y-1 pl-5 text-xs font-mono text-red-700 dark:text-red-200/90"},yO={key:2,class:"rounded-xl border border-dashed border-zinc-300 bg-white/70 p-10 text-center dark:border-zinc-700 dark:bg-zinc-900/40"},bO={class:"text-sm font-medium text-zinc-700 dark:text-zinc-200"},kO={id:"connections"},xO={id:"packages"},wO={key:0},_O={key:1},SO={key:2},CO={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},AO={class:"space-y-5"},VO={class:"pt-4 border-t border-gray-200 dark:border-gray-700"},MO={key:0,class:"space-y-3"},DO={class:"flex flex-col gap-3"},TO={class:"grid gap-3 grid-cols-[1fr_160px]"},$O={class:"flex items-center justify-between"},EO={key:1,class:"text-xs text-gray-500 dark:text-gray-400 mb-4"},OO={class:"mt-4"},PO={id:"ai"},jO={key:0},LO={key:1},RO={key:2},BO={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 space-y-6"},IO={key:0,class:"space-y-6 pt-6 border-t border-gray-200 dark:border-gray-700"},UO={class:"space-y-2"},NO={key:1,class:"text-xs text-gray-500 dark:text-gray-400 mt-2"},zO={id:"git"},FO={key:0},HO={key:1},WO={key:2},qO={id:"scaffold"},KO={key:0},GO={key:1},JO={key:2},YO={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},QO={id:"env"},XO={class:"space-y-6"},ZO={key:0,class:"max-h-64 overflow-y-auto border border-gray-200 dark:border-gray-700 rounded-md"},e7=["onClick","onMouseenter"],t7={class:"flex items-start justify-between gap-2"},s7={class:"flex-1 min-w-0"},i7={class:"text-sm font-mono font-medium text-gray-900 dark:text-gray-100"},n7={key:0,class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5 line-clamp-1"},o7={key:1,class:"text-xs text-gray-500 dark:text-gray-500 mt-0.5"},r7={class:"text-xs text-gray-500 dark:text-gray-500 font-mono shrink-0"},l7={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},a7={key:1,class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},u7={class:"relative"},d7={class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},c7={class:"space-y-4 text-left"},f7={class:"flex items-start gap-3"},h7={class:"flex items-start gap-3"},p7={key:0,class:"mt-4"},m7={class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},g7={class:"font-mono font-bold"},v7={__name:"ProjectDetailView",setup(t){const e=$o(),s=Ya(),i=Xa(),n=ae(null),o=ae(!0),r=ae(null),l=ae("overview"),a=ae(null),d=ae(""),u=ae(new Set),f=ae(!1),h=ae(null),g=ae(!1),_=ae(null),p=ae(!1),V=ae(new Set),M=ae(!1),N=ae(null),B=ae({}),W=ae(!1),G=ae(null),j=ae(!1),A=ae({initialize:!0,user_name:"",user_email:"",hooks:{ai_sync:!1,data_security:!1,check_sensitive_dirs:!1}}),J=ae(!1),ee=ae(null),me=ae(!1),te=ae(!1),F=ae([]),ce=ae([]),le=ae([]);ae(!1);const ve=ae([]),Y=ae([]),X=ae(null),Q=ae(null),Ee=ae(!1),E=ae([]),xe=ae({use_renv:!1,default_packages:[]}),Oe=ae(!1),Qe=ae(null),Ge=ae(!1),yt=ae(!1),at=ae(!1),D=ae("untrack"),S=ae(""),m=ae(""),L=ae([]),ie=ae(!1),C=ae(-1),P=ae({name:"",source:"cran",auto_attach:!1}),z=ae({}),Z=ae({}),de=ae(""),ne=ae(!1),we=ae(null),ye=ae(!1),O=ae(!1),he=ae("grouped"),je=ae(!1),Ce=[{id:"claude",label:"Claude Code",description:"Anthropic's IDE-focused assistant."},{id:"copilot",label:"GitHub Copilot",description:"Complements VS Code and JetBrains editors."},{id:"agents",label:"Multi-Agent (OpenAI Codex, Cursor, etc.)",description:"Shared instructions for multi-model orchestrators."}],Ae=ae({enabled:!1,canonical_file:"CLAUDE.md",canonical_content:"",assistants:[]}),Ue=ae(!1),Fe=ae(null),Je=ae(!1),qe=ae(!1),Ie=ae(!1),Ze=ae({file:"CLAUDE.md",exists:!0}),wt=T=>["flex items-center gap-2 px-3 py-2 rounded-md text-sm transition",l.value===T?"bg-sky-50 text-sky-700 font-medium dark:bg-sky-900/20 dark:text-sky-400":"text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-800"],as=()=>{const T=e.query.section;T&&["overview","basics","settings","notebooks","connections","data","packages","ai","git","scaffold","env"].includes(T)?l.value=T:l.value="overview"};ze(l,T=>{s.replace({query:{...e.query,section:T}}),(T==="settings"||T==="basics"||T==="scaffold")&&!N.value&&Ef(),T==="connections"&&ve.value.length===0&&Y.value.length===0&&Sb(),T==="packages"&&E.value.length===0&&Of(),T==="git"&&!me.value&&If(),T==="ai"&&!Je.value&&Bf(),T==="env"&&!ye.value&&Wf()}),ze(()=>e.query.section,T=>{const k=["overview","basics","settings","notebooks","connections","data","packages","ai","git","scaffold","env"];T&&T!==l.value&&k.includes(T)&&(l.value=T)});let vs=!1,Ks=!1;ze(()=>Ae.value.canonical_file,(T,k)=>{vs||Je.value&&(!T||T===k||zf(T))}),ze(z,T=>{Ks||console.log("[envVariables watcher] Value changed (not suppressed)")},{deep:!0}),ze(Z,T=>{Ks||console.log("[envGroups watcher] Value changed (not suppressed)")},{deep:!0}),ze(de,T=>{Ks||console.log("[envRawContent watcher] Value changed (not suppressed)")});let Tt=null;ze(m,()=>{Tt&&clearTimeout(Tt),Tt=setTimeout(()=>{Ab()},300)});const ct=(T="")=>T.split(/[._-]/).filter(Boolean).map(k=>k.charAt(0).toUpperCase()+k.slice(1)).join(" "),Yt=T=>JSON.parse(JSON.stringify(T)),Wn=T=>Array.isArray(T)?T.map((k,$)=>[String($),k]):Object.entries(T),Lo=(T,k="",$=0)=>!T||typeof T!="object"?[]:Wn(T).reduce((be,[_e,Pe])=>{if(Pe==null)return be;const Xt=k?`${k}.${_e}`:_e;if(typeof Pe=="object"&&!Array.isArray(Pe)&&Pe.path)return be.push({type:"leaf",name:_e,displayName:ct(_e),fullKey:Xt,data:Pe,leafCount:1,depth:$}),be;if(typeof Pe=="object"){const _t=Lo(Pe,Xt,$+1);if(_t.length>0){const As=_t.reduce((Js,hu)=>Js+(hu.leafCount||0),0);be.push({type:"group",name:_e,displayName:ct(_e),fullKey:Xt,children:_t,leafCount:As,depth:$})}}return be},[]),Qt=T=>T.slice().sort((k,$)=>k.displayName.localeCompare($.displayName,void 0,{sensitivity:"base",numeric:!0})).map(k=>k.type==="group"?{...k,children:Qt(k.children)}:k),gn=(T,k)=>{if(!k)return!0;const $=k.toLowerCase(),be=[T.displayName,T.name,T.fullKey];return T.type==="leaf"&&T.data?.path&&be.push(T.data.path),be.some(_e=>_e&&_e.toLowerCase().includes($))},il=(T,k)=>{if(!k)return{nodes:T,matchedKeys:new Set};const $=[],be=new Set;return T.forEach(_e=>{if(_e.type==="leaf"){gn(_e,k)&&($.push(_e),be.add(_e.fullKey));return}const Pe=il(_e.children,k);if(gn(_e,k)||Pe.nodes.length>0){const _t=Pe.nodes,As=_t.reduce((Js,hu)=>Js+(hu.leafCount||0),0);$.push({..._e,children:_t,leafCount:As||_e.leafCount}),be.add(_e.fullKey),Pe.matchedKeys.forEach(Js=>be.add(Js))}}),{nodes:$,matchedKeys:be}},qn=re(()=>{const T=a.value;return!T||typeof T!="object"?[]:!Array.isArray(T)&&T.path?[{type:"leaf",name:T.name||"data",displayName:ct(T.name||"data"),fullKey:T.name||"data",data:T,leafCount:1,depth:0}]:Qt(Lo(T))}),nl=re(()=>d.value.trim().toLowerCase()),ol=re(()=>{const T=nl.value;return T?il(qn.value,T):{nodes:qn.value,matchedKeys:new Set}}),Et=re(()=>ol.value.nodes),rl=re(()=>ol.value.matchedKeys),ll=re(()=>nl.value.length>0),Ro=re(()=>ll.value?[]:(qn.value||[]).filter(T=>(T.depth||0)===0).map(T=>{const k=T.fullKey||T.name||"";return{anchorId:k?bb(k):null,label:T.displayName||ct(T.name||k||"data source"),count:T.leafCount||(T.type==="leaf"?1:0),nodeKey:k}}).filter(T=>T.anchorId&&T.label)),Bo=re(()=>V.value.size>0),Io=re(()=>V.value.size),al=re(()=>Array.from(V.value)),Gs=T=>{let k=0;return T.forEach($=>{k=Math.max(k,$.depth||0),$.type==="group"&&$.children&&(k=Math.max(k,Gs($.children)))}),k},li=re(()=>Gs(qn.value)),Os=re(()=>li.value>2),Ps=re(()=>{const T=B.value.directories||{},k={},$=["functions","notebooks","scripts"];return Object.keys(T).forEach(be=>{$.includes(be)&&(k[be]=T[be])}),k}),Kn=re(()=>{const T=B.value.directories||{},k={};return Object.keys(T).forEach($=>{($.startsWith("inputs_")||$.includes("_raw")||$.includes("_intermediate")||$.includes("_final"))&&(k[$]=T[$])}),k}),Uo=re(()=>{const T=B.value.directories||{},k={};return Object.keys(T).forEach($=>{($.startsWith("outputs_")||$.includes("_figures")||$.includes("_tables")||$.includes("_models")||$.includes("_reports")||$==="cache"||$==="scratch")&&!$.startsWith("inputs_")&&(k[$]=T[$])}),k}),Gn=T=>T.replace(/_/g," ").replace(/\b\w/g,k=>k.toUpperCase()),ul=re(()=>{const T=n.value?.type;return T?{project:"Standard Project Structure",project_sensitive:"Privacy Sensitive Project Structure",presentation:"Presentation Structure",course:"Course Structure"}[T]||T:"Standard Project Structure"}),No=re(()=>D.value==="untrack"?!0:D.value==="delete"?S.value===n.value?.name:!1),dl=(T,k,$)=>{const be=k.split(".").filter(Boolean);if(be.length===0)return null;const _e=Yt(T||{});let Pe=_e;for(let Xt=0;Xt<be.length-1;Xt++){const _t=be[Xt];(!Pe[_t]||typeof Pe[_t]!="object"||Array.isArray(Pe[_t]))&&(Pe[_t]={}),Pe=Pe[_t]}return Pe[be[be.length-1]]=Yt($),_e},U=(T,k)=>{if(!T||!k)return null;const $=k.split(".").filter(Boolean);if($.length===0)return null;let be=T;for(let _e=0;_e<$.length;_e++){const Pe=$[_e];if(!be||typeof be!="object"||!(Pe in be))return null;be=be[Pe]}return be},w=T=>{const k=T.split(".").filter(Boolean);if(k.length<=1)return;const $=new Set(u.value);let be="";for(let _e=0;_e<k.length-1;_e++)be=be?`${be}.${k[_e]}`:k[_e],$.add(be);u.value=$},y=async(T,k)=>{if(!T)return;if(k){w(k);const be=new Set(u.value);be.add(k),u.value=be}await On();const $=document.getElementById(T);$&&$.scrollIntoView({behavior:"smooth",block:"start"})},K=async T=>{const k=await fetch(`/api/project/${e.params.id}/data`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:T})}),$=await k.json();if(!k.ok||$.error)throw new Error($.error||"Failed to save data catalog")},ue=T=>{T&&(p.value=!1,h.value={fullKey:T.fullKey,name:T.name,data:Yt(T.data||{})},_.value=null,f.value=!0)},pe=()=>{p.value=!0,h.value={fullKey:"",data:{}},_.value=null,f.value=!0},Xe=T=>{f.value=T,T||(h.value=null,_.value=null,g.value=!1,p.value=!1)},Vt=async T=>{if(!T||!T.fullKey||!T.data){_.value=T?.error||"Invalid data entry payload";return}const k=T.fullKey.trim(),$=!!T.isNew;if(!k){_.value="Dot notation key is required";return}if($&&U(a.value,k)){_.value="A data source with this key already exists";return}const be=Yt(a.value),_e=dl(a.value,k,T.data);if(!_e){_.value="Unable to write data entry to catalog";return}a.value=_e,g.value=!0,_.value=null;try{if(await K(_e),w(k),i.success($?"Data Source Added":"Data Catalog Updated",$?"Data entry created successfully":"Data entry saved successfully"),f.value=!1,h.value=null,p.value=!1,V.value.has(k)){const Pe=new Set(V.value);Pe.delete(k),V.value=Pe}}catch(Pe){a.value=be,_.value=Pe.message||"Failed to save data catalog",i.error("Save Failed",Pe.message||"Failed to save data catalog")}finally{g.value=!1}},Cs=(T,k)=>{if(!T||!k)return null;const $=k.split(".").filter(Boolean);if($.length===0)return null;const be=Yt(T),_e=[];let Pe=be;for(let _t=0;_t<$.length;_t++){const As=$[_t];if(!Pe||typeof Pe!="object"||!(As in Pe))return null;_e.push({parent:Pe,key:As}),Pe=Pe[As]}const Xt=_e.pop();if(!Xt)return null;delete Xt.parent[Xt.key];for(let _t=_e.length-1;_t>=0;_t--){const{parent:As,key:Js}=_e[_t];As[Js]&&typeof As[Js]=="object"&&!Array.isArray(As[Js])&&Object.keys(As[Js]).length===0&&delete As[Js]}return be},Mt=async()=>{if(!Bo.value)return;M.value=!0;const T=Yt(a.value);let k=Yt(T);for(const $ of V.value){const be=Cs(k,$);if(!be){i.error("Delete Failed",`Unable to locate ${$} in catalog`),M.value=!1;return}k=be}try{await K(k),a.value=k,i.success("Data Catalog Updated","Staged deletions have been saved"),V.value=new Set}catch($){i.error("Delete Failed",$.message||"Failed to save catalog changes")}finally{M.value=!1}},vn=T=>{if(!T||!T.fullKey)return;const k=new Set(V.value);k.has(T.fullKey)?k.delete(T.fullKey):k.add(T.fullKey),V.value=k},kb=()=>{V.value=new Set},xb=T=>{const k=new Set(u.value);k.has(T)?k.delete(T):k.add(T),u.value=k},Tf=async()=>{o.value=!0,r.value=null;try{const k=await(await fetch(`/api/project/${e.params.id}`)).json();k.error?r.value=k.error:n.value=k}catch(T){r.value="Failed to load project: "+T.message}finally{o.value=!1}},$f=async()=>{try{const k=await(await fetch(`/api/project/${e.params.id}/data`)).json();k.error||(a.value=k.data||k)}catch(T){console.error("Failed to load data catalog:",T)}},Ef=async()=>{W.value=!0,G.value=null;try{const k=await(await fetch(`/api/project/${e.params.id}/settings`)).json();k.error?G.value=k.error:(N.value=k.settings,B.value=JSON.parse(JSON.stringify(k.settings)),B.value.scaffold||(B.value.scaffold={notebook_format:"quarto",positron:!1}))}catch(T){G.value="Failed to load settings: "+T.message}finally{W.value=!1}},wb=async()=>{switch(l.value){case"author":case"settings":await cu();break;case"packages":await Pf();break;case"scaffold":await cu();break;case"git":await Hf();break;case"connections":await jf();break;case"ai":await Ff();break;case"env":await fu();break;case"overview":case"notebooks":case"data":i.info("No Changes to Save","This section has no editable settings");break;default:i.info("No Changes to Save","This section has no editable settings")}},cu=async()=>{j.value=!0;try{const T=[...F.value,...ce.value,...le.value];if(T.length>0){const _e=await(await fetch(`/api/project/${e.params.id}/directories`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({directories:T})})).json();if(!_e.success){i.error("Directory Creation Failed",_e.error||"Failed to create directories"),j.value=!1;return}F.value=[],ce.value=[],le.value=[]}const $=await(await fetch(`/api/project/${e.params.id}/settings`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(B.value)})).json();if($.success){const be=T.length>0?`Settings updated and ${T.length} director${T.length===1?"y":"ies"} created`:"Project settings have been updated";i.success("Settings Saved",be),N.value=JSON.parse(JSON.stringify(B.value)),await Ef()}else i.error("Save Failed",$.error||"Failed to save settings")}catch(T){i.error("Save Failed",T.message)}finally{j.value=!1}},_b=T=>{T&&y(T.anchorId,T.nodeKey)},Sb=async()=>{try{const k=await(await fetch(`/api/project/${e.params.id}/connections`)).json();if(k.error)console.error("Failed to load connections:",k.error);else{const $=Object.entries(k.databases||{}).map(([_e,Pe])=>({_id:_e,name:_e,...Pe})),be=Object.entries(k.storage_buckets||{}).map(([_e,Pe])=>({_id:_e,name:_e,...Pe}));ve.value=$,Y.value=be,X.value=k.default_database||null,Q.value=k.default_storage_bucket||null}}catch(T){console.error("Failed to load connections:",T.message)}},Of=async()=>{Oe.value=!0,Qe.value=null;try{const k=await(await fetch(`/api/project/${e.params.id}/packages`)).json();k.error?Qe.value=k.error:(E.value=(k.packages||[]).map($=>({name:$.name||"",source:$.source||"cran",auto_attach:$.auto_attach!==void 0?$.auto_attach:!0,ref:$.ref||""})),xe.value={use_renv:k.use_renv||!1,default_packages:JSON.parse(JSON.stringify(E.value))})}catch(T){Qe.value="Failed to load packages: "+T.message}finally{Oe.value=!1}},Pf=async()=>{Ge.value=!0;try{const k=await(await fetch(`/api/project/${e.params.id}/packages`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({use_renv:xe.value.use_renv,packages:xe.value.default_packages})})).json();k.success?(i.success("Packages Saved","Package configuration has been updated"),await Of()):i.error("Save Failed",k.error||"Failed to save packages")}catch(T){i.error("Save Failed",T.message)}finally{Ge.value=!1}},jf=async()=>{Ee.value=!0;try{const T={};ve.value.forEach(_e=>{const{_id:Pe,name:Xt,..._t}=_e;T[Xt]=_t});const k={};Y.value.forEach(_e=>{const{_id:Pe,name:Xt,..._t}=_e;k[Xt]=_t});const be=await(await fetch(`/api/project/${e.params.id}/connections`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({default_database:X.value,default_storage_bucket:Q.value,databases:T,storage_buckets:k})})).json();be.success?i.success("Connections Saved","Connection configuration has been updated"):i.error("Save Failed",be.error||"Failed to save connections")}catch(T){i.error("Save Failed",T.message)}finally{Ee.value=!1}},Cb=()=>{xe.value.default_packages||(xe.value.default_packages=[]),xe.value.default_packages.push({name:"",source:"cran",auto_attach:!1})},Ab=async()=>{if(m.value.length<2){L.value=[],C.value=-1;return}ie.value=!0;try{const k=await(await fetch(`/api/packages/search?q=${encodeURIComponent(m.value)}`)).json();console.log("Package search results:",k),L.value=k.packages||[],C.value=L.value.length>0?0:-1}catch(T){console.error("Failed to search packages:",T),L.value=[],C.value=-1}finally{ie.value=!1}},Vb=T=>{L.value.length!==0&&(T.key==="ArrowDown"?(T.preventDefault(),C.value=Math.min(C.value+1,L.value.length-1)):T.key==="ArrowUp"?(T.preventDefault(),C.value=Math.max(C.value-1,0)):T.key==="Enter"&&C.value>=0?(T.preventDefault(),Lf(L.value[C.value])):T.key==="Escape"&&(L.value=[],C.value=-1))},Lf=T=>{P.value.name=T.name,P.value.source=T.source,m.value="",L.value=[],C.value=-1},Mb=()=>{P.value.name.trim()&&(E.value.push({name:P.value.name.trim(),source:P.value.source,auto_attach:P.value.auto_attach}),yt.value=!1,i.success("Package Added",`${P.value.name} added to package list`))},Db=()=>{at.value=!1,D.value="untrack",S.value=""},Tb=async()=>{if(!No.value){console.log("[DELETE] Cannot delete - canDelete is false");return}console.log("[DELETE] Starting delete with option:",D.value),console.log("[DELETE] Project ID:",e.params.id);try{const T=D.value==="delete"?`/api/projects/${e.params.id}/delete`:`/api/projects/${e.params.id}/untrack`;console.log("[DELETE] Calling endpoint:",T);const k=await fetch(T,{method:"POST",headers:{"Content-Type":"application/json"}});if(console.log("[DELETE] Response status:",k.status),!k.ok){const _e=await k.json();throw console.error("[DELETE] Error response:",_e),new Error(_e.message||"Failed to delete project")}const $=await k.json();console.log("[DELETE] Success result:",$);const be=D.value==="delete"?"deleted":"removed from Framework";i.success("Project Removed",`${n.value.name} has been ${be}`),setTimeout(()=>{window.location.href="/projects"},500)}catch(T){console.error("[DELETE] Failed to delete project:",T),i.error("Delete Failed",T.message||"Could not delete project")}},$b=T=>{xe.value.default_packages.splice(T,1)},Eb=T=>T?Array.isArray(T)?Array.from(new Set(T.map(k=>String(k)))):typeof T=="string"?[T]:[]:[],Rf=async T=>{let k=`/api/project/${e.params.id}/ai`;if(T){const be=new URLSearchParams;be.set("canonical_file",T),k+=`?${be.toString()}`}const $=await fetch(k);if(!$.ok)throw new Error("Failed to load AI settings");return $.json()},Bf=async()=>{Ue.value=!0,Fe.value=null;try{const T=await Rf();if(T.error){Fe.value=T.error,Je.value=!1;return}const k=T.ai||{};vs=!0;const $={enabled:!!k.enabled,canonical_file:k.canonical_file||"CLAUDE.md",canonical_content:k.canonical_content||"",assistants:Eb(k.assistants)};Ae.value=$,Ze.value={file:k.content_file||k.canonical_file||"CLAUDE.md",exists:!!k.content_exists},vs=!1,await Nf($.canonical_file,{preserveContentIfMissing:!1}),Je.value=!0}catch(T){Fe.value=T.message||"Failed to load AI settings",Je.value=!1}finally{vs=!1,Ue.value=!1,Ie.value=!1}},If=async()=>{J.value=!0,ee.value=null;try{const k=await(await fetch(`/api/project/${e.params.id}/git`)).json();if(k.error){ee.value=k.error,me.value=!1;return}const $=k.git||{};A.value={initialize:$.initialize!==void 0?!!$.initialize:!0,user_name:$.user_name||"",user_email:$.user_email||"",hooks:{ai_sync:$.hooks?.ai_sync||!1,data_security:$.hooks?.data_security||!1,check_sensitive_dirs:$.hooks?.check_sensitive_dirs||!1}},me.value=!0}catch(T){ee.value=T.message||"Failed to load Git settings",me.value=!1}finally{J.value=!1}},Uf=re({get(){return{initialize:A.value.initialize,user_name:A.value.user_name||"",user_email:A.value.user_email||"",hooks:{ai_sync:A.value.hooks?.ai_sync||!1,data_security:A.value.hooks?.data_security||!1,check_sensitive_dirs:A.value.hooks?.check_sensitive_dirs||!1}}},set(T){A.value={initialize:T.initialize,user_name:T.user_name,user_email:T.user_email,hooks:{ai_sync:T.hooks.ai_sync,data_security:T.hooks.data_security,check_sensitive_dirs:T.hooks.check_sensitive_dirs}}}}),Nf=async(T,{preserveContentIfMissing:k=!0}={})=>{if(T){Ie.value=!0;try{const $=await Rf(T);if($.error){i.error("Load Failed",$.error);return}const be=$.ai||{};Ze.value={file:be.content_file||T,exists:!!be.content_exists},(be.content_exists||!k)&&(Ae.value.canonical_content=be.canonical_content||"")}catch($){i.error("Load Failed",$.message||"Unable to load canonical file")}finally{Ie.value=!1}}},zf=T=>{const k=typeof T=="string"&&T.length>0?T:"CLAUDE.md";Nf(k,{preserveContentIfMissing:!0})},Ob=(T,k)=>{if(!T)return;const $=new Set(Ae.value.assistants);k?$.add(T):$.delete(T),Ae.value.assistants=Array.from($)},Ff=async()=>{qe.value=!0;try{const k=await(await fetch(`/api/project/${e.params.id}/ai`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:Ae.value.enabled,canonical_file:Ae.value.canonical_file,assistants:Ae.value.assistants,canonical_content:Ae.value.canonical_content})})).json();k.success?(i.success("AI Settings Saved","AI assistant configuration has been updated"),Je.value=!1,await Bf()):i.error("Save Failed",k.error||"Failed to save AI settings")}catch(T){i.error("Save Failed",T.message||"Failed to save AI settings")}finally{qe.value=!1}},Hf=async()=>{te.value=!0;try{const k=await(await fetch(`/api/project/${e.params.id}/git`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({initialize:A.value.initialize,user_name:A.value.user_name,user_email:A.value.user_email,hooks:A.value.hooks})})).json();k.success?(i.success("Git Settings Saved","Repository configuration has been updated"),me.value=!1,await If()):i.error("Save Failed",k.error||"Failed to save Git settings")}catch(T){i.error("Save Failed",T.message||"Failed to save Git settings")}finally{te.value=!1}},Wf=async()=>{if(ne.value||ye.value){console.log("[loadEnv] Blocked: already loading or loaded",{loading:ne.value,loaded:ye.value});return}ne.value=!0,we.value=null;try{const k=await(await fetch(`/api/project/${e.params.id}/env`)).json();k.error?(we.value=k.error,ye.value=!1):(Ks=!0,console.log("[loadEnv] Updating env values with suppressEnvWatch = true"),ye.value=!0,z.value=k.variables||{},Z.value=k.groups||{},de.value=k.raw_content||"",Ks=!1,console.log("[loadEnv] Env values updated, suppressEnvWatch = false"))}catch(T){we.value="Failed to load .env: "+T.message,ye.value=!1}finally{Ks=!1,ne.value=!1}},fu=async()=>{O.value=!0;try{const T=he.value==="raw"?{raw_content:de.value}:{variables:z.value,regroup:je.value},$=await(await fetch(`/api/project/${e.params.id}/env`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(T)})).json();$.success?(i.success(".env Saved","Environment variables have been updated"),ye.value=!1,await Wf()):i.error("Save Failed",$.error||"Failed to save .env")}catch(T){i.error("Save Failed",T.message)}finally{O.value=!1}},qf=T=>{(T.metaKey||T.ctrlKey)&&T.key==="s"&&(T.preventDefault(),l.value==="settings"||l.value==="scaffold"?cu():l.value==="connections"?jf():l.value==="packages"?Pf():l.value==="git"?Hf():l.value==="ai"?Ff():l.value==="directories"?saveDirectories():l.value==="env"&&fu())};return os(()=>{as(),Tf(),$f(),window.addEventListener("keydown",qf)}),To(()=>{window.removeEventListener("keydown",qf)}),ze(()=>e.params.id,(T,k)=>{T&&T!==k&&(l.value="overview",n.value=null,N.value=null,B.value={},G.value=null,W.value=!1,E.value=[],xe.value={use_renv:!1,default_packages:[]},Qe.value=null,Oe.value=!1,a.value=null,V.value=new Set,_.value=null,h.value=null,z.value={},Z.value={},de.value="",we.value=null,ne.value=!1,he.value="grouped",je.value=!1,A.value={initialize:!0,user_name:"",user_email:"",hooks:{ai_sync:!1,data_security:!1,check_sensitive_dirs:!1}},me.value=!1,ee.value=null,J.value=!1,vs=!0,Ae.value={enabled:!1,canonical_file:"CLAUDE.md",canonical_content:"",assistants:[]},Ze.value={file:"CLAUDE.md",exists:!0},Je.value=!1,Fe.value=null,Ue.value=!1,Ie.value=!1,vs=!1,ye.value=!1,we.value=null,ne.value=!1,a.value=null,as(),Tf(),$f())}),(T,k)=>(v(),b("div",null,[o.value?(v(),b("div",tE,[...k[49]||(k[49]=[c("div",{class:"text-zinc-600 dark:text-zinc-400"},"Loading project...",-1)])])):r.value?(v(),b("div",sE,[x(Ls,{type:"error",title:"Error Loading Project",description:r.value},null,8,["description"])])):n.value?(v(),b("div",iE,[c("nav",nE,[c("div",oE,[c("h2",rE,H(n.value.name),1),c("div",lE,[c("span",aE,H(n.value.path),1),x(co,{value:n.value.path,variant:"ghost",successMessage:"Path copied",class:"shrink-0"},null,8,["value"])])]),c("div",uE,[c("a",{href:"#overview",onClick:k[0]||(k[0]=It($=>l.value="overview",["prevent"])),class:Me(wt("overview"))},[x(lt(Qa),{class:"h-4 w-4"}),k[50]||(k[50]=oe(" Overview ",-1))],2),x(ja,null,{default:R(()=>[...k[51]||(k[51]=[oe("Settings",-1)])]),_:1}),c("a",{href:"#basics",onClick:k[1]||(k[1]=It($=>l.value="basics",["prevent"])),class:Me(wt("basics"))},[x(lt(Ic),{class:"h-4 w-4"}),k[52]||(k[52]=oe(" Basics ",-1))],2),c("a",{href:"#settings",onClick:k[2]||(k[2]=It($=>l.value="settings",["prevent"])),class:Me(wt("settings"))},[x(lt(ha),{class:"h-4 w-4"}),k[53]||(k[53]=oe(" Project Structure ",-1))],2),c("a",{href:"#packages",onClick:k[3]||(k[3]=It($=>l.value="packages",["prevent"])),class:Me(wt("packages"))},[x(lt(Uc),{class:"h-4 w-4"}),k[54]||(k[54]=oe(" Packages ",-1))],2),c("a",{href:"#ai",onClick:k[4]||(k[4]=It($=>l.value="ai",["prevent"])),class:Me(wt("ai"))},[x(lt(C2),{class:"h-4 w-4"}),k[55]||(k[55]=oe(" AI Assistants ",-1))],2),c("a",{href:"#git",onClick:k[5]||(k[5]=It($=>l.value="git",["prevent"])),class:Me(wt("git"))},[...k[56]||(k[56]=[c("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})],-1),oe(" Git & Hooks ",-1)])],2),c("a",{href:"#connections",onClick:k[6]||(k[6]=It($=>l.value="connections",["prevent"])),class:Me(wt("connections"))},[x(lt(Nc),{class:"h-4 w-4"}),k[57]||(k[57]=oe(" Connections ",-1))],2),c("a",{href:"#scaffold",onClick:k[7]||(k[7]=It($=>l.value="scaffold",["prevent"])),class:Me(wt("scaffold"))},[x(lt(v2),{class:"h-4 w-4"}),k[58]||(k[58]=oe(" Scaffold Behavior ",-1))],2),x(ja,null,{default:R(()=>[...k[59]||(k[59]=[oe("Project",-1)])]),_:1}),c("a",{href:"#data",onClick:k[8]||(k[8]=It($=>l.value="data",["prevent"])),class:Me(wt("data"))},[x(lt(k2),{class:"h-4 w-4"}),k[60]||(k[60]=oe(" Data ",-1))],2),l.value==="data"&&Ro.value.length?(v(),b("div",dE,[(v(!0),b(se,null,ke(Ro.value,$=>(v(),b("a",{key:$.anchorId,href:`#${$.anchorId}`,onClick:It(be=>_b($),["prevent"]),class:"flex items-center justify-between gap-2 rounded-md px-3 py-1 text-xs text-gray-600 transition hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-gray-800"},[c("span",fE,H($.label),1),$.count?(v(),b("span",hE,H($.count),1)):I("",!0)],8,cE))),128))])):I("",!0),c("a",{href:"#notebooks",onClick:k[9]||(k[9]=It($=>l.value="notebooks",["prevent"])),class:Me(wt("notebooks"))},[x(lt(xd),{class:"h-4 w-4"}),k[61]||(k[61]=oe(" Notebooks ",-1))],2),c("a",{href:"#env",onClick:k[10]||(k[10]=It($=>l.value="env",["prevent"])),class:Me(wt("env"))},[x(lt(g0),{class:"h-4 w-4"}),k[62]||(k[62]=oe(" .env ",-1))],2)]),c("div",pE,[x(Re,{variant:"primary",onClick:wb,disabled:j.value||Ge.value||O.value||qe.value||te.value||Ee.value,class:"w-full"},{default:R(()=>[oe(H(j.value||Ge.value||O.value||qe.value||te.value||Ee.value?"Saving...":"Save"),1)]),_:1},8,["disabled"])]),c("div",mE,[c("div",gE,[c("button",{onClick:k[11]||(k[11]=$=>at.value=!0),class:"text-xs text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-400 transition"}," Delete Project ")])])]),c("div",vE,[Ke(c("div",yE,[k[67]||(k[67]=c("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Overview",-1)),k[68]||(k[68]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Quick overview of your project settings. ",-1)),c("div",bE,[c("button",{onClick:k[12]||(k[12]=$=>l.value="basics"),class:"w-full text-left px-4 py-3 rounded-md bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 hover:border-sky-300 dark:hover:border-sky-700 transition"},[c("div",kE,[c("div",xE,[k[65]||(k[65]=c("div",{class:"text-xs text-gray-500 dark:text-gray-400 mb-1"},"Basics",-1)),c("div",wE,[c("span",null,H(n.value.name||"Untitled"),1),n.value.author?(v(),b(se,{key:0},[k[63]||(k[63]=c("span",{class:"text-gray-400 dark:text-gray-500 mx-1"},"",-1)),c("span",_E,H(n.value.author),1)],64)):I("",!0),B.value.scaffold?.notebook_format?(v(),b(se,{key:1},[k[64]||(k[64]=c("span",{class:"text-gray-400 dark:text-gray-500 mx-1"},"",-1)),c("span",SE,H(B.value.scaffold.notebook_format),1)],64)):I("",!0)])]),k[66]||(k[66]=c("svg",{class:"h-5 w-5 text-gray-400 shrink-0 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))])])])],512),[[nt,l.value==="overview"]]),Ke(c("div",CE,[W.value?(v(),b("div",AE,[...k[69]||(k[69]=[c("div",{class:"text-center py-12 text-zinc-500 dark:text-zinc-400"}," Loading settings... ",-1)])])):G.value?(v(),b("div",VE,[x(Ls,{type:"error",title:"Error Loading Settings",description:G.value},null,8,["description"])])):(v(),b("div",ME,[k[77]||(k[77]=c("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Basics",-1)),k[78]||(k[78]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Essential project settings. ",-1)),c("div",DE,[B.value.scaffold?(v(),b("div",TE,[x(q,{modelValue:n.value.name,"onUpdate:modelValue":k[13]||(k[13]=$=>n.value.name=$),label:"Project Name",hint:"Changing this will rename the project directory"},null,8,["modelValue"]),c("div",null,[k[70]||(k[70]=c("label",{class:"block text-sm font-semibold text-gray-900 dark:text-white mb-2"}," Filesystem Location ",-1)),c("div",$E,[c("code",EE,H(n.value.path),1),x(co,{value:n.value.path,successMessage:"Path copied"},null,8,["value"])])]),c("div",null,[k[72]||(k[72]=c("label",{class:"block text-sm font-semibold text-gray-900 dark:text-white mb-3"}," Supported Editors ",-1)),x(yi,{modelValue:B.value.scaffold.positron,"onUpdate:modelValue":k[14]||(k[14]=$=>B.value.scaffold.positron=$),id:"support-positron-edit",description:"Enable Positron-specific workspace and settings files"},{default:R(()=>[...k[71]||(k[71]=[oe(" Positron ",-1)])]),_:1},8,["modelValue"]),k[73]||(k[73]=c("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-3"}," RStudio supported by default ",-1))]),x(Ft,{modelValue:B.value.scaffold.notebook_format,"onUpdate:modelValue":k[15]||(k[15]=$=>B.value.scaffold.notebook_format=$),label:"Default Notebook Format",hint:"Format used when creating new notebooks"},{default:R(()=>[...k[74]||(k[74]=[c("option",{value:"quarto"},"Quarto (.qmd)",-1),c("option",{value:"rmarkdown"},"R Markdown (.Rmd)",-1)])]),_:1},8,["modelValue"]),c("div",OE,[k[75]||(k[75]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"}," Author Information ",-1)),k[76]||(k[76]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-5"}," Configure author details for this project. ",-1)),B.value.author?(v(),b("div",PE,[x(q,{modelValue:B.value.author.name,"onUpdate:modelValue":k[16]||(k[16]=$=>B.value.author.name=$),label:"Author Name"},null,8,["modelValue"]),x(q,{modelValue:B.value.author.email,"onUpdate:modelValue":k[17]||(k[17]=$=>B.value.author.email=$),label:"Email",type:"email"},null,8,["modelValue"]),x(q,{modelValue:B.value.author.affiliation,"onUpdate:modelValue":k[18]||(k[18]=$=>B.value.author.affiliation=$),label:"Affiliation"},null,8,["modelValue"])])):I("",!0)])])):I("",!0)])]))],512),[[nt,l.value==="basics"]]),Ke(c("div",jE,[W.value?(v(),b("div",LE,[...k[79]||(k[79]=[c("div",{class:"text-center py-12 text-zinc-500 dark:text-zinc-400"}," Loading settings... ",-1)])])):G.value?(v(),b("div",RE,[x(Ls,{type:"error",title:"Error Loading Settings",description:G.value},null,8,["description"])])):(v(),b("div",BE,[k[88]||(k[88]=c("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Project Structure",-1)),c("p",IE,[k[80]||(k[80]=oe(" This project uses the ",-1)),c("strong",null,H(ul.value),1),k[81]||(k[81]=oe(" structure. Existing directories cannot be renamed or removed, but you can add custom directories below. ",-1))]),c("div",UE,[k[82]||(k[82]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Workspaces",-1)),k[83]||(k[83]=c("p",{class:"text-xs text-gray-600 dark:text-gray-400 mb-4"}," Functions, notebooks, and scripts scaffolded into every project. ",-1)),c("div",NE,[(v(!0),b(se,null,ke(Ps.value,($,be)=>(v(),b("div",{key:be,class:"flex items-start gap-4"},[c("div",zE,[x(Le,{"model-value":!0,disabled:"",class:"pointer-events-none opacity-50"}),c("label",FE,H(Gn(be)),1)]),c("div",HE,[x(q,{"model-value":$,disabled:"",prefix:"/",monospace:"",class:"opacity-75"},null,8,["model-value"])])]))),128))]),c("div",WE,[x(gt,{modelValue:F.value,"onUpdate:modelValue":k[19]||(k[19]=$=>F.value=$),"add-label":"Add Workspace Directory","default-item":()=>({key:"",label:"",path:"",category:"workspace",_id:Date.now()})},{default:R(({item:$,index:be,update:_e})=>[c("div",qE,[x(q,{"model-value":$.key,"onUpdate:modelValue":Pe=>_e("key",Pe),label:"Key",placeholder:"e.g., helpers",size:"sm",monospace:""},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":$.label,"onUpdate:modelValue":Pe=>_e("label",Pe),label:"Label",placeholder:"e.g., Helper Scripts",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":$.path,"onUpdate:modelValue":Pe=>_e("path",Pe),label:"Path",placeholder:"e.g., helpers",prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["modelValue","default-item"])])]),Kn.value&&Object.keys(Kn.value).length>0?(v(),b("div",KE,[k[84]||(k[84]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Inputs",-1)),k[85]||(k[85]=c("p",{class:"text-xs text-gray-600 dark:text-gray-400 mb-4"}," Define the read-only locations where raw and prepared data live. ",-1)),c("div",GE,[(v(!0),b(se,null,ke(Kn.value,($,be)=>(v(),b("div",{key:be,class:"flex items-start gap-4"},[c("div",JE,[x(Le,{"model-value":!0,disabled:"",class:"pointer-events-none opacity-50"}),c("label",YE,H(Gn(be)),1)]),c("div",QE,[x(q,{"model-value":$,disabled:"",prefix:"/",monospace:"",class:"opacity-75"},null,8,["model-value"])])]))),128))]),c("div",XE,[x(gt,{modelValue:ce.value,"onUpdate:modelValue":k[20]||(k[20]=$=>ce.value=$),"add-label":"Add Input Directory","default-item":()=>({key:"",label:"",path:"",category:"input",_id:Date.now()})},{default:R(({item:$,index:be,update:_e})=>[c("div",ZE,[x(q,{"model-value":$.key,"onUpdate:modelValue":Pe=>_e("key",Pe),label:"Key",placeholder:"e.g., inputs_archive",size:"sm",monospace:""},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":$.label,"onUpdate:modelValue":Pe=>_e("label",Pe),label:"Label",placeholder:"e.g., Archived Inputs",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":$.path,"onUpdate:modelValue":Pe=>_e("path",Pe),label:"Path",placeholder:"e.g., inputs/archive",prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["modelValue","default-item"])])])):I("",!0),Uo.value&&Object.keys(Uo.value).length>0?(v(),b("div",eO,[k[86]||(k[86]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Outputs",-1)),k[87]||(k[87]=c("p",{class:"text-xs text-gray-600 dark:text-gray-400 mb-4"}," Results, figures, tables, and rendered outputs. ",-1)),c("div",tO,[(v(!0),b(se,null,ke(Uo.value,($,be)=>(v(),b("div",{key:be,class:"flex items-start gap-4"},[c("div",sO,[x(Le,{"model-value":!0,disabled:"",class:"pointer-events-none opacity-50"}),c("label",iO,H(Gn(be)),1)]),c("div",nO,[x(q,{"model-value":$,disabled:"",prefix:"/",monospace:"",class:"opacity-75"},null,8,["model-value"])])]))),128))]),c("div",oO,[x(gt,{modelValue:le.value,"onUpdate:modelValue":k[21]||(k[21]=$=>le.value=$),"add-label":"Add Output Directory","default-item":()=>({key:"",label:"",path:"",category:"output",_id:Date.now()})},{default:R(({item:$,index:be,update:_e})=>[c("div",rO,[x(q,{"model-value":$.key,"onUpdate:modelValue":Pe=>_e("key",Pe),label:"Key",placeholder:"e.g., outputs_animations",size:"sm",monospace:""},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":$.label,"onUpdate:modelValue":Pe=>_e("label",Pe),label:"Label",placeholder:"e.g., Animations",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":$.path,"onUpdate:modelValue":Pe=>_e("path",Pe),label:"Path",placeholder:"e.g., outputs/animations",prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["modelValue","default-item"])])])):I("",!0)]))],512),[[nt,l.value==="settings"]]),Ke(c("div",lO,[k[90]||(k[90]=c("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Rendered Notebooks",-1)),k[91]||(k[91]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Browse and access your rendered Quarto/RMarkdown notebooks. ",-1)),c("div",aO,[x(lt(xd),{class:"h-12 w-12 mx-auto mb-4 text-gray-400"}),k[89]||(k[89]=c("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Notebook browser coming soon... ",-1))])],512),[[nt,l.value==="notebooks"]]),Ke(c("div",uO,[c("div",dO,[k[93]||(k[93]=c("div",null,[c("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white"},"Data Catalog"),c("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Browse your project's data sources with copy commands. ")],-1)),x(Re,{variant:"primary",size:"sm",class:"inline-flex items-center gap-2",onClick:pe},{default:R(()=>[x(lt(S2),{class:"h-4 w-4"}),k[92]||(k[92]=oe(" Add Data Source ",-1))]),_:1})]),c("div",cO,[x(q,{modelValue:d.value,"onUpdate:modelValue":k[22]||(k[22]=$=>d.value=$),label:"Search data sources",placeholder:"Filter by name, prefix, or file path"},null,8,["modelValue"])]),Et.value.length>0?(v(),b("div",fO,[(v(!0),b(se,null,ke(Et.value,$=>(v(),ge(eE,{key:$.fullKey,node:$,"expanded-keys":u.value,"auto-expanded-keys":rl.value,"toggle-group":xb,"search-term":d.value,hierarchical:Os.value,"pending-deletes":V.value,onEdit:ue,onDelete:vn},null,8,["node","expanded-keys","auto-expanded-keys","search-term","hierarchical","pending-deletes"]))),128))])):I("",!0),Bo.value?(v(),b("div",hO,[c("div",pO,[c("div",null,[c("p",mO,H(Io.value)+" data source"+H(Io.value===1?"":"s")+" marked for deletion. ",1),k[94]||(k[94]=c("p",{class:"text-xs text-red-600 dark:text-red-200/80"}," Changes will be applied when you save. ",-1))]),c("div",gO,[x(Re,{variant:"secondary",size:"sm",class:"shadow-none",disabled:M.value,onClick:kb},{default:R(()=>[...k[95]||(k[95]=[oe(" Cancel ",-1)])]),_:1},8,["disabled"]),x(Re,{size:"sm",class:"bg-red-600 text-white hover:bg-red-500 focus-visible:outline-red-600 dark:bg-red-500 dark:hover:bg-red-400",disabled:M.value,onClick:Mt},{default:R(()=>[oe(H(M.value?"Saving":"Save Changes"),1)]),_:1},8,["disabled"])])]),c("ul",vO,[(v(!0),b(se,null,ke(al.value,$=>(v(),b("li",{key:$},H($),1))),128))])])):ll.value?(v(),b("div",yO,[c("p",bO,' No data sources match "'+H(d.value)+'". ',1),k[96]||(k[96]=c("p",{class:"mt-2 text-xs text-zinc-500 dark:text-zinc-400"}," Try adjusting your search terms or clearing the filter. ",-1))])):(v(),b(se,{key:3},[!Bo.value&&(!a.value||Object.keys(a.value||{}).length===0)?(v(),ge(jT,{key:0,title:"No Data Sources",description:"This project doesn't have any data sources defined in its settings",icon:"database"})):I("",!0)],64))],512),[[nt,l.value==="data"]]),x(o$,{mode:p.value?"create":"edit",modelValue:f.value,"onUpdate:modelValue":[k[23]||(k[23]=$=>f.value=$),Xe],entry:h.value,saving:g.value,error:_.value,onSave:Vt},null,8,["mode","modelValue","entry","saving","error"]),Ke(c("div",kO,[k[97]||(k[97]=c("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Connections",-1)),k[98]||(k[98]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Database and storage connections for this project. ",-1)),x(Df,{"database-connections":ve.value,"onUpdate:databaseConnections":k[24]||(k[24]=$=>ve.value=$),"s3-connections":Y.value,"onUpdate:s3Connections":k[25]||(k[25]=$=>Y.value=$),"default-database":X.value,"onUpdate:defaultDatabase":k[26]||(k[26]=$=>X.value=$),"default-storage-bucket":Q.value,"onUpdate:defaultStorageBucket":k[27]||(k[27]=$=>Q.value=$)},null,8,["database-connections","s3-connections","default-database","default-storage-bucket"])],512),[[nt,l.value==="connections"]]),Ke(c("div",xO,[Oe.value?(v(),b("div",wO,[...k[99]||(k[99]=[c("div",{class:"text-center py-12"},[c("div",{class:"text-sm text-gray-500 dark:text-gray-400"},"Loading packages...")],-1)])])):Qe.value?(v(),b("div",_O,[x(Ls,{type:"error",title:"Error Loading Packages",description:Qe.value},null,8,["description"])])):(v(),b("div",SO,[k[104]||(k[104]=c("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Packages & Dependencies",-1)),k[105]||(k[105]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Configure package management and default packages for this project. ",-1)),c("div",CO,[c("div",AO,[x(Le,{modelValue:xe.value.use_renv,"onUpdate:modelValue":k[28]||(k[28]=$=>xe.value.use_renv=$),label:"Enable renv",description:"Use renv for package version management and reproducibility"},null,8,["modelValue"]),c("div",VO,[k[103]||(k[103]=c("p",{class:"text-xs text-gray-600 dark:text-gray-400 mb-4"},"Use this list to preseed notebooks with your preferred helpers.",-1)),xe.value.default_packages&&xe.value.default_packages.length?(v(),b("div",MO,[(v(!0),b(se,null,ke(xe.value.default_packages,($,be)=>(v(),b("div",{key:`pkg-${be}`,class:"rounded-md border border-gray-200 p-4 dark:border-gray-700"},[c("div",DO,[c("div",TO,[$.source==="cran"||$.source==="bioconductor"?(v(),ge(Af,{key:0,modelValue:$.name,"onUpdate:modelValue":_e=>$.name=_e,source:$.source,label:"Package",placeholder:$.source==="cran"?"Search CRAN...":"Search Bioconductor...",onSelect:_e=>$.name=_e.name},null,8,["modelValue","onUpdate:modelValue","source","placeholder","onSelect"])):(v(),ge(q,{key:1,modelValue:$.name,"onUpdate:modelValue":_e=>$.name=_e,label:"Package",placeholder:"user/repo"},null,8,["modelValue","onUpdate:modelValue"])),x(Ft,{modelValue:$.source,"onUpdate:modelValue":_e=>$.source=_e,label:"Source"},{default:R(()=>[...k[100]||(k[100]=[c("option",{value:"cran"},"CRAN",-1),c("option",{value:"github"},"GitHub",-1),c("option",{value:"bioconductor"},"Bioconductor",-1)])]),_:1},8,["modelValue","onUpdate:modelValue"])]),c("div",$O,[x(Le,{modelValue:$.auto_attach,"onUpdate:modelValue":_e=>$.auto_attach=_e,label:"Auto-Attach",description:"Call library() when scaffold() runs."},null,8,["modelValue","onUpdate:modelValue"]),x(Re,{size:"sm",variant:"secondary",onClick:_e=>$b(be)},{default:R(()=>[...k[101]||(k[101]=[oe("Remove",-1)])]),_:1},8,["onClick"])])])]))),128))])):(v(),b("p",EO,"No packages configured. Add packages to include tidyverse helpers or internal utilities automatically.")),c("div",OO,[x(Re,{size:"sm",variant:"secondary",onClick:Cb},{default:R(()=>[...k[102]||(k[102]=[oe("Add Package",-1)])]),_:1})])])])])]))],512),[[nt,l.value==="packages"]]),Ke(c("div",PO,[Ue.value?(v(),b("div",jO,[...k[106]||(k[106]=[c("div",{class:"text-center py-12 text-sm text-gray-500 dark:text-gray-400"},"Loading AI settings...",-1)])])):Fe.value?(v(),b("div",LO,[x(Ls,{type:"error",title:"Error Loading AI Settings",description:Fe.value},null,8,["description"])])):(v(),b("div",RO,[k[114]||(k[114]=c("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"AI Assistants",-1)),k[115]||(k[115]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Framework maintains context files for selected assistants and keeps them in sync before commits. ",-1)),c("div",BO,[x(Le,{modelValue:Ae.value.enabled,"onUpdate:modelValue":k[29]||(k[29]=$=>Ae.value.enabled=$),label:"Enable AI Support",description:"Generate and sync assistant-specific context files."},null,8,["modelValue"]),Ae.value.enabled?(v(),b("div",IO,[c("div",null,[k[108]||(k[108]=c("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Canonical context file",-1)),k[109]||(k[109]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," This file is the source of truth; other instructions files are synced to it when AI hooks run. ",-1)),x(Ft,{modelValue:Ae.value.canonical_file,"onUpdate:modelValue":k[30]||(k[30]=$=>Ae.value.canonical_file=$),label:"Canonical Context File",onChange:k[31]||(k[31]=$=>zf($?.target?.value))},{default:R(()=>[...k[107]||(k[107]=[c("option",{value:"AGENTS.md"},"AGENTS.md (multi-agent orchestrator)",-1),c("option",{value:"CLAUDE.md"},"CLAUDE.md",-1),c("option",{value:".github/copilot-instructions.md"},".github/copilot-instructions.md",-1)])]),_:1},8,["modelValue"])]),c("div",null,[k[110]||(k[110]=c("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Assistants",-1)),k[111]||(k[111]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Choose which assistants receive context updates. ",-1)),c("div",UO,[(v(),b(se,null,ke(Ce,$=>x(yi,{key:$.id,id:`project-ai-${$.id}`,"model-value":Ae.value.assistants.includes($.id),"onUpdate:modelValue":be=>Ob($.id,be),description:$.description},{default:R(()=>[oe(H($.label),1)]),_:2},1032,["id","model-value","onUpdate:modelValue","description"])),64))])]),c("div",null,[k[112]||(k[112]=c("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Canonical instructions",-1)),k[113]||(k[113]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Edit the canonical file directly. Framework mirrors this content to other assistant files. ",-1)),Ze.value.exists?I("",!0):(v(),ge(Ls,{key:0,type:"info",title:"New canonical file",description:`Saving copies the current instructions into ${Ae.value.canonical_file||"CLAUDE.md"}. The original file stays on disk; if AI sync hooks are enabled they mirror everything from the new canonical file.`,class:"mb-4"},null,8,["description"])),x(Qi,{modelValue:Ae.value.canonical_content,"onUpdate:modelValue":k[32]||(k[32]=$=>Ae.value.canonical_content=$),language:"markdown","min-height":"400px",disabled:Ie.value},null,8,["modelValue","disabled"]),Ie.value?(v(),b("p",NO," Loading "+H(Ae.value.canonical_file)+" ",1)):I("",!0)])])):I("",!0)])]))],512),[[nt,l.value==="ai"]]),Ke(c("div",zO,[J.value?(v(),b("div",FO,[...k[116]||(k[116]=[c("div",{class:"text-center py-12 text-sm text-gray-500 dark:text-gray-400"},"Loading git settings...",-1)])])):ee.value?(v(),b("div",HO,[x(Ls,{type:"error",title:"Error Loading Git Settings",description:ee.value},null,8,["description"])])):(v(),b("div",WO,[k[118]||(k[118]=c("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Git & Hooks",-1)),k[119]||(k[119]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Configure repository initialization, commit identity, git hooks, and security scanning. ",-1)),x(Vf,{modelValue:Uf.value,"onUpdate:modelValue":k[33]||(k[33]=$=>Uf.value=$)},{note:R(()=>[...k[117]||(k[117]=[oe(" Project-specific .gitignore templates can be customized in Project Defaults. ",-1)])]),_:1},8,["modelValue"])]))],512),[[nt,l.value==="git"]]),Ke(c("div",qO,[W.value?(v(),b("div",KO,[...k[120]||(k[120]=[c("div",{class:"text-center py-12 text-zinc-500 dark:text-zinc-400"}," Loading settings... ",-1)])])):G.value?(v(),b("div",GO,[x(Ls,{type:"error",title:"Error Loading Settings",description:G.value},null,8,["description"])])):(v(),b("div",JO,[k[121]||(k[121]=c("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Scaffold Behavior",-1)),k[122]||(k[122]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"},[oe(" Automatic actions when "),c("code",{class:"px-1.5 py-0.5 bg-gray-200 dark:bg-gray-700 rounded text-xs"},"scaffold()"),oe(" runs to initialize your project environment. ")],-1)),c("div",YO,[B.value.scaffold?(v(),ge(Mf,{key:0,modelValue:B.value.scaffold,"onUpdate:modelValue":k[34]||(k[34]=$=>B.value.scaffold=$),flush:""},null,8,["modelValue"])):I("",!0)])]))],512),[[nt,l.value==="scaffold"]]),Ke(c("div",QO,[k[123]||(k[123]=c("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Environment Variables",-1)),k[124]||(k[124]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Manage environment variables for this project (.env file). ",-1)),x(wM,{loading:ne.value,error:we.value,groups:Z.value,variables:z.value,"onUpdate:variables":k[35]||(k[35]=$=>z.value=$),"raw-content":de.value,"onUpdate:rawContent":k[36]||(k[36]=$=>de.value=$),"view-mode":he.value,"onUpdate:viewMode":k[37]||(k[37]=$=>he.value=$),"regroup-on-save":je.value,"onUpdate:regroupOnSave":k[38]||(k[38]=$=>je.value=$),onSave:fu},null,8,["loading","error","groups","variables","raw-content","view-mode","regroup-on-save"])],512),[[nt,l.value==="env"]])])])):I("",!0),x(nn,{modelValue:yt.value,"onUpdate:modelValue":k[44]||(k[44]=$=>yt.value=$),title:"Add Package",size:"md",variant:"left"},{actions:R(()=>[x(Re,{variant:"primary",onClick:Mb,disabled:!P.value.name.trim()},{default:R(()=>[...k[130]||(k[130]=[oe(" Add Package ",-1)])]),_:1},8,["disabled"]),x(Re,{variant:"secondary",onClick:k[43]||(k[43]=$=>yt.value=!1)},{default:R(()=>[...k[131]||(k[131]=[oe(" Cancel ",-1)])]),_:1})]),default:R(()=>[c("div",XO,[c("div",null,[k[125]||(k[125]=c("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Search CRAN Packages ",-1)),Ke(c("input",{"onUpdate:modelValue":k[39]||(k[39]=$=>m.value=$),onKeydown:Vb,type:"text",placeholder:"Type to search CRAN...",class:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 px-3 py-2 text-sm text-gray-900 dark:text-gray-100 font-mono focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500"},null,544),[[vo,m.value]])]),L.value.length>0?(v(),b("div",ZO,[(v(!0),b(se,null,ke(L.value,($,be)=>(v(),b("button",{key:$.name,onClick:_e=>Lf($),onMouseenter:_e=>C.value=be,class:Me(["w-full px-3 py-2 text-left border-b border-gray-200 dark:border-gray-700 last:border-b-0 transition",C.value===be?"bg-sky-50 dark:bg-sky-900/20":"hover:bg-gray-50 dark:hover:bg-gray-800"])},[c("div",t7,[c("div",s7,[c("div",i7,H($.name),1),$.title?(v(),b("div",n7,H($.title),1)):I("",!0),$.author?(v(),b("div",o7,H($.author),1)):I("",!0)]),c("div",r7," v"+H($.version),1)])],42,e7))),128))])):I("",!0),c("div",null,[k[126]||(k[126]=c("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Package Name ",-1)),Ke(c("input",{"onUpdate:modelValue":k[40]||(k[40]=$=>P.value.name=$),type:"text",placeholder:"dplyr",class:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 px-3 py-2 text-sm text-gray-900 dark:text-gray-100 font-mono focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500"},null,512),[[vo,P.value.name]]),P.value.source==="github"?(v(),b("p",l7," GitHub: user/repo (e.g., tidyverse/dplyr) ")):I("",!0),P.value.source==="bioc"?(v(),b("p",a7," Bioconductor: name only (e.g., DESeq2) ")):I("",!0)]),c("div",null,[k[129]||(k[129]=c("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Source ",-1)),c("div",u7,[Ke(c("select",{"onUpdate:modelValue":k[41]||(k[41]=$=>P.value.source=$),class:"w-full appearance-none rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 pl-3 pr-10 py-2 text-sm text-gray-900 dark:text-gray-100 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500"},[...k[127]||(k[127]=[c("option",{value:"cran"},"CRAN",-1),c("option",{value:"github"},"GitHub",-1),c("option",{value:"bioc"},"Bioconductor",-1)])],512),[[s0,P.value.source]]),k[128]||(k[128]=c("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},[c("svg",{class:"h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),c("p",d7,[P.value.source==="cran"?(v(),b(se,{key:0},[oe("CRAN: name only (e.g., dplyr)")],64)):P.value.source==="github"?(v(),b(se,{key:1},[oe("GitHub: user/repo (e.g., tidyverse/dplyr)")],64)):P.value.source==="bioc"?(v(),b(se,{key:2},[oe("Bioconductor: name only (e.g., DESeq2)")],64)):I("",!0)])]),c("div",null,[x(Le,{modelValue:P.value.auto_attach,"onUpdate:modelValue":k[42]||(k[42]=$=>P.value.auto_attach=$),label:"Auto-attach on scaffold()"},null,8,["modelValue"])])])]),_:1},8,["modelValue"]),x(nn,{modelValue:at.value,"onUpdate:modelValue":k[48]||(k[48]=$=>at.value=$),title:"Delete Project",size:"md"},{actions:R(()=>[x(Re,{variant:"secondary",onClick:Db},{default:R(()=>[...k[137]||(k[137]=[oe(" Cancel ",-1)])]),_:1}),x(Re,{variant:"primary",onClick:Tb,disabled:!No.value,class:"bg-red-600 hover:bg-red-500 focus-visible:outline-red-600 dark:bg-red-500 dark:hover:bg-red-400"},{default:R(()=>[oe(H(D.value==="delete"?"Delete Project":"Remove from Framework"),1)]),_:1},8,["disabled"])]),default:R(()=>[c("div",c7,[k[136]||(k[136]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Choose how you want to remove this project: ",-1)),c("label",{class:Me(["block cursor-pointer rounded-lg border-2 p-4 transition",D.value==="untrack"?"border-sky-500 bg-sky-50 dark:border-sky-600 dark:bg-sky-950/30":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"])},[c("div",f7,[Ke(c("input",{type:"radio",id:"delete-untrack",value:"untrack","onUpdate:modelValue":k[45]||(k[45]=$=>D.value=$),class:"mt-1"},null,512),[[gd,D.value]]),k[132]||(k[132]=c("div",{class:"flex-1"},[c("div",{class:"font-medium text-gray-900 dark:text-white"}," Remove from Framework "),c("div",{class:"text-sm text-gray-600 dark:text-gray-400 mt-1"}," Stop tracking this project in Framework. Files remain on disk. ")],-1))])],2),c("label",{class:Me(["block cursor-pointer rounded-lg border-2 p-4 transition",D.value==="delete"?"border-red-500 bg-red-50 dark:border-red-700 dark:bg-red-950/30":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"])},[c("div",h7,[Ke(c("input",{type:"radio",id:"delete-files",value:"delete","onUpdate:modelValue":k[46]||(k[46]=$=>D.value=$),class:"mt-1"},null,512),[[gd,D.value]]),k[133]||(k[133]=c("div",{class:"flex-1"},[c("div",{class:"font-medium text-red-700 dark:text-red-400"}," Delete Entire Project "),c("div",{class:"text-sm text-gray-600 dark:text-gray-400 mt-1"}," Permanently delete all files and folders. This cannot be undone. ")],-1))]),D.value==="delete"?(v(),b("div",p7,[c("div",m7,[k[134]||(k[134]=oe(" Type ",-1)),c("span",g7,H(n.value?.name),1),k[135]||(k[135]=oe(" to confirm: ",-1))]),x(q,{modelValue:S.value,"onUpdate:modelValue":k[47]||(k[47]=$=>S.value=$),placeholder:"Project name",class:"font-mono"},null,8,["modelValue"])])):I("",!0)],2)])]),_:1},8,["modelValue"])]))}},y7={class:"rounded-lg bg-gray-50 p-6 space-y-6 dark:bg-gray-800/50"},b7={key:0,class:"space-y-2"},k7={key:0,class:"text-lg font-semibold text-gray-900 dark:text-white"},x7={key:1,class:"text-sm text-gray-600 dark:text-gray-400"},w7={class:"space-y-6"},_7={key:1,class:"flex justify-end pt-4 border-t border-gray-200 dark:border-gray-700"},bt={__name:"SettingsPanel",props:{title:{type:String,default:""},description:{type:String,default:""}},setup(t){return(e,s)=>(v(),b("section",y7,[t.title||t.description?(v(),b("header",b7,[t.title?(v(),b("h2",k7,H(t.title),1)):I("",!0),t.description?(v(),b("p",x7,H(t.description),1)):I("",!0)])):I("",!0),c("div",w7,[vt(e.$slots,"default")]),e.$slots.actions?(v(),b("div",_7,[vt(e.$slots,"actions")])):I("",!0)]))}},S7={class:"space-y-3"},C7={key:0,class:"space-y-1"},A7={key:0,class:"text-sm font-semibold text-gray-900 dark:text-white"},V7={key:1,class:"text-xs text-gray-600 dark:text-gray-400"},M7={class:"space-y-3"},ys={__name:"SettingsBlock",props:{title:{type:String,default:""},description:{type:String,default:""}},setup(t){return(e,s)=>(v(),b("div",S7,[t.title||t.description?(v(),b("div",C7,[t.title?(v(),b("h3",A7,H(t.title),1)):I("",!0),t.description?(v(),b("p",V7,H(t.description),1)):I("",!0)])):I("",!0),c("div",M7,[vt(e.$slots,"default")])]))}},D7={class:"flex min-h-screen"},T7={class:"w-64 shrink-0 border-r border-gray-200 p-6 dark:border-gray-800"},$7={class:"space-y-1"},E7=["href","onClick"],O7=["fill","viewBox","stroke"],P7=["stroke-linecap","stroke-linejoin","stroke-width","fill","d"],j7={key:1,class:"ml-4 mt-2 space-y-0.5 border-l border-gray-200 pl-3 dark:border-gray-700"},L7=["href","onClick"],R7={key:2,class:"ml-4 mt-2 space-y-0.5 border-l border-gray-200 pl-3 dark:border-gray-700"},B7=["href","onClick"],I7={class:"rounded-md bg-gray-900 p-4 text-xs text-gray-200"},U7={class:"mt-4 flex justify-end"},N7={class:"mt-6 px-3"},z7={key:0,class:"flex-1 flex items-center justify-center"},F7={class:"flex-1 p-10 pb-24"},H7={class:"mt-8 space-y-10"},W7={id:"overview"},q7={class:"space-y-3"},K7={key:0,class:"text-gray-600 dark:text-gray-400"},G7={key:1,class:"text-gray-400 dark:text-gray-500 mx-1"},J7={key:2},Y7={key:1,class:"text-gray-600 dark:text-gray-400"},Q7={key:0},X7={key:1,class:"text-gray-600 dark:text-gray-400"},Z7={key:0},eP={key:1,class:"text-gray-600 dark:text-gray-400"},tP={key:0,class:"text-green-600 dark:text-green-400"},sP={key:1,class:"text-gray-600 dark:text-gray-400"},iP={key:0,class:"text-green-600 dark:text-green-400"},nP={key:1,class:"text-gray-600 dark:text-gray-400"},oP={key:0},rP={key:1,class:"text-gray-600 dark:text-gray-400"},lP={id:"connections-defaults"},aP={id:"basics"},uP={class:"space-y-5"},dP={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},cP={class:"space-y-5"},fP={id:"structure",class:"space-y-8"},hP={key:0,class:"space-y-6"},pP={class:"space-y-3"},mP=["onClick"],gP={class:"flex items-start gap-3"},vP={class:"font-semibold text-gray-900 dark:text-white"},yP={class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},bP={key:1,class:"space-y-6"},kP={key:0,class:"space-y-6"},xP={key:0},wP={class:"space-y-5"},_P=["value"],SP={class:"flex flex-wrap items-center justify-between gap-3"},CP={class:"flex flex-wrap gap-2 text-xs font-medium text-gray-600 dark:text-gray-400"},AP=["id"],VP={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},MP={class:"grid grid-cols-2 gap-3"},DP=["id"],TP={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},$P={class:"grid grid-cols-2 gap-3"},EP=["id"],OP={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},PP={class:"grid grid-cols-2 gap-3"},jP=["id"],LP={key:1,class:"space-y-6"},RP={key:0},BP={class:"space-y-5"},IP=["value"],UP={class:"flex flex-wrap items-center justify-between gap-3"},NP={class:"flex flex-wrap gap-2 text-xs font-medium text-gray-600 dark:text-gray-400"},zP=["id"],FP={class:"space-y-3"},HP={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},WP={class:"grid grid-cols-2 gap-3"},qP=["id"],KP={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},GP={class:"grid gap-4 sm:grid-cols-2"},JP={class:"space-y-3"},YP={class:"space-y-3"},QP=["id"],XP={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},ZP={class:"grid gap-4 sm:grid-cols-2"},ej={class:"space-y-3"},tj={class:"space-y-3"},sj=["id"],ij={class:"space-y-3"},nj={key:2,class:"space-y-6"},oj={key:0},rj={class:"space-y-5"},lj=["value"],aj={class:"flex flex-wrap items-center justify-between gap-3"},uj={class:"flex flex-wrap gap-2 text-xs font-medium text-gray-600 dark:text-gray-400"},dj=["id"],cj={class:"space-y-3"},fj=["id"],hj={class:"space-y-4"},pj={class:"space-y-2"},mj={class:"space-y-2"},gj={class:"space-y-2"},vj={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},yj={class:"grid grid-cols-2 gap-3"},bj={key:3,class:"space-y-6"},kj={key:0},xj={class:"space-y-5"},wj=["value"],_j={class:"flex flex-wrap items-center justify-between gap-3"},Sj={class:"flex flex-wrap gap-2 text-xs font-medium text-gray-600 dark:text-gray-400"},Cj=["id"],Aj={class:"space-y-3"},Vj=["id"],Mj={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},Dj={class:"grid grid-cols-2 gap-3"},Tj=["id"],$j={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-2"},Ej={class:"flex justify-end mt-3"},Oj={id:"templates",class:"space-y-8"},Pj={id:"templates-notebook"},jj={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-2"},Lj={class:"flex justify-end mt-3"},Rj={id:"templates-script"},Bj={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-2"},Ij={class:"flex justify-end mt-3"},Uj={id:"templates-presentation"},Nj={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-2"},zj={class:"flex justify-end mt-3"},Fj={id:"ai"},Hj={class:"space-y-2"},Wj={class:"flex justify-end mt-3"},qj={id:"git"},Kj={id:"scaffold"},Gj={id:"packages"},Jj={key:0,class:"space-y-3"},Yj={class:"flex flex-col gap-3"},Qj={class:"grid gap-3 grid-cols-[1fr_160px]"},Xj={class:"flex items-center justify-between"},Zj={key:1,class:"text-xs text-gray-500 dark:text-gray-400 mb-4"},eL={class:"mt-4"},tL={class:"text-sm text-gray-600 dark:text-gray-300 mb-4"},sL={class:"flex gap-3 justify-end"},iL={class:"text-sm text-gray-600 dark:text-gray-300"},nL={class:"flex gap-3 justify-end"},sd="overview",Rm="project",oL="Settings",rL="Manage defaults shared across new projects.",lL=`# Framework environment defaults
# Populate these values before running scaffold() or publishing.

# PostgreSQL connection
POSTGRES_HOST=127.0.0.1
POSTGRES_PORT=5432
POSTGRES_DB=postgres
POSTGRES_SCHEMA=public
POSTGRES_USER=postgres
POSTGRES_PASSWORD=


# S3-compatible storage (AWS S3, MinIO, etc.)
S3_ACCESS_KEY=
S3_SECRET_KEY=
S3_BUCKET=
S3_REGION=us-east-1
S3_ENDPOINT=`,aL={__name:"SettingsView",setup(t){const e=Xa(),s=Ya(),i=$o(),n=[{id:"overview",label:"Overview",slug:"overview",icon:Qa},{id:"basics",label:"Basics",slug:"basics",icon:Ic},{id:"structure",label:"Project Structure",slug:"project-structure",icon:ha},{id:"packages",label:"Packages",slug:"packages-dependencies",icon:Uc},{id:"ai",label:"AI Assistants",slug:"ai-assistants",svgIcon:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"},{id:"git",label:"Git & Hooks",slug:"git-hooks",svgIcon:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"},{id:"connections-defaults",label:"Connections",slug:"connections",icon:Nc},{id:"scaffold",label:"Scaffold Behavior",slug:"scaffold-behavior",svgIcon:"M256 64L576 64L576 576L64 576L64 192L256 192L256 64zM256 224L96 224L96 544L256 544L256 224zM288 544L544 544L544 96L288 96L288 544zM440 152L488 152L488 200L440 200L440 152zM392 152L392 200L344 200L344 152L392 152zM440 248L488 248L488 296L440 296L440 248zM392 248L392 296L344 296L344 248L392 248zM152 280L200 280L200 328L152 328L152 280zM392 344L392 392L344 392L344 344L392 344zM152 376L200 376L200 424L152 424L152 376zM488 344L488 392L440 392L440 344L488 344z",svgViewBox:"0 0 640 640",svgFill:"currentColor",svgStroke:"none",svgStrokeWidth:0,svgPathFill:"currentColor"},{id:"templates",label:"Templates",slug:"templates",icon:xd}],o=Object.fromEntries(n.map(({id:U,slug:w})=>[U,w])),r=Object.fromEntries(n.map(({id:U,slug:w})=>[w,U])),l={project:{label:"Standard Project Structure",description:"General-purpose analysis project with notebooks, scripts, and shared outputs.",directories:{functions:"R/functions",notebooks:"notebooks",scripts:"scripts",inputs_raw:"inputs/raw",inputs_intermediate:"inputs/intermediate",inputs_final:"inputs/final",docs:"docs",outputs_notebooks:"outputs/notebooks",outputs_tables:"outputs/tables",outputs_figures:"outputs/figures",outputs_models:"outputs/models",outputs_reports:"outputs/reports",cache:"outputs/cache",scratch:"scratch"},quarto:{render_dir:"outputs/notebooks"},notebook_template:"notebook",extra_directories:[]},project_sensitive:{label:"Privacy Sensitive Project Structure",description:"Projects handling PHI/PII with dedicated private/public data flows.",directories:{functions:"R/functions",notebooks:"notebooks",scripts:"scripts",inputs_private_raw:"inputs/private/raw",inputs_private_intermediate:"inputs/private/intermediate",inputs_private_final:"inputs/private/final",inputs_public_raw:"inputs/public/raw",inputs_public_intermediate:"inputs/public/intermediate",inputs_public_final:"inputs/public/final",outputs_private_tables:"outputs/private/tables",outputs_private_figures:"outputs/private/figures",outputs_private_models:"outputs/private/models",outputs_private_docs:"outputs/private/docs",outputs_private_data_final:"outputs/private/data_final",outputs_public_tables:"outputs/public/tables",outputs_public_figures:"outputs/public/figures",outputs_public_models:"outputs/public/models",outputs_public_docs:"outputs/public/docs",outputs_public_data_final:"outputs/public/data_final",cache:"outputs/private/cache",scratch:"scratch"},quarto:{render_dir:"outputs/public/docs"},notebook_template:"notebook",extra_directories:[]},presentation:{label:"Presentation Structure",description:"Single talk or slide deck with minimal analysis scaffolding.",directories:{presentation_source:"presentation.qmd",rendered_slides:"."},quarto:{render_dir:"."},notebook_template:"notebook",extra_directories:[]},course:{label:"Course Structure",description:"Courses with modules, assignments, and lecture materials.",directories:{data:"data",slides:"slides",assignments:"assignments",course_docs:"course_docs",readings:"readings",notebooks:"modules"},quarto:{render_dir:"course_docs"},notebook_template:"notebook",extra_directories:[]}},a=ae(JSON.parse(JSON.stringify(l))),d={project:"project",project_sensitive:"sensitive-project",presentation:"presentation",course:"course"},u=Object.fromEntries(Object.entries(d).map(([U,w])=>[w,U])),f={project:"Tune the standard analysis layoutfunctions, notebooks, inputs, and outputs live here by default.",project_sensitive:"Private and public inputs stay separate so sensitive data never leaves restricted folders.",presentation:"Control where your presentation source lives and where rendered slides are written.",course:"Adjust the folders used for slides, assignments, readings, and course documentation."},h=U=>String(U).replace(/_/g," ").replace(/\b\w/g,w=>w.toUpperCase()),g=ae(null),_=[{key:"functions",label:"Functions",hint:"R files here are sourced by scaffold(), so helper functions are available in every project session."},{key:"notebooks",label:"Notebooks",hint:"Where Quarto or R Markdown analysis notebooks live."},{key:"scripts",label:"Scripts",hint:"Reusable R scripts, job runners, or automation tasks."},{key:"docs",label:"Documentation",hint:"Codebooks, documentation, and other reference materials."}],p=[{key:"inputs_raw",label:"Raw data",hint:"Read-only exports from source systems."},{key:"inputs_intermediate",label:"Intermediate data",hint:"Data after light cleaning or pre-processing steps."},{key:"inputs_final",label:"Analysis-ready data",hint:"Final inputs ready for modeling or reporting."}],V=[{key:"outputs_notebooks",label:"Rendered notebooks",hint:"Compiled Quarto/R Markdown notebooks."},{key:"outputs_tables",label:"Tables",hint:"Publishable tables ready for reports or manuscripts."},{key:"outputs_figures",label:"Figures",hint:"Final plots and graphics."},{key:"outputs_models",label:"Models",hint:"Serialized models or model summaries."},{key:"outputs_reports",label:"Reports",hint:"Final reports and deliverables ready for publication."}],M=[{key:"cache",label:"Cache",hint:"Temporary artifacts (gitignored)."},{key:"scratch",label:"Scratch",hint:"Short-lived explorations (gitignored)."}],N=[{privateKey:"inputs_private_raw",publicKey:"inputs_public_raw",label:"Raw data",privateLabel:"Raw data (private)",publicLabel:"Raw data (public)"},{privateKey:"inputs_private_intermediate",publicKey:"inputs_public_intermediate",label:"Intermediate data",privateLabel:"Intermediate data (private)",publicLabel:"Intermediate data (public)"},{privateKey:"inputs_private_final",publicKey:"inputs_public_final",label:"Analysis-ready data",privateLabel:"Analysis-ready data (private)",publicLabel:"Analysis-ready data (public)"}],B=[{privateKey:"outputs_private_tables",publicKey:"outputs_public_tables",label:"Tables",privateLabel:"Tables (private)",publicLabel:"Tables (public)"},{privateKey:"outputs_private_figures",publicKey:"outputs_public_figures",label:"Figures",privateLabel:"Figures (private)",publicLabel:"Figures (public)"},{privateKey:"outputs_private_models",publicKey:"outputs_public_models",label:"Models",privateLabel:"Models (private)",publicLabel:"Models (public)"},{privateKey:"outputs_private_docs",publicKey:"outputs_public_docs",label:"Docs & reports",privateLabel:"Docs (private)",publicLabel:"Docs (public)"},{privateKey:"outputs_private_data_final",publicKey:"outputs_public_data_final",label:"Final data",privateLabel:"Final data (private)",publicLabel:"Final data (public)"}],W=(U,w)=>g.value?.project_types?.[U]?.directories?.[w]||{},G=(U,w)=>w.map(y=>{const K=W(U,y.key);return{key:y.key,label:K.label||y.label,hint:K.hint||y.hint||""}}),j=re(()=>G("project",_)),A=re(()=>G("project",p)),J=re(()=>G("project",V)),ee=re(()=>G("project",M)),me=U=>U.map(w=>{const y=W("project_sensitive",w.privateKey),K=W("project_sensitive",w.publicKey);return{...w,privateLabel:y.label||w.privateLabel,publicLabel:K.label||w.publicLabel}}),te=re(()=>me(N)),F=re(()=>me(B)),ce=re(()=>{const U=O.value;return!U||!g.value?.project_types?.[U]?.settings?[]:g.value.project_types[U].settings}),le={include_inputs:"inputs",include_scripts:"scripts",include_functions:"R/functions"},ve=re(()=>{const U=g.value?.project_types?.presentation?.optional_toggles||{};return{inputs:U.include_inputs?.default_path||le.include_inputs,scripts:U.include_scripts?.default_path||le.include_scripts,functions:U.include_functions?.default_path||le.include_functions}}),Y={"CLAUDE.md":"ai_claude","AGENTS.md":"ai_agents",".github/copilot-instructions.md":"ai_copilot"},X=[{id:"claude",label:"Claude Code",description:"Anthropic's IDE-focused assistant."},{id:"copilot",label:"GitHub Copilot",description:"Complements VS Code and JetBrains editors."},{id:"agents",label:"Multi-Agent (OpenAI Codex, Cursor, etc.)",description:"Shared instructions for multi-model orchestrators."}],Q=ae(sd),Ee=ae(!1),E=ae({projects_root:"",project_types:JSON.parse(JSON.stringify(a.value)),author:{name:"",email:"",affiliation:""},defaults:{project_type:"project",notebook_format:"quarto",ide:"vscode",positron:!1,use_git:!0,use_renv:!1,seed:"",seed_on_scaffold:!1,ai_support:!0,ai_assistants:["claude"],ai_canonical_file:"CLAUDE.md",scaffold:{source_all_functions:!0,set_theme_on_scaffold:!0,ggplot_theme:"theme_minimal",seed_on_scaffold:!1,seed:""},directories:JSON.parse(JSON.stringify(a.value.project.directories)),git_hooks:{ai_sync:!1,data_security:!1,check_sensitive_dirs:!1},packages:{use_renv:!1,default_packages:[{name:"dplyr",source:"cran",auto_attach:!0},{name:"ggplot2",source:"cran",auto_attach:!0}]},env:{raw:""}},git:{user_name:"",user_email:""},privacy:{secret_scan:!1,gitignore_template:"gitignore"}}),xe=Ys({includeInputs:!1,includeScripts:!1,includeFunctions:!1}),Oe=ae(!1),Qe=Ys({claude:!0,agents:!1,copilot:!1}),Ge=Ys({open:!1,name:"",title:"",description:"",contents:"",loading:!1}),yt=ae(""),at=ae({}),D=ae("grouped");ae(!1);const S=ae({}),m=ae(!1),L=ae([]),ie=ae([]),C=ae(null),P=ae(null),z=Ys({open:!1,projectTypeKey:null,projectTypeName:""}),Z=Ys({notebook:{loading:!1,contents:""},script:{loading:!1,contents:""},presentation:{loading:!1,contents:""},canonical:{loading:!1,contents:""},gitignore_project:{loading:!1,contents:""},gitignore_project_sensitive:{loading:!1,contents:""},gitignore_course:{loading:!1,contents:""},gitignore_presentation:{loading:!1,contents:""}}),de=re(()=>Object.entries(E.value.project_types||{})),ne=re(()=>de.value.map(([U,w])=>({key:U,label:(w.label||h(U)).replace(/ Structure$/i,""),slug:d[U]||U}))),we=[{id:"templates-notebook",label:"Notebook"},{id:"templates-script",label:"Script"},{id:"templates-presentation",label:"Presentation"}],ye=re(()=>"# Connections section temporarily disabled for debugging"),O=re(()=>{const U=i.params.subsection;return U?u[U]||Rm:null}),he=re(()=>{const U=O.value;return U&&E.value.project_types?.[U]||null}),je={overview:{title:"Overview",description:"Overview of your Framework global settings and preferences."},"connections-defaults":{title:"Connections",description:"Database and storage connections that every new project will inherit."},basics:{title:"Basics",description:"Essential settings for new projects."},author:{title:"Author Information",description:"Defaults that populate README files and notebook headers when scaffold() runs."},workflow:{title:"Editor & Workflow",description:"Control how Framework scaffolds projects in your preferred tools."},structure:{title:"Project Structure Defaults",description:"Choose a project type to configure its directory structure and default settings."},templates:{title:"Templates",description:"Edit the starter templates Framework uses for notebooks, scripts, and presentations."},ai:{title:"AI Assistants",description:"Manage assistant support, canonical context files, and sync hooks."},git:{title:"Git & Hooks",description:"Configure repository initialization, commit identity, git hooks, and security scanning."},scaffold:{title:"Scaffold Behavior",description:"Automatic actions Framework performs when scaffold() runs."},packages:{title:"Packages & Dependencies",description:"Define dependency defaults and auto-attach behavior for new projects."}},Ce=re(()=>je[Q.value]||{title:oL,description:rL}),Ae=re(()=>Q.value==="structure"&&he.value?he.value.label||h(O.value):Ce.value.title),Ue=re(()=>Q.value==="structure"&&he.value&&(he.value.description||f[O.value])||Ce.value.description);re(()=>E.value.privacy.gitignore_template||"gitignore"),re(()=>{const U=new Set,w=E.value.project_types||{},y=w.project_sensitive?.directories||{};for(const ue of Object.values(y))typeof ue=="string"&&ue.trim()&&ue.includes("private")&&U.add(ue.replace(/^\/+/,""));const K=w.project?.directories||{};return["cache","scratch"].forEach(ue=>{const pe=K[ue];typeof pe=="string"&&pe.trim()&&U.add(pe.replace(/^\/+/,""))}),Array.from(U).sort()});const Fe=re(()=>Y[E.value.defaults.ai_canonical_file]||"ai_claude"),Je=(U,w)=>{const y={section:U||void 0};return w&&(y.subsection=w),s.resolve({name:"settings",params:y}).href},qe=(U,w)=>{const y={};U&&(y.section=U),w&&(y.subsection=w);const K=i.params.section||void 0,ue=i.params.subsection||void 0,pe=y.section||void 0,Xe=y.subsection||void 0;return K===pe&&ue===Xe?Promise.resolve():s.replace({name:"settings",params:y}).catch(()=>{})};ze(()=>i.params.section,U=>{if(!U){qe(o[sd],void 0);return}const w=r[U]||sd;if(Q.value=w,!r[U]){qe(o[w],void 0);return}},{immediate:!0});const Ie=(U,w="")=>Array.isArray(U)?U.length>0?Ie(U[0],w):w:U??w,Ze=(U,w=!1)=>{const y=Ie(U,w);return typeof y=="boolean"?y:typeof y=="string"?["true","1","yes"].includes(y.toLowerCase()):!!y},wt=U=>Array.isArray(U)?U.flatMap(w=>Array.isArray(w)?w:[w]).filter(Boolean):[],as=(U={},w={})=>{const y={...w};for(const[K,ue]of Object.entries(U||{})){const pe=Ie(ue,null);pe===null||pe===""?delete y[K]:y[K]=pe}return y},vs=(U,w)=>{const y=a.value[U]||{directories:{},quarto:{},extra_directories:[]};return{label:Ie(w?.label,y.label||h(U)),description:Ie(w?.description,y.description||""),ggplot_theme:Ie(w?.ggplot_theme,"theme_minimal"),set_theme_on_scaffold:Ze(w?.set_theme_on_scaffold,!0),directories:as(w?.directories,y.directories),quarto:{render_dir:Ie(w?.quarto?.render_dir,y.quarto?.render_dir||".")},notebook_template:Ie(w?.notebook_template,y.notebook_template||"notebook"),extra_directories:Array.isArray(w?.extra_directories)?w.extra_directories:y.extra_directories||[]}},Ks=U=>{if(!U||!U.project_types)return;const w={};for(const[y,K]of Object.entries(U.project_types)){const ue=l[y]||{},pe={};for(const[Xe,Vt]of Object.entries(K.directories||{})){const Cs=ue.directories?.[Xe]||"";pe[Xe]=Ie(Vt?.default,Cs)}w[y]={label:Ie(K.label,ue.label||h(y)),description:Ie(K.description,ue.description||""),directories:pe,quarto:{render_dir:Ie(K.quarto?.render_dir?.default,ue.quarto?.render_dir||".")},notebook_template:Ie(K.notebook_template?.default,ue.notebook_template||"notebook"),optional_toggles:K.optional_toggles||{}}}for(const[y,K]of Object.entries(l))w[y]||(w[y]=JSON.parse(JSON.stringify(K)));a.value=w},Tt=(U,w,y)=>{if(!E.value.project_types?.presentation)return;const K=E.value.project_types.presentation.directories||(E.value.project_types.presentation.directories={});w?(!K[U]||K[U]==="")&&(K[U]=y):Object.prototype.hasOwnProperty.call(K,U)&&delete K[U]},ct=async(U,w=U)=>{if(Z[w]){Z[w].loading=!0;try{const y=await fetch(`/api/templates/${U}`);if(!y.ok)throw new Error("Request failed");const K=await y.json();Z[w].contents=K.contents||""}catch{e.error("Template Error","Unable to load template contents.")}finally{Z[w].loading=!1}}},Yt=async(U,w=U)=>{if(Z[w])try{if(!(await fetch(`/api/templates/${U}`,{method:"DELETE"})).ok)throw new Error("Request failed");await ct(U,w),e.success("Template Reset","Restored the packaged default template.")}catch{e.error("Reset Failed","Unable to restore the default template.")}},Wn=()=>{Yt(Fe.value,"canonical")};ze(Qe,U=>{if(Oe.value){console.log("[watch:aiAssistants] Skipped - loading");return}console.log("[watch:aiAssistants] Triggered",U);const w=[];U.claude&&w.push("claude"),U.copilot&&w.push("copilot"),U.agents&&w.push("agents"),E.value.defaults.ai_assistants=w},{deep:!0}),ze(()=>E.value.defaults.ai_canonical_file,async()=>{Oe.value||await ct(Fe.value,"canonical")}),ze(()=>E.value.defaults.git_hooks.data_security,U=>{Oe.value||E.value.privacy.secret_scan!==U&&(E.value.privacy.secret_scan=U)}),ze(()=>E.value.privacy.secret_scan,U=>{Oe.value||E.value.defaults.git_hooks.data_security!==U&&(E.value.defaults.git_hooks.data_security=U)}),ze(()=>xe.includeInputs,U=>{Oe.value||Tt("inputs",U,ve.value.inputs)}),ze(()=>xe.includeScripts,U=>{Oe.value||Tt("scripts",U,ve.value.scripts)}),ze(()=>xe.includeFunctions,U=>{Oe.value||Tt("functions",U,ve.value.functions)}),ze(at,U=>{Oe.value||(S.value=Gn(U))},{deep:!0});const Lo=U=>{(U.metaKey||U.ctrlKey)&&U.key==="s"&&(U.preventDefault(),dl())},Qt=(U,w)=>{const y=E.value.project_types?.[U]?.directories;return!!y&&Object.prototype.hasOwnProperty.call(y,w)},gn=U=>{a.value[U]&&(z.projectTypeKey=U,z.projectTypeName=E.value.project_types[U]?.label||h(U),z.open=!0)},il=()=>{const U=z.projectTypeKey;a.value[U]&&(E.value.project_types[U]=JSON.parse(JSON.stringify(a.value[U])),U==="presentation"&&(xe.includeInputs=!1,xe.includeScripts=!1,xe.includeFunctions=!1),z.open=!1,e.success("Reset Complete",`${z.projectTypeName} has been reset to defaults`))},qn=async()=>{try{Ge.loading=!0,await fetch(`/api/templates/${Ge.name}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:Ge.contents})}),e.success("Template Saved","Your changes have been saved."),Ge.open=!1}catch{e.error("Save Failed","Could not save template changes.")}finally{Ge.loading=!1}},nl=()=>{E.value.defaults.packages.default_packages||(E.value.defaults.packages.default_packages=[]),E.value.defaults.packages.default_packages.push({name:"",source:"cran",auto_attach:!1})},ol=U=>{E.value.defaults.packages.default_packages.splice(U,1)},Et=U=>{const w=document.getElementById(U);w&&w.scrollIntoView({behavior:"smooth",block:"start"})},rl=U=>{switch(U){case"project":return`project-${U}-inputs`;case"project_sensitive":return`project-${U}-workspaces`;case"presentation":return`project-${U}-primary`;case"course":return`project-${U}-core`;default:return`project-${U}`}},ll=async U=>{const w=n.find(K=>K.id===U);if(!w)return;const y=(w.id==="structure",void 0);await qe(w.slug,y),await On(),Et(w.id)},Ro=async U=>{const w=d[U]||d[Rm];await qe("project-structure",w),await On(),Et(rl(U))};ze(()=>O.value,(U,w)=>{Q.value==="structure"&&(!U||U===w||On(()=>Et(rl(U))))});const Bo=async()=>{try{console.log("[loadSettings] Starting load, setting isLoadingSettings = true"),Oe.value=!0;const[U,w]=await Promise.all([fetch("/api/settings/catalog"),fetch("/api/settings/get")]);if(!U.ok)throw new Error("Failed to load settings catalog");if(!w.ok)throw new Error("Failed to load settings payload");console.log("[loadSettings] Responses received, parsing JSON");const y=await U.json();g.value=y,Ks(y);const K=await w.json();if(console.log("[loadSettings] Settings data:",K),E.value.projects_root=Ie(K.global?.projects_root||K.projects_root,""),K.project_types){const ue={},pe={...a.value,...K.project_types};for(const[Xe,Vt]of Object.entries(pe))ue[Xe]=vs(Xe,Vt);E.value.project_types=ue}if(xe.includeInputs=Qt("presentation","inputs"),xe.includeScripts=Qt("presentation","scripts"),xe.includeFunctions=Qt("presentation","functions"),K.author&&(E.value.author={name:Ie(K.author.name,""),email:Ie(K.author.email,""),affiliation:Ie(K.author.affiliation,"")}),K.defaults){const ue=K.defaults;E.value.defaults.project_type=Ie(ue.project_type,"project"),E.value.defaults.notebook_format=Ie(ue.notebook_format,"quarto"),E.value.defaults.ide=Ie(ue.ide,"vscode"),E.value.defaults.positron=Ze(ue.positron,!1),E.value.defaults.use_git=Ze(ue.use_git,!0),E.value.defaults.use_renv=Ze(ue.use_renv,!1),E.value.defaults.ai_support=Ze(ue.ai_support,!0),E.value.defaults.ai_canonical_file=Ie(ue.ai_canonical_file,"CLAUDE.md");const pe=wt(ue.ai_assistants);pe.length&&(E.value.defaults.ai_assistants=pe,Qe.claude=pe.includes("claude"),Qe.copilot=pe.includes("copilot"),Qe.agents=pe.includes("agents")),ue.git_hooks&&(E.value.defaults.git_hooks={...E.value.defaults.git_hooks,...Object.fromEntries(Object.entries(ue.git_hooks).map(([Xe,Vt])=>[Xe,Ze(Vt,E.value.defaults.git_hooks[Xe])]))},E.value.privacy.secret_scan=E.value.defaults.git_hooks.data_security),ue.scaffold&&(E.value.defaults.scaffold={source_all_functions:Ze(ue.scaffold.source_all_functions,!0),set_theme_on_scaffold:Ze(ue.scaffold.set_theme_on_scaffold,!0),ggplot_theme:Ie(ue.scaffold.ggplot_theme,"theme_minimal"),seed_on_scaffold:Ze(ue.scaffold.seed_on_scaffold,!1),seed:Ie(ue.scaffold.seed,"")}),ue.packages&&(ue.packages.default_packages?E.value.defaults.packages={use_renv:Ze(ue.packages.use_renv,!1),default_packages:(ue.packages.default_packages||[]).map(Xe=>({name:Ie(Xe.name,""),source:Ie(Xe.source,"cran"),auto_attach:Ze(Xe.auto_attach,!1)}))}:Array.isArray(ue.packages)&&(E.value.defaults.packages={use_renv:!1,default_packages:ue.packages.map(Xe=>({name:Ie(Xe.name,""),source:Ie(Xe.source,"cran"),auto_attach:Ze(Xe.auto_attach,!1)}))})),ue.directories?E.value.defaults.directories={...E.value.defaults.directories,...Object.fromEntries(Object.entries(ue.directories).map(([Xe,Vt])=>[Xe,Ie(Vt,E.value.defaults.directories[Xe]||"")]))}:E.value.project_types.project&&(E.value.defaults.directories={...E.value.defaults.directories,...E.value.project_types.project.directories}),ul(ue.env),No(ue.connections)}K.defaults||(ul(null),No(null)),K.git&&(E.value.git={user_name:Ie(K.git.user_name,""),user_email:Ie(K.git.user_email,"")}),K.privacy?(E.value.privacy.secret_scan=Ze(K.privacy.secret_scan,E.value.defaults.git_hooks.data_security),E.value.privacy.gitignore_template=Ie(K.privacy.gitignore_template,"gitignore")):E.value.privacy.secret_scan=E.value.defaults.git_hooks.data_security,await ct(Fe.value,"canonical"),console.log("[loadSettings] Load complete, about to set isLoadingSettings = false")}catch(U){console.error("[loadSettings] Error during load:",U),e.error("Load Failed","Unable to load current settings.")}finally{Oe.value=!1,console.log("[loadSettings] isLoadingSettings now false")}},Io=re({get(){const U=E.value.defaults||{},w=U.git_hooks||{},y=E.value.git||{};return{initialize:U.use_git!==!1,user_name:y.user_name||"",user_email:y.user_email||"",hooks:{ai_sync:w.ai_sync||!1,data_security:w.data_security||!1,check_sensitive_dirs:w.check_sensitive_dirs||!1}}},set(U){if(Oe.value){console.log("[gitPanelModel setter] Blocked during load");return}E.value.defaults.use_git=U.initialize,E.value.git=E.value.git||{},E.value.git.user_name=U.user_name,E.value.git.user_email=U.user_email,E.value.defaults.git_hooks=E.value.defaults.git_hooks||{},E.value.defaults.git_hooks.ai_sync=U.hooks.ai_sync,E.value.defaults.git_hooks.data_security=U.hooks.data_security,E.value.defaults.git_hooks.check_sensitive_dirs=U.hooks.check_sensitive_dirs}}),al=re({get(){const U=E.value.defaults?.scaffold||{};return{source_all_functions:U.source_all_functions!==!1,set_theme_on_scaffold:U.set_theme_on_scaffold!==!1,ggplot_theme:U.ggplot_theme||"theme_minimal",seed_on_scaffold:U.seed_on_scaffold||!1,seed:U.seed||""}},set(U){if(Oe.value){console.log("[scaffoldPanelModel setter] Blocked during load");return}E.value.defaults.scaffold={...E.value.defaults.scaffold||{},source_all_functions:U.source_all_functions,set_theme_on_scaffold:U.set_theme_on_scaffold,ggplot_theme:U.ggplot_theme,seed_on_scaffold:U.seed_on_scaffold,seed:U.seed}}}),Gs=(U,w)=>{const y=E.value.project_types[U];return!y||!Array.isArray(y.extra_directories)?[]:y.extra_directories.filter(K=>K.type===w)},li=(U,w,y)=>{const K=E.value.project_types[U];if(!K)return;Array.isArray(K.extra_directories)||(K.extra_directories=[]);const ue=K.extra_directories.filter(Xe=>Xe&&Xe.type!==w),pe=y.map(Xe=>({...Xe,type:w}));K.extra_directories=[...ue,...pe]},Os=(U,w,y,K)=>{if(!U)return null;if(!/^[a-zA-Z0-9_]+$/.test(U))return"Only letters, numbers, and underscores allowed";const ue=E.value.project_types[w];if(!ue||!Array.isArray(ue.extra_directories))return null;if(ue.extra_directories.filter(Mt=>Mt.type===y).findIndex((Mt,vn)=>vn!==K&&Mt.key===U)!==-1)return"Duplicate key within this section";const Cs=ue.extra_directories.filter(Mt=>Mt.type!==y).find(Mt=>Mt.key===U);return Cs?`Key already used in ${Cs.type} directories`:null},Ps=U=>!U||U.trim()===""?null:U.startsWith("/")?"Must be relative (no leading slash)":U.includes("..")?"Path traversal not allowed (..)":null,Kn=(U="")=>{const w={};return U.split(/\r?\n/).forEach(y=>{const K=y.trim();if(!K||K.startsWith("#")||!K.includes("="))return;const[ue,...pe]=K.split("=");w[ue.trim()]=pe.join("=").replace(/^"|"$/g,"")}),w},Uo=(U={})=>Object.entries(U).map(([w,y])=>`${w}=${y??""}`).join(`
`);function Gn(U={}){const w=Object.entries(U);return w.length?w.reduce((y,[K,ue])=>{const pe=K.includes("_")?K.split("_")[0]:"Other";return y[pe]||(y[pe]={}),y[pe][K]={defined:!!ue,used:!1,used_in:[],value:ue},y},{}):{}}const ul=U=>{let w=lL;typeof U=="string"?w=U:U?.raw?w=U.raw:U?.variables&&(w=Uo(U.variables)),yt.value=w,at.value=Kn(w),S.value=Gn(Kn(w)),D.value="grouped"},No=U=>{const w=U?.databases||{},y=U?.storage_buckets||{};C.value=U?.default_database||null,P.value=U?.default_storage_bucket||null;const K=Object.entries(w).filter(([pe])=>pe!=="framework_db").map(([pe,Xe])=>({_id:pe,name:pe,...Xe})),ue=Object.entries(y).map(([pe,Xe])=>({_id:pe,name:pe,...Xe}));L.value=K,ie.value=ue},dl=async()=>{try{Ee.value=!0;const U=E.value.projects_root?.trim()||"",w=JSON.parse(JSON.stringify(E.value));w.global||(w.global={}),w.global.projects_root=U||null,delete w.projects_root,w.defaults.scaffold&&(w.defaults.scaffold.seed=w.defaults.scaffold.seed===""?null:w.defaults.scaffold.seed),w.defaults.seed=w.defaults.seed===""?null:w.defaults.seed,w.defaults.packages&&w.defaults.packages.default_packages&&(w.defaults.packages.default_packages=(w.defaults.packages.default_packages||[]).filter(Vt=>Vt.name&&Vt.name.trim()!=="")),w.defaults.env={raw:yt.value||""};const y={};L.value.forEach(Vt=>{const{_id:Cs,name:Mt,...vn}=Vt;y[Mt]=vn});const K={};ie.value.forEach(Vt=>{const{_id:Cs,name:Mt,...vn}=Vt;K[Mt]=vn}),w.defaults.connections={default_database:C.value,default_storage_bucket:P.value,databases:y,storage_buckets:K},w.defaults.directories=w.project_types?.project?.directories||w.defaults.directories,w.defaults.git_hooks.data_security=w.privacy.secret_scan,w.git=w.git||{user_name:"",user_email:""};for(const Vt in w.project_types){const Cs=w.project_types[Vt];Cs.extra_directories&&Array.isArray(Cs.extra_directories)&&(Cs.extra_directories=Cs.extra_directories.filter(Mt=>Mt.key&&Mt.key.trim()!==""&&Mt.label&&Mt.label.trim()!==""&&Mt.path&&Mt.path.trim()!==""&&Mt.type&&Mt.type.trim()!==""))}const ue=await fetch("/api/settings/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(w)});if(!ue.ok){const Vt=await ue.text();throw new Error("Failed to save settings")}const pe=await ue.json();if((await Promise.all([fetch("/api/templates/notebook",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:Z.notebook.contents})}),fetch("/api/templates/script",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:Z.script.contents})}),fetch("/api/templates/presentation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:Z.presentation.contents})}),fetch("/api/templates/gitignore-project",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:Z.gitignore_project.contents})}),fetch("/api/templates/gitignore-project_sensitive",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:Z.gitignore_project_sensitive.contents})}),fetch("/api/templates/gitignore-course",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:Z.gitignore_course.contents})}),fetch("/api/templates/gitignore-presentation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:Z.gitignore_presentation.contents})})])).some(Vt=>!Vt.ok))throw new Error("Template save failed");e.success("Settings Saved","Your global defaults were updated.")}catch(U){console.error("Failed to save settings:",U),e.error("Save Failed",U?.message||"Review your changes and try again.")}finally{Ee.value=!1}};return os(()=>{Bo(),ct("notebook"),ct("script"),ct("presentation"),ct("gitignore-project","gitignore_project"),ct("gitignore-project_sensitive","gitignore_project_sensitive"),ct("gitignore-course","gitignore_course"),ct("gitignore-presentation","gitignore_presentation"),ct(Fe.value,"canonical"),window.addEventListener("keydown",Lo)}),To(()=>{window.removeEventListener("keydown",Lo)}),(U,w)=>(v(),b("div",D7,[c("nav",T7,[w[84]||(w[84]=c("h2",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"New Project Defaults",-1)),c("div",$7,[(v(),b(se,null,ke(n,y=>c("div",{key:y.id},[y.id==="basics"?(v(),ge(ja,{key:0},{default:R(()=>[...w[81]||(w[81]=[oe("Settings",-1)])]),_:1})):I("",!0),c("a",{href:Je(y.slug),onClick:It(K=>ll(y.id),["prevent"]),class:Me(["flex items-center gap-2 px-3 py-2 rounded-md text-sm transition",Q.value===y.id?"bg-sky-50 text-sky-700 font-medium dark:bg-sky-900/20 dark:text-sky-400":"text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-800"])},[y.icon?(v(),ge(Es(y.icon),{key:0,class:"h-4 w-4"})):y.svgIcon?(v(),b("svg",{key:1,class:"h-4 w-4",fill:y.svgFill??"none",viewBox:y.svgViewBox??"0 0 24 24",stroke:y.svgStroke??"currentColor"},[c("path",{"stroke-linecap":y.svgStrokeLinecap??"round","stroke-linejoin":y.svgStrokeLinejoin??"round","stroke-width":y.svgStrokeWidth??2,fill:y.svgPathFill??"none",d:y.svgIcon},null,8,P7)],8,O7)):I("",!0),oe(" "+H(y.label),1)],10,E7),y.id==="structure"&&Q.value==="structure"?(v(),b("div",j7,[(v(!0),b(se,null,ke(ne.value,K=>(v(),b("a",{key:K.key,href:Je("project-structure",K.slug),onClick:It(ue=>Ro(K.key),["prevent"]),class:Me(["block rounded-md py-1 pl-4 pr-2 text-xs font-medium transition",O.value===K.key?"bg-sky-100 text-sky-700 dark:bg-sky-900/30 dark:text-sky-300":"text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-800"])},H(K.label),11,L7))),128))])):y.id==="templates"&&Q.value==="templates"?(v(),b("div",R7,[(v(),b(se,null,ke(we,K=>c("a",{key:K.id,href:`#${K.id}`,onClick:It(ue=>Et(K.id),["prevent"]),class:"block rounded-md py-1 pl-4 pr-2 text-xs font-medium text-gray-600 transition hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-800"},H(K.label),9,B7)),64))])):I("",!0)])),64)),x(nn,{modelValue:m.value,"onUpdate:modelValue":w[1]||(w[1]=y=>m.value=y),title:".env Variables Preview"},{default:R(()=>[w[83]||(w[83]=c("p",{class:"mb-3 text-sm text-gray-600 dark:text-gray-400"},[oe(" Copy these entries into your projects "),c("code",null,".env"),oe(" file so the connections above resolve properly. ")],-1)),c("pre",I7,H(ye.value),1),c("div",U7,[x(Re,{variant:"primary",onClick:w[0]||(w[0]=y=>m.value=!1)},{default:R(()=>[...w[82]||(w[82]=[oe("Close",-1)])]),_:1})])]),_:1},8,["modelValue"])]),c("div",N7,[x(Re,{variant:"primary",size:"md",disabled:Ee.value,onClick:dl,class:"w-full"},{default:R(()=>[oe(H(Ee.value?"Saving":"Save Changes"),1)]),_:1},8,["disabled"])])]),Oe.value?(v(),b("div",z7,[...w[85]||(w[85]=[c("div",{class:"text-center"},[c("div",{class:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-sky-600 border-r-transparent"}),c("p",{class:"mt-4 text-sm text-gray-600 dark:text-gray-400"},"Loading settings...")],-1)])])):I("",!0),Ke(c("div",F7,[x(Eo,{title:Ae.value,description:Ue.value},null,8,["title","description"]),c("div",H7,[Ke(c("div",W7,[c("div",q7,[x(Ds,{title:"Basics",onClick:w[2]||(w[2]=y=>Q.value="basics")},{default:R(()=>[E.value.projects_root||E.value.author&&E.value.author.name?(v(),b(se,{key:0},[E.value.projects_root?(v(),b("span",K7,H(E.value.projects_root),1)):I("",!0),E.value.projects_root&&E.value.author&&E.value.author.name?(v(),b("span",G7,"")):I("",!0),E.value.author&&E.value.author.name?(v(),b("span",J7,H(E.value.author.name),1)):I("",!0)],64)):(v(),b("span",Y7,"Not set"))]),_:1}),x(Ds,{title:"Project Structure",onClick:w[3]||(w[3]=y=>Q.value="structure")},{default:R(()=>[E.value.defaults&&E.value.defaults.project_type?(v(),b("span",Q7,H(E.value.defaults.project_type),1)):(v(),b("span",X7,"Not set"))]),_:1}),x(Ds,{title:"Notebooks & Scripts",onClick:w[4]||(w[4]=y=>Q.value="notebooksScripts")},{default:R(()=>[E.value.defaults&&E.value.defaults.notebook_format?(v(),b("span",Z7,H(E.value.defaults.notebook_format),1)):(v(),b("span",eP,"quarto"))]),_:1}),x(Ds,{title:"AI Assistants",onClick:w[5]||(w[5]=y=>Q.value="ai")},{default:R(()=>[E.value.ai_config&&E.value.ai_config.enabled?(v(),b("span",tP,"Enabled")):(v(),b("span",sP,"Disabled"))]),_:1}),x(Ds,{title:"Git & Hooks",onClick:w[6]||(w[6]=y=>Q.value="git")},{default:R(()=>[E.value.git&&E.value.git.auto_init?(v(),b("span",iP,"Auto-initialize repositories")):(v(),b("span",nP,"Manual initialization"))]),_:1}),x(Ds,{title:"Packages",onClick:w[7]||(w[7]=y=>Q.value="packages")},{default:R(()=>[E.value.packages&&E.value.packages.length>0?(v(),b("span",oP,H(E.value.packages.length)+" package"+H(E.value.packages.length!==1?"s":""),1)):(v(),b("span",rP,"No default packages"))]),_:1})])],512),[[nt,Q.value==="overview"]]),Ke(c("div",lP,[x(Df,{"database-connections":L.value,"onUpdate:databaseConnections":w[8]||(w[8]=y=>L.value=y),"s3-connections":ie.value,"onUpdate:s3Connections":w[9]||(w[9]=y=>ie.value=y),"default-database":C.value,"onUpdate:defaultDatabase":w[10]||(w[10]=y=>C.value=y),"default-storage-bucket":P.value,"onUpdate:defaultStorageBucket":w[11]||(w[11]=y=>P.value=y)},null,8,["database-connections","s3-connections","default-database","default-storage-bucket"])],512),[[nt,Q.value==="connections-defaults"]]),Ke(c("div",aP,[x(bt,{description:"Essential project defaults that apply to all new projects."},{default:R(()=>[x(ys,null,{default:R(()=>[c("div",uP,[x(q,{modelValue:E.value.projects_root,"onUpdate:modelValue":w[12]||(w[12]=y=>E.value.projects_root=y),label:"Default Projects Directory",hint:"New projects will be created in this directory by default",placeholder:"e.g., ~/projects or /Users/yourname/code"},null,8,["modelValue"]),c("div",null,[w[87]||(w[87]=c("label",{class:"block text-sm font-semibold text-gray-900 dark:text-white mb-3"}," Supported Editors ",-1)),x(yi,{modelValue:E.value.defaults.positron,"onUpdate:modelValue":w[13]||(w[13]=y=>E.value.defaults.positron=y),id:"support-positron-defaults",description:"Enable Positron-specific workspace and settings files"},{default:R(()=>[...w[86]||(w[86]=[oe(" Positron ",-1)])]),_:1},8,["modelValue"]),w[88]||(w[88]=c("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-3"}," RStudio supported by default ",-1))]),x(Ft,{modelValue:E.value.defaults.notebook_format,"onUpdate:modelValue":w[14]||(w[14]=y=>E.value.defaults.notebook_format=y),label:"Default Notebook Format",hint:"Format used when creating new notebooks"},{default:R(()=>[...w[89]||(w[89]=[c("option",{value:"quarto"},"Quarto (.qmd)",-1),c("option",{value:"rmarkdown"},"R Markdown (.Rmd)",-1)])]),_:1},8,["modelValue"]),c("div",dP,[w[90]||(w[90]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"}," Author Information ",-1)),w[91]||(w[91]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-5"}," Used as defaults when scaffold() creates README files and notebook headers, so every project starts with the right attribution. ",-1)),c("div",cP,[x(q,{modelValue:E.value.author.name,"onUpdate:modelValue":w[15]||(w[15]=y=>E.value.author.name=y),label:"Your Name",placeholder:"Your Name"},null,8,["modelValue"]),x(q,{modelValue:E.value.author.email,"onUpdate:modelValue":w[16]||(w[16]=y=>E.value.author.email=y),type:"email",label:"Email",placeholder:"your.email@example.com"},null,8,["modelValue"]),x(q,{modelValue:E.value.author.affiliation,"onUpdate:modelValue":w[17]||(w[17]=y=>E.value.author.affiliation=y),label:"Affiliation",placeholder:"Organization"},null,8,["modelValue"])])])])]),_:1})]),_:1})],512),[[nt,Q.value==="basics"]]),Ke(c("div",fP,[O.value?he.value?(v(),b("div",bP,[O.value==="project"?(v(),b("div",kP,[ce.value&&ce.value.length>0?(v(),b("div",xP,[x(bt,{title:"Project Settings",description:"Default settings applied when creating new projects of this type."},{default:R(()=>[x(ys,null,{default:R(()=>[c("div",wP,[(v(!0),b(se,null,ke(ce.value,y=>(v(),b(se,{key:y.id},[y.control==="toggle"?(v(),ge(Le,{key:0,modelValue:E.value.project_types[O.value][y.id],"onUpdate:modelValue":K=>E.value.project_types[O.value][y.id]=K,label:y.label,description:y.description},null,8,["modelValue","onUpdate:modelValue","label","description"])):y.control==="select"?(v(),ge(Ft,{key:1,modelValue:E.value.project_types[O.value][y.id],"onUpdate:modelValue":K=>E.value.project_types[O.value][y.id]=K,label:y.label,hint:y.hint},{default:R(()=>[(v(!0),b(se,null,ke(y.options,K=>(v(),b("option",{key:K.value,value:K.value},H(K.label),9,_P))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","label","hint"])):y.control==="text"?(v(),ge(q,{key:2,modelValue:E.value.project_types[O.value][y.id],"onUpdate:modelValue":K=>E.value.project_types[O.value][y.id]=K,label:y.label,hint:y.hint,placeholder:y.placeholder},null,8,["modelValue","onUpdate:modelValue","label","hint","placeholder"])):I("",!0)],64))),128))])]),_:1})]),_:1})])):I("",!0),c("div",SP,[c("div",CP,[c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:w[18]||(w[18]=y=>Et(`project-${O.value}-inputs`))}," Inputs "),c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:w[19]||(w[19]=y=>Et(`project-${O.value}-workspaces`))}," Workspaces "),c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:w[20]||(w[20]=y=>Et(`project-${O.value}-outputs`))}," Outputs "),c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:w[21]||(w[21]=y=>Et(`project-${O.value}-utility`))}," Utility "),c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:w[22]||(w[22]=y=>Et(`project-${O.value}-gitignore`))}," .gitignore ")]),x(Re,{variant:"secondary",size:"sm",class:"mt-3 sm:mt-0",onClick:w[23]||(w[23]=y=>gn(O.value))},{default:R(()=>[...w[92]||(w[92]=[oe(" Reset to Defaults ",-1)])]),_:1})]),c("div",{id:`project-${O.value}-inputs`},[x(bt,{title:"Inputs",description:"Define the read-only locations where raw and prepared data live."},{default:R(()=>[(v(!0),b(se,null,ke(A.value,y=>(v(),b(se,{key:y.key},[Qt(O.value,y.key)?(v(),ge(q,{key:0,modelValue:E.value.project_types[O.value].directories[y.key],"onUpdate:modelValue":K=>E.value.project_types[O.value].directories[y.key]=K,label:y.label,hint:y.hint,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label","hint"])):I("",!0)],64))),128)),c("div",VP,[w[93]||(w[93]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Input Directories",-1)),x(gt,{"model-value":Gs(O.value,"input"),"onUpdate:modelValue":w[24]||(w[24]=y=>li(O.value,"input",y)),"add-label":"Add Input Directory","default-item":()=>({key:"",label:"",path:"",type:"input",_id:Date.now()})},{default:R(({item:y,index:K,update:ue})=>[c("div",MP,[x(q,{"model-value":y.key,"onUpdate:modelValue":pe=>ue("key",pe),label:"Key",placeholder:"e.g., inputs_archive",error:Os(y.key,O.value,"input",K),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),x(q,{"model-value":y.label,"onUpdate:modelValue":pe=>ue("label",pe),label:"Label",placeholder:"e.g., Archive",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":y.path,"onUpdate:modelValue":pe=>ue("path",pe),label:"Path",placeholder:"e.g., inputs/archive",error:Ps(y.path),prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])])]),_:1})],8,AP),c("div",{id:`project-${O.value}-workspaces`},[x(bt,{title:"Workspaces",description:"Functions, notebooks, and scripts scaffolded into every project."},{default:R(()=>[(v(!0),b(se,null,ke(j.value,y=>(v(),b(se,{key:y.key},[Qt(O.value,y.key)?(v(),ge(q,{key:0,modelValue:E.value.project_types[O.value].directories[y.key],"onUpdate:modelValue":K=>E.value.project_types[O.value].directories[y.key]=K,label:y.label,hint:y.hint,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label","hint"])):I("",!0)],64))),128)),c("div",TP,[w[94]||(w[94]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Workspace Directories",-1)),x(gt,{"model-value":Gs(O.value,"workspace"),"onUpdate:modelValue":w[25]||(w[25]=y=>li(O.value,"workspace",y)),"add-label":"Add Workspace Directory","default-item":()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:R(({item:y,index:K,update:ue})=>[c("div",$P,[x(q,{"model-value":y.key,"onUpdate:modelValue":pe=>ue("key",pe),label:"Key",placeholder:"e.g., tests",error:Os(y.key,O.value,"workspace",K),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),x(q,{"model-value":y.label,"onUpdate:modelValue":pe=>ue("label",pe),label:"Label",placeholder:"e.g., Tests",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":y.path,"onUpdate:modelValue":pe=>ue("path",pe),label:"Path",placeholder:"e.g., tests",error:Ps(y.path),prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])])]),_:1})],8,DP),c("div",{id:`project-${O.value}-outputs`},[x(bt,{title:"Outputs",description:"Outputs are public by default so results are easy to share."},{default:R(()=>[(v(!0),b(se,null,ke(J.value,y=>(v(),b(se,{key:y.key},[Qt(O.value,y.key)?(v(),ge(q,{key:0,modelValue:E.value.project_types[O.value].directories[y.key],"onUpdate:modelValue":K=>E.value.project_types[O.value].directories[y.key]=K,label:y.label,hint:y.hint,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label","hint"])):I("",!0)],64))),128)),x(q,{modelValue:E.value.project_types[O.value].quarto.render_dir,"onUpdate:modelValue":w[26]||(w[26]=y=>E.value.project_types[O.value].quarto.render_dir=y),label:"Notebook output directory",hint:"Rendered notebooks and reports are written here by default.",prefix:"/",monospace:""},null,8,["modelValue"]),c("div",OP,[w[95]||(w[95]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Output Directories",-1)),x(gt,{"model-value":Gs(O.value,"output"),"onUpdate:modelValue":w[27]||(w[27]=y=>li(O.value,"output",y)),"add-label":"Add Output Directory","default-item":()=>({key:"",label:"",path:"",type:"output",_id:Date.now()})},{default:R(({item:y,index:K,update:ue})=>[c("div",PP,[x(q,{"model-value":y.key,"onUpdate:modelValue":pe=>ue("key",pe),label:"Key",placeholder:"e.g., outputs_animations",error:Os(y.key,O.value,"output",K),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),x(q,{"model-value":y.label,"onUpdate:modelValue":pe=>ue("label",pe),label:"Label",placeholder:"e.g., Animations",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":y.path,"onUpdate:modelValue":pe=>ue("path",pe),label:"Path",placeholder:"e.g., outputs/animations",error:Ps(y.path),prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])])]),_:1})],8,EP),c("div",{id:`project-${O.value}-utility`},[x(bt,{title:"Utility directories",description:"Cache and scratch folders are gitignored so temporary artifacts never leak into version control."},{default:R(()=>[(v(!0),b(se,null,ke(ee.value,y=>(v(),b(se,{key:y.key},[Qt(O.value,y.key)?(v(),ge(q,{key:0,modelValue:E.value.project_types[O.value].directories[y.key],"onUpdate:modelValue":K=>E.value.project_types[O.value].directories[y.key]=K,label:y.label,hint:y.hint,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label","hint"])):I("",!0)],64))),128))]),_:1})],8,jP)])):O.value==="project_sensitive"?(v(),b("div",LP,[ce.value&&ce.value.length>0?(v(),b("div",RP,[x(bt,{title:"Project Settings",description:"Default settings applied when creating new projects of this type."},{default:R(()=>[x(ys,null,{default:R(()=>[c("div",BP,[(v(!0),b(se,null,ke(ce.value,y=>(v(),b(se,{key:y.id},[y.control==="toggle"?(v(),ge(Le,{key:0,modelValue:E.value.project_types[O.value][y.id],"onUpdate:modelValue":K=>E.value.project_types[O.value][y.id]=K,label:y.label,description:y.description},null,8,["modelValue","onUpdate:modelValue","label","description"])):y.control==="select"?(v(),ge(Ft,{key:1,modelValue:E.value.project_types[O.value][y.id],"onUpdate:modelValue":K=>E.value.project_types[O.value][y.id]=K,label:y.label,hint:y.hint},{default:R(()=>[(v(!0),b(se,null,ke(y.options,K=>(v(),b("option",{key:K.value,value:K.value},H(K.label),9,IP))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","label","hint"])):y.control==="text"?(v(),ge(q,{key:2,modelValue:E.value.project_types[O.value][y.id],"onUpdate:modelValue":K=>E.value.project_types[O.value][y.id]=K,label:y.label,hint:y.hint,placeholder:y.placeholder},null,8,["modelValue","onUpdate:modelValue","label","hint","placeholder"])):I("",!0)],64))),128))])]),_:1})]),_:1})])):I("",!0),c("div",UP,[c("div",NP,[c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:w[28]||(w[28]=y=>Et(`project-${O.value}-workspaces`))}," Workspaces "),c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:w[29]||(w[29]=y=>Et(`project-${O.value}-inputs-private`))}," Inputs "),c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:w[30]||(w[30]=y=>Et(`project-${O.value}-outputs-private`))}," Outputs "),c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:w[31]||(w[31]=y=>Et(`project-${O.value}-utility`))}," Utility ")]),x(Re,{variant:"secondary",size:"sm",class:"mt-3 sm:mt-0",onClick:w[32]||(w[32]=y=>gn(O.value))},{default:R(()=>[...w[96]||(w[96]=[oe(" Reset to Defaults ",-1)])]),_:1})]),c("div",{id:`project-${O.value}-workspaces`},[x(bt,{title:"Workspaces",description:"Module locations for notebooks, scripts, and helper functions."},{default:R(()=>[c("div",FP,[(v(!0),b(se,null,ke(j.value,y=>(v(),b(se,{key:`sensitive-${y.key}`},[Qt(O.value,y.key)?(v(),ge(q,{key:0,modelValue:E.value.project_types[O.value].directories[y.key],"onUpdate:modelValue":K=>E.value.project_types[O.value].directories[y.key]=K,label:y.label,hint:y.hint,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label","hint"])):I("",!0)],64))),128))]),c("div",HP,[w[97]||(w[97]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Workspace Directories",-1)),x(gt,{"model-value":Gs(O.value,"workspace"),"onUpdate:modelValue":w[33]||(w[33]=y=>li(O.value,"workspace",y)),"add-label":"Add Workspace Directory","default-item":()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:R(({item:y,index:K,update:ue})=>[c("div",WP,[x(q,{"model-value":y.key,"onUpdate:modelValue":pe=>ue("key",pe),label:"Key",placeholder:"e.g., tests",error:Os(y.key,O.value,"workspace",K),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),x(q,{"model-value":y.label,"onUpdate:modelValue":pe=>ue("label",pe),label:"Label",placeholder:"e.g., Tests",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":y.path,"onUpdate:modelValue":pe=>ue("path",pe),label:"Path",placeholder:"e.g., tests",error:Ps(y.path),prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])])]),_:1})],8,zP),c("div",{id:`project-${O.value}-inputs-private`},[x(bt,{title:"Inputs",description:"Keep private inputs compartmentalized; publish processed outputs into public folders when ready."},{default:R(()=>[w[100]||(w[100]=c("div",{class:"grid gap-4 sm:grid-cols-2 text-xs font-semibold uppercase text-gray-500 dark:text-gray-400"},[c("div",null,"Private"),c("div",null,"Public")],-1)),(v(!0),b(se,null,ke(te.value,y=>(v(),b("div",{key:y.privateKey,class:"grid gap-4 sm:grid-cols-2"},[Qt(O.value,y.privateKey)?(v(),ge(q,{key:0,modelValue:E.value.project_types[O.value].directories[y.privateKey],"onUpdate:modelValue":K=>E.value.project_types[O.value].directories[y.privateKey]=K,label:y.privateLabel||`${y.label} (private)`,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label"])):I("",!0),Qt(O.value,y.publicKey)?(v(),ge(q,{key:1,modelValue:E.value.project_types[O.value].directories[y.publicKey],"onUpdate:modelValue":K=>E.value.project_types[O.value].directories[y.publicKey]=K,label:y.publicLabel||`${y.label} (public)`,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label"])):I("",!0)]))),128)),c("div",KP,[c("div",GP,[c("div",null,[w[98]||(w[98]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Private Inputs",-1)),x(gt,{"model-value":Gs(O.value,"input_private"),"onUpdate:modelValue":w[34]||(w[34]=y=>li(O.value,"input_private",y)),"add-label":"Add Private Input","default-item":()=>({key:"",label:"",path:"",type:"input_private",_id:Date.now()})},{default:R(({item:y,index:K,update:ue})=>[c("div",JP,[x(q,{"model-value":y.key,"onUpdate:modelValue":pe=>ue("key",pe),label:"Key",placeholder:"e.g., inputs_archive",error:Os(y.key,O.value,"input_private",K),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),x(q,{"model-value":y.label,"onUpdate:modelValue":pe=>ue("label",pe),label:"Label",placeholder:"e.g., Archive",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":y.path,"onUpdate:modelValue":pe=>ue("path",pe),label:"Path",placeholder:"e.g., inputs/archive",error:Ps(y.path),prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])]),c("div",null,[w[99]||(w[99]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Public Inputs",-1)),x(gt,{"model-value":Gs(O.value,"input_public"),"onUpdate:modelValue":w[35]||(w[35]=y=>li(O.value,"input_public",y)),"add-label":"Add Public Input","default-item":()=>({key:"",label:"",path:"",type:"input_public",_id:Date.now()})},{default:R(({item:y,index:K,update:ue})=>[c("div",YP,[x(q,{"model-value":y.key,"onUpdate:modelValue":pe=>ue("key",pe),label:"Key",placeholder:"e.g., inputs_public_archive",error:Os(y.key,O.value,"input_public",K),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),x(q,{"model-value":y.label,"onUpdate:modelValue":pe=>ue("label",pe),label:"Label",placeholder:"e.g., Archive (Public)",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":y.path,"onUpdate:modelValue":pe=>ue("path",pe),label:"Path",placeholder:"e.g., inputs_public/archive",error:Ps(y.path),prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])])])])]),_:1})],8,qP),c("div",{id:`project-${O.value}-outputs-private`},[x(bt,{title:"Outputs",description:"Review outputs before promotion; private folders remain gitignored while public copies are ready to share."},{default:R(()=>[w[103]||(w[103]=c("div",{class:"grid gap-4 sm:grid-cols-2 text-xs font-semibold uppercase text-gray-500 dark:text-gray-400"},[c("div",null,"Private"),c("div",null,"Public")],-1)),(v(!0),b(se,null,ke(F.value,y=>(v(),b("div",{key:y.privateKey,class:"grid gap-4 sm:grid-cols-2"},[Qt(O.value,y.privateKey)?(v(),ge(q,{key:0,modelValue:E.value.project_types[O.value].directories[y.privateKey],"onUpdate:modelValue":K=>E.value.project_types[O.value].directories[y.privateKey]=K,label:y.privateLabel||`${y.label} (private)`,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label"])):I("",!0),Qt(O.value,y.publicKey)?(v(),ge(q,{key:1,modelValue:E.value.project_types[O.value].directories[y.publicKey],"onUpdate:modelValue":K=>E.value.project_types[O.value].directories[y.publicKey]=K,label:y.publicLabel||`${y.label} (public)`,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label"])):I("",!0)]))),128)),x(q,{modelValue:E.value.project_types[O.value].quarto.render_dir,"onUpdate:modelValue":w[36]||(w[36]=y=>E.value.project_types[O.value].quarto.render_dir=y),label:"Notebook output directory",hint:"Rendered docs default to a public location but can be moved if needed.",prefix:"/",monospace:""},null,8,["modelValue"]),c("div",XP,[c("div",ZP,[c("div",null,[w[101]||(w[101]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Private Outputs",-1)),x(gt,{"model-value":Gs(O.value,"output_private"),"onUpdate:modelValue":w[37]||(w[37]=y=>li(O.value,"output_private",y)),"add-label":"Add Private Output","default-item":()=>({key:"",label:"",path:"",type:"output_private",_id:Date.now()})},{default:R(({item:y,index:K,update:ue})=>[c("div",ej,[x(q,{"model-value":y.key,"onUpdate:modelValue":pe=>ue("key",pe),label:"Key",placeholder:"e.g., outputs_animations",error:Os(y.key,O.value,"output_private",K),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),x(q,{"model-value":y.label,"onUpdate:modelValue":pe=>ue("label",pe),label:"Label",placeholder:"e.g., Animations",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":y.path,"onUpdate:modelValue":pe=>ue("path",pe),label:"Path",placeholder:"e.g., outputs/animations",error:Ps(y.path),prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])]),c("div",null,[w[102]||(w[102]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Public Outputs",-1)),x(gt,{"model-value":Gs(O.value,"output_public"),"onUpdate:modelValue":w[38]||(w[38]=y=>li(O.value,"output_public",y)),"add-label":"Add Public Output","default-item":()=>({key:"",label:"",path:"",type:"output_public",_id:Date.now()})},{default:R(({item:y,index:K,update:ue})=>[c("div",tj,[x(q,{"model-value":y.key,"onUpdate:modelValue":pe=>ue("key",pe),label:"Key",placeholder:"e.g., outputs_public_animations",error:Os(y.key,O.value,"output_public",K),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),x(q,{"model-value":y.label,"onUpdate:modelValue":pe=>ue("label",pe),label:"Label",placeholder:"e.g., Animations (Public)",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":y.path,"onUpdate:modelValue":pe=>ue("path",pe),label:"Path",placeholder:"e.g., outputs_public/animations",error:Ps(y.path),prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])])])])]),_:1})],8,QP),c("div",{id:`project-${O.value}-utility`},[x(bt,{title:"Utility directories",description:"Keep cache and scratch in private space for safety; both remain gitignored."},{default:R(()=>[c("div",ij,[(v(!0),b(se,null,ke(ee.value,y=>(v(),b(se,{key:`sensitive-${y.key}`},[Qt(O.value,y.key)?(v(),ge(q,{key:0,modelValue:E.value.project_types[O.value].directories[y.key],"onUpdate:modelValue":K=>E.value.project_types[O.value].directories[y.key]=K,label:y.label,hint:y.hint,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label","hint"])):I("",!0)],64))),128))])]),_:1})],8,sj)])):O.value==="presentation"?(v(),b("div",nj,[ce.value&&ce.value.length>0?(v(),b("div",oj,[x(bt,{title:"Project Settings",description:"Default settings applied when creating new projects of this type."},{default:R(()=>[x(ys,null,{default:R(()=>[c("div",rj,[(v(!0),b(se,null,ke(ce.value,y=>(v(),b(se,{key:y.id},[y.control==="toggle"?(v(),ge(Le,{key:0,modelValue:E.value.project_types[O.value][y.id],"onUpdate:modelValue":K=>E.value.project_types[O.value][y.id]=K,label:y.label,description:y.description},null,8,["modelValue","onUpdate:modelValue","label","description"])):y.control==="select"?(v(),ge(Ft,{key:1,modelValue:E.value.project_types[O.value][y.id],"onUpdate:modelValue":K=>E.value.project_types[O.value][y.id]=K,label:y.label,hint:y.hint},{default:R(()=>[(v(!0),b(se,null,ke(y.options,K=>(v(),b("option",{key:K.value,value:K.value},H(K.label),9,lj))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","label","hint"])):y.control==="text"?(v(),ge(q,{key:2,modelValue:E.value.project_types[O.value][y.id],"onUpdate:modelValue":K=>E.value.project_types[O.value][y.id]=K,label:y.label,hint:y.hint,placeholder:y.placeholder},null,8,["modelValue","onUpdate:modelValue","label","hint","placeholder"])):I("",!0)],64))),128))])]),_:1})]),_:1})])):I("",!0),c("div",aj,[c("div",uj,[c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:w[39]||(w[39]=y=>Et(`project-${O.value}-primary`))}," Primary files "),c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:w[40]||(w[40]=y=>Et(`project-${O.value}-optional`))}," Optional folders ")]),x(Re,{variant:"secondary",size:"sm",class:"mt-3 sm:mt-0",onClick:w[41]||(w[41]=y=>gn(O.value))},{default:R(()=>[...w[104]||(w[104]=[oe(" Reset to Defaults ",-1)])]),_:1})]),c("div",{id:`project-${O.value}-primary`},[x(bt,{title:"Primary files"},{default:R(()=>[c("div",cj,[x(q,{modelValue:E.value.project_types[O.value].directories.presentation_source,"onUpdate:modelValue":w[42]||(w[42]=y=>E.value.project_types[O.value].directories.presentation_source=y),label:"Presentation source file",hint:"Relative path to your primary presentation.qmd.",monospace:""},null,8,["modelValue"]),x(q,{modelValue:E.value.project_types[O.value].directories.rendered_slides,"onUpdate:modelValue":w[43]||(w[43]=y=>E.value.project_types[O.value].directories.rendered_slides=y),label:"Rendered slides directory",hint:"Rendered slides write to the project root by default ('.').",monospace:""},null,8,["modelValue"])])]),_:1})],8,dj),c("div",{id:`project-${O.value}-optional`},[x(bt,{title:"Optional folders",description:"Toggle extra scaffolding when you need supporting data, scripts, or helper utilities."},{default:R(()=>[c("div",hj,[c("div",pj,[x(Le,{modelValue:xe.includeInputs,"onUpdate:modelValue":w[44]||(w[44]=y=>xe.includeInputs=y),label:"Include inputs directory",description:"Adds an inputs/ folder for sample data used in the presentation."},null,8,["modelValue"]),xe.includeInputs?(v(),ge(q,{key:0,modelValue:E.value.project_types[O.value].directories.inputs,"onUpdate:modelValue":w[45]||(w[45]=y=>E.value.project_types[O.value].directories.inputs=y),label:"Inputs directory",prefix:"/",monospace:""},null,8,["modelValue"])):I("",!0)]),c("div",mj,[x(Le,{modelValue:xe.includeScripts,"onUpdate:modelValue":w[46]||(w[46]=y=>xe.includeScripts=y),label:"Include scripts directory",description:"Adds a scripts/ folder for demo code or automation."},null,8,["modelValue"]),xe.includeScripts?(v(),ge(q,{key:0,modelValue:E.value.project_types[O.value].directories.scripts,"onUpdate:modelValue":w[47]||(w[47]=y=>E.value.project_types[O.value].directories.scripts=y),label:"Scripts directory",prefix:"/",monospace:""},null,8,["modelValue"])):I("",!0)]),c("div",gj,[x(Le,{modelValue:xe.includeFunctions,"onUpdate:modelValue":w[48]||(w[48]=y=>xe.includeFunctions=y),label:"Include functions directory",description:"Adds R/functions for helper utilities that should load automatically."},null,8,["modelValue"]),xe.includeFunctions?(v(),ge(q,{key:0,modelValue:E.value.project_types[O.value].directories.functions,"onUpdate:modelValue":w[49]||(w[49]=y=>E.value.project_types[O.value].directories.functions=y),label:"Functions directory",prefix:"/",monospace:""},null,8,["modelValue"])):I("",!0)]),c("div",vj,[w[105]||(w[105]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Custom Directories",-1)),w[106]||(w[106]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Add any additional directories you need for your presentations.",-1)),x(gt,{"model-value":E.value.project_types[O.value].extra_directories||[],"onUpdate:modelValue":w[50]||(w[50]=y=>E.value.project_types[O.value].extra_directories=y),"add-label":"Add Directory","default-item":()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:R(({item:y,index:K,update:ue})=>[c("div",yj,[x(q,{"model-value":y.key,"onUpdate:modelValue":pe=>ue("key",pe),label:"Key",placeholder:"e.g., assets",error:Os(y.key,O.value,"workspace",K),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),x(q,{"model-value":y.label,"onUpdate:modelValue":pe=>ue("label",pe),label:"Label",placeholder:"e.g., Assets",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":y.path,"onUpdate:modelValue":pe=>ue("path",pe),label:"Path",placeholder:"e.g., assets",error:Ps(y.path),prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])])])]),_:1})],8,fj)])):O.value==="course"?(v(),b("div",bj,[ce.value&&ce.value.length>0?(v(),b("div",kj,[x(bt,{title:"Project Settings",description:"Default settings applied when creating new projects of this type."},{default:R(()=>[x(ys,null,{default:R(()=>[c("div",xj,[(v(!0),b(se,null,ke(ce.value,y=>(v(),b(se,{key:y.id},[y.control==="toggle"?(v(),ge(Le,{key:0,modelValue:E.value.project_types[O.value][y.id],"onUpdate:modelValue":K=>E.value.project_types[O.value][y.id]=K,label:y.label,description:y.description},null,8,["modelValue","onUpdate:modelValue","label","description"])):y.control==="select"?(v(),ge(Ft,{key:1,modelValue:E.value.project_types[O.value][y.id],"onUpdate:modelValue":K=>E.value.project_types[O.value][y.id]=K,label:y.label,hint:y.hint},{default:R(()=>[(v(!0),b(se,null,ke(y.options,K=>(v(),b("option",{key:K.value,value:K.value},H(K.label),9,wj))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","label","hint"])):y.control==="text"?(v(),ge(q,{key:2,modelValue:E.value.project_types[O.value][y.id],"onUpdate:modelValue":K=>E.value.project_types[O.value][y.id]=K,label:y.label,hint:y.hint,placeholder:y.placeholder},null,8,["modelValue","onUpdate:modelValue","label","hint","placeholder"])):I("",!0)],64))),128))])]),_:1})]),_:1})])):I("",!0),c("div",_j,[c("div",Sj,[c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:w[51]||(w[51]=y=>Et(`project-${O.value}-core`))}," Core folders "),c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:w[52]||(w[52]=y=>Et(`project-${O.value}-quarto`))}," Quarto render directory ")]),x(Re,{variant:"secondary",size:"sm",class:"mt-3 sm:mt-0",onClick:w[53]||(w[53]=y=>gn(O.value))},{default:R(()=>[...w[107]||(w[107]=[oe(" Reset to Defaults ",-1)])]),_:1})]),c("div",{id:`project-${O.value}-core`},[x(bt,{title:"Core folders",description:"Configure folders for course datasets, slide decks, assignments, and readings."},{default:R(()=>[c("div",Aj,[x(q,{modelValue:E.value.project_types[O.value].directories.data,"onUpdate:modelValue":w[54]||(w[54]=y=>E.value.project_types[O.value].directories.data=y),label:"Course data",prefix:"/",monospace:"",hint:"Shared datasets distributed with the course."},null,8,["modelValue"]),x(q,{modelValue:E.value.project_types[O.value].directories.slides,"onUpdate:modelValue":w[55]||(w[55]=y=>E.value.project_types[O.value].directories.slides=y),label:"Slides",prefix:"/",monospace:"",hint:"Lecture slide sources."},null,8,["modelValue"]),x(q,{modelValue:E.value.project_types[O.value].directories.assignments,"onUpdate:modelValue":w[56]||(w[56]=y=>E.value.project_types[O.value].directories.assignments=y),label:"Assignments",prefix:"/",monospace:"",hint:"Homework or lab materials."},null,8,["modelValue"]),x(q,{modelValue:E.value.project_types[O.value].directories.course_docs,"onUpdate:modelValue":w[57]||(w[57]=y=>E.value.project_types[O.value].directories.course_docs=y),label:"Course documents",prefix:"/",monospace:"",hint:"Syllabus, policies, grading guides."},null,8,["modelValue"]),x(q,{modelValue:E.value.project_types[O.value].directories.readings,"onUpdate:modelValue":w[58]||(w[58]=y=>E.value.project_types[O.value].directories.readings=y),label:"Readings",prefix:"/",monospace:"",hint:"Assigned readings and references."},null,8,["modelValue"]),x(q,{modelValue:E.value.project_types[O.value].directories.notebooks,"onUpdate:modelValue":w[59]||(w[59]=y=>E.value.project_types[O.value].directories.notebooks=y),label:"Module notebooks",prefix:"/",monospace:"",hint:"Module notebooks or workshop materials."},null,8,["modelValue"])])]),_:1})],8,Cj),c("div",{id:`project-${O.value}-quarto`},[x(bt,{title:"Quarto render directory",description:"Default location for rendered course documentation."},{default:R(()=>[x(q,{modelValue:E.value.project_types[O.value].quarto.render_dir,"onUpdate:modelValue":w[60]||(w[60]=y=>E.value.project_types[O.value].quarto.render_dir=y),label:"Render directory",prefix:"/",monospace:""},null,8,["modelValue"])]),_:1}),c("div",Mj,[w[108]||(w[108]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Custom Directories",-1)),w[109]||(w[109]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Add any additional directories you need for your courses.",-1)),x(gt,{"model-value":E.value.project_types[O.value].extra_directories||[],"onUpdate:modelValue":w[61]||(w[61]=y=>E.value.project_types[O.value].extra_directories=y),"add-label":"Add Directory","default-item":()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:R(({item:y,index:K,update:ue})=>[c("div",Dj,[x(q,{"model-value":y.key,"onUpdate:modelValue":pe=>ue("key",pe),label:"Key",placeholder:"e.g., resources",error:Os(y.key,O.value,"workspace",K),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),x(q,{"model-value":y.label,"onUpdate:modelValue":pe=>ue("label",pe),label:"Label",placeholder:"e.g., Resources",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":y.path,"onUpdate:modelValue":pe=>ue("path",pe),label:"Path",placeholder:"e.g., resources",error:Ps(y.path),prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])])],8,Vj)])):I("",!0),c("div",{id:`project-${O.value}-gitignore`},[x(bt,{title:".gitignore Template",description:"Patterns applied to all new projects of this type."},{default:R(()=>[x(Qi,{modelValue:Z[`gitignore_${O.value}`].contents,"onUpdate:modelValue":w[62]||(w[62]=y=>Z[`gitignore_${O.value}`].contents=y),language:"text","min-height":"400px",disabled:Z[`gitignore_${O.value}`].loading},null,8,["modelValue","disabled"]),Z[`gitignore_${O.value}`].loading?(v(),b("p",$j,"Loading .gitignore template")):I("",!0),c("div",Ej,[x(Re,{size:"sm",variant:"secondary",onClick:w[63]||(w[63]=y=>Yt(`gitignore-${O.value}`,`gitignore_${O.value}`))},{default:R(()=>[...w[110]||(w[110]=[oe("Restore Default",-1)])]),_:1})])]),_:1})],8,Tj)])):I("",!0):(v(),b("div",hP,[c("div",pP,[(v(!0),b(se,null,ke(ne.value,y=>(v(),b("button",{key:y.key,onClick:K=>Ro(y.key),class:"group relative w-full rounded-lg border border-gray-200 p-6 text-left transition hover:border-sky-300 dark:border-gray-700 dark:hover:border-sky-600"},[c("div",gP,[x(lt(ha),{class:"h-6 w-6 flex-shrink-0 text-gray-400 transition group-hover:text-sky-600 dark:group-hover:text-sky-400"}),c("div",null,[c("h3",vP,H(y.label),1),c("p",yP,H(E.value.project_types[y.key]?.description||""),1)])])],8,mP))),128))])]))],512),[[nt,Q.value==="structure"]]),Ke(c("div",Oj,[c("div",Pj,[x(bt,null,{default:R(()=>[x(ys,{title:"Notebook Template",description:"Used by framework::make_notebook() to populate new notebooks."},{default:R(()=>[x(Qi,{modelValue:Z.notebook.contents,"onUpdate:modelValue":w[64]||(w[64]=y=>Z.notebook.contents=y),language:"markdown","min-height":"500px",disabled:Z.notebook.loading},null,8,["modelValue","disabled"]),Z.notebook.loading?(v(),b("p",jj,"Loading notebook template")):I("",!0),c("div",Lj,[x(Re,{size:"sm",variant:"secondary",onClick:w[65]||(w[65]=y=>Yt("notebook"))},{default:R(()=>[...w[111]||(w[111]=[oe("Restore Default",-1)])]),_:1})])]),_:1})]),_:1})]),c("div",Rj,[x(bt,null,{default:R(()=>[x(ys,{title:"Script Template",description:"Used by framework::make_script() for quick task scaffolds."},{default:R(()=>[x(Qi,{modelValue:Z.script.contents,"onUpdate:modelValue":w[66]||(w[66]=y=>Z.script.contents=y),language:"r","min-height":"450px",disabled:Z.script.loading},null,8,["modelValue","disabled"]),Z.script.loading?(v(),b("p",Bj,"Loading script template")):I("",!0),c("div",Ij,[x(Re,{size:"sm",variant:"secondary",onClick:w[67]||(w[67]=y=>Yt("script"))},{default:R(()=>[...w[112]||(w[112]=[oe("Restore Default",-1)])]),_:1})])]),_:1})]),_:1})]),c("div",Uj,[x(bt,null,{default:R(()=>[x(ys,{title:"Presentation Template",description:"Used by framework::make_notebook(stub = 'revealjs') for slide decks."},{default:R(()=>[x(Qi,{modelValue:Z.presentation.contents,"onUpdate:modelValue":w[68]||(w[68]=y=>Z.presentation.contents=y),language:"markdown","min-height":"500px",disabled:Z.presentation.loading},null,8,["modelValue","disabled"]),Z.presentation.loading?(v(),b("p",Nj,"Loading presentation template")):I("",!0),c("div",zj,[x(Re,{size:"sm",variant:"secondary",onClick:w[69]||(w[69]=y=>Yt("presentation"))},{default:R(()=>[...w[113]||(w[113]=[oe("Restore Default",-1)])]),_:1})])]),_:1})]),_:1})])],512),[[nt,Q.value==="templates"]]),Ke(c("div",Fj,[x(bt,{description:"Framework maintains context files for selected assistants and keeps them in sync before commits."},{default:R(()=>[x(ys,null,{default:R(()=>[x(Le,{modelValue:E.value.defaults.ai_support,"onUpdate:modelValue":w[70]||(w[70]=y=>E.value.defaults.ai_support=y),label:"Enable AI Support",description:"Generate and sync assistant-specific context files."},null,8,["modelValue"])]),_:1}),x(ys,{title:"Canonical context file",description:"This file is the source of truth; other instructions files are synced to it when AI hooks run."},{default:R(()=>[x(Ft,{modelValue:E.value.defaults.ai_canonical_file,"onUpdate:modelValue":w[71]||(w[71]=y=>E.value.defaults.ai_canonical_file=y),disabled:!E.value.defaults.ai_support,label:"Canonical Context File"},{default:R(()=>[...w[114]||(w[114]=[c("option",{value:"AGENTS.md"},"AGENTS.md (multi-agent orchestrator)",-1),c("option",{value:"CLAUDE.md"},"CLAUDE.md",-1),c("option",{value:".github/copilot-instructions.md"},".github/copilot-instructions.md",-1)])]),_:1},8,["modelValue","disabled"])]),_:1}),E.value.defaults.ai_support?(v(),b(se,{key:0},[x(ys,{title:"Assistants",description:"Choose which assistants receive context updates."},{default:R(()=>[c("div",Hj,[(v(),b(se,null,ke(X,y=>x(yi,{key:y.id,id:`ai-${y.id}`,modelValue:Qe[y.id],"onUpdate:modelValue":K=>Qe[y.id]=K,description:y.description},{default:R(()=>[oe(H(y.label),1)]),_:2},1032,["id","modelValue","onUpdate:modelValue","description"])),64))])]),_:1}),x(ys,{title:"Canonical instructions",description:"Edit the canonical file directly. Restore defaults if you want to start over."},{default:R(()=>[x(Qi,{modelValue:Z.canonical.contents,"onUpdate:modelValue":w[72]||(w[72]=y=>Z.canonical.contents=y),language:"markdown","min-height":"500px",disabled:Z.canonical.loading||!E.value.defaults.ai_support},null,8,["modelValue","disabled"]),c("div",Wj,[x(Re,{size:"sm",variant:"secondary",disabled:Z.canonical.loading,onClick:Wn},{default:R(()=>[...w[115]||(w[115]=[oe("Restore Default",-1)])]),_:1},8,["disabled"])])]),_:1})],64)):I("",!0)]),_:1})],512),[[nt,Q.value==="ai"]]),Ke(c("div",qj,[x(bt,null,{default:R(()=>[x(Vf,{modelValue:Io.value,"onUpdate:modelValue":w[73]||(w[73]=y=>Io.value=y),flush:""},{note:R(()=>[...w[116]||(w[116]=[oe(" Project-specific .gitignore templates can be customized in ",-1),c("a",{href:"#/settings/project-defaults",class:"text-sky-600 dark:text-sky-400 hover:underline"}," Project Defaults ",-1),oe(". ",-1)])]),_:1},8,["modelValue"])]),_:1})],512),[[nt,Q.value==="git"]]),Ke(c("div",Kj,[x(bt,null,{default:R(()=>[w[117]||(w[117]=c("div",null,[c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Scaffold Behavior"),c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"},[oe(" Automatic actions when "),c("code",{class:"px-1.5 py-0.5 bg-gray-200 dark:bg-gray-700 rounded text-xs"},"scaffold()"),oe(" runs to initialize your project environment. ")])],-1)),x(Mf,{modelValue:al.value,"onUpdate:modelValue":w[74]||(w[74]=y=>al.value=y),flush:""},null,8,["modelValue"])]),_:1})],512),[[nt,Q.value==="scaffold"]]),Ke(c("div",Gj,[x(bt,null,{default:R(()=>[x(ys,null,{default:R(()=>[x(Le,{modelValue:E.value.defaults.packages.use_renv,"onUpdate:modelValue":w[75]||(w[75]=y=>E.value.defaults.packages.use_renv=y),label:"Enable renv",description:"Create renv environments for new projects."},null,8,["modelValue"])]),_:1}),x(ys,{title:"Default packages",description:"Installed (and optionally attached) when scaffold() runs."},{default:R(()=>[w[121]||(w[121]=c("p",{class:"text-xs text-gray-600 dark:text-gray-400 mb-4"},"Use this list to preseed notebooks with your preferred helpers.",-1)),E.value.defaults.packages.default_packages&&E.value.defaults.packages.default_packages.length?(v(),b("div",Jj,[(v(!0),b(se,null,ke(E.value.defaults.packages.default_packages,(y,K)=>(v(),b("div",{key:`pkg-${K}`,class:"rounded-md border border-gray-200 p-4 dark:border-gray-700"},[c("div",Yj,[c("div",Qj,[y.source==="cran"||y.source==="bioconductor"?(v(),ge(Af,{key:0,modelValue:y.name,"onUpdate:modelValue":ue=>y.name=ue,source:y.source,label:"Package",placeholder:y.source==="cran"?"Search CRAN...":"Search Bioconductor...",onSelect:ue=>y.name=ue.name},null,8,["modelValue","onUpdate:modelValue","source","placeholder","onSelect"])):(v(),ge(q,{key:1,modelValue:y.name,"onUpdate:modelValue":ue=>y.name=ue,label:"Package",placeholder:"user/repo"},null,8,["modelValue","onUpdate:modelValue"])),x(Ft,{modelValue:y.source,"onUpdate:modelValue":ue=>y.source=ue,label:"Source"},{default:R(()=>[...w[118]||(w[118]=[c("option",{value:"cran"},"CRAN",-1),c("option",{value:"github"},"GitHub",-1),c("option",{value:"bioconductor"},"Bioconductor",-1)])]),_:1},8,["modelValue","onUpdate:modelValue"])]),c("div",Xj,[x(Le,{modelValue:y.auto_attach,"onUpdate:modelValue":ue=>y.auto_attach=ue,label:"Auto-Attach",description:"Call library() when scaffold() runs."},null,8,["modelValue","onUpdate:modelValue"]),x(Re,{size:"sm",variant:"secondary",onClick:ue=>ol(K)},{default:R(()=>[...w[119]||(w[119]=[oe("Remove",-1)])]),_:1},8,["onClick"])])])]))),128))])):(v(),b("p",Zj,"No packages configured. Add packages to include tidyverse helpers or internal utilities automatically.")),c("div",eL,[x(Re,{size:"sm",variant:"secondary",onClick:nl},{default:R(()=>[...w[120]||(w[120]=[oe("Add Package",-1)])]),_:1})])]),_:1})]),_:1})],512),[[nt,Q.value==="packages"]])])],512),[[nt,!Oe.value]]),x(nn,{modelValue:Ge.open,"onUpdate:modelValue":w[78]||(w[78]=y=>Ge.open=y),size:"lg",title:Ge.title},{default:R(()=>[c("p",tL,H(Ge.description),1),x(vc,{modelValue:Ge.contents,"onUpdate:modelValue":w[76]||(w[76]=y=>Ge.contents=y),rows:18,monospace:""},null,8,["modelValue"])]),actions:R(()=>[c("div",sL,[x(Re,{variant:"secondary",onClick:w[77]||(w[77]=y=>Ge.open=!1)},{default:R(()=>[...w[122]||(w[122]=[oe("Cancel",-1)])]),_:1}),x(Re,{variant:"primary",disabled:Ge.loading,onClick:qn},{default:R(()=>[oe(H(Ge.loading?"Saving":"Save Template"),1)]),_:1},8,["disabled"])])]),_:1},8,["modelValue","title"]),x(nn,{modelValue:z.open,"onUpdate:modelValue":w[80]||(w[80]=y=>z.open=y),size:"md",title:"Reset to Defaults",icon:"warning"},{default:R(()=>[c("p",iL,[w[123]||(w[123]=oe(" Are you sure you want to reset ",-1)),c("strong",null,H(z.projectTypeName),1),w[124]||(w[124]=oe(" to default settings? This will discard all your customizations for this project type. ",-1))])]),actions:R(()=>[c("div",nL,[x(Re,{variant:"secondary",onClick:w[79]||(w[79]=y=>z.open=!1)},{default:R(()=>[...w[125]||(w[125]=[oe("Cancel",-1)])]),_:1}),x(Re,{variant:"primary",onClick:il},{default:R(()=>[...w[126]||(w[126]=[oe(" Reset to Defaults ",-1)])]),_:1})])]),_:1},8,["modelValue"])]))}},uL={class:"mx-auto max-w-5xl p-10"},dL={__name:"ProjectPackagesView",setup(t){return ae([]),os(async()=>{}),(e,s)=>(v(),b("div",uL,[x(Eo,{title:"Packages",description:"Manage R packages for this project."}),s[0]||(s[0]=qa('<div class="mt-10 rounded-2xl border border-zinc-200 bg-white p-8 shadow-sm dark:border-zinc-800 dark:bg-zinc-900"><div class="flex items-center gap-3 border-b border-zinc-100 pb-6 dark:border-zinc-800"><div class="flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-sky-500 to-sky-600 shadow-lg shadow-sky-500/20"><svg class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg></div><h3 class="text-xl font-bold text-zinc-900 dark:text-white">Package Configuration</h3></div><div class="mt-8"><p class="text-sm text-zinc-600 dark:text-zinc-400"> Package management interface coming soon. This page will allow you to: </p><ul class="mt-4 space-y-2 text-sm text-zinc-600 dark:text-zinc-400"><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Add and remove project packages </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Specify package versions </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Toggle renv integration </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Install and update packages </li></ul></div></div>',1))]))}},cL={class:"mx-auto max-w-5xl p-10"},fL={__name:"ProjectDataView",setup(t){return ae([]),os(async()=>{}),(e,s)=>(v(),b("div",cL,[x(Eo,{title:"Data",description:"Manage data catalog and sources for this project."}),s[0]||(s[0]=qa('<div class="mt-10 rounded-2xl border border-zinc-200 bg-white p-8 shadow-sm dark:border-zinc-800 dark:bg-zinc-900"><div class="flex items-center gap-3 border-b border-zinc-100 pb-6 dark:border-zinc-800"><div class="flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-sky-500 to-sky-600 shadow-lg shadow-sky-500/20"><svg class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"></path></svg></div><h3 class="text-xl font-bold text-zinc-900 dark:text-white">Data Catalog</h3></div><div class="mt-8"><p class="text-sm text-zinc-600 dark:text-zinc-400"> Data catalog management interface coming soon. This page will allow you to: </p><ul class="mt-4 space-y-2 text-sm text-zinc-600 dark:text-zinc-400"><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Define data sources in the catalog </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Specify data formats (CSV, RDS, etc.) </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Configure encryption settings </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Track data integrity via digests </li></ul></div></div>',1))]))}},hL={class:"mx-auto max-w-5xl p-10"},pL={__name:"ProjectConnectionsView",setup(t){return ae([]),os(async()=>{}),(e,s)=>(v(),b("div",hL,[x(Eo,{title:"Connections",description:"Manage database connections for this project."}),s[0]||(s[0]=qa('<div class="mt-10 rounded-2xl border border-zinc-200 bg-white p-8 shadow-sm dark:border-zinc-800 dark:bg-zinc-900"><div class="flex items-center gap-3 border-b border-zinc-100 pb-6 dark:border-zinc-800"><div class="flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-sky-500 to-sky-600 shadow-lg shadow-sky-500/20"><svg class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg></div><h3 class="text-xl font-bold text-zinc-900 dark:text-white">Database Connections</h3></div><div class="mt-8"><p class="text-sm text-zinc-600 dark:text-zinc-400"> Connection management interface coming soon. This page will allow you to: </p><ul class="mt-4 space-y-2 text-sm text-zinc-600 dark:text-zinc-400"><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Configure database connections (SQLite, PostgreSQL) </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Store connection credentials securely </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Test database connectivity </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Manage connection pooling settings </li></ul></div></div>',1))]))}},mL=[{path:"/",redirect:"/projects"},{path:"/docs",name:"docs",component:Yh},{path:"/docs/:functionName",name:"doc-detail",component:Yh,props:!0},{path:"/projects",name:"projects",component:B4},{path:"/projects/new",name:"project-create",component:DT},{path:"/project/:id",name:"project-detail",component:v7,props:!0},{path:"/settings/:section?/:subsection?",name:"settings",component:aL,props:!0},{path:"/project/packages",name:"project-packages",component:dL},{path:"/project/data",name:"project-data",component:fL},{path:"/project/connections",name:"project-connections",component:pL}],gL=m2({history:Kx(),routes:mL});ox(sw).use(gL).mount("#app");
