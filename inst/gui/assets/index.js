(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(n){if(n.ep)return;n.ep=!0;const r=t(n);fetch(n.href,r)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ad(s){const e=Object.create(null);for(const t of s.split(","))e[t]=1;return t=>t in e}const vt={},sr=[],yi=()=>{},Ym=()=>!1,za=s=>s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&(s.charCodeAt(2)>122||s.charCodeAt(2)<97),Md=s=>s.startsWith("onUpdate:"),Ut=Object.assign,Dd=(s,e)=>{const t=s.indexOf(e);t>-1&&s.splice(t,1)},i1=Object.prototype.hasOwnProperty,at=(s,e)=>i1.call(s,e),Ie=Array.isArray,ir=s=>qo(s)==="[object Map]",Ar=s=>qo(s)==="[object Set]",nh=s=>qo(s)==="[object Date]",qe=s=>typeof s=="function",Mt=s=>typeof s=="string",Qs=s=>typeof s=="symbol",ht=s=>s!==null&&typeof s=="object",Qm=s=>(ht(s)||qe(s))&&qe(s.then)&&qe(s.catch),Xm=Object.prototype.toString,qo=s=>Xm.call(s),n1=s=>qo(s).slice(8,-1),Zm=s=>qo(s)==="[object Object]",Ed=s=>Mt(s)&&s!=="NaN"&&s[0]!=="-"&&""+parseInt(s,10)===s,eo=Ad(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ua=s=>{const e=Object.create(null);return(t=>e[t]||(e[t]=s(t)))},r1=/-\w/g,Us=Ua(s=>s.replace(r1,e=>e.slice(1).toUpperCase())),o1=/\B([A-Z])/g,Un=Ua(s=>s.replace(o1,"-$1").toLowerCase()),Ha=Ua(s=>s.charAt(0).toUpperCase()+s.slice(1)),Su=Ua(s=>s?`on${Ha(s)}`:""),tn=(s,e)=>!Object.is(s,e),Kl=(s,...e)=>{for(let t=0;t<s.length;t++)s[t](...e)},eg=(s,e,t,i=!1)=>{Object.defineProperty(s,e,{configurable:!0,enumerable:!1,writable:i,value:t})},la=s=>{const e=parseFloat(s);return isNaN(e)?s:e},l1=s=>{const e=Mt(s)?Number(s):NaN;return isNaN(e)?s:e};let rh;const Wa=()=>rh||(rh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function vo(s){if(Ie(s)){const e={};for(let t=0;t<s.length;t++){const i=s[t],n=Mt(i)?d1(i):vo(i);if(n)for(const r in n)e[r]=n[r]}return e}else if(Mt(s)||ht(s))return s}const a1=/;(?![^(]*\))/g,u1=/:([^]+)/,c1=/\/\*[^]*?\*\//g;function d1(s){const e={};return s.replace(c1,"").split(a1).forEach(t=>{if(t){const i=t.split(u1);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function be(s){let e="";if(Mt(s))e=s;else if(Ie(s))for(let t=0;t<s.length;t++){const i=be(s[t]);i&&(e+=i+" ")}else if(ht(s))for(const t in s)s[t]&&(e+=t+" ");return e.trim()}const f1="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",h1=Ad(f1);function tg(s){return!!s||s===""}function p1(s,e){if(s.length!==e.length)return!1;let t=!0;for(let i=0;t&&i<s.length;i++)t=Rn(s[i],e[i]);return t}function Rn(s,e){if(s===e)return!0;let t=nh(s),i=nh(e);if(t||i)return t&&i?s.getTime()===e.getTime():!1;if(t=Qs(s),i=Qs(e),t||i)return s===e;if(t=Ie(s),i=Ie(e),t||i)return t&&i?p1(s,e):!1;if(t=ht(s),i=ht(e),t||i){if(!t||!i)return!1;const n=Object.keys(s).length,r=Object.keys(e).length;if(n!==r)return!1;for(const o in s){const l=s.hasOwnProperty(o),a=e.hasOwnProperty(o);if(l&&!a||!l&&a||!Rn(s[o],e[o]))return!1}}return String(s)===String(e)}function Td(s,e){return s.findIndex(t=>Rn(t,e))}const sg=s=>!!(s&&s.__v_isRef===!0),Q=s=>Mt(s)?s:s==null?"":Ie(s)||ht(s)&&(s.toString===Xm||!qe(s.toString))?sg(s)?Q(s.value):JSON.stringify(s,ig,2):String(s),ig=(s,e)=>sg(e)?ig(s,e.value):ir(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[i,n],r)=>(t[Cu(i,r)+" =>"]=n,t),{})}:Ar(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>Cu(t))}:Qs(e)?Cu(e):ht(e)&&!Ie(e)&&!Zm(e)?String(e):e,Cu=(s,e="")=>{var t;return Qs(s)?`Symbol(${(t=s.description)!=null?t:e})`:s};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let bs;class m1{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=bs,!e&&bs&&(this.index=(bs.scopes||(bs.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=bs;try{return bs=this,e()}finally{bs=t}}}on(){++this._on===1&&(this.prevScope=bs,bs=this)}off(){this._on>0&&--this._on===0&&(bs=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let t,i;for(t=0,i=this.effects.length;t<i;t++)this.effects[t].stop();for(this.effects.length=0,t=0,i=this.cleanups.length;t<i;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function g1(){return bs}let bt;const _u=new WeakSet;class ng{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,bs&&bs.active&&bs.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,_u.has(this)&&(_u.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||og(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,oh(this),lg(this);const e=bt,t=Ys;bt=this,Ys=!0;try{return this.fn()}finally{ag(this),bt=e,Ys=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Pd(e);this.deps=this.depsTail=void 0,oh(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?_u.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){fc(this)&&this.run()}get dirty(){return fc(this)}}let rg=0,to,so;function og(s,e=!1){if(s.flags|=8,e){s.next=so,so=s;return}s.next=to,to=s}function Od(){rg++}function jd(){if(--rg>0)return;if(so){let e=so;for(so=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let s;for(;to;){let e=to;for(to=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(i){s||(s=i)}e=t}}if(s)throw s}function lg(s){for(let e=s.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function ag(s){let e,t=s.depsTail,i=t;for(;i;){const n=i.prevDep;i.version===-1?(i===t&&(t=n),Pd(i),v1(i)):e=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=n}s.deps=e,s.depsTail=t}function fc(s){for(let e=s.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(ug(e.dep.computed)||e.dep.version!==e.version))return!0;return!!s._dirty}function ug(s){if(s.flags&4&&!(s.flags&16)||(s.flags&=-17,s.globalVersion===yo)||(s.globalVersion=yo,!s.isSSR&&s.flags&128&&(!s.deps&&!s._dirty||!fc(s))))return;s.flags|=2;const e=s.dep,t=bt,i=Ys;bt=s,Ys=!0;try{lg(s);const n=s.fn(s._value);(e.version===0||tn(n,s._value))&&(s.flags|=128,s._value=n,e.version++)}catch(n){throw e.version++,n}finally{bt=t,Ys=i,ag(s),s.flags&=-3}}function Pd(s,e=!1){const{dep:t,prevSub:i,nextSub:n}=s;if(i&&(i.nextSub=n,s.prevSub=void 0),n&&(n.prevSub=i,s.nextSub=void 0),t.subs===s&&(t.subs=i,!i&&t.computed)){t.computed.flags&=-5;for(let r=t.computed.deps;r;r=r.nextDep)Pd(r,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function v1(s){const{prevDep:e,nextDep:t}=s;e&&(e.nextDep=t,s.prevDep=void 0),t&&(t.prevDep=e,s.nextDep=void 0)}let Ys=!0;const cg=[];function Ri(){cg.push(Ys),Ys=!1}function Li(){const s=cg.pop();Ys=s===void 0?!0:s}function oh(s){const{cleanup:e}=s;if(s.cleanup=void 0,e){const t=bt;bt=void 0;try{e()}finally{bt=t}}}let yo=0;class y1{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class $d{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!bt||!Ys||bt===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==bt)t=this.activeLink=new y1(bt,this),bt.deps?(t.prevDep=bt.depsTail,bt.depsTail.nextDep=t,bt.depsTail=t):bt.deps=bt.depsTail=t,dg(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const i=t.nextDep;i.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=i),t.prevDep=bt.depsTail,t.nextDep=void 0,bt.depsTail.nextDep=t,bt.depsTail=t,bt.deps===t&&(bt.deps=i)}return t}trigger(e){this.version++,yo++,this.notify(e)}notify(e){Od();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{jd()}}}function dg(s){if(s.dep.sc++,s.sub.flags&4){const e=s.dep.computed;if(e&&!s.dep.subs){e.flags|=20;for(let i=e.deps;i;i=i.nextDep)dg(i)}const t=s.dep.subs;t!==s&&(s.prevSub=t,t&&(t.nextSub=s)),s.dep.subs=s}}const hc=new WeakMap,jn=Symbol(""),pc=Symbol(""),bo=Symbol("");function es(s,e,t){if(Ys&&bt){let i=hc.get(s);i||hc.set(s,i=new Map);let n=i.get(t);n||(i.set(t,n=new $d),n.map=i,n.key=t),n.track()}}function Ti(s,e,t,i,n,r){const o=hc.get(s);if(!o){yo++;return}const l=a=>{a&&a.trigger()};if(Od(),e==="clear")o.forEach(l);else{const a=Ie(s),c=a&&Ed(t);if(a&&t==="length"){const u=Number(i);o.forEach((d,h)=>{(h==="length"||h===bo||!Qs(h)&&h>=u)&&l(d)})}else switch((t!==void 0||o.has(void 0))&&l(o.get(t)),c&&l(o.get(bo)),e){case"add":a?c&&l(o.get("length")):(l(o.get(jn)),ir(s)&&l(o.get(pc)));break;case"delete":a||(l(o.get(jn)),ir(s)&&l(o.get(pc)));break;case"set":ir(s)&&l(o.get(jn));break}}jd()}function Kn(s){const e=nt(s);return e===s?e:(es(e,"iterate",bo),Bs(s)?e:e.map(Wt))}function qa(s){return es(s=nt(s),"iterate",bo),s}const b1={__proto__:null,[Symbol.iterator](){return Au(this,Symbol.iterator,Wt)},concat(...s){return Kn(this).concat(...s.map(e=>Ie(e)?Kn(e):e))},entries(){return Au(this,"entries",s=>(s[1]=Wt(s[1]),s))},every(s,e){return Ci(this,"every",s,e,void 0,arguments)},filter(s,e){return Ci(this,"filter",s,e,t=>t.map(Wt),arguments)},find(s,e){return Ci(this,"find",s,e,Wt,arguments)},findIndex(s,e){return Ci(this,"findIndex",s,e,void 0,arguments)},findLast(s,e){return Ci(this,"findLast",s,e,Wt,arguments)},findLastIndex(s,e){return Ci(this,"findLastIndex",s,e,void 0,arguments)},forEach(s,e){return Ci(this,"forEach",s,e,void 0,arguments)},includes(...s){return Mu(this,"includes",s)},indexOf(...s){return Mu(this,"indexOf",s)},join(s){return Kn(this).join(s)},lastIndexOf(...s){return Mu(this,"lastIndexOf",s)},map(s,e){return Ci(this,"map",s,e,void 0,arguments)},pop(){return Ir(this,"pop")},push(...s){return Ir(this,"push",s)},reduce(s,...e){return lh(this,"reduce",s,e)},reduceRight(s,...e){return lh(this,"reduceRight",s,e)},shift(){return Ir(this,"shift")},some(s,e){return Ci(this,"some",s,e,void 0,arguments)},splice(...s){return Ir(this,"splice",s)},toReversed(){return Kn(this).toReversed()},toSorted(s){return Kn(this).toSorted(s)},toSpliced(...s){return Kn(this).toSpliced(...s)},unshift(...s){return Ir(this,"unshift",s)},values(){return Au(this,"values",Wt)}};function Au(s,e,t){const i=qa(s),n=i[e]();return i!==s&&!Bs(s)&&(n._next=n.next,n.next=()=>{const r=n._next();return r.done||(r.value=t(r.value)),r}),n}const k1=Array.prototype;function Ci(s,e,t,i,n,r){const o=qa(s),l=o!==s&&!Bs(s),a=o[e];if(a!==k1[e]){const d=a.apply(s,r);return l?Wt(d):d}let c=t;o!==s&&(l?c=function(d,h){return t.call(this,Wt(d),h,s)}:t.length>2&&(c=function(d,h){return t.call(this,d,h,s)}));const u=a.call(o,c,i);return l&&n?n(u):u}function lh(s,e,t,i){const n=qa(s);let r=t;return n!==s&&(Bs(s)?t.length>3&&(r=function(o,l,a){return t.call(this,o,l,a,s)}):r=function(o,l,a){return t.call(this,o,Wt(l),a,s)}),n[e](r,...i)}function Mu(s,e,t){const i=nt(s);es(i,"iterate",bo);const n=i[e](...t);return(n===-1||n===!1)&&Vd(t[0])?(t[0]=nt(t[0]),i[e](...t)):n}function Ir(s,e,t=[]){Ri(),Od();const i=nt(s)[e].apply(s,t);return jd(),Li(),i}const x1=Ad("__proto__,__v_isRef,__isVue"),fg=new Set(Object.getOwnPropertyNames(Symbol).filter(s=>s!=="arguments"&&s!=="caller").map(s=>Symbol[s]).filter(Qs));function w1(s){Qs(s)||(s=String(s));const e=nt(this);return es(e,"has",s),e.hasOwnProperty(s)}class hg{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,i){if(t==="__v_skip")return e.__v_skip;const n=this._isReadonly,r=this._isShallow;if(t==="__v_isReactive")return!n;if(t==="__v_isReadonly")return n;if(t==="__v_isShallow")return r;if(t==="__v_raw")return i===(n?r?j1:vg:r?gg:mg).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(i)?e:void 0;const o=Ie(e);if(!n){let a;if(o&&(a=b1[t]))return a;if(t==="hasOwnProperty")return w1}const l=Reflect.get(e,t,rs(e)?e:i);if((Qs(t)?fg.has(t):x1(t))||(n||es(e,"get",t),r))return l;if(rs(l)){const a=o&&Ed(t)?l:l.value;return n&&ht(a)?gc(a):a}return ht(l)?n?gc(l):Gs(l):l}}class pg extends hg{constructor(e=!1){super(!1,e)}set(e,t,i,n){let r=e[t];if(!this._isShallow){const a=nn(r);if(!Bs(i)&&!nn(i)&&(r=nt(r),i=nt(i)),!Ie(e)&&rs(r)&&!rs(i))return a||(r.value=i),!0}const o=Ie(e)&&Ed(t)?Number(t)<e.length:at(e,t),l=Reflect.set(e,t,i,rs(e)?e:n);return e===nt(n)&&(o?tn(i,r)&&Ti(e,"set",t,i):Ti(e,"add",t,i)),l}deleteProperty(e,t){const i=at(e,t);e[t];const n=Reflect.deleteProperty(e,t);return n&&i&&Ti(e,"delete",t,void 0),n}has(e,t){const i=Reflect.has(e,t);return(!Qs(t)||!fg.has(t))&&es(e,"has",t),i}ownKeys(e){return es(e,"iterate",Ie(e)?"length":jn),Reflect.ownKeys(e)}}class S1 extends hg{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const C1=new pg,_1=new S1,A1=new pg(!0);const mc=s=>s,vl=s=>Reflect.getPrototypeOf(s);function M1(s,e,t){return function(...i){const n=this.__v_raw,r=nt(n),o=ir(r),l=s==="entries"||s===Symbol.iterator&&o,a=s==="keys"&&o,c=n[s](...i),u=t?mc:e?aa:Wt;return!e&&es(r,"iterate",a?pc:jn),{next(){const{value:d,done:h}=c.next();return h?{value:d,done:h}:{value:l?[u(d[0]),u(d[1])]:u(d),done:h}},[Symbol.iterator](){return this}}}}function yl(s){return function(...e){return s==="delete"?!1:s==="clear"?void 0:this}}function D1(s,e){const t={get(n){const r=this.__v_raw,o=nt(r),l=nt(n);s||(tn(n,l)&&es(o,"get",n),es(o,"get",l));const{has:a}=vl(o),c=e?mc:s?aa:Wt;if(a.call(o,n))return c(r.get(n));if(a.call(o,l))return c(r.get(l));r!==o&&r.get(n)},get size(){const n=this.__v_raw;return!s&&es(nt(n),"iterate",jn),n.size},has(n){const r=this.__v_raw,o=nt(r),l=nt(n);return s||(tn(n,l)&&es(o,"has",n),es(o,"has",l)),n===l?r.has(n):r.has(n)||r.has(l)},forEach(n,r){const o=this,l=o.__v_raw,a=nt(l),c=e?mc:s?aa:Wt;return!s&&es(a,"iterate",jn),l.forEach((u,d)=>n.call(r,c(u),c(d),o))}};return Ut(t,s?{add:yl("add"),set:yl("set"),delete:yl("delete"),clear:yl("clear")}:{add(n){!e&&!Bs(n)&&!nn(n)&&(n=nt(n));const r=nt(this);return vl(r).has.call(r,n)||(r.add(n),Ti(r,"add",n,n)),this},set(n,r){!e&&!Bs(r)&&!nn(r)&&(r=nt(r));const o=nt(this),{has:l,get:a}=vl(o);let c=l.call(o,n);c||(n=nt(n),c=l.call(o,n));const u=a.call(o,n);return o.set(n,r),c?tn(r,u)&&Ti(o,"set",n,r):Ti(o,"add",n,r),this},delete(n){const r=nt(this),{has:o,get:l}=vl(r);let a=o.call(r,n);a||(n=nt(n),a=o.call(r,n)),l&&l.call(r,n);const c=r.delete(n);return a&&Ti(r,"delete",n,void 0),c},clear(){const n=nt(this),r=n.size!==0,o=n.clear();return r&&Ti(n,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(n=>{t[n]=M1(n,s,e)}),t}function Rd(s,e){const t=D1(s,e);return(i,n,r)=>n==="__v_isReactive"?!s:n==="__v_isReadonly"?s:n==="__v_raw"?i:Reflect.get(at(t,n)&&n in i?t:i,n,r)}const E1={get:Rd(!1,!1)},T1={get:Rd(!1,!0)},O1={get:Rd(!0,!1)};const mg=new WeakMap,gg=new WeakMap,vg=new WeakMap,j1=new WeakMap;function P1(s){switch(s){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function $1(s){return s.__v_skip||!Object.isExtensible(s)?0:P1(n1(s))}function Gs(s){return nn(s)?s:Ld(s,!1,C1,E1,mg)}function yg(s){return Ld(s,!1,A1,T1,gg)}function gc(s){return Ld(s,!0,_1,O1,vg)}function Ld(s,e,t,i,n){if(!ht(s)||s.__v_raw&&!(e&&s.__v_isReactive))return s;const r=$1(s);if(r===0)return s;const o=n.get(s);if(o)return o;const l=new Proxy(s,r===2?i:t);return n.set(s,l),l}function nr(s){return nn(s)?nr(s.__v_raw):!!(s&&s.__v_isReactive)}function nn(s){return!!(s&&s.__v_isReadonly)}function Bs(s){return!!(s&&s.__v_isShallow)}function Vd(s){return s?!!s.__v_raw:!1}function nt(s){const e=s&&s.__v_raw;return e?nt(e):s}function R1(s){return!at(s,"__v_skip")&&Object.isExtensible(s)&&eg(s,"__v_skip",!0),s}const Wt=s=>ht(s)?Gs(s):s,aa=s=>ht(s)?gc(s):s;function rs(s){return s?s.__v_isRef===!0:!1}function ie(s){return bg(s,!1)}function L1(s){return bg(s,!0)}function bg(s,e){return rs(s)?s:new V1(s,e)}class V1{constructor(e,t){this.dep=new $d,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:nt(e),this._value=t?e:Wt(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,i=this.__v_isShallow||Bs(e)||nn(e);e=i?e:nt(e),tn(e,t)&&(this._rawValue=e,this._value=i?e:Wt(e),this.dep.trigger())}}function dt(s){return rs(s)?s.value:s}const B1={get:(s,e,t)=>e==="__v_raw"?s:dt(Reflect.get(s,e,t)),set:(s,e,t,i)=>{const n=s[e];return rs(n)&&!rs(t)?(n.value=t,!0):Reflect.set(s,e,t,i)}};function kg(s){return nr(s)?s:new Proxy(s,B1)}class I1{constructor(e,t,i){this.fn=e,this.setter=t,this._value=void 0,this.dep=new $d(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=yo-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&bt!==this)return og(this,!0),!0}get value(){const e=this.dep.track();return ug(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function N1(s,e,t=!1){let i,n;return qe(s)?i=s:(i=s.get,n=s.set),new I1(i,n,t)}const bl={},ua=new WeakMap;let wn;function F1(s,e=!1,t=wn){if(t){let i=ua.get(t);i||ua.set(t,i=[]),i.push(s)}}function z1(s,e,t=vt){const{immediate:i,deep:n,once:r,scheduler:o,augmentJob:l,call:a}=t,c=U=>n?U:Bs(U)||n===!1||n===0?Oi(U,1):Oi(U);let u,d,h,p,g=!1,k=!1;if(rs(s)?(d=()=>s.value,g=Bs(s)):nr(s)?(d=()=>c(s),g=!0):Ie(s)?(k=!0,g=s.some(U=>nr(U)||Bs(U)),d=()=>s.map(U=>{if(rs(U))return U.value;if(nr(U))return c(U);if(qe(U))return a?a(U,2):U()})):qe(s)?e?d=a?()=>a(s,2):s:d=()=>{if(h){Ri();try{h()}finally{Li()}}const U=wn;wn=u;try{return a?a(s,3,[p]):s(p)}finally{wn=U}}:d=yi,e&&n){const U=d,N=n===!0?1/0:n;d=()=>Oi(U(),N)}const m=g1(),x=()=>{u.stop(),m&&m.active&&Dd(m.effects,u)};if(r&&e){const U=e;e=(...N)=>{U(...N),x()}}let V=k?new Array(s.length).fill(bl):bl;const I=U=>{if(!(!(u.flags&1)||!u.dirty&&!U))if(e){const N=u.run();if(n||g||(k?N.some((P,S)=>tn(P,V[S])):tn(N,V))){h&&h();const P=wn;wn=u;try{const S=[N,V===bl?void 0:k&&V[0]===bl?[]:V,p];V=N,a?a(e,3,S):e(...S)}finally{wn=P}}}else u.run()};return l&&l(I),u=new ng(d),u.scheduler=o?()=>o(I,!1):I,p=U=>F1(U,!1,u),h=u.onStop=()=>{const U=ua.get(u);if(U){if(a)a(U,4);else for(const N of U)N();ua.delete(u)}},e?i?I(!0):V=u.run():o?o(I.bind(null,!0),!0):u.run(),x.pause=u.pause.bind(u),x.resume=u.resume.bind(u),x.stop=x,x}function Oi(s,e=1/0,t){if(e<=0||!ht(s)||s.__v_skip||(t=t||new Map,(t.get(s)||0)>=e))return s;if(t.set(s,e),e--,rs(s))Oi(s.value,e,t);else if(Ie(s))for(let i=0;i<s.length;i++)Oi(s[i],e,t);else if(Ar(s)||ir(s))s.forEach(i=>{Oi(i,e,t)});else if(Zm(s)){for(const i in s)Oi(s[i],e,t);for(const i of Object.getOwnPropertySymbols(s))Object.prototype.propertyIsEnumerable.call(s,i)&&Oi(s[i],e,t)}return s}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ko(s,e,t,i){try{return i?s(...i):s()}catch(n){Ka(n,e,t)}}function Xs(s,e,t,i){if(qe(s)){const n=Ko(s,e,t,i);return n&&Qm(n)&&n.catch(r=>{Ka(r,e,t)}),n}if(Ie(s)){const n=[];for(let r=0;r<s.length;r++)n.push(Xs(s[r],e,t,i));return n}}function Ka(s,e,t,i=!0){const n=e?e.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||vt;if(e){let l=e.parent;const a=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${t}`;for(;l;){const u=l.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](s,a,c)===!1)return}l=l.parent}if(r){Ri(),Ko(r,null,10,[s,a,c]),Li();return}}U1(s,t,n,i,o)}function U1(s,e,t,i=!0,n=!1){if(n)throw s;console.error(s)}const ps=[];let di=-1;const rr=[];let Hi=null,Gn=0;const xg=Promise.resolve();let ca=null;function Rs(s){const e=ca||xg;return s?e.then(this?s.bind(this):s):e}function H1(s){let e=di+1,t=ps.length;for(;e<t;){const i=e+t>>>1,n=ps[i],r=ko(n);r<s||r===s&&n.flags&2?e=i+1:t=i}return e}function Bd(s){if(!(s.flags&1)){const e=ko(s),t=ps[ps.length-1];!t||!(s.flags&2)&&e>=ko(t)?ps.push(s):ps.splice(H1(e),0,s),s.flags|=1,wg()}}function wg(){ca||(ca=xg.then(Cg))}function W1(s){Ie(s)?rr.push(...s):Hi&&s.id===-1?Hi.splice(Gn+1,0,s):s.flags&1||(rr.push(s),s.flags|=1),wg()}function ah(s,e,t=di+1){for(;t<ps.length;t++){const i=ps[t];if(i&&i.flags&2){if(s&&i.id!==s.uid)continue;ps.splice(t,1),t--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function Sg(s){if(rr.length){const e=[...new Set(rr)].sort((t,i)=>ko(t)-ko(i));if(rr.length=0,Hi){Hi.push(...e);return}for(Hi=e,Gn=0;Gn<Hi.length;Gn++){const t=Hi[Gn];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}Hi=null,Gn=0}}const ko=s=>s.id==null?s.flags&2?-1:1/0:s.id;function Cg(s){try{for(di=0;di<ps.length;di++){const e=ps[di];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Ko(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;di<ps.length;di++){const e=ps[di];e&&(e.flags&=-2)}di=-1,ps.length=0,Sg(),ca=null,(ps.length||rr.length)&&Cg()}}let Gt=null,_g=null;function da(s){const e=Gt;return Gt=s,_g=s&&s.type.__scopeId||null,e}function ee(s,e=Gt,t){if(!e||s._n)return s;const i=(...n)=>{i._d&&ma(-1);const r=da(e);let o;try{o=s(...n)}finally{da(r),i._d&&ma(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function Je(s,e){if(Gt===null)return s;const t=Za(Gt),i=s.dirs||(s.dirs=[]);for(let n=0;n<e.length;n++){let[r,o,l,a=vt]=e[n];r&&(qe(r)&&(r={mounted:r,updated:r}),r.deep&&Oi(o),i.push({dir:r,instance:t,value:o,oldValue:void 0,arg:l,modifiers:a}))}return s}function vn(s,e,t,i){const n=s.dirs,r=e&&e.dirs;for(let o=0;o<n.length;o++){const l=n[o];r&&(l.oldValue=r[o].value);let a=l.dir[i];a&&(Ri(),Xs(a,t,8,[s.el,l,s,e]),Li())}}const Ag=Symbol("_vte"),Mg=s=>s.__isTeleport,io=s=>s&&(s.disabled||s.disabled===""),uh=s=>s&&(s.defer||s.defer===""),ch=s=>typeof SVGElement<"u"&&s instanceof SVGElement,dh=s=>typeof MathMLElement=="function"&&s instanceof MathMLElement,vc=(s,e)=>{const t=s&&s.to;return Mt(t)?e?e(t):null:t},Dg={name:"Teleport",__isTeleport:!0,process(s,e,t,i,n,r,o,l,a,c){const{mc:u,pc:d,pbc:h,o:{insert:p,querySelector:g,createText:k,createComment:m}}=c,x=io(e.props);let{shapeFlag:V,children:I,dynamicChildren:U}=e;if(s==null){const N=e.el=k(""),P=e.anchor=k("");p(N,t,i),p(P,t,i);const S=(H,ue)=>{V&16&&u(I,H,ue,n,r,o,l,a)},j=()=>{const H=e.target=vc(e.props,g),ue=Tg(H,e,k,p);H&&(o!=="svg"&&ch(H)?o="svg":o!=="mathml"&&dh(H)&&(o="mathml"),n&&n.isCE&&(n.ce._teleportTargets||(n.ce._teleportTargets=new Set)).add(H),x||(S(H,ue),Gl(e,!1)))};x&&(S(t,P),Gl(e,!0)),uh(e.props)?(e.el.__isMounted=!1,ds(()=>{j(),delete e.el.__isMounted},r)):j()}else{if(uh(e.props)&&s.el.__isMounted===!1){ds(()=>{Dg.process(s,e,t,i,n,r,o,l,a,c)},r);return}e.el=s.el,e.targetStart=s.targetStart;const N=e.anchor=s.anchor,P=e.target=s.target,S=e.targetAnchor=s.targetAnchor,j=io(s.props),H=j?t:P,ue=j?N:S;if(o==="svg"||ch(P)?o="svg":(o==="mathml"||dh(P))&&(o="mathml"),U?(h(s.dynamicChildren,U,H,n,r,o,l),Fd(s,e,!0)):a||d(s,e,H,ue,n,r,o,l,!1),x)j?e.props&&s.props&&e.props.to!==s.props.to&&(e.props.to=s.props.to):kl(e,t,N,c,1);else if((e.props&&e.props.to)!==(s.props&&s.props.to)){const X=e.target=vc(e.props,g);X&&kl(e,X,null,c,0)}else j&&kl(e,P,S,c,1);Gl(e,x)}},remove(s,e,t,{um:i,o:{remove:n}},r){const{shapeFlag:o,children:l,anchor:a,targetStart:c,targetAnchor:u,target:d,props:h}=s;if(d&&(n(c),n(u)),r&&n(a),o&16){const p=r||!io(h);for(let g=0;g<l.length;g++){const k=l[g];i(k,e,t,p,!!k.dynamicChildren)}}},move:kl,hydrate:q1};function kl(s,e,t,{o:{insert:i},m:n},r=2){r===0&&i(s.targetAnchor,e,t);const{el:o,anchor:l,shapeFlag:a,children:c,props:u}=s,d=r===2;if(d&&i(o,e,t),(!d||io(u))&&a&16)for(let h=0;h<c.length;h++)n(c[h],e,t,2);d&&i(l,e,t)}function q1(s,e,t,i,n,r,{o:{nextSibling:o,parentNode:l,querySelector:a,insert:c,createText:u}},d){function h(k,m,x,V){m.anchor=d(o(k),m,l(k),t,i,n,r),m.targetStart=x,m.targetAnchor=V}const p=e.target=vc(e.props,a),g=io(e.props);if(p){const k=p._lpa||p.firstChild;if(e.shapeFlag&16)if(g)h(s,e,k,k&&o(k));else{e.anchor=o(s);let m=k;for(;m;){if(m&&m.nodeType===8){if(m.data==="teleport start anchor")e.targetStart=m;else if(m.data==="teleport anchor"){e.targetAnchor=m,p._lpa=e.targetAnchor&&o(e.targetAnchor);break}}m=o(m)}e.targetAnchor||Tg(p,e,u,c),d(k&&o(k),e,p,t,i,n,r)}Gl(e,g)}else g&&e.shapeFlag&16&&h(s,e,s,o(s));return e.anchor&&o(e.anchor)}const Eg=Dg;function Gl(s,e){const t=s.ctx;if(t&&t.ut){let i,n;for(e?(i=s.el,n=s.anchor):(i=s.targetStart,n=s.targetAnchor);i&&i!==n;)i.nodeType===1&&i.setAttribute("data-v-owner",t.uid),i=i.nextSibling;t.ut()}}function Tg(s,e,t,i){const n=e.targetStart=t(""),r=e.targetAnchor=t("");return n[Ag]=r,s&&(i(n,s),i(r,s)),r}const Ei=Symbol("_leaveCb"),xl=Symbol("_enterCb");function K1(){const s={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return os(()=>{s.isMounted=!0}),Ig(()=>{s.isUnmounting=!0}),s}const Ps=[Function,Array],Og={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ps,onEnter:Ps,onAfterEnter:Ps,onEnterCancelled:Ps,onBeforeLeave:Ps,onLeave:Ps,onAfterLeave:Ps,onLeaveCancelled:Ps,onBeforeAppear:Ps,onAppear:Ps,onAfterAppear:Ps,onAppearCancelled:Ps},jg=s=>{const e=s.subTree;return e.component?jg(e.component):e},G1={name:"BaseTransition",props:Og,setup(s,{slots:e}){const t=Ud(),i=K1();return()=>{const n=e.default&&Rg(e.default(),!0);if(!n||!n.length)return;const r=Pg(n),o=nt(s),{mode:l}=o;if(i.isLeaving)return Du(r);const a=fh(r);if(!a)return Du(r);let c=yc(a,o,i,t,d=>c=d);a.type!==ss&&xo(a,c);let u=t.subTree&&fh(t.subTree);if(u&&u.type!==ss&&!_n(u,a)&&jg(t).type!==ss){let d=yc(u,o,i,t);if(xo(u,d),l==="out-in"&&a.type!==ss)return i.isLeaving=!0,d.afterLeave=()=>{i.isLeaving=!1,t.job.flags&8||t.update(),delete d.afterLeave,u=void 0},Du(r);l==="in-out"&&a.type!==ss?d.delayLeave=(h,p,g)=>{const k=$g(i,u);k[String(u.key)]=u,h[Ei]=()=>{p(),h[Ei]=void 0,delete c.delayedLeave,u=void 0},c.delayedLeave=()=>{g(),delete c.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return r}}};function Pg(s){let e=s[0];if(s.length>1){for(const t of s)if(t.type!==ss){e=t;break}}return e}const J1=G1;function $g(s,e){const{leavingVNodes:t}=s;let i=t.get(e.type);return i||(i=Object.create(null),t.set(e.type,i)),i}function yc(s,e,t,i,n){const{appear:r,mode:o,persisted:l=!1,onBeforeEnter:a,onEnter:c,onAfterEnter:u,onEnterCancelled:d,onBeforeLeave:h,onLeave:p,onAfterLeave:g,onLeaveCancelled:k,onBeforeAppear:m,onAppear:x,onAfterAppear:V,onAppearCancelled:I}=e,U=String(s.key),N=$g(t,s),P=(H,ue)=>{H&&Xs(H,i,9,ue)},S=(H,ue)=>{const X=ue[1];P(H,ue),Ie(H)?H.every(B=>B.length<=1)&&X():H.length<=1&&X()},j={mode:o,persisted:l,beforeEnter(H){let ue=a;if(!t.isMounted)if(r)ue=m||a;else return;H[Ei]&&H[Ei](!0);const X=N[U];X&&_n(s,X)&&X.el[Ei]&&X.el[Ei](),P(ue,[H])},enter(H){let ue=c,X=u,B=d;if(!t.isMounted)if(r)ue=x||c,X=V||u,B=I||d;else return;let ae=!1;const te=H[xl]=$=>{ae||(ae=!0,$?P(B,[H]):P(X,[H]),j.delayedLeave&&j.delayedLeave(),H[xl]=void 0)};ue?S(ue,[H,te]):te()},leave(H,ue){const X=String(s.key);if(H[xl]&&H[xl](!0),t.isUnmounting)return ue();P(h,[H]);let B=!1;const ae=H[Ei]=te=>{B||(B=!0,ue(),te?P(k,[H]):P(g,[H]),H[Ei]=void 0,N[X]===s&&delete N[X])};N[X]=s,p?S(p,[H,ae]):ae()},clone(H){const ue=yc(H,e,t,i,n);return n&&n(ue),ue}};return j}function Du(s){if(Ga(s))return s=rn(s),s.children=null,s}function fh(s){if(!Ga(s))return Mg(s.type)&&s.children?Pg(s.children):s;if(s.component)return s.component.subTree;const{shapeFlag:e,children:t}=s;if(t){if(e&16)return t[0];if(e&32&&qe(t.default))return t.default()}}function xo(s,e){s.shapeFlag&6&&s.component?(s.transition=e,xo(s.component.subTree,e)):s.shapeFlag&128?(s.ssContent.transition=e.clone(s.ssContent),s.ssFallback.transition=e.clone(s.ssFallback)):s.transition=e}function Rg(s,e=!1,t){let i=[],n=0;for(let r=0;r<s.length;r++){let o=s[r];const l=t==null?o.key:String(t)+String(o.key!=null?o.key:r);o.type===ve?(o.patchFlag&128&&n++,i=i.concat(Rg(o.children,e,l))):(e||o.type!==ss)&&i.push(l!=null?rn(o,{key:l}):o)}if(n>1)for(let r=0;r<i.length;r++)i[r].patchFlag=-2;return i}function Lg(s,e){return qe(s)?Ut({name:s.name},e,{setup:s}):s}function Vg(s){s.ids=[s.ids[0]+s.ids[2]+++"-",0,0]}const fa=new WeakMap;function no(s,e,t,i,n=!1){if(Ie(s)){s.forEach((g,k)=>no(g,e&&(Ie(e)?e[k]:e),t,i,n));return}if(or(i)&&!n){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&no(s,e,t,i.component.subTree);return}const r=i.shapeFlag&4?Za(i.component):i.el,o=n?null:r,{i:l,r:a}=s,c=e&&e.r,u=l.refs===vt?l.refs={}:l.refs,d=l.setupState,h=nt(d),p=d===vt?Ym:g=>at(h,g);if(c!=null&&c!==a){if(hh(e),Mt(c))u[c]=null,p(c)&&(d[c]=null);else if(rs(c)){c.value=null;const g=e;g.k&&(u[g.k]=null)}}if(qe(a))Ko(a,l,12,[o,u]);else{const g=Mt(a),k=rs(a);if(g||k){const m=()=>{if(s.f){const x=g?p(a)?d[a]:u[a]:a.value;if(n)Ie(x)&&Dd(x,r);else if(Ie(x))x.includes(r)||x.push(r);else if(g)u[a]=[r],p(a)&&(d[a]=u[a]);else{const V=[r];a.value=V,s.k&&(u[s.k]=V)}}else g?(u[a]=o,p(a)&&(d[a]=o)):k&&(a.value=o,s.k&&(u[s.k]=o))};if(o){const x=()=>{m(),fa.delete(s)};x.id=-1,fa.set(s,x),ds(x,t)}else hh(s),m()}}}function hh(s){const e=fa.get(s);e&&(e.flags|=8,fa.delete(s))}Wa().requestIdleCallback;Wa().cancelIdleCallback;const or=s=>!!s.type.__asyncLoader,Ga=s=>s.type.__isKeepAlive;function Y1(s,e){Bg(s,"a",e)}function Q1(s,e){Bg(s,"da",e)}function Bg(s,e,t=is){const i=s.__wdc||(s.__wdc=()=>{let n=t;for(;n;){if(n.isDeactivated)return;n=n.parent}return s()});if(Ja(e,i,t),t){let n=t.parent;for(;n&&n.parent;)Ga(n.parent.vnode)&&X1(i,e,t,n),n=n.parent}}function X1(s,e,t,i){const n=Ja(e,s,i,!0);Mr(()=>{Dd(i[e],n)},t)}function Ja(s,e,t=is,i=!1){if(t){const n=t[s]||(t[s]=[]),r=e.__weh||(e.__weh=(...o)=>{Ri();const l=Go(t),a=Xs(e,t,s,o);return l(),Li(),a});return i?n.unshift(r):n.push(r),r}}const Ni=s=>(e,t=is)=>{(!Co||s==="sp")&&Ja(s,(...i)=>e(...i),t)},Z1=Ni("bm"),os=Ni("m"),ek=Ni("bu"),tk=Ni("u"),Ig=Ni("bum"),Mr=Ni("um"),sk=Ni("sp"),ik=Ni("rtg"),nk=Ni("rtc");function rk(s,e=is){Ja("ec",s,e)}const Ng="components";function ha(s,e){return zg(Ng,s,!0,e)||s}const Fg=Symbol.for("v-ndc");function _s(s){return Mt(s)?zg(Ng,s,!1)||s:s||Fg}function zg(s,e,t=!0,i=!1){const n=Gt||is;if(n){const r=n.type;{const l=Gk(r,!1);if(l&&(l===e||l===Us(e)||l===Ha(Us(e))))return r}const o=ph(n[s]||r[s],e)||ph(n.appContext[s],e);return!o&&i?r:o}}function ph(s,e){return s&&(s[e]||s[Us(e)]||s[Ha(Us(e))])}function Le(s,e,t,i){let n;const r=t,o=Ie(s);if(o||Mt(s)){const l=o&&nr(s);let a=!1,c=!1;l&&(a=!Bs(s),c=nn(s),s=qa(s)),n=new Array(s.length);for(let u=0,d=s.length;u<d;u++)n[u]=e(a?c?aa(Wt(s[u])):Wt(s[u]):s[u],u,void 0,r)}else if(typeof s=="number"){n=new Array(s);for(let l=0;l<s;l++)n[l]=e(l+1,l,void 0,r)}else if(ht(s))if(s[Symbol.iterator])n=Array.from(s,(l,a)=>e(l,a,void 0,r));else{const l=Object.keys(s);n=new Array(l.length);for(let a=0,c=l.length;a<c;a++){const u=l[a];n[a]=e(s[u],u,a,r)}}else n=[];return n}function ok(s,e){for(let t=0;t<e.length;t++){const i=e[t];if(Ie(i))for(let n=0;n<i.length;n++)s[i[n].name]=i[n].fn;else i&&(s[i.name]=i.key?(...n)=>{const r=i.fn(...n);return r&&(r.key=i.key),r}:i.fn)}return s}function ut(s,e,t={},i,n){if(Gt.ce||Gt.parent&&or(Gt.parent)&&Gt.parent.ce){const c=Object.keys(t).length>0;return e!=="default"&&(t.name=e),v(),Ae(ve,null,[w("slot",t,i&&i())],c?-2:64)}let r=s[e];r&&r._c&&(r._d=!1),v();const o=r&&Ug(r(t)),l=t.key||o&&o.key,a=Ae(ve,{key:(l&&!Qs(l)?l:`_${e}`)+(!o&&i?"_fb":"")},o||(i?i():[]),o&&s._===1?64:-2);return!n&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),r&&r._c&&(r._d=!0),a}function Ug(s){return s.some(e=>So(e)?!(e.type===ss||e.type===ve&&!Ug(e.children)):!0)?s:null}const bc=s=>s?a0(s)?Za(s):bc(s.parent):null,ro=Ut(Object.create(null),{$:s=>s,$el:s=>s.vnode.el,$data:s=>s.data,$props:s=>s.props,$attrs:s=>s.attrs,$slots:s=>s.slots,$refs:s=>s.refs,$parent:s=>bc(s.parent),$root:s=>bc(s.root),$host:s=>s.ce,$emit:s=>s.emit,$options:s=>Wg(s),$forceUpdate:s=>s.f||(s.f=()=>{Bd(s.update)}),$nextTick:s=>s.n||(s.n=Rs.bind(s.proxy)),$watch:s=>Ek.bind(s)}),Eu=(s,e)=>s!==vt&&!s.__isScriptSetup&&at(s,e),lk={get({_:s},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:i,data:n,props:r,accessCache:o,type:l,appContext:a}=s;let c;if(e[0]!=="$"){const p=o[e];if(p!==void 0)switch(p){case 1:return i[e];case 2:return n[e];case 4:return t[e];case 3:return r[e]}else{if(Eu(i,e))return o[e]=1,i[e];if(n!==vt&&at(n,e))return o[e]=2,n[e];if((c=s.propsOptions[0])&&at(c,e))return o[e]=3,r[e];if(t!==vt&&at(t,e))return o[e]=4,t[e];kc&&(o[e]=0)}}const u=ro[e];let d,h;if(u)return e==="$attrs"&&es(s.attrs,"get",""),u(s);if((d=l.__cssModules)&&(d=d[e]))return d;if(t!==vt&&at(t,e))return o[e]=4,t[e];if(h=a.config.globalProperties,at(h,e))return h[e]},set({_:s},e,t){const{data:i,setupState:n,ctx:r}=s;return Eu(n,e)?(n[e]=t,!0):i!==vt&&at(i,e)?(i[e]=t,!0):at(s.props,e)||e[0]==="$"&&e.slice(1)in s?!1:(r[e]=t,!0)},has({_:{data:s,setupState:e,accessCache:t,ctx:i,appContext:n,propsOptions:r,type:o}},l){let a,c;return!!(t[l]||s!==vt&&l[0]!=="$"&&at(s,l)||Eu(e,l)||(a=r[0])&&at(a,l)||at(i,l)||at(ro,l)||at(n.config.globalProperties,l)||(c=o.__cssModules)&&c[l])},defineProperty(s,e,t){return t.get!=null?s._.accessCache[e]=0:at(t,"value")&&this.set(s,e,t.value,null),Reflect.defineProperty(s,e,t)}};function ak(){return uk().slots}function uk(s){const e=Ud();return e.setupContext||(e.setupContext=c0(e))}function mh(s){return Ie(s)?s.reduce((e,t)=>(e[t]=null,e),{}):s}let kc=!0;function ck(s){const e=Wg(s),t=s.proxy,i=s.ctx;kc=!1,e.beforeCreate&&gh(e.beforeCreate,s,"bc");const{data:n,computed:r,methods:o,watch:l,provide:a,inject:c,created:u,beforeMount:d,mounted:h,beforeUpdate:p,updated:g,activated:k,deactivated:m,beforeDestroy:x,beforeUnmount:V,destroyed:I,unmounted:U,render:N,renderTracked:P,renderTriggered:S,errorCaptured:j,serverPrefetch:H,expose:ue,inheritAttrs:X,components:B,directives:ae,filters:te}=e;if(c&&dk(c,i,null),o)for(const J in o){const ce=o[J];qe(ce)&&(i[J]=ce.bind(t))}if(n){const J=n.call(t,t);ht(J)&&(s.data=Gs(J))}if(kc=!0,r)for(const J in r){const ce=r[J],ye=qe(ce)?ce.bind(t,t):qe(ce.get)?ce.get.bind(t,t):yi,Pe=!qe(ce)&&qe(ce.set)?ce.set.bind(t):yi,Ve=z({get:ye,set:Pe});Object.defineProperty(i,J,{enumerable:!0,configurable:!0,get:()=>Ve.value,set:je=>Ve.value=je})}if(l)for(const J in l)Hg(l[J],i,t,J);if(a){const J=qe(a)?a.call(t):a;Reflect.ownKeys(J).forEach(ce=>{oo(ce,J[ce])})}u&&gh(u,s,"c");function K(J,ce){Ie(ce)?ce.forEach(ye=>J(ye.bind(t))):ce&&J(ce.bind(t))}if(K(Z1,d),K(os,h),K(ek,p),K(tk,g),K(Y1,k),K(Q1,m),K(rk,j),K(nk,P),K(ik,S),K(Ig,V),K(Mr,U),K(sk,H),Ie(ue))if(ue.length){const J=s.exposed||(s.exposed={});ue.forEach(ce=>{Object.defineProperty(J,ce,{get:()=>t[ce],set:ye=>t[ce]=ye,enumerable:!0})})}else s.exposed||(s.exposed={});N&&s.render===yi&&(s.render=N),X!=null&&(s.inheritAttrs=X),B&&(s.components=B),ae&&(s.directives=ae),H&&Vg(s)}function dk(s,e,t=yi){Ie(s)&&(s=xc(s));for(const i in s){const n=s[i];let r;ht(n)?"default"in n?r=Is(n.from||i,n.default,!0):r=Is(n.from||i):r=Is(n),rs(r)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):e[i]=r}}function gh(s,e,t){Xs(Ie(s)?s.map(i=>i.bind(e.proxy)):s.bind(e.proxy),e,t)}function Hg(s,e,t,i){let n=i.includes(".")?i0(t,i):()=>t[i];if(Mt(s)){const r=e[s];qe(r)&&Re(n,r)}else if(qe(s))Re(n,s.bind(t));else if(ht(s))if(Ie(s))s.forEach(r=>Hg(r,e,t,i));else{const r=qe(s.handler)?s.handler.bind(t):e[s.handler];qe(r)&&Re(n,r,s)}}function Wg(s){const e=s.type,{mixins:t,extends:i}=e,{mixins:n,optionsCache:r,config:{optionMergeStrategies:o}}=s.appContext,l=r.get(e);let a;return l?a=l:!n.length&&!t&&!i?a=e:(a={},n.length&&n.forEach(c=>pa(a,c,o,!0)),pa(a,e,o)),ht(e)&&r.set(e,a),a}function pa(s,e,t,i=!1){const{mixins:n,extends:r}=e;r&&pa(s,r,t,!0),n&&n.forEach(o=>pa(s,o,t,!0));for(const o in e)if(!(i&&o==="expose")){const l=fk[o]||t&&t[o];s[o]=l?l(s[o],e[o]):e[o]}return s}const fk={data:vh,props:yh,emits:yh,methods:Jr,computed:Jr,beforeCreate:cs,created:cs,beforeMount:cs,mounted:cs,beforeUpdate:cs,updated:cs,beforeDestroy:cs,beforeUnmount:cs,destroyed:cs,unmounted:cs,activated:cs,deactivated:cs,errorCaptured:cs,serverPrefetch:cs,components:Jr,directives:Jr,watch:pk,provide:vh,inject:hk};function vh(s,e){return e?s?function(){return Ut(qe(s)?s.call(this,this):s,qe(e)?e.call(this,this):e)}:e:s}function hk(s,e){return Jr(xc(s),xc(e))}function xc(s){if(Ie(s)){const e={};for(let t=0;t<s.length;t++)e[s[t]]=s[t];return e}return s}function cs(s,e){return s?[...new Set([].concat(s,e))]:e}function Jr(s,e){return s?Ut(Object.create(null),s,e):e}function yh(s,e){return s?Ie(s)&&Ie(e)?[...new Set([...s,...e])]:Ut(Object.create(null),mh(s),mh(e??{})):e}function pk(s,e){if(!s)return e;if(!e)return s;const t=Ut(Object.create(null),s);for(const i in e)t[i]=cs(s[i],e[i]);return t}function qg(){return{app:null,config:{isNativeTag:Ym,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let mk=0;function gk(s,e){return function(i,n=null){qe(i)||(i=Ut({},i)),n!=null&&!ht(n)&&(n=null);const r=qg(),o=new WeakSet,l=[];let a=!1;const c=r.app={_uid:mk++,_component:i,_props:n,_container:null,_context:r,_instance:null,version:Yk,get config(){return r.config},set config(u){},use(u,...d){return o.has(u)||(u&&qe(u.install)?(o.add(u),u.install(c,...d)):qe(u)&&(o.add(u),u(c,...d))),c},mixin(u){return r.mixins.includes(u)||r.mixins.push(u),c},component(u,d){return d?(r.components[u]=d,c):r.components[u]},directive(u,d){return d?(r.directives[u]=d,c):r.directives[u]},mount(u,d,h){if(!a){const p=c._ceVNode||w(i,n);return p.appContext=r,h===!0?h="svg":h===!1&&(h=void 0),s(p,u,h),a=!0,c._container=u,u.__vue_app__=c,Za(p.component)}},onUnmount(u){l.push(u)},unmount(){a&&(Xs(l,c._instance,16),s(null,c._container),delete c._container.__vue_app__)},provide(u,d){return r.provides[u]=d,c},runWithContext(u){const d=lr;lr=c;try{return u()}finally{lr=d}}};return c}}let lr=null;function oo(s,e){if(is){let t=is.provides;const i=is.parent&&is.parent.provides;i===t&&(t=is.provides=Object.create(i)),t[s]=e}}function Is(s,e,t=!1){const i=Ud();if(i||lr){let n=lr?lr._context.provides:i?i.parent==null||i.ce?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(n&&s in n)return n[s];if(arguments.length>1)return t&&qe(e)?e.call(i&&i.proxy):e}}const Kg={},Gg=()=>Object.create(Kg),Jg=s=>Object.getPrototypeOf(s)===Kg;function vk(s,e,t,i=!1){const n={},r=Gg();s.propsDefaults=Object.create(null),Yg(s,e,n,r);for(const o in s.propsOptions[0])o in n||(n[o]=void 0);t?s.props=i?n:yg(n):s.type.props?s.props=n:s.props=r,s.attrs=r}function yk(s,e,t,i){const{props:n,attrs:r,vnode:{patchFlag:o}}=s,l=nt(n),[a]=s.propsOptions;let c=!1;if((i||o>0)&&!(o&16)){if(o&8){const u=s.vnode.dynamicProps;for(let d=0;d<u.length;d++){let h=u[d];if(Ya(s.emitsOptions,h))continue;const p=e[h];if(a)if(at(r,h))p!==r[h]&&(r[h]=p,c=!0);else{const g=Us(h);n[g]=wc(a,l,g,p,s,!1)}else p!==r[h]&&(r[h]=p,c=!0)}}}else{Yg(s,e,n,r)&&(c=!0);let u;for(const d in l)(!e||!at(e,d)&&((u=Un(d))===d||!at(e,u)))&&(a?t&&(t[d]!==void 0||t[u]!==void 0)&&(n[d]=wc(a,l,d,void 0,s,!0)):delete n[d]);if(r!==l)for(const d in r)(!e||!at(e,d))&&(delete r[d],c=!0)}c&&Ti(s.attrs,"set","")}function Yg(s,e,t,i){const[n,r]=s.propsOptions;let o=!1,l;if(e)for(let a in e){if(eo(a))continue;const c=e[a];let u;n&&at(n,u=Us(a))?!r||!r.includes(u)?t[u]=c:(l||(l={}))[u]=c:Ya(s.emitsOptions,a)||(!(a in i)||c!==i[a])&&(i[a]=c,o=!0)}if(r){const a=nt(t),c=l||vt;for(let u=0;u<r.length;u++){const d=r[u];t[d]=wc(n,a,d,c[d],s,!at(c,d))}}return o}function wc(s,e,t,i,n,r){const o=s[t];if(o!=null){const l=at(o,"default");if(l&&i===void 0){const a=o.default;if(o.type!==Function&&!o.skipFactory&&qe(a)){const{propsDefaults:c}=n;if(t in c)i=c[t];else{const u=Go(n);i=c[t]=a.call(null,e),u()}}else i=a;n.ce&&n.ce._setProp(t,i)}o[0]&&(r&&!l?i=!1:o[1]&&(i===""||i===Un(t))&&(i=!0))}return i}const bk=new WeakMap;function Qg(s,e,t=!1){const i=t?bk:e.propsCache,n=i.get(s);if(n)return n;const r=s.props,o={},l=[];let a=!1;if(!qe(s)){const u=d=>{a=!0;const[h,p]=Qg(d,e,!0);Ut(o,h),p&&l.push(...p)};!t&&e.mixins.length&&e.mixins.forEach(u),s.extends&&u(s.extends),s.mixins&&s.mixins.forEach(u)}if(!r&&!a)return ht(s)&&i.set(s,sr),sr;if(Ie(r))for(let u=0;u<r.length;u++){const d=Us(r[u]);bh(d)&&(o[d]=vt)}else if(r)for(const u in r){const d=Us(u);if(bh(d)){const h=r[u],p=o[d]=Ie(h)||qe(h)?{type:h}:Ut({},h),g=p.type;let k=!1,m=!0;if(Ie(g))for(let x=0;x<g.length;++x){const V=g[x],I=qe(V)&&V.name;if(I==="Boolean"){k=!0;break}else I==="String"&&(m=!1)}else k=qe(g)&&g.name==="Boolean";p[0]=k,p[1]=m,(k||at(p,"default"))&&l.push(d)}}const c=[o,l];return ht(s)&&i.set(s,c),c}function bh(s){return s[0]!=="$"&&!eo(s)}const Id=s=>s==="_"||s==="_ctx"||s==="$stable",Nd=s=>Ie(s)?s.map(fi):[fi(s)],kk=(s,e,t)=>{if(e._n)return e;const i=ee((...n)=>Nd(e(...n)),t);return i._c=!1,i},Xg=(s,e,t)=>{const i=s._ctx;for(const n in s){if(Id(n))continue;const r=s[n];if(qe(r))e[n]=kk(n,r,i);else if(r!=null){const o=Nd(r);e[n]=()=>o}}},Zg=(s,e)=>{const t=Nd(e);s.slots.default=()=>t},e0=(s,e,t)=>{for(const i in e)(t||!Id(i))&&(s[i]=e[i])},xk=(s,e,t)=>{const i=s.slots=Gg();if(s.vnode.shapeFlag&32){const n=e._;n?(e0(i,e,t),t&&eg(i,"_",n,!0)):Xg(e,i)}else e&&Zg(s,e)},wk=(s,e,t)=>{const{vnode:i,slots:n}=s;let r=!0,o=vt;if(i.shapeFlag&32){const l=e._;l?t&&l===1?r=!1:e0(n,e,t):(r=!e.$stable,Xg(e,n)),o=e}else e&&(Zg(s,e),o={default:1});if(r)for(const l in n)!Id(l)&&o[l]==null&&delete n[l]},ds=Vk;function Sk(s){return Ck(s)}function Ck(s,e){const t=Wa();t.__VUE__=!0;const{insert:i,remove:n,patchProp:r,createElement:o,createText:l,createComment:a,setText:c,setElementText:u,parentNode:d,nextSibling:h,setScopeId:p=yi,insertStaticContent:g}=s,k=(_,E,F,ne=null,re=null,Z=null,D=void 0,O=null,R=!!E.dynamicChildren)=>{if(_===E)return;_&&!_n(_,E)&&(ne=oe(_),je(_,re,Z,!0),_=null),E.patchFlag===-2&&(R=!1,E.dynamicChildren=null);const{type:le,ref:_e,shapeFlag:ge}=E;switch(le){case Qa:m(_,E,F,ne);break;case ss:x(_,E,F,ne);break;case Jl:_==null&&V(E,F,ne,D);break;case ve:B(_,E,F,ne,re,Z,D,O,R);break;default:ge&1?N(_,E,F,ne,re,Z,D,O,R):ge&6?ae(_,E,F,ne,re,Z,D,O,R):(ge&64||ge&128)&&le.process(_,E,F,ne,re,Z,D,O,R,C)}_e!=null&&re?no(_e,_&&_.ref,Z,E||_,!E):_e==null&&_&&_.ref!=null&&no(_.ref,null,Z,_,!0)},m=(_,E,F,ne)=>{if(_==null)i(E.el=l(E.children),F,ne);else{const re=E.el=_.el;E.children!==_.children&&c(re,E.children)}},x=(_,E,F,ne)=>{_==null?i(E.el=a(E.children||""),F,ne):E.el=_.el},V=(_,E,F,ne)=>{[_.el,_.anchor]=g(_.children,E,F,ne,_.el,_.anchor)},I=({el:_,anchor:E},F,ne)=>{let re;for(;_&&_!==E;)re=h(_),i(_,F,ne),_=re;i(E,F,ne)},U=({el:_,anchor:E})=>{let F;for(;_&&_!==E;)F=h(_),n(_),_=F;n(E)},N=(_,E,F,ne,re,Z,D,O,R)=>{E.type==="svg"?D="svg":E.type==="math"&&(D="mathml"),_==null?P(E,F,ne,re,Z,D,O,R):H(_,E,re,Z,D,O,R)},P=(_,E,F,ne,re,Z,D,O)=>{let R,le;const{props:_e,shapeFlag:ge,transition:ke,dirs:Ee}=_;if(R=_.el=o(_.type,Z,_e&&_e.is,_e),ge&8?u(R,_.children):ge&16&&j(_.children,R,null,ne,re,Tu(_,Z),D,O),Ee&&vn(_,null,ne,"created"),S(R,_,_.scopeId,D,ne),_e){for(const he in _e)he!=="value"&&!eo(he)&&r(R,he,null,_e[he],Z,ne);"value"in _e&&r(R,"value",null,_e.value,Z),(le=_e.onVnodeBeforeMount)&&oi(le,ne,_)}Ee&&vn(_,null,ne,"beforeMount");const Ne=_k(re,ke);Ne&&ke.beforeEnter(R),i(R,E,F),((le=_e&&_e.onVnodeMounted)||Ne||Ee)&&ds(()=>{le&&oi(le,ne,_),Ne&&ke.enter(R),Ee&&vn(_,null,ne,"mounted")},re)},S=(_,E,F,ne,re)=>{if(F&&p(_,F),ne)for(let Z=0;Z<ne.length;Z++)p(_,ne[Z]);if(re){let Z=re.subTree;if(E===Z||r0(Z.type)&&(Z.ssContent===E||Z.ssFallback===E)){const D=re.vnode;S(_,D,D.scopeId,D.slotScopeIds,re.parent)}}},j=(_,E,F,ne,re,Z,D,O,R=0)=>{for(let le=R;le<_.length;le++){const _e=_[le]=O?Wi(_[le]):fi(_[le]);k(null,_e,E,F,ne,re,Z,D,O)}},H=(_,E,F,ne,re,Z,D)=>{const O=E.el=_.el;let{patchFlag:R,dynamicChildren:le,dirs:_e}=E;R|=_.patchFlag&16;const ge=_.props||vt,ke=E.props||vt;let Ee;if(F&&yn(F,!1),(Ee=ke.onVnodeBeforeUpdate)&&oi(Ee,F,E,_),_e&&vn(E,_,F,"beforeUpdate"),F&&yn(F,!0),(ge.innerHTML&&ke.innerHTML==null||ge.textContent&&ke.textContent==null)&&u(O,""),le?ue(_.dynamicChildren,le,O,F,ne,Tu(E,re),Z):D||ce(_,E,O,null,F,ne,Tu(E,re),Z,!1),R>0){if(R&16)X(O,ge,ke,F,re);else if(R&2&&ge.class!==ke.class&&r(O,"class",null,ke.class,re),R&4&&r(O,"style",ge.style,ke.style,re),R&8){const Ne=E.dynamicProps;for(let he=0;he<Ne.length;he++){const Ue=Ne[he],kt=ge[Ue],xt=ke[Ue];(xt!==kt||Ue==="value")&&r(O,Ue,kt,xt,re,F)}}R&1&&_.children!==E.children&&u(O,E.children)}else!D&&le==null&&X(O,ge,ke,F,re);((Ee=ke.onVnodeUpdated)||_e)&&ds(()=>{Ee&&oi(Ee,F,E,_),_e&&vn(E,_,F,"updated")},ne)},ue=(_,E,F,ne,re,Z,D)=>{for(let O=0;O<E.length;O++){const R=_[O],le=E[O],_e=R.el&&(R.type===ve||!_n(R,le)||R.shapeFlag&198)?d(R.el):F;k(R,le,_e,null,ne,re,Z,D,!0)}},X=(_,E,F,ne,re)=>{if(E!==F){if(E!==vt)for(const Z in E)!eo(Z)&&!(Z in F)&&r(_,Z,E[Z],null,re,ne);for(const Z in F){if(eo(Z))continue;const D=F[Z],O=E[Z];D!==O&&Z!=="value"&&r(_,Z,O,D,re,ne)}"value"in F&&r(_,"value",E.value,F.value,re)}},B=(_,E,F,ne,re,Z,D,O,R)=>{const le=E.el=_?_.el:l(""),_e=E.anchor=_?_.anchor:l("");let{patchFlag:ge,dynamicChildren:ke,slotScopeIds:Ee}=E;Ee&&(O=O?O.concat(Ee):Ee),_==null?(i(le,F,ne),i(_e,F,ne),j(E.children||[],F,_e,re,Z,D,O,R)):ge>0&&ge&64&&ke&&_.dynamicChildren?(ue(_.dynamicChildren,ke,F,re,Z,D,O),(E.key!=null||re&&E===re.subTree)&&Fd(_,E,!0)):ce(_,E,F,_e,re,Z,D,O,R)},ae=(_,E,F,ne,re,Z,D,O,R)=>{E.slotScopeIds=O,_==null?E.shapeFlag&512?re.ctx.activate(E,F,ne,D,R):te(E,F,ne,re,Z,D,R):$(_,E,R)},te=(_,E,F,ne,re,Z,D)=>{const O=_.component=Hk(_,ne,re);if(Ga(_)&&(O.ctx.renderer=C),Wk(O,!1,D),O.asyncDep){if(re&&re.registerDep(O,K,D),!_.el){const R=O.subTree=w(ss);x(null,R,E,F),_.placeholder=R.el}}else K(O,_,E,F,re,Z,D)},$=(_,E,F)=>{const ne=E.component=_.component;if(Rk(_,E,F))if(ne.asyncDep&&!ne.asyncResolved){J(ne,E,F);return}else ne.next=E,ne.update();else E.el=_.el,ne.vnode=E},K=(_,E,F,ne,re,Z,D)=>{const O=()=>{if(_.isMounted){let{next:ge,bu:ke,u:Ee,parent:Ne,vnode:he}=_;{const Tt=t0(_);if(Tt){ge&&(ge.el=he.el,J(_,ge,D)),Tt.asyncDep.then(()=>{_.isUnmounted||O()});return}}let Ue=ge,kt;yn(_,!1),ge?(ge.el=he.el,J(_,ge,D)):ge=he,ke&&Kl(ke),(kt=ge.props&&ge.props.onVnodeBeforeUpdate)&&oi(kt,Ne,ge,he),yn(_,!0);const xt=xh(_),Rt=_.subTree;_.subTree=xt,k(Rt,xt,d(Rt.el),oe(Rt),_,re,Z),ge.el=xt.el,Ue===null&&Lk(_,xt.el),Ee&&ds(Ee,re),(kt=ge.props&&ge.props.onVnodeUpdated)&&ds(()=>oi(kt,Ne,ge,he),re)}else{let ge;const{el:ke,props:Ee}=E,{bm:Ne,m:he,parent:Ue,root:kt,type:xt}=_,Rt=or(E);yn(_,!1),Ne&&Kl(Ne),!Rt&&(ge=Ee&&Ee.onVnodeBeforeMount)&&oi(ge,Ue,E),yn(_,!0);{kt.ce&&kt.ce._def.shadowRoot!==!1&&kt.ce._injectChildStyle(xt);const Tt=_.subTree=xh(_);k(null,Tt,F,ne,_,re,Z),E.el=Tt.el}if(he&&ds(he,re),!Rt&&(ge=Ee&&Ee.onVnodeMounted)){const Tt=E;ds(()=>oi(ge,Ue,Tt),re)}(E.shapeFlag&256||Ue&&or(Ue.vnode)&&Ue.vnode.shapeFlag&256)&&_.a&&ds(_.a,re),_.isMounted=!0,E=F=ne=null}};_.scope.on();const R=_.effect=new ng(O);_.scope.off();const le=_.update=R.run.bind(R),_e=_.job=R.runIfDirty.bind(R);_e.i=_,_e.id=_.uid,R.scheduler=()=>Bd(_e),yn(_,!0),le()},J=(_,E,F)=>{E.component=_;const ne=_.vnode.props;_.vnode=E,_.next=null,yk(_,E.props,ne,F),wk(_,E.children,F),Ri(),ah(_),Li()},ce=(_,E,F,ne,re,Z,D,O,R=!1)=>{const le=_&&_.children,_e=_?_.shapeFlag:0,ge=E.children,{patchFlag:ke,shapeFlag:Ee}=E;if(ke>0){if(ke&128){Pe(le,ge,F,ne,re,Z,D,O,R);return}else if(ke&256){ye(le,ge,F,ne,re,Z,D,O,R);return}}Ee&8?(_e&16&&Ze(le,re,Z),ge!==le&&u(F,ge)):_e&16?Ee&16?Pe(le,ge,F,ne,re,Z,D,O,R):Ze(le,re,Z,!0):(_e&8&&u(F,""),Ee&16&&j(ge,F,ne,re,Z,D,O,R))},ye=(_,E,F,ne,re,Z,D,O,R)=>{_=_||sr,E=E||sr;const le=_.length,_e=E.length,ge=Math.min(le,_e);let ke;for(ke=0;ke<ge;ke++){const Ee=E[ke]=R?Wi(E[ke]):fi(E[ke]);k(_[ke],Ee,F,null,re,Z,D,O,R)}le>_e?Ze(_,re,Z,!0,!1,ge):j(E,F,ne,re,Z,D,O,R,ge)},Pe=(_,E,F,ne,re,Z,D,O,R)=>{let le=0;const _e=E.length;let ge=_.length-1,ke=_e-1;for(;le<=ge&&le<=ke;){const Ee=_[le],Ne=E[le]=R?Wi(E[le]):fi(E[le]);if(_n(Ee,Ne))k(Ee,Ne,F,null,re,Z,D,O,R);else break;le++}for(;le<=ge&&le<=ke;){const Ee=_[ge],Ne=E[ke]=R?Wi(E[ke]):fi(E[ke]);if(_n(Ee,Ne))k(Ee,Ne,F,null,re,Z,D,O,R);else break;ge--,ke--}if(le>ge){if(le<=ke){const Ee=ke+1,Ne=Ee<_e?E[Ee].el:ne;for(;le<=ke;)k(null,E[le]=R?Wi(E[le]):fi(E[le]),F,Ne,re,Z,D,O,R),le++}}else if(le>ke)for(;le<=ge;)je(_[le],re,Z,!0),le++;else{const Ee=le,Ne=le,he=new Map;for(le=Ne;le<=ke;le++){const pt=E[le]=R?Wi(E[le]):fi(E[le]);pt.key!=null&&he.set(pt.key,le)}let Ue,kt=0;const xt=ke-Ne+1;let Rt=!1,Tt=0;const It=new Array(xt);for(le=0;le<xt;le++)It[le]=0;for(le=Ee;le<=ge;le++){const pt=_[le];if(kt>=xt){je(pt,re,Z,!0);continue}let ze;if(pt.key!=null)ze=he.get(pt.key);else for(Ue=Ne;Ue<=ke;Ue++)if(It[Ue-Ne]===0&&_n(pt,E[Ue])){ze=Ue;break}ze===void 0?je(pt,re,Z,!0):(It[ze-Ne]=le+1,ze>=Tt?Tt=ze:Rt=!0,k(pt,E[ze],F,null,re,Z,D,O,R),kt++)}const ni=Rt?Ak(It):sr;for(Ue=ni.length-1,le=xt-1;le>=0;le--){const pt=Ne+le,ze=E[pt],yt=E[pt+1],wi=pt+1<_e?yt.el||yt.placeholder:ne;It[le]===0?k(null,ze,F,wi,re,Z,D,O,R):Rt&&(Ue<0||le!==ni[Ue]?Ve(ze,F,wi,2):Ue--)}}},Ve=(_,E,F,ne,re=null)=>{const{el:Z,type:D,transition:O,children:R,shapeFlag:le}=_;if(le&6){Ve(_.component.subTree,E,F,ne);return}if(le&128){_.suspense.move(E,F,ne);return}if(le&64){D.move(_,E,F,C);return}if(D===ve){i(Z,E,F);for(let ge=0;ge<R.length;ge++)Ve(R[ge],E,F,ne);i(_.anchor,E,F);return}if(D===Jl){I(_,E,F);return}if(ne!==2&&le&1&&O)if(ne===0)O.beforeEnter(Z),i(Z,E,F),ds(()=>O.enter(Z),re);else{const{leave:ge,delayLeave:ke,afterLeave:Ee}=O,Ne=()=>{_.ctx.isUnmounted?n(Z):i(Z,E,F)},he=()=>{Z._isLeaving&&Z[Ei](!0),ge(Z,()=>{Ne(),Ee&&Ee()})};ke?ke(Z,Ne,he):he()}else i(Z,E,F)},je=(_,E,F,ne=!1,re=!1)=>{const{type:Z,props:D,ref:O,children:R,dynamicChildren:le,shapeFlag:_e,patchFlag:ge,dirs:ke,cacheIndex:Ee}=_;if(ge===-2&&(re=!1),O!=null&&(Ri(),no(O,null,F,_,!0),Li()),Ee!=null&&(E.renderCache[Ee]=void 0),_e&256){E.ctx.deactivate(_);return}const Ne=_e&1&&ke,he=!or(_);let Ue;if(he&&(Ue=D&&D.onVnodeBeforeUnmount)&&oi(Ue,E,_),_e&6)ot(_.component,F,ne);else{if(_e&128){_.suspense.unmount(F,ne);return}Ne&&vn(_,null,E,"beforeUnmount"),_e&64?_.type.remove(_,E,F,C,ne):le&&!le.hasOnce&&(Z!==ve||ge>0&&ge&64)?Ze(le,E,F,!1,!0):(Z===ve&&ge&384||!re&&_e&16)&&Ze(R,E,F),ne&&We(_)}(he&&(Ue=D&&D.onVnodeUnmounted)||Ne)&&ds(()=>{Ue&&oi(Ue,E,_),Ne&&vn(_,null,E,"unmounted")},F)},We=_=>{const{type:E,el:F,anchor:ne,transition:re}=_;if(E===ve){rt(F,ne);return}if(E===Jl){U(_);return}const Z=()=>{n(F),re&&!re.persisted&&re.afterLeave&&re.afterLeave()};if(_.shapeFlag&1&&re&&!re.persisted){const{leave:D,delayLeave:O}=re,R=()=>D(F,Z);O?O(_.el,Z,R):R()}else Z()},rt=(_,E)=>{let F;for(;_!==E;)F=h(_),n(_),_=F;n(E)},ot=(_,E,F)=>{const{bum:ne,scope:re,job:Z,subTree:D,um:O,m:R,a:le}=_;kh(R),kh(le),ne&&Kl(ne),re.stop(),Z&&(Z.flags|=8,je(D,_,E,F)),O&&ds(O,E),ds(()=>{_.isUnmounted=!0},E)},Ze=(_,E,F,ne=!1,re=!1,Z=0)=>{for(let D=Z;D<_.length;D++)je(_[D],E,F,ne,re)},oe=_=>{if(_.shapeFlag&6)return oe(_.component.subTree);if(_.shapeFlag&128)return _.suspense.next();const E=h(_.anchor||_.el),F=E&&E[Ag];return F?h(F):E};let Y=!1;const W=(_,E,F)=>{_==null?E._vnode&&je(E._vnode,null,null,!0):k(E._vnode||null,_,E,null,null,null,F),E._vnode=_,Y||(Y=!0,ah(),Sg(),Y=!1)},C={p:k,um:je,m:Ve,r:We,mt:te,mc:j,pc:ce,pbc:ue,n:oe,o:s};return{render:W,hydrate:void 0,createApp:gk(W)}}function Tu({type:s,props:e},t){return t==="svg"&&s==="foreignObject"||t==="mathml"&&s==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function yn({effect:s,job:e},t){t?(s.flags|=32,e.flags|=4):(s.flags&=-33,e.flags&=-5)}function _k(s,e){return(!s||s&&!s.pendingBranch)&&e&&!e.persisted}function Fd(s,e,t=!1){const i=s.children,n=e.children;if(Ie(i)&&Ie(n))for(let r=0;r<i.length;r++){const o=i[r];let l=n[r];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=n[r]=Wi(n[r]),l.el=o.el),!t&&l.patchFlag!==-2&&Fd(o,l)),l.type===Qa&&l.patchFlag!==-1&&(l.el=o.el),l.type===ss&&!l.el&&(l.el=o.el)}}function Ak(s){const e=s.slice(),t=[0];let i,n,r,o,l;const a=s.length;for(i=0;i<a;i++){const c=s[i];if(c!==0){if(n=t[t.length-1],s[n]<c){e[i]=n,t.push(i);continue}for(r=0,o=t.length-1;r<o;)l=r+o>>1,s[t[l]]<c?r=l+1:o=l;c<s[t[r]]&&(r>0&&(e[i]=t[r-1]),t[r]=i)}}for(r=t.length,o=t[r-1];r-- >0;)t[r]=o,o=e[o];return t}function t0(s){const e=s.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:t0(e)}function kh(s){if(s)for(let e=0;e<s.length;e++)s[e].flags|=8}const Mk=Symbol.for("v-scx"),Dk=()=>Is(Mk);function Re(s,e,t){return s0(s,e,t)}function s0(s,e,t=vt){const{immediate:i,deep:n,flush:r,once:o}=t,l=Ut({},t),a=e&&i||!e&&r!=="post";let c;if(Co){if(r==="sync"){const p=Dk();c=p.__watcherHandles||(p.__watcherHandles=[])}else if(!a){const p=()=>{};return p.stop=yi,p.resume=yi,p.pause=yi,p}}const u=is;l.call=(p,g,k)=>Xs(p,u,g,k);let d=!1;r==="post"?l.scheduler=p=>{ds(p,u&&u.suspense)}:r!=="sync"&&(d=!0,l.scheduler=(p,g)=>{g?p():Bd(p)}),l.augmentJob=p=>{e&&(p.flags|=4),d&&(p.flags|=2,u&&(p.id=u.uid,p.i=u))};const h=z1(s,e,l);return Co&&(c?c.push(h):a&&h()),h}function Ek(s,e,t){const i=this.proxy,n=Mt(s)?s.includes(".")?i0(i,s):()=>i[s]:s.bind(i,i);let r;qe(e)?r=e:(r=e.handler,t=e);const o=Go(this),l=s0(n,r.bind(i),t);return o(),l}function i0(s,e){const t=e.split(".");return()=>{let i=s;for(let n=0;n<t.length&&i;n++)i=i[t[n]];return i}}const Tk=(s,e)=>e==="modelValue"||e==="model-value"?s.modelModifiers:s[`${e}Modifiers`]||s[`${Us(e)}Modifiers`]||s[`${Un(e)}Modifiers`];function Ok(s,e,...t){if(s.isUnmounted)return;const i=s.vnode.props||vt;let n=t;const r=e.startsWith("update:"),o=r&&Tk(i,e.slice(7));o&&(o.trim&&(n=t.map(u=>Mt(u)?u.trim():u)),o.number&&(n=t.map(la)));let l,a=i[l=Su(e)]||i[l=Su(Us(e))];!a&&r&&(a=i[l=Su(Un(e))]),a&&Xs(a,s,6,n);const c=i[l+"Once"];if(c){if(!s.emitted)s.emitted={};else if(s.emitted[l])return;s.emitted[l]=!0,Xs(c,s,6,n)}}const jk=new WeakMap;function n0(s,e,t=!1){const i=t?jk:e.emitsCache,n=i.get(s);if(n!==void 0)return n;const r=s.emits;let o={},l=!1;if(!qe(s)){const a=c=>{const u=n0(c,e,!0);u&&(l=!0,Ut(o,u))};!t&&e.mixins.length&&e.mixins.forEach(a),s.extends&&a(s.extends),s.mixins&&s.mixins.forEach(a)}return!r&&!l?(ht(s)&&i.set(s,null),null):(Ie(r)?r.forEach(a=>o[a]=null):Ut(o,r),ht(s)&&i.set(s,o),o)}function Ya(s,e){return!s||!za(e)?!1:(e=e.slice(2).replace(/Once$/,""),at(s,e[0].toLowerCase()+e.slice(1))||at(s,Un(e))||at(s,e))}function xh(s){const{type:e,vnode:t,proxy:i,withProxy:n,propsOptions:[r],slots:o,attrs:l,emit:a,render:c,renderCache:u,props:d,data:h,setupState:p,ctx:g,inheritAttrs:k}=s,m=da(s);let x,V;try{if(t.shapeFlag&4){const U=n||i,N=U;x=fi(c.call(N,U,u,d,p,h,g)),V=l}else{const U=e;x=fi(U.length>1?U(d,{attrs:l,slots:o,emit:a}):U(d,null)),V=e.props?l:Pk(l)}}catch(U){lo.length=0,Ka(U,s,1),x=w(ss)}let I=x;if(V&&k!==!1){const U=Object.keys(V),{shapeFlag:N}=I;U.length&&N&7&&(r&&U.some(Md)&&(V=$k(V,r)),I=rn(I,V,!1,!0))}return t.dirs&&(I=rn(I,null,!1,!0),I.dirs=I.dirs?I.dirs.concat(t.dirs):t.dirs),t.transition&&xo(I,t.transition),x=I,da(m),x}const Pk=s=>{let e;for(const t in s)(t==="class"||t==="style"||za(t))&&((e||(e={}))[t]=s[t]);return e},$k=(s,e)=>{const t={};for(const i in s)(!Md(i)||!(i.slice(9)in e))&&(t[i]=s[i]);return t};function Rk(s,e,t){const{props:i,children:n,component:r}=s,{props:o,children:l,patchFlag:a}=e,c=r.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&a>=0){if(a&1024)return!0;if(a&16)return i?wh(i,o,c):!!o;if(a&8){const u=e.dynamicProps;for(let d=0;d<u.length;d++){const h=u[d];if(o[h]!==i[h]&&!Ya(c,h))return!0}}}else return(n||l)&&(!l||!l.$stable)?!0:i===o?!1:i?o?wh(i,o,c):!0:!!o;return!1}function wh(s,e,t){const i=Object.keys(e);if(i.length!==Object.keys(s).length)return!0;for(let n=0;n<i.length;n++){const r=i[n];if(e[r]!==s[r]&&!Ya(t,r))return!0}return!1}function Lk({vnode:s,parent:e},t){for(;e;){const i=e.subTree;if(i.suspense&&i.suspense.activeBranch===s&&(i.el=s.el),i===s)(s=e.vnode).el=t,e=e.parent;else break}}const r0=s=>s.__isSuspense;function Vk(s,e){e&&e.pendingBranch?Ie(s)?e.effects.push(...s):e.effects.push(s):W1(s)}const ve=Symbol.for("v-fgt"),Qa=Symbol.for("v-txt"),ss=Symbol.for("v-cmt"),Jl=Symbol.for("v-stc"),lo=[];let Os=null;function v(s=!1){lo.push(Os=s?null:[])}function Bk(){lo.pop(),Os=lo[lo.length-1]||null}let wo=1;function ma(s,e=!1){wo+=s,s<0&&Os&&e&&(Os.hasOnce=!0)}function o0(s){return s.dynamicChildren=wo>0?Os||sr:null,Bk(),wo>0&&Os&&Os.push(s),s}function b(s,e,t,i,n,r){return o0(f(s,e,t,i,n,r,!0))}function Ae(s,e,t,i,n){return o0(w(s,e,t,i,n,!0))}function So(s){return s?s.__v_isVNode===!0:!1}function _n(s,e){return s.type===e.type&&s.key===e.key}const l0=({key:s})=>s??null,Yl=({ref:s,ref_key:e,ref_for:t})=>(typeof s=="number"&&(s=""+s),s!=null?Mt(s)||rs(s)||qe(s)?{i:Gt,r:s,k:e,f:!!t}:s:null);function f(s,e=null,t=null,i=0,n=null,r=s===ve?0:1,o=!1,l=!1){const a={__v_isVNode:!0,__v_skip:!0,type:s,props:e,key:e&&l0(e),ref:e&&Yl(e),scopeId:_g,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:i,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:Gt};return l?(zd(a,t),r&128&&s.normalize(a)):t&&(a.shapeFlag|=Mt(t)?8:16),wo>0&&!o&&Os&&(a.patchFlag>0||r&6)&&a.patchFlag!==32&&Os.push(a),a}const w=Ik;function Ik(s,e=null,t=null,i=0,n=null,r=!1){if((!s||s===Fg)&&(s=ss),So(s)){const l=rn(s,e,!0);return t&&zd(l,t),wo>0&&!r&&Os&&(l.shapeFlag&6?Os[Os.indexOf(s)]=l:Os.push(l)),l.patchFlag=-2,l}if(Jk(s)&&(s=s.__vccOpts),e){e=Nk(e);let{class:l,style:a}=e;l&&!Mt(l)&&(e.class=be(l)),ht(a)&&(Vd(a)&&!Ie(a)&&(a=Ut({},a)),e.style=vo(a))}const o=Mt(s)?1:r0(s)?128:Mg(s)?64:ht(s)?4:qe(s)?2:0;return f(s,e,t,i,n,o,r,!0)}function Nk(s){return s?Vd(s)||Jg(s)?Ut({},s):s:null}function rn(s,e,t=!1,i=!1){const{props:n,ref:r,patchFlag:o,children:l,transition:a}=s,c=e?Fk(n||{},e):n,u={__v_isVNode:!0,__v_skip:!0,type:s.type,props:c,key:c&&l0(c),ref:e&&e.ref?t&&r?Ie(r)?r.concat(Yl(e)):[r,Yl(e)]:Yl(e):r,scopeId:s.scopeId,slotScopeIds:s.slotScopeIds,children:l,target:s.target,targetStart:s.targetStart,targetAnchor:s.targetAnchor,staticCount:s.staticCount,shapeFlag:s.shapeFlag,patchFlag:e&&s.type!==ve?o===-1?16:o|16:o,dynamicProps:s.dynamicProps,dynamicChildren:s.dynamicChildren,appContext:s.appContext,dirs:s.dirs,transition:a,component:s.component,suspense:s.suspense,ssContent:s.ssContent&&rn(s.ssContent),ssFallback:s.ssFallback&&rn(s.ssFallback),placeholder:s.placeholder,el:s.el,anchor:s.anchor,ctx:s.ctx,ce:s.ce};return a&&i&&xo(u,a.clone(u)),u}function de(s=" ",e=0){return w(Qa,null,s,e)}function Xa(s,e){const t=w(Jl,null,s);return t.staticCount=e,t}function G(s="",e=!1){return e?(v(),Ae(ss,null,s)):w(ss,null,s)}function fi(s){return s==null||typeof s=="boolean"?w(ss):Ie(s)?w(ve,null,s.slice()):So(s)?Wi(s):w(Qa,null,String(s))}function Wi(s){return s.el===null&&s.patchFlag!==-1||s.memo?s:rn(s)}function zd(s,e){let t=0;const{shapeFlag:i}=s;if(e==null)e=null;else if(Ie(e))t=16;else if(typeof e=="object")if(i&65){const n=e.default;n&&(n._c&&(n._d=!1),zd(s,n()),n._c&&(n._d=!0));return}else{t=32;const n=e._;!n&&!Jg(e)?e._ctx=Gt:n===3&&Gt&&(Gt.slots._===1?e._=1:(e._=2,s.patchFlag|=1024))}else qe(e)?(e={default:e,_ctx:Gt},t=32):(e=String(e),i&64?(t=16,e=[de(e)]):t=8);s.children=e,s.shapeFlag|=t}function Fk(...s){const e={};for(let t=0;t<s.length;t++){const i=s[t];for(const n in i)if(n==="class")e.class!==i.class&&(e.class=be([e.class,i.class]));else if(n==="style")e.style=vo([e.style,i.style]);else if(za(n)){const r=e[n],o=i[n];o&&r!==o&&!(Ie(r)&&r.includes(o))&&(e[n]=r?[].concat(r,o):o)}else n!==""&&(e[n]=i[n])}return e}function oi(s,e,t,i=null){Xs(s,e,7,[t,i])}const zk=qg();let Uk=0;function Hk(s,e,t){const i=s.type,n=(e?e.appContext:s.appContext)||zk,r={uid:Uk++,vnode:s,type:i,parent:e,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new m1(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(n.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Qg(i,n),emitsOptions:n0(i,n),emit:null,emitted:null,propsDefaults:vt,inheritAttrs:i.inheritAttrs,ctx:vt,data:vt,props:vt,attrs:vt,slots:vt,refs:vt,setupState:vt,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=Ok.bind(null,r),s.ce&&s.ce(r),r}let is=null;const Ud=()=>is||Gt;let ga,Sc;{const s=Wa(),e=(t,i)=>{let n;return(n=s[t])||(n=s[t]=[]),n.push(i),r=>{n.length>1?n.forEach(o=>o(r)):n[0](r)}};ga=e("__VUE_INSTANCE_SETTERS__",t=>is=t),Sc=e("__VUE_SSR_SETTERS__",t=>Co=t)}const Go=s=>{const e=is;return ga(s),s.scope.on(),()=>{s.scope.off(),ga(e)}},Sh=()=>{is&&is.scope.off(),ga(null)};function a0(s){return s.vnode.shapeFlag&4}let Co=!1;function Wk(s,e=!1,t=!1){e&&Sc(e);const{props:i,children:n}=s.vnode,r=a0(s);vk(s,i,r,e),xk(s,n,t||e);const o=r?qk(s,e):void 0;return e&&Sc(!1),o}function qk(s,e){const t=s.type;s.accessCache=Object.create(null),s.proxy=new Proxy(s.ctx,lk);const{setup:i}=t;if(i){Ri();const n=s.setupContext=i.length>1?c0(s):null,r=Go(s),o=Ko(i,s,0,[s.props,n]),l=Qm(o);if(Li(),r(),(l||s.sp)&&!or(s)&&Vg(s),l){if(o.then(Sh,Sh),e)return o.then(a=>{Ch(s,a)}).catch(a=>{Ka(a,s,0)});s.asyncDep=o}else Ch(s,o)}else u0(s)}function Ch(s,e,t){qe(e)?s.type.__ssrInlineRender?s.ssrRender=e:s.render=e:ht(e)&&(s.setupState=kg(e)),u0(s)}function u0(s,e,t){const i=s.type;s.render||(s.render=i.render||yi);{const n=Go(s);Ri();try{ck(s)}finally{Li(),n()}}}const Kk={get(s,e){return es(s,"get",""),s[e]}};function c0(s){const e=t=>{s.exposed=t||{}};return{attrs:new Proxy(s.attrs,Kk),slots:s.slots,emit:s.emit,expose:e}}function Za(s){return s.exposed?s.exposeProxy||(s.exposeProxy=new Proxy(kg(R1(s.exposed)),{get(e,t){if(t in e)return e[t];if(t in ro)return ro[t](s)},has(e,t){return t in e||t in ro}})):s.proxy}function Gk(s,e=!0){return qe(s)?s.displayName||s.name:s.name||e&&s.__name}function Jk(s){return qe(s)&&"__vccOpts"in s}const z=(s,e)=>N1(s,e,Co);function jt(s,e,t){try{ma(-1);const i=arguments.length;return i===2?ht(e)&&!Ie(e)?So(e)?w(s,null,[e]):w(s,e):w(s,null,e):(i>3?t=Array.prototype.slice.call(arguments,2):i===3&&So(t)&&(t=[t]),w(s,e,t))}finally{ma(1)}}const Yk="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Cc;const _h=typeof window<"u"&&window.trustedTypes;if(_h)try{Cc=_h.createPolicy("vue",{createHTML:s=>s})}catch{}const d0=Cc?s=>Cc.createHTML(s):s=>s,Qk="http://www.w3.org/2000/svg",Xk="http://www.w3.org/1998/Math/MathML",Di=typeof document<"u"?document:null,Ah=Di&&Di.createElement("template"),Zk={insert:(s,e,t)=>{e.insertBefore(s,t||null)},remove:s=>{const e=s.parentNode;e&&e.removeChild(s)},createElement:(s,e,t,i)=>{const n=e==="svg"?Di.createElementNS(Qk,s):e==="mathml"?Di.createElementNS(Xk,s):t?Di.createElement(s,{is:t}):Di.createElement(s);return s==="select"&&i&&i.multiple!=null&&n.setAttribute("multiple",i.multiple),n},createText:s=>Di.createTextNode(s),createComment:s=>Di.createComment(s),setText:(s,e)=>{s.nodeValue=e},setElementText:(s,e)=>{s.textContent=e},parentNode:s=>s.parentNode,nextSibling:s=>s.nextSibling,querySelector:s=>Di.querySelector(s),setScopeId(s,e){s.setAttribute(e,"")},insertStaticContent(s,e,t,i,n,r){const o=t?t.previousSibling:e.lastChild;if(n&&(n===r||n.nextSibling))for(;e.insertBefore(n.cloneNode(!0),t),!(n===r||!(n=n.nextSibling)););else{Ah.innerHTML=d0(i==="svg"?`<svg>${s}</svg>`:i==="mathml"?`<math>${s}</math>`:s);const l=Ah.content;if(i==="svg"||i==="mathml"){const a=l.firstChild;for(;a.firstChild;)l.appendChild(a.firstChild);l.removeChild(a)}e.insertBefore(l,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},zi="transition",Nr="animation",_o=Symbol("_vtc"),f0={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},ex=Ut({},Og,f0),tx=s=>(s.displayName="Transition",s.props=ex,s),Hd=tx((s,{slots:e})=>jt(J1,sx(s),e)),bn=(s,e=[])=>{Ie(s)?s.forEach(t=>t(...e)):s&&s(...e)},Mh=s=>s?Ie(s)?s.some(e=>e.length>1):s.length>1:!1;function sx(s){const e={};for(const B in s)B in f0||(e[B]=s[B]);if(s.css===!1)return e;const{name:t="v",type:i,duration:n,enterFromClass:r=`${t}-enter-from`,enterActiveClass:o=`${t}-enter-active`,enterToClass:l=`${t}-enter-to`,appearFromClass:a=r,appearActiveClass:c=o,appearToClass:u=l,leaveFromClass:d=`${t}-leave-from`,leaveActiveClass:h=`${t}-leave-active`,leaveToClass:p=`${t}-leave-to`}=s,g=ix(n),k=g&&g[0],m=g&&g[1],{onBeforeEnter:x,onEnter:V,onEnterCancelled:I,onLeave:U,onLeaveCancelled:N,onBeforeAppear:P=x,onAppear:S=V,onAppearCancelled:j=I}=e,H=(B,ae,te,$)=>{B._enterCancelled=$,kn(B,ae?u:l),kn(B,ae?c:o),te&&te()},ue=(B,ae)=>{B._isLeaving=!1,kn(B,d),kn(B,p),kn(B,h),ae&&ae()},X=B=>(ae,te)=>{const $=B?S:V,K=()=>H(ae,B,te);bn($,[ae,K]),Dh(()=>{kn(ae,B?a:r),_i(ae,B?u:l),Mh($)||Eh(ae,i,k,K)})};return Ut(e,{onBeforeEnter(B){bn(x,[B]),_i(B,r),_i(B,o)},onBeforeAppear(B){bn(P,[B]),_i(B,a),_i(B,c)},onEnter:X(!1),onAppear:X(!0),onLeave(B,ae){B._isLeaving=!0;const te=()=>ue(B,ae);_i(B,d),B._enterCancelled?(_i(B,h),jh(B)):(jh(B),_i(B,h)),Dh(()=>{B._isLeaving&&(kn(B,d),_i(B,p),Mh(U)||Eh(B,i,m,te))}),bn(U,[B,te])},onEnterCancelled(B){H(B,!1,void 0,!0),bn(I,[B])},onAppearCancelled(B){H(B,!0,void 0,!0),bn(j,[B])},onLeaveCancelled(B){ue(B),bn(N,[B])}})}function ix(s){if(s==null)return null;if(ht(s))return[Ou(s.enter),Ou(s.leave)];{const e=Ou(s);return[e,e]}}function Ou(s){return l1(s)}function _i(s,e){e.split(/\s+/).forEach(t=>t&&s.classList.add(t)),(s[_o]||(s[_o]=new Set)).add(e)}function kn(s,e){e.split(/\s+/).forEach(i=>i&&s.classList.remove(i));const t=s[_o];t&&(t.delete(e),t.size||(s[_o]=void 0))}function Dh(s){requestAnimationFrame(()=>{requestAnimationFrame(s)})}let nx=0;function Eh(s,e,t,i){const n=s._endId=++nx,r=()=>{n===s._endId&&i()};if(t!=null)return setTimeout(r,t);const{type:o,timeout:l,propCount:a}=rx(s,e);if(!o)return i();const c=o+"end";let u=0;const d=()=>{s.removeEventListener(c,h),r()},h=p=>{p.target===s&&++u>=a&&d()};setTimeout(()=>{u<a&&d()},l+1),s.addEventListener(c,h)}function rx(s,e){const t=window.getComputedStyle(s),i=g=>(t[g]||"").split(", "),n=i(`${zi}Delay`),r=i(`${zi}Duration`),o=Th(n,r),l=i(`${Nr}Delay`),a=i(`${Nr}Duration`),c=Th(l,a);let u=null,d=0,h=0;e===zi?o>0&&(u=zi,d=o,h=r.length):e===Nr?c>0&&(u=Nr,d=c,h=a.length):(d=Math.max(o,c),u=d>0?o>c?zi:Nr:null,h=u?u===zi?r.length:a.length:0);const p=u===zi&&/\b(?:transform|all)(?:,|$)/.test(i(`${zi}Property`).toString());return{type:u,timeout:d,propCount:h,hasTransform:p}}function Th(s,e){for(;s.length<e.length;)s=s.concat(s);return Math.max(...e.map((t,i)=>Oh(t)+Oh(s[i])))}function Oh(s){return s==="auto"?0:Number(s.slice(0,-1).replace(",","."))*1e3}function jh(s){return(s?s.ownerDocument:document).body.offsetHeight}function ox(s,e,t){const i=s[_o];i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?s.removeAttribute("class"):t?s.setAttribute("class",e):s.className=e}const va=Symbol("_vod"),h0=Symbol("_vsh"),et={name:"show",beforeMount(s,{value:e},{transition:t}){s[va]=s.style.display==="none"?"":s.style.display,t&&e?t.beforeEnter(s):Fr(s,e)},mounted(s,{value:e},{transition:t}){t&&e&&t.enter(s)},updated(s,{value:e,oldValue:t},{transition:i}){!e!=!t&&(i?e?(i.beforeEnter(s),Fr(s,!0),i.enter(s)):i.leave(s,()=>{Fr(s,!1)}):Fr(s,e))},beforeUnmount(s,{value:e}){Fr(s,e)}};function Fr(s,e){s.style.display=e?s[va]:"none",s[h0]=!e}const lx=Symbol(""),ax=/(?:^|;)\s*display\s*:/;function ux(s,e,t){const i=s.style,n=Mt(t);let r=!1;if(t&&!n){if(e)if(Mt(e))for(const o of e.split(";")){const l=o.slice(0,o.indexOf(":")).trim();t[l]==null&&Ql(i,l,"")}else for(const o in e)t[o]==null&&Ql(i,o,"");for(const o in t)o==="display"&&(r=!0),Ql(i,o,t[o])}else if(n){if(e!==t){const o=i[lx];o&&(t+=";"+o),i.cssText=t,r=ax.test(t)}}else e&&s.removeAttribute("style");va in s&&(s[va]=r?i.display:"",s[h0]&&(i.display="none"))}const Ph=/\s*!important$/;function Ql(s,e,t){if(Ie(t))t.forEach(i=>Ql(s,e,i));else if(t==null&&(t=""),e.startsWith("--"))s.setProperty(e,t);else{const i=cx(s,e);Ph.test(t)?s.setProperty(Un(i),t.replace(Ph,""),"important"):s[i]=t}}const $h=["Webkit","Moz","ms"],ju={};function cx(s,e){const t=ju[e];if(t)return t;let i=Us(e);if(i!=="filter"&&i in s)return ju[e]=i;i=Ha(i);for(let n=0;n<$h.length;n++){const r=$h[n]+i;if(r in s)return ju[e]=r}return e}const Rh="http://www.w3.org/1999/xlink";function Lh(s,e,t,i,n,r=h1(e)){i&&e.startsWith("xlink:")?t==null?s.removeAttributeNS(Rh,e.slice(6,e.length)):s.setAttributeNS(Rh,e,t):t==null||r&&!tg(t)?s.removeAttribute(e):s.setAttribute(e,r?"":Qs(t)?String(t):t)}function Vh(s,e,t,i,n){if(e==="innerHTML"||e==="textContent"){t!=null&&(s[e]=e==="innerHTML"?d0(t):t);return}const r=s.tagName;if(e==="value"&&r!=="PROGRESS"&&!r.includes("-")){const l=r==="OPTION"?s.getAttribute("value")||"":s.value,a=t==null?s.type==="checkbox"?"on":"":String(t);(l!==a||!("_value"in s))&&(s.value=a),t==null&&s.removeAttribute(e),s._value=t;return}let o=!1;if(t===""||t==null){const l=typeof s[e];l==="boolean"?t=tg(t):t==null&&l==="string"?(t="",o=!0):l==="number"&&(t=0,o=!0)}try{s[e]=t}catch{}o&&s.removeAttribute(n||e)}function ji(s,e,t,i){s.addEventListener(e,t,i)}function dx(s,e,t,i){s.removeEventListener(e,t,i)}const Bh=Symbol("_vei");function fx(s,e,t,i,n=null){const r=s[Bh]||(s[Bh]={}),o=r[e];if(i&&o)o.value=i;else{const[l,a]=hx(e);if(i){const c=r[e]=gx(i,n);ji(s,l,c,a)}else o&&(dx(s,l,o,a),r[e]=void 0)}}const Ih=/(?:Once|Passive|Capture)$/;function hx(s){let e;if(Ih.test(s)){e={};let i;for(;i=s.match(Ih);)s=s.slice(0,s.length-i[0].length),e[i[0].toLowerCase()]=!0}return[s[2]===":"?s.slice(3):Un(s.slice(2)),e]}let Pu=0;const px=Promise.resolve(),mx=()=>Pu||(px.then(()=>Pu=0),Pu=Date.now());function gx(s,e){const t=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=t.attached)return;Xs(vx(i,t.value),e,5,[i])};return t.value=s,t.attached=mx(),t}function vx(s,e){if(Ie(e)){const t=s.stopImmediatePropagation;return s.stopImmediatePropagation=()=>{t.call(s),s._stopped=!0},e.map(i=>n=>!n._stopped&&i&&i(n))}else return e}const Nh=s=>s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&s.charCodeAt(2)>96&&s.charCodeAt(2)<123,yx=(s,e,t,i,n,r)=>{const o=n==="svg";e==="class"?ox(s,i,o):e==="style"?ux(s,t,i):za(e)?Md(e)||fx(s,e,t,i,r):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):bx(s,e,i,o))?(Vh(s,e,i),!s.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Lh(s,e,i,o,r,e!=="value")):s._isVueCE&&(/[A-Z]/.test(e)||!Mt(i))?Vh(s,Us(e),i,r,e):(e==="true-value"?s._trueValue=i:e==="false-value"&&(s._falseValue=i),Lh(s,e,i,o))};function bx(s,e,t,i){if(i)return!!(e==="innerHTML"||e==="textContent"||e in s&&Nh(e)&&qe(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&s.tagName==="INPUT"||e==="type"&&s.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const n=s.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return Nh(e)&&Mt(t)?!1:e in s}const on=s=>{const e=s.props["onUpdate:modelValue"]||!1;return Ie(e)?t=>Kl(e,t):e};function kx(s){s.target.composing=!0}function Fh(s){const e=s.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Ns=Symbol("_assign"),pr={created(s,{modifiers:{lazy:e,trim:t,number:i}},n){s[Ns]=on(n);const r=i||n.props&&n.props.type==="number";ji(s,e?"change":"input",o=>{if(o.target.composing)return;let l=s.value;t&&(l=l.trim()),r&&(l=la(l)),s[Ns](l)}),t&&ji(s,"change",()=>{s.value=s.value.trim()}),e||(ji(s,"compositionstart",kx),ji(s,"compositionend",Fh),ji(s,"change",Fh))},mounted(s,{value:e}){s.value=e??""},beforeUpdate(s,{value:e,oldValue:t,modifiers:{lazy:i,trim:n,number:r}},o){if(s[Ns]=on(o),s.composing)return;const l=(r||s.type==="number")&&!/^0\d/.test(s.value)?la(s.value):s.value,a=e??"";l!==a&&(document.activeElement===s&&s.type!=="range"&&(i&&e===t||n&&s.value.trim()===a)||(s.value=a))}},xx={deep:!0,created(s,e,t){s[Ns]=on(t),ji(s,"change",()=>{const i=s._modelValue,n=mr(s),r=s.checked,o=s[Ns];if(Ie(i)){const l=Td(i,n),a=l!==-1;if(r&&!a)o(i.concat(n));else if(!r&&a){const c=[...i];c.splice(l,1),o(c)}}else if(Ar(i)){const l=new Set(i);r?l.add(n):l.delete(n),o(l)}else o(m0(s,r))})},mounted:zh,beforeUpdate(s,e,t){s[Ns]=on(t),zh(s,e,t)}};function zh(s,{value:e,oldValue:t},i){s._modelValue=e;let n;if(Ie(e))n=Td(e,i.props.value)>-1;else if(Ar(e))n=e.has(i.props.value);else{if(e===t)return;n=Rn(e,m0(s,!0))}s.checked!==n&&(s.checked=n)}const _c={created(s,{value:e},t){s.checked=Rn(e,t.props.value),s[Ns]=on(t),ji(s,"change",()=>{s[Ns](mr(s))})},beforeUpdate(s,{value:e,oldValue:t},i){s[Ns]=on(i),e!==t&&(s.checked=Rn(e,i.props.value))}},p0={deep:!0,created(s,{value:e,modifiers:{number:t}},i){const n=Ar(e);ji(s,"change",()=>{const r=Array.prototype.filter.call(s.options,o=>o.selected).map(o=>t?la(mr(o)):mr(o));s[Ns](s.multiple?n?new Set(r):r:r[0]),s._assigning=!0,Rs(()=>{s._assigning=!1})}),s[Ns]=on(i)},mounted(s,{value:e}){Uh(s,e)},beforeUpdate(s,e,t){s[Ns]=on(t)},updated(s,{value:e}){s._assigning||Uh(s,e)}};function Uh(s,e){const t=s.multiple,i=Ie(e);if(!(t&&!i&&!Ar(e))){for(let n=0,r=s.options.length;n<r;n++){const o=s.options[n],l=mr(o);if(t)if(i){const a=typeof l;a==="string"||a==="number"?o.selected=e.some(c=>String(c)===String(l)):o.selected=Td(e,l)>-1}else o.selected=e.has(l);else if(Rn(mr(o),e)){s.selectedIndex!==n&&(s.selectedIndex=n);return}}!t&&s.selectedIndex!==-1&&(s.selectedIndex=-1)}}function mr(s){return"_value"in s?s._value:s.value}function m0(s,e){const t=e?"_trueValue":"_falseValue";return t in s?s[t]:e}const wx={created(s,e,t){wl(s,e,t,null,"created")},mounted(s,e,t){wl(s,e,t,null,"mounted")},beforeUpdate(s,e,t,i){wl(s,e,t,i,"beforeUpdate")},updated(s,e,t,i){wl(s,e,t,i,"updated")}};function Sx(s,e){switch(s){case"SELECT":return p0;case"TEXTAREA":return pr;default:switch(e){case"checkbox":return xx;case"radio":return _c;default:return pr}}}function wl(s,e,t,i,n){const o=Sx(s.tagName,t.props&&t.props.type)[n];o&&o(s,e,t,i)}const Cx=["ctrl","shift","alt","meta"],_x={stop:s=>s.stopPropagation(),prevent:s=>s.preventDefault(),self:s=>s.target!==s.currentTarget,ctrl:s=>!s.ctrlKey,shift:s=>!s.shiftKey,alt:s=>!s.altKey,meta:s=>!s.metaKey,left:s=>"button"in s&&s.button!==0,middle:s=>"button"in s&&s.button!==1,right:s=>"button"in s&&s.button!==2,exact:(s,e)=>Cx.some(t=>s[`${t}Key`]&&!e.includes(t))},Ft=(s,e)=>{const t=s._withMods||(s._withMods={}),i=e.join(".");return t[i]||(t[i]=((n,...r)=>{for(let o=0;o<e.length;o++){const l=_x[e[o]];if(l&&l(n,e))return}return s(n,...r)}))},Ax=Ut({patchProp:yx},Zk);let Hh;function Mx(){return Hh||(Hh=Sk(Ax))}const Dx=((...s)=>{const e=Mx().createApp(...s),{mount:t}=e;return e.mount=i=>{const n=Tx(i);if(!n)return;const r=e._component;!qe(r)&&!r.render&&!r.template&&(r.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const o=t(n,!1,Ex(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),o},e});function Ex(s){if(s instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&s instanceof MathMLElement)return"mathml"}function Tx(s){return Mt(s)?document.querySelector(s):s}const Ox="/framework-logo.png";/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const Jn=typeof document<"u";function g0(s){return typeof s=="object"||"displayName"in s||"props"in s||"__vccOpts"in s}function jx(s){return s.__esModule||s[Symbol.toStringTag]==="Module"||s.default&&g0(s.default)}const lt=Object.assign;function $u(s,e){const t={};for(const i in e){const n=e[i];t[i]=Zs(n)?n.map(s):s(n)}return t}const ao=()=>{},Zs=Array.isArray;function Wh(s,e){const t={};for(const i in s)t[i]=i in e?e[i]:s[i];return t}const v0=/#/g,Px=/&/g,$x=/\//g,Rx=/=/g,Lx=/\?/g,y0=/\+/g,Vx=/%5B/g,Bx=/%5D/g,b0=/%5E/g,Ix=/%60/g,k0=/%7B/g,Nx=/%7C/g,x0=/%7D/g,Fx=/%20/g;function Wd(s){return s==null?"":encodeURI(""+s).replace(Nx,"|").replace(Vx,"[").replace(Bx,"]")}function zx(s){return Wd(s).replace(k0,"{").replace(x0,"}").replace(b0,"^")}function Ac(s){return Wd(s).replace(y0,"%2B").replace(Fx,"+").replace(v0,"%23").replace(Px,"%26").replace(Ix,"`").replace(k0,"{").replace(x0,"}").replace(b0,"^")}function Ux(s){return Ac(s).replace(Rx,"%3D")}function Hx(s){return Wd(s).replace(v0,"%23").replace(Lx,"%3F")}function Wx(s){return Hx(s).replace($x,"%2F")}function Ao(s){if(s==null)return null;try{return decodeURIComponent(""+s)}catch{}return""+s}const qx=/\/$/,Kx=s=>s.replace(qx,"");function Ru(s,e,t="/"){let i,n={},r="",o="";const l=e.indexOf("#");let a=e.indexOf("?");return a=l>=0&&a>l?-1:a,a>=0&&(i=e.slice(0,a),r=e.slice(a,l>0?l:e.length),n=s(r.slice(1))),l>=0&&(i=i||e.slice(0,l),o=e.slice(l,e.length)),i=Qx(i??e,t),{fullPath:i+r+o,path:i,query:n,hash:Ao(o)}}function Gx(s,e){const t=e.query?s(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function qh(s,e){return!e||!s.toLowerCase().startsWith(e.toLowerCase())?s:s.slice(e.length)||"/"}function Jx(s,e,t){const i=e.matched.length-1,n=t.matched.length-1;return i>-1&&i===n&&gr(e.matched[i],t.matched[n])&&w0(e.params,t.params)&&s(e.query)===s(t.query)&&e.hash===t.hash}function gr(s,e){return(s.aliasOf||s)===(e.aliasOf||e)}function w0(s,e){if(Object.keys(s).length!==Object.keys(e).length)return!1;for(const t in s)if(!Yx(s[t],e[t]))return!1;return!0}function Yx(s,e){return Zs(s)?Kh(s,e):Zs(e)?Kh(e,s):s===e}function Kh(s,e){return Zs(e)?s.length===e.length&&s.every((t,i)=>t===e[i]):s.length===1&&s[0]===e}function Qx(s,e){if(s.startsWith("/"))return s;if(!s)return e;const t=e.split("/"),i=s.split("/"),n=i[i.length-1];(n===".."||n===".")&&i.push("");let r=t.length-1,o,l;for(o=0;o<i.length;o++)if(l=i[o],l!==".")if(l==="..")r>1&&r--;else break;return t.slice(0,r).join("/")+"/"+i.slice(o).join("/")}const Ui={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Mc=(function(s){return s.pop="pop",s.push="push",s})({}),Lu=(function(s){return s.back="back",s.forward="forward",s.unknown="",s})({});function Xx(s){if(!s)if(Jn){const e=document.querySelector("base");s=e&&e.getAttribute("href")||"/",s=s.replace(/^\w+:\/\/[^\/]+/,"")}else s="/";return s[0]!=="/"&&s[0]!=="#"&&(s="/"+s),Kx(s)}const Zx=/^[^#]+#/;function ew(s,e){return s.replace(Zx,"#")+e}function tw(s,e){const t=document.documentElement.getBoundingClientRect(),i=s.getBoundingClientRect();return{behavior:e.behavior,left:i.left-t.left-(e.left||0),top:i.top-t.top-(e.top||0)}}const eu=()=>({left:window.scrollX,top:window.scrollY});function sw(s){let e;if("el"in s){const t=s.el,i=typeof t=="string"&&t.startsWith("#"),n=typeof t=="string"?i?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!n)return;e=tw(n,s)}else e=s;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Gh(s,e){return(history.state?history.state.position-e:-1)+s}const Dc=new Map;function iw(s,e){Dc.set(s,e)}function nw(s){const e=Dc.get(s);return Dc.delete(s),e}function rw(s){return typeof s=="string"||s&&typeof s=="object"}function S0(s){return typeof s=="string"||typeof s=="symbol"}let Dt=(function(s){return s[s.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",s[s.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",s[s.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",s[s.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",s[s.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",s})({});const C0=Symbol("");Dt.MATCHER_NOT_FOUND+"",Dt.NAVIGATION_GUARD_REDIRECT+"",Dt.NAVIGATION_ABORTED+"",Dt.NAVIGATION_CANCELLED+"",Dt.NAVIGATION_DUPLICATED+"";function vr(s,e){return lt(new Error,{type:s,[C0]:!0},e)}function Ai(s,e){return s instanceof Error&&C0 in s&&(e==null||!!(s.type&e))}const ow=["params","query","hash"];function lw(s){if(typeof s=="string")return s;if(s.path!=null)return s.path;const e={};for(const t of ow)t in s&&(e[t]=s[t]);return JSON.stringify(e,null,2)}function aw(s){const e={};if(s===""||s==="?")return e;const t=(s[0]==="?"?s.slice(1):s).split("&");for(let i=0;i<t.length;++i){const n=t[i].replace(y0," "),r=n.indexOf("="),o=Ao(r<0?n:n.slice(0,r)),l=r<0?null:Ao(n.slice(r+1));if(o in e){let a=e[o];Zs(a)||(a=e[o]=[a]),a.push(l)}else e[o]=l}return e}function Jh(s){let e="";for(let t in s){const i=s[t];if(t=Ux(t),i==null){i!==void 0&&(e+=(e.length?"&":"")+t);continue}(Zs(i)?i.map(n=>n&&Ac(n)):[i&&Ac(i)]).forEach(n=>{n!==void 0&&(e+=(e.length?"&":"")+t,n!=null&&(e+="="+n))})}return e}function uw(s){const e={};for(const t in s){const i=s[t];i!==void 0&&(e[t]=Zs(i)?i.map(n=>n==null?null:""+n):i==null?i:""+i)}return e}const cw=Symbol(""),Yh=Symbol(""),tu=Symbol(""),qd=Symbol(""),Ec=Symbol("");function zr(){let s=[];function e(i){return s.push(i),()=>{const n=s.indexOf(i);n>-1&&s.splice(n,1)}}function t(){s=[]}return{add:e,list:()=>s.slice(),reset:t}}function qi(s,e,t,i,n,r=o=>o()){const o=i&&(i.enterCallbacks[n]=i.enterCallbacks[n]||[]);return()=>new Promise((l,a)=>{const c=h=>{h===!1?a(vr(Dt.NAVIGATION_ABORTED,{from:t,to:e})):h instanceof Error?a(h):rw(h)?a(vr(Dt.NAVIGATION_GUARD_REDIRECT,{from:e,to:h})):(o&&i.enterCallbacks[n]===o&&typeof h=="function"&&o.push(h),l())},u=r(()=>s.call(i&&i.instances[n],e,t,c));let d=Promise.resolve(u);s.length<3&&(d=d.then(c)),d.catch(h=>a(h))})}function Vu(s,e,t,i,n=r=>r()){const r=[];for(const o of s)for(const l in o.components){let a=o.components[l];if(!(e!=="beforeRouteEnter"&&!o.instances[l]))if(g0(a)){const c=(a.__vccOpts||a)[e];c&&r.push(qi(c,t,i,o,l,n))}else{let c=a();r.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${l}" at "${o.path}"`);const d=jx(u)?u.default:u;o.mods[l]=u,o.components[l]=d;const h=(d.__vccOpts||d)[e];return h&&qi(h,t,i,o,l,n)()}))}}return r}function dw(s,e){const t=[],i=[],n=[],r=Math.max(e.matched.length,s.matched.length);for(let o=0;o<r;o++){const l=e.matched[o];l&&(s.matched.find(c=>gr(c,l))?i.push(l):t.push(l));const a=s.matched[o];a&&(e.matched.find(c=>gr(c,a))||n.push(a))}return[t,i,n]}/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let fw=()=>location.protocol+"//"+location.host;function _0(s,e){const{pathname:t,search:i,hash:n}=e,r=s.indexOf("#");if(r>-1){let o=n.includes(s.slice(r))?s.slice(r).length:1,l=n.slice(o);return l[0]!=="/"&&(l="/"+l),qh(l,"")}return qh(t,s)+i+n}function hw(s,e,t,i){let n=[],r=[],o=null;const l=({state:h})=>{const p=_0(s,location),g=t.value,k=e.value;let m=0;if(h){if(t.value=p,e.value=h,o&&o===g){o=null;return}m=k?h.position-k.position:0}else i(p);n.forEach(x=>{x(t.value,g,{delta:m,type:Mc.pop,direction:m?m>0?Lu.forward:Lu.back:Lu.unknown})})};function a(){o=t.value}function c(h){n.push(h);const p=()=>{const g=n.indexOf(h);g>-1&&n.splice(g,1)};return r.push(p),p}function u(){if(document.visibilityState==="hidden"){const{history:h}=window;if(!h.state)return;h.replaceState(lt({},h.state,{scroll:eu()}),"")}}function d(){for(const h of r)h();r=[],window.removeEventListener("popstate",l),window.removeEventListener("pagehide",u),document.removeEventListener("visibilitychange",u)}return window.addEventListener("popstate",l),window.addEventListener("pagehide",u),document.addEventListener("visibilitychange",u),{pauseListeners:a,listen:c,destroy:d}}function Qh(s,e,t,i=!1,n=!1){return{back:s,current:e,forward:t,replaced:i,position:window.history.length,scroll:n?eu():null}}function pw(s){const{history:e,location:t}=window,i={value:_0(s,t)},n={value:e.state};n.value||r(i.value,{back:null,current:i.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function r(a,c,u){const d=s.indexOf("#"),h=d>-1?(t.host&&document.querySelector("base")?s:s.slice(d))+a:fw()+s+a;try{e[u?"replaceState":"pushState"](c,"",h),n.value=c}catch(p){console.error(p),t[u?"replace":"assign"](h)}}function o(a,c){r(a,lt({},e.state,Qh(n.value.back,a,n.value.forward,!0),c,{position:n.value.position}),!0),i.value=a}function l(a,c){const u=lt({},n.value,e.state,{forward:a,scroll:eu()});r(u.current,u,!0),r(a,lt({},Qh(i.value,a,null),{position:u.position+1},c),!1),i.value=a}return{location:i,state:n,push:l,replace:o}}function mw(s){s=Xx(s);const e=pw(s),t=hw(s,e.state,e.location,e.replace);function i(r,o=!0){o||t.pauseListeners(),history.go(r)}const n=lt({location:"",base:s,go:i,createHref:ew.bind(null,s)},e,t);return Object.defineProperty(n,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(n,"state",{enumerable:!0,get:()=>e.state.value}),n}function gw(s){return s=location.host?s||location.pathname+location.search:"",s.includes("#")||(s+="#"),mw(s)}let Dn=(function(s){return s[s.Static=0]="Static",s[s.Param=1]="Param",s[s.Group=2]="Group",s})({});var Lt=(function(s){return s[s.Static=0]="Static",s[s.Param=1]="Param",s[s.ParamRegExp=2]="ParamRegExp",s[s.ParamRegExpEnd=3]="ParamRegExpEnd",s[s.EscapeNext=4]="EscapeNext",s})(Lt||{});const vw={type:Dn.Static,value:""},yw=/[a-zA-Z0-9_]/;function bw(s){if(!s)return[[]];if(s==="/")return[[vw]];if(!s.startsWith("/"))throw new Error(`Invalid path "${s}"`);function e(p){throw new Error(`ERR (${t})/"${c}": ${p}`)}let t=Lt.Static,i=t;const n=[];let r;function o(){r&&n.push(r),r=[]}let l=0,a,c="",u="";function d(){c&&(t===Lt.Static?r.push({type:Dn.Static,value:c}):t===Lt.Param||t===Lt.ParamRegExp||t===Lt.ParamRegExpEnd?(r.length>1&&(a==="*"||a==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),r.push({type:Dn.Param,value:c,regexp:u,repeatable:a==="*"||a==="+",optional:a==="*"||a==="?"})):e("Invalid state to consume buffer"),c="")}function h(){c+=a}for(;l<s.length;){if(a=s[l++],a==="\\"&&t!==Lt.ParamRegExp){i=t,t=Lt.EscapeNext;continue}switch(t){case Lt.Static:a==="/"?(c&&d(),o()):a===":"?(d(),t=Lt.Param):h();break;case Lt.EscapeNext:h(),t=i;break;case Lt.Param:a==="("?t=Lt.ParamRegExp:yw.test(a)?h():(d(),t=Lt.Static,a!=="*"&&a!=="?"&&a!=="+"&&l--);break;case Lt.ParamRegExp:a===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+a:t=Lt.ParamRegExpEnd:u+=a;break;case Lt.ParamRegExpEnd:d(),t=Lt.Static,a!=="*"&&a!=="?"&&a!=="+"&&l--,u="";break;default:e("Unknown state");break}}return t===Lt.ParamRegExp&&e(`Unfinished custom RegExp for param "${c}"`),d(),o(),n}const Xh="[^/]+?",kw={sensitive:!1,strict:!1,start:!0,end:!0};var fs=(function(s){return s[s._multiplier=10]="_multiplier",s[s.Root=90]="Root",s[s.Segment=40]="Segment",s[s.SubSegment=30]="SubSegment",s[s.Static=40]="Static",s[s.Dynamic=20]="Dynamic",s[s.BonusCustomRegExp=10]="BonusCustomRegExp",s[s.BonusWildcard=-50]="BonusWildcard",s[s.BonusRepeatable=-20]="BonusRepeatable",s[s.BonusOptional=-8]="BonusOptional",s[s.BonusStrict=.7000000000000001]="BonusStrict",s[s.BonusCaseSensitive=.25]="BonusCaseSensitive",s})(fs||{});const xw=/[.+*?^${}()[\]/\\]/g;function ww(s,e){const t=lt({},kw,e),i=[];let n=t.start?"^":"";const r=[];for(const c of s){const u=c.length?[]:[fs.Root];t.strict&&!c.length&&(n+="/");for(let d=0;d<c.length;d++){const h=c[d];let p=fs.Segment+(t.sensitive?fs.BonusCaseSensitive:0);if(h.type===Dn.Static)d||(n+="/"),n+=h.value.replace(xw,"\\$&"),p+=fs.Static;else if(h.type===Dn.Param){const{value:g,repeatable:k,optional:m,regexp:x}=h;r.push({name:g,repeatable:k,optional:m});const V=x||Xh;if(V!==Xh){p+=fs.BonusCustomRegExp;try{`${V}`}catch(U){throw new Error(`Invalid custom RegExp for param "${g}" (${V}): `+U.message)}}let I=k?`((?:${V})(?:/(?:${V}))*)`:`(${V})`;d||(I=m&&c.length<2?`(?:/${I})`:"/"+I),m&&(I+="?"),n+=I,p+=fs.Dynamic,m&&(p+=fs.BonusOptional),k&&(p+=fs.BonusRepeatable),V===".*"&&(p+=fs.BonusWildcard)}u.push(p)}i.push(u)}if(t.strict&&t.end){const c=i.length-1;i[c][i[c].length-1]+=fs.BonusStrict}t.strict||(n+="/?"),t.end?n+="$":t.strict&&!n.endsWith("/")&&(n+="(?:/|$)");const o=new RegExp(n,t.sensitive?"":"i");function l(c){const u=c.match(o),d={};if(!u)return null;for(let h=1;h<u.length;h++){const p=u[h]||"",g=r[h-1];d[g.name]=p&&g.repeatable?p.split("/"):p}return d}function a(c){let u="",d=!1;for(const h of s){(!d||!u.endsWith("/"))&&(u+="/"),d=!1;for(const p of h)if(p.type===Dn.Static)u+=p.value;else if(p.type===Dn.Param){const{value:g,repeatable:k,optional:m}=p,x=g in c?c[g]:"";if(Zs(x)&&!k)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const V=Zs(x)?x.join("/"):x;if(!V)if(m)h.length<2&&(u.endsWith("/")?u=u.slice(0,-1):d=!0);else throw new Error(`Missing required param "${g}"`);u+=V}}return u||"/"}return{re:o,score:i,keys:r,parse:l,stringify:a}}function Sw(s,e){let t=0;for(;t<s.length&&t<e.length;){const i=e[t]-s[t];if(i)return i;t++}return s.length<e.length?s.length===1&&s[0]===fs.Static+fs.Segment?-1:1:s.length>e.length?e.length===1&&e[0]===fs.Static+fs.Segment?1:-1:0}function A0(s,e){let t=0;const i=s.score,n=e.score;for(;t<i.length&&t<n.length;){const r=Sw(i[t],n[t]);if(r)return r;t++}if(Math.abs(n.length-i.length)===1){if(Zh(i))return 1;if(Zh(n))return-1}return n.length-i.length}function Zh(s){const e=s[s.length-1];return s.length>0&&e[e.length-1]<0}const Cw={strict:!1,end:!0,sensitive:!1};function _w(s,e,t){const i=ww(bw(s.path),t),n=lt(i,{record:s,parent:e,children:[],alias:[]});return e&&!n.record.aliasOf==!e.record.aliasOf&&e.children.push(n),n}function Aw(s,e){const t=[],i=new Map;e=Wh(Cw,e);function n(d){return i.get(d)}function r(d,h,p){const g=!p,k=tp(d);k.aliasOf=p&&p.record;const m=Wh(e,d),x=[k];if("alias"in d){const U=typeof d.alias=="string"?[d.alias]:d.alias;for(const N of U)x.push(tp(lt({},k,{components:p?p.record.components:k.components,path:N,aliasOf:p?p.record:k})))}let V,I;for(const U of x){const{path:N}=U;if(h&&N[0]!=="/"){const P=h.record.path,S=P[P.length-1]==="/"?"":"/";U.path=h.record.path+(N&&S+N)}if(V=_w(U,h,m),p?p.alias.push(V):(I=I||V,I!==V&&I.alias.push(V),g&&d.name&&!sp(V)&&o(d.name)),M0(V)&&a(V),k.children){const P=k.children;for(let S=0;S<P.length;S++)r(P[S],V,p&&p.children[S])}p=p||V}return I?()=>{o(I)}:ao}function o(d){if(S0(d)){const h=i.get(d);h&&(i.delete(d),t.splice(t.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=t.indexOf(d);h>-1&&(t.splice(h,1),d.record.name&&i.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function l(){return t}function a(d){const h=Ew(d,t);t.splice(h,0,d),d.record.name&&!sp(d)&&i.set(d.record.name,d)}function c(d,h){let p,g={},k,m;if("name"in d&&d.name){if(p=i.get(d.name),!p)throw vr(Dt.MATCHER_NOT_FOUND,{location:d});m=p.record.name,g=lt(ep(h.params,p.keys.filter(I=>!I.optional).concat(p.parent?p.parent.keys.filter(I=>I.optional):[]).map(I=>I.name)),d.params&&ep(d.params,p.keys.map(I=>I.name))),k=p.stringify(g)}else if(d.path!=null)k=d.path,p=t.find(I=>I.re.test(k)),p&&(g=p.parse(k),m=p.record.name);else{if(p=h.name?i.get(h.name):t.find(I=>I.re.test(h.path)),!p)throw vr(Dt.MATCHER_NOT_FOUND,{location:d,currentLocation:h});m=p.record.name,g=lt({},h.params,d.params),k=p.stringify(g)}const x=[];let V=p;for(;V;)x.unshift(V.record),V=V.parent;return{name:m,path:k,params:g,matched:x,meta:Dw(x)}}s.forEach(d=>r(d));function u(){t.length=0,i.clear()}return{addRoute:r,resolve:c,removeRoute:o,clearRoutes:u,getRoutes:l,getRecordMatcher:n}}function ep(s,e){const t={};for(const i of e)i in s&&(t[i]=s[i]);return t}function tp(s){const e={path:s.path,redirect:s.redirect,name:s.name,meta:s.meta||{},aliasOf:s.aliasOf,beforeEnter:s.beforeEnter,props:Mw(s),children:s.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in s?s.components||null:s.component&&{default:s.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function Mw(s){const e={},t=s.props||!1;if("component"in s)e.default=t;else for(const i in s.components)e[i]=typeof t=="object"?t[i]:t;return e}function sp(s){for(;s;){if(s.record.aliasOf)return!0;s=s.parent}return!1}function Dw(s){return s.reduce((e,t)=>lt(e,t.meta),{})}function Ew(s,e){let t=0,i=e.length;for(;t!==i;){const r=t+i>>1;A0(s,e[r])<0?i=r:t=r+1}const n=Tw(s);return n&&(i=e.lastIndexOf(n,i-1)),i}function Tw(s){let e=s;for(;e=e.parent;)if(M0(e)&&A0(s,e)===0)return e}function M0({record:s}){return!!(s.name||s.components&&Object.keys(s.components).length||s.redirect)}function ip(s){const e=Is(tu),t=Is(qd),i=z(()=>{const a=dt(s.to);return e.resolve(a)}),n=z(()=>{const{matched:a}=i.value,{length:c}=a,u=a[c-1],d=t.matched;if(!u||!d.length)return-1;const h=d.findIndex(gr.bind(null,u));if(h>-1)return h;const p=np(a[c-2]);return c>1&&np(u)===p&&d[d.length-1].path!==p?d.findIndex(gr.bind(null,a[c-2])):h}),r=z(()=>n.value>-1&&Rw(t.params,i.value.params)),o=z(()=>n.value>-1&&n.value===t.matched.length-1&&w0(t.params,i.value.params));function l(a={}){if($w(a)){const c=e[dt(s.replace)?"replace":"push"](dt(s.to)).catch(ao);return s.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:i,href:z(()=>i.value.href),isActive:r,isExactActive:o,navigate:l}}function Ow(s){return s.length===1?s[0]:s}const jw=Lg({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:ip,setup(s,{slots:e}){const t=Gs(ip(s)),{options:i}=Is(tu),n=z(()=>({[rp(s.activeClass,i.linkActiveClass,"router-link-active")]:t.isActive,[rp(s.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const r=e.default&&Ow(e.default(t));return s.custom?r:jt("a",{"aria-current":t.isExactActive?s.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:n.value},r)}}}),Pw=jw;function $w(s){if(!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)&&!s.defaultPrevented&&!(s.button!==void 0&&s.button!==0)){if(s.currentTarget&&s.currentTarget.getAttribute){const e=s.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return s.preventDefault&&s.preventDefault(),!0}}function Rw(s,e){for(const t in e){const i=e[t],n=s[t];if(typeof i=="string"){if(i!==n)return!1}else if(!Zs(n)||n.length!==i.length||i.some((r,o)=>r!==n[o]))return!1}return!0}function np(s){return s?s.aliasOf?s.aliasOf.path:s.path:""}const rp=(s,e,t)=>s??e??t,Lw=Lg({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(s,{attrs:e,slots:t}){const i=Is(Ec),n=z(()=>s.route||i.value),r=Is(Yh,0),o=z(()=>{let c=dt(r);const{matched:u}=n.value;let d;for(;(d=u[c])&&!d.components;)c++;return c}),l=z(()=>n.value.matched[o.value]);oo(Yh,z(()=>o.value+1)),oo(cw,l),oo(Ec,n);const a=ie();return Re(()=>[a.value,l.value,s.name],([c,u,d],[h,p,g])=>{u&&(u.instances[d]=c,p&&p!==u&&c&&c===h&&(u.leaveGuards.size||(u.leaveGuards=p.leaveGuards),u.updateGuards.size||(u.updateGuards=p.updateGuards))),c&&u&&(!p||!gr(u,p)||!h)&&(u.enterCallbacks[d]||[]).forEach(k=>k(c))},{flush:"post"}),()=>{const c=n.value,u=s.name,d=l.value,h=d&&d.components[u];if(!h)return op(t.default,{Component:h,route:c});const p=d.props[u],g=p?p===!0?c.params:typeof p=="function"?p(c):p:null,m=jt(h,lt({},g,e,{onVnodeUnmounted:x=>{x.component.isUnmounted&&(d.instances[u]=null)},ref:a}));return op(t.default,{Component:m,route:c})||m}}});function op(s,e){if(!s)return null;const t=s(e);return t.length===1?t[0]:t}const Vw=Lw;function Bw(s){const e=Aw(s.routes,s),t=s.parseQuery||aw,i=s.stringifyQuery||Jh,n=s.history,r=zr(),o=zr(),l=zr(),a=L1(Ui);let c=Ui;Jn&&s.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=$u.bind(null,oe=>""+oe),d=$u.bind(null,Wx),h=$u.bind(null,Ao);function p(oe,Y){let W,C;return S0(oe)?(W=e.getRecordMatcher(oe),C=Y):C=oe,e.addRoute(C,W)}function g(oe){const Y=e.getRecordMatcher(oe);Y&&e.removeRoute(Y)}function k(){return e.getRoutes().map(oe=>oe.record)}function m(oe){return!!e.getRecordMatcher(oe)}function x(oe,Y){if(Y=lt({},Y||a.value),typeof oe=="string"){const F=Ru(t,oe,Y.path),ne=e.resolve({path:F.path},Y),re=n.createHref(F.fullPath);return lt(F,ne,{params:h(ne.params),hash:Ao(F.hash),redirectedFrom:void 0,href:re})}let W;if(oe.path!=null)W=lt({},oe,{path:Ru(t,oe.path,Y.path).path});else{const F=lt({},oe.params);for(const ne in F)F[ne]==null&&delete F[ne];W=lt({},oe,{params:d(F)}),Y.params=d(Y.params)}const C=e.resolve(W,Y),se=oe.hash||"";C.params=u(h(C.params));const _=Gx(i,lt({},oe,{hash:zx(se),path:C.path})),E=n.createHref(_);return lt({fullPath:_,hash:se,query:i===Jh?uw(oe.query):oe.query||{}},C,{redirectedFrom:void 0,href:E})}function V(oe){return typeof oe=="string"?Ru(t,oe,a.value.path):lt({},oe)}function I(oe,Y){if(c!==oe)return vr(Dt.NAVIGATION_CANCELLED,{from:Y,to:oe})}function U(oe){return S(oe)}function N(oe){return U(lt(V(oe),{replace:!0}))}function P(oe,Y){const W=oe.matched[oe.matched.length-1];if(W&&W.redirect){const{redirect:C}=W;let se=typeof C=="function"?C(oe,Y):C;return typeof se=="string"&&(se=se.includes("?")||se.includes("#")?se=V(se):{path:se},se.params={}),lt({query:oe.query,hash:oe.hash,params:se.path!=null?{}:oe.params},se)}}function S(oe,Y){const W=c=x(oe),C=a.value,se=oe.state,_=oe.force,E=oe.replace===!0,F=P(W,C);if(F)return S(lt(V(F),{state:typeof F=="object"?lt({},se,F.state):se,force:_,replace:E}),Y||W);const ne=W;ne.redirectedFrom=Y;let re;return!_&&Jx(i,C,W)&&(re=vr(Dt.NAVIGATION_DUPLICATED,{to:ne,from:C}),Ve(C,C,!0,!1)),(re?Promise.resolve(re):ue(ne,C)).catch(Z=>Ai(Z)?Ai(Z,Dt.NAVIGATION_GUARD_REDIRECT)?Z:Pe(Z):ce(Z,ne,C)).then(Z=>{if(Z){if(Ai(Z,Dt.NAVIGATION_GUARD_REDIRECT))return S(lt({replace:E},V(Z.to),{state:typeof Z.to=="object"?lt({},se,Z.to.state):se,force:_}),Y||ne)}else Z=B(ne,C,!0,E,se);return X(ne,C,Z),Z})}function j(oe,Y){const W=I(oe,Y);return W?Promise.reject(W):Promise.resolve()}function H(oe){const Y=rt.values().next().value;return Y&&typeof Y.runWithContext=="function"?Y.runWithContext(oe):oe()}function ue(oe,Y){let W;const[C,se,_]=dw(oe,Y);W=Vu(C.reverse(),"beforeRouteLeave",oe,Y);for(const F of C)F.leaveGuards.forEach(ne=>{W.push(qi(ne,oe,Y))});const E=j.bind(null,oe,Y);return W.push(E),Ze(W).then(()=>{W=[];for(const F of r.list())W.push(qi(F,oe,Y));return W.push(E),Ze(W)}).then(()=>{W=Vu(se,"beforeRouteUpdate",oe,Y);for(const F of se)F.updateGuards.forEach(ne=>{W.push(qi(ne,oe,Y))});return W.push(E),Ze(W)}).then(()=>{W=[];for(const F of _)if(F.beforeEnter)if(Zs(F.beforeEnter))for(const ne of F.beforeEnter)W.push(qi(ne,oe,Y));else W.push(qi(F.beforeEnter,oe,Y));return W.push(E),Ze(W)}).then(()=>(oe.matched.forEach(F=>F.enterCallbacks={}),W=Vu(_,"beforeRouteEnter",oe,Y,H),W.push(E),Ze(W))).then(()=>{W=[];for(const F of o.list())W.push(qi(F,oe,Y));return W.push(E),Ze(W)}).catch(F=>Ai(F,Dt.NAVIGATION_CANCELLED)?F:Promise.reject(F))}function X(oe,Y,W){l.list().forEach(C=>H(()=>C(oe,Y,W)))}function B(oe,Y,W,C,se){const _=I(oe,Y);if(_)return _;const E=Y===Ui,F=Jn?history.state:{};W&&(C||E?n.replace(oe.fullPath,lt({scroll:E&&F&&F.scroll},se)):n.push(oe.fullPath,se)),a.value=oe,Ve(oe,Y,W,E),Pe()}let ae;function te(){ae||(ae=n.listen((oe,Y,W)=>{if(!ot.listening)return;const C=x(oe),se=P(C,ot.currentRoute.value);if(se){S(lt(se,{replace:!0,force:!0}),C).catch(ao);return}c=C;const _=a.value;Jn&&iw(Gh(_.fullPath,W.delta),eu()),ue(C,_).catch(E=>Ai(E,Dt.NAVIGATION_ABORTED|Dt.NAVIGATION_CANCELLED)?E:Ai(E,Dt.NAVIGATION_GUARD_REDIRECT)?(S(lt(V(E.to),{force:!0}),C).then(F=>{Ai(F,Dt.NAVIGATION_ABORTED|Dt.NAVIGATION_DUPLICATED)&&!W.delta&&W.type===Mc.pop&&n.go(-1,!1)}).catch(ao),Promise.reject()):(W.delta&&n.go(-W.delta,!1),ce(E,C,_))).then(E=>{E=E||B(C,_,!1),E&&(W.delta&&!Ai(E,Dt.NAVIGATION_CANCELLED)?n.go(-W.delta,!1):W.type===Mc.pop&&Ai(E,Dt.NAVIGATION_ABORTED|Dt.NAVIGATION_DUPLICATED)&&n.go(-1,!1)),X(C,_,E)}).catch(ao)}))}let $=zr(),K=zr(),J;function ce(oe,Y,W){Pe(oe);const C=K.list();return C.length?C.forEach(se=>se(oe,Y,W)):console.error(oe),Promise.reject(oe)}function ye(){return J&&a.value!==Ui?Promise.resolve():new Promise((oe,Y)=>{$.add([oe,Y])})}function Pe(oe){return J||(J=!oe,te(),$.list().forEach(([Y,W])=>oe?W(oe):Y()),$.reset()),oe}function Ve(oe,Y,W,C){const{scrollBehavior:se}=s;if(!Jn||!se)return Promise.resolve();const _=!W&&nw(Gh(oe.fullPath,0))||(C||!W)&&history.state&&history.state.scroll||null;return Rs().then(()=>se(oe,Y,_)).then(E=>E&&sw(E)).catch(E=>ce(E,oe,Y))}const je=oe=>n.go(oe);let We;const rt=new Set,ot={currentRoute:a,listening:!0,addRoute:p,removeRoute:g,clearRoutes:e.clearRoutes,hasRoute:m,getRoutes:k,resolve:x,options:s,push:U,replace:N,go:je,back:()=>je(-1),forward:()=>je(1),beforeEach:r.add,beforeResolve:o.add,afterEach:l.add,onError:K.add,isReady:ye,install(oe){oe.component("RouterLink",Pw),oe.component("RouterView",Vw),oe.config.globalProperties.$router=ot,Object.defineProperty(oe.config.globalProperties,"$route",{enumerable:!0,get:()=>dt(a)}),Jn&&!We&&a.value===Ui&&(We=!0,U(n.location).catch(C=>{}));const Y={};for(const C in Ui)Object.defineProperty(Y,C,{get:()=>a.value[C],enumerable:!0});oe.provide(tu,ot),oe.provide(qd,yg(Y)),oe.provide(Ec,a);const W=oe.unmount;rt.add(oe),oe.unmount=function(){rt.delete(oe),rt.size<1&&(c=Ui,ae&&ae(),ae=null,a.value=Ui,We=!1,J=!1),W()}}};function Ze(oe){return oe.reduce((Y,W)=>Y.then(()=>H(W)),Promise.resolve())}return ot}function su(){return Is(tu)}function Dr(s){return Is(qd)}const Mi=ie(!1);function Iw(){const s=()=>{Mi.value=!Mi.value},e=()=>{Mi.value=!0},t=()=>{Mi.value=!1};return Re(Mi,i=>{i?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},{immediate:!1}),os(()=>{const i=localStorage.getItem("theme");i?Mi.value=i==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches&&(Mi.value=!0),Mi.value?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}),{isDark:Mi,toggle:s,enable:e,disable:t}}function Nw(s,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 13.5V3.75m0 9.75a1.5 1.5 0 0 1 0 3m0-3a1.5 1.5 0 0 0 0 3m0 3.75V16.5m12-3V3.75m0 9.75a1.5 1.5 0 0 1 0 3m0-3a1.5 1.5 0 0 0 0 3m0 3.75V16.5m-6-9V3.75m0 3.75a1.5 1.5 0 0 1 0 3m0-3a1.5 1.5 0 0 0 0 3m0 9.75V10.5"})])}function Fw(s,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function zw(s,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})])}function Uw(s,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125"})])}function Kd(s,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}function Gd(s,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"})])}function ya(s,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}function Hw(s,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})])}function Ww(s,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"})])}function qw(s,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}function ba(s,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"})])}function iu(s,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"})])}function nu(s,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"})])}function Kw(s,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})])}function Jd(s,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5.25 14.25h13.5m-13.5 0a3 3 0 0 1-3-3m3 3a3 3 0 1 0 0 6h13.5a3 3 0 1 0 0-6m-16.5-3a3 3 0 0 1 3-3h13.5a3 3 0 0 1 3 3m-19.5 0a4.5 4.5 0 0 1 .9-2.7L5.737 5.1a3.375 3.375 0 0 1 2.7-1.35h7.126c1.062 0 2.062.5 2.7 1.35l2.587 3.45a4.5 4.5 0 0 1 .9 2.7m0 0a3 3 0 0 1-3 3m0 3h.008v.008h-.008v-.008Zm0-6h.008v.008h-.008v-.008Zm-3 6h.008v.008h-.008v-.008Zm0-6h.008v.008h-.008v-.008Z"})])}function Gw(s,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"})])}function Jw(s,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}const Yw={key:0,class:"pointer-events-auto w-full max-w-sm rounded-lg bg-white shadow-lg outline-1 outline-black/5 dark:bg-gray-800 dark:-outline-offset-1 dark:outline-white/10"},Qw={class:"p-4"},Xw={key:0,class:"shrink-0"},Zw={key:0,class:"w-0 flex-1 text-sm font-medium text-gray-900 dark:text-white"},e2={class:"text-sm font-medium text-gray-900 dark:text-white"},t2={key:0,class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},s2={__name:"Toast",props:{title:{type:String,required:!0},description:{type:String,default:null},type:{type:String,default:"success",validator:s=>["success","error","warning","info"].includes(s)},variant:{type:String,default:"regular",validator:s=>["regular","condensed"].includes(s)},action:{type:String,default:null},duration:{type:Number,default:5e3},autoClose:{type:Boolean,default:!0}},emits:["close","action"],setup(s,{emit:e}){const t=s,i=e,n=ie(!1);let r=null;const o=z(()=>{const c={success:Fw,error:Jw,warning:Hw,info:iu},u={success:"text-sky-400",error:"text-red-400",warning:"text-yellow-400",info:"text-blue-400"},d=c[t.type],h=u[t.type];return()=>jt(d,{class:`size-6 ${h}`})}),l=()=>{n.value=!1,r&&clearTimeout(r),setTimeout(()=>i("close"),200)},a=()=>{i("action"),l()};return os(()=>{n.value=!0,t.autoClose&&t.duration>0&&(r=setTimeout(l,t.duration))}),Re(()=>t.duration,c=>{r&&clearTimeout(r),t.autoClose&&c>0&&(r=setTimeout(l,c))}),(c,u)=>(v(),Ae(Hd,{"enter-active-class":"transform transition duration-300 ease-out","enter-from-class":"translate-y-2 opacity-0 sm:translate-x-2 sm:translate-y-0","enter-to-class":"translate-y-0 opacity-100 sm:translate-x-0","leave-active-class":"transition duration-200 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:ee(()=>[n.value?(v(),b("div",Yw,[f("div",Qw,[f("div",{class:be(s.variant==="condensed"?"flex items-center":"flex items-start")},[s.variant==="regular"?(v(),b("div",Xw,[(v(),Ae(_s(o.value),{class:"size-6"}))])):G("",!0),f("div",{class:be([s.variant==="regular"?"ml-3 w-0 flex-1 pt-0.5":"flex w-0 flex-1 justify-between"])},[s.variant==="condensed"?(v(),b("p",Zw,Q(s.title),1)):(v(),b(ve,{key:1},[f("p",e2,Q(s.title),1),s.description?(v(),b("p",t2,Q(s.description),1)):G("",!0)],64)),s.variant==="condensed"&&s.action?(v(),b("button",{key:2,type:"button",onClick:a,class:"ml-3 shrink-0 rounded-md bg-white text-sm font-medium text-sky-600 hover:text-sky-500 focus:outline-2 focus:outline-offset-2 focus:outline-sky-500 dark:bg-gray-800 dark:text-sky-400 dark:hover:text-sky-300 dark:focus:outline-sky-400"},Q(s.action),1)):G("",!0)],2),f("div",{class:"ml-4 flex shrink-0"},[f("button",{type:"button",onClick:l,class:"inline-flex rounded-md text-gray-400 hover:text-gray-500 focus:outline-2 focus:outline-offset-2 focus:outline-sky-600 dark:hover:text-white dark:focus:outline-sky-500"},[...u[0]||(u[0]=[f("span",{class:"sr-only"},"Close",-1),f("svg",{viewBox:"0 0 20 20",fill:"currentColor",class:"size-5"},[f("path",{d:"M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z"})],-1)])])])],2)])])):G("",!0)]),_:1}))}},i2={"aria-live":"assertive",class:"pointer-events-none fixed inset-0 flex items-end px-4 py-6 sm:items-start sm:p-6 z-50"},n2={class:"flex w-full flex-col items-center space-y-4 sm:items-end"},r2={__name:"ToastContainer",setup(s,{expose:e}){const t=ie([]);let i=1;const n=a=>{const c={id:i++,title:a.title,description:a.description||null,type:a.type||"success",variant:a.variant||"regular",action:a.action||null,duration:a.duration!==void 0?a.duration:5e3,autoClose:a.autoClose!==void 0?a.autoClose:!0,onAction:a.onAction||null};return t.value.push(c),c.id},r=a=>{const c=t.value.findIndex(u=>u.id===a);c>-1&&t.value.splice(c,1)},o=a=>{a.onAction&&a.onAction()};return e({addToast:n,removeToast:r,clearAll:()=>{t.value=[]}}),(a,c)=>(v(),Ae(Eg,{to:"body"},[f("div",i2,[f("div",n2,[(v(!0),b(ve,null,Le(t.value,u=>(v(),Ae(s2,{key:u.id,title:u.title,description:u.description,type:u.type,variant:u.variant,action:u.action,duration:u.duration,"auto-close":u.autoClose,onClose:d=>r(u.id),onAction:d=>o(u)},null,8,["title","description","type","variant","action","duration","auto-close","onClose","onAction"]))),128))])])]))}};let Sn=null;function o2(s){Sn=s}function ru(){const s=l=>{if(!Sn){console.warn('ToastContainer not initialized. Add <ToastContainer ref="toastContainer" /> to your App.vue');return}return Sn.addToast(l)};return{show:s,success:(l,a=null,c={})=>s({title:l,description:a,type:"success",...c}),error:(l,a=null,c={})=>s({title:l,description:a,type:"error",...c}),warning:(l,a=null,c={})=>s({title:l,description:a,type:"warning",...c}),info:(l,a=null,c={})=>s({title:l,description:a,type:"info",...c}),remove:l=>{Sn&&Sn.removeToast(l)},clearAll:()=>{Sn&&Sn.clearAll()}}}const l2={class:"flex min-h-screen bg-white dark:bg-zinc-900"},a2={class:"hidden lg:fixed lg:inset-y-0 lg:z-50 lg:flex lg:w-72 lg:flex-col xl:w-80"},u2={class:"flex grow flex-col overflow-y-auto border-r border-zinc-900/10 px-6 pb-8 pt-4 dark:border-white/10"},c2={key:0,class:"mt-6"},d2={class:"mt-10"},f2={role:"list"},h2={class:"relative mt-6"},p2={class:"relative mt-3 pl-2"},m2={role:"list",class:"border-l border-transparent"},g2={class:"truncate"},v2={key:0,class:"relative mt-6"},y2={class:"relative mt-3 pl-2"},b2={role:"list",class:"border-l border-transparent"},k2={class:"truncate"},x2={key:0,class:"text-xs text-zinc-400 dark:text-zinc-500"},w2={class:"sticky bottom-0 mt-6 border-t border-zinc-900/10 pt-6 dark:border-white/10"},S2={class:"lg:pl-72 xl:pl-80 w-full"},C2={class:"h-screen overflow-auto"},_2={__name:"App",setup(s){const e=ie(null),t=Dr(),{isDark:i,toggle:n}=Iw(),r=ie([]),o=async()=>{try{const g=await(await fetch("/api/settings/get")).json();r.value=g.projects||[]}catch(p){console.error("Failed to load projects:",p)}};oo("loadProjects",o);const l=p=>h.findIndex(k=>k.to==="/projects"&&t.path==="/projects/new"?!1:t.path.startsWith(k.to)),a=()=>r.value.findIndex(p=>t.path===`/project/${p.id}`),c=p=>p.to==="/projects"&&t.path==="/projects/new"?!1:t.path.startsWith(p.to),u=()=>jt("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[jt("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})]),d=()=>jt("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[jt("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})]),h=[{id:"projects",label:"Projects",to:"/projects"},{id:"settings",label:"New Project Defaults",to:"/settings"}];return os(async()=>{o2(e.value),await o()}),(p,g)=>{const k=ha("router-link"),m=ha("router-view");return v(),b("div",l2,[f("div",a2,[f("div",u2,[w(k,{to:"/",class:"flex items-center gap-3"},{default:ee(()=>[...g[1]||(g[1]=[f("img",{src:Ox,alt:"Framework",class:"h-10 w-10"},null,-1),f("span",{class:"text-lg font-semibold text-zinc-900 dark:text-white"},"Framework",-1)])]),_:1}),p.$route.path!=="/projects/new"?(v(),b("div",c2,[w(k,{to:"/projects/new",class:"flex w-full items-center justify-center gap-2 rounded-lg bg-white px-4 py-2.5 text-sm font-medium text-zinc-900 ring-1 ring-zinc-900/10 transition hover:bg-zinc-50 hover:ring-zinc-900/20 dark:bg-white/5 dark:text-white dark:ring-white/10 dark:hover:bg-white/10"},{default:ee(()=>[...g[2]||(g[2]=[f("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),de(" New Project ",-1)])]),_:1})])):G("",!0),f("nav",d2,[f("ul",f2,[f("li",h2,[g[4]||(g[4]=f("h2",{class:"text-xs font-semibold text-zinc-900 dark:text-white"}," Framework ",-1)),f("div",p2,[g[3]||(g[3]=f("div",{class:"absolute inset-y-0 left-2 w-px bg-zinc-900/10 dark:bg-white/5"},null,-1)),l()>=0?(v(),b("div",{key:0,class:"absolute left-2 h-6 w-px bg-sky-500 transition-all duration-200",style:vo({top:`${l()*32+4}px`})},null,4)):G("",!0),f("ul",m2,[(v(),b(ve,null,Le(h,x=>f("li",{key:x.id,class:"relative"},[w(k,{to:x.to,class:be(["flex justify-between gap-2 py-1 pl-4 pr-3 text-sm transition",c(x)?"text-zinc-900 dark:text-white":"text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white"])},{default:ee(()=>[f("span",g2,Q(x.label),1)]),_:2},1032,["to","class"])])),64))])])]),r.value.length>0?(v(),b("li",v2,[g[6]||(g[6]=f("h2",{class:"text-xs font-semibold text-zinc-900 dark:text-white"}," Your Projects ",-1)),f("div",y2,[g[5]||(g[5]=f("div",{class:"absolute inset-y-0 left-2 w-px bg-zinc-900/10 dark:bg-white/5"},null,-1)),a()>=0?(v(),b("div",{key:0,class:"absolute left-2 h-6 w-px bg-sky-500 transition-all duration-200",style:vo({top:`${a()*32+4}px`})},null,4)):G("",!0),f("ul",b2,[(v(!0),b(ve,null,Le(r.value,x=>(v(),b("li",{key:x.id,class:"relative"},[w(k,{to:`/project/${x.id}`,class:be(["flex justify-between gap-2 py-1 pl-4 pr-3 text-sm transition",p.$route.path===`/project/${x.id}`?"text-zinc-900 dark:text-white":"text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white"])},{default:ee(()=>[f("span",k2,Q(x.name),1),x.type?(v(),b("span",x2,Q(x.type==="project"?"":x.type==="course"?"":""),1)):G("",!0)]),_:2},1032,["to","class"])]))),128))])])])):G("",!0),f("li",w2,[f("button",{onClick:g[0]||(g[0]=(...x)=>dt(n)&&dt(n)(...x)),class:"flex w-full items-center gap-3 text-sm text-zinc-600 transition hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white"},[(v(),Ae(_s(dt(i)?d:u),{class:"h-5 w-5 shrink-0"})),de(" "+Q(dt(i)?"Light Mode":"Dark Mode"),1)])])])])])]),f("div",S2,[f("main",C2,[w(m)])]),w(r2,{ref_key:"toastContainer",ref:e},null,512)])}}},A2={key:0,class:"flex items-center justify-center py-12"},M2={key:1,class:"max-w-4xl prose prose-slate dark:prose-invert"},D2={class:"not-prose mb-8"},E2={class:"flex items-center gap-3 mb-2"},T2={class:"px-3 py-1 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded text-sm font-medium"},O2={class:"text-4xl font-bold text-slate-900 dark:text-white mb-4"},j2={class:"text-lg text-slate-600 dark:text-slate-400"},P2={class:"not-prose mb-8"},$2={class:"bg-slate-900 dark:bg-slate-950 rounded-lg p-4 overflow-x-auto"},R2={class:"text-sm text-slate-100"},L2={key:0,class:"not-prose mb-8"},V2={class:"space-y-4"},B2={class:"flex items-baseline gap-2 mb-1"},I2={class:"text-base font-mono font-semibold text-slate-900 dark:text-white"},N2={class:"text-sm text-slate-500 dark:text-slate-400"},F2={key:0,class:"text-xs text-red-600 dark:text-red-400 font-medium"},z2={key:1,class:"text-xs text-slate-500 dark:text-slate-400"},U2={class:"text-sm text-slate-600 dark:text-slate-400"},H2={class:"not-prose mb-8"},W2={class:"text-slate-700 dark:text-slate-300"},q2={key:1,class:"not-prose mb-8"},K2={class:"text-slate-700 dark:text-slate-300 whitespace-pre-line"},G2={key:2,class:"not-prose mb-8"},J2={class:"space-y-6"},Y2={class:"bg-slate-900 dark:bg-slate-950 rounded-lg p-4 overflow-x-auto mb-2"},Q2={class:"text-sm text-slate-100"},X2={class:"text-sm text-slate-600 dark:text-slate-400"},Z2={key:3,class:"not-prose mb-8"},eS={class:"space-y-2"},tS={class:"text-indigo-600 dark:text-indigo-400 font-mono font-semibold"},sS={class:"text-slate-700 dark:text-slate-300"},iS={key:4,class:"not-prose mb-8"},nS={class:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4"},rS={class:"list-disc list-inside space-y-1 text-sm text-amber-800 dark:text-amber-300"},oS={key:5,class:"not-prose"},lS={class:"flex items-center gap-2 flex-wrap"},aS={key:2,class:"text-center py-12"},uS={__name:"DocViewer",props:{functionName:{type:String,required:!0}},setup(s){const e=s,t=ie(null),i=ie(!0),n=async()=>{i.value=!0;try{const r=await fetch(`/docs/${e.functionName}.json`);r.ok?t.value=await r.json():t.value=null}catch(r){console.error("Failed to load documentation:",r),t.value=null}finally{i.value=!1}};return Re(()=>e.functionName,n),os(n),(r,o)=>i.value?(v(),b("div",A2,[...o[0]||(o[0]=[f("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"},null,-1)])])):t.value?(v(),b("div",M2,[f("div",D2,[f("div",E2,[f("span",T2,Q(t.value.category),1)]),f("h1",O2,Q(t.value.title),1),f("p",j2,Q(t.value.description),1)]),f("div",P2,[o[1]||(o[1]=f("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white mb-4"},"Usage",-1)),f("div",$2,[f("pre",R2,[f("code",null,Q(t.value.usage),1)])])]),t.value.params&&t.value.params.length>0?(v(),b("div",L2,[o[3]||(o[3]=f("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white mb-4"},"Parameters",-1)),f("div",V2,[(v(!0),b(ve,null,Le(t.value.params,l=>(v(),b("div",{key:l.name,class:"border-l-4 border-indigo-500 pl-4"},[f("div",B2,[f("code",I2,Q(l.name),1),f("span",N2,Q(l.type),1),l.required?(v(),b("span",F2," required ")):G("",!0),l.default?(v(),b("span",z2,[o[2]||(o[2]=de(" default: ",-1)),f("code",null,Q(l.default),1)])):G("",!0)]),f("p",U2,Q(l.description),1)]))),128))])])):G("",!0),f("div",H2,[o[4]||(o[4]=f("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white mb-4"},"Returns",-1)),f("p",W2,Q(t.value.returns),1)]),t.value.details?(v(),b("div",q2,[o[5]||(o[5]=f("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white mb-4"},"Details",-1)),f("div",K2,Q(t.value.details),1)])):G("",!0),t.value.examples&&t.value.examples.length>0?(v(),b("div",G2,[o[6]||(o[6]=f("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white mb-4"},"Examples",-1)),f("div",J2,[(v(!0),b(ve,null,Le(t.value.examples,(l,a)=>(v(),b("div",{key:a},[f("div",Y2,[f("pre",Q2,[f("code",null,Q(l.code),1)])]),f("p",X2,Q(l.description),1)]))),128))])])):G("",!0),t.value.see_also&&t.value.see_also.length>0?(v(),b("div",Z2,[o[7]||(o[7]=f("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white mb-4"},"See Also",-1)),f("ul",eS,[(v(!0),b(ve,null,Le(t.value.see_also,l=>(v(),b("li",{key:l.name},[f("code",tS,Q(l.name)+"() ",1),f("span",sS," - "+Q(l.description),1)]))),128))])])):G("",!0),t.value.notes&&t.value.notes.length>0?(v(),b("div",iS,[f("div",nS,[o[8]||(o[8]=f("h3",{class:"text-lg font-semibold text-amber-900 dark:text-amber-200 mb-2"},"Notes",-1)),f("ul",rS,[(v(!0),b(ve,null,Le(t.value.notes,(l,a)=>(v(),b("li",{key:a},Q(l),1))),128))])])])):G("",!0),t.value.tags&&t.value.tags.length>0?(v(),b("div",oS,[f("div",lS,[o[9]||(o[9]=f("span",{class:"text-sm text-slate-500 dark:text-slate-400"},"Tags:",-1)),(v(!0),b(ve,null,Le(t.value.tags,l=>(v(),b("span",{key:l,class:"px-2 py-1 bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 rounded text-xs"},Q(l),1))),128))])])):G("",!0)])):(v(),b("div",aS,[...o[10]||(o[10]=[f("p",{class:"text-slate-600 dark:text-slate-400"},"Documentation not found.",-1)])]))}},cS={class:"flex h-full"},dS={class:"w-64 flex-shrink-0 border-r border-zinc-900/10 dark:border-white/10 overflow-y-auto"},fS={class:"p-4"},hS={class:"mt-3 space-y-1"},pS={class:"mt-3 space-y-1"},mS={class:"mt-3 space-y-1"},gS={class:"flex-1 overflow-y-auto"},vS={key:1,class:"flex h-full items-center justify-center p-8"},lp={__name:"DocsView",setup(s){const e=Dr(),t=z(()=>e.params.functionName),i=[{name:"scaffold",title:"scaffold()"}],n=[{name:"data_load",title:"data_load()"}],r=[{name:"cache_get",title:"cache_get()"}];return(o,l)=>{const a=ha("router-link");return v(),b("div",cS,[f("div",dS,[f("div",fS,[l[0]||(l[0]=f("h2",{class:"text-xs font-semibold uppercase tracking-wide text-zinc-500 dark:text-zinc-400"}," Core Functions ",-1)),f("ul",hS,[(v(),b(ve,null,Le(i,c=>f("li",{key:c.name},[w(a,{to:`/docs/${c.name}`,class:be(["block rounded-md px-3 py-2 text-sm font-medium hover:bg-zinc-50 dark:hover:bg-zinc-800",t.value===c.name?"bg-sky-50 text-sky-600 dark:bg-sky-400/10 dark:text-sky-400":"text-zinc-700 dark:text-zinc-300"])},{default:ee(()=>[de(Q(c.title),1)]),_:2},1032,["to","class"])])),64))]),l[1]||(l[1]=f("h2",{class:"mt-6 text-xs font-semibold uppercase tracking-wide text-zinc-500 dark:text-zinc-400"}," Data Functions ",-1)),f("ul",pS,[(v(),b(ve,null,Le(n,c=>f("li",{key:c.name},[w(a,{to:`/docs/${c.name}`,class:be(["block rounded-md px-3 py-2 text-sm font-medium hover:bg-zinc-50 dark:hover:bg-zinc-800",t.value===c.name?"bg-sky-50 text-sky-600 dark:bg-sky-400/10 dark:text-sky-400":"text-zinc-700 dark:text-zinc-300"])},{default:ee(()=>[de(Q(c.title),1)]),_:2},1032,["to","class"])])),64))]),l[2]||(l[2]=f("h2",{class:"mt-6 text-xs font-semibold uppercase tracking-wide text-zinc-500 dark:text-zinc-400"}," Cache Functions ",-1)),f("ul",mS,[(v(),b(ve,null,Le(r,c=>f("li",{key:c.name},[w(a,{to:`/docs/${c.name}`,class:be(["block rounded-md px-3 py-2 text-sm font-medium hover:bg-zinc-50 dark:hover:bg-zinc-800",t.value===c.name?"bg-sky-50 text-sky-600 dark:bg-sky-400/10 dark:text-sky-400":"text-zinc-700 dark:text-zinc-300"])},{default:ee(()=>[de(Q(c.title),1)]),_:2},1032,["to","class"])])),64))])])]),f("div",gS,[t.value?(v(),Ae(uS,{key:0,functionName:t.value},null,8,["functionName"])):(v(),b("div",vS,[...l[3]||(l[3]=[f("div",{class:"text-center"},[f("h2",{class:"text-2xl font-bold text-zinc-900 dark:text-white"},"Framework Documentation"),f("p",{class:"mt-2 text-zinc-600 dark:text-zinc-400"}," Select a function from the sidebar to view its documentation. ")],-1)])]))])])}}},yS={key:0,class:"px-4 py-5 sm:px-6"},bS={class:"px-4 py-5 sm:p-6"},kS={key:1,class:"px-4 py-4 sm:px-6"},xS={__name:"Card",setup(s){const e=ak(),t=z(()=>{const i=["overflow-hidden","rounded-lg","bg-white","shadow-sm","dark:bg-gray-800/50","dark:shadow-none","dark:outline","dark:-outline-offset-1","dark:outline-white/10"];return(e.header||e.footer)&&i.push("divide-y","divide-gray-200","dark:divide-white/10"),i.join(" ")});return(i,n)=>(v(),b("div",{class:be(t.value)},[i.$slots.header?(v(),b("div",yS,[ut(i.$slots,"header")])):G("",!0),f("div",bS,[ut(i.$slots,"default")]),i.$slots.footer?(v(),b("div",kS,[ut(i.$slots,"footer")])):G("",!0)],2))}},Ge={__name:"Button",props:{variant:{type:String,default:"primary",validator:s=>["primary","secondary","soft"].includes(s)},size:{type:String,default:"md",validator:s=>["xs","sm","md","lg","xl"].includes(s)},rounded:{type:String,default:"md",validator:s=>["sm","md","full"].includes(s)},type:{type:String,default:"button"},href:{type:String,default:null},icon:{type:[Object,Function],default:null},iconPosition:{type:String,default:"left",validator:s=>["left","right"].includes(s)},iconOnly:{type:Boolean,default:!1}},emits:["click"],setup(s,{emit:e}){const t=s,i=e,n=l=>{i("click",l)},r=z(()=>{const l=["font-semibold","focus-visible:outline-2","focus-visible:outline-offset-2"],a={xs:t.iconOnly?"p-2":"px-3 py-2 text-xs",sm:t.iconOnly?"p-2.5":"px-3 py-2 text-sm",md:t.iconOnly?"p-3":"px-3.5 py-2.5 text-sm",lg:t.iconOnly?"p-3":"px-4 py-3 text-sm",xl:t.iconOnly?"p-3.5":"px-4.5 py-3.5 text-sm"};l.push(a[t.size]);const c={sm:"rounded-sm",md:"rounded-md",full:"rounded-full"};return l.push(c[t.rounded]),t.variant==="primary"?l.push("bg-sky-600","text-white","shadow-xs","hover:bg-sky-500","focus-visible:outline-sky-600","dark:bg-sky-500","dark:shadow-none","dark:hover:bg-sky-400","dark:focus-visible:outline-sky-500"):t.variant==="secondary"?l.push("bg-white","text-gray-900","shadow-xs","inset-ring","inset-ring-gray-300","hover:bg-gray-50","dark:bg-white/10","dark:text-white","dark:shadow-none","dark:inset-ring-white/5","dark:hover:bg-white/20"):t.variant==="soft"&&l.push("bg-sky-50","text-sky-600","shadow-xs","hover:bg-sky-100","dark:bg-sky-500/20","dark:text-sky-400","dark:shadow-none","dark:hover:bg-sky-500/30"),t.icon&&!t.iconOnly&&(l.push("inline-flex","items-center"),l.push(t.size==="xl"?"gap-x-2":"gap-x-1.5")),l.join(" ")}),o=z(()=>{const l=[];return t.iconOnly?l.push("size-5"):(l.push("size-5"),t.iconPosition==="left"?l.push("-ml-0.5"):l.push("-mr-0.5")),l.join(" ")});return(l,a)=>(v(),Ae(_s(s.href?"a":"button"),{href:s.href,type:s.href?void 0:s.type,class:be(r.value),onClick:n},{default:ee(()=>[s.icon&&s.iconPosition==="left"?(v(),b("svg",{key:0,viewBox:"0 0 20 20",fill:"currentColor","data-slot":"icon","aria-hidden":"true",class:be(o.value)},[(v(),Ae(_s(s.icon)))],2)):G("",!0),ut(l.$slots,"default"),s.icon&&s.iconPosition==="right"?(v(),b("svg",{key:1,viewBox:"0 0 20 20",fill:"currentColor","data-slot":"icon","aria-hidden":"true",class:be(o.value)},[(v(),Ae(_s(s.icon)))],2)):G("",!0)]),_:3},8,["href","type","class"]))}},wS=["for"],SS={key:1,class:"mt-2 flex"},CS={class:"flex shrink-0 items-center rounded-l-md bg-gray-100 px-2 text-base text-gray-500 outline-1 -outline-offset-1 outline-gray-300 sm:text-sm/6 dark:bg-white/5 dark:text-gray-400 dark:outline-white/10 font-mono"},_S=["id","type","value","placeholder","required","disabled","aria-invalid","aria-describedby"],AS={key:2,class:"mt-2"},MS=["id","type","value","placeholder","required","disabled","aria-invalid","aria-describedby"],DS={key:0,viewBox:"0 0 16 16",fill:"currentColor","data-slot":"icon","aria-hidden":"true",class:"pointer-events-none col-start-1 row-start-1 mr-3 size-5 self-center justify-self-end text-red-500 sm:size-4 dark:text-red-400"},ES=["id"],TS=["id"],Ce={__name:"Input",props:{id:{type:String,default:()=>`input-${Math.random().toString(36).substr(2,9)}`},modelValue:{type:[String,Number],default:""},type:{type:String,default:"text"},label:{type:String,default:null},placeholder:{type:String,default:""},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},error:{type:String,default:null},hint:{type:String,default:null},monospace:{type:Boolean,default:!1},prefix:{type:String,default:null}},emits:["update:modelValue","blur"],setup(s){const e=s,t=z(()=>{const n=["block","w-full","rounded-md","bg-white","px-3","py-1.5","text-base","outline-1","-outline-offset-1","placeholder:text-gray-400","focus:outline-2","focus:-outline-offset-2","sm:text-sm/6","dark:bg-white/5","dark:placeholder:text-gray-500"];return e.monospace&&n.push("font-mono"),e.error?n.push("col-start-1","row-start-1","pr-10","pl-3","text-red-900","outline-red-300","placeholder:text-red-300","focus:outline-red-600","sm:pr-9","dark:text-red-400","dark:outline-red-500/50","dark:placeholder:text-red-400/70","dark:focus:outline-red-400"):n.push("text-gray-900","outline-gray-300","focus:outline-sky-600","dark:text-white","dark:outline-white/10","dark:focus:outline-sky-500"),n.join(" ")}),i=z(()=>{const n=["-ml-px","block","w-full","grow","rounded-r-md","bg-white","px-3","py-1.5","text-base","outline-1","-outline-offset-1","placeholder:text-gray-400","focus:outline-2","focus:-outline-offset-2","sm:text-sm/6","dark:bg-white/5","dark:placeholder:text-gray-500"];return e.monospace&&n.push("font-mono"),e.error?n.push("text-red-900","outline-red-300","placeholder:text-red-300","focus:outline-red-600","dark:text-red-400","dark:outline-red-500/50","dark:placeholder:text-red-400/70","dark:focus:outline-red-400"):n.push("text-gray-900","outline-gray-300","focus:outline-sky-600","dark:text-white","dark:outline-white/10","dark:focus:outline-sky-500"),n.join(" ")});return(n,r)=>(v(),b("div",null,[s.label?(v(),b("label",{key:0,for:s.id,class:"block text-sm/6 font-medium text-gray-900 dark:text-white"},Q(s.label),9,wS)):G("",!0),s.prefix?(v(),b("div",SS,[f("div",CS,Q(s.prefix),1),f("input",{id:s.id,type:s.type,value:s.modelValue,placeholder:s.placeholder,required:s.required,disabled:s.disabled,"aria-invalid":s.error?"true":void 0,"aria-describedby":s.error?`${s.id}-error`:s.hint?`${s.id}-description`:void 0,onInput:r[0]||(r[0]=o=>n.$emit("update:modelValue",o.target.value)),onBlur:r[1]||(r[1]=o=>n.$emit("blur",o)),class:be(i.value)},null,42,_S)])):(v(),b("div",AS,[f("input",{id:s.id,type:s.type,value:s.modelValue,placeholder:s.placeholder,required:s.required,disabled:s.disabled,"aria-invalid":s.error?"true":void 0,"aria-describedby":s.error?`${s.id}-error`:s.hint?`${s.id}-description`:void 0,onInput:r[2]||(r[2]=o=>n.$emit("update:modelValue",o.target.value)),onBlur:r[3]||(r[3]=o=>n.$emit("blur",o)),class:be(t.value)},null,42,MS),s.error?(v(),b("svg",DS,[...r[4]||(r[4]=[f("path",{d:"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14ZM8 4a.75.75 0 0 1 .75.75v3a.75.75 0 0 1-1.5 0v-3A.75.75 0 0 1 8 4Zm0 8a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z","clip-rule":"evenodd","fill-rule":"evenodd"},null,-1)])])):G("",!0)])),s.error?(v(),b("p",{key:3,id:`${s.id}-error`,class:"mt-2 text-sm text-red-600 dark:text-red-400"},Q(s.error),9,ES)):G("",!0),s.hint&&!s.error?(v(),b("p",{key:4,id:`${s.id}-description`,class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},Q(s.hint),9,TS)):G("",!0)]))}},OS={class:"flex gap-3"},jS={class:"flex h-6 shrink-0 items-center"},PS={class:"group grid size-4 grid-cols-1"},$S=["id","name","checked","aria-describedby"],RS={class:"text-sm/6"},LS=["for"],VS=["id"],Yi={__name:"Checkbox",props:{id:{type:String,required:!0},name:{type:String,default:null},modelValue:{type:Boolean,default:!1},description:{type:String,default:null}},emits:["update:modelValue"],setup(s){return(e,t)=>(v(),b("div",OS,[f("div",jS,[f("div",PS,[f("input",{id:s.id,type:"checkbox",name:s.name,checked:s.modelValue,"aria-describedby":s.description?`${s.id}-description`:void 0,onChange:t[0]||(t[0]=i=>e.$emit("update:modelValue",i.target.checked)),class:"col-start-1 row-start-1 appearance-none rounded-sm border border-gray-300 bg-white checked:border-sky-600 checked:bg-sky-600 indeterminate:border-sky-600 indeterminate:bg-sky-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:checked:bg-gray-100 dark:border-white/10 dark:bg-white/5 dark:checked:border-sky-500 dark:checked:bg-sky-500 dark:indeterminate:border-sky-500 dark:indeterminate:bg-sky-500 dark:focus-visible:outline-sky-500 dark:disabled:border-white/5 dark:disabled:bg-white/10 dark:disabled:checked:bg-white/10 forced-colors:appearance-auto"},null,40,$S),t[1]||(t[1]=f("svg",{viewBox:"0 0 14 14",fill:"none",class:"pointer-events-none col-start-1 row-start-1 size-3.5 self-center justify-self-center stroke-white group-has-disabled:stroke-gray-950/25 dark:group-has-disabled:stroke-white/25"},[f("path",{d:"M3 8L6 11L11 3.5","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"opacity-0 group-has-checked:opacity-100"}),f("path",{d:"M3 7H11","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"opacity-0 group-has-indeterminate:opacity-100"})],-1))])]),f("div",RS,[f("label",{for:s.id,class:"font-medium text-gray-900 dark:text-white"},[ut(e.$slots,"default")],8,LS),s.description?(v(),b("p",{key:0,id:`${s.id}-description`,class:"text-gray-500 dark:text-gray-400"},Q(s.description),9,VS)):G("",!0)])]))}};function BS(s,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z","clip-rule":"evenodd"})])}function IS(s,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"fill-rule":"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z","clip-rule":"evenodd"})])}function NS(s,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 0 1 .67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 1 1-.671-1.34l.041-.022ZM12 9a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z","clip-rule":"evenodd"})])}function FS(s,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-1.72 6.97a.75.75 0 1 0-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 1 0 1.06 1.06L12 13.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L13.06 12l1.72-1.72a.75.75 0 1 0-1.06-1.06L12 10.94l-1.72-1.72Z","clip-rule":"evenodd"})])}const zS={class:"flex gap-3"},US={class:"flex-1"},ks={__name:"Alert",props:{type:{type:String,default:"info",validator:s=>["success","error","warning","info"].includes(s)},title:{type:String,default:null},description:{type:String,default:null},dismissible:{type:Boolean,default:!1}},emits:["dismiss"],setup(s,{emit:e}){const t=s,i=e,n={success:{container:"bg-sky-50 dark:bg-sky-900/20 inset-ring inset-ring-sky-200 dark:inset-ring-sky-800",icon:"text-sky-600 dark:text-sky-400",title:"text-sky-800 dark:text-sky-200",description:"text-sky-700 dark:text-sky-300",dismiss:"text-sky-600 hover:text-sky-700 dark:text-sky-400 dark:hover:text-sky-300"},error:{container:"bg-red-50 dark:bg-red-900/20 inset-ring inset-ring-red-200 dark:inset-ring-red-800",icon:"text-red-600 dark:text-red-400",title:"text-red-800 dark:text-red-200",description:"text-red-700 dark:text-red-300",dismiss:"text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300"},warning:{container:"bg-yellow-50 dark:bg-yellow-900/20 inset-ring inset-ring-yellow-200 dark:inset-ring-yellow-800",icon:"text-yellow-600 dark:text-yellow-400",title:"text-yellow-800 dark:text-yellow-200",description:"text-yellow-700 dark:text-yellow-300",dismiss:"text-yellow-600 hover:text-yellow-700 dark:text-yellow-400 dark:hover:text-yellow-300"},info:{container:"bg-blue-50 dark:bg-blue-900/20 inset-ring inset-ring-blue-200 dark:inset-ring-blue-800",icon:"text-blue-600 dark:text-blue-400",title:"text-blue-800 dark:text-blue-200",description:"text-blue-700 dark:text-blue-300",dismiss:"text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300"}},r=z(()=>`rounded-lg p-4 ${n[t.type].container}`),o=z(()=>`text-sm font-medium ${n[t.type].title}`),l=z(()=>{const d=[`text-sm ${n[t.type].description}`];return t.title&&d.push("mt-1"),d.join(" ")}),a=z(()=>`rounded-md p-1 ${n[t.type].dismiss} focus:outline-2 focus:outline-offset-2`),c=z(()=>({success:BS,error:FS,warning:IS,info:NS})[t.type]),u=()=>{i("dismiss")};return(d,h)=>(v(),b("div",{class:be(r.value),role:"alert"},[f("div",zS,[(v(),Ae(_s(c.value),{class:be(["h-5 w-5 shrink-0",n[s.type].icon])},null,8,["class"])),f("div",US,[s.title?(v(),b("p",{key:0,class:be(o.value)},Q(s.title),3)):G("",!0),s.description||d.$slots.default?(v(),b("p",{key:1,class:be(l.value)},[ut(d.$slots,"default",{},()=>[de(Q(s.description),1)])],2)):G("",!0)]),s.dismissible?(v(),b("button",{key:0,type:"button",onClick:u,class:be(a.value)},[...h[0]||(h[0]=[f("span",{class:"sr-only"},"Dismiss",-1),f("svg",{viewBox:"0 0 20 20",fill:"currentColor",class:"size-5"},[f("path",{d:"M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z"})],-1)])],2)):G("",!0)])],2))}},HS={class:"flex items-center justify-between"},WS={class:"space-y-6"},qS={key:0,class:"text-xs text-gray-500 dark:text-gray-400 space-y-1"},KS={key:0},GS={class:"font-mono"},JS={key:1},YS={class:"font-mono"},QS={class:"space-y-2"},XS=["onClick"],ZS={class:"flex items-start gap-3"},eC={class:"text-2xl mt-0.5"},tC={class:"flex-1"},sC={class:"font-semibold text-gray-900 dark:text-white"},iC={class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},nC={key:0,class:"text-sky-600 dark:text-sky-400"},rC={key:1,class:"bg-gray-50 dark:bg-gray-800/50 rounded-lg p-4"},oC={class:"space-y-3"},lC={class:"list-decimal list-inside mt-1 space-y-1"},aC={class:"flex items-center justify-end gap-3"},uC={__name:"ProjectWizard",props:{mode:{type:String,default:"modal",validator:s=>["modal","page"].includes(s)},projectsRoot:{type:String,default:""}},emits:["close","created"],setup(s,{emit:e}){const t=s,i=e,n=z(()=>t.mode==="modal"),r=z(()=>(t.projectsRoot||"").trim()),o=P=>/^([A-Za-z]:[\\/]|\\\\|\/|~)/.test(P),l=(P,S)=>{if(!P)return S;const j=S.replace(/^[\\/]+/,"");if(!j)return P;if(P.endsWith("/")||P.endsWith("\\"))return`${P}${j}`;const H=P.includes("\\")&&!P.includes("/")?"\\":"/";return`${P}${H}${j}`},a=z(()=>n.value?"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4":"flex w-full justify-center"),c=z(()=>n.value?"max-w-2xl w-full max-h-[90vh] overflow-y-auto":"w-full max-w-2xl shadow-xl"),u=Gs({directory:"",name:"",type:"project",sensitive:!1,use_git:!0,use_renv:!1,attach_defaults:!0}),d=z(()=>{const P=u.directory.trim();return P?o(P)||!r.value?P:l(r.value,P):r.value||""}),h=z(()=>{const P=u.directory.trim();return P?r.value.length>0||o(P):!1}),p=z(()=>r.value?`Folder will be created inside ${r.value}`:"The directory where your project will be created"),g=z(()=>r.value?"analytics-project":"my-analysis"),k=[{id:"project",title:"Data Analysis",description:"Full-featured project with notebooks, scripts, data management, and results tracking",icon:""},{id:"course",title:"Course Materials",description:"Teaching materials with slides, assignments, and course documentation",icon:""},{id:"presentation",title:"Presentation",description:"Single talk or presentation with minimal structure",icon:""}],m=ie(!1),x=ie(""),V=ie(!1),I=()=>{n.value&&i("close")},U=()=>{!u.name&&u.directory&&(u.name=u.directory.split(/[-_]/).map(P=>P.charAt(0).toUpperCase()+P.slice(1)).join(" "))},N=async()=>{x.value="",V.value=!1,m.value=!0;try{const P=d.value||u.directory,S=await fetch("/api/project/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_dir:P,project_name:u.name||u.directory,type:u.type,sensitive:u.sensitive,use_git:u.use_git,use_renv:u.use_renv,attach_defaults:u.attach_defaults})}),j=await S.json();S.ok&&j.success?(V.value=!0,j&&!j.path&&(j.path=P),i("created",j),n.value&&setTimeout(()=>{i("close")},3e3)):x.value=j.error||"Failed to create project"}catch(P){x.value="Network error: "+P.message}finally{m.value=!1}};return(P,S)=>(v(),b("div",{class:be(a.value),onClick:Ft(I,["self"])},[w(xS,{class:be(c.value)},{header:ee(()=>[f("div",HS,[S[9]||(S[9]=f("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Create New Project",-1)),n.value?(v(),b("button",{key:0,onClick:S[0]||(S[0]=j=>P.$emit("close")),class:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition"},[...S[8]||(S[8]=[f("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])):G("",!0)])]),footer:ee(()=>[f("div",aC,[w(Ge,{variant:"secondary",onClick:S[7]||(S[7]=j=>P.$emit("close"))},{default:ee(()=>[...S[23]||(S[23]=[de(" Cancel ",-1)])]),_:1}),w(Ge,{variant:"primary",onClick:N,disabled:m.value||!u.directory},{default:ee(()=>[de(Q(m.value?"Creating...":"Create Project"),1)]),_:1},8,["disabled"])])]),default:ee(()=>[f("div",WS,[w(Ce,{modelValue:u.directory,"onUpdate:modelValue":S[1]||(S[1]=j=>u.directory=j),label:"Project Directory",placeholder:g.value,hint:p.value,onInput:U},null,8,["modelValue","placeholder","hint"]),r.value||h.value?(v(),b("div",qS,[r.value?(v(),b("p",KS,[S[10]||(S[10]=de(" Projects will be created inside ",-1)),f("span",GS,Q(r.value),1),S[11]||(S[11]=de(". ",-1))])):G("",!0),h.value?(v(),b("p",JS,[S[12]||(S[12]=de(" Full path: ",-1)),f("span",YS,Q(d.value),1)])):G("",!0)])):G("",!0),w(Ce,{modelValue:u.name,"onUpdate:modelValue":S[2]||(S[2]=j=>u.name=j),label:"Project Name",placeholder:"My Analysis"},null,8,["modelValue"]),f("div",null,[S[14]||(S[14]=f("label",{class:"block text-sm/6 font-medium text-gray-900 dark:text-white mb-3"}," Project Type ",-1)),f("div",QS,[(v(),b(ve,null,Le(k,j=>f("div",{key:j.id,onClick:H=>u.type=j.id,class:be(["border-2 rounded-lg p-4 cursor-pointer transition",u.type===j.id?"border-sky-600 bg-sky-50 dark:bg-sky-900/20 dark:border-sky-500":"border-gray-200 dark:border-gray-700 hover:border-sky-300 dark:hover:border-sky-600"])},[f("div",ZS,[f("div",eC,Q(j.icon),1),f("div",tC,[f("h3",sC,Q(j.title),1),f("p",iC,Q(j.description),1)]),u.type===j.id?(v(),b("div",nC,[...S[13]||(S[13]=[f("svg",{class:"h-6 w-6",fill:"currentColor",viewBox:"0 0 20 20"},[f("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1)])])):G("",!0)])],10,XS)),64))])]),u.type==="project"?(v(),b("div",rC,[w(Yi,{modelValue:u.sensitive,"onUpdate:modelValue":S[3]||(S[3]=j=>u.sensitive=j),id:"sensitive",description:"Creates separate public/private directories for inputs, reference materials, and outputs. Recommended for PHI, PII, or IRB-restricted data."},{default:ee(()=>[...S[15]||(S[15]=[de(" Privacy-first mode ",-1)])]),_:1},8,["modelValue"])])):G("",!0),f("div",oC,[w(Yi,{modelValue:u.use_git,"onUpdate:modelValue":S[4]||(S[4]=j=>u.use_git=j),id:"use_git"},{default:ee(()=>[...S[16]||(S[16]=[de(" Initialize git repository ",-1)])]),_:1},8,["modelValue"]),w(Yi,{modelValue:u.use_renv,"onUpdate:modelValue":S[5]||(S[5]=j=>u.use_renv=j),id:"use_renv"},{default:ee(()=>[...S[17]||(S[17]=[de(" Enable renv for package management ",-1)])]),_:1},8,["modelValue"]),w(Yi,{modelValue:u.attach_defaults,"onUpdate:modelValue":S[6]||(S[6]=j=>u.attach_defaults=j),id:"attach_defaults"},{default:ee(()=>[...S[18]||(S[18]=[de(" Auto-load common packages (dplyr, tidyr, ggplot2) ",-1)])]),_:1},8,["modelValue"])]),x.value?(v(),Ae(ks,{key:2,type:"error",description:x.value},null,8,["description"])):G("",!0),V.value?(v(),Ae(ks,{key:3,type:"success",title:"Project created successfully!"},{default:ee(()=>[S[22]||(S[22]=f("p",{class:"mt-2"},"Next steps:",-1)),f("ol",lC,[f("li",null,"cd "+Q(d.value),1),S[19]||(S[19]=f("li",null,"R",-1)),S[20]||(S[20]=f("li",null,"library(framework)",-1)),S[21]||(S[21]=f("li",null,"scaffold()",-1))])]),_:1})):G("",!0)])]),_:1},8,["class"])],2))}},cC={class:"flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-sky-500 to-sky-600 shadow-lg shadow-sky-500/20"},dC={key:0,class:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},fC={key:1,class:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},hC={key:2,class:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},pC={__name:"ProjectTypeIcon",props:{type:{type:String,required:!0,validator:s=>["project","course","presentation"].includes(s)}},setup(s){return(e,t)=>(v(),b("div",cC,[s.type==="project"?(v(),b("svg",dC,[...t[0]||(t[0]=[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)])])):s.type==="course"?(v(),b("svg",fC,[...t[1]||(t[1]=[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"},null,-1)])])):(v(),b("svg",hC,[...t[2]||(t[2]=[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"},null,-1)])]))]))}},mC={class:"flex items-center gap-2 text-xs text-zinc-600 dark:text-zinc-400"},gC={class:"truncate"},vC={__name:"ProjectAuthor",props:{author:{type:Object,required:!0}},setup(s){return(e,t)=>(v(),b("div",mC,[t[1]||(t[1]=f("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),f("span",null,Q(s.author.author),1),s.author.author_email?(v(),b(ve,{key:0},[t[0]||(t[0]=f("span",{class:"text-zinc-400 dark:text-zinc-500"},"",-1)),f("span",gC,Q(s.author.author_email),1)],64)):G("",!0)]))}},yC={class:"flex items-center gap-2 text-xs text-zinc-500 dark:text-zinc-500"},bC={__name:"ProjectCreatedDate",props:{date:{type:String,required:!0}},setup(s){return(e,t)=>(v(),b("div",yC,[t[0]||(t[0]=f("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),f("span",null,"Created "+Q(s.date),1)]))}},ou={__name:"Badge",props:{variant:{type:String,default:"gray",validator:s=>["gray","red","yellow","green","blue","indigo","purple","pink","sky"].includes(s)},pill:{type:Boolean,default:!1},dot:{type:Boolean,default:!1}},setup(s){const e=s,t=z(()=>{const n=["inline-flex","items-center","px-2","py-1","text-xs","font-medium","inset-ring"];n.push(e.pill?"rounded-full":"rounded-md"),e.dot&&n.push("gap-x-1.5");const o={gray:{bg:"bg-gray-50",text:"text-gray-600",ring:"inset-ring-gray-500/10",darkBg:"dark:bg-gray-400/10",darkText:e.dot?"dark:text-gray-200":"dark:text-gray-400",darkRing:e.dot?"dark:inset-ring-white/10":"dark:inset-ring-gray-400/20"},red:{bg:"bg-red-50",text:"text-red-700",ring:"inset-ring-red-600/10",darkBg:"dark:bg-red-400/10",darkText:"dark:text-red-400",darkRing:"dark:inset-ring-red-400/20"},yellow:{bg:"bg-yellow-50",text:"text-yellow-800",ring:"inset-ring-yellow-600/20",darkBg:"dark:bg-yellow-400/10",darkText:"dark:text-yellow-500",darkRing:"dark:inset-ring-yellow-400/20"},green:{bg:"bg-green-50",text:"text-green-700",ring:"inset-ring-green-600/20",darkBg:"dark:bg-green-400/10",darkText:"dark:text-green-400",darkRing:"dark:inset-ring-green-500/20"},sky:{bg:"bg-sky-50",text:"text-sky-700",ring:"inset-ring-sky-600/20",darkBg:"dark:bg-sky-400/10",darkText:"dark:text-sky-400",darkRing:"dark:inset-ring-sky-500/20"},blue:{bg:"bg-blue-50",text:"text-blue-700",ring:"inset-ring-blue-700/10",darkBg:"dark:bg-blue-400/10",darkText:"dark:text-blue-400",darkRing:"dark:inset-ring-blue-400/30"},indigo:{bg:"bg-indigo-50",text:"text-indigo-700",ring:"inset-ring-indigo-700/10",darkBg:"dark:bg-indigo-400/10",darkText:"dark:text-indigo-400",darkRing:"dark:inset-ring-indigo-400/30"},purple:{bg:"bg-purple-50",text:"text-purple-700",ring:"inset-ring-purple-700/10",darkBg:"dark:bg-purple-400/10",darkText:"dark:text-purple-400",darkRing:"dark:inset-ring-purple-400/30"},pink:{bg:"bg-pink-50",text:"text-pink-700",ring:"inset-ring-pink-700/10",darkBg:"dark:bg-pink-400/10",darkText:"dark:text-pink-400",darkRing:"dark:inset-ring-pink-400/20"}}[e.variant];return e.dot?n.push("text-gray-900","inset-ring-gray-200","dark:text-white","dark:inset-ring-white/10"):n.push(o.bg,o.text,o.ring,o.darkBg,o.darkText,o.darkRing),n.join(" ")}),i=z(()=>`size-1.5 ${{gray:"fill-gray-500 dark:fill-gray-400",red:"fill-red-500 dark:fill-red-400",yellow:"fill-yellow-500 dark:fill-yellow-400",green:"fill-green-500 dark:fill-green-400",sky:"fill-sky-500 dark:fill-sky-400",blue:"fill-blue-500 dark:fill-blue-400",indigo:"fill-indigo-500 dark:fill-indigo-400",purple:"fill-purple-500 dark:fill-purple-400",pink:"fill-pink-500 dark:fill-pink-400"}[e.variant]}`);return(n,r)=>(v(),b("span",{class:be(t.value)},[s.dot?(v(),b("svg",{key:0,viewBox:"0 0 6 6","aria-hidden":"true",class:be(i.value)},[...r[0]||(r[0]=[f("circle",{r:"3",cx:"3",cy:"3"},null,-1)])],2)):G("",!0),ut(n.$slots,"default")],2))}},kC={class:"group relative overflow-hidden rounded-2xl border border-zinc-200 bg-white p-6 shadow-sm transition-all duration-300 hover:shadow-xl hover:shadow-zinc-900/5 dark:border-zinc-800 dark:bg-zinc-900 dark:hover:shadow-sky-500/5"},xC={class:"relative"},wC={class:"flex items-start justify-between"},SC={class:"flex-1"},CC={class:"flex items-center gap-3"},_C={class:"mt-4 text-xl font-bold text-zinc-900 dark:text-white"},AC={class:"mt-2 text-sm text-zinc-600 dark:text-zinc-400 font-mono truncate"},MC={class:"mt-6 flex gap-2"},DC={__name:"ProjectCard",props:{project:{type:Object,required:!0},typeLabel:{type:String,required:!0}},emits:["view","details"],setup(s){return(e,t)=>(v(),b("div",kC,[t[4]||(t[4]=f("div",{class:"absolute -right-6 -top-6 h-24 w-24 rounded-full bg-gradient-to-br from-sky-500/10 to-sky-600/10 blur-2xl transition-all duration-300 group-hover:scale-150"},null,-1)),f("div",xC,[f("div",wC,[f("div",SC,[f("div",CC,[w(pC,{type:s.project.type},null,8,["type"]),w(ou,{variant:"sky"},{default:ee(()=>[de(Q(s.typeLabel),1)]),_:1})]),f("h3",_C,Q(s.project.name),1),f("p",AC,Q(s.project.path),1),s.project.author?(v(),Ae(vC,{key:0,author:s.project,class:"mt-3"},null,8,["author"])):G("",!0),w(bC,{date:s.project.created,class:"mt-3"},null,8,["date"])])]),f("div",MC,[w(Ge,{variant:"primary",size:"md",onClick:t[0]||(t[0]=i=>e.$emit("view",s.project)),class:"flex-1"},{default:ee(()=>[...t[2]||(t[2]=[de(" View Project ",-1)])]),_:1}),w(Ge,{variant:"secondary",size:"md",onClick:t[1]||(t[1]=i=>e.$emit("details",s.project)),class:"flex-1"},{default:ee(()=>[...t[3]||(t[3]=[de(" See More ",-1)])]),_:1})])])]))}},EC={class:"flex items-start justify-between"},TC={class:"text-3xl font-bold tracking-tight text-gray-900 dark:text-white"},OC={key:0,class:"mt-2 text-sm text-gray-600 dark:text-gray-400"},jC={key:0},Er={__name:"PageHeader",props:{title:{type:String,required:!0},description:{type:String,default:null}},setup(s){return(e,t)=>(v(),b("div",EC,[f("div",null,[f("h1",TC,Q(s.title),1),s.description?(v(),b("p",OC,Q(s.description),1)):G("",!0)]),e.$slots.actions?(v(),b("div",jC,[ut(e.$slots,"actions")])):G("",!0)]))}},D0=(s,e)=>{const t=s.__vccOpts||s;for(const[i,n]of e)t[i]=n;return t},PC={key:0,class:"relative z-50"},$C={class:"fixed inset-0 z-10 overflow-y-auto"},RC={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},LC=["aria-labelledby"],VC=["id"],BC={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},IC={__name:"Modal",props:{modelValue:{type:Boolean,default:!1},title:{type:String,default:null},description:{type:String,default:null},icon:{type:String,default:null,validator:s=>["success","error","warning","info"].includes(s)},size:{type:String,default:"md",validator:s=>["sm","md","lg","xl"].includes(s)},variant:{type:String,default:"centered",validator:s=>["centered","side-icon","left"].includes(s)},closeOnBackdrop:{type:Boolean,default:!0}},emits:["update:modelValue","close"],setup(s,{expose:e,emit:t}){const i=s,n=t,r=z(()=>`modal-title-${Math.random().toString(36).substr(2,9)}`),o={sm:"sm:max-w-sm",md:"sm:max-w-lg",lg:"sm:max-w-2xl",xl:"sm:max-w-4xl"},l=z(()=>["relative","transform","overflow-hidden","rounded-lg","bg-white","px-4","pt-5","pb-4","text-left","shadow-xl","transition-all","sm:my-8","sm:w-full","sm:p-6","dark:bg-gray-800","dark:outline","dark:-outline-offset-1","dark:outline-white/10",o[i.size]].join(" ")),a=z(()=>{const x=["flex","items-center","justify-center","rounded-full"];i.variant==="centered"?x.push("mx-auto","size-12"):x.push("shrink-0","sm:mx-0","sm:size-10");const V={success:"bg-sky-100 text-sky-600 dark:bg-sky-500/10 dark:text-sky-400",error:"bg-red-100 text-red-600 dark:bg-red-500/10 dark:text-red-400",warning:"bg-yellow-100 text-yellow-600 dark:bg-yellow-500/10 dark:text-yellow-400",info:"bg-blue-100 text-blue-600 dark:bg-blue-500/10 dark:text-blue-400"};return i.icon&&x.push(V[i.icon]),x.join(" ")}),c=z(()=>{const x=[];return i.variant==="centered"?x.push("mt-3","text-center","sm:mt-5"):i.variant==="left"?x.push("text-left"):x.push("mt-3","text-center","sm:mt-0","sm:ml-4","sm:text-left"),i.variant==="side-icon"&&(i.icon||i.$slots.icon)&&x.push("sm:flex","sm:items-start"),x.join(" ")}),u=z(()=>i.variant==="left"?"text-lg font-bold text-gray-900 dark:text-white mb-4":"text-base font-semibold text-gray-900 dark:text-white"),d=z(()=>(i.variant==="centered","mt-2")),h=z(()=>i.variant==="left"?"mt-6 pt-4 border-t border-gray-200 dark:border-gray-700 flex gap-3 justify-between":i.variant==="centered"?"mt-5 sm:mt-6 flex gap-3 justify-end":"mt-5 sm:mt-4 flex gap-3 justify-end"),p=z(()=>i.icon==="success"?{template:`
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="m4.5 12.75 6 6 9-13.5" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      `}:i.icon==="error"||i.icon==="warning"?{template:`
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      `}:i.icon==="info"?{template:`
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      `}:null),g=()=>{i.closeOnBackdrop&&m()},k=x=>{x.key==="Escape"&&i.modelValue&&m()},m=()=>{n("update:modelValue",!1),n("close")};return os(()=>{window.addEventListener("keydown",k)}),Mr(()=>{window.removeEventListener("keydown",k)}),e({close:m}),(x,V)=>(v(),Ae(Eg,{to:"body"},[w(Hd,{name:"modal"},{default:ee(()=>[s.modelValue?(v(),b("div",PC,[f("div",{class:"fixed inset-0 bg-gray-500/75 transition-opacity dark:bg-gray-900/50",onClick:g}),f("div",$C,[f("div",RC,[f("div",{class:be(l.value),role:"dialog","aria-modal":"true","aria-labelledby":r.value},[x.$slots.icon||s.icon?(v(),b("div",{key:0,class:be(a.value)},[ut(x.$slots,"icon",{},()=>[s.icon?(v(),Ae(_s(p.value),{key:0,class:"size-6"})):G("",!0)],!0)],2)):G("",!0),f("div",{class:be(c.value)},[s.title?(v(),b("h3",{key:0,id:r.value,class:be(u.value)},Q(s.title),11,VC)):G("",!0),s.description||x.$slots.default?(v(),b("div",{key:1,class:be(d.value)},[s.description?(v(),b("p",BC,Q(s.description),1)):ut(x.$slots,"default",{key:1},void 0,!0)],2)):G("",!0)],2),x.$slots.actions?(v(),b("div",{key:1,class:be(h.value)},[ut(x.$slots,"actions",{},void 0,!0)],2)):G("",!0)],10,LC)])])])):G("",!0)]),_:3})]))}},Ln=D0(IC,[["__scopeId","data-v-2e078ad9"]]),NC=["title"],FC={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},zC={key:1,class:"h-4 w-4 text-sky-600 dark:text-sky-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},UC={key:2},ar={__name:"CopyButton",props:{value:{type:String,required:!0},showLabel:{type:Boolean,default:!1},variant:{type:String,default:"default",validator:s=>["default","ghost","bare"].includes(s)},successMessage:{type:String,default:"Copied to clipboard"}},setup(s){const e=s,t=ru(),i=ie(!1);let n=null;const r=z(()=>e.variant==="bare"?"inline-flex items-center text-sm font-medium transition-all":"inline-flex items-center gap-1.5 rounded-md px-2.5 py-1.5 text-sm font-medium transition-all"),o=z(()=>e.variant==="ghost"?"text-zinc-600 hover:bg-zinc-100 dark:text-zinc-400 dark:hover:bg-zinc-800":e.variant==="bare"?"gap-2 rounded-lg transition-all focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-1 focus-visible:outline-sky-500":"bg-zinc-100 text-zinc-700 hover:bg-zinc-200 dark:bg-zinc-800 dark:text-zinc-300 dark:hover:bg-zinc-700"),l=async()=>{try{await navigator.clipboard.writeText(e.value),i.value=!0,t.success("Copied!",e.successMessage),n&&clearTimeout(n),n=setTimeout(()=>{i.value=!1},2e3)}catch(a){t.error("Copy failed","Could not copy to clipboard"),console.error("Failed to copy:",a)}};return(a,c)=>(v(),b("button",{type:"button",onClick:l,class:be([r.value,o.value,i.value&&"ring-2 ring-sky-500/20"]),title:i.value?"Copied!":"Copy to clipboard"},[ut(a.$slots,"default",{copied:i.value},()=>[i.value?(v(),b("svg",zC,[...c[1]||(c[1]=[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(v(),b("svg",FC,[...c[0]||(c[0]=[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"},null,-1)])])),s.showLabel?(v(),b("span",UC,Q(i.value?"Copied!":"Copy"),1)):G("",!0)])],10,NC))}},HC={class:"flex flex-col gap-3 rounded-2xl border border-zinc-200 bg-white p-5 shadow-sm dark:border-zinc-800 dark:bg-zinc-900 sm:flex-row sm:items-center sm:justify-between"},WC={class:"min-w-0"},qC={class:"text-sm font-medium text-zinc-700 dark:text-zinc-200"},KC={class:"mt-1 font-mono text-sm text-zinc-600 dark:text-zinc-400 truncate"},GC={class:"flex items-center gap-2"},JC={__name:"InfoCard",props:{label:{type:String,required:!0},value:{type:String,required:!0},copyable:{type:Boolean,default:!1},copyMessage:{type:String,default:"Copied!"}},setup(s){return(e,t)=>(v(),b("div",HC,[f("div",WC,[f("p",qC,Q(s.label),1),f("p",KC,Q(s.value),1)]),f("div",GC,[s.copyable?(v(),Ae(ar,{key:0,value:s.value,variant:"ghost","show-label":"","success-message":s.copyMessage},null,8,["value","success-message"])):G("",!0),ut(e.$slots,"actions")])]))}},YC={class:"mx-auto max-w-5xl p-10"},QC={class:"flex gap-3"},XC={key:1,class:"mt-10 grid gap-6 sm:grid-cols-2"},ZC={key:2,class:"mt-12 overflow-hidden rounded-3xl bg-gradient-to-br from-sky-600 via-sky-500 to-teal-500 p-12 shadow-2xl shadow-sky-500/20"},e_={class:"space-y-4"},t_={key:0,class:"mt-2 text-sm text-red-600 dark:text-red-400"},s_={class:"flex gap-3 justify-end"},i_={key:0,class:"space-y-6"},n_={class:"text-lg font-semibold text-zinc-900 dark:text-white mb-3"},r_={class:"grid gap-4"},o_={class:"text-sm text-zinc-600 dark:text-zinc-400 font-mono bg-zinc-50 dark:bg-zinc-800 px-3 py-2 rounded-lg"},l_={key:0,class:"grid grid-cols-2 gap-4"},a_={class:"text-sm text-zinc-600 dark:text-zinc-400"},u_={key:0},c_={class:"text-sm text-zinc-600 dark:text-zinc-400"},d_={class:"text-sm text-zinc-600 dark:text-zinc-400"},f_={class:"flex gap-3 justify-end"},h_={__name:"ProjectsView",setup(s){const e=su(),t=Dr(),i=ie(!1),n=ie(!1),r=ie(!1),o=ie(""),l=ie(""),a=ie(!1),c=ie(null),u=ie({projects:[]}),d=ie(""),h=ie(null),p=P=>{if(!P)return"Unknown";const S=h.value?.project_types?.[P]?.label;return S||P.split("_").map(j=>j.charAt(0).toUpperCase()+j.slice(1)).join(" ")},g=async()=>{try{const S=await(await fetch("/api/settings/get")).json();u.value.projects=S.projects||[],d.value=S.global?.projects_root&&S.global.projects_root!==""?S.global.projects_root:""}catch(P){console.error("Failed to load settings:",P)}},k=()=>{t.path==="/projects/new"?i.value=!0:e.push("/projects/new")},m=()=>{i.value=!1,t.path==="/projects/new"&&e.push("/projects")},x=P=>{i.value=!1,g(),P?.id?e.push(`/project/${P.id}`):e.push("/projects")},V=()=>{n.value=!1,o.value="",l.value=""},I=P=>{c.value=P,r.value=!0},U=async()=>{l.value="",a.value=!0;try{const P=await fetch("/api/project/import",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_dir:o.value})}),S=await P.text();if(!S){l.value="Server returned empty response",a.value=!1;return}const j=JSON.parse(S);P.ok?(V(),g()):l.value=j.error||"Failed to import project"}catch(P){l.value="Network error: "+P.message}finally{a.value=!1}},N=async()=>{try{const S=await(await fetch("/api/settings-catalog")).json();S.error||(h.value=S)}catch(P){console.error("Failed to load settings catalog:",P)}};return os(()=>{g(),N(),i.value=t.path==="/projects/new"}),Re(()=>t.path,P=>{i.value=P==="/projects/new"},{immediate:!0}),(P,S)=>(v(),b("div",YC,[w(Er,{title:"Your Projects",description:"Framework projects you've created."},{actions:ee(()=>[f("div",QC,[w(Ge,{size:"lg",variant:"secondary",onClick:S[0]||(S[0]=j=>n.value=!0)},{default:ee(()=>[...S[7]||(S[7]=[de(" Import Project ",-1)])]),_:1}),w(Ge,{size:"lg",onClick:k},{default:ee(()=>[...S[8]||(S[8]=[de(" New Project ",-1)])]),_:1})])]),_:1}),d.value?(v(),Ae(JC,{key:0,class:"mt-6",label:"Projects Root",value:d.value,copyable:"","copy-message":"Root path copied"},{actions:ee(()=>[w(Ge,{size:"sm",variant:"secondary",onClick:S[1]||(S[1]=j=>dt(e).push("/settings"))},{default:ee(()=>[...S[9]||(S[9]=[de(" Edit ",-1)])]),_:1})]),_:1},8,["value"])):G("",!0),u.value.projects&&u.value.projects.length>0?(v(),b("div",XC,[(v(!0),b(ve,null,Le(u.value.projects,(j,H)=>(v(),Ae(DC,{key:H,project:j,"type-label":p(j.type),onView:ue=>P.$router.push(`/project/${j.id}`),onDetails:I},null,8,["project","type-label","onView"]))),128))])):(v(),b("div",ZC,[f("div",{class:"relative"},[S[12]||(S[12]=f("div",{class:"absolute -right-10 -top-10 h-40 w-40 rounded-full bg-white/10 blur-3xl"},null,-1)),S[13]||(S[13]=f("div",{class:"absolute -bottom-10 -left-10 h-40 w-40 rounded-full bg-white/10 blur-3xl"},null,-1)),f("div",{class:"relative text-center"},[S[11]||(S[11]=Xa('<div class="mx-auto flex h-16 w-16 items-center justify-center rounded-2xl bg-white/20 backdrop-blur-sm"><svg class="h-8 w-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg></div><h2 class="mt-6 text-3xl font-bold text-white">Ready to start?</h2><p class="mt-3 text-lg text-sky-50"> Create a new Framework project with a sensible structure and best practices built-in. </p>',3)),f("button",{onClick:k,class:"mt-8 inline-flex items-center gap-2 rounded-xl bg-white px-6 py-3 text-base font-semibold text-sky-600 shadow-xl transition-all duration-200 hover:scale-105 hover:shadow-2xl focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-white"},[...S[10]||(S[10]=[f("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),de(" Create Your First Project ",-1)])])])])])),i.value?(v(),Ae(uC,{key:3,"projects-root":d.value,onClose:m,onCreated:x},null,8,["projects-root"])):G("",!0),w(Ln,{modelValue:n.value,"onUpdate:modelValue":S[3]||(S[3]=j=>n.value=j),title:"Import Existing Project",size:"md"},{actions:ee(()=>[f("div",s_,[w(Ge,{variant:"secondary",onClick:V},{default:ee(()=>[...S[17]||(S[17]=[de(" Cancel ",-1)])]),_:1}),w(Ge,{variant:"primary",onClick:U,disabled:!o.value||a.value},{default:ee(()=>[de(Q(a.value?"Importing...":"Import"),1)]),_:1},8,["disabled"])])]),default:ee(()=>[f("div",e_,[S[16]||(S[16]=f("p",{class:"text-sm text-zinc-600 dark:text-zinc-400"}," Import an existing Framework project that isn't in your registry yet. ",-1)),f("div",null,[S[14]||(S[14]=f("label",{for:"import-path",class:"block text-sm font-medium text-zinc-900 dark:text-white mb-2"}," Project Directory Path ",-1)),Je(f("input",{id:"import-path","onUpdate:modelValue":S[2]||(S[2]=j=>o.value=j),type:"text",placeholder:"/Users/you/projects/my-framework-project",class:be(["block w-full rounded-lg border-0 px-4 py-2.5 text-zinc-900 shadow-sm ring-1 ring-inset ring-zinc-300 placeholder:text-zinc-400 focus:ring-2 focus:ring-inset focus:ring-sky-600 dark:bg-zinc-800 dark:text-white dark:ring-zinc-700 dark:placeholder:text-zinc-500 dark:focus:ring-sky-500 sm:text-sm sm:leading-6 font-mono",{"ring-red-500 dark:ring-red-500":l.value}])},null,2),[[pr,o.value]]),S[15]||(S[15]=f("p",{class:"mt-2 text-xs text-zinc-500 dark:text-zinc-500"}," Enter the full path to the Framework project directory ",-1)),l.value?(v(),b("p",t_,Q(l.value),1)):G("",!0)])])]),_:1},8,["modelValue"]),w(Ln,{modelValue:r.value,"onUpdate:modelValue":S[6]||(S[6]=j=>r.value=j),title:"Project Details",size:"lg"},{actions:ee(()=>[f("div",f_,[w(Ge,{variant:"secondary",onClick:S[4]||(S[4]=j=>r.value=!1)},{default:ee(()=>[...S[22]||(S[22]=[de(" Close ",-1)])]),_:1}),w(Ge,{variant:"primary",onClick:S[5]||(S[5]=j=>{P.$router.push(`/project/${c.value.id}`),r.value=!1})},{default:ee(()=>[...S[23]||(S[23]=[de(" View Full Details ",-1)])]),_:1})])]),default:ee(()=>[c.value?(v(),b("div",i_,[f("div",null,[f("h3",n_,Q(c.value.name),1),w(ou,{variant:"sky",class:"mb-4"},{default:ee(()=>[de(Q(c.value.type),1)]),_:1})]),f("div",r_,[f("div",null,[S[18]||(S[18]=f("label",{class:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1"}," Location ",-1)),f("p",o_,Q(c.value.path),1)]),c.value.author?(v(),b("div",l_,[f("div",null,[S[19]||(S[19]=f("label",{class:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1"}," Author ",-1)),f("p",a_,Q(c.value.author),1)]),c.value.author_email?(v(),b("div",u_,[S[20]||(S[20]=f("label",{class:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1"}," Email ",-1)),f("p",c_,Q(c.value.author_email),1)])):G("",!0)])):G("",!0),f("div",null,[S[21]||(S[21]=f("label",{class:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1"}," Created ",-1)),f("p",d_,Q(c.value.created),1)])])])):G("",!0)]),_:1},8,["modelValue"])]))}},p_=["for"],m_={class:"mt-2 grid grid-cols-1"},g_=["id","value"],v_={key:1,class:"mt-2 text-sm text-gray-500 dark:text-gray-400"},ts={__name:"Select",props:{id:{type:String,default:()=>`select-${Math.random().toString(36).substr(2,9)}`},modelValue:{type:[String,Number],default:""},label:{type:String,default:null},hint:{type:String,default:null}},emits:["update:modelValue"],setup(s){return(e,t)=>(v(),b("div",null,[s.label?(v(),b("label",{key:0,for:s.id,class:"block text-sm/6 font-medium text-gray-900 dark:text-white"},Q(s.label),9,p_)):G("",!0),f("div",m_,[f("select",{id:s.id,value:s.modelValue,onChange:t[0]||(t[0]=i=>e.$emit("update:modelValue",i.target.value)),class:"col-start-1 row-start-1 w-full appearance-none rounded-md bg-white py-1.5 pr-8 pl-3 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 focus-visible:outline-2 focus-visible:-outline-offset-2 focus-visible:outline-sky-600 sm:text-sm/6 dark:bg-white/5 dark:text-white dark:outline-white/10 dark:*:bg-gray-800 dark:focus-visible:outline-sky-500"},[ut(e.$slots,"default")],40,g_),t[1]||(t[1]=f("svg",{viewBox:"0 0 16 16",fill:"currentColor","data-slot":"icon","aria-hidden":"true",class:"pointer-events-none col-start-1 row-start-1 mr-2 size-5 self-center justify-self-end text-gray-500 sm:size-4 dark:text-gray-400"},[f("path",{d:"M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z","clip-rule":"evenodd","fill-rule":"evenodd"})],-1))]),s.hint?(v(),b("p",v_,Q(s.hint),1)):G("",!0)]))}},y_={class:"flex items-center gap-3"},b_=["id","name","checked","disabled","aria-label"],k_={key:0,class:"text-sm/6"},x_=["for"],w_=["id"],Ke={__name:"Toggle",props:{id:{type:String,default:()=>`toggle-${Math.random().toString(36).substr(2,9)}`},name:{type:String,default:null},modelValue:{type:Boolean,default:!1},label:{type:String,default:null},description:{type:String,default:null},ariaLabel:{type:String,default:null},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(s,{emit:e}){const t=s,i=e,n=r=>{if(!t.disabled){const o=r.target.checked;i("update:modelValue",o),i("change",o)}};return(r,o)=>(v(),b("div",y_,[f("div",{class:be(["group relative inline-flex w-11 shrink-0 rounded-full p-0.5 inset-ring inset-ring-gray-900/5 outline-offset-2 transition-colors duration-200 ease-in-out dark:inset-ring-white/10",[s.modelValue?"bg-sky-600 outline-sky-600 dark:bg-sky-500 dark:outline-sky-500":"bg-gray-200 outline-sky-600 dark:bg-white/5 dark:outline-sky-500",s.disabled?"opacity-50 cursor-not-allowed":"cursor-pointer"]])},[f("span",{class:be(["size-5 rounded-full bg-white shadow-xs ring-1 ring-gray-900/5 transition-transform duration-200 ease-in-out",{"translate-x-5":s.modelValue}])},null,2),f("input",{id:s.id,type:"checkbox",name:s.name,checked:s.modelValue,disabled:s.disabled,"aria-label":s.ariaLabel||s.label,class:"absolute inset-0 appearance-none focus:outline-hidden cursor-pointer disabled:cursor-not-allowed",onChange:n},null,40,b_)],2),s.label||s.description?(v(),b("div",k_,[s.label?(v(),b("label",{key:0,for:s.id,class:be(["font-medium text-gray-900 cursor-pointer dark:text-white",{"cursor-not-allowed opacity-50":s.disabled}])},Q(s.label),11,x_)):G("",!0),s.description?(v(),b("p",{key:1,id:`${s.id}-description`,class:"text-gray-500 dark:text-gray-400"},Q(s.description),9,w_)):G("",!0)])):G("",!0)]))}},S_={class:"flex items-center"},C_=["id","name","value","checked"],__=["for"],Sl={__name:"Radio",props:{id:{type:String,required:!0},name:{type:String,required:!0},value:{type:[String,Number,Boolean],required:!0},modelValue:{type:[String,Number,Boolean],default:null}},emits:["update:modelValue"],setup(s){return(e,t)=>(v(),b("div",S_,[f("input",{id:s.id,type:"radio",name:s.name,value:s.value,checked:s.modelValue===s.value,onChange:t[0]||(t[0]=i=>e.$emit("update:modelValue",s.value)),class:"relative size-4 appearance-none rounded-full border border-gray-300 bg-white before:absolute before:inset-1 before:rounded-full before:bg-white not-checked:before:hidden checked:border-sky-600 checked:bg-sky-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:before:bg-gray-400 dark:border-white/10 dark:bg-white/5 dark:checked:border-sky-500 dark:checked:bg-sky-500 dark:focus-visible:outline-sky-500 dark:disabled:border-white/5 dark:disabled:bg-white/10 dark:disabled:before:bg-white/20 forced-colors:appearance-auto forced-colors:before:hidden"},null,40,C_),f("label",{for:s.id,class:"ml-3 block text-sm/6 font-medium text-gray-900 dark:text-white"},[ut(e.$slots,"default")],8,__)]))}},A_={class:"text-sm/6 font-semibold text-gray-900 dark:text-white"},M_={key:0,class:"mt-1 text-sm/6 text-gray-600 dark:text-gray-400"},D_={class:"mt-6 space-y-6"},E_={__name:"RadioGroup",props:{legend:{type:String,required:!0},description:{type:String,default:null}},setup(s){return(e,t)=>(v(),b("fieldset",null,[f("legend",A_,Q(s.legend),1),s.description?(v(),b("p",M_,Q(s.description),1)):G("",!0),f("div",D_,[ut(e.$slots,"default")])]))}},T_={class:"space-y-4"},O_={class:"flex items-start gap-4"},j_={class:"flex-1"},P_=["onClick"],En={__name:"Repeater",props:{modelValue:{type:Array,default:()=>[]},addLabel:{type:String,default:"Add Item"},defaultItem:{type:[Object,Function],default:()=>({})}},emits:["update:modelValue"],setup(s,{emit:e}){const t=s,i=e,n=()=>{const l=typeof t.defaultItem=="function"?t.defaultItem():{...t.defaultItem,_id:Date.now()};i("update:modelValue",[...t.modelValue,l])},r=l=>{const a=t.modelValue.filter((c,u)=>u!==l);i("update:modelValue",a)},o=(l,a,c)=>{const u=[...t.modelValue];u[l]={...u[l],[a]:c},i("update:modelValue",u)};return(l,a)=>(v(),b("div",T_,[(v(!0),b(ve,null,Le(s.modelValue,(c,u)=>(v(),b("div",{key:c._id||u,class:"rounded-lg border border-gray-200 p-4 dark:border-gray-700"},[f("div",O_,[f("div",j_,[ut(l.$slots,"default",{item:c,index:u,update:(d,h)=>o(u,d,h)})]),f("button",{type:"button",onClick:d=>r(u),class:"shrink-0 rounded-md p-1.5 text-gray-400 transition hover:bg-red-50 hover:text-red-600 dark:hover:bg-red-900/20 dark:hover:text-red-400",title:"Remove"},[...a[0]||(a[0]=[f("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,P_)])]))),128)),w(Ge,{variant:"secondary",size:"sm",onClick:n,class:"inline-flex items-center"},{default:ee(()=>[a[1]||(a[1]=f("svg",{class:"mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)),de(" "+Q(s.addLabel),1)]),_:1})]))}};let Tc=[],E0=[];(()=>{let s="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,t=0;e<s.length;e++)(e%2?E0:Tc).push(t=t+s[e])})();function $_(s){if(s<768)return!1;for(let e=0,t=Tc.length;;){let i=e+t>>1;if(s<Tc[i])t=i;else if(s>=E0[i])e=i+1;else return!0;if(e==t)return!1}}function ap(s){return s>=127462&&s<=127487}const up=8205;function R_(s,e,t=!0,i=!0){return(t?T0:L_)(s,e,i)}function T0(s,e,t){if(e==s.length)return e;e&&O0(s.charCodeAt(e))&&j0(s.charCodeAt(e-1))&&e--;let i=Bu(s,e);for(e+=cp(i);e<s.length;){let n=Bu(s,e);if(i==up||n==up||t&&$_(n))e+=cp(n),i=n;else if(ap(n)){let r=0,o=e-2;for(;o>=0&&ap(Bu(s,o));)r++,o-=2;if(r%2==0)break;e+=2}else break}return e}function L_(s,e,t){for(;e>0;){let i=T0(s,e-2,t);if(i<e)return i;e--}return 0}function Bu(s,e){let t=s.charCodeAt(e);if(!j0(t)||e+1==s.length)return t;let i=s.charCodeAt(e+1);return O0(i)?(t-55296<<10)+(i-56320)+65536:t}function O0(s){return s>=56320&&s<57344}function j0(s){return s>=55296&&s<56320}function cp(s){return s<65536?1:2}class it{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,i){[e,t]=yr(this,e,t);let n=[];return this.decompose(0,e,n,2),i.length&&i.decompose(0,i.length,n,3),this.decompose(t,this.length,n,1),hi.from(n,this.length-(t-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=yr(this,e,t);let i=[];return this.decompose(e,t,i,0),hi.from(i,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),n=new uo(this),r=new uo(e);for(let o=t,l=t;;){if(n.next(o),r.next(o),o=0,n.lineBreak!=r.lineBreak||n.done!=r.done||n.value!=r.value)return!1;if(l+=n.value.length,n.done||l>=i)return!0}}iter(e=1){return new uo(this,e)}iterRange(e,t=this.length){return new P0(this,e,t)}iterLines(e,t){let i;if(e==null)i=this.iter();else{t==null&&(t=this.lines+1);let n=this.line(e).from;i=this.iterRange(n,Math.max(n,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new $0(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?it.empty:e.length<=32?new Et(e):hi.from(Et.split(e,[]))}}class Et extends it{constructor(e,t=V_(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,n){for(let r=0;;r++){let o=this.text[r],l=n+o.length;if((t?i:l)>=e)return new B_(n,l,i,o);n=l+1,i++}}decompose(e,t,i,n){let r=e<=0&&t>=this.length?this:new Et(dp(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(n&1){let o=i.pop(),l=Xl(r.text,o.text.slice(),0,r.length);if(l.length<=32)i.push(new Et(l,o.length+r.length));else{let a=l.length>>1;i.push(new Et(l.slice(0,a)),new Et(l.slice(a)))}}else i.push(r)}replace(e,t,i){if(!(i instanceof Et))return super.replace(e,t,i);[e,t]=yr(this,e,t);let n=Xl(this.text,Xl(i.text,dp(this.text,0,e)),t),r=this.length+i.length-(t-e);return n.length<=32?new Et(n,r):hi.from(Et.split(n,[]),r)}sliceString(e,t=this.length,i=`
`){[e,t]=yr(this,e,t);let n="";for(let r=0,o=0;r<=t&&o<this.text.length;o++){let l=this.text[o],a=r+l.length;r>e&&o&&(n+=i),e<a&&t>r&&(n+=l.slice(Math.max(0,e-r),t-r)),r=a+1}return n}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let i=[],n=-1;for(let r of e)i.push(r),n+=r.length+1,i.length==32&&(t.push(new Et(i,n)),i=[],n=-1);return n>-1&&t.push(new Et(i,n)),t}}class hi extends it{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,t,i,n){for(let r=0;;r++){let o=this.children[r],l=n+o.length,a=i+o.lines-1;if((t?a:l)>=e)return o.lineInner(e,t,i,n);n=l+1,i=a+1}}decompose(e,t,i,n){for(let r=0,o=0;o<=t&&r<this.children.length;r++){let l=this.children[r],a=o+l.length;if(e<=a&&t>=o){let c=n&((o<=e?1:0)|(a>=t?2:0));o>=e&&a<=t&&!c?i.push(l):l.decompose(e-o,t-o,i,c)}o=a+1}}replace(e,t,i){if([e,t]=yr(this,e,t),i.lines<this.lines)for(let n=0,r=0;n<this.children.length;n++){let o=this.children[n],l=r+o.length;if(e>=r&&t<=l){let a=o.replace(e-r,t-r,i),c=this.lines-o.lines+a.lines;if(a.lines<c>>4&&a.lines>c>>6){let u=this.children.slice();return u[n]=a,new hi(u,this.length-(t-e)+i.length)}return super.replace(r,l,a)}r=l+1}return super.replace(e,t,i)}sliceString(e,t=this.length,i=`
`){[e,t]=yr(this,e,t);let n="";for(let r=0,o=0;r<this.children.length&&o<=t;r++){let l=this.children[r],a=o+l.length;o>e&&r&&(n+=i),e<a&&t>o&&(n+=l.sliceString(e-o,t-o,i)),o=a+1}return n}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof hi))return 0;let i=0,[n,r,o,l]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;n+=t,r+=t){if(n==o||r==l)return i;let a=this.children[n],c=e.children[r];if(a!=c)return i+a.scanIdentical(c,t);i+=a.length+1}}static from(e,t=e.reduce((i,n)=>i+n.length+1,-1)){let i=0;for(let p of e)i+=p.lines;if(i<32){let p=[];for(let g of e)g.flatten(p);return new Et(p,t)}let n=Math.max(32,i>>5),r=n<<1,o=n>>1,l=[],a=0,c=-1,u=[];function d(p){let g;if(p.lines>r&&p instanceof hi)for(let k of p.children)d(k);else p.lines>o&&(a>o||!a)?(h(),l.push(p)):p instanceof Et&&a&&(g=u[u.length-1])instanceof Et&&p.lines+g.lines<=32?(a+=p.lines,c+=p.length+1,u[u.length-1]=new Et(g.text.concat(p.text),g.length+1+p.length)):(a+p.lines>n&&h(),a+=p.lines,c+=p.length+1,u.push(p))}function h(){a!=0&&(l.push(u.length==1?u[0]:hi.from(u,c)),c=-1,a=u.length=0)}for(let p of e)d(p);return h(),l.length==1?l[0]:new hi(l,t)}}it.empty=new Et([""],0);function V_(s){let e=-1;for(let t of s)e+=t.length+1;return e}function Xl(s,e,t=0,i=1e9){for(let n=0,r=0,o=!0;r<s.length&&n<=i;r++){let l=s[r],a=n+l.length;a>=t&&(a>i&&(l=l.slice(0,i-n)),n<t&&(l=l.slice(t-n)),o?(e[e.length-1]+=l,o=!1):e.push(l)),n=a+1}return e}function dp(s,e,t){return Xl(s,[""],e,t)}class uo{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Et?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,n=this.nodes[i],r=this.offsets[i],o=r>>1,l=n instanceof Et?n.text.length:n.children.length;if(o==(t>0?l:0)){if(i==0)return this.done=!0,this.value="",this;t>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((r&1)==(t>0?0:1)){if(this.offsets[i]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(n instanceof Et){let a=n.text[o+(t<0?-1:0)];if(this.offsets[i]+=t,a.length>Math.max(0,e))return this.value=e==0?a:t>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=n.children[o+(t<0?-1:0)];e>a.length?(e-=a.length,this.offsets[i]+=t):(t<0&&this.offsets[i]--,this.nodes.push(a),this.offsets.push(t>0?1:(a instanceof Et?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class P0{constructor(e,t,i){this.value="",this.done=!1,this.cursor=new uo(e,t>i?-1:1),this.pos=t>i?e.length:0,this.from=Math.min(t,i),this.to=Math.max(t,i)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let i=t<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:n}=this.cursor.next(e);return this.pos+=(n.length+e)*t,this.value=n.length<=i?n:t<0?n.slice(n.length-i):n.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class $0{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:i,value:n}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=n,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(it.prototype[Symbol.iterator]=function(){return this.iter()},uo.prototype[Symbol.iterator]=P0.prototype[Symbol.iterator]=$0.prototype[Symbol.iterator]=function(){return this});class B_{constructor(e,t,i,n){this.from=e,this.to=t,this.number=i,this.text=n}get length(){return this.to-this.from}}function yr(s,e,t){return e=Math.max(0,Math.min(s.length,e)),[e,Math.max(e,Math.min(s.length,t))]}function Jt(s,e,t=!0,i=!0){return R_(s,e,t,i)}function I_(s){return s>=56320&&s<57344}function N_(s){return s>=55296&&s<56320}function xs(s,e){let t=s.charCodeAt(e);if(!N_(t)||e+1==s.length)return t;let i=s.charCodeAt(e+1);return I_(i)?(t-55296<<10)+(i-56320)+65536:t}function Yd(s){return s<=65535?String.fromCharCode(s):(s-=65536,String.fromCharCode((s>>10)+55296,(s&1023)+56320))}function pi(s){return s<65536?1:2}const Oc=/\r\n?|\n/;var ms=(function(s){return s[s.Simple=0]="Simple",s[s.TrackDel=1]="TrackDel",s[s.TrackBefore=2]="TrackBefore",s[s.TrackAfter=3]="TrackAfter",s})(ms||(ms={}));class bi{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,n=0;t<this.sections.length;){let r=this.sections[t++],o=this.sections[t++];o<0?(e(i,n,r),n+=r):n+=o,i+=r}}iterChangedRanges(e,t=!1){jc(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],n=this.sections[t++];n<0?e.push(i,n):e.push(n,i)}return new bi(e)}composeDesc(e){return this.empty?e:e.empty?this:R0(this,e)}mapDesc(e,t=!1){return e.empty?this:Pc(this,e,t)}mapPos(e,t=-1,i=ms.Simple){let n=0,r=0;for(let o=0;o<this.sections.length;){let l=this.sections[o++],a=this.sections[o++],c=n+l;if(a<0){if(c>e)return r+(e-n);r+=l}else{if(i!=ms.Simple&&c>=e&&(i==ms.TrackDel&&n<e&&c>e||i==ms.TrackBefore&&n<e||i==ms.TrackAfter&&c>e))return null;if(c>e||c==e&&t<0&&!l)return e==n||t<0?r:r+a;r+=a}n=c}if(e>n)throw new RangeError(`Position ${e} is out of range for changeset of length ${n}`);return r}touchesRange(e,t=e){for(let i=0,n=0;i<this.sections.length&&n<=t;){let r=this.sections[i++],o=this.sections[i++],l=n+r;if(o>=0&&n<=t&&l>=e)return n<e&&l>t?"cover":!0;n=l}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],n=this.sections[t++];e+=(e?" ":"")+i+(n>=0?":"+n:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new bi(e)}static create(e){return new bi(e)}}class Vt extends bi{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return jc(this,(t,i,n,r,o)=>e=e.replace(n,n+(i-t),o),!1),e}mapDesc(e,t=!1){return Pc(this,e,t,!0)}invert(e){let t=this.sections.slice(),i=[];for(let n=0,r=0;n<t.length;n+=2){let o=t[n],l=t[n+1];if(l>=0){t[n]=l,t[n+1]=o;let a=n>>1;for(;i.length<a;)i.push(it.empty);i.push(o?e.slice(r,r+o):it.empty)}r+=o}return new Vt(t,i)}compose(e){return this.empty?e:e.empty?this:R0(this,e,!0)}map(e,t=!1){return e.empty?this:Pc(this,e,t,!0)}iterChanges(e,t=!1){jc(this,e,t)}get desc(){return bi.create(this.sections)}filter(e){let t=[],i=[],n=[],r=new Mo(this);e:for(let o=0,l=0;;){let a=o==e.length?1e9:e[o++];for(;l<a||l==a&&r.len==0;){if(r.done)break e;let u=Math.min(r.len,a-l);Zt(n,u,-1);let d=r.ins==-1?-1:r.off==0?r.ins:0;Zt(t,u,d),d>0&&Qi(i,t,r.text),r.forward(u),l+=u}let c=e[o++];for(;l<c;){if(r.done)break e;let u=Math.min(r.len,c-l);Zt(t,u,-1),Zt(n,u,r.ins==-1?-1:r.off==0?r.ins:0),r.forward(u),l+=u}}return{changes:new Vt(t,i),filtered:bi.create(n)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],n=this.sections[t+1];n<0?e.push(i):n==0?e.push([i]):e.push([i].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,i){let n=[],r=[],o=0,l=null;function a(u=!1){if(!u&&!n.length)return;o<t&&Zt(n,t-o,-1);let d=new Vt(n,r);l=l?l.compose(d.map(l)):d,n=[],r=[],o=0}function c(u){if(Array.isArray(u))for(let d of u)c(d);else if(u instanceof Vt){if(u.length!=t)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${t})`);a(),l=l?l.compose(u.map(l)):u}else{let{from:d,to:h=d,insert:p}=u;if(d>h||d<0||h>t)throw new RangeError(`Invalid change range ${d} to ${h} (in doc of length ${t})`);let g=p?typeof p=="string"?it.of(p.split(i||Oc)):p:it.empty,k=g.length;if(d==h&&k==0)return;d<o&&a(),d>o&&Zt(n,d-o,-1),Zt(n,h-d,k),Qi(r,n,g),o=h}}return c(e),a(!l),l}static empty(e){return new Vt(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],i=[];for(let n=0;n<e.length;n++){let r=e[n];if(typeof r=="number")t.push(r,-1);else{if(!Array.isArray(r)||typeof r[0]!="number"||r.some((o,l)=>l&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(r.length==1)t.push(r[0],0);else{for(;i.length<n;)i.push(it.empty);i[n]=it.of(r.slice(1)),t.push(r[0],i[n].length)}}}return new Vt(t,i)}static createSet(e,t){return new Vt(e,t)}}function Zt(s,e,t,i=!1){if(e==0&&t<=0)return;let n=s.length-2;n>=0&&t<=0&&t==s[n+1]?s[n]+=e:n>=0&&e==0&&s[n]==0?s[n+1]+=t:i?(s[n]+=e,s[n+1]+=t):s.push(e,t)}function Qi(s,e,t){if(t.length==0)return;let i=e.length-2>>1;if(i<s.length)s[s.length-1]=s[s.length-1].append(t);else{for(;s.length<i;)s.push(it.empty);s.push(t)}}function jc(s,e,t){let i=s.inserted;for(let n=0,r=0,o=0;o<s.sections.length;){let l=s.sections[o++],a=s.sections[o++];if(a<0)n+=l,r+=l;else{let c=n,u=r,d=it.empty;for(;c+=l,u+=a,a&&i&&(d=d.append(i[o-2>>1])),!(t||o==s.sections.length||s.sections[o+1]<0);)l=s.sections[o++],a=s.sections[o++];e(n,c,r,u,d),n=c,r=u}}}function Pc(s,e,t,i=!1){let n=[],r=i?[]:null,o=new Mo(s),l=new Mo(e);for(let a=-1;;){if(o.done&&l.len||l.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&l.ins==-1){let c=Math.min(o.len,l.len);Zt(n,c,-1),o.forward(c),l.forward(c)}else if(l.ins>=0&&(o.ins<0||a==o.i||o.off==0&&(l.len<o.len||l.len==o.len&&!t))){let c=l.len;for(Zt(n,l.ins,-1);c;){let u=Math.min(o.len,c);o.ins>=0&&a<o.i&&o.len<=u&&(Zt(n,0,o.ins),r&&Qi(r,n,o.text),a=o.i),o.forward(u),c-=u}l.next()}else if(o.ins>=0){let c=0,u=o.len;for(;u;)if(l.ins==-1){let d=Math.min(u,l.len);c+=d,u-=d,l.forward(d)}else if(l.ins==0&&l.len<u)u-=l.len,l.next();else break;Zt(n,c,a<o.i?o.ins:0),r&&a<o.i&&Qi(r,n,o.text),a=o.i,o.forward(o.len-u)}else{if(o.done&&l.done)return r?Vt.createSet(n,r):bi.create(n);throw new Error("Mismatched change set lengths")}}}function R0(s,e,t=!1){let i=[],n=t?[]:null,r=new Mo(s),o=new Mo(e);for(let l=!1;;){if(r.done&&o.done)return n?Vt.createSet(i,n):bi.create(i);if(r.ins==0)Zt(i,r.len,0,l),r.next();else if(o.len==0&&!o.done)Zt(i,0,o.ins,l),n&&Qi(n,i,o.text),o.next();else{if(r.done||o.done)throw new Error("Mismatched change set lengths");{let a=Math.min(r.len2,o.len),c=i.length;if(r.ins==-1){let u=o.ins==-1?-1:o.off?0:o.ins;Zt(i,a,u,l),n&&u&&Qi(n,i,o.text)}else o.ins==-1?(Zt(i,r.off?0:r.len,a,l),n&&Qi(n,i,r.textBit(a))):(Zt(i,r.off?0:r.len,o.off?0:o.ins,l),n&&!o.off&&Qi(n,i,o.text));l=(r.ins>a||o.ins>=0&&o.len>a)&&(l||i.length>c),r.forward2(a),o.forward(a)}}}}class Mo{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?it.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?it.empty:t[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Tn{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let i,n;return this.empty?i=n=e.mapPos(this.from,t):(i=e.mapPos(this.from,1),n=e.mapPos(this.to,-1)),i==this.from&&n==this.to?this:new Tn(i,n,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return fe.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return fe.range(this.anchor,i)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return fe.range(e.anchor,e.head)}static create(e,t,i){return new Tn(e,t,i)}}class fe{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:fe.create(this.ranges.map(i=>i.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new fe([this.main],0)}addRange(e,t=!0){return fe.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let i=this.ranges.slice();return i[t]=e,fe.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new fe(e.ranges.map(t=>Tn.fromJSON(t)),e.main)}static single(e,t=e){return new fe([fe.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,n=0;n<e.length;n++){let r=e[n];if(r.empty?r.from<=i:r.from<i)return fe.normalized(e.slice(),t);i=r.to}return new fe(e,t)}static cursor(e,t=0,i,n){return Tn.create(e,e,(t==0?0:t<0?8:16)|(i==null?7:Math.min(6,i))|(n??16777215)<<6)}static range(e,t,i,n){let r=(i??16777215)<<6|(n==null?7:Math.min(6,n));return t<e?Tn.create(t,e,48|r):Tn.create(e,t,(t>e?8:0)|r)}static normalized(e,t=0){let i=e[t];e.sort((n,r)=>n.from-r.from),t=e.indexOf(i);for(let n=1;n<e.length;n++){let r=e[n],o=e[n-1];if(r.empty?r.from<=o.to:r.from<o.to){let l=o.from,a=Math.max(r.to,o.to);n<=t&&t--,e.splice(--n,2,r.anchor>r.head?fe.range(a,l):fe.range(l,a))}}return new fe(e,t)}}function L0(s,e){for(let t of s.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let Qd=0;class Oe{constructor(e,t,i,n,r){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=n,this.id=Qd++,this.default=e([]),this.extensions=typeof r=="function"?r(this):r}get reader(){return this}static define(e={}){return new Oe(e.combine||(t=>t),e.compareInput||((t,i)=>t===i),e.compare||(e.combine?(t,i)=>t===i:Xd),!!e.static,e.enables)}of(e){return new Zl([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Zl(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Zl(e,this,2,t)}from(e,t){return t||(t=i=>i),this.compute([e],i=>t(i.field(e)))}}function Xd(s,e){return s==e||s.length==e.length&&s.every((t,i)=>t===e[i])}class Zl{constructor(e,t,i,n){this.dependencies=e,this.facet=t,this.type=i,this.value=n,this.id=Qd++}dynamicSlot(e){var t;let i=this.value,n=this.facet.compareInput,r=this.id,o=e[r]>>1,l=this.type==2,a=!1,c=!1,u=[];for(let d of this.dependencies)d=="doc"?a=!0:d=="selection"?c=!0:(((t=e[d.id])!==null&&t!==void 0?t:1)&1)==0&&u.push(e[d.id]);return{create(d){return d.values[o]=i(d),1},update(d,h){if(a&&h.docChanged||c&&(h.docChanged||h.selection)||$c(d,u)){let p=i(d);if(l?!fp(p,d.values[o],n):!n(p,d.values[o]))return d.values[o]=p,1}return 0},reconfigure:(d,h)=>{let p,g=h.config.address[r];if(g!=null){let k=xa(h,g);if(this.dependencies.every(m=>m instanceof Oe?h.facet(m)===d.facet(m):m instanceof Yt?h.field(m,!1)==d.field(m,!1):!0)||(l?fp(p=i(d),k,n):n(p=i(d),k)))return d.values[o]=k,0}else p=i(d);return d.values[o]=p,1}}}}function fp(s,e,t){if(s.length!=e.length)return!1;for(let i=0;i<s.length;i++)if(!t(s[i],e[i]))return!1;return!0}function $c(s,e){let t=!1;for(let i of e)co(s,i)&1&&(t=!0);return t}function F_(s,e,t){let i=t.map(a=>s[a.id]),n=t.map(a=>a.type),r=i.filter(a=>!(a&1)),o=s[e.id]>>1;function l(a){let c=[];for(let u=0;u<i.length;u++){let d=xa(a,i[u]);if(n[u]==2)for(let h of d)c.push(h);else c.push(d)}return e.combine(c)}return{create(a){for(let c of i)co(a,c);return a.values[o]=l(a),1},update(a,c){if(!$c(a,r))return 0;let u=l(a);return e.compare(u,a.values[o])?0:(a.values[o]=u,1)},reconfigure(a,c){let u=$c(a,i),d=c.config.facets[e.id],h=c.facet(e);if(d&&!u&&Xd(t,d))return a.values[o]=h,0;let p=l(a);return e.compare(p,h)?(a.values[o]=h,0):(a.values[o]=p,1)}}}const Cl=Oe.define({static:!0});class Yt{constructor(e,t,i,n,r){this.id=e,this.createF=t,this.updateF=i,this.compareF=n,this.spec=r,this.provides=void 0}static define(e){let t=new Yt(Qd++,e.create,e.update,e.compare||((i,n)=>i===n),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(Cl).find(i=>i.field==this);return(t?.create||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:i=>(i.values[t]=this.create(i),1),update:(i,n)=>{let r=i.values[t],o=this.updateF(r,n);return this.compareF(r,o)?0:(i.values[t]=o,1)},reconfigure:(i,n)=>{let r=i.facet(Cl),o=n.facet(Cl),l;return(l=r.find(a=>a.field==this))&&l!=o.find(a=>a.field==this)?(i.values[t]=l.create(i),1):n.config.address[this.id]!=null?(i.values[t]=n.field(this),0):(i.values[t]=this.create(i),1)}}}init(e){return[this,Cl.of({field:this,create:e})]}get extension(){return this}}const An={lowest:4,low:3,default:2,high:1,highest:0};function Ur(s){return e=>new V0(e,s)}const Hn={highest:Ur(An.highest),high:Ur(An.high),default:Ur(An.default),low:Ur(An.low),lowest:Ur(An.lowest)};class V0{constructor(e,t){this.inner=e,this.prec=t}}class lu{of(e){return new Rc(this,e)}reconfigure(e){return lu.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Rc{constructor(e,t){this.compartment=e,this.inner=t}}class ka{constructor(e,t,i,n,r,o){for(this.base=e,this.compartments=t,this.dynamicSlots=i,this.address=n,this.staticValues=r,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,i){let n=[],r=Object.create(null),o=new Map;for(let h of z_(e,t,o))h instanceof Yt?n.push(h):(r[h.facet.id]||(r[h.facet.id]=[])).push(h);let l=Object.create(null),a=[],c=[];for(let h of n)l[h.id]=c.length<<1,c.push(p=>h.slot(p));let u=i?.config.facets;for(let h in r){let p=r[h],g=p[0].facet,k=u&&u[h]||[];if(p.every(m=>m.type==0))if(l[g.id]=a.length<<1|1,Xd(k,p))a.push(i.facet(g));else{let m=g.combine(p.map(x=>x.value));a.push(i&&g.compare(m,i.facet(g))?i.facet(g):m)}else{for(let m of p)m.type==0?(l[m.id]=a.length<<1|1,a.push(m.value)):(l[m.id]=c.length<<1,c.push(x=>m.dynamicSlot(x)));l[g.id]=c.length<<1,c.push(m=>F_(m,g,p))}}let d=c.map(h=>h(l));return new ka(e,o,d,l,a,r)}}function z_(s,e,t){let i=[[],[],[],[],[]],n=new Map;function r(o,l){let a=n.get(o);if(a!=null){if(a<=l)return;let c=i[a].indexOf(o);c>-1&&i[a].splice(c,1),o instanceof Rc&&t.delete(o.compartment)}if(n.set(o,l),Array.isArray(o))for(let c of o)r(c,l);else if(o instanceof Rc){if(t.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=e.get(o.compartment)||o.inner;t.set(o.compartment,c),r(c,l)}else if(o instanceof V0)r(o.inner,o.prec);else if(o instanceof Yt)i[l].push(o),o.provides&&r(o.provides,l);else if(o instanceof Zl)i[l].push(o),o.facet.extensions&&r(o.facet.extensions,An.default);else{let c=o.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);r(c,l)}}return r(s,An.default),i.reduce((o,l)=>o.concat(l))}function co(s,e){if(e&1)return 2;let t=e>>1,i=s.status[t];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;s.status[t]=4;let n=s.computeSlot(s,s.config.dynamicSlots[t]);return s.status[t]=2|n}function xa(s,e){return e&1?s.config.staticValues[e>>1]:s.values[e>>1]}const B0=Oe.define(),Lc=Oe.define({combine:s=>s.some(e=>e),static:!0}),I0=Oe.define({combine:s=>s.length?s[0]:void 0,static:!0}),N0=Oe.define(),F0=Oe.define(),z0=Oe.define(),U0=Oe.define({combine:s=>s.length?s[0]:!1});class Fi{constructor(e,t){this.type=e,this.value=t}static define(){return new U_}}class U_{of(e){return new Fi(this,e)}}class H_{constructor(e){this.map=e}of(e){return new Ye(this,e)}}class Ye{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new Ye(this.type,t)}is(e){return this.type==e}static define(e={}){return new H_(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let i=[];for(let n of e){let r=n.map(t);r&&i.push(r)}return i}}Ye.reconfigure=Ye.define();Ye.appendConfig=Ye.define();class Bt{constructor(e,t,i,n,r,o){this.startState=e,this.changes=t,this.selection=i,this.effects=n,this.annotations=r,this.scrollIntoView=o,this._doc=null,this._state=null,i&&L0(i,t.newLength),r.some(l=>l.type==Bt.time)||(this.annotations=r.concat(Bt.time.of(Date.now())))}static create(e,t,i,n,r,o){return new Bt(e,t,i,n,r,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Bt.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}Bt.time=Fi.define();Bt.userEvent=Fi.define();Bt.addToHistory=Fi.define();Bt.remote=Fi.define();function W_(s,e){let t=[];for(let i=0,n=0;;){let r,o;if(i<s.length&&(n==e.length||e[n]>=s[i]))r=s[i++],o=s[i++];else if(n<e.length)r=e[n++],o=e[n++];else return t;!t.length||t[t.length-1]<r?t.push(r,o):t[t.length-1]<o&&(t[t.length-1]=o)}}function H0(s,e,t){var i;let n,r,o;return t?(n=e.changes,r=Vt.empty(e.changes.length),o=s.changes.compose(e.changes)):(n=e.changes.map(s.changes),r=s.changes.mapDesc(e.changes,!0),o=s.changes.compose(n)),{changes:o,selection:e.selection?e.selection.map(r):(i=s.selection)===null||i===void 0?void 0:i.map(n),effects:Ye.mapEffects(s.effects,n).concat(Ye.mapEffects(e.effects,r)),annotations:s.annotations.length?s.annotations.concat(e.annotations):e.annotations,scrollIntoView:s.scrollIntoView||e.scrollIntoView}}function Vc(s,e,t){let i=e.selection,n=ur(e.annotations);return e.userEvent&&(n=n.concat(Bt.userEvent.of(e.userEvent))),{changes:e.changes instanceof Vt?e.changes:Vt.of(e.changes||[],t,s.facet(I0)),selection:i&&(i instanceof fe?i:fe.single(i.anchor,i.head)),effects:ur(e.effects),annotations:n,scrollIntoView:!!e.scrollIntoView}}function W0(s,e,t){let i=Vc(s,e.length?e[0]:{},s.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let r=1;r<e.length;r++){e[r].filter===!1&&(t=!1);let o=!!e[r].sequential;i=H0(i,Vc(s,e[r],o?i.changes.newLength:s.doc.length),o)}let n=Bt.create(s,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return K_(t?q_(n):n)}function q_(s){let e=s.startState,t=!0;for(let n of e.facet(N0)){let r=n(s);if(r===!1){t=!1;break}Array.isArray(r)&&(t=t===!0?r:W_(t,r))}if(t!==!0){let n,r;if(t===!1)r=s.changes.invertedDesc,n=Vt.empty(e.doc.length);else{let o=s.changes.filter(t);n=o.changes,r=o.filtered.mapDesc(o.changes).invertedDesc}s=Bt.create(e,n,s.selection&&s.selection.map(r),Ye.mapEffects(s.effects,r),s.annotations,s.scrollIntoView)}let i=e.facet(F0);for(let n=i.length-1;n>=0;n--){let r=i[n](s);r instanceof Bt?s=r:Array.isArray(r)&&r.length==1&&r[0]instanceof Bt?s=r[0]:s=W0(e,ur(r),!1)}return s}function K_(s){let e=s.startState,t=e.facet(z0),i=s;for(let n=t.length-1;n>=0;n--){let r=t[n](s);r&&Object.keys(r).length&&(i=H0(i,Vc(e,r,s.changes.newLength),!0))}return i==s?s:Bt.create(e,s.changes,s.selection,i.effects,i.annotations,i.scrollIntoView)}const G_=[];function ur(s){return s==null?G_:Array.isArray(s)?s:[s]}var _t=(function(s){return s[s.Word=0]="Word",s[s.Space=1]="Space",s[s.Other=2]="Other",s})(_t||(_t={}));const J_=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Bc;try{Bc=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function Y_(s){if(Bc)return Bc.test(s);for(let e=0;e<s.length;e++){let t=s[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||J_.test(t)))return!0}return!1}function Q_(s){return e=>{if(!/\S/.test(e))return _t.Space;if(Y_(e))return _t.Word;for(let t=0;t<s.length;t++)if(e.indexOf(s[t])>-1)return _t.Word;return _t.Other}}class tt{constructor(e,t,i,n,r,o){this.config=e,this.doc=t,this.selection=i,this.values=n,this.status=e.statusTemplate.slice(),this.computeSlot=r,o&&(o._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)co(this,l<<1);this.computeSlot=null}field(e,t=!0){let i=this.config.address[e.id];if(i==null){if(t)throw new RangeError("Field is not present in this state");return}return co(this,i),xa(this,i)}update(...e){return W0(this,e,!0)}applyTransaction(e){let t=this.config,{base:i,compartments:n}=t;for(let l of e.effects)l.is(lu.reconfigure)?(t&&(n=new Map,t.compartments.forEach((a,c)=>n.set(c,a)),t=null),n.set(l.value.compartment,l.value.extension)):l.is(Ye.reconfigure)?(t=null,i=l.value):l.is(Ye.appendConfig)&&(t=null,i=ur(i).concat(l.value));let r;t?r=e.startState.values.slice():(t=ka.resolve(i,n,this),r=new tt(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(a,c)=>c.reconfigure(a,this),null).values);let o=e.startState.facet(Lc)?e.newSelection:e.newSelection.asSingle();new tt(t,e.newDoc,o,r,(l,a)=>a.update(l,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:fe.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,i=e(t.ranges[0]),n=this.changes(i.changes),r=[i.range],o=ur(i.effects);for(let l=1;l<t.ranges.length;l++){let a=e(t.ranges[l]),c=this.changes(a.changes),u=c.map(n);for(let h=0;h<l;h++)r[h]=r[h].map(u);let d=n.mapDesc(c,!0);r.push(a.range.map(d)),n=n.compose(u),o=Ye.mapEffects(o,u).concat(Ye.mapEffects(ur(a.effects),d))}return{changes:n,selection:fe.create(r,t.mainIndex),effects:o}}changes(e=[]){return e instanceof Vt?e:Vt.of(e,this.doc.length,this.facet(tt.lineSeparator))}toText(e){return it.of(e.split(this.facet(tt.lineSeparator)||Oc))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(co(this,t),xa(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let n=e[i];n instanceof Yt&&this.config.address[n.id]!=null&&(t[i]=n.spec.toJSON(this.field(e[i]),this))}return t}static fromJSON(e,t={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let n=[];if(i){for(let r in i)if(Object.prototype.hasOwnProperty.call(e,r)){let o=i[r],l=e[r];n.push(o.init(a=>o.spec.fromJSON(l,a)))}}return tt.create({doc:e.doc,selection:fe.fromJSON(e.selection),extensions:t.extensions?n.concat([t.extensions]):n})}static create(e={}){let t=ka.resolve(e.extensions||[],new Map),i=e.doc instanceof it?e.doc:it.of((e.doc||"").split(t.staticFacet(tt.lineSeparator)||Oc)),n=e.selection?e.selection instanceof fe?e.selection:fe.single(e.selection.anchor,e.selection.head):fe.single(0);return L0(n,i.length),t.staticFacet(Lc)||(n=n.asSingle()),new tt(t,i,n,t.dynamicSlots.map(()=>null),(r,o)=>o.create(r),null)}get tabSize(){return this.facet(tt.tabSize)}get lineBreak(){return this.facet(tt.lineSeparator)||`
`}get readOnly(){return this.facet(U0)}phrase(e,...t){for(let i of this.facet(tt.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(i,n)=>{if(n=="$")return"$";let r=+(n||1);return!r||r>t.length?i:t[r-1]})),e}languageDataAt(e,t,i=-1){let n=[];for(let r of this.facet(B0))for(let o of r(this,t,i))Object.prototype.hasOwnProperty.call(o,e)&&n.push(o[e]);return n}charCategorizer(e){return Q_(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:i,length:n}=this.doc.lineAt(e),r=this.charCategorizer(e),o=e-i,l=e-i;for(;o>0;){let a=Jt(t,o,!1);if(r(t.slice(a,o))!=_t.Word)break;o=a}for(;l<n;){let a=Jt(t,l);if(r(t.slice(l,a))!=_t.Word)break;l=a}return o==l?null:fe.range(o+i,l+i)}}tt.allowMultipleSelections=Lc;tt.tabSize=Oe.define({combine:s=>s.length?s[0]:4});tt.lineSeparator=I0;tt.readOnly=U0;tt.phrases=Oe.define({compare(s,e){let t=Object.keys(s),i=Object.keys(e);return t.length==i.length&&t.every(n=>s[n]==e[n])}});tt.languageData=B0;tt.changeFilter=N0;tt.transactionFilter=F0;tt.transactionExtender=z0;lu.reconfigure=Ye.define();function xi(s,e,t={}){let i={};for(let n of s)for(let r of Object.keys(n)){let o=n[r],l=i[r];if(l===void 0)i[r]=o;else if(!(l===o||o===void 0))if(Object.hasOwnProperty.call(t,r))i[r]=t[r](l,o);else throw new Error("Config merge conflict for field "+r)}for(let n in e)i[n]===void 0&&(i[n]=e[n]);return i}class Vn{eq(e){return this==e}range(e,t=e){return Ic.create(e,t,this)}}Vn.prototype.startSide=Vn.prototype.endSide=0;Vn.prototype.point=!1;Vn.prototype.mapMode=ms.TrackDel;let Ic=class q0{constructor(e,t,i){this.from=e,this.to=t,this.value=i}static create(e,t,i){return new q0(e,t,i)}};function Nc(s,e){return s.from-e.from||s.value.startSide-e.value.startSide}class Zd{constructor(e,t,i,n){this.from=e,this.to=t,this.value=i,this.maxPoint=n}get length(){return this.to[this.to.length-1]}findIndex(e,t,i,n=0){let r=i?this.to:this.from;for(let o=n,l=r.length;;){if(o==l)return o;let a=o+l>>1,c=r[a]-e||(i?this.value[a].endSide:this.value[a].startSide)-t;if(a==o)return c>=0?o:l;c>=0?l=a:o=a+1}}between(e,t,i,n){for(let r=this.findIndex(t,-1e9,!0),o=this.findIndex(i,1e9,!1,r);r<o;r++)if(n(this.from[r]+e,this.to[r]+e,this.value[r])===!1)return!1}map(e,t){let i=[],n=[],r=[],o=-1,l=-1;for(let a=0;a<this.value.length;a++){let c=this.value[a],u=this.from[a]+e,d=this.to[a]+e,h,p;if(u==d){let g=t.mapPos(u,c.startSide,c.mapMode);if(g==null||(h=p=g,c.startSide!=c.endSide&&(p=t.mapPos(u,c.endSide),p<h)))continue}else if(h=t.mapPos(u,c.startSide),p=t.mapPos(d,c.endSide),h>p||h==p&&c.startSide>0&&c.endSide<=0)continue;(p-h||c.endSide-c.startSide)<0||(o<0&&(o=h),c.point&&(l=Math.max(l,p-h)),i.push(c),n.push(h-o),r.push(p-o))}return{mapped:i.length?new Zd(n,r,i,l):null,pos:o}}}class st{constructor(e,t,i,n){this.chunkPos=e,this.chunk=t,this.nextLayer=i,this.maxPoint=n}static create(e,t,i,n){return new st(e,t,i,n)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:i=!1,filterFrom:n=0,filterTo:r=this.length}=e,o=e.filter;if(t.length==0&&!o)return this;if(i&&(t=t.slice().sort(Nc)),this.isEmpty)return t.length?st.of(t):this;let l=new K0(this,null,-1).goto(0),a=0,c=[],u=new Vi;for(;l.value||a<t.length;)if(a<t.length&&(l.from-t[a].from||l.startSide-t[a].value.startSide)>=0){let d=t[a++];u.addInner(d.from,d.to,d.value)||c.push(d)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(a==t.length||this.chunkEnd(l.chunkIndex)<t[a].from)&&(!o||n>this.chunkEnd(l.chunkIndex)||r<this.chunkPos[l.chunkIndex])&&u.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!o||n>l.to||r<l.from||o(l.from,l.to,l.value))&&(u.addInner(l.from,l.to,l.value)||c.push(Ic.create(l.from,l.to,l.value))),l.next());return u.finishInner(this.nextLayer.isEmpty&&!c.length?st.empty:this.nextLayer.update({add:c,filter:o,filterFrom:n,filterTo:r}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],i=[],n=-1;for(let o=0;o<this.chunk.length;o++){let l=this.chunkPos[o],a=this.chunk[o],c=e.touchesRange(l,l+a.length);if(c===!1)n=Math.max(n,a.maxPoint),t.push(a),i.push(e.mapPos(l));else if(c===!0){let{mapped:u,pos:d}=a.map(l,e);u&&(n=Math.max(n,u.maxPoint),t.push(u),i.push(d))}}let r=this.nextLayer.map(e);return t.length==0?r:new st(i,t,r||st.empty,n)}between(e,t,i){if(!this.isEmpty){for(let n=0;n<this.chunk.length;n++){let r=this.chunkPos[n],o=this.chunk[n];if(t>=r&&e<=r+o.length&&o.between(r,e-r,t-r,i)===!1)return}this.nextLayer.between(e,t,i)}}iter(e=0){return Do.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return Do.from(e).goto(t)}static compare(e,t,i,n,r=-1){let o=e.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=r),l=t.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=r),a=hp(o,l,i),c=new Hr(o,a,r),u=new Hr(l,a,r);i.iterGaps((d,h,p)=>pp(c,d,u,h,p,n)),i.empty&&i.length==0&&pp(c,0,u,0,0,n)}static eq(e,t,i=0,n){n==null&&(n=999999999);let r=e.filter(u=>!u.isEmpty&&t.indexOf(u)<0),o=t.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(r.length!=o.length)return!1;if(!r.length)return!0;let l=hp(r,o),a=new Hr(r,l,0).goto(i),c=new Hr(o,l,0).goto(i);for(;;){if(a.to!=c.to||!Fc(a.active,c.active)||a.point&&(!c.point||!a.point.eq(c.point)))return!1;if(a.to>n)return!0;a.next(),c.next()}}static spans(e,t,i,n,r=-1){let o=new Hr(e,null,r).goto(t),l=t,a=o.openStart;for(;;){let c=Math.min(o.to,i);if(o.point){let u=o.activeForPoint(o.to),d=o.pointFrom<t?u.length+1:o.point.startSide<0?u.length:Math.min(u.length,a);n.point(l,c,o.point,u,d,o.pointRank),a=Math.min(o.openEnd(c),u.length)}else c>l&&(n.span(l,c,o.active,a),a=o.openEnd(c));if(o.to>i)return a+(o.point&&o.to>i?1:0);l=o.to,o.next()}}static of(e,t=!1){let i=new Vi;for(let n of e instanceof Ic?[e]:t?X_(e):e)i.add(n.from,n.to,n.value);return i.finish()}static join(e){if(!e.length)return st.empty;let t=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let n=e[i];n!=st.empty;n=n.nextLayer)t=new st(n.chunkPos,n.chunk,t,Math.max(n.maxPoint,t.maxPoint));return t}}st.empty=new st([],[],null,-1);function X_(s){if(s.length>1)for(let e=s[0],t=1;t<s.length;t++){let i=s[t];if(Nc(e,i)>0)return s.slice().sort(Nc);e=i}return s}st.empty.nextLayer=st.empty;class Vi{finishChunk(e){this.chunks.push(new Zd(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new Vi)).add(e,t,i)}addInner(e,t,i){let n=e-this.lastTo||i.startSide-this.last.endSide;if(n<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return n<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(st.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=st.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function hp(s,e,t){let i=new Map;for(let r of s)for(let o=0;o<r.chunk.length;o++)r.chunk[o].maxPoint<=0&&i.set(r.chunk[o],r.chunkPos[o]);let n=new Set;for(let r of e)for(let o=0;o<r.chunk.length;o++){let l=i.get(r.chunk[o]);l!=null&&(t?t.mapPos(l):l)==r.chunkPos[o]&&!t?.touchesRange(l,l+r.chunk[o].length)&&n.add(r.chunk[o])}return n}class K0{constructor(e,t,i,n=0){this.layer=e,this.skip=t,this.minPoint=i,this.rank=n}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let n=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(n)||this.layer.chunkEnd(this.chunkIndex)<e||n.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let n=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!i||this.rangeIndex<n)&&this.setRangeIndex(n)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],i=e+t.from[this.rangeIndex];if(this.from=i,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Do{constructor(e){this.heap=e}static from(e,t=null,i=-1){let n=[];for(let r=0;r<e.length;r++)for(let o=e[r];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&n.push(new K0(o,t,i,r));return n.length==1?n[0]:new Do(n)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let i of this.heap)i.goto(e,t);for(let i=this.heap.length>>1;i>=0;i--)Iu(this.heap,i);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let i=this.heap.length>>1;i>=0;i--)Iu(this.heap,i);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Iu(this.heap,0)}}}function Iu(s,e){for(let t=s[e];;){let i=(e<<1)+1;if(i>=s.length)break;let n=s[i];if(i+1<s.length&&n.compare(s[i+1])>=0&&(n=s[i+1],i++),t.compare(n)<0)break;s[i]=t,s[e]=n,e=i}}class Hr{constructor(e,t,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Do.from(e,t,i)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){_l(this.active,e),_l(this.activeTo,e),_l(this.activeRank,e),this.minActive=mp(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:n,rank:r}=this.cursor;for(;t<this.activeRank.length&&(r-this.activeRank[t]||n-this.activeTo[t])>0;)t++;Al(this.active,t,i),Al(this.activeTo,t,n),Al(this.activeRank,t,r),e&&Al(e,t,this.cursor.from),this.minActive=mp(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let n=this.minActive;if(n>-1&&(this.activeTo[n]-this.cursor.from||this.active[n].endSide-this.cursor.startSide)<0){if(this.activeTo[n]>e){this.to=this.activeTo[n],this.endSide=this.active[n].endSide;break}this.removeActive(n),i&&_l(i,n)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let r=this.cursor.value;if(!r.point)this.addActive(i),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=r,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=r.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let n=i.length-1;n>=0&&i[n]<e;n--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&t.push(this.active[i]);return t.reverse()}openEnd(e){let t=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)t++;return t}}function pp(s,e,t,i,n,r){s.goto(e),t.goto(i);let o=i+n,l=i,a=i-e;for(;;){let c=s.to+a-t.to,u=c||s.endSide-t.endSide,d=u<0?s.to+a:t.to,h=Math.min(d,o);if(s.point||t.point?s.point&&t.point&&(s.point==t.point||s.point.eq(t.point))&&Fc(s.activeForPoint(s.to),t.activeForPoint(t.to))||r.comparePoint(l,h,s.point,t.point):h>l&&!Fc(s.active,t.active)&&r.compareRange(l,h,s.active,t.active),d>o)break;(c||s.openEnd!=t.openEnd)&&r.boundChange&&r.boundChange(d),l=d,u<=0&&s.next(),u>=0&&t.next()}}function Fc(s,e){if(s.length!=e.length)return!1;for(let t=0;t<s.length;t++)if(s[t]!=e[t]&&!s[t].eq(e[t]))return!1;return!0}function _l(s,e){for(let t=e,i=s.length-1;t<i;t++)s[t]=s[t+1];s.pop()}function Al(s,e,t){for(let i=s.length-1;i>=e;i--)s[i+1]=s[i];s[e]=t}function mp(s,e){let t=-1,i=1e9;for(let n=0;n<e.length;n++)(e[n]-i||s[n].endSide-s[t].endSide)<0&&(t=n,i=e[n]);return t}function Tr(s,e,t=s.length){let i=0;for(let n=0;n<t&&n<s.length;)s.charCodeAt(n)==9?(i+=e-i%e,n++):(i++,n=Jt(s,n));return i}function zc(s,e,t,i){for(let n=0,r=0;;){if(r>=e)return n;if(n==s.length)break;r+=s.charCodeAt(n)==9?t-r%t:1,n=Jt(s,n)}return i===!0?-1:s.length}const Uc="",gp=typeof Symbol>"u"?"__"+Uc:Symbol.for(Uc),Hc=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),vp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class ln{constructor(e,t){this.rules=[];let{finish:i}=t||{};function n(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function r(o,l,a,c){let u=[],d=/^@(\w+)\b/.exec(o[0]),h=d&&d[1]=="keyframes";if(d&&l==null)return a.push(o[0]+";");for(let p in l){let g=l[p];if(/&/.test(p))r(p.split(/,\s*/).map(k=>o.map(m=>k.replace(/&/,m))).reduce((k,m)=>k.concat(m)),g,a);else if(g&&typeof g=="object"){if(!d)throw new RangeError("The value of a property ("+p+") should be a primitive value.");r(n(p),g,u,h)}else g!=null&&u.push(p.replace(/_.*/,"").replace(/[A-Z]/g,k=>"-"+k.toLowerCase())+": "+g+";")}(u.length||h)&&a.push((i&&!d&&!c?o.map(i):o).join(", ")+" {"+u.join(" ")+"}")}for(let o in e)r(n(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=vp[gp]||1;return vp[gp]=e+1,Uc+e.toString(36)}static mount(e,t,i){let n=e[Hc],r=i&&i.nonce;n?r&&n.setNonce(r):n=new Z_(e,r),n.mount(Array.isArray(t)?t:[t],e)}}let yp=new Map;class Z_{constructor(e,t){let i=e.ownerDocument||e,n=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&n.CSSStyleSheet){let r=yp.get(i);if(r)return e[Hc]=r;this.sheet=new n.CSSStyleSheet,yp.set(i,this)}else this.styleTag=i.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[Hc]=this}mount(e,t){let i=this.sheet,n=0,r=0;for(let o=0;o<e.length;o++){let l=e[o],a=this.modules.indexOf(l);if(a<r&&a>-1&&(this.modules.splice(a,1),r--,a=-1),a==-1){if(this.modules.splice(r++,0,l),i)for(let c=0;c<l.rules.length;c++)i.insertRule(l.rules[c],n++)}else{for(;r<a;)n+=this.modules[r++].rules.length;n+=l.rules.length,r++}}if(i)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let o="";for(let a=0;a<this.modules.length;a++)o+=this.modules[a].getRules()+`
`;this.styleTag.textContent=o;let l=t.head||t;this.styleTag.parentNode!=l&&l.insertBefore(this.styleTag,l.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var an={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Eo={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},e4=typeof navigator<"u"&&/Mac/.test(navigator.platform),t4=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var qt=0;qt<10;qt++)an[48+qt]=an[96+qt]=String(qt);for(var qt=1;qt<=24;qt++)an[qt+111]="F"+qt;for(var qt=65;qt<=90;qt++)an[qt]=String.fromCharCode(qt+32),Eo[qt]=String.fromCharCode(qt);for(var Nu in an)Eo.hasOwnProperty(Nu)||(Eo[Nu]=an[Nu]);function s4(s){var e=e4&&s.metaKey&&s.shiftKey&&!s.ctrlKey&&!s.altKey||t4&&s.shiftKey&&s.key&&s.key.length==1||s.key=="Unidentified",t=!e&&s.key||(s.shiftKey?Eo:an)[s.keyCode]||s.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function mt(){var s=arguments[0];typeof s=="string"&&(s=document.createElement(s));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var n=t[i];typeof n=="string"?s.setAttribute(i,n):n!=null&&(s[i]=n)}e++}for(;e<arguments.length;e++)G0(s,arguments[e]);return s}function G0(s,e){if(typeof e=="string")s.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)s.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)G0(s,e[t]);else throw new RangeError("Unsupported child node: "+e)}let hs=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Wc=typeof document<"u"?document:{documentElement:{style:{}}};const qc=/Edge\/(\d+)/.exec(hs.userAgent),J0=/MSIE \d/.test(hs.userAgent),Kc=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(hs.userAgent),au=!!(J0||Kc||qc),bp=!au&&/gecko\/(\d+)/i.test(hs.userAgent),Fu=!au&&/Chrome\/(\d+)/.exec(hs.userAgent),i4="webkitFontSmoothing"in Wc.documentElement.style,Gc=!au&&/Apple Computer/.test(hs.vendor),kp=Gc&&(/Mobile\/\w+/.test(hs.userAgent)||hs.maxTouchPoints>2);var De={mac:kp||/Mac/.test(hs.platform),windows:/Win/.test(hs.platform),linux:/Linux|X11/.test(hs.platform),ie:au,ie_version:J0?Wc.documentMode||6:Kc?+Kc[1]:qc?+qc[1]:0,gecko:bp,gecko_version:bp?+(/Firefox\/(\d+)/.exec(hs.userAgent)||[0,0])[1]:0,chrome:!!Fu,chrome_version:Fu?+Fu[1]:0,ios:kp,android:/Android\b/.test(hs.userAgent),webkit_version:i4?+(/\bAppleWebKit\/(\d+)/.exec(hs.userAgent)||[0,0])[1]:0,safari:Gc,safari_version:Gc?+(/\bVersion\/(\d+(\.\d+)?)/.exec(hs.userAgent)||[0,0])[1]:0,tabSize:Wc.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function To(s){let e;return s.nodeType==11?e=s.getSelection?s:s.ownerDocument:e=s,e.getSelection()}function Jc(s,e){return e?s==e||s.contains(e.nodeType!=1?e.parentNode:e):!1}function ea(s,e){if(!e.anchorNode)return!1;try{return Jc(s,e.anchorNode)}catch{return!1}}function Oo(s){return s.nodeType==3?In(s,0,s.nodeValue.length).getClientRects():s.nodeType==1?s.getClientRects():[]}function fo(s,e,t,i){return t?xp(s,e,t,i,-1)||xp(s,e,t,i,1):!1}function Bn(s){for(var e=0;;e++)if(s=s.previousSibling,!s)return e}function wa(s){return s.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(s.nodeName)}function xp(s,e,t,i,n){for(;;){if(s==t&&e==i)return!0;if(e==(n<0?0:ki(s))){if(s.nodeName=="DIV")return!1;let r=s.parentNode;if(!r||r.nodeType!=1)return!1;e=Bn(s)+(n<0?0:1),s=r}else if(s.nodeType==1){if(s=s.childNodes[e+(n<0?-1:0)],s.nodeType==1&&s.contentEditable=="false")return!1;e=n<0?ki(s):0}else return!1}}function ki(s){return s.nodeType==3?s.nodeValue.length:s.childNodes.length}function uu(s,e){let t=e?s.left:s.right;return{left:t,right:t,top:s.top,bottom:s.bottom}}function n4(s){let e=s.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:s.innerWidth,top:0,bottom:s.innerHeight}}function Y0(s,e){let t=e.width/s.offsetWidth,i=e.height/s.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-s.offsetWidth)<1)&&(t=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-s.offsetHeight)<1)&&(i=1),{scaleX:t,scaleY:i}}function r4(s,e,t,i,n,r,o,l){let a=s.ownerDocument,c=a.defaultView||window;for(let u=s,d=!1;u&&!d;)if(u.nodeType==1){let h,p=u==a.body,g=1,k=1;if(p)h=n4(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(u).position)&&(d=!0),u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let V=u.getBoundingClientRect();({scaleX:g,scaleY:k}=Y0(u,V)),h={left:V.left,right:V.left+u.clientWidth*g,top:V.top,bottom:V.top+u.clientHeight*k}}let m=0,x=0;if(n=="nearest")e.top<h.top?(x=e.top-(h.top+o),t>0&&e.bottom>h.bottom+x&&(x=e.bottom-h.bottom+o)):e.bottom>h.bottom&&(x=e.bottom-h.bottom+o,t<0&&e.top-x<h.top&&(x=e.top-(h.top+o)));else{let V=e.bottom-e.top,I=h.bottom-h.top;x=(n=="center"&&V<=I?e.top+V/2-I/2:n=="start"||n=="center"&&t<0?e.top-o:e.bottom-I+o)-h.top}if(i=="nearest"?e.left<h.left?(m=e.left-(h.left+r),t>0&&e.right>h.right+m&&(m=e.right-h.right+r)):e.right>h.right&&(m=e.right-h.right+r,t<0&&e.left<h.left+m&&(m=e.left-(h.left+r))):m=(i=="center"?e.left+(e.right-e.left)/2-(h.right-h.left)/2:i=="start"==l?e.left-r:e.right-(h.right-h.left)+r)-h.left,m||x)if(p)c.scrollBy(m,x);else{let V=0,I=0;if(x){let U=u.scrollTop;u.scrollTop+=x/k,I=(u.scrollTop-U)*k}if(m){let U=u.scrollLeft;u.scrollLeft+=m/g,V=(u.scrollLeft-U)*g}e={left:e.left-V,top:e.top-I,right:e.right-V,bottom:e.bottom-I},V&&Math.abs(V-m)<1&&(i="nearest"),I&&Math.abs(I-x)<1&&(n="nearest")}if(p)break;(e.top<h.top||e.bottom>h.bottom||e.left<h.left||e.right>h.right)&&(e={left:Math.max(e.left,h.left),right:Math.min(e.right,h.right),top:Math.max(e.top,h.top),bottom:Math.min(e.bottom,h.bottom)}),u=u.assignedSlot||u.parentNode}else if(u.nodeType==11)u=u.host;else break}function o4(s){let e=s.ownerDocument,t,i;for(let n=s.parentNode;n&&!(n==e.body||t&&i);)if(n.nodeType==1)!i&&n.scrollHeight>n.clientHeight&&(i=n),!t&&n.scrollWidth>n.clientWidth&&(t=n),n=n.assignedSlot||n.parentNode;else if(n.nodeType==11)n=n.host;else break;return{x:t,y:i}}class l4{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:i}=e;this.set(t,Math.min(e.anchorOffset,t?ki(t):0),i,Math.min(e.focusOffset,i?ki(i):0))}set(e,t,i,n){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=n}}let Cn=null;De.safari&&De.safari_version>=26&&(Cn=!1);function Q0(s){if(s.setActive)return s.setActive();if(Cn)return s.focus(Cn);let e=[];for(let t=s;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(s.focus(Cn==null?{get preventScroll(){return Cn={preventScroll:!0},!0}}:void 0),!Cn){Cn=!1;for(let t=0;t<e.length;){let i=e[t++],n=e[t++],r=e[t++];i.scrollTop!=n&&(i.scrollTop=n),i.scrollLeft!=r&&(i.scrollLeft=r)}}}let wp;function In(s,e,t=e){let i=wp||(wp=document.createRange());return i.setEnd(s,t),i.setStart(s,e),i}function cr(s,e,t,i){let n={key:e,code:e,keyCode:t,which:t,cancelable:!0};i&&({altKey:n.altKey,ctrlKey:n.ctrlKey,shiftKey:n.shiftKey,metaKey:n.metaKey}=i);let r=new KeyboardEvent("keydown",n);r.synthetic=!0,s.dispatchEvent(r);let o=new KeyboardEvent("keyup",n);return o.synthetic=!0,s.dispatchEvent(o),r.defaultPrevented||o.defaultPrevented}function a4(s){for(;s;){if(s&&(s.nodeType==9||s.nodeType==11&&s.host))return s;s=s.assignedSlot||s.parentNode}return null}function X0(s){for(;s.attributes.length;)s.removeAttributeNode(s.attributes[0])}function u4(s,e){let t=e.focusNode,i=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=i)return!1;for(i=Math.min(i,ki(t));;)if(i){if(t.nodeType!=1)return!1;let n=t.childNodes[i-1];n.contentEditable=="false"?i--:(t=n,i=ki(t))}else{if(t==s)return!0;i=Bn(t),t=t.parentNode}}function Z0(s){return s.scrollTop>Math.max(1,s.scrollHeight-s.clientHeight-4)}function ev(s,e){for(let t=s,i=e;;){if(t.nodeType==3&&i>0)return{node:t,offset:i};if(t.nodeType==1&&i>0){if(t.contentEditable=="false")return null;t=t.childNodes[i-1],i=ki(t)}else if(t.parentNode&&!wa(t))i=Bn(t),t=t.parentNode;else return null}}function tv(s,e){for(let t=s,i=e;;){if(t.nodeType==3&&i<t.nodeValue.length)return{node:t,offset:i};if(t.nodeType==1&&i<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[i],i=0}else if(t.parentNode&&!wa(t))i=Bn(t)+1,t=t.parentNode;else return null}}class ns{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new ns(e.parentNode,Bn(e),t)}static after(e,t){return new ns(e.parentNode,Bn(e)+1,t)}}const ef=[];class ft{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let i of this.children){if(i==e)return t;t+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let i=this.dom,n=null,r;for(let o of this.children){if(o.flags&7){if(!o.dom&&(r=n?n.nextSibling:i.firstChild)){let l=ft.get(r);(!l||!l.parent&&l.canReuseDOM(o))&&o.reuseDOM(r)}o.sync(e,t),o.flags&=-8}if(r=n?n.nextSibling:i.firstChild,t&&!t.written&&t.node==i&&r!=o.dom&&(t.written=!0),o.dom.parentNode==i)for(;r&&r!=o.dom;)r=Sp(r);else i.insertBefore(o.dom,r);n=o.dom}for(r=n?n.nextSibling:i.firstChild,r&&t&&t.node==i&&(t.written=!0);r;)r=Sp(r)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,t),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let i;if(e==this.dom)i=this.dom.childNodes[t];else{let n=ki(e)==0?0:t==0?-1:1;for(;;){let r=e.parentNode;if(r==this.dom)break;n==0&&r.firstChild!=r.lastChild&&(e==r.firstChild?n=-1:n=1),e=r}n<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!ft.get(i);)i=i.nextSibling;if(!i)return this.length;for(let n=0,r=0;;n++){let o=this.children[n];if(o.dom==i)return r;r+=o.length+o.breakAfter}}domBoundsAround(e,t,i=0){let n=-1,r=-1,o=-1,l=-1;for(let a=0,c=i,u=i;a<this.children.length;a++){let d=this.children[a],h=c+d.length;if(c<e&&h>t)return d.domBoundsAround(e,t,c);if(h>=e&&n==-1&&(n=a,r=c),c>t&&d.dom.parentNode==this.dom){o=a,l=u;break}u=h,c=h+d.breakAfter}return{from:r,to:l<0?i+this.length:l,startDOM:(n?this.children[n-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,i=ef){this.markDirty();for(let n=e;n<t;n++){let r=this.children[n];r.parent==this&&i.indexOf(r)<0&&r.destroy()}i.length<250?this.children.splice(e,t-e,...i):this.children=[].concat(this.children.slice(0,e),i,this.children.slice(t));for(let n=0;n<i.length;n++)i[n].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new sv(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,i,n,r,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}ft.prototype.breakAfter=0;function Sp(s){let e=s.nextSibling;return s.parentNode.removeChild(s),e}class sv{constructor(e,t,i){this.children=e,this.pos=t,this.i=i,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function iv(s,e,t,i,n,r,o,l,a){let{children:c}=s,u=c.length?c[e]:null,d=r.length?r[r.length-1]:null,h=d?d.breakAfter:o;if(!(e==i&&u&&!o&&!h&&r.length<2&&u.merge(t,n,r.length?d:null,t==0,l,a))){if(i<c.length){let p=c[i];p&&(n<p.length||p.breakAfter&&d?.breakAfter)?(e==i&&(p=p.split(n),n=0),!h&&d&&p.merge(0,n,d,!0,0,a)?r[r.length-1]=p:((n||p.children.length&&!p.children[0].length)&&p.merge(0,n,null,!1,0,a),r.push(p))):p?.breakAfter&&(d?d.breakAfter=1:o=1),i++}for(u&&(u.breakAfter=o,t>0&&(!o&&r.length&&u.merge(t,u.length,r[0],!1,l,0)?u.breakAfter=r.shift().breakAfter:(t<u.length||u.children.length&&u.children[u.children.length-1].length==0)&&u.merge(t,u.length,null,!1,l,0),e++));e<i&&r.length;)if(c[i-1].become(r[r.length-1]))i--,r.pop(),a=r.length?0:l;else if(c[e].become(r[0]))e++,r.shift(),l=r.length?0:a;else break;!r.length&&e&&i<c.length&&!c[e-1].breakAfter&&c[i].merge(0,0,c[e-1],!1,l,a)&&e--,(e<i||r.length)&&s.replaceChildren(e,i,r)}}function nv(s,e,t,i,n,r){let o=s.childCursor(),{i:l,off:a}=o.findPos(t,1),{i:c,off:u}=o.findPos(e,-1),d=e-t;for(let h of i)d+=h.length;s.length+=d,iv(s,c,u,l,a,i,0,n,r)}const c4=256;class ei extends ft{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,i){return this.flags&8||i&&(!(i instanceof ei)||this.length-(t-e)+i.length>c4||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new ei(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new ns(this.dom,e)}domBoundsAround(e,t,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return d4(this.dom,e,t)}}class Bi extends ft{constructor(e,t=[],i=0){super(),this.mark=e,this.children=t,this.length=i;for(let n of t)n.setParent(this)}setAttrs(e){if(X0(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,i,n,r,o){return i&&(!(i instanceof Bi&&i.mark.eq(this.mark))||e&&r<=0||t<this.length&&o<=0)?!1:(nv(this,e,t,i?i.children.slice():[],r-1,o-1),this.markDirty(),!0)}split(e){let t=[],i=0,n=-1,r=0;for(let l of this.children){let a=i+l.length;a>e&&t.push(i<e?l.split(e-i):l),n<0&&i>=e&&(n=r),i=a,r++}let o=this.length-e;return this.length=e,n>-1&&(this.children.length=n,this.markDirty()),new Bi(this.mark,t,o)}domAtPos(e){return rv(this,e)}coordsAt(e,t){return lv(this,e,t)}}function d4(s,e,t){let i=s.nodeValue.length;e>i&&(e=i);let n=e,r=e,o=0;e==0&&t<0||e==i&&t>=0?De.chrome||De.gecko||(e?(n--,o=1):r<i&&(r++,o=-1)):t<0?n--:r<i&&r++;let l=In(s,n,r).getClientRects();if(!l.length)return null;let a=l[(o?o<0:t>=0)?0:l.length-1];return De.safari&&!o&&a.width==0&&(a=Array.prototype.find.call(l,c=>c.width)||a),o?uu(a,o<0):a||null}class Xi extends ft{static create(e,t,i){return new Xi(e,t,i)}constructor(e,t,i){super(),this.widget=e,this.length=t,this.side=i,this.prevWidget=null}split(e){let t=Xi.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,i,n,r,o){return i&&(!(i instanceof Xi)||!this.widget.compare(i.widget)||e>0&&r<=0||t<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}become(e){return e instanceof Xi&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return it.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,i=t&&t.state.doc,n=this.posAtStart;return i?i.slice(n,n+this.length):it.empty}domAtPos(e){return(this.length?e==0:this.side>0)?ns.before(this.dom):ns.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let i=this.widget.coordsAt(this.dom,e,t);if(i)return i;let n=this.dom.getClientRects(),r=null;if(!n.length)return null;let o=this.side?this.side<0:e>0;for(let l=o?n.length-1:0;r=n[l],!(e>0?l==0:l==n.length-1||r.top<r.bottom);l+=o?-1:1);return uu(r,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class br extends ft{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof br&&e.side==this.side}split(){return new br(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?ns.before(this.dom):ns.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return it.empty}get isHidden(){return!0}}ei.prototype.children=Xi.prototype.children=br.prototype.children=ef;function rv(s,e){let t=s.dom,{children:i}=s,n=0;for(let r=0;n<i.length;n++){let o=i[n],l=r+o.length;if(!(l==r&&o.getSide()<=0)){if(e>r&&e<l&&o.dom.parentNode==t)return o.domAtPos(e-r);if(e<=r)break;r=l}}for(let r=n;r>0;r--){let o=i[r-1];if(o.dom.parentNode==t)return o.domAtPos(o.length)}for(let r=n;r<i.length;r++){let o=i[r];if(o.dom.parentNode==t)return o.domAtPos(0)}return new ns(t,0)}function ov(s,e,t){let i,{children:n}=s;t>0&&e instanceof Bi&&n.length&&(i=n[n.length-1])instanceof Bi&&i.mark.eq(e.mark)?ov(i,e.children[0],t-1):(n.push(e),e.setParent(s)),s.length+=e.length}function lv(s,e,t){let i=null,n=-1,r=null,o=-1;function l(c,u){for(let d=0,h=0;d<c.children.length&&h<=u;d++){let p=c.children[d],g=h+p.length;g>=u&&(p.children.length?l(p,u-h):(!r||r.isHidden&&(t>0||h4(r,p)))&&(g>u||h==g&&p.getSide()>0)?(r=p,o=u-h):(h<u||h==g&&p.getSide()<0&&!p.isHidden)&&(i=p,n=u-h)),h=g}}l(s,e);let a=(t<0?i:r)||i||r;return a?a.coordsAt(Math.max(0,a==i?n:o),t):f4(s)}function f4(s){let e=s.dom.lastChild;if(!e)return s.dom.getBoundingClientRect();let t=Oo(e);return t[t.length-1]||null}function h4(s,e){let t=s.coordsAt(0,1),i=e.coordsAt(0,1);return t&&i&&i.top<t.bottom}function Yc(s,e){for(let t in s)t=="class"&&e.class?e.class+=" "+s.class:t=="style"&&e.style?e.style+=";"+s.style:e[t]=s[t];return e}const Cp=Object.create(null);function Sa(s,e,t){if(s==e)return!0;s||(s=Cp),e||(e=Cp);let i=Object.keys(s),n=Object.keys(e);if(i.length-(t&&i.indexOf(t)>-1?1:0)!=n.length-(t&&n.indexOf(t)>-1?1:0))return!1;for(let r of i)if(r!=t&&(n.indexOf(r)==-1||s[r]!==e[r]))return!1;return!0}function Qc(s,e,t){let i=!1;if(e)for(let n in e)t&&n in t||(i=!0,n=="style"?s.style.cssText="":s.removeAttribute(n));if(t)for(let n in t)e&&e[n]==t[n]||(i=!0,n=="style"?s.style.cssText=t[n]:s.setAttribute(n,t[n]));return i}function p4(s){let e=Object.create(null);for(let t=0;t<s.attributes.length;t++){let i=s.attributes[t];e[i.name]=i.value}return e}class fn{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var gs=(function(s){return s[s.Text=0]="Text",s[s.WidgetBefore=1]="WidgetBefore",s[s.WidgetAfter=2]="WidgetAfter",s[s.WidgetRange=3]="WidgetRange",s})(gs||(gs={}));class Fe extends Vn{constructor(e,t,i,n){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=n}get heightRelevant(){return!1}static mark(e){return new Jo(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return t+=i&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new un(e,t,t,i,e.widget||null,!1)}static replace(e){let t=!!e.block,i,n;if(e.isBlockGap)i=-5e8,n=4e8;else{let{start:r,end:o}=av(e,t);i=(r?t?-3e8:-1:5e8)-1,n=(o?t?2e8:1:-6e8)+1}return new un(e,i,n,t,e.widget||null,!0)}static line(e){return new Yo(e)}static set(e,t=!1){return st.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Fe.none=st.empty;class Jo extends Fe{constructor(e){let{start:t,end:i}=av(e);super(t?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,i;return this==e||e instanceof Jo&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&Sa(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}Jo.prototype.point=!1;class Yo extends Fe{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Yo&&this.spec.class==e.spec.class&&Sa(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}Yo.prototype.mapMode=ms.TrackBefore;Yo.prototype.point=!0;class un extends Fe{constructor(e,t,i,n,r,o){super(t,i,r,e),this.block=n,this.isReplace=o,this.mapMode=n?t<=0?ms.TrackBefore:ms.TrackAfter:ms.TrackDel}get type(){return this.startSide!=this.endSide?gs.WidgetRange:this.startSide<=0?gs.WidgetBefore:gs.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof un&&m4(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}un.prototype.point=!0;function av(s,e=!1){let{inclusiveStart:t,inclusiveEnd:i}=s;return t==null&&(t=s.inclusive),i==null&&(i=s.inclusive),{start:t??e,end:i??e}}function m4(s,e){return s==e||!!(s&&e&&s.compare(e))}function ta(s,e,t,i=0){let n=t.length-1;n>=0&&t[n]+i>=s?t[n]=Math.max(t[n],e):t.push(s,e)}class Pt extends ft{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,i,n,r,o){if(i){if(!(i instanceof Pt))return!1;this.dom||i.transferDOM(this)}return n&&this.setDeco(i?i.attrs:null),nv(this,e,t,i?i.children.slice():[],r,o),!0}split(e){let t=new Pt;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i,off:n}=this.childPos(e);n&&(t.append(this.children[i].split(n),0),this.children[i].merge(n,this.children[i].length,null,!1,0,0),i++);for(let r=i;r<this.children.length;r++)t.append(this.children[r],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Sa(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){ov(this,e,t)}addLineDeco(e){let t=e.spec.attributes,i=e.spec.class;t&&(this.attrs=Yc(t,this.attrs||{})),i&&(this.attrs=Yc({class:i},this.attrs||{}))}domAtPos(e){return rv(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var i;this.dom?this.flags&4&&(X0(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(Qc(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let n=this.dom.lastChild;for(;n&&ft.get(n)instanceof Bi;)n=n.lastChild;if(!n||!this.length||n.nodeName!="BR"&&((i=ft.get(n))===null||i===void 0?void 0:i.isEditable)==!1&&(!De.ios||!this.children.some(r=>r instanceof ei))){let r=document.createElement("BR");r.cmIgnore=!0,this.dom.appendChild(r)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let i of this.children){if(!(i instanceof ei)||/[^ -~]/.test(i.text))return null;let n=Oo(i.dom);if(n.length!=1)return null;e+=n[0].width,t=n[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let i=lv(this,e,t);if(!this.children.length&&i&&this.parent){let{heightOracle:n}=this.parent.view.viewState,r=i.bottom-i.top;if(Math.abs(r-n.lineHeight)<2&&n.textHeight<r){let o=(r-n.textHeight)/2;return{top:i.top+o,bottom:i.bottom-o,left:i.left,right:i.left}}}return i}become(e){return e instanceof Pt&&this.children.length==0&&e.children.length==0&&Sa(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let i=0,n=0;i<e.children.length;i++){let r=e.children[i],o=n+r.length;if(o>=t){if(r instanceof Pt)return r;if(o>t)break}n=o+r.breakAfter}return null}}class $i extends ft{constructor(e,t,i){super(),this.widget=e,this.length=t,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,t,i,n,r,o){return i&&(!(i instanceof $i)||!this.widget.compare(i.widget)||e>0&&r<=0||t<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?ns.before(this.dom):ns.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let i=new $i(this.widget,t,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return ef}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):it.empty}domBoundsAround(){return null}become(e){return e instanceof $i&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){let i=this.widget.coordsAt(this.dom,e,t);return i||(this.widget instanceof Xc?null:uu(this.dom.getBoundingClientRect(),this.length?e==0:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:i}=this.deco;return t==i?!1:e<0?t<0:i>0}}class Xc extends fn{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class ho{constructor(e,t,i,n){this.doc=e,this.pos=t,this.end=i,this.disallowBlockEffectsFor=n,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof $i&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Pt),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Ml(new br(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof $i)&&this.getLine()}buildText(e,t,i){for(;e>0;){if(this.textOff==this.text.length){let{value:o,lineBreak:l,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(l){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=o,this.textOff=0}let n=Math.min(this.text.length-this.textOff,e),r=Math.min(n,512);this.flushBuffer(t.slice(t.length-i)),this.getLine().append(Ml(new ei(this.text.slice(this.textOff,this.textOff+r)),t),i),this.atCursorPos=!0,this.textOff+=r,e-=r,i=n<=r?0:t.length}}span(e,t,i,n){this.buildText(t-e,i,n),this.pos=t,this.openStart<0&&(this.openStart=n)}point(e,t,i,n,r,o){if(this.disallowBlockEffectsFor[o]&&i instanceof un){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=t-e;if(i instanceof un)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new $i(i.widget||kr.block,l,i));else{let a=Xi.create(i.widget||kr.inline,l,l?0:i.startSide),c=this.atCursorPos&&!a.isEditable&&r<=n.length&&(e<t||i.startSide>0),u=!a.isEditable&&(e<t||r>n.length||i.startSide<=0),d=this.getLine();this.pendingBuffer==2&&!c&&!a.isEditable&&(this.pendingBuffer=0),this.flushBuffer(n),c&&(d.append(Ml(new br(1),n),r),r=n.length+Math.max(0,r-n.length)),d.append(Ml(a,n),r),this.atCursorPos=u,this.pendingBuffer=u?e<t||r>n.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=n.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=r)}static build(e,t,i,n,r){let o=new ho(e,t,i,r);return o.openEnd=st.spans(n,t,i,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function Ml(s,e){for(let t of e)s=new Bi(t,[s],s.length);return s}class kr extends fn{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}kr.inline=new kr("span");kr.block=new kr("div");var Ct=(function(s){return s[s.LTR=0]="LTR",s[s.RTL=1]="RTL",s})(Ct||(Ct={}));const Nn=Ct.LTR,tf=Ct.RTL;function uv(s){let e=[];for(let t=0;t<s.length;t++)e.push(1<<+s[t]);return e}const g4=uv("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),v4=uv("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Zc=Object.create(null),li=[];for(let s of["()","[]","{}"]){let e=s.charCodeAt(0),t=s.charCodeAt(1);Zc[e]=t,Zc[t]=-e}function cv(s){return s<=247?g4[s]:1424<=s&&s<=1524?2:1536<=s&&s<=1785?v4[s-1536]:1774<=s&&s<=2220?4:8192<=s&&s<=8204?256:64336<=s&&s<=65023?4:1}const y4=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Zi{get dir(){return this.level%2?tf:Nn}constructor(e,t,i){this.from=e,this.to=t,this.level=i}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,i,n){let r=-1;for(let o=0;o<e.length;o++){let l=e[o];if(l.from<=t&&l.to>=t){if(l.level==i)return o;(r<0||(n!=0?n<0?l.from<t:l.to>t:e[r].level>l.level))&&(r=o)}}if(r<0)throw new RangeError("Index out of range");return r}}function dv(s,e){if(s.length!=e.length)return!1;for(let t=0;t<s.length;t++){let i=s[t],n=e[t];if(i.from!=n.from||i.to!=n.to||i.direction!=n.direction||!dv(i.inner,n.inner))return!1}return!0}const gt=[];function b4(s,e,t,i,n){for(let r=0;r<=i.length;r++){let o=r?i[r-1].to:e,l=r<i.length?i[r].from:t,a=r?256:n;for(let c=o,u=a,d=a;c<l;c++){let h=cv(s.charCodeAt(c));h==512?h=u:h==8&&d==4&&(h=16),gt[c]=h==4?2:h,h&7&&(d=h),u=h}for(let c=o,u=a,d=a;c<l;c++){let h=gt[c];if(h==128)c<l-1&&u==gt[c+1]&&u&24?h=gt[c]=u:gt[c]=256;else if(h==64){let p=c+1;for(;p<l&&gt[p]==64;)p++;let g=c&&u==8||p<t&&gt[p]==8?d==1?1:8:256;for(let k=c;k<p;k++)gt[k]=g;c=p-1}else h==8&&d==1&&(gt[c]=1);u=h,h&7&&(d=h)}}}function k4(s,e,t,i,n){let r=n==1?2:1;for(let o=0,l=0,a=0;o<=i.length;o++){let c=o?i[o-1].to:e,u=o<i.length?i[o].from:t;for(let d=c,h,p,g;d<u;d++)if(p=Zc[h=s.charCodeAt(d)])if(p<0){for(let k=l-3;k>=0;k-=3)if(li[k+1]==-p){let m=li[k+2],x=m&2?n:m&4?m&1?r:n:0;x&&(gt[d]=gt[li[k]]=x),l=k;break}}else{if(li.length==189)break;li[l++]=d,li[l++]=h,li[l++]=a}else if((g=gt[d])==2||g==1){let k=g==n;a=k?0:1;for(let m=l-3;m>=0;m-=3){let x=li[m+2];if(x&2)break;if(k)li[m+2]|=2;else{if(x&4)break;li[m+2]|=4}}}}}function x4(s,e,t,i){for(let n=0,r=i;n<=t.length;n++){let o=n?t[n-1].to:s,l=n<t.length?t[n].from:e;for(let a=o;a<l;){let c=gt[a];if(c==256){let u=a+1;for(;;)if(u==l){if(n==t.length)break;u=t[n++].to,l=n<t.length?t[n].from:e}else if(gt[u]==256)u++;else break;let d=r==1,h=(u<e?gt[u]:i)==1,p=d==h?d?1:2:i;for(let g=u,k=n,m=k?t[k-1].to:s;g>a;)g==m&&(g=t[--k].from,m=k?t[k-1].to:s),gt[--g]=p;a=u}else r=c,a++}}}function ed(s,e,t,i,n,r,o){let l=i%2?2:1;if(i%2==n%2)for(let a=e,c=0;a<t;){let u=!0,d=!1;if(c==r.length||a<r[c].from){let k=gt[a];k!=l&&(u=!1,d=k==16)}let h=!u&&l==1?[]:null,p=u?i:i+1,g=a;e:for(;;)if(c<r.length&&g==r[c].from){if(d)break e;let k=r[c];if(!u)for(let m=k.to,x=c+1;;){if(m==t)break e;if(x<r.length&&r[x].from==m)m=r[x++].to;else{if(gt[m]==l)break e;break}}if(c++,h)h.push(k);else{k.from>a&&o.push(new Zi(a,k.from,p));let m=k.direction==Nn!=!(p%2);td(s,m?i+1:i,n,k.inner,k.from,k.to,o),a=k.to}g=k.to}else{if(g==t||(u?gt[g]!=l:gt[g]==l))break;g++}h?ed(s,a,g,i+1,n,h,o):a<g&&o.push(new Zi(a,g,p)),a=g}else for(let a=t,c=r.length;a>e;){let u=!0,d=!1;if(!c||a>r[c-1].to){let k=gt[a-1];k!=l&&(u=!1,d=k==16)}let h=!u&&l==1?[]:null,p=u?i:i+1,g=a;e:for(;;)if(c&&g==r[c-1].to){if(d)break e;let k=r[--c];if(!u)for(let m=k.from,x=c;;){if(m==e)break e;if(x&&r[x-1].to==m)m=r[--x].from;else{if(gt[m-1]==l)break e;break}}if(h)h.push(k);else{k.to<a&&o.push(new Zi(k.to,a,p));let m=k.direction==Nn!=!(p%2);td(s,m?i+1:i,n,k.inner,k.from,k.to,o),a=k.from}g=k.from}else{if(g==e||(u?gt[g-1]!=l:gt[g-1]==l))break;g--}h?ed(s,g,a,i+1,n,h,o):g<a&&o.push(new Zi(g,a,p)),a=g}}function td(s,e,t,i,n,r,o){let l=e%2?2:1;b4(s,n,r,i,l),k4(s,n,r,i,l),x4(n,r,i,l),ed(s,n,r,e,t,i,o)}function w4(s,e,t){if(!s)return[new Zi(0,0,e==tf?1:0)];if(e==Nn&&!t.length&&!y4.test(s))return fv(s.length);if(t.length)for(;s.length>gt.length;)gt[gt.length]=256;let i=[],n=e==Nn?0:1;return td(s,n,n,t,0,s.length,i),i}function fv(s){return[new Zi(0,s,0)]}let hv="";function S4(s,e,t,i,n){var r;let o=i.head-s.from,l=Zi.find(e,o,(r=i.bidiLevel)!==null&&r!==void 0?r:-1,i.assoc),a=e[l],c=a.side(n,t);if(o==c){let h=l+=n?1:-1;if(h<0||h>=e.length)return null;a=e[l=h],o=a.side(!n,t),c=a.side(n,t)}let u=Jt(s.text,o,a.forward(n,t));(u<a.from||u>a.to)&&(u=c),hv=s.text.slice(Math.min(o,u),Math.max(o,u));let d=l==(n?e.length-1:0)?null:e[l+(n?1:-1)];return d&&u==c&&d.level+(n?0:1)<a.level?fe.cursor(d.side(!n,t)+s.from,d.forward(n,t)?1:-1,d.level):fe.cursor(u+s.from,a.forward(n,t)?-1:1,a.level)}function C4(s,e,t){for(let i=e;i<t;i++){let n=cv(s.charCodeAt(i));if(n==1)return Nn;if(n==2||n==4)return tf}return Nn}const pv=Oe.define(),mv=Oe.define(),gv=Oe.define(),vv=Oe.define(),sd=Oe.define(),yv=Oe.define(),bv=Oe.define(),sf=Oe.define(),nf=Oe.define(),kv=Oe.define({combine:s=>s.some(e=>e)}),xv=Oe.define({combine:s=>s.some(e=>e)}),wv=Oe.define();class dr{constructor(e,t="nearest",i="nearest",n=5,r=5,o=!1){this.range=e,this.y=t,this.x=i,this.yMargin=n,this.xMargin=r,this.isSnapshot=o}map(e){return e.empty?this:new dr(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new dr(fe.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Dl=Ye.define({map:(s,e)=>s.map(e)}),Sv=Ye.define();function Ss(s,e,t){let i=s.facet(vv);i.length?i[0](e):window.onerror&&window.onerror(String(e),t,void 0,void 0,e)||(t?console.error(t+":",e):console.error(e))}const Pi=Oe.define({combine:s=>s.length?s[0]:!0});let _4=0;const Xn=Oe.define({combine(s){return s.filter((e,t)=>{for(let i=0;i<t;i++)if(s[i].plugin==e.plugin)return!1;return!0})}});class $t{constructor(e,t,i,n,r){this.id=e,this.create=t,this.domEventHandlers=i,this.domEventObservers=n,this.baseExtensions=r(this),this.extension=this.baseExtensions.concat(Xn.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(Xn.of({plugin:this,arg:e}))}static define(e,t){const{eventHandlers:i,eventObservers:n,provide:r,decorations:o}=t||{};return new $t(_4++,e,i,n,l=>{let a=[];return o&&a.push(jo.of(c=>{let u=c.plugin(l);return u?o(u):Fe.none})),r&&a.push(r(l)),a})}static fromClass(e,t){return $t.define((i,n)=>new e(i,n),t)}}class zu{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(i){if(Ss(t.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(t){Ss(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(i){Ss(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const Cv=Oe.define(),rf=Oe.define(),jo=Oe.define(),_v=Oe.define(),Qo=Oe.define(),Av=Oe.define();function _p(s,e){let t=s.state.facet(Av);if(!t.length)return t;let i=t.map(r=>r instanceof Function?r(s):r),n=[];return st.spans(i,e.from,e.to,{point(){},span(r,o,l,a){let c=r-e.from,u=o-e.from,d=n;for(let h=l.length-1;h>=0;h--,a--){let p=l[h].spec.bidiIsolate,g;if(p==null&&(p=C4(e.text,c,u)),a>0&&d.length&&(g=d[d.length-1]).to==c&&g.direction==p)g.to=u,d=g.inner;else{let k={from:c,to:u,direction:p,inner:[]};d.push(k),d=k.inner}}}}),n}const Mv=Oe.define();function of(s){let e=0,t=0,i=0,n=0;for(let r of s.state.facet(Mv)){let o=r(s);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(t=Math.max(t,o.right)),o.top!=null&&(i=Math.max(i,o.top)),o.bottom!=null&&(n=Math.max(n,o.bottom)))}return{left:e,right:t,top:i,bottom:n}}const Yr=Oe.define();class Fs{constructor(e,t,i,n){this.fromA=e,this.toA=t,this.fromB=i,this.toB=n}join(e){return new Fs(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let n=e[t-1];if(!(n.fromA>i.toA)){if(n.toA<i.fromA)break;i=i.join(n),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(t.length==0)return e;let i=[];for(let n=0,r=0,o=0,l=0;;n++){let a=n==e.length?null:e[n],c=o-l,u=a?a.fromB:1e9;for(;r<t.length&&t[r]<u;){let d=t[r],h=t[r+1],p=Math.max(l,d),g=Math.min(u,h);if(p<=g&&new Fs(p+c,g+c,p,g).addToSet(i),h>u)break;r+=2}if(!a)return i;new Fs(a.fromA,a.toA,a.fromB,a.toB).addToSet(i),o=a.toA,l=a.toB}}}class Ca{constructor(e,t,i){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=Vt.empty(this.startState.doc.length);for(let r of i)this.changes=this.changes.compose(r.changes);let n=[];this.changes.iterChangedRanges((r,o,l,a)=>n.push(new Fs(r,o,l,a))),this.changedRanges=n}static create(e,t,i){return new Ca(e,t,i)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class Ap extends ft{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Fe.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Pt],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Fs(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:c,toA:u})=>u<this.minWidthFrom||c>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let n=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?n=this.domChanged.newSel.head:!j4(e.changes,this.hasComposition)&&!e.selectionSet&&(n=e.state.selection.main.head));let r=n>-1?M4(this.view,e.changes,n):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:c,to:u}=this.hasComposition;i=new Fs(c,u,e.changes.mapPos(c,-1),e.changes.mapPos(u,1)).addToSet(i.slice())}this.hasComposition=r?{from:r.range.fromB,to:r.range.toB}:null,(De.ie||De.chrome)&&!r&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,l=this.updateDeco(),a=T4(o,l,e.changes);return i=Fs.extendWithRanges(i,a),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,e.startState.doc.length,r),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,i);let{observer:n}=this.view;n.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=De.chrome||De.ios?{node:n.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||n.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof $i&&o.widget instanceof Xc&&r.push(o.dom);n.updateGaps(r)}updateChildren(e,t,i){let n=i?i.range.addToSet(e.slice()):e,r=this.childCursor(t);for(let o=n.length-1;;o--){let l=o>=0?n[o]:null;if(!l)break;let{fromA:a,toA:c,fromB:u,toB:d}=l,h,p,g,k;if(i&&i.range.fromB<d&&i.range.toB>u){let U=ho.build(this.view.state.doc,u,i.range.fromB,this.decorations,this.dynamicDecorationMap),N=ho.build(this.view.state.doc,i.range.toB,d,this.decorations,this.dynamicDecorationMap);p=U.breakAtStart,g=U.openStart,k=N.openEnd;let P=this.compositionView(i);N.breakAtStart?P.breakAfter=1:N.content.length&&P.merge(P.length,P.length,N.content[0],!1,N.openStart,0)&&(P.breakAfter=N.content[0].breakAfter,N.content.shift()),U.content.length&&P.merge(0,0,U.content[U.content.length-1],!0,0,U.openEnd)&&U.content.pop(),h=U.content.concat(P).concat(N.content)}else({content:h,breakAtStart:p,openStart:g,openEnd:k}=ho.build(this.view.state.doc,u,d,this.decorations,this.dynamicDecorationMap));let{i:m,off:x}=r.findPos(c,1),{i:V,off:I}=r.findPos(a,-1);iv(this,V,I,m,x,h,p,g,k)}i&&this.fixCompositionDOM(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let i of t.effects)i.is(Sv)&&(this.editContextFormatting=i.value)}compositionView(e){let t=new ei(e.text.nodeValue);t.flags|=8;for(let{deco:n}of e.marks)t=new Bi(n,[t],t.length);let i=new Pt;return i.append(t,0),i}fixCompositionDOM(e){let t=(r,o)=>{o.flags|=8|(o.children.some(a=>a.flags&7)?1:0),this.markedForComposition.add(o);let l=ft.get(r);l&&l!=o&&(l.dom=null),o.setDOM(r)},i=this.childPos(e.range.fromB,1),n=this.children[i.i];t(e.line,n);for(let r=e.marks.length-1;r>=-1;r--)i=n.childPos(i.off,1),n=n.children[i.i],t(r>=0?e.marks[r].node:e.text,n)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,n=i==this.dom,r=!n&&!(this.view.state.facet(Pi)||this.dom.tabIndex>-1)&&ea(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(n||t||r))return;let o=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(l.anchor)),c=l.empty?a:this.moveToLine(this.domAtPos(l.head));if(De.gecko&&l.empty&&!this.hasComposition&&A4(a)){let d=document.createTextNode("");this.view.observer.ignore(()=>a.node.insertBefore(d,a.node.childNodes[a.offset]||null)),a=c=new ns(d,0),o=!0}let u=this.view.observer.selectionRange;(o||!u.focusNode||(!fo(a.node,a.offset,u.anchorNode,u.anchorOffset)||!fo(c.node,c.offset,u.focusNode,u.focusOffset))&&!this.suppressWidgetCursorChange(u,l))&&(this.view.observer.ignore(()=>{De.android&&De.chrome&&this.dom.contains(u.focusNode)&&O4(u.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let d=To(this.view.root);if(d)if(l.empty){if(De.gecko){let h=D4(a.node,a.offset);if(h&&h!=3){let p=(h==1?ev:tv)(a.node,a.offset);p&&(a=new ns(p.node,p.offset))}}d.collapse(a.node,a.offset),l.bidiLevel!=null&&d.caretBidiLevel!==void 0&&(d.caretBidiLevel=l.bidiLevel)}else if(d.extend){d.collapse(a.node,a.offset);try{d.extend(c.node,c.offset)}catch{}}else{let h=document.createRange();l.anchor>l.head&&([a,c]=[c,a]),h.setEnd(c.node,c.offset),h.setStart(a.node,a.offset),d.removeAllRanges(),d.addRange(h)}r&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(a,c)),this.impreciseAnchor=a.precise?null:new ns(u.anchorNode,u.anchorOffset),this.impreciseHead=c.precise?null:new ns(u.focusNode,u.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&fo(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,i=To(e.root),{anchorNode:n,anchorOffset:r}=e.observer.selectionRange;if(!i||!t.empty||!t.assoc||!i.modify)return;let o=Pt.find(this,t.head);if(!o)return;let l=o.posAtStart;if(t.head==l||t.head==l+o.length)return;let a=this.coordsAt(t.head,-1),c=this.coordsAt(t.head,1);if(!a||!c||a.bottom>c.top)return;let u=this.domAtPos(t.head+t.assoc);i.collapse(u.node,u.offset),i.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let d=e.observer.selectionRange;e.docView.posFromDOM(d.anchorNode,d.anchorOffset)!=t.from&&i.collapse(n,r)}moveToLine(e){let t=this.dom,i;if(e.node!=t)return e;for(let n=e.offset;!i&&n<t.childNodes.length;n++){let r=ft.get(t.childNodes[n]);r instanceof Pt&&(i=r.domAtPos(0))}for(let n=e.offset-1;!i&&n>=0;n--){let r=ft.get(t.childNodes[n]);r instanceof Pt&&(i=r.domAtPos(r.length))}return i?new ns(i.node,i.offset,!0):e}nearest(e){for(let t=e;t;){let i=ft.get(t);if(i&&i.rootView==this)return i;t=t.parentNode}return null}posFromDOM(e,t){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,t)+i.posAtStart}domAtPos(e){let{i:t,off:i}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let n=this.children[t];if(i<n.length||n instanceof Pt)break;t++,i=0}return this.children[t].domAtPos(i)}coordsAt(e,t){let i=null,n=0;for(let r=this.length,o=this.children.length-1;o>=0;o--){let l=this.children[o],a=r-l.breakAfter,c=a-l.length;if(a<e)break;if(c<=e&&(c<e||l.covers(-1))&&(a>e||l.covers(1))&&(!i||l instanceof Pt&&!(i instanceof Pt&&t>=0)))i=l,n=c;else if(i&&c==e&&a==e&&l instanceof $i&&Math.abs(t)<2){if(l.deco.startSide<0)break;o&&(i=null)}r=c}return i?i.coordsAt(e-n,t):null}coordsForChar(e){let{i:t,off:i}=this.childPos(e,1),n=this.children[t];if(!(n instanceof Pt))return null;for(;n.children.length;){let{i:l,off:a}=n.childPos(i,1);for(;;l++){if(l==n.children.length)return null;if((n=n.children[l]).length)break}i=a}if(!(n instanceof ei))return null;let r=Jt(n.text,i);if(r==i)return null;let o=In(n.dom,i,r).getClientRects();for(let l=0;l<o.length;l++){let a=o[l];if(l==o.length-1||a.top<a.bottom&&a.left<a.right)return a}return null}measureVisibleLineHeights(e){let t=[],{from:i,to:n}=e,r=this.view.contentDOM.clientWidth,o=r>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,a=this.view.textDirection==Ct.LTR;for(let c=0,u=0;u<this.children.length;u++){let d=this.children[u],h=c+d.length;if(h>n)break;if(c>=i){let p=d.dom.getBoundingClientRect();if(t.push(p.height),o){let g=d.dom.lastChild,k=g?Oo(g):[];if(k.length){let m=k[k.length-1],x=a?m.right-p.left:p.right-m.left;x>l&&(l=x,this.minWidth=r,this.minWidthFrom=c,this.minWidthTo=h)}}}c=h+d.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?Ct.RTL:Ct.LTR}measureTextSize(){for(let r of this.children)if(r instanceof Pt){let o=r.measureTextSize();if(o)return o}let e=document.createElement("div"),t,i,n;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let r=Oo(e.firstChild)[0];t=e.getBoundingClientRect().height,i=r?r.width/27:7,n=r?r.height:t,e.remove()}),{lineHeight:t,charWidth:i,textHeight:n}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new sv(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,n=0;;n++){let r=n==t.viewports.length?null:t.viewports[n],o=r?r.from-1:this.length;if(o>i){let l=(t.lineBlockAt(o).bottom-t.lineBlockAt(i).top)/this.view.scaleY;e.push(Fe.replace({widget:new Xc(l),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!r)break;i=r.to+1}return Fe.set(e)}updateDeco(){let e=1,t=this.view.state.facet(jo).map(r=>(this.dynamicDecorationMap[e++]=typeof r=="function")?r(this.view):r),i=!1,n=this.view.state.facet(_v).map((r,o)=>{let l=typeof r=="function";return l&&(i=!0),l?r(this.view):r});for(n.length&&(this.dynamicDecorationMap[e++]=i,t.push(st.join(n))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let c=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=c.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let c of this.view.state.facet(wv))try{if(c(this.view,e.range,e))return!0}catch(u){Ss(this.view.state,u,"scroll handler")}let{range:t}=e,i=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),n;if(!i)return;!t.empty&&(n=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(i={left:Math.min(i.left,n.left),top:Math.min(i.top,n.top),right:Math.max(i.right,n.right),bottom:Math.max(i.bottom,n.bottom)});let r=of(this.view),o={left:i.left-r.left,top:i.top-r.top,right:i.right+r.right,bottom:i.bottom+r.bottom},{offsetWidth:l,offsetHeight:a}=this.view.scrollDOM;r4(this.view.scrollDOM,o,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,l),-l),Math.max(Math.min(e.yMargin,a),-a),this.view.textDirection==Ct.LTR)}}function A4(s){return s.node.nodeType==1&&s.node.firstChild&&(s.offset==0||s.node.childNodes[s.offset-1].contentEditable=="false")&&(s.offset==s.node.childNodes.length||s.node.childNodes[s.offset].contentEditable=="false")}function Dv(s,e){let t=s.observer.selectionRange;if(!t.focusNode)return null;let i=ev(t.focusNode,t.focusOffset),n=tv(t.focusNode,t.focusOffset),r=i||n;if(n&&i&&n.node!=i.node){let l=ft.get(n.node);if(!l||l instanceof ei&&l.text!=n.node.nodeValue)r=n;else if(s.docView.lastCompositionAfterCursor){let a=ft.get(i.node);!a||a instanceof ei&&a.text!=i.node.nodeValue||(r=n)}}if(s.docView.lastCompositionAfterCursor=r!=i,!r)return null;let o=e-r.offset;return{from:o,to:o+r.node.nodeValue.length,node:r.node}}function M4(s,e,t){let i=Dv(s,t);if(!i)return null;let{node:n,from:r,to:o}=i,l=n.nodeValue;if(/[\n\r]/.test(l)||s.state.doc.sliceString(i.from,i.to)!=l)return null;let a=e.invertedDesc,c=new Fs(a.mapPos(r),a.mapPos(o),r,o),u=[];for(let d=n.parentNode;;d=d.parentNode){let h=ft.get(d);if(h instanceof Bi)u.push({node:d,deco:h.mark});else{if(h instanceof Pt||d.nodeName=="DIV"&&d.parentNode==s.contentDOM)return{range:c,text:n,marks:u,line:d};if(d!=s.contentDOM)u.push({node:d,deco:new Jo({inclusive:!0,attributes:p4(d),tagName:d.tagName.toLowerCase()})});else return null}}}function D4(s,e){return s.nodeType!=1?0:(e&&s.childNodes[e-1].contentEditable=="false"?1:0)|(e<s.childNodes.length&&s.childNodes[e].contentEditable=="false"?2:0)}let E4=class{constructor(){this.changes=[]}compareRange(e,t){ta(e,t,this.changes)}comparePoint(e,t){ta(e,t,this.changes)}boundChange(e){ta(e,e,this.changes)}};function T4(s,e,t){let i=new E4;return st.compare(s,e,t,i),i.changes}function O4(s,e){for(let t=s;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function j4(s,e){let t=!1;return e&&s.iterChangedRanges((i,n)=>{i<e.to&&n>e.from&&(t=!0)}),t}function P4(s,e,t=1){let i=s.charCategorizer(e),n=s.doc.lineAt(e),r=e-n.from;if(n.length==0)return fe.cursor(e);r==0?t=1:r==n.length&&(t=-1);let o=r,l=r;t<0?o=Jt(n.text,r,!1):l=Jt(n.text,r);let a=i(n.text.slice(o,l));for(;o>0;){let c=Jt(n.text,o,!1);if(i(n.text.slice(c,o))!=a)break;o=c}for(;l<n.length;){let c=Jt(n.text,l);if(i(n.text.slice(l,c))!=a)break;l=c}return fe.range(o+n.from,l+n.from)}function $4(s,e){return e.left>s?e.left-s:Math.max(0,s-e.right)}function R4(s,e){return e.top>s?e.top-s:Math.max(0,s-e.bottom)}function Uu(s,e){return s.top<e.bottom-1&&s.bottom>e.top+1}function Mp(s,e){return e<s.top?{top:e,left:s.left,right:s.right,bottom:s.bottom}:s}function Dp(s,e){return e>s.bottom?{top:s.top,left:s.left,right:s.right,bottom:e}:s}function id(s,e,t){let i,n,r,o,l=!1,a,c,u,d;for(let g=s.firstChild;g;g=g.nextSibling){let k=Oo(g);for(let m=0;m<k.length;m++){let x=k[m];n&&Uu(n,x)&&(x=Mp(Dp(x,n.bottom),n.top));let V=$4(e,x),I=R4(t,x);if(V==0&&I==0)return g.nodeType==3?Ep(g,e,t):id(g,e,t);(!i||o>I||o==I&&r>V)&&(i=g,n=x,r=V,o=I,l=V?e<x.left?m>0:m<k.length-1:!0),V==0?t>x.bottom&&(!u||u.bottom<x.bottom)?(a=g,u=x):t<x.top&&(!d||d.top>x.top)&&(c=g,d=x):u&&Uu(u,x)?u=Dp(u,x.bottom):d&&Uu(d,x)&&(d=Mp(d,x.top))}}if(u&&u.bottom>=t?(i=a,n=u):d&&d.top<=t&&(i=c,n=d),!i)return{node:s,offset:0};let h=Math.max(n.left,Math.min(n.right,e));if(i.nodeType==3)return Ep(i,h,t);if(l&&i.contentEditable!="false")return id(i,h,t);let p=Array.prototype.indexOf.call(s.childNodes,i)+(e>=(n.left+n.right)/2?1:0);return{node:s,offset:p}}function Ep(s,e,t){let i=s.nodeValue.length,n=-1,r=1e9,o=0;for(let l=0;l<i;l++){let a=In(s,l,l+1).getClientRects();for(let c=0;c<a.length;c++){let u=a[c];if(u.top==u.bottom)continue;o||(o=e-u.left);let d=(u.top>t?u.top-t:t-u.bottom)-1;if(u.left-1<=e&&u.right+1>=e&&d<r){let h=e>=(u.left+u.right)/2,p=h;if((De.chrome||De.gecko)&&In(s,l).getBoundingClientRect().left==u.right&&(p=!h),d<=0)return{node:s,offset:l+(p?1:0)};n=l+(p?1:0),r=d}}}return{node:s,offset:n>-1?n:o>0?s.nodeValue.length:0}}function Ev(s,e,t,i=-1){var n,r;let o=s.contentDOM.getBoundingClientRect(),l=o.top+s.viewState.paddingTop,a,{docHeight:c}=s.viewState,{x:u,y:d}=e,h=d-l;if(h<0)return 0;if(h>c)return s.state.doc.length;for(let U=s.viewState.heightOracle.textHeight/2,N=!1;a=s.elementAtHeight(h),a.type!=gs.Text;)for(;h=i>0?a.bottom+U:a.top-U,!(h>=0&&h<=c);){if(N)return t?null:0;N=!0,i=-i}d=l+h;let p=a.from;if(p<s.viewport.from)return s.viewport.from==0?0:t?null:Tp(s,o,a,u,d);if(p>s.viewport.to)return s.viewport.to==s.state.doc.length?s.state.doc.length:t?null:Tp(s,o,a,u,d);let g=s.dom.ownerDocument,k=s.root.elementFromPoint?s.root:g,m=k.elementFromPoint(u,d);m&&!s.contentDOM.contains(m)&&(m=null),m||(u=Math.max(o.left+1,Math.min(o.right-1,u)),m=k.elementFromPoint(u,d),m&&!s.contentDOM.contains(m)&&(m=null));let x,V=-1;if(m&&((n=s.docView.nearest(m))===null||n===void 0?void 0:n.isEditable)!=!1){if(g.caretPositionFromPoint){let U=g.caretPositionFromPoint(u,d);U&&({offsetNode:x,offset:V}=U)}else if(g.caretRangeFromPoint){let U=g.caretRangeFromPoint(u,d);U&&({startContainer:x,startOffset:V}=U)}x&&(!s.contentDOM.contains(x)||De.safari&&L4(x,V,u)||De.chrome&&V4(x,V,u))&&(x=void 0),x&&(V=Math.min(ki(x),V))}if(!x||!s.docView.dom.contains(x)){let U=Pt.find(s.docView,p);if(!U)return h>a.top+a.height/2?a.to:a.from;({node:x,offset:V}=id(U.dom,u,d))}let I=s.docView.nearest(x);if(!I)return null;if(I.isWidget&&((r=I.dom)===null||r===void 0?void 0:r.nodeType)==1){let U=I.dom.getBoundingClientRect();return e.y<U.top||e.y<=U.bottom&&e.x<=(U.left+U.right)/2?I.posAtStart:I.posAtEnd}else return I.localPosFromDOM(x,V)+I.posAtStart}function Tp(s,e,t,i,n){let r=Math.round((i-e.left)*s.defaultCharacterWidth);if(s.lineWrapping&&t.height>s.defaultLineHeight*1.5){let l=s.viewState.heightOracle.textHeight,a=Math.floor((n-t.top-(s.defaultLineHeight-l)*.5)/l);r+=a*s.viewState.heightOracle.lineLength}let o=s.state.sliceDoc(t.from,t.to);return t.from+zc(o,r,s.state.tabSize)}function Tv(s,e,t){let i,n=s;if(s.nodeType!=3||e!=(i=s.nodeValue.length))return!1;for(;;){let r=n.nextSibling;if(r){if(r.nodeName=="BR")break;return!1}else{let o=n.parentNode;if(!o||o.nodeName=="DIV")break;n=o}}return In(s,i-1,i).getBoundingClientRect().right>t}function L4(s,e,t){return Tv(s,e,t)}function V4(s,e,t){if(e!=0)return Tv(s,e,t);for(let n=s;;){let r=n.parentNode;if(!r||r.nodeType!=1||r.firstChild!=n)return!1;if(r.classList.contains("cm-line"))break;n=r}let i=s.nodeType==1?s.getBoundingClientRect():In(s,0,Math.max(s.nodeValue.length,1)).getBoundingClientRect();return t-i.left>5}function nd(s,e,t){let i=s.lineBlockAt(e);if(Array.isArray(i.type)){let n;for(let r of i.type){if(r.from>e)break;if(!(r.to<e)){if(r.from<e&&r.to>e)return r;(!n||r.type==gs.Text&&(n.type!=r.type||(t<0?r.from<e:r.to>e)))&&(n=r)}}return n||i}return i}function B4(s,e,t,i){let n=nd(s,e.head,e.assoc||-1),r=!i||n.type!=gs.Text||!(s.lineWrapping||n.widgetLineBreaks)?null:s.coordsAtPos(e.assoc<0&&e.head>n.from?e.head-1:e.head);if(r){let o=s.dom.getBoundingClientRect(),l=s.textDirectionAt(n.from),a=s.posAtCoords({x:t==(l==Ct.LTR)?o.right-1:o.left+1,y:(r.top+r.bottom)/2});if(a!=null)return fe.cursor(a,t?-1:1)}return fe.cursor(t?n.to:n.from,t?-1:1)}function Op(s,e,t,i){let n=s.state.doc.lineAt(e.head),r=s.bidiSpans(n),o=s.textDirectionAt(n.from);for(let l=e,a=null;;){let c=S4(n,r,o,l,t),u=hv;if(!c){if(n.number==(t?s.state.doc.lines:1))return l;u=`
`,n=s.state.doc.line(n.number+(t?1:-1)),r=s.bidiSpans(n),c=s.visualLineSide(n,!t)}if(a){if(!a(u))return l}else{if(!i)return c;a=i(u)}l=c}}function I4(s,e,t){let i=s.state.charCategorizer(e),n=i(t);return r=>{let o=i(r);return n==_t.Space&&(n=o),n==o}}function N4(s,e,t,i){let n=e.head,r=t?1:-1;if(n==(t?s.state.doc.length:0))return fe.cursor(n,e.assoc);let o=e.goalColumn,l,a=s.contentDOM.getBoundingClientRect(),c=s.coordsAtPos(n,e.assoc||-1),u=s.documentTop;if(c)o==null&&(o=c.left-a.left),l=r<0?c.top:c.bottom;else{let p=s.viewState.lineBlockAt(n);o==null&&(o=Math.min(a.right-a.left,s.defaultCharacterWidth*(n-p.from))),l=(r<0?p.top:p.bottom)+u}let d=a.left+o,h=i??s.viewState.heightOracle.textHeight>>1;for(let p=0;;p+=10){let g=l+(h+p)*r,k=Ev(s,{x:d,y:g},!1,r);if(g<a.top||g>a.bottom||(r<0?k<n:k>n)){let m=s.docView.coordsForChar(k),x=!m||g<m.top?-1:1;return fe.cursor(k,x,void 0,o)}}}function po(s,e,t){for(;;){let i=0;for(let n of s)n.between(e-1,e+1,(r,o,l)=>{if(e>r&&e<o){let a=i||t||(e-r<o-e?-1:1);e=a<0?r:o,i=a}});if(!i)return e}}function Ov(s,e){let t=null;for(let i=0;i<e.ranges.length;i++){let n=e.ranges[i],r=null;if(n.empty){let o=po(s,n.from,0);o!=n.from&&(r=fe.cursor(o,-1))}else{let o=po(s,n.from,-1),l=po(s,n.to,1);(o!=n.from||l!=n.to)&&(r=fe.range(n.from==n.anchor?o:l,n.from==n.head?o:l))}r&&(t||(t=e.ranges.slice()),t[i]=r)}return t?fe.create(t,e.mainIndex):e}function Hu(s,e,t){let i=po(s.state.facet(Qo).map(n=>n(s)),t.from,e.head>t.from?-1:1);return i==t.from?t:fe.cursor(i,i<t.from?1:-1)}const Qr="";class F4{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(tt.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Qr}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let n=e;;){this.findPointBefore(i,n);let r=this.text.length;this.readNode(n);let o=n.nextSibling;if(o==t)break;let l=ft.get(n),a=ft.get(o);(l&&a?l.breakAfter:(l?l.breakAfter:wa(n))||wa(o)&&(n.nodeName!="BR"||n.cmIgnore)&&this.text.length>r)&&!U4(o,t)&&this.lineBreak(),n=o}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,n=this.lineSeparator?null:/\r\n?|\n/g;;){let r=-1,o=1,l;if(this.lineSeparator?(r=t.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(l=n.exec(t))&&(r=l.index,o=l[0].length),this.append(t.slice(i,r<0?t.length:r)),r<0)break;if(this.lineBreak(),o>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=o-1);i=r+o}}readNode(e){if(e.cmIgnore)return;let t=ft.get(e),i=t&&t.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let n=i.iter();!n.next().done;)n.lineBreak?this.lineBreak():this.append(n.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(z4(e,i.node,i.offset)?t:0))}}function z4(s,e,t){for(;;){if(!e||t<ki(e))return!1;if(e==s)return!0;t=Bn(e)+1,e=e.parentNode}}function U4(s,e){let t;for(;!(s==e||!s);s=s.nextSibling){let i=ft.get(s);if(!(i?.isWidget||s.cmIgnore))return!1;i&&(t||(t=[])).push(i)}if(t)for(let i of t){let n=i.overrideDOMText;if(n?.length)return!1}return!0}class jp{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class H4{constructor(e,t,i,n){this.typeOver=n,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:r,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,i,0))){let l=r||o?[]:q4(e),a=new F4(l,e.state);a.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=a.text,this.newSel=K4(l,this.bounds.from)}else{let l=e.observer.selectionRange,a=r&&r.node==l.focusNode&&r.offset==l.focusOffset||!Jc(e.contentDOM,l.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(l.focusNode,l.focusOffset),c=o&&o.node==l.anchorNode&&o.offset==l.anchorOffset||!Jc(e.contentDOM,l.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(l.anchorNode,l.anchorOffset),u=e.viewport;if((De.ios||De.chrome)&&e.state.selection.main.empty&&a!=c&&(u.from>0||u.to<e.state.doc.length)){let d=Math.min(a,c),h=Math.max(a,c),p=u.from-d,g=u.to-h;(p==0||p==1||d==0)&&(g==0||g==-1||h==e.state.doc.length)&&(a=0,c=e.state.doc.length)}this.newSel=fe.single(c,a)}}}function jv(s,e){let t,{newSel:i}=e,n=s.state.selection.main,r=s.inputState.lastKeyTime>Date.now()-100?s.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:l}=e.bounds,a=n.from,c=null;(r===8||De.android&&e.text.length<l-o)&&(a=n.to,c="end");let u=Pv(s.state.doc.sliceString(o,l,Qr),e.text,a-o,c);u&&(De.chrome&&r==13&&u.toB==u.from+2&&e.text.slice(u.from,u.toB)==Qr+Qr&&u.toB--,t={from:o+u.from,to:o+u.toA,insert:it.of(e.text.slice(u.from,u.toB).split(Qr))})}else i&&(!s.hasFocus&&s.state.facet(Pi)||i.main.eq(n))&&(i=null);if(!t&&!i)return!1;if(!t&&e.typeOver&&!n.empty&&i&&i.main.empty?t={from:n.from,to:n.to,insert:s.state.doc.slice(n.from,n.to)}:(De.mac||De.android)&&t&&t.from==t.to&&t.from==n.head-1&&/^\. ?$/.test(t.insert.toString())&&s.contentDOM.getAttribute("autocorrect")=="off"?(i&&t.insert.length==2&&(i=fe.single(i.main.anchor-1,i.main.head-1)),t={from:t.from,to:t.to,insert:it.of([t.insert.toString().replace("."," ")])}):t&&t.from>=n.from&&t.to<=n.to&&(t.from!=n.from||t.to!=n.to)&&n.to-n.from-(t.to-t.from)<=4?t={from:n.from,to:n.to,insert:s.state.doc.slice(n.from,t.from).append(t.insert).append(s.state.doc.slice(t.to,n.to))}:De.chrome&&t&&t.from==t.to&&t.from==n.head&&t.insert.toString()==`
 `&&s.lineWrapping&&(i&&(i=fe.single(i.main.anchor-1,i.main.head-1)),t={from:n.from,to:n.to,insert:it.of([" "])}),t)return lf(s,t,i,r);if(i&&!i.main.eq(n)){let o=!1,l="select";return s.inputState.lastSelectionTime>Date.now()-50&&(s.inputState.lastSelectionOrigin=="select"&&(o=!0),l=s.inputState.lastSelectionOrigin,l=="select.pointer"&&(i=Ov(s.state.facet(Qo).map(a=>a(s)),i))),s.dispatch({selection:i,scrollIntoView:o,userEvent:l}),!0}else return!1}function lf(s,e,t,i=-1){if(De.ios&&s.inputState.flushIOSKey(e))return!0;let n=s.state.selection.main;if(De.android&&(e.to==n.to&&(e.from==n.from||e.from==n.from-1&&s.state.sliceDoc(e.from,n.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&cr(s.contentDOM,"Enter",13)||(e.from==n.from-1&&e.to==n.to&&e.insert.length==0||i==8&&e.insert.length<e.to-e.from&&e.to>n.head)&&cr(s.contentDOM,"Backspace",8)||e.from==n.from&&e.to==n.to+1&&e.insert.length==0&&cr(s.contentDOM,"Delete",46)))return!0;let r=e.insert.toString();s.inputState.composing>=0&&s.inputState.composing++;let o,l=()=>o||(o=W4(s,e,t));return s.state.facet(yv).some(a=>a(s,e.from,e.to,r,l))||s.dispatch(l()),!0}function W4(s,e,t){let i,n=s.state,r=n.selection.main,o=-1;if(e.from==e.to&&e.from<r.from||e.from>r.to){let a=e.from<r.from?-1:1,c=a<0?r.from:r.to,u=po(n.facet(Qo).map(d=>d(s)),c,a);e.from==u&&(o=u)}if(o>-1)i={changes:e,selection:fe.cursor(e.from+e.insert.length,-1)};else if(e.from>=r.from&&e.to<=r.to&&e.to-e.from>=(r.to-r.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&s.inputState.composing<0){let a=r.from<e.from?n.sliceDoc(r.from,e.from):"",c=r.to>e.to?n.sliceDoc(e.to,r.to):"";i=n.replaceSelection(s.state.toText(a+e.insert.sliceString(0,void 0,s.state.lineBreak)+c))}else{let a=n.changes(e),c=t&&t.main.to<=a.newLength?t.main:void 0;if(n.selection.ranges.length>1&&s.inputState.composing>=0&&e.to<=r.to&&e.to>=r.to-10){let u=s.state.sliceDoc(e.from,e.to),d,h=t&&Dv(s,t.main.head);if(h){let k=e.insert.length-(e.to-e.from);d={from:h.from,to:h.to-k}}else d=s.state.doc.lineAt(r.head);let p=r.to-e.to,g=r.to-r.from;i=n.changeByRange(k=>{if(k.from==r.from&&k.to==r.to)return{changes:a,range:c||k.map(a)};let m=k.to-p,x=m-u.length;if(k.to-k.from!=g||s.state.sliceDoc(x,m)!=u||k.to>=d.from&&k.from<=d.to)return{range:k};let V=n.changes({from:x,to:m,insert:e.insert}),I=k.to-r.to;return{changes:V,range:c?fe.range(Math.max(0,c.anchor+I),Math.max(0,c.head+I)):k.map(V)}})}else i={changes:a,selection:c&&n.selection.replaceRange(c)}}let l="input.type";return(s.composing||s.inputState.compositionPendingChange&&s.inputState.compositionEndedAt>Date.now()-50)&&(s.inputState.compositionPendingChange=!1,l+=".compose",s.inputState.compositionFirstChange&&(l+=".start",s.inputState.compositionFirstChange=!1)),n.update(i,{userEvent:l,scrollIntoView:!0})}function Pv(s,e,t,i){let n=Math.min(s.length,e.length),r=0;for(;r<n&&s.charCodeAt(r)==e.charCodeAt(r);)r++;if(r==n&&s.length==e.length)return null;let o=s.length,l=e.length;for(;o>0&&l>0&&s.charCodeAt(o-1)==e.charCodeAt(l-1);)o--,l--;if(i=="end"){let a=Math.max(0,r-Math.min(o,l));t-=o+a-r}if(o<r&&s.length<e.length){let a=t<=r&&t>=o?r-t:0;r-=a,l=r+(l-o),o=r}else if(l<r){let a=t<=r&&t>=l?r-t:0;r-=a,o=r+(o-l),l=r}return{from:r,toA:o,toB:l}}function q4(s){let e=[];if(s.root.activeElement!=s.contentDOM)return e;let{anchorNode:t,anchorOffset:i,focusNode:n,focusOffset:r}=s.observer.selectionRange;return t&&(e.push(new jp(t,i)),(n!=t||r!=i)&&e.push(new jp(n,r))),e}function K4(s,e){if(s.length==0)return null;let t=s[0].pos,i=s.length==2?s[1].pos:t;return t>-1&&i>-1?fe.single(t+e,i+e):null}class G4{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,De.safari&&e.contentDOM.addEventListener("input",()=>null),De.gecko&&c5(e.contentDOM.ownerDocument)}handleEvent(e){!s5(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,t){let i=this.handlers[e];if(i){for(let n of i.observers)n(this.view,t);for(let n of i.handlers){if(t.defaultPrevented)break;if(n(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=J4(e),i=this.handlers,n=this.view.contentDOM;for(let r in t)if(r!="scroll"){let o=!t[r].handlers.length,l=i[r];l&&o!=!l.handlers.length&&(n.removeEventListener(r,this.handleEvent),l=null),l||n.addEventListener(r,this.handleEvent,{passive:o})}for(let r in i)r!="scroll"&&!t[r]&&n.removeEventListener(r,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&Rv.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),De.android&&De.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return De.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=$v.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||Y4.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,cr(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return!/^key/.test(e.type)||e.synthetic?!1:this.composing>0?!0:De.safari&&!De.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function Pp(s,e){return(t,i)=>{try{return e.call(s,i,t)}catch(n){Ss(t.state,n)}}}function J4(s){let e=Object.create(null);function t(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of s){let n=i.spec,r=n&&n.plugin.domEventHandlers,o=n&&n.plugin.domEventObservers;if(r)for(let l in r){let a=r[l];a&&t(l).handlers.push(Pp(i.value,a))}if(o)for(let l in o){let a=o[l];a&&t(l).observers.push(Pp(i.value,a))}}for(let i in ti)t(i).handlers.push(ti[i]);for(let i in Hs)t(i).observers.push(Hs[i]);return e}const $v=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Y4="dthko",Rv=[16,17,18,20,91,92,224,225],El=6;function Tl(s){return Math.max(0,s)*.7+8}function Q4(s,e){return Math.max(Math.abs(s.clientX-e.clientX),Math.abs(s.clientY-e.clientY))}class X4{constructor(e,t,i,n){this.view=e,this.startEvent=t,this.style=i,this.mustSelect=n,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=o4(e.contentDOM),this.atoms=e.state.facet(Qo).map(o=>o(e));let r=e.contentDOM.ownerDocument;r.addEventListener("mousemove",this.move=this.move.bind(this)),r.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(tt.allowMultipleSelections)&&Z4(e,t),this.dragging=t5(e,t)&&Bv(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&Q4(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,i=0,n=0,r=0,o=this.view.win.innerWidth,l=this.view.win.innerHeight;this.scrollParents.x&&({left:n,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:r,bottom:l}=this.scrollParents.y.getBoundingClientRect());let a=of(this.view);e.clientX-a.left<=n+El?t=-Tl(n-e.clientX):e.clientX+a.right>=o-El&&(t=Tl(e.clientX-o)),e.clientY-a.top<=r+El?i=-Tl(r-e.clientY):e.clientY+a.bottom>=l-El&&(i=Tl(e.clientY-l)),this.setScrollSpeed(t,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:t}=this,i=Ov(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function Z4(s,e){let t=s.state.facet(pv);return t.length?t[0](e):De.mac?e.metaKey:e.ctrlKey}function e5(s,e){let t=s.state.facet(mv);return t.length?t[0](e):De.mac?!e.altKey:!e.ctrlKey}function t5(s,e){let{main:t}=s.state.selection;if(t.empty)return!1;let i=To(s.root);if(!i||i.rangeCount==0)return!0;let n=i.getRangeAt(0).getClientRects();for(let r=0;r<n.length;r++){let o=n[r];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function s5(s,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,i;t!=s.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(i=ft.get(t))&&i.ignoreEvent(e))return!1;return!0}const ti=Object.create(null),Hs=Object.create(null),Lv=De.ie&&De.ie_version<15||De.ios&&De.webkit_version<604;function i5(s){let e=s.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{s.focus(),t.remove(),Vv(s,t.value)},50)}function cu(s,e,t){for(let i of s.facet(e))t=i(t,s);return t}function Vv(s,e){e=cu(s.state,sf,e);let{state:t}=s,i,n=1,r=t.toText(e),o=r.lines==t.selection.ranges.length;if(rd!=null&&t.selection.ranges.every(a=>a.empty)&&rd==r.toString()){let a=-1;i=t.changeByRange(c=>{let u=t.doc.lineAt(c.from);if(u.from==a)return{range:c};a=u.from;let d=t.toText((o?r.line(n++).text:e)+t.lineBreak);return{changes:{from:u.from,insert:d},range:fe.cursor(c.from+d.length)}})}else o?i=t.changeByRange(a=>{let c=r.line(n++);return{changes:{from:a.from,to:a.to,insert:c.text},range:fe.cursor(a.from+c.length)}}):i=t.replaceSelection(r);s.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}Hs.scroll=s=>{s.inputState.lastScrollTop=s.scrollDOM.scrollTop,s.inputState.lastScrollLeft=s.scrollDOM.scrollLeft};ti.keydown=(s,e)=>(s.inputState.setSelectionOrigin("select"),e.keyCode==27&&s.inputState.tabFocusMode!=0&&(s.inputState.tabFocusMode=Date.now()+2e3),!1);Hs.touchstart=(s,e)=>{s.inputState.lastTouchTime=Date.now(),s.inputState.setSelectionOrigin("select.pointer")};Hs.touchmove=s=>{s.inputState.setSelectionOrigin("select.pointer")};ti.mousedown=(s,e)=>{if(s.observer.flush(),s.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let i of s.state.facet(gv))if(t=i(s,e),t)break;if(!t&&e.button==0&&(t=o5(s,e)),t){let i=!s.hasFocus;s.inputState.startMouseSelection(new X4(s,e,t,i)),i&&s.observer.ignore(()=>{Q0(s.contentDOM);let r=s.root.activeElement;r&&!r.contains(s.contentDOM)&&r.blur()});let n=s.inputState.mouseSelection;if(n)return n.start(e),n.dragging===!1}else s.inputState.setSelectionOrigin("select.pointer");return!1};function $p(s,e,t,i){if(i==1)return fe.cursor(e,t);if(i==2)return P4(s.state,e,t);{let n=Pt.find(s.docView,e),r=s.state.doc.lineAt(n?n.posAtEnd:e),o=n?n.posAtStart:r.from,l=n?n.posAtEnd:r.to;return l<s.state.doc.length&&l==r.to&&l++,fe.range(o,l)}}let Rp=(s,e,t)=>e>=t.top&&e<=t.bottom&&s>=t.left&&s<=t.right;function n5(s,e,t,i){let n=Pt.find(s.docView,e);if(!n)return 1;let r=e-n.posAtStart;if(r==0)return 1;if(r==n.length)return-1;let o=n.coordsAt(r,-1);if(o&&Rp(t,i,o))return-1;let l=n.coordsAt(r,1);return l&&Rp(t,i,l)?1:o&&o.bottom>=i?-1:1}function Lp(s,e){let t=s.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:n5(s,t,e.clientX,e.clientY)}}const r5=De.ie&&De.ie_version<=11;let Vp=null,Bp=0,Ip=0;function Bv(s){if(!r5)return s.detail;let e=Vp,t=Ip;return Vp=s,Ip=Date.now(),Bp=!e||t>Date.now()-400&&Math.abs(e.clientX-s.clientX)<2&&Math.abs(e.clientY-s.clientY)<2?(Bp+1)%3:1}function o5(s,e){let t=Lp(s,e),i=Bv(e),n=s.state.selection;return{update(r){r.docChanged&&(t.pos=r.changes.mapPos(t.pos),n=n.map(r.changes))},get(r,o,l){let a=Lp(s,r),c,u=$p(s,a.pos,a.bias,i);if(t.pos!=a.pos&&!o){let d=$p(s,t.pos,t.bias,i),h=Math.min(d.from,u.from),p=Math.max(d.to,u.to);u=h<u.from?fe.range(h,p):fe.range(p,h)}return o?n.replaceRange(n.main.extend(u.from,u.to)):l&&i==1&&n.ranges.length>1&&(c=l5(n,a.pos))?c:l?n.addRange(u):fe.create([u])}}}function l5(s,e){for(let t=0;t<s.ranges.length;t++){let{from:i,to:n}=s.ranges[t];if(i<=e&&n>=e)return fe.create(s.ranges.slice(0,t).concat(s.ranges.slice(t+1)),s.mainIndex==t?0:s.mainIndex-(s.mainIndex>t?1:0))}return null}ti.dragstart=(s,e)=>{let{selection:{main:t}}=s.state;if(e.target.draggable){let n=s.docView.nearest(e.target);if(n&&n.isWidget){let r=n.posAtStart,o=r+n.length;(r>=t.to||o<=t.from)&&(t=fe.range(r,o))}}let{inputState:i}=s;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",cu(s.state,nf,s.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1};ti.dragend=s=>(s.inputState.draggedContent=null,!1);function Np(s,e,t,i){if(t=cu(s.state,sf,t),!t)return;let n=s.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:r}=s.inputState,o=i&&r&&e5(s,e)?{from:r.from,to:r.to}:null,l={from:n,insert:t},a=s.state.changes(o?[o,l]:l);s.focus(),s.dispatch({changes:a,selection:{anchor:a.mapPos(n,-1),head:a.mapPos(n,1)},userEvent:o?"move.drop":"input.drop"}),s.inputState.draggedContent=null}ti.drop=(s,e)=>{if(!e.dataTransfer)return!1;if(s.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let i=Array(t.length),n=0,r=()=>{++n==t.length&&Np(s,e,i.filter(o=>o!=null).join(s.state.lineBreak),!1)};for(let o=0;o<t.length;o++){let l=new FileReader;l.onerror=r,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(i[o]=l.result),r()},l.readAsText(t[o])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return Np(s,e,i,!0),!0}return!1};ti.paste=(s,e)=>{if(s.state.readOnly)return!0;s.observer.flush();let t=Lv?null:e.clipboardData;return t?(Vv(s,t.getData("text/plain")||t.getData("text/uri-list")),!0):(i5(s),!1)};function a5(s,e){let t=s.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),s.focus()},50)}function u5(s){let e=[],t=[],i=!1;for(let n of s.selection.ranges)n.empty||(e.push(s.sliceDoc(n.from,n.to)),t.push(n));if(!e.length){let n=-1;for(let{from:r}of s.selection.ranges){let o=s.doc.lineAt(r);o.number>n&&(e.push(o.text),t.push({from:o.from,to:Math.min(s.doc.length,o.to+1)})),n=o.number}i=!0}return{text:cu(s,nf,e.join(s.lineBreak)),ranges:t,linewise:i}}let rd=null;ti.copy=ti.cut=(s,e)=>{let{text:t,ranges:i,linewise:n}=u5(s.state);if(!t&&!n)return!1;rd=n?t:null,e.type=="cut"&&!s.state.readOnly&&s.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let r=Lv?null:e.clipboardData;return r?(r.clearData(),r.setData("text/plain",t),!0):(a5(s,t),!1)};const Iv=Fi.define();function Nv(s,e){let t=[];for(let i of s.facet(bv)){let n=i(s,e);n&&t.push(n)}return t.length?s.update({effects:t,annotations:Iv.of(!0)}):null}function Fv(s){setTimeout(()=>{let e=s.hasFocus;if(e!=s.inputState.notifiedFocused){let t=Nv(s.state,e);t?s.dispatch(t):s.update([])}},10)}Hs.focus=s=>{s.inputState.lastFocusTime=Date.now(),!s.scrollDOM.scrollTop&&(s.inputState.lastScrollTop||s.inputState.lastScrollLeft)&&(s.scrollDOM.scrollTop=s.inputState.lastScrollTop,s.scrollDOM.scrollLeft=s.inputState.lastScrollLeft),Fv(s)};Hs.blur=s=>{s.observer.clearSelectionRange(),Fv(s)};Hs.compositionstart=Hs.compositionupdate=s=>{s.observer.editContext||(s.inputState.compositionFirstChange==null&&(s.inputState.compositionFirstChange=!0),s.inputState.composing<0&&(s.inputState.composing=0))};Hs.compositionend=s=>{s.observer.editContext||(s.inputState.composing=-1,s.inputState.compositionEndedAt=Date.now(),s.inputState.compositionPendingKey=!0,s.inputState.compositionPendingChange=s.observer.pendingRecords().length>0,s.inputState.compositionFirstChange=null,De.chrome&&De.android?s.observer.flushSoon():s.inputState.compositionPendingChange?Promise.resolve().then(()=>s.observer.flush()):setTimeout(()=>{s.inputState.composing<0&&s.docView.hasComposition&&s.update([])},50))};Hs.contextmenu=s=>{s.inputState.lastContextMenu=Date.now()};ti.beforeinput=(s,e)=>{var t,i;if(e.inputType=="insertReplacementText"&&s.observer.editContext){let r=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),o=e.getTargetRanges();if(r&&o.length){let l=o[0],a=s.posAtDOM(l.startContainer,l.startOffset),c=s.posAtDOM(l.endContainer,l.endOffset);return lf(s,{from:a,to:c,insert:s.state.toText(r)},null),!0}}let n;if(De.chrome&&De.android&&(n=$v.find(r=>r.inputType==e.inputType))&&(s.observer.delayAndroidKey(n.key,n.keyCode),n.key=="Backspace"||n.key=="Delete")){let r=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>r+10&&s.hasFocus&&(s.contentDOM.blur(),s.focus())},100)}return De.ios&&e.inputType=="deleteContentForward"&&s.observer.flushSoon(),De.safari&&e.inputType=="insertText"&&s.inputState.composing>=0&&setTimeout(()=>Hs.compositionend(s,e),20),!1};const Fp=new Set;function c5(s){Fp.has(s)||(Fp.add(s),s.addEventListener("copy",()=>{}),s.addEventListener("cut",()=>{}))}const zp=["pre-wrap","normal","pre-line","break-spaces"];let xr=!1;function Up(){xr=!1}class d5{constructor(e){this.lineWrapping=e,this.doc=it.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return zp.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let n=e[i];n<0?i++:this.heightSamples[Math.floor(n*10)]||(t=!0,this.heightSamples[Math.floor(n*10)]=!0)}return t}refresh(e,t,i,n,r,o){let l=zp.indexOf(e)>-1,a=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=l;if(this.lineWrapping=l,this.lineHeight=t,this.charWidth=i,this.textHeight=n,this.lineLength=r,a){this.heightSamples={};for(let c=0;c<o.length;c++){let u=o[c];u<0?c++:this.heightSamples[Math.floor(u*10)]=!0}}return a}}class f5{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class mi{constructor(e,t,i,n,r){this.from=e,this.length=t,this.top=i,this.height=n,this._content=r}get type(){return typeof this._content=="number"?gs.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof un?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new mi(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var St=(function(s){return s[s.ByPos=0]="ByPos",s[s.ByHeight=1]="ByHeight",s[s.ByPosNoHeight=2]="ByPosNoHeight",s})(St||(St={}));const sa=.001;class vs{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>sa&&(xr=!0),this.height=e)}replace(e,t,i){return vs.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,n){let r=this,o=i.doc;for(let l=n.length-1;l>=0;l--){let{fromA:a,toA:c,fromB:u,toB:d}=n[l],h=r.lineAt(a,St.ByPosNoHeight,i.setDoc(t),0,0),p=h.to>=c?h:r.lineAt(c,St.ByPosNoHeight,i,0,0);for(d+=p.to-c,c=p.to;l>0&&h.from<=n[l-1].toA;)a=n[l-1].fromA,u=n[l-1].fromB,l--,a<h.from&&(h=r.lineAt(a,St.ByPosNoHeight,i,0,0));u+=h.from-a,a=h.from;let g=af.build(i.setDoc(o),e,u,d);r=_a(r,r.replace(a,c,g))}return r.updateHeight(i,0)}static empty(){return new Ts(0,0)}static of(e){if(e.length==1)return e[0];let t=0,i=e.length,n=0,r=0;for(;;)if(t==i)if(n>r*2){let l=e[t-1];l.break?e.splice(--t,1,l.left,null,l.right):e.splice(--t,1,l.left,l.right),i+=1+l.break,n-=l.size}else if(r>n*2){let l=e[i];l.break?e.splice(i,1,l.left,null,l.right):e.splice(i,1,l.left,l.right),i+=2+l.break,r-=l.size}else break;else if(n<r){let l=e[t++];l&&(n+=l.size)}else{let l=e[--i];l&&(r+=l.size)}let o=0;return e[t-1]==null?(o=1,t--):e[t]==null&&(o=1,i++),new h5(vs.of(e.slice(0,t)),o,vs.of(e.slice(i)))}}function _a(s,e){return s==e?s:(s.constructor!=e.constructor&&(xr=!0),e)}vs.prototype.size=1;class zv extends vs{constructor(e,t,i){super(e,t),this.deco=i}blockAt(e,t,i,n){return new mi(n,this.length,i,this.height,this.deco||0)}lineAt(e,t,i,n,r){return this.blockAt(0,i,n,r)}forEachLine(e,t,i,n,r,o){e<=r+this.length&&t>=r&&o(this.blockAt(0,i,n,r))}updateHeight(e,t=0,i=!1,n){return n&&n.from<=t&&n.more&&this.setHeight(n.heights[n.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Ts extends zv{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,i,n){return new mi(n,this.length,i,this.height,this.breaks)}replace(e,t,i){let n=i[0];return i.length==1&&(n instanceof Ts||n instanceof Ht&&n.flags&4)&&Math.abs(this.length-n.length)<10?(n instanceof Ht?n=new Ts(n.length,this.height):n.height=this.height,this.outdated||(n.outdated=!1),n):vs.of(i)}updateHeight(e,t=0,i=!1,n){return n&&n.from<=t&&n.more?this.setHeight(n.heights[n.index++]):(i||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Ht extends vs{constructor(e){super(e,0)}heightMetrics(e,t){let i=e.doc.lineAt(t).number,n=e.doc.lineAt(t+this.length).number,r=n-i+1,o,l=0;if(e.lineWrapping){let a=Math.min(this.height,e.lineHeight*r);o=a/r,this.length>r+1&&(l=(this.height-a)/(this.length-r-1))}else o=this.height/r;return{firstLine:i,lastLine:n,perLine:o,perChar:l}}blockAt(e,t,i,n){let{firstLine:r,lastLine:o,perLine:l,perChar:a}=this.heightMetrics(t,n);if(t.lineWrapping){let c=n+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),u=t.doc.lineAt(c),d=l+u.length*a,h=Math.max(i,e-d/2);return new mi(u.from,u.length,h,d,0)}else{let c=Math.max(0,Math.min(o-r,Math.floor((e-i)/l))),{from:u,length:d}=t.doc.line(r+c);return new mi(u,d,i+l*c,l,0)}}lineAt(e,t,i,n,r){if(t==St.ByHeight)return this.blockAt(e,i,n,r);if(t==St.ByPosNoHeight){let{from:p,to:g}=i.doc.lineAt(e);return new mi(p,g-p,0,0,0)}let{firstLine:o,perLine:l,perChar:a}=this.heightMetrics(i,r),c=i.doc.lineAt(e),u=l+c.length*a,d=c.number-o,h=n+l*d+a*(c.from-r-d);return new mi(c.from,c.length,Math.max(n,Math.min(h,n+this.height-u)),u,0)}forEachLine(e,t,i,n,r,o){e=Math.max(e,r),t=Math.min(t,r+this.length);let{firstLine:l,perLine:a,perChar:c}=this.heightMetrics(i,r);for(let u=e,d=n;u<=t;){let h=i.doc.lineAt(u);if(u==e){let g=h.number-l;d+=a*g+c*(e-r-g)}let p=a+c*h.length;o(new mi(h.from,h.length,d,p,0)),d+=p,u=h.to+1}}replace(e,t,i){let n=this.length-t;if(n>0){let r=i[i.length-1];r instanceof Ht?i[i.length-1]=new Ht(r.length+n):i.push(null,new Ht(n-1))}if(e>0){let r=i[0];r instanceof Ht?i[0]=new Ht(e+r.length):i.unshift(new Ht(e-1),null)}return vs.of(i)}decomposeLeft(e,t){t.push(new Ht(e-1),null)}decomposeRight(e,t){t.push(null,new Ht(this.length-e-1))}updateHeight(e,t=0,i=!1,n){let r=t+this.length;if(n&&n.from<=t+this.length&&n.more){let o=[],l=Math.max(t,n.from),a=-1;for(n.from>t&&o.push(new Ht(n.from-t-1).updateHeight(e,t));l<=r&&n.more;){let u=e.doc.lineAt(l).length;o.length&&o.push(null);let d=n.heights[n.index++];a==-1?a=d:Math.abs(d-a)>=sa&&(a=-2);let h=new Ts(u,d);h.outdated=!1,o.push(h),l+=u+1}l<=r&&o.push(null,new Ht(r-l).updateHeight(e,l));let c=vs.of(o);return(a<0||Math.abs(c.height-this.height)>=sa||Math.abs(a-this.heightMetrics(e,t).perLine)>=sa)&&(xr=!0),_a(this,c)}else(i||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class h5 extends vs{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,t,i,n){let r=i+this.left.height;return e<r?this.left.blockAt(e,t,i,n):this.right.blockAt(e,t,r,n+this.left.length+this.break)}lineAt(e,t,i,n,r){let o=n+this.left.height,l=r+this.left.length+this.break,a=t==St.ByHeight?e<o:e<l,c=a?this.left.lineAt(e,t,i,n,r):this.right.lineAt(e,t,i,o,l);if(this.break||(a?c.to<l:c.from>l))return c;let u=t==St.ByPosNoHeight?St.ByPosNoHeight:St.ByPos;return a?c.join(this.right.lineAt(l,u,i,o,l)):this.left.lineAt(l,u,i,n,r).join(c)}forEachLine(e,t,i,n,r,o){let l=n+this.left.height,a=r+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,t,i,n,r,o),t>=a&&this.right.forEachLine(e,t,i,l,a,o);else{let c=this.lineAt(a,St.ByPos,i,n,r);e<c.from&&this.left.forEachLine(e,c.from-1,i,n,r,o),c.to>=e&&c.from<=t&&o(c),t>c.to&&this.right.forEachLine(c.to+1,t,i,l,a,o)}}replace(e,t,i){let n=this.left.length+this.break;if(t<n)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-n,t-n,i));let r=[];e>0&&this.decomposeLeft(e,r);let o=r.length;for(let l of i)r.push(l);if(e>0&&Hp(r,o-1),t<this.length){let l=r.length;this.decomposeRight(t,r),Hp(r,l)}return vs.of(r)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,n=i+this.break;if(e>=n)return this.right.decomposeRight(e-n,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<n&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?vs.of(this.break?[e,null,t]:[e,t]):(this.left=_a(this.left,e),this.right=_a(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,n){let{left:r,right:o}=this,l=t+r.length+this.break,a=null;return n&&n.from<=t+r.length&&n.more?a=r=r.updateHeight(e,t,i,n):r.updateHeight(e,t,i),n&&n.from<=l+o.length&&n.more?a=o=o.updateHeight(e,l,i,n):o.updateHeight(e,l,i),a?this.balanced(r,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Hp(s,e){let t,i;s[e]==null&&(t=s[e-1])instanceof Ht&&(i=s[e+1])instanceof Ht&&s.splice(e-1,3,new Ht(t.length+1+i.length))}const p5=5;class af{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let i=Math.min(t,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof Ts?n.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new Ts(i-this.pos,-1)),this.writtenTo=i,t>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let n=i.widget?i.widget.estimatedHeight:0,r=i.widget?i.widget.lineBreaks:0;n<0&&(n=this.oracle.lineHeight);let o=t-e;i.block?this.addBlock(new zv(o,n,i)):(o||r||n>=p5)&&this.addLineDeco(n,r,o)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Ts(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let i=new Ht(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Ts)return e;let t=new Ts(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,i){let n=this.ensureLine();n.length+=i,n.collapsed+=i,n.widgetHeight=Math.max(n.widgetHeight,e),n.breaks+=t,this.writtenTo=this.pos=this.pos+i}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof Ts)&&!this.isCovered?this.nodes.push(new Ts(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let n of this.nodes)n instanceof Ts&&n.updateHeight(this.oracle,i),i+=n?n.length:1;return this.nodes}static build(e,t,i,n){let r=new af(i,e);return st.spans(t,i,n,r,0),r.finish(i)}}function m5(s,e,t){let i=new g5;return st.compare(s,e,t,i,0),i.changes}class g5{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,n){(e<t||i&&i.heightRelevant||n&&n.heightRelevant)&&ta(e,t,this.changes,5)}}function v5(s,e){let t=s.getBoundingClientRect(),i=s.ownerDocument,n=i.defaultView||window,r=Math.max(0,t.left),o=Math.min(n.innerWidth,t.right),l=Math.max(0,t.top),a=Math.min(n.innerHeight,t.bottom);for(let c=s.parentNode;c&&c!=i.body;)if(c.nodeType==1){let u=c,d=window.getComputedStyle(u);if((u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth)&&d.overflow!="visible"){let h=u.getBoundingClientRect();r=Math.max(r,h.left),o=Math.min(o,h.right),l=Math.max(l,h.top),a=Math.min(c==s.parentNode?n.innerHeight:a,h.bottom)}c=d.position=="absolute"||d.position=="fixed"?u.offsetParent:u.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:r-t.left,right:Math.max(r,o)-t.left,top:l-(t.top+e),bottom:Math.max(l,a)-(t.top+e)}}function y5(s){let e=s.getBoundingClientRect(),t=s.ownerDocument.defaultView||window;return e.left<t.innerWidth&&e.right>0&&e.top<t.innerHeight&&e.bottom>0}function b5(s,e){let t=s.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class Wu{constructor(e,t,i,n){this.from=e,this.to=t,this.size=i,this.displaySize=n}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let n=e[i],r=t[i];if(n.from!=r.from||n.to!=r.to||n.size!=r.size)return!1}return!0}draw(e,t){return Fe.replace({widget:new k5(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class k5 extends fn{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class Wp{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=qp,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Ct.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(rf).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new d5(t),this.stateDeco=e.facet(jo).filter(i=>typeof i!="function"),this.heightMap=vs.empty().applyChanges(this.stateDeco,it.empty,this.heightOracle.setDoc(e.doc),[new Fs(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Fe.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let n=i?t.head:t.anchor;if(!e.some(({from:r,to:o})=>n>=r&&n<=o)){let{from:r,to:o}=this.lineBlockAt(n);e.push(new Ol(r,o))}}return this.viewports=e.sort((i,n)=>i.from-n.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?qp:new uf(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Xr(e,this.scaler))})}update(e,t=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(jo).filter(u=>typeof u!="function");let n=e.changedRanges,r=Fs.extendWithRanges(n,m5(i,this.stateDeco,e?e.changes:Vt.empty(this.state.doc.length))),o=this.heightMap.height,l=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);Up(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),r),(this.heightMap.height!=o||xr)&&(e.flags|=2),l?(this.scrollAnchorPos=e.changes.mapPos(l.from,-1),this.scrollAnchorHeight=l.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let a=r.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<a.from||t.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,t));let c=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,e.flags|=this.updateForViewport(),(c||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(xv)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,i=window.getComputedStyle(t),n=this.heightOracle,r=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?Ct.RTL:Ct.LTR;let o=this.heightOracle.mustRefreshForWrapping(r),l=t.getBoundingClientRect(),a=o||this.mustMeasureContent||this.contentDOMHeight!=l.height;this.contentDOMHeight=l.height,this.mustMeasureContent=!1;let c=0,u=0;if(l.width&&l.height){let{scaleX:U,scaleY:N}=Y0(t,l);(U>.005&&Math.abs(this.scaleX-U)>.005||N>.005&&Math.abs(this.scaleY-N)>.005)&&(this.scaleX=U,this.scaleY=N,c|=16,o=a=!0)}let d=(parseInt(i.paddingTop)||0)*this.scaleY,h=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=d||this.paddingBottom!=h)&&(this.paddingTop=d,this.paddingBottom=h,c|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(n.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,c|=16);let p=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=p&&(this.scrollAnchorHeight=-1,this.scrollTop=p),this.scrolledToBottom=Z0(e.scrollDOM);let g=(this.printing?b5:v5)(t,this.paddingTop),k=g.top-this.pixelViewport.top,m=g.bottom-this.pixelViewport.bottom;this.pixelViewport=g;let x=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(x!=this.inView&&(this.inView=x,x&&(a=!0)),!this.inView&&!this.scrollTarget&&!y5(e.dom))return 0;let V=l.width;if((this.contentDOMWidth!=V||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=l.width,this.editorHeight=e.scrollDOM.clientHeight,c|=16),a){let U=e.docView.measureVisibleLineHeights(this.viewport);if(n.mustRefreshForHeights(U)&&(o=!0),o||n.lineWrapping&&Math.abs(V-this.contentDOMWidth)>n.charWidth){let{lineHeight:N,charWidth:P,textHeight:S}=e.docView.measureTextSize();o=N>0&&n.refresh(r,N,P,S,Math.max(5,V/P),U),o&&(e.docView.minWidth=0,c|=16)}k>0&&m>0?u=Math.max(k,m):k<0&&m<0&&(u=Math.min(k,m)),Up();for(let N of this.viewports){let P=N.from==this.viewport.from?U:e.docView.measureVisibleLineHeights(N);this.heightMap=(o?vs.empty().applyChanges(this.stateDeco,it.empty,this.heightOracle,[new Fs(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(n,0,o,new f5(N.from,P))}xr&&(c|=2)}let I=!this.viewportIsAppropriate(this.viewport,u)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return I&&(c&2&&(c|=this.updateScaler()),this.viewport=this.getViewport(u,this.scrollTarget),c|=this.updateForViewport()),(c&2||I)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),c|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),c}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),n=this.heightMap,r=this.heightOracle,{visibleTop:o,visibleBottom:l}=this,a=new Ol(n.lineAt(o-i*1e3,St.ByHeight,r,0,0).from,n.lineAt(l+(1-i)*1e3,St.ByHeight,r,0,0).to);if(t){let{head:c}=t.range;if(c<a.from||c>a.to){let u=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),d=n.lineAt(c,St.ByPos,r,0,0),h;t.y=="center"?h=(d.top+d.bottom)/2-u/2:t.y=="start"||t.y=="nearest"&&c<a.from?h=d.top:h=d.bottom-u,a=new Ol(n.lineAt(h-1e3/2,St.ByHeight,r,0,0).from,n.lineAt(h+u+1e3/2,St.ByHeight,r,0,0).to)}}return a}mapViewport(e,t){let i=t.mapPos(e.from,-1),n=t.mapPos(e.to,1);return new Ol(this.heightMap.lineAt(i,St.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(n,St.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){if(!this.inView)return!0;let{top:n}=this.heightMap.lineAt(e,St.ByPos,this.heightOracle,0,0),{bottom:r}=this.heightMap.lineAt(t,St.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:l}=this;return(e==0||n<=o-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||r>=l+Math.max(10,Math.min(i,250)))&&n>o-2*1e3&&r<l+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let n of e)t.touchesRange(n.from,n.to)||i.push(new Wu(t.mapPos(n.from),t.mapPos(n.to),n.size,n.displaySize));return i}ensureLineGaps(e,t){let i=this.heightOracle.lineWrapping,n=i?1e4:2e3,r=n>>1,o=n<<1;if(this.defaultTextDirection!=Ct.LTR&&!i)return[];let l=[],a=(u,d,h,p)=>{if(d-u<r)return;let g=this.state.selection.main,k=[g.from];g.empty||k.push(g.to);for(let x of k)if(x>u&&x<d){a(u,x-10,h,p),a(x+10,d,h,p);return}let m=w5(e,x=>x.from>=h.from&&x.to<=h.to&&Math.abs(x.from-u)<r&&Math.abs(x.to-d)<r&&!k.some(V=>x.from<V&&x.to>V));if(!m){if(d<h.to&&t&&i&&t.visibleRanges.some(I=>I.from<=d&&I.to>=d)){let I=t.moveToLineBoundary(fe.cursor(d),!1,!0).head;I>u&&(d=I)}let x=this.gapSize(h,u,d,p),V=i||x<2e6?x:2e6;m=new Wu(u,d,x,V)}l.push(m)},c=u=>{if(u.length<o||u.type!=gs.Text)return;let d=x5(u.from,u.to,this.stateDeco);if(d.total<o)return;let h=this.scrollTarget?this.scrollTarget.range.head:null,p,g;if(i){let k=n/this.heightOracle.lineLength*this.heightOracle.lineHeight,m,x;if(h!=null){let V=Pl(d,h),I=((this.visibleBottom-this.visibleTop)/2+k)/u.height;m=V-I,x=V+I}else m=(this.visibleTop-u.top-k)/u.height,x=(this.visibleBottom-u.top+k)/u.height;p=jl(d,m),g=jl(d,x)}else{let k=d.total*this.heightOracle.charWidth,m=n*this.heightOracle.charWidth,x=0;if(k>2e6)for(let P of e)P.from>=u.from&&P.from<u.to&&P.size!=P.displaySize&&P.from*this.heightOracle.charWidth+x<this.pixelViewport.left&&(x=P.size-P.displaySize);let V=this.pixelViewport.left+x,I=this.pixelViewport.right+x,U,N;if(h!=null){let P=Pl(d,h),S=((I-V)/2+m)/k;U=P-S,N=P+S}else U=(V-m)/k,N=(I+m)/k;p=jl(d,U),g=jl(d,N)}p>u.from&&a(u.from,p,u,d),g<u.to&&a(g,u.to,u,d)};for(let u of this.viewportLines)Array.isArray(u.type)?u.type.forEach(c):c(u);return l}gapSize(e,t,i,n){let r=Pl(n,i)-Pl(n,t);return this.heightOracle.lineWrapping?e.height*r:n.total*this.heightOracle.charWidth*r}updateLineGaps(e){Wu.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Fe.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let i=[];st.spans(t,this.viewport.from,this.viewport.to,{span(r,o){i.push({from:r,to:o})},point(){}},20);let n=0;if(i.length!=this.visibleRanges.length)n=12;else for(let r=0;r<i.length&&!(n&8);r++){let o=this.visibleRanges[r],l=i[r];(o.from!=l.from||o.to!=l.to)&&(n|=4,e&&e.mapPos(o.from,-1)==l.from&&e.mapPos(o.to,1)==l.to||(n|=8))}return this.visibleRanges=i,n}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||Xr(this.heightMap.lineAt(e,St.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||Xr(this.heightMap.lineAt(this.scaler.fromDOM(e),St.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return Xr(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Ol{constructor(e,t){this.from=e,this.to=t}}function x5(s,e,t){let i=[],n=s,r=0;return st.spans(t,s,e,{span(){},point(o,l){o>n&&(i.push({from:n,to:o}),r+=o-n),n=l}},20),n<e&&(i.push({from:n,to:e}),r+=e-n),{total:r,ranges:i}}function jl({total:s,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let i=Math.floor(s*t);for(let n=0;;n++){let{from:r,to:o}=e[n],l=o-r;if(i<=l)return r+i;i-=l}}function Pl(s,e){let t=0;for(let{from:i,to:n}of s.ranges){if(e<=n){t+=e-i;break}t+=n-i}return t/s.total}function w5(s,e){for(let t of s)if(e(t))return t}const qp={toDOM(s){return s},fromDOM(s){return s},scale:1,eq(s){return s==this}};class uf{constructor(e,t,i){let n=0,r=0,o=0;this.viewports=i.map(({from:l,to:a})=>{let c=t.lineAt(l,St.ByPos,e,0,0).top,u=t.lineAt(a,St.ByPos,e,0,0).bottom;return n+=u-c,{from:l,to:a,top:c,bottom:u,domTop:0,domBottom:0}}),this.scale=(7e6-n)/(t.height-n);for(let l of this.viewports)l.domTop=o+(l.top-r)*this.scale,o=l.domBottom=l.domTop+(l.bottom-l.top),r=l.bottom}toDOM(e){for(let t=0,i=0,n=0;;t++){let r=t<this.viewports.length?this.viewports[t]:null;if(!r||e<r.top)return n+(e-i)*this.scale;if(e<=r.bottom)return r.domTop+(e-r.top);i=r.bottom,n=r.domBottom}}fromDOM(e){for(let t=0,i=0,n=0;;t++){let r=t<this.viewports.length?this.viewports[t]:null;if(!r||e<r.domTop)return i+(e-n)/this.scale;if(e<=r.domBottom)return r.top+(e-r.domTop);i=r.bottom,n=r.domBottom}}eq(e){return e instanceof uf?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,i)=>t.from==e.viewports[i].from&&t.to==e.viewports[i].to):!1}}function Xr(s,e){if(e.scale==1)return s;let t=e.toDOM(s.top),i=e.toDOM(s.bottom);return new mi(s.from,s.length,t,i-t,Array.isArray(s._content)?s._content.map(n=>Xr(n,e)):s._content)}const $l=Oe.define({combine:s=>s.join(" ")}),od=Oe.define({combine:s=>s.indexOf(!0)>-1}),ld=ln.newName(),Uv=ln.newName(),Hv=ln.newName(),Wv={"&light":"."+Uv,"&dark":"."+Hv};function ad(s,e,t){return new ln(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,n=>{if(n=="&")return s;if(!t||!t[n])throw new RangeError(`Unsupported selector: ${n}`);return t[n]}):s+" "+i}})}const S5=ad("."+ld,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Wv),C5={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},qu=De.ie&&De.ie_version<=11;class _5{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new l4,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let i of t)this.queue.push(i);(De.ie&&De.ie_version<=11||De.ios&&e.composing)&&t.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&De.android&&e.constructor.EDIT_CONTEXT!==!1&&!(De.chrome&&De.chrome_version<126)&&(this.editContext=new M5(e),e.state.facet(Pi)&&(e.contentDOM.editContext=this.editContext.editContext)),qu&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,i)=>t!=e[i]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,n=this.selectionRange;if(i.state.facet(Pi)?i.root.activeElement!=this.dom:!ea(this.dom,n))return;let r=n.anchorNode&&i.docView.nearest(n.anchorNode);if(r&&r.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(De.ie&&De.ie_version<=11||De.android&&De.chrome)&&!i.state.selection.main.empty&&n.focusNode&&fo(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=To(e.root);if(!t)return!1;let i=De.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&A5(this.view,t)||t;if(!i||this.selectionRange.eq(i))return!1;let n=ea(this.dom,i);return n&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&u4(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),n&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(i.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=t)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,C5),qu&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),qu&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var i;if(!this.delayedAndroidKey){let n=()=>{let r=this.delayedAndroidKey;r&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=r.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&r.force&&cr(this.dom,r.key,r.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(n)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,i=-1,n=!1;for(let r of e){let o=this.readMutation(r);o&&(o.typeOver&&(n=!0),t==-1?{from:t,to:i}=o:(t=Math.min(o.from,t),i=Math.max(o.to,i)))}return{from:t,to:i,typeOver:n}}readChange(){let{from:e,to:t,typeOver:i}=this.processRecords(),n=this.selectionChanged&&ea(this.dom,this.selectionRange);if(e<0&&!n)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let r=new H4(this.view,e,t,i);return this.view.docView.domChanged={newSel:r.newSel?r.newSel.main:null},r}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let i=this.view.state,n=jv(this.view,t);return this.view.state==i&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),n}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let i=Kp(t,e.previousSibling||e.target.previousSibling,-1),n=Kp(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:n?t.posBefore(n):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Pi)!=e.state.facet(Pi)&&(e.view.contentDOM.editContext=e.state.facet(Pi)?this.editContext.editContext:null))}destroy(){var e,t,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function Kp(s,e,t){for(;e;){let i=ft.get(e);if(i&&i.parent==s)return i;let n=e.parentNode;e=n!=s.dom?n:t>0?e.nextSibling:e.previousSibling}return null}function Gp(s,e){let t=e.startContainer,i=e.startOffset,n=e.endContainer,r=e.endOffset,o=s.docView.domAtPos(s.state.selection.main.anchor);return fo(o.node,o.offset,n,r)&&([t,i,n,r]=[n,r,t,i]),{anchorNode:t,anchorOffset:i,focusNode:n,focusOffset:r}}function A5(s,e){if(e.getComposedRanges){let n=e.getComposedRanges(s.root)[0];if(n)return Gp(s,n)}let t=null;function i(n){n.preventDefault(),n.stopImmediatePropagation(),t=n.getTargetRanges()[0]}return s.contentDOM.addEventListener("beforeinput",i,!0),s.dom.ownerDocument.execCommand("indent"),s.contentDOM.removeEventListener("beforeinput",i,!0),t?Gp(s,t):null}class M5{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let n=e.state.selection.main,{anchor:r,head:o}=n,l=this.toEditorPos(i.updateRangeStart),a=this.toEditorPos(i.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:l,drifted:!1});let c=a-l>i.text.length;l==this.from&&r<this.from?l=r:a==this.to&&r>this.to&&(a=r);let u=Pv(e.state.sliceDoc(l,a),i.text,(c?n.from:n.to)-l,c?"end":null);if(!u){let h=fe.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd));h.main.eq(n)||e.dispatch({selection:h,userEvent:"select"});return}let d={from:u.from+l,to:u.toA+l,insert:it.of(i.text.slice(u.from,u.toB).split(`
`))};if((De.mac||De.android)&&d.from==o-1&&/^\. ?$/.test(i.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(d={from:l,to:a,insert:it.of([i.text.replace("."," ")])}),this.pendingContextChange=d,!e.state.readOnly){let h=this.to-this.from+(d.to-d.from+d.insert.length);lf(e,d,fe.single(this.toEditorPos(i.selectionStart,h),this.toEditorPos(i.selectionEnd,h)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),d.from<d.to&&!d.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(t.text.slice(Math.max(0,i.updateRangeStart-1),Math.min(t.text.length,i.updateRangeStart+1)))&&this.handlers.compositionend(i)},this.handlers.characterboundsupdate=i=>{let n=[],r=null;for(let o=this.toEditorPos(i.rangeStart),l=this.toEditorPos(i.rangeEnd);o<l;o++){let a=e.coordsForChar(o);r=a&&new DOMRect(a.left,a.top,a.right-a.left,a.bottom-a.top)||r||new DOMRect,n.push(r)}t.updateCharacterBounds(i.rangeStart,n)},this.handlers.textformatupdate=i=>{let n=[];for(let r of i.getTextFormats()){let o=r.underlineStyle,l=r.underlineThickness;if(!/none/i.test(o)&&!/none/i.test(l)){let a=this.toEditorPos(r.rangeStart),c=this.toEditorPos(r.rangeEnd);if(a<c){let u=`text-decoration: underline ${/^[a-z]/.test(o)?o+" ":o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${/thin/i.test(l)?1:2}px`;n.push(Fe.mark({attributes:{style:u}}).range(a,c))}}}e.dispatch({effects:Sv.of(Fe.set(n))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:i}=this.composing;this.composing=null,i&&this.reset(e.state)}};for(let i in this.handlers)t.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let n=To(i.root);n&&n.rangeCount&&this.editContext.updateSelectionBounds(n.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,i=!1,n=this.pendingContextChange;return e.changes.iterChanges((r,o,l,a,c)=>{if(i)return;let u=c.length-(o-r);if(n&&o>=n.to)if(n.from==r&&n.to==o&&n.insert.eq(c)){n=this.pendingContextChange=null,t+=u,this.to+=u;return}else n=null,this.revertPending(e.state);if(r+=t,o+=t,o<=this.from)this.from+=u,this.to+=u;else if(r<this.to){if(r<this.from||o>this.to||this.to-this.from+c.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(r),this.toContextPos(o),c.toString()),this.to+=u}t+=u}),n&&!i&&this.revertPending(e.state),!i}update(e){let t=this.pendingContextChange,i=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(i.from,i.to)&&e.transactions.some(n=>!n.isUserEvent("input.type")&&n.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),n=this.toContextPos(t.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=n)&&this.editContext.updateSelection(i,n)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let i=this.composing;return i&&i.drifted?i.editorBase+(e-i.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class Te{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(n=>n.forEach(r=>i(r,this)))||(n=>this.update(n)),this.dispatch=this.dispatch.bind(this),this._root=e.root||a4(e.parent)||document,this.viewState=new Wp(e.state||tt.create(e)),e.scrollTo&&e.scrollTo.is(Dl)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Xn).map(n=>new zu(n));for(let n of this.plugins)n.update(this);this.observer=new _5(this),this.inputState=new G4(this),this.inputState.ensureHandlers(this.plugins),this.docView=new Ap(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=e.length==1&&e[0]instanceof Bt?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,i=!1,n,r=this.state;for(let h of e){if(h.startState!=r)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");r=h.state}if(this.destroyed){this.viewState.state=r;return}let o=this.hasFocus,l=0,a=null;e.some(h=>h.annotation(Iv))?(this.inputState.notifiedFocused=o,l=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,a=Nv(r,o),a||(l=1));let c=this.observer.delayedAndroidKey,u=null;if(c?(this.observer.clearDelayedAndroidKey(),u=this.observer.readChange(),(u&&!this.state.doc.eq(r.doc)||!this.state.selection.eq(r.selection))&&(u=null)):this.observer.clear(),r.facet(tt.phrases)!=this.state.facet(tt.phrases))return this.setState(r);n=Ca.create(this,r,e),n.flags|=l;let d=this.viewState.scrollTarget;try{this.updateState=2;for(let h of e){if(d&&(d=d.map(h.changes)),h.scrollIntoView){let{main:p}=h.state.selection;d=new dr(p.empty?p:fe.cursor(p.head,p.head>p.anchor?-1:1))}for(let p of h.effects)p.is(Dl)&&(d=p.value.clip(this.state))}this.viewState.update(n,d),this.bidiCache=Aa.update(this.bidiCache,n.changes),n.empty||(this.updatePlugins(n),this.inputState.update(n)),t=this.docView.update(n),this.state.facet(Yr)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(h=>h.isUserEvent("select.pointer")))}finally{this.updateState=0}if(n.startState.facet($l)!=n.state.facet($l)&&(this.viewState.mustMeasureContent=!0),(t||i||d||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!n.empty)for(let h of this.state.facet(sd))try{h(n)}catch(p){Ss(this.state,p,"update listener")}(a||u)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),u&&!jv(this,u)&&c.force&&cr(this.contentDOM,c.key,c.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new Wp(e),this.plugins=e.facet(Xn).map(i=>new zu(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new Ap(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(Xn),i=e.state.facet(Xn);if(t!=i){let n=[];for(let r of i){let o=t.indexOf(r);if(o<0)n.push(new zu(r));else{let l=this.plugins[o];l.mustUpdate=e,n.push(l)}}for(let r of this.plugins)r.mustUpdate!=e&&r.destroy(this);this.plugins=n,this.pluginMap.clear()}else for(let n of this.plugins)n.mustUpdate=e;for(let n=0;n<this.plugins.length;n++)this.plugins[n].update(this);t!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(i){Ss(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,i=this.scrollDOM,n=i.scrollTop*this.scaleY,{scrollAnchorPos:r,scrollAnchorHeight:o}=this.viewState;Math.abs(n-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let l=0;;l++){if(o<0)if(Z0(i))r=-1,o=this.viewState.heightMap.height;else{let p=this.viewState.scrollAnchorAt(n);r=p.from,o=p.top}this.updateState=1;let a=this.viewState.measure(this);if(!a&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let c=[];a&4||([this.measureRequests,c]=[c,this.measureRequests]);let u=c.map(p=>{try{return p.read(this)}catch(g){return Ss(this.state,g),Jp}}),d=Ca.create(this,this.state,[]),h=!1;d.flags|=a,t?t.flags|=a:t=d,this.updateState=2,d.empty||(this.updatePlugins(d),this.inputState.update(d),this.updateAttrs(),h=this.docView.update(d),h&&this.docViewUpdate());for(let p=0;p<c.length;p++)if(u[p]!=Jp)try{let g=c[p];g.write&&g.write(u[p],this)}catch(g){Ss(this.state,g)}if(h&&this.docView.updateSelection(!0),!d.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let g=(r<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(r).top)-o;if(g>1||g<-1){n=n+g,i.scrollTop=n/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let l of this.state.facet(sd))l(t)}get themeClasses(){return ld+" "+(this.state.facet(od)?Hv:Uv)+" "+this.state.facet($l)}updateAttrs(){let e=Yp(this,Cv,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(Pi)?"true":"false",class:"cm-content",style:`${De.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),Yp(this,rf,t);let i=this.observer.ignore(()=>{let n=Qc(this.contentDOM,this.contentAttrs,t),r=Qc(this.dom,this.editorAttrs,e);return n||r});return this.editorAttrs=e,this.contentAttrs=t,i}showAnnouncements(e){let t=!0;for(let i of e)for(let n of i.effects)if(n.is(Te.announce)){t&&(this.announceDOM.textContent=""),t=!1;let r=this.announceDOM.appendChild(document.createElement("div"));r.textContent=n.value}}mountStyles(){this.styleModules=this.state.facet(Yr);let e=this.state.facet(Te.cspNonce);ln.mount(this.root,this.styleModules.concat(S5).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.plugin!=e)&&this.pluginMap.set(e,t=this.plugins.find(i=>i.plugin==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return Hu(this,e,Op(this,e,t,i))}moveByGroup(e,t){return Hu(this,e,Op(this,e,t,i=>I4(this,e.head,i)))}visualLineSide(e,t){let i=this.bidiSpans(e),n=this.textDirectionAt(e.from),r=i[t?i.length-1:0];return fe.cursor(r.side(t,n)+e.from,r.forward(!t,n)?1:-1)}moveToLineBoundary(e,t,i=!0){return B4(this,e,t,i)}moveVertically(e,t,i){return Hu(this,e,N4(this,e,t,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),Ev(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let n=this.state.doc.lineAt(e),r=this.bidiSpans(n),o=r[Zi.find(r,e-n.from,-1,t)];return uu(i,o.dir==Ct.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(kv)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>D5)return fv(e.length);let t=this.textDirectionAt(e.from),i;for(let r of this.bidiCache)if(r.from==e.from&&r.dir==t&&(r.fresh||dv(r.isolates,i=_p(this,e))))return r.order;i||(i=_p(this,e));let n=w4(e.text,t,i);return this.bidiCache.push(new Aa(e.from,e.to,t,i,!0,n)),n}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||De.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{Q0(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return Dl.of(new dr(typeof e=="number"?fe.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return Dl.of(new dr(fe.cursor(i.from),"start","start",i.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return $t.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return $t.define(()=>({}),{eventObservers:e})}static theme(e,t){let i=ln.newName(),n=[$l.of(i),Yr.of(ad(`.${i}`,e))];return t&&t.dark&&n.push(od.of(!0)),n}static baseTheme(e){return Hn.lowest(Yr.of(ad("."+ld,e,Wv)))}static findFromDOM(e){var t;let i=e.querySelector(".cm-content"),n=i&&ft.get(i)||ft.get(e);return((t=n?.rootView)===null||t===void 0?void 0:t.view)||null}}Te.styleModule=Yr;Te.inputHandler=yv;Te.clipboardInputFilter=sf;Te.clipboardOutputFilter=nf;Te.scrollHandler=wv;Te.focusChangeEffect=bv;Te.perLineTextDirection=kv;Te.exceptionSink=vv;Te.updateListener=sd;Te.editable=Pi;Te.mouseSelectionStyle=gv;Te.dragMovesSelection=mv;Te.clickAddsSelectionRange=pv;Te.decorations=jo;Te.outerDecorations=_v;Te.atomicRanges=Qo;Te.bidiIsolatedRanges=Av;Te.scrollMargins=Mv;Te.darkTheme=od;Te.cspNonce=Oe.define({combine:s=>s.length?s[0]:""});Te.contentAttributes=rf;Te.editorAttributes=Cv;Te.lineWrapping=Te.contentAttributes.of({class:"cm-lineWrapping"});Te.announce=Ye.define();const D5=4096,Jp={};class Aa{constructor(e,t,i,n,r,o){this.from=e,this.to=t,this.dir=i,this.isolates=n,this.fresh=r,this.order=o}static update(e,t){if(t.empty&&!e.some(r=>r.fresh))return e;let i=[],n=e.length?e[e.length-1].dir:Ct.LTR;for(let r=Math.max(0,e.length-10);r<e.length;r++){let o=e[r];o.dir==n&&!t.touchesRange(o.from,o.to)&&i.push(new Aa(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return i}}function Yp(s,e,t){for(let i=s.state.facet(e),n=i.length-1;n>=0;n--){let r=i[n],o=typeof r=="function"?r(s):r;o&&Yc(o,t)}return t}const E5=De.mac?"mac":De.windows?"win":De.linux?"linux":"key";function T5(s,e){const t=s.split(/-(?!$)/);let i=t[t.length-1];i=="Space"&&(i=" ");let n,r,o,l;for(let a=0;a<t.length-1;++a){const c=t[a];if(/^(cmd|meta|m)$/i.test(c))l=!0;else if(/^a(lt)?$/i.test(c))n=!0;else if(/^(c|ctrl|control)$/i.test(c))r=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))e=="mac"?l=!0:r=!0;else throw new Error("Unrecognized modifier name: "+c)}return n&&(i="Alt-"+i),r&&(i="Ctrl-"+i),l&&(i="Meta-"+i),o&&(i="Shift-"+i),i}function Rl(s,e,t){return e.altKey&&(s="Alt-"+s),e.ctrlKey&&(s="Ctrl-"+s),e.metaKey&&(s="Meta-"+s),t!==!1&&e.shiftKey&&(s="Shift-"+s),s}const O5=Hn.default(Te.domEventHandlers({keydown(s,e){return Kv(qv(e.state),s,e,"editor")}})),cf=Oe.define({enables:O5}),Qp=new WeakMap;function qv(s){let e=s.facet(cf),t=Qp.get(e);return t||Qp.set(e,t=$5(e.reduce((i,n)=>i.concat(n),[]))),t}function j5(s,e,t){return Kv(qv(s.state),e,s,t)}let Ji=null;const P5=4e3;function $5(s,e=E5){let t=Object.create(null),i=Object.create(null),n=(o,l)=>{let a=i[o];if(a==null)i[o]=l;else if(a!=l)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},r=(o,l,a,c,u)=>{var d,h;let p=t[o]||(t[o]=Object.create(null)),g=l.split(/ (?!$)/).map(x=>T5(x,e));for(let x=1;x<g.length;x++){let V=g.slice(0,x).join(" ");n(V,!0),p[V]||(p[V]={preventDefault:!0,stopPropagation:!1,run:[I=>{let U=Ji={view:I,prefix:V,scope:o};return setTimeout(()=>{Ji==U&&(Ji=null)},P5),!0}]})}let k=g.join(" ");n(k,!1);let m=p[k]||(p[k]={preventDefault:!1,stopPropagation:!1,run:((h=(d=p._any)===null||d===void 0?void 0:d.run)===null||h===void 0?void 0:h.slice())||[]});a&&m.run.push(a),c&&(m.preventDefault=!0),u&&(m.stopPropagation=!0)};for(let o of s){let l=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let c of l){let u=t[c]||(t[c]=Object.create(null));u._any||(u._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:d}=o;for(let h in u)u[h].run.push(p=>d(p,ud))}let a=o[e]||o.key;if(a)for(let c of l)r(c,a,o.run,o.preventDefault,o.stopPropagation),o.shift&&r(c,"Shift-"+a,o.shift,o.preventDefault,o.stopPropagation)}return t}let ud=null;function Kv(s,e,t,i){ud=e;let n=s4(e),r=xs(n,0),o=pi(r)==n.length&&n!=" ",l="",a=!1,c=!1,u=!1;Ji&&Ji.view==t&&Ji.scope==i&&(l=Ji.prefix+" ",Rv.indexOf(e.keyCode)<0&&(c=!0,Ji=null));let d=new Set,h=m=>{if(m){for(let x of m.run)if(!d.has(x)&&(d.add(x),x(t)))return m.stopPropagation&&(u=!0),!0;m.preventDefault&&(m.stopPropagation&&(u=!0),c=!0)}return!1},p=s[i],g,k;return p&&(h(p[l+Rl(n,e,!o)])?a=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(De.windows&&e.ctrlKey&&e.altKey)&&!(De.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(g=an[e.keyCode])&&g!=n?(h(p[l+Rl(g,e,!0)])||e.shiftKey&&(k=Eo[e.keyCode])!=n&&k!=g&&h(p[l+Rl(k,e,!1)]))&&(a=!0):o&&e.shiftKey&&h(p[l+Rl(n,e,!0)])&&(a=!0),!a&&h(p._any)&&(a=!0)),c&&(a=!0),a&&u&&e.stopPropagation(),ud=null,a}class Xo{constructor(e,t,i,n,r){this.className=e,this.left=t,this.top=i,this.width=n,this.height=r}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,i){if(i.empty){let n=e.coordsAtPos(i.head,i.assoc||1);if(!n)return[];let r=Gv(e);return[new Xo(t,n.left-r.left,n.top-r.top,null,n.bottom-n.top)]}else return R5(e,t,i)}}function Gv(s){let e=s.scrollDOM.getBoundingClientRect();return{left:(s.textDirection==Ct.LTR?e.left:e.right-s.scrollDOM.clientWidth*s.scaleX)-s.scrollDOM.scrollLeft*s.scaleX,top:e.top-s.scrollDOM.scrollTop*s.scaleY}}function Xp(s,e,t,i){let n=s.coordsAtPos(e,t*2);if(!n)return i;let r=s.dom.getBoundingClientRect(),o=(n.top+n.bottom)/2,l=s.posAtCoords({x:r.left+1,y:o}),a=s.posAtCoords({x:r.right-1,y:o});return l==null||a==null?i:{from:Math.max(i.from,Math.min(l,a)),to:Math.min(i.to,Math.max(l,a))}}function R5(s,e,t){if(t.to<=s.viewport.from||t.from>=s.viewport.to)return[];let i=Math.max(t.from,s.viewport.from),n=Math.min(t.to,s.viewport.to),r=s.textDirection==Ct.LTR,o=s.contentDOM,l=o.getBoundingClientRect(),a=Gv(s),c=o.querySelector(".cm-line"),u=c&&window.getComputedStyle(c),d=l.left+(u?parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)):0),h=l.right-(u?parseInt(u.paddingRight):0),p=nd(s,i,1),g=nd(s,n,-1),k=p.type==gs.Text?p:null,m=g.type==gs.Text?g:null;if(k&&(s.lineWrapping||p.widgetLineBreaks)&&(k=Xp(s,i,1,k)),m&&(s.lineWrapping||g.widgetLineBreaks)&&(m=Xp(s,n,-1,m)),k&&m&&k.from==m.from&&k.to==m.to)return V(I(t.from,t.to,k));{let N=k?I(t.from,null,k):U(p,!1),P=m?I(null,t.to,m):U(g,!0),S=[];return(k||p).to<(m||g).from-(k&&m?1:0)||p.widgetLineBreaks>1&&N.bottom+s.defaultLineHeight/2<P.top?S.push(x(d,N.bottom,h,P.top)):N.bottom<P.top&&s.elementAtHeight((N.bottom+P.top)/2).type==gs.Text&&(N.bottom=P.top=(N.bottom+P.top)/2),V(N).concat(S).concat(V(P))}function x(N,P,S,j){return new Xo(e,N-a.left,P-a.top,S-N,j-P)}function V({top:N,bottom:P,horizontal:S}){let j=[];for(let H=0;H<S.length;H+=2)j.push(x(S[H],N,S[H+1],P));return j}function I(N,P,S){let j=1e9,H=-1e9,ue=[];function X(te,$,K,J,ce){let ye=s.coordsAtPos(te,te==S.to?-2:2),Pe=s.coordsAtPos(K,K==S.from?2:-2);!ye||!Pe||(j=Math.min(ye.top,Pe.top,j),H=Math.max(ye.bottom,Pe.bottom,H),ce==Ct.LTR?ue.push(r&&$?d:ye.left,r&&J?h:Pe.right):ue.push(!r&&J?d:Pe.left,!r&&$?h:ye.right))}let B=N??S.from,ae=P??S.to;for(let te of s.visibleRanges)if(te.to>B&&te.from<ae)for(let $=Math.max(te.from,B),K=Math.min(te.to,ae);;){let J=s.state.doc.lineAt($);for(let ce of s.bidiSpans(J)){let ye=ce.from+J.from,Pe=ce.to+J.from;if(ye>=K)break;Pe>$&&X(Math.max(ye,$),N==null&&ye<=B,Math.min(Pe,K),P==null&&Pe>=ae,ce.dir)}if($=J.to+1,$>=K)break}return ue.length==0&&X(B,N==null,ae,P==null,s.textDirection),{top:j,bottom:H,horizontal:ue}}function U(N,P){let S=l.top+(P?N.top:N.bottom);return{top:S,bottom:S,horizontal:[]}}}function L5(s,e){return s.constructor==e.constructor&&s.eq(e)}class V5{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(ia)!=e.state.facet(ia)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,i=e.facet(ia);for(;t<i.length&&i[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,i)=>!L5(t,this.drawn[i]))){let t=this.dom.firstChild,i=0;for(let n of e)n.update&&t&&n.constructor&&this.drawn[i].constructor&&n.update(t,this.drawn[i])?(t=t.nextSibling,i++):this.dom.insertBefore(n.draw(),t);for(;t;){let n=t.nextSibling;t.remove(),t=n}this.drawn=e,De.safari&&De.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const ia=Oe.define();function Jv(s){return[$t.define(e=>new V5(e,s)),ia.of(s)]}const Po=Oe.define({combine(s){return xi(s,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function B5(s={}){return[Po.of(s),I5,N5,F5,xv.of(!0)]}function Yv(s){return s.startState.facet(Po)!=s.state.facet(Po)}const I5=Jv({above:!0,markers(s){let{state:e}=s,t=e.facet(Po),i=[];for(let n of e.selection.ranges){let r=n==e.selection.main;if(n.empty||t.drawRangeCursor){let o=r?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",l=n.empty?n:fe.cursor(n.head,n.head>n.anchor?-1:1);for(let a of Xo.forRange(s,o,l))i.push(a)}}return i},update(s,e){s.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=Yv(s);return t&&Zp(s.state,e),s.docChanged||s.selectionSet||t},mount(s,e){Zp(e.state,s)},class:"cm-cursorLayer"});function Zp(s,e){e.style.animationDuration=s.facet(Po).cursorBlinkRate+"ms"}const N5=Jv({above:!1,markers(s){return s.state.selection.ranges.map(e=>e.empty?[]:Xo.forRange(s,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(s,e){return s.docChanged||s.selectionSet||s.viewportChanged||Yv(s)},class:"cm-selectionLayer"}),F5=Hn.highest(Te.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),Qv=Ye.define({map(s,e){return s==null?null:e.mapPos(s)}}),Zr=Yt.define({create(){return null},update(s,e){return s!=null&&(s=e.changes.mapPos(s)),e.effects.reduce((t,i)=>i.is(Qv)?i.value:t,s)}}),z5=$t.fromClass(class{constructor(s){this.view=s,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(s){var e;let t=s.state.field(Zr);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(s.startState.field(Zr)!=t||s.docChanged||s.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:s}=this,e=s.state.field(Zr),t=e!=null&&s.coordsAtPos(e);if(!t)return null;let i=s.scrollDOM.getBoundingClientRect();return{left:t.left-i.left+s.scrollDOM.scrollLeft*s.scaleX,top:t.top-i.top+s.scrollDOM.scrollTop*s.scaleY,height:t.bottom-t.top}}drawCursor(s){if(this.cursor){let{scaleX:e,scaleY:t}=this.view;s?(this.cursor.style.left=s.left/e+"px",this.cursor.style.top=s.top/t+"px",this.cursor.style.height=s.height/t+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(s){this.view.state.field(Zr)!=s&&this.view.dispatch({effects:Qv.of(s)})}},{eventObservers:{dragover(s){this.setDropPos(this.view.posAtCoords({x:s.clientX,y:s.clientY}))},dragleave(s){(s.target==this.view.contentDOM||!this.view.contentDOM.contains(s.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function U5(){return[Zr,z5]}function em(s,e,t,i,n){e.lastIndex=0;for(let r=s.iterRange(t,i),o=t,l;!r.next().done;o+=r.value.length)if(!r.lineBreak)for(;l=e.exec(r.value);)n(o+l.index,l)}function H5(s,e){let t=s.visibleRanges;if(t.length==1&&t[0].from==s.viewport.from&&t[0].to==s.viewport.to)return t;let i=[];for(let{from:n,to:r}of t)n=Math.max(s.state.doc.lineAt(n).from,n-e),r=Math.min(s.state.doc.lineAt(r).to,r+e),i.length&&i[i.length-1].to>=n?i[i.length-1].to=r:i.push({from:n,to:r});return i}class W5{constructor(e){const{regexp:t,decoration:i,decorate:n,boundary:r,maxLength:o=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,n)this.addMatch=(l,a,c,u)=>n(u,c,c+l[0].length,l,a);else if(typeof i=="function")this.addMatch=(l,a,c,u)=>{let d=i(l,a,c);d&&u(c,c+l[0].length,d)};else if(i)this.addMatch=(l,a,c,u)=>u(c,c+l[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=r,this.maxLength=o}createDeco(e){let t=new Vi,i=t.add.bind(t);for(let{from:n,to:r}of H5(e,this.maxLength))em(e.state.doc,this.regexp,n,r,(o,l)=>this.addMatch(l,e,o,i));return t.finish()}updateDeco(e,t){let i=1e9,n=-1;return e.docChanged&&e.changes.iterChanges((r,o,l,a)=>{a>=e.view.viewport.from&&l<=e.view.viewport.to&&(i=Math.min(l,i),n=Math.max(a,n))}),e.viewportMoved||n-i>1e3?this.createDeco(e.view):n>-1?this.updateRange(e.view,t.map(e.changes),i,n):t}updateRange(e,t,i,n){for(let r of e.visibleRanges){let o=Math.max(r.from,i),l=Math.min(r.to,n);if(l>=o){let a=e.state.doc.lineAt(o),c=a.to<l?e.state.doc.lineAt(l):a,u=Math.max(r.from,a.from),d=Math.min(r.to,c.to);if(this.boundary){for(;o>a.from;o--)if(this.boundary.test(a.text[o-1-a.from])){u=o;break}for(;l<c.to;l++)if(this.boundary.test(c.text[l-c.from])){d=l;break}}let h=[],p,g=(k,m,x)=>h.push(x.range(k,m));if(a==c)for(this.regexp.lastIndex=u-a.from;(p=this.regexp.exec(a.text))&&p.index<d-a.from;)this.addMatch(p,e,p.index+a.from,g);else em(e.state.doc,this.regexp,u,d,(k,m)=>this.addMatch(m,e,k,g));t=t.update({filterFrom:u,filterTo:d,filter:(k,m)=>k<u||m>d,add:h})}}return t}}const cd=/x/.unicode!=null?"gu":"g",q5=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,cd),K5={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Ku=null;function G5(){var s;if(Ku==null&&typeof document<"u"&&document.body){let e=document.body.style;Ku=((s=e.tabSize)!==null&&s!==void 0?s:e.MozTabSize)!=null}return Ku||!1}const na=Oe.define({combine(s){let e=xi(s,{render:null,specialChars:q5,addSpecialChars:null});return(e.replaceTabs=!G5())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,cd)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,cd)),e}});function J5(s={}){return[na.of(s),Y5()]}let tm=null;function Y5(){return tm||(tm=$t.fromClass(class{constructor(s){this.view=s,this.decorations=Fe.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(s.state.facet(na)),this.decorations=this.decorator.createDeco(s)}makeDecorator(s){return new W5({regexp:s.specialChars,decoration:(e,t,i)=>{let{doc:n}=t.state,r=xs(e[0],0);if(r==9){let o=n.lineAt(i),l=t.state.tabSize,a=Tr(o.text,l,i-o.from);return Fe.replace({widget:new e3((l-a%l)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[r]||(this.decorationCache[r]=Fe.replace({widget:new Z5(s,r)}))},boundary:s.replaceTabs?void 0:/[^]/})}update(s){let e=s.state.facet(na);s.startState.facet(na)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(s.view)):this.decorations=this.decorator.updateDeco(s,this.decorations)}},{decorations:s=>s.decorations}))}const Q5="";function X5(s){return s>=32?Q5:s==10?"":String.fromCharCode(9216+s)}class Z5 extends fn{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=X5(this.code),i=e.state.phrase("Control character")+" "+(K5[this.code]||"0x"+this.code.toString(16)),n=this.options.render&&this.options.render(this.code,i,t);if(n)return n;let r=document.createElement("span");return r.textContent=t,r.title=i,r.setAttribute("aria-label",i),r.className="cm-specialChar",r}ignoreEvent(){return!1}}class e3 extends fn{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function t3(){return i3}const s3=Fe.line({class:"cm-activeLine"}),i3=$t.fromClass(class{constructor(s){this.decorations=this.getDeco(s)}update(s){(s.docChanged||s.selectionSet)&&(this.decorations=this.getDeco(s.view))}getDeco(s){let e=-1,t=[];for(let i of s.state.selection.ranges){let n=s.lineBlockAt(i.head);n.from>e&&(t.push(s3.range(n.from)),e=n.from)}return Fe.set(t)}},{decorations:s=>s.decorations}),dd=2e3;function n3(s,e,t){let i=Math.min(e.line,t.line),n=Math.max(e.line,t.line),r=[];if(e.off>dd||t.off>dd||e.col<0||t.col<0){let o=Math.min(e.off,t.off),l=Math.max(e.off,t.off);for(let a=i;a<=n;a++){let c=s.doc.line(a);c.length<=l&&r.push(fe.range(c.from+o,c.to+l))}}else{let o=Math.min(e.col,t.col),l=Math.max(e.col,t.col);for(let a=i;a<=n;a++){let c=s.doc.line(a),u=zc(c.text,o,s.tabSize,!0);if(u<0)r.push(fe.cursor(c.to));else{let d=zc(c.text,l,s.tabSize);r.push(fe.range(c.from+u,c.from+d))}}}return r}function r3(s,e){let t=s.coordsAtPos(s.viewport.from);return t?Math.round(Math.abs((t.left-e)/s.defaultCharacterWidth)):-1}function sm(s,e){let t=s.posAtCoords({x:e.clientX,y:e.clientY},!1),i=s.state.doc.lineAt(t),n=t-i.from,r=n>dd?-1:n==i.length?r3(s,e.clientX):Tr(i.text,s.state.tabSize,t-i.from);return{line:i.number,col:r,off:n}}function o3(s,e){let t=sm(s,e),i=s.state.selection;return t?{update(n){if(n.docChanged){let r=n.changes.mapPos(n.startState.doc.line(t.line).from),o=n.state.doc.lineAt(r);t={line:o.number,col:t.col,off:Math.min(t.off,o.length)},i=i.map(n.changes)}},get(n,r,o){let l=sm(s,n);if(!l)return i;let a=n3(s.state,t,l);return a.length?o?fe.create(a.concat(i.ranges)):fe.create(a):i}}:null}function l3(s){let e=(t=>t.altKey&&t.button==0);return Te.mouseSelectionStyle.of((t,i)=>e(i)?o3(t,i):null)}const a3={Alt:[18,s=>!!s.altKey],Control:[17,s=>!!s.ctrlKey],Shift:[16,s=>!!s.shiftKey],Meta:[91,s=>!!s.metaKey]},u3={style:"cursor: crosshair"};function c3(s={}){let[e,t]=a3[s.key||"Alt"],i=$t.fromClass(class{constructor(n){this.view=n,this.isDown=!1}set(n){this.isDown!=n&&(this.isDown=n,this.view.update([]))}},{eventObservers:{keydown(n){this.set(n.keyCode==e||t(n))},keyup(n){(n.keyCode==e||!t(n))&&this.set(!1)},mousemove(n){this.set(t(n))}}});return[i,Te.contentAttributes.of(n=>{var r;return!((r=n.plugin(i))===null||r===void 0)&&r.isDown?u3:null})]}const Wr="-10000px";class Xv{constructor(e,t,i,n){this.facet=t,this.createTooltipView=i,this.removeTooltipView=n,this.input=e.state.facet(t),this.tooltips=this.input.filter(o=>o);let r=null;this.tooltipViews=this.tooltips.map(o=>r=i(o,r))}update(e,t){var i;let n=e.state.facet(this.facet),r=n.filter(a=>a);if(n===this.input){for(let a of this.tooltipViews)a.update&&a.update(e);return!1}let o=[],l=t?[]:null;for(let a=0;a<r.length;a++){let c=r[a],u=-1;if(c){for(let d=0;d<this.tooltips.length;d++){let h=this.tooltips[d];h&&h.create==c.create&&(u=d)}if(u<0)o[a]=this.createTooltipView(c,a?o[a-1]:null),l&&(l[a]=!!c.above);else{let d=o[a]=this.tooltipViews[u];l&&(l[a]=t[u]),d.update&&d.update(e)}}}for(let a of this.tooltipViews)o.indexOf(a)<0&&(this.removeTooltipView(a),(i=a.destroy)===null||i===void 0||i.call(a));return t&&(l.forEach((a,c)=>t[c]=a),t.length=l.length),this.input=n,this.tooltips=r,this.tooltipViews=o,!0}}function d3(s){let e=s.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const Gu=Oe.define({combine:s=>{var e,t,i;return{position:De.ios?"absolute":((e=s.find(n=>n.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=s.find(n=>n.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((i=s.find(n=>n.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||d3}}}),im=new WeakMap,df=$t.fromClass(class{constructor(s){this.view=s,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=s.state.facet(Gu);this.position=e.position,this.parent=e.parent,this.classes=s.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new Xv(s,ff,(t,i)=>this.createTooltip(t,i),t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()}),this.above=this.manager.tooltips.map(t=>!!t.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),s.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let s of this.manager.tooltipViews)this.intersectionObserver.observe(s.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(s){s.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(s,this.above);e&&this.observeIntersection();let t=e||s.geometryChanged,i=s.state.facet(Gu);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let n of this.manager.tooltipViews)n.dom.style.position=this.position;t=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let n of this.manager.tooltipViews)this.container.appendChild(n.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(s,e){let t=s.create(this.view),i=e?e.dom:null;if(t.dom.classList.add("cm-tooltip"),s.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let n=document.createElement("div");n.className="cm-tooltip-arrow",t.dom.appendChild(n)}return t.dom.style.position=this.position,t.dom.style.top=Wr,t.dom.style.left="0px",this.container.insertBefore(t.dom,i),t.mount&&t.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(t.dom),t}destroy(){var s,e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(s=i.destroy)===null||s===void 0||s.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let s=1,e=1,t=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:r}=this.manager.tooltipViews[0];if(De.gecko)t=r.offsetParent!=this.container.ownerDocument.body;else if(r.style.top==Wr&&r.style.left=="0px"){let o=r.getBoundingClientRect();t=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}}if(t||this.position=="absolute")if(this.parent){let r=this.parent.getBoundingClientRect();r.width&&r.height&&(s=r.width/this.parent.offsetWidth,e=r.height/this.parent.offsetHeight)}else({scaleX:s,scaleY:e}=this.view.viewState);let i=this.view.scrollDOM.getBoundingClientRect(),n=of(this.view);return{visible:{left:i.left+n.left,top:i.top+n.top,right:i.right-n.right,bottom:i.bottom-n.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((r,o)=>{let l=this.manager.tooltipViews[o];return l.getCoords?l.getCoords(r.pos):this.view.coordsAtPos(r.pos)}),size:this.manager.tooltipViews.map(({dom:r})=>r.getBoundingClientRect()),space:this.view.state.facet(Gu).tooltipSpace(this.view),scaleX:s,scaleY:e,makeAbsolute:t}}writeMeasure(s){var e;if(s.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let l of this.manager.tooltipViews)l.dom.style.position="absolute"}let{visible:t,space:i,scaleX:n,scaleY:r}=s,o=[];for(let l=0;l<this.manager.tooltips.length;l++){let a=this.manager.tooltips[l],c=this.manager.tooltipViews[l],{dom:u}=c,d=s.pos[l],h=s.size[l];if(!d||a.clip!==!1&&(d.bottom<=Math.max(t.top,i.top)||d.top>=Math.min(t.bottom,i.bottom)||d.right<Math.max(t.left,i.left)-.1||d.left>Math.min(t.right,i.right)+.1)){u.style.top=Wr;continue}let p=a.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,g=p?7:0,k=h.right-h.left,m=(e=im.get(c))!==null&&e!==void 0?e:h.bottom-h.top,x=c.offset||h3,V=this.view.textDirection==Ct.LTR,I=h.width>i.right-i.left?V?i.left:i.right-h.width:V?Math.max(i.left,Math.min(d.left-(p?14:0)+x.x,i.right-k)):Math.min(Math.max(i.left,d.left-k+(p?14:0)-x.x),i.right-k),U=this.above[l];!a.strictSide&&(U?d.top-m-g-x.y<i.top:d.bottom+m+g+x.y>i.bottom)&&U==i.bottom-d.bottom>d.top-i.top&&(U=this.above[l]=!U);let N=(U?d.top-i.top:i.bottom-d.bottom)-g;if(N<m&&c.resize!==!1){if(N<this.view.defaultLineHeight){u.style.top=Wr;continue}im.set(c,m),u.style.height=(m=N)/r+"px"}else u.style.height&&(u.style.height="");let P=U?d.top-m-g-x.y:d.bottom+g+x.y,S=I+k;if(c.overlap!==!0)for(let j of o)j.left<S&&j.right>I&&j.top<P+m&&j.bottom>P&&(P=U?j.top-m-2-g:j.bottom+g+2);if(this.position=="absolute"?(u.style.top=(P-s.parent.top)/r+"px",nm(u,(I-s.parent.left)/n)):(u.style.top=P/r+"px",nm(u,I/n)),p){let j=d.left+(V?x.x:-x.x)-(I+14-7);p.style.left=j/n+"px"}c.overlap!==!0&&o.push({left:I,top:P,right:S,bottom:P+m}),u.classList.toggle("cm-tooltip-above",U),u.classList.toggle("cm-tooltip-below",!U),c.positioned&&c.positioned(s.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let s of this.manager.tooltipViews)s.dom.style.top=Wr}},{eventObservers:{scroll(){this.maybeMeasure()}}});function nm(s,e){let t=parseInt(s.style.left,10);(isNaN(t)||Math.abs(e-t)>1)&&(s.style.left=e+"px")}const f3=Te.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),h3={x:0,y:0},ff=Oe.define({enables:[df,f3]}),Ma=Oe.define({combine:s=>s.reduce((e,t)=>e.concat(t),[])});class du{static create(e){return new du(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new Xv(e,Ma,(t,i)=>this.createHostedView(t,i),t=>t.dom.remove())}createHostedView(e,t){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}passProp(e){let t;for(let i of this.manager.tooltipViews){let n=i[e];if(n!==void 0){if(t===void 0)t=n;else if(t!==n)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const p3=ff.compute([Ma],s=>{let e=s.facet(Ma);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.map(t=>{var i;return(i=t.end)!==null&&i!==void 0?i:t.pos})),create:du.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class m3{constructor(e,t,i,n,r){this.view=e,this.source=t,this.field=i,this.setHover=n,this.hoverTime=r,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,i=e.docView.nearest(t.target);if(!i)return;let n,r=1;if(i instanceof Xi)n=i.posAtStart;else{if(n=e.posAtCoords(t),n==null)return;let l=e.coordsAtPos(n);if(!l||t.y<l.top||t.y>l.bottom||t.x<l.left-e.defaultCharacterWidth||t.x>l.right+e.defaultCharacterWidth)return;let a=e.bidiSpans(e.state.doc.lineAt(n)).find(u=>u.from<=n&&u.to>=n),c=a&&a.dir==Ct.RTL?-1:1;r=t.x<l.left?-c:c}let o=this.source(e,n,r);if(o?.then){let l=this.pending={pos:n};o.then(a=>{this.pending==l&&(this.pending=null,a&&!(Array.isArray(a)&&!a.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(a)?a:[a])}))},a=>Ss(e.state,a,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(df),t=e?e.manager.tooltips.findIndex(i=>i.create==du.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:n,tooltip:r}=this;if(n.length&&r&&!g3(r.dom,e)||this.pending){let{pos:o}=n[0]||this.pending,l=(i=(t=n[0])===null||t===void 0?void 0:t.end)!==null&&i!==void 0?i:o;(o==l?this.view.posAtCoords(this.lastMove)!=o:!v3(this.view,o,l,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=i=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const Ll=4;function g3(s,e){let{left:t,right:i,top:n,bottom:r}=s.getBoundingClientRect(),o;if(o=s.querySelector(".cm-tooltip-arrow")){let l=o.getBoundingClientRect();n=Math.min(l.top,n),r=Math.max(l.bottom,r)}return e.clientX>=t-Ll&&e.clientX<=i+Ll&&e.clientY>=n-Ll&&e.clientY<=r+Ll}function v3(s,e,t,i,n,r){let o=s.scrollDOM.getBoundingClientRect(),l=s.documentTop+s.documentPadding.top+s.contentHeight;if(o.left>i||o.right<i||o.top>n||Math.min(o.bottom,l)<n)return!1;let a=s.posAtCoords({x:i,y:n},!1);return a>=e&&a<=t}function y3(s,e={}){let t=Ye.define(),i=Yt.define({create(){return[]},update(n,r){if(n.length&&(e.hideOnChange&&(r.docChanged||r.selection)?n=[]:e.hideOn&&(n=n.filter(o=>!e.hideOn(r,o))),r.docChanged)){let o=[];for(let l of n){let a=r.changes.mapPos(l.pos,-1,ms.TrackDel);if(a!=null){let c=Object.assign(Object.create(null),l);c.pos=a,c.end!=null&&(c.end=r.changes.mapPos(c.end)),o.push(c)}}n=o}for(let o of r.effects)o.is(t)&&(n=o.value),o.is(b3)&&(n=[]);return n},provide:n=>Ma.from(n)});return{active:i,extension:[i,$t.define(n=>new m3(n,s,i,t,e.hoverTime||300)),p3]}}function Zv(s,e){let t=s.plugin(df);if(!t)return null;let i=t.manager.tooltips.indexOf(e);return i<0?null:t.manager.tooltipViews[i]}const b3=Ye.define(),rm=Oe.define({combine(s){let e,t;for(let i of s)e=e||i.topContainer,t=t||i.bottomContainer;return{topContainer:e,bottomContainer:t}}});function $o(s,e){let t=s.plugin(ey),i=t?t.specs.indexOf(e):-1;return i>-1?t.panels[i]:null}const ey=$t.fromClass(class{constructor(s){this.input=s.state.facet(Ro),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(s));let e=s.state.facet(rm);this.top=new Vl(s,!0,e.topContainer),this.bottom=new Vl(s,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(s){let e=s.state.facet(rm);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Vl(s.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Vl(s.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=s.state.facet(Ro);if(t!=this.input){let i=t.filter(a=>a),n=[],r=[],o=[],l=[];for(let a of i){let c=this.specs.indexOf(a),u;c<0?(u=a(s.view),l.push(u)):(u=this.panels[c],u.update&&u.update(s)),n.push(u),(u.top?r:o).push(u)}this.specs=i,this.panels=n,this.top.sync(r),this.bottom.sync(o);for(let a of l)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}else for(let i of this.panels)i.update&&i.update(s)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:s=>Te.scrollMargins.of(e=>{let t=e.plugin(s);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class Vl{constructor(e,t,i){this.view=e,this.top=t,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=om(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=om(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function om(s){let e=s.nextSibling;return s.remove(),e}const Ro=Oe.define({enables:ey});class Ii extends Vn{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Ii.prototype.elementClass="";Ii.prototype.toDOM=void 0;Ii.prototype.mapMode=ms.TrackBefore;Ii.prototype.startSide=Ii.prototype.endSide=-1;Ii.prototype.point=!0;const ra=Oe.define(),k3=Oe.define(),x3={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>st.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},mo=Oe.define();function w3(s){return[ty(),mo.of({...x3,...s})]}const lm=Oe.define({combine:s=>s.some(e=>e)});function ty(s){return[S3]}const S3=$t.fromClass(class{constructor(s){this.view=s,this.domAfter=null,this.prevViewport=s.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=s.state.facet(mo).map(e=>new um(s,e)),this.fixed=!s.state.facet(lm);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),s.scrollDOM.insertBefore(this.dom,s.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(s){if(this.updateGutters(s)){let e=this.prevViewport,t=s.view.viewport,i=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(i<(t.to-t.from)*.8)}if(s.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(lm)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=s.view.viewport}syncGutters(s){let e=this.dom.nextSibling;s&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let t=st.iter(this.view.state.facet(ra),this.view.viewport.from),i=[],n=this.gutters.map(r=>new C3(r,this.view.viewport,-this.view.documentPadding.top));for(let r of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(r.type)){let o=!0;for(let l of r.type)if(l.type==gs.Text&&o){fd(t,i,l.from);for(let a of n)a.line(this.view,l,i);o=!1}else if(l.widget)for(let a of n)a.widget(this.view,l)}else if(r.type==gs.Text){fd(t,i,r.from);for(let o of n)o.line(this.view,r,i)}else if(r.widget)for(let o of n)o.widget(this.view,r);for(let r of n)r.finish();s&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(s){let e=s.startState.facet(mo),t=s.state.facet(mo),i=s.docChanged||s.heightChanged||s.viewportChanged||!st.eq(s.startState.facet(ra),s.state.facet(ra),s.view.viewport.from,s.view.viewport.to);if(e==t)for(let n of this.gutters)n.update(s)&&(i=!0);else{i=!0;let n=[];for(let r of t){let o=e.indexOf(r);o<0?n.push(new um(this.view,r)):(this.gutters[o].update(s),n.push(this.gutters[o]))}for(let r of this.gutters)r.dom.remove(),n.indexOf(r)<0&&r.destroy();for(let r of n)r.config.side=="after"?this.getDOMAfter().appendChild(r.dom):this.dom.appendChild(r.dom);this.gutters=n}return i}destroy(){for(let s of this.gutters)s.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:s=>Te.scrollMargins.of(e=>{let t=e.plugin(s);if(!t||t.gutters.length==0||!t.fixed)return null;let i=t.dom.offsetWidth*e.scaleX,n=t.domAfter?t.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==Ct.LTR?{left:i,right:n}:{right:i,left:n}})});function am(s){return Array.isArray(s)?s:[s]}function fd(s,e,t){for(;s.value&&s.from<=t;)s.from==t&&e.push(s.value),s.next()}class C3{constructor(e,t,i){this.gutter=e,this.height=i,this.i=0,this.cursor=st.iter(e.markers,t.from)}addElement(e,t,i){let{gutter:n}=this,r=(t.top-this.height)/e.scaleY,o=t.height/e.scaleY;if(this.i==n.elements.length){let l=new sy(e,o,r,i);n.elements.push(l),n.dom.appendChild(l.dom)}else n.elements[this.i].update(e,o,r,i);this.height=t.bottom,this.i++}line(e,t,i){let n=[];fd(this.cursor,n,t.from),i.length&&(n=n.concat(i));let r=this.gutter.config.lineMarker(e,t,n);r&&n.unshift(r);let o=this.gutter;n.length==0&&!o.config.renderEmptyElements||this.addElement(e,t,n)}widget(e,t){let i=this.gutter.config.widgetMarker(e,t.widget,t),n=i?[i]:null;for(let r of e.state.facet(k3)){let o=r(e,t.widget,t);o&&(n||(n=[])).push(o)}n&&this.addElement(e,t,n)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class um{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in t.domEventHandlers)this.dom.addEventListener(i,n=>{let r=n.target,o;if(r!=this.dom&&this.dom.contains(r)){for(;r.parentNode!=this.dom;)r=r.parentNode;let a=r.getBoundingClientRect();o=(a.top+a.bottom)/2}else o=n.clientY;let l=e.lineBlockAtHeight(o-e.documentTop);t.domEventHandlers[i](e,l,n)&&n.preventDefault()});this.markers=am(t.markers(e)),t.initialSpacer&&(this.spacer=new sy(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=am(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let n=this.config.updateSpacer(this.spacer.markers[0],e);n!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[n])}let i=e.view.viewport;return!st.eq(this.markers,t,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class sy{constructor(e,t,i,n){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,i,n)}update(e,t,i,n){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),_3(this.markers,n)||this.setMarkers(e,n)}setMarkers(e,t){let i="cm-gutterElement",n=this.dom.firstChild;for(let r=0,o=0;;){let l=o,a=r<t.length?t[r++]:null,c=!1;if(a){let u=a.elementClass;u&&(i+=" "+u);for(let d=o;d<this.markers.length;d++)if(this.markers[d].compare(a)){l=d,c=!0;break}}else l=this.markers.length;for(;o<l;){let u=this.markers[o++];if(u.toDOM){u.destroy(n);let d=n.nextSibling;n.remove(),n=d}}if(!a)break;a.toDOM&&(c?n=n.nextSibling:this.dom.insertBefore(a.toDOM(e),n)),c&&o++}this.dom.className=i,this.markers=t}destroy(){this.setMarkers(null,[])}}function _3(s,e){if(s.length!=e.length)return!1;for(let t=0;t<s.length;t++)if(!s[t].compare(e[t]))return!1;return!0}const A3=Oe.define(),M3=Oe.define(),Zn=Oe.define({combine(s){return xi(s,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let i=Object.assign({},e);for(let n in t){let r=i[n],o=t[n];i[n]=r?(l,a,c)=>r(l,a,c)||o(l,a,c):o}return i}})}});class Ju extends Ii{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Yu(s,e){return s.state.facet(Zn).formatNumber(e,s.state)}const D3=mo.compute([Zn],s=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(A3)},lineMarker(e,t,i){return i.some(n=>n.toDOM)?null:new Ju(Yu(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,i)=>{for(let n of e.state.facet(M3)){let r=n(e,t,i);if(r)return r}return null},lineMarkerChange:e=>e.startState.facet(Zn)!=e.state.facet(Zn),initialSpacer(e){return new Ju(Yu(e,cm(e.state.doc.lines)))},updateSpacer(e,t){let i=Yu(t.view,cm(t.view.state.doc.lines));return i==e.number?e:new Ju(i)},domEventHandlers:s.facet(Zn).domEventHandlers,side:"before"}));function E3(s={}){return[Zn.of(s),ty(),D3]}function cm(s){let e=9;for(;e<s;)e=e*10+9;return e}const T3=new class extends Ii{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},O3=ra.compute(["selection"],s=>{let e=[],t=-1;for(let i of s.selection.ranges){let n=s.doc.lineAt(i.head).from;n>t&&(t=n,e.push(T3.range(n)))}return st.of(e)});function j3(){return O3}const P3=1024;let $3=0;class Qu{constructor(e,t){this.from=e,this.to=t}}class Xe{constructor(e={}){this.id=$3++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=As.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}}Xe.closedBy=new Xe({deserialize:s=>s.split(" ")});Xe.openedBy=new Xe({deserialize:s=>s.split(" ")});Xe.group=new Xe({deserialize:s=>s.split(" ")});Xe.isolate=new Xe({deserialize:s=>{if(s&&s!="rtl"&&s!="ltr"&&s!="auto")throw new RangeError("Invalid value for isolate: "+s);return s||"auto"}});Xe.contextHash=new Xe({perNode:!0});Xe.lookAhead=new Xe({perNode:!0});Xe.mounted=new Xe({perNode:!0});class Da{constructor(e,t,i){this.tree=e,this.overlay=t,this.parser=i}static get(e){return e&&e.props&&e.props[Xe.mounted.id]}}const R3=Object.create(null);class As{constructor(e,t,i,n=0){this.name=e,this.props=t,this.id=i,this.flags=n}static define(e){let t=e.props&&e.props.length?Object.create(null):R3,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),n=new As(e.name||"",t,e.id,i);if(e.props){for(let r of e.props)if(Array.isArray(r)||(r=r(n)),r){if(r[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[r[0].id]=r[1]}}return n}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(Xe.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let n of i.split(" "))t[n]=e[i];return i=>{for(let n=i.prop(Xe.group),r=-1;r<(n?n.length:0);r++){let o=t[r<0?i.name:n[r]];if(o)return o}}}}As.none=new As("",Object.create(null),0,8);class hf{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let n=null;for(let r of e){let o=r(i);if(o){n||(n=Object.assign({},i.props));let l=o[1],a=o[0];a.combine&&a.id in n&&(l=a.combine(n[a.id],l)),n[a.id]=l}}t.push(n?new As(i.name,n,i.id,i.flags):i)}return new hf(t)}}const Bl=new WeakMap,dm=new WeakMap;var Kt;(function(s){s[s.ExcludeBuffers=1]="ExcludeBuffers",s[s.IncludeAnonymous=2]="IncludeAnonymous",s[s.IgnoreMounts=4]="IgnoreMounts",s[s.IgnoreOverlays=8]="IgnoreOverlays"})(Kt||(Kt={}));class At{constructor(e,t,i,n,r){if(this.type=e,this.children=t,this.positions=i,this.length=n,this.props=null,r&&r.length){this.props=Object.create(null);for(let[o,l]of r)this.props[typeof o=="number"?o:o.id]=l}}toString(){let e=Da.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let n=i.toString();n&&(t&&(t+=","),t+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new pd(this.topNode,e)}cursorAt(e,t=0,i=0){let n=Bl.get(this)||this.topNode,r=new pd(n);return r.moveTo(e,t),Bl.set(this,r._tree),r}get topNode(){return new zs(this,0,0,null)}resolve(e,t=0){let i=Lo(Bl.get(this)||this.topNode,e,t,!1);return Bl.set(this,i),i}resolveInner(e,t=0){let i=Lo(dm.get(this)||this.topNode,e,t,!0);return dm.set(this,i),i}resolveStack(e,t=0){return B3(this,e,t)}iterate(e){let{enter:t,leave:i,from:n=0,to:r=this.length}=e,o=e.mode||0,l=(o&Kt.IncludeAnonymous)>0;for(let a=this.cursor(o|Kt.IncludeAnonymous);;){let c=!1;if(a.from<=r&&a.to>=n&&(!l&&a.type.isAnonymous||t(a)!==!1)){if(a.firstChild())continue;c=!0}for(;c&&i&&(l||!a.type.isAnonymous)&&i(a),!a.nextSibling();){if(!a.parent())return;c=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:gf(As.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,n)=>new At(this.type,t,i,n,this.propValues),e.makeTree||((t,i,n)=>new At(As.none,t,i,n)))}static build(e){return I3(e)}}At.empty=new At(As.none,[],[],0);class pf{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new pf(this.buffer,this.index)}}class cn{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return As.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],n=this.set.types[t],r=n.name;if(/\W/.test(r)&&!n.isError&&(r=JSON.stringify(r)),e+=4,i==e)return r;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return r+"("+o.join(",")+")"}findChild(e,t,i,n,r){let{buffer:o}=this,l=-1;for(let a=e;a!=t&&!(iy(r,n,o[a+1],o[a+2])&&(l=a,i>0));a=o[a+3]);return l}slice(e,t,i){let n=this.buffer,r=new Uint16Array(t-e),o=0;for(let l=e,a=0;l<t;){r[a++]=n[l++],r[a++]=n[l++]-i;let c=r[a++]=n[l++]-i;r[a++]=n[l++]-e,o=Math.max(o,c)}return new cn(r,o,this.set)}}function iy(s,e,t,i){switch(s){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function Lo(s,e,t,i){for(var n;s.from==s.to||(t<1?s.from>=e:s.from>e)||(t>-1?s.to<=e:s.to<e);){let o=!i&&s instanceof zs&&s.index<0?null:s.parent;if(!o)return s;s=o}let r=i?0:Kt.IgnoreOverlays;if(i)for(let o=s,l=o.parent;l;o=l,l=o.parent)o instanceof zs&&o.index<0&&((n=l.enter(e,t,r))===null||n===void 0?void 0:n.from)!=o.from&&(s=l);for(;;){let o=s.enter(e,t,r);if(!o)return s;s=o}}class ny{cursor(e=0){return new pd(this,e)}getChild(e,t=null,i=null){let n=fm(this,e,t,i);return n.length?n[0]:null}getChildren(e,t=null,i=null){return fm(this,e,t,i)}resolve(e,t=0){return Lo(this,e,t,!1)}resolveInner(e,t=0){return Lo(this,e,t,!0)}matchContext(e){return hd(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),i=this;for(;t;){let n=t.lastChild;if(!n||n.to!=t.to)break;n.type.isError&&n.from==n.to?(i=t,t=n.prevSibling):t=n}return i}get node(){return this}get next(){return this.parent}}class zs extends ny{constructor(e,t,i,n){super(),this._tree=e,this.from=t,this.index=i,this._parent=n}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,n,r=0){for(let o=this;;){for(let{children:l,positions:a}=o._tree,c=t>0?l.length:-1;e!=c;e+=t){let u=l[e],d=a[e]+o.from;if(iy(n,i,d,d+u.length)){if(u instanceof cn){if(r&Kt.ExcludeBuffers)continue;let h=u.findChild(0,u.buffer.length,t,i-d,n);if(h>-1)return new en(new L3(o,u,e,d),null,h)}else if(r&Kt.IncludeAnonymous||!u.type.isAnonymous||mf(u)){let h;if(!(r&Kt.IgnoreMounts)&&(h=Da.get(u))&&!h.overlay)return new zs(h.tree,d,e,o);let p=new zs(u,d,e,o);return r&Kt.IncludeAnonymous||!p.type.isAnonymous?p:p.nextChild(t<0?u.children.length-1:0,t,i,n)}}}if(r&Kt.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let n;if(!(i&Kt.IgnoreOverlays)&&(n=Da.get(this._tree))&&n.overlay){let r=e-this.from;for(let{from:o,to:l}of n.overlay)if((t>0?o<=r:o<r)&&(t<0?l>=r:l>r))return new zs(n.tree,n.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function fm(s,e,t,i){let n=s.cursor(),r=[];if(!n.firstChild())return r;if(t!=null){for(let o=!1;!o;)if(o=n.type.is(t),!n.nextSibling())return r}for(;;){if(i!=null&&n.type.is(i))return r;if(n.type.is(e)&&r.push(n.node),!n.nextSibling())return i==null?r:[]}}function hd(s,e,t=e.length-1){for(let i=s;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}class L3{constructor(e,t,i,n){this.parent=e,this.buffer=t,this.index=i,this.start=n}}class en extends ny{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,i){super(),this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,t,i){let{buffer:n}=this.context,r=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.context.start,i);return r<0?null:new en(this.context,this,r)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&Kt.ExcludeBuffers)return null;let{buffer:n}=this.context,r=n.findChild(this.index+4,n.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return r<0?null:new en(this.context,this,r)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new en(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new en(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,n=this.index+4,r=i.buffer[this.index+3];if(r>n){let o=i.buffer[this.index+1];e.push(i.slice(n,r,o)),t.push(0)}return new At(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function ry(s){if(!s.length)return null;let e=0,t=s[0];for(let r=1;r<s.length;r++){let o=s[r];(o.from>t.from||o.to<t.to)&&(t=o,e=r)}let i=t instanceof zs&&t.index<0?null:t.parent,n=s.slice();return i?n[e]=i:n.splice(e,1),new V3(n,t)}class V3{constructor(e,t){this.heads=e,this.node=t}get next(){return ry(this.heads)}}function B3(s,e,t){let i=s.resolveInner(e,t),n=null;for(let r=i instanceof zs?i:i.context.parent;r;r=r.parent)if(r.index<0){let o=r.parent;(n||(n=[i])).push(o.resolve(e,t)),r=o}else{let o=Da.get(r.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let l=new zs(o.tree,o.overlay[0].from+r.from,-1,r);(n||(n=[i])).push(Lo(l,e,t,!1))}}return n?ry(n):i}class pd{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof zs)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:n}=this.buffer;return this.type=t||n.set.types[n.buffer[e]],this.from=i+n.buffer[e+1],this.to=i+n.buffer[e+2],!0}yield(e){return e?e instanceof zs?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:n}=this.buffer,r=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.buffer.start,i);return r<0?!1:(this.stack.push(this.index),this.yieldBuf(r))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?i&Kt.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Kt.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Kt.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let n=i<0?0:this.stack[i]+4;if(this.index!=n)return this.yieldBuf(t.findChild(n,this.index,-1,0,4))}else{let n=t.buffer[this.index+3];if(n<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(n)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:n}=this;if(n){if(e>0){if(this.index<n.buffer.buffer.length)return!1}else for(let r=0;r<this.index;r++)if(n.buffer.buffer[r+3]<this.index)return!1;({index:t,parent:i}=n)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let r=t+e,o=e<0?-1:i._tree.children.length;r!=o;r+=e){let l=i._tree.children[r];if(this.mode&Kt.IncludeAnonymous||l instanceof cn||!l.type.isAnonymous||mf(l))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer)e:for(let n=this.index,r=this.stack.length;r>=0;){for(let o=e;o;o=o._parent)if(o.index==n){if(n==this.index)return o;t=o,i=r+1;break e}n=this.stack[--r]}for(let n=i;n<this.stack.length;n++)t=new en(this.buffer,t,this.stack[n]);return this.bufferNode=new en(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let n=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(n=!0)}for(;;){if(n&&t&&t(this),n=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,n=!0}}}matchContext(e){if(!this.buffer)return hd(this.node.parent,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let n=e.length-1,r=this.stack.length-1;n>=0;r--){if(r<0)return hd(this._tree,e,n);let o=i[t.buffer[this.stack[r]]];if(!o.isAnonymous){if(e[n]&&e[n]!=o.name)return!1;n--}}return!0}}function mf(s){return s.children.some(e=>e instanceof cn||!e.type.isAnonymous||mf(e))}function I3(s){var e;let{buffer:t,nodeSet:i,maxBufferLength:n=P3,reused:r=[],minRepeatType:o=i.types.length}=s,l=Array.isArray(t)?new pf(t,t.length):t,a=i.types,c=0,u=0;function d(N,P,S,j,H,ue){let{id:X,start:B,end:ae,size:te}=l,$=u,K=c;if(te<0)if(l.next(),te==-1){let Ve=r[X];S.push(Ve),j.push(B-N);return}else if(te==-3){c=X;return}else if(te==-4){u=X;return}else throw new RangeError(`Unrecognized record size: ${te}`);let J=a[X],ce,ye,Pe=B-N;if(ae-B<=n&&(ye=m(l.pos-P,H))){let Ve=new Uint16Array(ye.size-ye.skip),je=l.pos-ye.size,We=Ve.length;for(;l.pos>je;)We=x(ye.start,Ve,We);ce=new cn(Ve,ae-ye.start,i),Pe=ye.start-N}else{let Ve=l.pos-te;l.next();let je=[],We=[],rt=X>=o?X:-1,ot=0,Ze=ae;for(;l.pos>Ve;)rt>=0&&l.id==rt&&l.size>=0?(l.end<=Ze-n&&(g(je,We,B,ot,l.end,Ze,rt,$,K),ot=je.length,Ze=l.end),l.next()):ue>2500?h(B,Ve,je,We):d(B,Ve,je,We,rt,ue+1);if(rt>=0&&ot>0&&ot<je.length&&g(je,We,B,ot,B,Ze,rt,$,K),je.reverse(),We.reverse(),rt>-1&&ot>0){let oe=p(J,K);ce=gf(J,je,We,0,je.length,0,ae-B,oe,oe)}else ce=k(J,je,We,ae-B,$-ae,K)}S.push(ce),j.push(Pe)}function h(N,P,S,j){let H=[],ue=0,X=-1;for(;l.pos>P;){let{id:B,start:ae,end:te,size:$}=l;if($>4)l.next();else{if(X>-1&&ae<X)break;X<0&&(X=te-n),H.push(B,ae,te),ue++,l.next()}}if(ue){let B=new Uint16Array(ue*4),ae=H[H.length-2];for(let te=H.length-3,$=0;te>=0;te-=3)B[$++]=H[te],B[$++]=H[te+1]-ae,B[$++]=H[te+2]-ae,B[$++]=$;S.push(new cn(B,H[2]-ae,i)),j.push(ae-N)}}function p(N,P){return(S,j,H)=>{let ue=0,X=S.length-1,B,ae;if(X>=0&&(B=S[X])instanceof At){if(!X&&B.type==N&&B.length==H)return B;(ae=B.prop(Xe.lookAhead))&&(ue=j[X]+B.length+ae)}return k(N,S,j,H,ue,P)}}function g(N,P,S,j,H,ue,X,B,ae){let te=[],$=[];for(;N.length>j;)te.push(N.pop()),$.push(P.pop()+S-H);N.push(k(i.types[X],te,$,ue-H,B-ue,ae)),P.push(H-S)}function k(N,P,S,j,H,ue,X){if(ue){let B=[Xe.contextHash,ue];X=X?[B].concat(X):[B]}if(H>25){let B=[Xe.lookAhead,H];X=X?[B].concat(X):[B]}return new At(N,P,S,j,X)}function m(N,P){let S=l.fork(),j=0,H=0,ue=0,X=S.end-n,B={size:0,start:0,skip:0};e:for(let ae=S.pos-N;S.pos>ae;){let te=S.size;if(S.id==P&&te>=0){B.size=j,B.start=H,B.skip=ue,ue+=4,j+=4,S.next();continue}let $=S.pos-te;if(te<0||$<ae||S.start<X)break;let K=S.id>=o?4:0,J=S.start;for(S.next();S.pos>$;){if(S.size<0)if(S.size==-3)K+=4;else break e;else S.id>=o&&(K+=4);S.next()}H=J,j+=te,ue+=K}return(P<0||j==N)&&(B.size=j,B.start=H,B.skip=ue),B.size>4?B:void 0}function x(N,P,S){let{id:j,start:H,end:ue,size:X}=l;if(l.next(),X>=0&&j<o){let B=S;if(X>4){let ae=l.pos-(X-4);for(;l.pos>ae;)S=x(N,P,S)}P[--S]=B,P[--S]=ue-N,P[--S]=H-N,P[--S]=j}else X==-3?c=j:X==-4&&(u=j);return S}let V=[],I=[];for(;l.pos>0;)d(s.start||0,s.bufferStart||0,V,I,-1,0);let U=(e=s.length)!==null&&e!==void 0?e:V.length?I[0]+V[0].length:0;return new At(a[s.topID],V.reverse(),I.reverse(),U)}const hm=new WeakMap;function oa(s,e){if(!s.isAnonymous||e instanceof cn||e.type!=s)return 1;let t=hm.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=s||!(i instanceof At)){t=1;break}t+=oa(s,i)}hm.set(e,t)}return t}function gf(s,e,t,i,n,r,o,l,a){let c=0;for(let g=i;g<n;g++)c+=oa(s,e[g]);let u=Math.ceil(c*1.5/8),d=[],h=[];function p(g,k,m,x,V){for(let I=m;I<x;){let U=I,N=k[I],P=oa(s,g[I]);for(I++;I<x;I++){let S=oa(s,g[I]);if(P+S>=u)break;P+=S}if(I==U+1){if(P>u){let S=g[U];p(S.children,S.positions,0,S.children.length,k[U]+V);continue}d.push(g[U])}else{let S=k[I-1]+g[I-1].length-N;d.push(gf(s,g,k,U,I,N,S,null,a))}h.push(N+V-r)}}return p(e,t,i,n,0),(l||a)(d,h,o)}class Pn{constructor(e,t,i,n,r=!1,o=!1){this.from=e,this.to=t,this.tree=i,this.offset=n,this.open=(r?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],i=!1){let n=[new Pn(0,e.length,e,0,!1,i)];for(let r of t)r.to>e.length&&n.push(r);return n}static applyChanges(e,t,i=128){if(!t.length)return e;let n=[],r=1,o=e.length?e[0]:null;for(let l=0,a=0,c=0;;l++){let u=l<t.length?t[l]:null,d=u?u.fromA:1e9;if(d-a>=i)for(;o&&o.from<d;){let h=o;if(a>=h.from||d<=h.to||c){let p=Math.max(h.from,a)-c,g=Math.min(h.to,d)-c;h=p>=g?null:new Pn(p,g,h.tree,h.offset+c,l>0,!!u)}if(h&&n.push(h),o.to>d)break;o=r<e.length?e[r++]:null}if(!u)break;a=u.toA,c=u.toA-u.toB}return n}}class oy{startParse(e,t,i){return typeof e=="string"&&(e=new N3(e)),i=i?i.length?i.map(n=>new Qu(n.from,n.to)):[new Qu(0,0)]:[new Qu(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let n=this.startParse(e,t,i);for(;;){let r=n.advance();if(r)return r}}}class N3{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new Xe({perNode:!0});let F3=0;class $s{constructor(e,t,i,n){this.name=e,this.set=t,this.base=i,this.modified=n,this.id=F3++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let i=typeof e=="string"?e:"?";if(e instanceof $s&&(t=e),t?.base)throw new Error("Can not derive from a modified tag");let n=new $s(i,[],null,[]);if(n.set.push(n),t)for(let r of t.set)n.set.push(r);return n}static defineModifier(e){let t=new Ea(e);return i=>i.modified.indexOf(t)>-1?i:Ea.get(i.base||i,i.modified.concat(t).sort((n,r)=>n.id-r.id))}}let z3=0;class Ea{constructor(e){this.name=e,this.instances=[],this.id=z3++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find(l=>l.base==e&&U3(t,l.modified));if(i)return i;let n=[],r=new $s(e.name,n,e,t);for(let l of t)l.instances.push(r);let o=H3(t);for(let l of e.set)if(!l.modified.length)for(let a of o)n.push(Ea.get(l,a));return r}}function U3(s,e){return s.length==e.length&&s.every((t,i)=>t==e[i])}function H3(s){let e=[[]];for(let t=0;t<s.length;t++)for(let i=0,n=e.length;i<n;i++)e.push(e[i].concat(s[t]));return e.sort((t,i)=>i.length-t.length)}function W3(s){let e=Object.create(null);for(let t in s){let i=s[t];Array.isArray(i)||(i=[i]);for(let n of t.split(" "))if(n){let r=[],o=2,l=n;for(let d=0;;){if(l=="..."&&d>0&&d+3==n.length){o=1;break}let h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!h)throw new RangeError("Invalid path: "+n);if(r.push(h[0]=="*"?"":h[0][0]=='"'?JSON.parse(h[0]):h[0]),d+=h[0].length,d==n.length)break;let p=n[d++];if(d==n.length&&p=="!"){o=0;break}if(p!="/")throw new RangeError("Invalid path: "+n);l=n.slice(d)}let a=r.length-1,c=r[a];if(!c)throw new RangeError("Invalid path: "+n);let u=new Vo(i,o,a>0?r.slice(0,a):null);e[c]=u.sort(e[c])}}return ly.add(e)}const ly=new Xe({combine(s,e){let t,i,n;for(;s||e;){if(!s||e&&s.depth>=e.depth?(n=e,e=e.next):(n=s,s=s.next),t&&t.mode==n.mode&&!n.context&&!t.context)continue;let r=new Vo(n.tags,n.mode,n.context);t?t.next=r:i=r,t=r}return i}});class Vo{constructor(e,t,i,n){this.tags=e,this.mode=t,this.context=i,this.next=n}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Vo.empty=new Vo([],2,null);function ay(s,e){let t=Object.create(null);for(let r of s)if(!Array.isArray(r.tag))t[r.tag.id]=r.class;else for(let o of r.tag)t[o.id]=r.class;let{scope:i,all:n=null}=e||{};return{style:r=>{let o=n;for(let l of r)for(let a of l.set){let c=t[a.id];if(c){o=o?o+" "+c:c;break}}return o},scope:i}}function q3(s,e){let t=null;for(let i of s){let n=i.style(e);n&&(t=t?t+" "+n:n)}return t}function K3(s,e,t,i=0,n=s.length){let r=new G3(i,Array.isArray(e)?e:[e],t);r.highlightRange(s.cursor(),i,n,"",r.highlighters),r.flush(n)}class G3{constructor(e,t,i){this.at=e,this.highlighters=t,this.span=i,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,i,n,r){let{type:o,from:l,to:a}=e;if(l>=i||a<=t)return;o.isTop&&(r=this.highlighters.filter(p=>!p.scope||p.scope(o)));let c=n,u=J3(e)||Vo.empty,d=q3(r,u.tags);if(d&&(c&&(c+=" "),c+=d,u.mode==1&&(n+=(n?" ":"")+d)),this.startSpan(Math.max(t,l),c),u.opaque)return;let h=e.tree&&e.tree.prop(Xe.mounted);if(h&&h.overlay){let p=e.node.enter(h.overlay[0].from+l,1),g=this.highlighters.filter(m=>!m.scope||m.scope(h.tree.type)),k=e.firstChild();for(let m=0,x=l;;m++){let V=m<h.overlay.length?h.overlay[m]:null,I=V?V.from+l:a,U=Math.max(t,x),N=Math.min(i,I);if(U<N&&k)for(;e.from<N&&(this.highlightRange(e,U,N,n,r),this.startSpan(Math.min(N,e.to),c),!(e.to>=I||!e.nextSibling())););if(!V||I>i)break;x=V.to+l,x>t&&(this.highlightRange(p.cursor(),Math.max(t,V.from+l),Math.min(i,x),"",g),this.startSpan(Math.min(i,x),c))}k&&e.parent()}else if(e.firstChild()){h&&(n="");do if(!(e.to<=t)){if(e.from>=i)break;this.highlightRange(e,t,i,n,r),this.startSpan(Math.min(i,e.to),c)}while(e.nextSibling());e.parent()}}}function J3(s){let e=s.type.prop(ly);for(;e&&e.context&&!s.matchContext(e.context);)e=e.next;return e||null}const xe=$s.define,Il=xe(),Ki=xe(),pm=xe(Ki),mm=xe(Ki),Gi=xe(),Nl=xe(Gi),Xu=xe(Gi),ci=xe(),xn=xe(ci),ai=xe(),ui=xe(),md=xe(),qr=xe(md),Fl=xe(),Me={comment:Il,lineComment:xe(Il),blockComment:xe(Il),docComment:xe(Il),name:Ki,variableName:xe(Ki),typeName:pm,tagName:xe(pm),propertyName:mm,attributeName:xe(mm),className:xe(Ki),labelName:xe(Ki),namespace:xe(Ki),macroName:xe(Ki),literal:Gi,string:Nl,docString:xe(Nl),character:xe(Nl),attributeValue:xe(Nl),number:Xu,integer:xe(Xu),float:xe(Xu),bool:xe(Gi),regexp:xe(Gi),escape:xe(Gi),color:xe(Gi),url:xe(Gi),keyword:ai,self:xe(ai),null:xe(ai),atom:xe(ai),unit:xe(ai),modifier:xe(ai),operatorKeyword:xe(ai),controlKeyword:xe(ai),definitionKeyword:xe(ai),moduleKeyword:xe(ai),operator:ui,derefOperator:xe(ui),arithmeticOperator:xe(ui),logicOperator:xe(ui),bitwiseOperator:xe(ui),compareOperator:xe(ui),updateOperator:xe(ui),definitionOperator:xe(ui),typeOperator:xe(ui),controlOperator:xe(ui),punctuation:md,separator:xe(md),bracket:qr,angleBracket:xe(qr),squareBracket:xe(qr),paren:xe(qr),brace:xe(qr),content:ci,heading:xn,heading1:xe(xn),heading2:xe(xn),heading3:xe(xn),heading4:xe(xn),heading5:xe(xn),heading6:xe(xn),contentSeparator:xe(ci),list:xe(ci),quote:xe(ci),emphasis:xe(ci),strong:xe(ci),link:xe(ci),monospace:xe(ci),strikethrough:xe(ci),inserted:xe(),deleted:xe(),changed:xe(),invalid:xe(),meta:Fl,documentMeta:xe(Fl),annotation:xe(Fl),processingInstruction:xe(Fl),definition:$s.defineModifier("definition"),constant:$s.defineModifier("constant"),function:$s.defineModifier("function"),standard:$s.defineModifier("standard"),local:$s.defineModifier("local"),special:$s.defineModifier("special")};for(let s in Me){let e=Me[s];e instanceof $s&&(e.name=s)}ay([{tag:Me.link,class:"tok-link"},{tag:Me.heading,class:"tok-heading"},{tag:Me.emphasis,class:"tok-emphasis"},{tag:Me.strong,class:"tok-strong"},{tag:Me.keyword,class:"tok-keyword"},{tag:Me.atom,class:"tok-atom"},{tag:Me.bool,class:"tok-bool"},{tag:Me.url,class:"tok-url"},{tag:Me.labelName,class:"tok-labelName"},{tag:Me.inserted,class:"tok-inserted"},{tag:Me.deleted,class:"tok-deleted"},{tag:Me.literal,class:"tok-literal"},{tag:Me.string,class:"tok-string"},{tag:Me.number,class:"tok-number"},{tag:[Me.regexp,Me.escape,Me.special(Me.string)],class:"tok-string2"},{tag:Me.variableName,class:"tok-variableName"},{tag:Me.local(Me.variableName),class:"tok-variableName tok-local"},{tag:Me.definition(Me.variableName),class:"tok-variableName tok-definition"},{tag:Me.special(Me.variableName),class:"tok-variableName2"},{tag:Me.definition(Me.propertyName),class:"tok-propertyName tok-definition"},{tag:Me.typeName,class:"tok-typeName"},{tag:Me.namespace,class:"tok-namespace"},{tag:Me.className,class:"tok-className"},{tag:Me.macroName,class:"tok-macroName"},{tag:Me.propertyName,class:"tok-propertyName"},{tag:Me.operator,class:"tok-operator"},{tag:Me.comment,class:"tok-comment"},{tag:Me.meta,class:"tok-meta"},{tag:Me.invalid,class:"tok-invalid"},{tag:Me.punctuation,class:"tok-punctuation"}]);var Zu;const er=new Xe;function Y3(s){return Oe.define({combine:s?e=>e.concat(s):void 0})}const Q3=new Xe;class Js{constructor(e,t,i=[],n=""){this.data=e,this.name=n,tt.prototype.hasOwnProperty("tree")||Object.defineProperty(tt.prototype,"tree",{get(){return ls(this)}}),this.parser=t,this.extension=[dn.of(this),tt.languageData.of((r,o,l)=>{let a=gm(r,o,l),c=a.type.prop(er);if(!c)return[];let u=r.facet(c),d=a.type.prop(Q3);if(d){let h=a.resolve(o-a.from,l);for(let p of d)if(p.test(h,r)){let g=r.facet(p.facet);return p.type=="replace"?g:g.concat(u)}}return u})].concat(i)}isActiveAt(e,t,i=-1){return gm(e,t,i).type.prop(er)==this.data}findRegions(e){let t=e.facet(dn);if(t?.data==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[],n=(r,o)=>{if(r.prop(er)==this.data){i.push({from:o,to:o+r.length});return}let l=r.prop(Xe.mounted);if(l){if(l.tree.prop(er)==this.data){if(l.overlay)for(let a of l.overlay)i.push({from:a.from+o,to:a.to+o});else i.push({from:o,to:o+r.length});return}else if(l.overlay){let a=i.length;if(n(l.tree,l.overlay[0].from+o),i.length>a)return}}for(let a=0;a<r.children.length;a++){let c=r.children[a];c instanceof At&&n(c,r.positions[a]+o)}};return n(ls(e),0),i}get allowsNesting(){return!0}}Js.setState=Ye.define();function gm(s,e,t){let i=s.facet(dn),n=ls(s).topNode;if(!i||i.allowsNesting)for(let r=n;r;r=r.enter(e,t,Kt.ExcludeBuffers))r.type.isTop&&(n=r);return n}function ls(s){let e=s.field(Js.state,!1);return e?e.tree:At.empty}class X3{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}}let Kr=null;class wr{constructor(e,t,i=[],n,r,o,l,a){this.parser=e,this.state=t,this.fragments=i,this.tree=n,this.treeLen=r,this.viewport=o,this.skipped=l,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,i){return new wr(e,t,[],At.empty,0,i,[],null)}startParse(){return this.parser.startParse(new X3(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=At.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let n=Date.now()+e;e=()=>Date.now()>n}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let n=this.parse.advance();if(n)if(this.fragments=this.withoutTempSkipped(Pn.addTree(n,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=n,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Pn.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=Kr;Kr=this;try{return e()}finally{Kr=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=vm(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:n,treeLen:r,viewport:o,skipped:l}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((c,u,d,h)=>a.push({fromA:c,toA:u,fromB:d,toB:h})),i=Pn.applyChanges(i,a),n=At.empty,r=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){l=[];for(let c of this.skipped){let u=e.mapPos(c.from,1),d=e.mapPos(c.to,-1);u<d&&l.push({from:u,to:d})}}}return new wr(this.parser,t,i,n,r,o,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:n,to:r}=this.skipped[i];n<e.to&&r>e.from&&(this.fragments=vm(this.fragments,n,r),this.skipped.splice(i--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends oy{createParse(t,i,n){let r=n[0].from,o=n[n.length-1].to;return{parsedPos:r,advance(){let a=Kr;if(a){for(let c of n)a.tempSkipped.push(c);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=o,new At(As.none,[],[],o-r)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return Kr}}function vm(s,e,t){return Pn.applyChanges(s,[{fromA:e,toA:t,fromB:e,toB:t}])}class Sr{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,i)||t.takeTree(),new Sr(t)}static init(e){let t=Math.min(3e3,e.doc.length),i=wr.create(e.facet(dn).parser,e,{from:0,to:t});return i.work(20,t)||i.takeTree(),new Sr(i)}}Js.state=Yt.define({create:Sr.init,update(s,e){for(let t of e.effects)if(t.is(Js.setState))return t.value;return e.startState.facet(dn)!=e.state.facet(dn)?Sr.init(e.state):s.apply(e)}});let uy=s=>{let e=setTimeout(()=>s(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(uy=s=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(s,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const ec=typeof navigator<"u"&&(!((Zu=navigator.scheduling)===null||Zu===void 0)&&Zu.isInputPending)?()=>navigator.scheduling.isInputPending():null,Z3=$t.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Js.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Js.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=uy(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:n}}=this.view,r=i.field(Js.state);if(r.tree==r.context.tree&&r.context.isDone(n+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!ec?Math.max(25,e.timeRemaining()-5):1e9),l=r.context.treeLen<n&&i.doc.length>n+1e3,a=r.context.work(()=>ec&&ec()||Date.now()>o,n+(l?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(r.context.takeTree(),this.view.dispatch({effects:Js.setState.of(new Sr(r.context))})),this.chunkBudget>0&&!(a&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(r.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>Ss(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),dn=Oe.define({combine(s){return s.length?s[0]:null},enables:s=>[Js.state,Z3,Te.contentAttributes.compute([s],e=>{let t=e.facet(s);return t&&t.name?{"data-language":t.name}:{}})]}),eA=Oe.define(),vf=Oe.define({combine:s=>{if(!s.length)return"  ";let e=s[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(s[0]));return e}});function Fn(s){let e=s.facet(vf);return e.charCodeAt(0)==9?s.tabSize*e.length:e.length}function Bo(s,e){let t="",i=s.tabSize,n=s.facet(vf)[0];if(n=="	"){for(;e>=i;)t+="	",e-=i;n=" "}for(let r=0;r<e;r++)t+=n;return t}function yf(s,e){s instanceof tt&&(s=new fu(s));for(let i of s.state.facet(eA)){let n=i(s,e);if(n!==void 0)return n}let t=ls(s.state);return t.length>=e?tA(s,t,e):null}class fu{constructor(e,t={}){this.state=e,this.options=t,this.unit=Fn(e)}lineAt(e,t=1){let i=this.state.doc.lineAt(e),{simulateBreak:n,simulateDoubleBreak:r}=this.options;return n!=null&&n>=i.from&&n<=i.to?r&&n==e?{text:"",from:e}:(t<0?n<e:n<=e)?{text:i.text.slice(n-i.from),from:n}:{text:i.text.slice(0,n-i.from),from:i.from}:i}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:n}=this.lineAt(e,t);return i.slice(e-n,Math.min(i.length,e+100-n))}column(e,t=1){let{text:i,from:n}=this.lineAt(e,t),r=this.countColumn(i,e-n),o=this.options.overrideIndentation?this.options.overrideIndentation(n):-1;return o>-1&&(r+=o-this.countColumn(i,i.search(/\S|$/))),r}countColumn(e,t=e.length){return Tr(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:i,from:n}=this.lineAt(e,t),r=this.options.overrideIndentation;if(r){let o=r(n);if(o>-1)return o}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const cy=new Xe;function tA(s,e,t){let i=e.resolveStack(t),n=e.resolveInner(t,-1).resolve(t,0).enterUnfinishedNodesBefore(t);if(n!=i.node){let r=[];for(let o=n;o&&!(o.from<i.node.from||o.to>i.node.to||o.from==i.node.from&&o.type==i.node.type);o=o.parent)r.push(o);for(let o=r.length-1;o>=0;o--)i={node:r[o],next:i}}return dy(i,s,t)}function dy(s,e,t){for(let i=s;i;i=i.next){let n=iA(i.node);if(n)return n(bf.create(e,t,i))}return 0}function sA(s){return s.pos==s.options.simulateBreak&&s.options.simulateDoubleBreak}function iA(s){let e=s.type.prop(cy);if(e)return e;let t=s.firstChild,i;if(t&&(i=t.type.prop(Xe.closedBy))){let n=s.lastChild,r=n&&i.indexOf(n.name)>-1;return o=>lA(o,!0,1,void 0,r&&!sA(o)?n.from:void 0)}return s.parent==null?nA:null}function nA(){return 0}class bf extends fu{constructor(e,t,i){super(e.state,e.options),this.base=e,this.pos=t,this.context=i}get node(){return this.context.node}static create(e,t,i){return new bf(e,t,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(t.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(rA(i,e))break;t=this.state.doc.lineAt(i.from)}return this.lineIndent(t.from)}continue(){return dy(this.context.next,this.base,this.pos)}}function rA(s,e){for(let t=e;t;t=t.parent)if(s==t)return!0;return!1}function oA(s){let e=s.node,t=e.childAfter(e.from),i=e.lastChild;if(!t)return null;let n=s.options.simulateBreak,r=s.state.doc.lineAt(t.from),o=n==null||n<=r.from?r.to:Math.min(r.to,n);for(let l=t.to;;){let a=e.childAfter(l);if(!a||a==i)return null;if(!a.type.isSkipped){if(a.from>=o)return null;let c=/^ */.exec(r.text.slice(t.to-r.from))[0].length;return{from:t.from,to:t.to+c}}l=a.to}}function lA(s,e,t,i,n){let r=s.textAfter,o=r.match(/^\s*/)[0].length,l=i&&r.slice(o,o+i.length)==i||n==s.pos+o,a=oA(s);return a?l?s.column(a.from):s.column(a.to):s.baseIndent+(l?0:s.unit*t)}const aA=200;function uA(){return tt.transactionFilter.of(s=>{if(!s.docChanged||!s.isUserEvent("input.type")&&!s.isUserEvent("input.complete"))return s;let e=s.startState.languageDataAt("indentOnInput",s.startState.selection.main.head);if(!e.length)return s;let t=s.newDoc,{head:i}=s.newSelection.main,n=t.lineAt(i);if(i>n.from+aA)return s;let r=t.sliceString(n.from,i);if(!e.some(c=>c.test(r)))return s;let{state:o}=s,l=-1,a=[];for(let{head:c}of o.selection.ranges){let u=o.doc.lineAt(c);if(u.from==l)continue;l=u.from;let d=yf(o,u.from);if(d==null)continue;let h=/^\s*/.exec(u.text)[0],p=Bo(o,d);h!=p&&a.push({from:u.from,to:u.from+h.length,insert:p})}return a.length?[s,{changes:a,sequential:!0}]:s})}const cA=Oe.define(),dA=new Xe;function fA(s,e,t){let i=ls(s);if(i.length<t)return null;let n=i.resolveStack(t,1),r=null;for(let o=n;o;o=o.next){let l=o.node;if(l.to<=t||l.from>t)continue;if(r&&l.from<e)break;let a=l.type.prop(dA);if(a&&(l.to<i.length-50||i.length==s.doc.length||!hA(l))){let c=a(l,s);c&&c.from<=t&&c.from>=e&&c.to>t&&(r=c)}}return r}function hA(s){let e=s.lastChild;return e&&e.to==s.to&&e.type.isError}function Ta(s,e,t){for(let i of s.facet(cA)){let n=i(s,e,t);if(n)return n}return fA(s,e,t)}function fy(s,e){let t=e.mapPos(s.from,1),i=e.mapPos(s.to,-1);return t>=i?void 0:{from:t,to:i}}const hu=Ye.define({map:fy}),Zo=Ye.define({map:fy});function hy(s){let e=[];for(let{head:t}of s.state.selection.ranges)e.some(i=>i.from<=t&&i.to>=t)||e.push(s.lineBlockAt(t));return e}const zn=Yt.define({create(){return Fe.none},update(s,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((t,i)=>s=ym(s,t,i)),s=s.map(e.changes);for(let t of e.effects)if(t.is(hu)&&!pA(s,t.value.from,t.value.to)){let{preparePlaceholder:i}=e.state.facet(gy),n=i?Fe.replace({widget:new xA(i(e.state,t.value))}):bm;s=s.update({add:[n.range(t.value.from,t.value.to)]})}else t.is(Zo)&&(s=s.update({filter:(i,n)=>t.value.from!=i||t.value.to!=n,filterFrom:t.value.from,filterTo:t.value.to}));return e.selection&&(s=ym(s,e.selection.main.head)),s},provide:s=>Te.decorations.from(s),toJSON(s,e){let t=[];return s.between(0,e.doc.length,(i,n)=>{t.push(i,n)}),t},fromJSON(s){if(!Array.isArray(s)||s.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<s.length;){let i=s[t++],n=s[t++];if(typeof i!="number"||typeof n!="number")throw new RangeError("Invalid JSON for fold state");e.push(bm.range(i,n))}return Fe.set(e,!0)}});function ym(s,e,t=e){let i=!1;return s.between(e,t,(n,r)=>{n<t&&r>e&&(i=!0)}),i?s.update({filterFrom:e,filterTo:t,filter:(n,r)=>n>=t||r<=e}):s}function Oa(s,e,t){var i;let n=null;return(i=s.field(zn,!1))===null||i===void 0||i.between(e,t,(r,o)=>{(!n||n.from>r)&&(n={from:r,to:o})}),n}function pA(s,e,t){let i=!1;return s.between(e,e,(n,r)=>{n==e&&r==t&&(i=!0)}),i}function py(s,e){return s.field(zn,!1)?e:e.concat(Ye.appendConfig.of(vy()))}const mA=s=>{for(let e of hy(s)){let t=Ta(s.state,e.from,e.to);if(t)return s.dispatch({effects:py(s.state,[hu.of(t),my(s,t)])}),!0}return!1},gA=s=>{if(!s.state.field(zn,!1))return!1;let e=[];for(let t of hy(s)){let i=Oa(s.state,t.from,t.to);i&&e.push(Zo.of(i),my(s,i,!1))}return e.length&&s.dispatch({effects:e}),e.length>0};function my(s,e,t=!0){let i=s.state.doc.lineAt(e.from).number,n=s.state.doc.lineAt(e.to).number;return Te.announce.of(`${s.state.phrase(t?"Folded lines":"Unfolded lines")} ${i} ${s.state.phrase("to")} ${n}.`)}const vA=s=>{let{state:e}=s,t=[];for(let i=0;i<e.doc.length;){let n=s.lineBlockAt(i),r=Ta(e,n.from,n.to);r&&t.push(hu.of(r)),i=(r?s.lineBlockAt(r.to):n).to+1}return t.length&&s.dispatch({effects:py(s.state,t)}),!!t.length},yA=s=>{let e=s.state.field(zn,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,s.state.doc.length,(i,n)=>{t.push(Zo.of({from:i,to:n}))}),s.dispatch({effects:t}),!0},bA=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:mA},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:gA},{key:"Ctrl-Alt-[",run:vA},{key:"Ctrl-Alt-]",run:yA}],kA={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},gy=Oe.define({combine(s){return xi(s,kA)}});function vy(s){return[zn,CA]}function yy(s,e){let{state:t}=s,i=t.facet(gy),n=o=>{let l=s.lineBlockAt(s.posAtDOM(o.target)),a=Oa(s.state,l.from,l.to);a&&s.dispatch({effects:Zo.of(a)}),o.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(s,n,e);let r=document.createElement("span");return r.textContent=i.placeholderText,r.setAttribute("aria-label",t.phrase("folded code")),r.title=t.phrase("unfold"),r.className="cm-foldPlaceholder",r.onclick=n,r}const bm=Fe.replace({widget:new class extends fn{toDOM(s){return yy(s,null)}}});class xA extends fn{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return yy(e,this.value)}}const wA={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class tc extends Ii{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function SA(s={}){let e={...wA,...s},t=new tc(e,!0),i=new tc(e,!1),n=$t.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(dn)!=o.state.facet(dn)||o.startState.field(zn,!1)!=o.state.field(zn,!1)||ls(o.startState)!=ls(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let l=new Vi;for(let a of o.viewportLineBlocks){let c=Oa(o.state,a.from,a.to)?i:Ta(o.state,a.from,a.to)?t:null;c&&l.add(a.from,a.from,c)}return l.finish()}}),{domEventHandlers:r}=e;return[n,w3({class:"cm-foldGutter",markers(o){var l;return((l=o.plugin(n))===null||l===void 0?void 0:l.markers)||st.empty},initialSpacer(){return new tc(e,!1)},domEventHandlers:{...r,click:(o,l,a)=>{if(r.click&&r.click(o,l,a))return!0;let c=Oa(o.state,l.from,l.to);if(c)return o.dispatch({effects:Zo.of(c)}),!0;let u=Ta(o.state,l.from,l.to);return u?(o.dispatch({effects:hu.of(u)}),!0):!1}}}),vy()]}const CA=Te.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class el{constructor(e,t){this.specs=e;let i;function n(l){let a=ln.newName();return(i||(i=Object.create(null)))["."+a]=l,a}const r=typeof t.all=="string"?t.all:t.all?n(t.all):void 0,o=t.scope;this.scope=o instanceof Js?l=>l.prop(er)==o.data:o?l=>l==o:void 0,this.style=ay(e.map(l=>({tag:l.tag,class:l.class||n(Object.assign({},l,{tag:null}))})),{all:r}).style,this.module=i?new ln(i):null,this.themeType=t.themeType}static define(e,t){return new el(e,t||{})}}const gd=Oe.define(),by=Oe.define({combine(s){return s.length?[s[0]]:null}});function sc(s){let e=s.facet(gd);return e.length?e:s.facet(by)}function ky(s,e){let t=[AA],i;return s instanceof el&&(s.module&&t.push(Te.styleModule.of(s.module)),i=s.themeType),e?.fallback?t.push(by.of(s)):i?t.push(gd.computeN([Te.darkTheme],n=>n.facet(Te.darkTheme)==(i=="dark")?[s]:[])):t.push(gd.of(s)),t}class _A{constructor(e){this.markCache=Object.create(null),this.tree=ls(e.state),this.decorations=this.buildDeco(e,sc(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=ls(e.state),i=sc(e.state),n=i!=sc(e.startState),{viewport:r}=e.view,o=e.changes.mapPos(this.decoratedTo,1);t.length<r.to&&!n&&t.type==this.tree.type&&o>=r.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(t!=this.tree||e.viewportChanged||n)&&(this.tree=t,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=r.to)}buildDeco(e,t){if(!t||!this.tree.length)return Fe.none;let i=new Vi;for(let{from:n,to:r}of e.visibleRanges)K3(this.tree,t,(o,l,a)=>{i.add(o,l,this.markCache[a]||(this.markCache[a]=Fe.mark({class:a})))},n,r);return i.finish()}}const AA=Hn.high($t.fromClass(_A,{decorations:s=>s.decorations})),MA=el.define([{tag:Me.meta,color:"#404740"},{tag:Me.link,textDecoration:"underline"},{tag:Me.heading,textDecoration:"underline",fontWeight:"bold"},{tag:Me.emphasis,fontStyle:"italic"},{tag:Me.strong,fontWeight:"bold"},{tag:Me.strikethrough,textDecoration:"line-through"},{tag:Me.keyword,color:"#708"},{tag:[Me.atom,Me.bool,Me.url,Me.contentSeparator,Me.labelName],color:"#219"},{tag:[Me.literal,Me.inserted],color:"#164"},{tag:[Me.string,Me.deleted],color:"#a11"},{tag:[Me.regexp,Me.escape,Me.special(Me.string)],color:"#e40"},{tag:Me.definition(Me.variableName),color:"#00f"},{tag:Me.local(Me.variableName),color:"#30a"},{tag:[Me.typeName,Me.namespace],color:"#085"},{tag:Me.className,color:"#167"},{tag:[Me.special(Me.variableName),Me.macroName],color:"#256"},{tag:Me.definition(Me.propertyName),color:"#00c"},{tag:Me.comment,color:"#940"},{tag:Me.invalid,color:"#f00"}]),DA=Te.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),xy=1e4,wy="()[]{}",Sy=Oe.define({combine(s){return xi(s,{afterCursor:!0,brackets:wy,maxScanDistance:xy,renderMatch:OA})}}),EA=Fe.mark({class:"cm-matchingBracket"}),TA=Fe.mark({class:"cm-nonmatchingBracket"});function OA(s){let e=[],t=s.matched?EA:TA;return e.push(t.range(s.start.from,s.start.to)),s.end&&e.push(t.range(s.end.from,s.end.to)),e}const jA=Yt.define({create(){return Fe.none},update(s,e){if(!e.docChanged&&!e.selection)return s;let t=[],i=e.state.facet(Sy);for(let n of e.state.selection.ranges){if(!n.empty)continue;let r=gi(e.state,n.head,-1,i)||n.head>0&&gi(e.state,n.head-1,1,i)||i.afterCursor&&(gi(e.state,n.head,1,i)||n.head<e.state.doc.length&&gi(e.state,n.head+1,-1,i));r&&(t=t.concat(i.renderMatch(r,e.state)))}return Fe.set(t,!0)},provide:s=>Te.decorations.from(s)}),PA=[jA,DA];function $A(s={}){return[Sy.of(s),PA]}const RA=new Xe;function vd(s,e,t){let i=s.prop(e<0?Xe.openedBy:Xe.closedBy);if(i)return i;if(s.name.length==1){let n=t.indexOf(s.name);if(n>-1&&n%2==(e<0?1:0))return[t[n+e]]}return null}function yd(s){let e=s.type.prop(RA);return e?e(s.node):s}function gi(s,e,t,i={}){let n=i.maxScanDistance||xy,r=i.brackets||wy,o=ls(s),l=o.resolveInner(e,t);for(let a=l;a;a=a.parent){let c=vd(a.type,t,r);if(c&&a.from<a.to){let u=yd(a);if(u&&(t>0?e>=u.from&&e<u.to:e>u.from&&e<=u.to))return LA(s,e,t,a,u,c,r)}}return VA(s,e,t,o,l.type,n,r)}function LA(s,e,t,i,n,r,o){let l=i.parent,a={from:n.from,to:n.to},c=0,u=l?.cursor();if(u&&(t<0?u.childBefore(i.from):u.childAfter(i.to)))do if(t<0?u.to<=i.from:u.from>=i.to){if(c==0&&r.indexOf(u.type.name)>-1&&u.from<u.to){let d=yd(u);return{start:a,end:d?{from:d.from,to:d.to}:void 0,matched:!0}}else if(vd(u.type,t,o))c++;else if(vd(u.type,-t,o)){if(c==0){let d=yd(u);return{start:a,end:d&&d.from<d.to?{from:d.from,to:d.to}:void 0,matched:!1}}c--}}while(t<0?u.prevSibling():u.nextSibling());return{start:a,matched:!1}}function VA(s,e,t,i,n,r,o){let l=t<0?s.sliceDoc(e-1,e):s.sliceDoc(e,e+1),a=o.indexOf(l);if(a<0||a%2==0!=t>0)return null;let c={from:t<0?e-1:e,to:t>0?e+1:e},u=s.doc.iterRange(e,t>0?s.doc.length:0),d=0;for(let h=0;!u.next().done&&h<=r;){let p=u.value;t<0&&(h+=p.length);let g=e+h*t;for(let k=t>0?0:p.length-1,m=t>0?p.length:-1;k!=m;k+=t){let x=o.indexOf(p[k]);if(!(x<0||i.resolveInner(g+k,1).type!=n))if(x%2==0==t>0)d++;else{if(d==1)return{start:c,end:{from:g+k,to:g+k+1},matched:x>>1==a>>1};d--}}t>0&&(h+=p.length)}return u.done?{start:c,matched:!1}:null}function km(s,e,t,i=0,n=0){e==null&&(e=s.search(/[^\s\u00a0]/),e==-1&&(e=s.length));let r=n;for(let o=i;o<e;o++)s.charCodeAt(o)==9?r+=t-r%t:r++;return r}class Cy{constructor(e,t,i,n){this.string=e,this.tabSize=t,this.indentUnit=i,this.overrideIndent=n,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let t=this.string.charAt(this.pos),i;if(typeof e=="string"?i=t==e:i=t&&(e instanceof RegExp?e.test(t):e(t)),i)return++this.pos,t}eatWhile(e){let t=this.pos;for(;this.eat(e););return this.pos>t}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=km(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:km(this.string,null,this.tabSize)}match(e,t,i){if(typeof e=="string"){let n=o=>i?o.toLowerCase():o,r=this.string.substr(this.pos,e.length);return n(r)==n(e)?(t!==!1&&(this.pos+=e.length),!0):null}else{let n=this.string.slice(this.pos).match(e);return n&&n.index>0?null:(n&&t!==!1&&(this.pos+=n[0].length),n)}}current(){return this.string.slice(this.start,this.pos)}}function BA(s){return{name:s.name||"",token:s.token,blankLine:s.blankLine||(()=>{}),startState:s.startState||(()=>!0),copyState:s.copyState||IA,indent:s.indent||(()=>null),languageData:s.languageData||{},tokenTable:s.tokenTable||wf,mergeTokens:s.mergeTokens!==!1}}function IA(s){if(typeof s!="object")return s;let e={};for(let t in s){let i=s[t];e[t]=i instanceof Array?i.slice():i}return e}const xm=new WeakMap;class kf extends Js{constructor(e){let t=Y3(e.languageData),i=BA(e),n,r=new class extends oy{createParse(o,l,a){return new FA(n,o,l,a)}};super(t,r,[],e.name),this.topNode=HA(t,this),n=this,this.streamParser=i,this.stateAfter=new Xe({perNode:!0}),this.tokenTable=e.tokenTable?new Dy(i.tokenTable):UA}static define(e){return new kf(e)}getIndent(e){let t,{overrideIndentation:i}=e.options;i&&(t=xm.get(e.state),t!=null&&t<e.pos-1e4&&(t=void 0));let n=xf(this,e.node.tree,e.node.from,e.node.from,t??e.pos),r,o;if(n?(o=n.state,r=n.pos+1):(o=this.streamParser.startState(e.unit),r=e.node.from),e.pos-r>1e4)return null;for(;r<e.pos;){let a=e.state.doc.lineAt(r),c=Math.min(e.pos,a.to);if(a.length){let u=i?i(a.from):-1,d=new Cy(a.text,e.state.tabSize,e.unit,u<0?void 0:u);for(;d.pos<c-a.from;)Ay(this.streamParser.token,d,o)}else this.streamParser.blankLine(o,e.unit);if(c==e.pos)break;r=a.to+1}let l=e.lineAt(e.pos);return i&&t==null&&xm.set(e.state,l.from),this.streamParser.indent(o,/^\s*(.*)/.exec(l.text)[1],e)}get allowsNesting(){return!1}}function xf(s,e,t,i,n){let r=t>=i&&t+e.length<=n&&e.prop(s.stateAfter);if(r)return{state:s.streamParser.copyState(r),pos:t+e.length};for(let o=e.children.length-1;o>=0;o--){let l=e.children[o],a=t+e.positions[o],c=l instanceof At&&a<n&&xf(s,l,a,i,n);if(c)return c}return null}function _y(s,e,t,i,n){if(n&&t<=0&&i>=e.length)return e;!n&&t==0&&e.type==s.topNode&&(n=!0);for(let r=e.children.length-1;r>=0;r--){let o=e.positions[r],l=e.children[r],a;if(o<i&&l instanceof At){if(!(a=_y(s,l,t-o,i-o,n)))break;return n?new At(e.type,e.children.slice(0,r).concat(a),e.positions.slice(0,r+1),o+a.length):a}}return null}function NA(s,e,t,i,n){for(let r of e){let o=r.from+(r.openStart?25:0),l=r.to-(r.openEnd?25:0),a=o<=t&&l>t&&xf(s,r.tree,0-r.offset,t,l),c;if(a&&a.pos<=i&&(c=_y(s,r.tree,t+r.offset,a.pos+r.offset,!1)))return{state:a.state,tree:c}}return{state:s.streamParser.startState(n?Fn(n):4),tree:At.empty}}class FA{constructor(e,t,i,n){this.lang=e,this.input=t,this.fragments=i,this.ranges=n,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=n[n.length-1].to;let r=wr.get(),o=n[0].from,{state:l,tree:a}=NA(e,i,o,this.to,r?.state);this.state=l,this.parsedPos=this.chunkStart=o+a.length;for(let c=0;c<a.children.length;c++)this.chunks.push(a.children[c]),this.chunkPos.push(a.positions[c]);r&&this.parsedPos<r.viewport.from-1e5&&n.some(c=>c.from<=r.viewport.from&&c.to>=r.viewport.from)&&(this.state=this.lang.streamParser.startState(Fn(r.state)),r.skipUntilInView(this.parsedPos,r.viewport.from),this.parsedPos=r.viewport.from),this.moveRangeIndex()}advance(){let e=wr.get(),t=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),i=Math.min(t,this.chunkStart+512);for(e&&(i=Math.min(i,e.viewport.to));this.parsedPos<i;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=t?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,t),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let t=this.input.chunk(e);if(this.input.lineChunks)t==`
`&&(t="");else{let i=t.indexOf(`
`);i>-1&&(t=t.slice(0,i))}return e+t.length<=this.to?t:t.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,t=this.lineAfter(e),i=e+t.length;for(let n=this.rangeIndex;;){let r=this.ranges[n].to;if(r>=i||(t=t.slice(0,r-(i-t.length)),n++,n==this.ranges.length))break;let o=this.ranges[n].from,l=this.lineAfter(o);t+=l,i=o+l.length}return{line:t,end:i}}skipGapsTo(e,t,i){for(;;){let n=this.ranges[this.rangeIndex].to,r=e+t;if(i>0?n>r:n>=r)break;let o=this.ranges[++this.rangeIndex].from;t+=o-n}return t}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,t,i,n){let r=4;if(this.ranges.length>1){n=this.skipGapsTo(t,n,1),t+=n;let l=this.chunk.length;n=this.skipGapsTo(i,n,-1),i+=n,r+=this.chunk.length-l}let o=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&r==4&&o>=0&&this.chunk[o]==e&&this.chunk[o+2]==t?this.chunk[o+2]=i:this.chunk.push(e,t,i,r),n}parseLine(e){let{line:t,end:i}=this.nextLine(),n=0,{streamParser:r}=this.lang,o=new Cy(t,e?e.state.tabSize:4,e?Fn(e.state):2);if(o.eol())r.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let l=Ay(r.token,o,this.state);if(l&&(n=this.emitToken(this.lang.tokenTable.resolve(l),this.parsedPos+o.start,this.parsedPos+o.pos,n)),o.start>1e4)break}this.parsedPos=i,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=At.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:zA,topID:0,maxBufferLength:512,reused:this.chunkReused});e=new At(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new At(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function Ay(s,e,t){e.start=e.pos;for(let i=0;i<10;i++){let n=s(e,t);if(e.pos>e.start)return n}throw new Error("Stream parser failed to advance stream.")}const wf=Object.create(null),Io=[As.none],zA=new hf(Io),wm=[],Sm=Object.create(null),My=Object.create(null);for(let[s,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])My[s]=Ey(wf,e);class Dy{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),My)}resolve(e){return e?this.table[e]||(this.table[e]=Ey(this.extra,e)):0}}const UA=new Dy(wf);function ic(s,e){wm.indexOf(s)>-1||(wm.push(s),console.warn(e))}function Ey(s,e){let t=[];for(let l of e.split(" ")){let a=[];for(let c of l.split(".")){let u=s[c]||Me[c];u?typeof u=="function"?a.length?a=a.map(u):ic(c,`Modifier ${c} used at start of tag`):a.length?ic(c,`Tag ${c} used as modifier`):a=Array.isArray(u)?u:[u]:ic(c,`Unknown highlighting tag ${c}`)}for(let c of a)t.push(c)}if(!t.length)return 0;let i=e.replace(/ /g,"_"),n=i+" "+t.map(l=>l.id),r=Sm[n];if(r)return r.id;let o=Sm[n]=As.define({id:Io.length,name:i,props:[W3({[i]:t})]});return Io.push(o),o.id}function HA(s,e){let t=As.define({id:Io.length,name:"Document",props:[er.add(()=>s),cy.add(()=>i=>e.getIndent(i))],top:!0});return Io.push(t),t}Ct.RTL,Ct.LTR;const WA=s=>{let{state:e}=s,t=e.doc.lineAt(e.selection.main.from),i=Cf(s.state,t.from);return i.line?qA(s):i.block?GA(s):!1};function Sf(s,e){return({state:t,dispatch:i})=>{if(t.readOnly)return!1;let n=s(e,t);return n?(i(t.update(n)),!0):!1}}const qA=Sf(QA,0),KA=Sf(Ty,0),GA=Sf((s,e)=>Ty(s,e,YA(e)),0);function Cf(s,e){let t=s.languageDataAt("commentTokens",e,1);return t.length?t[0]:{}}const Gr=50;function JA(s,{open:e,close:t},i,n){let r=s.sliceDoc(i-Gr,i),o=s.sliceDoc(n,n+Gr),l=/\s*$/.exec(r)[0].length,a=/^\s*/.exec(o)[0].length,c=r.length-l;if(r.slice(c-e.length,c)==e&&o.slice(a,a+t.length)==t)return{open:{pos:i-l,margin:l&&1},close:{pos:n+a,margin:a&&1}};let u,d;n-i<=2*Gr?u=d=s.sliceDoc(i,n):(u=s.sliceDoc(i,i+Gr),d=s.sliceDoc(n-Gr,n));let h=/^\s*/.exec(u)[0].length,p=/\s*$/.exec(d)[0].length,g=d.length-p-t.length;return u.slice(h,h+e.length)==e&&d.slice(g,g+t.length)==t?{open:{pos:i+h+e.length,margin:/\s/.test(u.charAt(h+e.length))?1:0},close:{pos:n-p-t.length,margin:/\s/.test(d.charAt(g-1))?1:0}}:null}function YA(s){let e=[];for(let t of s.selection.ranges){let i=s.doc.lineAt(t.from),n=t.to<=i.to?i:s.doc.lineAt(t.to);n.from>i.from&&n.from==t.to&&(n=t.to==i.to+1?i:s.doc.lineAt(t.to-1));let r=e.length-1;r>=0&&e[r].to>i.from?e[r].to=n.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:n.to})}return e}function Ty(s,e,t=e.selection.ranges){let i=t.map(r=>Cf(e,r.from).block);if(!i.every(r=>r))return null;let n=t.map((r,o)=>JA(e,i[o],r.from,r.to));if(s!=2&&!n.every(r=>r))return{changes:e.changes(t.map((r,o)=>n[o]?[]:[{from:r.from,insert:i[o].open+" "},{from:r.to,insert:" "+i[o].close}]))};if(s!=1&&n.some(r=>r)){let r=[];for(let o=0,l;o<n.length;o++)if(l=n[o]){let a=i[o],{open:c,close:u}=l;r.push({from:c.pos-a.open.length,to:c.pos+c.margin},{from:u.pos-u.margin,to:u.pos+a.close.length})}return{changes:r}}return null}function QA(s,e,t=e.selection.ranges){let i=[],n=-1;for(let{from:r,to:o}of t){let l=i.length,a=1e9,c=Cf(e,r).line;if(c){for(let u=r;u<=o;){let d=e.doc.lineAt(u);if(d.from>n&&(r==o||o>d.from)){n=d.from;let h=/^\s*/.exec(d.text)[0].length,p=h==d.length,g=d.text.slice(h,h+c.length)==c?h:-1;h<d.text.length&&h<a&&(a=h),i.push({line:d,comment:g,token:c,indent:h,empty:p,single:!1})}u=d.to+1}if(a<1e9)for(let u=l;u<i.length;u++)i[u].indent<i[u].line.text.length&&(i[u].indent=a);i.length==l+1&&(i[l].single=!0)}}if(s!=2&&i.some(r=>r.comment<0&&(!r.empty||r.single))){let r=[];for(let{line:l,token:a,indent:c,empty:u,single:d}of i)(d||!u)&&r.push({from:l.from+c,insert:a+" "});let o=e.changes(r);return{changes:o,selection:e.selection.map(o,1)}}else if(s!=1&&i.some(r=>r.comment>=0)){let r=[];for(let{line:o,comment:l,token:a}of i)if(l>=0){let c=o.from+l,u=c+a.length;o.text[u-o.from]==" "&&u++,r.push({from:c,to:u})}return{changes:r}}return null}const bd=Fi.define(),XA=Fi.define(),ZA=Oe.define(),Oy=Oe.define({combine(s){return xi(s,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(i,n)=>e(i,n)||t(i,n)})}}),jy=Yt.define({create(){return vi.empty},update(s,e){let t=e.state.facet(Oy),i=e.annotation(bd);if(i){let a=Cs.fromTransaction(e,i.selection),c=i.side,u=c==0?s.undone:s.done;return a?u=ja(u,u.length,t.minDepth,a):u=Ry(u,e.startState.selection),new vi(c==0?i.rest:u,c==0?u:i.rest)}let n=e.annotation(XA);if((n=="full"||n=="before")&&(s=s.isolate()),e.annotation(Bt.addToHistory)===!1)return e.changes.empty?s:s.addMapping(e.changes.desc);let r=Cs.fromTransaction(e),o=e.annotation(Bt.time),l=e.annotation(Bt.userEvent);return r?s=s.addChanges(r,o,l,t,e):e.selection&&(s=s.addSelection(e.startState.selection,o,l,t.newGroupDelay)),(n=="full"||n=="after")&&(s=s.isolate()),s},toJSON(s){return{done:s.done.map(e=>e.toJSON()),undone:s.undone.map(e=>e.toJSON())}},fromJSON(s){return new vi(s.done.map(Cs.fromJSON),s.undone.map(Cs.fromJSON))}});function eM(s={}){return[jy,Oy.of(s),Te.domEventHandlers({beforeinput(e,t){let i=e.inputType=="historyUndo"?Py:e.inputType=="historyRedo"?kd:null;return i?(e.preventDefault(),i(t)):!1}})]}function pu(s,e){return function({state:t,dispatch:i}){if(!e&&t.readOnly)return!1;let n=t.field(jy,!1);if(!n)return!1;let r=n.pop(s,t,e);return r?(i(r),!0):!1}}const Py=pu(0,!1),kd=pu(1,!1),tM=pu(0,!0),sM=pu(1,!0);class Cs{constructor(e,t,i,n,r){this.changes=e,this.effects=t,this.mapped=i,this.startSelection=n,this.selectionsAfter=r}setSelAfter(e){return new Cs(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(n=>n.toJSON())}}static fromJSON(e){return new Cs(e.changes&&Vt.fromJSON(e.changes),[],e.mapped&&bi.fromJSON(e.mapped),e.startSelection&&fe.fromJSON(e.startSelection),e.selectionsAfter.map(fe.fromJSON))}static fromTransaction(e,t){let i=Ls;for(let n of e.startState.facet(ZA)){let r=n(e);r.length&&(i=i.concat(r))}return!i.length&&e.changes.empty?null:new Cs(e.changes.invert(e.startState.doc),i,void 0,t||e.startState.selection,Ls)}static selection(e){return new Cs(void 0,Ls,void 0,void 0,e)}}function ja(s,e,t,i){let n=e+1>t+20?e-t-1:0,r=s.slice(n,e);return r.push(i),r}function iM(s,e){let t=[],i=!1;return s.iterChangedRanges((n,r)=>t.push(n,r)),e.iterChangedRanges((n,r,o,l)=>{for(let a=0;a<t.length;){let c=t[a++],u=t[a++];l>=c&&o<=u&&(i=!0)}}),i}function nM(s,e){return s.ranges.length==e.ranges.length&&s.ranges.filter((t,i)=>t.empty!=e.ranges[i].empty).length===0}function $y(s,e){return s.length?e.length?s.concat(e):s:e}const Ls=[],rM=200;function Ry(s,e){if(s.length){let t=s[s.length-1],i=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-rM));return i.length&&i[i.length-1].eq(e)?s:(i.push(e),ja(s,s.length-1,1e9,t.setSelAfter(i)))}else return[Cs.selection([e])]}function oM(s){let e=s[s.length-1],t=s.slice();return t[s.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function nc(s,e){if(!s.length)return s;let t=s.length,i=Ls;for(;t;){let n=lM(s[t-1],e,i);if(n.changes&&!n.changes.empty||n.effects.length){let r=s.slice(0,t);return r[t-1]=n,r}else e=n.mapped,t--,i=n.selectionsAfter}return i.length?[Cs.selection(i)]:Ls}function lM(s,e,t){let i=$y(s.selectionsAfter.length?s.selectionsAfter.map(l=>l.map(e)):Ls,t);if(!s.changes)return Cs.selection(i);let n=s.changes.map(e),r=e.mapDesc(s.changes,!0),o=s.mapped?s.mapped.composeDesc(r):r;return new Cs(n,Ye.mapEffects(s.effects,e),o,s.startSelection.map(r),i)}const aM=/^(input\.type|delete)($|\.)/;class vi{constructor(e,t,i=0,n=void 0){this.done=e,this.undone=t,this.prevTime=i,this.prevUserEvent=n}isolate(){return this.prevTime?new vi(this.done,this.undone):this}addChanges(e,t,i,n,r){let o=this.done,l=o[o.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!i||aM.test(i))&&(!l.selectionsAfter.length&&t-this.prevTime<n.newGroupDelay&&n.joinToEvent(r,iM(l.changes,e.changes))||i=="input.type.compose")?o=ja(o,o.length-1,n.minDepth,new Cs(e.changes.compose(l.changes),$y(Ye.mapEffects(e.effects,l.changes),l.effects),l.mapped,l.startSelection,Ls)):o=ja(o,o.length,n.minDepth,e),new vi(o,Ls,t,i)}addSelection(e,t,i,n){let r=this.done.length?this.done[this.done.length-1].selectionsAfter:Ls;return r.length>0&&t-this.prevTime<n&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&nM(r[r.length-1],e)?this:new vi(Ry(this.done,e),this.undone,t,i)}addMapping(e){return new vi(nc(this.done,e),nc(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,i){let n=e==0?this.done:this.undone;if(n.length==0)return null;let r=n[n.length-1],o=r.selectionsAfter[0]||t.selection;if(i&&r.selectionsAfter.length)return t.update({selection:r.selectionsAfter[r.selectionsAfter.length-1],annotations:bd.of({side:e,rest:oM(n),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(r.changes){let l=n.length==1?Ls:n.slice(0,n.length-1);return r.mapped&&(l=nc(l,r.mapped)),t.update({changes:r.changes,selection:r.startSelection,effects:r.effects,annotations:bd.of({side:e,rest:l,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}vi.empty=new vi(Ls,Ls);const uM=[{key:"Mod-z",run:Py,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:kd,preventDefault:!0},{linux:"Ctrl-Shift-z",run:kd,preventDefault:!0},{key:"Mod-u",run:tM,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:sM,preventDefault:!0}];function Or(s,e){return fe.create(s.ranges.map(e),s.mainIndex)}function si(s,e){return s.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function ii({state:s,dispatch:e},t){let i=Or(s.selection,t);return i.eq(s.selection,!0)?!1:(e(si(s,i)),!0)}function mu(s,e){return fe.cursor(e?s.to:s.from)}function Ly(s,e){return ii(s,t=>t.empty?s.moveByChar(t,e):mu(t,e))}function as(s){return s.textDirectionAt(s.state.selection.main.head)==Ct.LTR}const Vy=s=>Ly(s,!as(s)),By=s=>Ly(s,as(s));function Iy(s,e){return ii(s,t=>t.empty?s.moveByGroup(t,e):mu(t,e))}const cM=s=>Iy(s,!as(s)),dM=s=>Iy(s,as(s));function fM(s,e,t){if(e.type.prop(t))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(s.sliceDoc(e.from,e.to)))||e.firstChild}function gu(s,e,t){let i=ls(s).resolveInner(e.head),n=t?Xe.closedBy:Xe.openedBy;for(let a=e.head;;){let c=t?i.childAfter(a):i.childBefore(a);if(!c)break;fM(s,c,n)?i=c:a=t?c.to:c.from}let r=i.type.prop(n),o,l;return r&&(o=t?gi(s,i.from,1):gi(s,i.to,-1))&&o.matched?l=t?o.end.to:o.end.from:l=t?i.to:i.from,fe.cursor(l,t?-1:1)}const hM=s=>ii(s,e=>gu(s.state,e,!as(s))),pM=s=>ii(s,e=>gu(s.state,e,as(s)));function Ny(s,e){return ii(s,t=>{if(!t.empty)return mu(t,e);let i=s.moveVertically(t,e);return i.head!=t.head?i:s.moveToLineBoundary(t,e)})}const Fy=s=>Ny(s,!1),zy=s=>Ny(s,!0);function Uy(s){let e=s.scrollDOM.clientHeight<s.scrollDOM.scrollHeight-2,t=0,i=0,n;if(e){for(let r of s.state.facet(Te.scrollMargins)){let o=r(s);o?.top&&(t=Math.max(o?.top,t)),o?.bottom&&(i=Math.max(o?.bottom,i))}n=s.scrollDOM.clientHeight-t-i}else n=(s.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:i,selfScroll:e,height:Math.max(s.defaultLineHeight,n-5)}}function Hy(s,e){let t=Uy(s),{state:i}=s,n=Or(i.selection,o=>o.empty?s.moveVertically(o,e,t.height):mu(o,e));if(n.eq(i.selection))return!1;let r;if(t.selfScroll){let o=s.coordsAtPos(i.selection.main.head),l=s.scrollDOM.getBoundingClientRect(),a=l.top+t.marginTop,c=l.bottom-t.marginBottom;o&&o.top>a&&o.bottom<c&&(r=Te.scrollIntoView(n.main.head,{y:"start",yMargin:o.top-a}))}return s.dispatch(si(i,n),{effects:r}),!0}const Cm=s=>Hy(s,!1),xd=s=>Hy(s,!0);function hn(s,e,t){let i=s.lineBlockAt(e.head),n=s.moveToLineBoundary(e,t);if(n.head==e.head&&n.head!=(t?i.to:i.from)&&(n=s.moveToLineBoundary(e,t,!1)),!t&&n.head==i.from&&i.length){let r=/^\s*/.exec(s.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;r&&e.head!=i.from+r&&(n=fe.cursor(i.from+r))}return n}const mM=s=>ii(s,e=>hn(s,e,!0)),gM=s=>ii(s,e=>hn(s,e,!1)),vM=s=>ii(s,e=>hn(s,e,!as(s))),yM=s=>ii(s,e=>hn(s,e,as(s))),bM=s=>ii(s,e=>fe.cursor(s.lineBlockAt(e.head).from,1)),kM=s=>ii(s,e=>fe.cursor(s.lineBlockAt(e.head).to,-1));function xM(s,e,t){let i=!1,n=Or(s.selection,r=>{let o=gi(s,r.head,-1)||gi(s,r.head,1)||r.head>0&&gi(s,r.head-1,1)||r.head<s.doc.length&&gi(s,r.head+1,-1);if(!o||!o.end)return r;i=!0;let l=o.start.from==r.head?o.end.to:o.end.from;return fe.cursor(l)});return i?(e(si(s,n)),!0):!1}const wM=({state:s,dispatch:e})=>xM(s,e);function Ws(s,e){let t=Or(s.state.selection,i=>{let n=e(i);return fe.range(i.anchor,n.head,n.goalColumn,n.bidiLevel||void 0)});return t.eq(s.state.selection)?!1:(s.dispatch(si(s.state,t)),!0)}function Wy(s,e){return Ws(s,t=>s.moveByChar(t,e))}const qy=s=>Wy(s,!as(s)),Ky=s=>Wy(s,as(s));function Gy(s,e){return Ws(s,t=>s.moveByGroup(t,e))}const SM=s=>Gy(s,!as(s)),CM=s=>Gy(s,as(s)),_M=s=>Ws(s,e=>gu(s.state,e,!as(s))),AM=s=>Ws(s,e=>gu(s.state,e,as(s)));function Jy(s,e){return Ws(s,t=>s.moveVertically(t,e))}const Yy=s=>Jy(s,!1),Qy=s=>Jy(s,!0);function Xy(s,e){return Ws(s,t=>s.moveVertically(t,e,Uy(s).height))}const _m=s=>Xy(s,!1),Am=s=>Xy(s,!0),MM=s=>Ws(s,e=>hn(s,e,!0)),DM=s=>Ws(s,e=>hn(s,e,!1)),EM=s=>Ws(s,e=>hn(s,e,!as(s))),TM=s=>Ws(s,e=>hn(s,e,as(s))),OM=s=>Ws(s,e=>fe.cursor(s.lineBlockAt(e.head).from)),jM=s=>Ws(s,e=>fe.cursor(s.lineBlockAt(e.head).to)),Mm=({state:s,dispatch:e})=>(e(si(s,{anchor:0})),!0),Dm=({state:s,dispatch:e})=>(e(si(s,{anchor:s.doc.length})),!0),Em=({state:s,dispatch:e})=>(e(si(s,{anchor:s.selection.main.anchor,head:0})),!0),Tm=({state:s,dispatch:e})=>(e(si(s,{anchor:s.selection.main.anchor,head:s.doc.length})),!0),PM=({state:s,dispatch:e})=>(e(s.update({selection:{anchor:0,head:s.doc.length},userEvent:"select"})),!0),$M=({state:s,dispatch:e})=>{let t=vu(s).map(({from:i,to:n})=>fe.range(i,Math.min(n+1,s.doc.length)));return e(s.update({selection:fe.create(t),userEvent:"select"})),!0},RM=({state:s,dispatch:e})=>{let t=Or(s.selection,i=>{let n=ls(s),r=n.resolveStack(i.from,1);if(i.empty){let o=n.resolveStack(i.from,-1);o.node.from>=r.node.from&&o.node.to<=r.node.to&&(r=o)}for(let o=r;o;o=o.next){let{node:l}=o;if((l.from<i.from&&l.to>=i.to||l.to>i.to&&l.from<=i.from)&&o.next)return fe.range(l.to,l.from)}return i});return t.eq(s.selection)?!1:(e(si(s,t)),!0)};function Zy(s,e){let{state:t}=s,i=t.selection,n=t.selection.ranges.slice();for(let r of t.selection.ranges){let o=t.doc.lineAt(r.head);if(e?o.to<s.state.doc.length:o.from>0)for(let l=r;;){let a=s.moveVertically(l,e);if(a.head<o.from||a.head>o.to){n.some(c=>c.head==a.head)||n.push(a);break}else{if(a.head==l.head)break;l=a}}}return n.length==i.ranges.length?!1:(s.dispatch(si(t,fe.create(n,n.length-1))),!0)}const LM=s=>Zy(s,!1),VM=s=>Zy(s,!0),BM=({state:s,dispatch:e})=>{let t=s.selection,i=null;return t.ranges.length>1?i=fe.create([t.main]):t.main.empty||(i=fe.create([fe.cursor(t.main.head)])),i?(e(si(s,i)),!0):!1};function tl(s,e){if(s.state.readOnly)return!1;let t="delete.selection",{state:i}=s,n=i.changeByRange(r=>{let{from:o,to:l}=r;if(o==l){let a=e(r);a<o?(t="delete.backward",a=zl(s,a,!1)):a>o&&(t="delete.forward",a=zl(s,a,!0)),o=Math.min(o,a),l=Math.max(l,a)}else o=zl(s,o,!1),l=zl(s,l,!0);return o==l?{range:r}:{changes:{from:o,to:l},range:fe.cursor(o,o<r.head?-1:1)}});return n.changes.empty?!1:(s.dispatch(i.update(n,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?Te.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function zl(s,e,t){if(s instanceof Te)for(let i of s.state.facet(Te.atomicRanges).map(n=>n(s)))i.between(e,e,(n,r)=>{n<e&&r>e&&(e=t?r:n)});return e}const eb=(s,e,t)=>tl(s,i=>{let n=i.from,{state:r}=s,o=r.doc.lineAt(n),l,a;if(t&&!e&&n>o.from&&n<o.from+200&&!/[^ \t]/.test(l=o.text.slice(0,n-o.from))){if(l[l.length-1]=="	")return n-1;let c=Tr(l,r.tabSize),u=c%Fn(r)||Fn(r);for(let d=0;d<u&&l[l.length-1-d]==" ";d++)n--;a=n}else a=Jt(o.text,n-o.from,e,e)+o.from,a==n&&o.number!=(e?r.doc.lines:1)?a+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(a-o.from,n-o.from))&&(a=Jt(o.text,a-o.from,!1,!1)+o.from);return a}),wd=s=>eb(s,!1,!0),tb=s=>eb(s,!0,!1),sb=(s,e)=>tl(s,t=>{let i=t.head,{state:n}=s,r=n.doc.lineAt(i),o=n.charCategorizer(i);for(let l=null;;){if(i==(e?r.to:r.from)){i==t.head&&r.number!=(e?n.doc.lines:1)&&(i+=e?1:-1);break}let a=Jt(r.text,i-r.from,e)+r.from,c=r.text.slice(Math.min(i,a)-r.from,Math.max(i,a)-r.from),u=o(c);if(l!=null&&u!=l)break;(c!=" "||i!=t.head)&&(l=u),i=a}return i}),ib=s=>sb(s,!1),IM=s=>sb(s,!0),NM=s=>tl(s,e=>{let t=s.lineBlockAt(e.head).to;return e.head<t?t:Math.min(s.state.doc.length,e.head+1)}),FM=s=>tl(s,e=>{let t=s.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),zM=s=>tl(s,e=>{let t=s.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(s.state.doc.length,e.head+1)}),UM=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let t=s.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:it.of(["",""])},range:fe.cursor(i.from)}));return e(s.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},HM=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let t=s.changeByRange(i=>{if(!i.empty||i.from==0||i.from==s.doc.length)return{range:i};let n=i.from,r=s.doc.lineAt(n),o=n==r.from?n-1:Jt(r.text,n-r.from,!1)+r.from,l=n==r.to?n+1:Jt(r.text,n-r.from,!0)+r.from;return{changes:{from:o,to:l,insert:s.doc.slice(n,l).append(s.doc.slice(o,n))},range:fe.cursor(l)}});return t.changes.empty?!1:(e(s.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function vu(s){let e=[],t=-1;for(let i of s.selection.ranges){let n=s.doc.lineAt(i.from),r=s.doc.lineAt(i.to);if(!i.empty&&i.to==r.from&&(r=s.doc.lineAt(i.to-1)),t>=n.number){let o=e[e.length-1];o.to=r.to,o.ranges.push(i)}else e.push({from:n.from,to:r.to,ranges:[i]});t=r.number+1}return e}function nb(s,e,t){if(s.readOnly)return!1;let i=[],n=[];for(let r of vu(s)){if(t?r.to==s.doc.length:r.from==0)continue;let o=s.doc.lineAt(t?r.to+1:r.from-1),l=o.length+1;if(t){i.push({from:r.to,to:o.to},{from:r.from,insert:o.text+s.lineBreak});for(let a of r.ranges)n.push(fe.range(Math.min(s.doc.length,a.anchor+l),Math.min(s.doc.length,a.head+l)))}else{i.push({from:o.from,to:r.from},{from:r.to,insert:s.lineBreak+o.text});for(let a of r.ranges)n.push(fe.range(a.anchor-l,a.head-l))}}return i.length?(e(s.update({changes:i,scrollIntoView:!0,selection:fe.create(n,s.selection.mainIndex),userEvent:"move.line"})),!0):!1}const WM=({state:s,dispatch:e})=>nb(s,e,!1),qM=({state:s,dispatch:e})=>nb(s,e,!0);function rb(s,e,t){if(s.readOnly)return!1;let i=[];for(let n of vu(s))t?i.push({from:n.from,insert:s.doc.slice(n.from,n.to)+s.lineBreak}):i.push({from:n.to,insert:s.lineBreak+s.doc.slice(n.from,n.to)});return e(s.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const KM=({state:s,dispatch:e})=>rb(s,e,!1),GM=({state:s,dispatch:e})=>rb(s,e,!0),JM=s=>{if(s.state.readOnly)return!1;let{state:e}=s,t=e.changes(vu(e).map(({from:n,to:r})=>(n>0?n--:r<e.doc.length&&r++,{from:n,to:r}))),i=Or(e.selection,n=>{let r;if(s.lineWrapping){let o=s.lineBlockAt(n.head),l=s.coordsAtPos(n.head,n.assoc||1);l&&(r=o.bottom+s.documentTop-l.bottom+s.defaultLineHeight/2)}return s.moveVertically(n,!0,r)}).map(t);return s.dispatch({changes:t,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function YM(s,e){if(/\(\)|\[\]|\{\}/.test(s.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=ls(s).resolveInner(e),i=t.childBefore(e),n=t.childAfter(e),r;return i&&n&&i.to<=e&&n.from>=e&&(r=i.type.prop(Xe.closedBy))&&r.indexOf(n.name)>-1&&s.doc.lineAt(i.to).from==s.doc.lineAt(n.from).from&&!/\S/.test(s.sliceDoc(i.to,n.from))?{from:i.to,to:n.from}:null}const Om=ob(!1),QM=ob(!0);function ob(s){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange(n=>{let{from:r,to:o}=n,l=e.doc.lineAt(r),a=!s&&r==o&&YM(e,r);s&&(r=o=(o<=l.to?l:e.doc.lineAt(o)).to);let c=new fu(e,{simulateBreak:r,simulateDoubleBreak:!!a}),u=yf(c,r);for(u==null&&(u=Tr(/^\s*/.exec(e.doc.lineAt(r).text)[0],e.tabSize));o<l.to&&/\s/.test(l.text[o-l.from]);)o++;a?{from:r,to:o}=a:r>l.from&&r<l.from+100&&!/\S/.test(l.text.slice(0,r))&&(r=l.from);let d=["",Bo(e,u)];return a&&d.push(Bo(e,c.lineIndent(l.from,-1))),{changes:{from:r,to:o,insert:it.of(d)},range:fe.cursor(r+1+d[1].length)}});return t(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function _f(s,e){let t=-1;return s.changeByRange(i=>{let n=[];for(let o=i.from;o<=i.to;){let l=s.doc.lineAt(o);l.number>t&&(i.empty||i.to>l.from)&&(e(l,n,i),t=l.number),o=l.to+1}let r=s.changes(n);return{changes:n,range:fe.range(r.mapPos(i.anchor,1),r.mapPos(i.head,1))}})}const XM=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let t=Object.create(null),i=new fu(s,{overrideIndentation:r=>{let o=t[r];return o??-1}}),n=_f(s,(r,o,l)=>{let a=yf(i,r.from);if(a==null)return;/\S/.test(r.text)||(a=0);let c=/^\s*/.exec(r.text)[0],u=Bo(s,a);(c!=u||l.from<r.from+c.length)&&(t[r.from]=a,o.push({from:r.from,to:r.from+c.length,insert:u}))});return n.changes.empty||e(s.update(n,{userEvent:"indent"})),!0},ZM=({state:s,dispatch:e})=>s.readOnly?!1:(e(s.update(_f(s,(t,i)=>{i.push({from:t.from,insert:s.facet(vf)})}),{userEvent:"input.indent"})),!0),eD=({state:s,dispatch:e})=>s.readOnly?!1:(e(s.update(_f(s,(t,i)=>{let n=/^\s*/.exec(t.text)[0];if(!n)return;let r=Tr(n,s.tabSize),o=0,l=Bo(s,Math.max(0,r-Fn(s)));for(;o<n.length&&o<l.length&&n.charCodeAt(o)==l.charCodeAt(o);)o++;i.push({from:t.from+o,to:t.from+n.length,insert:l.slice(o)})}),{userEvent:"delete.dedent"})),!0),tD=s=>(s.setTabFocusMode(),!0),sD=[{key:"Ctrl-b",run:Vy,shift:qy,preventDefault:!0},{key:"Ctrl-f",run:By,shift:Ky},{key:"Ctrl-p",run:Fy,shift:Yy},{key:"Ctrl-n",run:zy,shift:Qy},{key:"Ctrl-a",run:bM,shift:OM},{key:"Ctrl-e",run:kM,shift:jM},{key:"Ctrl-d",run:tb},{key:"Ctrl-h",run:wd},{key:"Ctrl-k",run:NM},{key:"Ctrl-Alt-h",run:ib},{key:"Ctrl-o",run:UM},{key:"Ctrl-t",run:HM},{key:"Ctrl-v",run:xd}],iD=[{key:"ArrowLeft",run:Vy,shift:qy,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:cM,shift:SM,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:vM,shift:EM,preventDefault:!0},{key:"ArrowRight",run:By,shift:Ky,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:dM,shift:CM,preventDefault:!0},{mac:"Cmd-ArrowRight",run:yM,shift:TM,preventDefault:!0},{key:"ArrowUp",run:Fy,shift:Yy,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Mm,shift:Em},{mac:"Ctrl-ArrowUp",run:Cm,shift:_m},{key:"ArrowDown",run:zy,shift:Qy,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Dm,shift:Tm},{mac:"Ctrl-ArrowDown",run:xd,shift:Am},{key:"PageUp",run:Cm,shift:_m},{key:"PageDown",run:xd,shift:Am},{key:"Home",run:gM,shift:DM,preventDefault:!0},{key:"Mod-Home",run:Mm,shift:Em},{key:"End",run:mM,shift:MM,preventDefault:!0},{key:"Mod-End",run:Dm,shift:Tm},{key:"Enter",run:Om,shift:Om},{key:"Mod-a",run:PM},{key:"Backspace",run:wd,shift:wd,preventDefault:!0},{key:"Delete",run:tb,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:ib,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:IM,preventDefault:!0},{mac:"Mod-Backspace",run:FM,preventDefault:!0},{mac:"Mod-Delete",run:zM,preventDefault:!0}].concat(sD.map(s=>({mac:s.key,run:s.run,shift:s.shift}))),nD=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:hM,shift:_M},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:pM,shift:AM},{key:"Alt-ArrowUp",run:WM},{key:"Shift-Alt-ArrowUp",run:KM},{key:"Alt-ArrowDown",run:qM},{key:"Shift-Alt-ArrowDown",run:GM},{key:"Mod-Alt-ArrowUp",run:LM},{key:"Mod-Alt-ArrowDown",run:VM},{key:"Escape",run:BM},{key:"Mod-Enter",run:QM},{key:"Alt-l",mac:"Ctrl-l",run:$M},{key:"Mod-i",run:RM,preventDefault:!0},{key:"Mod-[",run:eD},{key:"Mod-]",run:ZM},{key:"Mod-Alt-\\",run:XM},{key:"Shift-Mod-k",run:JM},{key:"Shift-Mod-\\",run:wM},{key:"Mod-/",run:WA},{key:"Alt-A",run:KA},{key:"Ctrl-m",mac:"Shift-Alt-m",run:tD}].concat(iD),jm=typeof String.prototype.normalize=="function"?s=>s.normalize("NFKD"):s=>s;class Cr{constructor(e,t,i=0,n=e.length,r,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,n),this.bufferStart=i,this.normalize=r?l=>r(jm(l)):jm,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return xs(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=Yd(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=pi(e);let n=this.normalize(t);if(n.length)for(let r=0,o=i;;r++){let l=n.charCodeAt(r),a=this.match(l,o,this.bufferPos+this.bufferStart);if(r==n.length-1){if(a)return this.value=a,this;break}o==i&&r<t.length&&t.charCodeAt(r)==l&&o++}}}match(e,t,i){let n=null;for(let r=0;r<this.matches.length;r+=2){let o=this.matches[r],l=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?n={from:this.matches[r+1],to:i}:(this.matches[r]++,l=!0)),l||(this.matches.splice(r,2),r-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?n={from:t,to:i}:this.matches.push(1,t)),n&&this.test&&!this.test(n.from,n.to,this.buffer,this.bufferStart)&&(n=null),n}}typeof Symbol<"u"&&(Cr.prototype[Symbol.iterator]=function(){return this});const lb={from:-1,to:-1,match:/.*/.exec("")},Af="gm"+(/x/.unicode==null?"":"u");class ab{constructor(e,t,i,n=0,r=e.length){if(this.text=e,this.to=r,this.curLine="",this.done=!1,this.value=lb,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new ub(e,t,i,n,r);this.re=new RegExp(t,Af+(i?.ignoreCase?"i":"")),this.test=i?.test,this.iter=e.iter();let o=e.lineAt(n);this.curLineStart=o.from,this.matchPos=Pa(e,n),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let i=this.curLineStart+t.index,n=i+t[0].length;if(this.matchPos=Pa(this.text,n+(i==n?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<n||i>this.value.to)&&(!this.test||this.test(i,n,t)))return this.value={from:i,to:n,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const rc=new WeakMap;class fr{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,i){let n=rc.get(e);if(!n||n.from>=i||n.to<=t){let l=new fr(t,e.sliceString(t,i));return rc.set(e,l),l}if(n.from==t&&n.to==i)return n;let{text:r,from:o}=n;return o>t&&(r=e.sliceString(t,o)+r,o=t),n.to<i&&(r+=e.sliceString(n.to,i)),rc.set(e,new fr(o,r)),new fr(t,r.slice(t-o,i-o))}}class ub{constructor(e,t,i,n,r){this.text=e,this.to=r,this.done=!1,this.value=lb,this.matchPos=Pa(e,n),this.re=new RegExp(t,Af+(i?.ignoreCase?"i":"")),this.test=i?.test,this.flat=fr.get(e,n,this.chunkEnd(n+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let i=this.flat.from+t.index,n=i+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,n,t)))return this.value={from:i,to:n,match:t},this.matchPos=Pa(this.text,n+(i==n?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=fr.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(ab.prototype[Symbol.iterator]=ub.prototype[Symbol.iterator]=function(){return this});function rD(s){try{return new RegExp(s,Af),!0}catch{return!1}}function Pa(s,e){if(e>=s.length)return e;let t=s.lineAt(e),i;for(;e<t.to&&(i=t.text.charCodeAt(e-t.from))>=56320&&i<57344;)e++;return e}function Sd(s){let e=String(s.state.doc.lineAt(s.state.selection.main.head).number),t=mt("input",{class:"cm-textfield",name:"line",value:e}),i=mt("form",{class:"cm-gotoLine",onkeydown:r=>{r.keyCode==27?(r.preventDefault(),s.dispatch({effects:go.of(!1)}),s.focus()):r.keyCode==13&&(r.preventDefault(),n())},onsubmit:r=>{r.preventDefault(),n()}},mt("label",s.state.phrase("Go to line"),": ",t)," ",mt("button",{class:"cm-button",type:"submit"},s.state.phrase("go")),mt("button",{name:"close",onclick:()=>{s.dispatch({effects:go.of(!1)}),s.focus()},"aria-label":s.state.phrase("close"),type:"button"},[""]));function n(){let r=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!r)return;let{state:o}=s,l=o.doc.lineAt(o.selection.main.head),[,a,c,u,d]=r,h=u?+u.slice(1):0,p=c?+c:l.number;if(c&&d){let m=p/100;a&&(m=m*(a=="-"?-1:1)+l.number/o.doc.lines),p=Math.round(o.doc.lines*m)}else c&&a&&(p=p*(a=="-"?-1:1)+l.number);let g=o.doc.line(Math.max(1,Math.min(o.doc.lines,p))),k=fe.cursor(g.from+Math.max(0,Math.min(h,g.length)));s.dispatch({effects:[go.of(!1),Te.scrollIntoView(k.from,{y:"center"})],selection:k}),s.focus()}return{dom:i}}const go=Ye.define(),Pm=Yt.define({create(){return!0},update(s,e){for(let t of e.effects)t.is(go)&&(s=t.value);return s},provide:s=>Ro.from(s,e=>e?Sd:null)}),oD=s=>{let e=$o(s,Sd);if(!e){let t=[go.of(!0)];s.state.field(Pm,!1)==null&&t.push(Ye.appendConfig.of([Pm,lD])),s.dispatch({effects:t}),e=$o(s,Sd)}return e&&e.dom.querySelector("input").select(),!0},lD=Te.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),aD={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},uD=Oe.define({combine(s){return xi(s,aD,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function cD(s){return[mD,pD]}const dD=Fe.mark({class:"cm-selectionMatch"}),fD=Fe.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function $m(s,e,t,i){return(t==0||s(e.sliceDoc(t-1,t))!=_t.Word)&&(i==e.doc.length||s(e.sliceDoc(i,i+1))!=_t.Word)}function hD(s,e,t,i){return s(e.sliceDoc(t,t+1))==_t.Word&&s(e.sliceDoc(i-1,i))==_t.Word}const pD=$t.fromClass(class{constructor(s){this.decorations=this.getDeco(s)}update(s){(s.selectionSet||s.docChanged||s.viewportChanged)&&(this.decorations=this.getDeco(s.view))}getDeco(s){let e=s.state.facet(uD),{state:t}=s,i=t.selection;if(i.ranges.length>1)return Fe.none;let n=i.main,r,o=null;if(n.empty){if(!e.highlightWordAroundCursor)return Fe.none;let a=t.wordAt(n.head);if(!a)return Fe.none;o=t.charCategorizer(n.head),r=t.sliceDoc(a.from,a.to)}else{let a=n.to-n.from;if(a<e.minSelectionLength||a>200)return Fe.none;if(e.wholeWords){if(r=t.sliceDoc(n.from,n.to),o=t.charCategorizer(n.head),!($m(o,t,n.from,n.to)&&hD(o,t,n.from,n.to)))return Fe.none}else if(r=t.sliceDoc(n.from,n.to),!r)return Fe.none}let l=[];for(let a of s.visibleRanges){let c=new Cr(t.doc,r,a.from,a.to);for(;!c.next().done;){let{from:u,to:d}=c.value;if((!o||$m(o,t,u,d))&&(n.empty&&u<=n.from&&d>=n.to?l.push(fD.range(u,d)):(u>=n.to||d<=n.from)&&l.push(dD.range(u,d)),l.length>e.maxMatches))return Fe.none}}return Fe.set(l)}},{decorations:s=>s.decorations}),mD=Te.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),gD=({state:s,dispatch:e})=>{let{selection:t}=s,i=fe.create(t.ranges.map(n=>s.wordAt(n.head)||fe.cursor(n.head)),t.mainIndex);return i.eq(t)?!1:(e(s.update({selection:i})),!0)};function vD(s,e){let{main:t,ranges:i}=s.selection,n=s.wordAt(t.head),r=n&&n.from==t.from&&n.to==t.to;for(let o=!1,l=new Cr(s.doc,e,i[i.length-1].to);;)if(l.next(),l.done){if(o)return null;l=new Cr(s.doc,e,0,Math.max(0,i[i.length-1].from-1)),o=!0}else{if(o&&i.some(a=>a.from==l.value.from))continue;if(r){let a=s.wordAt(l.value.from);if(!a||a.from!=l.value.from||a.to!=l.value.to)continue}return l.value}}const yD=({state:s,dispatch:e})=>{let{ranges:t}=s.selection;if(t.some(r=>r.from===r.to))return gD({state:s,dispatch:e});let i=s.sliceDoc(t[0].from,t[0].to);if(s.selection.ranges.some(r=>s.sliceDoc(r.from,r.to)!=i))return!1;let n=vD(s,i);return n?(e(s.update({selection:s.selection.addRange(fe.range(n.from,n.to),!1),effects:Te.scrollIntoView(n.to)})),!0):!1},jr=Oe.define({combine(s){return xi(s,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new TD(e),scrollToMatch:e=>Te.scrollIntoView(e)})}});class cb{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||rD(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new wD(this):new kD(this)}getCursor(e,t=0,i){let n=e.doc?e:tt.create({doc:e});return i==null&&(i=n.doc.length),this.regexp?Qn(this,n,t,i):Yn(this,n,t,i)}}class db{constructor(e){this.spec=e}}function Yn(s,e,t,i){return new Cr(e.doc,s.unquoted,t,i,s.caseSensitive?void 0:n=>n.toLowerCase(),s.wholeWord?bD(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function bD(s,e){return(t,i,n,r)=>((r>t||r+n.length<i)&&(r=Math.max(0,t-2),n=s.sliceString(r,Math.min(s.length,i+2))),(e($a(n,t-r))!=_t.Word||e(Ra(n,t-r))!=_t.Word)&&(e(Ra(n,i-r))!=_t.Word||e($a(n,i-r))!=_t.Word))}class kD extends db{constructor(e){super(e)}nextMatch(e,t,i){let n=Yn(this.spec,e,i,e.doc.length).nextOverlapping();if(n.done){let r=Math.min(e.doc.length,t+this.spec.unquoted.length);n=Yn(this.spec,e,0,r).nextOverlapping()}return n.done||n.value.from==t&&n.value.to==i?null:n.value}prevMatchInRange(e,t,i){for(let n=i;;){let r=Math.max(t,n-1e4-this.spec.unquoted.length),o=Yn(this.spec,e,r,n),l=null;for(;!o.nextOverlapping().done;)l=o.value;if(l)return l;if(r==t)return null;n-=1e4}}prevMatch(e,t,i){let n=this.prevMatchInRange(e,0,t);return n||(n=this.prevMatchInRange(e,Math.max(0,i-this.spec.unquoted.length),e.doc.length)),n&&(n.from!=t||n.to!=i)?n:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let i=Yn(this.spec,e,0,e.doc.length),n=[];for(;!i.next().done;){if(n.length>=t)return null;n.push(i.value)}return n}highlight(e,t,i,n){let r=Yn(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!r.next().done;)n(r.value.from,r.value.to)}}function Qn(s,e,t,i){return new ab(e.doc,s.search,{ignoreCase:!s.caseSensitive,test:s.wholeWord?xD(e.charCategorizer(e.selection.main.head)):void 0},t,i)}function $a(s,e){return s.slice(Jt(s,e,!1),e)}function Ra(s,e){return s.slice(e,Jt(s,e))}function xD(s){return(e,t,i)=>!i[0].length||(s($a(i.input,i.index))!=_t.Word||s(Ra(i.input,i.index))!=_t.Word)&&(s(Ra(i.input,i.index+i[0].length))!=_t.Word||s($a(i.input,i.index+i[0].length))!=_t.Word)}class wD extends db{nextMatch(e,t,i){let n=Qn(this.spec,e,i,e.doc.length).next();return n.done&&(n=Qn(this.spec,e,0,t).next()),n.done?null:n.value}prevMatchInRange(e,t,i){for(let n=1;;n++){let r=Math.max(t,i-n*1e4),o=Qn(this.spec,e,r,i),l=null;for(;!o.next().done;)l=o.value;if(l&&(r==t||l.from>r+10))return l;if(r==t)return null}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(t,i)=>{if(i=="&")return e.match[0];if(i=="$")return"$";for(let n=i.length;n>0;n--){let r=+i.slice(0,n);if(r>0&&r<e.match.length)return e.match[r]+i.slice(n)}return t})}matchAll(e,t){let i=Qn(this.spec,e,0,e.doc.length),n=[];for(;!i.next().done;){if(n.length>=t)return null;n.push(i.value)}return n}highlight(e,t,i,n){let r=Qn(this.spec,e,Math.max(0,t-250),Math.min(i+250,e.doc.length));for(;!r.next().done;)n(r.value.from,r.value.to)}}const No=Ye.define(),Mf=Ye.define(),sn=Yt.define({create(s){return new oc(Cd(s).create(),null)},update(s,e){for(let t of e.effects)t.is(No)?s=new oc(t.value.create(),s.panel):t.is(Mf)&&(s=new oc(s.query,t.value?Df:null));return s},provide:s=>Ro.from(s,e=>e.panel)});class oc{constructor(e,t){this.query=e,this.panel=t}}const SD=Fe.mark({class:"cm-searchMatch"}),CD=Fe.mark({class:"cm-searchMatch cm-searchMatch-selected"}),_D=$t.fromClass(class{constructor(s){this.view=s,this.decorations=this.highlight(s.state.field(sn))}update(s){let e=s.state.field(sn);(e!=s.startState.field(sn)||s.docChanged||s.selectionSet||s.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:s,panel:e}){if(!e||!s.spec.valid)return Fe.none;let{view:t}=this,i=new Vi;for(let n=0,r=t.visibleRanges,o=r.length;n<o;n++){let{from:l,to:a}=r[n];for(;n<o-1&&a>r[n+1].from-500;)a=r[++n].to;s.highlight(t.state,l,a,(c,u)=>{let d=t.state.selection.ranges.some(h=>h.from==c&&h.to==u);i.add(c,u,d?CD:SD)})}return i.finish()}},{decorations:s=>s.decorations});function sl(s){return e=>{let t=e.state.field(sn,!1);return t&&t.query.spec.valid?s(e,t):pb(e)}}const La=sl((s,{query:e})=>{let{to:t}=s.state.selection.main,i=e.nextMatch(s.state,t,t);if(!i)return!1;let n=fe.single(i.from,i.to),r=s.state.facet(jr);return s.dispatch({selection:n,effects:[Ef(s,i),r.scrollToMatch(n.main,s)],userEvent:"select.search"}),hb(s),!0}),Va=sl((s,{query:e})=>{let{state:t}=s,{from:i}=t.selection.main,n=e.prevMatch(t,i,i);if(!n)return!1;let r=fe.single(n.from,n.to),o=s.state.facet(jr);return s.dispatch({selection:r,effects:[Ef(s,n),o.scrollToMatch(r.main,s)],userEvent:"select.search"}),hb(s),!0}),AD=sl((s,{query:e})=>{let t=e.matchAll(s.state,1e3);return!t||!t.length?!1:(s.dispatch({selection:fe.create(t.map(i=>fe.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),MD=({state:s,dispatch:e})=>{let t=s.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:i,to:n}=t.main,r=[],o=0;for(let l=new Cr(s.doc,s.sliceDoc(i,n));!l.next().done;){if(r.length>1e3)return!1;l.value.from==i&&(o=r.length),r.push(fe.range(l.value.from,l.value.to))}return e(s.update({selection:fe.create(r,o),userEvent:"select.search.matches"})),!0},Rm=sl((s,{query:e})=>{let{state:t}=s,{from:i,to:n}=t.selection.main;if(t.readOnly)return!1;let r=e.nextMatch(t,i,i);if(!r)return!1;let o=r,l=[],a,c,u=[];o.from==i&&o.to==n&&(c=t.toText(e.getReplacement(o)),l.push({from:o.from,to:o.to,insert:c}),o=e.nextMatch(t,o.from,o.to),u.push(Te.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(i).number)+".")));let d=s.state.changes(l);return o&&(a=fe.single(o.from,o.to).map(d),u.push(Ef(s,o)),u.push(t.facet(jr).scrollToMatch(a.main,s))),s.dispatch({changes:d,selection:a,effects:u,userEvent:"input.replace"}),!0}),DD=sl((s,{query:e})=>{if(s.state.readOnly)return!1;let t=e.matchAll(s.state,1e9).map(n=>{let{from:r,to:o}=n;return{from:r,to:o,insert:e.getReplacement(n)}});if(!t.length)return!1;let i=s.state.phrase("replaced $ matches",t.length)+".";return s.dispatch({changes:t,effects:Te.announce.of(i),userEvent:"input.replace.all"}),!0});function Df(s){return s.state.facet(jr).createPanel(s)}function Cd(s,e){var t,i,n,r,o;let l=s.selection.main,a=l.empty||l.to>l.from+100?"":s.sliceDoc(l.from,l.to);if(e&&!a)return e;let c=s.facet(jr);return new cb({search:((t=e?.literal)!==null&&t!==void 0?t:c.literal)?a:a.replace(/\n/g,"\\n"),caseSensitive:(i=e?.caseSensitive)!==null&&i!==void 0?i:c.caseSensitive,literal:(n=e?.literal)!==null&&n!==void 0?n:c.literal,regexp:(r=e?.regexp)!==null&&r!==void 0?r:c.regexp,wholeWord:(o=e?.wholeWord)!==null&&o!==void 0?o:c.wholeWord})}function fb(s){let e=$o(s,Df);return e&&e.dom.querySelector("[main-field]")}function hb(s){let e=fb(s);e&&e==s.root.activeElement&&e.select()}const pb=s=>{let e=s.state.field(sn,!1);if(e&&e.panel){let t=fb(s);if(t&&t!=s.root.activeElement){let i=Cd(s.state,e.query.spec);i.valid&&s.dispatch({effects:No.of(i)}),t.focus(),t.select()}}else s.dispatch({effects:[Mf.of(!0),e?No.of(Cd(s.state,e.query.spec)):Ye.appendConfig.of(jD)]});return!0},mb=s=>{let e=s.state.field(sn,!1);if(!e||!e.panel)return!1;let t=$o(s,Df);return t&&t.dom.contains(s.root.activeElement)&&s.focus(),s.dispatch({effects:Mf.of(!1)}),!0},ED=[{key:"Mod-f",run:pb,scope:"editor search-panel"},{key:"F3",run:La,shift:Va,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:La,shift:Va,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:mb,scope:"editor search-panel"},{key:"Mod-Shift-l",run:MD},{key:"Mod-Alt-g",run:oD},{key:"Mod-d",run:yD,preventDefault:!0}];class TD{constructor(e){this.view=e;let t=this.query=e.state.field(sn).query.spec;this.commit=this.commit.bind(this),this.searchField=mt("input",{value:t.search,placeholder:Es(e,"Find"),"aria-label":Es(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=mt("input",{value:t.replace,placeholder:Es(e,"Replace"),"aria-label":Es(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=mt("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=mt("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=mt("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function i(n,r,o){return mt("button",{class:"cm-button",name:n,onclick:r,type:"button"},o)}this.dom=mt("div",{onkeydown:n=>this.keydown(n),class:"cm-search"},[this.searchField,i("next",()=>La(e),[Es(e,"next")]),i("prev",()=>Va(e),[Es(e,"previous")]),i("select",()=>AD(e),[Es(e,"all")]),mt("label",null,[this.caseField,Es(e,"match case")]),mt("label",null,[this.reField,Es(e,"regexp")]),mt("label",null,[this.wordField,Es(e,"by word")]),...e.state.readOnly?[]:[mt("br"),this.replaceField,i("replace",()=>Rm(e),[Es(e,"replace")]),i("replaceAll",()=>DD(e),[Es(e,"replace all")])],mt("button",{name:"close",onclick:()=>mb(e),"aria-label":Es(e,"close"),type:"button"},[""])])}commit(){let e=new cb({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:No.of(e)}))}keydown(e){j5(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Va:La)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),Rm(this.view))}update(e){for(let t of e.transactions)for(let i of t.effects)i.is(No)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(jr).top}}function Es(s,e){return s.state.phrase(e)}const Ul=30,Hl=/[\s\.,:;?!]/;function Ef(s,{from:e,to:t}){let i=s.state.doc.lineAt(e),n=s.state.doc.lineAt(t).to,r=Math.max(i.from,e-Ul),o=Math.min(n,t+Ul),l=s.state.sliceDoc(r,o);if(r!=i.from){for(let a=0;a<Ul;a++)if(!Hl.test(l[a+1])&&Hl.test(l[a])){l=l.slice(a);break}}if(o!=n){for(let a=l.length-1;a>l.length-Ul;a--)if(!Hl.test(l[a-1])&&Hl.test(l[a])){l=l.slice(0,a);break}}return Te.announce.of(`${s.state.phrase("current match")}. ${l} ${s.state.phrase("on line")} ${i.number}.`)}const OD=Te.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),jD=[sn,Hn.low(_D),OD];class gb{constructor(e,t,i,n){this.state=e,this.pos=t,this.explicit=i,this.view=n,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=ls(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),i=Math.max(t.from,this.pos-250),n=t.text.slice(i-t.from,this.pos-t.from),r=n.search(vb(e,!1));return r<0?null:{from:i+r,to:this.pos,text:n.slice(r)}}get aborted(){return this.abortListeners==null}addEventListener(e,t,i){e=="abort"&&this.abortListeners&&(this.abortListeners.push(t),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function Lm(s){let e=Object.keys(s).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function PD(s){let e=Object.create(null),t=Object.create(null);for(let{label:n}of s){e[n[0]]=!0;for(let r=1;r<n.length;r++)t[n[r]]=!0}let i=Lm(e)+Lm(t)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function $D(s){let e=s.map(n=>typeof n=="string"?{label:n}:n),[t,i]=e.every(n=>/^\w+$/.test(n.label))?[/\w*$/,/\w+$/]:PD(e);return n=>{let r=n.matchBefore(i);return r||n.explicit?{from:r?r.from:n.pos,options:e,validFor:t}:null}}class Vm{constructor(e,t,i,n){this.completion=e,this.source=t,this.match=i,this.score=n}}function $n(s){return s.selection.main.from}function vb(s,e){var t;let{source:i}=s,n=e&&i[0]!="^",r=i[i.length-1]!="$";return!n&&!r?s:new RegExp(`${n?"^":""}(?:${i})${r?"$":""}`,(t=s.flags)!==null&&t!==void 0?t:s.ignoreCase?"i":"")}const yb=Fi.define();function RD(s,e,t,i){let{main:n}=s.selection,r=t-n.from,o=i-n.from;return{...s.changeByRange(l=>{if(l!=n&&t!=i&&s.sliceDoc(l.from+r,l.from+o)!=s.sliceDoc(t,i))return{range:l};let a=s.toText(e);return{changes:{from:l.from+r,to:i==n.from?l.to:l.from+o,insert:a},range:fe.cursor(l.from+r+a.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}const Bm=new WeakMap;function LD(s){if(!Array.isArray(s))return s;let e=Bm.get(s);return e||Bm.set(s,e=$D(s)),e}const Ba=Ye.define(),Fo=Ye.define();class VD{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let i=xs(e,t),n=pi(i);this.chars.push(i);let r=e.slice(t,t+n),o=r.toUpperCase();this.folded.push(xs(o==r?r.toLowerCase():o,0)),t+=n}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:i,any:n,precise:r,byWord:o}=this;if(t.length==1){let V=xs(e,0),I=pi(V),U=I==e.length?0:-100;if(V!=t[0])if(V==i[0])U+=-200;else return null;return this.ret(U,[0,I])}let l=e.indexOf(this.pattern);if(l==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let a=t.length,c=0;if(l<0){for(let V=0,I=Math.min(e.length,200);V<I&&c<a;){let U=xs(e,V);(U==t[c]||U==i[c])&&(n[c++]=V),V+=pi(U)}if(c<a)return null}let u=0,d=0,h=!1,p=0,g=-1,k=-1,m=/[a-z]/.test(e),x=!0;for(let V=0,I=Math.min(e.length,200),U=0;V<I&&d<a;){let N=xs(e,V);l<0&&(u<a&&N==t[u]&&(r[u++]=V),p<a&&(N==t[p]||N==i[p]?(p==0&&(g=V),k=V+1,p++):p=0));let P,S=N<255?N>=48&&N<=57||N>=97&&N<=122?2:N>=65&&N<=90?1:0:(P=Yd(N))!=P.toLowerCase()?1:P!=P.toUpperCase()?2:0;(!V||S==1&&m||U==0&&S!=0)&&(t[d]==N||i[d]==N&&(h=!0)?o[d++]=V:o.length&&(x=!1)),U=S,V+=pi(N)}return d==a&&o[0]==0&&x?this.result(-100+(h?-200:0),o,e):p==a&&g==0?this.ret(-200-e.length+(k==e.length?0:-100),[0,k]):l>-1?this.ret(-700-e.length,[l,l+this.pattern.length]):p==a?this.ret(-900-e.length,[g,k]):d==a?this.result(-100+(h?-200:0)+-700+(x?0:-1100),o,e):t.length==2?null:this.result((n[0]?-700:0)+-200+-1100,n,e)}result(e,t,i){let n=[],r=0;for(let o of t){let l=o+(this.astral?pi(xs(i,o)):1);r&&n[r-1]==o?n[r-1]=l:(n[r++]=o,n[r++]=l)}return this.ret(e-i.length,n)}}class BD{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),i=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,t.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const zt=Oe.define({combine(s){return xi(s,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:ID,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>i=>Im(e(i),t(i)),optionClass:(e,t)=>i=>Im(e(i),t(i)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})}});function Im(s,e){return s?e?s+" "+e:s:e}function ID(s,e,t,i,n,r){let o=s.textDirection==Ct.RTL,l=o,a=!1,c="top",u,d,h=e.left-n.left,p=n.right-e.right,g=i.right-i.left,k=i.bottom-i.top;if(l&&h<Math.min(g,p)?l=!1:!l&&p<Math.min(g,h)&&(l=!0),g<=(l?h:p))u=Math.max(n.top,Math.min(t.top,n.bottom-k))-e.top,d=Math.min(400,l?h:p);else{a=!0,d=Math.min(400,(o?e.right:n.right-e.left)-30);let V=n.bottom-e.bottom;V>=k||V>e.top?u=t.bottom-e.top:(c="bottom",u=e.bottom-t.top)}let m=(e.bottom-e.top)/r.offsetHeight,x=(e.right-e.left)/r.offsetWidth;return{style:`${c}: ${u/m}px; max-width: ${d/x}px`,class:"cm-completionInfo-"+(a?o?"left-narrow":"right-narrow":l?"left":"right")}}function ND(s){let e=s.addToOptions.slice();return s.icons&&e.push({render(t){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),t.type&&i.classList.add(...t.type.split(/\s+/g).map(n=>"cm-completionIcon-"+n)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(t,i,n,r){let o=document.createElement("span");o.className="cm-completionLabel";let l=t.displayLabel||t.label,a=0;for(let c=0;c<r.length;){let u=r[c++],d=r[c++];u>a&&o.appendChild(document.createTextNode(l.slice(a,u)));let h=o.appendChild(document.createElement("span"));h.appendChild(document.createTextNode(l.slice(u,d))),h.className="cm-completionMatchedText",a=d}return a<l.length&&o.appendChild(document.createTextNode(l.slice(a))),o},position:50},{render(t){if(!t.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=t.detail,i},position:80}),e.sort((t,i)=>t.position-i.position).map(t=>t.render)}function lc(s,e,t){if(s<=t)return{from:0,to:s};if(e<0&&(e=0),e<=s>>1){let n=Math.floor(e/t);return{from:n*t,to:(n+1)*t}}let i=Math.floor((s-e)/t);return{from:s-(i+1)*t,to:s-i*t}}class FD{constructor(e,t,i){this.view=e,this.stateField=t,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:a=>this.placeInfo(a),key:this},this.space=null,this.currentClass="";let n=e.state.field(t),{options:r,selected:o}=n.open,l=e.state.facet(zt);this.optionContent=ND(l),this.optionClass=l.optionClass,this.tooltipClass=l.tooltipClass,this.range=lc(r.length,o,l.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",a=>{let{options:c}=e.state.field(t).open;for(let u=a.target,d;u&&u!=this.dom;u=u.parentNode)if(u.nodeName=="LI"&&(d=/-(\d+)$/.exec(u.id))&&+d[1]<c.length){this.applyCompletion(e,c[+d[1]]),a.preventDefault();return}}),this.dom.addEventListener("focusout",a=>{let c=e.state.field(this.stateField,!1);c&&c.tooltip&&e.state.facet(zt).closeOnBlur&&a.relatedTarget!=e.contentDOM&&e.dispatch({effects:Fo.of(null)})}),this.showOptions(r,n.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let i=e.state.field(this.stateField),n=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=n){let{options:r,selected:o,disabled:l}=i.open;(!n.open||n.open.options!=r)&&(this.range=lc(r.length,o,e.state.facet(zt).maxRenderedOptions),this.showOptions(r,i.id)),this.updateSel(),l!=((t=n.open)===null||t===void 0?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!l)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of t.split(" "))i&&this.dom.classList.add(i);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;(t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=lc(t.options.length,t.selected,this.view.state.facet(zt).maxRenderedOptions),this.showOptions(t.options,e.id));let i=this.updateSelectedOption(t.selected);if(i){this.destroyInfo();let{completion:n}=t.options[t.selected],{info:r}=n;if(!r)return;let o=typeof r=="string"?document.createTextNode(r):r(n);if(!o)return;"then"in o?o.then(l=>{l&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(l,n)}).catch(l=>Ss(this.view.state,l,"completion info")):(this.addInfoPane(o,n),i.setAttribute("aria-describedby",this.info.id))}}addInfoPane(e,t){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",i.id="cm-completionInfo-"+Math.floor(Math.random()*65535).toString(16),e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:n,destroy:r}=e;i.appendChild(n),this.infoDestroy=r||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let i=this.list.firstChild,n=this.range.from;i;i=i.nextSibling,n++)i.nodeName!="LI"||!i.id?n--:n==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),t=i):i.hasAttribute("aria-selected")&&(i.removeAttribute("aria-selected"),i.removeAttribute("aria-describedby"));return t&&UD(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),n=e.getBoundingClientRect(),r=this.space;if(!r){let o=this.dom.ownerDocument.documentElement;r={left:0,top:0,right:o.clientWidth,bottom:o.clientHeight}}return n.top>Math.min(r.bottom,t.bottom)-10||n.bottom<Math.max(r.top,t.top)+10?null:this.view.state.facet(zt).positionInfo(this.view,t,n,i,r,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,i){const n=document.createElement("ul");n.id=t,n.setAttribute("role","listbox"),n.setAttribute("aria-expanded","true"),n.setAttribute("aria-label",this.view.state.phrase("Completions")),n.addEventListener("mousedown",o=>{o.target==n&&o.preventDefault()});let r=null;for(let o=i.from;o<i.to;o++){let{completion:l,match:a}=e[o],{section:c}=l;if(c){let h=typeof c=="string"?c:c.name;if(h!=r&&(o>i.from||i.from==0))if(r=h,typeof c!="string"&&c.header)n.appendChild(c.header(c));else{let p=n.appendChild(document.createElement("completion-section"));p.textContent=h}}const u=n.appendChild(document.createElement("li"));u.id=t+"-"+o,u.setAttribute("role","option");let d=this.optionClass(l);d&&(u.className=d);for(let h of this.optionContent){let p=h(l,this.view.state,this.view,a);p&&u.appendChild(p)}}return i.from&&n.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&n.classList.add("cm-completionListIncompleteBottom"),n}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function zD(s,e){return t=>new FD(t,s,e)}function UD(s,e){let t=s.getBoundingClientRect(),i=e.getBoundingClientRect(),n=t.height/s.offsetHeight;i.top<t.top?s.scrollTop-=(t.top-i.top)/n:i.bottom>t.bottom&&(s.scrollTop+=(i.bottom-t.bottom)/n)}function Nm(s){return(s.boost||0)*100+(s.apply?10:0)+(s.info?5:0)+(s.type?1:0)}function HD(s,e){let t=[],i=null,n=null,r=u=>{t.push(u);let{section:d}=u.completion;if(d){i||(i=[]);let h=typeof d=="string"?d:d.name;i.some(p=>p.name==h)||i.push(typeof d=="string"?{name:h}:d)}},o=e.facet(zt);for(let u of s)if(u.hasResult()){let d=u.result.getMatch;if(u.result.filter===!1)for(let h of u.result.options)r(new Vm(h,u.source,d?d(h):[],1e9-t.length));else{let h=e.sliceDoc(u.from,u.to),p,g=o.filterStrict?new BD(h):new VD(h);for(let k of u.result.options)if(p=g.match(k.label)){let m=k.displayLabel?d?d(k,p.matched):[]:p.matched,x=p.score+(k.boost||0);if(r(new Vm(k,u.source,m,x)),typeof k.section=="object"&&k.section.rank==="dynamic"){let{name:V}=k.section;n||(n=Object.create(null)),n[V]=Math.max(x,n[V]||-1e9)}}}}if(i){let u=Object.create(null),d=0,h=(p,g)=>(p.rank==="dynamic"&&g.rank==="dynamic"?n[g.name]-n[p.name]:0)||(typeof p.rank=="number"?p.rank:1e9)-(typeof g.rank=="number"?g.rank:1e9)||(p.name<g.name?-1:1);for(let p of i.sort(h))d-=1e5,u[p.name]=d;for(let p of t){let{section:g}=p.completion;g&&(p.score+=u[typeof g=="string"?g:g.name])}}let l=[],a=null,c=o.compareCompletions;for(let u of t.sort((d,h)=>h.score-d.score||c(d.completion,h.completion))){let d=u.completion;!a||a.label!=d.label||a.detail!=d.detail||a.type!=null&&d.type!=null&&a.type!=d.type||a.apply!=d.apply||a.boost!=d.boost?l.push(u):Nm(u.completion)>Nm(a)&&(l[l.length-1]=u),a=u.completion}return l}class tr{constructor(e,t,i,n,r,o){this.options=e,this.attrs=t,this.tooltip=i,this.timestamp=n,this.selected=r,this.disabled=o}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new tr(this.options,Fm(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,i,n,r,o){if(n&&!o&&e.some(c=>c.isPending))return n.setDisabled();let l=HD(e,t);if(!l.length)return n&&e.some(c=>c.isPending)?n.setDisabled():null;let a=t.facet(zt).selectOnOpen?0:-1;if(n&&n.selected!=a&&n.selected!=-1){let c=n.options[n.selected].completion;for(let u=0;u<l.length;u++)if(l[u].completion==c){a=u;break}}return new tr(l,Fm(i,a),{pos:e.reduce((c,u)=>u.hasResult()?Math.min(c,u.from):c,1e8),create:YD,above:r.aboveCursor},n?n.timestamp:Date.now(),a,!1)}map(e){return new tr(this.options,this.attrs,{...this.tooltip,pos:e.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new tr(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class Ia{constructor(e,t,i){this.active=e,this.id=t,this.open=i}static start(){return new Ia(GD,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,i=t.facet(zt),r=(i.override||t.languageDataAt("autocomplete",$n(t)).map(LD)).map(a=>(this.active.find(u=>u.source==a)||new Vs(a,this.active.some(u=>u.state!=0)?1:0)).update(e,i));r.length==this.active.length&&r.every((a,c)=>a==this.active[c])&&(r=this.active);let o=this.open,l=e.effects.some(a=>a.is(Tf));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||r.some(a=>a.hasResult()&&e.changes.touchesRange(a.from,a.to))||!WD(r,this.active)||l?o=tr.build(r,t,this.id,o,i,l):o&&o.disabled&&!r.some(a=>a.isPending)&&(o=null),!o&&r.every(a=>!a.isPending)&&r.some(a=>a.hasResult())&&(r=r.map(a=>a.hasResult()?new Vs(a.source,0):a));for(let a of e.effects)a.is(kb)&&(o=o&&o.setSelected(a.value,this.id));return r==this.active&&o==this.open?this:new Ia(r,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?qD:KD}}function WD(s,e){if(s==e)return!0;for(let t=0,i=0;;){for(;t<s.length&&!s[t].hasResult();)t++;for(;i<e.length&&!e[i].hasResult();)i++;let n=t==s.length,r=i==e.length;if(n||r)return n==r;if(s[t++].result!=e[i++].result)return!1}}const qD={"aria-autocomplete":"list"},KD={};function Fm(s,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":s};return e>-1&&(t["aria-activedescendant"]=s+"-"+e),t}const GD=[];function bb(s,e){if(s.isUserEvent("input.complete")){let i=s.annotation(yb);if(i&&e.activateOnCompletion(i))return 12}let t=s.isUserEvent("input.type");return t&&e.activateOnTyping?5:t?1:s.isUserEvent("delete.backward")?2:s.selection?8:s.docChanged?16:0}class Vs{constructor(e,t,i=!1){this.source=e,this.state=t,this.explicit=i}hasResult(){return!1}get isPending(){return this.state==1}update(e,t){let i=bb(e,t),n=this;(i&8||i&16&&this.touches(e))&&(n=new Vs(n.source,0)),i&4&&n.state==0&&(n=new Vs(this.source,1)),n=n.updateFor(e,i);for(let r of e.effects)if(r.is(Ba))n=new Vs(n.source,1,r.value);else if(r.is(Fo))n=new Vs(n.source,0);else if(r.is(Tf))for(let o of r.value)o.source==n.source&&(n=o);return n}updateFor(e,t){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange($n(e.state))}}class hr extends Vs{constructor(e,t,i,n,r,o){super(e,3,t),this.limit=i,this.result=n,this.from=r,this.to=o}hasResult(){return!0}updateFor(e,t){var i;if(!(t&3))return this.map(e.changes);let n=this.result;n.map&&!e.changes.empty&&(n=n.map(n,e.changes));let r=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),l=$n(e.state);if(l>o||!n||t&2&&($n(e.startState)==this.from||l<this.limit))return new Vs(this.source,t&4?1:0);let a=e.changes.mapPos(this.limit);return JD(n.validFor,e.state,r,o)?new hr(this.source,this.explicit,a,n,r,o):n.update&&(n=n.update(n,r,o,new gb(e.state,l,!1)))?new hr(this.source,this.explicit,a,n,n.from,(i=n.to)!==null&&i!==void 0?i:$n(e.state)):new Vs(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new hr(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new Vs(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function JD(s,e,t,i){if(!s)return!1;let n=e.sliceDoc(t,i);return typeof s=="function"?s(n,t,i,e):vb(s,!0).test(n)}const Tf=Ye.define({map(s,e){return s.map(t=>t.map(e))}}),kb=Ye.define(),ws=Yt.define({create(){return Ia.start()},update(s,e){return s.update(e)},provide:s=>[ff.from(s,e=>e.tooltip),Te.contentAttributes.from(s,e=>e.attrs)]});function Of(s,e){const t=e.completion.apply||e.completion.label;let i=s.state.field(ws).active.find(n=>n.source==e.source);return i instanceof hr?(typeof t=="string"?s.dispatch({...RD(s.state,t,i.from,i.to),annotations:yb.of(e.completion)}):t(s,e.completion,i.from,i.to),!0):!1}const YD=zD(ws,Of);function Wl(s,e="option"){return t=>{let i=t.state.field(ws,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<t.state.facet(zt).interactionDelay)return!1;let n=1,r;e=="page"&&(r=Zv(t,i.open.tooltip))&&(n=Math.max(2,Math.floor(r.dom.offsetHeight/r.dom.querySelector("li").offsetHeight)-1));let{length:o}=i.open.options,l=i.open.selected>-1?i.open.selected+n*(s?1:-1):s?0:o-1;return l<0?l=e=="page"?0:o-1:l>=o&&(l=e=="page"?o-1:0),t.dispatch({effects:kb.of(l)}),!0}}const QD=s=>{let e=s.state.field(ws,!1);return s.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<s.state.facet(zt).interactionDelay?!1:Of(s,e.open.options[e.open.selected])},ac=s=>s.state.field(ws,!1)?(s.dispatch({effects:Ba.of(!0)}),!0):!1,XD=s=>{let e=s.state.field(ws,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(s.dispatch({effects:Fo.of(null)}),!0)};class ZD{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const e8=50,t8=1e3,s8=$t.fromClass(class{constructor(s){this.view=s,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of s.state.field(ws).active)e.isPending&&this.startQuery(e)}update(s){let e=s.state.field(ws),t=s.state.facet(zt);if(!s.selectionSet&&!s.docChanged&&s.startState.field(ws)==e)return;let i=s.transactions.some(r=>{let o=bb(r,t);return o&8||(r.selection||r.docChanged)&&!(o&3)});for(let r=0;r<this.running.length;r++){let o=this.running[r];if(i||o.context.abortOnDocChange&&s.docChanged||o.updates.length+s.transactions.length>e8&&Date.now()-o.time>t8){for(let l of o.context.abortListeners)try{l()}catch(a){Ss(this.view.state,a)}o.context.abortListeners=null,this.running.splice(r--,1)}else o.updates.push(...s.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),s.transactions.some(r=>r.effects.some(o=>o.is(Ba)))&&(this.pendingStart=!0);let n=this.pendingStart?50:t.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(r=>r.isPending&&!this.running.some(o=>o.active.source==r.source))?setTimeout(()=>this.startUpdate(),n):-1,this.composing!=0)for(let r of s.transactions)r.isUserEvent("input.type")?this.composing=2:this.composing==2&&r.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:s}=this.view,e=s.field(ws);for(let t of e.active)t.isPending&&!this.running.some(i=>i.active.source==t.source)&&this.startQuery(t);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(zt).updateSyncTime))}startQuery(s){let{state:e}=this.view,t=$n(e),i=new gb(e,t,s.explicit,this.view),n=new ZD(s,i);this.running.push(n),Promise.resolve(s.source(i)).then(r=>{n.context.aborted||(n.done=r||null,this.scheduleAccept())},r=>{this.view.dispatch({effects:Fo.of(null)}),Ss(this.view.state,r)})}scheduleAccept(){this.running.every(s=>s.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(zt).updateSyncTime))}accept(){var s;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(zt),i=this.view.state.field(ws);for(let n=0;n<this.running.length;n++){let r=this.running[n];if(r.done===void 0)continue;if(this.running.splice(n--,1),r.done){let l=$n(r.updates.length?r.updates[0].startState:this.view.state),a=Math.min(l,r.done.from+(r.active.explicit?0:1)),c=new hr(r.active.source,r.active.explicit,a,r.done,r.done.from,(s=r.done.to)!==null&&s!==void 0?s:l);for(let u of r.updates)c=c.update(u,t);if(c.hasResult()){e.push(c);continue}}let o=i.active.find(l=>l.source==r.active.source);if(o&&o.isPending)if(r.done==null){let l=new Vs(r.active.source,0);for(let a of r.updates)l=l.update(a,t);l.isPending||e.push(l)}else this.startQuery(o)}(e.length||i.open&&i.open.disabled)&&this.view.dispatch({effects:Tf.of(e)})}},{eventHandlers:{blur(s){let e=this.view.state.field(ws,!1);if(e&&e.tooltip&&this.view.state.facet(zt).closeOnBlur){let t=e.open&&Zv(this.view,e.open.tooltip);(!t||!t.dom.contains(s.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:Fo.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Ba.of(!1)}),20),this.composing=0}}}),i8=typeof navigator=="object"&&/Win/.test(navigator.platform),n8=Hn.highest(Te.domEventHandlers({keydown(s,e){let t=e.state.field(ws,!1);if(!t||!t.open||t.open.disabled||t.open.selected<0||s.key.length>1||s.ctrlKey&&!(i8&&s.altKey)||s.metaKey)return!1;let i=t.open.options[t.open.selected],n=t.active.find(o=>o.source==i.source),r=i.completion.commitCharacters||n.result.commitCharacters;return r&&r.indexOf(s.key)>-1&&Of(e,i),!1}})),r8=Te.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),zo={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},On=Ye.define({map(s,e){let t=e.mapPos(s,-1,ms.TrackAfter);return t??void 0}}),jf=new class extends Vn{};jf.startSide=1;jf.endSide=-1;const xb=Yt.define({create(){return st.empty},update(s,e){if(s=s.map(e.changes),e.selection){let t=e.state.doc.lineAt(e.selection.main.head);s=s.update({filter:i=>i>=t.from&&i<=t.to})}for(let t of e.effects)t.is(On)&&(s=s.update({add:[jf.range(t.value,t.value+1)]}));return s}});function o8(){return[a8,xb]}const uc="()[]{}<>";function wb(s){for(let e=0;e<uc.length;e+=2)if(uc.charCodeAt(e)==s)return uc.charAt(e+1);return Yd(s<128?s:s+1)}function Sb(s,e){return s.languageDataAt("closeBrackets",e)[0]||zo}const l8=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),a8=Te.inputHandler.of((s,e,t,i)=>{if((l8?s.composing:s.compositionStarted)||s.state.readOnly)return!1;let n=s.state.selection.main;if(i.length>2||i.length==2&&pi(xs(i,0))==1||e!=n.from||t!=n.to)return!1;let r=d8(s.state,i);return r?(s.dispatch(r),!0):!1}),u8=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let i=Sb(s,s.selection.main.head).brackets||zo.brackets,n=null,r=s.changeByRange(o=>{if(o.empty){let l=f8(s.doc,o.head);for(let a of i)if(a==l&&yu(s.doc,o.head)==wb(xs(a,0)))return{changes:{from:o.head-a.length,to:o.head+a.length},range:fe.cursor(o.head-a.length)}}return{range:n=o}});return n||e(s.update(r,{scrollIntoView:!0,userEvent:"delete.backward"})),!n},c8=[{key:"Backspace",run:u8}];function d8(s,e){let t=Sb(s,s.selection.main.head),i=t.brackets||zo.brackets;for(let n of i){let r=wb(xs(n,0));if(e==n)return r==n?m8(s,n,i.indexOf(n+n+n)>-1,t):h8(s,n,r,t.before||zo.before);if(e==r&&Cb(s,s.selection.main.from))return p8(s,n,r)}return null}function Cb(s,e){let t=!1;return s.field(xb).between(0,s.doc.length,i=>{i==e&&(t=!0)}),t}function yu(s,e){let t=s.sliceString(e,e+2);return t.slice(0,pi(xs(t,0)))}function f8(s,e){let t=s.sliceString(e-2,e);return pi(xs(t,0))==t.length?t:t.slice(1)}function h8(s,e,t,i){let n=null,r=s.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:t,from:o.to}],effects:On.of(o.to+e.length),range:fe.range(o.anchor+e.length,o.head+e.length)};let l=yu(s.doc,o.head);return!l||/\s/.test(l)||i.indexOf(l)>-1?{changes:{insert:e+t,from:o.head},effects:On.of(o.head+e.length),range:fe.cursor(o.head+e.length)}:{range:n=o}});return n?null:s.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function p8(s,e,t){let i=null,n=s.changeByRange(r=>r.empty&&yu(s.doc,r.head)==t?{changes:{from:r.head,to:r.head+t.length,insert:t},range:fe.cursor(r.head+t.length)}:i={range:r});return i?null:s.update(n,{scrollIntoView:!0,userEvent:"input.type"})}function m8(s,e,t,i){let n=i.stringPrefixes||zo.stringPrefixes,r=null,o=s.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:e,from:l.to}],effects:On.of(l.to+e.length),range:fe.range(l.anchor+e.length,l.head+e.length)};let a=l.head,c=yu(s.doc,a),u;if(c==e){if(zm(s,a))return{changes:{insert:e+e,from:a},effects:On.of(a+e.length),range:fe.cursor(a+e.length)};if(Cb(s,a)){let h=t&&s.sliceDoc(a,a+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:a,to:a+h.length,insert:h},range:fe.cursor(a+h.length)}}}else{if(t&&s.sliceDoc(a-2*e.length,a)==e+e&&(u=Um(s,a-2*e.length,n))>-1&&zm(s,u))return{changes:{insert:e+e+e+e,from:a},effects:On.of(a+e.length),range:fe.cursor(a+e.length)};if(s.charCategorizer(a)(c)!=_t.Word&&Um(s,a,n)>-1&&!g8(s,a,e,n))return{changes:{insert:e+e,from:a},effects:On.of(a+e.length),range:fe.cursor(a+e.length)}}return{range:r=l}});return r?null:s.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function zm(s,e){let t=ls(s).resolveInner(e+1);return t.parent&&t.from==e}function g8(s,e,t,i){let n=ls(s).resolveInner(e,-1),r=i.reduce((o,l)=>Math.max(o,l.length),0);for(let o=0;o<5;o++){let l=s.sliceDoc(n.from,Math.min(n.to,n.from+t.length+r)),a=l.indexOf(t);if(!a||a>-1&&i.indexOf(l.slice(0,a))>-1){let u=n.firstChild;for(;u&&u.from==n.from&&u.to-u.from>t.length+a;){if(s.sliceDoc(u.to-t.length,u.to)==t)return!1;u=u.firstChild}return!0}let c=n.to==e&&n.parent;if(!c)break;n=c}return!1}function Um(s,e,t){let i=s.charCategorizer(e);if(i(s.sliceDoc(e-1,e))!=_t.Word)return e;for(let n of t){let r=e-n.length;if(s.sliceDoc(r,e)==n&&i(s.sliceDoc(r-1,r))!=_t.Word)return r}return-1}function v8(s={}){return[n8,ws,zt.of(s),s8,y8,r8]}const _b=[{key:"Ctrl-Space",run:ac},{mac:"Alt-`",run:ac},{mac:"Alt-i",run:ac},{key:"Escape",run:XD},{key:"ArrowDown",run:Wl(!0)},{key:"ArrowUp",run:Wl(!1)},{key:"PageDown",run:Wl(!0,"page")},{key:"PageUp",run:Wl(!1,"page")},{key:"Enter",run:QD}],y8=Hn.highest(cf.computeN([zt],s=>s.facet(zt).defaultKeymap?[_b]:[]));class Hm{constructor(e,t,i){this.from=e,this.to=t,this.diagnostic=i}}class Mn{constructor(e,t,i){this.diagnostics=e,this.panel=t,this.selected=i}static init(e,t,i){let n=i.facet(Uo).markerFilter;n&&(e=n(e,i));let r=e.slice().sort((p,g)=>p.from-g.from||p.to-g.to),o=new Vi,l=[],a=0,c=i.doc.iter(),u=0,d=i.doc.length;for(let p=0;;){let g=p==r.length?null:r[p];if(!g&&!l.length)break;let k,m;if(l.length)k=a,m=l.reduce((I,U)=>Math.min(I,U.to),g&&g.from>k?g.from:1e8);else{if(k=g.from,k>d)break;m=g.to,l.push(g),p++}for(;p<r.length;){let I=r[p];if(I.from==k&&(I.to>I.from||I.to==k))l.push(I),p++,m=Math.min(I.to,m);else{m=Math.min(I.from,m);break}}m=Math.min(m,d);let x=!1;if(l.some(I=>I.from==k&&(I.to==m||m==d))&&(x=k==m,!x&&m-k<10)){let I=k-(u+c.value.length);I>0&&(c.next(I),u=k);for(let U=k;;){if(U>=m){x=!0;break}if(!c.lineBreak&&u+c.value.length>U)break;U=u+c.value.length,u+=c.value.length,c.next()}}let V=O8(l);if(x)o.add(k,k,Fe.widget({widget:new M8(V),diagnostics:l.slice()}));else{let I=l.reduce((U,N)=>N.markClass?U+" "+N.markClass:U,"");o.add(k,m,Fe.mark({class:"cm-lintRange cm-lintRange-"+V+I,diagnostics:l.slice(),inclusiveEnd:l.some(U=>U.to>m)}))}if(a=m,a==d)break;for(let I=0;I<l.length;I++)l[I].to<=a&&l.splice(I--,1)}let h=o.finish();return new Mn(h,t,_r(h))}}function _r(s,e=null,t=0){let i=null;return s.between(t,1e9,(n,r,{spec:o})=>{if(!(e&&o.diagnostics.indexOf(e)<0))if(!i)i=new Hm(n,r,e||o.diagnostics[0]);else{if(o.diagnostics.indexOf(i.diagnostic)<0)return!1;i=new Hm(i.from,r,i.diagnostic)}}),i}function b8(s,e){let t=e.pos,i=e.end||t,n=s.state.facet(Uo).hideOn(s,t,i);if(n!=null)return n;let r=s.startState.doc.lineAt(e.pos);return!!(s.effects.some(o=>o.is(Ab))||s.changes.touchesRange(r.from,Math.max(r.to,i)))}function k8(s,e){return s.field(js,!1)?e:e.concat(Ye.appendConfig.of(j8))}const Ab=Ye.define(),Pf=Ye.define(),Mb=Ye.define(),js=Yt.define({create(){return new Mn(Fe.none,null,null)},update(s,e){if(e.docChanged&&s.diagnostics.size){let t=s.diagnostics.map(e.changes),i=null,n=s.panel;if(s.selected){let r=e.changes.mapPos(s.selected.from,1);i=_r(t,s.selected.diagnostic,r)||_r(t,null,r)}!t.size&&n&&e.state.facet(Uo).autoPanel&&(n=null),s=new Mn(t,n,i)}for(let t of e.effects)if(t.is(Ab)){let i=e.state.facet(Uo).autoPanel?t.value.length?Ho.open:null:s.panel;s=Mn.init(t.value,i,e.state)}else t.is(Pf)?s=new Mn(s.diagnostics,t.value?Ho.open:null,s.selected):t.is(Mb)&&(s=new Mn(s.diagnostics,s.panel,t.value));return s},provide:s=>[Ro.from(s,e=>e.panel),Te.decorations.from(s,e=>e.diagnostics)]}),x8=Fe.mark({class:"cm-lintRange cm-lintRange-active"});function w8(s,e,t){let{diagnostics:i}=s.state.field(js),n,r=-1,o=-1;i.between(e-(t<0?1:0),e+(t>0?1:0),(a,c,{spec:u})=>{if(e>=a&&e<=c&&(a==c||(e>a||t>0)&&(e<c||t<0)))return n=u.diagnostics,r=a,o=c,!1});let l=s.state.facet(Uo).tooltipFilter;return n&&l&&(n=l(n,s.state)),n?{pos:r,end:o,above:s.state.doc.lineAt(r).to<o,create(){return{dom:S8(s,n)}}}:null}function S8(s,e){return mt("ul",{class:"cm-tooltip-lint"},e.map(t=>Eb(s,t,!1)))}const C8=s=>{let e=s.state.field(js,!1);(!e||!e.panel)&&s.dispatch({effects:k8(s.state,[Pf.of(!0)])});let t=$o(s,Ho.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},Wm=s=>{let e=s.state.field(js,!1);return!e||!e.panel?!1:(s.dispatch({effects:Pf.of(!1)}),!0)},_8=s=>{let e=s.state.field(js,!1);if(!e)return!1;let t=s.state.selection.main,i=e.diagnostics.iter(t.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==t.from&&i.to==t.to)?!1:(s.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},A8=[{key:"Mod-Shift-m",run:C8,preventDefault:!0},{key:"F8",run:_8}],Uo=Oe.define({combine(s){return{sources:s.map(e=>e.source).filter(e=>e!=null),...xi(s.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:qm,tooltipFilter:qm,needsRefresh:(e,t)=>e?t?i=>e(i)||t(i):e:t,hideOn:(e,t)=>e?t?(i,n,r)=>e(i,n,r)||t(i,n,r):e:t,autoPanel:(e,t)=>e||t})}}});function qm(s,e){return s?e?(t,i)=>e(s(t,i),i):s:e}function Db(s){let e=[];if(s)e:for(let{name:t}of s){for(let i=0;i<t.length;i++){let n=t[i];if(/[a-zA-Z]/.test(n)&&!e.some(r=>r.toLowerCase()==n.toLowerCase())){e.push(n);continue e}}e.push("")}return e}function Eb(s,e,t){var i;let n=t?Db(e.actions):[];return mt("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},mt("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(s):e.message),(i=e.actions)===null||i===void 0?void 0:i.map((r,o)=>{let l=!1,a=p=>{if(p.preventDefault(),l)return;l=!0;let g=_r(s.state.field(js).diagnostics,e);g&&r.apply(s,g.from,g.to)},{name:c}=r,u=n[o]?c.indexOf(n[o]):-1,d=u<0?c:[c.slice(0,u),mt("u",c.slice(u,u+1)),c.slice(u+1)],h=r.markClass?" "+r.markClass:"";return mt("button",{type:"button",class:"cm-diagnosticAction"+h,onclick:a,onmousedown:a,"aria-label":` Action: ${c}${u<0?"":` (access key "${n[o]})"`}.`},d)}),e.source&&mt("div",{class:"cm-diagnosticSource"},e.source))}class M8 extends fn{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return mt("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class Km{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=Eb(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Ho{constructor(e){this.view=e,this.items=[];let t=n=>{if(n.keyCode==27)Wm(this.view),this.view.focus();else if(n.keyCode==38||n.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(n.keyCode==40||n.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(n.keyCode==36)this.moveSelection(0);else if(n.keyCode==35)this.moveSelection(this.items.length-1);else if(n.keyCode==13)this.view.focus();else if(n.keyCode>=65&&n.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:r}=this.items[this.selectedIndex],o=Db(r.actions);for(let l=0;l<o.length;l++)if(o[l].toUpperCase().charCodeAt(0)==n.keyCode){let a=_r(this.view.state.field(js).diagnostics,r);a&&r.actions[l].apply(e,a.from,a.to)}}else return;n.preventDefault()},i=n=>{for(let r=0;r<this.items.length;r++)this.items[r].dom.contains(n.target)&&this.moveSelection(r)};this.list=mt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:i}),this.dom=mt("div",{class:"cm-panel-lint"},this.list,mt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>Wm(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(js).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(js),i=0,n=!1,r=null,o=new Set;for(e.between(0,this.view.state.doc.length,(l,a,{spec:c})=>{for(let u of c.diagnostics){if(o.has(u))continue;o.add(u);let d=-1,h;for(let p=i;p<this.items.length;p++)if(this.items[p].diagnostic==u){d=p;break}d<0?(h=new Km(this.view,u),this.items.splice(i,0,h),n=!0):(h=this.items[d],d>i&&(this.items.splice(i,d-i),n=!0)),t&&h.diagnostic==t.diagnostic?h.dom.hasAttribute("aria-selected")||(h.dom.setAttribute("aria-selected","true"),r=h):h.dom.hasAttribute("aria-selected")&&h.dom.removeAttribute("aria-selected"),i++}});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)n=!0,this.items.pop();this.items.length==0&&(this.items.push(new Km(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),n=!0),r?(this.list.setAttribute("aria-activedescendant",r.id),this.view.requestMeasure({key:this,read:()=>({sel:r.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:l,panel:a})=>{let c=a.height/this.list.offsetHeight;l.top<a.top?this.list.scrollTop-=(a.top-l.top)/c:l.bottom>a.bottom&&(this.list.scrollTop+=(l.bottom-a.bottom)/c)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),n&&this.sync()}sync(){let e=this.list.firstChild;function t(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)t();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(js),i=_r(t.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:Mb.of(i)})}static open(e){return new Ho(e)}}function D8(s,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(s)}</svg>')`}function ql(s){return D8(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${s}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const E8=Te.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:ql("#d11")},".cm-lintRange-warning":{backgroundImage:ql("orange")},".cm-lintRange-info":{backgroundImage:ql("#999")},".cm-lintRange-hint":{backgroundImage:ql("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function T8(s){return s=="error"?4:s=="warning"?3:s=="info"?2:1}function O8(s){let e="hint",t=1;for(let i of s){let n=T8(i.severity);n>t&&(t=n,e=i.severity)}return e}const j8=[js,Te.decorations.compute([js],s=>{let{selected:e,panel:t}=s.field(js);return!e||!t||e.from==e.to?Fe.none:Fe.set([x8.range(e.from,e.to)])}),y3(w8,{hideOn:b8}),E8],P8=[E3(),j3(),J5(),eM(),SA(),B5(),U5(),tt.allowMultipleSelections.of(!0),uA(),ky(MA,{fallback:!0}),$A(),o8(),v8(),l3(),c3(),t3(),cD(),cf.of([...c8,...nD,...ED,...uM,...bA,..._b,...A8])],$8={class:"rounded-lg border border-gray-300 overflow-hidden dark:border-gray-600"},$f={__name:"CodeEditor",props:{modelValue:{type:String,default:""},language:{type:String,default:"r",validator:s=>["r","markdown","text","gitignore"].includes(s)},minHeight:{type:String,default:"400px"},autoGrow:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:""}},emits:["update:modelValue"],setup(s,{emit:e}){const t=s,i=e,n=ie(null);let r=null;const o=kf.define({token(c){return c.sol()&&c.match(/^#/)?(c.skipToEnd(),"comment"):(c.skipToEnd(),null)}}),l=ky(el.define([{tag:Me.comment,color:"#16a34a"}])),a=()=>[o,l];return os(()=>{if(!n.value)return;const c=Te.updateListener.of(p=>{p.docChanged&&i("update:modelValue",p.state.doc.toString())}),u={"&":{fontSize:"13px",fontFamily:'ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, "Liberation Mono", monospace'},".cm-scroller":{fontFamily:'ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, "Liberation Mono", monospace'},".cm-content":{padding:"12px 0"},".cm-line":{padding:"0 12px"}};t.autoGrow||(u["&"].minHeight=t.minHeight);const d=[P8,a(),c,Te.lineWrapping,Te.theme(u)],h=tt.create({doc:t.modelValue||"",extensions:d});r=new Te({state:h,parent:n.value})}),Re(()=>t.modelValue,c=>{r&&c!==r.state.doc.toString()&&r.dispatch({changes:{from:0,to:r.state.doc.length,insert:c}})}),(c,u)=>(v(),b("div",$8,[f("div",{ref_key:"editorRef",ref:n},null,512)]))}},R8={class:"relative"},L8={key:0,class:"absolute z-10 mt-1 w-full max-h-64 overflow-y-auto border border-gray-200 dark:border-gray-700 rounded-md bg-white dark:bg-gray-800 shadow-lg"},V8=["onClick","onMouseenter"],B8={class:"flex items-center justify-between gap-3"},I8={class:"flex-1 min-w-0"},N8={class:"font-medium text-gray-900 dark:text-white"},F8={class:"text-xs text-gray-500 dark:text-gray-400 truncate"},z8={class:"ml-3 text-xs text-gray-400 dark:text-gray-500 shrink-0 flex items-center gap-1.5"},U8={class:"text-[10px] font-medium"},H8={key:1,class:"absolute right-3 top-9 text-gray-400"},W8={__name:"PackageAutocomplete",props:{modelValue:{type:String,default:""},label:{type:String,default:"Search Packages"},placeholder:{type:String,default:"Type to search..."},source:{type:String,default:"cran",validator:s=>["cran","bioconductor","github"].includes(s)}},emits:["update:modelValue","select"],setup(s,{emit:e}){const t=s,i=e,n=z({get:()=>t.modelValue,set:h=>i("update:modelValue",h)}),r=ie([]),o=ie(!1),l=ie(-1);let a=null;Re(n,h=>{if(a&&clearTimeout(a),h.length<2){r.value=[],l.value=-1;return}a=setTimeout(()=>{c(h)},300)});const c=async h=>{o.value=!0;try{const g=await(await fetch(`/api/packages/search?q=${encodeURIComponent(h)}&source=${encodeURIComponent(t.source)}`)).json();r.value=g.packages||[],l.value=r.value.length>0?0:-1}catch(p){console.error("Failed to search packages:",p),r.value=[],l.value=-1}finally{o.value=!1}},u=h=>{r.value.length!==0&&(h.key==="ArrowDown"?(h.preventDefault(),l.value=Math.min(l.value+1,r.value.length-1)):h.key==="ArrowUp"?(h.preventDefault(),l.value=Math.max(l.value-1,0)):h.key==="Enter"&&l.value>=0?(h.preventDefault(),d(r.value[l.value])):h.key==="Escape"&&(r.value=[],l.value=-1))},d=h=>{i("update:modelValue",h.name),i("select",h),r.value=[],l.value=-1};return(h,p)=>(v(),b("div",R8,[w(Ce,{modelValue:n.value,"onUpdate:modelValue":p[0]||(p[0]=g=>n.value=g),label:s.label,placeholder:s.placeholder,onKeydown:u},null,8,["modelValue","label","placeholder"]),r.value.length>0?(v(),b("div",L8,[(v(!0),b(ve,null,Le(r.value,(g,k)=>(v(),b("button",{key:g.name,onClick:m=>d(g),onMouseenter:m=>l.value=k,class:be(["w-full px-3 py-2 text-left border-b border-gray-200 dark:border-gray-700 last:border-b-0 transition",l.value===k?"bg-sky-50 dark:bg-sky-900/20":"hover:bg-gray-50 dark:hover:bg-gray-700"])},[f("div",B8,[f("div",I8,[f("div",N8,Q(g.name),1),f("div",F8,Q(g.title),1)]),f("div",z8,[f("span",U8,Q(g.source==="cran"?"CRAN":g.source==="bioconductor"?"Bioconductor":g.source),1),p[1]||(p[1]=f("span",null,"",-1)),f("span",null,"v"+Q(g.version),1)])])],42,V8))),128))])):G("",!0),o.value?(v(),b("div",H8,[...p[2]||(p[2]=[f("svg",{class:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[f("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),f("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):G("",!0)]))}},q8={class:"flex items-center justify-between"},K8={class:"flex-1"},G8={class:"text-xs text-gray-500 dark:text-gray-400 mb-1"},J8={class:"text-sm text-gray-900 dark:text-white"},Y8={__name:"OverviewCard",props:{title:{type:String,required:!0}},emits:["click"],setup(s){return(e,t)=>(v(),b("button",{onClick:t[0]||(t[0]=i=>e.$emit("click")),class:"w-full text-left px-4 py-3 rounded-md bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 hover:border-sky-300 dark:hover:border-sky-700 transition"},[f("div",q8,[f("div",K8,[f("div",G8,Q(s.title),1),f("div",J8,[ut(e.$slots,"default")])]),t[1]||(t[1]=f("svg",{class:"h-5 w-5 text-gray-400 shrink-0 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))])]))}},Q8={class:"space-y-3"},X8=["innerHTML"],Rf={__name:"OverviewSummary",props:{cards:{type:Array,required:!0}},emits:["navigate"],setup(s){return(e,t)=>(v(),b("div",Q8,[(v(!0),b(ve,null,Le(s.cards,i=>(v(),Ae(Y8,{key:i.id,title:i.title,onClick:n=>e.$emit("navigate",i.section)},{default:ee(()=>[typeof i.content=="object"?(v(),Ae(_s(i.content),{key:0})):(v(),b("span",{key:1,innerHTML:i.content},null,8,X8))]),_:2},1032,["title","onClick"]))),128))]))}},Z8={class:"pt-4 pb-2"},eE={class:"px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider dark:text-gray-400"},Na={__name:"NavigationSectionHeading",setup(s){return(e,t)=>(v(),b("div",Z8,[f("h3",eE,[ut(e.$slots,"default")])]))}},tE={class:"rounded-lg bg-gray-50 dark:bg-gray-800/50"},sE={class:"space-y-5"},Lf={__name:"AuthorInformationPanel",props:{modelValue:{type:Object,required:!0,validator:s=>typeof s.name=="string"&&typeof s.email=="string"&&typeof s.affiliation=="string"}},emits:["update:modelValue"],setup(s,{emit:e}){const t=s,i=e,n=ie({name:t.modelValue.name??"",email:t.modelValue.email??"",affiliation:t.modelValue.affiliation??""});Re(()=>t.modelValue,c=>{n.value={name:c.name??"",email:c.email??"",affiliation:c.affiliation??""}},{deep:!0});const r=()=>{i("update:modelValue",{...n.value})},o=c=>{n.value.name=c,r()},l=c=>{n.value.email=c,r()},a=c=>{n.value.affiliation=c,r()};return(c,u)=>(v(),b("div",tE,[u[0]||(u[0]=f("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-2"}," Author Information ",-1)),u[1]||(u[1]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-5"}," Used as defaults when creating notebook author settings and similar tasks. ",-1)),f("div",sE,[w(Ce,{"model-value":n.value.name,"onUpdate:modelValue":o,label:"Your Name",placeholder:"Your Name"},null,8,["model-value"]),w(Ce,{"model-value":n.value.email,"onUpdate:modelValue":l,type:"email",label:"Email",placeholder:"your.email@example.com"},null,8,["model-value"]),w(Ce,{"model-value":n.value.affiliation,"onUpdate:modelValue":a,label:"Affiliation",placeholder:"Organization"},null,8,["model-value"])])]))}},iE={class:"space-y-6"},nE={key:0,class:"space-y-3"},rE={class:"flex flex-col gap-3"},oE={class:"grid gap-3 grid-cols-[1fr_160px]"},lE={class:"flex items-center justify-between"},aE={key:1,class:"text-xs text-gray-500 dark:text-gray-400 mb-4"},uE={class:"mt-4"},Vf={__name:"PackagesEditor",props:{modelValue:{type:Object,required:!0},showRenvToggle:{type:Boolean,default:!0},flush:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(s,{emit:e}){const t=s,i=z(()=>t.flush?"":"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"),n=z(()=>t.flush?"":"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"),r=e,o=ie({use_renv:t.modelValue.use_renv??!1,default_packages:t.modelValue.default_packages??[]});Re(()=>t.modelValue,g=>{o.value={use_renv:g.use_renv??!1,default_packages:g.default_packages??[]}},{deep:!0});const l=()=>{r("update:modelValue",{...o.value})},a=g=>{o.value.use_renv=g,l()},c=(g,k)=>{o.value.default_packages[g].name=k,l()},u=(g,k)=>{o.value.default_packages[g].source=k,l()},d=(g,k)=>{o.value.default_packages[g].auto_attach=k,l()},h=()=>{o.value.default_packages.push({name:"",source:"cran",auto_attach:!0}),l()},p=g=>{o.value.default_packages.splice(g,1),l()};return(g,k)=>(v(),b("div",iE,[s.showRenvToggle?(v(),b("div",{key:0,class:be(i.value)},[w(Ke,{"model-value":o.value.use_renv,"onUpdate:modelValue":a,label:"Enable renv",description:"Create renv environments for new projects."},null,8,["model-value"])],2)):G("",!0),f("div",{class:be(n.value)},[k[3]||(k[3]=f("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-2"}," Default packages ",-1)),k[4]||(k[4]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Installed (and optionally attached) when scaffold() runs. ",-1)),k[5]||(k[5]=f("p",{class:"text-xs text-gray-600 dark:text-gray-400 mb-4"}," Use this list to preseed notebooks with your preferred helpers. ",-1)),o.value.default_packages&&o.value.default_packages.length?(v(),b("div",nE,[(v(!0),b(ve,null,Le(o.value.default_packages,(m,x)=>(v(),b("div",{key:`pkg-${x}`,class:"rounded-md border border-gray-200 p-4 dark:border-gray-700"},[f("div",rE,[f("div",oE,[m.source==="cran"||m.source==="bioconductor"?(v(),Ae(W8,{key:0,"model-value":m.name,"onUpdate:modelValue":V=>c(x,V),source:m.source,label:"Package",placeholder:m.source==="cran"?"Search CRAN...":"Search Bioconductor...",onSelect:V=>c(x,V.name)},null,8,["model-value","onUpdate:modelValue","source","placeholder","onSelect"])):(v(),Ae(Ce,{key:1,"model-value":m.name,"onUpdate:modelValue":V=>c(x,V),label:"Package",placeholder:"user/repo"},null,8,["model-value","onUpdate:modelValue"])),w(ts,{"model-value":m.source,"onUpdate:modelValue":V=>u(x,V),label:"Source"},{default:ee(()=>[...k[0]||(k[0]=[f("option",{value:"cran"},"CRAN",-1),f("option",{value:"github"},"GitHub",-1),f("option",{value:"bioconductor"},"Bioconductor",-1)])]),_:1},8,["model-value","onUpdate:modelValue"])]),f("div",lE,[w(Ke,{"model-value":m.auto_attach,"onUpdate:modelValue":V=>d(x,V),label:"Auto-Attach",description:"Call library() when scaffold() runs."},null,8,["model-value","onUpdate:modelValue"]),w(Ge,{size:"sm",variant:"secondary",onClick:V=>p(x)},{default:ee(()=>[...k[1]||(k[1]=[de("Remove",-1)])]),_:1},8,["onClick"])])])]))),128))])):(v(),b("p",aE," No packages configured. Add packages to include tidyverse helpers or internal utilities automatically. ")),f("div",uE,[w(Ge,{size:"sm",variant:"secondary",onClick:h},{default:ee(()=>[...k[2]||(k[2]=[de("Add Package",-1)])]),_:1})])],2)]))}},cE={class:"space-y-6"},dE={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},fE={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},hE={class:"space-y-2"},pE={key:0,class:"pt-6 border-t border-gray-200 dark:border-gray-700"},mE={class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},gE={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-2"},Bf={__name:"AIAssistantsPanel",props:{modelValue:{type:Object,required:!0},flush:{type:Boolean,default:!1},showEditor:{type:Boolean,default:!0},editorHeight:{type:String,default:"500px"},editorDisabled:{type:Boolean,default:!1},editorLoading:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(s,{emit:e}){const t=s,i=e,n=ie(Math.random().toString(36).substring(7)),r=[{id:"claude",label:"Claude Code",description:"Anthropic's IDE-focused assistant."},{id:"copilot",label:"GitHub Copilot",description:"Complements VS Code and JetBrains editors."},{id:"agents",label:"Multi-Agent (OpenAI Codex, Cursor, etc.)",description:"Shared instructions for multi-model orchestrators."}],o=()=>({enabled:t.modelValue?.enabled??!1,canonical_file:t.modelValue?.canonical_file??"CLAUDE.md",assistants:Array.isArray(t.modelValue?.assistants)?t.modelValue.assistants:[],canonical_content:t.modelValue?.canonical_content??""}),l=z(()=>t.flush?"space-y-6":"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 space-y-6"),a=z(o),c=d=>{const h=o(),p=d.assistants!==void 0?d.assistants:h.assistants;i("update:modelValue",{...h,...d,assistants:p})},u=(d,h)=>{const p=[...a.value.assistants];if(h)p.includes(d)||p.push(d);else{const g=p.indexOf(d);g!==-1&&p.splice(g,1)}c({assistants:p})};return(d,h)=>(v(),b("div",{class:be(l.value)},[f("div",cE,[f("div",null,[w(Ke,{"model-value":a.value.enabled,label:"Enable AI Support",description:"Generate and sync assistant-specific context files.","onUpdate:modelValue":h[0]||(h[0]=p=>c({enabled:p}))},null,8,["model-value"])]),a.value.enabled?(v(),b(ve,{key:0},[f("div",dE,[h[4]||(h[4]=f("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Canonical context file",-1)),h[5]||(h[5]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," This file is the source of truth; other instructions files are synced to it when AI hooks run. ",-1)),w(ts,{"model-value":a.value.canonical_file,label:"Canonical Context File","onUpdate:modelValue":h[1]||(h[1]=p=>c({canonical_file:p}))},{default:ee(()=>[...h[3]||(h[3]=[f("option",{value:"AGENTS.md"},"AGENTS.md (multi-agent orchestrator)",-1),f("option",{value:"CLAUDE.md"},"CLAUDE.md",-1),f("option",{value:".github/copilot-instructions.md"},".github/copilot-instructions.md",-1)])]),_:1},8,["model-value"])]),f("div",fE,[h[6]||(h[6]=f("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Assistants",-1)),h[7]||(h[7]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Choose which assistants receive context updates. ",-1)),f("div",hE,[(v(),b(ve,null,Le(r,p=>w(Yi,{key:p.id,id:`ai-${p.id}-${n.value}`,"model-value":a.value.assistants.includes(p.id),"onUpdate:modelValue":g=>u(p.id,g),description:p.description},{default:ee(()=>[de(Q(p.label),1)]),_:2},1032,["id","model-value","onUpdate:modelValue","description"])),64))])]),s.showEditor?(v(),b("div",pE,[h[9]||(h[9]=f("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Canonical instructions",-1)),f("p",mE,[ut(d.$slots,"editor-description",{},()=>[h[8]||(h[8]=de(" Edit the canonical file directly. Framework mirrors this content to other assistant files. ",-1))])]),ut(d.$slots,"editor-alert"),w($f,{"model-value":a.value.canonical_content,language:"markdown","min-height":s.editorHeight,disabled:s.editorDisabled,"onUpdate:modelValue":h[2]||(h[2]=p=>c({canonical_content:p}))},null,8,["model-value","min-height","disabled"]),ut(d.$slots,"editor-actions"),s.editorLoading?(v(),b("p",gE," Loading "+Q(a.value.canonical_file)+" ",1)):G("",!0)])):G("",!0)],64)):G("",!0)])],2))}},vE={class:"space-y-3"},yE={class:"grid gap-4 sm:grid-cols-2"},bE={class:"space-y-3"},kE={class:"space-y-4"},xE={class:"text-xs text-gray-500 dark:text-gray-400"},If={__name:"GitHooksPanel",props:{modelValue:{type:Object,required:!0},flush:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(s,{emit:e}){const t=s,i=e,n=()=>({initialize:t.modelValue?.initialize??!0,user_name:t.modelValue?.user_name??"",user_email:t.modelValue?.user_email??"",hooks:{ai_sync:t.modelValue?.hooks?.ai_sync??!1,data_security:t.modelValue?.hooks?.data_security??!1,check_sensitive_dirs:t.modelValue?.hooks?.check_sensitive_dirs??!1}}),r=z(()=>t.flush?"space-y-6":"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 space-y-6"),o=z(n),l=c=>{const u=n(),d={...u.hooks,...c?.hooks||{}};i("update:modelValue",{...u,...c,hooks:d})},a=(c,u)=>{l({hooks:{[c]:u}})};return(c,u)=>(v(),b("div",{class:be(r.value)},[w(Ke,{"model-value":o.value.initialize,label:"Initialize Git",description:"Run git init for every new project.","onUpdate:modelValue":u[0]||(u[0]=d=>l({initialize:d}))},null,8,["model-value"]),f("div",vE,[u[6]||(u[6]=f("div",null,[f("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"Git identity"),f("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Overrides Author Information when provided. ")],-1)),f("div",yE,[w(Ce,{"model-value":o.value.user_name,label:"Git Name",placeholder:"Jane Analyst",disabled:!o.value.initialize,"onUpdate:modelValue":u[1]||(u[1]=d=>l({user_name:d}))},null,8,["model-value","disabled"]),w(Ce,{"model-value":o.value.user_email,label:"Git Email",placeholder:"jane@example.com",hint:"Used for git config user.email during project setup.",disabled:!o.value.initialize,"onUpdate:modelValue":u[2]||(u[2]=d=>l({user_email:d}))},null,8,["model-value","disabled"])])]),f("div",bE,[u[8]||(u[8]=f("div",null,[f("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"Git Hooks"),f("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Pre-commit hooks that run automatically before each commit. ")],-1)),f("div",kE,[w(Ke,{"model-value":o.value.hooks.ai_sync,label:"Sync AI Files Before Commit",description:"Update non-canonical files so assistants share the same instructions.",disabled:!o.value.initialize,"onUpdate:modelValue":u[3]||(u[3]=d=>a("ai_sync",d))},null,8,["model-value","disabled"]),w(Ke,{"model-value":o.value.hooks.data_security,label:"Check for Secrets",description:"Run a lightweight scan for API keys and credentials before commits.",disabled:!o.value.initialize,"onUpdate:modelValue":u[4]||(u[4]=d=>a("data_security",d))},null,8,["model-value","disabled"]),w(Ke,{"model-value":o.value.hooks.check_sensitive_dirs,label:"Warn About Unignored Sensitive Directories",description:"Block commits if directories with sensitive names aren't gitignored.",disabled:!o.value.initialize,"onUpdate:modelValue":u[5]||(u[5]=d=>a("check_sensitive_dirs",d))},null,8,["model-value","disabled"])]),f("p",xE,[ut(c.$slots,"note",{},()=>[u[7]||(u[7]=de(" Project-specific .gitignore templates can be customized in Project Defaults. ",-1))])])])],2))}},wE={class:"space-y-5"},Nf={__name:"ScaffoldBehaviorPanel",props:{modelValue:{type:Object,required:!0},flush:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(s,{emit:e}){const t=s,i=e,n=(c,u="")=>c==null?u:typeof c=="number"||typeof c=="string"?String(c):u,r=()=>({source_all_functions:t.modelValue?.source_all_functions??!0,set_theme_on_scaffold:t.modelValue?.set_theme_on_scaffold??!0,ggplot_theme:t.modelValue?.ggplot_theme??"theme_minimal",seed_on_scaffold:t.modelValue?.seed_on_scaffold??!1,seed:n(t.modelValue?.seed,"")}),o=z(r),l=z(()=>t.flush?"space-y-5":"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 space-y-5"),a=c=>{const u=r();i("update:modelValue",{...u,...c})};return(c,u)=>(v(),b("div",{class:be(l.value)},[f("div",wE,[f("div",null,[u[5]||(u[5]=f("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Auto-Load Functions",-1)),w(Ke,{"model-value":o.value.source_all_functions,label:"Source all R files from functions/ directory",description:"Automatically loads all helper functions when scaffold() runs","onUpdate:modelValue":u[0]||(u[0]=d=>a({source_all_functions:d}))},null,8,["model-value"])]),f("div",null,[u[7]||(u[7]=f("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"ggplot2 Theme",-1)),w(Ke,{"model-value":o.value.set_theme_on_scaffold,label:"Set ggplot2 theme when scaffold() runs",description:"Automatically sets ggplot2 theme for consistent plot styling","onUpdate:modelValue":u[1]||(u[1]=d=>a({set_theme_on_scaffold:d}))},null,8,["model-value"]),o.value.set_theme_on_scaffold?(v(),Ae(ts,{key:0,"model-value":o.value.ggplot_theme,label:"Theme",class:"mt-4","onUpdate:modelValue":u[2]||(u[2]=d=>a({ggplot_theme:d}))},{default:ee(()=>[...u[6]||(u[6]=[f("option",{value:""},"None",-1),f("option",{value:"theme_minimal"},"Minimal",-1),f("option",{value:"theme_bw"},"Black & White",-1),f("option",{value:"theme_classic"},"Classic",-1),f("option",{value:"theme_gray"},"Gray (default)",-1),f("option",{value:"theme_light"},"Light",-1),f("option",{value:"theme_dark"},"Dark",-1),f("option",{value:"theme_void"},"Void",-1)])]),_:1},8,["model-value"])):G("",!0)]),f("div",null,[u[8]||(u[8]=f("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Random Seed",-1)),w(Ke,{"model-value":o.value.seed_on_scaffold,label:"Set random seed when scaffold() runs",description:"Ensures deterministic behavior for reproducibility","onUpdate:modelValue":u[3]||(u[3]=d=>a({seed_on_scaffold:d}))},null,8,["model-value"]),o.value.seed_on_scaffold?(v(),Ae(Ce,{key:0,"model-value":o.value.seed,label:"Seed Value",placeholder:"e.g., 1234 or 20241107",hint:"Leave empty to use global default",class:"mt-4","onUpdate:modelValue":u[4]||(u[4]=d=>a({seed:d}))},null,8,["model-value"])):G("",!0)])])],2))}},SE={class:"space-y-6"},CE={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},_E={class:"mb-4 rounded-md border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900 p-4"},AE={class:"flex items-center justify-between mb-3"},ME={class:"flex items-center gap-2"},DE={class:"space-y-3"},EE={class:"grid grid-cols-2 gap-3"},TE={class:"flex items-center gap-2"},OE=["id","checked","onChange"],jE=["for"],PE={key:0},$E={key:1,class:"space-y-3"},RE={class:"grid grid-cols-2 gap-3"},LE={class:"grid grid-cols-2 gap-3"},VE={class:"grid grid-cols-2 gap-3"},BE={key:2,class:"space-y-3"},IE={class:"grid grid-cols-2 gap-3"},NE={class:"grid grid-cols-2 gap-3"},FE={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},zE={class:"space-y-3"},UE={class:"flex items-center gap-2"},HE=["id","checked","onChange"],WE=["for"],qE={class:"grid grid-cols-2 gap-3"},KE={class:"grid grid-cols-2 gap-3"},Ff={__name:"ConnectionsPanel",props:{databaseConnections:{type:Array,required:!0},s3Connections:{type:Array,required:!0},defaultDatabase:{type:String,default:null},defaultStorageBucket:{type:String,default:null}},emits:["update:databaseConnections","update:s3Connections","update:defaultDatabase","update:defaultStorageBucket"],setup(s,{emit:e}){const t=s,i=e;Re(()=>t.databaseConnections,c=>{if(c.length===1&&!t.defaultDatabase){const u=c[0];u?.name&&u.name!=="framework_db"&&i("update:defaultDatabase",u.name)}},{deep:!0,immediate:!0}),Re(()=>t.s3Connections,c=>{if(c.length===1&&!t.defaultStorageBucket){const u=c[0];u?.name&&i("update:defaultStorageBucket",u.name)}},{deep:!0,immediate:!0});const n=(c,u)=>!c||c.trim()===""?"Connection name is required":c==="framework_db"?"framework_db is reserved for system use":t.databaseConnections.findIndex((p,g)=>g!==u&&p.name===c)!==-1?"Connection name must be unique":t.s3Connections.findIndex(p=>p.name===c)!==-1?"Connection name must be unique across all connections":null,r=(c,u)=>!c||c.trim()===""?"Connection name is required":c==="framework_db"?"framework_db is reserved for system use":t.s3Connections.findIndex((p,g)=>g!==u&&p.name===c)!==-1?"Connection name must be unique":t.databaseConnections.findIndex(p=>p.name===c)!==-1?"Connection name must be unique across all connections":null,o=(c,u)=>{let d=1,h=c;for(;u.includes(h)||h==="framework_db";)d+=1,h=`${c}_${d}`;return h},l=()=>{const c=t.databaseConnections.map(g=>g.name);let u="postgres",d="database";c.some(g=>g.startsWith("postgres"))?c.some(g=>g.startsWith("mysql"))?c.some(g=>g.startsWith("sqlserver"))||(u="sqlserver",d="sqlserver"):(u="mysql",d="mysql"):(u="postgres",d="postgres");const h=o(d,c),p={_id:Date.now(),name:h,driver:u};return u==="postgres"?{...p,host:'env("POSTGRES_HOST", "localhost")',port:'env("POSTGRES_PORT", "5432")',database:'env("POSTGRES_DB", "mydb")',schema:'env("POSTGRES_SCHEMA", "public")',user:'env("POSTGRES_USER", "postgres")',password:'env("POSTGRES_PASSWORD", "")'}:u==="mysql"?{...p,host:'env("MYSQL_HOST", "localhost")',port:'env("MYSQL_PORT", "3306")',database:'env("MYSQL_DB", "mydb")',user:'env("MYSQL_USER", "root")',password:'env("MYSQL_PASSWORD", "")'}:u==="sqlserver"?{...p,host:'env("SQLSERVER_HOST", "localhost")',port:'env("SQLSERVER_PORT", "1433")',database:'env("SQLSERVER_DB", "mydb")',user:'env("SQLSERVER_USER", "sa")',password:'env("SQLSERVER_PASSWORD", "")'}:p},a=()=>({_id:Date.now(),name:o("s3_bucket",t.s3Connections.map(c=>c.name)),bucket:'env("S3_BUCKET", "my-bucket")',region:'env("S3_REGION", "us-east-1")',endpoint:'env("S3_ENDPOINT", "")',access_key:'env("S3_ACCESS_KEY", "")',secret_key:'env("S3_SECRET_KEY", "")'});return(c,u)=>(v(),b("div",SE,[f("div",CE,[u[7]||(u[7]=f("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Databases",-1)),f("div",_E,[f("div",AE,[f("div",ME,[w(ou,{variant:"gray",size:"sm"},{default:ee(()=>[...u[2]||(u[2]=[de("System",-1)])]),_:1}),u[3]||(u[3]=f("span",{class:"text-sm font-medium text-gray-900 dark:text-gray-100 font-mono"},"framework_db",-1))]),u[4]||(u[4]=f("span",{class:"text-xs text-gray-500 dark:text-gray-400"},"SQLite - Framework metadata",-1))]),u[5]||(u[5]=f("div",{class:"text-sm text-gray-600 dark:text-gray-400 font-mono"}," framework.db ",-1))]),w(En,{"model-value":s.databaseConnections,"onUpdate:modelValue":u[0]||(u[0]=d=>c.$emit("update:databaseConnections",d)),"add-label":"Add Database","default-item":l},{default:ee(({item:d,index:h,update:p})=>[f("div",DE,[f("div",EE,[w(Ce,{"model-value":d.name,"onUpdate:modelValue":g=>p("name",g),label:"Connection Name",error:n(d.name,h),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),w(ts,{"model-value":d.driver,"onUpdate:modelValue":g=>p("driver",g),label:"Driver",size:"sm"},{default:ee(()=>[...u[6]||(u[6]=[f("option",{value:"sqlite"},"SQLite",-1),f("option",{value:"postgres"},"PostgreSQL",-1),f("option",{value:"mysql"},"MySQL",-1),f("option",{value:"sqlserver"},"SQL Server",-1)])]),_:1},8,["model-value","onUpdate:modelValue"])]),f("div",TE,[f("input",{type:"radio",id:`default-db-${d._id}`,checked:s.defaultDatabase===d.name,onChange:g=>c.$emit("update:defaultDatabase",d.name),class:"h-4 w-4 text-sky-600 focus:ring-sky-500"},null,40,OE),f("label",{for:`default-db-${d._id}`,class:"text-sm text-gray-700 dark:text-gray-300"}," Default database ",8,jE)]),d.driver==="sqlite"?(v(),b("div",PE,[w(Ce,{"model-value":d.database,"onUpdate:modelValue":g=>p("database",g),label:"Database Path",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])):d.driver==="postgres"||d.driver==="postgresql"?(v(),b("div",$E,[f("div",RE,[w(Ce,{"model-value":d.host,"onUpdate:modelValue":g=>p("host",g),label:"Host",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),w(Ce,{"model-value":d.port,"onUpdate:modelValue":g=>p("port",g),label:"Port",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])]),f("div",LE,[w(Ce,{"model-value":d.database,"onUpdate:modelValue":g=>p("database",g),label:"Database",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),w(Ce,{"model-value":d.schema,"onUpdate:modelValue":g=>p("schema",g),label:"Schema",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])]),f("div",VE,[w(Ce,{"model-value":d.user,"onUpdate:modelValue":g=>p("user",g),label:"User",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),w(Ce,{"model-value":d.password,"onUpdate:modelValue":g=>p("password",g),label:"Password",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])])):d.driver==="mysql"||d.driver==="sqlserver"?(v(),b("div",BE,[f("div",IE,[w(Ce,{"model-value":d.host,"onUpdate:modelValue":g=>p("host",g),label:"Host",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),w(Ce,{"model-value":d.port,"onUpdate:modelValue":g=>p("port",g),label:"Port",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])]),w(Ce,{"model-value":d.database,"onUpdate:modelValue":g=>p("database",g),label:"Database",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),f("div",NE,[w(Ce,{"model-value":d.user,"onUpdate:modelValue":g=>p("user",g),label:"User",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),w(Ce,{"model-value":d.password,"onUpdate:modelValue":g=>p("password",g),label:"Password",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])])):G("",!0)])]),_:1},8,["model-value"])]),f("div",FE,[u[8]||(u[8]=f("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"S3-compatible Storage",-1)),w(En,{"model-value":s.s3Connections,"onUpdate:modelValue":u[1]||(u[1]=d=>c.$emit("update:s3Connections",d)),"add-label":"Add Bucket","default-item":a},{default:ee(({item:d,index:h,update:p})=>[f("div",zE,[w(Ce,{"model-value":d.name,"onUpdate:modelValue":g=>p("name",g),label:"Connection Name",error:r(d.name,h),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),f("div",UE,[f("input",{type:"radio",id:`default-s3-${d._id}`,checked:s.defaultStorageBucket===d.name,onChange:g=>c.$emit("update:defaultStorageBucket",d.name),class:"h-4 w-4 text-sky-600 focus:ring-sky-500"},null,40,HE),f("label",{for:`default-s3-${d._id}`,class:"text-sm text-gray-700 dark:text-gray-300"}," Default storage bucket ",8,WE)]),f("div",qE,[w(Ce,{"model-value":d.bucket,"onUpdate:modelValue":g=>p("bucket",g),label:"Bucket",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),w(Ce,{"model-value":d.region,"onUpdate:modelValue":g=>p("region",g),label:"Region",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])]),w(Ce,{"model-value":d.endpoint,"onUpdate:modelValue":g=>p("endpoint",g),label:"Endpoint",hint:"Leave empty for AWS S3, or specify custom endpoint for MinIO, etc.",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),f("div",KE,[w(Ce,{"model-value":d.access_key,"onUpdate:modelValue":g=>p("access_key",g),label:"Access Key",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),w(Ce,{"model-value":d.secret_key,"onUpdate:modelValue":g=>p("secret_key",g),label:"Secret Key",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])])]),_:1},8,["model-value"])])]))}},GE={key:0,class:"space-y-2"},JE={key:0,class:"text-lg font-semibold text-gray-900 dark:text-white"},YE={key:1,class:"text-sm text-gray-600 dark:text-gray-400"},QE={class:"space-y-6"},Xt={__name:"SettingsPanel",props:{title:{type:String,default:""},description:{type:String,default:""},flush:{type:Boolean,default:!1}},setup(s){return(e,t)=>(v(),b("section",{class:be(["space-y-6",s.flush?"":"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"])},[s.title||s.description?(v(),b("header",GE,[s.title?(v(),b("h2",JE,Q(s.title),1)):G("",!0),s.description?(v(),b("p",YE,Q(s.description),1)):G("",!0)])):G("",!0),f("div",QE,[ut(e.$slots,"default")]),e.$slots.actions?(v(),b("div",{key:1,class:be(["flex justify-end",s.flush?"":"pt-4 border-t border-gray-200 dark:border-gray-700"])},[ut(e.$slots,"actions")],2)):G("",!0)],2))}},XE={class:"space-y-3"},ZE={key:0,class:"space-y-1"},eT={key:0,class:"text-sm font-semibold text-gray-900 dark:text-white"},tT={key:1,class:"text-xs text-gray-600 dark:text-gray-400"},sT={class:"space-y-3"},_d={__name:"SettingsBlock",props:{title:{type:String,default:""},description:{type:String,default:""}},setup(s){return(e,t)=>(v(),b("div",XE,[s.title||s.description?(v(),b("div",ZE,[s.title?(v(),b("h3",eT,Q(s.title),1)):G("",!0),s.description?(v(),b("p",tT,Q(s.description),1)):G("",!0)])):G("",!0),f("div",sT,[ut(e.$slots,"default")])]))}},iT={class:"space-y-5"},nT={key:0,class:"grid grid-cols-2 gap-3"},rT={key:0,class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},oT={class:"grid grid-cols-2 gap-3"},lT={__name:"CourseDirectoriesPanel",props:{directoriesEnabled:{type:Object,required:!0},directories:{type:Object,required:!0},renderDirs:{type:Object,default:()=>({})},catalog:{type:Object,default:()=>({})},extraDirectoriesEnabled:{type:Object,default:()=>({})},extraDirectories:{type:Array,default:()=>[]},projectCustomDirectories:{type:Array,default:()=>[]},allowCustomDirectories:{type:Boolean,default:!1},flush:{type:Boolean,default:!1}},emits:["update:directoriesEnabled","update:directories","update:renderDirs","update:extraDirectoriesEnabled","update:projectCustomDirectories"],setup(s,{emit:e}){const t=s,i=e,n=ie(Math.random().toString(36).substring(7)),r=["slides","assignments","course_docs","notebooks"],o=["readings","data"],l=["functions","scripts"],a=z(()=>t.flush?"":"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"),c=P=>P in t.directoriesEnabled?t.directoriesEnabled[P]:t.catalog?.directories?.[P]?.enabled_by_default??!1,u=(P,S)=>{i("update:directoriesEnabled",{...t.directoriesEnabled,[P]:S})},d=P=>t.directories[P]||"",h=(P,S)=>{i("update:directories",{...t.directories,[P]:S})},p=P=>{const S=P==="notebooks"?"modules":P;return t.renderDirs[S]?t.renderDirs[S]:t.catalog?.render_dirs?.[S]?.default||""},g=(P,S)=>{const j=P==="notebooks"?"modules":P;i("update:renderDirs",{...t.renderDirs,[j]:S})},k=P=>{if(!t.catalog||typeof t.catalog!="object")return"";const S=P==="notebooks"?"modules":P;return(t.catalog.render_dirs||{})[S]?.default||`rendered/${S}`},m=P=>!t.catalog||typeof t.catalog!="object"?P.charAt(0).toUpperCase()+P.slice(1):(t.catalog.directories||{})[P]?.label||P.charAt(0).toUpperCase()+P.slice(1),x=P=>!t.catalog||typeof t.catalog!="object"?"":(t.catalog.directories||{})[P]?.hint||"",V=P=>!t.catalog||typeof t.catalog!="object"?P:(t.catalog.directories||{})[P]?.default||P,I=P=>t.extraDirectoriesEnabled[P]??!1,U=(P,S)=>{i("update:extraDirectoriesEnabled",{...t.extraDirectoriesEnabled,[P]:S})},N=(P,S)=>{console.warn("Extra directory paths are managed in global settings")};return(P,S)=>(v(),b("div",{class:be(a.value)},[S[3]||(S[3]=f("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"},"Materials",-1)),S[4]||(S[4]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Slides, assignments, readings, and course documentation with automatic rendering to web-ready formats. ",-1)),f("div",iT,[(v(),b(ve,null,Le(r,j=>f("div",{key:j},[w(Ke,{id:`course-${j}-${n.value}`,"model-value":c(j),"onUpdate:modelValue":H=>u(j,H),label:m(j),description:x(j),class:"mb-2"},null,8,["id","model-value","onUpdate:modelValue","label","description"]),c(j)?(v(),b("div",nT,[w(Ce,{"model-value":d(j),"onUpdate:modelValue":H=>h(j,H),placeholder:V(j),label:"Source files",prefix:"/",monospace:""},null,8,["model-value","onUpdate:modelValue","placeholder"]),w(Ce,{"model-value":p(j),"onUpdate:modelValue":H=>g(j,H),placeholder:k(j),label:"Quarto render directory",prefix:"/",monospace:""},null,8,["model-value","onUpdate:modelValue","placeholder"])])):G("",!0)])),64)),(v(),b(ve,null,Le(o,j=>f("div",{key:j},[w(Ke,{id:`course-${j}-${n.value}`,"model-value":c(j),"onUpdate:modelValue":H=>u(j,H),label:m(j),description:x(j),class:"mb-2"},null,8,["id","model-value","onUpdate:modelValue","label","description"]),c(j)?(v(),Ae(Ce,{key:0,"model-value":d(j),"onUpdate:modelValue":H=>h(j,H),placeholder:V(j),prefix:"/",monospace:""},null,8,["model-value","onUpdate:modelValue","placeholder"])):G("",!0)])),64)),(v(),b(ve,null,Le(l,j=>f("div",{key:j},[w(Ke,{id:`course-${j}-${n.value}`,"model-value":c(j),"onUpdate:modelValue":H=>u(j,H),label:m(j),description:x(j),class:"mb-2"},null,8,["id","model-value","onUpdate:modelValue","label","description"]),c(j)?(v(),Ae(Ce,{key:0,"model-value":d(j),"onUpdate:modelValue":H=>h(j,H),placeholder:V(j),prefix:"/",monospace:""},null,8,["model-value","onUpdate:modelValue","placeholder"])):G("",!0)])),64)),(v(!0),b(ve,null,Le(s.extraDirectories,j=>(v(),b("div",{key:`extra-${j.key}`,class:"space-y-1.5"},[w(Ke,{id:`extra-course-${j.key}-${n.value}`,"model-value":I(j.key),"onUpdate:modelValue":H=>U(j.key,H),label:j.label,description:`Custom: ${j.path}`,class:"mb-2"},null,8,["id","model-value","onUpdate:modelValue","label","description"]),I(j.key)?(v(),Ae(Ce,{key:0,"model-value":j.path,"onUpdate:modelValue":H=>N(j.key),placeholder:j.path,prefix:"/",monospace:"",readonly:""},null,8,["model-value","onUpdate:modelValue","placeholder"])):G("",!0)]))),128))]),s.allowCustomDirectories?(v(),b("div",rT,[S[1]||(S[1]=f("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"}," Add Custom Course Directories ",-1)),S[2]||(S[2]=f("p",{class:"text-xs text-gray-600 dark:text-gray-400 mb-3"}," Add directories specific to this course only. ",-1)),w(En,{"model-value":s.projectCustomDirectories,"onUpdate:modelValue":S[0]||(S[0]=j=>P.$emit("update:projectCustomDirectories",j)),"add-label":"Add Course Directory","default-item":()=>({key:"",label:"",path:"",type:"course",_id:Date.now()})},{default:ee(({item:j,index:H,update:ue})=>[f("div",oT,[w(Ce,{"model-value":j.key,"onUpdate:modelValue":X=>ue("key",X),label:"Key",placeholder:"e.g., course_videos",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),w(Ce,{"model-value":j.label,"onUpdate:modelValue":X=>ue("label",X),label:"Label",placeholder:"e.g., Videos",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),w(Ce,{"model-value":j.path,"onUpdate:modelValue":X=>ue("path",X),label:"Path",placeholder:"e.g., videos",prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])):G("",!0)],2))}},aT={class:"space-y-6"},uT={class:"space-y-5"},cT=["value"],dT={class:"flex flex-wrap items-center justify-between gap-3"},fT={class:"flex flex-wrap gap-2 text-xs font-medium text-gray-600 dark:text-gray-400"},hT={key:1,id:"section-primary-files"},pT={class:"space-y-4"},mT={key:2,id:"section-optional-directories"},gT={class:"space-y-4"},vT={class:"space-y-2"},yT={class:"space-y-2"},bT={class:"space-y-2"},kT={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},xT={key:0,class:"space-y-3 mb-4"},wT={class:"space-y-3"},ST={key:3,id:"section-materials"},CT={key:4,id:"section-inputs"},_T={key:0},AT={class:"space-y-5"},MT={class:"space-y-2"},DT={class:"space-y-2"},ET={key:1,class:"space-y-5"},TT={key:2,class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},OT={key:0,class:"space-y-3 mb-4"},jT={class:"space-y-3"},PT={key:5,id:"section-workspaces"},$T={class:"space-y-5"},RT={key:0,class:"grid grid-cols-2 gap-3"},LT={key:0,class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},VT={key:0,class:"space-y-3 mb-4"},BT={class:"space-y-3"},IT={key:6,id:"section-outputs"},NT={key:0},FT={class:"space-y-5"},zT={class:"space-y-2"},UT={class:"space-y-2"},HT={key:1,class:"space-y-5"},WT={key:2,class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},qT={key:0,class:"space-y-3 mb-4"},KT={class:"space-y-3"},GT={key:7,id:"section-utility"},JT={class:"space-y-5"},YT={id:"section-gitignore"},zf={__name:"ProjectStructureEditor",props:{projectType:{type:String,required:!0},directories:{type:Object,required:!0},renderDirs:{type:Object,default:()=>({})},enabled:{type:Object,required:!0},extraDirectories:{type:Array,default:()=>[]},settings:{type:Object,default:()=>({})},gitignore:{type:String,default:""},catalog:{type:Object,required:!0},newExtraIds:{type:Set,default:()=>new Set},disabled:{type:Boolean,default:!1},allowDestruction:{type:Boolean,default:!0}},emits:["update:directories","update:renderDirs","update:enabled","update:extraDirectories","update:settings","update:gitignore","update:newExtraIds","reset"],setup(s,{emit:e}){const t=s,i=e,n=ie({...t.directories}),r=ie({...t.renderDirs}),o=ie({...t.enabled}),l=ie({...t.settings}),a=ie(t.gitignore),c=Y=>n.value[Y]?n.value[Y]:t.catalog?.directories?.[Y]?.default||"",u=Y=>r.value[Y]?r.value[Y]:t.catalog?.render_dirs?.[Y]?.default||"";Re(()=>t.directories,Y=>{n.value={...Y}},{deep:!0}),Re(()=>t.renderDirs,Y=>{r.value={...Y}},{deep:!0}),Re(()=>t.enabled,Y=>{o.value={...Y}},{deep:!0}),Re(()=>t.settings,Y=>{l.value={...Y}},{deep:!0}),Re(()=>t.gitignore,Y=>{a.value=Y}),Re(()=>t.extraDirectories,Y=>{if(Y.some(C=>C.label&&!C.key)){const C=[...t.catalog?.directories?Object.keys(t.catalog.directories):[],...Y.filter(_=>_.key).map(_=>_.key)],se=Y.map(_=>{if(_.label&&!_.key){const E=ye(_.label,C);return C.push(E),console.log("[DEBUG] Auto-generated key:",{label:_.label,key:E}),{..._,key:E}}return _});i("update:extraDirectories",se)}},{deep:!0});const d=[{key:"notebooks",label:"Notebooks",hint:"Quarto or R Markdown notebooks for analysis.",defaultRenderDir:"outputs/notebooks"},{key:"docs",label:"Documentation",hint:"Codebooks, documentation, and other reference materials.",defaultRenderDir:"outputs/docs"}],h=[{key:"functions",label:"Functions",hint:"R files here are sourced by scaffold(), so helper functions are available in every project session."},{key:"scripts",label:"Scripts",hint:"Reusable R scripts, job runners, or automation tasks."}],p=[{key:"inputs_raw",label:"Raw data",hint:"Read-only exports from source systems."},{key:"inputs_intermediate",label:"Intermediate data",hint:"Data after light cleaning or pre-processing steps."},{key:"inputs_final",label:"Analysis-ready data",hint:"Final inputs ready for modeling or reporting."}],g=[{key:"outputs_tables",label:"Tables",hint:"Publishable tables ready for reports or manuscripts."},{key:"outputs_figures",label:"Figures",hint:"Final plots and graphics."},{key:"outputs_models",label:"Models",hint:"Serialized models or model summaries."},{key:"outputs_reports",label:"Reports",hint:"Final reports and deliverables ready for publication."}],k=[{key:"cache",label:"Cache",hint:"Temporary artifacts (gitignored)."},{key:"scratch",label:"Scratch",hint:"Short-lived explorations (gitignored)."}],m=Y=>t.catalog?.directories?.[Y]||{},x=Y=>Y.map(W=>{const C=m(W.key),se=t.catalog?.render_dirs?.[W.key]||{};return{key:W.key,label:C.label||W.label,hint:C.hint||W.hint||"",defaultRenderDir:se.default||W.defaultRenderDir||""}}),V=z(()=>t.projectType==="project_sensitive"),I=z(()=>t.projectType==="presentation"),U=z(()=>t.projectType==="course"),N=(Y,W)=>Y.map(C=>{const se=`${W}_private_${C.key.replace(W+"_","")}`,_=`${W}_public_${C.key.replace(W+"_","")}`,E=m(se),F=m(_);return{privateKey:se,publicKey:_,privateLabel:E.label||`${C.label} (private)`,publicLabel:F.label||`${C.label} (public)`,hint:C.hint||""}}),P=z(()=>x(d)),S=z(()=>x(h)),j=z(()=>[...P.value,...S.value]),H=z(()=>V.value?N(p,"inputs"):x(p)),ue=z(()=>V.value?N(g,"outputs"):x(g)),X=z(()=>x(k)),B=z(()=>t.catalog?.settings||[]),ae=z(()=>t.extraDirectories.filter(Y=>Y.type==="input"&&!t.newExtraIds.has(Y._id))),te=z(()=>t.extraDirectories.filter(Y=>Y.type==="workspace"&&!t.newExtraIds.has(Y._id))),$=z(()=>t.extraDirectories.filter(Y=>Y.type==="output"&&!t.newExtraIds.has(Y._id))),K=z(()=>t.extraDirectories.filter(Y=>Y.type==="input"&&t.newExtraIds.has(Y._id))),J=z(()=>t.extraDirectories.filter(Y=>Y.type==="workspace"&&t.newExtraIds.has(Y._id))),ce=z(()=>t.extraDirectories.filter(Y=>Y.type==="output"&&t.newExtraIds.has(Y._id))),ye=(Y,W=[])=>{if(!Y)return"";let C=Y.toLowerCase().trim().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,"").replace(/_+/g,"_").replace(/^_|_$/g,""),se=C,_=2;for(;W.includes(se);)se=`${C}_${_}`,_++;return se},Pe=(Y,W)=>{n.value[Y]=W,i("update:directories",{...n.value})},Ve=(Y,W)=>{r.value[Y]=W,i("update:renderDirs",{...r.value})},je=(Y,W)=>{!t.allowDestruction&&o.value[Y]===!0&&W===!1||(o.value[Y]=W,i("update:enabled",{...o.value}))},We=Y=>!!(t.disabled||!t.allowDestruction&&o.value[Y]===!0),rt=(Y,W)=>{l.value[Y]=W,i("update:settings",{...l.value})},ot=(Y,W)=>{const C=t.extraDirectories.map(se=>se.key===Y?{...se,path:W}:se);i("update:extraDirectories",C)},Ze=(Y,W)=>{console.log("[DEBUG] updateNewExtras called:",{type:Y,newItems:JSON.parse(JSON.stringify(W)),itemCount:W.length});const C=t.extraDirectories.filter(Z=>Z.type===Y&&!t.newExtraIds.has(Z._id)),_=t.extraDirectories.filter(Z=>Z.type===Y&&t.newExtraIds.has(Z._id)).filter(Z=>!W.some(D=>D._id===Z._id)),E=new Set(t.newExtraIds);_.forEach(Z=>{Z._id&&E.delete(Z._id)}),W.forEach(Z=>{Z._id&&E.add(Z._id)}),i("update:newExtraIds",E);const F={...o.value};let ne=!1;W.forEach(Z=>{if(Z.key){const D=C.some(R=>R.key===Z.key),O=t.catalog?.directories&&Object.keys(t.catalog.directories).includes(Z.key);!F.hasOwnProperty(Z.key)&&!D&&!O&&(F[Z.key]=!0,ne=!0)}}),ne&&i("update:enabled",F);const re=t.extraDirectories.filter(Z=>Z.type!==Y);i("update:extraDirectories",[...re,...C,...W])},oe=Y=>{const W=document.getElementById(`section-${Y}`);W&&W.scrollIntoView({behavior:"smooth",block:"start"})};return(Y,W)=>(v(),b("div",aT,[B.value.length>0?(v(),Ae(Xt,{key:0,title:"Project Settings",description:"Default settings applied when creating new projects of this type."},{default:ee(()=>[w(_d,null,{default:ee(()=>[f("div",uT,[(v(!0),b(ve,null,Le(B.value,C=>(v(),b(ve,{key:C.id},[C.control==="toggle"?(v(),Ae(Ke,{key:0,"model-value":l.value[C.id],"onUpdate:modelValue":se=>rt(C.id,se),label:C.label,description:C.description,disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","label","description","disabled"])):C.control==="select"?(v(),Ae(ts,{key:1,"model-value":l.value[C.id],"onUpdate:modelValue":se=>rt(C.id,se),label:C.label,hint:C.hint},{default:ee(()=>[(v(!0),b(ve,null,Le(C.options,se=>(v(),b("option",{key:se.value,value:se.value},Q(se.label),9,cT))),128))]),_:2},1032,["model-value","onUpdate:modelValue","label","hint"])):C.control==="text"?(v(),Ae(Ce,{key:2,"model-value":l.value[C.id],"onUpdate:modelValue":se=>rt(C.id,se),label:C.label,hint:C.hint,placeholder:C.placeholder},null,8,["model-value","onUpdate:modelValue","label","hint","placeholder"])):G("",!0)],64))),128))])]),_:1})]),_:1})):G("",!0),f("div",dT,[f("div",fT,[I.value?(v(),b("button",{key:0,type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:W[0]||(W[0]=C=>oe("primary-files"))}," Primary Files ")):G("",!0),I.value?(v(),b("button",{key:1,type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:W[1]||(W[1]=C=>oe("optional-directories"))}," Optional Directories ")):G("",!0),U.value?(v(),b("button",{key:2,type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:W[2]||(W[2]=C=>oe("materials"))}," Materials ")):G("",!0),!I.value&&!U.value&&H.value.length>0?(v(),b("button",{key:3,type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:W[3]||(W[3]=C=>oe("inputs"))}," Inputs ")):G("",!0),!I.value&&!U.value&&j.value.length>0?(v(),b("button",{key:4,type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:W[4]||(W[4]=C=>oe("workspaces"))}," Workspaces ")):G("",!0),!I.value&&!U.value&&ue.value.length>0?(v(),b("button",{key:5,type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:W[5]||(W[5]=C=>oe("outputs"))}," Outputs ")):G("",!0),!I.value&&!U.value&&X.value.length>0?(v(),b("button",{key:6,type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:W[6]||(W[6]=C=>oe("utility"))}," Utility ")):G("",!0),f("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:W[7]||(W[7]=C=>oe("gitignore"))}," .gitignore ")]),!s.disabled&&s.allowDestruction?(v(),Ae(Ge,{key:0,variant:"secondary",size:"sm",class:"mt-3 sm:mt-0",onClick:W[8]||(W[8]=C=>Y.$emit("reset"))},{default:ee(()=>[...W[25]||(W[25]=[de(" Reset to Defaults ",-1)])]),_:1})):G("",!0)]),I.value?(v(),b("div",hT,[w(Xt,{title:"Primary Files",description:"The main presentation file and where rendered slides are output."},{default:ee(()=>[f("div",pT,[w(Ce,{"model-value":n.value.presentation_source,"onUpdate:modelValue":W[9]||(W[9]=C=>Pe("presentation_source",C)),label:"Presentation source file",placeholder:"presentation.qmd",hint:"Main Quarto file for your slides",disabled:s.disabled},null,8,["model-value","disabled"]),w(Ce,{"model-value":n.value.rendered_slides,"onUpdate:modelValue":W[10]||(W[10]=C=>Pe("rendered_slides",C)),label:"Rendered slides directory",placeholder:".",hint:"Rendered slides write to the project root by default (.)",prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","disabled"])])]),_:1})])):G("",!0),I.value?(v(),b("div",mT,[w(Xt,{title:"Optional Directories",description:"Toggle extra scaffolding when you need supporting data, scripts, or helper utilities."},{default:ee(()=>[f("div",gT,[f("div",vT,[w(Ke,{"model-value":o.value.data,"onUpdate:modelValue":W[11]||(W[11]=C=>je("data",C)),label:"Include data directory",description:"Adds a /data folder for sample data used in the presentation.",disabled:We("data")},null,8,["model-value","disabled"]),o.value.data?(v(),Ae(Ce,{key:0,"model-value":c("data"),"onUpdate:modelValue":W[12]||(W[12]=C=>Pe("data",C)),prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","disabled"])):G("",!0)]),f("div",yT,[w(Ke,{"model-value":o.value.scripts,"onUpdate:modelValue":W[13]||(W[13]=C=>je("scripts",C)),label:"Include scripts directory",description:"Adds a scripts/ folder for demo code or automation.",disabled:We("scripts")},null,8,["model-value","disabled"]),o.value.scripts?(v(),Ae(Ce,{key:0,"model-value":c("scripts"),"onUpdate:modelValue":W[14]||(W[14]=C=>Pe("scripts",C)),prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","disabled"])):G("",!0)]),f("div",bT,[w(Ke,{"model-value":o.value.functions,"onUpdate:modelValue":W[15]||(W[15]=C=>je("functions",C)),label:"Include functions directory",description:"Adds functions/ for helper utilities that should load automatically.",disabled:We("functions")},null,8,["model-value","disabled"]),o.value.functions?(v(),Ae(Ce,{key:0,"model-value":c("functions"),"onUpdate:modelValue":W[16]||(W[16]=C=>Pe("functions",C)),prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","disabled"])):G("",!0)]),f("div",kT,[W[26]||(W[26]=f("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Add Custom Directories",-1)),te.value.length>0?(v(),b("div",xT,[(v(!0),b(ve,null,Le(te.value,C=>(v(),b("div",{key:C.key,class:"space-y-1.5"},[w(Ke,{"model-value":o.value[C.key],"onUpdate:modelValue":se=>je(C.key,se),label:C.label,disabled:We(C.key)},null,8,["model-value","onUpdate:modelValue","label","disabled"]),o.value[C.key]!==!1?(v(),Ae(Ce,{key:0,"model-value":C.path,"onUpdate:modelValue":se=>ot(C.key,se),prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):G("",!0)]))),128))])):G("",!0),s.disabled?G("",!0):(v(),Ae(En,{key:1,"model-value":J.value,"onUpdate:modelValue":W[17]||(W[17]=C=>Ze("workspace",C)),"add-label":"Add Directory","default-item":()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:ee(({item:C,update:se})=>[f("div",wT,[w(Ce,{"model-value":C.label,"onUpdate:modelValue":_=>se("label",_),label:"Label",placeholder:"e.g., Assets"},null,8,["model-value","onUpdate:modelValue"]),w(Ce,{"model-value":C.path,"onUpdate:modelValue":_=>se("path",_),label:"Path",placeholder:"e.g., assets",prefix:"/",monospace:""},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"]))])])]),_:1})])):G("",!0),U.value?(v(),b("div",ST,[w(lT,{"directories-enabled":o.value,"onUpdate:directoriesEnabled":W[18]||(W[18]=C=>{o.value=C,i("update:enabled",C)}),directories:n.value,"onUpdate:directories":W[19]||(W[19]=C=>{n.value=C,i("update:directories",C)}),"render-dirs":r.value,"onUpdate:renderDirs":W[20]||(W[20]=C=>{r.value=C,i("update:renderDirs",C)}),catalog:s.catalog,"extra-directories":s.extraDirectories.filter(C=>C.type==="course"),"extra-directories-enabled":{},"onUpdate:extraDirectoriesEnabled":()=>{},"project-custom-directories":[],"onUpdate:projectCustomDirectories":()=>{},"allow-custom-directories":!1,flush:!1},null,8,["directories-enabled","directories","render-dirs","catalog","extra-directories"])])):G("",!0),!I.value&&!U.value&&H.value.length>0?(v(),b("div",CT,[w(Xt,{title:"Inputs",description:V.value?"Keep private inputs compartmentalized; publish processed outputs into public folders when ready.":"Define the read-only locations where raw and prepared data live."},{default:ee(()=>[V.value?(v(),b("div",_T,[W[27]||(W[27]=f("div",{class:"grid gap-4 sm:grid-cols-2 text-xs font-semibold uppercase text-gray-500 dark:text-gray-400 mb-4"},[f("div",null,"Private"),f("div",null,"Public")],-1)),f("div",AT,[(v(!0),b(ve,null,Le(H.value,C=>(v(),b("div",{key:C.privateKey,class:"grid gap-4 sm:grid-cols-2"},[f("div",MT,[w(Ke,{"model-value":o.value[C.privateKey],"onUpdate:modelValue":se=>je(C.privateKey,se),label:C.privateLabel,disabled:We(C.privateKey)},null,8,["model-value","onUpdate:modelValue","label","disabled"]),o.value[C.privateKey]!==!1?(v(),Ae(Ce,{key:0,"model-value":c(C.privateKey),"onUpdate:modelValue":se=>Pe(C.privateKey,se),prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):G("",!0)]),f("div",DT,[w(Ke,{"model-value":o.value[C.publicKey],"onUpdate:modelValue":se=>je(C.publicKey,se),label:C.publicLabel,disabled:We(C.publicKey)},null,8,["model-value","onUpdate:modelValue","label","disabled"]),o.value[C.publicKey]!==!1?(v(),Ae(Ce,{key:0,"model-value":c(C.publicKey),"onUpdate:modelValue":se=>Pe(C.publicKey,se),prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):G("",!0)])]))),128))])])):(v(),b("div",ET,[(v(!0),b(ve,null,Le(H.value,C=>(v(),b("div",{key:C.key,class:"space-y-1.5"},[w(Ke,{"model-value":o.value[C.key],"onUpdate:modelValue":se=>je(C.key,se),label:C.label,description:C.hint,disabled:We(C.key)},null,8,["model-value","onUpdate:modelValue","label","description","disabled"]),o.value[C.key]!==!1?(v(),Ae(Ce,{key:0,"model-value":c(C.key),"onUpdate:modelValue":se=>Pe(C.key,se),prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):G("",!0)]))),128))])),(ae.value.length>0,v(),b("div",TT,[W[28]||(W[28]=f("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Input Directories",-1)),ae.value.length>0?(v(),b("div",OT,[(v(!0),b(ve,null,Le(ae.value,C=>(v(),b("div",{key:C.key,class:"space-y-1.5"},[w(Ke,{"model-value":o.value[C.key],"onUpdate:modelValue":se=>je(C.key,se),label:C.label,disabled:We(C.key)},null,8,["model-value","onUpdate:modelValue","label","disabled"]),o.value[C.key]!==!1?(v(),Ae(Ce,{key:0,"model-value":C.path,"onUpdate:modelValue":se=>ot(C.key,se),prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):G("",!0)]))),128))])):G("",!0),s.disabled?G("",!0):(v(),Ae(En,{key:1,"model-value":K.value,"onUpdate:modelValue":W[21]||(W[21]=C=>Ze("input",C)),addLabel:"Add Input Directory",defaultItem:()=>({key:"",label:"",path:"",type:"input",_id:Date.now()})},{default:ee(({item:C,update:se})=>[f("div",jT,[w(Ce,{"model-value":C.label,"onUpdate:modelValue":_=>se("label",_),label:"Label",placeholder:"Archive"},null,8,["model-value","onUpdate:modelValue"]),w(Ce,{"model-value":C.path,"onUpdate:modelValue":_=>se("path",_),label:"Path",prefix:"/",placeholder:"inputs/archive",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])])]),_:1},8,["model-value","defaultItem"]))]))]),_:1},8,["description"])])):G("",!0),!I.value&&!U.value&&j.value.length>0?(v(),b("div",PT,[w(Xt,{title:"Workspaces",description:"Functions, notebooks, and scripts scaffolded into every project."},{default:ee(()=>[f("div",$T,[(v(!0),b(ve,null,Le(P.value,C=>(v(),b("div",{key:C.key,class:"space-y-1.5"},[w(Ke,{"model-value":o.value[C.key],"onUpdate:modelValue":se=>je(C.key,se),label:C.label,description:C.hint,disabled:We(C.key)},null,8,["model-value","onUpdate:modelValue","label","description","disabled"]),o.value[C.key]!==!1?(v(),b("div",RT,[w(Ce,{"model-value":c(C.key),"onUpdate:modelValue":se=>Pe(C.key,se),label:"Source files",prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"]),w(Ce,{"model-value":u(C.key),"onUpdate:modelValue":se=>Ve(C.key,se),label:"Quarto render directory",prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])])):G("",!0)]))),128)),(v(!0),b(ve,null,Le(S.value,C=>(v(),b("div",{key:C.key,class:"space-y-1.5"},[w(Ke,{"model-value":o.value[C.key],"onUpdate:modelValue":se=>je(C.key,se),label:C.label,description:C.hint,disabled:We(C.key)},null,8,["model-value","onUpdate:modelValue","label","description","disabled"]),o.value[C.key]!==!1?(v(),Ae(Ce,{key:0,"model-value":c(C.key),"onUpdate:modelValue":se=>Pe(C.key,se),prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):G("",!0)]))),128))]),(te.value.length>0,v(),b("div",LT,[W[29]||(W[29]=f("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Workspace Directories",-1)),te.value.length>0?(v(),b("div",VT,[(v(!0),b(ve,null,Le(te.value,C=>(v(),b("div",{key:C.key,class:"space-y-1.5"},[w(Ke,{"model-value":o.value[C.key],"onUpdate:modelValue":se=>je(C.key,se),label:C.label,disabled:We(C.key)},null,8,["model-value","onUpdate:modelValue","label","disabled"]),o.value[C.key]!==!1?(v(),Ae(Ce,{key:0,"model-value":C.path,"onUpdate:modelValue":se=>ot(C.key,se),prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):G("",!0)]))),128))])):G("",!0),s.disabled?G("",!0):(v(),Ae(En,{key:1,"model-value":J.value,"onUpdate:modelValue":W[22]||(W[22]=C=>Ze("workspace",C)),addLabel:"Add Workspace Directory",defaultItem:()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:ee(({item:C,update:se})=>[f("div",BT,[w(Ce,{"model-value":C.label,"onUpdate:modelValue":_=>se("label",_),label:"Label",placeholder:"Templates"},null,8,["model-value","onUpdate:modelValue"]),w(Ce,{"model-value":C.path,"onUpdate:modelValue":_=>se("path",_),label:"Path",prefix:"/",placeholder:"templates",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])])]),_:1},8,["model-value","defaultItem"]))]))]),_:1})])):G("",!0),!I.value&&!U.value&&ue.value.length>0?(v(),b("div",IT,[w(Xt,{title:"Outputs",description:V.value?"Review outputs before promotion; private folders remain gitignored while public copies are ready to share.":"Results, figures, models, and reports generated by your analysis."},{default:ee(()=>[V.value?(v(),b("div",NT,[W[30]||(W[30]=f("div",{class:"grid gap-4 sm:grid-cols-2 text-xs font-semibold uppercase text-gray-500 dark:text-gray-400 mb-4"},[f("div",null,"Private"),f("div",null,"Public")],-1)),f("div",FT,[(v(!0),b(ve,null,Le(ue.value,C=>(v(),b("div",{key:C.privateKey,class:"grid gap-4 sm:grid-cols-2"},[f("div",zT,[w(Ke,{"model-value":o.value[C.privateKey],"onUpdate:modelValue":se=>je(C.privateKey,se),label:C.privateLabel,disabled:We(C.privateKey)},null,8,["model-value","onUpdate:modelValue","label","disabled"]),o.value[C.privateKey]!==!1?(v(),Ae(Ce,{key:0,"model-value":c(C.privateKey),"onUpdate:modelValue":se=>Pe(C.privateKey,se),prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):G("",!0)]),f("div",UT,[w(Ke,{"model-value":o.value[C.publicKey],"onUpdate:modelValue":se=>je(C.publicKey,se),label:C.publicLabel,disabled:We(C.publicKey)},null,8,["model-value","onUpdate:modelValue","label","disabled"]),o.value[C.publicKey]!==!1?(v(),Ae(Ce,{key:0,"model-value":c(C.publicKey),"onUpdate:modelValue":se=>Pe(C.publicKey,se),prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):G("",!0)])]))),128))])])):(v(),b("div",HT,[(v(!0),b(ve,null,Le(ue.value,C=>(v(),b("div",{key:C.key,class:"space-y-1.5"},[w(Ke,{"model-value":o.value[C.key],"onUpdate:modelValue":se=>je(C.key,se),label:C.label,description:C.hint,disabled:We(C.key)},null,8,["model-value","onUpdate:modelValue","label","description","disabled"]),o.value[C.key]!==!1?(v(),Ae(Ce,{key:0,"model-value":c(C.key),"onUpdate:modelValue":se=>Pe(C.key,se),prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):G("",!0)]))),128))])),($.value.length>0,v(),b("div",WT,[W[31]||(W[31]=f("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Output Directories",-1)),$.value.length>0?(v(),b("div",qT,[(v(!0),b(ve,null,Le($.value,C=>(v(),b("div",{key:C.key,class:"space-y-1.5"},[w(Ke,{"model-value":o.value[C.key],"onUpdate:modelValue":se=>je(C.key,se),label:C.label,disabled:We(C.key)},null,8,["model-value","onUpdate:modelValue","label","disabled"]),o.value[C.key]!==!1?(v(),Ae(Ce,{key:0,"model-value":C.path,"onUpdate:modelValue":se=>ot(C.key,se),prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):G("",!0)]))),128))])):G("",!0),s.disabled?G("",!0):(v(),Ae(En,{key:1,"model-value":ce.value,"onUpdate:modelValue":W[23]||(W[23]=C=>Ze("output",C)),addLabel:"Add Output Directory",defaultItem:()=>({key:"",label:"",path:"",type:"output",_id:Date.now()})},{default:ee(({item:C,update:se})=>[f("div",KT,[w(Ce,{"model-value":C.label,"onUpdate:modelValue":_=>se("label",_),label:"Label",placeholder:"Archive"},null,8,["model-value","onUpdate:modelValue"]),w(Ce,{"model-value":C.path,"onUpdate:modelValue":_=>se("path",_),label:"Path",prefix:"/",placeholder:"outputs/archive",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])])]),_:1},8,["model-value","defaultItem"]))]))]),_:1},8,["description"])])):G("",!0),!I.value&&!U.value&&X.value.length>0?(v(),b("div",GT,[w(Xt,{title:"Utility",description:"Cache, scratch space, and other temporary directories (gitignored by default)."},{default:ee(()=>[f("div",JT,[(v(!0),b(ve,null,Le(X.value,C=>(v(),b("div",{key:C.key,class:"space-y-1.5"},[w(Ke,{"model-value":o.value[C.key],"onUpdate:modelValue":se=>je(C.key,se),label:C.label,description:C.hint,disabled:We(C.key)},null,8,["model-value","onUpdate:modelValue","label","description","disabled"]),o.value[C.key]!==!1?(v(),Ae(Ce,{key:0,"model-value":c(C.key),"onUpdate:modelValue":se=>Pe(C.key,se),prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):G("",!0)]))),128))])]),_:1})])):G("",!0),f("div",YT,[w(Xt,{title:".gitignore Patterns",description:"Define which files and directories Git should ignore."},{default:ee(()=>[w(_d,null,{default:ee(()=>[w($f,{"model-value":a.value,"onUpdate:modelValue":W[24]||(W[24]=C=>Y.$emit("update:gitignore",C)),language:"gitignore","min-height":"500px",disabled:s.disabled,placeholder:`# Framework gitignore patterns
cache/
scratch/
*.log`},null,8,["model-value","disabled"])]),_:1})]),_:1})])]))}},QT=["onClick","aria-current"],XT={class:"mt-4"},ZT={__name:"Tabs",props:{modelValue:{type:[String,Number],required:!0},tabs:{type:Array,required:!0,validator:s=>s.every(e=>e.id&&e.label)},variant:{type:String,default:"pills",validator:s=>["pills","underline"].includes(s)},size:{type:String,default:"md",validator:s=>["sm","md","lg"].includes(s)}},emits:["update:modelValue","change"],setup(s,{emit:e}){const t=s,i=e,n=z(()=>t.variant==="underline"?"border-b border-gray-200 dark:border-white/10":""),r=z(()=>{const a=["flex","gap-2"];return t.variant==="underline"?a.push("-mb-px"):a.push("p-1","bg-gray-100","dark:bg-white/5","rounded-lg"),a.join(" ")}),o=a=>{const c=t.modelValue===a,u=["inline-flex","items-center","gap-2","font-medium","transition-colors"],d={sm:"px-2.5 py-1.5 text-xs",md:"px-3 py-2 text-sm",lg:"px-4 py-2.5 text-base"};return u.push(d[t.size]),t.variant==="pills"?(u.push("rounded-md"),c?u.push("bg-white","text-gray-900","shadow-xs","dark:bg-white/10","dark:text-white"):u.push("text-gray-600","hover:text-gray-900","dark:text-gray-400","dark:hover:text-white")):(u.push("border-b-2","pb-3"),c?u.push("border-sky-600","text-sky-600","dark:border-sky-500","dark:text-sky-400"):u.push("border-transparent","text-gray-600","hover:border-gray-300","hover:text-gray-900","dark:text-gray-400","dark:hover:border-gray-600","dark:hover:text-white")),u.join(" ")},l=a=>{i("update:modelValue",a),i("change",a)};return(a,c)=>(v(),b("div",null,[f("div",{class:be(n.value)},[f("nav",{class:be(r.value),"aria-label":"Tabs"},[(v(!0),b(ve,null,Le(s.tabs,u=>(v(),b("button",{key:u.id,type:"button",onClick:d=>l(u.id),class:be(o(u.id)),"aria-current":s.modelValue===u.id?"page":void 0},[u.icon?(v(),Ae(_s(u.icon),{key:0,class:"size-5"})):G("",!0),de(" "+Q(u.label)+" ",1),u.badge?(v(),Ae(ou,{key:1,variant:s.modelValue===u.id?"emerald":"gray",pill:""},{default:ee(()=>[de(Q(u.badge),1)]),_:2},1032,["variant"])):G("",!0)],10,QT))),128))],2)],2),f("div",XT,[ut(a.$slots,"default")])]))}},e6={key:0,class:"mb-4"},t6={key:1,class:"mb-4"},s6={key:2,class:"space-y-6"},i6={key:0,class:"rounded-lg bg-gray-50 p-8 text-center dark:bg-gray-800/40"},n6={key:1,class:"space-y-5"},r6={class:"mb-4"},o6={class:"text-sm font-semibold text-gray-900 dark:text-white"},l6={class:"text-xs text-gray-500 dark:text-gray-400"},a6={class:"space-y-3"},u6={class:"flex items-start gap-3"},c6={class:"grid flex-1 grid-cols-2 gap-3"},d6=["value","onInput","disabled"],f6={class:"relative"},h6=["onUpdate:modelValue","type","placeholder","disabled"],p6=["onClick"],m6=["onClick"],g6={key:0,class:"mt-4"},v6={key:2,class:"rounded-lg border border-gray-200 bg-gray-50 p-4 text-sm dark:border-gray-700 dark:bg-gray-800/60"},y6={key:3,class:"space-y-3"},b6=["disabled"],k6={key:4,class:"mt-4 flex justify-end"},Uf={__name:"EnvEditor",props:{loading:{type:Boolean,default:!1},error:{type:String,default:""},showSecurityAlert:{type:Boolean,default:!0},allowAdd:{type:Boolean,default:!0},allowRemove:{type:Boolean,default:!0},allowShowValuesToggle:{type:Boolean,default:!0},allowRegroupOption:{type:Boolean,default:!0},showSaveButton:{type:Boolean,default:!0},saveLabel:{type:String,default:"Save .env"},groups:{type:Object,default:()=>({})},variables:{type:Object,default:()=>({})},rawContent:{type:String,default:""},viewMode:{type:String,default:"grouped"},regroupOnSave:{type:Boolean,default:!1}},emits:["update:variables","update:rawContent","update:viewMode","update:regroupOnSave","save"],setup(s,{emit:e}){const t=s,i=e,n=j=>JSON.parse(JSON.stringify(j||{})),r=ie(n(t.variables)),o=ie(t.rawContent||""),l=ie(t.viewMode||"grouped"),a=ie(!!t.regroupOnSave),c=ie(!1),u=ie({});let d=!1,h=!1;Re(()=>t.variables,j=>{d=!0,r.value=n(j),Rs(()=>{d=!1})},{deep:!0}),Re(()=>t.rawContent,j=>{h=!0,o.value=j||"",Rs(()=>{h=!1})},{immediate:!0}),Re(()=>t.viewMode,j=>{l.value=j||"grouped"}),Re(()=>t.regroupOnSave,j=>{a.value=!!j}),Re(r,j=>{d||(i("update:variables",n(j)),l.value!=="raw"&&(o.value=m(o.value,j,a.value),i("update:rawContent",o.value)))},{deep:!0}),Re(o,j=>{if(!h&&l.value==="raw"){i("update:rawContent",j);const H=p(j);r.value=H,i("update:variables",n(H))}}),Re(l,(j,H)=>{i("update:viewMode",j),j==="raw"&&H!=="raw"&&(Object.keys(r.value).length>0?o.value=m(o.value,r.value,a.value):!o.value&&t.rawContent&&(o.value=t.rawContent))}),Re(a,j=>{i("update:regroupOnSave",j)});const p=j=>{const H=(j||"").split(/\r?\n/),ue={};return H.forEach(X=>{const B=X.trim();if(!B||B.startsWith("#")||!B.includes("="))return;const[ae,...te]=B.split("=");ue[ae.trim()]=te.join("=").replace(/^"|"$/g,"")}),ue},g=j=>{const H=Object.entries(j||{});return H.length?H.reduce((ue,[X,B])=>{const ae=X.includes("_")?X.split("_")[0]:"Other";return ue[ae]||(ue[ae]={}),ue[ae][X]={defined:!!B,used:!1,used_in:[],value:B},ue},{}):{}},k=z(()=>{const j=t.groups||{};return Object.keys(j).length?j:g(r.value)}),m=(j,H,ue=!1)=>{if(ue){const $={};for(const[ce,ye]of Object.entries(H)){const Pe=ce.includes("_")?ce.split("_")[0]:"Other";$[Pe]||($[Pe]=[]),$[Pe].push([ce,ye])}const K=[],J=Object.keys($).sort();for(let ce=0;ce<J.length;ce++){const ye=J[ce],Pe=$[ye];ce>0&&(K.push(""),K.push("")),K.push(`# ${ye==="Other"?"Other variables":ye.toUpperCase()}`);for(const[Ve,je]of Pe)K.push(`${Ve}=${je??""}`)}return K.join(`
`)}const X=(j||"").split(/\r?\n/),B=new Set,ae=[];for(const $ of X){const K=$.trim();if(!K||K.startsWith("#")||!K.includes("=")){ae.push($);continue}const[J,...ce]=K.split("="),ye=J.trim(),Pe=ce.join("=").trim();if(ye in H){const Ve=H[ye]??"";ae.push(`${ye}=${Ve}`),B.add(ye)}else(Object.keys(H).length===0||Pe==="")&&ae.push($)}const te=Object.entries(H).filter(([$])=>!B.has($));if(te.length>0){const $={};for(const[K,J]of te){const ce=K.includes("_")?K.split("_")[0]:"Other";$[ce]||($[ce]=[]),$[ce].push([K,J])}for(const[K,J]of Object.entries($)){ae.length>0&&ae[ae.length-1]!==""&&(ae.push(""),ae.push("")),ae.push(`# ${K==="Other"?"Other variables":K.toUpperCase()}`);for(const[ce,ye]of J)ae.push(`${ce}=${ye??""}`)}}return ae.join(`
`)},x=()=>{if(!t.allowAdd)return;const j="NEW_VARIABLE";let H=1,ue=`${j}_${H}`;for(;r.value[ue];)H+=1,ue=`${j}_${H}`;r.value={...r.value,[ue]:""}},V=j=>{if(!t.allowRemove)return;const H=n(r.value);delete H[j],r.value=H},I=(j,H)=>{if(!H||j===H)return;const ue=H.replace(/[^A-Z0-9_]/gi,"").toUpperCase();if(!ue)return;const X=n(r.value);X[ue]||(X[ue]=X[j],delete X[j],r.value=X)},U=j=>{const H=["PASSWORD","SECRET","KEY","TOKEN"],ue=j.toUpperCase();return H.some(X=>ue.includes(X))},N=j=>c.value||u.value[j]||!U(j),P=j=>{u.value[j]=!u.value[j]},S=()=>{c.value=!c.value};return(j,H)=>(v(),b("div",null,[s.error?(v(),b("div",e6,[w(ks,{type:"error",title:"Error",description:s.error},null,8,["description"])])):G("",!0),s.showSecurityAlert?(v(),b("div",t6,[w(ks,{type:"warning",title:" Contains Sensitive Data"},{actions:ee(()=>[s.viewMode==="grouped"&&s.allowShowValuesToggle?(v(),Ae(Ge,{key:0,variant:"soft",size:"sm",onClick:S},{default:ee(()=>[de(Q(c.value?"Hide Values":"Show Values"),1)]),_:1})):G("",!0)]),default:ee(()=>[H[4]||(H[4]=de(" This file can include passwords and secrets. Keep it out of version control. ",-1))]),_:1})])):G("",!0),w(ZT,{modelValue:l.value,"onUpdate:modelValue":H[0]||(H[0]=ue=>l.value=ue),tabs:[{id:"grouped",label:"Key/Value Editor"},{id:"raw",label:"Raw .env"}],variant:"pills",class:"mb-4"},null,8,["modelValue"]),l.value==="grouped"?(v(),b("div",s6,[Object.keys(k.value).length===0?(v(),b("div",i6,[w(dt(nu),{class:"mx-auto mb-3 h-10 w-10 text-gray-400"}),H[6]||(H[6]=f("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"No environment variables yet.",-1)),s.allowAdd?(v(),Ae(Ge,{key:0,variant:"primary",class:"mt-4",onClick:x},{default:ee(()=>[...H[5]||(H[5]=[de(" Add Variable ",-1)])]),_:1})):G("",!0)])):(v(),b("div",n6,[(v(!0),b(ve,null,Le(k.value,(ue,X)=>(v(),b("div",{key:X,class:"rounded-lg bg-gray-50 p-5 dark:bg-gray-800/40"},[f("div",r6,[f("p",o6,Q(X==="Other"?"Uncategorized":X.toUpperCase()),1),f("p",l6,"Variables with the "+Q(X)+" prefix.",1)]),f("div",a6,[(v(!0),b(ve,null,Le(ue,(B,ae)=>(v(),b("div",{key:ae,class:"space-y-2"},[f("div",u6,[f("div",c6,[f("input",{value:ae,onInput:te=>I(ae,te.target.value),type:"text",class:"w-full rounded-md border border-gray-300 bg-white px-3 py-2 font-mono text-sm uppercase text-gray-900 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-100",disabled:s.loading},null,40,d6),f("div",f6,[Je(f("input",{"onUpdate:modelValue":te=>r.value[ae]=te,type:N(ae)?"text":"password",placeholder:B.defined?"value":"(not set)",class:"w-full rounded-md border border-gray-300 bg-white px-3 py-2 font-mono text-sm text-gray-900 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-100",disabled:s.loading},null,8,h6),[[wx,r.value[ae]]]),U(ae)&&s.allowShowValuesToggle?(v(),b("button",{key:0,type:"button",class:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300",onClick:te=>P(ae)},[N(ae)?(v(),Ae(dt(Ww),{key:0,class:"h-4 w-4"})):(v(),Ae(dt(qw),{key:1,class:"h-4 w-4"}))],8,p6)):G("",!0)])]),s.allowRemove?(v(),b("button",{key:0,type:"button",class:"mt-2 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300",onClick:te=>V(ae)},[...H[7]||(H[7]=[f("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,m6)):G("",!0)])]))),128))]),s.allowAdd?(v(),b("div",g6,[w(Ge,{variant:"secondary",size:"sm",onClick:x},{default:ee(()=>[...H[8]||(H[8]=[de(" + Add Variable ",-1)])]),_:1})])):G("",!0)]))),128))])),s.allowRegroupOption?(v(),b("div",v6,[w(Ke,{modelValue:a.value,"onUpdate:modelValue":H[1]||(H[1]=ue=>a.value=ue),label:"Regroup .env file by prefix when saving",description:"Rewrites the file grouped by prefix and strips comments."},null,8,["modelValue"])])):G("",!0)])):(v(),b("div",y6,[Je(f("textarea",{"onUpdate:modelValue":H[2]||(H[2]=ue=>o.value=ue),class:"h-80 w-full rounded-md border border-gray-300 bg-white px-3 py-2 font-mono text-sm text-gray-900 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-100",disabled:s.loading},null,8,b6),[[pr,o.value]]),H[9]||(H[9]=f("p",{class:"text-xs text-gray-500"},"Edit the .env file directly. Comments and formatting are preserved.",-1))])),s.showSaveButton?(v(),b("div",k6,[w(Ge,{disabled:s.loading,variant:"primary",onClick:H[3]||(H[3]=ue=>j.$emit("save"))},{default:ee(()=>[de(Q(s.saveLabel),1)]),_:1},8,["disabled"])])):G("",!0)]))}},Hf=({useGit:s,gitHooks:e,git:t}={})=>{const i=e||t?.hooks||{};return{initialize:s!==!1&&t?.initialize!==!1,user_name:t?.user_name||"",user_email:t?.user_email||"",hooks:{ai_sync:i.ai_sync||!1,data_security:i.data_security||!1,check_sensitive_dirs:i.check_sensitive_dirs||!1}}},Wf=({gitTarget:s,gitHooksTarget:e,setUseGit:t}={},i={})=>{typeof t=="function"&&t(i.initialize),s&&(s.initialize=i.initialize,s.user_name=i.user_name,s.user_email=i.user_email,s.hooks={ai_sync:i.hooks?.ai_sync||!1,data_security:i.hooks?.data_security||!1,check_sensitive_dirs:i.hooks?.check_sensitive_dirs||!1}),e&&(e.ai_sync=i.hooks?.ai_sync||!1,e.data_security=i.hooks?.data_security||!1,e.check_sensitive_dirs=i.hooks?.check_sensitive_dirs||!1)},x6=(s={},e={},t={},i={})=>{const n=l=>typeof l=="string"?l:l&&typeof l=="object"&&l.default||"",r={},o={};return Object.entries(s).forEach(([l,a])=>{const c=n(a),u=i[l]||"";r[l]=e[l]||c||u,t[l]!==void 0?o[l]=t[l]:a&&typeof a=="object"&&a.enabled_by_default!==void 0?o[l]=a.enabled_by_default===!0:o[l]=!0}),{directories:r,directories_enabled:o}},w6=(s={},e={},t={})=>{const i=r=>typeof r=="string"?r:r&&typeof r=="object"&&r.default||"",n={};return Object.entries(s).forEach(([r,o])=>{const l=i(o),a=t[r]||"";n[r]=e[r]||l||a}),n},S6=(s=[],e={})=>(s||[]).filter(t=>!(!t.key||!t.label||!t.path||!t.type||e&&e[t.key]===!1)),Tb=(s={},e=[],t={})=>{const i=new Set;Object.keys(s||{}).forEach(r=>i.add(r)),(e||[]).forEach(r=>{r.key&&i.add(r.key)});const n={};return Object.keys(t||{}).forEach(r=>{i.has(r)&&(n[r]=t[r])}),n},Ob=(s={},e={},t={},i={})=>{const{directories:n,directories_enabled:r}=x6(s.directories||{},e.directories||{},e.directories_enabled||{},t),o=w6(s.render_dirs||{},e.render_dirs||{},i),l=e.extra_directories||[],a={...r,...e.directories_enabled||{}};return{directories:n,directories_enabled:r,render_dirs:o,extra_directories:l,enabled:a}},C6=(s={},e={})=>{const t=s.directories||{},i=s.render_dirs||{},n=s.extra_directories||[],r=Tb(e,n,s.enabled||{});return{directories:t,render_dirs:i,extra_directories:n,enabled:r}},jb=({catalogDirs:s={},directories:e={},render_dirs:t={},enabled:i={},extra_directories:n=[]})=>{const r=Tb(s,n,i),o=S6(n,r);return{directories:e,render_dirs:t,enabled:r,extra_directories:o}},Wo=(s={})=>({name:s.name||"",source:s.source||"cran",auto_attach:s.auto_attach!==!1}),Fa=s=>s?s.default_packages?{use_renv:!!s.use_renv,default_packages:(s.default_packages||[]).map(Wo)}:Array.isArray(s)?{use_renv:!1,default_packages:s.map(Wo)}:{use_renv:!!s.use_renv,default_packages:[]}:{use_renv:!1,default_packages:[]},_6=(s={})=>{const e=!!s.use_renv,t=(s.default_packages||[]).filter(i=>i?.name&&i.name.trim()!=="").map(Wo);return{use_renv:e,default_packages:t}},A6=s=>({use_renv:!!s?.use_renv,default_packages:(s?.packages||[]).map(Wo)}),Pb=(s={})=>{const e=!!s.use_renv,t=(s.default_packages||[]).filter(i=>i?.name&&i.name.trim()!=="").map(Wo);return{use_renv:e,default_packages:t}},M6={class:"flex min-h-screen"},D6={class:"w-64 shrink-0 border-r border-gray-200 p-6 dark:border-gray-800"},E6={class:"space-y-1 mb-6"},T6=["onClick"],O6=["fill","viewBox","stroke"],j6=["stroke-linecap","stroke-linejoin","stroke-width","fill","d"],P6={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},$6={class:"flex-1 p-10"},R6={class:"mt-8 space-y-6"},L6={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},V6={class:"space-y-5"},B6={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},I6={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 space-y-6"},N6={class:"space-y-6"},F6={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},z6={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},U6={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},H6={__name:"NewProjectView",setup(s){const e=su(),t=Dr(),i=ru(),n=Is("loadProjects"),r=ie(null),o=ie(null),l=ie(!0),a=D=>D?Array.isArray(D)?Array.from(new Set(D.map(O=>String(O)))):typeof D=="string"?[D]:[]:[],c=()=>{Array.isArray(m.value.ai.assistants)||(m.value.ai.assistants=a(m.value.ai.assistants))},u=[{id:"overview",label:"Overview",icon:iu},{id:"basics",label:"Basics",icon:Kd},{id:"structure",label:"Project Structure",icon:ba},{id:"packages",label:"Packages",icon:Gd},{id:"ai",label:"AI Assistants",svgIcon:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"},{id:"git",label:"Git & Hooks",svgIcon:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"},{id:"connections",label:"Connections",icon:Jd},{id:"env",label:".env Defaults",icon:nu},{id:"scaffold",label:"Scaffold Behavior",svgIcon:"M256 64L576 64L576 576L64 576L64 192L256 192L256 64zM256 224L96 224L96 544L256 544L256 224zM288 544L544 544L544 96L288 96L288 544zM440 152L488 152L488 200L440 200L440 152zM392 152L392 200L344 200L344 152L392 152zM440 248L488 248L488 296L440 296L440 248zM392 248L392 296L344 296L344 248L392 248zM152 280L200 280L200 328L152 328L152 280zM392 344L392 392L344 392L344 344L392 344zM152 376L200 376L200 424L152 424L152 376zM488 344L488 392L440 392L440 344L488 344z",svgViewBox:"0 0 640 640",svgFill:"currentColor",svgStroke:"none",svgStrokeWidth:0,svgPathFill:"currentColor"}],d=ie("basics"),h=ie(!1),p=ie(null),g=ie(!0),k=ie(new Set),m=ie({name:"",location:"",type:"project",author:{name:"",email:"",affiliation:""},scaffold:{seed_on_scaffold:!1,seed:"",set_theme_on_scaffold:!0,ggplot_theme:"theme_minimal",source_all_functions:!0,notebook_format:"quarto",ide:"vscode",positron:!1},packages:{...Fa()},ai:{enabled:!0,assistants:[],canonical_file:"CLAUDE.md",canonical_content:""},git:{initialize:!0,gitignore_template:"gitignore-project",gitignore_content:"",user_name:"",user_email:"",hooks:{ai_sync:!1,data_security:!1,check_sensitive_dirs:!1}},connections:{databaseConnections:[],s3Connections:[],defaultDatabase:null,defaultStorageBucket:null},env:{variables:{},rawContent:`# Framework environment defaults
# Populate these values before running scaffold() or publishing.

# PostgreSQL connection
POSTGRES_HOST=127.0.0.1
POSTGRES_PORT=5432
POSTGRES_DB=postgres
POSTGRES_SCHEMA=public
POSTGRES_USER=postgres
POSTGRES_PASSWORD=

# S3-compatible storage (AWS S3, MinIO, etc.)
S3_ACCESS_KEY=
S3_SECRET_KEY=
S3_BUCKET=
S3_REGION=us-east-1
S3_ENDPOINT=`,viewMode:"grouped",regroupOnSave:!1,groups:{}},directories_enabled:{},directories:{},render_dirs:{},extra_directories:[],extra_directories_enabled:{}}),x=()=>{const D=t.query.section;D&&["overview","author","scaffold","structure","connections","env","packages","ai","git"].includes(D)&&(d.value=D)};Re(()=>t.query.section,D=>{D&&["overview","author","scaffold","structure","connections","env","packages","ai","git"].includes(D)?d.value=D:D||(d.value="overview")}),Re(d,D=>{t.query.section!==D&&e.replace({query:{...t.query,section:D}})}),os(async()=>{console.log("[DEBUG] NewProjectView mounted - starting initialization"),x();try{console.log("[DEBUG] Fetching global settings from /api/settings");const D=await fetch("/api/settings");if(console.log("[DEBUG] Settings response status:",D.status,D.ok),D.ok&&(r.value=await D.json(),r.value)){r.value.global?.projects_root&&(m.value.location=r.value.global.projects_root),m.value.author={...r.value.author},r.value.defaults?.project_type&&(m.value.type=r.value.defaults.project_type),r.value.defaults?.scaffold&&(m.value.scaffold={...m.value.scaffold,...r.value.defaults.scaffold}),r.value.defaults?.notebook_format&&(m.value.scaffold.notebook_format=r.value.defaults.notebook_format),m.value.scaffold.notebook_format||(m.value.scaffold.notebook_format="quarto"),r.value.defaults?.positron!==void 0&&(m.value.scaffold.positron=r.value.defaults.positron),(r.value.defaults?.default_packages||r.value.defaults?.packages)&&(m.value.packages=Fa({use_renv:r.value.defaults.use_renv,default_packages:r.value.defaults.default_packages||r.value.defaults.packages}));const R=a(r.value.defaults?.ai_assistants);if(m.value.ai={enabled:r.value.defaults?.ai_support!==!1,assistants:R.length>0?R:["claude"],canonical_file:r.value.defaults?.ai_canonical_file||"CLAUDE.md",canonical_content:""},c(),m.value.ai.enabled&&m.value.ai.canonical_file&&J(m.value.ai.canonical_file,m.value.type),m.value.git.initialize=r.value.defaults?.use_git!==!1,m.value.git.user_name=r.value.git?.user_name||"",m.value.git.user_email=r.value.git?.user_email||"",r.value.defaults?.git_hooks&&(m.value.git.hooks={...r.value.defaults.git_hooks}),r.value.defaults?.env){const _e=r.value.defaults.env;typeof _e=="string"?m.value.env.rawContent=_e:_e?.raw&&(m.value.env.rawContent=_e.raw)}const le={project:"gitignore-project",project_sensitive:"gitignore-project_sensitive",course:"gitignore-course",presentation:"gitignore-presentation"};m.value.git.gitignore_template=le[m.value.type]||"gitignore-project",m.value.git.gitignore_template&&K(m.value.git.gitignore_template)}const O=await fetch("/api/settings-catalog");O.ok&&(o.value=await O.json()),V(),P()}catch(D){console.error("[DEBUG] Failed to load settings:",D),console.error("[DEBUG] Error details:",D.message,D.stack),i.error("Load Error","Could not load default settings")}finally{console.log("[DEBUG] Initialization complete, loading =",l.value),l.value=!1,setTimeout(()=>{if(p.value&&p.value.$el){const D=p.value.$el.querySelector("input");D&&D.focus()}},100)}}),Re(()=>m.value.type,D=>{V();const O={project:"gitignore-project",project_sensitive:"gitignore-project_sensitive",course:"gitignore-course",presentation:"gitignore-presentation"};m.value.git.gitignore_template=O[D]||"gitignore-project"}),Re(()=>m.value.git.gitignore_template,D=>{D&&K(D)}),Re(()=>m.value.name,()=>{r.value?.global?.projects_root&&ne()}),Re(()=>m.value.ai.enabled,D=>{D&&m.value.ai.canonical_file&&J(m.value.ai.canonical_file,m.value.type)}),Re(()=>m.value.ai.canonical_file,D=>{D&&m.value.ai.enabled&&J(D,m.value.type)}),Re(()=>m.value.type,D=>{m.value.ai.canonical_file==="CLAUDE.md"&&m.value.ai.enabled&&J("CLAUDE.md",D)});const V=()=>{if(!o.value?.project_types)return;const D=o.value.project_types[m.value.type];if(!D?.directories)return;const O=r.value?.project_types?.[m.value.type];if(!m.value.git.gitignore_template||m.value.git.gitignore_template==="gitignore-project"){const le={project:"gitignore-project",project_sensitive:"gitignore-sensitive",course:"gitignore-course",presentation:"gitignore-presentation"};m.value.git.gitignore_template=le[m.value.type]||"gitignore-project"}K(m.value.git.gitignore_template);const R=Ob(D,O||{},{},{});m.value.directories=R.directories,m.value.directories_enabled=R.directories_enabled,m.value.render_dirs=R.render_dirs,m.value.extra_directories=R.extra_directories||[],m.value.extra_directories_enabled=O?.extra_directories_enabled||{},console.log("[DEBUG] loadProjectTypeDefaults() finished - packages still:",m.value.packages.default_packages)},I=D=>o.value?.project_types?.[D]?.label||D,U=(D="")=>{const O={};return D.split(/\r?\n/).forEach(R=>{const le=R.trim();if(!le||le.startsWith("#")||!le.includes("="))return;const[_e,...ge]=le.split("=");O[_e.trim()]=ge.join("=").replace(/^"|"$/g,"")}),O},N=(D={})=>{const O=Object.entries(D);return O.length?O.reduce((R,[le,_e])=>{const ge=le.includes("_")?le.split("_")[0]:"Other";return R[ge]||(R[ge]={}),R[ge][le]={defined:!!_e,used:!1,used_in:[],value:_e},R},{}):{}};Re(()=>m.value.env.variables,D=>{m.value.env.groups=N(D||{})},{deep:!0});const P=()=>{m.value.env.rawContent&&(m.value.env.variables=U(m.value.env.rawContent),m.value.env.groups=N(m.value.env.variables))},S=z(()=>({overview:"Overview",basics:"Basics",author:"Author & Metadata",scaffold:"Scaffold Behavior",structure:"Project Structure",connections:"Connections",env:".env Defaults",packages:"Packages & Dependencies",ai:"AI Assistants",git:"Git & Hooks",review:"Review & Create"})[d.value]||"New Project"),j=z(()=>({overview:"Quick overview of your project settings. We used your Framework Project Defaults as a starting point.",basics:"Essential project settings including name, location, type, and editor support.",author:"Configure author information embedded in project templates.",scaffold:"Runtime settings that control what happens when scaffold() runs.",structure:"Customize which directories to create for this project type.",connections:"Database and storage connections for this project.",env:"Environment variables template for this project.",packages:"Configure package management and default packages.",ai:"Configure AI assistant integration for this project.",git:"Configure version control and git hooks.",review:"Review your project configuration and create the project."})[d.value]||"");z(()=>({vscode:"Positron / VS Code",rstudio:"RStudio","rstudio,vscode":"Both",none:"Other"})[m.value.scaffold.ide]||m.value.scaffold.ide),z(()=>{const D=[];return m.value.git.hooks.ai_sync&&D.push("Sync AI files"),m.value.git.hooks.data_security&&D.push("Check for secrets"),m.value.git.hooks.check_sensitive_dirs&&D.push("Warn about sensitive dirs"),D});const H=z(()=>{const D=m.value.connections.databaseConnections.length,O=m.value.connections.s3Connections.length;return{databases:D,buckets:O}}),ue=z(()=>{const D=m.value.env?.variables||{};return Object.keys(D).length}),X=z(()=>{const D=m.value.name||"Untitled Project",O=m.value.author?.name||"",R=ae.value,le=I(m.value.type),_e=Pe("workspace"),ge=Pe("input"),ke=Pe("output"),Ee=m.value.packages?.default_packages?.length||0,Ne=m.value.packages?.use_renv||!1,he=ue.value,Ue=m.value.ai?.enabled||!1,kt=m.value.ai?.assistants?.[0]?m.value.ai.assistants.map(pt=>pt.charAt(0).toUpperCase()+pt.slice(1)).join(", "):"",xt=m.value.ai?.canonical_file||"",Rt=m.value.git?.initialize||!1,Tt=H.value.databases,It=H.value.buckets,ni=Tt>0||It>0?`${Tt} database${Tt!==1?"s":""}${It>0?`  ${It} bucket${It!==1?"s":""}`:""}`:"framework_db only";return[{id:"basics",title:"Basics",section:"basics",content:`<div>${D}  ${O}  ${le}</div><div class="text-sm text-gray-600 dark:text-gray-400 mt-1">${R}</div>`},{id:"structure",title:"Project Structure",section:"structure",content:`${le}  ${_e} workspace  ${ge} input  ${ke} output`},{id:"packages",title:"Packages",section:"packages",content:Ee>0?`${Ee} packages  renv ${Ne?"enabled":"disabled"}`:`renv: ${Ne?"enabled":"disabled"}`},{id:"env",title:".env Defaults",section:"env",content:he>0?`${he} variable${he===1?"":"s"}`:"No variables defined"},{id:"ai",title:"AI Assistants",section:"ai",content:Ue?`<span class="text-green-600 dark:text-green-400">${kt}  ${xt}</span>`:'<span class="text-gray-600 dark:text-gray-400">Disabled</span>'},{id:"git",title:"Git & Hooks",section:"git",content:`Git: ${Rt?"enabled":"disabled"}`},{id:"connections",title:"Connections",section:"connections",content:ni},{id:"scaffold",title:"Scaffold Behavior",section:"scaffold",content:`${m.value.scaffold?.source_all_functions?"Functions loaded from functions/":"Does not load functions"}  ${m.value.scaffold?.set_theme_on_scaffold?`ggplot2: ${(m.value.scaffold.ggplot_theme||"theme_minimal").replace("theme_","")}`:"No ggplot theme"}  ${m.value.scaffold?.set_seed?`Seed: ${m.value.scaffold.seed}`:"No random seed"}`}]}),B=z({get(){return Hf({useGit:m.value.git.initialize,gitHooks:m.value.git.hooks,git:m.value.git})},set(D){Wf({gitTarget:m.value.git,setUseGit:O=>{m.value.git.initialize=O}},D)}}),ae=z(()=>{const D=m.value.location,O=r.value?.global?.projects_root;return!D||D===O?"(not set)":D}),te=D=>{m.value.location=D;const O=r.value?.global?.projects_root||"",R=typeof D=="string"?D.trim():"";!R||O&&R===O?(g.value=!0,ne()):g.value=!1},$=D=>D?D.startsWith("http")?D:new URL(D,globalThis.location?.origin||"http://localhost").toString():"",K=async D=>{try{const O=await fetch($(`/api/templates/${D}`));if(O.ok){const R=await O.json();R.success&&R.contents&&(m.value.git.gitignore_content=R.contents)}}catch(O){console.error("Failed to load gitignore template:",O)}},J=async(D,O)=>{try{let R;if(D==="CLAUDE.md")switch(O){case"project_sensitive":R="ai_claude_sensitive";break;case"course":R="ai_claude_course";break;case"presentation":R="ai_claude_presentation";break;default:R="ai_claude_project"}else D==="AGENTS.md"?R="ai_agents":D===".github/copilot-instructions.md"&&(R="ai_copilot");const le=await fetch($(`/api/templates/${R}`));if(le.ok){const _e=await le.json();_e.success&&_e.contents&&(m.value.ai.canonical_content=_e.contents)}}catch(R){console.error("Failed to load AI template:",R)}};z(()=>o.value?.project_types?o.value.project_types[m.value.type]?.directories||{}:{}),z(()=>{if(!o.value?.project_types)return[];const D=o.value.project_types[m.value.type];return D?.directories?Object.keys(D.directories).filter(O=>{const R=D.directories[O];return R&&R.enabled_by_default===!1}):[]}),z(()=>Object.values(m.value.directories_enabled).filter(D=>D).length);const ce=z(()=>(m.value.extra_directories||[]).filter(D=>D.type==="input"&&D._source==="global"));z(()=>ce.value.filter(D=>D.scope==="private")),z(()=>ce.value.filter(D=>D.scope==="public")),z(()=>(m.value.extra_directories||[]).filter(D=>D.type==="workspace"&&D._source==="global"));const ye=z(()=>(m.value.extra_directories||[]).filter(D=>D.type==="output"&&D._source==="global"));z(()=>ye.value.filter(D=>D.scope==="private")),z(()=>ye.value.filter(D=>D.scope==="public"));const Pe=D=>Object.keys(m.value.directories_enabled).filter(R=>m.value.directories_enabled[R]?D==="workspace"?R==="notebooks"||R==="scripts"||R==="functions":D==="input"?R.startsWith("inputs_"):D==="output"?R.startsWith("outputs_"):D==="temporary"?R==="cache"||R==="scratch":!1:!1).length,Ve=[{key:"notebooks",label:"Notebooks",hint:"Quarto or R Markdown notebooks for analysis.",defaultRenderDir:"outputs/notebooks"},{key:"docs",label:"Documentation",hint:"Codebooks, documentation, and other reference materials.",defaultRenderDir:"outputs/docs"}],je=[{key:"functions",label:"Functions",hint:"R files here are sourced by scaffold(), so helper functions are available in every project session."},{key:"scripts",label:"Scripts",hint:"Reusable R scripts, job runners, or automation tasks."}],We=[{key:"inputs_raw",label:"Raw data",hint:"Read-only exports from source systems."},{key:"inputs_intermediate",label:"Intermediate data",hint:"Data after light cleaning or pre-processing steps."},{key:"inputs_final",label:"Analysis-ready data",hint:"Final inputs ready for modeling or reporting."}],rt=[{key:"outputs_tables",label:"Tables",hint:"Publishable tables ready for reports or manuscripts."},{key:"outputs_figures",label:"Figures",hint:"Final plots and graphics."},{key:"outputs_models",label:"Models",hint:"Serialized models or model summaries."},{key:"outputs_reports",label:"Reports",hint:"Final reports and deliverables ready for publication."}],ot=[{key:"cache",label:"Cache",hint:"Temporary artifacts (gitignored)."},{key:"scratch",label:"Scratch",hint:"Short-lived explorations (gitignored)."}],Ze=[{privateKey:"inputs_private_raw",publicKey:"inputs_public_raw",label:"Raw data",privateLabel:"Raw data (private)",publicLabel:"Raw data (public)"},{privateKey:"inputs_private_intermediate",publicKey:"inputs_public_intermediate",label:"Intermediate data",privateLabel:"Intermediate data (private)",publicLabel:"Intermediate data (public)"},{privateKey:"inputs_private_final",publicKey:"inputs_public_final",label:"Analysis-ready data",privateLabel:"Analysis-ready data (private)",publicLabel:"Analysis-ready data (public)"}],oe=[{privateKey:"outputs_private_tables",publicKey:"outputs_public_tables",label:"Tables",privateLabel:"Tables (private)",publicLabel:"Tables (public)"},{privateKey:"outputs_private_figures",publicKey:"outputs_public_figures",label:"Figures",privateLabel:"Figures (private)",publicLabel:"Figures (public)"},{privateKey:"outputs_private_models",publicKey:"outputs_public_models",label:"Models",privateLabel:"Models (private)",publicLabel:"Models (public)"},{privateKey:"outputs_private_reports",publicKey:"outputs_public_reports",label:"Reports",privateLabel:"Reports (private)",publicLabel:"Reports (public)"}],Y=(D,O)=>o.value?.project_types?.[D]?.directories?.[O]||{},W=(D,O)=>O.map(R=>{const le=Y(D,R.key);return{key:R.key,label:le.label||R.label,hint:le.hint||R.hint||""}});z(()=>W("project",Ve).map(D=>({...D,defaultRenderDir:Ve.find(O=>O.key===D.key)?.defaultRenderDir||""}))),z(()=>W("project",je)),z(()=>W("project",We)),z(()=>W("project",rt)),z(()=>W("project",ot));const C=D=>D.map(O=>{const R=Y("project_sensitive",O.privateKey),le=Y("project_sensitive",O.publicKey);return{...O,privateLabel:R.label||O.privateLabel,publicLabel:le.label||O.publicLabel}});z(()=>C(Ze)),z(()=>C(oe));const se=z(()=>Array.isArray(m.value.extra_directories)?m.value.extra_directories:[]),_=D=>{m.value.extra_directories=D},E=()=>{if(!o.value?.project_types?.[m.value.type])return;const D=o.value.project_types[m.value.type];D.directories&&(m.value.directories={},Object.keys(D.directories).forEach(O=>{m.value.directories[O]=D.directories[O].default})),D.directories&&(m.value.directories_enabled={},Object.keys(D.directories).forEach(O=>{m.value.directories_enabled[O]=D.directories[O].enabled_by_default===!0})),m.value.render_dirs={},D.gitignore_template&&(m.value.git.gitignore_content=D.gitignore_template)},F=D=>{e.push({query:{...t.query,section:D}})},ne=()=>{if(!g.value||!m.value.name||!m.value.name.trim())return;const D=r.value?.global?.projects_root||"";if(!D)return;const O=(m.value.location||"").trim();if(O&&!O.startsWith(D))return;const R=m.value.name.toLowerCase().trim().replace(/[\s_]+/g,"-").replace(/[^a-z0-9-]/g,"").replace(/-+/g,"-").replace(/^-|-$/g,"");if(!R){m.value.location=D;return}const le=D.replace(/\/+$/,"");m.value.location=`${le}/${R}`},re=async()=>{if(!m.value.name||!m.value.name.trim()){i.error("Validation Error","Project name is required"),F("overview");return}if(!m.value.location||!m.value.location.trim()){i.error("Validation Error","Project location is required"),F("overview");return}try{h.value=!0;const D=o.value?.project_types?.[m.value.type],O={};D?.directories&&Object.entries(D.directories).forEach(([Ee,Ne])=>{m.value.directories_enabled[Ee]&&(O[Ee]=m.value.directories[Ee]||Ne.default)});const R={};m.value.connections.databaseConnections.forEach(Ee=>{const{_id:Ne,name:he,...Ue}=Ee;R[he]=Ue});const le={};m.value.connections.s3Connections.forEach(Ee=>{const{_id:Ne,name:he,...Ue}=Ee;le[he]=Ue});const _e={name:m.value.name.trim(),location:m.value.location.trim(),type:m.value.type,author:m.value.author,scaffold:m.value.scaffold,packages:Pb(m.value.packages),ai:m.value.ai,git:m.value.git,connections:{default_database:m.value.connections.defaultDatabase,default_storage_bucket:m.value.connections.defaultStorageBucket,databases:R,storage_buckets:le},env:{raw:m.value.env.rawContent||""},directories:O,render_dirs:m.value.render_dirs||{},extra_directories:(m.value.extra_directories||[]).filter(Ee=>{const Ne=Ee.key&&Ee.key.trim()&&Ee.label&&Ee.label.trim()&&Ee.path&&Ee.path.trim(),he=m.value.extra_directories_enabled?.[Ee.key]!==!1;return Ne&&he}),extra_directories_enabled:m.value.extra_directories_enabled||{}},ge=await fetch("/api/projects/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_e)});if(!ge.ok){const Ee=await ge.json();throw new Error(Ee.message||"Failed to create project")}const ke=await ge.json();if(ke.success===!1)throw new Error(ke.error||"Project creation failed");i.success("Project Created",`${m.value.name} has been created successfully`),await n(),ke.project_id?e.push(`/project/${ke.project_id}`):e.push("/projects")}catch(D){console.error("Failed to create project:",D),i.error("Creation Failed",D.message||"Could not create the project")}finally{h.value=!1}},Z=D=>{(D.metaKey||D.ctrlKey)&&D.key==="s"&&(D.preventDefault(),re())};return os(()=>{window.addEventListener("keydown",Z)}),Mr(()=>{window.removeEventListener("keydown",Z)}),(D,O)=>(v(),b("div",M6,[f("nav",D6,[O[28]||(O[28]=f("h2",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"New Project",-1)),f("div",E6,[(v(),b(ve,null,Le(u,R=>(v(),b(ve,{key:R.id},[R.id==="basics"?(v(),Ae(Na,{key:0},{default:ee(()=>[...O[27]||(O[27]=[de("Settings",-1)])]),_:1})):G("",!0),f("a",{href:"#",onClick:Ft(le=>d.value=R.id,["prevent"]),class:be(["flex items-center gap-2 px-3 py-2 rounded-md text-sm transition",d.value===R.id?"bg-sky-50 text-sky-700 font-medium dark:bg-sky-900/20 dark:text-sky-400":"text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-800"])},[R.icon?(v(),Ae(_s(R.icon),{key:0,class:"h-4 w-4"})):R.svgIcon?(v(),b("svg",{key:1,class:"h-4 w-4",fill:R.svgFill??"none",viewBox:R.svgViewBox??"0 0 24 24",stroke:R.svgStroke??"currentColor"},[f("path",{"stroke-linecap":R.svgStrokeLinecap??"round","stroke-linejoin":R.svgStrokeLinejoin??"round","stroke-width":R.svgStrokeWidth??2,fill:R.svgPathFill??"none",d:R.svgIcon},null,8,j6)],8,O6)):G("",!0),de(" "+Q(R.label),1)],10,T6)],64))),64))]),f("div",P6,[w(Ge,{variant:"primary",size:"md",class:"w-full",disabled:h.value||!m.value.name||!m.value.location,onClick:re},{default:ee(()=>[de(Q(h.value?"Creating...":"Create Project"),1)]),_:1},8,["disabled"])])]),f("div",$6,[w(Er,{title:S.value,description:j.value},null,8,["title","description"]),f("div",R6,[Je(f("div",null,[w(Rf,{cards:X.value,onNavigate:O[0]||(O[0]=R=>d.value=R)},null,8,["cards"])],512),[[et,d.value==="overview"]]),Je(f("div",null,[f("div",L6,[f("div",V6,[w(Ce,{ref_key:"projectNameInput",ref:p,modelValue:m.value.name,"onUpdate:modelValue":O[1]||(O[1]=R=>m.value.name=R),label:"Project Name",hint:"Human-readable name for your project",placeholder:"My Analysis Project",required:""},null,8,["modelValue"]),w(Ce,{"model-value":m.value.location,"onUpdate:modelValue":te,label:"Project Location",hint:"Directory where the project will be created",placeholder:"e.g., ~/projects or /Users/yourname/code"},null,8,["model-value"]),w(ts,{modelValue:m.value.type,"onUpdate:modelValue":O[2]||(O[2]=R=>m.value.type=R),label:"Project Type",hint:"Choose the template structure for your project"},{default:ee(()=>[...O[29]||(O[29]=[f("option",{value:"project"},"Standard Project",-1),f("option",{value:"project_sensitive"},"Privacy Sensitive Project",-1),f("option",{value:"course"},"Course",-1),f("option",{value:"presentation"},"Presentation",-1)])]),_:1},8,["modelValue"]),f("div",null,[O[31]||(O[31]=f("label",{class:"block text-sm font-semibold text-gray-900 dark:text-white mb-3"}," Supported Editors ",-1)),w(Yi,{modelValue:m.value.scaffold.positron,"onUpdate:modelValue":O[3]||(O[3]=R=>m.value.scaffold.positron=R),id:"support-positron",description:"Enable Positron-specific workspace and settings files"},{default:ee(()=>[...O[30]||(O[30]=[de(" Positron ",-1)])]),_:1},8,["modelValue"]),O[32]||(O[32]=f("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-3"}," RStudio supported by default ",-1))]),w(ts,{modelValue:m.value.scaffold.notebook_format,"onUpdate:modelValue":O[4]||(O[4]=R=>m.value.scaffold.notebook_format=R),label:"Default Notebook Format",hint:"Format used when creating new notebooks"},{default:ee(()=>[...O[33]||(O[33]=[f("option",{value:"quarto"},"Quarto (.qmd)",-1),f("option",{value:"rmarkdown"},"R Markdown (.Rmd)",-1)])]),_:1},8,["modelValue"]),f("div",B6,[w(Lf,{modelValue:m.value.author,"onUpdate:modelValue":O[5]||(O[5]=R=>m.value.author=R)},null,8,["modelValue"])])])])],512),[[et,d.value==="basics"]]),Je(f("div",null,[f("div",I6,[O[34]||(O[34]=f("div",null,[f("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"}," Scaffold Behavior "),f("p",{class:"text-sm text-gray-600 dark:text-gray-400"},[de(" Automatic actions when "),f("code",{class:"px-1.5 py-0.5 bg-gray-200 dark:bg-gray-700 rounded text-xs"},"scaffold()"),de(" runs to initialize your project environment. ")])],-1)),w(Nf,{modelValue:m.value.scaffold,"onUpdate:modelValue":O[6]||(O[6]=R=>m.value.scaffold=R),flush:""},null,8,["modelValue"])])],512),[[et,d.value==="scaffold"]]),Je(f("div",N6,[f("div",F6,[w(E_,{legend:"Project Type",description:"Select a project type to customize the directory structure."},{default:ee(()=>[w(Sl,{modelValue:m.value.type,"onUpdate:modelValue":O[7]||(O[7]=R=>m.value.type=R),id:"type-project",name:"project-type",value:"project"},{default:ee(()=>[...O[35]||(O[35]=[f("div",null,[f("div",{class:"font-medium text-sm"},"Standard Project"),f("div",{class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5"}," Full-featured with organized data, work, and output directories ")],-1)])]),_:1},8,["modelValue"]),w(Sl,{modelValue:m.value.type,"onUpdate:modelValue":O[8]||(O[8]=R=>m.value.type=R),id:"type-sensitive",name:"project-type",value:"project_sensitive"},{default:ee(()=>[...O[36]||(O[36]=[f("div",null,[f("div",{class:"font-medium text-sm"},"Privacy Sensitive Project"),f("div",{class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5"}," Enhanced privacy controls with separate private/public flows ")],-1)])]),_:1},8,["modelValue"]),w(Sl,{modelValue:m.value.type,"onUpdate:modelValue":O[9]||(O[9]=R=>m.value.type=R),id:"type-course",name:"project-type",value:"course"},{default:ee(()=>[...O[37]||(O[37]=[f("div",null,[f("div",{class:"font-medium text-sm"},"Course/Teaching"),f("div",{class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5"}," Simplified structure for teaching materials ")],-1)])]),_:1},8,["modelValue"]),w(Sl,{modelValue:m.value.type,"onUpdate:modelValue":O[10]||(O[10]=R=>m.value.type=R),id:"type-presentation",name:"project-type",value:"presentation"},{default:ee(()=>[...O[38]||(O[38]=[f("div",null,[f("div",{class:"font-medium text-sm"},"Presentation"),f("div",{class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5"}," Minimal structure for slides and presentations ")],-1)])]),_:1},8,["modelValue"])]),_:1})]),o.value?(v(),Ae(zf,{key:0,"project-type":m.value.type,directories:m.value.directories,"render-dirs":m.value.render_dirs,enabled:m.value.directories_enabled,"extra-directories":se.value,settings:m.value,gitignore:m.value.git.gitignore_content,catalog:o.value.project_types?.[m.value.type],"new-extra-ids":k.value,"allow-destruction":!0,"onUpdate:directories":O[11]||(O[11]=R=>m.value.directories=R),"onUpdate:renderDirs":O[12]||(O[12]=R=>m.value.render_dirs=R),"onUpdate:enabled":O[13]||(O[13]=R=>m.value.directories_enabled=R),"onUpdate:extraDirectories":_,"onUpdate:gitignore":O[14]||(O[14]=R=>m.value.git.gitignore_content=R),"onUpdate:newExtraIds":O[15]||(O[15]=R=>k.value=R),onReset:E},null,8,["project-type","directories","render-dirs","enabled","extra-directories","settings","gitignore","catalog","new-extra-ids"])):G("",!0)],512),[[et,d.value==="structure"]]),Je(f("div",null,[w(Ff,{"database-connections":m.value.connections.databaseConnections,"onUpdate:databaseConnections":O[16]||(O[16]=R=>m.value.connections.databaseConnections=R),"s3-connections":m.value.connections.s3Connections,"onUpdate:s3Connections":O[17]||(O[17]=R=>m.value.connections.s3Connections=R),"default-database":m.value.connections.defaultDatabase,"onUpdate:defaultDatabase":O[18]||(O[18]=R=>m.value.connections.defaultDatabase=R),"default-storage-bucket":m.value.connections.defaultStorageBucket,"onUpdate:defaultStorageBucket":O[19]||(O[19]=R=>m.value.connections.defaultStorageBucket=R)},null,8,["database-connections","s3-connections","default-database","default-storage-bucket"])],512),[[et,d.value==="connections"]]),Je(f("div",null,[f("div",z6,[O[39]||(O[39]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Environment variables template for this project. These defaults help connections work immediately. ",-1)),w(Uf,{groups:m.value.env.groups,variables:m.value.env.variables,"onUpdate:variables":O[20]||(O[20]=R=>m.value.env.variables=R),"raw-content":m.value.env.rawContent,"onUpdate:rawContent":O[21]||(O[21]=R=>m.value.env.rawContent=R),"view-mode":m.value.env.viewMode,"onUpdate:viewMode":O[22]||(O[22]=R=>m.value.env.viewMode=R),"regroup-on-save":m.value.env.regroupOnSave,"onUpdate:regroupOnSave":O[23]||(O[23]=R=>m.value.env.regroupOnSave=R),"show-save-button":!1,"allow-show-values-toggle":!0},null,8,["groups","variables","raw-content","view-mode","regroup-on-save"])])],512),[[et,d.value==="env"]]),Je(f("div",null,[w(Vf,{modelValue:m.value.packages,"onUpdate:modelValue":O[24]||(O[24]=R=>m.value.packages=R),"show-renv-toggle":!0,flush:!1},null,8,["modelValue"])],512),[[et,d.value==="packages"]]),Je(f("div",null,[f("div",U6,[O[41]||(O[41]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Framework maintains context files for selected assistants and keeps them in sync before commits. ",-1)),w(Bf,{modelValue:m.value.ai,"onUpdate:modelValue":O[25]||(O[25]=R=>m.value.ai=R),flush:!0,"show-editor":!0,"editor-height":"500px"},{"editor-description":ee(()=>[...O[40]||(O[40]=[de(" Edit the canonical file directly. This will be pre-populated when the project is created. ",-1)])]),_:1},8,["modelValue"])])],512),[[et,d.value==="ai"]]),Je(f("div",null,[w(If,{modelValue:B.value,"onUpdate:modelValue":O[26]||(O[26]=R=>B.value=R)},{note:ee(()=>[...O[42]||(O[42]=[de(" Project-specific .gitignore templates can be customized in Project Defaults. ",-1)])]),_:1},8,["modelValue"])],512),[[et,d.value==="git"]])])])]))}},W6={class:"mt-2 block text-sm font-semibold text-gray-900 dark:text-white"},q6={key:0,class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},K6={class:"mt-2 text-sm font-semibold text-gray-900 dark:text-white"},G6={key:0,class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},J6={key:1,class:"mt-6"},Y6={__name:"EmptyState",props:{title:{type:String,required:!0},description:{type:String,default:null},icon:{type:String,default:null,validator:s=>["database","folder","document","users","inbox","photo"].includes(s)},action:{type:Boolean,default:!1}},emits:["click"],setup(s,{emit:e}){const t=s,i=e,n=z(()=>{const l=["relative","block","w-full","rounded-lg","border-2","border-dashed","border-gray-300","p-12","text-center","dark:border-white/15"];return t.action&&l.push("hover:border-gray-400","focus:outline-2","focus:outline-offset-2","focus:outline-sky-600","dark:hover:border-white/25","dark:focus:outline-sky-500","transition-colors"),l.join(" ")}),r=z(()=>({database:()=>jt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[jt("path",{d:"M8 14v20c0 4.418 7.163 8 16 8 1.381 0 2.721-.087 4-.252M8 14c0 4.418 7.163 8 16 8s16-3.582 16-8M8 14c0-4.418 7.163-8 16-8s16 3.582 16 8m0 0v14m0-4c0 4.418-7.163 8-16 8S8 28.418 8 24m32 10v6m0 0v6m0-6h6m-6 0h-6"})]),folder:()=>jt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[jt("path",{d:"M3 7v30a4 4 0 004 4h34a4 4 0 004-4V13a4 4 0 00-4-4H23.343a4 4 0 01-2.829-1.172l-2.828-2.828A4 4 0 0014.858 4H7a4 4 0 00-4 4v0zM37 17v6m0 0v6m0-6h6m-6 0h-6"})]),document:()=>jt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[jt("path",{d:"M8 4a4 4 0 00-4 4v32a4 4 0 004 4h32a4 4 0 004-4V8a4 4 0 00-4-4H8zm24 16v6m0 0v6m0-6h6m-6 0h-6"})]),users:()=>jt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[jt("path",{d:"M17 21a5 5 0 110-10 5 5 0 010 10zm-6.5 8a7.5 7.5 0 0115 0H10.5zM31 21a5 5 0 110-10 5 5 0 010 10zm-6.5 8a7.5 7.5 0 0115 0H24.5z"})]),inbox:()=>jt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[jt("path",{d:"M4 8h40M4 8v28a4 4 0 004 4h32a4 4 0 004-4V8M4 8l18 14a2 2 0 002.4 0L44 8"})]),photo:()=>jt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[jt("path",{d:"M4 8a4 4 0 014-4h32a4 4 0 014 4v32a4 4 0 01-4 4H8a4 4 0 01-4-4V8zm10 6a3 3 0 100-6 3 3 0 000 6zM4 40l12-12 8 8 8-8L44 40"})])})[t.icon]||null),o=()=>{t.action&&i("click")};return(l,a)=>s.action?(v(),b("button",{key:0,type:"button",onClick:o,class:be(n.value)},[ut(l.$slots,"icon",{},()=>[s.icon?(v(),Ae(_s(r.value),{key:0,class:"mx-auto size-12 text-gray-400 dark:text-gray-500"})):G("",!0)]),f("span",W6,Q(s.title),1),s.description?(v(),b("p",q6,Q(s.description),1)):G("",!0)],2)):(v(),b("div",{key:1,class:be(n.value.replace("hover:border-gray-400","").replace("focus:outline-2",""))},[ut(l.$slots,"icon",{},()=>[s.icon?(v(),Ae(_s(r.value),{key:0,class:"mx-auto size-12 text-gray-400 dark:text-gray-500"})):G("",!0)]),f("h3",K6,Q(s.title),1),s.description?(v(),b("p",G6,Q(s.description),1)):G("",!0),l.$slots.actions?(v(),b("div",J6,[ut(l.$slots,"actions")])):G("",!0)],2))}},Q6=["for"],X6={class:"mt-2"},Z6=["id","value","placeholder","rows","required","disabled"],eO={key:1,class:"mt-2 text-sm text-gray-500 dark:text-gray-400"},Gm={__name:"Textarea",props:{id:{type:String,default:()=>`textarea-${Math.random().toString(36).substr(2,9)}`},modelValue:{type:String,default:""},label:{type:String,default:null},placeholder:{type:String,default:""},rows:{type:Number,default:4},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},hint:{type:String,default:null},monospace:{type:Boolean,default:!1},textareaClass:{type:[String,Array,Object],default:""}},emits:["update:modelValue"],setup(s){const e=s,t=z(()=>["block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-sky-600 sm:text-sm/6 dark:bg-white/5 dark:text-white dark:outline-white/10 dark:placeholder:text-gray-500 dark:focus:outline-sky-500",e.monospace?"font-mono text-sm leading-6":"",e.textareaClass]);return(i,n)=>(v(),b("div",null,[s.label?(v(),b("label",{key:0,for:s.id,class:"block text-sm/6 font-medium text-gray-900 dark:text-white"},Q(s.label),9,Q6)):G("",!0),f("div",X6,[f("textarea",{id:s.id,value:s.modelValue,placeholder:s.placeholder,rows:s.rows,required:s.required,disabled:s.disabled,onInput:n[0]||(n[0]=r=>i.$emit("update:modelValue",r.target.value)),class:be(t.value)},null,42,Z6)]),s.hint?(v(),b("p",eO,Q(s.hint),1)):G("",!0)]))}},tO={class:"space-y-6"},sO={key:0},iO={class:"mt-1 font-mono text-sm text-gray-900 dark:text-gray-100 break-words"},nO={key:1},rO={class:"grid gap-4 sm:grid-cols-2"},oO=["value"],lO={class:"sm:col-span-2"},aO={key:0,class:"sm:col-span-2"},uO={class:"space-y-3"},cO={class:"flex items-center justify-between"},dO={key:0,class:"rounded-md border border-dashed border-gray-300 p-4 text-sm text-gray-500 dark:border-gray-600 dark:text-gray-400"},fO={class:"grid gap-3 sm:grid-cols-[1fr_auto] sm:items-start"},hO={class:"mt-3"},pO={key:0,class:"mt-2 text-xs text-gray-500 dark:text-gray-400"},mO={class:"mt-2 flex justify-end"},gO={key:2,class:"text-sm text-red-600 dark:text-red-400"},vO={key:3,class:"text-sm text-red-600 dark:text-red-400"},yO={key:4,class:"text-sm text-red-600 dark:text-red-400"},bO='{"source": "data-catalog"}',kO={__name:"DataCatalogEditModal",props:{modelValue:{type:Boolean,default:!1},mode:{type:String,default:"edit",validator:s=>["edit","create"].includes(s)},entry:{type:Object,default:null},saving:{type:Boolean,default:!1},error:{type:String,default:null}},emits:["update:modelValue","save"],setup(s,{emit:e}){const t=s,i=e,n=Object.freeze([{value:"csv",label:"CSV (comma-separated)"},{value:"tsv",label:"TSV (tab-separated)"},{value:"csv_custom",label:"Delimited text (custom)"},{value:"rds",label:"RDS (R serialized)"},{value:"excel",label:"Excel (.xlsx / .xls)"},{value:"stata",label:"Stata (.dta)"},{value:"spss",label:"SPSS (.sav / .zsav)"},{value:"spss_por",label:"SPSS Portable (.por)"},{value:"sas",label:"SAS (.sas7bdat / .sas7bcat)"},{value:"sas_xpt",label:"SAS Transport (.xpt)"}]),r=["path","type","description","locked","delimiter"],o=ie(null),l=ie(!1),a=ie(!1),c=z(()=>t.mode==="create"),u=Gs({path:"",fullKey:"",type:"",description:"",delimiter:"",locked:!1,additionalFields:[]}),d=z(()=>u.type==="csv_custom"),h=z(()=>{if(!t.entry&&!c.value)return null;const K=H();return K.length>0?`Duplicate metadata keys: ${K.join(", ")}`:u.additionalFields.some(J=>!J.key.trim())?"Metadata keys cannot be empty.":null}),p=z(()=>u.path.trim()?null:"File path is required"),g=z(()=>c.value?a.value?p.value:null:p.value);Re(()=>t.entry,K=>{if(!K){N();return}U(K)},{immediate:!0}),Re(()=>u.path,K=>{if(l.value)return;const J=V(K);J&&(J.type==="csv"?(u.type="csv",u.delimiter=m("csv")):J.type==="tsv"?(u.type="tsv",u.delimiter=m("tsv")):(u.type=J.type,u.delimiter=""))}),Re(()=>u.type,K=>{K&&(K==="csv"?u.delimiter=m("csv"):K==="tsv"?u.delimiter=m("tsv"):K!=="csv_custom"&&(u.delimiter=""))});function k(){return`field-${Math.random().toString(36).slice(2,9)}`}function m(K){return K==="csv"?"comma":K==="tsv"?"tab":""}function x(K,J){if(!K)return!1;const ce=K.toLowerCase();return J==="csv"?ce==="comma"||K===",":J==="tsv"?ce==="tab"||K==="	":!1}function V(K){if(!K)return null;const J=K.toLowerCase();return J.endsWith(".csv")?{type:"csv",delimiter:"comma"}:J.endsWith(".tsv")||J.endsWith(".txt")||J.endsWith(".dat")?{type:"tsv",delimiter:"tab"}:J.endsWith(".rds")?{type:"rds",delimiter:""}:J.endsWith(".xlsx")||J.endsWith(".xls")?{type:"excel",delimiter:""}:J.endsWith(".dta")?{type:"stata",delimiter:""}:J.endsWith(".sav")||J.endsWith(".zsav")?{type:"spss",delimiter:""}:J.endsWith(".por")?{type:"spss_por",delimiter:""}:J.endsWith(".sas7bdat")||J.endsWith(".sas7bcat")?{type:"sas",delimiter:""}:J.endsWith(".xpt")?{type:"sas_xpt",delimiter:""}:null}function I(K){if(!K){u.type="",u.delimiter="",l.value=!1;return}u.type=K,l.value=!0,K==="csv"?u.delimiter=m("csv"):K==="tsv"?u.delimiter=m("tsv"):u.delimiter=""}function U(K){if(N(),a.value=!1,c.value){const Ve=K?.data||{};u.fullKey=K?.fullKey||"",u.path=Ve.path||"",u.type=Ve.type||"",u.description=Ve.description||"",u.locked=!!Ve.locked,u.delimiter=Ve.delimiter||"",l.value=!1;return}const J=K.data||{};u.fullKey=K.fullKey||"",u.path=J.path||"";const ce=V(u.path),ye=J.type||ce?.type||"";if(u.description=J.description||"",u.locked=!!J.locked,ye==="csv"){const Ve=J.delimiter||ce?.delimiter||m("csv");x(Ve,"csv")?(u.type="csv",u.delimiter=m("csv")):Ve?(u.type="csv_custom",u.delimiter=Ve):(u.type="csv",u.delimiter=m("csv"))}else ye==="tsv"?(u.type="tsv",u.delimiter=m("tsv")):(u.type=ye,u.delimiter=d.value&&J.delimiter||"");!u.type&&ce?.type&&(u.type=ce.type,u.delimiter=ce.delimiter||m(ce.type)),l.value=!!J.type||u.type==="csv_custom";const Pe=Object.entries(J).filter(([Ve])=>!r.includes(Ve)).map(([Ve,je])=>({id:k(),key:Ve,valueInput:P(je),valueType:S(je),isMultiline:typeof je=="object"&&je!==null}));u.additionalFields=Pe,o.value=null}function N(){u.path="",u.fullKey="",u.type="",u.description="",u.delimiter="",u.locked=!1,u.additionalFields=[],o.value=null,l.value=!1}function P(K){if(typeof K=="object"&&K!==null)try{return JSON.stringify(K,null,2)}catch{return""}return K==null?"":String(K)}function S(K){return Array.isArray(K)||typeof K=="object"&&K!==null?"object":typeof K=="boolean"?"boolean":typeof K=="number"?"number":"string"}function j(K){if(K.valueType==="object"){if(!K.valueInput.trim())return null;try{return JSON.parse(K.valueInput)}catch{throw new Error(`Invalid JSON for field "${K.key}"`)}}if(K.valueType==="number"){const J=Number(K.valueInput);if(Number.isNaN(J))throw new Error(`Value for "${K.key}" must be a number`);return J}if(K.valueType==="boolean"){const J=K.valueInput.trim().toLowerCase();if(["true","false"].includes(J))return J==="true";throw new Error(`Value for "${K.key}" must be "true" or "false"`)}return K.valueInput}function H(){const K=new Set,J=[];return u.additionalFields.forEach(ce=>{const ye=ce.key.trim();ye&&(K.has(ye)||r.includes(ye)?J.push(ye):K.add(ye))}),J}function ue(K){return K.key.trim()?r.includes(K.key.trim())?"Reserved key name":u.additionalFields.some(J=>J!==K&&J.key.trim()===K.key.trim())?"Duplicate key":null:"Key is required"}function X(){u.additionalFields.push({id:k(),key:"",valueInput:"",valueType:"string",isMultiline:!1}),o.value=null}function B(K){u.additionalFields=u.additionalFields.filter(J=>J.id!==K)}function ae(K){K.isMultiline=!K.isMultiline,K.isMultiline?(K.valueType="object",K.valueInput&&!K.valueInput.trim().startsWith("{")&&(K.valueInput="")):(K.valueType="string",K.valueInput=K.valueInput!=null?String(K.valueInput):"")}const te=()=>{if(o.value=null,a.value=!0,!(p.value||h.value)&&!(!c.value&&!t.entry))try{const K=$();i("save",K)}catch(K){o.value=K.message}},$=()=>{if(!u.path.trim())throw new Error("File path is required");const K={};K.path=u.path.trim();const J=u.type==="csv_custom"?"csv":u.type.trim();if(J&&(K.type=J),u.description.trim()&&(K.description=u.description.trim()),u.type==="csv_custom"){if(!u.delimiter.trim())throw new Error("Delimiter is required for custom delimited text sources");K.delimiter=u.delimiter.trim()}else u.delimiter.trim()&&!x(u.delimiter.trim(),u.type)&&(K.delimiter=u.delimiter.trim());u.locked&&(K.locked=!0);for(const ye of u.additionalFields){const Pe=ye.key.trim();if(!Pe||r.includes(Pe))continue;const Ve=j({...ye,valueType:ye.valueType??"string"});Ve===null||Ve===""||(K[Pe]=Ve)}const ce=(c.value?u.fullKey:t.entry.fullKey||"").trim();if(!ce)throw new Error("Dot notation key is required");return{fullKey:ce,data:K,isNew:c.value}};return(K,J)=>(v(),Ae(Ln,{"model-value":s.modelValue,variant:"left",size:"lg",title:"Edit Data Entry","onUpdate:modelValue":J[6]||(J[6]=ce=>i("update:modelValue",ce))},ok({_:2},[s.entry||c.value?{name:"default",fn:ee(()=>[f("div",tO,[c.value?(v(),b("div",nO,[w(Ce,{modelValue:u.fullKey,"onUpdate:modelValue":J[0]||(J[0]=ce=>u.fullKey=ce),label:"Dot Notation Key",placeholder:"e.g., inputs.raw.custom_dataset",hint:"Use dot notation to place this entry within the catalog hierarchy."},null,8,["modelValue"])])):(v(),b("div",sO,[J[7]||(J[7]=f("p",{class:"text-xs font-medium uppercase tracking-wide text-gray-500 dark:text-gray-400"}," Data Key ",-1)),f("p",iO,Q(s.entry.fullKey),1)])),w(Ce,{modelValue:u.path,"onUpdate:modelValue":J[1]||(J[1]=ce=>u.path=ce),label:"File Path",placeholder:"inputs/raw/example.csv",required:"",error:g.value,monospace:"",hint:"Provide a path relative to the project root (e.g., inputs/raw/data.csv) or an absolute path."},null,8,["modelValue","error"]),f("div",rO,[w(ts,{"model-value":u.type,label:"Type","onUpdate:modelValue":I},{default:ee(()=>[J[8]||(J[8]=f("option",{disabled:"",value:""},"Select file type",-1)),(v(!0),b(ve,null,Le(dt(n),ce=>(v(),b("option",{key:ce.value,value:ce.value},Q(ce.label),9,oO))),128))]),_:1},8,["model-value"]),f("div",lO,[w(Ke,{modelValue:u.locked,"onUpdate:modelValue":J[2]||(J[2]=ce=>u.locked=ce),label:"Locked",description:"Treat this data source as read-only."},null,8,["modelValue"])]),d.value?(v(),b("div",aO,[w(Ce,{modelValue:u.delimiter,"onUpdate:modelValue":J[3]||(J[3]=ce=>u.delimiter=ce),label:"Delimiter",placeholder:"e.g., tab or |",hint:"Use keywords 'tab', 'comma', 'semicolon', 'space' or supply a single character (e.g., |). Keywords map to their respective delimiters."},null,8,["modelValue"])])):G("",!0)]),w(Gm,{modelValue:u.description,"onUpdate:modelValue":J[4]||(J[4]=ce=>u.description=ce),label:"Description",placeholder:"Explain what this source contains or how it was produced.",rows:4},null,8,["modelValue"]),f("div",uO,[f("div",cO,[J[10]||(J[10]=f("h4",{class:"text-sm font-semibold text-gray-900 dark:text-gray-100"}," Additional Metadata ",-1)),w(Ge,{size:"sm",variant:"secondary",class:"shadow-none",onClick:X},{default:ee(()=>[...J[9]||(J[9]=[de(" Add Field ",-1)])]),_:1})]),J[12]||(J[12]=f("p",{class:"text-xs text-gray-500 dark:text-gray-400"}," Store any extra properties (e.g., source, codebook details). Complex values can be provided as JSON. ",-1)),u.additionalFields.length===0?(v(),b("div",dO," No additional metadata fields. ")):G("",!0),(v(!0),b(ve,null,Le(u.additionalFields,ce=>(v(),b("div",{key:ce.id,class:"rounded-md border border-gray-200 bg-white/80 p-4 dark:border-gray-700 dark:bg-gray-900/40"},[f("div",fO,[w(Ce,{modelValue:ce.key,"onUpdate:modelValue":ye=>ce.key=ye,label:"Key",placeholder:"e.g., source",error:ue(ce)},null,8,["modelValue","onUpdate:modelValue","error"]),w(Ge,{size:"sm",variant:"secondary",class:"shadow-none",onClick:ye=>B(ce.id)},{default:ee(()=>[...J[11]||(J[11]=[de(" Remove ",-1)])]),_:1},8,["onClick"])]),f("div",hO,[(v(),Ae(_s(ce.isMultiline?Gm:Ce),{modelValue:ce.valueInput,"onUpdate:modelValue":ye=>ce.valueInput=ye,label:ce.isMultiline?"Value (JSON)":"Value",rows:ce.isMultiline?4:void 0,placeholder:ce.isMultiline?bO:"comma",monospace:ce.isMultiline?void 0:!1},null,8,["modelValue","onUpdate:modelValue","label","rows","placeholder","monospace"])),ce.isMultiline?(v(),b("p",pO," Provide valid JSON to store complex data structures. ")):G("",!0),f("div",mO,[w(Ge,{size:"xs",variant:"soft",onClick:ye=>ae(ce)},{default:ee(()=>[de(Q(ce.isMultiline?"Use single-line value":"Use JSON value"),1)]),_:2},1032,["onClick"])])])]))),128))]),h.value?(v(),b("p",gO,Q(h.value),1)):G("",!0),o.value?(v(),b("p",vO,Q(o.value),1)):G("",!0),s.error?(v(),b("p",yO,Q(s.error),1)):G("",!0)])]),key:"0"}:void 0,s.entry?{name:"actions",fn:ee(()=>[w(Ge,{size:"sm",variant:"secondary",class:"shadow-none",onClick:J[5]||(J[5]=ce=>i("update:modelValue",!1))},{default:ee(()=>[...J[13]||(J[13]=[de(" Cancel ",-1)])]),_:1}),w(Ge,{size:"sm",disabled:s.saving,onClick:te},{default:ee(()=>[de(Q(s.saving?"Saving":"Save Entry"),1)]),_:1},8,["disabled"])]),key:"1"}:void 0]),1032,["model-value"]))}},$b=(s="")=>{const t=String(s??"").trim().replace(/[^a-zA-Z0-9]+/g,"-").replace(/^-+|-+$/g,"").toLowerCase();return t?`data-node-${t}`:"data-node-root"},xO=["id"],wO=["aria-expanded"],SO={class:"flex-1"},CO={key:0,class:"rounded bg-amber-200/70 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},_O={key:1},AO={class:"mt-1 text-xs text-zinc-500 dark:text-zinc-400"},MO={class:"text-xs font-medium uppercase tracking-wide text-zinc-500 dark:text-zinc-400"},DO={class:"flex items-start gap-3"},EO={class:"flex-1"},TO={key:0,class:"rounded bg-amber-200/70 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},OO={key:1},jO={class:"mt-1 text-xs text-zinc-500 dark:text-zinc-400"},PO=["id"],$O={class:"flex items-start justify-between gap-4"},RO={class:"min-w-0 flex items-center gap-2"},LO={class:"text-sm font-semibold text-gray-900 dark:text-white"},VO={key:0,class:"rounded bg-amber-200/70 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},BO={key:1},IO={key:0,class:"inline-flex items-center rounded-full border border-gray-200 bg-white px-2.5 py-1 text-xs font-medium text-gray-700 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-100"},NO={class:"flex items-center gap-2 shrink-0"},FO={class:"mt-5 space-y-4"},zO={key:0,class:"space-y-2"},UO={class:"text-sm leading-relaxed text-gray-600 dark:text-zinc-300"},HO={key:1,class:"flex items-start gap-3"},WO={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},qO={key:1,class:"h-4 w-4 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},KO={class:"min-w-0 flex-1"},GO={class:"mt-1 font-mono text-sm leading-relaxed text-gray-900 dark:text-zinc-100"},JO={key:0,class:"rounded bg-amber-200/60 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},YO={key:1},QO={key:1,class:"text-zinc-500"},XO={class:"flex items-start gap-3 pt-4 border-t border-gray-200 dark:border-zinc-700"},ZO={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},ej={key:1,class:"h-4 w-4 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},tj={class:"min-w-0 flex-1"},sj={class:"mt-1 font-mono text-sm leading-relaxed text-gray-900 dark:text-zinc-100"},ij={key:0,class:"rounded bg-amber-200/60 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},nj={key:1},rj={key:1,class:"text-zinc-500"},oj={class:"min-w-0"},lj={class:"text-xs font-medium uppercase tracking-wide text-gray-600 dark:text-zinc-200"},aj={class:"mt-1 whitespace-pre-wrap break-words font-mono text-[13px] text-gray-800 dark:text-zinc-200"},uj={class:"flex items-start gap-3 pt-4 border-t border-gray-200 dark:border-zinc-700"},cj={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},dj={key:1,class:"h-4 w-4 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},fj={class:"min-w-0 flex-1"},hj=["title"],cc="mt-1.5 inline-flex h-10 w-10 items-center justify-center rounded-md border border-gray-200 bg-white text-gray-500 transition hover:border-gray-300 hover:text-gray-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-500 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-300 dark:hover:border-gray-500 dark:hover:text-gray-100",pj=Object.assign({name:"DataCatalogTree"},{__name:"DataCatalogTree",props:{node:{type:Object,required:!0},depth:{type:Number,default:0},expandedKeys:{type:Object,required:!0},autoExpandedKeys:{type:Object,required:!0},toggleGroup:{type:Function,required:!0},searchTerm:{type:String,default:""},hierarchical:{type:Boolean,default:!0},pendingDeletes:{type:Object,default:null}},emits:["edit","delete"],setup(s,{emit:e}){const t=e,i=s,n=z(()=>i.node?.type==="group"),r=z(()=>i.depth===0),o=z(()=>{if(!n.value)return!1;if(!i.hierarchical)return!0;const X=i.node?.fullKey;if(!X)return!1;const B=i.expandedKeys,ae=i.autoExpandedKeys,te=typeof B?.has=="function"?B.has(X):!!B?.[X],$=typeof ae?.has=="function"?ae.has(X):!!ae?.[X];return te||$}),l=z(()=>{const X=i.node?.leafCount||0;return`${X} ${X===1?"entry":"entries"}`}),a=z(()=>r.value?"mb-4 rounded-xl border border-gray-200 bg-white p-6 transition hover:border-gray-300 scroll-mt-16 dark:border-gray-700/70 dark:bg-gray-900 dark:hover:border-gray-600":"mb-3 rounded-lg border border-gray-200 bg-white p-4 transition hover:border-gray-300 dark:border-gray-700/60 dark:bg-gray-900/60 dark:hover:border-gray-600"),c=z(()=>r.value?"text-lg font-semibold text-zinc-900 dark:text-white":"text-sm font-semibold text-zinc-900 dark:text-white"),u=z(()=>r.value?"mt-4 space-y-3":"mt-3 space-y-3"),d=z(()=>i.pendingDeletes instanceof Set?i.pendingDeletes:i.pendingDeletes&&typeof i.pendingDeletes=="object"&&i.pendingDeletes.value instanceof Set?i.pendingDeletes.value:new Set),h=z(()=>d.value.has(i.node?.fullKey)),p=z(()=>{const X=i.node?.data||{},B=new Set(["path","type","description","locked","delimiter"]);return Object.keys(X).filter(ae=>!B.has(ae)).reduce((ae,te)=>(ae[te]=X[te],ae),{})}),g=z(()=>{const X="relative rounded-lg p-6 transition focus-within:ring-2",B=r.value?"scroll-mt-16":"";return h.value?`${X} border border-red-200 bg-red-50 hover:bg-red-100 focus-within:ring-red-300 ${B} dark:border-red-500/40 dark:bg-red-900/30 dark:hover:bg-red-900/40 dark:focus-within:ring-red-500/40`:`${X} border border-gray-200 bg-gray-50 hover:bg-gray-100 focus-within:ring-sky-200 ${B} dark:border-gray-700/50 dark:bg-gray-800/50 dark:hover:bg-gray-800/60 dark:focus-within:ring-sky-500/40`}),k=z(()=>h.value?"shadow-none border border-red-200 text-red-700 hover:bg-red-50 dark:border-red-500/40 dark:text-red-200 dark:hover:bg-red-900/30":"shadow-none"),m=z(()=>i.searchTerm.trim().toLowerCase()),x=(X="")=>{const B=X??"",ae=m.value;if(!ae)return[{text:B,highlight:!1}];const te=B.toLowerCase(),$=[];let K=0,J=te.indexOf(ae);for(;J!==-1;)J>K&&$.push({text:B.slice(K,J),highlight:!1}),$.push({text:B.slice(J,J+ae.length),highlight:!0}),K=J+ae.length,J=te.indexOf(ae,K);return K<B.length&&$.push({text:B.slice(K),highlight:!1}),$.length>0?$:[{text:B,highlight:!1}]},V=z(()=>i.node?.displayName||i.node?.name||""),I=z(()=>x(V.value)),U=z(()=>x(i.node?.data?.path||"")),N=z(()=>x(i.node?.fullKey||"")),P=z(()=>{const X=i.node?.fullKey||"";return X?`data_read('${X}')`:"data_read()"}),S=(X="")=>X.replace(/_/g," "),j=X=>X==null?"":typeof X=="object"?JSON.stringify(X,null,2):String(X),H=z(()=>{if(!r.value)return null;const X=i.node?.fullKey||i.node?.name;return X?$b(X):null}),ue=()=>{!n.value||!i.hierarchical||i.toggleGroup(i.node.fullKey)};return(X,B)=>{const ae=ha("DataCatalogTree",!0);return v(),b("div",null,[n.value?(v(),b("div",{key:0,id:H.value||void 0,class:be(a.value)},[s.hierarchical?(v(),b(ve,{key:0},[f("button",{type:"button",class:"flex w-full items-start gap-3 text-left transition hover:text-zinc-900 focus:outline-none",onClick:ue,"aria-expanded":o.value},[w(dt(zw),{class:be(["mt-1.5 h-4 w-4 shrink-0 text-zinc-400 transition-transform",{"rotate-90 text-sky-500":o.value}])},null,8,["class"]),f("div",SO,[f("p",{class:be(c.value)},[(v(!0),b(ve,null,Le(I.value,(te,$)=>(v(),b(ve,{key:$},[te.highlight?(v(),b("mark",CO,Q(te.text),1)):(v(),b("span",_O,Q(te.text),1))],64))),128))],2),f("p",AO,Q(l.value),1)]),f("span",MO,Q(o.value?"Hide":"Show"),1)],8,wO),w(Hd,{name:"catalog-collapse"},{default:ee(()=>[Je(f("div",{class:be(u.value)},[(v(!0),b(ve,null,Le(s.node.children,te=>(v(),Ae(ae,{key:te.fullKey,node:te,depth:s.depth+1,"expanded-keys":s.expandedKeys,"auto-expanded-keys":s.autoExpandedKeys,"toggle-group":s.toggleGroup,"search-term":s.searchTerm,hierarchical:s.hierarchical,"pending-deletes":s.pendingDeletes,onEdit:B[0]||(B[0]=$=>t("edit",$)),onDelete:B[1]||(B[1]=$=>t("delete",$))},null,8,["node","depth","expanded-keys","auto-expanded-keys","toggle-group","search-term","hierarchical","pending-deletes"]))),128))],2),[[et,o.value]])]),_:1})],64)):(v(),b(ve,{key:1},[f("div",DO,[f("div",EO,[f("p",{class:be(c.value)},[(v(!0),b(ve,null,Le(I.value,(te,$)=>(v(),b(ve,{key:$},[te.highlight?(v(),b("mark",TO,Q(te.text),1)):(v(),b("span",OO,Q(te.text),1))],64))),128))],2),f("p",jO,Q(l.value),1)])]),f("div",{class:be(u.value)},[(v(!0),b(ve,null,Le(s.node.children,te=>(v(),Ae(ae,{key:te.fullKey,node:te,depth:s.depth+1,"expanded-keys":s.expandedKeys,"auto-expanded-keys":s.autoExpandedKeys,"toggle-group":s.toggleGroup,"search-term":s.searchTerm,hierarchical:s.hierarchical,"pending-deletes":s.pendingDeletes,onEdit:B[2]||(B[2]=$=>t("edit",$)),onDelete:B[3]||(B[3]=$=>t("delete",$))},null,8,["node","depth","expanded-keys","auto-expanded-keys","toggle-group","search-term","hierarchical","pending-deletes"]))),128))],2)],64))],10,xO)):(v(),b("div",{key:1,id:H.value||void 0,class:be(g.value)},[f("div",$O,[f("div",RO,[f("h3",LO,[(v(!0),b(ve,null,Le(I.value,(te,$)=>(v(),b(ve,{key:`leaf-${$}`},[te.highlight?(v(),b("mark",VO,Q(te.text),1)):(v(),b("span",BO,Q(te.text),1))],64))),128))]),s.node.data?.type?(v(),b("span",IO,Q(s.node.data.type),1)):G("",!0)]),f("div",NO,[w(Ge,{size:"sm",variant:"secondary",class:be(k.value),onClick:B[4]||(B[4]=Ft(te=>t("delete",s.node),["stop"]))},{default:ee(()=>[de(Q(h.value?"Undo":"Delete"),1)]),_:1},8,["class"]),w(Ge,{size:"sm",variant:"secondary",class:"shadow-none",onClick:B[5]||(B[5]=te=>t("edit",s.node))},{default:ee(()=>[...B[6]||(B[6]=[de(" Edit ",-1)])]),_:1})])]),f("div",FO,[s.node.data?.description?(v(),b("div",zO,[B[7]||(B[7]=f("p",{class:"text-xs font-medium text-gray-600 dark:text-zinc-200"}," Description ",-1)),f("p",UO,Q(s.node.data.description),1)])):G("",!0),s.node.fullKey?(v(),b("div",HO,[w(ar,{value:s.node.fullKey||"",successMessage:"Dot notation copied",variant:"bare",class:be(cc),title:"Copy dot notation"},{default:ee(({copied:te})=>[te?(v(),b("svg",qO,[...B[9]||(B[9]=[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(v(),b("svg",WO,[...B[8]||(B[8]=[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"},null,-1)])]))]),_:1},8,["value"]),f("div",KO,[B[10]||(B[10]=f("p",{class:"text-xs font-medium text-gray-700 dark:text-zinc-100"}," Location (in Dot Notation) ",-1)),f("p",GO,[N.value.length>0?(v(!0),b(ve,{key:0},Le(N.value,(te,$)=>(v(),b(ve,{key:`key-${$}`},[te.highlight?(v(),b("mark",JO,Q(te.text),1)):(v(),b("span",YO,Q(te.text),1))],64))),128)):(v(),b("span",QO,""))])])])):G("",!0),f("div",XO,[w(ar,{value:s.node.data?.path||"",successMessage:"Path copied",variant:"bare",class:be(cc),title:"Copy path"},{default:ee(({copied:te})=>[te?(v(),b("svg",ej,[...B[12]||(B[12]=[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(v(),b("svg",ZO,[...B[11]||(B[11]=[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"},null,-1)])]))]),_:1},8,["value"]),f("div",tj,[B[13]||(B[13]=f("p",{class:"text-xs font-medium text-gray-700 dark:text-zinc-100"}," File Path ",-1)),f("p",sj,[U.value.length>0?(v(!0),b(ve,{key:0},Le(U.value,(te,$)=>(v(),b(ve,{key:`path-${$}`},[te.highlight?(v(),b("mark",ij,Q(te.text),1)):(v(),b("span",nj,Q(te.text),1))],64))),128)):(v(),b("span",rj,""))])])]),(v(!0),b(ve,null,Le(p.value,(te,$)=>(v(),b("div",{key:`meta-${$}`,class:"flex items-start justify-between gap-3 border-t border-gray-200 pt-4 text-sm dark:border-zinc-700"},[f("div",oj,[f("p",lj,Q(S($)),1),f("pre",aj,Q(j(te)),1)])]))),128)),f("div",uj,[w(ar,{value:P.value,successMessage:"data_read() command copied",variant:"bare",class:be([cc,"w-10"]),title:"Copy data_read() helper","aria-label":`Copy ${P.value}`},{default:ee(({copied:te})=>[te?(v(),b("svg",dj,[...B[15]||(B[15]=[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(v(),b("svg",cj,[...B[14]||(B[14]=[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8z"},null,-1)])]))]),_:1},8,["value","class","aria-label"]),f("div",fj,[B[16]||(B[16]=f("p",{class:"text-xs font-medium text-gray-700 dark:text-zinc-100"}," Usage ",-1)),f("p",{class:"mt-1 font-mono text-sm leading-relaxed text-gray-900 dark:text-zinc-100 truncate",title:P.value},Q(P.value),9,hj)])])])],10,PO))])}}}),mj=D0(pj,[["__scopeId","data-v-20f9f092"]]),gj={key:0,class:"flex items-center justify-center h-96"},vj={key:1,class:"flex-1 p-10"},yj={key:2,class:"flex min-h-screen"},bj={class:"w-64 shrink-0 border-r border-gray-200 p-6 dark:border-gray-800 flex flex-col"},kj={class:"mb-4"},xj={class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},wj={class:"flex items-center gap-2"},Sj={class:"text-xs text-gray-500 dark:text-gray-400 font-mono truncate"},Cj={class:"space-y-1"},_j={key:0,class:"ml-6 mt-1 space-y-0.5"},Aj=["href","onClick"],Mj={class:"truncate"},Dj={key:0,class:"shrink-0 rounded-full bg-gray-100 px-2 py-0.5 text-[10px] font-medium text-gray-500 dark:bg-gray-800 dark:text-gray-300"},Ej={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},Tj={class:"mt-auto pt-4 border-t border-gray-200 dark:border-gray-700"},Oj={class:"text-center py-3"},jj={class:"flex-1 p-10"},Pj={id:"overview"},$j={id:"basics"},Rj={key:0},Lj={key:1},Vj={key:2},Bj={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},Ij={key:0,class:"space-y-5"},Nj={class:"flex items-center gap-2"},Fj={class:"flex-1 px-3 py-2 text-sm font-mono text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-md"},zj={key:0,class:"pt-6 border-t border-gray-200 dark:border-gray-700"},Uj={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},Hj={id:"settings"},Wj={key:0},qj={key:1},Kj={key:2},Gj={class:"text-sm text-gray-600 dark:text-gray-400 mb-6"},Jj={id:"notebooks"},Yj={class:"rounded-lg bg-gray-50 p-12 dark:bg-gray-800/50 text-center"},Qj={id:"data"},Xj={class:"mb-6 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},Zj={class:"mb-6"},eP={key:0,class:"space-y-4"},tP={key:1,class:"mt-4 rounded-lg border border-red-200 bg-red-50 p-4 dark:border-red-500/40 dark:bg-red-900/20"},sP={class:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"},iP={class:"text-sm font-medium text-red-700 dark:text-red-200"},nP={class:"flex gap-2"},rP={class:"mt-3 list-disc space-y-1 pl-5 text-xs font-mono text-red-700 dark:text-red-200/90"},oP={key:2,class:"rounded-xl border border-dashed border-zinc-300 bg-white/70 p-10 text-center dark:border-zinc-700 dark:bg-zinc-900/40"},lP={class:"text-sm font-medium text-zinc-700 dark:text-zinc-200"},aP={id:"connections"},uP={id:"packages"},cP={key:0},dP={key:1},fP={key:2},hP={id:"ai"},pP={key:0},mP={key:1},gP={key:2},vP={id:"git"},yP={key:0},bP={key:1},kP={key:2},xP={id:"scaffold"},wP={key:0},SP={key:1},CP={key:2},_P={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},AP={id:"env"},MP={class:"space-y-6"},DP={key:0,class:"max-h-64 overflow-y-auto border border-gray-200 dark:border-gray-700 rounded-md"},EP=["onClick","onMouseenter"],TP={class:"flex items-start justify-between gap-2"},OP={class:"flex-1 min-w-0"},jP={class:"text-sm font-mono font-medium text-gray-900 dark:text-gray-100"},PP={key:0,class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5 line-clamp-1"},$P={key:1,class:"text-xs text-gray-500 dark:text-gray-500 mt-0.5"},RP={class:"text-xs text-gray-500 dark:text-gray-500 font-mono shrink-0"},LP={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},VP={key:1,class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},BP={class:"relative"},IP={class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},NP={class:"space-y-4 text-left"},FP={class:"flex items-start gap-3"},zP={class:"flex items-start gap-3"},UP={key:0,class:"mt-4"},HP={class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},WP={class:"font-mono font-bold"},qP={__name:"ProjectDetailView",setup(s){const e=Dr(),t=su(),i=ru(),n=ie(null),r=ie(!0),o=ie(null),l=ie("overview"),a=["overview","basics","settings","notebooks","connections","data","packages","ai","git","scaffold","env"],c=ie(null),u=ie(""),d=ie(new Set),h=ie(!1),p=ie(null),g=ie(!1),k=ie(null),m=ie(!1),x=ie(new Set),V=ie(!1),I=ie(null),U=ie(null),N=ie({}),P=ie(!1),S=ie(null),j=ie(new Set),H=ie(!1),ue=ie(!1),X=ie({initialize:!0,user_name:"",user_email:"",hooks:{ai_sync:!1,data_security:!1,check_sensitive_dirs:!1}}),B=ie(!1),ae=ie(null),te=ie(!1),$=ie(!1);ie([]),ie([]),ie([]),ie(!1);const K=ie([]),J=ie([]),ce=ie(null),ye=ie(null),Pe=ie(!1),Ve=ie([]),je=ie({use_renv:!1,default_packages:[]}),We=ie(!1),rt=ie(null),ot=ie(!1),Ze=ie(!1),oe=ie(!1),Y=ie("untrack"),W=ie(""),C=ie(""),se=ie([]),_=ie(!1),E=ie(-1),F=ie({name:"",source:"cran",auto_attach:!0}),ne=ie({}),re=ie({}),Z=ie(""),D=ie(!1),O=ie(null),R=ie(!1),le=ie(!1),_e=ie("grouped"),ge=ie(!1),ke=ie({enabled:!1,canonical_file:"CLAUDE.md",canonical_content:"",assistants:[]}),Ee=ie(!1),Ne=ie(null),he=ie(!1),Ue=ie(!1),kt=ie(!1),xt=ie({file:"CLAUDE.md",exists:!0}),Rt=z(()=>Object.keys(ne.value||{}).length),Tt=z(()=>{const M=n.value?.name||"Untitled",y=n.value?.path||"",L=N.value?.author?.name||I.value?.author?.name||n.value?.author||"";return{name:M,path:y,author:L}}),It=z(()=>n.value?.type||I.value?.project_type||"Not set"),ni=z(()=>N.value?.scaffold?.notebook_format||I.value?.scaffold?.notebook_format||"quarto"),pt=M=>M?M.charAt(0).toUpperCase()+M.slice(1):"";z(()=>{if(!ke.value.enabled)return"Disabled";const M=Array.isArray(ke.value.assistants)?ke.value.assistants:[],y=M.length?M.map(pt).join(", "):"Enabled",L=ke.value.canonical_file||"CLAUDE.md";return`${y}  ${L}`});const ze={ai_sync:"AI sync",data_security:"Secret scan",check_sensitive_dirs:"Sensitive dirs"},yt=z(()=>{const M=X.value?.hooks||{};return Object.entries(M).filter(([,y])=>!!y).map(([y])=>ze[y]||y)});z(()=>{const M=X.value.initialize?"Auto-initialize repositories":"Manual initialization";return yt.value.length?`${M}  ${yt.value.join(", ")}`:M});const wi=z(()=>je.value?.default_packages?.length||0);z(()=>{const M=je.value?.use_renv?"renv enabled":"renv disabled";return wi.value>0?`${wi.value} package${wi.value===1?"":"s"}  ${M}`:`No default packages  ${M}`}),z(()=>Rt.value>0?`${Rt.value} variable${Rt.value===1?"":"s"}`:"No variables defined");const il=z(()=>{const M=Tt.value.name,y=Tt.value.path,L=Tt.value.author;It.value;const Se=ni.value,$e=ke.value.enabled,He=ke.value.enabled?Array.isArray(ke.value.assistants)?ke.value.assistants.map(pt).join(", "):"Enabled":"",wt=ke.value.canonical_file||"CLAUDE.md",ct=X.value.initialize,Qt=yt.value,ys=wi.value,qn=je.value?.use_renv||!1,wu=Rt.value;return[{id:"basics",title:"Basics",section:"basics",content:`<div>${M}  ${L}</div><div class="text-sm text-gray-600 dark:text-gray-400 mt-1">${y}</div>`},{id:"structure",title:"Project Structure",section:"settings",content:`${pe.value}  ${Object.keys(T.value).length} workspace  ${Object.keys(A.value).length} input  ${Object.keys(q.value).length} output`},{id:"notebooks",title:"Notebooks & Scripts",section:"scaffold",content:Se},{id:"packages",title:"Packages",section:"packages",content:ys>0?`${ys} packages  renv ${qn?"enabled":"disabled"}`:`renv: ${qn?"enabled":"disabled"}`},{id:"env",title:".env",section:"env",content:wu>0?`${wu} variable${wu===1?"":"s"}`:"No variables defined"},{id:"ai",title:"AI Assistants",section:"ai",content:$e?`<span class="text-green-600 dark:text-green-400">${He}  ${wt}</span>`:'<span class="text-gray-600 dark:text-gray-400">Disabled</span>'},{id:"git",title:"Git & Hooks",section:"git",content:ct?`Auto-initialize repositories${Qt.length?`  ${Qt.join(", ")}`:""}`:"Manual initialization"}]}),Ms=M=>["flex items-center gap-2 px-3 py-2 rounded-md text-sm transition",l.value===M?"bg-sky-50 text-sky-700 font-medium dark:bg-sky-900/20 dark:text-sky-400":"text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-800"],nl=()=>{const M=e.query.section;M&&a.includes(M)?(l.value=M,M==="env"&&(Wn(),Rs(()=>Gf()))):l.value="overview"};Re(l,M=>{t.replace({query:{...e.query,section:M}}),(M==="settings"||M==="basics"||M==="scaffold")&&!I.value&&hl(),M==="connections"&&K.value.length===0&&J.value.length===0&&Gb(),M==="packages"&&Ve.value.length===0&&pl(),M==="git"&&!te.value&&gl(),M==="ai"&&!he.value&&ml(),M==="env"&&!R.value&&Wn()}),Re(()=>e.query.section,M=>{M&&a.includes(M)?(l.value=M,M==="env"&&(Rs(()=>Gf()),R.value||Wn())):M||(l.value="overview")});let ri=!1,Nt=!1;Re(()=>ke.value.canonical_file,(M,y)=>{ri||he.value&&(!M||M===y||t1(M))}),Re(ne,M=>{Nt||console.log("[envVariables watcher] Value changed (not suppressed)")},{deep:!0}),Re(re,M=>{Nt||console.log("[envGroups watcher] Value changed (not suppressed)")},{deep:!0}),Re(Z,M=>{Nt||console.log("[envRawContent watcher] Value changed (not suppressed)")});let Pr=null;Re(C,()=>{Pr&&clearTimeout(Pr),Pr=setTimeout(()=>{Jb()},300)});const pn=(M="")=>M.split(/[._-]/).filter(Boolean).map(y=>y.charAt(0).toUpperCase()+y.slice(1)).join(" "),qs=M=>JSON.parse(JSON.stringify(M)),bu=M=>Array.isArray(M)?M.map((y,L)=>[String(L),y]):Object.entries(M),rl=(M,y="",L=0)=>!M||typeof M!="object"?[]:bu(M).reduce((Se,[$e,He])=>{if(He==null)return Se;const wt=y?`${y}.${$e}`:$e;if(typeof He=="object"&&!Array.isArray(He)&&He.path)return Se.push({type:"leaf",name:$e,displayName:pn($e),fullKey:wt,data:He,leafCount:1,depth:L}),Se;if(typeof He=="object"){const ct=rl(He,wt,L+1);if(ct.length>0){const Qt=ct.reduce((ys,qn)=>ys+(qn.leafCount||0),0);Se.push({type:"group",name:$e,displayName:pn($e),fullKey:wt,children:ct,leafCount:Qt,depth:L})}}return Se},[]),ol=M=>M.slice().sort((y,L)=>y.displayName.localeCompare(L.displayName,void 0,{sensitivity:"base",numeric:!0})).map(y=>y.type==="group"?{...y,children:ol(y.children)}:y),ll=(M,y)=>{if(!y)return!0;const L=y.toLowerCase(),Se=[M.displayName,M.name,M.fullKey];return M.type==="leaf"&&M.data?.path&&Se.push(M.data.path),Se.some($e=>$e&&$e.toLowerCase().includes(L))},mn=(M,y)=>{if(!y)return{nodes:M,matchedKeys:new Set};const L=[],Se=new Set;return M.forEach($e=>{if($e.type==="leaf"){ll($e,y)&&(L.push($e),Se.add($e.fullKey));return}const He=mn($e.children,y);if(ll($e,y)||He.nodes.length>0){const ct=He.nodes,Qt=ct.reduce((ys,qn)=>ys+(qn.leafCount||0),0);L.push({...$e,children:ct,leafCount:Qt||$e.leafCount}),Se.add($e.fullKey),He.matchedKeys.forEach(ys=>Se.add(ys))}}),{nodes:L,matchedKeys:Se}},gn=z(()=>{const M=c.value;return!M||typeof M!="object"?[]:!Array.isArray(M)&&M.path?[{type:"leaf",name:M.name||"data",displayName:pn(M.name||"data"),fullKey:M.name||"data",data:M,leafCount:1,depth:0}]:ol(rl(M))}),al=z(()=>u.value.trim().toLowerCase()),ul=z(()=>{const M=al.value;return M?mn(gn.value,M):{nodes:gn.value,matchedKeys:new Set}}),$r=z(()=>ul.value.nodes),cl=z(()=>ul.value.matchedKeys),Rr=z(()=>al.value.length>0),Lr=z(()=>Rr.value?[]:(gn.value||[]).filter(M=>(M.depth||0)===0).map(M=>{const y=M.fullKey||M.name||"";return{anchorId:y?$b(y):null,label:M.displayName||pn(M.name||y||"data source"),count:M.leafCount||(M.type==="leaf"?1:0),nodeKey:y}}).filter(M=>M.anchorId&&M.label)),Ks=z(()=>x.value.size>0),us=z(()=>x.value.size),Si=z(()=>Array.from(x.value)),Vr=M=>{let y=0;return M.forEach(L=>{y=Math.max(y,L.depth||0),L.type==="group"&&L.children&&(y=Math.max(y,Vr(L.children)))}),y},dl=z(()=>Vr(gn.value)),Br=z(()=>dl.value>2),T=z(()=>{const M=N.value.directories||{},y={},L=["functions","notebooks","scripts"];return Object.keys(M).forEach(Se=>{L.includes(Se)&&(y[Se]=M[Se])}),y}),A=z(()=>{const M=N.value.directories||{},y={};return Object.keys(M).forEach(L=>{(L.startsWith("inputs_")||L.includes("_raw")||L.includes("_intermediate")||L.includes("_final"))&&(y[L]=M[L])}),y}),q=z(()=>{const M=N.value.directories||{},y={};return Object.keys(M).forEach(L=>{(L.startsWith("outputs_")||L.includes("_figures")||L.includes("_tables")||L.includes("_models")||L.includes("_reports")||L==="cache"||L==="scratch")&&!L.startsWith("inputs_")&&(y[L]=M[L])}),y});z(()=>(N.value.extra_directories||[]).filter(y=>y.type==="input")),z(()=>(N.value.extra_directories||[]).filter(y=>y.type==="output")),z(()=>(N.value.extra_directories||[]).filter(y=>y.type==="workspace"));const pe=z(()=>{const M=n.value?.type;return M?{project:"Standard Project Structure",project_sensitive:"Privacy Sensitive Project Structure",presentation:"Presentation Structure",course:"Course Structure"}[M]||M:"Standard Project Structure"}),me=z(()=>{if(!I.value?.directories)return{};const M={},y=I.value.directories||{},L=U.value?.project_types?.[n.value.type]?.directories||{};return Object.keys(L).forEach(Se=>{M[Se]=Se in y}),I.value.extra_directories&&I.value.extra_directories.forEach(Se=>{M[Se.key]=!0}),M}),Be=z(()=>Y.value==="untrack"?!0:Y.value==="delete"?W.value===n.value?.name:!1),we=(M,y,L)=>{const Se=y.split(".").filter(Boolean);if(Se.length===0)return null;const $e=qs(M||{});let He=$e;for(let wt=0;wt<Se.length-1;wt++){const ct=Se[wt];(!He[ct]||typeof He[ct]!="object"||Array.isArray(He[ct]))&&(He[ct]={}),He=He[ct]}return He[Se[Se.length-1]]=qs(L),$e},Qe=(M,y)=>{if(!M||!y)return null;const L=y.split(".").filter(Boolean);if(L.length===0)return null;let Se=M;for(let $e=0;$e<L.length;$e++){const He=L[$e];if(!Se||typeof Se!="object"||!(He in Se))return null;Se=Se[He]}return Se},Ds=M=>{const y=M.split(".").filter(Boolean);if(y.length<=1)return;const L=new Set(d.value);let Se="";for(let $e=0;$e<y.length-1;$e++)Se=Se?`${Se}.${y[$e]}`:y[$e],L.add(Se);d.value=L},Ot=async(M,y)=>{if(!M)return;if(y){Ds(y);const Se=new Set(d.value);Se.add(y),d.value=Se}await Rs();const L=document.getElementById(M);L&&L.scrollIntoView({behavior:"smooth",block:"start"})},fl=async M=>{const y=await fetch(`/api/project/${e.params.id}/data`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:M})}),L=await y.json();if(!y.ok||L.error)throw new Error(L.error||"Failed to save data catalog")},Vb=M=>{M&&(m.value=!1,p.value={fullKey:M.fullKey,name:M.name,data:qs(M.data||{})},k.value=null,h.value=!0)},Bb=()=>{m.value=!0,p.value={fullKey:"",data:{}},k.value=null,h.value=!0},Ib=M=>{h.value=M,M||(p.value=null,k.value=null,g.value=!1,m.value=!1)},Nb=async M=>{if(!M||!M.fullKey||!M.data){k.value=M?.error||"Invalid data entry payload";return}const y=M.fullKey.trim(),L=!!M.isNew;if(!y){k.value="Dot notation key is required";return}if(L&&Qe(c.value,y)){k.value="A data source with this key already exists";return}const Se=qs(c.value),$e=we(c.value,y,M.data);if(!$e){k.value="Unable to write data entry to catalog";return}c.value=$e,g.value=!0,k.value=null;try{if(await fl($e),Ds(y),i.success(L?"Data Source Added":"Data Catalog Updated",L?"Data entry created successfully":"Data entry saved successfully"),h.value=!1,p.value=null,m.value=!1,x.value.has(y)){const He=new Set(x.value);He.delete(y),x.value=He}}catch(He){c.value=Se,k.value=He.message||"Failed to save data catalog",i.error("Save Failed",He.message||"Failed to save data catalog")}finally{g.value=!1}},Fb=(M,y)=>{if(!M||!y)return null;const L=y.split(".").filter(Boolean);if(L.length===0)return null;const Se=qs(M),$e=[];let He=Se;for(let ct=0;ct<L.length;ct++){const Qt=L[ct];if(!He||typeof He!="object"||!(Qt in He))return null;$e.push({parent:He,key:Qt}),He=He[Qt]}const wt=$e.pop();if(!wt)return null;delete wt.parent[wt.key];for(let ct=$e.length-1;ct>=0;ct--){const{parent:Qt,key:ys}=$e[ct];Qt[ys]&&typeof Qt[ys]=="object"&&!Array.isArray(Qt[ys])&&Object.keys(Qt[ys]).length===0&&delete Qt[ys]}return Se},zb=async()=>{if(!Ks.value)return;V.value=!0;const M=qs(c.value);let y=qs(M);for(const L of x.value){const Se=Fb(y,L);if(!Se){i.error("Delete Failed",`Unable to locate ${L} in catalog`),V.value=!1;return}y=Se}try{await fl(y),c.value=y,i.success("Data Catalog Updated","Staged deletions have been saved"),x.value=new Set}catch(L){i.error("Delete Failed",L.message||"Failed to save catalog changes")}finally{V.value=!1}},Ub=M=>{if(!M||!M.fullKey)return;const y=new Set(x.value);y.has(M.fullKey)?y.delete(M.fullKey):y.add(M.fullKey),x.value=y},Hb=()=>{x.value=new Set},Wb=M=>{const y=new Set(d.value);y.has(M)?y.delete(M):y.add(M),d.value=y},qf=async()=>{r.value=!0,o.value=null;try{const y=await(await fetch(`/api/project/${e.params.id}`)).json();y.error?o.value=y.error:n.value=y}catch(M){o.value="Failed to load project: "+M.message}finally{r.value=!1}},Kf=async()=>{try{const y=await(await fetch(`/api/project/${e.params.id}/data`)).json();y.error||(c.value=y.data||y)}catch(M){console.error("Failed to load data catalog:",M)}},hl=async()=>{P.value=!0,S.value=null;try{const[M,y]=await Promise.all([fetch(`/api/project/${e.params.id}/settings`),fetch("/api/settings/catalog")]),L=await M.json(),Se=await y.json();if(U.value=Se,L.error)S.value=L.error;else{console.log("[DEBUG] Loaded project settings:",L.settings),console.log("[DEBUG] extra_directories:",L.settings.extra_directories),I.value=L.settings;const $e=C6(L.settings,U.value?.project_types?.[L.settings?.type||n.value.type]?.directories||{});N.value={...JSON.parse(JSON.stringify(L.settings)),directories:$e.directories,render_dirs:$e.render_dirs,extra_directories:$e.extra_directories,enabled:$e.enabled},N.value.scaffold||(N.value.scaffold={notebook_format:"quarto",positron:!1})}}catch(M){S.value="Failed to load settings: "+M.message}finally{P.value=!1}},qb=async()=>{switch(l.value){case"author":case"settings":await ku();break;case"packages":await Jf();break;case"scaffold":await ku();break;case"git":await sh();break;case"connections":await Yf();break;case"ai":await th();break;case"env":await xu();break;case"overview":case"notebooks":case"data":i.info("No Changes to Save","This section has no editable settings");break;default:i.info("No Changes to Save","This section has no editable settings")}},ku=async()=>{console.log("[DEBUG] saveSettings called! Stack trace:",new Error().stack),H.value=!0;try{const M=(N.value.extra_directories||[]).filter(wt=>j.value.has(wt._id));if(M.length>0){const ct=await(await fetch(`/api/project/${e.params.id}/directories`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({directories:M})})).json();if(!ct.success){i.error("Directory Creation Failed",ct.error||"Failed to create directories"),H.value=!1;return}j.value=new Set}const y=U.value?.project_types?.[n.value.type]?.directories||{},L=jb({catalogDirs:y,directories:N.value.directories||{},render_dirs:N.value.render_dirs||{},enabled:N.value.enabled||{},extra_directories:N.value.extra_directories||[]}),Se={...N.value,directories:L.directories,render_dirs:L.render_dirs,enabled:L.enabled,extra_directories:L.extra_directories};console.log("[DEBUG] Saving settings with extra_directories:",Se.extra_directories),console.log("[DEBUG] Cleaned enabled state:",cleanedEnabled),console.log("[DEBUG] Removed invalid keys:",Object.keys(N.value.enabled).filter(wt=>!validKeys.has(wt)));const He=await(await fetch(`/api/project/${e.params.id}/settings`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Se)})).json();if(He.success){const wt=M.length>0?`Settings updated and ${M.length} director${M.length===1?"y":"ies"} created`:"Project settings have been updated";i.success("Settings Saved",wt),I.value=JSON.parse(JSON.stringify(N.value)),await hl()}else i.error("Save Failed",He.error||"Failed to save settings")}catch(M){i.error("Save Failed",M.message)}finally{H.value=!1}},Kb=M=>{M&&Ot(M.anchorId,M.nodeKey)},Gf=()=>{const M=document.getElementById("env");M&&M.scrollIntoView({behavior:"smooth",block:"start"})},Gb=async()=>{try{const y=await(await fetch(`/api/project/${e.params.id}/connections`)).json();if(y.error)console.error("Failed to load connections:",y.error);else{const L=Object.entries(y.databases||{}).map(([$e,He])=>({_id:$e,name:$e,...He})),Se=Object.entries(y.storage_buckets||{}).map(([$e,He])=>({_id:$e,name:$e,...He}));K.value=L,J.value=Se,ce.value=y.default_database||null,ye.value=y.default_storage_bucket||null}}catch(M){console.error("Failed to load connections:",M.message)}},pl=async()=>{We.value=!0,rt.value=null;try{const y=await(await fetch(`/api/project/${e.params.id}/packages`)).json();if(y.error)rt.value=y.error;else{const L=A6(y);Ve.value=JSON.parse(JSON.stringify(L.default_packages||[])),je.value=L}}catch(M){rt.value="Failed to load packages: "+M.message}finally{We.value=!1}},Jf=async()=>{ot.value=!0;try{const y=await(await fetch(`/api/project/${e.params.id}/packages`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Pb(je.value))})).json();y.success?(i.success("Packages Saved","Package configuration has been updated"),await pl()):i.error("Save Failed",y.error||"Failed to save packages")}catch(M){i.error("Save Failed",M.message)}finally{ot.value=!1}},Yf=async()=>{Pe.value=!0;try{const M={};K.value.forEach($e=>{const{_id:He,name:wt,...ct}=$e;M[wt]=ct});const y={};J.value.forEach($e=>{const{_id:He,name:wt,...ct}=$e;y[wt]=ct});const Se=await(await fetch(`/api/project/${e.params.id}/connections`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({default_database:ce.value,default_storage_bucket:ye.value,databases:M,storage_buckets:y})})).json();Se.success?i.success("Connections Saved","Connection configuration has been updated"):i.error("Save Failed",Se.error||"Failed to save connections")}catch(M){i.error("Save Failed",M.message)}finally{Pe.value=!1}},Jb=async()=>{if(C.value.length<2){se.value=[],E.value=-1;return}_.value=!0;try{const y=await(await fetch(`/api/packages/search?q=${encodeURIComponent(C.value)}`)).json();console.log("Package search results:",y),se.value=y.packages||[],E.value=se.value.length>0?0:-1}catch(M){console.error("Failed to search packages:",M),se.value=[],E.value=-1}finally{_.value=!1}},Yb=M=>{se.value.length!==0&&(M.key==="ArrowDown"?(M.preventDefault(),E.value=Math.min(E.value+1,se.value.length-1)):M.key==="ArrowUp"?(M.preventDefault(),E.value=Math.max(E.value-1,0)):M.key==="Enter"&&E.value>=0?(M.preventDefault(),Qf(se.value[E.value])):M.key==="Escape"&&(se.value=[],E.value=-1))},Qf=M=>{F.value.name=M.name,F.value.source=M.source,C.value="",se.value=[],E.value=-1},Qb=()=>{F.value.name.trim()&&(Ve.value.push({name:F.value.name.trim(),source:F.value.source,auto_attach:F.value.auto_attach}),Ze.value=!1,i.success("Package Added",`${F.value.name} added to package list`))},Xb=()=>{oe.value=!1,Y.value="untrack",W.value=""},Zb=async()=>{if(!Be.value){console.log("[DELETE] Cannot delete - canDelete is false");return}console.log("[DELETE] Starting delete with option:",Y.value),console.log("[DELETE] Project ID:",e.params.id);try{const M=Y.value==="delete"?`/api/projects/${e.params.id}/delete`:`/api/projects/${e.params.id}/untrack`;console.log("[DELETE] Calling endpoint:",M);const y=await fetch(M,{method:"POST",headers:{"Content-Type":"application/json"}});if(console.log("[DELETE] Response status:",y.status),!y.ok){const $e=await y.json();throw console.error("[DELETE] Error response:",$e),new Error($e.message||"Failed to delete project")}const L=await y.json();console.log("[DELETE] Success result:",L);const Se=Y.value==="delete"?"deleted":"removed from Framework";i.success("Project Removed",`${n.value.name} has been ${Se}`),setTimeout(()=>{window.location.href="/projects"},500)}catch(M){console.error("[DELETE] Failed to delete project:",M),i.error("Delete Failed",M.message||"Could not delete project")}},e1=M=>M?Array.isArray(M)?Array.from(new Set(M.map(y=>String(y)))):typeof M=="string"?[M]:[]:[],Xf=async M=>{let y=`/api/project/${e.params.id}/ai`;if(M){const Se=new URLSearchParams;Se.set("canonical_file",M),y+=`?${Se.toString()}`}const L=await fetch(y);if(!L.ok)throw new Error("Failed to load AI settings");return L.json()},ml=async()=>{Ee.value=!0,Ne.value=null;try{const M=await Xf();if(M.error){Ne.value=M.error,he.value=!1;return}const y=M.ai||{};ri=!0;const L={enabled:!!y.enabled,canonical_file:y.canonical_file||"CLAUDE.md",canonical_content:y.canonical_content||"",assistants:e1(y.assistants)};ke.value=L,xt.value={file:y.content_file||y.canonical_file||"CLAUDE.md",exists:!!y.content_exists},ri=!1,await eh(L.canonical_file,{preserveContentIfMissing:!1}),he.value=!0}catch(M){Ne.value=M.message||"Failed to load AI settings",he.value=!1}finally{ri=!1,Ee.value=!1,kt.value=!1}},gl=async()=>{B.value=!0,ae.value=null;try{const y=await(await fetch(`/api/project/${e.params.id}/git`)).json();if(y.error){ae.value=y.error,te.value=!1;return}const L=y.git||{};X.value={initialize:L.initialize!==void 0?!!L.initialize:!0,user_name:L.user_name||"",user_email:L.user_email||"",hooks:{ai_sync:L.hooks?.ai_sync||!1,data_security:L.hooks?.data_security||!1,check_sensitive_dirs:L.hooks?.check_sensitive_dirs||!1}},te.value=!0}catch(M){ae.value=M.message||"Failed to load Git settings",te.value=!1}finally{B.value=!1}},Zf=z({get(){return Hf({useGit:X.value.initialize,gitHooks:X.value.hooks,git:X.value})},set(M){const y={...X.value,hooks:{...X.value.hooks||{}}};Wf({gitTarget:y,gitHooksTarget:y.hooks,setUseGit:L=>{y.initialize=L}},M),X.value=y}}),eh=async(M,{preserveContentIfMissing:y=!0}={})=>{if(M){kt.value=!0;try{const L=await Xf(M);if(L.error){i.error("Load Failed",L.error);return}const Se=L.ai||{};xt.value={file:Se.content_file||M,exists:!!Se.content_exists},(Se.content_exists||!y)&&(ke.value.canonical_content=Se.canonical_content||"")}catch(L){i.error("Load Failed",L.message||"Unable to load canonical file")}finally{kt.value=!1}}},t1=M=>{const y=typeof M=="string"&&M.length>0?M:"CLAUDE.md";eh(y,{preserveContentIfMissing:!0})},th=async()=>{Ue.value=!0;try{const y=await(await fetch(`/api/project/${e.params.id}/ai`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:ke.value.enabled,canonical_file:ke.value.canonical_file,assistants:ke.value.assistants,canonical_content:ke.value.canonical_content})})).json();y.success?(i.success("AI Settings Saved","AI assistant configuration has been updated"),he.value=!1,await ml()):i.error("Save Failed",y.error||"Failed to save AI settings")}catch(M){i.error("Save Failed",M.message||"Failed to save AI settings")}finally{Ue.value=!1}},sh=async()=>{$.value=!0;try{const y=await(await fetch(`/api/project/${e.params.id}/git`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({initialize:X.value.initialize,user_name:X.value.user_name,user_email:X.value.user_email,hooks:X.value.hooks})})).json();y.success?(i.success("Git Settings Saved","Repository configuration has been updated"),te.value=!1,await gl()):i.error("Save Failed",y.error||"Failed to save Git settings")}catch(M){i.error("Save Failed",M.message||"Failed to save Git settings")}finally{$.value=!1}},Wn=async()=>{if(D.value||R.value){console.log("[loadEnv] Blocked: already loading or loaded",{loading:D.value,loaded:R.value});return}D.value=!0,O.value=null;try{const y=await(await fetch(`/api/project/${e.params.id}/env`)).json();y.error?(O.value=y.error,R.value=!1):(Nt=!0,console.log("[loadEnv] Updating env values with suppressEnvWatch = true"),R.value=!0,ne.value=y.variables||{},re.value=y.groups||{},Z.value=y.raw_content||"",Nt=!1,console.log("[loadEnv] Env values updated, suppressEnvWatch = false"))}catch(M){O.value="Failed to load .env: "+M.message,R.value=!1}finally{Nt=!1,D.value=!1}},xu=async()=>{le.value=!0;try{const M=_e.value==="raw"?{raw_content:Z.value}:{variables:ne.value,regroup:ge.value},L=await(await fetch(`/api/project/${e.params.id}/env`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(M)})).json();L.success?(i.success(".env Saved","Environment variables have been updated"),R.value=!1,await Wn()):i.error("Save Failed",L.error||"Failed to save .env")}catch(M){i.error("Save Failed",M.message)}finally{le.value=!1}},s1=async()=>{ue.value=!0;try{const y=await(await fetch(`/api/project/${e.params.id}/quarto/regenerate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({backup:!0})})).json();y.success?i.success("Quarto Configs Regenerated",y.message+(y.backup_location?`

Backup: ${y.backup_location}`:"")):i.error("Regeneration Failed",y.error||"Failed to regenerate Quarto configurations")}catch(M){i.error("Regeneration Failed",M.message)}finally{ue.value=!1}},ih=M=>{(M.metaKey||M.ctrlKey)&&M.key==="s"&&(M.preventDefault(),l.value==="settings"||l.value==="scaffold"?ku():l.value==="connections"?Yf():l.value==="packages"?Jf():l.value==="git"?sh():l.value==="ai"?th():l.value==="directories"?saveDirectories():l.value==="env"&&xu())};return os(()=>{nl(),qf(),Kf(),hl(),pl(),ml(),gl(),Wn(),window.addEventListener("keydown",ih)}),Mr(()=>{window.removeEventListener("keydown",ih)}),Re(()=>e.params.id,(M,y)=>{M&&M!==y&&(l.value="overview",n.value=null,I.value=null,N.value={},S.value=null,P.value=!1,Ve.value=[],je.value={use_renv:!1,default_packages:[]},rt.value=null,We.value=!1,c.value=null,x.value=new Set,k.value=null,p.value=null,ne.value={},re.value={},Z.value="",O.value=null,D.value=!1,_e.value="grouped",ge.value=!1,X.value={initialize:!0,user_name:"",user_email:"",hooks:{ai_sync:!1,data_security:!1,check_sensitive_dirs:!1}},te.value=!1,ae.value=null,B.value=!1,ri=!0,ke.value={enabled:!1,canonical_file:"CLAUDE.md",canonical_content:"",assistants:[]},xt.value={file:"CLAUDE.md",exists:!0},he.value=!1,Ne.value=null,Ee.value=!1,kt.value=!1,ri=!1,R.value=!1,O.value=null,D.value=!1,c.value=null,nl(),qf(),Kf(),hl(),pl(),ml(),gl(),Wn())}),(M,y)=>(v(),b("div",null,[r.value?(v(),b("div",gj,[...y[47]||(y[47]=[f("div",{class:"text-zinc-600 dark:text-zinc-400"},"Loading project...",-1)])])):o.value?(v(),b("div",vj,[w(ks,{type:"error",title:"Error Loading Project",description:o.value},null,8,["description"])])):n.value?(v(),b("div",yj,[f("nav",bj,[f("div",kj,[f("h2",xj,Q(n.value.name),1),f("div",wj,[f("span",Sj,Q(n.value.path),1),w(ar,{value:n.value.path,variant:"ghost",successMessage:"Path copied",class:"shrink-0"},null,8,["value"])])]),f("div",Cj,[f("a",{href:"#overview",onClick:y[0]||(y[0]=Ft(L=>l.value="overview",["prevent"])),class:be(Ms("overview"))},[w(dt(iu),{class:"h-4 w-4"}),y[48]||(y[48]=de(" Overview ",-1))],2),w(Na,null,{default:ee(()=>[...y[49]||(y[49]=[de("Settings",-1)])]),_:1}),f("a",{href:"#basics",onClick:y[1]||(y[1]=Ft(L=>l.value="basics",["prevent"])),class:be(Ms("basics"))},[w(dt(Kd),{class:"h-4 w-4"}),y[50]||(y[50]=de(" Basics ",-1))],2),f("a",{href:"#settings",onClick:y[2]||(y[2]=Ft(L=>l.value="settings",["prevent"])),class:be(Ms("settings"))},[w(dt(ba),{class:"h-4 w-4"}),y[51]||(y[51]=de(" Project Structure ",-1))],2),f("a",{href:"#packages",onClick:y[3]||(y[3]=Ft(L=>l.value="packages",["prevent"])),class:be(Ms("packages"))},[w(dt(Gd),{class:"h-4 w-4"}),y[52]||(y[52]=de(" Packages ",-1))],2),f("a",{href:"#ai",onClick:y[4]||(y[4]=Ft(L=>l.value="ai",["prevent"])),class:be(Ms("ai"))},[w(dt(Gw),{class:"h-4 w-4"}),y[53]||(y[53]=de(" AI Assistants ",-1))],2),f("a",{href:"#git",onClick:y[5]||(y[5]=Ft(L=>l.value="git",["prevent"])),class:be(Ms("git"))},[...y[54]||(y[54]=[f("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})],-1),de(" Git & Hooks ",-1)])],2),f("a",{href:"#connections",onClick:y[6]||(y[6]=Ft(L=>l.value="connections",["prevent"])),class:be(Ms("connections"))},[w(dt(Jd),{class:"h-4 w-4"}),y[55]||(y[55]=de(" Connections ",-1))],2),f("a",{href:"#env",onClick:y[7]||(y[7]=Ft(L=>l.value="env",["prevent"])),class:be(Ms("env"))},[w(dt(nu),{class:"h-4 w-4"}),y[56]||(y[56]=de(" .env Defaults ",-1))],2),f("a",{href:"#scaffold",onClick:y[8]||(y[8]=Ft(L=>l.value="scaffold",["prevent"])),class:be(Ms("scaffold"))},[w(dt(Nw),{class:"h-4 w-4"}),y[57]||(y[57]=de(" Scaffold Behavior ",-1))],2),w(Na,null,{default:ee(()=>[...y[58]||(y[58]=[de("Project",-1)])]),_:1}),f("a",{href:"#data",onClick:y[9]||(y[9]=Ft(L=>l.value="data",["prevent"])),class:be(Ms("data"))},[w(dt(Uw),{class:"h-4 w-4"}),y[59]||(y[59]=de(" Data ",-1))],2),l.value==="data"&&Lr.value.length?(v(),b("div",_j,[(v(!0),b(ve,null,Le(Lr.value,L=>(v(),b("a",{key:L.anchorId,href:`#${L.anchorId}`,onClick:Ft(Se=>Kb(L),["prevent"]),class:"flex items-center justify-between gap-2 rounded-md px-3 py-1 text-xs text-gray-600 transition hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-gray-800"},[f("span",Mj,Q(L.label),1),L.count?(v(),b("span",Dj,Q(L.count),1)):G("",!0)],8,Aj))),128))])):G("",!0),f("a",{href:"#notebooks",onClick:y[10]||(y[10]=Ft(L=>l.value="notebooks",["prevent"])),class:be(Ms("notebooks"))},[w(dt(ya),{class:"h-4 w-4"}),y[60]||(y[60]=de(" Notebooks ",-1))],2)]),f("div",Ej,[w(Ge,{variant:"primary",onClick:qb,disabled:H.value||ot.value||le.value||Ue.value||$.value||Pe.value,class:"w-full"},{default:ee(()=>[de(Q(H.value||ot.value||le.value||Ue.value||$.value||Pe.value?"Saving...":"Save"),1)]),_:1},8,["disabled"])]),f("div",Tj,[f("div",Oj,[f("button",{onClick:y[11]||(y[11]=L=>oe.value=!0),class:"text-xs text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-400 transition"}," Delete Project ")])])]),f("div",jj,[Je(f("div",Pj,[y[61]||(y[61]=f("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Overview",-1)),y[62]||(y[62]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Quick overview of your project settings. ",-1)),w(Rf,{cards:il.value,onNavigate:y[12]||(y[12]=L=>l.value=L)},null,8,["cards"])],512),[[et,l.value==="overview"]]),Je(f("div",$j,[P.value?(v(),b("div",Rj,[...y[63]||(y[63]=[f("div",{class:"text-center py-12 text-zinc-500 dark:text-zinc-400"}," Loading settings... ",-1)])])):S.value?(v(),b("div",Lj,[w(ks,{type:"error",title:"Error Loading Settings",description:S.value},null,8,["description"])])):(v(),b("div",Vj,[y[71]||(y[71]=f("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Basics",-1)),y[72]||(y[72]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Essential project settings. ",-1)),f("div",Bj,[N.value.scaffold?(v(),b("div",Ij,[w(Ce,{modelValue:n.value.name,"onUpdate:modelValue":y[13]||(y[13]=L=>n.value.name=L),label:"Project Name",hint:"Changing this will rename the project directory"},null,8,["modelValue"]),f("div",null,[y[64]||(y[64]=f("label",{class:"block text-sm font-semibold text-gray-900 dark:text-white mb-2"}," Filesystem Location ",-1)),f("div",Nj,[f("code",Fj,Q(n.value.path),1),w(ar,{value:n.value.path,successMessage:"Path copied"},null,8,["value"])])]),f("div",null,[y[66]||(y[66]=f("label",{class:"block text-sm font-semibold text-gray-900 dark:text-white mb-3"}," Supported Editors ",-1)),w(Yi,{modelValue:N.value.scaffold.positron,"onUpdate:modelValue":y[14]||(y[14]=L=>N.value.scaffold.positron=L),id:"support-positron-edit",description:"Enable Positron-specific workspace and settings files"},{default:ee(()=>[...y[65]||(y[65]=[de(" Positron ",-1)])]),_:1},8,["modelValue"]),y[67]||(y[67]=f("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-3"}," RStudio supported by default ",-1))]),w(ts,{modelValue:N.value.scaffold.notebook_format,"onUpdate:modelValue":y[15]||(y[15]=L=>N.value.scaffold.notebook_format=L),label:"Default Notebook Format",hint:"Format used when creating new notebooks"},{default:ee(()=>[...y[68]||(y[68]=[f("option",{value:"quarto"},"Quarto (.qmd)",-1),f("option",{value:"rmarkdown"},"R Markdown (.Rmd)",-1)])]),_:1},8,["modelValue"]),N.value.author?(v(),b("div",zj,[w(Lf,{modelValue:N.value.author,"onUpdate:modelValue":y[16]||(y[16]=L=>N.value.author=L)},null,8,["modelValue"])])):G("",!0),f("div",Uj,[y[69]||(y[69]=f("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-2"}," Quarto Configuration ",-1)),y[70]||(y[70]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," _quarto.yml files control rendering settings for notebooks and documents. ",-1)),w(ks,{type:"warning",description:"This will overwrite all _quarto.yml files in your project. Existing files will be backed up to .quarto_backups/ before regeneration.",class:"mb-4"}),w(Ge,{variant:"secondary",size:"sm",onClick:s1,disabled:ue.value},{default:ee(()=>[de(Q(ue.value?"Regenerating...":"Regenerate Quarto Configs"),1)]),_:1},8,["disabled"])])])):G("",!0)])]))],512),[[et,l.value==="basics"]]),Je(f("div",Hj,[P.value?(v(),b("div",Wj,[...y[73]||(y[73]=[f("div",{class:"text-center py-12 text-zinc-500 dark:text-zinc-400"}," Loading settings... ",-1)])])):S.value?(v(),b("div",qj,[w(ks,{type:"error",title:"Error Loading Settings",description:S.value},null,8,["description"])])):I.value?(v(),b("div",Kj,[y[76]||(y[76]=f("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Project Structure",-1)),f("p",Gj,[y[74]||(y[74]=de(" This project uses the ",-1)),f("strong",null,Q(pe.value),1),y[75]||(y[75]=de(" structure. ",-1))]),w(ks,{type:"info",title:"Append-Only Mode",description:"You can enable disabled directories and add new custom directories. Directories that are already enabled cannot be turned off to prevent accidental data loss.",class:"mb-6"}),w(zf,{"project-type":n.value.type,directories:N.value.directories||{},"render-dirs":N.value.render_dirs||{},enabled:N.value.enabled||me.value,"extra-directories":N.value.extra_directories||[],settings:N.value,gitignore:N.value.gitignore||"",catalog:U.value?.project_types?.[n.value.type]||{},"new-extra-ids":j.value,"allow-destruction":!1,"onUpdate:directories":y[17]||(y[17]=L=>N.value.directories=L),"onUpdate:renderDirs":y[18]||(y[18]=L=>N.value.render_dirs=L),"onUpdate:enabled":y[19]||(y[19]=L=>N.value.enabled=L),"onUpdate:extraDirectories":y[20]||(y[20]=L=>N.value.extra_directories=L),"onUpdate:gitignore":y[21]||(y[21]=L=>N.value.gitignore=L),"onUpdate:newExtraIds":y[22]||(y[22]=L=>j.value=L)},null,8,["project-type","directories","render-dirs","enabled","extra-directories","settings","gitignore","catalog","new-extra-ids"])])):G("",!0)],512),[[et,l.value==="settings"]]),Je(f("div",Jj,[y[78]||(y[78]=f("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Rendered Notebooks",-1)),y[79]||(y[79]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Browse and access your rendered Quarto/RMarkdown notebooks. ",-1)),f("div",Yj,[w(dt(ya),{class:"h-12 w-12 mx-auto mb-4 text-gray-400"}),y[77]||(y[77]=f("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Notebook browser coming soon... ",-1))])],512),[[et,l.value==="notebooks"]]),Je(f("div",Qj,[f("div",Xj,[y[81]||(y[81]=f("div",null,[f("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white"},"Data Catalog"),f("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Browse your project's data sources with copy commands. ")],-1)),w(Ge,{variant:"primary",size:"sm",class:"inline-flex items-center gap-2",onClick:Bb},{default:ee(()=>[w(dt(Kw),{class:"h-4 w-4"}),y[80]||(y[80]=de(" Add Data Source ",-1))]),_:1})]),f("div",Zj,[w(Ce,{modelValue:u.value,"onUpdate:modelValue":y[23]||(y[23]=L=>u.value=L),label:"Search data sources",placeholder:"Filter by name, prefix, or file path"},null,8,["modelValue"])]),$r.value.length>0?(v(),b("div",eP,[(v(!0),b(ve,null,Le($r.value,L=>(v(),Ae(mj,{key:L.fullKey,node:L,"expanded-keys":d.value,"auto-expanded-keys":cl.value,"toggle-group":Wb,"search-term":u.value,hierarchical:Br.value,"pending-deletes":x.value,onEdit:Vb,onDelete:Ub},null,8,["node","expanded-keys","auto-expanded-keys","search-term","hierarchical","pending-deletes"]))),128))])):G("",!0),Ks.value?(v(),b("div",tP,[f("div",sP,[f("div",null,[f("p",iP,Q(us.value)+" data source"+Q(us.value===1?"":"s")+" marked for deletion. ",1),y[82]||(y[82]=f("p",{class:"text-xs text-red-600 dark:text-red-200/80"}," Changes will be applied when you save. ",-1))]),f("div",nP,[w(Ge,{variant:"secondary",size:"sm",class:"shadow-none",disabled:V.value,onClick:Hb},{default:ee(()=>[...y[83]||(y[83]=[de(" Cancel ",-1)])]),_:1},8,["disabled"]),w(Ge,{size:"sm",class:"bg-red-600 text-white hover:bg-red-500 focus-visible:outline-red-600 dark:bg-red-500 dark:hover:bg-red-400",disabled:V.value,onClick:zb},{default:ee(()=>[de(Q(V.value?"Saving":"Save Changes"),1)]),_:1},8,["disabled"])])]),f("ul",rP,[(v(!0),b(ve,null,Le(Si.value,L=>(v(),b("li",{key:L},Q(L),1))),128))])])):Rr.value?(v(),b("div",oP,[f("p",lP,' No data sources match "'+Q(u.value)+'". ',1),y[84]||(y[84]=f("p",{class:"mt-2 text-xs text-zinc-500 dark:text-zinc-400"}," Try adjusting your search terms or clearing the filter. ",-1))])):(v(),b(ve,{key:3},[!Ks.value&&(!c.value||Object.keys(c.value||{}).length===0)?(v(),Ae(Y6,{key:0,title:"No Data Sources",description:"This project doesn't have any data sources defined in its settings",icon:"database"})):G("",!0)],64))],512),[[et,l.value==="data"]]),w(kO,{mode:m.value?"create":"edit",modelValue:h.value,"onUpdate:modelValue":[y[24]||(y[24]=L=>h.value=L),Ib],entry:p.value,saving:g.value,error:k.value,onSave:Nb},null,8,["mode","modelValue","entry","saving","error"]),Je(f("div",aP,[y[85]||(y[85]=f("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Connections",-1)),y[86]||(y[86]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Database and storage connections for this project. ",-1)),w(Ff,{"database-connections":K.value,"onUpdate:databaseConnections":y[25]||(y[25]=L=>K.value=L),"s3-connections":J.value,"onUpdate:s3Connections":y[26]||(y[26]=L=>J.value=L),"default-database":ce.value,"onUpdate:defaultDatabase":y[27]||(y[27]=L=>ce.value=L),"default-storage-bucket":ye.value,"onUpdate:defaultStorageBucket":y[28]||(y[28]=L=>ye.value=L)},null,8,["database-connections","s3-connections","default-database","default-storage-bucket"])],512),[[et,l.value==="connections"]]),Je(f("div",uP,[We.value?(v(),b("div",cP,[...y[87]||(y[87]=[f("div",{class:"text-center py-12"},[f("div",{class:"text-sm text-gray-500 dark:text-gray-400"},"Loading packages...")],-1)])])):rt.value?(v(),b("div",dP,[w(ks,{type:"error",title:"Error Loading Packages",description:rt.value},null,8,["description"])])):(v(),b("div",fP,[y[88]||(y[88]=f("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Packages & Dependencies",-1)),y[89]||(y[89]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Configure package management and default packages for this project. ",-1)),w(Vf,{modelValue:je.value,"onUpdate:modelValue":y[29]||(y[29]=L=>je.value=L),"show-renv-toggle":!0,flush:!1},null,8,["modelValue"])]))],512),[[et,l.value==="packages"]]),Je(f("div",hP,[Ee.value?(v(),b("div",pP,[...y[90]||(y[90]=[f("div",{class:"text-center py-12 text-sm text-gray-500 dark:text-gray-400"},"Loading AI settings...",-1)])])):Ne.value?(v(),b("div",mP,[w(ks,{type:"error",title:"Error Loading AI Settings",description:Ne.value},null,8,["description"])])):(v(),b("div",gP,[y[91]||(y[91]=f("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"AI Assistants",-1)),y[92]||(y[92]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Framework maintains context files for selected assistants and keeps them in sync before commits. ",-1)),w(Bf,{modelValue:ke.value,"onUpdate:modelValue":y[30]||(y[30]=L=>ke.value=L),flush:!1,"show-editor":!0,"editor-height":"400px","editor-disabled":kt.value,"editor-loading":kt.value},{"editor-alert":ee(()=>[xt.value.exists?G("",!0):(v(),Ae(ks,{key:0,type:"info",title:"New canonical file",description:`Saving copies the current instructions into ${ke.value.canonical_file||"CLAUDE.md"}. The original file stays on disk; if AI sync hooks are enabled they mirror everything from the new canonical file.`,class:"mb-4"},null,8,["description"]))]),_:1},8,["modelValue","editor-disabled","editor-loading"])]))],512),[[et,l.value==="ai"]]),Je(f("div",vP,[B.value?(v(),b("div",yP,[...y[93]||(y[93]=[f("div",{class:"text-center py-12 text-sm text-gray-500 dark:text-gray-400"},"Loading git settings...",-1)])])):ae.value?(v(),b("div",bP,[w(ks,{type:"error",title:"Error Loading Git Settings",description:ae.value},null,8,["description"])])):(v(),b("div",kP,[y[95]||(y[95]=f("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Git & Hooks",-1)),y[96]||(y[96]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Configure repository initialization, commit identity, git hooks, and security scanning. ",-1)),w(If,{modelValue:Zf.value,"onUpdate:modelValue":y[31]||(y[31]=L=>Zf.value=L)},{note:ee(()=>[...y[94]||(y[94]=[de(" Project-specific .gitignore templates can be customized in Project Defaults. ",-1)])]),_:1},8,["modelValue"])]))],512),[[et,l.value==="git"]]),Je(f("div",xP,[P.value?(v(),b("div",wP,[...y[97]||(y[97]=[f("div",{class:"text-center py-12 text-zinc-500 dark:text-zinc-400"}," Loading settings... ",-1)])])):S.value?(v(),b("div",SP,[w(ks,{type:"error",title:"Error Loading Settings",description:S.value},null,8,["description"])])):(v(),b("div",CP,[y[98]||(y[98]=f("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Scaffold Behavior",-1)),y[99]||(y[99]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"},[de(" Automatic actions when "),f("code",{class:"px-1.5 py-0.5 bg-gray-200 dark:bg-gray-700 rounded text-xs"},"scaffold()"),de(" runs to initialize your project environment. ")],-1)),f("div",_P,[N.value.scaffold?(v(),Ae(Nf,{key:0,modelValue:N.value.scaffold,"onUpdate:modelValue":y[32]||(y[32]=L=>N.value.scaffold=L),flush:""},null,8,["modelValue"])):G("",!0)])]))],512),[[et,l.value==="scaffold"]]),Je(f("div",AP,[y[100]||(y[100]=f("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Environment Variables",-1)),y[101]||(y[101]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Manage environment variables for this project (.env file). ",-1)),w(Uf,{loading:D.value,error:O.value,groups:re.value,variables:ne.value,"onUpdate:variables":y[33]||(y[33]=L=>ne.value=L),"raw-content":Z.value,"onUpdate:rawContent":y[34]||(y[34]=L=>Z.value=L),"view-mode":_e.value,"onUpdate:viewMode":y[35]||(y[35]=L=>_e.value=L),"regroup-on-save":ge.value,"onUpdate:regroupOnSave":y[36]||(y[36]=L=>ge.value=L),onSave:xu},null,8,["loading","error","groups","variables","raw-content","view-mode","regroup-on-save"])],512),[[et,l.value==="env"]])])])):G("",!0),w(Ln,{modelValue:Ze.value,"onUpdate:modelValue":y[42]||(y[42]=L=>Ze.value=L),title:"Add Package",size:"md",variant:"left"},{actions:ee(()=>[w(Ge,{variant:"primary",onClick:Qb,disabled:!F.value.name.trim()},{default:ee(()=>[...y[107]||(y[107]=[de(" Add Package ",-1)])]),_:1},8,["disabled"]),w(Ge,{variant:"secondary",onClick:y[41]||(y[41]=L=>Ze.value=!1)},{default:ee(()=>[...y[108]||(y[108]=[de(" Cancel ",-1)])]),_:1})]),default:ee(()=>[f("div",MP,[f("div",null,[y[102]||(y[102]=f("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Search CRAN Packages ",-1)),Je(f("input",{"onUpdate:modelValue":y[37]||(y[37]=L=>C.value=L),onKeydown:Yb,type:"text",placeholder:"Type to search CRAN...",class:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 px-3 py-2 text-sm text-gray-900 dark:text-gray-100 font-mono focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500"},null,544),[[pr,C.value]])]),se.value.length>0?(v(),b("div",DP,[(v(!0),b(ve,null,Le(se.value,(L,Se)=>(v(),b("button",{key:L.name,onClick:$e=>Qf(L),onMouseenter:$e=>E.value=Se,class:be(["w-full px-3 py-2 text-left border-b border-gray-200 dark:border-gray-700 last:border-b-0 transition",E.value===Se?"bg-sky-50 dark:bg-sky-900/20":"hover:bg-gray-50 dark:hover:bg-gray-800"])},[f("div",TP,[f("div",OP,[f("div",jP,Q(L.name),1),L.title?(v(),b("div",PP,Q(L.title),1)):G("",!0),L.author?(v(),b("div",$P,Q(L.author),1)):G("",!0)]),f("div",RP," v"+Q(L.version),1)])],42,EP))),128))])):G("",!0),f("div",null,[y[103]||(y[103]=f("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Package Name ",-1)),Je(f("input",{"onUpdate:modelValue":y[38]||(y[38]=L=>F.value.name=L),type:"text",placeholder:"dplyr",class:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 px-3 py-2 text-sm text-gray-900 dark:text-gray-100 font-mono focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500"},null,512),[[pr,F.value.name]]),F.value.source==="github"?(v(),b("p",LP," GitHub: user/repo (e.g., tidyverse/dplyr) ")):G("",!0),F.value.source==="bioc"?(v(),b("p",VP," Bioconductor: name only (e.g., DESeq2) ")):G("",!0)]),f("div",null,[y[106]||(y[106]=f("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Source ",-1)),f("div",BP,[Je(f("select",{"onUpdate:modelValue":y[39]||(y[39]=L=>F.value.source=L),class:"w-full appearance-none rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 pl-3 pr-10 py-2 text-sm text-gray-900 dark:text-gray-100 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500"},[...y[104]||(y[104]=[f("option",{value:"cran"},"CRAN",-1),f("option",{value:"github"},"GitHub",-1),f("option",{value:"bioc"},"Bioconductor",-1)])],512),[[p0,F.value.source]]),y[105]||(y[105]=f("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},[f("svg",{class:"h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),f("p",IP,[F.value.source==="cran"?(v(),b(ve,{key:0},[de("CRAN: name only (e.g., dplyr)")],64)):F.value.source==="github"?(v(),b(ve,{key:1},[de("GitHub: user/repo (e.g., tidyverse/dplyr)")],64)):F.value.source==="bioc"?(v(),b(ve,{key:2},[de("Bioconductor: name only (e.g., DESeq2)")],64)):G("",!0)])]),f("div",null,[w(Ke,{modelValue:F.value.auto_attach,"onUpdate:modelValue":y[40]||(y[40]=L=>F.value.auto_attach=L),label:"Auto-attach on scaffold()"},null,8,["modelValue"])])])]),_:1},8,["modelValue"]),w(Ln,{modelValue:oe.value,"onUpdate:modelValue":y[46]||(y[46]=L=>oe.value=L),title:"Delete Project",size:"md"},{actions:ee(()=>[w(Ge,{variant:"secondary",onClick:Xb},{default:ee(()=>[...y[114]||(y[114]=[de(" Cancel ",-1)])]),_:1}),w(Ge,{variant:"primary",onClick:Zb,disabled:!Be.value,class:"bg-red-600 hover:bg-red-500 focus-visible:outline-red-600 dark:bg-red-500 dark:hover:bg-red-400"},{default:ee(()=>[de(Q(Y.value==="delete"?"Delete Project":"Remove from Framework"),1)]),_:1},8,["disabled"])]),default:ee(()=>[f("div",NP,[y[113]||(y[113]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Choose how you want to remove this project: ",-1)),f("label",{class:be(["block cursor-pointer rounded-lg border-2 p-4 transition",Y.value==="untrack"?"border-sky-500 bg-sky-50 dark:border-sky-600 dark:bg-sky-950/30":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"])},[f("div",FP,[Je(f("input",{type:"radio",id:"delete-untrack",value:"untrack","onUpdate:modelValue":y[43]||(y[43]=L=>Y.value=L),class:"mt-1"},null,512),[[_c,Y.value]]),y[109]||(y[109]=f("div",{class:"flex-1"},[f("div",{class:"font-medium text-gray-900 dark:text-white"}," Remove from Framework "),f("div",{class:"text-sm text-gray-600 dark:text-gray-400 mt-1"}," Stop tracking this project in Framework. Files remain on disk. ")],-1))])],2),f("label",{class:be(["block cursor-pointer rounded-lg border-2 p-4 transition",Y.value==="delete"?"border-red-500 bg-red-50 dark:border-red-700 dark:bg-red-950/30":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"])},[f("div",zP,[Je(f("input",{type:"radio",id:"delete-files",value:"delete","onUpdate:modelValue":y[44]||(y[44]=L=>Y.value=L),class:"mt-1"},null,512),[[_c,Y.value]]),y[110]||(y[110]=f("div",{class:"flex-1"},[f("div",{class:"font-medium text-red-700 dark:text-red-400"}," Delete Entire Project "),f("div",{class:"text-sm text-gray-600 dark:text-gray-400 mt-1"}," Permanently delete all files and folders. This cannot be undone. ")],-1))]),Y.value==="delete"?(v(),b("div",UP,[f("div",HP,[y[111]||(y[111]=de(" Type ",-1)),f("span",WP,Q(n.value?.name),1),y[112]||(y[112]=de(" to confirm: ",-1))]),w(Ce,{modelValue:W.value,"onUpdate:modelValue":y[45]||(y[45]=L=>W.value=L),placeholder:"Project name",class:"font-mono"},null,8,["modelValue"])])):G("",!0)],2)])]),_:1},8,["modelValue"])]))}},KP={class:"space-y-5"},GP={__name:"EditorAndNotebookPanel",props:{positron:{type:Boolean,default:!1},notebookFormat:{type:String,default:"quarto"}},emits:["update:positron","update:notebookFormat"],setup(s){return(e,t)=>(v(),b("div",KP,[f("div",null,[t[3]||(t[3]=f("label",{class:"block text-sm font-semibold text-gray-900 dark:text-white mb-3"}," Supported Editors ",-1)),w(Yi,{"model-value":s.positron,"onUpdate:modelValue":t[0]||(t[0]=i=>e.$emit("update:positron",i)),id:"support-positron",description:"Enable Positron-specific workspace and settings files"},{default:ee(()=>[...t[2]||(t[2]=[de(" Positron ",-1)])]),_:1},8,["model-value"]),t[4]||(t[4]=f("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-3"}," RStudio supported by default ",-1))]),w(ts,{"model-value":s.notebookFormat,"onUpdate:modelValue":t[1]||(t[1]=i=>e.$emit("update:notebookFormat",i)),label:"Default Notebook Format",hint:"Format used when creating new notebooks"},{default:ee(()=>[...t[5]||(t[5]=[f("option",{value:"quarto"},"Quarto (.qmd)",-1),f("option",{value:"rmarkdown"},"R Markdown (.Rmd)",-1)])]),_:1},8,["model-value"])]))}},JP={class:"space-y-6"},YP={class:"space-y-4"},QP={class:"space-y-4"},XP={__name:"QuartoSettingsPanel",props:{modelValue:{type:Object,required:!0},flush:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(s,{emit:e}){const t=s,i=e,n=z(()=>t.flush?"":"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"),r=ie({html:{format:"html",embed_resources:t.modelValue.html?.embed_resources??!0,theme:t.modelValue.html?.theme??"default",toc:t.modelValue.html?.toc??!0,toc_depth:t.modelValue.html?.toc_depth??3,code_fold:t.modelValue.html?.code_fold??!1,code_tools:t.modelValue.html?.code_tools??!1,highlight_style:t.modelValue.html?.highlight_style??"github"},revealjs:{format:"revealjs",theme:t.modelValue.revealjs?.theme??"default",incremental:t.modelValue.revealjs?.incremental??!1,slide_number:t.modelValue.revealjs?.slide_number??!0,transition:t.modelValue.revealjs?.transition??"slide",background_transition:t.modelValue.revealjs?.background_transition??"fade",controls:t.modelValue.revealjs?.controls??!0,progress:t.modelValue.revealjs?.progress??!0,center:t.modelValue.revealjs?.center??!0,highlight_style:t.modelValue.revealjs?.highlight_style??"github"}});Re(()=>t.modelValue,l=>{r.value={html:{format:"html",embed_resources:l.html?.embed_resources??!0,theme:l.html?.theme??"default",toc:l.html?.toc??!0,toc_depth:l.html?.toc_depth??3,code_fold:l.html?.code_fold??!1,code_tools:l.html?.code_tools??!1,highlight_style:l.html?.highlight_style??"github"},revealjs:{format:"revealjs",theme:l.revealjs?.theme??"default",incremental:l.revealjs?.incremental??!1,slide_number:l.revealjs?.slide_number??!0,transition:l.revealjs?.transition??"slide",background_transition:l.revealjs?.background_transition??"fade",controls:l.revealjs?.controls??!0,progress:l.revealjs?.progress??!0,center:l.revealjs?.center??!0,highlight_style:l.revealjs?.highlight_style??"github"}}},{deep:!0});const o=(l,a,c)=>{r.value[l][a]=c,i("update:modelValue",{...r.value})};return(l,a)=>(v(),b("div",JP,[f("div",{class:be(n.value)},[a[18]||(a[18]=f("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-2"}," HTML Rendering ",-1)),a[19]||(a[19]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Default settings for HTML documents (notebooks, documentation). ",-1)),f("div",YP,[w(ts,{"model-value":r.value.html.theme,"onUpdate:modelValue":a[0]||(a[0]=c=>o("html","theme",c)),label:"Theme"},{default:ee(()=>[...a[16]||(a[16]=[f("option",{value:"default"},"Default",-1),f("option",{value:"cosmo"},"Cosmo",-1),f("option",{value:"cerulean"},"Cerulean",-1),f("option",{value:"flatly"},"Flatly",-1),f("option",{value:"journal"},"Journal",-1),f("option",{value:"lumen"},"Lumen",-1),f("option",{value:"minty"},"Minty",-1),f("option",{value:"pulse"},"Pulse",-1),f("option",{value:"sandstone"},"Sandstone",-1),f("option",{value:"simplex"},"Simplex",-1),f("option",{value:"sketchy"},"Sketchy",-1),f("option",{value:"slate"},"Slate",-1),f("option",{value:"solar"},"Solar",-1),f("option",{value:"spacelab"},"Spacelab",-1),f("option",{value:"superhero"},"Superhero",-1),f("option",{value:"united"},"United",-1),f("option",{value:"yeti"},"Yeti",-1)])]),_:1},8,["model-value"]),w(Ke,{"model-value":r.value.html.embed_resources,"onUpdate:modelValue":a[1]||(a[1]=c=>o("html","embed_resources",c)),label:"Embed resources",description:"Produce standalone HTML files with all dependencies and resources embedded."},null,8,["model-value"]),w(Ke,{"model-value":r.value.html.toc,"onUpdate:modelValue":a[2]||(a[2]=c=>o("html","toc",c)),label:"Table of contents",description:"Generate a table of contents sidebar."},null,8,["model-value"]),w(Ce,{type:"number","model-value":r.value.html.toc_depth,"onUpdate:modelValue":a[3]||(a[3]=c=>o("html","toc_depth",parseInt(c)||3)),label:"TOC depth",min:"1",max:"6"},null,8,["model-value"]),w(Ke,{"model-value":r.value.html.code_fold,"onUpdate:modelValue":a[4]||(a[4]=c=>o("html","code_fold",c)),label:"Code folding",description:"Allow readers to collapse/expand code blocks."},null,8,["model-value"]),w(Ke,{"model-value":r.value.html.code_tools,"onUpdate:modelValue":a[5]||(a[5]=c=>o("html","code_tools",c)),label:"Code tools",description:"Provide code download and viewing options."},null,8,["model-value"]),w(ts,{"model-value":r.value.html.highlight_style,"onUpdate:modelValue":a[6]||(a[6]=c=>o("html","highlight_style",c)),label:"Syntax highlighting"},{default:ee(()=>[...a[17]||(a[17]=[f("option",{value:"github"},"GitHub",-1),f("option",{value:"tango"},"Tango",-1),f("option",{value:"pygments"},"Pygments",-1),f("option",{value:"kate"},"Kate",-1),f("option",{value:"monochrome"},"Monochrome",-1),f("option",{value:"espresso"},"Espresso",-1),f("option",{value:"zenburn"},"Zenburn",-1),f("option",{value:"haddock"},"Haddock",-1),f("option",{value:"breezedark"},"Breeze Dark",-1)])]),_:1},8,["model-value"])])],2),f("div",{class:be(n.value)},[a[24]||(a[24]=f("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-2"}," Presentations (revealjs) ",-1)),a[25]||(a[25]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Default settings for slide presentations. ",-1)),f("div",QP,[w(ts,{"model-value":r.value.revealjs.theme,"onUpdate:modelValue":a[7]||(a[7]=c=>o("revealjs","theme",c)),label:"Theme"},{default:ee(()=>[...a[20]||(a[20]=[f("option",{value:"default"},"Default",-1),f("option",{value:"beige"},"Beige",-1),f("option",{value:"black"},"Black",-1),f("option",{value:"blood"},"Blood",-1),f("option",{value:"league"},"League",-1),f("option",{value:"moon"},"Moon",-1),f("option",{value:"night"},"Night",-1),f("option",{value:"serif"},"Serif",-1),f("option",{value:"simple"},"Simple",-1),f("option",{value:"sky"},"Sky",-1),f("option",{value:"solarized"},"Solarized",-1),f("option",{value:"white"},"White",-1)])]),_:1},8,["model-value"]),w(Ke,{"model-value":r.value.revealjs.incremental,"onUpdate:modelValue":a[8]||(a[8]=c=>o("revealjs","incremental",c)),label:"Incremental bullets",description:"Reveal list items one at a time."},null,8,["model-value"]),w(Ke,{"model-value":r.value.revealjs.slide_number,"onUpdate:modelValue":a[9]||(a[9]=c=>o("revealjs","slide_number",c)),label:"Slide numbers",description:"Show slide numbers in the corner."},null,8,["model-value"]),w(Ke,{"model-value":r.value.revealjs.controls,"onUpdate:modelValue":a[10]||(a[10]=c=>o("revealjs","controls",c)),label:"Navigation controls",description:"Show arrow controls for navigation."},null,8,["model-value"]),w(Ke,{"model-value":r.value.revealjs.progress,"onUpdate:modelValue":a[11]||(a[11]=c=>o("revealjs","progress",c)),label:"Progress bar",description:"Show progress bar at the bottom."},null,8,["model-value"]),w(Ke,{"model-value":r.value.revealjs.center,"onUpdate:modelValue":a[12]||(a[12]=c=>o("revealjs","center",c)),label:"Center slides",description:"Vertically center slide content."},null,8,["model-value"]),w(ts,{"model-value":r.value.revealjs.transition,"onUpdate:modelValue":a[13]||(a[13]=c=>o("revealjs","transition",c)),label:"Slide transition"},{default:ee(()=>[...a[21]||(a[21]=[f("option",{value:"none"},"None",-1),f("option",{value:"fade"},"Fade",-1),f("option",{value:"slide"},"Slide",-1),f("option",{value:"convex"},"Convex",-1),f("option",{value:"concave"},"Concave",-1),f("option",{value:"zoom"},"Zoom",-1)])]),_:1},8,["model-value"]),w(ts,{"model-value":r.value.revealjs.background_transition,"onUpdate:modelValue":a[14]||(a[14]=c=>o("revealjs","background_transition",c)),label:"Background transition"},{default:ee(()=>[...a[22]||(a[22]=[f("option",{value:"none"},"None",-1),f("option",{value:"fade"},"Fade",-1),f("option",{value:"slide"},"Slide",-1),f("option",{value:"convex"},"Convex",-1),f("option",{value:"concave"},"Concave",-1),f("option",{value:"zoom"},"Zoom",-1)])]),_:1},8,["model-value"]),w(ts,{"model-value":r.value.revealjs.highlight_style,"onUpdate:modelValue":a[15]||(a[15]=c=>o("revealjs","highlight_style",c)),label:"Syntax highlighting"},{default:ee(()=>[...a[23]||(a[23]=[f("option",{value:"github"},"GitHub",-1),f("option",{value:"tango"},"Tango",-1),f("option",{value:"pygments"},"Pygments",-1),f("option",{value:"kate"},"Kate",-1),f("option",{value:"monochrome"},"Monochrome",-1),f("option",{value:"espresso"},"Espresso",-1),f("option",{value:"zenburn"},"Zenburn",-1),f("option",{value:"haddock"},"Haddock",-1),f("option",{value:"breezedark"},"Breeze Dark",-1)])]),_:1},8,["model-value"])])],2)]))}},Rb=`# Framework environment defaults
# Populate these values before running scaffold() or publishing.

# PostgreSQL connection
POSTGRES_HOST=127.0.0.1
POSTGRES_PORT=5432
POSTGRES_DB=postgres
POSTGRES_SCHEMA=public
POSTGRES_USER=postgres
POSTGRES_PASSWORD=

# S3-compatible storage (AWS S3, MinIO, etc.)
S3_ACCESS_KEY=
S3_SECRET_KEY=
S3_BUCKET=
S3_REGION=us-east-1
S3_ENDPOINT=`,ZP=(s="")=>{const e={};return s.split(/\r?\n/).forEach(t=>{const i=t.trim();if(!i||i.startsWith("#")||!i.includes("="))return;const[n,...r]=i.split("=");e[n.trim()]=r.join("=").replace(/^"|"$/g,"")}),e},e$=(s={})=>Object.entries(s).map(([e,t])=>`${e}=${t??""}`).join(`
`),Lb=(s={})=>{const e=Object.entries(s);return e.length?e.reduce((t,[i,n])=>{const r=i.includes("_")?i.split("_")[0]:"Other";return t[r]||(t[r]={}),t[r][i]={defined:!!n,used:!1,used_in:[],value:n},t},{}):{}},t$=(s,e=Rb)=>{let t=e;typeof s=="string"?t=s:s?.raw?t=s.raw:s?.variables&&(t=e$(s.variables));const i=ZP(t),n=Lb(i);return{rawContent:t,variables:i,groups:n,viewMode:"grouped"}},s$=([s])=>s!=="framework_db",i$=(s={})=>{const e=s.databases||{},t=s.storage_buckets||{},i=Object.entries(e).filter(s$).map(([r,o])=>({_id:r,name:r,...o})),n=Object.entries(t).map(([r,o])=>({_id:r,name:r,...o}));return{databaseConnections:i,s3Connections:n,defaultDatabase:s.default_database||null,defaultStorageBucket:s.default_storage_bucket||null}},n$=({databaseConnections:s=[],s3Connections:e=[],defaultDatabase:t=null,defaultStorageBucket:i=null})=>{const n={};s.forEach(o=>{const{_id:l,name:a,...c}=o||{};a&&(n[a]=c)});const r={};return e.forEach(o=>{const{_id:l,name:a,...c}=o||{};a&&(r[a]=c)}),{default_database:t,default_storage_bucket:i,databases:n,storage_buckets:r}},r$={class:"flex min-h-screen"},o$={class:"w-64 shrink-0 border-r border-gray-200 p-6 dark:border-gray-800"},l$={class:"space-y-1"},a$=["href","onClick"],u$=["fill","viewBox","stroke"],c$=["stroke-linecap","stroke-linejoin","stroke-width","fill","d"],d$={key:1,class:"ml-4 mt-2 space-y-0.5 border-l border-gray-200 pl-3 dark:border-gray-700"},f$=["href","onClick"],h$={key:2,class:"ml-4 mt-2 space-y-0.5 border-l border-gray-200 pl-3 dark:border-gray-700"},p$=["href","onClick"],m$={class:"rounded-md bg-gray-900 p-4 text-xs text-gray-200"},g$={class:"mt-4 flex justify-end"},v$={class:"mt-6 px-3"},y$={key:0,class:"flex-1 flex items-center justify-center"},b$={class:"flex-1 p-10 pb-24"},k$={class:"mt-8 space-y-10"},x$={id:"overview"},w$={id:"connections-defaults"},S$={id:"env-defaults"},C$={class:"mt-6 flex justify-end"},_$={id:"basics"},A$={class:"space-y-5"},M$={class:"pt-4 border-t border-gray-200 dark:border-gray-700"},D$={id:"structure",class:"space-y-8"},E$={key:0,class:"space-y-6"},T$={class:"space-y-3"},O$=["onClick"],j$={class:"flex items-start gap-3"},P$={class:"font-semibold text-gray-900 dark:text-white"},$$={class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},R$={key:1},L$={id:"git"},V$={id:"scaffold"},B$={id:"packages"},I$={id:"quarto"},N$={id:"ai"},F$={class:"mt-4 flex justify-end"},z$={id:"templates"},U$={class:"flex flex-wrap gap-2 mb-6"},H$=["onClick"],W$={class:"flex flex-col gap-4"},q$={class:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"},K$={class:"space-y-1"},G$={class:"text-base font-semibold text-gray-900 dark:text-white"},J$={class:"text-sm text-gray-600 dark:text-gray-400"},Y$={class:"text-sm text-gray-600 dark:text-gray-300"},Q$={class:"flex gap-3 justify-end"},dc="overview",Jm="project",X$="Settings",Z$="Manage defaults shared across new projects.",eR={__name:"SettingsView",setup(s){const e=ru(),t=su(),i=Dr(),n=[{id:"overview",label:"Overview",slug:"overview",icon:iu},{id:"basics",label:"Basics",slug:"basics",icon:Kd},{id:"structure",label:"Project Structure",slug:"project-structure",icon:ba},{id:"packages",label:"Packages",slug:"packages-dependencies",icon:Gd},{id:"quarto",label:"Quarto",slug:"quarto",icon:ya},{id:"git",label:"Git & Hooks",slug:"git-hooks",svgIcon:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"},{id:"ai",label:"AI Assistants",slug:"ai-assistants",svgIcon:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"},{id:"scaffold",label:"Scaffold Behavior",slug:"scaffold-behavior",svgIcon:"M256 64L576 64L576 576L64 576L64 192L256 192L256 64zM256 224L96 224L96 544L256 544L256 224zM288 544L544 544L544 96L288 96L288 544zM440 152L488 152L488 200L440 200L440 152zM392 152L392 200L344 200L344 152L392 152zM440 248L488 248L488 296L440 296L440 248zM392 248L392 296L344 296L344 248L392 248zM152 280L200 280L200 328L152 328L152 280zM392 344L392 392L344 392L344 344L392 344zM152 376L200 376L200 424L152 424L152 376zM488 344L488 392L440 392L440 344L488 344z",svgViewBox:"0 0 640 640",svgFill:"currentColor",svgStroke:"none",svgStrokeWidth:0,svgPathFill:"currentColor"},{id:"templates",label:"Templates",slug:"templates",icon:ya},{id:"connections-defaults",label:"Connections",slug:"connections",icon:Jd},{id:"env-defaults",label:".env Defaults",slug:"env",icon:nu}],r=Object.fromEntries(n.map(({id:T,slug:A})=>[T,A])),o=Object.fromEntries(n.map(({id:T,slug:A})=>[A,T])),l={project:{label:"Standard Project Structure",description:"General-purpose analysis project with notebooks, scripts, and shared outputs.",directories:{functions:"R/functions",notebooks:"notebooks",scripts:"scripts",inputs_raw:"inputs/raw",inputs_intermediate:"inputs/intermediate",inputs_final:"inputs/final",docs:"docs",outputs_tables:"outputs/tables",outputs_figures:"outputs/figures",outputs_models:"outputs/models",outputs_reports:"outputs/reports",cache:"outputs/cache",scratch:"scratch"},render_dirs:{notebooks:"outputs/notebooks",docs:"outputs/docs"},quarto:{render_dir:"outputs/notebooks"},notebook_template:"notebook",extra_directories:[]},project_sensitive:{label:"Privacy Sensitive Project Structure",description:"Projects handling PHI/PII with dedicated private/public data flows.",directories:{functions:"R/functions",notebooks:"notebooks",scripts:"scripts",inputs_private_raw:"inputs/private/raw",inputs_private_intermediate:"inputs/private/intermediate",inputs_private_final:"inputs/private/final",inputs_public_raw:"inputs/public/raw",inputs_public_intermediate:"inputs/public/intermediate",inputs_public_final:"inputs/public/final",outputs_private_tables:"outputs/private/tables",outputs_private_figures:"outputs/private/figures",outputs_private_models:"outputs/private/models",outputs_private_docs:"outputs/private/docs",outputs_private_data_final:"outputs/private/data_final",outputs_public_tables:"outputs/public/tables",outputs_public_figures:"outputs/public/figures",outputs_public_models:"outputs/public/models",outputs_public_docs:"outputs/public/docs",outputs_public_data_final:"outputs/public/data_final",cache:"outputs/private/cache",scratch:"scratch"},quarto:{render_dir:"outputs/public/docs"},notebook_template:"notebook",extra_directories:[]},presentation:{label:"Presentation Structure",description:"Single talk or slide deck with minimal analysis scaffolding.",directories:{presentation_source:"presentation.qmd",rendered_slides:"."},quarto:{render_dir:"."},notebook_template:"notebook",extra_directories:[]},course:{label:"Course Structure",description:"Courses with modules, assignments, and lecture materials.",directories:{data:"data",slides:"slides",assignments:"assignments",course_docs:"course_docs",readings:"readings",notebooks:"modules"},quarto:{render_dir:"course_docs"},notebook_template:"notebook",extra_directories:[]}},a=ie(JSON.parse(JSON.stringify(l))),c={project:"project",project_sensitive:"sensitive-project",presentation:"presentation",course:"course"},u=Object.fromEntries(Object.entries(c).map(([T,A])=>[A,T])),d={project:"Tune the standard analysis layoutfunctions, notebooks, inputs, and outputs live here by default.",project_sensitive:"Private and public inputs stay separate so sensitive data never leaves restricted folders.",presentation:"Control where your presentation source lives and where rendered slides are written.",course:"Adjust the folders used for slides, assignments, readings, and course documentation."},h=T=>String(T).replace(/_/g," ").replace(/\b\w/g,A=>A.toUpperCase()),p=ie(null),g=[{key:"notebooks",label:"Notebooks",hint:"Quarto or R Markdown notebooks for analysis.",defaultRenderDir:"outputs/notebooks"},{key:"docs",label:"Documentation",hint:"Codebooks, documentation, and other reference materials.",defaultRenderDir:"outputs/docs"}],k=[{key:"functions",label:"Functions",hint:"R files here are sourced by scaffold(), so helper functions are available in every project session."},{key:"scripts",label:"Scripts",hint:"Reusable R scripts, job runners, or automation tasks."}],m=[...g,...k],x=[{key:"inputs_raw",label:"Raw data",hint:"Read-only exports from source systems."},{key:"inputs_intermediate",label:"Intermediate data",hint:"Data after light cleaning or pre-processing steps."},{key:"inputs_final",label:"Analysis-ready data",hint:"Final inputs ready for modeling or reporting."}],V=[{key:"outputs_tables",label:"Tables",hint:"Publishable tables ready for reports or manuscripts."},{key:"outputs_figures",label:"Figures",hint:"Final plots and graphics."},{key:"outputs_models",label:"Models",hint:"Serialized models or model summaries."},{key:"outputs_reports",label:"Reports",hint:"Final reports and deliverables ready for publication."}],I=[{key:"cache",label:"Cache",hint:"Temporary artifacts (gitignored)."},{key:"scratch",label:"Scratch",hint:"Short-lived explorations (gitignored)."}],U=[{privateKey:"inputs_private_raw",publicKey:"inputs_public_raw",label:"Raw data",privateLabel:"Raw data (private)",publicLabel:"Raw data (public)"},{privateKey:"inputs_private_intermediate",publicKey:"inputs_public_intermediate",label:"Intermediate data",privateLabel:"Intermediate data (private)",publicLabel:"Intermediate data (public)"},{privateKey:"inputs_private_final",publicKey:"inputs_public_final",label:"Analysis-ready data",privateLabel:"Analysis-ready data (private)",publicLabel:"Analysis-ready data (public)"}],N=[{privateKey:"outputs_private_tables",publicKey:"outputs_public_tables",label:"Tables",privateLabel:"Tables (private)",publicLabel:"Tables (public)"},{privateKey:"outputs_private_figures",publicKey:"outputs_public_figures",label:"Figures",privateLabel:"Figures (private)",publicLabel:"Figures (public)"},{privateKey:"outputs_private_models",publicKey:"outputs_public_models",label:"Models",privateLabel:"Models (private)",publicLabel:"Models (public)"},{privateKey:"outputs_private_reports",publicKey:"outputs_public_reports",label:"Reports",privateLabel:"Reports (private)",publicLabel:"Reports (public)"}],P=(T,A)=>p.value?.project_types?.[T]?.directories?.[A]||{},S=(T,A)=>A.map(q=>{const pe=P(T,q.key);return{key:q.key,label:pe.label||q.label,hint:pe.hint||q.hint||""}});z(()=>S("project",m)),z(()=>S("project",g).map(T=>({...T,defaultRenderDir:g.find(A=>A.key===T.key)?.defaultRenderDir||""}))),z(()=>S("project",k)),z(()=>S("project",x)),z(()=>S("project",V)),z(()=>S("project",I));const j=T=>T.map(A=>{const q=P("project_sensitive",A.privateKey),pe=P("project_sensitive",A.publicKey);return{...A,privateLabel:q.label||A.privateLabel,publicLabel:pe.label||A.publicLabel}});z(()=>j(U)),z(()=>j(N)),z(()=>{const T=he.value;return!T||!p.value?.project_types?.[T]?.settings?[]:p.value.project_types[T].settings});const H={include_inputs:"data",include_scripts:"scripts",include_functions:"functions"},ue=z(()=>{const T=p.value?.project_types?.presentation?.optional_toggles||{};return{inputs:T.include_inputs?.default_path||H.include_inputs,scripts:T.include_scripts?.default_path||H.include_scripts,functions:T.include_functions?.default_path||H.include_functions}}),X={"CLAUDE.md":"ai_claude","AGENTS.md":"ai_agents",".github/copilot-instructions.md":"ai_copilot"},B=ie(dc),ae=ie(!1),te=ie(new Set),$=ie({projects_root:"",project_types:JSON.parse(JSON.stringify(a.value)),author:{name:"",email:"",affiliation:""},defaults:{project_type:"project",notebook_format:"quarto",ide:"vscode",positron:!1,use_git:!0,use_renv:!1,seed:"",seed_on_scaffold:!1,ai_support:!0,ai_assistants:["claude"],ai_canonical_file:"CLAUDE.md",scaffold:{source_all_functions:!0,set_theme_on_scaffold:!0,ggplot_theme:"theme_minimal",seed_on_scaffold:!1,seed:""},directories:JSON.parse(JSON.stringify(a.value.project.directories)),git_hooks:{ai_sync:!1,data_security:!1,check_sensitive_dirs:!1},packages:{use_renv:!1,default_packages:[{name:"dplyr",source:"cran",auto_attach:!0},{name:"ggplot2",source:"cran",auto_attach:!0}]},quarto:{html:{format:"html",embed_resources:!0,theme:"default",toc:!0,toc_depth:3,code_fold:!1,code_tools:!1,highlight_style:"github"},revealjs:{format:"revealjs",theme:"default",incremental:!1,slide_number:!0,transition:"slide",background_transition:"fade",controls:!0,progress:!0,center:!0,highlight_style:"github"}},env:{raw:""}},git:{user_name:"",user_email:""},privacy:{secret_scan:!1,gitignore_template:"gitignore"}}),K=Gs({includeInputs:!1,includeScripts:!1,includeFunctions:!1}),J=Gs({project:{},project_sensitive:{},course:{},presentation:{}}),ce=T=>(J[T]||(J[T]={}),J[T]),ye=ie(!1),Pe=Gs({claude:!0,agents:!1,copilot:!1}),Ve=ie(""),je=ie({}),We=ie("grouped"),rt=ie(!1),ot=ie({}),Ze=ie(!1),oe=z(()=>Object.keys(je.value||{}).length),Y=z({get(){return Fa($.value.defaults.packages)},set(T){$.value.defaults.packages=T||{use_renv:!1,default_packages:[]}}}),W=T=>p.value?.project_types?.[T]?.label||T,C=z(()=>{const T=$.value.projects_root||"",A=$.value.author?.name||"",q=$.value.defaults?.project_type||"project",pe=W(q),me=$.value.defaults?.notebook_format||"quarto",Be=$.value.ai_config?.enabled||!1,we=$.value.ai_config?.provider||"",Qe=$.value.ai_config?.canonical_file||"",Ds=$.value.git?.auto_init||!1,Ot=Y.value?.default_packages?.length||0,fl=oe.value;return[{id:"basics",title:"Basics",section:"basics",content:`${T}  ${A}`},{id:"structure",title:"Project Structure",section:"structure",content:pe},{id:"notebooks",title:"Notebooks & Scripts",section:"scaffold",content:me},{id:"packages",title:"Packages",section:"packages",content:Ot===0?"No default packages":`${Ot} packages`},{id:"env",title:".env Defaults",section:"env-defaults",content:`${fl} variables`},{id:"ai",title:"AI Assistants",section:"ai",content:Be?`<span class="text-green-600 dark:text-green-400">${we}  ${Qe}</span>`:'<span class="text-gray-600 dark:text-gray-400">Disabled</span>'},{id:"git",title:"Git & Hooks",section:"git",content:Ds?"Auto-initialize repositories":"Manual initialization"}]}),se=ie([]),_=ie([]),E=ie(null),F=ie(null),ne=Gs({open:!1,projectTypeKey:null,projectTypeName:""}),re=Gs({notebook:{loading:!1,contents:""},script:{loading:!1,contents:""},presentation:{loading:!1,contents:""},canonical:{loading:!1,contents:""},gitignore_project:{loading:!1,contents:""},gitignore_project_sensitive:{loading:!1,contents:""},gitignore_course:{loading:!1,contents:""},gitignore_presentation:{loading:!1,contents:""}}),Z=z(()=>[{key:"notebook",label:"Notebook",description:"Starter Quarto notebook used when creating notebooks.",editorKey:"notebook",apiName:"notebook",language:"markdown"},{key:"script",label:"Script",description:"Starter R script used for new scripts.",editorKey:"script",apiName:"script",language:"r"},{key:"presentation",label:"Presentation",description:"Starter presentation content for revealjs slides.",editorKey:"presentation",apiName:"presentation",language:"markdown"},{key:"canonical",label:"Canonical AI File",description:"Source of truth mirrored to other assistant files when hooks run.",editorKey:"canonical",apiName:It.value,language:"markdown"}]),D=ie(i.params.subsection||"notebook"),O=z(()=>Z.value.find(T=>T.key===D.value)||Z.value[0]),R=async T=>{D.value=T||"notebook",await pt("templates",D.value)},le=async T=>{T&&typeof T.preventDefault=="function"&&T.preventDefault();const A=O.value;if(!A||!window.confirm("Reset this template to the default packaged version?"))return;const pe=A.editorKey,me=A.apiName;await Pr(me,pe)},_e=z({get(){const T=$.value.defaults||{};return{enabled:T.ai_support!==!1,canonical_file:T.ai_canonical_file||"CLAUDE.md",assistants:Array.isArray(T.ai_assistants)?[...T.ai_assistants]:[],canonical_content:re.canonical?.contents||""}},set(T){if(!T)return;const A=$.value.defaults||{};A.ai_support=T.enabled,A.ai_canonical_file=T.canonical_file,A.ai_assistants=Array.isArray(T.assistants)?[...T.assistants]:[],T.canonical_content!==void 0&&re.canonical&&(re.canonical.contents=T.canonical_content),$.value.defaults={...A}}}),ge=z(()=>Object.entries($.value.project_types||{})),ke=z(()=>ge.value.map(([T,A])=>({key:T,label:(A.label||h(T)).replace(/ Structure$/i,""),slug:c[T]||T}))),Ee=[{id:"templates-notebook",label:"Notebook",slug:"notebook"},{id:"templates-script",label:"Script",slug:"script"},{id:"templates-presentation",label:"Presentation",slug:"presentation"},{id:"templates-canonical",label:"Canonical AI File",slug:"canonical"}],Ne=z(()=>"# Connections section temporarily disabled for debugging"),he=z(()=>{const T=i.params.subsection;return T?u[T]||Jm:null}),Ue=z(()=>{const T=he.value;return T&&$.value.project_types?.[T]||null}),kt={overview:{title:"Overview",description:"Overview of your Framework global settings and preferences."},"connections-defaults":{title:"Connections",description:"Database and storage connections that every new project will inherit."},basics:{title:"Basics",description:"Essential settings for new projects."},author:{title:"Author Information",description:"Defaults that populate README files and notebook headers when scaffold() runs."},workflow:{title:"Editor & Workflow",description:"Control how Framework scaffolds projects in your preferred tools."},structure:{title:"Project Structure Defaults",description:"Choose a project type to configure its directory structure and default settings."},templates:{title:"Templates",description:"Edit the starter templates Framework uses for notebooks, scripts, and presentations."},ai:{title:"AI Assistants",description:"Manage assistant support, canonical context files, and sync hooks."},git:{title:"Git & Hooks",description:"Configure repository initialization, commit identity, git hooks, and security scanning."},scaffold:{title:"Scaffold Behavior",description:"Automatic actions Framework performs when scaffold() runs."},packages:{title:"Packages & Dependencies",description:"Define dependency defaults and auto-attach behavior for new projects."},"env-defaults":{title:".env Defaults",description:"Template applied to every new project so core connections work immediately."}},xt=z(()=>kt[B.value]||{title:X$,description:Z$}),Rt=z(()=>B.value==="structure"&&Ue.value?Ue.value.label||h(he.value):xt.value.title),Tt=z(()=>B.value==="structure"&&Ue.value&&(Ue.value.description||d[he.value])||xt.value.description);z(()=>$.value.privacy.gitignore_template||"gitignore"),z(()=>{const T=new Set,A=$.value.project_types||{},q=A.project_sensitive?.directories||{};for(const me of Object.values(q))typeof me=="string"&&me.trim()&&me.includes("private")&&T.add(me.replace(/^\/+/,""));const pe=A.project?.directories||{};return["cache","scratch"].forEach(me=>{const Be=pe[me];typeof Be=="string"&&Be.trim()&&T.add(Be.replace(/^\/+/,""))}),Array.from(T).sort()});const It=z(()=>X[$.value.defaults.ai_canonical_file]||"ai_claude"),ni=(T,A)=>{const q={section:T||void 0};return A&&(q.subsection=A),t.resolve({name:"settings",params:q}).href},pt=(T,A)=>{const q={};T&&(q.section=T),A&&(q.subsection=A);const pe=i.params.section||void 0,me=i.params.subsection||void 0,Be=q.section||void 0,we=q.subsection||void 0;return pe===Be&&me===we?Promise.resolve():t.replace({name:"settings",params:q}).catch(()=>{})};Re(()=>i.params.section,T=>{if(!T){pt(r[dc],void 0);return}const A=o[T]||dc;if(B.value=A,!o[T]){pt(r[A],void 0);return}},{immediate:!0});const ze=(T,A="")=>Array.isArray(T)?T.length>0?ze(T[0],A):A:T??A,yt=(T,A=!1)=>{const q=ze(T,A);return typeof q=="boolean"?q:typeof q=="string"?["true","1","yes"].includes(q.toLowerCase()):!!q},wi=T=>Array.isArray(T)?T.flatMap(A=>Array.isArray(A)?A:[A]).filter(Boolean):[],il=(T={},A={})=>{const q={...A};for(const[pe,me]of Object.entries(T||{})){const Be=ze(me,null);Be===null||Be===""?delete q[pe]:q[pe]=Be}return q},Ms=(T,A)=>{const q=a.value[T]||{render_dirs:{},quarto:{},extra_directories:[]};return{label:ze(A?.label,q.label||h(T)),description:ze(A?.description,q.description||""),ggplot_theme:ze(A?.ggplot_theme,"theme_minimal"),set_theme_on_scaffold:yt(A?.set_theme_on_scaffold,!0),directories:il(A?.directories,{}),render_dirs:il(A?.render_dirs,q.render_dirs||{}),quarto:{render_dir:ze(A?.quarto?.render_dir,q.quarto?.render_dir||".")},notebook_template:ze(A?.notebook_template,q.notebook_template||"notebook"),extra_directories:Array.isArray(A?.extra_directories)?A.extra_directories:q.extra_directories||[],gitignore:ze(A?.gitignore,q.gitignore||"")}},nl=T=>{if(!T||!T.project_types)return;console.log("[DEBUG] hydrateDefaultsFromCatalog - catalogData.project_types:",T.project_types),console.log("[DEBUG] project gitignore from catalog:",T.project_types.project?.gitignore?.substring(0,100));const A={};for(const[q,pe]of Object.entries(T.project_types)){const me=l[q]||{},Be=Ob(pe,{},me.directories||{},me.render_dirs||{}),{directories:we,render_dirs:Qe}=Be;A[q]={label:ze(pe.label,me.label||h(q)),description:ze(pe.description,me.description||""),directories:we,render_dirs:Qe,quarto:{render_dir:ze(pe.quarto?.render_dir?.default,me.quarto?.render_dir||".")},notebook_template:ze(pe.notebook_template?.default,me.notebook_template||"notebook"),optional_toggles:pe.optional_toggles||{},gitignore:ze(pe.gitignore,me.gitignore||"")},console.log(`[DEBUG] Normalized ${q} - gitignore length:`,A[q].gitignore?.length)}for(const[q,pe]of Object.entries(l))A[q]||(A[q]=JSON.parse(JSON.stringify(pe)));a.value=A},ri=(T,A,q)=>{if(!$.value.project_types?.presentation)return;const pe=$.value.project_types.presentation.directories||($.value.project_types.presentation.directories={});A?(!pe[T]||pe[T]==="")&&(pe[T]=q):Object.prototype.hasOwnProperty.call(pe,T)&&delete pe[T]},Nt=async(T,A=T)=>{if(re[A]){re[A].loading=!0;try{const q=await fetch(`/api/templates/${T}`);if(!q.ok)throw new Error("Request failed");const pe=await q.json();re[A].contents=pe.contents||""}catch{e.error("Template Error","Unable to load template contents.")}finally{re[A].loading=!1}}},Pr=async(T,A=T)=>{if(re[A])try{if(!(await fetch(`/api/templates/${T}`,{method:"DELETE"})).ok)throw new Error("Request failed");await Nt(T,A),e.success("Template Reset","Restored the packaged default template.")}catch{e.error("Reset Failed","Unable to restore the default template.")}};Re(Pe,T=>{if(ye.value){console.log("[watch:aiAssistants] Skipped - loading");return}console.log("[watch:aiAssistants] Triggered",T);const A=[];T.claude&&A.push("claude"),T.copilot&&A.push("copilot"),T.agents&&A.push("agents"),$.value.defaults.ai_assistants=A},{deep:!0}),Re(()=>$.value.defaults.ai_canonical_file,async()=>{ye.value||(await Nt(It.value,"canonical"),B.value==="templates"&&(D.value="canonical",await pt("templates","canonical")))}),Re(()=>$.value.defaults.git_hooks.data_security,T=>{ye.value||$.value.privacy.secret_scan!==T&&($.value.privacy.secret_scan=T)}),Re(()=>$.value.privacy.secret_scan,T=>{ye.value||$.value.defaults.git_hooks.data_security!==T&&($.value.defaults.git_hooks.data_security=T)}),Re(()=>K.includeInputs,T=>{ye.value||ri("inputs",T,ue.value.inputs)}),Re(()=>K.includeScripts,T=>{ye.value||ri("scripts",T,ue.value.scripts)}),Re(()=>K.includeFunctions,T=>{ye.value||ri("functions",T,ue.value.functions)}),Re(J,T=>{if(!ye.value)for(const[A,q]of Object.entries(T)){if(!$.value.project_types?.[A])continue;const pe=$.value.project_types[A].directories||{},me=$.value.project_types[A].render_dirs||{},Be=p.value?.project_types?.[A]?.directories||{},we=p.value?.project_types?.[A]?.render_dirs||{};for(const[Qe,Ds]of Object.entries(q))if(Ds===!1)Object.prototype.hasOwnProperty.call(pe,Qe)&&delete $.value.project_types[A].directories[Qe],Object.prototype.hasOwnProperty.call(me,Qe)&&delete $.value.project_types[A].render_dirs[Qe];else if(Ds===!0){if(!Object.prototype.hasOwnProperty.call(pe,Qe)){const Ot=Be[Qe]?.default||"";$.value.project_types[A].directories[Qe]=Ot}if(we[Qe]&&!Object.prototype.hasOwnProperty.call(me,Qe)){const Ot=we[Qe]?.default||"";Ot&&($.value.project_types[A].render_dirs[Qe]=Ot)}}}},{deep:!0}),Re(je,T=>{ye.value||(ot.value=Lb(T))},{deep:!0});const pn=T=>{(T.metaKey||T.ctrlKey)&&T.key==="s"&&(T.preventDefault(),Br())},qs=(T,A)=>{const q=$.value.project_types?.[T]?.directories;return!!q&&Object.prototype.hasOwnProperty.call(q,A)},bu=T=>{a.value[T]&&(ne.projectTypeKey=T,ne.projectTypeName=$.value.project_types[T]?.label||h(T),ne.open=!0)},rl=()=>{const T=ne.projectTypeKey;a.value[T]&&($.value.project_types[T]=JSON.parse(JSON.stringify(a.value[T])),T==="presentation"&&(K.includeInputs=!1,K.includeScripts=!1,K.includeFunctions=!1),ne.open=!1,e.success("Reset Complete",`${ne.projectTypeName} has been reset to defaults`))},ol=async(T,{title:A,description:q})=>{templateModal.open=!0,templateModal.loading=!0,templateModal.name=T,templateModal.title=A,templateModal.description=q;try{const me=await(await fetch(`/api/templates/${T}`)).json();templateModal.contents=me.contents||""}catch{e.error("Template Error","Unable to load template contents.")}finally{templateModal.loading=!1}},ll=()=>{const T=X[$.value.defaults.ai_canonical_file]||"ai_claude";ol(T,{title:`Edit ${$.value.defaults.ai_canonical_file}`,description:"This file is treated as canonical; other assistant files are synced to it."})},mn=T=>{const A=document.getElementById(T);A&&A.scrollIntoView({behavior:"smooth",block:"start"})},gn=T=>{switch(T){case"project":return`project-${T}-inputs`;case"project_sensitive":return`project-${T}-workspaces`;case"presentation":return`project-${T}-primary`;case"course":return`project-${T}-core`;default:return`project-${T}`}},al=T=>!(B.value!==T||T==="structure"&&he.value||T==="templates"),ul=async T=>{const A=n.find(pe=>pe.id===T);if(!A)return;const q=A.id==="structure"?void 0:A.id==="templates"?i.params.subsection||D.value||"notebook":void 0;await pt(A.slug,q),await Rs(),mn(A.id)},$r=async T=>{const A=c[T]||c[Jm];await pt("project-structure",A),await Rs(),mn(gn(T))};Re(()=>he.value,(T,A)=>{B.value==="structure"&&(!T||T===A||Rs(()=>mn(gn(T))))}),Re(()=>i.params.subsection,async T=>{if(i.params.section!=="templates")return;const A=T||"notebook";D.value!==A&&(D.value=A),await Rs(),mn("templates")});const cl=async()=>{try{console.log("[loadSettings] Starting load, setting isLoadingSettings = true"),ye.value=!0;const[T,A]=await Promise.all([fetch("/api/settings/catalog"),fetch("/api/settings/get")]);if(!T.ok)throw new Error("Failed to load settings catalog");if(!A.ok)throw new Error("Failed to load settings payload");console.log("[loadSettings] Responses received, parsing JSON");const q=await T.json();p.value=q,nl(q);const pe=await A.json();if(console.log("[loadSettings] Settings data:",pe),$.value.projects_root=ze(pe.global?.projects_root||pe.projects_root,""),pe.project_types){const me={},Be={...a.value,...pe.project_types};for(const[we,Qe]of Object.entries(Be))me[we]=Ms(we,Qe);$.value.project_types=me;for(const we of Object.keys($.value.project_types))$.value.project_types[we].render_dirs||($.value.project_types[we].render_dirs={})}K.includeInputs=qs("presentation","inputs"),K.includeScripts=qs("presentation","scripts"),K.includeFunctions=qs("presentation","functions");for(const me of["project","project_sensitive","course","presentation"]){const Be=$.value.project_types?.[me]?.directories||{},we=q?.project_types?.[me]?.directories||{},Qe=ce(me);for(const Ot of Object.keys(we))Qe[Ot]=Object.prototype.hasOwnProperty.call(Be,Ot);for(const Ot of Object.keys(Be))Object.prototype.hasOwnProperty.call(we,Ot)||(Qe[Ot]=!0);($.value.project_types?.[me]?.extra_directories||[]).forEach(Ot=>{Ot.key&&($.value.project_types[me].directories_enabled&&$.value.project_types[me].directories_enabled[Ot.key]===!1?Qe[Ot.key]=!1:Qe[Ot.key]=!0)})}if(pe.author&&($.value.author={name:ze(pe.author.name,""),email:ze(pe.author.email,""),affiliation:ze(pe.author.affiliation,"")}),pe.defaults){const me=pe.defaults;$.value.defaults.project_type=ze(me.project_type,"project"),$.value.defaults.notebook_format=ze(me.notebook_format,"quarto"),$.value.defaults.ide=ze(me.ide,"vscode"),$.value.defaults.positron=yt(me.positron,!1),$.value.defaults.use_git=yt(me.use_git,!0),$.value.defaults.use_renv=yt(me.use_renv,!1),$.value.defaults.ai_support=yt(me.ai_support,!0),$.value.defaults.ai_canonical_file=ze(me.ai_canonical_file,"CLAUDE.md");const Be=wi(me.ai_assistants);Be.length&&($.value.defaults.ai_assistants=Be,Pe.claude=Be.includes("claude"),Pe.copilot=Be.includes("copilot"),Pe.agents=Be.includes("agents")),me.git_hooks&&($.value.defaults.git_hooks={...$.value.defaults.git_hooks,...Object.fromEntries(Object.entries(me.git_hooks).map(([we,Qe])=>[we,yt(Qe,$.value.defaults.git_hooks[we])]))},$.value.privacy.secret_scan=$.value.defaults.git_hooks.data_security),me.scaffold&&($.value.defaults.scaffold={source_all_functions:yt(me.scaffold.source_all_functions,!0),set_theme_on_scaffold:yt(me.scaffold.set_theme_on_scaffold,!0),ggplot_theme:ze(me.scaffold.ggplot_theme,"theme_minimal"),seed_on_scaffold:yt(me.scaffold.seed_on_scaffold,!1),seed:ze(me.scaffold.seed,"")}),me.packages&&($.value.defaults.packages=Fa(me.packages)),me.quarto&&($.value.defaults.quarto={html:{format:"html",embed_resources:yt(me.quarto.html?.embed_resources,!0),theme:ze(me.quarto.html?.theme,"default"),toc:yt(me.quarto.html?.toc,!0),toc_depth:parseInt(me.quarto.html?.toc_depth)||3,code_fold:yt(me.quarto.html?.code_fold,!1),code_tools:yt(me.quarto.html?.code_tools,!1),highlight_style:ze(me.quarto.html?.highlight_style,"github")},revealjs:{format:"revealjs",theme:ze(me.quarto.revealjs?.theme,"default"),incremental:yt(me.quarto.revealjs?.incremental,!1),slide_number:yt(me.quarto.revealjs?.slide_number,!0),transition:ze(me.quarto.revealjs?.transition,"slide"),background_transition:ze(me.quarto.revealjs?.background_transition,"fade"),controls:yt(me.quarto.revealjs?.controls,!0),progress:yt(me.quarto.revealjs?.progress,!0),center:yt(me.quarto.revealjs?.center,!0),highlight_style:ze(me.quarto.revealjs?.highlight_style,"github")}}),me.directories?$.value.defaults.directories={...$.value.defaults.directories,...Object.fromEntries(Object.entries(me.directories).map(([we,Qe])=>[we,ze(Qe,$.value.defaults.directories[we]||"")]))}:$.value.project_types.project&&($.value.defaults.directories={...$.value.defaults.directories,...$.value.project_types.project.directories}),Vr(me.env),dl(me.connections)}pe.defaults||(Vr(null),dl(null)),pe.git&&($.value.git={user_name:ze(pe.git.user_name,""),user_email:ze(pe.git.user_email,"")}),pe.privacy?($.value.privacy.secret_scan=yt(pe.privacy.secret_scan,$.value.defaults.git_hooks.data_security),$.value.privacy.gitignore_template=ze(pe.privacy.gitignore_template,"gitignore")):$.value.privacy.secret_scan=$.value.defaults.git_hooks.data_security,await Nt(It.value,"canonical"),console.log("[loadSettings] Load complete, about to set isLoadingSettings = false")}catch(T){console.error("[loadSettings] Error during load:",T),e.error("Load Failed","Unable to load current settings.")}finally{ye.value=!1,console.log("[loadSettings] isLoadingSettings now false")}},Rr=z({get(){const T=$.value.defaults||{},A=$.value.git||{};return Hf({useGit:T.use_git,gitHooks:T.git_hooks,git:A})},set(T){if(ye.value){console.log("[gitPanelModel setter] Blocked during load");return}$.value.defaults.git_hooks=$.value.defaults.git_hooks||{},$.value.git=$.value.git||{},Wf({gitTarget:$.value.git,gitHooksTarget:$.value.defaults.git_hooks,setUseGit:A=>{$.value.defaults.use_git=A}},T)}}),Lr=z({get(){const T=$.value.defaults?.scaffold||{};return{source_all_functions:T.source_all_functions!==!1,set_theme_on_scaffold:T.set_theme_on_scaffold!==!1,ggplot_theme:T.ggplot_theme||"theme_minimal",seed_on_scaffold:T.seed_on_scaffold||!1,seed:T.seed||""}},set(T){if(ye.value){console.log("[scaffoldPanelModel setter] Blocked during load");return}$.value.defaults.scaffold={...$.value.defaults.scaffold||{},source_all_functions:T.source_all_functions,set_theme_on_scaffold:T.set_theme_on_scaffold,ggplot_theme:T.ggplot_theme,seed_on_scaffold:T.seed_on_scaffold,seed:T.seed}}}),Ks=(T,A)=>{const q=$.value.project_types[T];return!q||!Array.isArray(q.extra_directories)?[]:q.extra_directories.filter(pe=>pe.type===A&&!te.value.has(pe._id))},us=(T,A)=>{const q=$.value.project_types[T];return!q||!Array.isArray(q.extra_directories)?[]:q.extra_directories.filter(pe=>pe.type===A&&te.value.has(pe._id))},Si=(T,A,q)=>{const pe=$.value.project_types[T];if(!pe)return;Array.isArray(pe.extra_directories)||(pe.extra_directories=[]);const me=pe.extra_directories.filter(we=>we&&we.type!==A),Be=q.map(we=>({...we,type:A}));pe.extra_directories=[...me,...Be]};z({get(){return us(he.value,"input_private")},set(T){if(!$.value.project_types[he.value])return;us(he.value,"input_private").filter(we=>!T.some(Qe=>Qe._id===we._id)).forEach(we=>{we._id&&te.value.delete(we._id)});const Be=[...Ks(he.value,"input_private"),...T];Si(he.value,"input_private",Be),T.forEach(we=>{we._id&&!te.value.has(we._id)&&te.value.add(we._id)})}}),z({get(){return us(he.value,"input_public")},set(T){if(!$.value.project_types[he.value])return;us(he.value,"input_public").filter(we=>!T.some(Qe=>Qe._id===we._id)).forEach(we=>{we._id&&te.value.delete(we._id)});const Be=[...Ks(he.value,"input_public"),...T];Si(he.value,"input_public",Be),T.forEach(we=>{we._id&&!te.value.has(we._id)&&te.value.add(we._id)})}}),z({get(){return us(he.value,"output_private")},set(T){if(!$.value.project_types[he.value])return;const pe=[...Ks(he.value,"output_private"),...T];Si(he.value,"output_private",pe),T.forEach(me=>{me._id&&!te.value.has(me._id)&&te.value.add(me._id)})}}),z({get(){return us(he.value,"output_public")},set(T){if(!$.value.project_types[he.value])return;const pe=[...Ks(he.value,"output_public"),...T];Si(he.value,"output_public",pe),T.forEach(me=>{me._id&&!te.value.has(me._id)&&te.value.add(me._id)})}}),z({get(){return us(he.value,"workspace")},set(T){if(!$.value.project_types[he.value])return;us(he.value,"workspace").filter(we=>!T.some(Qe=>Qe._id===we._id)).forEach(we=>{we._id&&te.value.delete(we._id)});const Be=[...Ks(he.value,"workspace"),...T];Si(he.value,"workspace",Be),T.forEach(we=>{we._id&&!te.value.has(we._id)&&te.value.add(we._id)})}}),z({get(){return us(he.value,"input")},set(T){if(!$.value.project_types[he.value])return;us(he.value,"input").filter(we=>!T.some(Qe=>Qe._id===we._id)).forEach(we=>{we._id&&te.value.delete(we._id)});const Be=[...Ks(he.value,"input"),...T];Si(he.value,"input",Be),T.forEach(we=>{we._id&&!te.value.has(we._id)&&te.value.add(we._id)})}}),z({get(){return us(he.value,"output")},set(T){if(!$.value.project_types[he.value])return;us(he.value,"output").filter(we=>!T.some(Qe=>Qe._id===we._id)).forEach(we=>{we._id&&te.value.delete(we._id)});const Be=[...Ks(he.value,"output"),...T];Si(he.value,"output",Be),T.forEach(we=>{we._id&&!te.value.has(we._id)&&te.value.add(we._id)})}});const Vr=T=>{const A=t$(T,Rb);Ve.value=A.rawContent,je.value=A.variables,ot.value=A.groups,We.value=A.viewMode},dl=T=>{const A=i$(T||{});se.value=A.databaseConnections,_.value=A.s3Connections,E.value=A.defaultDatabase,F.value=A.defaultStorageBucket},Br=async()=>{try{ae.value=!0;const T=$.value.projects_root?.trim()||"",A=JSON.parse(JSON.stringify($.value));A.global||(A.global={}),A.global.projects_root=T||null,delete A.projects_root,A.defaults.scaffold&&(A.defaults.scaffold.seed=A.defaults.scaffold.seed??""),A.defaults.seed=A.defaults.seed??"",A.defaults.packages=_6($.value.defaults.packages),A.defaults.env={raw:Ve.value||""},A.defaults.connections=n$({databaseConnections:se.value,s3Connections:_.value,defaultDatabase:E.value,defaultStorageBucket:F.value}),A.defaults.directories=A.project_types?.project?.directories||A.defaults.directories,A.defaults.git_hooks.data_security=A.privacy.secret_scan,A.git=A.git||{user_name:"",user_email:""};for(const Be in A.project_types){const we=p.value?.project_types?.[Be]?.directories||{},Qe=J[Be]||A.project_types[Be].directories_enabled||{},Ds=jb({catalogDirs:we,directories:A.project_types[Be].directories||{},render_dirs:A.project_types[Be].render_dirs||{},enabled:Qe,extra_directories:A.project_types[Be].extra_directories||[]});A.project_types[Be].directories=Ds.directories,A.project_types[Be].render_dirs=Ds.render_dirs,A.project_types[Be].directories_enabled=Ds.enabled,A.project_types[Be].extra_directories=Ds.extra_directories}const q=await fetch("/api/settings/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(A)});if(!q.ok){const Be=await q.text();throw new Error("Failed to save settings")}const pe=await q.json();if((await Promise.all([fetch("/api/templates/notebook",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:re.notebook.contents})}),fetch("/api/templates/script",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:re.script.contents})}),fetch("/api/templates/presentation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:re.presentation.contents})}),fetch("/api/templates/gitignore-project",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:re.gitignore_project.contents})}),fetch("/api/templates/gitignore-project_sensitive",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:re.gitignore_project_sensitive.contents})}),fetch("/api/templates/gitignore-course",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:re.gitignore_course.contents})}),fetch("/api/templates/gitignore-presentation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:re.gitignore_presentation.contents})}),fetch(`/api/templates/${It.value}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:re.canonical.contents})})])).some(Be=>!Be.ok))throw new Error("Template save failed");te.value.clear(),await cl(),e.success("Settings Saved","Your global defaults were updated.")}catch(T){console.error("Failed to save settings:",T),e.error("Save Failed",T?.message||"Review your changes and try again.")}finally{ae.value=!1}};return os(()=>{cl(),Nt("notebook"),Nt("script"),Nt("presentation"),Nt("gitignore-project","gitignore_project"),Nt("gitignore-project_sensitive","gitignore_project_sensitive"),Nt("gitignore-course","gitignore_course"),Nt("gitignore-presentation","gitignore_presentation"),Nt(It.value,"canonical"),i.params.section==="templates"&&!i.params.subsection&&pt("templates",D.value||"notebook"),window.addEventListener("keydown",pn)}),Mr(()=>{window.removeEventListener("keydown",pn)}),(T,A)=>(v(),b("div",r$,[f("nav",o$,[A[35]||(A[35]=f("h2",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"New Project Defaults",-1)),f("div",l$,[(v(),b(ve,null,Le(n,q=>f("div",{key:q.id},[q.id==="basics"?(v(),Ae(Na,{key:0},{default:ee(()=>[...A[32]||(A[32]=[de("Settings",-1)])]),_:1})):G("",!0),f("a",{href:ni(q.slug),onClick:Ft(pe=>ul(q.id),["prevent"]),class:be(["flex items-center gap-2 px-3 py-2 rounded-md text-sm transition",al(q.id)?"bg-sky-50 text-sky-700 font-medium dark:bg-sky-900/20 dark:text-sky-400":"text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-800"])},[q.icon?(v(),Ae(_s(q.icon),{key:0,class:"h-4 w-4"})):q.svgIcon?(v(),b("svg",{key:1,class:"h-4 w-4",fill:q.svgFill??"none",viewBox:q.svgViewBox??"0 0 24 24",stroke:q.svgStroke??"currentColor"},[f("path",{"stroke-linecap":q.svgStrokeLinecap??"round","stroke-linejoin":q.svgStrokeLinejoin??"round","stroke-width":q.svgStrokeWidth??2,fill:q.svgPathFill??"none",d:q.svgIcon},null,8,c$)],8,u$)):G("",!0),de(" "+Q(q.label),1)],10,a$),q.id==="structure"&&B.value==="structure"?(v(),b("div",d$,[(v(!0),b(ve,null,Le(ke.value,pe=>(v(),b("a",{key:pe.key,href:ni("project-structure",pe.slug),onClick:Ft(me=>$r(pe.key),["prevent"]),class:be(["block rounded-md py-1 pl-4 pr-2 text-xs font-medium transition",he.value===pe.key?"bg-sky-100 text-sky-700 dark:bg-sky-900/30 dark:text-sky-300":"text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-800"])},Q(pe.label),11,f$))),128))])):q.id==="templates"&&B.value==="templates"?(v(),b("div",h$,[(v(),b(ve,null,Le(Ee,pe=>f("a",{key:pe.id,href:ni("templates",pe.slug),onClick:Ft(me=>R(pe.slug),["prevent"]),class:be(["block rounded-md py-1 pl-4 pr-2 text-xs font-medium transition",D.value===pe.slug?"bg-sky-100 text-sky-700 dark:bg-sky-900/30 dark:text-sky-300":"text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-800"])},Q(pe.label),11,p$)),64))])):G("",!0)])),64)),w(Ln,{modelValue:Ze.value,"onUpdate:modelValue":A[1]||(A[1]=q=>Ze.value=q),title:".env Variables Preview"},{default:ee(()=>[A[34]||(A[34]=f("p",{class:"mb-3 text-sm text-gray-600 dark:text-gray-400"},[de(" Copy these entries into your projects "),f("code",null,".env"),de(" file so the connections above resolve properly. ")],-1)),f("pre",m$,Q(Ne.value),1),f("div",g$,[w(Ge,{variant:"primary",onClick:A[0]||(A[0]=q=>Ze.value=!1)},{default:ee(()=>[...A[33]||(A[33]=[de("Close",-1)])]),_:1})])]),_:1},8,["modelValue"])]),f("div",v$,[w(Ge,{variant:"primary",size:"md",disabled:ae.value,onClick:Br,class:"w-full"},{default:ee(()=>[de(Q(ae.value?"Saving":"Save Changes"),1)]),_:1},8,["disabled"])])]),ye.value?(v(),b("div",y$,[...A[36]||(A[36]=[f("div",{class:"text-center"},[f("div",{class:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-sky-600 border-r-transparent"}),f("p",{class:"mt-4 text-sm text-gray-600 dark:text-gray-400"},"Loading settings...")],-1)])])):G("",!0),Je(f("div",b$,[w(Er,{title:Rt.value,description:Tt.value},null,8,["title","description"]),f("div",k$,[Je(f("div",x$,[w(Rf,{cards:C.value,onNavigate:A[2]||(A[2]=q=>B.value=q)},null,8,["cards"])],512),[[et,B.value==="overview"]]),Je(f("div",w$,[w(Ff,{"database-connections":se.value,"onUpdate:databaseConnections":A[3]||(A[3]=q=>se.value=q),"s3-connections":_.value,"onUpdate:s3Connections":A[4]||(A[4]=q=>_.value=q),"default-database":E.value,"onUpdate:defaultDatabase":A[5]||(A[5]=q=>E.value=q),"default-storage-bucket":F.value,"onUpdate:defaultStorageBucket":A[6]||(A[6]=q=>F.value=q)},null,8,["database-connections","s3-connections","default-database","default-storage-bucket"])],512),[[et,B.value==="connections-defaults"]]),Je(f("div",S$,[w(Xt,{flush:""},{default:ee(()=>[A[37]||(A[37]=f("div",{class:"mb-6 rounded-lg border border-sky-200 bg-sky-50 p-4 dark:border-sky-800 dark:bg-sky-900/20"},[f("h4",{class:"text-sm font-semibold text-sky-900 dark:text-sky-100 mb-2"},"How .env files work"),f("p",{class:"text-sm text-sky-800 dark:text-sky-200 mb-2"},[de(" Environment variables let you keep sensitive data (passwords, API keys) separate from your code. Instead of hardcoding "),f("code",{class:"px-1 py-0.5 bg-sky-100 dark:bg-sky-800 rounded text-xs"},'password = "secret123"'),de(", your code reads from a variable: "),f("code",{class:"px-1 py-0.5 bg-sky-100 dark:bg-sky-800 rounded text-xs"},'Sys.getenv("POSTGRES_PASSWORD")')]),f("p",{class:"text-sm text-sky-800 dark:text-sky-200"},[de(" The "),f("code",{class:"px-1 py-0.5 bg-sky-100 dark:bg-sky-800 rounded text-xs"},".env"),de(" file is gitignored by default, so your secrets stay on your machine while your code can be shared safely. ")])],-1)),w(Uf,{groups:ot.value,variables:je.value,"onUpdate:variables":A[7]||(A[7]=q=>je.value=q),"raw-content":Ve.value,"onUpdate:rawContent":A[8]||(A[8]=q=>Ve.value=q),"view-mode":We.value,"onUpdate:viewMode":A[9]||(A[9]=q=>We.value=q),"regroup-on-save":rt.value,"onUpdate:regroupOnSave":A[10]||(A[10]=q=>rt.value=q),"show-save-button":!1,"allow-show-values-toggle":!0},null,8,["groups","variables","raw-content","view-mode","regroup-on-save"]),f("div",C$,[w(Ge,{variant:"primary",onClick:Br,disabled:ae.value},{default:ee(()=>[de(Q(ae.value?"Saving":"Save Changes"),1)]),_:1},8,["disabled"])])]),_:1})],512),[[et,B.value==="env-defaults"]]),Je(f("div",_$,[w(Xt,null,{default:ee(()=>[w(_d,null,{default:ee(()=>[f("div",A$,[w(Ce,{modelValue:$.value.projects_root,"onUpdate:modelValue":A[11]||(A[11]=q=>$.value.projects_root=q),label:"Default Projects Directory",hint:"New projects will be created in this directory by default",placeholder:"e.g., ~/projects or /Users/yourname/code"},null,8,["modelValue"]),w(GP,{positron:$.value.defaults.positron,"onUpdate:positron":A[12]||(A[12]=q=>$.value.defaults.positron=q),"notebook-format":$.value.defaults.notebook_format,"onUpdate:notebookFormat":A[13]||(A[13]=q=>$.value.defaults.notebook_format=q)},null,8,["positron","notebook-format"]),f("div",M$,[w(Lf,{modelValue:$.value.author,"onUpdate:modelValue":A[14]||(A[14]=q=>$.value.author=q)},null,8,["modelValue"])])])]),_:1})]),_:1})],512),[[et,B.value==="basics"]]),Je(f("div",D$,[he.value?Ue.value&&p.value?(v(),b("div",R$,[w(zf,{"project-type":he.value,directories:$.value.project_types[he.value].directories,"onUpdate:directories":A[15]||(A[15]=q=>$.value.project_types[he.value].directories=q),"render-dirs":$.value.project_types[he.value].render_dirs,"onUpdate:renderDirs":A[16]||(A[16]=q=>$.value.project_types[he.value].render_dirs=q),enabled:J[he.value],"onUpdate:enabled":A[17]||(A[17]=q=>J[he.value]=q),"extra-directories":$.value.project_types[he.value].extra_directories,"onUpdate:extraDirectories":A[18]||(A[18]=q=>$.value.project_types[he.value].extra_directories=q),settings:$.value.project_types[he.value],"onUpdate:settings":A[19]||(A[19]=q=>$.value.project_types[he.value]=q),gitignore:$.value.project_types[he.value].gitignore,"onUpdate:gitignore":A[20]||(A[20]=q=>$.value.project_types[he.value].gitignore=q),catalog:p.value.project_types[he.value]||{},"new-extra-ids":te.value,"onUpdate:newExtraIds":A[21]||(A[21]=q=>te.value=q),onReset:A[22]||(A[22]=q=>bu(he.value))},null,8,["project-type","directories","render-dirs","enabled","extra-directories","settings","gitignore","catalog","new-extra-ids"])])):G("",!0):(v(),b("div",E$,[f("div",T$,[(v(!0),b(ve,null,Le(ke.value,q=>(v(),b("button",{key:q.key,onClick:pe=>$r(q.key),class:"group relative w-full rounded-lg border border-gray-200 p-6 text-left transition hover:border-sky-300 dark:border-gray-700 dark:hover:border-sky-600"},[f("div",j$,[w(dt(ba),{class:"h-6 w-6 flex-shrink-0 text-gray-400 transition group-hover:text-sky-600 dark:group-hover:text-sky-400"}),f("div",null,[f("h3",P$,Q(q.label),1),f("p",$$,Q($.value.project_types[q.key]?.description||""),1)])])],8,O$))),128))])]))],512),[[et,B.value==="structure"]]),Je(f("div",L$,[w(Xt,null,{default:ee(()=>[w(If,{modelValue:Rr.value,"onUpdate:modelValue":A[23]||(A[23]=q=>Rr.value=q),flush:""},{note:ee(()=>[...A[38]||(A[38]=[de(" Project-specific .gitignore templates can be customized in ",-1),f("a",{href:"#/settings/project-defaults",class:"text-sky-600 dark:text-sky-400 hover:underline"}," Project Defaults ",-1),de(". ",-1)])]),_:1},8,["modelValue"])]),_:1})],512),[[et,B.value==="git"]]),Je(f("div",V$,[w(Xt,null,{default:ee(()=>[A[39]||(A[39]=f("div",null,[f("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Scaffold Behavior"),f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"},[de(" Automatic actions when "),f("code",{class:"px-1.5 py-0.5 bg-gray-200 dark:bg-gray-700 rounded text-xs"},"scaffold()"),de(" runs to initialize your project environment. ")])],-1)),w(Nf,{modelValue:Lr.value,"onUpdate:modelValue":A[24]||(A[24]=q=>Lr.value=q),flush:""},null,8,["modelValue"])]),_:1})],512),[[et,B.value==="scaffold"]]),Je(f("div",B$,[w(Xt,null,{default:ee(()=>[w(Vf,{modelValue:Y.value,"onUpdate:modelValue":A[25]||(A[25]=q=>Y.value=q),"show-renv-toggle":!0},null,8,["modelValue"])]),_:1})],512),[[et,B.value==="packages"]]),Je(f("div",I$,[w(Xt,{flush:""},{default:ee(()=>[w(XP,{modelValue:$.value.defaults.quarto,"onUpdate:modelValue":A[26]||(A[26]=q=>$.value.defaults.quarto=q)},null,8,["modelValue"])]),_:1})],512),[[et,B.value==="quarto"]]),Je(f("div",N$,[w(Xt,null,{default:ee(()=>[A[41]||(A[41]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Manage assistant support, canonical context files, and sync hooks for all new projects. ",-1)),w(Bf,{modelValue:_e.value,"onUpdate:modelValue":A[27]||(A[27]=q=>_e.value=q),flush:!0,"show-editor":!0,"editor-height":"420px"},{"editor-actions":ee(()=>[f("div",F$,[w(Ge,{size:"sm",variant:"secondary",onClick:ll},{default:ee(()=>[...A[40]||(A[40]=[de(" Open canonical file ",-1)])]),_:1})])]),_:1},8,["modelValue"])]),_:1})],512),[[et,B.value==="ai"]]),Je(f("div",z$,[w(Xt,{flush:""},{default:ee(()=>[f("div",U$,[(v(!0),b(ve,null,Le(Z.value,q=>(v(),b("button",{key:q.key,type:"button",onClick:pe=>R(q.slug),class:be(["px-3 py-1.5 rounded-full text-sm font-medium border transition",D.value===q.key?"bg-sky-100 text-sky-700 border-sky-300 dark:bg-sky-900/30 dark:text-sky-200 dark:border-sky-700":"text-gray-700 border-gray-200 hover:border-sky-300 hover:text-sky-700 dark:text-gray-300 dark:border-gray-700 dark:hover:text-sky-200"])},Q(q.label),11,H$))),128))]),f("div",W$,[f("div",q$,[f("div",K$,[f("h4",G$,Q(O.value.label)+" Template ",1),f("p",J$,Q(O.value.description),1),A[42]||(A[42]=f("p",{class:"text-xs text-gray-500 dark:text-gray-500"}," Edits save with the main Save Changes button. ",-1))]),w(Ge,{size:"sm",variant:"ghost",class:"text-gray-600 dark:text-gray-300 font-normal",disabled:re[O.value.editorKey].loading,onClick:A[28]||(A[28]=q=>le(q))},{default:ee(()=>[...A[43]||(A[43]=[de(" Reset to default ",-1)])]),_:1},8,["disabled"])]),w($f,{modelValue:re[O.value.editorKey].contents,"onUpdate:modelValue":A[29]||(A[29]=q=>re[O.value.editorKey].contents=q),language:O.value.language,"auto-grow":""},null,8,["modelValue","language"])])]),_:1})],512),[[et,B.value==="templates"]])])],512),[[et,!ye.value]]),w(Ln,{modelValue:ne.open,"onUpdate:modelValue":A[31]||(A[31]=q=>ne.open=q),size:"md",title:"Reset to Defaults",icon:"warning"},{default:ee(()=>[f("p",Y$,[A[44]||(A[44]=de(" Are you sure you want to reset ",-1)),f("strong",null,Q(ne.projectTypeName),1),A[45]||(A[45]=de(" to default settings? This will discard all your customizations for this project type. ",-1))])]),actions:ee(()=>[f("div",Q$,[w(Ge,{variant:"secondary",onClick:A[30]||(A[30]=q=>ne.open=!1)},{default:ee(()=>[...A[46]||(A[46]=[de("Cancel",-1)])]),_:1}),w(Ge,{variant:"primary",onClick:rl},{default:ee(()=>[...A[47]||(A[47]=[de(" Reset to Defaults ",-1)])]),_:1})])]),_:1},8,["modelValue"])]))}},tR={class:"mx-auto max-w-5xl p-10"},sR={__name:"ProjectPackagesView",setup(s){return ie([]),os(async()=>{}),(e,t)=>(v(),b("div",tR,[w(Er,{title:"Packages",description:"Manage R packages for this project."}),t[0]||(t[0]=Xa('<div class="mt-10 rounded-2xl border border-zinc-200 bg-white p-8 shadow-sm dark:border-zinc-800 dark:bg-zinc-900"><div class="flex items-center gap-3 border-b border-zinc-100 pb-6 dark:border-zinc-800"><div class="flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-sky-500 to-sky-600 shadow-lg shadow-sky-500/20"><svg class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg></div><h3 class="text-xl font-bold text-zinc-900 dark:text-white">Package Configuration</h3></div><div class="mt-8"><p class="text-sm text-zinc-600 dark:text-zinc-400"> Package management interface coming soon. This page will allow you to: </p><ul class="mt-4 space-y-2 text-sm text-zinc-600 dark:text-zinc-400"><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Add and remove project packages </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Specify package versions </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Toggle renv integration </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Install and update packages </li></ul></div></div>',1))]))}},iR={class:"mx-auto max-w-5xl p-10"},nR={__name:"ProjectDataView",setup(s){return ie([]),os(async()=>{}),(e,t)=>(v(),b("div",iR,[w(Er,{title:"Data",description:"Manage data catalog and sources for this project."}),t[0]||(t[0]=Xa('<div class="mt-10 rounded-2xl border border-zinc-200 bg-white p-8 shadow-sm dark:border-zinc-800 dark:bg-zinc-900"><div class="flex items-center gap-3 border-b border-zinc-100 pb-6 dark:border-zinc-800"><div class="flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-sky-500 to-sky-600 shadow-lg shadow-sky-500/20"><svg class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"></path></svg></div><h3 class="text-xl font-bold text-zinc-900 dark:text-white">Data Catalog</h3></div><div class="mt-8"><p class="text-sm text-zinc-600 dark:text-zinc-400"> Data catalog management interface coming soon. This page will allow you to: </p><ul class="mt-4 space-y-2 text-sm text-zinc-600 dark:text-zinc-400"><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Define data sources in the catalog </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Specify data formats (CSV, RDS, etc.) </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Configure encryption settings </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Track data integrity via digests </li></ul></div></div>',1))]))}},rR={class:"mx-auto max-w-5xl p-10"},oR={__name:"ProjectConnectionsView",setup(s){return ie([]),os(async()=>{}),(e,t)=>(v(),b("div",rR,[w(Er,{title:"Connections",description:"Manage database connections for this project."}),t[0]||(t[0]=Xa('<div class="mt-10 rounded-2xl border border-zinc-200 bg-white p-8 shadow-sm dark:border-zinc-800 dark:bg-zinc-900"><div class="flex items-center gap-3 border-b border-zinc-100 pb-6 dark:border-zinc-800"><div class="flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-sky-500 to-sky-600 shadow-lg shadow-sky-500/20"><svg class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg></div><h3 class="text-xl font-bold text-zinc-900 dark:text-white">Database Connections</h3></div><div class="mt-8"><p class="text-sm text-zinc-600 dark:text-zinc-400"> Connection management interface coming soon. This page will allow you to: </p><ul class="mt-4 space-y-2 text-sm text-zinc-600 dark:text-zinc-400"><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Configure database connections (SQLite, PostgreSQL) </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Store connection credentials securely </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Test database connectivity </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Manage connection pooling settings </li></ul></div></div>',1))]))}},lR=[{path:"/",redirect:"/projects"},{path:"/docs",name:"docs",component:lp},{path:"/docs/:functionName",name:"doc-detail",component:lp,props:!0},{path:"/projects",name:"projects",component:h_},{path:"/projects/new",name:"project-create",component:H6},{path:"/project/:id",name:"project-detail",component:qP,props:!0},{path:"/settings/:section?/:subsection?",name:"settings",component:eR,props:!0},{path:"/project/packages",name:"project-packages",component:sR},{path:"/project/data",name:"project-data",component:nR},{path:"/project/connections",name:"project-connections",component:oR}],aR=Bw({history:gw(),routes:lR});Dx(_2).use(aR).mount("#app");
