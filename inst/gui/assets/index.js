const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/angular-html.js","assets/html.js","assets/javascript.js","assets/css.js","assets/angular-ts.js","assets/scss.js","assets/apl.js","assets/xml.js","assets/java.js","assets/json.js","assets/astro.js","assets/typescript.js","assets/postcss.js","assets/tsx.js","assets/blade.js","assets/html-derivative.js","assets/sql.js","assets/bsl.js","assets/sdbl.js","assets/cairo.js","assets/python.js","assets/cobol.js","assets/coffee.js","assets/cpp.js","assets/regexp.js","assets/glsl.js","assets/c.js","assets/crystal.js","assets/shellscript.js","assets/edge.js","assets/elixir.js","assets/elm.js","assets/erb.js","assets/ruby.js","assets/haml.js","assets/graphql.js","assets/jsx.js","assets/lua.js","assets/yaml.js","assets/erlang.js","assets/markdown.js","assets/fortran-fixed-form.js","assets/fortran-free-form.js","assets/fsharp.js","assets/gdresource.js","assets/gdshader.js","assets/gdscript.js","assets/git-commit.js","assets/diff.js","assets/git-rebase.js","assets/glimmer-js.js","assets/glimmer-ts.js","assets/hack.js","assets/handlebars.js","assets/http.js","assets/hurl.js","assets/csv.js","assets/hxml.js","assets/haxe.js","assets/jinja.js","assets/jison.js","assets/julia.js","assets/r.js","assets/latex.js","assets/tex.js","assets/liquid.js","assets/marko.js","assets/less.js","assets/mdc.js","assets/nginx.js","assets/nim.js","assets/perl.js","assets/php.js","assets/pug.js","assets/qml.js","assets/razor.js","assets/csharp.js","assets/rst.js","assets/cmake.js","assets/sas.js","assets/shaderlab.js","assets/hlsl.js","assets/shellsession.js","assets/soy.js","assets/sparql.js","assets/turtle.js","assets/stata.js","assets/svelte.js","assets/templ.js","assets/go.js","assets/ts-tags.js","assets/twig.js","assets/vue.js","assets/vue-html.js","assets/vue-vine.js","assets/stylus.js","assets/xsl.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function mh(n){const e=Object.create(null);for(const t of n.split(","))e[t]=1;return t=>t in e}const wt={},qr=[],Us=()=>{},Rv=()=>!1,Zu=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),gh=n=>n.startsWith("onUpdate:"),rn=Object.assign,vh=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},N_=Object.prototype.hasOwnProperty,gt=(n,e)=>N_.call(n,e),Be=Array.isArray,Gr=n=>Wl(n)==="[object Map]",ko=n=>Wl(n)==="[object Set]",mm=n=>Wl(n)==="[object Date]",Je=n=>typeof n=="function",jt=n=>typeof n=="string",bs=n=>typeof n=="symbol",kt=n=>n!==null&&typeof n=="object",Ov=n=>(kt(n)||Je(n))&&Je(n.then)&&Je(n.catch),Lv=Object.prototype.toString,Wl=n=>Lv.call(n),B_=n=>Wl(n).slice(8,-1),Mv=n=>Wl(n)==="[object Object]",yh=n=>jt(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,Ko=mh(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ec=n=>{const e=Object.create(null);return(t=>e[t]||(e[t]=n(t)))},F_=/-\w/g,cs=ec(n=>n.replace(F_,e=>e.slice(1).toUpperCase())),U_=/\B([A-Z])/g,Er=ec(n=>n.replace(U_,"-$1").toLowerCase()),tc=ec(n=>n.charAt(0).toUpperCase()+n.slice(1)),Bc=ec(n=>n?`on${tc(n)}`:""),Ri=(n,e)=>!Object.is(n,e),Ja=(n,...e)=>{for(let t=0;t<n.length;t++)n[t](...e)},Iv=(n,e,t,s=!1)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,writable:s,value:t})},du=n=>{const e=parseFloat(n);return isNaN(e)?n:e},z_=n=>{const e=jt(n)?Number(n):NaN;return isNaN(e)?n:e};let gm;const nc=()=>gm||(gm=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Kr(n){if(Be(n)){const e={};for(let t=0;t<n.length;t++){const s=n[t],i=jt(s)?G_(s):Kr(s);if(i)for(const r in i)e[r]=i[r]}return e}else if(jt(n)||kt(n))return n}const H_=/;(?![^(]*\))/g,W_=/:([^]+)/,q_=/\/\*[^]*?\*\//g;function G_(n){const e={};return n.replace(q_,"").split(H_).forEach(t=>{if(t){const s=t.split(W_);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function Se(n){let e="";if(jt(n))e=n;else if(Be(n))for(let t=0;t<n.length;t++){const s=Se(n[t]);s&&(e+=s+" ")}else if(kt(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}const K_="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",J_=mh(K_);function jv(n){return!!n||n===""}function Q_(n,e){if(n.length!==e.length)return!1;let t=!0;for(let s=0;t&&s<n.length;s++)t=yr(n[s],e[s]);return t}function yr(n,e){if(n===e)return!0;let t=mm(n),s=mm(e);if(t||s)return t&&s?n.getTime()===e.getTime():!1;if(t=bs(n),s=bs(e),t||s)return n===e;if(t=Be(n),s=Be(e),t||s)return t&&s?Q_(n,e):!1;if(t=kt(n),s=kt(e),t||s){if(!t||!s)return!1;const i=Object.keys(n).length,r=Object.keys(e).length;if(i!==r)return!1;for(const o in n){const l=n.hasOwnProperty(o),a=e.hasOwnProperty(o);if(l&&!a||!l&&a||!yr(n[o],e[o]))return!1}}return String(n)===String(e)}function bh(n,e){return n.findIndex(t=>yr(t,e))}const Vv=n=>!!(n&&n.__v_isRef===!0),Y=n=>jt(n)?n:n==null?"":Be(n)||kt(n)&&(n.toString===Lv||!Je(n.toString))?Vv(n)?Y(n.value):JSON.stringify(n,$v,2):String(n),$v=(n,e)=>Vv(e)?$v(n,e.value):Gr(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[s,i],r)=>(t[Fc(s,r)+" =>"]=i,t),{})}:ko(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>Fc(t))}:bs(e)?Fc(e):kt(e)&&!Be(e)&&!Mv(e)?String(e):e,Fc=(n,e="")=>{var t;return bs(n)?`Symbol(${(t=n.description)!=null?t:e})`:n};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Vn;class Y_{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Vn,!e&&Vn&&(this.index=(Vn.scopes||(Vn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=Vn;try{return Vn=this,e()}finally{Vn=t}}}on(){++this._on===1&&(this.prevScope=Vn,Vn=this)}off(){this._on>0&&--this._on===0&&(Vn=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let t,s;for(t=0,s=this.effects.length;t<s;t++)this.effects[t].stop();for(this.effects.length=0,t=0,s=this.cleanups.length;t<s;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function X_(){return Vn}let Et;const Uc=new WeakSet;class Nv{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Vn&&Vn.active&&Vn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Uc.has(this)&&(Uc.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Fv(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,vm(this),Uv(this);const e=Et,t=ys;Et=this,ys=!0;try{return this.fn()}finally{zv(this),Et=e,ys=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)_h(e);this.deps=this.depsTail=void 0,vm(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Uc.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Nd(this)&&this.run()}get dirty(){return Nd(this)}}let Bv=0,Jo,Qo;function Fv(n,e=!1){if(n.flags|=8,e){n.next=Qo,Qo=n;return}n.next=Jo,Jo=n}function kh(){Bv++}function xh(){if(--Bv>0)return;if(Qo){let e=Qo;for(Qo=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let n;for(;Jo;){let e=Jo;for(Jo=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){n||(n=s)}e=t}}if(n)throw n}function Uv(n){for(let e=n.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function zv(n){let e,t=n.depsTail,s=t;for(;s;){const i=s.prevDep;s.version===-1?(s===t&&(t=i),_h(s),Z_(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=i}n.deps=e,n.depsTail=t}function Nd(n){for(let e=n.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Hv(e.dep.computed)||e.dep.version!==e.version))return!0;return!!n._dirty}function Hv(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===dl)||(n.globalVersion=dl,!n.isSSR&&n.flags&128&&(!n.deps&&!n._dirty||!Nd(n))))return;n.flags|=2;const e=n.dep,t=Et,s=ys;Et=n,ys=!0;try{Uv(n);const i=n.fn(n._value);(e.version===0||Ri(i,n._value))&&(n.flags|=128,n._value=i,e.version++)}catch(i){throw e.version++,i}finally{Et=t,ys=s,zv(n),n.flags&=-3}}function _h(n,e=!1){const{dep:t,prevSub:s,nextSub:i}=n;if(s&&(s.nextSub=i,n.prevSub=void 0),i&&(i.prevSub=s,n.nextSub=void 0),t.subs===n&&(t.subs=s,!s&&t.computed)){t.computed.flags&=-5;for(let r=t.computed.deps;r;r=r.nextDep)_h(r,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function Z_(n){const{prevDep:e,nextDep:t}=n;e&&(e.nextDep=t,n.prevDep=void 0),t&&(t.prevDep=e,n.nextDep=void 0)}let ys=!0;const Wv=[];function li(){Wv.push(ys),ys=!1}function ai(){const n=Wv.pop();ys=n===void 0?!0:n}function vm(n){const{cleanup:e}=n;if(n.cleanup=void 0,e){const t=Et;Et=void 0;try{e()}finally{Et=t}}}let dl=0;class ew{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class wh{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Et||!ys||Et===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==Et)t=this.activeLink=new ew(Et,this),Et.deps?(t.prevDep=Et.depsTail,Et.depsTail.nextDep=t,Et.depsTail=t):Et.deps=Et.depsTail=t,qv(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const s=t.nextDep;s.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=s),t.prevDep=Et.depsTail,t.nextDep=void 0,Et.depsTail.nextDep=t,Et.depsTail=t,Et.deps===t&&(Et.deps=s)}return t}trigger(e){this.version++,dl++,this.notify(e)}notify(e){kh();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{xh()}}}function qv(n){if(n.dep.sc++,n.sub.flags&4){const e=n.dep.computed;if(e&&!n.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)qv(s)}const t=n.dep.subs;t!==n&&(n.prevSub=t,t&&(t.nextSub=n)),n.dep.subs=n}}const Bd=new WeakMap,pr=Symbol(""),Fd=Symbol(""),fl=Symbol("");function yn(n,e,t){if(ys&&Et){let s=Bd.get(n);s||Bd.set(n,s=new Map);let i=s.get(t);i||(s.set(t,i=new wh),i.map=s,i.key=t),i.track()}}function ti(n,e,t,s,i,r){const o=Bd.get(n);if(!o){dl++;return}const l=a=>{a&&a.trigger()};if(kh(),e==="clear")o.forEach(l);else{const a=Be(n),u=a&&yh(t);if(a&&t==="length"){const c=Number(s);o.forEach((d,f)=>{(f==="length"||f===fl||!bs(f)&&f>=c)&&l(d)})}else switch((t!==void 0||o.has(void 0))&&l(o.get(t)),u&&l(o.get(fl)),e){case"add":a?u&&l(o.get("length")):(l(o.get(pr)),Gr(n)&&l(o.get(Fd)));break;case"delete":a||(l(o.get(pr)),Gr(n)&&l(o.get(Fd)));break;case"set":Gr(n)&&l(o.get(pr));break}}xh()}function Ir(n){const e=ft(n);return e===n?e:(yn(e,"iterate",fl),rs(n)?e:e.map(an))}function sc(n){return yn(n=ft(n),"iterate",fl),n}const tw={__proto__:null,[Symbol.iterator](){return zc(this,Symbol.iterator,an)},concat(...n){return Ir(this).concat(...n.map(e=>Be(e)?Ir(e):e))},entries(){return zc(this,"entries",n=>(n[1]=an(n[1]),n))},every(n,e){return Gs(this,"every",n,e,void 0,arguments)},filter(n,e){return Gs(this,"filter",n,e,t=>t.map(an),arguments)},find(n,e){return Gs(this,"find",n,e,an,arguments)},findIndex(n,e){return Gs(this,"findIndex",n,e,void 0,arguments)},findLast(n,e){return Gs(this,"findLast",n,e,an,arguments)},findLastIndex(n,e){return Gs(this,"findLastIndex",n,e,void 0,arguments)},forEach(n,e){return Gs(this,"forEach",n,e,void 0,arguments)},includes(...n){return Hc(this,"includes",n)},indexOf(...n){return Hc(this,"indexOf",n)},join(n){return Ir(this).join(n)},lastIndexOf(...n){return Hc(this,"lastIndexOf",n)},map(n,e){return Gs(this,"map",n,e,void 0,arguments)},pop(){return Ro(this,"pop")},push(...n){return Ro(this,"push",n)},reduce(n,...e){return ym(this,"reduce",n,e)},reduceRight(n,...e){return ym(this,"reduceRight",n,e)},shift(){return Ro(this,"shift")},some(n,e){return Gs(this,"some",n,e,void 0,arguments)},splice(...n){return Ro(this,"splice",n)},toReversed(){return Ir(this).toReversed()},toSorted(n){return Ir(this).toSorted(n)},toSpliced(...n){return Ir(this).toSpliced(...n)},unshift(...n){return Ro(this,"unshift",n)},values(){return zc(this,"values",an)}};function zc(n,e,t){const s=sc(n),i=s[e]();return s!==n&&!rs(n)&&(i._next=i.next,i.next=()=>{const r=i._next();return r.done||(r.value=t(r.value)),r}),i}const nw=Array.prototype;function Gs(n,e,t,s,i,r){const o=sc(n),l=o!==n&&!rs(n),a=o[e];if(a!==nw[e]){const d=a.apply(n,r);return l?an(d):d}let u=t;o!==n&&(l?u=function(d,f){return t.call(this,an(d),f,n)}:t.length>2&&(u=function(d,f){return t.call(this,d,f,n)}));const c=a.call(o,u,s);return l&&i?i(c):c}function ym(n,e,t,s){const i=sc(n);let r=t;return i!==n&&(rs(n)?t.length>3&&(r=function(o,l,a){return t.call(this,o,l,a,n)}):r=function(o,l,a){return t.call(this,o,an(l),a,n)}),i[e](r,...s)}function Hc(n,e,t){const s=ft(n);yn(s,"iterate",fl);const i=s[e](...t);return(i===-1||i===!1)&&Ah(t[0])?(t[0]=ft(t[0]),s[e](...t)):i}function Ro(n,e,t=[]){li(),kh();const s=ft(n)[e].apply(n,t);return xh(),ai(),s}const sw=mh("__proto__,__v_isRef,__isVue"),Gv=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(bs));function iw(n){bs(n)||(n=String(n));const e=ft(this);return yn(e,"has",n),e.hasOwnProperty(n)}class Kv{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,s){if(t==="__v_skip")return e.__v_skip;const i=this._isReadonly,r=this._isShallow;if(t==="__v_isReactive")return!i;if(t==="__v_isReadonly")return i;if(t==="__v_isShallow")return r;if(t==="__v_raw")return s===(i?r?pw:Xv:r?Yv:Qv).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=Be(e);if(!i){let a;if(o&&(a=tw[t]))return a;if(t==="hasOwnProperty")return iw}const l=Reflect.get(e,t,Sn(e)?e:s);if((bs(t)?Gv.has(t):sw(t))||(i||yn(e,"get",t),r))return l;if(Sn(l)){const a=o&&yh(t)?l:l.value;return i&&kt(a)?zd(a):a}return kt(l)?i?zd(l):gs(l):l}}class Jv extends Kv{constructor(e=!1){super(!1,e)}set(e,t,s,i){let r=e[t];if(!this._isShallow){const a=Mi(r);if(!rs(s)&&!Mi(s)&&(r=ft(r),s=ft(s)),!Be(e)&&Sn(r)&&!Sn(s))return a||(r.value=s),!0}const o=Be(e)&&yh(t)?Number(t)<e.length:gt(e,t),l=Reflect.set(e,t,s,Sn(e)?e:i);return e===ft(i)&&(o?Ri(s,r)&&ti(e,"set",t,s):ti(e,"add",t,s)),l}deleteProperty(e,t){const s=gt(e,t);e[t];const i=Reflect.deleteProperty(e,t);return i&&s&&ti(e,"delete",t,void 0),i}has(e,t){const s=Reflect.has(e,t);return(!bs(t)||!Gv.has(t))&&yn(e,"has",t),s}ownKeys(e){return yn(e,"iterate",Be(e)?"length":pr),Reflect.ownKeys(e)}}class rw extends Kv{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const ow=new Jv,lw=new rw,aw=new Jv(!0);const Ud=n=>n,ma=n=>Reflect.getPrototypeOf(n);function uw(n,e,t){return function(...s){const i=this.__v_raw,r=ft(i),o=Gr(r),l=n==="entries"||n===Symbol.iterator&&o,a=n==="keys"&&o,u=i[n](...s),c=t?Ud:e?fu:an;return!e&&yn(r,"iterate",a?Fd:pr),{next(){const{value:d,done:f}=u.next();return f?{value:d,done:f}:{value:l?[c(d[0]),c(d[1])]:c(d),done:f}},[Symbol.iterator](){return this}}}}function ga(n){return function(...e){return n==="delete"?!1:n==="clear"?void 0:this}}function cw(n,e){const t={get(i){const r=this.__v_raw,o=ft(r),l=ft(i);n||(Ri(i,l)&&yn(o,"get",i),yn(o,"get",l));const{has:a}=ma(o),u=e?Ud:n?fu:an;if(a.call(o,i))return u(r.get(i));if(a.call(o,l))return u(r.get(l));r!==o&&r.get(i)},get size(){const i=this.__v_raw;return!n&&yn(ft(i),"iterate",pr),i.size},has(i){const r=this.__v_raw,o=ft(r),l=ft(i);return n||(Ri(i,l)&&yn(o,"has",i),yn(o,"has",l)),i===l?r.has(i):r.has(i)||r.has(l)},forEach(i,r){const o=this,l=o.__v_raw,a=ft(l),u=e?Ud:n?fu:an;return!n&&yn(a,"iterate",pr),l.forEach((c,d)=>i.call(r,u(c),u(d),o))}};return rn(t,n?{add:ga("add"),set:ga("set"),delete:ga("delete"),clear:ga("clear")}:{add(i){!e&&!rs(i)&&!Mi(i)&&(i=ft(i));const r=ft(this);return ma(r).has.call(r,i)||(r.add(i),ti(r,"add",i,i)),this},set(i,r){!e&&!rs(r)&&!Mi(r)&&(r=ft(r));const o=ft(this),{has:l,get:a}=ma(o);let u=l.call(o,i);u||(i=ft(i),u=l.call(o,i));const c=a.call(o,i);return o.set(i,r),u?Ri(r,c)&&ti(o,"set",i,r):ti(o,"add",i,r),this},delete(i){const r=ft(this),{has:o,get:l}=ma(r);let a=o.call(r,i);a||(i=ft(i),a=o.call(r,i)),l&&l.call(r,i);const u=r.delete(i);return a&&ti(r,"delete",i,void 0),u},clear(){const i=ft(this),r=i.size!==0,o=i.clear();return r&&ti(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=uw(i,n,e)}),t}function Sh(n,e){const t=cw(n,e);return(s,i,r)=>i==="__v_isReactive"?!n:i==="__v_isReadonly"?n:i==="__v_raw"?s:Reflect.get(gt(t,i)&&i in s?t:s,i,r)}const dw={get:Sh(!1,!1)},fw={get:Sh(!1,!0)},hw={get:Sh(!0,!1)};const Qv=new WeakMap,Yv=new WeakMap,Xv=new WeakMap,pw=new WeakMap;function mw(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function gw(n){return n.__v_skip||!Object.isExtensible(n)?0:mw(B_(n))}function gs(n){return Mi(n)?n:Ch(n,!1,ow,dw,Qv)}function Zv(n){return Ch(n,!1,aw,fw,Yv)}function zd(n){return Ch(n,!0,lw,hw,Xv)}function Ch(n,e,t,s,i){if(!kt(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const r=gw(n);if(r===0)return n;const o=i.get(n);if(o)return o;const l=new Proxy(n,r===2?s:t);return i.set(n,l),l}function Jr(n){return Mi(n)?Jr(n.__v_raw):!!(n&&n.__v_isReactive)}function Mi(n){return!!(n&&n.__v_isReadonly)}function rs(n){return!!(n&&n.__v_isShallow)}function Ah(n){return n?!!n.__v_raw:!1}function ft(n){const e=n&&n.__v_raw;return e?ft(e):n}function vw(n){return!gt(n,"__v_skip")&&Object.isExtensible(n)&&Iv(n,"__v_skip",!0),n}const an=n=>kt(n)?gs(n):n,fu=n=>kt(n)?zd(n):n;function Sn(n){return n?n.__v_isRef===!0:!1}function Q(n){return ey(n,!1)}function yw(n){return ey(n,!0)}function ey(n,e){return Sn(n)?n:new bw(n,e)}class bw{constructor(e,t){this.dep=new wh,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:ft(e),this._value=t?e:an(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,s=this.__v_isShallow||rs(e)||Mi(e);e=s?e:ft(e),Ri(e,t)&&(this._rawValue=e,this._value=s?e:an(e),this.dep.trigger())}}function Ke(n){return Sn(n)?n.value:n}const kw={get:(n,e,t)=>e==="__v_raw"?n:Ke(Reflect.get(n,e,t)),set:(n,e,t,s)=>{const i=n[e];return Sn(i)&&!Sn(t)?(i.value=t,!0):Reflect.set(n,e,t,s)}};function ty(n){return Jr(n)?n:new Proxy(n,kw)}class xw{constructor(e,t,s){this.fn=e,this.setter=t,this._value=void 0,this.dep=new wh(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=dl-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&Et!==this)return Fv(this,!0),!0}get value(){const e=this.dep.track();return Hv(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function _w(n,e,t=!1){let s,i;return Je(n)?s=n:(s=n.get,i=n.set),new xw(s,i,t)}const va={},hu=new WeakMap;let nr;function ww(n,e=!1,t=nr){if(t){let s=hu.get(t);s||hu.set(t,s=[]),s.push(n)}}function Sw(n,e,t=wt){const{immediate:s,deep:i,once:r,scheduler:o,augmentJob:l,call:a}=t,u=U=>i?U:rs(U)||i===!1||i===0?ni(U,1):ni(U);let c,d,f,p,g=!1,k=!1;if(Sn(n)?(d=()=>n.value,g=rs(n)):Jr(n)?(d=()=>u(n),g=!0):Be(n)?(k=!0,g=n.some(U=>Jr(U)||rs(U)),d=()=>n.map(U=>{if(Sn(U))return U.value;if(Jr(U))return u(U);if(Je(U))return a?a(U,2):U()})):Je(n)?e?d=a?()=>a(n,2):n:d=()=>{if(f){li();try{f()}finally{ai()}}const U=nr;nr=c;try{return a?a(n,3,[p]):n(p)}finally{nr=U}}:d=Us,e&&i){const U=d,N=i===!0?1/0:i;d=()=>ni(U(),N)}const x=X_(),m=()=>{c.stop(),x&&x.active&&vh(x.effects,c)};if(r&&e){const U=e;e=(...N)=>{U(...N),m()}}let _=k?new Array(n.length).fill(va):va;const R=U=>{if(!(!(c.flags&1)||!c.dirty&&!U))if(e){const N=c.run();if(i||g||(k?N.some((A,w)=>Ri(A,_[w])):Ri(N,_))){f&&f();const A=nr;nr=c;try{const w=[N,_===va?void 0:k&&_[0]===va?[]:_,p];_=N,a?a(e,3,w):e(...w)}finally{nr=A}}}else c.run()};return l&&l(R),c=new Nv(d),c.scheduler=o?()=>o(R,!1):R,p=U=>ww(U,!1,c),f=c.onStop=()=>{const U=hu.get(c);if(U){if(a)a(U,4);else for(const N of U)N();hu.delete(c)}},e?s?R(!0):_=c.run():o?o(R.bind(null,!0),!0):c.run(),m.pause=c.pause.bind(c),m.resume=c.resume.bind(c),m.stop=m,m}function ni(n,e=1/0,t){if(e<=0||!kt(n)||n.__v_skip||(t=t||new Map,(t.get(n)||0)>=e))return n;if(t.set(n,e),e--,Sn(n))ni(n.value,e,t);else if(Be(n))for(let s=0;s<n.length;s++)ni(n[s],e,t);else if(ko(n)||Gr(n))n.forEach(s=>{ni(s,e,t)});else if(Mv(n)){for(const s in n)ni(n[s],e,t);for(const s of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,s)&&ni(n[s],e,t)}return n}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ql(n,e,t,s){try{return s?n(...s):n()}catch(i){ic(i,e,t)}}function ks(n,e,t,s){if(Je(n)){const i=ql(n,e,t,s);return i&&Ov(i)&&i.catch(r=>{ic(r,e,t)}),i}if(Be(n)){const i=[];for(let r=0;r<n.length;r++)i.push(ks(n[r],e,t,s));return i}}function ic(n,e,t,s=!0){const i=e?e.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||wt;if(e){let l=e.parent;const a=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${t}`;for(;l;){const c=l.ec;if(c){for(let d=0;d<c.length;d++)if(c[d](n,a,u)===!1)return}l=l.parent}if(r){li(),ql(r,null,10,[n,a,u]),ai();return}}Cw(n,t,i,s,o)}function Cw(n,e,t,s=!0,i=!1){if(i)throw n;console.error(n)}const On=[];let Is=-1;const Qr=[];let xi=null,jr=0;const ny=Promise.resolve();let pu=null;function ns(n){const e=pu||ny;return n?e.then(this?n.bind(this):n):e}function Aw(n){let e=Is+1,t=On.length;for(;e<t;){const s=e+t>>>1,i=On[s],r=hl(i);r<n||r===n&&i.flags&2?e=s+1:t=s}return e}function Eh(n){if(!(n.flags&1)){const e=hl(n),t=On[On.length-1];!t||!(n.flags&2)&&e>=hl(t)?On.push(n):On.splice(Aw(e),0,n),n.flags|=1,sy()}}function sy(){pu||(pu=ny.then(ry))}function Ew(n){Be(n)?Qr.push(...n):xi&&n.id===-1?xi.splice(jr+1,0,n):n.flags&1||(Qr.push(n),n.flags|=1),sy()}function bm(n,e,t=Is+1){for(;t<On.length;t++){const s=On[t];if(s&&s.flags&2){if(n&&s.id!==n.uid)continue;On.splice(t,1),t--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function iy(n){if(Qr.length){const e=[...new Set(Qr)].sort((t,s)=>hl(t)-hl(s));if(Qr.length=0,xi){xi.push(...e);return}for(xi=e,jr=0;jr<xi.length;jr++){const t=xi[jr];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}xi=null,jr=0}}const hl=n=>n.id==null?n.flags&2?-1:1/0:n.id;function ry(n){try{for(Is=0;Is<On.length;Is++){const e=On[Is];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),ql(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Is<On.length;Is++){const e=On[Is];e&&(e.flags&=-2)}Is=-1,On.length=0,iy(),pu=null,(On.length||Qr.length)&&ry()}}let dn=null,oy=null;function mu(n){const e=dn;return dn=n,oy=n&&n.type.__scopeId||null,e}function Z(n,e=dn,t){if(!e||n._n)return n;const s=(...i)=>{s._d&&yu(-1);const r=mu(e);let o;try{o=n(...i)}finally{mu(r),s._d&&yu(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function He(n,e){if(dn===null)return n;const t=uc(dn),s=n.dirs||(n.dirs=[]);for(let i=0;i<e.length;i++){let[r,o,l,a=wt]=e[i];r&&(Je(r)&&(r={mounted:r,updated:r}),r.deep&&ni(o),s.push({dir:r,instance:t,value:o,oldValue:void 0,arg:l,modifiers:a}))}return n}function Ji(n,e,t,s){const i=n.dirs,r=e&&e.dirs;for(let o=0;o<i.length;o++){const l=i[o];r&&(l.oldValue=r[o].value);let a=l.dir[s];a&&(li(),ks(a,t,8,[n.el,l,n,e]),ai())}}const ly=Symbol("_vte"),ay=n=>n.__isTeleport,Yo=n=>n&&(n.disabled||n.disabled===""),km=n=>n&&(n.defer||n.defer===""),xm=n=>typeof SVGElement<"u"&&n instanceof SVGElement,_m=n=>typeof MathMLElement=="function"&&n instanceof MathMLElement,Hd=(n,e)=>{const t=n&&n.to;return jt(t)?e?e(t):null:t},uy={name:"Teleport",__isTeleport:!0,process(n,e,t,s,i,r,o,l,a,u){const{mc:c,pc:d,pbc:f,o:{insert:p,querySelector:g,createText:k,createComment:x}}=u,m=Yo(e.props);let{shapeFlag:_,children:R,dynamicChildren:U}=e;if(n==null){const N=e.el=k(""),A=e.anchor=k("");p(N,t,s),p(A,t,s);const w=(G,ue)=>{_&16&&c(R,G,ue,i,r,o,l,a)},M=()=>{const G=e.target=Hd(e.props,g),ue=dy(G,e,k,p);G&&(o!=="svg"&&xm(G)?o="svg":o!=="mathml"&&_m(G)&&(o="mathml"),i&&i.isCE&&(i.ce._teleportTargets||(i.ce._teleportTargets=new Set)).add(G),m||(w(G,ue),Qa(e,!1)))};m&&(w(t,A),Qa(e,!0)),km(e.props)?(e.el.__isMounted=!1,Dn(()=>{M(),delete e.el.__isMounted},r)):M()}else{if(km(e.props)&&n.el.__isMounted===!1){Dn(()=>{uy.process(n,e,t,s,i,r,o,l,a,u)},r);return}e.el=n.el,e.targetStart=n.targetStart;const N=e.anchor=n.anchor,A=e.target=n.target,w=e.targetAnchor=n.targetAnchor,M=Yo(n.props),G=M?t:A,ue=M?N:w;if(o==="svg"||xm(A)?o="svg":(o==="mathml"||_m(A))&&(o="mathml"),U?(f(n.dynamicChildren,U,G,i,r,o,l),Ph(n,e,!0)):a||d(n,e,G,ue,i,r,o,l,!1),m)M?e.props&&n.props&&e.props.to!==n.props.to&&(e.props.to=n.props.to):ya(e,t,N,u,1);else if((e.props&&e.props.to)!==(n.props&&n.props.to)){const ie=e.target=Hd(e.props,g);ie&&ya(e,ie,null,u,0)}else M&&ya(e,A,w,u,1);Qa(e,m)}},remove(n,e,t,{um:s,o:{remove:i}},r){const{shapeFlag:o,children:l,anchor:a,targetStart:u,targetAnchor:c,target:d,props:f}=n;if(d&&(i(u),i(c)),r&&i(a),o&16){const p=r||!Yo(f);for(let g=0;g<l.length;g++){const k=l[g];s(k,e,t,p,!!k.dynamicChildren)}}},move:ya,hydrate:Tw};function ya(n,e,t,{o:{insert:s},m:i},r=2){r===0&&s(n.targetAnchor,e,t);const{el:o,anchor:l,shapeFlag:a,children:u,props:c}=n,d=r===2;if(d&&s(o,e,t),(!d||Yo(c))&&a&16)for(let f=0;f<u.length;f++)i(u[f],e,t,2);d&&s(l,e,t)}function Tw(n,e,t,s,i,r,{o:{nextSibling:o,parentNode:l,querySelector:a,insert:u,createText:c}},d){function f(k,x,m,_){x.anchor=d(o(k),x,l(k),t,s,i,r),x.targetStart=m,x.targetAnchor=_}const p=e.target=Hd(e.props,a),g=Yo(e.props);if(p){const k=p._lpa||p.firstChild;if(e.shapeFlag&16)if(g)f(n,e,k,k&&o(k));else{e.anchor=o(n);let x=k;for(;x;){if(x&&x.nodeType===8){if(x.data==="teleport start anchor")e.targetStart=x;else if(x.data==="teleport anchor"){e.targetAnchor=x,p._lpa=e.targetAnchor&&o(e.targetAnchor);break}}x=o(x)}e.targetAnchor||dy(p,e,c,u),d(k&&o(k),e,p,t,s,i,r)}Qa(e,g)}else g&&e.shapeFlag&16&&f(n,e,n,o(n));return e.anchor&&o(e.anchor)}const cy=uy;function Qa(n,e){const t=n.ctx;if(t&&t.ut){let s,i;for(e?(s=n.el,i=n.anchor):(s=n.targetStart,i=n.targetAnchor);s&&s!==i;)s.nodeType===1&&s.setAttribute("data-v-owner",t.uid),s=s.nextSibling;t.ut()}}function dy(n,e,t,s){const i=e.targetStart=t(""),r=e.targetAnchor=t("");return i[ly]=r,n&&(s(i,n),s(r,n)),r}const ei=Symbol("_leaveCb"),ba=Symbol("_enterCb");function Dw(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Cn(()=>{n.isMounted=!0}),ky(()=>{n.isUnmounting=!0}),n}const Zn=[Function,Array],fy={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Zn,onEnter:Zn,onAfterEnter:Zn,onEnterCancelled:Zn,onBeforeLeave:Zn,onLeave:Zn,onAfterLeave:Zn,onLeaveCancelled:Zn,onBeforeAppear:Zn,onAppear:Zn,onAfterAppear:Zn,onAppearCancelled:Zn},hy=n=>{const e=n.subTree;return e.component?hy(e.component):e},Pw={name:"BaseTransition",props:fy,setup(n,{slots:e}){const t=Oh(),s=Dw();return()=>{const i=e.default&&gy(e.default(),!0);if(!i||!i.length)return;const r=py(i),o=ft(n),{mode:l}=o;if(s.isLeaving)return Wc(r);const a=wm(r);if(!a)return Wc(r);let u=Wd(a,o,s,t,d=>u=d);a.type!==kn&&pl(a,u);let c=t.subTree&&wm(t.subTree);if(c&&c.type!==kn&&!or(c,a)&&hy(t).type!==kn){let d=Wd(c,o,s,t);if(pl(c,d),l==="out-in"&&a.type!==kn)return s.isLeaving=!0,d.afterLeave=()=>{s.isLeaving=!1,t.job.flags&8||t.update(),delete d.afterLeave,c=void 0},Wc(r);l==="in-out"&&a.type!==kn?d.delayLeave=(f,p,g)=>{const k=my(s,c);k[String(c.key)]=c,f[ei]=()=>{p(),f[ei]=void 0,delete u.delayedLeave,c=void 0},u.delayedLeave=()=>{g(),delete u.delayedLeave,c=void 0}}:c=void 0}else c&&(c=void 0);return r}}};function py(n){let e=n[0];if(n.length>1){for(const t of n)if(t.type!==kn){e=t;break}}return e}const Rw=Pw;function my(n,e){const{leavingVNodes:t}=n;let s=t.get(e.type);return s||(s=Object.create(null),t.set(e.type,s)),s}function Wd(n,e,t,s,i){const{appear:r,mode:o,persisted:l=!1,onBeforeEnter:a,onEnter:u,onAfterEnter:c,onEnterCancelled:d,onBeforeLeave:f,onLeave:p,onAfterLeave:g,onLeaveCancelled:k,onBeforeAppear:x,onAppear:m,onAfterAppear:_,onAppearCancelled:R}=e,U=String(n.key),N=my(t,n),A=(G,ue)=>{G&&ks(G,s,9,ue)},w=(G,ue)=>{const ie=ue[1];A(G,ue),Be(G)?G.every(F=>F.length<=1)&&ie():G.length<=1&&ie()},M={mode:o,persisted:l,beforeEnter(G){let ue=a;if(!t.isMounted)if(r)ue=x||a;else return;G[ei]&&G[ei](!0);const ie=N[U];ie&&or(n,ie)&&ie.el[ei]&&ie.el[ei](),A(ue,[G])},enter(G){let ue=u,ie=c,F=d;if(!t.isMounted)if(r)ue=m||u,ie=_||c,F=R||d;else return;let ae=!1;const ee=G[ba]=V=>{ae||(ae=!0,V?A(F,[G]):A(ie,[G]),M.delayedLeave&&M.delayedLeave(),G[ba]=void 0)};ue?w(ue,[G,ee]):ee()},leave(G,ue){const ie=String(n.key);if(G[ba]&&G[ba](!0),t.isUnmounting)return ue();A(f,[G]);let F=!1;const ae=G[ei]=ee=>{F||(F=!0,ue(),ee?A(k,[G]):A(g,[G]),G[ei]=void 0,N[ie]===n&&delete N[ie])};N[ie]=n,p?w(p,[G,ae]):ae()},clone(G){const ue=Wd(G,e,t,s,i);return i&&i(ue),ue}};return M}function Wc(n){if(rc(n))return n=Ii(n),n.children=null,n}function wm(n){if(!rc(n))return ay(n.type)&&n.children?py(n.children):n;if(n.component)return n.component.subTree;const{shapeFlag:e,children:t}=n;if(t){if(e&16)return t[0];if(e&32&&Je(t.default))return t.default()}}function pl(n,e){n.shapeFlag&6&&n.component?(n.transition=e,pl(n.component.subTree,e)):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}function gy(n,e=!1,t){let s=[],i=0;for(let r=0;r<n.length;r++){let o=n[r];const l=t==null?o.key:String(t)+String(o.key!=null?o.key:r);o.type===be?(o.patchFlag&128&&i++,s=s.concat(gy(o.children,e,l))):(e||o.type!==kn)&&s.push(l!=null?Ii(o,{key:l}):o)}if(i>1)for(let r=0;r<s.length;r++)s[r].patchFlag=-2;return s}function vy(n,e){return Je(n)?rn({name:n.name},e,{setup:n}):n}function yy(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}const gu=new WeakMap;function Xo(n,e,t,s,i=!1){if(Be(n)){n.forEach((g,k)=>Xo(g,e&&(Be(e)?e[k]:e),t,s,i));return}if(Yr(s)&&!i){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&Xo(n,e,t,s.component.subTree);return}const r=s.shapeFlag&4?uc(s.component):s.el,o=i?null:r,{i:l,r:a}=n,u=e&&e.r,c=l.refs===wt?l.refs={}:l.refs,d=l.setupState,f=ft(d),p=d===wt?Rv:g=>gt(f,g);if(u!=null&&u!==a){if(Sm(e),jt(u))c[u]=null,p(u)&&(d[u]=null);else if(Sn(u)){u.value=null;const g=e;g.k&&(c[g.k]=null)}}if(Je(a))ql(a,l,12,[o,c]);else{const g=jt(a),k=Sn(a);if(g||k){const x=()=>{if(n.f){const m=g?p(a)?d[a]:c[a]:a.value;if(i)Be(m)&&vh(m,r);else if(Be(m))m.includes(r)||m.push(r);else if(g)c[a]=[r],p(a)&&(d[a]=c[a]);else{const _=[r];a.value=_,n.k&&(c[n.k]=_)}}else g?(c[a]=o,p(a)&&(d[a]=o)):k&&(a.value=o,n.k&&(c[n.k]=o))};if(o){const m=()=>{x(),gu.delete(n)};m.id=-1,gu.set(n,m),Dn(m,t)}else Sm(n),x()}}}function Sm(n){const e=gu.get(n);e&&(e.flags|=8,gu.delete(n))}nc().requestIdleCallback;nc().cancelIdleCallback;const Yr=n=>!!n.type.__asyncLoader,rc=n=>n.type.__isKeepAlive;function Ow(n,e){by(n,"a",e)}function Lw(n,e){by(n,"da",e)}function by(n,e,t=xn){const s=n.__wdc||(n.__wdc=()=>{let i=t;for(;i;){if(i.isDeactivated)return;i=i.parent}return n()});if(oc(e,s,t),t){let i=t.parent;for(;i&&i.parent;)rc(i.parent.vnode)&&Mw(s,e,t,i),i=i.parent}}function Mw(n,e,t,s){const i=oc(e,n,s,!0);xo(()=>{vh(s[e],i)},t)}function oc(n,e,t=xn,s=!1){if(t){const i=t[n]||(t[n]=[]),r=e.__weh||(e.__weh=(...o)=>{li();const l=Gl(t),a=ks(e,t,n,o);return l(),ai(),a});return s?i.unshift(r):i.push(r),r}}const fi=n=>(e,t=xn)=>{(!vl||n==="sp")&&oc(n,(...s)=>e(...s),t)},Iw=fi("bm"),Cn=fi("m"),jw=fi("bu"),Vw=fi("u"),ky=fi("bum"),xo=fi("um"),$w=fi("sp"),Nw=fi("rtg"),Bw=fi("rtc");function Fw(n,e=xn){oc("ec",n,e)}const xy="components";function qd(n,e){return wy(xy,n,!0,e)||n}const _y=Symbol.for("v-ndc");function Un(n){return jt(n)?wy(xy,n,!1)||n:n||_y}function wy(n,e,t=!0,s=!1){const i=dn||xn;if(i){const r=i.type;{const l=P2(r,!1);if(l&&(l===e||l===cs(e)||l===tc(cs(e))))return r}const o=Cm(i[n]||r[n],e)||Cm(i.appContext[n],e);return!o&&s?r:o}}function Cm(n,e){return n&&(n[e]||n[cs(e)]||n[tc(cs(e))])}function Ve(n,e,t,s){let i;const r=t,o=Be(n);if(o||jt(n)){const l=o&&Jr(n);let a=!1,u=!1;l&&(a=!rs(n),u=Mi(n),n=sc(n)),i=new Array(n.length);for(let c=0,d=n.length;c<d;c++)i[c]=e(a?u?fu(an(n[c])):an(n[c]):n[c],c,void 0,r)}else if(typeof n=="number"){i=new Array(n);for(let l=0;l<n;l++)i[l]=e(l+1,l,void 0,r)}else if(kt(n))if(n[Symbol.iterator])i=Array.from(n,(l,a)=>e(l,a,void 0,r));else{const l=Object.keys(n);i=new Array(l.length);for(let a=0,u=l.length;a<u;a++){const c=l[a];i[a]=e(n[c],c,a,r)}}else i=[];return i}function Uw(n,e){for(let t=0;t<e.length;t++){const s=e[t];if(Be(s))for(let i=0;i<s.length;i++)n[s[i].name]=s[i].fn;else s&&(n[s.name]=s.key?(...i)=>{const r=s.fn(...i);return r&&(r.key=s.key),r}:s.fn)}return n}function ht(n,e,t={},s,i){if(dn.ce||dn.parent&&Yr(dn.parent)&&dn.parent.ce){const u=Object.keys(t).length>0;return e!=="default"&&(t.name=e),v(),we(be,null,[S("slot",t,s&&s())],u?-2:64)}let r=n[e];r&&r._c&&(r._d=!1),v();const o=r&&Sy(r(t)),l=t.key||o&&o.key,a=we(be,{key:(l&&!bs(l)?l:`_${e}`)+(!o&&s?"_fb":"")},o||(s?s():[]),o&&n._===1?64:-2);return!i&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),r&&r._c&&(r._d=!0),a}function Sy(n){return n.some(e=>gl(e)?!(e.type===kn||e.type===be&&!Sy(e.children)):!0)?n:null}const Gd=n=>n?zy(n)?uc(n):Gd(n.parent):null,Zo=rn(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>Gd(n.parent),$root:n=>Gd(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>Ay(n),$forceUpdate:n=>n.f||(n.f=()=>{Eh(n.update)}),$nextTick:n=>n.n||(n.n=ns.bind(n.proxy)),$watch:n=>d2.bind(n)}),qc=(n,e)=>n!==wt&&!n.__isScriptSetup&&gt(n,e),zw={get({_:n},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:s,data:i,props:r,accessCache:o,type:l,appContext:a}=n;let u;if(e[0]!=="$"){const p=o[e];if(p!==void 0)switch(p){case 1:return s[e];case 2:return i[e];case 4:return t[e];case 3:return r[e]}else{if(qc(s,e))return o[e]=1,s[e];if(i!==wt&&gt(i,e))return o[e]=2,i[e];if((u=n.propsOptions[0])&&gt(u,e))return o[e]=3,r[e];if(t!==wt&&gt(t,e))return o[e]=4,t[e];Kd&&(o[e]=0)}}const c=Zo[e];let d,f;if(c)return e==="$attrs"&&yn(n.attrs,"get",""),c(n);if((d=l.__cssModules)&&(d=d[e]))return d;if(t!==wt&&gt(t,e))return o[e]=4,t[e];if(f=a.config.globalProperties,gt(f,e))return f[e]},set({_:n},e,t){const{data:s,setupState:i,ctx:r}=n;return qc(i,e)?(i[e]=t,!0):s!==wt&&gt(s,e)?(s[e]=t,!0):gt(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(r[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:s,appContext:i,propsOptions:r,type:o}},l){let a,u;return!!(t[l]||n!==wt&&l[0]!=="$"&&gt(n,l)||qc(e,l)||(a=r[0])&&gt(a,l)||gt(s,l)||gt(Zo,l)||gt(i.config.globalProperties,l)||(u=o.__cssModules)&&u[l])},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:gt(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};function Hw(){return Ww().slots}function Ww(n){const e=Oh();return e.setupContext||(e.setupContext=Wy(e))}function Am(n){return Be(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}let Kd=!0;function qw(n){const e=Ay(n),t=n.proxy,s=n.ctx;Kd=!1,e.beforeCreate&&Em(e.beforeCreate,n,"bc");const{data:i,computed:r,methods:o,watch:l,provide:a,inject:u,created:c,beforeMount:d,mounted:f,beforeUpdate:p,updated:g,activated:k,deactivated:x,beforeDestroy:m,beforeUnmount:_,destroyed:R,unmounted:U,render:N,renderTracked:A,renderTriggered:w,errorCaptured:M,serverPrefetch:G,expose:ue,inheritAttrs:ie,components:F,directives:ae,filters:ee}=e;if(u&&Gw(u,s,null),o)for(const X in o){const de=o[X];Je(de)&&(s[X]=de.bind(t))}if(i){const X=i.call(t,t);kt(X)&&(n.data=gs(X))}if(Kd=!0,r)for(const X in r){const de=r[X],Ce=Je(de)?de.bind(t,t):Je(de.get)?de.get.bind(t,t):Us,Te=!Je(de)&&Je(de.set)?de.set.bind(t):Us,$e=z({get:Ce,set:Te});Object.defineProperty(s,X,{enumerable:!0,configurable:!0,get:()=>$e.value,set:me=>$e.value=me})}if(l)for(const X in l)Cy(l[X],s,t,X);if(a){const X=Je(a)?a.call(t):a;Reflect.ownKeys(X).forEach(de=>{el(de,X[de])})}c&&Em(c,n,"c");function J(X,de){Be(de)?de.forEach(Ce=>X(Ce.bind(t))):de&&X(de.bind(t))}if(J(Iw,d),J(Cn,f),J(jw,p),J(Vw,g),J(Ow,k),J(Lw,x),J(Fw,M),J(Bw,A),J(Nw,w),J(ky,_),J(xo,U),J($w,G),Be(ue))if(ue.length){const X=n.exposed||(n.exposed={});ue.forEach(de=>{Object.defineProperty(X,de,{get:()=>t[de],set:Ce=>t[de]=Ce,enumerable:!0})})}else n.exposed||(n.exposed={});N&&n.render===Us&&(n.render=N),ie!=null&&(n.inheritAttrs=ie),F&&(n.components=F),ae&&(n.directives=ae),G&&yy(n)}function Gw(n,e,t=Us){Be(n)&&(n=Jd(n));for(const s in n){const i=n[s];let r;kt(i)?"default"in i?r=os(i.from||s,i.default,!0):r=os(i.from||s):r=os(i),Sn(r)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):e[s]=r}}function Em(n,e,t){ks(Be(n)?n.map(s=>s.bind(e.proxy)):n.bind(e.proxy),e,t)}function Cy(n,e,t,s){let i=s.includes(".")?$y(t,s):()=>t[s];if(jt(n)){const r=e[n];Je(r)&&je(i,r)}else if(Je(n))je(i,n.bind(t));else if(kt(n))if(Be(n))n.forEach(r=>Cy(r,e,t,s));else{const r=Je(n.handler)?n.handler.bind(t):e[n.handler];Je(r)&&je(i,r,n)}}function Ay(n){const e=n.type,{mixins:t,extends:s}=e,{mixins:i,optionsCache:r,config:{optionMergeStrategies:o}}=n.appContext,l=r.get(e);let a;return l?a=l:!i.length&&!t&&!s?a=e:(a={},i.length&&i.forEach(u=>vu(a,u,o,!0)),vu(a,e,o)),kt(e)&&r.set(e,a),a}function vu(n,e,t,s=!1){const{mixins:i,extends:r}=e;r&&vu(n,r,t,!0),i&&i.forEach(o=>vu(n,o,t,!0));for(const o in e)if(!(s&&o==="expose")){const l=Kw[o]||t&&t[o];n[o]=l?l(n[o],e[o]):e[o]}return n}const Kw={data:Tm,props:Dm,emits:Dm,methods:Uo,computed:Uo,beforeCreate:Tn,created:Tn,beforeMount:Tn,mounted:Tn,beforeUpdate:Tn,updated:Tn,beforeDestroy:Tn,beforeUnmount:Tn,destroyed:Tn,unmounted:Tn,activated:Tn,deactivated:Tn,errorCaptured:Tn,serverPrefetch:Tn,components:Uo,directives:Uo,watch:Qw,provide:Tm,inject:Jw};function Tm(n,e){return e?n?function(){return rn(Je(n)?n.call(this,this):n,Je(e)?e.call(this,this):e)}:e:n}function Jw(n,e){return Uo(Jd(n),Jd(e))}function Jd(n){if(Be(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function Tn(n,e){return n?[...new Set([].concat(n,e))]:e}function Uo(n,e){return n?rn(Object.create(null),n,e):e}function Dm(n,e){return n?Be(n)&&Be(e)?[...new Set([...n,...e])]:rn(Object.create(null),Am(n),Am(e??{})):e}function Qw(n,e){if(!n)return e;if(!e)return n;const t=rn(Object.create(null),n);for(const s in e)t[s]=Tn(n[s],e[s]);return t}function Ey(){return{app:null,config:{isNativeTag:Rv,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Yw=0;function Xw(n,e){return function(s,i=null){Je(s)||(s=rn({},s)),i!=null&&!kt(i)&&(i=null);const r=Ey(),o=new WeakSet,l=[];let a=!1;const u=r.app={_uid:Yw++,_component:s,_props:i,_container:null,_context:r,_instance:null,version:O2,get config(){return r.config},set config(c){},use(c,...d){return o.has(c)||(c&&Je(c.install)?(o.add(c),c.install(u,...d)):Je(c)&&(o.add(c),c(u,...d))),u},mixin(c){return r.mixins.includes(c)||r.mixins.push(c),u},component(c,d){return d?(r.components[c]=d,u):r.components[c]},directive(c,d){return d?(r.directives[c]=d,u):r.directives[c]},mount(c,d,f){if(!a){const p=u._ceVNode||S(s,i);return p.appContext=r,f===!0?f="svg":f===!1&&(f=void 0),n(p,c,f),a=!0,u._container=c,c.__vue_app__=u,uc(p.component)}},onUnmount(c){l.push(c)},unmount(){a&&(ks(l,u._instance,16),n(null,u._container),delete u._container.__vue_app__)},provide(c,d){return r.provides[c]=d,u},runWithContext(c){const d=Xr;Xr=u;try{return c()}finally{Xr=d}}};return u}}let Xr=null;function el(n,e){if(xn){let t=xn.provides;const s=xn.parent&&xn.parent.provides;s===t&&(t=xn.provides=Object.create(s)),t[n]=e}}function os(n,e,t=!1){const s=Oh();if(s||Xr){let i=Xr?Xr._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(i&&n in i)return i[n];if(arguments.length>1)return t&&Je(e)?e.call(s&&s.proxy):e}}const Ty={},Dy=()=>Object.create(Ty),Py=n=>Object.getPrototypeOf(n)===Ty;function Zw(n,e,t,s=!1){const i={},r=Dy();n.propsDefaults=Object.create(null),Ry(n,e,i,r);for(const o in n.propsOptions[0])o in i||(i[o]=void 0);t?n.props=s?i:Zv(i):n.type.props?n.props=i:n.props=r,n.attrs=r}function e2(n,e,t,s){const{props:i,attrs:r,vnode:{patchFlag:o}}=n,l=ft(i),[a]=n.propsOptions;let u=!1;if((s||o>0)&&!(o&16)){if(o&8){const c=n.vnode.dynamicProps;for(let d=0;d<c.length;d++){let f=c[d];if(lc(n.emitsOptions,f))continue;const p=e[f];if(a)if(gt(r,f))p!==r[f]&&(r[f]=p,u=!0);else{const g=cs(f);i[g]=Qd(a,l,g,p,n,!1)}else p!==r[f]&&(r[f]=p,u=!0)}}}else{Ry(n,e,i,r)&&(u=!0);let c;for(const d in l)(!e||!gt(e,d)&&((c=Er(d))===d||!gt(e,c)))&&(a?t&&(t[d]!==void 0||t[c]!==void 0)&&(i[d]=Qd(a,l,d,void 0,n,!0)):delete i[d]);if(r!==l)for(const d in r)(!e||!gt(e,d))&&(delete r[d],u=!0)}u&&ti(n.attrs,"set","")}function Ry(n,e,t,s){const[i,r]=n.propsOptions;let o=!1,l;if(e)for(let a in e){if(Ko(a))continue;const u=e[a];let c;i&&gt(i,c=cs(a))?!r||!r.includes(c)?t[c]=u:(l||(l={}))[c]=u:lc(n.emitsOptions,a)||(!(a in s)||u!==s[a])&&(s[a]=u,o=!0)}if(r){const a=ft(t),u=l||wt;for(let c=0;c<r.length;c++){const d=r[c];t[d]=Qd(i,a,d,u[d],n,!gt(u,d))}}return o}function Qd(n,e,t,s,i,r){const o=n[t];if(o!=null){const l=gt(o,"default");if(l&&s===void 0){const a=o.default;if(o.type!==Function&&!o.skipFactory&&Je(a)){const{propsDefaults:u}=i;if(t in u)s=u[t];else{const c=Gl(i);s=u[t]=a.call(null,e),c()}}else s=a;i.ce&&i.ce._setProp(t,s)}o[0]&&(r&&!l?s=!1:o[1]&&(s===""||s===Er(t))&&(s=!0))}return s}const t2=new WeakMap;function Oy(n,e,t=!1){const s=t?t2:e.propsCache,i=s.get(n);if(i)return i;const r=n.props,o={},l=[];let a=!1;if(!Je(n)){const c=d=>{a=!0;const[f,p]=Oy(d,e,!0);rn(o,f),p&&l.push(...p)};!t&&e.mixins.length&&e.mixins.forEach(c),n.extends&&c(n.extends),n.mixins&&n.mixins.forEach(c)}if(!r&&!a)return kt(n)&&s.set(n,qr),qr;if(Be(r))for(let c=0;c<r.length;c++){const d=cs(r[c]);Pm(d)&&(o[d]=wt)}else if(r)for(const c in r){const d=cs(c);if(Pm(d)){const f=r[c],p=o[d]=Be(f)||Je(f)?{type:f}:rn({},f),g=p.type;let k=!1,x=!0;if(Be(g))for(let m=0;m<g.length;++m){const _=g[m],R=Je(_)&&_.name;if(R==="Boolean"){k=!0;break}else R==="String"&&(x=!1)}else k=Je(g)&&g.name==="Boolean";p[0]=k,p[1]=x,(k||gt(p,"default"))&&l.push(d)}}const u=[o,l];return kt(n)&&s.set(n,u),u}function Pm(n){return n[0]!=="$"&&!Ko(n)}const Th=n=>n==="_"||n==="_ctx"||n==="$stable",Dh=n=>Be(n)?n.map(js):[js(n)],n2=(n,e,t)=>{if(e._n)return e;const s=Z((...i)=>Dh(e(...i)),t);return s._c=!1,s},Ly=(n,e,t)=>{const s=n._ctx;for(const i in n){if(Th(i))continue;const r=n[i];if(Je(r))e[i]=n2(i,r,s);else if(r!=null){const o=Dh(r);e[i]=()=>o}}},My=(n,e)=>{const t=Dh(e);n.slots.default=()=>t},Iy=(n,e,t)=>{for(const s in e)(t||!Th(s))&&(n[s]=e[s])},s2=(n,e,t)=>{const s=n.slots=Dy();if(n.vnode.shapeFlag&32){const i=e._;i?(Iy(s,e,t),t&&Iv(s,"_",i,!0)):Ly(e,s)}else e&&My(n,e)},i2=(n,e,t)=>{const{vnode:s,slots:i}=n;let r=!0,o=wt;if(s.shapeFlag&32){const l=e._;l?t&&l===1?r=!1:Iy(i,e,t):(r=!e.$stable,Ly(e,i)),o=e}else e&&(My(n,e),o={default:1});if(r)for(const l in i)!Th(l)&&o[l]==null&&delete i[l]},Dn=b2;function r2(n){return o2(n)}function o2(n,e){const t=nc();t.__VUE__=!0;const{insert:s,remove:i,patchProp:r,createElement:o,createText:l,createComment:a,setText:u,setElementText:c,parentNode:d,nextSibling:f,setScopeId:p=Us,insertStaticContent:g}=n,k=(D,$,K,oe=null,ne=null,se=null,xe=void 0,L=null,j=!!$.dynamicChildren)=>{if(D===$)return;D&&!or(D,$)&&(oe=le(D),me(D,ne,se,!0),D=null),$.patchFlag===-2&&(j=!1,$.dynamicChildren=null);const{type:B,ref:pe,shapeFlag:ve}=$;switch(B){case ac:x(D,$,K,oe);break;case kn:m(D,$,K,oe);break;case Ya:D==null&&_($,K,oe,xe);break;case be:F(D,$,K,oe,ne,se,xe,L,j);break;default:ve&1?N(D,$,K,oe,ne,se,xe,L,j):ve&6?ae(D,$,K,oe,ne,se,xe,L,j):(ve&64||ve&128)&&B.process(D,$,K,oe,ne,se,xe,L,j,E)}pe!=null&&ne?Xo(pe,D&&D.ref,se,$||D,!$):pe==null&&D&&D.ref!=null&&Xo(D.ref,null,se,D,!0)},x=(D,$,K,oe)=>{if(D==null)s($.el=l($.children),K,oe);else{const ne=$.el=D.el;$.children!==D.children&&u(ne,$.children)}},m=(D,$,K,oe)=>{D==null?s($.el=a($.children||""),K,oe):$.el=D.el},_=(D,$,K,oe)=>{[D.el,D.anchor]=g(D.children,$,K,oe,D.el,D.anchor)},R=({el:D,anchor:$},K,oe)=>{let ne;for(;D&&D!==$;)ne=f(D),s(D,K,oe),D=ne;s($,K,oe)},U=({el:D,anchor:$})=>{let K;for(;D&&D!==$;)K=f(D),i(D),D=K;i($)},N=(D,$,K,oe,ne,se,xe,L,j)=>{$.type==="svg"?xe="svg":$.type==="math"&&(xe="mathml"),D==null?A($,K,oe,ne,se,xe,L,j):G(D,$,ne,se,xe,L,j)},A=(D,$,K,oe,ne,se,xe,L)=>{let j,B;const{props:pe,shapeFlag:ve,transition:Ae,dirs:Me}=D;if(j=D.el=o(D.type,se,pe&&pe.is,pe),ve&8?c(j,D.children):ve&16&&M(D.children,j,null,oe,ne,Gc(D,se),xe,L),Me&&Ji(D,null,oe,"created"),w(j,D,D.scopeId,xe,oe),pe){for(const Xe in pe)Xe!=="value"&&!Ko(Xe)&&r(j,Xe,null,pe[Xe],se,oe);"value"in pe&&r(j,"value",null,pe.value,se),(B=pe.onVnodeBeforeMount)&&Ts(B,oe,D)}Me&&Ji(D,null,oe,"beforeMount");const ze=l2(ne,Ae);ze&&Ae.beforeEnter(j),s(j,$,K),((B=pe&&pe.onVnodeMounted)||ze||Me)&&Dn(()=>{B&&Ts(B,oe,D),ze&&Ae.enter(j),Me&&Ji(D,null,oe,"mounted")},ne)},w=(D,$,K,oe,ne)=>{if(K&&p(D,K),oe)for(let se=0;se<oe.length;se++)p(D,oe[se]);if(ne){let se=ne.subTree;if($===se||By(se.type)&&(se.ssContent===$||se.ssFallback===$)){const xe=ne.vnode;w(D,xe,xe.scopeId,xe.slotScopeIds,ne.parent)}}},M=(D,$,K,oe,ne,se,xe,L,j=0)=>{for(let B=j;B<D.length;B++){const pe=D[B]=L?_i(D[B]):js(D[B]);k(null,pe,$,K,oe,ne,se,xe,L)}},G=(D,$,K,oe,ne,se,xe)=>{const L=$.el=D.el;let{patchFlag:j,dynamicChildren:B,dirs:pe}=$;j|=D.patchFlag&16;const ve=D.props||wt,Ae=$.props||wt;let Me;if(K&&Qi(K,!1),(Me=Ae.onVnodeBeforeUpdate)&&Ts(Me,K,$,D),pe&&Ji($,D,K,"beforeUpdate"),K&&Qi(K,!0),(ve.innerHTML&&Ae.innerHTML==null||ve.textContent&&Ae.textContent==null)&&c(L,""),B?ue(D.dynamicChildren,B,L,K,oe,Gc($,ne),se):xe||de(D,$,L,null,K,oe,Gc($,ne),se,!1),j>0){if(j&16)ie(L,ve,Ae,K,ne);else if(j&2&&ve.class!==Ae.class&&r(L,"class",null,Ae.class,ne),j&4&&r(L,"style",ve.style,Ae.style,ne),j&8){const ze=$.dynamicProps;for(let Xe=0;Xe<ze.length;Xe++){const ye=ze[Xe],vt=ve[ye],Lt=Ae[ye];(Lt!==vt||ye==="value")&&r(L,ye,vt,Lt,ne,K)}}j&1&&D.children!==$.children&&c(L,$.children)}else!xe&&B==null&&ie(L,ve,Ae,K,ne);((Me=Ae.onVnodeUpdated)||pe)&&Dn(()=>{Me&&Ts(Me,K,$,D),pe&&Ji($,D,K,"updated")},oe)},ue=(D,$,K,oe,ne,se,xe)=>{for(let L=0;L<$.length;L++){const j=D[L],B=$[L],pe=j.el&&(j.type===be||!or(j,B)||j.shapeFlag&198)?d(j.el):K;k(j,B,pe,null,oe,ne,se,xe,!0)}},ie=(D,$,K,oe,ne)=>{if($!==K){if($!==wt)for(const se in $)!Ko(se)&&!(se in K)&&r(D,se,$[se],null,ne,oe);for(const se in K){if(Ko(se))continue;const xe=K[se],L=$[se];xe!==L&&se!=="value"&&r(D,se,L,xe,ne,oe)}"value"in K&&r(D,"value",$.value,K.value,ne)}},F=(D,$,K,oe,ne,se,xe,L,j)=>{const B=$.el=D?D.el:l(""),pe=$.anchor=D?D.anchor:l("");let{patchFlag:ve,dynamicChildren:Ae,slotScopeIds:Me}=$;Me&&(L=L?L.concat(Me):Me),D==null?(s(B,K,oe),s(pe,K,oe),M($.children||[],K,pe,ne,se,xe,L,j)):ve>0&&ve&64&&Ae&&D.dynamicChildren?(ue(D.dynamicChildren,Ae,K,ne,se,xe,L),($.key!=null||ne&&$===ne.subTree)&&Ph(D,$,!0)):de(D,$,K,pe,ne,se,xe,L,j)},ae=(D,$,K,oe,ne,se,xe,L,j)=>{$.slotScopeIds=L,D==null?$.shapeFlag&512?ne.ctx.activate($,K,oe,xe,j):ee($,K,oe,ne,se,xe,j):V(D,$,j)},ee=(D,$,K,oe,ne,se,xe)=>{const L=D.component=A2(D,oe,ne);if(rc(D)&&(L.ctx.renderer=E),E2(L,!1,xe),L.asyncDep){if(ne&&ne.registerDep(L,J,xe),!D.el){const j=L.subTree=S(kn);m(null,j,$,K),D.placeholder=j.el}}else J(L,D,$,K,ne,se,xe)},V=(D,$,K)=>{const oe=$.component=D.component;if(v2(D,$,K))if(oe.asyncDep&&!oe.asyncResolved){X(oe,$,K);return}else oe.next=$,oe.update();else $.el=D.el,oe.vnode=$},J=(D,$,K,oe,ne,se,xe)=>{const L=()=>{if(D.isMounted){let{next:ve,bu:Ae,u:Me,parent:ze,vnode:Xe}=D;{const Gt=jy(D);if(Gt){ve&&(ve.el=Xe.el,X(D,ve,xe)),Gt.asyncDep.then(()=>{D.isUnmounted||L()});return}}let ye=ve,vt;Qi(D,!1),ve?(ve.el=Xe.el,X(D,ve,xe)):ve=Xe,Ae&&Ja(Ae),(vt=ve.props&&ve.props.onVnodeBeforeUpdate)&&Ts(vt,ze,ve,Xe),Qi(D,!0);const Lt=Om(D),$t=D.subTree;D.subTree=Lt,k($t,Lt,d($t.el),le($t),D,ne,se),ve.el=Lt.el,ye===null&&y2(D,Lt.el),Me&&Dn(Me,ne),(vt=ve.props&&ve.props.onVnodeUpdated)&&Dn(()=>Ts(vt,ze,ve,Xe),ne)}else{let ve;const{el:Ae,props:Me}=$,{bm:ze,m:Xe,parent:ye,root:vt,type:Lt}=D,$t=Yr($);Qi(D,!1),ze&&Ja(ze),!$t&&(ve=Me&&Me.onVnodeBeforeMount)&&Ts(ve,ye,$),Qi(D,!0);{vt.ce&&vt.ce._def.shadowRoot!==!1&&vt.ce._injectChildStyle(Lt);const Gt=D.subTree=Om(D);k(null,Gt,K,oe,D,ne,se),$.el=Gt.el}if(Xe&&Dn(Xe,ne),!$t&&(ve=Me&&Me.onVnodeMounted)){const Gt=$;Dn(()=>Ts(ve,ye,Gt),ne)}($.shapeFlag&256||ye&&Yr(ye.vnode)&&ye.vnode.shapeFlag&256)&&D.a&&Dn(D.a,ne),D.isMounted=!0,$=K=oe=null}};D.scope.on();const j=D.effect=new Nv(L);D.scope.off();const B=D.update=j.run.bind(j),pe=D.job=j.runIfDirty.bind(j);pe.i=D,pe.id=D.uid,j.scheduler=()=>Eh(pe),Qi(D,!0),B()},X=(D,$,K)=>{$.component=D;const oe=D.vnode.props;D.vnode=$,D.next=null,e2(D,$.props,oe,K),i2(D,$.children,K),li(),bm(D),ai()},de=(D,$,K,oe,ne,se,xe,L,j=!1)=>{const B=D&&D.children,pe=D?D.shapeFlag:0,ve=$.children,{patchFlag:Ae,shapeFlag:Me}=$;if(Ae>0){if(Ae&128){Te(B,ve,K,oe,ne,se,xe,L,j);return}else if(Ae&256){Ce(B,ve,K,oe,ne,se,xe,L,j);return}}Me&8?(pe&16&&ot(B,ne,se),ve!==B&&c(K,ve)):pe&16?Me&16?Te(B,ve,K,oe,ne,se,xe,L,j):ot(B,ne,se,!0):(pe&8&&c(K,""),Me&16&&M(ve,K,oe,ne,se,xe,L,j))},Ce=(D,$,K,oe,ne,se,xe,L,j)=>{D=D||qr,$=$||qr;const B=D.length,pe=$.length,ve=Math.min(B,pe);let Ae;for(Ae=0;Ae<ve;Ae++){const Me=$[Ae]=j?_i($[Ae]):js($[Ae]);k(D[Ae],Me,K,null,ne,se,xe,L,j)}B>pe?ot(D,ne,se,!0,!1,ve):M($,K,oe,ne,se,xe,L,j,ve)},Te=(D,$,K,oe,ne,se,xe,L,j)=>{let B=0;const pe=$.length;let ve=D.length-1,Ae=pe-1;for(;B<=ve&&B<=Ae;){const Me=D[B],ze=$[B]=j?_i($[B]):js($[B]);if(or(Me,ze))k(Me,ze,K,null,ne,se,xe,L,j);else break;B++}for(;B<=ve&&B<=Ae;){const Me=D[ve],ze=$[Ae]=j?_i($[Ae]):js($[Ae]);if(or(Me,ze))k(Me,ze,K,null,ne,se,xe,L,j);else break;ve--,Ae--}if(B>ve){if(B<=Ae){const Me=Ae+1,ze=Me<pe?$[Me].el:oe;for(;B<=Ae;)k(null,$[B]=j?_i($[B]):js($[B]),K,ze,ne,se,xe,L,j),B++}}else if(B>Ae)for(;B<=ve;)me(D[B],ne,se,!0),B++;else{const Me=B,ze=B,Xe=new Map;for(B=ze;B<=Ae;B++){const Ct=$[B]=j?_i($[B]):js($[B]);Ct.key!=null&&Xe.set(Ct.key,B)}let ye,vt=0;const Lt=Ae-ze+1;let $t=!1,Gt=0;const St=new Array(Lt);for(B=0;B<Lt;B++)St[B]=0;for(B=Me;B<=ve;B++){const Ct=D[B];if(vt>=Lt){me(Ct,ne,se,!0);continue}let ct;if(Ct.key!=null)ct=Xe.get(Ct.key);else for(ye=ze;ye<=Ae;ye++)if(St[ye-ze]===0&&or(Ct,$[ye])){ct=ye;break}ct===void 0?me(Ct,ne,se,!0):(St[ct-ze]=B+1,ct>=Gt?Gt=ct:$t=!0,k(Ct,$[ct],K,null,ne,se,xe,L,j),vt++)}const on=$t?a2(St):qr;for(ye=on.length-1,B=Lt-1;B>=0;B--){const Ct=ze+B,ct=$[Ct],tt=$[Ct+1],st=Ct+1<pe?tt.el||tt.placeholder:oe;St[B]===0?k(null,ct,K,st,ne,se,xe,L,j):$t&&(ye<0||B!==on[ye]?$e(ct,K,st,2):ye--)}}},$e=(D,$,K,oe,ne=null)=>{const{el:se,type:xe,transition:L,children:j,shapeFlag:B}=D;if(B&6){$e(D.component.subTree,$,K,oe);return}if(B&128){D.suspense.move($,K,oe);return}if(B&64){xe.move(D,$,K,E);return}if(xe===be){s(se,$,K);for(let ve=0;ve<j.length;ve++)$e(j[ve],$,K,oe);s(D.anchor,$,K);return}if(xe===Ya){R(D,$,K);return}if(oe!==2&&B&1&&L)if(oe===0)L.beforeEnter(se),s(se,$,K),Dn(()=>L.enter(se),ne);else{const{leave:ve,delayLeave:Ae,afterLeave:Me}=L,ze=()=>{D.ctx.isUnmounted?i(se):s(se,$,K)},Xe=()=>{se._isLeaving&&se[ei](!0),ve(se,()=>{ze(),Me&&Me()})};Ae?Ae(se,ze,Xe):Xe()}else s(se,$,K)},me=(D,$,K,oe=!1,ne=!1)=>{const{type:se,props:xe,ref:L,children:j,dynamicChildren:B,shapeFlag:pe,patchFlag:ve,dirs:Ae,cacheIndex:Me}=D;if(ve===-2&&(ne=!1),L!=null&&(li(),Xo(L,null,K,D,!0),ai()),Me!=null&&($.renderCache[Me]=void 0),pe&256){$.ctx.deactivate(D);return}const ze=pe&1&&Ae,Xe=!Yr(D);let ye;if(Xe&&(ye=xe&&xe.onVnodeBeforeUnmount)&&Ts(ye,$,D),pe&6)pt(D.component,K,oe);else{if(pe&128){D.suspense.unmount(K,oe);return}ze&&Ji(D,null,$,"beforeUnmount"),pe&64?D.type.remove(D,$,K,E,oe):B&&!B.hasOnce&&(se!==be||ve>0&&ve&64)?ot(B,$,K,!1,!0):(se===be&&ve&384||!ne&&pe&16)&&ot(j,$,K),oe&&qe(D)}(Xe&&(ye=xe&&xe.onVnodeUnmounted)||ze)&&Dn(()=>{ye&&Ts(ye,$,D),ze&&Ji(D,null,$,"unmounted")},K)},qe=D=>{const{type:$,el:K,anchor:oe,transition:ne}=D;if($===be){rt(K,oe);return}if($===Ya){U(D);return}const se=()=>{i(K),ne&&!ne.persisted&&ne.afterLeave&&ne.afterLeave()};if(D.shapeFlag&1&&ne&&!ne.persisted){const{leave:xe,delayLeave:L}=ne,j=()=>xe(K,se);L?L(D.el,se,j):j()}else se()},rt=(D,$)=>{let K;for(;D!==$;)K=f(D),i(D),D=K;i($)},pt=(D,$,K)=>{const{bum:oe,scope:ne,job:se,subTree:xe,um:L,m:j,a:B}=D;Rm(j),Rm(B),oe&&Ja(oe),ne.stop(),se&&(se.flags|=8,me(xe,D,$,K)),L&&Dn(L,$),Dn(()=>{D.isUnmounted=!0},$)},ot=(D,$,K,oe=!1,ne=!1,se=0)=>{for(let xe=se;xe<D.length;xe++)me(D[xe],$,K,oe,ne)},le=D=>{if(D.shapeFlag&6)return le(D.component.subTree);if(D.shapeFlag&128)return D.suspense.next();const $=f(D.anchor||D.el),K=$&&$[ly];return K?f(K):$};let te=!1;const W=(D,$,K)=>{D==null?$._vnode&&me($._vnode,null,null,!0):k($._vnode||null,D,$,null,null,null,K),$._vnode=D,te||(te=!0,bm(),iy(),te=!1)},E={p:k,um:me,m:$e,r:qe,mt:ee,mc:M,pc:de,pbc:ue,n:le,o:n};return{render:W,hydrate:void 0,createApp:Xw(W)}}function Gc({type:n,props:e},t){return t==="svg"&&n==="foreignObject"||t==="mathml"&&n==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function Qi({effect:n,job:e},t){t?(n.flags|=32,e.flags|=4):(n.flags&=-33,e.flags&=-5)}function l2(n,e){return(!n||n&&!n.pendingBranch)&&e&&!e.persisted}function Ph(n,e,t=!1){const s=n.children,i=e.children;if(Be(s)&&Be(i))for(let r=0;r<s.length;r++){const o=s[r];let l=i[r];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=i[r]=_i(i[r]),l.el=o.el),!t&&l.patchFlag!==-2&&Ph(o,l)),l.type===ac&&l.patchFlag!==-1&&(l.el=o.el),l.type===kn&&!l.el&&(l.el=o.el)}}function a2(n){const e=n.slice(),t=[0];let s,i,r,o,l;const a=n.length;for(s=0;s<a;s++){const u=n[s];if(u!==0){if(i=t[t.length-1],n[i]<u){e[s]=i,t.push(s);continue}for(r=0,o=t.length-1;r<o;)l=r+o>>1,n[t[l]]<u?r=l+1:o=l;u<n[t[r]]&&(r>0&&(e[s]=t[r-1]),t[r]=s)}}for(r=t.length,o=t[r-1];r-- >0;)t[r]=o,o=e[o];return t}function jy(n){const e=n.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:jy(e)}function Rm(n){if(n)for(let e=0;e<n.length;e++)n[e].flags|=8}const u2=Symbol.for("v-scx"),c2=()=>os(u2);function je(n,e,t){return Vy(n,e,t)}function Vy(n,e,t=wt){const{immediate:s,deep:i,flush:r,once:o}=t,l=rn({},t),a=e&&s||!e&&r!=="post";let u;if(vl){if(r==="sync"){const p=c2();u=p.__watcherHandles||(p.__watcherHandles=[])}else if(!a){const p=()=>{};return p.stop=Us,p.resume=Us,p.pause=Us,p}}const c=xn;l.call=(p,g,k)=>ks(p,c,g,k);let d=!1;r==="post"?l.scheduler=p=>{Dn(p,c&&c.suspense)}:r!=="sync"&&(d=!0,l.scheduler=(p,g)=>{g?p():Eh(p)}),l.augmentJob=p=>{e&&(p.flags|=4),d&&(p.flags|=2,c&&(p.id=c.uid,p.i=c))};const f=Sw(n,e,l);return vl&&(u?u.push(f):a&&f()),f}function d2(n,e,t){const s=this.proxy,i=jt(n)?n.includes(".")?$y(s,n):()=>s[n]:n.bind(s,s);let r;Je(e)?r=e:(r=e.handler,t=e);const o=Gl(this),l=Vy(i,r.bind(s),t);return o(),l}function $y(n,e){const t=e.split(".");return()=>{let s=n;for(let i=0;i<t.length&&s;i++)s=s[t[i]];return s}}const f2=(n,e)=>e==="modelValue"||e==="model-value"?n.modelModifiers:n[`${e}Modifiers`]||n[`${cs(e)}Modifiers`]||n[`${Er(e)}Modifiers`];function h2(n,e,...t){if(n.isUnmounted)return;const s=n.vnode.props||wt;let i=t;const r=e.startsWith("update:"),o=r&&f2(s,e.slice(7));o&&(o.trim&&(i=t.map(c=>jt(c)?c.trim():c)),o.number&&(i=t.map(du)));let l,a=s[l=Bc(e)]||s[l=Bc(cs(e))];!a&&r&&(a=s[l=Bc(Er(e))]),a&&ks(a,n,6,i);const u=s[l+"Once"];if(u){if(!n.emitted)n.emitted={};else if(n.emitted[l])return;n.emitted[l]=!0,ks(u,n,6,i)}}const p2=new WeakMap;function Ny(n,e,t=!1){const s=t?p2:e.emitsCache,i=s.get(n);if(i!==void 0)return i;const r=n.emits;let o={},l=!1;if(!Je(n)){const a=u=>{const c=Ny(u,e,!0);c&&(l=!0,rn(o,c))};!t&&e.mixins.length&&e.mixins.forEach(a),n.extends&&a(n.extends),n.mixins&&n.mixins.forEach(a)}return!r&&!l?(kt(n)&&s.set(n,null),null):(Be(r)?r.forEach(a=>o[a]=null):rn(o,r),kt(n)&&s.set(n,o),o)}function lc(n,e){return!n||!Zu(e)?!1:(e=e.slice(2).replace(/Once$/,""),gt(n,e[0].toLowerCase()+e.slice(1))||gt(n,Er(e))||gt(n,e))}function Om(n){const{type:e,vnode:t,proxy:s,withProxy:i,propsOptions:[r],slots:o,attrs:l,emit:a,render:u,renderCache:c,props:d,data:f,setupState:p,ctx:g,inheritAttrs:k}=n,x=mu(n);let m,_;try{if(t.shapeFlag&4){const U=i||s,N=U;m=js(u.call(N,U,c,d,p,f,g)),_=l}else{const U=e;m=js(U.length>1?U(d,{attrs:l,slots:o,emit:a}):U(d,null)),_=e.props?l:m2(l)}}catch(U){tl.length=0,ic(U,n,1),m=S(kn)}let R=m;if(_&&k!==!1){const U=Object.keys(_),{shapeFlag:N}=R;U.length&&N&7&&(r&&U.some(gh)&&(_=g2(_,r)),R=Ii(R,_,!1,!0))}return t.dirs&&(R=Ii(R,null,!1,!0),R.dirs=R.dirs?R.dirs.concat(t.dirs):t.dirs),t.transition&&pl(R,t.transition),m=R,mu(x),m}const m2=n=>{let e;for(const t in n)(t==="class"||t==="style"||Zu(t))&&((e||(e={}))[t]=n[t]);return e},g2=(n,e)=>{const t={};for(const s in n)(!gh(s)||!(s.slice(9)in e))&&(t[s]=n[s]);return t};function v2(n,e,t){const{props:s,children:i,component:r}=n,{props:o,children:l,patchFlag:a}=e,u=r.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&a>=0){if(a&1024)return!0;if(a&16)return s?Lm(s,o,u):!!o;if(a&8){const c=e.dynamicProps;for(let d=0;d<c.length;d++){const f=c[d];if(o[f]!==s[f]&&!lc(u,f))return!0}}}else return(i||l)&&(!l||!l.$stable)?!0:s===o?!1:s?o?Lm(s,o,u):!0:!!o;return!1}function Lm(n,e,t){const s=Object.keys(e);if(s.length!==Object.keys(n).length)return!0;for(let i=0;i<s.length;i++){const r=s[i];if(e[r]!==n[r]&&!lc(t,r))return!0}return!1}function y2({vnode:n,parent:e},t){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===n&&(s.el=n.el),s===n)(n=e.vnode).el=t,e=e.parent;else break}}const By=n=>n.__isSuspense;function b2(n,e){e&&e.pendingBranch?Be(n)?e.effects.push(...n):e.effects.push(n):Ew(n)}const be=Symbol.for("v-fgt"),ac=Symbol.for("v-txt"),kn=Symbol.for("v-cmt"),Ya=Symbol.for("v-stc"),tl=[];let Qn=null;function v(n=!1){tl.push(Qn=n?null:[])}function k2(){tl.pop(),Qn=tl[tl.length-1]||null}let ml=1;function yu(n,e=!1){ml+=n,n<0&&Qn&&e&&(Qn.hasOnce=!0)}function Fy(n){return n.dynamicChildren=ml>0?Qn||qr:null,k2(),ml>0&&Qn&&Qn.push(n),n}function b(n,e,t,s,i,r){return Fy(h(n,e,t,s,i,r,!0))}function we(n,e,t,s,i){return Fy(S(n,e,t,s,i,!0))}function gl(n){return n?n.__v_isVNode===!0:!1}function or(n,e){return n.type===e.type&&n.key===e.key}const Uy=({key:n})=>n??null,Xa=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?jt(n)||Sn(n)||Je(n)?{i:dn,r:n,k:e,f:!!t}:n:null);function h(n,e=null,t=null,s=0,i=null,r=n===be?0:1,o=!1,l=!1){const a={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&Uy(e),ref:e&&Xa(e),scopeId:oy,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:dn};return l?(Rh(a,t),r&128&&n.normalize(a)):t&&(a.shapeFlag|=jt(t)?8:16),ml>0&&!o&&Qn&&(a.patchFlag>0||r&6)&&a.patchFlag!==32&&Qn.push(a),a}const S=x2;function x2(n,e=null,t=null,s=0,i=null,r=!1){if((!n||n===_y)&&(n=kn),gl(n)){const l=Ii(n,e,!0);return t&&Rh(l,t),ml>0&&!r&&Qn&&(l.shapeFlag&6?Qn[Qn.indexOf(n)]=l:Qn.push(l)),l.patchFlag=-2,l}if(R2(n)&&(n=n.__vccOpts),e){e=_2(e);let{class:l,style:a}=e;l&&!jt(l)&&(e.class=Se(l)),kt(a)&&(Ah(a)&&!Be(a)&&(a=rn({},a)),e.style=Kr(a))}const o=jt(n)?1:By(n)?128:ay(n)?64:kt(n)?4:Je(n)?2:0;return h(n,e,t,s,i,o,r,!0)}function _2(n){return n?Ah(n)||Py(n)?rn({},n):n:null}function Ii(n,e,t=!1,s=!1){const{props:i,ref:r,patchFlag:o,children:l,transition:a}=n,u=e?w2(i||{},e):i,c={__v_isVNode:!0,__v_skip:!0,type:n.type,props:u,key:u&&Uy(u),ref:e&&e.ref?t&&r?Be(r)?r.concat(Xa(e)):[r,Xa(e)]:Xa(e):r,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:l,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==be?o===-1?16:o|16:o,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:a,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&Ii(n.ssContent),ssFallback:n.ssFallback&&Ii(n.ssFallback),placeholder:n.placeholder,el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return a&&s&&pl(c,a.clone(c)),c}function ce(n=" ",e=0){return S(ac,null,n,e)}function _o(n,e){const t=S(Ya,null,n);return t.staticCount=e,t}function H(n="",e=!1){return e?(v(),we(kn,null,n)):S(kn,null,n)}function js(n){return n==null||typeof n=="boolean"?S(kn):Be(n)?S(be,null,n.slice()):gl(n)?_i(n):S(ac,null,String(n))}function _i(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:Ii(n)}function Rh(n,e){let t=0;const{shapeFlag:s}=n;if(e==null)e=null;else if(Be(e))t=16;else if(typeof e=="object")if(s&65){const i=e.default;i&&(i._c&&(i._d=!1),Rh(n,i()),i._c&&(i._d=!0));return}else{t=32;const i=e._;!i&&!Py(e)?e._ctx=dn:i===3&&dn&&(dn.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else Je(e)?(e={default:e,_ctx:dn},t=32):(e=String(e),s&64?(t=16,e=[ce(e)]):t=8);n.children=e,n.shapeFlag|=t}function w2(...n){const e={};for(let t=0;t<n.length;t++){const s=n[t];for(const i in s)if(i==="class")e.class!==s.class&&(e.class=Se([e.class,s.class]));else if(i==="style")e.style=Kr([e.style,s.style]);else if(Zu(i)){const r=e[i],o=s[i];o&&r!==o&&!(Be(r)&&r.includes(o))&&(e[i]=r?[].concat(r,o):o)}else i!==""&&(e[i]=s[i])}return e}function Ts(n,e,t,s=null){ks(n,e,7,[t,s])}const S2=Ey();let C2=0;function A2(n,e,t){const s=n.type,i=(e?e.appContext:n.appContext)||S2,r={uid:C2++,vnode:n,type:s,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Y_(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Oy(s,i),emitsOptions:Ny(s,i),emit:null,emitted:null,propsDefaults:wt,inheritAttrs:s.inheritAttrs,ctx:wt,data:wt,props:wt,attrs:wt,slots:wt,refs:wt,setupState:wt,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=h2.bind(null,r),n.ce&&n.ce(r),r}let xn=null;const Oh=()=>xn||dn;let bu,Yd;{const n=nc(),e=(t,s)=>{let i;return(i=n[t])||(i=n[t]=[]),i.push(s),r=>{i.length>1?i.forEach(o=>o(r)):i[0](r)}};bu=e("__VUE_INSTANCE_SETTERS__",t=>xn=t),Yd=e("__VUE_SSR_SETTERS__",t=>vl=t)}const Gl=n=>{const e=xn;return bu(n),n.scope.on(),()=>{n.scope.off(),bu(e)}},Mm=()=>{xn&&xn.scope.off(),bu(null)};function zy(n){return n.vnode.shapeFlag&4}let vl=!1;function E2(n,e=!1,t=!1){e&&Yd(e);const{props:s,children:i}=n.vnode,r=zy(n);Zw(n,s,r,e),s2(n,i,t||e);const o=r?T2(n,e):void 0;return e&&Yd(!1),o}function T2(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,zw);const{setup:s}=t;if(s){li();const i=n.setupContext=s.length>1?Wy(n):null,r=Gl(n),o=ql(s,n,0,[n.props,i]),l=Ov(o);if(ai(),r(),(l||n.sp)&&!Yr(n)&&yy(n),l){if(o.then(Mm,Mm),e)return o.then(a=>{Im(n,a)}).catch(a=>{ic(a,n,0)});n.asyncDep=o}else Im(n,o)}else Hy(n)}function Im(n,e,t){Je(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:kt(e)&&(n.setupState=ty(e)),Hy(n)}function Hy(n,e,t){const s=n.type;n.render||(n.render=s.render||Us);{const i=Gl(n);li();try{qw(n)}finally{ai(),i()}}}const D2={get(n,e){return yn(n,"get",""),n[e]}};function Wy(n){const e=t=>{n.exposed=t||{}};return{attrs:new Proxy(n.attrs,D2),slots:n.slots,emit:n.emit,expose:e}}function uc(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(ty(vw(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in Zo)return Zo[t](n)},has(e,t){return t in e||t in Zo}})):n.proxy}function P2(n,e=!0){return Je(n)?n.displayName||n.name:n.name||e&&n.__name}function R2(n){return Je(n)&&"__vccOpts"in n}const z=(n,e)=>_w(n,e,vl);function zt(n,e,t){try{yu(-1);const s=arguments.length;return s===2?kt(e)&&!Be(e)?gl(e)?S(n,null,[e]):S(n,e):S(n,null,e):(s>3?t=Array.prototype.slice.call(arguments,2):s===3&&gl(t)&&(t=[t]),S(n,e,t))}finally{yu(1)}}const O2="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Xd;const jm=typeof window<"u"&&window.trustedTypes;if(jm)try{Xd=jm.createPolicy("vue",{createHTML:n=>n})}catch{}const qy=Xd?n=>Xd.createHTML(n):n=>n,L2="http://www.w3.org/2000/svg",M2="http://www.w3.org/1998/Math/MathML",Zs=typeof document<"u"?document:null,Vm=Zs&&Zs.createElement("template"),I2={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,s)=>{const i=e==="svg"?Zs.createElementNS(L2,n):e==="mathml"?Zs.createElementNS(M2,n):t?Zs.createElement(n,{is:t}):Zs.createElement(n);return n==="select"&&s&&s.multiple!=null&&i.setAttribute("multiple",s.multiple),i},createText:n=>Zs.createTextNode(n),createComment:n=>Zs.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>Zs.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,s,i,r){const o=t?t.previousSibling:e.lastChild;if(i&&(i===r||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),t),!(i===r||!(i=i.nextSibling)););else{Vm.innerHTML=qy(s==="svg"?`<svg>${n}</svg>`:s==="mathml"?`<math>${n}</math>`:n);const l=Vm.content;if(s==="svg"||s==="mathml"){const a=l.firstChild;for(;a.firstChild;)l.appendChild(a.firstChild);l.removeChild(a)}e.insertBefore(l,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},bi="transition",Oo="animation",yl=Symbol("_vtc"),Gy={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},j2=rn({},fy,Gy),V2=n=>(n.displayName="Transition",n.props=j2,n),Lh=V2((n,{slots:e})=>zt(Rw,$2(n),e)),Yi=(n,e=[])=>{Be(n)?n.forEach(t=>t(...e)):n&&n(...e)},$m=n=>n?Be(n)?n.some(e=>e.length>1):n.length>1:!1;function $2(n){const e={};for(const F in n)F in Gy||(e[F]=n[F]);if(n.css===!1)return e;const{name:t="v",type:s,duration:i,enterFromClass:r=`${t}-enter-from`,enterActiveClass:o=`${t}-enter-active`,enterToClass:l=`${t}-enter-to`,appearFromClass:a=r,appearActiveClass:u=o,appearToClass:c=l,leaveFromClass:d=`${t}-leave-from`,leaveActiveClass:f=`${t}-leave-active`,leaveToClass:p=`${t}-leave-to`}=n,g=N2(i),k=g&&g[0],x=g&&g[1],{onBeforeEnter:m,onEnter:_,onEnterCancelled:R,onLeave:U,onLeaveCancelled:N,onBeforeAppear:A=m,onAppear:w=_,onAppearCancelled:M=R}=e,G=(F,ae,ee,V)=>{F._enterCancelled=V,Xi(F,ae?c:l),Xi(F,ae?u:o),ee&&ee()},ue=(F,ae)=>{F._isLeaving=!1,Xi(F,d),Xi(F,p),Xi(F,f),ae&&ae()},ie=F=>(ae,ee)=>{const V=F?w:_,J=()=>G(ae,F,ee);Yi(V,[ae,J]),Nm(()=>{Xi(ae,F?a:r),Ks(ae,F?c:l),$m(V)||Bm(ae,s,k,J)})};return rn(e,{onBeforeEnter(F){Yi(m,[F]),Ks(F,r),Ks(F,o)},onBeforeAppear(F){Yi(A,[F]),Ks(F,a),Ks(F,u)},onEnter:ie(!1),onAppear:ie(!0),onLeave(F,ae){F._isLeaving=!0;const ee=()=>ue(F,ae);Ks(F,d),F._enterCancelled?(Ks(F,f),zm(F)):(zm(F),Ks(F,f)),Nm(()=>{F._isLeaving&&(Xi(F,d),Ks(F,p),$m(U)||Bm(F,s,x,ee))}),Yi(U,[F,ee])},onEnterCancelled(F){G(F,!1,void 0,!0),Yi(R,[F])},onAppearCancelled(F){G(F,!0,void 0,!0),Yi(M,[F])},onLeaveCancelled(F){ue(F),Yi(N,[F])}})}function N2(n){if(n==null)return null;if(kt(n))return[Kc(n.enter),Kc(n.leave)];{const e=Kc(n);return[e,e]}}function Kc(n){return z_(n)}function Ks(n,e){e.split(/\s+/).forEach(t=>t&&n.classList.add(t)),(n[yl]||(n[yl]=new Set)).add(e)}function Xi(n,e){e.split(/\s+/).forEach(s=>s&&n.classList.remove(s));const t=n[yl];t&&(t.delete(e),t.size||(n[yl]=void 0))}function Nm(n){requestAnimationFrame(()=>{requestAnimationFrame(n)})}let B2=0;function Bm(n,e,t,s){const i=n._endId=++B2,r=()=>{i===n._endId&&s()};if(t!=null)return setTimeout(r,t);const{type:o,timeout:l,propCount:a}=F2(n,e);if(!o)return s();const u=o+"end";let c=0;const d=()=>{n.removeEventListener(u,f),r()},f=p=>{p.target===n&&++c>=a&&d()};setTimeout(()=>{c<a&&d()},l+1),n.addEventListener(u,f)}function F2(n,e){const t=window.getComputedStyle(n),s=g=>(t[g]||"").split(", "),i=s(`${bi}Delay`),r=s(`${bi}Duration`),o=Fm(i,r),l=s(`${Oo}Delay`),a=s(`${Oo}Duration`),u=Fm(l,a);let c=null,d=0,f=0;e===bi?o>0&&(c=bi,d=o,f=r.length):e===Oo?u>0&&(c=Oo,d=u,f=a.length):(d=Math.max(o,u),c=d>0?o>u?bi:Oo:null,f=c?c===bi?r.length:a.length:0);const p=c===bi&&/\b(?:transform|all)(?:,|$)/.test(s(`${bi}Property`).toString());return{type:c,timeout:d,propCount:f,hasTransform:p}}function Fm(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max(...e.map((t,s)=>Um(t)+Um(n[s])))}function Um(n){return n==="auto"?0:Number(n.slice(0,-1).replace(",","."))*1e3}function zm(n){return(n?n.ownerDocument:document).body.offsetHeight}function U2(n,e,t){const s=n[yl];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}const ku=Symbol("_vod"),Ky=Symbol("_vsh"),nt={name:"show",beforeMount(n,{value:e},{transition:t}){n[ku]=n.style.display==="none"?"":n.style.display,t&&e?t.beforeEnter(n):Lo(n,e)},mounted(n,{value:e},{transition:t}){t&&e&&t.enter(n)},updated(n,{value:e,oldValue:t},{transition:s}){!e!=!t&&(s?e?(s.beforeEnter(n),Lo(n,!0),s.enter(n)):s.leave(n,()=>{Lo(n,!1)}):Lo(n,e))},beforeUnmount(n,{value:e}){Lo(n,e)}};function Lo(n,e){n.style.display=e?n[ku]:"none",n[Ky]=!e}const z2=Symbol(""),H2=/(?:^|;)\s*display\s*:/;function W2(n,e,t){const s=n.style,i=jt(t);let r=!1;if(t&&!i){if(e)if(jt(e))for(const o of e.split(";")){const l=o.slice(0,o.indexOf(":")).trim();t[l]==null&&Za(s,l,"")}else for(const o in e)t[o]==null&&Za(s,o,"");for(const o in t)o==="display"&&(r=!0),Za(s,o,t[o])}else if(i){if(e!==t){const o=s[z2];o&&(t+=";"+o),s.cssText=t,r=H2.test(t)}}else e&&n.removeAttribute("style");ku in n&&(n[ku]=r?s.display:"",n[Ky]&&(s.display="none"))}const Hm=/\s*!important$/;function Za(n,e,t){if(Be(t))t.forEach(s=>Za(n,e,s));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const s=q2(n,e);Hm.test(t)?n.setProperty(Er(s),t.replace(Hm,""),"important"):n[s]=t}}const Wm=["Webkit","Moz","ms"],Jc={};function q2(n,e){const t=Jc[e];if(t)return t;let s=cs(e);if(s!=="filter"&&s in n)return Jc[e]=s;s=tc(s);for(let i=0;i<Wm.length;i++){const r=Wm[i]+s;if(r in n)return Jc[e]=r}return e}const qm="http://www.w3.org/1999/xlink";function Gm(n,e,t,s,i,r=J_(e)){s&&e.startsWith("xlink:")?t==null?n.removeAttributeNS(qm,e.slice(6,e.length)):n.setAttributeNS(qm,e,t):t==null||r&&!jv(t)?n.removeAttribute(e):n.setAttribute(e,r?"":bs(t)?String(t):t)}function Km(n,e,t,s,i){if(e==="innerHTML"||e==="textContent"){t!=null&&(n[e]=e==="innerHTML"?qy(t):t);return}const r=n.tagName;if(e==="value"&&r!=="PROGRESS"&&!r.includes("-")){const l=r==="OPTION"?n.getAttribute("value")||"":n.value,a=t==null?n.type==="checkbox"?"on":"":String(t);(l!==a||!("_value"in n))&&(n.value=a),t==null&&n.removeAttribute(e),n._value=t;return}let o=!1;if(t===""||t==null){const l=typeof n[e];l==="boolean"?t=jv(t):t==null&&l==="string"?(t="",o=!0):l==="number"&&(t=0,o=!0)}try{n[e]=t}catch{}o&&n.removeAttribute(i||e)}function si(n,e,t,s){n.addEventListener(e,t,s)}function G2(n,e,t,s){n.removeEventListener(e,t,s)}const Jm=Symbol("_vei");function K2(n,e,t,s,i=null){const r=n[Jm]||(n[Jm]={}),o=r[e];if(s&&o)o.value=s;else{const[l,a]=J2(e);if(s){const u=r[e]=X2(s,i);si(n,l,u,a)}else o&&(G2(n,l,o,a),r[e]=void 0)}}const Qm=/(?:Once|Passive|Capture)$/;function J2(n){let e;if(Qm.test(n)){e={};let s;for(;s=n.match(Qm);)n=n.slice(0,n.length-s[0].length),e[s[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):Er(n.slice(2)),e]}let Qc=0;const Q2=Promise.resolve(),Y2=()=>Qc||(Q2.then(()=>Qc=0),Qc=Date.now());function X2(n,e){const t=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=t.attached)return;ks(Z2(s,t.value),e,5,[s])};return t.value=n,t.attached=Y2(),t}function Z2(n,e){if(Be(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(s=>i=>!i._stopped&&s&&s(i))}else return e}const Ym=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,eS=(n,e,t,s,i,r)=>{const o=i==="svg";e==="class"?U2(n,s,o):e==="style"?W2(n,t,s):Zu(e)?gh(e)||K2(n,e,t,s,r):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):tS(n,e,s,o))?(Km(n,e,s),!n.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Gm(n,e,s,o,r,e!=="value")):n._isVueCE&&(/[A-Z]/.test(e)||!jt(s))?Km(n,cs(e),s,r,e):(e==="true-value"?n._trueValue=s:e==="false-value"&&(n._falseValue=s),Gm(n,e,s,o))};function tS(n,e,t,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in n&&Ym(e)&&Je(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=n.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return Ym(e)&&jt(t)?!1:e in n}const ji=n=>{const e=n.props["onUpdate:modelValue"]||!1;return Be(e)?t=>Ja(e,t):e};function nS(n){n.target.composing=!0}function Xm(n){const e=n.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const ls=Symbol("_assign"),br={created(n,{modifiers:{lazy:e,trim:t,number:s}},i){n[ls]=ji(i);const r=s||i.props&&i.props.type==="number";si(n,e?"change":"input",o=>{if(o.target.composing)return;let l=n.value;t&&(l=l.trim()),r&&(l=du(l)),n[ls](l)}),t&&si(n,"change",()=>{n.value=n.value.trim()}),e||(si(n,"compositionstart",nS),si(n,"compositionend",Xm),si(n,"change",Xm))},mounted(n,{value:e}){n.value=e??""},beforeUpdate(n,{value:e,oldValue:t,modifiers:{lazy:s,trim:i,number:r}},o){if(n[ls]=ji(o),n.composing)return;const l=(r||n.type==="number")&&!/^0\d/.test(n.value)?du(n.value):n.value,a=e??"";l!==a&&(document.activeElement===n&&n.type!=="range"&&(s&&e===t||i&&n.value.trim()===a)||(n.value=a))}},sS={deep:!0,created(n,e,t){n[ls]=ji(t),si(n,"change",()=>{const s=n._modelValue,i=oo(n),r=n.checked,o=n[ls];if(Be(s)){const l=bh(s,i),a=l!==-1;if(r&&!a)o(s.concat(i));else if(!r&&a){const u=[...s];u.splice(l,1),o(u)}}else if(ko(s)){const l=new Set(s);r?l.add(i):l.delete(i),o(l)}else o(Jy(n,r))})},mounted:Zm,beforeUpdate(n,e,t){n[ls]=ji(t),Zm(n,e,t)}};function Zm(n,{value:e,oldValue:t},s){n._modelValue=e;let i;if(Be(e))i=bh(e,s.props.value)>-1;else if(ko(e))i=e.has(s.props.value);else{if(e===t)return;i=yr(e,Jy(n,!0))}n.checked!==i&&(n.checked=i)}const Zd={created(n,{value:e},t){n.checked=yr(e,t.props.value),n[ls]=ji(t),si(n,"change",()=>{n[ls](oo(n))})},beforeUpdate(n,{value:e,oldValue:t},s){n[ls]=ji(s),e!==t&&(n.checked=yr(e,s.props.value))}},ef={deep:!0,created(n,{value:e,modifiers:{number:t}},s){const i=ko(e);si(n,"change",()=>{const r=Array.prototype.filter.call(n.options,o=>o.selected).map(o=>t?du(oo(o)):oo(o));n[ls](n.multiple?i?new Set(r):r:r[0]),n._assigning=!0,ns(()=>{n._assigning=!1})}),n[ls]=ji(s)},mounted(n,{value:e}){eg(n,e)},beforeUpdate(n,e,t){n[ls]=ji(t)},updated(n,{value:e}){n._assigning||eg(n,e)}};function eg(n,e){const t=n.multiple,s=Be(e);if(!(t&&!s&&!ko(e))){for(let i=0,r=n.options.length;i<r;i++){const o=n.options[i],l=oo(o);if(t)if(s){const a=typeof l;a==="string"||a==="number"?o.selected=e.some(u=>String(u)===String(l)):o.selected=bh(e,l)>-1}else o.selected=e.has(l);else if(yr(oo(o),e)){n.selectedIndex!==i&&(n.selectedIndex=i);return}}!t&&n.selectedIndex!==-1&&(n.selectedIndex=-1)}}function oo(n){return"_value"in n?n._value:n.value}function Jy(n,e){const t=e?"_trueValue":"_falseValue";return t in n?n[t]:e}const iS={created(n,e,t){ka(n,e,t,null,"created")},mounted(n,e,t){ka(n,e,t,null,"mounted")},beforeUpdate(n,e,t,s){ka(n,e,t,s,"beforeUpdate")},updated(n,e,t,s){ka(n,e,t,s,"updated")}};function rS(n,e){switch(n){case"SELECT":return ef;case"TEXTAREA":return br;default:switch(e){case"checkbox":return sS;case"radio":return Zd;default:return br}}}function ka(n,e,t,s,i){const o=rS(n.tagName,t.props&&t.props.type)[i];o&&o(n,e,t,s)}const oS=["ctrl","shift","alt","meta"],lS={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>oS.some(t=>n[`${t}Key`]&&!e.includes(t))},Tt=(n,e)=>{const t=n._withMods||(n._withMods={}),s=e.join(".");return t[s]||(t[s]=((i,...r)=>{for(let o=0;o<e.length;o++){const l=lS[e[o]];if(l&&l(i,e))return}return n(i,...r)}))},aS=rn({patchProp:eS},I2);let tg;function uS(){return tg||(tg=r2(aS))}const cS=((...n)=>{const e=uS().createApp(...n),{mount:t}=e;return e.mount=s=>{const i=fS(s);if(!i)return;const r=e._component;!Je(r)&&!r.render&&!r.template&&(r.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=t(i,!1,dS(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e});function dS(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function fS(n){return jt(n)?document.querySelector(n):n}const hS="/framework-logo.png";/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const Vr=typeof document<"u";function Qy(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function pS(n){return n.__esModule||n[Symbol.toStringTag]==="Module"||n.default&&Qy(n.default)}const mt=Object.assign;function Yc(n,e){const t={};for(const s in e){const i=e[s];t[s]=xs(i)?i.map(n):n(i)}return t}const nl=()=>{},xs=Array.isArray;function ng(n,e){const t={};for(const s in n)t[s]=s in e?e[s]:n[s];return t}const Yy=/#/g,mS=/&/g,gS=/\//g,vS=/=/g,yS=/\?/g,Xy=/\+/g,bS=/%5B/g,kS=/%5D/g,Zy=/%5E/g,xS=/%60/g,eb=/%7B/g,_S=/%7C/g,tb=/%7D/g,wS=/%20/g;function Mh(n){return n==null?"":encodeURI(""+n).replace(_S,"|").replace(bS,"[").replace(kS,"]")}function SS(n){return Mh(n).replace(eb,"{").replace(tb,"}").replace(Zy,"^")}function tf(n){return Mh(n).replace(Xy,"%2B").replace(wS,"+").replace(Yy,"%23").replace(mS,"%26").replace(xS,"`").replace(eb,"{").replace(tb,"}").replace(Zy,"^")}function CS(n){return tf(n).replace(vS,"%3D")}function AS(n){return Mh(n).replace(Yy,"%23").replace(yS,"%3F")}function ES(n){return AS(n).replace(gS,"%2F")}function bl(n){if(n==null)return null;try{return decodeURIComponent(""+n)}catch{}return""+n}const TS=/\/$/,DS=n=>n.replace(TS,"");function Xc(n,e,t="/"){let s,i={},r="",o="";const l=e.indexOf("#");let a=e.indexOf("?");return a=l>=0&&a>l?-1:a,a>=0&&(s=e.slice(0,a),r=e.slice(a,l>0?l:e.length),i=n(r.slice(1))),l>=0&&(s=s||e.slice(0,l),o=e.slice(l,e.length)),s=LS(s??e,t),{fullPath:s+r+o,path:s,query:i,hash:bl(o)}}function PS(n,e){const t=e.query?n(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function sg(n,e){return!e||!n.toLowerCase().startsWith(e.toLowerCase())?n:n.slice(e.length)||"/"}function RS(n,e,t){const s=e.matched.length-1,i=t.matched.length-1;return s>-1&&s===i&&lo(e.matched[s],t.matched[i])&&nb(e.params,t.params)&&n(e.query)===n(t.query)&&e.hash===t.hash}function lo(n,e){return(n.aliasOf||n)===(e.aliasOf||e)}function nb(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(!OS(n[t],e[t]))return!1;return!0}function OS(n,e){return xs(n)?ig(n,e):xs(e)?ig(e,n):n===e}function ig(n,e){return xs(e)?n.length===e.length&&n.every((t,s)=>t===e[s]):n.length===1&&n[0]===e}function LS(n,e){if(n.startsWith("/"))return n;if(!n)return e;const t=e.split("/"),s=n.split("/"),i=s[s.length-1];(i===".."||i===".")&&s.push("");let r=t.length-1,o,l;for(o=0;o<s.length;o++)if(l=s[o],l!==".")if(l==="..")r>1&&r--;else break;return t.slice(0,r).join("/")+"/"+s.slice(o).join("/")}const ki={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let nf=(function(n){return n.pop="pop",n.push="push",n})({}),Zc=(function(n){return n.back="back",n.forward="forward",n.unknown="",n})({});function MS(n){if(!n)if(Vr){const e=document.querySelector("base");n=e&&e.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),DS(n)}const IS=/^[^#]+#/;function jS(n,e){return n.replace(IS,"#")+e}function VS(n,e){const t=document.documentElement.getBoundingClientRect(),s=n.getBoundingClientRect();return{behavior:e.behavior,left:s.left-t.left-(e.left||0),top:s.top-t.top-(e.top||0)}}const cc=()=>({left:window.scrollX,top:window.scrollY});function $S(n){let e;if("el"in n){const t=n.el,s=typeof t=="string"&&t.startsWith("#"),i=typeof t=="string"?s?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!i)return;e=VS(i,n)}else e=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function rg(n,e){return(history.state?history.state.position-e:-1)+n}const sf=new Map;function NS(n,e){sf.set(n,e)}function BS(n){const e=sf.get(n);return sf.delete(n),e}function FS(n){return typeof n=="string"||n&&typeof n=="object"}function sb(n){return typeof n=="string"||typeof n=="symbol"}let Vt=(function(n){return n[n.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",n[n.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",n[n.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",n[n.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",n[n.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",n})({});const ib=Symbol("");Vt.MATCHER_NOT_FOUND+"",Vt.NAVIGATION_GUARD_REDIRECT+"",Vt.NAVIGATION_ABORTED+"",Vt.NAVIGATION_CANCELLED+"",Vt.NAVIGATION_DUPLICATED+"";function ao(n,e){return mt(new Error,{type:n,[ib]:!0},e)}function Js(n,e){return n instanceof Error&&ib in n&&(e==null||!!(n.type&e))}const US=["params","query","hash"];function zS(n){if(typeof n=="string")return n;if(n.path!=null)return n.path;const e={};for(const t of US)t in n&&(e[t]=n[t]);return JSON.stringify(e,null,2)}function HS(n){const e={};if(n===""||n==="?")return e;const t=(n[0]==="?"?n.slice(1):n).split("&");for(let s=0;s<t.length;++s){const i=t[s].replace(Xy," "),r=i.indexOf("="),o=bl(r<0?i:i.slice(0,r)),l=r<0?null:bl(i.slice(r+1));if(o in e){let a=e[o];xs(a)||(a=e[o]=[a]),a.push(l)}else e[o]=l}return e}function og(n){let e="";for(let t in n){const s=n[t];if(t=CS(t),s==null){s!==void 0&&(e+=(e.length?"&":"")+t);continue}(xs(s)?s.map(i=>i&&tf(i)):[s&&tf(s)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+t,i!=null&&(e+="="+i))})}return e}function WS(n){const e={};for(const t in n){const s=n[t];s!==void 0&&(e[t]=xs(s)?s.map(i=>i==null?null:""+i):s==null?s:""+s)}return e}const qS=Symbol(""),lg=Symbol(""),dc=Symbol(""),Ih=Symbol(""),rf=Symbol("");function Mo(){let n=[];function e(s){return n.push(s),()=>{const i=n.indexOf(s);i>-1&&n.splice(i,1)}}function t(){n=[]}return{add:e,list:()=>n.slice(),reset:t}}function wi(n,e,t,s,i,r=o=>o()){const o=s&&(s.enterCallbacks[i]=s.enterCallbacks[i]||[]);return()=>new Promise((l,a)=>{const u=f=>{f===!1?a(ao(Vt.NAVIGATION_ABORTED,{from:t,to:e})):f instanceof Error?a(f):FS(f)?a(ao(Vt.NAVIGATION_GUARD_REDIRECT,{from:e,to:f})):(o&&s.enterCallbacks[i]===o&&typeof f=="function"&&o.push(f),l())},c=r(()=>n.call(s&&s.instances[i],e,t,u));let d=Promise.resolve(c);n.length<3&&(d=d.then(u)),d.catch(f=>a(f))})}function ed(n,e,t,s,i=r=>r()){const r=[];for(const o of n)for(const l in o.components){let a=o.components[l];if(!(e!=="beforeRouteEnter"&&!o.instances[l]))if(Qy(a)){const u=(a.__vccOpts||a)[e];u&&r.push(wi(u,t,s,o,l,i))}else{let u=a();r.push(()=>u.then(c=>{if(!c)throw new Error(`Couldn't resolve component "${l}" at "${o.path}"`);const d=pS(c)?c.default:c;o.mods[l]=c,o.components[l]=d;const f=(d.__vccOpts||d)[e];return f&&wi(f,t,s,o,l,i)()}))}}return r}function GS(n,e){const t=[],s=[],i=[],r=Math.max(e.matched.length,n.matched.length);for(let o=0;o<r;o++){const l=e.matched[o];l&&(n.matched.find(u=>lo(u,l))?s.push(l):t.push(l));const a=n.matched[o];a&&(e.matched.find(u=>lo(u,a))||i.push(a))}return[t,s,i]}/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let KS=()=>location.protocol+"//"+location.host;function rb(n,e){const{pathname:t,search:s,hash:i}=e,r=n.indexOf("#");if(r>-1){let o=i.includes(n.slice(r))?n.slice(r).length:1,l=i.slice(o);return l[0]!=="/"&&(l="/"+l),sg(l,"")}return sg(t,n)+s+i}function JS(n,e,t,s){let i=[],r=[],o=null;const l=({state:f})=>{const p=rb(n,location),g=t.value,k=e.value;let x=0;if(f){if(t.value=p,e.value=f,o&&o===g){o=null;return}x=k?f.position-k.position:0}else s(p);i.forEach(m=>{m(t.value,g,{delta:x,type:nf.pop,direction:x?x>0?Zc.forward:Zc.back:Zc.unknown})})};function a(){o=t.value}function u(f){i.push(f);const p=()=>{const g=i.indexOf(f);g>-1&&i.splice(g,1)};return r.push(p),p}function c(){if(document.visibilityState==="hidden"){const{history:f}=window;if(!f.state)return;f.replaceState(mt({},f.state,{scroll:cc()}),"")}}function d(){for(const f of r)f();r=[],window.removeEventListener("popstate",l),window.removeEventListener("pagehide",c),document.removeEventListener("visibilitychange",c)}return window.addEventListener("popstate",l),window.addEventListener("pagehide",c),document.addEventListener("visibilitychange",c),{pauseListeners:a,listen:u,destroy:d}}function ag(n,e,t,s=!1,i=!1){return{back:n,current:e,forward:t,replaced:s,position:window.history.length,scroll:i?cc():null}}function QS(n){const{history:e,location:t}=window,s={value:rb(n,t)},i={value:e.state};i.value||r(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function r(a,u,c){const d=n.indexOf("#"),f=d>-1?(t.host&&document.querySelector("base")?n:n.slice(d))+a:KS()+n+a;try{e[c?"replaceState":"pushState"](u,"",f),i.value=u}catch(p){console.error(p),t[c?"replace":"assign"](f)}}function o(a,u){r(a,mt({},e.state,ag(i.value.back,a,i.value.forward,!0),u,{position:i.value.position}),!0),s.value=a}function l(a,u){const c=mt({},i.value,e.state,{forward:a,scroll:cc()});r(c.current,c,!0),r(a,mt({},ag(s.value,a,null),{position:c.position+1},u),!1),s.value=a}return{location:s,state:i,push:l,replace:o}}function YS(n){n=MS(n);const e=QS(n),t=JS(n,e.state,e.location,e.replace);function s(r,o=!0){o||t.pauseListeners(),history.go(r)}const i=mt({location:"",base:n,go:s,createHref:jS.bind(null,n)},e,t);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function XS(n){return n=location.host?n||location.pathname+location.search:"",n.includes("#")||(n+="#"),YS(n)}let ur=(function(n){return n[n.Static=0]="Static",n[n.Param=1]="Param",n[n.Group=2]="Group",n})({});var Qt=(function(n){return n[n.Static=0]="Static",n[n.Param=1]="Param",n[n.ParamRegExp=2]="ParamRegExp",n[n.ParamRegExpEnd=3]="ParamRegExpEnd",n[n.EscapeNext=4]="EscapeNext",n})(Qt||{});const ZS={type:ur.Static,value:""},eC=/[a-zA-Z0-9_]/;function tC(n){if(!n)return[[]];if(n==="/")return[[ZS]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function e(p){throw new Error(`ERR (${t})/"${u}": ${p}`)}let t=Qt.Static,s=t;const i=[];let r;function o(){r&&i.push(r),r=[]}let l=0,a,u="",c="";function d(){u&&(t===Qt.Static?r.push({type:ur.Static,value:u}):t===Qt.Param||t===Qt.ParamRegExp||t===Qt.ParamRegExpEnd?(r.length>1&&(a==="*"||a==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),r.push({type:ur.Param,value:u,regexp:c,repeatable:a==="*"||a==="+",optional:a==="*"||a==="?"})):e("Invalid state to consume buffer"),u="")}function f(){u+=a}for(;l<n.length;){if(a=n[l++],a==="\\"&&t!==Qt.ParamRegExp){s=t,t=Qt.EscapeNext;continue}switch(t){case Qt.Static:a==="/"?(u&&d(),o()):a===":"?(d(),t=Qt.Param):f();break;case Qt.EscapeNext:f(),t=s;break;case Qt.Param:a==="("?t=Qt.ParamRegExp:eC.test(a)?f():(d(),t=Qt.Static,a!=="*"&&a!=="?"&&a!=="+"&&l--);break;case Qt.ParamRegExp:a===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+a:t=Qt.ParamRegExpEnd:c+=a;break;case Qt.ParamRegExpEnd:d(),t=Qt.Static,a!=="*"&&a!=="?"&&a!=="+"&&l--,c="";break;default:e("Unknown state");break}}return t===Qt.ParamRegExp&&e(`Unfinished custom RegExp for param "${u}"`),d(),o(),i}const ug="[^/]+?",nC={sensitive:!1,strict:!1,start:!0,end:!0};var Pn=(function(n){return n[n._multiplier=10]="_multiplier",n[n.Root=90]="Root",n[n.Segment=40]="Segment",n[n.SubSegment=30]="SubSegment",n[n.Static=40]="Static",n[n.Dynamic=20]="Dynamic",n[n.BonusCustomRegExp=10]="BonusCustomRegExp",n[n.BonusWildcard=-50]="BonusWildcard",n[n.BonusRepeatable=-20]="BonusRepeatable",n[n.BonusOptional=-8]="BonusOptional",n[n.BonusStrict=.7000000000000001]="BonusStrict",n[n.BonusCaseSensitive=.25]="BonusCaseSensitive",n})(Pn||{});const sC=/[.+*?^${}()[\]/\\]/g;function iC(n,e){const t=mt({},nC,e),s=[];let i=t.start?"^":"";const r=[];for(const u of n){const c=u.length?[]:[Pn.Root];t.strict&&!u.length&&(i+="/");for(let d=0;d<u.length;d++){const f=u[d];let p=Pn.Segment+(t.sensitive?Pn.BonusCaseSensitive:0);if(f.type===ur.Static)d||(i+="/"),i+=f.value.replace(sC,"\\$&"),p+=Pn.Static;else if(f.type===ur.Param){const{value:g,repeatable:k,optional:x,regexp:m}=f;r.push({name:g,repeatable:k,optional:x});const _=m||ug;if(_!==ug){p+=Pn.BonusCustomRegExp;try{`${_}`}catch(U){throw new Error(`Invalid custom RegExp for param "${g}" (${_}): `+U.message)}}let R=k?`((?:${_})(?:/(?:${_}))*)`:`(${_})`;d||(R=x&&u.length<2?`(?:/${R})`:"/"+R),x&&(R+="?"),i+=R,p+=Pn.Dynamic,x&&(p+=Pn.BonusOptional),k&&(p+=Pn.BonusRepeatable),_===".*"&&(p+=Pn.BonusWildcard)}c.push(p)}s.push(c)}if(t.strict&&t.end){const u=s.length-1;s[u][s[u].length-1]+=Pn.BonusStrict}t.strict||(i+="/?"),t.end?i+="$":t.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,t.sensitive?"":"i");function l(u){const c=u.match(o),d={};if(!c)return null;for(let f=1;f<c.length;f++){const p=c[f]||"",g=r[f-1];d[g.name]=p&&g.repeatable?p.split("/"):p}return d}function a(u){let c="",d=!1;for(const f of n){(!d||!c.endsWith("/"))&&(c+="/"),d=!1;for(const p of f)if(p.type===ur.Static)c+=p.value;else if(p.type===ur.Param){const{value:g,repeatable:k,optional:x}=p,m=g in u?u[g]:"";if(xs(m)&&!k)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const _=xs(m)?m.join("/"):m;if(!_)if(x)f.length<2&&(c.endsWith("/")?c=c.slice(0,-1):d=!0);else throw new Error(`Missing required param "${g}"`);c+=_}}return c||"/"}return{re:o,score:s,keys:r,parse:l,stringify:a}}function rC(n,e){let t=0;for(;t<n.length&&t<e.length;){const s=e[t]-n[t];if(s)return s;t++}return n.length<e.length?n.length===1&&n[0]===Pn.Static+Pn.Segment?-1:1:n.length>e.length?e.length===1&&e[0]===Pn.Static+Pn.Segment?1:-1:0}function ob(n,e){let t=0;const s=n.score,i=e.score;for(;t<s.length&&t<i.length;){const r=rC(s[t],i[t]);if(r)return r;t++}if(Math.abs(i.length-s.length)===1){if(cg(s))return 1;if(cg(i))return-1}return i.length-s.length}function cg(n){const e=n[n.length-1];return n.length>0&&e[e.length-1]<0}const oC={strict:!1,end:!0,sensitive:!1};function lC(n,e,t){const s=iC(tC(n.path),t),i=mt(s,{record:n,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function aC(n,e){const t=[],s=new Map;e=ng(oC,e);function i(d){return s.get(d)}function r(d,f,p){const g=!p,k=fg(d);k.aliasOf=p&&p.record;const x=ng(e,d),m=[k];if("alias"in d){const U=typeof d.alias=="string"?[d.alias]:d.alias;for(const N of U)m.push(fg(mt({},k,{components:p?p.record.components:k.components,path:N,aliasOf:p?p.record:k})))}let _,R;for(const U of m){const{path:N}=U;if(f&&N[0]!=="/"){const A=f.record.path,w=A[A.length-1]==="/"?"":"/";U.path=f.record.path+(N&&w+N)}if(_=lC(U,f,x),p?p.alias.push(_):(R=R||_,R!==_&&R.alias.push(_),g&&d.name&&!hg(_)&&o(d.name)),lb(_)&&a(_),k.children){const A=k.children;for(let w=0;w<A.length;w++)r(A[w],_,p&&p.children[w])}p=p||_}return R?()=>{o(R)}:nl}function o(d){if(sb(d)){const f=s.get(d);f&&(s.delete(d),t.splice(t.indexOf(f),1),f.children.forEach(o),f.alias.forEach(o))}else{const f=t.indexOf(d);f>-1&&(t.splice(f,1),d.record.name&&s.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function l(){return t}function a(d){const f=dC(d,t);t.splice(f,0,d),d.record.name&&!hg(d)&&s.set(d.record.name,d)}function u(d,f){let p,g={},k,x;if("name"in d&&d.name){if(p=s.get(d.name),!p)throw ao(Vt.MATCHER_NOT_FOUND,{location:d});x=p.record.name,g=mt(dg(f.params,p.keys.filter(R=>!R.optional).concat(p.parent?p.parent.keys.filter(R=>R.optional):[]).map(R=>R.name)),d.params&&dg(d.params,p.keys.map(R=>R.name))),k=p.stringify(g)}else if(d.path!=null)k=d.path,p=t.find(R=>R.re.test(k)),p&&(g=p.parse(k),x=p.record.name);else{if(p=f.name?s.get(f.name):t.find(R=>R.re.test(f.path)),!p)throw ao(Vt.MATCHER_NOT_FOUND,{location:d,currentLocation:f});x=p.record.name,g=mt({},f.params,d.params),k=p.stringify(g)}const m=[];let _=p;for(;_;)m.unshift(_.record),_=_.parent;return{name:x,path:k,params:g,matched:m,meta:cC(m)}}n.forEach(d=>r(d));function c(){t.length=0,s.clear()}return{addRoute:r,resolve:u,removeRoute:o,clearRoutes:c,getRoutes:l,getRecordMatcher:i}}function dg(n,e){const t={};for(const s of e)s in n&&(t[s]=n[s]);return t}function fg(n){const e={path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:n.aliasOf,beforeEnter:n.beforeEnter,props:uC(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function uC(n){const e={},t=n.props||!1;if("component"in n)e.default=t;else for(const s in n.components)e[s]=typeof t=="object"?t[s]:t;return e}function hg(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function cC(n){return n.reduce((e,t)=>mt(e,t.meta),{})}function dC(n,e){let t=0,s=e.length;for(;t!==s;){const r=t+s>>1;ob(n,e[r])<0?s=r:t=r+1}const i=fC(n);return i&&(s=e.lastIndexOf(i,s-1)),s}function fC(n){let e=n;for(;e=e.parent;)if(lb(e)&&ob(n,e)===0)return e}function lb({record:n}){return!!(n.name||n.components&&Object.keys(n.components).length||n.redirect)}function pg(n){const e=os(dc),t=os(Ih),s=z(()=>{const a=Ke(n.to);return e.resolve(a)}),i=z(()=>{const{matched:a}=s.value,{length:u}=a,c=a[u-1],d=t.matched;if(!c||!d.length)return-1;const f=d.findIndex(lo.bind(null,c));if(f>-1)return f;const p=mg(a[u-2]);return u>1&&mg(c)===p&&d[d.length-1].path!==p?d.findIndex(lo.bind(null,a[u-2])):f}),r=z(()=>i.value>-1&&vC(t.params,s.value.params)),o=z(()=>i.value>-1&&i.value===t.matched.length-1&&nb(t.params,s.value.params));function l(a={}){if(gC(a)){const u=e[Ke(n.replace)?"replace":"push"](Ke(n.to)).catch(nl);return n.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:s,href:z(()=>s.value.href),isActive:r,isExactActive:o,navigate:l}}function hC(n){return n.length===1?n[0]:n}const pC=vy({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:pg,setup(n,{slots:e}){const t=gs(pg(n)),{options:s}=os(dc),i=z(()=>({[gg(n.activeClass,s.linkActiveClass,"router-link-active")]:t.isActive,[gg(n.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const r=e.default&&hC(e.default(t));return n.custom?r:zt("a",{"aria-current":t.isExactActive?n.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:i.value},r)}}}),mC=pC;function gC(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const e=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return n.preventDefault&&n.preventDefault(),!0}}function vC(n,e){for(const t in e){const s=e[t],i=n[t];if(typeof s=="string"){if(s!==i)return!1}else if(!xs(i)||i.length!==s.length||s.some((r,o)=>r!==i[o]))return!1}return!0}function mg(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const gg=(n,e,t)=>n??e??t,yC=vy({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:e,slots:t}){const s=os(rf),i=z(()=>n.route||s.value),r=os(lg,0),o=z(()=>{let u=Ke(r);const{matched:c}=i.value;let d;for(;(d=c[u])&&!d.components;)u++;return u}),l=z(()=>i.value.matched[o.value]);el(lg,z(()=>o.value+1)),el(qS,l),el(rf,i);const a=Q();return je(()=>[a.value,l.value,n.name],([u,c,d],[f,p,g])=>{c&&(c.instances[d]=u,p&&p!==c&&u&&u===f&&(c.leaveGuards.size||(c.leaveGuards=p.leaveGuards),c.updateGuards.size||(c.updateGuards=p.updateGuards))),u&&c&&(!p||!lo(c,p)||!f)&&(c.enterCallbacks[d]||[]).forEach(k=>k(u))},{flush:"post"}),()=>{const u=i.value,c=n.name,d=l.value,f=d&&d.components[c];if(!f)return vg(t.default,{Component:f,route:u});const p=d.props[c],g=p?p===!0?u.params:typeof p=="function"?p(u):p:null,x=zt(f,mt({},g,e,{onVnodeUnmounted:m=>{m.component.isUnmounted&&(d.instances[c]=null)},ref:a}));return vg(t.default,{Component:x,route:u})||x}}});function vg(n,e){if(!n)return null;const t=n(e);return t.length===1?t[0]:t}const bC=yC;function kC(n){const e=aC(n.routes,n),t=n.parseQuery||HS,s=n.stringifyQuery||og,i=n.history,r=Mo(),o=Mo(),l=Mo(),a=yw(ki);let u=ki;Vr&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=Yc.bind(null,le=>""+le),d=Yc.bind(null,ES),f=Yc.bind(null,bl);function p(le,te){let W,E;return sb(le)?(W=e.getRecordMatcher(le),E=te):E=le,e.addRoute(E,W)}function g(le){const te=e.getRecordMatcher(le);te&&e.removeRoute(te)}function k(){return e.getRoutes().map(le=>le.record)}function x(le){return!!e.getRecordMatcher(le)}function m(le,te){if(te=mt({},te||a.value),typeof le=="string"){const K=Xc(t,le,te.path),oe=e.resolve({path:K.path},te),ne=i.createHref(K.fullPath);return mt(K,oe,{params:f(oe.params),hash:bl(K.hash),redirectedFrom:void 0,href:ne})}let W;if(le.path!=null)W=mt({},le,{path:Xc(t,le.path,te.path).path});else{const K=mt({},le.params);for(const oe in K)K[oe]==null&&delete K[oe];W=mt({},le,{params:d(K)}),te.params=d(te.params)}const E=e.resolve(W,te),re=le.hash||"";E.params=c(f(E.params));const D=PS(s,mt({},le,{hash:SS(re),path:E.path})),$=i.createHref(D);return mt({fullPath:D,hash:re,query:s===og?WS(le.query):le.query||{}},E,{redirectedFrom:void 0,href:$})}function _(le){return typeof le=="string"?Xc(t,le,a.value.path):mt({},le)}function R(le,te){if(u!==le)return ao(Vt.NAVIGATION_CANCELLED,{from:te,to:le})}function U(le){return w(le)}function N(le){return U(mt(_(le),{replace:!0}))}function A(le,te){const W=le.matched[le.matched.length-1];if(W&&W.redirect){const{redirect:E}=W;let re=typeof E=="function"?E(le,te):E;return typeof re=="string"&&(re=re.includes("?")||re.includes("#")?re=_(re):{path:re},re.params={}),mt({query:le.query,hash:le.hash,params:re.path!=null?{}:le.params},re)}}function w(le,te){const W=u=m(le),E=a.value,re=le.state,D=le.force,$=le.replace===!0,K=A(W,E);if(K)return w(mt(_(K),{state:typeof K=="object"?mt({},re,K.state):re,force:D,replace:$}),te||W);const oe=W;oe.redirectedFrom=te;let ne;return!D&&RS(s,E,W)&&(ne=ao(Vt.NAVIGATION_DUPLICATED,{to:oe,from:E}),$e(E,E,!0,!1)),(ne?Promise.resolve(ne):ue(oe,E)).catch(se=>Js(se)?Js(se,Vt.NAVIGATION_GUARD_REDIRECT)?se:Te(se):de(se,oe,E)).then(se=>{if(se){if(Js(se,Vt.NAVIGATION_GUARD_REDIRECT))return w(mt({replace:$},_(se.to),{state:typeof se.to=="object"?mt({},re,se.to.state):re,force:D}),te||oe)}else se=F(oe,E,!0,$,re);return ie(oe,E,se),se})}function M(le,te){const W=R(le,te);return W?Promise.reject(W):Promise.resolve()}function G(le){const te=rt.values().next().value;return te&&typeof te.runWithContext=="function"?te.runWithContext(le):le()}function ue(le,te){let W;const[E,re,D]=GS(le,te);W=ed(E.reverse(),"beforeRouteLeave",le,te);for(const K of E)K.leaveGuards.forEach(oe=>{W.push(wi(oe,le,te))});const $=M.bind(null,le,te);return W.push($),ot(W).then(()=>{W=[];for(const K of r.list())W.push(wi(K,le,te));return W.push($),ot(W)}).then(()=>{W=ed(re,"beforeRouteUpdate",le,te);for(const K of re)K.updateGuards.forEach(oe=>{W.push(wi(oe,le,te))});return W.push($),ot(W)}).then(()=>{W=[];for(const K of D)if(K.beforeEnter)if(xs(K.beforeEnter))for(const oe of K.beforeEnter)W.push(wi(oe,le,te));else W.push(wi(K.beforeEnter,le,te));return W.push($),ot(W)}).then(()=>(le.matched.forEach(K=>K.enterCallbacks={}),W=ed(D,"beforeRouteEnter",le,te,G),W.push($),ot(W))).then(()=>{W=[];for(const K of o.list())W.push(wi(K,le,te));return W.push($),ot(W)}).catch(K=>Js(K,Vt.NAVIGATION_CANCELLED)?K:Promise.reject(K))}function ie(le,te,W){l.list().forEach(E=>G(()=>E(le,te,W)))}function F(le,te,W,E,re){const D=R(le,te);if(D)return D;const $=te===ki,K=Vr?history.state:{};W&&(E||$?i.replace(le.fullPath,mt({scroll:$&&K&&K.scroll},re)):i.push(le.fullPath,re)),a.value=le,$e(le,te,W,$),Te()}let ae;function ee(){ae||(ae=i.listen((le,te,W)=>{if(!pt.listening)return;const E=m(le),re=A(E,pt.currentRoute.value);if(re){w(mt(re,{replace:!0,force:!0}),E).catch(nl);return}u=E;const D=a.value;Vr&&NS(rg(D.fullPath,W.delta),cc()),ue(E,D).catch($=>Js($,Vt.NAVIGATION_ABORTED|Vt.NAVIGATION_CANCELLED)?$:Js($,Vt.NAVIGATION_GUARD_REDIRECT)?(w(mt(_($.to),{force:!0}),E).then(K=>{Js(K,Vt.NAVIGATION_ABORTED|Vt.NAVIGATION_DUPLICATED)&&!W.delta&&W.type===nf.pop&&i.go(-1,!1)}).catch(nl),Promise.reject()):(W.delta&&i.go(-W.delta,!1),de($,E,D))).then($=>{$=$||F(E,D,!1),$&&(W.delta&&!Js($,Vt.NAVIGATION_CANCELLED)?i.go(-W.delta,!1):W.type===nf.pop&&Js($,Vt.NAVIGATION_ABORTED|Vt.NAVIGATION_DUPLICATED)&&i.go(-1,!1)),ie(E,D,$)}).catch(nl)}))}let V=Mo(),J=Mo(),X;function de(le,te,W){Te(le);const E=J.list();return E.length?E.forEach(re=>re(le,te,W)):console.error(le),Promise.reject(le)}function Ce(){return X&&a.value!==ki?Promise.resolve():new Promise((le,te)=>{V.add([le,te])})}function Te(le){return X||(X=!le,ee(),V.list().forEach(([te,W])=>le?W(le):te()),V.reset()),le}function $e(le,te,W,E){const{scrollBehavior:re}=n;if(!Vr||!re)return Promise.resolve();const D=!W&&BS(rg(le.fullPath,0))||(E||!W)&&history.state&&history.state.scroll||null;return ns().then(()=>re(le,te,D)).then($=>$&&$S($)).catch($=>de($,le,te))}const me=le=>i.go(le);let qe;const rt=new Set,pt={currentRoute:a,listening:!0,addRoute:p,removeRoute:g,clearRoutes:e.clearRoutes,hasRoute:x,getRoutes:k,resolve:m,options:n,push:U,replace:N,go:me,back:()=>me(-1),forward:()=>me(1),beforeEach:r.add,beforeResolve:o.add,afterEach:l.add,onError:J.add,isReady:Ce,install(le){le.component("RouterLink",mC),le.component("RouterView",bC),le.config.globalProperties.$router=pt,Object.defineProperty(le.config.globalProperties,"$route",{enumerable:!0,get:()=>Ke(a)}),Vr&&!qe&&a.value===ki&&(qe=!0,U(i.location).catch(E=>{}));const te={};for(const E in ki)Object.defineProperty(te,E,{get:()=>a.value[E],enumerable:!0});le.provide(dc,pt),le.provide(Ih,Zv(te)),le.provide(rf,a);const W=le.unmount;rt.add(le),le.unmount=function(){rt.delete(le),rt.size<1&&(u=ki,ae&&ae(),ae=null,a.value=ki,qe=!1,X=!1),W()}}};function ot(le){return le.reduce((te,W)=>te.then(()=>G(W)),Promise.resolve())}return pt}function Kl(){return os(dc)}function wo(n){return os(Ih)}const Qs=Q(!1);function xC(){const n=()=>{Qs.value=!Qs.value},e=()=>{Qs.value=!0},t=()=>{Qs.value=!1};return je(Qs,s=>{s?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},{immediate:!1}),Cn(()=>{const s=localStorage.getItem("theme");s?Qs.value=s==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches&&(Qs.value=!0),Qs.value?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}),{isDark:Qs,toggle:n,enable:e,disable:t}}function _C(n,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 13.5V3.75m0 9.75a1.5 1.5 0 0 1 0 3m0-3a1.5 1.5 0 0 0 0 3m0 3.75V16.5m12-3V3.75m0 9.75a1.5 1.5 0 0 1 0 3m0-3a1.5 1.5 0 0 0 0 3m0 3.75V16.5m-6-9V3.75m0 3.75a1.5 1.5 0 0 1 0 3m0-3a1.5 1.5 0 0 0 0 3m0 9.75V10.5"})])}function wC(n,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"})])}function SC(n,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"})])}function CC(n,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})])}function ab(n,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"})])}function AC(n,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function EC(n,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})])}function TC(n,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125"})])}function jh(n,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}function fc(n,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"})])}function mr(n,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}function ub(n,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}function DC(n,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})])}function PC(n,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"})])}function RC(n,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}function kl(n,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"})])}function hc(n,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"})])}function pc(n,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"})])}function OC(n,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})])}function LC(n,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})])}function Vh(n,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5.25 14.25h13.5m-13.5 0a3 3 0 0 1-3-3m3 3a3 3 0 1 0 0 6h13.5a3 3 0 1 0 0-6m-16.5-3a3 3 0 0 1 3-3h13.5a3 3 0 0 1 3 3m-19.5 0a4.5 4.5 0 0 1 .9-2.7L5.737 5.1a3.375 3.375 0 0 1 2.7-1.35h7.126c1.062 0 2.062.5 2.7 1.35l2.587 3.45a4.5 4.5 0 0 1 .9 2.7m0 0a3 3 0 0 1-3 3m0 3h.008v.008h-.008v-.008Zm0-6h.008v.008h-.008v-.008Zm-3 6h.008v.008h-.008v-.008Zm0-6h.008v.008h-.008v-.008Z"})])}function MC(n,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"})])}function IC(n,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 0 1-1.125-1.125M3.375 19.5h7.5c.621 0 1.125-.504 1.125-1.125m-9.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125m0 3.75h-7.5A1.125 1.125 0 0 1 12 18.375m9.75-12.75c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125m19.5 0v1.5c0 .621-.504 1.125-1.125 1.125M2.25 5.625v1.5c0 .621.504 1.125 1.125 1.125m0 0h17.25m-17.25 0h7.5c.621 0 1.125.504 1.125 1.125M3.375 8.25c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125m17.25-3.75h-7.5c-.621 0-1.125.504-1.125 1.125m8.625-1.125c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125M12 10.875v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 10.875c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125M13.125 12h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125M20.625 12c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5M12 14.625v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 14.625c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125m0 1.5v-1.5m0 0c0-.621.504-1.125 1.125-1.125m0 0h7.5"})])}function jC(n,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}const VC={key:0,class:"pointer-events-auto w-full max-w-sm rounded-lg bg-white shadow-lg outline-1 outline-black/5 dark:bg-gray-800 dark:-outline-offset-1 dark:outline-white/10"},$C={class:"p-4"},NC={key:0,class:"shrink-0"},BC={key:0,class:"w-0 flex-1 text-sm font-medium text-gray-900 dark:text-white"},FC={class:"text-sm font-medium text-gray-900 dark:text-white"},UC={key:0,class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},zC={__name:"Toast",props:{title:{type:String,required:!0},description:{type:String,default:null},type:{type:String,default:"success",validator:n=>["success","error","warning","info"].includes(n)},variant:{type:String,default:"regular",validator:n=>["regular","condensed"].includes(n)},action:{type:String,default:null},duration:{type:Number,default:5e3},autoClose:{type:Boolean,default:!0}},emits:["close","action"],setup(n,{emit:e}){const t=n,s=e,i=Q(!1);let r=null;const o=z(()=>{const u={success:AC,error:jC,warning:DC,info:hc},c={success:"text-sky-400",error:"text-red-400",warning:"text-yellow-400",info:"text-blue-400"},d=u[t.type],f=c[t.type];return()=>zt(d,{class:`size-6 ${f}`})}),l=()=>{i.value=!1,r&&clearTimeout(r),setTimeout(()=>s("close"),200)},a=()=>{s("action"),l()};return Cn(()=>{i.value=!0,t.autoClose&&t.duration>0&&(r=setTimeout(l,t.duration))}),je(()=>t.duration,u=>{r&&clearTimeout(r),t.autoClose&&u>0&&(r=setTimeout(l,u))}),(u,c)=>(v(),we(Lh,{"enter-active-class":"transform transition duration-300 ease-out","enter-from-class":"translate-y-2 opacity-0 sm:translate-x-2 sm:translate-y-0","enter-to-class":"translate-y-0 opacity-100 sm:translate-x-0","leave-active-class":"transition duration-200 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:Z(()=>[i.value?(v(),b("div",VC,[h("div",$C,[h("div",{class:Se(n.variant==="condensed"?"flex items-center":"flex items-start")},[n.variant==="regular"?(v(),b("div",NC,[(v(),we(Un(o.value),{class:"size-6"}))])):H("",!0),h("div",{class:Se([n.variant==="regular"?"ml-3 w-0 flex-1 pt-0.5":"flex w-0 flex-1 justify-between"])},[n.variant==="condensed"?(v(),b("p",BC,Y(n.title),1)):(v(),b(be,{key:1},[h("p",FC,Y(n.title),1),n.description?(v(),b("p",UC,Y(n.description),1)):H("",!0)],64)),n.variant==="condensed"&&n.action?(v(),b("button",{key:2,type:"button",onClick:a,class:"ml-3 shrink-0 rounded-md bg-white text-sm font-medium text-sky-600 hover:text-sky-500 focus:outline-2 focus:outline-offset-2 focus:outline-sky-500 dark:bg-gray-800 dark:text-sky-400 dark:hover:text-sky-300 dark:focus:outline-sky-400"},Y(n.action),1)):H("",!0)],2),h("div",{class:"ml-4 flex shrink-0"},[h("button",{type:"button",onClick:l,class:"inline-flex rounded-md text-gray-400 hover:text-gray-500 focus:outline-2 focus:outline-offset-2 focus:outline-sky-600 dark:hover:text-white dark:focus:outline-sky-500"},[...c[0]||(c[0]=[h("span",{class:"sr-only"},"Close",-1),h("svg",{viewBox:"0 0 20 20",fill:"currentColor",class:"size-5"},[h("path",{d:"M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z"})],-1)])])])],2)])])):H("",!0)]),_:1}))}},HC={"aria-live":"assertive",class:"pointer-events-none fixed inset-0 flex items-end px-4 py-6 sm:items-start sm:p-6 z-50"},WC={class:"flex w-full flex-col items-center space-y-4 sm:items-end"},qC={__name:"ToastContainer",setup(n,{expose:e}){const t=Q([]);let s=1;const i=a=>{const u=a.type||"success",c=a.title,d=t.value.findIndex(p=>p.title===c&&p.type===u);d>-1&&t.value.splice(d,1);const f={id:s++,title:c,description:a.description||null,type:u,variant:a.variant||"regular",action:a.action||null,duration:a.duration!==void 0?a.duration:5e3,autoClose:a.autoClose!==void 0?a.autoClose:!0,onAction:a.onAction||null};return t.value.push(f),f.id},r=a=>{const u=t.value.findIndex(c=>c.id===a);u>-1&&t.value.splice(u,1)},o=a=>{a.onAction&&a.onAction()};return e({addToast:i,removeToast:r,clearAll:()=>{t.value=[]}}),(a,u)=>(v(),we(cy,{to:"body"},[h("div",HC,[h("div",WC,[(v(!0),b(be,null,Ve(t.value,c=>(v(),we(zC,{key:c.id,title:c.title,description:c.description,type:c.type,variant:c.variant,action:c.action,duration:c.duration,"auto-close":c.autoClose,onClose:d=>r(c.id),onAction:d=>o(c)},null,8,["title","description","type","variant","action","duration","auto-close","onClose","onAction"]))),128))])])]))}};let sr=null;function GC(n){sr=n}function mc(){const n=l=>{if(!sr){console.warn('ToastContainer not initialized. Add <ToastContainer ref="toastContainer" /> to your App.vue');return}return sr.addToast(l)};return{show:n,success:(l,a=null,u={})=>n({title:l,description:a,type:"success",...u}),error:(l,a=null,u={})=>n({title:l,description:a,type:"error",...u}),warning:(l,a=null,u={})=>n({title:l,description:a,type:"warning",...u}),info:(l,a=null,u={})=>n({title:l,description:a,type:"info",...u}),remove:l=>{sr&&sr.removeToast(l)},clearAll:()=>{sr&&sr.clearAll()}}}const KC={class:"flex min-h-screen bg-white dark:bg-zinc-900"},JC={class:"hidden lg:fixed lg:inset-y-0 lg:z-50 lg:flex lg:w-72 lg:flex-col xl:w-80"},QC={class:"flex grow flex-col overflow-y-auto border-r border-zinc-900/10 px-6 pb-8 pt-4 dark:border-white/10"},YC={key:0,class:"mt-6"},XC={class:"mt-10"},ZC={role:"list"},e4={class:"relative mt-6"},t4={class:"relative mt-3 pl-2"},n4={role:"list",class:"border-l border-transparent"},s4={class:"truncate"},i4={key:0,class:"relative mt-6"},r4={class:"relative mt-3 pl-2"},o4={role:"list",class:"border-l border-transparent"},l4={class:"truncate"},a4={key:0,class:"text-xs text-zinc-400 dark:text-zinc-500"},u4={class:"relative mt-6"},c4={class:"relative mt-3 pl-2"},d4={role:"list",class:"border-l border-transparent"},f4={class:"truncate"},h4={class:"text-xs text-zinc-400 dark:text-zinc-500"},p4={class:"sticky bottom-0 mt-6 border-t border-zinc-900/10 pt-6 dark:border-white/10"},m4={class:"lg:pl-72 xl:pl-80 w-full"},g4={class:"h-screen overflow-auto"},v4={__name:"App",setup(n){const e=Q(null),t=wo(),{isDark:s,toggle:i}=xC(),r=Q([]),o=Q([]),l=async()=>{try{const _=await(await fetch("/api/settings/get")).json();r.value=_.projects||[]}catch(m){console.error("Failed to load projects:",m)}},a=async()=>{try{const _=await(await fetch("/api/docs/categories")).json();o.value=_.categories||[]}catch(m){console.error("Failed to load docs categories:",m)}};el("loadProjects",l);const u=m=>x.findIndex(R=>R.to==="/projects"&&t.path==="/projects/new"?!1:t.path.startsWith(R.to)),c=()=>r.value.findIndex(m=>t.path===`/project/${m.id}`),d=()=>{const m=t.path.match(/^\/docs\/category\/(\d+)/);if(m){const _=parseInt(m[1]);return o.value.findIndex(R=>R.id===_)}if(t.path.startsWith("/docs/function/")){const _=t.query.category;if(_)return o.value.findIndex(R=>R.id===parseInt(_))}return-1},f=m=>m.to==="/projects"&&t.path==="/projects/new"||t.path.startsWith("/docs")?!1:t.path.startsWith(m.to),p=m=>t.path===`/docs/category/${m}`?!0:t.path.startsWith("/docs/function/")&&t.query.category?parseInt(t.query.category)===m:!1,g=()=>zt("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[zt("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})]),k=()=>zt("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[zt("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})]),x=[{id:"projects",label:"Projects",to:"/projects"},{id:"settings",label:"New Project Defaults",to:"/settings"}];return Cn(async()=>{GC(e.value),await l(),await a()}),(m,_)=>{const R=qd("router-link"),U=qd("router-view");return v(),b("div",KC,[h("div",JC,[h("div",QC,[S(R,{to:"/",class:"flex items-center gap-3"},{default:Z(()=>[..._[1]||(_[1]=[h("img",{src:hS,alt:"Framework",class:"h-10 w-10"},null,-1),h("span",{class:"text-lg font-semibold text-zinc-900 dark:text-white"},"Framework",-1)])]),_:1}),m.$route.path!=="/projects/new"?(v(),b("div",YC,[S(R,{to:"/projects/new",class:"flex w-full items-center justify-center gap-2 rounded-lg bg-white px-4 py-2.5 text-sm font-medium text-zinc-900 ring-1 ring-zinc-900/10 transition hover:bg-zinc-50 hover:ring-zinc-900/20 dark:bg-white/5 dark:text-white dark:ring-white/10 dark:hover:bg-white/10"},{default:Z(()=>[..._[2]||(_[2]=[h("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),ce(" New Project ",-1)])]),_:1})])):H("",!0),h("nav",XC,[h("ul",ZC,[h("li",e4,[_[4]||(_[4]=h("h2",{class:"text-xs font-semibold text-zinc-900 dark:text-white"}," Framework ",-1)),h("div",t4,[_[3]||(_[3]=h("div",{class:"absolute inset-y-0 left-2 w-px bg-zinc-900/10 dark:bg-white/5"},null,-1)),u()>=0?(v(),b("div",{key:0,class:"absolute left-2 h-6 w-px bg-sky-500 transition-all duration-200",style:Kr({top:`${u()*32+4}px`})},null,4)):H("",!0),h("ul",n4,[(v(),b(be,null,Ve(x,N=>h("li",{key:N.id,class:"relative"},[S(R,{to:N.to,class:Se(["flex justify-between gap-2 py-1 pl-4 pr-3 text-sm transition",f(N)?"text-zinc-900 dark:text-white":"text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white"])},{default:Z(()=>[h("span",s4,Y(N.label),1)]),_:2},1032,["to","class"])])),64))])])]),r.value.length>0?(v(),b("li",i4,[_[6]||(_[6]=h("h2",{class:"text-xs font-semibold text-zinc-900 dark:text-white"}," Your Projects ",-1)),h("div",r4,[_[5]||(_[5]=h("div",{class:"absolute inset-y-0 left-2 w-px bg-zinc-900/10 dark:bg-white/5"},null,-1)),c()>=0?(v(),b("div",{key:0,class:"absolute left-2 h-6 w-px bg-sky-500 transition-all duration-200",style:Kr({top:`${c()*32+4}px`})},null,4)):H("",!0),h("ul",o4,[(v(!0),b(be,null,Ve(r.value,N=>(v(),b("li",{key:N.id,class:"relative"},[S(R,{to:`/project/${N.id}`,class:Se(["flex justify-between gap-2 py-1 pl-4 pr-3 text-sm transition",m.$route.path===`/project/${N.id}`?"text-zinc-900 dark:text-white":"text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white"])},{default:Z(()=>[h("span",l4,Y(N.name),1),N.type?(v(),b("span",a4,Y(N.type==="project"?"":N.type==="course"?"":""),1)):H("",!0)]),_:2},1032,["to","class"])]))),128))])])])):H("",!0),h("li",u4,[_[8]||(_[8]=h("h2",{class:"text-xs font-semibold text-zinc-900 dark:text-white"}," Documentation ",-1)),h("div",c4,[_[7]||(_[7]=h("div",{class:"absolute inset-y-0 left-2 w-px bg-zinc-900/10 dark:bg-white/5"},null,-1)),d()>=0?(v(),b("div",{key:0,class:"absolute left-2 h-6 w-px bg-sky-500 transition-all duration-200",style:Kr({top:`${d()*32+4}px`})},null,4)):H("",!0),h("ul",d4,[(v(!0),b(be,null,Ve(o.value,N=>(v(),b("li",{key:N.id,class:"relative"},[S(R,{to:`/docs/category/${N.id}`,class:Se(["flex justify-between gap-2 py-1 pl-4 pr-3 text-sm transition",p(N.id)?"text-zinc-900 dark:text-white":"text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white"])},{default:Z(()=>[h("span",f4,Y(N.name),1),h("span",h4,Y(N.function_count),1)]),_:2},1032,["to","class"])]))),128))])])]),h("li",p4,[h("button",{onClick:_[0]||(_[0]=(...N)=>Ke(i)&&Ke(i)(...N)),class:"flex w-full items-center gap-3 text-sm text-zinc-600 transition hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white"},[(v(),we(Un(Ke(s)?k:g),{class:"h-5 w-5 shrink-0"})),ce(" "+Y(Ke(s)?"Light Mode":"Dark Mode"),1)])])])])])]),h("div",m4,[h("main",g4,[S(U)])]),S(qC,{ref_key:"toastContainer",ref:e},null,512)])}}},y4=["title"],b4={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},k4={key:1,class:"h-4 w-4 text-sky-600 dark:text-sky-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},x4={key:2},zs={__name:"CopyButton",props:{value:{type:String,required:!0},showLabel:{type:Boolean,default:!1},variant:{type:String,default:"default",validator:n=>["default","ghost","bare"].includes(n)},successMessage:{type:String,default:"Copied to clipboard"}},setup(n){const e=n,t=mc(),s=Q(!1);let i=null;const r=z(()=>e.variant==="bare"?"inline-flex items-center text-sm font-medium transition-all":"inline-flex items-center gap-1.5 rounded-md px-2.5 py-1.5 text-sm font-medium transition-all"),o=z(()=>e.variant==="ghost"?"text-zinc-600 hover:bg-zinc-100 dark:text-zinc-400 dark:hover:bg-zinc-800":e.variant==="bare"?"gap-2 rounded-lg transition-all focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-1 focus-visible:outline-sky-500":"bg-zinc-100 text-zinc-700 hover:bg-zinc-200 dark:bg-zinc-800 dark:text-zinc-300 dark:hover:bg-zinc-700"),l=async()=>{try{await navigator.clipboard.writeText(e.value),s.value=!0,t.success("Copied!",e.successMessage),i&&clearTimeout(i),i=setTimeout(()=>{s.value=!1},2e3)}catch(a){t.error("Copy failed","Could not copy to clipboard"),console.error("Failed to copy:",a)}};return(a,u)=>(v(),b("button",{type:"button",onClick:l,class:Se([r.value,o.value,s.value&&"ring-2 ring-sky-500/20"]),title:s.value?"Copied!":"Copy to clipboard"},[ht(a.$slots,"default",{copied:s.value},()=>[s.value?(v(),b("svg",k4,[...u[1]||(u[1]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(v(),b("svg",b4,[...u[0]||(u[0]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"},null,-1)])])),n.showLabel?(v(),b("span",x4,Y(s.value?"Copied!":"Copy"),1)):H("",!0)])],10,y4))}},gc=(n,e)=>{const t=n.__vccOpts||n;for(const[s,i]of e)t[s]=i;return t},_4=["innerHTML"],w4={__name:"MarkdownText",props:{content:{type:String,default:""}},setup(n){const e=n,t=z(()=>{if(!e.content)return"";let s=e.content;s=s.replace(/```\n?([\s\S]*?)```/g,(g,k)=>`<pre class="bg-gray-100 dark:bg-gray-800 p-3 rounded text-sm font-mono overflow-x-auto my-2"><code>${k.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").trim()}</code></pre>`),s=s.split(/(<pre[\s\S]*?<\/pre>)/).map(g=>g.startsWith("<pre")?g:g.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")).join(""),s=s.replace(/`([^`]+)`/g,'<code class="bg-gray-100 dark:bg-gray-800 px-1 py-0.5 rounded text-sm font-mono">$1</code>'),s=s.replace(/\*\*([^*]+)\*\*/g,"<strong>$1</strong>"),s=s.replace(new RegExp("(?<!\\S)\\*([^*]+)\\*(?!\\S)","g"),"<em>$1</em>"),s=s.replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" class="text-sky-600 hover:underline" target="_blank">$1</a>');const r=s.split(`
`),o=[];let l=[],a=[],u=null;const c=()=>{l.length>0&&(o.push(`<p>${l.join(" ")}</p>`),l=[])},d=()=>{if(a.length>0&&u){const g=u,k=a.map(x=>`<li>${x}</li>`).join("");o.push(`<${g} class="list-${u==="ul"?"disc":"decimal"} list-inside space-y-1 my-2">${k}</${g}>`),a=[],u=null}};let f=!1,p=[];for(const g of r){const k=g.trim();if(k.startsWith("<pre")){c(),d(),f=!0,p=[g],k.includes("</pre>")&&(o.push(g),f=!1,p=[]);continue}if(f){p.push(g),k.includes("</pre>")&&(o.push(p.join(`
`)),f=!1,p=[]);continue}const x=k.match(/^[-]\s+(.*)$/),m=k.match(/^\d+\.\s+(.*)$/);x?(c(),u&&u!=="ul"&&d(),u="ul",a.push(x[1])):m?(c(),u&&u!=="ol"&&d(),u="ol",a.push(m[1])):k===""?(c(),d()):(d(),l.push(k))}return c(),d(),o.join("")});return(s,i)=>(v(),b("div",{innerHTML:t.value,class:"markdown-text"},null,8,_4))}},Zi=gc(w4,[["__scopeId","data-v-4f93a38e"]]),S4="modulepreload",C4=function(n){return"/"+n},yg={},P=function(e,t,s){let i=Promise.resolve();if(t&&t.length>0){let u=function(c){return Promise.all(c.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};var o=u;document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),a=l?.nonce||l?.getAttribute("nonce");i=u(t.map(c=>{if(c=C4(c),c in yg)return;yg[c]=!0;const d=c.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":S4,d||(p.as="script"),p.crossOrigin="",p.href=c,a&&p.setAttribute("nonce",a),document.head.appendChild(p),d)return new Promise((g,k)=>{p.addEventListener("load",g),p.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${c}`)))})}))}function r(l){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=l,window.dispatchEvent(a),!a.defaultPrevented)throw l}return i.then(l=>{for(const a of l||[])a.status==="rejected"&&r(a.reason);return e().catch(r)})};let Wt=class extends Error{constructor(e){super(e),this.name="ShikiError"}};function A4(n){return $h(n)}function $h(n){return Array.isArray(n)?E4(n):n instanceof RegExp?n:typeof n=="object"?T4(n):n}function E4(n){let e=[];for(let t=0,s=n.length;t<s;t++)e[t]=$h(n[t]);return e}function T4(n){let e={};for(let t in n)e[t]=$h(n[t]);return e}function cb(n,...e){return e.forEach(t=>{for(let s in t)n[s]=t[s]}),n}function db(n){const e=~n.lastIndexOf("/")||~n.lastIndexOf("\\");return e===0?n:~e===n.length-1?db(n.substring(0,n.length-1)):n.substr(~e+1)}var td=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g,xa=class{static hasCaptures(n){return n===null?!1:(td.lastIndex=0,td.test(n))}static replaceCaptures(n,e,t){return n.replace(td,(s,i,r,o)=>{let l=t[parseInt(i||r,10)];if(l){let a=e.substring(l.start,l.end);for(;a[0]===".";)a=a.substring(1);switch(o){case"downcase":return a.toLowerCase();case"upcase":return a.toUpperCase();default:return a}}else return s})}};function fb(n,e){return n<e?-1:n>e?1:0}function hb(n,e){if(n===null&&e===null)return 0;if(!n)return-1;if(!e)return 1;let t=n.length,s=e.length;if(t===s){for(let i=0;i<t;i++){let r=fb(n[i],e[i]);if(r!==0)return r}return 0}return t-s}function bg(n){return!!(/^#[0-9a-f]{6}$/i.test(n)||/^#[0-9a-f]{8}$/i.test(n)||/^#[0-9a-f]{3}$/i.test(n)||/^#[0-9a-f]{4}$/i.test(n))}function pb(n){return n.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")}var mb=class{constructor(n){this.fn=n}cache=new Map;get(n){if(this.cache.has(n))return this.cache.get(n);const e=this.fn(n);return this.cache.set(n,e),e}},xu=class{constructor(n,e,t){this._colorMap=n,this._defaults=e,this._root=t}static createFromRawTheme(n,e){return this.createFromParsedTheme(R4(n),e)}static createFromParsedTheme(n,e){return L4(n,e)}_cachedMatchRoot=new mb(n=>this._root.match(n));getColorMap(){return this._colorMap.getColorMap()}getDefaults(){return this._defaults}match(n){if(n===null)return this._defaults;const e=n.scopeName,s=this._cachedMatchRoot.get(e).find(i=>D4(n.parent,i.parentScopes));return s?new gb(s.fontStyle,s.foreground,s.background):null}},nd=class eu{constructor(e,t){this.parent=e,this.scopeName=t}static push(e,t){for(const s of t)e=new eu(e,s);return e}static from(...e){let t=null;for(let s=0;s<e.length;s++)t=new eu(t,e[s]);return t}push(e){return new eu(this,e)}getSegments(){let e=this;const t=[];for(;e;)t.push(e.scopeName),e=e.parent;return t.reverse(),t}toString(){return this.getSegments().join(" ")}extends(e){return this===e?!0:this.parent===null?!1:this.parent.extends(e)}getExtensionIfDefined(e){const t=[];let s=this;for(;s&&s!==e;)t.push(s.scopeName),s=s.parent;return s===e?t.reverse():void 0}};function D4(n,e){if(e.length===0)return!0;for(let t=0;t<e.length;t++){let s=e[t],i=!1;if(s===">"){if(t===e.length-1)return!1;s=e[++t],i=!0}for(;n&&!P4(n.scopeName,s);){if(i)return!1;n=n.parent}if(!n)return!1;n=n.parent}return!0}function P4(n,e){return e===n||n.startsWith(e)&&n[e.length]==="."}var gb=class{constructor(n,e,t){this.fontStyle=n,this.foregroundId=e,this.backgroundId=t}};function R4(n){if(!n)return[];if(!n.settings||!Array.isArray(n.settings))return[];let e=n.settings,t=[],s=0;for(let i=0,r=e.length;i<r;i++){let o=e[i];if(!o.settings)continue;let l;if(typeof o.scope=="string"){let d=o.scope;d=d.replace(/^[,]+/,""),d=d.replace(/[,]+$/,""),l=d.split(",")}else Array.isArray(o.scope)?l=o.scope:l=[""];let a=-1;if(typeof o.settings.fontStyle=="string"){a=0;let d=o.settings.fontStyle.split(" ");for(let f=0,p=d.length;f<p;f++)switch(d[f]){case"italic":a=a|1;break;case"bold":a=a|2;break;case"underline":a=a|4;break;case"strikethrough":a=a|8;break}}let u=null;typeof o.settings.foreground=="string"&&bg(o.settings.foreground)&&(u=o.settings.foreground);let c=null;typeof o.settings.background=="string"&&bg(o.settings.background)&&(c=o.settings.background);for(let d=0,f=l.length;d<f;d++){let g=l[d].trim().split(" "),k=g[g.length-1],x=null;g.length>1&&(x=g.slice(0,g.length-1),x.reverse()),t[s++]=new O4(k,x,i,a,u,c)}}return t}var O4=class{constructor(n,e,t,s,i,r){this.scope=n,this.parentScopes=e,this.index=t,this.fontStyle=s,this.foreground=i,this.background=r}},_n=(n=>(n[n.NotSet=-1]="NotSet",n[n.None=0]="None",n[n.Italic=1]="Italic",n[n.Bold=2]="Bold",n[n.Underline=4]="Underline",n[n.Strikethrough=8]="Strikethrough",n))(_n||{});function L4(n,e){n.sort((a,u)=>{let c=fb(a.scope,u.scope);return c!==0||(c=hb(a.parentScopes,u.parentScopes),c!==0)?c:a.index-u.index});let t=0,s="#000000",i="#ffffff";for(;n.length>=1&&n[0].scope==="";){let a=n.shift();a.fontStyle!==-1&&(t=a.fontStyle),a.foreground!==null&&(s=a.foreground),a.background!==null&&(i=a.background)}let r=new M4(e),o=new gb(t,r.getId(s),r.getId(i)),l=new j4(new of(0,null,-1,0,0),[]);for(let a=0,u=n.length;a<u;a++){let c=n[a];l.insert(0,c.scope,c.parentScopes,c.fontStyle,r.getId(c.foreground),r.getId(c.background))}return new xu(r,o,l)}var M4=class{_isFrozen;_lastColorId;_id2color;_color2id;constructor(n){if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(n)){this._isFrozen=!0;for(let e=0,t=n.length;e<t;e++)this._color2id[n[e]]=e,this._id2color[e]=n[e]}else this._isFrozen=!1}getId(n){if(n===null)return 0;n=n.toUpperCase();let e=this._color2id[n];if(e)return e;if(this._isFrozen)throw new Error(`Missing color in color map - ${n}`);return e=++this._lastColorId,this._color2id[n]=e,this._id2color[e]=n,e}getColorMap(){return this._id2color.slice(0)}},I4=Object.freeze([]),of=class vb{scopeDepth;parentScopes;fontStyle;foreground;background;constructor(e,t,s,i,r){this.scopeDepth=e,this.parentScopes=t||I4,this.fontStyle=s,this.foreground=i,this.background=r}clone(){return new vb(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}static cloneArr(e){let t=[];for(let s=0,i=e.length;s<i;s++)t[s]=e[s].clone();return t}acceptOverwrite(e,t,s,i){this.scopeDepth>e?console.log("how did this happen?"):this.scopeDepth=e,t!==-1&&(this.fontStyle=t),s!==0&&(this.foreground=s),i!==0&&(this.background=i)}},j4=class lf{constructor(e,t=[],s={}){this._mainRule=e,this._children=s,this._rulesWithParentScopes=t}_rulesWithParentScopes;static _cmpBySpecificity(e,t){if(e.scopeDepth!==t.scopeDepth)return t.scopeDepth-e.scopeDepth;let s=0,i=0;for(;e.parentScopes[s]===">"&&s++,t.parentScopes[i]===">"&&i++,!(s>=e.parentScopes.length||i>=t.parentScopes.length);){const r=t.parentScopes[i].length-e.parentScopes[s].length;if(r!==0)return r;s++,i++}return t.parentScopes.length-e.parentScopes.length}match(e){if(e!==""){let s=e.indexOf("."),i,r;if(s===-1?(i=e,r=""):(i=e.substring(0,s),r=e.substring(s+1)),this._children.hasOwnProperty(i))return this._children[i].match(r)}const t=this._rulesWithParentScopes.concat(this._mainRule);return t.sort(lf._cmpBySpecificity),t}insert(e,t,s,i,r,o){if(t===""){this._doInsertHere(e,s,i,r,o);return}let l=t.indexOf("."),a,u;l===-1?(a=t,u=""):(a=t.substring(0,l),u=t.substring(l+1));let c;this._children.hasOwnProperty(a)?c=this._children[a]:(c=new lf(this._mainRule.clone(),of.cloneArr(this._rulesWithParentScopes)),this._children[a]=c),c.insert(e+1,u,s,i,r,o)}_doInsertHere(e,t,s,i,r){if(t===null){this._mainRule.acceptOverwrite(e,s,i,r);return}for(let o=0,l=this._rulesWithParentScopes.length;o<l;o++){let a=this._rulesWithParentScopes[o];if(hb(a.parentScopes,t)===0){a.acceptOverwrite(e,s,i,r);return}}s===-1&&(s=this._mainRule.fontStyle),i===0&&(i=this._mainRule.foreground),r===0&&(r=this._mainRule.background),this._rulesWithParentScopes.push(new of(e,t,s,i,r))}},uo=class es{static toBinaryStr(e){return e.toString(2).padStart(32,"0")}static print(e){const t=es.getLanguageId(e),s=es.getTokenType(e),i=es.getFontStyle(e),r=es.getForeground(e),o=es.getBackground(e);console.log({languageId:t,tokenType:s,fontStyle:i,foreground:r,background:o})}static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getBackground(e){return(e&4278190080)>>>24}static set(e,t,s,i,r,o,l){let a=es.getLanguageId(e),u=es.getTokenType(e),c=es.containsBalancedBrackets(e)?1:0,d=es.getFontStyle(e),f=es.getForeground(e),p=es.getBackground(e);return t!==0&&(a=t),s!==8&&(u=s),i!==null&&(c=i?1:0),r!==-1&&(d=r),o!==0&&(f=o),l!==0&&(p=l),(a<<0|u<<8|c<<10|d<<11|f<<15|p<<24)>>>0}};function _u(n,e){const t=[],s=V4(n);let i=s.next();for(;i!==null;){let a=0;if(i.length===2&&i.charAt(1)===":"){switch(i.charAt(0)){case"R":a=1;break;case"L":a=-1;break;default:console.log(`Unknown priority ${i} in scope selector`)}i=s.next()}let u=o();if(t.push({matcher:u,priority:a}),i!==",")break;i=s.next()}return t;function r(){if(i==="-"){i=s.next();const a=r();return u=>!!a&&!a(u)}if(i==="("){i=s.next();const a=l();return i===")"&&(i=s.next()),a}if(kg(i)){const a=[];do a.push(i),i=s.next();while(kg(i));return u=>e(a,u)}return null}function o(){const a=[];let u=r();for(;u;)a.push(u),u=r();return c=>a.every(d=>d(c))}function l(){const a=[];let u=o();for(;u&&(a.push(u),i==="|"||i===",");){do i=s.next();while(i==="|"||i===",");u=o()}return c=>a.some(d=>d(c))}}function kg(n){return!!n&&!!n.match(/[\w\.:]+/)}function V4(n){let e=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,t=e.exec(n);return{next:()=>{if(!t)return null;const s=t[0];return t=e.exec(n),s}}}function yb(n){typeof n.dispose=="function"&&n.dispose()}var xl=class{constructor(n){this.scopeName=n}toKey(){return this.scopeName}},$4=class{constructor(n,e){this.scopeName=n,this.ruleName=e}toKey(){return`${this.scopeName}#${this.ruleName}`}},N4=class{_references=[];_seenReferenceKeys=new Set;get references(){return this._references}visitedRule=new Set;add(n){const e=n.toKey();this._seenReferenceKeys.has(e)||(this._seenReferenceKeys.add(e),this._references.push(n))}},B4=class{constructor(n,e){this.repo=n,this.initialScopeName=e,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new xl(this.initialScopeName)]}seenFullScopeRequests=new Set;seenPartialScopeRequests=new Set;Q;processQueue(){const n=this.Q;this.Q=[];const e=new N4;for(const t of n)F4(t,this.initialScopeName,this.repo,e);for(const t of e.references)if(t instanceof xl){if(this.seenFullScopeRequests.has(t.scopeName))continue;this.seenFullScopeRequests.add(t.scopeName),this.Q.push(t)}else{if(this.seenFullScopeRequests.has(t.scopeName)||this.seenPartialScopeRequests.has(t.toKey()))continue;this.seenPartialScopeRequests.add(t.toKey()),this.Q.push(t)}}};function F4(n,e,t,s){const i=t.lookup(n.scopeName);if(!i){if(n.scopeName===e)throw new Error(`No grammar provided for <${e}>`);return}const r=t.lookup(e);n instanceof xl?tu({baseGrammar:r,selfGrammar:i},s):af(n.ruleName,{baseGrammar:r,selfGrammar:i,repository:i.repository},s);const o=t.injections(n.scopeName);if(o)for(const l of o)s.add(new xl(l))}function af(n,e,t){if(e.repository&&e.repository[n]){const s=e.repository[n];wu([s],e,t)}}function tu(n,e){n.selfGrammar.patterns&&Array.isArray(n.selfGrammar.patterns)&&wu(n.selfGrammar.patterns,{...n,repository:n.selfGrammar.repository},e),n.selfGrammar.injections&&wu(Object.values(n.selfGrammar.injections),{...n,repository:n.selfGrammar.repository},e)}function wu(n,e,t){for(const s of n){if(t.visitedRule.has(s))continue;t.visitedRule.add(s);const i=s.repository?cb({},e.repository,s.repository):e.repository;Array.isArray(s.patterns)&&wu(s.patterns,{...e,repository:i},t);const r=s.include;if(!r)continue;const o=bb(r);switch(o.kind){case 0:tu({...e,selfGrammar:e.baseGrammar},t);break;case 1:tu(e,t);break;case 2:af(o.ruleName,{...e,repository:i},t);break;case 3:case 4:const l=o.scopeName===e.selfGrammar.scopeName?e.selfGrammar:o.scopeName===e.baseGrammar.scopeName?e.baseGrammar:void 0;if(l){const a={baseGrammar:e.baseGrammar,selfGrammar:l,repository:i};o.kind===4?af(o.ruleName,a,t):tu(a,t)}else o.kind===4?t.add(new $4(o.scopeName,o.ruleName)):t.add(new xl(o.scopeName));break}}}var U4=class{kind=0},z4=class{kind=1},H4=class{constructor(n){this.ruleName=n}kind=2},W4=class{constructor(n){this.scopeName=n}kind=3},q4=class{constructor(n,e){this.scopeName=n,this.ruleName=e}kind=4};function bb(n){if(n==="$base")return new U4;if(n==="$self")return new z4;const e=n.indexOf("#");if(e===-1)return new W4(n);if(e===0)return new H4(n.substring(1));{const t=n.substring(0,e),s=n.substring(e+1);return new q4(t,s)}}var G4=/\\(\d+)/,xg=/\\(\d+)/g,K4=-1,kb=-2;var Jl=class{$location;id;_nameIsCapturing;_name;_contentNameIsCapturing;_contentName;constructor(e,t,s,i){this.$location=e,this.id=t,this._name=s||null,this._nameIsCapturing=xa.hasCaptures(this._name),this._contentName=i||null,this._contentNameIsCapturing=xa.hasCaptures(this._contentName)}get debugName(){const e=this.$location?`${db(this.$location.filename)}:${this.$location.line}`:"unknown";return`${this.constructor.name}#${this.id} @ ${e}`}getName(e,t){return!this._nameIsCapturing||this._name===null||e===null||t===null?this._name:xa.replaceCaptures(this._name,e,t)}getContentName(e,t){return!this._contentNameIsCapturing||this._contentName===null?this._contentName:xa.replaceCaptures(this._contentName,e,t)}},J4=class extends Jl{retokenizeCapturedWithRuleId;constructor(n,e,t,s,i){super(n,e,t,s),this.retokenizeCapturedWithRuleId=i}dispose(){}collectPatterns(n,e){throw new Error("Not supported!")}compile(n,e){throw new Error("Not supported!")}compileAG(n,e,t,s){throw new Error("Not supported!")}},Q4=class extends Jl{_match;captures;_cachedCompiledPatterns;constructor(n,e,t,s,i){super(n,e,t,null),this._match=new _l(s,this.id),this.captures=i,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugMatchRegExp(){return`${this._match.source}`}collectPatterns(n,e){e.push(this._match)}compile(n,e){return this._getCachedCompiledPatterns(n).compile(n)}compileAG(n,e,t,s){return this._getCachedCompiledPatterns(n).compileAG(n,t,s)}_getCachedCompiledPatterns(n){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new wl,this.collectPatterns(n,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},_g=class extends Jl{hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(n,e,t,s,i){super(n,e,t,s),this.patterns=i.patterns,this.hasMissingPatterns=i.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}collectPatterns(n,e){for(const t of this.patterns)n.getRule(t).collectPatterns(n,e)}compile(n,e){return this._getCachedCompiledPatterns(n).compile(n)}compileAG(n,e,t,s){return this._getCachedCompiledPatterns(n).compileAG(n,t,s)}_getCachedCompiledPatterns(n){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new wl,this.collectPatterns(n,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},uf=class extends Jl{_begin;beginCaptures;_end;endHasBackReferences;endCaptures;applyEndPatternLast;hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(n,e,t,s,i,r,o,l,a,u){super(n,e,t,s),this._begin=new _l(i,this.id),this.beginCaptures=r,this._end=new _l(o||"",-1),this.endHasBackReferences=this._end.hasBackReferences,this.endCaptures=l,this.applyEndPatternLast=a||!1,this.patterns=u.patterns,this.hasMissingPatterns=u.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugEndRegExp(){return`${this._end.source}`}getEndWithResolvedBackReferences(n,e){return this._end.resolveBackReferences(n,e)}collectPatterns(n,e){e.push(this._begin)}compile(n,e){return this._getCachedCompiledPatterns(n,e).compile(n)}compileAG(n,e,t,s){return this._getCachedCompiledPatterns(n,e).compileAG(n,t,s)}_getCachedCompiledPatterns(n,e){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new wl;for(const t of this.patterns)n.getRule(t).collectPatterns(n,this._cachedCompiledPatterns);this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,e):this._cachedCompiledPatterns.setSource(0,e)),this._cachedCompiledPatterns}},Su=class extends Jl{_begin;beginCaptures;whileCaptures;_while;whileHasBackReferences;hasMissingPatterns;patterns;_cachedCompiledPatterns;_cachedCompiledWhilePatterns;constructor(n,e,t,s,i,r,o,l,a){super(n,e,t,s),this._begin=new _l(i,this.id),this.beginCaptures=r,this.whileCaptures=l,this._while=new _l(o,kb),this.whileHasBackReferences=this._while.hasBackReferences,this.patterns=a.patterns,this.hasMissingPatterns=a.hasMissingPatterns,this._cachedCompiledPatterns=null,this._cachedCompiledWhilePatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugWhileRegExp(){return`${this._while.source}`}getWhileWithResolvedBackReferences(n,e){return this._while.resolveBackReferences(n,e)}collectPatterns(n,e){e.push(this._begin)}compile(n,e){return this._getCachedCompiledPatterns(n).compile(n)}compileAG(n,e,t,s){return this._getCachedCompiledPatterns(n).compileAG(n,t,s)}_getCachedCompiledPatterns(n){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new wl;for(const e of this.patterns)n.getRule(e).collectPatterns(n,this._cachedCompiledPatterns)}return this._cachedCompiledPatterns}compileWhile(n,e){return this._getCachedCompiledWhilePatterns(n,e).compile(n)}compileWhileAG(n,e,t,s){return this._getCachedCompiledWhilePatterns(n,e).compileAG(n,t,s)}_getCachedCompiledWhilePatterns(n,e){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new wl,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,e||""),this._cachedCompiledWhilePatterns}},xb=class mn{static createCaptureRule(e,t,s,i,r){return e.registerRule(o=>new J4(t,o,s,i,r))}static getCompiledRuleId(e,t,s){return e.id||t.registerRule(i=>{if(e.id=i,e.match)return new Q4(e.$vscodeTextmateLocation,e.id,e.name,e.match,mn._compileCaptures(e.captures,t,s));if(typeof e.begin>"u"){e.repository&&(s=cb({},s,e.repository));let r=e.patterns;return typeof r>"u"&&e.include&&(r=[{include:e.include}]),new _g(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,mn._compilePatterns(r,t,s))}return e.while?new Su(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,mn._compileCaptures(e.beginCaptures||e.captures,t,s),e.while,mn._compileCaptures(e.whileCaptures||e.captures,t,s),mn._compilePatterns(e.patterns,t,s)):new uf(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,mn._compileCaptures(e.beginCaptures||e.captures,t,s),e.end,mn._compileCaptures(e.endCaptures||e.captures,t,s),e.applyEndPatternLast,mn._compilePatterns(e.patterns,t,s))}),e.id}static _compileCaptures(e,t,s){let i=[];if(e){let r=0;for(const o in e){if(o==="$vscodeTextmateLocation")continue;const l=parseInt(o,10);l>r&&(r=l)}for(let o=0;o<=r;o++)i[o]=null;for(const o in e){if(o==="$vscodeTextmateLocation")continue;const l=parseInt(o,10);let a=0;e[o].patterns&&(a=mn.getCompiledRuleId(e[o],t,s)),i[l]=mn.createCaptureRule(t,e[o].$vscodeTextmateLocation,e[o].name,e[o].contentName,a)}}return i}static _compilePatterns(e,t,s){let i=[];if(e)for(let r=0,o=e.length;r<o;r++){const l=e[r];let a=-1;if(l.include){const u=bb(l.include);switch(u.kind){case 0:case 1:a=mn.getCompiledRuleId(s[l.include],t,s);break;case 2:let c=s[u.ruleName];c&&(a=mn.getCompiledRuleId(c,t,s));break;case 3:case 4:const d=u.scopeName,f=u.kind===4?u.ruleName:null,p=t.getExternalGrammar(d,s);if(p)if(f){let g=p.repository[f];g&&(a=mn.getCompiledRuleId(g,t,p.repository))}else a=mn.getCompiledRuleId(p.repository.$self,t,p.repository);break}}else a=mn.getCompiledRuleId(l,t,s);if(a!==-1){const u=t.getRule(a);let c=!1;if((u instanceof _g||u instanceof uf||u instanceof Su)&&u.hasMissingPatterns&&u.patterns.length===0&&(c=!0),c)continue;i.push(a)}}return{patterns:i,hasMissingPatterns:(e?e.length:0)!==i.length}}},_l=class _b{source;ruleId;hasAnchor;hasBackReferences;_anchorCache;constructor(e,t){if(e&&typeof e=="string"){const s=e.length;let i=0,r=[],o=!1;for(let l=0;l<s;l++)if(e.charAt(l)==="\\"&&l+1<s){const u=e.charAt(l+1);u==="z"?(r.push(e.substring(i,l)),r.push("$(?!\\n)(?<!\\n)"),i=l+2):(u==="A"||u==="G")&&(o=!0),l++}this.hasAnchor=o,i===0?this.source=e:(r.push(e.substring(i,s)),this.source=r.join(""))}else this.hasAnchor=!1,this.source=e;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=t,typeof this.source=="string"?this.hasBackReferences=G4.test(this.source):this.hasBackReferences=!1}clone(){return new _b(this.source,this.ruleId)}setSource(e){this.source!==e&&(this.source=e,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}resolveBackReferences(e,t){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let s=t.map(i=>e.substring(i.start,i.end));return xg.lastIndex=0,this.source.replace(xg,(i,r)=>pb(s[parseInt(r,10)]||""))}_buildAnchorCache(){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let e=[],t=[],s=[],i=[],r,o,l,a;for(r=0,o=this.source.length;r<o;r++)l=this.source.charAt(r),e[r]=l,t[r]=l,s[r]=l,i[r]=l,l==="\\"&&r+1<o&&(a=this.source.charAt(r+1),a==="A"?(e[r+1]="",t[r+1]="",s[r+1]="A",i[r+1]="A"):a==="G"?(e[r+1]="",t[r+1]="G",s[r+1]="",i[r+1]="G"):(e[r+1]=a,t[r+1]=a,s[r+1]=a,i[r+1]=a),r++);return{A0_G0:e.join(""),A0_G1:t.join(""),A1_G0:s.join(""),A1_G1:i.join("")}}resolveAnchors(e,t){return!this.hasAnchor||!this._anchorCache||typeof this.source!="string"?this.source:e?t?this._anchorCache.A1_G1:this._anchorCache.A1_G0:t?this._anchorCache.A0_G1:this._anchorCache.A0_G0}},wl=class{_items;_hasAnchors;_cached;_anchorCache;constructor(){this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}dispose(){this._disposeCaches()}_disposeCaches(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}push(n){this._items.push(n),this._hasAnchors=this._hasAnchors||n.hasAnchor}unshift(n){this._items.unshift(n),this._hasAnchors=this._hasAnchors||n.hasAnchor}length(){return this._items.length}setSource(n,e){this._items[n].source!==e&&(this._disposeCaches(),this._items[n].setSource(e))}compile(n){if(!this._cached){let e=this._items.map(t=>t.source);this._cached=new wg(n,e,this._items.map(t=>t.ruleId))}return this._cached}compileAG(n,e,t){return this._hasAnchors?e?t?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(n,e,t)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(n,e,t)),this._anchorCache.A1_G0):t?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(n,e,t)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(n,e,t)),this._anchorCache.A0_G0):this.compile(n)}_resolveAnchors(n,e,t){let s=this._items.map(i=>i.resolveAnchors(e,t));return new wg(n,s,this._items.map(i=>i.ruleId))}},wg=class{constructor(n,e,t){this.regExps=e,this.rules=t,this.scanner=n.createOnigScanner(e)}scanner;dispose(){typeof this.scanner.dispose=="function"&&this.scanner.dispose()}toString(){const n=[];for(let e=0,t=this.rules.length;e<t;e++)n.push("   - "+this.rules[e]+": "+this.regExps[e]);return n.join(`
`)}findNextMatchSync(n,e,t){const s=this.scanner.findNextMatchSync(n,e,t);return s?{ruleId:this.rules[s.index],captureIndices:s.captureIndices}:null}},sd=class{constructor(n,e){this.languageId=n,this.tokenType=e}},Y4=class cf{_defaultAttributes;_embeddedLanguagesMatcher;constructor(e,t){this._defaultAttributes=new sd(e,8),this._embeddedLanguagesMatcher=new X4(Object.entries(t||{}))}getDefaultAttributes(){return this._defaultAttributes}getBasicScopeAttributes(e){return e===null?cf._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(e)}static _NULL_SCOPE_METADATA=new sd(0,0);_getBasicScopeAttributes=new mb(e=>{const t=this._scopeToLanguage(e),s=this._toStandardTokenType(e);return new sd(t,s)});_scopeToLanguage(e){return this._embeddedLanguagesMatcher.match(e)||0}_toStandardTokenType(e){const t=e.match(cf.STANDARD_TOKEN_TYPE_REGEXP);if(!t)return 8;switch(t[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw new Error("Unexpected match for standard token type!")}static STANDARD_TOKEN_TYPE_REGEXP=/\b(comment|string|regex|meta\.embedded)\b/},X4=class{values;scopesRegExp;constructor(n){if(n.length===0)this.values=null,this.scopesRegExp=null;else{this.values=new Map(n);const e=n.map(([t,s])=>pb(t));e.sort(),e.reverse(),this.scopesRegExp=new RegExp(`^((${e.join(")|(")}))($|\\.)`,"")}}match(n){if(!this.scopesRegExp)return;const e=n.match(this.scopesRegExp);if(e)return this.values.get(e[1])}},Sg=class{constructor(n,e){this.stack=n,this.stoppedEarly=e}};function wb(n,e,t,s,i,r,o,l){const a=e.content.length;let u=!1,c=-1;if(o){const p=Z4(n,e,t,s,i,r);i=p.stack,s=p.linePos,t=p.isFirstLine,c=p.anchorPosition}const d=Date.now();for(;!u;){if(l!==0&&Date.now()-d>l)return new Sg(i,!0);f()}return new Sg(i,!1);function f(){const p=e5(n,e,t,s,i,c);if(!p){r.produce(i,a),u=!0;return}const g=p.captureIndices,k=p.matchedRuleId,x=g&&g.length>0?g[0].end>s:!1;if(k===K4){const m=i.getRule(n);r.produce(i,g[0].start),i=i.withContentNameScopesList(i.nameScopesList),zo(n,e,t,i,r,m.endCaptures,g),r.produce(i,g[0].end);const _=i;if(i=i.parent,c=_.getAnchorPos(),!x&&_.getEnterPos()===s){i=_,r.produce(i,a),u=!0;return}}else{const m=n.getRule(k);r.produce(i,g[0].start);const _=i,R=m.getName(e.content,g),U=i.contentNameScopesList.pushAttributed(R,n);if(i=i.push(k,s,c,g[0].end===a,null,U,U),m instanceof uf){const N=m;zo(n,e,t,i,r,N.beginCaptures,g),r.produce(i,g[0].end),c=g[0].end;const A=N.getContentName(e.content,g),w=U.pushAttributed(A,n);if(i=i.withContentNameScopesList(w),N.endHasBackReferences&&(i=i.withEndRule(N.getEndWithResolvedBackReferences(e.content,g))),!x&&_.hasSameRuleAs(i)){i=i.pop(),r.produce(i,a),u=!0;return}}else if(m instanceof Su){const N=m;zo(n,e,t,i,r,N.beginCaptures,g),r.produce(i,g[0].end),c=g[0].end;const A=N.getContentName(e.content,g),w=U.pushAttributed(A,n);if(i=i.withContentNameScopesList(w),N.whileHasBackReferences&&(i=i.withEndRule(N.getWhileWithResolvedBackReferences(e.content,g))),!x&&_.hasSameRuleAs(i)){i=i.pop(),r.produce(i,a),u=!0;return}}else if(zo(n,e,t,i,r,m.captures,g),r.produce(i,g[0].end),i=i.pop(),!x){i=i.safePop(),r.produce(i,a),u=!0;return}}g[0].end>s&&(s=g[0].end,t=!1)}}function Z4(n,e,t,s,i,r){let o=i.beginRuleCapturedEOL?0:-1;const l=[];for(let a=i;a;a=a.pop()){const u=a.getRule(n);u instanceof Su&&l.push({rule:u,stack:a})}for(let a=l.pop();a;a=l.pop()){const{ruleScanner:u,findOptions:c}=s5(a.rule,n,a.stack.endRule,t,s===o),d=u.findNextMatchSync(e,s,c);if(d){if(d.ruleId!==kb){i=a.stack.pop();break}d.captureIndices&&d.captureIndices.length&&(r.produce(a.stack,d.captureIndices[0].start),zo(n,e,t,a.stack,r,a.rule.whileCaptures,d.captureIndices),r.produce(a.stack,d.captureIndices[0].end),o=d.captureIndices[0].end,d.captureIndices[0].end>s&&(s=d.captureIndices[0].end,t=!1))}else{i=a.stack.pop();break}}return{stack:i,linePos:s,anchorPosition:o,isFirstLine:t}}function e5(n,e,t,s,i,r){const o=t5(n,e,t,s,i,r),l=n.getInjections();if(l.length===0)return o;const a=n5(l,n,e,t,s,i,r);if(!a)return o;if(!o)return a;const u=o.captureIndices[0].start,c=a.captureIndices[0].start;return c<u||a.priorityMatch&&c===u?a:o}function t5(n,e,t,s,i,r){const o=i.getRule(n),{ruleScanner:l,findOptions:a}=Sb(o,n,i.endRule,t,s===r),u=l.findNextMatchSync(e,s,a);return u?{captureIndices:u.captureIndices,matchedRuleId:u.ruleId}:null}function n5(n,e,t,s,i,r,o){let l=Number.MAX_VALUE,a=null,u,c=0;const d=r.contentNameScopesList.getScopeNames();for(let f=0,p=n.length;f<p;f++){const g=n[f];if(!g.matcher(d))continue;const k=e.getRule(g.ruleId),{ruleScanner:x,findOptions:m}=Sb(k,e,null,s,i===o),_=x.findNextMatchSync(t,i,m);if(!_)continue;const R=_.captureIndices[0].start;if(!(R>=l)&&(l=R,a=_.captureIndices,u=_.ruleId,c=g.priority,l===i))break}return a?{priorityMatch:c===-1,captureIndices:a,matchedRuleId:u}:null}function Sb(n,e,t,s,i){return{ruleScanner:n.compileAG(e,t,s,i),findOptions:0}}function s5(n,e,t,s,i){return{ruleScanner:n.compileWhileAG(e,t,s,i),findOptions:0}}function zo(n,e,t,s,i,r,o){if(r.length===0)return;const l=e.content,a=Math.min(r.length,o.length),u=[],c=o[0].end;for(let d=0;d<a;d++){const f=r[d];if(f===null)continue;const p=o[d];if(p.length===0)continue;if(p.start>c)break;for(;u.length>0&&u[u.length-1].endPos<=p.start;)i.produceFromScopes(u[u.length-1].scopes,u[u.length-1].endPos),u.pop();if(u.length>0?i.produceFromScopes(u[u.length-1].scopes,p.start):i.produce(s,p.start),f.retokenizeCapturedWithRuleId){const k=f.getName(l,o),x=s.contentNameScopesList.pushAttributed(k,n),m=f.getContentName(l,o),_=x.pushAttributed(m,n),R=s.push(f.retokenizeCapturedWithRuleId,p.start,-1,!1,null,x,_),U=n.createOnigString(l.substring(0,p.end));wb(n,U,t&&p.start===0,p.start,R,i,!1,0),yb(U);continue}const g=f.getName(l,o);if(g!==null){const x=(u.length>0?u[u.length-1].scopes:s.contentNameScopesList).pushAttributed(g,n);u.push(new i5(x,p.end))}}for(;u.length>0;)i.produceFromScopes(u[u.length-1].scopes,u[u.length-1].endPos),u.pop()}var i5=class{scopes;endPos;constructor(n,e){this.scopes=n,this.endPos=e}};function r5(n,e,t,s,i,r,o,l){return new l5(n,e,t,s,i,r,o,l)}function Cg(n,e,t,s,i){const r=_u(e,Cu),o=xb.getCompiledRuleId(t,s,i.repository);for(const l of r)n.push({debugSelector:e,matcher:l.matcher,ruleId:o,grammar:i,priority:l.priority})}function Cu(n,e){if(e.length<n.length)return!1;let t=0;return n.every(s=>{for(let i=t;i<e.length;i++)if(o5(e[i],s))return t=i+1,!0;return!1})}function o5(n,e){if(!n)return!1;if(n===e)return!0;const t=e.length;return n.length>t&&n.substr(0,t)===e&&n[t]==="."}var l5=class{constructor(n,e,t,s,i,r,o,l){if(this._rootScopeName=n,this.balancedBracketSelectors=r,this._onigLib=l,this._basicScopeAttributesProvider=new Y4(t,s),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=o,this._grammar=Ag(e,null),this._injections=null,this._tokenTypeMatchers=[],i)for(const a of Object.keys(i)){const u=_u(a,Cu);for(const c of u)this._tokenTypeMatchers.push({matcher:c.matcher,type:i[a]})}}_rootId;_lastRuleId;_ruleId2desc;_includedGrammars;_grammarRepository;_grammar;_injections;_basicScopeAttributesProvider;_tokenTypeMatchers;get themeProvider(){return this._grammarRepository}dispose(){for(const n of this._ruleId2desc)n&&n.dispose()}createOnigScanner(n){return this._onigLib.createOnigScanner(n)}createOnigString(n){return this._onigLib.createOnigString(n)}getMetadataForScope(n){return this._basicScopeAttributesProvider.getBasicScopeAttributes(n)}_collectInjections(){const n={lookup:i=>i===this._rootScopeName?this._grammar:this.getExternalGrammar(i),injections:i=>this._grammarRepository.injections(i)},e=[],t=this._rootScopeName,s=n.lookup(t);if(s){const i=s.injections;if(i)for(let o in i)Cg(e,o,i[o],this,s);const r=this._grammarRepository.injections(t);r&&r.forEach(o=>{const l=this.getExternalGrammar(o);if(l){const a=l.injectionSelector;a&&Cg(e,a,l,this,l)}})}return e.sort((i,r)=>i.priority-r.priority),e}getInjections(){return this._injections===null&&(this._injections=this._collectInjections()),this._injections}registerRule(n){const e=++this._lastRuleId,t=n(e);return this._ruleId2desc[e]=t,t}getRule(n){return this._ruleId2desc[n]}getExternalGrammar(n,e){if(this._includedGrammars[n])return this._includedGrammars[n];if(this._grammarRepository){const t=this._grammarRepository.lookup(n);if(t)return this._includedGrammars[n]=Ag(t,e&&e.$base),this._includedGrammars[n]}}tokenizeLine(n,e,t=0){const s=this._tokenize(n,e,!1,t);return{tokens:s.lineTokens.getResult(s.ruleStack,s.lineLength),ruleStack:s.ruleStack,stoppedEarly:s.stoppedEarly}}tokenizeLine2(n,e,t=0){const s=this._tokenize(n,e,!0,t);return{tokens:s.lineTokens.getBinaryResult(s.ruleStack,s.lineLength),ruleStack:s.ruleStack,stoppedEarly:s.stoppedEarly}}_tokenize(n,e,t,s){this._rootId===-1&&(this._rootId=xb.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository),this.getInjections());let i;if(!e||e===df.NULL){i=!0;const u=this._basicScopeAttributesProvider.getDefaultAttributes(),c=this.themeProvider.getDefaults(),d=uo.set(0,u.languageId,u.tokenType,null,c.fontStyle,c.foregroundId,c.backgroundId),f=this.getRule(this._rootId).getName(null,null);let p;f?p=sl.createRootAndLookUpScopeName(f,d,this):p=sl.createRoot("unknown",d),e=new df(null,this._rootId,-1,-1,!1,null,p,p)}else i=!1,e.reset();n=n+`
`;const r=this.createOnigString(n),o=r.content.length,l=new u5(t,n,this._tokenTypeMatchers,this.balancedBracketSelectors),a=wb(this,r,i,0,e,l,!0,s);return yb(r),{lineLength:o,lineTokens:l,ruleStack:a.stack,stoppedEarly:a.stoppedEarly}}};function Ag(n,e){return n=A4(n),n.repository=n.repository||{},n.repository.$self={$vscodeTextmateLocation:n.$vscodeTextmateLocation,patterns:n.patterns,name:n.scopeName},n.repository.$base=e||n.repository.$self,n}var sl=class Os{constructor(e,t,s){this.parent=e,this.scopePath=t,this.tokenAttributes=s}static fromExtension(e,t){let s=e,i=e?.scopePath??null;for(const r of t)i=nd.push(i,r.scopeNames),s=new Os(s,i,r.encodedTokenAttributes);return s}static createRoot(e,t){return new Os(null,new nd(null,e),t)}static createRootAndLookUpScopeName(e,t,s){const i=s.getMetadataForScope(e),r=new nd(null,e),o=s.themeProvider.themeMatch(r),l=Os.mergeAttributes(t,i,o);return new Os(null,r,l)}get scopeName(){return this.scopePath.scopeName}toString(){return this.getScopeNames().join(" ")}equals(e){return Os.equals(this,e)}static equals(e,t){do{if(e===t||!e&&!t)return!0;if(!e||!t||e.scopeName!==t.scopeName||e.tokenAttributes!==t.tokenAttributes)return!1;e=e.parent,t=t.parent}while(!0)}static mergeAttributes(e,t,s){let i=-1,r=0,o=0;return s!==null&&(i=s.fontStyle,r=s.foregroundId,o=s.backgroundId),uo.set(e,t.languageId,t.tokenType,null,i,r,o)}pushAttributed(e,t){if(e===null)return this;if(e.indexOf(" ")===-1)return Os._pushAttributed(this,e,t);const s=e.split(/ /g);let i=this;for(const r of s)i=Os._pushAttributed(i,r,t);return i}static _pushAttributed(e,t,s){const i=s.getMetadataForScope(t),r=e.scopePath.push(t),o=s.themeProvider.themeMatch(r),l=Os.mergeAttributes(e.tokenAttributes,i,o);return new Os(e,r,l)}getScopeNames(){return this.scopePath.getSegments()}getExtensionIfDefined(e){const t=[];let s=this;for(;s&&s!==e;)t.push({encodedTokenAttributes:s.tokenAttributes,scopeNames:s.scopePath.getExtensionIfDefined(s.parent?.scopePath??null)}),s=s.parent;return s===e?t.reverse():void 0}},df=class ir{constructor(e,t,s,i,r,o,l,a){this.parent=e,this.ruleId=t,this.beginRuleCapturedEOL=r,this.endRule=o,this.nameScopesList=l,this.contentNameScopesList=a,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=s,this._anchorPos=i}_stackElementBrand=void 0;static NULL=new ir(null,0,0,0,!1,null,null,null);_enterPos;_anchorPos;depth;equals(e){return e===null?!1:ir._equals(this,e)}static _equals(e,t){return e===t?!0:this._structuralEquals(e,t)?sl.equals(e.contentNameScopesList,t.contentNameScopesList):!1}static _structuralEquals(e,t){do{if(e===t||!e&&!t)return!0;if(!e||!t||e.depth!==t.depth||e.ruleId!==t.ruleId||e.endRule!==t.endRule)return!1;e=e.parent,t=t.parent}while(!0)}clone(){return this}static _reset(e){for(;e;)e._enterPos=-1,e._anchorPos=-1,e=e.parent}reset(){ir._reset(this)}pop(){return this.parent}safePop(){return this.parent?this.parent:this}push(e,t,s,i,r,o,l){return new ir(this,e,t,s,i,r,o,l)}getEnterPos(){return this._enterPos}getAnchorPos(){return this._anchorPos}getRule(e){return e.getRule(this.ruleId)}toString(){const e=[];return this._writeString(e,0),"["+e.join(",")+"]"}_writeString(e,t){return this.parent&&(t=this.parent._writeString(e,t)),e[t++]=`(${this.ruleId}, ${this.nameScopesList?.toString()}, ${this.contentNameScopesList?.toString()})`,t}withContentNameScopesList(e){return this.contentNameScopesList===e?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,e)}withEndRule(e){return this.endRule===e?this:new ir(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,e,this.nameScopesList,this.contentNameScopesList)}hasSameRuleAs(e){let t=this;for(;t&&t._enterPos===e._enterPos;){if(t.ruleId===e.ruleId)return!0;t=t.parent}return!1}toStateStackFrame(){return{ruleId:this.ruleId,beginRuleCapturedEOL:this.beginRuleCapturedEOL,endRule:this.endRule,nameScopesList:this.nameScopesList?.getExtensionIfDefined(this.parent?.nameScopesList??null)??[],contentNameScopesList:this.contentNameScopesList?.getExtensionIfDefined(this.nameScopesList)??[]}}static pushFrame(e,t){const s=sl.fromExtension(e?.nameScopesList??null,t.nameScopesList);return new ir(e,t.ruleId,t.enterPos??-1,t.anchorPos??-1,t.beginRuleCapturedEOL,t.endRule,s,sl.fromExtension(s,t.contentNameScopesList))}},a5=class{balancedBracketScopes;unbalancedBracketScopes;allowAny=!1;constructor(n,e){this.balancedBracketScopes=n.flatMap(t=>t==="*"?(this.allowAny=!0,[]):_u(t,Cu).map(s=>s.matcher)),this.unbalancedBracketScopes=e.flatMap(t=>_u(t,Cu).map(s=>s.matcher))}get matchesAlways(){return this.allowAny&&this.unbalancedBracketScopes.length===0}get matchesNever(){return this.balancedBracketScopes.length===0&&!this.allowAny}match(n){for(const e of this.unbalancedBracketScopes)if(e(n))return!1;for(const e of this.balancedBracketScopes)if(e(n))return!0;return this.allowAny}},u5=class{constructor(n,e,t,s){this.balancedBracketSelectors=s,this._emitBinaryTokens=n,this._tokenTypeOverrides=t,this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}_emitBinaryTokens;_lineText;_tokens;_binaryTokens;_lastTokenEndIndex;_tokenTypeOverrides;produce(n,e){this.produceFromScopes(n.contentNameScopesList,e)}produceFromScopes(n,e){if(this._lastTokenEndIndex>=e)return;if(this._emitBinaryTokens){let s=n?.tokenAttributes??0,i=!1;if(this.balancedBracketSelectors?.matchesAlways&&(i=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){const r=n?.getScopeNames()??[];for(const o of this._tokenTypeOverrides)o.matcher(r)&&(s=uo.set(s,0,o.type,null,-1,0,0));this.balancedBracketSelectors&&(i=this.balancedBracketSelectors.match(r))}if(i&&(s=uo.set(s,0,8,i,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===s){this._lastTokenEndIndex=e;return}this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(s),this._lastTokenEndIndex=e;return}const t=n?.getScopeNames()??[];this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:e,scopes:t}),this._lastTokenEndIndex=e}getResult(n,e){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===e-1&&this._tokens.pop(),this._tokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(n,e),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}getBinaryResult(n,e){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===e-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),this._binaryTokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(n,e),this._binaryTokens[this._binaryTokens.length-2]=0);const t=new Uint32Array(this._binaryTokens.length);for(let s=0,i=this._binaryTokens.length;s<i;s++)t[s]=this._binaryTokens[s];return t}},c5=class{constructor(n,e){this._onigLib=e,this._theme=n}_grammars=new Map;_rawGrammars=new Map;_injectionGrammars=new Map;_theme;dispose(){for(const n of this._grammars.values())n.dispose()}setTheme(n){this._theme=n}getColorMap(){return this._theme.getColorMap()}addGrammar(n,e){this._rawGrammars.set(n.scopeName,n),e&&this._injectionGrammars.set(n.scopeName,e)}lookup(n){return this._rawGrammars.get(n)}injections(n){return this._injectionGrammars.get(n)}getDefaults(){return this._theme.getDefaults()}themeMatch(n){return this._theme.match(n)}grammarForScopeName(n,e,t,s,i){if(!this._grammars.has(n)){let r=this._rawGrammars.get(n);if(!r)return null;this._grammars.set(n,r5(n,r,e,t,s,i,this,this._onigLib))}return this._grammars.get(n)}},d5=class{_options;_syncRegistry;_ensureGrammarCache;constructor(e){this._options=e,this._syncRegistry=new c5(xu.createFromRawTheme(e.theme,e.colorMap),e.onigLib),this._ensureGrammarCache=new Map}dispose(){this._syncRegistry.dispose()}setTheme(e,t){this._syncRegistry.setTheme(xu.createFromRawTheme(e,t))}getColorMap(){return this._syncRegistry.getColorMap()}loadGrammarWithEmbeddedLanguages(e,t,s){return this.loadGrammarWithConfiguration(e,t,{embeddedLanguages:s})}loadGrammarWithConfiguration(e,t,s){return this._loadGrammar(e,t,s.embeddedLanguages,s.tokenTypes,new a5(s.balancedBracketSelectors||[],s.unbalancedBracketSelectors||[]))}loadGrammar(e){return this._loadGrammar(e,0,null,null,null)}_loadGrammar(e,t,s,i,r){const o=new B4(this._syncRegistry,e);for(;o.Q.length>0;)o.Q.map(l=>this._loadSingleGrammar(l.scopeName)),o.processQueue();return this._grammarForScopeName(e,t,s,i,r)}_loadSingleGrammar(e){this._ensureGrammarCache.has(e)||(this._doLoadSingleGrammar(e),this._ensureGrammarCache.set(e,!0))}_doLoadSingleGrammar(e){const t=this._options.loadGrammar(e);if(t){const s=typeof this._options.getInjections=="function"?this._options.getInjections(e):void 0;this._syncRegistry.addGrammar(t,s)}}addGrammar(e,t=[],s=0,i=null){return this._syncRegistry.addGrammar(e,t),this._grammarForScopeName(e.scopeName,s,i)}_grammarForScopeName(e,t=0,s=null,i=null,r=null){return this._syncRegistry.grammarForScopeName(e,t,s,i,r)}},ff=df.NULL;const f5=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"];class Ql{constructor(e,t,s){this.normal=t,this.property=e,s&&(this.space=s)}}Ql.prototype.normal={};Ql.prototype.property={};Ql.prototype.space=void 0;function Cb(n,e){const t={},s={};for(const i of n)Object.assign(t,i.property),Object.assign(s,i.normal);return new Ql(t,s,e)}function hf(n){return n.toLowerCase()}class Hn{constructor(e,t){this.attribute=t,this.property=e}}Hn.prototype.attribute="";Hn.prototype.booleanish=!1;Hn.prototype.boolean=!1;Hn.prototype.commaOrSpaceSeparated=!1;Hn.prototype.commaSeparated=!1;Hn.prototype.defined=!1;Hn.prototype.mustUseProperty=!1;Hn.prototype.number=!1;Hn.prototype.overloadedBoolean=!1;Hn.prototype.property="";Hn.prototype.spaceSeparated=!1;Hn.prototype.space=void 0;let h5=0;const Ze=Tr(),Ut=Tr(),pf=Tr(),_e=Tr(),At=Tr(),Zr=Tr(),Gn=Tr();function Tr(){return 2**++h5}const mf=Object.freeze(Object.defineProperty({__proto__:null,boolean:Ze,booleanish:Ut,commaOrSpaceSeparated:Gn,commaSeparated:Zr,number:_e,overloadedBoolean:pf,spaceSeparated:At},Symbol.toStringTag,{value:"Module"})),id=Object.keys(mf);class Nh extends Hn{constructor(e,t,s,i){let r=-1;if(super(e,t),Eg(this,"space",i),typeof s=="number")for(;++r<id.length;){const o=id[r];Eg(this,id[r],(s&mf[o])===mf[o])}}}Nh.prototype.defined=!0;function Eg(n,e,t){t&&(n[e]=t)}function So(n){const e={},t={};for(const[s,i]of Object.entries(n.properties)){const r=new Nh(s,n.transform(n.attributes||{},s),i,n.space);n.mustUseProperty&&n.mustUseProperty.includes(s)&&(r.mustUseProperty=!0),e[s]=r,t[hf(s)]=s,t[hf(r.attribute)]=s}return new Ql(e,t,n.space)}const Ab=So({properties:{ariaActiveDescendant:null,ariaAtomic:Ut,ariaAutoComplete:null,ariaBusy:Ut,ariaChecked:Ut,ariaColCount:_e,ariaColIndex:_e,ariaColSpan:_e,ariaControls:At,ariaCurrent:null,ariaDescribedBy:At,ariaDetails:null,ariaDisabled:Ut,ariaDropEffect:At,ariaErrorMessage:null,ariaExpanded:Ut,ariaFlowTo:At,ariaGrabbed:Ut,ariaHasPopup:null,ariaHidden:Ut,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:At,ariaLevel:_e,ariaLive:null,ariaModal:Ut,ariaMultiLine:Ut,ariaMultiSelectable:Ut,ariaOrientation:null,ariaOwns:At,ariaPlaceholder:null,ariaPosInSet:_e,ariaPressed:Ut,ariaReadOnly:Ut,ariaRelevant:null,ariaRequired:Ut,ariaRoleDescription:At,ariaRowCount:_e,ariaRowIndex:_e,ariaRowSpan:_e,ariaSelected:Ut,ariaSetSize:_e,ariaSort:null,ariaValueMax:_e,ariaValueMin:_e,ariaValueNow:_e,ariaValueText:null,role:null},transform(n,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function Eb(n,e){return e in n?n[e]:e}function Tb(n,e){return Eb(n,e.toLowerCase())}const p5=So({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Zr,acceptCharset:At,accessKey:At,action:null,allow:null,allowFullScreen:Ze,allowPaymentRequest:Ze,allowUserMedia:Ze,alt:null,as:null,async:Ze,autoCapitalize:null,autoComplete:At,autoFocus:Ze,autoPlay:Ze,blocking:At,capture:null,charSet:null,checked:Ze,cite:null,className:At,cols:_e,colSpan:null,content:null,contentEditable:Ut,controls:Ze,controlsList:At,coords:_e|Zr,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Ze,defer:Ze,dir:null,dirName:null,disabled:Ze,download:pf,draggable:Ut,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Ze,formTarget:null,headers:At,height:_e,hidden:pf,high:_e,href:null,hrefLang:null,htmlFor:At,httpEquiv:At,id:null,imageSizes:null,imageSrcSet:null,inert:Ze,inputMode:null,integrity:null,is:null,isMap:Ze,itemId:null,itemProp:At,itemRef:At,itemScope:Ze,itemType:At,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Ze,low:_e,manifest:null,max:null,maxLength:_e,media:null,method:null,min:null,minLength:_e,multiple:Ze,muted:Ze,name:null,nonce:null,noModule:Ze,noValidate:Ze,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Ze,optimum:_e,pattern:null,ping:At,placeholder:null,playsInline:Ze,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Ze,referrerPolicy:null,rel:At,required:Ze,reversed:Ze,rows:_e,rowSpan:_e,sandbox:At,scope:null,scoped:Ze,seamless:Ze,selected:Ze,shadowRootClonable:Ze,shadowRootDelegatesFocus:Ze,shadowRootMode:null,shape:null,size:_e,sizes:null,slot:null,span:_e,spellCheck:Ut,src:null,srcDoc:null,srcLang:null,srcSet:null,start:_e,step:null,style:null,tabIndex:_e,target:null,title:null,translate:null,type:null,typeMustMatch:Ze,useMap:null,value:Ut,width:_e,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:At,axis:null,background:null,bgColor:null,border:_e,borderColor:null,bottomMargin:_e,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Ze,declare:Ze,event:null,face:null,frame:null,frameBorder:null,hSpace:_e,leftMargin:_e,link:null,longDesc:null,lowSrc:null,marginHeight:_e,marginWidth:_e,noResize:Ze,noHref:Ze,noShade:Ze,noWrap:Ze,object:null,profile:null,prompt:null,rev:null,rightMargin:_e,rules:null,scheme:null,scrolling:Ut,standby:null,summary:null,text:null,topMargin:_e,valueType:null,version:null,vAlign:null,vLink:null,vSpace:_e,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Ze,disableRemotePlayback:Ze,prefix:null,property:null,results:_e,security:null,unselectable:null},space:"html",transform:Tb}),m5=So({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Gn,accentHeight:_e,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:_e,amplitude:_e,arabicForm:null,ascent:_e,attributeName:null,attributeType:null,azimuth:_e,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:_e,by:null,calcMode:null,capHeight:_e,className:At,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:_e,diffuseConstant:_e,direction:null,display:null,dur:null,divisor:_e,dominantBaseline:null,download:Ze,dx:null,dy:null,edgeMode:null,editable:null,elevation:_e,enableBackground:null,end:null,event:null,exponent:_e,externalResourcesRequired:null,fill:null,fillOpacity:_e,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Zr,g2:Zr,glyphName:Zr,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:_e,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:_e,horizOriginX:_e,horizOriginY:_e,id:null,ideographic:_e,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:_e,k:_e,k1:_e,k2:_e,k3:_e,k4:_e,kernelMatrix:Gn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:_e,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:_e,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:_e,overlineThickness:_e,paintOrder:null,panose1:null,path:null,pathLength:_e,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:At,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:_e,pointsAtY:_e,pointsAtZ:_e,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Gn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Gn,rev:Gn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Gn,requiredFeatures:Gn,requiredFonts:Gn,requiredFormats:Gn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:_e,specularExponent:_e,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:_e,strikethroughThickness:_e,string:null,stroke:null,strokeDashArray:Gn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:_e,strokeOpacity:_e,strokeWidth:null,style:null,surfaceScale:_e,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Gn,tabIndex:_e,tableValues:null,target:null,targetX:_e,targetY:_e,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Gn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:_e,underlineThickness:_e,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:_e,values:null,vAlphabetic:_e,vMathematical:_e,vectorEffect:null,vHanging:_e,vIdeographic:_e,version:null,vertAdvY:_e,vertOriginX:_e,vertOriginY:_e,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:_e,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Eb}),Db=So({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(n,e){return"xlink:"+e.slice(5).toLowerCase()}}),Pb=So({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Tb}),Rb=So({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(n,e){return"xml:"+e.slice(3).toLowerCase()}}),g5=/[A-Z]/g,Tg=/-[a-z]/g,v5=/^data[-\w.:]+$/i;function y5(n,e){const t=hf(e);let s=e,i=Hn;if(t in n.normal)return n.property[n.normal[t]];if(t.length>4&&t.slice(0,4)==="data"&&v5.test(e)){if(e.charAt(4)==="-"){const r=e.slice(5).replace(Tg,k5);s="data"+r.charAt(0).toUpperCase()+r.slice(1)}else{const r=e.slice(4);if(!Tg.test(r)){let o=r.replace(g5,b5);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=Nh}return new i(s,e)}function b5(n){return"-"+n.toLowerCase()}function k5(n){return n.charAt(1).toUpperCase()}const x5=Cb([Ab,p5,Db,Pb,Rb],"html"),Ob=Cb([Ab,m5,Db,Pb,Rb],"svg"),Dg={}.hasOwnProperty;function _5(n,e){const t=e||{};function s(i,...r){let o=s.invalid;const l=s.handlers;if(i&&Dg.call(i,n)){const a=String(i[n]);o=Dg.call(l,a)?l[a]:s.unknown}if(o)return o.call(this,i,...r)}return s.handlers=t.handlers||{},s.invalid=t.invalid,s.unknown=t.unknown,s}const w5=/["&'<>`]/g,S5=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,C5=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,A5=/[|\\{}()[\]^$+*?.]/g,Pg=new WeakMap;function E5(n,e){if(n=n.replace(e.subset?T5(e.subset):w5,s),e.subset||e.escapeOnly)return n;return n.replace(S5,t).replace(C5,s);function t(i,r,o){return e.format((i.charCodeAt(0)-55296)*1024+i.charCodeAt(1)-56320+65536,o.charCodeAt(r+2),e)}function s(i,r,o){return e.format(i.charCodeAt(0),o.charCodeAt(r+1),e)}}function T5(n){let e=Pg.get(n);return e||(e=D5(n),Pg.set(n,e)),e}function D5(n){const e=[];let t=-1;for(;++t<n.length;)e.push(n[t].replace(A5,"\\$&"));return new RegExp("(?:"+e.join("|")+")","g")}const P5=/[\dA-Fa-f]/;function R5(n,e,t){const s="&#x"+n.toString(16).toUpperCase();return t&&e&&!P5.test(String.fromCharCode(e))?s:s+";"}const O5=/\d/;function L5(n,e,t){const s="&#"+String(n);return t&&e&&!O5.test(String.fromCharCode(e))?s:s+";"}const M5=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],rd={nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",times:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",divide:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",fnof:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",bull:"",hellip:"",prime:"",Prime:"",oline:"",frasl:"",weierp:"",image:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",lang:"",rang:"",loz:"",spades:"",clubs:"",hearts:"",diams:"",quot:'"',amp:"&",lt:"<",gt:">",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",circ:"",tilde:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",permil:"",lsaquo:"",rsaquo:"",euro:""},I5=["cent","copy","divide","gt","lt","not","para","times"],Lb={}.hasOwnProperty,gf={};let _a;for(_a in rd)Lb.call(rd,_a)&&(gf[rd[_a]]=_a);const j5=/[^\dA-Za-z]/;function V5(n,e,t,s){const i=String.fromCharCode(n);if(Lb.call(gf,i)){const r=gf[i],o="&"+r;return t&&M5.includes(r)&&!I5.includes(r)&&(!s||e&&e!==61&&j5.test(String.fromCharCode(e)))?o:o+";"}return""}function $5(n,e,t){let s=R5(n,e,t.omitOptionalSemicolons),i;if((t.useNamedReferences||t.useShortestReferences)&&(i=V5(n,e,t.omitOptionalSemicolons,t.attribute)),(t.useShortestReferences||!i)&&t.useShortestReferences){const r=L5(n,e,t.omitOptionalSemicolons);r.length<s.length&&(s=r)}return i&&(!t.useShortestReferences||i.length<s.length)?i:s}function eo(n,e){return E5(n,Object.assign({format:$5},e))}const N5=/^>|^->|<!--|-->|--!>|<!-$/g,B5=[">"],F5=["<",">"];function U5(n,e,t,s){return s.settings.bogusComments?"<?"+eo(n.value,Object.assign({},s.settings.characterReferences,{subset:B5}))+">":"<!--"+n.value.replace(N5,i)+"-->";function i(r){return eo(r,Object.assign({},s.settings.characterReferences,{subset:F5}))}}function z5(n,e,t,s){return"<!"+(s.settings.upperDoctype?"DOCTYPE":"doctype")+(s.settings.tightDoctype?"":" ")+"html>"}function Rg(n,e){const t=String(n);if(typeof e!="string")throw new TypeError("Expected character");let s=0,i=t.indexOf(e);for(;i!==-1;)s++,i=t.indexOf(e,i+e.length);return s}function H5(n,e){const t=e||{};return(n[n.length-1]===""?[...n,""]:n).join((t.padRight?" ":"")+","+(t.padLeft===!1?"":" ")).trim()}function W5(n){return n.join(" ").trim()}const q5=/[ \t\n\f\r]/g;function Bh(n){return typeof n=="object"?n.type==="text"?Og(n.value):!1:Og(n)}function Og(n){return n.replace(q5,"")===""}const en=Ib(1),Mb=Ib(-1),G5=[];function Ib(n){return e;function e(t,s,i){const r=t?t.children:G5;let o=(s||0)+n,l=r[o];if(!i)for(;l&&Bh(l);)o+=n,l=r[o];return l}}const K5={}.hasOwnProperty;function jb(n){return e;function e(t,s,i){return K5.call(n,t.tagName)&&n[t.tagName](t,s,i)}}const Fh=jb({body:Q5,caption:od,colgroup:od,dd:eA,dt:Z5,head:od,html:J5,li:X5,optgroup:tA,option:nA,p:Y5,rp:Lg,rt:Lg,tbody:iA,td:Mg,tfoot:rA,th:Mg,thead:sA,tr:oA});function od(n,e,t){const s=en(t,e,!0);return!s||s.type!=="comment"&&!(s.type==="text"&&Bh(s.value.charAt(0)))}function J5(n,e,t){const s=en(t,e);return!s||s.type!=="comment"}function Q5(n,e,t){const s=en(t,e);return!s||s.type!=="comment"}function Y5(n,e,t){const s=en(t,e);return s?s.type==="element"&&(s.tagName==="address"||s.tagName==="article"||s.tagName==="aside"||s.tagName==="blockquote"||s.tagName==="details"||s.tagName==="div"||s.tagName==="dl"||s.tagName==="fieldset"||s.tagName==="figcaption"||s.tagName==="figure"||s.tagName==="footer"||s.tagName==="form"||s.tagName==="h1"||s.tagName==="h2"||s.tagName==="h3"||s.tagName==="h4"||s.tagName==="h5"||s.tagName==="h6"||s.tagName==="header"||s.tagName==="hgroup"||s.tagName==="hr"||s.tagName==="main"||s.tagName==="menu"||s.tagName==="nav"||s.tagName==="ol"||s.tagName==="p"||s.tagName==="pre"||s.tagName==="section"||s.tagName==="table"||s.tagName==="ul"):!t||!(t.type==="element"&&(t.tagName==="a"||t.tagName==="audio"||t.tagName==="del"||t.tagName==="ins"||t.tagName==="map"||t.tagName==="noscript"||t.tagName==="video"))}function X5(n,e,t){const s=en(t,e);return!s||s.type==="element"&&s.tagName==="li"}function Z5(n,e,t){const s=en(t,e);return!!(s&&s.type==="element"&&(s.tagName==="dt"||s.tagName==="dd"))}function eA(n,e,t){const s=en(t,e);return!s||s.type==="element"&&(s.tagName==="dt"||s.tagName==="dd")}function Lg(n,e,t){const s=en(t,e);return!s||s.type==="element"&&(s.tagName==="rp"||s.tagName==="rt")}function tA(n,e,t){const s=en(t,e);return!s||s.type==="element"&&s.tagName==="optgroup"}function nA(n,e,t){const s=en(t,e);return!s||s.type==="element"&&(s.tagName==="option"||s.tagName==="optgroup")}function sA(n,e,t){const s=en(t,e);return!!(s&&s.type==="element"&&(s.tagName==="tbody"||s.tagName==="tfoot"))}function iA(n,e,t){const s=en(t,e);return!s||s.type==="element"&&(s.tagName==="tbody"||s.tagName==="tfoot")}function rA(n,e,t){return!en(t,e)}function oA(n,e,t){const s=en(t,e);return!s||s.type==="element"&&s.tagName==="tr"}function Mg(n,e,t){const s=en(t,e);return!s||s.type==="element"&&(s.tagName==="td"||s.tagName==="th")}const lA=jb({body:cA,colgroup:dA,head:uA,html:aA,tbody:fA});function aA(n){const e=en(n,-1);return!e||e.type!=="comment"}function uA(n){const e=new Set;for(const s of n.children)if(s.type==="element"&&(s.tagName==="base"||s.tagName==="title")){if(e.has(s.tagName))return!1;e.add(s.tagName)}const t=n.children[0];return!t||t.type==="element"}function cA(n){const e=en(n,-1,!0);return!e||e.type!=="comment"&&!(e.type==="text"&&Bh(e.value.charAt(0)))&&!(e.type==="element"&&(e.tagName==="meta"||e.tagName==="link"||e.tagName==="script"||e.tagName==="style"||e.tagName==="template"))}function dA(n,e,t){const s=Mb(t,e),i=en(n,-1,!0);return t&&s&&s.type==="element"&&s.tagName==="colgroup"&&Fh(s,t.children.indexOf(s),t)?!1:!!(i&&i.type==="element"&&i.tagName==="col")}function fA(n,e,t){const s=Mb(t,e),i=en(n,-1);return t&&s&&s.type==="element"&&(s.tagName==="thead"||s.tagName==="tbody")&&Fh(s,t.children.indexOf(s),t)?!1:!!(i&&i.type==="element"&&i.tagName==="tr")}const wa={name:[[`	
\f\r &/=>`.split(""),`	
\f\r "&'/=>\``.split("")],[`\0	
\f\r "&'/<=>`.split(""),`\0	
\f\r "&'/<=>\``.split("")]],unquoted:[[`	
\f\r &>`.split(""),`\0	
\f\r "&'<=>\``.split("")],[`\0	
\f\r "&'<=>\``.split(""),`\0	
\f\r "&'<=>\``.split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function hA(n,e,t,s){const i=s.schema,r=i.space==="svg"?!1:s.settings.omitOptionalTags;let o=i.space==="svg"?s.settings.closeEmptyElements:s.settings.voids.includes(n.tagName.toLowerCase());const l=[];let a;i.space==="html"&&n.tagName==="svg"&&(s.schema=Ob);const u=pA(s,n.properties),c=s.all(i.space==="html"&&n.tagName==="template"?n.content:n);return s.schema=i,c&&(o=!1),(u||!r||!lA(n,e,t))&&(l.push("<",n.tagName,u?" "+u:""),o&&(i.space==="svg"||s.settings.closeSelfClosing)&&(a=u.charAt(u.length-1),(!s.settings.tightSelfClosing||a==="/"||a&&a!=='"'&&a!=="'")&&l.push(" "),l.push("/")),l.push(">")),l.push(c),!o&&(!r||!Fh(n,e,t))&&l.push("</"+n.tagName+">"),l.join("")}function pA(n,e){const t=[];let s=-1,i;if(e){for(i in e)if(e[i]!==null&&e[i]!==void 0){const r=mA(n,i,e[i]);r&&t.push(r)}}for(;++s<t.length;){const r=n.settings.tightAttributes?t[s].charAt(t[s].length-1):void 0;s!==t.length-1&&r!=='"'&&r!=="'"&&(t[s]+=" ")}return t.join("")}function mA(n,e,t){const s=y5(n.schema,e),i=n.settings.allowParseErrors&&n.schema.space==="html"?0:1,r=n.settings.allowDangerousCharacters?0:1;let o=n.quote,l;if(s.overloadedBoolean&&(t===s.attribute||t==="")?t=!0:(s.boolean||s.overloadedBoolean)&&(typeof t!="string"||t===s.attribute||t==="")&&(t=!!t),t==null||t===!1||typeof t=="number"&&Number.isNaN(t))return"";const a=eo(s.attribute,Object.assign({},n.settings.characterReferences,{subset:wa.name[i][r]}));return t===!0||(t=Array.isArray(t)?(s.commaSeparated?H5:W5)(t,{padLeft:!n.settings.tightCommaSeparatedLists}):String(t),n.settings.collapseEmptyAttributes&&!t)?a:(n.settings.preferUnquoted&&(l=eo(t,Object.assign({},n.settings.characterReferences,{attribute:!0,subset:wa.unquoted[i][r]}))),l!==t&&(n.settings.quoteSmart&&Rg(t,o)>Rg(t,n.alternative)&&(o=n.alternative),l=o+eo(t,Object.assign({},n.settings.characterReferences,{subset:(o==="'"?wa.single:wa.double)[i][r],attribute:!0}))+o),a+(l&&"="+l))}const gA=["<","&"];function Vb(n,e,t,s){return t&&t.type==="element"&&(t.tagName==="script"||t.tagName==="style")?n.value:eo(n.value,Object.assign({},s.settings.characterReferences,{subset:gA}))}function vA(n,e,t,s){return s.settings.allowDangerousHtml?n.value:Vb(n,e,t,s)}function yA(n,e,t,s){return s.all(n)}const bA=_5("type",{invalid:kA,unknown:xA,handlers:{comment:U5,doctype:z5,element:hA,raw:vA,root:yA,text:Vb}});function kA(n){throw new Error("Expected node, not `"+n+"`")}function xA(n){const e=n;throw new Error("Cannot compile unknown node `"+e.type+"`")}const _A={},wA={},SA=[];function CA(n,e){const t=e||_A,s=t.quote||'"',i=s==='"'?"'":'"';if(s!=='"'&&s!=="'")throw new Error("Invalid quote `"+s+"`, expected `'` or `\"`");return{one:AA,all:EA,settings:{omitOptionalTags:t.omitOptionalTags||!1,allowParseErrors:t.allowParseErrors||!1,allowDangerousCharacters:t.allowDangerousCharacters||!1,quoteSmart:t.quoteSmart||!1,preferUnquoted:t.preferUnquoted||!1,tightAttributes:t.tightAttributes||!1,upperDoctype:t.upperDoctype||!1,tightDoctype:t.tightDoctype||!1,bogusComments:t.bogusComments||!1,tightCommaSeparatedLists:t.tightCommaSeparatedLists||!1,tightSelfClosing:t.tightSelfClosing||!1,collapseEmptyAttributes:t.collapseEmptyAttributes||!1,allowDangerousHtml:t.allowDangerousHtml||!1,voids:t.voids||f5,characterReferences:t.characterReferences||wA,closeSelfClosing:t.closeSelfClosing||!1,closeEmptyElements:t.closeEmptyElements||!1},schema:t.space==="svg"?Ob:x5,quote:s,alternative:i}.one(Array.isArray(n)?{type:"root",children:n}:n,void 0,void 0)}function AA(n,e,t){return bA(n,e,t,this)}function EA(n){const e=[],t=n&&n.children||SA;let s=-1;for(;++s<t.length;)e[s]=this.one(t[s],s,n);return e.join("")}function Au(n,e){const t=typeof n=="string"?{}:{...n.colorReplacements},s=typeof n=="string"?n:n.name;for(const[i,r]of Object.entries(e?.colorReplacements||{}))typeof r=="string"?t[i]=r:i===s&&Object.assign(t,r);return t}function Oi(n,e){return n&&(e?.[n?.toLowerCase()]||n)}function TA(n){return Array.isArray(n)?n:[n]}async function $b(n){return Promise.resolve(typeof n=="function"?n():n).then(e=>e.default||e)}function Uh(n){return!n||["plaintext","txt","text","plain"].includes(n)}function Nb(n){return n==="ansi"||Uh(n)}function zh(n){return n==="none"}function Bb(n){return zh(n)}function Fb(n,e){if(!e)return n;n.properties||={},n.properties.class||=[],typeof n.properties.class=="string"&&(n.properties.class=n.properties.class.split(/\s+/g)),Array.isArray(n.properties.class)||(n.properties.class=[]);const t=Array.isArray(e)?e:e.split(/\s+/g);for(const s of t)s&&!n.properties.class.includes(s)&&n.properties.class.push(s);return n}function vc(n,e=!1){if(n.length===0)return[["",0]];const t=n.split(/(\r?\n)/g);let s=0;const i=[];for(let r=0;r<t.length;r+=2){const o=e?t[r]+(t[r+1]||""):t[r];i.push([o,s]),s+=t[r].length,s+=t[r+1]?.length||0}return i}function DA(n){const e=vc(n,!0).map(([i])=>i);function t(i){if(i===n.length)return{line:e.length-1,character:e[e.length-1].length};let r=i,o=0;for(const l of e){if(r<l.length)break;r-=l.length,o++}return{line:o,character:r}}function s(i,r){let o=0;for(let l=0;l<i;l++)o+=e[l].length;return o+=r,o}return{lines:e,indexToPos:t,posToIndex:s}}const Hh="light-dark()",PA=["color","background-color"];function RA(n,e){let t=0;const s=[];for(const i of e)i>t&&s.push({...n,content:n.content.slice(t,i),offset:n.offset+t}),t=i;return t<n.content.length&&s.push({...n,content:n.content.slice(t),offset:n.offset+t}),s}function OA(n,e){const t=Array.from(e instanceof Set?e:new Set(e)).sort((s,i)=>s-i);return t.length?n.map(s=>s.flatMap(i=>{const r=t.filter(o=>i.offset<o&&o<i.offset+i.content.length).map(o=>o-i.offset).sort((o,l)=>o-l);return r.length?RA(i,r):i})):n}function LA(n,e,t,s,i="css-vars"){const r={content:n.content,explanation:n.explanation,offset:n.offset},o=e.map(c=>Eu(n.variants[c])),l=new Set(o.flatMap(c=>Object.keys(c))),a={},u=(c,d)=>{const f=d==="color"?"":d==="background-color"?"-bg":`-${d}`;return t+e[c]+(d==="color"?"":f)};return o.forEach((c,d)=>{for(const f of l){const p=c[f]||"inherit";if(d===0&&s&&PA.includes(f))if(s===Hh&&o.length>1){const g=e.findIndex(_=>_==="light"),k=e.findIndex(_=>_==="dark");if(g===-1||k===-1)throw new Wt('When using `defaultColor: "light-dark()"`, you must provide both `light` and `dark` themes');const x=o[g][f]||"inherit",m=o[k][f]||"inherit";a[f]=`light-dark(${x}, ${m})`,i==="css-vars"&&(a[u(d,f)]=p)}else a[f]=p;else i==="css-vars"&&(a[u(d,f)]=p)}}),r.htmlStyle=a,r}function Eu(n){const e={};if(n.color&&(e.color=n.color),n.bgColor&&(e["background-color"]=n.bgColor),n.fontStyle){n.fontStyle&_n.Italic&&(e["font-style"]="italic"),n.fontStyle&_n.Bold&&(e["font-weight"]="bold");const t=[];n.fontStyle&_n.Underline&&t.push("underline"),n.fontStyle&_n.Strikethrough&&t.push("line-through"),t.length&&(e["text-decoration"]=t.join(" "))}return e}function vf(n){return typeof n=="string"?n:Object.entries(n).map(([e,t])=>`${e}:${t}`).join(";")}const Ub=new WeakMap;function yc(n,e){Ub.set(n,e)}function Sl(n){return Ub.get(n)}class Co{_stacks={};lang;get themes(){return Object.keys(this._stacks)}get theme(){return this.themes[0]}get _stack(){return this._stacks[this.theme]}static initial(e,t){return new Co(Object.fromEntries(TA(t).map(s=>[s,ff])),e)}constructor(...e){if(e.length===2){const[t,s]=e;this.lang=s,this._stacks=t}else{const[t,s,i]=e;this.lang=s,this._stacks={[i]:t}}}getInternalStack(e=this.theme){return this._stacks[e]}getScopes(e=this.theme){return MA(this._stacks[e])}toJSON(){return{lang:this.lang,theme:this.theme,themes:this.themes,scopes:this.getScopes()}}}function MA(n){const e=[],t=new Set;function s(i){if(t.has(i))return;t.add(i);const r=i?.nameScopesList?.scopeName;r&&e.push(r),i.parent&&s(i.parent)}return s(n),e}function IA(n,e){if(!(n instanceof Co))throw new Wt("Invalid grammar state");return n.getInternalStack(e)}function jA(){const n=new WeakMap;function e(t){if(!n.has(t.meta)){let s=function(o){if(typeof o=="number"){if(o<0||o>t.source.length)throw new Wt(`Invalid decoration offset: ${o}. Code length: ${t.source.length}`);return{...i.indexToPos(o),offset:o}}else{const l=i.lines[o.line];if(l===void 0)throw new Wt(`Invalid decoration position ${JSON.stringify(o)}. Lines length: ${i.lines.length}`);let a=o.character;if(a<0&&(a=l.length+a),a<0||a>l.length)throw new Wt(`Invalid decoration position ${JSON.stringify(o)}. Line ${o.line} length: ${l.length}`);return{...o,character:a,offset:i.posToIndex(o.line,a)}}};const i=DA(t.source),r=(t.options.decorations||[]).map(o=>({...o,start:s(o.start),end:s(o.end)}));VA(r),n.set(t.meta,{decorations:r,converter:i,source:t.source})}return n.get(t.meta)}return{name:"shiki:decorations",tokens(t){if(!this.options.decorations?.length)return;const i=e(this).decorations.flatMap(o=>[o.start.offset,o.end.offset]);return OA(t,i)},code(t){if(!this.options.decorations?.length)return;const s=e(this),i=Array.from(t.children).filter(c=>c.type==="element"&&c.tagName==="span");if(i.length!==s.converter.lines.length)throw new Wt(`Number of lines in code element (${i.length}) does not match the number of lines in the source (${s.converter.lines.length}). Failed to apply decorations.`);function r(c,d,f,p){const g=i[c];let k="",x=-1,m=-1;if(d===0&&(x=0),f===0&&(m=0),f===Number.POSITIVE_INFINITY&&(m=g.children.length),x===-1||m===-1)for(let R=0;R<g.children.length;R++)k+=zb(g.children[R]),x===-1&&k.length===d&&(x=R+1),m===-1&&k.length===f&&(m=R+1);if(x===-1)throw new Wt(`Failed to find start index for decoration ${JSON.stringify(p.start)}`);if(m===-1)throw new Wt(`Failed to find end index for decoration ${JSON.stringify(p.end)}`);const _=g.children.slice(x,m);if(!p.alwaysWrap&&_.length===g.children.length)l(g,p,"line");else if(!p.alwaysWrap&&_.length===1&&_[0].type==="element")l(_[0],p,"token");else{const R={type:"element",tagName:"span",properties:{},children:_};l(R,p,"wrapper"),g.children.splice(x,_.length,R)}}function o(c,d){i[c]=l(i[c],d,"line")}function l(c,d,f){const p=d.properties||{},g=d.transform||(k=>k);return c.tagName=d.tagName||"span",c.properties={...c.properties,...p,class:c.properties.class},d.properties?.class&&Fb(c,d.properties.class),c=g(c,f)||c,c}const a=[],u=s.decorations.sort((c,d)=>d.start.offset-c.start.offset||c.end.offset-d.end.offset);for(const c of u){const{start:d,end:f}=c;if(d.line===f.line)r(d.line,d.character,f.character,c);else if(d.line<f.line){r(d.line,d.character,Number.POSITIVE_INFINITY,c);for(let p=d.line+1;p<f.line;p++)a.unshift(()=>o(p,c));r(f.line,0,f.character,c)}}a.forEach(c=>c())}}}function VA(n){for(let e=0;e<n.length;e++){const t=n[e];if(t.start.offset>t.end.offset)throw new Wt(`Invalid decoration range: ${JSON.stringify(t.start)} - ${JSON.stringify(t.end)}`);for(let s=e+1;s<n.length;s++){const i=n[s],r=t.start.offset<=i.start.offset&&i.start.offset<t.end.offset,o=t.start.offset<i.end.offset&&i.end.offset<=t.end.offset,l=i.start.offset<=t.start.offset&&t.start.offset<i.end.offset,a=i.start.offset<t.end.offset&&t.end.offset<=i.end.offset;if(r||o||l||a){if(r&&o||l&&a||l&&t.start.offset===t.end.offset||o&&i.start.offset===i.end.offset)continue;throw new Wt(`Decorations ${JSON.stringify(t.start)} and ${JSON.stringify(i.start)} intersect.`)}}}}function zb(n){return n.type==="text"?n.value:n.type==="element"?n.children.map(zb).join(""):""}const $A=[jA()];function Tu(n){const e=NA(n.transformers||[]);return[...e.pre,...e.normal,...e.post,...$A]}function NA(n){const e=[],t=[],s=[];for(const i of n)switch(i.enforce){case"pre":e.push(i);break;case"post":t.push(i);break;default:s.push(i)}return{pre:e,post:t,normal:s}}var cr=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"],ld={1:"bold",2:"dim",3:"italic",4:"underline",7:"reverse",8:"hidden",9:"strikethrough"};function BA(n,e){const t=n.indexOf("\x1B",e);if(t!==-1&&n[t+1]==="["){const s=n.indexOf("m",t);if(s!==-1)return{sequence:n.substring(t+2,s).split(";"),startPosition:t,position:s+1}}return{position:n.length}}function Ig(n){const e=n.shift();if(e==="2"){const t=n.splice(0,3).map(s=>Number.parseInt(s));return t.length!==3||t.some(s=>Number.isNaN(s))?void 0:{type:"rgb",rgb:t}}else if(e==="5"){const t=n.shift();if(t)return{type:"table",index:Number(t)}}}function FA(n){const e=[];for(;n.length>0;){const t=n.shift();if(!t)continue;const s=Number.parseInt(t);if(!Number.isNaN(s))if(s===0)e.push({type:"resetAll"});else if(s<=9)ld[s]&&e.push({type:"setDecoration",value:ld[s]});else if(s<=29){const i=ld[s-20];i&&(e.push({type:"resetDecoration",value:i}),i==="dim"&&e.push({type:"resetDecoration",value:"bold"}))}else if(s<=37)e.push({type:"setForegroundColor",value:{type:"named",name:cr[s-30]}});else if(s===38){const i=Ig(n);i&&e.push({type:"setForegroundColor",value:i})}else if(s===39)e.push({type:"resetForegroundColor"});else if(s<=47)e.push({type:"setBackgroundColor",value:{type:"named",name:cr[s-40]}});else if(s===48){const i=Ig(n);i&&e.push({type:"setBackgroundColor",value:i})}else s===49?e.push({type:"resetBackgroundColor"}):s===53?e.push({type:"setDecoration",value:"overline"}):s===55?e.push({type:"resetDecoration",value:"overline"}):s>=90&&s<=97?e.push({type:"setForegroundColor",value:{type:"named",name:cr[s-90+8]}}):s>=100&&s<=107&&e.push({type:"setBackgroundColor",value:{type:"named",name:cr[s-100+8]}})}return e}function UA(){let n=null,e=null,t=new Set;return{parse(s){const i=[];let r=0;do{const o=BA(s,r),l=o.sequence?s.substring(r,o.startPosition):s.substring(r);if(l.length>0&&i.push({value:l,foreground:n,background:e,decorations:new Set(t)}),o.sequence){const a=FA(o.sequence);for(const u of a)u.type==="resetAll"?(n=null,e=null,t.clear()):u.type==="resetForegroundColor"?n=null:u.type==="resetBackgroundColor"?e=null:u.type==="resetDecoration"&&t.delete(u.value);for(const u of a)u.type==="setForegroundColor"?n=u.value:u.type==="setBackgroundColor"?e=u.value:u.type==="setDecoration"&&t.add(u.value)}r=o.position}while(r<s.length);return i}}}var zA={black:"#000000",red:"#bb0000",green:"#00bb00",yellow:"#bbbb00",blue:"#0000bb",magenta:"#ff00ff",cyan:"#00bbbb",white:"#eeeeee",brightBlack:"#555555",brightRed:"#ff5555",brightGreen:"#00ff00",brightYellow:"#ffff55",brightBlue:"#5555ff",brightMagenta:"#ff55ff",brightCyan:"#55ffff",brightWhite:"#ffffff"};function HA(n=zA){function e(l){return n[l]}function t(l){return`#${l.map(a=>Math.max(0,Math.min(a,255)).toString(16).padStart(2,"0")).join("")}`}let s;function i(){if(s)return s;s=[];for(let u=0;u<cr.length;u++)s.push(e(cr[u]));let l=[0,95,135,175,215,255];for(let u=0;u<6;u++)for(let c=0;c<6;c++)for(let d=0;d<6;d++)s.push(t([l[u],l[c],l[d]]));let a=8;for(let u=0;u<24;u++,a+=10)s.push(t([a,a,a]));return s}function r(l){return i()[l]}function o(l){switch(l.type){case"named":return e(l.name);case"rgb":return t(l.rgb);case"table":return r(l.index)}}return{value:o}}const WA={black:"#000000",red:"#cd3131",green:"#0DBC79",yellow:"#E5E510",blue:"#2472C8",magenta:"#BC3FBC",cyan:"#11A8CD",white:"#E5E5E5",brightBlack:"#666666",brightRed:"#F14C4C",brightGreen:"#23D18B",brightYellow:"#F5F543",brightBlue:"#3B8EEA",brightMagenta:"#D670D6",brightCyan:"#29B8DB",brightWhite:"#FFFFFF"};function qA(n,e,t){const s=Au(n,t),i=vc(e),r=Object.fromEntries(cr.map(a=>{const u=`terminal.ansi${a[0].toUpperCase()}${a.substring(1)}`,c=n.colors?.[u];return[a,c||WA[a]]})),o=HA(r),l=UA();return i.map(a=>l.parse(a[0]).map(u=>{let c,d;u.decorations.has("reverse")?(c=u.background?o.value(u.background):n.bg,d=u.foreground?o.value(u.foreground):n.fg):(c=u.foreground?o.value(u.foreground):n.fg,d=u.background?o.value(u.background):void 0),c=Oi(c,s),d=Oi(d,s),u.decorations.has("dim")&&(c=GA(c));let f=_n.None;return u.decorations.has("bold")&&(f|=_n.Bold),u.decorations.has("italic")&&(f|=_n.Italic),u.decorations.has("underline")&&(f|=_n.Underline),u.decorations.has("strikethrough")&&(f|=_n.Strikethrough),{content:u.value,offset:a[1],color:c,bgColor:d,fontStyle:f}}))}function GA(n){const e=n.match(/#([0-9a-f]{3,8})/i);if(e){const s=e[1];if(s.length===8){const i=Math.round(Number.parseInt(s.slice(6,8),16)/2).toString(16).padStart(2,"0");return`#${s.slice(0,6)}${i}`}else{if(s.length===6)return`#${s}80`;if(s.length===4){const i=s[0],r=s[1],o=s[2],l=s[3],a=Math.round(Number.parseInt(`${l}${l}`,16)/2).toString(16).padStart(2,"0");return`#${i}${i}${r}${r}${o}${o}${a}`}else if(s.length===3){const i=s[0],r=s[1],o=s[2];return`#${i}${i}${r}${r}${o}${o}80`}}}const t=n.match(/var\((--[\w-]+-ansi-[\w-]+)\)/);return t?`var(${t[1]}-dim)`:n}function Wh(n,e,t={}){const{lang:s="text",theme:i=n.getLoadedThemes()[0]}=t;if(Uh(s)||zh(i))return vc(e).map(a=>[{content:a[0],offset:a[1]}]);const{theme:r,colorMap:o}=n.setTheme(i);if(s==="ansi")return qA(r,e,t);const l=n.getLanguage(s);if(t.grammarState){if(t.grammarState.lang!==l.name)throw new Wt(`Grammar state language "${t.grammarState.lang}" does not match highlight language "${l.name}"`);if(!t.grammarState.themes.includes(r.name))throw new Wt(`Grammar state themes "${t.grammarState.themes}" do not contain highlight theme "${r.name}"`)}return JA(e,l,r,o,t)}function KA(...n){if(n.length===2)return Sl(n[1]);const[e,t,s={}]=n,{lang:i="text",theme:r=e.getLoadedThemes()[0]}=s;if(Uh(i)||zh(r))throw new Wt("Plain language does not have grammar state");if(i==="ansi")throw new Wt("ANSI language does not have grammar state");const{theme:o,colorMap:l}=e.setTheme(r),a=e.getLanguage(i);return new Co(Du(t,a,o,l,s).stateStack,a.name,o.name)}function JA(n,e,t,s,i){const r=Du(n,e,t,s,i),o=new Co(Du(n,e,t,s,i).stateStack,e.name,t.name);return yc(r.tokens,o),r.tokens}function Du(n,e,t,s,i){const r=Au(t,i),{tokenizeMaxLineLength:o=0,tokenizeTimeLimit:l=500}=i,a=vc(n);let u=i.grammarState?IA(i.grammarState,t.name)??ff:i.grammarContextCode!=null?Du(i.grammarContextCode,e,t,s,{...i,grammarState:void 0,grammarContextCode:void 0}).stateStack:ff,c=[];const d=[];for(let f=0,p=a.length;f<p;f++){const[g,k]=a[f];if(g===""){c=[],d.push([]);continue}if(o>0&&g.length>=o){c=[],d.push([{content:g,offset:k,color:"",fontStyle:0}]);continue}let x,m,_;i.includeExplanation&&(x=e.tokenizeLine(g,u,l),m=x.tokens,_=0);const R=e.tokenizeLine2(g,u,l),U=R.tokens.length/2;for(let N=0;N<U;N++){const A=R.tokens[2*N],w=N+1<U?R.tokens[2*N+2]:g.length;if(A===w)continue;const M=R.tokens[2*N+1],G=Oi(s[uo.getForeground(M)],r),ue=uo.getFontStyle(M),ie={content:g.substring(A,w),offset:k+A,color:G,fontStyle:ue};if(i.includeExplanation){const F=[];if(i.includeExplanation!=="scopeName")for(const ee of t.settings){let V;switch(typeof ee.scope){case"string":V=ee.scope.split(/,/).map(J=>J.trim());break;case"object":V=ee.scope;break;default:continue}F.push({settings:ee,selectors:V.map(J=>J.split(/ /))})}ie.explanation=[];let ae=0;for(;A+ae<w;){const ee=m[_],V=g.substring(ee.startIndex,ee.endIndex);ae+=V.length,ie.explanation.push({content:V,scopes:i.includeExplanation==="scopeName"?QA(ee.scopes):YA(F,ee.scopes)}),_+=1}}c.push(ie)}d.push(c),c=[],u=R.ruleStack}return{tokens:d,stateStack:u}}function QA(n){return n.map(e=>({scopeName:e}))}function YA(n,e){const t=[];for(let s=0,i=e.length;s<i;s++){const r=e[s];t[s]={scopeName:r,themeMatches:ZA(n,r,e.slice(0,s))}}return t}function jg(n,e){return n===e||e.substring(0,n.length)===n&&e[n.length]==="."}function XA(n,e,t){if(!jg(n[n.length-1],e))return!1;let s=n.length-2,i=t.length-1;for(;s>=0&&i>=0;)jg(n[s],t[i])&&(s-=1),i-=1;return s===-1}function ZA(n,e,t){const s=[];for(const{selectors:i,settings:r}of n)for(const o of i)if(XA(o,e,t)){s.push(r);break}return s}function Hb(n,e,t){const s=Object.entries(t.themes).filter(a=>a[1]).map(a=>({color:a[0],theme:a[1]})),i=s.map(a=>{const u=Wh(n,e,{...t,theme:a.theme}),c=Sl(u),d=typeof a.theme=="string"?a.theme:a.theme.name;return{tokens:u,state:c,theme:d}}),r=eE(...i.map(a=>a.tokens)),o=r[0].map((a,u)=>a.map((c,d)=>{const f={content:c.content,variants:{},offset:c.offset};return"includeExplanation"in t&&t.includeExplanation&&(f.explanation=c.explanation),r.forEach((p,g)=>{const{content:k,explanation:x,offset:m,..._}=p[u][d];f.variants[s[g].color]=_}),f})),l=i[0].state?new Co(Object.fromEntries(i.map(a=>[a.theme,a.state?.getInternalStack(a.theme)])),i[0].state.lang):void 0;return l&&yc(o,l),o}function eE(...n){const e=n.map(()=>[]),t=n.length;for(let s=0;s<n[0].length;s++){const i=n.map(a=>a[s]),r=e.map(()=>[]);e.forEach((a,u)=>a.push(r[u]));const o=i.map(()=>0),l=i.map(a=>a[0]);for(;l.every(a=>a);){const a=Math.min(...l.map(u=>u.content.length));for(let u=0;u<t;u++){const c=l[u];c.content.length===a?(r[u].push(c),o[u]+=1,l[u]=i[u][o[u]]):(r[u].push({...c,content:c.content.slice(0,a)}),l[u]={...c,content:c.content.slice(a),offset:c.offset+a})}}}return e}function Pu(n,e,t){let s,i,r,o,l,a;if("themes"in t){const{defaultColor:u="light",cssVariablePrefix:c="--shiki-",colorsRendering:d="css-vars"}=t,f=Object.entries(t.themes).filter(m=>m[1]).map(m=>({color:m[0],theme:m[1]})).sort((m,_)=>m.color===u?-1:_.color===u?1:0);if(f.length===0)throw new Wt("`themes` option must not be empty");const p=Hb(n,e,t);if(a=Sl(p),u&&Hh!==u&&!f.find(m=>m.color===u))throw new Wt(`\`themes\` option must contain the defaultColor key \`${u}\``);const g=f.map(m=>n.getTheme(m.theme)),k=f.map(m=>m.color);r=p.map(m=>m.map(_=>LA(_,k,c,u,d))),a&&yc(r,a);const x=f.map(m=>Au(m.theme,t));i=Vg(f,g,x,c,u,"fg",d),s=Vg(f,g,x,c,u,"bg",d),o=`shiki-themes ${g.map(m=>m.name).join(" ")}`,l=u?void 0:[i,s].join(";")}else if("theme"in t){const u=Au(t.theme,t);r=Wh(n,e,t);const c=n.getTheme(t.theme);s=Oi(c.bg,u),i=Oi(c.fg,u),o=c.name,a=Sl(r)}else throw new Wt("Invalid options, either `theme` or `themes` must be provided");return{tokens:r,fg:i,bg:s,themeName:o,rootStyle:l,grammarState:a}}function Vg(n,e,t,s,i,r,o){return n.map((l,a)=>{const u=Oi(e[a][r],t[a])||"inherit",c=`${s+l.color}${r==="bg"?"-bg":""}:${u}`;if(a===0&&i){if(i===Hh&&n.length>1){const d=n.findIndex(k=>k.color==="light"),f=n.findIndex(k=>k.color==="dark");if(d===-1||f===-1)throw new Wt('When using `defaultColor: "light-dark()"`, you must provide both `light` and `dark` themes');const p=Oi(e[d][r],t[d])||"inherit",g=Oi(e[f][r],t[f])||"inherit";return`light-dark(${p}, ${g});${c}`}return u}return o==="css-vars"?c:null}).filter(l=>!!l).join(";")}function Ru(n,e,t,s={meta:{},options:t,codeToHast:(i,r)=>Ru(n,i,r),codeToTokens:(i,r)=>Pu(n,i,r)}){let i=e;for(const g of Tu(t))i=g.preprocess?.call(s,i,t)||i;let{tokens:r,fg:o,bg:l,themeName:a,rootStyle:u,grammarState:c}=Pu(n,i,t);const{mergeWhitespaces:d=!0,mergeSameStyleTokens:f=!1}=t;d===!0?r=nE(r):d==="never"&&(r=sE(r)),f&&(r=iE(r));const p={...s,get source(){return i}};for(const g of Tu(t))r=g.tokens?.call(p,r)||r;return tE(r,{...t,fg:o,bg:l,themeName:a,rootStyle:u},p,c)}function tE(n,e,t,s=Sl(n)){const i=Tu(e),r=[],o={type:"root",children:[]},{structure:l="classic",tabindex:a="0"}=e;let u={type:"element",tagName:"pre",properties:{class:`shiki ${e.themeName||""}`,style:e.rootStyle||`background-color:${e.bg};color:${e.fg}`,...a!==!1&&a!=null?{tabindex:a.toString()}:{},...Object.fromEntries(Array.from(Object.entries(e.meta||{})).filter(([g])=>!g.startsWith("_")))},children:[]},c={type:"element",tagName:"code",properties:{},children:r};const d=[],f={...t,structure:l,addClassToHast:Fb,get source(){return t.source},get tokens(){return n},get options(){return e},get root(){return o},get pre(){return u},get code(){return c},get lines(){return d}};if(n.forEach((g,k)=>{k&&(l==="inline"?o.children.push({type:"element",tagName:"br",properties:{},children:[]}):l==="classic"&&r.push({type:"text",value:`
`}));let x={type:"element",tagName:"span",properties:{class:"line"},children:[]},m=0;for(const _ of g){let R={type:"element",tagName:"span",properties:{..._.htmlAttrs},children:[{type:"text",value:_.content}]};const U=vf(_.htmlStyle||Eu(_));U&&(R.properties.style=U);for(const N of i)R=N?.span?.call(f,R,k+1,m,x,_)||R;l==="inline"?o.children.push(R):l==="classic"&&x.children.push(R),m+=_.content.length}if(l==="classic"){for(const _ of i)x=_?.line?.call(f,x,k+1)||x;d.push(x),r.push(x)}else l==="inline"&&d.push(x)}),l==="classic"){for(const g of i)c=g?.code?.call(f,c)||c;u.children.push(c);for(const g of i)u=g?.pre?.call(f,u)||u;o.children.push(u)}else if(l==="inline"){const g=[];let k={type:"element",tagName:"span",properties:{class:"line"},children:[]};for(const _ of o.children)_.type==="element"&&_.tagName==="br"?(g.push(k),k={type:"element",tagName:"span",properties:{class:"line"},children:[]}):(_.type==="element"||_.type==="text")&&k.children.push(_);g.push(k);let m={type:"element",tagName:"code",properties:{},children:g};for(const _ of i)m=_?.code?.call(f,m)||m;o.children=[];for(let _=0;_<m.children.length;_++){_>0&&o.children.push({type:"element",tagName:"br",properties:{},children:[]});const R=m.children[_];R.type==="element"&&o.children.push(...R.children)}}let p=o;for(const g of i)p=g?.root?.call(f,p)||p;return s&&yc(p,s),p}function nE(n){return n.map(e=>{const t=[];let s="",i=0;return e.forEach((r,o)=>{const a=!(r.fontStyle&&(r.fontStyle&_n.Underline||r.fontStyle&_n.Strikethrough));a&&r.content.match(/^\s+$/)&&e[o+1]?(i||(i=r.offset),s+=r.content):s?(a?t.push({...r,offset:i,content:s+r.content}):t.push({content:s,offset:i},r),i=0,s=""):t.push(r)}),t})}function sE(n){return n.map(e=>e.flatMap(t=>{if(t.content.match(/^\s+$/))return t;const s=t.content.match(/^(\s*)(.*?)(\s*)$/);if(!s)return t;const[,i,r,o]=s;if(!i&&!o)return t;const l=[{...t,offset:t.offset+i.length,content:r}];return i&&l.unshift({content:i,offset:t.offset}),o&&l.push({content:o,offset:t.offset+i.length+r.length}),l}))}function iE(n){return n.map(e=>{const t=[];for(const s of e){if(t.length===0){t.push({...s});continue}const i=t[t.length-1],r=vf(i.htmlStyle||Eu(i)),o=vf(s.htmlStyle||Eu(s)),l=i.fontStyle&&(i.fontStyle&_n.Underline||i.fontStyle&_n.Strikethrough),a=s.fontStyle&&(s.fontStyle&_n.Underline||s.fontStyle&_n.Strikethrough);!l&&!a&&r===o?i.content+=s.content:t.push({...s})}return t})}const rE=CA;function oE(n,e,t){const s={meta:{},options:t,codeToHast:(r,o)=>Ru(n,r,o),codeToTokens:(r,o)=>Pu(n,r,o)};let i=rE(Ru(n,e,t,s));for(const r of Tu(t))i=r.postprocess?.call(s,i,t)||i;return i}const $g={light:"#333333",dark:"#bbbbbb"},Ng={light:"#fffffe",dark:"#1e1e1e"},Bg="__shiki_resolved";function qh(n){if(n?.[Bg])return n;const e={...n};e.tokenColors&&!e.settings&&(e.settings=e.tokenColors,delete e.tokenColors),e.type||="dark",e.colorReplacements={...e.colorReplacements},e.settings||=[];let{bg:t,fg:s}=e;if(!t||!s){const l=e.settings?e.settings.find(a=>!a.name&&!a.scope):void 0;l?.settings?.foreground&&(s=l.settings.foreground),l?.settings?.background&&(t=l.settings.background),!s&&e?.colors?.["editor.foreground"]&&(s=e.colors["editor.foreground"]),!t&&e?.colors?.["editor.background"]&&(t=e.colors["editor.background"]),s||(s=e.type==="light"?$g.light:$g.dark),t||(t=e.type==="light"?Ng.light:Ng.dark),e.fg=s,e.bg=t}e.settings[0]&&e.settings[0].settings&&!e.settings[0].scope||e.settings.unshift({settings:{foreground:e.fg,background:e.bg}});let i=0;const r=new Map;function o(l){if(r.has(l))return r.get(l);i+=1;const a=`#${i.toString(16).padStart(8,"0").toLowerCase()}`;return e.colorReplacements?.[`#${a}`]?o(l):(r.set(l,a),a)}e.settings=e.settings.map(l=>{const a=l.settings?.foreground&&!l.settings.foreground.startsWith("#"),u=l.settings?.background&&!l.settings.background.startsWith("#");if(!a&&!u)return l;const c={...l,settings:{...l.settings}};if(a){const d=o(l.settings.foreground);e.colorReplacements[d]=l.settings.foreground,c.settings.foreground=d}if(u){const d=o(l.settings.background);e.colorReplacements[d]=l.settings.background,c.settings.background=d}return c});for(const l of Object.keys(e.colors||{}))if((l==="editor.foreground"||l==="editor.background"||l.startsWith("terminal.ansi"))&&!e.colors[l]?.startsWith("#")){const a=o(e.colors[l]);e.colorReplacements[a]=e.colors[l],e.colors[l]=a}return Object.defineProperty(e,Bg,{enumerable:!1,writable:!1,value:!0}),e}async function Wb(n){return Array.from(new Set((await Promise.all(n.filter(e=>!Nb(e)).map(async e=>await $b(e).then(t=>Array.isArray(t)?t:[t])))).flat()))}async function qb(n){return(await Promise.all(n.map(async t=>Bb(t)?null:qh(await $b(t))))).filter(t=>!!t)}let lE=3;function aE(n,e=3){e>lE||console.trace(`[SHIKI DEPRECATE]: ${n}`)}let Br=class extends Error{constructor(e){super(e),this.name="ShikiError"}};class uE extends d5{constructor(e,t,s,i={}){super(e),this._resolver=e,this._themes=t,this._langs=s,this._alias=i,this._themes.map(r=>this.loadTheme(r)),this.loadLanguages(this._langs)}_resolvedThemes=new Map;_resolvedGrammars=new Map;_langMap=new Map;_langGraph=new Map;_textmateThemeCache=new WeakMap;_loadedThemesCache=null;_loadedLanguagesCache=null;getTheme(e){return typeof e=="string"?this._resolvedThemes.get(e):this.loadTheme(e)}loadTheme(e){const t=qh(e);return t.name&&(this._resolvedThemes.set(t.name,t),this._loadedThemesCache=null),t}getLoadedThemes(){return this._loadedThemesCache||(this._loadedThemesCache=[...this._resolvedThemes.keys()]),this._loadedThemesCache}setTheme(e){let t=this._textmateThemeCache.get(e);t||(t=xu.createFromRawTheme(e),this._textmateThemeCache.set(e,t)),this._syncRegistry.setTheme(t)}getGrammar(e){if(this._alias[e]){const t=new Set([e]);for(;this._alias[e];){if(e=this._alias[e],t.has(e))throw new Br(`Circular alias \`${Array.from(t).join(" -> ")} -> ${e}\``);t.add(e)}}return this._resolvedGrammars.get(e)}loadLanguage(e){if(this.getGrammar(e.name))return;const t=new Set([...this._langMap.values()].filter(r=>r.embeddedLangsLazy?.includes(e.name)));this._resolver.addLanguage(e);const s={balancedBracketSelectors:e.balancedBracketSelectors||["*"],unbalancedBracketSelectors:e.unbalancedBracketSelectors||[]};this._syncRegistry._rawGrammars.set(e.scopeName,e);const i=this.loadGrammarWithConfiguration(e.scopeName,1,s);if(i.name=e.name,this._resolvedGrammars.set(e.name,i),e.aliases&&e.aliases.forEach(r=>{this._alias[r]=e.name}),this._loadedLanguagesCache=null,t.size)for(const r of t)this._resolvedGrammars.delete(r.name),this._loadedLanguagesCache=null,this._syncRegistry?._injectionGrammars?.delete(r.scopeName),this._syncRegistry?._grammars?.delete(r.scopeName),this.loadLanguage(this._langMap.get(r.name))}dispose(){super.dispose(),this._resolvedThemes.clear(),this._resolvedGrammars.clear(),this._langMap.clear(),this._langGraph.clear(),this._loadedThemesCache=null}loadLanguages(e){for(const i of e)this.resolveEmbeddedLanguages(i);const t=Array.from(this._langGraph.entries()),s=t.filter(([i,r])=>!r);if(s.length){const i=t.filter(([r,o])=>o&&o.embeddedLangs?.some(l=>s.map(([a])=>a).includes(l))).filter(r=>!s.includes(r));throw new Br(`Missing languages ${s.map(([r])=>`\`${r}\``).join(", ")}, required by ${i.map(([r])=>`\`${r}\``).join(", ")}`)}for(const[i,r]of t)this._resolver.addLanguage(r);for(const[i,r]of t)this.loadLanguage(r)}getLoadedLanguages(){return this._loadedLanguagesCache||(this._loadedLanguagesCache=[...new Set([...this._resolvedGrammars.keys(),...Object.keys(this._alias)])]),this._loadedLanguagesCache}resolveEmbeddedLanguages(e){this._langMap.set(e.name,e),this._langGraph.set(e.name,e);const t=e.embeddedLanguages??e.embeddedLangs;if(t)for(const s of t)this._langGraph.set(s,this._langMap.get(s))}}class cE{_langs=new Map;_scopeToLang=new Map;_injections=new Map;_onigLib;constructor(e,t){this._onigLib={createOnigScanner:s=>e.createScanner(s),createOnigString:s=>e.createString(s)},t.forEach(s=>this.addLanguage(s))}get onigLib(){return this._onigLib}getLangRegistration(e){return this._langs.get(e)}loadGrammar(e){return this._scopeToLang.get(e)}addLanguage(e){this._langs.set(e.name,e),e.aliases&&e.aliases.forEach(t=>{this._langs.set(t,e)}),this._scopeToLang.set(e.scopeName,e),e.injectTo&&e.injectTo.forEach(t=>{this._injections.get(t)||this._injections.set(t,[]),this._injections.get(t).push(e.scopeName)})}getInjections(e){const t=e.split(".");let s=[];for(let i=1;i<=t.length;i++){const r=t.slice(0,i).join(".");s=[...s,...this._injections.get(r)||[]]}return s}}let Io=0;function dE(n){Io+=1,n.warnings!==!1&&Io>=10&&Io%10===0&&console.warn(`[Shiki] ${Io} instances have been created. Shiki is supposed to be used as a singleton, consider refactoring your code to cache your highlighter instance; Or call \`highlighter.dispose()\` to release unused instances.`);let e=!1;if(!n.engine)throw new Br("`engine` option is required for synchronous mode");const t=(n.langs||[]).flat(1),s=(n.themes||[]).flat(1).map(qh),i=new cE(n.engine,t),r=new uE(i,s,t,n.langAlias);let o;function l(_){x();const R=r.getGrammar(typeof _=="string"?_:_.name);if(!R)throw new Br(`Language \`${_}\` not found, you may need to load it first`);return R}function a(_){if(_==="none")return{bg:"",fg:"",name:"none",settings:[],type:"dark"};x();const R=r.getTheme(_);if(!R)throw new Br(`Theme \`${_}\` not found, you may need to load it first`);return R}function u(_){x();const R=a(_);o!==_&&(r.setTheme(R),o=_);const U=r.getColorMap();return{theme:R,colorMap:U}}function c(){return x(),r.getLoadedThemes()}function d(){return x(),r.getLoadedLanguages()}function f(..._){x(),r.loadLanguages(_.flat(1))}async function p(..._){return f(await Wb(_))}function g(..._){x();for(const R of _.flat(1))r.loadTheme(R)}async function k(..._){return x(),g(await qb(_))}function x(){if(e)throw new Br("Shiki instance has been disposed")}function m(){e||(e=!0,r.dispose(),Io-=1)}return{setTheme:u,getTheme:a,getLanguage:l,getLoadedThemes:c,getLoadedLanguages:d,loadLanguage:p,loadLanguageSync:f,loadTheme:k,loadThemeSync:g,dispose:m,[Symbol.dispose]:m}}async function fE(n){n.engine||aE("`engine` option is required. Use `createOnigurumaEngine` or `createJavaScriptRegexEngine` to create an engine.");const[e,t,s]=await Promise.all([qb(n.themes||[]),Wb(n.langs||[]),n.engine]);return dE({...n,themes:e,langs:t,engine:s})}async function hE(n){const e=await fE(n);return{getLastGrammarState:(...t)=>KA(e,...t),codeToTokensBase:(t,s)=>Wh(e,t,s),codeToTokensWithThemes:(t,s)=>Hb(e,t,s),codeToTokens:(t,s)=>Pu(e,t,s),codeToHast:(t,s)=>Ru(e,t,s),codeToHtml:(t,s)=>oE(e,t,s),getBundledLanguages:()=>({}),getBundledThemes:()=>({}),...e,getInternalContext:()=>e}}function pE(n){const e=n.langs,t=n.themes,s=n.engine;async function i(r){function o(d){if(typeof d=="string"){if(Nb(d))return[];d=r.langAlias?.[d]||d;const f=e[d];if(!f)throw new Wt(`Language \`${d}\` is not included in this bundle. You may want to load it from external source.`);return f}return d}function l(d){if(Bb(d))return"none";if(typeof d=="string"){const f=t[d];if(!f)throw new Wt(`Theme \`${d}\` is not included in this bundle. You may want to load it from external source.`);return f}return d}const a=(r.themes??[]).map(d=>l(d)),u=(r.langs??[]).map(d=>o(d)),c=await hE({engine:r.engine??s(),...r,themes:a,langs:u});return{...c,loadLanguage(...d){return c.loadLanguage(...d.map(o))},loadTheme(...d){return c.loadTheme(...d.map(l))},getBundledLanguages(){return e},getBundledThemes(){return t}}}return i}const Gb=[{id:"abap",name:"ABAP",import:(()=>P(()=>import("./abap.js"),[]))},{id:"actionscript-3",name:"ActionScript",import:(()=>P(()=>import("./actionscript-3.js"),[]))},{id:"ada",name:"Ada",import:(()=>P(()=>import("./ada.js"),[]))},{id:"angular-html",name:"Angular HTML",import:(()=>P(()=>import("./angular-html.js").then(n=>n.f),__vite__mapDeps([0,1,2,3])))},{id:"angular-ts",name:"Angular TypeScript",import:(()=>P(()=>import("./angular-ts.js"),__vite__mapDeps([4,0,1,2,3,5])))},{id:"apache",name:"Apache Conf",import:(()=>P(()=>import("./apache.js"),[]))},{id:"apex",name:"Apex",import:(()=>P(()=>import("./apex.js"),[]))},{id:"apl",name:"APL",import:(()=>P(()=>import("./apl.js"),__vite__mapDeps([6,1,2,3,7,8,9])))},{id:"applescript",name:"AppleScript",import:(()=>P(()=>import("./applescript.js"),[]))},{id:"ara",name:"Ara",import:(()=>P(()=>import("./ara.js"),[]))},{id:"asciidoc",name:"AsciiDoc",aliases:["adoc"],import:(()=>P(()=>import("./asciidoc.js"),[]))},{id:"asm",name:"Assembly",import:(()=>P(()=>import("./asm.js"),[]))},{id:"astro",name:"Astro",import:(()=>P(()=>import("./astro.js"),__vite__mapDeps([10,9,2,11,3,12,13])))},{id:"awk",name:"AWK",import:(()=>P(()=>import("./awk.js"),[]))},{id:"ballerina",name:"Ballerina",import:(()=>P(()=>import("./ballerina.js"),[]))},{id:"bat",name:"Batch File",aliases:["batch"],import:(()=>P(()=>import("./bat.js"),[]))},{id:"beancount",name:"Beancount",import:(()=>P(()=>import("./beancount.js"),[]))},{id:"berry",name:"Berry",aliases:["be"],import:(()=>P(()=>import("./berry.js"),[]))},{id:"bibtex",name:"BibTeX",import:(()=>P(()=>import("./bibtex.js"),[]))},{id:"bicep",name:"Bicep",import:(()=>P(()=>import("./bicep.js"),[]))},{id:"blade",name:"Blade",import:(()=>P(()=>import("./blade.js"),__vite__mapDeps([14,15,1,2,3,7,8,16,9])))},{id:"bsl",name:"1C (Enterprise)",aliases:["1c"],import:(()=>P(()=>import("./bsl.js"),__vite__mapDeps([17,18])))},{id:"c",name:"C",import:(()=>P(()=>import("./c.js"),[]))},{id:"cadence",name:"Cadence",aliases:["cdc"],import:(()=>P(()=>import("./cadence.js"),[]))},{id:"cairo",name:"Cairo",import:(()=>P(()=>import("./cairo.js"),__vite__mapDeps([19,20])))},{id:"clarity",name:"Clarity",import:(()=>P(()=>import("./clarity.js"),[]))},{id:"clojure",name:"Clojure",aliases:["clj"],import:(()=>P(()=>import("./clojure.js"),[]))},{id:"cmake",name:"CMake",import:(()=>P(()=>import("./cmake.js"),[]))},{id:"cobol",name:"COBOL",import:(()=>P(()=>import("./cobol.js"),__vite__mapDeps([21,1,2,3,8])))},{id:"codeowners",name:"CODEOWNERS",import:(()=>P(()=>import("./codeowners.js"),[]))},{id:"codeql",name:"CodeQL",aliases:["ql"],import:(()=>P(()=>import("./codeql.js"),[]))},{id:"coffee",name:"CoffeeScript",aliases:["coffeescript"],import:(()=>P(()=>import("./coffee.js"),__vite__mapDeps([22,2])))},{id:"common-lisp",name:"Common Lisp",aliases:["lisp"],import:(()=>P(()=>import("./common-lisp.js"),[]))},{id:"coq",name:"Coq",import:(()=>P(()=>import("./coq.js"),[]))},{id:"cpp",name:"C++",aliases:["c++"],import:(()=>P(()=>import("./cpp.js"),__vite__mapDeps([23,24,25,26,16])))},{id:"crystal",name:"Crystal",import:(()=>P(()=>import("./crystal.js"),__vite__mapDeps([27,1,2,3,16,26,28])))},{id:"csharp",name:"C#",aliases:["c#","cs"],import:(()=>P(()=>import("./csharp.js"),[]))},{id:"css",name:"CSS",import:(()=>P(()=>import("./css.js"),[]))},{id:"csv",name:"CSV",import:(()=>P(()=>import("./csv.js"),[]))},{id:"cue",name:"CUE",import:(()=>P(()=>import("./cue.js"),[]))},{id:"cypher",name:"Cypher",aliases:["cql"],import:(()=>P(()=>import("./cypher.js"),[]))},{id:"d",name:"D",import:(()=>P(()=>import("./d.js"),[]))},{id:"dart",name:"Dart",import:(()=>P(()=>import("./dart.js"),[]))},{id:"dax",name:"DAX",import:(()=>P(()=>import("./dax.js"),[]))},{id:"desktop",name:"Desktop",import:(()=>P(()=>import("./desktop.js"),[]))},{id:"diff",name:"Diff",import:(()=>P(()=>import("./diff.js"),[]))},{id:"docker",name:"Dockerfile",aliases:["dockerfile"],import:(()=>P(()=>import("./docker.js"),[]))},{id:"dotenv",name:"dotEnv",import:(()=>P(()=>import("./dotenv.js"),[]))},{id:"dream-maker",name:"Dream Maker",import:(()=>P(()=>import("./dream-maker.js"),[]))},{id:"edge",name:"Edge",import:(()=>P(()=>import("./edge.js"),__vite__mapDeps([29,11,1,2,3,15])))},{id:"elixir",name:"Elixir",import:(()=>P(()=>import("./elixir.js"),__vite__mapDeps([30,1,2,3])))},{id:"elm",name:"Elm",import:(()=>P(()=>import("./elm.js"),__vite__mapDeps([31,25,26])))},{id:"emacs-lisp",name:"Emacs Lisp",aliases:["elisp"],import:(()=>P(()=>import("./emacs-lisp.js"),[]))},{id:"erb",name:"ERB",import:(()=>P(()=>import("./erb.js"),__vite__mapDeps([32,1,2,3,33,34,7,8,16,35,11,36,13,23,24,25,26,28,37,38])))},{id:"erlang",name:"Erlang",aliases:["erl"],import:(()=>P(()=>import("./erlang.js"),__vite__mapDeps([39,40])))},{id:"fennel",name:"Fennel",import:(()=>P(()=>import("./fennel.js"),[]))},{id:"fish",name:"Fish",import:(()=>P(()=>import("./fish.js"),[]))},{id:"fluent",name:"Fluent",aliases:["ftl"],import:(()=>P(()=>import("./fluent.js"),[]))},{id:"fortran-fixed-form",name:"Fortran (Fixed Form)",aliases:["f","for","f77"],import:(()=>P(()=>import("./fortran-fixed-form.js"),__vite__mapDeps([41,42])))},{id:"fortran-free-form",name:"Fortran (Free Form)",aliases:["f90","f95","f03","f08","f18"],import:(()=>P(()=>import("./fortran-free-form.js"),[]))},{id:"fsharp",name:"F#",aliases:["f#","fs"],import:(()=>P(()=>import("./fsharp.js"),__vite__mapDeps([43,40])))},{id:"gdresource",name:"GDResource",import:(()=>P(()=>import("./gdresource.js"),__vite__mapDeps([44,45,46])))},{id:"gdscript",name:"GDScript",import:(()=>P(()=>import("./gdscript.js"),[]))},{id:"gdshader",name:"GDShader",import:(()=>P(()=>import("./gdshader.js"),[]))},{id:"genie",name:"Genie",import:(()=>P(()=>import("./genie.js"),[]))},{id:"gherkin",name:"Gherkin",import:(()=>P(()=>import("./gherkin.js"),[]))},{id:"git-commit",name:"Git Commit Message",import:(()=>P(()=>import("./git-commit.js"),__vite__mapDeps([47,48])))},{id:"git-rebase",name:"Git Rebase Message",import:(()=>P(()=>import("./git-rebase.js"),__vite__mapDeps([49,28])))},{id:"gleam",name:"Gleam",import:(()=>P(()=>import("./gleam.js"),[]))},{id:"glimmer-js",name:"Glimmer JS",aliases:["gjs"],import:(()=>P(()=>import("./glimmer-js.js"),__vite__mapDeps([50,2,11,3,1])))},{id:"glimmer-ts",name:"Glimmer TS",aliases:["gts"],import:(()=>P(()=>import("./glimmer-ts.js"),__vite__mapDeps([51,11,3,2,1])))},{id:"glsl",name:"GLSL",import:(()=>P(()=>import("./glsl.js"),__vite__mapDeps([25,26])))},{id:"gnuplot",name:"Gnuplot",import:(()=>P(()=>import("./gnuplot.js"),[]))},{id:"go",name:"Go",import:(()=>P(()=>import("./go.js"),[]))},{id:"graphql",name:"GraphQL",aliases:["gql"],import:(()=>P(()=>import("./graphql.js"),__vite__mapDeps([35,2,11,36,13])))},{id:"groovy",name:"Groovy",import:(()=>P(()=>import("./groovy.js"),[]))},{id:"hack",name:"Hack",import:(()=>P(()=>import("./hack.js"),__vite__mapDeps([52,1,2,3,16])))},{id:"haml",name:"Ruby Haml",import:(()=>P(()=>import("./haml.js"),__vite__mapDeps([34,2,3])))},{id:"handlebars",name:"Handlebars",aliases:["hbs"],import:(()=>P(()=>import("./handlebars.js"),__vite__mapDeps([53,1,2,3,38])))},{id:"haskell",name:"Haskell",aliases:["hs"],import:(()=>P(()=>import("./haskell.js"),[]))},{id:"haxe",name:"Haxe",import:(()=>P(()=>import("./haxe.js"),[]))},{id:"hcl",name:"HashiCorp HCL",import:(()=>P(()=>import("./hcl.js"),[]))},{id:"hjson",name:"Hjson",import:(()=>P(()=>import("./hjson.js"),[]))},{id:"hlsl",name:"HLSL",import:(()=>P(()=>import("./hlsl.js"),[]))},{id:"html",name:"HTML",import:(()=>P(()=>import("./html.js"),__vite__mapDeps([1,2,3])))},{id:"html-derivative",name:"HTML (Derivative)",import:(()=>P(()=>import("./html-derivative.js"),__vite__mapDeps([15,1,2,3])))},{id:"http",name:"HTTP",import:(()=>P(()=>import("./http.js"),__vite__mapDeps([54,28,9,7,8,35,2,11,36,13])))},{id:"hurl",name:"Hurl",import:(()=>P(()=>import("./hurl.js"),__vite__mapDeps([55,35,2,11,36,13,7,8,56])))},{id:"hxml",name:"HXML",import:(()=>P(()=>import("./hxml.js"),__vite__mapDeps([57,58])))},{id:"hy",name:"Hy",import:(()=>P(()=>import("./hy.js"),[]))},{id:"imba",name:"Imba",import:(()=>P(()=>import("./imba.js"),[]))},{id:"ini",name:"INI",aliases:["properties"],import:(()=>P(()=>import("./ini.js"),[]))},{id:"java",name:"Java",import:(()=>P(()=>import("./java.js"),[]))},{id:"javascript",name:"JavaScript",aliases:["js","cjs","mjs"],import:(()=>P(()=>import("./javascript.js"),[]))},{id:"jinja",name:"Jinja",import:(()=>P(()=>import("./jinja.js"),__vite__mapDeps([59,1,2,3])))},{id:"jison",name:"Jison",import:(()=>P(()=>import("./jison.js"),__vite__mapDeps([60,2])))},{id:"json",name:"JSON",import:(()=>P(()=>import("./json.js"),[]))},{id:"json5",name:"JSON5",import:(()=>P(()=>import("./json5.js"),[]))},{id:"jsonc",name:"JSON with Comments",import:(()=>P(()=>import("./jsonc.js"),[]))},{id:"jsonl",name:"JSON Lines",import:(()=>P(()=>import("./jsonl.js"),[]))},{id:"jsonnet",name:"Jsonnet",import:(()=>P(()=>import("./jsonnet.js"),[]))},{id:"jssm",name:"JSSM",aliases:["fsl"],import:(()=>P(()=>import("./jssm.js"),[]))},{id:"jsx",name:"JSX",import:(()=>P(()=>import("./jsx.js"),[]))},{id:"julia",name:"Julia",aliases:["jl"],import:(()=>P(()=>import("./julia.js"),__vite__mapDeps([61,23,24,25,26,16,20,2,62])))},{id:"kdl",name:"KDL",import:(()=>P(()=>import("./kdl.js"),[]))},{id:"kotlin",name:"Kotlin",aliases:["kt","kts"],import:(()=>P(()=>import("./kotlin.js"),[]))},{id:"kusto",name:"Kusto",aliases:["kql"],import:(()=>P(()=>import("./kusto.js"),[]))},{id:"latex",name:"LaTeX",import:(()=>P(()=>import("./latex.js"),__vite__mapDeps([63,64,62])))},{id:"lean",name:"Lean 4",aliases:["lean4"],import:(()=>P(()=>import("./lean.js"),[]))},{id:"less",name:"Less",import:(()=>P(()=>import("./less.js"),[]))},{id:"liquid",name:"Liquid",import:(()=>P(()=>import("./liquid.js"),__vite__mapDeps([65,1,2,3,9])))},{id:"llvm",name:"LLVM IR",import:(()=>P(()=>import("./llvm.js"),[]))},{id:"log",name:"Log file",import:(()=>P(()=>import("./log.js"),[]))},{id:"logo",name:"Logo",import:(()=>P(()=>import("./logo.js"),[]))},{id:"lua",name:"Lua",import:(()=>P(()=>import("./lua.js"),__vite__mapDeps([37,26])))},{id:"luau",name:"Luau",import:(()=>P(()=>import("./luau.js"),[]))},{id:"make",name:"Makefile",aliases:["makefile"],import:(()=>P(()=>import("./make.js"),[]))},{id:"markdown",name:"Markdown",aliases:["md"],import:(()=>P(()=>import("./markdown.js"),[]))},{id:"marko",name:"Marko",import:(()=>P(()=>import("./marko.js"),__vite__mapDeps([66,3,67,5,11])))},{id:"matlab",name:"MATLAB",import:(()=>P(()=>import("./matlab.js"),[]))},{id:"mdc",name:"MDC",import:(()=>P(()=>import("./mdc.js"),__vite__mapDeps([68,40,38,15,1,2,3])))},{id:"mdx",name:"MDX",import:(()=>P(()=>import("./mdx.js"),[]))},{id:"mermaid",name:"Mermaid",aliases:["mmd"],import:(()=>P(()=>import("./mermaid.js"),[]))},{id:"mipsasm",name:"MIPS Assembly",aliases:["mips"],import:(()=>P(()=>import("./mipsasm.js"),[]))},{id:"mojo",name:"Mojo",import:(()=>P(()=>import("./mojo.js"),[]))},{id:"move",name:"Move",import:(()=>P(()=>import("./move.js"),[]))},{id:"narrat",name:"Narrat Language",aliases:["nar"],import:(()=>P(()=>import("./narrat.js"),[]))},{id:"nextflow",name:"Nextflow",aliases:["nf"],import:(()=>P(()=>import("./nextflow.js"),[]))},{id:"nginx",name:"Nginx",import:(()=>P(()=>import("./nginx.js"),__vite__mapDeps([69,37,26])))},{id:"nim",name:"Nim",import:(()=>P(()=>import("./nim.js"),__vite__mapDeps([70,26,1,2,3,7,8,25,40])))},{id:"nix",name:"Nix",import:(()=>P(()=>import("./nix.js"),[]))},{id:"nushell",name:"nushell",aliases:["nu"],import:(()=>P(()=>import("./nushell.js"),[]))},{id:"objective-c",name:"Objective-C",aliases:["objc"],import:(()=>P(()=>import("./objective-c.js"),[]))},{id:"objective-cpp",name:"Objective-C++",import:(()=>P(()=>import("./objective-cpp.js"),[]))},{id:"ocaml",name:"OCaml",import:(()=>P(()=>import("./ocaml.js"),[]))},{id:"openscad",name:"OpenSCAD",aliases:["scad"],import:(()=>P(()=>import("./openscad.js"),[]))},{id:"pascal",name:"Pascal",import:(()=>P(()=>import("./pascal.js"),[]))},{id:"perl",name:"Perl",import:(()=>P(()=>import("./perl.js"),__vite__mapDeps([71,1,2,3,7,8,16])))},{id:"php",name:"PHP",import:(()=>P(()=>import("./php.js"),__vite__mapDeps([72,1,2,3,7,8,16,9])))},{id:"pkl",name:"Pkl",import:(()=>P(()=>import("./pkl.js"),[]))},{id:"plsql",name:"PL/SQL",import:(()=>P(()=>import("./plsql.js"),[]))},{id:"po",name:"Gettext PO",aliases:["pot","potx"],import:(()=>P(()=>import("./po.js"),[]))},{id:"polar",name:"Polar",import:(()=>P(()=>import("./polar.js"),[]))},{id:"postcss",name:"PostCSS",import:(()=>P(()=>import("./postcss.js"),[]))},{id:"powerquery",name:"PowerQuery",import:(()=>P(()=>import("./powerquery.js"),[]))},{id:"powershell",name:"PowerShell",aliases:["ps","ps1"],import:(()=>P(()=>import("./powershell.js"),[]))},{id:"prisma",name:"Prisma",import:(()=>P(()=>import("./prisma.js"),[]))},{id:"prolog",name:"Prolog",import:(()=>P(()=>import("./prolog.js"),[]))},{id:"proto",name:"Protocol Buffer 3",aliases:["protobuf"],import:(()=>P(()=>import("./proto.js"),[]))},{id:"pug",name:"Pug",aliases:["jade"],import:(()=>P(()=>import("./pug.js"),__vite__mapDeps([73,2,3,1])))},{id:"puppet",name:"Puppet",import:(()=>P(()=>import("./puppet.js"),[]))},{id:"purescript",name:"PureScript",import:(()=>P(()=>import("./purescript.js"),[]))},{id:"python",name:"Python",aliases:["py"],import:(()=>P(()=>import("./python.js"),[]))},{id:"qml",name:"QML",import:(()=>P(()=>import("./qml.js"),__vite__mapDeps([74,2])))},{id:"qmldir",name:"QML Directory",import:(()=>P(()=>import("./qmldir.js"),[]))},{id:"qss",name:"Qt Style Sheets",import:(()=>P(()=>import("./qss.js"),[]))},{id:"r",name:"R",import:(()=>P(()=>import("./r.js"),[]))},{id:"racket",name:"Racket",import:(()=>P(()=>import("./racket.js"),[]))},{id:"raku",name:"Raku",aliases:["perl6"],import:(()=>P(()=>import("./raku.js"),[]))},{id:"razor",name:"ASP.NET Razor",import:(()=>P(()=>import("./razor.js"),__vite__mapDeps([75,1,2,3,76])))},{id:"reg",name:"Windows Registry Script",import:(()=>P(()=>import("./reg.js"),[]))},{id:"regexp",name:"RegExp",aliases:["regex"],import:(()=>P(()=>import("./regexp.js"),[]))},{id:"rel",name:"Rel",import:(()=>P(()=>import("./rel.js"),[]))},{id:"riscv",name:"RISC-V",import:(()=>P(()=>import("./riscv.js"),[]))},{id:"rosmsg",name:"ROS Interface",import:(()=>P(()=>import("./rosmsg.js"),[]))},{id:"rst",name:"reStructuredText",import:(()=>P(()=>import("./rst.js"),__vite__mapDeps([77,15,1,2,3,23,24,25,26,16,20,28,38,78,33,34,7,8,35,11,36,13,37])))},{id:"ruby",name:"Ruby",aliases:["rb"],import:(()=>P(()=>import("./ruby.js"),__vite__mapDeps([33,1,2,3,34,7,8,16,35,11,36,13,23,24,25,26,28,37,38])))},{id:"rust",name:"Rust",aliases:["rs"],import:(()=>P(()=>import("./rust.js"),[]))},{id:"sas",name:"SAS",import:(()=>P(()=>import("./sas.js"),__vite__mapDeps([79,16])))},{id:"sass",name:"Sass",import:(()=>P(()=>import("./sass.js"),[]))},{id:"scala",name:"Scala",import:(()=>P(()=>import("./scala.js"),[]))},{id:"scheme",name:"Scheme",import:(()=>P(()=>import("./scheme.js"),[]))},{id:"scss",name:"SCSS",import:(()=>P(()=>import("./scss.js"),__vite__mapDeps([5,3])))},{id:"sdbl",name:"1C (Query)",aliases:["1c-query"],import:(()=>P(()=>import("./sdbl.js"),[]))},{id:"shaderlab",name:"ShaderLab",aliases:["shader"],import:(()=>P(()=>import("./shaderlab.js"),__vite__mapDeps([80,81])))},{id:"shellscript",name:"Shell",aliases:["bash","sh","shell","zsh"],import:(()=>P(()=>import("./shellscript.js"),[]))},{id:"shellsession",name:"Shell Session",aliases:["console"],import:(()=>P(()=>import("./shellsession.js"),__vite__mapDeps([82,28])))},{id:"smalltalk",name:"Smalltalk",import:(()=>P(()=>import("./smalltalk.js"),[]))},{id:"solidity",name:"Solidity",import:(()=>P(()=>import("./solidity.js"),[]))},{id:"soy",name:"Closure Templates",aliases:["closure-templates"],import:(()=>P(()=>import("./soy.js"),__vite__mapDeps([83,1,2,3])))},{id:"sparql",name:"SPARQL",import:(()=>P(()=>import("./sparql.js"),__vite__mapDeps([84,85])))},{id:"splunk",name:"Splunk Query Language",aliases:["spl"],import:(()=>P(()=>import("./splunk.js"),[]))},{id:"sql",name:"SQL",import:(()=>P(()=>import("./sql.js"),[]))},{id:"ssh-config",name:"SSH Config",import:(()=>P(()=>import("./ssh-config.js"),[]))},{id:"stata",name:"Stata",import:(()=>P(()=>import("./stata.js"),__vite__mapDeps([86,16])))},{id:"stylus",name:"Stylus",aliases:["styl"],import:(()=>P(()=>import("./stylus.js"),[]))},{id:"svelte",name:"Svelte",import:(()=>P(()=>import("./svelte.js"),__vite__mapDeps([87,2,11,3,12])))},{id:"swift",name:"Swift",import:(()=>P(()=>import("./swift.js"),[]))},{id:"system-verilog",name:"SystemVerilog",import:(()=>P(()=>import("./system-verilog.js"),[]))},{id:"systemd",name:"Systemd Units",import:(()=>P(()=>import("./systemd.js"),[]))},{id:"talonscript",name:"TalonScript",aliases:["talon"],import:(()=>P(()=>import("./talonscript.js"),[]))},{id:"tasl",name:"Tasl",import:(()=>P(()=>import("./tasl.js"),[]))},{id:"tcl",name:"Tcl",import:(()=>P(()=>import("./tcl.js"),[]))},{id:"templ",name:"Templ",import:(()=>P(()=>import("./templ.js"),__vite__mapDeps([88,89,2,3])))},{id:"terraform",name:"Terraform",aliases:["tf","tfvars"],import:(()=>P(()=>import("./terraform.js"),[]))},{id:"tex",name:"TeX",import:(()=>P(()=>import("./tex.js"),__vite__mapDeps([64,62])))},{id:"toml",name:"TOML",import:(()=>P(()=>import("./toml.js"),[]))},{id:"ts-tags",name:"TypeScript with Tags",aliases:["lit"],import:(()=>P(()=>import("./ts-tags.js"),__vite__mapDeps([90,11,3,2,25,26,1,16,7,8])))},{id:"tsv",name:"TSV",import:(()=>P(()=>import("./tsv.js"),[]))},{id:"tsx",name:"TSX",import:(()=>P(()=>import("./tsx.js"),[]))},{id:"turtle",name:"Turtle",import:(()=>P(()=>import("./turtle.js"),[]))},{id:"twig",name:"Twig",import:(()=>P(()=>import("./twig.js"),__vite__mapDeps([91,3,2,5,72,1,7,8,16,9,20,33,34,35,11,36,13,23,24,25,26,28,37,38])))},{id:"typescript",name:"TypeScript",aliases:["ts","cts","mts"],import:(()=>P(()=>import("./typescript.js"),[]))},{id:"typespec",name:"TypeSpec",aliases:["tsp"],import:(()=>P(()=>import("./typespec.js"),[]))},{id:"typst",name:"Typst",aliases:["typ"],import:(()=>P(()=>import("./typst.js"),[]))},{id:"v",name:"V",import:(()=>P(()=>import("./v.js"),[]))},{id:"vala",name:"Vala",import:(()=>P(()=>import("./vala.js"),[]))},{id:"vb",name:"Visual Basic",aliases:["cmd"],import:(()=>P(()=>import("./vb.js"),[]))},{id:"verilog",name:"Verilog",import:(()=>P(()=>import("./verilog.js"),[]))},{id:"vhdl",name:"VHDL",import:(()=>P(()=>import("./vhdl.js"),[]))},{id:"viml",name:"Vim Script",aliases:["vim","vimscript"],import:(()=>P(()=>import("./viml.js"),[]))},{id:"vue",name:"Vue",import:(()=>P(()=>import("./vue.js"),__vite__mapDeps([92,3,2,11,9,15,1])))},{id:"vue-html",name:"Vue HTML",import:(()=>P(()=>import("./vue-html.js"),__vite__mapDeps([93,92,3,2,11,9,15,1])))},{id:"vue-vine",name:"Vue Vine",import:(()=>P(()=>import("./vue-vine.js"),__vite__mapDeps([94,3,5,67,95,12,92,2,11,9,15,1])))},{id:"vyper",name:"Vyper",aliases:["vy"],import:(()=>P(()=>import("./vyper.js"),[]))},{id:"wasm",name:"WebAssembly",import:(()=>P(()=>import("./wasm.js"),[]))},{id:"wenyan",name:"Wenyan",aliases:[""],import:(()=>P(()=>import("./wenyan.js"),[]))},{id:"wgsl",name:"WGSL",import:(()=>P(()=>import("./wgsl.js"),[]))},{id:"wikitext",name:"Wikitext",aliases:["mediawiki","wiki"],import:(()=>P(()=>import("./wikitext.js"),[]))},{id:"wit",name:"WebAssembly Interface Types",import:(()=>P(()=>import("./wit.js"),[]))},{id:"wolfram",name:"Wolfram",aliases:["wl"],import:(()=>P(()=>import("./wolfram.js"),[]))},{id:"xml",name:"XML",import:(()=>P(()=>import("./xml.js"),__vite__mapDeps([7,8])))},{id:"xsl",name:"XSL",import:(()=>P(()=>import("./xsl.js"),__vite__mapDeps([96,7,8])))},{id:"yaml",name:"YAML",aliases:["yml"],import:(()=>P(()=>import("./yaml.js"),[]))},{id:"zenscript",name:"ZenScript",import:(()=>P(()=>import("./zenscript.js"),[]))},{id:"zig",name:"Zig",import:(()=>P(()=>import("./zig.js"),[]))}],mE=Object.fromEntries(Gb.map(n=>[n.id,n.import])),gE=Object.fromEntries(Gb.flatMap(n=>n.aliases?.map(e=>[e,n.import])||[])),vE={...mE,...gE},yE=[{id:"andromeeda",displayName:"Andromeeda",type:"dark",import:(()=>P(()=>import("./andromeeda.js"),[]))},{id:"aurora-x",displayName:"Aurora X",type:"dark",import:(()=>P(()=>import("./aurora-x.js"),[]))},{id:"ayu-dark",displayName:"Ayu Dark",type:"dark",import:(()=>P(()=>import("./ayu-dark.js"),[]))},{id:"catppuccin-frappe",displayName:"Catppuccin Frapp",type:"dark",import:(()=>P(()=>import("./catppuccin-frappe.js"),[]))},{id:"catppuccin-latte",displayName:"Catppuccin Latte",type:"light",import:(()=>P(()=>import("./catppuccin-latte.js"),[]))},{id:"catppuccin-macchiato",displayName:"Catppuccin Macchiato",type:"dark",import:(()=>P(()=>import("./catppuccin-macchiato.js"),[]))},{id:"catppuccin-mocha",displayName:"Catppuccin Mocha",type:"dark",import:(()=>P(()=>import("./catppuccin-mocha.js"),[]))},{id:"dark-plus",displayName:"Dark Plus",type:"dark",import:(()=>P(()=>import("./dark-plus.js"),[]))},{id:"dracula",displayName:"Dracula Theme",type:"dark",import:(()=>P(()=>import("./dracula.js"),[]))},{id:"dracula-soft",displayName:"Dracula Theme Soft",type:"dark",import:(()=>P(()=>import("./dracula-soft.js"),[]))},{id:"everforest-dark",displayName:"Everforest Dark",type:"dark",import:(()=>P(()=>import("./everforest-dark.js"),[]))},{id:"everforest-light",displayName:"Everforest Light",type:"light",import:(()=>P(()=>import("./everforest-light.js"),[]))},{id:"github-dark",displayName:"GitHub Dark",type:"dark",import:(()=>P(()=>import("./github-dark.js"),[]))},{id:"github-dark-default",displayName:"GitHub Dark Default",type:"dark",import:(()=>P(()=>import("./github-dark-default.js"),[]))},{id:"github-dark-dimmed",displayName:"GitHub Dark Dimmed",type:"dark",import:(()=>P(()=>import("./github-dark-dimmed.js"),[]))},{id:"github-dark-high-contrast",displayName:"GitHub Dark High Contrast",type:"dark",import:(()=>P(()=>import("./github-dark-high-contrast.js"),[]))},{id:"github-light",displayName:"GitHub Light",type:"light",import:(()=>P(()=>import("./github-light.js"),[]))},{id:"github-light-default",displayName:"GitHub Light Default",type:"light",import:(()=>P(()=>import("./github-light-default.js"),[]))},{id:"github-light-high-contrast",displayName:"GitHub Light High Contrast",type:"light",import:(()=>P(()=>import("./github-light-high-contrast.js"),[]))},{id:"gruvbox-dark-hard",displayName:"Gruvbox Dark Hard",type:"dark",import:(()=>P(()=>import("./gruvbox-dark-hard.js"),[]))},{id:"gruvbox-dark-medium",displayName:"Gruvbox Dark Medium",type:"dark",import:(()=>P(()=>import("./gruvbox-dark-medium.js"),[]))},{id:"gruvbox-dark-soft",displayName:"Gruvbox Dark Soft",type:"dark",import:(()=>P(()=>import("./gruvbox-dark-soft.js"),[]))},{id:"gruvbox-light-hard",displayName:"Gruvbox Light Hard",type:"light",import:(()=>P(()=>import("./gruvbox-light-hard.js"),[]))},{id:"gruvbox-light-medium",displayName:"Gruvbox Light Medium",type:"light",import:(()=>P(()=>import("./gruvbox-light-medium.js"),[]))},{id:"gruvbox-light-soft",displayName:"Gruvbox Light Soft",type:"light",import:(()=>P(()=>import("./gruvbox-light-soft.js"),[]))},{id:"houston",displayName:"Houston",type:"dark",import:(()=>P(()=>import("./houston.js"),[]))},{id:"kanagawa-dragon",displayName:"Kanagawa Dragon",type:"dark",import:(()=>P(()=>import("./kanagawa-dragon.js"),[]))},{id:"kanagawa-lotus",displayName:"Kanagawa Lotus",type:"light",import:(()=>P(()=>import("./kanagawa-lotus.js"),[]))},{id:"kanagawa-wave",displayName:"Kanagawa Wave",type:"dark",import:(()=>P(()=>import("./kanagawa-wave.js"),[]))},{id:"laserwave",displayName:"LaserWave",type:"dark",import:(()=>P(()=>import("./laserwave.js"),[]))},{id:"light-plus",displayName:"Light Plus",type:"light",import:(()=>P(()=>import("./light-plus.js"),[]))},{id:"material-theme",displayName:"Material Theme",type:"dark",import:(()=>P(()=>import("./material-theme.js"),[]))},{id:"material-theme-darker",displayName:"Material Theme Darker",type:"dark",import:(()=>P(()=>import("./material-theme-darker.js"),[]))},{id:"material-theme-lighter",displayName:"Material Theme Lighter",type:"light",import:(()=>P(()=>import("./material-theme-lighter.js"),[]))},{id:"material-theme-ocean",displayName:"Material Theme Ocean",type:"dark",import:(()=>P(()=>import("./material-theme-ocean.js"),[]))},{id:"material-theme-palenight",displayName:"Material Theme Palenight",type:"dark",import:(()=>P(()=>import("./material-theme-palenight.js"),[]))},{id:"min-dark",displayName:"Min Dark",type:"dark",import:(()=>P(()=>import("./min-dark.js"),[]))},{id:"min-light",displayName:"Min Light",type:"light",import:(()=>P(()=>import("./min-light.js"),[]))},{id:"monokai",displayName:"Monokai",type:"dark",import:(()=>P(()=>import("./monokai.js"),[]))},{id:"night-owl",displayName:"Night Owl",type:"dark",import:(()=>P(()=>import("./night-owl.js"),[]))},{id:"nord",displayName:"Nord",type:"dark",import:(()=>P(()=>import("./nord.js"),[]))},{id:"one-dark-pro",displayName:"One Dark Pro",type:"dark",import:(()=>P(()=>import("./one-dark-pro.js"),[]))},{id:"one-light",displayName:"One Light",type:"light",import:(()=>P(()=>import("./one-light.js"),[]))},{id:"plastic",displayName:"Plastic",type:"dark",import:(()=>P(()=>import("./plastic.js"),[]))},{id:"poimandres",displayName:"Poimandres",type:"dark",import:(()=>P(()=>import("./poimandres.js"),[]))},{id:"red",displayName:"Red",type:"dark",import:(()=>P(()=>import("./red.js"),[]))},{id:"rose-pine",displayName:"Ros Pine",type:"dark",import:(()=>P(()=>import("./rose-pine.js"),[]))},{id:"rose-pine-dawn",displayName:"Ros Pine Dawn",type:"light",import:(()=>P(()=>import("./rose-pine-dawn.js"),[]))},{id:"rose-pine-moon",displayName:"Ros Pine Moon",type:"dark",import:(()=>P(()=>import("./rose-pine-moon.js"),[]))},{id:"slack-dark",displayName:"Slack Dark",type:"dark",import:(()=>P(()=>import("./slack-dark.js"),[]))},{id:"slack-ochin",displayName:"Slack Ochin",type:"light",import:(()=>P(()=>import("./slack-ochin.js"),[]))},{id:"snazzy-light",displayName:"Snazzy Light",type:"light",import:(()=>P(()=>import("./snazzy-light.js"),[]))},{id:"solarized-dark",displayName:"Solarized Dark",type:"dark",import:(()=>P(()=>import("./solarized-dark.js"),[]))},{id:"solarized-light",displayName:"Solarized Light",type:"light",import:(()=>P(()=>import("./solarized-light.js"),[]))},{id:"synthwave-84",displayName:"Synthwave '84",type:"dark",import:(()=>P(()=>import("./synthwave-84.js"),[]))},{id:"tokyo-night",displayName:"Tokyo Night",type:"dark",import:(()=>P(()=>import("./tokyo-night.js"),[]))},{id:"vesper",displayName:"Vesper",type:"dark",import:(()=>P(()=>import("./vesper.js"),[]))},{id:"vitesse-black",displayName:"Vitesse Black",type:"dark",import:(()=>P(()=>import("./vitesse-black.js"),[]))},{id:"vitesse-dark",displayName:"Vitesse Dark",type:"dark",import:(()=>P(()=>import("./vitesse-dark.js"),[]))},{id:"vitesse-light",displayName:"Vitesse Light",type:"light",import:(()=>P(()=>import("./vitesse-light.js"),[]))}],bE=Object.fromEntries(yE.map(n=>[n.id,n.import]));class Gh extends Error{constructor(e){super(e),this.name="ShikiError"}}function kE(){return 2147483648}function xE(){return typeof performance<"u"?performance.now():Date.now()}const _E=(n,e)=>n+(e-n%e)%e;async function wE(n){let e,t;const s={};function i(p){t=p,s.HEAPU8=new Uint8Array(p),s.HEAPU32=new Uint32Array(p)}function r(p,g,k){s.HEAPU8.copyWithin(p,g,g+k)}function o(p){try{return e.grow(p-t.byteLength+65535>>>16),i(e.buffer),1}catch{}}function l(p){const g=s.HEAPU8.length;p=p>>>0;const k=kE();if(p>k)return!1;for(let x=1;x<=4;x*=2){let m=g*(1+.2/x);m=Math.min(m,p+100663296);const _=Math.min(k,_E(Math.max(p,m),65536));if(o(_))return!0}return!1}const a=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function u(p,g,k=1024){const x=g+k;let m=g;for(;p[m]&&!(m>=x);)++m;if(m-g>16&&p.buffer&&a)return a.decode(p.subarray(g,m));let _="";for(;g<m;){let R=p[g++];if(!(R&128)){_+=String.fromCharCode(R);continue}const U=p[g++]&63;if((R&224)===192){_+=String.fromCharCode((R&31)<<6|U);continue}const N=p[g++]&63;if((R&240)===224?R=(R&15)<<12|U<<6|N:R=(R&7)<<18|U<<12|N<<6|p[g++]&63,R<65536)_+=String.fromCharCode(R);else{const A=R-65536;_+=String.fromCharCode(55296|A>>10,56320|A&1023)}}return _}function c(p,g){return p?u(s.HEAPU8,p,g):""}const d={emscripten_get_now:xE,emscripten_memcpy_big:r,emscripten_resize_heap:l,fd_write:()=>0};async function f(){const g=await n({env:d,wasi_snapshot_preview1:d});e=g.memory,i(e.buffer),Object.assign(s,g),s.UTF8ToString=c}return await f(),s}var SE=Object.defineProperty,CE=(n,e,t)=>e in n?SE(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Yt=(n,e,t)=>CE(n,typeof e!="symbol"?e+"":e,t);let nn=null;function AE(n){throw new Gh(n.UTF8ToString(n.getLastOnigError()))}class bc{constructor(e){Yt(this,"utf16Length"),Yt(this,"utf8Length"),Yt(this,"utf16Value"),Yt(this,"utf8Value"),Yt(this,"utf16OffsetToUtf8"),Yt(this,"utf8OffsetToUtf16");const t=e.length,s=bc._utf8ByteLength(e),i=s!==t,r=i?new Uint32Array(t+1):null;i&&(r[t]=s);const o=i?new Uint32Array(s+1):null;i&&(o[s]=t);const l=new Uint8Array(s);let a=0;for(let u=0;u<t;u++){const c=e.charCodeAt(u);let d=c,f=!1;if(c>=55296&&c<=56319&&u+1<t){const p=e.charCodeAt(u+1);p>=56320&&p<=57343&&(d=(c-55296<<10)+65536|p-56320,f=!0)}i&&(r[u]=a,f&&(r[u+1]=a),d<=127?o[a+0]=u:d<=2047?(o[a+0]=u,o[a+1]=u):d<=65535?(o[a+0]=u,o[a+1]=u,o[a+2]=u):(o[a+0]=u,o[a+1]=u,o[a+2]=u,o[a+3]=u)),d<=127?l[a++]=d:d<=2047?(l[a++]=192|(d&1984)>>>6,l[a++]=128|(d&63)>>>0):d<=65535?(l[a++]=224|(d&61440)>>>12,l[a++]=128|(d&4032)>>>6,l[a++]=128|(d&63)>>>0):(l[a++]=240|(d&1835008)>>>18,l[a++]=128|(d&258048)>>>12,l[a++]=128|(d&4032)>>>6,l[a++]=128|(d&63)>>>0),f&&u++}this.utf16Length=t,this.utf8Length=s,this.utf16Value=e,this.utf8Value=l,this.utf16OffsetToUtf8=r,this.utf8OffsetToUtf16=o}static _utf8ByteLength(e){let t=0;for(let s=0,i=e.length;s<i;s++){const r=e.charCodeAt(s);let o=r,l=!1;if(r>=55296&&r<=56319&&s+1<i){const a=e.charCodeAt(s+1);a>=56320&&a<=57343&&(o=(r-55296<<10)+65536|a-56320,l=!0)}o<=127?t+=1:o<=2047?t+=2:o<=65535?t+=3:t+=4,l&&s++}return t}createString(e){const t=e.omalloc(this.utf8Length);return e.HEAPU8.set(this.utf8Value,t),t}}const kc=class Ls{constructor(e){if(Yt(this,"id",++Ls.LAST_ID),Yt(this,"_onigBinding"),Yt(this,"content"),Yt(this,"utf16Length"),Yt(this,"utf8Length"),Yt(this,"utf16OffsetToUtf8"),Yt(this,"utf8OffsetToUtf16"),Yt(this,"ptr"),!nn)throw new Gh("Must invoke loadWasm first.");this._onigBinding=nn,this.content=e;const t=new bc(e);this.utf16Length=t.utf16Length,this.utf8Length=t.utf8Length,this.utf16OffsetToUtf8=t.utf16OffsetToUtf8,this.utf8OffsetToUtf16=t.utf8OffsetToUtf16,this.utf8Length<1e4&&!Ls._sharedPtrInUse?(Ls._sharedPtr||(Ls._sharedPtr=nn.omalloc(1e4)),Ls._sharedPtrInUse=!0,nn.HEAPU8.set(t.utf8Value,Ls._sharedPtr),this.ptr=Ls._sharedPtr):this.ptr=t.createString(nn)}convertUtf8OffsetToUtf16(e){return this.utf8OffsetToUtf16?e<0?0:e>this.utf8Length?this.utf16Length:this.utf8OffsetToUtf16[e]:e}convertUtf16OffsetToUtf8(e){return this.utf16OffsetToUtf8?e<0?0:e>this.utf16Length?this.utf8Length:this.utf16OffsetToUtf8[e]:e}dispose(){this.ptr===Ls._sharedPtr?Ls._sharedPtrInUse=!1:this._onigBinding.ofree(this.ptr)}};Yt(kc,"LAST_ID",0);Yt(kc,"_sharedPtr",0);Yt(kc,"_sharedPtrInUse",!1);let Kb=kc;class EE{constructor(e){if(Yt(this,"_onigBinding"),Yt(this,"_ptr"),!nn)throw new Gh("Must invoke loadWasm first.");const t=[],s=[];for(let l=0,a=e.length;l<a;l++){const u=new bc(e[l]);t[l]=u.createString(nn),s[l]=u.utf8Length}const i=nn.omalloc(4*e.length);nn.HEAPU32.set(t,i/4);const r=nn.omalloc(4*e.length);nn.HEAPU32.set(s,r/4);const o=nn.createOnigScanner(i,r,e.length);for(let l=0,a=e.length;l<a;l++)nn.ofree(t[l]);nn.ofree(r),nn.ofree(i),o===0&&AE(nn),this._onigBinding=nn,this._ptr=o}dispose(){this._onigBinding.freeOnigScanner(this._ptr)}findNextMatchSync(e,t,s){let i=0;if(typeof s=="number"&&(i=s),typeof e=="string"){e=new Kb(e);const r=this._findNextMatchSync(e,t,!1,i);return e.dispose(),r}return this._findNextMatchSync(e,t,!1,i)}_findNextMatchSync(e,t,s,i){const r=this._onigBinding,o=r.findNextOnigScannerMatch(this._ptr,e.id,e.ptr,e.utf8Length,e.convertUtf16OffsetToUtf8(t),i);if(o===0)return null;const l=r.HEAPU32;let a=o/4;const u=l[a++],c=l[a++],d=[];for(let f=0;f<c;f++){const p=e.convertUtf8OffsetToUtf16(l[a++]),g=e.convertUtf8OffsetToUtf16(l[a++]);d[f]={start:p,end:g,length:g-p}}return{index:u,captureIndices:d}}}function TE(n){return typeof n.instantiator=="function"}function DE(n){return typeof n.default=="function"}function PE(n){return typeof n.data<"u"}function RE(n){return typeof Response<"u"&&n instanceof Response}function OE(n){return typeof ArrayBuffer<"u"&&(n instanceof ArrayBuffer||ArrayBuffer.isView(n))||typeof Buffer<"u"&&Buffer.isBuffer?.(n)||typeof SharedArrayBuffer<"u"&&n instanceof SharedArrayBuffer||typeof Uint32Array<"u"&&n instanceof Uint32Array}let Sa;function LE(n){if(Sa)return Sa;async function e(){nn=await wE(async t=>{let s=n;return s=await s,typeof s=="function"&&(s=await s(t)),typeof s=="function"&&(s=await s(t)),TE(s)?s=await s.instantiator(t):DE(s)?s=await s.default(t):(PE(s)&&(s=s.data),RE(s)?typeof WebAssembly.instantiateStreaming=="function"?s=await ME(s)(t):s=await IE(s)(t):OE(s)?s=await ad(s)(t):s instanceof WebAssembly.Module?s=await ad(s)(t):"default"in s&&s.default instanceof WebAssembly.Module&&(s=await ad(s.default)(t))),"instance"in s&&(s=s.instance),"exports"in s&&(s=s.exports),s})}return Sa=e(),Sa}function ad(n){return e=>WebAssembly.instantiate(n,e)}function ME(n){return e=>WebAssembly.instantiateStreaming(n,e)}function IE(n){return async e=>{const t=await n.arrayBuffer();return WebAssembly.instantiate(t,e)}}async function jE(n){return n&&await LE(n),{createScanner(e){return new EE(e.map(t=>typeof t=="string"?t:t.source))},createString(e){return new Kb(e)}}}const VE=pE({langs:vE,themes:bE,engine:()=>jE(P(()=>import("./wasm2.js"),[]))}),er=Q(null),ud=Q(!0),Fg=Q(!1);let cd=null;function $E(){return{highlighter:er,isLoading:ud,isReady:Fg,initHighlighter:async()=>{if(er.value)return er.value;cd||(cd=VE({themes:["github-light","github-dark"],langs:["r"]}));try{er.value=await cd,ud.value=!1,Fg.value=!0,console.log("Shiki highlighter initialized successfully")}catch(t){console.error("Failed to initialize syntax highlighter:",t),ud.value=!1}return er.value},highlight:(t,s="r")=>{if(!t)return"<pre><code></code></pre>";if(!er.value)return`<pre><code>${Ug(t)}</code></pre>`;try{return er.value.codeToHtml(t,{lang:s,theme:"github-light"})}catch(i){return console.error("Highlight error:",i),`<pre><code>${Ug(t)}</code></pre>`}}}}function Ug(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}const NE={class:"flex min-h-screen"},BE={class:"w-64 shrink-0 border-r border-gray-200 p-6 dark:border-gray-800 overflow-y-auto"},FE={class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},UE={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mb-4"},zE={class:"relative mb-4"},HE={key:1,class:"flex items-center justify-center py-8"},WE={key:2,class:"space-y-4"},qE={key:0},GE={class:"space-y-0.5"},KE=["onClick"],JE={class:"font-mono text-xs"},QE={key:1},YE={key:0,class:"px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider dark:text-gray-400 pt-4 pb-2"},XE={class:"space-y-0.5"},ZE=["onClick"],eT={class:"font-mono text-xs"},tT={key:2,class:"text-center py-4"},nT={class:"flex-1 pt-10 pb-8 px-10 overflow-y-auto border-l border-gray-100 bg-gray-50/30 dark:border-gray-800 dark:bg-gray-900/20"},sT={key:0,class:"flex items-center justify-center py-12"},iT={key:1,class:"flex h-full items-center justify-center"},rT={key:2,class:"max-w-3xl text-[15px] leading-relaxed"},oT={class:"mb-8"},lT={class:"flex items-center justify-between text-sm tracking-wide text-gray-400 dark:text-gray-500 mb-2"},aT={key:0,class:"font-mono"},uT={class:"text-2xl font-semibold text-gray-900 dark:text-white font-mono leading-tight mb-3"},cT={key:0,class:"text-base text-gray-600 dark:text-gray-400 leading-relaxed"},dT={key:0,class:"mb-5"},fT={class:"relative group"},hT=["innerHTML"],pT={key:2,class:"mb-5"},mT={class:"overflow-hidden rounded border border-gray-200 dark:border-gray-700"},gT={class:"w-full"},vT={class:"divide-y divide-gray-100 dark:divide-gray-800"},yT={class:"px-3 py-2 align-top"},bT={class:"text-sm font-mono font-medium text-gray-900 dark:text-white"},kT={class:"px-3 py-2 text-[15px] text-gray-600 dark:text-gray-400"},xT={key:1},_T={key:3,class:"mb-5"},wT={key:4,class:"mb-5"},ST={class:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1.5"},CT={key:0,class:"mt-2 pl-3 border-l-2 border-gray-200 dark:border-gray-700"},AT={class:"text-xs font-medium text-gray-600 dark:text-gray-400 mb-1"},ET={class:"space-y-2"},TT=["innerHTML"],DT={key:7,class:"mb-5"},PT={class:"flex flex-wrap gap-1.5"},RT=["onClick"],OT={key:8,class:"mb-5"},LT={class:"flex flex-wrap gap-1.5"},MT={key:9,class:"mb-5"},IT={class:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded px-3 py-2"},jT={key:3,class:"text-center py-12"},VT={class:"text-gray-600 dark:text-gray-400"},$T={class:"font-mono"},NT={__name:"DocsCategoryView",props:{categoryId:{type:String,required:!0}},setup(n){const e=n,t=wo(),s=Kl(),{initHighlighter:i,highlight:r,isReady:o}=$E(),l=Q(!0),a=Q(!1),u=Q(null),c=Q([]),d=Q(""),f=Q(null),p=Q(null),g=z(()=>{let N=c.value;if(d.value.trim()){const A=d.value.toLowerCase();N=N.filter(w=>w.name.toLowerCase().includes(A)||w.title&&w.title.toLowerCase().includes(A))}return N}),k=z(()=>g.value.filter(N=>N.is_common===1)),x=z(()=>g.value.filter(N=>N.is_common!==1)),m=async()=>{l.value=!0;try{const A=await(await fetch("/api/docs/categories")).json();A.error||(u.value=A.categories?.find(G=>G.id===parseInt(e.categoryId)));const M=await(await fetch(`/api/docs/functions?category_id=${e.categoryId}`)).json();M.error||(c.value=M.functions||[],!f.value&&c.value.length>0&&(t.query.fn?_(t.query.fn):_(c.value[0].name)))}catch(N){console.error("Failed to load category:",N)}finally{l.value=!1}},_=async N=>{f.value=N,a.value=!0,p.value=null,s.replace({path:t.path,query:{fn:N}});try{const w=await(await fetch(`/api/docs/function/${encodeURIComponent(N)}`)).json();w.error||(p.value=w.function_doc)}catch(A){console.error("Failed to load function:",A)}finally{a.value=!1}};je(()=>e.categoryId,()=>{f.value=null,p.value=null,d.value="",m()}),je(()=>t.query.fn,N=>{N&&N!==f.value&&_(N)});const R=N=>{if(!N)return"";const A=N.split(`
`),w=[];for(let M=0;M<A.length;M++){const G=A[M],ue=G.trim(),ie=M>0?A[M-1].trim():"";ue.startsWith("#")&&ie&&!ie.startsWith("#")&&w.push(""),w.push(G)}return w.join(`
`)},U=N=>{const A=r(N,"r");return console.log("highlightCode input:",N?.substring(0,50),"output length:",A?.length),A};return Cn(async()=>{await i(),m()}),(N,A)=>(v(),b("div",NE,[h("nav",BE,[h("h2",FE,Y(u.value?.name||"Documentation"),1),u.value?.description?(v(),b("p",UE,Y(u.value.description),1)):H("",!0),h("div",zE,[He(h("input",{"onUpdate:modelValue":A[0]||(A[0]=w=>d.value=w),type:"text",placeholder:"Filter...",class:"w-full rounded-md border border-gray-300 bg-white px-3 py-1.5 pl-8 text-sm placeholder-gray-400 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500 dark:border-gray-700 dark:bg-gray-800 dark:text-white dark:placeholder-gray-500"},null,512),[[br,d.value]]),A[1]||(A[1]=h("svg",{class:"absolute left-2.5 top-2 h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))]),l.value?(v(),b("div",HE,[...A[2]||(A[2]=[h("svg",{class:"h-6 w-6 animate-spin text-sky-600",fill:"none",viewBox:"0 0 24 24"},[h("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),h("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):(v(),b("div",WE,[k.value.length>0?(v(),b("div",qE,[A[3]||(A[3]=h("h3",{class:"px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider dark:text-gray-400 pb-2"},"Common",-1)),h("div",GE,[(v(!0),b(be,null,Ve(k.value,w=>(v(),b("a",{key:w.id,href:"#",onClick:Tt(M=>_(w.name),["prevent"]),class:"group relative"},[h("span",{class:Se(["block rounded-md px-3 py-2 text-sm transition truncate",f.value===w.name?"bg-sky-50 text-sky-700 font-medium dark:bg-sky-900/20 dark:text-sky-400":"text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-800"])},[h("span",JE,Y(w.name)+"()",1)],2)],8,KE))),128))])])):H("",!0),x.value.length>0?(v(),b("div",QE,[k.value.length>0?(v(),b("h3",YE,"Other")):H("",!0),h("div",XE,[(v(!0),b(be,null,Ve(x.value,w=>(v(),b("a",{key:w.id,href:"#",onClick:Tt(M=>_(w.name),["prevent"]),class:"group relative"},[h("span",{class:Se(["block rounded-md px-3 py-2 text-sm transition truncate",f.value===w.name?"bg-sky-50 text-sky-700 font-medium dark:bg-sky-900/20 dark:text-sky-400":"text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-800"])},[h("span",eT,Y(w.name)+"()",1)],2)],8,ZE))),128))])])):H("",!0),g.value.length===0&&d.value?(v(),b("div",tT,[...A[4]||(A[4]=[h("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"No matches",-1)])])):H("",!0)]))]),h("div",nT,[a.value?(v(),b("div",sT,[...A[5]||(A[5]=[h("svg",{class:"h-8 w-8 animate-spin text-sky-600",fill:"none",viewBox:"0 0 24 24"},[h("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),h("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):!f.value&&!a.value?(v(),b("div",iT,[...A[6]||(A[6]=[_o('<div class="text-center max-w-md" data-v-e2689d0c><svg class="mx-auto h-12 w-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-e2689d0c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" data-v-e2689d0c></path></svg><h3 class="mt-4 text-lg font-medium text-gray-900 dark:text-white" data-v-e2689d0c>Select a function</h3><p class="mt-2 text-sm text-gray-600 dark:text-gray-400" data-v-e2689d0c> Choose a function from the list to view its documentation. </p></div>',1)])])):p.value?(v(),b("div",rT,[h("header",oT,[h("div",lT,[h("span",null,"Function  "+Y(u.value?.name||"Documentation"),1),p.value.source_file?(v(),b("span",aT,Y(p.value.source_file),1)):H("",!0)]),h("h1",uT,Y(p.value.name)+"()",1),p.value.title?(v(),b("p",cT,Y(p.value.title),1)):H("",!0)]),p.value.description?(v(),b("section",dT,[A[7]||(A[7]=h("h2",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1.5"},"Description",-1)),S(Zi,{content:p.value.description,class:"text-[15px] text-gray-700 dark:text-gray-300 leading-relaxed"},null,8,["content"])])):H("",!0),p.value.usage?(v(),b("section",{class:"mb-5",key:"usage-"+Ke(o)},[A[8]||(A[8]=h("h2",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1.5"},"Usage",-1)),h("div",fT,[h("div",{class:"code-block rounded overflow-x-auto border border-gray-200 dark:border-gray-700",innerHTML:U(p.value.usage)},null,8,hT),S(zs,{value:p.value.usage,variant:"ghost",class:"absolute top-1.5 right-1.5 opacity-0 group-hover:opacity-100 transition-opacity text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},null,8,["value"])])])):H("",!0),p.value.parameters&&p.value.parameters.length>0?(v(),b("section",pT,[A[10]||(A[10]=h("h2",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1.5"},"Arguments",-1)),h("div",mT,[h("table",gT,[A[9]||(A[9]=h("thead",{class:"bg-gray-50 dark:bg-gray-800/50 text-xs text-gray-500 dark:text-gray-400"},[h("tr",null,[h("th",{class:"text-left px-3 py-1.5 font-medium w-28"},"Argument"),h("th",{class:"text-left px-3 py-1.5 font-medium"},"Description")])],-1)),h("tbody",vT,[(v(!0),b(be,null,Ve(p.value.parameters,w=>(v(),b("tr",{key:w.name,class:"bg-white dark:bg-gray-900"},[h("td",yT,[h("code",bT,Y(w.name),1)]),h("td",kT,[w.description?(v(),we(Zi,{key:0,content:w.description},null,8,["content"])):(v(),b("span",xT,""))])]))),128))])])])])):H("",!0),p.value.details?(v(),b("section",_T,[A[11]||(A[11]=h("h2",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1.5"},"Details",-1)),S(Zi,{content:p.value.details,class:"text-[15px] text-gray-700 dark:text-gray-300 leading-relaxed"},null,8,["content"])])):H("",!0),p.value.value?(v(),b("section",wT,[A[12]||(A[12]=h("h2",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1.5"},"Returns",-1)),S(Zi,{content:p.value.value,class:"text-[15px] text-gray-700 dark:text-gray-300 leading-relaxed"},null,8,["content"])])):H("",!0),p.value.sections&&p.value.sections.length>0?(v(!0),b(be,{key:5},Ve(p.value.sections,w=>(v(),b("section",{key:w.id,class:"mb-5"},[h("h2",ST,Y(w.title),1),S(Zi,{content:w.content,class:"text-[15px] text-gray-700 dark:text-gray-300 leading-relaxed"},null,8,["content"]),w.subsections&&w.subsections.length>0?(v(),b("div",CT,[(v(!0),b(be,null,Ve(w.subsections,M=>(v(),b("div",{key:M.title,class:"mb-2 last:mb-0"},[h("h3",AT,Y(M.title),1),S(Zi,{content:M.content,class:"text-sm text-gray-600 dark:text-gray-400 leading-relaxed"},null,8,["content"])]))),128))])):H("",!0)]))),128)):H("",!0),p.value.examples&&p.value.examples.length>0?(v(),b("section",{class:"mb-5",key:"examples-"+Ke(o)},[A[13]||(A[13]=h("h2",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1.5"},"Examples",-1)),h("div",ET,[(v(!0),b(be,null,Ve(p.value.examples,(w,M)=>(v(),b("div",{key:M,class:"relative group"},[h("div",{class:"code-block rounded overflow-x-auto border border-gray-200 dark:border-gray-700",innerHTML:U(R(w.content))},null,8,TT),S(zs,{value:w.content,variant:"ghost",class:"absolute top-1.5 right-1.5 opacity-0 group-hover:opacity-100 transition-opacity text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},null,8,["value"])]))),128))])])):H("",!0),p.value.seealso&&p.value.seealso.length>0?(v(),b("section",DT,[A[14]||(A[14]=h("h2",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1.5"},"See also",-1)),h("div",PT,[(v(!0),b(be,null,Ve(p.value.seealso,w=>(v(),b("a",{key:w.target,href:"#",onClick:Tt(M=>_(w.target),["prevent"]),class:"inline-flex items-center px-2 py-0.5 rounded bg-gray-100 dark:bg-gray-800 text-sky-600 dark:text-sky-400 font-mono text-sm hover:bg-gray-200 dark:hover:bg-gray-700 transition"},Y(w.link_text||w.target),9,RT))),128))])])):H("",!0),p.value.aliases&&p.value.aliases.length>0?(v(),b("section",OT,[A[15]||(A[15]=h("h2",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1.5"},"Aliases",-1)),h("div",LT,[(v(!0),b(be,null,Ve(p.value.aliases,w=>(v(),b("span",{key:w,class:"inline-flex items-center px-2 py-0.5 rounded bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 font-mono text-sm"},Y(w)+"()",1))),128))])])):H("",!0),p.value.note?(v(),b("section",MT,[h("div",IT,[A[16]||(A[16]=h("h3",{class:"text-xs font-medium text-amber-600 dark:text-amber-400 mb-1"},"Note",-1)),S(Zi,{content:p.value.note,class:"text-[15px] text-amber-700 dark:text-amber-300 leading-relaxed"},null,8,["content"])])])):H("",!0)])):f.value&&!p.value&&!a.value?(v(),b("div",jT,[h("p",VT,[A[17]||(A[17]=ce(" Documentation for ",-1)),h("code",$T,Y(f.value),1),A[18]||(A[18]=ce(" not found. ",-1))])])):H("",!0)])]))}},BT=gc(NT,[["__scopeId","data-v-e2689d0c"]]),FT={key:0,class:"px-4 py-5 sm:px-6"},UT={class:"px-4 py-5 sm:p-6"},zT={key:1,class:"px-4 py-4 sm:px-6"},HT={__name:"Card",setup(n){const e=Hw(),t=z(()=>{const s=["overflow-hidden","rounded-lg","bg-white","shadow-sm","dark:bg-gray-800/50","dark:shadow-none","dark:outline","dark:-outline-offset-1","dark:outline-white/10"];return(e.header||e.footer)&&s.push("divide-y","divide-gray-200","dark:divide-white/10"),s.join(" ")});return(s,i)=>(v(),b("div",{class:Se(t.value)},[s.$slots.header?(v(),b("div",FT,[ht(s.$slots,"header")])):H("",!0),h("div",UT,[ht(s.$slots,"default")]),s.$slots.footer?(v(),b("div",zT,[ht(s.$slots,"footer")])):H("",!0)],2))}},Ye={__name:"Button",props:{variant:{type:String,default:"primary",validator:n=>["primary","secondary","soft"].includes(n)},size:{type:String,default:"md",validator:n=>["xs","sm","md","lg","xl"].includes(n)},rounded:{type:String,default:"md",validator:n=>["sm","md","full"].includes(n)},type:{type:String,default:"button"},href:{type:String,default:null},icon:{type:[Object,Function],default:null},iconPosition:{type:String,default:"left",validator:n=>["left","right"].includes(n)},iconOnly:{type:Boolean,default:!1}},emits:["click"],setup(n,{emit:e}){const t=n,s=e,i=l=>{s("click",l)},r=z(()=>{const l=["font-semibold","focus-visible:outline-2","focus-visible:outline-offset-2"],a={xs:t.iconOnly?"p-2":"px-3 py-2 text-xs",sm:t.iconOnly?"p-2.5":"px-3 py-2 text-sm",md:t.iconOnly?"p-3":"px-3.5 py-2.5 text-sm",lg:t.iconOnly?"p-3":"px-4 py-3 text-sm",xl:t.iconOnly?"p-3.5":"px-4.5 py-3.5 text-sm"};l.push(a[t.size]);const u={sm:"rounded-sm",md:"rounded-md",full:"rounded-full"};return l.push(u[t.rounded]),t.variant==="primary"?l.push("bg-sky-600","text-white","shadow-xs","hover:bg-sky-500","focus-visible:outline-sky-600","dark:bg-sky-500","dark:shadow-none","dark:hover:bg-sky-400","dark:focus-visible:outline-sky-500"):t.variant==="secondary"?l.push("bg-white","text-gray-900","shadow-xs","inset-ring","inset-ring-gray-300","hover:bg-gray-50","dark:bg-white/10","dark:text-white","dark:shadow-none","dark:inset-ring-white/5","dark:hover:bg-white/20"):t.variant==="soft"&&l.push("bg-sky-50","text-sky-600","shadow-xs","hover:bg-sky-100","dark:bg-sky-500/20","dark:text-sky-400","dark:shadow-none","dark:hover:bg-sky-500/30"),t.icon&&!t.iconOnly&&(l.push("inline-flex","items-center"),l.push(t.size==="xl"?"gap-x-2":"gap-x-1.5")),l.join(" ")}),o=z(()=>{const l=[];return t.iconOnly?l.push("size-5"):(l.push("size-5"),t.iconPosition==="left"?l.push("-ml-0.5"):l.push("-mr-0.5")),l.join(" ")});return(l,a)=>(v(),we(Un(n.href?"a":"button"),{href:n.href,type:n.href?void 0:n.type,class:Se(r.value),onClick:i},{default:Z(()=>[n.icon&&n.iconPosition==="left"?(v(),b("svg",{key:0,viewBox:"0 0 20 20",fill:"currentColor","data-slot":"icon","aria-hidden":"true",class:Se(o.value)},[(v(),we(Un(n.icon)))],2)):H("",!0),ht(l.$slots,"default"),n.icon&&n.iconPosition==="right"?(v(),b("svg",{key:1,viewBox:"0 0 20 20",fill:"currentColor","data-slot":"icon","aria-hidden":"true",class:Se(o.value)},[(v(),we(Un(n.icon)))],2)):H("",!0)]),_:3},8,["href","type","class"]))}},WT=["for"],qT={key:1,class:"mt-2 flex"},GT={class:"flex shrink-0 items-center rounded-l-md bg-gray-100 px-2 text-base text-gray-500 outline-1 -outline-offset-1 outline-gray-300 sm:text-sm/6 dark:bg-white/5 dark:text-gray-400 dark:outline-white/10 font-mono"},KT=["id","type","value","placeholder","required","disabled","aria-invalid","aria-describedby"],JT={key:2,class:"mt-2"},QT=["id","type","value","placeholder","required","disabled","aria-invalid","aria-describedby"],YT={key:0,viewBox:"0 0 16 16",fill:"currentColor","data-slot":"icon","aria-hidden":"true",class:"pointer-events-none col-start-1 row-start-1 mr-3 size-5 self-center justify-self-end text-red-500 sm:size-4 dark:text-red-400"},XT=["id"],ZT=["id"],Ee={__name:"Input",props:{id:{type:String,default:()=>`input-${Math.random().toString(36).substr(2,9)}`},modelValue:{type:[String,Number],default:""},type:{type:String,default:"text"},label:{type:String,default:null},placeholder:{type:String,default:""},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},error:{type:String,default:null},hint:{type:String,default:null},monospace:{type:Boolean,default:!1},prefix:{type:String,default:null}},emits:["update:modelValue","blur"],setup(n){const e=n,t=z(()=>{const i=["block","w-full","rounded-md","bg-white","px-3","py-1.5","text-base","outline-1","-outline-offset-1","placeholder:text-gray-400","focus:outline-2","focus:-outline-offset-2","sm:text-sm/6","dark:bg-white/5","dark:placeholder:text-gray-500"];return e.monospace&&i.push("font-mono"),e.error?i.push("col-start-1","row-start-1","pr-10","pl-3","text-red-900","outline-red-300","placeholder:text-red-300","focus:outline-red-600","sm:pr-9","dark:text-red-400","dark:outline-red-500/50","dark:placeholder:text-red-400/70","dark:focus:outline-red-400"):i.push("text-gray-900","outline-gray-300","focus:outline-sky-600","dark:text-white","dark:outline-white/10","dark:focus:outline-sky-500"),i.join(" ")}),s=z(()=>{const i=["-ml-px","block","w-full","grow","rounded-r-md","bg-white","px-3","py-1.5","text-base","outline-1","-outline-offset-1","placeholder:text-gray-400","focus:outline-2","focus:-outline-offset-2","sm:text-sm/6","dark:bg-white/5","dark:placeholder:text-gray-500"];return e.monospace&&i.push("font-mono"),e.error?i.push("text-red-900","outline-red-300","placeholder:text-red-300","focus:outline-red-600","dark:text-red-400","dark:outline-red-500/50","dark:placeholder:text-red-400/70","dark:focus:outline-red-400"):i.push("text-gray-900","outline-gray-300","focus:outline-sky-600","dark:text-white","dark:outline-white/10","dark:focus:outline-sky-500"),i.join(" ")});return(i,r)=>(v(),b("div",null,[n.label?(v(),b("label",{key:0,for:n.id,class:"block text-sm/6 font-medium text-gray-900 dark:text-white"},Y(n.label),9,WT)):H("",!0),n.prefix?(v(),b("div",qT,[h("div",GT,Y(n.prefix),1),h("input",{id:n.id,type:n.type,value:n.modelValue,placeholder:n.placeholder,required:n.required,disabled:n.disabled,"aria-invalid":n.error?"true":void 0,"aria-describedby":n.error?`${n.id}-error`:n.hint?`${n.id}-description`:void 0,onInput:r[0]||(r[0]=o=>i.$emit("update:modelValue",o.target.value)),onBlur:r[1]||(r[1]=o=>i.$emit("blur",o)),class:Se(s.value)},null,42,KT)])):(v(),b("div",JT,[h("input",{id:n.id,type:n.type,value:n.modelValue,placeholder:n.placeholder,required:n.required,disabled:n.disabled,"aria-invalid":n.error?"true":void 0,"aria-describedby":n.error?`${n.id}-error`:n.hint?`${n.id}-description`:void 0,onInput:r[2]||(r[2]=o=>i.$emit("update:modelValue",o.target.value)),onBlur:r[3]||(r[3]=o=>i.$emit("blur",o)),class:Se(t.value)},null,42,QT),n.error?(v(),b("svg",YT,[...r[4]||(r[4]=[h("path",{d:"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14ZM8 4a.75.75 0 0 1 .75.75v3a.75.75 0 0 1-1.5 0v-3A.75.75 0 0 1 8 4Zm0 8a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z","clip-rule":"evenodd","fill-rule":"evenodd"},null,-1)])])):H("",!0)])),n.error?(v(),b("p",{key:3,id:`${n.id}-error`,class:"mt-2 text-sm text-red-600 dark:text-red-400"},Y(n.error),9,XT)):H("",!0),n.hint&&!n.error?(v(),b("p",{key:4,id:`${n.id}-description`,class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},Y(n.hint),9,ZT)):H("",!0)]))}},e3={class:"flex gap-3"},t3={class:"flex h-6 shrink-0 items-center"},n3={class:"group grid size-4 grid-cols-1"},s3=["id","name","checked","aria-describedby"],i3={class:"text-sm/6"},r3=["for"],o3=["id"],ri={__name:"Checkbox",props:{id:{type:String,required:!0},name:{type:String,default:null},modelValue:{type:Boolean,default:!1},description:{type:String,default:null}},emits:["update:modelValue"],setup(n){return(e,t)=>(v(),b("div",e3,[h("div",t3,[h("div",n3,[h("input",{id:n.id,type:"checkbox",name:n.name,checked:n.modelValue,"aria-describedby":n.description?`${n.id}-description`:void 0,onChange:t[0]||(t[0]=s=>e.$emit("update:modelValue",s.target.checked)),class:"col-start-1 row-start-1 appearance-none rounded-sm border border-gray-300 bg-white checked:border-sky-600 checked:bg-sky-600 indeterminate:border-sky-600 indeterminate:bg-sky-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:checked:bg-gray-100 dark:border-white/10 dark:bg-white/5 dark:checked:border-sky-500 dark:checked:bg-sky-500 dark:indeterminate:border-sky-500 dark:indeterminate:bg-sky-500 dark:focus-visible:outline-sky-500 dark:disabled:border-white/5 dark:disabled:bg-white/10 dark:disabled:checked:bg-white/10 forced-colors:appearance-auto"},null,40,s3),t[1]||(t[1]=h("svg",{viewBox:"0 0 14 14",fill:"none",class:"pointer-events-none col-start-1 row-start-1 size-3.5 self-center justify-self-center stroke-white group-has-disabled:stroke-gray-950/25 dark:group-has-disabled:stroke-white/25"},[h("path",{d:"M3 8L6 11L11 3.5","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"opacity-0 group-has-checked:opacity-100"}),h("path",{d:"M3 7H11","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"opacity-0 group-has-indeterminate:opacity-100"})],-1))])]),h("div",i3,[h("label",{for:n.id,class:"font-medium text-gray-900 dark:text-white"},[ht(e.$slots,"default")],8,r3),n.description?(v(),b("p",{key:0,id:`${n.id}-description`,class:"text-gray-500 dark:text-gray-400"},Y(n.description),9,o3)):H("",!0)])]))}};function l3(n,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z","clip-rule":"evenodd"})])}function a3(n,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"fill-rule":"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z","clip-rule":"evenodd"})])}function u3(n,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 0 1 .67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 1 1-.671-1.34l.041-.022ZM12 9a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z","clip-rule":"evenodd"})])}function c3(n,e){return v(),b("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-1.72 6.97a.75.75 0 1 0-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 1 0 1.06 1.06L12 13.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L13.06 12l1.72-1.72a.75.75 0 1 0-1.06-1.06L12 10.94l-1.72-1.72Z","clip-rule":"evenodd"})])}const d3={class:"flex gap-3"},f3={class:"flex-1"},Kn={__name:"Alert",props:{type:{type:String,default:"info",validator:n=>["success","error","warning","info"].includes(n)},title:{type:String,default:null},description:{type:String,default:null},dismissible:{type:Boolean,default:!1}},emits:["dismiss"],setup(n,{emit:e}){const t=n,s=e,i={success:{container:"bg-sky-50 dark:bg-sky-900/20 inset-ring inset-ring-sky-200 dark:inset-ring-sky-800",icon:"text-sky-600 dark:text-sky-400",title:"text-sky-800 dark:text-sky-200",description:"text-sky-700 dark:text-sky-300",dismiss:"text-sky-600 hover:text-sky-700 dark:text-sky-400 dark:hover:text-sky-300"},error:{container:"bg-red-50 dark:bg-red-900/20 inset-ring inset-ring-red-200 dark:inset-ring-red-800",icon:"text-red-600 dark:text-red-400",title:"text-red-800 dark:text-red-200",description:"text-red-700 dark:text-red-300",dismiss:"text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300"},warning:{container:"bg-yellow-50 dark:bg-yellow-900/20 inset-ring inset-ring-yellow-200 dark:inset-ring-yellow-800",icon:"text-yellow-600 dark:text-yellow-400",title:"text-yellow-800 dark:text-yellow-200",description:"text-yellow-700 dark:text-yellow-300",dismiss:"text-yellow-600 hover:text-yellow-700 dark:text-yellow-400 dark:hover:text-yellow-300"},info:{container:"bg-blue-50 dark:bg-blue-900/20 inset-ring inset-ring-blue-200 dark:inset-ring-blue-800",icon:"text-blue-600 dark:text-blue-400",title:"text-blue-800 dark:text-blue-200",description:"text-blue-700 dark:text-blue-300",dismiss:"text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300"}},r=z(()=>`rounded-lg p-4 ${i[t.type].container}`),o=z(()=>`text-sm font-medium ${i[t.type].title}`),l=z(()=>{const d=[`text-sm ${i[t.type].description}`];return t.title&&d.push("mt-1"),d.join(" ")}),a=z(()=>`rounded-md p-1 ${i[t.type].dismiss} focus:outline-2 focus:outline-offset-2`),u=z(()=>({success:l3,error:c3,warning:a3,info:u3})[t.type]),c=()=>{s("dismiss")};return(d,f)=>(v(),b("div",{class:Se(r.value),role:"alert"},[h("div",d3,[(v(),we(Un(u.value),{class:Se(["h-5 w-5 shrink-0",i[n.type].icon])},null,8,["class"])),h("div",f3,[n.title?(v(),b("p",{key:0,class:Se(o.value)},Y(n.title),3)):H("",!0),n.description||d.$slots.default?(v(),b("p",{key:1,class:Se(l.value)},[ht(d.$slots,"default",{},()=>[ce(Y(n.description),1)])],2)):H("",!0)]),n.dismissible?(v(),b("button",{key:0,type:"button",onClick:c,class:Se(a.value)},[...f[0]||(f[0]=[h("span",{class:"sr-only"},"Dismiss",-1),h("svg",{viewBox:"0 0 20 20",fill:"currentColor",class:"size-5"},[h("path",{d:"M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z"})],-1)])],2)):H("",!0)])],2))}},h3={class:"flex items-center justify-between"},p3={class:"space-y-6"},m3={key:0,class:"text-xs text-gray-500 dark:text-gray-400 space-y-1"},g3={key:0},v3={class:"font-mono"},y3={key:1},b3={class:"font-mono"},k3={class:"space-y-2"},x3=["onClick"],_3={class:"flex items-start gap-3"},w3={class:"text-2xl mt-0.5"},S3={class:"flex-1"},C3={class:"font-semibold text-gray-900 dark:text-white"},A3={class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},E3={key:0,class:"text-sky-600 dark:text-sky-400"},T3={key:1,class:"bg-gray-50 dark:bg-gray-800/50 rounded-lg p-4"},D3={class:"space-y-3"},P3={class:"list-decimal list-inside mt-1 space-y-1"},R3={class:"flex items-center justify-end gap-3"},O3={__name:"ProjectWizard",props:{mode:{type:String,default:"modal",validator:n=>["modal","page"].includes(n)},projectsRoot:{type:String,default:""}},emits:["close","created"],setup(n,{emit:e}){const t=n,s=e,i=z(()=>t.mode==="modal"),r=z(()=>(t.projectsRoot||"").trim()),o=A=>/^([A-Za-z]:[\\/]|\\\\|\/|~)/.test(A),l=(A,w)=>{if(!A)return w;const M=w.replace(/^[\\/]+/,"");if(!M)return A;if(A.endsWith("/")||A.endsWith("\\"))return`${A}${M}`;const G=A.includes("\\")&&!A.includes("/")?"\\":"/";return`${A}${G}${M}`},a=z(()=>i.value?"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4":"flex w-full justify-center"),u=z(()=>i.value?"max-w-2xl w-full max-h-[90vh] overflow-y-auto":"w-full max-w-2xl shadow-xl"),c=gs({directory:"",name:"",type:"project",sensitive:!1,use_git:!0,use_renv:!1,attach_defaults:!0}),d=z(()=>{const A=c.directory.trim();return A?o(A)||!r.value?A:l(r.value,A):r.value||""}),f=z(()=>{const A=c.directory.trim();return A?r.value.length>0||o(A):!1}),p=z(()=>r.value?`Folder will be created inside ${r.value}`:"The directory where your project will be created"),g=z(()=>r.value?"analytics-project":"my-analysis"),k=[{id:"project",title:"Data Analysis",description:"Full-featured project with notebooks, scripts, data management, and results tracking",icon:""},{id:"course",title:"Course Materials",description:"Teaching materials with slides, assignments, and course documentation",icon:""},{id:"presentation",title:"Presentation",description:"Single talk or presentation with minimal structure",icon:""}],x=Q(!1),m=Q(""),_=Q(!1),R=()=>{i.value&&s("close")},U=()=>{!c.name&&c.directory&&(c.name=c.directory.split(/[-_]/).map(A=>A.charAt(0).toUpperCase()+A.slice(1)).join(" "))},N=async()=>{m.value="",_.value=!1,x.value=!0;try{const A=d.value||c.directory,w=await fetch("/api/project/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_dir:A,project_name:c.name||c.directory,type:c.type,sensitive:c.sensitive,use_git:c.use_git,use_renv:c.use_renv,attach_defaults:c.attach_defaults})}),M=await w.json();w.ok&&M.success?(_.value=!0,M&&!M.path&&(M.path=A),s("created",M),i.value&&setTimeout(()=>{s("close")},3e3)):m.value=M.error||"Failed to create project"}catch(A){m.value="Network error: "+A.message}finally{x.value=!1}};return(A,w)=>(v(),b("div",{class:Se(a.value),onClick:Tt(R,["self"])},[S(HT,{class:Se(u.value)},{header:Z(()=>[h("div",h3,[w[9]||(w[9]=h("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Create New Project",-1)),i.value?(v(),b("button",{key:0,onClick:w[0]||(w[0]=M=>A.$emit("close")),class:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition"},[...w[8]||(w[8]=[h("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])):H("",!0)])]),footer:Z(()=>[h("div",R3,[S(Ye,{variant:"secondary",onClick:w[7]||(w[7]=M=>A.$emit("close"))},{default:Z(()=>[...w[23]||(w[23]=[ce(" Cancel ",-1)])]),_:1}),S(Ye,{variant:"primary",onClick:N,disabled:x.value||!c.directory},{default:Z(()=>[ce(Y(x.value?"Creating...":"Create Project"),1)]),_:1},8,["disabled"])])]),default:Z(()=>[h("div",p3,[S(Ee,{modelValue:c.directory,"onUpdate:modelValue":w[1]||(w[1]=M=>c.directory=M),label:"Project Directory",placeholder:g.value,hint:p.value,onInput:U},null,8,["modelValue","placeholder","hint"]),r.value||f.value?(v(),b("div",m3,[r.value?(v(),b("p",g3,[w[10]||(w[10]=ce(" Projects will be created inside ",-1)),h("span",v3,Y(r.value),1),w[11]||(w[11]=ce(". ",-1))])):H("",!0),f.value?(v(),b("p",y3,[w[12]||(w[12]=ce(" Full path: ",-1)),h("span",b3,Y(d.value),1)])):H("",!0)])):H("",!0),S(Ee,{modelValue:c.name,"onUpdate:modelValue":w[2]||(w[2]=M=>c.name=M),label:"Project Name",placeholder:"My Analysis"},null,8,["modelValue"]),h("div",null,[w[14]||(w[14]=h("label",{class:"block text-sm/6 font-medium text-gray-900 dark:text-white mb-3"}," Project Type ",-1)),h("div",k3,[(v(),b(be,null,Ve(k,M=>h("div",{key:M.id,onClick:G=>c.type=M.id,class:Se(["border-2 rounded-lg p-4 cursor-pointer transition",c.type===M.id?"border-sky-600 bg-sky-50 dark:bg-sky-900/20 dark:border-sky-500":"border-gray-200 dark:border-gray-700 hover:border-sky-300 dark:hover:border-sky-600"])},[h("div",_3,[h("div",w3,Y(M.icon),1),h("div",S3,[h("h3",C3,Y(M.title),1),h("p",A3,Y(M.description),1)]),c.type===M.id?(v(),b("div",E3,[...w[13]||(w[13]=[h("svg",{class:"h-6 w-6",fill:"currentColor",viewBox:"0 0 20 20"},[h("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1)])])):H("",!0)])],10,x3)),64))])]),c.type==="project"?(v(),b("div",T3,[S(ri,{modelValue:c.sensitive,"onUpdate:modelValue":w[3]||(w[3]=M=>c.sensitive=M),id:"sensitive",description:"Creates separate public/private directories for inputs, reference materials, and outputs. Recommended for PHI, PII, or IRB-restricted data."},{default:Z(()=>[...w[15]||(w[15]=[ce(" Privacy-first mode ",-1)])]),_:1},8,["modelValue"])])):H("",!0),h("div",D3,[S(ri,{modelValue:c.use_git,"onUpdate:modelValue":w[4]||(w[4]=M=>c.use_git=M),id:"use_git"},{default:Z(()=>[...w[16]||(w[16]=[ce(" Initialize git repository ",-1)])]),_:1},8,["modelValue"]),S(ri,{modelValue:c.use_renv,"onUpdate:modelValue":w[5]||(w[5]=M=>c.use_renv=M),id:"use_renv"},{default:Z(()=>[...w[17]||(w[17]=[ce(" Enable renv for package management ",-1)])]),_:1},8,["modelValue"]),S(ri,{modelValue:c.attach_defaults,"onUpdate:modelValue":w[6]||(w[6]=M=>c.attach_defaults=M),id:"attach_defaults"},{default:Z(()=>[...w[18]||(w[18]=[ce(" Auto-load common packages (dplyr, tidyr, ggplot2) ",-1)])]),_:1},8,["modelValue"])]),m.value?(v(),we(Kn,{key:2,type:"error",description:m.value},null,8,["description"])):H("",!0),_.value?(v(),we(Kn,{key:3,type:"success",title:"Project created successfully!"},{default:Z(()=>[w[22]||(w[22]=h("p",{class:"mt-2"},"Next steps:",-1)),h("ol",P3,[h("li",null,"cd "+Y(d.value),1),w[19]||(w[19]=h("li",null,"R",-1)),w[20]||(w[20]=h("li",null,"library(framework)",-1)),w[21]||(w[21]=h("li",null,"scaffold()",-1))])]),_:1})):H("",!0)])]),_:1},8,["class"])],2))}},L3={class:"flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-sky-500 to-sky-600 shadow-lg shadow-sky-500/20"},M3={key:0,class:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},I3={key:1,class:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},j3={key:2,class:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},V3={__name:"ProjectTypeIcon",props:{type:{type:String,required:!0,validator:n=>["project","course","presentation"].includes(n)}},setup(n){return(e,t)=>(v(),b("div",L3,[n.type==="project"?(v(),b("svg",M3,[...t[0]||(t[0]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)])])):n.type==="course"?(v(),b("svg",I3,[...t[1]||(t[1]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"},null,-1)])])):(v(),b("svg",j3,[...t[2]||(t[2]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"},null,-1)])]))]))}},$3={class:"flex items-center gap-2 text-xs text-zinc-600 dark:text-zinc-400"},N3={class:"truncate"},B3={__name:"ProjectAuthor",props:{author:{type:Object,required:!0}},setup(n){return(e,t)=>(v(),b("div",$3,[t[1]||(t[1]=h("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),h("span",null,Y(n.author.author),1),n.author.author_email?(v(),b(be,{key:0},[t[0]||(t[0]=h("span",{class:"text-zinc-400 dark:text-zinc-500"},"",-1)),h("span",N3,Y(n.author.author_email),1)],64)):H("",!0)]))}},F3={class:"flex items-center gap-2 text-xs text-zinc-500 dark:text-zinc-500"},U3={__name:"ProjectCreatedDate",props:{date:{type:String,required:!0}},setup(n){return(e,t)=>(v(),b("div",F3,[t[0]||(t[0]=h("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),h("span",null,"Created "+Y(n.date),1)]))}},co={__name:"Badge",props:{variant:{type:String,default:"gray",validator:n=>["gray","red","yellow","green","blue","indigo","purple","pink","sky"].includes(n)},pill:{type:Boolean,default:!1},dot:{type:Boolean,default:!1}},setup(n){const e=n,t=z(()=>{const i=["inline-flex","items-center","px-2","py-1","text-xs","font-medium","inset-ring"];i.push(e.pill?"rounded-full":"rounded-md"),e.dot&&i.push("gap-x-1.5");const o={gray:{bg:"bg-gray-50",text:"text-gray-600",ring:"inset-ring-gray-500/10",darkBg:"dark:bg-gray-400/10",darkText:e.dot?"dark:text-gray-200":"dark:text-gray-400",darkRing:e.dot?"dark:inset-ring-white/10":"dark:inset-ring-gray-400/20"},red:{bg:"bg-red-50",text:"text-red-700",ring:"inset-ring-red-600/10",darkBg:"dark:bg-red-400/10",darkText:"dark:text-red-400",darkRing:"dark:inset-ring-red-400/20"},yellow:{bg:"bg-yellow-50",text:"text-yellow-800",ring:"inset-ring-yellow-600/20",darkBg:"dark:bg-yellow-400/10",darkText:"dark:text-yellow-500",darkRing:"dark:inset-ring-yellow-400/20"},green:{bg:"bg-green-50",text:"text-green-700",ring:"inset-ring-green-600/20",darkBg:"dark:bg-green-400/10",darkText:"dark:text-green-400",darkRing:"dark:inset-ring-green-500/20"},sky:{bg:"bg-sky-50",text:"text-sky-700",ring:"inset-ring-sky-600/20",darkBg:"dark:bg-sky-400/10",darkText:"dark:text-sky-400",darkRing:"dark:inset-ring-sky-500/20"},blue:{bg:"bg-blue-50",text:"text-blue-700",ring:"inset-ring-blue-700/10",darkBg:"dark:bg-blue-400/10",darkText:"dark:text-blue-400",darkRing:"dark:inset-ring-blue-400/30"},indigo:{bg:"bg-indigo-50",text:"text-indigo-700",ring:"inset-ring-indigo-700/10",darkBg:"dark:bg-indigo-400/10",darkText:"dark:text-indigo-400",darkRing:"dark:inset-ring-indigo-400/30"},purple:{bg:"bg-purple-50",text:"text-purple-700",ring:"inset-ring-purple-700/10",darkBg:"dark:bg-purple-400/10",darkText:"dark:text-purple-400",darkRing:"dark:inset-ring-purple-400/30"},pink:{bg:"bg-pink-50",text:"text-pink-700",ring:"inset-ring-pink-700/10",darkBg:"dark:bg-pink-400/10",darkText:"dark:text-pink-400",darkRing:"dark:inset-ring-pink-400/20"}}[e.variant];return e.dot?i.push("text-gray-900","inset-ring-gray-200","dark:text-white","dark:inset-ring-white/10"):i.push(o.bg,o.text,o.ring,o.darkBg,o.darkText,o.darkRing),i.join(" ")}),s=z(()=>`size-1.5 ${{gray:"fill-gray-500 dark:fill-gray-400",red:"fill-red-500 dark:fill-red-400",yellow:"fill-yellow-500 dark:fill-yellow-400",green:"fill-green-500 dark:fill-green-400",sky:"fill-sky-500 dark:fill-sky-400",blue:"fill-blue-500 dark:fill-blue-400",indigo:"fill-indigo-500 dark:fill-indigo-400",purple:"fill-purple-500 dark:fill-purple-400",pink:"fill-pink-500 dark:fill-pink-400"}[e.variant]}`);return(i,r)=>(v(),b("span",{class:Se(t.value)},[n.dot?(v(),b("svg",{key:0,viewBox:"0 0 6 6","aria-hidden":"true",class:Se(s.value)},[...r[0]||(r[0]=[h("circle",{r:"3",cx:"3",cy:"3"},null,-1)])],2)):H("",!0),ht(i.$slots,"default")],2))}},z3={class:"group relative overflow-hidden rounded-2xl border border-zinc-200 bg-white p-6 shadow-sm transition-all duration-300 hover:shadow-xl hover:shadow-zinc-900/5 dark:border-zinc-800 dark:bg-zinc-900 dark:hover:shadow-sky-500/5"},H3={class:"relative"},W3={class:"flex items-start justify-between"},q3={class:"flex-1"},G3={class:"flex items-center gap-3"},K3={class:"mt-4 text-xl font-bold text-zinc-900 dark:text-white"},J3={class:"mt-2 text-sm text-zinc-600 dark:text-zinc-400 font-mono truncate"},Q3={class:"mt-6 flex gap-2"},Y3={__name:"ProjectCard",props:{project:{type:Object,required:!0},typeLabel:{type:String,required:!0}},emits:["view","details"],setup(n){return(e,t)=>(v(),b("div",z3,[t[4]||(t[4]=h("div",{class:"absolute -right-6 -top-6 h-24 w-24 rounded-full bg-gradient-to-br from-sky-500/10 to-sky-600/10 blur-2xl transition-all duration-300 group-hover:scale-150"},null,-1)),h("div",H3,[h("div",W3,[h("div",q3,[h("div",G3,[S(V3,{type:n.project.type},null,8,["type"]),S(co,{variant:"sky"},{default:Z(()=>[ce(Y(n.typeLabel),1)]),_:1})]),h("h3",K3,Y(n.project.name),1),h("p",J3,Y(n.project.path),1),n.project.author?(v(),we(B3,{key:0,author:n.project,class:"mt-3"},null,8,["author"])):H("",!0),S(U3,{date:n.project.created,class:"mt-3"},null,8,["date"])])]),h("div",Q3,[S(Ye,{variant:"primary",size:"md",onClick:t[0]||(t[0]=s=>e.$emit("view",n.project)),class:"flex-1"},{default:Z(()=>[...t[2]||(t[2]=[ce(" View Project ",-1)])]),_:1}),S(Ye,{variant:"secondary",size:"md",onClick:t[1]||(t[1]=s=>e.$emit("details",n.project)),class:"flex-1"},{default:Z(()=>[...t[3]||(t[3]=[ce(" See More ",-1)])]),_:1})])])]))}},X3={class:"flex items-start justify-between"},Z3={class:"text-3xl font-bold tracking-tight text-gray-900 dark:text-white"},eD={key:0,class:"mt-2 text-sm text-gray-600 dark:text-gray-400"},tD={key:0},Ao={__name:"PageHeader",props:{title:{type:String,required:!0},description:{type:String,default:null}},setup(n){return(e,t)=>(v(),b("div",X3,[h("div",null,[h("h1",Z3,Y(n.title),1),n.description?(v(),b("p",eD,Y(n.description),1)):H("",!0)]),e.$slots.actions?(v(),b("div",tD,[ht(e.$slots,"actions")])):H("",!0)]))}},nD={key:0,class:"relative z-50"},sD={class:"fixed inset-0 z-10 overflow-y-auto"},iD={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},rD=["aria-labelledby"],oD=["id"],lD={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},aD={__name:"Modal",props:{modelValue:{type:Boolean,default:!1},title:{type:String,default:null},description:{type:String,default:null},icon:{type:String,default:null,validator:n=>["success","error","warning","info"].includes(n)},size:{type:String,default:"md",validator:n=>["sm","md","lg","xl"].includes(n)},variant:{type:String,default:"centered",validator:n=>["centered","side-icon","left"].includes(n)},closeOnBackdrop:{type:Boolean,default:!0}},emits:["update:modelValue","close"],setup(n,{expose:e,emit:t}){const s=n,i=t,r=z(()=>`modal-title-${Math.random().toString(36).substr(2,9)}`),o={sm:"sm:max-w-sm",md:"sm:max-w-lg",lg:"sm:max-w-2xl",xl:"sm:max-w-4xl"},l=z(()=>["relative","transform","overflow-hidden","rounded-lg","bg-white","px-4","pt-5","pb-4","text-left","shadow-xl","transition-all","sm:my-8","sm:w-full","sm:p-6","dark:bg-gray-800","dark:outline","dark:-outline-offset-1","dark:outline-white/10",o[s.size]].join(" ")),a=z(()=>{const m=["flex","items-center","justify-center","rounded-full"];s.variant==="centered"?m.push("mx-auto","size-12"):m.push("shrink-0","sm:mx-0","sm:size-10");const _={success:"bg-sky-100 text-sky-600 dark:bg-sky-500/10 dark:text-sky-400",error:"bg-red-100 text-red-600 dark:bg-red-500/10 dark:text-red-400",warning:"bg-yellow-100 text-yellow-600 dark:bg-yellow-500/10 dark:text-yellow-400",info:"bg-blue-100 text-blue-600 dark:bg-blue-500/10 dark:text-blue-400"};return s.icon&&m.push(_[s.icon]),m.join(" ")}),u=z(()=>{const m=[];return s.variant==="centered"?m.push("mt-3","text-center","sm:mt-5"):s.variant==="left"?m.push("text-left"):m.push("mt-3","text-center","sm:mt-0","sm:ml-4","sm:text-left"),s.variant==="side-icon"&&(s.icon||s.$slots.icon)&&m.push("sm:flex","sm:items-start"),m.join(" ")}),c=z(()=>s.variant==="left"?"text-lg font-bold text-gray-900 dark:text-white mb-4":"text-base font-semibold text-gray-900 dark:text-white"),d=z(()=>(s.variant==="centered","mt-2")),f=z(()=>s.variant==="left"?"mt-6 pt-4 border-t border-gray-200 dark:border-gray-700 flex gap-3 justify-between":s.variant==="centered"?"mt-5 sm:mt-6 flex gap-3 justify-end":"mt-5 sm:mt-4 flex gap-3 justify-end"),p=z(()=>s.icon==="success"?{template:`
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="m4.5 12.75 6 6 9-13.5" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      `}:s.icon==="error"||s.icon==="warning"?{template:`
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      `}:s.icon==="info"?{template:`
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      `}:null),g=()=>{s.closeOnBackdrop&&x()},k=m=>{m.key==="Escape"&&s.modelValue&&x()},x=()=>{i("update:modelValue",!1),i("close")};return Cn(()=>{window.addEventListener("keydown",k)}),xo(()=>{window.removeEventListener("keydown",k)}),e({close:x}),(m,_)=>(v(),we(cy,{to:"body"},[S(Lh,{name:"modal"},{default:Z(()=>[n.modelValue?(v(),b("div",nD,[h("div",{class:"fixed inset-0 bg-gray-500/75 transition-opacity dark:bg-gray-900/50",onClick:g}),h("div",sD,[h("div",iD,[h("div",{class:Se(l.value),role:"dialog","aria-modal":"true","aria-labelledby":r.value},[m.$slots.icon||n.icon?(v(),b("div",{key:0,class:Se(a.value)},[ht(m.$slots,"icon",{},()=>[n.icon?(v(),we(Un(p.value),{key:0,class:"size-6"})):H("",!0)],!0)],2)):H("",!0),h("div",{class:Se(u.value)},[n.title?(v(),b("h3",{key:0,id:r.value,class:Se(c.value)},Y(n.title),11,oD)):H("",!0),n.description||m.$slots.default?(v(),b("div",{key:1,class:Se(d.value)},[n.description?(v(),b("p",lD,Y(n.description),1)):ht(m.$slots,"default",{key:1},void 0,!0)],2)):H("",!0)],2),m.$slots.actions?(v(),b("div",{key:1,class:Se(f.value)},[ht(m.$slots,"actions",{},void 0,!0)],2)):H("",!0)],10,rD)])])])):H("",!0)]),_:3})]))}},kr=gc(aD,[["__scopeId","data-v-2e078ad9"]]),uD={class:"flex flex-col gap-3 rounded-2xl border border-zinc-200 bg-white p-5 shadow-sm dark:border-zinc-800 dark:bg-zinc-900 sm:flex-row sm:items-center sm:justify-between"},cD={class:"min-w-0"},dD={class:"text-sm font-medium text-zinc-700 dark:text-zinc-200"},fD={class:"mt-1 font-mono text-sm text-zinc-600 dark:text-zinc-400 truncate"},hD={class:"flex items-center gap-2"},pD={__name:"InfoCard",props:{label:{type:String,required:!0},value:{type:String,required:!0},copyable:{type:Boolean,default:!1},copyMessage:{type:String,default:"Copied!"}},setup(n){return(e,t)=>(v(),b("div",uD,[h("div",cD,[h("p",dD,Y(n.label),1),h("p",fD,Y(n.value),1)]),h("div",hD,[n.copyable?(v(),we(zs,{key:0,value:n.value,variant:"ghost","show-label":"","success-message":n.copyMessage},null,8,["value","success-message"])):H("",!0),ht(e.$slots,"actions")])]))}},mD={class:"mx-auto max-w-5xl p-10"},gD={class:"flex gap-3"},vD={key:1,class:"mt-10 grid gap-6 sm:grid-cols-2"},yD={key:2,class:"mt-12 overflow-hidden rounded-3xl bg-gradient-to-br from-sky-600 via-sky-500 to-teal-500 p-12 shadow-2xl shadow-sky-500/20"},bD={class:"space-y-4"},kD={key:0,class:"mt-2 text-sm text-red-600 dark:text-red-400"},xD={class:"flex gap-3 justify-end"},_D={key:0,class:"space-y-6"},wD={class:"text-lg font-semibold text-zinc-900 dark:text-white mb-3"},SD={class:"grid gap-4"},CD={class:"text-sm text-zinc-600 dark:text-zinc-400 font-mono bg-zinc-50 dark:bg-zinc-800 px-3 py-2 rounded-lg"},AD={key:0,class:"grid grid-cols-2 gap-4"},ED={class:"text-sm text-zinc-600 dark:text-zinc-400"},TD={key:0},DD={class:"text-sm text-zinc-600 dark:text-zinc-400"},PD={class:"text-sm text-zinc-600 dark:text-zinc-400"},RD={class:"flex gap-3 justify-end"},OD={__name:"ProjectsView",setup(n){const e=Kl(),t=wo(),s=Q(!1),i=Q(!1),r=Q(!1),o=Q(""),l=Q(""),a=Q(!1),u=Q(null),c=Q({projects:[]}),d=Q(""),f=Q(null),p=A=>{if(!A)return"Unknown";const w=f.value?.project_types?.[A]?.label;return w||A.split("_").map(M=>M.charAt(0).toUpperCase()+M.slice(1)).join(" ")},g=async()=>{try{const w=await(await fetch("/api/settings/get")).json();c.value.projects=w.projects||[],d.value=w.global?.projects_root&&w.global.projects_root!==""?w.global.projects_root:""}catch(A){console.error("Failed to load settings:",A)}},k=()=>{t.path==="/projects/new"?s.value=!0:e.push("/projects/new")},x=()=>{s.value=!1,t.path==="/projects/new"&&e.push("/projects")},m=A=>{s.value=!1,g(),A?.id?e.push(`/project/${A.id}`):e.push("/projects")},_=()=>{i.value=!1,o.value="",l.value=""},R=A=>{u.value=A,r.value=!0},U=async()=>{l.value="",a.value=!0;try{const A=await fetch("/api/project/import",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_dir:o.value})}),w=await A.text();if(!w){l.value="Server returned empty response",a.value=!1;return}const M=JSON.parse(w);A.ok?(_(),g()):l.value=M.error||"Failed to import project"}catch(A){l.value="Network error: "+A.message}finally{a.value=!1}},N=async()=>{try{const w=await(await fetch("/api/settings-catalog")).json();w.error||(f.value=w)}catch(A){console.error("Failed to load settings catalog:",A)}};return Cn(()=>{g(),N(),s.value=t.path==="/projects/new"}),je(()=>t.path,A=>{s.value=A==="/projects/new"},{immediate:!0}),(A,w)=>(v(),b("div",mD,[S(Ao,{title:"Your Projects",description:"Framework projects you've created."},{actions:Z(()=>[h("div",gD,[S(Ye,{size:"lg",variant:"secondary",onClick:w[0]||(w[0]=M=>i.value=!0)},{default:Z(()=>[...w[7]||(w[7]=[ce(" Import Project ",-1)])]),_:1}),S(Ye,{size:"lg",onClick:k},{default:Z(()=>[...w[8]||(w[8]=[ce(" New Project ",-1)])]),_:1})])]),_:1}),d.value?(v(),we(pD,{key:0,class:"mt-6",label:"Projects Root",value:d.value,copyable:"","copy-message":"Root path copied"},{actions:Z(()=>[S(Ye,{size:"sm",variant:"secondary",onClick:w[1]||(w[1]=M=>Ke(e).push("/settings"))},{default:Z(()=>[...w[9]||(w[9]=[ce(" Edit ",-1)])]),_:1})]),_:1},8,["value"])):H("",!0),c.value.projects&&c.value.projects.length>0?(v(),b("div",vD,[(v(!0),b(be,null,Ve(c.value.projects,(M,G)=>(v(),we(Y3,{key:G,project:M,"type-label":p(M.type),onView:ue=>A.$router.push(`/project/${M.id}`),onDetails:R},null,8,["project","type-label","onView"]))),128))])):(v(),b("div",yD,[h("div",{class:"relative"},[w[12]||(w[12]=h("div",{class:"absolute -right-10 -top-10 h-40 w-40 rounded-full bg-white/10 blur-3xl"},null,-1)),w[13]||(w[13]=h("div",{class:"absolute -bottom-10 -left-10 h-40 w-40 rounded-full bg-white/10 blur-3xl"},null,-1)),h("div",{class:"relative text-center"},[w[11]||(w[11]=_o('<div class="mx-auto flex h-16 w-16 items-center justify-center rounded-2xl bg-white/20 backdrop-blur-sm"><svg class="h-8 w-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg></div><h2 class="mt-6 text-3xl font-bold text-white">Ready to start?</h2><p class="mt-3 text-lg text-sky-50"> Create a new Framework project with a sensible structure and best practices built-in. </p>',3)),h("button",{onClick:k,class:"mt-8 inline-flex items-center gap-2 rounded-xl bg-white px-6 py-3 text-base font-semibold text-sky-600 shadow-xl transition-all duration-200 hover:scale-105 hover:shadow-2xl focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-white"},[...w[10]||(w[10]=[h("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),ce(" Create Your First Project ",-1)])])])])])),s.value?(v(),we(O3,{key:3,"projects-root":d.value,onClose:x,onCreated:m},null,8,["projects-root"])):H("",!0),S(kr,{modelValue:i.value,"onUpdate:modelValue":w[3]||(w[3]=M=>i.value=M),title:"Import Existing Project",size:"md"},{actions:Z(()=>[h("div",xD,[S(Ye,{variant:"secondary",onClick:_},{default:Z(()=>[...w[17]||(w[17]=[ce(" Cancel ",-1)])]),_:1}),S(Ye,{variant:"primary",onClick:U,disabled:!o.value||a.value},{default:Z(()=>[ce(Y(a.value?"Importing...":"Import"),1)]),_:1},8,["disabled"])])]),default:Z(()=>[h("div",bD,[w[16]||(w[16]=h("p",{class:"text-sm text-zinc-600 dark:text-zinc-400"}," Import an existing Framework project that isn't in your registry yet. ",-1)),h("div",null,[w[14]||(w[14]=h("label",{for:"import-path",class:"block text-sm font-medium text-zinc-900 dark:text-white mb-2"}," Project Directory Path ",-1)),He(h("input",{id:"import-path","onUpdate:modelValue":w[2]||(w[2]=M=>o.value=M),type:"text",placeholder:"/Users/you/projects/my-framework-project",class:Se(["block w-full rounded-lg border-0 px-4 py-2.5 text-zinc-900 shadow-sm ring-1 ring-inset ring-zinc-300 placeholder:text-zinc-400 focus:ring-2 focus:ring-inset focus:ring-sky-600 dark:bg-zinc-800 dark:text-white dark:ring-zinc-700 dark:placeholder:text-zinc-500 dark:focus:ring-sky-500 sm:text-sm sm:leading-6 font-mono",{"ring-red-500 dark:ring-red-500":l.value}])},null,2),[[br,o.value]]),w[15]||(w[15]=h("p",{class:"mt-2 text-xs text-zinc-500 dark:text-zinc-500"}," Enter the full path to the Framework project directory ",-1)),l.value?(v(),b("p",kD,Y(l.value),1)):H("",!0)])])]),_:1},8,["modelValue"]),S(kr,{modelValue:r.value,"onUpdate:modelValue":w[6]||(w[6]=M=>r.value=M),title:"Project Details",size:"lg"},{actions:Z(()=>[h("div",RD,[S(Ye,{variant:"secondary",onClick:w[4]||(w[4]=M=>r.value=!1)},{default:Z(()=>[...w[22]||(w[22]=[ce(" Close ",-1)])]),_:1}),S(Ye,{variant:"primary",onClick:w[5]||(w[5]=M=>{A.$router.push(`/project/${u.value.id}`),r.value=!1})},{default:Z(()=>[...w[23]||(w[23]=[ce(" View Full Details ",-1)])]),_:1})])]),default:Z(()=>[u.value?(v(),b("div",_D,[h("div",null,[h("h3",wD,Y(u.value.name),1),S(co,{variant:"sky",class:"mb-4"},{default:Z(()=>[ce(Y(u.value.type),1)]),_:1})]),h("div",SD,[h("div",null,[w[18]||(w[18]=h("label",{class:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1"}," Location ",-1)),h("p",CD,Y(u.value.path),1)]),u.value.author?(v(),b("div",AD,[h("div",null,[w[19]||(w[19]=h("label",{class:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1"}," Author ",-1)),h("p",ED,Y(u.value.author),1)]),u.value.author_email?(v(),b("div",TD,[w[20]||(w[20]=h("label",{class:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1"}," Email ",-1)),h("p",DD,Y(u.value.author_email),1)])):H("",!0)])):H("",!0),h("div",null,[w[21]||(w[21]=h("label",{class:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1"}," Created ",-1)),h("p",PD,Y(u.value.created),1)])])])):H("",!0)]),_:1},8,["modelValue"])]))}},LD=["for"],MD={class:"mt-2 grid grid-cols-1"},ID=["id","value"],jD={key:1,class:"mt-2 text-sm text-gray-500 dark:text-gray-400"},bn={__name:"Select",props:{id:{type:String,default:()=>`select-${Math.random().toString(36).substr(2,9)}`},modelValue:{type:[String,Number],default:""},label:{type:String,default:null},hint:{type:String,default:null}},emits:["update:modelValue"],setup(n){return(e,t)=>(v(),b("div",null,[n.label?(v(),b("label",{key:0,for:n.id,class:"block text-sm/6 font-medium text-gray-900 dark:text-white"},Y(n.label),9,LD)):H("",!0),h("div",MD,[h("select",{id:n.id,value:n.modelValue,onChange:t[0]||(t[0]=s=>e.$emit("update:modelValue",s.target.value)),class:"col-start-1 row-start-1 w-full appearance-none rounded-md bg-white py-1.5 pr-8 pl-3 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 focus-visible:outline-2 focus-visible:-outline-offset-2 focus-visible:outline-sky-600 sm:text-sm/6 dark:bg-white/5 dark:text-white dark:outline-white/10 dark:*:bg-gray-800 dark:focus-visible:outline-sky-500"},[ht(e.$slots,"default")],40,ID),t[1]||(t[1]=h("svg",{viewBox:"0 0 16 16",fill:"currentColor","data-slot":"icon","aria-hidden":"true",class:"pointer-events-none col-start-1 row-start-1 mr-2 size-5 self-center justify-self-end text-gray-500 sm:size-4 dark:text-gray-400"},[h("path",{d:"M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z","clip-rule":"evenodd","fill-rule":"evenodd"})],-1))]),n.hint?(v(),b("p",jD,Y(n.hint),1)):H("",!0)]))}},VD={class:"flex items-center gap-3"},$D=["id","name","checked","disabled","aria-label"],ND={key:0,class:"text-sm/6"},BD=["for"],FD=["id"],Qe={__name:"Toggle",props:{id:{type:String,default:()=>`toggle-${Math.random().toString(36).substr(2,9)}`},name:{type:String,default:null},modelValue:{type:Boolean,default:!1},label:{type:String,default:null},description:{type:String,default:null},ariaLabel:{type:String,default:null},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(n,{emit:e}){const t=n,s=e,i=r=>{if(!t.disabled){const o=r.target.checked;s("update:modelValue",o),s("change",o)}};return(r,o)=>(v(),b("div",VD,[h("div",{class:Se(["group relative inline-flex w-11 shrink-0 rounded-full p-0.5 inset-ring inset-ring-gray-900/5 outline-offset-2 transition-colors duration-200 ease-in-out dark:inset-ring-white/10",[n.modelValue?"bg-sky-600 outline-sky-600 dark:bg-sky-500 dark:outline-sky-500":"bg-gray-200 outline-sky-600 dark:bg-white/5 dark:outline-sky-500",n.disabled?"opacity-50 cursor-not-allowed":"cursor-pointer"]])},[h("span",{class:Se(["size-5 rounded-full bg-white shadow-xs ring-1 ring-gray-900/5 transition-transform duration-200 ease-in-out",{"translate-x-5":n.modelValue}])},null,2),h("input",{id:n.id,type:"checkbox",name:n.name,checked:n.modelValue,disabled:n.disabled,"aria-label":n.ariaLabel||n.label,class:"absolute inset-0 appearance-none focus:outline-hidden cursor-pointer disabled:cursor-not-allowed",onChange:i},null,40,$D)],2),n.label||n.description?(v(),b("div",ND,[n.label?(v(),b("label",{key:0,for:n.id,class:Se(["font-medium text-gray-900 cursor-pointer dark:text-white",{"cursor-not-allowed opacity-50":n.disabled}])},Y(n.label),11,BD)):H("",!0),n.description?(v(),b("p",{key:1,id:`${n.id}-description`,class:"text-gray-500 dark:text-gray-400"},Y(n.description),9,FD)):H("",!0)])):H("",!0)]))}},UD={class:"flex items-center"},zD=["id","name","value","checked"],HD=["for"],Ca={__name:"Radio",props:{id:{type:String,required:!0},name:{type:String,required:!0},value:{type:[String,Number,Boolean],required:!0},modelValue:{type:[String,Number,Boolean],default:null}},emits:["update:modelValue"],setup(n){return(e,t)=>(v(),b("div",UD,[h("input",{id:n.id,type:"radio",name:n.name,value:n.value,checked:n.modelValue===n.value,onChange:t[0]||(t[0]=s=>e.$emit("update:modelValue",n.value)),class:"relative size-4 appearance-none rounded-full border border-gray-300 bg-white before:absolute before:inset-1 before:rounded-full before:bg-white not-checked:before:hidden checked:border-sky-600 checked:bg-sky-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:before:bg-gray-400 dark:border-white/10 dark:bg-white/5 dark:checked:border-sky-500 dark:checked:bg-sky-500 dark:focus-visible:outline-sky-500 dark:disabled:border-white/5 dark:disabled:bg-white/10 dark:disabled:before:bg-white/20 forced-colors:appearance-auto forced-colors:before:hidden"},null,40,zD),h("label",{for:n.id,class:"ml-3 block text-sm/6 font-medium text-gray-900 dark:text-white"},[ht(e.$slots,"default")],8,HD)]))}},WD={class:"text-sm/6 font-semibold text-gray-900 dark:text-white"},qD={key:0,class:"mt-1 text-sm/6 text-gray-600 dark:text-gray-400"},GD={class:"mt-6 space-y-6"},KD={__name:"RadioGroup",props:{legend:{type:String,required:!0},description:{type:String,default:null}},setup(n){return(e,t)=>(v(),b("fieldset",null,[h("legend",WD,Y(n.legend),1),n.description?(v(),b("p",qD,Y(n.description),1)):H("",!0),h("div",GD,[ht(e.$slots,"default")])]))}},JD={class:"space-y-4"},QD={class:"flex items-start gap-4"},YD={class:"flex-1"},XD=["onClick"],dr={__name:"Repeater",props:{modelValue:{type:Array,default:()=>[]},addLabel:{type:String,default:"Add Item"},defaultItem:{type:[Object,Function],default:()=>({})}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,s=e,i=()=>{const l=typeof t.defaultItem=="function"?t.defaultItem():{...t.defaultItem,_id:Date.now()};s("update:modelValue",[...t.modelValue,l])},r=l=>{const a=t.modelValue.filter((u,c)=>c!==l);s("update:modelValue",a)},o=(l,a,u)=>{const c=[...t.modelValue];c[l]={...c[l],[a]:u},s("update:modelValue",c)};return(l,a)=>(v(),b("div",JD,[(v(!0),b(be,null,Ve(n.modelValue,(u,c)=>(v(),b("div",{key:u._id||c,class:"rounded-lg border border-gray-200 p-4 dark:border-gray-700"},[h("div",QD,[h("div",YD,[ht(l.$slots,"default",{item:u,index:c,update:(d,f)=>o(c,d,f)})]),h("button",{type:"button",onClick:d=>r(c),class:"shrink-0 rounded-md p-1.5 text-gray-400 transition hover:bg-red-50 hover:text-red-600 dark:hover:bg-red-900/20 dark:hover:text-red-400",title:"Remove"},[...a[0]||(a[0]=[h("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,XD)])]))),128)),S(Ye,{variant:"secondary",size:"sm",onClick:i,class:"inline-flex items-center"},{default:Z(()=>[a[1]||(a[1]=h("svg",{class:"mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)),ce(" "+Y(n.addLabel),1)]),_:1})]))}};let yf=[],Jb=[];(()=>{let n="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,t=0;e<n.length;e++)(e%2?Jb:yf).push(t=t+n[e])})();function ZD(n){if(n<768)return!1;for(let e=0,t=yf.length;;){let s=e+t>>1;if(n<yf[s])t=s;else if(n>=Jb[s])e=s+1;else return!0;if(e==t)return!1}}function zg(n){return n>=127462&&n<=127487}const Hg=8205;function eP(n,e,t=!0,s=!0){return(t?Qb:tP)(n,e,s)}function Qb(n,e,t){if(e==n.length)return e;e&&Yb(n.charCodeAt(e))&&Xb(n.charCodeAt(e-1))&&e--;let s=dd(n,e);for(e+=Wg(s);e<n.length;){let i=dd(n,e);if(s==Hg||i==Hg||t&&ZD(i))e+=Wg(i),s=i;else if(zg(i)){let r=0,o=e-2;for(;o>=0&&zg(dd(n,o));)r++,o-=2;if(r%2==0)break;e+=2}else break}return e}function tP(n,e,t){for(;e>0;){let s=Qb(n,e-2,t);if(s<e)return s;e--}return 0}function dd(n,e){let t=n.charCodeAt(e);if(!Xb(t)||e+1==n.length)return t;let s=n.charCodeAt(e+1);return Yb(s)?(t-55296<<10)+(s-56320)+65536:t}function Yb(n){return n>=56320&&n<57344}function Xb(n){return n>=55296&&n<56320}function Wg(n){return n<65536?1:2}class ut{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,s){[e,t]=fo(this,e,t);let i=[];return this.decompose(0,e,i,2),s.length&&s.decompose(0,s.length,i,3),this.decompose(t,this.length,i,1),Vs.from(i,this.length-(t-e)+s.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=fo(this,e,t);let s=[];return this.decompose(e,t,s,0),Vs.from(s,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),s=this.length-this.scanIdentical(e,-1),i=new il(this),r=new il(e);for(let o=t,l=t;;){if(i.next(o),r.next(o),o=0,i.lineBreak!=r.lineBreak||i.done!=r.done||i.value!=r.value)return!1;if(l+=i.value.length,i.done||l>=s)return!0}}iter(e=1){return new il(this,e)}iterRange(e,t=this.length){return new Zb(this,e,t)}iterLines(e,t){let s;if(e==null)s=this.iter();else{t==null&&(t=this.lines+1);let i=this.line(e).from;s=this.iterRange(i,Math.max(i,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new e1(s)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?ut.empty:e.length<=32?new Bt(e):Vs.from(Bt.split(e,[]))}}class Bt extends ut{constructor(e,t=nP(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,s,i){for(let r=0;;r++){let o=this.text[r],l=i+o.length;if((t?s:l)>=e)return new sP(i,l,s,o);i=l+1,s++}}decompose(e,t,s,i){let r=e<=0&&t>=this.length?this:new Bt(qg(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(i&1){let o=s.pop(),l=nu(r.text,o.text.slice(),0,r.length);if(l.length<=32)s.push(new Bt(l,o.length+r.length));else{let a=l.length>>1;s.push(new Bt(l.slice(0,a)),new Bt(l.slice(a)))}}else s.push(r)}replace(e,t,s){if(!(s instanceof Bt))return super.replace(e,t,s);[e,t]=fo(this,e,t);let i=nu(this.text,nu(s.text,qg(this.text,0,e)),t),r=this.length+s.length-(t-e);return i.length<=32?new Bt(i,r):Vs.from(Bt.split(i,[]),r)}sliceString(e,t=this.length,s=`
`){[e,t]=fo(this,e,t);let i="";for(let r=0,o=0;r<=t&&o<this.text.length;o++){let l=this.text[o],a=r+l.length;r>e&&o&&(i+=s),e<a&&t>r&&(i+=l.slice(Math.max(0,e-r),t-r)),r=a+1}return i}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let s=[],i=-1;for(let r of e)s.push(r),i+=r.length+1,s.length==32&&(t.push(new Bt(s,i)),s=[],i=-1);return i>-1&&t.push(new Bt(s,i)),t}}class Vs extends ut{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let s of e)this.lines+=s.lines}lineInner(e,t,s,i){for(let r=0;;r++){let o=this.children[r],l=i+o.length,a=s+o.lines-1;if((t?a:l)>=e)return o.lineInner(e,t,s,i);i=l+1,s=a+1}}decompose(e,t,s,i){for(let r=0,o=0;o<=t&&r<this.children.length;r++){let l=this.children[r],a=o+l.length;if(e<=a&&t>=o){let u=i&((o<=e?1:0)|(a>=t?2:0));o>=e&&a<=t&&!u?s.push(l):l.decompose(e-o,t-o,s,u)}o=a+1}}replace(e,t,s){if([e,t]=fo(this,e,t),s.lines<this.lines)for(let i=0,r=0;i<this.children.length;i++){let o=this.children[i],l=r+o.length;if(e>=r&&t<=l){let a=o.replace(e-r,t-r,s),u=this.lines-o.lines+a.lines;if(a.lines<u>>4&&a.lines>u>>6){let c=this.children.slice();return c[i]=a,new Vs(c,this.length-(t-e)+s.length)}return super.replace(r,l,a)}r=l+1}return super.replace(e,t,s)}sliceString(e,t=this.length,s=`
`){[e,t]=fo(this,e,t);let i="";for(let r=0,o=0;r<this.children.length&&o<=t;r++){let l=this.children[r],a=o+l.length;o>e&&r&&(i+=s),e<a&&t>o&&(i+=l.sliceString(e-o,t-o,s)),o=a+1}return i}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof Vs))return 0;let s=0,[i,r,o,l]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=t,r+=t){if(i==o||r==l)return s;let a=this.children[i],u=e.children[r];if(a!=u)return s+a.scanIdentical(u,t);s+=a.length+1}}static from(e,t=e.reduce((s,i)=>s+i.length+1,-1)){let s=0;for(let p of e)s+=p.lines;if(s<32){let p=[];for(let g of e)g.flatten(p);return new Bt(p,t)}let i=Math.max(32,s>>5),r=i<<1,o=i>>1,l=[],a=0,u=-1,c=[];function d(p){let g;if(p.lines>r&&p instanceof Vs)for(let k of p.children)d(k);else p.lines>o&&(a>o||!a)?(f(),l.push(p)):p instanceof Bt&&a&&(g=c[c.length-1])instanceof Bt&&p.lines+g.lines<=32?(a+=p.lines,u+=p.length+1,c[c.length-1]=new Bt(g.text.concat(p.text),g.length+1+p.length)):(a+p.lines>i&&f(),a+=p.lines,u+=p.length+1,c.push(p))}function f(){a!=0&&(l.push(c.length==1?c[0]:Vs.from(c,u)),u=-1,a=c.length=0)}for(let p of e)d(p);return f(),l.length==1?l[0]:new Vs(l,t)}}ut.empty=new Bt([""],0);function nP(n){let e=-1;for(let t of n)e+=t.length+1;return e}function nu(n,e,t=0,s=1e9){for(let i=0,r=0,o=!0;r<n.length&&i<=s;r++){let l=n[r],a=i+l.length;a>=t&&(a>s&&(l=l.slice(0,s-i)),i<t&&(l=l.slice(t-i)),o?(e[e.length-1]+=l,o=!1):e.push(l)),i=a+1}return e}function qg(n,e,t){return nu(n,[""],e,t)}class il{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Bt?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let s=this.nodes.length-1,i=this.nodes[s],r=this.offsets[s],o=r>>1,l=i instanceof Bt?i.text.length:i.children.length;if(o==(t>0?l:0)){if(s==0)return this.done=!0,this.value="",this;t>0&&this.offsets[s-1]++,this.nodes.pop(),this.offsets.pop()}else if((r&1)==(t>0?0:1)){if(this.offsets[s]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof Bt){let a=i.text[o+(t<0?-1:0)];if(this.offsets[s]+=t,a.length>Math.max(0,e))return this.value=e==0?a:t>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=i.children[o+(t<0?-1:0)];e>a.length?(e-=a.length,this.offsets[s]+=t):(t<0&&this.offsets[s]--,this.nodes.push(a),this.offsets.push(t>0?1:(a instanceof Bt?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class Zb{constructor(e,t,s){this.value="",this.done=!1,this.cursor=new il(e,t>s?-1:1),this.pos=t>s?e.length:0,this.from=Math.min(t,s),this.to=Math.max(t,s)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let s=t<0?this.pos-this.from:this.to-this.pos;e>s&&(e=s),s-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*t,this.value=i.length<=s?i:t<0?i.slice(i.length-s):i.slice(0,s),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class e1{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:s,value:i}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):s?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(ut.prototype[Symbol.iterator]=function(){return this.iter()},il.prototype[Symbol.iterator]=Zb.prototype[Symbol.iterator]=e1.prototype[Symbol.iterator]=function(){return this});class sP{constructor(e,t,s,i){this.from=e,this.to=t,this.number=s,this.text=i}get length(){return this.to-this.from}}function fo(n,e,t){return e=Math.max(0,Math.min(n.length,e)),[e,Math.max(e,Math.min(n.length,t))]}function fn(n,e,t=!0,s=!0){return eP(n,e,t,s)}function iP(n){return n>=56320&&n<57344}function rP(n){return n>=55296&&n<56320}function $n(n,e){let t=n.charCodeAt(e);if(!rP(t)||e+1==n.length)return t;let s=n.charCodeAt(e+1);return iP(s)?(t-55296<<10)+(s-56320)+65536:t}function Kh(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode((n>>10)+55296,(n&1023)+56320))}function $s(n){return n<65536?1:2}const bf=/\r\n?|\n/;var Ln=(function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n})(Ln||(Ln={}));class Hs{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let s=this.sections[t+1];e+=s<0?this.sections[t]:s}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,s=0,i=0;t<this.sections.length;){let r=this.sections[t++],o=this.sections[t++];o<0?(e(s,i,r),i+=r):i+=o,s+=r}}iterChangedRanges(e,t=!1){kf(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let s=this.sections[t++],i=this.sections[t++];i<0?e.push(s,i):e.push(i,s)}return new Hs(e)}composeDesc(e){return this.empty?e:e.empty?this:t1(this,e)}mapDesc(e,t=!1){return e.empty?this:xf(this,e,t)}mapPos(e,t=-1,s=Ln.Simple){let i=0,r=0;for(let o=0;o<this.sections.length;){let l=this.sections[o++],a=this.sections[o++],u=i+l;if(a<0){if(u>e)return r+(e-i);r+=l}else{if(s!=Ln.Simple&&u>=e&&(s==Ln.TrackDel&&i<e&&u>e||s==Ln.TrackBefore&&i<e||s==Ln.TrackAfter&&u>e))return null;if(u>e||u==e&&t<0&&!l)return e==i||t<0?r:r+a;r+=a}i=u}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return r}touchesRange(e,t=e){for(let s=0,i=0;s<this.sections.length&&i<=t;){let r=this.sections[s++],o=this.sections[s++],l=i+r;if(o>=0&&i<=t&&l>=e)return i<e&&l>t?"cover":!0;i=l}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let s=this.sections[t++],i=this.sections[t++];e+=(e?" ":"")+s+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Hs(e)}static create(e){return new Hs(e)}}class Xt extends Hs{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return kf(this,(t,s,i,r,o)=>e=e.replace(i,i+(s-t),o),!1),e}mapDesc(e,t=!1){return xf(this,e,t,!0)}invert(e){let t=this.sections.slice(),s=[];for(let i=0,r=0;i<t.length;i+=2){let o=t[i],l=t[i+1];if(l>=0){t[i]=l,t[i+1]=o;let a=i>>1;for(;s.length<a;)s.push(ut.empty);s.push(o?e.slice(r,r+o):ut.empty)}r+=o}return new Xt(t,s)}compose(e){return this.empty?e:e.empty?this:t1(this,e,!0)}map(e,t=!1){return e.empty?this:xf(this,e,t,!0)}iterChanges(e,t=!1){kf(this,e,t)}get desc(){return Hs.create(this.sections)}filter(e){let t=[],s=[],i=[],r=new Cl(this);e:for(let o=0,l=0;;){let a=o==e.length?1e9:e[o++];for(;l<a||l==a&&r.len==0;){if(r.done)break e;let c=Math.min(r.len,a-l);vn(i,c,-1);let d=r.ins==-1?-1:r.off==0?r.ins:0;vn(t,c,d),d>0&&Ei(s,t,r.text),r.forward(c),l+=c}let u=e[o++];for(;l<u;){if(r.done)break e;let c=Math.min(r.len,u-l);vn(t,c,-1),vn(i,c,r.ins==-1?-1:r.off==0?r.ins:0),r.forward(c),l+=c}}return{changes:new Xt(t,s),filtered:Hs.create(i)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let s=this.sections[t],i=this.sections[t+1];i<0?e.push(s):i==0?e.push([s]):e.push([s].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,s){let i=[],r=[],o=0,l=null;function a(c=!1){if(!c&&!i.length)return;o<t&&vn(i,t-o,-1);let d=new Xt(i,r);l=l?l.compose(d.map(l)):d,i=[],r=[],o=0}function u(c){if(Array.isArray(c))for(let d of c)u(d);else if(c instanceof Xt){if(c.length!=t)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${t})`);a(),l=l?l.compose(c.map(l)):c}else{let{from:d,to:f=d,insert:p}=c;if(d>f||d<0||f>t)throw new RangeError(`Invalid change range ${d} to ${f} (in doc of length ${t})`);let g=p?typeof p=="string"?ut.of(p.split(s||bf)):p:ut.empty,k=g.length;if(d==f&&k==0)return;d<o&&a(),d>o&&vn(i,d-o,-1),vn(i,f-d,k),Ei(r,i,g),o=f}}return u(e),a(!l),l}static empty(e){return new Xt(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],s=[];for(let i=0;i<e.length;i++){let r=e[i];if(typeof r=="number")t.push(r,-1);else{if(!Array.isArray(r)||typeof r[0]!="number"||r.some((o,l)=>l&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(r.length==1)t.push(r[0],0);else{for(;s.length<i;)s.push(ut.empty);s[i]=ut.of(r.slice(1)),t.push(r[0],s[i].length)}}}return new Xt(t,s)}static createSet(e,t){return new Xt(e,t)}}function vn(n,e,t,s=!1){if(e==0&&t<=0)return;let i=n.length-2;i>=0&&t<=0&&t==n[i+1]?n[i]+=e:i>=0&&e==0&&n[i]==0?n[i+1]+=t:s?(n[i]+=e,n[i+1]+=t):n.push(e,t)}function Ei(n,e,t){if(t.length==0)return;let s=e.length-2>>1;if(s<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<s;)n.push(ut.empty);n.push(t)}}function kf(n,e,t){let s=n.inserted;for(let i=0,r=0,o=0;o<n.sections.length;){let l=n.sections[o++],a=n.sections[o++];if(a<0)i+=l,r+=l;else{let u=i,c=r,d=ut.empty;for(;u+=l,c+=a,a&&s&&(d=d.append(s[o-2>>1])),!(t||o==n.sections.length||n.sections[o+1]<0);)l=n.sections[o++],a=n.sections[o++];e(i,u,r,c,d),i=u,r=c}}}function xf(n,e,t,s=!1){let i=[],r=s?[]:null,o=new Cl(n),l=new Cl(e);for(let a=-1;;){if(o.done&&l.len||l.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&l.ins==-1){let u=Math.min(o.len,l.len);vn(i,u,-1),o.forward(u),l.forward(u)}else if(l.ins>=0&&(o.ins<0||a==o.i||o.off==0&&(l.len<o.len||l.len==o.len&&!t))){let u=l.len;for(vn(i,l.ins,-1);u;){let c=Math.min(o.len,u);o.ins>=0&&a<o.i&&o.len<=c&&(vn(i,0,o.ins),r&&Ei(r,i,o.text),a=o.i),o.forward(c),u-=c}l.next()}else if(o.ins>=0){let u=0,c=o.len;for(;c;)if(l.ins==-1){let d=Math.min(c,l.len);u+=d,c-=d,l.forward(d)}else if(l.ins==0&&l.len<c)c-=l.len,l.next();else break;vn(i,u,a<o.i?o.ins:0),r&&a<o.i&&Ei(r,i,o.text),a=o.i,o.forward(o.len-c)}else{if(o.done&&l.done)return r?Xt.createSet(i,r):Hs.create(i);throw new Error("Mismatched change set lengths")}}}function t1(n,e,t=!1){let s=[],i=t?[]:null,r=new Cl(n),o=new Cl(e);for(let l=!1;;){if(r.done&&o.done)return i?Xt.createSet(s,i):Hs.create(s);if(r.ins==0)vn(s,r.len,0,l),r.next();else if(o.len==0&&!o.done)vn(s,0,o.ins,l),i&&Ei(i,s,o.text),o.next();else{if(r.done||o.done)throw new Error("Mismatched change set lengths");{let a=Math.min(r.len2,o.len),u=s.length;if(r.ins==-1){let c=o.ins==-1?-1:o.off?0:o.ins;vn(s,a,c,l),i&&c&&Ei(i,s,o.text)}else o.ins==-1?(vn(s,r.off?0:r.len,a,l),i&&Ei(i,s,r.textBit(a))):(vn(s,r.off?0:r.len,o.off?0:o.ins,l),i&&!o.off&&Ei(i,s,o.text));l=(r.ins>a||o.ins>=0&&o.len>a)&&(l||s.length>u),r.forward2(a),o.forward(a)}}}}class Cl{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?ut.empty:e[t]}textBit(e){let{inserted:t}=this.set,s=this.i-2>>1;return s>=t.length&&!e?ut.empty:t[s].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class fr{constructor(e,t,s){this.from=e,this.to=t,this.flags=s}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let s,i;return this.empty?s=i=e.mapPos(this.from,t):(s=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),s==this.from&&i==this.to?this:new fr(s,i,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return fe.range(e,t);let s=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return fe.range(this.anchor,s)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return fe.range(e.anchor,e.head)}static create(e,t,s){return new fr(e,t,s)}}class fe{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:fe.create(this.ranges.map(s=>s.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let s=0;s<this.ranges.length;s++)if(!this.ranges[s].eq(e.ranges[s],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new fe([this.main],0)}addRange(e,t=!0){return fe.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let s=this.ranges.slice();return s[t]=e,fe.create(s,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new fe(e.ranges.map(t=>fr.fromJSON(t)),e.main)}static single(e,t=e){return new fe([fe.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let s=0,i=0;i<e.length;i++){let r=e[i];if(r.empty?r.from<=s:r.from<s)return fe.normalized(e.slice(),t);s=r.to}return new fe(e,t)}static cursor(e,t=0,s,i){return fr.create(e,e,(t==0?0:t<0?8:16)|(s==null?7:Math.min(6,s))|(i??16777215)<<6)}static range(e,t,s,i){let r=(s??16777215)<<6|(i==null?7:Math.min(6,i));return t<e?fr.create(t,e,48|r):fr.create(e,t,(t>e?8:0)|r)}static normalized(e,t=0){let s=e[t];e.sort((i,r)=>i.from-r.from),t=e.indexOf(s);for(let i=1;i<e.length;i++){let r=e[i],o=e[i-1];if(r.empty?r.from<=o.to:r.from<o.to){let l=o.from,a=Math.max(r.to,o.to);i<=t&&t--,e.splice(--i,2,r.anchor>r.head?fe.range(a,l):fe.range(l,a))}}return new fe(e,t)}}function n1(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let Jh=0;class Ie{constructor(e,t,s,i,r){this.combine=e,this.compareInput=t,this.compare=s,this.isStatic=i,this.id=Jh++,this.default=e([]),this.extensions=typeof r=="function"?r(this):r}get reader(){return this}static define(e={}){return new Ie(e.combine||(t=>t),e.compareInput||((t,s)=>t===s),e.compare||(e.combine?(t,s)=>t===s:Qh),!!e.static,e.enables)}of(e){return new su([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new su(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new su(e,this,2,t)}from(e,t){return t||(t=s=>s),this.compute([e],s=>t(s.field(e)))}}function Qh(n,e){return n==e||n.length==e.length&&n.every((t,s)=>t===e[s])}class su{constructor(e,t,s,i){this.dependencies=e,this.facet=t,this.type=s,this.value=i,this.id=Jh++}dynamicSlot(e){var t;let s=this.value,i=this.facet.compareInput,r=this.id,o=e[r]>>1,l=this.type==2,a=!1,u=!1,c=[];for(let d of this.dependencies)d=="doc"?a=!0:d=="selection"?u=!0:(((t=e[d.id])!==null&&t!==void 0?t:1)&1)==0&&c.push(e[d.id]);return{create(d){return d.values[o]=s(d),1},update(d,f){if(a&&f.docChanged||u&&(f.docChanged||f.selection)||_f(d,c)){let p=s(d);if(l?!Gg(p,d.values[o],i):!i(p,d.values[o]))return d.values[o]=p,1}return 0},reconfigure:(d,f)=>{let p,g=f.config.address[r];if(g!=null){let k=Lu(f,g);if(this.dependencies.every(x=>x instanceof Ie?f.facet(x)===d.facet(x):x instanceof hn?f.field(x,!1)==d.field(x,!1):!0)||(l?Gg(p=s(d),k,i):i(p=s(d),k)))return d.values[o]=k,0}else p=s(d);return d.values[o]=p,1}}}}function Gg(n,e,t){if(n.length!=e.length)return!1;for(let s=0;s<n.length;s++)if(!t(n[s],e[s]))return!1;return!0}function _f(n,e){let t=!1;for(let s of e)rl(n,s)&1&&(t=!0);return t}function oP(n,e,t){let s=t.map(a=>n[a.id]),i=t.map(a=>a.type),r=s.filter(a=>!(a&1)),o=n[e.id]>>1;function l(a){let u=[];for(let c=0;c<s.length;c++){let d=Lu(a,s[c]);if(i[c]==2)for(let f of d)u.push(f);else u.push(d)}return e.combine(u)}return{create(a){for(let u of s)rl(a,u);return a.values[o]=l(a),1},update(a,u){if(!_f(a,r))return 0;let c=l(a);return e.compare(c,a.values[o])?0:(a.values[o]=c,1)},reconfigure(a,u){let c=_f(a,s),d=u.config.facets[e.id],f=u.facet(e);if(d&&!c&&Qh(t,d))return a.values[o]=f,0;let p=l(a);return e.compare(p,f)?(a.values[o]=f,0):(a.values[o]=p,1)}}}const Aa=Ie.define({static:!0});class hn{constructor(e,t,s,i,r){this.id=e,this.createF=t,this.updateF=s,this.compareF=i,this.spec=r,this.provides=void 0}static define(e){let t=new hn(Jh++,e.create,e.update,e.compare||((s,i)=>s===i),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(Aa).find(s=>s.field==this);return(t?.create||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:s=>(s.values[t]=this.create(s),1),update:(s,i)=>{let r=s.values[t],o=this.updateF(r,i);return this.compareF(r,o)?0:(s.values[t]=o,1)},reconfigure:(s,i)=>{let r=s.facet(Aa),o=i.facet(Aa),l;return(l=r.find(a=>a.field==this))&&l!=o.find(a=>a.field==this)?(s.values[t]=l.create(s),1):i.config.address[this.id]!=null?(s.values[t]=i.field(this),0):(s.values[t]=this.create(s),1)}}}init(e){return[this,Aa.of({field:this,create:e})]}get extension(){return this}}const lr={lowest:4,low:3,default:2,high:1,highest:0};function jo(n){return e=>new s1(e,n)}const Dr={highest:jo(lr.highest),high:jo(lr.high),default:jo(lr.default),low:jo(lr.low),lowest:jo(lr.lowest)};class s1{constructor(e,t){this.inner=e,this.prec=t}}class xc{of(e){return new wf(this,e)}reconfigure(e){return xc.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class wf{constructor(e,t){this.compartment=e,this.inner=t}}class Ou{constructor(e,t,s,i,r,o){for(this.base=e,this.compartments=t,this.dynamicSlots=s,this.address=i,this.staticValues=r,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<s.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,s){let i=[],r=Object.create(null),o=new Map;for(let f of lP(e,t,o))f instanceof hn?i.push(f):(r[f.facet.id]||(r[f.facet.id]=[])).push(f);let l=Object.create(null),a=[],u=[];for(let f of i)l[f.id]=u.length<<1,u.push(p=>f.slot(p));let c=s?.config.facets;for(let f in r){let p=r[f],g=p[0].facet,k=c&&c[f]||[];if(p.every(x=>x.type==0))if(l[g.id]=a.length<<1|1,Qh(k,p))a.push(s.facet(g));else{let x=g.combine(p.map(m=>m.value));a.push(s&&g.compare(x,s.facet(g))?s.facet(g):x)}else{for(let x of p)x.type==0?(l[x.id]=a.length<<1|1,a.push(x.value)):(l[x.id]=u.length<<1,u.push(m=>x.dynamicSlot(m)));l[g.id]=u.length<<1,u.push(x=>oP(x,g,p))}}let d=u.map(f=>f(l));return new Ou(e,o,d,l,a,r)}}function lP(n,e,t){let s=[[],[],[],[],[]],i=new Map;function r(o,l){let a=i.get(o);if(a!=null){if(a<=l)return;let u=s[a].indexOf(o);u>-1&&s[a].splice(u,1),o instanceof wf&&t.delete(o.compartment)}if(i.set(o,l),Array.isArray(o))for(let u of o)r(u,l);else if(o instanceof wf){if(t.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(o.compartment)||o.inner;t.set(o.compartment,u),r(u,l)}else if(o instanceof s1)r(o.inner,o.prec);else if(o instanceof hn)s[l].push(o),o.provides&&r(o.provides,l);else if(o instanceof su)s[l].push(o),o.facet.extensions&&r(o.facet.extensions,lr.default);else{let u=o.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);r(u,l)}}return r(n,lr.default),s.reduce((o,l)=>o.concat(l))}function rl(n,e){if(e&1)return 2;let t=e>>1,s=n.status[t];if(s==4)throw new Error("Cyclic dependency between fields and/or facets");if(s&2)return s;n.status[t]=4;let i=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|i}function Lu(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const i1=Ie.define(),Sf=Ie.define({combine:n=>n.some(e=>e),static:!0}),r1=Ie.define({combine:n=>n.length?n[0]:void 0,static:!0}),o1=Ie.define(),l1=Ie.define(),a1=Ie.define(),u1=Ie.define({combine:n=>n.length?n[0]:!1});class hi{constructor(e,t){this.type=e,this.value=t}static define(){return new aP}}class aP{of(e){return new hi(this,e)}}class uP{constructor(e){this.map=e}of(e){return new et(this,e)}}class et{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new et(this.type,t)}is(e){return this.type==e}static define(e={}){return new uP(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let s=[];for(let i of e){let r=i.map(t);r&&s.push(r)}return s}}et.reconfigure=et.define();et.appendConfig=et.define();class Zt{constructor(e,t,s,i,r,o){this.startState=e,this.changes=t,this.selection=s,this.effects=i,this.annotations=r,this.scrollIntoView=o,this._doc=null,this._state=null,s&&n1(s,t.newLength),r.some(l=>l.type==Zt.time)||(this.annotations=r.concat(Zt.time.of(Date.now())))}static create(e,t,s,i,r,o){return new Zt(e,t,s,i,r,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Zt.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}Zt.time=hi.define();Zt.userEvent=hi.define();Zt.addToHistory=hi.define();Zt.remote=hi.define();function cP(n,e){let t=[];for(let s=0,i=0;;){let r,o;if(s<n.length&&(i==e.length||e[i]>=n[s]))r=n[s++],o=n[s++];else if(i<e.length)r=e[i++],o=e[i++];else return t;!t.length||t[t.length-1]<r?t.push(r,o):t[t.length-1]<o&&(t[t.length-1]=o)}}function c1(n,e,t){var s;let i,r,o;return t?(i=e.changes,r=Xt.empty(e.changes.length),o=n.changes.compose(e.changes)):(i=e.changes.map(n.changes),r=n.changes.mapDesc(e.changes,!0),o=n.changes.compose(i)),{changes:o,selection:e.selection?e.selection.map(r):(s=n.selection)===null||s===void 0?void 0:s.map(i),effects:et.mapEffects(n.effects,i).concat(et.mapEffects(e.effects,r)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function Cf(n,e,t){let s=e.selection,i=to(e.annotations);return e.userEvent&&(i=i.concat(Zt.userEvent.of(e.userEvent))),{changes:e.changes instanceof Xt?e.changes:Xt.of(e.changes||[],t,n.facet(r1)),selection:s&&(s instanceof fe?s:fe.single(s.anchor,s.head)),effects:to(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function d1(n,e,t){let s=Cf(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let r=1;r<e.length;r++){e[r].filter===!1&&(t=!1);let o=!!e[r].sequential;s=c1(s,Cf(n,e[r],o?s.changes.newLength:n.doc.length),o)}let i=Zt.create(n,s.changes,s.selection,s.effects,s.annotations,s.scrollIntoView);return fP(t?dP(i):i)}function dP(n){let e=n.startState,t=!0;for(let i of e.facet(o1)){let r=i(n);if(r===!1){t=!1;break}Array.isArray(r)&&(t=t===!0?r:cP(t,r))}if(t!==!0){let i,r;if(t===!1)r=n.changes.invertedDesc,i=Xt.empty(e.doc.length);else{let o=n.changes.filter(t);i=o.changes,r=o.filtered.mapDesc(o.changes).invertedDesc}n=Zt.create(e,i,n.selection&&n.selection.map(r),et.mapEffects(n.effects,r),n.annotations,n.scrollIntoView)}let s=e.facet(l1);for(let i=s.length-1;i>=0;i--){let r=s[i](n);r instanceof Zt?n=r:Array.isArray(r)&&r.length==1&&r[0]instanceof Zt?n=r[0]:n=d1(e,to(r),!1)}return n}function fP(n){let e=n.startState,t=e.facet(a1),s=n;for(let i=t.length-1;i>=0;i--){let r=t[i](n);r&&Object.keys(r).length&&(s=c1(s,Cf(e,r,n.changes.newLength),!0))}return s==n?n:Zt.create(e,n.changes,n.selection,s.effects,s.annotations,s.scrollIntoView)}const hP=[];function to(n){return n==null?hP:Array.isArray(n)?n:[n]}var Ot=(function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n})(Ot||(Ot={}));const pP=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Af;try{Af=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function mP(n){if(Af)return Af.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||pP.test(t)))return!0}return!1}function gP(n){return e=>{if(!/\S/.test(e))return Ot.Space;if(mP(e))return Ot.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return Ot.Word;return Ot.Other}}class lt{constructor(e,t,s,i,r,o){this.config=e,this.doc=t,this.selection=s,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=r,o&&(o._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)rl(this,l<<1);this.computeSlot=null}field(e,t=!0){let s=this.config.address[e.id];if(s==null){if(t)throw new RangeError("Field is not present in this state");return}return rl(this,s),Lu(this,s)}update(...e){return d1(this,e,!0)}applyTransaction(e){let t=this.config,{base:s,compartments:i}=t;for(let l of e.effects)l.is(xc.reconfigure)?(t&&(i=new Map,t.compartments.forEach((a,u)=>i.set(u,a)),t=null),i.set(l.value.compartment,l.value.extension)):l.is(et.reconfigure)?(t=null,s=l.value):l.is(et.appendConfig)&&(t=null,s=to(s).concat(l.value));let r;t?r=e.startState.values.slice():(t=Ou.resolve(s,i,this),r=new lt(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(a,u)=>u.reconfigure(a,this),null).values);let o=e.startState.facet(Sf)?e.newSelection:e.newSelection.asSingle();new lt(t,e.newDoc,o,r,(l,a)=>a.update(l,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:fe.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,s=e(t.ranges[0]),i=this.changes(s.changes),r=[s.range],o=to(s.effects);for(let l=1;l<t.ranges.length;l++){let a=e(t.ranges[l]),u=this.changes(a.changes),c=u.map(i);for(let f=0;f<l;f++)r[f]=r[f].map(c);let d=i.mapDesc(u,!0);r.push(a.range.map(d)),i=i.compose(c),o=et.mapEffects(o,c).concat(et.mapEffects(to(a.effects),d))}return{changes:i,selection:fe.create(r,t.mainIndex),effects:o}}changes(e=[]){return e instanceof Xt?e:Xt.of(e,this.doc.length,this.facet(lt.lineSeparator))}toText(e){return ut.of(e.split(this.facet(lt.lineSeparator)||bf))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(rl(this,t),Lu(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let s in e){let i=e[s];i instanceof hn&&this.config.address[i.id]!=null&&(t[s]=i.spec.toJSON(this.field(e[s]),this))}return t}static fromJSON(e,t={},s){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(s){for(let r in s)if(Object.prototype.hasOwnProperty.call(e,r)){let o=s[r],l=e[r];i.push(o.init(a=>o.spec.fromJSON(l,a)))}}return lt.create({doc:e.doc,selection:fe.fromJSON(e.selection),extensions:t.extensions?i.concat([t.extensions]):i})}static create(e={}){let t=Ou.resolve(e.extensions||[],new Map),s=e.doc instanceof ut?e.doc:ut.of((e.doc||"").split(t.staticFacet(lt.lineSeparator)||bf)),i=e.selection?e.selection instanceof fe?e.selection:fe.single(e.selection.anchor,e.selection.head):fe.single(0);return n1(i,s.length),t.staticFacet(Sf)||(i=i.asSingle()),new lt(t,s,i,t.dynamicSlots.map(()=>null),(r,o)=>o.create(r),null)}get tabSize(){return this.facet(lt.tabSize)}get lineBreak(){return this.facet(lt.lineSeparator)||`
`}get readOnly(){return this.facet(u1)}phrase(e,...t){for(let s of this.facet(lt.phrases))if(Object.prototype.hasOwnProperty.call(s,e)){e=s[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(s,i)=>{if(i=="$")return"$";let r=+(i||1);return!r||r>t.length?s:t[r-1]})),e}languageDataAt(e,t,s=-1){let i=[];for(let r of this.facet(i1))for(let o of r(this,t,s))Object.prototype.hasOwnProperty.call(o,e)&&i.push(o[e]);return i}charCategorizer(e){return gP(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:s,length:i}=this.doc.lineAt(e),r=this.charCategorizer(e),o=e-s,l=e-s;for(;o>0;){let a=fn(t,o,!1);if(r(t.slice(a,o))!=Ot.Word)break;o=a}for(;l<i;){let a=fn(t,l);if(r(t.slice(l,a))!=Ot.Word)break;l=a}return o==l?null:fe.range(o+s,l+s)}}lt.allowMultipleSelections=Sf;lt.tabSize=Ie.define({combine:n=>n.length?n[0]:4});lt.lineSeparator=r1;lt.readOnly=u1;lt.phrases=Ie.define({compare(n,e){let t=Object.keys(n),s=Object.keys(e);return t.length==s.length&&t.every(i=>n[i]==e[i])}});lt.languageData=i1;lt.changeFilter=o1;lt.transactionFilter=l1;lt.transactionExtender=a1;xc.reconfigure=et.define();function qs(n,e,t={}){let s={};for(let i of n)for(let r of Object.keys(i)){let o=i[r],l=s[r];if(l===void 0)s[r]=o;else if(!(l===o||o===void 0))if(Object.hasOwnProperty.call(t,r))s[r]=t[r](l,o);else throw new Error("Config merge conflict for field "+r)}for(let i in e)s[i]===void 0&&(s[i]=e[i]);return s}class xr{eq(e){return this==e}range(e,t=e){return Ef.create(e,t,this)}}xr.prototype.startSide=xr.prototype.endSide=0;xr.prototype.point=!1;xr.prototype.mapMode=Ln.TrackDel;let Ef=class f1{constructor(e,t,s){this.from=e,this.to=t,this.value=s}static create(e,t,s){return new f1(e,t,s)}};function Tf(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class Yh{constructor(e,t,s,i){this.from=e,this.to=t,this.value=s,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,t,s,i=0){let r=s?this.to:this.from;for(let o=i,l=r.length;;){if(o==l)return o;let a=o+l>>1,u=r[a]-e||(s?this.value[a].endSide:this.value[a].startSide)-t;if(a==o)return u>=0?o:l;u>=0?l=a:o=a+1}}between(e,t,s,i){for(let r=this.findIndex(t,-1e9,!0),o=this.findIndex(s,1e9,!1,r);r<o;r++)if(i(this.from[r]+e,this.to[r]+e,this.value[r])===!1)return!1}map(e,t){let s=[],i=[],r=[],o=-1,l=-1;for(let a=0;a<this.value.length;a++){let u=this.value[a],c=this.from[a]+e,d=this.to[a]+e,f,p;if(c==d){let g=t.mapPos(c,u.startSide,u.mapMode);if(g==null||(f=p=g,u.startSide!=u.endSide&&(p=t.mapPos(c,u.endSide),p<f)))continue}else if(f=t.mapPos(c,u.startSide),p=t.mapPos(d,u.endSide),f>p||f==p&&u.startSide>0&&u.endSide<=0)continue;(p-f||u.endSide-u.startSide)<0||(o<0&&(o=f),u.point&&(l=Math.max(l,p-f)),s.push(u),i.push(f-o),r.push(p-o))}return{mapped:s.length?new Yh(i,r,s,l):null,pos:o}}}class at{constructor(e,t,s,i){this.chunkPos=e,this.chunk=t,this.nextLayer=s,this.maxPoint=i}static create(e,t,s,i){return new at(e,t,s,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:s=!1,filterFrom:i=0,filterTo:r=this.length}=e,o=e.filter;if(t.length==0&&!o)return this;if(s&&(t=t.slice().sort(Tf)),this.isEmpty)return t.length?at.of(t):this;let l=new h1(this,null,-1).goto(0),a=0,u=[],c=new ui;for(;l.value||a<t.length;)if(a<t.length&&(l.from-t[a].from||l.startSide-t[a].value.startSide)>=0){let d=t[a++];c.addInner(d.from,d.to,d.value)||u.push(d)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(a==t.length||this.chunkEnd(l.chunkIndex)<t[a].from)&&(!o||i>this.chunkEnd(l.chunkIndex)||r<this.chunkPos[l.chunkIndex])&&c.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!o||i>l.to||r<l.from||o(l.from,l.to,l.value))&&(c.addInner(l.from,l.to,l.value)||u.push(Ef.create(l.from,l.to,l.value))),l.next());return c.finishInner(this.nextLayer.isEmpty&&!u.length?at.empty:this.nextLayer.update({add:u,filter:o,filterFrom:i,filterTo:r}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],s=[],i=-1;for(let o=0;o<this.chunk.length;o++){let l=this.chunkPos[o],a=this.chunk[o],u=e.touchesRange(l,l+a.length);if(u===!1)i=Math.max(i,a.maxPoint),t.push(a),s.push(e.mapPos(l));else if(u===!0){let{mapped:c,pos:d}=a.map(l,e);c&&(i=Math.max(i,c.maxPoint),t.push(c),s.push(d))}}let r=this.nextLayer.map(e);return t.length==0?r:new at(s,t,r||at.empty,i)}between(e,t,s){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let r=this.chunkPos[i],o=this.chunk[i];if(t>=r&&e<=r+o.length&&o.between(r,e-r,t-r,s)===!1)return}this.nextLayer.between(e,t,s)}}iter(e=0){return Al.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return Al.from(e).goto(t)}static compare(e,t,s,i,r=-1){let o=e.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=r),l=t.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=r),a=Kg(o,l,s),u=new Vo(o,a,r),c=new Vo(l,a,r);s.iterGaps((d,f,p)=>Jg(u,d,c,f,p,i)),s.empty&&s.length==0&&Jg(u,0,c,0,0,i)}static eq(e,t,s=0,i){i==null&&(i=999999999);let r=e.filter(c=>!c.isEmpty&&t.indexOf(c)<0),o=t.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(r.length!=o.length)return!1;if(!r.length)return!0;let l=Kg(r,o),a=new Vo(r,l,0).goto(s),u=new Vo(o,l,0).goto(s);for(;;){if(a.to!=u.to||!Df(a.active,u.active)||a.point&&(!u.point||!a.point.eq(u.point)))return!1;if(a.to>i)return!0;a.next(),u.next()}}static spans(e,t,s,i,r=-1){let o=new Vo(e,null,r).goto(t),l=t,a=o.openStart;for(;;){let u=Math.min(o.to,s);if(o.point){let c=o.activeForPoint(o.to),d=o.pointFrom<t?c.length+1:o.point.startSide<0?c.length:Math.min(c.length,a);i.point(l,u,o.point,c,d,o.pointRank),a=Math.min(o.openEnd(u),c.length)}else u>l&&(i.span(l,u,o.active,a),a=o.openEnd(u));if(o.to>s)return a+(o.point&&o.to>s?1:0);l=o.to,o.next()}}static of(e,t=!1){let s=new ui;for(let i of e instanceof Ef?[e]:t?vP(e):e)s.add(i.from,i.to,i.value);return s.finish()}static join(e){if(!e.length)return at.empty;let t=e[e.length-1];for(let s=e.length-2;s>=0;s--)for(let i=e[s];i!=at.empty;i=i.nextLayer)t=new at(i.chunkPos,i.chunk,t,Math.max(i.maxPoint,t.maxPoint));return t}}at.empty=new at([],[],null,-1);function vP(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let s=n[t];if(Tf(e,s)>0)return n.slice().sort(Tf);e=s}return n}at.empty.nextLayer=at.empty;class ui{finishChunk(e){this.chunks.push(new Yh(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,s){this.addInner(e,t,s)||(this.nextLayer||(this.nextLayer=new ui)).add(e,t,s)}addInner(e,t,s){let i=e-this.lastTo||s.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||s.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=s,this.lastFrom=e,this.lastTo=t,this.value.push(s),s.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let s=t.value.length-1;return this.last=t.value[s],this.lastFrom=t.from[s]+e,this.lastTo=t.to[s]+e,!0}finish(){return this.finishInner(at.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=at.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function Kg(n,e,t){let s=new Map;for(let r of n)for(let o=0;o<r.chunk.length;o++)r.chunk[o].maxPoint<=0&&s.set(r.chunk[o],r.chunkPos[o]);let i=new Set;for(let r of e)for(let o=0;o<r.chunk.length;o++){let l=s.get(r.chunk[o]);l!=null&&(t?t.mapPos(l):l)==r.chunkPos[o]&&!t?.touchesRange(l,l+r.chunk[o].length)&&i.add(r.chunk[o])}return i}class h1{constructor(e,t,s,i=0){this.layer=e,this.skip=t,this.minPoint=s,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,s){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,s=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!s||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],s=e+t.from[this.rangeIndex];if(this.from=s,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Al{constructor(e){this.heap=e}static from(e,t=null,s=-1){let i=[];for(let r=0;r<e.length;r++)for(let o=e[r];!o.isEmpty;o=o.nextLayer)o.maxPoint>=s&&i.push(new h1(o,t,s,r));return i.length==1?i[0]:new Al(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let s of this.heap)s.goto(e,t);for(let s=this.heap.length>>1;s>=0;s--)fd(this.heap,s);return this.next(),this}forward(e,t){for(let s of this.heap)s.forward(e,t);for(let s=this.heap.length>>1;s>=0;s--)fd(this.heap,s);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),fd(this.heap,0)}}}function fd(n,e){for(let t=n[e];;){let s=(e<<1)+1;if(s>=n.length)break;let i=n[s];if(s+1<n.length&&i.compare(n[s+1])>=0&&(i=n[s+1],s++),t.compare(i)<0)break;n[s]=t,n[e]=i,e=s}}class Vo{constructor(e,t,s){this.minPoint=s,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Al.from(e,t,s)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){Ea(this.active,e),Ea(this.activeTo,e),Ea(this.activeRank,e),this.minActive=Qg(this.active,this.activeTo)}addActive(e){let t=0,{value:s,to:i,rank:r}=this.cursor;for(;t<this.activeRank.length&&(r-this.activeRank[t]||i-this.activeTo[t])>0;)t++;Ta(this.active,t,s),Ta(this.activeTo,t,i),Ta(this.activeRank,t,r),e&&Ta(e,t,this.cursor.from),this.minActive=Qg(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let s=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),s&&Ea(s,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let r=this.cursor.value;if(!r.point)this.addActive(s),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=r,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=r.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(s){this.openStart=0;for(let i=s.length-1;i>=0&&s[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let s=this.active.length-1;s>=0&&!(this.activeRank[s]<this.pointRank);s--)(this.activeTo[s]>e||this.activeTo[s]==e&&this.active[s].endSide>=this.point.endSide)&&t.push(this.active[s]);return t.reverse()}openEnd(e){let t=0;for(let s=this.activeTo.length-1;s>=0&&this.activeTo[s]>e;s--)t++;return t}}function Jg(n,e,t,s,i,r){n.goto(e),t.goto(s);let o=s+i,l=s,a=s-e;for(;;){let u=n.to+a-t.to,c=u||n.endSide-t.endSide,d=c<0?n.to+a:t.to,f=Math.min(d,o);if(n.point||t.point?n.point&&t.point&&(n.point==t.point||n.point.eq(t.point))&&Df(n.activeForPoint(n.to),t.activeForPoint(t.to))||r.comparePoint(l,f,n.point,t.point):f>l&&!Df(n.active,t.active)&&r.compareRange(l,f,n.active,t.active),d>o)break;(u||n.openEnd!=t.openEnd)&&r.boundChange&&r.boundChange(d),l=d,c<=0&&n.next(),c>=0&&t.next()}}function Df(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!n[t].eq(e[t]))return!1;return!0}function Ea(n,e){for(let t=e,s=n.length-1;t<s;t++)n[t]=n[t+1];n.pop()}function Ta(n,e,t){for(let s=n.length-1;s>=e;s--)n[s+1]=n[s];n[e]=t}function Qg(n,e){let t=-1,s=1e9;for(let i=0;i<e.length;i++)(e[i]-s||n[i].endSide-n[t].endSide)<0&&(t=i,s=e[i]);return t}function Eo(n,e,t=n.length){let s=0;for(let i=0;i<t&&i<n.length;)n.charCodeAt(i)==9?(s+=e-s%e,i++):(s++,i=fn(n,i));return s}function Pf(n,e,t,s){for(let i=0,r=0;;){if(r>=e)return i;if(i==n.length)break;r+=n.charCodeAt(i)==9?t-r%t:1,i=fn(n,i)}return s===!0?-1:n.length}const Rf="",Yg=typeof Symbol>"u"?"__"+Rf:Symbol.for(Rf),Of=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Xg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Vi{constructor(e,t){this.rules=[];let{finish:s}=t||{};function i(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function r(o,l,a,u){let c=[],d=/^@(\w+)\b/.exec(o[0]),f=d&&d[1]=="keyframes";if(d&&l==null)return a.push(o[0]+";");for(let p in l){let g=l[p];if(/&/.test(p))r(p.split(/,\s*/).map(k=>o.map(x=>k.replace(/&/,x))).reduce((k,x)=>k.concat(x)),g,a);else if(g&&typeof g=="object"){if(!d)throw new RangeError("The value of a property ("+p+") should be a primitive value.");r(i(p),g,c,f)}else g!=null&&c.push(p.replace(/_.*/,"").replace(/[A-Z]/g,k=>"-"+k.toLowerCase())+": "+g+";")}(c.length||f)&&a.push((s&&!d&&!u?o.map(s):o).join(", ")+" {"+c.join(" ")+"}")}for(let o in e)r(i(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=Xg[Yg]||1;return Xg[Yg]=e+1,Rf+e.toString(36)}static mount(e,t,s){let i=e[Of],r=s&&s.nonce;i?r&&i.setNonce(r):i=new yP(e,r),i.mount(Array.isArray(t)?t:[t],e)}}let Zg=new Map;class yP{constructor(e,t){let s=e.ownerDocument||e,i=s.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let r=Zg.get(s);if(r)return e[Of]=r;this.sheet=new i.CSSStyleSheet,Zg.set(s,this)}else this.styleTag=s.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[Of]=this}mount(e,t){let s=this.sheet,i=0,r=0;for(let o=0;o<e.length;o++){let l=e[o],a=this.modules.indexOf(l);if(a<r&&a>-1&&(this.modules.splice(a,1),r--,a=-1),a==-1){if(this.modules.splice(r++,0,l),s)for(let u=0;u<l.rules.length;u++)s.insertRule(l.rules[u],i++)}else{for(;r<a;)i+=this.modules[r++].rules.length;i+=l.rules.length,r++}}if(s)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let o="";for(let a=0;a<this.modules.length;a++)o+=this.modules[a].getRules()+`
`;this.styleTag.textContent=o;let l=t.head||t;this.styleTag.parentNode!=l&&l.insertBefore(this.styleTag,l.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var $i={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},El={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},bP=typeof navigator<"u"&&/Mac/.test(navigator.platform),kP=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var un=0;un<10;un++)$i[48+un]=$i[96+un]=String(un);for(var un=1;un<=24;un++)$i[un+111]="F"+un;for(var un=65;un<=90;un++)$i[un]=String.fromCharCode(un+32),El[un]=String.fromCharCode(un);for(var hd in $i)El.hasOwnProperty(hd)||(El[hd]=$i[hd]);function xP(n){var e=bP&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||kP&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?El:$i)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function xt(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var i=t[s];typeof i=="string"?n.setAttribute(s,i):i!=null&&(n[s]=i)}e++}for(;e<arguments.length;e++)p1(n,arguments[e]);return n}function p1(n,e){if(typeof e=="string")n.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)n.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)p1(n,e[t]);else throw new RangeError("Unsupported child node: "+e)}let Rn=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Lf=typeof document<"u"?document:{documentElement:{style:{}}};const Mf=/Edge\/(\d+)/.exec(Rn.userAgent),m1=/MSIE \d/.test(Rn.userAgent),If=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Rn.userAgent),_c=!!(m1||If||Mf),e0=!_c&&/gecko\/(\d+)/i.test(Rn.userAgent),pd=!_c&&/Chrome\/(\d+)/.exec(Rn.userAgent),_P="webkitFontSmoothing"in Lf.documentElement.style,jf=!_c&&/Apple Computer/.test(Rn.vendor),t0=jf&&(/Mobile\/\w+/.test(Rn.userAgent)||Rn.maxTouchPoints>2);var Re={mac:t0||/Mac/.test(Rn.platform),windows:/Win/.test(Rn.platform),linux:/Linux|X11/.test(Rn.platform),ie:_c,ie_version:m1?Lf.documentMode||6:If?+If[1]:Mf?+Mf[1]:0,gecko:e0,gecko_version:e0?+(/Firefox\/(\d+)/.exec(Rn.userAgent)||[0,0])[1]:0,chrome:!!pd,chrome_version:pd?+pd[1]:0,ios:t0,android:/Android\b/.test(Rn.userAgent),webkit_version:_P?+(/\bAppleWebKit\/(\d+)/.exec(Rn.userAgent)||[0,0])[1]:0,safari:jf,safari_version:jf?+(/\bVersion\/(\d+(\.\d+)?)/.exec(Rn.userAgent)||[0,0])[1]:0,tabSize:Lf.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function Tl(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function Vf(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function iu(n,e){if(!e.anchorNode)return!1;try{return Vf(n,e.anchorNode)}catch{return!1}}function Dl(n){return n.nodeType==3?wr(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function ol(n,e,t,s){return t?n0(n,e,t,s,-1)||n0(n,e,t,s,1):!1}function _r(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function Mu(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}function n0(n,e,t,s,i){for(;;){if(n==t&&e==s)return!0;if(e==(i<0?0:Ws(n))){if(n.nodeName=="DIV")return!1;let r=n.parentNode;if(!r||r.nodeType!=1)return!1;e=_r(n)+(i<0?0:1),n=r}else if(n.nodeType==1){if(n=n.childNodes[e+(i<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=i<0?Ws(n):0}else return!1}}function Ws(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function wc(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function wP(n){let e=n.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function g1(n,e){let t=e.width/n.offsetWidth,s=e.height/n.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-n.offsetWidth)<1)&&(t=1),(s>.995&&s<1.005||!isFinite(s)||Math.abs(e.height-n.offsetHeight)<1)&&(s=1),{scaleX:t,scaleY:s}}function SP(n,e,t,s,i,r,o,l){let a=n.ownerDocument,u=a.defaultView||window;for(let c=n,d=!1;c&&!d;)if(c.nodeType==1){let f,p=c==a.body,g=1,k=1;if(p)f=wP(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(d=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let _=c.getBoundingClientRect();({scaleX:g,scaleY:k}=g1(c,_)),f={left:_.left,right:_.left+c.clientWidth*g,top:_.top,bottom:_.top+c.clientHeight*k}}let x=0,m=0;if(i=="nearest")e.top<f.top?(m=e.top-(f.top+o),t>0&&e.bottom>f.bottom+m&&(m=e.bottom-f.bottom+o)):e.bottom>f.bottom&&(m=e.bottom-f.bottom+o,t<0&&e.top-m<f.top&&(m=e.top-(f.top+o)));else{let _=e.bottom-e.top,R=f.bottom-f.top;m=(i=="center"&&_<=R?e.top+_/2-R/2:i=="start"||i=="center"&&t<0?e.top-o:e.bottom-R+o)-f.top}if(s=="nearest"?e.left<f.left?(x=e.left-(f.left+r),t>0&&e.right>f.right+x&&(x=e.right-f.right+r)):e.right>f.right&&(x=e.right-f.right+r,t<0&&e.left<f.left+x&&(x=e.left-(f.left+r))):x=(s=="center"?e.left+(e.right-e.left)/2-(f.right-f.left)/2:s=="start"==l?e.left-r:e.right-(f.right-f.left)+r)-f.left,x||m)if(p)u.scrollBy(x,m);else{let _=0,R=0;if(m){let U=c.scrollTop;c.scrollTop+=m/k,R=(c.scrollTop-U)*k}if(x){let U=c.scrollLeft;c.scrollLeft+=x/g,_=(c.scrollLeft-U)*g}e={left:e.left-_,top:e.top-R,right:e.right-_,bottom:e.bottom-R},_&&Math.abs(_-x)<1&&(s="nearest"),R&&Math.abs(R-m)<1&&(i="nearest")}if(p)break;(e.top<f.top||e.bottom>f.bottom||e.left<f.left||e.right>f.right)&&(e={left:Math.max(e.left,f.left),right:Math.min(e.right,f.right),top:Math.max(e.top,f.top),bottom:Math.min(e.bottom,f.bottom)}),c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function CP(n){let e=n.ownerDocument,t,s;for(let i=n.parentNode;i&&!(i==e.body||t&&s);)if(i.nodeType==1)!s&&i.scrollHeight>i.clientHeight&&(s=i),!t&&i.scrollWidth>i.clientWidth&&(t=i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;return{x:t,y:s}}class AP{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:s}=e;this.set(t,Math.min(e.anchorOffset,t?Ws(t):0),s,Math.min(e.focusOffset,s?Ws(s):0))}set(e,t,s,i){this.anchorNode=e,this.anchorOffset=t,this.focusNode=s,this.focusOffset=i}}let rr=null;Re.safari&&Re.safari_version>=26&&(rr=!1);function v1(n){if(n.setActive)return n.setActive();if(rr)return n.focus(rr);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(rr==null?{get preventScroll(){return rr={preventScroll:!0},!0}}:void 0),!rr){rr=!1;for(let t=0;t<e.length;){let s=e[t++],i=e[t++],r=e[t++];s.scrollTop!=i&&(s.scrollTop=i),s.scrollLeft!=r&&(s.scrollLeft=r)}}}let s0;function wr(n,e,t=e){let s=s0||(s0=document.createRange());return s.setEnd(n,t),s.setStart(n,e),s}function no(n,e,t,s){let i={key:e,code:e,keyCode:t,which:t,cancelable:!0};s&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=s);let r=new KeyboardEvent("keydown",i);r.synthetic=!0,n.dispatchEvent(r);let o=new KeyboardEvent("keyup",i);return o.synthetic=!0,n.dispatchEvent(o),r.defaultPrevented||o.defaultPrevented}function EP(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function y1(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}function TP(n,e){let t=e.focusNode,s=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=s)return!1;for(s=Math.min(s,Ws(t));;)if(s){if(t.nodeType!=1)return!1;let i=t.childNodes[s-1];i.contentEditable=="false"?s--:(t=i,s=Ws(t))}else{if(t==n)return!0;s=_r(t),t=t.parentNode}}function b1(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}function k1(n,e){for(let t=n,s=e;;){if(t.nodeType==3&&s>0)return{node:t,offset:s};if(t.nodeType==1&&s>0){if(t.contentEditable=="false")return null;t=t.childNodes[s-1],s=Ws(t)}else if(t.parentNode&&!Mu(t))s=_r(t),t=t.parentNode;else return null}}function x1(n,e){for(let t=n,s=e;;){if(t.nodeType==3&&s<t.nodeValue.length)return{node:t,offset:s};if(t.nodeType==1&&s<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[s],s=0}else if(t.parentNode&&!Mu(t))s=_r(t)+1,t=t.parentNode;else return null}}class wn{constructor(e,t,s=!0){this.node=e,this.offset=t,this.precise=s}static before(e,t){return new wn(e.parentNode,_r(e),t)}static after(e,t){return new wn(e.parentNode,_r(e)+1,t)}}const Xh=[];class bt{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let s of this.children){if(s==e)return t;t+=s.length+s.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let s=this.dom,i=null,r;for(let o of this.children){if(o.flags&7){if(!o.dom&&(r=i?i.nextSibling:s.firstChild)){let l=bt.get(r);(!l||!l.parent&&l.canReuseDOM(o))&&o.reuseDOM(r)}o.sync(e,t),o.flags&=-8}if(r=i?i.nextSibling:s.firstChild,t&&!t.written&&t.node==s&&r!=o.dom&&(t.written=!0),o.dom.parentNode==s)for(;r&&r!=o.dom;)r=i0(r);else s.insertBefore(o.dom,r);i=o.dom}for(r=i?i.nextSibling:s.firstChild,r&&t&&t.node==s&&(t.written=!0);r;)r=i0(r)}else if(this.flags&1)for(let s of this.children)s.flags&7&&(s.sync(e,t),s.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let s;if(e==this.dom)s=this.dom.childNodes[t];else{let i=Ws(e)==0?0:t==0?-1:1;for(;;){let r=e.parentNode;if(r==this.dom)break;i==0&&r.firstChild!=r.lastChild&&(e==r.firstChild?i=-1:i=1),e=r}i<0?s=e:s=e.nextSibling}if(s==this.dom.firstChild)return 0;for(;s&&!bt.get(s);)s=s.nextSibling;if(!s)return this.length;for(let i=0,r=0;;i++){let o=this.children[i];if(o.dom==s)return r;r+=o.length+o.breakAfter}}domBoundsAround(e,t,s=0){let i=-1,r=-1,o=-1,l=-1;for(let a=0,u=s,c=s;a<this.children.length;a++){let d=this.children[a],f=u+d.length;if(u<e&&f>t)return d.domBoundsAround(e,t,u);if(f>=e&&i==-1&&(i=a,r=u),u>t&&d.dom.parentNode==this.dom){o=a,l=c;break}c=f,u=f+d.breakAfter}return{from:r,to:l<0?s+this.length:l,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,s=Xh){this.markDirty();for(let i=e;i<t;i++){let r=this.children[i];r.parent==this&&s.indexOf(r)<0&&r.destroy()}s.length<250?this.children.splice(e,t-e,...s):this.children=[].concat(this.children.slice(0,e),s,this.children.slice(t));for(let i=0;i<s.length;i++)s[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new _1(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,s,i,r,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}bt.prototype.breakAfter=0;function i0(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class _1{constructor(e,t,s){this.children=e,this.pos=t,this.i=s,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let s=this.children[--this.i];this.pos-=s.length+s.breakAfter}}}function w1(n,e,t,s,i,r,o,l,a){let{children:u}=n,c=u.length?u[e]:null,d=r.length?r[r.length-1]:null,f=d?d.breakAfter:o;if(!(e==s&&c&&!o&&!f&&r.length<2&&c.merge(t,i,r.length?d:null,t==0,l,a))){if(s<u.length){let p=u[s];p&&(i<p.length||p.breakAfter&&d?.breakAfter)?(e==s&&(p=p.split(i),i=0),!f&&d&&p.merge(0,i,d,!0,0,a)?r[r.length-1]=p:((i||p.children.length&&!p.children[0].length)&&p.merge(0,i,null,!1,0,a),r.push(p))):p?.breakAfter&&(d?d.breakAfter=1:o=1),s++}for(c&&(c.breakAfter=o,t>0&&(!o&&r.length&&c.merge(t,c.length,r[0],!1,l,0)?c.breakAfter=r.shift().breakAfter:(t<c.length||c.children.length&&c.children[c.children.length-1].length==0)&&c.merge(t,c.length,null,!1,l,0),e++));e<s&&r.length;)if(u[s-1].become(r[r.length-1]))s--,r.pop(),a=r.length?0:l;else if(u[e].become(r[0]))e++,r.shift(),l=r.length?0:a;else break;!r.length&&e&&s<u.length&&!u[e-1].breakAfter&&u[s].merge(0,0,u[e-1],!1,l,a)&&e--,(e<s||r.length)&&n.replaceChildren(e,s,r)}}function S1(n,e,t,s,i,r){let o=n.childCursor(),{i:l,off:a}=o.findPos(t,1),{i:u,off:c}=o.findPos(e,-1),d=e-t;for(let f of s)d+=f.length;n.length+=d,w1(n,u,c,l,a,s,0,i,r)}const DP=256;class _s extends bt{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,s){return this.flags&8||s&&(!(s instanceof _s)||this.length-(t-e)+s.length>DP||s.flags&8)?!1:(this.text=this.text.slice(0,e)+(s?s.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new _s(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new wn(this.dom,e)}domBoundsAround(e,t,s){return{from:s,to:s+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return PP(this.dom,e,t)}}class ci extends bt{constructor(e,t=[],s=0){super(),this.mark=e,this.children=t,this.length=s;for(let i of t)i.setParent(this)}setAttrs(e){if(y1(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,s,i,r,o){return s&&(!(s instanceof ci&&s.mark.eq(this.mark))||e&&r<=0||t<this.length&&o<=0)?!1:(S1(this,e,t,s?s.children.slice():[],r-1,o-1),this.markDirty(),!0)}split(e){let t=[],s=0,i=-1,r=0;for(let l of this.children){let a=s+l.length;a>e&&t.push(s<e?l.split(e-s):l),i<0&&s>=e&&(i=r),s=a,r++}let o=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new ci(this.mark,t,o)}domAtPos(e){return C1(this,e)}coordsAt(e,t){return E1(this,e,t)}}function PP(n,e,t){let s=n.nodeValue.length;e>s&&(e=s);let i=e,r=e,o=0;e==0&&t<0||e==s&&t>=0?Re.chrome||Re.gecko||(e?(i--,o=1):r<s&&(r++,o=-1)):t<0?i--:r<s&&r++;let l=wr(n,i,r).getClientRects();if(!l.length)return null;let a=l[(o?o<0:t>=0)?0:l.length-1];return Re.safari&&!o&&a.width==0&&(a=Array.prototype.find.call(l,u=>u.width)||a),o?wc(a,o<0):a||null}class Ti extends bt{static create(e,t,s){return new Ti(e,t,s)}constructor(e,t,s){super(),this.widget=e,this.length=t,this.side=s,this.prevWidget=null}split(e){let t=Ti.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,s,i,r,o){return s&&(!(s instanceof Ti)||!this.widget.compare(s.widget)||e>0&&r<=0||t<this.length&&o<=0)?!1:(this.length=e+(s?s.length:0)+(this.length-t),!0)}become(e){return e instanceof Ti&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return ut.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,s=t&&t.state.doc,i=this.posAtStart;return s?s.slice(i,i+this.length):ut.empty}domAtPos(e){return(this.length?e==0:this.side>0)?wn.before(this.dom):wn.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let s=this.widget.coordsAt(this.dom,e,t);if(s)return s;let i=this.dom.getClientRects(),r=null;if(!i.length)return null;let o=this.side?this.side<0:e>0;for(let l=o?i.length-1:0;r=i[l],!(e>0?l==0:l==i.length-1||r.top<r.bottom);l+=o?-1:1);return wc(r,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class ho extends bt{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof ho&&e.side==this.side}split(){return new ho(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?wn.before(this.dom):wn.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return ut.empty}get isHidden(){return!0}}_s.prototype.children=Ti.prototype.children=ho.prototype.children=Xh;function C1(n,e){let t=n.dom,{children:s}=n,i=0;for(let r=0;i<s.length;i++){let o=s[i],l=r+o.length;if(!(l==r&&o.getSide()<=0)){if(e>r&&e<l&&o.dom.parentNode==t)return o.domAtPos(e-r);if(e<=r)break;r=l}}for(let r=i;r>0;r--){let o=s[r-1];if(o.dom.parentNode==t)return o.domAtPos(o.length)}for(let r=i;r<s.length;r++){let o=s[r];if(o.dom.parentNode==t)return o.domAtPos(0)}return new wn(t,0)}function A1(n,e,t){let s,{children:i}=n;t>0&&e instanceof ci&&i.length&&(s=i[i.length-1])instanceof ci&&s.mark.eq(e.mark)?A1(s,e.children[0],t-1):(i.push(e),e.setParent(n)),n.length+=e.length}function E1(n,e,t){let s=null,i=-1,r=null,o=-1;function l(u,c){for(let d=0,f=0;d<u.children.length&&f<=c;d++){let p=u.children[d],g=f+p.length;g>=c&&(p.children.length?l(p,c-f):(!r||r.isHidden&&(t>0||OP(r,p)))&&(g>c||f==g&&p.getSide()>0)?(r=p,o=c-f):(f<c||f==g&&p.getSide()<0&&!p.isHidden)&&(s=p,i=c-f)),f=g}}l(n,e);let a=(t<0?s:r)||s||r;return a?a.coordsAt(Math.max(0,a==s?i:o),t):RP(n)}function RP(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=Dl(e);return t[t.length-1]||null}function OP(n,e){let t=n.coordsAt(0,1),s=e.coordsAt(0,1);return t&&s&&s.top<t.bottom}function $f(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}const r0=Object.create(null);function Iu(n,e,t){if(n==e)return!0;n||(n=r0),e||(e=r0);let s=Object.keys(n),i=Object.keys(e);if(s.length-(t&&s.indexOf(t)>-1?1:0)!=i.length-(t&&i.indexOf(t)>-1?1:0))return!1;for(let r of s)if(r!=t&&(i.indexOf(r)==-1||n[r]!==e[r]))return!1;return!0}function Nf(n,e,t){let s=!1;if(e)for(let i in e)t&&i in t||(s=!0,i=="style"?n.style.cssText="":n.removeAttribute(i));if(t)for(let i in t)e&&e[i]==t[i]||(s=!0,i=="style"?n.style.cssText=t[i]:n.setAttribute(i,t[i]));return s}function LP(n){let e=Object.create(null);for(let t=0;t<n.attributes.length;t++){let s=n.attributes[t];e[s.name]=s.value}return e}class Ui{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,s){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Mn=(function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n})(Mn||(Mn={}));class We extends xr{constructor(e,t,s,i){super(),this.startSide=e,this.endSide=t,this.widget=s,this.spec=i}get heightRelevant(){return!1}static mark(e){return new Yl(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),s=!!e.block;return t+=s&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new Ni(e,t,t,s,e.widget||null,!1)}static replace(e){let t=!!e.block,s,i;if(e.isBlockGap)s=-5e8,i=4e8;else{let{start:r,end:o}=T1(e,t);s=(r?t?-3e8:-1:5e8)-1,i=(o?t?2e8:1:-6e8)+1}return new Ni(e,s,i,t,e.widget||null,!0)}static line(e){return new Xl(e)}static set(e,t=!1){return at.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}We.none=at.empty;class Yl extends We{constructor(e){let{start:t,end:s}=T1(e);super(t?-1:5e8,s?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,s;return this==e||e instanceof Yl&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((s=e.attrs)===null||s===void 0?void 0:s.class))&&Iu(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}Yl.prototype.point=!1;class Xl extends We{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Xl&&this.spec.class==e.spec.class&&Iu(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}Xl.prototype.mapMode=Ln.TrackBefore;Xl.prototype.point=!0;class Ni extends We{constructor(e,t,s,i,r,o){super(t,s,r,e),this.block=i,this.isReplace=o,this.mapMode=i?t<=0?Ln.TrackBefore:Ln.TrackAfter:Ln.TrackDel}get type(){return this.startSide!=this.endSide?Mn.WidgetRange:this.startSide<=0?Mn.WidgetBefore:Mn.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Ni&&MP(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}Ni.prototype.point=!0;function T1(n,e=!1){let{inclusiveStart:t,inclusiveEnd:s}=n;return t==null&&(t=n.inclusive),s==null&&(s=n.inclusive),{start:t??e,end:s??e}}function MP(n,e){return n==e||!!(n&&e&&n.compare(e))}function ru(n,e,t,s=0){let i=t.length-1;i>=0&&t[i]+s>=n?t[i]=Math.max(t[i],e):t.push(n,e)}class Ht extends bt{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,s,i,r,o){if(s){if(!(s instanceof Ht))return!1;this.dom||s.transferDOM(this)}return i&&this.setDeco(s?s.attrs:null),S1(this,e,t,s?s.children.slice():[],r,o),!0}split(e){let t=new Ht;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i:s,off:i}=this.childPos(e);i&&(t.append(this.children[s].split(i),0),this.children[s].merge(i,this.children[s].length,null,!1,0,0),s++);for(let r=s;r<this.children.length;r++)t.append(this.children[r],0);for(;s>0&&this.children[s-1].length==0;)this.children[--s].destroy();return this.children.length=s,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Iu(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){A1(this,e,t)}addLineDeco(e){let t=e.spec.attributes,s=e.spec.class;t&&(this.attrs=$f(t,this.attrs||{})),s&&(this.attrs=$f({class:s},this.attrs||{}))}domAtPos(e){return C1(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var s;this.dom?this.flags&4&&(y1(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(Nf(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let i=this.dom.lastChild;for(;i&&bt.get(i)instanceof ci;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((s=bt.get(i))===null||s===void 0?void 0:s.isEditable)==!1&&(!Re.ios||!this.children.some(r=>r instanceof _s))){let r=document.createElement("BR");r.cmIgnore=!0,this.dom.appendChild(r)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let s of this.children){if(!(s instanceof _s)||/[^ -~]/.test(s.text))return null;let i=Dl(s.dom);if(i.length!=1)return null;e+=i[0].width,t=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let s=E1(this,e,t);if(!this.children.length&&s&&this.parent){let{heightOracle:i}=this.parent.view.viewState,r=s.bottom-s.top;if(Math.abs(r-i.lineHeight)<2&&i.textHeight<r){let o=(r-i.textHeight)/2;return{top:s.top+o,bottom:s.bottom-o,left:s.left,right:s.left}}}return s}become(e){return e instanceof Ht&&this.children.length==0&&e.children.length==0&&Iu(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let s=0,i=0;s<e.children.length;s++){let r=e.children[s],o=i+r.length;if(o>=t){if(r instanceof Ht)return r;if(o>t)break}i=o+r.breakAfter}return null}}class oi extends bt{constructor(e,t,s){super(),this.widget=e,this.length=t,this.deco=s,this.breakAfter=0,this.prevWidget=null}merge(e,t,s,i,r,o){return s&&(!(s instanceof oi)||!this.widget.compare(s.widget)||e>0&&r<=0||t<this.length&&o<=0)?!1:(this.length=e+(s?s.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?wn.before(this.dom):wn.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let s=new oi(this.widget,t,this.deco);return s.breakAfter=this.breakAfter,s}get children(){return Xh}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):ut.empty}domBoundsAround(){return null}become(e){return e instanceof oi&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){let s=this.widget.coordsAt(this.dom,e,t);return s||(this.widget instanceof Bf?null:wc(this.dom.getBoundingClientRect(),this.length?e==0:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:s}=this.deco;return t==s?!1:e<0?t<0:s>0}}class Bf extends Ui{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class ll{constructor(e,t,s,i){this.doc=e,this.pos=t,this.end=s,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof oi&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Ht),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Da(new ho(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof oi)&&this.getLine()}buildText(e,t,s){for(;e>0;){if(this.textOff==this.text.length){let{value:o,lineBreak:l,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(l){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=o,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e),r=Math.min(i,512);this.flushBuffer(t.slice(t.length-s)),this.getLine().append(Da(new _s(this.text.slice(this.textOff,this.textOff+r)),t),s),this.atCursorPos=!0,this.textOff+=r,e-=r,s=i<=r?0:t.length}}span(e,t,s,i){this.buildText(t-e,s,i),this.pos=t,this.openStart<0&&(this.openStart=i)}point(e,t,s,i,r,o){if(this.disallowBlockEffectsFor[o]&&s instanceof Ni){if(s.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=t-e;if(s instanceof Ni)if(s.block)s.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new oi(s.widget||po.block,l,s));else{let a=Ti.create(s.widget||po.inline,l,l?0:s.startSide),u=this.atCursorPos&&!a.isEditable&&r<=i.length&&(e<t||s.startSide>0),c=!a.isEditable&&(e<t||r>i.length||s.startSide<=0),d=this.getLine();this.pendingBuffer==2&&!u&&!a.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),u&&(d.append(Da(new ho(1),i),r),r=i.length+Math.max(0,r-i.length)),d.append(Da(a,i),r),this.atCursorPos=c,this.pendingBuffer=c?e<t||r>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(s);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=r)}static build(e,t,s,i,r){let o=new ll(e,t,s,r);return o.openEnd=at.spans(i,t,s,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function Da(n,e){for(let t of e)n=new ci(t,[n],n.length);return n}class po extends Ui{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}po.inline=new po("span");po.block=new po("div");var Pt=(function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n})(Pt||(Pt={}));const Sr=Pt.LTR,Zh=Pt.RTL;function D1(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const IP=D1("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),jP=D1("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Ff=Object.create(null),Ds=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);Ff[e]=t,Ff[t]=-e}function P1(n){return n<=247?IP[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?jP[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8204?256:64336<=n&&n<=65023?4:1}const VP=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Di{get dir(){return this.level%2?Zh:Sr}constructor(e,t,s){this.from=e,this.to=t,this.level=s}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,s,i){let r=-1;for(let o=0;o<e.length;o++){let l=e[o];if(l.from<=t&&l.to>=t){if(l.level==s)return o;(r<0||(i!=0?i<0?l.from<t:l.to>t:e[r].level>l.level))&&(r=o)}}if(r<0)throw new RangeError("Index out of range");return r}}function R1(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++){let s=n[t],i=e[t];if(s.from!=i.from||s.to!=i.to||s.direction!=i.direction||!R1(s.inner,i.inner))return!1}return!0}const _t=[];function $P(n,e,t,s,i){for(let r=0;r<=s.length;r++){let o=r?s[r-1].to:e,l=r<s.length?s[r].from:t,a=r?256:i;for(let u=o,c=a,d=a;u<l;u++){let f=P1(n.charCodeAt(u));f==512?f=c:f==8&&d==4&&(f=16),_t[u]=f==4?2:f,f&7&&(d=f),c=f}for(let u=o,c=a,d=a;u<l;u++){let f=_t[u];if(f==128)u<l-1&&c==_t[u+1]&&c&24?f=_t[u]=c:_t[u]=256;else if(f==64){let p=u+1;for(;p<l&&_t[p]==64;)p++;let g=u&&c==8||p<t&&_t[p]==8?d==1?1:8:256;for(let k=u;k<p;k++)_t[k]=g;u=p-1}else f==8&&d==1&&(_t[u]=1);c=f,f&7&&(d=f)}}}function NP(n,e,t,s,i){let r=i==1?2:1;for(let o=0,l=0,a=0;o<=s.length;o++){let u=o?s[o-1].to:e,c=o<s.length?s[o].from:t;for(let d=u,f,p,g;d<c;d++)if(p=Ff[f=n.charCodeAt(d)])if(p<0){for(let k=l-3;k>=0;k-=3)if(Ds[k+1]==-p){let x=Ds[k+2],m=x&2?i:x&4?x&1?r:i:0;m&&(_t[d]=_t[Ds[k]]=m),l=k;break}}else{if(Ds.length==189)break;Ds[l++]=d,Ds[l++]=f,Ds[l++]=a}else if((g=_t[d])==2||g==1){let k=g==i;a=k?0:1;for(let x=l-3;x>=0;x-=3){let m=Ds[x+2];if(m&2)break;if(k)Ds[x+2]|=2;else{if(m&4)break;Ds[x+2]|=4}}}}}function BP(n,e,t,s){for(let i=0,r=s;i<=t.length;i++){let o=i?t[i-1].to:n,l=i<t.length?t[i].from:e;for(let a=o;a<l;){let u=_t[a];if(u==256){let c=a+1;for(;;)if(c==l){if(i==t.length)break;c=t[i++].to,l=i<t.length?t[i].from:e}else if(_t[c]==256)c++;else break;let d=r==1,f=(c<e?_t[c]:s)==1,p=d==f?d?1:2:s;for(let g=c,k=i,x=k?t[k-1].to:n;g>a;)g==x&&(g=t[--k].from,x=k?t[k-1].to:n),_t[--g]=p;a=c}else r=u,a++}}}function Uf(n,e,t,s,i,r,o){let l=s%2?2:1;if(s%2==i%2)for(let a=e,u=0;a<t;){let c=!0,d=!1;if(u==r.length||a<r[u].from){let k=_t[a];k!=l&&(c=!1,d=k==16)}let f=!c&&l==1?[]:null,p=c?s:s+1,g=a;e:for(;;)if(u<r.length&&g==r[u].from){if(d)break e;let k=r[u];if(!c)for(let x=k.to,m=u+1;;){if(x==t)break e;if(m<r.length&&r[m].from==x)x=r[m++].to;else{if(_t[x]==l)break e;break}}if(u++,f)f.push(k);else{k.from>a&&o.push(new Di(a,k.from,p));let x=k.direction==Sr!=!(p%2);zf(n,x?s+1:s,i,k.inner,k.from,k.to,o),a=k.to}g=k.to}else{if(g==t||(c?_t[g]!=l:_t[g]==l))break;g++}f?Uf(n,a,g,s+1,i,f,o):a<g&&o.push(new Di(a,g,p)),a=g}else for(let a=t,u=r.length;a>e;){let c=!0,d=!1;if(!u||a>r[u-1].to){let k=_t[a-1];k!=l&&(c=!1,d=k==16)}let f=!c&&l==1?[]:null,p=c?s:s+1,g=a;e:for(;;)if(u&&g==r[u-1].to){if(d)break e;let k=r[--u];if(!c)for(let x=k.from,m=u;;){if(x==e)break e;if(m&&r[m-1].to==x)x=r[--m].from;else{if(_t[x-1]==l)break e;break}}if(f)f.push(k);else{k.to<a&&o.push(new Di(k.to,a,p));let x=k.direction==Sr!=!(p%2);zf(n,x?s+1:s,i,k.inner,k.from,k.to,o),a=k.from}g=k.from}else{if(g==e||(c?_t[g-1]!=l:_t[g-1]==l))break;g--}f?Uf(n,g,a,s+1,i,f,o):g<a&&o.push(new Di(g,a,p)),a=g}}function zf(n,e,t,s,i,r,o){let l=e%2?2:1;$P(n,i,r,s,l),NP(n,i,r,s,l),BP(i,r,s,l),Uf(n,i,r,e,t,s,o)}function FP(n,e,t){if(!n)return[new Di(0,0,e==Zh?1:0)];if(e==Sr&&!t.length&&!VP.test(n))return O1(n.length);if(t.length)for(;n.length>_t.length;)_t[_t.length]=256;let s=[],i=e==Sr?0:1;return zf(n,i,i,t,0,n.length,s),s}function O1(n){return[new Di(0,n,0)]}let L1="";function UP(n,e,t,s,i){var r;let o=s.head-n.from,l=Di.find(e,o,(r=s.bidiLevel)!==null&&r!==void 0?r:-1,s.assoc),a=e[l],u=a.side(i,t);if(o==u){let f=l+=i?1:-1;if(f<0||f>=e.length)return null;a=e[l=f],o=a.side(!i,t),u=a.side(i,t)}let c=fn(n.text,o,a.forward(i,t));(c<a.from||c>a.to)&&(c=u),L1=n.text.slice(Math.min(o,c),Math.max(o,c));let d=l==(i?e.length-1:0)?null:e[l+(i?1:-1)];return d&&c==u&&d.level+(i?0:1)<a.level?fe.cursor(d.side(!i,t)+n.from,d.forward(i,t)?1:-1,d.level):fe.cursor(c+n.from,a.forward(i,t)?-1:1,a.level)}function zP(n,e,t){for(let s=e;s<t;s++){let i=P1(n.charCodeAt(s));if(i==1)return Sr;if(i==2||i==4)return Zh}return Sr}const M1=Ie.define(),I1=Ie.define(),j1=Ie.define(),V1=Ie.define(),Hf=Ie.define(),$1=Ie.define(),N1=Ie.define(),ep=Ie.define(),tp=Ie.define(),B1=Ie.define({combine:n=>n.some(e=>e)}),F1=Ie.define({combine:n=>n.some(e=>e)}),U1=Ie.define();class so{constructor(e,t="nearest",s="nearest",i=5,r=5,o=!1){this.range=e,this.y=t,this.x=s,this.yMargin=i,this.xMargin=r,this.isSnapshot=o}map(e){return e.empty?this:new so(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new so(fe.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Pa=et.define({map:(n,e)=>n.map(e)}),z1=et.define();function Bn(n,e,t){let s=n.facet(V1);s.length?s[0](e):window.onerror&&window.onerror(String(e),t,void 0,void 0,e)||(t?console.error(t+":",e):console.error(e))}const ii=Ie.define({combine:n=>n.length?n[0]:!0});let HP=0;const Fr=Ie.define({combine(n){return n.filter((e,t)=>{for(let s=0;s<t;s++)if(n[s].plugin==e.plugin)return!1;return!0})}});class qt{constructor(e,t,s,i,r){this.id=e,this.create=t,this.domEventHandlers=s,this.domEventObservers=i,this.baseExtensions=r(this),this.extension=this.baseExtensions.concat(Fr.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(Fr.of({plugin:this,arg:e}))}static define(e,t){const{eventHandlers:s,eventObservers:i,provide:r,decorations:o}=t||{};return new qt(HP++,e,s,i,l=>{let a=[];return o&&a.push(Pl.of(u=>{let c=u.plugin(l);return c?o(c):We.none})),r&&a.push(r(l)),a})}static fromClass(e,t){return qt.define((s,i)=>new e(s,i),t)}}class md{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(s){if(Bn(t.state,s,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(t){Bn(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(s){Bn(e.state,s,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const H1=Ie.define(),np=Ie.define(),Pl=Ie.define(),W1=Ie.define(),Zl=Ie.define(),q1=Ie.define();function o0(n,e){let t=n.state.facet(q1);if(!t.length)return t;let s=t.map(r=>r instanceof Function?r(n):r),i=[];return at.spans(s,e.from,e.to,{point(){},span(r,o,l,a){let u=r-e.from,c=o-e.from,d=i;for(let f=l.length-1;f>=0;f--,a--){let p=l[f].spec.bidiIsolate,g;if(p==null&&(p=zP(e.text,u,c)),a>0&&d.length&&(g=d[d.length-1]).to==u&&g.direction==p)g.to=c,d=g.inner;else{let k={from:u,to:c,direction:p,inner:[]};d.push(k),d=k.inner}}}}),i}const G1=Ie.define();function sp(n){let e=0,t=0,s=0,i=0;for(let r of n.state.facet(G1)){let o=r(n);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(t=Math.max(t,o.right)),o.top!=null&&(s=Math.max(s,o.top)),o.bottom!=null&&(i=Math.max(i,o.bottom)))}return{left:e,right:t,top:s,bottom:i}}const Ho=Ie.define();class as{constructor(e,t,s,i){this.fromA=e,this.toA=t,this.fromB=s,this.toB=i}join(e){return new as(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,s=this;for(;t>0;t--){let i=e[t-1];if(!(i.fromA>s.toA)){if(i.toA<s.fromA)break;s=s.join(i),e.splice(t-1,1)}}return e.splice(t,0,s),e}static extendWithRanges(e,t){if(t.length==0)return e;let s=[];for(let i=0,r=0,o=0,l=0;;i++){let a=i==e.length?null:e[i],u=o-l,c=a?a.fromB:1e9;for(;r<t.length&&t[r]<c;){let d=t[r],f=t[r+1],p=Math.max(l,d),g=Math.min(c,f);if(p<=g&&new as(p+u,g+u,p,g).addToSet(s),f>c)break;r+=2}if(!a)return s;new as(a.fromA,a.toA,a.fromB,a.toB).addToSet(s),o=a.toA,l=a.toB}}}class ju{constructor(e,t,s){this.view=e,this.state=t,this.transactions=s,this.flags=0,this.startState=e.state,this.changes=Xt.empty(this.startState.doc.length);for(let r of s)this.changes=this.changes.compose(r.changes);let i=[];this.changes.iterChangedRanges((r,o,l,a)=>i.push(new as(r,o,l,a))),this.changedRanges=i}static create(e,t,s){return new ju(e,t,s)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class l0 extends bt{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=We.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Ht],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new as(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let s=e.changedRanges;this.minWidth>0&&s.length&&(s.every(({fromA:u,toA:c})=>c<this.minWidthFrom||u>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?i=this.domChanged.newSel.head:!YP(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let r=i>-1?qP(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:u,to:c}=this.hasComposition;s=new as(u,c,e.changes.mapPos(u,-1),e.changes.mapPos(c,1)).addToSet(s.slice())}this.hasComposition=r?{from:r.range.fromB,to:r.range.toB}:null,(Re.ie||Re.chrome)&&!r&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,l=this.updateDeco(),a=JP(o,l,e.changes);return s=as.extendWithRanges(s,a),!(this.flags&7)&&s.length==0?!1:(this.updateInner(s,e.startState.doc.length,r),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,s){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,s);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=Re.chrome||Re.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||i.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof oi&&o.widget instanceof Bf&&r.push(o.dom);i.updateGaps(r)}updateChildren(e,t,s){let i=s?s.range.addToSet(e.slice()):e,r=this.childCursor(t);for(let o=i.length-1;;o--){let l=o>=0?i[o]:null;if(!l)break;let{fromA:a,toA:u,fromB:c,toB:d}=l,f,p,g,k;if(s&&s.range.fromB<d&&s.range.toB>c){let U=ll.build(this.view.state.doc,c,s.range.fromB,this.decorations,this.dynamicDecorationMap),N=ll.build(this.view.state.doc,s.range.toB,d,this.decorations,this.dynamicDecorationMap);p=U.breakAtStart,g=U.openStart,k=N.openEnd;let A=this.compositionView(s);N.breakAtStart?A.breakAfter=1:N.content.length&&A.merge(A.length,A.length,N.content[0],!1,N.openStart,0)&&(A.breakAfter=N.content[0].breakAfter,N.content.shift()),U.content.length&&A.merge(0,0,U.content[U.content.length-1],!0,0,U.openEnd)&&U.content.pop(),f=U.content.concat(A).concat(N.content)}else({content:f,breakAtStart:p,openStart:g,openEnd:k}=ll.build(this.view.state.doc,c,d,this.decorations,this.dynamicDecorationMap));let{i:x,off:m}=r.findPos(u,1),{i:_,off:R}=r.findPos(a,-1);w1(this,_,R,x,m,f,p,g,k)}s&&this.fixCompositionDOM(s)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let s of t.effects)s.is(z1)&&(this.editContextFormatting=s.value)}compositionView(e){let t=new _s(e.text.nodeValue);t.flags|=8;for(let{deco:i}of e.marks)t=new ci(i,[t],t.length);let s=new Ht;return s.append(t,0),s}fixCompositionDOM(e){let t=(r,o)=>{o.flags|=8|(o.children.some(a=>a.flags&7)?1:0),this.markedForComposition.add(o);let l=bt.get(r);l&&l!=o&&(l.dom=null),o.setDOM(r)},s=this.childPos(e.range.fromB,1),i=this.children[s.i];t(e.line,i);for(let r=e.marks.length-1;r>=-1;r--)s=i.childPos(s.off,1),i=i.children[s.i],t(r>=0?e.marks[r].node:e.text,i)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let s=this.view.root.activeElement,i=s==this.dom,r=!i&&!(this.view.state.facet(ii)||this.dom.tabIndex>-1)&&iu(this.dom,this.view.observer.selectionRange)&&!(s&&this.dom.contains(s));if(!(i||t||r))return;let o=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(l.anchor)),u=l.empty?a:this.moveToLine(this.domAtPos(l.head));if(Re.gecko&&l.empty&&!this.hasComposition&&WP(a)){let d=document.createTextNode("");this.view.observer.ignore(()=>a.node.insertBefore(d,a.node.childNodes[a.offset]||null)),a=u=new wn(d,0),o=!0}let c=this.view.observer.selectionRange;(o||!c.focusNode||(!ol(a.node,a.offset,c.anchorNode,c.anchorOffset)||!ol(u.node,u.offset,c.focusNode,c.focusOffset))&&!this.suppressWidgetCursorChange(c,l))&&(this.view.observer.ignore(()=>{Re.android&&Re.chrome&&this.dom.contains(c.focusNode)&&QP(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let d=Tl(this.view.root);if(d)if(l.empty){if(Re.gecko){let f=GP(a.node,a.offset);if(f&&f!=3){let p=(f==1?k1:x1)(a.node,a.offset);p&&(a=new wn(p.node,p.offset))}}d.collapse(a.node,a.offset),l.bidiLevel!=null&&d.caretBidiLevel!==void 0&&(d.caretBidiLevel=l.bidiLevel)}else if(d.extend){d.collapse(a.node,a.offset);try{d.extend(u.node,u.offset)}catch{}}else{let f=document.createRange();l.anchor>l.head&&([a,u]=[u,a]),f.setEnd(u.node,u.offset),f.setStart(a.node,a.offset),d.removeAllRanges(),d.addRange(f)}r&&this.view.root.activeElement==this.dom&&(this.dom.blur(),s&&s.focus())}),this.view.observer.setSelectionRange(a,u)),this.impreciseAnchor=a.precise?null:new wn(c.anchorNode,c.anchorOffset),this.impreciseHead=u.precise?null:new wn(c.focusNode,c.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&ol(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,s=Tl(e.root),{anchorNode:i,anchorOffset:r}=e.observer.selectionRange;if(!s||!t.empty||!t.assoc||!s.modify)return;let o=Ht.find(this,t.head);if(!o)return;let l=o.posAtStart;if(t.head==l||t.head==l+o.length)return;let a=this.coordsAt(t.head,-1),u=this.coordsAt(t.head,1);if(!a||!u||a.bottom>u.top)return;let c=this.domAtPos(t.head+t.assoc);s.collapse(c.node,c.offset),s.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let d=e.observer.selectionRange;e.docView.posFromDOM(d.anchorNode,d.anchorOffset)!=t.from&&s.collapse(i,r)}moveToLine(e){let t=this.dom,s;if(e.node!=t)return e;for(let i=e.offset;!s&&i<t.childNodes.length;i++){let r=bt.get(t.childNodes[i]);r instanceof Ht&&(s=r.domAtPos(0))}for(let i=e.offset-1;!s&&i>=0;i--){let r=bt.get(t.childNodes[i]);r instanceof Ht&&(s=r.domAtPos(r.length))}return s?new wn(s.node,s.offset,!0):e}nearest(e){for(let t=e;t;){let s=bt.get(t);if(s&&s.rootView==this)return s;t=t.parentNode}return null}posFromDOM(e,t){let s=this.nearest(e);if(!s)throw new RangeError("Trying to find position for a DOM position outside of the document");return s.localPosFromDOM(e,t)+s.posAtStart}domAtPos(e){let{i:t,off:s}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let i=this.children[t];if(s<i.length||i instanceof Ht)break;t++,s=0}return this.children[t].domAtPos(s)}coordsAt(e,t){let s=null,i=0;for(let r=this.length,o=this.children.length-1;o>=0;o--){let l=this.children[o],a=r-l.breakAfter,u=a-l.length;if(a<e)break;if(u<=e&&(u<e||l.covers(-1))&&(a>e||l.covers(1))&&(!s||l instanceof Ht&&!(s instanceof Ht&&t>=0)))s=l,i=u;else if(s&&u==e&&a==e&&l instanceof oi&&Math.abs(t)<2){if(l.deco.startSide<0)break;o&&(s=null)}r=u}return s?s.coordsAt(e-i,t):null}coordsForChar(e){let{i:t,off:s}=this.childPos(e,1),i=this.children[t];if(!(i instanceof Ht))return null;for(;i.children.length;){let{i:l,off:a}=i.childPos(s,1);for(;;l++){if(l==i.children.length)return null;if((i=i.children[l]).length)break}s=a}if(!(i instanceof _s))return null;let r=fn(i.text,s);if(r==s)return null;let o=wr(i.dom,s,r).getClientRects();for(let l=0;l<o.length;l++){let a=o[l];if(l==o.length-1||a.top<a.bottom&&a.left<a.right)return a}return null}measureVisibleLineHeights(e){let t=[],{from:s,to:i}=e,r=this.view.contentDOM.clientWidth,o=r>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,a=this.view.textDirection==Pt.LTR;for(let u=0,c=0;c<this.children.length;c++){let d=this.children[c],f=u+d.length;if(f>i)break;if(u>=s){let p=d.dom.getBoundingClientRect();if(t.push(p.height),o){let g=d.dom.lastChild,k=g?Dl(g):[];if(k.length){let x=k[k.length-1],m=a?x.right-p.left:p.right-x.left;m>l&&(l=m,this.minWidth=r,this.minWidthFrom=u,this.minWidthTo=f)}}}u=f+d.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?Pt.RTL:Pt.LTR}measureTextSize(){for(let r of this.children)if(r instanceof Ht){let o=r.measureTextSize();if(o)return o}let e=document.createElement("div"),t,s,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let r=Dl(e.firstChild)[0];t=e.getBoundingClientRect().height,s=r?r.width/27:7,i=r?r.height:t,e.remove()}),{lineHeight:t,charWidth:s,textHeight:i}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new _1(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let s=0,i=0;;i++){let r=i==t.viewports.length?null:t.viewports[i],o=r?r.from-1:this.length;if(o>s){let l=(t.lineBlockAt(o).bottom-t.lineBlockAt(s).top)/this.view.scaleY;e.push(We.replace({widget:new Bf(l),block:!0,inclusive:!0,isBlockGap:!0}).range(s,o))}if(!r)break;s=r.to+1}return We.set(e)}updateDeco(){let e=1,t=this.view.state.facet(Pl).map(r=>(this.dynamicDecorationMap[e++]=typeof r=="function")?r(this.view):r),s=!1,i=this.view.state.facet(W1).map((r,o)=>{let l=typeof r=="function";return l&&(s=!0),l?r(this.view):r});for(i.length&&(this.dynamicDecorationMap[e++]=s,t.push(at.join(i))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let u=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=u.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let u of this.view.state.facet(U1))try{if(u(this.view,e.range,e))return!0}catch(c){Bn(this.view.state,c,"scroll handler")}let{range:t}=e,s=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),i;if(!s)return;!t.empty&&(i=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(s={left:Math.min(s.left,i.left),top:Math.min(s.top,i.top),right:Math.max(s.right,i.right),bottom:Math.max(s.bottom,i.bottom)});let r=sp(this.view),o={left:s.left-r.left,top:s.top-r.top,right:s.right+r.right,bottom:s.bottom+r.bottom},{offsetWidth:l,offsetHeight:a}=this.view.scrollDOM;SP(this.view.scrollDOM,o,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,l),-l),Math.max(Math.min(e.yMargin,a),-a),this.view.textDirection==Pt.LTR)}}function WP(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}function K1(n,e){let t=n.observer.selectionRange;if(!t.focusNode)return null;let s=k1(t.focusNode,t.focusOffset),i=x1(t.focusNode,t.focusOffset),r=s||i;if(i&&s&&i.node!=s.node){let l=bt.get(i.node);if(!l||l instanceof _s&&l.text!=i.node.nodeValue)r=i;else if(n.docView.lastCompositionAfterCursor){let a=bt.get(s.node);!a||a instanceof _s&&a.text!=s.node.nodeValue||(r=i)}}if(n.docView.lastCompositionAfterCursor=r!=s,!r)return null;let o=e-r.offset;return{from:o,to:o+r.node.nodeValue.length,node:r.node}}function qP(n,e,t){let s=K1(n,t);if(!s)return null;let{node:i,from:r,to:o}=s,l=i.nodeValue;if(/[\n\r]/.test(l)||n.state.doc.sliceString(s.from,s.to)!=l)return null;let a=e.invertedDesc,u=new as(a.mapPos(r),a.mapPos(o),r,o),c=[];for(let d=i.parentNode;;d=d.parentNode){let f=bt.get(d);if(f instanceof ci)c.push({node:d,deco:f.mark});else{if(f instanceof Ht||d.nodeName=="DIV"&&d.parentNode==n.contentDOM)return{range:u,text:i,marks:c,line:d};if(d!=n.contentDOM)c.push({node:d,deco:new Yl({inclusive:!0,attributes:LP(d),tagName:d.tagName.toLowerCase()})});else return null}}}function GP(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}let KP=class{constructor(){this.changes=[]}compareRange(e,t){ru(e,t,this.changes)}comparePoint(e,t){ru(e,t,this.changes)}boundChange(e){ru(e,e,this.changes)}};function JP(n,e,t){let s=new KP;return at.compare(n,e,t,s),s.changes}function QP(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function YP(n,e){let t=!1;return e&&n.iterChangedRanges((s,i)=>{s<e.to&&i>e.from&&(t=!0)}),t}function XP(n,e,t=1){let s=n.charCategorizer(e),i=n.doc.lineAt(e),r=e-i.from;if(i.length==0)return fe.cursor(e);r==0?t=1:r==i.length&&(t=-1);let o=r,l=r;t<0?o=fn(i.text,r,!1):l=fn(i.text,r);let a=s(i.text.slice(o,l));for(;o>0;){let u=fn(i.text,o,!1);if(s(i.text.slice(u,o))!=a)break;o=u}for(;l<i.length;){let u=fn(i.text,l);if(s(i.text.slice(l,u))!=a)break;l=u}return fe.range(o+i.from,l+i.from)}function ZP(n,e){return e.left>n?e.left-n:Math.max(0,n-e.right)}function eR(n,e){return e.top>n?e.top-n:Math.max(0,n-e.bottom)}function gd(n,e){return n.top<e.bottom-1&&n.bottom>e.top+1}function a0(n,e){return e<n.top?{top:e,left:n.left,right:n.right,bottom:n.bottom}:n}function u0(n,e){return e>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:e}:n}function Wf(n,e,t){let s,i,r,o,l=!1,a,u,c,d;for(let g=n.firstChild;g;g=g.nextSibling){let k=Dl(g);for(let x=0;x<k.length;x++){let m=k[x];i&&gd(i,m)&&(m=a0(u0(m,i.bottom),i.top));let _=ZP(e,m),R=eR(t,m);if(_==0&&R==0)return g.nodeType==3?c0(g,e,t):Wf(g,e,t);(!s||o>R||o==R&&r>_)&&(s=g,i=m,r=_,o=R,l=_?e<m.left?x>0:x<k.length-1:!0),_==0?t>m.bottom&&(!c||c.bottom<m.bottom)?(a=g,c=m):t<m.top&&(!d||d.top>m.top)&&(u=g,d=m):c&&gd(c,m)?c=u0(c,m.bottom):d&&gd(d,m)&&(d=a0(d,m.top))}}if(c&&c.bottom>=t?(s=a,i=c):d&&d.top<=t&&(s=u,i=d),!s)return{node:n,offset:0};let f=Math.max(i.left,Math.min(i.right,e));if(s.nodeType==3)return c0(s,f,t);if(l&&s.contentEditable!="false")return Wf(s,f,t);let p=Array.prototype.indexOf.call(n.childNodes,s)+(e>=(i.left+i.right)/2?1:0);return{node:n,offset:p}}function c0(n,e,t){let s=n.nodeValue.length,i=-1,r=1e9,o=0;for(let l=0;l<s;l++){let a=wr(n,l,l+1).getClientRects();for(let u=0;u<a.length;u++){let c=a[u];if(c.top==c.bottom)continue;o||(o=e-c.left);let d=(c.top>t?c.top-t:t-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&d<r){let f=e>=(c.left+c.right)/2,p=f;if((Re.chrome||Re.gecko)&&wr(n,l).getBoundingClientRect().left==c.right&&(p=!f),d<=0)return{node:n,offset:l+(p?1:0)};i=l+(p?1:0),r=d}}}return{node:n,offset:i>-1?i:o>0?n.nodeValue.length:0}}function J1(n,e,t,s=-1){var i,r;let o=n.contentDOM.getBoundingClientRect(),l=o.top+n.viewState.paddingTop,a,{docHeight:u}=n.viewState,{x:c,y:d}=e,f=d-l;if(f<0)return 0;if(f>u)return n.state.doc.length;for(let U=n.viewState.heightOracle.textHeight/2,N=!1;a=n.elementAtHeight(f),a.type!=Mn.Text;)for(;f=s>0?a.bottom+U:a.top-U,!(f>=0&&f<=u);){if(N)return t?null:0;N=!0,s=-s}d=l+f;let p=a.from;if(p<n.viewport.from)return n.viewport.from==0?0:t?null:d0(n,o,a,c,d);if(p>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:t?null:d0(n,o,a,c,d);let g=n.dom.ownerDocument,k=n.root.elementFromPoint?n.root:g,x=k.elementFromPoint(c,d);x&&!n.contentDOM.contains(x)&&(x=null),x||(c=Math.max(o.left+1,Math.min(o.right-1,c)),x=k.elementFromPoint(c,d),x&&!n.contentDOM.contains(x)&&(x=null));let m,_=-1;if(x&&((i=n.docView.nearest(x))===null||i===void 0?void 0:i.isEditable)!=!1){if(g.caretPositionFromPoint){let U=g.caretPositionFromPoint(c,d);U&&({offsetNode:m,offset:_}=U)}else if(g.caretRangeFromPoint){let U=g.caretRangeFromPoint(c,d);U&&({startContainer:m,startOffset:_}=U)}m&&(!n.contentDOM.contains(m)||Re.safari&&tR(m,_,c)||Re.chrome&&nR(m,_,c))&&(m=void 0),m&&(_=Math.min(Ws(m),_))}if(!m||!n.docView.dom.contains(m)){let U=Ht.find(n.docView,p);if(!U)return f>a.top+a.height/2?a.to:a.from;({node:m,offset:_}=Wf(U.dom,c,d))}let R=n.docView.nearest(m);if(!R)return null;if(R.isWidget&&((r=R.dom)===null||r===void 0?void 0:r.nodeType)==1){let U=R.dom.getBoundingClientRect();return e.y<U.top||e.y<=U.bottom&&e.x<=(U.left+U.right)/2?R.posAtStart:R.posAtEnd}else return R.localPosFromDOM(m,_)+R.posAtStart}function d0(n,e,t,s,i){let r=Math.round((s-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&t.height>n.defaultLineHeight*1.5){let l=n.viewState.heightOracle.textHeight,a=Math.floor((i-t.top-(n.defaultLineHeight-l)*.5)/l);r+=a*n.viewState.heightOracle.lineLength}let o=n.state.sliceDoc(t.from,t.to);return t.from+Pf(o,r,n.state.tabSize)}function Q1(n,e,t){let s,i=n;if(n.nodeType!=3||e!=(s=n.nodeValue.length))return!1;for(;;){let r=i.nextSibling;if(r){if(r.nodeName=="BR")break;return!1}else{let o=i.parentNode;if(!o||o.nodeName=="DIV")break;i=o}}return wr(n,s-1,s).getBoundingClientRect().right>t}function tR(n,e,t){return Q1(n,e,t)}function nR(n,e,t){if(e!=0)return Q1(n,e,t);for(let i=n;;){let r=i.parentNode;if(!r||r.nodeType!=1||r.firstChild!=i)return!1;if(r.classList.contains("cm-line"))break;i=r}let s=n.nodeType==1?n.getBoundingClientRect():wr(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect();return t-s.left>5}function qf(n,e,t){let s=n.lineBlockAt(e);if(Array.isArray(s.type)){let i;for(let r of s.type){if(r.from>e)break;if(!(r.to<e)){if(r.from<e&&r.to>e)return r;(!i||r.type==Mn.Text&&(i.type!=r.type||(t<0?r.from<e:r.to>e)))&&(i=r)}}return i||s}return s}function sR(n,e,t,s){let i=qf(n,e.head,e.assoc||-1),r=!s||i.type!=Mn.Text||!(n.lineWrapping||i.widgetLineBreaks)?null:n.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(r){let o=n.dom.getBoundingClientRect(),l=n.textDirectionAt(i.from),a=n.posAtCoords({x:t==(l==Pt.LTR)?o.right-1:o.left+1,y:(r.top+r.bottom)/2});if(a!=null)return fe.cursor(a,t?-1:1)}return fe.cursor(t?i.to:i.from,t?-1:1)}function f0(n,e,t,s){let i=n.state.doc.lineAt(e.head),r=n.bidiSpans(i),o=n.textDirectionAt(i.from);for(let l=e,a=null;;){let u=UP(i,r,o,l,t),c=L1;if(!u){if(i.number==(t?n.state.doc.lines:1))return l;c=`
`,i=n.state.doc.line(i.number+(t?1:-1)),r=n.bidiSpans(i),u=n.visualLineSide(i,!t)}if(a){if(!a(c))return l}else{if(!s)return u;a=s(c)}l=u}}function iR(n,e,t){let s=n.state.charCategorizer(e),i=s(t);return r=>{let o=s(r);return i==Ot.Space&&(i=o),i==o}}function rR(n,e,t,s){let i=e.head,r=t?1:-1;if(i==(t?n.state.doc.length:0))return fe.cursor(i,e.assoc);let o=e.goalColumn,l,a=n.contentDOM.getBoundingClientRect(),u=n.coordsAtPos(i,e.assoc||-1),c=n.documentTop;if(u)o==null&&(o=u.left-a.left),l=r<0?u.top:u.bottom;else{let p=n.viewState.lineBlockAt(i);o==null&&(o=Math.min(a.right-a.left,n.defaultCharacterWidth*(i-p.from))),l=(r<0?p.top:p.bottom)+c}let d=a.left+o,f=s??n.viewState.heightOracle.textHeight>>1;for(let p=0;;p+=10){let g=l+(f+p)*r,k=J1(n,{x:d,y:g},!1,r);if(g<a.top||g>a.bottom||(r<0?k<i:k>i)){let x=n.docView.coordsForChar(k),m=!x||g<x.top?-1:1;return fe.cursor(k,m,void 0,o)}}}function al(n,e,t){for(;;){let s=0;for(let i of n)i.between(e-1,e+1,(r,o,l)=>{if(e>r&&e<o){let a=s||t||(e-r<o-e?-1:1);e=a<0?r:o,s=a}});if(!s)return e}}function Y1(n,e){let t=null;for(let s=0;s<e.ranges.length;s++){let i=e.ranges[s],r=null;if(i.empty){let o=al(n,i.from,0);o!=i.from&&(r=fe.cursor(o,-1))}else{let o=al(n,i.from,-1),l=al(n,i.to,1);(o!=i.from||l!=i.to)&&(r=fe.range(i.from==i.anchor?o:l,i.from==i.head?o:l))}r&&(t||(t=e.ranges.slice()),t[s]=r)}return t?fe.create(t,e.mainIndex):e}function vd(n,e,t){let s=al(n.state.facet(Zl).map(i=>i(n)),t.from,e.head>t.from?-1:1);return s==t.from?t:fe.cursor(s,s<t.from?1:-1)}const Wo="";class oR{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(lt.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Wo}readRange(e,t){if(!e)return this;let s=e.parentNode;for(let i=e;;){this.findPointBefore(s,i);let r=this.text.length;this.readNode(i);let o=i.nextSibling;if(o==t)break;let l=bt.get(i),a=bt.get(o);(l&&a?l.breakAfter:(l?l.breakAfter:Mu(i))||Mu(o)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>r)&&!aR(o,t)&&this.lineBreak(),i=o}return this.findPointBefore(s,t),this}readTextNode(e){let t=e.nodeValue;for(let s of this.points)s.node==e&&(s.pos=this.text.length+Math.min(s.offset,t.length));for(let s=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let r=-1,o=1,l;if(this.lineSeparator?(r=t.indexOf(this.lineSeparator,s),o=this.lineSeparator.length):(l=i.exec(t))&&(r=l.index,o=l[0].length),this.append(t.slice(s,r<0?t.length:r)),r<0)break;if(this.lineBreak(),o>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=o-1);s=r+o}}readNode(e){if(e.cmIgnore)return;let t=bt.get(e),s=t&&t.overrideDOMText;if(s!=null){this.findPointInside(e,s.length);for(let i=s.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let s of this.points)s.node==e&&e.childNodes[s.offset]==t&&(s.pos=this.text.length)}findPointInside(e,t){for(let s of this.points)(e.nodeType==3?s.node==e:e.contains(s.node))&&(s.pos=this.text.length+(lR(e,s.node,s.offset)?t:0))}}function lR(n,e,t){for(;;){if(!e||t<Ws(e))return!1;if(e==n)return!0;t=_r(e)+1,e=e.parentNode}}function aR(n,e){let t;for(;!(n==e||!n);n=n.nextSibling){let s=bt.get(n);if(!(s?.isWidget||n.cmIgnore))return!1;s&&(t||(t=[])).push(s)}if(t)for(let s of t){let i=s.overrideDOMText;if(i?.length)return!1}return!0}class h0{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class uR{constructor(e,t,s,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:r,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,s,0))){let l=r||o?[]:dR(e),a=new oR(l,e.state);a.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=a.text,this.newSel=fR(l,this.bounds.from)}else{let l=e.observer.selectionRange,a=r&&r.node==l.focusNode&&r.offset==l.focusOffset||!Vf(e.contentDOM,l.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(l.focusNode,l.focusOffset),u=o&&o.node==l.anchorNode&&o.offset==l.anchorOffset||!Vf(e.contentDOM,l.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(l.anchorNode,l.anchorOffset),c=e.viewport;if((Re.ios||Re.chrome)&&e.state.selection.main.empty&&a!=u&&(c.from>0||c.to<e.state.doc.length)){let d=Math.min(a,u),f=Math.max(a,u),p=c.from-d,g=c.to-f;(p==0||p==1||d==0)&&(g==0||g==-1||f==e.state.doc.length)&&(a=0,u=e.state.doc.length)}this.newSel=fe.single(u,a)}}}function X1(n,e){let t,{newSel:s}=e,i=n.state.selection.main,r=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:l}=e.bounds,a=i.from,u=null;(r===8||Re.android&&e.text.length<l-o)&&(a=i.to,u="end");let c=Z1(n.state.doc.sliceString(o,l,Wo),e.text,a-o,u);c&&(Re.chrome&&r==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==Wo+Wo&&c.toB--,t={from:o+c.from,to:o+c.toA,insert:ut.of(e.text.slice(c.from,c.toB).split(Wo))})}else s&&(!n.hasFocus&&n.state.facet(ii)||s.main.eq(i))&&(s=null);if(!t&&!s)return!1;if(!t&&e.typeOver&&!i.empty&&s&&s.main.empty?t={from:i.from,to:i.to,insert:n.state.doc.slice(i.from,i.to)}:(Re.mac||Re.android)&&t&&t.from==t.to&&t.from==i.head-1&&/^\. ?$/.test(t.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(s&&t.insert.length==2&&(s=fe.single(s.main.anchor-1,s.main.head-1)),t={from:t.from,to:t.to,insert:ut.of([t.insert.toString().replace("."," ")])}):t&&t.from>=i.from&&t.to<=i.to&&(t.from!=i.from||t.to!=i.to)&&i.to-i.from-(t.to-t.from)<=4?t={from:i.from,to:i.to,insert:n.state.doc.slice(i.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,i.to))}:Re.chrome&&t&&t.from==t.to&&t.from==i.head&&t.insert.toString()==`
 `&&n.lineWrapping&&(s&&(s=fe.single(s.main.anchor-1,s.main.head-1)),t={from:i.from,to:i.to,insert:ut.of([" "])}),t)return ip(n,t,s,r);if(s&&!s.main.eq(i)){let o=!1,l="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(o=!0),l=n.inputState.lastSelectionOrigin,l=="select.pointer"&&(s=Y1(n.state.facet(Zl).map(a=>a(n)),s))),n.dispatch({selection:s,scrollIntoView:o,userEvent:l}),!0}else return!1}function ip(n,e,t,s=-1){if(Re.ios&&n.inputState.flushIOSKey(e))return!0;let i=n.state.selection.main;if(Re.android&&(e.to==i.to&&(e.from==i.from||e.from==i.from-1&&n.state.sliceDoc(e.from,i.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&no(n.contentDOM,"Enter",13)||(e.from==i.from-1&&e.to==i.to&&e.insert.length==0||s==8&&e.insert.length<e.to-e.from&&e.to>i.head)&&no(n.contentDOM,"Backspace",8)||e.from==i.from&&e.to==i.to+1&&e.insert.length==0&&no(n.contentDOM,"Delete",46)))return!0;let r=e.insert.toString();n.inputState.composing>=0&&n.inputState.composing++;let o,l=()=>o||(o=cR(n,e,t));return n.state.facet($1).some(a=>a(n,e.from,e.to,r,l))||n.dispatch(l()),!0}function cR(n,e,t){let s,i=n.state,r=i.selection.main,o=-1;if(e.from==e.to&&e.from<r.from||e.from>r.to){let a=e.from<r.from?-1:1,u=a<0?r.from:r.to,c=al(i.facet(Zl).map(d=>d(n)),u,a);e.from==c&&(o=c)}if(o>-1)s={changes:e,selection:fe.cursor(e.from+e.insert.length,-1)};else if(e.from>=r.from&&e.to<=r.to&&e.to-e.from>=(r.to-r.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&n.inputState.composing<0){let a=r.from<e.from?i.sliceDoc(r.from,e.from):"",u=r.to>e.to?i.sliceDoc(e.to,r.to):"";s=i.replaceSelection(n.state.toText(a+e.insert.sliceString(0,void 0,n.state.lineBreak)+u))}else{let a=i.changes(e),u=t&&t.main.to<=a.newLength?t.main:void 0;if(i.selection.ranges.length>1&&n.inputState.composing>=0&&e.to<=r.to&&e.to>=r.to-10){let c=n.state.sliceDoc(e.from,e.to),d,f=t&&K1(n,t.main.head);if(f){let k=e.insert.length-(e.to-e.from);d={from:f.from,to:f.to-k}}else d=n.state.doc.lineAt(r.head);let p=r.to-e.to,g=r.to-r.from;s=i.changeByRange(k=>{if(k.from==r.from&&k.to==r.to)return{changes:a,range:u||k.map(a)};let x=k.to-p,m=x-c.length;if(k.to-k.from!=g||n.state.sliceDoc(m,x)!=c||k.to>=d.from&&k.from<=d.to)return{range:k};let _=i.changes({from:m,to:x,insert:e.insert}),R=k.to-r.to;return{changes:_,range:u?fe.range(Math.max(0,u.anchor+R),Math.max(0,u.head+R)):k.map(_)}})}else s={changes:a,selection:u&&i.selection.replaceRange(u)}}let l="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,l+=".compose",n.inputState.compositionFirstChange&&(l+=".start",n.inputState.compositionFirstChange=!1)),i.update(s,{userEvent:l,scrollIntoView:!0})}function Z1(n,e,t,s){let i=Math.min(n.length,e.length),r=0;for(;r<i&&n.charCodeAt(r)==e.charCodeAt(r);)r++;if(r==i&&n.length==e.length)return null;let o=n.length,l=e.length;for(;o>0&&l>0&&n.charCodeAt(o-1)==e.charCodeAt(l-1);)o--,l--;if(s=="end"){let a=Math.max(0,r-Math.min(o,l));t-=o+a-r}if(o<r&&n.length<e.length){let a=t<=r&&t>=o?r-t:0;r-=a,l=r+(l-o),o=r}else if(l<r){let a=t<=r&&t>=l?r-t:0;r-=a,o=r+(o-l),l=r}return{from:r,toA:o,toB:l}}function dR(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:s,focusNode:i,focusOffset:r}=n.observer.selectionRange;return t&&(e.push(new h0(t,s)),(i!=t||r!=s)&&e.push(new h0(i,r))),e}function fR(n,e){if(n.length==0)return null;let t=n[0].pos,s=n.length==2?n[1].pos:t;return t>-1&&s>-1?fe.single(t+e,s+e):null}class hR{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Re.safari&&e.contentDOM.addEventListener("input",()=>null),Re.gecko&&DR(e.contentDOM.ownerDocument)}handleEvent(e){!xR(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,t){let s=this.handlers[e];if(s){for(let i of s.observers)i(this.view,t);for(let i of s.handlers){if(t.defaultPrevented)break;if(i(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=pR(e),s=this.handlers,i=this.view.contentDOM;for(let r in t)if(r!="scroll"){let o=!t[r].handlers.length,l=s[r];l&&o!=!l.handlers.length&&(i.removeEventListener(r,this.handleEvent),l=null),l||i.addEventListener(r,this.handleEvent,{passive:o})}for(let r in s)r!="scroll"&&!t[r]&&i.removeEventListener(r,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&tk.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),Re.android&&Re.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return Re.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=ek.find(s=>s.keyCode==e.keyCode))&&!e.ctrlKey||mR.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,no(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return!/^key/.test(e.type)||e.synthetic?!1:this.composing>0?!0:Re.safari&&!Re.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function p0(n,e){return(t,s)=>{try{return e.call(n,s,t)}catch(i){Bn(t.state,i)}}}function pR(n){let e=Object.create(null);function t(s){return e[s]||(e[s]={observers:[],handlers:[]})}for(let s of n){let i=s.spec,r=i&&i.plugin.domEventHandlers,o=i&&i.plugin.domEventObservers;if(r)for(let l in r){let a=r[l];a&&t(l).handlers.push(p0(s.value,a))}if(o)for(let l in o){let a=o[l];a&&t(l).observers.push(p0(s.value,a))}}for(let s in ws)t(s).handlers.push(ws[s]);for(let s in ds)t(s).observers.push(ds[s]);return e}const ek=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],mR="dthko",tk=[16,17,18,20,91,92,224,225],Ra=6;function Oa(n){return Math.max(0,n)*.7+8}function gR(n,e){return Math.max(Math.abs(n.clientX-e.clientX),Math.abs(n.clientY-e.clientY))}class vR{constructor(e,t,s,i){this.view=e,this.startEvent=t,this.style=s,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=CP(e.contentDOM),this.atoms=e.state.facet(Zl).map(o=>o(e));let r=e.contentDOM.ownerDocument;r.addEventListener("mousemove",this.move=this.move.bind(this)),r.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(lt.allowMultipleSelections)&&yR(e,t),this.dragging=kR(e,t)&&ik(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&gR(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,s=0,i=0,r=0,o=this.view.win.innerWidth,l=this.view.win.innerHeight;this.scrollParents.x&&({left:i,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:r,bottom:l}=this.scrollParents.y.getBoundingClientRect());let a=sp(this.view);e.clientX-a.left<=i+Ra?t=-Oa(i-e.clientX):e.clientX+a.right>=o-Ra&&(t=Oa(e.clientX-o)),e.clientY-a.top<=r+Ra?s=-Oa(r-e.clientY):e.clientY+a.bottom>=l-Ra&&(s=Oa(e.clientY-l)),this.setScrollSpeed(t,s)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:t}=this,s=Y1(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!s.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:s,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function yR(n,e){let t=n.state.facet(M1);return t.length?t[0](e):Re.mac?e.metaKey:e.ctrlKey}function bR(n,e){let t=n.state.facet(I1);return t.length?t[0](e):Re.mac?!e.altKey:!e.ctrlKey}function kR(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let s=Tl(n.root);if(!s||s.rangeCount==0)return!0;let i=s.getRangeAt(0).getClientRects();for(let r=0;r<i.length;r++){let o=i[r];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function xR(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,s;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(s=bt.get(t))&&s.ignoreEvent(e))return!1;return!0}const ws=Object.create(null),ds=Object.create(null),nk=Re.ie&&Re.ie_version<15||Re.ios&&Re.webkit_version<604;function _R(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),sk(n,t.value)},50)}function Sc(n,e,t){for(let s of n.facet(e))t=s(t,n);return t}function sk(n,e){e=Sc(n.state,ep,e);let{state:t}=n,s,i=1,r=t.toText(e),o=r.lines==t.selection.ranges.length;if(Gf!=null&&t.selection.ranges.every(a=>a.empty)&&Gf==r.toString()){let a=-1;s=t.changeByRange(u=>{let c=t.doc.lineAt(u.from);if(c.from==a)return{range:u};a=c.from;let d=t.toText((o?r.line(i++).text:e)+t.lineBreak);return{changes:{from:c.from,insert:d},range:fe.cursor(u.from+d.length)}})}else o?s=t.changeByRange(a=>{let u=r.line(i++);return{changes:{from:a.from,to:a.to,insert:u.text},range:fe.cursor(a.from+u.length)}}):s=t.replaceSelection(r);n.dispatch(s,{userEvent:"input.paste",scrollIntoView:!0})}ds.scroll=n=>{n.inputState.lastScrollTop=n.scrollDOM.scrollTop,n.inputState.lastScrollLeft=n.scrollDOM.scrollLeft};ws.keydown=(n,e)=>(n.inputState.setSelectionOrigin("select"),e.keyCode==27&&n.inputState.tabFocusMode!=0&&(n.inputState.tabFocusMode=Date.now()+2e3),!1);ds.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};ds.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};ws.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let s of n.state.facet(j1))if(t=s(n,e),t)break;if(!t&&e.button==0&&(t=CR(n,e)),t){let s=!n.hasFocus;n.inputState.startMouseSelection(new vR(n,e,t,s)),s&&n.observer.ignore(()=>{v1(n.contentDOM);let r=n.root.activeElement;r&&!r.contains(n.contentDOM)&&r.blur()});let i=n.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}else n.inputState.setSelectionOrigin("select.pointer");return!1};function m0(n,e,t,s){if(s==1)return fe.cursor(e,t);if(s==2)return XP(n.state,e,t);{let i=Ht.find(n.docView,e),r=n.state.doc.lineAt(i?i.posAtEnd:e),o=i?i.posAtStart:r.from,l=i?i.posAtEnd:r.to;return l<n.state.doc.length&&l==r.to&&l++,fe.range(o,l)}}let g0=(n,e,t)=>e>=t.top&&e<=t.bottom&&n>=t.left&&n<=t.right;function wR(n,e,t,s){let i=Ht.find(n.docView,e);if(!i)return 1;let r=e-i.posAtStart;if(r==0)return 1;if(r==i.length)return-1;let o=i.coordsAt(r,-1);if(o&&g0(t,s,o))return-1;let l=i.coordsAt(r,1);return l&&g0(t,s,l)?1:o&&o.bottom>=s?-1:1}function v0(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:wR(n,t,e.clientX,e.clientY)}}const SR=Re.ie&&Re.ie_version<=11;let y0=null,b0=0,k0=0;function ik(n){if(!SR)return n.detail;let e=y0,t=k0;return y0=n,k0=Date.now(),b0=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(b0+1)%3:1}function CR(n,e){let t=v0(n,e),s=ik(e),i=n.state.selection;return{update(r){r.docChanged&&(t.pos=r.changes.mapPos(t.pos),i=i.map(r.changes))},get(r,o,l){let a=v0(n,r),u,c=m0(n,a.pos,a.bias,s);if(t.pos!=a.pos&&!o){let d=m0(n,t.pos,t.bias,s),f=Math.min(d.from,c.from),p=Math.max(d.to,c.to);c=f<c.from?fe.range(f,p):fe.range(p,f)}return o?i.replaceRange(i.main.extend(c.from,c.to)):l&&s==1&&i.ranges.length>1&&(u=AR(i,a.pos))?u:l?i.addRange(c):fe.create([c])}}}function AR(n,e){for(let t=0;t<n.ranges.length;t++){let{from:s,to:i}=n.ranges[t];if(s<=e&&i>=e)return fe.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}return null}ws.dragstart=(n,e)=>{let{selection:{main:t}}=n.state;if(e.target.draggable){let i=n.docView.nearest(e.target);if(i&&i.isWidget){let r=i.posAtStart,o=r+i.length;(r>=t.to||o<=t.from)&&(t=fe.range(r,o))}}let{inputState:s}=n;return s.mouseSelection&&(s.mouseSelection.dragging=!0),s.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",Sc(n.state,tp,n.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1};ws.dragend=n=>(n.inputState.draggedContent=null,!1);function x0(n,e,t,s){if(t=Sc(n.state,ep,t),!t)return;let i=n.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:r}=n.inputState,o=s&&r&&bR(n,e)?{from:r.from,to:r.to}:null,l={from:i,insert:t},a=n.state.changes(o?[o,l]:l);n.focus(),n.dispatch({changes:a,selection:{anchor:a.mapPos(i,-1),head:a.mapPos(i,1)},userEvent:o?"move.drop":"input.drop"}),n.inputState.draggedContent=null}ws.drop=(n,e)=>{if(!e.dataTransfer)return!1;if(n.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let s=Array(t.length),i=0,r=()=>{++i==t.length&&x0(n,e,s.filter(o=>o!=null).join(n.state.lineBreak),!1)};for(let o=0;o<t.length;o++){let l=new FileReader;l.onerror=r,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(s[o]=l.result),r()},l.readAsText(t[o])}return!0}else{let s=e.dataTransfer.getData("Text");if(s)return x0(n,e,s,!0),!0}return!1};ws.paste=(n,e)=>{if(n.state.readOnly)return!0;n.observer.flush();let t=nk?null:e.clipboardData;return t?(sk(n,t.getData("text/plain")||t.getData("text/uri-list")),!0):(_R(n),!1)};function ER(n,e){let t=n.dom.parentNode;if(!t)return;let s=t.appendChild(document.createElement("textarea"));s.style.cssText="position: fixed; left: -10000px; top: 10px",s.value=e,s.focus(),s.selectionEnd=e.length,s.selectionStart=0,setTimeout(()=>{s.remove(),n.focus()},50)}function TR(n){let e=[],t=[],s=!1;for(let i of n.selection.ranges)i.empty||(e.push(n.sliceDoc(i.from,i.to)),t.push(i));if(!e.length){let i=-1;for(let{from:r}of n.selection.ranges){let o=n.doc.lineAt(r);o.number>i&&(e.push(o.text),t.push({from:o.from,to:Math.min(n.doc.length,o.to+1)})),i=o.number}s=!0}return{text:Sc(n,tp,e.join(n.lineBreak)),ranges:t,linewise:s}}let Gf=null;ws.copy=ws.cut=(n,e)=>{let{text:t,ranges:s,linewise:i}=TR(n.state);if(!t&&!i)return!1;Gf=i?t:null,e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:s,scrollIntoView:!0,userEvent:"delete.cut"});let r=nk?null:e.clipboardData;return r?(r.clearData(),r.setData("text/plain",t),!0):(ER(n,t),!1)};const rk=hi.define();function ok(n,e){let t=[];for(let s of n.facet(N1)){let i=s(n,e);i&&t.push(i)}return t.length?n.update({effects:t,annotations:rk.of(!0)}):null}function lk(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let t=ok(n.state,e);t?n.dispatch(t):n.update([])}},10)}ds.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),lk(n)};ds.blur=n=>{n.observer.clearSelectionRange(),lk(n)};ds.compositionstart=ds.compositionupdate=n=>{n.observer.editContext||(n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0))};ds.compositionend=n=>{n.observer.editContext||(n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,Re.chrome&&Re.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.hasComposition&&n.update([])},50))};ds.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};ws.beforeinput=(n,e)=>{var t,s;if(e.inputType=="insertReplacementText"&&n.observer.editContext){let r=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),o=e.getTargetRanges();if(r&&o.length){let l=o[0],a=n.posAtDOM(l.startContainer,l.startOffset),u=n.posAtDOM(l.endContainer,l.endOffset);return ip(n,{from:a,to:u,insert:n.state.toText(r)},null),!0}}let i;if(Re.chrome&&Re.android&&(i=ek.find(r=>r.inputType==e.inputType))&&(n.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let r=((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>r+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}return Re.ios&&e.inputType=="deleteContentForward"&&n.observer.flushSoon(),Re.safari&&e.inputType=="insertText"&&n.inputState.composing>=0&&setTimeout(()=>ds.compositionend(n,e),20),!1};const _0=new Set;function DR(n){_0.has(n)||(_0.add(n),n.addEventListener("copy",()=>{}),n.addEventListener("cut",()=>{}))}const w0=["pre-wrap","normal","pre-line","break-spaces"];let mo=!1;function S0(){mo=!1}class PR{constructor(e){this.lineWrapping=e,this.doc=ut.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let s=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(s+=Math.max(0,Math.ceil((t-e-s*this.lineLength*.5)/this.lineLength))),this.lineHeight*s}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return w0.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let s=0;s<e.length;s++){let i=e[s];i<0?s++:this.heightSamples[Math.floor(i*10)]||(t=!0,this.heightSamples[Math.floor(i*10)]=!0)}return t}refresh(e,t,s,i,r,o){let l=w0.indexOf(e)>-1,a=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=l;if(this.lineWrapping=l,this.lineHeight=t,this.charWidth=s,this.textHeight=i,this.lineLength=r,a){this.heightSamples={};for(let u=0;u<o.length;u++){let c=o[u];c<0?u++:this.heightSamples[Math.floor(c*10)]=!0}}return a}}class RR{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class Ns{constructor(e,t,s,i,r){this.from=e,this.length=t,this.top=s,this.height=i,this._content=r}get type(){return typeof this._content=="number"?Mn.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Ni?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Ns(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var Dt=(function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n})(Dt||(Dt={}));const ou=.001;class In{constructor(e,t,s=2){this.length=e,this.height=t,this.flags=s}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>ou&&(mo=!0),this.height=e)}replace(e,t,s){return In.of(s)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,s,i){let r=this,o=s.doc;for(let l=i.length-1;l>=0;l--){let{fromA:a,toA:u,fromB:c,toB:d}=i[l],f=r.lineAt(a,Dt.ByPosNoHeight,s.setDoc(t),0,0),p=f.to>=u?f:r.lineAt(u,Dt.ByPosNoHeight,s,0,0);for(d+=p.to-u,u=p.to;l>0&&f.from<=i[l-1].toA;)a=i[l-1].fromA,c=i[l-1].fromB,l--,a<f.from&&(f=r.lineAt(a,Dt.ByPosNoHeight,s,0,0));c+=f.from-a,a=f.from;let g=rp.build(s.setDoc(o),e,c,d);r=Vu(r,r.replace(a,u,g))}return r.updateHeight(s,0)}static empty(){return new Jn(0,0)}static of(e){if(e.length==1)return e[0];let t=0,s=e.length,i=0,r=0;for(;;)if(t==s)if(i>r*2){let l=e[t-1];l.break?e.splice(--t,1,l.left,null,l.right):e.splice(--t,1,l.left,l.right),s+=1+l.break,i-=l.size}else if(r>i*2){let l=e[s];l.break?e.splice(s,1,l.left,null,l.right):e.splice(s,1,l.left,l.right),s+=2+l.break,r-=l.size}else break;else if(i<r){let l=e[t++];l&&(i+=l.size)}else{let l=e[--s];l&&(r+=l.size)}let o=0;return e[t-1]==null?(o=1,t--):e[t]==null&&(o=1,s++),new OR(In.of(e.slice(0,t)),o,In.of(e.slice(s)))}}function Vu(n,e){return n==e?n:(n.constructor!=e.constructor&&(mo=!0),e)}In.prototype.size=1;class ak extends In{constructor(e,t,s){super(e,t),this.deco=s}blockAt(e,t,s,i){return new Ns(i,this.length,s,this.height,this.deco||0)}lineAt(e,t,s,i,r){return this.blockAt(0,s,i,r)}forEachLine(e,t,s,i,r,o){e<=r+this.length&&t>=r&&o(this.blockAt(0,s,i,r))}updateHeight(e,t=0,s=!1,i){return i&&i.from<=t&&i.more&&this.setHeight(i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Jn extends ak{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,s,i){return new Ns(i,this.length,s,this.height,this.breaks)}replace(e,t,s){let i=s[0];return s.length==1&&(i instanceof Jn||i instanceof ln&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof ln?i=new Jn(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):In.of(s)}updateHeight(e,t=0,s=!1,i){return i&&i.from<=t&&i.more?this.setHeight(i.heights[i.index++]):(s||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class ln extends In{constructor(e){super(e,0)}heightMetrics(e,t){let s=e.doc.lineAt(t).number,i=e.doc.lineAt(t+this.length).number,r=i-s+1,o,l=0;if(e.lineWrapping){let a=Math.min(this.height,e.lineHeight*r);o=a/r,this.length>r+1&&(l=(this.height-a)/(this.length-r-1))}else o=this.height/r;return{firstLine:s,lastLine:i,perLine:o,perChar:l}}blockAt(e,t,s,i){let{firstLine:r,lastLine:o,perLine:l,perChar:a}=this.heightMetrics(t,i);if(t.lineWrapping){let u=i+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-s)/this.height))*this.length)),c=t.doc.lineAt(u),d=l+c.length*a,f=Math.max(s,e-d/2);return new Ns(c.from,c.length,f,d,0)}else{let u=Math.max(0,Math.min(o-r,Math.floor((e-s)/l))),{from:c,length:d}=t.doc.line(r+u);return new Ns(c,d,s+l*u,l,0)}}lineAt(e,t,s,i,r){if(t==Dt.ByHeight)return this.blockAt(e,s,i,r);if(t==Dt.ByPosNoHeight){let{from:p,to:g}=s.doc.lineAt(e);return new Ns(p,g-p,0,0,0)}let{firstLine:o,perLine:l,perChar:a}=this.heightMetrics(s,r),u=s.doc.lineAt(e),c=l+u.length*a,d=u.number-o,f=i+l*d+a*(u.from-r-d);return new Ns(u.from,u.length,Math.max(i,Math.min(f,i+this.height-c)),c,0)}forEachLine(e,t,s,i,r,o){e=Math.max(e,r),t=Math.min(t,r+this.length);let{firstLine:l,perLine:a,perChar:u}=this.heightMetrics(s,r);for(let c=e,d=i;c<=t;){let f=s.doc.lineAt(c);if(c==e){let g=f.number-l;d+=a*g+u*(e-r-g)}let p=a+u*f.length;o(new Ns(f.from,f.length,d,p,0)),d+=p,c=f.to+1}}replace(e,t,s){let i=this.length-t;if(i>0){let r=s[s.length-1];r instanceof ln?s[s.length-1]=new ln(r.length+i):s.push(null,new ln(i-1))}if(e>0){let r=s[0];r instanceof ln?s[0]=new ln(e+r.length):s.unshift(new ln(e-1),null)}return In.of(s)}decomposeLeft(e,t){t.push(new ln(e-1),null)}decomposeRight(e,t){t.push(null,new ln(this.length-e-1))}updateHeight(e,t=0,s=!1,i){let r=t+this.length;if(i&&i.from<=t+this.length&&i.more){let o=[],l=Math.max(t,i.from),a=-1;for(i.from>t&&o.push(new ln(i.from-t-1).updateHeight(e,t));l<=r&&i.more;){let c=e.doc.lineAt(l).length;o.length&&o.push(null);let d=i.heights[i.index++];a==-1?a=d:Math.abs(d-a)>=ou&&(a=-2);let f=new Jn(c,d);f.outdated=!1,o.push(f),l+=c+1}l<=r&&o.push(null,new ln(r-l).updateHeight(e,l));let u=In.of(o);return(a<0||Math.abs(u.height-this.height)>=ou||Math.abs(a-this.heightMetrics(e,t).perLine)>=ou)&&(mo=!0),Vu(this,u)}else(s||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class OR extends In{constructor(e,t,s){super(e.length+t+s.length,e.height+s.height,t|(e.outdated||s.outdated?2:0)),this.left=e,this.right=s,this.size=e.size+s.size}get break(){return this.flags&1}blockAt(e,t,s,i){let r=s+this.left.height;return e<r?this.left.blockAt(e,t,s,i):this.right.blockAt(e,t,r,i+this.left.length+this.break)}lineAt(e,t,s,i,r){let o=i+this.left.height,l=r+this.left.length+this.break,a=t==Dt.ByHeight?e<o:e<l,u=a?this.left.lineAt(e,t,s,i,r):this.right.lineAt(e,t,s,o,l);if(this.break||(a?u.to<l:u.from>l))return u;let c=t==Dt.ByPosNoHeight?Dt.ByPosNoHeight:Dt.ByPos;return a?u.join(this.right.lineAt(l,c,s,o,l)):this.left.lineAt(l,c,s,i,r).join(u)}forEachLine(e,t,s,i,r,o){let l=i+this.left.height,a=r+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,t,s,i,r,o),t>=a&&this.right.forEachLine(e,t,s,l,a,o);else{let u=this.lineAt(a,Dt.ByPos,s,i,r);e<u.from&&this.left.forEachLine(e,u.from-1,s,i,r,o),u.to>=e&&u.from<=t&&o(u),t>u.to&&this.right.forEachLine(u.to+1,t,s,l,a,o)}}replace(e,t,s){let i=this.left.length+this.break;if(t<i)return this.balanced(this.left.replace(e,t,s),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,t-i,s));let r=[];e>0&&this.decomposeLeft(e,r);let o=r.length;for(let l of s)r.push(l);if(e>0&&C0(r,o-1),t<this.length){let l=r.length;this.decomposeRight(t,r),C0(r,l)}return In.of(r)}decomposeLeft(e,t){let s=this.left.length;if(e<=s)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(s++,e>=s&&t.push(null)),e>s&&this.right.decomposeLeft(e-s,t)}decomposeRight(e,t){let s=this.left.length,i=s+this.break;if(e>=i)return this.right.decomposeRight(e-i,t);e<s&&this.left.decomposeRight(e,t),this.break&&e<i&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?In.of(this.break?[e,null,t]:[e,t]):(this.left=Vu(this.left,e),this.right=Vu(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,s=!1,i){let{left:r,right:o}=this,l=t+r.length+this.break,a=null;return i&&i.from<=t+r.length&&i.more?a=r=r.updateHeight(e,t,s,i):r.updateHeight(e,t,s),i&&i.from<=l+o.length&&i.more?a=o=o.updateHeight(e,l,s,i):o.updateHeight(e,l,s),a?this.balanced(r,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function C0(n,e){let t,s;n[e]==null&&(t=n[e-1])instanceof ln&&(s=n[e+1])instanceof ln&&n.splice(e-1,3,new ln(t.length+1+s.length))}const LR=5;class rp{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let s=Math.min(t,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof Jn?i.length+=s-this.pos:(s>this.pos||!this.isCovered)&&this.nodes.push(new Jn(s-this.pos,-1)),this.writtenTo=s,t>s&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,s){if(e<t||s.heightRelevant){let i=s.widget?s.widget.estimatedHeight:0,r=s.widget?s.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let o=t-e;s.block?this.addBlock(new ak(o,i,s)):(o||r||i>=LR)&&this.addLineDeco(i,r,o)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Jn(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let s=new ln(t-e);return this.oracle.doc.lineAt(e).to==t&&(s.flags|=4),s}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Jn)return e;let t=new Jn(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,s){let i=this.ensureLine();i.length+=s,i.collapsed+=s,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=t,this.writtenTo=this.pos=this.pos+s}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof Jn)&&!this.isCovered?this.nodes.push(new Jn(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let s=e;for(let i of this.nodes)i instanceof Jn&&i.updateHeight(this.oracle,s),s+=i?i.length:1;return this.nodes}static build(e,t,s,i){let r=new rp(s,e);return at.spans(t,s,i,r,0),r.finish(s)}}function MR(n,e,t){let s=new IR;return at.compare(n,e,t,s,0),s.changes}class IR{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,s,i){(e<t||s&&s.heightRelevant||i&&i.heightRelevant)&&ru(e,t,this.changes,5)}}function jR(n,e){let t=n.getBoundingClientRect(),s=n.ownerDocument,i=s.defaultView||window,r=Math.max(0,t.left),o=Math.min(i.innerWidth,t.right),l=Math.max(0,t.top),a=Math.min(i.innerHeight,t.bottom);for(let u=n.parentNode;u&&u!=s.body;)if(u.nodeType==1){let c=u,d=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&d.overflow!="visible"){let f=c.getBoundingClientRect();r=Math.max(r,f.left),o=Math.min(o,f.right),l=Math.max(l,f.top),a=Math.min(u==n.parentNode?i.innerHeight:a,f.bottom)}u=d.position=="absolute"||d.position=="fixed"?c.offsetParent:c.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:r-t.left,right:Math.max(r,o)-t.left,top:l-(t.top+e),bottom:Math.max(l,a)-(t.top+e)}}function VR(n){let e=n.getBoundingClientRect(),t=n.ownerDocument.defaultView||window;return e.left<t.innerWidth&&e.right>0&&e.top<t.innerHeight&&e.bottom>0}function $R(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class yd{constructor(e,t,s,i){this.from=e,this.to=t,this.size=s,this.displaySize=i}static same(e,t){if(e.length!=t.length)return!1;for(let s=0;s<e.length;s++){let i=e[s],r=t[s];if(i.from!=r.from||i.to!=r.to||i.size!=r.size)return!1}return!0}draw(e,t){return We.replace({widget:new NR(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class NR extends Ui{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class A0{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=E0,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Pt.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(np).some(s=>typeof s!="function"&&s.class=="cm-lineWrapping");this.heightOracle=new PR(t),this.stateDeco=e.facet(Pl).filter(s=>typeof s!="function"),this.heightMap=In.empty().applyChanges(this.stateDeco,ut.empty,this.heightOracle.setDoc(e.doc),[new as(0,0,0,e.doc.length)]);for(let s=0;s<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());s++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=We.set(this.lineGaps.map(s=>s.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let s=0;s<=1;s++){let i=s?t.head:t.anchor;if(!e.some(({from:r,to:o})=>i>=r&&i<=o)){let{from:r,to:o}=this.lineBlockAt(i);e.push(new La(r,o))}}return this.viewports=e.sort((s,i)=>s.from-i.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?E0:new op(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(qo(e,this.scaler))})}update(e,t=null){this.state=e.state;let s=this.stateDeco;this.stateDeco=this.state.facet(Pl).filter(c=>typeof c!="function");let i=e.changedRanges,r=as.extendWithRanges(i,MR(s,this.stateDeco,e?e.changes:Xt.empty(this.state.doc.length))),o=this.heightMap.height,l=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);S0(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),r),(this.heightMap.height!=o||mo)&&(e.flags|=2),l?(this.scrollAnchorPos=e.changes.mapPos(l.from,-1),this.scrollAnchorHeight=l.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let a=r.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<a.from||t.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,t));let u=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,e.flags|=this.updateForViewport(),(u||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(F1)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,s=window.getComputedStyle(t),i=this.heightOracle,r=s.whiteSpace;this.defaultTextDirection=s.direction=="rtl"?Pt.RTL:Pt.LTR;let o=this.heightOracle.mustRefreshForWrapping(r),l=t.getBoundingClientRect(),a=o||this.mustMeasureContent||this.contentDOMHeight!=l.height;this.contentDOMHeight=l.height,this.mustMeasureContent=!1;let u=0,c=0;if(l.width&&l.height){let{scaleX:U,scaleY:N}=g1(t,l);(U>.005&&Math.abs(this.scaleX-U)>.005||N>.005&&Math.abs(this.scaleY-N)>.005)&&(this.scaleX=U,this.scaleY=N,u|=16,o=a=!0)}let d=(parseInt(s.paddingTop)||0)*this.scaleY,f=(parseInt(s.paddingBottom)||0)*this.scaleY;(this.paddingTop!=d||this.paddingBottom!=f)&&(this.paddingTop=d,this.paddingBottom=f,u|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=16);let p=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=p&&(this.scrollAnchorHeight=-1,this.scrollTop=p),this.scrolledToBottom=b1(e.scrollDOM);let g=(this.printing?$R:jR)(t,this.paddingTop),k=g.top-this.pixelViewport.top,x=g.bottom-this.pixelViewport.bottom;this.pixelViewport=g;let m=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(m!=this.inView&&(this.inView=m,m&&(a=!0)),!this.inView&&!this.scrollTarget&&!VR(e.dom))return 0;let _=l.width;if((this.contentDOMWidth!=_||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=l.width,this.editorHeight=e.scrollDOM.clientHeight,u|=16),a){let U=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(U)&&(o=!0),o||i.lineWrapping&&Math.abs(_-this.contentDOMWidth)>i.charWidth){let{lineHeight:N,charWidth:A,textHeight:w}=e.docView.measureTextSize();o=N>0&&i.refresh(r,N,A,w,Math.max(5,_/A),U),o&&(e.docView.minWidth=0,u|=16)}k>0&&x>0?c=Math.max(k,x):k<0&&x<0&&(c=Math.min(k,x)),S0();for(let N of this.viewports){let A=N.from==this.viewport.from?U:e.docView.measureVisibleLineHeights(N);this.heightMap=(o?In.empty().applyChanges(this.stateDeco,ut.empty,this.heightOracle,[new as(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,o,new RR(N.from,A))}mo&&(u|=2)}let R=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return R&&(u&2&&(u|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),u|=this.updateForViewport()),(u&2||R)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let s=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,r=this.heightOracle,{visibleTop:o,visibleBottom:l}=this,a=new La(i.lineAt(o-s*1e3,Dt.ByHeight,r,0,0).from,i.lineAt(l+(1-s)*1e3,Dt.ByHeight,r,0,0).to);if(t){let{head:u}=t.range;if(u<a.from||u>a.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),d=i.lineAt(u,Dt.ByPos,r,0,0),f;t.y=="center"?f=(d.top+d.bottom)/2-c/2:t.y=="start"||t.y=="nearest"&&u<a.from?f=d.top:f=d.bottom-c,a=new La(i.lineAt(f-1e3/2,Dt.ByHeight,r,0,0).from,i.lineAt(f+c+1e3/2,Dt.ByHeight,r,0,0).to)}}return a}mapViewport(e,t){let s=t.mapPos(e.from,-1),i=t.mapPos(e.to,1);return new La(this.heightMap.lineAt(s,Dt.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,Dt.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},s=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,Dt.ByPos,this.heightOracle,0,0),{bottom:r}=this.heightMap.lineAt(t,Dt.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:l}=this;return(e==0||i<=o-Math.max(10,Math.min(-s,250)))&&(t==this.state.doc.length||r>=l+Math.max(10,Math.min(s,250)))&&i>o-2*1e3&&r<l+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let s=[];for(let i of e)t.touchesRange(i.from,i.to)||s.push(new yd(t.mapPos(i.from),t.mapPos(i.to),i.size,i.displaySize));return s}ensureLineGaps(e,t){let s=this.heightOracle.lineWrapping,i=s?1e4:2e3,r=i>>1,o=i<<1;if(this.defaultTextDirection!=Pt.LTR&&!s)return[];let l=[],a=(c,d,f,p)=>{if(d-c<r)return;let g=this.state.selection.main,k=[g.from];g.empty||k.push(g.to);for(let m of k)if(m>c&&m<d){a(c,m-10,f,p),a(m+10,d,f,p);return}let x=FR(e,m=>m.from>=f.from&&m.to<=f.to&&Math.abs(m.from-c)<r&&Math.abs(m.to-d)<r&&!k.some(_=>m.from<_&&m.to>_));if(!x){if(d<f.to&&t&&s&&t.visibleRanges.some(R=>R.from<=d&&R.to>=d)){let R=t.moveToLineBoundary(fe.cursor(d),!1,!0).head;R>c&&(d=R)}let m=this.gapSize(f,c,d,p),_=s||m<2e6?m:2e6;x=new yd(c,d,m,_)}l.push(x)},u=c=>{if(c.length<o||c.type!=Mn.Text)return;let d=BR(c.from,c.to,this.stateDeco);if(d.total<o)return;let f=this.scrollTarget?this.scrollTarget.range.head:null,p,g;if(s){let k=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,x,m;if(f!=null){let _=Ia(d,f),R=((this.visibleBottom-this.visibleTop)/2+k)/c.height;x=_-R,m=_+R}else x=(this.visibleTop-c.top-k)/c.height,m=(this.visibleBottom-c.top+k)/c.height;p=Ma(d,x),g=Ma(d,m)}else{let k=d.total*this.heightOracle.charWidth,x=i*this.heightOracle.charWidth,m=0;if(k>2e6)for(let A of e)A.from>=c.from&&A.from<c.to&&A.size!=A.displaySize&&A.from*this.heightOracle.charWidth+m<this.pixelViewport.left&&(m=A.size-A.displaySize);let _=this.pixelViewport.left+m,R=this.pixelViewport.right+m,U,N;if(f!=null){let A=Ia(d,f),w=((R-_)/2+x)/k;U=A-w,N=A+w}else U=(_-x)/k,N=(R+x)/k;p=Ma(d,U),g=Ma(d,N)}p>c.from&&a(c.from,p,c,d),g<c.to&&a(g,c.to,c,d)};for(let c of this.viewportLines)Array.isArray(c.type)?c.type.forEach(u):u(c);return l}gapSize(e,t,s,i){let r=Ia(i,s)-Ia(i,t);return this.heightOracle.lineWrapping?e.height*r:i.total*this.heightOracle.charWidth*r}updateLineGaps(e){yd.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=We.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let s=[];at.spans(t,this.viewport.from,this.viewport.to,{span(r,o){s.push({from:r,to:o})},point(){}},20);let i=0;if(s.length!=this.visibleRanges.length)i=12;else for(let r=0;r<s.length&&!(i&8);r++){let o=this.visibleRanges[r],l=s[r];(o.from!=l.from||o.to!=l.to)&&(i|=4,e&&e.mapPos(o.from,-1)==l.from&&e.mapPos(o.to,1)==l.to||(i|=8))}return this.visibleRanges=s,i}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||qo(this.heightMap.lineAt(e,Dt.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||qo(this.heightMap.lineAt(this.scaler.fromDOM(e),Dt.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return qo(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class La{constructor(e,t){this.from=e,this.to=t}}function BR(n,e,t){let s=[],i=n,r=0;return at.spans(t,n,e,{span(){},point(o,l){o>i&&(s.push({from:i,to:o}),r+=o-i),i=l}},20),i<e&&(s.push({from:i,to:e}),r+=e-i),{total:r,ranges:s}}function Ma({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let s=Math.floor(n*t);for(let i=0;;i++){let{from:r,to:o}=e[i],l=o-r;if(s<=l)return r+s;s-=l}}function Ia(n,e){let t=0;for(let{from:s,to:i}of n.ranges){if(e<=i){t+=e-s;break}t+=i-s}return t/n.total}function FR(n,e){for(let t of n)if(e(t))return t}const E0={toDOM(n){return n},fromDOM(n){return n},scale:1,eq(n){return n==this}};class op{constructor(e,t,s){let i=0,r=0,o=0;this.viewports=s.map(({from:l,to:a})=>{let u=t.lineAt(l,Dt.ByPos,e,0,0).top,c=t.lineAt(a,Dt.ByPos,e,0,0).bottom;return i+=c-u,{from:l,to:a,top:u,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(t.height-i);for(let l of this.viewports)l.domTop=o+(l.top-r)*this.scale,o=l.domBottom=l.domTop+(l.bottom-l.top),r=l.bottom}toDOM(e){for(let t=0,s=0,i=0;;t++){let r=t<this.viewports.length?this.viewports[t]:null;if(!r||e<r.top)return i+(e-s)*this.scale;if(e<=r.bottom)return r.domTop+(e-r.top);s=r.bottom,i=r.domBottom}}fromDOM(e){for(let t=0,s=0,i=0;;t++){let r=t<this.viewports.length?this.viewports[t]:null;if(!r||e<r.domTop)return s+(e-i)/this.scale;if(e<=r.domBottom)return r.top+(e-r.domTop);s=r.bottom,i=r.domBottom}}eq(e){return e instanceof op?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,s)=>t.from==e.viewports[s].from&&t.to==e.viewports[s].to):!1}}function qo(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),s=e.toDOM(n.bottom);return new Ns(n.from,n.length,t,s-t,Array.isArray(n._content)?n._content.map(i=>qo(i,e)):n._content)}const ja=Ie.define({combine:n=>n.join(" ")}),Kf=Ie.define({combine:n=>n.indexOf(!0)>-1}),Jf=Vi.newName(),uk=Vi.newName(),ck=Vi.newName(),dk={"&light":"."+uk,"&dark":"."+ck};function Qf(n,e,t){return new Vi(e,{finish(s){return/&/.test(s)?s.replace(/&\w*/,i=>{if(i=="&")return n;if(!t||!t[i])throw new RangeError(`Unsupported selector: ${i}`);return t[i]}):n+" "+s}})}const UR=Qf("."+Jf,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},dk),zR={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},bd=Re.ie&&Re.ie_version<=11;class HR{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new AP,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let s of t)this.queue.push(s);(Re.ie&&Re.ie_version<=11||Re.ios&&e.composing)&&t.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&Re.android&&e.constructor.EDIT_CONTEXT!==!1&&!(Re.chrome&&Re.chrome_version<126)&&(this.editContext=new qR(e),e.state.facet(ii)&&(e.contentDOM.editContext=this.editContext.editContext)),bd&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,s)=>t!=e[s]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:s}=this,i=this.selectionRange;if(s.state.facet(ii)?s.root.activeElement!=this.dom:!iu(this.dom,i))return;let r=i.anchorNode&&s.docView.nearest(i.anchorNode);if(r&&r.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(Re.ie&&Re.ie_version<=11||Re.android&&Re.chrome)&&!s.state.selection.main.empty&&i.focusNode&&ol(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=Tl(e.root);if(!t)return!1;let s=Re.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&WR(this.view,t)||t;if(!s||this.selectionRange.eq(s))return!1;let i=iu(this.dom,s);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&TP(this.dom,s)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(s),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let s=this.dom;s;)if(s.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==s?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(s),s=s.assignedSlot||s.parentNode;else if(s.nodeType==11)s=s.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);for(let s of this.scrollTargets=t)s.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,zR),bd&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),bd&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var s;if(!this.delayedAndroidKey){let i=()=>{let r=this.delayedAndroidKey;r&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=r.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&r.force&&no(this.dom,r.key,r.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((s=this.delayedAndroidKey)===null||s===void 0)&&s.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,s=-1,i=!1;for(let r of e){let o=this.readMutation(r);o&&(o.typeOver&&(i=!0),t==-1?{from:t,to:s}=o:(t=Math.min(o.from,t),s=Math.max(o.to,s)))}return{from:t,to:s,typeOver:i}}readChange(){let{from:e,to:t,typeOver:s}=this.processRecords(),i=this.selectionChanged&&iu(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let r=new uR(this.view,e,t,s);return this.view.docView.domChanged={newSel:r.newSel?r.newSel.main:null},r}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let s=this.view.state,i=X1(this.view,t);return this.view.state==s&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let s=T0(t,e.previousSibling||e.target.previousSibling,-1),i=T0(t,e.nextSibling||e.target.nextSibling,1);return{from:s?t.posAfter(s):t.posAtStart,to:i?t.posBefore(i):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(ii)!=e.state.facet(ii)&&(e.view.contentDOM.editContext=e.state.facet(ii)?this.editContext.editContext:null))}destroy(){var e,t,s;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(s=this.resizeScroll)===null||s===void 0||s.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function T0(n,e,t){for(;e;){let s=bt.get(e);if(s&&s.parent==n)return s;let i=e.parentNode;e=i!=n.dom?i:t>0?e.nextSibling:e.previousSibling}return null}function D0(n,e){let t=e.startContainer,s=e.startOffset,i=e.endContainer,r=e.endOffset,o=n.docView.domAtPos(n.state.selection.main.anchor);return ol(o.node,o.offset,i,r)&&([t,s,i,r]=[i,r,t,s]),{anchorNode:t,anchorOffset:s,focusNode:i,focusOffset:r}}function WR(n,e){if(e.getComposedRanges){let i=e.getComposedRanges(n.root)[0];if(i)return D0(n,i)}let t=null;function s(i){i.preventDefault(),i.stopImmediatePropagation(),t=i.getTargetRanges()[0]}return n.contentDOM.addEventListener("beforeinput",s,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",s,!0),t?D0(n,t):null}class qR{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=s=>{let i=e.state.selection.main,{anchor:r,head:o}=i,l=this.toEditorPos(s.updateRangeStart),a=this.toEditorPos(s.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:s.updateRangeStart,editorBase:l,drifted:!1});let u=a-l>s.text.length;l==this.from&&r<this.from?l=r:a==this.to&&r>this.to&&(a=r);let c=Z1(e.state.sliceDoc(l,a),s.text,(u?i.from:i.to)-l,u?"end":null);if(!c){let f=fe.single(this.toEditorPos(s.selectionStart),this.toEditorPos(s.selectionEnd));f.main.eq(i)||e.dispatch({selection:f,userEvent:"select"});return}let d={from:c.from+l,to:c.toA+l,insert:ut.of(s.text.slice(c.from,c.toB).split(`
`))};if((Re.mac||Re.android)&&d.from==o-1&&/^\. ?$/.test(s.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(d={from:l,to:a,insert:ut.of([s.text.replace("."," ")])}),this.pendingContextChange=d,!e.state.readOnly){let f=this.to-this.from+(d.to-d.from+d.insert.length);ip(e,d,fe.single(this.toEditorPos(s.selectionStart,f),this.toEditorPos(s.selectionEnd,f)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),d.from<d.to&&!d.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(t.text.slice(Math.max(0,s.updateRangeStart-1),Math.min(t.text.length,s.updateRangeStart+1)))&&this.handlers.compositionend(s)},this.handlers.characterboundsupdate=s=>{let i=[],r=null;for(let o=this.toEditorPos(s.rangeStart),l=this.toEditorPos(s.rangeEnd);o<l;o++){let a=e.coordsForChar(o);r=a&&new DOMRect(a.left,a.top,a.right-a.left,a.bottom-a.top)||r||new DOMRect,i.push(r)}t.updateCharacterBounds(s.rangeStart,i)},this.handlers.textformatupdate=s=>{let i=[];for(let r of s.getTextFormats()){let o=r.underlineStyle,l=r.underlineThickness;if(!/none/i.test(o)&&!/none/i.test(l)){let a=this.toEditorPos(r.rangeStart),u=this.toEditorPos(r.rangeEnd);if(a<u){let c=`text-decoration: underline ${/^[a-z]/.test(o)?o+" ":o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${/thin/i.test(l)?1:2}px`;i.push(We.mark({attributes:{style:c}}).range(a,u))}}}e.dispatch({effects:z1.of(We.set(i))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:s}=this.composing;this.composing=null,s&&this.reset(e.state)}};for(let s in this.handlers)t.addEventListener(s,this.handlers[s]);this.measureReq={read:s=>{this.editContext.updateControlBounds(s.contentDOM.getBoundingClientRect());let i=Tl(s.root);i&&i.rangeCount&&this.editContext.updateSelectionBounds(i.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,s=!1,i=this.pendingContextChange;return e.changes.iterChanges((r,o,l,a,u)=>{if(s)return;let c=u.length-(o-r);if(i&&o>=i.to)if(i.from==r&&i.to==o&&i.insert.eq(u)){i=this.pendingContextChange=null,t+=c,this.to+=c;return}else i=null,this.revertPending(e.state);if(r+=t,o+=t,o<=this.from)this.from+=c,this.to+=c;else if(r<this.to){if(r<this.from||o>this.to||this.to-this.from+u.length>3e4){s=!0;return}this.editContext.updateText(this.toContextPos(r),this.toContextPos(o),u.toString()),this.to+=c}t+=c}),i&&!s&&this.revertPending(e.state),!s}update(e){let t=this.pendingContextChange,s=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(s.from,s.to)&&e.transactions.some(i=>!i.isUserEvent("input.type")&&i.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,s=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),i=this.toContextPos(t.head);(this.editContext.selectionStart!=s||this.editContext.selectionEnd!=i)&&this.editContext.updateSelection(s,i)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let s=this.composing;return s&&s.drifted?s.editorBase+(e-s.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class Le{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:s}=e;this.dispatchTransactions=e.dispatchTransactions||s&&(i=>i.forEach(r=>s(r,this)))||(i=>this.update(i)),this.dispatch=this.dispatch.bind(this),this._root=e.root||EP(e.parent)||document,this.viewState=new A0(e.state||lt.create(e)),e.scrollTo&&e.scrollTo.is(Pa)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Fr).map(i=>new md(i));for(let i of this.plugins)i.update(this);this.observer=new HR(this),this.inputState=new hR(this),this.inputState.ensureHandlers(this.plugins),this.docView=new l0(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=e.length==1&&e[0]instanceof Zt?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,s=!1,i,r=this.state;for(let f of e){if(f.startState!=r)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");r=f.state}if(this.destroyed){this.viewState.state=r;return}let o=this.hasFocus,l=0,a=null;e.some(f=>f.annotation(rk))?(this.inputState.notifiedFocused=o,l=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,a=ok(r,o),a||(l=1));let u=this.observer.delayedAndroidKey,c=null;if(u?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(r.doc)||!this.state.selection.eq(r.selection))&&(c=null)):this.observer.clear(),r.facet(lt.phrases)!=this.state.facet(lt.phrases))return this.setState(r);i=ju.create(this,r,e),i.flags|=l;let d=this.viewState.scrollTarget;try{this.updateState=2;for(let f of e){if(d&&(d=d.map(f.changes)),f.scrollIntoView){let{main:p}=f.state.selection;d=new so(p.empty?p:fe.cursor(p.head,p.head>p.anchor?-1:1))}for(let p of f.effects)p.is(Pa)&&(d=p.value.clip(this.state))}this.viewState.update(i,d),this.bidiCache=$u.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),t=this.docView.update(i),this.state.facet(Ho)!=this.styleModules&&this.mountStyles(),s=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(f=>f.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(ja)!=i.state.facet(ja)&&(this.viewState.mustMeasureContent=!0),(t||s||d||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!i.empty)for(let f of this.state.facet(Hf))try{f(i)}catch(p){Bn(this.state,p,"update listener")}(a||c)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),c&&!X1(this,c)&&u.force&&no(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let s of this.plugins)s.destroy(this);this.viewState=new A0(e),this.plugins=e.facet(Fr).map(s=>new md(s)),this.pluginMap.clear();for(let s of this.plugins)s.update(this);this.docView.destroy(),this.docView=new l0(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(Fr),s=e.state.facet(Fr);if(t!=s){let i=[];for(let r of s){let o=t.indexOf(r);if(o<0)i.push(new md(r));else{let l=this.plugins[o];l.mustUpdate=e,i.push(l)}}for(let r of this.plugins)r.mustUpdate!=e&&r.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);t!=s&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(s){Bn(this.state,s,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,s=this.scrollDOM,i=s.scrollTop*this.scaleY,{scrollAnchorPos:r,scrollAnchorHeight:o}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let l=0;;l++){if(o<0)if(b1(s))r=-1,o=this.viewState.heightMap.height;else{let p=this.viewState.scrollAnchorAt(i);r=p.from,o=p.top}this.updateState=1;let a=this.viewState.measure(this);if(!a&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];a&4||([this.measureRequests,u]=[u,this.measureRequests]);let c=u.map(p=>{try{return p.read(this)}catch(g){return Bn(this.state,g),P0}}),d=ju.create(this,this.state,[]),f=!1;d.flags|=a,t?t.flags|=a:t=d,this.updateState=2,d.empty||(this.updatePlugins(d),this.inputState.update(d),this.updateAttrs(),f=this.docView.update(d),f&&this.docViewUpdate());for(let p=0;p<u.length;p++)if(c[p]!=P0)try{let g=u[p];g.write&&g.write(c[p],this)}catch(g){Bn(this.state,g)}if(f&&this.docView.updateSelection(!0),!d.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let g=(r<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(r).top)-o;if(g>1||g<-1){i=i+g,s.scrollTop=i/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let l of this.state.facet(Hf))l(t)}get themeClasses(){return Jf+" "+(this.state.facet(Kf)?ck:uk)+" "+this.state.facet(ja)}updateAttrs(){let e=R0(this,H1,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(ii)?"true":"false",class:"cm-content",style:`${Re.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),R0(this,np,t);let s=this.observer.ignore(()=>{let i=Nf(this.contentDOM,this.contentAttrs,t),r=Nf(this.dom,this.editorAttrs,e);return i||r});return this.editorAttrs=e,this.contentAttrs=t,s}showAnnouncements(e){let t=!0;for(let s of e)for(let i of s.effects)if(i.is(Le.announce)){t&&(this.announceDOM.textContent=""),t=!1;let r=this.announceDOM.appendChild(document.createElement("div"));r.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(Ho);let e=this.state.facet(Le.cspNonce);Vi.mount(this.root,this.styleModules.concat(UR).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.plugin!=e)&&this.pluginMap.set(e,t=this.plugins.find(s=>s.plugin==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,s){return vd(this,e,f0(this,e,t,s))}moveByGroup(e,t){return vd(this,e,f0(this,e,t,s=>iR(this,e.head,s)))}visualLineSide(e,t){let s=this.bidiSpans(e),i=this.textDirectionAt(e.from),r=s[t?s.length-1:0];return fe.cursor(r.side(t,i)+e.from,r.forward(!t,i)?1:-1)}moveToLineBoundary(e,t,s=!0){return sR(this,e,t,s)}moveVertically(e,t,s){return vd(this,e,rR(this,e,t,s))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),J1(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let s=this.docView.coordsAt(e,t);if(!s||s.left==s.right)return s;let i=this.state.doc.lineAt(e),r=this.bidiSpans(i),o=r[Di.find(r,e-i.from,-1,t)];return wc(s,o.dir==Pt.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(B1)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>GR)return O1(e.length);let t=this.textDirectionAt(e.from),s;for(let r of this.bidiCache)if(r.from==e.from&&r.dir==t&&(r.fresh||R1(r.isolates,s=o0(this,e))))return r.order;s||(s=o0(this,e));let i=FP(e.text,t,s);return this.bidiCache.push(new $u(e.from,e.to,t,s,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Re.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{v1(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return Pa.of(new so(typeof e=="number"?fe.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,s=this.viewState.scrollAnchorAt(e);return Pa.of(new so(fe.cursor(s.from),"start","start",s.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return qt.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return qt.define(()=>({}),{eventObservers:e})}static theme(e,t){let s=Vi.newName(),i=[ja.of(s),Ho.of(Qf(`.${s}`,e))];return t&&t.dark&&i.push(Kf.of(!0)),i}static baseTheme(e){return Dr.lowest(Ho.of(Qf("."+Jf,e,dk)))}static findFromDOM(e){var t;let s=e.querySelector(".cm-content"),i=s&&bt.get(s)||bt.get(e);return((t=i?.rootView)===null||t===void 0?void 0:t.view)||null}}Le.styleModule=Ho;Le.inputHandler=$1;Le.clipboardInputFilter=ep;Le.clipboardOutputFilter=tp;Le.scrollHandler=U1;Le.focusChangeEffect=N1;Le.perLineTextDirection=B1;Le.exceptionSink=V1;Le.updateListener=Hf;Le.editable=ii;Le.mouseSelectionStyle=j1;Le.dragMovesSelection=I1;Le.clickAddsSelectionRange=M1;Le.decorations=Pl;Le.outerDecorations=W1;Le.atomicRanges=Zl;Le.bidiIsolatedRanges=q1;Le.scrollMargins=G1;Le.darkTheme=Kf;Le.cspNonce=Ie.define({combine:n=>n.length?n[0]:""});Le.contentAttributes=np;Le.editorAttributes=H1;Le.lineWrapping=Le.contentAttributes.of({class:"cm-lineWrapping"});Le.announce=et.define();const GR=4096,P0={};class $u{constructor(e,t,s,i,r,o){this.from=e,this.to=t,this.dir=s,this.isolates=i,this.fresh=r,this.order=o}static update(e,t){if(t.empty&&!e.some(r=>r.fresh))return e;let s=[],i=e.length?e[e.length-1].dir:Pt.LTR;for(let r=Math.max(0,e.length-10);r<e.length;r++){let o=e[r];o.dir==i&&!t.touchesRange(o.from,o.to)&&s.push(new $u(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return s}}function R0(n,e,t){for(let s=n.state.facet(e),i=s.length-1;i>=0;i--){let r=s[i],o=typeof r=="function"?r(n):r;o&&$f(o,t)}return t}const KR=Re.mac?"mac":Re.windows?"win":Re.linux?"linux":"key";function JR(n,e){const t=n.split(/-(?!$)/);let s=t[t.length-1];s=="Space"&&(s=" ");let i,r,o,l;for(let a=0;a<t.length-1;++a){const u=t[a];if(/^(cmd|meta|m)$/i.test(u))l=!0;else if(/^a(lt)?$/i.test(u))i=!0;else if(/^(c|ctrl|control)$/i.test(u))r=!0;else if(/^s(hift)?$/i.test(u))o=!0;else if(/^mod$/i.test(u))e=="mac"?l=!0:r=!0;else throw new Error("Unrecognized modifier name: "+u)}return i&&(s="Alt-"+s),r&&(s="Ctrl-"+s),l&&(s="Meta-"+s),o&&(s="Shift-"+s),s}function Va(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}const QR=Dr.default(Le.domEventHandlers({keydown(n,e){return hk(fk(e.state),n,e,"editor")}})),lp=Ie.define({enables:QR}),O0=new WeakMap;function fk(n){let e=n.facet(lp),t=O0.get(e);return t||O0.set(e,t=ZR(e.reduce((s,i)=>s.concat(i),[]))),t}function YR(n,e,t){return hk(fk(n.state),e,n,t)}let Ai=null;const XR=4e3;function ZR(n,e=KR){let t=Object.create(null),s=Object.create(null),i=(o,l)=>{let a=s[o];if(a==null)s[o]=l;else if(a!=l)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},r=(o,l,a,u,c)=>{var d,f;let p=t[o]||(t[o]=Object.create(null)),g=l.split(/ (?!$)/).map(m=>JR(m,e));for(let m=1;m<g.length;m++){let _=g.slice(0,m).join(" ");i(_,!0),p[_]||(p[_]={preventDefault:!0,stopPropagation:!1,run:[R=>{let U=Ai={view:R,prefix:_,scope:o};return setTimeout(()=>{Ai==U&&(Ai=null)},XR),!0}]})}let k=g.join(" ");i(k,!1);let x=p[k]||(p[k]={preventDefault:!1,stopPropagation:!1,run:((f=(d=p._any)===null||d===void 0?void 0:d.run)===null||f===void 0?void 0:f.slice())||[]});a&&x.run.push(a),u&&(x.preventDefault=!0),c&&(x.stopPropagation=!0)};for(let o of n){let l=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let u of l){let c=t[u]||(t[u]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:d}=o;for(let f in c)c[f].run.push(p=>d(p,Yf))}let a=o[e]||o.key;if(a)for(let u of l)r(u,a,o.run,o.preventDefault,o.stopPropagation),o.shift&&r(u,"Shift-"+a,o.shift,o.preventDefault,o.stopPropagation)}return t}let Yf=null;function hk(n,e,t,s){Yf=e;let i=xP(e),r=$n(i,0),o=$s(r)==i.length&&i!=" ",l="",a=!1,u=!1,c=!1;Ai&&Ai.view==t&&Ai.scope==s&&(l=Ai.prefix+" ",tk.indexOf(e.keyCode)<0&&(u=!0,Ai=null));let d=new Set,f=x=>{if(x){for(let m of x.run)if(!d.has(m)&&(d.add(m),m(t)))return x.stopPropagation&&(c=!0),!0;x.preventDefault&&(x.stopPropagation&&(c=!0),u=!0)}return!1},p=n[s],g,k;return p&&(f(p[l+Va(i,e,!o)])?a=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Re.windows&&e.ctrlKey&&e.altKey)&&!(Re.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(g=$i[e.keyCode])&&g!=i?(f(p[l+Va(g,e,!0)])||e.shiftKey&&(k=El[e.keyCode])!=i&&k!=g&&f(p[l+Va(k,e,!1)]))&&(a=!0):o&&e.shiftKey&&f(p[l+Va(i,e,!0)])&&(a=!0),!a&&f(p._any)&&(a=!0)),u&&(a=!0),a&&c&&e.stopPropagation(),Yf=null,a}class ea{constructor(e,t,s,i,r){this.className=e,this.left=t,this.top=s,this.width=i,this.height=r}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,s){if(s.empty){let i=e.coordsAtPos(s.head,s.assoc||1);if(!i)return[];let r=pk(e);return[new ea(t,i.left-r.left,i.top-r.top,null,i.bottom-i.top)]}else return eO(e,t,s)}}function pk(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==Pt.LTR?e.left:e.right-n.scrollDOM.clientWidth*n.scaleX)-n.scrollDOM.scrollLeft*n.scaleX,top:e.top-n.scrollDOM.scrollTop*n.scaleY}}function L0(n,e,t,s){let i=n.coordsAtPos(e,t*2);if(!i)return s;let r=n.dom.getBoundingClientRect(),o=(i.top+i.bottom)/2,l=n.posAtCoords({x:r.left+1,y:o}),a=n.posAtCoords({x:r.right-1,y:o});return l==null||a==null?s:{from:Math.max(s.from,Math.min(l,a)),to:Math.min(s.to,Math.max(l,a))}}function eO(n,e,t){if(t.to<=n.viewport.from||t.from>=n.viewport.to)return[];let s=Math.max(t.from,n.viewport.from),i=Math.min(t.to,n.viewport.to),r=n.textDirection==Pt.LTR,o=n.contentDOM,l=o.getBoundingClientRect(),a=pk(n),u=o.querySelector(".cm-line"),c=u&&window.getComputedStyle(u),d=l.left+(c?parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)):0),f=l.right-(c?parseInt(c.paddingRight):0),p=qf(n,s,1),g=qf(n,i,-1),k=p.type==Mn.Text?p:null,x=g.type==Mn.Text?g:null;if(k&&(n.lineWrapping||p.widgetLineBreaks)&&(k=L0(n,s,1,k)),x&&(n.lineWrapping||g.widgetLineBreaks)&&(x=L0(n,i,-1,x)),k&&x&&k.from==x.from&&k.to==x.to)return _(R(t.from,t.to,k));{let N=k?R(t.from,null,k):U(p,!1),A=x?R(null,t.to,x):U(g,!0),w=[];return(k||p).to<(x||g).from-(k&&x?1:0)||p.widgetLineBreaks>1&&N.bottom+n.defaultLineHeight/2<A.top?w.push(m(d,N.bottom,f,A.top)):N.bottom<A.top&&n.elementAtHeight((N.bottom+A.top)/2).type==Mn.Text&&(N.bottom=A.top=(N.bottom+A.top)/2),_(N).concat(w).concat(_(A))}function m(N,A,w,M){return new ea(e,N-a.left,A-a.top,w-N,M-A)}function _({top:N,bottom:A,horizontal:w}){let M=[];for(let G=0;G<w.length;G+=2)M.push(m(w[G],N,w[G+1],A));return M}function R(N,A,w){let M=1e9,G=-1e9,ue=[];function ie(ee,V,J,X,de){let Ce=n.coordsAtPos(ee,ee==w.to?-2:2),Te=n.coordsAtPos(J,J==w.from?2:-2);!Ce||!Te||(M=Math.min(Ce.top,Te.top,M),G=Math.max(Ce.bottom,Te.bottom,G),de==Pt.LTR?ue.push(r&&V?d:Ce.left,r&&X?f:Te.right):ue.push(!r&&X?d:Te.left,!r&&V?f:Ce.right))}let F=N??w.from,ae=A??w.to;for(let ee of n.visibleRanges)if(ee.to>F&&ee.from<ae)for(let V=Math.max(ee.from,F),J=Math.min(ee.to,ae);;){let X=n.state.doc.lineAt(V);for(let de of n.bidiSpans(X)){let Ce=de.from+X.from,Te=de.to+X.from;if(Ce>=J)break;Te>V&&ie(Math.max(Ce,V),N==null&&Ce<=F,Math.min(Te,J),A==null&&Te>=ae,de.dir)}if(V=X.to+1,V>=J)break}return ue.length==0&&ie(F,N==null,ae,A==null,n.textDirection),{top:M,bottom:G,horizontal:ue}}function U(N,A){let w=l.top+(A?N.top:N.bottom);return{top:w,bottom:w,horizontal:[]}}}function tO(n,e){return n.constructor==e.constructor&&n.eq(e)}class nO{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(lu)!=e.state.facet(lu)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,s=e.facet(lu);for(;t<s.length&&s[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,s)=>!tO(t,this.drawn[s]))){let t=this.dom.firstChild,s=0;for(let i of e)i.update&&t&&i.constructor&&this.drawn[s].constructor&&i.update(t,this.drawn[s])?(t=t.nextSibling,s++):this.dom.insertBefore(i.draw(),t);for(;t;){let i=t.nextSibling;t.remove(),t=i}this.drawn=e,Re.safari&&Re.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const lu=Ie.define();function mk(n){return[qt.define(e=>new nO(e,n)),lu.of(n)]}const Rl=Ie.define({combine(n){return qs(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function sO(n={}){return[Rl.of(n),iO,rO,oO,F1.of(!0)]}function gk(n){return n.startState.facet(Rl)!=n.state.facet(Rl)}const iO=mk({above:!0,markers(n){let{state:e}=n,t=e.facet(Rl),s=[];for(let i of e.selection.ranges){let r=i==e.selection.main;if(i.empty||t.drawRangeCursor){let o=r?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",l=i.empty?i:fe.cursor(i.head,i.head>i.anchor?-1:1);for(let a of ea.forRange(n,o,l))s.push(a)}}return s},update(n,e){n.transactions.some(s=>s.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=gk(n);return t&&M0(n.state,e),n.docChanged||n.selectionSet||t},mount(n,e){M0(e.state,n)},class:"cm-cursorLayer"});function M0(n,e){e.style.animationDuration=n.facet(Rl).cursorBlinkRate+"ms"}const rO=mk({above:!1,markers(n){return n.state.selection.ranges.map(e=>e.empty?[]:ea.forRange(n,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(n,e){return n.docChanged||n.selectionSet||n.viewportChanged||gk(n)},class:"cm-selectionLayer"}),oO=Dr.highest(Le.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),vk=et.define({map(n,e){return n==null?null:e.mapPos(n)}}),Go=hn.define({create(){return null},update(n,e){return n!=null&&(n=e.changes.mapPos(n)),e.effects.reduce((t,s)=>s.is(vk)?s.value:t,n)}}),lO=qt.fromClass(class{constructor(n){this.view=n,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(n){var e;let t=n.state.field(Go);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(n.startState.field(Go)!=t||n.docChanged||n.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:n}=this,e=n.state.field(Go),t=e!=null&&n.coordsAtPos(e);if(!t)return null;let s=n.scrollDOM.getBoundingClientRect();return{left:t.left-s.left+n.scrollDOM.scrollLeft*n.scaleX,top:t.top-s.top+n.scrollDOM.scrollTop*n.scaleY,height:t.bottom-t.top}}drawCursor(n){if(this.cursor){let{scaleX:e,scaleY:t}=this.view;n?(this.cursor.style.left=n.left/e+"px",this.cursor.style.top=n.top/t+"px",this.cursor.style.height=n.height/t+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(n){this.view.state.field(Go)!=n&&this.view.dispatch({effects:vk.of(n)})}},{eventObservers:{dragover(n){this.setDropPos(this.view.posAtCoords({x:n.clientX,y:n.clientY}))},dragleave(n){(n.target==this.view.contentDOM||!this.view.contentDOM.contains(n.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function aO(){return[Go,lO]}function I0(n,e,t,s,i){e.lastIndex=0;for(let r=n.iterRange(t,s),o=t,l;!r.next().done;o+=r.value.length)if(!r.lineBreak)for(;l=e.exec(r.value);)i(o+l.index,l)}function uO(n,e){let t=n.visibleRanges;if(t.length==1&&t[0].from==n.viewport.from&&t[0].to==n.viewport.to)return t;let s=[];for(let{from:i,to:r}of t)i=Math.max(n.state.doc.lineAt(i).from,i-e),r=Math.min(n.state.doc.lineAt(r).to,r+e),s.length&&s[s.length-1].to>=i?s[s.length-1].to=r:s.push({from:i,to:r});return s}class cO{constructor(e){const{regexp:t,decoration:s,decorate:i,boundary:r,maxLength:o=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,i)this.addMatch=(l,a,u,c)=>i(c,u,u+l[0].length,l,a);else if(typeof s=="function")this.addMatch=(l,a,u,c)=>{let d=s(l,a,u);d&&c(u,u+l[0].length,d)};else if(s)this.addMatch=(l,a,u,c)=>c(u,u+l[0].length,s);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=r,this.maxLength=o}createDeco(e){let t=new ui,s=t.add.bind(t);for(let{from:i,to:r}of uO(e,this.maxLength))I0(e.state.doc,this.regexp,i,r,(o,l)=>this.addMatch(l,e,o,s));return t.finish()}updateDeco(e,t){let s=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((r,o,l,a)=>{a>=e.view.viewport.from&&l<=e.view.viewport.to&&(s=Math.min(l,s),i=Math.max(a,i))}),e.viewportMoved||i-s>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,t.map(e.changes),s,i):t}updateRange(e,t,s,i){for(let r of e.visibleRanges){let o=Math.max(r.from,s),l=Math.min(r.to,i);if(l>=o){let a=e.state.doc.lineAt(o),u=a.to<l?e.state.doc.lineAt(l):a,c=Math.max(r.from,a.from),d=Math.min(r.to,u.to);if(this.boundary){for(;o>a.from;o--)if(this.boundary.test(a.text[o-1-a.from])){c=o;break}for(;l<u.to;l++)if(this.boundary.test(u.text[l-u.from])){d=l;break}}let f=[],p,g=(k,x,m)=>f.push(m.range(k,x));if(a==u)for(this.regexp.lastIndex=c-a.from;(p=this.regexp.exec(a.text))&&p.index<d-a.from;)this.addMatch(p,e,p.index+a.from,g);else I0(e.state.doc,this.regexp,c,d,(k,x)=>this.addMatch(x,e,k,g));t=t.update({filterFrom:c,filterTo:d,filter:(k,x)=>k<c||x>d,add:f})}}return t}}const Xf=/x/.unicode!=null?"gu":"g",dO=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,Xf),fO={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let kd=null;function hO(){var n;if(kd==null&&typeof document<"u"&&document.body){let e=document.body.style;kd=((n=e.tabSize)!==null&&n!==void 0?n:e.MozTabSize)!=null}return kd||!1}const au=Ie.define({combine(n){let e=qs(n,{render:null,specialChars:dO,addSpecialChars:null});return(e.replaceTabs=!hO())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,Xf)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,Xf)),e}});function pO(n={}){return[au.of(n),mO()]}let j0=null;function mO(){return j0||(j0=qt.fromClass(class{constructor(n){this.view=n,this.decorations=We.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(n.state.facet(au)),this.decorations=this.decorator.createDeco(n)}makeDecorator(n){return new cO({regexp:n.specialChars,decoration:(e,t,s)=>{let{doc:i}=t.state,r=$n(e[0],0);if(r==9){let o=i.lineAt(s),l=t.state.tabSize,a=Eo(o.text,l,s-o.from);return We.replace({widget:new bO((l-a%l)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[r]||(this.decorationCache[r]=We.replace({widget:new yO(n,r)}))},boundary:n.replaceTabs?void 0:/[^]/})}update(n){let e=n.state.facet(au);n.startState.facet(au)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(n.view)):this.decorations=this.decorator.updateDeco(n,this.decorations)}},{decorations:n=>n.decorations}))}const gO="";function vO(n){return n>=32?gO:n==10?"":String.fromCharCode(9216+n)}class yO extends Ui{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=vO(this.code),s=e.state.phrase("Control character")+" "+(fO[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,s,t);if(i)return i;let r=document.createElement("span");return r.textContent=t,r.title=s,r.setAttribute("aria-label",s),r.className="cm-specialChar",r}ignoreEvent(){return!1}}class bO extends Ui{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function kO(){return _O}const xO=We.line({class:"cm-activeLine"}),_O=qt.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=-1,t=[];for(let s of n.state.selection.ranges){let i=n.lineBlockAt(s.head);i.from>e&&(t.push(xO.range(i.from)),e=i.from)}return We.set(t)}},{decorations:n=>n.decorations}),Zf=2e3;function wO(n,e,t){let s=Math.min(e.line,t.line),i=Math.max(e.line,t.line),r=[];if(e.off>Zf||t.off>Zf||e.col<0||t.col<0){let o=Math.min(e.off,t.off),l=Math.max(e.off,t.off);for(let a=s;a<=i;a++){let u=n.doc.line(a);u.length<=l&&r.push(fe.range(u.from+o,u.to+l))}}else{let o=Math.min(e.col,t.col),l=Math.max(e.col,t.col);for(let a=s;a<=i;a++){let u=n.doc.line(a),c=Pf(u.text,o,n.tabSize,!0);if(c<0)r.push(fe.cursor(u.to));else{let d=Pf(u.text,l,n.tabSize);r.push(fe.range(u.from+c,u.from+d))}}}return r}function SO(n,e){let t=n.coordsAtPos(n.viewport.from);return t?Math.round(Math.abs((t.left-e)/n.defaultCharacterWidth)):-1}function V0(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1),s=n.state.doc.lineAt(t),i=t-s.from,r=i>Zf?-1:i==s.length?SO(n,e.clientX):Eo(s.text,n.state.tabSize,t-s.from);return{line:s.number,col:r,off:i}}function CO(n,e){let t=V0(n,e),s=n.state.selection;return t?{update(i){if(i.docChanged){let r=i.changes.mapPos(i.startState.doc.line(t.line).from),o=i.state.doc.lineAt(r);t={line:o.number,col:t.col,off:Math.min(t.off,o.length)},s=s.map(i.changes)}},get(i,r,o){let l=V0(n,i);if(!l)return s;let a=wO(n.state,t,l);return a.length?o?fe.create(a.concat(s.ranges)):fe.create(a):s}}:null}function AO(n){let e=(t=>t.altKey&&t.button==0);return Le.mouseSelectionStyle.of((t,s)=>e(s)?CO(t,s):null)}const EO={Alt:[18,n=>!!n.altKey],Control:[17,n=>!!n.ctrlKey],Shift:[16,n=>!!n.shiftKey],Meta:[91,n=>!!n.metaKey]},TO={style:"cursor: crosshair"};function DO(n={}){let[e,t]=EO[n.key||"Alt"],s=qt.fromClass(class{constructor(i){this.view=i,this.isDown=!1}set(i){this.isDown!=i&&(this.isDown=i,this.view.update([]))}},{eventObservers:{keydown(i){this.set(i.keyCode==e||t(i))},keyup(i){(i.keyCode==e||!t(i))&&this.set(!1)},mousemove(i){this.set(t(i))}}});return[s,Le.contentAttributes.of(i=>{var r;return!((r=i.plugin(s))===null||r===void 0)&&r.isDown?TO:null})]}const $o="-10000px";class yk{constructor(e,t,s,i){this.facet=t,this.createTooltipView=s,this.removeTooltipView=i,this.input=e.state.facet(t),this.tooltips=this.input.filter(o=>o);let r=null;this.tooltipViews=this.tooltips.map(o=>r=s(o,r))}update(e,t){var s;let i=e.state.facet(this.facet),r=i.filter(a=>a);if(i===this.input){for(let a of this.tooltipViews)a.update&&a.update(e);return!1}let o=[],l=t?[]:null;for(let a=0;a<r.length;a++){let u=r[a],c=-1;if(u){for(let d=0;d<this.tooltips.length;d++){let f=this.tooltips[d];f&&f.create==u.create&&(c=d)}if(c<0)o[a]=this.createTooltipView(u,a?o[a-1]:null),l&&(l[a]=!!u.above);else{let d=o[a]=this.tooltipViews[c];l&&(l[a]=t[c]),d.update&&d.update(e)}}}for(let a of this.tooltipViews)o.indexOf(a)<0&&(this.removeTooltipView(a),(s=a.destroy)===null||s===void 0||s.call(a));return t&&(l.forEach((a,u)=>t[u]=a),t.length=l.length),this.input=i,this.tooltips=r,this.tooltipViews=o,!0}}function PO(n){let e=n.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const xd=Ie.define({combine:n=>{var e,t,s;return{position:Re.ios?"absolute":((e=n.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=n.find(i=>i.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((s=n.find(i=>i.tooltipSpace))===null||s===void 0?void 0:s.tooltipSpace)||PO}}}),$0=new WeakMap,ap=qt.fromClass(class{constructor(n){this.view=n,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=n.state.facet(xd);this.position=e.position,this.parent=e.parent,this.classes=n.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new yk(n,up,(t,s)=>this.createTooltip(t,s),t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()}),this.above=this.manager.tooltips.map(t=>!!t.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),n.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let n of this.manager.tooltipViews)this.intersectionObserver.observe(n.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(n){n.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(n,this.above);e&&this.observeIntersection();let t=e||n.geometryChanged,s=n.state.facet(xd);if(s.position!=this.position&&!this.madeAbsolute){this.position=s.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;t=!0}if(s.parent!=this.parent){this.parent&&this.container.remove(),this.parent=s.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(n,e){let t=n.create(this.view),s=e?e.dom:null;if(t.dom.classList.add("cm-tooltip"),n.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let i=document.createElement("div");i.className="cm-tooltip-arrow",t.dom.appendChild(i)}return t.dom.style.position=this.position,t.dom.style.top=$o,t.dom.style.left="0px",this.container.insertBefore(t.dom,s),t.mount&&t.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(t.dom),t}destroy(){var n,e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let s of this.manager.tooltipViews)s.dom.remove(),(n=s.destroy)===null||n===void 0||n.call(s);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let n=1,e=1,t=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:r}=this.manager.tooltipViews[0];if(Re.gecko)t=r.offsetParent!=this.container.ownerDocument.body;else if(r.style.top==$o&&r.style.left=="0px"){let o=r.getBoundingClientRect();t=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}}if(t||this.position=="absolute")if(this.parent){let r=this.parent.getBoundingClientRect();r.width&&r.height&&(n=r.width/this.parent.offsetWidth,e=r.height/this.parent.offsetHeight)}else({scaleX:n,scaleY:e}=this.view.viewState);let s=this.view.scrollDOM.getBoundingClientRect(),i=sp(this.view);return{visible:{left:s.left+i.left,top:s.top+i.top,right:s.right-i.right,bottom:s.bottom-i.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((r,o)=>{let l=this.manager.tooltipViews[o];return l.getCoords?l.getCoords(r.pos):this.view.coordsAtPos(r.pos)}),size:this.manager.tooltipViews.map(({dom:r})=>r.getBoundingClientRect()),space:this.view.state.facet(xd).tooltipSpace(this.view),scaleX:n,scaleY:e,makeAbsolute:t}}writeMeasure(n){var e;if(n.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let l of this.manager.tooltipViews)l.dom.style.position="absolute"}let{visible:t,space:s,scaleX:i,scaleY:r}=n,o=[];for(let l=0;l<this.manager.tooltips.length;l++){let a=this.manager.tooltips[l],u=this.manager.tooltipViews[l],{dom:c}=u,d=n.pos[l],f=n.size[l];if(!d||a.clip!==!1&&(d.bottom<=Math.max(t.top,s.top)||d.top>=Math.min(t.bottom,s.bottom)||d.right<Math.max(t.left,s.left)-.1||d.left>Math.min(t.right,s.right)+.1)){c.style.top=$o;continue}let p=a.arrow?u.dom.querySelector(".cm-tooltip-arrow"):null,g=p?7:0,k=f.right-f.left,x=(e=$0.get(u))!==null&&e!==void 0?e:f.bottom-f.top,m=u.offset||OO,_=this.view.textDirection==Pt.LTR,R=f.width>s.right-s.left?_?s.left:s.right-f.width:_?Math.max(s.left,Math.min(d.left-(p?14:0)+m.x,s.right-k)):Math.min(Math.max(s.left,d.left-k+(p?14:0)-m.x),s.right-k),U=this.above[l];!a.strictSide&&(U?d.top-x-g-m.y<s.top:d.bottom+x+g+m.y>s.bottom)&&U==s.bottom-d.bottom>d.top-s.top&&(U=this.above[l]=!U);let N=(U?d.top-s.top:s.bottom-d.bottom)-g;if(N<x&&u.resize!==!1){if(N<this.view.defaultLineHeight){c.style.top=$o;continue}$0.set(u,x),c.style.height=(x=N)/r+"px"}else c.style.height&&(c.style.height="");let A=U?d.top-x-g-m.y:d.bottom+g+m.y,w=R+k;if(u.overlap!==!0)for(let M of o)M.left<w&&M.right>R&&M.top<A+x&&M.bottom>A&&(A=U?M.top-x-2-g:M.bottom+g+2);if(this.position=="absolute"?(c.style.top=(A-n.parent.top)/r+"px",N0(c,(R-n.parent.left)/i)):(c.style.top=A/r+"px",N0(c,R/i)),p){let M=d.left+(_?m.x:-m.x)-(R+14-7);p.style.left=M/i+"px"}u.overlap!==!0&&o.push({left:R,top:A,right:w,bottom:A+x}),c.classList.toggle("cm-tooltip-above",U),c.classList.toggle("cm-tooltip-below",!U),u.positioned&&u.positioned(n.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let n of this.manager.tooltipViews)n.dom.style.top=$o}},{eventObservers:{scroll(){this.maybeMeasure()}}});function N0(n,e){let t=parseInt(n.style.left,10);(isNaN(t)||Math.abs(e-t)>1)&&(n.style.left=e+"px")}const RO=Le.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),OO={x:0,y:0},up=Ie.define({enables:[ap,RO]}),Nu=Ie.define({combine:n=>n.reduce((e,t)=>e.concat(t),[])});class Cc{static create(e){return new Cc(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new yk(e,Nu,(t,s)=>this.createHostedView(t,s),t=>t.dom.remove())}createHostedView(e,t){let s=e.create(this.view);return s.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(s.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&s.mount&&s.mount(this.view),s}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}passProp(e){let t;for(let s of this.manager.tooltipViews){let i=s[e];if(i!==void 0){if(t===void 0)t=i;else if(t!==i)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const LO=up.compute([Nu],n=>{let e=n.facet(Nu);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.map(t=>{var s;return(s=t.end)!==null&&s!==void 0?s:t.pos})),create:Cc.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class MO{constructor(e,t,s,i,r){this.view=e,this.source=t,this.field=s,this.setHover=i,this.hoverTime=r,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,s=e.docView.nearest(t.target);if(!s)return;let i,r=1;if(s instanceof Ti)i=s.posAtStart;else{if(i=e.posAtCoords(t),i==null)return;let l=e.coordsAtPos(i);if(!l||t.y<l.top||t.y>l.bottom||t.x<l.left-e.defaultCharacterWidth||t.x>l.right+e.defaultCharacterWidth)return;let a=e.bidiSpans(e.state.doc.lineAt(i)).find(c=>c.from<=i&&c.to>=i),u=a&&a.dir==Pt.RTL?-1:1;r=t.x<l.left?-u:u}let o=this.source(e,i,r);if(o?.then){let l=this.pending={pos:i};o.then(a=>{this.pending==l&&(this.pending=null,a&&!(Array.isArray(a)&&!a.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(a)?a:[a])}))},a=>Bn(e.state,a,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(ap),t=e?e.manager.tooltips.findIndex(s=>s.create==Cc.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,s;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:i,tooltip:r}=this;if(i.length&&r&&!IO(r.dom,e)||this.pending){let{pos:o}=i[0]||this.pending,l=(s=(t=i[0])===null||t===void 0?void 0:t.end)!==null&&s!==void 0?s:o;(o==l?this.view.posAtCoords(this.lastMove)!=o:!jO(this.view,o,l,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:s}=this;s&&s.dom.contains(e.relatedTarget)?this.watchTooltipLeave(s.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=s=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(s.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const $a=4;function IO(n,e){let{left:t,right:s,top:i,bottom:r}=n.getBoundingClientRect(),o;if(o=n.querySelector(".cm-tooltip-arrow")){let l=o.getBoundingClientRect();i=Math.min(l.top,i),r=Math.max(l.bottom,r)}return e.clientX>=t-$a&&e.clientX<=s+$a&&e.clientY>=i-$a&&e.clientY<=r+$a}function jO(n,e,t,s,i,r){let o=n.scrollDOM.getBoundingClientRect(),l=n.documentTop+n.documentPadding.top+n.contentHeight;if(o.left>s||o.right<s||o.top>i||Math.min(o.bottom,l)<i)return!1;let a=n.posAtCoords({x:s,y:i},!1);return a>=e&&a<=t}function VO(n,e={}){let t=et.define(),s=hn.define({create(){return[]},update(i,r){if(i.length&&(e.hideOnChange&&(r.docChanged||r.selection)?i=[]:e.hideOn&&(i=i.filter(o=>!e.hideOn(r,o))),r.docChanged)){let o=[];for(let l of i){let a=r.changes.mapPos(l.pos,-1,Ln.TrackDel);if(a!=null){let u=Object.assign(Object.create(null),l);u.pos=a,u.end!=null&&(u.end=r.changes.mapPos(u.end)),o.push(u)}}i=o}for(let o of r.effects)o.is(t)&&(i=o.value),o.is($O)&&(i=[]);return i},provide:i=>Nu.from(i)});return{active:s,extension:[s,qt.define(i=>new MO(i,n,s,t,e.hoverTime||300)),LO]}}function bk(n,e){let t=n.plugin(ap);if(!t)return null;let s=t.manager.tooltips.indexOf(e);return s<0?null:t.manager.tooltipViews[s]}const $O=et.define(),B0=Ie.define({combine(n){let e,t;for(let s of n)e=e||s.topContainer,t=t||s.bottomContainer;return{topContainer:e,bottomContainer:t}}});function Ol(n,e){let t=n.plugin(kk),s=t?t.specs.indexOf(e):-1;return s>-1?t.panels[s]:null}const kk=qt.fromClass(class{constructor(n){this.input=n.state.facet(Ll),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(n));let e=n.state.facet(B0);this.top=new Na(n,!0,e.topContainer),this.bottom=new Na(n,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(n){let e=n.state.facet(B0);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Na(n.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Na(n.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=n.state.facet(Ll);if(t!=this.input){let s=t.filter(a=>a),i=[],r=[],o=[],l=[];for(let a of s){let u=this.specs.indexOf(a),c;u<0?(c=a(n.view),l.push(c)):(c=this.panels[u],c.update&&c.update(n)),i.push(c),(c.top?r:o).push(c)}this.specs=s,this.panels=i,this.top.sync(r),this.bottom.sync(o);for(let a of l)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}else for(let s of this.panels)s.update&&s.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>Le.scrollMargins.of(e=>{let t=e.plugin(n);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class Na{constructor(e,t,s){this.view=e,this.top=t,this.container=s,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=F0(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=F0(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function F0(n){let e=n.nextSibling;return n.remove(),e}const Ll=Ie.define({enables:kk});class di extends xr{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}di.prototype.elementClass="";di.prototype.toDOM=void 0;di.prototype.mapMode=Ln.TrackBefore;di.prototype.startSide=di.prototype.endSide=-1;di.prototype.point=!0;const uu=Ie.define(),NO=Ie.define(),BO={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>at.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},ul=Ie.define();function FO(n){return[xk(),ul.of({...BO,...n})]}const U0=Ie.define({combine:n=>n.some(e=>e)});function xk(n){return[UO]}const UO=qt.fromClass(class{constructor(n){this.view=n,this.domAfter=null,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=n.state.facet(ul).map(e=>new H0(n,e)),this.fixed=!n.state.facet(U0);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(n){if(this.updateGutters(n)){let e=this.prevViewport,t=n.view.viewport,s=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(s<(t.to-t.from)*.8)}if(n.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(U0)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let t=at.iter(this.view.state.facet(uu),this.view.viewport.from),s=[],i=this.gutters.map(r=>new zO(r,this.view.viewport,-this.view.documentPadding.top));for(let r of this.view.viewportLineBlocks)if(s.length&&(s=[]),Array.isArray(r.type)){let o=!0;for(let l of r.type)if(l.type==Mn.Text&&o){eh(t,s,l.from);for(let a of i)a.line(this.view,l,s);o=!1}else if(l.widget)for(let a of i)a.widget(this.view,l)}else if(r.type==Mn.Text){eh(t,s,r.from);for(let o of i)o.line(this.view,r,s)}else if(r.widget)for(let o of i)o.widget(this.view,r);for(let r of i)r.finish();n&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(n){let e=n.startState.facet(ul),t=n.state.facet(ul),s=n.docChanged||n.heightChanged||n.viewportChanged||!at.eq(n.startState.facet(uu),n.state.facet(uu),n.view.viewport.from,n.view.viewport.to);if(e==t)for(let i of this.gutters)i.update(n)&&(s=!0);else{s=!0;let i=[];for(let r of t){let o=e.indexOf(r);o<0?i.push(new H0(this.view,r)):(this.gutters[o].update(n),i.push(this.gutters[o]))}for(let r of this.gutters)r.dom.remove(),i.indexOf(r)<0&&r.destroy();for(let r of i)r.config.side=="after"?this.getDOMAfter().appendChild(r.dom):this.dom.appendChild(r.dom);this.gutters=i}return s}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:n=>Le.scrollMargins.of(e=>{let t=e.plugin(n);if(!t||t.gutters.length==0||!t.fixed)return null;let s=t.dom.offsetWidth*e.scaleX,i=t.domAfter?t.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==Pt.LTR?{left:s,right:i}:{right:s,left:i}})});function z0(n){return Array.isArray(n)?n:[n]}function eh(n,e,t){for(;n.value&&n.from<=t;)n.from==t&&e.push(n.value),n.next()}class zO{constructor(e,t,s){this.gutter=e,this.height=s,this.i=0,this.cursor=at.iter(e.markers,t.from)}addElement(e,t,s){let{gutter:i}=this,r=(t.top-this.height)/e.scaleY,o=t.height/e.scaleY;if(this.i==i.elements.length){let l=new _k(e,o,r,s);i.elements.push(l),i.dom.appendChild(l.dom)}else i.elements[this.i].update(e,o,r,s);this.height=t.bottom,this.i++}line(e,t,s){let i=[];eh(this.cursor,i,t.from),s.length&&(i=i.concat(s));let r=this.gutter.config.lineMarker(e,t,i);r&&i.unshift(r);let o=this.gutter;i.length==0&&!o.config.renderEmptyElements||this.addElement(e,t,i)}widget(e,t){let s=this.gutter.config.widgetMarker(e,t.widget,t),i=s?[s]:null;for(let r of e.state.facet(NO)){let o=r(e,t.widget,t);o&&(i||(i=[])).push(o)}i&&this.addElement(e,t,i)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class H0{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let s in t.domEventHandlers)this.dom.addEventListener(s,i=>{let r=i.target,o;if(r!=this.dom&&this.dom.contains(r)){for(;r.parentNode!=this.dom;)r=r.parentNode;let a=r.getBoundingClientRect();o=(a.top+a.bottom)/2}else o=i.clientY;let l=e.lineBlockAtHeight(o-e.documentTop);t.domEventHandlers[s](e,l,i)&&i.preventDefault()});this.markers=z0(t.markers(e)),t.initialSpacer&&(this.spacer=new _k(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=z0(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let s=e.view.viewport;return!at.eq(this.markers,t,s.from,s.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class _k{constructor(e,t,s,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,s,i)}update(e,t,s,i){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=s&&(this.dom.style.marginTop=(this.above=s)?s+"px":""),HO(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,t){let s="cm-gutterElement",i=this.dom.firstChild;for(let r=0,o=0;;){let l=o,a=r<t.length?t[r++]:null,u=!1;if(a){let c=a.elementClass;c&&(s+=" "+c);for(let d=o;d<this.markers.length;d++)if(this.markers[d].compare(a)){l=d,u=!0;break}}else l=this.markers.length;for(;o<l;){let c=this.markers[o++];if(c.toDOM){c.destroy(i);let d=i.nextSibling;i.remove(),i=d}}if(!a)break;a.toDOM&&(u?i=i.nextSibling:this.dom.insertBefore(a.toDOM(e),i)),u&&o++}this.dom.className=s,this.markers=t}destroy(){this.setMarkers(null,[])}}function HO(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].compare(e[t]))return!1;return!0}const WO=Ie.define(),qO=Ie.define(),Ur=Ie.define({combine(n){return qs(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let s=Object.assign({},e);for(let i in t){let r=s[i],o=t[i];s[i]=r?(l,a,u)=>r(l,a,u)||o(l,a,u):o}return s}})}});class _d extends di{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function wd(n,e){return n.state.facet(Ur).formatNumber(e,n.state)}const GO=ul.compute([Ur],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(WO)},lineMarker(e,t,s){return s.some(i=>i.toDOM)?null:new _d(wd(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,s)=>{for(let i of e.state.facet(qO)){let r=i(e,t,s);if(r)return r}return null},lineMarkerChange:e=>e.startState.facet(Ur)!=e.state.facet(Ur),initialSpacer(e){return new _d(wd(e,W0(e.state.doc.lines)))},updateSpacer(e,t){let s=wd(t.view,W0(t.view.state.doc.lines));return s==e.number?e:new _d(s)},domEventHandlers:n.facet(Ur).domEventHandlers,side:"before"}));function KO(n={}){return[Ur.of(n),xk(),GO]}function W0(n){let e=9;for(;e<n;)e=e*10+9;return e}const JO=new class extends di{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},QO=uu.compute(["selection"],n=>{let e=[],t=-1;for(let s of n.selection.ranges){let i=n.doc.lineAt(s.head).from;i>t&&(t=i,e.push(JO.range(i)))}return at.of(e)});function YO(){return QO}const XO=1024;let ZO=0;class Sd{constructor(e,t){this.from=e,this.to=t}}class it{constructor(e={}){this.id=ZO++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=zn.match(e)),t=>{let s=e(t);return s===void 0?null:[this,s]}}}it.closedBy=new it({deserialize:n=>n.split(" ")});it.openedBy=new it({deserialize:n=>n.split(" ")});it.group=new it({deserialize:n=>n.split(" ")});it.isolate=new it({deserialize:n=>{if(n&&n!="rtl"&&n!="ltr"&&n!="auto")throw new RangeError("Invalid value for isolate: "+n);return n||"auto"}});it.contextHash=new it({perNode:!0});it.lookAhead=new it({perNode:!0});it.mounted=new it({perNode:!0});class Bu{constructor(e,t,s){this.tree=e,this.overlay=t,this.parser=s}static get(e){return e&&e.props&&e.props[it.mounted.id]}}const eL=Object.create(null);class zn{constructor(e,t,s,i=0){this.name=e,this.props=t,this.id=s,this.flags=i}static define(e){let t=e.props&&e.props.length?Object.create(null):eL,s=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new zn(e.name||"",t,e.id,s);if(e.props){for(let r of e.props)if(Array.isArray(r)||(r=r(i)),r){if(r[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[r[0].id]=r[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(it.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let s in e)for(let i of s.split(" "))t[i]=e[s];return s=>{for(let i=s.prop(it.group),r=-1;r<(i?i.length:0);r++){let o=t[r<0?s.name:i[r]];if(o)return o}}}}zn.none=new zn("",Object.create(null),0,8);class cp{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let s of this.types){let i=null;for(let r of e){let o=r(s);if(o){i||(i=Object.assign({},s.props));let l=o[1],a=o[0];a.combine&&a.id in i&&(l=a.combine(i[a.id],l)),i[a.id]=l}}t.push(i?new zn(s.name,i,s.id,s.flags):s)}return new cp(t)}}const Ba=new WeakMap,q0=new WeakMap;var cn;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(cn||(cn={}));class It{constructor(e,t,s,i,r){if(this.type=e,this.children=t,this.positions=s,this.length=i,this.props=null,r&&r.length){this.props=Object.create(null);for(let[o,l]of r)this.props[typeof o=="number"?o:o.id]=l}}toString(){let e=Bu.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let s of this.children){let i=s.toString();i&&(t&&(t+=","),t+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new nh(this.topNode,e)}cursorAt(e,t=0,s=0){let i=Ba.get(this)||this.topNode,r=new nh(i);return r.moveTo(e,t),Ba.set(this,r._tree),r}get topNode(){return new us(this,0,0,null)}resolve(e,t=0){let s=Ml(Ba.get(this)||this.topNode,e,t,!1);return Ba.set(this,s),s}resolveInner(e,t=0){let s=Ml(q0.get(this)||this.topNode,e,t,!0);return q0.set(this,s),s}resolveStack(e,t=0){return sL(this,e,t)}iterate(e){let{enter:t,leave:s,from:i=0,to:r=this.length}=e,o=e.mode||0,l=(o&cn.IncludeAnonymous)>0;for(let a=this.cursor(o|cn.IncludeAnonymous);;){let u=!1;if(a.from<=r&&a.to>=i&&(!l&&a.type.isAnonymous||t(a)!==!1)){if(a.firstChild())continue;u=!0}for(;u&&s&&(l||!a.type.isAnonymous)&&s(a),!a.nextSibling();){if(!a.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:hp(zn.none,this.children,this.positions,0,this.children.length,0,this.length,(t,s,i)=>new It(this.type,t,s,i,this.propValues),e.makeTree||((t,s,i)=>new It(zn.none,t,s,i)))}static build(e){return iL(e)}}It.empty=new It(zn.none,[],[],0);class dp{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new dp(this.buffer,this.index)}}class Bi{constructor(e,t,s){this.buffer=e,this.length=t,this.set=s}get type(){return zn.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],s=this.buffer[e+3],i=this.set.types[t],r=i.name;if(/\W/.test(r)&&!i.isError&&(r=JSON.stringify(r)),e+=4,s==e)return r;let o=[];for(;e<s;)o.push(this.childString(e)),e=this.buffer[e+3];return r+"("+o.join(",")+")"}findChild(e,t,s,i,r){let{buffer:o}=this,l=-1;for(let a=e;a!=t&&!(wk(r,i,o[a+1],o[a+2])&&(l=a,s>0));a=o[a+3]);return l}slice(e,t,s){let i=this.buffer,r=new Uint16Array(t-e),o=0;for(let l=e,a=0;l<t;){r[a++]=i[l++],r[a++]=i[l++]-s;let u=r[a++]=i[l++]-s;r[a++]=i[l++]-e,o=Math.max(o,u)}return new Bi(r,o,this.set)}}function wk(n,e,t,s){switch(n){case-2:return t<e;case-1:return s>=e&&t<e;case 0:return t<e&&s>e;case 1:return t<=e&&s>e;case 2:return s>e;case 4:return!0}}function Ml(n,e,t,s){for(var i;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let o=!s&&n instanceof us&&n.index<0?null:n.parent;if(!o)return n;n=o}let r=s?0:cn.IgnoreOverlays;if(s)for(let o=n,l=o.parent;l;o=l,l=o.parent)o instanceof us&&o.index<0&&((i=l.enter(e,t,r))===null||i===void 0?void 0:i.from)!=o.from&&(n=l);for(;;){let o=n.enter(e,t,r);if(!o)return n;n=o}}class Sk{cursor(e=0){return new nh(this,e)}getChild(e,t=null,s=null){let i=G0(this,e,t,s);return i.length?i[0]:null}getChildren(e,t=null,s=null){return G0(this,e,t,s)}resolve(e,t=0){return Ml(this,e,t,!1)}resolveInner(e,t=0){return Ml(this,e,t,!0)}matchContext(e){return th(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),s=this;for(;t;){let i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(s=t,t=i.prevSibling):t=i}return s}get node(){return this}get next(){return this.parent}}class us extends Sk{constructor(e,t,s,i){super(),this._tree=e,this.from=t,this.index=s,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,s,i,r=0){for(let o=this;;){for(let{children:l,positions:a}=o._tree,u=t>0?l.length:-1;e!=u;e+=t){let c=l[e],d=a[e]+o.from;if(wk(i,s,d,d+c.length)){if(c instanceof Bi){if(r&cn.ExcludeBuffers)continue;let f=c.findChild(0,c.buffer.length,t,s-d,i);if(f>-1)return new Pi(new tL(o,c,e,d),null,f)}else if(r&cn.IncludeAnonymous||!c.type.isAnonymous||fp(c)){let f;if(!(r&cn.IgnoreMounts)&&(f=Bu.get(c))&&!f.overlay)return new us(f.tree,d,e,o);let p=new us(c,d,e,o);return r&cn.IncludeAnonymous||!p.type.isAnonymous?p:p.nextChild(t<0?c.children.length-1:0,t,s,i)}}}if(r&cn.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,s=0){let i;if(!(s&cn.IgnoreOverlays)&&(i=Bu.get(this._tree))&&i.overlay){let r=e-this.from;for(let{from:o,to:l}of i.overlay)if((t>0?o<=r:o<r)&&(t<0?l>=r:l>r))return new us(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,s)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function G0(n,e,t,s){let i=n.cursor(),r=[];if(!i.firstChild())return r;if(t!=null){for(let o=!1;!o;)if(o=i.type.is(t),!i.nextSibling())return r}for(;;){if(s!=null&&i.type.is(s))return r;if(i.type.is(e)&&r.push(i.node),!i.nextSibling())return s==null?r:[]}}function th(n,e,t=e.length-1){for(let s=n;t>=0;s=s.parent){if(!s)return!1;if(!s.type.isAnonymous){if(e[t]&&e[t]!=s.name)return!1;t--}}return!0}class tL{constructor(e,t,s,i){this.parent=e,this.buffer=t,this.index=s,this.start=i}}class Pi extends Sk{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,s){super(),this.context=e,this._parent=t,this.index=s,this.type=e.buffer.set.types[e.buffer.buffer[s]]}child(e,t,s){let{buffer:i}=this.context,r=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.context.start,s);return r<0?null:new Pi(this.context,this,r)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,s=0){if(s&cn.ExcludeBuffers)return null;let{buffer:i}=this.context,r=i.findChild(this.index+4,i.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return r<0?null:new Pi(this.context,this,r)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Pi(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Pi(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:s}=this.context,i=this.index+4,r=s.buffer[this.index+3];if(r>i){let o=s.buffer[this.index+1];e.push(s.slice(i,r,o)),t.push(0)}return new It(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function Ck(n){if(!n.length)return null;let e=0,t=n[0];for(let r=1;r<n.length;r++){let o=n[r];(o.from>t.from||o.to<t.to)&&(t=o,e=r)}let s=t instanceof us&&t.index<0?null:t.parent,i=n.slice();return s?i[e]=s:i.splice(e,1),new nL(i,t)}class nL{constructor(e,t){this.heads=e,this.node=t}get next(){return Ck(this.heads)}}function sL(n,e,t){let s=n.resolveInner(e,t),i=null;for(let r=s instanceof us?s:s.context.parent;r;r=r.parent)if(r.index<0){let o=r.parent;(i||(i=[s])).push(o.resolve(e,t)),r=o}else{let o=Bu.get(r.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let l=new us(o.tree,o.overlay[0].from+r.from,-1,r);(i||(i=[s])).push(Ml(l,e,t,!1))}}return i?Ck(i):s}class nh{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof us)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let s=e._parent;s;s=s._parent)this.stack.unshift(s.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:s,buffer:i}=this.buffer;return this.type=t||i.set.types[i.buffer[e]],this.from=s+i.buffer[e+1],this.to=s+i.buffer[e+2],!0}yield(e){return e?e instanceof us?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,s){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,s,this.mode));let{buffer:i}=this.buffer,r=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.buffer.start,s);return r<0?!1:(this.stack.push(this.index),this.yieldBuf(r))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,s=this.mode){return this.buffer?s&cn.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,s))}parent(){if(!this.buffer)return this.yieldNode(this.mode&cn.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&cn.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,s=this.stack.length-1;if(e<0){let i=s<0?0:this.stack[s]+4;if(this.index!=i)return this.yieldBuf(t.findChild(i,this.index,-1,0,4))}else{let i=t.buffer[this.index+3];if(i<(s<0?t.buffer.length:t.buffer[this.stack[s]+3]))return this.yieldBuf(i)}return s<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,s,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let r=0;r<this.index;r++)if(i.buffer.buffer[r+3]<this.index)return!1;({index:t,parent:s}=i)}else({index:t,_parent:s}=this._tree);for(;s;{index:t,_parent:s}=s)if(t>-1)for(let r=t+e,o=e<0?-1:s._tree.children.length;r!=o;r+=e){let l=s._tree.children[r];if(this.mode&cn.IncludeAnonymous||l instanceof Bi||!l.type.isAnonymous||fp(l))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,s=0;if(e&&e.context==this.buffer)e:for(let i=this.index,r=this.stack.length;r>=0;){for(let o=e;o;o=o._parent)if(o.index==i){if(i==this.index)return o;t=o,s=r+1;break e}i=this.stack[--r]}for(let i=s;i<this.stack.length;i++)t=new Pi(this.buffer,t,this.stack[i]);return this.bufferNode=new Pi(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let s=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){s++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&t&&t(this),i=this.type.isAnonymous,!s)return;if(this.nextSibling())break;this.parent(),s--,i=!0}}}matchContext(e){if(!this.buffer)return th(this.node.parent,e);let{buffer:t}=this.buffer,{types:s}=t.set;for(let i=e.length-1,r=this.stack.length-1;i>=0;r--){if(r<0)return th(this._tree,e,i);let o=s[t.buffer[this.stack[r]]];if(!o.isAnonymous){if(e[i]&&e[i]!=o.name)return!1;i--}}return!0}}function fp(n){return n.children.some(e=>e instanceof Bi||!e.type.isAnonymous||fp(e))}function iL(n){var e;let{buffer:t,nodeSet:s,maxBufferLength:i=XO,reused:r=[],minRepeatType:o=s.types.length}=n,l=Array.isArray(t)?new dp(t,t.length):t,a=s.types,u=0,c=0;function d(N,A,w,M,G,ue){let{id:ie,start:F,end:ae,size:ee}=l,V=c,J=u;if(ee<0)if(l.next(),ee==-1){let $e=r[ie];w.push($e),M.push(F-N);return}else if(ee==-3){u=ie;return}else if(ee==-4){c=ie;return}else throw new RangeError(`Unrecognized record size: ${ee}`);let X=a[ie],de,Ce,Te=F-N;if(ae-F<=i&&(Ce=x(l.pos-A,G))){let $e=new Uint16Array(Ce.size-Ce.skip),me=l.pos-Ce.size,qe=$e.length;for(;l.pos>me;)qe=m(Ce.start,$e,qe);de=new Bi($e,ae-Ce.start,s),Te=Ce.start-N}else{let $e=l.pos-ee;l.next();let me=[],qe=[],rt=ie>=o?ie:-1,pt=0,ot=ae;for(;l.pos>$e;)rt>=0&&l.id==rt&&l.size>=0?(l.end<=ot-i&&(g(me,qe,F,pt,l.end,ot,rt,V,J),pt=me.length,ot=l.end),l.next()):ue>2500?f(F,$e,me,qe):d(F,$e,me,qe,rt,ue+1);if(rt>=0&&pt>0&&pt<me.length&&g(me,qe,F,pt,F,ot,rt,V,J),me.reverse(),qe.reverse(),rt>-1&&pt>0){let le=p(X,J);de=hp(X,me,qe,0,me.length,0,ae-F,le,le)}else de=k(X,me,qe,ae-F,V-ae,J)}w.push(de),M.push(Te)}function f(N,A,w,M){let G=[],ue=0,ie=-1;for(;l.pos>A;){let{id:F,start:ae,end:ee,size:V}=l;if(V>4)l.next();else{if(ie>-1&&ae<ie)break;ie<0&&(ie=ee-i),G.push(F,ae,ee),ue++,l.next()}}if(ue){let F=new Uint16Array(ue*4),ae=G[G.length-2];for(let ee=G.length-3,V=0;ee>=0;ee-=3)F[V++]=G[ee],F[V++]=G[ee+1]-ae,F[V++]=G[ee+2]-ae,F[V++]=V;w.push(new Bi(F,G[2]-ae,s)),M.push(ae-N)}}function p(N,A){return(w,M,G)=>{let ue=0,ie=w.length-1,F,ae;if(ie>=0&&(F=w[ie])instanceof It){if(!ie&&F.type==N&&F.length==G)return F;(ae=F.prop(it.lookAhead))&&(ue=M[ie]+F.length+ae)}return k(N,w,M,G,ue,A)}}function g(N,A,w,M,G,ue,ie,F,ae){let ee=[],V=[];for(;N.length>M;)ee.push(N.pop()),V.push(A.pop()+w-G);N.push(k(s.types[ie],ee,V,ue-G,F-ue,ae)),A.push(G-w)}function k(N,A,w,M,G,ue,ie){if(ue){let F=[it.contextHash,ue];ie=ie?[F].concat(ie):[F]}if(G>25){let F=[it.lookAhead,G];ie=ie?[F].concat(ie):[F]}return new It(N,A,w,M,ie)}function x(N,A){let w=l.fork(),M=0,G=0,ue=0,ie=w.end-i,F={size:0,start:0,skip:0};e:for(let ae=w.pos-N;w.pos>ae;){let ee=w.size;if(w.id==A&&ee>=0){F.size=M,F.start=G,F.skip=ue,ue+=4,M+=4,w.next();continue}let V=w.pos-ee;if(ee<0||V<ae||w.start<ie)break;let J=w.id>=o?4:0,X=w.start;for(w.next();w.pos>V;){if(w.size<0)if(w.size==-3)J+=4;else break e;else w.id>=o&&(J+=4);w.next()}G=X,M+=ee,ue+=J}return(A<0||M==N)&&(F.size=M,F.start=G,F.skip=ue),F.size>4?F:void 0}function m(N,A,w){let{id:M,start:G,end:ue,size:ie}=l;if(l.next(),ie>=0&&M<o){let F=w;if(ie>4){let ae=l.pos-(ie-4);for(;l.pos>ae;)w=m(N,A,w)}A[--w]=F,A[--w]=ue-N,A[--w]=G-N,A[--w]=M}else ie==-3?u=M:ie==-4&&(c=M);return w}let _=[],R=[];for(;l.pos>0;)d(n.start||0,n.bufferStart||0,_,R,-1,0);let U=(e=n.length)!==null&&e!==void 0?e:_.length?R[0]+_[0].length:0;return new It(a[n.topID],_.reverse(),R.reverse(),U)}const K0=new WeakMap;function cu(n,e){if(!n.isAnonymous||e instanceof Bi||e.type!=n)return 1;let t=K0.get(e);if(t==null){t=1;for(let s of e.children){if(s.type!=n||!(s instanceof It)){t=1;break}t+=cu(n,s)}K0.set(e,t)}return t}function hp(n,e,t,s,i,r,o,l,a){let u=0;for(let g=s;g<i;g++)u+=cu(n,e[g]);let c=Math.ceil(u*1.5/8),d=[],f=[];function p(g,k,x,m,_){for(let R=x;R<m;){let U=R,N=k[R],A=cu(n,g[R]);for(R++;R<m;R++){let w=cu(n,g[R]);if(A+w>=c)break;A+=w}if(R==U+1){if(A>c){let w=g[U];p(w.children,w.positions,0,w.children.length,k[U]+_);continue}d.push(g[U])}else{let w=k[R-1]+g[R-1].length-N;d.push(hp(n,g,k,U,R,N,w,null,a))}f.push(N+_-r)}}return p(e,t,s,i,0),(l||a)(d,f,o)}class gr{constructor(e,t,s,i,r=!1,o=!1){this.from=e,this.to=t,this.tree=s,this.offset=i,this.open=(r?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],s=!1){let i=[new gr(0,e.length,e,0,!1,s)];for(let r of t)r.to>e.length&&i.push(r);return i}static applyChanges(e,t,s=128){if(!t.length)return e;let i=[],r=1,o=e.length?e[0]:null;for(let l=0,a=0,u=0;;l++){let c=l<t.length?t[l]:null,d=c?c.fromA:1e9;if(d-a>=s)for(;o&&o.from<d;){let f=o;if(a>=f.from||d<=f.to||u){let p=Math.max(f.from,a)-u,g=Math.min(f.to,d)-u;f=p>=g?null:new gr(p,g,f.tree,f.offset+u,l>0,!!c)}if(f&&i.push(f),o.to>d)break;o=r<e.length?e[r++]:null}if(!c)break;a=c.toA,u=c.toA-c.toB}return i}}class Ak{startParse(e,t,s){return typeof e=="string"&&(e=new rL(e)),s=s?s.length?s.map(i=>new Sd(i.from,i.to)):[new Sd(0,0)]:[new Sd(0,e.length)],this.createParse(e,t||[],s)}parse(e,t,s){let i=this.startParse(e,t,s);for(;;){let r=i.advance();if(r)return r}}}class rL{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new it({perNode:!0});let oL=0;class ts{constructor(e,t,s,i){this.name=e,this.set=t,this.base=s,this.modified=i,this.id=oL++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let s=typeof e=="string"?e:"?";if(e instanceof ts&&(t=e),t?.base)throw new Error("Can not derive from a modified tag");let i=new ts(s,[],null,[]);if(i.set.push(i),t)for(let r of t.set)i.set.push(r);return i}static defineModifier(e){let t=new Fu(e);return s=>s.modified.indexOf(t)>-1?s:Fu.get(s.base||s,s.modified.concat(t).sort((i,r)=>i.id-r.id))}}let lL=0;class Fu{constructor(e){this.name=e,this.instances=[],this.id=lL++}static get(e,t){if(!t.length)return e;let s=t[0].instances.find(l=>l.base==e&&aL(t,l.modified));if(s)return s;let i=[],r=new ts(e.name,i,e,t);for(let l of t)l.instances.push(r);let o=uL(t);for(let l of e.set)if(!l.modified.length)for(let a of o)i.push(Fu.get(l,a));return r}}function aL(n,e){return n.length==e.length&&n.every((t,s)=>t==e[s])}function uL(n){let e=[[]];for(let t=0;t<n.length;t++)for(let s=0,i=e.length;s<i;s++)e.push(e[s].concat(n[t]));return e.sort((t,s)=>s.length-t.length)}function cL(n){let e=Object.create(null);for(let t in n){let s=n[t];Array.isArray(s)||(s=[s]);for(let i of t.split(" "))if(i){let r=[],o=2,l=i;for(let d=0;;){if(l=="..."&&d>0&&d+3==i.length){o=1;break}let f=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!f)throw new RangeError("Invalid path: "+i);if(r.push(f[0]=="*"?"":f[0][0]=='"'?JSON.parse(f[0]):f[0]),d+=f[0].length,d==i.length)break;let p=i[d++];if(d==i.length&&p=="!"){o=0;break}if(p!="/")throw new RangeError("Invalid path: "+i);l=i.slice(d)}let a=r.length-1,u=r[a];if(!u)throw new RangeError("Invalid path: "+i);let c=new Il(s,o,a>0?r.slice(0,a):null);e[u]=c.sort(e[u])}}return Ek.add(e)}const Ek=new it({combine(n,e){let t,s,i;for(;n||e;){if(!n||e&&n.depth>=e.depth?(i=e,e=e.next):(i=n,n=n.next),t&&t.mode==i.mode&&!i.context&&!t.context)continue;let r=new Il(i.tags,i.mode,i.context);t?t.next=r:s=r,t=r}return s}});class Il{constructor(e,t,s,i){this.tags=e,this.mode=t,this.context=s,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Il.empty=new Il([],2,null);function Tk(n,e){let t=Object.create(null);for(let r of n)if(!Array.isArray(r.tag))t[r.tag.id]=r.class;else for(let o of r.tag)t[o.id]=r.class;let{scope:s,all:i=null}=e||{};return{style:r=>{let o=i;for(let l of r)for(let a of l.set){let u=t[a.id];if(u){o=o?o+" "+u:u;break}}return o},scope:s}}function dL(n,e){let t=null;for(let s of n){let i=s.style(e);i&&(t=t?t+" "+i:i)}return t}function fL(n,e,t,s=0,i=n.length){let r=new hL(s,Array.isArray(e)?e:[e],t);r.highlightRange(n.cursor(),s,i,"",r.highlighters),r.flush(i)}class hL{constructor(e,t,s){this.at=e,this.highlighters=t,this.span=s,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,s,i,r){let{type:o,from:l,to:a}=e;if(l>=s||a<=t)return;o.isTop&&(r=this.highlighters.filter(p=>!p.scope||p.scope(o)));let u=i,c=pL(e)||Il.empty,d=dL(r,c.tags);if(d&&(u&&(u+=" "),u+=d,c.mode==1&&(i+=(i?" ":"")+d)),this.startSpan(Math.max(t,l),u),c.opaque)return;let f=e.tree&&e.tree.prop(it.mounted);if(f&&f.overlay){let p=e.node.enter(f.overlay[0].from+l,1),g=this.highlighters.filter(x=>!x.scope||x.scope(f.tree.type)),k=e.firstChild();for(let x=0,m=l;;x++){let _=x<f.overlay.length?f.overlay[x]:null,R=_?_.from+l:a,U=Math.max(t,m),N=Math.min(s,R);if(U<N&&k)for(;e.from<N&&(this.highlightRange(e,U,N,i,r),this.startSpan(Math.min(N,e.to),u),!(e.to>=R||!e.nextSibling())););if(!_||R>s)break;m=_.to+l,m>t&&(this.highlightRange(p.cursor(),Math.max(t,_.from+l),Math.min(s,m),"",g),this.startSpan(Math.min(s,m),u))}k&&e.parent()}else if(e.firstChild()){f&&(i="");do if(!(e.to<=t)){if(e.from>=s)break;this.highlightRange(e,t,s,i,r),this.startSpan(Math.min(s,e.to),u)}while(e.nextSibling());e.parent()}}}function pL(n){let e=n.type.prop(Ek);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}const De=ts.define,Fa=De(),Si=De(),J0=De(Si),Q0=De(Si),Ci=De(),Ua=De(Ci),Cd=De(Ci),Ms=De(),tr=De(Ms),Ps=De(),Rs=De(),sh=De(),No=De(sh),za=De(),Pe={comment:Fa,lineComment:De(Fa),blockComment:De(Fa),docComment:De(Fa),name:Si,variableName:De(Si),typeName:J0,tagName:De(J0),propertyName:Q0,attributeName:De(Q0),className:De(Si),labelName:De(Si),namespace:De(Si),macroName:De(Si),literal:Ci,string:Ua,docString:De(Ua),character:De(Ua),attributeValue:De(Ua),number:Cd,integer:De(Cd),float:De(Cd),bool:De(Ci),regexp:De(Ci),escape:De(Ci),color:De(Ci),url:De(Ci),keyword:Ps,self:De(Ps),null:De(Ps),atom:De(Ps),unit:De(Ps),modifier:De(Ps),operatorKeyword:De(Ps),controlKeyword:De(Ps),definitionKeyword:De(Ps),moduleKeyword:De(Ps),operator:Rs,derefOperator:De(Rs),arithmeticOperator:De(Rs),logicOperator:De(Rs),bitwiseOperator:De(Rs),compareOperator:De(Rs),updateOperator:De(Rs),definitionOperator:De(Rs),typeOperator:De(Rs),controlOperator:De(Rs),punctuation:sh,separator:De(sh),bracket:No,angleBracket:De(No),squareBracket:De(No),paren:De(No),brace:De(No),content:Ms,heading:tr,heading1:De(tr),heading2:De(tr),heading3:De(tr),heading4:De(tr),heading5:De(tr),heading6:De(tr),contentSeparator:De(Ms),list:De(Ms),quote:De(Ms),emphasis:De(Ms),strong:De(Ms),link:De(Ms),monospace:De(Ms),strikethrough:De(Ms),inserted:De(),deleted:De(),changed:De(),invalid:De(),meta:za,documentMeta:De(za),annotation:De(za),processingInstruction:De(za),definition:ts.defineModifier("definition"),constant:ts.defineModifier("constant"),function:ts.defineModifier("function"),standard:ts.defineModifier("standard"),local:ts.defineModifier("local"),special:ts.defineModifier("special")};for(let n in Pe){let e=Pe[n];e instanceof ts&&(e.name=n)}Tk([{tag:Pe.link,class:"tok-link"},{tag:Pe.heading,class:"tok-heading"},{tag:Pe.emphasis,class:"tok-emphasis"},{tag:Pe.strong,class:"tok-strong"},{tag:Pe.keyword,class:"tok-keyword"},{tag:Pe.atom,class:"tok-atom"},{tag:Pe.bool,class:"tok-bool"},{tag:Pe.url,class:"tok-url"},{tag:Pe.labelName,class:"tok-labelName"},{tag:Pe.inserted,class:"tok-inserted"},{tag:Pe.deleted,class:"tok-deleted"},{tag:Pe.literal,class:"tok-literal"},{tag:Pe.string,class:"tok-string"},{tag:Pe.number,class:"tok-number"},{tag:[Pe.regexp,Pe.escape,Pe.special(Pe.string)],class:"tok-string2"},{tag:Pe.variableName,class:"tok-variableName"},{tag:Pe.local(Pe.variableName),class:"tok-variableName tok-local"},{tag:Pe.definition(Pe.variableName),class:"tok-variableName tok-definition"},{tag:Pe.special(Pe.variableName),class:"tok-variableName2"},{tag:Pe.definition(Pe.propertyName),class:"tok-propertyName tok-definition"},{tag:Pe.typeName,class:"tok-typeName"},{tag:Pe.namespace,class:"tok-namespace"},{tag:Pe.className,class:"tok-className"},{tag:Pe.macroName,class:"tok-macroName"},{tag:Pe.propertyName,class:"tok-propertyName"},{tag:Pe.operator,class:"tok-operator"},{tag:Pe.comment,class:"tok-comment"},{tag:Pe.meta,class:"tok-meta"},{tag:Pe.invalid,class:"tok-invalid"},{tag:Pe.punctuation,class:"tok-punctuation"}]);var Ad;const zr=new it;function mL(n){return Ie.define({combine:n?e=>e.concat(n):void 0})}const gL=new it;class vs{constructor(e,t,s=[],i=""){this.data=e,this.name=i,lt.prototype.hasOwnProperty("tree")||Object.defineProperty(lt.prototype,"tree",{get(){return An(this)}}),this.parser=t,this.extension=[Fi.of(this),lt.languageData.of((r,o,l)=>{let a=Y0(r,o,l),u=a.type.prop(zr);if(!u)return[];let c=r.facet(u),d=a.type.prop(gL);if(d){let f=a.resolve(o-a.from,l);for(let p of d)if(p.test(f,r)){let g=r.facet(p.facet);return p.type=="replace"?g:g.concat(c)}}return c})].concat(s)}isActiveAt(e,t,s=-1){return Y0(e,t,s).type.prop(zr)==this.data}findRegions(e){let t=e.facet(Fi);if(t?.data==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let s=[],i=(r,o)=>{if(r.prop(zr)==this.data){s.push({from:o,to:o+r.length});return}let l=r.prop(it.mounted);if(l){if(l.tree.prop(zr)==this.data){if(l.overlay)for(let a of l.overlay)s.push({from:a.from+o,to:a.to+o});else s.push({from:o,to:o+r.length});return}else if(l.overlay){let a=s.length;if(i(l.tree,l.overlay[0].from+o),s.length>a)return}}for(let a=0;a<r.children.length;a++){let u=r.children[a];u instanceof It&&i(u,r.positions[a]+o)}};return i(An(e),0),s}get allowsNesting(){return!0}}vs.setState=et.define();function Y0(n,e,t){let s=n.facet(Fi),i=An(n).topNode;if(!s||s.allowsNesting)for(let r=i;r;r=r.enter(e,t,cn.ExcludeBuffers))r.type.isTop&&(i=r);return i}function An(n){let e=n.field(vs.state,!1);return e?e.tree:It.empty}class vL{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let s=this.cursorPos-this.string.length;return e<s||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-s,t-s)}}let Bo=null;class go{constructor(e,t,s=[],i,r,o,l,a){this.parser=e,this.state=t,this.fragments=s,this.tree=i,this.treeLen=r,this.viewport=o,this.skipped=l,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,s){return new go(e,t,[],It.empty,0,s,[],null)}startParse(){return this.parser.startParse(new vL(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=It.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var s;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(gr.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(s=this.parse.stoppedAt)!==null&&s!==void 0?s:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(gr.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=Bo;Bo=this;try{return e()}finally{Bo=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=X0(e,t.from,t.to);return e}changes(e,t){let{fragments:s,tree:i,treeLen:r,viewport:o,skipped:l}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((u,c,d,f)=>a.push({fromA:u,toA:c,fromB:d,toB:f})),s=gr.applyChanges(s,a),i=It.empty,r=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){l=[];for(let u of this.skipped){let c=e.mapPos(u.from,1),d=e.mapPos(u.to,-1);c<d&&l.push({from:c,to:d})}}}return new go(this.parser,t,s,i,r,o,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let s=0;s<this.skipped.length;s++){let{from:i,to:r}=this.skipped[s];i<e.to&&r>e.from&&(this.fragments=X0(this.fragments,i,r),this.skipped.splice(s--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends Ak{createParse(t,s,i){let r=i[0].from,o=i[i.length-1].to;return{parsedPos:r,advance(){let a=Bo;if(a){for(let u of i)a.tempSkipped.push(u);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=o,new It(zn.none,[],[],o-r)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return Bo}}function X0(n,e,t){return gr.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class vo{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),s=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,s)||t.takeTree(),new vo(t)}static init(e){let t=Math.min(3e3,e.doc.length),s=go.create(e.facet(Fi).parser,e,{from:0,to:t});return s.work(20,t)||s.takeTree(),new vo(s)}}vs.state=hn.define({create:vo.init,update(n,e){for(let t of e.effects)if(t.is(vs.setState))return t.value;return e.startState.facet(Fi)!=e.state.facet(Fi)?vo.init(e.state):n.apply(e)}});let Dk=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(Dk=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const Ed=typeof navigator<"u"&&(!((Ad=navigator.scheduling)===null||Ad===void 0)&&Ad.isInputPending)?()=>navigator.scheduling.isInputPending():null,yL=qt.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(vs.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(vs.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=Dk(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:s,viewport:{to:i}}=this.view,r=s.field(vs.state);if(r.tree==r.context.tree&&r.context.isDone(i+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!Ed?Math.max(25,e.timeRemaining()-5):1e9),l=r.context.treeLen<i&&s.doc.length>i+1e3,a=r.context.work(()=>Ed&&Ed()||Date.now()>o,i+(l?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(r.context.takeTree(),this.view.dispatch({effects:vs.setState.of(new vo(r.context))})),this.chunkBudget>0&&!(a&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(r.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>Bn(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Fi=Ie.define({combine(n){return n.length?n[0]:null},enables:n=>[vs.state,yL,Le.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]}),bL=Ie.define(),pp=Ie.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function Cr(n){let e=n.facet(pp);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function jl(n,e){let t="",s=n.tabSize,i=n.facet(pp)[0];if(i=="	"){for(;e>=s;)t+="	",e-=s;i=" "}for(let r=0;r<e;r++)t+=i;return t}function mp(n,e){n instanceof lt&&(n=new Ac(n));for(let s of n.state.facet(bL)){let i=s(n,e);if(i!==void 0)return i}let t=An(n.state);return t.length>=e?kL(n,t,e):null}class Ac{constructor(e,t={}){this.state=e,this.options=t,this.unit=Cr(e)}lineAt(e,t=1){let s=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:r}=this.options;return i!=null&&i>=s.from&&i<=s.to?r&&i==e?{text:"",from:e}:(t<0?i<e:i<=e)?{text:s.text.slice(i-s.from),from:i}:{text:s.text.slice(0,i-s.from),from:s.from}:s}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:s,from:i}=this.lineAt(e,t);return s.slice(e-i,Math.min(s.length,e+100-i))}column(e,t=1){let{text:s,from:i}=this.lineAt(e,t),r=this.countColumn(s,e-i),o=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return o>-1&&(r+=o-this.countColumn(s,s.search(/\S|$/))),r}countColumn(e,t=e.length){return Eo(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:s,from:i}=this.lineAt(e,t),r=this.options.overrideIndentation;if(r){let o=r(i);if(o>-1)return o}return this.countColumn(s,s.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Pk=new it;function kL(n,e,t){let s=e.resolveStack(t),i=e.resolveInner(t,-1).resolve(t,0).enterUnfinishedNodesBefore(t);if(i!=s.node){let r=[];for(let o=i;o&&!(o.from<s.node.from||o.to>s.node.to||o.from==s.node.from&&o.type==s.node.type);o=o.parent)r.push(o);for(let o=r.length-1;o>=0;o--)s={node:r[o],next:s}}return Rk(s,n,t)}function Rk(n,e,t){for(let s=n;s;s=s.next){let i=_L(s.node);if(i)return i(gp.create(e,t,s))}return 0}function xL(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function _L(n){let e=n.type.prop(Pk);if(e)return e;let t=n.firstChild,s;if(t&&(s=t.type.prop(it.closedBy))){let i=n.lastChild,r=i&&s.indexOf(i.name)>-1;return o=>AL(o,!0,1,void 0,r&&!xL(o)?i.from:void 0)}return n.parent==null?wL:null}function wL(){return 0}class gp extends Ac{constructor(e,t,s){super(e.state,e.options),this.base=e,this.pos=t,this.context=s}get node(){return this.context.node}static create(e,t,s){return new gp(e,t,s)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let s=e.resolve(t.from);for(;s.parent&&s.parent.from==s.from;)s=s.parent;if(SL(s,e))break;t=this.state.doc.lineAt(s.from)}return this.lineIndent(t.from)}continue(){return Rk(this.context.next,this.base,this.pos)}}function SL(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function CL(n){let e=n.node,t=e.childAfter(e.from),s=e.lastChild;if(!t)return null;let i=n.options.simulateBreak,r=n.state.doc.lineAt(t.from),o=i==null||i<=r.from?r.to:Math.min(r.to,i);for(let l=t.to;;){let a=e.childAfter(l);if(!a||a==s)return null;if(!a.type.isSkipped){if(a.from>=o)return null;let u=/^ */.exec(r.text.slice(t.to-r.from))[0].length;return{from:t.from,to:t.to+u}}l=a.to}}function AL(n,e,t,s,i){let r=n.textAfter,o=r.match(/^\s*/)[0].length,l=s&&r.slice(o,o+s.length)==s||i==n.pos+o,a=CL(n);return a?l?n.column(a.from):n.column(a.to):n.baseIndent+(l?0:n.unit*t)}const EL=200;function TL(){return lt.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let e=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!e.length)return n;let t=n.newDoc,{head:s}=n.newSelection.main,i=t.lineAt(s);if(s>i.from+EL)return n;let r=t.sliceString(i.from,s);if(!e.some(u=>u.test(r)))return n;let{state:o}=n,l=-1,a=[];for(let{head:u}of o.selection.ranges){let c=o.doc.lineAt(u);if(c.from==l)continue;l=c.from;let d=mp(o,c.from);if(d==null)continue;let f=/^\s*/.exec(c.text)[0],p=jl(o,d);f!=p&&a.push({from:c.from,to:c.from+f.length,insert:p})}return a.length?[n,{changes:a,sequential:!0}]:n})}const DL=Ie.define(),PL=new it;function RL(n,e,t){let s=An(n);if(s.length<t)return null;let i=s.resolveStack(t,1),r=null;for(let o=i;o;o=o.next){let l=o.node;if(l.to<=t||l.from>t)continue;if(r&&l.from<e)break;let a=l.type.prop(PL);if(a&&(l.to<s.length-50||s.length==n.doc.length||!OL(l))){let u=a(l,n);u&&u.from<=t&&u.from>=e&&u.to>t&&(r=u)}}return r}function OL(n){let e=n.lastChild;return e&&e.to==n.to&&e.type.isError}function Uu(n,e,t){for(let s of n.facet(DL)){let i=s(n,e,t);if(i)return i}return RL(n,e,t)}function Ok(n,e){let t=e.mapPos(n.from,1),s=e.mapPos(n.to,-1);return t>=s?void 0:{from:t,to:s}}const Ec=et.define({map:Ok}),ta=et.define({map:Ok});function Lk(n){let e=[];for(let{head:t}of n.state.selection.ranges)e.some(s=>s.from<=t&&s.to>=t)||e.push(n.lineBlockAt(t));return e}const Ar=hn.define({create(){return We.none},update(n,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((t,s)=>n=Z0(n,t,s)),n=n.map(e.changes);for(let t of e.effects)if(t.is(Ec)&&!LL(n,t.value.from,t.value.to)){let{preparePlaceholder:s}=e.state.facet(jk),i=s?We.replace({widget:new BL(s(e.state,t.value))}):ev;n=n.update({add:[i.range(t.value.from,t.value.to)]})}else t.is(ta)&&(n=n.update({filter:(s,i)=>t.value.from!=s||t.value.to!=i,filterFrom:t.value.from,filterTo:t.value.to}));return e.selection&&(n=Z0(n,e.selection.main.head)),n},provide:n=>Le.decorations.from(n),toJSON(n,e){let t=[];return n.between(0,e.doc.length,(s,i)=>{t.push(s,i)}),t},fromJSON(n){if(!Array.isArray(n)||n.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<n.length;){let s=n[t++],i=n[t++];if(typeof s!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(ev.range(s,i))}return We.set(e,!0)}});function Z0(n,e,t=e){let s=!1;return n.between(e,t,(i,r)=>{i<t&&r>e&&(s=!0)}),s?n.update({filterFrom:e,filterTo:t,filter:(i,r)=>i>=t||r<=e}):n}function zu(n,e,t){var s;let i=null;return(s=n.field(Ar,!1))===null||s===void 0||s.between(e,t,(r,o)=>{(!i||i.from>r)&&(i={from:r,to:o})}),i}function LL(n,e,t){let s=!1;return n.between(e,e,(i,r)=>{i==e&&r==t&&(s=!0)}),s}function Mk(n,e){return n.field(Ar,!1)?e:e.concat(et.appendConfig.of(Vk()))}const ML=n=>{for(let e of Lk(n)){let t=Uu(n.state,e.from,e.to);if(t)return n.dispatch({effects:Mk(n.state,[Ec.of(t),Ik(n,t)])}),!0}return!1},IL=n=>{if(!n.state.field(Ar,!1))return!1;let e=[];for(let t of Lk(n)){let s=zu(n.state,t.from,t.to);s&&e.push(ta.of(s),Ik(n,s,!1))}return e.length&&n.dispatch({effects:e}),e.length>0};function Ik(n,e,t=!0){let s=n.state.doc.lineAt(e.from).number,i=n.state.doc.lineAt(e.to).number;return Le.announce.of(`${n.state.phrase(t?"Folded lines":"Unfolded lines")} ${s} ${n.state.phrase("to")} ${i}.`)}const jL=n=>{let{state:e}=n,t=[];for(let s=0;s<e.doc.length;){let i=n.lineBlockAt(s),r=Uu(e,i.from,i.to);r&&t.push(Ec.of(r)),s=(r?n.lineBlockAt(r.to):i).to+1}return t.length&&n.dispatch({effects:Mk(n.state,t)}),!!t.length},VL=n=>{let e=n.state.field(Ar,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,n.state.doc.length,(s,i)=>{t.push(ta.of({from:s,to:i}))}),n.dispatch({effects:t}),!0},$L=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:ML},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:IL},{key:"Ctrl-Alt-[",run:jL},{key:"Ctrl-Alt-]",run:VL}],NL={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},jk=Ie.define({combine(n){return qs(n,NL)}});function Vk(n){return[Ar,zL]}function $k(n,e){let{state:t}=n,s=t.facet(jk),i=o=>{let l=n.lineBlockAt(n.posAtDOM(o.target)),a=zu(n.state,l.from,l.to);a&&n.dispatch({effects:ta.of(a)}),o.preventDefault()};if(s.placeholderDOM)return s.placeholderDOM(n,i,e);let r=document.createElement("span");return r.textContent=s.placeholderText,r.setAttribute("aria-label",t.phrase("folded code")),r.title=t.phrase("unfold"),r.className="cm-foldPlaceholder",r.onclick=i,r}const ev=We.replace({widget:new class extends Ui{toDOM(n){return $k(n,null)}}});class BL extends Ui{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return $k(e,this.value)}}const FL={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class Td extends di{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function UL(n={}){let e={...FL,...n},t=new Td(e,!0),s=new Td(e,!1),i=qt.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(Fi)!=o.state.facet(Fi)||o.startState.field(Ar,!1)!=o.state.field(Ar,!1)||An(o.startState)!=An(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let l=new ui;for(let a of o.viewportLineBlocks){let u=zu(o.state,a.from,a.to)?s:Uu(o.state,a.from,a.to)?t:null;u&&l.add(a.from,a.from,u)}return l.finish()}}),{domEventHandlers:r}=e;return[i,FO({class:"cm-foldGutter",markers(o){var l;return((l=o.plugin(i))===null||l===void 0?void 0:l.markers)||at.empty},initialSpacer(){return new Td(e,!1)},domEventHandlers:{...r,click:(o,l,a)=>{if(r.click&&r.click(o,l,a))return!0;let u=zu(o.state,l.from,l.to);if(u)return o.dispatch({effects:ta.of(u)}),!0;let c=Uu(o.state,l.from,l.to);return c?(o.dispatch({effects:Ec.of(c)}),!0):!1}}}),Vk()]}const zL=Le.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class na{constructor(e,t){this.specs=e;let s;function i(l){let a=Vi.newName();return(s||(s=Object.create(null)))["."+a]=l,a}const r=typeof t.all=="string"?t.all:t.all?i(t.all):void 0,o=t.scope;this.scope=o instanceof vs?l=>l.prop(zr)==o.data:o?l=>l==o:void 0,this.style=Tk(e.map(l=>({tag:l.tag,class:l.class||i(Object.assign({},l,{tag:null}))})),{all:r}).style,this.module=s?new Vi(s):null,this.themeType=t.themeType}static define(e,t){return new na(e,t||{})}}const ih=Ie.define(),Nk=Ie.define({combine(n){return n.length?[n[0]]:null}});function Dd(n){let e=n.facet(ih);return e.length?e:n.facet(Nk)}function Bk(n,e){let t=[WL],s;return n instanceof na&&(n.module&&t.push(Le.styleModule.of(n.module)),s=n.themeType),e?.fallback?t.push(Nk.of(n)):s?t.push(ih.computeN([Le.darkTheme],i=>i.facet(Le.darkTheme)==(s=="dark")?[n]:[])):t.push(ih.of(n)),t}class HL{constructor(e){this.markCache=Object.create(null),this.tree=An(e.state),this.decorations=this.buildDeco(e,Dd(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=An(e.state),s=Dd(e.state),i=s!=Dd(e.startState),{viewport:r}=e.view,o=e.changes.mapPos(this.decoratedTo,1);t.length<r.to&&!i&&t.type==this.tree.type&&o>=r.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(t!=this.tree||e.viewportChanged||i)&&(this.tree=t,this.decorations=this.buildDeco(e.view,s),this.decoratedTo=r.to)}buildDeco(e,t){if(!t||!this.tree.length)return We.none;let s=new ui;for(let{from:i,to:r}of e.visibleRanges)fL(this.tree,t,(o,l,a)=>{s.add(o,l,this.markCache[a]||(this.markCache[a]=We.mark({class:a})))},i,r);return s.finish()}}const WL=Dr.high(qt.fromClass(HL,{decorations:n=>n.decorations})),qL=na.define([{tag:Pe.meta,color:"#404740"},{tag:Pe.link,textDecoration:"underline"},{tag:Pe.heading,textDecoration:"underline",fontWeight:"bold"},{tag:Pe.emphasis,fontStyle:"italic"},{tag:Pe.strong,fontWeight:"bold"},{tag:Pe.strikethrough,textDecoration:"line-through"},{tag:Pe.keyword,color:"#708"},{tag:[Pe.atom,Pe.bool,Pe.url,Pe.contentSeparator,Pe.labelName],color:"#219"},{tag:[Pe.literal,Pe.inserted],color:"#164"},{tag:[Pe.string,Pe.deleted],color:"#a11"},{tag:[Pe.regexp,Pe.escape,Pe.special(Pe.string)],color:"#e40"},{tag:Pe.definition(Pe.variableName),color:"#00f"},{tag:Pe.local(Pe.variableName),color:"#30a"},{tag:[Pe.typeName,Pe.namespace],color:"#085"},{tag:Pe.className,color:"#167"},{tag:[Pe.special(Pe.variableName),Pe.macroName],color:"#256"},{tag:Pe.definition(Pe.propertyName),color:"#00c"},{tag:Pe.comment,color:"#940"},{tag:Pe.invalid,color:"#f00"}]),GL=Le.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Fk=1e4,Uk="()[]{}",zk=Ie.define({combine(n){return qs(n,{afterCursor:!0,brackets:Uk,maxScanDistance:Fk,renderMatch:QL})}}),KL=We.mark({class:"cm-matchingBracket"}),JL=We.mark({class:"cm-nonmatchingBracket"});function QL(n){let e=[],t=n.matched?KL:JL;return e.push(t.range(n.start.from,n.start.to)),n.end&&e.push(t.range(n.end.from,n.end.to)),e}const YL=hn.define({create(){return We.none},update(n,e){if(!e.docChanged&&!e.selection)return n;let t=[],s=e.state.facet(zk);for(let i of e.state.selection.ranges){if(!i.empty)continue;let r=Bs(e.state,i.head,-1,s)||i.head>0&&Bs(e.state,i.head-1,1,s)||s.afterCursor&&(Bs(e.state,i.head,1,s)||i.head<e.state.doc.length&&Bs(e.state,i.head+1,-1,s));r&&(t=t.concat(s.renderMatch(r,e.state)))}return We.set(t,!0)},provide:n=>Le.decorations.from(n)}),XL=[YL,GL];function ZL(n={}){return[zk.of(n),XL]}const eM=new it;function rh(n,e,t){let s=n.prop(e<0?it.openedBy:it.closedBy);if(s)return s;if(n.name.length==1){let i=t.indexOf(n.name);if(i>-1&&i%2==(e<0?1:0))return[t[i+e]]}return null}function oh(n){let e=n.type.prop(eM);return e?e(n.node):n}function Bs(n,e,t,s={}){let i=s.maxScanDistance||Fk,r=s.brackets||Uk,o=An(n),l=o.resolveInner(e,t);for(let a=l;a;a=a.parent){let u=rh(a.type,t,r);if(u&&a.from<a.to){let c=oh(a);if(c&&(t>0?e>=c.from&&e<c.to:e>c.from&&e<=c.to))return tM(n,e,t,a,c,u,r)}}return nM(n,e,t,o,l.type,i,r)}function tM(n,e,t,s,i,r,o){let l=s.parent,a={from:i.from,to:i.to},u=0,c=l?.cursor();if(c&&(t<0?c.childBefore(s.from):c.childAfter(s.to)))do if(t<0?c.to<=s.from:c.from>=s.to){if(u==0&&r.indexOf(c.type.name)>-1&&c.from<c.to){let d=oh(c);return{start:a,end:d?{from:d.from,to:d.to}:void 0,matched:!0}}else if(rh(c.type,t,o))u++;else if(rh(c.type,-t,o)){if(u==0){let d=oh(c);return{start:a,end:d&&d.from<d.to?{from:d.from,to:d.to}:void 0,matched:!1}}u--}}while(t<0?c.prevSibling():c.nextSibling());return{start:a,matched:!1}}function nM(n,e,t,s,i,r,o){let l=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),a=o.indexOf(l);if(a<0||a%2==0!=t>0)return null;let u={from:t<0?e-1:e,to:t>0?e+1:e},c=n.doc.iterRange(e,t>0?n.doc.length:0),d=0;for(let f=0;!c.next().done&&f<=r;){let p=c.value;t<0&&(f+=p.length);let g=e+f*t;for(let k=t>0?0:p.length-1,x=t>0?p.length:-1;k!=x;k+=t){let m=o.indexOf(p[k]);if(!(m<0||s.resolveInner(g+k,1).type!=i))if(m%2==0==t>0)d++;else{if(d==1)return{start:u,end:{from:g+k,to:g+k+1},matched:m>>1==a>>1};d--}}t>0&&(f+=p.length)}return c.done?{start:u,matched:!1}:null}function tv(n,e,t,s=0,i=0){e==null&&(e=n.search(/[^\s\u00a0]/),e==-1&&(e=n.length));let r=i;for(let o=s;o<e;o++)n.charCodeAt(o)==9?r+=t-r%t:r++;return r}class Hk{constructor(e,t,s,i){this.string=e,this.tabSize=t,this.indentUnit=s,this.overrideIndent=i,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let t=this.string.charAt(this.pos),s;if(typeof e=="string"?s=t==e:s=t&&(e instanceof RegExp?e.test(t):e(t)),s)return++this.pos,t}eatWhile(e){let t=this.pos;for(;this.eat(e););return this.pos>t}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=tv(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:tv(this.string,null,this.tabSize)}match(e,t,s){if(typeof e=="string"){let i=o=>s?o.toLowerCase():o,r=this.string.substr(this.pos,e.length);return i(r)==i(e)?(t!==!1&&(this.pos+=e.length),!0):null}else{let i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&t!==!1&&(this.pos+=i[0].length),i)}}current(){return this.string.slice(this.start,this.pos)}}function sM(n){return{name:n.name||"",token:n.token,blankLine:n.blankLine||(()=>{}),startState:n.startState||(()=>!0),copyState:n.copyState||iM,indent:n.indent||(()=>null),languageData:n.languageData||{},tokenTable:n.tokenTable||bp,mergeTokens:n.mergeTokens!==!1}}function iM(n){if(typeof n!="object")return n;let e={};for(let t in n){let s=n[t];e[t]=s instanceof Array?s.slice():s}return e}const nv=new WeakMap;class vp extends vs{constructor(e){let t=mL(e.languageData),s=sM(e),i,r=new class extends Ak{createParse(o,l,a){return new oM(i,o,l,a)}};super(t,r,[],e.name),this.topNode=uM(t,this),i=this,this.streamParser=s,this.stateAfter=new it({perNode:!0}),this.tokenTable=e.tokenTable?new Kk(s.tokenTable):aM}static define(e){return new vp(e)}getIndent(e){let t,{overrideIndentation:s}=e.options;s&&(t=nv.get(e.state),t!=null&&t<e.pos-1e4&&(t=void 0));let i=yp(this,e.node.tree,e.node.from,e.node.from,t??e.pos),r,o;if(i?(o=i.state,r=i.pos+1):(o=this.streamParser.startState(e.unit),r=e.node.from),e.pos-r>1e4)return null;for(;r<e.pos;){let a=e.state.doc.lineAt(r),u=Math.min(e.pos,a.to);if(a.length){let c=s?s(a.from):-1,d=new Hk(a.text,e.state.tabSize,e.unit,c<0?void 0:c);for(;d.pos<u-a.from;)qk(this.streamParser.token,d,o)}else this.streamParser.blankLine(o,e.unit);if(u==e.pos)break;r=a.to+1}let l=e.lineAt(e.pos);return s&&t==null&&nv.set(e.state,l.from),this.streamParser.indent(o,/^\s*(.*)/.exec(l.text)[1],e)}get allowsNesting(){return!1}}function yp(n,e,t,s,i){let r=t>=s&&t+e.length<=i&&e.prop(n.stateAfter);if(r)return{state:n.streamParser.copyState(r),pos:t+e.length};for(let o=e.children.length-1;o>=0;o--){let l=e.children[o],a=t+e.positions[o],u=l instanceof It&&a<i&&yp(n,l,a,s,i);if(u)return u}return null}function Wk(n,e,t,s,i){if(i&&t<=0&&s>=e.length)return e;!i&&t==0&&e.type==n.topNode&&(i=!0);for(let r=e.children.length-1;r>=0;r--){let o=e.positions[r],l=e.children[r],a;if(o<s&&l instanceof It){if(!(a=Wk(n,l,t-o,s-o,i)))break;return i?new It(e.type,e.children.slice(0,r).concat(a),e.positions.slice(0,r+1),o+a.length):a}}return null}function rM(n,e,t,s,i){for(let r of e){let o=r.from+(r.openStart?25:0),l=r.to-(r.openEnd?25:0),a=o<=t&&l>t&&yp(n,r.tree,0-r.offset,t,l),u;if(a&&a.pos<=s&&(u=Wk(n,r.tree,t+r.offset,a.pos+r.offset,!1)))return{state:a.state,tree:u}}return{state:n.streamParser.startState(i?Cr(i):4),tree:It.empty}}class oM{constructor(e,t,s,i){this.lang=e,this.input=t,this.fragments=s,this.ranges=i,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=i[i.length-1].to;let r=go.get(),o=i[0].from,{state:l,tree:a}=rM(e,s,o,this.to,r?.state);this.state=l,this.parsedPos=this.chunkStart=o+a.length;for(let u=0;u<a.children.length;u++)this.chunks.push(a.children[u]),this.chunkPos.push(a.positions[u]);r&&this.parsedPos<r.viewport.from-1e5&&i.some(u=>u.from<=r.viewport.from&&u.to>=r.viewport.from)&&(this.state=this.lang.streamParser.startState(Cr(r.state)),r.skipUntilInView(this.parsedPos,r.viewport.from),this.parsedPos=r.viewport.from),this.moveRangeIndex()}advance(){let e=go.get(),t=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),s=Math.min(t,this.chunkStart+512);for(e&&(s=Math.min(s,e.viewport.to));this.parsedPos<s;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=t?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,t),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let t=this.input.chunk(e);if(this.input.lineChunks)t==`
`&&(t="");else{let s=t.indexOf(`
`);s>-1&&(t=t.slice(0,s))}return e+t.length<=this.to?t:t.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,t=this.lineAfter(e),s=e+t.length;for(let i=this.rangeIndex;;){let r=this.ranges[i].to;if(r>=s||(t=t.slice(0,r-(s-t.length)),i++,i==this.ranges.length))break;let o=this.ranges[i].from,l=this.lineAfter(o);t+=l,s=o+l.length}return{line:t,end:s}}skipGapsTo(e,t,s){for(;;){let i=this.ranges[this.rangeIndex].to,r=e+t;if(s>0?i>r:i>=r)break;let o=this.ranges[++this.rangeIndex].from;t+=o-i}return t}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,t,s,i){let r=4;if(this.ranges.length>1){i=this.skipGapsTo(t,i,1),t+=i;let l=this.chunk.length;i=this.skipGapsTo(s,i,-1),s+=i,r+=this.chunk.length-l}let o=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&r==4&&o>=0&&this.chunk[o]==e&&this.chunk[o+2]==t?this.chunk[o+2]=s:this.chunk.push(e,t,s,r),i}parseLine(e){let{line:t,end:s}=this.nextLine(),i=0,{streamParser:r}=this.lang,o=new Hk(t,e?e.state.tabSize:4,e?Cr(e.state):2);if(o.eol())r.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let l=qk(r.token,o,this.state);if(l&&(i=this.emitToken(this.lang.tokenTable.resolve(l),this.parsedPos+o.start,this.parsedPos+o.pos,i)),o.start>1e4)break}this.parsedPos=s,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=It.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:lM,topID:0,maxBufferLength:512,reused:this.chunkReused});e=new It(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new It(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function qk(n,e,t){e.start=e.pos;for(let s=0;s<10;s++){let i=n(e,t);if(e.pos>e.start)return i}throw new Error("Stream parser failed to advance stream.")}const bp=Object.create(null),Vl=[zn.none],lM=new cp(Vl),sv=[],iv=Object.create(null),Gk=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])Gk[n]=Jk(bp,e);class Kk{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),Gk)}resolve(e){return e?this.table[e]||(this.table[e]=Jk(this.extra,e)):0}}const aM=new Kk(bp);function Pd(n,e){sv.indexOf(n)>-1||(sv.push(n),console.warn(e))}function Jk(n,e){let t=[];for(let l of e.split(" ")){let a=[];for(let u of l.split(".")){let c=n[u]||Pe[u];c?typeof c=="function"?a.length?a=a.map(c):Pd(u,`Modifier ${u} used at start of tag`):a.length?Pd(u,`Tag ${u} used as modifier`):a=Array.isArray(c)?c:[c]:Pd(u,`Unknown highlighting tag ${u}`)}for(let u of a)t.push(u)}if(!t.length)return 0;let s=e.replace(/ /g,"_"),i=s+" "+t.map(l=>l.id),r=iv[i];if(r)return r.id;let o=iv[i]=zn.define({id:Vl.length,name:s,props:[cL({[s]:t})]});return Vl.push(o),o.id}function uM(n,e){let t=zn.define({id:Vl.length,name:"Document",props:[zr.add(()=>n),Pk.add(()=>s=>e.getIndent(s))],top:!0});return Vl.push(t),t}Pt.RTL,Pt.LTR;const cM=n=>{let{state:e}=n,t=e.doc.lineAt(e.selection.main.from),s=xp(n.state,t.from);return s.line?dM(n):s.block?hM(n):!1};function kp(n,e){return({state:t,dispatch:s})=>{if(t.readOnly)return!1;let i=n(e,t);return i?(s(t.update(i)),!0):!1}}const dM=kp(gM,0),fM=kp(Qk,0),hM=kp((n,e)=>Qk(n,e,mM(e)),0);function xp(n,e){let t=n.languageDataAt("commentTokens",e,1);return t.length?t[0]:{}}const Fo=50;function pM(n,{open:e,close:t},s,i){let r=n.sliceDoc(s-Fo,s),o=n.sliceDoc(i,i+Fo),l=/\s*$/.exec(r)[0].length,a=/^\s*/.exec(o)[0].length,u=r.length-l;if(r.slice(u-e.length,u)==e&&o.slice(a,a+t.length)==t)return{open:{pos:s-l,margin:l&&1},close:{pos:i+a,margin:a&&1}};let c,d;i-s<=2*Fo?c=d=n.sliceDoc(s,i):(c=n.sliceDoc(s,s+Fo),d=n.sliceDoc(i-Fo,i));let f=/^\s*/.exec(c)[0].length,p=/\s*$/.exec(d)[0].length,g=d.length-p-t.length;return c.slice(f,f+e.length)==e&&d.slice(g,g+t.length)==t?{open:{pos:s+f+e.length,margin:/\s/.test(c.charAt(f+e.length))?1:0},close:{pos:i-p-t.length,margin:/\s/.test(d.charAt(g-1))?1:0}}:null}function mM(n){let e=[];for(let t of n.selection.ranges){let s=n.doc.lineAt(t.from),i=t.to<=s.to?s:n.doc.lineAt(t.to);i.from>s.from&&i.from==t.to&&(i=t.to==s.to+1?s:n.doc.lineAt(t.to-1));let r=e.length-1;r>=0&&e[r].to>s.from?e[r].to=i.to:e.push({from:s.from+/^\s*/.exec(s.text)[0].length,to:i.to})}return e}function Qk(n,e,t=e.selection.ranges){let s=t.map(r=>xp(e,r.from).block);if(!s.every(r=>r))return null;let i=t.map((r,o)=>pM(e,s[o],r.from,r.to));if(n!=2&&!i.every(r=>r))return{changes:e.changes(t.map((r,o)=>i[o]?[]:[{from:r.from,insert:s[o].open+" "},{from:r.to,insert:" "+s[o].close}]))};if(n!=1&&i.some(r=>r)){let r=[];for(let o=0,l;o<i.length;o++)if(l=i[o]){let a=s[o],{open:u,close:c}=l;r.push({from:u.pos-a.open.length,to:u.pos+u.margin},{from:c.pos-c.margin,to:c.pos+a.close.length})}return{changes:r}}return null}function gM(n,e,t=e.selection.ranges){let s=[],i=-1;for(let{from:r,to:o}of t){let l=s.length,a=1e9,u=xp(e,r).line;if(u){for(let c=r;c<=o;){let d=e.doc.lineAt(c);if(d.from>i&&(r==o||o>d.from)){i=d.from;let f=/^\s*/.exec(d.text)[0].length,p=f==d.length,g=d.text.slice(f,f+u.length)==u?f:-1;f<d.text.length&&f<a&&(a=f),s.push({line:d,comment:g,token:u,indent:f,empty:p,single:!1})}c=d.to+1}if(a<1e9)for(let c=l;c<s.length;c++)s[c].indent<s[c].line.text.length&&(s[c].indent=a);s.length==l+1&&(s[l].single=!0)}}if(n!=2&&s.some(r=>r.comment<0&&(!r.empty||r.single))){let r=[];for(let{line:l,token:a,indent:u,empty:c,single:d}of s)(d||!c)&&r.push({from:l.from+u,insert:a+" "});let o=e.changes(r);return{changes:o,selection:e.selection.map(o,1)}}else if(n!=1&&s.some(r=>r.comment>=0)){let r=[];for(let{line:o,comment:l,token:a}of s)if(l>=0){let u=o.from+l,c=u+a.length;o.text[c-o.from]==" "&&c++,r.push({from:u,to:c})}return{changes:r}}return null}const lh=hi.define(),vM=hi.define(),yM=Ie.define(),Yk=Ie.define({combine(n){return qs(n,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(s,i)=>e(s,i)||t(s,i)})}}),Xk=hn.define({create(){return Fs.empty},update(n,e){let t=e.state.facet(Yk),s=e.annotation(lh);if(s){let a=Fn.fromTransaction(e,s.selection),u=s.side,c=u==0?n.undone:n.done;return a?c=Hu(c,c.length,t.minDepth,a):c=tx(c,e.startState.selection),new Fs(u==0?s.rest:c,u==0?c:s.rest)}let i=e.annotation(vM);if((i=="full"||i=="before")&&(n=n.isolate()),e.annotation(Zt.addToHistory)===!1)return e.changes.empty?n:n.addMapping(e.changes.desc);let r=Fn.fromTransaction(e),o=e.annotation(Zt.time),l=e.annotation(Zt.userEvent);return r?n=n.addChanges(r,o,l,t,e):e.selection&&(n=n.addSelection(e.startState.selection,o,l,t.newGroupDelay)),(i=="full"||i=="after")&&(n=n.isolate()),n},toJSON(n){return{done:n.done.map(e=>e.toJSON()),undone:n.undone.map(e=>e.toJSON())}},fromJSON(n){return new Fs(n.done.map(Fn.fromJSON),n.undone.map(Fn.fromJSON))}});function bM(n={}){return[Xk,Yk.of(n),Le.domEventHandlers({beforeinput(e,t){let s=e.inputType=="historyUndo"?Zk:e.inputType=="historyRedo"?ah:null;return s?(e.preventDefault(),s(t)):!1}})]}function Tc(n,e){return function({state:t,dispatch:s}){if(!e&&t.readOnly)return!1;let i=t.field(Xk,!1);if(!i)return!1;let r=i.pop(n,t,e);return r?(s(r),!0):!1}}const Zk=Tc(0,!1),ah=Tc(1,!1),kM=Tc(0,!0),xM=Tc(1,!0);class Fn{constructor(e,t,s,i,r){this.changes=e,this.effects=t,this.mapped=s,this.startSelection=i,this.selectionsAfter=r}setSelAfter(e){return new Fn(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,s;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(s=this.startSelection)===null||s===void 0?void 0:s.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new Fn(e.changes&&Xt.fromJSON(e.changes),[],e.mapped&&Hs.fromJSON(e.mapped),e.startSelection&&fe.fromJSON(e.startSelection),e.selectionsAfter.map(fe.fromJSON))}static fromTransaction(e,t){let s=ss;for(let i of e.startState.facet(yM)){let r=i(e);r.length&&(s=s.concat(r))}return!s.length&&e.changes.empty?null:new Fn(e.changes.invert(e.startState.doc),s,void 0,t||e.startState.selection,ss)}static selection(e){return new Fn(void 0,ss,void 0,void 0,e)}}function Hu(n,e,t,s){let i=e+1>t+20?e-t-1:0,r=n.slice(i,e);return r.push(s),r}function _M(n,e){let t=[],s=!1;return n.iterChangedRanges((i,r)=>t.push(i,r)),e.iterChangedRanges((i,r,o,l)=>{for(let a=0;a<t.length;){let u=t[a++],c=t[a++];l>=u&&o<=c&&(s=!0)}}),s}function wM(n,e){return n.ranges.length==e.ranges.length&&n.ranges.filter((t,s)=>t.empty!=e.ranges[s].empty).length===0}function ex(n,e){return n.length?e.length?n.concat(e):n:e}const ss=[],SM=200;function tx(n,e){if(n.length){let t=n[n.length-1],s=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-SM));return s.length&&s[s.length-1].eq(e)?n:(s.push(e),Hu(n,n.length-1,1e9,t.setSelAfter(s)))}else return[Fn.selection([e])]}function CM(n){let e=n[n.length-1],t=n.slice();return t[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function Rd(n,e){if(!n.length)return n;let t=n.length,s=ss;for(;t;){let i=AM(n[t-1],e,s);if(i.changes&&!i.changes.empty||i.effects.length){let r=n.slice(0,t);return r[t-1]=i,r}else e=i.mapped,t--,s=i.selectionsAfter}return s.length?[Fn.selection(s)]:ss}function AM(n,e,t){let s=ex(n.selectionsAfter.length?n.selectionsAfter.map(l=>l.map(e)):ss,t);if(!n.changes)return Fn.selection(s);let i=n.changes.map(e),r=e.mapDesc(n.changes,!0),o=n.mapped?n.mapped.composeDesc(r):r;return new Fn(i,et.mapEffects(n.effects,e),o,n.startSelection.map(r),s)}const EM=/^(input\.type|delete)($|\.)/;class Fs{constructor(e,t,s=0,i=void 0){this.done=e,this.undone=t,this.prevTime=s,this.prevUserEvent=i}isolate(){return this.prevTime?new Fs(this.done,this.undone):this}addChanges(e,t,s,i,r){let o=this.done,l=o[o.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!s||EM.test(s))&&(!l.selectionsAfter.length&&t-this.prevTime<i.newGroupDelay&&i.joinToEvent(r,_M(l.changes,e.changes))||s=="input.type.compose")?o=Hu(o,o.length-1,i.minDepth,new Fn(e.changes.compose(l.changes),ex(et.mapEffects(e.effects,l.changes),l.effects),l.mapped,l.startSelection,ss)):o=Hu(o,o.length,i.minDepth,e),new Fs(o,ss,t,s)}addSelection(e,t,s,i){let r=this.done.length?this.done[this.done.length-1].selectionsAfter:ss;return r.length>0&&t-this.prevTime<i&&s==this.prevUserEvent&&s&&/^select($|\.)/.test(s)&&wM(r[r.length-1],e)?this:new Fs(tx(this.done,e),this.undone,t,s)}addMapping(e){return new Fs(Rd(this.done,e),Rd(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,s){let i=e==0?this.done:this.undone;if(i.length==0)return null;let r=i[i.length-1],o=r.selectionsAfter[0]||t.selection;if(s&&r.selectionsAfter.length)return t.update({selection:r.selectionsAfter[r.selectionsAfter.length-1],annotations:lh.of({side:e,rest:CM(i),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(r.changes){let l=i.length==1?ss:i.slice(0,i.length-1);return r.mapped&&(l=Rd(l,r.mapped)),t.update({changes:r.changes,selection:r.startSelection,effects:r.effects,annotations:lh.of({side:e,rest:l,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Fs.empty=new Fs(ss,ss);const TM=[{key:"Mod-z",run:Zk,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:ah,preventDefault:!0},{linux:"Ctrl-Shift-z",run:ah,preventDefault:!0},{key:"Mod-u",run:kM,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:xM,preventDefault:!0}];function To(n,e){return fe.create(n.ranges.map(e),n.mainIndex)}function Ss(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Cs({state:n,dispatch:e},t){let s=To(n.selection,t);return s.eq(n.selection,!0)?!1:(e(Ss(n,s)),!0)}function Dc(n,e){return fe.cursor(e?n.to:n.from)}function nx(n,e){return Cs(n,t=>t.empty?n.moveByChar(t,e):Dc(t,e))}function En(n){return n.textDirectionAt(n.state.selection.main.head)==Pt.LTR}const sx=n=>nx(n,!En(n)),ix=n=>nx(n,En(n));function rx(n,e){return Cs(n,t=>t.empty?n.moveByGroup(t,e):Dc(t,e))}const DM=n=>rx(n,!En(n)),PM=n=>rx(n,En(n));function RM(n,e,t){if(e.type.prop(t))return!0;let s=e.to-e.from;return s&&(s>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function Pc(n,e,t){let s=An(n).resolveInner(e.head),i=t?it.closedBy:it.openedBy;for(let a=e.head;;){let u=t?s.childAfter(a):s.childBefore(a);if(!u)break;RM(n,u,i)?s=u:a=t?u.to:u.from}let r=s.type.prop(i),o,l;return r&&(o=t?Bs(n,s.from,1):Bs(n,s.to,-1))&&o.matched?l=t?o.end.to:o.end.from:l=t?s.to:s.from,fe.cursor(l,t?-1:1)}const OM=n=>Cs(n,e=>Pc(n.state,e,!En(n))),LM=n=>Cs(n,e=>Pc(n.state,e,En(n)));function ox(n,e){return Cs(n,t=>{if(!t.empty)return Dc(t,e);let s=n.moveVertically(t,e);return s.head!=t.head?s:n.moveToLineBoundary(t,e)})}const lx=n=>ox(n,!1),ax=n=>ox(n,!0);function ux(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,t=0,s=0,i;if(e){for(let r of n.state.facet(Le.scrollMargins)){let o=r(n);o?.top&&(t=Math.max(o?.top,t)),o?.bottom&&(s=Math.max(o?.bottom,s))}i=n.scrollDOM.clientHeight-t-s}else i=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:s,selfScroll:e,height:Math.max(n.defaultLineHeight,i-5)}}function cx(n,e){let t=ux(n),{state:s}=n,i=To(s.selection,o=>o.empty?n.moveVertically(o,e,t.height):Dc(o,e));if(i.eq(s.selection))return!1;let r;if(t.selfScroll){let o=n.coordsAtPos(s.selection.main.head),l=n.scrollDOM.getBoundingClientRect(),a=l.top+t.marginTop,u=l.bottom-t.marginBottom;o&&o.top>a&&o.bottom<u&&(r=Le.scrollIntoView(i.main.head,{y:"start",yMargin:o.top-a}))}return n.dispatch(Ss(s,i),{effects:r}),!0}const rv=n=>cx(n,!1),uh=n=>cx(n,!0);function zi(n,e,t){let s=n.lineBlockAt(e.head),i=n.moveToLineBoundary(e,t);if(i.head==e.head&&i.head!=(t?s.to:s.from)&&(i=n.moveToLineBoundary(e,t,!1)),!t&&i.head==s.from&&s.length){let r=/^\s*/.exec(n.state.sliceDoc(s.from,Math.min(s.from+100,s.to)))[0].length;r&&e.head!=s.from+r&&(i=fe.cursor(s.from+r))}return i}const MM=n=>Cs(n,e=>zi(n,e,!0)),IM=n=>Cs(n,e=>zi(n,e,!1)),jM=n=>Cs(n,e=>zi(n,e,!En(n))),VM=n=>Cs(n,e=>zi(n,e,En(n))),$M=n=>Cs(n,e=>fe.cursor(n.lineBlockAt(e.head).from,1)),NM=n=>Cs(n,e=>fe.cursor(n.lineBlockAt(e.head).to,-1));function BM(n,e,t){let s=!1,i=To(n.selection,r=>{let o=Bs(n,r.head,-1)||Bs(n,r.head,1)||r.head>0&&Bs(n,r.head-1,1)||r.head<n.doc.length&&Bs(n,r.head+1,-1);if(!o||!o.end)return r;s=!0;let l=o.start.from==r.head?o.end.to:o.end.from;return fe.cursor(l)});return s?(e(Ss(n,i)),!0):!1}const FM=({state:n,dispatch:e})=>BM(n,e);function fs(n,e){let t=To(n.state.selection,s=>{let i=e(s);return fe.range(s.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return t.eq(n.state.selection)?!1:(n.dispatch(Ss(n.state,t)),!0)}function dx(n,e){return fs(n,t=>n.moveByChar(t,e))}const fx=n=>dx(n,!En(n)),hx=n=>dx(n,En(n));function px(n,e){return fs(n,t=>n.moveByGroup(t,e))}const UM=n=>px(n,!En(n)),zM=n=>px(n,En(n)),HM=n=>fs(n,e=>Pc(n.state,e,!En(n))),WM=n=>fs(n,e=>Pc(n.state,e,En(n)));function mx(n,e){return fs(n,t=>n.moveVertically(t,e))}const gx=n=>mx(n,!1),vx=n=>mx(n,!0);function yx(n,e){return fs(n,t=>n.moveVertically(t,e,ux(n).height))}const ov=n=>yx(n,!1),lv=n=>yx(n,!0),qM=n=>fs(n,e=>zi(n,e,!0)),GM=n=>fs(n,e=>zi(n,e,!1)),KM=n=>fs(n,e=>zi(n,e,!En(n))),JM=n=>fs(n,e=>zi(n,e,En(n))),QM=n=>fs(n,e=>fe.cursor(n.lineBlockAt(e.head).from)),YM=n=>fs(n,e=>fe.cursor(n.lineBlockAt(e.head).to)),av=({state:n,dispatch:e})=>(e(Ss(n,{anchor:0})),!0),uv=({state:n,dispatch:e})=>(e(Ss(n,{anchor:n.doc.length})),!0),cv=({state:n,dispatch:e})=>(e(Ss(n,{anchor:n.selection.main.anchor,head:0})),!0),dv=({state:n,dispatch:e})=>(e(Ss(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),XM=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),ZM=({state:n,dispatch:e})=>{let t=Rc(n).map(({from:s,to:i})=>fe.range(s,Math.min(i+1,n.doc.length)));return e(n.update({selection:fe.create(t),userEvent:"select"})),!0},e8=({state:n,dispatch:e})=>{let t=To(n.selection,s=>{let i=An(n),r=i.resolveStack(s.from,1);if(s.empty){let o=i.resolveStack(s.from,-1);o.node.from>=r.node.from&&o.node.to<=r.node.to&&(r=o)}for(let o=r;o;o=o.next){let{node:l}=o;if((l.from<s.from&&l.to>=s.to||l.to>s.to&&l.from<=s.from)&&o.next)return fe.range(l.to,l.from)}return s});return t.eq(n.selection)?!1:(e(Ss(n,t)),!0)};function bx(n,e){let{state:t}=n,s=t.selection,i=t.selection.ranges.slice();for(let r of t.selection.ranges){let o=t.doc.lineAt(r.head);if(e?o.to<n.state.doc.length:o.from>0)for(let l=r;;){let a=n.moveVertically(l,e);if(a.head<o.from||a.head>o.to){i.some(u=>u.head==a.head)||i.push(a);break}else{if(a.head==l.head)break;l=a}}}return i.length==s.ranges.length?!1:(n.dispatch(Ss(t,fe.create(i,i.length-1))),!0)}const t8=n=>bx(n,!1),n8=n=>bx(n,!0),s8=({state:n,dispatch:e})=>{let t=n.selection,s=null;return t.ranges.length>1?s=fe.create([t.main]):t.main.empty||(s=fe.create([fe.cursor(t.main.head)])),s?(e(Ss(n,s)),!0):!1};function sa(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:s}=n,i=s.changeByRange(r=>{let{from:o,to:l}=r;if(o==l){let a=e(r);a<o?(t="delete.backward",a=Ha(n,a,!1)):a>o&&(t="delete.forward",a=Ha(n,a,!0)),o=Math.min(o,a),l=Math.max(l,a)}else o=Ha(n,o,!1),l=Ha(n,l,!0);return o==l?{range:r}:{changes:{from:o,to:l},range:fe.cursor(o,o<r.head?-1:1)}});return i.changes.empty?!1:(n.dispatch(s.update(i,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?Le.announce.of(s.phrase("Selection deleted")):void 0})),!0)}function Ha(n,e,t){if(n instanceof Le)for(let s of n.state.facet(Le.atomicRanges).map(i=>i(n)))s.between(e,e,(i,r)=>{i<e&&r>e&&(e=t?r:i)});return e}const kx=(n,e,t)=>sa(n,s=>{let i=s.from,{state:r}=n,o=r.doc.lineAt(i),l,a;if(t&&!e&&i>o.from&&i<o.from+200&&!/[^ \t]/.test(l=o.text.slice(0,i-o.from))){if(l[l.length-1]=="	")return i-1;let u=Eo(l,r.tabSize),c=u%Cr(r)||Cr(r);for(let d=0;d<c&&l[l.length-1-d]==" ";d++)i--;a=i}else a=fn(o.text,i-o.from,e,e)+o.from,a==i&&o.number!=(e?r.doc.lines:1)?a+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(a-o.from,i-o.from))&&(a=fn(o.text,a-o.from,!1,!1)+o.from);return a}),ch=n=>kx(n,!1,!0),xx=n=>kx(n,!0,!1),_x=(n,e)=>sa(n,t=>{let s=t.head,{state:i}=n,r=i.doc.lineAt(s),o=i.charCategorizer(s);for(let l=null;;){if(s==(e?r.to:r.from)){s==t.head&&r.number!=(e?i.doc.lines:1)&&(s+=e?1:-1);break}let a=fn(r.text,s-r.from,e)+r.from,u=r.text.slice(Math.min(s,a)-r.from,Math.max(s,a)-r.from),c=o(u);if(l!=null&&c!=l)break;(u!=" "||s!=t.head)&&(l=c),s=a}return s}),wx=n=>_x(n,!1),i8=n=>_x(n,!0),r8=n=>sa(n,e=>{let t=n.lineBlockAt(e.head).to;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),o8=n=>sa(n,e=>{let t=n.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),l8=n=>sa(n,e=>{let t=n.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),a8=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(s=>({changes:{from:s.from,to:s.to,insert:ut.of(["",""])},range:fe.cursor(s.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},u8=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(s=>{if(!s.empty||s.from==0||s.from==n.doc.length)return{range:s};let i=s.from,r=n.doc.lineAt(i),o=i==r.from?i-1:fn(r.text,i-r.from,!1)+r.from,l=i==r.to?i+1:fn(r.text,i-r.from,!0)+r.from;return{changes:{from:o,to:l,insert:n.doc.slice(i,l).append(n.doc.slice(o,i))},range:fe.cursor(l)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Rc(n){let e=[],t=-1;for(let s of n.selection.ranges){let i=n.doc.lineAt(s.from),r=n.doc.lineAt(s.to);if(!s.empty&&s.to==r.from&&(r=n.doc.lineAt(s.to-1)),t>=i.number){let o=e[e.length-1];o.to=r.to,o.ranges.push(s)}else e.push({from:i.from,to:r.to,ranges:[s]});t=r.number+1}return e}function Sx(n,e,t){if(n.readOnly)return!1;let s=[],i=[];for(let r of Rc(n)){if(t?r.to==n.doc.length:r.from==0)continue;let o=n.doc.lineAt(t?r.to+1:r.from-1),l=o.length+1;if(t){s.push({from:r.to,to:o.to},{from:r.from,insert:o.text+n.lineBreak});for(let a of r.ranges)i.push(fe.range(Math.min(n.doc.length,a.anchor+l),Math.min(n.doc.length,a.head+l)))}else{s.push({from:o.from,to:r.from},{from:r.to,insert:n.lineBreak+o.text});for(let a of r.ranges)i.push(fe.range(a.anchor-l,a.head-l))}}return s.length?(e(n.update({changes:s,scrollIntoView:!0,selection:fe.create(i,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const c8=({state:n,dispatch:e})=>Sx(n,e,!1),d8=({state:n,dispatch:e})=>Sx(n,e,!0);function Cx(n,e,t){if(n.readOnly)return!1;let s=[];for(let i of Rc(n))t?s.push({from:i.from,insert:n.doc.slice(i.from,i.to)+n.lineBreak}):s.push({from:i.to,insert:n.lineBreak+n.doc.slice(i.from,i.to)});return e(n.update({changes:s,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const f8=({state:n,dispatch:e})=>Cx(n,e,!1),h8=({state:n,dispatch:e})=>Cx(n,e,!0),p8=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(Rc(e).map(({from:i,to:r})=>(i>0?i--:r<e.doc.length&&r++,{from:i,to:r}))),s=To(e.selection,i=>{let r;if(n.lineWrapping){let o=n.lineBlockAt(i.head),l=n.coordsAtPos(i.head,i.assoc||1);l&&(r=o.bottom+n.documentTop-l.bottom+n.defaultLineHeight/2)}return n.moveVertically(i,!0,r)}).map(t);return n.dispatch({changes:t,selection:s,scrollIntoView:!0,userEvent:"delete.line"}),!0};function m8(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=An(n).resolveInner(e),s=t.childBefore(e),i=t.childAfter(e),r;return s&&i&&s.to<=e&&i.from>=e&&(r=s.type.prop(it.closedBy))&&r.indexOf(i.name)>-1&&n.doc.lineAt(s.to).from==n.doc.lineAt(i.from).from&&!/\S/.test(n.sliceDoc(s.to,i.from))?{from:s.to,to:i.from}:null}const fv=Ax(!1),g8=Ax(!0);function Ax(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let s=e.changeByRange(i=>{let{from:r,to:o}=i,l=e.doc.lineAt(r),a=!n&&r==o&&m8(e,r);n&&(r=o=(o<=l.to?l:e.doc.lineAt(o)).to);let u=new Ac(e,{simulateBreak:r,simulateDoubleBreak:!!a}),c=mp(u,r);for(c==null&&(c=Eo(/^\s*/.exec(e.doc.lineAt(r).text)[0],e.tabSize));o<l.to&&/\s/.test(l.text[o-l.from]);)o++;a?{from:r,to:o}=a:r>l.from&&r<l.from+100&&!/\S/.test(l.text.slice(0,r))&&(r=l.from);let d=["",jl(e,c)];return a&&d.push(jl(e,u.lineIndent(l.from,-1))),{changes:{from:r,to:o,insert:ut.of(d)},range:fe.cursor(r+1+d[1].length)}});return t(e.update(s,{scrollIntoView:!0,userEvent:"input"})),!0}}function _p(n,e){let t=-1;return n.changeByRange(s=>{let i=[];for(let o=s.from;o<=s.to;){let l=n.doc.lineAt(o);l.number>t&&(s.empty||s.to>l.from)&&(e(l,i,s),t=l.number),o=l.to+1}let r=n.changes(i);return{changes:i,range:fe.range(r.mapPos(s.anchor,1),r.mapPos(s.head,1))}})}const v8=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),s=new Ac(n,{overrideIndentation:r=>{let o=t[r];return o??-1}}),i=_p(n,(r,o,l)=>{let a=mp(s,r.from);if(a==null)return;/\S/.test(r.text)||(a=0);let u=/^\s*/.exec(r.text)[0],c=jl(n,a);(u!=c||l.from<r.from+u.length)&&(t[r.from]=a,o.push({from:r.from,to:r.from+u.length,insert:c}))});return i.changes.empty||e(n.update(i,{userEvent:"indent"})),!0},y8=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(_p(n,(t,s)=>{s.push({from:t.from,insert:n.facet(pp)})}),{userEvent:"input.indent"})),!0),b8=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(_p(n,(t,s)=>{let i=/^\s*/.exec(t.text)[0];if(!i)return;let r=Eo(i,n.tabSize),o=0,l=jl(n,Math.max(0,r-Cr(n)));for(;o<i.length&&o<l.length&&i.charCodeAt(o)==l.charCodeAt(o);)o++;s.push({from:t.from+o,to:t.from+i.length,insert:l.slice(o)})}),{userEvent:"delete.dedent"})),!0),k8=n=>(n.setTabFocusMode(),!0),x8=[{key:"Ctrl-b",run:sx,shift:fx,preventDefault:!0},{key:"Ctrl-f",run:ix,shift:hx},{key:"Ctrl-p",run:lx,shift:gx},{key:"Ctrl-n",run:ax,shift:vx},{key:"Ctrl-a",run:$M,shift:QM},{key:"Ctrl-e",run:NM,shift:YM},{key:"Ctrl-d",run:xx},{key:"Ctrl-h",run:ch},{key:"Ctrl-k",run:r8},{key:"Ctrl-Alt-h",run:wx},{key:"Ctrl-o",run:a8},{key:"Ctrl-t",run:u8},{key:"Ctrl-v",run:uh}],_8=[{key:"ArrowLeft",run:sx,shift:fx,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:DM,shift:UM,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:jM,shift:KM,preventDefault:!0},{key:"ArrowRight",run:ix,shift:hx,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:PM,shift:zM,preventDefault:!0},{mac:"Cmd-ArrowRight",run:VM,shift:JM,preventDefault:!0},{key:"ArrowUp",run:lx,shift:gx,preventDefault:!0},{mac:"Cmd-ArrowUp",run:av,shift:cv},{mac:"Ctrl-ArrowUp",run:rv,shift:ov},{key:"ArrowDown",run:ax,shift:vx,preventDefault:!0},{mac:"Cmd-ArrowDown",run:uv,shift:dv},{mac:"Ctrl-ArrowDown",run:uh,shift:lv},{key:"PageUp",run:rv,shift:ov},{key:"PageDown",run:uh,shift:lv},{key:"Home",run:IM,shift:GM,preventDefault:!0},{key:"Mod-Home",run:av,shift:cv},{key:"End",run:MM,shift:qM,preventDefault:!0},{key:"Mod-End",run:uv,shift:dv},{key:"Enter",run:fv,shift:fv},{key:"Mod-a",run:XM},{key:"Backspace",run:ch,shift:ch,preventDefault:!0},{key:"Delete",run:xx,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:wx,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:i8,preventDefault:!0},{mac:"Mod-Backspace",run:o8,preventDefault:!0},{mac:"Mod-Delete",run:l8,preventDefault:!0}].concat(x8.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),w8=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:OM,shift:HM},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:LM,shift:WM},{key:"Alt-ArrowUp",run:c8},{key:"Shift-Alt-ArrowUp",run:f8},{key:"Alt-ArrowDown",run:d8},{key:"Shift-Alt-ArrowDown",run:h8},{key:"Mod-Alt-ArrowUp",run:t8},{key:"Mod-Alt-ArrowDown",run:n8},{key:"Escape",run:s8},{key:"Mod-Enter",run:g8},{key:"Alt-l",mac:"Ctrl-l",run:ZM},{key:"Mod-i",run:e8,preventDefault:!0},{key:"Mod-[",run:b8},{key:"Mod-]",run:y8},{key:"Mod-Alt-\\",run:v8},{key:"Shift-Mod-k",run:p8},{key:"Shift-Mod-\\",run:FM},{key:"Mod-/",run:cM},{key:"Alt-A",run:fM},{key:"Ctrl-m",mac:"Shift-Alt-m",run:k8}].concat(_8),hv=typeof String.prototype.normalize=="function"?n=>n.normalize("NFKD"):n=>n;class yo{constructor(e,t,s=0,i=e.length,r,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(s,i),this.bufferStart=s,this.normalize=r?l=>r(hv(l)):hv,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return $n(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=Kh(e),s=this.bufferStart+this.bufferPos;this.bufferPos+=$s(e);let i=this.normalize(t);if(i.length)for(let r=0,o=s;;r++){let l=i.charCodeAt(r),a=this.match(l,o,this.bufferPos+this.bufferStart);if(r==i.length-1){if(a)return this.value=a,this;break}o==s&&r<t.length&&t.charCodeAt(r)==l&&o++}}}match(e,t,s){let i=null;for(let r=0;r<this.matches.length;r+=2){let o=this.matches[r],l=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?i={from:this.matches[r+1],to:s}:(this.matches[r]++,l=!0)),l||(this.matches.splice(r,2),r-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:t,to:s}:this.matches.push(1,t)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}typeof Symbol<"u"&&(yo.prototype[Symbol.iterator]=function(){return this});const Ex={from:-1,to:-1,match:/.*/.exec("")},wp="gm"+(/x/.unicode==null?"":"u");class Tx{constructor(e,t,s,i=0,r=e.length){if(this.text=e,this.to=r,this.curLine="",this.done=!1,this.value=Ex,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new Dx(e,t,s,i,r);this.re=new RegExp(t,wp+(s?.ignoreCase?"i":"")),this.test=s?.test,this.iter=e.iter();let o=e.lineAt(i);this.curLineStart=o.from,this.matchPos=Wu(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let s=this.curLineStart+t.index,i=s+t[0].length;if(this.matchPos=Wu(this.text,i+(s==i?1:0)),s==this.curLineStart+this.curLine.length&&this.nextLine(),(s<i||s>this.value.to)&&(!this.test||this.test(s,i,t)))return this.value={from:s,to:i,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const Od=new WeakMap;class io{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,s){let i=Od.get(e);if(!i||i.from>=s||i.to<=t){let l=new io(t,e.sliceString(t,s));return Od.set(e,l),l}if(i.from==t&&i.to==s)return i;let{text:r,from:o}=i;return o>t&&(r=e.sliceString(t,o)+r,o=t),i.to<s&&(r+=e.sliceString(i.to,s)),Od.set(e,new io(o,r)),new io(t,r.slice(t-o,s-o))}}class Dx{constructor(e,t,s,i,r){this.text=e,this.to=r,this.done=!1,this.value=Ex,this.matchPos=Wu(e,i),this.re=new RegExp(t,wp+(s?.ignoreCase?"i":"")),this.test=s?.test,this.flat=io.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let s=this.flat.from+t.index,i=s+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(s,i,t)))return this.value={from:s,to:i,match:t},this.matchPos=Wu(this.text,i+(s==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=io.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(Tx.prototype[Symbol.iterator]=Dx.prototype[Symbol.iterator]=function(){return this});function S8(n){try{return new RegExp(n,wp),!0}catch{return!1}}function Wu(n,e){if(e>=n.length)return e;let t=n.lineAt(e),s;for(;e<t.to&&(s=t.text.charCodeAt(e-t.from))>=56320&&s<57344;)e++;return e}function dh(n){let e=String(n.state.doc.lineAt(n.state.selection.main.head).number),t=xt("input",{class:"cm-textfield",name:"line",value:e}),s=xt("form",{class:"cm-gotoLine",onkeydown:r=>{r.keyCode==27?(r.preventDefault(),n.dispatch({effects:cl.of(!1)}),n.focus()):r.keyCode==13&&(r.preventDefault(),i())},onsubmit:r=>{r.preventDefault(),i()}},xt("label",n.state.phrase("Go to line"),": ",t)," ",xt("button",{class:"cm-button",type:"submit"},n.state.phrase("go")),xt("button",{name:"close",onclick:()=>{n.dispatch({effects:cl.of(!1)}),n.focus()},"aria-label":n.state.phrase("close"),type:"button"},[""]));function i(){let r=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!r)return;let{state:o}=n,l=o.doc.lineAt(o.selection.main.head),[,a,u,c,d]=r,f=c?+c.slice(1):0,p=u?+u:l.number;if(u&&d){let x=p/100;a&&(x=x*(a=="-"?-1:1)+l.number/o.doc.lines),p=Math.round(o.doc.lines*x)}else u&&a&&(p=p*(a=="-"?-1:1)+l.number);let g=o.doc.line(Math.max(1,Math.min(o.doc.lines,p))),k=fe.cursor(g.from+Math.max(0,Math.min(f,g.length)));n.dispatch({effects:[cl.of(!1),Le.scrollIntoView(k.from,{y:"center"})],selection:k}),n.focus()}return{dom:s}}const cl=et.define(),pv=hn.define({create(){return!0},update(n,e){for(let t of e.effects)t.is(cl)&&(n=t.value);return n},provide:n=>Ll.from(n,e=>e?dh:null)}),C8=n=>{let e=Ol(n,dh);if(!e){let t=[cl.of(!0)];n.state.field(pv,!1)==null&&t.push(et.appendConfig.of([pv,A8])),n.dispatch({effects:t}),e=Ol(n,dh)}return e&&e.dom.querySelector("input").select(),!0},A8=Le.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),E8={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},T8=Ie.define({combine(n){return qs(n,E8,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function D8(n){return[M8,L8]}const P8=We.mark({class:"cm-selectionMatch"}),R8=We.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function mv(n,e,t,s){return(t==0||n(e.sliceDoc(t-1,t))!=Ot.Word)&&(s==e.doc.length||n(e.sliceDoc(s,s+1))!=Ot.Word)}function O8(n,e,t,s){return n(e.sliceDoc(t,t+1))==Ot.Word&&n(e.sliceDoc(s-1,s))==Ot.Word}const L8=qt.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.selectionSet||n.docChanged||n.viewportChanged)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=n.state.facet(T8),{state:t}=n,s=t.selection;if(s.ranges.length>1)return We.none;let i=s.main,r,o=null;if(i.empty){if(!e.highlightWordAroundCursor)return We.none;let a=t.wordAt(i.head);if(!a)return We.none;o=t.charCategorizer(i.head),r=t.sliceDoc(a.from,a.to)}else{let a=i.to-i.from;if(a<e.minSelectionLength||a>200)return We.none;if(e.wholeWords){if(r=t.sliceDoc(i.from,i.to),o=t.charCategorizer(i.head),!(mv(o,t,i.from,i.to)&&O8(o,t,i.from,i.to)))return We.none}else if(r=t.sliceDoc(i.from,i.to),!r)return We.none}let l=[];for(let a of n.visibleRanges){let u=new yo(t.doc,r,a.from,a.to);for(;!u.next().done;){let{from:c,to:d}=u.value;if((!o||mv(o,t,c,d))&&(i.empty&&c<=i.from&&d>=i.to?l.push(R8.range(c,d)):(c>=i.to||d<=i.from)&&l.push(P8.range(c,d)),l.length>e.maxMatches))return We.none}}return We.set(l)}},{decorations:n=>n.decorations}),M8=Le.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),I8=({state:n,dispatch:e})=>{let{selection:t}=n,s=fe.create(t.ranges.map(i=>n.wordAt(i.head)||fe.cursor(i.head)),t.mainIndex);return s.eq(t)?!1:(e(n.update({selection:s})),!0)};function j8(n,e){let{main:t,ranges:s}=n.selection,i=n.wordAt(t.head),r=i&&i.from==t.from&&i.to==t.to;for(let o=!1,l=new yo(n.doc,e,s[s.length-1].to);;)if(l.next(),l.done){if(o)return null;l=new yo(n.doc,e,0,Math.max(0,s[s.length-1].from-1)),o=!0}else{if(o&&s.some(a=>a.from==l.value.from))continue;if(r){let a=n.wordAt(l.value.from);if(!a||a.from!=l.value.from||a.to!=l.value.to)continue}return l.value}}const V8=({state:n,dispatch:e})=>{let{ranges:t}=n.selection;if(t.some(r=>r.from===r.to))return I8({state:n,dispatch:e});let s=n.sliceDoc(t[0].from,t[0].to);if(n.selection.ranges.some(r=>n.sliceDoc(r.from,r.to)!=s))return!1;let i=j8(n,s);return i?(e(n.update({selection:n.selection.addRange(fe.range(i.from,i.to),!1),effects:Le.scrollIntoView(i.to)})),!0):!1},Do=Ie.define({combine(n){return qs(n,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new J8(e),scrollToMatch:e=>Le.scrollIntoView(e)})}});class Px{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||S8(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,s)=>s=="n"?`
`:s=="r"?"\r":s=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new F8(this):new N8(this)}getCursor(e,t=0,s){let i=e.doc?e:lt.create({doc:e});return s==null&&(s=i.doc.length),this.regexp?Nr(this,i,t,s):$r(this,i,t,s)}}class Rx{constructor(e){this.spec=e}}function $r(n,e,t,s){return new yo(e.doc,n.unquoted,t,s,n.caseSensitive?void 0:i=>i.toLowerCase(),n.wholeWord?$8(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function $8(n,e){return(t,s,i,r)=>((r>t||r+i.length<s)&&(r=Math.max(0,t-2),i=n.sliceString(r,Math.min(n.length,s+2))),(e(qu(i,t-r))!=Ot.Word||e(Gu(i,t-r))!=Ot.Word)&&(e(Gu(i,s-r))!=Ot.Word||e(qu(i,s-r))!=Ot.Word))}class N8 extends Rx{constructor(e){super(e)}nextMatch(e,t,s){let i=$r(this.spec,e,s,e.doc.length).nextOverlapping();if(i.done){let r=Math.min(e.doc.length,t+this.spec.unquoted.length);i=$r(this.spec,e,0,r).nextOverlapping()}return i.done||i.value.from==t&&i.value.to==s?null:i.value}prevMatchInRange(e,t,s){for(let i=s;;){let r=Math.max(t,i-1e4-this.spec.unquoted.length),o=$r(this.spec,e,r,i),l=null;for(;!o.nextOverlapping().done;)l=o.value;if(l)return l;if(r==t)return null;i-=1e4}}prevMatch(e,t,s){let i=this.prevMatchInRange(e,0,t);return i||(i=this.prevMatchInRange(e,Math.max(0,s-this.spec.unquoted.length),e.doc.length)),i&&(i.from!=t||i.to!=s)?i:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let s=$r(this.spec,e,0,e.doc.length),i=[];for(;!s.next().done;){if(i.length>=t)return null;i.push(s.value)}return i}highlight(e,t,s,i){let r=$r(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(s+this.spec.unquoted.length,e.doc.length));for(;!r.next().done;)i(r.value.from,r.value.to)}}function Nr(n,e,t,s){return new Tx(e.doc,n.search,{ignoreCase:!n.caseSensitive,test:n.wholeWord?B8(e.charCategorizer(e.selection.main.head)):void 0},t,s)}function qu(n,e){return n.slice(fn(n,e,!1),e)}function Gu(n,e){return n.slice(e,fn(n,e))}function B8(n){return(e,t,s)=>!s[0].length||(n(qu(s.input,s.index))!=Ot.Word||n(Gu(s.input,s.index))!=Ot.Word)&&(n(Gu(s.input,s.index+s[0].length))!=Ot.Word||n(qu(s.input,s.index+s[0].length))!=Ot.Word)}class F8 extends Rx{nextMatch(e,t,s){let i=Nr(this.spec,e,s,e.doc.length).next();return i.done&&(i=Nr(this.spec,e,0,t).next()),i.done?null:i.value}prevMatchInRange(e,t,s){for(let i=1;;i++){let r=Math.max(t,s-i*1e4),o=Nr(this.spec,e,r,s),l=null;for(;!o.next().done;)l=o.value;if(l&&(r==t||l.from>r+10))return l;if(r==t)return null}}prevMatch(e,t,s){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,s,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(t,s)=>{if(s=="&")return e.match[0];if(s=="$")return"$";for(let i=s.length;i>0;i--){let r=+s.slice(0,i);if(r>0&&r<e.match.length)return e.match[r]+s.slice(i)}return t})}matchAll(e,t){let s=Nr(this.spec,e,0,e.doc.length),i=[];for(;!s.next().done;){if(i.length>=t)return null;i.push(s.value)}return i}highlight(e,t,s,i){let r=Nr(this.spec,e,Math.max(0,t-250),Math.min(s+250,e.doc.length));for(;!r.next().done;)i(r.value.from,r.value.to)}}const $l=et.define(),Sp=et.define(),Li=hn.define({create(n){return new Ld(fh(n).create(),null)},update(n,e){for(let t of e.effects)t.is($l)?n=new Ld(t.value.create(),n.panel):t.is(Sp)&&(n=new Ld(n.query,t.value?Cp:null));return n},provide:n=>Ll.from(n,e=>e.panel)});class Ld{constructor(e,t){this.query=e,this.panel=t}}const U8=We.mark({class:"cm-searchMatch"}),z8=We.mark({class:"cm-searchMatch cm-searchMatch-selected"}),H8=qt.fromClass(class{constructor(n){this.view=n,this.decorations=this.highlight(n.state.field(Li))}update(n){let e=n.state.field(Li);(e!=n.startState.field(Li)||n.docChanged||n.selectionSet||n.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:n,panel:e}){if(!e||!n.spec.valid)return We.none;let{view:t}=this,s=new ui;for(let i=0,r=t.visibleRanges,o=r.length;i<o;i++){let{from:l,to:a}=r[i];for(;i<o-1&&a>r[i+1].from-500;)a=r[++i].to;n.highlight(t.state,l,a,(u,c)=>{let d=t.state.selection.ranges.some(f=>f.from==u&&f.to==c);s.add(u,c,d?z8:U8)})}return s.finish()}},{decorations:n=>n.decorations});function ia(n){return e=>{let t=e.state.field(Li,!1);return t&&t.query.spec.valid?n(e,t):Mx(e)}}const Ku=ia((n,{query:e})=>{let{to:t}=n.state.selection.main,s=e.nextMatch(n.state,t,t);if(!s)return!1;let i=fe.single(s.from,s.to),r=n.state.facet(Do);return n.dispatch({selection:i,effects:[Ap(n,s),r.scrollToMatch(i.main,n)],userEvent:"select.search"}),Lx(n),!0}),Ju=ia((n,{query:e})=>{let{state:t}=n,{from:s}=t.selection.main,i=e.prevMatch(t,s,s);if(!i)return!1;let r=fe.single(i.from,i.to),o=n.state.facet(Do);return n.dispatch({selection:r,effects:[Ap(n,i),o.scrollToMatch(r.main,n)],userEvent:"select.search"}),Lx(n),!0}),W8=ia((n,{query:e})=>{let t=e.matchAll(n.state,1e3);return!t||!t.length?!1:(n.dispatch({selection:fe.create(t.map(s=>fe.range(s.from,s.to))),userEvent:"select.search.matches"}),!0)}),q8=({state:n,dispatch:e})=>{let t=n.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:s,to:i}=t.main,r=[],o=0;for(let l=new yo(n.doc,n.sliceDoc(s,i));!l.next().done;){if(r.length>1e3)return!1;l.value.from==s&&(o=r.length),r.push(fe.range(l.value.from,l.value.to))}return e(n.update({selection:fe.create(r,o),userEvent:"select.search.matches"})),!0},gv=ia((n,{query:e})=>{let{state:t}=n,{from:s,to:i}=t.selection.main;if(t.readOnly)return!1;let r=e.nextMatch(t,s,s);if(!r)return!1;let o=r,l=[],a,u,c=[];o.from==s&&o.to==i&&(u=t.toText(e.getReplacement(o)),l.push({from:o.from,to:o.to,insert:u}),o=e.nextMatch(t,o.from,o.to),c.push(Le.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(s).number)+".")));let d=n.state.changes(l);return o&&(a=fe.single(o.from,o.to).map(d),c.push(Ap(n,o)),c.push(t.facet(Do).scrollToMatch(a.main,n))),n.dispatch({changes:d,selection:a,effects:c,userEvent:"input.replace"}),!0}),G8=ia((n,{query:e})=>{if(n.state.readOnly)return!1;let t=e.matchAll(n.state,1e9).map(i=>{let{from:r,to:o}=i;return{from:r,to:o,insert:e.getReplacement(i)}});if(!t.length)return!1;let s=n.state.phrase("replaced $ matches",t.length)+".";return n.dispatch({changes:t,effects:Le.announce.of(s),userEvent:"input.replace.all"}),!0});function Cp(n){return n.state.facet(Do).createPanel(n)}function fh(n,e){var t,s,i,r,o;let l=n.selection.main,a=l.empty||l.to>l.from+100?"":n.sliceDoc(l.from,l.to);if(e&&!a)return e;let u=n.facet(Do);return new Px({search:((t=e?.literal)!==null&&t!==void 0?t:u.literal)?a:a.replace(/\n/g,"\\n"),caseSensitive:(s=e?.caseSensitive)!==null&&s!==void 0?s:u.caseSensitive,literal:(i=e?.literal)!==null&&i!==void 0?i:u.literal,regexp:(r=e?.regexp)!==null&&r!==void 0?r:u.regexp,wholeWord:(o=e?.wholeWord)!==null&&o!==void 0?o:u.wholeWord})}function Ox(n){let e=Ol(n,Cp);return e&&e.dom.querySelector("[main-field]")}function Lx(n){let e=Ox(n);e&&e==n.root.activeElement&&e.select()}const Mx=n=>{let e=n.state.field(Li,!1);if(e&&e.panel){let t=Ox(n);if(t&&t!=n.root.activeElement){let s=fh(n.state,e.query.spec);s.valid&&n.dispatch({effects:$l.of(s)}),t.focus(),t.select()}}else n.dispatch({effects:[Sp.of(!0),e?$l.of(fh(n.state,e.query.spec)):et.appendConfig.of(Y8)]});return!0},Ix=n=>{let e=n.state.field(Li,!1);if(!e||!e.panel)return!1;let t=Ol(n,Cp);return t&&t.dom.contains(n.root.activeElement)&&n.focus(),n.dispatch({effects:Sp.of(!1)}),!0},K8=[{key:"Mod-f",run:Mx,scope:"editor search-panel"},{key:"F3",run:Ku,shift:Ju,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Ku,shift:Ju,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Ix,scope:"editor search-panel"},{key:"Mod-Shift-l",run:q8},{key:"Mod-Alt-g",run:C8},{key:"Mod-d",run:V8,preventDefault:!0}];class J8{constructor(e){this.view=e;let t=this.query=e.state.field(Li).query.spec;this.commit=this.commit.bind(this),this.searchField=xt("input",{value:t.search,placeholder:qn(e,"Find"),"aria-label":qn(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=xt("input",{value:t.replace,placeholder:qn(e,"Replace"),"aria-label":qn(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=xt("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=xt("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=xt("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function s(i,r,o){return xt("button",{class:"cm-button",name:i,onclick:r,type:"button"},o)}this.dom=xt("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,s("next",()=>Ku(e),[qn(e,"next")]),s("prev",()=>Ju(e),[qn(e,"previous")]),s("select",()=>W8(e),[qn(e,"all")]),xt("label",null,[this.caseField,qn(e,"match case")]),xt("label",null,[this.reField,qn(e,"regexp")]),xt("label",null,[this.wordField,qn(e,"by word")]),...e.state.readOnly?[]:[xt("br"),this.replaceField,s("replace",()=>gv(e),[qn(e,"replace")]),s("replaceAll",()=>G8(e),[qn(e,"replace all")])],xt("button",{name:"close",onclick:()=>Ix(e),"aria-label":qn(e,"close"),type:"button"},[""])])}commit(){let e=new Px({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:$l.of(e)}))}keydown(e){YR(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Ju:Ku)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),gv(this.view))}update(e){for(let t of e.transactions)for(let s of t.effects)s.is($l)&&!s.value.eq(this.query)&&this.setQuery(s.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Do).top}}function qn(n,e){return n.state.phrase(e)}const Wa=30,qa=/[\s\.,:;?!]/;function Ap(n,{from:e,to:t}){let s=n.state.doc.lineAt(e),i=n.state.doc.lineAt(t).to,r=Math.max(s.from,e-Wa),o=Math.min(i,t+Wa),l=n.state.sliceDoc(r,o);if(r!=s.from){for(let a=0;a<Wa;a++)if(!qa.test(l[a+1])&&qa.test(l[a])){l=l.slice(a);break}}if(o!=i){for(let a=l.length-1;a>l.length-Wa;a--)if(!qa.test(l[a-1])&&qa.test(l[a])){l=l.slice(0,a);break}}return Le.announce.of(`${n.state.phrase("current match")}. ${l} ${n.state.phrase("on line")} ${s.number}.`)}const Q8=Le.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),Y8=[Li,Dr.low(H8),Q8];class jx{constructor(e,t,s,i){this.state=e,this.pos=t,this.explicit=s,this.view=i,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=An(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),s=Math.max(t.from,this.pos-250),i=t.text.slice(s-t.from,this.pos-t.from),r=i.search(Vx(e,!1));return r<0?null:{from:s+r,to:this.pos,text:i.slice(r)}}get aborted(){return this.abortListeners==null}addEventListener(e,t,s){e=="abort"&&this.abortListeners&&(this.abortListeners.push(t),s&&s.onDocChange&&(this.abortOnDocChange=!0))}}function vv(n){let e=Object.keys(n).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function X8(n){let e=Object.create(null),t=Object.create(null);for(let{label:i}of n){e[i[0]]=!0;for(let r=1;r<i.length;r++)t[i[r]]=!0}let s=vv(e)+vv(t)+"*$";return[new RegExp("^"+s),new RegExp(s)]}function Z8(n){let e=n.map(i=>typeof i=="string"?{label:i}:i),[t,s]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:X8(e);return i=>{let r=i.matchBefore(s);return r||i.explicit?{from:r?r.from:i.pos,options:e,validFor:t}:null}}class yv{constructor(e,t,s,i){this.completion=e,this.source=t,this.match=s,this.score=i}}function vr(n){return n.selection.main.from}function Vx(n,e){var t;let{source:s}=n,i=e&&s[0]!="^",r=s[s.length-1]!="$";return!i&&!r?n:new RegExp(`${i?"^":""}(?:${s})${r?"$":""}`,(t=n.flags)!==null&&t!==void 0?t:n.ignoreCase?"i":"")}const $x=hi.define();function eI(n,e,t,s){let{main:i}=n.selection,r=t-i.from,o=s-i.from;return{...n.changeByRange(l=>{if(l!=i&&t!=s&&n.sliceDoc(l.from+r,l.from+o)!=n.sliceDoc(t,s))return{range:l};let a=n.toText(e);return{changes:{from:l.from+r,to:s==i.from?l.to:l.from+o,insert:a},range:fe.cursor(l.from+r+a.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}const bv=new WeakMap;function tI(n){if(!Array.isArray(n))return n;let e=bv.get(n);return e||bv.set(n,e=Z8(n)),e}const Qu=et.define(),Nl=et.define();class nI{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let s=$n(e,t),i=$s(s);this.chars.push(s);let r=e.slice(t,t+i),o=r.toUpperCase();this.folded.push($n(o==r?r.toLowerCase():o,0)),t+=i}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:s,any:i,precise:r,byWord:o}=this;if(t.length==1){let _=$n(e,0),R=$s(_),U=R==e.length?0:-100;if(_!=t[0])if(_==s[0])U+=-200;else return null;return this.ret(U,[0,R])}let l=e.indexOf(this.pattern);if(l==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let a=t.length,u=0;if(l<0){for(let _=0,R=Math.min(e.length,200);_<R&&u<a;){let U=$n(e,_);(U==t[u]||U==s[u])&&(i[u++]=_),_+=$s(U)}if(u<a)return null}let c=0,d=0,f=!1,p=0,g=-1,k=-1,x=/[a-z]/.test(e),m=!0;for(let _=0,R=Math.min(e.length,200),U=0;_<R&&d<a;){let N=$n(e,_);l<0&&(c<a&&N==t[c]&&(r[c++]=_),p<a&&(N==t[p]||N==s[p]?(p==0&&(g=_),k=_+1,p++):p=0));let A,w=N<255?N>=48&&N<=57||N>=97&&N<=122?2:N>=65&&N<=90?1:0:(A=Kh(N))!=A.toLowerCase()?1:A!=A.toUpperCase()?2:0;(!_||w==1&&x||U==0&&w!=0)&&(t[d]==N||s[d]==N&&(f=!0)?o[d++]=_:o.length&&(m=!1)),U=w,_+=$s(N)}return d==a&&o[0]==0&&m?this.result(-100+(f?-200:0),o,e):p==a&&g==0?this.ret(-200-e.length+(k==e.length?0:-100),[0,k]):l>-1?this.ret(-700-e.length,[l,l+this.pattern.length]):p==a?this.ret(-900-e.length,[g,k]):d==a?this.result(-100+(f?-200:0)+-700+(m?0:-1100),o,e):t.length==2?null:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,t,s){let i=[],r=0;for(let o of t){let l=o+(this.astral?$s($n(s,o)):1);r&&i[r-1]==o?i[r-1]=l:(i[r++]=o,i[r++]=l)}return this.ret(e-s.length,i)}}class sI{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),s=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return s==null?null:(this.matched=[0,t.length],this.score=s+(e.length==this.pattern.length?0:-100),this)}}const sn=Ie.define({combine(n){return qs(n,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:iI,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>s=>kv(e(s),t(s)),optionClass:(e,t)=>s=>kv(e(s),t(s)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})}});function kv(n,e){return n?e?n+" "+e:n:e}function iI(n,e,t,s,i,r){let o=n.textDirection==Pt.RTL,l=o,a=!1,u="top",c,d,f=e.left-i.left,p=i.right-e.right,g=s.right-s.left,k=s.bottom-s.top;if(l&&f<Math.min(g,p)?l=!1:!l&&p<Math.min(g,f)&&(l=!0),g<=(l?f:p))c=Math.max(i.top,Math.min(t.top,i.bottom-k))-e.top,d=Math.min(400,l?f:p);else{a=!0,d=Math.min(400,(o?e.right:i.right-e.left)-30);let _=i.bottom-e.bottom;_>=k||_>e.top?c=t.bottom-e.top:(u="bottom",c=e.bottom-t.top)}let x=(e.bottom-e.top)/r.offsetHeight,m=(e.right-e.left)/r.offsetWidth;return{style:`${u}: ${c/x}px; max-width: ${d/m}px`,class:"cm-completionInfo-"+(a?o?"left-narrow":"right-narrow":l?"left":"right")}}function rI(n){let e=n.addToOptions.slice();return n.icons&&e.push({render(t){let s=document.createElement("div");return s.classList.add("cm-completionIcon"),t.type&&s.classList.add(...t.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),s.setAttribute("aria-hidden","true"),s},position:20}),e.push({render(t,s,i,r){let o=document.createElement("span");o.className="cm-completionLabel";let l=t.displayLabel||t.label,a=0;for(let u=0;u<r.length;){let c=r[u++],d=r[u++];c>a&&o.appendChild(document.createTextNode(l.slice(a,c)));let f=o.appendChild(document.createElement("span"));f.appendChild(document.createTextNode(l.slice(c,d))),f.className="cm-completionMatchedText",a=d}return a<l.length&&o.appendChild(document.createTextNode(l.slice(a))),o},position:50},{render(t){if(!t.detail)return null;let s=document.createElement("span");return s.className="cm-completionDetail",s.textContent=t.detail,s},position:80}),e.sort((t,s)=>t.position-s.position).map(t=>t.render)}function Md(n,e,t){if(n<=t)return{from:0,to:n};if(e<0&&(e=0),e<=n>>1){let i=Math.floor(e/t);return{from:i*t,to:(i+1)*t}}let s=Math.floor((n-e)/t);return{from:n-(s+1)*t,to:n-s*t}}class oI{constructor(e,t,s){this.view=e,this.stateField=t,this.applyCompletion=s,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:a=>this.placeInfo(a),key:this},this.space=null,this.currentClass="";let i=e.state.field(t),{options:r,selected:o}=i.open,l=e.state.facet(sn);this.optionContent=rI(l),this.optionClass=l.optionClass,this.tooltipClass=l.tooltipClass,this.range=Md(r.length,o,l.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",a=>{let{options:u}=e.state.field(t).open;for(let c=a.target,d;c&&c!=this.dom;c=c.parentNode)if(c.nodeName=="LI"&&(d=/-(\d+)$/.exec(c.id))&&+d[1]<u.length){this.applyCompletion(e,u[+d[1]]),a.preventDefault();return}}),this.dom.addEventListener("focusout",a=>{let u=e.state.field(this.stateField,!1);u&&u.tooltip&&e.state.facet(sn).closeOnBlur&&a.relatedTarget!=e.contentDOM&&e.dispatch({effects:Nl.of(null)})}),this.showOptions(r,i.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let s=e.state.field(this.stateField),i=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),s!=i){let{options:r,selected:o,disabled:l}=s.open;(!i.open||i.open.options!=r)&&(this.range=Md(r.length,o,e.state.facet(sn).maxRenderedOptions),this.showOptions(r,s.id)),this.updateSel(),l!=((t=i.open)===null||t===void 0?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!l)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let s of this.currentClass.split(" "))s&&this.dom.classList.remove(s);for(let s of t.split(" "))s&&this.dom.classList.add(s);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;(t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=Md(t.options.length,t.selected,this.view.state.facet(sn).maxRenderedOptions),this.showOptions(t.options,e.id));let s=this.updateSelectedOption(t.selected);if(s){this.destroyInfo();let{completion:i}=t.options[t.selected],{info:r}=i;if(!r)return;let o=typeof r=="string"?document.createTextNode(r):r(i);if(!o)return;"then"in o?o.then(l=>{l&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(l,i)}).catch(l=>Bn(this.view.state,l,"completion info")):(this.addInfoPane(o,i),s.setAttribute("aria-describedby",this.info.id))}}addInfoPane(e,t){this.destroyInfo();let s=this.info=document.createElement("div");if(s.className="cm-tooltip cm-completionInfo",s.id="cm-completionInfo-"+Math.floor(Math.random()*65535).toString(16),e.nodeType!=null)s.appendChild(e),this.infoDestroy=null;else{let{dom:i,destroy:r}=e;s.appendChild(i),this.infoDestroy=r||null}this.dom.appendChild(s),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let s=this.list.firstChild,i=this.range.from;s;s=s.nextSibling,i++)s.nodeName!="LI"||!s.id?i--:i==e?s.hasAttribute("aria-selected")||(s.setAttribute("aria-selected","true"),t=s):s.hasAttribute("aria-selected")&&(s.removeAttribute("aria-selected"),s.removeAttribute("aria-describedby"));return t&&aI(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),s=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),r=this.space;if(!r){let o=this.dom.ownerDocument.documentElement;r={left:0,top:0,right:o.clientWidth,bottom:o.clientHeight}}return i.top>Math.min(r.bottom,t.bottom)-10||i.bottom<Math.max(r.top,t.top)+10?null:this.view.state.facet(sn).positionInfo(this.view,t,i,s,r,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,s){const i=document.createElement("ul");i.id=t,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions")),i.addEventListener("mousedown",o=>{o.target==i&&o.preventDefault()});let r=null;for(let o=s.from;o<s.to;o++){let{completion:l,match:a}=e[o],{section:u}=l;if(u){let f=typeof u=="string"?u:u.name;if(f!=r&&(o>s.from||s.from==0))if(r=f,typeof u!="string"&&u.header)i.appendChild(u.header(u));else{let p=i.appendChild(document.createElement("completion-section"));p.textContent=f}}const c=i.appendChild(document.createElement("li"));c.id=t+"-"+o,c.setAttribute("role","option");let d=this.optionClass(l);d&&(c.className=d);for(let f of this.optionContent){let p=f(l,this.view.state,this.view,a);p&&c.appendChild(p)}}return s.from&&i.classList.add("cm-completionListIncompleteTop"),s.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function lI(n,e){return t=>new oI(t,n,e)}function aI(n,e){let t=n.getBoundingClientRect(),s=e.getBoundingClientRect(),i=t.height/n.offsetHeight;s.top<t.top?n.scrollTop-=(t.top-s.top)/i:s.bottom>t.bottom&&(n.scrollTop+=(s.bottom-t.bottom)/i)}function xv(n){return(n.boost||0)*100+(n.apply?10:0)+(n.info?5:0)+(n.type?1:0)}function uI(n,e){let t=[],s=null,i=null,r=c=>{t.push(c);let{section:d}=c.completion;if(d){s||(s=[]);let f=typeof d=="string"?d:d.name;s.some(p=>p.name==f)||s.push(typeof d=="string"?{name:f}:d)}},o=e.facet(sn);for(let c of n)if(c.hasResult()){let d=c.result.getMatch;if(c.result.filter===!1)for(let f of c.result.options)r(new yv(f,c.source,d?d(f):[],1e9-t.length));else{let f=e.sliceDoc(c.from,c.to),p,g=o.filterStrict?new sI(f):new nI(f);for(let k of c.result.options)if(p=g.match(k.label)){let x=k.displayLabel?d?d(k,p.matched):[]:p.matched,m=p.score+(k.boost||0);if(r(new yv(k,c.source,x,m)),typeof k.section=="object"&&k.section.rank==="dynamic"){let{name:_}=k.section;i||(i=Object.create(null)),i[_]=Math.max(m,i[_]||-1e9)}}}}if(s){let c=Object.create(null),d=0,f=(p,g)=>(p.rank==="dynamic"&&g.rank==="dynamic"?i[g.name]-i[p.name]:0)||(typeof p.rank=="number"?p.rank:1e9)-(typeof g.rank=="number"?g.rank:1e9)||(p.name<g.name?-1:1);for(let p of s.sort(f))d-=1e5,c[p.name]=d;for(let p of t){let{section:g}=p.completion;g&&(p.score+=c[typeof g=="string"?g:g.name])}}let l=[],a=null,u=o.compareCompletions;for(let c of t.sort((d,f)=>f.score-d.score||u(d.completion,f.completion))){let d=c.completion;!a||a.label!=d.label||a.detail!=d.detail||a.type!=null&&d.type!=null&&a.type!=d.type||a.apply!=d.apply||a.boost!=d.boost?l.push(c):xv(c.completion)>xv(a)&&(l[l.length-1]=c),a=c.completion}return l}class Hr{constructor(e,t,s,i,r,o){this.options=e,this.attrs=t,this.tooltip=s,this.timestamp=i,this.selected=r,this.disabled=o}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new Hr(this.options,_v(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,s,i,r,o){if(i&&!o&&e.some(u=>u.isPending))return i.setDisabled();let l=uI(e,t);if(!l.length)return i&&e.some(u=>u.isPending)?i.setDisabled():null;let a=t.facet(sn).selectOnOpen?0:-1;if(i&&i.selected!=a&&i.selected!=-1){let u=i.options[i.selected].completion;for(let c=0;c<l.length;c++)if(l[c].completion==u){a=c;break}}return new Hr(l,_v(s,a),{pos:e.reduce((u,c)=>c.hasResult()?Math.min(u,c.from):u,1e8),create:mI,above:r.aboveCursor},i?i.timestamp:Date.now(),a,!1)}map(e){return new Hr(this.options,this.attrs,{...this.tooltip,pos:e.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new Hr(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class Yu{constructor(e,t,s){this.active=e,this.id=t,this.open=s}static start(){return new Yu(hI,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,s=t.facet(sn),r=(s.override||t.languageDataAt("autocomplete",vr(t)).map(tI)).map(a=>(this.active.find(c=>c.source==a)||new is(a,this.active.some(c=>c.state!=0)?1:0)).update(e,s));r.length==this.active.length&&r.every((a,u)=>a==this.active[u])&&(r=this.active);let o=this.open,l=e.effects.some(a=>a.is(Ep));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||r.some(a=>a.hasResult()&&e.changes.touchesRange(a.from,a.to))||!cI(r,this.active)||l?o=Hr.build(r,t,this.id,o,s,l):o&&o.disabled&&!r.some(a=>a.isPending)&&(o=null),!o&&r.every(a=>!a.isPending)&&r.some(a=>a.hasResult())&&(r=r.map(a=>a.hasResult()?new is(a.source,0):a));for(let a of e.effects)a.is(Bx)&&(o=o&&o.setSelected(a.value,this.id));return r==this.active&&o==this.open?this:new Yu(r,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?dI:fI}}function cI(n,e){if(n==e)return!0;for(let t=0,s=0;;){for(;t<n.length&&!n[t].hasResult();)t++;for(;s<e.length&&!e[s].hasResult();)s++;let i=t==n.length,r=s==e.length;if(i||r)return i==r;if(n[t++].result!=e[s++].result)return!1}}const dI={"aria-autocomplete":"list"},fI={};function _v(n,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":n};return e>-1&&(t["aria-activedescendant"]=n+"-"+e),t}const hI=[];function Nx(n,e){if(n.isUserEvent("input.complete")){let s=n.annotation($x);if(s&&e.activateOnCompletion(s))return 12}let t=n.isUserEvent("input.type");return t&&e.activateOnTyping?5:t?1:n.isUserEvent("delete.backward")?2:n.selection?8:n.docChanged?16:0}class is{constructor(e,t,s=!1){this.source=e,this.state=t,this.explicit=s}hasResult(){return!1}get isPending(){return this.state==1}update(e,t){let s=Nx(e,t),i=this;(s&8||s&16&&this.touches(e))&&(i=new is(i.source,0)),s&4&&i.state==0&&(i=new is(this.source,1)),i=i.updateFor(e,s);for(let r of e.effects)if(r.is(Qu))i=new is(i.source,1,r.value);else if(r.is(Nl))i=new is(i.source,0);else if(r.is(Ep))for(let o of r.value)o.source==i.source&&(i=o);return i}updateFor(e,t){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(vr(e.state))}}class ro extends is{constructor(e,t,s,i,r,o){super(e,3,t),this.limit=s,this.result=i,this.from=r,this.to=o}hasResult(){return!0}updateFor(e,t){var s;if(!(t&3))return this.map(e.changes);let i=this.result;i.map&&!e.changes.empty&&(i=i.map(i,e.changes));let r=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),l=vr(e.state);if(l>o||!i||t&2&&(vr(e.startState)==this.from||l<this.limit))return new is(this.source,t&4?1:0);let a=e.changes.mapPos(this.limit);return pI(i.validFor,e.state,r,o)?new ro(this.source,this.explicit,a,i,r,o):i.update&&(i=i.update(i,r,o,new jx(e.state,l,!1)))?new ro(this.source,this.explicit,a,i,i.from,(s=i.to)!==null&&s!==void 0?s:vr(e.state)):new is(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new ro(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new is(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function pI(n,e,t,s){if(!n)return!1;let i=e.sliceDoc(t,s);return typeof n=="function"?n(i,t,s,e):Vx(n,!0).test(i)}const Ep=et.define({map(n,e){return n.map(t=>t.map(e))}}),Bx=et.define(),Nn=hn.define({create(){return Yu.start()},update(n,e){return n.update(e)},provide:n=>[up.from(n,e=>e.tooltip),Le.contentAttributes.from(n,e=>e.attrs)]});function Tp(n,e){const t=e.completion.apply||e.completion.label;let s=n.state.field(Nn).active.find(i=>i.source==e.source);return s instanceof ro?(typeof t=="string"?n.dispatch({...eI(n.state,t,s.from,s.to),annotations:$x.of(e.completion)}):t(n,e.completion,s.from,s.to),!0):!1}const mI=lI(Nn,Tp);function Ga(n,e="option"){return t=>{let s=t.state.field(Nn,!1);if(!s||!s.open||s.open.disabled||Date.now()-s.open.timestamp<t.state.facet(sn).interactionDelay)return!1;let i=1,r;e=="page"&&(r=bk(t,s.open.tooltip))&&(i=Math.max(2,Math.floor(r.dom.offsetHeight/r.dom.querySelector("li").offsetHeight)-1));let{length:o}=s.open.options,l=s.open.selected>-1?s.open.selected+i*(n?1:-1):n?0:o-1;return l<0?l=e=="page"?0:o-1:l>=o&&(l=e=="page"?o-1:0),t.dispatch({effects:Bx.of(l)}),!0}}const gI=n=>{let e=n.state.field(Nn,!1);return n.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<n.state.facet(sn).interactionDelay?!1:Tp(n,e.open.options[e.open.selected])},Id=n=>n.state.field(Nn,!1)?(n.dispatch({effects:Qu.of(!0)}),!0):!1,vI=n=>{let e=n.state.field(Nn,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(n.dispatch({effects:Nl.of(null)}),!0)};class yI{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const bI=50,kI=1e3,xI=qt.fromClass(class{constructor(n){this.view=n,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of n.state.field(Nn).active)e.isPending&&this.startQuery(e)}update(n){let e=n.state.field(Nn),t=n.state.facet(sn);if(!n.selectionSet&&!n.docChanged&&n.startState.field(Nn)==e)return;let s=n.transactions.some(r=>{let o=Nx(r,t);return o&8||(r.selection||r.docChanged)&&!(o&3)});for(let r=0;r<this.running.length;r++){let o=this.running[r];if(s||o.context.abortOnDocChange&&n.docChanged||o.updates.length+n.transactions.length>bI&&Date.now()-o.time>kI){for(let l of o.context.abortListeners)try{l()}catch(a){Bn(this.view.state,a)}o.context.abortListeners=null,this.running.splice(r--,1)}else o.updates.push(...n.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),n.transactions.some(r=>r.effects.some(o=>o.is(Qu)))&&(this.pendingStart=!0);let i=this.pendingStart?50:t.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(r=>r.isPending&&!this.running.some(o=>o.active.source==r.source))?setTimeout(()=>this.startUpdate(),i):-1,this.composing!=0)for(let r of n.transactions)r.isUserEvent("input.type")?this.composing=2:this.composing==2&&r.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:n}=this.view,e=n.field(Nn);for(let t of e.active)t.isPending&&!this.running.some(s=>s.active.source==t.source)&&this.startQuery(t);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(sn).updateSyncTime))}startQuery(n){let{state:e}=this.view,t=vr(e),s=new jx(e,t,n.explicit,this.view),i=new yI(n,s);this.running.push(i),Promise.resolve(n.source(s)).then(r=>{i.context.aborted||(i.done=r||null,this.scheduleAccept())},r=>{this.view.dispatch({effects:Nl.of(null)}),Bn(this.view.state,r)})}scheduleAccept(){this.running.every(n=>n.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(sn).updateSyncTime))}accept(){var n;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(sn),s=this.view.state.field(Nn);for(let i=0;i<this.running.length;i++){let r=this.running[i];if(r.done===void 0)continue;if(this.running.splice(i--,1),r.done){let l=vr(r.updates.length?r.updates[0].startState:this.view.state),a=Math.min(l,r.done.from+(r.active.explicit?0:1)),u=new ro(r.active.source,r.active.explicit,a,r.done,r.done.from,(n=r.done.to)!==null&&n!==void 0?n:l);for(let c of r.updates)u=u.update(c,t);if(u.hasResult()){e.push(u);continue}}let o=s.active.find(l=>l.source==r.active.source);if(o&&o.isPending)if(r.done==null){let l=new is(r.active.source,0);for(let a of r.updates)l=l.update(a,t);l.isPending||e.push(l)}else this.startQuery(o)}(e.length||s.open&&s.open.disabled)&&this.view.dispatch({effects:Ep.of(e)})}},{eventHandlers:{blur(n){let e=this.view.state.field(Nn,!1);if(e&&e.tooltip&&this.view.state.facet(sn).closeOnBlur){let t=e.open&&bk(this.view,e.open.tooltip);(!t||!t.dom.contains(n.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:Nl.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Qu.of(!1)}),20),this.composing=0}}}),_I=typeof navigator=="object"&&/Win/.test(navigator.platform),wI=Dr.highest(Le.domEventHandlers({keydown(n,e){let t=e.state.field(Nn,!1);if(!t||!t.open||t.open.disabled||t.open.selected<0||n.key.length>1||n.ctrlKey&&!(_I&&n.altKey)||n.metaKey)return!1;let s=t.open.options[t.open.selected],i=t.active.find(o=>o.source==s.source),r=s.completion.commitCharacters||i.result.commitCharacters;return r&&r.indexOf(n.key)>-1&&Tp(e,s),!1}})),SI=Le.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),Bl={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},hr=et.define({map(n,e){let t=e.mapPos(n,-1,Ln.TrackAfter);return t??void 0}}),Dp=new class extends xr{};Dp.startSide=1;Dp.endSide=-1;const Fx=hn.define({create(){return at.empty},update(n,e){if(n=n.map(e.changes),e.selection){let t=e.state.doc.lineAt(e.selection.main.head);n=n.update({filter:s=>s>=t.from&&s<=t.to})}for(let t of e.effects)t.is(hr)&&(n=n.update({add:[Dp.range(t.value,t.value+1)]}));return n}});function CI(){return[EI,Fx]}const jd="()[]{}<>";function Ux(n){for(let e=0;e<jd.length;e+=2)if(jd.charCodeAt(e)==n)return jd.charAt(e+1);return Kh(n<128?n:n+1)}function zx(n,e){return n.languageDataAt("closeBrackets",e)[0]||Bl}const AI=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),EI=Le.inputHandler.of((n,e,t,s)=>{if((AI?n.composing:n.compositionStarted)||n.state.readOnly)return!1;let i=n.state.selection.main;if(s.length>2||s.length==2&&$s($n(s,0))==1||e!=i.from||t!=i.to)return!1;let r=PI(n.state,s);return r?(n.dispatch(r),!0):!1}),TI=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let s=zx(n,n.selection.main.head).brackets||Bl.brackets,i=null,r=n.changeByRange(o=>{if(o.empty){let l=RI(n.doc,o.head);for(let a of s)if(a==l&&Oc(n.doc,o.head)==Ux($n(a,0)))return{changes:{from:o.head-a.length,to:o.head+a.length},range:fe.cursor(o.head-a.length)}}return{range:i=o}});return i||e(n.update(r,{scrollIntoView:!0,userEvent:"delete.backward"})),!i},DI=[{key:"Backspace",run:TI}];function PI(n,e){let t=zx(n,n.selection.main.head),s=t.brackets||Bl.brackets;for(let i of s){let r=Ux($n(i,0));if(e==i)return r==i?MI(n,i,s.indexOf(i+i+i)>-1,t):OI(n,i,r,t.before||Bl.before);if(e==r&&Hx(n,n.selection.main.from))return LI(n,i,r)}return null}function Hx(n,e){let t=!1;return n.field(Fx).between(0,n.doc.length,s=>{s==e&&(t=!0)}),t}function Oc(n,e){let t=n.sliceString(e,e+2);return t.slice(0,$s($n(t,0)))}function RI(n,e){let t=n.sliceString(e-2,e);return $s($n(t,0))==t.length?t:t.slice(1)}function OI(n,e,t,s){let i=null,r=n.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:t,from:o.to}],effects:hr.of(o.to+e.length),range:fe.range(o.anchor+e.length,o.head+e.length)};let l=Oc(n.doc,o.head);return!l||/\s/.test(l)||s.indexOf(l)>-1?{changes:{insert:e+t,from:o.head},effects:hr.of(o.head+e.length),range:fe.cursor(o.head+e.length)}:{range:i=o}});return i?null:n.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function LI(n,e,t){let s=null,i=n.changeByRange(r=>r.empty&&Oc(n.doc,r.head)==t?{changes:{from:r.head,to:r.head+t.length,insert:t},range:fe.cursor(r.head+t.length)}:s={range:r});return s?null:n.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function MI(n,e,t,s){let i=s.stringPrefixes||Bl.stringPrefixes,r=null,o=n.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:e,from:l.to}],effects:hr.of(l.to+e.length),range:fe.range(l.anchor+e.length,l.head+e.length)};let a=l.head,u=Oc(n.doc,a),c;if(u==e){if(wv(n,a))return{changes:{insert:e+e,from:a},effects:hr.of(a+e.length),range:fe.cursor(a+e.length)};if(Hx(n,a)){let f=t&&n.sliceDoc(a,a+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:a,to:a+f.length,insert:f},range:fe.cursor(a+f.length)}}}else{if(t&&n.sliceDoc(a-2*e.length,a)==e+e&&(c=Sv(n,a-2*e.length,i))>-1&&wv(n,c))return{changes:{insert:e+e+e+e,from:a},effects:hr.of(a+e.length),range:fe.cursor(a+e.length)};if(n.charCategorizer(a)(u)!=Ot.Word&&Sv(n,a,i)>-1&&!II(n,a,e,i))return{changes:{insert:e+e,from:a},effects:hr.of(a+e.length),range:fe.cursor(a+e.length)}}return{range:r=l}});return r?null:n.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function wv(n,e){let t=An(n).resolveInner(e+1);return t.parent&&t.from==e}function II(n,e,t,s){let i=An(n).resolveInner(e,-1),r=s.reduce((o,l)=>Math.max(o,l.length),0);for(let o=0;o<5;o++){let l=n.sliceDoc(i.from,Math.min(i.to,i.from+t.length+r)),a=l.indexOf(t);if(!a||a>-1&&s.indexOf(l.slice(0,a))>-1){let c=i.firstChild;for(;c&&c.from==i.from&&c.to-c.from>t.length+a;){if(n.sliceDoc(c.to-t.length,c.to)==t)return!1;c=c.firstChild}return!0}let u=i.to==e&&i.parent;if(!u)break;i=u}return!1}function Sv(n,e,t){let s=n.charCategorizer(e);if(s(n.sliceDoc(e-1,e))!=Ot.Word)return e;for(let i of t){let r=e-i.length;if(n.sliceDoc(r,e)==i&&s(n.sliceDoc(r-1,r))!=Ot.Word)return r}return-1}function jI(n={}){return[wI,Nn,sn.of(n),xI,VI,SI]}const Wx=[{key:"Ctrl-Space",run:Id},{mac:"Alt-`",run:Id},{mac:"Alt-i",run:Id},{key:"Escape",run:vI},{key:"ArrowDown",run:Ga(!0)},{key:"ArrowUp",run:Ga(!1)},{key:"PageDown",run:Ga(!0,"page")},{key:"PageUp",run:Ga(!1,"page")},{key:"Enter",run:gI}],VI=Dr.highest(lp.computeN([sn],n=>n.facet(sn).defaultKeymap?[Wx]:[]));class Cv{constructor(e,t,s){this.from=e,this.to=t,this.diagnostic=s}}class ar{constructor(e,t,s){this.diagnostics=e,this.panel=t,this.selected=s}static init(e,t,s){let i=s.facet(Fl).markerFilter;i&&(e=i(e,s));let r=e.slice().sort((p,g)=>p.from-g.from||p.to-g.to),o=new ui,l=[],a=0,u=s.doc.iter(),c=0,d=s.doc.length;for(let p=0;;){let g=p==r.length?null:r[p];if(!g&&!l.length)break;let k,x;if(l.length)k=a,x=l.reduce((R,U)=>Math.min(R,U.to),g&&g.from>k?g.from:1e8);else{if(k=g.from,k>d)break;x=g.to,l.push(g),p++}for(;p<r.length;){let R=r[p];if(R.from==k&&(R.to>R.from||R.to==k))l.push(R),p++,x=Math.min(R.to,x);else{x=Math.min(R.from,x);break}}x=Math.min(x,d);let m=!1;if(l.some(R=>R.from==k&&(R.to==x||x==d))&&(m=k==x,!m&&x-k<10)){let R=k-(c+u.value.length);R>0&&(u.next(R),c=k);for(let U=k;;){if(U>=x){m=!0;break}if(!u.lineBreak&&c+u.value.length>U)break;U=c+u.value.length,c+=u.value.length,u.next()}}let _=QI(l);if(m)o.add(k,k,We.widget({widget:new qI(_),diagnostics:l.slice()}));else{let R=l.reduce((U,N)=>N.markClass?U+" "+N.markClass:U,"");o.add(k,x,We.mark({class:"cm-lintRange cm-lintRange-"+_+R,diagnostics:l.slice(),inclusiveEnd:l.some(U=>U.to>x)}))}if(a=x,a==d)break;for(let R=0;R<l.length;R++)l[R].to<=a&&l.splice(R--,1)}let f=o.finish();return new ar(f,t,bo(f))}}function bo(n,e=null,t=0){let s=null;return n.between(t,1e9,(i,r,{spec:o})=>{if(!(e&&o.diagnostics.indexOf(e)<0))if(!s)s=new Cv(i,r,e||o.diagnostics[0]);else{if(o.diagnostics.indexOf(s.diagnostic)<0)return!1;s=new Cv(s.from,r,s.diagnostic)}}),s}function $I(n,e){let t=e.pos,s=e.end||t,i=n.state.facet(Fl).hideOn(n,t,s);if(i!=null)return i;let r=n.startState.doc.lineAt(e.pos);return!!(n.effects.some(o=>o.is(qx))||n.changes.touchesRange(r.from,Math.max(r.to,s)))}function NI(n,e){return n.field(Yn,!1)?e:e.concat(et.appendConfig.of(YI))}const qx=et.define(),Pp=et.define(),Gx=et.define(),Yn=hn.define({create(){return new ar(We.none,null,null)},update(n,e){if(e.docChanged&&n.diagnostics.size){let t=n.diagnostics.map(e.changes),s=null,i=n.panel;if(n.selected){let r=e.changes.mapPos(n.selected.from,1);s=bo(t,n.selected.diagnostic,r)||bo(t,null,r)}!t.size&&i&&e.state.facet(Fl).autoPanel&&(i=null),n=new ar(t,i,s)}for(let t of e.effects)if(t.is(qx)){let s=e.state.facet(Fl).autoPanel?t.value.length?Ul.open:null:n.panel;n=ar.init(t.value,s,e.state)}else t.is(Pp)?n=new ar(n.diagnostics,t.value?Ul.open:null,n.selected):t.is(Gx)&&(n=new ar(n.diagnostics,n.panel,t.value));return n},provide:n=>[Ll.from(n,e=>e.panel),Le.decorations.from(n,e=>e.diagnostics)]}),BI=We.mark({class:"cm-lintRange cm-lintRange-active"});function FI(n,e,t){let{diagnostics:s}=n.state.field(Yn),i,r=-1,o=-1;s.between(e-(t<0?1:0),e+(t>0?1:0),(a,u,{spec:c})=>{if(e>=a&&e<=u&&(a==u||(e>a||t>0)&&(e<u||t<0)))return i=c.diagnostics,r=a,o=u,!1});let l=n.state.facet(Fl).tooltipFilter;return i&&l&&(i=l(i,n.state)),i?{pos:r,end:o,above:n.state.doc.lineAt(r).to<o,create(){return{dom:UI(n,i)}}}:null}function UI(n,e){return xt("ul",{class:"cm-tooltip-lint"},e.map(t=>Jx(n,t,!1)))}const zI=n=>{let e=n.state.field(Yn,!1);(!e||!e.panel)&&n.dispatch({effects:NI(n.state,[Pp.of(!0)])});let t=Ol(n,Ul.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},Av=n=>{let e=n.state.field(Yn,!1);return!e||!e.panel?!1:(n.dispatch({effects:Pp.of(!1)}),!0)},HI=n=>{let e=n.state.field(Yn,!1);if(!e)return!1;let t=n.state.selection.main,s=e.diagnostics.iter(t.to+1);return!s.value&&(s=e.diagnostics.iter(0),!s.value||s.from==t.from&&s.to==t.to)?!1:(n.dispatch({selection:{anchor:s.from,head:s.to},scrollIntoView:!0}),!0)},WI=[{key:"Mod-Shift-m",run:zI,preventDefault:!0},{key:"F8",run:HI}],Fl=Ie.define({combine(n){return{sources:n.map(e=>e.source).filter(e=>e!=null),...qs(n.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:Ev,tooltipFilter:Ev,needsRefresh:(e,t)=>e?t?s=>e(s)||t(s):e:t,hideOn:(e,t)=>e?t?(s,i,r)=>e(s,i,r)||t(s,i,r):e:t,autoPanel:(e,t)=>e||t})}}});function Ev(n,e){return n?e?(t,s)=>e(n(t,s),s):n:e}function Kx(n){let e=[];if(n)e:for(let{name:t}of n){for(let s=0;s<t.length;s++){let i=t[s];if(/[a-zA-Z]/.test(i)&&!e.some(r=>r.toLowerCase()==i.toLowerCase())){e.push(i);continue e}}e.push("")}return e}function Jx(n,e,t){var s;let i=t?Kx(e.actions):[];return xt("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},xt("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(n):e.message),(s=e.actions)===null||s===void 0?void 0:s.map((r,o)=>{let l=!1,a=p=>{if(p.preventDefault(),l)return;l=!0;let g=bo(n.state.field(Yn).diagnostics,e);g&&r.apply(n,g.from,g.to)},{name:u}=r,c=i[o]?u.indexOf(i[o]):-1,d=c<0?u:[u.slice(0,c),xt("u",u.slice(c,c+1)),u.slice(c+1)],f=r.markClass?" "+r.markClass:"";return xt("button",{type:"button",class:"cm-diagnosticAction"+f,onclick:a,onmousedown:a,"aria-label":` Action: ${u}${c<0?"":` (access key "${i[o]})"`}.`},d)}),e.source&&xt("div",{class:"cm-diagnosticSource"},e.source))}class qI extends Ui{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return xt("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class Tv{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=Jx(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Ul{constructor(e){this.view=e,this.items=[];let t=i=>{if(i.keyCode==27)Av(this.view),this.view.focus();else if(i.keyCode==38||i.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(i.keyCode==40||i.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(i.keyCode==36)this.moveSelection(0);else if(i.keyCode==35)this.moveSelection(this.items.length-1);else if(i.keyCode==13)this.view.focus();else if(i.keyCode>=65&&i.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:r}=this.items[this.selectedIndex],o=Kx(r.actions);for(let l=0;l<o.length;l++)if(o[l].toUpperCase().charCodeAt(0)==i.keyCode){let a=bo(this.view.state.field(Yn).diagnostics,r);a&&r.actions[l].apply(e,a.from,a.to)}}else return;i.preventDefault()},s=i=>{for(let r=0;r<this.items.length;r++)this.items[r].dom.contains(i.target)&&this.moveSelection(r)};this.list=xt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:s}),this.dom=xt("div",{class:"cm-panel-lint"},this.list,xt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>Av(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(Yn).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(Yn),s=0,i=!1,r=null,o=new Set;for(e.between(0,this.view.state.doc.length,(l,a,{spec:u})=>{for(let c of u.diagnostics){if(o.has(c))continue;o.add(c);let d=-1,f;for(let p=s;p<this.items.length;p++)if(this.items[p].diagnostic==c){d=p;break}d<0?(f=new Tv(this.view,c),this.items.splice(s,0,f),i=!0):(f=this.items[d],d>s&&(this.items.splice(s,d-s),i=!0)),t&&f.diagnostic==t.diagnostic?f.dom.hasAttribute("aria-selected")||(f.dom.setAttribute("aria-selected","true"),r=f):f.dom.hasAttribute("aria-selected")&&f.dom.removeAttribute("aria-selected"),s++}});s<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();this.items.length==0&&(this.items.push(new Tv(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),r?(this.list.setAttribute("aria-activedescendant",r.id),this.view.requestMeasure({key:this,read:()=>({sel:r.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:l,panel:a})=>{let u=a.height/this.list.offsetHeight;l.top<a.top?this.list.scrollTop-=(a.top-l.top)/u:l.bottom>a.bottom&&(this.list.scrollTop+=(l.bottom-a.bottom)/u)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function t(){let s=e;e=s.nextSibling,s.remove()}for(let s of this.items)if(s.dom.parentNode==this.list){for(;e!=s.dom;)t();e=s.dom.nextSibling}else this.list.insertBefore(s.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(Yn),s=bo(t.diagnostics,this.items[e].diagnostic);s&&this.view.dispatch({selection:{anchor:s.from,head:s.to},scrollIntoView:!0,effects:Gx.of(s)})}static open(e){return new Ul(e)}}function GI(n,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(n)}</svg>')`}function Ka(n){return GI(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${n}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const KI=Le.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Ka("#d11")},".cm-lintRange-warning":{backgroundImage:Ka("orange")},".cm-lintRange-info":{backgroundImage:Ka("#999")},".cm-lintRange-hint":{backgroundImage:Ka("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function JI(n){return n=="error"?4:n=="warning"?3:n=="info"?2:1}function QI(n){let e="hint",t=1;for(let s of n){let i=JI(s.severity);i>t&&(t=i,e=s.severity)}return e}const YI=[Yn,Le.decorations.compute([Yn],n=>{let{selected:e,panel:t}=n.field(Yn);return!e||!t||e.from==e.to?We.none:We.set([BI.range(e.from,e.to)])}),VO(FI,{hideOn:$I}),KI],XI=[KO(),YO(),pO(),bM(),UL(),sO(),aO(),lt.allowMultipleSelections.of(!0),TL(),Bk(qL,{fallback:!0}),ZL(),CI(),jI(),AO(),DO(),kO(),D8(),lp.of([...DI,...w8,...K8,...TM,...$L,...Wx,...WI])],ZI={class:"rounded-lg border border-gray-300 overflow-hidden dark:border-gray-600"},Lc={__name:"CodeEditor",props:{modelValue:{type:String,default:""},language:{type:String,default:"r",validator:n=>["r","markdown","text","gitignore"].includes(n)},minHeight:{type:String,default:"400px"},autoGrow:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:""}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,s=e,i=Q(null);let r=null;const o=vp.define({token(u){return u.sol()&&u.match(/^#/)?(u.skipToEnd(),"comment"):(u.skipToEnd(),null)}}),l=Bk(na.define([{tag:Pe.comment,color:"#16a34a"}])),a=()=>[o,l];return Cn(()=>{if(!i.value)return;const u=Le.updateListener.of(p=>{p.docChanged&&s("update:modelValue",p.state.doc.toString())}),c={"&":{fontSize:"13px",fontFamily:'ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, "Liberation Mono", monospace'},".cm-scroller":{fontFamily:'ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, "Liberation Mono", monospace'},".cm-content":{padding:"12px 0"},".cm-line":{padding:"0 12px"}};t.autoGrow||(c["&"].minHeight=t.minHeight);const d=[XI,a(),u,Le.lineWrapping,Le.theme(c)],f=lt.create({doc:t.modelValue||"",extensions:d});r=new Le({state:f,parent:i.value})}),je(()=>t.modelValue,u=>{r&&u!==r.state.doc.toString()&&r.dispatch({changes:{from:0,to:r.state.doc.length,insert:u}})}),(u,c)=>(v(),b("div",ZI,[h("div",{ref_key:"editorRef",ref:i},null,512)]))}},e6={class:"relative"},t6={key:0,class:"absolute z-10 mt-1 w-full max-h-64 overflow-y-auto border border-gray-200 dark:border-gray-700 rounded-md bg-white dark:bg-gray-800 shadow-lg"},n6=["onClick","onMouseenter"],s6={class:"flex items-center justify-between gap-3"},i6={class:"flex-1 min-w-0"},r6={class:"font-medium text-gray-900 dark:text-white"},o6={class:"text-xs text-gray-500 dark:text-gray-400 truncate"},l6={class:"ml-3 text-xs text-gray-400 dark:text-gray-500 shrink-0 flex items-center gap-1.5"},a6={class:"text-[10px] font-medium"},u6={key:1,class:"absolute right-3 top-9 text-gray-400"},c6={__name:"PackageAutocomplete",props:{modelValue:{type:String,default:""},label:{type:String,default:"Search Packages"},placeholder:{type:String,default:"Type to search..."},source:{type:String,default:"cran",validator:n=>["cran","bioconductor","github"].includes(n)}},emits:["update:modelValue","select"],setup(n,{emit:e}){const t=n,s=e,i=z({get:()=>t.modelValue,set:f=>s("update:modelValue",f)}),r=Q([]),o=Q(!1),l=Q(-1);let a=null;je(i,f=>{if(a&&clearTimeout(a),f.length<2){r.value=[],l.value=-1;return}a=setTimeout(()=>{u(f)},300)});const u=async f=>{o.value=!0;try{const g=await(await fetch(`/api/packages/search?q=${encodeURIComponent(f)}&source=${encodeURIComponent(t.source)}`)).json();r.value=g.packages||[],l.value=r.value.length>0?0:-1}catch(p){console.error("Failed to search packages:",p),r.value=[],l.value=-1}finally{o.value=!1}},c=f=>{r.value.length!==0&&(f.key==="ArrowDown"?(f.preventDefault(),l.value=Math.min(l.value+1,r.value.length-1)):f.key==="ArrowUp"?(f.preventDefault(),l.value=Math.max(l.value-1,0)):f.key==="Enter"&&l.value>=0?(f.preventDefault(),d(r.value[l.value])):f.key==="Escape"&&(r.value=[],l.value=-1))},d=f=>{s("update:modelValue",f.name),s("select",f),r.value=[],l.value=-1};return(f,p)=>(v(),b("div",e6,[S(Ee,{modelValue:i.value,"onUpdate:modelValue":p[0]||(p[0]=g=>i.value=g),label:n.label,placeholder:n.placeholder,onKeydown:c},null,8,["modelValue","label","placeholder"]),r.value.length>0?(v(),b("div",t6,[(v(!0),b(be,null,Ve(r.value,(g,k)=>(v(),b("button",{key:g.name,onClick:x=>d(g),onMouseenter:x=>l.value=k,class:Se(["w-full px-3 py-2 text-left border-b border-gray-200 dark:border-gray-700 last:border-b-0 transition",l.value===k?"bg-sky-50 dark:bg-sky-900/20":"hover:bg-gray-50 dark:hover:bg-gray-700"])},[h("div",s6,[h("div",i6,[h("div",r6,Y(g.name),1),h("div",o6,Y(g.title),1)]),h("div",l6,[h("span",a6,Y(g.source==="cran"?"CRAN":g.source==="bioconductor"?"Bioconductor":g.source),1),p[1]||(p[1]=h("span",null,"",-1)),h("span",null,"v"+Y(g.version),1)])])],42,n6))),128))])):H("",!0),o.value?(v(),b("div",u6,[...p[2]||(p[2]=[h("svg",{class:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[h("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),h("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):H("",!0)]))}},d6={class:"flex items-center justify-between"},f6={class:"flex-1"},h6={class:"text-xs text-gray-500 dark:text-gray-400 mb-1"},p6={class:"text-sm text-gray-900 dark:text-white"},m6={__name:"OverviewCard",props:{title:{type:String,required:!0}},emits:["click"],setup(n){return(e,t)=>(v(),b("button",{onClick:t[0]||(t[0]=s=>e.$emit("click")),class:"w-full text-left px-4 py-3 rounded-md bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 hover:border-sky-300 dark:hover:border-sky-700 transition"},[h("div",d6,[h("div",f6,[h("div",h6,Y(n.title),1),h("div",p6,[ht(e.$slots,"default")])]),t[1]||(t[1]=h("svg",{class:"h-5 w-5 text-gray-400 shrink-0 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))])]))}},g6={class:"space-y-3"},v6=["innerHTML"],Rp={__name:"OverviewSummary",props:{cards:{type:Array,required:!0}},emits:["navigate"],setup(n){return(e,t)=>(v(),b("div",g6,[(v(!0),b(be,null,Ve(n.cards,s=>(v(),we(m6,{key:s.id,title:s.title,onClick:i=>e.$emit("navigate",s.section)},{default:Z(()=>[typeof s.content=="object"?(v(),we(Un(s.content),{key:0})):(v(),b("span",{key:1,innerHTML:s.content},null,8,v6))]),_:2},1032,["title","onClick"]))),128))]))}},y6={class:"pt-4 pb-2"},b6={class:"px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider dark:text-gray-400"},Xu={__name:"NavigationSectionHeading",setup(n){return(e,t)=>(v(),b("div",y6,[h("h3",b6,[ht(e.$slots,"default")])]))}},k6={class:"rounded-lg bg-gray-50 dark:bg-gray-800/50"},x6={class:"space-y-5"},Op={__name:"AuthorInformationPanel",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,s=e,i=Q({name:t.modelValue.name??"",email:t.modelValue.email??"",affiliation:t.modelValue.affiliation??""});je(()=>t.modelValue,o=>{i.value={name:o.name??"",email:o.email??"",affiliation:o.affiliation??""}},{deep:!0});const r=(o,l)=>{i.value[o]=l,s("update:modelValue",{...i.value})};return(o,l)=>(v(),b("div",k6,[l[3]||(l[3]=h("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-2"}," Author Information ",-1)),l[4]||(l[4]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-5"}," Used as defaults when creating notebook author settings and similar tasks. ",-1)),h("div",x6,[S(Ee,{"model-value":i.value.name,"onUpdate:modelValue":l[0]||(l[0]=a=>r("name",a)),label:"Your Name",placeholder:"Your Name"},null,8,["model-value"]),S(Ee,{"model-value":i.value.email,"onUpdate:modelValue":l[1]||(l[1]=a=>r("email",a)),type:"email",label:"Email",placeholder:"your.email@example.com"},null,8,["model-value"]),S(Ee,{"model-value":i.value.affiliation,"onUpdate:modelValue":l[2]||(l[2]=a=>r("affiliation",a)),label:"Affiliation",placeholder:"Organization"},null,8,["model-value"])])]))}},_6={class:"space-y-6"},w6={key:0,class:"space-y-3"},S6={class:"flex flex-col gap-3"},C6={class:"grid gap-3 grid-cols-[1fr_160px]"},A6={class:"flex items-center justify-between"},E6={key:1,class:"text-xs text-gray-500 dark:text-gray-400 mb-4"},T6={class:"mt-4"},Lp={__name:"PackagesEditor",props:{modelValue:{type:Object,required:!0},showRenvToggle:{type:Boolean,default:!0},flush:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,s=z(()=>t.flush?"":"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"),i=z(()=>t.flush?"":"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"),r=e,o=Q({use_renv:t.modelValue.use_renv??!1,default_packages:t.modelValue.default_packages??[]});je(()=>t.modelValue,g=>{o.value={use_renv:g.use_renv??!1,default_packages:g.default_packages??[]}},{deep:!0});const l=()=>{r("update:modelValue",{...o.value})},a=g=>{o.value.use_renv=g,l()},u=(g,k)=>{o.value.default_packages[g].name=k,l()},c=(g,k)=>{o.value.default_packages[g].source=k,l()},d=(g,k)=>{o.value.default_packages[g].auto_attach=k,l()},f=()=>{o.value.default_packages.push({name:"",source:"cran",auto_attach:!0}),l()},p=g=>{o.value.default_packages.splice(g,1),l()};return(g,k)=>(v(),b("div",_6,[n.showRenvToggle?(v(),b("div",{key:0,class:Se(s.value)},[S(Qe,{"model-value":o.value.use_renv,"onUpdate:modelValue":a,label:"Enable renv",description:"Create renv environments for new projects."},null,8,["model-value"])],2)):H("",!0),h("div",{class:Se(i.value)},[k[3]||(k[3]=h("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-2"}," Default packages ",-1)),k[4]||(k[4]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Installed (and optionally attached) when scaffold() runs. ",-1)),k[5]||(k[5]=h("p",{class:"text-xs text-gray-600 dark:text-gray-400 mb-4"}," Use this list to preseed notebooks with your preferred helpers. ",-1)),o.value.default_packages&&o.value.default_packages.length?(v(),b("div",w6,[(v(!0),b(be,null,Ve(o.value.default_packages,(x,m)=>(v(),b("div",{key:`pkg-${m}`,class:"rounded-md border border-gray-200 p-4 dark:border-gray-700"},[h("div",S6,[h("div",C6,[x.source==="cran"||x.source==="bioconductor"?(v(),we(c6,{key:0,"model-value":x.name,"onUpdate:modelValue":_=>u(m,_),source:x.source,label:"Package",placeholder:x.source==="cran"?"Search CRAN...":"Search Bioconductor...",onSelect:_=>u(m,_.name)},null,8,["model-value","onUpdate:modelValue","source","placeholder","onSelect"])):(v(),we(Ee,{key:1,"model-value":x.name,"onUpdate:modelValue":_=>u(m,_),label:"Package",placeholder:"user/repo"},null,8,["model-value","onUpdate:modelValue"])),S(bn,{"model-value":x.source,"onUpdate:modelValue":_=>c(m,_),label:"Source"},{default:Z(()=>[...k[0]||(k[0]=[h("option",{value:"cran"},"CRAN",-1),h("option",{value:"github"},"GitHub",-1),h("option",{value:"bioconductor"},"Bioconductor",-1)])]),_:1},8,["model-value","onUpdate:modelValue"])]),h("div",A6,[S(Qe,{"model-value":x.auto_attach,"onUpdate:modelValue":_=>d(m,_),label:"Auto-Attach",description:"Call library() when scaffold() runs."},null,8,["model-value","onUpdate:modelValue"]),S(Ye,{size:"sm",variant:"secondary",onClick:_=>p(m)},{default:Z(()=>[...k[1]||(k[1]=[ce("Remove",-1)])]),_:1},8,["onClick"])])])]))),128))])):(v(),b("p",E6," No packages configured. Add packages to include tidyverse helpers or internal utilities automatically. ")),h("div",T6,[S(Ye,{size:"sm",variant:"secondary",onClick:f},{default:Z(()=>[...k[2]||(k[2]=[ce("Add Package",-1)])]),_:1})])],2)]))}},D6={class:"space-y-6"},P6={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},R6={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},O6={class:"space-y-2"},L6={key:0,class:"pt-6 border-t border-gray-200 dark:border-gray-700"},M6={class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},I6={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-2"},Mp={__name:"AIAssistantsPanel",props:{modelValue:{type:Object,required:!0},flush:{type:Boolean,default:!1},showEditor:{type:Boolean,default:!0},editorHeight:{type:String,default:"500px"},editorDisabled:{type:Boolean,default:!1},editorLoading:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,s=e,i=Q(Math.random().toString(36).substring(7)),r=[{id:"claude",label:"Claude Code",description:"Anthropic's IDE-focused assistant."},{id:"copilot",label:"GitHub Copilot",description:"Complements VS Code and JetBrains editors."},{id:"agents",label:"Multi-Agent (OpenAI Codex, Cursor, etc.)",description:"Shared instructions for multi-model orchestrators."}],o=()=>({enabled:t.modelValue?.enabled??!1,canonical_file:t.modelValue?.canonical_file??"CLAUDE.md",assistants:Array.isArray(t.modelValue?.assistants)?t.modelValue.assistants:[],canonical_content:t.modelValue?.canonical_content??""}),l=z(()=>t.flush?"space-y-6":"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 space-y-6"),a=z(o),u=d=>{const f=o(),p=d.assistants!==void 0?d.assistants:f.assistants;s("update:modelValue",{...f,...d,assistants:p})},c=(d,f)=>{const p=[...a.value.assistants];if(f)p.includes(d)||p.push(d);else{const g=p.indexOf(d);g!==-1&&p.splice(g,1)}u({assistants:p})};return(d,f)=>(v(),b("div",{class:Se(l.value)},[h("div",D6,[h("div",null,[S(Qe,{"model-value":a.value.enabled,label:"Enable AI Support",description:"Generate and sync assistant-specific context files.","onUpdate:modelValue":f[0]||(f[0]=p=>u({enabled:p}))},null,8,["model-value"])]),a.value.enabled?(v(),b(be,{key:0},[h("div",P6,[f[4]||(f[4]=h("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Canonical context file",-1)),f[5]||(f[5]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," This file is the source of truth; other instructions files are synced to it when AI hooks run. ",-1)),S(bn,{"model-value":a.value.canonical_file,label:"Canonical Context File","onUpdate:modelValue":f[1]||(f[1]=p=>u({canonical_file:p}))},{default:Z(()=>[...f[3]||(f[3]=[h("option",{value:"AGENTS.md"},"AGENTS.md (multi-agent orchestrator)",-1),h("option",{value:"CLAUDE.md"},"CLAUDE.md",-1),h("option",{value:".github/copilot-instructions.md"},".github/copilot-instructions.md",-1)])]),_:1},8,["model-value"])]),h("div",R6,[f[6]||(f[6]=h("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Assistants",-1)),f[7]||(f[7]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Choose which assistants receive context updates. ",-1)),h("div",O6,[(v(),b(be,null,Ve(r,p=>S(ri,{key:p.id,id:`ai-${p.id}-${i.value}`,"model-value":a.value.assistants.includes(p.id),"onUpdate:modelValue":g=>c(p.id,g),description:p.description},{default:Z(()=>[ce(Y(p.label),1)]),_:2},1032,["id","model-value","onUpdate:modelValue","description"])),64))])]),n.showEditor?(v(),b("div",L6,[f[9]||(f[9]=h("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Canonical instructions",-1)),h("p",M6,[ht(d.$slots,"editor-description",{},()=>[f[8]||(f[8]=ce(" Edit the canonical file directly. Framework mirrors this content to other assistant files. ",-1))])]),ht(d.$slots,"editor-alert"),S(Lc,{"model-value":a.value.canonical_content,language:"markdown","min-height":n.editorHeight,disabled:n.editorDisabled,"onUpdate:modelValue":f[2]||(f[2]=p=>u({canonical_content:p}))},null,8,["model-value","min-height","disabled"]),ht(d.$slots,"editor-actions"),n.editorLoading?(v(),b("p",I6," Loading "+Y(a.value.canonical_file)+" ",1)):H("",!0)])):H("",!0)],64)):H("",!0)])],2))}},j6={class:"space-y-3"},V6={class:"grid gap-4 sm:grid-cols-2"},$6={class:"space-y-3"},N6={class:"grid gap-4 sm:grid-cols-2"},B6={class:"space-y-3"},F6={class:"space-y-4"},U6={class:"text-xs text-gray-500 dark:text-gray-400"},Ip={__name:"GitHooksPanel",props:{modelValue:{type:Object,required:!0},flush:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,s=e,i=()=>({initialize:t.modelValue?.initialize??!0,user_name:t.modelValue?.user_name??"",user_email:t.modelValue?.user_email??"",github_username:t.modelValue?.github_username??"",github_email:t.modelValue?.github_email??"",hooks:{ai_sync:t.modelValue?.hooks?.ai_sync??!1,data_security:t.modelValue?.hooks?.data_security??!1,check_sensitive_dirs:t.modelValue?.hooks?.check_sensitive_dirs??!1}}),r=z(()=>t.flush?"space-y-6":"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 space-y-6"),o=z(i),l=u=>{const c=i(),d={...c.hooks,...u?.hooks||{}};s("update:modelValue",{...c,...u,hooks:d})},a=(u,c)=>{l({hooks:{[u]:c}})};return(u,c)=>(v(),b("div",{class:Se(r.value)},[S(Qe,{"model-value":o.value.initialize,label:"Initialize Git",description:"Run git init for every new project.","onUpdate:modelValue":c[0]||(c[0]=d=>l({initialize:d}))},null,8,["model-value"]),h("div",j6,[c[8]||(c[8]=h("div",null,[h("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"GitHub"),h("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Your GitHub identity for commits and repository operations. ")],-1)),h("div",V6,[S(Ee,{"model-value":o.value.github_username,label:"GitHub Username",placeholder:"username","onUpdate:modelValue":c[1]||(c[1]=d=>l({github_username:d}))},null,8,["model-value"]),S(Ee,{"model-value":o.value.github_email,label:"GitHub Email",placeholder:"username@users.noreply.github.com",hint:"For git commits (often different from primary email)","onUpdate:modelValue":c[2]||(c[2]=d=>l({github_email:d}))},null,8,["model-value"])])]),h("div",$6,[c[9]||(c[9]=h("div",null,[h("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"Git Identity Override"),h("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Optional: Override GitHub settings with different values for local commits. ")],-1)),h("div",N6,[S(Ee,{"model-value":o.value.user_name,label:"Git Name",placeholder:"Jane Analyst",disabled:!o.value.initialize,"onUpdate:modelValue":c[3]||(c[3]=d=>l({user_name:d}))},null,8,["model-value","disabled"]),S(Ee,{"model-value":o.value.user_email,label:"Git Email",placeholder:"jane@example.com",hint:"Used for git config user.email during project setup.",disabled:!o.value.initialize,"onUpdate:modelValue":c[4]||(c[4]=d=>l({user_email:d}))},null,8,["model-value","disabled"])])]),h("div",B6,[c[11]||(c[11]=h("div",null,[h("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"Git Hooks"),h("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Pre-commit hooks that run automatically before each commit. ")],-1)),h("div",F6,[S(Qe,{"model-value":o.value.hooks.ai_sync,label:"Sync AI Files Before Commit",description:"Update non-canonical files so assistants share the same instructions.",disabled:!o.value.initialize,"onUpdate:modelValue":c[5]||(c[5]=d=>a("ai_sync",d))},null,8,["model-value","disabled"]),S(Qe,{"model-value":o.value.hooks.data_security,label:"Check for Secrets",description:"Run a lightweight scan for API keys and credentials before commits.",disabled:!o.value.initialize,"onUpdate:modelValue":c[6]||(c[6]=d=>a("data_security",d))},null,8,["model-value","disabled"]),S(Qe,{"model-value":o.value.hooks.check_sensitive_dirs,label:"Warn About Unignored Sensitive Directories",description:"Block commits if directories with sensitive names aren't gitignored.",disabled:!o.value.initialize,"onUpdate:modelValue":c[7]||(c[7]=d=>a("check_sensitive_dirs",d))},null,8,["model-value","disabled"])]),h("p",U6,[ht(u.$slots,"note",{},()=>[c[10]||(c[10]=ce(" Project-specific .gitignore templates can be customized in Project Defaults. ",-1))])])])],2))}},z6={class:"space-y-5"},jp={__name:"ScaffoldBehaviorPanel",props:{modelValue:{type:Object,required:!0},flush:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,s=e,i=(u,c="")=>u==null?c:typeof u=="number"||typeof u=="string"?String(u):c,r=()=>({source_all_functions:t.modelValue?.source_all_functions??!0,set_theme_on_scaffold:t.modelValue?.set_theme_on_scaffold??!1,ggplot_theme:t.modelValue?.ggplot_theme??"theme_minimal",seed_on_scaffold:t.modelValue?.seed_on_scaffold??!1,seed:i(t.modelValue?.seed,"123")}),o=z(r),l=z(()=>t.flush?"space-y-5":"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 space-y-5"),a=u=>{const c=r();s("update:modelValue",{...c,...u})};return(u,c)=>(v(),b("div",{class:Se(l.value)},[h("div",z6,[h("div",null,[c[5]||(c[5]=h("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Auto-Load Functions",-1)),S(Qe,{"model-value":o.value.source_all_functions,label:"Source all R files from functions/ directory",description:"Automatically loads all helper functions when scaffold() runs","onUpdate:modelValue":c[0]||(c[0]=d=>a({source_all_functions:d}))},null,8,["model-value"])]),h("div",null,[c[7]||(c[7]=h("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"ggplot2 Theme",-1)),S(Qe,{"model-value":o.value.set_theme_on_scaffold,label:"Set ggplot2 theme when scaffold() runs",description:"Automatically sets ggplot2 theme for consistent plot styling","onUpdate:modelValue":c[1]||(c[1]=d=>a({set_theme_on_scaffold:d}))},null,8,["model-value"]),o.value.set_theme_on_scaffold?(v(),we(bn,{key:0,"model-value":o.value.ggplot_theme,label:"Theme",class:"mt-4","onUpdate:modelValue":c[2]||(c[2]=d=>a({ggplot_theme:d}))},{default:Z(()=>[...c[6]||(c[6]=[h("option",{value:""},"None",-1),h("option",{value:"theme_minimal"},"Minimal",-1),h("option",{value:"theme_bw"},"Black & White",-1),h("option",{value:"theme_classic"},"Classic",-1),h("option",{value:"theme_gray"},"Gray (default)",-1),h("option",{value:"theme_light"},"Light",-1),h("option",{value:"theme_dark"},"Dark",-1),h("option",{value:"theme_void"},"Void",-1)])]),_:1},8,["model-value"])):H("",!0)]),h("div",null,[c[8]||(c[8]=h("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Random Seed",-1)),S(Qe,{"model-value":o.value.seed_on_scaffold,label:"Set random seed when scaffold() runs",description:"Ensures deterministic behavior for reproducibility","onUpdate:modelValue":c[3]||(c[3]=d=>a({seed_on_scaffold:d}))},null,8,["model-value"]),o.value.seed_on_scaffold?(v(),we(Ee,{key:0,"model-value":o.value.seed,label:"Seed Value",placeholder:"e.g., 1234 or 20241107",hint:"Leave empty to use global default",class:"mt-4","onUpdate:modelValue":c[4]||(c[4]=d=>a({seed:d}))},null,8,["model-value"])):H("",!0)])])],2))}},H6={class:"space-y-6"},W6={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},q6={class:"mb-4 rounded-md border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900 p-4"},G6={class:"flex items-center justify-between mb-3"},K6={class:"flex items-center gap-2"},J6={class:"space-y-3"},Q6={class:"grid grid-cols-2 gap-3"},Y6={class:"flex items-center gap-2"},X6=["id","checked","onChange"],Z6=["for"],ej={key:0},tj={key:1,class:"space-y-3"},nj={class:"grid grid-cols-2 gap-3"},sj={class:"grid grid-cols-2 gap-3"},ij={class:"grid grid-cols-2 gap-3"},rj={key:2,class:"space-y-3"},oj={class:"grid grid-cols-2 gap-3"},lj={class:"grid grid-cols-2 gap-3"},aj={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},uj={class:"space-y-3"},cj={class:"flex items-center gap-2"},dj=["id","checked","onChange"],fj=["for"],hj={class:"grid grid-cols-2 gap-3"},pj={class:"grid grid-cols-2 gap-3"},Vp={__name:"ConnectionsPanel",props:{databaseConnections:{type:Array,required:!0},s3Connections:{type:Array,required:!0},defaultDatabase:{type:String,default:null},defaultStorageBucket:{type:String,default:null}},emits:["update:databaseConnections","update:s3Connections","update:defaultDatabase","update:defaultStorageBucket"],setup(n){const e=n,t=(l,a)=>!l||l.trim()===""?"Connection name is required":l==="framework_db"?"framework_db is reserved for system use":e.databaseConnections.findIndex((d,f)=>f!==a&&d.name===l)!==-1?"Connection name must be unique":e.s3Connections.findIndex(d=>d.name===l)!==-1?"Connection name must be unique across all connections":null,s=(l,a)=>!l||l.trim()===""?"Connection name is required":l==="framework_db"?"framework_db is reserved for system use":e.s3Connections.findIndex((d,f)=>f!==a&&d.name===l)!==-1?"Connection name must be unique":e.databaseConnections.findIndex(d=>d.name===l)!==-1?"Connection name must be unique across all connections":null,i=(l,a)=>{let u=1,c=l;for(;a.includes(c)||c==="framework_db";)u+=1,c=`${l}_${u}`;return c},r=()=>{const l=e.databaseConnections.map(f=>f.name);let a="postgres",u="database";l.some(f=>f.startsWith("postgres"))?l.some(f=>f.startsWith("mysql"))?l.some(f=>f.startsWith("sqlserver"))||(a="sqlserver",u="sqlserver"):(a="mysql",u="mysql"):(a="postgres",u="postgres");const c=i(u,l),d={_id:Date.now(),name:c,driver:a};return a==="postgres"?{...d,host:'env("POSTGRES_HOST", "localhost")',port:'env("POSTGRES_PORT", "5432")',database:'env("POSTGRES_DB", "mydb")',schema:'env("POSTGRES_SCHEMA", "public")',user:'env("POSTGRES_USER", "postgres")',password:'env("POSTGRES_PASSWORD", "")'}:a==="mysql"?{...d,host:'env("MYSQL_HOST", "localhost")',port:'env("MYSQL_PORT", "3306")',database:'env("MYSQL_DB", "mydb")',user:'env("MYSQL_USER", "root")',password:'env("MYSQL_PASSWORD", "")'}:a==="sqlserver"?{...d,host:'env("SQLSERVER_HOST", "localhost")',port:'env("SQLSERVER_PORT", "1433")',database:'env("SQLSERVER_DB", "mydb")',user:'env("SQLSERVER_USER", "sa")',password:'env("SQLSERVER_PASSWORD", "")'}:d},o=()=>({_id:Date.now(),name:i("s3_bucket",e.s3Connections.map(l=>l.name)),bucket:'env("S3_BUCKET", "my-bucket")',region:'env("S3_REGION", "us-east-1")',endpoint:'env("S3_ENDPOINT", "")',access_key:'env("S3_ACCESS_KEY", "")',secret_key:'env("S3_SECRET_KEY", "")',static_hosting:!1});return(l,a)=>(v(),b("div",H6,[h("div",W6,[a[7]||(a[7]=h("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Databases",-1)),h("div",q6,[h("div",G6,[h("div",K6,[S(co,{variant:"gray",size:"sm"},{default:Z(()=>[...a[2]||(a[2]=[ce("System",-1)])]),_:1}),a[3]||(a[3]=h("span",{class:"text-sm font-medium text-gray-900 dark:text-gray-100 font-mono"},"framework_db",-1))]),a[4]||(a[4]=h("span",{class:"text-xs text-gray-500 dark:text-gray-400"},"SQLite - Framework metadata",-1))]),a[5]||(a[5]=h("div",{class:"text-sm text-gray-600 dark:text-gray-400 font-mono"}," framework.db ",-1))]),S(dr,{"model-value":n.databaseConnections,"onUpdate:modelValue":a[0]||(a[0]=u=>l.$emit("update:databaseConnections",u)),"add-label":"Add Database","default-item":r},{default:Z(({item:u,index:c,update:d})=>[h("div",J6,[h("div",Q6,[S(Ee,{"model-value":u.name,"onUpdate:modelValue":f=>d("name",f),label:"Connection Name",error:t(u.name,c),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),S(bn,{"model-value":u.driver,"onUpdate:modelValue":f=>d("driver",f),label:"Driver",size:"sm"},{default:Z(()=>[...a[6]||(a[6]=[h("option",{value:"sqlite"},"SQLite",-1),h("option",{value:"postgres"},"PostgreSQL",-1),h("option",{value:"mysql"},"MySQL",-1),h("option",{value:"sqlserver"},"SQL Server",-1)])]),_:1},8,["model-value","onUpdate:modelValue"])]),h("div",Y6,[h("input",{type:"radio",id:`default-db-${u._id}`,checked:n.defaultDatabase===u.name,onChange:f=>l.$emit("update:defaultDatabase",u.name),class:"h-4 w-4 text-sky-600 focus:ring-sky-500"},null,40,X6),h("label",{for:`default-db-${u._id}`,class:"text-sm text-gray-700 dark:text-gray-300"}," Default database ",8,Z6)]),u.driver==="sqlite"?(v(),b("div",ej,[S(Ee,{"model-value":u.database,"onUpdate:modelValue":f=>d("database",f),label:"Database Path",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])):u.driver==="postgres"||u.driver==="postgresql"?(v(),b("div",tj,[h("div",nj,[S(Ee,{"model-value":u.host,"onUpdate:modelValue":f=>d("host",f),label:"Host",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),S(Ee,{"model-value":u.port,"onUpdate:modelValue":f=>d("port",f),label:"Port",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])]),h("div",sj,[S(Ee,{"model-value":u.database,"onUpdate:modelValue":f=>d("database",f),label:"Database",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),S(Ee,{"model-value":u.schema,"onUpdate:modelValue":f=>d("schema",f),label:"Schema",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])]),h("div",ij,[S(Ee,{"model-value":u.user,"onUpdate:modelValue":f=>d("user",f),label:"User",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),S(Ee,{"model-value":u.password,"onUpdate:modelValue":f=>d("password",f),label:"Password",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])])):u.driver==="mysql"||u.driver==="sqlserver"?(v(),b("div",rj,[h("div",oj,[S(Ee,{"model-value":u.host,"onUpdate:modelValue":f=>d("host",f),label:"Host",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),S(Ee,{"model-value":u.port,"onUpdate:modelValue":f=>d("port",f),label:"Port",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])]),S(Ee,{"model-value":u.database,"onUpdate:modelValue":f=>d("database",f),label:"Database",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),h("div",lj,[S(Ee,{"model-value":u.user,"onUpdate:modelValue":f=>d("user",f),label:"User",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),S(Ee,{"model-value":u.password,"onUpdate:modelValue":f=>d("password",f),label:"Password",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])])):H("",!0)])]),_:1},8,["model-value"])]),h("div",aj,[a[9]||(a[9]=h("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"S3-compatible Storage",-1)),S(dr,{"model-value":n.s3Connections,"onUpdate:modelValue":a[1]||(a[1]=u=>l.$emit("update:s3Connections",u)),"add-label":"Add Bucket","default-item":o},{default:Z(({item:u,index:c,update:d})=>[h("div",uj,[S(Ee,{"model-value":u.name,"onUpdate:modelValue":f=>d("name",f),label:"Connection Name",error:s(u.name,c),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),h("div",cj,[h("input",{type:"radio",id:`default-s3-${u._id}`,checked:n.defaultStorageBucket===u.name,onChange:f=>l.$emit("update:defaultStorageBucket",u.name),class:"h-4 w-4 text-sky-600 focus:ring-sky-500"},null,40,dj),h("label",{for:`default-s3-${u._id}`,class:"text-sm text-gray-700 dark:text-gray-300"}," Default storage bucket ",8,fj)]),h("div",hj,[S(Ee,{"model-value":u.bucket,"onUpdate:modelValue":f=>d("bucket",f),label:"Bucket",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),S(Ee,{"model-value":u.region,"onUpdate:modelValue":f=>d("region",f),label:"Region",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])]),h("div",pj,[S(Ee,{"model-value":u.access_key,"onUpdate:modelValue":f=>d("access_key",f),label:"Access Key",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),S(Ee,{"model-value":u.secret_key,"onUpdate:modelValue":f=>d("secret_key",f),label:"Secret Key",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])]),S(Ee,{"model-value":u.endpoint,"onUpdate:modelValue":f=>d("endpoint",f),label:"Endpoint",hint:"Leave empty for AWS S3, or specify custom endpoint for MinIO, etc.",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),S(ri,{"model-value":u.static_hosting,"onUpdate:modelValue":f=>d("static_hosting",f),id:"static-hosting",description:"Enable for S3 static website hosting, R2 public buckets, or CDN-fronted storage. Allows clean URLs like /report/ instead of /report.html"},{default:Z(()=>[...a[8]||(a[8]=[ce(" Static website hosting ",-1)])]),_:1},8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value"])])]))}},mj={class:"space-y-6"},gj={class:"space-y-4"},vj={class:"space-y-4"},$p={__name:"QuartoSettingsPanel",props:{modelValue:{type:Object,required:!0},flush:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,s=e,i=z(()=>t.flush?"":"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"),r=Q({html:{format:"html",embed_resources:t.modelValue.html?.embed_resources??!0,theme:t.modelValue.html?.theme??"default",toc:t.modelValue.html?.toc??!0,toc_depth:t.modelValue.html?.toc_depth??3,code_fold:t.modelValue.html?.code_fold??!1,code_tools:t.modelValue.html?.code_tools??!1,highlight_style:t.modelValue.html?.highlight_style??"github"},revealjs:{format:"revealjs",theme:t.modelValue.revealjs?.theme??"default",incremental:t.modelValue.revealjs?.incremental??!1,slide_number:t.modelValue.revealjs?.slide_number??!0,transition:t.modelValue.revealjs?.transition??"slide",background_transition:t.modelValue.revealjs?.background_transition??"fade",controls:t.modelValue.revealjs?.controls??!0,progress:t.modelValue.revealjs?.progress??!0,center:t.modelValue.revealjs?.center??!0,highlight_style:t.modelValue.revealjs?.highlight_style??"github"}});je(()=>t.modelValue,l=>{r.value={html:{format:"html",embed_resources:l.html?.embed_resources??!0,theme:l.html?.theme??"default",toc:l.html?.toc??!0,toc_depth:l.html?.toc_depth??3,code_fold:l.html?.code_fold??!1,code_tools:l.html?.code_tools??!1,highlight_style:l.html?.highlight_style??"github"},revealjs:{format:"revealjs",theme:l.revealjs?.theme??"default",incremental:l.revealjs?.incremental??!1,slide_number:l.revealjs?.slide_number??!0,transition:l.revealjs?.transition??"slide",background_transition:l.revealjs?.background_transition??"fade",controls:l.revealjs?.controls??!0,progress:l.revealjs?.progress??!0,center:l.revealjs?.center??!0,highlight_style:l.revealjs?.highlight_style??"github"}}},{deep:!0});const o=(l,a,u)=>{r.value[l][a]=u,s("update:modelValue",{...r.value})};return(l,a)=>(v(),b("div",mj,[h("div",{class:Se(i.value)},[a[18]||(a[18]=h("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-2"}," HTML Rendering ",-1)),a[19]||(a[19]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Default settings for HTML documents (notebooks, documentation). ",-1)),h("div",gj,[S(bn,{"model-value":r.value.html.theme,"onUpdate:modelValue":a[0]||(a[0]=u=>o("html","theme",u)),label:"Theme"},{default:Z(()=>[...a[16]||(a[16]=[h("option",{value:"default"},"Default",-1),h("option",{value:"cosmo"},"Cosmo",-1),h("option",{value:"cerulean"},"Cerulean",-1),h("option",{value:"flatly"},"Flatly",-1),h("option",{value:"journal"},"Journal",-1),h("option",{value:"lumen"},"Lumen",-1),h("option",{value:"minty"},"Minty",-1),h("option",{value:"pulse"},"Pulse",-1),h("option",{value:"sandstone"},"Sandstone",-1),h("option",{value:"simplex"},"Simplex",-1),h("option",{value:"sketchy"},"Sketchy",-1),h("option",{value:"slate"},"Slate",-1),h("option",{value:"solar"},"Solar",-1),h("option",{value:"spacelab"},"Spacelab",-1),h("option",{value:"superhero"},"Superhero",-1),h("option",{value:"united"},"United",-1),h("option",{value:"yeti"},"Yeti",-1)])]),_:1},8,["model-value"]),S(Qe,{"model-value":r.value.html.embed_resources,"onUpdate:modelValue":a[1]||(a[1]=u=>o("html","embed_resources",u)),label:"Embed resources",description:"Produce standalone HTML files with all dependencies and resources embedded."},null,8,["model-value"]),S(Qe,{"model-value":r.value.html.toc,"onUpdate:modelValue":a[2]||(a[2]=u=>o("html","toc",u)),label:"Table of contents",description:"Generate a table of contents sidebar."},null,8,["model-value"]),S(Ee,{type:"number","model-value":r.value.html.toc_depth,"onUpdate:modelValue":a[3]||(a[3]=u=>o("html","toc_depth",parseInt(u)||3)),label:"TOC depth",min:"1",max:"5"},null,8,["model-value"]),S(Qe,{"model-value":r.value.html.code_fold,"onUpdate:modelValue":a[4]||(a[4]=u=>o("html","code_fold",u)),label:"Code folding",description:"Allow readers to collapse/expand code blocks."},null,8,["model-value"]),S(Qe,{"model-value":r.value.html.code_tools,"onUpdate:modelValue":a[5]||(a[5]=u=>o("html","code_tools",u)),label:"Code tools",description:"Provide code download and viewing options."},null,8,["model-value"]),S(bn,{"model-value":r.value.html.highlight_style,"onUpdate:modelValue":a[6]||(a[6]=u=>o("html","highlight_style",u)),label:"Syntax highlighting"},{default:Z(()=>[...a[17]||(a[17]=[h("option",{value:"github"},"GitHub",-1),h("option",{value:"tango"},"Tango",-1),h("option",{value:"pygments"},"Pygments",-1),h("option",{value:"kate"},"Kate",-1),h("option",{value:"monochrome"},"Monochrome",-1),h("option",{value:"espresso"},"Espresso",-1),h("option",{value:"zenburn"},"Zenburn",-1),h("option",{value:"haddock"},"Haddock",-1),h("option",{value:"breezedark"},"Breeze Dark",-1)])]),_:1},8,["model-value"])])],2),h("div",{class:Se(i.value)},[a[24]||(a[24]=h("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-2"}," Presentations (revealjs) ",-1)),a[25]||(a[25]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Default settings for slide presentations. ",-1)),h("div",vj,[S(bn,{"model-value":r.value.revealjs.theme,"onUpdate:modelValue":a[7]||(a[7]=u=>o("revealjs","theme",u)),label:"Theme"},{default:Z(()=>[...a[20]||(a[20]=[h("option",{value:"default"},"Default",-1),h("option",{value:"beige"},"Beige",-1),h("option",{value:"black"},"Black",-1),h("option",{value:"blood"},"Blood",-1),h("option",{value:"league"},"League",-1),h("option",{value:"moon"},"Moon",-1),h("option",{value:"night"},"Night",-1),h("option",{value:"serif"},"Serif",-1),h("option",{value:"simple"},"Simple",-1),h("option",{value:"sky"},"Sky",-1),h("option",{value:"solarized"},"Solarized",-1),h("option",{value:"white"},"White",-1)])]),_:1},8,["model-value"]),S(Qe,{"model-value":r.value.revealjs.incremental,"onUpdate:modelValue":a[8]||(a[8]=u=>o("revealjs","incremental",u)),label:"Incremental bullets",description:"Reveal list items one at a time."},null,8,["model-value"]),S(Qe,{"model-value":r.value.revealjs.slide_number,"onUpdate:modelValue":a[9]||(a[9]=u=>o("revealjs","slide_number",u)),label:"Slide numbers",description:"Show slide numbers in the corner."},null,8,["model-value"]),S(Qe,{"model-value":r.value.revealjs.controls,"onUpdate:modelValue":a[10]||(a[10]=u=>o("revealjs","controls",u)),label:"Navigation controls",description:"Show arrow controls for navigation."},null,8,["model-value"]),S(Qe,{"model-value":r.value.revealjs.progress,"onUpdate:modelValue":a[11]||(a[11]=u=>o("revealjs","progress",u)),label:"Progress bar",description:"Show progress bar at the bottom."},null,8,["model-value"]),S(Qe,{"model-value":r.value.revealjs.center,"onUpdate:modelValue":a[12]||(a[12]=u=>o("revealjs","center",u)),label:"Center slides",description:"Vertically center slide content."},null,8,["model-value"]),S(bn,{"model-value":r.value.revealjs.transition,"onUpdate:modelValue":a[13]||(a[13]=u=>o("revealjs","transition",u)),label:"Slide transition"},{default:Z(()=>[...a[21]||(a[21]=[h("option",{value:"none"},"None",-1),h("option",{value:"fade"},"Fade",-1),h("option",{value:"slide"},"Slide",-1),h("option",{value:"convex"},"Convex",-1),h("option",{value:"concave"},"Concave",-1),h("option",{value:"zoom"},"Zoom",-1)])]),_:1},8,["model-value"]),S(bn,{"model-value":r.value.revealjs.background_transition,"onUpdate:modelValue":a[14]||(a[14]=u=>o("revealjs","background_transition",u)),label:"Background transition"},{default:Z(()=>[...a[22]||(a[22]=[h("option",{value:"none"},"None",-1),h("option",{value:"fade"},"Fade",-1),h("option",{value:"slide"},"Slide",-1),h("option",{value:"convex"},"Convex",-1),h("option",{value:"concave"},"Concave",-1),h("option",{value:"zoom"},"Zoom",-1)])]),_:1},8,["model-value"]),S(bn,{"model-value":r.value.revealjs.highlight_style,"onUpdate:modelValue":a[15]||(a[15]=u=>o("revealjs","highlight_style",u)),label:"Syntax highlighting"},{default:Z(()=>[...a[23]||(a[23]=[h("option",{value:"github"},"GitHub",-1),h("option",{value:"tango"},"Tango",-1),h("option",{value:"pygments"},"Pygments",-1),h("option",{value:"kate"},"Kate",-1),h("option",{value:"monochrome"},"Monochrome",-1),h("option",{value:"espresso"},"Espresso",-1),h("option",{value:"zenburn"},"Zenburn",-1),h("option",{value:"haddock"},"Haddock",-1),h("option",{value:"breezedark"},"Breeze Dark",-1)])]),_:1},8,["model-value"])])],2)]))}},yj={key:0,class:"space-y-2"},bj={key:0,class:"text-lg font-semibold text-gray-900 dark:text-white"},kj={key:1,class:"text-sm text-gray-600 dark:text-gray-400"},xj={class:"space-y-6"},gn={__name:"SettingsPanel",props:{title:{type:String,default:""},description:{type:String,default:""},flush:{type:Boolean,default:!1}},setup(n){return(e,t)=>(v(),b("section",{class:Se(["space-y-6",n.flush?"":"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"])},[n.title||n.description?(v(),b("header",yj,[n.title?(v(),b("h2",bj,Y(n.title),1)):H("",!0),n.description?(v(),b("p",kj,Y(n.description),1)):H("",!0)])):H("",!0),h("div",xj,[ht(e.$slots,"default")]),e.$slots.actions?(v(),b("div",{key:1,class:Se(["flex justify-end",n.flush?"":"pt-4 border-t border-gray-200 dark:border-gray-700"])},[ht(e.$slots,"actions")],2)):H("",!0)],2))}},_j={class:"space-y-3"},wj={key:0,class:"space-y-1"},Sj={key:0,class:"text-sm font-semibold text-gray-900 dark:text-white"},Cj={key:1,class:"text-xs text-gray-600 dark:text-gray-400"},Aj={class:"space-y-3"},hh={__name:"SettingsBlock",props:{title:{type:String,default:""},description:{type:String,default:""}},setup(n){return(e,t)=>(v(),b("div",_j,[n.title||n.description?(v(),b("div",wj,[n.title?(v(),b("h3",Sj,Y(n.title),1)):H("",!0),n.description?(v(),b("p",Cj,Y(n.description),1)):H("",!0)])):H("",!0),h("div",Aj,[ht(e.$slots,"default")])]))}},Ej={class:"space-y-5"},Tj={key:0,class:"grid grid-cols-2 gap-3"},Dj={class:"space-y-1.5"},Pj={key:0,class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},Rj={class:"grid grid-cols-2 gap-3"},Oj={__name:"CourseDirectoriesPanel",props:{directoriesEnabled:{type:Object,required:!0},directories:{type:Object,required:!0},renderDirs:{type:Object,default:()=>({})},catalog:{type:Object,default:()=>({})},extraDirectoriesEnabled:{type:Object,default:()=>({})},extraDirectories:{type:Array,default:()=>[]},projectCustomDirectories:{type:Array,default:()=>[]},allowCustomDirectories:{type:Boolean,default:!1},flush:{type:Boolean,default:!1}},emits:["update:directoriesEnabled","update:directories","update:renderDirs","update:extraDirectoriesEnabled","update:projectCustomDirectories"],setup(n,{emit:e}){const t=n,s=e,i=Q(Math.random().toString(36).substring(7)),r=["slides","assignments","course_docs","notebooks"],o=["readings","data"],l=["functions","scripts"],a=z(()=>t.flush?"":"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"),u=A=>A in t.directoriesEnabled?t.directoriesEnabled[A]:t.catalog?.directories?.[A]?.enabled_by_default??!1,c=(A,w)=>{s("update:directoriesEnabled",{...t.directoriesEnabled,[A]:w})},d=A=>t.directories[A]||"",f=(A,w)=>{s("update:directories",{...t.directories,[A]:w})},p=A=>{const w=A==="notebooks"?"modules":A;return t.renderDirs[w]?t.renderDirs[w]:t.catalog?.render_dirs?.[w]?.default||""},g=(A,w)=>{const M=A==="notebooks"?"modules":A;s("update:renderDirs",{...t.renderDirs,[M]:w})},k=A=>{if(!t.catalog||typeof t.catalog!="object")return"";const w=A==="notebooks"?"modules":A;return(t.catalog.render_dirs||{})[w]?.default||`rendered/${w}`},x=A=>!t.catalog||typeof t.catalog!="object"?A.charAt(0).toUpperCase()+A.slice(1):(t.catalog.directories||{})[A]?.label||A.charAt(0).toUpperCase()+A.slice(1),m=A=>!t.catalog||typeof t.catalog!="object"?"":(t.catalog.directories||{})[A]?.hint||"",_=A=>!t.catalog||typeof t.catalog!="object"?A:(t.catalog.directories||{})[A]?.default||A,R=A=>t.extraDirectoriesEnabled[A]??!1,U=(A,w)=>{s("update:extraDirectoriesEnabled",{...t.extraDirectoriesEnabled,[A]:w})},N=(A,w)=>{console.warn("Extra directory paths are managed in global settings")};return(A,w)=>(v(),b("div",{class:Se(a.value)},[w[6]||(w[6]=h("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"},"Materials",-1)),w[7]||(w[7]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Slides, assignments, readings, and course documentation with automatic rendering to web-ready formats. ",-1)),h("div",Ej,[(v(),b(be,null,Ve(r,M=>h("div",{key:M},[S(Qe,{id:`course-${M}-${i.value}`,"model-value":u(M),"onUpdate:modelValue":G=>c(M,G),label:x(M),description:m(M),class:"mb-2"},null,8,["id","model-value","onUpdate:modelValue","label","description"]),u(M)?(v(),b("div",Tj,[S(Ee,{"model-value":d(M),"onUpdate:modelValue":G=>f(M,G),placeholder:_(M),label:"Source files",prefix:"/",monospace:""},null,8,["model-value","onUpdate:modelValue","placeholder"]),S(Ee,{"model-value":p(M),"onUpdate:modelValue":G=>g(M,G),placeholder:k(M),label:"Quarto render directory",prefix:"/",monospace:""},null,8,["model-value","onUpdate:modelValue","placeholder"])])):H("",!0)])),64)),(v(),b(be,null,Ve(o,M=>h("div",{key:M},[S(Qe,{id:`course-${M}-${i.value}`,"model-value":u(M),"onUpdate:modelValue":G=>c(M,G),label:x(M),description:m(M),class:"mb-2"},null,8,["id","model-value","onUpdate:modelValue","label","description"]),u(M)?(v(),we(Ee,{key:0,"model-value":d(M),"onUpdate:modelValue":G=>f(M,G),placeholder:_(M),prefix:"/",monospace:""},null,8,["model-value","onUpdate:modelValue","placeholder"])):H("",!0)])),64)),(v(),b(be,null,Ve(l,M=>h("div",{key:M},[S(Qe,{id:`course-${M}-${i.value}`,"model-value":u(M),"onUpdate:modelValue":G=>c(M,G),label:x(M),description:m(M),class:"mb-2"},null,8,["id","model-value","onUpdate:modelValue","label","description"]),u(M)?(v(),we(Ee,{key:0,"model-value":d(M),"onUpdate:modelValue":G=>f(M,G),placeholder:_(M),prefix:"/",monospace:""},null,8,["model-value","onUpdate:modelValue","placeholder"])):H("",!0)])),64)),h("div",Dj,[w[2]||(w[2]=h("label",{class:"block text-sm font-medium text-gray-900 dark:text-white"},"Cache",-1)),w[3]||(w[3]=h("p",{class:"text-xs text-gray-500 dark:text-gray-400 mb-1.5"},"Temporary artifacts (gitignored). Created automatically on first use.",-1)),S(Ee,{"model-value":d("cache"),"onUpdate:modelValue":w[0]||(w[0]=M=>f("cache",M)),placeholder:_("cache"),prefix:"/",monospace:""},null,8,["model-value","placeholder"])]),(v(!0),b(be,null,Ve(n.extraDirectories,M=>(v(),b("div",{key:`extra-${M.key}`,class:"space-y-1.5"},[S(Qe,{id:`extra-course-${M.key}-${i.value}`,"model-value":R(M.key),"onUpdate:modelValue":G=>U(M.key,G),label:M.label,description:`Custom: ${M.path}`,class:"mb-2"},null,8,["id","model-value","onUpdate:modelValue","label","description"]),R(M.key)?(v(),we(Ee,{key:0,"model-value":M.path,"onUpdate:modelValue":G=>N(M.key),placeholder:M.path,prefix:"/",monospace:"",readonly:""},null,8,["model-value","onUpdate:modelValue","placeholder"])):H("",!0)]))),128))]),n.allowCustomDirectories?(v(),b("div",Pj,[w[4]||(w[4]=h("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"}," Add Custom Course Directories ",-1)),w[5]||(w[5]=h("p",{class:"text-xs text-gray-600 dark:text-gray-400 mb-3"}," Add directories specific to this course only. ",-1)),S(dr,{"model-value":n.projectCustomDirectories,"onUpdate:modelValue":w[1]||(w[1]=M=>A.$emit("update:projectCustomDirectories",M)),"add-label":"Add Course Directory","default-item":()=>({key:"",label:"",path:"",type:"course",_id:Date.now()})},{default:Z(({item:M,index:G,update:ue})=>[h("div",Rj,[S(Ee,{"model-value":M.key,"onUpdate:modelValue":ie=>ue("key",ie),label:"Key",placeholder:"e.g., course_videos",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),S(Ee,{"model-value":M.label,"onUpdate:modelValue":ie=>ue("label",ie),label:"Label",placeholder:"e.g., Videos",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),S(Ee,{"model-value":M.path,"onUpdate:modelValue":ie=>ue("path",ie),label:"Path",placeholder:"e.g., videos",prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])):H("",!0)],2))}},Lj={class:"space-y-6"},Mj={class:"space-y-5"},Ij=["value"],jj={class:"flex flex-wrap items-center justify-between gap-3"},Vj={class:"flex flex-wrap gap-2 text-xs font-medium text-gray-600 dark:text-gray-400"},$j={key:1,id:"section-primary-files"},Nj={class:"space-y-4"},Bj={key:2,id:"section-optional-directories"},Fj={class:"space-y-4"},Uj={class:"space-y-2"},zj={class:"space-y-2"},Hj={class:"space-y-2"},Wj={class:"space-y-1.5"},qj={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},Gj={key:0,class:"space-y-3 mb-4"},Kj={class:"space-y-3"},Jj={key:3,id:"section-materials"},Qj={key:4,id:"section-inputs"},Yj={key:0},Xj={class:"space-y-5"},Zj={key:0,class:"text-sm text-gray-500 dark:text-gray-400 mb-2"},eV={class:"grid gap-4 sm:grid-cols-2"},tV={class:"space-y-2"},nV={class:"space-y-2"},sV={key:1,class:"space-y-5"},iV={key:2,class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},rV={key:0,class:"space-y-3 mb-4"},oV={class:"space-y-3"},lV={key:5,id:"section-workspaces"},aV={class:"space-y-5"},uV={key:0,class:"grid grid-cols-2 gap-3"},cV={key:0,class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},dV={key:0,class:"space-y-3 mb-4"},fV={class:"space-y-3"},hV={key:6,id:"section-outputs"},pV={key:0},mV={class:"space-y-5"},gV={key:0,class:"text-sm text-gray-500 dark:text-gray-400 mb-2"},vV={class:"grid gap-4 sm:grid-cols-2"},yV={class:"space-y-2"},bV={class:"space-y-2"},kV={key:1,class:"space-y-5"},xV={key:2,class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},_V={key:0,class:"space-y-3 mb-4"},wV={class:"space-y-3"},SV={key:7,id:"section-utility"},CV={class:"space-y-5"},AV={class:"space-y-1.5"},EV={id:"section-gitignore"},Np={__name:"ProjectStructureEditor",props:{projectType:{type:String,required:!0},directories:{type:Object,required:!0},renderDirs:{type:Object,default:()=>({})},enabled:{type:Object,required:!0},extraDirectories:{type:Array,default:()=>[]},settings:{type:Object,default:()=>({})},gitignore:{type:String,default:""},catalog:{type:Object,required:!0},newExtraIds:{type:Set,default:()=>new Set},disabled:{type:Boolean,default:!1},allowDestruction:{type:Boolean,default:!0}},emits:["update:directories","update:renderDirs","update:enabled","update:extraDirectories","update:settings","update:gitignore","update:newExtraIds","reset"],setup(n,{emit:e}){const t=n,s=e,i=Q({...t.directories}),r=Q({...t.renderDirs}),o=Q({...t.enabled}),l=Q({...t.settings}),a=Q(t.gitignore),u=te=>i.value[te]?i.value[te]:t.catalog?.directories?.[te]?.default||"",c=te=>r.value[te]?r.value[te]:t.catalog?.render_dirs?.[te]?.default||"";je(()=>t.directories,te=>{i.value={...te}},{deep:!0}),je(()=>t.renderDirs,te=>{r.value={...te}},{deep:!0}),je(()=>t.enabled,te=>{o.value={...te}},{deep:!0}),je(()=>t.settings,te=>{l.value={...te}},{deep:!0}),je(()=>t.gitignore,te=>{a.value=te}),je(()=>t.extraDirectories,te=>{if(te.some(E=>E.label&&!E.key)){const E=[...t.catalog?.directories?Object.keys(t.catalog.directories):[],...te.filter(D=>D.key).map(D=>D.key)],re=te.map(D=>{if(D.label&&!D.key){const $=Ce(D.label,E);return E.push($),console.log("[DEBUG] Auto-generated key:",{label:D.label,key:$}),{...D,key:$}}return D});s("update:extraDirectories",re)}},{deep:!0});const d=[{key:"notebooks",label:"Notebooks",hint:"Quarto or R Markdown notebooks for analysis.",defaultRenderDir:"outputs/notebooks"},{key:"docs",label:"Documentation",hint:"Codebooks, documentation, and other reference materials.",defaultRenderDir:"outputs/docs"}],f=[{key:"functions",label:"Functions",hint:"R files here are sourced by scaffold(), so helper functions are available in every project session."},{key:"scripts",label:"Scripts",hint:"Reusable R scripts, job runners, or automation tasks."}],p=[{key:"inputs_raw",label:"Raw data",hint:"Read-only exports from source systems."},{key:"inputs_intermediate",label:"Intermediate data",hint:"Data after light cleaning or pre-processing steps."},{key:"inputs_final",label:"Analysis-ready data",hint:"Final inputs ready for modeling or reporting."}],g=[{key:"outputs_tables",label:"Tables",hint:"Publishable tables ready for reports or manuscripts."},{key:"outputs_figures",label:"Figures",hint:"Final plots and graphics."},{key:"outputs_models",label:"Models",hint:"Serialized models or model summaries."},{key:"outputs_reports",label:"Reports",hint:"Final reports and deliverables ready for publication."}],k=[{key:"scratch",label:"Scratch",hint:"Short-lived explorations (gitignored)."}],x=te=>t.catalog?.directories?.[te]||{},m=te=>te.map(W=>{const E=x(W.key),re=t.catalog?.render_dirs?.[W.key]||{};return{key:W.key,label:E.label||W.label,hint:E.hint||W.hint||"",defaultRenderDir:re.default||W.defaultRenderDir||""}}),_=z(()=>t.projectType==="project_sensitive"),R=z(()=>t.projectType==="presentation"),U=z(()=>t.projectType==="course"),N=(te,W)=>te.map(E=>{const re=`${W}_private_${E.key.replace(W+"_","")}`,D=`${W}_public_${E.key.replace(W+"_","")}`,$=x(re),K=x(D);return{privateKey:re,publicKey:D,privateLabel:$.label||`${E.label} (private)`,publicLabel:K.label||`${E.label} (public)`,hint:E.hint||""}}),A=z(()=>m(d)),w=z(()=>m(f)),M=z(()=>[...A.value,...w.value]),G=z(()=>_.value?N(p,"inputs"):m(p)),ue=z(()=>_.value?N(g,"outputs"):m(g)),ie=z(()=>m(k)),F=z(()=>t.catalog?.settings||[]),ae=z(()=>t.extraDirectories.filter(te=>te.type==="input"&&!t.newExtraIds.has(te._id))),ee=z(()=>t.extraDirectories.filter(te=>te.type==="workspace"&&!t.newExtraIds.has(te._id))),V=z(()=>t.extraDirectories.filter(te=>te.type==="output"&&!t.newExtraIds.has(te._id))),J=z(()=>t.extraDirectories.filter(te=>te.type==="input"&&t.newExtraIds.has(te._id))),X=z(()=>t.extraDirectories.filter(te=>te.type==="workspace"&&t.newExtraIds.has(te._id))),de=z(()=>t.extraDirectories.filter(te=>te.type==="output"&&t.newExtraIds.has(te._id))),Ce=(te,W=[])=>{if(!te)return"";let E=te.toLowerCase().trim().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,"").replace(/_+/g,"_").replace(/^_|_$/g,""),re=E,D=2;for(;W.includes(re);)re=`${E}_${D}`,D++;return re},Te=(te,W)=>{i.value[te]=W,s("update:directories",{...i.value})},$e=(te,W)=>{r.value[te]=W,s("update:renderDirs",{...r.value})},me=(te,W)=>{!t.allowDestruction&&o.value[te]===!0&&W===!1||(o.value[te]=W,s("update:enabled",{...o.value}))},qe=te=>!!(t.disabled||!t.allowDestruction&&o.value[te]===!0),rt=(te,W)=>{l.value[te]=W,s("update:settings",{...l.value})},pt=(te,W)=>{const E=t.extraDirectories.map(re=>re.key===te?{...re,path:W}:re);s("update:extraDirectories",E)},ot=(te,W)=>{console.log("[DEBUG] updateNewExtras called:",{type:te,newItems:JSON.parse(JSON.stringify(W)),itemCount:W.length});const E=t.extraDirectories.filter(se=>se.type===te&&!t.newExtraIds.has(se._id)),D=t.extraDirectories.filter(se=>se.type===te&&t.newExtraIds.has(se._id)).filter(se=>!W.some(xe=>xe._id===se._id)),$=new Set(t.newExtraIds);D.forEach(se=>{se._id&&$.delete(se._id)}),W.forEach(se=>{se._id&&$.add(se._id)}),s("update:newExtraIds",$);const K={...o.value};let oe=!1;W.forEach(se=>{if(se.key){const xe=E.some(j=>j.key===se.key),L=t.catalog?.directories&&Object.keys(t.catalog.directories).includes(se.key);!K.hasOwnProperty(se.key)&&!xe&&!L&&(K[se.key]=!0,oe=!0)}}),oe&&s("update:enabled",K);const ne=t.extraDirectories.filter(se=>se.type!==te);s("update:extraDirectories",[...ne,...E,...W])},le=te=>{const W=document.getElementById(`section-${te}`);W&&W.scrollIntoView({behavior:"smooth",block:"start"})};return(te,W)=>(v(),b("div",Lj,[F.value.length>0?(v(),we(gn,{key:0,title:"Project Settings",description:"Default settings applied when creating new projects of this type."},{default:Z(()=>[S(hh,null,{default:Z(()=>[h("div",Mj,[(v(!0),b(be,null,Ve(F.value,E=>(v(),b(be,{key:E.id},[E.control==="toggle"?(v(),we(Qe,{key:0,"model-value":l.value[E.id],"onUpdate:modelValue":re=>rt(E.id,re),label:E.label,description:E.description,disabled:n.disabled},null,8,["model-value","onUpdate:modelValue","label","description","disabled"])):E.control==="select"?(v(),we(bn,{key:1,"model-value":l.value[E.id],"onUpdate:modelValue":re=>rt(E.id,re),label:E.label,hint:E.hint},{default:Z(()=>[(v(!0),b(be,null,Ve(E.options,re=>(v(),b("option",{key:re.value,value:re.value},Y(re.label),9,Ij))),128))]),_:2},1032,["model-value","onUpdate:modelValue","label","hint"])):E.control==="text"?(v(),we(Ee,{key:2,"model-value":l.value[E.id],"onUpdate:modelValue":re=>rt(E.id,re),label:E.label,hint:E.hint,placeholder:E.placeholder},null,8,["model-value","onUpdate:modelValue","label","hint","placeholder"])):H("",!0)],64))),128))])]),_:1})]),_:1})):H("",!0),h("div",jj,[h("div",Vj,[R.value?(v(),b("button",{key:0,type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:W[0]||(W[0]=E=>le("primary-files"))}," Primary Files ")):H("",!0),R.value?(v(),b("button",{key:1,type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:W[1]||(W[1]=E=>le("optional-directories"))}," Optional Directories ")):H("",!0),U.value?(v(),b("button",{key:2,type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:W[2]||(W[2]=E=>le("materials"))}," Materials ")):H("",!0),!R.value&&!U.value&&G.value.length>0?(v(),b("button",{key:3,type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:W[3]||(W[3]=E=>le("inputs"))}," Inputs ")):H("",!0),!R.value&&!U.value&&M.value.length>0?(v(),b("button",{key:4,type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:W[4]||(W[4]=E=>le("workspaces"))}," Workspaces ")):H("",!0),!R.value&&!U.value&&ue.value.length>0?(v(),b("button",{key:5,type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:W[5]||(W[5]=E=>le("outputs"))}," Outputs ")):H("",!0),!R.value&&!U.value&&ie.value.length>0?(v(),b("button",{key:6,type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:W[6]||(W[6]=E=>le("utility"))}," Utility ")):H("",!0),h("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:W[7]||(W[7]=E=>le("gitignore"))}," .gitignore ")]),!n.disabled&&n.allowDestruction?(v(),we(Ye,{key:0,variant:"secondary",size:"sm",class:"mt-3 sm:mt-0",onClick:W[8]||(W[8]=E=>te.$emit("reset"))},{default:Z(()=>[...W[27]||(W[27]=[ce(" Reset to Defaults ",-1)])]),_:1})):H("",!0)]),R.value?(v(),b("div",$j,[S(gn,{title:"Primary Files",description:"The main presentation file and where rendered slides are output."},{default:Z(()=>[h("div",Nj,[S(Ee,{"model-value":i.value.presentation_source,"onUpdate:modelValue":W[9]||(W[9]=E=>Te("presentation_source",E)),label:"Presentation source file",placeholder:"presentation.qmd",hint:"Main Quarto file for your slides",disabled:n.disabled},null,8,["model-value","disabled"]),S(Ee,{"model-value":i.value.rendered_slides,"onUpdate:modelValue":W[10]||(W[10]=E=>Te("rendered_slides",E)),label:"Rendered slides directory",placeholder:".",hint:"Rendered slides write to the project root by default (.)",prefix:"/",monospace:"",disabled:n.disabled},null,8,["model-value","disabled"])])]),_:1})])):H("",!0),R.value?(v(),b("div",Bj,[S(gn,{title:"Optional Directories",description:"Toggle extra scaffolding when you need supporting data, scripts, or helper utilities."},{default:Z(()=>[h("div",Fj,[h("div",Uj,[S(Qe,{"model-value":o.value.data,"onUpdate:modelValue":W[11]||(W[11]=E=>me("data",E)),label:"Include data directory",description:"Adds a /data folder for sample data used in the presentation.",disabled:qe("data")},null,8,["model-value","disabled"]),o.value.data?(v(),we(Ee,{key:0,"model-value":u("data"),"onUpdate:modelValue":W[12]||(W[12]=E=>Te("data",E)),prefix:"/",monospace:"",disabled:n.disabled},null,8,["model-value","disabled"])):H("",!0)]),h("div",zj,[S(Qe,{"model-value":o.value.scripts,"onUpdate:modelValue":W[13]||(W[13]=E=>me("scripts",E)),label:"Include scripts directory",description:"Adds a scripts/ folder for demo code or automation.",disabled:qe("scripts")},null,8,["model-value","disabled"]),o.value.scripts?(v(),we(Ee,{key:0,"model-value":u("scripts"),"onUpdate:modelValue":W[14]||(W[14]=E=>Te("scripts",E)),prefix:"/",monospace:"",disabled:n.disabled},null,8,["model-value","disabled"])):H("",!0)]),h("div",Hj,[S(Qe,{"model-value":o.value.functions,"onUpdate:modelValue":W[15]||(W[15]=E=>me("functions",E)),label:"Include functions directory",description:"Adds functions/ for helper utilities that should load automatically.",disabled:qe("functions")},null,8,["model-value","disabled"]),o.value.functions?(v(),we(Ee,{key:0,"model-value":u("functions"),"onUpdate:modelValue":W[16]||(W[16]=E=>Te("functions",E)),prefix:"/",monospace:"",disabled:n.disabled},null,8,["model-value","disabled"])):H("",!0)]),h("div",Wj,[W[28]||(W[28]=h("label",{class:"block text-sm font-medium text-gray-900 dark:text-white"},"Cache",-1)),W[29]||(W[29]=h("p",{class:"text-xs text-gray-500 dark:text-gray-400 mb-1.5"},"Temporary artifacts (gitignored). Created automatically on first use.",-1)),S(Ee,{"model-value":u("cache"),"onUpdate:modelValue":W[17]||(W[17]=E=>Te("cache",E)),prefix:"/",monospace:"",disabled:n.disabled},null,8,["model-value","disabled"])]),h("div",qj,[W[30]||(W[30]=h("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Add Custom Directories",-1)),ee.value.length>0?(v(),b("div",Gj,[(v(!0),b(be,null,Ve(ee.value,E=>(v(),b("div",{key:E.key,class:"space-y-1.5"},[S(Qe,{"model-value":o.value[E.key],"onUpdate:modelValue":re=>me(E.key,re),label:E.label,disabled:qe(E.key)},null,8,["model-value","onUpdate:modelValue","label","disabled"]),o.value[E.key]!==!1?(v(),we(Ee,{key:0,"model-value":E.path,"onUpdate:modelValue":re=>pt(E.key,re),prefix:"/",monospace:"",disabled:n.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):H("",!0)]))),128))])):H("",!0),n.disabled?H("",!0):(v(),we(dr,{key:1,"model-value":X.value,"onUpdate:modelValue":W[18]||(W[18]=E=>ot("workspace",E)),"add-label":"Add Directory","default-item":()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:Z(({item:E,update:re})=>[h("div",Kj,[S(Ee,{"model-value":E.label,"onUpdate:modelValue":D=>re("label",D),label:"Label",placeholder:"e.g., Assets"},null,8,["model-value","onUpdate:modelValue"]),S(Ee,{"model-value":E.path,"onUpdate:modelValue":D=>re("path",D),label:"Path",placeholder:"e.g., assets",prefix:"/",monospace:""},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"]))])])]),_:1})])):H("",!0),U.value?(v(),b("div",Jj,[S(Oj,{"directories-enabled":o.value,"onUpdate:directoriesEnabled":W[19]||(W[19]=E=>{o.value=E,s("update:enabled",E)}),directories:i.value,"onUpdate:directories":W[20]||(W[20]=E=>{i.value=E,s("update:directories",E)}),"render-dirs":r.value,"onUpdate:renderDirs":W[21]||(W[21]=E=>{r.value=E,s("update:renderDirs",E)}),catalog:n.catalog,"extra-directories":n.extraDirectories.filter(E=>E.type==="course"),"extra-directories-enabled":{},"onUpdate:extraDirectoriesEnabled":()=>{},"project-custom-directories":[],"onUpdate:projectCustomDirectories":()=>{},"allow-custom-directories":!1,flush:!1},null,8,["directories-enabled","directories","render-dirs","catalog","extra-directories"])])):H("",!0),!R.value&&!U.value&&G.value.length>0?(v(),b("div",Qj,[S(gn,{title:"Inputs",description:_.value?"Keep private inputs compartmentalized; publish processed outputs into public folders when ready.":"Define the read-only locations where raw and prepared data live."},{default:Z(()=>[_.value?(v(),b("div",Yj,[W[31]||(W[31]=h("div",{class:"grid gap-4 sm:grid-cols-2 text-xs font-semibold uppercase text-gray-500 dark:text-gray-400 mb-4"},[h("div",null,"Private"),h("div",null,"Public")],-1)),h("div",Xj,[(v(!0),b(be,null,Ve(G.value,E=>(v(),b("div",{key:E.privateKey},[E.hint?(v(),b("p",Zj,Y(E.hint),1)):H("",!0),h("div",eV,[h("div",tV,[S(Qe,{"model-value":o.value[E.privateKey],"onUpdate:modelValue":re=>me(E.privateKey,re),label:E.privateLabel,disabled:qe(E.privateKey)},null,8,["model-value","onUpdate:modelValue","label","disabled"]),o.value[E.privateKey]!==!1?(v(),we(Ee,{key:0,"model-value":u(E.privateKey),"onUpdate:modelValue":re=>Te(E.privateKey,re),prefix:"/",monospace:"",disabled:n.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):H("",!0)]),h("div",nV,[S(Qe,{"model-value":o.value[E.publicKey],"onUpdate:modelValue":re=>me(E.publicKey,re),label:E.publicLabel,disabled:qe(E.publicKey)},null,8,["model-value","onUpdate:modelValue","label","disabled"]),o.value[E.publicKey]!==!1?(v(),we(Ee,{key:0,"model-value":u(E.publicKey),"onUpdate:modelValue":re=>Te(E.publicKey,re),prefix:"/",monospace:"",disabled:n.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):H("",!0)])])]))),128))])])):(v(),b("div",sV,[(v(!0),b(be,null,Ve(G.value,E=>(v(),b("div",{key:E.key,class:"space-y-1.5"},[S(Qe,{"model-value":o.value[E.key],"onUpdate:modelValue":re=>me(E.key,re),label:E.label,description:E.hint,disabled:qe(E.key)},null,8,["model-value","onUpdate:modelValue","label","description","disabled"]),o.value[E.key]!==!1?(v(),we(Ee,{key:0,"model-value":u(E.key),"onUpdate:modelValue":re=>Te(E.key,re),prefix:"/",monospace:"",disabled:n.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):H("",!0)]))),128))])),(ae.value.length>0,v(),b("div",iV,[W[32]||(W[32]=h("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Input Directories",-1)),ae.value.length>0?(v(),b("div",rV,[(v(!0),b(be,null,Ve(ae.value,E=>(v(),b("div",{key:E.key,class:"space-y-1.5"},[S(Qe,{"model-value":o.value[E.key],"onUpdate:modelValue":re=>me(E.key,re),label:E.label,disabled:qe(E.key)},null,8,["model-value","onUpdate:modelValue","label","disabled"]),o.value[E.key]!==!1?(v(),we(Ee,{key:0,"model-value":E.path,"onUpdate:modelValue":re=>pt(E.key,re),prefix:"/",monospace:"",disabled:n.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):H("",!0)]))),128))])):H("",!0),n.disabled?H("",!0):(v(),we(dr,{key:1,"model-value":J.value,"onUpdate:modelValue":W[22]||(W[22]=E=>ot("input",E)),addLabel:"Add Input Directory",defaultItem:()=>({key:"",label:"",path:"",type:"input",_id:Date.now()})},{default:Z(({item:E,update:re})=>[h("div",oV,[S(Ee,{"model-value":E.label,"onUpdate:modelValue":D=>re("label",D),label:"Label",placeholder:"Archive"},null,8,["model-value","onUpdate:modelValue"]),S(Ee,{"model-value":E.path,"onUpdate:modelValue":D=>re("path",D),label:"Path",prefix:"/",placeholder:"inputs/archive",monospace:"",disabled:n.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])])]),_:1},8,["model-value","defaultItem"]))]))]),_:1},8,["description"])])):H("",!0),!R.value&&!U.value&&M.value.length>0?(v(),b("div",lV,[S(gn,{title:"Workspaces",description:"Functions, notebooks, and scripts scaffolded into every project."},{default:Z(()=>[h("div",aV,[(v(!0),b(be,null,Ve(A.value,E=>(v(),b("div",{key:E.key,class:"space-y-1.5"},[S(Qe,{"model-value":o.value[E.key],"onUpdate:modelValue":re=>me(E.key,re),label:E.label,description:E.hint,disabled:qe(E.key)},null,8,["model-value","onUpdate:modelValue","label","description","disabled"]),o.value[E.key]!==!1?(v(),b("div",uV,[S(Ee,{"model-value":u(E.key),"onUpdate:modelValue":re=>Te(E.key,re),label:"Source files",prefix:"/",monospace:"",disabled:n.disabled},null,8,["model-value","onUpdate:modelValue","disabled"]),S(Ee,{"model-value":c(E.key),"onUpdate:modelValue":re=>$e(E.key,re),label:"Quarto render directory",prefix:"/",monospace:"",disabled:n.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])])):H("",!0)]))),128)),(v(!0),b(be,null,Ve(w.value,E=>(v(),b("div",{key:E.key,class:"space-y-1.5"},[S(Qe,{"model-value":o.value[E.key],"onUpdate:modelValue":re=>me(E.key,re),label:E.label,description:E.hint,disabled:qe(E.key)},null,8,["model-value","onUpdate:modelValue","label","description","disabled"]),o.value[E.key]!==!1?(v(),we(Ee,{key:0,"model-value":u(E.key),"onUpdate:modelValue":re=>Te(E.key,re),prefix:"/",monospace:"",disabled:n.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):H("",!0)]))),128))]),(ee.value.length>0,v(),b("div",cV,[W[33]||(W[33]=h("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Workspace Directories",-1)),ee.value.length>0?(v(),b("div",dV,[(v(!0),b(be,null,Ve(ee.value,E=>(v(),b("div",{key:E.key,class:"space-y-1.5"},[S(Qe,{"model-value":o.value[E.key],"onUpdate:modelValue":re=>me(E.key,re),label:E.label,disabled:qe(E.key)},null,8,["model-value","onUpdate:modelValue","label","disabled"]),o.value[E.key]!==!1?(v(),we(Ee,{key:0,"model-value":E.path,"onUpdate:modelValue":re=>pt(E.key,re),prefix:"/",monospace:"",disabled:n.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):H("",!0)]))),128))])):H("",!0),n.disabled?H("",!0):(v(),we(dr,{key:1,"model-value":X.value,"onUpdate:modelValue":W[23]||(W[23]=E=>ot("workspace",E)),addLabel:"Add Workspace Directory",defaultItem:()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:Z(({item:E,update:re})=>[h("div",fV,[S(Ee,{"model-value":E.label,"onUpdate:modelValue":D=>re("label",D),label:"Label",placeholder:"Templates"},null,8,["model-value","onUpdate:modelValue"]),S(Ee,{"model-value":E.path,"onUpdate:modelValue":D=>re("path",D),label:"Path",prefix:"/",placeholder:"templates",monospace:"",disabled:n.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])])]),_:1},8,["model-value","defaultItem"]))]))]),_:1})])):H("",!0),!R.value&&!U.value&&ue.value.length>0?(v(),b("div",hV,[S(gn,{title:"Outputs",description:_.value?"Review outputs before promotion; private folders remain gitignored while public copies are ready to share.":"Results, figures, models, and reports generated by your analysis."},{default:Z(()=>[_.value?(v(),b("div",pV,[W[34]||(W[34]=h("div",{class:"grid gap-4 sm:grid-cols-2 text-xs font-semibold uppercase text-gray-500 dark:text-gray-400 mb-4"},[h("div",null,"Private"),h("div",null,"Public")],-1)),h("div",mV,[(v(!0),b(be,null,Ve(ue.value,E=>(v(),b("div",{key:E.privateKey},[E.hint?(v(),b("p",gV,Y(E.hint),1)):H("",!0),h("div",vV,[h("div",yV,[S(Qe,{"model-value":o.value[E.privateKey],"onUpdate:modelValue":re=>me(E.privateKey,re),label:E.privateLabel,disabled:qe(E.privateKey)},null,8,["model-value","onUpdate:modelValue","label","disabled"]),o.value[E.privateKey]!==!1?(v(),we(Ee,{key:0,"model-value":u(E.privateKey),"onUpdate:modelValue":re=>Te(E.privateKey,re),prefix:"/",monospace:"",disabled:n.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):H("",!0)]),h("div",bV,[S(Qe,{"model-value":o.value[E.publicKey],"onUpdate:modelValue":re=>me(E.publicKey,re),label:E.publicLabel,disabled:qe(E.publicKey)},null,8,["model-value","onUpdate:modelValue","label","disabled"]),o.value[E.publicKey]!==!1?(v(),we(Ee,{key:0,"model-value":u(E.publicKey),"onUpdate:modelValue":re=>Te(E.publicKey,re),prefix:"/",monospace:"",disabled:n.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):H("",!0)])])]))),128))])])):(v(),b("div",kV,[(v(!0),b(be,null,Ve(ue.value,E=>(v(),b("div",{key:E.key,class:"space-y-1.5"},[S(Qe,{"model-value":o.value[E.key],"onUpdate:modelValue":re=>me(E.key,re),label:E.label,description:E.hint,disabled:qe(E.key)},null,8,["model-value","onUpdate:modelValue","label","description","disabled"]),o.value[E.key]!==!1?(v(),we(Ee,{key:0,"model-value":u(E.key),"onUpdate:modelValue":re=>Te(E.key,re),prefix:"/",monospace:"",disabled:n.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):H("",!0)]))),128))])),(V.value.length>0,v(),b("div",xV,[W[35]||(W[35]=h("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Output Directories",-1)),V.value.length>0?(v(),b("div",_V,[(v(!0),b(be,null,Ve(V.value,E=>(v(),b("div",{key:E.key,class:"space-y-1.5"},[S(Qe,{"model-value":o.value[E.key],"onUpdate:modelValue":re=>me(E.key,re),label:E.label,disabled:qe(E.key)},null,8,["model-value","onUpdate:modelValue","label","disabled"]),o.value[E.key]!==!1?(v(),we(Ee,{key:0,"model-value":E.path,"onUpdate:modelValue":re=>pt(E.key,re),prefix:"/",monospace:"",disabled:n.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):H("",!0)]))),128))])):H("",!0),n.disabled?H("",!0):(v(),we(dr,{key:1,"model-value":de.value,"onUpdate:modelValue":W[24]||(W[24]=E=>ot("output",E)),addLabel:"Add Output Directory",defaultItem:()=>({key:"",label:"",path:"",type:"output",_id:Date.now()})},{default:Z(({item:E,update:re})=>[h("div",wV,[S(Ee,{"model-value":E.label,"onUpdate:modelValue":D=>re("label",D),label:"Label",placeholder:"Archive"},null,8,["model-value","onUpdate:modelValue"]),S(Ee,{"model-value":E.path,"onUpdate:modelValue":D=>re("path",D),label:"Path",prefix:"/",placeholder:"outputs/archive",monospace:"",disabled:n.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])])]),_:1},8,["model-value","defaultItem"]))]))]),_:1},8,["description"])])):H("",!0),!R.value&&!U.value?(v(),b("div",SV,[S(gn,{title:"Utility",description:"Cache and scratch directories (gitignored by default)."},{default:Z(()=>[h("div",CV,[h("div",AV,[W[36]||(W[36]=h("label",{class:"block text-sm font-medium text-gray-900 dark:text-white"},"Cache",-1)),W[37]||(W[37]=h("p",{class:"text-xs text-gray-500 dark:text-gray-400 mb-1.5"},"Temporary artifacts (gitignored). Created automatically on first use.",-1)),S(Ee,{"model-value":u("cache"),"onUpdate:modelValue":W[25]||(W[25]=E=>Te("cache",E)),prefix:"/",monospace:"",disabled:n.disabled},null,8,["model-value","disabled"])]),(v(!0),b(be,null,Ve(ie.value,E=>(v(),b("div",{key:E.key,class:"space-y-1.5"},[S(Qe,{"model-value":o.value[E.key],"onUpdate:modelValue":re=>me(E.key,re),label:E.label,description:E.hint,disabled:qe(E.key)},null,8,["model-value","onUpdate:modelValue","label","description","disabled"]),o.value[E.key]!==!1?(v(),we(Ee,{key:0,"model-value":u(E.key),"onUpdate:modelValue":re=>Te(E.key,re),prefix:"/",monospace:"",disabled:n.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):H("",!0)]))),128))])]),_:1})])):H("",!0),h("div",EV,[S(gn,{title:".gitignore Patterns",description:"Define which files and directories Git should ignore."},{default:Z(()=>[S(hh,null,{default:Z(()=>[S(Lc,{"model-value":a.value,"onUpdate:modelValue":W[26]||(W[26]=E=>te.$emit("update:gitignore",E)),language:"gitignore","min-height":"500px",disabled:n.disabled,placeholder:`# Framework gitignore patterns
cache/
scratch/
*.log`},null,8,["model-value","disabled"])]),_:1})]),_:1})])]))}},TV=["onClick","aria-current"],DV={class:"mt-4"},ph={__name:"Tabs",props:{modelValue:{type:[String,Number],required:!0},tabs:{type:Array,required:!0,validator:n=>n.every(e=>e.id&&e.label)},variant:{type:String,default:"pills",validator:n=>["pills","underline"].includes(n)},size:{type:String,default:"md",validator:n=>["sm","md","lg"].includes(n)}},emits:["update:modelValue","change"],setup(n,{emit:e}){const t=n,s=e,i=z(()=>t.variant==="underline"?"border-b border-gray-200 dark:border-white/10":""),r=z(()=>{const a=["flex","gap-2"];return t.variant==="underline"?a.push("-mb-px"):a.push("p-1","bg-gray-100","dark:bg-white/5","rounded-lg"),a.join(" ")}),o=a=>{const u=t.modelValue===a,c=["inline-flex","items-center","gap-2","font-medium","transition-colors"],d={sm:"px-2.5 py-1.5 text-xs",md:"px-3 py-2 text-sm",lg:"px-4 py-2.5 text-base"};return c.push(d[t.size]),t.variant==="pills"?(c.push("rounded-md"),u?c.push("bg-white","text-gray-900","shadow-xs","dark:bg-white/10","dark:text-white"):c.push("text-gray-600","hover:text-gray-900","dark:text-gray-400","dark:hover:text-white")):(c.push("border-b-2","pb-3"),u?c.push("border-sky-600","text-sky-600","dark:border-sky-500","dark:text-sky-400"):c.push("border-transparent","text-gray-600","hover:border-gray-300","hover:text-gray-900","dark:text-gray-400","dark:hover:border-gray-600","dark:hover:text-white")),c.join(" ")},l=a=>{s("update:modelValue",a),s("change",a)};return(a,u)=>(v(),b("div",null,[h("div",{class:Se(i.value)},[h("nav",{class:Se(r.value),"aria-label":"Tabs"},[(v(!0),b(be,null,Ve(n.tabs,c=>(v(),b("button",{key:c.id,type:"button",onClick:d=>l(c.id),class:Se(o(c.id)),"aria-current":n.modelValue===c.id?"page":void 0},[c.icon?(v(),we(Un(c.icon),{key:0,class:"size-5"})):H("",!0),ce(" "+Y(c.label)+" ",1),c.badge?(v(),we(co,{key:1,variant:n.modelValue===c.id?"emerald":"gray",pill:""},{default:Z(()=>[ce(Y(c.badge),1)]),_:2},1032,["variant"])):H("",!0)],10,TV))),128))],2)],2),h("div",DV,[ht(a.$slots,"default")])]))}},PV={key:0,class:"mb-4"},RV={key:1,class:"mb-4"},OV={key:2,class:"space-y-6"},LV={key:0,class:"rounded-lg bg-gray-50 p-8 text-center dark:bg-gray-800/40"},MV={key:1,class:"space-y-5"},IV={class:"mb-4"},jV={class:"text-sm font-semibold text-gray-900 dark:text-white"},VV={class:"text-xs text-gray-500 dark:text-gray-400"},$V={class:"space-y-3"},NV={class:"flex items-start gap-3"},BV={class:"grid flex-1 grid-cols-2 gap-3"},FV=["value","onInput","disabled"],UV={class:"relative"},zV=["onUpdate:modelValue","type","placeholder","disabled"],HV=["onClick"],WV=["onClick"],qV={key:0,class:"mt-4"},GV={key:2,class:"rounded-lg border border-gray-200 bg-gray-50 p-4 text-sm dark:border-gray-700 dark:bg-gray-800/60"},KV={key:3,class:"space-y-3"},JV=["disabled"],QV={key:4,class:"mt-4 flex justify-end"},Bp={__name:"EnvEditor",props:{loading:{type:Boolean,default:!1},error:{type:String,default:""},showSecurityAlert:{type:Boolean,default:!0},allowAdd:{type:Boolean,default:!0},allowRemove:{type:Boolean,default:!0},allowShowValuesToggle:{type:Boolean,default:!0},allowRegroupOption:{type:Boolean,default:!0},showSaveButton:{type:Boolean,default:!0},saveLabel:{type:String,default:"Save .env"},groups:{type:Object,default:()=>({})},variables:{type:Object,default:()=>({})},rawContent:{type:String,default:""},viewMode:{type:String,default:"grouped"},regroupOnSave:{type:Boolean,default:!1}},emits:["update:variables","update:rawContent","update:viewMode","update:regroupOnSave","save"],setup(n,{emit:e}){const t=n,s=e,i=M=>JSON.parse(JSON.stringify(M||{})),r=Q(i(t.variables)),o=Q(t.rawContent||""),l=Q(t.viewMode||"grouped"),a=Q(!!t.regroupOnSave),u=Q(!1),c=Q({});let d=!1,f=!1;je(()=>t.variables,M=>{d=!0,r.value=i(M),ns(()=>{d=!1})},{deep:!0}),je(()=>t.rawContent,M=>{f=!0,o.value=M||"",ns(()=>{f=!1})},{immediate:!0}),je(()=>t.viewMode,M=>{l.value=M||"grouped"}),je(()=>t.regroupOnSave,M=>{a.value=!!M}),je(r,M=>{d||(s("update:variables",i(M)),l.value!=="raw"&&(o.value=x(o.value,M,a.value),s("update:rawContent",o.value)))},{deep:!0}),je(o,M=>{if(!f&&l.value==="raw"){s("update:rawContent",M);const G=p(M);r.value=G,s("update:variables",i(G))}}),je(l,(M,G)=>{s("update:viewMode",M),M==="raw"&&G!=="raw"&&(Object.keys(r.value).length>0?o.value=x(o.value,r.value,a.value):!o.value&&t.rawContent&&(o.value=t.rawContent))}),je(a,M=>{s("update:regroupOnSave",M)});const p=M=>{const G=(M||"").split(/\r?\n/),ue={};return G.forEach(ie=>{const F=ie.trim();if(!F||F.startsWith("#")||!F.includes("="))return;const[ae,...ee]=F.split("=");ue[ae.trim()]=ee.join("=").replace(/^"|"$/g,"")}),ue},g=M=>{const G=Object.entries(M||{});return G.length?G.reduce((ue,[ie,F])=>{const ae=ie.includes("_")?ie.split("_")[0]:"Other";return ue[ae]||(ue[ae]={}),ue[ae][ie]={defined:!!F,used:!1,used_in:[],value:F},ue},{}):{}},k=z(()=>{const M=t.groups||{};return Object.keys(M).length?M:g(r.value)}),x=(M,G,ue=!1)=>{if(ue){const V={};for(const[de,Ce]of Object.entries(G)){const Te=de.includes("_")?de.split("_")[0]:"Other";V[Te]||(V[Te]=[]),V[Te].push([de,Ce])}const J=[],X=Object.keys(V).sort();for(let de=0;de<X.length;de++){const Ce=X[de],Te=V[Ce];de>0&&(J.push(""),J.push("")),J.push(`# ${Ce==="Other"?"Other variables":Ce.toUpperCase()}`);for(const[$e,me]of Te)J.push(`${$e}=${me??""}`)}return J.join(`
`)}const ie=(M||"").split(/\r?\n/),F=new Set,ae=[];for(const V of ie){const J=V.trim();if(!J||J.startsWith("#")||!J.includes("=")){ae.push(V);continue}const[X,...de]=J.split("="),Ce=X.trim(),Te=de.join("=").trim();if(Ce in G){const $e=G[Ce]??"";ae.push(`${Ce}=${$e}`),F.add(Ce)}else(Object.keys(G).length===0||Te==="")&&ae.push(V)}const ee=Object.entries(G).filter(([V])=>!F.has(V));if(ee.length>0){const V={};for(const[J,X]of ee){const de=J.includes("_")?J.split("_")[0]:"Other";V[de]||(V[de]=[]),V[de].push([J,X])}for(const[J,X]of Object.entries(V)){ae.length>0&&ae[ae.length-1]!==""&&(ae.push(""),ae.push("")),ae.push(`# ${J==="Other"?"Other variables":J.toUpperCase()}`);for(const[de,Ce]of X)ae.push(`${de}=${Ce??""}`)}}return ae.join(`
`)},m=()=>{if(!t.allowAdd)return;const M="NEW_VARIABLE";let G=1,ue=`${M}_${G}`;for(;r.value[ue];)G+=1,ue=`${M}_${G}`;r.value={...r.value,[ue]:""}},_=M=>{if(!t.allowRemove)return;const G=i(r.value);delete G[M],r.value=G},R=(M,G)=>{if(!G||M===G)return;const ue=G.replace(/[^A-Z0-9_]/gi,"").toUpperCase();if(!ue)return;const ie=i(r.value);ie[ue]||(ie[ue]=ie[M],delete ie[M],r.value=ie)},U=M=>{const G=["PASSWORD","SECRET","KEY","TOKEN"],ue=M.toUpperCase();return G.some(ie=>ue.includes(ie))},N=M=>u.value||c.value[M]||!U(M),A=M=>{c.value[M]=!c.value[M]},w=()=>{u.value=!u.value};return(M,G)=>(v(),b("div",null,[n.error?(v(),b("div",PV,[S(Kn,{type:"error",title:"Error",description:n.error},null,8,["description"])])):H("",!0),n.showSecurityAlert?(v(),b("div",RV,[S(Kn,{type:"warning",title:" Contains Sensitive Data"},{actions:Z(()=>[n.viewMode==="grouped"&&n.allowShowValuesToggle?(v(),we(Ye,{key:0,variant:"soft",size:"sm",onClick:w},{default:Z(()=>[ce(Y(u.value?"Hide Values":"Show Values"),1)]),_:1})):H("",!0)]),default:Z(()=>[G[4]||(G[4]=ce(" This file can include passwords and secrets. Keep it out of version control. ",-1))]),_:1})])):H("",!0),S(ph,{modelValue:l.value,"onUpdate:modelValue":G[0]||(G[0]=ue=>l.value=ue),tabs:[{id:"grouped",label:"Key/Value Editor"},{id:"raw",label:"Raw .env"}],variant:"pills",class:"mb-4"},null,8,["modelValue"]),l.value==="grouped"?(v(),b("div",OV,[Object.keys(k.value).length===0?(v(),b("div",LV,[S(Ke(pc),{class:"mx-auto mb-3 h-10 w-10 text-gray-400"}),G[6]||(G[6]=h("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"No environment variables yet.",-1)),n.allowAdd?(v(),we(Ye,{key:0,variant:"primary",class:"mt-4",onClick:m},{default:Z(()=>[...G[5]||(G[5]=[ce(" Add Variable ",-1)])]),_:1})):H("",!0)])):(v(),b("div",MV,[(v(!0),b(be,null,Ve(k.value,(ue,ie)=>(v(),b("div",{key:ie,class:"rounded-lg bg-gray-50 p-5 dark:bg-gray-800/40"},[h("div",IV,[h("p",jV,Y(ie==="Other"?"Uncategorized":ie.toUpperCase()),1),h("p",VV,"Variables with the "+Y(ie)+" prefix.",1)]),h("div",$V,[(v(!0),b(be,null,Ve(ue,(F,ae)=>(v(),b("div",{key:ae,class:"space-y-2"},[h("div",NV,[h("div",BV,[h("input",{value:ae,onInput:ee=>R(ae,ee.target.value),type:"text",class:"w-full rounded-md border border-gray-300 bg-white px-3 py-2 font-mono text-sm uppercase text-gray-900 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-100",disabled:n.loading},null,40,FV),h("div",UV,[He(h("input",{"onUpdate:modelValue":ee=>r.value[ae]=ee,type:N(ae)?"text":"password",placeholder:F.defined?"value":"(not set)",class:"w-full rounded-md border border-gray-300 bg-white px-3 py-2 font-mono text-sm text-gray-900 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-100",disabled:n.loading},null,8,zV),[[iS,r.value[ae]]]),U(ae)&&n.allowShowValuesToggle?(v(),b("button",{key:0,type:"button",class:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300",onClick:ee=>A(ae)},[N(ae)?(v(),we(Ke(PC),{key:0,class:"h-4 w-4"})):(v(),we(Ke(RC),{key:1,class:"h-4 w-4"}))],8,HV)):H("",!0)])]),n.allowRemove?(v(),b("button",{key:0,type:"button",class:"mt-2 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300",onClick:ee=>_(ae)},[...G[7]||(G[7]=[h("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,WV)):H("",!0)])]))),128))]),n.allowAdd?(v(),b("div",qV,[S(Ye,{variant:"secondary",size:"sm",onClick:m},{default:Z(()=>[...G[8]||(G[8]=[ce(" + Add Variable ",-1)])]),_:1})])):H("",!0)]))),128))])),n.allowRegroupOption?(v(),b("div",GV,[S(Qe,{modelValue:a.value,"onUpdate:modelValue":G[1]||(G[1]=ue=>a.value=ue),label:"Regroup .env file by prefix when saving",description:"Rewrites the file grouped by prefix and strips comments."},null,8,["modelValue"])])):H("",!0)])):(v(),b("div",KV,[He(h("textarea",{"onUpdate:modelValue":G[2]||(G[2]=ue=>o.value=ue),class:"h-80 w-full rounded-md border border-gray-300 bg-white px-3 py-2 font-mono text-sm text-gray-900 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-100",disabled:n.loading},null,8,JV),[[br,o.value]]),G[9]||(G[9]=h("p",{class:"text-xs text-gray-500"},"Edit the .env file directly. Comments and formatting are preserved.",-1))])),n.showSaveButton?(v(),b("div",QV,[S(Ye,{disabled:n.loading,variant:"primary",onClick:G[3]||(G[3]=ue=>M.$emit("save"))},{default:Z(()=>[ce(Y(n.saveLabel),1)]),_:1},8,["disabled"])])):H("",!0)]))}},Fp=({useGit:n,gitHooks:e,git:t,author:s}={})=>{const i=e||t?.hooks||{};return{initialize:n!==!1&&t?.initialize!==!1,user_name:t?.user_name||"",user_email:t?.user_email||"",github_username:s?.github_username||"",github_email:s?.github_email||"",hooks:{ai_sync:i.ai_sync||!1,data_security:i.data_security||!1,check_sensitive_dirs:i.check_sensitive_dirs||!1}}},Up=({gitTarget:n,gitHooksTarget:e,setUseGit:t,authorTarget:s}={},i={})=>{typeof t=="function"&&t(i.initialize),n&&(n.initialize=i.initialize,n.user_name=i.user_name,n.user_email=i.user_email,n.hooks={ai_sync:i.hooks?.ai_sync||!1,data_security:i.hooks?.data_security||!1,check_sensitive_dirs:i.hooks?.check_sensitive_dirs||!1}),e&&(e.ai_sync=i.hooks?.ai_sync||!1,e.data_security=i.hooks?.data_security||!1,e.check_sensitive_dirs=i.hooks?.check_sensitive_dirs||!1),s&&(s.github_username=i.github_username||"",s.github_email=i.github_email||"")},YV=(n={},e={},t={},s={})=>{const i=l=>typeof l=="string"?l:l&&typeof l=="object"&&l.default||"",r={},o={};return Object.entries(n).forEach(([l,a])=>{const u=i(a),c=s[l]||"";r[l]=e[l]||u||c,t[l]!==void 0?o[l]=t[l]:a&&typeof a=="object"&&a.enabled_by_default!==void 0?o[l]=a.enabled_by_default===!0:o[l]=!0}),{directories:r,directories_enabled:o}},XV=(n={},e={},t={})=>{const s=r=>typeof r=="string"?r:r&&typeof r=="object"&&r.default||"",i={};return Object.entries(n).forEach(([r,o])=>{const l=s(o),a=t[r]||"";i[r]=e[r]||l||a}),i},ZV=(n=[],e={})=>(n||[]).filter(t=>!(!t.key||!t.label||!t.path||!t.type||e&&e[t.key]===!1)),Qx=(n={},e=[],t={})=>{const s=new Set;Object.keys(n||{}).forEach(r=>s.add(r)),(e||[]).forEach(r=>{r.key&&s.add(r.key)});const i={};return Object.keys(t||{}).forEach(r=>{s.has(r)&&(i[r]=t[r])}),i},Yx=(n={},e={},t={},s={})=>{const{directories:i,directories_enabled:r}=YV(n.directories||{},e.directories||{},e.directories_enabled||{},t),o=XV(n.render_dirs||{},e.render_dirs||{},s),l=e.extra_directories||[],a={...r,...e.directories_enabled||{}};return{directories:i,directories_enabled:r,render_dirs:o,extra_directories:l,enabled:a}},e$=(n={},e={})=>{const t=n.directories||{},s=n.render_dirs||{},i=n.extra_directories||[],r=Qx(e,i,n.enabled||{});return{directories:t,render_dirs:s,extra_directories:i,enabled:r}},Xx=({catalogDirs:n={},directories:e={},render_dirs:t={},enabled:s={},extra_directories:i=[]})=>{const r=Qx(n,i,s),o=ZV(i,r);return{directories:e,render_dirs:t,enabled:r,extra_directories:o}},zl=(n={})=>({name:n.name||"",source:n.source||"cran",auto_attach:n.auto_attach!==!1}),Wr=n=>n?n.default_packages?{use_renv:!!n.use_renv,default_packages:(n.default_packages||[]).map(zl)}:Array.isArray(n)?{use_renv:!1,default_packages:n.map(zl)}:{use_renv:!!n.use_renv,default_packages:[]}:{use_renv:!1,default_packages:[]},t$=(n={})=>{const e=!!n.use_renv,t=(n.default_packages||[]).filter(s=>s?.name&&s.name.trim()!=="").map(zl);return{use_renv:e,default_packages:t}},n$=n=>({use_renv:!!n?.use_renv,default_packages:(n?.packages||[]).map(zl)}),Zx=(n={})=>{const e=!!n.use_renv,t=(n.default_packages||[]).filter(s=>s?.name&&s.name.trim()!=="").map(zl);return{use_renv:e,default_packages:t}},s$=([n])=>n!=="framework_db",zp=(n={})=>{const e=n.databases||{},t=n.storage_buckets||{},s=Object.entries(e).filter(s$).map(([l,a])=>({_id:l,name:l,...a})),i=Object.entries(t).map(([l,a])=>({_id:l,name:l,...a})),r=n.default_database,o=n.default_storage_bucket;return{databaseConnections:s,s3Connections:i,defaultDatabase:typeof r=="string"&&r?r:null,defaultStorageBucket:typeof o=="string"&&o?o:null}},Hp=({databaseConnections:n=[],s3Connections:e=[],defaultDatabase:t=null,defaultStorageBucket:s=null})=>{const i={};n.forEach(o=>{const{_id:l,name:a,...u}=o||{};a&&(i[a]=u)});const r={};return e.forEach(o=>{const{_id:l,name:a,...u}=o||{};a&&(r[a]=u)}),{default_database:t,default_storage_bucket:s,databases:i,storage_buckets:r}},i$={class:"flex min-h-screen"},r$={class:"w-64 shrink-0 border-r border-gray-200 p-6 dark:border-gray-800"},o$={class:"space-y-1 mb-6"},l$=["onClick"],a$=["fill","viewBox","stroke"],u$=["stroke-linecap","stroke-linejoin","stroke-width","fill","d"],c$={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},d$={class:"flex-1 p-10 pb-4"},f$={class:"mt-8 space-y-6"},h$={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},p$={class:"space-y-5"},m$={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},g$={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 space-y-6"},v$={class:"space-y-6"},y$={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},b$={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},k$={__name:"NewProjectView",setup(n){const e=Kl(),t=wo(),s=mc(),i=os("loadProjects"),r=Q(null),o=Q(null),l=Q(!0),a=L=>L?Array.isArray(L)?Array.from(new Set(L.map(j=>String(j)))):typeof L=="string"?[L]:[]:[],u=()=>{Array.isArray(m.value.ai.assistants)||(m.value.ai.assistants=a(m.value.ai.assistants))},c=()=>({html:{format:"html",embed_resources:!0,theme:"default",toc:!0,toc_depth:3,code_fold:!1,code_tools:!1,highlight_style:"github"},revealjs:{format:"revealjs",theme:"default",incremental:!1,slide_number:!0,transition:"slide",background_transition:"fade",controls:!0,progress:!0,center:!0,highlight_style:"github"},render_dir:null}),d=[{id:"overview",label:"Overview",icon:hc},{id:"basics",label:"Basics",icon:jh},{id:"structure",label:"Project Structure",icon:kl},{id:"quarto",label:"Quarto",icon:mr},{id:"packages",label:"Packages",icon:fc},{id:"ai",label:"AI Assistants",svgIcon:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"},{id:"git",label:"Git & Hooks",svgIcon:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"},{id:"connections",label:"Connections",icon:Vh},{id:"env",label:".env Defaults",icon:pc},{id:"scaffold",label:"Scaffold Behavior",svgIcon:"M256 64L576 64L576 576L64 576L64 192L256 192L256 64zM256 224L96 224L96 544L256 544L256 224zM288 544L544 544L544 96L288 96L288 544zM440 152L488 152L488 200L440 200L440 152zM392 152L392 200L344 200L344 152L392 152zM440 248L488 248L488 296L440 296L440 248zM392 248L392 296L344 296L344 248L392 248zM152 280L200 280L200 328L152 328L152 280zM392 344L392 392L344 392L344 344L392 344zM152 376L200 376L200 424L152 424L152 376zM488 344L488 392L440 392L440 344L488 344z",svgViewBox:"0 0 640 640",svgFill:"currentColor",svgStroke:"none",svgStrokeWidth:0,svgPathFill:"currentColor"}],f=Q("basics"),p=Q(!1),g=Q(null),k=Q(!0),x=Q(new Set),m=Q({name:"",location:"",type:"project",author:{name:"",email:"",affiliation:""},scaffold:{seed_on_scaffold:!1,seed:"",set_theme_on_scaffold:!0,ggplot_theme:"theme_minimal",source_all_functions:!0,notebook_format:"quarto",ide:"vscode",positron:!1},packages:{...Wr()},quarto:c(),ai:{enabled:!0,assistants:[],canonical_file:"CLAUDE.md",canonical_content:""},git:{initialize:!0,gitignore_template:"gitignore-project",gitignore_content:"",user_name:"",user_email:"",hooks:{ai_sync:!1,data_security:!1,check_sensitive_dirs:!1}},connections:{databaseConnections:[],s3Connections:[],defaultDatabase:null,defaultStorageBucket:null},env:{variables:{},rawContent:`# Framework environment defaults
# Populate these values before running scaffold() or publishing.

# PostgreSQL connection
POSTGRES_HOST=127.0.0.1
POSTGRES_PORT=5432
POSTGRES_DB=postgres
POSTGRES_SCHEMA=public
POSTGRES_USER=postgres
POSTGRES_PASSWORD=

# S3-compatible storage (AWS S3, MinIO, etc.)
S3_BUCKET=
S3_ACCESS_KEY=
S3_SECRET_KEY=
S3_REGION=us-east-1
S3_ENDPOINT=
S3_SESSION_TOKEN=`,viewMode:"grouped",regroupOnSave:!1,groups:{}},directories_enabled:{},directories:{},render_dirs:{},extra_directories:[],extra_directories_enabled:{}}),_=()=>{const L=t.query.section;L&&["overview","author","scaffold","structure","quarto","connections","env","packages","ai","git"].includes(L)&&(f.value=L)};je(()=>t.query.section,L=>{L&&["overview","author","scaffold","structure","quarto","connections","env","packages","ai","git"].includes(L)?f.value=L:L||(f.value="overview")}),je(f,L=>{t.query.section!==L&&e.replace({query:{...t.query,section:L}})}),Cn(async()=>{console.log("[DEBUG] NewProjectView mounted - starting initialization"),_();try{console.log("[DEBUG] Fetching global settings from /api/settings");const L=await fetch("/api/settings");if(console.log("[DEBUG] Settings response status:",L.status,L.ok),L.ok&&(r.value=await L.json(),r.value)){r.value.global?.projects_root&&(m.value.location=r.value.global.projects_root),m.value.author={...r.value.author},r.value.defaults?.project_type&&(m.value.type=r.value.defaults.project_type),r.value.defaults?.scaffold&&(m.value.scaffold={...m.value.scaffold,...r.value.defaults.scaffold}),r.value.defaults?.notebook_format&&(m.value.scaffold.notebook_format=r.value.defaults.notebook_format),m.value.scaffold.notebook_format||(m.value.scaffold.notebook_format="quarto"),r.value.defaults?.positron!==void 0&&(m.value.scaffold.positron=r.value.defaults.positron),(r.value.defaults?.default_packages||r.value.defaults?.packages)&&(m.value.packages=Wr({use_renv:r.value.defaults.use_renv,default_packages:r.value.defaults.default_packages||r.value.defaults.packages}));const B=a(r.value.defaults?.ai_assistants);if(m.value.ai={enabled:r.value.defaults?.ai_support!==!1,assistants:B.length>0?B:["claude"],canonical_file:r.value.defaults?.ai_canonical_file||"CLAUDE.md",canonical_content:""},u(),m.value.ai.enabled&&m.value.ai.canonical_file&&de(m.value.ai.canonical_file,m.value.type),m.value.git.initialize=r.value.defaults?.use_git!==!1,m.value.git.user_name=r.value.git?.user_name||"",m.value.git.user_email=r.value.git?.user_email||"",r.value.defaults?.git_hooks&&(m.value.git.hooks={...r.value.defaults.git_hooks}),r.value.defaults?.connections){const Ae=zp(r.value.defaults.connections);m.value.connections.databaseConnections=Ae.databaseConnections,m.value.connections.s3Connections=Ae.s3Connections,m.value.connections.defaultDatabase=Ae.defaultDatabase,m.value.connections.defaultStorageBucket=Ae.defaultStorageBucket}if(r.value.defaults?.env){const Ae=r.value.defaults.env;typeof Ae=="string"?m.value.env.rawContent=Ae:Ae?.raw&&(m.value.env.rawContent=Ae.raw),m.value.env.variables=N(m.value.env.rawContent),m.value.env.groups=A(m.value.env.variables)}const pe=c();r.value.defaults?.quarto&&(pe.html={...pe.html,...r.value.defaults.quarto.html||{}},pe.revealjs={...pe.revealjs,...r.value.defaults.quarto.revealjs||{}},r.value.defaults.quarto.render_dir&&(pe.render_dir=r.value.defaults.quarto.render_dir)),m.value.quarto=pe;const ve={project:"gitignore-project",project_sensitive:"gitignore-project_sensitive",course:"gitignore-course",presentation:"gitignore-presentation"};m.value.git.gitignore_template=ve[m.value.type]||"gitignore-project",m.value.git.gitignore_template&&X(m.value.git.gitignore_template)}const j=await fetch("/api/settings-catalog");j.ok&&(o.value=await j.json()),R(),w()}catch(L){console.error("[DEBUG] Failed to load settings:",L),console.error("[DEBUG] Error details:",L.message,L.stack),s.error("Load Error","Could not load default settings")}finally{console.log("[DEBUG] Initialization complete, loading =",l.value),l.value=!1,setTimeout(()=>{if(g.value&&g.value.$el){const L=g.value.$el.querySelector("input");L&&L.focus()}},100)}}),je(()=>m.value.type,L=>{R();const j={project:"gitignore-project",project_sensitive:"gitignore-project_sensitive",course:"gitignore-course",presentation:"gitignore-presentation"};m.value.git.gitignore_template=j[L]||"gitignore-project"}),je(()=>m.value.git.gitignore_template,L=>{L&&X(L)}),je(()=>m.value.name,()=>{r.value?.global?.projects_root&&ne()}),je(()=>m.value.ai.enabled,L=>{L&&m.value.ai.canonical_file&&de(m.value.ai.canonical_file,m.value.type)}),je(()=>m.value.ai.canonical_file,L=>{L&&m.value.ai.enabled&&de(L,m.value.type)}),je(()=>m.value.type,L=>{m.value.ai.canonical_file==="CLAUDE.md"&&m.value.ai.enabled&&de("CLAUDE.md",L)});const R=()=>{if(!o.value?.project_types)return;const L=o.value.project_types[m.value.type];if(!L?.directories)return;const j=r.value?.project_types?.[m.value.type];if(!m.value.git.gitignore_template||m.value.git.gitignore_template==="gitignore-project"){const ve={project:"gitignore-project",project_sensitive:"gitignore-sensitive",course:"gitignore-course",presentation:"gitignore-presentation"};m.value.git.gitignore_template=ve[m.value.type]||"gitignore-project"}X(m.value.git.gitignore_template);const B=Yx(L,j||{},{},{});m.value.directories=B.directories,m.value.directories_enabled=B.directories_enabled,m.value.render_dirs=B.render_dirs,m.value.extra_directories=B.extra_directories||[],m.value.extra_directories_enabled=j?.extra_directories_enabled||{};const pe=L?.quarto?.render_dir;pe&&(m.value.quarto.render_dir=typeof pe=="object"&&pe.default||pe),console.log("[DEBUG] loadProjectTypeDefaults() finished - packages still:",m.value.packages.default_packages)},U=L=>o.value?.project_types?.[L]?.label||L,N=(L="")=>{const j={};return L.split(/\r?\n/).forEach(B=>{const pe=B.trim();if(!pe||pe.startsWith("#")||!pe.includes("="))return;const[ve,...Ae]=pe.split("=");j[ve.trim()]=Ae.join("=").replace(/^"|"$/g,"")}),j},A=(L={})=>{const j=Object.entries(L);return j.length?j.reduce((B,[pe,ve])=>{const Ae=pe.includes("_")?pe.split("_")[0]:"Other";return B[Ae]||(B[Ae]={}),B[Ae][pe]={defined:!!ve,used:!1,used_in:[],value:ve},B},{}):{}};je(()=>m.value.env.variables,L=>{m.value.env.groups=A(L||{})},{deep:!0});const w=()=>{m.value.env.rawContent&&(m.value.env.variables=N(m.value.env.rawContent),m.value.env.groups=A(m.value.env.variables))},M=z(()=>({overview:"Overview",basics:"Basics",author:"Author & Metadata",scaffold:"Scaffold Behavior",structure:"Project Structure",quarto:"Quarto",connections:"Connections",env:".env Defaults",packages:"Packages & Dependencies",ai:"AI Assistants",git:"Git & Hooks",review:"Review & Create"})[f.value]||"New Project"),G=z(()=>({overview:"Quick overview of your project settings. We used your Framework Project Defaults as a starting point.",basics:"Essential project settings including name, location, type, and editor support.",author:"Configure author information embedded in project templates.",scaffold:"Runtime settings that control what happens when scaffold() runs.",structure:"Customize which directories to create for this project type.",quarto:"Adjust Quarto rendering defaults for notebooks, docs, and slides.",connections:"Database and storage connections for this project.",env:"Environment variables template for this project.",packages:"Configure package management and default packages.",ai:"Configure AI assistant integration for this project.",git:"Configure version control and git hooks.",review:"Review your project configuration and create the project."})[f.value]||"");z(()=>({vscode:"Positron / VS Code",rstudio:"RStudio","rstudio,vscode":"Both",none:"Other"})[m.value.scaffold.ide]||m.value.scaffold.ide),z(()=>{const L=[];return m.value.git.hooks.ai_sync&&L.push("Sync AI files"),m.value.git.hooks.data_security&&L.push("Check for secrets"),m.value.git.hooks.check_sensitive_dirs&&L.push("Warn about sensitive dirs"),L});const ue=z(()=>{const L=m.value.connections.databaseConnections.length,j=m.value.connections.s3Connections.length;return{databases:L,buckets:j}}),ie=z(()=>{const L=m.value.env?.variables||{};return Object.keys(L).length});je(()=>m.value.connections.databaseConnections,L=>{const j=m.value.connections.defaultDatabase,B=L.some(pe=>pe.name===j);if(L.length===1){const pe=L[0];pe?.name&&pe.name!=="framework_db"&&(m.value.connections.defaultDatabase=pe.name)}else j&&!B&&(m.value.connections.defaultDatabase=null)},{deep:!0}),je(()=>m.value.connections.s3Connections,L=>{const j=m.value.connections.defaultStorageBucket,B=L.some(pe=>pe.name===j);if(L.length===1){const pe=L[0];pe?.name&&(m.value.connections.defaultStorageBucket=pe.name)}else j&&!B&&(m.value.connections.defaultStorageBucket=null)},{deep:!0});const F=z(()=>{const L=m.value.name||"Untitled Project",j=m.value.author?.name||"",B=ee.value,pe=U(m.value.type),ve=$e("workspace"),Ae=$e("input"),Me=$e("output"),ze=m.value.packages?.default_packages?.length||0,Xe=m.value.packages?.use_renv||!1,ye=ie.value,vt=m.value.ai?.enabled||!1,Lt=m.value.ai?.assistants?.[0]?m.value.ai.assistants.map(ct=>ct.charAt(0).toUpperCase()+ct.slice(1)).join(", "):"",$t=m.value.ai?.canonical_file||"",Gt=m.value.git?.initialize||!1,St=ue.value.databases,on=ue.value.buckets,Ct=St>0||on>0?`${St} database${St!==1?"s":""}${on>0?`  ${on} bucket${on!==1?"s":""}`:""}`:"framework_db only";return[{id:"basics",title:"Basics",section:"basics",content:`<div>${L}  ${j}  ${pe}</div><div class="text-sm text-gray-600 dark:text-gray-400 mt-1">${B}</div>`},{id:"structure",title:"Project Structure",section:"structure",content:`${pe}  ${ve} workspace  ${Ae} input  ${Me} output`},{id:"packages",title:"Packages",section:"packages",content:ze>0?`${ze} packages  renv ${Xe?"enabled":"disabled"}`:`renv: ${Xe?"enabled":"disabled"}`},{id:"env",title:".env Defaults",section:"env",content:ye>0?`${ye} variable${ye===1?"":"s"}`:"No variables defined"},{id:"ai",title:"AI Assistants",section:"ai",content:vt?`${Lt}  ${$t}`:"Disabled"},{id:"git",title:"Git & Hooks",section:"git",content:`Git: ${Gt?"enabled":"disabled"}`},{id:"connections",title:"Connections",section:"connections",content:Ct},{id:"scaffold",title:"Scaffold Behavior",section:"scaffold",content:`${m.value.scaffold?.source_all_functions?"Functions loaded from functions/":"Does not load functions"}  ${m.value.scaffold?.set_theme_on_scaffold?`ggplot2: ${(m.value.scaffold.ggplot_theme||"theme_minimal").replace("theme_","")}`:"No ggplot theme"}  ${m.value.scaffold?.set_seed?`Seed: ${m.value.scaffold.seed}`:"No random seed"}`}]}),ae=z({get(){return Fp({useGit:m.value.git.initialize,gitHooks:m.value.git.hooks,git:m.value.git})},set(L){Up({gitTarget:m.value.git,setUseGit:j=>{m.value.git.initialize=j}},L)}}),ee=z(()=>{const L=m.value.location,j=r.value?.global?.projects_root;return!L||L===j?"(not set)":L}),V=L=>{m.value.location=L;const j=r.value?.global?.projects_root||"",B=typeof L=="string"?L.trim():"";!B||j&&B===j?(k.value=!0,ne()):k.value=!1},J=L=>L?L.startsWith("http")?L:new URL(L,globalThis.location?.origin||"http://localhost").toString():"",X=async L=>{try{const j=await fetch(J(`/api/templates/${L}`));if(j.ok){const B=await j.json();B.success&&B.contents&&(m.value.git.gitignore_content=B.contents)}}catch(j){console.error("Failed to load gitignore template:",j)}},de=async(L,j)=>{try{let B;if(L==="CLAUDE.md")switch(j){case"project_sensitive":B="ai_claude_sensitive";break;case"course":B="ai_claude_course";break;case"presentation":B="ai_claude_presentation";break;default:B="ai_claude_project"}else L==="AGENTS.md"?B="ai_agents":L===".github/copilot-instructions.md"&&(B="ai_copilot");const pe=await fetch(J(`/api/templates/${B}`));if(pe.ok){const ve=await pe.json();ve.success&&ve.contents&&(m.value.ai.canonical_content=ve.contents)}}catch(B){console.error("Failed to load AI template:",B)}};z(()=>o.value?.project_types?o.value.project_types[m.value.type]?.directories||{}:{}),z(()=>{if(!o.value?.project_types)return[];const L=o.value.project_types[m.value.type];return L?.directories?Object.keys(L.directories).filter(j=>{const B=L.directories[j];return B&&B.enabled_by_default===!1}):[]}),z(()=>Object.values(m.value.directories_enabled).filter(L=>L).length);const Ce=z(()=>(m.value.extra_directories||[]).filter(L=>L.type==="input"&&L._source==="global"));z(()=>Ce.value.filter(L=>L.scope==="private")),z(()=>Ce.value.filter(L=>L.scope==="public")),z(()=>(m.value.extra_directories||[]).filter(L=>L.type==="workspace"&&L._source==="global"));const Te=z(()=>(m.value.extra_directories||[]).filter(L=>L.type==="output"&&L._source==="global"));z(()=>Te.value.filter(L=>L.scope==="private")),z(()=>Te.value.filter(L=>L.scope==="public"));const $e=L=>Object.keys(m.value.directories_enabled).filter(B=>m.value.directories_enabled[B]?L==="workspace"?B==="notebooks"||B==="scripts"||B==="functions":L==="input"?B.startsWith("inputs_"):L==="output"?B.startsWith("outputs_"):L==="temporary"?B==="scratch"||B==="cache":!1:!1).length,me=[{key:"notebooks",label:"Notebooks",hint:"Quarto or R Markdown notebooks for analysis.",defaultRenderDir:"outputs/notebooks"},{key:"docs",label:"Documentation",hint:"Codebooks, documentation, and other reference materials.",defaultRenderDir:"outputs/docs"}],qe=[{key:"functions",label:"Functions",hint:"R files here are sourced by scaffold(), so helper functions are available in every project session."},{key:"scripts",label:"Scripts",hint:"Reusable R scripts, job runners, or automation tasks."}],rt=[{key:"inputs_raw",label:"Raw data",hint:"Read-only exports from source systems."},{key:"inputs_intermediate",label:"Intermediate data",hint:"Data after light cleaning or pre-processing steps."},{key:"inputs_final",label:"Analysis-ready data",hint:"Final inputs ready for modeling or reporting."}],pt=[{key:"outputs_tables",label:"Tables",hint:"Publishable tables ready for reports or manuscripts."},{key:"outputs_figures",label:"Figures",hint:"Final plots and graphics."},{key:"outputs_models",label:"Models",hint:"Serialized models or model summaries."},{key:"outputs_reports",label:"Reports",hint:"Final reports and deliverables ready for publication."}],ot=[{key:"scratch",label:"Scratch",hint:"Short-lived explorations (gitignored)."}],le=[{privateKey:"inputs_private_raw",publicKey:"inputs_public_raw",label:"Raw data",privateLabel:"Raw data (private)",publicLabel:"Raw data (public)"},{privateKey:"inputs_private_intermediate",publicKey:"inputs_public_intermediate",label:"Intermediate data",privateLabel:"Intermediate data (private)",publicLabel:"Intermediate data (public)"},{privateKey:"inputs_private_final",publicKey:"inputs_public_final",label:"Analysis-ready data",privateLabel:"Analysis-ready data (private)",publicLabel:"Analysis-ready data (public)"}],te=[{privateKey:"outputs_private_tables",publicKey:"outputs_public_tables",label:"Tables",privateLabel:"Tables (private)",publicLabel:"Tables (public)"},{privateKey:"outputs_private_figures",publicKey:"outputs_public_figures",label:"Figures",privateLabel:"Figures (private)",publicLabel:"Figures (public)"},{privateKey:"outputs_private_models",publicKey:"outputs_public_models",label:"Models",privateLabel:"Models (private)",publicLabel:"Models (public)"},{privateKey:"outputs_private_reports",publicKey:"outputs_public_reports",label:"Reports",privateLabel:"Reports (private)",publicLabel:"Reports (public)"}],W=(L,j)=>o.value?.project_types?.[L]?.directories?.[j]||{},E=(L,j)=>j.map(B=>{const pe=W(L,B.key);return{key:B.key,label:pe.label||B.label,hint:pe.hint||B.hint||""}});z(()=>E("project",me).map(L=>({...L,defaultRenderDir:me.find(j=>j.key===L.key)?.defaultRenderDir||""}))),z(()=>E("project",qe)),z(()=>E("project",rt)),z(()=>E("project",pt)),z(()=>E("project",ot));const re=L=>L.map(j=>{const B=W("project_sensitive",j.privateKey),pe=W("project_sensitive",j.publicKey);return{...j,privateLabel:B.label||j.privateLabel,publicLabel:pe.label||j.publicLabel}});z(()=>re(le)),z(()=>re(te));const D=z(()=>Array.isArray(m.value.extra_directories)?m.value.extra_directories:[]),$=L=>{m.value.extra_directories=L},K=()=>{if(!o.value?.project_types?.[m.value.type])return;const L=o.value.project_types[m.value.type];L.directories&&(m.value.directories={},Object.keys(L.directories).forEach(j=>{m.value.directories[j]=L.directories[j].default})),L.directories&&(m.value.directories_enabled={},Object.keys(L.directories).forEach(j=>{m.value.directories_enabled[j]=L.directories[j].enabled_by_default===!0})),m.value.render_dirs={},L.gitignore_template&&(m.value.git.gitignore_content=L.gitignore_template)},oe=L=>{e.push({query:{...t.query,section:L}})},ne=()=>{if(!k.value||!m.value.name||!m.value.name.trim())return;const L=r.value?.global?.projects_root||"";if(!L)return;const j=(m.value.location||"").trim();if(j&&!j.startsWith(L))return;const B=m.value.name.toLowerCase().trim().replace(/[\s_]+/g,"-").replace(/[^a-z0-9-]/g,"").replace(/-+/g,"-").replace(/^-|-$/g,"");if(!B){m.value.location=L;return}const pe=L.replace(/\/+$/,"");m.value.location=`${pe}/${B}`},se=async()=>{if(!m.value.name||!m.value.name.trim()){s.error("Validation Error","Project name is required"),oe("overview");return}if(!m.value.location||!m.value.location.trim()){s.error("Validation Error","Project location is required"),oe("overview");return}try{p.value=!0;const L=o.value?.project_types?.[m.value.type],j={};L?.directories&&Object.entries(L.directories).forEach(([Me,ze])=>{m.value.directories_enabled[Me]&&(j[Me]=m.value.directories[Me]||ze.default)});const B=Hp({databaseConnections:m.value.connections.databaseConnections,s3Connections:m.value.connections.s3Connections,defaultDatabase:m.value.connections.defaultDatabase,defaultStorageBucket:m.value.connections.defaultStorageBucket}),pe={name:m.value.name.trim(),location:m.value.location.trim(),type:m.value.type,author:m.value.author,scaffold:m.value.scaffold,packages:Zx(m.value.packages),ai:m.value.ai,git:m.value.git,connections:B,env:{raw:m.value.env.rawContent||""},quarto:m.value.quarto,directories:j,render_dirs:m.value.render_dirs||{},extra_directories:(m.value.extra_directories||[]).filter(Me=>{const ze=Me.key&&Me.key.trim()&&Me.label&&Me.label.trim()&&Me.path&&Me.path.trim(),Xe=m.value.extra_directories_enabled?.[Me.key]!==!1;return ze&&Xe}),extra_directories_enabled:m.value.extra_directories_enabled||{}},ve=await fetch("/api/projects/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(pe)});if(!ve.ok){const Me=await ve.json();throw new Error(Me.message||"Failed to create project")}const Ae=await ve.json();if(Ae.success===!1)throw new Error(Ae.error||"Project creation failed");s.success("Project Created",`${m.value.name} has been created successfully`),await i(),Ae.project_id?e.push(`/project/${Ae.project_id}`):e.push("/projects")}catch(L){console.error("Failed to create project:",L),s.error("Creation Failed",L.message||"Could not create the project")}finally{p.value=!1}},xe=L=>{(L.metaKey||L.ctrlKey)&&L.key==="s"&&(L.preventDefault(),se())};return Cn(()=>{window.addEventListener("keydown",xe)}),xo(()=>{window.removeEventListener("keydown",xe)}),(L,j)=>(v(),b("div",i$,[h("nav",r$,[j[29]||(j[29]=h("h2",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"New Project",-1)),h("div",o$,[(v(),b(be,null,Ve(d,B=>(v(),b(be,{key:B.id},[B.id==="basics"?(v(),we(Xu,{key:0},{default:Z(()=>[...j[28]||(j[28]=[ce("Settings",-1)])]),_:1})):H("",!0),h("a",{href:"#",onClick:Tt(pe=>f.value=B.id,["prevent"]),class:Se(["flex items-center gap-2 px-3 py-2 rounded-md text-sm transition",f.value===B.id?"bg-sky-50 text-sky-700 font-medium dark:bg-sky-900/20 dark:text-sky-400":"text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-800"])},[B.icon?(v(),we(Un(B.icon),{key:0,class:"h-4 w-4"})):B.svgIcon?(v(),b("svg",{key:1,class:"h-4 w-4",fill:B.svgFill??"none",viewBox:B.svgViewBox??"0 0 24 24",stroke:B.svgStroke??"currentColor"},[h("path",{"stroke-linecap":B.svgStrokeLinecap??"round","stroke-linejoin":B.svgStrokeLinejoin??"round","stroke-width":B.svgStrokeWidth??2,fill:B.svgPathFill??"none",d:B.svgIcon},null,8,u$)],8,a$)):H("",!0),ce(" "+Y(B.label),1)],10,l$)],64))),64))]),h("div",c$,[S(Ye,{variant:"primary",size:"md",class:"w-full",disabled:p.value||!m.value.name||!m.value.location,onClick:se},{default:Z(()=>[ce(Y(p.value?"Creating...":"Create Project"),1)]),_:1},8,["disabled"])])]),h("div",d$,[S(Ao,{title:M.value,description:G.value},null,8,["title","description"]),h("div",f$,[He(h("div",null,[S(Rp,{cards:F.value,onNavigate:j[0]||(j[0]=B=>f.value=B)},null,8,["cards"])],512),[[nt,f.value==="overview"]]),He(h("div",null,[h("div",h$,[h("div",p$,[S(Ee,{ref_key:"projectNameInput",ref:g,modelValue:m.value.name,"onUpdate:modelValue":j[1]||(j[1]=B=>m.value.name=B),label:"Project Name",hint:"Human-readable name for your project",placeholder:"My Analysis Project",required:""},null,8,["modelValue"]),S(Ee,{"model-value":m.value.location,"onUpdate:modelValue":V,label:"Project Location",hint:"Directory where the project will be created",placeholder:"e.g., ~/projects or /Users/yourname/code"},null,8,["model-value"]),S(bn,{modelValue:m.value.type,"onUpdate:modelValue":j[2]||(j[2]=B=>m.value.type=B),label:"Project Type",hint:"Choose the template structure for your project"},{default:Z(()=>[...j[30]||(j[30]=[h("option",{value:"project"},"Standard Project",-1),h("option",{value:"project_sensitive"},"Privacy Sensitive Project",-1),h("option",{value:"course"},"Course",-1),h("option",{value:"presentation"},"Presentation",-1)])]),_:1},8,["modelValue"]),h("div",null,[j[32]||(j[32]=h("label",{class:"block text-sm font-semibold text-gray-900 dark:text-white mb-3"}," Supported Editors ",-1)),S(ri,{modelValue:m.value.scaffold.positron,"onUpdate:modelValue":j[3]||(j[3]=B=>m.value.scaffold.positron=B),id:"support-positron",description:"Creates .code-workspace file for Positron/VS Code users"},{default:Z(()=>[...j[31]||(j[31]=[ce(" Positron / VS Code ",-1)])]),_:1},8,["modelValue"]),j[33]||(j[33]=h("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-3"}," RStudio supported by default ",-1))]),S(bn,{modelValue:m.value.scaffold.notebook_format,"onUpdate:modelValue":j[4]||(j[4]=B=>m.value.scaffold.notebook_format=B),label:"Default Notebook Format",hint:"Format used when creating new notebooks"},{default:Z(()=>[...j[34]||(j[34]=[h("option",{value:"quarto"},"Quarto (.qmd)",-1),h("option",{value:"rmarkdown"},"R Markdown (.Rmd)",-1)])]),_:1},8,["modelValue"]),h("div",m$,[S(Op,{modelValue:m.value.author,"onUpdate:modelValue":j[5]||(j[5]=B=>m.value.author=B)},null,8,["modelValue"])])])])],512),[[nt,f.value==="basics"]]),He(h("div",null,[h("div",g$,[j[35]||(j[35]=h("div",null,[h("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"}," Scaffold Behavior "),h("p",{class:"text-sm text-gray-600 dark:text-gray-400"},[ce(" Automatic actions when "),h("code",{class:"px-1.5 py-0.5 bg-gray-200 dark:bg-gray-700 rounded text-xs"},"scaffold()"),ce(" runs to initialize your project environment. ")])],-1)),S(jp,{modelValue:m.value.scaffold,"onUpdate:modelValue":j[6]||(j[6]=B=>m.value.scaffold=B),flush:""},null,8,["modelValue"])])],512),[[nt,f.value==="scaffold"]]),He(h("div",v$,[h("div",y$,[S(KD,{legend:"Project Type",description:"Select a project type to customize the directory structure."},{default:Z(()=>[S(Ca,{modelValue:m.value.type,"onUpdate:modelValue":j[7]||(j[7]=B=>m.value.type=B),id:"type-project",name:"project-type",value:"project"},{default:Z(()=>[...j[36]||(j[36]=[h("div",null,[h("div",{class:"font-medium text-sm"},"Standard Project"),h("div",{class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5"}," Full-featured with organized data, work, and output directories ")],-1)])]),_:1},8,["modelValue"]),S(Ca,{modelValue:m.value.type,"onUpdate:modelValue":j[8]||(j[8]=B=>m.value.type=B),id:"type-sensitive",name:"project-type",value:"project_sensitive"},{default:Z(()=>[...j[37]||(j[37]=[h("div",null,[h("div",{class:"font-medium text-sm"},"Privacy Sensitive Project"),h("div",{class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5"}," Enhanced privacy controls with separate private/public flows ")],-1)])]),_:1},8,["modelValue"]),S(Ca,{modelValue:m.value.type,"onUpdate:modelValue":j[9]||(j[9]=B=>m.value.type=B),id:"type-course",name:"project-type",value:"course"},{default:Z(()=>[...j[38]||(j[38]=[h("div",null,[h("div",{class:"font-medium text-sm"},"Course/Teaching"),h("div",{class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5"}," Simplified structure for teaching materials ")],-1)])]),_:1},8,["modelValue"]),S(Ca,{modelValue:m.value.type,"onUpdate:modelValue":j[10]||(j[10]=B=>m.value.type=B),id:"type-presentation",name:"project-type",value:"presentation"},{default:Z(()=>[...j[39]||(j[39]=[h("div",null,[h("div",{class:"font-medium text-sm"},"Presentation"),h("div",{class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5"}," Minimal structure for slides and presentations ")],-1)])]),_:1},8,["modelValue"])]),_:1})]),o.value?(v(),we(Np,{key:0,"project-type":m.value.type,directories:m.value.directories,"render-dirs":m.value.render_dirs,enabled:m.value.directories_enabled,"extra-directories":D.value,settings:m.value,gitignore:m.value.git.gitignore_content,catalog:o.value.project_types?.[m.value.type],"new-extra-ids":x.value,"allow-destruction":!0,"onUpdate:directories":j[11]||(j[11]=B=>m.value.directories=B),"onUpdate:renderDirs":j[12]||(j[12]=B=>m.value.render_dirs=B),"onUpdate:enabled":j[13]||(j[13]=B=>m.value.directories_enabled=B),"onUpdate:extraDirectories":$,"onUpdate:gitignore":j[14]||(j[14]=B=>m.value.git.gitignore_content=B),"onUpdate:newExtraIds":j[15]||(j[15]=B=>x.value=B),onReset:K},null,8,["project-type","directories","render-dirs","enabled","extra-directories","settings","gitignore","catalog","new-extra-ids"])):H("",!0)],512),[[nt,f.value==="structure"]]),He(h("div",null,[S(gn,{flush:""},{default:Z(()=>[S($p,{modelValue:m.value.quarto,"onUpdate:modelValue":j[16]||(j[16]=B=>m.value.quarto=B)},null,8,["modelValue"])]),_:1})],512),[[nt,f.value==="quarto"]]),He(h("div",null,[S(Vp,{"database-connections":m.value.connections.databaseConnections,"onUpdate:databaseConnections":j[17]||(j[17]=B=>m.value.connections.databaseConnections=B),"s3-connections":m.value.connections.s3Connections,"onUpdate:s3Connections":j[18]||(j[18]=B=>m.value.connections.s3Connections=B),"default-database":m.value.connections.defaultDatabase,"onUpdate:defaultDatabase":j[19]||(j[19]=B=>m.value.connections.defaultDatabase=B),"default-storage-bucket":m.value.connections.defaultStorageBucket,"onUpdate:defaultStorageBucket":j[20]||(j[20]=B=>m.value.connections.defaultStorageBucket=B)},null,8,["database-connections","s3-connections","default-database","default-storage-bucket"])],512),[[nt,f.value==="connections"]]),He(h("div",null,[j[40]||(j[40]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Environment variables template for this project. These defaults help connections work immediately. ",-1)),S(Bp,{groups:m.value.env.groups,variables:m.value.env.variables,"onUpdate:variables":j[21]||(j[21]=B=>m.value.env.variables=B),"raw-content":m.value.env.rawContent,"onUpdate:rawContent":j[22]||(j[22]=B=>m.value.env.rawContent=B),"view-mode":m.value.env.viewMode,"onUpdate:viewMode":j[23]||(j[23]=B=>m.value.env.viewMode=B),"regroup-on-save":m.value.env.regroupOnSave,"onUpdate:regroupOnSave":j[24]||(j[24]=B=>m.value.env.regroupOnSave=B),"show-save-button":!1,"allow-show-values-toggle":!0},null,8,["groups","variables","raw-content","view-mode","regroup-on-save"])],512),[[nt,f.value==="env"]]),He(h("div",null,[S(Lp,{modelValue:m.value.packages,"onUpdate:modelValue":j[25]||(j[25]=B=>m.value.packages=B),"show-renv-toggle":!0,flush:!1},null,8,["modelValue"])],512),[[nt,f.value==="packages"]]),He(h("div",null,[h("div",b$,[j[42]||(j[42]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Framework maintains context files for selected assistants and keeps them in sync before commits. ",-1)),S(Mp,{modelValue:m.value.ai,"onUpdate:modelValue":j[26]||(j[26]=B=>m.value.ai=B),flush:!0,"show-editor":!0,"editor-height":"500px"},{"editor-description":Z(()=>[...j[41]||(j[41]=[ce(" Edit the canonical file directly. This will be pre-populated when the project is created. ",-1)])]),_:1},8,["modelValue"])])],512),[[nt,f.value==="ai"]]),He(h("div",null,[S(Ip,{modelValue:ae.value,"onUpdate:modelValue":j[27]||(j[27]=B=>ae.value=B)},{note:Z(()=>[...j[43]||(j[43]=[ce(" Project-specific .gitignore templates can be customized in Project Defaults. ",-1)])]),_:1},8,["modelValue"])],512),[[nt,f.value==="git"]])])])]))}},x$={class:"mt-2 block text-sm font-semibold text-gray-900 dark:text-white"},_$={key:0,class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},w$={class:"mt-2 text-sm font-semibold text-gray-900 dark:text-white"},S$={key:0,class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},C$={key:1,class:"mt-6"},Hl={__name:"EmptyState",props:{title:{type:String,required:!0},description:{type:String,default:null},icon:{type:String,default:null,validator:n=>["database","folder","document","users","inbox","photo"].includes(n)},action:{type:Boolean,default:!1}},emits:["click"],setup(n,{emit:e}){const t=n,s=e,i=z(()=>{const l=["relative","block","w-full","rounded-lg","border-2","border-dashed","border-gray-300","p-12","text-center","dark:border-white/15"];return t.action&&l.push("hover:border-gray-400","focus:outline-2","focus:outline-offset-2","focus:outline-sky-600","dark:hover:border-white/25","dark:focus:outline-sky-500","transition-colors"),l.join(" ")}),r=z(()=>({database:()=>zt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[zt("path",{d:"M8 14v20c0 4.418 7.163 8 16 8 1.381 0 2.721-.087 4-.252M8 14c0 4.418 7.163 8 16 8s16-3.582 16-8M8 14c0-4.418 7.163-8 16-8s16 3.582 16 8m0 0v14m0-4c0 4.418-7.163 8-16 8S8 28.418 8 24m32 10v6m0 0v6m0-6h6m-6 0h-6"})]),folder:()=>zt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[zt("path",{d:"M3 7v30a4 4 0 004 4h34a4 4 0 004-4V13a4 4 0 00-4-4H23.343a4 4 0 01-2.829-1.172l-2.828-2.828A4 4 0 0014.858 4H7a4 4 0 00-4 4v0zM37 17v6m0 0v6m0-6h6m-6 0h-6"})]),document:()=>zt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[zt("path",{d:"M8 4a4 4 0 00-4 4v32a4 4 0 004 4h32a4 4 0 004-4V8a4 4 0 00-4-4H8zm24 16v6m0 0v6m0-6h6m-6 0h-6"})]),users:()=>zt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[zt("path",{d:"M17 21a5 5 0 110-10 5 5 0 010 10zm-6.5 8a7.5 7.5 0 0115 0H10.5zM31 21a5 5 0 110-10 5 5 0 010 10zm-6.5 8a7.5 7.5 0 0115 0H24.5z"})]),inbox:()=>zt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[zt("path",{d:"M4 8h40M4 8v28a4 4 0 004 4h32a4 4 0 004-4V8M4 8l18 14a2 2 0 002.4 0L44 8"})]),photo:()=>zt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[zt("path",{d:"M4 8a4 4 0 014-4h32a4 4 0 014 4v32a4 4 0 01-4 4H8a4 4 0 01-4-4V8zm10 6a3 3 0 100-6 3 3 0 000 6zM4 40l12-12 8 8 8-8L44 40"})])})[t.icon]||null),o=()=>{t.action&&s("click")};return(l,a)=>n.action?(v(),b("button",{key:0,type:"button",onClick:o,class:Se(i.value)},[ht(l.$slots,"icon",{},()=>[n.icon?(v(),we(Un(r.value),{key:0,class:"mx-auto size-12 text-gray-400 dark:text-gray-500"})):H("",!0)]),h("span",x$,Y(n.title),1),n.description?(v(),b("p",_$,Y(n.description),1)):H("",!0)],2)):(v(),b("div",{key:1,class:Se(i.value.replace("hover:border-gray-400","").replace("focus:outline-2",""))},[ht(l.$slots,"icon",{},()=>[n.icon?(v(),we(Un(r.value),{key:0,class:"mx-auto size-12 text-gray-400 dark:text-gray-500"})):H("",!0)]),h("h3",w$,Y(n.title),1),n.description?(v(),b("p",S$,Y(n.description),1)):H("",!0),l.$slots.actions?(v(),b("div",C$,[ht(l.$slots,"actions")])):H("",!0)],2))}},A$=["aria-labelledby"],Ys={__name:"TabPanel",props:{id:{type:[String,Number],required:!0},active:{type:Boolean,required:!0}},setup(n){return(e,t)=>He((v(),b("div",{role:"tabpanel","aria-labelledby":`tab-${n.id}`},[ht(e.$slots,"default")],8,A$)),[[nt,n.active]])}},E$=["for"],T$={class:"mt-2"},D$=["id","value","placeholder","rows","required","disabled"],P$={key:1,class:"mt-2 text-sm text-gray-500 dark:text-gray-400"},Dv={__name:"Textarea",props:{id:{type:String,default:()=>`textarea-${Math.random().toString(36).substr(2,9)}`},modelValue:{type:String,default:""},label:{type:String,default:null},placeholder:{type:String,default:""},rows:{type:Number,default:4},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},hint:{type:String,default:null},monospace:{type:Boolean,default:!1},textareaClass:{type:[String,Array,Object],default:""}},emits:["update:modelValue"],setup(n){const e=n,t=z(()=>["block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-sky-600 sm:text-sm/6 dark:bg-white/5 dark:text-white dark:outline-white/10 dark:placeholder:text-gray-500 dark:focus:outline-sky-500",e.monospace?"font-mono text-sm leading-6":"",e.textareaClass]);return(s,i)=>(v(),b("div",null,[n.label?(v(),b("label",{key:0,for:n.id,class:"block text-sm/6 font-medium text-gray-900 dark:text-white"},Y(n.label),9,E$)):H("",!0),h("div",T$,[h("textarea",{id:n.id,value:n.modelValue,placeholder:n.placeholder,rows:n.rows,required:n.required,disabled:n.disabled,onInput:i[0]||(i[0]=r=>s.$emit("update:modelValue",r.target.value)),class:Se(t.value)},null,42,D$)]),n.hint?(v(),b("p",P$,Y(n.hint),1)):H("",!0)]))}},R$={class:"space-y-6"},O$={key:0},L$={class:"mt-1 font-mono text-sm text-gray-900 dark:text-gray-100 break-words"},M$={key:1},I$={class:"grid gap-4 sm:grid-cols-2"},j$=["value"],V$={class:"sm:col-span-2"},$$={key:0,class:"sm:col-span-2"},N$={class:"space-y-3"},B$={class:"flex items-center justify-between"},F$={key:0,class:"rounded-md border border-dashed border-gray-300 p-4 text-sm text-gray-500 dark:border-gray-600 dark:text-gray-400"},U$={class:"grid gap-3 sm:grid-cols-[1fr_auto] sm:items-start"},z$={class:"mt-3"},H$={key:0,class:"mt-2 text-xs text-gray-500 dark:text-gray-400"},W$={class:"mt-2 flex justify-end"},q$={key:2,class:"text-sm text-red-600 dark:text-red-400"},G$={key:3,class:"text-sm text-red-600 dark:text-red-400"},K$={key:4,class:"text-sm text-red-600 dark:text-red-400"},J$='{"source": "data-catalog"}',Q$={__name:"DataCatalogEditModal",props:{modelValue:{type:Boolean,default:!1},mode:{type:String,default:"edit",validator:n=>["edit","create"].includes(n)},entry:{type:Object,default:null},saving:{type:Boolean,default:!1},error:{type:String,default:null}},emits:["update:modelValue","save"],setup(n,{emit:e}){const t=n,s=e,i=Object.freeze([{value:"csv",label:"CSV (comma-separated)"},{value:"tsv",label:"TSV (tab-separated)"},{value:"csv_custom",label:"Delimited text (custom)"},{value:"rds",label:"RDS (R serialized)"},{value:"excel",label:"Excel (.xlsx / .xls)"},{value:"stata",label:"Stata (.dta)"},{value:"spss",label:"SPSS (.sav / .zsav)"},{value:"spss_por",label:"SPSS Portable (.por)"},{value:"sas",label:"SAS (.sas7bdat / .sas7bcat)"},{value:"sas_xpt",label:"SAS Transport (.xpt)"}]),r=["path","type","description","locked","delimiter"],o=Q(null),l=Q(!1),a=Q(!1),u=z(()=>t.mode==="create"),c=gs({path:"",fullKey:"",type:"",description:"",delimiter:"",locked:!1,additionalFields:[]}),d=z(()=>c.type==="csv_custom"),f=z(()=>{if(!t.entry&&!u.value)return null;const J=G();return J.length>0?`Duplicate metadata keys: ${J.join(", ")}`:c.additionalFields.some(X=>!X.key.trim())?"Metadata keys cannot be empty.":null}),p=z(()=>c.path.trim()?null:"File path is required"),g=z(()=>u.value?a.value?p.value:null:p.value);je(()=>t.entry,J=>{if(!J){N();return}U(J)},{immediate:!0}),je(()=>c.path,J=>{if(l.value)return;const X=_(J);X&&(X.type==="csv"?(c.type="csv",c.delimiter=x("csv")):X.type==="tsv"?(c.type="tsv",c.delimiter=x("tsv")):(c.type=X.type,c.delimiter=""))}),je(()=>c.type,J=>{J&&(J==="csv"?c.delimiter=x("csv"):J==="tsv"?c.delimiter=x("tsv"):J!=="csv_custom"&&(c.delimiter=""))});function k(){return`field-${Math.random().toString(36).slice(2,9)}`}function x(J){return J==="csv"?"comma":J==="tsv"?"tab":""}function m(J,X){if(!J)return!1;const de=J.toLowerCase();return X==="csv"?de==="comma"||J===",":X==="tsv"?de==="tab"||J==="	":!1}function _(J){if(!J)return null;const X=J.toLowerCase();return X.endsWith(".csv")?{type:"csv",delimiter:"comma"}:X.endsWith(".tsv")||X.endsWith(".txt")||X.endsWith(".dat")?{type:"tsv",delimiter:"tab"}:X.endsWith(".rds")?{type:"rds",delimiter:""}:X.endsWith(".xlsx")||X.endsWith(".xls")?{type:"excel",delimiter:""}:X.endsWith(".dta")?{type:"stata",delimiter:""}:X.endsWith(".sav")||X.endsWith(".zsav")?{type:"spss",delimiter:""}:X.endsWith(".por")?{type:"spss_por",delimiter:""}:X.endsWith(".sas7bdat")||X.endsWith(".sas7bcat")?{type:"sas",delimiter:""}:X.endsWith(".xpt")?{type:"sas_xpt",delimiter:""}:null}function R(J){if(!J){c.type="",c.delimiter="",l.value=!1;return}c.type=J,l.value=!0,J==="csv"?c.delimiter=x("csv"):J==="tsv"?c.delimiter=x("tsv"):c.delimiter=""}function U(J){if(N(),a.value=!1,u.value){const $e=J?.data||{};c.fullKey=J?.fullKey||"",c.path=$e.path||"",c.type=$e.type||"",c.description=$e.description||"",c.locked=!!$e.locked,c.delimiter=$e.delimiter||"",l.value=!1;return}const X=J.data||{};c.fullKey=J.fullKey||"",c.path=X.path||"";const de=_(c.path),Ce=X.type||de?.type||"";if(c.description=X.description||"",c.locked=!!X.locked,Ce==="csv"){const $e=X.delimiter||de?.delimiter||x("csv");m($e,"csv")?(c.type="csv",c.delimiter=x("csv")):$e?(c.type="csv_custom",c.delimiter=$e):(c.type="csv",c.delimiter=x("csv"))}else Ce==="tsv"?(c.type="tsv",c.delimiter=x("tsv")):(c.type=Ce,c.delimiter=d.value&&X.delimiter||"");!c.type&&de?.type&&(c.type=de.type,c.delimiter=de.delimiter||x(de.type)),l.value=!!X.type||c.type==="csv_custom";const Te=Object.entries(X).filter(([$e])=>!r.includes($e)).map(([$e,me])=>({id:k(),key:$e,valueInput:A(me),valueType:w(me),isMultiline:typeof me=="object"&&me!==null}));c.additionalFields=Te,o.value=null}function N(){c.path="",c.fullKey="",c.type="",c.description="",c.delimiter="",c.locked=!1,c.additionalFields=[],o.value=null,l.value=!1}function A(J){if(typeof J=="object"&&J!==null)try{return JSON.stringify(J,null,2)}catch{return""}return J==null?"":String(J)}function w(J){return Array.isArray(J)||typeof J=="object"&&J!==null?"object":typeof J=="boolean"?"boolean":typeof J=="number"?"number":"string"}function M(J){if(J.valueType==="object"){if(!J.valueInput.trim())return null;try{return JSON.parse(J.valueInput)}catch{throw new Error(`Invalid JSON for field "${J.key}"`)}}if(J.valueType==="number"){const X=Number(J.valueInput);if(Number.isNaN(X))throw new Error(`Value for "${J.key}" must be a number`);return X}if(J.valueType==="boolean"){const X=J.valueInput.trim().toLowerCase();if(["true","false"].includes(X))return X==="true";throw new Error(`Value for "${J.key}" must be "true" or "false"`)}return J.valueInput}function G(){const J=new Set,X=[];return c.additionalFields.forEach(de=>{const Ce=de.key.trim();Ce&&(J.has(Ce)||r.includes(Ce)?X.push(Ce):J.add(Ce))}),X}function ue(J){return J.key.trim()?r.includes(J.key.trim())?"Reserved key name":c.additionalFields.some(X=>X!==J&&X.key.trim()===J.key.trim())?"Duplicate key":null:"Key is required"}function ie(){c.additionalFields.push({id:k(),key:"",valueInput:"",valueType:"string",isMultiline:!1}),o.value=null}function F(J){c.additionalFields=c.additionalFields.filter(X=>X.id!==J)}function ae(J){J.isMultiline=!J.isMultiline,J.isMultiline?(J.valueType="object",J.valueInput&&!J.valueInput.trim().startsWith("{")&&(J.valueInput="")):(J.valueType="string",J.valueInput=J.valueInput!=null?String(J.valueInput):"")}const ee=()=>{if(o.value=null,a.value=!0,!(p.value||f.value)&&!(!u.value&&!t.entry))try{const J=V();s("save",J)}catch(J){o.value=J.message}},V=()=>{if(!c.path.trim())throw new Error("File path is required");const J={};J.path=c.path.trim();const X=c.type==="csv_custom"?"csv":c.type.trim();if(X&&(J.type=X),c.description.trim()&&(J.description=c.description.trim()),c.type==="csv_custom"){if(!c.delimiter.trim())throw new Error("Delimiter is required for custom delimited text sources");J.delimiter=c.delimiter.trim()}else c.delimiter.trim()&&!m(c.delimiter.trim(),c.type)&&(J.delimiter=c.delimiter.trim());c.locked&&(J.locked=!0);for(const Ce of c.additionalFields){const Te=Ce.key.trim();if(!Te||r.includes(Te))continue;const $e=M({...Ce,valueType:Ce.valueType??"string"});$e===null||$e===""||(J[Te]=$e)}const de=(u.value?c.fullKey:t.entry.fullKey||"").trim();if(!de)throw new Error("Dot notation key is required");return{fullKey:de,data:J,isNew:u.value}};return(J,X)=>(v(),we(kr,{"model-value":n.modelValue,variant:"left",size:"lg",title:"Edit Data Entry","onUpdate:modelValue":X[6]||(X[6]=de=>s("update:modelValue",de))},Uw({_:2},[n.entry||u.value?{name:"default",fn:Z(()=>[h("div",R$,[u.value?(v(),b("div",M$,[S(Ee,{modelValue:c.fullKey,"onUpdate:modelValue":X[0]||(X[0]=de=>c.fullKey=de),label:"Dot Notation Key",placeholder:"e.g., inputs.raw.custom_dataset",hint:"Use dot notation to place this entry within the catalog hierarchy."},null,8,["modelValue"])])):(v(),b("div",O$,[X[7]||(X[7]=h("p",{class:"text-xs font-medium uppercase tracking-wide text-gray-500 dark:text-gray-400"}," Data Key ",-1)),h("p",L$,Y(n.entry.fullKey),1)])),S(Ee,{modelValue:c.path,"onUpdate:modelValue":X[1]||(X[1]=de=>c.path=de),label:"File Path",placeholder:"inputs/raw/example.csv",required:"",error:g.value,monospace:"",hint:"Provide a path relative to the project root (e.g., inputs/raw/data.csv) or an absolute path."},null,8,["modelValue","error"]),h("div",I$,[S(bn,{"model-value":c.type,label:"Type","onUpdate:modelValue":R},{default:Z(()=>[X[8]||(X[8]=h("option",{disabled:"",value:""},"Select file type",-1)),(v(!0),b(be,null,Ve(Ke(i),de=>(v(),b("option",{key:de.value,value:de.value},Y(de.label),9,j$))),128))]),_:1},8,["model-value"]),h("div",V$,[S(Qe,{modelValue:c.locked,"onUpdate:modelValue":X[2]||(X[2]=de=>c.locked=de),label:"Locked",description:"Treat this data source as read-only."},null,8,["modelValue"])]),d.value?(v(),b("div",$$,[S(Ee,{modelValue:c.delimiter,"onUpdate:modelValue":X[3]||(X[3]=de=>c.delimiter=de),label:"Delimiter",placeholder:"e.g., tab or |",hint:"Use keywords 'tab', 'comma', 'semicolon', 'space' or supply a single character (e.g., |). Keywords map to their respective delimiters."},null,8,["modelValue"])])):H("",!0)]),S(Dv,{modelValue:c.description,"onUpdate:modelValue":X[4]||(X[4]=de=>c.description=de),label:"Description",placeholder:"Explain what this source contains or how it was produced.",rows:4},null,8,["modelValue"]),h("div",N$,[h("div",B$,[X[10]||(X[10]=h("h4",{class:"text-sm font-semibold text-gray-900 dark:text-gray-100"}," Additional Metadata ",-1)),S(Ye,{size:"sm",variant:"secondary",class:"shadow-none",onClick:ie},{default:Z(()=>[...X[9]||(X[9]=[ce(" Add Field ",-1)])]),_:1})]),X[12]||(X[12]=h("p",{class:"text-xs text-gray-500 dark:text-gray-400"}," Store any extra properties (e.g., source, codebook details). Complex values can be provided as JSON. ",-1)),c.additionalFields.length===0?(v(),b("div",F$," No additional metadata fields. ")):H("",!0),(v(!0),b(be,null,Ve(c.additionalFields,de=>(v(),b("div",{key:de.id,class:"rounded-md border border-gray-200 bg-white/80 p-4 dark:border-gray-700 dark:bg-gray-900/40"},[h("div",U$,[S(Ee,{modelValue:de.key,"onUpdate:modelValue":Ce=>de.key=Ce,label:"Key",placeholder:"e.g., source",error:ue(de)},null,8,["modelValue","onUpdate:modelValue","error"]),S(Ye,{size:"sm",variant:"secondary",class:"shadow-none",onClick:Ce=>F(de.id)},{default:Z(()=>[...X[11]||(X[11]=[ce(" Remove ",-1)])]),_:1},8,["onClick"])]),h("div",z$,[(v(),we(Un(de.isMultiline?Dv:Ee),{modelValue:de.valueInput,"onUpdate:modelValue":Ce=>de.valueInput=Ce,label:de.isMultiline?"Value (JSON)":"Value",rows:de.isMultiline?4:void 0,placeholder:de.isMultiline?J$:"comma",monospace:de.isMultiline?void 0:!1},null,8,["modelValue","onUpdate:modelValue","label","rows","placeholder","monospace"])),de.isMultiline?(v(),b("p",H$," Provide valid JSON to store complex data structures. ")):H("",!0),h("div",W$,[S(Ye,{size:"xs",variant:"soft",onClick:Ce=>ae(de)},{default:Z(()=>[ce(Y(de.isMultiline?"Use single-line value":"Use JSON value"),1)]),_:2},1032,["onClick"])])])]))),128))]),f.value?(v(),b("p",q$,Y(f.value),1)):H("",!0),o.value?(v(),b("p",G$,Y(o.value),1)):H("",!0),n.error?(v(),b("p",K$,Y(n.error),1)):H("",!0)])]),key:"0"}:void 0,n.entry?{name:"actions",fn:Z(()=>[S(Ye,{size:"sm",variant:"secondary",class:"shadow-none",onClick:X[5]||(X[5]=de=>s("update:modelValue",!1))},{default:Z(()=>[...X[13]||(X[13]=[ce(" Cancel ",-1)])]),_:1}),S(Ye,{size:"sm",disabled:n.saving,onClick:ee},{default:Z(()=>[ce(Y(n.saving?"Saving":"Save Entry"),1)]),_:1},8,["disabled"])]),key:"1"}:void 0]),1032,["model-value"]))}},e_=(n="")=>{const t=String(n??"").trim().replace(/[^a-zA-Z0-9]+/g,"-").replace(/^-+|-+$/g,"").toLowerCase();return t?`data-node-${t}`:"data-node-root"},Y$=["id"],X$=["aria-expanded"],Z$={class:"flex-1"},eN={key:0,class:"rounded bg-amber-200/70 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},tN={key:1},nN={class:"mt-1 text-xs text-zinc-500 dark:text-zinc-400"},sN={class:"text-xs font-medium uppercase tracking-wide text-zinc-500 dark:text-zinc-400"},iN={class:"flex items-start gap-3"},rN={class:"flex-1"},oN={key:0,class:"rounded bg-amber-200/70 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},lN={key:1},aN={class:"mt-1 text-xs text-zinc-500 dark:text-zinc-400"},uN=["id"],cN={class:"flex items-start justify-between gap-4"},dN={class:"min-w-0 flex items-center gap-2"},fN={class:"text-sm font-semibold text-gray-900 dark:text-white"},hN={key:0,class:"rounded bg-amber-200/70 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},pN={key:1},mN={key:0,class:"inline-flex items-center rounded-full border border-gray-200 bg-white px-2.5 py-1 text-xs font-medium text-gray-700 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-100"},gN={class:"flex items-center gap-2 shrink-0"},vN={class:"mt-5 space-y-4"},yN={key:0,class:"space-y-2"},bN={class:"text-sm leading-relaxed text-gray-600 dark:text-zinc-300"},kN={key:1,class:"flex items-start gap-3"},xN={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},_N={key:1,class:"h-4 w-4 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},wN={class:"min-w-0 flex-1"},SN={class:"mt-1 font-mono text-sm leading-relaxed text-gray-900 dark:text-zinc-100"},CN={key:0,class:"rounded bg-amber-200/60 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},AN={key:1},EN={key:1,class:"text-zinc-500"},TN={class:"flex items-start gap-3 pt-4 border-t border-gray-200 dark:border-zinc-700"},DN={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},PN={key:1,class:"h-4 w-4 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},RN={class:"min-w-0 flex-1"},ON={class:"mt-1 font-mono text-sm leading-relaxed text-gray-900 dark:text-zinc-100"},LN={key:0,class:"rounded bg-amber-200/60 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},MN={key:1},IN={key:1,class:"text-zinc-500"},jN={class:"min-w-0"},VN={class:"text-xs font-medium uppercase tracking-wide text-gray-600 dark:text-zinc-200"},$N={class:"mt-1 whitespace-pre-wrap break-words font-mono text-[13px] text-gray-800 dark:text-zinc-200"},NN={class:"flex items-start gap-3 pt-4 border-t border-gray-200 dark:border-zinc-700"},BN={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},FN={key:1,class:"h-4 w-4 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},UN={class:"min-w-0 flex-1"},zN=["title"],Vd="mt-1.5 inline-flex h-10 w-10 items-center justify-center rounded-md border border-gray-200 bg-white text-gray-500 transition hover:border-gray-300 hover:text-gray-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-500 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-300 dark:hover:border-gray-500 dark:hover:text-gray-100",HN=Object.assign({name:"DataCatalogTree"},{__name:"DataCatalogTree",props:{node:{type:Object,required:!0},depth:{type:Number,default:0},expandedKeys:{type:Object,required:!0},autoExpandedKeys:{type:Object,required:!0},toggleGroup:{type:Function,required:!0},searchTerm:{type:String,default:""},hierarchical:{type:Boolean,default:!0},pendingDeletes:{type:Object,default:null}},emits:["edit","delete"],setup(n,{emit:e}){const t=e,s=n,i=z(()=>s.node?.type==="group"),r=z(()=>s.depth===0),o=z(()=>{if(!i.value)return!1;if(!s.hierarchical)return!0;const ie=s.node?.fullKey;if(!ie)return!1;const F=s.expandedKeys,ae=s.autoExpandedKeys,ee=typeof F?.has=="function"?F.has(ie):!!F?.[ie],V=typeof ae?.has=="function"?ae.has(ie):!!ae?.[ie];return ee||V}),l=z(()=>{const ie=s.node?.leafCount||0;return`${ie} ${ie===1?"entry":"entries"}`}),a=z(()=>r.value?"mb-4 rounded-xl border border-gray-200 bg-white p-6 transition hover:border-gray-300 scroll-mt-16 dark:border-gray-700/70 dark:bg-gray-900 dark:hover:border-gray-600":"mb-3 rounded-lg border border-gray-200 bg-white p-4 transition hover:border-gray-300 dark:border-gray-700/60 dark:bg-gray-900/60 dark:hover:border-gray-600"),u=z(()=>r.value?"text-lg font-semibold text-zinc-900 dark:text-white":"text-sm font-semibold text-zinc-900 dark:text-white"),c=z(()=>r.value?"mt-4 space-y-3":"mt-3 space-y-3"),d=z(()=>s.pendingDeletes instanceof Set?s.pendingDeletes:s.pendingDeletes&&typeof s.pendingDeletes=="object"&&s.pendingDeletes.value instanceof Set?s.pendingDeletes.value:new Set),f=z(()=>d.value.has(s.node?.fullKey)),p=z(()=>{const ie=s.node?.data||{},F=new Set(["path","type","description","locked","delimiter"]);return Object.keys(ie).filter(ae=>!F.has(ae)).reduce((ae,ee)=>(ae[ee]=ie[ee],ae),{})}),g=z(()=>{const ie="relative rounded-lg p-6 transition focus-within:ring-2",F=r.value?"scroll-mt-16":"";return f.value?`${ie} border border-red-200 bg-red-50 hover:bg-red-100 focus-within:ring-red-300 ${F} dark:border-red-500/40 dark:bg-red-900/30 dark:hover:bg-red-900/40 dark:focus-within:ring-red-500/40`:`${ie} border border-gray-200 bg-gray-50 hover:bg-gray-100 focus-within:ring-sky-200 ${F} dark:border-gray-700/50 dark:bg-gray-800/50 dark:hover:bg-gray-800/60 dark:focus-within:ring-sky-500/40`}),k=z(()=>f.value?"shadow-none border border-red-200 text-red-700 hover:bg-red-50 dark:border-red-500/40 dark:text-red-200 dark:hover:bg-red-900/30":"shadow-none"),x=z(()=>s.searchTerm.trim().toLowerCase()),m=(ie="")=>{const F=ie??"",ae=x.value;if(!ae)return[{text:F,highlight:!1}];const ee=F.toLowerCase(),V=[];let J=0,X=ee.indexOf(ae);for(;X!==-1;)X>J&&V.push({text:F.slice(J,X),highlight:!1}),V.push({text:F.slice(X,X+ae.length),highlight:!0}),J=X+ae.length,X=ee.indexOf(ae,J);return J<F.length&&V.push({text:F.slice(J),highlight:!1}),V.length>0?V:[{text:F,highlight:!1}]},_=z(()=>s.node?.displayName||s.node?.name||""),R=z(()=>m(_.value)),U=z(()=>m(s.node?.data?.path||"")),N=z(()=>m(s.node?.fullKey||"")),A=z(()=>{const ie=s.node?.fullKey||"";return ie?`data_read('${ie}')`:"data_read()"}),w=(ie="")=>ie.replace(/_/g," "),M=ie=>ie==null?"":typeof ie=="object"?JSON.stringify(ie,null,2):String(ie),G=z(()=>{if(!r.value)return null;const ie=s.node?.fullKey||s.node?.name;return ie?e_(ie):null}),ue=()=>{!i.value||!s.hierarchical||s.toggleGroup(s.node.fullKey)};return(ie,F)=>{const ae=qd("DataCatalogTree",!0);return v(),b("div",null,[i.value?(v(),b("div",{key:0,id:G.value||void 0,class:Se(a.value)},[n.hierarchical?(v(),b(be,{key:0},[h("button",{type:"button",class:"flex w-full items-start gap-3 text-left transition hover:text-zinc-900 focus:outline-none",onClick:ue,"aria-expanded":o.value},[S(Ke(EC),{class:Se(["mt-1.5 h-4 w-4 shrink-0 text-zinc-400 transition-transform",{"rotate-90 text-sky-500":o.value}])},null,8,["class"]),h("div",Z$,[h("p",{class:Se(u.value)},[(v(!0),b(be,null,Ve(R.value,(ee,V)=>(v(),b(be,{key:V},[ee.highlight?(v(),b("mark",eN,Y(ee.text),1)):(v(),b("span",tN,Y(ee.text),1))],64))),128))],2),h("p",nN,Y(l.value),1)]),h("span",sN,Y(o.value?"Hide":"Show"),1)],8,X$),S(Lh,{name:"catalog-collapse"},{default:Z(()=>[He(h("div",{class:Se(c.value)},[(v(!0),b(be,null,Ve(n.node.children,ee=>(v(),we(ae,{key:ee.fullKey,node:ee,depth:n.depth+1,"expanded-keys":n.expandedKeys,"auto-expanded-keys":n.autoExpandedKeys,"toggle-group":n.toggleGroup,"search-term":n.searchTerm,hierarchical:n.hierarchical,"pending-deletes":n.pendingDeletes,onEdit:F[0]||(F[0]=V=>t("edit",V)),onDelete:F[1]||(F[1]=V=>t("delete",V))},null,8,["node","depth","expanded-keys","auto-expanded-keys","toggle-group","search-term","hierarchical","pending-deletes"]))),128))],2),[[nt,o.value]])]),_:1})],64)):(v(),b(be,{key:1},[h("div",iN,[h("div",rN,[h("p",{class:Se(u.value)},[(v(!0),b(be,null,Ve(R.value,(ee,V)=>(v(),b(be,{key:V},[ee.highlight?(v(),b("mark",oN,Y(ee.text),1)):(v(),b("span",lN,Y(ee.text),1))],64))),128))],2),h("p",aN,Y(l.value),1)])]),h("div",{class:Se(c.value)},[(v(!0),b(be,null,Ve(n.node.children,ee=>(v(),we(ae,{key:ee.fullKey,node:ee,depth:n.depth+1,"expanded-keys":n.expandedKeys,"auto-expanded-keys":n.autoExpandedKeys,"toggle-group":n.toggleGroup,"search-term":n.searchTerm,hierarchical:n.hierarchical,"pending-deletes":n.pendingDeletes,onEdit:F[2]||(F[2]=V=>t("edit",V)),onDelete:F[3]||(F[3]=V=>t("delete",V))},null,8,["node","depth","expanded-keys","auto-expanded-keys","toggle-group","search-term","hierarchical","pending-deletes"]))),128))],2)],64))],10,Y$)):(v(),b("div",{key:1,id:G.value||void 0,class:Se(g.value)},[h("div",cN,[h("div",dN,[h("h3",fN,[(v(!0),b(be,null,Ve(R.value,(ee,V)=>(v(),b(be,{key:`leaf-${V}`},[ee.highlight?(v(),b("mark",hN,Y(ee.text),1)):(v(),b("span",pN,Y(ee.text),1))],64))),128))]),n.node.data?.type?(v(),b("span",mN,Y(n.node.data.type),1)):H("",!0)]),h("div",gN,[S(Ye,{size:"sm",variant:"secondary",class:Se(k.value),onClick:F[4]||(F[4]=Tt(ee=>t("delete",n.node),["stop"]))},{default:Z(()=>[ce(Y(f.value?"Undo":"Delete"),1)]),_:1},8,["class"]),S(Ye,{size:"sm",variant:"secondary",class:"shadow-none",onClick:F[5]||(F[5]=ee=>t("edit",n.node))},{default:Z(()=>[...F[6]||(F[6]=[ce(" Edit ",-1)])]),_:1})])]),h("div",vN,[n.node.data?.description?(v(),b("div",yN,[F[7]||(F[7]=h("p",{class:"text-xs font-medium text-gray-600 dark:text-zinc-200"}," Description ",-1)),h("p",bN,Y(n.node.data.description),1)])):H("",!0),n.node.fullKey?(v(),b("div",kN,[S(zs,{value:n.node.fullKey||"",successMessage:"Dot notation copied",variant:"bare",class:Se(Vd),title:"Copy dot notation"},{default:Z(({copied:ee})=>[ee?(v(),b("svg",_N,[...F[9]||(F[9]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(v(),b("svg",xN,[...F[8]||(F[8]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"},null,-1)])]))]),_:1},8,["value"]),h("div",wN,[F[10]||(F[10]=h("p",{class:"text-xs font-medium text-gray-700 dark:text-zinc-100"}," Location (in Dot Notation) ",-1)),h("p",SN,[N.value.length>0?(v(!0),b(be,{key:0},Ve(N.value,(ee,V)=>(v(),b(be,{key:`key-${V}`},[ee.highlight?(v(),b("mark",CN,Y(ee.text),1)):(v(),b("span",AN,Y(ee.text),1))],64))),128)):(v(),b("span",EN,""))])])])):H("",!0),h("div",TN,[S(zs,{value:n.node.data?.path||"",successMessage:"Path copied",variant:"bare",class:Se(Vd),title:"Copy path"},{default:Z(({copied:ee})=>[ee?(v(),b("svg",PN,[...F[12]||(F[12]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(v(),b("svg",DN,[...F[11]||(F[11]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"},null,-1)])]))]),_:1},8,["value"]),h("div",RN,[F[13]||(F[13]=h("p",{class:"text-xs font-medium text-gray-700 dark:text-zinc-100"}," File Path ",-1)),h("p",ON,[U.value.length>0?(v(!0),b(be,{key:0},Ve(U.value,(ee,V)=>(v(),b(be,{key:`path-${V}`},[ee.highlight?(v(),b("mark",LN,Y(ee.text),1)):(v(),b("span",MN,Y(ee.text),1))],64))),128)):(v(),b("span",IN,""))])])]),(v(!0),b(be,null,Ve(p.value,(ee,V)=>(v(),b("div",{key:`meta-${V}`,class:"flex items-start justify-between gap-3 border-t border-gray-200 pt-4 text-sm dark:border-zinc-700"},[h("div",jN,[h("p",VN,Y(w(V)),1),h("pre",$N,Y(M(ee)),1)])]))),128)),h("div",NN,[S(zs,{value:A.value,successMessage:"data_read() command copied",variant:"bare",class:Se([Vd,"w-10"]),title:"Copy data_read() helper","aria-label":`Copy ${A.value}`},{default:Z(({copied:ee})=>[ee?(v(),b("svg",FN,[...F[15]||(F[15]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(v(),b("svg",BN,[...F[14]||(F[14]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8z"},null,-1)])]))]),_:1},8,["value","class","aria-label"]),h("div",UN,[F[16]||(F[16]=h("p",{class:"text-xs font-medium text-gray-700 dark:text-zinc-100"}," Usage ",-1)),h("p",{class:"mt-1 font-mono text-sm leading-relaxed text-gray-900 dark:text-zinc-100 truncate",title:A.value},Y(A.value),9,zN)])])])],10,uN))])}}}),WN=gc(HN,[["__scopeId","data-v-20f9f092"]]),qN={key:0,class:"mb-4"},GN={key:1,class:"flex items-center justify-center py-12"},KN={key:4,class:"space-y-2"},JN={class:"flex items-center gap-3 min-w-0"},QN={class:"shrink-0"},YN={class:"min-w-0"},XN=["title"],ZN={class:"flex items-center gap-3 mt-1 text-xs text-gray-500 dark:text-gray-400"},e7={key:0},t7={key:1},n7={class:"flex items-center gap-2 shrink-0"},s7={key:5,class:"mt-4 text-xs text-gray-500 dark:text-gray-400"},Xs={__name:"FileBrowser",props:{files:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},emptyTitle:{type:String,default:"No files"},emptyDescription:{type:String,default:"This directory is empty or does not exist yet."}},setup(n){const e=n,t=Q(""),s=z(()=>{if(!t.value)return e.files;const r=t.value.toLowerCase();return e.files.filter(o=>o.name.toLowerCase().includes(r)||o.path.toLowerCase().includes(r))}),i=r=>{if(r===0)return"0 B";if(!r)return"";const o=1024,l=["B","KB","MB","GB"],a=Math.floor(Math.log(r)/Math.log(o));return parseFloat((r/Math.pow(o,a)).toFixed(1))+" "+l[a]};return(r,o)=>(v(),b("div",null,[n.files.length>0||t.value?(v(),b("div",qN,[S(Ee,{modelValue:t.value,"onUpdate:modelValue":o[0]||(o[0]=l=>t.value=l),placeholder:"Filter files...",class:"max-w-sm"},{prefix:Z(()=>[S(Ke(OC),{class:"h-4 w-4 text-gray-400"})]),_:1},8,["modelValue"])])):H("",!0),n.loading?(v(),b("div",GN,[...o[1]||(o[1]=[h("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-sky-600"},null,-1)])])):n.files.length===0?(v(),we(Hl,{key:2,title:n.emptyTitle,description:n.emptyDescription,icon:"folder"},null,8,["title","description"])):s.value.length===0?(v(),we(Hl,{key:3,title:"No matching files",description:"Try a different search term",icon:"search"})):(v(),b("div",KN,[(v(!0),b(be,null,Ve(s.value,l=>(v(),b("div",{key:l.path,class:"flex items-center justify-between gap-4 rounded-lg border border-gray-200 bg-white p-4 transition hover:border-gray-300 dark:border-gray-700 dark:bg-gray-800/50 dark:hover:border-gray-600"},[h("div",JN,[h("div",QN,[l.is_dir?(v(),we(Ke(kl),{key:1,class:"h-5 w-5 text-sky-500"})):(v(),we(Ke(ub),{key:0,class:"h-5 w-5 text-gray-400"}))]),h("div",YN,[h("p",{class:"text-sm font-medium text-gray-900 dark:text-white truncate",title:l.name},Y(l.name),9,XN),h("div",ZN,[l.size!==void 0&&!l.is_dir?(v(),b("span",e7,Y(i(l.size)),1)):H("",!0),l.modified?(v(),b("span",t7,Y(l.modified),1)):H("",!0)])])]),h("div",n7,[S(zs,{value:l.path,successMessage:"Path copied",variant:"ghost",title:"Copy path"},null,8,["value"])])]))),128))])),n.files.length>0&&!n.loading?(v(),b("p",s7,Y(s.value.length)+" of "+Y(n.files.length)+" files ",1)):H("",!0)]))}},i7={key:0,class:"mb-4"},r7={class:"flex flex-wrap gap-2"},o7=["onClick"],l7={key:0,class:"ml-1 text-[10px] opacity-70"},a7={key:1,class:"flex items-center justify-center py-12"},u7={key:4,class:"space-y-3"},c7={class:"flex items-start justify-between gap-4"},d7={class:"flex items-start gap-3 min-w-0"},f7={class:"shrink-0 mt-0.5"},h7={class:"min-w-0"},p7={class:"flex items-center gap-2"},m7=["title"],g7={key:0,class:"mt-1 text-sm text-gray-600 dark:text-gray-400 line-clamp-2"},v7={class:"flex items-center gap-3 mt-2 text-xs text-gray-500 dark:text-gray-400"},y7=["title"],b7=["title"],k7={class:"flex items-center gap-2 shrink-0"},x7={key:5,class:"mt-4 text-xs text-gray-500 dark:text-gray-400"},_7={__name:"ResultsList",props:{results:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},setup(n){const e=n,t=Q("all"),s=z(()=>{const l={all:e.results.length,table:0,figure:0,model:0,report:0,notebook:0};return e.results.forEach(a=>{l[a.type]!==void 0&&l[a.type]++}),[{value:"all",label:"All",count:l.all},{value:"table",label:"Tables",count:l.table},{value:"figure",label:"Figures",count:l.figure},{value:"model",label:"Models",count:l.model},{value:"report",label:"Reports",count:l.report},{value:"notebook",label:"Notebooks",count:l.notebook}].filter(a=>a.value==="all"||a.count>0)}),i=z(()=>t.value==="all"?e.results:e.results.filter(l=>l.type===t.value)),r=l=>({table:"green",figure:"blue",model:"yellow",report:"red",notebook:"sky"})[l]||"gray",o=l=>{if(!l)return"";try{const a=new Date(l),c=new Date-a,d=Math.floor(c/(1e3*60*60*24));return d===0?"today":d===1?"yesterday":d<7?`${d} days ago`:a.toLocaleDateString()}catch{return l}};return(l,a)=>(v(),b("div",null,[n.results.length>0||t.value!=="all"?(v(),b("div",i7,[h("div",r7,[(v(!0),b(be,null,Ve(s.value,u=>(v(),b("button",{key:u.value,onClick:c=>t.value=u.value,class:Se(["px-3 py-1.5 text-xs font-medium rounded-full transition",t.value===u.value?"bg-sky-100 text-sky-700 dark:bg-sky-900/40 dark:text-sky-300":"bg-gray-100 text-gray-600 hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700"])},[ce(Y(u.label)+" ",1),u.count>0?(v(),b("span",l7," ("+Y(u.count)+") ",1)):H("",!0)],10,o7))),128))])])):H("",!0),n.loading?(v(),b("div",a7,[...a[0]||(a[0]=[h("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-sky-600"},null,-1)])])):n.results.length===0?(v(),we(Hl,{key:2,title:"No saved results",description:"Results will appear here when you use save_table(), save_figure(), save_model(), etc.",icon:"chart"})):i.value.length===0?(v(),we(Hl,{key:3,title:"No results match this filter",description:"Try selecting a different type",icon:"filter"})):(v(),b("div",u7,[(v(!0),b(be,null,Ve(i.value,u=>(v(),b("div",{key:u.name,class:"rounded-lg border border-gray-200 bg-white p-4 dark:border-gray-700 dark:bg-gray-800/50"},[h("div",c7,[h("div",d7,[h("div",f7,[u.type==="table"?(v(),we(Ke(IC),{key:0,class:"h-5 w-5 text-emerald-500"})):u.type==="figure"?(v(),we(Ke(ab),{key:1,class:"h-5 w-5 text-violet-500"})):u.type==="model"?(v(),we(Ke(fc),{key:2,class:"h-5 w-5 text-amber-500"})):u.type==="report"?(v(),we(Ke(mr),{key:3,class:"h-5 w-5 text-rose-500"})):u.type==="notebook"?(v(),we(Ke(CC),{key:4,class:"h-5 w-5 text-sky-500"})):(v(),we(Ke(ub),{key:5,class:"h-5 w-5 text-gray-400"}))]),h("div",h7,[h("div",p7,[h("p",{class:"text-sm font-medium text-gray-900 dark:text-white truncate",title:u.name},Y(u.name),9,m7),S(co,{variant:r(u.type),size:"sm"},{default:Z(()=>[ce(Y(u.type),1)]),_:2},1032,["variant"]),u.public?(v(),we(co,{key:0,variant:"sky",size:"sm"},{default:Z(()=>[...a[1]||(a[1]=[ce(" public ",-1)])]),_:1})):H("",!0)]),u.comment?(v(),b("p",g7,Y(u.comment),1)):H("",!0),h("div",v7,[u.created_at?(v(),b("span",{key:0,title:"Created: "+u.created_at},Y(o(u.updated_at||u.created_at)),9,y7)):H("",!0),u.hash?(v(),b("span",{key:1,class:"font-mono text-[10px]",title:"Hash: "+u.hash},Y(u.hash.substring(0,8))+"... ",9,b7)):H("",!0)])])]),h("div",k7,[S(zs,{value:u.name,successMessage:"Filename copied",variant:"ghost",title:"Copy filename"},null,8,["value"])])])]))),128))])),n.results.length>0&&!n.loading?(v(),b("p",x7,Y(i.value.length)+" of "+Y(n.results.length)+" results ",1)):H("",!0)]))}},w7={key:0,class:"flex items-center justify-center h-96"},S7={key:1,class:"flex-1 p-10"},C7={key:2,class:"flex min-h-screen"},A7={class:"w-64 shrink-0 border-r border-gray-200 p-6 dark:border-gray-800 flex flex-col"},E7={class:"mb-4"},T7={class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},D7={class:"flex items-center gap-2"},P7={class:"text-xs text-gray-500 dark:text-gray-400 font-mono truncate"},R7={class:"space-y-1"},O7={key:0,class:"ml-6 mt-1 space-y-0.5"},L7=["href","onClick"],M7={class:"truncate"},I7={key:0,class:"shrink-0 rounded-full bg-gray-100 px-2 py-0.5 text-[10px] font-medium text-gray-500 dark:bg-gray-800 dark:text-gray-300"},j7={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},V7={class:"mt-auto pt-4 border-t border-gray-200 dark:border-gray-700"},$7={class:"text-center py-3"},N7={class:"flex-1 p-10"},B7={id:"overview"},F7={id:"basics"},U7={key:0},z7={key:1},H7={key:2},W7={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},q7={key:0,class:"space-y-5"},G7={class:"flex items-center gap-2"},K7={class:"flex-1 px-3 py-2 text-sm font-mono text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-md"},J7={key:0,class:"pt-6 border-t border-gray-200 dark:border-gray-700"},Q7={id:"settings"},Y7={key:0},X7={key:1},Z7={key:2},eB={class:"text-sm text-gray-600 dark:text-gray-400 mb-6"},tB={id:"notebooks"},nB={class:"rounded-lg bg-gray-50 p-12 dark:bg-gray-800/50 text-center"},sB={id:"data"},iB={class:"mb-6 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},rB={class:"mb-6"},oB={key:0,class:"space-y-4"},lB={key:1,class:"mt-4 rounded-lg border border-red-200 bg-red-50 p-4 dark:border-red-500/40 dark:bg-red-900/20"},aB={class:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"},uB={class:"text-sm font-medium text-red-700 dark:text-red-200"},cB={class:"flex gap-2"},dB={class:"mt-3 list-disc space-y-1 pl-5 text-xs font-mono text-red-700 dark:text-red-200/90"},fB={key:2,class:"rounded-xl border border-dashed border-zinc-300 bg-white/70 p-10 text-center dark:border-zinc-700 dark:bg-zinc-900/40"},hB={class:"text-sm font-medium text-zinc-700 dark:text-zinc-200"},pB={id:"connections"},mB={id:"inputs"},gB={id:"outputs"},vB={id:"results"},yB={id:"packages"},bB={key:0},kB={key:1},xB={key:2},_B={id:"ai"},wB={key:0},SB={key:1},CB={key:2},AB={id:"quarto"},EB={key:0},TB={key:1},DB={class:"rounded-lg bg-gray-50 p-4 dark:bg-gray-800/50 space-y-3"},PB=["value"],RB={key:0,class:"rounded-md border border-gray-200 dark:border-gray-700 overflow-hidden"},OB={key:1,class:"text-sm text-gray-500 dark:text-gray-400 py-8 text-center"},LB={class:"mt-4 rounded-lg bg-gray-50 p-4 dark:bg-gray-800/50"},MB={class:"mt-4 rounded-lg border border-amber-200 bg-amber-50 p-4 dark:border-amber-800 dark:bg-amber-900/20"},IB={class:"flex items-start justify-between gap-4"},jB={id:"git"},VB={key:0},$B={key:1},NB={key:2},BB={id:"scaffold"},FB={key:0},UB={key:1},zB={key:2},HB={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},WB={id:"env"},qB={class:"space-y-6"},GB={key:0,class:"max-h-64 overflow-y-auto border border-gray-200 dark:border-gray-700 rounded-md"},KB=["onClick","onMouseenter"],JB={class:"flex items-start justify-between gap-2"},QB={class:"flex-1 min-w-0"},YB={class:"text-sm font-mono font-medium text-gray-900 dark:text-gray-100"},XB={key:0,class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5 line-clamp-1"},ZB={key:1,class:"text-xs text-gray-500 dark:text-gray-500 mt-0.5"},e9={class:"text-xs text-gray-500 dark:text-gray-500 font-mono shrink-0"},t9={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},n9={key:1,class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},s9={class:"relative"},i9={class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},r9={class:"space-y-4 text-left"},o9={class:"flex items-start gap-3"},l9={class:"flex items-start gap-3"},a9={key:0,class:"mt-4"},u9={class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},c9={class:"font-mono font-bold"},d9={__name:"ProjectDetailView",setup(n){const e=wo(),t=Kl(),s=mc(),i=Q(null),r=Q(!0),o=Q(null),l=Q("overview"),a=["overview","basics","settings","quarto","notebooks","connections","data","inputs","outputs","results","packages","ai","git","scaffold","env"],u=Q(null),c=Q(""),d=Q(new Set),f=Q(!1),p=Q(null),g=Q(!1),k=Q(null),x=Q(!1),m=Q(new Set),_=Q(!1),R=Q("raw"),U=[{id:"raw",label:"Raw"},{id:"intermediate",label:"Intermediate"},{id:"final",label:"Final"},{id:"reference",label:"Reference"}],N=Q([]),A=Q([]),w=Q([]),M=Q([]),G=Q(!1),ue=Q("tables"),ie=[{id:"tables",label:"Tables"},{id:"figures",label:"Figures"},{id:"models",label:"Models"},{id:"reports",label:"Reports"},{id:"notebooks_output",label:"Notebooks"}],F=Q([]),ae=Q([]),ee=Q([]),V=Q([]),J=Q([]),X=Q(!1),de=Q([]),Ce=Q(!1),Te=Q(null),$e=Q(null),me=Q({}),qe=Q(!1),rt=Q(null),pt=Q(new Set),ot=Q(!1),le=Q(!1),te=Q(!1),W=Q([]),E=Q({}),re=Q(null),D=Q(null),$=Q(!1),K=Q(!1),oe=Q({html:{format:"html",embed_resources:!0,theme:"default",toc:!0,toc_depth:3,code_fold:!1,code_tools:!1,highlight_style:"github"},revealjs:{format:"revealjs",theme:"default",incremental:!1,slide_number:!0,transition:"slide",background_transition:"fade",controls:!0,progress:!0,center:!0,highlight_style:"github"}}),ne=Q({initialize:!0,user_name:"",user_email:"",hooks:{ai_sync:!1,data_security:!1,check_sensitive_dirs:!1}}),se=Q(!1),xe=Q(null),L=Q(!1),j=Q(!1);Q([]),Q([]),Q([]),Q(!1);const B=Q([]),pe=Q([]),ve=Q(null),Ae=Q(null),Me=Q(!1),ze=Q([]),Xe=Q({use_renv:!1,default_packages:[]}),ye=Q(!1),vt=Q(null),Lt=Q(!1),$t=Q(!1),Gt=Q(!1),St=Q("untrack"),on=Q(""),Ct=Q(""),ct=Q([]),tt=Q(!1),st=Q(-1),Nt=Q({name:"",source:"cran",auto_attach:!0}),As=Q({}),Pr=Q({}),pi=Q(""),hs=Q(!1),tn=Q(null),ps=Q(!1),Hi=Q(!1),mi=Q("grouped"),Rr=Q(!1),Mt=Q({enabled:!1,canonical_file:"CLAUDE.md",canonical_content:"",assistants:[]}),Or=Q(!1),gi=Q(null),Xn=Q(!1),Wi=Q(!1),vi=Q(!1),qi=Q({file:"CLAUDE.md",exists:!0}),Gi=z(()=>Object.keys(As.value||{}).length),Lr=z(()=>{const C=i.value?.name||"Untitled",y=i.value?.path||"",O=me.value?.author?.name||Te.value?.author?.name||i.value?.author||"";return{name:C,path:y,author:O}}),ra=z(()=>i.value?.type||Te.value?.project_type||"Not set"),oa=z(()=>me.value?.scaffold?.notebook_format||Te.value?.scaffold?.notebook_format||"quarto"),Es=C=>C?C.charAt(0).toUpperCase()+C.slice(1):"";z(()=>{if(!Mt.value.enabled)return"Disabled";const C=Array.isArray(Mt.value.assistants)?Mt.value.assistants:[],y=C.length?C.map(Es).join(", "):"Enabled",O=Mt.value.canonical_file||"CLAUDE.md";return`${y}  ${O}`});const jn={ai_sync:"AI sync",data_security:"Secret scan",check_sensitive_dirs:"Sensitive dirs"},ms=z(()=>{const C=ne.value?.hooks||{};return Object.entries(C).filter(([,y])=>!!y).map(([y])=>jn[y]||y)});z(()=>{const C=ne.value.initialize?"Auto-initialize repositories":"Manual initialization";return ms.value.length?`${C}  ${ms.value.join(", ")}`:C});const Ki=z(()=>Xe.value?.default_packages?.length||0);z(()=>{const C=Xe.value?.use_renv?"renv enabled":"renv disabled";return Ki.value>0?`${Ki.value} package${Ki.value===1?"":"s"}  ${C}`:`No default packages  ${C}`}),z(()=>Gi.value>0?`${Gi.value} variable${Gi.value===1?"":"s"}`:"No variables defined"),je(B,C=>{const y=ve.value,O=C.some(ke=>ke.name===y);if(C.length===1){const ke=C[0];ke?.name&&ke.name!=="framework_db"&&(ve.value=ke.name)}else y&&!O&&(ve.value=null)},{deep:!0}),je(pe,C=>{const y=Ae.value,O=C.some(ke=>ke.name===y);if(C.length===1){const ke=C[0];ke?.name&&(Ae.value=ke.name)}else y&&!O&&(Ae.value=null)},{deep:!0});const la=z(()=>{const C=Lr.value.name,y=Lr.value.path,O=Lr.value.author;ra.value;const ke=oa.value,Ne=Mt.value.enabled,Ue=Mt.value.enabled?Array.isArray(Mt.value.assistants)?Mt.value.assistants.map(Es).join(", "):"Enabled":"",yt=Mt.value.canonical_file||"CLAUDE.md",dt=ne.value.initialize,Ft=ms.value,pn=Ki.value,yi=Xe.value?.use_renv||!1,Nc=Gi.value;return[{id:"basics",title:"Basics",section:"basics",content:`<div>${C}  ${O}</div><div class="text-sm text-gray-600 dark:text-gray-400 mt-1">${y}</div>`},{id:"structure",title:"Project Structure",section:"settings",content:`${Qp.value}  ${Object.keys(l_.value).length} workspace  ${Object.keys(a_.value).length} input  ${Object.keys(u_.value).length} output`},{id:"notebooks",title:"Notebooks & Scripts",section:"scaffold",content:ke},{id:"packages",title:"Packages",section:"packages",content:pn>0?`${pn} packages  renv ${yi?"enabled":"disabled"}`:`renv: ${yi?"enabled":"disabled"}`},{id:"env",title:".env",section:"env",content:Nc>0?`${Nc} variable${Nc===1?"":"s"}`:"No variables defined"},{id:"ai",title:"AI Assistants",section:"ai",content:Ne?`${Ue}  ${yt}`:"Disabled"},{id:"git",title:"Git & Hooks",section:"git",content:dt?`Auto-initialize repositories${Ft.length?`  ${Ft.join(", ")}`:""}`:"Manual initialization"}]}),Kt=C=>["flex items-center gap-2 px-3 py-2 rounded-md text-sm transition",l.value===C?"bg-sky-50 text-sky-700 font-medium dark:bg-sky-900/20 dark:text-sky-400":"text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-800"],I=()=>{const C=e.query.section;C&&a.includes(C)?(l.value=C,C==="env"&&(Mr(),ns(()=>nm()))):l.value="overview"};je(l,C=>{t.replace({query:{...e.query,section:C}}),(C==="settings"||C==="basics"||C==="scaffold"||C==="connections")&&!Te.value&&ca(),C==="connections"&&B.value.length===0&&pe.value.length===0&&A_(),C==="packages"&&ze.value.length===0&&fa(),C==="git"&&!L.value&&pa(),C==="ai"&&!Xn.value&&ha(),C==="env"&&!ps.value&&Mr(),C==="inputs"&&N.value.length===0&&M_(),C==="outputs"&&F.value.length===0&&I_(),C==="results"&&de.value.length===0&&j_()}),je(()=>e.query.section,C=>{C&&a.includes(C)?(l.value=C,C==="env"&&(ns(()=>nm()),ps.value||Mr())):C||(l.value="overview")});let T=!1,q=!1;je(()=>Mt.value.canonical_file,(C,y)=>{T||Xn.value&&(!C||C===y||L_(C))}),je(As,C=>{q||console.log("[envVariables watcher] Value changed (not suppressed)")},{deep:!0}),je(Pr,C=>{q||console.log("[envGroups watcher] Value changed (not suppressed)")},{deep:!0}),je(pi,C=>{q||console.log("[envRawContent watcher] Value changed (not suppressed)")});let he=null;je(Ct,()=>{he&&clearTimeout(he),he=setTimeout(()=>{E_()},300)});const Fe=(C="")=>C.split(/[._-]/).filter(Boolean).map(y=>y.charAt(0).toUpperCase()+y.slice(1)).join(" "),ge=C=>JSON.parse(JSON.stringify(C)),Oe=C=>Array.isArray(C)?C.map((y,O)=>[String(O),y]):Object.entries(C),Ge=(C,y="",O=0)=>!C||typeof C!="object"?[]:Oe(C).reduce((ke,[Ne,Ue])=>{if(Ue==null)return ke;const yt=y?`${y}.${Ne}`:Ne;if(typeof Ue=="object"&&!Array.isArray(Ue)&&Ue.path)return ke.push({type:"leaf",name:Ne,displayName:Fe(Ne),fullKey:yt,data:Ue,leafCount:1,depth:O}),ke;if(typeof Ue=="object"){const dt=Ge(Ue,yt,O+1);if(dt.length>0){const Ft=dt.reduce((pn,yi)=>pn+(yi.leafCount||0),0);ke.push({type:"group",name:Ne,displayName:Fe(Ne),fullKey:yt,children:dt,leafCount:Ft,depth:O})}}return ke},[]),Rt=C=>C.slice().sort((y,O)=>y.displayName.localeCompare(O.displayName,void 0,{sensitivity:"base",numeric:!0})).map(y=>y.type==="group"?{...y,children:Rt(y.children)}:y),Wn=(C,y)=>{if(!y)return!0;const O=y.toLowerCase(),ke=[C.displayName,C.name,C.fullKey];return C.type==="leaf"&&C.data?.path&&ke.push(C.data.path),ke.some(Ne=>Ne&&Ne.toLowerCase().includes(O))},Po=(C,y)=>{if(!y)return{nodes:C,matchedKeys:new Set};const O=[],ke=new Set;return C.forEach(Ne=>{if(Ne.type==="leaf"){Wn(Ne,y)&&(O.push(Ne),ke.add(Ne.fullKey));return}const Ue=Po(Ne.children,y);if(Wn(Ne,y)||Ue.nodes.length>0){const dt=Ue.nodes,Ft=dt.reduce((pn,yi)=>pn+(yi.leafCount||0),0);O.push({...Ne,children:dt,leafCount:Ft||Ne.leafCount}),ke.add(Ne.fullKey),Ue.matchedKeys.forEach(pn=>ke.add(pn))}}),{nodes:O,matchedKeys:ke}},Jt=z(()=>{const C=u.value;return!C||typeof C!="object"?[]:!Array.isArray(C)&&C.path?[{type:"leaf",name:C.name||"data",displayName:Fe(C.name||"data"),fullKey:C.name||"data",data:C,leafCount:1,depth:0}]:Rt(Ge(C))}),aa=z(()=>c.value.trim().toLowerCase()),ua=z(()=>{const C=aa.value;return C?Po(Jt.value,C):{nodes:Jt.value,matchedKeys:new Set}}),Wp=z(()=>ua.value.nodes),s_=z(()=>ua.value.matchedKeys),qp=z(()=>aa.value.length>0),Gp=z(()=>qp.value?[]:(Jt.value||[]).filter(C=>(C.depth||0)===0).map(C=>{const y=C.fullKey||C.name||"";return{anchorId:y?e_(y):null,label:C.displayName||Fe(C.name||y||"data source"),count:C.leafCount||(C.type==="leaf"?1:0),nodeKey:y}}).filter(C=>C.anchorId&&C.label)),Mc=z(()=>m.value.size>0),Kp=z(()=>m.value.size),i_=z(()=>Array.from(m.value)),Jp=C=>{let y=0;return C.forEach(O=>{y=Math.max(y,O.depth||0),O.type==="group"&&O.children&&(y=Math.max(y,Jp(O.children)))}),y},r_=z(()=>Jp(Jt.value)),o_=z(()=>r_.value>2),l_=z(()=>{const C=me.value.directories||{},y={},O=["functions","notebooks","scripts"];return Object.keys(C).forEach(ke=>{O.includes(ke)&&(y[ke]=C[ke])}),y}),a_=z(()=>{const C=me.value.directories||{},y={};return Object.keys(C).forEach(O=>{(O.startsWith("inputs_")||O.includes("_raw")||O.includes("_intermediate")||O.includes("_final"))&&(y[O]=C[O])}),y}),u_=z(()=>{const C=me.value.directories||{},y={};return Object.keys(C).forEach(O=>{(O.startsWith("outputs_")||O.includes("_figures")||O.includes("_tables")||O.includes("_models")||O.includes("_reports")||O==="scratch")&&!O.startsWith("inputs_")&&O!=="cache"&&(y[O]=C[O])}),y});z(()=>(me.value.extra_directories||[]).filter(y=>y.type==="input")),z(()=>(me.value.extra_directories||[]).filter(y=>y.type==="output")),z(()=>(me.value.extra_directories||[]).filter(y=>y.type==="workspace"));const Qp=z(()=>{const C=i.value?.type;return C?{project:"Standard Project Structure",project_sensitive:"Privacy Sensitive Project Structure",presentation:"Presentation Structure",course:"Course Structure"}[C]||C:"Standard Project Structure"}),c_=z(()=>{if(!Te.value?.directories)return{};const C={},y=Te.value.directories||{},O=$e.value?.project_types?.[i.value.type]?.directories||{};return Object.keys(O).forEach(ke=>{C[ke]=ke in y}),Te.value.extra_directories&&Te.value.extra_directories.forEach(ke=>{C[ke.key]=!0}),C}),Yp=z(()=>St.value==="untrack"?!0:St.value==="delete"?on.value===i.value?.name:!1),d_=(C,y,O)=>{const ke=y.split(".").filter(Boolean);if(ke.length===0)return null;const Ne=ge(C||{});let Ue=Ne;for(let yt=0;yt<ke.length-1;yt++){const dt=ke[yt];(!Ue[dt]||typeof Ue[dt]!="object"||Array.isArray(Ue[dt]))&&(Ue[dt]={}),Ue=Ue[dt]}return Ue[ke[ke.length-1]]=ge(O),Ne},f_=(C,y)=>{if(!C||!y)return null;const O=y.split(".").filter(Boolean);if(O.length===0)return null;let ke=C;for(let Ne=0;Ne<O.length;Ne++){const Ue=O[Ne];if(!ke||typeof ke!="object"||!(Ue in ke))return null;ke=ke[Ue]}return ke},Xp=C=>{const y=C.split(".").filter(Boolean);if(y.length<=1)return;const O=new Set(d.value);let ke="";for(let Ne=0;Ne<y.length-1;Ne++)ke=ke?`${ke}.${y[Ne]}`:y[Ne],O.add(ke);d.value=O},h_=async(C,y)=>{if(!C)return;if(y){Xp(y);const ke=new Set(d.value);ke.add(y),d.value=ke}await ns();const O=document.getElementById(C);O&&O.scrollIntoView({behavior:"smooth",block:"start"})},Zp=async C=>{const y=await fetch(`/api/project/${e.params.id}/data`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:C})}),O=await y.json();if(!y.ok||O.error)throw new Error(O.error||"Failed to save data catalog")},p_=C=>{C&&(x.value=!1,p.value={fullKey:C.fullKey,name:C.name,data:ge(C.data||{})},k.value=null,f.value=!0)},m_=()=>{x.value=!0,p.value={fullKey:"",data:{}},k.value=null,f.value=!0},g_=C=>{f.value=C,C||(p.value=null,k.value=null,g.value=!1,x.value=!1)},v_=async C=>{if(!C||!C.fullKey||!C.data){k.value=C?.error||"Invalid data entry payload";return}const y=C.fullKey.trim(),O=!!C.isNew;if(!y){k.value="Dot notation key is required";return}if(O&&f_(u.value,y)){k.value="A data source with this key already exists";return}const ke=ge(u.value),Ne=d_(u.value,y,C.data);if(!Ne){k.value="Unable to write data entry to catalog";return}u.value=Ne,g.value=!0,k.value=null;try{if(await Zp(Ne),Xp(y),s.success(O?"Data Source Added":"Data Catalog Updated",O?"Data entry created successfully":"Data entry saved successfully"),f.value=!1,p.value=null,x.value=!1,m.value.has(y)){const Ue=new Set(m.value);Ue.delete(y),m.value=Ue}}catch(Ue){u.value=ke,k.value=Ue.message||"Failed to save data catalog",s.error("Save Failed",Ue.message||"Failed to save data catalog")}finally{g.value=!1}},y_=(C,y)=>{if(!C||!y)return null;const O=y.split(".").filter(Boolean);if(O.length===0)return null;const ke=ge(C),Ne=[];let Ue=ke;for(let dt=0;dt<O.length;dt++){const Ft=O[dt];if(!Ue||typeof Ue!="object"||!(Ft in Ue))return null;Ne.push({parent:Ue,key:Ft}),Ue=Ue[Ft]}const yt=Ne.pop();if(!yt)return null;delete yt.parent[yt.key];for(let dt=Ne.length-1;dt>=0;dt--){const{parent:Ft,key:pn}=Ne[dt];Ft[pn]&&typeof Ft[pn]=="object"&&!Array.isArray(Ft[pn])&&Object.keys(Ft[pn]).length===0&&delete Ft[pn]}return ke},b_=async()=>{if(!Mc.value)return;_.value=!0;const C=ge(u.value);let y=ge(C);for(const O of m.value){const ke=y_(y,O);if(!ke){s.error("Delete Failed",`Unable to locate ${O} in catalog`),_.value=!1;return}y=ke}try{await Zp(y),u.value=y,s.success("Data Catalog Updated","Staged deletions have been saved"),m.value=new Set}catch(O){s.error("Delete Failed",O.message||"Failed to save catalog changes")}finally{_.value=!1}},k_=C=>{if(!C||!C.fullKey)return;const y=new Set(m.value);y.has(C.fullKey)?y.delete(C.fullKey):y.add(C.fullKey),m.value=y},x_=()=>{m.value=new Set},__=C=>{const y=new Set(d.value);y.has(C)?y.delete(C):y.add(C),d.value=y},em=async()=>{r.value=!0,o.value=null;try{const y=await(await fetch(`/api/project/${e.params.id}`)).json();y.error?o.value=y.error:i.value=y}catch(C){o.value="Failed to load project: "+C.message}finally{r.value=!1}},tm=async()=>{try{const y=await(await fetch(`/api/project/${e.params.id}/data`)).json();y.error||(u.value=y.data||y)}catch(C){console.error("Failed to load data catalog:",C)}},w_=(C={})=>{const y=C.databases||{},O=C.storage_buckets||{};return!!(Object.keys(y).length||Object.keys(O).length||C.default_database||C.default_storage_bucket)},Ic=(C={})=>{const y=zp(C||{});B.value=y.databaseConnections,pe.value=y.s3Connections,ve.value=y.defaultDatabase,Ae.value=y.defaultStorageBucket},ca=async()=>{qe.value=!0,rt.value=null;try{const[C,y]=await Promise.all([fetch(`/api/project/${e.params.id}/settings`),fetch("/api/settings/catalog")]),O=await C.json(),ke=await y.json();if($e.value=ke,O.error)rt.value=O.error;else{console.log("[DEBUG] Loaded project settings:",O.settings),console.log("[DEBUG] extra_directories:",O.settings.extra_directories),Te.value=O.settings;const Ne=e$(O.settings,$e.value?.project_types?.[O.settings?.type||i.value.type]?.directories||{});me.value={...JSON.parse(JSON.stringify(O.settings)),directories:Ne.directories,render_dirs:Ne.render_dirs,extra_directories:Ne.extra_directories,enabled:Ne.enabled},fm(me.value.quarto),me.value.scaffold||(me.value.scaffold={notebook_format:"quarto",positron:!1}),O.settings?.connections&&Ic(O.settings.connections),O.settings?.quarto&&fm(O.settings.quarto)}}catch(C){rt.value="Failed to load settings: "+C.message}finally{qe.value=!1}},S_=async()=>{switch(l.value){case"author":case"settings":await da();break;case"packages":await sm();break;case"scaffold":await da();break;case"git":await cm();break;case"connections":await im();break;case"ai":await um();break;case"quarto":await hm();break;case"env":await jc();break;case"overview":case"notebooks":case"data":s.info("No Changes to Save","This section has no editable settings");break;default:s.info("No Changes to Save","This section has no editable settings")}},da=async()=>{console.log("[DEBUG] saveSettings called! Stack trace:",new Error().stack),ot.value=!0;try{const C=(me.value.extra_directories||[]).filter(yt=>pt.value.has(yt._id));if(C.length>0){const dt=await(await fetch(`/api/project/${e.params.id}/directories`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({directories:C})})).json();if(!dt.success){s.error("Directory Creation Failed",dt.error||"Failed to create directories"),ot.value=!1;return}pt.value=new Set}const y=$e.value?.project_types?.[i.value.type]?.directories||{},O=Xx({catalogDirs:y,directories:me.value.directories||{},render_dirs:me.value.render_dirs||{},enabled:me.value.enabled||{},extra_directories:me.value.extra_directories||[]}),ke={...me.value,directories:O.directories,render_dirs:O.render_dirs,enabled:O.enabled,extra_directories:O.extra_directories,quarto:oe.value};console.log("[DEBUG] Saving settings with extra_directories:",ke.extra_directories);const Ue=await(await fetch(`/api/project/${e.params.id}/settings`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ke)})).json();if(Ue.success){const yt=C.length>0?`Settings updated and ${C.length} director${C.length===1?"y":"ies"} created`:"Project settings have been updated";s.success("Settings Saved",yt),Te.value=JSON.parse(JSON.stringify(me.value)),await ca()}else s.error("Save Failed",Ue.error||"Failed to save settings")}catch(C){s.error("Save Failed",C.message)}finally{ot.value=!1}},C_=C=>{C&&h_(C.anchorId,C.nodeKey)},nm=()=>{const C=document.getElementById("env");C&&C.scrollIntoView({behavior:"smooth",block:"start"})},A_=async()=>{Te.value?.connections&&Ic(Te.value.connections);try{const y=await(await fetch(`/api/project/${e.params.id}/connections`)).json();y.error?console.error("Failed to load connections:",y.error):w_(y)&&(Ic(y),Te.value&&(Te.value.connections=y))}catch(C){console.error("Failed to load connections:",C.message)}},fa=async()=>{ye.value=!0,vt.value=null;try{const y=await(await fetch(`/api/project/${e.params.id}/packages`)).json();if(y.error)vt.value=y.error;else{const O=n$(y);ze.value=JSON.parse(JSON.stringify(O.default_packages||[])),Xe.value=O}}catch(C){vt.value="Failed to load packages: "+C.message}finally{ye.value=!1}},sm=async()=>{Lt.value=!0;try{const y=await(await fetch(`/api/project/${e.params.id}/packages`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Zx(Xe.value))})).json();y.success?(s.success("Packages Saved","Package configuration has been updated"),await fa()):s.error("Save Failed",y.error||"Failed to save packages")}catch(C){s.error("Save Failed",C.message)}finally{Lt.value=!1}},im=async()=>{Me.value=!0;try{const C=Hp({databaseConnections:B.value,s3Connections:pe.value,defaultDatabase:ve.value,defaultStorageBucket:Ae.value}),O=await(await fetch(`/api/project/${e.params.id}/connections`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(C)})).json();O.success?(s.success("Connections Saved","Connection configuration has been updated"),Te.value&&(Te.value.connections=C)):s.error("Save Failed",O.error||"Failed to save connections")}catch(C){s.error("Save Failed",C.message)}finally{Me.value=!1}},E_=async()=>{if(Ct.value.length<2){ct.value=[],st.value=-1;return}tt.value=!0;try{const y=await(await fetch(`/api/packages/search?q=${encodeURIComponent(Ct.value)}`)).json();console.log("Package search results:",y),ct.value=y.packages||[],st.value=ct.value.length>0?0:-1}catch(C){console.error("Failed to search packages:",C),ct.value=[],st.value=-1}finally{tt.value=!1}},T_=C=>{ct.value.length!==0&&(C.key==="ArrowDown"?(C.preventDefault(),st.value=Math.min(st.value+1,ct.value.length-1)):C.key==="ArrowUp"?(C.preventDefault(),st.value=Math.max(st.value-1,0)):C.key==="Enter"&&st.value>=0?(C.preventDefault(),rm(ct.value[st.value])):C.key==="Escape"&&(ct.value=[],st.value=-1))},rm=C=>{Nt.value.name=C.name,Nt.value.source=C.source,Ct.value="",ct.value=[],st.value=-1},D_=()=>{Nt.value.name.trim()&&(ze.value.push({name:Nt.value.name.trim(),source:Nt.value.source,auto_attach:Nt.value.auto_attach}),$t.value=!1,s.success("Package Added",`${Nt.value.name} added to package list`))},P_=()=>{Gt.value=!1,St.value="untrack",on.value=""},R_=async()=>{if(!Yp.value){console.log("[DELETE] Cannot delete - canDelete is false");return}console.log("[DELETE] Starting delete with option:",St.value),console.log("[DELETE] Project ID:",e.params.id);try{const C=St.value==="delete"?`/api/projects/${e.params.id}/delete`:`/api/projects/${e.params.id}/untrack`;console.log("[DELETE] Calling endpoint:",C);const y=await fetch(C,{method:"POST",headers:{"Content-Type":"application/json"}});if(console.log("[DELETE] Response status:",y.status),!y.ok){const Ne=await y.json();throw console.error("[DELETE] Error response:",Ne),new Error(Ne.message||"Failed to delete project")}const O=await y.json();console.log("[DELETE] Success result:",O);const ke=St.value==="delete"?"deleted":"removed from Framework";s.success("Project Removed",`${i.value.name} has been ${ke}`),setTimeout(()=>{window.location.href="/"},500)}catch(C){console.error("[DELETE] Failed to delete project:",C),s.error("Delete Failed",C.message||"Could not delete project")}},O_=C=>C?Array.isArray(C)?Array.from(new Set(C.map(y=>String(y)))):typeof C=="string"?[C]:[]:[],om=async C=>{let y=`/api/project/${e.params.id}/ai`;if(C){const ke=new URLSearchParams;ke.set("canonical_file",C),y+=`?${ke.toString()}`}const O=await fetch(y);if(!O.ok)throw new Error("Failed to load AI settings");return O.json()},ha=async()=>{Or.value=!0,gi.value=null;try{const C=await om();if(C.error){gi.value=C.error,Xn.value=!1;return}const y=C.ai||{};T=!0;const O={enabled:!!y.enabled,canonical_file:y.canonical_file||"CLAUDE.md",canonical_content:y.canonical_content||"",assistants:O_(y.assistants)};Mt.value=O,qi.value={file:y.content_file||y.canonical_file||"CLAUDE.md",exists:!!y.content_exists},T=!1,await am(O.canonical_file,{preserveContentIfMissing:!1}),Xn.value=!0}catch(C){gi.value=C.message||"Failed to load AI settings",Xn.value=!1}finally{T=!1,Or.value=!1,vi.value=!1}},pa=async()=>{se.value=!0,xe.value=null;try{const y=await(await fetch(`/api/project/${e.params.id}/git`)).json();if(y.error){xe.value=y.error,L.value=!1;return}const O=y.git||{};ne.value={initialize:O.initialize!==void 0?!!O.initialize:!0,user_name:O.user_name||"",user_email:O.user_email||"",hooks:{ai_sync:O.hooks?.ai_sync||!1,data_security:O.hooks?.data_security||!1,check_sensitive_dirs:O.hooks?.check_sensitive_dirs||!1}},L.value=!0}catch(C){xe.value=C.message||"Failed to load Git settings",L.value=!1}finally{se.value=!1}},lm=z({get(){return Fp({useGit:ne.value.initialize,gitHooks:ne.value.hooks,git:ne.value})},set(C){const y={...ne.value,hooks:{...ne.value.hooks||{}}};Up({gitTarget:y,gitHooksTarget:y.hooks,setUseGit:O=>{y.initialize=O}},C),ne.value=y}}),am=async(C,{preserveContentIfMissing:y=!0}={})=>{if(C){vi.value=!0;try{const O=await om(C);if(O.error){s.error("Load Failed",O.error);return}const ke=O.ai||{};qi.value={file:ke.content_file||C,exists:!!ke.content_exists},(ke.content_exists||!y)&&(Mt.value.canonical_content=ke.canonical_content||"")}catch(O){s.error("Load Failed",O.message||"Unable to load canonical file")}finally{vi.value=!1}}},L_=C=>{const y=typeof C=="string"&&C.length>0?C:"CLAUDE.md";am(y,{preserveContentIfMissing:!0})},um=async()=>{Wi.value=!0;try{const y=await(await fetch(`/api/project/${e.params.id}/ai`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:Mt.value.enabled,canonical_file:Mt.value.canonical_file,assistants:Mt.value.assistants,canonical_content:Mt.value.canonical_content})})).json();y.success?(s.success("AI Settings Saved","AI assistant configuration has been updated"),Xn.value=!1,await ha()):s.error("Save Failed",y.error||"Failed to save AI settings")}catch(C){s.error("Save Failed",C.message||"Failed to save AI settings")}finally{Wi.value=!1}},cm=async()=>{j.value=!0;try{const y=await(await fetch(`/api/project/${e.params.id}/git`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({initialize:ne.value.initialize,user_name:ne.value.user_name,user_email:ne.value.user_email,hooks:ne.value.hooks})})).json();y.success?(s.success("Git Settings Saved","Repository configuration has been updated"),L.value=!1,await pa()):s.error("Save Failed",y.error||"Failed to save Git settings")}catch(C){s.error("Save Failed",C.message||"Failed to save Git settings")}finally{j.value=!1}},Mr=async()=>{if(hs.value||ps.value){console.log("[loadEnv] Blocked: already loading or loaded",{loading:hs.value,loaded:ps.value});return}hs.value=!0,tn.value=null;try{const y=await(await fetch(`/api/project/${e.params.id}/env`)).json();y.error?(tn.value=y.error,ps.value=!1):(q=!0,console.log("[loadEnv] Updating env values with suppressEnvWatch = true"),ps.value=!0,As.value=y.variables||{},Pr.value=y.groups||{},pi.value=y.raw_content||"",q=!1,console.log("[loadEnv] Env values updated, suppressEnvWatch = false"))}catch(C){tn.value="Failed to load .env: "+C.message,ps.value=!1}finally{q=!1,hs.value=!1}},jc=async()=>{Hi.value=!0;try{const C=mi.value==="raw"?{raw_content:pi.value}:{variables:As.value,regroup:Rr.value},O=await(await fetch(`/api/project/${e.params.id}/env`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(C)})).json();O.success?(s.success(".env Saved","Environment variables have been updated"),ps.value=!1,await Mr()):s.error("Save Failed",O.error||"Failed to save .env")}catch(C){s.error("Save Failed",C.message)}finally{Hi.value=!1}},M_=async()=>{G.value=!0;try{const C=e.params.id,[y,O,ke,Ne]=await Promise.all([fetch(`/api/project/${C}/files/inputs_raw`),fetch(`/api/project/${C}/files/inputs_intermediate`),fetch(`/api/project/${C}/files/inputs_final`),fetch(`/api/project/${C}/files/inputs_reference`)]),[Ue,yt,dt,Ft]=await Promise.all([y.json(),O.json(),ke.json(),Ne.json()]);N.value=Ue.files||[],A.value=yt.files||[],w.value=dt.files||[],M.value=Ft.files||[]}catch(C){console.error("Failed to load input files:",C)}finally{G.value=!1}},I_=async()=>{X.value=!0;try{const C=e.params.id,[y,O,ke,Ne,Ue]=await Promise.all([fetch(`/api/project/${C}/files/outputs_tables`),fetch(`/api/project/${C}/files/outputs_figures`),fetch(`/api/project/${C}/files/outputs_models`),fetch(`/api/project/${C}/files/outputs_reports`),fetch(`/api/project/${C}/files/outputs_notebooks`)]),[yt,dt,Ft,pn,yi]=await Promise.all([y.json(),O.json(),ke.json(),Ne.json(),Ue.json()]);F.value=yt.files||[],ae.value=dt.files||[],ee.value=Ft.files||[],V.value=pn.files||[],J.value=yi.files||[]}catch(C){console.error("Failed to load output files:",C)}finally{X.value=!1}},j_=async()=>{Ce.value=!0;try{const y=await(await fetch(`/api/project/${e.params.id}/results`)).json();de.value=y.results||[]}catch(C){console.error("Failed to load results:",C),de.value=[]}finally{Ce.value=!1}},Vc=z(()=>{const C=W.value||[];return C.length?C.find(y=>y.key===D.value)||C[0]:null}),dm=z({get:()=>Vc.value?.contents||"",set:C=>{const y=Vc.value;y&&(y.contents=C)}}),fm=C=>{const y=C?.quarto;y&&(oe.value={html:{format:"html",embed_resources:y.html?.embed_resources??!0,theme:y.html?.theme??"default",toc:y.html?.toc??!0,toc_depth:y.html?.toc_depth??3,code_fold:y.html?.code_fold??!1,code_tools:y.html?.code_tools??!1,highlight_style:y.html?.highlight_style??"github"},revealjs:{format:"revealjs",theme:y.revealjs?.theme??"default",incremental:y.revealjs?.incremental??!1,slide_number:y.revealjs?.slide_number??!0,transition:y.revealjs?.transition??"slide",background_transition:y.revealjs?.background_transition??"fade",controls:y.revealjs?.controls??!0,progress:y.revealjs?.progress??!0,center:y.revealjs?.center??!0,highlight_style:y.revealjs?.highlight_style??"github"}},re.value=JSON.parse(JSON.stringify(oe.value)))},$c=async()=>{$.value=!0;try{const y=await(await fetch(`/api/project/${e.params.id}/quarto/files`)).json();if(y.error)throw new Error(y.error);W.value=y.files||[],E.value={};for(const O of W.value)E.value[O.key]=O.contents||"";W.value.length>0&&!D.value&&(D.value=W.value[0].key)}catch(C){s.error("Failed to load Quarto configs",C.message)}finally{$.value=!1}},hm=async()=>{let C=!1,y=!1,O=!1;const ke=W.value.filter(Ue=>{const yt=E.value[Ue.key]||"";return Ue.contents!==yt});if(ke.length>0){O=!0,K.value=!0;try{const yt=await(await fetch(`/api/project/${e.params.id}/quarto/files`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({files:ke})})).json();if(yt.success){C=!0;for(const dt of ke)E.value[dt.key]=dt.contents}else{s.error("Save Failed",yt.error||"Failed to save Quarto files"),K.value=!1;return}}catch(Ue){s.error("Save Failed",Ue.message),K.value=!1;return}K.value=!1}if(re.value&&JSON.stringify(oe.value)!==JSON.stringify(re.value)){O=!0,te.value=!0;try{await da(),y=!0,re.value=JSON.parse(JSON.stringify(oe.value))}catch(Ue){s.error("Save Failed",Ue.message),te.value=!1;return}te.value=!1}O?C&&y?s.success("Quarto Saved","Files and defaults saved successfully"):C?s.success("Quarto Files Saved",`${ke.length} file(s) saved`):y&&s.success("Quarto Defaults Saved","Defaults saved to project settings"):s.info("No Changes","No changes detected in Quarto settings")},V_=async()=>{le.value=!0;try{const y=await(await fetch(`/api/project/${e.params.id}/quarto/regenerate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({backup:!0})})).json();y.success?(s.success("Quarto Configs Regenerated",y.message+(y.backup_location?`

Backup: ${y.backup_location}`:"")),await $c()):s.error("Regeneration Failed",y.error||"Failed to regenerate Quarto configurations")}catch(C){s.error("Regeneration Failed",C.message)}finally{le.value=!1}},$_=async()=>{const C=[];me.value&&Object.keys(me.value).length>0&&C.push(da()),(B.value?.length>0||pe.value?.length>0)&&C.push(im()),ze.value?.length>0&&C.push(sm()),ne.value&&C.push(cm()),Mt.value&&C.push(um()),envContents.value!==null&&C.push(jc()),W.value?.length>0&&C.push(hm()),C.length>0&&await Promise.all(C)},pm=C=>{(C.metaKey||C.ctrlKey)&&C.key==="s"&&(C.preventDefault(),$_())};return Cn(()=>{I(),em(),tm(),ca(),$c(),fa(),ha(),pa(),Mr(),window.addEventListener("keydown",pm)}),xo(()=>{window.removeEventListener("keydown",pm)}),je(()=>e.params.id,(C,y)=>{C&&C!==y&&(l.value="overview",i.value=null,Te.value=null,me.value={},rt.value=null,qe.value=!1,ze.value=[],Xe.value={use_renv:!1,default_packages:[]},vt.value=null,ye.value=!1,u.value=null,m.value=new Set,k.value=null,p.value=null,As.value={},Pr.value={},pi.value="",tn.value=null,hs.value=!1,mi.value="grouped",Rr.value=!1,ne.value={initialize:!0,user_name:"",user_email:"",hooks:{ai_sync:!1,data_security:!1,check_sensitive_dirs:!1}},L.value=!1,xe.value=null,se.value=!1,T=!0,Mt.value={enabled:!1,canonical_file:"CLAUDE.md",canonical_content:"",assistants:[]},qi.value={file:"CLAUDE.md",exists:!0},Xn.value=!1,gi.value=null,Or.value=!1,vi.value=!1,T=!1,ps.value=!1,tn.value=null,hs.value=!1,u.value=null,W.value=[],D.value=null,I(),em(),tm(),ca(),$c(),fa(),ha(),pa(),Mr())}),(C,y)=>(v(),b("div",null,[r.value?(v(),b("div",w7,[...y[56]||(y[56]=[h("div",{class:"text-zinc-600 dark:text-zinc-400"},"Loading project...",-1)])])):o.value?(v(),b("div",S7,[S(Kn,{type:"error",title:"Error Loading Project",description:o.value},null,8,["description"])])):i.value?(v(),b("div",C7,[h("nav",A7,[h("div",E7,[h("h2",T7,Y(i.value.name),1),h("div",D7,[h("span",P7,Y(i.value.path),1),S(zs,{value:i.value.path,successMessage:"Path copied",class:"shrink-0"},null,8,["value"])])]),h("div",R7,[h("a",{href:"#overview",onClick:y[0]||(y[0]=Tt(O=>l.value="overview",["prevent"])),class:Se(Kt("overview"))},[S(Ke(hc),{class:"h-4 w-4"}),y[57]||(y[57]=ce(" Overview ",-1))],2),S(Xu,null,{default:Z(()=>[...y[58]||(y[58]=[ce("Settings",-1)])]),_:1}),h("a",{href:"#basics",onClick:y[1]||(y[1]=Tt(O=>l.value="basics",["prevent"])),class:Se(Kt("basics"))},[S(Ke(jh),{class:"h-4 w-4"}),y[59]||(y[59]=ce(" Basics ",-1))],2),h("a",{href:"#settings",onClick:y[2]||(y[2]=Tt(O=>l.value="settings",["prevent"])),class:Se(Kt("settings"))},[S(Ke(kl),{class:"h-4 w-4"}),y[60]||(y[60]=ce(" Project Structure ",-1))],2),h("a",{href:"#packages",onClick:y[3]||(y[3]=Tt(O=>l.value="packages",["prevent"])),class:Se(Kt("packages"))},[S(Ke(fc),{class:"h-4 w-4"}),y[61]||(y[61]=ce(" Packages ",-1))],2),h("a",{href:"#ai",onClick:y[4]||(y[4]=Tt(O=>l.value="ai",["prevent"])),class:Se(Kt("ai"))},[S(Ke(MC),{class:"h-4 w-4"}),y[62]||(y[62]=ce(" AI Assistants ",-1))],2),h("a",{href:"#quarto",onClick:y[5]||(y[5]=Tt(O=>l.value="quarto",["prevent"])),class:Se(Kt("quarto"))},[S(Ke(mr),{class:"h-4 w-4"}),y[63]||(y[63]=ce(" Quarto ",-1))],2),h("a",{href:"#git",onClick:y[6]||(y[6]=Tt(O=>l.value="git",["prevent"])),class:Se(Kt("git"))},[...y[64]||(y[64]=[h("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})],-1),ce(" Git & Hooks ",-1)])],2),h("a",{href:"#connections",onClick:y[7]||(y[7]=Tt(O=>l.value="connections",["prevent"])),class:Se(Kt("connections"))},[S(Ke(Vh),{class:"h-4 w-4"}),y[65]||(y[65]=ce(" Connections ",-1))],2),h("a",{href:"#env",onClick:y[8]||(y[8]=Tt(O=>l.value="env",["prevent"])),class:Se(Kt("env"))},[S(Ke(pc),{class:"h-4 w-4"}),y[66]||(y[66]=ce(" .env Defaults ",-1))],2),h("a",{href:"#scaffold",onClick:y[9]||(y[9]=Tt(O=>l.value="scaffold",["prevent"])),class:Se(Kt("scaffold"))},[S(Ke(_C),{class:"h-4 w-4"}),y[67]||(y[67]=ce(" Scaffold Behavior ",-1))],2),S(Xu,null,{default:Z(()=>[...y[68]||(y[68]=[ce("Project",-1)])]),_:1}),h("a",{href:"#data",onClick:y[10]||(y[10]=Tt(O=>l.value="data",["prevent"])),class:Se(Kt("data"))},[S(Ke(TC),{class:"h-4 w-4"}),y[69]||(y[69]=ce(" Data ",-1))],2),l.value==="data"&&Gp.value.length?(v(),b("div",O7,[(v(!0),b(be,null,Ve(Gp.value,O=>(v(),b("a",{key:O.anchorId,href:`#${O.anchorId}`,onClick:Tt(ke=>C_(O),["prevent"]),class:"flex items-center justify-between gap-2 rounded-md px-3 py-1 text-xs text-gray-600 transition hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-gray-800"},[h("span",M7,Y(O.label),1),O.count?(v(),b("span",I7,Y(O.count),1)):H("",!0)],8,L7))),128))])):H("",!0),h("a",{href:"#inputs",onClick:y[11]||(y[11]=Tt(O=>l.value="inputs",["prevent"])),class:Se(Kt("inputs"))},[S(Ke(wC),{class:"h-4 w-4"}),y[70]||(y[70]=ce(" Inputs ",-1))],2),h("a",{href:"#outputs",onClick:y[12]||(y[12]=Tt(O=>l.value="outputs",["prevent"])),class:Se(Kt("outputs"))},[S(Ke(SC),{class:"h-4 w-4"}),y[71]||(y[71]=ce(" Outputs ",-1))],2),h("a",{href:"#results",onClick:y[13]||(y[13]=Tt(O=>l.value="results",["prevent"])),class:Se(Kt("results"))},[S(Ke(ab),{class:"h-4 w-4"}),y[72]||(y[72]=ce(" Results ",-1))],2),h("a",{href:"#notebooks",onClick:y[14]||(y[14]=Tt(O=>l.value="notebooks",["prevent"])),class:Se(Kt("notebooks"))},[S(Ke(mr),{class:"h-4 w-4"}),y[73]||(y[73]=ce(" Notebooks ",-1))],2)]),h("div",j7,[S(Ye,{variant:"primary",onClick:S_,disabled:ot.value||Lt.value||Hi.value||Wi.value||j.value||Me.value||K.value||te.value,class:"w-full"},{default:Z(()=>[ce(Y(ot.value||Lt.value||Hi.value||Wi.value||j.value||Me.value||K.value||te.value?"Saving...":"Save"),1)]),_:1},8,["disabled"])]),h("div",V7,[h("div",$7,[h("button",{onClick:y[15]||(y[15]=O=>Gt.value=!0),class:"text-xs text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-400 transition"}," Delete Project ")])])]),h("div",N7,[He(h("div",B7,[y[74]||(y[74]=h("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Overview",-1)),y[75]||(y[75]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Quick overview of your project settings. ",-1)),S(Rp,{cards:la.value,onNavigate:y[16]||(y[16]=O=>l.value=O)},null,8,["cards"])],512),[[nt,l.value==="overview"]]),He(h("div",F7,[qe.value?(v(),b("div",U7,[...y[76]||(y[76]=[h("div",{class:"text-center py-12 text-zinc-500 dark:text-zinc-400"}," Loading settings... ",-1)])])):rt.value?(v(),b("div",z7,[S(Kn,{type:"error",title:"Error Loading Settings",description:rt.value},null,8,["description"])])):(v(),b("div",H7,[y[82]||(y[82]=h("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Basics",-1)),y[83]||(y[83]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Essential project settings. ",-1)),h("div",W7,[me.value.scaffold?(v(),b("div",q7,[S(Ee,{modelValue:i.value.name,"onUpdate:modelValue":y[17]||(y[17]=O=>i.value.name=O),label:"Project Name",hint:"Changing this will rename the project directory"},null,8,["modelValue"]),h("div",null,[y[77]||(y[77]=h("label",{class:"block text-sm font-semibold text-gray-900 dark:text-white mb-2"}," Filesystem Location ",-1)),h("div",G7,[h("code",K7,Y(i.value.path),1),S(zs,{value:i.value.path,successMessage:"Path copied"},null,8,["value"])])]),h("div",null,[y[79]||(y[79]=h("label",{class:"block text-sm font-semibold text-gray-900 dark:text-white mb-3"}," Supported Editors ",-1)),S(ri,{modelValue:me.value.scaffold.positron,"onUpdate:modelValue":y[18]||(y[18]=O=>me.value.scaffold.positron=O),id:"support-positron-edit",description:"Creates .code-workspace file for Positron/VS Code users"},{default:Z(()=>[...y[78]||(y[78]=[ce(" Positron / VS Code ",-1)])]),_:1},8,["modelValue"]),y[80]||(y[80]=h("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-3"}," RStudio supported by default ",-1))]),S(bn,{modelValue:me.value.scaffold.notebook_format,"onUpdate:modelValue":y[19]||(y[19]=O=>me.value.scaffold.notebook_format=O),label:"Default Notebook Format",hint:"Format used when creating new notebooks"},{default:Z(()=>[...y[81]||(y[81]=[h("option",{value:"quarto"},"Quarto (.qmd)",-1),h("option",{value:"rmarkdown"},"R Markdown (.Rmd)",-1)])]),_:1},8,["modelValue"]),me.value.author?(v(),b("div",J7,[S(Op,{modelValue:me.value.author,"onUpdate:modelValue":y[20]||(y[20]=O=>me.value.author=O)},null,8,["modelValue"])])):H("",!0)])):H("",!0)])]))],512),[[nt,l.value==="basics"]]),He(h("div",Q7,[qe.value?(v(),b("div",Y7,[...y[84]||(y[84]=[h("div",{class:"text-center py-12 text-zinc-500 dark:text-zinc-400"}," Loading settings... ",-1)])])):rt.value?(v(),b("div",X7,[S(Kn,{type:"error",title:"Error Loading Settings",description:rt.value},null,8,["description"])])):Te.value?(v(),b("div",Z7,[y[87]||(y[87]=h("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Project Structure",-1)),h("p",eB,[y[85]||(y[85]=ce(" This project uses the ",-1)),h("strong",null,Y(Qp.value),1),y[86]||(y[86]=ce(" structure. ",-1))]),S(Kn,{type:"info",title:"Append-Only Mode",description:"You can enable disabled directories and add new custom directories. Directories that are already enabled cannot be turned off to prevent accidental data loss.",class:"mb-6"}),S(Np,{"project-type":i.value.type,directories:me.value.directories||{},"render-dirs":me.value.render_dirs||{},enabled:me.value.enabled||c_.value,"extra-directories":me.value.extra_directories||[],settings:me.value,gitignore:me.value.gitignore||"",catalog:$e.value?.project_types?.[i.value.type]||{},"new-extra-ids":pt.value,"allow-destruction":!1,"onUpdate:directories":y[21]||(y[21]=O=>me.value.directories=O),"onUpdate:renderDirs":y[22]||(y[22]=O=>me.value.render_dirs=O),"onUpdate:enabled":y[23]||(y[23]=O=>me.value.enabled=O),"onUpdate:extraDirectories":y[24]||(y[24]=O=>me.value.extra_directories=O),"onUpdate:gitignore":y[25]||(y[25]=O=>me.value.gitignore=O),"onUpdate:newExtraIds":y[26]||(y[26]=O=>pt.value=O)},null,8,["project-type","directories","render-dirs","enabled","extra-directories","settings","gitignore","catalog","new-extra-ids"])])):H("",!0)],512),[[nt,l.value==="settings"]]),He(h("div",tB,[y[89]||(y[89]=h("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Rendered Notebooks",-1)),y[90]||(y[90]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Browse and access your rendered Quarto/RMarkdown notebooks. ",-1)),h("div",nB,[S(Ke(mr),{class:"h-12 w-12 mx-auto mb-4 text-gray-400"}),y[88]||(y[88]=h("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Notebook browser coming soon... ",-1))])],512),[[nt,l.value==="notebooks"]]),He(h("div",sB,[h("div",iB,[y[92]||(y[92]=h("div",null,[h("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white"},"Data Catalog"),h("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Browse your project's data sources with copy commands. ")],-1)),S(Ye,{variant:"primary",size:"sm",class:"inline-flex items-center gap-2",onClick:m_},{default:Z(()=>[S(Ke(LC),{class:"h-4 w-4"}),y[91]||(y[91]=ce(" Add Data Source ",-1))]),_:1})]),h("div",rB,[S(Ee,{modelValue:c.value,"onUpdate:modelValue":y[27]||(y[27]=O=>c.value=O),label:"Search data sources",placeholder:"Filter by name, prefix, or file path"},null,8,["modelValue"])]),Wp.value.length>0?(v(),b("div",oB,[(v(!0),b(be,null,Ve(Wp.value,O=>(v(),we(WN,{key:O.fullKey,node:O,"expanded-keys":d.value,"auto-expanded-keys":s_.value,"toggle-group":__,"search-term":c.value,hierarchical:o_.value,"pending-deletes":m.value,onEdit:p_,onDelete:k_},null,8,["node","expanded-keys","auto-expanded-keys","search-term","hierarchical","pending-deletes"]))),128))])):H("",!0),Mc.value?(v(),b("div",lB,[h("div",aB,[h("div",null,[h("p",uB,Y(Kp.value)+" data source"+Y(Kp.value===1?"":"s")+" marked for deletion. ",1),y[93]||(y[93]=h("p",{class:"text-xs text-red-600 dark:text-red-200/80"}," Changes will be applied when you save. ",-1))]),h("div",cB,[S(Ye,{variant:"secondary",size:"sm",class:"shadow-none",disabled:_.value,onClick:x_},{default:Z(()=>[...y[94]||(y[94]=[ce(" Cancel ",-1)])]),_:1},8,["disabled"]),S(Ye,{size:"sm",class:"bg-red-600 text-white hover:bg-red-500 focus-visible:outline-red-600 dark:bg-red-500 dark:hover:bg-red-400",disabled:_.value,onClick:b_},{default:Z(()=>[ce(Y(_.value?"Saving":"Save Changes"),1)]),_:1},8,["disabled"])])]),h("ul",dB,[(v(!0),b(be,null,Ve(i_.value,O=>(v(),b("li",{key:O},Y(O),1))),128))])])):qp.value?(v(),b("div",fB,[h("p",hB,' No data sources match "'+Y(c.value)+'". ',1),y[95]||(y[95]=h("p",{class:"mt-2 text-xs text-zinc-500 dark:text-zinc-400"}," Try adjusting your search terms or clearing the filter. ",-1))])):(v(),b(be,{key:3},[!Mc.value&&(!u.value||Object.keys(u.value||{}).length===0)?(v(),we(Hl,{key:0,title:"No Data Sources",description:"This project doesn't have any data sources defined in its settings",icon:"database"})):H("",!0)],64))],512),[[nt,l.value==="data"]]),S(Q$,{mode:x.value?"create":"edit",modelValue:f.value,"onUpdate:modelValue":[y[28]||(y[28]=O=>f.value=O),g_],entry:p.value,saving:g.value,error:k.value,onSave:v_},null,8,["mode","modelValue","entry","saving","error"]),He(h("div",pB,[y[96]||(y[96]=h("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Connections",-1)),y[97]||(y[97]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Database and storage connections for this project. ",-1)),S(Vp,{"database-connections":B.value,"onUpdate:databaseConnections":y[29]||(y[29]=O=>B.value=O),"s3-connections":pe.value,"onUpdate:s3Connections":y[30]||(y[30]=O=>pe.value=O),"default-database":ve.value,"onUpdate:defaultDatabase":y[31]||(y[31]=O=>ve.value=O),"default-storage-bucket":Ae.value,"onUpdate:defaultStorageBucket":y[32]||(y[32]=O=>Ae.value=O)},null,8,["database-connections","s3-connections","default-database","default-storage-bucket"])],512),[[nt,l.value==="connections"]]),He(h("div",mB,[y[98]||(y[98]=h("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Input Files",-1)),y[99]||(y[99]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Browse files in your input directories. ",-1)),S(ph,{modelValue:R.value,"onUpdate:modelValue":y[33]||(y[33]=O=>R.value=O),tabs:U,variant:"pills",class:"mb-6"},{default:Z(()=>[S(Ys,{id:"raw",active:R.value==="raw"},{default:Z(()=>[S(Xs,{files:N.value,loading:G.value,emptyTitle:"No raw input files",emptyDescription:"Add raw data files to your inputs/raw directory."},null,8,["files","loading"])]),_:1},8,["active"]),S(Ys,{id:"intermediate",active:R.value==="intermediate"},{default:Z(()=>[S(Xs,{files:A.value,loading:G.value,emptyTitle:"No intermediate files",emptyDescription:"Processed data files will appear in inputs/intermediate."},null,8,["files","loading"])]),_:1},8,["active"]),S(Ys,{id:"final",active:R.value==="final"},{default:Z(()=>[S(Xs,{files:w.value,loading:G.value,emptyTitle:"No final input files",emptyDescription:"Final processed data files will appear in inputs/final."},null,8,["files","loading"])]),_:1},8,["active"]),S(Ys,{id:"reference",active:R.value==="reference"},{default:Z(()=>[S(Xs,{files:M.value,loading:G.value,emptyTitle:"No reference files",emptyDescription:"Reference data and lookup tables go in inputs/reference."},null,8,["files","loading"])]),_:1},8,["active"])]),_:1},8,["modelValue"])],512),[[nt,l.value==="inputs"]]),He(h("div",gB,[y[100]||(y[100]=h("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Output Files",-1)),y[101]||(y[101]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Browse files in your output directories. ",-1)),S(ph,{modelValue:ue.value,"onUpdate:modelValue":y[34]||(y[34]=O=>ue.value=O),tabs:ie,variant:"pills",class:"mb-6"},{default:Z(()=>[S(Ys,{id:"tables",active:ue.value==="tables"},{default:Z(()=>[S(Xs,{files:F.value,loading:X.value,emptyTitle:"No saved tables",emptyDescription:"Tables saved with save_table() will appear here."},null,8,["files","loading"])]),_:1},8,["active"]),S(Ys,{id:"figures",active:ue.value==="figures"},{default:Z(()=>[S(Xs,{files:ae.value,loading:X.value,emptyTitle:"No saved figures",emptyDescription:"Figures saved with save_figure() will appear here."},null,8,["files","loading"])]),_:1},8,["active"]),S(Ys,{id:"models",active:ue.value==="models"},{default:Z(()=>[S(Xs,{files:ee.value,loading:X.value,emptyTitle:"No saved models",emptyDescription:"Models saved with save_model() will appear here."},null,8,["files","loading"])]),_:1},8,["active"]),S(Ys,{id:"reports",active:ue.value==="reports"},{default:Z(()=>[S(Xs,{files:V.value,loading:X.value,emptyTitle:"No saved reports",emptyDescription:"Reports saved with save_report() will appear here."},null,8,["files","loading"])]),_:1},8,["active"]),S(Ys,{id:"notebooks_output",active:ue.value==="notebooks_output"},{default:Z(()=>[S(Xs,{files:J.value,loading:X.value,emptyTitle:"No rendered notebooks",emptyDescription:"Notebooks saved with save_notebook() will appear here."},null,8,["files","loading"])]),_:1},8,["active"])]),_:1},8,["modelValue"])],512),[[nt,l.value==="outputs"]]),He(h("div",vB,[y[102]||(y[102]=h("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Saved Results",-1)),y[103]||(y[103]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Results tracked in the database via save_table(), save_figure(), save_model(), etc. ",-1)),S(_7,{results:de.value,loading:Ce.value},null,8,["results","loading"])],512),[[nt,l.value==="results"]]),He(h("div",yB,[ye.value?(v(),b("div",bB,[...y[104]||(y[104]=[h("div",{class:"text-center py-12"},[h("div",{class:"text-sm text-gray-500 dark:text-gray-400"},"Loading packages...")],-1)])])):vt.value?(v(),b("div",kB,[S(Kn,{type:"error",title:"Error Loading Packages",description:vt.value},null,8,["description"])])):(v(),b("div",xB,[y[105]||(y[105]=h("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Packages & Dependencies",-1)),y[106]||(y[106]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Configure package management and default packages for this project. ",-1)),S(Lp,{modelValue:Xe.value,"onUpdate:modelValue":y[35]||(y[35]=O=>Xe.value=O),"show-renv-toggle":!0,flush:!1},null,8,["modelValue"])]))],512),[[nt,l.value==="packages"]]),He(h("div",_B,[Or.value?(v(),b("div",wB,[...y[107]||(y[107]=[h("div",{class:"text-center py-12 text-sm text-gray-500 dark:text-gray-400"},"Loading AI settings...",-1)])])):gi.value?(v(),b("div",SB,[S(Kn,{type:"error",title:"Error Loading AI Settings",description:gi.value},null,8,["description"])])):(v(),b("div",CB,[y[108]||(y[108]=h("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"AI Assistants",-1)),y[109]||(y[109]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Framework maintains context files for selected assistants and keeps them in sync before commits. ",-1)),S(Mp,{modelValue:Mt.value,"onUpdate:modelValue":y[36]||(y[36]=O=>Mt.value=O),flush:!1,"show-editor":!0,"editor-height":"400px","editor-disabled":vi.value,"editor-loading":vi.value},{"editor-alert":Z(()=>[qi.value.exists?H("",!0):(v(),we(Kn,{key:0,type:"info",title:"New canonical file",description:`Saving copies the current instructions into ${Mt.value.canonical_file||"CLAUDE.md"}. The original file stays on disk; if AI sync hooks are enabled they mirror everything from the new canonical file.`,class:"mb-4"},null,8,["description"]))]),_:1},8,["modelValue","editor-disabled","editor-loading"])]))],512),[[nt,l.value==="ai"]]),He(h("div",AB,[$.value?(v(),b("div",EB,[...y[110]||(y[110]=[h("div",{class:"text-center py-12 text-sm text-gray-500 dark:text-gray-400"},"Loading Quarto files...",-1)])])):(v(),b("div",TB,[y[114]||(y[114]=h("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Quarto",-1)),y[115]||(y[115]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Edit project _quarto.yml files and default rendering options. ",-1)),h("div",DB,[h("div",null,[y[111]||(y[111]=h("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Configuration File ",-1)),He(h("select",{"onUpdate:modelValue":y[37]||(y[37]=O=>D.value=O),class:"w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm shadow-sm focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-200"},[(v(!0),b(be,null,Ve(W.value,O=>(v(),b("option",{key:O.key,value:O.key},Y(O.label)+"  "+Y(O.path),9,PB))),128))],512),[[ef,D.value]])]),Vc.value?(v(),b("div",RB,[S(Lc,{modelValue:dm.value,"onUpdate:modelValue":y[38]||(y[38]=O=>dm.value=O),language:"yaml","auto-grow":!0,class:"min-h-[300px] w-full"},null,8,["modelValue"])])):(v(),b("div",OB," No Quarto files detected for this project. "))]),h("div",LB,[y[112]||(y[112]=h("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-3"},"Quarto Defaults",-1)),S($p,{modelValue:oe.value,"onUpdate:modelValue":y[39]||(y[39]=O=>oe.value=O),flush:""},null,8,["modelValue"])]),h("div",MB,[h("div",IB,[y[113]||(y[113]=h("div",null,[h("h3",{class:"text-sm font-semibold text-amber-900 dark:text-amber-100 mb-1"},"Regenerate Configurations"),h("p",{class:"text-sm text-amber-800 dark:text-amber-200"},[ce(" Overwrite all _quarto.yml files using current settings. Existing files are backed up to "),h("code",{class:"px-1 py-0.5 bg-amber-100 dark:bg-amber-800 rounded text-xs"},".quarto_backups/"),ce(". ")])],-1)),S(Ye,{variant:"secondary",size:"sm",onClick:V_,disabled:le.value,class:"shrink-0"},{default:Z(()=>[ce(Y(le.value?"Regenerating...":"Regenerate"),1)]),_:1},8,["disabled"])])])]))],512),[[nt,l.value==="quarto"]]),He(h("div",jB,[se.value?(v(),b("div",VB,[...y[116]||(y[116]=[h("div",{class:"text-center py-12 text-sm text-gray-500 dark:text-gray-400"},"Loading git settings...",-1)])])):xe.value?(v(),b("div",$B,[S(Kn,{type:"error",title:"Error Loading Git Settings",description:xe.value},null,8,["description"])])):(v(),b("div",NB,[y[118]||(y[118]=h("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Git & Hooks",-1)),y[119]||(y[119]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Configure repository initialization, commit identity, git hooks, and security scanning. ",-1)),S(Ip,{modelValue:lm.value,"onUpdate:modelValue":y[40]||(y[40]=O=>lm.value=O)},{note:Z(()=>[...y[117]||(y[117]=[ce(" Project-specific .gitignore templates can be customized in Project Defaults. ",-1)])]),_:1},8,["modelValue"])]))],512),[[nt,l.value==="git"]]),He(h("div",BB,[qe.value?(v(),b("div",FB,[...y[120]||(y[120]=[h("div",{class:"text-center py-12 text-zinc-500 dark:text-zinc-400"}," Loading settings... ",-1)])])):rt.value?(v(),b("div",UB,[S(Kn,{type:"error",title:"Error Loading Settings",description:rt.value},null,8,["description"])])):(v(),b("div",zB,[y[121]||(y[121]=h("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Scaffold Behavior",-1)),y[122]||(y[122]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"},[ce(" Automatic actions when "),h("code",{class:"px-1.5 py-0.5 bg-gray-200 dark:bg-gray-700 rounded text-xs"},"scaffold()"),ce(" runs to initialize your project environment. ")],-1)),h("div",HB,[me.value.scaffold?(v(),we(jp,{key:0,modelValue:me.value.scaffold,"onUpdate:modelValue":y[41]||(y[41]=O=>me.value.scaffold=O),flush:""},null,8,["modelValue"])):H("",!0)])]))],512),[[nt,l.value==="scaffold"]]),He(h("div",WB,[y[123]||(y[123]=h("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Environment Variables",-1)),y[124]||(y[124]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Manage environment variables for this project (.env file). ",-1)),S(Bp,{loading:hs.value,error:tn.value,groups:Pr.value,variables:As.value,"onUpdate:variables":y[42]||(y[42]=O=>As.value=O),"raw-content":pi.value,"onUpdate:rawContent":y[43]||(y[43]=O=>pi.value=O),"view-mode":mi.value,"onUpdate:viewMode":y[44]||(y[44]=O=>mi.value=O),"regroup-on-save":Rr.value,"onUpdate:regroupOnSave":y[45]||(y[45]=O=>Rr.value=O),onSave:jc},null,8,["loading","error","groups","variables","raw-content","view-mode","regroup-on-save"])],512),[[nt,l.value==="env"]])])])):H("",!0),S(kr,{modelValue:$t.value,"onUpdate:modelValue":y[51]||(y[51]=O=>$t.value=O),title:"Add Package",size:"md",variant:"left"},{actions:Z(()=>[S(Ye,{variant:"primary",onClick:D_,disabled:!Nt.value.name.trim()},{default:Z(()=>[...y[130]||(y[130]=[ce(" Add Package ",-1)])]),_:1},8,["disabled"]),S(Ye,{variant:"secondary",onClick:y[50]||(y[50]=O=>$t.value=!1)},{default:Z(()=>[...y[131]||(y[131]=[ce(" Cancel ",-1)])]),_:1})]),default:Z(()=>[h("div",qB,[h("div",null,[y[125]||(y[125]=h("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Search CRAN Packages ",-1)),He(h("input",{"onUpdate:modelValue":y[46]||(y[46]=O=>Ct.value=O),onKeydown:T_,type:"text",placeholder:"Type to search CRAN...",class:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 px-3 py-2 text-sm text-gray-900 dark:text-gray-100 font-mono focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500"},null,544),[[br,Ct.value]])]),ct.value.length>0?(v(),b("div",GB,[(v(!0),b(be,null,Ve(ct.value,(O,ke)=>(v(),b("button",{key:O.name,onClick:Ne=>rm(O),onMouseenter:Ne=>st.value=ke,class:Se(["w-full px-3 py-2 text-left border-b border-gray-200 dark:border-gray-700 last:border-b-0 transition",st.value===ke?"bg-sky-50 dark:bg-sky-900/20":"hover:bg-gray-50 dark:hover:bg-gray-800"])},[h("div",JB,[h("div",QB,[h("div",YB,Y(O.name),1),O.title?(v(),b("div",XB,Y(O.title),1)):H("",!0),O.author?(v(),b("div",ZB,Y(O.author),1)):H("",!0)]),h("div",e9," v"+Y(O.version),1)])],42,KB))),128))])):H("",!0),h("div",null,[y[126]||(y[126]=h("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Package Name ",-1)),He(h("input",{"onUpdate:modelValue":y[47]||(y[47]=O=>Nt.value.name=O),type:"text",placeholder:"dplyr",class:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 px-3 py-2 text-sm text-gray-900 dark:text-gray-100 font-mono focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500"},null,512),[[br,Nt.value.name]]),Nt.value.source==="github"?(v(),b("p",t9," GitHub: user/repo (e.g., tidyverse/dplyr) ")):H("",!0),Nt.value.source==="bioc"?(v(),b("p",n9," Bioconductor: name only (e.g., DESeq2) ")):H("",!0)]),h("div",null,[y[129]||(y[129]=h("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Source ",-1)),h("div",s9,[He(h("select",{"onUpdate:modelValue":y[48]||(y[48]=O=>Nt.value.source=O),class:"w-full appearance-none rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 pl-3 pr-10 py-2 text-sm text-gray-900 dark:text-gray-100 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500"},[...y[127]||(y[127]=[h("option",{value:"cran"},"CRAN",-1),h("option",{value:"github"},"GitHub",-1),h("option",{value:"bioc"},"Bioconductor",-1)])],512),[[ef,Nt.value.source]]),y[128]||(y[128]=h("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},[h("svg",{class:"h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),h("p",i9,[Nt.value.source==="cran"?(v(),b(be,{key:0},[ce("CRAN: name only (e.g., dplyr)")],64)):Nt.value.source==="github"?(v(),b(be,{key:1},[ce("GitHub: user/repo (e.g., tidyverse/dplyr)")],64)):Nt.value.source==="bioc"?(v(),b(be,{key:2},[ce("Bioconductor: name only (e.g., DESeq2)")],64)):H("",!0)])]),h("div",null,[S(Qe,{modelValue:Nt.value.auto_attach,"onUpdate:modelValue":y[49]||(y[49]=O=>Nt.value.auto_attach=O),label:"Auto-attach on scaffold()"},null,8,["modelValue"])])])]),_:1},8,["modelValue"]),S(kr,{modelValue:Gt.value,"onUpdate:modelValue":y[55]||(y[55]=O=>Gt.value=O),title:"Delete Project",size:"md"},{actions:Z(()=>[S(Ye,{variant:"secondary",onClick:P_},{default:Z(()=>[...y[137]||(y[137]=[ce(" Cancel ",-1)])]),_:1}),S(Ye,{variant:"primary",onClick:R_,disabled:!Yp.value,class:"bg-red-600 hover:bg-red-500 focus-visible:outline-red-600 dark:bg-red-500 dark:hover:bg-red-400"},{default:Z(()=>[ce(Y(St.value==="delete"?"Delete Project":"Remove from Framework"),1)]),_:1},8,["disabled"])]),default:Z(()=>[h("div",r9,[y[136]||(y[136]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Choose how you want to remove this project: ",-1)),h("label",{class:Se(["block cursor-pointer rounded-lg border-2 p-4 transition",St.value==="untrack"?"border-sky-500 bg-sky-50 dark:border-sky-600 dark:bg-sky-950/30":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"])},[h("div",o9,[He(h("input",{type:"radio",id:"delete-untrack",value:"untrack","onUpdate:modelValue":y[52]||(y[52]=O=>St.value=O),class:"mt-1"},null,512),[[Zd,St.value]]),y[132]||(y[132]=h("div",{class:"flex-1"},[h("div",{class:"font-medium text-gray-900 dark:text-white"}," Remove from Framework "),h("div",{class:"text-sm text-gray-600 dark:text-gray-400 mt-1"}," Stop tracking this project in Framework. Files remain on disk. ")],-1))])],2),h("label",{class:Se(["block cursor-pointer rounded-lg border-2 p-4 transition",St.value==="delete"?"border-red-500 bg-red-50 dark:border-red-700 dark:bg-red-950/30":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"])},[h("div",l9,[He(h("input",{type:"radio",id:"delete-files",value:"delete","onUpdate:modelValue":y[53]||(y[53]=O=>St.value=O),class:"mt-1"},null,512),[[Zd,St.value]]),y[133]||(y[133]=h("div",{class:"flex-1"},[h("div",{class:"font-medium text-red-700 dark:text-red-400"}," Delete Entire Project "),h("div",{class:"text-sm text-gray-600 dark:text-gray-400 mt-1"}," Permanently delete all files and folders. This cannot be undone. ")],-1))]),St.value==="delete"?(v(),b("div",a9,[h("div",u9,[y[134]||(y[134]=ce(" Type ",-1)),h("span",c9,Y(i.value?.name),1),y[135]||(y[135]=ce(" to confirm: ",-1))]),S(Ee,{modelValue:on.value,"onUpdate:modelValue":y[54]||(y[54]=O=>on.value=O),placeholder:"Project name",class:"font-mono"},null,8,["modelValue"])])):H("",!0)],2)])]),_:1},8,["modelValue"])]))}},f9={class:"space-y-5"},h9={__name:"EditorAndNotebookPanel",props:{positron:{type:Boolean,default:!1},notebookFormat:{type:String,default:"quarto"}},emits:["update:positron","update:notebookFormat"],setup(n){return(e,t)=>(v(),b("div",f9,[h("div",null,[t[3]||(t[3]=h("label",{class:"block text-sm font-semibold text-gray-900 dark:text-white mb-3"}," Supported Editors ",-1)),S(ri,{"model-value":n.positron,"onUpdate:modelValue":t[0]||(t[0]=s=>e.$emit("update:positron",s)),id:"support-positron",description:"Creates .code-workspace file for Positron/VS Code users"},{default:Z(()=>[...t[2]||(t[2]=[ce(" Positron / VS Code ",-1)])]),_:1},8,["model-value"]),t[4]||(t[4]=h("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-3"}," RStudio supported by default ",-1))]),S(bn,{"model-value":n.notebookFormat,"onUpdate:modelValue":t[1]||(t[1]=s=>e.$emit("update:notebookFormat",s)),label:"Default Notebook Format",hint:"Format used when creating new notebooks"},{default:Z(()=>[...t[5]||(t[5]=[h("option",{value:"quarto"},"Quarto (.qmd)",-1),h("option",{value:"rmarkdown"},"R Markdown (.Rmd)",-1)])]),_:1},8,["model-value"])]))}},t_=`# Framework environment defaults
# Populate these values before running scaffold() or publishing.

# PostgreSQL connection
POSTGRES_HOST=127.0.0.1
POSTGRES_PORT=5432
POSTGRES_DB=postgres
POSTGRES_SCHEMA=public
POSTGRES_USER=postgres
POSTGRES_PASSWORD=

# S3-compatible storage (AWS S3, MinIO, etc.)
S3_BUCKET=
S3_ACCESS_KEY=
S3_SECRET_KEY=
S3_REGION=us-east-1
S3_ENDPOINT=
S3_SESSION_TOKEN=`,p9=(n="")=>{const e={};return n.split(/\r?\n/).forEach(t=>{const s=t.trim();if(!s||s.startsWith("#")||!s.includes("="))return;const[i,...r]=s.split("=");e[i.trim()]=r.join("=").replace(/^"|"$/g,"")}),e},m9=(n={})=>Object.entries(n).map(([e,t])=>`${e}=${t??""}`).join(`
`),n_=(n={})=>{const e=Object.entries(n);return e.length?e.reduce((t,[s,i])=>{const r=s.includes("_")?s.split("_")[0]:"Other";return t[r]||(t[r]={}),t[r][s]={defined:!!i,used:!1,used_in:[],value:i},t},{}):{}},g9=(n,e=t_)=>{let t=e;typeof n=="string"?t=n:n?.raw?t=n.raw:n?.variables&&(t=m9(n.variables));const s=p9(t),i=n_(s);return{rawContent:t,variables:s,groups:i,viewMode:"grouped"}},v9={class:"flex min-h-screen"},y9={class:"w-64 shrink-0 border-r border-gray-200 p-6 dark:border-gray-800"},b9={class:"space-y-1"},k9=["href","onClick"],x9=["fill","viewBox","stroke"],_9=["stroke-linecap","stroke-linejoin","stroke-width","fill","d"],w9={key:1,class:"ml-4 mt-2 space-y-0.5 border-l border-gray-200 pl-3 dark:border-gray-700"},S9=["href","onClick"],C9={key:2,class:"ml-4 mt-2 space-y-0.5 border-l border-gray-200 pl-3 dark:border-gray-700"},A9=["href","onClick"],E9={class:"rounded-md bg-gray-900 p-4 text-xs text-gray-200"},T9={class:"mt-4 flex justify-end"},D9={class:"mt-6 px-3"},P9={key:0,class:"flex-1 flex items-center justify-center"},R9={class:"flex-1 p-10 pb-4"},O9={class:"mt-8 space-y-10"},L9={id:"overview"},M9={id:"connections-defaults"},I9={id:"env-defaults"},j9={class:"mt-6 flex justify-end"},V9={id:"basics"},$9={class:"space-y-5"},N9={class:"pt-4 border-t border-gray-200 dark:border-gray-700"},B9={id:"structure",class:"space-y-8"},F9={key:0,class:"space-y-6"},U9={class:"space-y-3"},z9=["onClick"],H9={class:"flex items-start gap-3"},W9={class:"font-semibold text-gray-900 dark:text-white"},q9={class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},G9={key:1},K9={id:"git"},J9={id:"scaffold"},Q9={id:"packages"},Y9={id:"quarto"},X9={id:"ai"},Z9={class:"mt-4 flex justify-end"},eF={id:"templates"},tF={class:"flex flex-wrap gap-2 mb-6"},nF=["onClick"],sF={class:"flex flex-col gap-4"},iF={class:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"},rF={class:"space-y-1"},oF={class:"text-base font-semibold text-gray-900 dark:text-white"},lF={class:"text-sm text-gray-600 dark:text-gray-400"},aF={key:0,class:"rounded-md bg-sky-50 dark:bg-sky-900/20 border border-sky-200 dark:border-sky-800 p-3"},uF={class:"text-xs"},cF={class:"font-mono font-medium text-sky-700 dark:text-sky-300 pr-4 py-0.5"},dF={class:"text-gray-600 dark:text-gray-400 py-0.5"},fF={class:"text-sm text-gray-600 dark:text-gray-300"},hF={class:"flex gap-3 justify-end"},$d="overview",Pv="project",pF="Settings",mF="Manage default settings for new projects.",gF={__name:"SettingsView",setup(n){const e=mc(),t=Kl(),s=wo(),i=[{id:"overview",label:"Overview",slug:"overview",icon:hc},{id:"basics",label:"Basics",slug:"basics",icon:jh},{id:"structure",label:"Project Structure",slug:"project-structure",icon:kl},{id:"packages",label:"Packages",slug:"packages-dependencies",icon:fc},{id:"quarto",label:"Quarto",slug:"quarto",icon:mr},{id:"git",label:"Git & Hooks",slug:"git-hooks",svgIcon:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"},{id:"ai",label:"AI Assistants",slug:"ai-assistants",svgIcon:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"},{id:"scaffold",label:"Scaffold Behavior",slug:"scaffold-behavior",svgIcon:"M256 64L576 64L576 576L64 576L64 192L256 192L256 64zM256 224L96 224L96 544L256 544L256 224zM288 544L544 544L544 96L288 96L288 544zM440 152L488 152L488 200L440 200L440 152zM392 152L392 200L344 200L344 152L392 152zM440 248L488 248L488 296L440 296L440 248zM392 248L392 296L344 296L344 248L392 248zM152 280L200 280L200 328L152 328L152 280zM392 344L392 392L344 392L344 344L392 344zM152 376L200 376L200 424L152 424L152 376zM488 344L488 392L440 392L440 344L488 344z",svgViewBox:"0 0 640 640",svgFill:"currentColor",svgStroke:"none",svgStrokeWidth:0,svgPathFill:"currentColor"},{id:"templates",label:"Templates",slug:"templates",icon:mr},{id:"connections-defaults",label:"Connections",slug:"connections",icon:Vh},{id:"env-defaults",label:".env Defaults",slug:"env",icon:pc}],r=Object.fromEntries(i.map(({id:I,slug:T})=>[I,T])),o=Object.fromEntries(i.map(({id:I,slug:T})=>[T,I])),l={project:{label:"Standard Project Structure",description:"General-purpose analysis project with notebooks, scripts, and shared outputs.",directories:{functions:"R/functions",notebooks:"notebooks",scripts:"scripts",inputs_raw:"inputs/raw",inputs_intermediate:"inputs/intermediate",inputs_final:"inputs/final",docs:"docs",outputs_tables:"outputs/tables",outputs_figures:"outputs/figures",outputs_models:"outputs/models",outputs_reports:"outputs/reports",cache:"outputs/cache",scratch:"scratch"},render_dirs:{notebooks:"outputs/notebooks",docs:"outputs/docs"},quarto:{render_dir:"outputs/notebooks"},notebook_template:"notebook",extra_directories:[]},project_sensitive:{label:"Privacy Sensitive Project Structure",description:"Projects handling PHI/PII with dedicated private/public data flows.",directories:{functions:"R/functions",notebooks:"notebooks",scripts:"scripts",inputs_private_raw:"inputs/private/raw",inputs_private_intermediate:"inputs/private/intermediate",inputs_private_final:"inputs/private/final",inputs_public_raw:"inputs/public/raw",inputs_public_intermediate:"inputs/public/intermediate",inputs_public_final:"inputs/public/final",outputs_private_tables:"outputs/private/tables",outputs_private_figures:"outputs/private/figures",outputs_private_models:"outputs/private/models",outputs_private_docs:"outputs/private/docs",outputs_private_data_final:"outputs/private/data_final",outputs_public_tables:"outputs/public/tables",outputs_public_figures:"outputs/public/figures",outputs_public_models:"outputs/public/models",outputs_public_docs:"outputs/public/docs",outputs_public_data_final:"outputs/public/data_final",cache:"outputs/private/cache",scratch:"scratch"},quarto:{render_dir:"outputs/public/docs"},notebook_template:"notebook",extra_directories:[]},presentation:{label:"Presentation Structure",description:"Single talk or slide deck with minimal analysis scaffolding.",directories:{presentation_source:"presentation.qmd",rendered_slides:".",cache:"cache"},quarto:{render_dir:"."},notebook_template:"notebook",extra_directories:[]},course:{label:"Course Structure",description:"Courses with modules, assignments, and lecture materials.",directories:{data:"data",slides:"slides",assignments:"assignments",course_docs:"course_docs",readings:"readings",notebooks:"modules",cache:"cache"},quarto:{render_dir:"course_docs"},notebook_template:"notebook",extra_directories:[]}},a=Q(JSON.parse(JSON.stringify(l))),u={project:"project",project_sensitive:"sensitive-project",presentation:"presentation",course:"course"},c=Object.fromEntries(Object.entries(u).map(([I,T])=>[T,I])),d={project:"Tune the standard analysis layoutfunctions, notebooks, inputs, and outputs live here by default.",project_sensitive:"Private and public inputs stay separate so sensitive data never leaves restricted folders.",presentation:"Control where your presentation source lives and where rendered slides are written.",course:"Adjust the folders used for slides, assignments, readings, and course documentation."},f=I=>String(I).replace(/_/g," ").replace(/\b\w/g,T=>T.toUpperCase()),p=Q(null),g=[{key:"notebooks",label:"Notebooks",hint:"Quarto or R Markdown notebooks for analysis.",defaultRenderDir:"outputs/notebooks"},{key:"docs",label:"Documentation",hint:"Codebooks, documentation, and other reference materials.",defaultRenderDir:"outputs/docs"}],k=[{key:"functions",label:"Functions",hint:"R files here are sourced by scaffold(), so helper functions are available in every project session."},{key:"scripts",label:"Scripts",hint:"Reusable R scripts, job runners, or automation tasks."}],x=[...g,...k],m=[{key:"inputs_raw",label:"Raw data",hint:"Read-only exports from source systems."},{key:"inputs_intermediate",label:"Intermediate data",hint:"Data after light cleaning or pre-processing steps."},{key:"inputs_final",label:"Analysis-ready data",hint:"Final inputs ready for modeling or reporting."}],_=[{key:"outputs_tables",label:"Tables",hint:"Publishable tables ready for reports or manuscripts."},{key:"outputs_figures",label:"Figures",hint:"Final plots and graphics."},{key:"outputs_models",label:"Models",hint:"Serialized models or model summaries."},{key:"outputs_reports",label:"Reports",hint:"Final reports and deliverables ready for publication."}],R=[{key:"scratch",label:"Scratch",hint:"Short-lived explorations (gitignored)."}],U=[{privateKey:"inputs_private_raw",publicKey:"inputs_public_raw",label:"Raw data",privateLabel:"Raw data (private)",publicLabel:"Raw data (public)",hint:"Read-only exports from source systems."},{privateKey:"inputs_private_intermediate",publicKey:"inputs_public_intermediate",label:"Intermediate data",privateLabel:"Intermediate data (private)",publicLabel:"Intermediate data (public)",hint:"Data after light cleaning or pre-processing steps."},{privateKey:"inputs_private_final",publicKey:"inputs_public_final",label:"Analysis-ready data",privateLabel:"Analysis-ready data (private)",publicLabel:"Analysis-ready data (public)",hint:"Final inputs ready for modeling or reporting."}],N=[{privateKey:"outputs_private_tables",publicKey:"outputs_public_tables",label:"Tables",privateLabel:"Tables (private)",publicLabel:"Tables (public)",hint:"Publishable tables ready for reports or manuscripts."},{privateKey:"outputs_private_figures",publicKey:"outputs_public_figures",label:"Figures",privateLabel:"Figures (private)",publicLabel:"Figures (public)",hint:"Final plots and graphics."},{privateKey:"outputs_private_models",publicKey:"outputs_public_models",label:"Models",privateLabel:"Models (private)",publicLabel:"Models (public)",hint:"Serialized models or model summaries."},{privateKey:"outputs_private_reports",publicKey:"outputs_public_reports",label:"Reports",privateLabel:"Reports (private)",publicLabel:"Reports (public)",hint:"Final reports and deliverables ready for publication."}],A=(I,T)=>p.value?.project_types?.[I]?.directories?.[T]||{},w=(I,T)=>T.map(q=>{const he=A(I,q.key);return{key:q.key,label:he.label||q.label,hint:he.hint||q.hint||""}});z(()=>w("project",x)),z(()=>w("project",g).map(I=>({...I,defaultRenderDir:g.find(T=>T.key===I.key)?.defaultRenderDir||""}))),z(()=>w("project",k)),z(()=>w("project",m)),z(()=>w("project",_)),z(()=>w("project",R));const M=I=>I.map(T=>{const q=A("project_sensitive",T.privateKey),he=A("project_sensitive",T.publicKey);return{...T,privateLabel:q.label||T.privateLabel,publicLabel:he.label||T.publicLabel}});z(()=>M(U)),z(()=>M(N)),z(()=>{const I=ye.value;return!I||!p.value?.project_types?.[I]?.settings?[]:p.value.project_types[I].settings});const G={include_inputs:"data",include_scripts:"scripts",include_functions:"functions"},ue=z(()=>{const I=p.value?.project_types?.presentation?.optional_toggles||{};return{inputs:I.include_inputs?.default_path||G.include_inputs,scripts:I.include_scripts?.default_path||G.include_scripts,functions:I.include_functions?.default_path||G.include_functions}}),ie={"CLAUDE.md":"ai_claude","AGENTS.md":"ai_agents",".github/copilot-instructions.md":"ai_copilot"},F=Q($d),ae=Q(!1),ee=Q(new Set),V=Q({projects_root:"",project_types:JSON.parse(JSON.stringify(a.value)),author:{name:"",email:"",affiliation:""},defaults:{project_type:"project",notebook_format:"quarto",ide:"vscode",positron:!1,use_git:!0,use_renv:!1,seed:"123",seed_on_scaffold:!1,ai_support:!0,ai_assistants:["claude"],ai_canonical_file:"CLAUDE.md",scaffold:{source_all_functions:!0,set_theme_on_scaffold:!1,ggplot_theme:"theme_minimal",seed_on_scaffold:!1,seed:"123"},directories:JSON.parse(JSON.stringify(a.value.project.directories)),git_hooks:{ai_sync:!1,data_security:!1,check_sensitive_dirs:!1},packages:{use_renv:!1,default_packages:[{name:"dplyr",source:"cran",auto_attach:!1},{name:"ggplot2",source:"cran",auto_attach:!1},{name:"readr",source:"cran",auto_attach:!1}]},quarto:{html:{format:"html",embed_resources:!0,theme:"default",toc:!0,toc_depth:3,code_fold:!1,code_tools:!1,highlight_style:"github"},revealjs:{format:"revealjs",theme:"default",incremental:!1,slide_number:!0,transition:"slide",background_transition:"fade",controls:!0,progress:!0,center:!0,highlight_style:"github"}},env:{raw:""}},git:{user_name:"",user_email:""},privacy:{secret_scan:!1,gitignore_template:"gitignore"}}),J=gs({includeInputs:!1,includeScripts:!1,includeFunctions:!1}),X=gs({project:{},project_sensitive:{},course:{},presentation:{}}),de=I=>(X[I]||(X[I]={}),X[I]),Ce=Q(!1),Te=gs({claude:!0,agents:!1,copilot:!1}),$e=Q(""),me=Q({}),qe=Q("grouped"),rt=Q(!1),pt=Q({}),ot=Q(!1),le=z(()=>Object.keys(me.value||{}).length),te=z({get(){return Wr(V.value.defaults.packages)},set(I){V.value.defaults.packages=I||{use_renv:!1,default_packages:[]}}}),W=I=>p.value?.project_types?.[I]?.label||I,E=z(()=>{const I=V.value.projects_root||"",T=V.value.author?.name||"",q=V.value.defaults?.project_type||"project",he=W(q),Fe=V.value.defaults?.notebook_format||"quarto",ge=V.value.ai_config?.enabled||!1,Oe=V.value.ai_config?.provider||"",Ge=V.value.ai_config?.canonical_file||"",Rt=V.value.git?.auto_init||!1,Wn=te.value?.default_packages?.length||0,Po=le.value;return[{id:"basics",title:"Basics",section:"basics",content:`${I}  ${T}`},{id:"structure",title:"Project Structure",section:"structure",content:he},{id:"notebooks",title:"Notebooks & Scripts",section:"scaffold",content:Fe},{id:"packages",title:"Packages",section:"packages",content:Wn===0?"No default packages":`${Wn} packages`},{id:"env",title:".env Defaults",section:"env-defaults",content:`${Po} variables`},{id:"ai",title:"AI Assistants",section:"ai",content:ge?`${Oe}  ${Ge}`:"Disabled"},{id:"git",title:"Git & Hooks",section:"git",content:Rt?"Auto-initialize repositories":"Manual initialization"}]}),re=Q([]),D=Q([]),$=Q(null),K=Q(null);je(re,I=>{const T=$.value,q=I.some(he=>he.name===T);if(I.length===1){const he=I[0];he?.name&&he.name!=="framework_db"&&($.value=he.name)}else T&&!q&&($.value=null)},{deep:!0}),je(D,I=>{const T=K.value,q=I.some(he=>he.name===T);if(I.length===1){const he=I[0];he?.name&&(K.value=he.name)}else T&&!q&&(K.value=null)},{deep:!0});const oe=gs({open:!1,projectTypeKey:null,projectTypeName:""}),ne=gs({notebook:{loading:!1,contents:""},script:{loading:!1,contents:""},presentation:{loading:!1,contents:""},canonical:{loading:!1,contents:""},gitignore_project:{loading:!1,contents:""},gitignore_project_sensitive:{loading:!1,contents:""},gitignore_course:{loading:!1,contents:""},gitignore_presentation:{loading:!1,contents:""}}),se=[{syntax:"{{author}}",description:"Author name"},{syntax:"{{email}}",description:"Author email"},{syntax:"{{affiliation}}",description:"Author affiliation"},{syntax:"{{github_username}}",description:"GitHub username"},{syntax:"{{github_email}}",description:"GitHub email"}],xe=z(()=>[{key:"notebook",label:"Notebook",description:"Starter Quarto notebook used when creating notebooks.",editorKey:"notebook",apiName:"notebook",language:"markdown",hasVariables:!0},{key:"script",label:"Script",description:"Starter R script used for new scripts.",editorKey:"script",apiName:"script",language:"r",hasVariables:!1},{key:"presentation",label:"Presentation",description:"Starter presentation content for revealjs slides.",editorKey:"presentation",apiName:"presentation",language:"markdown",hasVariables:!0}]),L=Q(s.params.subsection||"notebook"),j=z(()=>xe.value.find(I=>I.key===L.value)||xe.value[0]),B=async I=>{L.value=I||"notebook",await ct("templates",L.value)},pe=async I=>{I&&typeof I.preventDefault=="function"&&I.preventDefault();const T=j.value;if(!T||!window.confirm("Reset this template to the default packaged version?"))return;const he=T.editorKey,Fe=T.apiName;await ps(Fe,he)},ve=z({get(){const I=V.value.defaults||{};return{enabled:I.ai_support!==!1,canonical_file:I.ai_canonical_file||"CLAUDE.md",assistants:Array.isArray(I.ai_assistants)?[...I.ai_assistants]:[],canonical_content:ne.canonical?.contents||""}},set(I){if(!I)return;const T=V.value.defaults||{};T.ai_support=I.enabled,T.ai_canonical_file=I.canonical_file,T.ai_assistants=Array.isArray(I.assistants)?[...I.assistants]:[],I.canonical_content!==void 0&&ne.canonical&&(ne.canonical.contents=I.canonical_content),V.value.defaults={...T}}}),Ae=z(()=>Object.entries(V.value.project_types||{})),Me=z(()=>Ae.value.map(([I,T])=>({key:I,label:(T.label||f(I)).replace(/ Structure$/i,""),slug:u[I]||I}))),ze=[{id:"templates-notebook",label:"Notebook",slug:"notebook"},{id:"templates-script",label:"Script",slug:"script"},{id:"templates-presentation",label:"Presentation",slug:"presentation"}],Xe=z(()=>"# Connections section temporarily disabled for debugging"),ye=z(()=>{const I=s.params.subsection;return I?c[I]||Pv:null}),vt=z(()=>{const I=ye.value;return I&&V.value.project_types?.[I]||null}),Lt={overview:{title:"Overview",description:"Overview of your Framework global settings and preferences."},"connections-defaults":{title:"Connections",description:"Database and storage connections that every new project will inherit."},basics:{title:"Basics",description:"Essential settings for new projects."},author:{title:"Author Information",description:"Defaults that populate README files and notebook headers when scaffold() runs."},workflow:{title:"Editor & Workflow",description:"Control how Framework scaffolds projects in your preferred tools."},structure:{title:"Project Structure Defaults",description:"Choose a project type to configure its directory structure and default settings."},templates:{title:"Templates",description:"Edit the starter templates Framework uses for notebooks, scripts, and presentations."},ai:{title:"AI Assistants",description:"Manage assistant support, canonical context files, and sync hooks."},git:{title:"Git & Hooks",description:"Configure repository initialization, commit identity, git hooks, and security scanning."},scaffold:{title:"Scaffold Behavior",description:"Automatic actions Framework performs when scaffold() runs."},packages:{title:"Packages & Dependencies",description:"Define dependency defaults and auto-attach behavior for new projects."},"env-defaults":{title:".env Defaults",description:"Template applied to every new project so core connections work immediately."}},$t=z(()=>Lt[F.value]||{title:pF,description:mF}),Gt=z(()=>F.value==="structure"&&vt.value?vt.value.label||f(ye.value):$t.value.title),St=z(()=>F.value==="structure"&&vt.value&&(vt.value.description||d[ye.value])||$t.value.description);z(()=>V.value.privacy.gitignore_template||"gitignore"),z(()=>{const I=new Set,T=V.value.project_types||{},q=T.project_sensitive?.directories||{};for(const Fe of Object.values(q))typeof Fe=="string"&&Fe.trim()&&Fe.includes("private")&&I.add(Fe.replace(/^\/+/,""));const he=T.project?.directories||{};return["cache","scratch"].forEach(Fe=>{const ge=he[Fe];typeof ge=="string"&&ge.trim()&&I.add(ge.replace(/^\/+/,""))}),Array.from(I).sort()});const on=z(()=>ie[V.value.defaults.ai_canonical_file]||"ai_claude"),Ct=(I,T)=>{const q={section:I||void 0};return T&&(q.subsection=T),t.resolve({name:"settings",params:q}).href},ct=(I,T)=>{const q={};I&&(q.section=I),T&&(q.subsection=T);const he=s.params.section||void 0,Fe=s.params.subsection||void 0,ge=q.section||void 0,Oe=q.subsection||void 0;return he===ge&&Fe===Oe?Promise.resolve():t.replace({name:"settings",params:q}).catch(()=>{})};je(()=>s.params.section,I=>{if(!I){ct(r[$d],void 0);return}const T=o[I]||$d;if(F.value=T,!o[I]){ct(r[T],void 0);return}},{immediate:!0});const tt=(I,T="")=>Array.isArray(I)?I.length>0?tt(I[0],T):T:I??T,st=(I,T=!1)=>{const q=tt(I,T);return typeof q=="boolean"?q:typeof q=="string"?["true","1","yes"].includes(q.toLowerCase()):!!q},Nt=I=>Array.isArray(I)?I.flatMap(T=>Array.isArray(T)?T:[T]).filter(Boolean):[],As=(I={},T={})=>{const q={...T};for(const[he,Fe]of Object.entries(I||{})){const ge=tt(Fe,null);ge===null||ge===""?delete q[he]:q[he]=ge}return q},Pr=(I,T)=>{const q=a.value[I]||{render_dirs:{},quarto:{},extra_directories:[]};return{label:tt(T?.label,q.label||f(I)),description:tt(T?.description,q.description||""),ggplot_theme:tt(T?.ggplot_theme,"theme_minimal"),set_theme_on_scaffold:st(T?.set_theme_on_scaffold,!1),directories:As(T?.directories,{}),render_dirs:As(T?.render_dirs,q.render_dirs||{}),quarto:{render_dir:tt(T?.quarto?.render_dir,q.quarto?.render_dir||".")},notebook_template:tt(T?.notebook_template,q.notebook_template||"notebook"),extra_directories:Array.isArray(T?.extra_directories)?T.extra_directories:q.extra_directories||[],gitignore:tt(T?.gitignore,q.gitignore||"")}},pi=I=>{if(!I||!I.project_types)return;console.log("[DEBUG] hydrateDefaultsFromCatalog - catalogData.project_types:",I.project_types),console.log("[DEBUG] project gitignore from catalog:",I.project_types.project?.gitignore?.substring(0,100));const T={};for(const[q,he]of Object.entries(I.project_types)){const Fe=l[q]||{},ge=Yx(he,{},Fe.directories||{},Fe.render_dirs||{}),{directories:Oe,render_dirs:Ge}=ge;T[q]={label:tt(he.label,Fe.label||f(q)),description:tt(he.description,Fe.description||""),directories:Oe,render_dirs:Ge,quarto:{render_dir:tt(he.quarto?.render_dir?.default,Fe.quarto?.render_dir||".")},notebook_template:tt(he.notebook_template?.default,Fe.notebook_template||"notebook"),optional_toggles:he.optional_toggles||{},gitignore:tt(he.gitignore,Fe.gitignore||"")},console.log(`[DEBUG] Normalized ${q} - gitignore length:`,T[q].gitignore?.length)}for(const[q,he]of Object.entries(l))T[q]||(T[q]=JSON.parse(JSON.stringify(he)));a.value=T},hs=(I,T,q)=>{if(!V.value.project_types?.presentation)return;const he=V.value.project_types.presentation.directories||(V.value.project_types.presentation.directories={});T?(!he[I]||he[I]==="")&&(he[I]=q):Object.prototype.hasOwnProperty.call(he,I)&&delete he[I]},tn=async(I,T=I)=>{if(ne[T]){ne[T].loading=!0;try{const q=await fetch(`/api/templates/${I}`);if(!q.ok)throw new Error("Request failed");const he=await q.json();ne[T].contents=he.contents||""}catch{e.error("Template Error","Unable to load template contents.")}finally{ne[T].loading=!1}}},ps=async(I,T=I)=>{if(ne[T])try{if(!(await fetch(`/api/templates/${I}`,{method:"DELETE"})).ok)throw new Error("Request failed");await tn(I,T),e.success("Template Reset","Restored the packaged default template.")}catch{e.error("Reset Failed","Unable to restore the default template.")}};je(Te,I=>{if(Ce.value){console.log("[watch:aiAssistants] Skipped - loading");return}console.log("[watch:aiAssistants] Triggered",I);const T=[];I.claude&&T.push("claude"),I.copilot&&T.push("copilot"),I.agents&&T.push("agents"),V.value.defaults.ai_assistants=T},{deep:!0}),je(()=>V.value.defaults.ai_canonical_file,async()=>{Ce.value||await tn(on.value,"canonical")}),je(()=>V.value.defaults.git_hooks.data_security,I=>{Ce.value||V.value.privacy.secret_scan!==I&&(V.value.privacy.secret_scan=I)}),je(()=>V.value.privacy.secret_scan,I=>{Ce.value||V.value.defaults.git_hooks.data_security!==I&&(V.value.defaults.git_hooks.data_security=I)}),je(()=>J.includeInputs,I=>{Ce.value||hs("inputs",I,ue.value.inputs)}),je(()=>J.includeScripts,I=>{Ce.value||hs("scripts",I,ue.value.scripts)}),je(()=>J.includeFunctions,I=>{Ce.value||hs("functions",I,ue.value.functions)}),je(X,I=>{if(!Ce.value)for(const[T,q]of Object.entries(I)){if(!V.value.project_types?.[T])continue;const he=V.value.project_types[T].directories||{},Fe=V.value.project_types[T].render_dirs||{},ge=p.value?.project_types?.[T]?.directories||{},Oe=p.value?.project_types?.[T]?.render_dirs||{};for(const[Ge,Rt]of Object.entries(q))if(Rt===!1)Object.prototype.hasOwnProperty.call(he,Ge)&&delete V.value.project_types[T].directories[Ge],Object.prototype.hasOwnProperty.call(Fe,Ge)&&delete V.value.project_types[T].render_dirs[Ge];else if(Rt===!0){if(!Object.prototype.hasOwnProperty.call(he,Ge)){const Wn=ge[Ge]?.default||"";V.value.project_types[T].directories[Ge]=Wn}if(Oe[Ge]&&!Object.prototype.hasOwnProperty.call(Fe,Ge)){const Wn=Oe[Ge]?.default||"";Wn&&(V.value.project_types[T].render_dirs[Ge]=Wn)}}}},{deep:!0}),je(me,I=>{Ce.value||(pt.value=n_(I))},{deep:!0});const Hi=I=>{(I.metaKey||I.ctrlKey)&&I.key==="s"&&(I.preventDefault(),Kt())},mi=(I,T)=>{const q=V.value.project_types?.[I]?.directories;return!!q&&Object.prototype.hasOwnProperty.call(q,T)},Rr=I=>{a.value[I]&&(oe.projectTypeKey=I,oe.projectTypeName=V.value.project_types[I]?.label||f(I),oe.open=!0)},Mt=()=>{const I=oe.projectTypeKey;a.value[I]&&(V.value.project_types[I]=JSON.parse(JSON.stringify(a.value[I])),I==="presentation"&&(J.includeInputs=!1,J.includeScripts=!1,J.includeFunctions=!1),oe.open=!1,e.success("Reset Complete",`${oe.projectTypeName} has been reset to defaults`))},Or=async(I,{title:T,description:q})=>{templateModal.open=!0,templateModal.loading=!0,templateModal.name=I,templateModal.title=T,templateModal.description=q;try{const Fe=await(await fetch(`/api/templates/${I}`)).json();templateModal.contents=Fe.contents||""}catch{e.error("Template Error","Unable to load template contents.")}finally{templateModal.loading=!1}},gi=()=>{const I=ie[V.value.defaults.ai_canonical_file]||"ai_claude";Or(I,{title:`Edit ${V.value.defaults.ai_canonical_file}`,description:"This file is treated as canonical; other assistant files are synced to it."})},Xn=I=>{const T=document.getElementById(I);T&&T.scrollIntoView({behavior:"smooth",block:"start"})},Wi=I=>{switch(I){case"project":return`project-${I}-inputs`;case"project_sensitive":return`project-${I}-workspaces`;case"presentation":return`project-${I}-primary`;case"course":return`project-${I}-core`;default:return`project-${I}`}},vi=I=>!(F.value!==I||I==="structure"&&ye.value||I==="templates"),qi=async I=>{const T=i.find(he=>he.id===I);if(!T)return;const q=T.id==="structure"?void 0:T.id==="templates"?s.params.subsection||L.value||"notebook":void 0;await ct(T.slug,q),await ns(),Xn(T.id)},Gi=async I=>{const T=u[I]||u[Pv];await ct("project-structure",T),await ns(),Xn(Wi(I))};je(()=>ye.value,(I,T)=>{F.value==="structure"&&(!I||I===T||ns(()=>Xn(Wi(I))))}),je(()=>s.params.subsection,async I=>{if(s.params.section!=="templates")return;const T=I||"notebook";L.value!==T&&(L.value=T),await ns(),Xn("templates")});const Lr=async()=>{try{console.log("[loadSettings] Starting load, setting isLoadingSettings = true"),Ce.value=!0;const[I,T]=await Promise.all([fetch("/api/settings/catalog"),fetch("/api/settings/get")]);if(!I.ok)throw new Error("Failed to load settings catalog");if(!T.ok)throw new Error("Failed to load settings payload");console.log("[loadSettings] Responses received, parsing JSON");const q=await I.json();p.value=q,pi(q);const he=await T.json();console.log("[loadSettings] Settings data:",he),console.log("[loadSettings] data.global:",he.global),console.log("[loadSettings] data.global?.projects_root:",he.global?.projects_root);const Fe=tt(he.global?.projects_root||he.projects_root,"");if(console.log("[loadSettings] Setting projects_root to:",Fe),V.value.projects_root=Fe,he.project_types){const ge={},Oe={...a.value,...he.project_types};for(const[Ge,Rt]of Object.entries(Oe))ge[Ge]=Pr(Ge,Rt);V.value.project_types=ge;for(const Ge of Object.keys(V.value.project_types))V.value.project_types[Ge].render_dirs||(V.value.project_types[Ge].render_dirs={})}J.includeInputs=mi("presentation","inputs"),J.includeScripts=mi("presentation","scripts"),J.includeFunctions=mi("presentation","functions");for(const ge of["project","project_sensitive","course","presentation"]){const Oe=V.value.project_types?.[ge]?.directories||{},Ge=q?.project_types?.[ge]?.directories||{},Rt=de(ge),Wn=V.value.project_types?.[ge]?.directories_enabled||{};for(const Jt of Object.keys(Ge)){const aa=Ge[Jt];if(Jt in Wn)Rt[Jt]=Wn[Jt];else{const ua=aa.enabled_by_default??Object.prototype.hasOwnProperty.call(Oe,Jt);Rt[Jt]=ua}}for(const Jt of Object.keys(Oe))Object.prototype.hasOwnProperty.call(Ge,Jt)||(Rt[Jt]=!0);(V.value.project_types?.[ge]?.extra_directories||[]).forEach(Jt=>{Jt.key&&(V.value.project_types[ge].directories_enabled&&V.value.project_types[ge].directories_enabled[Jt.key]===!1?Rt[Jt.key]=!1:Rt[Jt.key]=!0)})}if(he.author&&(V.value.author={name:tt(he.author.name,""),email:tt(he.author.email,""),affiliation:tt(he.author.affiliation,"")}),he.defaults){const ge=he.defaults;V.value.defaults.project_type=tt(ge.project_type,"project"),V.value.defaults.notebook_format=tt(ge.notebook_format,"quarto"),V.value.defaults.ide=tt(ge.ide,"vscode"),V.value.defaults.positron=st(ge.positron,!1),V.value.defaults.use_git=st(ge.use_git,!0),V.value.defaults.use_renv=st(ge.use_renv,!1),V.value.defaults.ai_support=st(ge.ai_support,!0),V.value.defaults.ai_canonical_file=tt(ge.ai_canonical_file,"CLAUDE.md");const Oe=Nt(ge.ai_assistants);Oe.length&&(V.value.defaults.ai_assistants=Oe,Te.claude=Oe.includes("claude"),Te.copilot=Oe.includes("copilot"),Te.agents=Oe.includes("agents")),ge.git_hooks&&(V.value.defaults.git_hooks={...V.value.defaults.git_hooks,...Object.fromEntries(Object.entries(ge.git_hooks).map(([Ge,Rt])=>[Ge,st(Rt,V.value.defaults.git_hooks[Ge])]))},V.value.privacy.secret_scan=V.value.defaults.git_hooks.data_security),ge.scaffold&&(V.value.defaults.scaffold={source_all_functions:st(ge.scaffold.source_all_functions,!0),set_theme_on_scaffold:st(ge.scaffold.set_theme_on_scaffold,!1),ggplot_theme:tt(ge.scaffold.ggplot_theme,"theme_minimal"),seed_on_scaffold:st(ge.scaffold.seed_on_scaffold,!1),seed:tt(ge.scaffold.seed,"123")}),ge.packages&&ge.packages.default_packages?.length?V.value.defaults.packages=Wr(ge.packages):q?.defaults?.packages&&(V.value.defaults.packages=Wr(q.defaults.packages)),ge.quarto&&(V.value.defaults.quarto={html:{format:"html",embed_resources:st(ge.quarto.html?.embed_resources,!0),theme:tt(ge.quarto.html?.theme,"default"),toc:st(ge.quarto.html?.toc,!0),toc_depth:parseInt(ge.quarto.html?.toc_depth)||3,code_fold:st(ge.quarto.html?.code_fold,!1),code_tools:st(ge.quarto.html?.code_tools,!1),highlight_style:tt(ge.quarto.html?.highlight_style,"github")},revealjs:{format:"revealjs",theme:tt(ge.quarto.revealjs?.theme,"default"),incremental:st(ge.quarto.revealjs?.incremental,!1),slide_number:st(ge.quarto.revealjs?.slide_number,!0),transition:tt(ge.quarto.revealjs?.transition,"slide"),background_transition:tt(ge.quarto.revealjs?.background_transition,"fade"),controls:st(ge.quarto.revealjs?.controls,!0),progress:st(ge.quarto.revealjs?.progress,!0),center:st(ge.quarto.revealjs?.center,!0),highlight_style:tt(ge.quarto.revealjs?.highlight_style,"github")}}),ge.directories?V.value.defaults.directories={...V.value.defaults.directories,...Object.fromEntries(Object.entries(ge.directories).map(([Ge,Rt])=>[Ge,tt(Rt,V.value.defaults.directories[Ge]||"")]))}:V.value.project_types.project&&(V.value.defaults.directories={...V.value.defaults.directories,...V.value.project_types.project.directories}),Ki(ge.env),la(ge.connections)}he.defaults||(Ki(null),la(null),q?.defaults?.packages&&(V.value.defaults.packages=Wr(q.defaults.packages))),he.git&&(V.value.git={user_name:tt(he.git.user_name,""),user_email:tt(he.git.user_email,"")}),he.privacy?(V.value.privacy.secret_scan=st(he.privacy.secret_scan,V.value.defaults.git_hooks.data_security),V.value.privacy.gitignore_template=tt(he.privacy.gitignore_template,"gitignore")):V.value.privacy.secret_scan=V.value.defaults.git_hooks.data_security,await tn(on.value,"canonical"),console.log("[loadSettings] Load complete, about to set isLoadingSettings = false")}catch(I){console.error("[loadSettings] Error during load:",I),e.error("Load Failed","Unable to load current settings.")}finally{Ce.value=!1,console.log("[loadSettings] isLoadingSettings now false")}},ra=z({get(){const I=V.value.defaults||{},T=V.value.git||{},q=V.value.author||{};return Fp({useGit:I.use_git,gitHooks:I.git_hooks,git:T,author:q})},set(I){if(Ce.value){console.log("[gitPanelModel setter] Blocked during load");return}V.value.defaults.git_hooks=V.value.defaults.git_hooks||{},V.value.git=V.value.git||{},V.value.author=V.value.author||{},Up({gitTarget:V.value.git,gitHooksTarget:V.value.defaults.git_hooks,setUseGit:T=>{V.value.defaults.use_git=T},authorTarget:V.value.author},I)}}),oa=z({get(){const I=V.value.defaults?.scaffold||{};return{source_all_functions:I.source_all_functions!==!1,set_theme_on_scaffold:I.set_theme_on_scaffold===!0,ggplot_theme:I.ggplot_theme||"theme_minimal",seed_on_scaffold:I.seed_on_scaffold||!1,seed:I.seed||"123"}},set(I){if(Ce.value){console.log("[scaffoldPanelModel setter] Blocked during load");return}V.value.defaults.scaffold={...V.value.defaults.scaffold||{},source_all_functions:I.source_all_functions,set_theme_on_scaffold:I.set_theme_on_scaffold,ggplot_theme:I.ggplot_theme,seed_on_scaffold:I.seed_on_scaffold,seed:I.seed}}}),Es=(I,T)=>{const q=V.value.project_types[I];return!q||!Array.isArray(q.extra_directories)?[]:q.extra_directories.filter(he=>he.type===T&&!ee.value.has(he._id))},jn=(I,T)=>{const q=V.value.project_types[I];return!q||!Array.isArray(q.extra_directories)?[]:q.extra_directories.filter(he=>he.type===T&&ee.value.has(he._id))},ms=(I,T,q)=>{const he=V.value.project_types[I];if(!he)return;Array.isArray(he.extra_directories)||(he.extra_directories=[]);const Fe=he.extra_directories.filter(Oe=>Oe&&Oe.type!==T),ge=q.map(Oe=>({...Oe,type:T}));he.extra_directories=[...Fe,...ge]};z({get(){return jn(ye.value,"input_private")},set(I){if(!V.value.project_types[ye.value])return;jn(ye.value,"input_private").filter(Oe=>!I.some(Ge=>Ge._id===Oe._id)).forEach(Oe=>{Oe._id&&ee.value.delete(Oe._id)});const ge=[...Es(ye.value,"input_private"),...I];ms(ye.value,"input_private",ge),I.forEach(Oe=>{Oe._id&&!ee.value.has(Oe._id)&&ee.value.add(Oe._id)})}}),z({get(){return jn(ye.value,"input_public")},set(I){if(!V.value.project_types[ye.value])return;jn(ye.value,"input_public").filter(Oe=>!I.some(Ge=>Ge._id===Oe._id)).forEach(Oe=>{Oe._id&&ee.value.delete(Oe._id)});const ge=[...Es(ye.value,"input_public"),...I];ms(ye.value,"input_public",ge),I.forEach(Oe=>{Oe._id&&!ee.value.has(Oe._id)&&ee.value.add(Oe._id)})}}),z({get(){return jn(ye.value,"output_private")},set(I){if(!V.value.project_types[ye.value])return;const he=[...Es(ye.value,"output_private"),...I];ms(ye.value,"output_private",he),I.forEach(Fe=>{Fe._id&&!ee.value.has(Fe._id)&&ee.value.add(Fe._id)})}}),z({get(){return jn(ye.value,"output_public")},set(I){if(!V.value.project_types[ye.value])return;const he=[...Es(ye.value,"output_public"),...I];ms(ye.value,"output_public",he),I.forEach(Fe=>{Fe._id&&!ee.value.has(Fe._id)&&ee.value.add(Fe._id)})}}),z({get(){return jn(ye.value,"workspace")},set(I){if(!V.value.project_types[ye.value])return;jn(ye.value,"workspace").filter(Oe=>!I.some(Ge=>Ge._id===Oe._id)).forEach(Oe=>{Oe._id&&ee.value.delete(Oe._id)});const ge=[...Es(ye.value,"workspace"),...I];ms(ye.value,"workspace",ge),I.forEach(Oe=>{Oe._id&&!ee.value.has(Oe._id)&&ee.value.add(Oe._id)})}}),z({get(){return jn(ye.value,"input")},set(I){if(!V.value.project_types[ye.value])return;jn(ye.value,"input").filter(Oe=>!I.some(Ge=>Ge._id===Oe._id)).forEach(Oe=>{Oe._id&&ee.value.delete(Oe._id)});const ge=[...Es(ye.value,"input"),...I];ms(ye.value,"input",ge),I.forEach(Oe=>{Oe._id&&!ee.value.has(Oe._id)&&ee.value.add(Oe._id)})}}),z({get(){return jn(ye.value,"output")},set(I){if(!V.value.project_types[ye.value])return;jn(ye.value,"output").filter(Oe=>!I.some(Ge=>Ge._id===Oe._id)).forEach(Oe=>{Oe._id&&ee.value.delete(Oe._id)});const ge=[...Es(ye.value,"output"),...I];ms(ye.value,"output",ge),I.forEach(Oe=>{Oe._id&&!ee.value.has(Oe._id)&&ee.value.add(Oe._id)})}});const Ki=I=>{const T=g9(I,t_);$e.value=T.rawContent,me.value=T.variables,pt.value=T.groups,qe.value=T.viewMode},la=I=>{const T=zp(I||{});re.value=T.databaseConnections,D.value=T.s3Connections,$.value=T.defaultDatabase,K.value=T.defaultStorageBucket},Kt=async()=>{try{ae.value=!0;const I=V.value.projects_root?.trim()||"";console.log("[saveSettings] settings.value.projects_root:",V.value.projects_root),console.log("[saveSettings] normalizedRoot:",I);const T=JSON.parse(JSON.stringify(V.value));T.global||(T.global={}),T.global.projects_root=I||null,delete T.projects_root,console.log("[saveSettings] payload.global.projects_root:",T.global.projects_root),T.defaults.scaffold&&(T.defaults.scaffold.seed=T.defaults.scaffold.seed??""),T.defaults.seed=T.defaults.seed??"",T.defaults.packages=t$(V.value.defaults.packages),T.defaults.env={raw:$e.value||""},T.defaults.connections=Hp({databaseConnections:re.value,s3Connections:D.value,defaultDatabase:$.value,defaultStorageBucket:K.value}),T.defaults.directories=T.project_types?.project?.directories||T.defaults.directories,T.defaults.git_hooks.data_security=T.privacy.secret_scan,T.git=T.git||{user_name:"",user_email:""};for(const ge in T.project_types){const Oe=p.value?.project_types?.[ge]?.directories||{},Ge=X[ge]||T.project_types[ge].directories_enabled||{},Rt=Xx({catalogDirs:Oe,directories:T.project_types[ge].directories||{},render_dirs:T.project_types[ge].render_dirs||{},enabled:Ge,extra_directories:T.project_types[ge].extra_directories||[]});T.project_types[ge].directories=Rt.directories,T.project_types[ge].render_dirs=Rt.render_dirs,T.project_types[ge].directories_enabled=Rt.enabled,T.project_types[ge].extra_directories=Rt.extra_directories}const q=await fetch("/api/settings/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(T)});if(!q.ok){const ge=await q.text();throw new Error("Failed to save settings")}const he=await q.json();if((await Promise.all([fetch("/api/templates/notebook",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:ne.notebook.contents})}),fetch("/api/templates/script",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:ne.script.contents})}),fetch("/api/templates/presentation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:ne.presentation.contents})}),fetch("/api/templates/gitignore-project",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:ne.gitignore_project.contents})}),fetch("/api/templates/gitignore-project_sensitive",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:ne.gitignore_project_sensitive.contents})}),fetch("/api/templates/gitignore-course",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:ne.gitignore_course.contents})}),fetch("/api/templates/gitignore-presentation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:ne.gitignore_presentation.contents})}),fetch(`/api/templates/${on.value}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:ne.canonical.contents})})])).some(ge=>!ge.ok))throw new Error("Template save failed");ee.value.clear(),console.log("[saveSettings] Before loadSettings, projects_root was:",V.value.projects_root),await Lr(),console.log("[saveSettings] After loadSettings, projects_root is:",V.value.projects_root),e.success("Settings Saved","Your global defaults were updated.")}catch(I){console.error("Failed to save settings:",I),e.error("Save Failed",I?.message||"Review your changes and try again.")}finally{ae.value=!1}};return Cn(()=>{Lr(),tn("notebook"),tn("script"),tn("presentation"),tn("gitignore-project","gitignore_project"),tn("gitignore-project_sensitive","gitignore_project_sensitive"),tn("gitignore-course","gitignore_course"),tn("gitignore-presentation","gitignore_presentation"),tn(on.value,"canonical"),s.params.section==="templates"&&!s.params.subsection&&ct("templates",L.value||"notebook"),window.addEventListener("keydown",Hi)}),xo(()=>{window.removeEventListener("keydown",Hi)}),(I,T)=>(v(),b("div",v9,[h("nav",y9,[T[34]||(T[34]=h("h2",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"New Project Defaults",-1)),h("div",b9,[(v(),b(be,null,Ve(i,q=>h("div",{key:q.id},[q.id==="basics"?(v(),we(Xu,{key:0},{default:Z(()=>[...T[31]||(T[31]=[ce("Settings",-1)])]),_:1})):H("",!0),h("a",{href:Ct(q.slug),onClick:Tt(he=>qi(q.id),["prevent"]),class:Se(["flex items-center gap-2 px-3 py-2 rounded-md text-sm transition",vi(q.id)?"bg-sky-50 text-sky-700 font-medium dark:bg-sky-900/20 dark:text-sky-400":"text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-800"])},[q.icon?(v(),we(Un(q.icon),{key:0,class:"h-4 w-4"})):q.svgIcon?(v(),b("svg",{key:1,class:"h-4 w-4",fill:q.svgFill??"none",viewBox:q.svgViewBox??"0 0 24 24",stroke:q.svgStroke??"currentColor"},[h("path",{"stroke-linecap":q.svgStrokeLinecap??"round","stroke-linejoin":q.svgStrokeLinejoin??"round","stroke-width":q.svgStrokeWidth??2,fill:q.svgPathFill??"none",d:q.svgIcon},null,8,_9)],8,x9)):H("",!0),ce(" "+Y(q.label),1)],10,k9),q.id==="structure"&&F.value==="structure"?(v(),b("div",w9,[(v(!0),b(be,null,Ve(Me.value,he=>(v(),b("a",{key:he.key,href:Ct("project-structure",he.slug),onClick:Tt(Fe=>Gi(he.key),["prevent"]),class:Se(["block rounded-md py-1 pl-4 pr-2 text-xs font-medium transition",ye.value===he.key?"bg-sky-100 text-sky-700 dark:bg-sky-900/30 dark:text-sky-300":"text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-800"])},Y(he.label),11,S9))),128))])):q.id==="templates"&&F.value==="templates"?(v(),b("div",C9,[(v(),b(be,null,Ve(ze,he=>h("a",{key:he.id,href:Ct("templates",he.slug),onClick:Tt(Fe=>B(he.slug),["prevent"]),class:Se(["block rounded-md py-1 pl-4 pr-2 text-xs font-medium transition",L.value===he.slug?"bg-sky-100 text-sky-700 dark:bg-sky-900/30 dark:text-sky-300":"text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-800"])},Y(he.label),11,A9)),64))])):H("",!0)])),64)),S(kr,{modelValue:ot.value,"onUpdate:modelValue":T[1]||(T[1]=q=>ot.value=q),title:".env Variables Preview"},{default:Z(()=>[T[33]||(T[33]=h("p",{class:"mb-3 text-sm text-gray-600 dark:text-gray-400"},[ce(" Copy these entries into your projects "),h("code",null,".env"),ce(" file so the connections above resolve properly. ")],-1)),h("pre",E9,Y(Xe.value),1),h("div",T9,[S(Ye,{variant:"primary",onClick:T[0]||(T[0]=q=>ot.value=!1)},{default:Z(()=>[...T[32]||(T[32]=[ce("Close",-1)])]),_:1})])]),_:1},8,["modelValue"])]),h("div",D9,[S(Ye,{variant:"primary",size:"md",disabled:ae.value,onClick:Kt,class:"w-full"},{default:Z(()=>[ce(Y(ae.value?"Saving":"Save Changes"),1)]),_:1},8,["disabled"])])]),Ce.value?(v(),b("div",P9,[...T[35]||(T[35]=[h("div",{class:"text-center"},[h("div",{class:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-sky-600 border-r-transparent"}),h("p",{class:"mt-4 text-sm text-gray-600 dark:text-gray-400"},"Loading settings...")],-1)])])):H("",!0),He(h("div",R9,[S(Ao,{title:Gt.value,description:St.value},null,8,["title","description"]),h("div",O9,[He(h("div",L9,[S(Rp,{cards:E.value,onNavigate:qi},null,8,["cards"])],512),[[nt,F.value==="overview"]]),He(h("div",M9,[T[36]||(T[36]=_o('<div class="mb-6 rounded-lg border border-sky-200 bg-sky-50 p-4 dark:border-sky-800 dark:bg-sky-900/20"><h4 class="text-sm font-semibold text-sky-900 dark:text-sky-100 mb-2">Connection values</h4><p class="text-sm text-sky-800 dark:text-sky-200 mb-2"> Use <code class="px-1 py-0.5 bg-sky-100 dark:bg-sky-800 rounded text-xs">env(&quot;VAR_NAME&quot;, &quot;default&quot;)</code> to read from your project&#39;s <code class="px-1 py-0.5 bg-sky-100 dark:bg-sky-800 rounded text-xs">.env</code> file. This keeps credentials out of version control while letting each machine use its own values. </p><p class="text-sm text-sky-800 dark:text-sky-200"> You can also type values directly (e.g. <code class="px-1 py-0.5 bg-sky-100 dark:bg-sky-800 rounded text-xs">localhost</code> or <code class="px-1 py-0.5 bg-sky-100 dark:bg-sky-800 rounded text-xs">5432</code>) if you don&#39;t need environment variable substitution. </p></div>',1)),S(Vp,{"database-connections":re.value,"onUpdate:databaseConnections":T[2]||(T[2]=q=>re.value=q),"s3-connections":D.value,"onUpdate:s3Connections":T[3]||(T[3]=q=>D.value=q),"default-database":$.value,"onUpdate:defaultDatabase":T[4]||(T[4]=q=>$.value=q),"default-storage-bucket":K.value,"onUpdate:defaultStorageBucket":T[5]||(T[5]=q=>K.value=q)},null,8,["database-connections","s3-connections","default-database","default-storage-bucket"])],512),[[nt,F.value==="connections-defaults"]]),He(h("div",I9,[S(gn,{flush:""},{default:Z(()=>[T[37]||(T[37]=h("div",{class:"mb-6 rounded-lg border border-sky-200 bg-sky-50 p-4 dark:border-sky-800 dark:bg-sky-900/20"},[h("h4",{class:"text-sm font-semibold text-sky-900 dark:text-sky-100 mb-2"},"How .env files work"),h("p",{class:"text-sm text-sky-800 dark:text-sky-200 mb-2"},[ce(" Environment variables let you keep sensitive data (passwords, API keys) separate from your code. Instead of hardcoding "),h("code",{class:"px-1 py-0.5 bg-sky-100 dark:bg-sky-800 rounded text-xs"},'password = "secret123"'),ce(", your code reads from a variable: "),h("code",{class:"px-1 py-0.5 bg-sky-100 dark:bg-sky-800 rounded text-xs"},'Sys.getenv("POSTGRES_PASSWORD")')]),h("p",{class:"text-sm text-sky-800 dark:text-sky-200"},[ce(" The "),h("code",{class:"px-1 py-0.5 bg-sky-100 dark:bg-sky-800 rounded text-xs"},".env"),ce(" file is gitignored by default, so your secrets stay on your machine while your code can be shared safely. ")])],-1)),S(Bp,{groups:pt.value,variables:me.value,"onUpdate:variables":T[6]||(T[6]=q=>me.value=q),"raw-content":$e.value,"onUpdate:rawContent":T[7]||(T[7]=q=>$e.value=q),"view-mode":qe.value,"onUpdate:viewMode":T[8]||(T[8]=q=>qe.value=q),"regroup-on-save":rt.value,"onUpdate:regroupOnSave":T[9]||(T[9]=q=>rt.value=q),"show-save-button":!1,"allow-show-values-toggle":!0},null,8,["groups","variables","raw-content","view-mode","regroup-on-save"]),h("div",j9,[S(Ye,{variant:"primary",onClick:Kt,disabled:ae.value},{default:Z(()=>[ce(Y(ae.value?"Saving":"Save Changes"),1)]),_:1},8,["disabled"])])]),_:1})],512),[[nt,F.value==="env-defaults"]]),He(h("div",V9,[S(gn,null,{default:Z(()=>[S(hh,null,{default:Z(()=>[h("div",$9,[S(Ee,{modelValue:V.value.projects_root,"onUpdate:modelValue":T[10]||(T[10]=q=>V.value.projects_root=q),label:"Default Projects Directory",hint:"New projects will be created in this directory by default",placeholder:"e.g., ~/projects or /Users/yourname/code"},null,8,["modelValue"]),S(h9,{positron:V.value.defaults.positron,"onUpdate:positron":T[11]||(T[11]=q=>V.value.defaults.positron=q),"notebook-format":V.value.defaults.notebook_format,"onUpdate:notebookFormat":T[12]||(T[12]=q=>V.value.defaults.notebook_format=q)},null,8,["positron","notebook-format"]),h("div",N9,[S(Op,{modelValue:V.value.author,"onUpdate:modelValue":T[13]||(T[13]=q=>V.value.author=q)},null,8,["modelValue"])])])]),_:1})]),_:1})],512),[[nt,F.value==="basics"]]),He(h("div",B9,[ye.value?vt.value&&p.value?(v(),b("div",G9,[S(Np,{"project-type":ye.value,directories:V.value.project_types[ye.value].directories,"onUpdate:directories":T[14]||(T[14]=q=>V.value.project_types[ye.value].directories=q),"render-dirs":V.value.project_types[ye.value].render_dirs,"onUpdate:renderDirs":T[15]||(T[15]=q=>V.value.project_types[ye.value].render_dirs=q),enabled:X[ye.value],"onUpdate:enabled":T[16]||(T[16]=q=>X[ye.value]=q),"extra-directories":V.value.project_types[ye.value].extra_directories,"onUpdate:extraDirectories":T[17]||(T[17]=q=>V.value.project_types[ye.value].extra_directories=q),settings:V.value.project_types[ye.value],"onUpdate:settings":T[18]||(T[18]=q=>V.value.project_types[ye.value]=q),gitignore:V.value.project_types[ye.value].gitignore,"onUpdate:gitignore":T[19]||(T[19]=q=>V.value.project_types[ye.value].gitignore=q),catalog:p.value.project_types[ye.value]||{},"new-extra-ids":ee.value,"onUpdate:newExtraIds":T[20]||(T[20]=q=>ee.value=q),onReset:T[21]||(T[21]=q=>Rr(ye.value))},null,8,["project-type","directories","render-dirs","enabled","extra-directories","settings","gitignore","catalog","new-extra-ids"])])):H("",!0):(v(),b("div",F9,[h("div",U9,[(v(!0),b(be,null,Ve(Me.value,q=>(v(),b("button",{key:q.key,onClick:he=>Gi(q.key),class:"group relative w-full rounded-lg border border-gray-200 p-6 text-left transition hover:border-sky-300 dark:border-gray-700 dark:hover:border-sky-600"},[h("div",H9,[S(Ke(kl),{class:"h-6 w-6 flex-shrink-0 text-gray-400 transition group-hover:text-sky-600 dark:group-hover:text-sky-400"}),h("div",null,[h("h3",W9,Y(q.label),1),h("p",q9,Y(V.value.project_types[q.key]?.description||""),1)])])],8,z9))),128))])]))],512),[[nt,F.value==="structure"]]),He(h("div",K9,[S(gn,null,{default:Z(()=>[S(Ip,{modelValue:ra.value,"onUpdate:modelValue":T[22]||(T[22]=q=>ra.value=q),flush:""},{note:Z(()=>[...T[38]||(T[38]=[ce(" Project-specific .gitignore templates can be customized in ",-1),h("a",{href:"#/settings/project-defaults",class:"text-sky-600 dark:text-sky-400 hover:underline"},"Project Defaults",-1),ce(". ",-1)])]),_:1},8,["modelValue"])]),_:1})],512),[[nt,F.value==="git"]]),He(h("div",J9,[S(gn,null,{default:Z(()=>[T[39]||(T[39]=h("div",null,[h("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Scaffold Behavior"),h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"},[ce(" Automatic actions when "),h("code",{class:"px-1.5 py-0.5 bg-gray-200 dark:bg-gray-700 rounded text-xs"},"scaffold()"),ce(" runs to initialize your project environment. ")])],-1)),S(jp,{modelValue:oa.value,"onUpdate:modelValue":T[23]||(T[23]=q=>oa.value=q),flush:""},null,8,["modelValue"])]),_:1})],512),[[nt,F.value==="scaffold"]]),He(h("div",Q9,[S(Lp,{modelValue:te.value,"onUpdate:modelValue":T[24]||(T[24]=q=>te.value=q),"show-renv-toggle":!0},null,8,["modelValue"])],512),[[nt,F.value==="packages"]]),He(h("div",Y9,[S(gn,{flush:""},{default:Z(()=>[S($p,{modelValue:V.value.defaults.quarto,"onUpdate:modelValue":T[25]||(T[25]=q=>V.value.defaults.quarto=q)},null,8,["modelValue"])]),_:1})],512),[[nt,F.value==="quarto"]]),He(h("div",X9,[S(gn,null,{default:Z(()=>[T[41]||(T[41]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Manage assistant support, canonical context files, and sync hooks for all new projects. ",-1)),S(Mp,{modelValue:ve.value,"onUpdate:modelValue":T[26]||(T[26]=q=>ve.value=q),flush:!0,"show-editor":!0,"editor-height":"420px"},{"editor-actions":Z(()=>[h("div",Z9,[S(Ye,{size:"sm",variant:"secondary",onClick:gi},{default:Z(()=>[...T[40]||(T[40]=[ce(" Open canonical file ",-1)])]),_:1})])]),_:1},8,["modelValue"])]),_:1})],512),[[nt,F.value==="ai"]]),He(h("div",eF,[S(gn,{flush:""},{default:Z(()=>[h("div",tF,[(v(!0),b(be,null,Ve(xe.value,q=>(v(),b("button",{key:q.key,type:"button",onClick:he=>B(q.key),class:Se(["px-3 py-1.5 rounded-full text-sm font-medium border transition",L.value===q.key?"bg-sky-100 text-sky-700 border-sky-300 dark:bg-sky-900/30 dark:text-sky-200 dark:border-sky-700":"text-gray-700 border-gray-200 hover:border-sky-300 hover:text-sky-700 dark:text-gray-300 dark:border-gray-700 dark:hover:text-sky-200"])},Y(q.label),11,nF))),128))]),h("div",sF,[h("div",iF,[h("div",rF,[h("h4",oF,Y(j.value.label)+" Template ",1),h("p",lF,Y(j.value.description),1),T[42]||(T[42]=h("p",{class:"text-xs text-gray-500 dark:text-gray-500"},' Edits save with the main "Save Changes" button. ',-1))]),S(Ye,{size:"sm",variant:"secondary",disabled:ne[j.value.editorKey].loading,onClick:T[27]||(T[27]=q=>pe(q))},{default:Z(()=>[...T[43]||(T[43]=[ce(" Reset to default ",-1)])]),_:1},8,["disabled"])]),j.value.hasVariables?(v(),b("div",aF,[T[44]||(T[44]=h("h5",{class:"text-xs font-semibold text-sky-800 dark:text-sky-300 mb-2"},"Available Variables",-1)),h("table",uF,[h("tbody",null,[(v(),b(be,null,Ve(se,q=>h("tr",{key:q.syntax},[h("td",cF,Y(q.syntax),1),h("td",dF,Y(q.description),1)])),64))])])])):H("",!0),S(Lc,{modelValue:ne[j.value.editorKey].contents,"onUpdate:modelValue":T[28]||(T[28]=q=>ne[j.value.editorKey].contents=q),language:j.value.language,"auto-grow":""},null,8,["modelValue","language"])])]),_:1})],512),[[nt,F.value==="templates"]])])],512),[[nt,!Ce.value]]),S(kr,{modelValue:oe.open,"onUpdate:modelValue":T[30]||(T[30]=q=>oe.open=q),size:"md",title:"Reset to Defaults",icon:"warning"},{default:Z(()=>[h("p",fF,[T[45]||(T[45]=ce(" Are you sure you want to reset ",-1)),h("strong",null,Y(oe.projectTypeName),1),T[46]||(T[46]=ce(" to default settings? This will discard all your customizations for this project type. ",-1))])]),actions:Z(()=>[h("div",hF,[S(Ye,{variant:"secondary",onClick:T[29]||(T[29]=q=>oe.open=!1)},{default:Z(()=>[...T[47]||(T[47]=[ce("Cancel",-1)])]),_:1}),S(Ye,{variant:"primary",onClick:Mt},{default:Z(()=>[...T[48]||(T[48]=[ce(" Reset to Defaults ",-1)])]),_:1})])]),_:1},8,["modelValue"])]))}},vF={class:"mx-auto max-w-5xl p-10"},yF={__name:"ProjectPackagesView",setup(n){return Q([]),Cn(async()=>{}),(e,t)=>(v(),b("div",vF,[S(Ao,{title:"Packages",description:"Manage R packages for this project."}),t[0]||(t[0]=_o('<div class="mt-10 rounded-2xl border border-zinc-200 bg-white p-8 shadow-sm dark:border-zinc-800 dark:bg-zinc-900"><div class="flex items-center gap-3 border-b border-zinc-100 pb-6 dark:border-zinc-800"><div class="flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-sky-500 to-sky-600 shadow-lg shadow-sky-500/20"><svg class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg></div><h3 class="text-xl font-bold text-zinc-900 dark:text-white">Package Configuration</h3></div><div class="mt-8"><p class="text-sm text-zinc-600 dark:text-zinc-400"> Package management interface coming soon. This page will allow you to: </p><ul class="mt-4 space-y-2 text-sm text-zinc-600 dark:text-zinc-400"><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Add and remove project packages </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Specify package versions </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Toggle renv integration </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Install and update packages </li></ul></div></div>',1))]))}},bF={class:"mx-auto max-w-5xl p-10"},kF={__name:"ProjectDataView",setup(n){return Q([]),Cn(async()=>{}),(e,t)=>(v(),b("div",bF,[S(Ao,{title:"Data",description:"Manage data catalog and sources for this project."}),t[0]||(t[0]=_o('<div class="mt-10 rounded-2xl border border-zinc-200 bg-white p-8 shadow-sm dark:border-zinc-800 dark:bg-zinc-900"><div class="flex items-center gap-3 border-b border-zinc-100 pb-6 dark:border-zinc-800"><div class="flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-sky-500 to-sky-600 shadow-lg shadow-sky-500/20"><svg class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"></path></svg></div><h3 class="text-xl font-bold text-zinc-900 dark:text-white">Data Catalog</h3></div><div class="mt-8"><p class="text-sm text-zinc-600 dark:text-zinc-400"> Data catalog management interface coming soon. This page will allow you to: </p><ul class="mt-4 space-y-2 text-sm text-zinc-600 dark:text-zinc-400"><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Define data sources in the catalog </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Specify data formats (CSV, RDS, etc.) </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Configure encryption settings </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Track data integrity via digests </li></ul></div></div>',1))]))}},xF={class:"mx-auto max-w-5xl p-10"},_F={__name:"ProjectConnectionsView",setup(n){return Q([]),Cn(async()=>{}),(e,t)=>(v(),b("div",xF,[S(Ao,{title:"Connections",description:"Manage database connections for this project."}),t[0]||(t[0]=_o('<div class="mt-10 rounded-2xl border border-zinc-200 bg-white p-8 shadow-sm dark:border-zinc-800 dark:bg-zinc-900"><div class="flex items-center gap-3 border-b border-zinc-100 pb-6 dark:border-zinc-800"><div class="flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-sky-500 to-sky-600 shadow-lg shadow-sky-500/20"><svg class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg></div><h3 class="text-xl font-bold text-zinc-900 dark:text-white">Database Connections</h3></div><div class="mt-8"><p class="text-sm text-zinc-600 dark:text-zinc-400"> Connection management interface coming soon. This page will allow you to: </p><ul class="mt-4 space-y-2 text-sm text-zinc-600 dark:text-zinc-400"><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Configure database connections (SQLite, PostgreSQL) </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Store connection credentials securely </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Test database connectivity </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Manage connection pooling settings </li></ul></div></div>',1))]))}},wF=[{path:"/",redirect:"/projects"},{path:"/docs",redirect:"/docs/category/1"},{path:"/docs/category/:categoryId",name:"docs-category",component:BT,props:!0},{path:"/projects",name:"projects",component:OD},{path:"/projects/new",name:"project-create",component:k$},{path:"/project/:id",name:"project-detail",component:d9,props:!0},{path:"/settings/:section?/:subsection?",name:"settings",component:gF,props:!0},{path:"/project/packages",name:"project-packages",component:yF},{path:"/project/data",name:"project-data",component:kF},{path:"/project/connections",name:"project-connections",component:_F}],SF=kC({history:XS(),routes:wF});cS(v4).use(SF).mount("#app");
