(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function $d(s){const e=Object.create(null);for(const t of s.split(","))e[t]=1;return t=>t in e}const kt={},dr=[],kn=()=>{},cm=()=>!1,Wa=s=>s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&(s.charCodeAt(2)>122||s.charCodeAt(2)<97),Rd=s=>s.startsWith("onUpdate:"),Ut=Object.assign,Ld=(s,e)=>{const t=s.indexOf(e);t>-1&&s.splice(t,1)},x1=Object.prototype.hasOwnProperty,ut=(s,e)=>x1.call(s,e),Be=Array.isArray,fr=s=>sl(s)==="[object Map]",Rr=s=>sl(s)==="[object Set]",bh=s=>sl(s)==="[object Date]",Ke=s=>typeof s=="function",Et=s=>typeof s=="string",Xs=s=>typeof s=="symbol",pt=s=>s!==null&&typeof s=="object",dm=s=>(pt(s)||Ke(s))&&Ke(s.then)&&Ke(s.catch),fm=Object.prototype.toString,sl=s=>fm.call(s),w1=s=>sl(s).slice(8,-1),hm=s=>sl(s)==="[object Object]",Vd=s=>Et(s)&&s!=="NaN"&&s[0]!=="-"&&""+parseInt(s,10)===s,fo=$d(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ka=s=>{const e=Object.create(null);return(t=>e[t]||(e[t]=s(t)))},S1=/-\w/g,Ws=Ka(s=>s.replace(S1,e=>e.slice(1).toUpperCase())),C1=/\B([A-Z])/g,Ki=Ka(s=>s.replace(C1,"-$1").toLowerCase()),Ga=Ka(s=>s.charAt(0).toUpperCase()+s.slice(1)),Eu=Ka(s=>s?`on${Ga(s)}`:""),ri=(s,e)=>!Object.is(s,e),ea=(s,...e)=>{for(let t=0;t<s.length;t++)s[t](...e)},pm=(s,e,t,n=!1)=>{Object.defineProperty(s,e,{configurable:!0,enumerable:!1,writable:n,value:t})},pa=s=>{const e=parseFloat(s);return isNaN(e)?s:e},_1=s=>{const e=Et(s)?Number(s):NaN;return isNaN(e)?s:e};let kh;const Ja=()=>kh||(kh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function hr(s){if(Be(s)){const e={};for(let t=0;t<s.length;t++){const n=s[t],i=Et(n)?E1(n):hr(n);if(i)for(const r in i)e[r]=i[r]}return e}else if(Et(s)||pt(s))return s}const A1=/;(?![^(]*\))/g,M1=/:([^]+)/,D1=/\/\*[^]*?\*\//g;function E1(s){const e={};return s.replace(D1,"").split(A1).forEach(t=>{if(t){const n=t.split(M1);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function xe(s){let e="";if(Et(s))e=s;else if(Be(s))for(let t=0;t<s.length;t++){const n=xe(s[t]);n&&(e+=n+" ")}else if(pt(s))for(const t in s)s[t]&&(e+=t+" ");return e.trim()}const T1="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",j1=$d(T1);function gm(s){return!!s||s===""}function O1(s,e){if(s.length!==e.length)return!1;let t=!0;for(let n=0;t&&n<s.length;n++)t=Bi(s[n],e[n]);return t}function Bi(s,e){if(s===e)return!0;let t=bh(s),n=bh(e);if(t||n)return t&&n?s.getTime()===e.getTime():!1;if(t=Xs(s),n=Xs(e),t||n)return s===e;if(t=Be(s),n=Be(e),t||n)return t&&n?O1(s,e):!1;if(t=pt(s),n=pt(e),t||n){if(!t||!n)return!1;const i=Object.keys(s).length,r=Object.keys(e).length;if(i!==r)return!1;for(const o in s){const l=s.hasOwnProperty(o),a=e.hasOwnProperty(o);if(l&&!a||!l&&a||!Bi(s[o],e[o]))return!1}}return String(s)===String(e)}function Bd(s,e){return s.findIndex(t=>Bi(t,e))}const mm=s=>!!(s&&s.__v_isRef===!0),J=s=>Et(s)?s:s==null?"":Be(s)||pt(s)&&(s.toString===fm||!Ke(s.toString))?mm(s)?J(s.value):JSON.stringify(s,vm,2):String(s),vm=(s,e)=>mm(e)?vm(s,e.value):fr(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[n,i],r)=>(t[Tu(n,r)+" =>"]=i,t),{})}:Rr(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>Tu(t))}:Xs(e)?Tu(e):pt(e)&&!Be(e)&&!hm(e)?String(e):e,Tu=(s,e="")=>{var t;return Xs(s)?`Symbol(${(t=s.description)!=null?t:e})`:s};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ws;class P1{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ws,!e&&ws&&(this.index=(ws.scopes||(ws.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=ws;try{return ws=this,e()}finally{ws=t}}}on(){++this._on===1&&(this.prevScope=ws,ws=this)}off(){this._on>0&&--this._on===0&&(ws=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let t,n;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(this.effects.length=0,t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function $1(){return ws}let xt;const ju=new WeakSet;class ym{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ws&&ws.active&&ws.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,ju.has(this)&&(ju.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||km(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,xh(this),xm(this);const e=xt,t=Ys;xt=this,Ys=!0;try{return this.fn()}finally{wm(this),xt=e,Ys=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Fd(e);this.deps=this.depsTail=void 0,xh(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?ju.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){yc(this)&&this.run()}get dirty(){return yc(this)}}let bm=0,ho,po;function km(s,e=!1){if(s.flags|=8,e){s.next=po,po=s;return}s.next=ho,ho=s}function Id(){bm++}function Nd(){if(--bm>0)return;if(po){let e=po;for(po=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let s;for(;ho;){let e=ho;for(ho=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){s||(s=n)}e=t}}if(s)throw s}function xm(s){for(let e=s.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function wm(s){let e,t=s.depsTail,n=t;for(;n;){const i=n.prevDep;n.version===-1?(n===t&&(t=i),Fd(n),R1(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=i}s.deps=e,s.depsTail=t}function yc(s){for(let e=s.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Sm(e.dep.computed)||e.dep.version!==e.version))return!0;return!!s._dirty}function Sm(s){if(s.flags&4&&!(s.flags&16)||(s.flags&=-17,s.globalVersion===Do)||(s.globalVersion=Do,!s.isSSR&&s.flags&128&&(!s.deps&&!s._dirty||!yc(s))))return;s.flags|=2;const e=s.dep,t=xt,n=Ys;xt=s,Ys=!0;try{xm(s);const i=s.fn(s._value);(e.version===0||ri(i,s._value))&&(s.flags|=128,s._value=i,e.version++)}catch(i){throw e.version++,i}finally{xt=t,Ys=n,wm(s),s.flags&=-3}}function Fd(s,e=!1){const{dep:t,prevSub:n,nextSub:i}=s;if(n&&(n.nextSub=i,s.prevSub=void 0),i&&(i.prevSub=n,s.nextSub=void 0),t.subs===s&&(t.subs=n,!n&&t.computed)){t.computed.flags&=-5;for(let r=t.computed.deps;r;r=r.nextDep)Fd(r,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function R1(s){const{prevDep:e,nextDep:t}=s;e&&(e.nextDep=t,s.prevDep=void 0),t&&(t.prevDep=e,s.nextDep=void 0)}let Ys=!0;const Cm=[];function Vn(){Cm.push(Ys),Ys=!1}function Bn(){const s=Cm.pop();Ys=s===void 0?!0:s}function xh(s){const{cleanup:e}=s;if(s.cleanup=void 0,e){const t=xt;xt=void 0;try{e()}finally{xt=t}}}let Do=0;class L1{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class zd{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!xt||!Ys||xt===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==xt)t=this.activeLink=new L1(xt,this),xt.deps?(t.prevDep=xt.depsTail,xt.depsTail.nextDep=t,xt.depsTail=t):xt.deps=xt.depsTail=t,_m(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const n=t.nextDep;n.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=n),t.prevDep=xt.depsTail,t.nextDep=void 0,xt.depsTail.nextDep=t,xt.depsTail=t,xt.deps===t&&(xt.deps=n)}return t}trigger(e){this.version++,Do++,this.notify(e)}notify(e){Id();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{Nd()}}}function _m(s){if(s.dep.sc++,s.sub.flags&4){const e=s.dep.computed;if(e&&!s.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)_m(n)}const t=s.dep.subs;t!==s&&(s.prevSub=t,t&&(t.nextSub=s)),s.dep.subs=s}}const bc=new WeakMap,Ri=Symbol(""),kc=Symbol(""),Eo=Symbol("");function ss(s,e,t){if(Ys&&xt){let n=bc.get(s);n||bc.set(s,n=new Map);let i=n.get(t);i||(n.set(t,i=new zd),i.map=n,i.key=t),i.track()}}function jn(s,e,t,n,i,r){const o=bc.get(s);if(!o){Do++;return}const l=a=>{a&&a.trigger()};if(Id(),e==="clear")o.forEach(l);else{const a=Be(s),c=a&&Vd(t);if(a&&t==="length"){const u=Number(n);o.forEach((d,h)=>{(h==="length"||h===Eo||!Xs(h)&&h>=u)&&l(d)})}else switch((t!==void 0||o.has(void 0))&&l(o.get(t)),c&&l(o.get(Eo)),e){case"add":a?c&&l(o.get("length")):(l(o.get(Ri)),fr(s)&&l(o.get(kc)));break;case"delete":a||(l(o.get(Ri)),fr(s)&&l(o.get(kc)));break;case"set":fr(s)&&l(o.get(Ri));break}}Nd()}function tr(s){const e=lt(s);return e===s?e:(ss(e,"iterate",Eo),Fs(s)?e:e.map(Wt))}function Qa(s){return ss(s=lt(s),"iterate",Eo),s}const V1={__proto__:null,[Symbol.iterator](){return Ou(this,Symbol.iterator,Wt)},concat(...s){return tr(this).concat(...s.map(e=>Be(e)?tr(e):e))},entries(){return Ou(this,"entries",s=>(s[1]=Wt(s[1]),s))},every(s,e){return _n(this,"every",s,e,void 0,arguments)},filter(s,e){return _n(this,"filter",s,e,t=>t.map(Wt),arguments)},find(s,e){return _n(this,"find",s,e,Wt,arguments)},findIndex(s,e){return _n(this,"findIndex",s,e,void 0,arguments)},findLast(s,e){return _n(this,"findLast",s,e,Wt,arguments)},findLastIndex(s,e){return _n(this,"findLastIndex",s,e,void 0,arguments)},forEach(s,e){return _n(this,"forEach",s,e,void 0,arguments)},includes(...s){return Pu(this,"includes",s)},indexOf(...s){return Pu(this,"indexOf",s)},join(s){return tr(this).join(s)},lastIndexOf(...s){return Pu(this,"lastIndexOf",s)},map(s,e){return _n(this,"map",s,e,void 0,arguments)},pop(){return Qr(this,"pop")},push(...s){return Qr(this,"push",s)},reduce(s,...e){return wh(this,"reduce",s,e)},reduceRight(s,...e){return wh(this,"reduceRight",s,e)},shift(){return Qr(this,"shift")},some(s,e){return _n(this,"some",s,e,void 0,arguments)},splice(...s){return Qr(this,"splice",s)},toReversed(){return tr(this).toReversed()},toSorted(s){return tr(this).toSorted(s)},toSpliced(...s){return tr(this).toSpliced(...s)},unshift(...s){return Qr(this,"unshift",s)},values(){return Ou(this,"values",Wt)}};function Ou(s,e,t){const n=Qa(s),i=n[e]();return n!==s&&!Fs(s)&&(i._next=i.next,i.next=()=>{const r=i._next();return r.done||(r.value=t(r.value)),r}),i}const B1=Array.prototype;function _n(s,e,t,n,i,r){const o=Qa(s),l=o!==s&&!Fs(s),a=o[e];if(a!==B1[e]){const d=a.apply(s,r);return l?Wt(d):d}let c=t;o!==s&&(l?c=function(d,h){return t.call(this,Wt(d),h,s)}:t.length>2&&(c=function(d,h){return t.call(this,d,h,s)}));const u=a.call(o,c,n);return l&&i?i(u):u}function wh(s,e,t,n){const i=Qa(s);let r=t;return i!==s&&(Fs(s)?t.length>3&&(r=function(o,l,a){return t.call(this,o,l,a,s)}):r=function(o,l,a){return t.call(this,o,Wt(l),a,s)}),i[e](r,...n)}function Pu(s,e,t){const n=lt(s);ss(n,"iterate",Eo);const i=n[e](...t);return(i===-1||i===!1)&&qd(t[0])?(t[0]=lt(t[0]),n[e](...t)):i}function Qr(s,e,t=[]){Vn(),Id();const n=lt(s)[e].apply(s,t);return Nd(),Bn(),n}const I1=$d("__proto__,__v_isRef,__isVue"),Am=new Set(Object.getOwnPropertyNames(Symbol).filter(s=>s!=="arguments"&&s!=="caller").map(s=>Symbol[s]).filter(Xs));function N1(s){Xs(s)||(s=String(s));const e=lt(this);return ss(e,"has",s),e.hasOwnProperty(s)}class Mm{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,n){if(t==="__v_skip")return e.__v_skip;const i=this._isReadonly,r=this._isShallow;if(t==="__v_isReactive")return!i;if(t==="__v_isReadonly")return i;if(t==="__v_isShallow")return r;if(t==="__v_raw")return n===(i?r?Q1:jm:r?Tm:Em).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const o=Be(e);if(!i){let a;if(o&&(a=V1[t]))return a;if(t==="hasOwnProperty")return N1}const l=Reflect.get(e,t,ls(e)?e:n);if((Xs(t)?Am.has(t):I1(t))||(i||ss(e,"get",t),r))return l;if(ls(l)){const a=o&&Vd(t)?l:l.value;return i&&pt(a)?wc(a):a}return pt(l)?i?wc(l):Js(l):l}}class Dm extends Mm{constructor(e=!1){super(!1,e)}set(e,t,n,i){let r=e[t];if(!this._isShallow){const a=ai(r);if(!Fs(n)&&!ai(n)&&(r=lt(r),n=lt(n)),!Be(e)&&ls(r)&&!ls(n))return a||(r.value=n),!0}const o=Be(e)&&Vd(t)?Number(t)<e.length:ut(e,t),l=Reflect.set(e,t,n,ls(e)?e:i);return e===lt(i)&&(o?ri(n,r)&&jn(e,"set",t,n):jn(e,"add",t,n)),l}deleteProperty(e,t){const n=ut(e,t);e[t];const i=Reflect.deleteProperty(e,t);return i&&n&&jn(e,"delete",t,void 0),i}has(e,t){const n=Reflect.has(e,t);return(!Xs(t)||!Am.has(t))&&ss(e,"has",t),n}ownKeys(e){return ss(e,"iterate",Be(e)?"length":Ri),Reflect.ownKeys(e)}}class F1 extends Mm{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const z1=new Dm,U1=new F1,H1=new Dm(!0);const xc=s=>s,Cl=s=>Reflect.getPrototypeOf(s);function q1(s,e,t){return function(...n){const i=this.__v_raw,r=lt(i),o=fr(r),l=s==="entries"||s===Symbol.iterator&&o,a=s==="keys"&&o,c=i[s](...n),u=t?xc:e?ga:Wt;return!e&&ss(r,"iterate",a?kc:Ri),{next(){const{value:d,done:h}=c.next();return h?{value:d,done:h}:{value:l?[u(d[0]),u(d[1])]:u(d),done:h}},[Symbol.iterator](){return this}}}}function _l(s){return function(...e){return s==="delete"?!1:s==="clear"?void 0:this}}function W1(s,e){const t={get(i){const r=this.__v_raw,o=lt(r),l=lt(i);s||(ri(i,l)&&ss(o,"get",i),ss(o,"get",l));const{has:a}=Cl(o),c=e?xc:s?ga:Wt;if(a.call(o,i))return c(r.get(i));if(a.call(o,l))return c(r.get(l));r!==o&&r.get(i)},get size(){const i=this.__v_raw;return!s&&ss(lt(i),"iterate",Ri),i.size},has(i){const r=this.__v_raw,o=lt(r),l=lt(i);return s||(ri(i,l)&&ss(o,"has",i),ss(o,"has",l)),i===l?r.has(i):r.has(i)||r.has(l)},forEach(i,r){const o=this,l=o.__v_raw,a=lt(l),c=e?xc:s?ga:Wt;return!s&&ss(a,"iterate",Ri),l.forEach((u,d)=>i.call(r,c(u),c(d),o))}};return Ut(t,s?{add:_l("add"),set:_l("set"),delete:_l("delete"),clear:_l("clear")}:{add(i){!e&&!Fs(i)&&!ai(i)&&(i=lt(i));const r=lt(this);return Cl(r).has.call(r,i)||(r.add(i),jn(r,"add",i,i)),this},set(i,r){!e&&!Fs(r)&&!ai(r)&&(r=lt(r));const o=lt(this),{has:l,get:a}=Cl(o);let c=l.call(o,i);c||(i=lt(i),c=l.call(o,i));const u=a.call(o,i);return o.set(i,r),c?ri(r,u)&&jn(o,"set",i,r):jn(o,"add",i,r),this},delete(i){const r=lt(this),{has:o,get:l}=Cl(r);let a=o.call(r,i);a||(i=lt(i),a=o.call(r,i)),l&&l.call(r,i);const c=r.delete(i);return a&&jn(r,"delete",i,void 0),c},clear(){const i=lt(this),r=i.size!==0,o=i.clear();return r&&jn(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=q1(i,s,e)}),t}function Ud(s,e){const t=W1(s,e);return(n,i,r)=>i==="__v_isReactive"?!s:i==="__v_isReadonly"?s:i==="__v_raw"?n:Reflect.get(ut(t,i)&&i in n?t:n,i,r)}const K1={get:Ud(!1,!1)},G1={get:Ud(!1,!0)},J1={get:Ud(!0,!1)};const Em=new WeakMap,Tm=new WeakMap,jm=new WeakMap,Q1=new WeakMap;function Y1(s){switch(s){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function X1(s){return s.__v_skip||!Object.isExtensible(s)?0:Y1(w1(s))}function Js(s){return ai(s)?s:Hd(s,!1,z1,K1,Em)}function Om(s){return Hd(s,!1,H1,G1,Tm)}function wc(s){return Hd(s,!0,U1,J1,jm)}function Hd(s,e,t,n,i){if(!pt(s)||s.__v_raw&&!(e&&s.__v_isReactive))return s;const r=X1(s);if(r===0)return s;const o=i.get(s);if(o)return o;const l=new Proxy(s,r===2?n:t);return i.set(s,l),l}function pr(s){return ai(s)?pr(s.__v_raw):!!(s&&s.__v_isReactive)}function ai(s){return!!(s&&s.__v_isReadonly)}function Fs(s){return!!(s&&s.__v_isShallow)}function qd(s){return s?!!s.__v_raw:!1}function lt(s){const e=s&&s.__v_raw;return e?lt(e):s}function Z1(s){return!ut(s,"__v_skip")&&Object.isExtensible(s)&&pm(s,"__v_skip",!0),s}const Wt=s=>pt(s)?Js(s):s,ga=s=>pt(s)?wc(s):s;function ls(s){return s?s.__v_isRef===!0:!1}function Y(s){return Pm(s,!1)}function ek(s){return Pm(s,!0)}function Pm(s,e){return ls(s)?s:new tk(s,e)}class tk{constructor(e,t){this.dep=new zd,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:lt(e),this._value=t?e:Wt(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,n=this.__v_isShallow||Fs(e)||ai(e);e=n?e:lt(e),ri(e,t)&&(this._rawValue=e,this._value=n?e:Wt(e),this.dep.trigger())}}function ct(s){return ls(s)?s.value:s}const sk={get:(s,e,t)=>e==="__v_raw"?s:ct(Reflect.get(s,e,t)),set:(s,e,t,n)=>{const i=s[e];return ls(i)&&!ls(t)?(i.value=t,!0):Reflect.set(s,e,t,n)}};function $m(s){return pr(s)?s:new Proxy(s,sk)}class nk{constructor(e,t,n){this.fn=e,this.setter=t,this._value=void 0,this.dep=new zd(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Do-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&xt!==this)return km(this,!0),!0}get value(){const e=this.dep.track();return Sm(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function ik(s,e,t=!1){let n,i;return Ke(s)?n=s:(n=s.get,i=s.set),new nk(n,i,t)}const Al={},ma=new WeakMap;let _i;function rk(s,e=!1,t=_i){if(t){let n=ma.get(t);n||ma.set(t,n=[]),n.push(s)}}function ok(s,e,t=kt){const{immediate:n,deep:i,once:r,scheduler:o,augmentJob:l,call:a}=t,c=U=>i?U:Fs(U)||i===!1||i===0?On(U,1):On(U);let u,d,h,p,y=!1,b=!1;if(ls(s)?(d=()=>s.value,y=Fs(s)):pr(s)?(d=()=>c(s),y=!0):Be(s)?(b=!0,y=s.some(U=>pr(U)||Fs(U)),d=()=>s.map(U=>{if(ls(U))return U.value;if(pr(U))return c(U);if(Ke(U))return a?a(U,2):U()})):Ke(s)?e?d=a?()=>a(s,2):s:d=()=>{if(h){Vn();try{h()}finally{Bn()}}const U=_i;_i=u;try{return a?a(s,3,[p]):s(p)}finally{_i=U}}:d=kn,e&&i){const U=d,I=i===!0?1/0:i;d=()=>On(U(),I)}const x=$1(),g=()=>{u.stop(),x&&x.active&&Ld(x.effects,u)};if(r&&e){const U=e;e=(...I)=>{U(...I),g()}}let j=b?new Array(s.length).fill(Al):Al;const B=U=>{if(!(!(u.flags&1)||!u.dirty&&!U))if(e){const I=u.run();if(i||y||(b?I.some((L,_)=>ri(L,j[_])):ri(I,j))){h&&h();const L=_i;_i=u;try{const _=[I,j===Al?void 0:b&&j[0]===Al?[]:j,p];j=I,a?a(e,3,_):e(..._)}finally{_i=L}}}else u.run()};return l&&l(B),u=new ym(d),u.scheduler=o?()=>o(B,!1):B,p=U=>rk(U,!1,u),h=u.onStop=()=>{const U=ma.get(u);if(U){if(a)a(U,4);else for(const I of U)I();ma.delete(u)}},e?n?B(!0):j=u.run():o?o(B.bind(null,!0),!0):u.run(),g.pause=u.pause.bind(u),g.resume=u.resume.bind(u),g.stop=g,g}function On(s,e=1/0,t){if(e<=0||!pt(s)||s.__v_skip||(t=t||new Map,(t.get(s)||0)>=e))return s;if(t.set(s,e),e--,ls(s))On(s.value,e,t);else if(Be(s))for(let n=0;n<s.length;n++)On(s[n],e,t);else if(Rr(s)||fr(s))s.forEach(n=>{On(n,e,t)});else if(hm(s)){for(const n in s)On(s[n],e,t);for(const n of Object.getOwnPropertySymbols(s))Object.prototype.propertyIsEnumerable.call(s,n)&&On(s[n],e,t)}return s}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function nl(s,e,t,n){try{return n?s(...n):s()}catch(i){Ya(i,e,t)}}function Zs(s,e,t,n){if(Ke(s)){const i=nl(s,e,t,n);return i&&dm(i)&&i.catch(r=>{Ya(r,e,t)}),i}if(Be(s)){const i=[];for(let r=0;r<s.length;r++)i.push(Zs(s[r],e,t,n));return i}}function Ya(s,e,t,n=!0){const i=e?e.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||kt;if(e){let l=e.parent;const a=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${t}`;for(;l;){const u=l.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](s,a,c)===!1)return}l=l.parent}if(r){Vn(),nl(r,null,10,[s,a,c]),Bn();return}}lk(s,t,i,n,o)}function lk(s,e,t,n=!0,i=!1){if(i)throw s;console.error(s)}const ms=[];let hn=-1;const gr=[];let Jn=null,sr=0;const Rm=Promise.resolve();let va=null;function Bs(s){const e=va||Rm;return s?e.then(this?s.bind(this):s):e}function ak(s){let e=hn+1,t=ms.length;for(;e<t;){const n=e+t>>>1,i=ms[n],r=To(i);r<s||r===s&&i.flags&2?e=n+1:t=n}return e}function Wd(s){if(!(s.flags&1)){const e=To(s),t=ms[ms.length-1];!t||!(s.flags&2)&&e>=To(t)?ms.push(s):ms.splice(ak(e),0,s),s.flags|=1,Lm()}}function Lm(){va||(va=Rm.then(Bm))}function uk(s){Be(s)?gr.push(...s):Jn&&s.id===-1?Jn.splice(sr+1,0,s):s.flags&1||(gr.push(s),s.flags|=1),Lm()}function Sh(s,e,t=hn+1){for(;t<ms.length;t++){const n=ms[t];if(n&&n.flags&2){if(s&&n.id!==s.uid)continue;ms.splice(t,1),t--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function Vm(s){if(gr.length){const e=[...new Set(gr)].sort((t,n)=>To(t)-To(n));if(gr.length=0,Jn){Jn.push(...e);return}for(Jn=e,sr=0;sr<Jn.length;sr++){const t=Jn[sr];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}Jn=null,sr=0}}const To=s=>s.id==null?s.flags&2?-1:1/0:s.id;function Bm(s){try{for(hn=0;hn<ms.length;hn++){const e=ms[hn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),nl(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;hn<ms.length;hn++){const e=ms[hn];e&&(e.flags&=-2)}hn=-1,ms.length=0,Vm(),va=null,(ms.length||gr.length)&&Bm()}}let Jt=null,Im=null;function ya(s){const e=Jt;return Jt=s,Im=s&&s.type.__scopeId||null,e}function X(s,e=Jt,t){if(!e||s._n)return s;const n=(...i)=>{n._d&&xa(-1);const r=ya(e);let o;try{o=s(...i)}finally{ya(r),n._d&&xa(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function qe(s,e){if(Jt===null)return s;const t=su(Jt),n=s.dirs||(s.dirs=[]);for(let i=0;i<e.length;i++){let[r,o,l,a=kt]=e[i];r&&(Ke(r)&&(r={mounted:r,updated:r}),r.deep&&On(o),n.push({dir:r,instance:t,value:o,oldValue:void 0,arg:l,modifiers:a}))}return s}function ki(s,e,t,n){const i=s.dirs,r=e&&e.dirs;for(let o=0;o<i.length;o++){const l=i[o];r&&(l.oldValue=r[o].value);let a=l.dir[n];a&&(Vn(),Zs(a,t,8,[s.el,l,s,e]),Bn())}}const Nm=Symbol("_vte"),Fm=s=>s.__isTeleport,go=s=>s&&(s.disabled||s.disabled===""),Ch=s=>s&&(s.defer||s.defer===""),_h=s=>typeof SVGElement<"u"&&s instanceof SVGElement,Ah=s=>typeof MathMLElement=="function"&&s instanceof MathMLElement,Sc=(s,e)=>{const t=s&&s.to;return Et(t)?e?e(t):null:t},zm={name:"Teleport",__isTeleport:!0,process(s,e,t,n,i,r,o,l,a,c){const{mc:u,pc:d,pbc:h,o:{insert:p,querySelector:y,createText:b,createComment:x}}=c,g=go(e.props);let{shapeFlag:j,children:B,dynamicChildren:U}=e;if(s==null){const I=e.el=b(""),L=e.anchor=b("");p(I,t,n),p(L,t,n);const _=(W,ce)=>{j&16&&u(B,W,ce,i,r,o,l,a)},R=()=>{const W=e.target=Sc(e.props,y),ce=Hm(W,e,b,p);W&&(o!=="svg"&&_h(W)?o="svg":o!=="mathml"&&Ah(W)&&(o="mathml"),i&&i.isCE&&(i.ce._teleportTargets||(i.ce._teleportTargets=new Set)).add(W),g||(_(W,ce),ta(e,!1)))};g&&(_(t,L),ta(e,!0)),Ch(e.props)?(e.el.__isMounted=!1,hs(()=>{R(),delete e.el.__isMounted},r)):R()}else{if(Ch(e.props)&&s.el.__isMounted===!1){hs(()=>{zm.process(s,e,t,n,i,r,o,l,a,c)},r);return}e.el=s.el,e.targetStart=s.targetStart;const I=e.anchor=s.anchor,L=e.target=s.target,_=e.targetAnchor=s.targetAnchor,R=go(s.props),W=R?t:L,ce=R?I:_;if(o==="svg"||_h(L)?o="svg":(o==="mathml"||Ah(L))&&(o="mathml"),U?(h(s.dynamicChildren,U,W,i,r,o,l),Jd(s,e,!0)):a||d(s,e,W,ce,i,r,o,l,!1),g)R?e.props&&s.props&&e.props.to!==s.props.to&&(e.props.to=s.props.to):Ml(e,t,I,c,1);else if((e.props&&e.props.to)!==(s.props&&s.props.to)){const ne=e.target=Sc(e.props,y);ne&&Ml(e,ne,null,c,0)}else R&&Ml(e,L,_,c,1);ta(e,g)}},remove(s,e,t,{um:n,o:{remove:i}},r){const{shapeFlag:o,children:l,anchor:a,targetStart:c,targetAnchor:u,target:d,props:h}=s;if(d&&(i(c),i(u)),r&&i(a),o&16){const p=r||!go(h);for(let y=0;y<l.length;y++){const b=l[y];n(b,e,t,p,!!b.dynamicChildren)}}},move:Ml,hydrate:ck};function Ml(s,e,t,{o:{insert:n},m:i},r=2){r===0&&n(s.targetAnchor,e,t);const{el:o,anchor:l,shapeFlag:a,children:c,props:u}=s,d=r===2;if(d&&n(o,e,t),(!d||go(u))&&a&16)for(let h=0;h<c.length;h++)i(c[h],e,t,2);d&&n(l,e,t)}function ck(s,e,t,n,i,r,{o:{nextSibling:o,parentNode:l,querySelector:a,insert:c,createText:u}},d){function h(b,x,g,j){x.anchor=d(o(b),x,l(b),t,n,i,r),x.targetStart=g,x.targetAnchor=j}const p=e.target=Sc(e.props,a),y=go(e.props);if(p){const b=p._lpa||p.firstChild;if(e.shapeFlag&16)if(y)h(s,e,b,b&&o(b));else{e.anchor=o(s);let x=b;for(;x;){if(x&&x.nodeType===8){if(x.data==="teleport start anchor")e.targetStart=x;else if(x.data==="teleport anchor"){e.targetAnchor=x,p._lpa=e.targetAnchor&&o(e.targetAnchor);break}}x=o(x)}e.targetAnchor||Hm(p,e,u,c),d(b&&o(b),e,p,t,n,i,r)}ta(e,y)}else y&&e.shapeFlag&16&&h(s,e,s,o(s));return e.anchor&&o(e.anchor)}const Um=zm;function ta(s,e){const t=s.ctx;if(t&&t.ut){let n,i;for(e?(n=s.el,i=s.anchor):(n=s.targetStart,i=s.targetAnchor);n&&n!==i;)n.nodeType===1&&n.setAttribute("data-v-owner",t.uid),n=n.nextSibling;t.ut()}}function Hm(s,e,t,n){const i=e.targetStart=t(""),r=e.targetAnchor=t("");return i[Nm]=r,s&&(n(i,s),n(r,s)),r}const Tn=Symbol("_leaveCb"),Dl=Symbol("_enterCb");function dk(){const s={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return as(()=>{s.isMounted=!0}),Zm(()=>{s.isUnmounting=!0}),s}const Ls=[Function,Array],qm={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ls,onEnter:Ls,onAfterEnter:Ls,onEnterCancelled:Ls,onBeforeLeave:Ls,onLeave:Ls,onAfterLeave:Ls,onLeaveCancelled:Ls,onBeforeAppear:Ls,onAppear:Ls,onAfterAppear:Ls,onAppearCancelled:Ls},Wm=s=>{const e=s.subTree;return e.component?Wm(e.component):e},fk={name:"BaseTransition",props:qm,setup(s,{slots:e}){const t=Yd(),n=dk();return()=>{const i=e.default&&Jm(e.default(),!0);if(!i||!i.length)return;const r=Km(i),o=lt(s),{mode:l}=o;if(n.isLeaving)return $u(r);const a=Mh(r);if(!a)return $u(r);let c=Cc(a,o,n,t,d=>c=d);a.type!==is&&jo(a,c);let u=t.subTree&&Mh(t.subTree);if(u&&u.type!==is&&!Di(u,a)&&Wm(t).type!==is){let d=Cc(u,o,n,t);if(jo(u,d),l==="out-in"&&a.type!==is)return n.isLeaving=!0,d.afterLeave=()=>{n.isLeaving=!1,t.job.flags&8||t.update(),delete d.afterLeave,u=void 0},$u(r);l==="in-out"&&a.type!==is?d.delayLeave=(h,p,y)=>{const b=Gm(n,u);b[String(u.key)]=u,h[Tn]=()=>{p(),h[Tn]=void 0,delete c.delayedLeave,u=void 0},c.delayedLeave=()=>{y(),delete c.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return r}}};function Km(s){let e=s[0];if(s.length>1){for(const t of s)if(t.type!==is){e=t;break}}return e}const hk=fk;function Gm(s,e){const{leavingVNodes:t}=s;let n=t.get(e.type);return n||(n=Object.create(null),t.set(e.type,n)),n}function Cc(s,e,t,n,i){const{appear:r,mode:o,persisted:l=!1,onBeforeEnter:a,onEnter:c,onAfterEnter:u,onEnterCancelled:d,onBeforeLeave:h,onLeave:p,onAfterLeave:y,onLeaveCancelled:b,onBeforeAppear:x,onAppear:g,onAfterAppear:j,onAppearCancelled:B}=e,U=String(s.key),I=Gm(t,s),L=(W,ce)=>{W&&Zs(W,n,9,ce)},_=(W,ce)=>{const ne=ce[1];L(W,ce),Be(W)?W.every(N=>N.length<=1)&&ne():W.length<=1&&ne()},R={mode:o,persisted:l,beforeEnter(W){let ce=a;if(!t.isMounted)if(r)ce=x||a;else return;W[Tn]&&W[Tn](!0);const ne=I[U];ne&&Di(s,ne)&&ne.el[Tn]&&ne.el[Tn](),L(ce,[W])},enter(W){let ce=c,ne=u,N=d;if(!t.isMounted)if(r)ce=g||c,ne=j||u,N=B||d;else return;let le=!1;const ee=W[Dl]=V=>{le||(le=!0,V?L(N,[W]):L(ne,[W]),R.delayedLeave&&R.delayedLeave(),W[Dl]=void 0)};ce?_(ce,[W,ee]):ee()},leave(W,ce){const ne=String(s.key);if(W[Dl]&&W[Dl](!0),t.isUnmounting)return ce();L(h,[W]);let N=!1;const le=W[Tn]=ee=>{N||(N=!0,ce(),ee?L(b,[W]):L(y,[W]),W[Tn]=void 0,I[ne]===s&&delete I[ne])};I[ne]=s,p?_(p,[W,le]):le()},clone(W){const ce=Cc(W,e,t,n,i);return i&&i(ce),ce}};return R}function $u(s){if(Xa(s))return s=ui(s),s.children=null,s}function Mh(s){if(!Xa(s))return Fm(s.type)&&s.children?Km(s.children):s;if(s.component)return s.component.subTree;const{shapeFlag:e,children:t}=s;if(t){if(e&16)return t[0];if(e&32&&Ke(t.default))return t.default()}}function jo(s,e){s.shapeFlag&6&&s.component?(s.transition=e,jo(s.component.subTree,e)):s.shapeFlag&128?(s.ssContent.transition=e.clone(s.ssContent),s.ssFallback.transition=e.clone(s.ssFallback)):s.transition=e}function Jm(s,e=!1,t){let n=[],i=0;for(let r=0;r<s.length;r++){let o=s[r];const l=t==null?o.key:String(t)+String(o.key!=null?o.key:r);o.type===be?(o.patchFlag&128&&i++,n=n.concat(Jm(o.children,e,l))):(e||o.type!==is)&&n.push(l!=null?ui(o,{key:l}):o)}if(i>1)for(let r=0;r<n.length;r++)n[r].patchFlag=-2;return n}function Qm(s,e){return Ke(s)?Ut({name:s.name},e,{setup:s}):s}function Ym(s){s.ids=[s.ids[0]+s.ids[2]+++"-",0,0]}const ba=new WeakMap;function mo(s,e,t,n,i=!1){if(Be(s)){s.forEach((y,b)=>mo(y,e&&(Be(e)?e[b]:e),t,n,i));return}if(mr(n)&&!i){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&mo(s,e,t,n.component.subTree);return}const r=n.shapeFlag&4?su(n.component):n.el,o=i?null:r,{i:l,r:a}=s,c=e&&e.r,u=l.refs===kt?l.refs={}:l.refs,d=l.setupState,h=lt(d),p=d===kt?cm:y=>ut(h,y);if(c!=null&&c!==a){if(Dh(e),Et(c))u[c]=null,p(c)&&(d[c]=null);else if(ls(c)){c.value=null;const y=e;y.k&&(u[y.k]=null)}}if(Ke(a))nl(a,l,12,[o,u]);else{const y=Et(a),b=ls(a);if(y||b){const x=()=>{if(s.f){const g=y?p(a)?d[a]:u[a]:a.value;if(i)Be(g)&&Ld(g,r);else if(Be(g))g.includes(r)||g.push(r);else if(y)u[a]=[r],p(a)&&(d[a]=u[a]);else{const j=[r];a.value=j,s.k&&(u[s.k]=j)}}else y?(u[a]=o,p(a)&&(d[a]=o)):b&&(a.value=o,s.k&&(u[s.k]=o))};if(o){const g=()=>{x(),ba.delete(s)};g.id=-1,ba.set(s,g),hs(g,t)}else Dh(s),x()}}}function Dh(s){const e=ba.get(s);e&&(e.flags|=8,ba.delete(s))}Ja().requestIdleCallback;Ja().cancelIdleCallback;const mr=s=>!!s.type.__asyncLoader,Xa=s=>s.type.__isKeepAlive;function pk(s,e){Xm(s,"a",e)}function gk(s,e){Xm(s,"da",e)}function Xm(s,e,t=rs){const n=s.__wdc||(s.__wdc=()=>{let i=t;for(;i;){if(i.isDeactivated)return;i=i.parent}return s()});if(Za(e,n,t),t){let i=t.parent;for(;i&&i.parent;)Xa(i.parent.vnode)&&mk(n,e,t,i),i=i.parent}}function mk(s,e,t,n){const i=Za(e,s,n,!0);Lr(()=>{Ld(n[e],i)},t)}function Za(s,e,t=rs,n=!1){if(t){const i=t[s]||(t[s]=[]),r=e.__weh||(e.__weh=(...o)=>{Vn();const l=il(t),a=Zs(e,t,s,o);return l(),Bn(),a});return n?i.unshift(r):i.push(r),r}}const zn=s=>(e,t=rs)=>{(!$o||s==="sp")&&Za(s,(...n)=>e(...n),t)},vk=zn("bm"),as=zn("m"),yk=zn("bu"),bk=zn("u"),Zm=zn("bum"),Lr=zn("um"),kk=zn("sp"),xk=zn("rtg"),wk=zn("rtc");function Sk(s,e=rs){Za("ec",s,e)}const e0="components";function _c(s,e){return s0(e0,s,!0,e)||s}const t0=Symbol.for("v-ndc");function Ms(s){return Et(s)?s0(e0,s,!1)||s:s||t0}function s0(s,e,t=!0,n=!1){const i=Jt||rs;if(i){const r=i.type;{const l=fx(r,!1);if(l&&(l===e||l===Ws(e)||l===Ga(Ws(e))))return r}const o=Eh(i[s]||r[s],e)||Eh(i.appContext[s],e);return!o&&n?r:o}}function Eh(s,e){return s&&(s[e]||s[Ws(e)]||s[Ga(Ws(e))])}function Le(s,e,t,n){let i;const r=t,o=Be(s);if(o||Et(s)){const l=o&&pr(s);let a=!1,c=!1;l&&(a=!Fs(s),c=ai(s),s=Qa(s)),i=new Array(s.length);for(let u=0,d=s.length;u<d;u++)i[u]=e(a?c?ga(Wt(s[u])):Wt(s[u]):s[u],u,void 0,r)}else if(typeof s=="number"){i=new Array(s);for(let l=0;l<s;l++)i[l]=e(l+1,l,void 0,r)}else if(pt(s))if(s[Symbol.iterator])i=Array.from(s,(l,a)=>e(l,a,void 0,r));else{const l=Object.keys(s);i=new Array(l.length);for(let a=0,c=l.length;a<c;a++){const u=l[a];i[a]=e(s[u],u,a,r)}}else i=[];return i}function Ck(s,e){for(let t=0;t<e.length;t++){const n=e[t];if(Be(n))for(let i=0;i<n.length;i++)s[n[i].name]=n[i].fn;else n&&(s[n.name]=n.key?(...i)=>{const r=n.fn(...i);return r&&(r.key=n.key),r}:n.fn)}return s}function dt(s,e,t={},n,i){if(Jt.ce||Jt.parent&&mr(Jt.parent)&&Jt.parent.ce){const c=Object.keys(t).length>0;return e!=="default"&&(t.name=e),v(),Ae(be,null,[S("slot",t,n&&n())],c?-2:64)}let r=s[e];r&&r._c&&(r._d=!1),v();const o=r&&n0(r(t)),l=t.key||o&&o.key,a=Ae(be,{key:(l&&!Xs(l)?l:`_${e}`)+(!o&&n?"_fb":"")},o||(n?n():[]),o&&s._===1?64:-2);return!i&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),r&&r._c&&(r._d=!0),a}function n0(s){return s.some(e=>Po(e)?!(e.type===is||e.type===be&&!n0(e.children)):!0)?s:null}const Ac=s=>s?w0(s)?su(s):Ac(s.parent):null,vo=Ut(Object.create(null),{$:s=>s,$el:s=>s.vnode.el,$data:s=>s.data,$props:s=>s.props,$attrs:s=>s.attrs,$slots:s=>s.slots,$refs:s=>s.refs,$parent:s=>Ac(s.parent),$root:s=>Ac(s.root),$host:s=>s.ce,$emit:s=>s.emit,$options:s=>r0(s),$forceUpdate:s=>s.f||(s.f=()=>{Wd(s.update)}),$nextTick:s=>s.n||(s.n=Bs.bind(s.proxy)),$watch:s=>Kk.bind(s)}),Ru=(s,e)=>s!==kt&&!s.__isScriptSetup&&ut(s,e),_k={get({_:s},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:n,data:i,props:r,accessCache:o,type:l,appContext:a}=s;let c;if(e[0]!=="$"){const p=o[e];if(p!==void 0)switch(p){case 1:return n[e];case 2:return i[e];case 4:return t[e];case 3:return r[e]}else{if(Ru(n,e))return o[e]=1,n[e];if(i!==kt&&ut(i,e))return o[e]=2,i[e];if((c=s.propsOptions[0])&&ut(c,e))return o[e]=3,r[e];if(t!==kt&&ut(t,e))return o[e]=4,t[e];Mc&&(o[e]=0)}}const u=vo[e];let d,h;if(u)return e==="$attrs"&&ss(s.attrs,"get",""),u(s);if((d=l.__cssModules)&&(d=d[e]))return d;if(t!==kt&&ut(t,e))return o[e]=4,t[e];if(h=a.config.globalProperties,ut(h,e))return h[e]},set({_:s},e,t){const{data:n,setupState:i,ctx:r}=s;return Ru(i,e)?(i[e]=t,!0):n!==kt&&ut(n,e)?(n[e]=t,!0):ut(s.props,e)||e[0]==="$"&&e.slice(1)in s?!1:(r[e]=t,!0)},has({_:{data:s,setupState:e,accessCache:t,ctx:n,appContext:i,propsOptions:r,type:o}},l){let a,c;return!!(t[l]||s!==kt&&l[0]!=="$"&&ut(s,l)||Ru(e,l)||(a=r[0])&&ut(a,l)||ut(n,l)||ut(vo,l)||ut(i.config.globalProperties,l)||(c=o.__cssModules)&&c[l])},defineProperty(s,e,t){return t.get!=null?s._.accessCache[e]=0:ut(t,"value")&&this.set(s,e,t.value,null),Reflect.defineProperty(s,e,t)}};function Ak(){return Mk().slots}function Mk(s){const e=Yd();return e.setupContext||(e.setupContext=C0(e))}function Th(s){return Be(s)?s.reduce((e,t)=>(e[t]=null,e),{}):s}let Mc=!0;function Dk(s){const e=r0(s),t=s.proxy,n=s.ctx;Mc=!1,e.beforeCreate&&jh(e.beforeCreate,s,"bc");const{data:i,computed:r,methods:o,watch:l,provide:a,inject:c,created:u,beforeMount:d,mounted:h,beforeUpdate:p,updated:y,activated:b,deactivated:x,beforeDestroy:g,beforeUnmount:j,destroyed:B,unmounted:U,render:I,renderTracked:L,renderTriggered:_,errorCaptured:R,serverPrefetch:W,expose:ce,inheritAttrs:ne,components:N,directives:le,filters:ee}=e;if(c&&Ek(c,n,null),o)for(const Q in o){const ae=o[Q];Ke(ae)&&(n[Q]=ae.bind(t))}if(i){const Q=i.call(t,t);pt(Q)&&(s.data=Js(Q))}if(Mc=!0,r)for(const Q in r){const ae=r[Q],me=Ke(ae)?ae.bind(t,t):Ke(ae.get)?ae.get.bind(t,t):kn,$e=!Ke(ae)&&Ke(ae.set)?ae.set.bind(t):kn,Re=F({get:me,set:$e});Object.defineProperty(n,Q,{enumerable:!0,configurable:!0,get:()=>Re.value,set:Oe=>Re.value=Oe})}if(l)for(const Q in l)i0(l[Q],n,t,Q);if(a){const Q=Ke(a)?a.call(t):a;Reflect.ownKeys(Q).forEach(ae=>{yo(ae,Q[ae])})}u&&jh(u,s,"c");function G(Q,ae){Be(ae)?ae.forEach(me=>Q(me.bind(t))):ae&&Q(ae.bind(t))}if(G(vk,d),G(as,h),G(yk,p),G(bk,y),G(pk,b),G(gk,x),G(Sk,R),G(wk,L),G(xk,_),G(Zm,j),G(Lr,U),G(kk,W),Be(ce))if(ce.length){const Q=s.exposed||(s.exposed={});ce.forEach(ae=>{Object.defineProperty(Q,ae,{get:()=>t[ae],set:me=>t[ae]=me,enumerable:!0})})}else s.exposed||(s.exposed={});I&&s.render===kn&&(s.render=I),ne!=null&&(s.inheritAttrs=ne),N&&(s.components=N),le&&(s.directives=le),W&&Ym(s)}function Ek(s,e,t=kn){Be(s)&&(s=Dc(s));for(const n in s){const i=s[n];let r;pt(i)?"default"in i?r=zs(i.from||n,i.default,!0):r=zs(i.from||n):r=zs(i),ls(r)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):e[n]=r}}function jh(s,e,t){Zs(Be(s)?s.map(n=>n.bind(e.proxy)):s.bind(e.proxy),e,t)}function i0(s,e,t,n){let i=n.includes(".")?v0(t,n):()=>t[n];if(Et(s)){const r=e[s];Ke(r)&&Pe(i,r)}else if(Ke(s))Pe(i,s.bind(t));else if(pt(s))if(Be(s))s.forEach(r=>i0(r,e,t,n));else{const r=Ke(s.handler)?s.handler.bind(t):e[s.handler];Ke(r)&&Pe(i,r,s)}}function r0(s){const e=s.type,{mixins:t,extends:n}=e,{mixins:i,optionsCache:r,config:{optionMergeStrategies:o}}=s.appContext,l=r.get(e);let a;return l?a=l:!i.length&&!t&&!n?a=e:(a={},i.length&&i.forEach(c=>ka(a,c,o,!0)),ka(a,e,o)),pt(e)&&r.set(e,a),a}function ka(s,e,t,n=!1){const{mixins:i,extends:r}=e;r&&ka(s,r,t,!0),i&&i.forEach(o=>ka(s,o,t,!0));for(const o in e)if(!(n&&o==="expose")){const l=Tk[o]||t&&t[o];s[o]=l?l(s[o],e[o]):e[o]}return s}const Tk={data:Oh,props:Ph,emits:Ph,methods:oo,computed:oo,beforeCreate:fs,created:fs,beforeMount:fs,mounted:fs,beforeUpdate:fs,updated:fs,beforeDestroy:fs,beforeUnmount:fs,destroyed:fs,unmounted:fs,activated:fs,deactivated:fs,errorCaptured:fs,serverPrefetch:fs,components:oo,directives:oo,watch:Ok,provide:Oh,inject:jk};function Oh(s,e){return e?s?function(){return Ut(Ke(s)?s.call(this,this):s,Ke(e)?e.call(this,this):e)}:e:s}function jk(s,e){return oo(Dc(s),Dc(e))}function Dc(s){if(Be(s)){const e={};for(let t=0;t<s.length;t++)e[s[t]]=s[t];return e}return s}function fs(s,e){return s?[...new Set([].concat(s,e))]:e}function oo(s,e){return s?Ut(Object.create(null),s,e):e}function Ph(s,e){return s?Be(s)&&Be(e)?[...new Set([...s,...e])]:Ut(Object.create(null),Th(s),Th(e??{})):e}function Ok(s,e){if(!s)return e;if(!e)return s;const t=Ut(Object.create(null),s);for(const n in e)t[n]=fs(s[n],e[n]);return t}function o0(){return{app:null,config:{isNativeTag:cm,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Pk=0;function $k(s,e){return function(n,i=null){Ke(n)||(n=Ut({},n)),i!=null&&!pt(i)&&(i=null);const r=o0(),o=new WeakSet,l=[];let a=!1;const c=r.app={_uid:Pk++,_component:n,_props:i,_container:null,_context:r,_instance:null,version:px,get config(){return r.config},set config(u){},use(u,...d){return o.has(u)||(u&&Ke(u.install)?(o.add(u),u.install(c,...d)):Ke(u)&&(o.add(u),u(c,...d))),c},mixin(u){return r.mixins.includes(u)||r.mixins.push(u),c},component(u,d){return d?(r.components[u]=d,c):r.components[u]},directive(u,d){return d?(r.directives[u]=d,c):r.directives[u]},mount(u,d,h){if(!a){const p=c._ceVNode||S(n,i);return p.appContext=r,h===!0?h="svg":h===!1&&(h=void 0),s(p,u,h),a=!0,c._container=u,u.__vue_app__=c,su(p.component)}},onUnmount(u){l.push(u)},unmount(){a&&(Zs(l,c._instance,16),s(null,c._container),delete c._container.__vue_app__)},provide(u,d){return r.provides[u]=d,c},runWithContext(u){const d=vr;vr=c;try{return u()}finally{vr=d}}};return c}}let vr=null;function yo(s,e){if(rs){let t=rs.provides;const n=rs.parent&&rs.parent.provides;n===t&&(t=rs.provides=Object.create(n)),t[s]=e}}function zs(s,e,t=!1){const n=Yd();if(n||vr){let i=vr?vr._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(i&&s in i)return i[s];if(arguments.length>1)return t&&Ke(e)?e.call(n&&n.proxy):e}}const l0={},a0=()=>Object.create(l0),u0=s=>Object.getPrototypeOf(s)===l0;function Rk(s,e,t,n=!1){const i={},r=a0();s.propsDefaults=Object.create(null),c0(s,e,i,r);for(const o in s.propsOptions[0])o in i||(i[o]=void 0);t?s.props=n?i:Om(i):s.type.props?s.props=i:s.props=r,s.attrs=r}function Lk(s,e,t,n){const{props:i,attrs:r,vnode:{patchFlag:o}}=s,l=lt(i),[a]=s.propsOptions;let c=!1;if((n||o>0)&&!(o&16)){if(o&8){const u=s.vnode.dynamicProps;for(let d=0;d<u.length;d++){let h=u[d];if(eu(s.emitsOptions,h))continue;const p=e[h];if(a)if(ut(r,h))p!==r[h]&&(r[h]=p,c=!0);else{const y=Ws(h);i[y]=Ec(a,l,y,p,s,!1)}else p!==r[h]&&(r[h]=p,c=!0)}}}else{c0(s,e,i,r)&&(c=!0);let u;for(const d in l)(!e||!ut(e,d)&&((u=Ki(d))===d||!ut(e,u)))&&(a?t&&(t[d]!==void 0||t[u]!==void 0)&&(i[d]=Ec(a,l,d,void 0,s,!0)):delete i[d]);if(r!==l)for(const d in r)(!e||!ut(e,d))&&(delete r[d],c=!0)}c&&jn(s.attrs,"set","")}function c0(s,e,t,n){const[i,r]=s.propsOptions;let o=!1,l;if(e)for(let a in e){if(fo(a))continue;const c=e[a];let u;i&&ut(i,u=Ws(a))?!r||!r.includes(u)?t[u]=c:(l||(l={}))[u]=c:eu(s.emitsOptions,a)||(!(a in n)||c!==n[a])&&(n[a]=c,o=!0)}if(r){const a=lt(t),c=l||kt;for(let u=0;u<r.length;u++){const d=r[u];t[d]=Ec(i,a,d,c[d],s,!ut(c,d))}}return o}function Ec(s,e,t,n,i,r){const o=s[t];if(o!=null){const l=ut(o,"default");if(l&&n===void 0){const a=o.default;if(o.type!==Function&&!o.skipFactory&&Ke(a)){const{propsDefaults:c}=i;if(t in c)n=c[t];else{const u=il(i);n=c[t]=a.call(null,e),u()}}else n=a;i.ce&&i.ce._setProp(t,n)}o[0]&&(r&&!l?n=!1:o[1]&&(n===""||n===Ki(t))&&(n=!0))}return n}const Vk=new WeakMap;function d0(s,e,t=!1){const n=t?Vk:e.propsCache,i=n.get(s);if(i)return i;const r=s.props,o={},l=[];let a=!1;if(!Ke(s)){const u=d=>{a=!0;const[h,p]=d0(d,e,!0);Ut(o,h),p&&l.push(...p)};!t&&e.mixins.length&&e.mixins.forEach(u),s.extends&&u(s.extends),s.mixins&&s.mixins.forEach(u)}if(!r&&!a)return pt(s)&&n.set(s,dr),dr;if(Be(r))for(let u=0;u<r.length;u++){const d=Ws(r[u]);$h(d)&&(o[d]=kt)}else if(r)for(const u in r){const d=Ws(u);if($h(d)){const h=r[u],p=o[d]=Be(h)||Ke(h)?{type:h}:Ut({},h),y=p.type;let b=!1,x=!0;if(Be(y))for(let g=0;g<y.length;++g){const j=y[g],B=Ke(j)&&j.name;if(B==="Boolean"){b=!0;break}else B==="String"&&(x=!1)}else b=Ke(y)&&y.name==="Boolean";p[0]=b,p[1]=x,(b||ut(p,"default"))&&l.push(d)}}const c=[o,l];return pt(s)&&n.set(s,c),c}function $h(s){return s[0]!=="$"&&!fo(s)}const Kd=s=>s==="_"||s==="_ctx"||s==="$stable",Gd=s=>Be(s)?s.map(pn):[pn(s)],Bk=(s,e,t)=>{if(e._n)return e;const n=X((...i)=>Gd(e(...i)),t);return n._c=!1,n},f0=(s,e,t)=>{const n=s._ctx;for(const i in s){if(Kd(i))continue;const r=s[i];if(Ke(r))e[i]=Bk(i,r,n);else if(r!=null){const o=Gd(r);e[i]=()=>o}}},h0=(s,e)=>{const t=Gd(e);s.slots.default=()=>t},p0=(s,e,t)=>{for(const n in e)(t||!Kd(n))&&(s[n]=e[n])},Ik=(s,e,t)=>{const n=s.slots=a0();if(s.vnode.shapeFlag&32){const i=e._;i?(p0(n,e,t),t&&pm(n,"_",i,!0)):f0(e,n)}else e&&h0(s,e)},Nk=(s,e,t)=>{const{vnode:n,slots:i}=s;let r=!0,o=kt;if(n.shapeFlag&32){const l=e._;l?t&&l===1?r=!1:p0(i,e,t):(r=!e.$stable,f0(e,i)),o=e}else e&&(h0(s,e),o={default:1});if(r)for(const l in i)!Kd(l)&&o[l]==null&&delete i[l]},hs=tx;function Fk(s){return zk(s)}function zk(s,e){const t=Ja();t.__VUE__=!0;const{insert:n,remove:i,patchProp:r,createElement:o,createText:l,createComment:a,setText:c,setElementText:u,parentNode:d,nextSibling:h,setScopeId:p=kn,insertStaticContent:y}=s,b=(A,$,q,oe=null,te=null,se=null,ye=void 0,D=null,T=!!$.dynamicChildren)=>{if(A===$)return;A&&!Di(A,$)&&(oe=re(A),Oe(A,te,se,!0),A=null),$.patchFlag===-2&&(T=!1,$.dynamicChildren=null);const{type:P,ref:ue,shapeFlag:ge}=$;switch(P){case tu:x(A,$,q,oe);break;case is:g(A,$,q,oe);break;case sa:A==null&&j($,q,oe,ye);break;case be:N(A,$,q,oe,te,se,ye,D,T);break;default:ge&1?I(A,$,q,oe,te,se,ye,D,T):ge&6?le(A,$,q,oe,te,se,ye,D,T):(ge&64||ge&128)&&P.process(A,$,q,oe,te,se,ye,D,T,C)}ue!=null&&te?mo(ue,A&&A.ref,se,$||A,!$):ue==null&&A&&A.ref!=null&&mo(A.ref,null,se,A,!0)},x=(A,$,q,oe)=>{if(A==null)n($.el=l($.children),q,oe);else{const te=$.el=A.el;$.children!==A.children&&c(te,$.children)}},g=(A,$,q,oe)=>{A==null?n($.el=a($.children||""),q,oe):$.el=A.el},j=(A,$,q,oe)=>{[A.el,A.anchor]=y(A.children,$,q,oe,A.el,A.anchor)},B=({el:A,anchor:$},q,oe)=>{let te;for(;A&&A!==$;)te=h(A),n(A,q,oe),A=te;n($,q,oe)},U=({el:A,anchor:$})=>{let q;for(;A&&A!==$;)q=h(A),i(A),A=q;i($)},I=(A,$,q,oe,te,se,ye,D,T)=>{$.type==="svg"?ye="svg":$.type==="math"&&(ye="mathml"),A==null?L($,q,oe,te,se,ye,D,T):W(A,$,te,se,ye,D,T)},L=(A,$,q,oe,te,se,ye,D)=>{let T,P;const{props:ue,shapeFlag:ge,transition:we,dirs:Ee}=A;if(T=A.el=o(A.type,se,ue&&ue.is,ue),ge&8?u(T,A.children):ge&16&&R(A.children,T,null,oe,te,Lu(A,se),ye,D),Ee&&ki(A,null,oe,"created"),_(T,A,A.scopeId,ye,oe),ue){for(const Ye in ue)Ye!=="value"&&!fo(Ye)&&r(T,Ye,null,ue[Ye],se,oe);"value"in ue&&r(T,"value",null,ue.value,se),(P=ue.onVnodeBeforeMount)&&an(P,oe,A)}Ee&&ki(A,null,oe,"beforeMount");const Ie=Uk(te,we);Ie&&we.beforeEnter(T),n(T,$,q),((P=ue&&ue.onVnodeMounted)||Ie||Ee)&&hs(()=>{P&&an(P,oe,A),Ie&&we.enter(T),Ee&&ki(A,null,oe,"mounted")},te)},_=(A,$,q,oe,te)=>{if(q&&p(A,q),oe)for(let se=0;se<oe.length;se++)p(A,oe[se]);if(te){let se=te.subTree;if($===se||b0(se.type)&&(se.ssContent===$||se.ssFallback===$)){const ye=te.vnode;_(A,ye,ye.scopeId,ye.slotScopeIds,te.parent)}}},R=(A,$,q,oe,te,se,ye,D,T=0)=>{for(let P=T;P<A.length;P++){const ue=A[P]=D?Qn(A[P]):pn(A[P]);b(null,ue,$,q,oe,te,se,ye,D)}},W=(A,$,q,oe,te,se,ye)=>{const D=$.el=A.el;let{patchFlag:T,dynamicChildren:P,dirs:ue}=$;T|=A.patchFlag&16;const ge=A.props||kt,we=$.props||kt;let Ee;if(q&&xi(q,!1),(Ee=we.onVnodeBeforeUpdate)&&an(Ee,q,$,A),ue&&ki($,A,q,"beforeUpdate"),q&&xi(q,!0),(ge.innerHTML&&we.innerHTML==null||ge.textContent&&we.textContent==null)&&u(D,""),P?ce(A.dynamicChildren,P,D,q,oe,Lu($,te),se):ye||ae(A,$,D,null,q,oe,Lu($,te),se,!1),T>0){if(T&16)ne(D,ge,we,q,te);else if(T&2&&ge.class!==we.class&&r(D,"class",null,we.class,te),T&4&&r(D,"style",ge.style,we.style,te),T&8){const Ie=$.dynamicProps;for(let Ye=0;Ye<Ie.length;Ye++){const pe=Ie[Ye],gt=ge[pe],Mt=we[pe];(Mt!==gt||pe==="value")&&r(D,pe,gt,Mt,te,q)}}T&1&&A.children!==$.children&&u(D,$.children)}else!ye&&P==null&&ne(D,ge,we,q,te);((Ee=we.onVnodeUpdated)||ue)&&hs(()=>{Ee&&an(Ee,q,$,A),ue&&ki($,A,q,"updated")},oe)},ce=(A,$,q,oe,te,se,ye)=>{for(let D=0;D<$.length;D++){const T=A[D],P=$[D],ue=T.el&&(T.type===be||!Di(T,P)||T.shapeFlag&198)?d(T.el):q;b(T,P,ue,null,oe,te,se,ye,!0)}},ne=(A,$,q,oe,te)=>{if($!==q){if($!==kt)for(const se in $)!fo(se)&&!(se in q)&&r(A,se,$[se],null,te,oe);for(const se in q){if(fo(se))continue;const ye=q[se],D=$[se];ye!==D&&se!=="value"&&r(A,se,D,ye,te,oe)}"value"in q&&r(A,"value",$.value,q.value,te)}},N=(A,$,q,oe,te,se,ye,D,T)=>{const P=$.el=A?A.el:l(""),ue=$.anchor=A?A.anchor:l("");let{patchFlag:ge,dynamicChildren:we,slotScopeIds:Ee}=$;Ee&&(D=D?D.concat(Ee):Ee),A==null?(n(P,q,oe),n(ue,q,oe),R($.children||[],q,ue,te,se,ye,D,T)):ge>0&&ge&64&&we&&A.dynamicChildren?(ce(A.dynamicChildren,we,q,te,se,ye,D),($.key!=null||te&&$===te.subTree)&&Jd(A,$,!0)):ae(A,$,q,ue,te,se,ye,D,T)},le=(A,$,q,oe,te,se,ye,D,T)=>{$.slotScopeIds=D,A==null?$.shapeFlag&512?te.ctx.activate($,q,oe,ye,T):ee($,q,oe,te,se,ye,T):V(A,$,T)},ee=(A,$,q,oe,te,se,ye)=>{const D=A.component=ax(A,oe,te);if(Xa(A)&&(D.ctx.renderer=C),ux(D,!1,ye),D.asyncDep){if(te&&te.registerDep(D,G,ye),!A.el){const T=D.subTree=S(is);g(null,T,$,q),A.placeholder=T.el}}else G(D,A,$,q,te,se,ye)},V=(A,$,q)=>{const oe=$.component=A.component;if(Zk(A,$,q))if(oe.asyncDep&&!oe.asyncResolved){Q(oe,$,q);return}else oe.next=$,oe.update();else $.el=A.el,oe.vnode=$},G=(A,$,q,oe,te,se,ye)=>{const D=()=>{if(A.isMounted){let{next:ge,bu:we,u:Ee,parent:Ie,vnode:Ye}=A;{const Ze=g0(A);if(Ze){ge&&(ge.el=Ye.el,Q(A,ge,ye)),Ze.asyncDep.then(()=>{A.isUnmounted||D()});return}}let pe=ge,gt;xi(A,!1),ge?(ge.el=Ye.el,Q(A,ge,ye)):ge=Ye,we&&ea(we),(gt=ge.props&&ge.props.onVnodeBeforeUpdate)&&an(gt,Ie,ge,Ye),xi(A,!0);const Mt=Lh(A),Ot=A.subTree;A.subTree=Mt,b(Ot,Mt,d(Ot.el),re(Ot),A,te,se),ge.el=Mt.el,pe===null&&ex(A,Mt.el),Ee&&hs(Ee,te),(gt=ge.props&&ge.props.onVnodeUpdated)&&hs(()=>an(gt,Ie,ge,Ye),te)}else{let ge;const{el:we,props:Ee}=$,{bm:Ie,m:Ye,parent:pe,root:gt,type:Mt}=A,Ot=mr($);xi(A,!1),Ie&&ea(Ie),!Ot&&(ge=Ee&&Ee.onVnodeBeforeMount)&&an(ge,pe,$),xi(A,!0);{gt.ce&&gt.ce._def.shadowRoot!==!1&&gt.ce._injectChildStyle(Mt);const Ze=A.subTree=Lh(A);b(null,Ze,q,oe,A,te,se),$.el=Ze.el}if(Ye&&hs(Ye,te),!Ot&&(ge=Ee&&Ee.onVnodeMounted)){const Ze=$;hs(()=>an(ge,pe,Ze),te)}($.shapeFlag&256||pe&&mr(pe.vnode)&&pe.vnode.shapeFlag&256)&&A.a&&hs(A.a,te),A.isMounted=!0,$=q=oe=null}};A.scope.on();const T=A.effect=new ym(D);A.scope.off();const P=A.update=T.run.bind(T),ue=A.job=T.runIfDirty.bind(T);ue.i=A,ue.id=A.uid,T.scheduler=()=>Wd(ue),xi(A,!0),P()},Q=(A,$,q)=>{$.component=A;const oe=A.vnode.props;A.vnode=$,A.next=null,Lk(A,$.props,oe,q),Nk(A,$.children,q),Vn(),Sh(A),Bn()},ae=(A,$,q,oe,te,se,ye,D,T=!1)=>{const P=A&&A.children,ue=A?A.shapeFlag:0,ge=$.children,{patchFlag:we,shapeFlag:Ee}=$;if(we>0){if(we&128){$e(P,ge,q,oe,te,se,ye,D,T);return}else if(we&256){me(P,ge,q,oe,te,se,ye,D,T);return}}Ee&8?(ue&16&&Xe(P,te,se),ge!==P&&u(q,ge)):ue&16?Ee&16?$e(P,ge,q,oe,te,se,ye,D,T):Xe(P,te,se,!0):(ue&8&&u(q,""),Ee&16&&R(ge,q,oe,te,se,ye,D,T))},me=(A,$,q,oe,te,se,ye,D,T)=>{A=A||dr,$=$||dr;const P=A.length,ue=$.length,ge=Math.min(P,ue);let we;for(we=0;we<ge;we++){const Ee=$[we]=T?Qn($[we]):pn($[we]);b(A[we],Ee,q,null,te,se,ye,D,T)}P>ue?Xe(A,te,se,!0,!1,ge):R($,q,oe,te,se,ye,D,T,ge)},$e=(A,$,q,oe,te,se,ye,D,T)=>{let P=0;const ue=$.length;let ge=A.length-1,we=ue-1;for(;P<=ge&&P<=we;){const Ee=A[P],Ie=$[P]=T?Qn($[P]):pn($[P]);if(Di(Ee,Ie))b(Ee,Ie,q,null,te,se,ye,D,T);else break;P++}for(;P<=ge&&P<=we;){const Ee=A[ge],Ie=$[we]=T?Qn($[we]):pn($[we]);if(Di(Ee,Ie))b(Ee,Ie,q,null,te,se,ye,D,T);else break;ge--,we--}if(P>ge){if(P<=we){const Ee=we+1,Ie=Ee<ue?$[Ee].el:oe;for(;P<=we;)b(null,$[P]=T?Qn($[P]):pn($[P]),q,Ie,te,se,ye,D,T),P++}}else if(P>we)for(;P<=ge;)Oe(A[P],te,se,!0),P++;else{const Ee=P,Ie=P,Ye=new Map;for(P=Ie;P<=we;P++){const mt=$[P]=T?Qn($[P]):pn($[P]);mt.key!=null&&Ye.set(mt.key,P)}let pe,gt=0;const Mt=we-Ie+1;let Ot=!1,Ze=0;const Xt=new Array(Mt);for(P=0;P<Mt;P++)Xt[P]=0;for(P=Ee;P<=ge;P++){const mt=A[P];if(gt>=Mt){Oe(mt,te,se,!0);continue}let wt;if(mt.key!=null)wt=Ye.get(mt.key);else for(pe=Ie;pe<=we;pe++)if(Xt[pe-Ie]===0&&Di(mt,$[pe])){wt=pe;break}wt===void 0?Oe(mt,te,se,!0):(Xt[wt-Ie]=P+1,wt>=Ze?Ze=wt:Ot=!0,b(mt,$[wt],q,null,te,se,ye,D,T),gt++)}const Bt=Ot?Hk(Xt):dr;for(pe=Bt.length-1,P=Mt-1;P>=0;P--){const mt=Ie+P,wt=$[mt],We=$[mt+1],vt=mt+1<ue?We.el||We.placeholder:oe;Xt[P]===0?b(null,wt,q,vt,te,se,ye,D,T):Ot&&(pe<0||P!==Bt[pe]?Re(wt,q,vt,2):pe--)}}},Re=(A,$,q,oe,te=null)=>{const{el:se,type:ye,transition:D,children:T,shapeFlag:P}=A;if(P&6){Re(A.component.subTree,$,q,oe);return}if(P&128){A.suspense.move($,q,oe);return}if(P&64){ye.move(A,$,q,C);return}if(ye===be){n(se,$,q);for(let ge=0;ge<T.length;ge++)Re(T[ge],$,q,oe);n(A.anchor,$,q);return}if(ye===sa){B(A,$,q);return}if(oe!==2&&P&1&&D)if(oe===0)D.beforeEnter(se),n(se,$,q),hs(()=>D.enter(se),te);else{const{leave:ge,delayLeave:we,afterLeave:Ee}=D,Ie=()=>{A.ctx.isUnmounted?i(se):n(se,$,q)},Ye=()=>{se._isLeaving&&se[Tn](!0),ge(se,()=>{Ie(),Ee&&Ee()})};we?we(se,Ie,Ye):Ye()}else n(se,$,q)},Oe=(A,$,q,oe=!1,te=!1)=>{const{type:se,props:ye,ref:D,children:T,dynamicChildren:P,shapeFlag:ue,patchFlag:ge,dirs:we,cacheIndex:Ee}=A;if(ge===-2&&(te=!1),D!=null&&(Vn(),mo(D,null,q,A,!0),Bn()),Ee!=null&&($.renderCache[Ee]=void 0),ue&256){$.ctx.deactivate(A);return}const Ie=ue&1&&we,Ye=!mr(A);let pe;if(Ye&&(pe=ye&&ye.onVnodeBeforeUnmount)&&an(pe,$,A),ue&6)st(A.component,q,oe);else{if(ue&128){A.suspense.unmount(q,oe);return}Ie&&ki(A,null,$,"beforeUnmount"),ue&64?A.type.remove(A,$,q,C,oe):P&&!P.hasOnce&&(se!==be||ge>0&&ge&64)?Xe(P,$,q,!1,!0):(se===be&&ge&384||!te&&ue&16)&&Xe(T,$,q),oe&&Ue(A)}(Ye&&(pe=ye&&ye.onVnodeUnmounted)||Ie)&&hs(()=>{pe&&an(pe,$,A),Ie&&ki(A,null,$,"unmounted")},q)},Ue=A=>{const{type:$,el:q,anchor:oe,transition:te}=A;if($===be){ot(q,oe);return}if($===sa){U(A);return}const se=()=>{i(q),te&&!te.persisted&&te.afterLeave&&te.afterLeave()};if(A.shapeFlag&1&&te&&!te.persisted){const{leave:ye,delayLeave:D}=te,T=()=>ye(q,se);D?D(A.el,se,T):T()}else se()},ot=(A,$)=>{let q;for(;A!==$;)q=h(A),i(A),A=q;i($)},st=(A,$,q)=>{const{bum:oe,scope:te,job:se,subTree:ye,um:D,m:T,a:P}=A;Rh(T),Rh(P),oe&&ea(oe),te.stop(),se&&(se.flags|=8,Oe(ye,A,$,q)),D&&hs(D,$),hs(()=>{A.isUnmounted=!0},$)},Xe=(A,$,q,oe=!1,te=!1,se=0)=>{for(let ye=se;ye<A.length;ye++)Oe(A[ye],$,q,oe,te)},re=A=>{if(A.shapeFlag&6)return re(A.component.subTree);if(A.shapeFlag&128)return A.suspense.next();const $=h(A.anchor||A.el),q=$&&$[Nm];return q?h(q):$};let Z=!1;const K=(A,$,q)=>{A==null?$._vnode&&Oe($._vnode,null,null,!0):b($._vnode||null,A,$,null,null,null,q),$._vnode=A,Z||(Z=!0,Sh(),Vm(),Z=!1)},C={p:b,um:Oe,m:Re,r:Ue,mt:ee,mc:R,pc:ae,pbc:ce,n:re,o:s};return{render:K,hydrate:void 0,createApp:$k(K)}}function Lu({type:s,props:e},t){return t==="svg"&&s==="foreignObject"||t==="mathml"&&s==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function xi({effect:s,job:e},t){t?(s.flags|=32,e.flags|=4):(s.flags&=-33,e.flags&=-5)}function Uk(s,e){return(!s||s&&!s.pendingBranch)&&e&&!e.persisted}function Jd(s,e,t=!1){const n=s.children,i=e.children;if(Be(n)&&Be(i))for(let r=0;r<n.length;r++){const o=n[r];let l=i[r];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=i[r]=Qn(i[r]),l.el=o.el),!t&&l.patchFlag!==-2&&Jd(o,l)),l.type===tu&&l.patchFlag!==-1&&(l.el=o.el),l.type===is&&!l.el&&(l.el=o.el)}}function Hk(s){const e=s.slice(),t=[0];let n,i,r,o,l;const a=s.length;for(n=0;n<a;n++){const c=s[n];if(c!==0){if(i=t[t.length-1],s[i]<c){e[n]=i,t.push(n);continue}for(r=0,o=t.length-1;r<o;)l=r+o>>1,s[t[l]]<c?r=l+1:o=l;c<s[t[r]]&&(r>0&&(e[n]=t[r-1]),t[r]=n)}}for(r=t.length,o=t[r-1];r-- >0;)t[r]=o,o=e[o];return t}function g0(s){const e=s.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:g0(e)}function Rh(s){if(s)for(let e=0;e<s.length;e++)s[e].flags|=8}const qk=Symbol.for("v-scx"),Wk=()=>zs(qk);function Pe(s,e,t){return m0(s,e,t)}function m0(s,e,t=kt){const{immediate:n,deep:i,flush:r,once:o}=t,l=Ut({},t),a=e&&n||!e&&r!=="post";let c;if($o){if(r==="sync"){const p=Wk();c=p.__watcherHandles||(p.__watcherHandles=[])}else if(!a){const p=()=>{};return p.stop=kn,p.resume=kn,p.pause=kn,p}}const u=rs;l.call=(p,y,b)=>Zs(p,u,y,b);let d=!1;r==="post"?l.scheduler=p=>{hs(p,u&&u.suspense)}:r!=="sync"&&(d=!0,l.scheduler=(p,y)=>{y?p():Wd(p)}),l.augmentJob=p=>{e&&(p.flags|=4),d&&(p.flags|=2,u&&(p.id=u.uid,p.i=u))};const h=ok(s,e,l);return $o&&(c?c.push(h):a&&h()),h}function Kk(s,e,t){const n=this.proxy,i=Et(s)?s.includes(".")?v0(n,s):()=>n[s]:s.bind(n,n);let r;Ke(e)?r=e:(r=e.handler,t=e);const o=il(this),l=m0(i,r.bind(n),t);return o(),l}function v0(s,e){const t=e.split(".");return()=>{let n=s;for(let i=0;i<t.length&&n;i++)n=n[t[i]];return n}}const Gk=(s,e)=>e==="modelValue"||e==="model-value"?s.modelModifiers:s[`${e}Modifiers`]||s[`${Ws(e)}Modifiers`]||s[`${Ki(e)}Modifiers`];function Jk(s,e,...t){if(s.isUnmounted)return;const n=s.vnode.props||kt;let i=t;const r=e.startsWith("update:"),o=r&&Gk(n,e.slice(7));o&&(o.trim&&(i=t.map(u=>Et(u)?u.trim():u)),o.number&&(i=t.map(pa)));let l,a=n[l=Eu(e)]||n[l=Eu(Ws(e))];!a&&r&&(a=n[l=Eu(Ki(e))]),a&&Zs(a,s,6,i);const c=n[l+"Once"];if(c){if(!s.emitted)s.emitted={};else if(s.emitted[l])return;s.emitted[l]=!0,Zs(c,s,6,i)}}const Qk=new WeakMap;function y0(s,e,t=!1){const n=t?Qk:e.emitsCache,i=n.get(s);if(i!==void 0)return i;const r=s.emits;let o={},l=!1;if(!Ke(s)){const a=c=>{const u=y0(c,e,!0);u&&(l=!0,Ut(o,u))};!t&&e.mixins.length&&e.mixins.forEach(a),s.extends&&a(s.extends),s.mixins&&s.mixins.forEach(a)}return!r&&!l?(pt(s)&&n.set(s,null),null):(Be(r)?r.forEach(a=>o[a]=null):Ut(o,r),pt(s)&&n.set(s,o),o)}function eu(s,e){return!s||!Wa(e)?!1:(e=e.slice(2).replace(/Once$/,""),ut(s,e[0].toLowerCase()+e.slice(1))||ut(s,Ki(e))||ut(s,e))}function Lh(s){const{type:e,vnode:t,proxy:n,withProxy:i,propsOptions:[r],slots:o,attrs:l,emit:a,render:c,renderCache:u,props:d,data:h,setupState:p,ctx:y,inheritAttrs:b}=s,x=ya(s);let g,j;try{if(t.shapeFlag&4){const U=i||n,I=U;g=pn(c.call(I,U,u,d,p,h,y)),j=l}else{const U=e;g=pn(U.length>1?U(d,{attrs:l,slots:o,emit:a}):U(d,null)),j=e.props?l:Yk(l)}}catch(U){bo.length=0,Ya(U,s,1),g=S(is)}let B=g;if(j&&b!==!1){const U=Object.keys(j),{shapeFlag:I}=B;U.length&&I&7&&(r&&U.some(Rd)&&(j=Xk(j,r)),B=ui(B,j,!1,!0))}return t.dirs&&(B=ui(B,null,!1,!0),B.dirs=B.dirs?B.dirs.concat(t.dirs):t.dirs),t.transition&&jo(B,t.transition),g=B,ya(x),g}const Yk=s=>{let e;for(const t in s)(t==="class"||t==="style"||Wa(t))&&((e||(e={}))[t]=s[t]);return e},Xk=(s,e)=>{const t={};for(const n in s)(!Rd(n)||!(n.slice(9)in e))&&(t[n]=s[n]);return t};function Zk(s,e,t){const{props:n,children:i,component:r}=s,{props:o,children:l,patchFlag:a}=e,c=r.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&a>=0){if(a&1024)return!0;if(a&16)return n?Vh(n,o,c):!!o;if(a&8){const u=e.dynamicProps;for(let d=0;d<u.length;d++){const h=u[d];if(o[h]!==n[h]&&!eu(c,h))return!0}}}else return(i||l)&&(!l||!l.$stable)?!0:n===o?!1:n?o?Vh(n,o,c):!0:!!o;return!1}function Vh(s,e,t){const n=Object.keys(e);if(n.length!==Object.keys(s).length)return!0;for(let i=0;i<n.length;i++){const r=n[i];if(e[r]!==s[r]&&!eu(t,r))return!0}return!1}function ex({vnode:s,parent:e},t){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===s&&(n.el=s.el),n===s)(s=e.vnode).el=t,e=e.parent;else break}}const b0=s=>s.__isSuspense;function tx(s,e){e&&e.pendingBranch?Be(s)?e.effects.push(...s):e.effects.push(s):uk(s)}const be=Symbol.for("v-fgt"),tu=Symbol.for("v-txt"),is=Symbol.for("v-cmt"),sa=Symbol.for("v-stc"),bo=[];let Ps=null;function v(s=!1){bo.push(Ps=s?null:[])}function sx(){bo.pop(),Ps=bo[bo.length-1]||null}let Oo=1;function xa(s,e=!1){Oo+=s,s<0&&Ps&&e&&(Ps.hasOnce=!0)}function k0(s){return s.dynamicChildren=Oo>0?Ps||dr:null,sx(),Oo>0&&Ps&&Ps.push(s),s}function k(s,e,t,n,i,r){return k0(f(s,e,t,n,i,r,!0))}function Ae(s,e,t,n,i){return k0(S(s,e,t,n,i,!0))}function Po(s){return s?s.__v_isVNode===!0:!1}function Di(s,e){return s.type===e.type&&s.key===e.key}const x0=({key:s})=>s??null,na=({ref:s,ref_key:e,ref_for:t})=>(typeof s=="number"&&(s=""+s),s!=null?Et(s)||ls(s)||Ke(s)?{i:Jt,r:s,k:e,f:!!t}:s:null);function f(s,e=null,t=null,n=0,i=null,r=s===be?0:1,o=!1,l=!1){const a={__v_isVNode:!0,__v_skip:!0,type:s,props:e,key:e&&x0(e),ref:e&&na(e),scopeId:Im,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Jt};return l?(Qd(a,t),r&128&&s.normalize(a)):t&&(a.shapeFlag|=Et(t)?8:16),Oo>0&&!o&&Ps&&(a.patchFlag>0||r&6)&&a.patchFlag!==32&&Ps.push(a),a}const S=nx;function nx(s,e=null,t=null,n=0,i=null,r=!1){if((!s||s===t0)&&(s=is),Po(s)){const l=ui(s,e,!0);return t&&Qd(l,t),Oo>0&&!r&&Ps&&(l.shapeFlag&6?Ps[Ps.indexOf(s)]=l:Ps.push(l)),l.patchFlag=-2,l}if(hx(s)&&(s=s.__vccOpts),e){e=ix(e);let{class:l,style:a}=e;l&&!Et(l)&&(e.class=xe(l)),pt(a)&&(qd(a)&&!Be(a)&&(a=Ut({},a)),e.style=hr(a))}const o=Et(s)?1:b0(s)?128:Fm(s)?64:pt(s)?4:Ke(s)?2:0;return f(s,e,t,n,i,o,r,!0)}function ix(s){return s?qd(s)||u0(s)?Ut({},s):s:null}function ui(s,e,t=!1,n=!1){const{props:i,ref:r,patchFlag:o,children:l,transition:a}=s,c=e?rx(i||{},e):i,u={__v_isVNode:!0,__v_skip:!0,type:s.type,props:c,key:c&&x0(c),ref:e&&e.ref?t&&r?Be(r)?r.concat(na(e)):[r,na(e)]:na(e):r,scopeId:s.scopeId,slotScopeIds:s.slotScopeIds,children:l,target:s.target,targetStart:s.targetStart,targetAnchor:s.targetAnchor,staticCount:s.staticCount,shapeFlag:s.shapeFlag,patchFlag:e&&s.type!==be?o===-1?16:o|16:o,dynamicProps:s.dynamicProps,dynamicChildren:s.dynamicChildren,appContext:s.appContext,dirs:s.dirs,transition:a,component:s.component,suspense:s.suspense,ssContent:s.ssContent&&ui(s.ssContent),ssFallback:s.ssFallback&&ui(s.ssFallback),placeholder:s.placeholder,el:s.el,anchor:s.anchor,ctx:s.ctx,ce:s.ce};return a&&n&&jo(u,a.clone(u)),u}function de(s=" ",e=0){return S(tu,null,s,e)}function Vr(s,e){const t=S(sa,null,s);return t.staticCount=e,t}function H(s="",e=!1){return e?(v(),Ae(is,null,s)):S(is,null,s)}function pn(s){return s==null||typeof s=="boolean"?S(is):Be(s)?S(be,null,s.slice()):Po(s)?Qn(s):S(tu,null,String(s))}function Qn(s){return s.el===null&&s.patchFlag!==-1||s.memo?s:ui(s)}function Qd(s,e){let t=0;const{shapeFlag:n}=s;if(e==null)e=null;else if(Be(e))t=16;else if(typeof e=="object")if(n&65){const i=e.default;i&&(i._c&&(i._d=!1),Qd(s,i()),i._c&&(i._d=!0));return}else{t=32;const i=e._;!i&&!u0(e)?e._ctx=Jt:i===3&&Jt&&(Jt.slots._===1?e._=1:(e._=2,s.patchFlag|=1024))}else Ke(e)?(e={default:e,_ctx:Jt},t=32):(e=String(e),n&64?(t=16,e=[de(e)]):t=8);s.children=e,s.shapeFlag|=t}function rx(...s){const e={};for(let t=0;t<s.length;t++){const n=s[t];for(const i in n)if(i==="class")e.class!==n.class&&(e.class=xe([e.class,n.class]));else if(i==="style")e.style=hr([e.style,n.style]);else if(Wa(i)){const r=e[i],o=n[i];o&&r!==o&&!(Be(r)&&r.includes(o))&&(e[i]=r?[].concat(r,o):o)}else i!==""&&(e[i]=n[i])}return e}function an(s,e,t,n=null){Zs(s,e,7,[t,n])}const ox=o0();let lx=0;function ax(s,e,t){const n=s.type,i=(e?e.appContext:s.appContext)||ox,r={uid:lx++,vnode:s,type:n,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new P1(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:d0(n,i),emitsOptions:y0(n,i),emit:null,emitted:null,propsDefaults:kt,inheritAttrs:n.inheritAttrs,ctx:kt,data:kt,props:kt,attrs:kt,slots:kt,refs:kt,setupState:kt,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=Jk.bind(null,r),s.ce&&s.ce(r),r}let rs=null;const Yd=()=>rs||Jt;let wa,Tc;{const s=Ja(),e=(t,n)=>{let i;return(i=s[t])||(i=s[t]=[]),i.push(n),r=>{i.length>1?i.forEach(o=>o(r)):i[0](r)}};wa=e("__VUE_INSTANCE_SETTERS__",t=>rs=t),Tc=e("__VUE_SSR_SETTERS__",t=>$o=t)}const il=s=>{const e=rs;return wa(s),s.scope.on(),()=>{s.scope.off(),wa(e)}},Bh=()=>{rs&&rs.scope.off(),wa(null)};function w0(s){return s.vnode.shapeFlag&4}let $o=!1;function ux(s,e=!1,t=!1){e&&Tc(e);const{props:n,children:i}=s.vnode,r=w0(s);Rk(s,n,r,e),Ik(s,i,t||e);const o=r?cx(s,e):void 0;return e&&Tc(!1),o}function cx(s,e){const t=s.type;s.accessCache=Object.create(null),s.proxy=new Proxy(s.ctx,_k);const{setup:n}=t;if(n){Vn();const i=s.setupContext=n.length>1?C0(s):null,r=il(s),o=nl(n,s,0,[s.props,i]),l=dm(o);if(Bn(),r(),(l||s.sp)&&!mr(s)&&Ym(s),l){if(o.then(Bh,Bh),e)return o.then(a=>{Ih(s,a)}).catch(a=>{Ya(a,s,0)});s.asyncDep=o}else Ih(s,o)}else S0(s)}function Ih(s,e,t){Ke(e)?s.type.__ssrInlineRender?s.ssrRender=e:s.render=e:pt(e)&&(s.setupState=$m(e)),S0(s)}function S0(s,e,t){const n=s.type;s.render||(s.render=n.render||kn);{const i=il(s);Vn();try{Dk(s)}finally{Bn(),i()}}}const dx={get(s,e){return ss(s,"get",""),s[e]}};function C0(s){const e=t=>{s.exposed=t||{}};return{attrs:new Proxy(s.attrs,dx),slots:s.slots,emit:s.emit,expose:e}}function su(s){return s.exposed?s.exposeProxy||(s.exposeProxy=new Proxy($m(Z1(s.exposed)),{get(e,t){if(t in e)return e[t];if(t in vo)return vo[t](s)},has(e,t){return t in e||t in vo}})):s.proxy}function fx(s,e=!0){return Ke(s)?s.displayName||s.name:s.name||e&&s.__name}function hx(s){return Ke(s)&&"__vccOpts"in s}const F=(s,e)=>ik(s,e,$o);function Rt(s,e,t){try{xa(-1);const n=arguments.length;return n===2?pt(e)&&!Be(e)?Po(e)?S(s,null,[e]):S(s,e):S(s,null,e):(n>3?t=Array.prototype.slice.call(arguments,2):n===3&&Po(t)&&(t=[t]),S(s,e,t))}finally{xa(1)}}const px="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let jc;const Nh=typeof window<"u"&&window.trustedTypes;if(Nh)try{jc=Nh.createPolicy("vue",{createHTML:s=>s})}catch{}const _0=jc?s=>jc.createHTML(s):s=>s,gx="http://www.w3.org/2000/svg",mx="http://www.w3.org/1998/Math/MathML",En=typeof document<"u"?document:null,Fh=En&&En.createElement("template"),vx={insert:(s,e,t)=>{e.insertBefore(s,t||null)},remove:s=>{const e=s.parentNode;e&&e.removeChild(s)},createElement:(s,e,t,n)=>{const i=e==="svg"?En.createElementNS(gx,s):e==="mathml"?En.createElementNS(mx,s):t?En.createElement(s,{is:t}):En.createElement(s);return s==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:s=>En.createTextNode(s),createComment:s=>En.createComment(s),setText:(s,e)=>{s.nodeValue=e},setElementText:(s,e)=>{s.textContent=e},parentNode:s=>s.parentNode,nextSibling:s=>s.nextSibling,querySelector:s=>En.querySelector(s),setScopeId(s,e){s.setAttribute(e,"")},insertStaticContent(s,e,t,n,i,r){const o=t?t.previousSibling:e.lastChild;if(i&&(i===r||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),t),!(i===r||!(i=i.nextSibling)););else{Fh.innerHTML=_0(n==="svg"?`<svg>${s}</svg>`:n==="mathml"?`<math>${s}</math>`:s);const l=Fh.content;if(n==="svg"||n==="mathml"){const a=l.firstChild;for(;a.firstChild;)l.appendChild(a.firstChild);l.removeChild(a)}e.insertBefore(l,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},Kn="transition",Yr="animation",Ro=Symbol("_vtc"),A0={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},yx=Ut({},qm,A0),bx=s=>(s.displayName="Transition",s.props=yx,s),Xd=bx((s,{slots:e})=>Rt(hk,kx(s),e)),wi=(s,e=[])=>{Be(s)?s.forEach(t=>t(...e)):s&&s(...e)},zh=s=>s?Be(s)?s.some(e=>e.length>1):s.length>1:!1;function kx(s){const e={};for(const N in s)N in A0||(e[N]=s[N]);if(s.css===!1)return e;const{name:t="v",type:n,duration:i,enterFromClass:r=`${t}-enter-from`,enterActiveClass:o=`${t}-enter-active`,enterToClass:l=`${t}-enter-to`,appearFromClass:a=r,appearActiveClass:c=o,appearToClass:u=l,leaveFromClass:d=`${t}-leave-from`,leaveActiveClass:h=`${t}-leave-active`,leaveToClass:p=`${t}-leave-to`}=s,y=xx(i),b=y&&y[0],x=y&&y[1],{onBeforeEnter:g,onEnter:j,onEnterCancelled:B,onLeave:U,onLeaveCancelled:I,onBeforeAppear:L=g,onAppear:_=j,onAppearCancelled:R=B}=e,W=(N,le,ee,V)=>{N._enterCancelled=V,Si(N,le?u:l),Si(N,le?c:o),ee&&ee()},ce=(N,le)=>{N._isLeaving=!1,Si(N,d),Si(N,p),Si(N,h),le&&le()},ne=N=>(le,ee)=>{const V=N?_:j,G=()=>W(le,N,ee);wi(V,[le,G]),Uh(()=>{Si(le,N?a:r),An(le,N?u:l),zh(V)||Hh(le,n,b,G)})};return Ut(e,{onBeforeEnter(N){wi(g,[N]),An(N,r),An(N,o)},onBeforeAppear(N){wi(L,[N]),An(N,a),An(N,c)},onEnter:ne(!1),onAppear:ne(!0),onLeave(N,le){N._isLeaving=!0;const ee=()=>ce(N,le);An(N,d),N._enterCancelled?(An(N,h),Kh(N)):(Kh(N),An(N,h)),Uh(()=>{N._isLeaving&&(Si(N,d),An(N,p),zh(U)||Hh(N,n,x,ee))}),wi(U,[N,ee])},onEnterCancelled(N){W(N,!1,void 0,!0),wi(B,[N])},onAppearCancelled(N){W(N,!0,void 0,!0),wi(R,[N])},onLeaveCancelled(N){ce(N),wi(I,[N])}})}function xx(s){if(s==null)return null;if(pt(s))return[Vu(s.enter),Vu(s.leave)];{const e=Vu(s);return[e,e]}}function Vu(s){return _1(s)}function An(s,e){e.split(/\s+/).forEach(t=>t&&s.classList.add(t)),(s[Ro]||(s[Ro]=new Set)).add(e)}function Si(s,e){e.split(/\s+/).forEach(n=>n&&s.classList.remove(n));const t=s[Ro];t&&(t.delete(e),t.size||(s[Ro]=void 0))}function Uh(s){requestAnimationFrame(()=>{requestAnimationFrame(s)})}let wx=0;function Hh(s,e,t,n){const i=s._endId=++wx,r=()=>{i===s._endId&&n()};if(t!=null)return setTimeout(r,t);const{type:o,timeout:l,propCount:a}=Sx(s,e);if(!o)return n();const c=o+"end";let u=0;const d=()=>{s.removeEventListener(c,h),r()},h=p=>{p.target===s&&++u>=a&&d()};setTimeout(()=>{u<a&&d()},l+1),s.addEventListener(c,h)}function Sx(s,e){const t=window.getComputedStyle(s),n=y=>(t[y]||"").split(", "),i=n(`${Kn}Delay`),r=n(`${Kn}Duration`),o=qh(i,r),l=n(`${Yr}Delay`),a=n(`${Yr}Duration`),c=qh(l,a);let u=null,d=0,h=0;e===Kn?o>0&&(u=Kn,d=o,h=r.length):e===Yr?c>0&&(u=Yr,d=c,h=a.length):(d=Math.max(o,c),u=d>0?o>c?Kn:Yr:null,h=u?u===Kn?r.length:a.length:0);const p=u===Kn&&/\b(?:transform|all)(?:,|$)/.test(n(`${Kn}Property`).toString());return{type:u,timeout:d,propCount:h,hasTransform:p}}function qh(s,e){for(;s.length<e.length;)s=s.concat(s);return Math.max(...e.map((t,n)=>Wh(t)+Wh(s[n])))}function Wh(s){return s==="auto"?0:Number(s.slice(0,-1).replace(",","."))*1e3}function Kh(s){return(s?s.ownerDocument:document).body.offsetHeight}function Cx(s,e,t){const n=s[Ro];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?s.removeAttribute("class"):t?s.setAttribute("class",e):s.className=e}const Sa=Symbol("_vod"),M0=Symbol("_vsh"),tt={name:"show",beforeMount(s,{value:e},{transition:t}){s[Sa]=s.style.display==="none"?"":s.style.display,t&&e?t.beforeEnter(s):Xr(s,e)},mounted(s,{value:e},{transition:t}){t&&e&&t.enter(s)},updated(s,{value:e,oldValue:t},{transition:n}){!e!=!t&&(n?e?(n.beforeEnter(s),Xr(s,!0),n.enter(s)):n.leave(s,()=>{Xr(s,!1)}):Xr(s,e))},beforeUnmount(s,{value:e}){Xr(s,e)}};function Xr(s,e){s.style.display=e?s[Sa]:"none",s[M0]=!e}const _x=Symbol(""),Ax=/(?:^|;)\s*display\s*:/;function Mx(s,e,t){const n=s.style,i=Et(t);let r=!1;if(t&&!i){if(e)if(Et(e))for(const o of e.split(";")){const l=o.slice(0,o.indexOf(":")).trim();t[l]==null&&ia(n,l,"")}else for(const o in e)t[o]==null&&ia(n,o,"");for(const o in t)o==="display"&&(r=!0),ia(n,o,t[o])}else if(i){if(e!==t){const o=n[_x];o&&(t+=";"+o),n.cssText=t,r=Ax.test(t)}}else e&&s.removeAttribute("style");Sa in s&&(s[Sa]=r?n.display:"",s[M0]&&(n.display="none"))}const Gh=/\s*!important$/;function ia(s,e,t){if(Be(t))t.forEach(n=>ia(s,e,n));else if(t==null&&(t=""),e.startsWith("--"))s.setProperty(e,t);else{const n=Dx(s,e);Gh.test(t)?s.setProperty(Ki(n),t.replace(Gh,""),"important"):s[n]=t}}const Jh=["Webkit","Moz","ms"],Bu={};function Dx(s,e){const t=Bu[e];if(t)return t;let n=Ws(e);if(n!=="filter"&&n in s)return Bu[e]=n;n=Ga(n);for(let i=0;i<Jh.length;i++){const r=Jh[i]+n;if(r in s)return Bu[e]=r}return e}const Qh="http://www.w3.org/1999/xlink";function Yh(s,e,t,n,i,r=j1(e)){n&&e.startsWith("xlink:")?t==null?s.removeAttributeNS(Qh,e.slice(6,e.length)):s.setAttributeNS(Qh,e,t):t==null||r&&!gm(t)?s.removeAttribute(e):s.setAttribute(e,r?"":Xs(t)?String(t):t)}function Xh(s,e,t,n,i){if(e==="innerHTML"||e==="textContent"){t!=null&&(s[e]=e==="innerHTML"?_0(t):t);return}const r=s.tagName;if(e==="value"&&r!=="PROGRESS"&&!r.includes("-")){const l=r==="OPTION"?s.getAttribute("value")||"":s.value,a=t==null?s.type==="checkbox"?"on":"":String(t);(l!==a||!("_value"in s))&&(s.value=a),t==null&&s.removeAttribute(e),s._value=t;return}let o=!1;if(t===""||t==null){const l=typeof s[e];l==="boolean"?t=gm(t):t==null&&l==="string"?(t="",o=!0):l==="number"&&(t=0,o=!0)}try{s[e]=t}catch{}o&&s.removeAttribute(i||e)}function Pn(s,e,t,n){s.addEventListener(e,t,n)}function Ex(s,e,t,n){s.removeEventListener(e,t,n)}const Zh=Symbol("_vei");function Tx(s,e,t,n,i=null){const r=s[Zh]||(s[Zh]={}),o=r[e];if(n&&o)o.value=n;else{const[l,a]=jx(e);if(n){const c=r[e]=$x(n,i);Pn(s,l,c,a)}else o&&(Ex(s,l,o,a),r[e]=void 0)}}const ep=/(?:Once|Passive|Capture)$/;function jx(s){let e;if(ep.test(s)){e={};let n;for(;n=s.match(ep);)s=s.slice(0,s.length-n[0].length),e[n[0].toLowerCase()]=!0}return[s[2]===":"?s.slice(3):Ki(s.slice(2)),e]}let Iu=0;const Ox=Promise.resolve(),Px=()=>Iu||(Ox.then(()=>Iu=0),Iu=Date.now());function $x(s,e){const t=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=t.attached)return;Zs(Rx(n,t.value),e,5,[n])};return t.value=s,t.attached=Px(),t}function Rx(s,e){if(Be(e)){const t=s.stopImmediatePropagation;return s.stopImmediatePropagation=()=>{t.call(s),s._stopped=!0},e.map(n=>i=>!i._stopped&&n&&n(i))}else return e}const tp=s=>s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&s.charCodeAt(2)>96&&s.charCodeAt(2)<123,Lx=(s,e,t,n,i,r)=>{const o=i==="svg";e==="class"?Cx(s,n,o):e==="style"?Mx(s,t,n):Wa(e)?Rd(e)||Tx(s,e,t,n,r):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Vx(s,e,n,o))?(Xh(s,e,n),!s.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Yh(s,e,n,o,r,e!=="value")):s._isVueCE&&(/[A-Z]/.test(e)||!Et(n))?Xh(s,Ws(e),n,r,e):(e==="true-value"?s._trueValue=n:e==="false-value"&&(s._falseValue=n),Yh(s,e,n,o))};function Vx(s,e,t,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in s&&tp(e)&&Ke(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&s.tagName==="INPUT"||e==="type"&&s.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=s.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return tp(e)&&Et(t)?!1:e in s}const ci=s=>{const e=s.props["onUpdate:modelValue"]||!1;return Be(e)?t=>ea(e,t):e};function Bx(s){s.target.composing=!0}function sp(s){const e=s.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Us=Symbol("_assign"),Ii={created(s,{modifiers:{lazy:e,trim:t,number:n}},i){s[Us]=ci(i);const r=n||i.props&&i.props.type==="number";Pn(s,e?"change":"input",o=>{if(o.target.composing)return;let l=s.value;t&&(l=l.trim()),r&&(l=pa(l)),s[Us](l)}),t&&Pn(s,"change",()=>{s.value=s.value.trim()}),e||(Pn(s,"compositionstart",Bx),Pn(s,"compositionend",sp),Pn(s,"change",sp))},mounted(s,{value:e}){s.value=e??""},beforeUpdate(s,{value:e,oldValue:t,modifiers:{lazy:n,trim:i,number:r}},o){if(s[Us]=ci(o),s.composing)return;const l=(r||s.type==="number")&&!/^0\d/.test(s.value)?pa(s.value):s.value,a=e??"";l!==a&&(document.activeElement===s&&s.type!=="range"&&(n&&e===t||i&&s.value.trim()===a)||(s.value=a))}},Ix={deep:!0,created(s,e,t){s[Us]=ci(t),Pn(s,"change",()=>{const n=s._modelValue,i=Cr(s),r=s.checked,o=s[Us];if(Be(n)){const l=Bd(n,i),a=l!==-1;if(r&&!a)o(n.concat(i));else if(!r&&a){const c=[...n];c.splice(l,1),o(c)}}else if(Rr(n)){const l=new Set(n);r?l.add(i):l.delete(i),o(l)}else o(D0(s,r))})},mounted:np,beforeUpdate(s,e,t){s[Us]=ci(t),np(s,e,t)}};function np(s,{value:e,oldValue:t},n){s._modelValue=e;let i;if(Be(e))i=Bd(e,n.props.value)>-1;else if(Rr(e))i=e.has(n.props.value);else{if(e===t)return;i=Bi(e,D0(s,!0))}s.checked!==i&&(s.checked=i)}const Oc={created(s,{value:e},t){s.checked=Bi(e,t.props.value),s[Us]=ci(t),Pn(s,"change",()=>{s[Us](Cr(s))})},beforeUpdate(s,{value:e,oldValue:t},n){s[Us]=ci(n),e!==t&&(s.checked=Bi(e,n.props.value))}},Pc={deep:!0,created(s,{value:e,modifiers:{number:t}},n){const i=Rr(e);Pn(s,"change",()=>{const r=Array.prototype.filter.call(s.options,o=>o.selected).map(o=>t?pa(Cr(o)):Cr(o));s[Us](s.multiple?i?new Set(r):r:r[0]),s._assigning=!0,Bs(()=>{s._assigning=!1})}),s[Us]=ci(n)},mounted(s,{value:e}){ip(s,e)},beforeUpdate(s,e,t){s[Us]=ci(t)},updated(s,{value:e}){s._assigning||ip(s,e)}};function ip(s,e){const t=s.multiple,n=Be(e);if(!(t&&!n&&!Rr(e))){for(let i=0,r=s.options.length;i<r;i++){const o=s.options[i],l=Cr(o);if(t)if(n){const a=typeof l;a==="string"||a==="number"?o.selected=e.some(c=>String(c)===String(l)):o.selected=Bd(e,l)>-1}else o.selected=e.has(l);else if(Bi(Cr(o),e)){s.selectedIndex!==i&&(s.selectedIndex=i);return}}!t&&s.selectedIndex!==-1&&(s.selectedIndex=-1)}}function Cr(s){return"_value"in s?s._value:s.value}function D0(s,e){const t=e?"_trueValue":"_falseValue";return t in s?s[t]:e}const Nx={created(s,e,t){El(s,e,t,null,"created")},mounted(s,e,t){El(s,e,t,null,"mounted")},beforeUpdate(s,e,t,n){El(s,e,t,n,"beforeUpdate")},updated(s,e,t,n){El(s,e,t,n,"updated")}};function Fx(s,e){switch(s){case"SELECT":return Pc;case"TEXTAREA":return Ii;default:switch(e){case"checkbox":return Ix;case"radio":return Oc;default:return Ii}}}function El(s,e,t,n,i){const o=Fx(s.tagName,t.props&&t.props.type)[i];o&&o(s,e,t,n)}const zx=["ctrl","shift","alt","meta"],Ux={stop:s=>s.stopPropagation(),prevent:s=>s.preventDefault(),self:s=>s.target!==s.currentTarget,ctrl:s=>!s.ctrlKey,shift:s=>!s.shiftKey,alt:s=>!s.altKey,meta:s=>!s.metaKey,left:s=>"button"in s&&s.button!==0,middle:s=>"button"in s&&s.button!==1,right:s=>"button"in s&&s.button!==2,exact:(s,e)=>zx.some(t=>s[`${t}Key`]&&!e.includes(t))},Pt=(s,e)=>{const t=s._withMods||(s._withMods={}),n=e.join(".");return t[n]||(t[n]=((i,...r)=>{for(let o=0;o<e.length;o++){const l=Ux[e[o]];if(l&&l(i,e))return}return s(i,...r)}))},Hx=Ut({patchProp:Lx},vx);let rp;function qx(){return rp||(rp=Fk(Hx))}const Wx=((...s)=>{const e=qx().createApp(...s),{mount:t}=e;return e.mount=n=>{const i=Gx(n);if(!i)return;const r=e._component;!Ke(r)&&!r.render&&!r.template&&(r.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=t(i,!1,Kx(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e});function Kx(s){if(s instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&s instanceof MathMLElement)return"mathml"}function Gx(s){return Et(s)?document.querySelector(s):s}const Jx="/framework-logo.png";/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const nr=typeof document<"u";function E0(s){return typeof s=="object"||"displayName"in s||"props"in s||"__vccOpts"in s}function Qx(s){return s.__esModule||s[Symbol.toStringTag]==="Module"||s.default&&E0(s.default)}const at=Object.assign;function Nu(s,e){const t={};for(const n in e){const i=e[n];t[n]=en(i)?i.map(s):s(i)}return t}const ko=()=>{},en=Array.isArray;function op(s,e){const t={};for(const n in s)t[n]=n in e?e[n]:s[n];return t}const T0=/#/g,Yx=/&/g,Xx=/\//g,Zx=/=/g,ew=/\?/g,j0=/\+/g,tw=/%5B/g,sw=/%5D/g,O0=/%5E/g,nw=/%60/g,P0=/%7B/g,iw=/%7C/g,$0=/%7D/g,rw=/%20/g;function Zd(s){return s==null?"":encodeURI(""+s).replace(iw,"|").replace(tw,"[").replace(sw,"]")}function ow(s){return Zd(s).replace(P0,"{").replace($0,"}").replace(O0,"^")}function $c(s){return Zd(s).replace(j0,"%2B").replace(rw,"+").replace(T0,"%23").replace(Yx,"%26").replace(nw,"`").replace(P0,"{").replace($0,"}").replace(O0,"^")}function lw(s){return $c(s).replace(Zx,"%3D")}function aw(s){return Zd(s).replace(T0,"%23").replace(ew,"%3F")}function uw(s){return aw(s).replace(Xx,"%2F")}function Lo(s){if(s==null)return null;try{return decodeURIComponent(""+s)}catch{}return""+s}const cw=/\/$/,dw=s=>s.replace(cw,"");function Fu(s,e,t="/"){let n,i={},r="",o="";const l=e.indexOf("#");let a=e.indexOf("?");return a=l>=0&&a>l?-1:a,a>=0&&(n=e.slice(0,a),r=e.slice(a,l>0?l:e.length),i=s(r.slice(1))),l>=0&&(n=n||e.slice(0,l),o=e.slice(l,e.length)),n=gw(n??e,t),{fullPath:n+r+o,path:n,query:i,hash:Lo(o)}}function fw(s,e){const t=e.query?s(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function lp(s,e){return!e||!s.toLowerCase().startsWith(e.toLowerCase())?s:s.slice(e.length)||"/"}function hw(s,e,t){const n=e.matched.length-1,i=t.matched.length-1;return n>-1&&n===i&&_r(e.matched[n],t.matched[i])&&R0(e.params,t.params)&&s(e.query)===s(t.query)&&e.hash===t.hash}function _r(s,e){return(s.aliasOf||s)===(e.aliasOf||e)}function R0(s,e){if(Object.keys(s).length!==Object.keys(e).length)return!1;for(const t in s)if(!pw(s[t],e[t]))return!1;return!0}function pw(s,e){return en(s)?ap(s,e):en(e)?ap(e,s):s===e}function ap(s,e){return en(e)?s.length===e.length&&s.every((t,n)=>t===e[n]):s.length===1&&s[0]===e}function gw(s,e){if(s.startsWith("/"))return s;if(!s)return e;const t=e.split("/"),n=s.split("/"),i=n[n.length-1];(i===".."||i===".")&&n.push("");let r=t.length-1,o,l;for(o=0;o<n.length;o++)if(l=n[o],l!==".")if(l==="..")r>1&&r--;else break;return t.slice(0,r).join("/")+"/"+n.slice(o).join("/")}const Gn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Rc=(function(s){return s.pop="pop",s.push="push",s})({}),zu=(function(s){return s.back="back",s.forward="forward",s.unknown="",s})({});function mw(s){if(!s)if(nr){const e=document.querySelector("base");s=e&&e.getAttribute("href")||"/",s=s.replace(/^\w+:\/\/[^\/]+/,"")}else s="/";return s[0]!=="/"&&s[0]!=="#"&&(s="/"+s),dw(s)}const vw=/^[^#]+#/;function yw(s,e){return s.replace(vw,"#")+e}function bw(s,e){const t=document.documentElement.getBoundingClientRect(),n=s.getBoundingClientRect();return{behavior:e.behavior,left:n.left-t.left-(e.left||0),top:n.top-t.top-(e.top||0)}}const nu=()=>({left:window.scrollX,top:window.scrollY});function kw(s){let e;if("el"in s){const t=s.el,n=typeof t=="string"&&t.startsWith("#"),i=typeof t=="string"?n?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!i)return;e=bw(i,s)}else e=s;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function up(s,e){return(history.state?history.state.position-e:-1)+s}const Lc=new Map;function xw(s,e){Lc.set(s,e)}function ww(s){const e=Lc.get(s);return Lc.delete(s),e}function Sw(s){return typeof s=="string"||s&&typeof s=="object"}function L0(s){return typeof s=="string"||typeof s=="symbol"}let jt=(function(s){return s[s.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",s[s.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",s[s.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",s[s.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",s[s.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",s})({});const V0=Symbol("");jt.MATCHER_NOT_FOUND+"",jt.NAVIGATION_GUARD_REDIRECT+"",jt.NAVIGATION_ABORTED+"",jt.NAVIGATION_CANCELLED+"",jt.NAVIGATION_DUPLICATED+"";function Ar(s,e){return at(new Error,{type:s,[V0]:!0},e)}function Mn(s,e){return s instanceof Error&&V0 in s&&(e==null||!!(s.type&e))}const Cw=["params","query","hash"];function _w(s){if(typeof s=="string")return s;if(s.path!=null)return s.path;const e={};for(const t of Cw)t in s&&(e[t]=s[t]);return JSON.stringify(e,null,2)}function Aw(s){const e={};if(s===""||s==="?")return e;const t=(s[0]==="?"?s.slice(1):s).split("&");for(let n=0;n<t.length;++n){const i=t[n].replace(j0," "),r=i.indexOf("="),o=Lo(r<0?i:i.slice(0,r)),l=r<0?null:Lo(i.slice(r+1));if(o in e){let a=e[o];en(a)||(a=e[o]=[a]),a.push(l)}else e[o]=l}return e}function cp(s){let e="";for(let t in s){const n=s[t];if(t=lw(t),n==null){n!==void 0&&(e+=(e.length?"&":"")+t);continue}(en(n)?n.map(i=>i&&$c(i)):[n&&$c(n)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+t,i!=null&&(e+="="+i))})}return e}function Mw(s){const e={};for(const t in s){const n=s[t];n!==void 0&&(e[t]=en(n)?n.map(i=>i==null?null:""+i):n==null?n:""+n)}return e}const Dw=Symbol(""),dp=Symbol(""),iu=Symbol(""),ef=Symbol(""),Vc=Symbol("");function Zr(){let s=[];function e(n){return s.push(n),()=>{const i=s.indexOf(n);i>-1&&s.splice(i,1)}}function t(){s=[]}return{add:e,list:()=>s.slice(),reset:t}}function Yn(s,e,t,n,i,r=o=>o()){const o=n&&(n.enterCallbacks[i]=n.enterCallbacks[i]||[]);return()=>new Promise((l,a)=>{const c=h=>{h===!1?a(Ar(jt.NAVIGATION_ABORTED,{from:t,to:e})):h instanceof Error?a(h):Sw(h)?a(Ar(jt.NAVIGATION_GUARD_REDIRECT,{from:e,to:h})):(o&&n.enterCallbacks[i]===o&&typeof h=="function"&&o.push(h),l())},u=r(()=>s.call(n&&n.instances[i],e,t,c));let d=Promise.resolve(u);s.length<3&&(d=d.then(c)),d.catch(h=>a(h))})}function Uu(s,e,t,n,i=r=>r()){const r=[];for(const o of s)for(const l in o.components){let a=o.components[l];if(!(e!=="beforeRouteEnter"&&!o.instances[l]))if(E0(a)){const c=(a.__vccOpts||a)[e];c&&r.push(Yn(c,t,n,o,l,i))}else{let c=a();r.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${l}" at "${o.path}"`);const d=Qx(u)?u.default:u;o.mods[l]=u,o.components[l]=d;const h=(d.__vccOpts||d)[e];return h&&Yn(h,t,n,o,l,i)()}))}}return r}function Ew(s,e){const t=[],n=[],i=[],r=Math.max(e.matched.length,s.matched.length);for(let o=0;o<r;o++){const l=e.matched[o];l&&(s.matched.find(c=>_r(c,l))?n.push(l):t.push(l));const a=s.matched[o];a&&(e.matched.find(c=>_r(c,a))||i.push(a))}return[t,n,i]}/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Tw=()=>location.protocol+"//"+location.host;function B0(s,e){const{pathname:t,search:n,hash:i}=e,r=s.indexOf("#");if(r>-1){let o=i.includes(s.slice(r))?s.slice(r).length:1,l=i.slice(o);return l[0]!=="/"&&(l="/"+l),lp(l,"")}return lp(t,s)+n+i}function jw(s,e,t,n){let i=[],r=[],o=null;const l=({state:h})=>{const p=B0(s,location),y=t.value,b=e.value;let x=0;if(h){if(t.value=p,e.value=h,o&&o===y){o=null;return}x=b?h.position-b.position:0}else n(p);i.forEach(g=>{g(t.value,y,{delta:x,type:Rc.pop,direction:x?x>0?zu.forward:zu.back:zu.unknown})})};function a(){o=t.value}function c(h){i.push(h);const p=()=>{const y=i.indexOf(h);y>-1&&i.splice(y,1)};return r.push(p),p}function u(){if(document.visibilityState==="hidden"){const{history:h}=window;if(!h.state)return;h.replaceState(at({},h.state,{scroll:nu()}),"")}}function d(){for(const h of r)h();r=[],window.removeEventListener("popstate",l),window.removeEventListener("pagehide",u),document.removeEventListener("visibilitychange",u)}return window.addEventListener("popstate",l),window.addEventListener("pagehide",u),document.addEventListener("visibilitychange",u),{pauseListeners:a,listen:c,destroy:d}}function fp(s,e,t,n=!1,i=!1){return{back:s,current:e,forward:t,replaced:n,position:window.history.length,scroll:i?nu():null}}function Ow(s){const{history:e,location:t}=window,n={value:B0(s,t)},i={value:e.state};i.value||r(n.value,{back:null,current:n.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function r(a,c,u){const d=s.indexOf("#"),h=d>-1?(t.host&&document.querySelector("base")?s:s.slice(d))+a:Tw()+s+a;try{e[u?"replaceState":"pushState"](c,"",h),i.value=c}catch(p){console.error(p),t[u?"replace":"assign"](h)}}function o(a,c){r(a,at({},e.state,fp(i.value.back,a,i.value.forward,!0),c,{position:i.value.position}),!0),n.value=a}function l(a,c){const u=at({},i.value,e.state,{forward:a,scroll:nu()});r(u.current,u,!0),r(a,at({},fp(n.value,a,null),{position:u.position+1},c),!1),n.value=a}return{location:n,state:i,push:l,replace:o}}function Pw(s){s=mw(s);const e=Ow(s),t=jw(s,e.state,e.location,e.replace);function n(r,o=!0){o||t.pauseListeners(),history.go(r)}const i=at({location:"",base:s,go:n,createHref:yw.bind(null,s)},e,t);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function $w(s){return s=location.host?s||location.pathname+location.search:"",s.includes("#")||(s+="#"),Pw(s)}let ji=(function(s){return s[s.Static=0]="Static",s[s.Param=1]="Param",s[s.Group=2]="Group",s})({});var It=(function(s){return s[s.Static=0]="Static",s[s.Param=1]="Param",s[s.ParamRegExp=2]="ParamRegExp",s[s.ParamRegExpEnd=3]="ParamRegExpEnd",s[s.EscapeNext=4]="EscapeNext",s})(It||{});const Rw={type:ji.Static,value:""},Lw=/[a-zA-Z0-9_]/;function Vw(s){if(!s)return[[]];if(s==="/")return[[Rw]];if(!s.startsWith("/"))throw new Error(`Invalid path "${s}"`);function e(p){throw new Error(`ERR (${t})/"${c}": ${p}`)}let t=It.Static,n=t;const i=[];let r;function o(){r&&i.push(r),r=[]}let l=0,a,c="",u="";function d(){c&&(t===It.Static?r.push({type:ji.Static,value:c}):t===It.Param||t===It.ParamRegExp||t===It.ParamRegExpEnd?(r.length>1&&(a==="*"||a==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),r.push({type:ji.Param,value:c,regexp:u,repeatable:a==="*"||a==="+",optional:a==="*"||a==="?"})):e("Invalid state to consume buffer"),c="")}function h(){c+=a}for(;l<s.length;){if(a=s[l++],a==="\\"&&t!==It.ParamRegExp){n=t,t=It.EscapeNext;continue}switch(t){case It.Static:a==="/"?(c&&d(),o()):a===":"?(d(),t=It.Param):h();break;case It.EscapeNext:h(),t=n;break;case It.Param:a==="("?t=It.ParamRegExp:Lw.test(a)?h():(d(),t=It.Static,a!=="*"&&a!=="?"&&a!=="+"&&l--);break;case It.ParamRegExp:a===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+a:t=It.ParamRegExpEnd:u+=a;break;case It.ParamRegExpEnd:d(),t=It.Static,a!=="*"&&a!=="?"&&a!=="+"&&l--,u="";break;default:e("Unknown state");break}}return t===It.ParamRegExp&&e(`Unfinished custom RegExp for param "${c}"`),d(),o(),i}const hp="[^/]+?",Bw={sensitive:!1,strict:!1,start:!0,end:!0};var ps=(function(s){return s[s._multiplier=10]="_multiplier",s[s.Root=90]="Root",s[s.Segment=40]="Segment",s[s.SubSegment=30]="SubSegment",s[s.Static=40]="Static",s[s.Dynamic=20]="Dynamic",s[s.BonusCustomRegExp=10]="BonusCustomRegExp",s[s.BonusWildcard=-50]="BonusWildcard",s[s.BonusRepeatable=-20]="BonusRepeatable",s[s.BonusOptional=-8]="BonusOptional",s[s.BonusStrict=.7000000000000001]="BonusStrict",s[s.BonusCaseSensitive=.25]="BonusCaseSensitive",s})(ps||{});const Iw=/[.+*?^${}()[\]/\\]/g;function Nw(s,e){const t=at({},Bw,e),n=[];let i=t.start?"^":"";const r=[];for(const c of s){const u=c.length?[]:[ps.Root];t.strict&&!c.length&&(i+="/");for(let d=0;d<c.length;d++){const h=c[d];let p=ps.Segment+(t.sensitive?ps.BonusCaseSensitive:0);if(h.type===ji.Static)d||(i+="/"),i+=h.value.replace(Iw,"\\$&"),p+=ps.Static;else if(h.type===ji.Param){const{value:y,repeatable:b,optional:x,regexp:g}=h;r.push({name:y,repeatable:b,optional:x});const j=g||hp;if(j!==hp){p+=ps.BonusCustomRegExp;try{`${j}`}catch(U){throw new Error(`Invalid custom RegExp for param "${y}" (${j}): `+U.message)}}let B=b?`((?:${j})(?:/(?:${j}))*)`:`(${j})`;d||(B=x&&c.length<2?`(?:/${B})`:"/"+B),x&&(B+="?"),i+=B,p+=ps.Dynamic,x&&(p+=ps.BonusOptional),b&&(p+=ps.BonusRepeatable),j===".*"&&(p+=ps.BonusWildcard)}u.push(p)}n.push(u)}if(t.strict&&t.end){const c=n.length-1;n[c][n[c].length-1]+=ps.BonusStrict}t.strict||(i+="/?"),t.end?i+="$":t.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,t.sensitive?"":"i");function l(c){const u=c.match(o),d={};if(!u)return null;for(let h=1;h<u.length;h++){const p=u[h]||"",y=r[h-1];d[y.name]=p&&y.repeatable?p.split("/"):p}return d}function a(c){let u="",d=!1;for(const h of s){(!d||!u.endsWith("/"))&&(u+="/"),d=!1;for(const p of h)if(p.type===ji.Static)u+=p.value;else if(p.type===ji.Param){const{value:y,repeatable:b,optional:x}=p,g=y in c?c[y]:"";if(en(g)&&!b)throw new Error(`Provided param "${y}" is an array but it is not repeatable (* or + modifiers)`);const j=en(g)?g.join("/"):g;if(!j)if(x)h.length<2&&(u.endsWith("/")?u=u.slice(0,-1):d=!0);else throw new Error(`Missing required param "${y}"`);u+=j}}return u||"/"}return{re:o,score:n,keys:r,parse:l,stringify:a}}function Fw(s,e){let t=0;for(;t<s.length&&t<e.length;){const n=e[t]-s[t];if(n)return n;t++}return s.length<e.length?s.length===1&&s[0]===ps.Static+ps.Segment?-1:1:s.length>e.length?e.length===1&&e[0]===ps.Static+ps.Segment?1:-1:0}function I0(s,e){let t=0;const n=s.score,i=e.score;for(;t<n.length&&t<i.length;){const r=Fw(n[t],i[t]);if(r)return r;t++}if(Math.abs(i.length-n.length)===1){if(pp(n))return 1;if(pp(i))return-1}return i.length-n.length}function pp(s){const e=s[s.length-1];return s.length>0&&e[e.length-1]<0}const zw={strict:!1,end:!0,sensitive:!1};function Uw(s,e,t){const n=Nw(Vw(s.path),t),i=at(n,{record:s,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function Hw(s,e){const t=[],n=new Map;e=op(zw,e);function i(d){return n.get(d)}function r(d,h,p){const y=!p,b=mp(d);b.aliasOf=p&&p.record;const x=op(e,d),g=[b];if("alias"in d){const U=typeof d.alias=="string"?[d.alias]:d.alias;for(const I of U)g.push(mp(at({},b,{components:p?p.record.components:b.components,path:I,aliasOf:p?p.record:b})))}let j,B;for(const U of g){const{path:I}=U;if(h&&I[0]!=="/"){const L=h.record.path,_=L[L.length-1]==="/"?"":"/";U.path=h.record.path+(I&&_+I)}if(j=Uw(U,h,x),p?p.alias.push(j):(B=B||j,B!==j&&B.alias.push(j),y&&d.name&&!vp(j)&&o(d.name)),N0(j)&&a(j),b.children){const L=b.children;for(let _=0;_<L.length;_++)r(L[_],j,p&&p.children[_])}p=p||j}return B?()=>{o(B)}:ko}function o(d){if(L0(d)){const h=n.get(d);h&&(n.delete(d),t.splice(t.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=t.indexOf(d);h>-1&&(t.splice(h,1),d.record.name&&n.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function l(){return t}function a(d){const h=Kw(d,t);t.splice(h,0,d),d.record.name&&!vp(d)&&n.set(d.record.name,d)}function c(d,h){let p,y={},b,x;if("name"in d&&d.name){if(p=n.get(d.name),!p)throw Ar(jt.MATCHER_NOT_FOUND,{location:d});x=p.record.name,y=at(gp(h.params,p.keys.filter(B=>!B.optional).concat(p.parent?p.parent.keys.filter(B=>B.optional):[]).map(B=>B.name)),d.params&&gp(d.params,p.keys.map(B=>B.name))),b=p.stringify(y)}else if(d.path!=null)b=d.path,p=t.find(B=>B.re.test(b)),p&&(y=p.parse(b),x=p.record.name);else{if(p=h.name?n.get(h.name):t.find(B=>B.re.test(h.path)),!p)throw Ar(jt.MATCHER_NOT_FOUND,{location:d,currentLocation:h});x=p.record.name,y=at({},h.params,d.params),b=p.stringify(y)}const g=[];let j=p;for(;j;)g.unshift(j.record),j=j.parent;return{name:x,path:b,params:y,matched:g,meta:Ww(g)}}s.forEach(d=>r(d));function u(){t.length=0,n.clear()}return{addRoute:r,resolve:c,removeRoute:o,clearRoutes:u,getRoutes:l,getRecordMatcher:i}}function gp(s,e){const t={};for(const n of e)n in s&&(t[n]=s[n]);return t}function mp(s){const e={path:s.path,redirect:s.redirect,name:s.name,meta:s.meta||{},aliasOf:s.aliasOf,beforeEnter:s.beforeEnter,props:qw(s),children:s.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in s?s.components||null:s.component&&{default:s.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function qw(s){const e={},t=s.props||!1;if("component"in s)e.default=t;else for(const n in s.components)e[n]=typeof t=="object"?t[n]:t;return e}function vp(s){for(;s;){if(s.record.aliasOf)return!0;s=s.parent}return!1}function Ww(s){return s.reduce((e,t)=>at(e,t.meta),{})}function Kw(s,e){let t=0,n=e.length;for(;t!==n;){const r=t+n>>1;I0(s,e[r])<0?n=r:t=r+1}const i=Gw(s);return i&&(n=e.lastIndexOf(i,n-1)),n}function Gw(s){let e=s;for(;e=e.parent;)if(N0(e)&&I0(s,e)===0)return e}function N0({record:s}){return!!(s.name||s.components&&Object.keys(s.components).length||s.redirect)}function yp(s){const e=zs(iu),t=zs(ef),n=F(()=>{const a=ct(s.to);return e.resolve(a)}),i=F(()=>{const{matched:a}=n.value,{length:c}=a,u=a[c-1],d=t.matched;if(!u||!d.length)return-1;const h=d.findIndex(_r.bind(null,u));if(h>-1)return h;const p=bp(a[c-2]);return c>1&&bp(u)===p&&d[d.length-1].path!==p?d.findIndex(_r.bind(null,a[c-2])):h}),r=F(()=>i.value>-1&&Zw(t.params,n.value.params)),o=F(()=>i.value>-1&&i.value===t.matched.length-1&&R0(t.params,n.value.params));function l(a={}){if(Xw(a)){const c=e[ct(s.replace)?"replace":"push"](ct(s.to)).catch(ko);return s.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:n,href:F(()=>n.value.href),isActive:r,isExactActive:o,navigate:l}}function Jw(s){return s.length===1?s[0]:s}const Qw=Qm({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:yp,setup(s,{slots:e}){const t=Js(yp(s)),{options:n}=zs(iu),i=F(()=>({[kp(s.activeClass,n.linkActiveClass,"router-link-active")]:t.isActive,[kp(s.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const r=e.default&&Jw(e.default(t));return s.custom?r:Rt("a",{"aria-current":t.isExactActive?s.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:i.value},r)}}}),Yw=Qw;function Xw(s){if(!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)&&!s.defaultPrevented&&!(s.button!==void 0&&s.button!==0)){if(s.currentTarget&&s.currentTarget.getAttribute){const e=s.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return s.preventDefault&&s.preventDefault(),!0}}function Zw(s,e){for(const t in e){const n=e[t],i=s[t];if(typeof n=="string"){if(n!==i)return!1}else if(!en(i)||i.length!==n.length||n.some((r,o)=>r!==i[o]))return!1}return!0}function bp(s){return s?s.aliasOf?s.aliasOf.path:s.path:""}const kp=(s,e,t)=>s??e??t,e2=Qm({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(s,{attrs:e,slots:t}){const n=zs(Vc),i=F(()=>s.route||n.value),r=zs(dp,0),o=F(()=>{let c=ct(r);const{matched:u}=i.value;let d;for(;(d=u[c])&&!d.components;)c++;return c}),l=F(()=>i.value.matched[o.value]);yo(dp,F(()=>o.value+1)),yo(Dw,l),yo(Vc,i);const a=Y();return Pe(()=>[a.value,l.value,s.name],([c,u,d],[h,p,y])=>{u&&(u.instances[d]=c,p&&p!==u&&c&&c===h&&(u.leaveGuards.size||(u.leaveGuards=p.leaveGuards),u.updateGuards.size||(u.updateGuards=p.updateGuards))),c&&u&&(!p||!_r(u,p)||!h)&&(u.enterCallbacks[d]||[]).forEach(b=>b(c))},{flush:"post"}),()=>{const c=i.value,u=s.name,d=l.value,h=d&&d.components[u];if(!h)return xp(t.default,{Component:h,route:c});const p=d.props[u],y=p?p===!0?c.params:typeof p=="function"?p(c):p:null,x=Rt(h,at({},y,e,{onVnodeUnmounted:g=>{g.component.isUnmounted&&(d.instances[u]=null)},ref:a}));return xp(t.default,{Component:x,route:c})||x}}});function xp(s,e){if(!s)return null;const t=s(e);return t.length===1?t[0]:t}const t2=e2;function s2(s){const e=Hw(s.routes,s),t=s.parseQuery||Aw,n=s.stringifyQuery||cp,i=s.history,r=Zr(),o=Zr(),l=Zr(),a=ek(Gn);let c=Gn;nr&&s.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Nu.bind(null,re=>""+re),d=Nu.bind(null,uw),h=Nu.bind(null,Lo);function p(re,Z){let K,C;return L0(re)?(K=e.getRecordMatcher(re),C=Z):C=re,e.addRoute(C,K)}function y(re){const Z=e.getRecordMatcher(re);Z&&e.removeRoute(Z)}function b(){return e.getRoutes().map(re=>re.record)}function x(re){return!!e.getRecordMatcher(re)}function g(re,Z){if(Z=at({},Z||a.value),typeof re=="string"){const q=Fu(t,re,Z.path),oe=e.resolve({path:q.path},Z),te=i.createHref(q.fullPath);return at(q,oe,{params:h(oe.params),hash:Lo(q.hash),redirectedFrom:void 0,href:te})}let K;if(re.path!=null)K=at({},re,{path:Fu(t,re.path,Z.path).path});else{const q=at({},re.params);for(const oe in q)q[oe]==null&&delete q[oe];K=at({},re,{params:d(q)}),Z.params=d(Z.params)}const C=e.resolve(K,Z),ie=re.hash||"";C.params=u(h(C.params));const A=fw(n,at({},re,{hash:ow(ie),path:C.path})),$=i.createHref(A);return at({fullPath:A,hash:ie,query:n===cp?Mw(re.query):re.query||{}},C,{redirectedFrom:void 0,href:$})}function j(re){return typeof re=="string"?Fu(t,re,a.value.path):at({},re)}function B(re,Z){if(c!==re)return Ar(jt.NAVIGATION_CANCELLED,{from:Z,to:re})}function U(re){return _(re)}function I(re){return U(at(j(re),{replace:!0}))}function L(re,Z){const K=re.matched[re.matched.length-1];if(K&&K.redirect){const{redirect:C}=K;let ie=typeof C=="function"?C(re,Z):C;return typeof ie=="string"&&(ie=ie.includes("?")||ie.includes("#")?ie=j(ie):{path:ie},ie.params={}),at({query:re.query,hash:re.hash,params:ie.path!=null?{}:re.params},ie)}}function _(re,Z){const K=c=g(re),C=a.value,ie=re.state,A=re.force,$=re.replace===!0,q=L(K,C);if(q)return _(at(j(q),{state:typeof q=="object"?at({},ie,q.state):ie,force:A,replace:$}),Z||K);const oe=K;oe.redirectedFrom=Z;let te;return!A&&hw(n,C,K)&&(te=Ar(jt.NAVIGATION_DUPLICATED,{to:oe,from:C}),Re(C,C,!0,!1)),(te?Promise.resolve(te):ce(oe,C)).catch(se=>Mn(se)?Mn(se,jt.NAVIGATION_GUARD_REDIRECT)?se:$e(se):ae(se,oe,C)).then(se=>{if(se){if(Mn(se,jt.NAVIGATION_GUARD_REDIRECT))return _(at({replace:$},j(se.to),{state:typeof se.to=="object"?at({},ie,se.to.state):ie,force:A}),Z||oe)}else se=N(oe,C,!0,$,ie);return ne(oe,C,se),se})}function R(re,Z){const K=B(re,Z);return K?Promise.reject(K):Promise.resolve()}function W(re){const Z=ot.values().next().value;return Z&&typeof Z.runWithContext=="function"?Z.runWithContext(re):re()}function ce(re,Z){let K;const[C,ie,A]=Ew(re,Z);K=Uu(C.reverse(),"beforeRouteLeave",re,Z);for(const q of C)q.leaveGuards.forEach(oe=>{K.push(Yn(oe,re,Z))});const $=R.bind(null,re,Z);return K.push($),Xe(K).then(()=>{K=[];for(const q of r.list())K.push(Yn(q,re,Z));return K.push($),Xe(K)}).then(()=>{K=Uu(ie,"beforeRouteUpdate",re,Z);for(const q of ie)q.updateGuards.forEach(oe=>{K.push(Yn(oe,re,Z))});return K.push($),Xe(K)}).then(()=>{K=[];for(const q of A)if(q.beforeEnter)if(en(q.beforeEnter))for(const oe of q.beforeEnter)K.push(Yn(oe,re,Z));else K.push(Yn(q.beforeEnter,re,Z));return K.push($),Xe(K)}).then(()=>(re.matched.forEach(q=>q.enterCallbacks={}),K=Uu(A,"beforeRouteEnter",re,Z,W),K.push($),Xe(K))).then(()=>{K=[];for(const q of o.list())K.push(Yn(q,re,Z));return K.push($),Xe(K)}).catch(q=>Mn(q,jt.NAVIGATION_CANCELLED)?q:Promise.reject(q))}function ne(re,Z,K){l.list().forEach(C=>W(()=>C(re,Z,K)))}function N(re,Z,K,C,ie){const A=B(re,Z);if(A)return A;const $=Z===Gn,q=nr?history.state:{};K&&(C||$?i.replace(re.fullPath,at({scroll:$&&q&&q.scroll},ie)):i.push(re.fullPath,ie)),a.value=re,Re(re,Z,K,$),$e()}let le;function ee(){le||(le=i.listen((re,Z,K)=>{if(!st.listening)return;const C=g(re),ie=L(C,st.currentRoute.value);if(ie){_(at(ie,{replace:!0,force:!0}),C).catch(ko);return}c=C;const A=a.value;nr&&xw(up(A.fullPath,K.delta),nu()),ce(C,A).catch($=>Mn($,jt.NAVIGATION_ABORTED|jt.NAVIGATION_CANCELLED)?$:Mn($,jt.NAVIGATION_GUARD_REDIRECT)?(_(at(j($.to),{force:!0}),C).then(q=>{Mn(q,jt.NAVIGATION_ABORTED|jt.NAVIGATION_DUPLICATED)&&!K.delta&&K.type===Rc.pop&&i.go(-1,!1)}).catch(ko),Promise.reject()):(K.delta&&i.go(-K.delta,!1),ae($,C,A))).then($=>{$=$||N(C,A,!1),$&&(K.delta&&!Mn($,jt.NAVIGATION_CANCELLED)?i.go(-K.delta,!1):K.type===Rc.pop&&Mn($,jt.NAVIGATION_ABORTED|jt.NAVIGATION_DUPLICATED)&&i.go(-1,!1)),ne(C,A,$)}).catch(ko)}))}let V=Zr(),G=Zr(),Q;function ae(re,Z,K){$e(re);const C=G.list();return C.length?C.forEach(ie=>ie(re,Z,K)):console.error(re),Promise.reject(re)}function me(){return Q&&a.value!==Gn?Promise.resolve():new Promise((re,Z)=>{V.add([re,Z])})}function $e(re){return Q||(Q=!re,ee(),V.list().forEach(([Z,K])=>re?K(re):Z()),V.reset()),re}function Re(re,Z,K,C){const{scrollBehavior:ie}=s;if(!nr||!ie)return Promise.resolve();const A=!K&&ww(up(re.fullPath,0))||(C||!K)&&history.state&&history.state.scroll||null;return Bs().then(()=>ie(re,Z,A)).then($=>$&&kw($)).catch($=>ae($,re,Z))}const Oe=re=>i.go(re);let Ue;const ot=new Set,st={currentRoute:a,listening:!0,addRoute:p,removeRoute:y,clearRoutes:e.clearRoutes,hasRoute:x,getRoutes:b,resolve:g,options:s,push:U,replace:I,go:Oe,back:()=>Oe(-1),forward:()=>Oe(1),beforeEach:r.add,beforeResolve:o.add,afterEach:l.add,onError:G.add,isReady:me,install(re){re.component("RouterLink",Yw),re.component("RouterView",t2),re.config.globalProperties.$router=st,Object.defineProperty(re.config.globalProperties,"$route",{enumerable:!0,get:()=>ct(a)}),nr&&!Ue&&a.value===Gn&&(Ue=!0,U(i.location).catch(C=>{}));const Z={};for(const C in Gn)Object.defineProperty(Z,C,{get:()=>a.value[C],enumerable:!0});re.provide(iu,st),re.provide(ef,Om(Z)),re.provide(Vc,a);const K=re.unmount;ot.add(re),re.unmount=function(){ot.delete(re),ot.size<1&&(c=Gn,le&&le(),le=null,a.value=Gn,Ue=!1,Q=!1),K()}}};function Xe(re){return re.reduce((Z,K)=>Z.then(()=>W(K)),Promise.resolve())}return st}function rl(){return zs(iu)}function Br(s){return zs(ef)}const Dn=Y(!1);function n2(){const s=()=>{Dn.value=!Dn.value},e=()=>{Dn.value=!0},t=()=>{Dn.value=!1};return Pe(Dn,n=>{n?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},{immediate:!1}),as(()=>{const n=localStorage.getItem("theme");n?Dn.value=n==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches&&(Dn.value=!0),Dn.value?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}),{isDark:Dn,toggle:s,enable:e,disable:t}}function i2(s,e){return v(),k("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 13.5V3.75m0 9.75a1.5 1.5 0 0 1 0 3m0-3a1.5 1.5 0 0 0 0 3m0 3.75V16.5m12-3V3.75m0 9.75a1.5 1.5 0 0 1 0 3m0-3a1.5 1.5 0 0 0 0 3m0 3.75V16.5m-6-9V3.75m0 3.75a1.5 1.5 0 0 1 0 3m0-3a1.5 1.5 0 0 0 0 3m0 9.75V10.5"})])}function r2(s,e){return v(),k("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function o2(s,e){return v(),k("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})])}function l2(s,e){return v(),k("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125"})])}function tf(s,e){return v(),k("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}function sf(s,e){return v(),k("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"})])}function yr(s,e){return v(),k("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}function a2(s,e){return v(),k("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})])}function u2(s,e){return v(),k("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"})])}function c2(s,e){return v(),k("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}function Ca(s,e){return v(),k("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"})])}function ru(s,e){return v(),k("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"})])}function ou(s,e){return v(),k("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"})])}function d2(s,e){return v(),k("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})])}function nf(s,e){return v(),k("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5.25 14.25h13.5m-13.5 0a3 3 0 0 1-3-3m3 3a3 3 0 1 0 0 6h13.5a3 3 0 1 0 0-6m-16.5-3a3 3 0 0 1 3-3h13.5a3 3 0 0 1 3 3m-19.5 0a4.5 4.5 0 0 1 .9-2.7L5.737 5.1a3.375 3.375 0 0 1 2.7-1.35h7.126c1.062 0 2.062.5 2.7 1.35l2.587 3.45a4.5 4.5 0 0 1 .9 2.7m0 0a3 3 0 0 1-3 3m0 3h.008v.008h-.008v-.008Zm0-6h.008v.008h-.008v-.008Zm-3 6h.008v.008h-.008v-.008Zm0-6h.008v.008h-.008v-.008Z"})])}function f2(s,e){return v(),k("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"})])}function h2(s,e){return v(),k("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}const p2={key:0,class:"pointer-events-auto w-full max-w-sm rounded-lg bg-white shadow-lg outline-1 outline-black/5 dark:bg-gray-800 dark:-outline-offset-1 dark:outline-white/10"},g2={class:"p-4"},m2={key:0,class:"shrink-0"},v2={key:0,class:"w-0 flex-1 text-sm font-medium text-gray-900 dark:text-white"},y2={class:"text-sm font-medium text-gray-900 dark:text-white"},b2={key:0,class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},k2={__name:"Toast",props:{title:{type:String,required:!0},description:{type:String,default:null},type:{type:String,default:"success",validator:s=>["success","error","warning","info"].includes(s)},variant:{type:String,default:"regular",validator:s=>["regular","condensed"].includes(s)},action:{type:String,default:null},duration:{type:Number,default:5e3},autoClose:{type:Boolean,default:!0}},emits:["close","action"],setup(s,{emit:e}){const t=s,n=e,i=Y(!1);let r=null;const o=F(()=>{const c={success:r2,error:h2,warning:a2,info:ru},u={success:"text-sky-400",error:"text-red-400",warning:"text-yellow-400",info:"text-blue-400"},d=c[t.type],h=u[t.type];return()=>Rt(d,{class:`size-6 ${h}`})}),l=()=>{i.value=!1,r&&clearTimeout(r),setTimeout(()=>n("close"),200)},a=()=>{n("action"),l()};return as(()=>{i.value=!0,t.autoClose&&t.duration>0&&(r=setTimeout(l,t.duration))}),Pe(()=>t.duration,c=>{r&&clearTimeout(r),t.autoClose&&c>0&&(r=setTimeout(l,c))}),(c,u)=>(v(),Ae(Xd,{"enter-active-class":"transform transition duration-300 ease-out","enter-from-class":"translate-y-2 opacity-0 sm:translate-x-2 sm:translate-y-0","enter-to-class":"translate-y-0 opacity-100 sm:translate-x-0","leave-active-class":"transition duration-200 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:X(()=>[i.value?(v(),k("div",p2,[f("div",g2,[f("div",{class:xe(s.variant==="condensed"?"flex items-center":"flex items-start")},[s.variant==="regular"?(v(),k("div",m2,[(v(),Ae(Ms(o.value),{class:"size-6"}))])):H("",!0),f("div",{class:xe([s.variant==="regular"?"ml-3 w-0 flex-1 pt-0.5":"flex w-0 flex-1 justify-between"])},[s.variant==="condensed"?(v(),k("p",v2,J(s.title),1)):(v(),k(be,{key:1},[f("p",y2,J(s.title),1),s.description?(v(),k("p",b2,J(s.description),1)):H("",!0)],64)),s.variant==="condensed"&&s.action?(v(),k("button",{key:2,type:"button",onClick:a,class:"ml-3 shrink-0 rounded-md bg-white text-sm font-medium text-sky-600 hover:text-sky-500 focus:outline-2 focus:outline-offset-2 focus:outline-sky-500 dark:bg-gray-800 dark:text-sky-400 dark:hover:text-sky-300 dark:focus:outline-sky-400"},J(s.action),1)):H("",!0)],2),f("div",{class:"ml-4 flex shrink-0"},[f("button",{type:"button",onClick:l,class:"inline-flex rounded-md text-gray-400 hover:text-gray-500 focus:outline-2 focus:outline-offset-2 focus:outline-sky-600 dark:hover:text-white dark:focus:outline-sky-500"},[...u[0]||(u[0]=[f("span",{class:"sr-only"},"Close",-1),f("svg",{viewBox:"0 0 20 20",fill:"currentColor",class:"size-5"},[f("path",{d:"M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z"})],-1)])])])],2)])])):H("",!0)]),_:1}))}},x2={"aria-live":"assertive",class:"pointer-events-none fixed inset-0 flex items-end px-4 py-6 sm:items-start sm:p-6 z-50"},w2={class:"flex w-full flex-col items-center space-y-4 sm:items-end"},S2={__name:"ToastContainer",setup(s,{expose:e}){const t=Y([]);let n=1;const i=a=>{const c=a.type||"success",u=a.title,d=t.value.findIndex(p=>p.title===u&&p.type===c);d>-1&&t.value.splice(d,1);const h={id:n++,title:u,description:a.description||null,type:c,variant:a.variant||"regular",action:a.action||null,duration:a.duration!==void 0?a.duration:5e3,autoClose:a.autoClose!==void 0?a.autoClose:!0,onAction:a.onAction||null};return t.value.push(h),h.id},r=a=>{const c=t.value.findIndex(u=>u.id===a);c>-1&&t.value.splice(c,1)},o=a=>{a.onAction&&a.onAction()};return e({addToast:i,removeToast:r,clearAll:()=>{t.value=[]}}),(a,c)=>(v(),Ae(Um,{to:"body"},[f("div",x2,[f("div",w2,[(v(!0),k(be,null,Le(t.value,u=>(v(),Ae(k2,{key:u.id,title:u.title,description:u.description,type:u.type,variant:u.variant,action:u.action,duration:u.duration,"auto-close":u.autoClose,onClose:d=>r(u.id),onAction:d=>o(u)},null,8,["title","description","type","variant","action","duration","auto-close","onClose","onAction"]))),128))])])]))}};let Ai=null;function C2(s){Ai=s}function lu(){const s=l=>{if(!Ai){console.warn('ToastContainer not initialized. Add <ToastContainer ref="toastContainer" /> to your App.vue');return}return Ai.addToast(l)};return{show:s,success:(l,a=null,c={})=>s({title:l,description:a,type:"success",...c}),error:(l,a=null,c={})=>s({title:l,description:a,type:"error",...c}),warning:(l,a=null,c={})=>s({title:l,description:a,type:"warning",...c}),info:(l,a=null,c={})=>s({title:l,description:a,type:"info",...c}),remove:l=>{Ai&&Ai.removeToast(l)},clearAll:()=>{Ai&&Ai.clearAll()}}}const _2={class:"flex min-h-screen bg-white dark:bg-zinc-900"},A2={class:"hidden lg:fixed lg:inset-y-0 lg:z-50 lg:flex lg:w-72 lg:flex-col xl:w-80"},M2={class:"flex grow flex-col overflow-y-auto border-r border-zinc-900/10 px-6 pb-8 pt-4 dark:border-white/10"},D2={key:0,class:"mt-6"},E2={class:"mt-10"},T2={role:"list"},j2={class:"relative mt-6"},O2={class:"relative mt-3 pl-2"},P2={role:"list",class:"border-l border-transparent"},$2={class:"truncate"},R2={key:0,class:"relative mt-6"},L2={class:"relative mt-3 pl-2"},V2={role:"list",class:"border-l border-transparent"},B2={class:"truncate"},I2={key:0,class:"text-xs text-zinc-400 dark:text-zinc-500"},N2={class:"relative mt-6"},F2={class:"relative mt-3 pl-2"},z2={role:"list",class:"border-l border-transparent"},U2={class:"truncate"},H2={class:"text-xs text-zinc-400 dark:text-zinc-500"},q2={class:"sticky bottom-0 mt-6 border-t border-zinc-900/10 pt-6 dark:border-white/10"},W2={class:"lg:pl-72 xl:pl-80 w-full"},K2={class:"h-screen overflow-auto"},G2={__name:"App",setup(s){const e=Y(null),t=Br(),{isDark:n,toggle:i}=n2(),r=Y([]),o=Y([]),l=async()=>{try{const j=await(await fetch("/api/settings/get")).json();r.value=j.projects||[]}catch(g){console.error("Failed to load projects:",g)}},a=async()=>{try{const j=await(await fetch("/api/docs/categories")).json();o.value=j.categories||[]}catch(g){console.error("Failed to load docs categories:",g)}};yo("loadProjects",l);const c=g=>x.findIndex(B=>B.to==="/projects"&&t.path==="/projects/new"?!1:t.path.startsWith(B.to)),u=()=>r.value.findIndex(g=>t.path===`/project/${g.id}`),d=()=>{const g=t.path.match(/^\/docs\/category\/(\d+)/);if(g){const j=parseInt(g[1]);return o.value.findIndex(B=>B.id===j)}if(t.path.startsWith("/docs/function/")){const j=t.query.category;if(j)return o.value.findIndex(B=>B.id===parseInt(j))}return-1},h=g=>g.to==="/projects"&&t.path==="/projects/new"||t.path.startsWith("/docs")?!1:t.path.startsWith(g.to),p=g=>t.path===`/docs/category/${g}`?!0:t.path.startsWith("/docs/function/")&&t.query.category?parseInt(t.query.category)===g:!1,y=()=>Rt("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[Rt("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})]),b=()=>Rt("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[Rt("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})]),x=[{id:"projects",label:"Projects",to:"/projects"},{id:"settings",label:"New Project Defaults",to:"/settings"}];return as(async()=>{C2(e.value),await l(),await a()}),(g,j)=>{const B=_c("router-link"),U=_c("router-view");return v(),k("div",_2,[f("div",A2,[f("div",M2,[S(B,{to:"/",class:"flex items-center gap-3"},{default:X(()=>[...j[1]||(j[1]=[f("img",{src:Jx,alt:"Framework",class:"h-10 w-10"},null,-1),f("span",{class:"text-lg font-semibold text-zinc-900 dark:text-white"},"Framework",-1)])]),_:1}),g.$route.path!=="/projects/new"?(v(),k("div",D2,[S(B,{to:"/projects/new",class:"flex w-full items-center justify-center gap-2 rounded-lg bg-white px-4 py-2.5 text-sm font-medium text-zinc-900 ring-1 ring-zinc-900/10 transition hover:bg-zinc-50 hover:ring-zinc-900/20 dark:bg-white/5 dark:text-white dark:ring-white/10 dark:hover:bg-white/10"},{default:X(()=>[...j[2]||(j[2]=[f("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),de(" New Project ",-1)])]),_:1})])):H("",!0),f("nav",E2,[f("ul",T2,[f("li",j2,[j[4]||(j[4]=f("h2",{class:"text-xs font-semibold text-zinc-900 dark:text-white"}," Framework ",-1)),f("div",O2,[j[3]||(j[3]=f("div",{class:"absolute inset-y-0 left-2 w-px bg-zinc-900/10 dark:bg-white/5"},null,-1)),c()>=0?(v(),k("div",{key:0,class:"absolute left-2 h-6 w-px bg-sky-500 transition-all duration-200",style:hr({top:`${c()*32+4}px`})},null,4)):H("",!0),f("ul",P2,[(v(),k(be,null,Le(x,I=>f("li",{key:I.id,class:"relative"},[S(B,{to:I.to,class:xe(["flex justify-between gap-2 py-1 pl-4 pr-3 text-sm transition",h(I)?"text-zinc-900 dark:text-white":"text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white"])},{default:X(()=>[f("span",$2,J(I.label),1)]),_:2},1032,["to","class"])])),64))])])]),r.value.length>0?(v(),k("li",R2,[j[6]||(j[6]=f("h2",{class:"text-xs font-semibold text-zinc-900 dark:text-white"}," Your Projects ",-1)),f("div",L2,[j[5]||(j[5]=f("div",{class:"absolute inset-y-0 left-2 w-px bg-zinc-900/10 dark:bg-white/5"},null,-1)),u()>=0?(v(),k("div",{key:0,class:"absolute left-2 h-6 w-px bg-sky-500 transition-all duration-200",style:hr({top:`${u()*32+4}px`})},null,4)):H("",!0),f("ul",V2,[(v(!0),k(be,null,Le(r.value,I=>(v(),k("li",{key:I.id,class:"relative"},[S(B,{to:`/project/${I.id}`,class:xe(["flex justify-between gap-2 py-1 pl-4 pr-3 text-sm transition",g.$route.path===`/project/${I.id}`?"text-zinc-900 dark:text-white":"text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white"])},{default:X(()=>[f("span",B2,J(I.name),1),I.type?(v(),k("span",I2,J(I.type==="project"?"":I.type==="course"?"":""),1)):H("",!0)]),_:2},1032,["to","class"])]))),128))])])])):H("",!0),f("li",N2,[j[8]||(j[8]=f("h2",{class:"text-xs font-semibold text-zinc-900 dark:text-white"}," Documentation ",-1)),f("div",F2,[j[7]||(j[7]=f("div",{class:"absolute inset-y-0 left-2 w-px bg-zinc-900/10 dark:bg-white/5"},null,-1)),d()>=0?(v(),k("div",{key:0,class:"absolute left-2 h-6 w-px bg-sky-500 transition-all duration-200",style:hr({top:`${d()*32+4}px`})},null,4)):H("",!0),f("ul",z2,[(v(!0),k(be,null,Le(o.value,I=>(v(),k("li",{key:I.id,class:"relative"},[S(B,{to:`/docs/category/${I.id}`,class:xe(["flex justify-between gap-2 py-1 pl-4 pr-3 text-sm transition",p(I.id)?"text-zinc-900 dark:text-white":"text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white"])},{default:X(()=>[f("span",U2,J(I.name),1),f("span",H2,J(I.function_count),1)]),_:2},1032,["to","class"])]))),128))])])]),f("li",q2,[f("button",{onClick:j[0]||(j[0]=(...I)=>ct(i)&&ct(i)(...I)),class:"flex w-full items-center gap-3 text-sm text-zinc-600 transition hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white"},[(v(),Ae(Ms(ct(n)?b:y),{class:"h-5 w-5 shrink-0"})),de(" "+J(ct(n)?"Light Mode":"Dark Mode"),1)])])])])])]),f("div",W2,[f("main",K2,[S(U)])]),S(S2,{ref_key:"toastContainer",ref:e},null,512)])}}},J2=["title"],Q2={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Y2={key:1,class:"h-4 w-4 text-sky-600 dark:text-sky-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},X2={key:2},oi={__name:"CopyButton",props:{value:{type:String,required:!0},showLabel:{type:Boolean,default:!1},variant:{type:String,default:"default",validator:s=>["default","ghost","bare"].includes(s)},successMessage:{type:String,default:"Copied to clipboard"}},setup(s){const e=s,t=lu(),n=Y(!1);let i=null;const r=F(()=>e.variant==="bare"?"inline-flex items-center text-sm font-medium transition-all":"inline-flex items-center gap-1.5 rounded-md px-2.5 py-1.5 text-sm font-medium transition-all"),o=F(()=>e.variant==="ghost"?"text-zinc-600 hover:bg-zinc-100 dark:text-zinc-400 dark:hover:bg-zinc-800":e.variant==="bare"?"gap-2 rounded-lg transition-all focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-1 focus-visible:outline-sky-500":"bg-zinc-100 text-zinc-700 hover:bg-zinc-200 dark:bg-zinc-800 dark:text-zinc-300 dark:hover:bg-zinc-700"),l=async()=>{try{await navigator.clipboard.writeText(e.value),n.value=!0,t.success("Copied!",e.successMessage),i&&clearTimeout(i),i=setTimeout(()=>{n.value=!1},2e3)}catch(a){t.error("Copy failed","Could not copy to clipboard"),console.error("Failed to copy:",a)}};return(a,c)=>(v(),k("button",{type:"button",onClick:l,class:xe([r.value,o.value,n.value&&"ring-2 ring-sky-500/20"]),title:n.value?"Copied!":"Copy to clipboard"},[dt(a.$slots,"default",{copied:n.value},()=>[n.value?(v(),k("svg",Y2,[...c[1]||(c[1]=[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(v(),k("svg",Q2,[...c[0]||(c[0]=[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"},null,-1)])])),s.showLabel?(v(),k("span",X2,J(n.value?"Copied!":"Copy"),1)):H("",!0)])],10,J2))}},Z2={class:"flex min-h-screen"},eS={class:"w-64 shrink-0 border-r border-gray-200 p-6 dark:border-gray-800 overflow-y-auto"},tS={class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},sS={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mb-4"},nS={class:"relative mb-4"},iS={key:1,class:"flex items-center justify-center py-8"},rS={key:2,class:"space-y-0.5"},oS=["onClick"],lS={class:"font-mono"},aS={key:0,class:"text-center py-4"},uS={class:"flex-1 pt-10 pb-8 px-10 overflow-y-auto border-l border-gray-100 bg-gray-50/30 dark:border-gray-800 dark:bg-gray-900/20"},cS={key:0,class:"flex items-center justify-center py-12"},dS={key:1,class:"flex h-full items-center justify-center"},fS={key:2,class:"max-w-3xl text-[15px] leading-relaxed"},hS={class:"mb-8"},pS={class:"flex items-center justify-between text-sm tracking-wide text-gray-400 dark:text-gray-500 mb-2"},gS={key:0,class:"font-mono"},mS={class:"text-2xl font-semibold text-gray-900 dark:text-white font-mono leading-tight mb-3"},vS={key:0,class:"text-base text-gray-600 dark:text-gray-400 leading-relaxed"},yS={key:0,class:"mb-5"},bS={class:"text-[15px] text-gray-700 dark:text-gray-300 leading-relaxed whitespace-pre-line"},kS={key:1,class:"mb-5"},xS={class:"relative group"},wS={class:"bg-gray-50 dark:bg-gray-800/60 border border-gray-200 dark:border-gray-700 rounded px-3 py-2 overflow-x-auto"},SS={class:"text-sm text-gray-800 dark:text-gray-200 font-mono leading-normal"},CS={key:2,class:"mb-5"},_S={class:"overflow-hidden rounded border border-gray-200 dark:border-gray-700"},AS={class:"w-full"},MS={class:"divide-y divide-gray-100 dark:divide-gray-800"},DS={class:"px-3 py-2 align-top"},ES={class:"text-sm font-mono font-medium text-gray-900 dark:text-white"},TS={class:"px-3 py-2 text-[15px] text-gray-600 dark:text-gray-400"},jS={key:3,class:"mb-5"},OS={class:"text-[15px] text-gray-700 dark:text-gray-300 leading-relaxed whitespace-pre-line"},PS={key:4,class:"mb-5"},$S={class:"text-[15px] text-gray-700 dark:text-gray-300 leading-relaxed whitespace-pre-line"},RS={class:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1.5"},LS={class:"text-[15px] text-gray-700 dark:text-gray-300 leading-relaxed whitespace-pre-line"},VS={key:0,class:"mt-2 pl-3 border-l-2 border-gray-200 dark:border-gray-700"},BS={class:"text-xs font-medium text-gray-600 dark:text-gray-400 mb-1"},IS={class:"text-sm text-gray-600 dark:text-gray-400 leading-relaxed whitespace-pre-line"},NS={key:6,class:"mb-5"},FS={class:"space-y-2"},zS={class:"bg-gray-50 dark:bg-gray-800/50 rounded px-3 py-2 overflow-x-auto border border-gray-200 dark:border-gray-700"},US={class:"text-sm text-gray-800 dark:text-gray-200 font-mono leading-normal"},HS={key:7,class:"mb-5"},qS={class:"flex flex-wrap gap-1.5"},WS=["onClick"],KS={key:8,class:"mb-5"},GS={class:"flex flex-wrap gap-1.5"},JS={key:9,class:"mb-5"},QS={class:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded px-3 py-2"},YS={class:"text-[15px] text-amber-700 dark:text-amber-300 leading-relaxed whitespace-pre-line"},XS={key:3,class:"text-center py-12"},ZS={class:"text-gray-600 dark:text-gray-400"},eC={class:"font-mono"},tC={__name:"DocsCategoryView",props:{categoryId:{type:String,required:!0}},setup(s){const e=s,t=Br(),n=rl(),i=Y(!0),r=Y(!1),o=Y(null),l=Y([]),a=Y(""),c=Y(null),u=Y(null),d=F(()=>{if(!a.value.trim())return l.value;const y=a.value.toLowerCase();return l.value.filter(b=>b.name.toLowerCase().includes(y)||b.title&&b.title.toLowerCase().includes(y))}),h=async()=>{i.value=!0;try{const b=await(await fetch("/api/docs/categories")).json();b.error||(o.value=b.categories?.find(j=>j.id===parseInt(e.categoryId)));const g=await(await fetch(`/api/docs/functions?category_id=${e.categoryId}`)).json();g.error||(l.value=g.functions||[],!c.value&&l.value.length>0&&(t.query.fn?p(t.query.fn):p(l.value[0].name)))}catch(y){console.error("Failed to load category:",y)}finally{i.value=!1}},p=async y=>{c.value=y,r.value=!0,u.value=null,n.replace({path:t.path,query:{fn:y}});try{const x=await(await fetch(`/api/docs/function/${encodeURIComponent(y)}`)).json();x.error||(u.value=x.function_doc)}catch(b){console.error("Failed to load function:",b)}finally{r.value=!1}};return Pe(()=>e.categoryId,()=>{c.value=null,u.value=null,a.value="",h()}),Pe(()=>t.query.fn,y=>{y&&y!==c.value&&p(y)}),as(h),(y,b)=>(v(),k("div",Z2,[f("nav",eS,[f("h2",tS,J(o.value?.name||"Documentation"),1),o.value?.description?(v(),k("p",sS,J(o.value.description),1)):H("",!0),f("div",nS,[qe(f("input",{"onUpdate:modelValue":b[0]||(b[0]=x=>a.value=x),type:"text",placeholder:"Filter...",class:"w-full rounded-md border border-gray-300 bg-white px-3 py-1.5 pl-8 text-sm placeholder-gray-400 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500 dark:border-gray-700 dark:bg-gray-800 dark:text-white dark:placeholder-gray-500"},null,512),[[Ii,a.value]]),b[1]||(b[1]=f("svg",{class:"absolute left-2.5 top-2 h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))]),i.value?(v(),k("div",iS,[...b[2]||(b[2]=[f("svg",{class:"h-6 w-6 animate-spin text-sky-600",fill:"none",viewBox:"0 0 24 24"},[f("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),f("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):(v(),k("div",rS,[(v(!0),k(be,null,Le(d.value,x=>(v(),k("a",{key:x.id,href:"#",onClick:Pt(g=>p(x.name),["prevent"]),class:xe(["block rounded-md px-3 py-2 text-sm transition",c.value===x.name?"bg-sky-50 text-sky-700 font-medium dark:bg-sky-900/20 dark:text-sky-400":"text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-800"])},[f("span",lS,J(x.name)+"()",1)],10,oS))),128)),d.value.length===0&&a.value?(v(),k("div",aS,[...b[3]||(b[3]=[f("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"No matches",-1)])])):H("",!0)]))]),f("div",uS,[r.value?(v(),k("div",cS,[...b[4]||(b[4]=[f("svg",{class:"h-8 w-8 animate-spin text-sky-600",fill:"none",viewBox:"0 0 24 24"},[f("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),f("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):!c.value&&!r.value?(v(),k("div",dS,[...b[5]||(b[5]=[Vr('<div class="text-center max-w-md"><svg class="mx-auto h-12 w-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg><h3 class="mt-4 text-lg font-medium text-gray-900 dark:text-white">Select a function</h3><p class="mt-2 text-sm text-gray-600 dark:text-gray-400"> Choose a function from the list to view its documentation. </p></div>',1)])])):u.value?(v(),k("div",fS,[f("header",hS,[f("div",pS,[f("span",null,"Function  "+J(o.value?.name||"Documentation"),1),u.value.source_file?(v(),k("span",gS,J(u.value.source_file),1)):H("",!0)]),f("h1",mS,J(u.value.name)+"()",1),u.value.title?(v(),k("p",vS,J(u.value.title),1)):H("",!0)]),u.value.description?(v(),k("section",yS,[b[6]||(b[6]=f("h2",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1.5"},"Description",-1)),f("div",bS,J(u.value.description),1)])):H("",!0),u.value.usage?(v(),k("section",kS,[b[7]||(b[7]=f("h2",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1.5"},"Usage",-1)),f("div",xS,[f("div",wS,[f("pre",SS,[f("code",null,J(u.value.usage),1)])]),S(oi,{value:u.value.usage,variant:"ghost",class:"absolute top-1.5 right-1.5 opacity-0 group-hover:opacity-100 transition-opacity text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},null,8,["value"])])])):H("",!0),u.value.parameters&&u.value.parameters.length>0?(v(),k("section",CS,[b[9]||(b[9]=f("h2",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1.5"},"Arguments",-1)),f("div",_S,[f("table",AS,[b[8]||(b[8]=f("thead",{class:"bg-gray-50 dark:bg-gray-800/50 text-xs text-gray-500 dark:text-gray-400"},[f("tr",null,[f("th",{class:"text-left px-3 py-1.5 font-medium w-28"},"Argument"),f("th",{class:"text-left px-3 py-1.5 font-medium"},"Description")])],-1)),f("tbody",MS,[(v(!0),k(be,null,Le(u.value.parameters,x=>(v(),k("tr",{key:x.name,class:"bg-white dark:bg-gray-900"},[f("td",DS,[f("code",ES,J(x.name),1)]),f("td",TS,J(x.description||""),1)]))),128))])])])])):H("",!0),u.value.details?(v(),k("section",jS,[b[10]||(b[10]=f("h2",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1.5"},"Details",-1)),f("div",OS,J(u.value.details),1)])):H("",!0),u.value.value?(v(),k("section",PS,[b[11]||(b[11]=f("h2",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1.5"},"Returns",-1)),f("div",$S,J(u.value.value),1)])):H("",!0),u.value.sections&&u.value.sections.length>0?(v(!0),k(be,{key:5},Le(u.value.sections,x=>(v(),k("section",{key:x.id,class:"mb-5"},[f("h2",RS,J(x.title),1),f("div",LS,J(x.content),1),x.subsections&&x.subsections.length>0?(v(),k("div",VS,[(v(!0),k(be,null,Le(x.subsections,g=>(v(),k("div",{key:g.title,class:"mb-2 last:mb-0"},[f("h3",BS,J(g.title),1),f("div",IS,J(g.content),1)]))),128))])):H("",!0)]))),128)):H("",!0),u.value.examples&&u.value.examples.length>0?(v(),k("section",NS,[b[12]||(b[12]=f("h2",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1.5"},"Examples",-1)),f("div",FS,[(v(!0),k(be,null,Le(u.value.examples,(x,g)=>(v(),k("div",{key:g,class:"relative group"},[f("div",zS,[f("pre",US,[f("code",null,J(x.content),1)])]),S(oi,{value:x.content,variant:"ghost",class:"absolute top-1.5 right-1.5 opacity-0 group-hover:opacity-100 transition-opacity text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},null,8,["value"])]))),128))])])):H("",!0),u.value.seealso&&u.value.seealso.length>0?(v(),k("section",HS,[b[13]||(b[13]=f("h2",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1.5"},"See also",-1)),f("div",qS,[(v(!0),k(be,null,Le(u.value.seealso,x=>(v(),k("a",{key:x.target,href:"#",onClick:Pt(g=>p(x.target),["prevent"]),class:"inline-flex items-center px-2 py-0.5 rounded bg-gray-100 dark:bg-gray-800 text-sky-600 dark:text-sky-400 font-mono text-sm hover:bg-gray-200 dark:hover:bg-gray-700 transition"},J(x.link_text||x.target)+"()",9,WS))),128))])])):H("",!0),u.value.aliases&&u.value.aliases.length>0?(v(),k("section",KS,[b[14]||(b[14]=f("h2",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1.5"},"Aliases",-1)),f("div",GS,[(v(!0),k(be,null,Le(u.value.aliases,x=>(v(),k("span",{key:x,class:"inline-flex items-center px-2 py-0.5 rounded bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 font-mono text-sm"},J(x)+"()",1))),128))])])):H("",!0),u.value.note?(v(),k("section",JS,[f("div",QS,[b[15]||(b[15]=f("h3",{class:"text-xs font-medium text-amber-600 dark:text-amber-400 mb-1"},"Note",-1)),f("div",YS,J(u.value.note),1)])])):H("",!0)])):c.value&&!u.value&&!r.value?(v(),k("div",XS,[f("p",ZS,[b[16]||(b[16]=de(" Documentation for ",-1)),f("code",eC,J(c.value),1),b[17]||(b[17]=de(" not found. ",-1))])])):H("",!0)])]))}},sC={key:0,class:"px-4 py-5 sm:px-6"},nC={class:"px-4 py-5 sm:p-6"},iC={key:1,class:"px-4 py-4 sm:px-6"},rC={__name:"Card",setup(s){const e=Ak(),t=F(()=>{const n=["overflow-hidden","rounded-lg","bg-white","shadow-sm","dark:bg-gray-800/50","dark:shadow-none","dark:outline","dark:-outline-offset-1","dark:outline-white/10"];return(e.header||e.footer)&&n.push("divide-y","divide-gray-200","dark:divide-white/10"),n.join(" ")});return(n,i)=>(v(),k("div",{class:xe(t.value)},[n.$slots.header?(v(),k("div",sC,[dt(n.$slots,"header")])):H("",!0),f("div",nC,[dt(n.$slots,"default")]),n.$slots.footer?(v(),k("div",iC,[dt(n.$slots,"footer")])):H("",!0)],2))}},Je={__name:"Button",props:{variant:{type:String,default:"primary",validator:s=>["primary","secondary","soft"].includes(s)},size:{type:String,default:"md",validator:s=>["xs","sm","md","lg","xl"].includes(s)},rounded:{type:String,default:"md",validator:s=>["sm","md","full"].includes(s)},type:{type:String,default:"button"},href:{type:String,default:null},icon:{type:[Object,Function],default:null},iconPosition:{type:String,default:"left",validator:s=>["left","right"].includes(s)},iconOnly:{type:Boolean,default:!1}},emits:["click"],setup(s,{emit:e}){const t=s,n=e,i=l=>{n("click",l)},r=F(()=>{const l=["font-semibold","focus-visible:outline-2","focus-visible:outline-offset-2"],a={xs:t.iconOnly?"p-2":"px-3 py-2 text-xs",sm:t.iconOnly?"p-2.5":"px-3 py-2 text-sm",md:t.iconOnly?"p-3":"px-3.5 py-2.5 text-sm",lg:t.iconOnly?"p-3":"px-4 py-3 text-sm",xl:t.iconOnly?"p-3.5":"px-4.5 py-3.5 text-sm"};l.push(a[t.size]);const c={sm:"rounded-sm",md:"rounded-md",full:"rounded-full"};return l.push(c[t.rounded]),t.variant==="primary"?l.push("bg-sky-600","text-white","shadow-xs","hover:bg-sky-500","focus-visible:outline-sky-600","dark:bg-sky-500","dark:shadow-none","dark:hover:bg-sky-400","dark:focus-visible:outline-sky-500"):t.variant==="secondary"?l.push("bg-white","text-gray-900","shadow-xs","inset-ring","inset-ring-gray-300","hover:bg-gray-50","dark:bg-white/10","dark:text-white","dark:shadow-none","dark:inset-ring-white/5","dark:hover:bg-white/20"):t.variant==="soft"&&l.push("bg-sky-50","text-sky-600","shadow-xs","hover:bg-sky-100","dark:bg-sky-500/20","dark:text-sky-400","dark:shadow-none","dark:hover:bg-sky-500/30"),t.icon&&!t.iconOnly&&(l.push("inline-flex","items-center"),l.push(t.size==="xl"?"gap-x-2":"gap-x-1.5")),l.join(" ")}),o=F(()=>{const l=[];return t.iconOnly?l.push("size-5"):(l.push("size-5"),t.iconPosition==="left"?l.push("-ml-0.5"):l.push("-mr-0.5")),l.join(" ")});return(l,a)=>(v(),Ae(Ms(s.href?"a":"button"),{href:s.href,type:s.href?void 0:s.type,class:xe(r.value),onClick:i},{default:X(()=>[s.icon&&s.iconPosition==="left"?(v(),k("svg",{key:0,viewBox:"0 0 20 20",fill:"currentColor","data-slot":"icon","aria-hidden":"true",class:xe(o.value)},[(v(),Ae(Ms(s.icon)))],2)):H("",!0),dt(l.$slots,"default"),s.icon&&s.iconPosition==="right"?(v(),k("svg",{key:1,viewBox:"0 0 20 20",fill:"currentColor","data-slot":"icon","aria-hidden":"true",class:xe(o.value)},[(v(),Ae(Ms(s.icon)))],2)):H("",!0)]),_:3},8,["href","type","class"]))}},oC=["for"],lC={key:1,class:"mt-2 flex"},aC={class:"flex shrink-0 items-center rounded-l-md bg-gray-100 px-2 text-base text-gray-500 outline-1 -outline-offset-1 outline-gray-300 sm:text-sm/6 dark:bg-white/5 dark:text-gray-400 dark:outline-white/10 font-mono"},uC=["id","type","value","placeholder","required","disabled","aria-invalid","aria-describedby"],cC={key:2,class:"mt-2"},dC=["id","type","value","placeholder","required","disabled","aria-invalid","aria-describedby"],fC={key:0,viewBox:"0 0 16 16",fill:"currentColor","data-slot":"icon","aria-hidden":"true",class:"pointer-events-none col-start-1 row-start-1 mr-3 size-5 self-center justify-self-end text-red-500 sm:size-4 dark:text-red-400"},hC=["id"],pC=["id"],Se={__name:"Input",props:{id:{type:String,default:()=>`input-${Math.random().toString(36).substr(2,9)}`},modelValue:{type:[String,Number],default:""},type:{type:String,default:"text"},label:{type:String,default:null},placeholder:{type:String,default:""},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},error:{type:String,default:null},hint:{type:String,default:null},monospace:{type:Boolean,default:!1},prefix:{type:String,default:null}},emits:["update:modelValue","blur"],setup(s){const e=s,t=F(()=>{const i=["block","w-full","rounded-md","bg-white","px-3","py-1.5","text-base","outline-1","-outline-offset-1","placeholder:text-gray-400","focus:outline-2","focus:-outline-offset-2","sm:text-sm/6","dark:bg-white/5","dark:placeholder:text-gray-500"];return e.monospace&&i.push("font-mono"),e.error?i.push("col-start-1","row-start-1","pr-10","pl-3","text-red-900","outline-red-300","placeholder:text-red-300","focus:outline-red-600","sm:pr-9","dark:text-red-400","dark:outline-red-500/50","dark:placeholder:text-red-400/70","dark:focus:outline-red-400"):i.push("text-gray-900","outline-gray-300","focus:outline-sky-600","dark:text-white","dark:outline-white/10","dark:focus:outline-sky-500"),i.join(" ")}),n=F(()=>{const i=["-ml-px","block","w-full","grow","rounded-r-md","bg-white","px-3","py-1.5","text-base","outline-1","-outline-offset-1","placeholder:text-gray-400","focus:outline-2","focus:-outline-offset-2","sm:text-sm/6","dark:bg-white/5","dark:placeholder:text-gray-500"];return e.monospace&&i.push("font-mono"),e.error?i.push("text-red-900","outline-red-300","placeholder:text-red-300","focus:outline-red-600","dark:text-red-400","dark:outline-red-500/50","dark:placeholder:text-red-400/70","dark:focus:outline-red-400"):i.push("text-gray-900","outline-gray-300","focus:outline-sky-600","dark:text-white","dark:outline-white/10","dark:focus:outline-sky-500"),i.join(" ")});return(i,r)=>(v(),k("div",null,[s.label?(v(),k("label",{key:0,for:s.id,class:"block text-sm/6 font-medium text-gray-900 dark:text-white"},J(s.label),9,oC)):H("",!0),s.prefix?(v(),k("div",lC,[f("div",aC,J(s.prefix),1),f("input",{id:s.id,type:s.type,value:s.modelValue,placeholder:s.placeholder,required:s.required,disabled:s.disabled,"aria-invalid":s.error?"true":void 0,"aria-describedby":s.error?`${s.id}-error`:s.hint?`${s.id}-description`:void 0,onInput:r[0]||(r[0]=o=>i.$emit("update:modelValue",o.target.value)),onBlur:r[1]||(r[1]=o=>i.$emit("blur",o)),class:xe(n.value)},null,42,uC)])):(v(),k("div",cC,[f("input",{id:s.id,type:s.type,value:s.modelValue,placeholder:s.placeholder,required:s.required,disabled:s.disabled,"aria-invalid":s.error?"true":void 0,"aria-describedby":s.error?`${s.id}-error`:s.hint?`${s.id}-description`:void 0,onInput:r[2]||(r[2]=o=>i.$emit("update:modelValue",o.target.value)),onBlur:r[3]||(r[3]=o=>i.$emit("blur",o)),class:xe(t.value)},null,42,dC),s.error?(v(),k("svg",fC,[...r[4]||(r[4]=[f("path",{d:"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14ZM8 4a.75.75 0 0 1 .75.75v3a.75.75 0 0 1-1.5 0v-3A.75.75 0 0 1 8 4Zm0 8a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z","clip-rule":"evenodd","fill-rule":"evenodd"},null,-1)])])):H("",!0)])),s.error?(v(),k("p",{key:3,id:`${s.id}-error`,class:"mt-2 text-sm text-red-600 dark:text-red-400"},J(s.error),9,hC)):H("",!0),s.hint&&!s.error?(v(),k("p",{key:4,id:`${s.id}-description`,class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},J(s.hint),9,pC)):H("",!0)]))}},gC={class:"flex gap-3"},mC={class:"flex h-6 shrink-0 items-center"},vC={class:"group grid size-4 grid-cols-1"},yC=["id","name","checked","aria-describedby"],bC={class:"text-sm/6"},kC=["for"],xC=["id"],Rn={__name:"Checkbox",props:{id:{type:String,required:!0},name:{type:String,default:null},modelValue:{type:Boolean,default:!1},description:{type:String,default:null}},emits:["update:modelValue"],setup(s){return(e,t)=>(v(),k("div",gC,[f("div",mC,[f("div",vC,[f("input",{id:s.id,type:"checkbox",name:s.name,checked:s.modelValue,"aria-describedby":s.description?`${s.id}-description`:void 0,onChange:t[0]||(t[0]=n=>e.$emit("update:modelValue",n.target.checked)),class:"col-start-1 row-start-1 appearance-none rounded-sm border border-gray-300 bg-white checked:border-sky-600 checked:bg-sky-600 indeterminate:border-sky-600 indeterminate:bg-sky-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:checked:bg-gray-100 dark:border-white/10 dark:bg-white/5 dark:checked:border-sky-500 dark:checked:bg-sky-500 dark:indeterminate:border-sky-500 dark:indeterminate:bg-sky-500 dark:focus-visible:outline-sky-500 dark:disabled:border-white/5 dark:disabled:bg-white/10 dark:disabled:checked:bg-white/10 forced-colors:appearance-auto"},null,40,yC),t[1]||(t[1]=f("svg",{viewBox:"0 0 14 14",fill:"none",class:"pointer-events-none col-start-1 row-start-1 size-3.5 self-center justify-self-center stroke-white group-has-disabled:stroke-gray-950/25 dark:group-has-disabled:stroke-white/25"},[f("path",{d:"M3 8L6 11L11 3.5","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"opacity-0 group-has-checked:opacity-100"}),f("path",{d:"M3 7H11","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"opacity-0 group-has-indeterminate:opacity-100"})],-1))])]),f("div",bC,[f("label",{for:s.id,class:"font-medium text-gray-900 dark:text-white"},[dt(e.$slots,"default")],8,kC),s.description?(v(),k("p",{key:0,id:`${s.id}-description`,class:"text-gray-500 dark:text-gray-400"},J(s.description),9,xC)):H("",!0)])]))}};function wC(s,e){return v(),k("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z","clip-rule":"evenodd"})])}function SC(s,e){return v(),k("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"fill-rule":"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z","clip-rule":"evenodd"})])}function CC(s,e){return v(),k("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 0 1 .67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 1 1-.671-1.34l.041-.022ZM12 9a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z","clip-rule":"evenodd"})])}function _C(s,e){return v(),k("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-1.72 6.97a.75.75 0 1 0-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 1 0 1.06 1.06L12 13.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L13.06 12l1.72-1.72a.75.75 0 1 0-1.06-1.06L12 10.94l-1.72-1.72Z","clip-rule":"evenodd"})])}const AC={class:"flex gap-3"},MC={class:"flex-1"},js={__name:"Alert",props:{type:{type:String,default:"info",validator:s=>["success","error","warning","info"].includes(s)},title:{type:String,default:null},description:{type:String,default:null},dismissible:{type:Boolean,default:!1}},emits:["dismiss"],setup(s,{emit:e}){const t=s,n=e,i={success:{container:"bg-sky-50 dark:bg-sky-900/20 inset-ring inset-ring-sky-200 dark:inset-ring-sky-800",icon:"text-sky-600 dark:text-sky-400",title:"text-sky-800 dark:text-sky-200",description:"text-sky-700 dark:text-sky-300",dismiss:"text-sky-600 hover:text-sky-700 dark:text-sky-400 dark:hover:text-sky-300"},error:{container:"bg-red-50 dark:bg-red-900/20 inset-ring inset-ring-red-200 dark:inset-ring-red-800",icon:"text-red-600 dark:text-red-400",title:"text-red-800 dark:text-red-200",description:"text-red-700 dark:text-red-300",dismiss:"text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300"},warning:{container:"bg-yellow-50 dark:bg-yellow-900/20 inset-ring inset-ring-yellow-200 dark:inset-ring-yellow-800",icon:"text-yellow-600 dark:text-yellow-400",title:"text-yellow-800 dark:text-yellow-200",description:"text-yellow-700 dark:text-yellow-300",dismiss:"text-yellow-600 hover:text-yellow-700 dark:text-yellow-400 dark:hover:text-yellow-300"},info:{container:"bg-blue-50 dark:bg-blue-900/20 inset-ring inset-ring-blue-200 dark:inset-ring-blue-800",icon:"text-blue-600 dark:text-blue-400",title:"text-blue-800 dark:text-blue-200",description:"text-blue-700 dark:text-blue-300",dismiss:"text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300"}},r=F(()=>`rounded-lg p-4 ${i[t.type].container}`),o=F(()=>`text-sm font-medium ${i[t.type].title}`),l=F(()=>{const d=[`text-sm ${i[t.type].description}`];return t.title&&d.push("mt-1"),d.join(" ")}),a=F(()=>`rounded-md p-1 ${i[t.type].dismiss} focus:outline-2 focus:outline-offset-2`),c=F(()=>({success:wC,error:_C,warning:SC,info:CC})[t.type]),u=()=>{n("dismiss")};return(d,h)=>(v(),k("div",{class:xe(r.value),role:"alert"},[f("div",AC,[(v(),Ae(Ms(c.value),{class:xe(["h-5 w-5 shrink-0",i[s.type].icon])},null,8,["class"])),f("div",MC,[s.title?(v(),k("p",{key:0,class:xe(o.value)},J(s.title),3)):H("",!0),s.description||d.$slots.default?(v(),k("p",{key:1,class:xe(l.value)},[dt(d.$slots,"default",{},()=>[de(J(s.description),1)])],2)):H("",!0)]),s.dismissible?(v(),k("button",{key:0,type:"button",onClick:u,class:xe(a.value)},[...h[0]||(h[0]=[f("span",{class:"sr-only"},"Dismiss",-1),f("svg",{viewBox:"0 0 20 20",fill:"currentColor",class:"size-5"},[f("path",{d:"M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z"})],-1)])],2)):H("",!0)])],2))}},DC={class:"flex items-center justify-between"},EC={class:"space-y-6"},TC={key:0,class:"text-xs text-gray-500 dark:text-gray-400 space-y-1"},jC={key:0},OC={class:"font-mono"},PC={key:1},$C={class:"font-mono"},RC={class:"space-y-2"},LC=["onClick"],VC={class:"flex items-start gap-3"},BC={class:"text-2xl mt-0.5"},IC={class:"flex-1"},NC={class:"font-semibold text-gray-900 dark:text-white"},FC={class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},zC={key:0,class:"text-sky-600 dark:text-sky-400"},UC={key:1,class:"bg-gray-50 dark:bg-gray-800/50 rounded-lg p-4"},HC={class:"space-y-3"},qC={class:"list-decimal list-inside mt-1 space-y-1"},WC={class:"flex items-center justify-end gap-3"},KC={__name:"ProjectWizard",props:{mode:{type:String,default:"modal",validator:s=>["modal","page"].includes(s)},projectsRoot:{type:String,default:""}},emits:["close","created"],setup(s,{emit:e}){const t=s,n=e,i=F(()=>t.mode==="modal"),r=F(()=>(t.projectsRoot||"").trim()),o=L=>/^([A-Za-z]:[\\/]|\\\\|\/|~)/.test(L),l=(L,_)=>{if(!L)return _;const R=_.replace(/^[\\/]+/,"");if(!R)return L;if(L.endsWith("/")||L.endsWith("\\"))return`${L}${R}`;const W=L.includes("\\")&&!L.includes("/")?"\\":"/";return`${L}${W}${R}`},a=F(()=>i.value?"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4":"flex w-full justify-center"),c=F(()=>i.value?"max-w-2xl w-full max-h-[90vh] overflow-y-auto":"w-full max-w-2xl shadow-xl"),u=Js({directory:"",name:"",type:"project",sensitive:!1,use_git:!0,use_renv:!1,attach_defaults:!0}),d=F(()=>{const L=u.directory.trim();return L?o(L)||!r.value?L:l(r.value,L):r.value||""}),h=F(()=>{const L=u.directory.trim();return L?r.value.length>0||o(L):!1}),p=F(()=>r.value?`Folder will be created inside ${r.value}`:"The directory where your project will be created"),y=F(()=>r.value?"analytics-project":"my-analysis"),b=[{id:"project",title:"Data Analysis",description:"Full-featured project with notebooks, scripts, data management, and results tracking",icon:""},{id:"course",title:"Course Materials",description:"Teaching materials with slides, assignments, and course documentation",icon:""},{id:"presentation",title:"Presentation",description:"Single talk or presentation with minimal structure",icon:""}],x=Y(!1),g=Y(""),j=Y(!1),B=()=>{i.value&&n("close")},U=()=>{!u.name&&u.directory&&(u.name=u.directory.split(/[-_]/).map(L=>L.charAt(0).toUpperCase()+L.slice(1)).join(" "))},I=async()=>{g.value="",j.value=!1,x.value=!0;try{const L=d.value||u.directory,_=await fetch("/api/project/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_dir:L,project_name:u.name||u.directory,type:u.type,sensitive:u.sensitive,use_git:u.use_git,use_renv:u.use_renv,attach_defaults:u.attach_defaults})}),R=await _.json();_.ok&&R.success?(j.value=!0,R&&!R.path&&(R.path=L),n("created",R),i.value&&setTimeout(()=>{n("close")},3e3)):g.value=R.error||"Failed to create project"}catch(L){g.value="Network error: "+L.message}finally{x.value=!1}};return(L,_)=>(v(),k("div",{class:xe(a.value),onClick:Pt(B,["self"])},[S(rC,{class:xe(c.value)},{header:X(()=>[f("div",DC,[_[9]||(_[9]=f("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Create New Project",-1)),i.value?(v(),k("button",{key:0,onClick:_[0]||(_[0]=R=>L.$emit("close")),class:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition"},[..._[8]||(_[8]=[f("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])):H("",!0)])]),footer:X(()=>[f("div",WC,[S(Je,{variant:"secondary",onClick:_[7]||(_[7]=R=>L.$emit("close"))},{default:X(()=>[..._[23]||(_[23]=[de(" Cancel ",-1)])]),_:1}),S(Je,{variant:"primary",onClick:I,disabled:x.value||!u.directory},{default:X(()=>[de(J(x.value?"Creating...":"Create Project"),1)]),_:1},8,["disabled"])])]),default:X(()=>[f("div",EC,[S(Se,{modelValue:u.directory,"onUpdate:modelValue":_[1]||(_[1]=R=>u.directory=R),label:"Project Directory",placeholder:y.value,hint:p.value,onInput:U},null,8,["modelValue","placeholder","hint"]),r.value||h.value?(v(),k("div",TC,[r.value?(v(),k("p",jC,[_[10]||(_[10]=de(" Projects will be created inside ",-1)),f("span",OC,J(r.value),1),_[11]||(_[11]=de(". ",-1))])):H("",!0),h.value?(v(),k("p",PC,[_[12]||(_[12]=de(" Full path: ",-1)),f("span",$C,J(d.value),1)])):H("",!0)])):H("",!0),S(Se,{modelValue:u.name,"onUpdate:modelValue":_[2]||(_[2]=R=>u.name=R),label:"Project Name",placeholder:"My Analysis"},null,8,["modelValue"]),f("div",null,[_[14]||(_[14]=f("label",{class:"block text-sm/6 font-medium text-gray-900 dark:text-white mb-3"}," Project Type ",-1)),f("div",RC,[(v(),k(be,null,Le(b,R=>f("div",{key:R.id,onClick:W=>u.type=R.id,class:xe(["border-2 rounded-lg p-4 cursor-pointer transition",u.type===R.id?"border-sky-600 bg-sky-50 dark:bg-sky-900/20 dark:border-sky-500":"border-gray-200 dark:border-gray-700 hover:border-sky-300 dark:hover:border-sky-600"])},[f("div",VC,[f("div",BC,J(R.icon),1),f("div",IC,[f("h3",NC,J(R.title),1),f("p",FC,J(R.description),1)]),u.type===R.id?(v(),k("div",zC,[..._[13]||(_[13]=[f("svg",{class:"h-6 w-6",fill:"currentColor",viewBox:"0 0 20 20"},[f("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1)])])):H("",!0)])],10,LC)),64))])]),u.type==="project"?(v(),k("div",UC,[S(Rn,{modelValue:u.sensitive,"onUpdate:modelValue":_[3]||(_[3]=R=>u.sensitive=R),id:"sensitive",description:"Creates separate public/private directories for inputs, reference materials, and outputs. Recommended for PHI, PII, or IRB-restricted data."},{default:X(()=>[..._[15]||(_[15]=[de(" Privacy-first mode ",-1)])]),_:1},8,["modelValue"])])):H("",!0),f("div",HC,[S(Rn,{modelValue:u.use_git,"onUpdate:modelValue":_[4]||(_[4]=R=>u.use_git=R),id:"use_git"},{default:X(()=>[..._[16]||(_[16]=[de(" Initialize git repository ",-1)])]),_:1},8,["modelValue"]),S(Rn,{modelValue:u.use_renv,"onUpdate:modelValue":_[5]||(_[5]=R=>u.use_renv=R),id:"use_renv"},{default:X(()=>[..._[17]||(_[17]=[de(" Enable renv for package management ",-1)])]),_:1},8,["modelValue"]),S(Rn,{modelValue:u.attach_defaults,"onUpdate:modelValue":_[6]||(_[6]=R=>u.attach_defaults=R),id:"attach_defaults"},{default:X(()=>[..._[18]||(_[18]=[de(" Auto-load common packages (dplyr, tidyr, ggplot2) ",-1)])]),_:1},8,["modelValue"])]),g.value?(v(),Ae(js,{key:2,type:"error",description:g.value},null,8,["description"])):H("",!0),j.value?(v(),Ae(js,{key:3,type:"success",title:"Project created successfully!"},{default:X(()=>[_[22]||(_[22]=f("p",{class:"mt-2"},"Next steps:",-1)),f("ol",qC,[f("li",null,"cd "+J(d.value),1),_[19]||(_[19]=f("li",null,"R",-1)),_[20]||(_[20]=f("li",null,"library(framework)",-1)),_[21]||(_[21]=f("li",null,"scaffold()",-1))])]),_:1})):H("",!0)])]),_:1},8,["class"])],2))}},GC={class:"flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-sky-500 to-sky-600 shadow-lg shadow-sky-500/20"},JC={key:0,class:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},QC={key:1,class:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},YC={key:2,class:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},XC={__name:"ProjectTypeIcon",props:{type:{type:String,required:!0,validator:s=>["project","course","presentation"].includes(s)}},setup(s){return(e,t)=>(v(),k("div",GC,[s.type==="project"?(v(),k("svg",JC,[...t[0]||(t[0]=[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)])])):s.type==="course"?(v(),k("svg",QC,[...t[1]||(t[1]=[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"},null,-1)])])):(v(),k("svg",YC,[...t[2]||(t[2]=[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"},null,-1)])]))]))}},ZC={class:"flex items-center gap-2 text-xs text-zinc-600 dark:text-zinc-400"},e4={class:"truncate"},t4={__name:"ProjectAuthor",props:{author:{type:Object,required:!0}},setup(s){return(e,t)=>(v(),k("div",ZC,[t[1]||(t[1]=f("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),f("span",null,J(s.author.author),1),s.author.author_email?(v(),k(be,{key:0},[t[0]||(t[0]=f("span",{class:"text-zinc-400 dark:text-zinc-500"},"",-1)),f("span",e4,J(s.author.author_email),1)],64)):H("",!0)]))}},s4={class:"flex items-center gap-2 text-xs text-zinc-500 dark:text-zinc-500"},n4={__name:"ProjectCreatedDate",props:{date:{type:String,required:!0}},setup(s){return(e,t)=>(v(),k("div",s4,[t[0]||(t[0]=f("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),f("span",null,"Created "+J(s.date),1)]))}},au={__name:"Badge",props:{variant:{type:String,default:"gray",validator:s=>["gray","red","yellow","green","blue","indigo","purple","pink","sky"].includes(s)},pill:{type:Boolean,default:!1},dot:{type:Boolean,default:!1}},setup(s){const e=s,t=F(()=>{const i=["inline-flex","items-center","px-2","py-1","text-xs","font-medium","inset-ring"];i.push(e.pill?"rounded-full":"rounded-md"),e.dot&&i.push("gap-x-1.5");const o={gray:{bg:"bg-gray-50",text:"text-gray-600",ring:"inset-ring-gray-500/10",darkBg:"dark:bg-gray-400/10",darkText:e.dot?"dark:text-gray-200":"dark:text-gray-400",darkRing:e.dot?"dark:inset-ring-white/10":"dark:inset-ring-gray-400/20"},red:{bg:"bg-red-50",text:"text-red-700",ring:"inset-ring-red-600/10",darkBg:"dark:bg-red-400/10",darkText:"dark:text-red-400",darkRing:"dark:inset-ring-red-400/20"},yellow:{bg:"bg-yellow-50",text:"text-yellow-800",ring:"inset-ring-yellow-600/20",darkBg:"dark:bg-yellow-400/10",darkText:"dark:text-yellow-500",darkRing:"dark:inset-ring-yellow-400/20"},green:{bg:"bg-green-50",text:"text-green-700",ring:"inset-ring-green-600/20",darkBg:"dark:bg-green-400/10",darkText:"dark:text-green-400",darkRing:"dark:inset-ring-green-500/20"},sky:{bg:"bg-sky-50",text:"text-sky-700",ring:"inset-ring-sky-600/20",darkBg:"dark:bg-sky-400/10",darkText:"dark:text-sky-400",darkRing:"dark:inset-ring-sky-500/20"},blue:{bg:"bg-blue-50",text:"text-blue-700",ring:"inset-ring-blue-700/10",darkBg:"dark:bg-blue-400/10",darkText:"dark:text-blue-400",darkRing:"dark:inset-ring-blue-400/30"},indigo:{bg:"bg-indigo-50",text:"text-indigo-700",ring:"inset-ring-indigo-700/10",darkBg:"dark:bg-indigo-400/10",darkText:"dark:text-indigo-400",darkRing:"dark:inset-ring-indigo-400/30"},purple:{bg:"bg-purple-50",text:"text-purple-700",ring:"inset-ring-purple-700/10",darkBg:"dark:bg-purple-400/10",darkText:"dark:text-purple-400",darkRing:"dark:inset-ring-purple-400/30"},pink:{bg:"bg-pink-50",text:"text-pink-700",ring:"inset-ring-pink-700/10",darkBg:"dark:bg-pink-400/10",darkText:"dark:text-pink-400",darkRing:"dark:inset-ring-pink-400/20"}}[e.variant];return e.dot?i.push("text-gray-900","inset-ring-gray-200","dark:text-white","dark:inset-ring-white/10"):i.push(o.bg,o.text,o.ring,o.darkBg,o.darkText,o.darkRing),i.join(" ")}),n=F(()=>`size-1.5 ${{gray:"fill-gray-500 dark:fill-gray-400",red:"fill-red-500 dark:fill-red-400",yellow:"fill-yellow-500 dark:fill-yellow-400",green:"fill-green-500 dark:fill-green-400",sky:"fill-sky-500 dark:fill-sky-400",blue:"fill-blue-500 dark:fill-blue-400",indigo:"fill-indigo-500 dark:fill-indigo-400",purple:"fill-purple-500 dark:fill-purple-400",pink:"fill-pink-500 dark:fill-pink-400"}[e.variant]}`);return(i,r)=>(v(),k("span",{class:xe(t.value)},[s.dot?(v(),k("svg",{key:0,viewBox:"0 0 6 6","aria-hidden":"true",class:xe(n.value)},[...r[0]||(r[0]=[f("circle",{r:"3",cx:"3",cy:"3"},null,-1)])],2)):H("",!0),dt(i.$slots,"default")],2))}},i4={class:"group relative overflow-hidden rounded-2xl border border-zinc-200 bg-white p-6 shadow-sm transition-all duration-300 hover:shadow-xl hover:shadow-zinc-900/5 dark:border-zinc-800 dark:bg-zinc-900 dark:hover:shadow-sky-500/5"},r4={class:"relative"},o4={class:"flex items-start justify-between"},l4={class:"flex-1"},a4={class:"flex items-center gap-3"},u4={class:"mt-4 text-xl font-bold text-zinc-900 dark:text-white"},c4={class:"mt-2 text-sm text-zinc-600 dark:text-zinc-400 font-mono truncate"},d4={class:"mt-6 flex gap-2"},f4={__name:"ProjectCard",props:{project:{type:Object,required:!0},typeLabel:{type:String,required:!0}},emits:["view","details"],setup(s){return(e,t)=>(v(),k("div",i4,[t[4]||(t[4]=f("div",{class:"absolute -right-6 -top-6 h-24 w-24 rounded-full bg-gradient-to-br from-sky-500/10 to-sky-600/10 blur-2xl transition-all duration-300 group-hover:scale-150"},null,-1)),f("div",r4,[f("div",o4,[f("div",l4,[f("div",a4,[S(XC,{type:s.project.type},null,8,["type"]),S(au,{variant:"sky"},{default:X(()=>[de(J(s.typeLabel),1)]),_:1})]),f("h3",u4,J(s.project.name),1),f("p",c4,J(s.project.path),1),s.project.author?(v(),Ae(t4,{key:0,author:s.project,class:"mt-3"},null,8,["author"])):H("",!0),S(n4,{date:s.project.created,class:"mt-3"},null,8,["date"])])]),f("div",d4,[S(Je,{variant:"primary",size:"md",onClick:t[0]||(t[0]=n=>e.$emit("view",s.project)),class:"flex-1"},{default:X(()=>[...t[2]||(t[2]=[de(" View Project ",-1)])]),_:1}),S(Je,{variant:"secondary",size:"md",onClick:t[1]||(t[1]=n=>e.$emit("details",s.project)),class:"flex-1"},{default:X(()=>[...t[3]||(t[3]=[de(" See More ",-1)])]),_:1})])])]))}},h4={class:"flex items-start justify-between"},p4={class:"text-3xl font-bold tracking-tight text-gray-900 dark:text-white"},g4={key:0,class:"mt-2 text-sm text-gray-600 dark:text-gray-400"},m4={key:0},Ir={__name:"PageHeader",props:{title:{type:String,required:!0},description:{type:String,default:null}},setup(s){return(e,t)=>(v(),k("div",h4,[f("div",null,[f("h1",p4,J(s.title),1),s.description?(v(),k("p",g4,J(s.description),1)):H("",!0)]),e.$slots.actions?(v(),k("div",m4,[dt(e.$slots,"actions")])):H("",!0)]))}},F0=(s,e)=>{const t=s.__vccOpts||s;for(const[n,i]of e)t[n]=i;return t},v4={key:0,class:"relative z-50"},y4={class:"fixed inset-0 z-10 overflow-y-auto"},b4={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},k4=["aria-labelledby"],x4=["id"],w4={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},S4={__name:"Modal",props:{modelValue:{type:Boolean,default:!1},title:{type:String,default:null},description:{type:String,default:null},icon:{type:String,default:null,validator:s=>["success","error","warning","info"].includes(s)},size:{type:String,default:"md",validator:s=>["sm","md","lg","xl"].includes(s)},variant:{type:String,default:"centered",validator:s=>["centered","side-icon","left"].includes(s)},closeOnBackdrop:{type:Boolean,default:!0}},emits:["update:modelValue","close"],setup(s,{expose:e,emit:t}){const n=s,i=t,r=F(()=>`modal-title-${Math.random().toString(36).substr(2,9)}`),o={sm:"sm:max-w-sm",md:"sm:max-w-lg",lg:"sm:max-w-2xl",xl:"sm:max-w-4xl"},l=F(()=>["relative","transform","overflow-hidden","rounded-lg","bg-white","px-4","pt-5","pb-4","text-left","shadow-xl","transition-all","sm:my-8","sm:w-full","sm:p-6","dark:bg-gray-800","dark:outline","dark:-outline-offset-1","dark:outline-white/10",o[n.size]].join(" ")),a=F(()=>{const g=["flex","items-center","justify-center","rounded-full"];n.variant==="centered"?g.push("mx-auto","size-12"):g.push("shrink-0","sm:mx-0","sm:size-10");const j={success:"bg-sky-100 text-sky-600 dark:bg-sky-500/10 dark:text-sky-400",error:"bg-red-100 text-red-600 dark:bg-red-500/10 dark:text-red-400",warning:"bg-yellow-100 text-yellow-600 dark:bg-yellow-500/10 dark:text-yellow-400",info:"bg-blue-100 text-blue-600 dark:bg-blue-500/10 dark:text-blue-400"};return n.icon&&g.push(j[n.icon]),g.join(" ")}),c=F(()=>{const g=[];return n.variant==="centered"?g.push("mt-3","text-center","sm:mt-5"):n.variant==="left"?g.push("text-left"):g.push("mt-3","text-center","sm:mt-0","sm:ml-4","sm:text-left"),n.variant==="side-icon"&&(n.icon||n.$slots.icon)&&g.push("sm:flex","sm:items-start"),g.join(" ")}),u=F(()=>n.variant==="left"?"text-lg font-bold text-gray-900 dark:text-white mb-4":"text-base font-semibold text-gray-900 dark:text-white"),d=F(()=>(n.variant==="centered","mt-2")),h=F(()=>n.variant==="left"?"mt-6 pt-4 border-t border-gray-200 dark:border-gray-700 flex gap-3 justify-between":n.variant==="centered"?"mt-5 sm:mt-6 flex gap-3 justify-end":"mt-5 sm:mt-4 flex gap-3 justify-end"),p=F(()=>n.icon==="success"?{template:`
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="m4.5 12.75 6 6 9-13.5" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      `}:n.icon==="error"||n.icon==="warning"?{template:`
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      `}:n.icon==="info"?{template:`
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      `}:null),y=()=>{n.closeOnBackdrop&&x()},b=g=>{g.key==="Escape"&&n.modelValue&&x()},x=()=>{i("update:modelValue",!1),i("close")};return as(()=>{window.addEventListener("keydown",b)}),Lr(()=>{window.removeEventListener("keydown",b)}),e({close:x}),(g,j)=>(v(),Ae(Um,{to:"body"},[S(Xd,{name:"modal"},{default:X(()=>[s.modelValue?(v(),k("div",v4,[f("div",{class:"fixed inset-0 bg-gray-500/75 transition-opacity dark:bg-gray-900/50",onClick:y}),f("div",y4,[f("div",b4,[f("div",{class:xe(l.value),role:"dialog","aria-modal":"true","aria-labelledby":r.value},[g.$slots.icon||s.icon?(v(),k("div",{key:0,class:xe(a.value)},[dt(g.$slots,"icon",{},()=>[s.icon?(v(),Ae(Ms(p.value),{key:0,class:"size-6"})):H("",!0)],!0)],2)):H("",!0),f("div",{class:xe(c.value)},[s.title?(v(),k("h3",{key:0,id:r.value,class:xe(u.value)},J(s.title),11,x4)):H("",!0),s.description||g.$slots.default?(v(),k("div",{key:1,class:xe(d.value)},[s.description?(v(),k("p",w4,J(s.description),1)):dt(g.$slots,"default",{key:1},void 0,!0)],2)):H("",!0)],2),g.$slots.actions?(v(),k("div",{key:1,class:xe(h.value)},[dt(g.$slots,"actions",{},void 0,!0)],2)):H("",!0)],10,k4)])])])):H("",!0)]),_:3})]))}},Ni=F0(S4,[["__scopeId","data-v-2e078ad9"]]),C4={class:"flex flex-col gap-3 rounded-2xl border border-zinc-200 bg-white p-5 shadow-sm dark:border-zinc-800 dark:bg-zinc-900 sm:flex-row sm:items-center sm:justify-between"},_4={class:"min-w-0"},A4={class:"text-sm font-medium text-zinc-700 dark:text-zinc-200"},M4={class:"mt-1 font-mono text-sm text-zinc-600 dark:text-zinc-400 truncate"},D4={class:"flex items-center gap-2"},E4={__name:"InfoCard",props:{label:{type:String,required:!0},value:{type:String,required:!0},copyable:{type:Boolean,default:!1},copyMessage:{type:String,default:"Copied!"}},setup(s){return(e,t)=>(v(),k("div",C4,[f("div",_4,[f("p",A4,J(s.label),1),f("p",M4,J(s.value),1)]),f("div",D4,[s.copyable?(v(),Ae(oi,{key:0,value:s.value,variant:"ghost","show-label":"","success-message":s.copyMessage},null,8,["value","success-message"])):H("",!0),dt(e.$slots,"actions")])]))}},T4={class:"mx-auto max-w-5xl p-10"},j4={class:"flex gap-3"},O4={key:1,class:"mt-10 grid gap-6 sm:grid-cols-2"},P4={key:2,class:"mt-12 overflow-hidden rounded-3xl bg-gradient-to-br from-sky-600 via-sky-500 to-teal-500 p-12 shadow-2xl shadow-sky-500/20"},$4={class:"space-y-4"},R4={key:0,class:"mt-2 text-sm text-red-600 dark:text-red-400"},L4={class:"flex gap-3 justify-end"},V4={key:0,class:"space-y-6"},B4={class:"text-lg font-semibold text-zinc-900 dark:text-white mb-3"},I4={class:"grid gap-4"},N4={class:"text-sm text-zinc-600 dark:text-zinc-400 font-mono bg-zinc-50 dark:bg-zinc-800 px-3 py-2 rounded-lg"},F4={key:0,class:"grid grid-cols-2 gap-4"},z4={class:"text-sm text-zinc-600 dark:text-zinc-400"},U4={key:0},H4={class:"text-sm text-zinc-600 dark:text-zinc-400"},q4={class:"text-sm text-zinc-600 dark:text-zinc-400"},W4={class:"flex gap-3 justify-end"},K4={__name:"ProjectsView",setup(s){const e=rl(),t=Br(),n=Y(!1),i=Y(!1),r=Y(!1),o=Y(""),l=Y(""),a=Y(!1),c=Y(null),u=Y({projects:[]}),d=Y(""),h=Y(null),p=L=>{if(!L)return"Unknown";const _=h.value?.project_types?.[L]?.label;return _||L.split("_").map(R=>R.charAt(0).toUpperCase()+R.slice(1)).join(" ")},y=async()=>{try{const _=await(await fetch("/api/settings/get")).json();u.value.projects=_.projects||[],d.value=_.global?.projects_root&&_.global.projects_root!==""?_.global.projects_root:""}catch(L){console.error("Failed to load settings:",L)}},b=()=>{t.path==="/projects/new"?n.value=!0:e.push("/projects/new")},x=()=>{n.value=!1,t.path==="/projects/new"&&e.push("/projects")},g=L=>{n.value=!1,y(),L?.id?e.push(`/project/${L.id}`):e.push("/projects")},j=()=>{i.value=!1,o.value="",l.value=""},B=L=>{c.value=L,r.value=!0},U=async()=>{l.value="",a.value=!0;try{const L=await fetch("/api/project/import",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_dir:o.value})}),_=await L.text();if(!_){l.value="Server returned empty response",a.value=!1;return}const R=JSON.parse(_);L.ok?(j(),y()):l.value=R.error||"Failed to import project"}catch(L){l.value="Network error: "+L.message}finally{a.value=!1}},I=async()=>{try{const _=await(await fetch("/api/settings-catalog")).json();_.error||(h.value=_)}catch(L){console.error("Failed to load settings catalog:",L)}};return as(()=>{y(),I(),n.value=t.path==="/projects/new"}),Pe(()=>t.path,L=>{n.value=L==="/projects/new"},{immediate:!0}),(L,_)=>(v(),k("div",T4,[S(Ir,{title:"Your Projects",description:"Framework projects you've created."},{actions:X(()=>[f("div",j4,[S(Je,{size:"lg",variant:"secondary",onClick:_[0]||(_[0]=R=>i.value=!0)},{default:X(()=>[..._[7]||(_[7]=[de(" Import Project ",-1)])]),_:1}),S(Je,{size:"lg",onClick:b},{default:X(()=>[..._[8]||(_[8]=[de(" New Project ",-1)])]),_:1})])]),_:1}),d.value?(v(),Ae(E4,{key:0,class:"mt-6",label:"Projects Root",value:d.value,copyable:"","copy-message":"Root path copied"},{actions:X(()=>[S(Je,{size:"sm",variant:"secondary",onClick:_[1]||(_[1]=R=>ct(e).push("/settings"))},{default:X(()=>[..._[9]||(_[9]=[de(" Edit ",-1)])]),_:1})]),_:1},8,["value"])):H("",!0),u.value.projects&&u.value.projects.length>0?(v(),k("div",O4,[(v(!0),k(be,null,Le(u.value.projects,(R,W)=>(v(),Ae(f4,{key:W,project:R,"type-label":p(R.type),onView:ce=>L.$router.push(`/project/${R.id}`),onDetails:B},null,8,["project","type-label","onView"]))),128))])):(v(),k("div",P4,[f("div",{class:"relative"},[_[12]||(_[12]=f("div",{class:"absolute -right-10 -top-10 h-40 w-40 rounded-full bg-white/10 blur-3xl"},null,-1)),_[13]||(_[13]=f("div",{class:"absolute -bottom-10 -left-10 h-40 w-40 rounded-full bg-white/10 blur-3xl"},null,-1)),f("div",{class:"relative text-center"},[_[11]||(_[11]=Vr('<div class="mx-auto flex h-16 w-16 items-center justify-center rounded-2xl bg-white/20 backdrop-blur-sm"><svg class="h-8 w-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg></div><h2 class="mt-6 text-3xl font-bold text-white">Ready to start?</h2><p class="mt-3 text-lg text-sky-50"> Create a new Framework project with a sensible structure and best practices built-in. </p>',3)),f("button",{onClick:b,class:"mt-8 inline-flex items-center gap-2 rounded-xl bg-white px-6 py-3 text-base font-semibold text-sky-600 shadow-xl transition-all duration-200 hover:scale-105 hover:shadow-2xl focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-white"},[..._[10]||(_[10]=[f("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),de(" Create Your First Project ",-1)])])])])])),n.value?(v(),Ae(KC,{key:3,"projects-root":d.value,onClose:x,onCreated:g},null,8,["projects-root"])):H("",!0),S(Ni,{modelValue:i.value,"onUpdate:modelValue":_[3]||(_[3]=R=>i.value=R),title:"Import Existing Project",size:"md"},{actions:X(()=>[f("div",L4,[S(Je,{variant:"secondary",onClick:j},{default:X(()=>[..._[17]||(_[17]=[de(" Cancel ",-1)])]),_:1}),S(Je,{variant:"primary",onClick:U,disabled:!o.value||a.value},{default:X(()=>[de(J(a.value?"Importing...":"Import"),1)]),_:1},8,["disabled"])])]),default:X(()=>[f("div",$4,[_[16]||(_[16]=f("p",{class:"text-sm text-zinc-600 dark:text-zinc-400"}," Import an existing Framework project that isn't in your registry yet. ",-1)),f("div",null,[_[14]||(_[14]=f("label",{for:"import-path",class:"block text-sm font-medium text-zinc-900 dark:text-white mb-2"}," Project Directory Path ",-1)),qe(f("input",{id:"import-path","onUpdate:modelValue":_[2]||(_[2]=R=>o.value=R),type:"text",placeholder:"/Users/you/projects/my-framework-project",class:xe(["block w-full rounded-lg border-0 px-4 py-2.5 text-zinc-900 shadow-sm ring-1 ring-inset ring-zinc-300 placeholder:text-zinc-400 focus:ring-2 focus:ring-inset focus:ring-sky-600 dark:bg-zinc-800 dark:text-white dark:ring-zinc-700 dark:placeholder:text-zinc-500 dark:focus:ring-sky-500 sm:text-sm sm:leading-6 font-mono",{"ring-red-500 dark:ring-red-500":l.value}])},null,2),[[Ii,o.value]]),_[15]||(_[15]=f("p",{class:"mt-2 text-xs text-zinc-500 dark:text-zinc-500"}," Enter the full path to the Framework project directory ",-1)),l.value?(v(),k("p",R4,J(l.value),1)):H("",!0)])])]),_:1},8,["modelValue"]),S(Ni,{modelValue:r.value,"onUpdate:modelValue":_[6]||(_[6]=R=>r.value=R),title:"Project Details",size:"lg"},{actions:X(()=>[f("div",W4,[S(Je,{variant:"secondary",onClick:_[4]||(_[4]=R=>r.value=!1)},{default:X(()=>[..._[22]||(_[22]=[de(" Close ",-1)])]),_:1}),S(Je,{variant:"primary",onClick:_[5]||(_[5]=R=>{L.$router.push(`/project/${c.value.id}`),r.value=!1})},{default:X(()=>[..._[23]||(_[23]=[de(" View Full Details ",-1)])]),_:1})])]),default:X(()=>[c.value?(v(),k("div",V4,[f("div",null,[f("h3",B4,J(c.value.name),1),S(au,{variant:"sky",class:"mb-4"},{default:X(()=>[de(J(c.value.type),1)]),_:1})]),f("div",I4,[f("div",null,[_[18]||(_[18]=f("label",{class:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1"}," Location ",-1)),f("p",N4,J(c.value.path),1)]),c.value.author?(v(),k("div",F4,[f("div",null,[_[19]||(_[19]=f("label",{class:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1"}," Author ",-1)),f("p",z4,J(c.value.author),1)]),c.value.author_email?(v(),k("div",U4,[_[20]||(_[20]=f("label",{class:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1"}," Email ",-1)),f("p",H4,J(c.value.author_email),1)])):H("",!0)])):H("",!0),f("div",null,[_[21]||(_[21]=f("label",{class:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1"}," Created ",-1)),f("p",q4,J(c.value.created),1)])])])):H("",!0)]),_:1},8,["modelValue"])]))}},G4=["for"],J4={class:"mt-2 grid grid-cols-1"},Q4=["id","value"],Y4={key:1,class:"mt-2 text-sm text-gray-500 dark:text-gray-400"},ns={__name:"Select",props:{id:{type:String,default:()=>`select-${Math.random().toString(36).substr(2,9)}`},modelValue:{type:[String,Number],default:""},label:{type:String,default:null},hint:{type:String,default:null}},emits:["update:modelValue"],setup(s){return(e,t)=>(v(),k("div",null,[s.label?(v(),k("label",{key:0,for:s.id,class:"block text-sm/6 font-medium text-gray-900 dark:text-white"},J(s.label),9,G4)):H("",!0),f("div",J4,[f("select",{id:s.id,value:s.modelValue,onChange:t[0]||(t[0]=n=>e.$emit("update:modelValue",n.target.value)),class:"col-start-1 row-start-1 w-full appearance-none rounded-md bg-white py-1.5 pr-8 pl-3 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 focus-visible:outline-2 focus-visible:-outline-offset-2 focus-visible:outline-sky-600 sm:text-sm/6 dark:bg-white/5 dark:text-white dark:outline-white/10 dark:*:bg-gray-800 dark:focus-visible:outline-sky-500"},[dt(e.$slots,"default")],40,Q4),t[1]||(t[1]=f("svg",{viewBox:"0 0 16 16",fill:"currentColor","data-slot":"icon","aria-hidden":"true",class:"pointer-events-none col-start-1 row-start-1 mr-2 size-5 self-center justify-self-end text-gray-500 sm:size-4 dark:text-gray-400"},[f("path",{d:"M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z","clip-rule":"evenodd","fill-rule":"evenodd"})],-1))]),s.hint?(v(),k("p",Y4,J(s.hint),1)):H("",!0)]))}},X4={class:"flex items-center gap-3"},Z4=["id","name","checked","disabled","aria-label"],e_={key:0,class:"text-sm/6"},t_=["for"],s_=["id"],Ge={__name:"Toggle",props:{id:{type:String,default:()=>`toggle-${Math.random().toString(36).substr(2,9)}`},name:{type:String,default:null},modelValue:{type:Boolean,default:!1},label:{type:String,default:null},description:{type:String,default:null},ariaLabel:{type:String,default:null},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(s,{emit:e}){const t=s,n=e,i=r=>{if(!t.disabled){const o=r.target.checked;n("update:modelValue",o),n("change",o)}};return(r,o)=>(v(),k("div",X4,[f("div",{class:xe(["group relative inline-flex w-11 shrink-0 rounded-full p-0.5 inset-ring inset-ring-gray-900/5 outline-offset-2 transition-colors duration-200 ease-in-out dark:inset-ring-white/10",[s.modelValue?"bg-sky-600 outline-sky-600 dark:bg-sky-500 dark:outline-sky-500":"bg-gray-200 outline-sky-600 dark:bg-white/5 dark:outline-sky-500",s.disabled?"opacity-50 cursor-not-allowed":"cursor-pointer"]])},[f("span",{class:xe(["size-5 rounded-full bg-white shadow-xs ring-1 ring-gray-900/5 transition-transform duration-200 ease-in-out",{"translate-x-5":s.modelValue}])},null,2),f("input",{id:s.id,type:"checkbox",name:s.name,checked:s.modelValue,disabled:s.disabled,"aria-label":s.ariaLabel||s.label,class:"absolute inset-0 appearance-none focus:outline-hidden cursor-pointer disabled:cursor-not-allowed",onChange:i},null,40,Z4)],2),s.label||s.description?(v(),k("div",e_,[s.label?(v(),k("label",{key:0,for:s.id,class:xe(["font-medium text-gray-900 cursor-pointer dark:text-white",{"cursor-not-allowed opacity-50":s.disabled}])},J(s.label),11,t_)):H("",!0),s.description?(v(),k("p",{key:1,id:`${s.id}-description`,class:"text-gray-500 dark:text-gray-400"},J(s.description),9,s_)):H("",!0)])):H("",!0)]))}},n_={class:"flex items-center"},i_=["id","name","value","checked"],r_=["for"],Tl={__name:"Radio",props:{id:{type:String,required:!0},name:{type:String,required:!0},value:{type:[String,Number,Boolean],required:!0},modelValue:{type:[String,Number,Boolean],default:null}},emits:["update:modelValue"],setup(s){return(e,t)=>(v(),k("div",n_,[f("input",{id:s.id,type:"radio",name:s.name,value:s.value,checked:s.modelValue===s.value,onChange:t[0]||(t[0]=n=>e.$emit("update:modelValue",s.value)),class:"relative size-4 appearance-none rounded-full border border-gray-300 bg-white before:absolute before:inset-1 before:rounded-full before:bg-white not-checked:before:hidden checked:border-sky-600 checked:bg-sky-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:before:bg-gray-400 dark:border-white/10 dark:bg-white/5 dark:checked:border-sky-500 dark:checked:bg-sky-500 dark:focus-visible:outline-sky-500 dark:disabled:border-white/5 dark:disabled:bg-white/10 dark:disabled:before:bg-white/20 forced-colors:appearance-auto forced-colors:before:hidden"},null,40,i_),f("label",{for:s.id,class:"ml-3 block text-sm/6 font-medium text-gray-900 dark:text-white"},[dt(e.$slots,"default")],8,r_)]))}},o_={class:"text-sm/6 font-semibold text-gray-900 dark:text-white"},l_={key:0,class:"mt-1 text-sm/6 text-gray-600 dark:text-gray-400"},a_={class:"mt-6 space-y-6"},u_={__name:"RadioGroup",props:{legend:{type:String,required:!0},description:{type:String,default:null}},setup(s){return(e,t)=>(v(),k("fieldset",null,[f("legend",o_,J(s.legend),1),s.description?(v(),k("p",l_,J(s.description),1)):H("",!0),f("div",a_,[dt(e.$slots,"default")])]))}},c_={class:"space-y-4"},d_={class:"flex items-start gap-4"},f_={class:"flex-1"},h_=["onClick"],Oi={__name:"Repeater",props:{modelValue:{type:Array,default:()=>[]},addLabel:{type:String,default:"Add Item"},defaultItem:{type:[Object,Function],default:()=>({})}},emits:["update:modelValue"],setup(s,{emit:e}){const t=s,n=e,i=()=>{const l=typeof t.defaultItem=="function"?t.defaultItem():{...t.defaultItem,_id:Date.now()};n("update:modelValue",[...t.modelValue,l])},r=l=>{const a=t.modelValue.filter((c,u)=>u!==l);n("update:modelValue",a)},o=(l,a,c)=>{const u=[...t.modelValue];u[l]={...u[l],[a]:c},n("update:modelValue",u)};return(l,a)=>(v(),k("div",c_,[(v(!0),k(be,null,Le(s.modelValue,(c,u)=>(v(),k("div",{key:c._id||u,class:"rounded-lg border border-gray-200 p-4 dark:border-gray-700"},[f("div",d_,[f("div",f_,[dt(l.$slots,"default",{item:c,index:u,update:(d,h)=>o(u,d,h)})]),f("button",{type:"button",onClick:d=>r(u),class:"shrink-0 rounded-md p-1.5 text-gray-400 transition hover:bg-red-50 hover:text-red-600 dark:hover:bg-red-900/20 dark:hover:text-red-400",title:"Remove"},[...a[0]||(a[0]=[f("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,h_)])]))),128)),S(Je,{variant:"secondary",size:"sm",onClick:i,class:"inline-flex items-center"},{default:X(()=>[a[1]||(a[1]=f("svg",{class:"mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)),de(" "+J(s.addLabel),1)]),_:1})]))}};let Bc=[],z0=[];(()=>{let s="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,t=0;e<s.length;e++)(e%2?z0:Bc).push(t=t+s[e])})();function p_(s){if(s<768)return!1;for(let e=0,t=Bc.length;;){let n=e+t>>1;if(s<Bc[n])t=n;else if(s>=z0[n])e=n+1;else return!0;if(e==t)return!1}}function wp(s){return s>=127462&&s<=127487}const Sp=8205;function g_(s,e,t=!0,n=!0){return(t?U0:m_)(s,e,n)}function U0(s,e,t){if(e==s.length)return e;e&&H0(s.charCodeAt(e))&&q0(s.charCodeAt(e-1))&&e--;let n=Hu(s,e);for(e+=Cp(n);e<s.length;){let i=Hu(s,e);if(n==Sp||i==Sp||t&&p_(i))e+=Cp(i),n=i;else if(wp(i)){let r=0,o=e-2;for(;o>=0&&wp(Hu(s,o));)r++,o-=2;if(r%2==0)break;e+=2}else break}return e}function m_(s,e,t){for(;e>0;){let n=U0(s,e-2,t);if(n<e)return n;e--}return 0}function Hu(s,e){let t=s.charCodeAt(e);if(!q0(t)||e+1==s.length)return t;let n=s.charCodeAt(e+1);return H0(n)?(t-55296<<10)+(n-56320)+65536:t}function H0(s){return s>=56320&&s<57344}function q0(s){return s>=55296&&s<56320}function Cp(s){return s<65536?1:2}class rt{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,n){[e,t]=Mr(this,e,t);let i=[];return this.decompose(0,e,i,2),n.length&&n.decompose(0,n.length,i,3),this.decompose(t,this.length,i,1),gn.from(i,this.length-(t-e)+n.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=Mr(this,e,t);let n=[];return this.decompose(e,t,n,0),gn.from(n,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),n=this.length-this.scanIdentical(e,-1),i=new xo(this),r=new xo(e);for(let o=t,l=t;;){if(i.next(o),r.next(o),o=0,i.lineBreak!=r.lineBreak||i.done!=r.done||i.value!=r.value)return!1;if(l+=i.value.length,i.done||l>=n)return!0}}iter(e=1){return new xo(this,e)}iterRange(e,t=this.length){return new W0(this,e,t)}iterLines(e,t){let n;if(e==null)n=this.iter();else{t==null&&(t=this.lines+1);let i=this.line(e).from;n=this.iterRange(i,Math.max(i,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new K0(n)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?rt.empty:e.length<=32?new $t(e):gn.from($t.split(e,[]))}}class $t extends rt{constructor(e,t=v_(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,n,i){for(let r=0;;r++){let o=this.text[r],l=i+o.length;if((t?n:l)>=e)return new y_(i,l,n,o);i=l+1,n++}}decompose(e,t,n,i){let r=e<=0&&t>=this.length?this:new $t(_p(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(i&1){let o=n.pop(),l=ra(r.text,o.text.slice(),0,r.length);if(l.length<=32)n.push(new $t(l,o.length+r.length));else{let a=l.length>>1;n.push(new $t(l.slice(0,a)),new $t(l.slice(a)))}}else n.push(r)}replace(e,t,n){if(!(n instanceof $t))return super.replace(e,t,n);[e,t]=Mr(this,e,t);let i=ra(this.text,ra(n.text,_p(this.text,0,e)),t),r=this.length+n.length-(t-e);return i.length<=32?new $t(i,r):gn.from($t.split(i,[]),r)}sliceString(e,t=this.length,n=`
`){[e,t]=Mr(this,e,t);let i="";for(let r=0,o=0;r<=t&&o<this.text.length;o++){let l=this.text[o],a=r+l.length;r>e&&o&&(i+=n),e<a&&t>r&&(i+=l.slice(Math.max(0,e-r),t-r)),r=a+1}return i}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let n=[],i=-1;for(let r of e)n.push(r),i+=r.length+1,n.length==32&&(t.push(new $t(n,i)),n=[],i=-1);return i>-1&&t.push(new $t(n,i)),t}}class gn extends rt{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let n of e)this.lines+=n.lines}lineInner(e,t,n,i){for(let r=0;;r++){let o=this.children[r],l=i+o.length,a=n+o.lines-1;if((t?a:l)>=e)return o.lineInner(e,t,n,i);i=l+1,n=a+1}}decompose(e,t,n,i){for(let r=0,o=0;o<=t&&r<this.children.length;r++){let l=this.children[r],a=o+l.length;if(e<=a&&t>=o){let c=i&((o<=e?1:0)|(a>=t?2:0));o>=e&&a<=t&&!c?n.push(l):l.decompose(e-o,t-o,n,c)}o=a+1}}replace(e,t,n){if([e,t]=Mr(this,e,t),n.lines<this.lines)for(let i=0,r=0;i<this.children.length;i++){let o=this.children[i],l=r+o.length;if(e>=r&&t<=l){let a=o.replace(e-r,t-r,n),c=this.lines-o.lines+a.lines;if(a.lines<c>>4&&a.lines>c>>6){let u=this.children.slice();return u[i]=a,new gn(u,this.length-(t-e)+n.length)}return super.replace(r,l,a)}r=l+1}return super.replace(e,t,n)}sliceString(e,t=this.length,n=`
`){[e,t]=Mr(this,e,t);let i="";for(let r=0,o=0;r<this.children.length&&o<=t;r++){let l=this.children[r],a=o+l.length;o>e&&r&&(i+=n),e<a&&t>o&&(i+=l.sliceString(e-o,t-o,n)),o=a+1}return i}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof gn))return 0;let n=0,[i,r,o,l]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=t,r+=t){if(i==o||r==l)return n;let a=this.children[i],c=e.children[r];if(a!=c)return n+a.scanIdentical(c,t);n+=a.length+1}}static from(e,t=e.reduce((n,i)=>n+i.length+1,-1)){let n=0;for(let p of e)n+=p.lines;if(n<32){let p=[];for(let y of e)y.flatten(p);return new $t(p,t)}let i=Math.max(32,n>>5),r=i<<1,o=i>>1,l=[],a=0,c=-1,u=[];function d(p){let y;if(p.lines>r&&p instanceof gn)for(let b of p.children)d(b);else p.lines>o&&(a>o||!a)?(h(),l.push(p)):p instanceof $t&&a&&(y=u[u.length-1])instanceof $t&&p.lines+y.lines<=32?(a+=p.lines,c+=p.length+1,u[u.length-1]=new $t(y.text.concat(p.text),y.length+1+p.length)):(a+p.lines>i&&h(),a+=p.lines,c+=p.length+1,u.push(p))}function h(){a!=0&&(l.push(u.length==1?u[0]:gn.from(u,c)),c=-1,a=u.length=0)}for(let p of e)d(p);return h(),l.length==1?l[0]:new gn(l,t)}}rt.empty=new $t([""],0);function v_(s){let e=-1;for(let t of s)e+=t.length+1;return e}function ra(s,e,t=0,n=1e9){for(let i=0,r=0,o=!0;r<s.length&&i<=n;r++){let l=s[r],a=i+l.length;a>=t&&(a>n&&(l=l.slice(0,n-i)),i<t&&(l=l.slice(t-i)),o?(e[e.length-1]+=l,o=!1):e.push(l)),i=a+1}return e}function _p(s,e,t){return ra(s,[""],e,t)}class xo{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof $t?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,i=this.nodes[n],r=this.offsets[n],o=r>>1,l=i instanceof $t?i.text.length:i.children.length;if(o==(t>0?l:0)){if(n==0)return this.done=!0,this.value="",this;t>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((r&1)==(t>0?0:1)){if(this.offsets[n]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof $t){let a=i.text[o+(t<0?-1:0)];if(this.offsets[n]+=t,a.length>Math.max(0,e))return this.value=e==0?a:t>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=i.children[o+(t<0?-1:0)];e>a.length?(e-=a.length,this.offsets[n]+=t):(t<0&&this.offsets[n]--,this.nodes.push(a),this.offsets.push(t>0?1:(a instanceof $t?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class W0{constructor(e,t,n){this.value="",this.done=!1,this.cursor=new xo(e,t>n?-1:1),this.pos=t>n?e.length:0,this.from=Math.min(t,n),this.to=Math.max(t,n)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let n=t<0?this.pos-this.from:this.to-this.pos;e>n&&(e=n),n-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*t,this.value=i.length<=n?i:t<0?i.slice(i.length-n):i.slice(0,n),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class K0{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:n,value:i}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(rt.prototype[Symbol.iterator]=function(){return this.iter()},xo.prototype[Symbol.iterator]=W0.prototype[Symbol.iterator]=K0.prototype[Symbol.iterator]=function(){return this});class y_{constructor(e,t,n,i){this.from=e,this.to=t,this.number=n,this.text=i}get length(){return this.to-this.from}}function Mr(s,e,t){return e=Math.max(0,Math.min(s.length,e)),[e,Math.max(e,Math.min(s.length,t))]}function Qt(s,e,t=!0,n=!0){return g_(s,e,t,n)}function b_(s){return s>=56320&&s<57344}function k_(s){return s>=55296&&s<56320}function Ss(s,e){let t=s.charCodeAt(e);if(!k_(t)||e+1==s.length)return t;let n=s.charCodeAt(e+1);return b_(n)?(t-55296<<10)+(n-56320)+65536:t}function rf(s){return s<=65535?String.fromCharCode(s):(s-=65536,String.fromCharCode((s>>10)+55296,(s&1023)+56320))}function mn(s){return s<65536?1:2}const Ic=/\r\n?|\n/;var vs=(function(s){return s[s.Simple=0]="Simple",s[s.TrackDel=1]="TrackDel",s[s.TrackBefore=2]="TrackBefore",s[s.TrackAfter=3]="TrackAfter",s})(vs||(vs={}));class xn{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t+1];e+=n<0?this.sections[t]:n}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,n=0,i=0;t<this.sections.length;){let r=this.sections[t++],o=this.sections[t++];o<0?(e(n,i,r),i+=r):i+=o,n+=r}}iterChangedRanges(e,t=!1){Nc(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let n=this.sections[t++],i=this.sections[t++];i<0?e.push(n,i):e.push(i,n)}return new xn(e)}composeDesc(e){return this.empty?e:e.empty?this:G0(this,e)}mapDesc(e,t=!1){return e.empty?this:Fc(this,e,t)}mapPos(e,t=-1,n=vs.Simple){let i=0,r=0;for(let o=0;o<this.sections.length;){let l=this.sections[o++],a=this.sections[o++],c=i+l;if(a<0){if(c>e)return r+(e-i);r+=l}else{if(n!=vs.Simple&&c>=e&&(n==vs.TrackDel&&i<e&&c>e||n==vs.TrackBefore&&i<e||n==vs.TrackAfter&&c>e))return null;if(c>e||c==e&&t<0&&!l)return e==i||t<0?r:r+a;r+=a}i=c}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return r}touchesRange(e,t=e){for(let n=0,i=0;n<this.sections.length&&i<=t;){let r=this.sections[n++],o=this.sections[n++],l=i+r;if(o>=0&&i<=t&&l>=e)return i<e&&l>t?"cover":!0;i=l}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let n=this.sections[t++],i=this.sections[t++];e+=(e?" ":"")+n+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new xn(e)}static create(e){return new xn(e)}}class Nt extends xn{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return Nc(this,(t,n,i,r,o)=>e=e.replace(i,i+(n-t),o),!1),e}mapDesc(e,t=!1){return Fc(this,e,t,!0)}invert(e){let t=this.sections.slice(),n=[];for(let i=0,r=0;i<t.length;i+=2){let o=t[i],l=t[i+1];if(l>=0){t[i]=l,t[i+1]=o;let a=i>>1;for(;n.length<a;)n.push(rt.empty);n.push(o?e.slice(r,r+o):rt.empty)}r+=o}return new Nt(t,n)}compose(e){return this.empty?e:e.empty?this:G0(this,e,!0)}map(e,t=!1){return e.empty?this:Fc(this,e,t,!0)}iterChanges(e,t=!1){Nc(this,e,t)}get desc(){return xn.create(this.sections)}filter(e){let t=[],n=[],i=[],r=new Vo(this);e:for(let o=0,l=0;;){let a=o==e.length?1e9:e[o++];for(;l<a||l==a&&r.len==0;){if(r.done)break e;let u=Math.min(r.len,a-l);ts(i,u,-1);let d=r.ins==-1?-1:r.off==0?r.ins:0;ts(t,u,d),d>0&&ti(n,t,r.text),r.forward(u),l+=u}let c=e[o++];for(;l<c;){if(r.done)break e;let u=Math.min(r.len,c-l);ts(t,u,-1),ts(i,u,r.ins==-1?-1:r.off==0?r.ins:0),r.forward(u),l+=u}}return{changes:new Nt(t,n),filtered:xn.create(i)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t],i=this.sections[t+1];i<0?e.push(n):i==0?e.push([n]):e.push([n].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,n){let i=[],r=[],o=0,l=null;function a(u=!1){if(!u&&!i.length)return;o<t&&ts(i,t-o,-1);let d=new Nt(i,r);l=l?l.compose(d.map(l)):d,i=[],r=[],o=0}function c(u){if(Array.isArray(u))for(let d of u)c(d);else if(u instanceof Nt){if(u.length!=t)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${t})`);a(),l=l?l.compose(u.map(l)):u}else{let{from:d,to:h=d,insert:p}=u;if(d>h||d<0||h>t)throw new RangeError(`Invalid change range ${d} to ${h} (in doc of length ${t})`);let y=p?typeof p=="string"?rt.of(p.split(n||Ic)):p:rt.empty,b=y.length;if(d==h&&b==0)return;d<o&&a(),d>o&&ts(i,d-o,-1),ts(i,h-d,b),ti(r,i,y),o=h}}return c(e),a(!l),l}static empty(e){return new Nt(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],n=[];for(let i=0;i<e.length;i++){let r=e[i];if(typeof r=="number")t.push(r,-1);else{if(!Array.isArray(r)||typeof r[0]!="number"||r.some((o,l)=>l&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(r.length==1)t.push(r[0],0);else{for(;n.length<i;)n.push(rt.empty);n[i]=rt.of(r.slice(1)),t.push(r[0],n[i].length)}}}return new Nt(t,n)}static createSet(e,t){return new Nt(e,t)}}function ts(s,e,t,n=!1){if(e==0&&t<=0)return;let i=s.length-2;i>=0&&t<=0&&t==s[i+1]?s[i]+=e:i>=0&&e==0&&s[i]==0?s[i+1]+=t:n?(s[i]+=e,s[i+1]+=t):s.push(e,t)}function ti(s,e,t){if(t.length==0)return;let n=e.length-2>>1;if(n<s.length)s[s.length-1]=s[s.length-1].append(t);else{for(;s.length<n;)s.push(rt.empty);s.push(t)}}function Nc(s,e,t){let n=s.inserted;for(let i=0,r=0,o=0;o<s.sections.length;){let l=s.sections[o++],a=s.sections[o++];if(a<0)i+=l,r+=l;else{let c=i,u=r,d=rt.empty;for(;c+=l,u+=a,a&&n&&(d=d.append(n[o-2>>1])),!(t||o==s.sections.length||s.sections[o+1]<0);)l=s.sections[o++],a=s.sections[o++];e(i,c,r,u,d),i=c,r=u}}}function Fc(s,e,t,n=!1){let i=[],r=n?[]:null,o=new Vo(s),l=new Vo(e);for(let a=-1;;){if(o.done&&l.len||l.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&l.ins==-1){let c=Math.min(o.len,l.len);ts(i,c,-1),o.forward(c),l.forward(c)}else if(l.ins>=0&&(o.ins<0||a==o.i||o.off==0&&(l.len<o.len||l.len==o.len&&!t))){let c=l.len;for(ts(i,l.ins,-1);c;){let u=Math.min(o.len,c);o.ins>=0&&a<o.i&&o.len<=u&&(ts(i,0,o.ins),r&&ti(r,i,o.text),a=o.i),o.forward(u),c-=u}l.next()}else if(o.ins>=0){let c=0,u=o.len;for(;u;)if(l.ins==-1){let d=Math.min(u,l.len);c+=d,u-=d,l.forward(d)}else if(l.ins==0&&l.len<u)u-=l.len,l.next();else break;ts(i,c,a<o.i?o.ins:0),r&&a<o.i&&ti(r,i,o.text),a=o.i,o.forward(o.len-u)}else{if(o.done&&l.done)return r?Nt.createSet(i,r):xn.create(i);throw new Error("Mismatched change set lengths")}}}function G0(s,e,t=!1){let n=[],i=t?[]:null,r=new Vo(s),o=new Vo(e);for(let l=!1;;){if(r.done&&o.done)return i?Nt.createSet(n,i):xn.create(n);if(r.ins==0)ts(n,r.len,0,l),r.next();else if(o.len==0&&!o.done)ts(n,0,o.ins,l),i&&ti(i,n,o.text),o.next();else{if(r.done||o.done)throw new Error("Mismatched change set lengths");{let a=Math.min(r.len2,o.len),c=n.length;if(r.ins==-1){let u=o.ins==-1?-1:o.off?0:o.ins;ts(n,a,u,l),i&&u&&ti(i,n,o.text)}else o.ins==-1?(ts(n,r.off?0:r.len,a,l),i&&ti(i,n,r.textBit(a))):(ts(n,r.off?0:r.len,o.off?0:o.ins,l),i&&!o.off&&ti(i,n,o.text));l=(r.ins>a||o.ins>=0&&o.len>a)&&(l||n.length>c),r.forward2(a),o.forward(a)}}}}class Vo{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?rt.empty:e[t]}textBit(e){let{inserted:t}=this.set,n=this.i-2>>1;return n>=t.length&&!e?rt.empty:t[n].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Pi{constructor(e,t,n){this.from=e,this.to=t,this.flags=n}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let n,i;return this.empty?n=i=e.mapPos(this.from,t):(n=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),n==this.from&&i==this.to?this:new Pi(n,i,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return fe.range(e,t);let n=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return fe.range(this.anchor,n)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return fe.range(e.anchor,e.head)}static create(e,t,n){return new Pi(e,t,n)}}class fe{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:fe.create(this.ranges.map(n=>n.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let n=0;n<this.ranges.length;n++)if(!this.ranges[n].eq(e.ranges[n],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new fe([this.main],0)}addRange(e,t=!0){return fe.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let n=this.ranges.slice();return n[t]=e,fe.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new fe(e.ranges.map(t=>Pi.fromJSON(t)),e.main)}static single(e,t=e){return new fe([fe.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let n=0,i=0;i<e.length;i++){let r=e[i];if(r.empty?r.from<=n:r.from<n)return fe.normalized(e.slice(),t);n=r.to}return new fe(e,t)}static cursor(e,t=0,n,i){return Pi.create(e,e,(t==0?0:t<0?8:16)|(n==null?7:Math.min(6,n))|(i??16777215)<<6)}static range(e,t,n,i){let r=(n??16777215)<<6|(i==null?7:Math.min(6,i));return t<e?Pi.create(t,e,48|r):Pi.create(e,t,(t>e?8:0)|r)}static normalized(e,t=0){let n=e[t];e.sort((i,r)=>i.from-r.from),t=e.indexOf(n);for(let i=1;i<e.length;i++){let r=e[i],o=e[i-1];if(r.empty?r.from<=o.to:r.from<o.to){let l=o.from,a=Math.max(r.to,o.to);i<=t&&t--,e.splice(--i,2,r.anchor>r.head?fe.range(a,l):fe.range(l,a))}}return new fe(e,t)}}function J0(s,e){for(let t of s.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let of=0;class je{constructor(e,t,n,i,r){this.combine=e,this.compareInput=t,this.compare=n,this.isStatic=i,this.id=of++,this.default=e([]),this.extensions=typeof r=="function"?r(this):r}get reader(){return this}static define(e={}){return new je(e.combine||(t=>t),e.compareInput||((t,n)=>t===n),e.compare||(e.combine?(t,n)=>t===n:lf),!!e.static,e.enables)}of(e){return new oa([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new oa(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new oa(e,this,2,t)}from(e,t){return t||(t=n=>n),this.compute([e],n=>t(n.field(e)))}}function lf(s,e){return s==e||s.length==e.length&&s.every((t,n)=>t===e[n])}class oa{constructor(e,t,n,i){this.dependencies=e,this.facet=t,this.type=n,this.value=i,this.id=of++}dynamicSlot(e){var t;let n=this.value,i=this.facet.compareInput,r=this.id,o=e[r]>>1,l=this.type==2,a=!1,c=!1,u=[];for(let d of this.dependencies)d=="doc"?a=!0:d=="selection"?c=!0:(((t=e[d.id])!==null&&t!==void 0?t:1)&1)==0&&u.push(e[d.id]);return{create(d){return d.values[o]=n(d),1},update(d,h){if(a&&h.docChanged||c&&(h.docChanged||h.selection)||zc(d,u)){let p=n(d);if(l?!Ap(p,d.values[o],i):!i(p,d.values[o]))return d.values[o]=p,1}return 0},reconfigure:(d,h)=>{let p,y=h.config.address[r];if(y!=null){let b=Aa(h,y);if(this.dependencies.every(x=>x instanceof je?h.facet(x)===d.facet(x):x instanceof Yt?h.field(x,!1)==d.field(x,!1):!0)||(l?Ap(p=n(d),b,i):i(p=n(d),b)))return d.values[o]=b,0}else p=n(d);return d.values[o]=p,1}}}}function Ap(s,e,t){if(s.length!=e.length)return!1;for(let n=0;n<s.length;n++)if(!t(s[n],e[n]))return!1;return!0}function zc(s,e){let t=!1;for(let n of e)wo(s,n)&1&&(t=!0);return t}function x_(s,e,t){let n=t.map(a=>s[a.id]),i=t.map(a=>a.type),r=n.filter(a=>!(a&1)),o=s[e.id]>>1;function l(a){let c=[];for(let u=0;u<n.length;u++){let d=Aa(a,n[u]);if(i[u]==2)for(let h of d)c.push(h);else c.push(d)}return e.combine(c)}return{create(a){for(let c of n)wo(a,c);return a.values[o]=l(a),1},update(a,c){if(!zc(a,r))return 0;let u=l(a);return e.compare(u,a.values[o])?0:(a.values[o]=u,1)},reconfigure(a,c){let u=zc(a,n),d=c.config.facets[e.id],h=c.facet(e);if(d&&!u&&lf(t,d))return a.values[o]=h,0;let p=l(a);return e.compare(p,h)?(a.values[o]=h,0):(a.values[o]=p,1)}}}const jl=je.define({static:!0});class Yt{constructor(e,t,n,i,r){this.id=e,this.createF=t,this.updateF=n,this.compareF=i,this.spec=r,this.provides=void 0}static define(e){let t=new Yt(of++,e.create,e.update,e.compare||((n,i)=>n===i),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(jl).find(n=>n.field==this);return(t?.create||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:n=>(n.values[t]=this.create(n),1),update:(n,i)=>{let r=n.values[t],o=this.updateF(r,i);return this.compareF(r,o)?0:(n.values[t]=o,1)},reconfigure:(n,i)=>{let r=n.facet(jl),o=i.facet(jl),l;return(l=r.find(a=>a.field==this))&&l!=o.find(a=>a.field==this)?(n.values[t]=l.create(n),1):i.config.address[this.id]!=null?(n.values[t]=i.field(this),0):(n.values[t]=this.create(n),1)}}}init(e){return[this,jl.of({field:this,create:e})]}get extension(){return this}}const Ei={lowest:4,low:3,default:2,high:1,highest:0};function eo(s){return e=>new Q0(e,s)}const Gi={highest:eo(Ei.highest),high:eo(Ei.high),default:eo(Ei.default),low:eo(Ei.low),lowest:eo(Ei.lowest)};class Q0{constructor(e,t){this.inner=e,this.prec=t}}class uu{of(e){return new Uc(this,e)}reconfigure(e){return uu.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Uc{constructor(e,t){this.compartment=e,this.inner=t}}class _a{constructor(e,t,n,i,r,o){for(this.base=e,this.compartments=t,this.dynamicSlots=n,this.address=i,this.staticValues=r,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,n){let i=[],r=Object.create(null),o=new Map;for(let h of w_(e,t,o))h instanceof Yt?i.push(h):(r[h.facet.id]||(r[h.facet.id]=[])).push(h);let l=Object.create(null),a=[],c=[];for(let h of i)l[h.id]=c.length<<1,c.push(p=>h.slot(p));let u=n?.config.facets;for(let h in r){let p=r[h],y=p[0].facet,b=u&&u[h]||[];if(p.every(x=>x.type==0))if(l[y.id]=a.length<<1|1,lf(b,p))a.push(n.facet(y));else{let x=y.combine(p.map(g=>g.value));a.push(n&&y.compare(x,n.facet(y))?n.facet(y):x)}else{for(let x of p)x.type==0?(l[x.id]=a.length<<1|1,a.push(x.value)):(l[x.id]=c.length<<1,c.push(g=>x.dynamicSlot(g)));l[y.id]=c.length<<1,c.push(x=>x_(x,y,p))}}let d=c.map(h=>h(l));return new _a(e,o,d,l,a,r)}}function w_(s,e,t){let n=[[],[],[],[],[]],i=new Map;function r(o,l){let a=i.get(o);if(a!=null){if(a<=l)return;let c=n[a].indexOf(o);c>-1&&n[a].splice(c,1),o instanceof Uc&&t.delete(o.compartment)}if(i.set(o,l),Array.isArray(o))for(let c of o)r(c,l);else if(o instanceof Uc){if(t.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=e.get(o.compartment)||o.inner;t.set(o.compartment,c),r(c,l)}else if(o instanceof Q0)r(o.inner,o.prec);else if(o instanceof Yt)n[l].push(o),o.provides&&r(o.provides,l);else if(o instanceof oa)n[l].push(o),o.facet.extensions&&r(o.facet.extensions,Ei.default);else{let c=o.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);r(c,l)}}return r(s,Ei.default),n.reduce((o,l)=>o.concat(l))}function wo(s,e){if(e&1)return 2;let t=e>>1,n=s.status[t];if(n==4)throw new Error("Cyclic dependency between fields and/or facets");if(n&2)return n;s.status[t]=4;let i=s.computeSlot(s,s.config.dynamicSlots[t]);return s.status[t]=2|i}function Aa(s,e){return e&1?s.config.staticValues[e>>1]:s.values[e>>1]}const Y0=je.define(),Hc=je.define({combine:s=>s.some(e=>e),static:!0}),X0=je.define({combine:s=>s.length?s[0]:void 0,static:!0}),Z0=je.define(),ev=je.define(),tv=je.define(),sv=je.define({combine:s=>s.length?s[0]:!1});class Un{constructor(e,t){this.type=e,this.value=t}static define(){return new S_}}class S_{of(e){return new Un(this,e)}}class C_{constructor(e){this.map=e}of(e){return new Qe(this,e)}}class Qe{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new Qe(this.type,t)}is(e){return this.type==e}static define(e={}){return new C_(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let n=[];for(let i of e){let r=i.map(t);r&&n.push(r)}return n}}Qe.reconfigure=Qe.define();Qe.appendConfig=Qe.define();class Ft{constructor(e,t,n,i,r,o){this.startState=e,this.changes=t,this.selection=n,this.effects=i,this.annotations=r,this.scrollIntoView=o,this._doc=null,this._state=null,n&&J0(n,t.newLength),r.some(l=>l.type==Ft.time)||(this.annotations=r.concat(Ft.time.of(Date.now())))}static create(e,t,n,i,r,o){return new Ft(e,t,n,i,r,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Ft.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}Ft.time=Un.define();Ft.userEvent=Un.define();Ft.addToHistory=Un.define();Ft.remote=Un.define();function __(s,e){let t=[];for(let n=0,i=0;;){let r,o;if(n<s.length&&(i==e.length||e[i]>=s[n]))r=s[n++],o=s[n++];else if(i<e.length)r=e[i++],o=e[i++];else return t;!t.length||t[t.length-1]<r?t.push(r,o):t[t.length-1]<o&&(t[t.length-1]=o)}}function nv(s,e,t){var n;let i,r,o;return t?(i=e.changes,r=Nt.empty(e.changes.length),o=s.changes.compose(e.changes)):(i=e.changes.map(s.changes),r=s.changes.mapDesc(e.changes,!0),o=s.changes.compose(i)),{changes:o,selection:e.selection?e.selection.map(r):(n=s.selection)===null||n===void 0?void 0:n.map(i),effects:Qe.mapEffects(s.effects,i).concat(Qe.mapEffects(e.effects,r)),annotations:s.annotations.length?s.annotations.concat(e.annotations):e.annotations,scrollIntoView:s.scrollIntoView||e.scrollIntoView}}function qc(s,e,t){let n=e.selection,i=br(e.annotations);return e.userEvent&&(i=i.concat(Ft.userEvent.of(e.userEvent))),{changes:e.changes instanceof Nt?e.changes:Nt.of(e.changes||[],t,s.facet(X0)),selection:n&&(n instanceof fe?n:fe.single(n.anchor,n.head)),effects:br(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function iv(s,e,t){let n=qc(s,e.length?e[0]:{},s.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let r=1;r<e.length;r++){e[r].filter===!1&&(t=!1);let o=!!e[r].sequential;n=nv(n,qc(s,e[r],o?n.changes.newLength:s.doc.length),o)}let i=Ft.create(s,n.changes,n.selection,n.effects,n.annotations,n.scrollIntoView);return M_(t?A_(i):i)}function A_(s){let e=s.startState,t=!0;for(let i of e.facet(Z0)){let r=i(s);if(r===!1){t=!1;break}Array.isArray(r)&&(t=t===!0?r:__(t,r))}if(t!==!0){let i,r;if(t===!1)r=s.changes.invertedDesc,i=Nt.empty(e.doc.length);else{let o=s.changes.filter(t);i=o.changes,r=o.filtered.mapDesc(o.changes).invertedDesc}s=Ft.create(e,i,s.selection&&s.selection.map(r),Qe.mapEffects(s.effects,r),s.annotations,s.scrollIntoView)}let n=e.facet(ev);for(let i=n.length-1;i>=0;i--){let r=n[i](s);r instanceof Ft?s=r:Array.isArray(r)&&r.length==1&&r[0]instanceof Ft?s=r[0]:s=iv(e,br(r),!1)}return s}function M_(s){let e=s.startState,t=e.facet(tv),n=s;for(let i=t.length-1;i>=0;i--){let r=t[i](s);r&&Object.keys(r).length&&(n=nv(n,qc(e,r,s.changes.newLength),!0))}return n==s?s:Ft.create(e,s.changes,s.selection,n.effects,n.annotations,n.scrollIntoView)}const D_=[];function br(s){return s==null?D_:Array.isArray(s)?s:[s]}var At=(function(s){return s[s.Word=0]="Word",s[s.Space=1]="Space",s[s.Other=2]="Other",s})(At||(At={}));const E_=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Wc;try{Wc=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function T_(s){if(Wc)return Wc.test(s);for(let e=0;e<s.length;e++){let t=s[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||E_.test(t)))return!0}return!1}function j_(s){return e=>{if(!/\S/.test(e))return At.Space;if(T_(e))return At.Word;for(let t=0;t<s.length;t++)if(e.indexOf(s[t])>-1)return At.Word;return At.Other}}class nt{constructor(e,t,n,i,r,o){this.config=e,this.doc=t,this.selection=n,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=r,o&&(o._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)wo(this,l<<1);this.computeSlot=null}field(e,t=!0){let n=this.config.address[e.id];if(n==null){if(t)throw new RangeError("Field is not present in this state");return}return wo(this,n),Aa(this,n)}update(...e){return iv(this,e,!0)}applyTransaction(e){let t=this.config,{base:n,compartments:i}=t;for(let l of e.effects)l.is(uu.reconfigure)?(t&&(i=new Map,t.compartments.forEach((a,c)=>i.set(c,a)),t=null),i.set(l.value.compartment,l.value.extension)):l.is(Qe.reconfigure)?(t=null,n=l.value):l.is(Qe.appendConfig)&&(t=null,n=br(n).concat(l.value));let r;t?r=e.startState.values.slice():(t=_a.resolve(n,i,this),r=new nt(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(a,c)=>c.reconfigure(a,this),null).values);let o=e.startState.facet(Hc)?e.newSelection:e.newSelection.asSingle();new nt(t,e.newDoc,o,r,(l,a)=>a.update(l,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:fe.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,n=e(t.ranges[0]),i=this.changes(n.changes),r=[n.range],o=br(n.effects);for(let l=1;l<t.ranges.length;l++){let a=e(t.ranges[l]),c=this.changes(a.changes),u=c.map(i);for(let h=0;h<l;h++)r[h]=r[h].map(u);let d=i.mapDesc(c,!0);r.push(a.range.map(d)),i=i.compose(u),o=Qe.mapEffects(o,u).concat(Qe.mapEffects(br(a.effects),d))}return{changes:i,selection:fe.create(r,t.mainIndex),effects:o}}changes(e=[]){return e instanceof Nt?e:Nt.of(e,this.doc.length,this.facet(nt.lineSeparator))}toText(e){return rt.of(e.split(this.facet(nt.lineSeparator)||Ic))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(wo(this,t),Aa(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let n in e){let i=e[n];i instanceof Yt&&this.config.address[i.id]!=null&&(t[n]=i.spec.toJSON(this.field(e[n]),this))}return t}static fromJSON(e,t={},n){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(n){for(let r in n)if(Object.prototype.hasOwnProperty.call(e,r)){let o=n[r],l=e[r];i.push(o.init(a=>o.spec.fromJSON(l,a)))}}return nt.create({doc:e.doc,selection:fe.fromJSON(e.selection),extensions:t.extensions?i.concat([t.extensions]):i})}static create(e={}){let t=_a.resolve(e.extensions||[],new Map),n=e.doc instanceof rt?e.doc:rt.of((e.doc||"").split(t.staticFacet(nt.lineSeparator)||Ic)),i=e.selection?e.selection instanceof fe?e.selection:fe.single(e.selection.anchor,e.selection.head):fe.single(0);return J0(i,n.length),t.staticFacet(Hc)||(i=i.asSingle()),new nt(t,n,i,t.dynamicSlots.map(()=>null),(r,o)=>o.create(r),null)}get tabSize(){return this.facet(nt.tabSize)}get lineBreak(){return this.facet(nt.lineSeparator)||`
`}get readOnly(){return this.facet(sv)}phrase(e,...t){for(let n of this.facet(nt.phrases))if(Object.prototype.hasOwnProperty.call(n,e)){e=n[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(n,i)=>{if(i=="$")return"$";let r=+(i||1);return!r||r>t.length?n:t[r-1]})),e}languageDataAt(e,t,n=-1){let i=[];for(let r of this.facet(Y0))for(let o of r(this,t,n))Object.prototype.hasOwnProperty.call(o,e)&&i.push(o[e]);return i}charCategorizer(e){return j_(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:n,length:i}=this.doc.lineAt(e),r=this.charCategorizer(e),o=e-n,l=e-n;for(;o>0;){let a=Qt(t,o,!1);if(r(t.slice(a,o))!=At.Word)break;o=a}for(;l<i;){let a=Qt(t,l);if(r(t.slice(l,a))!=At.Word)break;l=a}return o==l?null:fe.range(o+n,l+n)}}nt.allowMultipleSelections=Hc;nt.tabSize=je.define({combine:s=>s.length?s[0]:4});nt.lineSeparator=X0;nt.readOnly=sv;nt.phrases=je.define({compare(s,e){let t=Object.keys(s),n=Object.keys(e);return t.length==n.length&&t.every(i=>s[i]==e[i])}});nt.languageData=Y0;nt.changeFilter=Z0;nt.transactionFilter=ev;nt.transactionExtender=tv;uu.reconfigure=Qe.define();function Sn(s,e,t={}){let n={};for(let i of s)for(let r of Object.keys(i)){let o=i[r],l=n[r];if(l===void 0)n[r]=o;else if(!(l===o||o===void 0))if(Object.hasOwnProperty.call(t,r))n[r]=t[r](l,o);else throw new Error("Config merge conflict for field "+r)}for(let i in e)n[i]===void 0&&(n[i]=e[i]);return n}class Fi{eq(e){return this==e}range(e,t=e){return Kc.create(e,t,this)}}Fi.prototype.startSide=Fi.prototype.endSide=0;Fi.prototype.point=!1;Fi.prototype.mapMode=vs.TrackDel;let Kc=class rv{constructor(e,t,n){this.from=e,this.to=t,this.value=n}static create(e,t,n){return new rv(e,t,n)}};function Gc(s,e){return s.from-e.from||s.value.startSide-e.value.startSide}class af{constructor(e,t,n,i){this.from=e,this.to=t,this.value=n,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,t,n,i=0){let r=n?this.to:this.from;for(let o=i,l=r.length;;){if(o==l)return o;let a=o+l>>1,c=r[a]-e||(n?this.value[a].endSide:this.value[a].startSide)-t;if(a==o)return c>=0?o:l;c>=0?l=a:o=a+1}}between(e,t,n,i){for(let r=this.findIndex(t,-1e9,!0),o=this.findIndex(n,1e9,!1,r);r<o;r++)if(i(this.from[r]+e,this.to[r]+e,this.value[r])===!1)return!1}map(e,t){let n=[],i=[],r=[],o=-1,l=-1;for(let a=0;a<this.value.length;a++){let c=this.value[a],u=this.from[a]+e,d=this.to[a]+e,h,p;if(u==d){let y=t.mapPos(u,c.startSide,c.mapMode);if(y==null||(h=p=y,c.startSide!=c.endSide&&(p=t.mapPos(u,c.endSide),p<h)))continue}else if(h=t.mapPos(u,c.startSide),p=t.mapPos(d,c.endSide),h>p||h==p&&c.startSide>0&&c.endSide<=0)continue;(p-h||c.endSide-c.startSide)<0||(o<0&&(o=h),c.point&&(l=Math.max(l,p-h)),n.push(c),i.push(h-o),r.push(p-o))}return{mapped:n.length?new af(i,r,n,l):null,pos:o}}}class it{constructor(e,t,n,i){this.chunkPos=e,this.chunk=t,this.nextLayer=n,this.maxPoint=i}static create(e,t,n,i){return new it(e,t,n,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:n=!1,filterFrom:i=0,filterTo:r=this.length}=e,o=e.filter;if(t.length==0&&!o)return this;if(n&&(t=t.slice().sort(Gc)),this.isEmpty)return t.length?it.of(t):this;let l=new ov(this,null,-1).goto(0),a=0,c=[],u=new In;for(;l.value||a<t.length;)if(a<t.length&&(l.from-t[a].from||l.startSide-t[a].value.startSide)>=0){let d=t[a++];u.addInner(d.from,d.to,d.value)||c.push(d)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(a==t.length||this.chunkEnd(l.chunkIndex)<t[a].from)&&(!o||i>this.chunkEnd(l.chunkIndex)||r<this.chunkPos[l.chunkIndex])&&u.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!o||i>l.to||r<l.from||o(l.from,l.to,l.value))&&(u.addInner(l.from,l.to,l.value)||c.push(Kc.create(l.from,l.to,l.value))),l.next());return u.finishInner(this.nextLayer.isEmpty&&!c.length?it.empty:this.nextLayer.update({add:c,filter:o,filterFrom:i,filterTo:r}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],n=[],i=-1;for(let o=0;o<this.chunk.length;o++){let l=this.chunkPos[o],a=this.chunk[o],c=e.touchesRange(l,l+a.length);if(c===!1)i=Math.max(i,a.maxPoint),t.push(a),n.push(e.mapPos(l));else if(c===!0){let{mapped:u,pos:d}=a.map(l,e);u&&(i=Math.max(i,u.maxPoint),t.push(u),n.push(d))}}let r=this.nextLayer.map(e);return t.length==0?r:new it(n,t,r||it.empty,i)}between(e,t,n){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let r=this.chunkPos[i],o=this.chunk[i];if(t>=r&&e<=r+o.length&&o.between(r,e-r,t-r,n)===!1)return}this.nextLayer.between(e,t,n)}}iter(e=0){return Bo.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return Bo.from(e).goto(t)}static compare(e,t,n,i,r=-1){let o=e.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=r),l=t.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=r),a=Mp(o,l,n),c=new to(o,a,r),u=new to(l,a,r);n.iterGaps((d,h,p)=>Dp(c,d,u,h,p,i)),n.empty&&n.length==0&&Dp(c,0,u,0,0,i)}static eq(e,t,n=0,i){i==null&&(i=999999999);let r=e.filter(u=>!u.isEmpty&&t.indexOf(u)<0),o=t.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(r.length!=o.length)return!1;if(!r.length)return!0;let l=Mp(r,o),a=new to(r,l,0).goto(n),c=new to(o,l,0).goto(n);for(;;){if(a.to!=c.to||!Jc(a.active,c.active)||a.point&&(!c.point||!a.point.eq(c.point)))return!1;if(a.to>i)return!0;a.next(),c.next()}}static spans(e,t,n,i,r=-1){let o=new to(e,null,r).goto(t),l=t,a=o.openStart;for(;;){let c=Math.min(o.to,n);if(o.point){let u=o.activeForPoint(o.to),d=o.pointFrom<t?u.length+1:o.point.startSide<0?u.length:Math.min(u.length,a);i.point(l,c,o.point,u,d,o.pointRank),a=Math.min(o.openEnd(c),u.length)}else c>l&&(i.span(l,c,o.active,a),a=o.openEnd(c));if(o.to>n)return a+(o.point&&o.to>n?1:0);l=o.to,o.next()}}static of(e,t=!1){let n=new In;for(let i of e instanceof Kc?[e]:t?O_(e):e)n.add(i.from,i.to,i.value);return n.finish()}static join(e){if(!e.length)return it.empty;let t=e[e.length-1];for(let n=e.length-2;n>=0;n--)for(let i=e[n];i!=it.empty;i=i.nextLayer)t=new it(i.chunkPos,i.chunk,t,Math.max(i.maxPoint,t.maxPoint));return t}}it.empty=new it([],[],null,-1);function O_(s){if(s.length>1)for(let e=s[0],t=1;t<s.length;t++){let n=s[t];if(Gc(e,n)>0)return s.slice().sort(Gc);e=n}return s}it.empty.nextLayer=it.empty;class In{finishChunk(e){this.chunks.push(new af(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,n){this.addInner(e,t,n)||(this.nextLayer||(this.nextLayer=new In)).add(e,t,n)}addInner(e,t,n){let i=e-this.lastTo||n.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=n,this.lastFrom=e,this.lastTo=t,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let n=t.value.length-1;return this.last=t.value[n],this.lastFrom=t.from[n]+e,this.lastTo=t.to[n]+e,!0}finish(){return this.finishInner(it.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=it.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function Mp(s,e,t){let n=new Map;for(let r of s)for(let o=0;o<r.chunk.length;o++)r.chunk[o].maxPoint<=0&&n.set(r.chunk[o],r.chunkPos[o]);let i=new Set;for(let r of e)for(let o=0;o<r.chunk.length;o++){let l=n.get(r.chunk[o]);l!=null&&(t?t.mapPos(l):l)==r.chunkPos[o]&&!t?.touchesRange(l,l+r.chunk[o].length)&&i.add(r.chunk[o])}return i}class ov{constructor(e,t,n,i=0){this.layer=e,this.skip=t,this.minPoint=n,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,n){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!n||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],n=e+t.from[this.rangeIndex];if(this.from=n,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Bo{constructor(e){this.heap=e}static from(e,t=null,n=-1){let i=[];for(let r=0;r<e.length;r++)for(let o=e[r];!o.isEmpty;o=o.nextLayer)o.maxPoint>=n&&i.push(new ov(o,t,n,r));return i.length==1?i[0]:new Bo(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let n of this.heap)n.goto(e,t);for(let n=this.heap.length>>1;n>=0;n--)qu(this.heap,n);return this.next(),this}forward(e,t){for(let n of this.heap)n.forward(e,t);for(let n=this.heap.length>>1;n>=0;n--)qu(this.heap,n);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),qu(this.heap,0)}}}function qu(s,e){for(let t=s[e];;){let n=(e<<1)+1;if(n>=s.length)break;let i=s[n];if(n+1<s.length&&i.compare(s[n+1])>=0&&(i=s[n+1],n++),t.compare(i)<0)break;s[n]=t,s[e]=i,e=n}}class to{constructor(e,t,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Bo.from(e,t,n)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){Ol(this.active,e),Ol(this.activeTo,e),Ol(this.activeRank,e),this.minActive=Ep(this.active,this.activeTo)}addActive(e){let t=0,{value:n,to:i,rank:r}=this.cursor;for(;t<this.activeRank.length&&(r-this.activeRank[t]||i-this.activeTo[t])>0;)t++;Pl(this.active,t,n),Pl(this.activeTo,t,i),Pl(this.activeRank,t,r),e&&Pl(e,t,this.cursor.from),this.minActive=Ep(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let n=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),n&&Ol(n,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let r=this.cursor.value;if(!r.point)this.addActive(n),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=r,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=r.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(n){this.openStart=0;for(let i=n.length-1;i>=0&&n[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>e||this.activeTo[n]==e&&this.active[n].endSide>=this.point.endSide)&&t.push(this.active[n]);return t.reverse()}openEnd(e){let t=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>e;n--)t++;return t}}function Dp(s,e,t,n,i,r){s.goto(e),t.goto(n);let o=n+i,l=n,a=n-e;for(;;){let c=s.to+a-t.to,u=c||s.endSide-t.endSide,d=u<0?s.to+a:t.to,h=Math.min(d,o);if(s.point||t.point?s.point&&t.point&&(s.point==t.point||s.point.eq(t.point))&&Jc(s.activeForPoint(s.to),t.activeForPoint(t.to))||r.comparePoint(l,h,s.point,t.point):h>l&&!Jc(s.active,t.active)&&r.compareRange(l,h,s.active,t.active),d>o)break;(c||s.openEnd!=t.openEnd)&&r.boundChange&&r.boundChange(d),l=d,u<=0&&s.next(),u>=0&&t.next()}}function Jc(s,e){if(s.length!=e.length)return!1;for(let t=0;t<s.length;t++)if(s[t]!=e[t]&&!s[t].eq(e[t]))return!1;return!0}function Ol(s,e){for(let t=e,n=s.length-1;t<n;t++)s[t]=s[t+1];s.pop()}function Pl(s,e,t){for(let n=s.length-1;n>=e;n--)s[n+1]=s[n];s[e]=t}function Ep(s,e){let t=-1,n=1e9;for(let i=0;i<e.length;i++)(e[i]-n||s[i].endSide-s[t].endSide)<0&&(t=i,n=e[i]);return t}function Nr(s,e,t=s.length){let n=0;for(let i=0;i<t&&i<s.length;)s.charCodeAt(i)==9?(n+=e-n%e,i++):(n++,i=Qt(s,i));return n}function Qc(s,e,t,n){for(let i=0,r=0;;){if(r>=e)return i;if(i==s.length)break;r+=s.charCodeAt(i)==9?t-r%t:1,i=Qt(s,i)}return n===!0?-1:s.length}const Yc="",Tp=typeof Symbol>"u"?"__"+Yc:Symbol.for(Yc),Xc=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),jp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class di{constructor(e,t){this.rules=[];let{finish:n}=t||{};function i(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function r(o,l,a,c){let u=[],d=/^@(\w+)\b/.exec(o[0]),h=d&&d[1]=="keyframes";if(d&&l==null)return a.push(o[0]+";");for(let p in l){let y=l[p];if(/&/.test(p))r(p.split(/,\s*/).map(b=>o.map(x=>b.replace(/&/,x))).reduce((b,x)=>b.concat(x)),y,a);else if(y&&typeof y=="object"){if(!d)throw new RangeError("The value of a property ("+p+") should be a primitive value.");r(i(p),y,u,h)}else y!=null&&u.push(p.replace(/_.*/,"").replace(/[A-Z]/g,b=>"-"+b.toLowerCase())+": "+y+";")}(u.length||h)&&a.push((n&&!d&&!c?o.map(n):o).join(", ")+" {"+u.join(" ")+"}")}for(let o in e)r(i(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=jp[Tp]||1;return jp[Tp]=e+1,Yc+e.toString(36)}static mount(e,t,n){let i=e[Xc],r=n&&n.nonce;i?r&&i.setNonce(r):i=new P_(e,r),i.mount(Array.isArray(t)?t:[t],e)}}let Op=new Map;class P_{constructor(e,t){let n=e.ownerDocument||e,i=n.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let r=Op.get(n);if(r)return e[Xc]=r;this.sheet=new i.CSSStyleSheet,Op.set(n,this)}else this.styleTag=n.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[Xc]=this}mount(e,t){let n=this.sheet,i=0,r=0;for(let o=0;o<e.length;o++){let l=e[o],a=this.modules.indexOf(l);if(a<r&&a>-1&&(this.modules.splice(a,1),r--,a=-1),a==-1){if(this.modules.splice(r++,0,l),n)for(let c=0;c<l.rules.length;c++)n.insertRule(l.rules[c],i++)}else{for(;r<a;)i+=this.modules[r++].rules.length;i+=l.rules.length,r++}}if(n)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let o="";for(let a=0;a<this.modules.length;a++)o+=this.modules[a].getRules()+`
`;this.styleTag.textContent=o;let l=t.head||t;this.styleTag.parentNode!=l&&l.insertBefore(this.styleTag,l.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var fi={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Io={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},$_=typeof navigator<"u"&&/Mac/.test(navigator.platform),R_=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Kt=0;Kt<10;Kt++)fi[48+Kt]=fi[96+Kt]=String(Kt);for(var Kt=1;Kt<=24;Kt++)fi[Kt+111]="F"+Kt;for(var Kt=65;Kt<=90;Kt++)fi[Kt]=String.fromCharCode(Kt+32),Io[Kt]=String.fromCharCode(Kt);for(var Wu in fi)Io.hasOwnProperty(Wu)||(Io[Wu]=fi[Wu]);function L_(s){var e=$_&&s.metaKey&&s.shiftKey&&!s.ctrlKey&&!s.altKey||R_&&s.shiftKey&&s.key&&s.key.length==1||s.key=="Unidentified",t=!e&&s.key||(s.shiftKey?Io:fi)[s.keyCode]||s.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function yt(){var s=arguments[0];typeof s=="string"&&(s=document.createElement(s));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var i=t[n];typeof i=="string"?s.setAttribute(n,i):i!=null&&(s[n]=i)}e++}for(;e<arguments.length;e++)lv(s,arguments[e]);return s}function lv(s,e){if(typeof e=="string")s.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)s.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)lv(s,e[t]);else throw new RangeError("Unsupported child node: "+e)}let gs=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Zc=typeof document<"u"?document:{documentElement:{style:{}}};const ed=/Edge\/(\d+)/.exec(gs.userAgent),av=/MSIE \d/.test(gs.userAgent),td=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(gs.userAgent),cu=!!(av||td||ed),Pp=!cu&&/gecko\/(\d+)/i.test(gs.userAgent),Ku=!cu&&/Chrome\/(\d+)/.exec(gs.userAgent),V_="webkitFontSmoothing"in Zc.documentElement.style,sd=!cu&&/Apple Computer/.test(gs.vendor),$p=sd&&(/Mobile\/\w+/.test(gs.userAgent)||gs.maxTouchPoints>2);var Me={mac:$p||/Mac/.test(gs.platform),windows:/Win/.test(gs.platform),linux:/Linux|X11/.test(gs.platform),ie:cu,ie_version:av?Zc.documentMode||6:td?+td[1]:ed?+ed[1]:0,gecko:Pp,gecko_version:Pp?+(/Firefox\/(\d+)/.exec(gs.userAgent)||[0,0])[1]:0,chrome:!!Ku,chrome_version:Ku?+Ku[1]:0,ios:$p,android:/Android\b/.test(gs.userAgent),webkit_version:V_?+(/\bAppleWebKit\/(\d+)/.exec(gs.userAgent)||[0,0])[1]:0,safari:sd,safari_version:sd?+(/\bVersion\/(\d+(\.\d+)?)/.exec(gs.userAgent)||[0,0])[1]:0,tabSize:Zc.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function No(s){let e;return s.nodeType==11?e=s.getSelection?s:s.ownerDocument:e=s,e.getSelection()}function nd(s,e){return e?s==e||s.contains(e.nodeType!=1?e.parentNode:e):!1}function la(s,e){if(!e.anchorNode)return!1;try{return nd(s,e.anchorNode)}catch{return!1}}function Fo(s){return s.nodeType==3?Ui(s,0,s.nodeValue.length).getClientRects():s.nodeType==1?s.getClientRects():[]}function So(s,e,t,n){return t?Rp(s,e,t,n,-1)||Rp(s,e,t,n,1):!1}function zi(s){for(var e=0;;e++)if(s=s.previousSibling,!s)return e}function Ma(s){return s.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(s.nodeName)}function Rp(s,e,t,n,i){for(;;){if(s==t&&e==n)return!0;if(e==(i<0?0:wn(s))){if(s.nodeName=="DIV")return!1;let r=s.parentNode;if(!r||r.nodeType!=1)return!1;e=zi(s)+(i<0?0:1),s=r}else if(s.nodeType==1){if(s=s.childNodes[e+(i<0?-1:0)],s.nodeType==1&&s.contentEditable=="false")return!1;e=i<0?wn(s):0}else return!1}}function wn(s){return s.nodeType==3?s.nodeValue.length:s.childNodes.length}function du(s,e){let t=e?s.left:s.right;return{left:t,right:t,top:s.top,bottom:s.bottom}}function B_(s){let e=s.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:s.innerWidth,top:0,bottom:s.innerHeight}}function uv(s,e){let t=e.width/s.offsetWidth,n=e.height/s.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-s.offsetWidth)<1)&&(t=1),(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.height-s.offsetHeight)<1)&&(n=1),{scaleX:t,scaleY:n}}function I_(s,e,t,n,i,r,o,l){let a=s.ownerDocument,c=a.defaultView||window;for(let u=s,d=!1;u&&!d;)if(u.nodeType==1){let h,p=u==a.body,y=1,b=1;if(p)h=B_(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(u).position)&&(d=!0),u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let j=u.getBoundingClientRect();({scaleX:y,scaleY:b}=uv(u,j)),h={left:j.left,right:j.left+u.clientWidth*y,top:j.top,bottom:j.top+u.clientHeight*b}}let x=0,g=0;if(i=="nearest")e.top<h.top?(g=e.top-(h.top+o),t>0&&e.bottom>h.bottom+g&&(g=e.bottom-h.bottom+o)):e.bottom>h.bottom&&(g=e.bottom-h.bottom+o,t<0&&e.top-g<h.top&&(g=e.top-(h.top+o)));else{let j=e.bottom-e.top,B=h.bottom-h.top;g=(i=="center"&&j<=B?e.top+j/2-B/2:i=="start"||i=="center"&&t<0?e.top-o:e.bottom-B+o)-h.top}if(n=="nearest"?e.left<h.left?(x=e.left-(h.left+r),t>0&&e.right>h.right+x&&(x=e.right-h.right+r)):e.right>h.right&&(x=e.right-h.right+r,t<0&&e.left<h.left+x&&(x=e.left-(h.left+r))):x=(n=="center"?e.left+(e.right-e.left)/2-(h.right-h.left)/2:n=="start"==l?e.left-r:e.right-(h.right-h.left)+r)-h.left,x||g)if(p)c.scrollBy(x,g);else{let j=0,B=0;if(g){let U=u.scrollTop;u.scrollTop+=g/b,B=(u.scrollTop-U)*b}if(x){let U=u.scrollLeft;u.scrollLeft+=x/y,j=(u.scrollLeft-U)*y}e={left:e.left-j,top:e.top-B,right:e.right-j,bottom:e.bottom-B},j&&Math.abs(j-x)<1&&(n="nearest"),B&&Math.abs(B-g)<1&&(i="nearest")}if(p)break;(e.top<h.top||e.bottom>h.bottom||e.left<h.left||e.right>h.right)&&(e={left:Math.max(e.left,h.left),right:Math.min(e.right,h.right),top:Math.max(e.top,h.top),bottom:Math.min(e.bottom,h.bottom)}),u=u.assignedSlot||u.parentNode}else if(u.nodeType==11)u=u.host;else break}function N_(s){let e=s.ownerDocument,t,n;for(let i=s.parentNode;i&&!(i==e.body||t&&n);)if(i.nodeType==1)!n&&i.scrollHeight>i.clientHeight&&(n=i),!t&&i.scrollWidth>i.clientWidth&&(t=i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;return{x:t,y:n}}class F_{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:n}=e;this.set(t,Math.min(e.anchorOffset,t?wn(t):0),n,Math.min(e.focusOffset,n?wn(n):0))}set(e,t,n,i){this.anchorNode=e,this.anchorOffset=t,this.focusNode=n,this.focusOffset=i}}let Mi=null;Me.safari&&Me.safari_version>=26&&(Mi=!1);function cv(s){if(s.setActive)return s.setActive();if(Mi)return s.focus(Mi);let e=[];for(let t=s;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(s.focus(Mi==null?{get preventScroll(){return Mi={preventScroll:!0},!0}}:void 0),!Mi){Mi=!1;for(let t=0;t<e.length;){let n=e[t++],i=e[t++],r=e[t++];n.scrollTop!=i&&(n.scrollTop=i),n.scrollLeft!=r&&(n.scrollLeft=r)}}}let Lp;function Ui(s,e,t=e){let n=Lp||(Lp=document.createRange());return n.setEnd(s,t),n.setStart(s,e),n}function kr(s,e,t,n){let i={key:e,code:e,keyCode:t,which:t,cancelable:!0};n&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=n);let r=new KeyboardEvent("keydown",i);r.synthetic=!0,s.dispatchEvent(r);let o=new KeyboardEvent("keyup",i);return o.synthetic=!0,s.dispatchEvent(o),r.defaultPrevented||o.defaultPrevented}function z_(s){for(;s;){if(s&&(s.nodeType==9||s.nodeType==11&&s.host))return s;s=s.assignedSlot||s.parentNode}return null}function dv(s){for(;s.attributes.length;)s.removeAttributeNode(s.attributes[0])}function U_(s,e){let t=e.focusNode,n=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=n)return!1;for(n=Math.min(n,wn(t));;)if(n){if(t.nodeType!=1)return!1;let i=t.childNodes[n-1];i.contentEditable=="false"?n--:(t=i,n=wn(t))}else{if(t==s)return!0;n=zi(t),t=t.parentNode}}function fv(s){return s.scrollTop>Math.max(1,s.scrollHeight-s.clientHeight-4)}function hv(s,e){for(let t=s,n=e;;){if(t.nodeType==3&&n>0)return{node:t,offset:n};if(t.nodeType==1&&n>0){if(t.contentEditable=="false")return null;t=t.childNodes[n-1],n=wn(t)}else if(t.parentNode&&!Ma(t))n=zi(t),t=t.parentNode;else return null}}function pv(s,e){for(let t=s,n=e;;){if(t.nodeType==3&&n<t.nodeValue.length)return{node:t,offset:n};if(t.nodeType==1&&n<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[n],n=0}else if(t.parentNode&&!Ma(t))n=zi(t)+1,t=t.parentNode;else return null}}class os{constructor(e,t,n=!0){this.node=e,this.offset=t,this.precise=n}static before(e,t){return new os(e.parentNode,zi(e),t)}static after(e,t){return new os(e.parentNode,zi(e)+1,t)}}const uf=[];class ht{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let n of this.children){if(n==e)return t;t+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let n=this.dom,i=null,r;for(let o of this.children){if(o.flags&7){if(!o.dom&&(r=i?i.nextSibling:n.firstChild)){let l=ht.get(r);(!l||!l.parent&&l.canReuseDOM(o))&&o.reuseDOM(r)}o.sync(e,t),o.flags&=-8}if(r=i?i.nextSibling:n.firstChild,t&&!t.written&&t.node==n&&r!=o.dom&&(t.written=!0),o.dom.parentNode==n)for(;r&&r!=o.dom;)r=Vp(r);else n.insertBefore(o.dom,r);i=o.dom}for(r=i?i.nextSibling:n.firstChild,r&&t&&t.node==n&&(t.written=!0);r;)r=Vp(r)}else if(this.flags&1)for(let n of this.children)n.flags&7&&(n.sync(e,t),n.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let n;if(e==this.dom)n=this.dom.childNodes[t];else{let i=wn(e)==0?0:t==0?-1:1;for(;;){let r=e.parentNode;if(r==this.dom)break;i==0&&r.firstChild!=r.lastChild&&(e==r.firstChild?i=-1:i=1),e=r}i<0?n=e:n=e.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!ht.get(n);)n=n.nextSibling;if(!n)return this.length;for(let i=0,r=0;;i++){let o=this.children[i];if(o.dom==n)return r;r+=o.length+o.breakAfter}}domBoundsAround(e,t,n=0){let i=-1,r=-1,o=-1,l=-1;for(let a=0,c=n,u=n;a<this.children.length;a++){let d=this.children[a],h=c+d.length;if(c<e&&h>t)return d.domBoundsAround(e,t,c);if(h>=e&&i==-1&&(i=a,r=c),c>t&&d.dom.parentNode==this.dom){o=a,l=u;break}u=h,c=h+d.breakAfter}return{from:r,to:l<0?n+this.length:l,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,n=uf){this.markDirty();for(let i=e;i<t;i++){let r=this.children[i];r.parent==this&&n.indexOf(r)<0&&r.destroy()}n.length<250?this.children.splice(e,t-e,...n):this.children=[].concat(this.children.slice(0,e),n,this.children.slice(t));for(let i=0;i<n.length;i++)n[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new gv(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,n,i,r,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}ht.prototype.breakAfter=0;function Vp(s){let e=s.nextSibling;return s.parentNode.removeChild(s),e}class gv{constructor(e,t,n){this.children=e,this.pos=t,this.i=n,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function mv(s,e,t,n,i,r,o,l,a){let{children:c}=s,u=c.length?c[e]:null,d=r.length?r[r.length-1]:null,h=d?d.breakAfter:o;if(!(e==n&&u&&!o&&!h&&r.length<2&&u.merge(t,i,r.length?d:null,t==0,l,a))){if(n<c.length){let p=c[n];p&&(i<p.length||p.breakAfter&&d?.breakAfter)?(e==n&&(p=p.split(i),i=0),!h&&d&&p.merge(0,i,d,!0,0,a)?r[r.length-1]=p:((i||p.children.length&&!p.children[0].length)&&p.merge(0,i,null,!1,0,a),r.push(p))):p?.breakAfter&&(d?d.breakAfter=1:o=1),n++}for(u&&(u.breakAfter=o,t>0&&(!o&&r.length&&u.merge(t,u.length,r[0],!1,l,0)?u.breakAfter=r.shift().breakAfter:(t<u.length||u.children.length&&u.children[u.children.length-1].length==0)&&u.merge(t,u.length,null,!1,l,0),e++));e<n&&r.length;)if(c[n-1].become(r[r.length-1]))n--,r.pop(),a=r.length?0:l;else if(c[e].become(r[0]))e++,r.shift(),l=r.length?0:a;else break;!r.length&&e&&n<c.length&&!c[e-1].breakAfter&&c[n].merge(0,0,c[e-1],!1,l,a)&&e--,(e<n||r.length)&&s.replaceChildren(e,n,r)}}function vv(s,e,t,n,i,r){let o=s.childCursor(),{i:l,off:a}=o.findPos(t,1),{i:c,off:u}=o.findPos(e,-1),d=e-t;for(let h of n)d+=h.length;s.length+=d,mv(s,c,u,l,a,n,0,i,r)}const H_=256;class tn extends ht{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,n){return this.flags&8||n&&(!(n instanceof tn)||this.length-(t-e)+n.length>H_||n.flags&8)?!1:(this.text=this.text.slice(0,e)+(n?n.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new tn(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new os(this.dom,e)}domBoundsAround(e,t,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return q_(this.dom,e,t)}}class Nn extends ht{constructor(e,t=[],n=0){super(),this.mark=e,this.children=t,this.length=n;for(let i of t)i.setParent(this)}setAttrs(e){if(dv(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,n,i,r,o){return n&&(!(n instanceof Nn&&n.mark.eq(this.mark))||e&&r<=0||t<this.length&&o<=0)?!1:(vv(this,e,t,n?n.children.slice():[],r-1,o-1),this.markDirty(),!0)}split(e){let t=[],n=0,i=-1,r=0;for(let l of this.children){let a=n+l.length;a>e&&t.push(n<e?l.split(e-n):l),i<0&&n>=e&&(i=r),n=a,r++}let o=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new Nn(this.mark,t,o)}domAtPos(e){return yv(this,e)}coordsAt(e,t){return kv(this,e,t)}}function q_(s,e,t){let n=s.nodeValue.length;e>n&&(e=n);let i=e,r=e,o=0;e==0&&t<0||e==n&&t>=0?Me.chrome||Me.gecko||(e?(i--,o=1):r<n&&(r++,o=-1)):t<0?i--:r<n&&r++;let l=Ui(s,i,r).getClientRects();if(!l.length)return null;let a=l[(o?o<0:t>=0)?0:l.length-1];return Me.safari&&!o&&a.width==0&&(a=Array.prototype.find.call(l,c=>c.width)||a),o?du(a,o<0):a||null}class si extends ht{static create(e,t,n){return new si(e,t,n)}constructor(e,t,n){super(),this.widget=e,this.length=t,this.side=n,this.prevWidget=null}split(e){let t=si.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,n,i,r,o){return n&&(!(n instanceof si)||!this.widget.compare(n.widget)||e>0&&r<=0||t<this.length&&o<=0)?!1:(this.length=e+(n?n.length:0)+(this.length-t),!0)}become(e){return e instanceof si&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return rt.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,n=t&&t.state.doc,i=this.posAtStart;return n?n.slice(i,i+this.length):rt.empty}domAtPos(e){return(this.length?e==0:this.side>0)?os.before(this.dom):os.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let n=this.widget.coordsAt(this.dom,e,t);if(n)return n;let i=this.dom.getClientRects(),r=null;if(!i.length)return null;let o=this.side?this.side<0:e>0;for(let l=o?i.length-1:0;r=i[l],!(e>0?l==0:l==i.length-1||r.top<r.bottom);l+=o?-1:1);return du(r,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Dr extends ht{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Dr&&e.side==this.side}split(){return new Dr(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?os.before(this.dom):os.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return rt.empty}get isHidden(){return!0}}tn.prototype.children=si.prototype.children=Dr.prototype.children=uf;function yv(s,e){let t=s.dom,{children:n}=s,i=0;for(let r=0;i<n.length;i++){let o=n[i],l=r+o.length;if(!(l==r&&o.getSide()<=0)){if(e>r&&e<l&&o.dom.parentNode==t)return o.domAtPos(e-r);if(e<=r)break;r=l}}for(let r=i;r>0;r--){let o=n[r-1];if(o.dom.parentNode==t)return o.domAtPos(o.length)}for(let r=i;r<n.length;r++){let o=n[r];if(o.dom.parentNode==t)return o.domAtPos(0)}return new os(t,0)}function bv(s,e,t){let n,{children:i}=s;t>0&&e instanceof Nn&&i.length&&(n=i[i.length-1])instanceof Nn&&n.mark.eq(e.mark)?bv(n,e.children[0],t-1):(i.push(e),e.setParent(s)),s.length+=e.length}function kv(s,e,t){let n=null,i=-1,r=null,o=-1;function l(c,u){for(let d=0,h=0;d<c.children.length&&h<=u;d++){let p=c.children[d],y=h+p.length;y>=u&&(p.children.length?l(p,u-h):(!r||r.isHidden&&(t>0||K_(r,p)))&&(y>u||h==y&&p.getSide()>0)?(r=p,o=u-h):(h<u||h==y&&p.getSide()<0&&!p.isHidden)&&(n=p,i=u-h)),h=y}}l(s,e);let a=(t<0?n:r)||n||r;return a?a.coordsAt(Math.max(0,a==n?i:o),t):W_(s)}function W_(s){let e=s.dom.lastChild;if(!e)return s.dom.getBoundingClientRect();let t=Fo(e);return t[t.length-1]||null}function K_(s,e){let t=s.coordsAt(0,1),n=e.coordsAt(0,1);return t&&n&&n.top<t.bottom}function id(s,e){for(let t in s)t=="class"&&e.class?e.class+=" "+s.class:t=="style"&&e.style?e.style+=";"+s.style:e[t]=s[t];return e}const Bp=Object.create(null);function Da(s,e,t){if(s==e)return!0;s||(s=Bp),e||(e=Bp);let n=Object.keys(s),i=Object.keys(e);if(n.length-(t&&n.indexOf(t)>-1?1:0)!=i.length-(t&&i.indexOf(t)>-1?1:0))return!1;for(let r of n)if(r!=t&&(i.indexOf(r)==-1||s[r]!==e[r]))return!1;return!0}function rd(s,e,t){let n=!1;if(e)for(let i in e)t&&i in t||(n=!0,i=="style"?s.style.cssText="":s.removeAttribute(i));if(t)for(let i in t)e&&e[i]==t[i]||(n=!0,i=="style"?s.style.cssText=t[i]:s.setAttribute(i,t[i]));return n}function G_(s){let e=Object.create(null);for(let t=0;t<s.attributes.length;t++){let n=s.attributes[t];e[n.name]=n.value}return e}class mi{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,n){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var ys=(function(s){return s[s.Text=0]="Text",s[s.WidgetBefore=1]="WidgetBefore",s[s.WidgetAfter=2]="WidgetAfter",s[s.WidgetRange=3]="WidgetRange",s})(ys||(ys={}));class Fe extends Fi{constructor(e,t,n,i){super(),this.startSide=e,this.endSide=t,this.widget=n,this.spec=i}get heightRelevant(){return!1}static mark(e){return new ol(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),n=!!e.block;return t+=n&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new hi(e,t,t,n,e.widget||null,!1)}static replace(e){let t=!!e.block,n,i;if(e.isBlockGap)n=-5e8,i=4e8;else{let{start:r,end:o}=xv(e,t);n=(r?t?-3e8:-1:5e8)-1,i=(o?t?2e8:1:-6e8)+1}return new hi(e,n,i,t,e.widget||null,!0)}static line(e){return new ll(e)}static set(e,t=!1){return it.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Fe.none=it.empty;class ol extends Fe{constructor(e){let{start:t,end:n}=xv(e);super(t?-1:5e8,n?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,n;return this==e||e instanceof ol&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((n=e.attrs)===null||n===void 0?void 0:n.class))&&Da(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}ol.prototype.point=!1;class ll extends Fe{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof ll&&this.spec.class==e.spec.class&&Da(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}ll.prototype.mapMode=vs.TrackBefore;ll.prototype.point=!0;class hi extends Fe{constructor(e,t,n,i,r,o){super(t,n,r,e),this.block=i,this.isReplace=o,this.mapMode=i?t<=0?vs.TrackBefore:vs.TrackAfter:vs.TrackDel}get type(){return this.startSide!=this.endSide?ys.WidgetRange:this.startSide<=0?ys.WidgetBefore:ys.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof hi&&J_(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}hi.prototype.point=!0;function xv(s,e=!1){let{inclusiveStart:t,inclusiveEnd:n}=s;return t==null&&(t=s.inclusive),n==null&&(n=s.inclusive),{start:t??e,end:n??e}}function J_(s,e){return s==e||!!(s&&e&&s.compare(e))}function aa(s,e,t,n=0){let i=t.length-1;i>=0&&t[i]+n>=s?t[i]=Math.max(t[i],e):t.push(s,e)}class Lt extends ht{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,n,i,r,o){if(n){if(!(n instanceof Lt))return!1;this.dom||n.transferDOM(this)}return i&&this.setDeco(n?n.attrs:null),vv(this,e,t,n?n.children.slice():[],r,o),!0}split(e){let t=new Lt;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i:n,off:i}=this.childPos(e);i&&(t.append(this.children[n].split(i),0),this.children[n].merge(i,this.children[n].length,null,!1,0,0),n++);for(let r=n;r<this.children.length;r++)t.append(this.children[r],0);for(;n>0&&this.children[n-1].length==0;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Da(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){bv(this,e,t)}addLineDeco(e){let t=e.spec.attributes,n=e.spec.class;t&&(this.attrs=id(t,this.attrs||{})),n&&(this.attrs=id({class:n},this.attrs||{}))}domAtPos(e){return yv(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var n;this.dom?this.flags&4&&(dv(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(rd(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let i=this.dom.lastChild;for(;i&&ht.get(i)instanceof Nn;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((n=ht.get(i))===null||n===void 0?void 0:n.isEditable)==!1&&(!Me.ios||!this.children.some(r=>r instanceof tn))){let r=document.createElement("BR");r.cmIgnore=!0,this.dom.appendChild(r)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let n of this.children){if(!(n instanceof tn)||/[^ -~]/.test(n.text))return null;let i=Fo(n.dom);if(i.length!=1)return null;e+=i[0].width,t=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let n=kv(this,e,t);if(!this.children.length&&n&&this.parent){let{heightOracle:i}=this.parent.view.viewState,r=n.bottom-n.top;if(Math.abs(r-i.lineHeight)<2&&i.textHeight<r){let o=(r-i.textHeight)/2;return{top:n.top+o,bottom:n.bottom-o,left:n.left,right:n.left}}}return n}become(e){return e instanceof Lt&&this.children.length==0&&e.children.length==0&&Da(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let n=0,i=0;n<e.children.length;n++){let r=e.children[n],o=i+r.length;if(o>=t){if(r instanceof Lt)return r;if(o>t)break}i=o+r.breakAfter}return null}}class Ln extends ht{constructor(e,t,n){super(),this.widget=e,this.length=t,this.deco=n,this.breakAfter=0,this.prevWidget=null}merge(e,t,n,i,r,o){return n&&(!(n instanceof Ln)||!this.widget.compare(n.widget)||e>0&&r<=0||t<this.length&&o<=0)?!1:(this.length=e+(n?n.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?os.before(this.dom):os.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let n=new Ln(this.widget,t,this.deco);return n.breakAfter=this.breakAfter,n}get children(){return uf}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):rt.empty}domBoundsAround(){return null}become(e){return e instanceof Ln&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){let n=this.widget.coordsAt(this.dom,e,t);return n||(this.widget instanceof od?null:du(this.dom.getBoundingClientRect(),this.length?e==0:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:n}=this.deco;return t==n?!1:e<0?t<0:n>0}}class od extends mi{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class Co{constructor(e,t,n,i){this.doc=e,this.pos=t,this.end=n,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Ln&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Lt),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append($l(new Dr(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Ln)&&this.getLine()}buildText(e,t,n){for(;e>0;){if(this.textOff==this.text.length){let{value:o,lineBreak:l,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(l){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=o,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e),r=Math.min(i,512);this.flushBuffer(t.slice(t.length-n)),this.getLine().append($l(new tn(this.text.slice(this.textOff,this.textOff+r)),t),n),this.atCursorPos=!0,this.textOff+=r,e-=r,n=i<=r?0:t.length}}span(e,t,n,i){this.buildText(t-e,n,i),this.pos=t,this.openStart<0&&(this.openStart=i)}point(e,t,n,i,r,o){if(this.disallowBlockEffectsFor[o]&&n instanceof hi){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=t-e;if(n instanceof hi)if(n.block)n.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Ln(n.widget||Er.block,l,n));else{let a=si.create(n.widget||Er.inline,l,l?0:n.startSide),c=this.atCursorPos&&!a.isEditable&&r<=i.length&&(e<t||n.startSide>0),u=!a.isEditable&&(e<t||r>i.length||n.startSide<=0),d=this.getLine();this.pendingBuffer==2&&!c&&!a.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),c&&(d.append($l(new Dr(1),i),r),r=i.length+Math.max(0,r-i.length)),d.append($l(a,i),r),this.atCursorPos=u,this.pendingBuffer=u?e<t||r>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=r)}static build(e,t,n,i,r){let o=new Co(e,t,n,r);return o.openEnd=it.spans(i,t,n,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function $l(s,e){for(let t of e)s=new Nn(t,[s],s.length);return s}class Er extends mi{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Er.inline=new Er("span");Er.block=new Er("div");var Ct=(function(s){return s[s.LTR=0]="LTR",s[s.RTL=1]="RTL",s})(Ct||(Ct={}));const Hi=Ct.LTR,cf=Ct.RTL;function wv(s){let e=[];for(let t=0;t<s.length;t++)e.push(1<<+s[t]);return e}const Q_=wv("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),Y_=wv("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),ld=Object.create(null),un=[];for(let s of["()","[]","{}"]){let e=s.charCodeAt(0),t=s.charCodeAt(1);ld[e]=t,ld[t]=-e}function Sv(s){return s<=247?Q_[s]:1424<=s&&s<=1524?2:1536<=s&&s<=1785?Y_[s-1536]:1774<=s&&s<=2220?4:8192<=s&&s<=8204?256:64336<=s&&s<=65023?4:1}const X_=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class ni{get dir(){return this.level%2?cf:Hi}constructor(e,t,n){this.from=e,this.to=t,this.level=n}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,n,i){let r=-1;for(let o=0;o<e.length;o++){let l=e[o];if(l.from<=t&&l.to>=t){if(l.level==n)return o;(r<0||(i!=0?i<0?l.from<t:l.to>t:e[r].level>l.level))&&(r=o)}}if(r<0)throw new RangeError("Index out of range");return r}}function Cv(s,e){if(s.length!=e.length)return!1;for(let t=0;t<s.length;t++){let n=s[t],i=e[t];if(n.from!=i.from||n.to!=i.to||n.direction!=i.direction||!Cv(n.inner,i.inner))return!1}return!0}const bt=[];function Z_(s,e,t,n,i){for(let r=0;r<=n.length;r++){let o=r?n[r-1].to:e,l=r<n.length?n[r].from:t,a=r?256:i;for(let c=o,u=a,d=a;c<l;c++){let h=Sv(s.charCodeAt(c));h==512?h=u:h==8&&d==4&&(h=16),bt[c]=h==4?2:h,h&7&&(d=h),u=h}for(let c=o,u=a,d=a;c<l;c++){let h=bt[c];if(h==128)c<l-1&&u==bt[c+1]&&u&24?h=bt[c]=u:bt[c]=256;else if(h==64){let p=c+1;for(;p<l&&bt[p]==64;)p++;let y=c&&u==8||p<t&&bt[p]==8?d==1?1:8:256;for(let b=c;b<p;b++)bt[b]=y;c=p-1}else h==8&&d==1&&(bt[c]=1);u=h,h&7&&(d=h)}}}function e5(s,e,t,n,i){let r=i==1?2:1;for(let o=0,l=0,a=0;o<=n.length;o++){let c=o?n[o-1].to:e,u=o<n.length?n[o].from:t;for(let d=c,h,p,y;d<u;d++)if(p=ld[h=s.charCodeAt(d)])if(p<0){for(let b=l-3;b>=0;b-=3)if(un[b+1]==-p){let x=un[b+2],g=x&2?i:x&4?x&1?r:i:0;g&&(bt[d]=bt[un[b]]=g),l=b;break}}else{if(un.length==189)break;un[l++]=d,un[l++]=h,un[l++]=a}else if((y=bt[d])==2||y==1){let b=y==i;a=b?0:1;for(let x=l-3;x>=0;x-=3){let g=un[x+2];if(g&2)break;if(b)un[x+2]|=2;else{if(g&4)break;un[x+2]|=4}}}}}function t5(s,e,t,n){for(let i=0,r=n;i<=t.length;i++){let o=i?t[i-1].to:s,l=i<t.length?t[i].from:e;for(let a=o;a<l;){let c=bt[a];if(c==256){let u=a+1;for(;;)if(u==l){if(i==t.length)break;u=t[i++].to,l=i<t.length?t[i].from:e}else if(bt[u]==256)u++;else break;let d=r==1,h=(u<e?bt[u]:n)==1,p=d==h?d?1:2:n;for(let y=u,b=i,x=b?t[b-1].to:s;y>a;)y==x&&(y=t[--b].from,x=b?t[b-1].to:s),bt[--y]=p;a=u}else r=c,a++}}}function ad(s,e,t,n,i,r,o){let l=n%2?2:1;if(n%2==i%2)for(let a=e,c=0;a<t;){let u=!0,d=!1;if(c==r.length||a<r[c].from){let b=bt[a];b!=l&&(u=!1,d=b==16)}let h=!u&&l==1?[]:null,p=u?n:n+1,y=a;e:for(;;)if(c<r.length&&y==r[c].from){if(d)break e;let b=r[c];if(!u)for(let x=b.to,g=c+1;;){if(x==t)break e;if(g<r.length&&r[g].from==x)x=r[g++].to;else{if(bt[x]==l)break e;break}}if(c++,h)h.push(b);else{b.from>a&&o.push(new ni(a,b.from,p));let x=b.direction==Hi!=!(p%2);ud(s,x?n+1:n,i,b.inner,b.from,b.to,o),a=b.to}y=b.to}else{if(y==t||(u?bt[y]!=l:bt[y]==l))break;y++}h?ad(s,a,y,n+1,i,h,o):a<y&&o.push(new ni(a,y,p)),a=y}else for(let a=t,c=r.length;a>e;){let u=!0,d=!1;if(!c||a>r[c-1].to){let b=bt[a-1];b!=l&&(u=!1,d=b==16)}let h=!u&&l==1?[]:null,p=u?n:n+1,y=a;e:for(;;)if(c&&y==r[c-1].to){if(d)break e;let b=r[--c];if(!u)for(let x=b.from,g=c;;){if(x==e)break e;if(g&&r[g-1].to==x)x=r[--g].from;else{if(bt[x-1]==l)break e;break}}if(h)h.push(b);else{b.to<a&&o.push(new ni(b.to,a,p));let x=b.direction==Hi!=!(p%2);ud(s,x?n+1:n,i,b.inner,b.from,b.to,o),a=b.from}y=b.from}else{if(y==e||(u?bt[y-1]!=l:bt[y-1]==l))break;y--}h?ad(s,y,a,n+1,i,h,o):y<a&&o.push(new ni(y,a,p)),a=y}}function ud(s,e,t,n,i,r,o){let l=e%2?2:1;Z_(s,i,r,n,l),e5(s,i,r,n,l),t5(i,r,n,l),ad(s,i,r,e,t,n,o)}function s5(s,e,t){if(!s)return[new ni(0,0,e==cf?1:0)];if(e==Hi&&!t.length&&!X_.test(s))return _v(s.length);if(t.length)for(;s.length>bt.length;)bt[bt.length]=256;let n=[],i=e==Hi?0:1;return ud(s,i,i,t,0,s.length,n),n}function _v(s){return[new ni(0,s,0)]}let Av="";function n5(s,e,t,n,i){var r;let o=n.head-s.from,l=ni.find(e,o,(r=n.bidiLevel)!==null&&r!==void 0?r:-1,n.assoc),a=e[l],c=a.side(i,t);if(o==c){let h=l+=i?1:-1;if(h<0||h>=e.length)return null;a=e[l=h],o=a.side(!i,t),c=a.side(i,t)}let u=Qt(s.text,o,a.forward(i,t));(u<a.from||u>a.to)&&(u=c),Av=s.text.slice(Math.min(o,u),Math.max(o,u));let d=l==(i?e.length-1:0)?null:e[l+(i?1:-1)];return d&&u==c&&d.level+(i?0:1)<a.level?fe.cursor(d.side(!i,t)+s.from,d.forward(i,t)?1:-1,d.level):fe.cursor(u+s.from,a.forward(i,t)?-1:1,a.level)}function i5(s,e,t){for(let n=e;n<t;n++){let i=Sv(s.charCodeAt(n));if(i==1)return Hi;if(i==2||i==4)return cf}return Hi}const Mv=je.define(),Dv=je.define(),Ev=je.define(),Tv=je.define(),cd=je.define(),jv=je.define(),Ov=je.define(),df=je.define(),ff=je.define(),Pv=je.define({combine:s=>s.some(e=>e)}),$v=je.define({combine:s=>s.some(e=>e)}),Rv=je.define();class xr{constructor(e,t="nearest",n="nearest",i=5,r=5,o=!1){this.range=e,this.y=t,this.x=n,this.yMargin=i,this.xMargin=r,this.isSnapshot=o}map(e){return e.empty?this:new xr(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new xr(fe.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Rl=Qe.define({map:(s,e)=>s.map(e)}),Lv=Qe.define();function _s(s,e,t){let n=s.facet(Tv);n.length?n[0](e):window.onerror&&window.onerror(String(e),t,void 0,void 0,e)||(t?console.error(t+":",e):console.error(e))}const $n=je.define({combine:s=>s.length?s[0]:!0});let r5=0;const or=je.define({combine(s){return s.filter((e,t)=>{for(let n=0;n<t;n++)if(s[n].plugin==e.plugin)return!1;return!0})}});class Vt{constructor(e,t,n,i,r){this.id=e,this.create=t,this.domEventHandlers=n,this.domEventObservers=i,this.baseExtensions=r(this),this.extension=this.baseExtensions.concat(or.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(or.of({plugin:this,arg:e}))}static define(e,t){const{eventHandlers:n,eventObservers:i,provide:r,decorations:o}=t||{};return new Vt(r5++,e,n,i,l=>{let a=[];return o&&a.push(zo.of(c=>{let u=c.plugin(l);return u?o(u):Fe.none})),r&&a.push(r(l)),a})}static fromClass(e,t){return Vt.define((n,i)=>new e(n,i),t)}}class Gu{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(n){if(_s(t.state,n,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(t){_s(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(n){_s(e.state,n,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const Vv=je.define(),hf=je.define(),zo=je.define(),Bv=je.define(),al=je.define(),Iv=je.define();function Ip(s,e){let t=s.state.facet(Iv);if(!t.length)return t;let n=t.map(r=>r instanceof Function?r(s):r),i=[];return it.spans(n,e.from,e.to,{point(){},span(r,o,l,a){let c=r-e.from,u=o-e.from,d=i;for(let h=l.length-1;h>=0;h--,a--){let p=l[h].spec.bidiIsolate,y;if(p==null&&(p=i5(e.text,c,u)),a>0&&d.length&&(y=d[d.length-1]).to==c&&y.direction==p)y.to=u,d=y.inner;else{let b={from:c,to:u,direction:p,inner:[]};d.push(b),d=b.inner}}}}),i}const Nv=je.define();function pf(s){let e=0,t=0,n=0,i=0;for(let r of s.state.facet(Nv)){let o=r(s);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(t=Math.max(t,o.right)),o.top!=null&&(n=Math.max(n,o.top)),o.bottom!=null&&(i=Math.max(i,o.bottom)))}return{left:e,right:t,top:n,bottom:i}}const lo=je.define();class Hs{constructor(e,t,n,i){this.fromA=e,this.toA=t,this.fromB=n,this.toB=i}join(e){return new Hs(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,n=this;for(;t>0;t--){let i=e[t-1];if(!(i.fromA>n.toA)){if(i.toA<n.fromA)break;n=n.join(i),e.splice(t-1,1)}}return e.splice(t,0,n),e}static extendWithRanges(e,t){if(t.length==0)return e;let n=[];for(let i=0,r=0,o=0,l=0;;i++){let a=i==e.length?null:e[i],c=o-l,u=a?a.fromB:1e9;for(;r<t.length&&t[r]<u;){let d=t[r],h=t[r+1],p=Math.max(l,d),y=Math.min(u,h);if(p<=y&&new Hs(p+c,y+c,p,y).addToSet(n),h>u)break;r+=2}if(!a)return n;new Hs(a.fromA,a.toA,a.fromB,a.toB).addToSet(n),o=a.toA,l=a.toB}}}class Ea{constructor(e,t,n){this.view=e,this.state=t,this.transactions=n,this.flags=0,this.startState=e.state,this.changes=Nt.empty(this.startState.doc.length);for(let r of n)this.changes=this.changes.compose(r.changes);let i=[];this.changes.iterChangedRanges((r,o,l,a)=>i.push(new Hs(r,o,l,a))),this.changedRanges=i}static create(e,t,n){return new Ea(e,t,n)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class Np extends ht{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Fe.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Lt],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Hs(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let n=e.changedRanges;this.minWidth>0&&n.length&&(n.every(({fromA:c,toA:u})=>u<this.minWidthFrom||c>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?i=this.domChanged.newSel.head:!f5(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let r=i>-1?l5(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:c,to:u}=this.hasComposition;n=new Hs(c,u,e.changes.mapPos(c,-1),e.changes.mapPos(u,1)).addToSet(n.slice())}this.hasComposition=r?{from:r.range.fromB,to:r.range.toB}:null,(Me.ie||Me.chrome)&&!r&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,l=this.updateDeco(),a=c5(o,l,e.changes);return n=Hs.extendWithRanges(n,a),!(this.flags&7)&&n.length==0?!1:(this.updateInner(n,e.startState.doc.length,r),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,n){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,n);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=Me.chrome||Me.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||i.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof Ln&&o.widget instanceof od&&r.push(o.dom);i.updateGaps(r)}updateChildren(e,t,n){let i=n?n.range.addToSet(e.slice()):e,r=this.childCursor(t);for(let o=i.length-1;;o--){let l=o>=0?i[o]:null;if(!l)break;let{fromA:a,toA:c,fromB:u,toB:d}=l,h,p,y,b;if(n&&n.range.fromB<d&&n.range.toB>u){let U=Co.build(this.view.state.doc,u,n.range.fromB,this.decorations,this.dynamicDecorationMap),I=Co.build(this.view.state.doc,n.range.toB,d,this.decorations,this.dynamicDecorationMap);p=U.breakAtStart,y=U.openStart,b=I.openEnd;let L=this.compositionView(n);I.breakAtStart?L.breakAfter=1:I.content.length&&L.merge(L.length,L.length,I.content[0],!1,I.openStart,0)&&(L.breakAfter=I.content[0].breakAfter,I.content.shift()),U.content.length&&L.merge(0,0,U.content[U.content.length-1],!0,0,U.openEnd)&&U.content.pop(),h=U.content.concat(L).concat(I.content)}else({content:h,breakAtStart:p,openStart:y,openEnd:b}=Co.build(this.view.state.doc,u,d,this.decorations,this.dynamicDecorationMap));let{i:x,off:g}=r.findPos(c,1),{i:j,off:B}=r.findPos(a,-1);mv(this,j,B,x,g,h,p,y,b)}n&&this.fixCompositionDOM(n)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let n of t.effects)n.is(Lv)&&(this.editContextFormatting=n.value)}compositionView(e){let t=new tn(e.text.nodeValue);t.flags|=8;for(let{deco:i}of e.marks)t=new Nn(i,[t],t.length);let n=new Lt;return n.append(t,0),n}fixCompositionDOM(e){let t=(r,o)=>{o.flags|=8|(o.children.some(a=>a.flags&7)?1:0),this.markedForComposition.add(o);let l=ht.get(r);l&&l!=o&&(l.dom=null),o.setDOM(r)},n=this.childPos(e.range.fromB,1),i=this.children[n.i];t(e.line,i);for(let r=e.marks.length-1;r>=-1;r--)n=i.childPos(n.off,1),i=i.children[n.i],t(r>=0?e.marks[r].node:e.text,i)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let n=this.view.root.activeElement,i=n==this.dom,r=!i&&!(this.view.state.facet($n)||this.dom.tabIndex>-1)&&la(this.dom,this.view.observer.selectionRange)&&!(n&&this.dom.contains(n));if(!(i||t||r))return;let o=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(l.anchor)),c=l.empty?a:this.moveToLine(this.domAtPos(l.head));if(Me.gecko&&l.empty&&!this.hasComposition&&o5(a)){let d=document.createTextNode("");this.view.observer.ignore(()=>a.node.insertBefore(d,a.node.childNodes[a.offset]||null)),a=c=new os(d,0),o=!0}let u=this.view.observer.selectionRange;(o||!u.focusNode||(!So(a.node,a.offset,u.anchorNode,u.anchorOffset)||!So(c.node,c.offset,u.focusNode,u.focusOffset))&&!this.suppressWidgetCursorChange(u,l))&&(this.view.observer.ignore(()=>{Me.android&&Me.chrome&&this.dom.contains(u.focusNode)&&d5(u.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let d=No(this.view.root);if(d)if(l.empty){if(Me.gecko){let h=a5(a.node,a.offset);if(h&&h!=3){let p=(h==1?hv:pv)(a.node,a.offset);p&&(a=new os(p.node,p.offset))}}d.collapse(a.node,a.offset),l.bidiLevel!=null&&d.caretBidiLevel!==void 0&&(d.caretBidiLevel=l.bidiLevel)}else if(d.extend){d.collapse(a.node,a.offset);try{d.extend(c.node,c.offset)}catch{}}else{let h=document.createRange();l.anchor>l.head&&([a,c]=[c,a]),h.setEnd(c.node,c.offset),h.setStart(a.node,a.offset),d.removeAllRanges(),d.addRange(h)}r&&this.view.root.activeElement==this.dom&&(this.dom.blur(),n&&n.focus())}),this.view.observer.setSelectionRange(a,c)),this.impreciseAnchor=a.precise?null:new os(u.anchorNode,u.anchorOffset),this.impreciseHead=c.precise?null:new os(u.focusNode,u.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&So(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,n=No(e.root),{anchorNode:i,anchorOffset:r}=e.observer.selectionRange;if(!n||!t.empty||!t.assoc||!n.modify)return;let o=Lt.find(this,t.head);if(!o)return;let l=o.posAtStart;if(t.head==l||t.head==l+o.length)return;let a=this.coordsAt(t.head,-1),c=this.coordsAt(t.head,1);if(!a||!c||a.bottom>c.top)return;let u=this.domAtPos(t.head+t.assoc);n.collapse(u.node,u.offset),n.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let d=e.observer.selectionRange;e.docView.posFromDOM(d.anchorNode,d.anchorOffset)!=t.from&&n.collapse(i,r)}moveToLine(e){let t=this.dom,n;if(e.node!=t)return e;for(let i=e.offset;!n&&i<t.childNodes.length;i++){let r=ht.get(t.childNodes[i]);r instanceof Lt&&(n=r.domAtPos(0))}for(let i=e.offset-1;!n&&i>=0;i--){let r=ht.get(t.childNodes[i]);r instanceof Lt&&(n=r.domAtPos(r.length))}return n?new os(n.node,n.offset,!0):e}nearest(e){for(let t=e;t;){let n=ht.get(t);if(n&&n.rootView==this)return n;t=t.parentNode}return null}posFromDOM(e,t){let n=this.nearest(e);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(e,t)+n.posAtStart}domAtPos(e){let{i:t,off:n}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let i=this.children[t];if(n<i.length||i instanceof Lt)break;t++,n=0}return this.children[t].domAtPos(n)}coordsAt(e,t){let n=null,i=0;for(let r=this.length,o=this.children.length-1;o>=0;o--){let l=this.children[o],a=r-l.breakAfter,c=a-l.length;if(a<e)break;if(c<=e&&(c<e||l.covers(-1))&&(a>e||l.covers(1))&&(!n||l instanceof Lt&&!(n instanceof Lt&&t>=0)))n=l,i=c;else if(n&&c==e&&a==e&&l instanceof Ln&&Math.abs(t)<2){if(l.deco.startSide<0)break;o&&(n=null)}r=c}return n?n.coordsAt(e-i,t):null}coordsForChar(e){let{i:t,off:n}=this.childPos(e,1),i=this.children[t];if(!(i instanceof Lt))return null;for(;i.children.length;){let{i:l,off:a}=i.childPos(n,1);for(;;l++){if(l==i.children.length)return null;if((i=i.children[l]).length)break}n=a}if(!(i instanceof tn))return null;let r=Qt(i.text,n);if(r==n)return null;let o=Ui(i.dom,n,r).getClientRects();for(let l=0;l<o.length;l++){let a=o[l];if(l==o.length-1||a.top<a.bottom&&a.left<a.right)return a}return null}measureVisibleLineHeights(e){let t=[],{from:n,to:i}=e,r=this.view.contentDOM.clientWidth,o=r>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,a=this.view.textDirection==Ct.LTR;for(let c=0,u=0;u<this.children.length;u++){let d=this.children[u],h=c+d.length;if(h>i)break;if(c>=n){let p=d.dom.getBoundingClientRect();if(t.push(p.height),o){let y=d.dom.lastChild,b=y?Fo(y):[];if(b.length){let x=b[b.length-1],g=a?x.right-p.left:p.right-x.left;g>l&&(l=g,this.minWidth=r,this.minWidthFrom=c,this.minWidthTo=h)}}}c=h+d.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?Ct.RTL:Ct.LTR}measureTextSize(){for(let r of this.children)if(r instanceof Lt){let o=r.measureTextSize();if(o)return o}let e=document.createElement("div"),t,n,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let r=Fo(e.firstChild)[0];t=e.getBoundingClientRect().height,n=r?r.width/27:7,i=r?r.height:t,e.remove()}),{lineHeight:t,charWidth:n,textHeight:i}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new gv(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let n=0,i=0;;i++){let r=i==t.viewports.length?null:t.viewports[i],o=r?r.from-1:this.length;if(o>n){let l=(t.lineBlockAt(o).bottom-t.lineBlockAt(n).top)/this.view.scaleY;e.push(Fe.replace({widget:new od(l),block:!0,inclusive:!0,isBlockGap:!0}).range(n,o))}if(!r)break;n=r.to+1}return Fe.set(e)}updateDeco(){let e=1,t=this.view.state.facet(zo).map(r=>(this.dynamicDecorationMap[e++]=typeof r=="function")?r(this.view):r),n=!1,i=this.view.state.facet(Bv).map((r,o)=>{let l=typeof r=="function";return l&&(n=!0),l?r(this.view):r});for(i.length&&(this.dynamicDecorationMap[e++]=n,t.push(it.join(i))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let c=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=c.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let c of this.view.state.facet(Rv))try{if(c(this.view,e.range,e))return!0}catch(u){_s(this.view.state,u,"scroll handler")}let{range:t}=e,n=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),i;if(!n)return;!t.empty&&(i=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(n={left:Math.min(n.left,i.left),top:Math.min(n.top,i.top),right:Math.max(n.right,i.right),bottom:Math.max(n.bottom,i.bottom)});let r=pf(this.view),o={left:n.left-r.left,top:n.top-r.top,right:n.right+r.right,bottom:n.bottom+r.bottom},{offsetWidth:l,offsetHeight:a}=this.view.scrollDOM;I_(this.view.scrollDOM,o,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,l),-l),Math.max(Math.min(e.yMargin,a),-a),this.view.textDirection==Ct.LTR)}}function o5(s){return s.node.nodeType==1&&s.node.firstChild&&(s.offset==0||s.node.childNodes[s.offset-1].contentEditable=="false")&&(s.offset==s.node.childNodes.length||s.node.childNodes[s.offset].contentEditable=="false")}function Fv(s,e){let t=s.observer.selectionRange;if(!t.focusNode)return null;let n=hv(t.focusNode,t.focusOffset),i=pv(t.focusNode,t.focusOffset),r=n||i;if(i&&n&&i.node!=n.node){let l=ht.get(i.node);if(!l||l instanceof tn&&l.text!=i.node.nodeValue)r=i;else if(s.docView.lastCompositionAfterCursor){let a=ht.get(n.node);!a||a instanceof tn&&a.text!=n.node.nodeValue||(r=i)}}if(s.docView.lastCompositionAfterCursor=r!=n,!r)return null;let o=e-r.offset;return{from:o,to:o+r.node.nodeValue.length,node:r.node}}function l5(s,e,t){let n=Fv(s,t);if(!n)return null;let{node:i,from:r,to:o}=n,l=i.nodeValue;if(/[\n\r]/.test(l)||s.state.doc.sliceString(n.from,n.to)!=l)return null;let a=e.invertedDesc,c=new Hs(a.mapPos(r),a.mapPos(o),r,o),u=[];for(let d=i.parentNode;;d=d.parentNode){let h=ht.get(d);if(h instanceof Nn)u.push({node:d,deco:h.mark});else{if(h instanceof Lt||d.nodeName=="DIV"&&d.parentNode==s.contentDOM)return{range:c,text:i,marks:u,line:d};if(d!=s.contentDOM)u.push({node:d,deco:new ol({inclusive:!0,attributes:G_(d),tagName:d.tagName.toLowerCase()})});else return null}}}function a5(s,e){return s.nodeType!=1?0:(e&&s.childNodes[e-1].contentEditable=="false"?1:0)|(e<s.childNodes.length&&s.childNodes[e].contentEditable=="false"?2:0)}let u5=class{constructor(){this.changes=[]}compareRange(e,t){aa(e,t,this.changes)}comparePoint(e,t){aa(e,t,this.changes)}boundChange(e){aa(e,e,this.changes)}};function c5(s,e,t){let n=new u5;return it.compare(s,e,t,n),n.changes}function d5(s,e){for(let t=s;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function f5(s,e){let t=!1;return e&&s.iterChangedRanges((n,i)=>{n<e.to&&i>e.from&&(t=!0)}),t}function h5(s,e,t=1){let n=s.charCategorizer(e),i=s.doc.lineAt(e),r=e-i.from;if(i.length==0)return fe.cursor(e);r==0?t=1:r==i.length&&(t=-1);let o=r,l=r;t<0?o=Qt(i.text,r,!1):l=Qt(i.text,r);let a=n(i.text.slice(o,l));for(;o>0;){let c=Qt(i.text,o,!1);if(n(i.text.slice(c,o))!=a)break;o=c}for(;l<i.length;){let c=Qt(i.text,l);if(n(i.text.slice(l,c))!=a)break;l=c}return fe.range(o+i.from,l+i.from)}function p5(s,e){return e.left>s?e.left-s:Math.max(0,s-e.right)}function g5(s,e){return e.top>s?e.top-s:Math.max(0,s-e.bottom)}function Ju(s,e){return s.top<e.bottom-1&&s.bottom>e.top+1}function Fp(s,e){return e<s.top?{top:e,left:s.left,right:s.right,bottom:s.bottom}:s}function zp(s,e){return e>s.bottom?{top:s.top,left:s.left,right:s.right,bottom:e}:s}function dd(s,e,t){let n,i,r,o,l=!1,a,c,u,d;for(let y=s.firstChild;y;y=y.nextSibling){let b=Fo(y);for(let x=0;x<b.length;x++){let g=b[x];i&&Ju(i,g)&&(g=Fp(zp(g,i.bottom),i.top));let j=p5(e,g),B=g5(t,g);if(j==0&&B==0)return y.nodeType==3?Up(y,e,t):dd(y,e,t);(!n||o>B||o==B&&r>j)&&(n=y,i=g,r=j,o=B,l=j?e<g.left?x>0:x<b.length-1:!0),j==0?t>g.bottom&&(!u||u.bottom<g.bottom)?(a=y,u=g):t<g.top&&(!d||d.top>g.top)&&(c=y,d=g):u&&Ju(u,g)?u=zp(u,g.bottom):d&&Ju(d,g)&&(d=Fp(d,g.top))}}if(u&&u.bottom>=t?(n=a,i=u):d&&d.top<=t&&(n=c,i=d),!n)return{node:s,offset:0};let h=Math.max(i.left,Math.min(i.right,e));if(n.nodeType==3)return Up(n,h,t);if(l&&n.contentEditable!="false")return dd(n,h,t);let p=Array.prototype.indexOf.call(s.childNodes,n)+(e>=(i.left+i.right)/2?1:0);return{node:s,offset:p}}function Up(s,e,t){let n=s.nodeValue.length,i=-1,r=1e9,o=0;for(let l=0;l<n;l++){let a=Ui(s,l,l+1).getClientRects();for(let c=0;c<a.length;c++){let u=a[c];if(u.top==u.bottom)continue;o||(o=e-u.left);let d=(u.top>t?u.top-t:t-u.bottom)-1;if(u.left-1<=e&&u.right+1>=e&&d<r){let h=e>=(u.left+u.right)/2,p=h;if((Me.chrome||Me.gecko)&&Ui(s,l).getBoundingClientRect().left==u.right&&(p=!h),d<=0)return{node:s,offset:l+(p?1:0)};i=l+(p?1:0),r=d}}}return{node:s,offset:i>-1?i:o>0?s.nodeValue.length:0}}function zv(s,e,t,n=-1){var i,r;let o=s.contentDOM.getBoundingClientRect(),l=o.top+s.viewState.paddingTop,a,{docHeight:c}=s.viewState,{x:u,y:d}=e,h=d-l;if(h<0)return 0;if(h>c)return s.state.doc.length;for(let U=s.viewState.heightOracle.textHeight/2,I=!1;a=s.elementAtHeight(h),a.type!=ys.Text;)for(;h=n>0?a.bottom+U:a.top-U,!(h>=0&&h<=c);){if(I)return t?null:0;I=!0,n=-n}d=l+h;let p=a.from;if(p<s.viewport.from)return s.viewport.from==0?0:t?null:Hp(s,o,a,u,d);if(p>s.viewport.to)return s.viewport.to==s.state.doc.length?s.state.doc.length:t?null:Hp(s,o,a,u,d);let y=s.dom.ownerDocument,b=s.root.elementFromPoint?s.root:y,x=b.elementFromPoint(u,d);x&&!s.contentDOM.contains(x)&&(x=null),x||(u=Math.max(o.left+1,Math.min(o.right-1,u)),x=b.elementFromPoint(u,d),x&&!s.contentDOM.contains(x)&&(x=null));let g,j=-1;if(x&&((i=s.docView.nearest(x))===null||i===void 0?void 0:i.isEditable)!=!1){if(y.caretPositionFromPoint){let U=y.caretPositionFromPoint(u,d);U&&({offsetNode:g,offset:j}=U)}else if(y.caretRangeFromPoint){let U=y.caretRangeFromPoint(u,d);U&&({startContainer:g,startOffset:j}=U)}g&&(!s.contentDOM.contains(g)||Me.safari&&m5(g,j,u)||Me.chrome&&v5(g,j,u))&&(g=void 0),g&&(j=Math.min(wn(g),j))}if(!g||!s.docView.dom.contains(g)){let U=Lt.find(s.docView,p);if(!U)return h>a.top+a.height/2?a.to:a.from;({node:g,offset:j}=dd(U.dom,u,d))}let B=s.docView.nearest(g);if(!B)return null;if(B.isWidget&&((r=B.dom)===null||r===void 0?void 0:r.nodeType)==1){let U=B.dom.getBoundingClientRect();return e.y<U.top||e.y<=U.bottom&&e.x<=(U.left+U.right)/2?B.posAtStart:B.posAtEnd}else return B.localPosFromDOM(g,j)+B.posAtStart}function Hp(s,e,t,n,i){let r=Math.round((n-e.left)*s.defaultCharacterWidth);if(s.lineWrapping&&t.height>s.defaultLineHeight*1.5){let l=s.viewState.heightOracle.textHeight,a=Math.floor((i-t.top-(s.defaultLineHeight-l)*.5)/l);r+=a*s.viewState.heightOracle.lineLength}let o=s.state.sliceDoc(t.from,t.to);return t.from+Qc(o,r,s.state.tabSize)}function Uv(s,e,t){let n,i=s;if(s.nodeType!=3||e!=(n=s.nodeValue.length))return!1;for(;;){let r=i.nextSibling;if(r){if(r.nodeName=="BR")break;return!1}else{let o=i.parentNode;if(!o||o.nodeName=="DIV")break;i=o}}return Ui(s,n-1,n).getBoundingClientRect().right>t}function m5(s,e,t){return Uv(s,e,t)}function v5(s,e,t){if(e!=0)return Uv(s,e,t);for(let i=s;;){let r=i.parentNode;if(!r||r.nodeType!=1||r.firstChild!=i)return!1;if(r.classList.contains("cm-line"))break;i=r}let n=s.nodeType==1?s.getBoundingClientRect():Ui(s,0,Math.max(s.nodeValue.length,1)).getBoundingClientRect();return t-n.left>5}function fd(s,e,t){let n=s.lineBlockAt(e);if(Array.isArray(n.type)){let i;for(let r of n.type){if(r.from>e)break;if(!(r.to<e)){if(r.from<e&&r.to>e)return r;(!i||r.type==ys.Text&&(i.type!=r.type||(t<0?r.from<e:r.to>e)))&&(i=r)}}return i||n}return n}function y5(s,e,t,n){let i=fd(s,e.head,e.assoc||-1),r=!n||i.type!=ys.Text||!(s.lineWrapping||i.widgetLineBreaks)?null:s.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(r){let o=s.dom.getBoundingClientRect(),l=s.textDirectionAt(i.from),a=s.posAtCoords({x:t==(l==Ct.LTR)?o.right-1:o.left+1,y:(r.top+r.bottom)/2});if(a!=null)return fe.cursor(a,t?-1:1)}return fe.cursor(t?i.to:i.from,t?-1:1)}function qp(s,e,t,n){let i=s.state.doc.lineAt(e.head),r=s.bidiSpans(i),o=s.textDirectionAt(i.from);for(let l=e,a=null;;){let c=n5(i,r,o,l,t),u=Av;if(!c){if(i.number==(t?s.state.doc.lines:1))return l;u=`
`,i=s.state.doc.line(i.number+(t?1:-1)),r=s.bidiSpans(i),c=s.visualLineSide(i,!t)}if(a){if(!a(u))return l}else{if(!n)return c;a=n(u)}l=c}}function b5(s,e,t){let n=s.state.charCategorizer(e),i=n(t);return r=>{let o=n(r);return i==At.Space&&(i=o),i==o}}function k5(s,e,t,n){let i=e.head,r=t?1:-1;if(i==(t?s.state.doc.length:0))return fe.cursor(i,e.assoc);let o=e.goalColumn,l,a=s.contentDOM.getBoundingClientRect(),c=s.coordsAtPos(i,e.assoc||-1),u=s.documentTop;if(c)o==null&&(o=c.left-a.left),l=r<0?c.top:c.bottom;else{let p=s.viewState.lineBlockAt(i);o==null&&(o=Math.min(a.right-a.left,s.defaultCharacterWidth*(i-p.from))),l=(r<0?p.top:p.bottom)+u}let d=a.left+o,h=n??s.viewState.heightOracle.textHeight>>1;for(let p=0;;p+=10){let y=l+(h+p)*r,b=zv(s,{x:d,y},!1,r);if(y<a.top||y>a.bottom||(r<0?b<i:b>i)){let x=s.docView.coordsForChar(b),g=!x||y<x.top?-1:1;return fe.cursor(b,g,void 0,o)}}}function _o(s,e,t){for(;;){let n=0;for(let i of s)i.between(e-1,e+1,(r,o,l)=>{if(e>r&&e<o){let a=n||t||(e-r<o-e?-1:1);e=a<0?r:o,n=a}});if(!n)return e}}function Hv(s,e){let t=null;for(let n=0;n<e.ranges.length;n++){let i=e.ranges[n],r=null;if(i.empty){let o=_o(s,i.from,0);o!=i.from&&(r=fe.cursor(o,-1))}else{let o=_o(s,i.from,-1),l=_o(s,i.to,1);(o!=i.from||l!=i.to)&&(r=fe.range(i.from==i.anchor?o:l,i.from==i.head?o:l))}r&&(t||(t=e.ranges.slice()),t[n]=r)}return t?fe.create(t,e.mainIndex):e}function Qu(s,e,t){let n=_o(s.state.facet(al).map(i=>i(s)),t.from,e.head>t.from?-1:1);return n==t.from?t:fe.cursor(n,n<t.from?1:-1)}const ao="";class x5{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(nt.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=ao}readRange(e,t){if(!e)return this;let n=e.parentNode;for(let i=e;;){this.findPointBefore(n,i);let r=this.text.length;this.readNode(i);let o=i.nextSibling;if(o==t)break;let l=ht.get(i),a=ht.get(o);(l&&a?l.breakAfter:(l?l.breakAfter:Ma(i))||Ma(o)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>r)&&!S5(o,t)&&this.lineBreak(),i=o}return this.findPointBefore(n,t),this}readTextNode(e){let t=e.nodeValue;for(let n of this.points)n.node==e&&(n.pos=this.text.length+Math.min(n.offset,t.length));for(let n=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let r=-1,o=1,l;if(this.lineSeparator?(r=t.indexOf(this.lineSeparator,n),o=this.lineSeparator.length):(l=i.exec(t))&&(r=l.index,o=l[0].length),this.append(t.slice(n,r<0?t.length:r)),r<0)break;if(this.lineBreak(),o>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=o-1);n=r+o}}readNode(e){if(e.cmIgnore)return;let t=ht.get(e),n=t&&t.overrideDOMText;if(n!=null){this.findPointInside(e,n.length);for(let i=n.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let n of this.points)n.node==e&&e.childNodes[n.offset]==t&&(n.pos=this.text.length)}findPointInside(e,t){for(let n of this.points)(e.nodeType==3?n.node==e:e.contains(n.node))&&(n.pos=this.text.length+(w5(e,n.node,n.offset)?t:0))}}function w5(s,e,t){for(;;){if(!e||t<wn(e))return!1;if(e==s)return!0;t=zi(e)+1,e=e.parentNode}}function S5(s,e){let t;for(;!(s==e||!s);s=s.nextSibling){let n=ht.get(s);if(!(n?.isWidget||s.cmIgnore))return!1;n&&(t||(t=[])).push(n)}if(t)for(let n of t){let i=n.overrideDOMText;if(i?.length)return!1}return!0}class Wp{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class C5{constructor(e,t,n,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:r,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,n,0))){let l=r||o?[]:A5(e),a=new x5(l,e.state);a.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=a.text,this.newSel=M5(l,this.bounds.from)}else{let l=e.observer.selectionRange,a=r&&r.node==l.focusNode&&r.offset==l.focusOffset||!nd(e.contentDOM,l.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(l.focusNode,l.focusOffset),c=o&&o.node==l.anchorNode&&o.offset==l.anchorOffset||!nd(e.contentDOM,l.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(l.anchorNode,l.anchorOffset),u=e.viewport;if((Me.ios||Me.chrome)&&e.state.selection.main.empty&&a!=c&&(u.from>0||u.to<e.state.doc.length)){let d=Math.min(a,c),h=Math.max(a,c),p=u.from-d,y=u.to-h;(p==0||p==1||d==0)&&(y==0||y==-1||h==e.state.doc.length)&&(a=0,c=e.state.doc.length)}this.newSel=fe.single(c,a)}}}function qv(s,e){let t,{newSel:n}=e,i=s.state.selection.main,r=s.inputState.lastKeyTime>Date.now()-100?s.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:l}=e.bounds,a=i.from,c=null;(r===8||Me.android&&e.text.length<l-o)&&(a=i.to,c="end");let u=Wv(s.state.doc.sliceString(o,l,ao),e.text,a-o,c);u&&(Me.chrome&&r==13&&u.toB==u.from+2&&e.text.slice(u.from,u.toB)==ao+ao&&u.toB--,t={from:o+u.from,to:o+u.toA,insert:rt.of(e.text.slice(u.from,u.toB).split(ao))})}else n&&(!s.hasFocus&&s.state.facet($n)||n.main.eq(i))&&(n=null);if(!t&&!n)return!1;if(!t&&e.typeOver&&!i.empty&&n&&n.main.empty?t={from:i.from,to:i.to,insert:s.state.doc.slice(i.from,i.to)}:(Me.mac||Me.android)&&t&&t.from==t.to&&t.from==i.head-1&&/^\. ?$/.test(t.insert.toString())&&s.contentDOM.getAttribute("autocorrect")=="off"?(n&&t.insert.length==2&&(n=fe.single(n.main.anchor-1,n.main.head-1)),t={from:t.from,to:t.to,insert:rt.of([t.insert.toString().replace("."," ")])}):t&&t.from>=i.from&&t.to<=i.to&&(t.from!=i.from||t.to!=i.to)&&i.to-i.from-(t.to-t.from)<=4?t={from:i.from,to:i.to,insert:s.state.doc.slice(i.from,t.from).append(t.insert).append(s.state.doc.slice(t.to,i.to))}:Me.chrome&&t&&t.from==t.to&&t.from==i.head&&t.insert.toString()==`
 `&&s.lineWrapping&&(n&&(n=fe.single(n.main.anchor-1,n.main.head-1)),t={from:i.from,to:i.to,insert:rt.of([" "])}),t)return gf(s,t,n,r);if(n&&!n.main.eq(i)){let o=!1,l="select";return s.inputState.lastSelectionTime>Date.now()-50&&(s.inputState.lastSelectionOrigin=="select"&&(o=!0),l=s.inputState.lastSelectionOrigin,l=="select.pointer"&&(n=Hv(s.state.facet(al).map(a=>a(s)),n))),s.dispatch({selection:n,scrollIntoView:o,userEvent:l}),!0}else return!1}function gf(s,e,t,n=-1){if(Me.ios&&s.inputState.flushIOSKey(e))return!0;let i=s.state.selection.main;if(Me.android&&(e.to==i.to&&(e.from==i.from||e.from==i.from-1&&s.state.sliceDoc(e.from,i.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&kr(s.contentDOM,"Enter",13)||(e.from==i.from-1&&e.to==i.to&&e.insert.length==0||n==8&&e.insert.length<e.to-e.from&&e.to>i.head)&&kr(s.contentDOM,"Backspace",8)||e.from==i.from&&e.to==i.to+1&&e.insert.length==0&&kr(s.contentDOM,"Delete",46)))return!0;let r=e.insert.toString();s.inputState.composing>=0&&s.inputState.composing++;let o,l=()=>o||(o=_5(s,e,t));return s.state.facet(jv).some(a=>a(s,e.from,e.to,r,l))||s.dispatch(l()),!0}function _5(s,e,t){let n,i=s.state,r=i.selection.main,o=-1;if(e.from==e.to&&e.from<r.from||e.from>r.to){let a=e.from<r.from?-1:1,c=a<0?r.from:r.to,u=_o(i.facet(al).map(d=>d(s)),c,a);e.from==u&&(o=u)}if(o>-1)n={changes:e,selection:fe.cursor(e.from+e.insert.length,-1)};else if(e.from>=r.from&&e.to<=r.to&&e.to-e.from>=(r.to-r.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&s.inputState.composing<0){let a=r.from<e.from?i.sliceDoc(r.from,e.from):"",c=r.to>e.to?i.sliceDoc(e.to,r.to):"";n=i.replaceSelection(s.state.toText(a+e.insert.sliceString(0,void 0,s.state.lineBreak)+c))}else{let a=i.changes(e),c=t&&t.main.to<=a.newLength?t.main:void 0;if(i.selection.ranges.length>1&&s.inputState.composing>=0&&e.to<=r.to&&e.to>=r.to-10){let u=s.state.sliceDoc(e.from,e.to),d,h=t&&Fv(s,t.main.head);if(h){let b=e.insert.length-(e.to-e.from);d={from:h.from,to:h.to-b}}else d=s.state.doc.lineAt(r.head);let p=r.to-e.to,y=r.to-r.from;n=i.changeByRange(b=>{if(b.from==r.from&&b.to==r.to)return{changes:a,range:c||b.map(a)};let x=b.to-p,g=x-u.length;if(b.to-b.from!=y||s.state.sliceDoc(g,x)!=u||b.to>=d.from&&b.from<=d.to)return{range:b};let j=i.changes({from:g,to:x,insert:e.insert}),B=b.to-r.to;return{changes:j,range:c?fe.range(Math.max(0,c.anchor+B),Math.max(0,c.head+B)):b.map(j)}})}else n={changes:a,selection:c&&i.selection.replaceRange(c)}}let l="input.type";return(s.composing||s.inputState.compositionPendingChange&&s.inputState.compositionEndedAt>Date.now()-50)&&(s.inputState.compositionPendingChange=!1,l+=".compose",s.inputState.compositionFirstChange&&(l+=".start",s.inputState.compositionFirstChange=!1)),i.update(n,{userEvent:l,scrollIntoView:!0})}function Wv(s,e,t,n){let i=Math.min(s.length,e.length),r=0;for(;r<i&&s.charCodeAt(r)==e.charCodeAt(r);)r++;if(r==i&&s.length==e.length)return null;let o=s.length,l=e.length;for(;o>0&&l>0&&s.charCodeAt(o-1)==e.charCodeAt(l-1);)o--,l--;if(n=="end"){let a=Math.max(0,r-Math.min(o,l));t-=o+a-r}if(o<r&&s.length<e.length){let a=t<=r&&t>=o?r-t:0;r-=a,l=r+(l-o),o=r}else if(l<r){let a=t<=r&&t>=l?r-t:0;r-=a,o=r+(o-l),l=r}return{from:r,toA:o,toB:l}}function A5(s){let e=[];if(s.root.activeElement!=s.contentDOM)return e;let{anchorNode:t,anchorOffset:n,focusNode:i,focusOffset:r}=s.observer.selectionRange;return t&&(e.push(new Wp(t,n)),(i!=t||r!=n)&&e.push(new Wp(i,r))),e}function M5(s,e){if(s.length==0)return null;let t=s[0].pos,n=s.length==2?s[1].pos:t;return t>-1&&n>-1?fe.single(t+e,n+e):null}class D5{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Me.safari&&e.contentDOM.addEventListener("input",()=>null),Me.gecko&&H5(e.contentDOM.ownerDocument)}handleEvent(e){!L5(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,t){let n=this.handlers[e];if(n){for(let i of n.observers)i(this.view,t);for(let i of n.handlers){if(t.defaultPrevented)break;if(i(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=E5(e),n=this.handlers,i=this.view.contentDOM;for(let r in t)if(r!="scroll"){let o=!t[r].handlers.length,l=n[r];l&&o!=!l.handlers.length&&(i.removeEventListener(r,this.handleEvent),l=null),l||i.addEventListener(r,this.handleEvent,{passive:o})}for(let r in n)r!="scroll"&&!t[r]&&i.removeEventListener(r,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&Gv.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),Me.android&&Me.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return Me.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=Kv.find(n=>n.keyCode==e.keyCode))&&!e.ctrlKey||T5.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,kr(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return!/^key/.test(e.type)||e.synthetic?!1:this.composing>0?!0:Me.safari&&!Me.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function Kp(s,e){return(t,n)=>{try{return e.call(s,n,t)}catch(i){_s(t.state,i)}}}function E5(s){let e=Object.create(null);function t(n){return e[n]||(e[n]={observers:[],handlers:[]})}for(let n of s){let i=n.spec,r=i&&i.plugin.domEventHandlers,o=i&&i.plugin.domEventObservers;if(r)for(let l in r){let a=r[l];a&&t(l).handlers.push(Kp(n.value,a))}if(o)for(let l in o){let a=o[l];a&&t(l).observers.push(Kp(n.value,a))}}for(let n in sn)t(n).handlers.push(sn[n]);for(let n in Ks)t(n).observers.push(Ks[n]);return e}const Kv=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],T5="dthko",Gv=[16,17,18,20,91,92,224,225],Ll=6;function Vl(s){return Math.max(0,s)*.7+8}function j5(s,e){return Math.max(Math.abs(s.clientX-e.clientX),Math.abs(s.clientY-e.clientY))}class O5{constructor(e,t,n,i){this.view=e,this.startEvent=t,this.style=n,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=N_(e.contentDOM),this.atoms=e.state.facet(al).map(o=>o(e));let r=e.contentDOM.ownerDocument;r.addEventListener("mousemove",this.move=this.move.bind(this)),r.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(nt.allowMultipleSelections)&&P5(e,t),this.dragging=R5(e,t)&&Yv(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&j5(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,n=0,i=0,r=0,o=this.view.win.innerWidth,l=this.view.win.innerHeight;this.scrollParents.x&&({left:i,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:r,bottom:l}=this.scrollParents.y.getBoundingClientRect());let a=pf(this.view);e.clientX-a.left<=i+Ll?t=-Vl(i-e.clientX):e.clientX+a.right>=o-Ll&&(t=Vl(e.clientX-o)),e.clientY-a.top<=r+Ll?n=-Vl(r-e.clientY):e.clientY+a.bottom>=l-Ll&&(n=Vl(e.clientY-l)),this.setScrollSpeed(t,n)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:t}=this,n=Hv(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!n.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:n,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function P5(s,e){let t=s.state.facet(Mv);return t.length?t[0](e):Me.mac?e.metaKey:e.ctrlKey}function $5(s,e){let t=s.state.facet(Dv);return t.length?t[0](e):Me.mac?!e.altKey:!e.ctrlKey}function R5(s,e){let{main:t}=s.state.selection;if(t.empty)return!1;let n=No(s.root);if(!n||n.rangeCount==0)return!0;let i=n.getRangeAt(0).getClientRects();for(let r=0;r<i.length;r++){let o=i[r];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function L5(s,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,n;t!=s.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(n=ht.get(t))&&n.ignoreEvent(e))return!1;return!0}const sn=Object.create(null),Ks=Object.create(null),Jv=Me.ie&&Me.ie_version<15||Me.ios&&Me.webkit_version<604;function V5(s){let e=s.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{s.focus(),t.remove(),Qv(s,t.value)},50)}function fu(s,e,t){for(let n of s.facet(e))t=n(t,s);return t}function Qv(s,e){e=fu(s.state,df,e);let{state:t}=s,n,i=1,r=t.toText(e),o=r.lines==t.selection.ranges.length;if(hd!=null&&t.selection.ranges.every(a=>a.empty)&&hd==r.toString()){let a=-1;n=t.changeByRange(c=>{let u=t.doc.lineAt(c.from);if(u.from==a)return{range:c};a=u.from;let d=t.toText((o?r.line(i++).text:e)+t.lineBreak);return{changes:{from:u.from,insert:d},range:fe.cursor(c.from+d.length)}})}else o?n=t.changeByRange(a=>{let c=r.line(i++);return{changes:{from:a.from,to:a.to,insert:c.text},range:fe.cursor(a.from+c.length)}}):n=t.replaceSelection(r);s.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}Ks.scroll=s=>{s.inputState.lastScrollTop=s.scrollDOM.scrollTop,s.inputState.lastScrollLeft=s.scrollDOM.scrollLeft};sn.keydown=(s,e)=>(s.inputState.setSelectionOrigin("select"),e.keyCode==27&&s.inputState.tabFocusMode!=0&&(s.inputState.tabFocusMode=Date.now()+2e3),!1);Ks.touchstart=(s,e)=>{s.inputState.lastTouchTime=Date.now(),s.inputState.setSelectionOrigin("select.pointer")};Ks.touchmove=s=>{s.inputState.setSelectionOrigin("select.pointer")};sn.mousedown=(s,e)=>{if(s.observer.flush(),s.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let n of s.state.facet(Ev))if(t=n(s,e),t)break;if(!t&&e.button==0&&(t=N5(s,e)),t){let n=!s.hasFocus;s.inputState.startMouseSelection(new O5(s,e,t,n)),n&&s.observer.ignore(()=>{cv(s.contentDOM);let r=s.root.activeElement;r&&!r.contains(s.contentDOM)&&r.blur()});let i=s.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}else s.inputState.setSelectionOrigin("select.pointer");return!1};function Gp(s,e,t,n){if(n==1)return fe.cursor(e,t);if(n==2)return h5(s.state,e,t);{let i=Lt.find(s.docView,e),r=s.state.doc.lineAt(i?i.posAtEnd:e),o=i?i.posAtStart:r.from,l=i?i.posAtEnd:r.to;return l<s.state.doc.length&&l==r.to&&l++,fe.range(o,l)}}let Jp=(s,e,t)=>e>=t.top&&e<=t.bottom&&s>=t.left&&s<=t.right;function B5(s,e,t,n){let i=Lt.find(s.docView,e);if(!i)return 1;let r=e-i.posAtStart;if(r==0)return 1;if(r==i.length)return-1;let o=i.coordsAt(r,-1);if(o&&Jp(t,n,o))return-1;let l=i.coordsAt(r,1);return l&&Jp(t,n,l)?1:o&&o.bottom>=n?-1:1}function Qp(s,e){let t=s.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:B5(s,t,e.clientX,e.clientY)}}const I5=Me.ie&&Me.ie_version<=11;let Yp=null,Xp=0,Zp=0;function Yv(s){if(!I5)return s.detail;let e=Yp,t=Zp;return Yp=s,Zp=Date.now(),Xp=!e||t>Date.now()-400&&Math.abs(e.clientX-s.clientX)<2&&Math.abs(e.clientY-s.clientY)<2?(Xp+1)%3:1}function N5(s,e){let t=Qp(s,e),n=Yv(e),i=s.state.selection;return{update(r){r.docChanged&&(t.pos=r.changes.mapPos(t.pos),i=i.map(r.changes))},get(r,o,l){let a=Qp(s,r),c,u=Gp(s,a.pos,a.bias,n);if(t.pos!=a.pos&&!o){let d=Gp(s,t.pos,t.bias,n),h=Math.min(d.from,u.from),p=Math.max(d.to,u.to);u=h<u.from?fe.range(h,p):fe.range(p,h)}return o?i.replaceRange(i.main.extend(u.from,u.to)):l&&n==1&&i.ranges.length>1&&(c=F5(i,a.pos))?c:l?i.addRange(u):fe.create([u])}}}function F5(s,e){for(let t=0;t<s.ranges.length;t++){let{from:n,to:i}=s.ranges[t];if(n<=e&&i>=e)return fe.create(s.ranges.slice(0,t).concat(s.ranges.slice(t+1)),s.mainIndex==t?0:s.mainIndex-(s.mainIndex>t?1:0))}return null}sn.dragstart=(s,e)=>{let{selection:{main:t}}=s.state;if(e.target.draggable){let i=s.docView.nearest(e.target);if(i&&i.isWidget){let r=i.posAtStart,o=r+i.length;(r>=t.to||o<=t.from)&&(t=fe.range(r,o))}}let{inputState:n}=s;return n.mouseSelection&&(n.mouseSelection.dragging=!0),n.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",fu(s.state,ff,s.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1};sn.dragend=s=>(s.inputState.draggedContent=null,!1);function eg(s,e,t,n){if(t=fu(s.state,df,t),!t)return;let i=s.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:r}=s.inputState,o=n&&r&&$5(s,e)?{from:r.from,to:r.to}:null,l={from:i,insert:t},a=s.state.changes(o?[o,l]:l);s.focus(),s.dispatch({changes:a,selection:{anchor:a.mapPos(i,-1),head:a.mapPos(i,1)},userEvent:o?"move.drop":"input.drop"}),s.inputState.draggedContent=null}sn.drop=(s,e)=>{if(!e.dataTransfer)return!1;if(s.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let n=Array(t.length),i=0,r=()=>{++i==t.length&&eg(s,e,n.filter(o=>o!=null).join(s.state.lineBreak),!1)};for(let o=0;o<t.length;o++){let l=new FileReader;l.onerror=r,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(n[o]=l.result),r()},l.readAsText(t[o])}return!0}else{let n=e.dataTransfer.getData("Text");if(n)return eg(s,e,n,!0),!0}return!1};sn.paste=(s,e)=>{if(s.state.readOnly)return!0;s.observer.flush();let t=Jv?null:e.clipboardData;return t?(Qv(s,t.getData("text/plain")||t.getData("text/uri-list")),!0):(V5(s),!1)};function z5(s,e){let t=s.dom.parentNode;if(!t)return;let n=t.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.value=e,n.focus(),n.selectionEnd=e.length,n.selectionStart=0,setTimeout(()=>{n.remove(),s.focus()},50)}function U5(s){let e=[],t=[],n=!1;for(let i of s.selection.ranges)i.empty||(e.push(s.sliceDoc(i.from,i.to)),t.push(i));if(!e.length){let i=-1;for(let{from:r}of s.selection.ranges){let o=s.doc.lineAt(r);o.number>i&&(e.push(o.text),t.push({from:o.from,to:Math.min(s.doc.length,o.to+1)})),i=o.number}n=!0}return{text:fu(s,ff,e.join(s.lineBreak)),ranges:t,linewise:n}}let hd=null;sn.copy=sn.cut=(s,e)=>{let{text:t,ranges:n,linewise:i}=U5(s.state);if(!t&&!i)return!1;hd=i?t:null,e.type=="cut"&&!s.state.readOnly&&s.dispatch({changes:n,scrollIntoView:!0,userEvent:"delete.cut"});let r=Jv?null:e.clipboardData;return r?(r.clearData(),r.setData("text/plain",t),!0):(z5(s,t),!1)};const Xv=Un.define();function Zv(s,e){let t=[];for(let n of s.facet(Ov)){let i=n(s,e);i&&t.push(i)}return t.length?s.update({effects:t,annotations:Xv.of(!0)}):null}function ey(s){setTimeout(()=>{let e=s.hasFocus;if(e!=s.inputState.notifiedFocused){let t=Zv(s.state,e);t?s.dispatch(t):s.update([])}},10)}Ks.focus=s=>{s.inputState.lastFocusTime=Date.now(),!s.scrollDOM.scrollTop&&(s.inputState.lastScrollTop||s.inputState.lastScrollLeft)&&(s.scrollDOM.scrollTop=s.inputState.lastScrollTop,s.scrollDOM.scrollLeft=s.inputState.lastScrollLeft),ey(s)};Ks.blur=s=>{s.observer.clearSelectionRange(),ey(s)};Ks.compositionstart=Ks.compositionupdate=s=>{s.observer.editContext||(s.inputState.compositionFirstChange==null&&(s.inputState.compositionFirstChange=!0),s.inputState.composing<0&&(s.inputState.composing=0))};Ks.compositionend=s=>{s.observer.editContext||(s.inputState.composing=-1,s.inputState.compositionEndedAt=Date.now(),s.inputState.compositionPendingKey=!0,s.inputState.compositionPendingChange=s.observer.pendingRecords().length>0,s.inputState.compositionFirstChange=null,Me.chrome&&Me.android?s.observer.flushSoon():s.inputState.compositionPendingChange?Promise.resolve().then(()=>s.observer.flush()):setTimeout(()=>{s.inputState.composing<0&&s.docView.hasComposition&&s.update([])},50))};Ks.contextmenu=s=>{s.inputState.lastContextMenu=Date.now()};sn.beforeinput=(s,e)=>{var t,n;if(e.inputType=="insertReplacementText"&&s.observer.editContext){let r=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),o=e.getTargetRanges();if(r&&o.length){let l=o[0],a=s.posAtDOM(l.startContainer,l.startOffset),c=s.posAtDOM(l.endContainer,l.endOffset);return gf(s,{from:a,to:c,insert:s.state.toText(r)},null),!0}}let i;if(Me.chrome&&Me.android&&(i=Kv.find(r=>r.inputType==e.inputType))&&(s.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let r=((n=window.visualViewport)===null||n===void 0?void 0:n.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>r+10&&s.hasFocus&&(s.contentDOM.blur(),s.focus())},100)}return Me.ios&&e.inputType=="deleteContentForward"&&s.observer.flushSoon(),Me.safari&&e.inputType=="insertText"&&s.inputState.composing>=0&&setTimeout(()=>Ks.compositionend(s,e),20),!1};const tg=new Set;function H5(s){tg.has(s)||(tg.add(s),s.addEventListener("copy",()=>{}),s.addEventListener("cut",()=>{}))}const sg=["pre-wrap","normal","pre-line","break-spaces"];let Tr=!1;function ng(){Tr=!1}class q5{constructor(e){this.lineWrapping=e,this.doc=rt.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let n=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(n+=Math.max(0,Math.ceil((t-e-n*this.lineLength*.5)/this.lineLength))),this.lineHeight*n}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return sg.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let n=0;n<e.length;n++){let i=e[n];i<0?n++:this.heightSamples[Math.floor(i*10)]||(t=!0,this.heightSamples[Math.floor(i*10)]=!0)}return t}refresh(e,t,n,i,r,o){let l=sg.indexOf(e)>-1,a=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=l;if(this.lineWrapping=l,this.lineHeight=t,this.charWidth=n,this.textHeight=i,this.lineLength=r,a){this.heightSamples={};for(let c=0;c<o.length;c++){let u=o[c];u<0?c++:this.heightSamples[Math.floor(u*10)]=!0}}return a}}class W5{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class vn{constructor(e,t,n,i,r){this.from=e,this.length=t,this.top=n,this.height=i,this._content=r}get type(){return typeof this._content=="number"?ys.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof hi?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new vn(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var St=(function(s){return s[s.ByPos=0]="ByPos",s[s.ByHeight=1]="ByHeight",s[s.ByPosNoHeight=2]="ByPosNoHeight",s})(St||(St={}));const ua=.001;class bs{constructor(e,t,n=2){this.length=e,this.height=t,this.flags=n}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>ua&&(Tr=!0),this.height=e)}replace(e,t,n){return bs.of(n)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,n,i){let r=this,o=n.doc;for(let l=i.length-1;l>=0;l--){let{fromA:a,toA:c,fromB:u,toB:d}=i[l],h=r.lineAt(a,St.ByPosNoHeight,n.setDoc(t),0,0),p=h.to>=c?h:r.lineAt(c,St.ByPosNoHeight,n,0,0);for(d+=p.to-c,c=p.to;l>0&&h.from<=i[l-1].toA;)a=i[l-1].fromA,u=i[l-1].fromB,l--,a<h.from&&(h=r.lineAt(a,St.ByPosNoHeight,n,0,0));u+=h.from-a,a=h.from;let y=mf.build(n.setDoc(o),e,u,d);r=Ta(r,r.replace(a,c,y))}return r.updateHeight(n,0)}static empty(){return new Os(0,0)}static of(e){if(e.length==1)return e[0];let t=0,n=e.length,i=0,r=0;for(;;)if(t==n)if(i>r*2){let l=e[t-1];l.break?e.splice(--t,1,l.left,null,l.right):e.splice(--t,1,l.left,l.right),n+=1+l.break,i-=l.size}else if(r>i*2){let l=e[n];l.break?e.splice(n,1,l.left,null,l.right):e.splice(n,1,l.left,l.right),n+=2+l.break,r-=l.size}else break;else if(i<r){let l=e[t++];l&&(i+=l.size)}else{let l=e[--n];l&&(r+=l.size)}let o=0;return e[t-1]==null?(o=1,t--):e[t]==null&&(o=1,n++),new K5(bs.of(e.slice(0,t)),o,bs.of(e.slice(n)))}}function Ta(s,e){return s==e?s:(s.constructor!=e.constructor&&(Tr=!0),e)}bs.prototype.size=1;class ty extends bs{constructor(e,t,n){super(e,t),this.deco=n}blockAt(e,t,n,i){return new vn(i,this.length,n,this.height,this.deco||0)}lineAt(e,t,n,i,r){return this.blockAt(0,n,i,r)}forEachLine(e,t,n,i,r,o){e<=r+this.length&&t>=r&&o(this.blockAt(0,n,i,r))}updateHeight(e,t=0,n=!1,i){return i&&i.from<=t&&i.more&&this.setHeight(i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Os extends ty{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,n,i){return new vn(i,this.length,n,this.height,this.breaks)}replace(e,t,n){let i=n[0];return n.length==1&&(i instanceof Os||i instanceof qt&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof qt?i=new Os(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):bs.of(n)}updateHeight(e,t=0,n=!1,i){return i&&i.from<=t&&i.more?this.setHeight(i.heights[i.index++]):(n||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class qt extends bs{constructor(e){super(e,0)}heightMetrics(e,t){let n=e.doc.lineAt(t).number,i=e.doc.lineAt(t+this.length).number,r=i-n+1,o,l=0;if(e.lineWrapping){let a=Math.min(this.height,e.lineHeight*r);o=a/r,this.length>r+1&&(l=(this.height-a)/(this.length-r-1))}else o=this.height/r;return{firstLine:n,lastLine:i,perLine:o,perChar:l}}blockAt(e,t,n,i){let{firstLine:r,lastLine:o,perLine:l,perChar:a}=this.heightMetrics(t,i);if(t.lineWrapping){let c=i+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-n)/this.height))*this.length)),u=t.doc.lineAt(c),d=l+u.length*a,h=Math.max(n,e-d/2);return new vn(u.from,u.length,h,d,0)}else{let c=Math.max(0,Math.min(o-r,Math.floor((e-n)/l))),{from:u,length:d}=t.doc.line(r+c);return new vn(u,d,n+l*c,l,0)}}lineAt(e,t,n,i,r){if(t==St.ByHeight)return this.blockAt(e,n,i,r);if(t==St.ByPosNoHeight){let{from:p,to:y}=n.doc.lineAt(e);return new vn(p,y-p,0,0,0)}let{firstLine:o,perLine:l,perChar:a}=this.heightMetrics(n,r),c=n.doc.lineAt(e),u=l+c.length*a,d=c.number-o,h=i+l*d+a*(c.from-r-d);return new vn(c.from,c.length,Math.max(i,Math.min(h,i+this.height-u)),u,0)}forEachLine(e,t,n,i,r,o){e=Math.max(e,r),t=Math.min(t,r+this.length);let{firstLine:l,perLine:a,perChar:c}=this.heightMetrics(n,r);for(let u=e,d=i;u<=t;){let h=n.doc.lineAt(u);if(u==e){let y=h.number-l;d+=a*y+c*(e-r-y)}let p=a+c*h.length;o(new vn(h.from,h.length,d,p,0)),d+=p,u=h.to+1}}replace(e,t,n){let i=this.length-t;if(i>0){let r=n[n.length-1];r instanceof qt?n[n.length-1]=new qt(r.length+i):n.push(null,new qt(i-1))}if(e>0){let r=n[0];r instanceof qt?n[0]=new qt(e+r.length):n.unshift(new qt(e-1),null)}return bs.of(n)}decomposeLeft(e,t){t.push(new qt(e-1),null)}decomposeRight(e,t){t.push(null,new qt(this.length-e-1))}updateHeight(e,t=0,n=!1,i){let r=t+this.length;if(i&&i.from<=t+this.length&&i.more){let o=[],l=Math.max(t,i.from),a=-1;for(i.from>t&&o.push(new qt(i.from-t-1).updateHeight(e,t));l<=r&&i.more;){let u=e.doc.lineAt(l).length;o.length&&o.push(null);let d=i.heights[i.index++];a==-1?a=d:Math.abs(d-a)>=ua&&(a=-2);let h=new Os(u,d);h.outdated=!1,o.push(h),l+=u+1}l<=r&&o.push(null,new qt(r-l).updateHeight(e,l));let c=bs.of(o);return(a<0||Math.abs(c.height-this.height)>=ua||Math.abs(a-this.heightMetrics(e,t).perLine)>=ua)&&(Tr=!0),Ta(this,c)}else(n||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class K5 extends bs{constructor(e,t,n){super(e.length+t+n.length,e.height+n.height,t|(e.outdated||n.outdated?2:0)),this.left=e,this.right=n,this.size=e.size+n.size}get break(){return this.flags&1}blockAt(e,t,n,i){let r=n+this.left.height;return e<r?this.left.blockAt(e,t,n,i):this.right.blockAt(e,t,r,i+this.left.length+this.break)}lineAt(e,t,n,i,r){let o=i+this.left.height,l=r+this.left.length+this.break,a=t==St.ByHeight?e<o:e<l,c=a?this.left.lineAt(e,t,n,i,r):this.right.lineAt(e,t,n,o,l);if(this.break||(a?c.to<l:c.from>l))return c;let u=t==St.ByPosNoHeight?St.ByPosNoHeight:St.ByPos;return a?c.join(this.right.lineAt(l,u,n,o,l)):this.left.lineAt(l,u,n,i,r).join(c)}forEachLine(e,t,n,i,r,o){let l=i+this.left.height,a=r+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,t,n,i,r,o),t>=a&&this.right.forEachLine(e,t,n,l,a,o);else{let c=this.lineAt(a,St.ByPos,n,i,r);e<c.from&&this.left.forEachLine(e,c.from-1,n,i,r,o),c.to>=e&&c.from<=t&&o(c),t>c.to&&this.right.forEachLine(c.to+1,t,n,l,a,o)}}replace(e,t,n){let i=this.left.length+this.break;if(t<i)return this.balanced(this.left.replace(e,t,n),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,t-i,n));let r=[];e>0&&this.decomposeLeft(e,r);let o=r.length;for(let l of n)r.push(l);if(e>0&&ig(r,o-1),t<this.length){let l=r.length;this.decomposeRight(t,r),ig(r,l)}return bs.of(r)}decomposeLeft(e,t){let n=this.left.length;if(e<=n)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(n++,e>=n&&t.push(null)),e>n&&this.right.decomposeLeft(e-n,t)}decomposeRight(e,t){let n=this.left.length,i=n+this.break;if(e>=i)return this.right.decomposeRight(e-i,t);e<n&&this.left.decomposeRight(e,t),this.break&&e<i&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?bs.of(this.break?[e,null,t]:[e,t]):(this.left=Ta(this.left,e),this.right=Ta(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,n=!1,i){let{left:r,right:o}=this,l=t+r.length+this.break,a=null;return i&&i.from<=t+r.length&&i.more?a=r=r.updateHeight(e,t,n,i):r.updateHeight(e,t,n),i&&i.from<=l+o.length&&i.more?a=o=o.updateHeight(e,l,n,i):o.updateHeight(e,l,n),a?this.balanced(r,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function ig(s,e){let t,n;s[e]==null&&(t=s[e-1])instanceof qt&&(n=s[e+1])instanceof qt&&s.splice(e-1,3,new qt(t.length+1+n.length))}const G5=5;class mf{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let n=Math.min(t,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof Os?i.length+=n-this.pos:(n>this.pos||!this.isCovered)&&this.nodes.push(new Os(n-this.pos,-1)),this.writtenTo=n,t>n&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,n){if(e<t||n.heightRelevant){let i=n.widget?n.widget.estimatedHeight:0,r=n.widget?n.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let o=t-e;n.block?this.addBlock(new ty(o,i,n)):(o||r||i>=G5)&&this.addLineDeco(i,r,o)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Os(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let n=new qt(t-e);return this.oracle.doc.lineAt(e).to==t&&(n.flags|=4),n}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Os)return e;let t=new Os(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,n){let i=this.ensureLine();i.length+=n,i.collapsed+=n,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=t,this.writtenTo=this.pos=this.pos+n}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof Os)&&!this.isCovered?this.nodes.push(new Os(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let n=e;for(let i of this.nodes)i instanceof Os&&i.updateHeight(this.oracle,n),n+=i?i.length:1;return this.nodes}static build(e,t,n,i){let r=new mf(n,e);return it.spans(t,n,i,r,0),r.finish(n)}}function J5(s,e,t){let n=new Q5;return it.compare(s,e,t,n,0),n.changes}class Q5{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,n,i){(e<t||n&&n.heightRelevant||i&&i.heightRelevant)&&aa(e,t,this.changes,5)}}function Y5(s,e){let t=s.getBoundingClientRect(),n=s.ownerDocument,i=n.defaultView||window,r=Math.max(0,t.left),o=Math.min(i.innerWidth,t.right),l=Math.max(0,t.top),a=Math.min(i.innerHeight,t.bottom);for(let c=s.parentNode;c&&c!=n.body;)if(c.nodeType==1){let u=c,d=window.getComputedStyle(u);if((u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth)&&d.overflow!="visible"){let h=u.getBoundingClientRect();r=Math.max(r,h.left),o=Math.min(o,h.right),l=Math.max(l,h.top),a=Math.min(c==s.parentNode?i.innerHeight:a,h.bottom)}c=d.position=="absolute"||d.position=="fixed"?u.offsetParent:u.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:r-t.left,right:Math.max(r,o)-t.left,top:l-(t.top+e),bottom:Math.max(l,a)-(t.top+e)}}function X5(s){let e=s.getBoundingClientRect(),t=s.ownerDocument.defaultView||window;return e.left<t.innerWidth&&e.right>0&&e.top<t.innerHeight&&e.bottom>0}function Z5(s,e){let t=s.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class Yu{constructor(e,t,n,i){this.from=e,this.to=t,this.size=n,this.displaySize=i}static same(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++){let i=e[n],r=t[n];if(i.from!=r.from||i.to!=r.to||i.size!=r.size)return!1}return!0}draw(e,t){return Fe.replace({widget:new e3(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class e3 extends mi{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class rg{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=og,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Ct.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(hf).some(n=>typeof n!="function"&&n.class=="cm-lineWrapping");this.heightOracle=new q5(t),this.stateDeco=e.facet(zo).filter(n=>typeof n!="function"),this.heightMap=bs.empty().applyChanges(this.stateDeco,rt.empty,this.heightOracle.setDoc(e.doc),[new Hs(0,0,0,e.doc.length)]);for(let n=0;n<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());n++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Fe.set(this.lineGaps.map(n=>n.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let n=0;n<=1;n++){let i=n?t.head:t.anchor;if(!e.some(({from:r,to:o})=>i>=r&&i<=o)){let{from:r,to:o}=this.lineBlockAt(i);e.push(new Bl(r,o))}}return this.viewports=e.sort((n,i)=>n.from-i.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?og:new vf(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(uo(e,this.scaler))})}update(e,t=null){this.state=e.state;let n=this.stateDeco;this.stateDeco=this.state.facet(zo).filter(u=>typeof u!="function");let i=e.changedRanges,r=Hs.extendWithRanges(i,J5(n,this.stateDeco,e?e.changes:Nt.empty(this.state.doc.length))),o=this.heightMap.height,l=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);ng(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),r),(this.heightMap.height!=o||Tr)&&(e.flags|=2),l?(this.scrollAnchorPos=e.changes.mapPos(l.from,-1),this.scrollAnchorHeight=l.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let a=r.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<a.from||t.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,t));let c=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,e.flags|=this.updateForViewport(),(c||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet($v)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,n=window.getComputedStyle(t),i=this.heightOracle,r=n.whiteSpace;this.defaultTextDirection=n.direction=="rtl"?Ct.RTL:Ct.LTR;let o=this.heightOracle.mustRefreshForWrapping(r),l=t.getBoundingClientRect(),a=o||this.mustMeasureContent||this.contentDOMHeight!=l.height;this.contentDOMHeight=l.height,this.mustMeasureContent=!1;let c=0,u=0;if(l.width&&l.height){let{scaleX:U,scaleY:I}=uv(t,l);(U>.005&&Math.abs(this.scaleX-U)>.005||I>.005&&Math.abs(this.scaleY-I)>.005)&&(this.scaleX=U,this.scaleY=I,c|=16,o=a=!0)}let d=(parseInt(n.paddingTop)||0)*this.scaleY,h=(parseInt(n.paddingBottom)||0)*this.scaleY;(this.paddingTop!=d||this.paddingBottom!=h)&&(this.paddingTop=d,this.paddingBottom=h,c|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,c|=16);let p=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=p&&(this.scrollAnchorHeight=-1,this.scrollTop=p),this.scrolledToBottom=fv(e.scrollDOM);let y=(this.printing?Z5:Y5)(t,this.paddingTop),b=y.top-this.pixelViewport.top,x=y.bottom-this.pixelViewport.bottom;this.pixelViewport=y;let g=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(g!=this.inView&&(this.inView=g,g&&(a=!0)),!this.inView&&!this.scrollTarget&&!X5(e.dom))return 0;let j=l.width;if((this.contentDOMWidth!=j||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=l.width,this.editorHeight=e.scrollDOM.clientHeight,c|=16),a){let U=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(U)&&(o=!0),o||i.lineWrapping&&Math.abs(j-this.contentDOMWidth)>i.charWidth){let{lineHeight:I,charWidth:L,textHeight:_}=e.docView.measureTextSize();o=I>0&&i.refresh(r,I,L,_,Math.max(5,j/L),U),o&&(e.docView.minWidth=0,c|=16)}b>0&&x>0?u=Math.max(b,x):b<0&&x<0&&(u=Math.min(b,x)),ng();for(let I of this.viewports){let L=I.from==this.viewport.from?U:e.docView.measureVisibleLineHeights(I);this.heightMap=(o?bs.empty().applyChanges(this.stateDeco,rt.empty,this.heightOracle,[new Hs(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,o,new W5(I.from,L))}Tr&&(c|=2)}let B=!this.viewportIsAppropriate(this.viewport,u)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return B&&(c&2&&(c|=this.updateScaler()),this.viewport=this.getViewport(u,this.scrollTarget),c|=this.updateForViewport()),(c&2||B)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),c|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),c}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let n=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,r=this.heightOracle,{visibleTop:o,visibleBottom:l}=this,a=new Bl(i.lineAt(o-n*1e3,St.ByHeight,r,0,0).from,i.lineAt(l+(1-n)*1e3,St.ByHeight,r,0,0).to);if(t){let{head:c}=t.range;if(c<a.from||c>a.to){let u=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),d=i.lineAt(c,St.ByPos,r,0,0),h;t.y=="center"?h=(d.top+d.bottom)/2-u/2:t.y=="start"||t.y=="nearest"&&c<a.from?h=d.top:h=d.bottom-u,a=new Bl(i.lineAt(h-1e3/2,St.ByHeight,r,0,0).from,i.lineAt(h+u+1e3/2,St.ByHeight,r,0,0).to)}}return a}mapViewport(e,t){let n=t.mapPos(e.from,-1),i=t.mapPos(e.to,1);return new Bl(this.heightMap.lineAt(n,St.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,St.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},n=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,St.ByPos,this.heightOracle,0,0),{bottom:r}=this.heightMap.lineAt(t,St.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:l}=this;return(e==0||i<=o-Math.max(10,Math.min(-n,250)))&&(t==this.state.doc.length||r>=l+Math.max(10,Math.min(n,250)))&&i>o-2*1e3&&r<l+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let n=[];for(let i of e)t.touchesRange(i.from,i.to)||n.push(new Yu(t.mapPos(i.from),t.mapPos(i.to),i.size,i.displaySize));return n}ensureLineGaps(e,t){let n=this.heightOracle.lineWrapping,i=n?1e4:2e3,r=i>>1,o=i<<1;if(this.defaultTextDirection!=Ct.LTR&&!n)return[];let l=[],a=(u,d,h,p)=>{if(d-u<r)return;let y=this.state.selection.main,b=[y.from];y.empty||b.push(y.to);for(let g of b)if(g>u&&g<d){a(u,g-10,h,p),a(g+10,d,h,p);return}let x=s3(e,g=>g.from>=h.from&&g.to<=h.to&&Math.abs(g.from-u)<r&&Math.abs(g.to-d)<r&&!b.some(j=>g.from<j&&g.to>j));if(!x){if(d<h.to&&t&&n&&t.visibleRanges.some(B=>B.from<=d&&B.to>=d)){let B=t.moveToLineBoundary(fe.cursor(d),!1,!0).head;B>u&&(d=B)}let g=this.gapSize(h,u,d,p),j=n||g<2e6?g:2e6;x=new Yu(u,d,g,j)}l.push(x)},c=u=>{if(u.length<o||u.type!=ys.Text)return;let d=t3(u.from,u.to,this.stateDeco);if(d.total<o)return;let h=this.scrollTarget?this.scrollTarget.range.head:null,p,y;if(n){let b=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,x,g;if(h!=null){let j=Nl(d,h),B=((this.visibleBottom-this.visibleTop)/2+b)/u.height;x=j-B,g=j+B}else x=(this.visibleTop-u.top-b)/u.height,g=(this.visibleBottom-u.top+b)/u.height;p=Il(d,x),y=Il(d,g)}else{let b=d.total*this.heightOracle.charWidth,x=i*this.heightOracle.charWidth,g=0;if(b>2e6)for(let L of e)L.from>=u.from&&L.from<u.to&&L.size!=L.displaySize&&L.from*this.heightOracle.charWidth+g<this.pixelViewport.left&&(g=L.size-L.displaySize);let j=this.pixelViewport.left+g,B=this.pixelViewport.right+g,U,I;if(h!=null){let L=Nl(d,h),_=((B-j)/2+x)/b;U=L-_,I=L+_}else U=(j-x)/b,I=(B+x)/b;p=Il(d,U),y=Il(d,I)}p>u.from&&a(u.from,p,u,d),y<u.to&&a(y,u.to,u,d)};for(let u of this.viewportLines)Array.isArray(u.type)?u.type.forEach(c):c(u);return l}gapSize(e,t,n,i){let r=Nl(i,n)-Nl(i,t);return this.heightOracle.lineWrapping?e.height*r:i.total*this.heightOracle.charWidth*r}updateLineGaps(e){Yu.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Fe.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let n=[];it.spans(t,this.viewport.from,this.viewport.to,{span(r,o){n.push({from:r,to:o})},point(){}},20);let i=0;if(n.length!=this.visibleRanges.length)i=12;else for(let r=0;r<n.length&&!(i&8);r++){let o=this.visibleRanges[r],l=n[r];(o.from!=l.from||o.to!=l.to)&&(i|=4,e&&e.mapPos(o.from,-1)==l.from&&e.mapPos(o.to,1)==l.to||(i|=8))}return this.visibleRanges=n,i}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||uo(this.heightMap.lineAt(e,St.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||uo(this.heightMap.lineAt(this.scaler.fromDOM(e),St.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return uo(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Bl{constructor(e,t){this.from=e,this.to=t}}function t3(s,e,t){let n=[],i=s,r=0;return it.spans(t,s,e,{span(){},point(o,l){o>i&&(n.push({from:i,to:o}),r+=o-i),i=l}},20),i<e&&(n.push({from:i,to:e}),r+=e-i),{total:r,ranges:n}}function Il({total:s,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let n=Math.floor(s*t);for(let i=0;;i++){let{from:r,to:o}=e[i],l=o-r;if(n<=l)return r+n;n-=l}}function Nl(s,e){let t=0;for(let{from:n,to:i}of s.ranges){if(e<=i){t+=e-n;break}t+=i-n}return t/s.total}function s3(s,e){for(let t of s)if(e(t))return t}const og={toDOM(s){return s},fromDOM(s){return s},scale:1,eq(s){return s==this}};class vf{constructor(e,t,n){let i=0,r=0,o=0;this.viewports=n.map(({from:l,to:a})=>{let c=t.lineAt(l,St.ByPos,e,0,0).top,u=t.lineAt(a,St.ByPos,e,0,0).bottom;return i+=u-c,{from:l,to:a,top:c,bottom:u,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(t.height-i);for(let l of this.viewports)l.domTop=o+(l.top-r)*this.scale,o=l.domBottom=l.domTop+(l.bottom-l.top),r=l.bottom}toDOM(e){for(let t=0,n=0,i=0;;t++){let r=t<this.viewports.length?this.viewports[t]:null;if(!r||e<r.top)return i+(e-n)*this.scale;if(e<=r.bottom)return r.domTop+(e-r.top);n=r.bottom,i=r.domBottom}}fromDOM(e){for(let t=0,n=0,i=0;;t++){let r=t<this.viewports.length?this.viewports[t]:null;if(!r||e<r.domTop)return n+(e-i)/this.scale;if(e<=r.domBottom)return r.top+(e-r.domTop);n=r.bottom,i=r.domBottom}}eq(e){return e instanceof vf?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,n)=>t.from==e.viewports[n].from&&t.to==e.viewports[n].to):!1}}function uo(s,e){if(e.scale==1)return s;let t=e.toDOM(s.top),n=e.toDOM(s.bottom);return new vn(s.from,s.length,t,n-t,Array.isArray(s._content)?s._content.map(i=>uo(i,e)):s._content)}const Fl=je.define({combine:s=>s.join(" ")}),pd=je.define({combine:s=>s.indexOf(!0)>-1}),gd=di.newName(),sy=di.newName(),ny=di.newName(),iy={"&light":"."+sy,"&dark":"."+ny};function md(s,e,t){return new di(e,{finish(n){return/&/.test(n)?n.replace(/&\w*/,i=>{if(i=="&")return s;if(!t||!t[i])throw new RangeError(`Unsupported selector: ${i}`);return t[i]}):s+" "+n}})}const n3=md("."+gd,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},iy),i3={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Xu=Me.ie&&Me.ie_version<=11;class r3{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new F_,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let n of t)this.queue.push(n);(Me.ie&&Me.ie_version<=11||Me.ios&&e.composing)&&t.some(n=>n.type=="childList"&&n.removedNodes.length||n.type=="characterData"&&n.oldValue.length>n.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&Me.android&&e.constructor.EDIT_CONTEXT!==!1&&!(Me.chrome&&Me.chrome_version<126)&&(this.editContext=new l3(e),e.state.facet($n)&&(e.contentDOM.editContext=this.editContext.editContext)),Xu&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,n)=>t!=e[n]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,i=this.selectionRange;if(n.state.facet($n)?n.root.activeElement!=this.dom:!la(this.dom,i))return;let r=i.anchorNode&&n.docView.nearest(i.anchorNode);if(r&&r.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(Me.ie&&Me.ie_version<=11||Me.android&&Me.chrome)&&!n.state.selection.main.empty&&i.focusNode&&So(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=No(e.root);if(!t)return!1;let n=Me.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&o3(this.view,t)||t;if(!n||this.selectionRange.eq(n))return!1;let i=la(this.dom,n);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&U_(this.dom,n)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(n),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let n=this.dom;n;)if(n.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==n?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(n),n=n.assignedSlot||n.parentNode;else if(n.nodeType==11)n=n.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);for(let n of this.scrollTargets=t)n.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,i3),Xu&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Xu&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var n;if(!this.delayedAndroidKey){let i=()=>{let r=this.delayedAndroidKey;r&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=r.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&r.force&&kr(this.dom,r.key,r.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((n=this.delayedAndroidKey)===null||n===void 0)&&n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,n=-1,i=!1;for(let r of e){let o=this.readMutation(r);o&&(o.typeOver&&(i=!0),t==-1?{from:t,to:n}=o:(t=Math.min(o.from,t),n=Math.max(o.to,n)))}return{from:t,to:n,typeOver:i}}readChange(){let{from:e,to:t,typeOver:n}=this.processRecords(),i=this.selectionChanged&&la(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let r=new C5(this.view,e,t,n);return this.view.docView.domChanged={newSel:r.newSel?r.newSel.main:null},r}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let n=this.view.state,i=qv(this.view,t);return this.view.state==n&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let n=lg(t,e.previousSibling||e.target.previousSibling,-1),i=lg(t,e.nextSibling||e.target.nextSibling,1);return{from:n?t.posAfter(n):t.posAtStart,to:i?t.posBefore(i):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet($n)!=e.state.facet($n)&&(e.view.contentDOM.editContext=e.state.facet($n)?this.editContext.editContext:null))}destroy(){var e,t,n;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(n=this.resizeScroll)===null||n===void 0||n.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function lg(s,e,t){for(;e;){let n=ht.get(e);if(n&&n.parent==s)return n;let i=e.parentNode;e=i!=s.dom?i:t>0?e.nextSibling:e.previousSibling}return null}function ag(s,e){let t=e.startContainer,n=e.startOffset,i=e.endContainer,r=e.endOffset,o=s.docView.domAtPos(s.state.selection.main.anchor);return So(o.node,o.offset,i,r)&&([t,n,i,r]=[i,r,t,n]),{anchorNode:t,anchorOffset:n,focusNode:i,focusOffset:r}}function o3(s,e){if(e.getComposedRanges){let i=e.getComposedRanges(s.root)[0];if(i)return ag(s,i)}let t=null;function n(i){i.preventDefault(),i.stopImmediatePropagation(),t=i.getTargetRanges()[0]}return s.contentDOM.addEventListener("beforeinput",n,!0),s.dom.ownerDocument.execCommand("indent"),s.contentDOM.removeEventListener("beforeinput",n,!0),t?ag(s,t):null}class l3{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=n=>{let i=e.state.selection.main,{anchor:r,head:o}=i,l=this.toEditorPos(n.updateRangeStart),a=this.toEditorPos(n.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:n.updateRangeStart,editorBase:l,drifted:!1});let c=a-l>n.text.length;l==this.from&&r<this.from?l=r:a==this.to&&r>this.to&&(a=r);let u=Wv(e.state.sliceDoc(l,a),n.text,(c?i.from:i.to)-l,c?"end":null);if(!u){let h=fe.single(this.toEditorPos(n.selectionStart),this.toEditorPos(n.selectionEnd));h.main.eq(i)||e.dispatch({selection:h,userEvent:"select"});return}let d={from:u.from+l,to:u.toA+l,insert:rt.of(n.text.slice(u.from,u.toB).split(`
`))};if((Me.mac||Me.android)&&d.from==o-1&&/^\. ?$/.test(n.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(d={from:l,to:a,insert:rt.of([n.text.replace("."," ")])}),this.pendingContextChange=d,!e.state.readOnly){let h=this.to-this.from+(d.to-d.from+d.insert.length);gf(e,d,fe.single(this.toEditorPos(n.selectionStart,h),this.toEditorPos(n.selectionEnd,h)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),d.from<d.to&&!d.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(t.text.slice(Math.max(0,n.updateRangeStart-1),Math.min(t.text.length,n.updateRangeStart+1)))&&this.handlers.compositionend(n)},this.handlers.characterboundsupdate=n=>{let i=[],r=null;for(let o=this.toEditorPos(n.rangeStart),l=this.toEditorPos(n.rangeEnd);o<l;o++){let a=e.coordsForChar(o);r=a&&new DOMRect(a.left,a.top,a.right-a.left,a.bottom-a.top)||r||new DOMRect,i.push(r)}t.updateCharacterBounds(n.rangeStart,i)},this.handlers.textformatupdate=n=>{let i=[];for(let r of n.getTextFormats()){let o=r.underlineStyle,l=r.underlineThickness;if(!/none/i.test(o)&&!/none/i.test(l)){let a=this.toEditorPos(r.rangeStart),c=this.toEditorPos(r.rangeEnd);if(a<c){let u=`text-decoration: underline ${/^[a-z]/.test(o)?o+" ":o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${/thin/i.test(l)?1:2}px`;i.push(Fe.mark({attributes:{style:u}}).range(a,c))}}}e.dispatch({effects:Lv.of(Fe.set(i))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:n}=this.composing;this.composing=null,n&&this.reset(e.state)}};for(let n in this.handlers)t.addEventListener(n,this.handlers[n]);this.measureReq={read:n=>{this.editContext.updateControlBounds(n.contentDOM.getBoundingClientRect());let i=No(n.root);i&&i.rangeCount&&this.editContext.updateSelectionBounds(i.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,n=!1,i=this.pendingContextChange;return e.changes.iterChanges((r,o,l,a,c)=>{if(n)return;let u=c.length-(o-r);if(i&&o>=i.to)if(i.from==r&&i.to==o&&i.insert.eq(c)){i=this.pendingContextChange=null,t+=u,this.to+=u;return}else i=null,this.revertPending(e.state);if(r+=t,o+=t,o<=this.from)this.from+=u,this.to+=u;else if(r<this.to){if(r<this.from||o>this.to||this.to-this.from+c.length>3e4){n=!0;return}this.editContext.updateText(this.toContextPos(r),this.toContextPos(o),c.toString()),this.to+=u}t+=u}),i&&!n&&this.revertPending(e.state),!n}update(e){let t=this.pendingContextChange,n=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(n.from,n.to)&&e.transactions.some(i=>!i.isUserEvent("input.type")&&i.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,n=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),i=this.toContextPos(t.head);(this.editContext.selectionStart!=n||this.editContext.selectionEnd!=i)&&this.editContext.updateSelection(n,i)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let n=this.composing;return n&&n.drifted?n.editorBase+(e-n.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class Te{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:n}=e;this.dispatchTransactions=e.dispatchTransactions||n&&(i=>i.forEach(r=>n(r,this)))||(i=>this.update(i)),this.dispatch=this.dispatch.bind(this),this._root=e.root||z_(e.parent)||document,this.viewState=new rg(e.state||nt.create(e)),e.scrollTo&&e.scrollTo.is(Rl)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(or).map(i=>new Gu(i));for(let i of this.plugins)i.update(this);this.observer=new r3(this),this.inputState=new D5(this),this.inputState.ensureHandlers(this.plugins),this.docView=new Np(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=e.length==1&&e[0]instanceof Ft?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,n=!1,i,r=this.state;for(let h of e){if(h.startState!=r)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");r=h.state}if(this.destroyed){this.viewState.state=r;return}let o=this.hasFocus,l=0,a=null;e.some(h=>h.annotation(Xv))?(this.inputState.notifiedFocused=o,l=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,a=Zv(r,o),a||(l=1));let c=this.observer.delayedAndroidKey,u=null;if(c?(this.observer.clearDelayedAndroidKey(),u=this.observer.readChange(),(u&&!this.state.doc.eq(r.doc)||!this.state.selection.eq(r.selection))&&(u=null)):this.observer.clear(),r.facet(nt.phrases)!=this.state.facet(nt.phrases))return this.setState(r);i=Ea.create(this,r,e),i.flags|=l;let d=this.viewState.scrollTarget;try{this.updateState=2;for(let h of e){if(d&&(d=d.map(h.changes)),h.scrollIntoView){let{main:p}=h.state.selection;d=new xr(p.empty?p:fe.cursor(p.head,p.head>p.anchor?-1:1))}for(let p of h.effects)p.is(Rl)&&(d=p.value.clip(this.state))}this.viewState.update(i,d),this.bidiCache=ja.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),t=this.docView.update(i),this.state.facet(lo)!=this.styleModules&&this.mountStyles(),n=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(h=>h.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(Fl)!=i.state.facet(Fl)&&(this.viewState.mustMeasureContent=!0),(t||n||d||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!i.empty)for(let h of this.state.facet(cd))try{h(i)}catch(p){_s(this.state,p,"update listener")}(a||u)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),u&&!qv(this,u)&&c.force&&kr(this.contentDOM,c.key,c.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let n of this.plugins)n.destroy(this);this.viewState=new rg(e),this.plugins=e.facet(or).map(n=>new Gu(n)),this.pluginMap.clear();for(let n of this.plugins)n.update(this);this.docView.destroy(),this.docView=new Np(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(or),n=e.state.facet(or);if(t!=n){let i=[];for(let r of n){let o=t.indexOf(r);if(o<0)i.push(new Gu(r));else{let l=this.plugins[o];l.mustUpdate=e,i.push(l)}}for(let r of this.plugins)r.mustUpdate!=e&&r.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);t!=n&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(n){_s(this.state,n,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,n=this.scrollDOM,i=n.scrollTop*this.scaleY,{scrollAnchorPos:r,scrollAnchorHeight:o}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let l=0;;l++){if(o<0)if(fv(n))r=-1,o=this.viewState.heightMap.height;else{let p=this.viewState.scrollAnchorAt(i);r=p.from,o=p.top}this.updateState=1;let a=this.viewState.measure(this);if(!a&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let c=[];a&4||([this.measureRequests,c]=[c,this.measureRequests]);let u=c.map(p=>{try{return p.read(this)}catch(y){return _s(this.state,y),ug}}),d=Ea.create(this,this.state,[]),h=!1;d.flags|=a,t?t.flags|=a:t=d,this.updateState=2,d.empty||(this.updatePlugins(d),this.inputState.update(d),this.updateAttrs(),h=this.docView.update(d),h&&this.docViewUpdate());for(let p=0;p<c.length;p++)if(u[p]!=ug)try{let y=c[p];y.write&&y.write(u[p],this)}catch(y){_s(this.state,y)}if(h&&this.docView.updateSelection(!0),!d.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let y=(r<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(r).top)-o;if(y>1||y<-1){i=i+y,n.scrollTop=i/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let l of this.state.facet(cd))l(t)}get themeClasses(){return gd+" "+(this.state.facet(pd)?ny:sy)+" "+this.state.facet(Fl)}updateAttrs(){let e=cg(this,Vv,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet($n)?"true":"false",class:"cm-content",style:`${Me.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),cg(this,hf,t);let n=this.observer.ignore(()=>{let i=rd(this.contentDOM,this.contentAttrs,t),r=rd(this.dom,this.editorAttrs,e);return i||r});return this.editorAttrs=e,this.contentAttrs=t,n}showAnnouncements(e){let t=!0;for(let n of e)for(let i of n.effects)if(i.is(Te.announce)){t&&(this.announceDOM.textContent=""),t=!1;let r=this.announceDOM.appendChild(document.createElement("div"));r.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(lo);let e=this.state.facet(Te.cspNonce);di.mount(this.root,this.styleModules.concat(n3).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.plugin!=e)&&this.pluginMap.set(e,t=this.plugins.find(n=>n.plugin==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,n){return Qu(this,e,qp(this,e,t,n))}moveByGroup(e,t){return Qu(this,e,qp(this,e,t,n=>b5(this,e.head,n)))}visualLineSide(e,t){let n=this.bidiSpans(e),i=this.textDirectionAt(e.from),r=n[t?n.length-1:0];return fe.cursor(r.side(t,i)+e.from,r.forward(!t,i)?1:-1)}moveToLineBoundary(e,t,n=!0){return y5(this,e,t,n)}moveVertically(e,t,n){return Qu(this,e,k5(this,e,t,n))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),zv(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let n=this.docView.coordsAt(e,t);if(!n||n.left==n.right)return n;let i=this.state.doc.lineAt(e),r=this.bidiSpans(i),o=r[ni.find(r,e-i.from,-1,t)];return du(n,o.dir==Ct.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(Pv)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>a3)return _v(e.length);let t=this.textDirectionAt(e.from),n;for(let r of this.bidiCache)if(r.from==e.from&&r.dir==t&&(r.fresh||Cv(r.isolates,n=Ip(this,e))))return r.order;n||(n=Ip(this,e));let i=s5(e.text,t,n);return this.bidiCache.push(new ja(e.from,e.to,t,n,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Me.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{cv(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return Rl.of(new xr(typeof e=="number"?fe.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,n=this.viewState.scrollAnchorAt(e);return Rl.of(new xr(fe.cursor(n.from),"start","start",n.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return Vt.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Vt.define(()=>({}),{eventObservers:e})}static theme(e,t){let n=di.newName(),i=[Fl.of(n),lo.of(md(`.${n}`,e))];return t&&t.dark&&i.push(pd.of(!0)),i}static baseTheme(e){return Gi.lowest(lo.of(md("."+gd,e,iy)))}static findFromDOM(e){var t;let n=e.querySelector(".cm-content"),i=n&&ht.get(n)||ht.get(e);return((t=i?.rootView)===null||t===void 0?void 0:t.view)||null}}Te.styleModule=lo;Te.inputHandler=jv;Te.clipboardInputFilter=df;Te.clipboardOutputFilter=ff;Te.scrollHandler=Rv;Te.focusChangeEffect=Ov;Te.perLineTextDirection=Pv;Te.exceptionSink=Tv;Te.updateListener=cd;Te.editable=$n;Te.mouseSelectionStyle=Ev;Te.dragMovesSelection=Dv;Te.clickAddsSelectionRange=Mv;Te.decorations=zo;Te.outerDecorations=Bv;Te.atomicRanges=al;Te.bidiIsolatedRanges=Iv;Te.scrollMargins=Nv;Te.darkTheme=pd;Te.cspNonce=je.define({combine:s=>s.length?s[0]:""});Te.contentAttributes=hf;Te.editorAttributes=Vv;Te.lineWrapping=Te.contentAttributes.of({class:"cm-lineWrapping"});Te.announce=Qe.define();const a3=4096,ug={};class ja{constructor(e,t,n,i,r,o){this.from=e,this.to=t,this.dir=n,this.isolates=i,this.fresh=r,this.order=o}static update(e,t){if(t.empty&&!e.some(r=>r.fresh))return e;let n=[],i=e.length?e[e.length-1].dir:Ct.LTR;for(let r=Math.max(0,e.length-10);r<e.length;r++){let o=e[r];o.dir==i&&!t.touchesRange(o.from,o.to)&&n.push(new ja(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return n}}function cg(s,e,t){for(let n=s.state.facet(e),i=n.length-1;i>=0;i--){let r=n[i],o=typeof r=="function"?r(s):r;o&&id(o,t)}return t}const u3=Me.mac?"mac":Me.windows?"win":Me.linux?"linux":"key";function c3(s,e){const t=s.split(/-(?!$)/);let n=t[t.length-1];n=="Space"&&(n=" ");let i,r,o,l;for(let a=0;a<t.length-1;++a){const c=t[a];if(/^(cmd|meta|m)$/i.test(c))l=!0;else if(/^a(lt)?$/i.test(c))i=!0;else if(/^(c|ctrl|control)$/i.test(c))r=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))e=="mac"?l=!0:r=!0;else throw new Error("Unrecognized modifier name: "+c)}return i&&(n="Alt-"+n),r&&(n="Ctrl-"+n),l&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function zl(s,e,t){return e.altKey&&(s="Alt-"+s),e.ctrlKey&&(s="Ctrl-"+s),e.metaKey&&(s="Meta-"+s),t!==!1&&e.shiftKey&&(s="Shift-"+s),s}const d3=Gi.default(Te.domEventHandlers({keydown(s,e){return oy(ry(e.state),s,e,"editor")}})),yf=je.define({enables:d3}),dg=new WeakMap;function ry(s){let e=s.facet(yf),t=dg.get(e);return t||dg.set(e,t=p3(e.reduce((n,i)=>n.concat(i),[]))),t}function f3(s,e,t){return oy(ry(s.state),e,s,t)}let ei=null;const h3=4e3;function p3(s,e=u3){let t=Object.create(null),n=Object.create(null),i=(o,l)=>{let a=n[o];if(a==null)n[o]=l;else if(a!=l)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},r=(o,l,a,c,u)=>{var d,h;let p=t[o]||(t[o]=Object.create(null)),y=l.split(/ (?!$)/).map(g=>c3(g,e));for(let g=1;g<y.length;g++){let j=y.slice(0,g).join(" ");i(j,!0),p[j]||(p[j]={preventDefault:!0,stopPropagation:!1,run:[B=>{let U=ei={view:B,prefix:j,scope:o};return setTimeout(()=>{ei==U&&(ei=null)},h3),!0}]})}let b=y.join(" ");i(b,!1);let x=p[b]||(p[b]={preventDefault:!1,stopPropagation:!1,run:((h=(d=p._any)===null||d===void 0?void 0:d.run)===null||h===void 0?void 0:h.slice())||[]});a&&x.run.push(a),c&&(x.preventDefault=!0),u&&(x.stopPropagation=!0)};for(let o of s){let l=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let c of l){let u=t[c]||(t[c]=Object.create(null));u._any||(u._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:d}=o;for(let h in u)u[h].run.push(p=>d(p,vd))}let a=o[e]||o.key;if(a)for(let c of l)r(c,a,o.run,o.preventDefault,o.stopPropagation),o.shift&&r(c,"Shift-"+a,o.shift,o.preventDefault,o.stopPropagation)}return t}let vd=null;function oy(s,e,t,n){vd=e;let i=L_(e),r=Ss(i,0),o=mn(r)==i.length&&i!=" ",l="",a=!1,c=!1,u=!1;ei&&ei.view==t&&ei.scope==n&&(l=ei.prefix+" ",Gv.indexOf(e.keyCode)<0&&(c=!0,ei=null));let d=new Set,h=x=>{if(x){for(let g of x.run)if(!d.has(g)&&(d.add(g),g(t)))return x.stopPropagation&&(u=!0),!0;x.preventDefault&&(x.stopPropagation&&(u=!0),c=!0)}return!1},p=s[n],y,b;return p&&(h(p[l+zl(i,e,!o)])?a=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Me.windows&&e.ctrlKey&&e.altKey)&&!(Me.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(y=fi[e.keyCode])&&y!=i?(h(p[l+zl(y,e,!0)])||e.shiftKey&&(b=Io[e.keyCode])!=i&&b!=y&&h(p[l+zl(b,e,!1)]))&&(a=!0):o&&e.shiftKey&&h(p[l+zl(i,e,!0)])&&(a=!0),!a&&h(p._any)&&(a=!0)),c&&(a=!0),a&&u&&e.stopPropagation(),vd=null,a}class ul{constructor(e,t,n,i,r){this.className=e,this.left=t,this.top=n,this.width=i,this.height=r}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,n){if(n.empty){let i=e.coordsAtPos(n.head,n.assoc||1);if(!i)return[];let r=ly(e);return[new ul(t,i.left-r.left,i.top-r.top,null,i.bottom-i.top)]}else return g3(e,t,n)}}function ly(s){let e=s.scrollDOM.getBoundingClientRect();return{left:(s.textDirection==Ct.LTR?e.left:e.right-s.scrollDOM.clientWidth*s.scaleX)-s.scrollDOM.scrollLeft*s.scaleX,top:e.top-s.scrollDOM.scrollTop*s.scaleY}}function fg(s,e,t,n){let i=s.coordsAtPos(e,t*2);if(!i)return n;let r=s.dom.getBoundingClientRect(),o=(i.top+i.bottom)/2,l=s.posAtCoords({x:r.left+1,y:o}),a=s.posAtCoords({x:r.right-1,y:o});return l==null||a==null?n:{from:Math.max(n.from,Math.min(l,a)),to:Math.min(n.to,Math.max(l,a))}}function g3(s,e,t){if(t.to<=s.viewport.from||t.from>=s.viewport.to)return[];let n=Math.max(t.from,s.viewport.from),i=Math.min(t.to,s.viewport.to),r=s.textDirection==Ct.LTR,o=s.contentDOM,l=o.getBoundingClientRect(),a=ly(s),c=o.querySelector(".cm-line"),u=c&&window.getComputedStyle(c),d=l.left+(u?parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)):0),h=l.right-(u?parseInt(u.paddingRight):0),p=fd(s,n,1),y=fd(s,i,-1),b=p.type==ys.Text?p:null,x=y.type==ys.Text?y:null;if(b&&(s.lineWrapping||p.widgetLineBreaks)&&(b=fg(s,n,1,b)),x&&(s.lineWrapping||y.widgetLineBreaks)&&(x=fg(s,i,-1,x)),b&&x&&b.from==x.from&&b.to==x.to)return j(B(t.from,t.to,b));{let I=b?B(t.from,null,b):U(p,!1),L=x?B(null,t.to,x):U(y,!0),_=[];return(b||p).to<(x||y).from-(b&&x?1:0)||p.widgetLineBreaks>1&&I.bottom+s.defaultLineHeight/2<L.top?_.push(g(d,I.bottom,h,L.top)):I.bottom<L.top&&s.elementAtHeight((I.bottom+L.top)/2).type==ys.Text&&(I.bottom=L.top=(I.bottom+L.top)/2),j(I).concat(_).concat(j(L))}function g(I,L,_,R){return new ul(e,I-a.left,L-a.top,_-I,R-L)}function j({top:I,bottom:L,horizontal:_}){let R=[];for(let W=0;W<_.length;W+=2)R.push(g(_[W],I,_[W+1],L));return R}function B(I,L,_){let R=1e9,W=-1e9,ce=[];function ne(ee,V,G,Q,ae){let me=s.coordsAtPos(ee,ee==_.to?-2:2),$e=s.coordsAtPos(G,G==_.from?2:-2);!me||!$e||(R=Math.min(me.top,$e.top,R),W=Math.max(me.bottom,$e.bottom,W),ae==Ct.LTR?ce.push(r&&V?d:me.left,r&&Q?h:$e.right):ce.push(!r&&Q?d:$e.left,!r&&V?h:me.right))}let N=I??_.from,le=L??_.to;for(let ee of s.visibleRanges)if(ee.to>N&&ee.from<le)for(let V=Math.max(ee.from,N),G=Math.min(ee.to,le);;){let Q=s.state.doc.lineAt(V);for(let ae of s.bidiSpans(Q)){let me=ae.from+Q.from,$e=ae.to+Q.from;if(me>=G)break;$e>V&&ne(Math.max(me,V),I==null&&me<=N,Math.min($e,G),L==null&&$e>=le,ae.dir)}if(V=Q.to+1,V>=G)break}return ce.length==0&&ne(N,I==null,le,L==null,s.textDirection),{top:R,bottom:W,horizontal:ce}}function U(I,L){let _=l.top+(L?I.top:I.bottom);return{top:_,bottom:_,horizontal:[]}}}function m3(s,e){return s.constructor==e.constructor&&s.eq(e)}class v3{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(ca)!=e.state.facet(ca)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,n=e.facet(ca);for(;t<n.length&&n[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,n)=>!m3(t,this.drawn[n]))){let t=this.dom.firstChild,n=0;for(let i of e)i.update&&t&&i.constructor&&this.drawn[n].constructor&&i.update(t,this.drawn[n])?(t=t.nextSibling,n++):this.dom.insertBefore(i.draw(),t);for(;t;){let i=t.nextSibling;t.remove(),t=i}this.drawn=e,Me.safari&&Me.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const ca=je.define();function ay(s){return[Vt.define(e=>new v3(e,s)),ca.of(s)]}const Uo=je.define({combine(s){return Sn(s,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function y3(s={}){return[Uo.of(s),b3,k3,x3,$v.of(!0)]}function uy(s){return s.startState.facet(Uo)!=s.state.facet(Uo)}const b3=ay({above:!0,markers(s){let{state:e}=s,t=e.facet(Uo),n=[];for(let i of e.selection.ranges){let r=i==e.selection.main;if(i.empty||t.drawRangeCursor){let o=r?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",l=i.empty?i:fe.cursor(i.head,i.head>i.anchor?-1:1);for(let a of ul.forRange(s,o,l))n.push(a)}}return n},update(s,e){s.transactions.some(n=>n.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=uy(s);return t&&hg(s.state,e),s.docChanged||s.selectionSet||t},mount(s,e){hg(e.state,s)},class:"cm-cursorLayer"});function hg(s,e){e.style.animationDuration=s.facet(Uo).cursorBlinkRate+"ms"}const k3=ay({above:!1,markers(s){return s.state.selection.ranges.map(e=>e.empty?[]:ul.forRange(s,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(s,e){return s.docChanged||s.selectionSet||s.viewportChanged||uy(s)},class:"cm-selectionLayer"}),x3=Gi.highest(Te.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),cy=Qe.define({map(s,e){return s==null?null:e.mapPos(s)}}),co=Yt.define({create(){return null},update(s,e){return s!=null&&(s=e.changes.mapPos(s)),e.effects.reduce((t,n)=>n.is(cy)?n.value:t,s)}}),w3=Vt.fromClass(class{constructor(s){this.view=s,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(s){var e;let t=s.state.field(co);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(s.startState.field(co)!=t||s.docChanged||s.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:s}=this,e=s.state.field(co),t=e!=null&&s.coordsAtPos(e);if(!t)return null;let n=s.scrollDOM.getBoundingClientRect();return{left:t.left-n.left+s.scrollDOM.scrollLeft*s.scaleX,top:t.top-n.top+s.scrollDOM.scrollTop*s.scaleY,height:t.bottom-t.top}}drawCursor(s){if(this.cursor){let{scaleX:e,scaleY:t}=this.view;s?(this.cursor.style.left=s.left/e+"px",this.cursor.style.top=s.top/t+"px",this.cursor.style.height=s.height/t+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(s){this.view.state.field(co)!=s&&this.view.dispatch({effects:cy.of(s)})}},{eventObservers:{dragover(s){this.setDropPos(this.view.posAtCoords({x:s.clientX,y:s.clientY}))},dragleave(s){(s.target==this.view.contentDOM||!this.view.contentDOM.contains(s.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function S3(){return[co,w3]}function pg(s,e,t,n,i){e.lastIndex=0;for(let r=s.iterRange(t,n),o=t,l;!r.next().done;o+=r.value.length)if(!r.lineBreak)for(;l=e.exec(r.value);)i(o+l.index,l)}function C3(s,e){let t=s.visibleRanges;if(t.length==1&&t[0].from==s.viewport.from&&t[0].to==s.viewport.to)return t;let n=[];for(let{from:i,to:r}of t)i=Math.max(s.state.doc.lineAt(i).from,i-e),r=Math.min(s.state.doc.lineAt(r).to,r+e),n.length&&n[n.length-1].to>=i?n[n.length-1].to=r:n.push({from:i,to:r});return n}class _3{constructor(e){const{regexp:t,decoration:n,decorate:i,boundary:r,maxLength:o=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,i)this.addMatch=(l,a,c,u)=>i(u,c,c+l[0].length,l,a);else if(typeof n=="function")this.addMatch=(l,a,c,u)=>{let d=n(l,a,c);d&&u(c,c+l[0].length,d)};else if(n)this.addMatch=(l,a,c,u)=>u(c,c+l[0].length,n);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=r,this.maxLength=o}createDeco(e){let t=new In,n=t.add.bind(t);for(let{from:i,to:r}of C3(e,this.maxLength))pg(e.state.doc,this.regexp,i,r,(o,l)=>this.addMatch(l,e,o,n));return t.finish()}updateDeco(e,t){let n=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((r,o,l,a)=>{a>=e.view.viewport.from&&l<=e.view.viewport.to&&(n=Math.min(l,n),i=Math.max(a,i))}),e.viewportMoved||i-n>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,t.map(e.changes),n,i):t}updateRange(e,t,n,i){for(let r of e.visibleRanges){let o=Math.max(r.from,n),l=Math.min(r.to,i);if(l>=o){let a=e.state.doc.lineAt(o),c=a.to<l?e.state.doc.lineAt(l):a,u=Math.max(r.from,a.from),d=Math.min(r.to,c.to);if(this.boundary){for(;o>a.from;o--)if(this.boundary.test(a.text[o-1-a.from])){u=o;break}for(;l<c.to;l++)if(this.boundary.test(c.text[l-c.from])){d=l;break}}let h=[],p,y=(b,x,g)=>h.push(g.range(b,x));if(a==c)for(this.regexp.lastIndex=u-a.from;(p=this.regexp.exec(a.text))&&p.index<d-a.from;)this.addMatch(p,e,p.index+a.from,y);else pg(e.state.doc,this.regexp,u,d,(b,x)=>this.addMatch(x,e,b,y));t=t.update({filterFrom:u,filterTo:d,filter:(b,x)=>b<u||x>d,add:h})}}return t}}const yd=/x/.unicode!=null?"gu":"g",A3=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,yd),M3={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Zu=null;function D3(){var s;if(Zu==null&&typeof document<"u"&&document.body){let e=document.body.style;Zu=((s=e.tabSize)!==null&&s!==void 0?s:e.MozTabSize)!=null}return Zu||!1}const da=je.define({combine(s){let e=Sn(s,{render:null,specialChars:A3,addSpecialChars:null});return(e.replaceTabs=!D3())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,yd)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,yd)),e}});function E3(s={}){return[da.of(s),T3()]}let gg=null;function T3(){return gg||(gg=Vt.fromClass(class{constructor(s){this.view=s,this.decorations=Fe.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(s.state.facet(da)),this.decorations=this.decorator.createDeco(s)}makeDecorator(s){return new _3({regexp:s.specialChars,decoration:(e,t,n)=>{let{doc:i}=t.state,r=Ss(e[0],0);if(r==9){let o=i.lineAt(n),l=t.state.tabSize,a=Nr(o.text,l,n-o.from);return Fe.replace({widget:new $3((l-a%l)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[r]||(this.decorationCache[r]=Fe.replace({widget:new P3(s,r)}))},boundary:s.replaceTabs?void 0:/[^]/})}update(s){let e=s.state.facet(da);s.startState.facet(da)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(s.view)):this.decorations=this.decorator.updateDeco(s,this.decorations)}},{decorations:s=>s.decorations}))}const j3="";function O3(s){return s>=32?j3:s==10?"":String.fromCharCode(9216+s)}class P3 extends mi{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=O3(this.code),n=e.state.phrase("Control character")+" "+(M3[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,n,t);if(i)return i;let r=document.createElement("span");return r.textContent=t,r.title=n,r.setAttribute("aria-label",n),r.className="cm-specialChar",r}ignoreEvent(){return!1}}class $3 extends mi{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function R3(){return V3}const L3=Fe.line({class:"cm-activeLine"}),V3=Vt.fromClass(class{constructor(s){this.decorations=this.getDeco(s)}update(s){(s.docChanged||s.selectionSet)&&(this.decorations=this.getDeco(s.view))}getDeco(s){let e=-1,t=[];for(let n of s.state.selection.ranges){let i=s.lineBlockAt(n.head);i.from>e&&(t.push(L3.range(i.from)),e=i.from)}return Fe.set(t)}},{decorations:s=>s.decorations}),bd=2e3;function B3(s,e,t){let n=Math.min(e.line,t.line),i=Math.max(e.line,t.line),r=[];if(e.off>bd||t.off>bd||e.col<0||t.col<0){let o=Math.min(e.off,t.off),l=Math.max(e.off,t.off);for(let a=n;a<=i;a++){let c=s.doc.line(a);c.length<=l&&r.push(fe.range(c.from+o,c.to+l))}}else{let o=Math.min(e.col,t.col),l=Math.max(e.col,t.col);for(let a=n;a<=i;a++){let c=s.doc.line(a),u=Qc(c.text,o,s.tabSize,!0);if(u<0)r.push(fe.cursor(c.to));else{let d=Qc(c.text,l,s.tabSize);r.push(fe.range(c.from+u,c.from+d))}}}return r}function I3(s,e){let t=s.coordsAtPos(s.viewport.from);return t?Math.round(Math.abs((t.left-e)/s.defaultCharacterWidth)):-1}function mg(s,e){let t=s.posAtCoords({x:e.clientX,y:e.clientY},!1),n=s.state.doc.lineAt(t),i=t-n.from,r=i>bd?-1:i==n.length?I3(s,e.clientX):Nr(n.text,s.state.tabSize,t-n.from);return{line:n.number,col:r,off:i}}function N3(s,e){let t=mg(s,e),n=s.state.selection;return t?{update(i){if(i.docChanged){let r=i.changes.mapPos(i.startState.doc.line(t.line).from),o=i.state.doc.lineAt(r);t={line:o.number,col:t.col,off:Math.min(t.off,o.length)},n=n.map(i.changes)}},get(i,r,o){let l=mg(s,i);if(!l)return n;let a=B3(s.state,t,l);return a.length?o?fe.create(a.concat(n.ranges)):fe.create(a):n}}:null}function F3(s){let e=(t=>t.altKey&&t.button==0);return Te.mouseSelectionStyle.of((t,n)=>e(n)?N3(t,n):null)}const z3={Alt:[18,s=>!!s.altKey],Control:[17,s=>!!s.ctrlKey],Shift:[16,s=>!!s.shiftKey],Meta:[91,s=>!!s.metaKey]},U3={style:"cursor: crosshair"};function H3(s={}){let[e,t]=z3[s.key||"Alt"],n=Vt.fromClass(class{constructor(i){this.view=i,this.isDown=!1}set(i){this.isDown!=i&&(this.isDown=i,this.view.update([]))}},{eventObservers:{keydown(i){this.set(i.keyCode==e||t(i))},keyup(i){(i.keyCode==e||!t(i))&&this.set(!1)},mousemove(i){this.set(t(i))}}});return[n,Te.contentAttributes.of(i=>{var r;return!((r=i.plugin(n))===null||r===void 0)&&r.isDown?U3:null})]}const so="-10000px";class dy{constructor(e,t,n,i){this.facet=t,this.createTooltipView=n,this.removeTooltipView=i,this.input=e.state.facet(t),this.tooltips=this.input.filter(o=>o);let r=null;this.tooltipViews=this.tooltips.map(o=>r=n(o,r))}update(e,t){var n;let i=e.state.facet(this.facet),r=i.filter(a=>a);if(i===this.input){for(let a of this.tooltipViews)a.update&&a.update(e);return!1}let o=[],l=t?[]:null;for(let a=0;a<r.length;a++){let c=r[a],u=-1;if(c){for(let d=0;d<this.tooltips.length;d++){let h=this.tooltips[d];h&&h.create==c.create&&(u=d)}if(u<0)o[a]=this.createTooltipView(c,a?o[a-1]:null),l&&(l[a]=!!c.above);else{let d=o[a]=this.tooltipViews[u];l&&(l[a]=t[u]),d.update&&d.update(e)}}}for(let a of this.tooltipViews)o.indexOf(a)<0&&(this.removeTooltipView(a),(n=a.destroy)===null||n===void 0||n.call(a));return t&&(l.forEach((a,c)=>t[c]=a),t.length=l.length),this.input=i,this.tooltips=r,this.tooltipViews=o,!0}}function q3(s){let e=s.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const ec=je.define({combine:s=>{var e,t,n;return{position:Me.ios?"absolute":((e=s.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=s.find(i=>i.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((n=s.find(i=>i.tooltipSpace))===null||n===void 0?void 0:n.tooltipSpace)||q3}}}),vg=new WeakMap,bf=Vt.fromClass(class{constructor(s){this.view=s,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=s.state.facet(ec);this.position=e.position,this.parent=e.parent,this.classes=s.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new dy(s,kf,(t,n)=>this.createTooltip(t,n),t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()}),this.above=this.manager.tooltips.map(t=>!!t.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),s.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let s of this.manager.tooltipViews)this.intersectionObserver.observe(s.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(s){s.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(s,this.above);e&&this.observeIntersection();let t=e||s.geometryChanged,n=s.state.facet(ec);if(n.position!=this.position&&!this.madeAbsolute){this.position=n.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;t=!0}if(n.parent!=this.parent){this.parent&&this.container.remove(),this.parent=n.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(s,e){let t=s.create(this.view),n=e?e.dom:null;if(t.dom.classList.add("cm-tooltip"),s.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let i=document.createElement("div");i.className="cm-tooltip-arrow",t.dom.appendChild(i)}return t.dom.style.position=this.position,t.dom.style.top=so,t.dom.style.left="0px",this.container.insertBefore(t.dom,n),t.mount&&t.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(t.dom),t}destroy(){var s,e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let n of this.manager.tooltipViews)n.dom.remove(),(s=n.destroy)===null||s===void 0||s.call(n);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let s=1,e=1,t=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:r}=this.manager.tooltipViews[0];if(Me.gecko)t=r.offsetParent!=this.container.ownerDocument.body;else if(r.style.top==so&&r.style.left=="0px"){let o=r.getBoundingClientRect();t=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}}if(t||this.position=="absolute")if(this.parent){let r=this.parent.getBoundingClientRect();r.width&&r.height&&(s=r.width/this.parent.offsetWidth,e=r.height/this.parent.offsetHeight)}else({scaleX:s,scaleY:e}=this.view.viewState);let n=this.view.scrollDOM.getBoundingClientRect(),i=pf(this.view);return{visible:{left:n.left+i.left,top:n.top+i.top,right:n.right-i.right,bottom:n.bottom-i.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((r,o)=>{let l=this.manager.tooltipViews[o];return l.getCoords?l.getCoords(r.pos):this.view.coordsAtPos(r.pos)}),size:this.manager.tooltipViews.map(({dom:r})=>r.getBoundingClientRect()),space:this.view.state.facet(ec).tooltipSpace(this.view),scaleX:s,scaleY:e,makeAbsolute:t}}writeMeasure(s){var e;if(s.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let l of this.manager.tooltipViews)l.dom.style.position="absolute"}let{visible:t,space:n,scaleX:i,scaleY:r}=s,o=[];for(let l=0;l<this.manager.tooltips.length;l++){let a=this.manager.tooltips[l],c=this.manager.tooltipViews[l],{dom:u}=c,d=s.pos[l],h=s.size[l];if(!d||a.clip!==!1&&(d.bottom<=Math.max(t.top,n.top)||d.top>=Math.min(t.bottom,n.bottom)||d.right<Math.max(t.left,n.left)-.1||d.left>Math.min(t.right,n.right)+.1)){u.style.top=so;continue}let p=a.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,y=p?7:0,b=h.right-h.left,x=(e=vg.get(c))!==null&&e!==void 0?e:h.bottom-h.top,g=c.offset||K3,j=this.view.textDirection==Ct.LTR,B=h.width>n.right-n.left?j?n.left:n.right-h.width:j?Math.max(n.left,Math.min(d.left-(p?14:0)+g.x,n.right-b)):Math.min(Math.max(n.left,d.left-b+(p?14:0)-g.x),n.right-b),U=this.above[l];!a.strictSide&&(U?d.top-x-y-g.y<n.top:d.bottom+x+y+g.y>n.bottom)&&U==n.bottom-d.bottom>d.top-n.top&&(U=this.above[l]=!U);let I=(U?d.top-n.top:n.bottom-d.bottom)-y;if(I<x&&c.resize!==!1){if(I<this.view.defaultLineHeight){u.style.top=so;continue}vg.set(c,x),u.style.height=(x=I)/r+"px"}else u.style.height&&(u.style.height="");let L=U?d.top-x-y-g.y:d.bottom+y+g.y,_=B+b;if(c.overlap!==!0)for(let R of o)R.left<_&&R.right>B&&R.top<L+x&&R.bottom>L&&(L=U?R.top-x-2-y:R.bottom+y+2);if(this.position=="absolute"?(u.style.top=(L-s.parent.top)/r+"px",yg(u,(B-s.parent.left)/i)):(u.style.top=L/r+"px",yg(u,B/i)),p){let R=d.left+(j?g.x:-g.x)-(B+14-7);p.style.left=R/i+"px"}c.overlap!==!0&&o.push({left:B,top:L,right:_,bottom:L+x}),u.classList.toggle("cm-tooltip-above",U),u.classList.toggle("cm-tooltip-below",!U),c.positioned&&c.positioned(s.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let s of this.manager.tooltipViews)s.dom.style.top=so}},{eventObservers:{scroll(){this.maybeMeasure()}}});function yg(s,e){let t=parseInt(s.style.left,10);(isNaN(t)||Math.abs(e-t)>1)&&(s.style.left=e+"px")}const W3=Te.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),K3={x:0,y:0},kf=je.define({enables:[bf,W3]}),Oa=je.define({combine:s=>s.reduce((e,t)=>e.concat(t),[])});class hu{static create(e){return new hu(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new dy(e,Oa,(t,n)=>this.createHostedView(t,n),t=>t.dom.remove())}createHostedView(e,t){let n=e.create(this.view);return n.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(n.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&n.mount&&n.mount(this.view),n}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}passProp(e){let t;for(let n of this.manager.tooltipViews){let i=n[e];if(i!==void 0){if(t===void 0)t=i;else if(t!==i)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const G3=kf.compute([Oa],s=>{let e=s.facet(Oa);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.map(t=>{var n;return(n=t.end)!==null&&n!==void 0?n:t.pos})),create:hu.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class J3{constructor(e,t,n,i,r){this.view=e,this.source=t,this.field=n,this.setHover=i,this.hoverTime=r,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,n=e.docView.nearest(t.target);if(!n)return;let i,r=1;if(n instanceof si)i=n.posAtStart;else{if(i=e.posAtCoords(t),i==null)return;let l=e.coordsAtPos(i);if(!l||t.y<l.top||t.y>l.bottom||t.x<l.left-e.defaultCharacterWidth||t.x>l.right+e.defaultCharacterWidth)return;let a=e.bidiSpans(e.state.doc.lineAt(i)).find(u=>u.from<=i&&u.to>=i),c=a&&a.dir==Ct.RTL?-1:1;r=t.x<l.left?-c:c}let o=this.source(e,i,r);if(o?.then){let l=this.pending={pos:i};o.then(a=>{this.pending==l&&(this.pending=null,a&&!(Array.isArray(a)&&!a.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(a)?a:[a])}))},a=>_s(e.state,a,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(bf),t=e?e.manager.tooltips.findIndex(n=>n.create==hu.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,n;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:i,tooltip:r}=this;if(i.length&&r&&!Q3(r.dom,e)||this.pending){let{pos:o}=i[0]||this.pending,l=(n=(t=i[0])===null||t===void 0?void 0:t.end)!==null&&n!==void 0?n:o;(o==l?this.view.posAtCoords(this.lastMove)!=o:!Y3(this.view,o,l,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:n}=this;n&&n.dom.contains(e.relatedTarget)?this.watchTooltipLeave(n.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=n=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(n.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const Ul=4;function Q3(s,e){let{left:t,right:n,top:i,bottom:r}=s.getBoundingClientRect(),o;if(o=s.querySelector(".cm-tooltip-arrow")){let l=o.getBoundingClientRect();i=Math.min(l.top,i),r=Math.max(l.bottom,r)}return e.clientX>=t-Ul&&e.clientX<=n+Ul&&e.clientY>=i-Ul&&e.clientY<=r+Ul}function Y3(s,e,t,n,i,r){let o=s.scrollDOM.getBoundingClientRect(),l=s.documentTop+s.documentPadding.top+s.contentHeight;if(o.left>n||o.right<n||o.top>i||Math.min(o.bottom,l)<i)return!1;let a=s.posAtCoords({x:n,y:i},!1);return a>=e&&a<=t}function X3(s,e={}){let t=Qe.define(),n=Yt.define({create(){return[]},update(i,r){if(i.length&&(e.hideOnChange&&(r.docChanged||r.selection)?i=[]:e.hideOn&&(i=i.filter(o=>!e.hideOn(r,o))),r.docChanged)){let o=[];for(let l of i){let a=r.changes.mapPos(l.pos,-1,vs.TrackDel);if(a!=null){let c=Object.assign(Object.create(null),l);c.pos=a,c.end!=null&&(c.end=r.changes.mapPos(c.end)),o.push(c)}}i=o}for(let o of r.effects)o.is(t)&&(i=o.value),o.is(Z3)&&(i=[]);return i},provide:i=>Oa.from(i)});return{active:n,extension:[n,Vt.define(i=>new J3(i,s,n,t,e.hoverTime||300)),G3]}}function fy(s,e){let t=s.plugin(bf);if(!t)return null;let n=t.manager.tooltips.indexOf(e);return n<0?null:t.manager.tooltipViews[n]}const Z3=Qe.define(),bg=je.define({combine(s){let e,t;for(let n of s)e=e||n.topContainer,t=t||n.bottomContainer;return{topContainer:e,bottomContainer:t}}});function Ho(s,e){let t=s.plugin(hy),n=t?t.specs.indexOf(e):-1;return n>-1?t.panels[n]:null}const hy=Vt.fromClass(class{constructor(s){this.input=s.state.facet(qo),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(s));let e=s.state.facet(bg);this.top=new Hl(s,!0,e.topContainer),this.bottom=new Hl(s,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(s){let e=s.state.facet(bg);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Hl(s.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Hl(s.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=s.state.facet(qo);if(t!=this.input){let n=t.filter(a=>a),i=[],r=[],o=[],l=[];for(let a of n){let c=this.specs.indexOf(a),u;c<0?(u=a(s.view),l.push(u)):(u=this.panels[c],u.update&&u.update(s)),i.push(u),(u.top?r:o).push(u)}this.specs=n,this.panels=i,this.top.sync(r),this.bottom.sync(o);for(let a of l)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}else for(let n of this.panels)n.update&&n.update(s)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:s=>Te.scrollMargins.of(e=>{let t=e.plugin(s);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class Hl{constructor(e,t,n){this.view=e,this.top=t,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=kg(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=kg(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function kg(s){let e=s.nextSibling;return s.remove(),e}const qo=je.define({enables:hy});class Fn extends Fi{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Fn.prototype.elementClass="";Fn.prototype.toDOM=void 0;Fn.prototype.mapMode=vs.TrackBefore;Fn.prototype.startSide=Fn.prototype.endSide=-1;Fn.prototype.point=!0;const fa=je.define(),eA=je.define(),tA={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>it.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},Ao=je.define();function sA(s){return[py(),Ao.of({...tA,...s})]}const xg=je.define({combine:s=>s.some(e=>e)});function py(s){return[nA]}const nA=Vt.fromClass(class{constructor(s){this.view=s,this.domAfter=null,this.prevViewport=s.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=s.state.facet(Ao).map(e=>new Sg(s,e)),this.fixed=!s.state.facet(xg);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),s.scrollDOM.insertBefore(this.dom,s.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(s){if(this.updateGutters(s)){let e=this.prevViewport,t=s.view.viewport,n=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(n<(t.to-t.from)*.8)}if(s.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(xg)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=s.view.viewport}syncGutters(s){let e=this.dom.nextSibling;s&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let t=it.iter(this.view.state.facet(fa),this.view.viewport.from),n=[],i=this.gutters.map(r=>new iA(r,this.view.viewport,-this.view.documentPadding.top));for(let r of this.view.viewportLineBlocks)if(n.length&&(n=[]),Array.isArray(r.type)){let o=!0;for(let l of r.type)if(l.type==ys.Text&&o){kd(t,n,l.from);for(let a of i)a.line(this.view,l,n);o=!1}else if(l.widget)for(let a of i)a.widget(this.view,l)}else if(r.type==ys.Text){kd(t,n,r.from);for(let o of i)o.line(this.view,r,n)}else if(r.widget)for(let o of i)o.widget(this.view,r);for(let r of i)r.finish();s&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(s){let e=s.startState.facet(Ao),t=s.state.facet(Ao),n=s.docChanged||s.heightChanged||s.viewportChanged||!it.eq(s.startState.facet(fa),s.state.facet(fa),s.view.viewport.from,s.view.viewport.to);if(e==t)for(let i of this.gutters)i.update(s)&&(n=!0);else{n=!0;let i=[];for(let r of t){let o=e.indexOf(r);o<0?i.push(new Sg(this.view,r)):(this.gutters[o].update(s),i.push(this.gutters[o]))}for(let r of this.gutters)r.dom.remove(),i.indexOf(r)<0&&r.destroy();for(let r of i)r.config.side=="after"?this.getDOMAfter().appendChild(r.dom):this.dom.appendChild(r.dom);this.gutters=i}return n}destroy(){for(let s of this.gutters)s.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:s=>Te.scrollMargins.of(e=>{let t=e.plugin(s);if(!t||t.gutters.length==0||!t.fixed)return null;let n=t.dom.offsetWidth*e.scaleX,i=t.domAfter?t.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==Ct.LTR?{left:n,right:i}:{right:n,left:i}})});function wg(s){return Array.isArray(s)?s:[s]}function kd(s,e,t){for(;s.value&&s.from<=t;)s.from==t&&e.push(s.value),s.next()}class iA{constructor(e,t,n){this.gutter=e,this.height=n,this.i=0,this.cursor=it.iter(e.markers,t.from)}addElement(e,t,n){let{gutter:i}=this,r=(t.top-this.height)/e.scaleY,o=t.height/e.scaleY;if(this.i==i.elements.length){let l=new gy(e,o,r,n);i.elements.push(l),i.dom.appendChild(l.dom)}else i.elements[this.i].update(e,o,r,n);this.height=t.bottom,this.i++}line(e,t,n){let i=[];kd(this.cursor,i,t.from),n.length&&(i=i.concat(n));let r=this.gutter.config.lineMarker(e,t,i);r&&i.unshift(r);let o=this.gutter;i.length==0&&!o.config.renderEmptyElements||this.addElement(e,t,i)}widget(e,t){let n=this.gutter.config.widgetMarker(e,t.widget,t),i=n?[n]:null;for(let r of e.state.facet(eA)){let o=r(e,t.widget,t);o&&(i||(i=[])).push(o)}i&&this.addElement(e,t,i)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class Sg{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let n in t.domEventHandlers)this.dom.addEventListener(n,i=>{let r=i.target,o;if(r!=this.dom&&this.dom.contains(r)){for(;r.parentNode!=this.dom;)r=r.parentNode;let a=r.getBoundingClientRect();o=(a.top+a.bottom)/2}else o=i.clientY;let l=e.lineBlockAtHeight(o-e.documentTop);t.domEventHandlers[n](e,l,i)&&i.preventDefault()});this.markers=wg(t.markers(e)),t.initialSpacer&&(this.spacer=new gy(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=wg(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let n=e.view.viewport;return!it.eq(this.markers,t,n.from,n.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class gy{constructor(e,t,n,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,n,i)}update(e,t,n,i){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),rA(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,t){let n="cm-gutterElement",i=this.dom.firstChild;for(let r=0,o=0;;){let l=o,a=r<t.length?t[r++]:null,c=!1;if(a){let u=a.elementClass;u&&(n+=" "+u);for(let d=o;d<this.markers.length;d++)if(this.markers[d].compare(a)){l=d,c=!0;break}}else l=this.markers.length;for(;o<l;){let u=this.markers[o++];if(u.toDOM){u.destroy(i);let d=i.nextSibling;i.remove(),i=d}}if(!a)break;a.toDOM&&(c?i=i.nextSibling:this.dom.insertBefore(a.toDOM(e),i)),c&&o++}this.dom.className=n,this.markers=t}destroy(){this.setMarkers(null,[])}}function rA(s,e){if(s.length!=e.length)return!1;for(let t=0;t<s.length;t++)if(!s[t].compare(e[t]))return!1;return!0}const oA=je.define(),lA=je.define(),lr=je.define({combine(s){return Sn(s,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let n=Object.assign({},e);for(let i in t){let r=n[i],o=t[i];n[i]=r?(l,a,c)=>r(l,a,c)||o(l,a,c):o}return n}})}});class tc extends Fn{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function sc(s,e){return s.state.facet(lr).formatNumber(e,s.state)}const aA=Ao.compute([lr],s=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(oA)},lineMarker(e,t,n){return n.some(i=>i.toDOM)?null:new tc(sc(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,n)=>{for(let i of e.state.facet(lA)){let r=i(e,t,n);if(r)return r}return null},lineMarkerChange:e=>e.startState.facet(lr)!=e.state.facet(lr),initialSpacer(e){return new tc(sc(e,Cg(e.state.doc.lines)))},updateSpacer(e,t){let n=sc(t.view,Cg(t.view.state.doc.lines));return n==e.number?e:new tc(n)},domEventHandlers:s.facet(lr).domEventHandlers,side:"before"}));function uA(s={}){return[lr.of(s),py(),aA]}function Cg(s){let e=9;for(;e<s;)e=e*10+9;return e}const cA=new class extends Fn{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},dA=fa.compute(["selection"],s=>{let e=[],t=-1;for(let n of s.selection.ranges){let i=s.doc.lineAt(n.head).from;i>t&&(t=i,e.push(cA.range(i)))}return it.of(e)});function fA(){return dA}const hA=1024;let pA=0;class nc{constructor(e,t){this.from=e,this.to=t}}class et{constructor(e={}){this.id=pA++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Ds.match(e)),t=>{let n=e(t);return n===void 0?null:[this,n]}}}et.closedBy=new et({deserialize:s=>s.split(" ")});et.openedBy=new et({deserialize:s=>s.split(" ")});et.group=new et({deserialize:s=>s.split(" ")});et.isolate=new et({deserialize:s=>{if(s&&s!="rtl"&&s!="ltr"&&s!="auto")throw new RangeError("Invalid value for isolate: "+s);return s||"auto"}});et.contextHash=new et({perNode:!0});et.lookAhead=new et({perNode:!0});et.mounted=new et({perNode:!0});class Pa{constructor(e,t,n){this.tree=e,this.overlay=t,this.parser=n}static get(e){return e&&e.props&&e.props[et.mounted.id]}}const gA=Object.create(null);class Ds{constructor(e,t,n,i=0){this.name=e,this.props=t,this.id=n,this.flags=i}static define(e){let t=e.props&&e.props.length?Object.create(null):gA,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new Ds(e.name||"",t,e.id,n);if(e.props){for(let r of e.props)if(Array.isArray(r)||(r=r(i)),r){if(r[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[r[0].id]=r[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(et.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let n in e)for(let i of n.split(" "))t[i]=e[n];return n=>{for(let i=n.prop(et.group),r=-1;r<(i?i.length:0);r++){let o=t[r<0?n.name:i[r]];if(o)return o}}}}Ds.none=new Ds("",Object.create(null),0,8);class xf{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let n of this.types){let i=null;for(let r of e){let o=r(n);if(o){i||(i=Object.assign({},n.props));let l=o[1],a=o[0];a.combine&&a.id in i&&(l=a.combine(i[a.id],l)),i[a.id]=l}}t.push(i?new Ds(n.name,i,n.id,n.flags):n)}return new xf(t)}}const ql=new WeakMap,_g=new WeakMap;var Gt;(function(s){s[s.ExcludeBuffers=1]="ExcludeBuffers",s[s.IncludeAnonymous=2]="IncludeAnonymous",s[s.IgnoreMounts=4]="IgnoreMounts",s[s.IgnoreOverlays=8]="IgnoreOverlays"})(Gt||(Gt={}));class Dt{constructor(e,t,n,i,r){if(this.type=e,this.children=t,this.positions=n,this.length=i,this.props=null,r&&r.length){this.props=Object.create(null);for(let[o,l]of r)this.props[typeof o=="number"?o:o.id]=l}}toString(){let e=Pa.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let n of this.children){let i=n.toString();i&&(t&&(t+=","),t+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new wd(this.topNode,e)}cursorAt(e,t=0,n=0){let i=ql.get(this)||this.topNode,r=new wd(i);return r.moveTo(e,t),ql.set(this,r._tree),r}get topNode(){return new qs(this,0,0,null)}resolve(e,t=0){let n=Wo(ql.get(this)||this.topNode,e,t,!1);return ql.set(this,n),n}resolveInner(e,t=0){let n=Wo(_g.get(this)||this.topNode,e,t,!0);return _g.set(this,n),n}resolveStack(e,t=0){return yA(this,e,t)}iterate(e){let{enter:t,leave:n,from:i=0,to:r=this.length}=e,o=e.mode||0,l=(o&Gt.IncludeAnonymous)>0;for(let a=this.cursor(o|Gt.IncludeAnonymous);;){let c=!1;if(a.from<=r&&a.to>=i&&(!l&&a.type.isAnonymous||t(a)!==!1)){if(a.firstChild())continue;c=!0}for(;c&&n&&(l||!a.type.isAnonymous)&&n(a),!a.nextSibling();){if(!a.parent())return;c=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:Cf(Ds.none,this.children,this.positions,0,this.children.length,0,this.length,(t,n,i)=>new Dt(this.type,t,n,i,this.propValues),e.makeTree||((t,n,i)=>new Dt(Ds.none,t,n,i)))}static build(e){return bA(e)}}Dt.empty=new Dt(Ds.none,[],[],0);class wf{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new wf(this.buffer,this.index)}}class pi{constructor(e,t,n){this.buffer=e,this.length=t,this.set=n}get type(){return Ds.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],n=this.buffer[e+3],i=this.set.types[t],r=i.name;if(/\W/.test(r)&&!i.isError&&(r=JSON.stringify(r)),e+=4,n==e)return r;let o=[];for(;e<n;)o.push(this.childString(e)),e=this.buffer[e+3];return r+"("+o.join(",")+")"}findChild(e,t,n,i,r){let{buffer:o}=this,l=-1;for(let a=e;a!=t&&!(my(r,i,o[a+1],o[a+2])&&(l=a,n>0));a=o[a+3]);return l}slice(e,t,n){let i=this.buffer,r=new Uint16Array(t-e),o=0;for(let l=e,a=0;l<t;){r[a++]=i[l++],r[a++]=i[l++]-n;let c=r[a++]=i[l++]-n;r[a++]=i[l++]-e,o=Math.max(o,c)}return new pi(r,o,this.set)}}function my(s,e,t,n){switch(s){case-2:return t<e;case-1:return n>=e&&t<e;case 0:return t<e&&n>e;case 1:return t<=e&&n>e;case 2:return n>e;case 4:return!0}}function Wo(s,e,t,n){for(var i;s.from==s.to||(t<1?s.from>=e:s.from>e)||(t>-1?s.to<=e:s.to<e);){let o=!n&&s instanceof qs&&s.index<0?null:s.parent;if(!o)return s;s=o}let r=n?0:Gt.IgnoreOverlays;if(n)for(let o=s,l=o.parent;l;o=l,l=o.parent)o instanceof qs&&o.index<0&&((i=l.enter(e,t,r))===null||i===void 0?void 0:i.from)!=o.from&&(s=l);for(;;){let o=s.enter(e,t,r);if(!o)return s;s=o}}class vy{cursor(e=0){return new wd(this,e)}getChild(e,t=null,n=null){let i=Ag(this,e,t,n);return i.length?i[0]:null}getChildren(e,t=null,n=null){return Ag(this,e,t,n)}resolve(e,t=0){return Wo(this,e,t,!1)}resolveInner(e,t=0){return Wo(this,e,t,!0)}matchContext(e){return xd(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),n=this;for(;t;){let i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(n=t,t=i.prevSibling):t=i}return n}get node(){return this}get next(){return this.parent}}class qs extends vy{constructor(e,t,n,i){super(),this._tree=e,this.from=t,this.index=n,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,n,i,r=0){for(let o=this;;){for(let{children:l,positions:a}=o._tree,c=t>0?l.length:-1;e!=c;e+=t){let u=l[e],d=a[e]+o.from;if(my(i,n,d,d+u.length)){if(u instanceof pi){if(r&Gt.ExcludeBuffers)continue;let h=u.findChild(0,u.buffer.length,t,n-d,i);if(h>-1)return new ii(new mA(o,u,e,d),null,h)}else if(r&Gt.IncludeAnonymous||!u.type.isAnonymous||Sf(u)){let h;if(!(r&Gt.IgnoreMounts)&&(h=Pa.get(u))&&!h.overlay)return new qs(h.tree,d,e,o);let p=new qs(u,d,e,o);return r&Gt.IncludeAnonymous||!p.type.isAnonymous?p:p.nextChild(t<0?u.children.length-1:0,t,n,i)}}}if(r&Gt.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,n=0){let i;if(!(n&Gt.IgnoreOverlays)&&(i=Pa.get(this._tree))&&i.overlay){let r=e-this.from;for(let{from:o,to:l}of i.overlay)if((t>0?o<=r:o<r)&&(t<0?l>=r:l>r))return new qs(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,n)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function Ag(s,e,t,n){let i=s.cursor(),r=[];if(!i.firstChild())return r;if(t!=null){for(let o=!1;!o;)if(o=i.type.is(t),!i.nextSibling())return r}for(;;){if(n!=null&&i.type.is(n))return r;if(i.type.is(e)&&r.push(i.node),!i.nextSibling())return n==null?r:[]}}function xd(s,e,t=e.length-1){for(let n=s;t>=0;n=n.parent){if(!n)return!1;if(!n.type.isAnonymous){if(e[t]&&e[t]!=n.name)return!1;t--}}return!0}class mA{constructor(e,t,n,i){this.parent=e,this.buffer=t,this.index=n,this.start=i}}class ii extends vy{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,n){super(),this.context=e,this._parent=t,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}child(e,t,n){let{buffer:i}=this.context,r=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.context.start,n);return r<0?null:new ii(this.context,this,r)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,n=0){if(n&Gt.ExcludeBuffers)return null;let{buffer:i}=this.context,r=i.findChild(this.index+4,i.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return r<0?null:new ii(this.context,this,r)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new ii(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new ii(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:n}=this.context,i=this.index+4,r=n.buffer[this.index+3];if(r>i){let o=n.buffer[this.index+1];e.push(n.slice(i,r,o)),t.push(0)}return new Dt(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function yy(s){if(!s.length)return null;let e=0,t=s[0];for(let r=1;r<s.length;r++){let o=s[r];(o.from>t.from||o.to<t.to)&&(t=o,e=r)}let n=t instanceof qs&&t.index<0?null:t.parent,i=s.slice();return n?i[e]=n:i.splice(e,1),new vA(i,t)}class vA{constructor(e,t){this.heads=e,this.node=t}get next(){return yy(this.heads)}}function yA(s,e,t){let n=s.resolveInner(e,t),i=null;for(let r=n instanceof qs?n:n.context.parent;r;r=r.parent)if(r.index<0){let o=r.parent;(i||(i=[n])).push(o.resolve(e,t)),r=o}else{let o=Pa.get(r.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let l=new qs(o.tree,o.overlay[0].from+r.from,-1,r);(i||(i=[n])).push(Wo(l,e,t,!1))}}return i?yy(i):n}class wd{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof qs)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let n=e._parent;n;n=n._parent)this.stack.unshift(n.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:n,buffer:i}=this.buffer;return this.type=t||i.set.types[i.buffer[e]],this.from=n+i.buffer[e+1],this.to=n+i.buffer[e+2],!0}yield(e){return e?e instanceof qs?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,n,this.mode));let{buffer:i}=this.buffer,r=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.buffer.start,n);return r<0?!1:(this.stack.push(this.index),this.yieldBuf(r))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,n=this.mode){return this.buffer?n&Gt.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Gt.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Gt.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,n=this.stack.length-1;if(e<0){let i=n<0?0:this.stack[n]+4;if(this.index!=i)return this.yieldBuf(t.findChild(i,this.index,-1,0,4))}else{let i=t.buffer[this.index+3];if(i<(n<0?t.buffer.length:t.buffer[this.stack[n]+3]))return this.yieldBuf(i)}return n<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,n,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let r=0;r<this.index;r++)if(i.buffer.buffer[r+3]<this.index)return!1;({index:t,parent:n}=i)}else({index:t,_parent:n}=this._tree);for(;n;{index:t,_parent:n}=n)if(t>-1)for(let r=t+e,o=e<0?-1:n._tree.children.length;r!=o;r+=e){let l=n._tree.children[r];if(this.mode&Gt.IncludeAnonymous||l instanceof pi||!l.type.isAnonymous||Sf(l))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,n=0;if(e&&e.context==this.buffer)e:for(let i=this.index,r=this.stack.length;r>=0;){for(let o=e;o;o=o._parent)if(o.index==i){if(i==this.index)return o;t=o,n=r+1;break e}i=this.stack[--r]}for(let i=n;i<this.stack.length;i++)t=new ii(this.buffer,t,this.stack[i]);return this.bufferNode=new ii(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let n=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){n++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&t&&t(this),i=this.type.isAnonymous,!n)return;if(this.nextSibling())break;this.parent(),n--,i=!0}}}matchContext(e){if(!this.buffer)return xd(this.node.parent,e);let{buffer:t}=this.buffer,{types:n}=t.set;for(let i=e.length-1,r=this.stack.length-1;i>=0;r--){if(r<0)return xd(this._tree,e,i);let o=n[t.buffer[this.stack[r]]];if(!o.isAnonymous){if(e[i]&&e[i]!=o.name)return!1;i--}}return!0}}function Sf(s){return s.children.some(e=>e instanceof pi||!e.type.isAnonymous||Sf(e))}function bA(s){var e;let{buffer:t,nodeSet:n,maxBufferLength:i=hA,reused:r=[],minRepeatType:o=n.types.length}=s,l=Array.isArray(t)?new wf(t,t.length):t,a=n.types,c=0,u=0;function d(I,L,_,R,W,ce){let{id:ne,start:N,end:le,size:ee}=l,V=u,G=c;if(ee<0)if(l.next(),ee==-1){let Re=r[ne];_.push(Re),R.push(N-I);return}else if(ee==-3){c=ne;return}else if(ee==-4){u=ne;return}else throw new RangeError(`Unrecognized record size: ${ee}`);let Q=a[ne],ae,me,$e=N-I;if(le-N<=i&&(me=x(l.pos-L,W))){let Re=new Uint16Array(me.size-me.skip),Oe=l.pos-me.size,Ue=Re.length;for(;l.pos>Oe;)Ue=g(me.start,Re,Ue);ae=new pi(Re,le-me.start,n),$e=me.start-I}else{let Re=l.pos-ee;l.next();let Oe=[],Ue=[],ot=ne>=o?ne:-1,st=0,Xe=le;for(;l.pos>Re;)ot>=0&&l.id==ot&&l.size>=0?(l.end<=Xe-i&&(y(Oe,Ue,N,st,l.end,Xe,ot,V,G),st=Oe.length,Xe=l.end),l.next()):ce>2500?h(N,Re,Oe,Ue):d(N,Re,Oe,Ue,ot,ce+1);if(ot>=0&&st>0&&st<Oe.length&&y(Oe,Ue,N,st,N,Xe,ot,V,G),Oe.reverse(),Ue.reverse(),ot>-1&&st>0){let re=p(Q,G);ae=Cf(Q,Oe,Ue,0,Oe.length,0,le-N,re,re)}else ae=b(Q,Oe,Ue,le-N,V-le,G)}_.push(ae),R.push($e)}function h(I,L,_,R){let W=[],ce=0,ne=-1;for(;l.pos>L;){let{id:N,start:le,end:ee,size:V}=l;if(V>4)l.next();else{if(ne>-1&&le<ne)break;ne<0&&(ne=ee-i),W.push(N,le,ee),ce++,l.next()}}if(ce){let N=new Uint16Array(ce*4),le=W[W.length-2];for(let ee=W.length-3,V=0;ee>=0;ee-=3)N[V++]=W[ee],N[V++]=W[ee+1]-le,N[V++]=W[ee+2]-le,N[V++]=V;_.push(new pi(N,W[2]-le,n)),R.push(le-I)}}function p(I,L){return(_,R,W)=>{let ce=0,ne=_.length-1,N,le;if(ne>=0&&(N=_[ne])instanceof Dt){if(!ne&&N.type==I&&N.length==W)return N;(le=N.prop(et.lookAhead))&&(ce=R[ne]+N.length+le)}return b(I,_,R,W,ce,L)}}function y(I,L,_,R,W,ce,ne,N,le){let ee=[],V=[];for(;I.length>R;)ee.push(I.pop()),V.push(L.pop()+_-W);I.push(b(n.types[ne],ee,V,ce-W,N-ce,le)),L.push(W-_)}function b(I,L,_,R,W,ce,ne){if(ce){let N=[et.contextHash,ce];ne=ne?[N].concat(ne):[N]}if(W>25){let N=[et.lookAhead,W];ne=ne?[N].concat(ne):[N]}return new Dt(I,L,_,R,ne)}function x(I,L){let _=l.fork(),R=0,W=0,ce=0,ne=_.end-i,N={size:0,start:0,skip:0};e:for(let le=_.pos-I;_.pos>le;){let ee=_.size;if(_.id==L&&ee>=0){N.size=R,N.start=W,N.skip=ce,ce+=4,R+=4,_.next();continue}let V=_.pos-ee;if(ee<0||V<le||_.start<ne)break;let G=_.id>=o?4:0,Q=_.start;for(_.next();_.pos>V;){if(_.size<0)if(_.size==-3)G+=4;else break e;else _.id>=o&&(G+=4);_.next()}W=Q,R+=ee,ce+=G}return(L<0||R==I)&&(N.size=R,N.start=W,N.skip=ce),N.size>4?N:void 0}function g(I,L,_){let{id:R,start:W,end:ce,size:ne}=l;if(l.next(),ne>=0&&R<o){let N=_;if(ne>4){let le=l.pos-(ne-4);for(;l.pos>le;)_=g(I,L,_)}L[--_]=N,L[--_]=ce-I,L[--_]=W-I,L[--_]=R}else ne==-3?c=R:ne==-4&&(u=R);return _}let j=[],B=[];for(;l.pos>0;)d(s.start||0,s.bufferStart||0,j,B,-1,0);let U=(e=s.length)!==null&&e!==void 0?e:j.length?B[0]+j[0].length:0;return new Dt(a[s.topID],j.reverse(),B.reverse(),U)}const Mg=new WeakMap;function ha(s,e){if(!s.isAnonymous||e instanceof pi||e.type!=s)return 1;let t=Mg.get(e);if(t==null){t=1;for(let n of e.children){if(n.type!=s||!(n instanceof Dt)){t=1;break}t+=ha(s,n)}Mg.set(e,t)}return t}function Cf(s,e,t,n,i,r,o,l,a){let c=0;for(let y=n;y<i;y++)c+=ha(s,e[y]);let u=Math.ceil(c*1.5/8),d=[],h=[];function p(y,b,x,g,j){for(let B=x;B<g;){let U=B,I=b[B],L=ha(s,y[B]);for(B++;B<g;B++){let _=ha(s,y[B]);if(L+_>=u)break;L+=_}if(B==U+1){if(L>u){let _=y[U];p(_.children,_.positions,0,_.children.length,b[U]+j);continue}d.push(y[U])}else{let _=b[B-1]+y[B-1].length-I;d.push(Cf(s,y,b,U,B,I,_,null,a))}h.push(I+j-r)}}return p(e,t,n,i,0),(l||a)(d,h,o)}class Li{constructor(e,t,n,i,r=!1,o=!1){this.from=e,this.to=t,this.tree=n,this.offset=i,this.open=(r?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],n=!1){let i=[new Li(0,e.length,e,0,!1,n)];for(let r of t)r.to>e.length&&i.push(r);return i}static applyChanges(e,t,n=128){if(!t.length)return e;let i=[],r=1,o=e.length?e[0]:null;for(let l=0,a=0,c=0;;l++){let u=l<t.length?t[l]:null,d=u?u.fromA:1e9;if(d-a>=n)for(;o&&o.from<d;){let h=o;if(a>=h.from||d<=h.to||c){let p=Math.max(h.from,a)-c,y=Math.min(h.to,d)-c;h=p>=y?null:new Li(p,y,h.tree,h.offset+c,l>0,!!u)}if(h&&i.push(h),o.to>d)break;o=r<e.length?e[r++]:null}if(!u)break;a=u.toA,c=u.toA-u.toB}return i}}class by{startParse(e,t,n){return typeof e=="string"&&(e=new kA(e)),n=n?n.length?n.map(i=>new nc(i.from,i.to)):[new nc(0,0)]:[new nc(0,e.length)],this.createParse(e,t||[],n)}parse(e,t,n){let i=this.startParse(e,t,n);for(;;){let r=i.advance();if(r)return r}}}class kA{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new et({perNode:!0});let xA=0;class Vs{constructor(e,t,n,i){this.name=e,this.set=t,this.base=n,this.modified=i,this.id=xA++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let n=typeof e=="string"?e:"?";if(e instanceof Vs&&(t=e),t?.base)throw new Error("Can not derive from a modified tag");let i=new Vs(n,[],null,[]);if(i.set.push(i),t)for(let r of t.set)i.set.push(r);return i}static defineModifier(e){let t=new $a(e);return n=>n.modified.indexOf(t)>-1?n:$a.get(n.base||n,n.modified.concat(t).sort((i,r)=>i.id-r.id))}}let wA=0;class $a{constructor(e){this.name=e,this.instances=[],this.id=wA++}static get(e,t){if(!t.length)return e;let n=t[0].instances.find(l=>l.base==e&&SA(t,l.modified));if(n)return n;let i=[],r=new Vs(e.name,i,e,t);for(let l of t)l.instances.push(r);let o=CA(t);for(let l of e.set)if(!l.modified.length)for(let a of o)i.push($a.get(l,a));return r}}function SA(s,e){return s.length==e.length&&s.every((t,n)=>t==e[n])}function CA(s){let e=[[]];for(let t=0;t<s.length;t++)for(let n=0,i=e.length;n<i;n++)e.push(e[n].concat(s[t]));return e.sort((t,n)=>n.length-t.length)}function _A(s){let e=Object.create(null);for(let t in s){let n=s[t];Array.isArray(n)||(n=[n]);for(let i of t.split(" "))if(i){let r=[],o=2,l=i;for(let d=0;;){if(l=="..."&&d>0&&d+3==i.length){o=1;break}let h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!h)throw new RangeError("Invalid path: "+i);if(r.push(h[0]=="*"?"":h[0][0]=='"'?JSON.parse(h[0]):h[0]),d+=h[0].length,d==i.length)break;let p=i[d++];if(d==i.length&&p=="!"){o=0;break}if(p!="/")throw new RangeError("Invalid path: "+i);l=i.slice(d)}let a=r.length-1,c=r[a];if(!c)throw new RangeError("Invalid path: "+i);let u=new Ko(n,o,a>0?r.slice(0,a):null);e[c]=u.sort(e[c])}}return ky.add(e)}const ky=new et({combine(s,e){let t,n,i;for(;s||e;){if(!s||e&&s.depth>=e.depth?(i=e,e=e.next):(i=s,s=s.next),t&&t.mode==i.mode&&!i.context&&!t.context)continue;let r=new Ko(i.tags,i.mode,i.context);t?t.next=r:n=r,t=r}return n}});class Ko{constructor(e,t,n,i){this.tags=e,this.mode=t,this.context=n,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Ko.empty=new Ko([],2,null);function xy(s,e){let t=Object.create(null);for(let r of s)if(!Array.isArray(r.tag))t[r.tag.id]=r.class;else for(let o of r.tag)t[o.id]=r.class;let{scope:n,all:i=null}=e||{};return{style:r=>{let o=i;for(let l of r)for(let a of l.set){let c=t[a.id];if(c){o=o?o+" "+c:c;break}}return o},scope:n}}function AA(s,e){let t=null;for(let n of s){let i=n.style(e);i&&(t=t?t+" "+i:i)}return t}function MA(s,e,t,n=0,i=s.length){let r=new DA(n,Array.isArray(e)?e:[e],t);r.highlightRange(s.cursor(),n,i,"",r.highlighters),r.flush(i)}class DA{constructor(e,t,n){this.at=e,this.highlighters=t,this.span=n,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,n,i,r){let{type:o,from:l,to:a}=e;if(l>=n||a<=t)return;o.isTop&&(r=this.highlighters.filter(p=>!p.scope||p.scope(o)));let c=i,u=EA(e)||Ko.empty,d=AA(r,u.tags);if(d&&(c&&(c+=" "),c+=d,u.mode==1&&(i+=(i?" ":"")+d)),this.startSpan(Math.max(t,l),c),u.opaque)return;let h=e.tree&&e.tree.prop(et.mounted);if(h&&h.overlay){let p=e.node.enter(h.overlay[0].from+l,1),y=this.highlighters.filter(x=>!x.scope||x.scope(h.tree.type)),b=e.firstChild();for(let x=0,g=l;;x++){let j=x<h.overlay.length?h.overlay[x]:null,B=j?j.from+l:a,U=Math.max(t,g),I=Math.min(n,B);if(U<I&&b)for(;e.from<I&&(this.highlightRange(e,U,I,i,r),this.startSpan(Math.min(I,e.to),c),!(e.to>=B||!e.nextSibling())););if(!j||B>n)break;g=j.to+l,g>t&&(this.highlightRange(p.cursor(),Math.max(t,j.from+l),Math.min(n,g),"",y),this.startSpan(Math.min(n,g),c))}b&&e.parent()}else if(e.firstChild()){h&&(i="");do if(!(e.to<=t)){if(e.from>=n)break;this.highlightRange(e,t,n,i,r),this.startSpan(Math.min(n,e.to),c)}while(e.nextSibling());e.parent()}}}function EA(s){let e=s.type.prop(ky);for(;e&&e.context&&!s.matchContext(e.context);)e=e.next;return e||null}const Ce=Vs.define,Wl=Ce(),Xn=Ce(),Dg=Ce(Xn),Eg=Ce(Xn),Zn=Ce(),Kl=Ce(Zn),ic=Ce(Zn),fn=Ce(),Ci=Ce(fn),cn=Ce(),dn=Ce(),Sd=Ce(),no=Ce(Sd),Gl=Ce(),_e={comment:Wl,lineComment:Ce(Wl),blockComment:Ce(Wl),docComment:Ce(Wl),name:Xn,variableName:Ce(Xn),typeName:Dg,tagName:Ce(Dg),propertyName:Eg,attributeName:Ce(Eg),className:Ce(Xn),labelName:Ce(Xn),namespace:Ce(Xn),macroName:Ce(Xn),literal:Zn,string:Kl,docString:Ce(Kl),character:Ce(Kl),attributeValue:Ce(Kl),number:ic,integer:Ce(ic),float:Ce(ic),bool:Ce(Zn),regexp:Ce(Zn),escape:Ce(Zn),color:Ce(Zn),url:Ce(Zn),keyword:cn,self:Ce(cn),null:Ce(cn),atom:Ce(cn),unit:Ce(cn),modifier:Ce(cn),operatorKeyword:Ce(cn),controlKeyword:Ce(cn),definitionKeyword:Ce(cn),moduleKeyword:Ce(cn),operator:dn,derefOperator:Ce(dn),arithmeticOperator:Ce(dn),logicOperator:Ce(dn),bitwiseOperator:Ce(dn),compareOperator:Ce(dn),updateOperator:Ce(dn),definitionOperator:Ce(dn),typeOperator:Ce(dn),controlOperator:Ce(dn),punctuation:Sd,separator:Ce(Sd),bracket:no,angleBracket:Ce(no),squareBracket:Ce(no),paren:Ce(no),brace:Ce(no),content:fn,heading:Ci,heading1:Ce(Ci),heading2:Ce(Ci),heading3:Ce(Ci),heading4:Ce(Ci),heading5:Ce(Ci),heading6:Ce(Ci),contentSeparator:Ce(fn),list:Ce(fn),quote:Ce(fn),emphasis:Ce(fn),strong:Ce(fn),link:Ce(fn),monospace:Ce(fn),strikethrough:Ce(fn),inserted:Ce(),deleted:Ce(),changed:Ce(),invalid:Ce(),meta:Gl,documentMeta:Ce(Gl),annotation:Ce(Gl),processingInstruction:Ce(Gl),definition:Vs.defineModifier("definition"),constant:Vs.defineModifier("constant"),function:Vs.defineModifier("function"),standard:Vs.defineModifier("standard"),local:Vs.defineModifier("local"),special:Vs.defineModifier("special")};for(let s in _e){let e=_e[s];e instanceof Vs&&(e.name=s)}xy([{tag:_e.link,class:"tok-link"},{tag:_e.heading,class:"tok-heading"},{tag:_e.emphasis,class:"tok-emphasis"},{tag:_e.strong,class:"tok-strong"},{tag:_e.keyword,class:"tok-keyword"},{tag:_e.atom,class:"tok-atom"},{tag:_e.bool,class:"tok-bool"},{tag:_e.url,class:"tok-url"},{tag:_e.labelName,class:"tok-labelName"},{tag:_e.inserted,class:"tok-inserted"},{tag:_e.deleted,class:"tok-deleted"},{tag:_e.literal,class:"tok-literal"},{tag:_e.string,class:"tok-string"},{tag:_e.number,class:"tok-number"},{tag:[_e.regexp,_e.escape,_e.special(_e.string)],class:"tok-string2"},{tag:_e.variableName,class:"tok-variableName"},{tag:_e.local(_e.variableName),class:"tok-variableName tok-local"},{tag:_e.definition(_e.variableName),class:"tok-variableName tok-definition"},{tag:_e.special(_e.variableName),class:"tok-variableName2"},{tag:_e.definition(_e.propertyName),class:"tok-propertyName tok-definition"},{tag:_e.typeName,class:"tok-typeName"},{tag:_e.namespace,class:"tok-namespace"},{tag:_e.className,class:"tok-className"},{tag:_e.macroName,class:"tok-macroName"},{tag:_e.propertyName,class:"tok-propertyName"},{tag:_e.operator,class:"tok-operator"},{tag:_e.comment,class:"tok-comment"},{tag:_e.meta,class:"tok-meta"},{tag:_e.invalid,class:"tok-invalid"},{tag:_e.punctuation,class:"tok-punctuation"}]);var rc;const ar=new et;function TA(s){return je.define({combine:s?e=>e.concat(s):void 0})}const jA=new et;class Qs{constructor(e,t,n=[],i=""){this.data=e,this.name=i,nt.prototype.hasOwnProperty("tree")||Object.defineProperty(nt.prototype,"tree",{get(){return us(this)}}),this.parser=t,this.extension=[gi.of(this),nt.languageData.of((r,o,l)=>{let a=Tg(r,o,l),c=a.type.prop(ar);if(!c)return[];let u=r.facet(c),d=a.type.prop(jA);if(d){let h=a.resolve(o-a.from,l);for(let p of d)if(p.test(h,r)){let y=r.facet(p.facet);return p.type=="replace"?y:y.concat(u)}}return u})].concat(n)}isActiveAt(e,t,n=-1){return Tg(e,t,n).type.prop(ar)==this.data}findRegions(e){let t=e.facet(gi);if(t?.data==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let n=[],i=(r,o)=>{if(r.prop(ar)==this.data){n.push({from:o,to:o+r.length});return}let l=r.prop(et.mounted);if(l){if(l.tree.prop(ar)==this.data){if(l.overlay)for(let a of l.overlay)n.push({from:a.from+o,to:a.to+o});else n.push({from:o,to:o+r.length});return}else if(l.overlay){let a=n.length;if(i(l.tree,l.overlay[0].from+o),n.length>a)return}}for(let a=0;a<r.children.length;a++){let c=r.children[a];c instanceof Dt&&i(c,r.positions[a]+o)}};return i(us(e),0),n}get allowsNesting(){return!0}}Qs.setState=Qe.define();function Tg(s,e,t){let n=s.facet(gi),i=us(s).topNode;if(!n||n.allowsNesting)for(let r=i;r;r=r.enter(e,t,Gt.ExcludeBuffers))r.type.isTop&&(i=r);return i}function us(s){let e=s.field(Qs.state,!1);return e?e.tree:Dt.empty}class OA{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let n=this.cursorPos-this.string.length;return e<n||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-n,t-n)}}let io=null;class jr{constructor(e,t,n=[],i,r,o,l,a){this.parser=e,this.state=t,this.fragments=n,this.tree=i,this.treeLen=r,this.viewport=o,this.skipped=l,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,n){return new jr(e,t,[],Dt.empty,0,n,[],null)}startParse(){return this.parser.startParse(new OA(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=Dt.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var n;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(Li.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(n=this.parse.stoppedAt)!==null&&n!==void 0?n:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Li.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=io;io=this;try{return e()}finally{io=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=jg(e,t.from,t.to);return e}changes(e,t){let{fragments:n,tree:i,treeLen:r,viewport:o,skipped:l}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((c,u,d,h)=>a.push({fromA:c,toA:u,fromB:d,toB:h})),n=Li.applyChanges(n,a),i=Dt.empty,r=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){l=[];for(let c of this.skipped){let u=e.mapPos(c.from,1),d=e.mapPos(c.to,-1);u<d&&l.push({from:u,to:d})}}}return new jr(this.parser,t,n,i,r,o,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let n=0;n<this.skipped.length;n++){let{from:i,to:r}=this.skipped[n];i<e.to&&r>e.from&&(this.fragments=jg(this.fragments,i,r),this.skipped.splice(n--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends by{createParse(t,n,i){let r=i[0].from,o=i[i.length-1].to;return{parsedPos:r,advance(){let a=io;if(a){for(let c of i)a.tempSkipped.push(c);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=o,new Dt(Ds.none,[],[],o-r)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return io}}function jg(s,e,t){return Li.applyChanges(s,[{fromA:e,toA:t,fromB:e,toB:t}])}class Or{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,n)||t.takeTree(),new Or(t)}static init(e){let t=Math.min(3e3,e.doc.length),n=jr.create(e.facet(gi).parser,e,{from:0,to:t});return n.work(20,t)||n.takeTree(),new Or(n)}}Qs.state=Yt.define({create:Or.init,update(s,e){for(let t of e.effects)if(t.is(Qs.setState))return t.value;return e.startState.facet(gi)!=e.state.facet(gi)?Or.init(e.state):s.apply(e)}});let wy=s=>{let e=setTimeout(()=>s(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(wy=s=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(s,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const oc=typeof navigator<"u"&&(!((rc=navigator.scheduling)===null||rc===void 0)&&rc.isInputPending)?()=>navigator.scheduling.isInputPending():null,PA=Vt.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Qs.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Qs.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=wy(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:i}}=this.view,r=n.field(Qs.state);if(r.tree==r.context.tree&&r.context.isDone(i+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!oc?Math.max(25,e.timeRemaining()-5):1e9),l=r.context.treeLen<i&&n.doc.length>i+1e3,a=r.context.work(()=>oc&&oc()||Date.now()>o,i+(l?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(r.context.takeTree(),this.view.dispatch({effects:Qs.setState.of(new Or(r.context))})),this.chunkBudget>0&&!(a&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(r.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>_s(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),gi=je.define({combine(s){return s.length?s[0]:null},enables:s=>[Qs.state,PA,Te.contentAttributes.compute([s],e=>{let t=e.facet(s);return t&&t.name?{"data-language":t.name}:{}})]}),$A=je.define(),_f=je.define({combine:s=>{if(!s.length)return"  ";let e=s[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(s[0]));return e}});function qi(s){let e=s.facet(_f);return e.charCodeAt(0)==9?s.tabSize*e.length:e.length}function Go(s,e){let t="",n=s.tabSize,i=s.facet(_f)[0];if(i=="	"){for(;e>=n;)t+="	",e-=n;i=" "}for(let r=0;r<e;r++)t+=i;return t}function Af(s,e){s instanceof nt&&(s=new pu(s));for(let n of s.state.facet($A)){let i=n(s,e);if(i!==void 0)return i}let t=us(s.state);return t.length>=e?RA(s,t,e):null}class pu{constructor(e,t={}){this.state=e,this.options=t,this.unit=qi(e)}lineAt(e,t=1){let n=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:r}=this.options;return i!=null&&i>=n.from&&i<=n.to?r&&i==e?{text:"",from:e}:(t<0?i<e:i<=e)?{text:n.text.slice(i-n.from),from:i}:{text:n.text.slice(0,i-n.from),from:n.from}:n}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:n,from:i}=this.lineAt(e,t);return n.slice(e-i,Math.min(n.length,e+100-i))}column(e,t=1){let{text:n,from:i}=this.lineAt(e,t),r=this.countColumn(n,e-i),o=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return o>-1&&(r+=o-this.countColumn(n,n.search(/\S|$/))),r}countColumn(e,t=e.length){return Nr(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:n,from:i}=this.lineAt(e,t),r=this.options.overrideIndentation;if(r){let o=r(i);if(o>-1)return o}return this.countColumn(n,n.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Sy=new et;function RA(s,e,t){let n=e.resolveStack(t),i=e.resolveInner(t,-1).resolve(t,0).enterUnfinishedNodesBefore(t);if(i!=n.node){let r=[];for(let o=i;o&&!(o.from<n.node.from||o.to>n.node.to||o.from==n.node.from&&o.type==n.node.type);o=o.parent)r.push(o);for(let o=r.length-1;o>=0;o--)n={node:r[o],next:n}}return Cy(n,s,t)}function Cy(s,e,t){for(let n=s;n;n=n.next){let i=VA(n.node);if(i)return i(Mf.create(e,t,n))}return 0}function LA(s){return s.pos==s.options.simulateBreak&&s.options.simulateDoubleBreak}function VA(s){let e=s.type.prop(Sy);if(e)return e;let t=s.firstChild,n;if(t&&(n=t.type.prop(et.closedBy))){let i=s.lastChild,r=i&&n.indexOf(i.name)>-1;return o=>FA(o,!0,1,void 0,r&&!LA(o)?i.from:void 0)}return s.parent==null?BA:null}function BA(){return 0}class Mf extends pu{constructor(e,t,n){super(e.state,e.options),this.base=e,this.pos=t,this.context=n}get node(){return this.context.node}static create(e,t,n){return new Mf(e,t,n)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let n=e.resolve(t.from);for(;n.parent&&n.parent.from==n.from;)n=n.parent;if(IA(n,e))break;t=this.state.doc.lineAt(n.from)}return this.lineIndent(t.from)}continue(){return Cy(this.context.next,this.base,this.pos)}}function IA(s,e){for(let t=e;t;t=t.parent)if(s==t)return!0;return!1}function NA(s){let e=s.node,t=e.childAfter(e.from),n=e.lastChild;if(!t)return null;let i=s.options.simulateBreak,r=s.state.doc.lineAt(t.from),o=i==null||i<=r.from?r.to:Math.min(r.to,i);for(let l=t.to;;){let a=e.childAfter(l);if(!a||a==n)return null;if(!a.type.isSkipped){if(a.from>=o)return null;let c=/^ */.exec(r.text.slice(t.to-r.from))[0].length;return{from:t.from,to:t.to+c}}l=a.to}}function FA(s,e,t,n,i){let r=s.textAfter,o=r.match(/^\s*/)[0].length,l=n&&r.slice(o,o+n.length)==n||i==s.pos+o,a=NA(s);return a?l?s.column(a.from):s.column(a.to):s.baseIndent+(l?0:s.unit*t)}const zA=200;function UA(){return nt.transactionFilter.of(s=>{if(!s.docChanged||!s.isUserEvent("input.type")&&!s.isUserEvent("input.complete"))return s;let e=s.startState.languageDataAt("indentOnInput",s.startState.selection.main.head);if(!e.length)return s;let t=s.newDoc,{head:n}=s.newSelection.main,i=t.lineAt(n);if(n>i.from+zA)return s;let r=t.sliceString(i.from,n);if(!e.some(c=>c.test(r)))return s;let{state:o}=s,l=-1,a=[];for(let{head:c}of o.selection.ranges){let u=o.doc.lineAt(c);if(u.from==l)continue;l=u.from;let d=Af(o,u.from);if(d==null)continue;let h=/^\s*/.exec(u.text)[0],p=Go(o,d);h!=p&&a.push({from:u.from,to:u.from+h.length,insert:p})}return a.length?[s,{changes:a,sequential:!0}]:s})}const HA=je.define(),qA=new et;function WA(s,e,t){let n=us(s);if(n.length<t)return null;let i=n.resolveStack(t,1),r=null;for(let o=i;o;o=o.next){let l=o.node;if(l.to<=t||l.from>t)continue;if(r&&l.from<e)break;let a=l.type.prop(qA);if(a&&(l.to<n.length-50||n.length==s.doc.length||!KA(l))){let c=a(l,s);c&&c.from<=t&&c.from>=e&&c.to>t&&(r=c)}}return r}function KA(s){let e=s.lastChild;return e&&e.to==s.to&&e.type.isError}function Ra(s,e,t){for(let n of s.facet(HA)){let i=n(s,e,t);if(i)return i}return WA(s,e,t)}function _y(s,e){let t=e.mapPos(s.from,1),n=e.mapPos(s.to,-1);return t>=n?void 0:{from:t,to:n}}const gu=Qe.define({map:_y}),cl=Qe.define({map:_y});function Ay(s){let e=[];for(let{head:t}of s.state.selection.ranges)e.some(n=>n.from<=t&&n.to>=t)||e.push(s.lineBlockAt(t));return e}const Wi=Yt.define({create(){return Fe.none},update(s,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((t,n)=>s=Og(s,t,n)),s=s.map(e.changes);for(let t of e.effects)if(t.is(gu)&&!GA(s,t.value.from,t.value.to)){let{preparePlaceholder:n}=e.state.facet(Ey),i=n?Fe.replace({widget:new tM(n(e.state,t.value))}):Pg;s=s.update({add:[i.range(t.value.from,t.value.to)]})}else t.is(cl)&&(s=s.update({filter:(n,i)=>t.value.from!=n||t.value.to!=i,filterFrom:t.value.from,filterTo:t.value.to}));return e.selection&&(s=Og(s,e.selection.main.head)),s},provide:s=>Te.decorations.from(s),toJSON(s,e){let t=[];return s.between(0,e.doc.length,(n,i)=>{t.push(n,i)}),t},fromJSON(s){if(!Array.isArray(s)||s.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<s.length;){let n=s[t++],i=s[t++];if(typeof n!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(Pg.range(n,i))}return Fe.set(e,!0)}});function Og(s,e,t=e){let n=!1;return s.between(e,t,(i,r)=>{i<t&&r>e&&(n=!0)}),n?s.update({filterFrom:e,filterTo:t,filter:(i,r)=>i>=t||r<=e}):s}function La(s,e,t){var n;let i=null;return(n=s.field(Wi,!1))===null||n===void 0||n.between(e,t,(r,o)=>{(!i||i.from>r)&&(i={from:r,to:o})}),i}function GA(s,e,t){let n=!1;return s.between(e,e,(i,r)=>{i==e&&r==t&&(n=!0)}),n}function My(s,e){return s.field(Wi,!1)?e:e.concat(Qe.appendConfig.of(Ty()))}const JA=s=>{for(let e of Ay(s)){let t=Ra(s.state,e.from,e.to);if(t)return s.dispatch({effects:My(s.state,[gu.of(t),Dy(s,t)])}),!0}return!1},QA=s=>{if(!s.state.field(Wi,!1))return!1;let e=[];for(let t of Ay(s)){let n=La(s.state,t.from,t.to);n&&e.push(cl.of(n),Dy(s,n,!1))}return e.length&&s.dispatch({effects:e}),e.length>0};function Dy(s,e,t=!0){let n=s.state.doc.lineAt(e.from).number,i=s.state.doc.lineAt(e.to).number;return Te.announce.of(`${s.state.phrase(t?"Folded lines":"Unfolded lines")} ${n} ${s.state.phrase("to")} ${i}.`)}const YA=s=>{let{state:e}=s,t=[];for(let n=0;n<e.doc.length;){let i=s.lineBlockAt(n),r=Ra(e,i.from,i.to);r&&t.push(gu.of(r)),n=(r?s.lineBlockAt(r.to):i).to+1}return t.length&&s.dispatch({effects:My(s.state,t)}),!!t.length},XA=s=>{let e=s.state.field(Wi,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,s.state.doc.length,(n,i)=>{t.push(cl.of({from:n,to:i}))}),s.dispatch({effects:t}),!0},ZA=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:JA},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:QA},{key:"Ctrl-Alt-[",run:YA},{key:"Ctrl-Alt-]",run:XA}],eM={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},Ey=je.define({combine(s){return Sn(s,eM)}});function Ty(s){return[Wi,iM]}function jy(s,e){let{state:t}=s,n=t.facet(Ey),i=o=>{let l=s.lineBlockAt(s.posAtDOM(o.target)),a=La(s.state,l.from,l.to);a&&s.dispatch({effects:cl.of(a)}),o.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(s,i,e);let r=document.createElement("span");return r.textContent=n.placeholderText,r.setAttribute("aria-label",t.phrase("folded code")),r.title=t.phrase("unfold"),r.className="cm-foldPlaceholder",r.onclick=i,r}const Pg=Fe.replace({widget:new class extends mi{toDOM(s){return jy(s,null)}}});class tM extends mi{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return jy(e,this.value)}}const sM={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class lc extends Fn{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function nM(s={}){let e={...sM,...s},t=new lc(e,!0),n=new lc(e,!1),i=Vt.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(gi)!=o.state.facet(gi)||o.startState.field(Wi,!1)!=o.state.field(Wi,!1)||us(o.startState)!=us(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let l=new In;for(let a of o.viewportLineBlocks){let c=La(o.state,a.from,a.to)?n:Ra(o.state,a.from,a.to)?t:null;c&&l.add(a.from,a.from,c)}return l.finish()}}),{domEventHandlers:r}=e;return[i,sA({class:"cm-foldGutter",markers(o){var l;return((l=o.plugin(i))===null||l===void 0?void 0:l.markers)||it.empty},initialSpacer(){return new lc(e,!1)},domEventHandlers:{...r,click:(o,l,a)=>{if(r.click&&r.click(o,l,a))return!0;let c=La(o.state,l.from,l.to);if(c)return o.dispatch({effects:cl.of(c)}),!0;let u=Ra(o.state,l.from,l.to);return u?(o.dispatch({effects:gu.of(u)}),!0):!1}}}),Ty()]}const iM=Te.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class dl{constructor(e,t){this.specs=e;let n;function i(l){let a=di.newName();return(n||(n=Object.create(null)))["."+a]=l,a}const r=typeof t.all=="string"?t.all:t.all?i(t.all):void 0,o=t.scope;this.scope=o instanceof Qs?l=>l.prop(ar)==o.data:o?l=>l==o:void 0,this.style=xy(e.map(l=>({tag:l.tag,class:l.class||i(Object.assign({},l,{tag:null}))})),{all:r}).style,this.module=n?new di(n):null,this.themeType=t.themeType}static define(e,t){return new dl(e,t||{})}}const Cd=je.define(),Oy=je.define({combine(s){return s.length?[s[0]]:null}});function ac(s){let e=s.facet(Cd);return e.length?e:s.facet(Oy)}function Py(s,e){let t=[oM],n;return s instanceof dl&&(s.module&&t.push(Te.styleModule.of(s.module)),n=s.themeType),e?.fallback?t.push(Oy.of(s)):n?t.push(Cd.computeN([Te.darkTheme],i=>i.facet(Te.darkTheme)==(n=="dark")?[s]:[])):t.push(Cd.of(s)),t}class rM{constructor(e){this.markCache=Object.create(null),this.tree=us(e.state),this.decorations=this.buildDeco(e,ac(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=us(e.state),n=ac(e.state),i=n!=ac(e.startState),{viewport:r}=e.view,o=e.changes.mapPos(this.decoratedTo,1);t.length<r.to&&!i&&t.type==this.tree.type&&o>=r.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(t!=this.tree||e.viewportChanged||i)&&(this.tree=t,this.decorations=this.buildDeco(e.view,n),this.decoratedTo=r.to)}buildDeco(e,t){if(!t||!this.tree.length)return Fe.none;let n=new In;for(let{from:i,to:r}of e.visibleRanges)MA(this.tree,t,(o,l,a)=>{n.add(o,l,this.markCache[a]||(this.markCache[a]=Fe.mark({class:a})))},i,r);return n.finish()}}const oM=Gi.high(Vt.fromClass(rM,{decorations:s=>s.decorations})),lM=dl.define([{tag:_e.meta,color:"#404740"},{tag:_e.link,textDecoration:"underline"},{tag:_e.heading,textDecoration:"underline",fontWeight:"bold"},{tag:_e.emphasis,fontStyle:"italic"},{tag:_e.strong,fontWeight:"bold"},{tag:_e.strikethrough,textDecoration:"line-through"},{tag:_e.keyword,color:"#708"},{tag:[_e.atom,_e.bool,_e.url,_e.contentSeparator,_e.labelName],color:"#219"},{tag:[_e.literal,_e.inserted],color:"#164"},{tag:[_e.string,_e.deleted],color:"#a11"},{tag:[_e.regexp,_e.escape,_e.special(_e.string)],color:"#e40"},{tag:_e.definition(_e.variableName),color:"#00f"},{tag:_e.local(_e.variableName),color:"#30a"},{tag:[_e.typeName,_e.namespace],color:"#085"},{tag:_e.className,color:"#167"},{tag:[_e.special(_e.variableName),_e.macroName],color:"#256"},{tag:_e.definition(_e.propertyName),color:"#00c"},{tag:_e.comment,color:"#940"},{tag:_e.invalid,color:"#f00"}]),aM=Te.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),$y=1e4,Ry="()[]{}",Ly=je.define({combine(s){return Sn(s,{afterCursor:!0,brackets:Ry,maxScanDistance:$y,renderMatch:dM})}}),uM=Fe.mark({class:"cm-matchingBracket"}),cM=Fe.mark({class:"cm-nonmatchingBracket"});function dM(s){let e=[],t=s.matched?uM:cM;return e.push(t.range(s.start.from,s.start.to)),s.end&&e.push(t.range(s.end.from,s.end.to)),e}const fM=Yt.define({create(){return Fe.none},update(s,e){if(!e.docChanged&&!e.selection)return s;let t=[],n=e.state.facet(Ly);for(let i of e.state.selection.ranges){if(!i.empty)continue;let r=yn(e.state,i.head,-1,n)||i.head>0&&yn(e.state,i.head-1,1,n)||n.afterCursor&&(yn(e.state,i.head,1,n)||i.head<e.state.doc.length&&yn(e.state,i.head+1,-1,n));r&&(t=t.concat(n.renderMatch(r,e.state)))}return Fe.set(t,!0)},provide:s=>Te.decorations.from(s)}),hM=[fM,aM];function pM(s={}){return[Ly.of(s),hM]}const gM=new et;function _d(s,e,t){let n=s.prop(e<0?et.openedBy:et.closedBy);if(n)return n;if(s.name.length==1){let i=t.indexOf(s.name);if(i>-1&&i%2==(e<0?1:0))return[t[i+e]]}return null}function Ad(s){let e=s.type.prop(gM);return e?e(s.node):s}function yn(s,e,t,n={}){let i=n.maxScanDistance||$y,r=n.brackets||Ry,o=us(s),l=o.resolveInner(e,t);for(let a=l;a;a=a.parent){let c=_d(a.type,t,r);if(c&&a.from<a.to){let u=Ad(a);if(u&&(t>0?e>=u.from&&e<u.to:e>u.from&&e<=u.to))return mM(s,e,t,a,u,c,r)}}return vM(s,e,t,o,l.type,i,r)}function mM(s,e,t,n,i,r,o){let l=n.parent,a={from:i.from,to:i.to},c=0,u=l?.cursor();if(u&&(t<0?u.childBefore(n.from):u.childAfter(n.to)))do if(t<0?u.to<=n.from:u.from>=n.to){if(c==0&&r.indexOf(u.type.name)>-1&&u.from<u.to){let d=Ad(u);return{start:a,end:d?{from:d.from,to:d.to}:void 0,matched:!0}}else if(_d(u.type,t,o))c++;else if(_d(u.type,-t,o)){if(c==0){let d=Ad(u);return{start:a,end:d&&d.from<d.to?{from:d.from,to:d.to}:void 0,matched:!1}}c--}}while(t<0?u.prevSibling():u.nextSibling());return{start:a,matched:!1}}function vM(s,e,t,n,i,r,o){let l=t<0?s.sliceDoc(e-1,e):s.sliceDoc(e,e+1),a=o.indexOf(l);if(a<0||a%2==0!=t>0)return null;let c={from:t<0?e-1:e,to:t>0?e+1:e},u=s.doc.iterRange(e,t>0?s.doc.length:0),d=0;for(let h=0;!u.next().done&&h<=r;){let p=u.value;t<0&&(h+=p.length);let y=e+h*t;for(let b=t>0?0:p.length-1,x=t>0?p.length:-1;b!=x;b+=t){let g=o.indexOf(p[b]);if(!(g<0||n.resolveInner(y+b,1).type!=i))if(g%2==0==t>0)d++;else{if(d==1)return{start:c,end:{from:y+b,to:y+b+1},matched:g>>1==a>>1};d--}}t>0&&(h+=p.length)}return u.done?{start:c,matched:!1}:null}function $g(s,e,t,n=0,i=0){e==null&&(e=s.search(/[^\s\u00a0]/),e==-1&&(e=s.length));let r=i;for(let o=n;o<e;o++)s.charCodeAt(o)==9?r+=t-r%t:r++;return r}class Vy{constructor(e,t,n,i){this.string=e,this.tabSize=t,this.indentUnit=n,this.overrideIndent=i,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let t=this.string.charAt(this.pos),n;if(typeof e=="string"?n=t==e:n=t&&(e instanceof RegExp?e.test(t):e(t)),n)return++this.pos,t}eatWhile(e){let t=this.pos;for(;this.eat(e););return this.pos>t}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=$g(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:$g(this.string,null,this.tabSize)}match(e,t,n){if(typeof e=="string"){let i=o=>n?o.toLowerCase():o,r=this.string.substr(this.pos,e.length);return i(r)==i(e)?(t!==!1&&(this.pos+=e.length),!0):null}else{let i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&t!==!1&&(this.pos+=i[0].length),i)}}current(){return this.string.slice(this.start,this.pos)}}function yM(s){return{name:s.name||"",token:s.token,blankLine:s.blankLine||(()=>{}),startState:s.startState||(()=>!0),copyState:s.copyState||bM,indent:s.indent||(()=>null),languageData:s.languageData||{},tokenTable:s.tokenTable||Tf,mergeTokens:s.mergeTokens!==!1}}function bM(s){if(typeof s!="object")return s;let e={};for(let t in s){let n=s[t];e[t]=n instanceof Array?n.slice():n}return e}const Rg=new WeakMap;class Df extends Qs{constructor(e){let t=TA(e.languageData),n=yM(e),i,r=new class extends by{createParse(o,l,a){return new xM(i,o,l,a)}};super(t,r,[],e.name),this.topNode=CM(t,this),i=this,this.streamParser=n,this.stateAfter=new et({perNode:!0}),this.tokenTable=e.tokenTable?new Fy(n.tokenTable):SM}static define(e){return new Df(e)}getIndent(e){let t,{overrideIndentation:n}=e.options;n&&(t=Rg.get(e.state),t!=null&&t<e.pos-1e4&&(t=void 0));let i=Ef(this,e.node.tree,e.node.from,e.node.from,t??e.pos),r,o;if(i?(o=i.state,r=i.pos+1):(o=this.streamParser.startState(e.unit),r=e.node.from),e.pos-r>1e4)return null;for(;r<e.pos;){let a=e.state.doc.lineAt(r),c=Math.min(e.pos,a.to);if(a.length){let u=n?n(a.from):-1,d=new Vy(a.text,e.state.tabSize,e.unit,u<0?void 0:u);for(;d.pos<c-a.from;)Iy(this.streamParser.token,d,o)}else this.streamParser.blankLine(o,e.unit);if(c==e.pos)break;r=a.to+1}let l=e.lineAt(e.pos);return n&&t==null&&Rg.set(e.state,l.from),this.streamParser.indent(o,/^\s*(.*)/.exec(l.text)[1],e)}get allowsNesting(){return!1}}function Ef(s,e,t,n,i){let r=t>=n&&t+e.length<=i&&e.prop(s.stateAfter);if(r)return{state:s.streamParser.copyState(r),pos:t+e.length};for(let o=e.children.length-1;o>=0;o--){let l=e.children[o],a=t+e.positions[o],c=l instanceof Dt&&a<i&&Ef(s,l,a,n,i);if(c)return c}return null}function By(s,e,t,n,i){if(i&&t<=0&&n>=e.length)return e;!i&&t==0&&e.type==s.topNode&&(i=!0);for(let r=e.children.length-1;r>=0;r--){let o=e.positions[r],l=e.children[r],a;if(o<n&&l instanceof Dt){if(!(a=By(s,l,t-o,n-o,i)))break;return i?new Dt(e.type,e.children.slice(0,r).concat(a),e.positions.slice(0,r+1),o+a.length):a}}return null}function kM(s,e,t,n,i){for(let r of e){let o=r.from+(r.openStart?25:0),l=r.to-(r.openEnd?25:0),a=o<=t&&l>t&&Ef(s,r.tree,0-r.offset,t,l),c;if(a&&a.pos<=n&&(c=By(s,r.tree,t+r.offset,a.pos+r.offset,!1)))return{state:a.state,tree:c}}return{state:s.streamParser.startState(i?qi(i):4),tree:Dt.empty}}class xM{constructor(e,t,n,i){this.lang=e,this.input=t,this.fragments=n,this.ranges=i,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=i[i.length-1].to;let r=jr.get(),o=i[0].from,{state:l,tree:a}=kM(e,n,o,this.to,r?.state);this.state=l,this.parsedPos=this.chunkStart=o+a.length;for(let c=0;c<a.children.length;c++)this.chunks.push(a.children[c]),this.chunkPos.push(a.positions[c]);r&&this.parsedPos<r.viewport.from-1e5&&i.some(c=>c.from<=r.viewport.from&&c.to>=r.viewport.from)&&(this.state=this.lang.streamParser.startState(qi(r.state)),r.skipUntilInView(this.parsedPos,r.viewport.from),this.parsedPos=r.viewport.from),this.moveRangeIndex()}advance(){let e=jr.get(),t=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),n=Math.min(t,this.chunkStart+512);for(e&&(n=Math.min(n,e.viewport.to));this.parsedPos<n;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=t?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,t),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let t=this.input.chunk(e);if(this.input.lineChunks)t==`
`&&(t="");else{let n=t.indexOf(`
`);n>-1&&(t=t.slice(0,n))}return e+t.length<=this.to?t:t.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,t=this.lineAfter(e),n=e+t.length;for(let i=this.rangeIndex;;){let r=this.ranges[i].to;if(r>=n||(t=t.slice(0,r-(n-t.length)),i++,i==this.ranges.length))break;let o=this.ranges[i].from,l=this.lineAfter(o);t+=l,n=o+l.length}return{line:t,end:n}}skipGapsTo(e,t,n){for(;;){let i=this.ranges[this.rangeIndex].to,r=e+t;if(n>0?i>r:i>=r)break;let o=this.ranges[++this.rangeIndex].from;t+=o-i}return t}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,t,n,i){let r=4;if(this.ranges.length>1){i=this.skipGapsTo(t,i,1),t+=i;let l=this.chunk.length;i=this.skipGapsTo(n,i,-1),n+=i,r+=this.chunk.length-l}let o=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&r==4&&o>=0&&this.chunk[o]==e&&this.chunk[o+2]==t?this.chunk[o+2]=n:this.chunk.push(e,t,n,r),i}parseLine(e){let{line:t,end:n}=this.nextLine(),i=0,{streamParser:r}=this.lang,o=new Vy(t,e?e.state.tabSize:4,e?qi(e.state):2);if(o.eol())r.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let l=Iy(r.token,o,this.state);if(l&&(i=this.emitToken(this.lang.tokenTable.resolve(l),this.parsedPos+o.start,this.parsedPos+o.pos,i)),o.start>1e4)break}this.parsedPos=n,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=Dt.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:wM,topID:0,maxBufferLength:512,reused:this.chunkReused});e=new Dt(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new Dt(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function Iy(s,e,t){e.start=e.pos;for(let n=0;n<10;n++){let i=s(e,t);if(e.pos>e.start)return i}throw new Error("Stream parser failed to advance stream.")}const Tf=Object.create(null),Jo=[Ds.none],wM=new xf(Jo),Lg=[],Vg=Object.create(null),Ny=Object.create(null);for(let[s,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])Ny[s]=zy(Tf,e);class Fy{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),Ny)}resolve(e){return e?this.table[e]||(this.table[e]=zy(this.extra,e)):0}}const SM=new Fy(Tf);function uc(s,e){Lg.indexOf(s)>-1||(Lg.push(s),console.warn(e))}function zy(s,e){let t=[];for(let l of e.split(" ")){let a=[];for(let c of l.split(".")){let u=s[c]||_e[c];u?typeof u=="function"?a.length?a=a.map(u):uc(c,`Modifier ${c} used at start of tag`):a.length?uc(c,`Tag ${c} used as modifier`):a=Array.isArray(u)?u:[u]:uc(c,`Unknown highlighting tag ${c}`)}for(let c of a)t.push(c)}if(!t.length)return 0;let n=e.replace(/ /g,"_"),i=n+" "+t.map(l=>l.id),r=Vg[i];if(r)return r.id;let o=Vg[i]=Ds.define({id:Jo.length,name:n,props:[_A({[n]:t})]});return Jo.push(o),o.id}function CM(s,e){let t=Ds.define({id:Jo.length,name:"Document",props:[ar.add(()=>s),Sy.add(()=>n=>e.getIndent(n))],top:!0});return Jo.push(t),t}Ct.RTL,Ct.LTR;const _M=s=>{let{state:e}=s,t=e.doc.lineAt(e.selection.main.from),n=Of(s.state,t.from);return n.line?AM(s):n.block?DM(s):!1};function jf(s,e){return({state:t,dispatch:n})=>{if(t.readOnly)return!1;let i=s(e,t);return i?(n(t.update(i)),!0):!1}}const AM=jf(jM,0),MM=jf(Uy,0),DM=jf((s,e)=>Uy(s,e,TM(e)),0);function Of(s,e){let t=s.languageDataAt("commentTokens",e,1);return t.length?t[0]:{}}const ro=50;function EM(s,{open:e,close:t},n,i){let r=s.sliceDoc(n-ro,n),o=s.sliceDoc(i,i+ro),l=/\s*$/.exec(r)[0].length,a=/^\s*/.exec(o)[0].length,c=r.length-l;if(r.slice(c-e.length,c)==e&&o.slice(a,a+t.length)==t)return{open:{pos:n-l,margin:l&&1},close:{pos:i+a,margin:a&&1}};let u,d;i-n<=2*ro?u=d=s.sliceDoc(n,i):(u=s.sliceDoc(n,n+ro),d=s.sliceDoc(i-ro,i));let h=/^\s*/.exec(u)[0].length,p=/\s*$/.exec(d)[0].length,y=d.length-p-t.length;return u.slice(h,h+e.length)==e&&d.slice(y,y+t.length)==t?{open:{pos:n+h+e.length,margin:/\s/.test(u.charAt(h+e.length))?1:0},close:{pos:i-p-t.length,margin:/\s/.test(d.charAt(y-1))?1:0}}:null}function TM(s){let e=[];for(let t of s.selection.ranges){let n=s.doc.lineAt(t.from),i=t.to<=n.to?n:s.doc.lineAt(t.to);i.from>n.from&&i.from==t.to&&(i=t.to==n.to+1?n:s.doc.lineAt(t.to-1));let r=e.length-1;r>=0&&e[r].to>n.from?e[r].to=i.to:e.push({from:n.from+/^\s*/.exec(n.text)[0].length,to:i.to})}return e}function Uy(s,e,t=e.selection.ranges){let n=t.map(r=>Of(e,r.from).block);if(!n.every(r=>r))return null;let i=t.map((r,o)=>EM(e,n[o],r.from,r.to));if(s!=2&&!i.every(r=>r))return{changes:e.changes(t.map((r,o)=>i[o]?[]:[{from:r.from,insert:n[o].open+" "},{from:r.to,insert:" "+n[o].close}]))};if(s!=1&&i.some(r=>r)){let r=[];for(let o=0,l;o<i.length;o++)if(l=i[o]){let a=n[o],{open:c,close:u}=l;r.push({from:c.pos-a.open.length,to:c.pos+c.margin},{from:u.pos-u.margin,to:u.pos+a.close.length})}return{changes:r}}return null}function jM(s,e,t=e.selection.ranges){let n=[],i=-1;for(let{from:r,to:o}of t){let l=n.length,a=1e9,c=Of(e,r).line;if(c){for(let u=r;u<=o;){let d=e.doc.lineAt(u);if(d.from>i&&(r==o||o>d.from)){i=d.from;let h=/^\s*/.exec(d.text)[0].length,p=h==d.length,y=d.text.slice(h,h+c.length)==c?h:-1;h<d.text.length&&h<a&&(a=h),n.push({line:d,comment:y,token:c,indent:h,empty:p,single:!1})}u=d.to+1}if(a<1e9)for(let u=l;u<n.length;u++)n[u].indent<n[u].line.text.length&&(n[u].indent=a);n.length==l+1&&(n[l].single=!0)}}if(s!=2&&n.some(r=>r.comment<0&&(!r.empty||r.single))){let r=[];for(let{line:l,token:a,indent:c,empty:u,single:d}of n)(d||!u)&&r.push({from:l.from+c,insert:a+" "});let o=e.changes(r);return{changes:o,selection:e.selection.map(o,1)}}else if(s!=1&&n.some(r=>r.comment>=0)){let r=[];for(let{line:o,comment:l,token:a}of n)if(l>=0){let c=o.from+l,u=c+a.length;o.text[u-o.from]==" "&&u++,r.push({from:c,to:u})}return{changes:r}}return null}const Md=Un.define(),OM=Un.define(),PM=je.define(),Hy=je.define({combine(s){return Sn(s,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(n,i)=>e(n,i)||t(n,i)})}}),qy=Yt.define({create(){return bn.empty},update(s,e){let t=e.state.facet(Hy),n=e.annotation(Md);if(n){let a=As.fromTransaction(e,n.selection),c=n.side,u=c==0?s.undone:s.done;return a?u=Va(u,u.length,t.minDepth,a):u=Gy(u,e.startState.selection),new bn(c==0?n.rest:u,c==0?u:n.rest)}let i=e.annotation(OM);if((i=="full"||i=="before")&&(s=s.isolate()),e.annotation(Ft.addToHistory)===!1)return e.changes.empty?s:s.addMapping(e.changes.desc);let r=As.fromTransaction(e),o=e.annotation(Ft.time),l=e.annotation(Ft.userEvent);return r?s=s.addChanges(r,o,l,t,e):e.selection&&(s=s.addSelection(e.startState.selection,o,l,t.newGroupDelay)),(i=="full"||i=="after")&&(s=s.isolate()),s},toJSON(s){return{done:s.done.map(e=>e.toJSON()),undone:s.undone.map(e=>e.toJSON())}},fromJSON(s){return new bn(s.done.map(As.fromJSON),s.undone.map(As.fromJSON))}});function $M(s={}){return[qy,Hy.of(s),Te.domEventHandlers({beforeinput(e,t){let n=e.inputType=="historyUndo"?Wy:e.inputType=="historyRedo"?Dd:null;return n?(e.preventDefault(),n(t)):!1}})]}function mu(s,e){return function({state:t,dispatch:n}){if(!e&&t.readOnly)return!1;let i=t.field(qy,!1);if(!i)return!1;let r=i.pop(s,t,e);return r?(n(r),!0):!1}}const Wy=mu(0,!1),Dd=mu(1,!1),RM=mu(0,!0),LM=mu(1,!0);class As{constructor(e,t,n,i,r){this.changes=e,this.effects=t,this.mapped=n,this.startSelection=i,this.selectionsAfter=r}setSelAfter(e){return new As(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,n;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(n=this.startSelection)===null||n===void 0?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new As(e.changes&&Nt.fromJSON(e.changes),[],e.mapped&&xn.fromJSON(e.mapped),e.startSelection&&fe.fromJSON(e.startSelection),e.selectionsAfter.map(fe.fromJSON))}static fromTransaction(e,t){let n=Is;for(let i of e.startState.facet(PM)){let r=i(e);r.length&&(n=n.concat(r))}return!n.length&&e.changes.empty?null:new As(e.changes.invert(e.startState.doc),n,void 0,t||e.startState.selection,Is)}static selection(e){return new As(void 0,Is,void 0,void 0,e)}}function Va(s,e,t,n){let i=e+1>t+20?e-t-1:0,r=s.slice(i,e);return r.push(n),r}function VM(s,e){let t=[],n=!1;return s.iterChangedRanges((i,r)=>t.push(i,r)),e.iterChangedRanges((i,r,o,l)=>{for(let a=0;a<t.length;){let c=t[a++],u=t[a++];l>=c&&o<=u&&(n=!0)}}),n}function BM(s,e){return s.ranges.length==e.ranges.length&&s.ranges.filter((t,n)=>t.empty!=e.ranges[n].empty).length===0}function Ky(s,e){return s.length?e.length?s.concat(e):s:e}const Is=[],IM=200;function Gy(s,e){if(s.length){let t=s[s.length-1],n=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-IM));return n.length&&n[n.length-1].eq(e)?s:(n.push(e),Va(s,s.length-1,1e9,t.setSelAfter(n)))}else return[As.selection([e])]}function NM(s){let e=s[s.length-1],t=s.slice();return t[s.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function cc(s,e){if(!s.length)return s;let t=s.length,n=Is;for(;t;){let i=FM(s[t-1],e,n);if(i.changes&&!i.changes.empty||i.effects.length){let r=s.slice(0,t);return r[t-1]=i,r}else e=i.mapped,t--,n=i.selectionsAfter}return n.length?[As.selection(n)]:Is}function FM(s,e,t){let n=Ky(s.selectionsAfter.length?s.selectionsAfter.map(l=>l.map(e)):Is,t);if(!s.changes)return As.selection(n);let i=s.changes.map(e),r=e.mapDesc(s.changes,!0),o=s.mapped?s.mapped.composeDesc(r):r;return new As(i,Qe.mapEffects(s.effects,e),o,s.startSelection.map(r),n)}const zM=/^(input\.type|delete)($|\.)/;class bn{constructor(e,t,n=0,i=void 0){this.done=e,this.undone=t,this.prevTime=n,this.prevUserEvent=i}isolate(){return this.prevTime?new bn(this.done,this.undone):this}addChanges(e,t,n,i,r){let o=this.done,l=o[o.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!n||zM.test(n))&&(!l.selectionsAfter.length&&t-this.prevTime<i.newGroupDelay&&i.joinToEvent(r,VM(l.changes,e.changes))||n=="input.type.compose")?o=Va(o,o.length-1,i.minDepth,new As(e.changes.compose(l.changes),Ky(Qe.mapEffects(e.effects,l.changes),l.effects),l.mapped,l.startSelection,Is)):o=Va(o,o.length,i.minDepth,e),new bn(o,Is,t,n)}addSelection(e,t,n,i){let r=this.done.length?this.done[this.done.length-1].selectionsAfter:Is;return r.length>0&&t-this.prevTime<i&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&BM(r[r.length-1],e)?this:new bn(Gy(this.done,e),this.undone,t,n)}addMapping(e){return new bn(cc(this.done,e),cc(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,n){let i=e==0?this.done:this.undone;if(i.length==0)return null;let r=i[i.length-1],o=r.selectionsAfter[0]||t.selection;if(n&&r.selectionsAfter.length)return t.update({selection:r.selectionsAfter[r.selectionsAfter.length-1],annotations:Md.of({side:e,rest:NM(i),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(r.changes){let l=i.length==1?Is:i.slice(0,i.length-1);return r.mapped&&(l=cc(l,r.mapped)),t.update({changes:r.changes,selection:r.startSelection,effects:r.effects,annotations:Md.of({side:e,rest:l,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}bn.empty=new bn(Is,Is);const UM=[{key:"Mod-z",run:Wy,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Dd,preventDefault:!0},{linux:"Ctrl-Shift-z",run:Dd,preventDefault:!0},{key:"Mod-u",run:RM,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:LM,preventDefault:!0}];function Fr(s,e){return fe.create(s.ranges.map(e),s.mainIndex)}function nn(s,e){return s.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function rn({state:s,dispatch:e},t){let n=Fr(s.selection,t);return n.eq(s.selection,!0)?!1:(e(nn(s,n)),!0)}function vu(s,e){return fe.cursor(e?s.to:s.from)}function Jy(s,e){return rn(s,t=>t.empty?s.moveByChar(t,e):vu(t,e))}function cs(s){return s.textDirectionAt(s.state.selection.main.head)==Ct.LTR}const Qy=s=>Jy(s,!cs(s)),Yy=s=>Jy(s,cs(s));function Xy(s,e){return rn(s,t=>t.empty?s.moveByGroup(t,e):vu(t,e))}const HM=s=>Xy(s,!cs(s)),qM=s=>Xy(s,cs(s));function WM(s,e,t){if(e.type.prop(t))return!0;let n=e.to-e.from;return n&&(n>2||/[^\s,.;:]/.test(s.sliceDoc(e.from,e.to)))||e.firstChild}function yu(s,e,t){let n=us(s).resolveInner(e.head),i=t?et.closedBy:et.openedBy;for(let a=e.head;;){let c=t?n.childAfter(a):n.childBefore(a);if(!c)break;WM(s,c,i)?n=c:a=t?c.to:c.from}let r=n.type.prop(i),o,l;return r&&(o=t?yn(s,n.from,1):yn(s,n.to,-1))&&o.matched?l=t?o.end.to:o.end.from:l=t?n.to:n.from,fe.cursor(l,t?-1:1)}const KM=s=>rn(s,e=>yu(s.state,e,!cs(s))),GM=s=>rn(s,e=>yu(s.state,e,cs(s)));function Zy(s,e){return rn(s,t=>{if(!t.empty)return vu(t,e);let n=s.moveVertically(t,e);return n.head!=t.head?n:s.moveToLineBoundary(t,e)})}const eb=s=>Zy(s,!1),tb=s=>Zy(s,!0);function sb(s){let e=s.scrollDOM.clientHeight<s.scrollDOM.scrollHeight-2,t=0,n=0,i;if(e){for(let r of s.state.facet(Te.scrollMargins)){let o=r(s);o?.top&&(t=Math.max(o?.top,t)),o?.bottom&&(n=Math.max(o?.bottom,n))}i=s.scrollDOM.clientHeight-t-n}else i=(s.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:n,selfScroll:e,height:Math.max(s.defaultLineHeight,i-5)}}function nb(s,e){let t=sb(s),{state:n}=s,i=Fr(n.selection,o=>o.empty?s.moveVertically(o,e,t.height):vu(o,e));if(i.eq(n.selection))return!1;let r;if(t.selfScroll){let o=s.coordsAtPos(n.selection.main.head),l=s.scrollDOM.getBoundingClientRect(),a=l.top+t.marginTop,c=l.bottom-t.marginBottom;o&&o.top>a&&o.bottom<c&&(r=Te.scrollIntoView(i.main.head,{y:"start",yMargin:o.top-a}))}return s.dispatch(nn(n,i),{effects:r}),!0}const Bg=s=>nb(s,!1),Ed=s=>nb(s,!0);function vi(s,e,t){let n=s.lineBlockAt(e.head),i=s.moveToLineBoundary(e,t);if(i.head==e.head&&i.head!=(t?n.to:n.from)&&(i=s.moveToLineBoundary(e,t,!1)),!t&&i.head==n.from&&n.length){let r=/^\s*/.exec(s.state.sliceDoc(n.from,Math.min(n.from+100,n.to)))[0].length;r&&e.head!=n.from+r&&(i=fe.cursor(n.from+r))}return i}const JM=s=>rn(s,e=>vi(s,e,!0)),QM=s=>rn(s,e=>vi(s,e,!1)),YM=s=>rn(s,e=>vi(s,e,!cs(s))),XM=s=>rn(s,e=>vi(s,e,cs(s))),ZM=s=>rn(s,e=>fe.cursor(s.lineBlockAt(e.head).from,1)),e8=s=>rn(s,e=>fe.cursor(s.lineBlockAt(e.head).to,-1));function t8(s,e,t){let n=!1,i=Fr(s.selection,r=>{let o=yn(s,r.head,-1)||yn(s,r.head,1)||r.head>0&&yn(s,r.head-1,1)||r.head<s.doc.length&&yn(s,r.head+1,-1);if(!o||!o.end)return r;n=!0;let l=o.start.from==r.head?o.end.to:o.end.from;return fe.cursor(l)});return n?(e(nn(s,i)),!0):!1}const s8=({state:s,dispatch:e})=>t8(s,e);function Gs(s,e){let t=Fr(s.state.selection,n=>{let i=e(n);return fe.range(n.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return t.eq(s.state.selection)?!1:(s.dispatch(nn(s.state,t)),!0)}function ib(s,e){return Gs(s,t=>s.moveByChar(t,e))}const rb=s=>ib(s,!cs(s)),ob=s=>ib(s,cs(s));function lb(s,e){return Gs(s,t=>s.moveByGroup(t,e))}const n8=s=>lb(s,!cs(s)),i8=s=>lb(s,cs(s)),r8=s=>Gs(s,e=>yu(s.state,e,!cs(s))),o8=s=>Gs(s,e=>yu(s.state,e,cs(s)));function ab(s,e){return Gs(s,t=>s.moveVertically(t,e))}const ub=s=>ab(s,!1),cb=s=>ab(s,!0);function db(s,e){return Gs(s,t=>s.moveVertically(t,e,sb(s).height))}const Ig=s=>db(s,!1),Ng=s=>db(s,!0),l8=s=>Gs(s,e=>vi(s,e,!0)),a8=s=>Gs(s,e=>vi(s,e,!1)),u8=s=>Gs(s,e=>vi(s,e,!cs(s))),c8=s=>Gs(s,e=>vi(s,e,cs(s))),d8=s=>Gs(s,e=>fe.cursor(s.lineBlockAt(e.head).from)),f8=s=>Gs(s,e=>fe.cursor(s.lineBlockAt(e.head).to)),Fg=({state:s,dispatch:e})=>(e(nn(s,{anchor:0})),!0),zg=({state:s,dispatch:e})=>(e(nn(s,{anchor:s.doc.length})),!0),Ug=({state:s,dispatch:e})=>(e(nn(s,{anchor:s.selection.main.anchor,head:0})),!0),Hg=({state:s,dispatch:e})=>(e(nn(s,{anchor:s.selection.main.anchor,head:s.doc.length})),!0),h8=({state:s,dispatch:e})=>(e(s.update({selection:{anchor:0,head:s.doc.length},userEvent:"select"})),!0),p8=({state:s,dispatch:e})=>{let t=bu(s).map(({from:n,to:i})=>fe.range(n,Math.min(i+1,s.doc.length)));return e(s.update({selection:fe.create(t),userEvent:"select"})),!0},g8=({state:s,dispatch:e})=>{let t=Fr(s.selection,n=>{let i=us(s),r=i.resolveStack(n.from,1);if(n.empty){let o=i.resolveStack(n.from,-1);o.node.from>=r.node.from&&o.node.to<=r.node.to&&(r=o)}for(let o=r;o;o=o.next){let{node:l}=o;if((l.from<n.from&&l.to>=n.to||l.to>n.to&&l.from<=n.from)&&o.next)return fe.range(l.to,l.from)}return n});return t.eq(s.selection)?!1:(e(nn(s,t)),!0)};function fb(s,e){let{state:t}=s,n=t.selection,i=t.selection.ranges.slice();for(let r of t.selection.ranges){let o=t.doc.lineAt(r.head);if(e?o.to<s.state.doc.length:o.from>0)for(let l=r;;){let a=s.moveVertically(l,e);if(a.head<o.from||a.head>o.to){i.some(c=>c.head==a.head)||i.push(a);break}else{if(a.head==l.head)break;l=a}}}return i.length==n.ranges.length?!1:(s.dispatch(nn(t,fe.create(i,i.length-1))),!0)}const m8=s=>fb(s,!1),v8=s=>fb(s,!0),y8=({state:s,dispatch:e})=>{let t=s.selection,n=null;return t.ranges.length>1?n=fe.create([t.main]):t.main.empty||(n=fe.create([fe.cursor(t.main.head)])),n?(e(nn(s,n)),!0):!1};function fl(s,e){if(s.state.readOnly)return!1;let t="delete.selection",{state:n}=s,i=n.changeByRange(r=>{let{from:o,to:l}=r;if(o==l){let a=e(r);a<o?(t="delete.backward",a=Jl(s,a,!1)):a>o&&(t="delete.forward",a=Jl(s,a,!0)),o=Math.min(o,a),l=Math.max(l,a)}else o=Jl(s,o,!1),l=Jl(s,l,!0);return o==l?{range:r}:{changes:{from:o,to:l},range:fe.cursor(o,o<r.head?-1:1)}});return i.changes.empty?!1:(s.dispatch(n.update(i,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?Te.announce.of(n.phrase("Selection deleted")):void 0})),!0)}function Jl(s,e,t){if(s instanceof Te)for(let n of s.state.facet(Te.atomicRanges).map(i=>i(s)))n.between(e,e,(i,r)=>{i<e&&r>e&&(e=t?r:i)});return e}const hb=(s,e,t)=>fl(s,n=>{let i=n.from,{state:r}=s,o=r.doc.lineAt(i),l,a;if(t&&!e&&i>o.from&&i<o.from+200&&!/[^ \t]/.test(l=o.text.slice(0,i-o.from))){if(l[l.length-1]=="	")return i-1;let c=Nr(l,r.tabSize),u=c%qi(r)||qi(r);for(let d=0;d<u&&l[l.length-1-d]==" ";d++)i--;a=i}else a=Qt(o.text,i-o.from,e,e)+o.from,a==i&&o.number!=(e?r.doc.lines:1)?a+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(a-o.from,i-o.from))&&(a=Qt(o.text,a-o.from,!1,!1)+o.from);return a}),Td=s=>hb(s,!1,!0),pb=s=>hb(s,!0,!1),gb=(s,e)=>fl(s,t=>{let n=t.head,{state:i}=s,r=i.doc.lineAt(n),o=i.charCategorizer(n);for(let l=null;;){if(n==(e?r.to:r.from)){n==t.head&&r.number!=(e?i.doc.lines:1)&&(n+=e?1:-1);break}let a=Qt(r.text,n-r.from,e)+r.from,c=r.text.slice(Math.min(n,a)-r.from,Math.max(n,a)-r.from),u=o(c);if(l!=null&&u!=l)break;(c!=" "||n!=t.head)&&(l=u),n=a}return n}),mb=s=>gb(s,!1),b8=s=>gb(s,!0),k8=s=>fl(s,e=>{let t=s.lineBlockAt(e.head).to;return e.head<t?t:Math.min(s.state.doc.length,e.head+1)}),x8=s=>fl(s,e=>{let t=s.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),w8=s=>fl(s,e=>{let t=s.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(s.state.doc.length,e.head+1)}),S8=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let t=s.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:rt.of(["",""])},range:fe.cursor(n.from)}));return e(s.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},C8=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let t=s.changeByRange(n=>{if(!n.empty||n.from==0||n.from==s.doc.length)return{range:n};let i=n.from,r=s.doc.lineAt(i),o=i==r.from?i-1:Qt(r.text,i-r.from,!1)+r.from,l=i==r.to?i+1:Qt(r.text,i-r.from,!0)+r.from;return{changes:{from:o,to:l,insert:s.doc.slice(i,l).append(s.doc.slice(o,i))},range:fe.cursor(l)}});return t.changes.empty?!1:(e(s.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function bu(s){let e=[],t=-1;for(let n of s.selection.ranges){let i=s.doc.lineAt(n.from),r=s.doc.lineAt(n.to);if(!n.empty&&n.to==r.from&&(r=s.doc.lineAt(n.to-1)),t>=i.number){let o=e[e.length-1];o.to=r.to,o.ranges.push(n)}else e.push({from:i.from,to:r.to,ranges:[n]});t=r.number+1}return e}function vb(s,e,t){if(s.readOnly)return!1;let n=[],i=[];for(let r of bu(s)){if(t?r.to==s.doc.length:r.from==0)continue;let o=s.doc.lineAt(t?r.to+1:r.from-1),l=o.length+1;if(t){n.push({from:r.to,to:o.to},{from:r.from,insert:o.text+s.lineBreak});for(let a of r.ranges)i.push(fe.range(Math.min(s.doc.length,a.anchor+l),Math.min(s.doc.length,a.head+l)))}else{n.push({from:o.from,to:r.from},{from:r.to,insert:s.lineBreak+o.text});for(let a of r.ranges)i.push(fe.range(a.anchor-l,a.head-l))}}return n.length?(e(s.update({changes:n,scrollIntoView:!0,selection:fe.create(i,s.selection.mainIndex),userEvent:"move.line"})),!0):!1}const _8=({state:s,dispatch:e})=>vb(s,e,!1),A8=({state:s,dispatch:e})=>vb(s,e,!0);function yb(s,e,t){if(s.readOnly)return!1;let n=[];for(let i of bu(s))t?n.push({from:i.from,insert:s.doc.slice(i.from,i.to)+s.lineBreak}):n.push({from:i.to,insert:s.lineBreak+s.doc.slice(i.from,i.to)});return e(s.update({changes:n,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const M8=({state:s,dispatch:e})=>yb(s,e,!1),D8=({state:s,dispatch:e})=>yb(s,e,!0),E8=s=>{if(s.state.readOnly)return!1;let{state:e}=s,t=e.changes(bu(e).map(({from:i,to:r})=>(i>0?i--:r<e.doc.length&&r++,{from:i,to:r}))),n=Fr(e.selection,i=>{let r;if(s.lineWrapping){let o=s.lineBlockAt(i.head),l=s.coordsAtPos(i.head,i.assoc||1);l&&(r=o.bottom+s.documentTop-l.bottom+s.defaultLineHeight/2)}return s.moveVertically(i,!0,r)}).map(t);return s.dispatch({changes:t,selection:n,scrollIntoView:!0,userEvent:"delete.line"}),!0};function T8(s,e){if(/\(\)|\[\]|\{\}/.test(s.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=us(s).resolveInner(e),n=t.childBefore(e),i=t.childAfter(e),r;return n&&i&&n.to<=e&&i.from>=e&&(r=n.type.prop(et.closedBy))&&r.indexOf(i.name)>-1&&s.doc.lineAt(n.to).from==s.doc.lineAt(i.from).from&&!/\S/.test(s.sliceDoc(n.to,i.from))?{from:n.to,to:i.from}:null}const qg=bb(!1),j8=bb(!0);function bb(s){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=e.changeByRange(i=>{let{from:r,to:o}=i,l=e.doc.lineAt(r),a=!s&&r==o&&T8(e,r);s&&(r=o=(o<=l.to?l:e.doc.lineAt(o)).to);let c=new pu(e,{simulateBreak:r,simulateDoubleBreak:!!a}),u=Af(c,r);for(u==null&&(u=Nr(/^\s*/.exec(e.doc.lineAt(r).text)[0],e.tabSize));o<l.to&&/\s/.test(l.text[o-l.from]);)o++;a?{from:r,to:o}=a:r>l.from&&r<l.from+100&&!/\S/.test(l.text.slice(0,r))&&(r=l.from);let d=["",Go(e,u)];return a&&d.push(Go(e,c.lineIndent(l.from,-1))),{changes:{from:r,to:o,insert:rt.of(d)},range:fe.cursor(r+1+d[1].length)}});return t(e.update(n,{scrollIntoView:!0,userEvent:"input"})),!0}}function Pf(s,e){let t=-1;return s.changeByRange(n=>{let i=[];for(let o=n.from;o<=n.to;){let l=s.doc.lineAt(o);l.number>t&&(n.empty||n.to>l.from)&&(e(l,i,n),t=l.number),o=l.to+1}let r=s.changes(i);return{changes:i,range:fe.range(r.mapPos(n.anchor,1),r.mapPos(n.head,1))}})}const O8=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let t=Object.create(null),n=new pu(s,{overrideIndentation:r=>{let o=t[r];return o??-1}}),i=Pf(s,(r,o,l)=>{let a=Af(n,r.from);if(a==null)return;/\S/.test(r.text)||(a=0);let c=/^\s*/.exec(r.text)[0],u=Go(s,a);(c!=u||l.from<r.from+c.length)&&(t[r.from]=a,o.push({from:r.from,to:r.from+c.length,insert:u}))});return i.changes.empty||e(s.update(i,{userEvent:"indent"})),!0},P8=({state:s,dispatch:e})=>s.readOnly?!1:(e(s.update(Pf(s,(t,n)=>{n.push({from:t.from,insert:s.facet(_f)})}),{userEvent:"input.indent"})),!0),$8=({state:s,dispatch:e})=>s.readOnly?!1:(e(s.update(Pf(s,(t,n)=>{let i=/^\s*/.exec(t.text)[0];if(!i)return;let r=Nr(i,s.tabSize),o=0,l=Go(s,Math.max(0,r-qi(s)));for(;o<i.length&&o<l.length&&i.charCodeAt(o)==l.charCodeAt(o);)o++;n.push({from:t.from+o,to:t.from+i.length,insert:l.slice(o)})}),{userEvent:"delete.dedent"})),!0),R8=s=>(s.setTabFocusMode(),!0),L8=[{key:"Ctrl-b",run:Qy,shift:rb,preventDefault:!0},{key:"Ctrl-f",run:Yy,shift:ob},{key:"Ctrl-p",run:eb,shift:ub},{key:"Ctrl-n",run:tb,shift:cb},{key:"Ctrl-a",run:ZM,shift:d8},{key:"Ctrl-e",run:e8,shift:f8},{key:"Ctrl-d",run:pb},{key:"Ctrl-h",run:Td},{key:"Ctrl-k",run:k8},{key:"Ctrl-Alt-h",run:mb},{key:"Ctrl-o",run:S8},{key:"Ctrl-t",run:C8},{key:"Ctrl-v",run:Ed}],V8=[{key:"ArrowLeft",run:Qy,shift:rb,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:HM,shift:n8,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:YM,shift:u8,preventDefault:!0},{key:"ArrowRight",run:Yy,shift:ob,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:qM,shift:i8,preventDefault:!0},{mac:"Cmd-ArrowRight",run:XM,shift:c8,preventDefault:!0},{key:"ArrowUp",run:eb,shift:ub,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Fg,shift:Ug},{mac:"Ctrl-ArrowUp",run:Bg,shift:Ig},{key:"ArrowDown",run:tb,shift:cb,preventDefault:!0},{mac:"Cmd-ArrowDown",run:zg,shift:Hg},{mac:"Ctrl-ArrowDown",run:Ed,shift:Ng},{key:"PageUp",run:Bg,shift:Ig},{key:"PageDown",run:Ed,shift:Ng},{key:"Home",run:QM,shift:a8,preventDefault:!0},{key:"Mod-Home",run:Fg,shift:Ug},{key:"End",run:JM,shift:l8,preventDefault:!0},{key:"Mod-End",run:zg,shift:Hg},{key:"Enter",run:qg,shift:qg},{key:"Mod-a",run:h8},{key:"Backspace",run:Td,shift:Td,preventDefault:!0},{key:"Delete",run:pb,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:mb,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:b8,preventDefault:!0},{mac:"Mod-Backspace",run:x8,preventDefault:!0},{mac:"Mod-Delete",run:w8,preventDefault:!0}].concat(L8.map(s=>({mac:s.key,run:s.run,shift:s.shift}))),B8=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:KM,shift:r8},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:GM,shift:o8},{key:"Alt-ArrowUp",run:_8},{key:"Shift-Alt-ArrowUp",run:M8},{key:"Alt-ArrowDown",run:A8},{key:"Shift-Alt-ArrowDown",run:D8},{key:"Mod-Alt-ArrowUp",run:m8},{key:"Mod-Alt-ArrowDown",run:v8},{key:"Escape",run:y8},{key:"Mod-Enter",run:j8},{key:"Alt-l",mac:"Ctrl-l",run:p8},{key:"Mod-i",run:g8,preventDefault:!0},{key:"Mod-[",run:$8},{key:"Mod-]",run:P8},{key:"Mod-Alt-\\",run:O8},{key:"Shift-Mod-k",run:E8},{key:"Shift-Mod-\\",run:s8},{key:"Mod-/",run:_M},{key:"Alt-A",run:MM},{key:"Ctrl-m",mac:"Shift-Alt-m",run:R8}].concat(V8),Wg=typeof String.prototype.normalize=="function"?s=>s.normalize("NFKD"):s=>s;class Pr{constructor(e,t,n=0,i=e.length,r,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(n,i),this.bufferStart=n,this.normalize=r?l=>r(Wg(l)):Wg,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Ss(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=rf(e),n=this.bufferStart+this.bufferPos;this.bufferPos+=mn(e);let i=this.normalize(t);if(i.length)for(let r=0,o=n;;r++){let l=i.charCodeAt(r),a=this.match(l,o,this.bufferPos+this.bufferStart);if(r==i.length-1){if(a)return this.value=a,this;break}o==n&&r<t.length&&t.charCodeAt(r)==l&&o++}}}match(e,t,n){let i=null;for(let r=0;r<this.matches.length;r+=2){let o=this.matches[r],l=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?i={from:this.matches[r+1],to:n}:(this.matches[r]++,l=!0)),l||(this.matches.splice(r,2),r-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:t,to:n}:this.matches.push(1,t)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}typeof Symbol<"u"&&(Pr.prototype[Symbol.iterator]=function(){return this});const kb={from:-1,to:-1,match:/.*/.exec("")},$f="gm"+(/x/.unicode==null?"":"u");class xb{constructor(e,t,n,i=0,r=e.length){if(this.text=e,this.to=r,this.curLine="",this.done=!1,this.value=kb,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new wb(e,t,n,i,r);this.re=new RegExp(t,$f+(n?.ignoreCase?"i":"")),this.test=n?.test,this.iter=e.iter();let o=e.lineAt(i);this.curLineStart=o.from,this.matchPos=Ba(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let n=this.curLineStart+t.index,i=n+t[0].length;if(this.matchPos=Ba(this.text,i+(n==i?1:0)),n==this.curLineStart+this.curLine.length&&this.nextLine(),(n<i||n>this.value.to)&&(!this.test||this.test(n,i,t)))return this.value={from:n,to:i,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const dc=new WeakMap;class wr{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,n){let i=dc.get(e);if(!i||i.from>=n||i.to<=t){let l=new wr(t,e.sliceString(t,n));return dc.set(e,l),l}if(i.from==t&&i.to==n)return i;let{text:r,from:o}=i;return o>t&&(r=e.sliceString(t,o)+r,o=t),i.to<n&&(r+=e.sliceString(i.to,n)),dc.set(e,new wr(o,r)),new wr(t,r.slice(t-o,n-o))}}class wb{constructor(e,t,n,i,r){this.text=e,this.to=r,this.done=!1,this.value=kb,this.matchPos=Ba(e,i),this.re=new RegExp(t,$f+(n?.ignoreCase?"i":"")),this.test=n?.test,this.flat=wr.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let n=this.flat.from+t.index,i=n+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(n,i,t)))return this.value={from:n,to:i,match:t},this.matchPos=Ba(this.text,i+(n==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=wr.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(xb.prototype[Symbol.iterator]=wb.prototype[Symbol.iterator]=function(){return this});function I8(s){try{return new RegExp(s,$f),!0}catch{return!1}}function Ba(s,e){if(e>=s.length)return e;let t=s.lineAt(e),n;for(;e<t.to&&(n=t.text.charCodeAt(e-t.from))>=56320&&n<57344;)e++;return e}function jd(s){let e=String(s.state.doc.lineAt(s.state.selection.main.head).number),t=yt("input",{class:"cm-textfield",name:"line",value:e}),n=yt("form",{class:"cm-gotoLine",onkeydown:r=>{r.keyCode==27?(r.preventDefault(),s.dispatch({effects:Mo.of(!1)}),s.focus()):r.keyCode==13&&(r.preventDefault(),i())},onsubmit:r=>{r.preventDefault(),i()}},yt("label",s.state.phrase("Go to line"),": ",t)," ",yt("button",{class:"cm-button",type:"submit"},s.state.phrase("go")),yt("button",{name:"close",onclick:()=>{s.dispatch({effects:Mo.of(!1)}),s.focus()},"aria-label":s.state.phrase("close"),type:"button"},[""]));function i(){let r=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!r)return;let{state:o}=s,l=o.doc.lineAt(o.selection.main.head),[,a,c,u,d]=r,h=u?+u.slice(1):0,p=c?+c:l.number;if(c&&d){let x=p/100;a&&(x=x*(a=="-"?-1:1)+l.number/o.doc.lines),p=Math.round(o.doc.lines*x)}else c&&a&&(p=p*(a=="-"?-1:1)+l.number);let y=o.doc.line(Math.max(1,Math.min(o.doc.lines,p))),b=fe.cursor(y.from+Math.max(0,Math.min(h,y.length)));s.dispatch({effects:[Mo.of(!1),Te.scrollIntoView(b.from,{y:"center"})],selection:b}),s.focus()}return{dom:n}}const Mo=Qe.define(),Kg=Yt.define({create(){return!0},update(s,e){for(let t of e.effects)t.is(Mo)&&(s=t.value);return s},provide:s=>qo.from(s,e=>e?jd:null)}),N8=s=>{let e=Ho(s,jd);if(!e){let t=[Mo.of(!0)];s.state.field(Kg,!1)==null&&t.push(Qe.appendConfig.of([Kg,F8])),s.dispatch({effects:t}),e=Ho(s,jd)}return e&&e.dom.querySelector("input").select(),!0},F8=Te.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),z8={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},U8=je.define({combine(s){return Sn(s,z8,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function H8(s){return[J8,G8]}const q8=Fe.mark({class:"cm-selectionMatch"}),W8=Fe.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function Gg(s,e,t,n){return(t==0||s(e.sliceDoc(t-1,t))!=At.Word)&&(n==e.doc.length||s(e.sliceDoc(n,n+1))!=At.Word)}function K8(s,e,t,n){return s(e.sliceDoc(t,t+1))==At.Word&&s(e.sliceDoc(n-1,n))==At.Word}const G8=Vt.fromClass(class{constructor(s){this.decorations=this.getDeco(s)}update(s){(s.selectionSet||s.docChanged||s.viewportChanged)&&(this.decorations=this.getDeco(s.view))}getDeco(s){let e=s.state.facet(U8),{state:t}=s,n=t.selection;if(n.ranges.length>1)return Fe.none;let i=n.main,r,o=null;if(i.empty){if(!e.highlightWordAroundCursor)return Fe.none;let a=t.wordAt(i.head);if(!a)return Fe.none;o=t.charCategorizer(i.head),r=t.sliceDoc(a.from,a.to)}else{let a=i.to-i.from;if(a<e.minSelectionLength||a>200)return Fe.none;if(e.wholeWords){if(r=t.sliceDoc(i.from,i.to),o=t.charCategorizer(i.head),!(Gg(o,t,i.from,i.to)&&K8(o,t,i.from,i.to)))return Fe.none}else if(r=t.sliceDoc(i.from,i.to),!r)return Fe.none}let l=[];for(let a of s.visibleRanges){let c=new Pr(t.doc,r,a.from,a.to);for(;!c.next().done;){let{from:u,to:d}=c.value;if((!o||Gg(o,t,u,d))&&(i.empty&&u<=i.from&&d>=i.to?l.push(W8.range(u,d)):(u>=i.to||d<=i.from)&&l.push(q8.range(u,d)),l.length>e.maxMatches))return Fe.none}}return Fe.set(l)}},{decorations:s=>s.decorations}),J8=Te.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),Q8=({state:s,dispatch:e})=>{let{selection:t}=s,n=fe.create(t.ranges.map(i=>s.wordAt(i.head)||fe.cursor(i.head)),t.mainIndex);return n.eq(t)?!1:(e(s.update({selection:n})),!0)};function Y8(s,e){let{main:t,ranges:n}=s.selection,i=s.wordAt(t.head),r=i&&i.from==t.from&&i.to==t.to;for(let o=!1,l=new Pr(s.doc,e,n[n.length-1].to);;)if(l.next(),l.done){if(o)return null;l=new Pr(s.doc,e,0,Math.max(0,n[n.length-1].from-1)),o=!0}else{if(o&&n.some(a=>a.from==l.value.from))continue;if(r){let a=s.wordAt(l.value.from);if(!a||a.from!=l.value.from||a.to!=l.value.to)continue}return l.value}}const X8=({state:s,dispatch:e})=>{let{ranges:t}=s.selection;if(t.some(r=>r.from===r.to))return Q8({state:s,dispatch:e});let n=s.sliceDoc(t[0].from,t[0].to);if(s.selection.ranges.some(r=>s.sliceDoc(r.from,r.to)!=n))return!1;let i=Y8(s,n);return i?(e(s.update({selection:s.selection.addRange(fe.range(i.from,i.to),!1),effects:Te.scrollIntoView(i.to)})),!0):!1},zr=je.define({combine(s){return Sn(s,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new cD(e),scrollToMatch:e=>Te.scrollIntoView(e)})}});class Sb{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||I8(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,n)=>n=="n"?`
`:n=="r"?"\r":n=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new sD(this):new eD(this)}getCursor(e,t=0,n){let i=e.doc?e:nt.create({doc:e});return n==null&&(n=i.doc.length),this.regexp?rr(this,i,t,n):ir(this,i,t,n)}}class Cb{constructor(e){this.spec=e}}function ir(s,e,t,n){return new Pr(e.doc,s.unquoted,t,n,s.caseSensitive?void 0:i=>i.toLowerCase(),s.wholeWord?Z8(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function Z8(s,e){return(t,n,i,r)=>((r>t||r+i.length<n)&&(r=Math.max(0,t-2),i=s.sliceString(r,Math.min(s.length,n+2))),(e(Ia(i,t-r))!=At.Word||e(Na(i,t-r))!=At.Word)&&(e(Na(i,n-r))!=At.Word||e(Ia(i,n-r))!=At.Word))}class eD extends Cb{constructor(e){super(e)}nextMatch(e,t,n){let i=ir(this.spec,e,n,e.doc.length).nextOverlapping();if(i.done){let r=Math.min(e.doc.length,t+this.spec.unquoted.length);i=ir(this.spec,e,0,r).nextOverlapping()}return i.done||i.value.from==t&&i.value.to==n?null:i.value}prevMatchInRange(e,t,n){for(let i=n;;){let r=Math.max(t,i-1e4-this.spec.unquoted.length),o=ir(this.spec,e,r,i),l=null;for(;!o.nextOverlapping().done;)l=o.value;if(l)return l;if(r==t)return null;i-=1e4}}prevMatch(e,t,n){let i=this.prevMatchInRange(e,0,t);return i||(i=this.prevMatchInRange(e,Math.max(0,n-this.spec.unquoted.length),e.doc.length)),i&&(i.from!=t||i.to!=n)?i:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let n=ir(this.spec,e,0,e.doc.length),i=[];for(;!n.next().done;){if(i.length>=t)return null;i.push(n.value)}return i}highlight(e,t,n,i){let r=ir(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(n+this.spec.unquoted.length,e.doc.length));for(;!r.next().done;)i(r.value.from,r.value.to)}}function rr(s,e,t,n){return new xb(e.doc,s.search,{ignoreCase:!s.caseSensitive,test:s.wholeWord?tD(e.charCategorizer(e.selection.main.head)):void 0},t,n)}function Ia(s,e){return s.slice(Qt(s,e,!1),e)}function Na(s,e){return s.slice(e,Qt(s,e))}function tD(s){return(e,t,n)=>!n[0].length||(s(Ia(n.input,n.index))!=At.Word||s(Na(n.input,n.index))!=At.Word)&&(s(Na(n.input,n.index+n[0].length))!=At.Word||s(Ia(n.input,n.index+n[0].length))!=At.Word)}class sD extends Cb{nextMatch(e,t,n){let i=rr(this.spec,e,n,e.doc.length).next();return i.done&&(i=rr(this.spec,e,0,t).next()),i.done?null:i.value}prevMatchInRange(e,t,n){for(let i=1;;i++){let r=Math.max(t,n-i*1e4),o=rr(this.spec,e,r,n),l=null;for(;!o.next().done;)l=o.value;if(l&&(r==t||l.from>r+10))return l;if(r==t)return null}}prevMatch(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(t,n)=>{if(n=="&")return e.match[0];if(n=="$")return"$";for(let i=n.length;i>0;i--){let r=+n.slice(0,i);if(r>0&&r<e.match.length)return e.match[r]+n.slice(i)}return t})}matchAll(e,t){let n=rr(this.spec,e,0,e.doc.length),i=[];for(;!n.next().done;){if(i.length>=t)return null;i.push(n.value)}return i}highlight(e,t,n,i){let r=rr(this.spec,e,Math.max(0,t-250),Math.min(n+250,e.doc.length));for(;!r.next().done;)i(r.value.from,r.value.to)}}const Qo=Qe.define(),Rf=Qe.define(),li=Yt.define({create(s){return new fc(Od(s).create(),null)},update(s,e){for(let t of e.effects)t.is(Qo)?s=new fc(t.value.create(),s.panel):t.is(Rf)&&(s=new fc(s.query,t.value?Lf:null));return s},provide:s=>qo.from(s,e=>e.panel)});class fc{constructor(e,t){this.query=e,this.panel=t}}const nD=Fe.mark({class:"cm-searchMatch"}),iD=Fe.mark({class:"cm-searchMatch cm-searchMatch-selected"}),rD=Vt.fromClass(class{constructor(s){this.view=s,this.decorations=this.highlight(s.state.field(li))}update(s){let e=s.state.field(li);(e!=s.startState.field(li)||s.docChanged||s.selectionSet||s.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:s,panel:e}){if(!e||!s.spec.valid)return Fe.none;let{view:t}=this,n=new In;for(let i=0,r=t.visibleRanges,o=r.length;i<o;i++){let{from:l,to:a}=r[i];for(;i<o-1&&a>r[i+1].from-500;)a=r[++i].to;s.highlight(t.state,l,a,(c,u)=>{let d=t.state.selection.ranges.some(h=>h.from==c&&h.to==u);n.add(c,u,d?iD:nD)})}return n.finish()}},{decorations:s=>s.decorations});function hl(s){return e=>{let t=e.state.field(li,!1);return t&&t.query.spec.valid?s(e,t):Mb(e)}}const Fa=hl((s,{query:e})=>{let{to:t}=s.state.selection.main,n=e.nextMatch(s.state,t,t);if(!n)return!1;let i=fe.single(n.from,n.to),r=s.state.facet(zr);return s.dispatch({selection:i,effects:[Vf(s,n),r.scrollToMatch(i.main,s)],userEvent:"select.search"}),Ab(s),!0}),za=hl((s,{query:e})=>{let{state:t}=s,{from:n}=t.selection.main,i=e.prevMatch(t,n,n);if(!i)return!1;let r=fe.single(i.from,i.to),o=s.state.facet(zr);return s.dispatch({selection:r,effects:[Vf(s,i),o.scrollToMatch(r.main,s)],userEvent:"select.search"}),Ab(s),!0}),oD=hl((s,{query:e})=>{let t=e.matchAll(s.state,1e3);return!t||!t.length?!1:(s.dispatch({selection:fe.create(t.map(n=>fe.range(n.from,n.to))),userEvent:"select.search.matches"}),!0)}),lD=({state:s,dispatch:e})=>{let t=s.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:n,to:i}=t.main,r=[],o=0;for(let l=new Pr(s.doc,s.sliceDoc(n,i));!l.next().done;){if(r.length>1e3)return!1;l.value.from==n&&(o=r.length),r.push(fe.range(l.value.from,l.value.to))}return e(s.update({selection:fe.create(r,o),userEvent:"select.search.matches"})),!0},Jg=hl((s,{query:e})=>{let{state:t}=s,{from:n,to:i}=t.selection.main;if(t.readOnly)return!1;let r=e.nextMatch(t,n,n);if(!r)return!1;let o=r,l=[],a,c,u=[];o.from==n&&o.to==i&&(c=t.toText(e.getReplacement(o)),l.push({from:o.from,to:o.to,insert:c}),o=e.nextMatch(t,o.from,o.to),u.push(Te.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(n).number)+".")));let d=s.state.changes(l);return o&&(a=fe.single(o.from,o.to).map(d),u.push(Vf(s,o)),u.push(t.facet(zr).scrollToMatch(a.main,s))),s.dispatch({changes:d,selection:a,effects:u,userEvent:"input.replace"}),!0}),aD=hl((s,{query:e})=>{if(s.state.readOnly)return!1;let t=e.matchAll(s.state,1e9).map(i=>{let{from:r,to:o}=i;return{from:r,to:o,insert:e.getReplacement(i)}});if(!t.length)return!1;let n=s.state.phrase("replaced $ matches",t.length)+".";return s.dispatch({changes:t,effects:Te.announce.of(n),userEvent:"input.replace.all"}),!0});function Lf(s){return s.state.facet(zr).createPanel(s)}function Od(s,e){var t,n,i,r,o;let l=s.selection.main,a=l.empty||l.to>l.from+100?"":s.sliceDoc(l.from,l.to);if(e&&!a)return e;let c=s.facet(zr);return new Sb({search:((t=e?.literal)!==null&&t!==void 0?t:c.literal)?a:a.replace(/\n/g,"\\n"),caseSensitive:(n=e?.caseSensitive)!==null&&n!==void 0?n:c.caseSensitive,literal:(i=e?.literal)!==null&&i!==void 0?i:c.literal,regexp:(r=e?.regexp)!==null&&r!==void 0?r:c.regexp,wholeWord:(o=e?.wholeWord)!==null&&o!==void 0?o:c.wholeWord})}function _b(s){let e=Ho(s,Lf);return e&&e.dom.querySelector("[main-field]")}function Ab(s){let e=_b(s);e&&e==s.root.activeElement&&e.select()}const Mb=s=>{let e=s.state.field(li,!1);if(e&&e.panel){let t=_b(s);if(t&&t!=s.root.activeElement){let n=Od(s.state,e.query.spec);n.valid&&s.dispatch({effects:Qo.of(n)}),t.focus(),t.select()}}else s.dispatch({effects:[Rf.of(!0),e?Qo.of(Od(s.state,e.query.spec)):Qe.appendConfig.of(fD)]});return!0},Db=s=>{let e=s.state.field(li,!1);if(!e||!e.panel)return!1;let t=Ho(s,Lf);return t&&t.dom.contains(s.root.activeElement)&&s.focus(),s.dispatch({effects:Rf.of(!1)}),!0},uD=[{key:"Mod-f",run:Mb,scope:"editor search-panel"},{key:"F3",run:Fa,shift:za,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Fa,shift:za,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Db,scope:"editor search-panel"},{key:"Mod-Shift-l",run:lD},{key:"Mod-Alt-g",run:N8},{key:"Mod-d",run:X8,preventDefault:!0}];class cD{constructor(e){this.view=e;let t=this.query=e.state.field(li).query.spec;this.commit=this.commit.bind(this),this.searchField=yt("input",{value:t.search,placeholder:Ts(e,"Find"),"aria-label":Ts(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=yt("input",{value:t.replace,placeholder:Ts(e,"Replace"),"aria-label":Ts(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=yt("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=yt("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=yt("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function n(i,r,o){return yt("button",{class:"cm-button",name:i,onclick:r,type:"button"},o)}this.dom=yt("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,n("next",()=>Fa(e),[Ts(e,"next")]),n("prev",()=>za(e),[Ts(e,"previous")]),n("select",()=>oD(e),[Ts(e,"all")]),yt("label",null,[this.caseField,Ts(e,"match case")]),yt("label",null,[this.reField,Ts(e,"regexp")]),yt("label",null,[this.wordField,Ts(e,"by word")]),...e.state.readOnly?[]:[yt("br"),this.replaceField,n("replace",()=>Jg(e),[Ts(e,"replace")]),n("replaceAll",()=>aD(e),[Ts(e,"replace all")])],yt("button",{name:"close",onclick:()=>Db(e),"aria-label":Ts(e,"close"),type:"button"},[""])])}commit(){let e=new Sb({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Qo.of(e)}))}keydown(e){f3(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?za:Fa)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),Jg(this.view))}update(e){for(let t of e.transactions)for(let n of t.effects)n.is(Qo)&&!n.value.eq(this.query)&&this.setQuery(n.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(zr).top}}function Ts(s,e){return s.state.phrase(e)}const Ql=30,Yl=/[\s\.,:;?!]/;function Vf(s,{from:e,to:t}){let n=s.state.doc.lineAt(e),i=s.state.doc.lineAt(t).to,r=Math.max(n.from,e-Ql),o=Math.min(i,t+Ql),l=s.state.sliceDoc(r,o);if(r!=n.from){for(let a=0;a<Ql;a++)if(!Yl.test(l[a+1])&&Yl.test(l[a])){l=l.slice(a);break}}if(o!=i){for(let a=l.length-1;a>l.length-Ql;a--)if(!Yl.test(l[a-1])&&Yl.test(l[a])){l=l.slice(0,a);break}}return Te.announce.of(`${s.state.phrase("current match")}. ${l} ${s.state.phrase("on line")} ${n.number}.`)}const dD=Te.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),fD=[li,Gi.low(rD),dD];class Eb{constructor(e,t,n,i){this.state=e,this.pos=t,this.explicit=n,this.view=i,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=us(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),n=Math.max(t.from,this.pos-250),i=t.text.slice(n-t.from,this.pos-t.from),r=i.search(Tb(e,!1));return r<0?null:{from:n+r,to:this.pos,text:i.slice(r)}}get aborted(){return this.abortListeners==null}addEventListener(e,t,n){e=="abort"&&this.abortListeners&&(this.abortListeners.push(t),n&&n.onDocChange&&(this.abortOnDocChange=!0))}}function Qg(s){let e=Object.keys(s).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function hD(s){let e=Object.create(null),t=Object.create(null);for(let{label:i}of s){e[i[0]]=!0;for(let r=1;r<i.length;r++)t[i[r]]=!0}let n=Qg(e)+Qg(t)+"*$";return[new RegExp("^"+n),new RegExp(n)]}function pD(s){let e=s.map(i=>typeof i=="string"?{label:i}:i),[t,n]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:hD(e);return i=>{let r=i.matchBefore(n);return r||i.explicit?{from:r?r.from:i.pos,options:e,validFor:t}:null}}class Yg{constructor(e,t,n,i){this.completion=e,this.source=t,this.match=n,this.score=i}}function Vi(s){return s.selection.main.from}function Tb(s,e){var t;let{source:n}=s,i=e&&n[0]!="^",r=n[n.length-1]!="$";return!i&&!r?s:new RegExp(`${i?"^":""}(?:${n})${r?"$":""}`,(t=s.flags)!==null&&t!==void 0?t:s.ignoreCase?"i":"")}const jb=Un.define();function gD(s,e,t,n){let{main:i}=s.selection,r=t-i.from,o=n-i.from;return{...s.changeByRange(l=>{if(l!=i&&t!=n&&s.sliceDoc(l.from+r,l.from+o)!=s.sliceDoc(t,n))return{range:l};let a=s.toText(e);return{changes:{from:l.from+r,to:n==i.from?l.to:l.from+o,insert:a},range:fe.cursor(l.from+r+a.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}const Xg=new WeakMap;function mD(s){if(!Array.isArray(s))return s;let e=Xg.get(s);return e||Xg.set(s,e=pD(s)),e}const Ua=Qe.define(),Yo=Qe.define();class vD{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let n=Ss(e,t),i=mn(n);this.chars.push(n);let r=e.slice(t,t+i),o=r.toUpperCase();this.folded.push(Ss(o==r?r.toLowerCase():o,0)),t+=i}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:n,any:i,precise:r,byWord:o}=this;if(t.length==1){let j=Ss(e,0),B=mn(j),U=B==e.length?0:-100;if(j!=t[0])if(j==n[0])U+=-200;else return null;return this.ret(U,[0,B])}let l=e.indexOf(this.pattern);if(l==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let a=t.length,c=0;if(l<0){for(let j=0,B=Math.min(e.length,200);j<B&&c<a;){let U=Ss(e,j);(U==t[c]||U==n[c])&&(i[c++]=j),j+=mn(U)}if(c<a)return null}let u=0,d=0,h=!1,p=0,y=-1,b=-1,x=/[a-z]/.test(e),g=!0;for(let j=0,B=Math.min(e.length,200),U=0;j<B&&d<a;){let I=Ss(e,j);l<0&&(u<a&&I==t[u]&&(r[u++]=j),p<a&&(I==t[p]||I==n[p]?(p==0&&(y=j),b=j+1,p++):p=0));let L,_=I<255?I>=48&&I<=57||I>=97&&I<=122?2:I>=65&&I<=90?1:0:(L=rf(I))!=L.toLowerCase()?1:L!=L.toUpperCase()?2:0;(!j||_==1&&x||U==0&&_!=0)&&(t[d]==I||n[d]==I&&(h=!0)?o[d++]=j:o.length&&(g=!1)),U=_,j+=mn(I)}return d==a&&o[0]==0&&g?this.result(-100+(h?-200:0),o,e):p==a&&y==0?this.ret(-200-e.length+(b==e.length?0:-100),[0,b]):l>-1?this.ret(-700-e.length,[l,l+this.pattern.length]):p==a?this.ret(-900-e.length,[y,b]):d==a?this.result(-100+(h?-200:0)+-700+(g?0:-1100),o,e):t.length==2?null:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,t,n){let i=[],r=0;for(let o of t){let l=o+(this.astral?mn(Ss(n,o)):1);r&&i[r-1]==o?i[r-1]=l:(i[r++]=o,i[r++]=l)}return this.ret(e-n.length,i)}}class yD{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),n=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return n==null?null:(this.matched=[0,t.length],this.score=n+(e.length==this.pattern.length?0:-100),this)}}const zt=je.define({combine(s){return Sn(s,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:bD,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>n=>Zg(e(n),t(n)),optionClass:(e,t)=>n=>Zg(e(n),t(n)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})}});function Zg(s,e){return s?e?s+" "+e:s:e}function bD(s,e,t,n,i,r){let o=s.textDirection==Ct.RTL,l=o,a=!1,c="top",u,d,h=e.left-i.left,p=i.right-e.right,y=n.right-n.left,b=n.bottom-n.top;if(l&&h<Math.min(y,p)?l=!1:!l&&p<Math.min(y,h)&&(l=!0),y<=(l?h:p))u=Math.max(i.top,Math.min(t.top,i.bottom-b))-e.top,d=Math.min(400,l?h:p);else{a=!0,d=Math.min(400,(o?e.right:i.right-e.left)-30);let j=i.bottom-e.bottom;j>=b||j>e.top?u=t.bottom-e.top:(c="bottom",u=e.bottom-t.top)}let x=(e.bottom-e.top)/r.offsetHeight,g=(e.right-e.left)/r.offsetWidth;return{style:`${c}: ${u/x}px; max-width: ${d/g}px`,class:"cm-completionInfo-"+(a?o?"left-narrow":"right-narrow":l?"left":"right")}}function kD(s){let e=s.addToOptions.slice();return s.icons&&e.push({render(t){let n=document.createElement("div");return n.classList.add("cm-completionIcon"),t.type&&n.classList.add(...t.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),n.setAttribute("aria-hidden","true"),n},position:20}),e.push({render(t,n,i,r){let o=document.createElement("span");o.className="cm-completionLabel";let l=t.displayLabel||t.label,a=0;for(let c=0;c<r.length;){let u=r[c++],d=r[c++];u>a&&o.appendChild(document.createTextNode(l.slice(a,u)));let h=o.appendChild(document.createElement("span"));h.appendChild(document.createTextNode(l.slice(u,d))),h.className="cm-completionMatchedText",a=d}return a<l.length&&o.appendChild(document.createTextNode(l.slice(a))),o},position:50},{render(t){if(!t.detail)return null;let n=document.createElement("span");return n.className="cm-completionDetail",n.textContent=t.detail,n},position:80}),e.sort((t,n)=>t.position-n.position).map(t=>t.render)}function hc(s,e,t){if(s<=t)return{from:0,to:s};if(e<0&&(e=0),e<=s>>1){let i=Math.floor(e/t);return{from:i*t,to:(i+1)*t}}let n=Math.floor((s-e)/t);return{from:s-(n+1)*t,to:s-n*t}}class xD{constructor(e,t,n){this.view=e,this.stateField=t,this.applyCompletion=n,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:a=>this.placeInfo(a),key:this},this.space=null,this.currentClass="";let i=e.state.field(t),{options:r,selected:o}=i.open,l=e.state.facet(zt);this.optionContent=kD(l),this.optionClass=l.optionClass,this.tooltipClass=l.tooltipClass,this.range=hc(r.length,o,l.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",a=>{let{options:c}=e.state.field(t).open;for(let u=a.target,d;u&&u!=this.dom;u=u.parentNode)if(u.nodeName=="LI"&&(d=/-(\d+)$/.exec(u.id))&&+d[1]<c.length){this.applyCompletion(e,c[+d[1]]),a.preventDefault();return}}),this.dom.addEventListener("focusout",a=>{let c=e.state.field(this.stateField,!1);c&&c.tooltip&&e.state.facet(zt).closeOnBlur&&a.relatedTarget!=e.contentDOM&&e.dispatch({effects:Yo.of(null)})}),this.showOptions(r,i.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let n=e.state.field(this.stateField),i=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),n!=i){let{options:r,selected:o,disabled:l}=n.open;(!i.open||i.open.options!=r)&&(this.range=hc(r.length,o,e.state.facet(zt).maxRenderedOptions),this.showOptions(r,n.id)),this.updateSel(),l!=((t=i.open)===null||t===void 0?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!l)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let n of this.currentClass.split(" "))n&&this.dom.classList.remove(n);for(let n of t.split(" "))n&&this.dom.classList.add(n);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;(t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=hc(t.options.length,t.selected,this.view.state.facet(zt).maxRenderedOptions),this.showOptions(t.options,e.id));let n=this.updateSelectedOption(t.selected);if(n){this.destroyInfo();let{completion:i}=t.options[t.selected],{info:r}=i;if(!r)return;let o=typeof r=="string"?document.createTextNode(r):r(i);if(!o)return;"then"in o?o.then(l=>{l&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(l,i)}).catch(l=>_s(this.view.state,l,"completion info")):(this.addInfoPane(o,i),n.setAttribute("aria-describedby",this.info.id))}}addInfoPane(e,t){this.destroyInfo();let n=this.info=document.createElement("div");if(n.className="cm-tooltip cm-completionInfo",n.id="cm-completionInfo-"+Math.floor(Math.random()*65535).toString(16),e.nodeType!=null)n.appendChild(e),this.infoDestroy=null;else{let{dom:i,destroy:r}=e;n.appendChild(i),this.infoDestroy=r||null}this.dom.appendChild(n),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let n=this.list.firstChild,i=this.range.from;n;n=n.nextSibling,i++)n.nodeName!="LI"||!n.id?i--:i==e?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),t=n):n.hasAttribute("aria-selected")&&(n.removeAttribute("aria-selected"),n.removeAttribute("aria-describedby"));return t&&SD(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),r=this.space;if(!r){let o=this.dom.ownerDocument.documentElement;r={left:0,top:0,right:o.clientWidth,bottom:o.clientHeight}}return i.top>Math.min(r.bottom,t.bottom)-10||i.bottom<Math.max(r.top,t.top)+10?null:this.view.state.facet(zt).positionInfo(this.view,t,i,n,r,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,n){const i=document.createElement("ul");i.id=t,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions")),i.addEventListener("mousedown",o=>{o.target==i&&o.preventDefault()});let r=null;for(let o=n.from;o<n.to;o++){let{completion:l,match:a}=e[o],{section:c}=l;if(c){let h=typeof c=="string"?c:c.name;if(h!=r&&(o>n.from||n.from==0))if(r=h,typeof c!="string"&&c.header)i.appendChild(c.header(c));else{let p=i.appendChild(document.createElement("completion-section"));p.textContent=h}}const u=i.appendChild(document.createElement("li"));u.id=t+"-"+o,u.setAttribute("role","option");let d=this.optionClass(l);d&&(u.className=d);for(let h of this.optionContent){let p=h(l,this.view.state,this.view,a);p&&u.appendChild(p)}}return n.from&&i.classList.add("cm-completionListIncompleteTop"),n.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function wD(s,e){return t=>new xD(t,s,e)}function SD(s,e){let t=s.getBoundingClientRect(),n=e.getBoundingClientRect(),i=t.height/s.offsetHeight;n.top<t.top?s.scrollTop-=(t.top-n.top)/i:n.bottom>t.bottom&&(s.scrollTop+=(n.bottom-t.bottom)/i)}function em(s){return(s.boost||0)*100+(s.apply?10:0)+(s.info?5:0)+(s.type?1:0)}function CD(s,e){let t=[],n=null,i=null,r=u=>{t.push(u);let{section:d}=u.completion;if(d){n||(n=[]);let h=typeof d=="string"?d:d.name;n.some(p=>p.name==h)||n.push(typeof d=="string"?{name:h}:d)}},o=e.facet(zt);for(let u of s)if(u.hasResult()){let d=u.result.getMatch;if(u.result.filter===!1)for(let h of u.result.options)r(new Yg(h,u.source,d?d(h):[],1e9-t.length));else{let h=e.sliceDoc(u.from,u.to),p,y=o.filterStrict?new yD(h):new vD(h);for(let b of u.result.options)if(p=y.match(b.label)){let x=b.displayLabel?d?d(b,p.matched):[]:p.matched,g=p.score+(b.boost||0);if(r(new Yg(b,u.source,x,g)),typeof b.section=="object"&&b.section.rank==="dynamic"){let{name:j}=b.section;i||(i=Object.create(null)),i[j]=Math.max(g,i[j]||-1e9)}}}}if(n){let u=Object.create(null),d=0,h=(p,y)=>(p.rank==="dynamic"&&y.rank==="dynamic"?i[y.name]-i[p.name]:0)||(typeof p.rank=="number"?p.rank:1e9)-(typeof y.rank=="number"?y.rank:1e9)||(p.name<y.name?-1:1);for(let p of n.sort(h))d-=1e5,u[p.name]=d;for(let p of t){let{section:y}=p.completion;y&&(p.score+=u[typeof y=="string"?y:y.name])}}let l=[],a=null,c=o.compareCompletions;for(let u of t.sort((d,h)=>h.score-d.score||c(d.completion,h.completion))){let d=u.completion;!a||a.label!=d.label||a.detail!=d.detail||a.type!=null&&d.type!=null&&a.type!=d.type||a.apply!=d.apply||a.boost!=d.boost?l.push(u):em(u.completion)>em(a)&&(l[l.length-1]=u),a=u.completion}return l}class ur{constructor(e,t,n,i,r,o){this.options=e,this.attrs=t,this.tooltip=n,this.timestamp=i,this.selected=r,this.disabled=o}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new ur(this.options,tm(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,n,i,r,o){if(i&&!o&&e.some(c=>c.isPending))return i.setDisabled();let l=CD(e,t);if(!l.length)return i&&e.some(c=>c.isPending)?i.setDisabled():null;let a=t.facet(zt).selectOnOpen?0:-1;if(i&&i.selected!=a&&i.selected!=-1){let c=i.options[i.selected].completion;for(let u=0;u<l.length;u++)if(l[u].completion==c){a=u;break}}return new ur(l,tm(n,a),{pos:e.reduce((c,u)=>u.hasResult()?Math.min(c,u.from):c,1e8),create:TD,above:r.aboveCursor},i?i.timestamp:Date.now(),a,!1)}map(e){return new ur(this.options,this.attrs,{...this.tooltip,pos:e.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new ur(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class Ha{constructor(e,t,n){this.active=e,this.id=t,this.open=n}static start(){return new Ha(DD,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,n=t.facet(zt),r=(n.override||t.languageDataAt("autocomplete",Vi(t)).map(mD)).map(a=>(this.active.find(u=>u.source==a)||new Ns(a,this.active.some(u=>u.state!=0)?1:0)).update(e,n));r.length==this.active.length&&r.every((a,c)=>a==this.active[c])&&(r=this.active);let o=this.open,l=e.effects.some(a=>a.is(Bf));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||r.some(a=>a.hasResult()&&e.changes.touchesRange(a.from,a.to))||!_D(r,this.active)||l?o=ur.build(r,t,this.id,o,n,l):o&&o.disabled&&!r.some(a=>a.isPending)&&(o=null),!o&&r.every(a=>!a.isPending)&&r.some(a=>a.hasResult())&&(r=r.map(a=>a.hasResult()?new Ns(a.source,0):a));for(let a of e.effects)a.is(Pb)&&(o=o&&o.setSelected(a.value,this.id));return r==this.active&&o==this.open?this:new Ha(r,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?AD:MD}}function _D(s,e){if(s==e)return!0;for(let t=0,n=0;;){for(;t<s.length&&!s[t].hasResult();)t++;for(;n<e.length&&!e[n].hasResult();)n++;let i=t==s.length,r=n==e.length;if(i||r)return i==r;if(s[t++].result!=e[n++].result)return!1}}const AD={"aria-autocomplete":"list"},MD={};function tm(s,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":s};return e>-1&&(t["aria-activedescendant"]=s+"-"+e),t}const DD=[];function Ob(s,e){if(s.isUserEvent("input.complete")){let n=s.annotation(jb);if(n&&e.activateOnCompletion(n))return 12}let t=s.isUserEvent("input.type");return t&&e.activateOnTyping?5:t?1:s.isUserEvent("delete.backward")?2:s.selection?8:s.docChanged?16:0}class Ns{constructor(e,t,n=!1){this.source=e,this.state=t,this.explicit=n}hasResult(){return!1}get isPending(){return this.state==1}update(e,t){let n=Ob(e,t),i=this;(n&8||n&16&&this.touches(e))&&(i=new Ns(i.source,0)),n&4&&i.state==0&&(i=new Ns(this.source,1)),i=i.updateFor(e,n);for(let r of e.effects)if(r.is(Ua))i=new Ns(i.source,1,r.value);else if(r.is(Yo))i=new Ns(i.source,0);else if(r.is(Bf))for(let o of r.value)o.source==i.source&&(i=o);return i}updateFor(e,t){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(Vi(e.state))}}class Sr extends Ns{constructor(e,t,n,i,r,o){super(e,3,t),this.limit=n,this.result=i,this.from=r,this.to=o}hasResult(){return!0}updateFor(e,t){var n;if(!(t&3))return this.map(e.changes);let i=this.result;i.map&&!e.changes.empty&&(i=i.map(i,e.changes));let r=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),l=Vi(e.state);if(l>o||!i||t&2&&(Vi(e.startState)==this.from||l<this.limit))return new Ns(this.source,t&4?1:0);let a=e.changes.mapPos(this.limit);return ED(i.validFor,e.state,r,o)?new Sr(this.source,this.explicit,a,i,r,o):i.update&&(i=i.update(i,r,o,new Eb(e.state,l,!1)))?new Sr(this.source,this.explicit,a,i,i.from,(n=i.to)!==null&&n!==void 0?n:Vi(e.state)):new Ns(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new Sr(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new Ns(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function ED(s,e,t,n){if(!s)return!1;let i=e.sliceDoc(t,n);return typeof s=="function"?s(i,t,n,e):Tb(s,!0).test(i)}const Bf=Qe.define({map(s,e){return s.map(t=>t.map(e))}}),Pb=Qe.define(),Cs=Yt.define({create(){return Ha.start()},update(s,e){return s.update(e)},provide:s=>[kf.from(s,e=>e.tooltip),Te.contentAttributes.from(s,e=>e.attrs)]});function If(s,e){const t=e.completion.apply||e.completion.label;let n=s.state.field(Cs).active.find(i=>i.source==e.source);return n instanceof Sr?(typeof t=="string"?s.dispatch({...gD(s.state,t,n.from,n.to),annotations:jb.of(e.completion)}):t(s,e.completion,n.from,n.to),!0):!1}const TD=wD(Cs,If);function Xl(s,e="option"){return t=>{let n=t.state.field(Cs,!1);if(!n||!n.open||n.open.disabled||Date.now()-n.open.timestamp<t.state.facet(zt).interactionDelay)return!1;let i=1,r;e=="page"&&(r=fy(t,n.open.tooltip))&&(i=Math.max(2,Math.floor(r.dom.offsetHeight/r.dom.querySelector("li").offsetHeight)-1));let{length:o}=n.open.options,l=n.open.selected>-1?n.open.selected+i*(s?1:-1):s?0:o-1;return l<0?l=e=="page"?0:o-1:l>=o&&(l=e=="page"?o-1:0),t.dispatch({effects:Pb.of(l)}),!0}}const jD=s=>{let e=s.state.field(Cs,!1);return s.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<s.state.facet(zt).interactionDelay?!1:If(s,e.open.options[e.open.selected])},pc=s=>s.state.field(Cs,!1)?(s.dispatch({effects:Ua.of(!0)}),!0):!1,OD=s=>{let e=s.state.field(Cs,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(s.dispatch({effects:Yo.of(null)}),!0)};class PD{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const $D=50,RD=1e3,LD=Vt.fromClass(class{constructor(s){this.view=s,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of s.state.field(Cs).active)e.isPending&&this.startQuery(e)}update(s){let e=s.state.field(Cs),t=s.state.facet(zt);if(!s.selectionSet&&!s.docChanged&&s.startState.field(Cs)==e)return;let n=s.transactions.some(r=>{let o=Ob(r,t);return o&8||(r.selection||r.docChanged)&&!(o&3)});for(let r=0;r<this.running.length;r++){let o=this.running[r];if(n||o.context.abortOnDocChange&&s.docChanged||o.updates.length+s.transactions.length>$D&&Date.now()-o.time>RD){for(let l of o.context.abortListeners)try{l()}catch(a){_s(this.view.state,a)}o.context.abortListeners=null,this.running.splice(r--,1)}else o.updates.push(...s.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),s.transactions.some(r=>r.effects.some(o=>o.is(Ua)))&&(this.pendingStart=!0);let i=this.pendingStart?50:t.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(r=>r.isPending&&!this.running.some(o=>o.active.source==r.source))?setTimeout(()=>this.startUpdate(),i):-1,this.composing!=0)for(let r of s.transactions)r.isUserEvent("input.type")?this.composing=2:this.composing==2&&r.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:s}=this.view,e=s.field(Cs);for(let t of e.active)t.isPending&&!this.running.some(n=>n.active.source==t.source)&&this.startQuery(t);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(zt).updateSyncTime))}startQuery(s){let{state:e}=this.view,t=Vi(e),n=new Eb(e,t,s.explicit,this.view),i=new PD(s,n);this.running.push(i),Promise.resolve(s.source(n)).then(r=>{i.context.aborted||(i.done=r||null,this.scheduleAccept())},r=>{this.view.dispatch({effects:Yo.of(null)}),_s(this.view.state,r)})}scheduleAccept(){this.running.every(s=>s.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(zt).updateSyncTime))}accept(){var s;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(zt),n=this.view.state.field(Cs);for(let i=0;i<this.running.length;i++){let r=this.running[i];if(r.done===void 0)continue;if(this.running.splice(i--,1),r.done){let l=Vi(r.updates.length?r.updates[0].startState:this.view.state),a=Math.min(l,r.done.from+(r.active.explicit?0:1)),c=new Sr(r.active.source,r.active.explicit,a,r.done,r.done.from,(s=r.done.to)!==null&&s!==void 0?s:l);for(let u of r.updates)c=c.update(u,t);if(c.hasResult()){e.push(c);continue}}let o=n.active.find(l=>l.source==r.active.source);if(o&&o.isPending)if(r.done==null){let l=new Ns(r.active.source,0);for(let a of r.updates)l=l.update(a,t);l.isPending||e.push(l)}else this.startQuery(o)}(e.length||n.open&&n.open.disabled)&&this.view.dispatch({effects:Bf.of(e)})}},{eventHandlers:{blur(s){let e=this.view.state.field(Cs,!1);if(e&&e.tooltip&&this.view.state.facet(zt).closeOnBlur){let t=e.open&&fy(this.view,e.open.tooltip);(!t||!t.dom.contains(s.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:Yo.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Ua.of(!1)}),20),this.composing=0}}}),VD=typeof navigator=="object"&&/Win/.test(navigator.platform),BD=Gi.highest(Te.domEventHandlers({keydown(s,e){let t=e.state.field(Cs,!1);if(!t||!t.open||t.open.disabled||t.open.selected<0||s.key.length>1||s.ctrlKey&&!(VD&&s.altKey)||s.metaKey)return!1;let n=t.open.options[t.open.selected],i=t.active.find(o=>o.source==n.source),r=n.completion.commitCharacters||i.result.commitCharacters;return r&&r.indexOf(s.key)>-1&&If(e,n),!1}})),ID=Te.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),Xo={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},$i=Qe.define({map(s,e){let t=e.mapPos(s,-1,vs.TrackAfter);return t??void 0}}),Nf=new class extends Fi{};Nf.startSide=1;Nf.endSide=-1;const $b=Yt.define({create(){return it.empty},update(s,e){if(s=s.map(e.changes),e.selection){let t=e.state.doc.lineAt(e.selection.main.head);s=s.update({filter:n=>n>=t.from&&n<=t.to})}for(let t of e.effects)t.is($i)&&(s=s.update({add:[Nf.range(t.value,t.value+1)]}));return s}});function ND(){return[zD,$b]}const gc="()[]{}<>";function Rb(s){for(let e=0;e<gc.length;e+=2)if(gc.charCodeAt(e)==s)return gc.charAt(e+1);return rf(s<128?s:s+1)}function Lb(s,e){return s.languageDataAt("closeBrackets",e)[0]||Xo}const FD=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),zD=Te.inputHandler.of((s,e,t,n)=>{if((FD?s.composing:s.compositionStarted)||s.state.readOnly)return!1;let i=s.state.selection.main;if(n.length>2||n.length==2&&mn(Ss(n,0))==1||e!=i.from||t!=i.to)return!1;let r=qD(s.state,n);return r?(s.dispatch(r),!0):!1}),UD=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let n=Lb(s,s.selection.main.head).brackets||Xo.brackets,i=null,r=s.changeByRange(o=>{if(o.empty){let l=WD(s.doc,o.head);for(let a of n)if(a==l&&ku(s.doc,o.head)==Rb(Ss(a,0)))return{changes:{from:o.head-a.length,to:o.head+a.length},range:fe.cursor(o.head-a.length)}}return{range:i=o}});return i||e(s.update(r,{scrollIntoView:!0,userEvent:"delete.backward"})),!i},HD=[{key:"Backspace",run:UD}];function qD(s,e){let t=Lb(s,s.selection.main.head),n=t.brackets||Xo.brackets;for(let i of n){let r=Rb(Ss(i,0));if(e==i)return r==i?JD(s,i,n.indexOf(i+i+i)>-1,t):KD(s,i,r,t.before||Xo.before);if(e==r&&Vb(s,s.selection.main.from))return GD(s,i,r)}return null}function Vb(s,e){let t=!1;return s.field($b).between(0,s.doc.length,n=>{n==e&&(t=!0)}),t}function ku(s,e){let t=s.sliceString(e,e+2);return t.slice(0,mn(Ss(t,0)))}function WD(s,e){let t=s.sliceString(e-2,e);return mn(Ss(t,0))==t.length?t:t.slice(1)}function KD(s,e,t,n){let i=null,r=s.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:t,from:o.to}],effects:$i.of(o.to+e.length),range:fe.range(o.anchor+e.length,o.head+e.length)};let l=ku(s.doc,o.head);return!l||/\s/.test(l)||n.indexOf(l)>-1?{changes:{insert:e+t,from:o.head},effects:$i.of(o.head+e.length),range:fe.cursor(o.head+e.length)}:{range:i=o}});return i?null:s.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function GD(s,e,t){let n=null,i=s.changeByRange(r=>r.empty&&ku(s.doc,r.head)==t?{changes:{from:r.head,to:r.head+t.length,insert:t},range:fe.cursor(r.head+t.length)}:n={range:r});return n?null:s.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function JD(s,e,t,n){let i=n.stringPrefixes||Xo.stringPrefixes,r=null,o=s.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:e,from:l.to}],effects:$i.of(l.to+e.length),range:fe.range(l.anchor+e.length,l.head+e.length)};let a=l.head,c=ku(s.doc,a),u;if(c==e){if(sm(s,a))return{changes:{insert:e+e,from:a},effects:$i.of(a+e.length),range:fe.cursor(a+e.length)};if(Vb(s,a)){let h=t&&s.sliceDoc(a,a+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:a,to:a+h.length,insert:h},range:fe.cursor(a+h.length)}}}else{if(t&&s.sliceDoc(a-2*e.length,a)==e+e&&(u=nm(s,a-2*e.length,i))>-1&&sm(s,u))return{changes:{insert:e+e+e+e,from:a},effects:$i.of(a+e.length),range:fe.cursor(a+e.length)};if(s.charCategorizer(a)(c)!=At.Word&&nm(s,a,i)>-1&&!QD(s,a,e,i))return{changes:{insert:e+e,from:a},effects:$i.of(a+e.length),range:fe.cursor(a+e.length)}}return{range:r=l}});return r?null:s.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function sm(s,e){let t=us(s).resolveInner(e+1);return t.parent&&t.from==e}function QD(s,e,t,n){let i=us(s).resolveInner(e,-1),r=n.reduce((o,l)=>Math.max(o,l.length),0);for(let o=0;o<5;o++){let l=s.sliceDoc(i.from,Math.min(i.to,i.from+t.length+r)),a=l.indexOf(t);if(!a||a>-1&&n.indexOf(l.slice(0,a))>-1){let u=i.firstChild;for(;u&&u.from==i.from&&u.to-u.from>t.length+a;){if(s.sliceDoc(u.to-t.length,u.to)==t)return!1;u=u.firstChild}return!0}let c=i.to==e&&i.parent;if(!c)break;i=c}return!1}function nm(s,e,t){let n=s.charCategorizer(e);if(n(s.sliceDoc(e-1,e))!=At.Word)return e;for(let i of t){let r=e-i.length;if(s.sliceDoc(r,e)==i&&n(s.sliceDoc(r-1,r))!=At.Word)return r}return-1}function YD(s={}){return[BD,Cs,zt.of(s),LD,XD,ID]}const Bb=[{key:"Ctrl-Space",run:pc},{mac:"Alt-`",run:pc},{mac:"Alt-i",run:pc},{key:"Escape",run:OD},{key:"ArrowDown",run:Xl(!0)},{key:"ArrowUp",run:Xl(!1)},{key:"PageDown",run:Xl(!0,"page")},{key:"PageUp",run:Xl(!1,"page")},{key:"Enter",run:jD}],XD=Gi.highest(yf.computeN([zt],s=>s.facet(zt).defaultKeymap?[Bb]:[]));class im{constructor(e,t,n){this.from=e,this.to=t,this.diagnostic=n}}class Ti{constructor(e,t,n){this.diagnostics=e,this.panel=t,this.selected=n}static init(e,t,n){let i=n.facet(Zo).markerFilter;i&&(e=i(e,n));let r=e.slice().sort((p,y)=>p.from-y.from||p.to-y.to),o=new In,l=[],a=0,c=n.doc.iter(),u=0,d=n.doc.length;for(let p=0;;){let y=p==r.length?null:r[p];if(!y&&!l.length)break;let b,x;if(l.length)b=a,x=l.reduce((B,U)=>Math.min(B,U.to),y&&y.from>b?y.from:1e8);else{if(b=y.from,b>d)break;x=y.to,l.push(y),p++}for(;p<r.length;){let B=r[p];if(B.from==b&&(B.to>B.from||B.to==b))l.push(B),p++,x=Math.min(B.to,x);else{x=Math.min(B.from,x);break}}x=Math.min(x,d);let g=!1;if(l.some(B=>B.from==b&&(B.to==x||x==d))&&(g=b==x,!g&&x-b<10)){let B=b-(u+c.value.length);B>0&&(c.next(B),u=b);for(let U=b;;){if(U>=x){g=!0;break}if(!c.lineBreak&&u+c.value.length>U)break;U=u+c.value.length,u+=c.value.length,c.next()}}let j=dE(l);if(g)o.add(b,b,Fe.widget({widget:new lE(j),diagnostics:l.slice()}));else{let B=l.reduce((U,I)=>I.markClass?U+" "+I.markClass:U,"");o.add(b,x,Fe.mark({class:"cm-lintRange cm-lintRange-"+j+B,diagnostics:l.slice(),inclusiveEnd:l.some(U=>U.to>x)}))}if(a=x,a==d)break;for(let B=0;B<l.length;B++)l[B].to<=a&&l.splice(B--,1)}let h=o.finish();return new Ti(h,t,$r(h))}}function $r(s,e=null,t=0){let n=null;return s.between(t,1e9,(i,r,{spec:o})=>{if(!(e&&o.diagnostics.indexOf(e)<0))if(!n)n=new im(i,r,e||o.diagnostics[0]);else{if(o.diagnostics.indexOf(n.diagnostic)<0)return!1;n=new im(n.from,r,n.diagnostic)}}),n}function ZD(s,e){let t=e.pos,n=e.end||t,i=s.state.facet(Zo).hideOn(s,t,n);if(i!=null)return i;let r=s.startState.doc.lineAt(e.pos);return!!(s.effects.some(o=>o.is(Ib))||s.changes.touchesRange(r.from,Math.max(r.to,n)))}function eE(s,e){return s.field($s,!1)?e:e.concat(Qe.appendConfig.of(fE))}const Ib=Qe.define(),Ff=Qe.define(),Nb=Qe.define(),$s=Yt.define({create(){return new Ti(Fe.none,null,null)},update(s,e){if(e.docChanged&&s.diagnostics.size){let t=s.diagnostics.map(e.changes),n=null,i=s.panel;if(s.selected){let r=e.changes.mapPos(s.selected.from,1);n=$r(t,s.selected.diagnostic,r)||$r(t,null,r)}!t.size&&i&&e.state.facet(Zo).autoPanel&&(i=null),s=new Ti(t,i,n)}for(let t of e.effects)if(t.is(Ib)){let n=e.state.facet(Zo).autoPanel?t.value.length?el.open:null:s.panel;s=Ti.init(t.value,n,e.state)}else t.is(Ff)?s=new Ti(s.diagnostics,t.value?el.open:null,s.selected):t.is(Nb)&&(s=new Ti(s.diagnostics,s.panel,t.value));return s},provide:s=>[qo.from(s,e=>e.panel),Te.decorations.from(s,e=>e.diagnostics)]}),tE=Fe.mark({class:"cm-lintRange cm-lintRange-active"});function sE(s,e,t){let{diagnostics:n}=s.state.field($s),i,r=-1,o=-1;n.between(e-(t<0?1:0),e+(t>0?1:0),(a,c,{spec:u})=>{if(e>=a&&e<=c&&(a==c||(e>a||t>0)&&(e<c||t<0)))return i=u.diagnostics,r=a,o=c,!1});let l=s.state.facet(Zo).tooltipFilter;return i&&l&&(i=l(i,s.state)),i?{pos:r,end:o,above:s.state.doc.lineAt(r).to<o,create(){return{dom:nE(s,i)}}}:null}function nE(s,e){return yt("ul",{class:"cm-tooltip-lint"},e.map(t=>zb(s,t,!1)))}const iE=s=>{let e=s.state.field($s,!1);(!e||!e.panel)&&s.dispatch({effects:eE(s.state,[Ff.of(!0)])});let t=Ho(s,el.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},rm=s=>{let e=s.state.field($s,!1);return!e||!e.panel?!1:(s.dispatch({effects:Ff.of(!1)}),!0)},rE=s=>{let e=s.state.field($s,!1);if(!e)return!1;let t=s.state.selection.main,n=e.diagnostics.iter(t.to+1);return!n.value&&(n=e.diagnostics.iter(0),!n.value||n.from==t.from&&n.to==t.to)?!1:(s.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0}),!0)},oE=[{key:"Mod-Shift-m",run:iE,preventDefault:!0},{key:"F8",run:rE}],Zo=je.define({combine(s){return{sources:s.map(e=>e.source).filter(e=>e!=null),...Sn(s.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:om,tooltipFilter:om,needsRefresh:(e,t)=>e?t?n=>e(n)||t(n):e:t,hideOn:(e,t)=>e?t?(n,i,r)=>e(n,i,r)||t(n,i,r):e:t,autoPanel:(e,t)=>e||t})}}});function om(s,e){return s?e?(t,n)=>e(s(t,n),n):s:e}function Fb(s){let e=[];if(s)e:for(let{name:t}of s){for(let n=0;n<t.length;n++){let i=t[n];if(/[a-zA-Z]/.test(i)&&!e.some(r=>r.toLowerCase()==i.toLowerCase())){e.push(i);continue e}}e.push("")}return e}function zb(s,e,t){var n;let i=t?Fb(e.actions):[];return yt("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},yt("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(s):e.message),(n=e.actions)===null||n===void 0?void 0:n.map((r,o)=>{let l=!1,a=p=>{if(p.preventDefault(),l)return;l=!0;let y=$r(s.state.field($s).diagnostics,e);y&&r.apply(s,y.from,y.to)},{name:c}=r,u=i[o]?c.indexOf(i[o]):-1,d=u<0?c:[c.slice(0,u),yt("u",c.slice(u,u+1)),c.slice(u+1)],h=r.markClass?" "+r.markClass:"";return yt("button",{type:"button",class:"cm-diagnosticAction"+h,onclick:a,onmousedown:a,"aria-label":` Action: ${c}${u<0?"":` (access key "${i[o]})"`}.`},d)}),e.source&&yt("div",{class:"cm-diagnosticSource"},e.source))}class lE extends mi{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return yt("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class lm{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=zb(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class el{constructor(e){this.view=e,this.items=[];let t=i=>{if(i.keyCode==27)rm(this.view),this.view.focus();else if(i.keyCode==38||i.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(i.keyCode==40||i.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(i.keyCode==36)this.moveSelection(0);else if(i.keyCode==35)this.moveSelection(this.items.length-1);else if(i.keyCode==13)this.view.focus();else if(i.keyCode>=65&&i.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:r}=this.items[this.selectedIndex],o=Fb(r.actions);for(let l=0;l<o.length;l++)if(o[l].toUpperCase().charCodeAt(0)==i.keyCode){let a=$r(this.view.state.field($s).diagnostics,r);a&&r.actions[l].apply(e,a.from,a.to)}}else return;i.preventDefault()},n=i=>{for(let r=0;r<this.items.length;r++)this.items[r].dom.contains(i.target)&&this.moveSelection(r)};this.list=yt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:n}),this.dom=yt("div",{class:"cm-panel-lint"},this.list,yt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>rm(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field($s).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field($s),n=0,i=!1,r=null,o=new Set;for(e.between(0,this.view.state.doc.length,(l,a,{spec:c})=>{for(let u of c.diagnostics){if(o.has(u))continue;o.add(u);let d=-1,h;for(let p=n;p<this.items.length;p++)if(this.items[p].diagnostic==u){d=p;break}d<0?(h=new lm(this.view,u),this.items.splice(n,0,h),i=!0):(h=this.items[d],d>n&&(this.items.splice(n,d-n),i=!0)),t&&h.diagnostic==t.diagnostic?h.dom.hasAttribute("aria-selected")||(h.dom.setAttribute("aria-selected","true"),r=h):h.dom.hasAttribute("aria-selected")&&h.dom.removeAttribute("aria-selected"),n++}});n<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();this.items.length==0&&(this.items.push(new lm(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),r?(this.list.setAttribute("aria-activedescendant",r.id),this.view.requestMeasure({key:this,read:()=>({sel:r.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:l,panel:a})=>{let c=a.height/this.list.offsetHeight;l.top<a.top?this.list.scrollTop-=(a.top-l.top)/c:l.bottom>a.bottom&&(this.list.scrollTop+=(l.bottom-a.bottom)/c)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function t(){let n=e;e=n.nextSibling,n.remove()}for(let n of this.items)if(n.dom.parentNode==this.list){for(;e!=n.dom;)t();e=n.dom.nextSibling}else this.list.insertBefore(n.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field($s),n=$r(t.diagnostics,this.items[e].diagnostic);n&&this.view.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0,effects:Nb.of(n)})}static open(e){return new el(e)}}function aE(s,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(s)}</svg>')`}function Zl(s){return aE(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${s}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const uE=Te.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Zl("#d11")},".cm-lintRange-warning":{backgroundImage:Zl("orange")},".cm-lintRange-info":{backgroundImage:Zl("#999")},".cm-lintRange-hint":{backgroundImage:Zl("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function cE(s){return s=="error"?4:s=="warning"?3:s=="info"?2:1}function dE(s){let e="hint",t=1;for(let n of s){let i=cE(n.severity);i>t&&(t=i,e=n.severity)}return e}const fE=[$s,Te.decorations.compute([$s],s=>{let{selected:e,panel:t}=s.field($s);return!e||!t||e.from==e.to?Fe.none:Fe.set([tE.range(e.from,e.to)])}),X3(sE,{hideOn:ZD}),uE],hE=[uA(),fA(),E3(),$M(),nM(),y3(),S3(),nt.allowMultipleSelections.of(!0),UA(),Py(lM,{fallback:!0}),pM(),ND(),YD(),F3(),H3(),R3(),H8(),yf.of([...HD,...B8,...uD,...UM,...ZA,...Bb,...oE])],pE={class:"rounded-lg border border-gray-300 overflow-hidden dark:border-gray-600"},xu={__name:"CodeEditor",props:{modelValue:{type:String,default:""},language:{type:String,default:"r",validator:s=>["r","markdown","text","gitignore"].includes(s)},minHeight:{type:String,default:"400px"},autoGrow:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:""}},emits:["update:modelValue"],setup(s,{emit:e}){const t=s,n=e,i=Y(null);let r=null;const o=Df.define({token(c){return c.sol()&&c.match(/^#/)?(c.skipToEnd(),"comment"):(c.skipToEnd(),null)}}),l=Py(dl.define([{tag:_e.comment,color:"#16a34a"}])),a=()=>[o,l];return as(()=>{if(!i.value)return;const c=Te.updateListener.of(p=>{p.docChanged&&n("update:modelValue",p.state.doc.toString())}),u={"&":{fontSize:"13px",fontFamily:'ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, "Liberation Mono", monospace'},".cm-scroller":{fontFamily:'ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, "Liberation Mono", monospace'},".cm-content":{padding:"12px 0"},".cm-line":{padding:"0 12px"}};t.autoGrow||(u["&"].minHeight=t.minHeight);const d=[hE,a(),c,Te.lineWrapping,Te.theme(u)],h=nt.create({doc:t.modelValue||"",extensions:d});r=new Te({state:h,parent:i.value})}),Pe(()=>t.modelValue,c=>{r&&c!==r.state.doc.toString()&&r.dispatch({changes:{from:0,to:r.state.doc.length,insert:c}})}),(c,u)=>(v(),k("div",pE,[f("div",{ref_key:"editorRef",ref:i},null,512)]))}},gE={class:"relative"},mE={key:0,class:"absolute z-10 mt-1 w-full max-h-64 overflow-y-auto border border-gray-200 dark:border-gray-700 rounded-md bg-white dark:bg-gray-800 shadow-lg"},vE=["onClick","onMouseenter"],yE={class:"flex items-center justify-between gap-3"},bE={class:"flex-1 min-w-0"},kE={class:"font-medium text-gray-900 dark:text-white"},xE={class:"text-xs text-gray-500 dark:text-gray-400 truncate"},wE={class:"ml-3 text-xs text-gray-400 dark:text-gray-500 shrink-0 flex items-center gap-1.5"},SE={class:"text-[10px] font-medium"},CE={key:1,class:"absolute right-3 top-9 text-gray-400"},_E={__name:"PackageAutocomplete",props:{modelValue:{type:String,default:""},label:{type:String,default:"Search Packages"},placeholder:{type:String,default:"Type to search..."},source:{type:String,default:"cran",validator:s=>["cran","bioconductor","github"].includes(s)}},emits:["update:modelValue","select"],setup(s,{emit:e}){const t=s,n=e,i=F({get:()=>t.modelValue,set:h=>n("update:modelValue",h)}),r=Y([]),o=Y(!1),l=Y(-1);let a=null;Pe(i,h=>{if(a&&clearTimeout(a),h.length<2){r.value=[],l.value=-1;return}a=setTimeout(()=>{c(h)},300)});const c=async h=>{o.value=!0;try{const y=await(await fetch(`/api/packages/search?q=${encodeURIComponent(h)}&source=${encodeURIComponent(t.source)}`)).json();r.value=y.packages||[],l.value=r.value.length>0?0:-1}catch(p){console.error("Failed to search packages:",p),r.value=[],l.value=-1}finally{o.value=!1}},u=h=>{r.value.length!==0&&(h.key==="ArrowDown"?(h.preventDefault(),l.value=Math.min(l.value+1,r.value.length-1)):h.key==="ArrowUp"?(h.preventDefault(),l.value=Math.max(l.value-1,0)):h.key==="Enter"&&l.value>=0?(h.preventDefault(),d(r.value[l.value])):h.key==="Escape"&&(r.value=[],l.value=-1))},d=h=>{n("update:modelValue",h.name),n("select",h),r.value=[],l.value=-1};return(h,p)=>(v(),k("div",gE,[S(Se,{modelValue:i.value,"onUpdate:modelValue":p[0]||(p[0]=y=>i.value=y),label:s.label,placeholder:s.placeholder,onKeydown:u},null,8,["modelValue","label","placeholder"]),r.value.length>0?(v(),k("div",mE,[(v(!0),k(be,null,Le(r.value,(y,b)=>(v(),k("button",{key:y.name,onClick:x=>d(y),onMouseenter:x=>l.value=b,class:xe(["w-full px-3 py-2 text-left border-b border-gray-200 dark:border-gray-700 last:border-b-0 transition",l.value===b?"bg-sky-50 dark:bg-sky-900/20":"hover:bg-gray-50 dark:hover:bg-gray-700"])},[f("div",yE,[f("div",bE,[f("div",kE,J(y.name),1),f("div",xE,J(y.title),1)]),f("div",wE,[f("span",SE,J(y.source==="cran"?"CRAN":y.source==="bioconductor"?"Bioconductor":y.source),1),p[1]||(p[1]=f("span",null,"",-1)),f("span",null,"v"+J(y.version),1)])])],42,vE))),128))])):H("",!0),o.value?(v(),k("div",CE,[...p[2]||(p[2]=[f("svg",{class:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[f("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),f("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):H("",!0)]))}},AE={class:"flex items-center justify-between"},ME={class:"flex-1"},DE={class:"text-xs text-gray-500 dark:text-gray-400 mb-1"},EE={class:"text-sm text-gray-900 dark:text-white"},TE={__name:"OverviewCard",props:{title:{type:String,required:!0}},emits:["click"],setup(s){return(e,t)=>(v(),k("button",{onClick:t[0]||(t[0]=n=>e.$emit("click")),class:"w-full text-left px-4 py-3 rounded-md bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 hover:border-sky-300 dark:hover:border-sky-700 transition"},[f("div",AE,[f("div",ME,[f("div",DE,J(s.title),1),f("div",EE,[dt(e.$slots,"default")])]),t[1]||(t[1]=f("svg",{class:"h-5 w-5 text-gray-400 shrink-0 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))])]))}},jE={class:"space-y-3"},OE=["innerHTML"],zf={__name:"OverviewSummary",props:{cards:{type:Array,required:!0}},emits:["navigate"],setup(s){return(e,t)=>(v(),k("div",jE,[(v(!0),k(be,null,Le(s.cards,n=>(v(),Ae(TE,{key:n.id,title:n.title,onClick:i=>e.$emit("navigate",n.section)},{default:X(()=>[typeof n.content=="object"?(v(),Ae(Ms(n.content),{key:0})):(v(),k("span",{key:1,innerHTML:n.content},null,8,OE))]),_:2},1032,["title","onClick"]))),128))]))}},PE={class:"pt-4 pb-2"},$E={class:"px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider dark:text-gray-400"},qa={__name:"NavigationSectionHeading",setup(s){return(e,t)=>(v(),k("div",PE,[f("h3",$E,[dt(e.$slots,"default")])]))}},RE={class:"rounded-lg bg-gray-50 dark:bg-gray-800/50"},LE={class:"space-y-5"},VE={class:"pt-4 border-t border-gray-200 dark:border-gray-700"},BE={class:"space-y-4"},Uf={__name:"AuthorInformationPanel",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(s,{emit:e}){const t=s,n=e,i=Y({name:t.modelValue.name??"",email:t.modelValue.email??"",affiliation:t.modelValue.affiliation??"",github_username:t.modelValue.github_username??"",github_email:t.modelValue.github_email??""});Pe(()=>t.modelValue,o=>{i.value={name:o.name??"",email:o.email??"",affiliation:o.affiliation??"",github_username:o.github_username??"",github_email:o.github_email??""}},{deep:!0});const r=(o,l)=>{i.value[o]=l,n("update:modelValue",{...i.value})};return(o,l)=>(v(),k("div",RE,[l[6]||(l[6]=f("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-2"}," Author Information ",-1)),l[7]||(l[7]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-5"}," Used as defaults when creating notebook author settings and similar tasks. ",-1)),f("div",LE,[S(Se,{"model-value":i.value.name,"onUpdate:modelValue":l[0]||(l[0]=a=>r("name",a)),label:"Your Name",placeholder:"Your Name"},null,8,["model-value"]),S(Se,{"model-value":i.value.email,"onUpdate:modelValue":l[1]||(l[1]=a=>r("email",a)),type:"email",label:"Email",placeholder:"your.email@example.com"},null,8,["model-value"]),S(Se,{"model-value":i.value.affiliation,"onUpdate:modelValue":l[2]||(l[2]=a=>r("affiliation",a)),label:"Affiliation",placeholder:"Organization"},null,8,["model-value"]),f("div",VE,[l[5]||(l[5]=f("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"GitHub",-1)),f("div",BE,[S(Se,{"model-value":i.value.github_username,"onUpdate:modelValue":l[3]||(l[3]=a=>r("github_username",a)),label:"GitHub Username",placeholder:"username"},null,8,["model-value"]),S(Se,{"model-value":i.value.github_email,"onUpdate:modelValue":l[4]||(l[4]=a=>r("github_email",a)),type:"email",label:"GitHub Email",placeholder:"username@users.noreply.github.com",hint:"For git commits (often different from primary email)"},null,8,["model-value"])])])])]))}},IE={class:"space-y-6"},NE={key:0,class:"space-y-3"},FE={class:"flex flex-col gap-3"},zE={class:"grid gap-3 grid-cols-[1fr_160px]"},UE={class:"flex items-center justify-between"},HE={key:1,class:"text-xs text-gray-500 dark:text-gray-400 mb-4"},qE={class:"mt-4"},Hf={__name:"PackagesEditor",props:{modelValue:{type:Object,required:!0},showRenvToggle:{type:Boolean,default:!0},flush:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(s,{emit:e}){const t=s,n=F(()=>t.flush?"":"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"),i=F(()=>t.flush?"":"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"),r=e,o=Y({use_renv:t.modelValue.use_renv??!1,default_packages:t.modelValue.default_packages??[]});Pe(()=>t.modelValue,y=>{o.value={use_renv:y.use_renv??!1,default_packages:y.default_packages??[]}},{deep:!0});const l=()=>{r("update:modelValue",{...o.value})},a=y=>{o.value.use_renv=y,l()},c=(y,b)=>{o.value.default_packages[y].name=b,l()},u=(y,b)=>{o.value.default_packages[y].source=b,l()},d=(y,b)=>{o.value.default_packages[y].auto_attach=b,l()},h=()=>{o.value.default_packages.push({name:"",source:"cran",auto_attach:!0}),l()},p=y=>{o.value.default_packages.splice(y,1),l()};return(y,b)=>(v(),k("div",IE,[s.showRenvToggle?(v(),k("div",{key:0,class:xe(n.value)},[S(Ge,{"model-value":o.value.use_renv,"onUpdate:modelValue":a,label:"Enable renv",description:"Create renv environments for new projects."},null,8,["model-value"])],2)):H("",!0),f("div",{class:xe(i.value)},[b[3]||(b[3]=f("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-2"}," Default packages ",-1)),b[4]||(b[4]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Installed (and optionally attached) when scaffold() runs. ",-1)),b[5]||(b[5]=f("p",{class:"text-xs text-gray-600 dark:text-gray-400 mb-4"}," Use this list to preseed notebooks with your preferred helpers. ",-1)),o.value.default_packages&&o.value.default_packages.length?(v(),k("div",NE,[(v(!0),k(be,null,Le(o.value.default_packages,(x,g)=>(v(),k("div",{key:`pkg-${g}`,class:"rounded-md border border-gray-200 p-4 dark:border-gray-700"},[f("div",FE,[f("div",zE,[x.source==="cran"||x.source==="bioconductor"?(v(),Ae(_E,{key:0,"model-value":x.name,"onUpdate:modelValue":j=>c(g,j),source:x.source,label:"Package",placeholder:x.source==="cran"?"Search CRAN...":"Search Bioconductor...",onSelect:j=>c(g,j.name)},null,8,["model-value","onUpdate:modelValue","source","placeholder","onSelect"])):(v(),Ae(Se,{key:1,"model-value":x.name,"onUpdate:modelValue":j=>c(g,j),label:"Package",placeholder:"user/repo"},null,8,["model-value","onUpdate:modelValue"])),S(ns,{"model-value":x.source,"onUpdate:modelValue":j=>u(g,j),label:"Source"},{default:X(()=>[...b[0]||(b[0]=[f("option",{value:"cran"},"CRAN",-1),f("option",{value:"github"},"GitHub",-1),f("option",{value:"bioconductor"},"Bioconductor",-1)])]),_:1},8,["model-value","onUpdate:modelValue"])]),f("div",UE,[S(Ge,{"model-value":x.auto_attach,"onUpdate:modelValue":j=>d(g,j),label:"Auto-Attach",description:"Call library() when scaffold() runs."},null,8,["model-value","onUpdate:modelValue"]),S(Je,{size:"sm",variant:"secondary",onClick:j=>p(g)},{default:X(()=>[...b[1]||(b[1]=[de("Remove",-1)])]),_:1},8,["onClick"])])])]))),128))])):(v(),k("p",HE," No packages configured. Add packages to include tidyverse helpers or internal utilities automatically. ")),f("div",qE,[S(Je,{size:"sm",variant:"secondary",onClick:h},{default:X(()=>[...b[2]||(b[2]=[de("Add Package",-1)])]),_:1})])],2)]))}},WE={class:"space-y-6"},KE={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},GE={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},JE={class:"space-y-2"},QE={key:0,class:"pt-6 border-t border-gray-200 dark:border-gray-700"},YE={class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},XE={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-2"},qf={__name:"AIAssistantsPanel",props:{modelValue:{type:Object,required:!0},flush:{type:Boolean,default:!1},showEditor:{type:Boolean,default:!0},editorHeight:{type:String,default:"500px"},editorDisabled:{type:Boolean,default:!1},editorLoading:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(s,{emit:e}){const t=s,n=e,i=Y(Math.random().toString(36).substring(7)),r=[{id:"claude",label:"Claude Code",description:"Anthropic's IDE-focused assistant."},{id:"copilot",label:"GitHub Copilot",description:"Complements VS Code and JetBrains editors."},{id:"agents",label:"Multi-Agent (OpenAI Codex, Cursor, etc.)",description:"Shared instructions for multi-model orchestrators."}],o=()=>({enabled:t.modelValue?.enabled??!1,canonical_file:t.modelValue?.canonical_file??"CLAUDE.md",assistants:Array.isArray(t.modelValue?.assistants)?t.modelValue.assistants:[],canonical_content:t.modelValue?.canonical_content??""}),l=F(()=>t.flush?"space-y-6":"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 space-y-6"),a=F(o),c=d=>{const h=o(),p=d.assistants!==void 0?d.assistants:h.assistants;n("update:modelValue",{...h,...d,assistants:p})},u=(d,h)=>{const p=[...a.value.assistants];if(h)p.includes(d)||p.push(d);else{const y=p.indexOf(d);y!==-1&&p.splice(y,1)}c({assistants:p})};return(d,h)=>(v(),k("div",{class:xe(l.value)},[f("div",WE,[f("div",null,[S(Ge,{"model-value":a.value.enabled,label:"Enable AI Support",description:"Generate and sync assistant-specific context files.","onUpdate:modelValue":h[0]||(h[0]=p=>c({enabled:p}))},null,8,["model-value"])]),a.value.enabled?(v(),k(be,{key:0},[f("div",KE,[h[4]||(h[4]=f("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Canonical context file",-1)),h[5]||(h[5]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," This file is the source of truth; other instructions files are synced to it when AI hooks run. ",-1)),S(ns,{"model-value":a.value.canonical_file,label:"Canonical Context File","onUpdate:modelValue":h[1]||(h[1]=p=>c({canonical_file:p}))},{default:X(()=>[...h[3]||(h[3]=[f("option",{value:"AGENTS.md"},"AGENTS.md (multi-agent orchestrator)",-1),f("option",{value:"CLAUDE.md"},"CLAUDE.md",-1),f("option",{value:".github/copilot-instructions.md"},".github/copilot-instructions.md",-1)])]),_:1},8,["model-value"])]),f("div",GE,[h[6]||(h[6]=f("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Assistants",-1)),h[7]||(h[7]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Choose which assistants receive context updates. ",-1)),f("div",JE,[(v(),k(be,null,Le(r,p=>S(Rn,{key:p.id,id:`ai-${p.id}-${i.value}`,"model-value":a.value.assistants.includes(p.id),"onUpdate:modelValue":y=>u(p.id,y),description:p.description},{default:X(()=>[de(J(p.label),1)]),_:2},1032,["id","model-value","onUpdate:modelValue","description"])),64))])]),s.showEditor?(v(),k("div",QE,[h[9]||(h[9]=f("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Canonical instructions",-1)),f("p",YE,[dt(d.$slots,"editor-description",{},()=>[h[8]||(h[8]=de(" Edit the canonical file directly. Framework mirrors this content to other assistant files. ",-1))])]),dt(d.$slots,"editor-alert"),S(xu,{"model-value":a.value.canonical_content,language:"markdown","min-height":s.editorHeight,disabled:s.editorDisabled,"onUpdate:modelValue":h[2]||(h[2]=p=>c({canonical_content:p}))},null,8,["model-value","min-height","disabled"]),dt(d.$slots,"editor-actions"),s.editorLoading?(v(),k("p",XE," Loading "+J(a.value.canonical_file)+" ",1)):H("",!0)])):H("",!0)],64)):H("",!0)])],2))}},ZE={class:"space-y-3"},eT={class:"grid gap-4 sm:grid-cols-2"},tT={class:"space-y-3"},sT={class:"space-y-4"},nT={class:"text-xs text-gray-500 dark:text-gray-400"},Wf={__name:"GitHooksPanel",props:{modelValue:{type:Object,required:!0},flush:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(s,{emit:e}){const t=s,n=e,i=()=>({initialize:t.modelValue?.initialize??!0,user_name:t.modelValue?.user_name??"",user_email:t.modelValue?.user_email??"",hooks:{ai_sync:t.modelValue?.hooks?.ai_sync??!1,data_security:t.modelValue?.hooks?.data_security??!1,check_sensitive_dirs:t.modelValue?.hooks?.check_sensitive_dirs??!1}}),r=F(()=>t.flush?"space-y-6":"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 space-y-6"),o=F(i),l=c=>{const u=i(),d={...u.hooks,...c?.hooks||{}};n("update:modelValue",{...u,...c,hooks:d})},a=(c,u)=>{l({hooks:{[c]:u}})};return(c,u)=>(v(),k("div",{class:xe(r.value)},[S(Ge,{"model-value":o.value.initialize,label:"Initialize Git",description:"Run git init for every new project.","onUpdate:modelValue":u[0]||(u[0]=d=>l({initialize:d}))},null,8,["model-value"]),f("div",ZE,[u[6]||(u[6]=f("div",null,[f("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"Git identity"),f("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Overrides Author Information when provided. ")],-1)),f("div",eT,[S(Se,{"model-value":o.value.user_name,label:"Git Name",placeholder:"Jane Analyst",disabled:!o.value.initialize,"onUpdate:modelValue":u[1]||(u[1]=d=>l({user_name:d}))},null,8,["model-value","disabled"]),S(Se,{"model-value":o.value.user_email,label:"Git Email",placeholder:"jane@example.com",hint:"Used for git config user.email during project setup.",disabled:!o.value.initialize,"onUpdate:modelValue":u[2]||(u[2]=d=>l({user_email:d}))},null,8,["model-value","disabled"])])]),f("div",tT,[u[8]||(u[8]=f("div",null,[f("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"Git Hooks"),f("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Pre-commit hooks that run automatically before each commit. ")],-1)),f("div",sT,[S(Ge,{"model-value":o.value.hooks.ai_sync,label:"Sync AI Files Before Commit",description:"Update non-canonical files so assistants share the same instructions.",disabled:!o.value.initialize,"onUpdate:modelValue":u[3]||(u[3]=d=>a("ai_sync",d))},null,8,["model-value","disabled"]),S(Ge,{"model-value":o.value.hooks.data_security,label:"Check for Secrets",description:"Run a lightweight scan for API keys and credentials before commits.",disabled:!o.value.initialize,"onUpdate:modelValue":u[4]||(u[4]=d=>a("data_security",d))},null,8,["model-value","disabled"]),S(Ge,{"model-value":o.value.hooks.check_sensitive_dirs,label:"Warn About Unignored Sensitive Directories",description:"Block commits if directories with sensitive names aren't gitignored.",disabled:!o.value.initialize,"onUpdate:modelValue":u[5]||(u[5]=d=>a("check_sensitive_dirs",d))},null,8,["model-value","disabled"])]),f("p",nT,[dt(c.$slots,"note",{},()=>[u[7]||(u[7]=de(" Project-specific .gitignore templates can be customized in Project Defaults. ",-1))])])])],2))}},iT={class:"space-y-5"},Kf={__name:"ScaffoldBehaviorPanel",props:{modelValue:{type:Object,required:!0},flush:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(s,{emit:e}){const t=s,n=e,i=(c,u="")=>c==null?u:typeof c=="number"||typeof c=="string"?String(c):u,r=()=>({source_all_functions:t.modelValue?.source_all_functions??!0,set_theme_on_scaffold:t.modelValue?.set_theme_on_scaffold??!1,ggplot_theme:t.modelValue?.ggplot_theme??"theme_minimal",seed_on_scaffold:t.modelValue?.seed_on_scaffold??!1,seed:i(t.modelValue?.seed,"123")}),o=F(r),l=F(()=>t.flush?"space-y-5":"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 space-y-5"),a=c=>{const u=r();n("update:modelValue",{...u,...c})};return(c,u)=>(v(),k("div",{class:xe(l.value)},[f("div",iT,[f("div",null,[u[5]||(u[5]=f("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Auto-Load Functions",-1)),S(Ge,{"model-value":o.value.source_all_functions,label:"Source all R files from functions/ directory",description:"Automatically loads all helper functions when scaffold() runs","onUpdate:modelValue":u[0]||(u[0]=d=>a({source_all_functions:d}))},null,8,["model-value"])]),f("div",null,[u[7]||(u[7]=f("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"ggplot2 Theme",-1)),S(Ge,{"model-value":o.value.set_theme_on_scaffold,label:"Set ggplot2 theme when scaffold() runs",description:"Automatically sets ggplot2 theme for consistent plot styling","onUpdate:modelValue":u[1]||(u[1]=d=>a({set_theme_on_scaffold:d}))},null,8,["model-value"]),o.value.set_theme_on_scaffold?(v(),Ae(ns,{key:0,"model-value":o.value.ggplot_theme,label:"Theme",class:"mt-4","onUpdate:modelValue":u[2]||(u[2]=d=>a({ggplot_theme:d}))},{default:X(()=>[...u[6]||(u[6]=[f("option",{value:""},"None",-1),f("option",{value:"theme_minimal"},"Minimal",-1),f("option",{value:"theme_bw"},"Black & White",-1),f("option",{value:"theme_classic"},"Classic",-1),f("option",{value:"theme_gray"},"Gray (default)",-1),f("option",{value:"theme_light"},"Light",-1),f("option",{value:"theme_dark"},"Dark",-1),f("option",{value:"theme_void"},"Void",-1)])]),_:1},8,["model-value"])):H("",!0)]),f("div",null,[u[8]||(u[8]=f("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Random Seed",-1)),S(Ge,{"model-value":o.value.seed_on_scaffold,label:"Set random seed when scaffold() runs",description:"Ensures deterministic behavior for reproducibility","onUpdate:modelValue":u[3]||(u[3]=d=>a({seed_on_scaffold:d}))},null,8,["model-value"]),o.value.seed_on_scaffold?(v(),Ae(Se,{key:0,"model-value":o.value.seed,label:"Seed Value",placeholder:"e.g., 1234 or 20241107",hint:"Leave empty to use global default",class:"mt-4","onUpdate:modelValue":u[4]||(u[4]=d=>a({seed:d}))},null,8,["model-value"])):H("",!0)])])],2))}},rT={class:"space-y-6"},oT={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},lT={class:"mb-4 rounded-md border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900 p-4"},aT={class:"flex items-center justify-between mb-3"},uT={class:"flex items-center gap-2"},cT={class:"space-y-3"},dT={class:"grid grid-cols-2 gap-3"},fT={class:"flex items-center gap-2"},hT=["id","checked","onChange"],pT=["for"],gT={key:0},mT={key:1,class:"space-y-3"},vT={class:"grid grid-cols-2 gap-3"},yT={class:"grid grid-cols-2 gap-3"},bT={class:"grid grid-cols-2 gap-3"},kT={key:2,class:"space-y-3"},xT={class:"grid grid-cols-2 gap-3"},wT={class:"grid grid-cols-2 gap-3"},ST={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},CT={class:"space-y-3"},_T={class:"flex items-center gap-2"},AT=["id","checked","onChange"],MT=["for"],DT={class:"grid grid-cols-2 gap-3"},ET={class:"grid grid-cols-2 gap-3"},Gf={__name:"ConnectionsPanel",props:{databaseConnections:{type:Array,required:!0},s3Connections:{type:Array,required:!0},defaultDatabase:{type:String,default:null},defaultStorageBucket:{type:String,default:null}},emits:["update:databaseConnections","update:s3Connections","update:defaultDatabase","update:defaultStorageBucket"],setup(s){const e=s,t=(l,a)=>!l||l.trim()===""?"Connection name is required":l==="framework_db"?"framework_db is reserved for system use":e.databaseConnections.findIndex((d,h)=>h!==a&&d.name===l)!==-1?"Connection name must be unique":e.s3Connections.findIndex(d=>d.name===l)!==-1?"Connection name must be unique across all connections":null,n=(l,a)=>!l||l.trim()===""?"Connection name is required":l==="framework_db"?"framework_db is reserved for system use":e.s3Connections.findIndex((d,h)=>h!==a&&d.name===l)!==-1?"Connection name must be unique":e.databaseConnections.findIndex(d=>d.name===l)!==-1?"Connection name must be unique across all connections":null,i=(l,a)=>{let c=1,u=l;for(;a.includes(u)||u==="framework_db";)c+=1,u=`${l}_${c}`;return u},r=()=>{const l=e.databaseConnections.map(h=>h.name);let a="postgres",c="database";l.some(h=>h.startsWith("postgres"))?l.some(h=>h.startsWith("mysql"))?l.some(h=>h.startsWith("sqlserver"))||(a="sqlserver",c="sqlserver"):(a="mysql",c="mysql"):(a="postgres",c="postgres");const u=i(c,l),d={_id:Date.now(),name:u,driver:a};return a==="postgres"?{...d,host:'env("POSTGRES_HOST", "localhost")',port:'env("POSTGRES_PORT", "5432")',database:'env("POSTGRES_DB", "mydb")',schema:'env("POSTGRES_SCHEMA", "public")',user:'env("POSTGRES_USER", "postgres")',password:'env("POSTGRES_PASSWORD", "")'}:a==="mysql"?{...d,host:'env("MYSQL_HOST", "localhost")',port:'env("MYSQL_PORT", "3306")',database:'env("MYSQL_DB", "mydb")',user:'env("MYSQL_USER", "root")',password:'env("MYSQL_PASSWORD", "")'}:a==="sqlserver"?{...d,host:'env("SQLSERVER_HOST", "localhost")',port:'env("SQLSERVER_PORT", "1433")',database:'env("SQLSERVER_DB", "mydb")',user:'env("SQLSERVER_USER", "sa")',password:'env("SQLSERVER_PASSWORD", "")'}:d},o=()=>({_id:Date.now(),name:i("s3_bucket",e.s3Connections.map(l=>l.name)),bucket:'env("S3_BUCKET", "my-bucket")',region:'env("S3_REGION", "us-east-1")',endpoint:'env("S3_ENDPOINT", "")',access_key:'env("S3_ACCESS_KEY", "")',secret_key:'env("S3_SECRET_KEY", "")',static_hosting:!1});return(l,a)=>(v(),k("div",rT,[f("div",oT,[a[7]||(a[7]=f("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Databases",-1)),f("div",lT,[f("div",aT,[f("div",uT,[S(au,{variant:"gray",size:"sm"},{default:X(()=>[...a[2]||(a[2]=[de("System",-1)])]),_:1}),a[3]||(a[3]=f("span",{class:"text-sm font-medium text-gray-900 dark:text-gray-100 font-mono"},"framework_db",-1))]),a[4]||(a[4]=f("span",{class:"text-xs text-gray-500 dark:text-gray-400"},"SQLite - Framework metadata",-1))]),a[5]||(a[5]=f("div",{class:"text-sm text-gray-600 dark:text-gray-400 font-mono"}," framework.db ",-1))]),S(Oi,{"model-value":s.databaseConnections,"onUpdate:modelValue":a[0]||(a[0]=c=>l.$emit("update:databaseConnections",c)),"add-label":"Add Database","default-item":r},{default:X(({item:c,index:u,update:d})=>[f("div",cT,[f("div",dT,[S(Se,{"model-value":c.name,"onUpdate:modelValue":h=>d("name",h),label:"Connection Name",error:t(c.name,u),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),S(ns,{"model-value":c.driver,"onUpdate:modelValue":h=>d("driver",h),label:"Driver",size:"sm"},{default:X(()=>[...a[6]||(a[6]=[f("option",{value:"sqlite"},"SQLite",-1),f("option",{value:"postgres"},"PostgreSQL",-1),f("option",{value:"mysql"},"MySQL",-1),f("option",{value:"sqlserver"},"SQL Server",-1)])]),_:1},8,["model-value","onUpdate:modelValue"])]),f("div",fT,[f("input",{type:"radio",id:`default-db-${c._id}`,checked:s.defaultDatabase===c.name,onChange:h=>l.$emit("update:defaultDatabase",c.name),class:"h-4 w-4 text-sky-600 focus:ring-sky-500"},null,40,hT),f("label",{for:`default-db-${c._id}`,class:"text-sm text-gray-700 dark:text-gray-300"}," Default database ",8,pT)]),c.driver==="sqlite"?(v(),k("div",gT,[S(Se,{"model-value":c.database,"onUpdate:modelValue":h=>d("database",h),label:"Database Path",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])):c.driver==="postgres"||c.driver==="postgresql"?(v(),k("div",mT,[f("div",vT,[S(Se,{"model-value":c.host,"onUpdate:modelValue":h=>d("host",h),label:"Host",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),S(Se,{"model-value":c.port,"onUpdate:modelValue":h=>d("port",h),label:"Port",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])]),f("div",yT,[S(Se,{"model-value":c.database,"onUpdate:modelValue":h=>d("database",h),label:"Database",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),S(Se,{"model-value":c.schema,"onUpdate:modelValue":h=>d("schema",h),label:"Schema",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])]),f("div",bT,[S(Se,{"model-value":c.user,"onUpdate:modelValue":h=>d("user",h),label:"User",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),S(Se,{"model-value":c.password,"onUpdate:modelValue":h=>d("password",h),label:"Password",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])])):c.driver==="mysql"||c.driver==="sqlserver"?(v(),k("div",kT,[f("div",xT,[S(Se,{"model-value":c.host,"onUpdate:modelValue":h=>d("host",h),label:"Host",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),S(Se,{"model-value":c.port,"onUpdate:modelValue":h=>d("port",h),label:"Port",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])]),S(Se,{"model-value":c.database,"onUpdate:modelValue":h=>d("database",h),label:"Database",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),f("div",wT,[S(Se,{"model-value":c.user,"onUpdate:modelValue":h=>d("user",h),label:"User",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),S(Se,{"model-value":c.password,"onUpdate:modelValue":h=>d("password",h),label:"Password",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])])):H("",!0)])]),_:1},8,["model-value"])]),f("div",ST,[a[9]||(a[9]=f("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"S3-compatible Storage",-1)),S(Oi,{"model-value":s.s3Connections,"onUpdate:modelValue":a[1]||(a[1]=c=>l.$emit("update:s3Connections",c)),"add-label":"Add Bucket","default-item":o},{default:X(({item:c,index:u,update:d})=>[f("div",CT,[S(Se,{"model-value":c.name,"onUpdate:modelValue":h=>d("name",h),label:"Connection Name",error:n(c.name,u),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),f("div",_T,[f("input",{type:"radio",id:`default-s3-${c._id}`,checked:s.defaultStorageBucket===c.name,onChange:h=>l.$emit("update:defaultStorageBucket",c.name),class:"h-4 w-4 text-sky-600 focus:ring-sky-500"},null,40,AT),f("label",{for:`default-s3-${c._id}`,class:"text-sm text-gray-700 dark:text-gray-300"}," Default storage bucket ",8,MT)]),f("div",DT,[S(Se,{"model-value":c.bucket,"onUpdate:modelValue":h=>d("bucket",h),label:"Bucket",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),S(Se,{"model-value":c.region,"onUpdate:modelValue":h=>d("region",h),label:"Region",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])]),f("div",ET,[S(Se,{"model-value":c.access_key,"onUpdate:modelValue":h=>d("access_key",h),label:"Access Key",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),S(Se,{"model-value":c.secret_key,"onUpdate:modelValue":h=>d("secret_key",h),label:"Secret Key",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])]),S(Se,{"model-value":c.endpoint,"onUpdate:modelValue":h=>d("endpoint",h),label:"Endpoint",hint:"Leave empty for AWS S3, or specify custom endpoint for MinIO, etc.",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),S(Rn,{"model-value":c.static_hosting,"onUpdate:modelValue":h=>d("static_hosting",h),id:"static-hosting",description:"Enable for S3 static website hosting, R2 public buckets, or CDN-fronted storage. Allows clean URLs like /report/ instead of /report.html"},{default:X(()=>[...a[8]||(a[8]=[de(" Static website hosting ",-1)])]),_:1},8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value"])])]))}},TT={class:"space-y-6"},jT={class:"space-y-4"},OT={class:"space-y-4"},Jf={__name:"QuartoSettingsPanel",props:{modelValue:{type:Object,required:!0},flush:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(s,{emit:e}){const t=s,n=e,i=F(()=>t.flush?"":"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"),r=Y({html:{format:"html",embed_resources:t.modelValue.html?.embed_resources??!0,theme:t.modelValue.html?.theme??"default",toc:t.modelValue.html?.toc??!0,toc_depth:t.modelValue.html?.toc_depth??3,code_fold:t.modelValue.html?.code_fold??!1,code_tools:t.modelValue.html?.code_tools??!1,highlight_style:t.modelValue.html?.highlight_style??"github"},revealjs:{format:"revealjs",theme:t.modelValue.revealjs?.theme??"default",incremental:t.modelValue.revealjs?.incremental??!1,slide_number:t.modelValue.revealjs?.slide_number??!0,transition:t.modelValue.revealjs?.transition??"slide",background_transition:t.modelValue.revealjs?.background_transition??"fade",controls:t.modelValue.revealjs?.controls??!0,progress:t.modelValue.revealjs?.progress??!0,center:t.modelValue.revealjs?.center??!0,highlight_style:t.modelValue.revealjs?.highlight_style??"github"}});Pe(()=>t.modelValue,l=>{r.value={html:{format:"html",embed_resources:l.html?.embed_resources??!0,theme:l.html?.theme??"default",toc:l.html?.toc??!0,toc_depth:l.html?.toc_depth??3,code_fold:l.html?.code_fold??!1,code_tools:l.html?.code_tools??!1,highlight_style:l.html?.highlight_style??"github"},revealjs:{format:"revealjs",theme:l.revealjs?.theme??"default",incremental:l.revealjs?.incremental??!1,slide_number:l.revealjs?.slide_number??!0,transition:l.revealjs?.transition??"slide",background_transition:l.revealjs?.background_transition??"fade",controls:l.revealjs?.controls??!0,progress:l.revealjs?.progress??!0,center:l.revealjs?.center??!0,highlight_style:l.revealjs?.highlight_style??"github"}}},{deep:!0});const o=(l,a,c)=>{r.value[l][a]=c,n("update:modelValue",{...r.value})};return(l,a)=>(v(),k("div",TT,[f("div",{class:xe(i.value)},[a[18]||(a[18]=f("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-2"}," HTML Rendering ",-1)),a[19]||(a[19]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Default settings for HTML documents (notebooks, documentation). ",-1)),f("div",jT,[S(ns,{"model-value":r.value.html.theme,"onUpdate:modelValue":a[0]||(a[0]=c=>o("html","theme",c)),label:"Theme"},{default:X(()=>[...a[16]||(a[16]=[f("option",{value:"default"},"Default",-1),f("option",{value:"cosmo"},"Cosmo",-1),f("option",{value:"cerulean"},"Cerulean",-1),f("option",{value:"flatly"},"Flatly",-1),f("option",{value:"journal"},"Journal",-1),f("option",{value:"lumen"},"Lumen",-1),f("option",{value:"minty"},"Minty",-1),f("option",{value:"pulse"},"Pulse",-1),f("option",{value:"sandstone"},"Sandstone",-1),f("option",{value:"simplex"},"Simplex",-1),f("option",{value:"sketchy"},"Sketchy",-1),f("option",{value:"slate"},"Slate",-1),f("option",{value:"solar"},"Solar",-1),f("option",{value:"spacelab"},"Spacelab",-1),f("option",{value:"superhero"},"Superhero",-1),f("option",{value:"united"},"United",-1),f("option",{value:"yeti"},"Yeti",-1)])]),_:1},8,["model-value"]),S(Ge,{"model-value":r.value.html.embed_resources,"onUpdate:modelValue":a[1]||(a[1]=c=>o("html","embed_resources",c)),label:"Embed resources",description:"Produce standalone HTML files with all dependencies and resources embedded."},null,8,["model-value"]),S(Ge,{"model-value":r.value.html.toc,"onUpdate:modelValue":a[2]||(a[2]=c=>o("html","toc",c)),label:"Table of contents",description:"Generate a table of contents sidebar."},null,8,["model-value"]),S(Se,{type:"number","model-value":r.value.html.toc_depth,"onUpdate:modelValue":a[3]||(a[3]=c=>o("html","toc_depth",parseInt(c)||3)),label:"TOC depth",min:"1",max:"5"},null,8,["model-value"]),S(Ge,{"model-value":r.value.html.code_fold,"onUpdate:modelValue":a[4]||(a[4]=c=>o("html","code_fold",c)),label:"Code folding",description:"Allow readers to collapse/expand code blocks."},null,8,["model-value"]),S(Ge,{"model-value":r.value.html.code_tools,"onUpdate:modelValue":a[5]||(a[5]=c=>o("html","code_tools",c)),label:"Code tools",description:"Provide code download and viewing options."},null,8,["model-value"]),S(ns,{"model-value":r.value.html.highlight_style,"onUpdate:modelValue":a[6]||(a[6]=c=>o("html","highlight_style",c)),label:"Syntax highlighting"},{default:X(()=>[...a[17]||(a[17]=[f("option",{value:"github"},"GitHub",-1),f("option",{value:"tango"},"Tango",-1),f("option",{value:"pygments"},"Pygments",-1),f("option",{value:"kate"},"Kate",-1),f("option",{value:"monochrome"},"Monochrome",-1),f("option",{value:"espresso"},"Espresso",-1),f("option",{value:"zenburn"},"Zenburn",-1),f("option",{value:"haddock"},"Haddock",-1),f("option",{value:"breezedark"},"Breeze Dark",-1)])]),_:1},8,["model-value"])])],2),f("div",{class:xe(i.value)},[a[24]||(a[24]=f("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-2"}," Presentations (revealjs) ",-1)),a[25]||(a[25]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Default settings for slide presentations. ",-1)),f("div",OT,[S(ns,{"model-value":r.value.revealjs.theme,"onUpdate:modelValue":a[7]||(a[7]=c=>o("revealjs","theme",c)),label:"Theme"},{default:X(()=>[...a[20]||(a[20]=[f("option",{value:"default"},"Default",-1),f("option",{value:"beige"},"Beige",-1),f("option",{value:"black"},"Black",-1),f("option",{value:"blood"},"Blood",-1),f("option",{value:"league"},"League",-1),f("option",{value:"moon"},"Moon",-1),f("option",{value:"night"},"Night",-1),f("option",{value:"serif"},"Serif",-1),f("option",{value:"simple"},"Simple",-1),f("option",{value:"sky"},"Sky",-1),f("option",{value:"solarized"},"Solarized",-1),f("option",{value:"white"},"White",-1)])]),_:1},8,["model-value"]),S(Ge,{"model-value":r.value.revealjs.incremental,"onUpdate:modelValue":a[8]||(a[8]=c=>o("revealjs","incremental",c)),label:"Incremental bullets",description:"Reveal list items one at a time."},null,8,["model-value"]),S(Ge,{"model-value":r.value.revealjs.slide_number,"onUpdate:modelValue":a[9]||(a[9]=c=>o("revealjs","slide_number",c)),label:"Slide numbers",description:"Show slide numbers in the corner."},null,8,["model-value"]),S(Ge,{"model-value":r.value.revealjs.controls,"onUpdate:modelValue":a[10]||(a[10]=c=>o("revealjs","controls",c)),label:"Navigation controls",description:"Show arrow controls for navigation."},null,8,["model-value"]),S(Ge,{"model-value":r.value.revealjs.progress,"onUpdate:modelValue":a[11]||(a[11]=c=>o("revealjs","progress",c)),label:"Progress bar",description:"Show progress bar at the bottom."},null,8,["model-value"]),S(Ge,{"model-value":r.value.revealjs.center,"onUpdate:modelValue":a[12]||(a[12]=c=>o("revealjs","center",c)),label:"Center slides",description:"Vertically center slide content."},null,8,["model-value"]),S(ns,{"model-value":r.value.revealjs.transition,"onUpdate:modelValue":a[13]||(a[13]=c=>o("revealjs","transition",c)),label:"Slide transition"},{default:X(()=>[...a[21]||(a[21]=[f("option",{value:"none"},"None",-1),f("option",{value:"fade"},"Fade",-1),f("option",{value:"slide"},"Slide",-1),f("option",{value:"convex"},"Convex",-1),f("option",{value:"concave"},"Concave",-1),f("option",{value:"zoom"},"Zoom",-1)])]),_:1},8,["model-value"]),S(ns,{"model-value":r.value.revealjs.background_transition,"onUpdate:modelValue":a[14]||(a[14]=c=>o("revealjs","background_transition",c)),label:"Background transition"},{default:X(()=>[...a[22]||(a[22]=[f("option",{value:"none"},"None",-1),f("option",{value:"fade"},"Fade",-1),f("option",{value:"slide"},"Slide",-1),f("option",{value:"convex"},"Convex",-1),f("option",{value:"concave"},"Concave",-1),f("option",{value:"zoom"},"Zoom",-1)])]),_:1},8,["model-value"]),S(ns,{"model-value":r.value.revealjs.highlight_style,"onUpdate:modelValue":a[15]||(a[15]=c=>o("revealjs","highlight_style",c)),label:"Syntax highlighting"},{default:X(()=>[...a[23]||(a[23]=[f("option",{value:"github"},"GitHub",-1),f("option",{value:"tango"},"Tango",-1),f("option",{value:"pygments"},"Pygments",-1),f("option",{value:"kate"},"Kate",-1),f("option",{value:"monochrome"},"Monochrome",-1),f("option",{value:"espresso"},"Espresso",-1),f("option",{value:"zenburn"},"Zenburn",-1),f("option",{value:"haddock"},"Haddock",-1),f("option",{value:"breezedark"},"Breeze Dark",-1)])]),_:1},8,["model-value"])])],2)]))}},PT={key:0,class:"space-y-2"},$T={key:0,class:"text-lg font-semibold text-gray-900 dark:text-white"},RT={key:1,class:"text-sm text-gray-600 dark:text-gray-400"},LT={class:"space-y-6"},es={__name:"SettingsPanel",props:{title:{type:String,default:""},description:{type:String,default:""},flush:{type:Boolean,default:!1}},setup(s){return(e,t)=>(v(),k("section",{class:xe(["space-y-6",s.flush?"":"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"])},[s.title||s.description?(v(),k("header",PT,[s.title?(v(),k("h2",$T,J(s.title),1)):H("",!0),s.description?(v(),k("p",RT,J(s.description),1)):H("",!0)])):H("",!0),f("div",LT,[dt(e.$slots,"default")]),e.$slots.actions?(v(),k("div",{key:1,class:xe(["flex justify-end",s.flush?"":"pt-4 border-t border-gray-200 dark:border-gray-700"])},[dt(e.$slots,"actions")],2)):H("",!0)],2))}},VT={class:"space-y-3"},BT={key:0,class:"space-y-1"},IT={key:0,class:"text-sm font-semibold text-gray-900 dark:text-white"},NT={key:1,class:"text-xs text-gray-600 dark:text-gray-400"},FT={class:"space-y-3"},Pd={__name:"SettingsBlock",props:{title:{type:String,default:""},description:{type:String,default:""}},setup(s){return(e,t)=>(v(),k("div",VT,[s.title||s.description?(v(),k("div",BT,[s.title?(v(),k("h3",IT,J(s.title),1)):H("",!0),s.description?(v(),k("p",NT,J(s.description),1)):H("",!0)])):H("",!0),f("div",FT,[dt(e.$slots,"default")])]))}},zT={class:"space-y-5"},UT={key:0,class:"grid grid-cols-2 gap-3"},HT={key:0,class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},qT={class:"grid grid-cols-2 gap-3"},WT={__name:"CourseDirectoriesPanel",props:{directoriesEnabled:{type:Object,required:!0},directories:{type:Object,required:!0},renderDirs:{type:Object,default:()=>({})},catalog:{type:Object,default:()=>({})},extraDirectoriesEnabled:{type:Object,default:()=>({})},extraDirectories:{type:Array,default:()=>[]},projectCustomDirectories:{type:Array,default:()=>[]},allowCustomDirectories:{type:Boolean,default:!1},flush:{type:Boolean,default:!1}},emits:["update:directoriesEnabled","update:directories","update:renderDirs","update:extraDirectoriesEnabled","update:projectCustomDirectories"],setup(s,{emit:e}){const t=s,n=e,i=Y(Math.random().toString(36).substring(7)),r=["slides","assignments","course_docs","notebooks"],o=["readings","data"],l=["functions","scripts"],a=F(()=>t.flush?"":"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"),c=L=>L in t.directoriesEnabled?t.directoriesEnabled[L]:t.catalog?.directories?.[L]?.enabled_by_default??!1,u=(L,_)=>{n("update:directoriesEnabled",{...t.directoriesEnabled,[L]:_})},d=L=>t.directories[L]||"",h=(L,_)=>{n("update:directories",{...t.directories,[L]:_})},p=L=>{const _=L==="notebooks"?"modules":L;return t.renderDirs[_]?t.renderDirs[_]:t.catalog?.render_dirs?.[_]?.default||""},y=(L,_)=>{const R=L==="notebooks"?"modules":L;n("update:renderDirs",{...t.renderDirs,[R]:_})},b=L=>{if(!t.catalog||typeof t.catalog!="object")return"";const _=L==="notebooks"?"modules":L;return(t.catalog.render_dirs||{})[_]?.default||`rendered/${_}`},x=L=>!t.catalog||typeof t.catalog!="object"?L.charAt(0).toUpperCase()+L.slice(1):(t.catalog.directories||{})[L]?.label||L.charAt(0).toUpperCase()+L.slice(1),g=L=>!t.catalog||typeof t.catalog!="object"?"":(t.catalog.directories||{})[L]?.hint||"",j=L=>!t.catalog||typeof t.catalog!="object"?L:(t.catalog.directories||{})[L]?.default||L,B=L=>t.extraDirectoriesEnabled[L]??!1,U=(L,_)=>{n("update:extraDirectoriesEnabled",{...t.extraDirectoriesEnabled,[L]:_})},I=(L,_)=>{console.warn("Extra directory paths are managed in global settings")};return(L,_)=>(v(),k("div",{class:xe(a.value)},[_[3]||(_[3]=f("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"},"Materials",-1)),_[4]||(_[4]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Slides, assignments, readings, and course documentation with automatic rendering to web-ready formats. ",-1)),f("div",zT,[(v(),k(be,null,Le(r,R=>f("div",{key:R},[S(Ge,{id:`course-${R}-${i.value}`,"model-value":c(R),"onUpdate:modelValue":W=>u(R,W),label:x(R),description:g(R),class:"mb-2"},null,8,["id","model-value","onUpdate:modelValue","label","description"]),c(R)?(v(),k("div",UT,[S(Se,{"model-value":d(R),"onUpdate:modelValue":W=>h(R,W),placeholder:j(R),label:"Source files",prefix:"/",monospace:""},null,8,["model-value","onUpdate:modelValue","placeholder"]),S(Se,{"model-value":p(R),"onUpdate:modelValue":W=>y(R,W),placeholder:b(R),label:"Quarto render directory",prefix:"/",monospace:""},null,8,["model-value","onUpdate:modelValue","placeholder"])])):H("",!0)])),64)),(v(),k(be,null,Le(o,R=>f("div",{key:R},[S(Ge,{id:`course-${R}-${i.value}`,"model-value":c(R),"onUpdate:modelValue":W=>u(R,W),label:x(R),description:g(R),class:"mb-2"},null,8,["id","model-value","onUpdate:modelValue","label","description"]),c(R)?(v(),Ae(Se,{key:0,"model-value":d(R),"onUpdate:modelValue":W=>h(R,W),placeholder:j(R),prefix:"/",monospace:""},null,8,["model-value","onUpdate:modelValue","placeholder"])):H("",!0)])),64)),(v(),k(be,null,Le(l,R=>f("div",{key:R},[S(Ge,{id:`course-${R}-${i.value}`,"model-value":c(R),"onUpdate:modelValue":W=>u(R,W),label:x(R),description:g(R),class:"mb-2"},null,8,["id","model-value","onUpdate:modelValue","label","description"]),c(R)?(v(),Ae(Se,{key:0,"model-value":d(R),"onUpdate:modelValue":W=>h(R,W),placeholder:j(R),prefix:"/",monospace:""},null,8,["model-value","onUpdate:modelValue","placeholder"])):H("",!0)])),64)),(v(!0),k(be,null,Le(s.extraDirectories,R=>(v(),k("div",{key:`extra-${R.key}`,class:"space-y-1.5"},[S(Ge,{id:`extra-course-${R.key}-${i.value}`,"model-value":B(R.key),"onUpdate:modelValue":W=>U(R.key,W),label:R.label,description:`Custom: ${R.path}`,class:"mb-2"},null,8,["id","model-value","onUpdate:modelValue","label","description"]),B(R.key)?(v(),Ae(Se,{key:0,"model-value":R.path,"onUpdate:modelValue":W=>I(R.key),placeholder:R.path,prefix:"/",monospace:"",readonly:""},null,8,["model-value","onUpdate:modelValue","placeholder"])):H("",!0)]))),128))]),s.allowCustomDirectories?(v(),k("div",HT,[_[1]||(_[1]=f("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"}," Add Custom Course Directories ",-1)),_[2]||(_[2]=f("p",{class:"text-xs text-gray-600 dark:text-gray-400 mb-3"}," Add directories specific to this course only. ",-1)),S(Oi,{"model-value":s.projectCustomDirectories,"onUpdate:modelValue":_[0]||(_[0]=R=>L.$emit("update:projectCustomDirectories",R)),"add-label":"Add Course Directory","default-item":()=>({key:"",label:"",path:"",type:"course",_id:Date.now()})},{default:X(({item:R,index:W,update:ce})=>[f("div",qT,[S(Se,{"model-value":R.key,"onUpdate:modelValue":ne=>ce("key",ne),label:"Key",placeholder:"e.g., course_videos",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),S(Se,{"model-value":R.label,"onUpdate:modelValue":ne=>ce("label",ne),label:"Label",placeholder:"e.g., Videos",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),S(Se,{"model-value":R.path,"onUpdate:modelValue":ne=>ce("path",ne),label:"Path",placeholder:"e.g., videos",prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])):H("",!0)],2))}},KT={class:"space-y-6"},GT={class:"space-y-5"},JT=["value"],QT={class:"flex flex-wrap items-center justify-between gap-3"},YT={class:"flex flex-wrap gap-2 text-xs font-medium text-gray-600 dark:text-gray-400"},XT={key:1,id:"section-primary-files"},ZT={class:"space-y-4"},e6={key:2,id:"section-optional-directories"},t6={class:"space-y-4"},s6={class:"space-y-2"},n6={class:"space-y-2"},i6={class:"space-y-2"},r6={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},o6={key:0,class:"space-y-3 mb-4"},l6={class:"space-y-3"},a6={key:3,id:"section-materials"},u6={key:4,id:"section-inputs"},c6={key:0},d6={class:"space-y-5"},f6={key:0,class:"text-sm text-gray-500 dark:text-gray-400 mb-2"},h6={class:"grid gap-4 sm:grid-cols-2"},p6={class:"space-y-2"},g6={class:"space-y-2"},m6={key:1,class:"space-y-5"},v6={key:2,class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},y6={key:0,class:"space-y-3 mb-4"},b6={class:"space-y-3"},k6={key:5,id:"section-workspaces"},x6={class:"space-y-5"},w6={key:0,class:"grid grid-cols-2 gap-3"},S6={key:0,class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},C6={key:0,class:"space-y-3 mb-4"},_6={class:"space-y-3"},A6={key:6,id:"section-outputs"},M6={key:0},D6={class:"space-y-5"},E6={key:0,class:"text-sm text-gray-500 dark:text-gray-400 mb-2"},T6={class:"grid gap-4 sm:grid-cols-2"},j6={class:"space-y-2"},O6={class:"space-y-2"},P6={key:1,class:"space-y-5"},$6={key:2,class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},R6={key:0,class:"space-y-3 mb-4"},L6={class:"space-y-3"},V6={key:7,id:"section-utility"},B6={class:"space-y-5"},I6={id:"section-gitignore"},Qf={__name:"ProjectStructureEditor",props:{projectType:{type:String,required:!0},directories:{type:Object,required:!0},renderDirs:{type:Object,default:()=>({})},enabled:{type:Object,required:!0},extraDirectories:{type:Array,default:()=>[]},settings:{type:Object,default:()=>({})},gitignore:{type:String,default:""},catalog:{type:Object,required:!0},newExtraIds:{type:Set,default:()=>new Set},disabled:{type:Boolean,default:!1},allowDestruction:{type:Boolean,default:!0}},emits:["update:directories","update:renderDirs","update:enabled","update:extraDirectories","update:settings","update:gitignore","update:newExtraIds","reset"],setup(s,{emit:e}){const t=s,n=e,i=Y({...t.directories}),r=Y({...t.renderDirs}),o=Y({...t.enabled}),l=Y({...t.settings}),a=Y(t.gitignore),c=Z=>i.value[Z]?i.value[Z]:t.catalog?.directories?.[Z]?.default||"",u=Z=>r.value[Z]?r.value[Z]:t.catalog?.render_dirs?.[Z]?.default||"";Pe(()=>t.directories,Z=>{i.value={...Z}},{deep:!0}),Pe(()=>t.renderDirs,Z=>{r.value={...Z}},{deep:!0}),Pe(()=>t.enabled,Z=>{o.value={...Z}},{deep:!0}),Pe(()=>t.settings,Z=>{l.value={...Z}},{deep:!0}),Pe(()=>t.gitignore,Z=>{a.value=Z}),Pe(()=>t.extraDirectories,Z=>{if(Z.some(C=>C.label&&!C.key)){const C=[...t.catalog?.directories?Object.keys(t.catalog.directories):[],...Z.filter(A=>A.key).map(A=>A.key)],ie=Z.map(A=>{if(A.label&&!A.key){const $=me(A.label,C);return C.push($),console.log("[DEBUG] Auto-generated key:",{label:A.label,key:$}),{...A,key:$}}return A});n("update:extraDirectories",ie)}},{deep:!0});const d=[{key:"notebooks",label:"Notebooks",hint:"Quarto or R Markdown notebooks for analysis.",defaultRenderDir:"outputs/notebooks"},{key:"docs",label:"Documentation",hint:"Codebooks, documentation, and other reference materials.",defaultRenderDir:"outputs/docs"}],h=[{key:"functions",label:"Functions",hint:"R files here are sourced by scaffold(), so helper functions are available in every project session."},{key:"scripts",label:"Scripts",hint:"Reusable R scripts, job runners, or automation tasks."}],p=[{key:"inputs_raw",label:"Raw data",hint:"Read-only exports from source systems."},{key:"inputs_intermediate",label:"Intermediate data",hint:"Data after light cleaning or pre-processing steps."},{key:"inputs_final",label:"Analysis-ready data",hint:"Final inputs ready for modeling or reporting."}],y=[{key:"outputs_tables",label:"Tables",hint:"Publishable tables ready for reports or manuscripts."},{key:"outputs_figures",label:"Figures",hint:"Final plots and graphics."},{key:"outputs_models",label:"Models",hint:"Serialized models or model summaries."},{key:"outputs_reports",label:"Reports",hint:"Final reports and deliverables ready for publication."}],b=[{key:"scratch",label:"Scratch",hint:"Short-lived explorations (gitignored)."}],x=Z=>t.catalog?.directories?.[Z]||{},g=Z=>Z.map(K=>{const C=x(K.key),ie=t.catalog?.render_dirs?.[K.key]||{};return{key:K.key,label:C.label||K.label,hint:C.hint||K.hint||"",defaultRenderDir:ie.default||K.defaultRenderDir||""}}),j=F(()=>t.projectType==="project_sensitive"),B=F(()=>t.projectType==="presentation"),U=F(()=>t.projectType==="course"),I=(Z,K)=>Z.map(C=>{const ie=`${K}_private_${C.key.replace(K+"_","")}`,A=`${K}_public_${C.key.replace(K+"_","")}`,$=x(ie),q=x(A);return{privateKey:ie,publicKey:A,privateLabel:$.label||`${C.label} (private)`,publicLabel:q.label||`${C.label} (public)`,hint:C.hint||""}}),L=F(()=>g(d)),_=F(()=>g(h)),R=F(()=>[...L.value,..._.value]),W=F(()=>j.value?I(p,"inputs"):g(p)),ce=F(()=>j.value?I(y,"outputs"):g(y)),ne=F(()=>g(b)),N=F(()=>t.catalog?.settings||[]),le=F(()=>t.extraDirectories.filter(Z=>Z.type==="input"&&!t.newExtraIds.has(Z._id))),ee=F(()=>t.extraDirectories.filter(Z=>Z.type==="workspace"&&!t.newExtraIds.has(Z._id))),V=F(()=>t.extraDirectories.filter(Z=>Z.type==="output"&&!t.newExtraIds.has(Z._id))),G=F(()=>t.extraDirectories.filter(Z=>Z.type==="input"&&t.newExtraIds.has(Z._id))),Q=F(()=>t.extraDirectories.filter(Z=>Z.type==="workspace"&&t.newExtraIds.has(Z._id))),ae=F(()=>t.extraDirectories.filter(Z=>Z.type==="output"&&t.newExtraIds.has(Z._id))),me=(Z,K=[])=>{if(!Z)return"";let C=Z.toLowerCase().trim().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,"").replace(/_+/g,"_").replace(/^_|_$/g,""),ie=C,A=2;for(;K.includes(ie);)ie=`${C}_${A}`,A++;return ie},$e=(Z,K)=>{i.value[Z]=K,n("update:directories",{...i.value})},Re=(Z,K)=>{r.value[Z]=K,n("update:renderDirs",{...r.value})},Oe=(Z,K)=>{!t.allowDestruction&&o.value[Z]===!0&&K===!1||(o.value[Z]=K,n("update:enabled",{...o.value}))},Ue=Z=>!!(t.disabled||!t.allowDestruction&&o.value[Z]===!0),ot=(Z,K)=>{l.value[Z]=K,n("update:settings",{...l.value})},st=(Z,K)=>{const C=t.extraDirectories.map(ie=>ie.key===Z?{...ie,path:K}:ie);n("update:extraDirectories",C)},Xe=(Z,K)=>{console.log("[DEBUG] updateNewExtras called:",{type:Z,newItems:JSON.parse(JSON.stringify(K)),itemCount:K.length});const C=t.extraDirectories.filter(se=>se.type===Z&&!t.newExtraIds.has(se._id)),A=t.extraDirectories.filter(se=>se.type===Z&&t.newExtraIds.has(se._id)).filter(se=>!K.some(ye=>ye._id===se._id)),$=new Set(t.newExtraIds);A.forEach(se=>{se._id&&$.delete(se._id)}),K.forEach(se=>{se._id&&$.add(se._id)}),n("update:newExtraIds",$);const q={...o.value};let oe=!1;K.forEach(se=>{if(se.key){const ye=C.some(T=>T.key===se.key),D=t.catalog?.directories&&Object.keys(t.catalog.directories).includes(se.key);!q.hasOwnProperty(se.key)&&!ye&&!D&&(q[se.key]=!0,oe=!0)}}),oe&&n("update:enabled",q);const te=t.extraDirectories.filter(se=>se.type!==Z);n("update:extraDirectories",[...te,...C,...K])},re=Z=>{const K=document.getElementById(`section-${Z}`);K&&K.scrollIntoView({behavior:"smooth",block:"start"})};return(Z,K)=>(v(),k("div",KT,[N.value.length>0?(v(),Ae(es,{key:0,title:"Project Settings",description:"Default settings applied when creating new projects of this type."},{default:X(()=>[S(Pd,null,{default:X(()=>[f("div",GT,[(v(!0),k(be,null,Le(N.value,C=>(v(),k(be,{key:C.id},[C.control==="toggle"?(v(),Ae(Ge,{key:0,"model-value":l.value[C.id],"onUpdate:modelValue":ie=>ot(C.id,ie),label:C.label,description:C.description,disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","label","description","disabled"])):C.control==="select"?(v(),Ae(ns,{key:1,"model-value":l.value[C.id],"onUpdate:modelValue":ie=>ot(C.id,ie),label:C.label,hint:C.hint},{default:X(()=>[(v(!0),k(be,null,Le(C.options,ie=>(v(),k("option",{key:ie.value,value:ie.value},J(ie.label),9,JT))),128))]),_:2},1032,["model-value","onUpdate:modelValue","label","hint"])):C.control==="text"?(v(),Ae(Se,{key:2,"model-value":l.value[C.id],"onUpdate:modelValue":ie=>ot(C.id,ie),label:C.label,hint:C.hint,placeholder:C.placeholder},null,8,["model-value","onUpdate:modelValue","label","hint","placeholder"])):H("",!0)],64))),128))])]),_:1})]),_:1})):H("",!0),f("div",QT,[f("div",YT,[B.value?(v(),k("button",{key:0,type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:K[0]||(K[0]=C=>re("primary-files"))}," Primary Files ")):H("",!0),B.value?(v(),k("button",{key:1,type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:K[1]||(K[1]=C=>re("optional-directories"))}," Optional Directories ")):H("",!0),U.value?(v(),k("button",{key:2,type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:K[2]||(K[2]=C=>re("materials"))}," Materials ")):H("",!0),!B.value&&!U.value&&W.value.length>0?(v(),k("button",{key:3,type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:K[3]||(K[3]=C=>re("inputs"))}," Inputs ")):H("",!0),!B.value&&!U.value&&R.value.length>0?(v(),k("button",{key:4,type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:K[4]||(K[4]=C=>re("workspaces"))}," Workspaces ")):H("",!0),!B.value&&!U.value&&ce.value.length>0?(v(),k("button",{key:5,type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:K[5]||(K[5]=C=>re("outputs"))}," Outputs ")):H("",!0),!B.value&&!U.value&&ne.value.length>0?(v(),k("button",{key:6,type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:K[6]||(K[6]=C=>re("utility"))}," Utility ")):H("",!0),f("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:K[7]||(K[7]=C=>re("gitignore"))}," .gitignore ")]),!s.disabled&&s.allowDestruction?(v(),Ae(Je,{key:0,variant:"secondary",size:"sm",class:"mt-3 sm:mt-0",onClick:K[8]||(K[8]=C=>Z.$emit("reset"))},{default:X(()=>[...K[25]||(K[25]=[de(" Reset to Defaults ",-1)])]),_:1})):H("",!0)]),B.value?(v(),k("div",XT,[S(es,{title:"Primary Files",description:"The main presentation file and where rendered slides are output."},{default:X(()=>[f("div",ZT,[S(Se,{"model-value":i.value.presentation_source,"onUpdate:modelValue":K[9]||(K[9]=C=>$e("presentation_source",C)),label:"Presentation source file",placeholder:"presentation.qmd",hint:"Main Quarto file for your slides",disabled:s.disabled},null,8,["model-value","disabled"]),S(Se,{"model-value":i.value.rendered_slides,"onUpdate:modelValue":K[10]||(K[10]=C=>$e("rendered_slides",C)),label:"Rendered slides directory",placeholder:".",hint:"Rendered slides write to the project root by default (.)",prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","disabled"])])]),_:1})])):H("",!0),B.value?(v(),k("div",e6,[S(es,{title:"Optional Directories",description:"Toggle extra scaffolding when you need supporting data, scripts, or helper utilities."},{default:X(()=>[f("div",t6,[f("div",s6,[S(Ge,{"model-value":o.value.data,"onUpdate:modelValue":K[11]||(K[11]=C=>Oe("data",C)),label:"Include data directory",description:"Adds a /data folder for sample data used in the presentation.",disabled:Ue("data")},null,8,["model-value","disabled"]),o.value.data?(v(),Ae(Se,{key:0,"model-value":c("data"),"onUpdate:modelValue":K[12]||(K[12]=C=>$e("data",C)),prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","disabled"])):H("",!0)]),f("div",n6,[S(Ge,{"model-value":o.value.scripts,"onUpdate:modelValue":K[13]||(K[13]=C=>Oe("scripts",C)),label:"Include scripts directory",description:"Adds a scripts/ folder for demo code or automation.",disabled:Ue("scripts")},null,8,["model-value","disabled"]),o.value.scripts?(v(),Ae(Se,{key:0,"model-value":c("scripts"),"onUpdate:modelValue":K[14]||(K[14]=C=>$e("scripts",C)),prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","disabled"])):H("",!0)]),f("div",i6,[S(Ge,{"model-value":o.value.functions,"onUpdate:modelValue":K[15]||(K[15]=C=>Oe("functions",C)),label:"Include functions directory",description:"Adds functions/ for helper utilities that should load automatically.",disabled:Ue("functions")},null,8,["model-value","disabled"]),o.value.functions?(v(),Ae(Se,{key:0,"model-value":c("functions"),"onUpdate:modelValue":K[16]||(K[16]=C=>$e("functions",C)),prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","disabled"])):H("",!0)]),f("div",r6,[K[26]||(K[26]=f("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Add Custom Directories",-1)),ee.value.length>0?(v(),k("div",o6,[(v(!0),k(be,null,Le(ee.value,C=>(v(),k("div",{key:C.key,class:"space-y-1.5"},[S(Ge,{"model-value":o.value[C.key],"onUpdate:modelValue":ie=>Oe(C.key,ie),label:C.label,disabled:Ue(C.key)},null,8,["model-value","onUpdate:modelValue","label","disabled"]),o.value[C.key]!==!1?(v(),Ae(Se,{key:0,"model-value":C.path,"onUpdate:modelValue":ie=>st(C.key,ie),prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):H("",!0)]))),128))])):H("",!0),s.disabled?H("",!0):(v(),Ae(Oi,{key:1,"model-value":Q.value,"onUpdate:modelValue":K[17]||(K[17]=C=>Xe("workspace",C)),"add-label":"Add Directory","default-item":()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:X(({item:C,update:ie})=>[f("div",l6,[S(Se,{"model-value":C.label,"onUpdate:modelValue":A=>ie("label",A),label:"Label",placeholder:"e.g., Assets"},null,8,["model-value","onUpdate:modelValue"]),S(Se,{"model-value":C.path,"onUpdate:modelValue":A=>ie("path",A),label:"Path",placeholder:"e.g., assets",prefix:"/",monospace:""},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"]))])])]),_:1})])):H("",!0),U.value?(v(),k("div",a6,[S(WT,{"directories-enabled":o.value,"onUpdate:directoriesEnabled":K[18]||(K[18]=C=>{o.value=C,n("update:enabled",C)}),directories:i.value,"onUpdate:directories":K[19]||(K[19]=C=>{i.value=C,n("update:directories",C)}),"render-dirs":r.value,"onUpdate:renderDirs":K[20]||(K[20]=C=>{r.value=C,n("update:renderDirs",C)}),catalog:s.catalog,"extra-directories":s.extraDirectories.filter(C=>C.type==="course"),"extra-directories-enabled":{},"onUpdate:extraDirectoriesEnabled":()=>{},"project-custom-directories":[],"onUpdate:projectCustomDirectories":()=>{},"allow-custom-directories":!1,flush:!1},null,8,["directories-enabled","directories","render-dirs","catalog","extra-directories"])])):H("",!0),!B.value&&!U.value&&W.value.length>0?(v(),k("div",u6,[S(es,{title:"Inputs",description:j.value?"Keep private inputs compartmentalized; publish processed outputs into public folders when ready.":"Define the read-only locations where raw and prepared data live."},{default:X(()=>[j.value?(v(),k("div",c6,[K[27]||(K[27]=f("div",{class:"grid gap-4 sm:grid-cols-2 text-xs font-semibold uppercase text-gray-500 dark:text-gray-400 mb-4"},[f("div",null,"Private"),f("div",null,"Public")],-1)),f("div",d6,[(v(!0),k(be,null,Le(W.value,C=>(v(),k("div",{key:C.privateKey},[C.hint?(v(),k("p",f6,J(C.hint),1)):H("",!0),f("div",h6,[f("div",p6,[S(Ge,{"model-value":o.value[C.privateKey],"onUpdate:modelValue":ie=>Oe(C.privateKey,ie),label:C.privateLabel,disabled:Ue(C.privateKey)},null,8,["model-value","onUpdate:modelValue","label","disabled"]),o.value[C.privateKey]!==!1?(v(),Ae(Se,{key:0,"model-value":c(C.privateKey),"onUpdate:modelValue":ie=>$e(C.privateKey,ie),prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):H("",!0)]),f("div",g6,[S(Ge,{"model-value":o.value[C.publicKey],"onUpdate:modelValue":ie=>Oe(C.publicKey,ie),label:C.publicLabel,disabled:Ue(C.publicKey)},null,8,["model-value","onUpdate:modelValue","label","disabled"]),o.value[C.publicKey]!==!1?(v(),Ae(Se,{key:0,"model-value":c(C.publicKey),"onUpdate:modelValue":ie=>$e(C.publicKey,ie),prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):H("",!0)])])]))),128))])])):(v(),k("div",m6,[(v(!0),k(be,null,Le(W.value,C=>(v(),k("div",{key:C.key,class:"space-y-1.5"},[S(Ge,{"model-value":o.value[C.key],"onUpdate:modelValue":ie=>Oe(C.key,ie),label:C.label,description:C.hint,disabled:Ue(C.key)},null,8,["model-value","onUpdate:modelValue","label","description","disabled"]),o.value[C.key]!==!1?(v(),Ae(Se,{key:0,"model-value":c(C.key),"onUpdate:modelValue":ie=>$e(C.key,ie),prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):H("",!0)]))),128))])),(le.value.length>0,v(),k("div",v6,[K[28]||(K[28]=f("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Input Directories",-1)),le.value.length>0?(v(),k("div",y6,[(v(!0),k(be,null,Le(le.value,C=>(v(),k("div",{key:C.key,class:"space-y-1.5"},[S(Ge,{"model-value":o.value[C.key],"onUpdate:modelValue":ie=>Oe(C.key,ie),label:C.label,disabled:Ue(C.key)},null,8,["model-value","onUpdate:modelValue","label","disabled"]),o.value[C.key]!==!1?(v(),Ae(Se,{key:0,"model-value":C.path,"onUpdate:modelValue":ie=>st(C.key,ie),prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):H("",!0)]))),128))])):H("",!0),s.disabled?H("",!0):(v(),Ae(Oi,{key:1,"model-value":G.value,"onUpdate:modelValue":K[21]||(K[21]=C=>Xe("input",C)),addLabel:"Add Input Directory",defaultItem:()=>({key:"",label:"",path:"",type:"input",_id:Date.now()})},{default:X(({item:C,update:ie})=>[f("div",b6,[S(Se,{"model-value":C.label,"onUpdate:modelValue":A=>ie("label",A),label:"Label",placeholder:"Archive"},null,8,["model-value","onUpdate:modelValue"]),S(Se,{"model-value":C.path,"onUpdate:modelValue":A=>ie("path",A),label:"Path",prefix:"/",placeholder:"inputs/archive",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])])]),_:1},8,["model-value","defaultItem"]))]))]),_:1},8,["description"])])):H("",!0),!B.value&&!U.value&&R.value.length>0?(v(),k("div",k6,[S(es,{title:"Workspaces",description:"Functions, notebooks, and scripts scaffolded into every project."},{default:X(()=>[f("div",x6,[(v(!0),k(be,null,Le(L.value,C=>(v(),k("div",{key:C.key,class:"space-y-1.5"},[S(Ge,{"model-value":o.value[C.key],"onUpdate:modelValue":ie=>Oe(C.key,ie),label:C.label,description:C.hint,disabled:Ue(C.key)},null,8,["model-value","onUpdate:modelValue","label","description","disabled"]),o.value[C.key]!==!1?(v(),k("div",w6,[S(Se,{"model-value":c(C.key),"onUpdate:modelValue":ie=>$e(C.key,ie),label:"Source files",prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"]),S(Se,{"model-value":u(C.key),"onUpdate:modelValue":ie=>Re(C.key,ie),label:"Quarto render directory",prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])])):H("",!0)]))),128)),(v(!0),k(be,null,Le(_.value,C=>(v(),k("div",{key:C.key,class:"space-y-1.5"},[S(Ge,{"model-value":o.value[C.key],"onUpdate:modelValue":ie=>Oe(C.key,ie),label:C.label,description:C.hint,disabled:Ue(C.key)},null,8,["model-value","onUpdate:modelValue","label","description","disabled"]),o.value[C.key]!==!1?(v(),Ae(Se,{key:0,"model-value":c(C.key),"onUpdate:modelValue":ie=>$e(C.key,ie),prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):H("",!0)]))),128))]),(ee.value.length>0,v(),k("div",S6,[K[29]||(K[29]=f("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Workspace Directories",-1)),ee.value.length>0?(v(),k("div",C6,[(v(!0),k(be,null,Le(ee.value,C=>(v(),k("div",{key:C.key,class:"space-y-1.5"},[S(Ge,{"model-value":o.value[C.key],"onUpdate:modelValue":ie=>Oe(C.key,ie),label:C.label,disabled:Ue(C.key)},null,8,["model-value","onUpdate:modelValue","label","disabled"]),o.value[C.key]!==!1?(v(),Ae(Se,{key:0,"model-value":C.path,"onUpdate:modelValue":ie=>st(C.key,ie),prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):H("",!0)]))),128))])):H("",!0),s.disabled?H("",!0):(v(),Ae(Oi,{key:1,"model-value":Q.value,"onUpdate:modelValue":K[22]||(K[22]=C=>Xe("workspace",C)),addLabel:"Add Workspace Directory",defaultItem:()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:X(({item:C,update:ie})=>[f("div",_6,[S(Se,{"model-value":C.label,"onUpdate:modelValue":A=>ie("label",A),label:"Label",placeholder:"Templates"},null,8,["model-value","onUpdate:modelValue"]),S(Se,{"model-value":C.path,"onUpdate:modelValue":A=>ie("path",A),label:"Path",prefix:"/",placeholder:"templates",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])])]),_:1},8,["model-value","defaultItem"]))]))]),_:1})])):H("",!0),!B.value&&!U.value&&ce.value.length>0?(v(),k("div",A6,[S(es,{title:"Outputs",description:j.value?"Review outputs before promotion; private folders remain gitignored while public copies are ready to share.":"Results, figures, models, and reports generated by your analysis."},{default:X(()=>[j.value?(v(),k("div",M6,[K[30]||(K[30]=f("div",{class:"grid gap-4 sm:grid-cols-2 text-xs font-semibold uppercase text-gray-500 dark:text-gray-400 mb-4"},[f("div",null,"Private"),f("div",null,"Public")],-1)),f("div",D6,[(v(!0),k(be,null,Le(ce.value,C=>(v(),k("div",{key:C.privateKey},[C.hint?(v(),k("p",E6,J(C.hint),1)):H("",!0),f("div",T6,[f("div",j6,[S(Ge,{"model-value":o.value[C.privateKey],"onUpdate:modelValue":ie=>Oe(C.privateKey,ie),label:C.privateLabel,disabled:Ue(C.privateKey)},null,8,["model-value","onUpdate:modelValue","label","disabled"]),o.value[C.privateKey]!==!1?(v(),Ae(Se,{key:0,"model-value":c(C.privateKey),"onUpdate:modelValue":ie=>$e(C.privateKey,ie),prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):H("",!0)]),f("div",O6,[S(Ge,{"model-value":o.value[C.publicKey],"onUpdate:modelValue":ie=>Oe(C.publicKey,ie),label:C.publicLabel,disabled:Ue(C.publicKey)},null,8,["model-value","onUpdate:modelValue","label","disabled"]),o.value[C.publicKey]!==!1?(v(),Ae(Se,{key:0,"model-value":c(C.publicKey),"onUpdate:modelValue":ie=>$e(C.publicKey,ie),prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):H("",!0)])])]))),128))])])):(v(),k("div",P6,[(v(!0),k(be,null,Le(ce.value,C=>(v(),k("div",{key:C.key,class:"space-y-1.5"},[S(Ge,{"model-value":o.value[C.key],"onUpdate:modelValue":ie=>Oe(C.key,ie),label:C.label,description:C.hint,disabled:Ue(C.key)},null,8,["model-value","onUpdate:modelValue","label","description","disabled"]),o.value[C.key]!==!1?(v(),Ae(Se,{key:0,"model-value":c(C.key),"onUpdate:modelValue":ie=>$e(C.key,ie),prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):H("",!0)]))),128))])),(V.value.length>0,v(),k("div",$6,[K[31]||(K[31]=f("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Output Directories",-1)),V.value.length>0?(v(),k("div",R6,[(v(!0),k(be,null,Le(V.value,C=>(v(),k("div",{key:C.key,class:"space-y-1.5"},[S(Ge,{"model-value":o.value[C.key],"onUpdate:modelValue":ie=>Oe(C.key,ie),label:C.label,disabled:Ue(C.key)},null,8,["model-value","onUpdate:modelValue","label","disabled"]),o.value[C.key]!==!1?(v(),Ae(Se,{key:0,"model-value":C.path,"onUpdate:modelValue":ie=>st(C.key,ie),prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):H("",!0)]))),128))])):H("",!0),s.disabled?H("",!0):(v(),Ae(Oi,{key:1,"model-value":ae.value,"onUpdate:modelValue":K[23]||(K[23]=C=>Xe("output",C)),addLabel:"Add Output Directory",defaultItem:()=>({key:"",label:"",path:"",type:"output",_id:Date.now()})},{default:X(({item:C,update:ie})=>[f("div",L6,[S(Se,{"model-value":C.label,"onUpdate:modelValue":A=>ie("label",A),label:"Label",placeholder:"Archive"},null,8,["model-value","onUpdate:modelValue"]),S(Se,{"model-value":C.path,"onUpdate:modelValue":A=>ie("path",A),label:"Path",prefix:"/",placeholder:"outputs/archive",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])])]),_:1},8,["model-value","defaultItem"]))]))]),_:1},8,["description"])])):H("",!0),!B.value&&!U.value&&ne.value.length>0?(v(),k("div",V6,[S(es,{title:"Utility",description:"Scratch space and other temporary directories (gitignored by default). Cache is always created on first use."},{default:X(()=>[f("div",B6,[(v(!0),k(be,null,Le(ne.value,C=>(v(),k("div",{key:C.key,class:"space-y-1.5"},[S(Ge,{"model-value":o.value[C.key],"onUpdate:modelValue":ie=>Oe(C.key,ie),label:C.label,description:C.hint,disabled:Ue(C.key)},null,8,["model-value","onUpdate:modelValue","label","description","disabled"]),o.value[C.key]!==!1?(v(),Ae(Se,{key:0,"model-value":c(C.key),"onUpdate:modelValue":ie=>$e(C.key,ie),prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):H("",!0)]))),128))])]),_:1})])):H("",!0),f("div",I6,[S(es,{title:".gitignore Patterns",description:"Define which files and directories Git should ignore."},{default:X(()=>[S(Pd,null,{default:X(()=>[S(xu,{"model-value":a.value,"onUpdate:modelValue":K[24]||(K[24]=C=>Z.$emit("update:gitignore",C)),language:"gitignore","min-height":"500px",disabled:s.disabled,placeholder:`# Framework gitignore patterns
cache/
scratch/
*.log`},null,8,["model-value","disabled"])]),_:1})]),_:1})])]))}},N6=["onClick","aria-current"],F6={class:"mt-4"},z6={__name:"Tabs",props:{modelValue:{type:[String,Number],required:!0},tabs:{type:Array,required:!0,validator:s=>s.every(e=>e.id&&e.label)},variant:{type:String,default:"pills",validator:s=>["pills","underline"].includes(s)},size:{type:String,default:"md",validator:s=>["sm","md","lg"].includes(s)}},emits:["update:modelValue","change"],setup(s,{emit:e}){const t=s,n=e,i=F(()=>t.variant==="underline"?"border-b border-gray-200 dark:border-white/10":""),r=F(()=>{const a=["flex","gap-2"];return t.variant==="underline"?a.push("-mb-px"):a.push("p-1","bg-gray-100","dark:bg-white/5","rounded-lg"),a.join(" ")}),o=a=>{const c=t.modelValue===a,u=["inline-flex","items-center","gap-2","font-medium","transition-colors"],d={sm:"px-2.5 py-1.5 text-xs",md:"px-3 py-2 text-sm",lg:"px-4 py-2.5 text-base"};return u.push(d[t.size]),t.variant==="pills"?(u.push("rounded-md"),c?u.push("bg-white","text-gray-900","shadow-xs","dark:bg-white/10","dark:text-white"):u.push("text-gray-600","hover:text-gray-900","dark:text-gray-400","dark:hover:text-white")):(u.push("border-b-2","pb-3"),c?u.push("border-sky-600","text-sky-600","dark:border-sky-500","dark:text-sky-400"):u.push("border-transparent","text-gray-600","hover:border-gray-300","hover:text-gray-900","dark:text-gray-400","dark:hover:border-gray-600","dark:hover:text-white")),u.join(" ")},l=a=>{n("update:modelValue",a),n("change",a)};return(a,c)=>(v(),k("div",null,[f("div",{class:xe(i.value)},[f("nav",{class:xe(r.value),"aria-label":"Tabs"},[(v(!0),k(be,null,Le(s.tabs,u=>(v(),k("button",{key:u.id,type:"button",onClick:d=>l(u.id),class:xe(o(u.id)),"aria-current":s.modelValue===u.id?"page":void 0},[u.icon?(v(),Ae(Ms(u.icon),{key:0,class:"size-5"})):H("",!0),de(" "+J(u.label)+" ",1),u.badge?(v(),Ae(au,{key:1,variant:s.modelValue===u.id?"emerald":"gray",pill:""},{default:X(()=>[de(J(u.badge),1)]),_:2},1032,["variant"])):H("",!0)],10,N6))),128))],2)],2),f("div",F6,[dt(a.$slots,"default")])]))}},U6={key:0,class:"mb-4"},H6={key:1,class:"mb-4"},q6={key:2,class:"space-y-6"},W6={key:0,class:"rounded-lg bg-gray-50 p-8 text-center dark:bg-gray-800/40"},K6={key:1,class:"space-y-5"},G6={class:"mb-4"},J6={class:"text-sm font-semibold text-gray-900 dark:text-white"},Q6={class:"text-xs text-gray-500 dark:text-gray-400"},Y6={class:"space-y-3"},X6={class:"flex items-start gap-3"},Z6={class:"grid flex-1 grid-cols-2 gap-3"},ej=["value","onInput","disabled"],tj={class:"relative"},sj=["onUpdate:modelValue","type","placeholder","disabled"],nj=["onClick"],ij=["onClick"],rj={key:0,class:"mt-4"},oj={key:2,class:"rounded-lg border border-gray-200 bg-gray-50 p-4 text-sm dark:border-gray-700 dark:bg-gray-800/60"},lj={key:3,class:"space-y-3"},aj=["disabled"],uj={key:4,class:"mt-4 flex justify-end"},Yf={__name:"EnvEditor",props:{loading:{type:Boolean,default:!1},error:{type:String,default:""},showSecurityAlert:{type:Boolean,default:!0},allowAdd:{type:Boolean,default:!0},allowRemove:{type:Boolean,default:!0},allowShowValuesToggle:{type:Boolean,default:!0},allowRegroupOption:{type:Boolean,default:!0},showSaveButton:{type:Boolean,default:!0},saveLabel:{type:String,default:"Save .env"},groups:{type:Object,default:()=>({})},variables:{type:Object,default:()=>({})},rawContent:{type:String,default:""},viewMode:{type:String,default:"grouped"},regroupOnSave:{type:Boolean,default:!1}},emits:["update:variables","update:rawContent","update:viewMode","update:regroupOnSave","save"],setup(s,{emit:e}){const t=s,n=e,i=R=>JSON.parse(JSON.stringify(R||{})),r=Y(i(t.variables)),o=Y(t.rawContent||""),l=Y(t.viewMode||"grouped"),a=Y(!!t.regroupOnSave),c=Y(!1),u=Y({});let d=!1,h=!1;Pe(()=>t.variables,R=>{d=!0,r.value=i(R),Bs(()=>{d=!1})},{deep:!0}),Pe(()=>t.rawContent,R=>{h=!0,o.value=R||"",Bs(()=>{h=!1})},{immediate:!0}),Pe(()=>t.viewMode,R=>{l.value=R||"grouped"}),Pe(()=>t.regroupOnSave,R=>{a.value=!!R}),Pe(r,R=>{d||(n("update:variables",i(R)),l.value!=="raw"&&(o.value=x(o.value,R,a.value),n("update:rawContent",o.value)))},{deep:!0}),Pe(o,R=>{if(!h&&l.value==="raw"){n("update:rawContent",R);const W=p(R);r.value=W,n("update:variables",i(W))}}),Pe(l,(R,W)=>{n("update:viewMode",R),R==="raw"&&W!=="raw"&&(Object.keys(r.value).length>0?o.value=x(o.value,r.value,a.value):!o.value&&t.rawContent&&(o.value=t.rawContent))}),Pe(a,R=>{n("update:regroupOnSave",R)});const p=R=>{const W=(R||"").split(/\r?\n/),ce={};return W.forEach(ne=>{const N=ne.trim();if(!N||N.startsWith("#")||!N.includes("="))return;const[le,...ee]=N.split("=");ce[le.trim()]=ee.join("=").replace(/^"|"$/g,"")}),ce},y=R=>{const W=Object.entries(R||{});return W.length?W.reduce((ce,[ne,N])=>{const le=ne.includes("_")?ne.split("_")[0]:"Other";return ce[le]||(ce[le]={}),ce[le][ne]={defined:!!N,used:!1,used_in:[],value:N},ce},{}):{}},b=F(()=>{const R=t.groups||{};return Object.keys(R).length?R:y(r.value)}),x=(R,W,ce=!1)=>{if(ce){const V={};for(const[ae,me]of Object.entries(W)){const $e=ae.includes("_")?ae.split("_")[0]:"Other";V[$e]||(V[$e]=[]),V[$e].push([ae,me])}const G=[],Q=Object.keys(V).sort();for(let ae=0;ae<Q.length;ae++){const me=Q[ae],$e=V[me];ae>0&&(G.push(""),G.push("")),G.push(`# ${me==="Other"?"Other variables":me.toUpperCase()}`);for(const[Re,Oe]of $e)G.push(`${Re}=${Oe??""}`)}return G.join(`
`)}const ne=(R||"").split(/\r?\n/),N=new Set,le=[];for(const V of ne){const G=V.trim();if(!G||G.startsWith("#")||!G.includes("=")){le.push(V);continue}const[Q,...ae]=G.split("="),me=Q.trim(),$e=ae.join("=").trim();if(me in W){const Re=W[me]??"";le.push(`${me}=${Re}`),N.add(me)}else(Object.keys(W).length===0||$e==="")&&le.push(V)}const ee=Object.entries(W).filter(([V])=>!N.has(V));if(ee.length>0){const V={};for(const[G,Q]of ee){const ae=G.includes("_")?G.split("_")[0]:"Other";V[ae]||(V[ae]=[]),V[ae].push([G,Q])}for(const[G,Q]of Object.entries(V)){le.length>0&&le[le.length-1]!==""&&(le.push(""),le.push("")),le.push(`# ${G==="Other"?"Other variables":G.toUpperCase()}`);for(const[ae,me]of Q)le.push(`${ae}=${me??""}`)}}return le.join(`
`)},g=()=>{if(!t.allowAdd)return;const R="NEW_VARIABLE";let W=1,ce=`${R}_${W}`;for(;r.value[ce];)W+=1,ce=`${R}_${W}`;r.value={...r.value,[ce]:""}},j=R=>{if(!t.allowRemove)return;const W=i(r.value);delete W[R],r.value=W},B=(R,W)=>{if(!W||R===W)return;const ce=W.replace(/[^A-Z0-9_]/gi,"").toUpperCase();if(!ce)return;const ne=i(r.value);ne[ce]||(ne[ce]=ne[R],delete ne[R],r.value=ne)},U=R=>{const W=["PASSWORD","SECRET","KEY","TOKEN"],ce=R.toUpperCase();return W.some(ne=>ce.includes(ne))},I=R=>c.value||u.value[R]||!U(R),L=R=>{u.value[R]=!u.value[R]},_=()=>{c.value=!c.value};return(R,W)=>(v(),k("div",null,[s.error?(v(),k("div",U6,[S(js,{type:"error",title:"Error",description:s.error},null,8,["description"])])):H("",!0),s.showSecurityAlert?(v(),k("div",H6,[S(js,{type:"warning",title:" Contains Sensitive Data"},{actions:X(()=>[s.viewMode==="grouped"&&s.allowShowValuesToggle?(v(),Ae(Je,{key:0,variant:"soft",size:"sm",onClick:_},{default:X(()=>[de(J(c.value?"Hide Values":"Show Values"),1)]),_:1})):H("",!0)]),default:X(()=>[W[4]||(W[4]=de(" This file can include passwords and secrets. Keep it out of version control. ",-1))]),_:1})])):H("",!0),S(z6,{modelValue:l.value,"onUpdate:modelValue":W[0]||(W[0]=ce=>l.value=ce),tabs:[{id:"grouped",label:"Key/Value Editor"},{id:"raw",label:"Raw .env"}],variant:"pills",class:"mb-4"},null,8,["modelValue"]),l.value==="grouped"?(v(),k("div",q6,[Object.keys(b.value).length===0?(v(),k("div",W6,[S(ct(ou),{class:"mx-auto mb-3 h-10 w-10 text-gray-400"}),W[6]||(W[6]=f("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"No environment variables yet.",-1)),s.allowAdd?(v(),Ae(Je,{key:0,variant:"primary",class:"mt-4",onClick:g},{default:X(()=>[...W[5]||(W[5]=[de(" Add Variable ",-1)])]),_:1})):H("",!0)])):(v(),k("div",K6,[(v(!0),k(be,null,Le(b.value,(ce,ne)=>(v(),k("div",{key:ne,class:"rounded-lg bg-gray-50 p-5 dark:bg-gray-800/40"},[f("div",G6,[f("p",J6,J(ne==="Other"?"Uncategorized":ne.toUpperCase()),1),f("p",Q6,"Variables with the "+J(ne)+" prefix.",1)]),f("div",Y6,[(v(!0),k(be,null,Le(ce,(N,le)=>(v(),k("div",{key:le,class:"space-y-2"},[f("div",X6,[f("div",Z6,[f("input",{value:le,onInput:ee=>B(le,ee.target.value),type:"text",class:"w-full rounded-md border border-gray-300 bg-white px-3 py-2 font-mono text-sm uppercase text-gray-900 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-100",disabled:s.loading},null,40,ej),f("div",tj,[qe(f("input",{"onUpdate:modelValue":ee=>r.value[le]=ee,type:I(le)?"text":"password",placeholder:N.defined?"value":"(not set)",class:"w-full rounded-md border border-gray-300 bg-white px-3 py-2 font-mono text-sm text-gray-900 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-100",disabled:s.loading},null,8,sj),[[Nx,r.value[le]]]),U(le)&&s.allowShowValuesToggle?(v(),k("button",{key:0,type:"button",class:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300",onClick:ee=>L(le)},[I(le)?(v(),Ae(ct(u2),{key:0,class:"h-4 w-4"})):(v(),Ae(ct(c2),{key:1,class:"h-4 w-4"}))],8,nj)):H("",!0)])]),s.allowRemove?(v(),k("button",{key:0,type:"button",class:"mt-2 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300",onClick:ee=>j(le)},[...W[7]||(W[7]=[f("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,ij)):H("",!0)])]))),128))]),s.allowAdd?(v(),k("div",rj,[S(Je,{variant:"secondary",size:"sm",onClick:g},{default:X(()=>[...W[8]||(W[8]=[de(" + Add Variable ",-1)])]),_:1})])):H("",!0)]))),128))])),s.allowRegroupOption?(v(),k("div",oj,[S(Ge,{modelValue:a.value,"onUpdate:modelValue":W[1]||(W[1]=ce=>a.value=ce),label:"Regroup .env file by prefix when saving",description:"Rewrites the file grouped by prefix and strips comments."},null,8,["modelValue"])])):H("",!0)])):(v(),k("div",lj,[qe(f("textarea",{"onUpdate:modelValue":W[2]||(W[2]=ce=>o.value=ce),class:"h-80 w-full rounded-md border border-gray-300 bg-white px-3 py-2 font-mono text-sm text-gray-900 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-100",disabled:s.loading},null,8,aj),[[Ii,o.value]]),W[9]||(W[9]=f("p",{class:"text-xs text-gray-500"},"Edit the .env file directly. Comments and formatting are preserved.",-1))])),s.showSaveButton?(v(),k("div",uj,[S(Je,{disabled:s.loading,variant:"primary",onClick:W[3]||(W[3]=ce=>R.$emit("save"))},{default:X(()=>[de(J(s.saveLabel),1)]),_:1},8,["disabled"])])):H("",!0)]))}},Xf=({useGit:s,gitHooks:e,git:t}={})=>{const n=e||t?.hooks||{};return{initialize:s!==!1&&t?.initialize!==!1,user_name:t?.user_name||"",user_email:t?.user_email||"",hooks:{ai_sync:n.ai_sync||!1,data_security:n.data_security||!1,check_sensitive_dirs:n.check_sensitive_dirs||!1}}},Zf=({gitTarget:s,gitHooksTarget:e,setUseGit:t}={},n={})=>{typeof t=="function"&&t(n.initialize),s&&(s.initialize=n.initialize,s.user_name=n.user_name,s.user_email=n.user_email,s.hooks={ai_sync:n.hooks?.ai_sync||!1,data_security:n.hooks?.data_security||!1,check_sensitive_dirs:n.hooks?.check_sensitive_dirs||!1}),e&&(e.ai_sync=n.hooks?.ai_sync||!1,e.data_security=n.hooks?.data_security||!1,e.check_sensitive_dirs=n.hooks?.check_sensitive_dirs||!1)},cj=(s={},e={},t={},n={})=>{const i=l=>typeof l=="string"?l:l&&typeof l=="object"&&l.default||"",r={},o={};return Object.entries(s).forEach(([l,a])=>{const c=i(a),u=n[l]||"";r[l]=e[l]||c||u,t[l]!==void 0?o[l]=t[l]:a&&typeof a=="object"&&a.enabled_by_default!==void 0?o[l]=a.enabled_by_default===!0:o[l]=!0}),{directories:r,directories_enabled:o}},dj=(s={},e={},t={})=>{const n=r=>typeof r=="string"?r:r&&typeof r=="object"&&r.default||"",i={};return Object.entries(s).forEach(([r,o])=>{const l=n(o),a=t[r]||"";i[r]=e[r]||l||a}),i},fj=(s=[],e={})=>(s||[]).filter(t=>!(!t.key||!t.label||!t.path||!t.type||e&&e[t.key]===!1)),Ub=(s={},e=[],t={})=>{const n=new Set;Object.keys(s||{}).forEach(r=>n.add(r)),(e||[]).forEach(r=>{r.key&&n.add(r.key)});const i={};return Object.keys(t||{}).forEach(r=>{n.has(r)&&(i[r]=t[r])}),i},Hb=(s={},e={},t={},n={})=>{const{directories:i,directories_enabled:r}=cj(s.directories||{},e.directories||{},e.directories_enabled||{},t),o=dj(s.render_dirs||{},e.render_dirs||{},n),l=e.extra_directories||[],a={...r,...e.directories_enabled||{}};return{directories:i,directories_enabled:r,render_dirs:o,extra_directories:l,enabled:a}},hj=(s={},e={})=>{const t=s.directories||{},n=s.render_dirs||{},i=s.extra_directories||[],r=Ub(e,i,s.enabled||{});return{directories:t,render_dirs:n,extra_directories:i,enabled:r}},qb=({catalogDirs:s={},directories:e={},render_dirs:t={},enabled:n={},extra_directories:i=[]})=>{const r=Ub(s,i,n),o=fj(i,r);return{directories:e,render_dirs:t,enabled:r,extra_directories:o}},tl=(s={})=>({name:s.name||"",source:s.source||"cran",auto_attach:s.auto_attach!==!1}),cr=s=>s?s.default_packages?{use_renv:!!s.use_renv,default_packages:(s.default_packages||[]).map(tl)}:Array.isArray(s)?{use_renv:!1,default_packages:s.map(tl)}:{use_renv:!!s.use_renv,default_packages:[]}:{use_renv:!1,default_packages:[]},pj=(s={})=>{const e=!!s.use_renv,t=(s.default_packages||[]).filter(n=>n?.name&&n.name.trim()!=="").map(tl);return{use_renv:e,default_packages:t}},gj=s=>({use_renv:!!s?.use_renv,default_packages:(s?.packages||[]).map(tl)}),Wb=(s={})=>{const e=!!s.use_renv,t=(s.default_packages||[]).filter(n=>n?.name&&n.name.trim()!=="").map(tl);return{use_renv:e,default_packages:t}},mj=([s])=>s!=="framework_db",eh=(s={})=>{const e=s.databases||{},t=s.storage_buckets||{},n=Object.entries(e).filter(mj).map(([l,a])=>({_id:l,name:l,...a})),i=Object.entries(t).map(([l,a])=>({_id:l,name:l,...a})),r=s.default_database,o=s.default_storage_bucket;return{databaseConnections:n,s3Connections:i,defaultDatabase:typeof r=="string"&&r?r:null,defaultStorageBucket:typeof o=="string"&&o?o:null}},th=({databaseConnections:s=[],s3Connections:e=[],defaultDatabase:t=null,defaultStorageBucket:n=null})=>{const i={};s.forEach(o=>{const{_id:l,name:a,...c}=o||{};a&&(i[a]=c)});const r={};return e.forEach(o=>{const{_id:l,name:a,...c}=o||{};a&&(r[a]=c)}),{default_database:t,default_storage_bucket:n,databases:i,storage_buckets:r}},vj={class:"flex min-h-screen"},yj={class:"w-64 shrink-0 border-r border-gray-200 p-6 dark:border-gray-800"},bj={class:"space-y-1 mb-6"},kj=["onClick"],xj=["fill","viewBox","stroke"],wj=["stroke-linecap","stroke-linejoin","stroke-width","fill","d"],Sj={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},Cj={class:"flex-1 p-10"},_j={class:"mt-8 space-y-6"},Aj={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},Mj={class:"space-y-5"},Dj={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},Ej={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 space-y-6"},Tj={class:"space-y-6"},jj={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},Oj={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},Pj={__name:"NewProjectView",setup(s){const e=rl(),t=Br(),n=lu(),i=zs("loadProjects"),r=Y(null),o=Y(null),l=Y(!0),a=D=>D?Array.isArray(D)?Array.from(new Set(D.map(T=>String(T)))):typeof D=="string"?[D]:[]:[],c=()=>{Array.isArray(g.value.ai.assistants)||(g.value.ai.assistants=a(g.value.ai.assistants))},u=()=>({html:{format:"html",embed_resources:!0,theme:"default",toc:!0,toc_depth:3,code_fold:!1,code_tools:!1,highlight_style:"github"},revealjs:{format:"revealjs",theme:"default",incremental:!1,slide_number:!0,transition:"slide",background_transition:"fade",controls:!0,progress:!0,center:!0,highlight_style:"github"},render_dir:null}),d=[{id:"overview",label:"Overview",icon:ru},{id:"basics",label:"Basics",icon:tf},{id:"structure",label:"Project Structure",icon:Ca},{id:"quarto",label:"Quarto",icon:yr},{id:"packages",label:"Packages",icon:sf},{id:"ai",label:"AI Assistants",svgIcon:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"},{id:"git",label:"Git & Hooks",svgIcon:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"},{id:"connections",label:"Connections",icon:nf},{id:"env",label:".env Defaults",icon:ou},{id:"scaffold",label:"Scaffold Behavior",svgIcon:"M256 64L576 64L576 576L64 576L64 192L256 192L256 64zM256 224L96 224L96 544L256 544L256 224zM288 544L544 544L544 96L288 96L288 544zM440 152L488 152L488 200L440 200L440 152zM392 152L392 200L344 200L344 152L392 152zM440 248L488 248L488 296L440 296L440 248zM392 248L392 296L344 296L344 248L392 248zM152 280L200 280L200 328L152 328L152 280zM392 344L392 392L344 392L344 344L392 344zM152 376L200 376L200 424L152 424L152 376zM488 344L488 392L440 392L440 344L488 344z",svgViewBox:"0 0 640 640",svgFill:"currentColor",svgStroke:"none",svgStrokeWidth:0,svgPathFill:"currentColor"}],h=Y("basics"),p=Y(!1),y=Y(null),b=Y(!0),x=Y(new Set),g=Y({name:"",location:"",type:"project",author:{name:"",email:"",affiliation:""},scaffold:{seed_on_scaffold:!1,seed:"",set_theme_on_scaffold:!0,ggplot_theme:"theme_minimal",source_all_functions:!0,notebook_format:"quarto",ide:"vscode",positron:!1},packages:{...cr()},quarto:u(),ai:{enabled:!0,assistants:[],canonical_file:"CLAUDE.md",canonical_content:""},git:{initialize:!0,gitignore_template:"gitignore-project",gitignore_content:"",user_name:"",user_email:"",hooks:{ai_sync:!1,data_security:!1,check_sensitive_dirs:!1}},connections:{databaseConnections:[],s3Connections:[],defaultDatabase:null,defaultStorageBucket:null},env:{variables:{},rawContent:`# Framework environment defaults
# Populate these values before running scaffold() or publishing.

# PostgreSQL connection
POSTGRES_HOST=127.0.0.1
POSTGRES_PORT=5432
POSTGRES_DB=postgres
POSTGRES_SCHEMA=public
POSTGRES_USER=postgres
POSTGRES_PASSWORD=

# S3-compatible storage (AWS S3, MinIO, etc.)
S3_BUCKET=
S3_ACCESS_KEY=
S3_SECRET_KEY=
S3_REGION=us-east-1
S3_ENDPOINT=
S3_SESSION_TOKEN=`,viewMode:"grouped",regroupOnSave:!1,groups:{}},directories_enabled:{},directories:{},render_dirs:{},extra_directories:[],extra_directories_enabled:{}}),j=()=>{const D=t.query.section;D&&["overview","author","scaffold","structure","quarto","connections","env","packages","ai","git"].includes(D)&&(h.value=D)};Pe(()=>t.query.section,D=>{D&&["overview","author","scaffold","structure","quarto","connections","env","packages","ai","git"].includes(D)?h.value=D:D||(h.value="overview")}),Pe(h,D=>{t.query.section!==D&&e.replace({query:{...t.query,section:D}})}),as(async()=>{console.log("[DEBUG] NewProjectView mounted - starting initialization"),j();try{console.log("[DEBUG] Fetching global settings from /api/settings");const D=await fetch("/api/settings");if(console.log("[DEBUG] Settings response status:",D.status,D.ok),D.ok&&(r.value=await D.json(),r.value)){r.value.global?.projects_root&&(g.value.location=r.value.global.projects_root),g.value.author={...r.value.author},r.value.defaults?.project_type&&(g.value.type=r.value.defaults.project_type),r.value.defaults?.scaffold&&(g.value.scaffold={...g.value.scaffold,...r.value.defaults.scaffold}),r.value.defaults?.notebook_format&&(g.value.scaffold.notebook_format=r.value.defaults.notebook_format),g.value.scaffold.notebook_format||(g.value.scaffold.notebook_format="quarto"),r.value.defaults?.positron!==void 0&&(g.value.scaffold.positron=r.value.defaults.positron),(r.value.defaults?.default_packages||r.value.defaults?.packages)&&(g.value.packages=cr({use_renv:r.value.defaults.use_renv,default_packages:r.value.defaults.default_packages||r.value.defaults.packages}));const P=a(r.value.defaults?.ai_assistants);if(g.value.ai={enabled:r.value.defaults?.ai_support!==!1,assistants:P.length>0?P:["claude"],canonical_file:r.value.defaults?.ai_canonical_file||"CLAUDE.md",canonical_content:""},c(),g.value.ai.enabled&&g.value.ai.canonical_file&&ae(g.value.ai.canonical_file,g.value.type),g.value.git.initialize=r.value.defaults?.use_git!==!1,g.value.git.user_name=r.value.git?.user_name||"",g.value.git.user_email=r.value.git?.user_email||"",r.value.defaults?.git_hooks&&(g.value.git.hooks={...r.value.defaults.git_hooks}),r.value.defaults?.connections){const we=eh(r.value.defaults.connections);g.value.connections.databaseConnections=we.databaseConnections,g.value.connections.s3Connections=we.s3Connections,g.value.connections.defaultDatabase=we.defaultDatabase,g.value.connections.defaultStorageBucket=we.defaultStorageBucket}if(r.value.defaults?.env){const we=r.value.defaults.env;typeof we=="string"?g.value.env.rawContent=we:we?.raw&&(g.value.env.rawContent=we.raw),g.value.env.variables=I(g.value.env.rawContent),g.value.env.groups=L(g.value.env.variables)}const ue=u();r.value.defaults?.quarto&&(ue.html={...ue.html,...r.value.defaults.quarto.html||{}},ue.revealjs={...ue.revealjs,...r.value.defaults.quarto.revealjs||{}},r.value.defaults.quarto.render_dir&&(ue.render_dir=r.value.defaults.quarto.render_dir)),g.value.quarto=ue;const ge={project:"gitignore-project",project_sensitive:"gitignore-project_sensitive",course:"gitignore-course",presentation:"gitignore-presentation"};g.value.git.gitignore_template=ge[g.value.type]||"gitignore-project",g.value.git.gitignore_template&&Q(g.value.git.gitignore_template)}const T=await fetch("/api/settings-catalog");T.ok&&(o.value=await T.json()),B(),_()}catch(D){console.error("[DEBUG] Failed to load settings:",D),console.error("[DEBUG] Error details:",D.message,D.stack),n.error("Load Error","Could not load default settings")}finally{console.log("[DEBUG] Initialization complete, loading =",l.value),l.value=!1,setTimeout(()=>{if(y.value&&y.value.$el){const D=y.value.$el.querySelector("input");D&&D.focus()}},100)}}),Pe(()=>g.value.type,D=>{B();const T={project:"gitignore-project",project_sensitive:"gitignore-project_sensitive",course:"gitignore-course",presentation:"gitignore-presentation"};g.value.git.gitignore_template=T[D]||"gitignore-project"}),Pe(()=>g.value.git.gitignore_template,D=>{D&&Q(D)}),Pe(()=>g.value.name,()=>{r.value?.global?.projects_root&&te()}),Pe(()=>g.value.ai.enabled,D=>{D&&g.value.ai.canonical_file&&ae(g.value.ai.canonical_file,g.value.type)}),Pe(()=>g.value.ai.canonical_file,D=>{D&&g.value.ai.enabled&&ae(D,g.value.type)}),Pe(()=>g.value.type,D=>{g.value.ai.canonical_file==="CLAUDE.md"&&g.value.ai.enabled&&ae("CLAUDE.md",D)});const B=()=>{if(!o.value?.project_types)return;const D=o.value.project_types[g.value.type];if(!D?.directories)return;const T=r.value?.project_types?.[g.value.type];if(!g.value.git.gitignore_template||g.value.git.gitignore_template==="gitignore-project"){const ge={project:"gitignore-project",project_sensitive:"gitignore-sensitive",course:"gitignore-course",presentation:"gitignore-presentation"};g.value.git.gitignore_template=ge[g.value.type]||"gitignore-project"}Q(g.value.git.gitignore_template);const P=Hb(D,T||{},{},{});g.value.directories=P.directories,g.value.directories_enabled=P.directories_enabled,g.value.render_dirs=P.render_dirs,g.value.extra_directories=P.extra_directories||[],g.value.extra_directories_enabled=T?.extra_directories_enabled||{};const ue=D?.quarto?.render_dir;ue&&(g.value.quarto.render_dir=typeof ue=="object"&&ue.default||ue),console.log("[DEBUG] loadProjectTypeDefaults() finished - packages still:",g.value.packages.default_packages)},U=D=>o.value?.project_types?.[D]?.label||D,I=(D="")=>{const T={};return D.split(/\r?\n/).forEach(P=>{const ue=P.trim();if(!ue||ue.startsWith("#")||!ue.includes("="))return;const[ge,...we]=ue.split("=");T[ge.trim()]=we.join("=").replace(/^"|"$/g,"")}),T},L=(D={})=>{const T=Object.entries(D);return T.length?T.reduce((P,[ue,ge])=>{const we=ue.includes("_")?ue.split("_")[0]:"Other";return P[we]||(P[we]={}),P[we][ue]={defined:!!ge,used:!1,used_in:[],value:ge},P},{}):{}};Pe(()=>g.value.env.variables,D=>{g.value.env.groups=L(D||{})},{deep:!0});const _=()=>{g.value.env.rawContent&&(g.value.env.variables=I(g.value.env.rawContent),g.value.env.groups=L(g.value.env.variables))},R=F(()=>({overview:"Overview",basics:"Basics",author:"Author & Metadata",scaffold:"Scaffold Behavior",structure:"Project Structure",quarto:"Quarto",connections:"Connections",env:".env Defaults",packages:"Packages & Dependencies",ai:"AI Assistants",git:"Git & Hooks",review:"Review & Create"})[h.value]||"New Project"),W=F(()=>({overview:"Quick overview of your project settings. We used your Framework Project Defaults as a starting point.",basics:"Essential project settings including name, location, type, and editor support.",author:"Configure author information embedded in project templates.",scaffold:"Runtime settings that control what happens when scaffold() runs.",structure:"Customize which directories to create for this project type.",quarto:"Adjust Quarto rendering defaults for notebooks, docs, and slides.",connections:"Database and storage connections for this project.",env:"Environment variables template for this project.",packages:"Configure package management and default packages.",ai:"Configure AI assistant integration for this project.",git:"Configure version control and git hooks.",review:"Review your project configuration and create the project."})[h.value]||"");F(()=>({vscode:"Positron / VS Code",rstudio:"RStudio","rstudio,vscode":"Both",none:"Other"})[g.value.scaffold.ide]||g.value.scaffold.ide),F(()=>{const D=[];return g.value.git.hooks.ai_sync&&D.push("Sync AI files"),g.value.git.hooks.data_security&&D.push("Check for secrets"),g.value.git.hooks.check_sensitive_dirs&&D.push("Warn about sensitive dirs"),D});const ce=F(()=>{const D=g.value.connections.databaseConnections.length,T=g.value.connections.s3Connections.length;return{databases:D,buckets:T}}),ne=F(()=>{const D=g.value.env?.variables||{};return Object.keys(D).length});Pe(()=>g.value.connections.databaseConnections,D=>{const T=g.value.connections.defaultDatabase,P=D.some(ue=>ue.name===T);if(D.length===1){const ue=D[0];ue?.name&&ue.name!=="framework_db"&&(g.value.connections.defaultDatabase=ue.name)}else T&&!P&&(g.value.connections.defaultDatabase=null)},{deep:!0}),Pe(()=>g.value.connections.s3Connections,D=>{const T=g.value.connections.defaultStorageBucket,P=D.some(ue=>ue.name===T);if(D.length===1){const ue=D[0];ue?.name&&(g.value.connections.defaultStorageBucket=ue.name)}else T&&!P&&(g.value.connections.defaultStorageBucket=null)},{deep:!0});const N=F(()=>{const D=g.value.name||"Untitled Project",T=g.value.author?.name||"",P=ee.value,ue=U(g.value.type),ge=Re("workspace"),we=Re("input"),Ee=Re("output"),Ie=g.value.packages?.default_packages?.length||0,Ye=g.value.packages?.use_renv||!1,pe=ne.value,gt=g.value.ai?.enabled||!1,Mt=g.value.ai?.assistants?.[0]?g.value.ai.assistants.map(wt=>wt.charAt(0).toUpperCase()+wt.slice(1)).join(", "):"",Ot=g.value.ai?.canonical_file||"",Ze=g.value.git?.initialize||!1,Xt=ce.value.databases,Bt=ce.value.buckets,mt=Xt>0||Bt>0?`${Xt} database${Xt!==1?"s":""}${Bt>0?`  ${Bt} bucket${Bt!==1?"s":""}`:""}`:"framework_db only";return[{id:"basics",title:"Basics",section:"basics",content:`<div>${D}  ${T}  ${ue}</div><div class="text-sm text-gray-600 dark:text-gray-400 mt-1">${P}</div>`},{id:"structure",title:"Project Structure",section:"structure",content:`${ue}  ${ge} workspace  ${we} input  ${Ee} output`},{id:"packages",title:"Packages",section:"packages",content:Ie>0?`${Ie} packages  renv ${Ye?"enabled":"disabled"}`:`renv: ${Ye?"enabled":"disabled"}`},{id:"env",title:".env Defaults",section:"env",content:pe>0?`${pe} variable${pe===1?"":"s"}`:"No variables defined"},{id:"ai",title:"AI Assistants",section:"ai",content:gt?`<span class="text-green-600 dark:text-green-400">${Mt}  ${Ot}</span>`:'<span class="text-gray-600 dark:text-gray-400">Disabled</span>'},{id:"git",title:"Git & Hooks",section:"git",content:`Git: ${Ze?"enabled":"disabled"}`},{id:"connections",title:"Connections",section:"connections",content:mt},{id:"scaffold",title:"Scaffold Behavior",section:"scaffold",content:`${g.value.scaffold?.source_all_functions?"Functions loaded from functions/":"Does not load functions"}  ${g.value.scaffold?.set_theme_on_scaffold?`ggplot2: ${(g.value.scaffold.ggplot_theme||"theme_minimal").replace("theme_","")}`:"No ggplot theme"}  ${g.value.scaffold?.set_seed?`Seed: ${g.value.scaffold.seed}`:"No random seed"}`}]}),le=F({get(){return Xf({useGit:g.value.git.initialize,gitHooks:g.value.git.hooks,git:g.value.git})},set(D){Zf({gitTarget:g.value.git,setUseGit:T=>{g.value.git.initialize=T}},D)}}),ee=F(()=>{const D=g.value.location,T=r.value?.global?.projects_root;return!D||D===T?"(not set)":D}),V=D=>{g.value.location=D;const T=r.value?.global?.projects_root||"",P=typeof D=="string"?D.trim():"";!P||T&&P===T?(b.value=!0,te()):b.value=!1},G=D=>D?D.startsWith("http")?D:new URL(D,globalThis.location?.origin||"http://localhost").toString():"",Q=async D=>{try{const T=await fetch(G(`/api/templates/${D}`));if(T.ok){const P=await T.json();P.success&&P.contents&&(g.value.git.gitignore_content=P.contents)}}catch(T){console.error("Failed to load gitignore template:",T)}},ae=async(D,T)=>{try{let P;if(D==="CLAUDE.md")switch(T){case"project_sensitive":P="ai_claude_sensitive";break;case"course":P="ai_claude_course";break;case"presentation":P="ai_claude_presentation";break;default:P="ai_claude_project"}else D==="AGENTS.md"?P="ai_agents":D===".github/copilot-instructions.md"&&(P="ai_copilot");const ue=await fetch(G(`/api/templates/${P}`));if(ue.ok){const ge=await ue.json();ge.success&&ge.contents&&(g.value.ai.canonical_content=ge.contents)}}catch(P){console.error("Failed to load AI template:",P)}};F(()=>o.value?.project_types?o.value.project_types[g.value.type]?.directories||{}:{}),F(()=>{if(!o.value?.project_types)return[];const D=o.value.project_types[g.value.type];return D?.directories?Object.keys(D.directories).filter(T=>{const P=D.directories[T];return P&&P.enabled_by_default===!1}):[]}),F(()=>Object.values(g.value.directories_enabled).filter(D=>D).length);const me=F(()=>(g.value.extra_directories||[]).filter(D=>D.type==="input"&&D._source==="global"));F(()=>me.value.filter(D=>D.scope==="private")),F(()=>me.value.filter(D=>D.scope==="public")),F(()=>(g.value.extra_directories||[]).filter(D=>D.type==="workspace"&&D._source==="global"));const $e=F(()=>(g.value.extra_directories||[]).filter(D=>D.type==="output"&&D._source==="global"));F(()=>$e.value.filter(D=>D.scope==="private")),F(()=>$e.value.filter(D=>D.scope==="public"));const Re=D=>Object.keys(g.value.directories_enabled).filter(P=>g.value.directories_enabled[P]?D==="workspace"?P==="notebooks"||P==="scripts"||P==="functions":D==="input"?P.startsWith("inputs_"):D==="output"?P.startsWith("outputs_"):D==="temporary"?P==="scratch":!1:!1).length,Oe=[{key:"notebooks",label:"Notebooks",hint:"Quarto or R Markdown notebooks for analysis.",defaultRenderDir:"outputs/notebooks"},{key:"docs",label:"Documentation",hint:"Codebooks, documentation, and other reference materials.",defaultRenderDir:"outputs/docs"}],Ue=[{key:"functions",label:"Functions",hint:"R files here are sourced by scaffold(), so helper functions are available in every project session."},{key:"scripts",label:"Scripts",hint:"Reusable R scripts, job runners, or automation tasks."}],ot=[{key:"inputs_raw",label:"Raw data",hint:"Read-only exports from source systems."},{key:"inputs_intermediate",label:"Intermediate data",hint:"Data after light cleaning or pre-processing steps."},{key:"inputs_final",label:"Analysis-ready data",hint:"Final inputs ready for modeling or reporting."}],st=[{key:"outputs_tables",label:"Tables",hint:"Publishable tables ready for reports or manuscripts."},{key:"outputs_figures",label:"Figures",hint:"Final plots and graphics."},{key:"outputs_models",label:"Models",hint:"Serialized models or model summaries."},{key:"outputs_reports",label:"Reports",hint:"Final reports and deliverables ready for publication."}],Xe=[{key:"scratch",label:"Scratch",hint:"Short-lived explorations (gitignored)."}],re=[{privateKey:"inputs_private_raw",publicKey:"inputs_public_raw",label:"Raw data",privateLabel:"Raw data (private)",publicLabel:"Raw data (public)"},{privateKey:"inputs_private_intermediate",publicKey:"inputs_public_intermediate",label:"Intermediate data",privateLabel:"Intermediate data (private)",publicLabel:"Intermediate data (public)"},{privateKey:"inputs_private_final",publicKey:"inputs_public_final",label:"Analysis-ready data",privateLabel:"Analysis-ready data (private)",publicLabel:"Analysis-ready data (public)"}],Z=[{privateKey:"outputs_private_tables",publicKey:"outputs_public_tables",label:"Tables",privateLabel:"Tables (private)",publicLabel:"Tables (public)"},{privateKey:"outputs_private_figures",publicKey:"outputs_public_figures",label:"Figures",privateLabel:"Figures (private)",publicLabel:"Figures (public)"},{privateKey:"outputs_private_models",publicKey:"outputs_public_models",label:"Models",privateLabel:"Models (private)",publicLabel:"Models (public)"},{privateKey:"outputs_private_reports",publicKey:"outputs_public_reports",label:"Reports",privateLabel:"Reports (private)",publicLabel:"Reports (public)"}],K=(D,T)=>o.value?.project_types?.[D]?.directories?.[T]||{},C=(D,T)=>T.map(P=>{const ue=K(D,P.key);return{key:P.key,label:ue.label||P.label,hint:ue.hint||P.hint||""}});F(()=>C("project",Oe).map(D=>({...D,defaultRenderDir:Oe.find(T=>T.key===D.key)?.defaultRenderDir||""}))),F(()=>C("project",Ue)),F(()=>C("project",ot)),F(()=>C("project",st)),F(()=>C("project",Xe));const ie=D=>D.map(T=>{const P=K("project_sensitive",T.privateKey),ue=K("project_sensitive",T.publicKey);return{...T,privateLabel:P.label||T.privateLabel,publicLabel:ue.label||T.publicLabel}});F(()=>ie(re)),F(()=>ie(Z));const A=F(()=>Array.isArray(g.value.extra_directories)?g.value.extra_directories:[]),$=D=>{g.value.extra_directories=D},q=()=>{if(!o.value?.project_types?.[g.value.type])return;const D=o.value.project_types[g.value.type];D.directories&&(g.value.directories={},Object.keys(D.directories).forEach(T=>{g.value.directories[T]=D.directories[T].default})),D.directories&&(g.value.directories_enabled={},Object.keys(D.directories).forEach(T=>{g.value.directories_enabled[T]=D.directories[T].enabled_by_default===!0})),g.value.render_dirs={},D.gitignore_template&&(g.value.git.gitignore_content=D.gitignore_template)},oe=D=>{e.push({query:{...t.query,section:D}})},te=()=>{if(!b.value||!g.value.name||!g.value.name.trim())return;const D=r.value?.global?.projects_root||"";if(!D)return;const T=(g.value.location||"").trim();if(T&&!T.startsWith(D))return;const P=g.value.name.toLowerCase().trim().replace(/[\s_]+/g,"-").replace(/[^a-z0-9-]/g,"").replace(/-+/g,"-").replace(/^-|-$/g,"");if(!P){g.value.location=D;return}const ue=D.replace(/\/+$/,"");g.value.location=`${ue}/${P}`},se=async()=>{if(!g.value.name||!g.value.name.trim()){n.error("Validation Error","Project name is required"),oe("overview");return}if(!g.value.location||!g.value.location.trim()){n.error("Validation Error","Project location is required"),oe("overview");return}try{p.value=!0;const D=o.value?.project_types?.[g.value.type],T={};D?.directories&&Object.entries(D.directories).forEach(([Ee,Ie])=>{g.value.directories_enabled[Ee]&&(T[Ee]=g.value.directories[Ee]||Ie.default)});const P=th({databaseConnections:g.value.connections.databaseConnections,s3Connections:g.value.connections.s3Connections,defaultDatabase:g.value.connections.defaultDatabase,defaultStorageBucket:g.value.connections.defaultStorageBucket}),ue={name:g.value.name.trim(),location:g.value.location.trim(),type:g.value.type,author:g.value.author,scaffold:g.value.scaffold,packages:Wb(g.value.packages),ai:g.value.ai,git:g.value.git,connections:P,env:{raw:g.value.env.rawContent||""},quarto:g.value.quarto,directories:T,render_dirs:g.value.render_dirs||{},extra_directories:(g.value.extra_directories||[]).filter(Ee=>{const Ie=Ee.key&&Ee.key.trim()&&Ee.label&&Ee.label.trim()&&Ee.path&&Ee.path.trim(),Ye=g.value.extra_directories_enabled?.[Ee.key]!==!1;return Ie&&Ye}),extra_directories_enabled:g.value.extra_directories_enabled||{}},ge=await fetch("/api/projects/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ue)});if(!ge.ok){const Ee=await ge.json();throw new Error(Ee.message||"Failed to create project")}const we=await ge.json();if(we.success===!1)throw new Error(we.error||"Project creation failed");n.success("Project Created",`${g.value.name} has been created successfully`),await i(),we.project_id?e.push(`/project/${we.project_id}`):e.push("/projects")}catch(D){console.error("Failed to create project:",D),n.error("Creation Failed",D.message||"Could not create the project")}finally{p.value=!1}},ye=D=>{(D.metaKey||D.ctrlKey)&&D.key==="s"&&(D.preventDefault(),se())};return as(()=>{window.addEventListener("keydown",ye)}),Lr(()=>{window.removeEventListener("keydown",ye)}),(D,T)=>(v(),k("div",vj,[f("nav",yj,[T[29]||(T[29]=f("h2",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"New Project",-1)),f("div",bj,[(v(),k(be,null,Le(d,P=>(v(),k(be,{key:P.id},[P.id==="basics"?(v(),Ae(qa,{key:0},{default:X(()=>[...T[28]||(T[28]=[de("Settings",-1)])]),_:1})):H("",!0),f("a",{href:"#",onClick:Pt(ue=>h.value=P.id,["prevent"]),class:xe(["flex items-center gap-2 px-3 py-2 rounded-md text-sm transition",h.value===P.id?"bg-sky-50 text-sky-700 font-medium dark:bg-sky-900/20 dark:text-sky-400":"text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-800"])},[P.icon?(v(),Ae(Ms(P.icon),{key:0,class:"h-4 w-4"})):P.svgIcon?(v(),k("svg",{key:1,class:"h-4 w-4",fill:P.svgFill??"none",viewBox:P.svgViewBox??"0 0 24 24",stroke:P.svgStroke??"currentColor"},[f("path",{"stroke-linecap":P.svgStrokeLinecap??"round","stroke-linejoin":P.svgStrokeLinejoin??"round","stroke-width":P.svgStrokeWidth??2,fill:P.svgPathFill??"none",d:P.svgIcon},null,8,wj)],8,xj)):H("",!0),de(" "+J(P.label),1)],10,kj)],64))),64))]),f("div",Sj,[S(Je,{variant:"primary",size:"md",class:"w-full",disabled:p.value||!g.value.name||!g.value.location,onClick:se},{default:X(()=>[de(J(p.value?"Creating...":"Create Project"),1)]),_:1},8,["disabled"])])]),f("div",Cj,[S(Ir,{title:R.value,description:W.value},null,8,["title","description"]),f("div",_j,[qe(f("div",null,[S(zf,{cards:N.value,onNavigate:T[0]||(T[0]=P=>h.value=P)},null,8,["cards"])],512),[[tt,h.value==="overview"]]),qe(f("div",null,[f("div",Aj,[f("div",Mj,[S(Se,{ref_key:"projectNameInput",ref:y,modelValue:g.value.name,"onUpdate:modelValue":T[1]||(T[1]=P=>g.value.name=P),label:"Project Name",hint:"Human-readable name for your project",placeholder:"My Analysis Project",required:""},null,8,["modelValue"]),S(Se,{"model-value":g.value.location,"onUpdate:modelValue":V,label:"Project Location",hint:"Directory where the project will be created",placeholder:"e.g., ~/projects or /Users/yourname/code"},null,8,["model-value"]),S(ns,{modelValue:g.value.type,"onUpdate:modelValue":T[2]||(T[2]=P=>g.value.type=P),label:"Project Type",hint:"Choose the template structure for your project"},{default:X(()=>[...T[30]||(T[30]=[f("option",{value:"project"},"Standard Project",-1),f("option",{value:"project_sensitive"},"Privacy Sensitive Project",-1),f("option",{value:"course"},"Course",-1),f("option",{value:"presentation"},"Presentation",-1)])]),_:1},8,["modelValue"]),f("div",null,[T[32]||(T[32]=f("label",{class:"block text-sm font-semibold text-gray-900 dark:text-white mb-3"}," Supported Editors ",-1)),S(Rn,{modelValue:g.value.scaffold.positron,"onUpdate:modelValue":T[3]||(T[3]=P=>g.value.scaffold.positron=P),id:"support-positron",description:"Creates .code-workspace file for Positron/VS Code users"},{default:X(()=>[...T[31]||(T[31]=[de(" Positron / VS Code ",-1)])]),_:1},8,["modelValue"]),T[33]||(T[33]=f("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-3"}," RStudio supported by default ",-1))]),S(ns,{modelValue:g.value.scaffold.notebook_format,"onUpdate:modelValue":T[4]||(T[4]=P=>g.value.scaffold.notebook_format=P),label:"Default Notebook Format",hint:"Format used when creating new notebooks"},{default:X(()=>[...T[34]||(T[34]=[f("option",{value:"quarto"},"Quarto (.qmd)",-1),f("option",{value:"rmarkdown"},"R Markdown (.Rmd)",-1)])]),_:1},8,["modelValue"]),f("div",Dj,[S(Uf,{modelValue:g.value.author,"onUpdate:modelValue":T[5]||(T[5]=P=>g.value.author=P)},null,8,["modelValue"])])])])],512),[[tt,h.value==="basics"]]),qe(f("div",null,[f("div",Ej,[T[35]||(T[35]=f("div",null,[f("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"}," Scaffold Behavior "),f("p",{class:"text-sm text-gray-600 dark:text-gray-400"},[de(" Automatic actions when "),f("code",{class:"px-1.5 py-0.5 bg-gray-200 dark:bg-gray-700 rounded text-xs"},"scaffold()"),de(" runs to initialize your project environment. ")])],-1)),S(Kf,{modelValue:g.value.scaffold,"onUpdate:modelValue":T[6]||(T[6]=P=>g.value.scaffold=P),flush:""},null,8,["modelValue"])])],512),[[tt,h.value==="scaffold"]]),qe(f("div",Tj,[f("div",jj,[S(u_,{legend:"Project Type",description:"Select a project type to customize the directory structure."},{default:X(()=>[S(Tl,{modelValue:g.value.type,"onUpdate:modelValue":T[7]||(T[7]=P=>g.value.type=P),id:"type-project",name:"project-type",value:"project"},{default:X(()=>[...T[36]||(T[36]=[f("div",null,[f("div",{class:"font-medium text-sm"},"Standard Project"),f("div",{class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5"}," Full-featured with organized data, work, and output directories ")],-1)])]),_:1},8,["modelValue"]),S(Tl,{modelValue:g.value.type,"onUpdate:modelValue":T[8]||(T[8]=P=>g.value.type=P),id:"type-sensitive",name:"project-type",value:"project_sensitive"},{default:X(()=>[...T[37]||(T[37]=[f("div",null,[f("div",{class:"font-medium text-sm"},"Privacy Sensitive Project"),f("div",{class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5"}," Enhanced privacy controls with separate private/public flows ")],-1)])]),_:1},8,["modelValue"]),S(Tl,{modelValue:g.value.type,"onUpdate:modelValue":T[9]||(T[9]=P=>g.value.type=P),id:"type-course",name:"project-type",value:"course"},{default:X(()=>[...T[38]||(T[38]=[f("div",null,[f("div",{class:"font-medium text-sm"},"Course/Teaching"),f("div",{class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5"}," Simplified structure for teaching materials ")],-1)])]),_:1},8,["modelValue"]),S(Tl,{modelValue:g.value.type,"onUpdate:modelValue":T[10]||(T[10]=P=>g.value.type=P),id:"type-presentation",name:"project-type",value:"presentation"},{default:X(()=>[...T[39]||(T[39]=[f("div",null,[f("div",{class:"font-medium text-sm"},"Presentation"),f("div",{class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5"}," Minimal structure for slides and presentations ")],-1)])]),_:1},8,["modelValue"])]),_:1})]),o.value?(v(),Ae(Qf,{key:0,"project-type":g.value.type,directories:g.value.directories,"render-dirs":g.value.render_dirs,enabled:g.value.directories_enabled,"extra-directories":A.value,settings:g.value,gitignore:g.value.git.gitignore_content,catalog:o.value.project_types?.[g.value.type],"new-extra-ids":x.value,"allow-destruction":!0,"onUpdate:directories":T[11]||(T[11]=P=>g.value.directories=P),"onUpdate:renderDirs":T[12]||(T[12]=P=>g.value.render_dirs=P),"onUpdate:enabled":T[13]||(T[13]=P=>g.value.directories_enabled=P),"onUpdate:extraDirectories":$,"onUpdate:gitignore":T[14]||(T[14]=P=>g.value.git.gitignore_content=P),"onUpdate:newExtraIds":T[15]||(T[15]=P=>x.value=P),onReset:q},null,8,["project-type","directories","render-dirs","enabled","extra-directories","settings","gitignore","catalog","new-extra-ids"])):H("",!0)],512),[[tt,h.value==="structure"]]),qe(f("div",null,[S(es,{flush:""},{default:X(()=>[S(Jf,{modelValue:g.value.quarto,"onUpdate:modelValue":T[16]||(T[16]=P=>g.value.quarto=P)},null,8,["modelValue"])]),_:1})],512),[[tt,h.value==="quarto"]]),qe(f("div",null,[S(Gf,{"database-connections":g.value.connections.databaseConnections,"onUpdate:databaseConnections":T[17]||(T[17]=P=>g.value.connections.databaseConnections=P),"s3-connections":g.value.connections.s3Connections,"onUpdate:s3Connections":T[18]||(T[18]=P=>g.value.connections.s3Connections=P),"default-database":g.value.connections.defaultDatabase,"onUpdate:defaultDatabase":T[19]||(T[19]=P=>g.value.connections.defaultDatabase=P),"default-storage-bucket":g.value.connections.defaultStorageBucket,"onUpdate:defaultStorageBucket":T[20]||(T[20]=P=>g.value.connections.defaultStorageBucket=P)},null,8,["database-connections","s3-connections","default-database","default-storage-bucket"])],512),[[tt,h.value==="connections"]]),qe(f("div",null,[T[40]||(T[40]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Environment variables template for this project. These defaults help connections work immediately. ",-1)),S(Yf,{groups:g.value.env.groups,variables:g.value.env.variables,"onUpdate:variables":T[21]||(T[21]=P=>g.value.env.variables=P),"raw-content":g.value.env.rawContent,"onUpdate:rawContent":T[22]||(T[22]=P=>g.value.env.rawContent=P),"view-mode":g.value.env.viewMode,"onUpdate:viewMode":T[23]||(T[23]=P=>g.value.env.viewMode=P),"regroup-on-save":g.value.env.regroupOnSave,"onUpdate:regroupOnSave":T[24]||(T[24]=P=>g.value.env.regroupOnSave=P),"show-save-button":!1,"allow-show-values-toggle":!0},null,8,["groups","variables","raw-content","view-mode","regroup-on-save"])],512),[[tt,h.value==="env"]]),qe(f("div",null,[S(Hf,{modelValue:g.value.packages,"onUpdate:modelValue":T[25]||(T[25]=P=>g.value.packages=P),"show-renv-toggle":!0,flush:!1},null,8,["modelValue"])],512),[[tt,h.value==="packages"]]),qe(f("div",null,[f("div",Oj,[T[42]||(T[42]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Framework maintains context files for selected assistants and keeps them in sync before commits. ",-1)),S(qf,{modelValue:g.value.ai,"onUpdate:modelValue":T[26]||(T[26]=P=>g.value.ai=P),flush:!0,"show-editor":!0,"editor-height":"500px"},{"editor-description":X(()=>[...T[41]||(T[41]=[de(" Edit the canonical file directly. This will be pre-populated when the project is created. ",-1)])]),_:1},8,["modelValue"])])],512),[[tt,h.value==="ai"]]),qe(f("div",null,[S(Wf,{modelValue:le.value,"onUpdate:modelValue":T[27]||(T[27]=P=>le.value=P)},{note:X(()=>[...T[43]||(T[43]=[de(" Project-specific .gitignore templates can be customized in Project Defaults. ",-1)])]),_:1},8,["modelValue"])],512),[[tt,h.value==="git"]])])])]))}},$j={class:"mt-2 block text-sm font-semibold text-gray-900 dark:text-white"},Rj={key:0,class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},Lj={class:"mt-2 text-sm font-semibold text-gray-900 dark:text-white"},Vj={key:0,class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},Bj={key:1,class:"mt-6"},Ij={__name:"EmptyState",props:{title:{type:String,required:!0},description:{type:String,default:null},icon:{type:String,default:null,validator:s=>["database","folder","document","users","inbox","photo"].includes(s)},action:{type:Boolean,default:!1}},emits:["click"],setup(s,{emit:e}){const t=s,n=e,i=F(()=>{const l=["relative","block","w-full","rounded-lg","border-2","border-dashed","border-gray-300","p-12","text-center","dark:border-white/15"];return t.action&&l.push("hover:border-gray-400","focus:outline-2","focus:outline-offset-2","focus:outline-sky-600","dark:hover:border-white/25","dark:focus:outline-sky-500","transition-colors"),l.join(" ")}),r=F(()=>({database:()=>Rt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Rt("path",{d:"M8 14v20c0 4.418 7.163 8 16 8 1.381 0 2.721-.087 4-.252M8 14c0 4.418 7.163 8 16 8s16-3.582 16-8M8 14c0-4.418 7.163-8 16-8s16 3.582 16 8m0 0v14m0-4c0 4.418-7.163 8-16 8S8 28.418 8 24m32 10v6m0 0v6m0-6h6m-6 0h-6"})]),folder:()=>Rt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Rt("path",{d:"M3 7v30a4 4 0 004 4h34a4 4 0 004-4V13a4 4 0 00-4-4H23.343a4 4 0 01-2.829-1.172l-2.828-2.828A4 4 0 0014.858 4H7a4 4 0 00-4 4v0zM37 17v6m0 0v6m0-6h6m-6 0h-6"})]),document:()=>Rt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Rt("path",{d:"M8 4a4 4 0 00-4 4v32a4 4 0 004 4h32a4 4 0 004-4V8a4 4 0 00-4-4H8zm24 16v6m0 0v6m0-6h6m-6 0h-6"})]),users:()=>Rt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Rt("path",{d:"M17 21a5 5 0 110-10 5 5 0 010 10zm-6.5 8a7.5 7.5 0 0115 0H10.5zM31 21a5 5 0 110-10 5 5 0 010 10zm-6.5 8a7.5 7.5 0 0115 0H24.5z"})]),inbox:()=>Rt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Rt("path",{d:"M4 8h40M4 8v28a4 4 0 004 4h32a4 4 0 004-4V8M4 8l18 14a2 2 0 002.4 0L44 8"})]),photo:()=>Rt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Rt("path",{d:"M4 8a4 4 0 014-4h32a4 4 0 014 4v32a4 4 0 01-4 4H8a4 4 0 01-4-4V8zm10 6a3 3 0 100-6 3 3 0 000 6zM4 40l12-12 8 8 8-8L44 40"})])})[t.icon]||null),o=()=>{t.action&&n("click")};return(l,a)=>s.action?(v(),k("button",{key:0,type:"button",onClick:o,class:xe(i.value)},[dt(l.$slots,"icon",{},()=>[s.icon?(v(),Ae(Ms(r.value),{key:0,class:"mx-auto size-12 text-gray-400 dark:text-gray-500"})):H("",!0)]),f("span",$j,J(s.title),1),s.description?(v(),k("p",Rj,J(s.description),1)):H("",!0)],2)):(v(),k("div",{key:1,class:xe(i.value.replace("hover:border-gray-400","").replace("focus:outline-2",""))},[dt(l.$slots,"icon",{},()=>[s.icon?(v(),Ae(Ms(r.value),{key:0,class:"mx-auto size-12 text-gray-400 dark:text-gray-500"})):H("",!0)]),f("h3",Lj,J(s.title),1),s.description?(v(),k("p",Vj,J(s.description),1)):H("",!0),l.$slots.actions?(v(),k("div",Bj,[dt(l.$slots,"actions")])):H("",!0)],2))}},Nj=["for"],Fj={class:"mt-2"},zj=["id","value","placeholder","rows","required","disabled"],Uj={key:1,class:"mt-2 text-sm text-gray-500 dark:text-gray-400"},am={__name:"Textarea",props:{id:{type:String,default:()=>`textarea-${Math.random().toString(36).substr(2,9)}`},modelValue:{type:String,default:""},label:{type:String,default:null},placeholder:{type:String,default:""},rows:{type:Number,default:4},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},hint:{type:String,default:null},monospace:{type:Boolean,default:!1},textareaClass:{type:[String,Array,Object],default:""}},emits:["update:modelValue"],setup(s){const e=s,t=F(()=>["block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-sky-600 sm:text-sm/6 dark:bg-white/5 dark:text-white dark:outline-white/10 dark:placeholder:text-gray-500 dark:focus:outline-sky-500",e.monospace?"font-mono text-sm leading-6":"",e.textareaClass]);return(n,i)=>(v(),k("div",null,[s.label?(v(),k("label",{key:0,for:s.id,class:"block text-sm/6 font-medium text-gray-900 dark:text-white"},J(s.label),9,Nj)):H("",!0),f("div",Fj,[f("textarea",{id:s.id,value:s.modelValue,placeholder:s.placeholder,rows:s.rows,required:s.required,disabled:s.disabled,onInput:i[0]||(i[0]=r=>n.$emit("update:modelValue",r.target.value)),class:xe(t.value)},null,42,zj)]),s.hint?(v(),k("p",Uj,J(s.hint),1)):H("",!0)]))}},Hj={class:"space-y-6"},qj={key:0},Wj={class:"mt-1 font-mono text-sm text-gray-900 dark:text-gray-100 break-words"},Kj={key:1},Gj={class:"grid gap-4 sm:grid-cols-2"},Jj=["value"],Qj={class:"sm:col-span-2"},Yj={key:0,class:"sm:col-span-2"},Xj={class:"space-y-3"},Zj={class:"flex items-center justify-between"},eO={key:0,class:"rounded-md border border-dashed border-gray-300 p-4 text-sm text-gray-500 dark:border-gray-600 dark:text-gray-400"},tO={class:"grid gap-3 sm:grid-cols-[1fr_auto] sm:items-start"},sO={class:"mt-3"},nO={key:0,class:"mt-2 text-xs text-gray-500 dark:text-gray-400"},iO={class:"mt-2 flex justify-end"},rO={key:2,class:"text-sm text-red-600 dark:text-red-400"},oO={key:3,class:"text-sm text-red-600 dark:text-red-400"},lO={key:4,class:"text-sm text-red-600 dark:text-red-400"},aO='{"source": "data-catalog"}',uO={__name:"DataCatalogEditModal",props:{modelValue:{type:Boolean,default:!1},mode:{type:String,default:"edit",validator:s=>["edit","create"].includes(s)},entry:{type:Object,default:null},saving:{type:Boolean,default:!1},error:{type:String,default:null}},emits:["update:modelValue","save"],setup(s,{emit:e}){const t=s,n=e,i=Object.freeze([{value:"csv",label:"CSV (comma-separated)"},{value:"tsv",label:"TSV (tab-separated)"},{value:"csv_custom",label:"Delimited text (custom)"},{value:"rds",label:"RDS (R serialized)"},{value:"excel",label:"Excel (.xlsx / .xls)"},{value:"stata",label:"Stata (.dta)"},{value:"spss",label:"SPSS (.sav / .zsav)"},{value:"spss_por",label:"SPSS Portable (.por)"},{value:"sas",label:"SAS (.sas7bdat / .sas7bcat)"},{value:"sas_xpt",label:"SAS Transport (.xpt)"}]),r=["path","type","description","locked","delimiter"],o=Y(null),l=Y(!1),a=Y(!1),c=F(()=>t.mode==="create"),u=Js({path:"",fullKey:"",type:"",description:"",delimiter:"",locked:!1,additionalFields:[]}),d=F(()=>u.type==="csv_custom"),h=F(()=>{if(!t.entry&&!c.value)return null;const G=W();return G.length>0?`Duplicate metadata keys: ${G.join(", ")}`:u.additionalFields.some(Q=>!Q.key.trim())?"Metadata keys cannot be empty.":null}),p=F(()=>u.path.trim()?null:"File path is required"),y=F(()=>c.value?a.value?p.value:null:p.value);Pe(()=>t.entry,G=>{if(!G){I();return}U(G)},{immediate:!0}),Pe(()=>u.path,G=>{if(l.value)return;const Q=j(G);Q&&(Q.type==="csv"?(u.type="csv",u.delimiter=x("csv")):Q.type==="tsv"?(u.type="tsv",u.delimiter=x("tsv")):(u.type=Q.type,u.delimiter=""))}),Pe(()=>u.type,G=>{G&&(G==="csv"?u.delimiter=x("csv"):G==="tsv"?u.delimiter=x("tsv"):G!=="csv_custom"&&(u.delimiter=""))});function b(){return`field-${Math.random().toString(36).slice(2,9)}`}function x(G){return G==="csv"?"comma":G==="tsv"?"tab":""}function g(G,Q){if(!G)return!1;const ae=G.toLowerCase();return Q==="csv"?ae==="comma"||G===",":Q==="tsv"?ae==="tab"||G==="	":!1}function j(G){if(!G)return null;const Q=G.toLowerCase();return Q.endsWith(".csv")?{type:"csv",delimiter:"comma"}:Q.endsWith(".tsv")||Q.endsWith(".txt")||Q.endsWith(".dat")?{type:"tsv",delimiter:"tab"}:Q.endsWith(".rds")?{type:"rds",delimiter:""}:Q.endsWith(".xlsx")||Q.endsWith(".xls")?{type:"excel",delimiter:""}:Q.endsWith(".dta")?{type:"stata",delimiter:""}:Q.endsWith(".sav")||Q.endsWith(".zsav")?{type:"spss",delimiter:""}:Q.endsWith(".por")?{type:"spss_por",delimiter:""}:Q.endsWith(".sas7bdat")||Q.endsWith(".sas7bcat")?{type:"sas",delimiter:""}:Q.endsWith(".xpt")?{type:"sas_xpt",delimiter:""}:null}function B(G){if(!G){u.type="",u.delimiter="",l.value=!1;return}u.type=G,l.value=!0,G==="csv"?u.delimiter=x("csv"):G==="tsv"?u.delimiter=x("tsv"):u.delimiter=""}function U(G){if(I(),a.value=!1,c.value){const Re=G?.data||{};u.fullKey=G?.fullKey||"",u.path=Re.path||"",u.type=Re.type||"",u.description=Re.description||"",u.locked=!!Re.locked,u.delimiter=Re.delimiter||"",l.value=!1;return}const Q=G.data||{};u.fullKey=G.fullKey||"",u.path=Q.path||"";const ae=j(u.path),me=Q.type||ae?.type||"";if(u.description=Q.description||"",u.locked=!!Q.locked,me==="csv"){const Re=Q.delimiter||ae?.delimiter||x("csv");g(Re,"csv")?(u.type="csv",u.delimiter=x("csv")):Re?(u.type="csv_custom",u.delimiter=Re):(u.type="csv",u.delimiter=x("csv"))}else me==="tsv"?(u.type="tsv",u.delimiter=x("tsv")):(u.type=me,u.delimiter=d.value&&Q.delimiter||"");!u.type&&ae?.type&&(u.type=ae.type,u.delimiter=ae.delimiter||x(ae.type)),l.value=!!Q.type||u.type==="csv_custom";const $e=Object.entries(Q).filter(([Re])=>!r.includes(Re)).map(([Re,Oe])=>({id:b(),key:Re,valueInput:L(Oe),valueType:_(Oe),isMultiline:typeof Oe=="object"&&Oe!==null}));u.additionalFields=$e,o.value=null}function I(){u.path="",u.fullKey="",u.type="",u.description="",u.delimiter="",u.locked=!1,u.additionalFields=[],o.value=null,l.value=!1}function L(G){if(typeof G=="object"&&G!==null)try{return JSON.stringify(G,null,2)}catch{return""}return G==null?"":String(G)}function _(G){return Array.isArray(G)||typeof G=="object"&&G!==null?"object":typeof G=="boolean"?"boolean":typeof G=="number"?"number":"string"}function R(G){if(G.valueType==="object"){if(!G.valueInput.trim())return null;try{return JSON.parse(G.valueInput)}catch{throw new Error(`Invalid JSON for field "${G.key}"`)}}if(G.valueType==="number"){const Q=Number(G.valueInput);if(Number.isNaN(Q))throw new Error(`Value for "${G.key}" must be a number`);return Q}if(G.valueType==="boolean"){const Q=G.valueInput.trim().toLowerCase();if(["true","false"].includes(Q))return Q==="true";throw new Error(`Value for "${G.key}" must be "true" or "false"`)}return G.valueInput}function W(){const G=new Set,Q=[];return u.additionalFields.forEach(ae=>{const me=ae.key.trim();me&&(G.has(me)||r.includes(me)?Q.push(me):G.add(me))}),Q}function ce(G){return G.key.trim()?r.includes(G.key.trim())?"Reserved key name":u.additionalFields.some(Q=>Q!==G&&Q.key.trim()===G.key.trim())?"Duplicate key":null:"Key is required"}function ne(){u.additionalFields.push({id:b(),key:"",valueInput:"",valueType:"string",isMultiline:!1}),o.value=null}function N(G){u.additionalFields=u.additionalFields.filter(Q=>Q.id!==G)}function le(G){G.isMultiline=!G.isMultiline,G.isMultiline?(G.valueType="object",G.valueInput&&!G.valueInput.trim().startsWith("{")&&(G.valueInput="")):(G.valueType="string",G.valueInput=G.valueInput!=null?String(G.valueInput):"")}const ee=()=>{if(o.value=null,a.value=!0,!(p.value||h.value)&&!(!c.value&&!t.entry))try{const G=V();n("save",G)}catch(G){o.value=G.message}},V=()=>{if(!u.path.trim())throw new Error("File path is required");const G={};G.path=u.path.trim();const Q=u.type==="csv_custom"?"csv":u.type.trim();if(Q&&(G.type=Q),u.description.trim()&&(G.description=u.description.trim()),u.type==="csv_custom"){if(!u.delimiter.trim())throw new Error("Delimiter is required for custom delimited text sources");G.delimiter=u.delimiter.trim()}else u.delimiter.trim()&&!g(u.delimiter.trim(),u.type)&&(G.delimiter=u.delimiter.trim());u.locked&&(G.locked=!0);for(const me of u.additionalFields){const $e=me.key.trim();if(!$e||r.includes($e))continue;const Re=R({...me,valueType:me.valueType??"string"});Re===null||Re===""||(G[$e]=Re)}const ae=(c.value?u.fullKey:t.entry.fullKey||"").trim();if(!ae)throw new Error("Dot notation key is required");return{fullKey:ae,data:G,isNew:c.value}};return(G,Q)=>(v(),Ae(Ni,{"model-value":s.modelValue,variant:"left",size:"lg",title:"Edit Data Entry","onUpdate:modelValue":Q[6]||(Q[6]=ae=>n("update:modelValue",ae))},Ck({_:2},[s.entry||c.value?{name:"default",fn:X(()=>[f("div",Hj,[c.value?(v(),k("div",Kj,[S(Se,{modelValue:u.fullKey,"onUpdate:modelValue":Q[0]||(Q[0]=ae=>u.fullKey=ae),label:"Dot Notation Key",placeholder:"e.g., inputs.raw.custom_dataset",hint:"Use dot notation to place this entry within the catalog hierarchy."},null,8,["modelValue"])])):(v(),k("div",qj,[Q[7]||(Q[7]=f("p",{class:"text-xs font-medium uppercase tracking-wide text-gray-500 dark:text-gray-400"}," Data Key ",-1)),f("p",Wj,J(s.entry.fullKey),1)])),S(Se,{modelValue:u.path,"onUpdate:modelValue":Q[1]||(Q[1]=ae=>u.path=ae),label:"File Path",placeholder:"inputs/raw/example.csv",required:"",error:y.value,monospace:"",hint:"Provide a path relative to the project root (e.g., inputs/raw/data.csv) or an absolute path."},null,8,["modelValue","error"]),f("div",Gj,[S(ns,{"model-value":u.type,label:"Type","onUpdate:modelValue":B},{default:X(()=>[Q[8]||(Q[8]=f("option",{disabled:"",value:""},"Select file type",-1)),(v(!0),k(be,null,Le(ct(i),ae=>(v(),k("option",{key:ae.value,value:ae.value},J(ae.label),9,Jj))),128))]),_:1},8,["model-value"]),f("div",Qj,[S(Ge,{modelValue:u.locked,"onUpdate:modelValue":Q[2]||(Q[2]=ae=>u.locked=ae),label:"Locked",description:"Treat this data source as read-only."},null,8,["modelValue"])]),d.value?(v(),k("div",Yj,[S(Se,{modelValue:u.delimiter,"onUpdate:modelValue":Q[3]||(Q[3]=ae=>u.delimiter=ae),label:"Delimiter",placeholder:"e.g., tab or |",hint:"Use keywords 'tab', 'comma', 'semicolon', 'space' or supply a single character (e.g., |). Keywords map to their respective delimiters."},null,8,["modelValue"])])):H("",!0)]),S(am,{modelValue:u.description,"onUpdate:modelValue":Q[4]||(Q[4]=ae=>u.description=ae),label:"Description",placeholder:"Explain what this source contains or how it was produced.",rows:4},null,8,["modelValue"]),f("div",Xj,[f("div",Zj,[Q[10]||(Q[10]=f("h4",{class:"text-sm font-semibold text-gray-900 dark:text-gray-100"}," Additional Metadata ",-1)),S(Je,{size:"sm",variant:"secondary",class:"shadow-none",onClick:ne},{default:X(()=>[...Q[9]||(Q[9]=[de(" Add Field ",-1)])]),_:1})]),Q[12]||(Q[12]=f("p",{class:"text-xs text-gray-500 dark:text-gray-400"}," Store any extra properties (e.g., source, codebook details). Complex values can be provided as JSON. ",-1)),u.additionalFields.length===0?(v(),k("div",eO," No additional metadata fields. ")):H("",!0),(v(!0),k(be,null,Le(u.additionalFields,ae=>(v(),k("div",{key:ae.id,class:"rounded-md border border-gray-200 bg-white/80 p-4 dark:border-gray-700 dark:bg-gray-900/40"},[f("div",tO,[S(Se,{modelValue:ae.key,"onUpdate:modelValue":me=>ae.key=me,label:"Key",placeholder:"e.g., source",error:ce(ae)},null,8,["modelValue","onUpdate:modelValue","error"]),S(Je,{size:"sm",variant:"secondary",class:"shadow-none",onClick:me=>N(ae.id)},{default:X(()=>[...Q[11]||(Q[11]=[de(" Remove ",-1)])]),_:1},8,["onClick"])]),f("div",sO,[(v(),Ae(Ms(ae.isMultiline?am:Se),{modelValue:ae.valueInput,"onUpdate:modelValue":me=>ae.valueInput=me,label:ae.isMultiline?"Value (JSON)":"Value",rows:ae.isMultiline?4:void 0,placeholder:ae.isMultiline?aO:"comma",monospace:ae.isMultiline?void 0:!1},null,8,["modelValue","onUpdate:modelValue","label","rows","placeholder","monospace"])),ae.isMultiline?(v(),k("p",nO," Provide valid JSON to store complex data structures. ")):H("",!0),f("div",iO,[S(Je,{size:"xs",variant:"soft",onClick:me=>le(ae)},{default:X(()=>[de(J(ae.isMultiline?"Use single-line value":"Use JSON value"),1)]),_:2},1032,["onClick"])])])]))),128))]),h.value?(v(),k("p",rO,J(h.value),1)):H("",!0),o.value?(v(),k("p",oO,J(o.value),1)):H("",!0),s.error?(v(),k("p",lO,J(s.error),1)):H("",!0)])]),key:"0"}:void 0,s.entry?{name:"actions",fn:X(()=>[S(Je,{size:"sm",variant:"secondary",class:"shadow-none",onClick:Q[5]||(Q[5]=ae=>n("update:modelValue",!1))},{default:X(()=>[...Q[13]||(Q[13]=[de(" Cancel ",-1)])]),_:1}),S(Je,{size:"sm",disabled:s.saving,onClick:ee},{default:X(()=>[de(J(s.saving?"Saving":"Save Entry"),1)]),_:1},8,["disabled"])]),key:"1"}:void 0]),1032,["model-value"]))}},Kb=(s="")=>{const t=String(s??"").trim().replace(/[^a-zA-Z0-9]+/g,"-").replace(/^-+|-+$/g,"").toLowerCase();return t?`data-node-${t}`:"data-node-root"},cO=["id"],dO=["aria-expanded"],fO={class:"flex-1"},hO={key:0,class:"rounded bg-amber-200/70 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},pO={key:1},gO={class:"mt-1 text-xs text-zinc-500 dark:text-zinc-400"},mO={class:"text-xs font-medium uppercase tracking-wide text-zinc-500 dark:text-zinc-400"},vO={class:"flex items-start gap-3"},yO={class:"flex-1"},bO={key:0,class:"rounded bg-amber-200/70 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},kO={key:1},xO={class:"mt-1 text-xs text-zinc-500 dark:text-zinc-400"},wO=["id"],SO={class:"flex items-start justify-between gap-4"},CO={class:"min-w-0 flex items-center gap-2"},_O={class:"text-sm font-semibold text-gray-900 dark:text-white"},AO={key:0,class:"rounded bg-amber-200/70 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},MO={key:1},DO={key:0,class:"inline-flex items-center rounded-full border border-gray-200 bg-white px-2.5 py-1 text-xs font-medium text-gray-700 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-100"},EO={class:"flex items-center gap-2 shrink-0"},TO={class:"mt-5 space-y-4"},jO={key:0,class:"space-y-2"},OO={class:"text-sm leading-relaxed text-gray-600 dark:text-zinc-300"},PO={key:1,class:"flex items-start gap-3"},$O={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},RO={key:1,class:"h-4 w-4 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},LO={class:"min-w-0 flex-1"},VO={class:"mt-1 font-mono text-sm leading-relaxed text-gray-900 dark:text-zinc-100"},BO={key:0,class:"rounded bg-amber-200/60 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},IO={key:1},NO={key:1,class:"text-zinc-500"},FO={class:"flex items-start gap-3 pt-4 border-t border-gray-200 dark:border-zinc-700"},zO={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},UO={key:1,class:"h-4 w-4 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},HO={class:"min-w-0 flex-1"},qO={class:"mt-1 font-mono text-sm leading-relaxed text-gray-900 dark:text-zinc-100"},WO={key:0,class:"rounded bg-amber-200/60 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},KO={key:1},GO={key:1,class:"text-zinc-500"},JO={class:"min-w-0"},QO={class:"text-xs font-medium uppercase tracking-wide text-gray-600 dark:text-zinc-200"},YO={class:"mt-1 whitespace-pre-wrap break-words font-mono text-[13px] text-gray-800 dark:text-zinc-200"},XO={class:"flex items-start gap-3 pt-4 border-t border-gray-200 dark:border-zinc-700"},ZO={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},eP={key:1,class:"h-4 w-4 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},tP={class:"min-w-0 flex-1"},sP=["title"],mc="mt-1.5 inline-flex h-10 w-10 items-center justify-center rounded-md border border-gray-200 bg-white text-gray-500 transition hover:border-gray-300 hover:text-gray-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-500 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-300 dark:hover:border-gray-500 dark:hover:text-gray-100",nP=Object.assign({name:"DataCatalogTree"},{__name:"DataCatalogTree",props:{node:{type:Object,required:!0},depth:{type:Number,default:0},expandedKeys:{type:Object,required:!0},autoExpandedKeys:{type:Object,required:!0},toggleGroup:{type:Function,required:!0},searchTerm:{type:String,default:""},hierarchical:{type:Boolean,default:!0},pendingDeletes:{type:Object,default:null}},emits:["edit","delete"],setup(s,{emit:e}){const t=e,n=s,i=F(()=>n.node?.type==="group"),r=F(()=>n.depth===0),o=F(()=>{if(!i.value)return!1;if(!n.hierarchical)return!0;const ne=n.node?.fullKey;if(!ne)return!1;const N=n.expandedKeys,le=n.autoExpandedKeys,ee=typeof N?.has=="function"?N.has(ne):!!N?.[ne],V=typeof le?.has=="function"?le.has(ne):!!le?.[ne];return ee||V}),l=F(()=>{const ne=n.node?.leafCount||0;return`${ne} ${ne===1?"entry":"entries"}`}),a=F(()=>r.value?"mb-4 rounded-xl border border-gray-200 bg-white p-6 transition hover:border-gray-300 scroll-mt-16 dark:border-gray-700/70 dark:bg-gray-900 dark:hover:border-gray-600":"mb-3 rounded-lg border border-gray-200 bg-white p-4 transition hover:border-gray-300 dark:border-gray-700/60 dark:bg-gray-900/60 dark:hover:border-gray-600"),c=F(()=>r.value?"text-lg font-semibold text-zinc-900 dark:text-white":"text-sm font-semibold text-zinc-900 dark:text-white"),u=F(()=>r.value?"mt-4 space-y-3":"mt-3 space-y-3"),d=F(()=>n.pendingDeletes instanceof Set?n.pendingDeletes:n.pendingDeletes&&typeof n.pendingDeletes=="object"&&n.pendingDeletes.value instanceof Set?n.pendingDeletes.value:new Set),h=F(()=>d.value.has(n.node?.fullKey)),p=F(()=>{const ne=n.node?.data||{},N=new Set(["path","type","description","locked","delimiter"]);return Object.keys(ne).filter(le=>!N.has(le)).reduce((le,ee)=>(le[ee]=ne[ee],le),{})}),y=F(()=>{const ne="relative rounded-lg p-6 transition focus-within:ring-2",N=r.value?"scroll-mt-16":"";return h.value?`${ne} border border-red-200 bg-red-50 hover:bg-red-100 focus-within:ring-red-300 ${N} dark:border-red-500/40 dark:bg-red-900/30 dark:hover:bg-red-900/40 dark:focus-within:ring-red-500/40`:`${ne} border border-gray-200 bg-gray-50 hover:bg-gray-100 focus-within:ring-sky-200 ${N} dark:border-gray-700/50 dark:bg-gray-800/50 dark:hover:bg-gray-800/60 dark:focus-within:ring-sky-500/40`}),b=F(()=>h.value?"shadow-none border border-red-200 text-red-700 hover:bg-red-50 dark:border-red-500/40 dark:text-red-200 dark:hover:bg-red-900/30":"shadow-none"),x=F(()=>n.searchTerm.trim().toLowerCase()),g=(ne="")=>{const N=ne??"",le=x.value;if(!le)return[{text:N,highlight:!1}];const ee=N.toLowerCase(),V=[];let G=0,Q=ee.indexOf(le);for(;Q!==-1;)Q>G&&V.push({text:N.slice(G,Q),highlight:!1}),V.push({text:N.slice(Q,Q+le.length),highlight:!0}),G=Q+le.length,Q=ee.indexOf(le,G);return G<N.length&&V.push({text:N.slice(G),highlight:!1}),V.length>0?V:[{text:N,highlight:!1}]},j=F(()=>n.node?.displayName||n.node?.name||""),B=F(()=>g(j.value)),U=F(()=>g(n.node?.data?.path||"")),I=F(()=>g(n.node?.fullKey||"")),L=F(()=>{const ne=n.node?.fullKey||"";return ne?`data_read('${ne}')`:"data_read()"}),_=(ne="")=>ne.replace(/_/g," "),R=ne=>ne==null?"":typeof ne=="object"?JSON.stringify(ne,null,2):String(ne),W=F(()=>{if(!r.value)return null;const ne=n.node?.fullKey||n.node?.name;return ne?Kb(ne):null}),ce=()=>{!i.value||!n.hierarchical||n.toggleGroup(n.node.fullKey)};return(ne,N)=>{const le=_c("DataCatalogTree",!0);return v(),k("div",null,[i.value?(v(),k("div",{key:0,id:W.value||void 0,class:xe(a.value)},[s.hierarchical?(v(),k(be,{key:0},[f("button",{type:"button",class:"flex w-full items-start gap-3 text-left transition hover:text-zinc-900 focus:outline-none",onClick:ce,"aria-expanded":o.value},[S(ct(o2),{class:xe(["mt-1.5 h-4 w-4 shrink-0 text-zinc-400 transition-transform",{"rotate-90 text-sky-500":o.value}])},null,8,["class"]),f("div",fO,[f("p",{class:xe(c.value)},[(v(!0),k(be,null,Le(B.value,(ee,V)=>(v(),k(be,{key:V},[ee.highlight?(v(),k("mark",hO,J(ee.text),1)):(v(),k("span",pO,J(ee.text),1))],64))),128))],2),f("p",gO,J(l.value),1)]),f("span",mO,J(o.value?"Hide":"Show"),1)],8,dO),S(Xd,{name:"catalog-collapse"},{default:X(()=>[qe(f("div",{class:xe(u.value)},[(v(!0),k(be,null,Le(s.node.children,ee=>(v(),Ae(le,{key:ee.fullKey,node:ee,depth:s.depth+1,"expanded-keys":s.expandedKeys,"auto-expanded-keys":s.autoExpandedKeys,"toggle-group":s.toggleGroup,"search-term":s.searchTerm,hierarchical:s.hierarchical,"pending-deletes":s.pendingDeletes,onEdit:N[0]||(N[0]=V=>t("edit",V)),onDelete:N[1]||(N[1]=V=>t("delete",V))},null,8,["node","depth","expanded-keys","auto-expanded-keys","toggle-group","search-term","hierarchical","pending-deletes"]))),128))],2),[[tt,o.value]])]),_:1})],64)):(v(),k(be,{key:1},[f("div",vO,[f("div",yO,[f("p",{class:xe(c.value)},[(v(!0),k(be,null,Le(B.value,(ee,V)=>(v(),k(be,{key:V},[ee.highlight?(v(),k("mark",bO,J(ee.text),1)):(v(),k("span",kO,J(ee.text),1))],64))),128))],2),f("p",xO,J(l.value),1)])]),f("div",{class:xe(u.value)},[(v(!0),k(be,null,Le(s.node.children,ee=>(v(),Ae(le,{key:ee.fullKey,node:ee,depth:s.depth+1,"expanded-keys":s.expandedKeys,"auto-expanded-keys":s.autoExpandedKeys,"toggle-group":s.toggleGroup,"search-term":s.searchTerm,hierarchical:s.hierarchical,"pending-deletes":s.pendingDeletes,onEdit:N[2]||(N[2]=V=>t("edit",V)),onDelete:N[3]||(N[3]=V=>t("delete",V))},null,8,["node","depth","expanded-keys","auto-expanded-keys","toggle-group","search-term","hierarchical","pending-deletes"]))),128))],2)],64))],10,cO)):(v(),k("div",{key:1,id:W.value||void 0,class:xe(y.value)},[f("div",SO,[f("div",CO,[f("h3",_O,[(v(!0),k(be,null,Le(B.value,(ee,V)=>(v(),k(be,{key:`leaf-${V}`},[ee.highlight?(v(),k("mark",AO,J(ee.text),1)):(v(),k("span",MO,J(ee.text),1))],64))),128))]),s.node.data?.type?(v(),k("span",DO,J(s.node.data.type),1)):H("",!0)]),f("div",EO,[S(Je,{size:"sm",variant:"secondary",class:xe(b.value),onClick:N[4]||(N[4]=Pt(ee=>t("delete",s.node),["stop"]))},{default:X(()=>[de(J(h.value?"Undo":"Delete"),1)]),_:1},8,["class"]),S(Je,{size:"sm",variant:"secondary",class:"shadow-none",onClick:N[5]||(N[5]=ee=>t("edit",s.node))},{default:X(()=>[...N[6]||(N[6]=[de(" Edit ",-1)])]),_:1})])]),f("div",TO,[s.node.data?.description?(v(),k("div",jO,[N[7]||(N[7]=f("p",{class:"text-xs font-medium text-gray-600 dark:text-zinc-200"}," Description ",-1)),f("p",OO,J(s.node.data.description),1)])):H("",!0),s.node.fullKey?(v(),k("div",PO,[S(oi,{value:s.node.fullKey||"",successMessage:"Dot notation copied",variant:"bare",class:xe(mc),title:"Copy dot notation"},{default:X(({copied:ee})=>[ee?(v(),k("svg",RO,[...N[9]||(N[9]=[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(v(),k("svg",$O,[...N[8]||(N[8]=[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"},null,-1)])]))]),_:1},8,["value"]),f("div",LO,[N[10]||(N[10]=f("p",{class:"text-xs font-medium text-gray-700 dark:text-zinc-100"}," Location (in Dot Notation) ",-1)),f("p",VO,[I.value.length>0?(v(!0),k(be,{key:0},Le(I.value,(ee,V)=>(v(),k(be,{key:`key-${V}`},[ee.highlight?(v(),k("mark",BO,J(ee.text),1)):(v(),k("span",IO,J(ee.text),1))],64))),128)):(v(),k("span",NO,""))])])])):H("",!0),f("div",FO,[S(oi,{value:s.node.data?.path||"",successMessage:"Path copied",variant:"bare",class:xe(mc),title:"Copy path"},{default:X(({copied:ee})=>[ee?(v(),k("svg",UO,[...N[12]||(N[12]=[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(v(),k("svg",zO,[...N[11]||(N[11]=[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"},null,-1)])]))]),_:1},8,["value"]),f("div",HO,[N[13]||(N[13]=f("p",{class:"text-xs font-medium text-gray-700 dark:text-zinc-100"}," File Path ",-1)),f("p",qO,[U.value.length>0?(v(!0),k(be,{key:0},Le(U.value,(ee,V)=>(v(),k(be,{key:`path-${V}`},[ee.highlight?(v(),k("mark",WO,J(ee.text),1)):(v(),k("span",KO,J(ee.text),1))],64))),128)):(v(),k("span",GO,""))])])]),(v(!0),k(be,null,Le(p.value,(ee,V)=>(v(),k("div",{key:`meta-${V}`,class:"flex items-start justify-between gap-3 border-t border-gray-200 pt-4 text-sm dark:border-zinc-700"},[f("div",JO,[f("p",QO,J(_(V)),1),f("pre",YO,J(R(ee)),1)])]))),128)),f("div",XO,[S(oi,{value:L.value,successMessage:"data_read() command copied",variant:"bare",class:xe([mc,"w-10"]),title:"Copy data_read() helper","aria-label":`Copy ${L.value}`},{default:X(({copied:ee})=>[ee?(v(),k("svg",eP,[...N[15]||(N[15]=[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(v(),k("svg",ZO,[...N[14]||(N[14]=[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8z"},null,-1)])]))]),_:1},8,["value","class","aria-label"]),f("div",tP,[N[16]||(N[16]=f("p",{class:"text-xs font-medium text-gray-700 dark:text-zinc-100"}," Usage ",-1)),f("p",{class:"mt-1 font-mono text-sm leading-relaxed text-gray-900 dark:text-zinc-100 truncate",title:L.value},J(L.value),9,sP)])])])],10,wO))])}}}),iP=F0(nP,[["__scopeId","data-v-20f9f092"]]),rP={key:0,class:"flex items-center justify-center h-96"},oP={key:1,class:"flex-1 p-10"},lP={key:2,class:"flex min-h-screen"},aP={class:"w-64 shrink-0 border-r border-gray-200 p-6 dark:border-gray-800 flex flex-col"},uP={class:"mb-4"},cP={class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},dP={class:"flex items-center gap-2"},fP={class:"text-xs text-gray-500 dark:text-gray-400 font-mono truncate"},hP={class:"space-y-1"},pP={key:0,class:"ml-6 mt-1 space-y-0.5"},gP=["href","onClick"],mP={class:"truncate"},vP={key:0,class:"shrink-0 rounded-full bg-gray-100 px-2 py-0.5 text-[10px] font-medium text-gray-500 dark:bg-gray-800 dark:text-gray-300"},yP={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},bP={class:"mt-auto pt-4 border-t border-gray-200 dark:border-gray-700"},kP={class:"text-center py-3"},xP={class:"flex-1 p-10"},wP={id:"overview"},SP={id:"basics"},CP={key:0},_P={key:1},AP={key:2},MP={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},DP={key:0,class:"space-y-5"},EP={class:"flex items-center gap-2"},TP={class:"flex-1 px-3 py-2 text-sm font-mono text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-md"},jP={key:0,class:"pt-6 border-t border-gray-200 dark:border-gray-700"},OP={id:"settings"},PP={key:0},$P={key:1},RP={key:2},LP={class:"text-sm text-gray-600 dark:text-gray-400 mb-6"},VP={id:"notebooks"},BP={class:"rounded-lg bg-gray-50 p-12 dark:bg-gray-800/50 text-center"},IP={id:"data"},NP={class:"mb-6 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},FP={class:"mb-6"},zP={key:0,class:"space-y-4"},UP={key:1,class:"mt-4 rounded-lg border border-red-200 bg-red-50 p-4 dark:border-red-500/40 dark:bg-red-900/20"},HP={class:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"},qP={class:"text-sm font-medium text-red-700 dark:text-red-200"},WP={class:"flex gap-2"},KP={class:"mt-3 list-disc space-y-1 pl-5 text-xs font-mono text-red-700 dark:text-red-200/90"},GP={key:2,class:"rounded-xl border border-dashed border-zinc-300 bg-white/70 p-10 text-center dark:border-zinc-700 dark:bg-zinc-900/40"},JP={class:"text-sm font-medium text-zinc-700 dark:text-zinc-200"},QP={id:"connections"},YP={id:"packages"},XP={key:0},ZP={key:1},e$={key:2},t$={id:"ai"},s$={key:0},n$={key:1},i$={key:2},r$={id:"quarto"},o$={key:0},l$={key:1},a$={class:"rounded-lg bg-gray-50 p-4 dark:bg-gray-800/50 space-y-3"},u$=["value"],c$={key:0,class:"rounded-md border border-gray-200 dark:border-gray-700 overflow-hidden"},d$={key:1,class:"text-sm text-gray-500 dark:text-gray-400 py-8 text-center"},f$={class:"mt-4 rounded-lg bg-gray-50 p-4 dark:bg-gray-800/50"},h$={class:"mt-4 rounded-lg border border-amber-200 bg-amber-50 p-4 dark:border-amber-800 dark:bg-amber-900/20"},p$={class:"flex items-start justify-between gap-4"},g$={id:"git"},m$={key:0},v$={key:1},y$={key:2},b$={id:"scaffold"},k$={key:0},x$={key:1},w$={key:2},S$={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},C$={id:"env"},_$={class:"space-y-6"},A$={key:0,class:"max-h-64 overflow-y-auto border border-gray-200 dark:border-gray-700 rounded-md"},M$=["onClick","onMouseenter"],D$={class:"flex items-start justify-between gap-2"},E$={class:"flex-1 min-w-0"},T$={class:"text-sm font-mono font-medium text-gray-900 dark:text-gray-100"},j$={key:0,class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5 line-clamp-1"},O$={key:1,class:"text-xs text-gray-500 dark:text-gray-500 mt-0.5"},P$={class:"text-xs text-gray-500 dark:text-gray-500 font-mono shrink-0"},$$={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},R$={key:1,class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},L$={class:"relative"},V$={class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},B$={class:"space-y-4 text-left"},I$={class:"flex items-start gap-3"},N$={class:"flex items-start gap-3"},F$={key:0,class:"mt-4"},z$={class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},U$={class:"font-mono font-bold"},H$={__name:"ProjectDetailView",setup(s){const e=Br(),t=rl(),n=lu(),i=Y(null),r=Y(!0),o=Y(null),l=Y("overview"),a=["overview","basics","settings","quarto","notebooks","connections","data","packages","ai","git","scaffold","env"],c=Y(null),u=Y(""),d=Y(new Set),h=Y(!1),p=Y(null),y=Y(!1),b=Y(null),x=Y(!1),g=Y(new Set),j=Y(!1),B=Y(null),U=Y(null),I=Y({}),L=Y(!1),_=Y(null),R=Y(new Set),W=Y(!1),ce=Y(!1),ne=Y(!1),N=Y([]),le=Y({}),ee=Y(null),V=Y(null),G=Y(!1),Q=Y(!1),ae=Y({html:{format:"html",embed_resources:!0,theme:"default",toc:!0,toc_depth:3,code_fold:!1,code_tools:!1,highlight_style:"github"},revealjs:{format:"revealjs",theme:"default",incremental:!1,slide_number:!0,transition:"slide",background_transition:"fade",controls:!0,progress:!0,center:!0,highlight_style:"github"}}),me=Y({initialize:!0,user_name:"",user_email:"",hooks:{ai_sync:!1,data_security:!1,check_sensitive_dirs:!1}}),$e=Y(!1),Re=Y(null),Oe=Y(!1),Ue=Y(!1);Y([]),Y([]),Y([]),Y(!1);const ot=Y([]),st=Y([]),Xe=Y(null),re=Y(null),Z=Y(!1),K=Y([]),C=Y({use_renv:!1,default_packages:[]}),ie=Y(!1),A=Y(null),$=Y(!1),q=Y(!1),oe=Y(!1),te=Y("untrack"),se=Y(""),ye=Y(""),D=Y([]),T=Y(!1),P=Y(-1),ue=Y({name:"",source:"cran",auto_attach:!0}),ge=Y({}),we=Y({}),Ee=Y(""),Ie=Y(!1),Ye=Y(null),pe=Y(!1),gt=Y(!1),Mt=Y("grouped"),Ot=Y(!1),Ze=Y({enabled:!1,canonical_file:"CLAUDE.md",canonical_content:"",assistants:[]}),Xt=Y(!1),Bt=Y(null),mt=Y(!1),wt=Y(!1),We=Y(!1),vt=Y({file:"CLAUDE.md",exists:!0}),Ji=F(()=>Object.keys(ge.value||{}).length),Qi=F(()=>{const w=i.value?.name||"Untitled",m=i.value?.path||"",O=I.value?.author?.name||B.value?.author?.name||i.value?.author||"";return{name:w,path:m,author:O}}),wu=F(()=>i.value?.type||B.value?.project_type||"Not set"),Su=F(()=>I.value?.scaffold?.notebook_format||B.value?.scaffold?.notebook_format||"quarto"),Yi=w=>w?w.charAt(0).toUpperCase()+w.slice(1):"";F(()=>{if(!Ze.value.enabled)return"Disabled";const w=Array.isArray(Ze.value.assistants)?Ze.value.assistants:[],m=w.length?w.map(Yi).join(", "):"Enabled",O=Ze.value.canonical_file||"CLAUDE.md";return`${m}  ${O}`});const Es={ai_sync:"AI sync",data_security:"Secret scan",check_sensitive_dirs:"Sensitive dirs"},Ur=F(()=>{const w=me.value?.hooks||{};return Object.entries(w).filter(([,m])=>!!m).map(([m])=>Es[m]||m)});F(()=>{const w=me.value.initialize?"Auto-initialize repositories":"Manual initialization";return Ur.value.length?`${w}  ${Ur.value.join(", ")}`:w});const yi=F(()=>C.value?.default_packages?.length||0);F(()=>{const w=C.value?.use_renv?"renv enabled":"renv disabled";return yi.value>0?`${yi.value} package${yi.value===1?"":"s"}  ${w}`:`No default packages  ${w}`}),F(()=>Ji.value>0?`${Ji.value} variable${Ji.value===1?"":"s"}`:"No variables defined"),Pe(ot,w=>{const m=Xe.value,O=w.some(ke=>ke.name===m);if(w.length===1){const ke=w[0];ke?.name&&ke.name!=="framework_db"&&(Xe.value=ke.name)}else m&&!O&&(Xe.value=null)},{deep:!0}),Pe(st,w=>{const m=re.value,O=w.some(ke=>ke.name===m);if(w.length===1){const ke=w[0];ke?.name&&(re.value=ke.name)}else m&&!O&&(re.value=null)},{deep:!0});const Hr=F(()=>{const w=Qi.value.name,m=Qi.value.path,O=Qi.value.author;wu.value;const ke=Su.value,Ve=Ze.value.enabled,ze=Ze.value.enabled?Array.isArray(Ze.value.assistants)?Ze.value.assistants.map(Yi).join(", "):"Enabled":"",_t=Ze.value.canonical_file||"CLAUDE.md",ft=me.value.initialize,Zt=Ur.value,xs=yi.value,er=C.value?.use_renv||!1,Du=Ji.value;return[{id:"basics",title:"Basics",section:"basics",content:`<div>${w}  ${O}</div><div class="text-sm text-gray-600 dark:text-gray-400 mt-1">${m}</div>`},{id:"structure",title:"Project Structure",section:"settings",content:`${Ht.value}  ${Object.keys(He.value).length} workspace  ${Object.keys(Tt.value).length} input  ${Object.keys(ln.value).length} output`},{id:"notebooks",title:"Notebooks & Scripts",section:"scaffold",content:ke},{id:"packages",title:"Packages",section:"packages",content:xs>0?`${xs} packages  renv ${er?"enabled":"disabled"}`:`renv: ${er?"enabled":"disabled"}`},{id:"env",title:".env",section:"env",content:Du>0?`${Du} variable${Du===1?"":"s"}`:"No variables defined"},{id:"ai",title:"AI Assistants",section:"ai",content:Ve?`<span class="text-green-600 dark:text-green-400">${ze}  ${_t}</span>`:'<span class="text-gray-600 dark:text-gray-400">Disabled</span>'},{id:"git",title:"Git & Hooks",section:"git",content:ft?`Auto-initialize repositories${Zt.length?`  ${Zt.join(", ")}`:""}`:"Manual initialization"}]}),ks=w=>["flex items-center gap-2 px-3 py-2 rounded-md text-sm transition",l.value===w?"bg-sky-50 text-sky-700 font-medium dark:bg-sky-900/20 dark:text-sky-400":"text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-800"],pl=()=>{const w=e.query.section;w&&a.includes(w)?(l.value=w,w==="env"&&(Zi(),Bs(()=>oh()))):l.value="overview"};Pe(l,w=>{t.replace({query:{...e.query,section:w}}),(w==="settings"||w==="basics"||w==="scaffold"||w==="connections")&&!B.value&&bl(),w==="connections"&&ot.value.length===0&&st.value.length===0&&d1(),w==="packages"&&K.value.length===0&&xl(),w==="git"&&!Oe.value&&Sl(),w==="ai"&&!mt.value&&wl(),w==="env"&&!pe.value&&Zi()}),Pe(()=>e.query.section,w=>{w&&a.includes(w)?(l.value=w,w==="env"&&(Bs(()=>oh()),pe.value||Zi())):w||(l.value="overview")});let Hn=!1,qn=!1;Pe(()=>Ze.value.canonical_file,(w,m)=>{Hn||mt.value&&(!w||w===m||y1(w))}),Pe(ge,w=>{qn||console.log("[envVariables watcher] Value changed (not suppressed)")},{deep:!0}),Pe(we,w=>{qn||console.log("[envGroups watcher] Value changed (not suppressed)")},{deep:!0}),Pe(Ee,w=>{qn||console.log("[envRawContent watcher] Value changed (not suppressed)")});let Wn=null;Pe(ye,()=>{Wn&&clearTimeout(Wn),Wn=setTimeout(()=>{f1()},300)});const bi=(w="")=>w.split(/[._-]/).filter(Boolean).map(m=>m.charAt(0).toUpperCase()+m.slice(1)).join(" "),Cn=w=>JSON.parse(JSON.stringify(w)),gl=w=>Array.isArray(w)?w.map((m,O)=>[String(O),m]):Object.entries(w),qr=(w,m="",O=0)=>!w||typeof w!="object"?[]:gl(w).reduce((ke,[Ve,ze])=>{if(ze==null)return ke;const _t=m?`${m}.${Ve}`:Ve;if(typeof ze=="object"&&!Array.isArray(ze)&&ze.path)return ke.push({type:"leaf",name:Ve,displayName:bi(Ve),fullKey:_t,data:ze,leafCount:1,depth:O}),ke;if(typeof ze=="object"){const ft=qr(ze,_t,O+1);if(ft.length>0){const Zt=ft.reduce((xs,er)=>xs+(er.leafCount||0),0);ke.push({type:"group",name:Ve,displayName:bi(Ve),fullKey:_t,children:ft,leafCount:Zt,depth:O})}}return ke},[]),Wr=w=>w.slice().sort((m,O)=>m.displayName.localeCompare(O.displayName,void 0,{sensitivity:"base",numeric:!0})).map(m=>m.type==="group"?{...m,children:Wr(m.children)}:m),Kr=(w,m)=>{if(!m)return!0;const O=m.toLowerCase(),ke=[w.displayName,w.name,w.fullKey];return w.type==="leaf"&&w.data?.path&&ke.push(w.data.path),ke.some(Ve=>Ve&&Ve.toLowerCase().includes(O))},Gr=(w,m)=>{if(!m)return{nodes:w,matchedKeys:new Set};const O=[],ke=new Set;return w.forEach(Ve=>{if(Ve.type==="leaf"){Kr(Ve,m)&&(O.push(Ve),ke.add(Ve.fullKey));return}const ze=Gr(Ve.children,m);if(Kr(Ve,m)||ze.nodes.length>0){const ft=ze.nodes,Zt=ft.reduce((xs,er)=>xs+(er.leafCount||0),0);O.push({...Ve,children:ft,leafCount:Zt||Ve.leafCount}),ke.add(Ve.fullKey),ze.matchedKeys.forEach(xs=>ke.add(xs))}}),{nodes:O,matchedKeys:ke}},Rs=F(()=>{const w=c.value;return!w||typeof w!="object"?[]:!Array.isArray(w)&&w.path?[{type:"leaf",name:w.name||"data",displayName:bi(w.name||"data"),fullKey:w.name||"data",data:w,leafCount:1,depth:0}]:Wr(qr(w))}),ds=F(()=>u.value.trim().toLowerCase()),on=F(()=>{const w=ds.value;return w?Gr(Rs.value,w):{nodes:Rs.value,matchedKeys:new Set}}),Jr=F(()=>on.value.nodes),ml=F(()=>on.value.matchedKeys),Xi=F(()=>ds.value.length>0),E=F(()=>Xi.value?[]:(Rs.value||[]).filter(w=>(w.depth||0)===0).map(w=>{const m=w.fullKey||w.name||"";return{anchorId:m?Kb(m):null,label:w.displayName||bi(w.name||m||"data source"),count:w.leafCount||(w.type==="leaf"?1:0),nodeKey:m}}).filter(w=>w.anchorId&&w.label)),M=F(()=>g.value.size>0),z=F(()=>g.value.size),he=F(()=>Array.from(g.value)),Ne=w=>{let m=0;return w.forEach(O=>{m=Math.max(m,O.depth||0),O.type==="group"&&O.children&&(m=Math.max(m,Ne(O.children)))}),m},ve=F(()=>Ne(Rs.value)),De=F(()=>ve.value>2),He=F(()=>{const w=I.value.directories||{},m={},O=["functions","notebooks","scripts"];return Object.keys(w).forEach(ke=>{O.includes(ke)&&(m[ke]=w[ke])}),m}),Tt=F(()=>{const w=I.value.directories||{},m={};return Object.keys(w).forEach(O=>{(O.startsWith("inputs_")||O.includes("_raw")||O.includes("_intermediate")||O.includes("_final"))&&(m[O]=w[O])}),m}),ln=F(()=>{const w=I.value.directories||{},m={};return Object.keys(w).forEach(O=>{(O.startsWith("outputs_")||O.includes("_figures")||O.includes("_tables")||O.includes("_models")||O.includes("_reports")||O==="scratch")&&!O.startsWith("inputs_")&&O!=="cache"&&(m[O]=w[O])}),m});F(()=>(I.value.extra_directories||[]).filter(m=>m.type==="input")),F(()=>(I.value.extra_directories||[]).filter(m=>m.type==="output")),F(()=>(I.value.extra_directories||[]).filter(m=>m.type==="workspace"));const Ht=F(()=>{const w=i.value?.type;return w?{project:"Standard Project Structure",project_sensitive:"Privacy Sensitive Project Structure",presentation:"Presentation Structure",course:"Course Structure"}[w]||w:"Standard Project Structure"}),vl=F(()=>{if(!B.value?.directories)return{};const w={},m=B.value.directories||{},O=U.value?.project_types?.[i.value.type]?.directories||{};return Object.keys(O).forEach(ke=>{w[ke]=ke in m}),B.value.extra_directories&&B.value.extra_directories.forEach(ke=>{w[ke.key]=!0}),w}),yl=F(()=>te.value==="untrack"?!0:te.value==="delete"?se.value===i.value?.name:!1),Qb=(w,m,O)=>{const ke=m.split(".").filter(Boolean);if(ke.length===0)return null;const Ve=Cn(w||{});let ze=Ve;for(let _t=0;_t<ke.length-1;_t++){const ft=ke[_t];(!ze[ft]||typeof ze[ft]!="object"||Array.isArray(ze[ft]))&&(ze[ft]={}),ze=ze[ft]}return ze[ke[ke.length-1]]=Cn(O),Ve},Yb=(w,m)=>{if(!w||!m)return null;const O=m.split(".").filter(Boolean);if(O.length===0)return null;let ke=w;for(let Ve=0;Ve<O.length;Ve++){const ze=O[Ve];if(!ke||typeof ke!="object"||!(ze in ke))return null;ke=ke[ze]}return ke},sh=w=>{const m=w.split(".").filter(Boolean);if(m.length<=1)return;const O=new Set(d.value);let ke="";for(let Ve=0;Ve<m.length-1;Ve++)ke=ke?`${ke}.${m[Ve]}`:m[Ve],O.add(ke);d.value=O},Xb=async(w,m)=>{if(!w)return;if(m){sh(m);const ke=new Set(d.value);ke.add(m),d.value=ke}await Bs();const O=document.getElementById(w);O&&O.scrollIntoView({behavior:"smooth",block:"start"})},nh=async w=>{const m=await fetch(`/api/project/${e.params.id}/data`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:w})}),O=await m.json();if(!m.ok||O.error)throw new Error(O.error||"Failed to save data catalog")},Zb=w=>{w&&(x.value=!1,p.value={fullKey:w.fullKey,name:w.name,data:Cn(w.data||{})},b.value=null,h.value=!0)},e1=()=>{x.value=!0,p.value={fullKey:"",data:{}},b.value=null,h.value=!0},t1=w=>{h.value=w,w||(p.value=null,b.value=null,y.value=!1,x.value=!1)},s1=async w=>{if(!w||!w.fullKey||!w.data){b.value=w?.error||"Invalid data entry payload";return}const m=w.fullKey.trim(),O=!!w.isNew;if(!m){b.value="Dot notation key is required";return}if(O&&Yb(c.value,m)){b.value="A data source with this key already exists";return}const ke=Cn(c.value),Ve=Qb(c.value,m,w.data);if(!Ve){b.value="Unable to write data entry to catalog";return}c.value=Ve,y.value=!0,b.value=null;try{if(await nh(Ve),sh(m),n.success(O?"Data Source Added":"Data Catalog Updated",O?"Data entry created successfully":"Data entry saved successfully"),h.value=!1,p.value=null,x.value=!1,g.value.has(m)){const ze=new Set(g.value);ze.delete(m),g.value=ze}}catch(ze){c.value=ke,b.value=ze.message||"Failed to save data catalog",n.error("Save Failed",ze.message||"Failed to save data catalog")}finally{y.value=!1}},n1=(w,m)=>{if(!w||!m)return null;const O=m.split(".").filter(Boolean);if(O.length===0)return null;const ke=Cn(w),Ve=[];let ze=ke;for(let ft=0;ft<O.length;ft++){const Zt=O[ft];if(!ze||typeof ze!="object"||!(Zt in ze))return null;Ve.push({parent:ze,key:Zt}),ze=ze[Zt]}const _t=Ve.pop();if(!_t)return null;delete _t.parent[_t.key];for(let ft=Ve.length-1;ft>=0;ft--){const{parent:Zt,key:xs}=Ve[ft];Zt[xs]&&typeof Zt[xs]=="object"&&!Array.isArray(Zt[xs])&&Object.keys(Zt[xs]).length===0&&delete Zt[xs]}return ke},i1=async()=>{if(!M.value)return;j.value=!0;const w=Cn(c.value);let m=Cn(w);for(const O of g.value){const ke=n1(m,O);if(!ke){n.error("Delete Failed",`Unable to locate ${O} in catalog`),j.value=!1;return}m=ke}try{await nh(m),c.value=m,n.success("Data Catalog Updated","Staged deletions have been saved"),g.value=new Set}catch(O){n.error("Delete Failed",O.message||"Failed to save catalog changes")}finally{j.value=!1}},r1=w=>{if(!w||!w.fullKey)return;const m=new Set(g.value);m.has(w.fullKey)?m.delete(w.fullKey):m.add(w.fullKey),g.value=m},o1=()=>{g.value=new Set},l1=w=>{const m=new Set(d.value);m.has(w)?m.delete(w):m.add(w),d.value=m},ih=async()=>{r.value=!0,o.value=null;try{const m=await(await fetch(`/api/project/${e.params.id}`)).json();m.error?o.value=m.error:i.value=m}catch(w){o.value="Failed to load project: "+w.message}finally{r.value=!1}},rh=async()=>{try{const m=await(await fetch(`/api/project/${e.params.id}/data`)).json();m.error||(c.value=m.data||m)}catch(w){console.error("Failed to load data catalog:",w)}},a1=(w={})=>{const m=w.databases||{},O=w.storage_buckets||{};return!!(Object.keys(m).length||Object.keys(O).length||w.default_database||w.default_storage_bucket)},Cu=(w={})=>{const m=eh(w||{});ot.value=m.databaseConnections,st.value=m.s3Connections,Xe.value=m.defaultDatabase,re.value=m.defaultStorageBucket},bl=async()=>{L.value=!0,_.value=null;try{const[w,m]=await Promise.all([fetch(`/api/project/${e.params.id}/settings`),fetch("/api/settings/catalog")]),O=await w.json(),ke=await m.json();if(U.value=ke,O.error)_.value=O.error;else{console.log("[DEBUG] Loaded project settings:",O.settings),console.log("[DEBUG] extra_directories:",O.settings.extra_directories),B.value=O.settings;const Ve=hj(O.settings,U.value?.project_types?.[O.settings?.type||i.value.type]?.directories||{});I.value={...JSON.parse(JSON.stringify(O.settings)),directories:Ve.directories,render_dirs:Ve.render_dirs,extra_directories:Ve.extra_directories,enabled:Ve.enabled},mh(I.value.quarto),I.value.scaffold||(I.value.scaffold={notebook_format:"quarto",positron:!1}),O.settings?.connections&&Cu(O.settings.connections),O.settings?.quarto&&mh(O.settings.quarto)}}catch(w){_.value="Failed to load settings: "+w.message}finally{L.value=!1}},u1=async()=>{switch(l.value){case"author":case"settings":await kl();break;case"packages":await lh();break;case"scaffold":await kl();break;case"git":await ph();break;case"connections":await ah();break;case"ai":await hh();break;case"quarto":await vh();break;case"env":await _u();break;case"overview":case"notebooks":case"data":n.info("No Changes to Save","This section has no editable settings");break;default:n.info("No Changes to Save","This section has no editable settings")}},kl=async()=>{console.log("[DEBUG] saveSettings called! Stack trace:",new Error().stack),W.value=!0;try{const w=(I.value.extra_directories||[]).filter(_t=>R.value.has(_t._id));if(w.length>0){const ft=await(await fetch(`/api/project/${e.params.id}/directories`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({directories:w})})).json();if(!ft.success){n.error("Directory Creation Failed",ft.error||"Failed to create directories"),W.value=!1;return}R.value=new Set}const m=U.value?.project_types?.[i.value.type]?.directories||{},O=qb({catalogDirs:m,directories:I.value.directories||{},render_dirs:I.value.render_dirs||{},enabled:I.value.enabled||{},extra_directories:I.value.extra_directories||[]}),ke={...I.value,directories:O.directories,render_dirs:O.render_dirs,enabled:O.enabled,extra_directories:O.extra_directories,quarto:ae.value};console.log("[DEBUG] Saving settings with extra_directories:",ke.extra_directories);const ze=await(await fetch(`/api/project/${e.params.id}/settings`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ke)})).json();if(ze.success){const _t=w.length>0?`Settings updated and ${w.length} director${w.length===1?"y":"ies"} created`:"Project settings have been updated";n.success("Settings Saved",_t),B.value=JSON.parse(JSON.stringify(I.value)),await bl()}else n.error("Save Failed",ze.error||"Failed to save settings")}catch(w){n.error("Save Failed",w.message)}finally{W.value=!1}},c1=w=>{w&&Xb(w.anchorId,w.nodeKey)},oh=()=>{const w=document.getElementById("env");w&&w.scrollIntoView({behavior:"smooth",block:"start"})},d1=async()=>{B.value?.connections&&Cu(B.value.connections);try{const m=await(await fetch(`/api/project/${e.params.id}/connections`)).json();m.error?console.error("Failed to load connections:",m.error):a1(m)&&(Cu(m),B.value&&(B.value.connections=m))}catch(w){console.error("Failed to load connections:",w.message)}},xl=async()=>{ie.value=!0,A.value=null;try{const m=await(await fetch(`/api/project/${e.params.id}/packages`)).json();if(m.error)A.value=m.error;else{const O=gj(m);K.value=JSON.parse(JSON.stringify(O.default_packages||[])),C.value=O}}catch(w){A.value="Failed to load packages: "+w.message}finally{ie.value=!1}},lh=async()=>{$.value=!0;try{const m=await(await fetch(`/api/project/${e.params.id}/packages`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Wb(C.value))})).json();m.success?(n.success("Packages Saved","Package configuration has been updated"),await xl()):n.error("Save Failed",m.error||"Failed to save packages")}catch(w){n.error("Save Failed",w.message)}finally{$.value=!1}},ah=async()=>{Z.value=!0;try{const w=th({databaseConnections:ot.value,s3Connections:st.value,defaultDatabase:Xe.value,defaultStorageBucket:re.value}),O=await(await fetch(`/api/project/${e.params.id}/connections`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(w)})).json();O.success?(n.success("Connections Saved","Connection configuration has been updated"),B.value&&(B.value.connections=w)):n.error("Save Failed",O.error||"Failed to save connections")}catch(w){n.error("Save Failed",w.message)}finally{Z.value=!1}},f1=async()=>{if(ye.value.length<2){D.value=[],P.value=-1;return}T.value=!0;try{const m=await(await fetch(`/api/packages/search?q=${encodeURIComponent(ye.value)}`)).json();console.log("Package search results:",m),D.value=m.packages||[],P.value=D.value.length>0?0:-1}catch(w){console.error("Failed to search packages:",w),D.value=[],P.value=-1}finally{T.value=!1}},h1=w=>{D.value.length!==0&&(w.key==="ArrowDown"?(w.preventDefault(),P.value=Math.min(P.value+1,D.value.length-1)):w.key==="ArrowUp"?(w.preventDefault(),P.value=Math.max(P.value-1,0)):w.key==="Enter"&&P.value>=0?(w.preventDefault(),uh(D.value[P.value])):w.key==="Escape"&&(D.value=[],P.value=-1))},uh=w=>{ue.value.name=w.name,ue.value.source=w.source,ye.value="",D.value=[],P.value=-1},p1=()=>{ue.value.name.trim()&&(K.value.push({name:ue.value.name.trim(),source:ue.value.source,auto_attach:ue.value.auto_attach}),q.value=!1,n.success("Package Added",`${ue.value.name} added to package list`))},g1=()=>{oe.value=!1,te.value="untrack",se.value=""},m1=async()=>{if(!yl.value){console.log("[DELETE] Cannot delete - canDelete is false");return}console.log("[DELETE] Starting delete with option:",te.value),console.log("[DELETE] Project ID:",e.params.id);try{const w=te.value==="delete"?`/api/projects/${e.params.id}/delete`:`/api/projects/${e.params.id}/untrack`;console.log("[DELETE] Calling endpoint:",w);const m=await fetch(w,{method:"POST",headers:{"Content-Type":"application/json"}});if(console.log("[DELETE] Response status:",m.status),!m.ok){const Ve=await m.json();throw console.error("[DELETE] Error response:",Ve),new Error(Ve.message||"Failed to delete project")}const O=await m.json();console.log("[DELETE] Success result:",O);const ke=te.value==="delete"?"deleted":"removed from Framework";n.success("Project Removed",`${i.value.name} has been ${ke}`),setTimeout(()=>{window.location.href="/projects"},500)}catch(w){console.error("[DELETE] Failed to delete project:",w),n.error("Delete Failed",w.message||"Could not delete project")}},v1=w=>w?Array.isArray(w)?Array.from(new Set(w.map(m=>String(m)))):typeof w=="string"?[w]:[]:[],ch=async w=>{let m=`/api/project/${e.params.id}/ai`;if(w){const ke=new URLSearchParams;ke.set("canonical_file",w),m+=`?${ke.toString()}`}const O=await fetch(m);if(!O.ok)throw new Error("Failed to load AI settings");return O.json()},wl=async()=>{Xt.value=!0,Bt.value=null;try{const w=await ch();if(w.error){Bt.value=w.error,mt.value=!1;return}const m=w.ai||{};Hn=!0;const O={enabled:!!m.enabled,canonical_file:m.canonical_file||"CLAUDE.md",canonical_content:m.canonical_content||"",assistants:v1(m.assistants)};Ze.value=O,vt.value={file:m.content_file||m.canonical_file||"CLAUDE.md",exists:!!m.content_exists},Hn=!1,await fh(O.canonical_file,{preserveContentIfMissing:!1}),mt.value=!0}catch(w){Bt.value=w.message||"Failed to load AI settings",mt.value=!1}finally{Hn=!1,Xt.value=!1,We.value=!1}},Sl=async()=>{$e.value=!0,Re.value=null;try{const m=await(await fetch(`/api/project/${e.params.id}/git`)).json();if(m.error){Re.value=m.error,Oe.value=!1;return}const O=m.git||{};me.value={initialize:O.initialize!==void 0?!!O.initialize:!0,user_name:O.user_name||"",user_email:O.user_email||"",hooks:{ai_sync:O.hooks?.ai_sync||!1,data_security:O.hooks?.data_security||!1,check_sensitive_dirs:O.hooks?.check_sensitive_dirs||!1}},Oe.value=!0}catch(w){Re.value=w.message||"Failed to load Git settings",Oe.value=!1}finally{$e.value=!1}},dh=F({get(){return Xf({useGit:me.value.initialize,gitHooks:me.value.hooks,git:me.value})},set(w){const m={...me.value,hooks:{...me.value.hooks||{}}};Zf({gitTarget:m,gitHooksTarget:m.hooks,setUseGit:O=>{m.initialize=O}},w),me.value=m}}),fh=async(w,{preserveContentIfMissing:m=!0}={})=>{if(w){We.value=!0;try{const O=await ch(w);if(O.error){n.error("Load Failed",O.error);return}const ke=O.ai||{};vt.value={file:ke.content_file||w,exists:!!ke.content_exists},(ke.content_exists||!m)&&(Ze.value.canonical_content=ke.canonical_content||"")}catch(O){n.error("Load Failed",O.message||"Unable to load canonical file")}finally{We.value=!1}}},y1=w=>{const m=typeof w=="string"&&w.length>0?w:"CLAUDE.md";fh(m,{preserveContentIfMissing:!0})},hh=async()=>{wt.value=!0;try{const m=await(await fetch(`/api/project/${e.params.id}/ai`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:Ze.value.enabled,canonical_file:Ze.value.canonical_file,assistants:Ze.value.assistants,canonical_content:Ze.value.canonical_content})})).json();m.success?(n.success("AI Settings Saved","AI assistant configuration has been updated"),mt.value=!1,await wl()):n.error("Save Failed",m.error||"Failed to save AI settings")}catch(w){n.error("Save Failed",w.message||"Failed to save AI settings")}finally{wt.value=!1}},ph=async()=>{Ue.value=!0;try{const m=await(await fetch(`/api/project/${e.params.id}/git`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({initialize:me.value.initialize,user_name:me.value.user_name,user_email:me.value.user_email,hooks:me.value.hooks})})).json();m.success?(n.success("Git Settings Saved","Repository configuration has been updated"),Oe.value=!1,await Sl()):n.error("Save Failed",m.error||"Failed to save Git settings")}catch(w){n.error("Save Failed",w.message||"Failed to save Git settings")}finally{Ue.value=!1}},Zi=async()=>{if(Ie.value||pe.value){console.log("[loadEnv] Blocked: already loading or loaded",{loading:Ie.value,loaded:pe.value});return}Ie.value=!0,Ye.value=null;try{const m=await(await fetch(`/api/project/${e.params.id}/env`)).json();m.error?(Ye.value=m.error,pe.value=!1):(qn=!0,console.log("[loadEnv] Updating env values with suppressEnvWatch = true"),pe.value=!0,ge.value=m.variables||{},we.value=m.groups||{},Ee.value=m.raw_content||"",qn=!1,console.log("[loadEnv] Env values updated, suppressEnvWatch = false"))}catch(w){Ye.value="Failed to load .env: "+w.message,pe.value=!1}finally{qn=!1,Ie.value=!1}},_u=async()=>{gt.value=!0;try{const w=Mt.value==="raw"?{raw_content:Ee.value}:{variables:ge.value,regroup:Ot.value},O=await(await fetch(`/api/project/${e.params.id}/env`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(w)})).json();O.success?(n.success(".env Saved","Environment variables have been updated"),pe.value=!1,await Zi()):n.error("Save Failed",O.error||"Failed to save .env")}catch(w){n.error("Save Failed",w.message)}finally{gt.value=!1}},Au=F(()=>{const w=N.value||[];return w.length?w.find(m=>m.key===V.value)||w[0]:null}),gh=F({get:()=>Au.value?.contents||"",set:w=>{const m=Au.value;m&&(m.contents=w)}}),mh=w=>{const m=w?.quarto;m&&(ae.value={html:{format:"html",embed_resources:m.html?.embed_resources??!0,theme:m.html?.theme??"default",toc:m.html?.toc??!0,toc_depth:m.html?.toc_depth??3,code_fold:m.html?.code_fold??!1,code_tools:m.html?.code_tools??!1,highlight_style:m.html?.highlight_style??"github"},revealjs:{format:"revealjs",theme:m.revealjs?.theme??"default",incremental:m.revealjs?.incremental??!1,slide_number:m.revealjs?.slide_number??!0,transition:m.revealjs?.transition??"slide",background_transition:m.revealjs?.background_transition??"fade",controls:m.revealjs?.controls??!0,progress:m.revealjs?.progress??!0,center:m.revealjs?.center??!0,highlight_style:m.revealjs?.highlight_style??"github"}},ee.value=JSON.parse(JSON.stringify(ae.value)))},Mu=async()=>{G.value=!0;try{const m=await(await fetch(`/api/project/${e.params.id}/quarto/files`)).json();if(m.error)throw new Error(m.error);N.value=m.files||[],le.value={};for(const O of N.value)le.value[O.key]=O.contents||"";N.value.length>0&&!V.value&&(V.value=N.value[0].key)}catch(w){n.error("Failed to load Quarto configs",w.message)}finally{G.value=!1}},vh=async()=>{let w=!1,m=!1,O=!1;const ke=N.value.filter(ze=>{const _t=le.value[ze.key]||"";return ze.contents!==_t});if(ke.length>0){O=!0,Q.value=!0;try{const _t=await(await fetch(`/api/project/${e.params.id}/quarto/files`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({files:ke})})).json();if(_t.success){w=!0;for(const ft of ke)le.value[ft.key]=ft.contents}else{n.error("Save Failed",_t.error||"Failed to save Quarto files"),Q.value=!1;return}}catch(ze){n.error("Save Failed",ze.message),Q.value=!1;return}Q.value=!1}if(ee.value&&JSON.stringify(ae.value)!==JSON.stringify(ee.value)){O=!0,ne.value=!0;try{await kl(),m=!0,ee.value=JSON.parse(JSON.stringify(ae.value))}catch(ze){n.error("Save Failed",ze.message),ne.value=!1;return}ne.value=!1}O?w&&m?n.success("Quarto Saved","Files and defaults saved successfully"):w?n.success("Quarto Files Saved",`${ke.length} file(s) saved`):m&&n.success("Quarto Defaults Saved","Defaults saved to project settings"):n.info("No Changes","No changes detected in Quarto settings")},b1=async()=>{ce.value=!0;try{const m=await(await fetch(`/api/project/${e.params.id}/quarto/regenerate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({backup:!0})})).json();m.success?(n.success("Quarto Configs Regenerated",m.message+(m.backup_location?`

Backup: ${m.backup_location}`:"")),await Mu()):n.error("Regeneration Failed",m.error||"Failed to regenerate Quarto configurations")}catch(w){n.error("Regeneration Failed",w.message)}finally{ce.value=!1}},k1=async()=>{const w=[];I.value&&Object.keys(I.value).length>0&&w.push(kl()),(ot.value?.length>0||st.value?.length>0)&&w.push(ah()),K.value?.length>0&&w.push(lh()),me.value&&w.push(ph()),Ze.value&&w.push(hh()),envContents.value!==null&&w.push(_u()),N.value?.length>0&&w.push(vh()),w.length>0&&await Promise.all(w)},yh=w=>{(w.metaKey||w.ctrlKey)&&w.key==="s"&&(w.preventDefault(),k1())};return as(()=>{pl(),ih(),rh(),bl(),Mu(),xl(),wl(),Sl(),Zi(),window.addEventListener("keydown",yh)}),Lr(()=>{window.removeEventListener("keydown",yh)}),Pe(()=>e.params.id,(w,m)=>{w&&w!==m&&(l.value="overview",i.value=null,B.value=null,I.value={},_.value=null,L.value=!1,K.value=[],C.value={use_renv:!1,default_packages:[]},A.value=null,ie.value=!1,c.value=null,g.value=new Set,b.value=null,p.value=null,ge.value={},we.value={},Ee.value="",Ye.value=null,Ie.value=!1,Mt.value="grouped",Ot.value=!1,me.value={initialize:!0,user_name:"",user_email:"",hooks:{ai_sync:!1,data_security:!1,check_sensitive_dirs:!1}},Oe.value=!1,Re.value=null,$e.value=!1,Hn=!0,Ze.value={enabled:!1,canonical_file:"CLAUDE.md",canonical_content:"",assistants:[]},vt.value={file:"CLAUDE.md",exists:!0},mt.value=!1,Bt.value=null,Xt.value=!1,We.value=!1,Hn=!1,pe.value=!1,Ye.value=null,Ie.value=!1,c.value=null,N.value=[],V.value=null,pl(),ih(),rh(),bl(),Mu(),xl(),wl(),Sl(),Zi())}),(w,m)=>(v(),k("div",null,[r.value?(v(),k("div",rP,[...m[51]||(m[51]=[f("div",{class:"text-zinc-600 dark:text-zinc-400"},"Loading project...",-1)])])):o.value?(v(),k("div",oP,[S(js,{type:"error",title:"Error Loading Project",description:o.value},null,8,["description"])])):i.value?(v(),k("div",lP,[f("nav",aP,[f("div",uP,[f("h2",cP,J(i.value.name),1),f("div",dP,[f("span",fP,J(i.value.path),1),S(oi,{value:i.value.path,successMessage:"Path copied",class:"shrink-0"},null,8,["value"])])]),f("div",hP,[f("a",{href:"#overview",onClick:m[0]||(m[0]=Pt(O=>l.value="overview",["prevent"])),class:xe(ks("overview"))},[S(ct(ru),{class:"h-4 w-4"}),m[52]||(m[52]=de(" Overview ",-1))],2),S(qa,null,{default:X(()=>[...m[53]||(m[53]=[de("Settings",-1)])]),_:1}),f("a",{href:"#basics",onClick:m[1]||(m[1]=Pt(O=>l.value="basics",["prevent"])),class:xe(ks("basics"))},[S(ct(tf),{class:"h-4 w-4"}),m[54]||(m[54]=de(" Basics ",-1))],2),f("a",{href:"#settings",onClick:m[2]||(m[2]=Pt(O=>l.value="settings",["prevent"])),class:xe(ks("settings"))},[S(ct(Ca),{class:"h-4 w-4"}),m[55]||(m[55]=de(" Project Structure ",-1))],2),f("a",{href:"#packages",onClick:m[3]||(m[3]=Pt(O=>l.value="packages",["prevent"])),class:xe(ks("packages"))},[S(ct(sf),{class:"h-4 w-4"}),m[56]||(m[56]=de(" Packages ",-1))],2),f("a",{href:"#ai",onClick:m[4]||(m[4]=Pt(O=>l.value="ai",["prevent"])),class:xe(ks("ai"))},[S(ct(f2),{class:"h-4 w-4"}),m[57]||(m[57]=de(" AI Assistants ",-1))],2),f("a",{href:"#quarto",onClick:m[5]||(m[5]=Pt(O=>l.value="quarto",["prevent"])),class:xe(ks("quarto"))},[S(ct(yr),{class:"h-4 w-4"}),m[58]||(m[58]=de(" Quarto ",-1))],2),f("a",{href:"#git",onClick:m[6]||(m[6]=Pt(O=>l.value="git",["prevent"])),class:xe(ks("git"))},[...m[59]||(m[59]=[f("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})],-1),de(" Git & Hooks ",-1)])],2),f("a",{href:"#connections",onClick:m[7]||(m[7]=Pt(O=>l.value="connections",["prevent"])),class:xe(ks("connections"))},[S(ct(nf),{class:"h-4 w-4"}),m[60]||(m[60]=de(" Connections ",-1))],2),f("a",{href:"#env",onClick:m[8]||(m[8]=Pt(O=>l.value="env",["prevent"])),class:xe(ks("env"))},[S(ct(ou),{class:"h-4 w-4"}),m[61]||(m[61]=de(" .env Defaults ",-1))],2),f("a",{href:"#scaffold",onClick:m[9]||(m[9]=Pt(O=>l.value="scaffold",["prevent"])),class:xe(ks("scaffold"))},[S(ct(i2),{class:"h-4 w-4"}),m[62]||(m[62]=de(" Scaffold Behavior ",-1))],2),S(qa,null,{default:X(()=>[...m[63]||(m[63]=[de("Project",-1)])]),_:1}),f("a",{href:"#data",onClick:m[10]||(m[10]=Pt(O=>l.value="data",["prevent"])),class:xe(ks("data"))},[S(ct(l2),{class:"h-4 w-4"}),m[64]||(m[64]=de(" Data ",-1))],2),l.value==="data"&&E.value.length?(v(),k("div",pP,[(v(!0),k(be,null,Le(E.value,O=>(v(),k("a",{key:O.anchorId,href:`#${O.anchorId}`,onClick:Pt(ke=>c1(O),["prevent"]),class:"flex items-center justify-between gap-2 rounded-md px-3 py-1 text-xs text-gray-600 transition hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-gray-800"},[f("span",mP,J(O.label),1),O.count?(v(),k("span",vP,J(O.count),1)):H("",!0)],8,gP))),128))])):H("",!0),f("a",{href:"#notebooks",onClick:m[11]||(m[11]=Pt(O=>l.value="notebooks",["prevent"])),class:xe(ks("notebooks"))},[S(ct(yr),{class:"h-4 w-4"}),m[65]||(m[65]=de(" Notebooks ",-1))],2)]),f("div",yP,[S(Je,{variant:"primary",onClick:u1,disabled:W.value||$.value||gt.value||wt.value||Ue.value||Z.value||Q.value||ne.value,class:"w-full"},{default:X(()=>[de(J(W.value||$.value||gt.value||wt.value||Ue.value||Z.value||Q.value||ne.value?"Saving...":"Save"),1)]),_:1},8,["disabled"])]),f("div",bP,[f("div",kP,[f("button",{onClick:m[12]||(m[12]=O=>oe.value=!0),class:"text-xs text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-400 transition"}," Delete Project ")])])]),f("div",xP,[qe(f("div",wP,[m[66]||(m[66]=f("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Overview",-1)),m[67]||(m[67]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Quick overview of your project settings. ",-1)),S(zf,{cards:Hr.value,onNavigate:m[13]||(m[13]=O=>l.value=O)},null,8,["cards"])],512),[[tt,l.value==="overview"]]),qe(f("div",SP,[L.value?(v(),k("div",CP,[...m[68]||(m[68]=[f("div",{class:"text-center py-12 text-zinc-500 dark:text-zinc-400"}," Loading settings... ",-1)])])):_.value?(v(),k("div",_P,[S(js,{type:"error",title:"Error Loading Settings",description:_.value},null,8,["description"])])):(v(),k("div",AP,[m[74]||(m[74]=f("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Basics",-1)),m[75]||(m[75]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Essential project settings. ",-1)),f("div",MP,[I.value.scaffold?(v(),k("div",DP,[S(Se,{modelValue:i.value.name,"onUpdate:modelValue":m[14]||(m[14]=O=>i.value.name=O),label:"Project Name",hint:"Changing this will rename the project directory"},null,8,["modelValue"]),f("div",null,[m[69]||(m[69]=f("label",{class:"block text-sm font-semibold text-gray-900 dark:text-white mb-2"}," Filesystem Location ",-1)),f("div",EP,[f("code",TP,J(i.value.path),1),S(oi,{value:i.value.path,successMessage:"Path copied"},null,8,["value"])])]),f("div",null,[m[71]||(m[71]=f("label",{class:"block text-sm font-semibold text-gray-900 dark:text-white mb-3"}," Supported Editors ",-1)),S(Rn,{modelValue:I.value.scaffold.positron,"onUpdate:modelValue":m[15]||(m[15]=O=>I.value.scaffold.positron=O),id:"support-positron-edit",description:"Creates .code-workspace file for Positron/VS Code users"},{default:X(()=>[...m[70]||(m[70]=[de(" Positron / VS Code ",-1)])]),_:1},8,["modelValue"]),m[72]||(m[72]=f("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-3"}," RStudio supported by default ",-1))]),S(ns,{modelValue:I.value.scaffold.notebook_format,"onUpdate:modelValue":m[16]||(m[16]=O=>I.value.scaffold.notebook_format=O),label:"Default Notebook Format",hint:"Format used when creating new notebooks"},{default:X(()=>[...m[73]||(m[73]=[f("option",{value:"quarto"},"Quarto (.qmd)",-1),f("option",{value:"rmarkdown"},"R Markdown (.Rmd)",-1)])]),_:1},8,["modelValue"]),I.value.author?(v(),k("div",jP,[S(Uf,{modelValue:I.value.author,"onUpdate:modelValue":m[17]||(m[17]=O=>I.value.author=O)},null,8,["modelValue"])])):H("",!0)])):H("",!0)])]))],512),[[tt,l.value==="basics"]]),qe(f("div",OP,[L.value?(v(),k("div",PP,[...m[76]||(m[76]=[f("div",{class:"text-center py-12 text-zinc-500 dark:text-zinc-400"}," Loading settings... ",-1)])])):_.value?(v(),k("div",$P,[S(js,{type:"error",title:"Error Loading Settings",description:_.value},null,8,["description"])])):B.value?(v(),k("div",RP,[m[79]||(m[79]=f("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Project Structure",-1)),f("p",LP,[m[77]||(m[77]=de(" This project uses the ",-1)),f("strong",null,J(Ht.value),1),m[78]||(m[78]=de(" structure. ",-1))]),S(js,{type:"info",title:"Append-Only Mode",description:"You can enable disabled directories and add new custom directories. Directories that are already enabled cannot be turned off to prevent accidental data loss.",class:"mb-6"}),S(Qf,{"project-type":i.value.type,directories:I.value.directories||{},"render-dirs":I.value.render_dirs||{},enabled:I.value.enabled||vl.value,"extra-directories":I.value.extra_directories||[],settings:I.value,gitignore:I.value.gitignore||"",catalog:U.value?.project_types?.[i.value.type]||{},"new-extra-ids":R.value,"allow-destruction":!1,"onUpdate:directories":m[18]||(m[18]=O=>I.value.directories=O),"onUpdate:renderDirs":m[19]||(m[19]=O=>I.value.render_dirs=O),"onUpdate:enabled":m[20]||(m[20]=O=>I.value.enabled=O),"onUpdate:extraDirectories":m[21]||(m[21]=O=>I.value.extra_directories=O),"onUpdate:gitignore":m[22]||(m[22]=O=>I.value.gitignore=O),"onUpdate:newExtraIds":m[23]||(m[23]=O=>R.value=O)},null,8,["project-type","directories","render-dirs","enabled","extra-directories","settings","gitignore","catalog","new-extra-ids"])])):H("",!0)],512),[[tt,l.value==="settings"]]),qe(f("div",VP,[m[81]||(m[81]=f("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Rendered Notebooks",-1)),m[82]||(m[82]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Browse and access your rendered Quarto/RMarkdown notebooks. ",-1)),f("div",BP,[S(ct(yr),{class:"h-12 w-12 mx-auto mb-4 text-gray-400"}),m[80]||(m[80]=f("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Notebook browser coming soon... ",-1))])],512),[[tt,l.value==="notebooks"]]),qe(f("div",IP,[f("div",NP,[m[84]||(m[84]=f("div",null,[f("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white"},"Data Catalog"),f("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Browse your project's data sources with copy commands. ")],-1)),S(Je,{variant:"primary",size:"sm",class:"inline-flex items-center gap-2",onClick:e1},{default:X(()=>[S(ct(d2),{class:"h-4 w-4"}),m[83]||(m[83]=de(" Add Data Source ",-1))]),_:1})]),f("div",FP,[S(Se,{modelValue:u.value,"onUpdate:modelValue":m[24]||(m[24]=O=>u.value=O),label:"Search data sources",placeholder:"Filter by name, prefix, or file path"},null,8,["modelValue"])]),Jr.value.length>0?(v(),k("div",zP,[(v(!0),k(be,null,Le(Jr.value,O=>(v(),Ae(iP,{key:O.fullKey,node:O,"expanded-keys":d.value,"auto-expanded-keys":ml.value,"toggle-group":l1,"search-term":u.value,hierarchical:De.value,"pending-deletes":g.value,onEdit:Zb,onDelete:r1},null,8,["node","expanded-keys","auto-expanded-keys","search-term","hierarchical","pending-deletes"]))),128))])):H("",!0),M.value?(v(),k("div",UP,[f("div",HP,[f("div",null,[f("p",qP,J(z.value)+" data source"+J(z.value===1?"":"s")+" marked for deletion. ",1),m[85]||(m[85]=f("p",{class:"text-xs text-red-600 dark:text-red-200/80"}," Changes will be applied when you save. ",-1))]),f("div",WP,[S(Je,{variant:"secondary",size:"sm",class:"shadow-none",disabled:j.value,onClick:o1},{default:X(()=>[...m[86]||(m[86]=[de(" Cancel ",-1)])]),_:1},8,["disabled"]),S(Je,{size:"sm",class:"bg-red-600 text-white hover:bg-red-500 focus-visible:outline-red-600 dark:bg-red-500 dark:hover:bg-red-400",disabled:j.value,onClick:i1},{default:X(()=>[de(J(j.value?"Saving":"Save Changes"),1)]),_:1},8,["disabled"])])]),f("ul",KP,[(v(!0),k(be,null,Le(he.value,O=>(v(),k("li",{key:O},J(O),1))),128))])])):Xi.value?(v(),k("div",GP,[f("p",JP,' No data sources match "'+J(u.value)+'". ',1),m[87]||(m[87]=f("p",{class:"mt-2 text-xs text-zinc-500 dark:text-zinc-400"}," Try adjusting your search terms or clearing the filter. ",-1))])):(v(),k(be,{key:3},[!M.value&&(!c.value||Object.keys(c.value||{}).length===0)?(v(),Ae(Ij,{key:0,title:"No Data Sources",description:"This project doesn't have any data sources defined in its settings",icon:"database"})):H("",!0)],64))],512),[[tt,l.value==="data"]]),S(uO,{mode:x.value?"create":"edit",modelValue:h.value,"onUpdate:modelValue":[m[25]||(m[25]=O=>h.value=O),t1],entry:p.value,saving:y.value,error:b.value,onSave:s1},null,8,["mode","modelValue","entry","saving","error"]),qe(f("div",QP,[m[88]||(m[88]=f("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Connections",-1)),m[89]||(m[89]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Database and storage connections for this project. ",-1)),S(Gf,{"database-connections":ot.value,"onUpdate:databaseConnections":m[26]||(m[26]=O=>ot.value=O),"s3-connections":st.value,"onUpdate:s3Connections":m[27]||(m[27]=O=>st.value=O),"default-database":Xe.value,"onUpdate:defaultDatabase":m[28]||(m[28]=O=>Xe.value=O),"default-storage-bucket":re.value,"onUpdate:defaultStorageBucket":m[29]||(m[29]=O=>re.value=O)},null,8,["database-connections","s3-connections","default-database","default-storage-bucket"])],512),[[tt,l.value==="connections"]]),qe(f("div",YP,[ie.value?(v(),k("div",XP,[...m[90]||(m[90]=[f("div",{class:"text-center py-12"},[f("div",{class:"text-sm text-gray-500 dark:text-gray-400"},"Loading packages...")],-1)])])):A.value?(v(),k("div",ZP,[S(js,{type:"error",title:"Error Loading Packages",description:A.value},null,8,["description"])])):(v(),k("div",e$,[m[91]||(m[91]=f("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Packages & Dependencies",-1)),m[92]||(m[92]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Configure package management and default packages for this project. ",-1)),S(Hf,{modelValue:C.value,"onUpdate:modelValue":m[30]||(m[30]=O=>C.value=O),"show-renv-toggle":!0,flush:!1},null,8,["modelValue"])]))],512),[[tt,l.value==="packages"]]),qe(f("div",t$,[Xt.value?(v(),k("div",s$,[...m[93]||(m[93]=[f("div",{class:"text-center py-12 text-sm text-gray-500 dark:text-gray-400"},"Loading AI settings...",-1)])])):Bt.value?(v(),k("div",n$,[S(js,{type:"error",title:"Error Loading AI Settings",description:Bt.value},null,8,["description"])])):(v(),k("div",i$,[m[94]||(m[94]=f("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"AI Assistants",-1)),m[95]||(m[95]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Framework maintains context files for selected assistants and keeps them in sync before commits. ",-1)),S(qf,{modelValue:Ze.value,"onUpdate:modelValue":m[31]||(m[31]=O=>Ze.value=O),flush:!1,"show-editor":!0,"editor-height":"400px","editor-disabled":We.value,"editor-loading":We.value},{"editor-alert":X(()=>[vt.value.exists?H("",!0):(v(),Ae(js,{key:0,type:"info",title:"New canonical file",description:`Saving copies the current instructions into ${Ze.value.canonical_file||"CLAUDE.md"}. The original file stays on disk; if AI sync hooks are enabled they mirror everything from the new canonical file.`,class:"mb-4"},null,8,["description"]))]),_:1},8,["modelValue","editor-disabled","editor-loading"])]))],512),[[tt,l.value==="ai"]]),qe(f("div",r$,[G.value?(v(),k("div",o$,[...m[96]||(m[96]=[f("div",{class:"text-center py-12 text-sm text-gray-500 dark:text-gray-400"},"Loading Quarto files...",-1)])])):(v(),k("div",l$,[m[100]||(m[100]=f("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Quarto",-1)),m[101]||(m[101]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Edit project _quarto.yml files and default rendering options. ",-1)),f("div",a$,[f("div",null,[m[97]||(m[97]=f("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Configuration File ",-1)),qe(f("select",{"onUpdate:modelValue":m[32]||(m[32]=O=>V.value=O),class:"w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm shadow-sm focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-200"},[(v(!0),k(be,null,Le(N.value,O=>(v(),k("option",{key:O.key,value:O.key},J(O.label)+"  "+J(O.path),9,u$))),128))],512),[[Pc,V.value]])]),Au.value?(v(),k("div",c$,[S(xu,{modelValue:gh.value,"onUpdate:modelValue":m[33]||(m[33]=O=>gh.value=O),language:"yaml","auto-grow":!0,class:"min-h-[300px] w-full"},null,8,["modelValue"])])):(v(),k("div",d$," No Quarto files detected for this project. "))]),f("div",f$,[m[98]||(m[98]=f("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-3"},"Quarto Defaults",-1)),S(Jf,{modelValue:ae.value,"onUpdate:modelValue":m[34]||(m[34]=O=>ae.value=O),flush:""},null,8,["modelValue"])]),f("div",h$,[f("div",p$,[m[99]||(m[99]=f("div",null,[f("h3",{class:"text-sm font-semibold text-amber-900 dark:text-amber-100 mb-1"},"Regenerate Configurations"),f("p",{class:"text-sm text-amber-800 dark:text-amber-200"},[de(" Overwrite all _quarto.yml files using current settings. Existing files are backed up to "),f("code",{class:"px-1 py-0.5 bg-amber-100 dark:bg-amber-800 rounded text-xs"},".quarto_backups/"),de(". ")])],-1)),S(Je,{variant:"secondary",size:"sm",onClick:b1,disabled:ce.value,class:"shrink-0"},{default:X(()=>[de(J(ce.value?"Regenerating...":"Regenerate"),1)]),_:1},8,["disabled"])])])]))],512),[[tt,l.value==="quarto"]]),qe(f("div",g$,[$e.value?(v(),k("div",m$,[...m[102]||(m[102]=[f("div",{class:"text-center py-12 text-sm text-gray-500 dark:text-gray-400"},"Loading git settings...",-1)])])):Re.value?(v(),k("div",v$,[S(js,{type:"error",title:"Error Loading Git Settings",description:Re.value},null,8,["description"])])):(v(),k("div",y$,[m[104]||(m[104]=f("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Git & Hooks",-1)),m[105]||(m[105]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Configure repository initialization, commit identity, git hooks, and security scanning. ",-1)),S(Wf,{modelValue:dh.value,"onUpdate:modelValue":m[35]||(m[35]=O=>dh.value=O)},{note:X(()=>[...m[103]||(m[103]=[de(" Project-specific .gitignore templates can be customized in Project Defaults. ",-1)])]),_:1},8,["modelValue"])]))],512),[[tt,l.value==="git"]]),qe(f("div",b$,[L.value?(v(),k("div",k$,[...m[106]||(m[106]=[f("div",{class:"text-center py-12 text-zinc-500 dark:text-zinc-400"}," Loading settings... ",-1)])])):_.value?(v(),k("div",x$,[S(js,{type:"error",title:"Error Loading Settings",description:_.value},null,8,["description"])])):(v(),k("div",w$,[m[107]||(m[107]=f("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Scaffold Behavior",-1)),m[108]||(m[108]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"},[de(" Automatic actions when "),f("code",{class:"px-1.5 py-0.5 bg-gray-200 dark:bg-gray-700 rounded text-xs"},"scaffold()"),de(" runs to initialize your project environment. ")],-1)),f("div",S$,[I.value.scaffold?(v(),Ae(Kf,{key:0,modelValue:I.value.scaffold,"onUpdate:modelValue":m[36]||(m[36]=O=>I.value.scaffold=O),flush:""},null,8,["modelValue"])):H("",!0)])]))],512),[[tt,l.value==="scaffold"]]),qe(f("div",C$,[m[109]||(m[109]=f("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Environment Variables",-1)),m[110]||(m[110]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Manage environment variables for this project (.env file). ",-1)),S(Yf,{loading:Ie.value,error:Ye.value,groups:we.value,variables:ge.value,"onUpdate:variables":m[37]||(m[37]=O=>ge.value=O),"raw-content":Ee.value,"onUpdate:rawContent":m[38]||(m[38]=O=>Ee.value=O),"view-mode":Mt.value,"onUpdate:viewMode":m[39]||(m[39]=O=>Mt.value=O),"regroup-on-save":Ot.value,"onUpdate:regroupOnSave":m[40]||(m[40]=O=>Ot.value=O),onSave:_u},null,8,["loading","error","groups","variables","raw-content","view-mode","regroup-on-save"])],512),[[tt,l.value==="env"]])])])):H("",!0),S(Ni,{modelValue:q.value,"onUpdate:modelValue":m[46]||(m[46]=O=>q.value=O),title:"Add Package",size:"md",variant:"left"},{actions:X(()=>[S(Je,{variant:"primary",onClick:p1,disabled:!ue.value.name.trim()},{default:X(()=>[...m[116]||(m[116]=[de(" Add Package ",-1)])]),_:1},8,["disabled"]),S(Je,{variant:"secondary",onClick:m[45]||(m[45]=O=>q.value=!1)},{default:X(()=>[...m[117]||(m[117]=[de(" Cancel ",-1)])]),_:1})]),default:X(()=>[f("div",_$,[f("div",null,[m[111]||(m[111]=f("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Search CRAN Packages ",-1)),qe(f("input",{"onUpdate:modelValue":m[41]||(m[41]=O=>ye.value=O),onKeydown:h1,type:"text",placeholder:"Type to search CRAN...",class:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 px-3 py-2 text-sm text-gray-900 dark:text-gray-100 font-mono focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500"},null,544),[[Ii,ye.value]])]),D.value.length>0?(v(),k("div",A$,[(v(!0),k(be,null,Le(D.value,(O,ke)=>(v(),k("button",{key:O.name,onClick:Ve=>uh(O),onMouseenter:Ve=>P.value=ke,class:xe(["w-full px-3 py-2 text-left border-b border-gray-200 dark:border-gray-700 last:border-b-0 transition",P.value===ke?"bg-sky-50 dark:bg-sky-900/20":"hover:bg-gray-50 dark:hover:bg-gray-800"])},[f("div",D$,[f("div",E$,[f("div",T$,J(O.name),1),O.title?(v(),k("div",j$,J(O.title),1)):H("",!0),O.author?(v(),k("div",O$,J(O.author),1)):H("",!0)]),f("div",P$," v"+J(O.version),1)])],42,M$))),128))])):H("",!0),f("div",null,[m[112]||(m[112]=f("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Package Name ",-1)),qe(f("input",{"onUpdate:modelValue":m[42]||(m[42]=O=>ue.value.name=O),type:"text",placeholder:"dplyr",class:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 px-3 py-2 text-sm text-gray-900 dark:text-gray-100 font-mono focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500"},null,512),[[Ii,ue.value.name]]),ue.value.source==="github"?(v(),k("p",$$," GitHub: user/repo (e.g., tidyverse/dplyr) ")):H("",!0),ue.value.source==="bioc"?(v(),k("p",R$," Bioconductor: name only (e.g., DESeq2) ")):H("",!0)]),f("div",null,[m[115]||(m[115]=f("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Source ",-1)),f("div",L$,[qe(f("select",{"onUpdate:modelValue":m[43]||(m[43]=O=>ue.value.source=O),class:"w-full appearance-none rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 pl-3 pr-10 py-2 text-sm text-gray-900 dark:text-gray-100 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500"},[...m[113]||(m[113]=[f("option",{value:"cran"},"CRAN",-1),f("option",{value:"github"},"GitHub",-1),f("option",{value:"bioc"},"Bioconductor",-1)])],512),[[Pc,ue.value.source]]),m[114]||(m[114]=f("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},[f("svg",{class:"h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),f("p",V$,[ue.value.source==="cran"?(v(),k(be,{key:0},[de("CRAN: name only (e.g., dplyr)")],64)):ue.value.source==="github"?(v(),k(be,{key:1},[de("GitHub: user/repo (e.g., tidyverse/dplyr)")],64)):ue.value.source==="bioc"?(v(),k(be,{key:2},[de("Bioconductor: name only (e.g., DESeq2)")],64)):H("",!0)])]),f("div",null,[S(Ge,{modelValue:ue.value.auto_attach,"onUpdate:modelValue":m[44]||(m[44]=O=>ue.value.auto_attach=O),label:"Auto-attach on scaffold()"},null,8,["modelValue"])])])]),_:1},8,["modelValue"]),S(Ni,{modelValue:oe.value,"onUpdate:modelValue":m[50]||(m[50]=O=>oe.value=O),title:"Delete Project",size:"md"},{actions:X(()=>[S(Je,{variant:"secondary",onClick:g1},{default:X(()=>[...m[123]||(m[123]=[de(" Cancel ",-1)])]),_:1}),S(Je,{variant:"primary",onClick:m1,disabled:!yl.value,class:"bg-red-600 hover:bg-red-500 focus-visible:outline-red-600 dark:bg-red-500 dark:hover:bg-red-400"},{default:X(()=>[de(J(te.value==="delete"?"Delete Project":"Remove from Framework"),1)]),_:1},8,["disabled"])]),default:X(()=>[f("div",B$,[m[122]||(m[122]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Choose how you want to remove this project: ",-1)),f("label",{class:xe(["block cursor-pointer rounded-lg border-2 p-4 transition",te.value==="untrack"?"border-sky-500 bg-sky-50 dark:border-sky-600 dark:bg-sky-950/30":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"])},[f("div",I$,[qe(f("input",{type:"radio",id:"delete-untrack",value:"untrack","onUpdate:modelValue":m[47]||(m[47]=O=>te.value=O),class:"mt-1"},null,512),[[Oc,te.value]]),m[118]||(m[118]=f("div",{class:"flex-1"},[f("div",{class:"font-medium text-gray-900 dark:text-white"}," Remove from Framework "),f("div",{class:"text-sm text-gray-600 dark:text-gray-400 mt-1"}," Stop tracking this project in Framework. Files remain on disk. ")],-1))])],2),f("label",{class:xe(["block cursor-pointer rounded-lg border-2 p-4 transition",te.value==="delete"?"border-red-500 bg-red-50 dark:border-red-700 dark:bg-red-950/30":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"])},[f("div",N$,[qe(f("input",{type:"radio",id:"delete-files",value:"delete","onUpdate:modelValue":m[48]||(m[48]=O=>te.value=O),class:"mt-1"},null,512),[[Oc,te.value]]),m[119]||(m[119]=f("div",{class:"flex-1"},[f("div",{class:"font-medium text-red-700 dark:text-red-400"}," Delete Entire Project "),f("div",{class:"text-sm text-gray-600 dark:text-gray-400 mt-1"}," Permanently delete all files and folders. This cannot be undone. ")],-1))]),te.value==="delete"?(v(),k("div",F$,[f("div",z$,[m[120]||(m[120]=de(" Type ",-1)),f("span",U$,J(i.value?.name),1),m[121]||(m[121]=de(" to confirm: ",-1))]),S(Se,{modelValue:se.value,"onUpdate:modelValue":m[49]||(m[49]=O=>se.value=O),placeholder:"Project name",class:"font-mono"},null,8,["modelValue"])])):H("",!0)],2)])]),_:1},8,["modelValue"])]))}},q$={class:"space-y-5"},W$={__name:"EditorAndNotebookPanel",props:{positron:{type:Boolean,default:!1},notebookFormat:{type:String,default:"quarto"}},emits:["update:positron","update:notebookFormat"],setup(s){return(e,t)=>(v(),k("div",q$,[f("div",null,[t[3]||(t[3]=f("label",{class:"block text-sm font-semibold text-gray-900 dark:text-white mb-3"}," Supported Editors ",-1)),S(Rn,{"model-value":s.positron,"onUpdate:modelValue":t[0]||(t[0]=n=>e.$emit("update:positron",n)),id:"support-positron",description:"Creates .code-workspace file for Positron/VS Code users"},{default:X(()=>[...t[2]||(t[2]=[de(" Positron / VS Code ",-1)])]),_:1},8,["model-value"]),t[4]||(t[4]=f("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-3"}," RStudio supported by default ",-1))]),S(ns,{"model-value":s.notebookFormat,"onUpdate:modelValue":t[1]||(t[1]=n=>e.$emit("update:notebookFormat",n)),label:"Default Notebook Format",hint:"Format used when creating new notebooks"},{default:X(()=>[...t[5]||(t[5]=[f("option",{value:"quarto"},"Quarto (.qmd)",-1),f("option",{value:"rmarkdown"},"R Markdown (.Rmd)",-1)])]),_:1},8,["model-value"])]))}},Gb=`# Framework environment defaults
# Populate these values before running scaffold() or publishing.

# PostgreSQL connection
POSTGRES_HOST=127.0.0.1
POSTGRES_PORT=5432
POSTGRES_DB=postgres
POSTGRES_SCHEMA=public
POSTGRES_USER=postgres
POSTGRES_PASSWORD=

# S3-compatible storage (AWS S3, MinIO, etc.)
S3_BUCKET=
S3_ACCESS_KEY=
S3_SECRET_KEY=
S3_REGION=us-east-1
S3_ENDPOINT=
S3_SESSION_TOKEN=`,K$=(s="")=>{const e={};return s.split(/\r?\n/).forEach(t=>{const n=t.trim();if(!n||n.startsWith("#")||!n.includes("="))return;const[i,...r]=n.split("=");e[i.trim()]=r.join("=").replace(/^"|"$/g,"")}),e},G$=(s={})=>Object.entries(s).map(([e,t])=>`${e}=${t??""}`).join(`
`),Jb=(s={})=>{const e=Object.entries(s);return e.length?e.reduce((t,[n,i])=>{const r=n.includes("_")?n.split("_")[0]:"Other";return t[r]||(t[r]={}),t[r][n]={defined:!!i,used:!1,used_in:[],value:i},t},{}):{}},J$=(s,e=Gb)=>{let t=e;typeof s=="string"?t=s:s?.raw?t=s.raw:s?.variables&&(t=G$(s.variables));const n=K$(t),i=Jb(n);return{rawContent:t,variables:n,groups:i,viewMode:"grouped"}},Q$={class:"flex min-h-screen"},Y$={class:"w-64 shrink-0 border-r border-gray-200 p-6 dark:border-gray-800"},X$={class:"space-y-1"},Z$=["href","onClick"],eR=["fill","viewBox","stroke"],tR=["stroke-linecap","stroke-linejoin","stroke-width","fill","d"],sR={key:1,class:"ml-4 mt-2 space-y-0.5 border-l border-gray-200 pl-3 dark:border-gray-700"},nR=["href","onClick"],iR={key:2,class:"ml-4 mt-2 space-y-0.5 border-l border-gray-200 pl-3 dark:border-gray-700"},rR=["href","onClick"],oR={class:"rounded-md bg-gray-900 p-4 text-xs text-gray-200"},lR={class:"mt-4 flex justify-end"},aR={class:"mt-6 px-3"},uR={key:0,class:"flex-1 flex items-center justify-center"},cR={class:"flex-1 p-10 pb-24"},dR={class:"mt-8 space-y-10"},fR={id:"overview"},hR={id:"connections-defaults"},pR={id:"env-defaults"},gR={class:"mt-6 flex justify-end"},mR={id:"basics"},vR={class:"space-y-5"},yR={class:"pt-4 border-t border-gray-200 dark:border-gray-700"},bR={id:"structure",class:"space-y-8"},kR={key:0,class:"space-y-6"},xR={class:"space-y-3"},wR=["onClick"],SR={class:"flex items-start gap-3"},CR={class:"font-semibold text-gray-900 dark:text-white"},_R={class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},AR={key:1},MR={id:"git"},DR={id:"scaffold"},ER={id:"packages"},TR={id:"quarto"},jR={id:"ai"},OR={class:"mt-4 flex justify-end"},PR={id:"templates"},$R={class:"flex flex-wrap gap-2 mb-6"},RR=["onClick"],LR={class:"flex flex-col gap-4"},VR={class:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"},BR={class:"space-y-1"},IR={class:"text-base font-semibold text-gray-900 dark:text-white"},NR={class:"text-sm text-gray-600 dark:text-gray-400"},FR={key:0,class:"rounded-md bg-sky-50 dark:bg-sky-900/20 border border-sky-200 dark:border-sky-800 p-3"},zR={class:"text-xs"},UR={class:"font-mono font-medium text-sky-700 dark:text-sky-300 pr-4 py-0.5"},HR={class:"text-gray-600 dark:text-gray-400 py-0.5"},qR={class:"text-sm text-gray-600 dark:text-gray-300"},WR={class:"flex gap-3 justify-end"},vc="overview",um="project",KR="Settings",GR="Manage default settings for new projects.",JR={__name:"SettingsView",setup(s){const e=lu(),t=rl(),n=Br(),i=[{id:"overview",label:"Overview",slug:"overview",icon:ru},{id:"basics",label:"Basics",slug:"basics",icon:tf},{id:"structure",label:"Project Structure",slug:"project-structure",icon:Ca},{id:"packages",label:"Packages",slug:"packages-dependencies",icon:sf},{id:"quarto",label:"Quarto",slug:"quarto",icon:yr},{id:"git",label:"Git & Hooks",slug:"git-hooks",svgIcon:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"},{id:"ai",label:"AI Assistants",slug:"ai-assistants",svgIcon:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"},{id:"scaffold",label:"Scaffold Behavior",slug:"scaffold-behavior",svgIcon:"M256 64L576 64L576 576L64 576L64 192L256 192L256 64zM256 224L96 224L96 544L256 544L256 224zM288 544L544 544L544 96L288 96L288 544zM440 152L488 152L488 200L440 200L440 152zM392 152L392 200L344 200L344 152L392 152zM440 248L488 248L488 296L440 296L440 248zM392 248L392 296L344 296L344 248L392 248zM152 280L200 280L200 328L152 328L152 280zM392 344L392 392L344 392L344 344L392 344zM152 376L200 376L200 424L152 424L152 376zM488 344L488 392L440 392L440 344L488 344z",svgViewBox:"0 0 640 640",svgFill:"currentColor",svgStroke:"none",svgStrokeWidth:0,svgPathFill:"currentColor"},{id:"templates",label:"Templates",slug:"templates",icon:yr},{id:"connections-defaults",label:"Connections",slug:"connections",icon:nf},{id:"env-defaults",label:".env Defaults",slug:"env",icon:ou}],r=Object.fromEntries(i.map(({id:E,slug:M})=>[E,M])),o=Object.fromEntries(i.map(({id:E,slug:M})=>[M,E])),l={project:{label:"Standard Project Structure",description:"General-purpose analysis project with notebooks, scripts, and shared outputs.",directories:{functions:"R/functions",notebooks:"notebooks",scripts:"scripts",inputs_raw:"inputs/raw",inputs_intermediate:"inputs/intermediate",inputs_final:"inputs/final",docs:"docs",outputs_tables:"outputs/tables",outputs_figures:"outputs/figures",outputs_models:"outputs/models",outputs_reports:"outputs/reports",scratch:"scratch"},render_dirs:{notebooks:"outputs/notebooks",docs:"outputs/docs"},quarto:{render_dir:"outputs/notebooks"},notebook_template:"notebook",extra_directories:[]},project_sensitive:{label:"Privacy Sensitive Project Structure",description:"Projects handling PHI/PII with dedicated private/public data flows.",directories:{functions:"R/functions",notebooks:"notebooks",scripts:"scripts",inputs_private_raw:"inputs/private/raw",inputs_private_intermediate:"inputs/private/intermediate",inputs_private_final:"inputs/private/final",inputs_public_raw:"inputs/public/raw",inputs_public_intermediate:"inputs/public/intermediate",inputs_public_final:"inputs/public/final",outputs_private_tables:"outputs/private/tables",outputs_private_figures:"outputs/private/figures",outputs_private_models:"outputs/private/models",outputs_private_docs:"outputs/private/docs",outputs_private_data_final:"outputs/private/data_final",outputs_public_tables:"outputs/public/tables",outputs_public_figures:"outputs/public/figures",outputs_public_models:"outputs/public/models",outputs_public_docs:"outputs/public/docs",outputs_public_data_final:"outputs/public/data_final",scratch:"scratch"},quarto:{render_dir:"outputs/public/docs"},notebook_template:"notebook",extra_directories:[]},presentation:{label:"Presentation Structure",description:"Single talk or slide deck with minimal analysis scaffolding.",directories:{presentation_source:"presentation.qmd",rendered_slides:"."},quarto:{render_dir:"."},notebook_template:"notebook",extra_directories:[]},course:{label:"Course Structure",description:"Courses with modules, assignments, and lecture materials.",directories:{data:"data",slides:"slides",assignments:"assignments",course_docs:"course_docs",readings:"readings",notebooks:"modules"},quarto:{render_dir:"course_docs"},notebook_template:"notebook",extra_directories:[]}},a=Y(JSON.parse(JSON.stringify(l))),c={project:"project",project_sensitive:"sensitive-project",presentation:"presentation",course:"course"},u=Object.fromEntries(Object.entries(c).map(([E,M])=>[M,E])),d={project:"Tune the standard analysis layoutfunctions, notebooks, inputs, and outputs live here by default.",project_sensitive:"Private and public inputs stay separate so sensitive data never leaves restricted folders.",presentation:"Control where your presentation source lives and where rendered slides are written.",course:"Adjust the folders used for slides, assignments, readings, and course documentation."},h=E=>String(E).replace(/_/g," ").replace(/\b\w/g,M=>M.toUpperCase()),p=Y(null),y=[{key:"notebooks",label:"Notebooks",hint:"Quarto or R Markdown notebooks for analysis.",defaultRenderDir:"outputs/notebooks"},{key:"docs",label:"Documentation",hint:"Codebooks, documentation, and other reference materials.",defaultRenderDir:"outputs/docs"}],b=[{key:"functions",label:"Functions",hint:"R files here are sourced by scaffold(), so helper functions are available in every project session."},{key:"scripts",label:"Scripts",hint:"Reusable R scripts, job runners, or automation tasks."}],x=[...y,...b],g=[{key:"inputs_raw",label:"Raw data",hint:"Read-only exports from source systems."},{key:"inputs_intermediate",label:"Intermediate data",hint:"Data after light cleaning or pre-processing steps."},{key:"inputs_final",label:"Analysis-ready data",hint:"Final inputs ready for modeling or reporting."}],j=[{key:"outputs_tables",label:"Tables",hint:"Publishable tables ready for reports or manuscripts."},{key:"outputs_figures",label:"Figures",hint:"Final plots and graphics."},{key:"outputs_models",label:"Models",hint:"Serialized models or model summaries."},{key:"outputs_reports",label:"Reports",hint:"Final reports and deliverables ready for publication."}],B=[{key:"scratch",label:"Scratch",hint:"Short-lived explorations (gitignored)."}],U=[{privateKey:"inputs_private_raw",publicKey:"inputs_public_raw",label:"Raw data",privateLabel:"Raw data (private)",publicLabel:"Raw data (public)",hint:"Read-only exports from source systems."},{privateKey:"inputs_private_intermediate",publicKey:"inputs_public_intermediate",label:"Intermediate data",privateLabel:"Intermediate data (private)",publicLabel:"Intermediate data (public)",hint:"Data after light cleaning or pre-processing steps."},{privateKey:"inputs_private_final",publicKey:"inputs_public_final",label:"Analysis-ready data",privateLabel:"Analysis-ready data (private)",publicLabel:"Analysis-ready data (public)",hint:"Final inputs ready for modeling or reporting."}],I=[{privateKey:"outputs_private_tables",publicKey:"outputs_public_tables",label:"Tables",privateLabel:"Tables (private)",publicLabel:"Tables (public)",hint:"Publishable tables ready for reports or manuscripts."},{privateKey:"outputs_private_figures",publicKey:"outputs_public_figures",label:"Figures",privateLabel:"Figures (private)",publicLabel:"Figures (public)",hint:"Final plots and graphics."},{privateKey:"outputs_private_models",publicKey:"outputs_public_models",label:"Models",privateLabel:"Models (private)",publicLabel:"Models (public)",hint:"Serialized models or model summaries."},{privateKey:"outputs_private_reports",publicKey:"outputs_public_reports",label:"Reports",privateLabel:"Reports (private)",publicLabel:"Reports (public)",hint:"Final reports and deliverables ready for publication."}],L=(E,M)=>p.value?.project_types?.[E]?.directories?.[M]||{},_=(E,M)=>M.map(z=>{const he=L(E,z.key);return{key:z.key,label:he.label||z.label,hint:he.hint||z.hint||""}});F(()=>_("project",x)),F(()=>_("project",y).map(E=>({...E,defaultRenderDir:y.find(M=>M.key===E.key)?.defaultRenderDir||""}))),F(()=>_("project",b)),F(()=>_("project",g)),F(()=>_("project",j)),F(()=>_("project",B));const R=E=>E.map(M=>{const z=L("project_sensitive",M.privateKey),he=L("project_sensitive",M.publicKey);return{...M,privateLabel:z.label||M.privateLabel,publicLabel:he.label||M.publicLabel}});F(()=>R(U)),F(()=>R(I)),F(()=>{const E=pe.value;return!E||!p.value?.project_types?.[E]?.settings?[]:p.value.project_types[E].settings});const W={include_inputs:"data",include_scripts:"scripts",include_functions:"functions"},ce=F(()=>{const E=p.value?.project_types?.presentation?.optional_toggles||{};return{inputs:E.include_inputs?.default_path||W.include_inputs,scripts:E.include_scripts?.default_path||W.include_scripts,functions:E.include_functions?.default_path||W.include_functions}}),ne={"CLAUDE.md":"ai_claude","AGENTS.md":"ai_agents",".github/copilot-instructions.md":"ai_copilot"},N=Y(vc),le=Y(!1),ee=Y(new Set),V=Y({projects_root:"",project_types:JSON.parse(JSON.stringify(a.value)),author:{name:"",email:"",affiliation:""},defaults:{project_type:"project",notebook_format:"quarto",ide:"vscode",positron:!1,use_git:!0,use_renv:!1,seed:"123",seed_on_scaffold:!1,ai_support:!0,ai_assistants:["claude"],ai_canonical_file:"CLAUDE.md",scaffold:{source_all_functions:!0,set_theme_on_scaffold:!1,ggplot_theme:"theme_minimal",seed_on_scaffold:!1,seed:"123"},directories:JSON.parse(JSON.stringify(a.value.project.directories)),git_hooks:{ai_sync:!1,data_security:!1,check_sensitive_dirs:!1},packages:{use_renv:!1,default_packages:[{name:"dplyr",source:"cran",auto_attach:!1},{name:"ggplot2",source:"cran",auto_attach:!1},{name:"readr",source:"cran",auto_attach:!1}]},quarto:{html:{format:"html",embed_resources:!0,theme:"default",toc:!0,toc_depth:3,code_fold:!1,code_tools:!1,highlight_style:"github"},revealjs:{format:"revealjs",theme:"default",incremental:!1,slide_number:!0,transition:"slide",background_transition:"fade",controls:!0,progress:!0,center:!0,highlight_style:"github"}},env:{raw:""}},git:{user_name:"",user_email:""},privacy:{secret_scan:!1,gitignore_template:"gitignore"}}),G=Js({includeInputs:!1,includeScripts:!1,includeFunctions:!1}),Q=Js({project:{},project_sensitive:{},course:{},presentation:{}}),ae=E=>(Q[E]||(Q[E]={}),Q[E]),me=Y(!1),$e=Js({claude:!0,agents:!1,copilot:!1}),Re=Y(""),Oe=Y({}),Ue=Y("grouped"),ot=Y(!1),st=Y({}),Xe=Y(!1),re=F(()=>Object.keys(Oe.value||{}).length),Z=F({get(){return cr(V.value.defaults.packages)},set(E){V.value.defaults.packages=E||{use_renv:!1,default_packages:[]}}}),K=E=>p.value?.project_types?.[E]?.label||E,C=F(()=>{const E=V.value.projects_root||"",M=V.value.author?.name||"",z=V.value.defaults?.project_type||"project",he=K(z),Ne=V.value.defaults?.notebook_format||"quarto",ve=V.value.ai_config?.enabled||!1,De=V.value.ai_config?.provider||"",He=V.value.ai_config?.canonical_file||"",Tt=V.value.git?.auto_init||!1,ln=Z.value?.default_packages?.length||0,Ht=re.value;return[{id:"basics",title:"Basics",section:"basics",content:`${E}  ${M}`},{id:"structure",title:"Project Structure",section:"structure",content:he},{id:"notebooks",title:"Notebooks & Scripts",section:"scaffold",content:Ne},{id:"packages",title:"Packages",section:"packages",content:ln===0?"No default packages":`${ln} packages`},{id:"env",title:".env Defaults",section:"env-defaults",content:`${Ht} variables`},{id:"ai",title:"AI Assistants",section:"ai",content:ve?`<span class="text-green-600 dark:text-green-400">${De}  ${He}</span>`:'<span class="text-gray-600 dark:text-gray-400">Disabled</span>'},{id:"git",title:"Git & Hooks",section:"git",content:Tt?"Auto-initialize repositories":"Manual initialization"}]}),ie=Y([]),A=Y([]),$=Y(null),q=Y(null);Pe(ie,E=>{const M=$.value,z=E.some(he=>he.name===M);if(E.length===1){const he=E[0];he?.name&&he.name!=="framework_db"&&($.value=he.name)}else M&&!z&&($.value=null)},{deep:!0}),Pe(A,E=>{const M=q.value,z=E.some(he=>he.name===M);if(E.length===1){const he=E[0];he?.name&&(q.value=he.name)}else M&&!z&&(q.value=null)},{deep:!0});const oe=Js({open:!1,projectTypeKey:null,projectTypeName:""}),te=Js({notebook:{loading:!1,contents:""},script:{loading:!1,contents:""},presentation:{loading:!1,contents:""},canonical:{loading:!1,contents:""},gitignore_project:{loading:!1,contents:""},gitignore_project_sensitive:{loading:!1,contents:""},gitignore_course:{loading:!1,contents:""},gitignore_presentation:{loading:!1,contents:""}}),se=[{syntax:"{{author}}",description:"Author name"},{syntax:"{{email}}",description:"Author email"},{syntax:"{{affiliation}}",description:"Author affiliation"},{syntax:"{{github_username}}",description:"GitHub username"},{syntax:"{{github_email}}",description:"GitHub email"}],ye=F(()=>[{key:"notebook",label:"Notebook",description:"Starter Quarto notebook used when creating notebooks.",editorKey:"notebook",apiName:"notebook",language:"markdown",hasVariables:!0},{key:"script",label:"Script",description:"Starter R script used for new scripts.",editorKey:"script",apiName:"script",language:"r",hasVariables:!1},{key:"presentation",label:"Presentation",description:"Starter presentation content for revealjs slides.",editorKey:"presentation",apiName:"presentation",language:"markdown",hasVariables:!0}]),D=Y(n.params.subsection||"notebook"),T=F(()=>ye.value.find(E=>E.key===D.value)||ye.value[0]),P=async E=>{D.value=E||"notebook",await wt("templates",D.value)},ue=async E=>{E&&typeof E.preventDefault=="function"&&E.preventDefault();const M=T.value;if(!M||!window.confirm("Reset this template to the default packaged version?"))return;const he=M.editorKey,Ne=M.apiName;await Ur(Ne,he)},ge=F({get(){const E=V.value.defaults||{};return{enabled:E.ai_support!==!1,canonical_file:E.ai_canonical_file||"CLAUDE.md",assistants:Array.isArray(E.ai_assistants)?[...E.ai_assistants]:[],canonical_content:te.canonical?.contents||""}},set(E){if(!E)return;const M=V.value.defaults||{};M.ai_support=E.enabled,M.ai_canonical_file=E.canonical_file,M.ai_assistants=Array.isArray(E.assistants)?[...E.assistants]:[],E.canonical_content!==void 0&&te.canonical&&(te.canonical.contents=E.canonical_content),V.value.defaults={...M}}}),we=F(()=>Object.entries(V.value.project_types||{})),Ee=F(()=>we.value.map(([E,M])=>({key:E,label:(M.label||h(E)).replace(/ Structure$/i,""),slug:c[E]||E}))),Ie=[{id:"templates-notebook",label:"Notebook",slug:"notebook"},{id:"templates-script",label:"Script",slug:"script"},{id:"templates-presentation",label:"Presentation",slug:"presentation"}],Ye=F(()=>"# Connections section temporarily disabled for debugging"),pe=F(()=>{const E=n.params.subsection;return E?u[E]||um:null}),gt=F(()=>{const E=pe.value;return E&&V.value.project_types?.[E]||null}),Mt={overview:{title:"Overview",description:"Overview of your Framework global settings and preferences."},"connections-defaults":{title:"Connections",description:"Database and storage connections that every new project will inherit."},basics:{title:"Basics",description:"Essential settings for new projects."},author:{title:"Author Information",description:"Defaults that populate README files and notebook headers when scaffold() runs."},workflow:{title:"Editor & Workflow",description:"Control how Framework scaffolds projects in your preferred tools."},structure:{title:"Project Structure Defaults",description:"Choose a project type to configure its directory structure and default settings."},templates:{title:"Templates",description:"Edit the starter templates Framework uses for notebooks, scripts, and presentations."},ai:{title:"AI Assistants",description:"Manage assistant support, canonical context files, and sync hooks."},git:{title:"Git & Hooks",description:"Configure repository initialization, commit identity, git hooks, and security scanning."},scaffold:{title:"Scaffold Behavior",description:"Automatic actions Framework performs when scaffold() runs."},packages:{title:"Packages & Dependencies",description:"Define dependency defaults and auto-attach behavior for new projects."},"env-defaults":{title:".env Defaults",description:"Template applied to every new project so core connections work immediately."}},Ot=F(()=>Mt[N.value]||{title:KR,description:GR}),Ze=F(()=>N.value==="structure"&&gt.value?gt.value.label||h(pe.value):Ot.value.title),Xt=F(()=>N.value==="structure"&&gt.value&&(gt.value.description||d[pe.value])||Ot.value.description);F(()=>V.value.privacy.gitignore_template||"gitignore"),F(()=>{const E=new Set,M=V.value.project_types||{},z=M.project_sensitive?.directories||{};for(const Ne of Object.values(z))typeof Ne=="string"&&Ne.trim()&&Ne.includes("private")&&E.add(Ne.replace(/^\/+/,""));const he=M.project?.directories||{};return["cache","scratch"].forEach(Ne=>{const ve=he[Ne];typeof ve=="string"&&ve.trim()&&E.add(ve.replace(/^\/+/,""))}),Array.from(E).sort()});const Bt=F(()=>ne[V.value.defaults.ai_canonical_file]||"ai_claude"),mt=(E,M)=>{const z={section:E||void 0};return M&&(z.subsection=M),t.resolve({name:"settings",params:z}).href},wt=(E,M)=>{const z={};E&&(z.section=E),M&&(z.subsection=M);const he=n.params.section||void 0,Ne=n.params.subsection||void 0,ve=z.section||void 0,De=z.subsection||void 0;return he===ve&&Ne===De?Promise.resolve():t.replace({name:"settings",params:z}).catch(()=>{})};Pe(()=>n.params.section,E=>{if(!E){wt(r[vc],void 0);return}const M=o[E]||vc;if(N.value=M,!o[E]){wt(r[M],void 0);return}},{immediate:!0});const We=(E,M="")=>Array.isArray(E)?E.length>0?We(E[0],M):M:E??M,vt=(E,M=!1)=>{const z=We(E,M);return typeof z=="boolean"?z:typeof z=="string"?["true","1","yes"].includes(z.toLowerCase()):!!z},Ji=E=>Array.isArray(E)?E.flatMap(M=>Array.isArray(M)?M:[M]).filter(Boolean):[],Qi=(E={},M={})=>{const z={...M};for(const[he,Ne]of Object.entries(E||{})){const ve=We(Ne,null);ve===null||ve===""?delete z[he]:z[he]=ve}return z},wu=(E,M)=>{const z=a.value[E]||{render_dirs:{},quarto:{},extra_directories:[]};return{label:We(M?.label,z.label||h(E)),description:We(M?.description,z.description||""),ggplot_theme:We(M?.ggplot_theme,"theme_minimal"),set_theme_on_scaffold:vt(M?.set_theme_on_scaffold,!1),directories:Qi(M?.directories,{}),render_dirs:Qi(M?.render_dirs,z.render_dirs||{}),quarto:{render_dir:We(M?.quarto?.render_dir,z.quarto?.render_dir||".")},notebook_template:We(M?.notebook_template,z.notebook_template||"notebook"),extra_directories:Array.isArray(M?.extra_directories)?M.extra_directories:z.extra_directories||[],gitignore:We(M?.gitignore,z.gitignore||"")}},Su=E=>{if(!E||!E.project_types)return;console.log("[DEBUG] hydrateDefaultsFromCatalog - catalogData.project_types:",E.project_types),console.log("[DEBUG] project gitignore from catalog:",E.project_types.project?.gitignore?.substring(0,100));const M={};for(const[z,he]of Object.entries(E.project_types)){const Ne=l[z]||{},ve=Hb(he,{},Ne.directories||{},Ne.render_dirs||{}),{directories:De,render_dirs:He}=ve;M[z]={label:We(he.label,Ne.label||h(z)),description:We(he.description,Ne.description||""),directories:De,render_dirs:He,quarto:{render_dir:We(he.quarto?.render_dir?.default,Ne.quarto?.render_dir||".")},notebook_template:We(he.notebook_template?.default,Ne.notebook_template||"notebook"),optional_toggles:he.optional_toggles||{},gitignore:We(he.gitignore,Ne.gitignore||"")},console.log(`[DEBUG] Normalized ${z} - gitignore length:`,M[z].gitignore?.length)}for(const[z,he]of Object.entries(l))M[z]||(M[z]=JSON.parse(JSON.stringify(he)));a.value=M},Yi=(E,M,z)=>{if(!V.value.project_types?.presentation)return;const he=V.value.project_types.presentation.directories||(V.value.project_types.presentation.directories={});M?(!he[E]||he[E]==="")&&(he[E]=z):Object.prototype.hasOwnProperty.call(he,E)&&delete he[E]},Es=async(E,M=E)=>{if(te[M]){te[M].loading=!0;try{const z=await fetch(`/api/templates/${E}`);if(!z.ok)throw new Error("Request failed");const he=await z.json();te[M].contents=he.contents||""}catch{e.error("Template Error","Unable to load template contents.")}finally{te[M].loading=!1}}},Ur=async(E,M=E)=>{if(te[M])try{if(!(await fetch(`/api/templates/${E}`,{method:"DELETE"})).ok)throw new Error("Request failed");await Es(E,M),e.success("Template Reset","Restored the packaged default template.")}catch{e.error("Reset Failed","Unable to restore the default template.")}};Pe($e,E=>{if(me.value){console.log("[watch:aiAssistants] Skipped - loading");return}console.log("[watch:aiAssistants] Triggered",E);const M=[];E.claude&&M.push("claude"),E.copilot&&M.push("copilot"),E.agents&&M.push("agents"),V.value.defaults.ai_assistants=M},{deep:!0}),Pe(()=>V.value.defaults.ai_canonical_file,async()=>{me.value||await Es(Bt.value,"canonical")}),Pe(()=>V.value.defaults.git_hooks.data_security,E=>{me.value||V.value.privacy.secret_scan!==E&&(V.value.privacy.secret_scan=E)}),Pe(()=>V.value.privacy.secret_scan,E=>{me.value||V.value.defaults.git_hooks.data_security!==E&&(V.value.defaults.git_hooks.data_security=E)}),Pe(()=>G.includeInputs,E=>{me.value||Yi("inputs",E,ce.value.inputs)}),Pe(()=>G.includeScripts,E=>{me.value||Yi("scripts",E,ce.value.scripts)}),Pe(()=>G.includeFunctions,E=>{me.value||Yi("functions",E,ce.value.functions)}),Pe(Q,E=>{if(!me.value)for(const[M,z]of Object.entries(E)){if(!V.value.project_types?.[M])continue;const he=V.value.project_types[M].directories||{},Ne=V.value.project_types[M].render_dirs||{},ve=p.value?.project_types?.[M]?.directories||{},De=p.value?.project_types?.[M]?.render_dirs||{};for(const[He,Tt]of Object.entries(z))if(Tt===!1)Object.prototype.hasOwnProperty.call(he,He)&&delete V.value.project_types[M].directories[He],Object.prototype.hasOwnProperty.call(Ne,He)&&delete V.value.project_types[M].render_dirs[He];else if(Tt===!0){if(!Object.prototype.hasOwnProperty.call(he,He)){const ln=ve[He]?.default||"";V.value.project_types[M].directories[He]=ln}if(De[He]&&!Object.prototype.hasOwnProperty.call(Ne,He)){const ln=De[He]?.default||"";ln&&(V.value.project_types[M].render_dirs[He]=ln)}}}},{deep:!0}),Pe(Oe,E=>{me.value||(st.value=Jb(E))},{deep:!0});const yi=E=>{(E.metaKey||E.ctrlKey)&&E.key==="s"&&(E.preventDefault(),Xi())},Hr=(E,M)=>{const z=V.value.project_types?.[E]?.directories;return!!z&&Object.prototype.hasOwnProperty.call(z,M)},ks=E=>{a.value[E]&&(oe.projectTypeKey=E,oe.projectTypeName=V.value.project_types[E]?.label||h(E),oe.open=!0)},pl=()=>{const E=oe.projectTypeKey;a.value[E]&&(V.value.project_types[E]=JSON.parse(JSON.stringify(a.value[E])),E==="presentation"&&(G.includeInputs=!1,G.includeScripts=!1,G.includeFunctions=!1),oe.open=!1,e.success("Reset Complete",`${oe.projectTypeName} has been reset to defaults`))},Hn=async(E,{title:M,description:z})=>{templateModal.open=!0,templateModal.loading=!0,templateModal.name=E,templateModal.title=M,templateModal.description=z;try{const Ne=await(await fetch(`/api/templates/${E}`)).json();templateModal.contents=Ne.contents||""}catch{e.error("Template Error","Unable to load template contents.")}finally{templateModal.loading=!1}},qn=()=>{const E=ne[V.value.defaults.ai_canonical_file]||"ai_claude";Hn(E,{title:`Edit ${V.value.defaults.ai_canonical_file}`,description:"This file is treated as canonical; other assistant files are synced to it."})},Wn=E=>{const M=document.getElementById(E);M&&M.scrollIntoView({behavior:"smooth",block:"start"})},bi=E=>{switch(E){case"project":return`project-${E}-inputs`;case"project_sensitive":return`project-${E}-workspaces`;case"presentation":return`project-${E}-primary`;case"course":return`project-${E}-core`;default:return`project-${E}`}},Cn=E=>!(N.value!==E||E==="structure"&&pe.value||E==="templates"),gl=async E=>{const M=i.find(he=>he.id===E);if(!M)return;const z=M.id==="structure"?void 0:M.id==="templates"?n.params.subsection||D.value||"notebook":void 0;await wt(M.slug,z),await Bs(),Wn(M.id)},qr=async E=>{const M=c[E]||c[um];await wt("project-structure",M),await Bs(),Wn(bi(E))};Pe(()=>pe.value,(E,M)=>{N.value==="structure"&&(!E||E===M||Bs(()=>Wn(bi(E))))}),Pe(()=>n.params.subsection,async E=>{if(n.params.section!=="templates")return;const M=E||"notebook";D.value!==M&&(D.value=M),await Bs(),Wn("templates")});const Wr=async()=>{try{console.log("[loadSettings] Starting load, setting isLoadingSettings = true"),me.value=!0;const[E,M]=await Promise.all([fetch("/api/settings/catalog"),fetch("/api/settings/get")]);if(!E.ok)throw new Error("Failed to load settings catalog");if(!M.ok)throw new Error("Failed to load settings payload");console.log("[loadSettings] Responses received, parsing JSON");const z=await E.json();p.value=z,Su(z);const he=await M.json();console.log("[loadSettings] Settings data:",he),console.log("[loadSettings] data.global:",he.global),console.log("[loadSettings] data.global?.projects_root:",he.global?.projects_root);const Ne=We(he.global?.projects_root||he.projects_root,"");if(console.log("[loadSettings] Setting projects_root to:",Ne),V.value.projects_root=Ne,he.project_types){const ve={},De={...a.value,...he.project_types};for(const[He,Tt]of Object.entries(De))ve[He]=wu(He,Tt);V.value.project_types=ve;for(const He of Object.keys(V.value.project_types))V.value.project_types[He].render_dirs||(V.value.project_types[He].render_dirs={})}G.includeInputs=Hr("presentation","inputs"),G.includeScripts=Hr("presentation","scripts"),G.includeFunctions=Hr("presentation","functions");for(const ve of["project","project_sensitive","course","presentation"]){const De=V.value.project_types?.[ve]?.directories||{},He=z?.project_types?.[ve]?.directories||{},Tt=ae(ve);for(const Ht of Object.keys(He)){const vl=He[Ht];if(Ht==="cache"||vl.always_lazy)continue;const yl=vl.enabled_by_default??Object.prototype.hasOwnProperty.call(De,Ht);Tt[Ht]=yl}for(const Ht of Object.keys(De))Object.prototype.hasOwnProperty.call(He,Ht)||(Tt[Ht]=!0);(V.value.project_types?.[ve]?.extra_directories||[]).forEach(Ht=>{Ht.key&&(V.value.project_types[ve].directories_enabled&&V.value.project_types[ve].directories_enabled[Ht.key]===!1?Tt[Ht.key]=!1:Tt[Ht.key]=!0)})}if(he.author&&(V.value.author={name:We(he.author.name,""),email:We(he.author.email,""),affiliation:We(he.author.affiliation,"")}),he.defaults){const ve=he.defaults;V.value.defaults.project_type=We(ve.project_type,"project"),V.value.defaults.notebook_format=We(ve.notebook_format,"quarto"),V.value.defaults.ide=We(ve.ide,"vscode"),V.value.defaults.positron=vt(ve.positron,!1),V.value.defaults.use_git=vt(ve.use_git,!0),V.value.defaults.use_renv=vt(ve.use_renv,!1),V.value.defaults.ai_support=vt(ve.ai_support,!0),V.value.defaults.ai_canonical_file=We(ve.ai_canonical_file,"CLAUDE.md");const De=Ji(ve.ai_assistants);De.length&&(V.value.defaults.ai_assistants=De,$e.claude=De.includes("claude"),$e.copilot=De.includes("copilot"),$e.agents=De.includes("agents")),ve.git_hooks&&(V.value.defaults.git_hooks={...V.value.defaults.git_hooks,...Object.fromEntries(Object.entries(ve.git_hooks).map(([He,Tt])=>[He,vt(Tt,V.value.defaults.git_hooks[He])]))},V.value.privacy.secret_scan=V.value.defaults.git_hooks.data_security),ve.scaffold&&(V.value.defaults.scaffold={source_all_functions:vt(ve.scaffold.source_all_functions,!0),set_theme_on_scaffold:vt(ve.scaffold.set_theme_on_scaffold,!1),ggplot_theme:We(ve.scaffold.ggplot_theme,"theme_minimal"),seed_on_scaffold:vt(ve.scaffold.seed_on_scaffold,!1),seed:We(ve.scaffold.seed,"123")}),ve.packages&&ve.packages.default_packages?.length?V.value.defaults.packages=cr(ve.packages):z?.defaults?.packages&&(V.value.defaults.packages=cr(z.defaults.packages)),ve.quarto&&(V.value.defaults.quarto={html:{format:"html",embed_resources:vt(ve.quarto.html?.embed_resources,!0),theme:We(ve.quarto.html?.theme,"default"),toc:vt(ve.quarto.html?.toc,!0),toc_depth:parseInt(ve.quarto.html?.toc_depth)||3,code_fold:vt(ve.quarto.html?.code_fold,!1),code_tools:vt(ve.quarto.html?.code_tools,!1),highlight_style:We(ve.quarto.html?.highlight_style,"github")},revealjs:{format:"revealjs",theme:We(ve.quarto.revealjs?.theme,"default"),incremental:vt(ve.quarto.revealjs?.incremental,!1),slide_number:vt(ve.quarto.revealjs?.slide_number,!0),transition:We(ve.quarto.revealjs?.transition,"slide"),background_transition:We(ve.quarto.revealjs?.background_transition,"fade"),controls:vt(ve.quarto.revealjs?.controls,!0),progress:vt(ve.quarto.revealjs?.progress,!0),center:vt(ve.quarto.revealjs?.center,!0),highlight_style:We(ve.quarto.revealjs?.highlight_style,"github")}}),ve.directories?V.value.defaults.directories={...V.value.defaults.directories,...Object.fromEntries(Object.entries(ve.directories).map(([He,Tt])=>[He,We(Tt,V.value.defaults.directories[He]||"")]))}:V.value.project_types.project&&(V.value.defaults.directories={...V.value.defaults.directories,...V.value.project_types.project.directories}),Jr(ve.env),ml(ve.connections)}he.defaults||(Jr(null),ml(null),z?.defaults?.packages&&(V.value.defaults.packages=cr(z.defaults.packages))),he.git&&(V.value.git={user_name:We(he.git.user_name,""),user_email:We(he.git.user_email,"")}),he.privacy?(V.value.privacy.secret_scan=vt(he.privacy.secret_scan,V.value.defaults.git_hooks.data_security),V.value.privacy.gitignore_template=We(he.privacy.gitignore_template,"gitignore")):V.value.privacy.secret_scan=V.value.defaults.git_hooks.data_security,await Es(Bt.value,"canonical"),console.log("[loadSettings] Load complete, about to set isLoadingSettings = false")}catch(E){console.error("[loadSettings] Error during load:",E),e.error("Load Failed","Unable to load current settings.")}finally{me.value=!1,console.log("[loadSettings] isLoadingSettings now false")}},Kr=F({get(){const E=V.value.defaults||{},M=V.value.git||{};return Xf({useGit:E.use_git,gitHooks:E.git_hooks,git:M})},set(E){if(me.value){console.log("[gitPanelModel setter] Blocked during load");return}V.value.defaults.git_hooks=V.value.defaults.git_hooks||{},V.value.git=V.value.git||{},Zf({gitTarget:V.value.git,gitHooksTarget:V.value.defaults.git_hooks,setUseGit:M=>{V.value.defaults.use_git=M}},E)}}),Gr=F({get(){const E=V.value.defaults?.scaffold||{};return{source_all_functions:E.source_all_functions!==!1,set_theme_on_scaffold:E.set_theme_on_scaffold===!0,ggplot_theme:E.ggplot_theme||"theme_minimal",seed_on_scaffold:E.seed_on_scaffold||!1,seed:E.seed||"123"}},set(E){if(me.value){console.log("[scaffoldPanelModel setter] Blocked during load");return}V.value.defaults.scaffold={...V.value.defaults.scaffold||{},source_all_functions:E.source_all_functions,set_theme_on_scaffold:E.set_theme_on_scaffold,ggplot_theme:E.ggplot_theme,seed_on_scaffold:E.seed_on_scaffold,seed:E.seed}}}),Rs=(E,M)=>{const z=V.value.project_types[E];return!z||!Array.isArray(z.extra_directories)?[]:z.extra_directories.filter(he=>he.type===M&&!ee.value.has(he._id))},ds=(E,M)=>{const z=V.value.project_types[E];return!z||!Array.isArray(z.extra_directories)?[]:z.extra_directories.filter(he=>he.type===M&&ee.value.has(he._id))},on=(E,M,z)=>{const he=V.value.project_types[E];if(!he)return;Array.isArray(he.extra_directories)||(he.extra_directories=[]);const Ne=he.extra_directories.filter(De=>De&&De.type!==M),ve=z.map(De=>({...De,type:M}));he.extra_directories=[...Ne,...ve]};F({get(){return ds(pe.value,"input_private")},set(E){if(!V.value.project_types[pe.value])return;ds(pe.value,"input_private").filter(De=>!E.some(He=>He._id===De._id)).forEach(De=>{De._id&&ee.value.delete(De._id)});const ve=[...Rs(pe.value,"input_private"),...E];on(pe.value,"input_private",ve),E.forEach(De=>{De._id&&!ee.value.has(De._id)&&ee.value.add(De._id)})}}),F({get(){return ds(pe.value,"input_public")},set(E){if(!V.value.project_types[pe.value])return;ds(pe.value,"input_public").filter(De=>!E.some(He=>He._id===De._id)).forEach(De=>{De._id&&ee.value.delete(De._id)});const ve=[...Rs(pe.value,"input_public"),...E];on(pe.value,"input_public",ve),E.forEach(De=>{De._id&&!ee.value.has(De._id)&&ee.value.add(De._id)})}}),F({get(){return ds(pe.value,"output_private")},set(E){if(!V.value.project_types[pe.value])return;const he=[...Rs(pe.value,"output_private"),...E];on(pe.value,"output_private",he),E.forEach(Ne=>{Ne._id&&!ee.value.has(Ne._id)&&ee.value.add(Ne._id)})}}),F({get(){return ds(pe.value,"output_public")},set(E){if(!V.value.project_types[pe.value])return;const he=[...Rs(pe.value,"output_public"),...E];on(pe.value,"output_public",he),E.forEach(Ne=>{Ne._id&&!ee.value.has(Ne._id)&&ee.value.add(Ne._id)})}}),F({get(){return ds(pe.value,"workspace")},set(E){if(!V.value.project_types[pe.value])return;ds(pe.value,"workspace").filter(De=>!E.some(He=>He._id===De._id)).forEach(De=>{De._id&&ee.value.delete(De._id)});const ve=[...Rs(pe.value,"workspace"),...E];on(pe.value,"workspace",ve),E.forEach(De=>{De._id&&!ee.value.has(De._id)&&ee.value.add(De._id)})}}),F({get(){return ds(pe.value,"input")},set(E){if(!V.value.project_types[pe.value])return;ds(pe.value,"input").filter(De=>!E.some(He=>He._id===De._id)).forEach(De=>{De._id&&ee.value.delete(De._id)});const ve=[...Rs(pe.value,"input"),...E];on(pe.value,"input",ve),E.forEach(De=>{De._id&&!ee.value.has(De._id)&&ee.value.add(De._id)})}}),F({get(){return ds(pe.value,"output")},set(E){if(!V.value.project_types[pe.value])return;ds(pe.value,"output").filter(De=>!E.some(He=>He._id===De._id)).forEach(De=>{De._id&&ee.value.delete(De._id)});const ve=[...Rs(pe.value,"output"),...E];on(pe.value,"output",ve),E.forEach(De=>{De._id&&!ee.value.has(De._id)&&ee.value.add(De._id)})}});const Jr=E=>{const M=J$(E,Gb);Re.value=M.rawContent,Oe.value=M.variables,st.value=M.groups,Ue.value=M.viewMode},ml=E=>{const M=eh(E||{});ie.value=M.databaseConnections,A.value=M.s3Connections,$.value=M.defaultDatabase,q.value=M.defaultStorageBucket},Xi=async()=>{try{le.value=!0;const E=V.value.projects_root?.trim()||"";console.log("[saveSettings] settings.value.projects_root:",V.value.projects_root),console.log("[saveSettings] normalizedRoot:",E);const M=JSON.parse(JSON.stringify(V.value));M.global||(M.global={}),M.global.projects_root=E||null,delete M.projects_root,console.log("[saveSettings] payload.global.projects_root:",M.global.projects_root),M.defaults.scaffold&&(M.defaults.scaffold.seed=M.defaults.scaffold.seed??""),M.defaults.seed=M.defaults.seed??"",M.defaults.packages=pj(V.value.defaults.packages),M.defaults.env={raw:Re.value||""},M.defaults.connections=th({databaseConnections:ie.value,s3Connections:A.value,defaultDatabase:$.value,defaultStorageBucket:q.value}),M.defaults.directories=M.project_types?.project?.directories||M.defaults.directories,M.defaults.git_hooks.data_security=M.privacy.secret_scan,M.git=M.git||{user_name:"",user_email:""};for(const ve in M.project_types){const De=p.value?.project_types?.[ve]?.directories||{},He=Q[ve]||M.project_types[ve].directories_enabled||{},Tt=qb({catalogDirs:De,directories:M.project_types[ve].directories||{},render_dirs:M.project_types[ve].render_dirs||{},enabled:He,extra_directories:M.project_types[ve].extra_directories||[]});M.project_types[ve].directories=Tt.directories,M.project_types[ve].render_dirs=Tt.render_dirs,M.project_types[ve].directories_enabled=Tt.enabled,M.project_types[ve].extra_directories=Tt.extra_directories}const z=await fetch("/api/settings/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(M)});if(!z.ok){const ve=await z.text();throw new Error("Failed to save settings")}const he=await z.json();if((await Promise.all([fetch("/api/templates/notebook",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:te.notebook.contents})}),fetch("/api/templates/script",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:te.script.contents})}),fetch("/api/templates/presentation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:te.presentation.contents})}),fetch("/api/templates/gitignore-project",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:te.gitignore_project.contents})}),fetch("/api/templates/gitignore-project_sensitive",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:te.gitignore_project_sensitive.contents})}),fetch("/api/templates/gitignore-course",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:te.gitignore_course.contents})}),fetch("/api/templates/gitignore-presentation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:te.gitignore_presentation.contents})}),fetch(`/api/templates/${Bt.value}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:te.canonical.contents})})])).some(ve=>!ve.ok))throw new Error("Template save failed");ee.value.clear(),console.log("[saveSettings] Before loadSettings, projects_root was:",V.value.projects_root),await Wr(),console.log("[saveSettings] After loadSettings, projects_root is:",V.value.projects_root),e.success("Settings Saved","Your global defaults were updated.")}catch(E){console.error("Failed to save settings:",E),e.error("Save Failed",E?.message||"Review your changes and try again.")}finally{le.value=!1}};return as(()=>{Wr(),Es("notebook"),Es("script"),Es("presentation"),Es("gitignore-project","gitignore_project"),Es("gitignore-project_sensitive","gitignore_project_sensitive"),Es("gitignore-course","gitignore_course"),Es("gitignore-presentation","gitignore_presentation"),Es(Bt.value,"canonical"),n.params.section==="templates"&&!n.params.subsection&&wt("templates",D.value||"notebook"),window.addEventListener("keydown",yi)}),Lr(()=>{window.removeEventListener("keydown",yi)}),(E,M)=>(v(),k("div",Q$,[f("nav",Y$,[M[34]||(M[34]=f("h2",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"New Project Defaults",-1)),f("div",X$,[(v(),k(be,null,Le(i,z=>f("div",{key:z.id},[z.id==="basics"?(v(),Ae(qa,{key:0},{default:X(()=>[...M[31]||(M[31]=[de("Settings",-1)])]),_:1})):H("",!0),f("a",{href:mt(z.slug),onClick:Pt(he=>gl(z.id),["prevent"]),class:xe(["flex items-center gap-2 px-3 py-2 rounded-md text-sm transition",Cn(z.id)?"bg-sky-50 text-sky-700 font-medium dark:bg-sky-900/20 dark:text-sky-400":"text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-800"])},[z.icon?(v(),Ae(Ms(z.icon),{key:0,class:"h-4 w-4"})):z.svgIcon?(v(),k("svg",{key:1,class:"h-4 w-4",fill:z.svgFill??"none",viewBox:z.svgViewBox??"0 0 24 24",stroke:z.svgStroke??"currentColor"},[f("path",{"stroke-linecap":z.svgStrokeLinecap??"round","stroke-linejoin":z.svgStrokeLinejoin??"round","stroke-width":z.svgStrokeWidth??2,fill:z.svgPathFill??"none",d:z.svgIcon},null,8,tR)],8,eR)):H("",!0),de(" "+J(z.label),1)],10,Z$),z.id==="structure"&&N.value==="structure"?(v(),k("div",sR,[(v(!0),k(be,null,Le(Ee.value,he=>(v(),k("a",{key:he.key,href:mt("project-structure",he.slug),onClick:Pt(Ne=>qr(he.key),["prevent"]),class:xe(["block rounded-md py-1 pl-4 pr-2 text-xs font-medium transition",pe.value===he.key?"bg-sky-100 text-sky-700 dark:bg-sky-900/30 dark:text-sky-300":"text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-800"])},J(he.label),11,nR))),128))])):z.id==="templates"&&N.value==="templates"?(v(),k("div",iR,[(v(),k(be,null,Le(Ie,he=>f("a",{key:he.id,href:mt("templates",he.slug),onClick:Pt(Ne=>P(he.slug),["prevent"]),class:xe(["block rounded-md py-1 pl-4 pr-2 text-xs font-medium transition",D.value===he.slug?"bg-sky-100 text-sky-700 dark:bg-sky-900/30 dark:text-sky-300":"text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-800"])},J(he.label),11,rR)),64))])):H("",!0)])),64)),S(Ni,{modelValue:Xe.value,"onUpdate:modelValue":M[1]||(M[1]=z=>Xe.value=z),title:".env Variables Preview"},{default:X(()=>[M[33]||(M[33]=f("p",{class:"mb-3 text-sm text-gray-600 dark:text-gray-400"},[de(" Copy these entries into your projects "),f("code",null,".env"),de(" file so the connections above resolve properly. ")],-1)),f("pre",oR,J(Ye.value),1),f("div",lR,[S(Je,{variant:"primary",onClick:M[0]||(M[0]=z=>Xe.value=!1)},{default:X(()=>[...M[32]||(M[32]=[de("Close",-1)])]),_:1})])]),_:1},8,["modelValue"])]),f("div",aR,[S(Je,{variant:"primary",size:"md",disabled:le.value,onClick:Xi,class:"w-full"},{default:X(()=>[de(J(le.value?"Saving":"Save Changes"),1)]),_:1},8,["disabled"])])]),me.value?(v(),k("div",uR,[...M[35]||(M[35]=[f("div",{class:"text-center"},[f("div",{class:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-sky-600 border-r-transparent"}),f("p",{class:"mt-4 text-sm text-gray-600 dark:text-gray-400"},"Loading settings...")],-1)])])):H("",!0),qe(f("div",cR,[S(Ir,{title:Ze.value,description:Xt.value},null,8,["title","description"]),f("div",dR,[qe(f("div",fR,[S(zf,{cards:C.value,onNavigate:gl},null,8,["cards"])],512),[[tt,N.value==="overview"]]),qe(f("div",hR,[M[36]||(M[36]=Vr('<div class="mb-6 rounded-lg border border-sky-200 bg-sky-50 p-4 dark:border-sky-800 dark:bg-sky-900/20"><h4 class="text-sm font-semibold text-sky-900 dark:text-sky-100 mb-2">Connection values</h4><p class="text-sm text-sky-800 dark:text-sky-200 mb-2"> Use <code class="px-1 py-0.5 bg-sky-100 dark:bg-sky-800 rounded text-xs">env(&quot;VAR_NAME&quot;, &quot;default&quot;)</code> to read from your project&#39;s <code class="px-1 py-0.5 bg-sky-100 dark:bg-sky-800 rounded text-xs">.env</code> file. This keeps credentials out of version control while letting each machine use its own values. </p><p class="text-sm text-sky-800 dark:text-sky-200"> You can also type values directly (e.g. <code class="px-1 py-0.5 bg-sky-100 dark:bg-sky-800 rounded text-xs">localhost</code> or <code class="px-1 py-0.5 bg-sky-100 dark:bg-sky-800 rounded text-xs">5432</code>) if you don&#39;t need environment variable substitution. </p></div>',1)),S(Gf,{"database-connections":ie.value,"onUpdate:databaseConnections":M[2]||(M[2]=z=>ie.value=z),"s3-connections":A.value,"onUpdate:s3Connections":M[3]||(M[3]=z=>A.value=z),"default-database":$.value,"onUpdate:defaultDatabase":M[4]||(M[4]=z=>$.value=z),"default-storage-bucket":q.value,"onUpdate:defaultStorageBucket":M[5]||(M[5]=z=>q.value=z)},null,8,["database-connections","s3-connections","default-database","default-storage-bucket"])],512),[[tt,N.value==="connections-defaults"]]),qe(f("div",pR,[S(es,{flush:""},{default:X(()=>[M[37]||(M[37]=f("div",{class:"mb-6 rounded-lg border border-sky-200 bg-sky-50 p-4 dark:border-sky-800 dark:bg-sky-900/20"},[f("h4",{class:"text-sm font-semibold text-sky-900 dark:text-sky-100 mb-2"},"How .env files work"),f("p",{class:"text-sm text-sky-800 dark:text-sky-200 mb-2"},[de(" Environment variables let you keep sensitive data (passwords, API keys) separate from your code. Instead of hardcoding "),f("code",{class:"px-1 py-0.5 bg-sky-100 dark:bg-sky-800 rounded text-xs"},'password = "secret123"'),de(", your code reads from a variable: "),f("code",{class:"px-1 py-0.5 bg-sky-100 dark:bg-sky-800 rounded text-xs"},'Sys.getenv("POSTGRES_PASSWORD")')]),f("p",{class:"text-sm text-sky-800 dark:text-sky-200"},[de(" The "),f("code",{class:"px-1 py-0.5 bg-sky-100 dark:bg-sky-800 rounded text-xs"},".env"),de(" file is gitignored by default, so your secrets stay on your machine while your code can be shared safely. ")])],-1)),S(Yf,{groups:st.value,variables:Oe.value,"onUpdate:variables":M[6]||(M[6]=z=>Oe.value=z),"raw-content":Re.value,"onUpdate:rawContent":M[7]||(M[7]=z=>Re.value=z),"view-mode":Ue.value,"onUpdate:viewMode":M[8]||(M[8]=z=>Ue.value=z),"regroup-on-save":ot.value,"onUpdate:regroupOnSave":M[9]||(M[9]=z=>ot.value=z),"show-save-button":!1,"allow-show-values-toggle":!0},null,8,["groups","variables","raw-content","view-mode","regroup-on-save"]),f("div",gR,[S(Je,{variant:"primary",onClick:Xi,disabled:le.value},{default:X(()=>[de(J(le.value?"Saving":"Save Changes"),1)]),_:1},8,["disabled"])])]),_:1})],512),[[tt,N.value==="env-defaults"]]),qe(f("div",mR,[S(es,null,{default:X(()=>[S(Pd,null,{default:X(()=>[f("div",vR,[S(Se,{modelValue:V.value.projects_root,"onUpdate:modelValue":M[10]||(M[10]=z=>V.value.projects_root=z),label:"Default Projects Directory",hint:"New projects will be created in this directory by default",placeholder:"e.g., ~/projects or /Users/yourname/code"},null,8,["modelValue"]),S(W$,{positron:V.value.defaults.positron,"onUpdate:positron":M[11]||(M[11]=z=>V.value.defaults.positron=z),"notebook-format":V.value.defaults.notebook_format,"onUpdate:notebookFormat":M[12]||(M[12]=z=>V.value.defaults.notebook_format=z)},null,8,["positron","notebook-format"]),f("div",yR,[S(Uf,{modelValue:V.value.author,"onUpdate:modelValue":M[13]||(M[13]=z=>V.value.author=z)},null,8,["modelValue"])])])]),_:1})]),_:1})],512),[[tt,N.value==="basics"]]),qe(f("div",bR,[pe.value?gt.value&&p.value?(v(),k("div",AR,[S(Qf,{"project-type":pe.value,directories:V.value.project_types[pe.value].directories,"onUpdate:directories":M[14]||(M[14]=z=>V.value.project_types[pe.value].directories=z),"render-dirs":V.value.project_types[pe.value].render_dirs,"onUpdate:renderDirs":M[15]||(M[15]=z=>V.value.project_types[pe.value].render_dirs=z),enabled:Q[pe.value],"onUpdate:enabled":M[16]||(M[16]=z=>Q[pe.value]=z),"extra-directories":V.value.project_types[pe.value].extra_directories,"onUpdate:extraDirectories":M[17]||(M[17]=z=>V.value.project_types[pe.value].extra_directories=z),settings:V.value.project_types[pe.value],"onUpdate:settings":M[18]||(M[18]=z=>V.value.project_types[pe.value]=z),gitignore:V.value.project_types[pe.value].gitignore,"onUpdate:gitignore":M[19]||(M[19]=z=>V.value.project_types[pe.value].gitignore=z),catalog:p.value.project_types[pe.value]||{},"new-extra-ids":ee.value,"onUpdate:newExtraIds":M[20]||(M[20]=z=>ee.value=z),onReset:M[21]||(M[21]=z=>ks(pe.value))},null,8,["project-type","directories","render-dirs","enabled","extra-directories","settings","gitignore","catalog","new-extra-ids"])])):H("",!0):(v(),k("div",kR,[f("div",xR,[(v(!0),k(be,null,Le(Ee.value,z=>(v(),k("button",{key:z.key,onClick:he=>qr(z.key),class:"group relative w-full rounded-lg border border-gray-200 p-6 text-left transition hover:border-sky-300 dark:border-gray-700 dark:hover:border-sky-600"},[f("div",SR,[S(ct(Ca),{class:"h-6 w-6 flex-shrink-0 text-gray-400 transition group-hover:text-sky-600 dark:group-hover:text-sky-400"}),f("div",null,[f("h3",CR,J(z.label),1),f("p",_R,J(V.value.project_types[z.key]?.description||""),1)])])],8,wR))),128))])]))],512),[[tt,N.value==="structure"]]),qe(f("div",MR,[S(es,null,{default:X(()=>[S(Wf,{modelValue:Kr.value,"onUpdate:modelValue":M[22]||(M[22]=z=>Kr.value=z),flush:""},{note:X(()=>[...M[38]||(M[38]=[de(" Project-specific .gitignore templates can be customized in ",-1),f("a",{href:"#/settings/project-defaults",class:"text-sky-600 dark:text-sky-400 hover:underline"},"Project Defaults",-1),de(". ",-1)])]),_:1},8,["modelValue"])]),_:1})],512),[[tt,N.value==="git"]]),qe(f("div",DR,[S(es,null,{default:X(()=>[M[39]||(M[39]=f("div",null,[f("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Scaffold Behavior"),f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"},[de(" Automatic actions when "),f("code",{class:"px-1.5 py-0.5 bg-gray-200 dark:bg-gray-700 rounded text-xs"},"scaffold()"),de(" runs to initialize your project environment. ")])],-1)),S(Kf,{modelValue:Gr.value,"onUpdate:modelValue":M[23]||(M[23]=z=>Gr.value=z),flush:""},null,8,["modelValue"])]),_:1})],512),[[tt,N.value==="scaffold"]]),qe(f("div",ER,[S(Hf,{modelValue:Z.value,"onUpdate:modelValue":M[24]||(M[24]=z=>Z.value=z),"show-renv-toggle":!0},null,8,["modelValue"])],512),[[tt,N.value==="packages"]]),qe(f("div",TR,[S(es,{flush:""},{default:X(()=>[S(Jf,{modelValue:V.value.defaults.quarto,"onUpdate:modelValue":M[25]||(M[25]=z=>V.value.defaults.quarto=z)},null,8,["modelValue"])]),_:1})],512),[[tt,N.value==="quarto"]]),qe(f("div",jR,[S(es,null,{default:X(()=>[M[41]||(M[41]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Manage assistant support, canonical context files, and sync hooks for all new projects. ",-1)),S(qf,{modelValue:ge.value,"onUpdate:modelValue":M[26]||(M[26]=z=>ge.value=z),flush:!0,"show-editor":!0,"editor-height":"420px"},{"editor-actions":X(()=>[f("div",OR,[S(Je,{size:"sm",variant:"secondary",onClick:qn},{default:X(()=>[...M[40]||(M[40]=[de(" Open canonical file ",-1)])]),_:1})])]),_:1},8,["modelValue"])]),_:1})],512),[[tt,N.value==="ai"]]),qe(f("div",PR,[S(es,{flush:""},{default:X(()=>[f("div",$R,[(v(!0),k(be,null,Le(ye.value,z=>(v(),k("button",{key:z.key,type:"button",onClick:he=>P(z.key),class:xe(["px-3 py-1.5 rounded-full text-sm font-medium border transition",D.value===z.key?"bg-sky-100 text-sky-700 border-sky-300 dark:bg-sky-900/30 dark:text-sky-200 dark:border-sky-700":"text-gray-700 border-gray-200 hover:border-sky-300 hover:text-sky-700 dark:text-gray-300 dark:border-gray-700 dark:hover:text-sky-200"])},J(z.label),11,RR))),128))]),f("div",LR,[f("div",VR,[f("div",BR,[f("h4",IR,J(T.value.label)+" Template ",1),f("p",NR,J(T.value.description),1),M[42]||(M[42]=f("p",{class:"text-xs text-gray-500 dark:text-gray-500"},' Edits save with the main "Save Changes" button. ',-1))]),S(Je,{size:"sm",variant:"secondary",disabled:te[T.value.editorKey].loading,onClick:M[27]||(M[27]=z=>ue(z))},{default:X(()=>[...M[43]||(M[43]=[de(" Reset to default ",-1)])]),_:1},8,["disabled"])]),T.value.hasVariables?(v(),k("div",FR,[M[44]||(M[44]=f("h5",{class:"text-xs font-semibold text-sky-800 dark:text-sky-300 mb-2"},"Available Variables",-1)),f("table",zR,[f("tbody",null,[(v(),k(be,null,Le(se,z=>f("tr",{key:z.syntax},[f("td",UR,J(z.syntax),1),f("td",HR,J(z.description),1)])),64))])])])):H("",!0),S(xu,{modelValue:te[T.value.editorKey].contents,"onUpdate:modelValue":M[28]||(M[28]=z=>te[T.value.editorKey].contents=z),language:T.value.language,"auto-grow":""},null,8,["modelValue","language"])])]),_:1})],512),[[tt,N.value==="templates"]])])],512),[[tt,!me.value]]),S(Ni,{modelValue:oe.open,"onUpdate:modelValue":M[30]||(M[30]=z=>oe.open=z),size:"md",title:"Reset to Defaults",icon:"warning"},{default:X(()=>[f("p",qR,[M[45]||(M[45]=de(" Are you sure you want to reset ",-1)),f("strong",null,J(oe.projectTypeName),1),M[46]||(M[46]=de(" to default settings? This will discard all your customizations for this project type. ",-1))])]),actions:X(()=>[f("div",WR,[S(Je,{variant:"secondary",onClick:M[29]||(M[29]=z=>oe.open=!1)},{default:X(()=>[...M[47]||(M[47]=[de("Cancel",-1)])]),_:1}),S(Je,{variant:"primary",onClick:pl},{default:X(()=>[...M[48]||(M[48]=[de(" Reset to Defaults ",-1)])]),_:1})])]),_:1},8,["modelValue"])]))}},QR={class:"mx-auto max-w-5xl p-10"},YR={__name:"ProjectPackagesView",setup(s){return Y([]),as(async()=>{}),(e,t)=>(v(),k("div",QR,[S(Ir,{title:"Packages",description:"Manage R packages for this project."}),t[0]||(t[0]=Vr('<div class="mt-10 rounded-2xl border border-zinc-200 bg-white p-8 shadow-sm dark:border-zinc-800 dark:bg-zinc-900"><div class="flex items-center gap-3 border-b border-zinc-100 pb-6 dark:border-zinc-800"><div class="flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-sky-500 to-sky-600 shadow-lg shadow-sky-500/20"><svg class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg></div><h3 class="text-xl font-bold text-zinc-900 dark:text-white">Package Configuration</h3></div><div class="mt-8"><p class="text-sm text-zinc-600 dark:text-zinc-400"> Package management interface coming soon. This page will allow you to: </p><ul class="mt-4 space-y-2 text-sm text-zinc-600 dark:text-zinc-400"><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Add and remove project packages </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Specify package versions </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Toggle renv integration </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Install and update packages </li></ul></div></div>',1))]))}},XR={class:"mx-auto max-w-5xl p-10"},ZR={__name:"ProjectDataView",setup(s){return Y([]),as(async()=>{}),(e,t)=>(v(),k("div",XR,[S(Ir,{title:"Data",description:"Manage data catalog and sources for this project."}),t[0]||(t[0]=Vr('<div class="mt-10 rounded-2xl border border-zinc-200 bg-white p-8 shadow-sm dark:border-zinc-800 dark:bg-zinc-900"><div class="flex items-center gap-3 border-b border-zinc-100 pb-6 dark:border-zinc-800"><div class="flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-sky-500 to-sky-600 shadow-lg shadow-sky-500/20"><svg class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"></path></svg></div><h3 class="text-xl font-bold text-zinc-900 dark:text-white">Data Catalog</h3></div><div class="mt-8"><p class="text-sm text-zinc-600 dark:text-zinc-400"> Data catalog management interface coming soon. This page will allow you to: </p><ul class="mt-4 space-y-2 text-sm text-zinc-600 dark:text-zinc-400"><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Define data sources in the catalog </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Specify data formats (CSV, RDS, etc.) </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Configure encryption settings </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Track data integrity via digests </li></ul></div></div>',1))]))}},e7={class:"mx-auto max-w-5xl p-10"},t7={__name:"ProjectConnectionsView",setup(s){return Y([]),as(async()=>{}),(e,t)=>(v(),k("div",e7,[S(Ir,{title:"Connections",description:"Manage database connections for this project."}),t[0]||(t[0]=Vr('<div class="mt-10 rounded-2xl border border-zinc-200 bg-white p-8 shadow-sm dark:border-zinc-800 dark:bg-zinc-900"><div class="flex items-center gap-3 border-b border-zinc-100 pb-6 dark:border-zinc-800"><div class="flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-sky-500 to-sky-600 shadow-lg shadow-sky-500/20"><svg class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg></div><h3 class="text-xl font-bold text-zinc-900 dark:text-white">Database Connections</h3></div><div class="mt-8"><p class="text-sm text-zinc-600 dark:text-zinc-400"> Connection management interface coming soon. This page will allow you to: </p><ul class="mt-4 space-y-2 text-sm text-zinc-600 dark:text-zinc-400"><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Configure database connections (SQLite, PostgreSQL) </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Store connection credentials securely </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Test database connectivity </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Manage connection pooling settings </li></ul></div></div>',1))]))}},s7=[{path:"/",redirect:"/projects"},{path:"/docs",redirect:"/docs/category/1"},{path:"/docs/category/:categoryId",name:"docs-category",component:tC,props:!0},{path:"/projects",name:"projects",component:K4},{path:"/projects/new",name:"project-create",component:Pj},{path:"/project/:id",name:"project-detail",component:H$,props:!0},{path:"/settings/:section?/:subsection?",name:"settings",component:JR,props:!0},{path:"/project/packages",name:"project-packages",component:YR},{path:"/project/data",name:"project-data",component:ZR},{path:"/project/connections",name:"project-connections",component:t7}],n7=s2({history:$w(),routes:s7});Wx(G2).use(n7).mount("#app");
