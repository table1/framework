(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function s(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(n){if(n.ep)return;n.ep=!0;const r=s(n);fetch(n.href,r)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function rc(t){const e=Object.create(null);for(const s of t.split(","))e[s]=1;return s=>s in e}const ft={},tr=[],gi=()=>{},cm=()=>!1,ba=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),oc=t=>t.startsWith("onUpdate:"),It=Object.assign,lc=(t,e)=>{const s=t.indexOf(e);s>-1&&t.splice(s,1)},s1=Object.prototype.hasOwnProperty,ot=(t,e)=>s1.call(t,e),je=Array.isArray,sr=t=>Bo(t)==="[object Map]",Sr=t=>Bo(t)==="[object Set]",yf=t=>Bo(t)==="[object Date]",ze=t=>typeof t=="function",wt=t=>typeof t=="string",Gs=t=>typeof t=="symbol",ut=t=>t!==null&&typeof t=="object",fm=t=>(ut(t)||ze(t))&&ze(t.then)&&ze(t.catch),hm=Object.prototype.toString,Bo=t=>hm.call(t),i1=t=>Bo(t).slice(8,-1),pm=t=>Bo(t)==="[object Object]",ac=t=>wt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,qr=rc(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),xa=t=>{const e=Object.create(null);return(s=>e[s]||(e[s]=t(s)))},n1=/-\w/g,js=xa(t=>t.replace(n1,e=>e.slice(1).toUpperCase())),r1=/\B([A-Z])/g,Nn=xa(t=>t.replace(r1,"-$1").toLowerCase()),ka=xa(t=>t.charAt(0).toUpperCase()+t.slice(1)),tu=xa(t=>t?`on${ka(t)}`:""),en=(t,e)=>!Object.is(t,e),Vl=(t,...e)=>{for(let s=0;s<t.length;s++)t[s](...e)},mm=(t,e,s,i=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:i,value:s})},zl=t=>{const e=parseFloat(t);return isNaN(e)?t:e},o1=t=>{const e=wt(t)?Number(t):NaN;return isNaN(e)?t:e};let vf;const wa=()=>vf||(vf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ao(t){if(je(t)){const e={};for(let s=0;s<t.length;s++){const i=t[s],n=wt(i)?d1(i):ao(i);if(n)for(const r in n)e[r]=n[r]}return e}else if(wt(t)||ut(t))return t}const l1=/;(?![^(]*\))/g,a1=/:([^]+)/,u1=/\/\*[^]*?\*\//g;function d1(t){const e={};return t.replace(u1,"").split(l1).forEach(s=>{if(s){const i=s.split(a1);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function Ve(t){let e="";if(wt(t))e=t;else if(je(t))for(let s=0;s<t.length;s++){const i=Ve(t[s]);i&&(e+=i+" ")}else if(ut(t))for(const s in t)t[s]&&(e+=s+" ");return e.trim()}const c1="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",f1=rc(c1);function gm(t){return!!t||t===""}function h1(t,e){if(t.length!==e.length)return!1;let s=!0;for(let i=0;s&&i<t.length;i++)s=On(t[i],e[i]);return s}function On(t,e){if(t===e)return!0;let s=yf(t),i=yf(e);if(s||i)return s&&i?t.getTime()===e.getTime():!1;if(s=Gs(t),i=Gs(e),s||i)return t===e;if(s=je(t),i=je(e),s||i)return s&&i?h1(t,e):!1;if(s=ut(t),i=ut(e),s||i){if(!s||!i)return!1;const n=Object.keys(t).length,r=Object.keys(e).length;if(n!==r)return!1;for(const o in t){const l=t.hasOwnProperty(o),a=e.hasOwnProperty(o);if(l&&!a||!l&&a||!On(t[o],e[o]))return!1}}return String(t)===String(e)}function uc(t,e){return t.findIndex(s=>On(s,e))}const ym=t=>!!(t&&t.__v_isRef===!0),F=t=>wt(t)?t:t==null?"":je(t)||ut(t)&&(t.toString===hm||!ze(t.toString))?ym(t)?F(t.value):JSON.stringify(t,vm,2):String(t),vm=(t,e)=>ym(e)?vm(t,e.value):sr(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((s,[i,n],r)=>(s[su(i,r)+" =>"]=n,s),{})}:Sr(e)?{[`Set(${e.size})`]:[...e.values()].map(s=>su(s))}:Gs(e)?su(e):ut(e)&&!je(e)&&!pm(e)?String(e):e,su=(t,e="")=>{var s;return Gs(t)?`Symbol(${(s=t.description)!=null?s:e})`:t};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ps;class p1{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ps,!e&&ps&&(this.index=(ps.scopes||(ps.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].pause();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].resume();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].resume()}}run(e){if(this._active){const s=ps;try{return ps=this,e()}finally{ps=s}}}on(){++this._on===1&&(this.prevScope=ps,ps=this)}off(){this._on>0&&--this._on===0&&(ps=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let s,i;for(s=0,i=this.effects.length;s<i;s++)this.effects[s].stop();for(this.effects.length=0,s=0,i=this.cleanups.length;s<i;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,i=this.scopes.length;s<i;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function m1(){return ps}let pt;const iu=new WeakSet;class bm{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ps&&ps.active&&ps.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,iu.has(this)&&(iu.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||km(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,bf(this),wm(this);const e=pt,s=Hs;pt=this,Hs=!0;try{return this.fn()}finally{Sm(this),pt=e,Hs=s,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)fc(e);this.deps=this.depsTail=void 0,bf(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?iu.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Wu(this)&&this.run()}get dirty(){return Wu(this)}}let xm=0,Gr,Kr;function km(t,e=!1){if(t.flags|=8,e){t.next=Kr,Kr=t;return}t.next=Gr,Gr=t}function dc(){xm++}function cc(){if(--xm>0)return;if(Kr){let e=Kr;for(Kr=void 0;e;){const s=e.next;e.next=void 0,e.flags&=-9,e=s}}let t;for(;Gr;){let e=Gr;for(Gr=void 0;e;){const s=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(i){t||(t=i)}e=s}}if(t)throw t}function wm(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Sm(t){let e,s=t.depsTail,i=s;for(;i;){const n=i.prevDep;i.version===-1?(i===s&&(s=n),fc(i),g1(i)):e=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=n}t.deps=e,t.depsTail=s}function Wu(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Cm(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Cm(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===uo)||(t.globalVersion=uo,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Wu(t))))return;t.flags|=2;const e=t.dep,s=pt,i=Hs;pt=t,Hs=!0;try{wm(t);const n=t.fn(t._value);(e.version===0||en(n,t._value))&&(t.flags|=128,t._value=n,e.version++)}catch(n){throw e.version++,n}finally{pt=s,Hs=i,Sm(t),t.flags&=-3}}function fc(t,e=!1){const{dep:s,prevSub:i,nextSub:n}=t;if(i&&(i.nextSub=n,t.prevSub=void 0),n&&(n.prevSub=i,t.nextSub=void 0),s.subs===t&&(s.subs=i,!i&&s.computed)){s.computed.flags&=-5;for(let r=s.computed.deps;r;r=r.nextDep)fc(r,!0)}!e&&!--s.sc&&s.map&&s.map.delete(s.key)}function g1(t){const{prevDep:e,nextDep:s}=t;e&&(e.nextDep=s,t.prevDep=void 0),s&&(s.prevDep=e,t.nextDep=void 0)}let Hs=!0;const _m=[];function Pi(){_m.push(Hs),Hs=!1}function Oi(){const t=_m.pop();Hs=t===void 0?!0:t}function bf(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const s=pt;pt=void 0;try{e()}finally{pt=s}}}let uo=0;class y1{constructor(e,s){this.sub=e,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class hc{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!pt||!Hs||pt===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==pt)s=this.activeLink=new y1(pt,this),pt.deps?(s.prevDep=pt.depsTail,pt.depsTail.nextDep=s,pt.depsTail=s):pt.deps=pt.depsTail=s,Am(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const i=s.nextDep;i.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=i),s.prevDep=pt.depsTail,s.nextDep=void 0,pt.depsTail.nextDep=s,pt.depsTail=s,pt.deps===s&&(pt.deps=i)}return s}trigger(e){this.version++,uo++,this.notify(e)}notify(e){dc();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{cc()}}}function Am(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let i=e.deps;i;i=i.nextDep)Am(i)}const s=t.dep.subs;s!==t&&(t.prevSub=s,s&&(s.nextSub=t)),t.dep.subs=t}}const qu=new WeakMap,Tn=Symbol(""),Gu=Symbol(""),co=Symbol("");function Jt(t,e,s){if(Hs&&pt){let i=qu.get(t);i||qu.set(t,i=new Map);let n=i.get(s);n||(i.set(s,n=new hc),n.map=i,n.key=s),n.track()}}function Mi(t,e,s,i,n,r){const o=qu.get(t);if(!o){uo++;return}const l=a=>{a&&a.trigger()};if(dc(),e==="clear")o.forEach(l);else{const a=je(t),d=a&&ac(s);if(a&&s==="length"){const u=Number(i);o.forEach((f,h)=>{(h==="length"||h===co||!Gs(h)&&h>=u)&&l(f)})}else switch((s!==void 0||o.has(void 0))&&l(o.get(s)),d&&l(o.get(co)),e){case"add":a?d&&l(o.get("length")):(l(o.get(Tn)),sr(t)&&l(o.get(Gu)));break;case"delete":a||(l(o.get(Tn)),sr(t)&&l(o.get(Gu)));break;case"set":sr(t)&&l(o.get(Tn));break}}cc()}function Wn(t){const e=it(t);return e===t?e:(Jt(e,"iterate",co),$s(t)?e:e.map(zt))}function Sa(t){return Jt(t=it(t),"iterate",co),t}const v1={__proto__:null,[Symbol.iterator](){return nu(this,Symbol.iterator,zt)},concat(...t){return Wn(this).concat(...t.map(e=>je(e)?Wn(e):e))},entries(){return nu(this,"entries",t=>(t[1]=zt(t[1]),t))},every(t,e){return ki(this,"every",t,e,void 0,arguments)},filter(t,e){return ki(this,"filter",t,e,s=>s.map(zt),arguments)},find(t,e){return ki(this,"find",t,e,zt,arguments)},findIndex(t,e){return ki(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return ki(this,"findLast",t,e,zt,arguments)},findLastIndex(t,e){return ki(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return ki(this,"forEach",t,e,void 0,arguments)},includes(...t){return ru(this,"includes",t)},indexOf(...t){return ru(this,"indexOf",t)},join(t){return Wn(this).join(t)},lastIndexOf(...t){return ru(this,"lastIndexOf",t)},map(t,e){return ki(this,"map",t,e,void 0,arguments)},pop(){return Er(this,"pop")},push(...t){return Er(this,"push",t)},reduce(t,...e){return xf(this,"reduce",t,e)},reduceRight(t,...e){return xf(this,"reduceRight",t,e)},shift(){return Er(this,"shift")},some(t,e){return ki(this,"some",t,e,void 0,arguments)},splice(...t){return Er(this,"splice",t)},toReversed(){return Wn(this).toReversed()},toSorted(t){return Wn(this).toSorted(t)},toSpliced(...t){return Wn(this).toSpliced(...t)},unshift(...t){return Er(this,"unshift",t)},values(){return nu(this,"values",zt)}};function nu(t,e,s){const i=Sa(t),n=i[e]();return i!==t&&!$s(t)&&(n._next=n.next,n.next=()=>{const r=n._next();return r.done||(r.value=s(r.value)),r}),n}const b1=Array.prototype;function ki(t,e,s,i,n,r){const o=Sa(t),l=o!==t&&!$s(t),a=o[e];if(a!==b1[e]){const f=a.apply(t,r);return l?zt(f):f}let d=s;o!==t&&(l?d=function(f,h){return s.call(this,zt(f),h,t)}:s.length>2&&(d=function(f,h){return s.call(this,f,h,t)}));const u=a.call(o,d,i);return l&&n?n(u):u}function xf(t,e,s,i){const n=Sa(t);let r=s;return n!==t&&($s(t)?s.length>3&&(r=function(o,l,a){return s.call(this,o,l,a,t)}):r=function(o,l,a){return s.call(this,o,zt(l),a,t)}),n[e](r,...i)}function ru(t,e,s){const i=it(t);Jt(i,"iterate",co);const n=i[e](...s);return(n===-1||n===!1)&&gc(s[0])?(s[0]=it(s[0]),i[e](...s)):n}function Er(t,e,s=[]){Pi(),dc();const i=it(t)[e].apply(t,s);return cc(),Oi(),i}const x1=rc("__proto__,__v_isRef,__isVue"),Vm=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Gs));function k1(t){Gs(t)||(t=String(t));const e=it(this);return Jt(e,"has",t),e.hasOwnProperty(t)}class Mm{constructor(e=!1,s=!1){this._isReadonly=e,this._isShallow=s}get(e,s,i){if(s==="__v_skip")return e.__v_skip;const n=this._isReadonly,r=this._isShallow;if(s==="__v_isReactive")return!n;if(s==="__v_isReadonly")return n;if(s==="__v_isShallow")return r;if(s==="__v_raw")return i===(n?r?E1:$m:r?Em:Tm).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(i)?e:void 0;const o=je(e);if(!n){let a;if(o&&(a=v1[s]))return a;if(s==="hasOwnProperty")return k1}const l=Reflect.get(e,s,Zt(e)?e:i);if((Gs(s)?Vm.has(s):x1(s))||(n||Jt(e,"get",s),r))return l;if(Zt(l)){const a=o&&ac(s)?l:l.value;return n&&ut(a)?Ju(a):a}return ut(l)?n?Ju(l):hi(l):l}}class Dm extends Mm{constructor(e=!1){super(!1,e)}set(e,s,i,n){let r=e[s];if(!this._isShallow){const a=sn(r);if(!$s(i)&&!sn(i)&&(r=it(r),i=it(i)),!je(e)&&Zt(r)&&!Zt(i))return a||(r.value=i),!0}const o=je(e)&&ac(s)?Number(s)<e.length:ot(e,s),l=Reflect.set(e,s,i,Zt(e)?e:n);return e===it(n)&&(o?en(i,r)&&Mi(e,"set",s,i):Mi(e,"add",s,i)),l}deleteProperty(e,s){const i=ot(e,s);e[s];const n=Reflect.deleteProperty(e,s);return n&&i&&Mi(e,"delete",s,void 0),n}has(e,s){const i=Reflect.has(e,s);return(!Gs(s)||!Vm.has(s))&&Jt(e,"has",s),i}ownKeys(e){return Jt(e,"iterate",je(e)?"length":Tn),Reflect.ownKeys(e)}}class w1 extends Mm{constructor(e=!1){super(!0,e)}set(e,s){return!0}deleteProperty(e,s){return!0}}const S1=new Dm,C1=new w1,_1=new Dm(!0);const Ku=t=>t,Qo=t=>Reflect.getPrototypeOf(t);function A1(t,e,s){return function(...i){const n=this.__v_raw,r=it(n),o=sr(r),l=t==="entries"||t===Symbol.iterator&&o,a=t==="keys"&&o,d=n[t](...i),u=s?Ku:e?Fl:zt;return!e&&Jt(r,"iterate",a?Gu:Tn),{next(){const{value:f,done:h}=d.next();return h?{value:f,done:h}:{value:l?[u(f[0]),u(f[1])]:u(f),done:h}},[Symbol.iterator](){return this}}}}function Zo(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function V1(t,e){const s={get(n){const r=this.__v_raw,o=it(r),l=it(n);t||(en(n,l)&&Jt(o,"get",n),Jt(o,"get",l));const{has:a}=Qo(o),d=e?Ku:t?Fl:zt;if(a.call(o,n))return d(r.get(n));if(a.call(o,l))return d(r.get(l));r!==o&&r.get(n)},get size(){const n=this.__v_raw;return!t&&Jt(it(n),"iterate",Tn),n.size},has(n){const r=this.__v_raw,o=it(r),l=it(n);return t||(en(n,l)&&Jt(o,"has",n),Jt(o,"has",l)),n===l?r.has(n):r.has(n)||r.has(l)},forEach(n,r){const o=this,l=o.__v_raw,a=it(l),d=e?Ku:t?Fl:zt;return!t&&Jt(a,"iterate",Tn),l.forEach((u,f)=>n.call(r,d(u),d(f),o))}};return It(s,t?{add:Zo("add"),set:Zo("set"),delete:Zo("delete"),clear:Zo("clear")}:{add(n){!e&&!$s(n)&&!sn(n)&&(n=it(n));const r=it(this);return Qo(r).has.call(r,n)||(r.add(n),Mi(r,"add",n,n)),this},set(n,r){!e&&!$s(r)&&!sn(r)&&(r=it(r));const o=it(this),{has:l,get:a}=Qo(o);let d=l.call(o,n);d||(n=it(n),d=l.call(o,n));const u=a.call(o,n);return o.set(n,r),d?en(r,u)&&Mi(o,"set",n,r):Mi(o,"add",n,r),this},delete(n){const r=it(this),{has:o,get:l}=Qo(r);let a=o.call(r,n);a||(n=it(n),a=o.call(r,n)),l&&l.call(r,n);const d=r.delete(n);return a&&Mi(r,"delete",n,void 0),d},clear(){const n=it(this),r=n.size!==0,o=n.clear();return r&&Mi(n,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(n=>{s[n]=A1(n,t,e)}),s}function pc(t,e){const s=V1(t,e);return(i,n,r)=>n==="__v_isReactive"?!t:n==="__v_isReadonly"?t:n==="__v_raw"?i:Reflect.get(ot(s,n)&&n in i?s:i,n,r)}const M1={get:pc(!1,!1)},D1={get:pc(!1,!0)},T1={get:pc(!0,!1)};const Tm=new WeakMap,Em=new WeakMap,$m=new WeakMap,E1=new WeakMap;function $1(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function P1(t){return t.__v_skip||!Object.isExtensible(t)?0:$1(i1(t))}function hi(t){return sn(t)?t:mc(t,!1,S1,M1,Tm)}function Pm(t){return mc(t,!1,_1,D1,Em)}function Ju(t){return mc(t,!0,C1,T1,$m)}function mc(t,e,s,i,n){if(!ut(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const r=P1(t);if(r===0)return t;const o=n.get(t);if(o)return o;const l=new Proxy(t,r===2?i:s);return n.set(t,l),l}function ir(t){return sn(t)?ir(t.__v_raw):!!(t&&t.__v_isReactive)}function sn(t){return!!(t&&t.__v_isReadonly)}function $s(t){return!!(t&&t.__v_isShallow)}function gc(t){return t?!!t.__v_raw:!1}function it(t){const e=t&&t.__v_raw;return e?it(e):t}function O1(t){return!ot(t,"__v_skip")&&Object.isExtensible(t)&&mm(t,"__v_skip",!0),t}const zt=t=>ut(t)?hi(t):t,Fl=t=>ut(t)?Ju(t):t;function Zt(t){return t?t.__v_isRef===!0:!1}function he(t){return Om(t,!1)}function R1(t){return Om(t,!0)}function Om(t,e){return Zt(t)?t:new j1(t,e)}class j1{constructor(e,s){this.dep=new hc,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?e:it(e),this._value=s?e:zt(e),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(e){const s=this._rawValue,i=this.__v_isShallow||$s(e)||sn(e);e=i?e:it(e),en(e,s)&&(this._rawValue=e,this._value=i?e:zt(e),this.dep.trigger())}}function lt(t){return Zt(t)?t.value:t}const L1={get:(t,e,s)=>e==="__v_raw"?t:lt(Reflect.get(t,e,s)),set:(t,e,s,i)=>{const n=t[e];return Zt(n)&&!Zt(s)?(n.value=s,!0):Reflect.set(t,e,s,i)}};function Rm(t){return ir(t)?t:new Proxy(t,L1)}class B1{constructor(e,s,i){this.fn=e,this.setter=s,this._value=void 0,this.dep=new hc(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=uo-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&pt!==this)return km(this,!0),!0}get value(){const e=this.dep.track();return Cm(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function I1(t,e,s=!1){let i,n;return ze(t)?i=t:(i=t.get,n=t.set),new B1(i,n,s)}const el={},Hl=new WeakMap;let bn;function U1(t,e=!1,s=bn){if(s){let i=Hl.get(s);i||Hl.set(s,i=[]),i.push(t)}}function N1(t,e,s=ft){const{immediate:i,deep:n,once:r,scheduler:o,augmentJob:l,call:a}=s,d=T=>n?T:$s(T)||n===!1||n===0?Di(T,1):Di(T);let u,f,h,m,w=!1,S=!1;if(Zt(t)?(f=()=>t.value,w=$s(t)):ir(t)?(f=()=>d(t),w=!0):je(t)?(S=!0,w=t.some(T=>ir(T)||$s(T)),f=()=>t.map(T=>{if(Zt(T))return T.value;if(ir(T))return d(T);if(ze(T))return a?a(T,2):T()})):ze(t)?e?f=a?()=>a(t,2):t:f=()=>{if(h){Pi();try{h()}finally{Oi()}}const T=bn;bn=u;try{return a?a(t,3,[m]):t(m)}finally{bn=T}}:f=gi,e&&n){const T=f,N=n===!0?1/0:n;f=()=>Di(T(),N)}const _=m1(),M=()=>{u.stop(),_&&_.active&&lc(_.effects,u)};if(r&&e){const T=e;e=(...N)=>{T(...N),M()}}let L=S?new Array(t.length).fill(el):el;const $=T=>{if(!(!(u.flags&1)||!u.dirty&&!T))if(e){const N=u.run();if(n||w||(S?N.some((B,I)=>en(B,L[I])):en(N,L))){h&&h();const B=bn;bn=u;try{const I=[N,L===el?void 0:S&&L[0]===el?[]:L,m];L=N,a?a(e,3,I):e(...I)}finally{bn=B}}}else u.run()};return l&&l($),u=new bm(f),u.scheduler=o?()=>o($,!1):$,m=T=>U1(T,!1,u),h=u.onStop=()=>{const T=Hl.get(u);if(T){if(a)a(T,4);else for(const N of T)N();Hl.delete(u)}},e?i?$(!0):L=u.run():o?o($.bind(null,!0),!0):u.run(),M.pause=u.pause.bind(u),M.resume=u.resume.bind(u),M.stop=M,M}function Di(t,e=1/0,s){if(e<=0||!ut(t)||t.__v_skip||(s=s||new Map,(s.get(t)||0)>=e))return t;if(s.set(t,e),e--,Zt(t))Di(t.value,e,s);else if(je(t))for(let i=0;i<t.length;i++)Di(t[i],e,s);else if(Sr(t)||sr(t))t.forEach(i=>{Di(i,e,s)});else if(pm(t)){for(const i in t)Di(t[i],e,s);for(const i of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,i)&&Di(t[i],e,s)}return t}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Io(t,e,s,i){try{return i?t(...i):t()}catch(n){Ca(n,e,s)}}function Ks(t,e,s,i){if(ze(t)){const n=Io(t,e,s,i);return n&&fm(n)&&n.catch(r=>{Ca(r,e,s)}),n}if(je(t)){const n=[];for(let r=0;r<t.length;r++)n.push(Ks(t[r],e,s,i));return n}}function Ca(t,e,s,i=!0){const n=e?e.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||ft;if(e){let l=e.parent;const a=e.proxy,d=`https://vuejs.org/error-reference/#runtime-${s}`;for(;l;){const u=l.ec;if(u){for(let f=0;f<u.length;f++)if(u[f](t,a,d)===!1)return}l=l.parent}if(r){Pi(),Io(r,null,10,[t,a,d]),Oi();return}}z1(t,s,n,i,o)}function z1(t,e,s,i=!0,n=!1){if(n)throw t;console.error(t)}const ds=[];let ai=-1;const nr=[];let Fi=null,qn=0;const jm=Promise.resolve();let Wl=null;function En(t){const e=Wl||jm;return t?e.then(this?t.bind(this):t):e}function F1(t){let e=ai+1,s=ds.length;for(;e<s;){const i=e+s>>>1,n=ds[i],r=fo(n);r<t||r===t&&n.flags&2?e=i+1:s=i}return e}function yc(t){if(!(t.flags&1)){const e=fo(t),s=ds[ds.length-1];!s||!(t.flags&2)&&e>=fo(s)?ds.push(t):ds.splice(F1(e),0,t),t.flags|=1,Lm()}}function Lm(){Wl||(Wl=jm.then(Im))}function H1(t){je(t)?nr.push(...t):Fi&&t.id===-1?Fi.splice(qn+1,0,t):t.flags&1||(nr.push(t),t.flags|=1),Lm()}function kf(t,e,s=ai+1){for(;s<ds.length;s++){const i=ds[s];if(i&&i.flags&2){if(t&&i.id!==t.uid)continue;ds.splice(s,1),s--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function Bm(t){if(nr.length){const e=[...new Set(nr)].sort((s,i)=>fo(s)-fo(i));if(nr.length=0,Fi){Fi.push(...e);return}for(Fi=e,qn=0;qn<Fi.length;qn++){const s=Fi[qn];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}Fi=null,qn=0}}const fo=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Im(t){try{for(ai=0;ai<ds.length;ai++){const e=ds[ai];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Io(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;ai<ds.length;ai++){const e=ds[ai];e&&(e.flags&=-2)}ai=-1,ds.length=0,Bm(),Wl=null,(ds.length||nr.length)&&Im()}}let Wt=null,Um=null;function ql(t){const e=Wt;return Wt=t,Um=t&&t.type.__scopeId||null,e}function R(t,e=Wt,s){if(!e||t._n)return t;const i=(...n)=>{i._d&&Yl(-1);const r=ql(e);let o;try{o=t(...n)}finally{ql(r),i._d&&Yl(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function He(t,e){if(Wt===null)return t;const s=Ta(Wt),i=t.dirs||(t.dirs=[]);for(let n=0;n<e.length;n++){let[r,o,l,a=ft]=e[n];r&&(ze(r)&&(r={mounted:r,updated:r}),r.deep&&Di(o),i.push({dir:r,instance:s,value:o,oldValue:void 0,arg:l,modifiers:a}))}return t}function pn(t,e,s,i){const n=t.dirs,r=e&&e.dirs;for(let o=0;o<n.length;o++){const l=n[o];r&&(l.oldValue=r[o].value);let a=l.dir[i];a&&(Pi(),Ks(a,s,8,[t.el,l,t,e]),Oi())}}const Nm=Symbol("_vte"),zm=t=>t.__isTeleport,Jr=t=>t&&(t.disabled||t.disabled===""),wf=t=>t&&(t.defer||t.defer===""),Sf=t=>typeof SVGElement<"u"&&t instanceof SVGElement,Cf=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,Yu=(t,e)=>{const s=t&&t.to;return wt(s)?e?e(s):null:s},Fm={name:"Teleport",__isTeleport:!0,process(t,e,s,i,n,r,o,l,a,d){const{mc:u,pc:f,pbc:h,o:{insert:m,querySelector:w,createText:S,createComment:_}}=d,M=Jr(e.props);let{shapeFlag:L,children:$,dynamicChildren:T}=e;if(t==null){const N=e.el=S(""),B=e.anchor=S("");m(N,s,i),m(B,s,i);const I=(ee,fe)=>{L&16&&u($,ee,fe,n,r,o,l,a)},Z=()=>{const ee=e.target=Yu(e.props,w),fe=Wm(ee,e,S,m);ee&&(o!=="svg"&&Sf(ee)?o="svg":o!=="mathml"&&Cf(ee)&&(o="mathml"),n&&n.isCE&&(n.ce._teleportTargets||(n.ce._teleportTargets=new Set)).add(ee),M||(I(ee,fe),Ml(e,!1)))};M&&(I(s,B),Ml(e,!0)),wf(e.props)?(e.el.__isMounted=!1,ls(()=>{Z(),delete e.el.__isMounted},r)):Z()}else{if(wf(e.props)&&t.el.__isMounted===!1){ls(()=>{Fm.process(t,e,s,i,n,r,o,l,a,d)},r);return}e.el=t.el,e.targetStart=t.targetStart;const N=e.anchor=t.anchor,B=e.target=t.target,I=e.targetAnchor=t.targetAnchor,Z=Jr(t.props),ee=Z?s:B,fe=Z?N:I;if(o==="svg"||Sf(B)?o="svg":(o==="mathml"||Cf(B))&&(o="mathml"),T?(h(t.dynamicChildren,T,ee,n,r,o,l),xc(t,e,!0)):a||f(t,e,ee,fe,n,r,o,l,!1),M)Z?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):tl(e,s,N,d,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const X=e.target=Yu(e.props,w);X&&tl(e,X,null,d,0)}else Z&&tl(e,B,I,d,1);Ml(e,M)}},remove(t,e,s,{um:i,o:{remove:n}},r){const{shapeFlag:o,children:l,anchor:a,targetStart:d,targetAnchor:u,target:f,props:h}=t;if(f&&(n(d),n(u)),r&&n(a),o&16){const m=r||!Jr(h);for(let w=0;w<l.length;w++){const S=l[w];i(S,e,s,m,!!S.dynamicChildren)}}},move:tl,hydrate:W1};function tl(t,e,s,{o:{insert:i},m:n},r=2){r===0&&i(t.targetAnchor,e,s);const{el:o,anchor:l,shapeFlag:a,children:d,props:u}=t,f=r===2;if(f&&i(o,e,s),(!f||Jr(u))&&a&16)for(let h=0;h<d.length;h++)n(d[h],e,s,2);f&&i(l,e,s)}function W1(t,e,s,i,n,r,{o:{nextSibling:o,parentNode:l,querySelector:a,insert:d,createText:u}},f){function h(S,_,M,L){_.anchor=f(o(S),_,l(S),s,i,n,r),_.targetStart=M,_.targetAnchor=L}const m=e.target=Yu(e.props,a),w=Jr(e.props);if(m){const S=m._lpa||m.firstChild;if(e.shapeFlag&16)if(w)h(t,e,S,S&&o(S));else{e.anchor=o(t);let _=S;for(;_;){if(_&&_.nodeType===8){if(_.data==="teleport start anchor")e.targetStart=_;else if(_.data==="teleport anchor"){e.targetAnchor=_,m._lpa=e.targetAnchor&&o(e.targetAnchor);break}}_=o(_)}e.targetAnchor||Wm(m,e,u,d),f(S&&o(S),e,m,s,i,n,r)}Ml(e,w)}else w&&e.shapeFlag&16&&h(t,e,t,o(t));return e.anchor&&o(e.anchor)}const Hm=Fm;function Ml(t,e){const s=t.ctx;if(s&&s.ut){let i,n;for(e?(i=t.el,n=t.anchor):(i=t.targetStart,n=t.targetAnchor);i&&i!==n;)i.nodeType===1&&i.setAttribute("data-v-owner",s.uid),i=i.nextSibling;s.ut()}}function Wm(t,e,s,i){const n=e.targetStart=s(""),r=e.targetAnchor=s("");return n[Nm]=r,t&&(i(n,t),i(r,t)),r}const Vi=Symbol("_leaveCb"),sl=Symbol("_enterCb");function q1(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return es(()=>{t.isMounted=!0}),eg(()=>{t.isUnmounting=!0}),t}const Ms=[Function,Array],qm={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ms,onEnter:Ms,onAfterEnter:Ms,onEnterCancelled:Ms,onBeforeLeave:Ms,onLeave:Ms,onAfterLeave:Ms,onLeaveCancelled:Ms,onBeforeAppear:Ms,onAppear:Ms,onAfterAppear:Ms,onAppearCancelled:Ms},Gm=t=>{const e=t.subTree;return e.component?Gm(e.component):e},G1={name:"BaseTransition",props:qm,setup(t,{slots:e}){const s=wc(),i=q1();return()=>{const n=e.default&&Ym(e.default(),!0);if(!n||!n.length)return;const r=Km(n),o=it(t),{mode:l}=o;if(i.isLeaving)return ou(r);const a=_f(r);if(!a)return ou(r);let d=Xu(a,o,i,s,f=>d=f);a.type!==Yt&&ho(a,d);let u=s.subTree&&_f(s.subTree);if(u&&u.type!==Yt&&!Sn(u,a)&&Gm(s).type!==Yt){let f=Xu(u,o,i,s);if(ho(u,f),l==="out-in"&&a.type!==Yt)return i.isLeaving=!0,f.afterLeave=()=>{i.isLeaving=!1,s.job.flags&8||s.update(),delete f.afterLeave,u=void 0},ou(r);l==="in-out"&&a.type!==Yt?f.delayLeave=(h,m,w)=>{const S=Jm(i,u);S[String(u.key)]=u,h[Vi]=()=>{m(),h[Vi]=void 0,delete d.delayedLeave,u=void 0},d.delayedLeave=()=>{w(),delete d.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return r}}};function Km(t){let e=t[0];if(t.length>1){for(const s of t)if(s.type!==Yt){e=s;break}}return e}const K1=G1;function Jm(t,e){const{leavingVNodes:s}=t;let i=s.get(e.type);return i||(i=Object.create(null),s.set(e.type,i)),i}function Xu(t,e,s,i,n){const{appear:r,mode:o,persisted:l=!1,onBeforeEnter:a,onEnter:d,onAfterEnter:u,onEnterCancelled:f,onBeforeLeave:h,onLeave:m,onAfterLeave:w,onLeaveCancelled:S,onBeforeAppear:_,onAppear:M,onAfterAppear:L,onAppearCancelled:$}=e,T=String(t.key),N=Jm(s,t),B=(ee,fe)=>{ee&&Ks(ee,i,9,fe)},I=(ee,fe)=>{const X=fe[1];B(ee,fe),je(ee)?ee.every(z=>z.length<=1)&&X():ee.length<=1&&X()},Z={mode:o,persisted:l,beforeEnter(ee){let fe=a;if(!s.isMounted)if(r)fe=_||a;else return;ee[Vi]&&ee[Vi](!0);const X=N[T];X&&Sn(t,X)&&X.el[Vi]&&X.el[Vi](),B(fe,[ee])},enter(ee){let fe=d,X=u,z=f;if(!s.isMounted)if(r)fe=M||d,X=L||u,z=$||f;else return;let ae=!1;const oe=ee[sl]=H=>{ae||(ae=!0,H?B(z,[ee]):B(X,[ee]),Z.delayedLeave&&Z.delayedLeave(),ee[sl]=void 0)};fe?I(fe,[ee,oe]):oe()},leave(ee,fe){const X=String(t.key);if(ee[sl]&&ee[sl](!0),s.isUnmounting)return fe();B(h,[ee]);let z=!1;const ae=ee[Vi]=oe=>{z||(z=!0,fe(),oe?B(S,[ee]):B(w,[ee]),ee[Vi]=void 0,N[X]===t&&delete N[X])};N[X]=t,m?I(m,[ee,ae]):ae()},clone(ee){const fe=Xu(ee,e,s,i,n);return n&&n(fe),fe}};return Z}function ou(t){if(_a(t))return t=nn(t),t.children=null,t}function _f(t){if(!_a(t))return zm(t.type)&&t.children?Km(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:s}=t;if(s){if(e&16)return s[0];if(e&32&&ze(s.default))return s.default()}}function ho(t,e){t.shapeFlag&6&&t.component?(t.transition=e,ho(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Ym(t,e=!1,s){let i=[],n=0;for(let r=0;r<t.length;r++){let o=t[r];const l=s==null?o.key:String(s)+String(o.key!=null?o.key:r);o.type===J?(o.patchFlag&128&&n++,i=i.concat(Ym(o.children,e,l))):(e||o.type!==Yt)&&i.push(l!=null?nn(o,{key:l}):o)}if(n>1)for(let r=0;r<i.length;r++)i[r].patchFlag=-2;return i}function Xm(t,e){return ze(t)?It({name:t.name},e,{setup:t}):t}function Qm(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const Gl=new WeakMap;function Yr(t,e,s,i,n=!1){if(je(t)){t.forEach((w,S)=>Yr(w,e&&(je(e)?e[S]:e),s,i,n));return}if(rr(i)&&!n){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&Yr(t,e,s,i.component.subTree);return}const r=i.shapeFlag&4?Ta(i.component):i.el,o=n?null:r,{i:l,r:a}=t,d=e&&e.r,u=l.refs===ft?l.refs={}:l.refs,f=l.setupState,h=it(f),m=f===ft?cm:w=>ot(h,w);if(d!=null&&d!==a){if(Af(e),wt(d))u[d]=null,m(d)&&(f[d]=null);else if(Zt(d)){d.value=null;const w=e;w.k&&(u[w.k]=null)}}if(ze(a))Io(a,l,12,[o,u]);else{const w=wt(a),S=Zt(a);if(w||S){const _=()=>{if(t.f){const M=w?m(a)?f[a]:u[a]:a.value;if(n)je(M)&&lc(M,r);else if(je(M))M.includes(r)||M.push(r);else if(w)u[a]=[r],m(a)&&(f[a]=u[a]);else{const L=[r];a.value=L,t.k&&(u[t.k]=L)}}else w?(u[a]=o,m(a)&&(f[a]=o)):S&&(a.value=o,t.k&&(u[t.k]=o))};if(o){const M=()=>{_(),Gl.delete(t)};M.id=-1,Gl.set(t,M),ls(M,s)}else Af(t),_()}}}function Af(t){const e=Gl.get(t);e&&(e.flags|=8,Gl.delete(t))}wa().requestIdleCallback;wa().cancelIdleCallback;const rr=t=>!!t.type.__asyncLoader,_a=t=>t.type.__isKeepAlive;function J1(t,e){Zm(t,"a",e)}function Y1(t,e){Zm(t,"da",e)}function Zm(t,e,s=Xt){const i=t.__wdc||(t.__wdc=()=>{let n=s;for(;n;){if(n.isDeactivated)return;n=n.parent}return t()});if(Aa(e,i,s),s){let n=s.parent;for(;n&&n.parent;)_a(n.parent.vnode)&&X1(i,e,s,n),n=n.parent}}function X1(t,e,s,i){const n=Aa(e,t,i,!0);Cr(()=>{lc(i[e],n)},s)}function Aa(t,e,s=Xt,i=!1){if(s){const n=s[t]||(s[t]=[]),r=e.__weh||(e.__weh=(...o)=>{Pi();const l=Uo(s),a=Ks(e,s,t,o);return l(),Oi(),a});return i?n.unshift(r):n.push(r),r}}const Bi=t=>(e,s=Xt)=>{(!go||t==="sp")&&Aa(t,(...i)=>e(...i),s)},Q1=Bi("bm"),es=Bi("m"),Z1=Bi("bu"),eb=Bi("u"),eg=Bi("bum"),Cr=Bi("um"),tb=Bi("sp"),sb=Bi("rtg"),ib=Bi("rtc");function nb(t,e=Xt){Aa("ec",t,e)}const tg="components";function Kl(t,e){return ig(tg,t,!0,e)||t}const sg=Symbol.for("v-ndc");function Ws(t){return wt(t)?ig(tg,t,!1)||t:t||sg}function ig(t,e,s=!0,i=!1){const n=Wt||Xt;if(n){const r=n.type;{const l=Gb(r,!1);if(l&&(l===e||l===js(e)||l===ka(js(e))))return r}const o=Vf(n[t]||r[t],e)||Vf(n.appContext[t],e);return!o&&i?r:o}}function Vf(t,e){return t&&(t[e]||t[js(e)]||t[ka(js(e))])}function ve(t,e,s,i){let n;const r=s,o=je(t);if(o||wt(t)){const l=o&&ir(t);let a=!1,d=!1;l&&(a=!$s(t),d=sn(t),t=Sa(t)),n=new Array(t.length);for(let u=0,f=t.length;u<f;u++)n[u]=e(a?d?Fl(zt(t[u])):zt(t[u]):t[u],u,void 0,r)}else if(typeof t=="number"){n=new Array(t);for(let l=0;l<t;l++)n[l]=e(l+1,l,void 0,r)}else if(ut(t))if(t[Symbol.iterator])n=Array.from(t,(l,a)=>e(l,a,void 0,r));else{const l=Object.keys(t);n=new Array(l.length);for(let a=0,d=l.length;a<d;a++){const u=l[a];n[a]=e(t[u],u,a,r)}}else n=[];return n}function rb(t,e){for(let s=0;s<e.length;s++){const i=e[s];if(je(i))for(let n=0;n<i.length;n++)t[i[n].name]=i[n].fn;else i&&(t[i.name]=i.key?(...n)=>{const r=i.fn(...n);return r&&(r.key=i.key),r}:i.fn)}return t}function Ct(t,e,s={},i,n){if(Wt.ce||Wt.parent&&rr(Wt.parent)&&Wt.parent.ce){const d=Object.keys(s).length>0;return e!=="default"&&(s.name=e),y(),me(J,null,[k("slot",s,i&&i())],d?-2:64)}let r=t[e];r&&r._c&&(r._d=!1),y();const o=r&&ng(r(s)),l=s.key||o&&o.key,a=me(J,{key:(l&&!Gs(l)?l:`_${e}`)+(!o&&i?"_fb":"")},o||(i?i():[]),o&&t._===1?64:-2);return!n&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),r&&r._c&&(r._d=!0),a}function ng(t){return t.some(e=>mo(e)?!(e.type===Yt||e.type===J&&!ng(e.children)):!0)?t:null}const Qu=t=>t?Sg(t)?Ta(t):Qu(t.parent):null,Xr=It(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Qu(t.parent),$root:t=>Qu(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>og(t),$forceUpdate:t=>t.f||(t.f=()=>{yc(t.update)}),$nextTick:t=>t.n||(t.n=En.bind(t.proxy)),$watch:t=>Mb.bind(t)}),lu=(t,e)=>t!==ft&&!t.__isScriptSetup&&ot(t,e),ob={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:s,setupState:i,data:n,props:r,accessCache:o,type:l,appContext:a}=t;let d;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return i[e];case 2:return n[e];case 4:return s[e];case 3:return r[e]}else{if(lu(i,e))return o[e]=1,i[e];if(n!==ft&&ot(n,e))return o[e]=2,n[e];if((d=t.propsOptions[0])&&ot(d,e))return o[e]=3,r[e];if(s!==ft&&ot(s,e))return o[e]=4,s[e];Zu&&(o[e]=0)}}const u=Xr[e];let f,h;if(u)return e==="$attrs"&&Jt(t.attrs,"get",""),u(t);if((f=l.__cssModules)&&(f=f[e]))return f;if(s!==ft&&ot(s,e))return o[e]=4,s[e];if(h=a.config.globalProperties,ot(h,e))return h[e]},set({_:t},e,s){const{data:i,setupState:n,ctx:r}=t;return lu(n,e)?(n[e]=s,!0):i!==ft&&ot(i,e)?(i[e]=s,!0):ot(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(r[e]=s,!0)},has({_:{data:t,setupState:e,accessCache:s,ctx:i,appContext:n,propsOptions:r,type:o}},l){let a,d;return!!(s[l]||t!==ft&&l[0]!=="$"&&ot(t,l)||lu(e,l)||(a=r[0])&&ot(a,l)||ot(i,l)||ot(Xr,l)||ot(n.config.globalProperties,l)||(d=o.__cssModules)&&d[l])},defineProperty(t,e,s){return s.get!=null?t._.accessCache[e]=0:ot(s,"value")&&this.set(t,e,s.value,null),Reflect.defineProperty(t,e,s)}};function lb(){return ab().slots}function ab(t){const e=wc();return e.setupContext||(e.setupContext=_g(e))}function Mf(t){return je(t)?t.reduce((e,s)=>(e[s]=null,e),{}):t}let Zu=!0;function ub(t){const e=og(t),s=t.proxy,i=t.ctx;Zu=!1,e.beforeCreate&&Df(e.beforeCreate,t,"bc");const{data:n,computed:r,methods:o,watch:l,provide:a,inject:d,created:u,beforeMount:f,mounted:h,beforeUpdate:m,updated:w,activated:S,deactivated:_,beforeDestroy:M,beforeUnmount:L,destroyed:$,unmounted:T,render:N,renderTracked:B,renderTriggered:I,errorCaptured:Z,serverPrefetch:ee,expose:fe,inheritAttrs:X,components:z,directives:ae,filters:oe}=e;if(d&&db(d,i,null),o)for(const p in o){const D=o[p];ze(D)&&(i[p]=D.bind(s))}if(n){const p=n.call(s,s);ut(p)&&(t.data=hi(p))}if(Zu=!0,r)for(const p in r){const D=r[p],Y=ze(D)?D.bind(s,s):ze(D.get)?D.get.bind(s,s):gi,A=!ze(D)&&ze(D.set)?D.set.bind(s):gi,be=le({get:Y,set:A});Object.defineProperty(i,p,{enumerable:!0,configurable:!0,get:()=>be.value,set:ge=>be.value=ge})}if(l)for(const p in l)rg(l[p],i,s,p);if(a){const p=ze(a)?a.call(s):a;Reflect.ownKeys(p).forEach(D=>{Dl(D,p[D])})}u&&Df(u,t,"c");function g(p,D){je(D)?D.forEach(Y=>p(Y.bind(s))):D&&p(D.bind(s))}if(g(Q1,f),g(es,h),g(Z1,m),g(eb,w),g(J1,S),g(Y1,_),g(nb,Z),g(ib,B),g(sb,I),g(eg,L),g(Cr,T),g(tb,ee),je(fe))if(fe.length){const p=t.exposed||(t.exposed={});fe.forEach(D=>{Object.defineProperty(p,D,{get:()=>s[D],set:Y=>s[D]=Y,enumerable:!0})})}else t.exposed||(t.exposed={});N&&t.render===gi&&(t.render=N),X!=null&&(t.inheritAttrs=X),z&&(t.components=z),ae&&(t.directives=ae),ee&&Qm(t)}function db(t,e,s=gi){je(t)&&(t=ed(t));for(const i in t){const n=t[i];let r;ut(n)?"default"in n?r=qs(n.from||i,n.default,!0):r=qs(n.from||i):r=qs(n),Zt(r)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):e[i]=r}}function Df(t,e,s){Ks(je(t)?t.map(i=>i.bind(e.proxy)):t.bind(e.proxy),e,s)}function rg(t,e,s,i){let n=i.includes(".")?vg(s,i):()=>s[i];if(wt(t)){const r=e[t];ze(r)&&Ye(n,r)}else if(ze(t))Ye(n,t.bind(s));else if(ut(t))if(je(t))t.forEach(r=>rg(r,e,s,i));else{const r=ze(t.handler)?t.handler.bind(s):e[t.handler];ze(r)&&Ye(n,r,t)}}function og(t){const e=t.type,{mixins:s,extends:i}=e,{mixins:n,optionsCache:r,config:{optionMergeStrategies:o}}=t.appContext,l=r.get(e);let a;return l?a=l:!n.length&&!s&&!i?a=e:(a={},n.length&&n.forEach(d=>Jl(a,d,o,!0)),Jl(a,e,o)),ut(e)&&r.set(e,a),a}function Jl(t,e,s,i=!1){const{mixins:n,extends:r}=e;r&&Jl(t,r,s,!0),n&&n.forEach(o=>Jl(t,o,s,!0));for(const o in e)if(!(i&&o==="expose")){const l=cb[o]||s&&s[o];t[o]=l?l(t[o],e[o]):e[o]}return t}const cb={data:Tf,props:Ef,emits:Ef,methods:Nr,computed:Nr,beforeCreate:os,created:os,beforeMount:os,mounted:os,beforeUpdate:os,updated:os,beforeDestroy:os,beforeUnmount:os,destroyed:os,unmounted:os,activated:os,deactivated:os,errorCaptured:os,serverPrefetch:os,components:Nr,directives:Nr,watch:hb,provide:Tf,inject:fb};function Tf(t,e){return e?t?function(){return It(ze(t)?t.call(this,this):t,ze(e)?e.call(this,this):e)}:e:t}function fb(t,e){return Nr(ed(t),ed(e))}function ed(t){if(je(t)){const e={};for(let s=0;s<t.length;s++)e[t[s]]=t[s];return e}return t}function os(t,e){return t?[...new Set([].concat(t,e))]:e}function Nr(t,e){return t?It(Object.create(null),t,e):e}function Ef(t,e){return t?je(t)&&je(e)?[...new Set([...t,...e])]:It(Object.create(null),Mf(t),Mf(e??{})):e}function hb(t,e){if(!t)return e;if(!e)return t;const s=It(Object.create(null),t);for(const i in e)s[i]=os(t[i],e[i]);return s}function lg(){return{app:null,config:{isNativeTag:cm,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let pb=0;function mb(t,e){return function(i,n=null){ze(i)||(i=It({},i)),n!=null&&!ut(n)&&(n=null);const r=lg(),o=new WeakSet,l=[];let a=!1;const d=r.app={_uid:pb++,_component:i,_props:n,_container:null,_context:r,_instance:null,version:Jb,get config(){return r.config},set config(u){},use(u,...f){return o.has(u)||(u&&ze(u.install)?(o.add(u),u.install(d,...f)):ze(u)&&(o.add(u),u(d,...f))),d},mixin(u){return r.mixins.includes(u)||r.mixins.push(u),d},component(u,f){return f?(r.components[u]=f,d):r.components[u]},directive(u,f){return f?(r.directives[u]=f,d):r.directives[u]},mount(u,f,h){if(!a){const m=d._ceVNode||k(i,n);return m.appContext=r,h===!0?h="svg":h===!1&&(h=void 0),t(m,u,h),a=!0,d._container=u,u.__vue_app__=d,Ta(m.component)}},onUnmount(u){l.push(u)},unmount(){a&&(Ks(l,d._instance,16),t(null,d._container),delete d._container.__vue_app__)},provide(u,f){return r.provides[u]=f,d},runWithContext(u){const f=or;or=d;try{return u()}finally{or=f}}};return d}}let or=null;function Dl(t,e){if(Xt){let s=Xt.provides;const i=Xt.parent&&Xt.parent.provides;i===s&&(s=Xt.provides=Object.create(i)),s[t]=e}}function qs(t,e,s=!1){const i=wc();if(i||or){let n=or?or._context.provides:i?i.parent==null||i.ce?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(n&&t in n)return n[t];if(arguments.length>1)return s&&ze(e)?e.call(i&&i.proxy):e}}const ag={},ug=()=>Object.create(ag),dg=t=>Object.getPrototypeOf(t)===ag;function gb(t,e,s,i=!1){const n={},r=ug();t.propsDefaults=Object.create(null),cg(t,e,n,r);for(const o in t.propsOptions[0])o in n||(n[o]=void 0);s?t.props=i?n:Pm(n):t.type.props?t.props=n:t.props=r,t.attrs=r}function yb(t,e,s,i){const{props:n,attrs:r,vnode:{patchFlag:o}}=t,l=it(n),[a]=t.propsOptions;let d=!1;if((i||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let f=0;f<u.length;f++){let h=u[f];if(Va(t.emitsOptions,h))continue;const m=e[h];if(a)if(ot(r,h))m!==r[h]&&(r[h]=m,d=!0);else{const w=js(h);n[w]=td(a,l,w,m,t,!1)}else m!==r[h]&&(r[h]=m,d=!0)}}}else{cg(t,e,n,r)&&(d=!0);let u;for(const f in l)(!e||!ot(e,f)&&((u=Nn(f))===f||!ot(e,u)))&&(a?s&&(s[f]!==void 0||s[u]!==void 0)&&(n[f]=td(a,l,f,void 0,t,!0)):delete n[f]);if(r!==l)for(const f in r)(!e||!ot(e,f))&&(delete r[f],d=!0)}d&&Mi(t.attrs,"set","")}function cg(t,e,s,i){const[n,r]=t.propsOptions;let o=!1,l;if(e)for(let a in e){if(qr(a))continue;const d=e[a];let u;n&&ot(n,u=js(a))?!r||!r.includes(u)?s[u]=d:(l||(l={}))[u]=d:Va(t.emitsOptions,a)||(!(a in i)||d!==i[a])&&(i[a]=d,o=!0)}if(r){const a=it(s),d=l||ft;for(let u=0;u<r.length;u++){const f=r[u];s[f]=td(n,a,f,d[f],t,!ot(d,f))}}return o}function td(t,e,s,i,n,r){const o=t[s];if(o!=null){const l=ot(o,"default");if(l&&i===void 0){const a=o.default;if(o.type!==Function&&!o.skipFactory&&ze(a)){const{propsDefaults:d}=n;if(s in d)i=d[s];else{const u=Uo(n);i=d[s]=a.call(null,e),u()}}else i=a;n.ce&&n.ce._setProp(s,i)}o[0]&&(r&&!l?i=!1:o[1]&&(i===""||i===Nn(s))&&(i=!0))}return i}const vb=new WeakMap;function fg(t,e,s=!1){const i=s?vb:e.propsCache,n=i.get(t);if(n)return n;const r=t.props,o={},l=[];let a=!1;if(!ze(t)){const u=f=>{a=!0;const[h,m]=fg(f,e,!0);It(o,h),m&&l.push(...m)};!s&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!r&&!a)return ut(t)&&i.set(t,tr),tr;if(je(r))for(let u=0;u<r.length;u++){const f=js(r[u]);$f(f)&&(o[f]=ft)}else if(r)for(const u in r){const f=js(u);if($f(f)){const h=r[u],m=o[f]=je(h)||ze(h)?{type:h}:It({},h),w=m.type;let S=!1,_=!0;if(je(w))for(let M=0;M<w.length;++M){const L=w[M],$=ze(L)&&L.name;if($==="Boolean"){S=!0;break}else $==="String"&&(_=!1)}else S=ze(w)&&w.name==="Boolean";m[0]=S,m[1]=_,(S||ot(m,"default"))&&l.push(f)}}const d=[o,l];return ut(t)&&i.set(t,d),d}function $f(t){return t[0]!=="$"&&!qr(t)}const vc=t=>t==="_"||t==="_ctx"||t==="$stable",bc=t=>je(t)?t.map(ui):[ui(t)],bb=(t,e,s)=>{if(e._n)return e;const i=R((...n)=>bc(e(...n)),s);return i._c=!1,i},hg=(t,e,s)=>{const i=t._ctx;for(const n in t){if(vc(n))continue;const r=t[n];if(ze(r))e[n]=bb(n,r,i);else if(r!=null){const o=bc(r);e[n]=()=>o}}},pg=(t,e)=>{const s=bc(e);t.slots.default=()=>s},mg=(t,e,s)=>{for(const i in e)(s||!vc(i))&&(t[i]=e[i])},xb=(t,e,s)=>{const i=t.slots=ug();if(t.vnode.shapeFlag&32){const n=e._;n?(mg(i,e,s),s&&mm(i,"_",n,!0)):hg(e,i)}else e&&pg(t,e)},kb=(t,e,s)=>{const{vnode:i,slots:n}=t;let r=!0,o=ft;if(i.shapeFlag&32){const l=e._;l?s&&l===1?r=!1:mg(n,e,s):(r=!e.$stable,hg(e,n)),o=e}else e&&(pg(t,e),o={default:1});if(r)for(const l in n)!vc(l)&&o[l]==null&&delete n[l]},ls=jb;function wb(t){return Sb(t)}function Sb(t,e){const s=wa();s.__VUE__=!0;const{insert:i,remove:n,patchProp:r,createElement:o,createText:l,createComment:a,setText:d,setElementText:u,parentNode:f,nextSibling:h,setScopeId:m=gi,insertStaticContent:w}=t,S=(E,P,W,Q=null,se=null,te=null,ye=void 0,re=null,ue=!!P.dynamicChildren)=>{if(E===P)return;E&&!Sn(E,P)&&(Q=V(E),ge(E,se,te,!0),E=null),P.patchFlag===-2&&(ue=!1,P.dynamicChildren=null);const{type:ce,ref:Oe,shapeFlag:Ce}=P;switch(ce){case Ma:_(E,P,W,Q);break;case Yt:M(E,P,W,Q);break;case Tl:E==null&&L(P,W,Q,ye);break;case J:z(E,P,W,Q,se,te,ye,re,ue);break;default:Ce&1?N(E,P,W,Q,se,te,ye,re,ue):Ce&6?ae(E,P,W,Q,se,te,ye,re,ue):(Ce&64||Ce&128)&&ce.process(E,P,W,Q,se,te,ye,re,ue,Ee)}Oe!=null&&se?Yr(Oe,E&&E.ref,te,P||E,!P):Oe==null&&E&&E.ref!=null&&Yr(E.ref,null,te,E,!0)},_=(E,P,W,Q)=>{if(E==null)i(P.el=l(P.children),W,Q);else{const se=P.el=E.el;P.children!==E.children&&d(se,P.children)}},M=(E,P,W,Q)=>{E==null?i(P.el=a(P.children||""),W,Q):P.el=E.el},L=(E,P,W,Q)=>{[E.el,E.anchor]=w(E.children,P,W,Q,E.el,E.anchor)},$=({el:E,anchor:P},W,Q)=>{let se;for(;E&&E!==P;)se=h(E),i(E,W,Q),E=se;i(P,W,Q)},T=({el:E,anchor:P})=>{let W;for(;E&&E!==P;)W=h(E),n(E),E=W;n(P)},N=(E,P,W,Q,se,te,ye,re,ue)=>{P.type==="svg"?ye="svg":P.type==="math"&&(ye="mathml"),E==null?B(P,W,Q,se,te,ye,re,ue):ee(E,P,se,te,ye,re,ue)},B=(E,P,W,Q,se,te,ye,re)=>{let ue,ce;const{props:Oe,shapeFlag:Ce,transition:Pe,dirs:Le}=E;if(ue=E.el=o(E.type,te,Oe&&Oe.is,Oe),Ce&8?u(ue,E.children):Ce&16&&Z(E.children,ue,null,Q,se,au(E,te),ye,re),Le&&pn(E,null,Q,"created"),I(ue,E,E.scopeId,ye,Q),Oe){for(const Ke in Oe)Ke!=="value"&&!qr(Ke)&&r(ue,Ke,null,Oe[Ke],te,Q);"value"in Oe&&r(ue,"value",null,Oe.value,te),(ce=Oe.onVnodeBeforeMount)&&si(ce,Q,E)}Le&&pn(E,null,Q,"beforeMount");const Ue=Cb(se,Pe);Ue&&Pe.beforeEnter(ue),i(ue,P,W),((ce=Oe&&Oe.onVnodeMounted)||Ue||Le)&&ls(()=>{ce&&si(ce,Q,E),Ue&&Pe.enter(ue),Le&&pn(E,null,Q,"mounted")},se)},I=(E,P,W,Q,se)=>{if(W&&m(E,W),Q)for(let te=0;te<Q.length;te++)m(E,Q[te]);if(se){let te=se.subTree;if(P===te||xg(te.type)&&(te.ssContent===P||te.ssFallback===P)){const ye=se.vnode;I(E,ye,ye.scopeId,ye.slotScopeIds,se.parent)}}},Z=(E,P,W,Q,se,te,ye,re,ue=0)=>{for(let ce=ue;ce<E.length;ce++){const Oe=E[ce]=re?Hi(E[ce]):ui(E[ce]);S(null,Oe,P,W,Q,se,te,ye,re)}},ee=(E,P,W,Q,se,te,ye)=>{const re=P.el=E.el;let{patchFlag:ue,dynamicChildren:ce,dirs:Oe}=P;ue|=E.patchFlag&16;const Ce=E.props||ft,Pe=P.props||ft;let Le;if(W&&mn(W,!1),(Le=Pe.onVnodeBeforeUpdate)&&si(Le,W,P,E),Oe&&pn(P,E,W,"beforeUpdate"),W&&mn(W,!0),(Ce.innerHTML&&Pe.innerHTML==null||Ce.textContent&&Pe.textContent==null)&&u(re,""),ce?fe(E.dynamicChildren,ce,re,W,Q,au(P,se),te):ye||D(E,P,re,null,W,Q,au(P,se),te,!1),ue>0){if(ue&16)X(re,Ce,Pe,W,se);else if(ue&2&&Ce.class!==Pe.class&&r(re,"class",null,Pe.class,se),ue&4&&r(re,"style",Ce.style,Pe.style,se),ue&8){const Ue=P.dynamicProps;for(let Ke=0;Ke<Ue.length;Ke++){const Je=Ue[Ke],Dt=Ce[Je],nt=Pe[Je];(nt!==Dt||Je==="value")&&r(re,Je,Dt,nt,se,W)}}ue&1&&E.children!==P.children&&u(re,P.children)}else!ye&&ce==null&&X(re,Ce,Pe,W,se);((Le=Pe.onVnodeUpdated)||Oe)&&ls(()=>{Le&&si(Le,W,P,E),Oe&&pn(P,E,W,"updated")},Q)},fe=(E,P,W,Q,se,te,ye)=>{for(let re=0;re<P.length;re++){const ue=E[re],ce=P[re],Oe=ue.el&&(ue.type===J||!Sn(ue,ce)||ue.shapeFlag&198)?f(ue.el):W;S(ue,ce,Oe,null,Q,se,te,ye,!0)}},X=(E,P,W,Q,se)=>{if(P!==W){if(P!==ft)for(const te in P)!qr(te)&&!(te in W)&&r(E,te,P[te],null,se,Q);for(const te in W){if(qr(te))continue;const ye=W[te],re=P[te];ye!==re&&te!=="value"&&r(E,te,re,ye,se,Q)}"value"in W&&r(E,"value",P.value,W.value,se)}},z=(E,P,W,Q,se,te,ye,re,ue)=>{const ce=P.el=E?E.el:l(""),Oe=P.anchor=E?E.anchor:l("");let{patchFlag:Ce,dynamicChildren:Pe,slotScopeIds:Le}=P;Le&&(re=re?re.concat(Le):Le),E==null?(i(ce,W,Q),i(Oe,W,Q),Z(P.children||[],W,Oe,se,te,ye,re,ue)):Ce>0&&Ce&64&&Pe&&E.dynamicChildren?(fe(E.dynamicChildren,Pe,W,se,te,ye,re),(P.key!=null||se&&P===se.subTree)&&xc(E,P,!0)):D(E,P,W,Oe,se,te,ye,re,ue)},ae=(E,P,W,Q,se,te,ye,re,ue)=>{P.slotScopeIds=re,E==null?P.shapeFlag&512?se.ctx.activate(P,W,Q,ye,ue):oe(P,W,Q,se,te,ye,ue):H(E,P,ue)},oe=(E,P,W,Q,se,te,ye)=>{const re=E.component=Fb(E,Q,se);if(_a(E)&&(re.ctx.renderer=Ee),Hb(re,!1,ye),re.asyncDep){if(se&&se.registerDep(re,g,ye),!E.el){const ue=re.subTree=k(Yt);M(null,ue,P,W),E.placeholder=ue.el}}else g(re,E,P,W,se,te,ye)},H=(E,P,W)=>{const Q=P.component=E.component;if(Ob(E,P,W))if(Q.asyncDep&&!Q.asyncResolved){p(Q,P,W);return}else Q.next=P,Q.update();else P.el=E.el,Q.vnode=P},g=(E,P,W,Q,se,te,ye)=>{const re=()=>{if(E.isMounted){let{next:Ce,bu:Pe,u:Le,parent:Ue,vnode:Ke}=E;{const is=gg(E);if(is){Ce&&(Ce.el=Ke.el,p(E,Ce,ye)),is.asyncDep.then(()=>{E.isUnmounted||re()});return}}let Je=Ce,Dt;mn(E,!1),Ce?(Ce.el=Ke.el,p(E,Ce,ye)):Ce=Ke,Pe&&Vl(Pe),(Dt=Ce.props&&Ce.props.onVnodeBeforeUpdate)&&si(Dt,Ue,Ce,Ke),mn(E,!0);const nt=Of(E),Lt=E.subTree;E.subTree=nt,S(Lt,nt,f(Lt.el),V(Lt),E,se,te),Ce.el=nt.el,Je===null&&Rb(E,nt.el),Le&&ls(Le,se),(Dt=Ce.props&&Ce.props.onVnodeUpdated)&&ls(()=>si(Dt,Ue,Ce,Ke),se)}else{let Ce;const{el:Pe,props:Le}=P,{bm:Ue,m:Ke,parent:Je,root:Dt,type:nt}=E,Lt=rr(P);mn(E,!1),Ue&&Vl(Ue),!Lt&&(Ce=Le&&Le.onVnodeBeforeMount)&&si(Ce,Je,P),mn(E,!0);{Dt.ce&&Dt.ce._def.shadowRoot!==!1&&Dt.ce._injectChildStyle(nt);const is=E.subTree=Of(E);S(null,is,W,Q,E,se,te),P.el=is.el}if(Ke&&ls(Ke,se),!Lt&&(Ce=Le&&Le.onVnodeMounted)){const is=P;ls(()=>si(Ce,Je,is),se)}(P.shapeFlag&256||Je&&rr(Je.vnode)&&Je.vnode.shapeFlag&256)&&E.a&&ls(E.a,se),E.isMounted=!0,P=W=Q=null}};E.scope.on();const ue=E.effect=new bm(re);E.scope.off();const ce=E.update=ue.run.bind(ue),Oe=E.job=ue.runIfDirty.bind(ue);Oe.i=E,Oe.id=E.uid,ue.scheduler=()=>yc(Oe),mn(E,!0),ce()},p=(E,P,W)=>{P.component=E;const Q=E.vnode.props;E.vnode=P,E.next=null,yb(E,P.props,Q,W),kb(E,P.children,W),Pi(),kf(E),Oi()},D=(E,P,W,Q,se,te,ye,re,ue=!1)=>{const ce=E&&E.children,Oe=E?E.shapeFlag:0,Ce=P.children,{patchFlag:Pe,shapeFlag:Le}=P;if(Pe>0){if(Pe&128){A(ce,Ce,W,Q,se,te,ye,re,ue);return}else if(Pe&256){Y(ce,Ce,W,Q,se,te,ye,re,ue);return}}Le&8?(Oe&16&&st(ce,se,te),Ce!==ce&&u(W,Ce)):Oe&16?Le&16?A(ce,Ce,W,Q,se,te,ye,re,ue):st(ce,se,te,!0):(Oe&8&&u(W,""),Le&16&&Z(Ce,W,Q,se,te,ye,re,ue))},Y=(E,P,W,Q,se,te,ye,re,ue)=>{E=E||tr,P=P||tr;const ce=E.length,Oe=P.length,Ce=Math.min(ce,Oe);let Pe;for(Pe=0;Pe<Ce;Pe++){const Le=P[Pe]=ue?Hi(P[Pe]):ui(P[Pe]);S(E[Pe],Le,W,null,se,te,ye,re,ue)}ce>Oe?st(E,se,te,!0,!1,Ce):Z(P,W,Q,se,te,ye,re,ue,Ce)},A=(E,P,W,Q,se,te,ye,re,ue)=>{let ce=0;const Oe=P.length;let Ce=E.length-1,Pe=Oe-1;for(;ce<=Ce&&ce<=Pe;){const Le=E[ce],Ue=P[ce]=ue?Hi(P[ce]):ui(P[ce]);if(Sn(Le,Ue))S(Le,Ue,W,null,se,te,ye,re,ue);else break;ce++}for(;ce<=Ce&&ce<=Pe;){const Le=E[Ce],Ue=P[Pe]=ue?Hi(P[Pe]):ui(P[Pe]);if(Sn(Le,Ue))S(Le,Ue,W,null,se,te,ye,re,ue);else break;Ce--,Pe--}if(ce>Ce){if(ce<=Pe){const Le=Pe+1,Ue=Le<Oe?P[Le].el:Q;for(;ce<=Pe;)S(null,P[ce]=ue?Hi(P[ce]):ui(P[ce]),W,Ue,se,te,ye,re,ue),ce++}}else if(ce>Pe)for(;ce<=Ce;)ge(E[ce],se,te,!0),ce++;else{const Le=ce,Ue=ce,Ke=new Map;for(ce=Ue;ce<=Pe;ce++){const Xe=P[ce]=ue?Hi(P[ce]):ui(P[ce]);Xe.key!=null&&Ke.set(Xe.key,ce)}let Je,Dt=0;const nt=Pe-Ue+1;let Lt=!1,is=0;const Is=new Array(nt);for(ce=0;ce<nt;ce++)Is[ce]=0;for(ce=Le;ce<=Ce;ce++){const Xe=E[ce];if(Dt>=nt){ge(Xe,se,te,!0);continue}let Ut;if(Xe.key!=null)Ut=Ke.get(Xe.key);else for(Je=Ue;Je<=Pe;Je++)if(Is[Je-Ue]===0&&Sn(Xe,P[Je])){Ut=Je;break}Ut===void 0?ge(Xe,se,te,!0):(Is[Ut-Ue]=ce+1,Ut>=is?is=Ut:Lt=!0,S(Xe,P[Ut],W,null,se,te,ye,re,ue),Dt++)}const hn=Lt?_b(Is):tr;for(Je=hn.length-1,ce=nt-1;ce>=0;ce--){const Xe=Ue+ce,Ut=P[Xe],Fn=P[Xe+1],Hn=Xe+1<Oe?Fn.el||Fn.placeholder:Q;Is[ce]===0?S(null,Ut,W,Hn,se,te,ye,re,ue):Lt&&(Je<0||ce!==hn[Je]?be(Ut,W,Hn,2):Je--)}}},be=(E,P,W,Q,se=null)=>{const{el:te,type:ye,transition:re,children:ue,shapeFlag:ce}=E;if(ce&6){be(E.component.subTree,P,W,Q);return}if(ce&128){E.suspense.move(P,W,Q);return}if(ce&64){ye.move(E,P,W,Ee);return}if(ye===J){i(te,P,W);for(let Ce=0;Ce<ue.length;Ce++)be(ue[Ce],P,W,Q);i(E.anchor,P,W);return}if(ye===Tl){$(E,P,W);return}if(Q!==2&&ce&1&&re)if(Q===0)re.beforeEnter(te),i(te,P,W),ls(()=>re.enter(te),se);else{const{leave:Ce,delayLeave:Pe,afterLeave:Le}=re,Ue=()=>{E.ctx.isUnmounted?n(te):i(te,P,W)},Ke=()=>{te._isLeaving&&te[Vi](!0),Ce(te,()=>{Ue(),Le&&Le()})};Pe?Pe(te,Ue,Ke):Ke()}else i(te,P,W)},ge=(E,P,W,Q=!1,se=!1)=>{const{type:te,props:ye,ref:re,children:ue,dynamicChildren:ce,shapeFlag:Oe,patchFlag:Ce,dirs:Pe,cacheIndex:Le}=E;if(Ce===-2&&(se=!1),re!=null&&(Pi(),Yr(re,null,W,E,!0),Oi()),Le!=null&&(P.renderCache[Le]=void 0),Oe&256){P.ctx.deactivate(E);return}const Ue=Oe&1&&Pe,Ke=!rr(E);let Je;if(Ke&&(Je=ye&&ye.onVnodeBeforeUnmount)&&si(Je,P,E),Oe&6)_t(E.component,W,Q);else{if(Oe&128){E.suspense.unmount(W,Q);return}Ue&&pn(E,null,P,"beforeUnmount"),Oe&64?E.type.remove(E,P,W,Ee,Q):ce&&!ce.hasOnce&&(te!==J||Ce>0&&Ce&64)?st(ce,P,W,!1,!0):(te===J&&Ce&384||!se&&Oe&16)&&st(ue,P,W),Q&&qe(E)}(Ke&&(Je=ye&&ye.onVnodeUnmounted)||Ue)&&ls(()=>{Je&&si(Je,P,E),Ue&&pn(E,null,P,"unmounted")},W)},qe=E=>{const{type:P,el:W,anchor:Q,transition:se}=E;if(P===J){Ne(W,Q);return}if(P===Tl){T(E);return}const te=()=>{n(W),se&&!se.persisted&&se.afterLeave&&se.afterLeave()};if(E.shapeFlag&1&&se&&!se.persisted){const{leave:ye,delayLeave:re}=se,ue=()=>ye(W,te);re?re(E.el,te,ue):ue()}else te()},Ne=(E,P)=>{let W;for(;E!==P;)W=h(E),n(E),E=W;n(P)},_t=(E,P,W)=>{const{bum:Q,scope:se,job:te,subTree:ye,um:re,m:ue,a:ce}=E;Pf(ue),Pf(ce),Q&&Vl(Q),se.stop(),te&&(te.flags|=8,ge(ye,E,P,W)),re&&ls(re,P),ls(()=>{E.isUnmounted=!0},P)},st=(E,P,W,Q=!1,se=!1,te=0)=>{for(let ye=te;ye<E.length;ye++)ge(E[ye],P,W,Q,se)},V=E=>{if(E.shapeFlag&6)return V(E.component.subTree);if(E.shapeFlag&128)return E.suspense.next();const P=h(E.anchor||E.el),W=P&&P[Nm];return W?h(W):P};let we=!1;const ke=(E,P,W)=>{E==null?P._vnode&&ge(P._vnode,null,null,!0):S(P._vnode||null,E,P,null,null,null,W),P._vnode=E,we||(we=!0,kf(),Bm(),we=!1)},Ee={p:S,um:ge,m:be,r:qe,mt:oe,mc:Z,pc:D,pbc:fe,n:V,o:t};return{render:ke,hydrate:void 0,createApp:mb(ke)}}function au({type:t,props:e},s){return s==="svg"&&t==="foreignObject"||s==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:s}function mn({effect:t,job:e},s){s?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function Cb(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function xc(t,e,s=!1){const i=t.children,n=e.children;if(je(i)&&je(n))for(let r=0;r<i.length;r++){const o=i[r];let l=n[r];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=n[r]=Hi(n[r]),l.el=o.el),!s&&l.patchFlag!==-2&&xc(o,l)),l.type===Ma&&l.patchFlag!==-1&&(l.el=o.el),l.type===Yt&&!l.el&&(l.el=o.el)}}function _b(t){const e=t.slice(),s=[0];let i,n,r,o,l;const a=t.length;for(i=0;i<a;i++){const d=t[i];if(d!==0){if(n=s[s.length-1],t[n]<d){e[i]=n,s.push(i);continue}for(r=0,o=s.length-1;r<o;)l=r+o>>1,t[s[l]]<d?r=l+1:o=l;d<t[s[r]]&&(r>0&&(e[i]=s[r-1]),s[r]=i)}}for(r=s.length,o=s[r-1];r-- >0;)s[r]=o,o=e[o];return s}function gg(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:gg(e)}function Pf(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const Ab=Symbol.for("v-scx"),Vb=()=>qs(Ab);function Ye(t,e,s){return yg(t,e,s)}function yg(t,e,s=ft){const{immediate:i,deep:n,flush:r,once:o}=s,l=It({},s),a=e&&i||!e&&r!=="post";let d;if(go){if(r==="sync"){const m=Vb();d=m.__watcherHandles||(m.__watcherHandles=[])}else if(!a){const m=()=>{};return m.stop=gi,m.resume=gi,m.pause=gi,m}}const u=Xt;l.call=(m,w,S)=>Ks(m,u,w,S);let f=!1;r==="post"?l.scheduler=m=>{ls(m,u&&u.suspense)}:r!=="sync"&&(f=!0,l.scheduler=(m,w)=>{w?m():yc(m)}),l.augmentJob=m=>{e&&(m.flags|=4),f&&(m.flags|=2,u&&(m.id=u.uid,m.i=u))};const h=N1(t,e,l);return go&&(d?d.push(h):a&&h()),h}function Mb(t,e,s){const i=this.proxy,n=wt(t)?t.includes(".")?vg(i,t):()=>i[t]:t.bind(i,i);let r;ze(e)?r=e:(r=e.handler,s=e);const o=Uo(this),l=yg(n,r.bind(i),s);return o(),l}function vg(t,e){const s=e.split(".");return()=>{let i=t;for(let n=0;n<s.length&&i;n++)i=i[s[n]];return i}}const Db=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${js(e)}Modifiers`]||t[`${Nn(e)}Modifiers`];function Tb(t,e,...s){if(t.isUnmounted)return;const i=t.vnode.props||ft;let n=s;const r=e.startsWith("update:"),o=r&&Db(i,e.slice(7));o&&(o.trim&&(n=s.map(u=>wt(u)?u.trim():u)),o.number&&(n=s.map(zl)));let l,a=i[l=tu(e)]||i[l=tu(js(e))];!a&&r&&(a=i[l=tu(Nn(e))]),a&&Ks(a,t,6,n);const d=i[l+"Once"];if(d){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,Ks(d,t,6,n)}}const Eb=new WeakMap;function bg(t,e,s=!1){const i=s?Eb:e.emitsCache,n=i.get(t);if(n!==void 0)return n;const r=t.emits;let o={},l=!1;if(!ze(t)){const a=d=>{const u=bg(d,e,!0);u&&(l=!0,It(o,u))};!s&&e.mixins.length&&e.mixins.forEach(a),t.extends&&a(t.extends),t.mixins&&t.mixins.forEach(a)}return!r&&!l?(ut(t)&&i.set(t,null),null):(je(r)?r.forEach(a=>o[a]=null):It(o,r),ut(t)&&i.set(t,o),o)}function Va(t,e){return!t||!ba(e)?!1:(e=e.slice(2).replace(/Once$/,""),ot(t,e[0].toLowerCase()+e.slice(1))||ot(t,Nn(e))||ot(t,e))}function Of(t){const{type:e,vnode:s,proxy:i,withProxy:n,propsOptions:[r],slots:o,attrs:l,emit:a,render:d,renderCache:u,props:f,data:h,setupState:m,ctx:w,inheritAttrs:S}=t,_=ql(t);let M,L;try{if(s.shapeFlag&4){const T=n||i,N=T;M=ui(d.call(N,T,u,f,m,h,w)),L=l}else{const T=e;M=ui(T.length>1?T(f,{attrs:l,slots:o,emit:a}):T(f,null)),L=e.props?l:$b(l)}}catch(T){Qr.length=0,Ca(T,t,1),M=k(Yt)}let $=M;if(L&&S!==!1){const T=Object.keys(L),{shapeFlag:N}=$;T.length&&N&7&&(r&&T.some(oc)&&(L=Pb(L,r)),$=nn($,L,!1,!0))}return s.dirs&&($=nn($,null,!1,!0),$.dirs=$.dirs?$.dirs.concat(s.dirs):s.dirs),s.transition&&ho($,s.transition),M=$,ql(_),M}const $b=t=>{let e;for(const s in t)(s==="class"||s==="style"||ba(s))&&((e||(e={}))[s]=t[s]);return e},Pb=(t,e)=>{const s={};for(const i in t)(!oc(i)||!(i.slice(9)in e))&&(s[i]=t[i]);return s};function Ob(t,e,s){const{props:i,children:n,component:r}=t,{props:o,children:l,patchFlag:a}=e,d=r.emitsOptions;if(e.dirs||e.transition)return!0;if(s&&a>=0){if(a&1024)return!0;if(a&16)return i?Rf(i,o,d):!!o;if(a&8){const u=e.dynamicProps;for(let f=0;f<u.length;f++){const h=u[f];if(o[h]!==i[h]&&!Va(d,h))return!0}}}else return(n||l)&&(!l||!l.$stable)?!0:i===o?!1:i?o?Rf(i,o,d):!0:!!o;return!1}function Rf(t,e,s){const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!0;for(let n=0;n<i.length;n++){const r=i[n];if(e[r]!==t[r]&&!Va(s,r))return!0}return!1}function Rb({vnode:t,parent:e},s){for(;e;){const i=e.subTree;if(i.suspense&&i.suspense.activeBranch===t&&(i.el=t.el),i===t)(t=e.vnode).el=s,e=e.parent;else break}}const xg=t=>t.__isSuspense;function jb(t,e){e&&e.pendingBranch?je(t)?e.effects.push(...t):e.effects.push(t):H1(t)}const J=Symbol.for("v-fgt"),Ma=Symbol.for("v-txt"),Yt=Symbol.for("v-cmt"),Tl=Symbol.for("v-stc"),Qr=[];let _s=null;function y(t=!1){Qr.push(_s=t?null:[])}function Lb(){Qr.pop(),_s=Qr[Qr.length-1]||null}let po=1;function Yl(t,e=!1){po+=t,t<0&&_s&&e&&(_s.hasOnce=!0)}function kg(t){return t.dynamicChildren=po>0?_s||tr:null,Lb(),po>0&&_s&&_s.push(t),t}function x(t,e,s,i,n,r){return kg(c(t,e,s,i,n,r,!0))}function me(t,e,s,i,n){return kg(k(t,e,s,i,n,!0))}function mo(t){return t?t.__v_isVNode===!0:!1}function Sn(t,e){return t.type===e.type&&t.key===e.key}const wg=({key:t})=>t??null,El=({ref:t,ref_key:e,ref_for:s})=>(typeof t=="number"&&(t=""+t),t!=null?wt(t)||Zt(t)||ze(t)?{i:Wt,r:t,k:e,f:!!s}:t:null);function c(t,e=null,s=null,i=0,n=null,r=t===J?0:1,o=!1,l=!1){const a={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&wg(e),ref:e&&El(e),scopeId:Um,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:i,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:Wt};return l?(kc(a,s),r&128&&t.normalize(a)):s&&(a.shapeFlag|=wt(s)?8:16),po>0&&!o&&_s&&(a.patchFlag>0||r&6)&&a.patchFlag!==32&&_s.push(a),a}const k=Bb;function Bb(t,e=null,s=null,i=0,n=null,r=!1){if((!t||t===sg)&&(t=Yt),mo(t)){const l=nn(t,e,!0);return s&&kc(l,s),po>0&&!r&&_s&&(l.shapeFlag&6?_s[_s.indexOf(t)]=l:_s.push(l)),l.patchFlag=-2,l}if(Kb(t)&&(t=t.__vccOpts),e){e=Ib(e);let{class:l,style:a}=e;l&&!wt(l)&&(e.class=Ve(l)),ut(a)&&(gc(a)&&!je(a)&&(a=It({},a)),e.style=ao(a))}const o=wt(t)?1:xg(t)?128:zm(t)?64:ut(t)?4:ze(t)?2:0;return c(t,e,s,i,n,o,r,!0)}function Ib(t){return t?gc(t)||dg(t)?It({},t):t:null}function nn(t,e,s=!1,i=!1){const{props:n,ref:r,patchFlag:o,children:l,transition:a}=t,d=e?Ub(n||{},e):n,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:d,key:d&&wg(d),ref:e&&e.ref?s&&r?je(r)?r.concat(El(e)):[r,El(e)]:El(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==J?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:a,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&nn(t.ssContent),ssFallback:t.ssFallback&&nn(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return a&&i&&ho(u,a.clone(u)),u}function ie(t=" ",e=0){return k(Ma,null,t,e)}function Da(t,e){const s=k(Tl,null,t);return s.staticCount=e,s}function U(t="",e=!1){return e?(y(),me(Yt,null,t)):k(Yt,null,t)}function ui(t){return t==null||typeof t=="boolean"?k(Yt):je(t)?k(J,null,t.slice()):mo(t)?Hi(t):k(Ma,null,String(t))}function Hi(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:nn(t)}function kc(t,e){let s=0;const{shapeFlag:i}=t;if(e==null)e=null;else if(je(e))s=16;else if(typeof e=="object")if(i&65){const n=e.default;n&&(n._c&&(n._d=!1),kc(t,n()),n._c&&(n._d=!0));return}else{s=32;const n=e._;!n&&!dg(e)?e._ctx=Wt:n===3&&Wt&&(Wt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else ze(e)?(e={default:e,_ctx:Wt},s=32):(e=String(e),i&64?(s=16,e=[ie(e)]):s=8);t.children=e,t.shapeFlag|=s}function Ub(...t){const e={};for(let s=0;s<t.length;s++){const i=t[s];for(const n in i)if(n==="class")e.class!==i.class&&(e.class=Ve([e.class,i.class]));else if(n==="style")e.style=ao([e.style,i.style]);else if(ba(n)){const r=e[n],o=i[n];o&&r!==o&&!(je(r)&&r.includes(o))&&(e[n]=r?[].concat(r,o):o)}else n!==""&&(e[n]=i[n])}return e}function si(t,e,s,i=null){Ks(t,e,7,[s,i])}const Nb=lg();let zb=0;function Fb(t,e,s){const i=t.type,n=(e?e.appContext:t.appContext)||Nb,r={uid:zb++,vnode:t,type:i,parent:e,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new p1(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(n.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:fg(i,n),emitsOptions:bg(i,n),emit:null,emitted:null,propsDefaults:ft,inheritAttrs:i.inheritAttrs,ctx:ft,data:ft,props:ft,attrs:ft,slots:ft,refs:ft,setupState:ft,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=Tb.bind(null,r),t.ce&&t.ce(r),r}let Xt=null;const wc=()=>Xt||Wt;let Xl,sd;{const t=wa(),e=(s,i)=>{let n;return(n=t[s])||(n=t[s]=[]),n.push(i),r=>{n.length>1?n.forEach(o=>o(r)):n[0](r)}};Xl=e("__VUE_INSTANCE_SETTERS__",s=>Xt=s),sd=e("__VUE_SSR_SETTERS__",s=>go=s)}const Uo=t=>{const e=Xt;return Xl(t),t.scope.on(),()=>{t.scope.off(),Xl(e)}},jf=()=>{Xt&&Xt.scope.off(),Xl(null)};function Sg(t){return t.vnode.shapeFlag&4}let go=!1;function Hb(t,e=!1,s=!1){e&&sd(e);const{props:i,children:n}=t.vnode,r=Sg(t);gb(t,i,r,e),xb(t,n,s||e);const o=r?Wb(t,e):void 0;return e&&sd(!1),o}function Wb(t,e){const s=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,ob);const{setup:i}=s;if(i){Pi();const n=t.setupContext=i.length>1?_g(t):null,r=Uo(t),o=Io(i,t,0,[t.props,n]),l=fm(o);if(Oi(),r(),(l||t.sp)&&!rr(t)&&Qm(t),l){if(o.then(jf,jf),e)return o.then(a=>{Lf(t,a)}).catch(a=>{Ca(a,t,0)});t.asyncDep=o}else Lf(t,o)}else Cg(t)}function Lf(t,e,s){ze(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:ut(e)&&(t.setupState=Rm(e)),Cg(t)}function Cg(t,e,s){const i=t.type;t.render||(t.render=i.render||gi);{const n=Uo(t);Pi();try{ub(t)}finally{Oi(),n()}}}const qb={get(t,e){return Jt(t,"get",""),t[e]}};function _g(t){const e=s=>{t.exposed=s||{}};return{attrs:new Proxy(t.attrs,qb),slots:t.slots,emit:t.emit,expose:e}}function Ta(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Rm(O1(t.exposed)),{get(e,s){if(s in e)return e[s];if(s in Xr)return Xr[s](t)},has(e,s){return s in e||s in Xr}})):t.proxy}function Gb(t,e=!0){return ze(t)?t.displayName||t.name:t.name||e&&t.__name}function Kb(t){return ze(t)&&"__vccOpts"in t}const le=(t,e)=>I1(t,e,go);function Tt(t,e,s){try{Yl(-1);const i=arguments.length;return i===2?ut(e)&&!je(e)?mo(e)?k(t,null,[e]):k(t,e):k(t,null,e):(i>3?s=Array.prototype.slice.call(arguments,2):i===3&&mo(s)&&(s=[s]),k(t,e,s))}finally{Yl(1)}}const Jb="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let id;const Bf=typeof window<"u"&&window.trustedTypes;if(Bf)try{id=Bf.createPolicy("vue",{createHTML:t=>t})}catch{}const Ag=id?t=>id.createHTML(t):t=>t,Yb="http://www.w3.org/2000/svg",Xb="http://www.w3.org/1998/Math/MathML",_i=typeof document<"u"?document:null,If=_i&&_i.createElement("template"),Qb={insert:(t,e,s)=>{e.insertBefore(t,s||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,s,i)=>{const n=e==="svg"?_i.createElementNS(Yb,t):e==="mathml"?_i.createElementNS(Xb,t):s?_i.createElement(t,{is:s}):_i.createElement(t);return t==="select"&&i&&i.multiple!=null&&n.setAttribute("multiple",i.multiple),n},createText:t=>_i.createTextNode(t),createComment:t=>_i.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>_i.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,s,i,n,r){const o=s?s.previousSibling:e.lastChild;if(n&&(n===r||n.nextSibling))for(;e.insertBefore(n.cloneNode(!0),s),!(n===r||!(n=n.nextSibling)););else{If.innerHTML=Ag(i==="svg"?`<svg>${t}</svg>`:i==="mathml"?`<math>${t}</math>`:t);const l=If.content;if(i==="svg"||i==="mathml"){const a=l.firstChild;for(;a.firstChild;)l.appendChild(a.firstChild);l.removeChild(a)}e.insertBefore(l,s)}return[o?o.nextSibling:e.firstChild,s?s.previousSibling:e.lastChild]}},Ui="transition",$r="animation",yo=Symbol("_vtc"),Vg={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Zb=It({},qm,Vg),ex=t=>(t.displayName="Transition",t.props=Zb,t),Sc=ex((t,{slots:e})=>Tt(K1,tx(t),e)),gn=(t,e=[])=>{je(t)?t.forEach(s=>s(...e)):t&&t(...e)},Uf=t=>t?je(t)?t.some(e=>e.length>1):t.length>1:!1;function tx(t){const e={};for(const z in t)z in Vg||(e[z]=t[z]);if(t.css===!1)return e;const{name:s="v",type:i,duration:n,enterFromClass:r=`${s}-enter-from`,enterActiveClass:o=`${s}-enter-active`,enterToClass:l=`${s}-enter-to`,appearFromClass:a=r,appearActiveClass:d=o,appearToClass:u=l,leaveFromClass:f=`${s}-leave-from`,leaveActiveClass:h=`${s}-leave-active`,leaveToClass:m=`${s}-leave-to`}=t,w=sx(n),S=w&&w[0],_=w&&w[1],{onBeforeEnter:M,onEnter:L,onEnterCancelled:$,onLeave:T,onLeaveCancelled:N,onBeforeAppear:B=M,onAppear:I=L,onAppearCancelled:Z=$}=e,ee=(z,ae,oe,H)=>{z._enterCancelled=H,yn(z,ae?u:l),yn(z,ae?d:o),oe&&oe()},fe=(z,ae)=>{z._isLeaving=!1,yn(z,f),yn(z,m),yn(z,h),ae&&ae()},X=z=>(ae,oe)=>{const H=z?I:L,g=()=>ee(ae,z,oe);gn(H,[ae,g]),Nf(()=>{yn(ae,z?a:r),wi(ae,z?u:l),Uf(H)||zf(ae,i,S,g)})};return It(e,{onBeforeEnter(z){gn(M,[z]),wi(z,r),wi(z,o)},onBeforeAppear(z){gn(B,[z]),wi(z,a),wi(z,d)},onEnter:X(!1),onAppear:X(!0),onLeave(z,ae){z._isLeaving=!0;const oe=()=>fe(z,ae);wi(z,f),z._enterCancelled?(wi(z,h),Wf(z)):(Wf(z),wi(z,h)),Nf(()=>{z._isLeaving&&(yn(z,f),wi(z,m),Uf(T)||zf(z,i,_,oe))}),gn(T,[z,oe])},onEnterCancelled(z){ee(z,!1,void 0,!0),gn($,[z])},onAppearCancelled(z){ee(z,!0,void 0,!0),gn(Z,[z])},onLeaveCancelled(z){fe(z),gn(N,[z])}})}function sx(t){if(t==null)return null;if(ut(t))return[uu(t.enter),uu(t.leave)];{const e=uu(t);return[e,e]}}function uu(t){return o1(t)}function wi(t,e){e.split(/\s+/).forEach(s=>s&&t.classList.add(s)),(t[yo]||(t[yo]=new Set)).add(e)}function yn(t,e){e.split(/\s+/).forEach(i=>i&&t.classList.remove(i));const s=t[yo];s&&(s.delete(e),s.size||(t[yo]=void 0))}function Nf(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let ix=0;function zf(t,e,s,i){const n=t._endId=++ix,r=()=>{n===t._endId&&i()};if(s!=null)return setTimeout(r,s);const{type:o,timeout:l,propCount:a}=nx(t,e);if(!o)return i();const d=o+"end";let u=0;const f=()=>{t.removeEventListener(d,h),r()},h=m=>{m.target===t&&++u>=a&&f()};setTimeout(()=>{u<a&&f()},l+1),t.addEventListener(d,h)}function nx(t,e){const s=window.getComputedStyle(t),i=w=>(s[w]||"").split(", "),n=i(`${Ui}Delay`),r=i(`${Ui}Duration`),o=Ff(n,r),l=i(`${$r}Delay`),a=i(`${$r}Duration`),d=Ff(l,a);let u=null,f=0,h=0;e===Ui?o>0&&(u=Ui,f=o,h=r.length):e===$r?d>0&&(u=$r,f=d,h=a.length):(f=Math.max(o,d),u=f>0?o>d?Ui:$r:null,h=u?u===Ui?r.length:a.length:0);const m=u===Ui&&/\b(?:transform|all)(?:,|$)/.test(i(`${Ui}Property`).toString());return{type:u,timeout:f,propCount:h,hasTransform:m}}function Ff(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((s,i)=>Hf(s)+Hf(t[i])))}function Hf(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function Wf(t){return(t?t.ownerDocument:document).body.offsetHeight}function rx(t,e,s){const i=t[yo];i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?t.removeAttribute("class"):s?t.setAttribute("class",e):t.className=e}const Ql=Symbol("_vod"),Mg=Symbol("_vsh"),gt={name:"show",beforeMount(t,{value:e},{transition:s}){t[Ql]=t.style.display==="none"?"":t.style.display,s&&e?s.beforeEnter(t):Pr(t,e)},mounted(t,{value:e},{transition:s}){s&&e&&s.enter(t)},updated(t,{value:e,oldValue:s},{transition:i}){!e!=!s&&(i?e?(i.beforeEnter(t),Pr(t,!0),i.enter(t)):i.leave(t,()=>{Pr(t,!1)}):Pr(t,e))},beforeUnmount(t,{value:e}){Pr(t,e)}};function Pr(t,e){t.style.display=e?t[Ql]:"none",t[Mg]=!e}const ox=Symbol(""),lx=/(?:^|;)\s*display\s*:/;function ax(t,e,s){const i=t.style,n=wt(s);let r=!1;if(s&&!n){if(e)if(wt(e))for(const o of e.split(";")){const l=o.slice(0,o.indexOf(":")).trim();s[l]==null&&$l(i,l,"")}else for(const o in e)s[o]==null&&$l(i,o,"");for(const o in s)o==="display"&&(r=!0),$l(i,o,s[o])}else if(n){if(e!==s){const o=i[ox];o&&(s+=";"+o),i.cssText=s,r=lx.test(s)}}else e&&t.removeAttribute("style");Ql in t&&(t[Ql]=r?i.display:"",t[Mg]&&(i.display="none"))}const qf=/\s*!important$/;function $l(t,e,s){if(je(s))s.forEach(i=>$l(t,e,i));else if(s==null&&(s=""),e.startsWith("--"))t.setProperty(e,s);else{const i=ux(t,e);qf.test(s)?t.setProperty(Nn(i),s.replace(qf,""),"important"):t[i]=s}}const Gf=["Webkit","Moz","ms"],du={};function ux(t,e){const s=du[e];if(s)return s;let i=js(e);if(i!=="filter"&&i in t)return du[e]=i;i=ka(i);for(let n=0;n<Gf.length;n++){const r=Gf[n]+i;if(r in t)return du[e]=r}return e}const Kf="http://www.w3.org/1999/xlink";function Jf(t,e,s,i,n,r=f1(e)){i&&e.startsWith("xlink:")?s==null?t.removeAttributeNS(Kf,e.slice(6,e.length)):t.setAttributeNS(Kf,e,s):s==null||r&&!gm(s)?t.removeAttribute(e):t.setAttribute(e,r?"":Gs(s)?String(s):s)}function Yf(t,e,s,i,n){if(e==="innerHTML"||e==="textContent"){s!=null&&(t[e]=e==="innerHTML"?Ag(s):s);return}const r=t.tagName;if(e==="value"&&r!=="PROGRESS"&&!r.includes("-")){const l=r==="OPTION"?t.getAttribute("value")||"":t.value,a=s==null?t.type==="checkbox"?"on":"":String(s);(l!==a||!("_value"in t))&&(t.value=a),s==null&&t.removeAttribute(e),t._value=s;return}let o=!1;if(s===""||s==null){const l=typeof t[e];l==="boolean"?s=gm(s):s==null&&l==="string"?(s="",o=!0):l==="number"&&(s=0,o=!0)}try{t[e]=s}catch{}o&&t.removeAttribute(n||e)}function Ti(t,e,s,i){t.addEventListener(e,s,i)}function dx(t,e,s,i){t.removeEventListener(e,s,i)}const Xf=Symbol("_vei");function cx(t,e,s,i,n=null){const r=t[Xf]||(t[Xf]={}),o=r[e];if(i&&o)o.value=i;else{const[l,a]=fx(e);if(i){const d=r[e]=mx(i,n);Ti(t,l,d,a)}else o&&(dx(t,l,o,a),r[e]=void 0)}}const Qf=/(?:Once|Passive|Capture)$/;function fx(t){let e;if(Qf.test(t)){e={};let i;for(;i=t.match(Qf);)t=t.slice(0,t.length-i[0].length),e[i[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Nn(t.slice(2)),e]}let cu=0;const hx=Promise.resolve(),px=()=>cu||(hx.then(()=>cu=0),cu=Date.now());function mx(t,e){const s=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=s.attached)return;Ks(gx(i,s.value),e,5,[i])};return s.value=t,s.attached=px(),s}function gx(t,e){if(je(e)){const s=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{s.call(t),t._stopped=!0},e.map(i=>n=>!n._stopped&&i&&i(n))}else return e}const Zf=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,yx=(t,e,s,i,n,r)=>{const o=n==="svg";e==="class"?rx(t,i,o):e==="style"?ax(t,s,i):ba(e)?oc(e)||cx(t,e,s,i,r):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):vx(t,e,i,o))?(Yf(t,e,i),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Jf(t,e,i,o,r,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!wt(i))?Yf(t,js(e),i,r,e):(e==="true-value"?t._trueValue=i:e==="false-value"&&(t._falseValue=i),Jf(t,e,i,o))};function vx(t,e,s,i){if(i)return!!(e==="innerHTML"||e==="textContent"||e in t&&Zf(e)&&ze(s));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const n=t.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return Zf(e)&&wt(s)?!1:e in t}const rn=t=>{const e=t.props["onUpdate:modelValue"]||!1;return je(e)?s=>Vl(e,s):e};function bx(t){t.target.composing=!0}function eh(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Ps=Symbol("_assign"),Ki={created(t,{modifiers:{lazy:e,trim:s,number:i}},n){t[Ps]=rn(n);const r=i||n.props&&n.props.type==="number";Ti(t,e?"change":"input",o=>{if(o.target.composing)return;let l=t.value;s&&(l=l.trim()),r&&(l=zl(l)),t[Ps](l)}),s&&Ti(t,"change",()=>{t.value=t.value.trim()}),e||(Ti(t,"compositionstart",bx),Ti(t,"compositionend",eh),Ti(t,"change",eh))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:s,modifiers:{lazy:i,trim:n,number:r}},o){if(t[Ps]=rn(o),t.composing)return;const l=(r||t.type==="number")&&!/^0\d/.test(t.value)?zl(t.value):t.value,a=e??"";l!==a&&(document.activeElement===t&&t.type!=="range"&&(i&&e===s||n&&t.value.trim()===a)||(t.value=a))}},Dg={deep:!0,created(t,e,s){t[Ps]=rn(s),Ti(t,"change",()=>{const i=t._modelValue,n=fr(t),r=t.checked,o=t[Ps];if(je(i)){const l=uc(i,n),a=l!==-1;if(r&&!a)o(i.concat(n));else if(!r&&a){const d=[...i];d.splice(l,1),o(d)}}else if(Sr(i)){const l=new Set(i);r?l.add(n):l.delete(n),o(l)}else o(Tg(t,r))})},mounted:th,beforeUpdate(t,e,s){t[Ps]=rn(s),th(t,e,s)}};function th(t,{value:e,oldValue:s},i){t._modelValue=e;let n;if(je(e))n=uc(e,i.props.value)>-1;else if(Sr(e))n=e.has(i.props.value);else{if(e===s)return;n=On(e,Tg(t,!0))}t.checked!==n&&(t.checked=n)}const xn={created(t,{value:e},s){t.checked=On(e,s.props.value),t[Ps]=rn(s),Ti(t,"change",()=>{t[Ps](fr(t))})},beforeUpdate(t,{value:e,oldValue:s},i){t[Ps]=rn(i),e!==s&&(t.checked=On(e,i.props.value))}},nd={deep:!0,created(t,{value:e,modifiers:{number:s}},i){const n=Sr(e);Ti(t,"change",()=>{const r=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>s?zl(fr(o)):fr(o));t[Ps](t.multiple?n?new Set(r):r:r[0]),t._assigning=!0,En(()=>{t._assigning=!1})}),t[Ps]=rn(i)},mounted(t,{value:e}){sh(t,e)},beforeUpdate(t,e,s){t[Ps]=rn(s)},updated(t,{value:e}){t._assigning||sh(t,e)}};function sh(t,e){const s=t.multiple,i=je(e);if(!(s&&!i&&!Sr(e))){for(let n=0,r=t.options.length;n<r;n++){const o=t.options[n],l=fr(o);if(s)if(i){const a=typeof l;a==="string"||a==="number"?o.selected=e.some(d=>String(d)===String(l)):o.selected=uc(e,l)>-1}else o.selected=e.has(l);else if(On(fr(o),e)){t.selectedIndex!==n&&(t.selectedIndex=n);return}}!s&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function fr(t){return"_value"in t?t._value:t.value}function Tg(t,e){const s=e?"_trueValue":"_falseValue";return s in t?t[s]:e}const xx={created(t,e,s){il(t,e,s,null,"created")},mounted(t,e,s){il(t,e,s,null,"mounted")},beforeUpdate(t,e,s,i){il(t,e,s,i,"beforeUpdate")},updated(t,e,s,i){il(t,e,s,i,"updated")}};function kx(t,e){switch(t){case"SELECT":return nd;case"TEXTAREA":return Ki;default:switch(e){case"checkbox":return Dg;case"radio":return xn;default:return Ki}}}function il(t,e,s,i,n){const o=kx(t.tagName,s.props&&s.props.type)[n];o&&o(t,e,s,i)}const wx=["ctrl","shift","alt","meta"],Sx={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>wx.some(s=>t[`${s}Key`]&&!e.includes(s))},ht=(t,e)=>{const s=t._withMods||(t._withMods={}),i=e.join(".");return s[i]||(s[i]=((n,...r)=>{for(let o=0;o<e.length;o++){const l=Sx[e[o]];if(l&&l(n,e))return}return t(n,...r)}))},Cx=It({patchProp:yx},Qb);let ih;function _x(){return ih||(ih=wb(Cx))}const Ax=((...t)=>{const e=_x().createApp(...t),{mount:s}=e;return e.mount=i=>{const n=Mx(i);if(!n)return;const r=e._component;!ze(r)&&!r.render&&!r.template&&(r.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const o=s(n,!1,Vx(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),o},e});function Vx(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Mx(t){return wt(t)?document.querySelector(t):t}const Dx="/framework-logo.png";/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const Gn=typeof document<"u";function Eg(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Tx(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&Eg(t.default)}const rt=Object.assign;function fu(t,e){const s={};for(const i in e){const n=e[i];s[i]=Js(n)?n.map(t):t(n)}return s}const Zr=()=>{},Js=Array.isArray;function nh(t,e){const s={};for(const i in t)s[i]=i in e?e[i]:t[i];return s}const $g=/#/g,Ex=/&/g,$x=/\//g,Px=/=/g,Ox=/\?/g,Pg=/\+/g,Rx=/%5B/g,jx=/%5D/g,Og=/%5E/g,Lx=/%60/g,Rg=/%7B/g,Bx=/%7C/g,jg=/%7D/g,Ix=/%20/g;function Cc(t){return t==null?"":encodeURI(""+t).replace(Bx,"|").replace(Rx,"[").replace(jx,"]")}function Ux(t){return Cc(t).replace(Rg,"{").replace(jg,"}").replace(Og,"^")}function rd(t){return Cc(t).replace(Pg,"%2B").replace(Ix,"+").replace($g,"%23").replace(Ex,"%26").replace(Lx,"`").replace(Rg,"{").replace(jg,"}").replace(Og,"^")}function Nx(t){return rd(t).replace(Px,"%3D")}function zx(t){return Cc(t).replace($g,"%23").replace(Ox,"%3F")}function Fx(t){return zx(t).replace($x,"%2F")}function vo(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const Hx=/\/$/,Wx=t=>t.replace(Hx,"");function hu(t,e,s="/"){let i,n={},r="",o="";const l=e.indexOf("#");let a=e.indexOf("?");return a=l>=0&&a>l?-1:a,a>=0&&(i=e.slice(0,a),r=e.slice(a,l>0?l:e.length),n=t(r.slice(1))),l>=0&&(i=i||e.slice(0,l),o=e.slice(l,e.length)),i=Jx(i??e,s),{fullPath:i+r+o,path:i,query:n,hash:vo(o)}}function qx(t,e){const s=e.query?t(e.query):"";return e.path+(s&&"?")+s+(e.hash||"")}function rh(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function Gx(t,e,s){const i=e.matched.length-1,n=s.matched.length-1;return i>-1&&i===n&&hr(e.matched[i],s.matched[n])&&Lg(e.params,s.params)&&t(e.query)===t(s.query)&&e.hash===s.hash}function hr(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Lg(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const s in t)if(!Kx(t[s],e[s]))return!1;return!0}function Kx(t,e){return Js(t)?oh(t,e):Js(e)?oh(e,t):t===e}function oh(t,e){return Js(e)?t.length===e.length&&t.every((s,i)=>s===e[i]):t.length===1&&t[0]===e}function Jx(t,e){if(t.startsWith("/"))return t;if(!t)return e;const s=e.split("/"),i=t.split("/"),n=i[i.length-1];(n===".."||n===".")&&i.push("");let r=s.length-1,o,l;for(o=0;o<i.length;o++)if(l=i[o],l!==".")if(l==="..")r>1&&r--;else break;return s.slice(0,r).join("/")+"/"+i.slice(o).join("/")}const Ni={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let od=(function(t){return t.pop="pop",t.push="push",t})({}),pu=(function(t){return t.back="back",t.forward="forward",t.unknown="",t})({});function Yx(t){if(!t)if(Gn){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),Wx(t)}const Xx=/^[^#]+#/;function Qx(t,e){return t.replace(Xx,"#")+e}function Zx(t,e){const s=document.documentElement.getBoundingClientRect(),i=t.getBoundingClientRect();return{behavior:e.behavior,left:i.left-s.left-(e.left||0),top:i.top-s.top-(e.top||0)}}const Ea=()=>({left:window.scrollX,top:window.scrollY});function ek(t){let e;if("el"in t){const s=t.el,i=typeof s=="string"&&s.startsWith("#"),n=typeof s=="string"?i?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!n)return;e=Zx(n,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function lh(t,e){return(history.state?history.state.position-e:-1)+t}const ld=new Map;function tk(t,e){ld.set(t,e)}function sk(t){const e=ld.get(t);return ld.delete(t),e}function ik(t){return typeof t=="string"||t&&typeof t=="object"}function Bg(t){return typeof t=="string"||typeof t=="symbol"}let St=(function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t})({});const Ig=Symbol("");St.MATCHER_NOT_FOUND+"",St.NAVIGATION_GUARD_REDIRECT+"",St.NAVIGATION_ABORTED+"",St.NAVIGATION_CANCELLED+"",St.NAVIGATION_DUPLICATED+"";function pr(t,e){return rt(new Error,{type:t,[Ig]:!0},e)}function Si(t,e){return t instanceof Error&&Ig in t&&(e==null||!!(t.type&e))}const nk=["params","query","hash"];function rk(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const s of nk)s in t&&(e[s]=t[s]);return JSON.stringify(e,null,2)}function ok(t){const e={};if(t===""||t==="?")return e;const s=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<s.length;++i){const n=s[i].replace(Pg," "),r=n.indexOf("="),o=vo(r<0?n:n.slice(0,r)),l=r<0?null:vo(n.slice(r+1));if(o in e){let a=e[o];Js(a)||(a=e[o]=[a]),a.push(l)}else e[o]=l}return e}function ah(t){let e="";for(let s in t){const i=t[s];if(s=Nx(s),i==null){i!==void 0&&(e+=(e.length?"&":"")+s);continue}(Js(i)?i.map(n=>n&&rd(n)):[i&&rd(i)]).forEach(n=>{n!==void 0&&(e+=(e.length?"&":"")+s,n!=null&&(e+="="+n))})}return e}function lk(t){const e={};for(const s in t){const i=t[s];i!==void 0&&(e[s]=Js(i)?i.map(n=>n==null?null:""+n):i==null?i:""+i)}return e}const ak=Symbol(""),uh=Symbol(""),$a=Symbol(""),_c=Symbol(""),ad=Symbol("");function Or(){let t=[];function e(i){return t.push(i),()=>{const n=t.indexOf(i);n>-1&&t.splice(n,1)}}function s(){t=[]}return{add:e,list:()=>t.slice(),reset:s}}function Wi(t,e,s,i,n,r=o=>o()){const o=i&&(i.enterCallbacks[n]=i.enterCallbacks[n]||[]);return()=>new Promise((l,a)=>{const d=h=>{h===!1?a(pr(St.NAVIGATION_ABORTED,{from:s,to:e})):h instanceof Error?a(h):ik(h)?a(pr(St.NAVIGATION_GUARD_REDIRECT,{from:e,to:h})):(o&&i.enterCallbacks[n]===o&&typeof h=="function"&&o.push(h),l())},u=r(()=>t.call(i&&i.instances[n],e,s,d));let f=Promise.resolve(u);t.length<3&&(f=f.then(d)),f.catch(h=>a(h))})}function mu(t,e,s,i,n=r=>r()){const r=[];for(const o of t)for(const l in o.components){let a=o.components[l];if(!(e!=="beforeRouteEnter"&&!o.instances[l]))if(Eg(a)){const d=(a.__vccOpts||a)[e];d&&r.push(Wi(d,s,i,o,l,n))}else{let d=a();r.push(()=>d.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${l}" at "${o.path}"`);const f=Tx(u)?u.default:u;o.mods[l]=u,o.components[l]=f;const h=(f.__vccOpts||f)[e];return h&&Wi(h,s,i,o,l,n)()}))}}return r}function uk(t,e){const s=[],i=[],n=[],r=Math.max(e.matched.length,t.matched.length);for(let o=0;o<r;o++){const l=e.matched[o];l&&(t.matched.find(d=>hr(d,l))?i.push(l):s.push(l));const a=t.matched[o];a&&(e.matched.find(d=>hr(d,a))||n.push(a))}return[s,i,n]}/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let dk=()=>location.protocol+"//"+location.host;function Ug(t,e){const{pathname:s,search:i,hash:n}=e,r=t.indexOf("#");if(r>-1){let o=n.includes(t.slice(r))?t.slice(r).length:1,l=n.slice(o);return l[0]!=="/"&&(l="/"+l),rh(l,"")}return rh(s,t)+i+n}function ck(t,e,s,i){let n=[],r=[],o=null;const l=({state:h})=>{const m=Ug(t,location),w=s.value,S=e.value;let _=0;if(h){if(s.value=m,e.value=h,o&&o===w){o=null;return}_=S?h.position-S.position:0}else i(m);n.forEach(M=>{M(s.value,w,{delta:_,type:od.pop,direction:_?_>0?pu.forward:pu.back:pu.unknown})})};function a(){o=s.value}function d(h){n.push(h);const m=()=>{const w=n.indexOf(h);w>-1&&n.splice(w,1)};return r.push(m),m}function u(){if(document.visibilityState==="hidden"){const{history:h}=window;if(!h.state)return;h.replaceState(rt({},h.state,{scroll:Ea()}),"")}}function f(){for(const h of r)h();r=[],window.removeEventListener("popstate",l),window.removeEventListener("pagehide",u),document.removeEventListener("visibilitychange",u)}return window.addEventListener("popstate",l),window.addEventListener("pagehide",u),document.addEventListener("visibilitychange",u),{pauseListeners:a,listen:d,destroy:f}}function dh(t,e,s,i=!1,n=!1){return{back:t,current:e,forward:s,replaced:i,position:window.history.length,scroll:n?Ea():null}}function fk(t){const{history:e,location:s}=window,i={value:Ug(t,s)},n={value:e.state};n.value||r(i.value,{back:null,current:i.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function r(a,d,u){const f=t.indexOf("#"),h=f>-1?(s.host&&document.querySelector("base")?t:t.slice(f))+a:dk()+t+a;try{e[u?"replaceState":"pushState"](d,"",h),n.value=d}catch(m){console.error(m),s[u?"replace":"assign"](h)}}function o(a,d){r(a,rt({},e.state,dh(n.value.back,a,n.value.forward,!0),d,{position:n.value.position}),!0),i.value=a}function l(a,d){const u=rt({},n.value,e.state,{forward:a,scroll:Ea()});r(u.current,u,!0),r(a,rt({},dh(i.value,a,null),{position:u.position+1},d),!1),i.value=a}return{location:i,state:n,push:l,replace:o}}function hk(t){t=Yx(t);const e=fk(t),s=ck(t,e.state,e.location,e.replace);function i(r,o=!0){o||s.pauseListeners(),history.go(r)}const n=rt({location:"",base:t,go:i,createHref:Qx.bind(null,t)},e,s);return Object.defineProperty(n,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(n,"state",{enumerable:!0,get:()=>e.state.value}),n}function pk(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),hk(t)}let An=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t})({});var Ot=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t})(Ot||{});const mk={type:An.Static,value:""},gk=/[a-zA-Z0-9_]/;function yk(t){if(!t)return[[]];if(t==="/")return[[mk]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(m){throw new Error(`ERR (${s})/"${d}": ${m}`)}let s=Ot.Static,i=s;const n=[];let r;function o(){r&&n.push(r),r=[]}let l=0,a,d="",u="";function f(){d&&(s===Ot.Static?r.push({type:An.Static,value:d}):s===Ot.Param||s===Ot.ParamRegExp||s===Ot.ParamRegExpEnd?(r.length>1&&(a==="*"||a==="+")&&e(`A repeatable param (${d}) must be alone in its segment. eg: '/:ids+.`),r.push({type:An.Param,value:d,regexp:u,repeatable:a==="*"||a==="+",optional:a==="*"||a==="?"})):e("Invalid state to consume buffer"),d="")}function h(){d+=a}for(;l<t.length;){if(a=t[l++],a==="\\"&&s!==Ot.ParamRegExp){i=s,s=Ot.EscapeNext;continue}switch(s){case Ot.Static:a==="/"?(d&&f(),o()):a===":"?(f(),s=Ot.Param):h();break;case Ot.EscapeNext:h(),s=i;break;case Ot.Param:a==="("?s=Ot.ParamRegExp:gk.test(a)?h():(f(),s=Ot.Static,a!=="*"&&a!=="?"&&a!=="+"&&l--);break;case Ot.ParamRegExp:a===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+a:s=Ot.ParamRegExpEnd:u+=a;break;case Ot.ParamRegExpEnd:f(),s=Ot.Static,a!=="*"&&a!=="?"&&a!=="+"&&l--,u="";break;default:e("Unknown state");break}}return s===Ot.ParamRegExp&&e(`Unfinished custom RegExp for param "${d}"`),f(),o(),n}const ch="[^/]+?",vk={sensitive:!1,strict:!1,start:!0,end:!0};var as=(function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t})(as||{});const bk=/[.+*?^${}()[\]/\\]/g;function xk(t,e){const s=rt({},vk,e),i=[];let n=s.start?"^":"";const r=[];for(const d of t){const u=d.length?[]:[as.Root];s.strict&&!d.length&&(n+="/");for(let f=0;f<d.length;f++){const h=d[f];let m=as.Segment+(s.sensitive?as.BonusCaseSensitive:0);if(h.type===An.Static)f||(n+="/"),n+=h.value.replace(bk,"\\$&"),m+=as.Static;else if(h.type===An.Param){const{value:w,repeatable:S,optional:_,regexp:M}=h;r.push({name:w,repeatable:S,optional:_});const L=M||ch;if(L!==ch){m+=as.BonusCustomRegExp;try{`${L}`}catch(T){throw new Error(`Invalid custom RegExp for param "${w}" (${L}): `+T.message)}}let $=S?`((?:${L})(?:/(?:${L}))*)`:`(${L})`;f||($=_&&d.length<2?`(?:/${$})`:"/"+$),_&&($+="?"),n+=$,m+=as.Dynamic,_&&(m+=as.BonusOptional),S&&(m+=as.BonusRepeatable),L===".*"&&(m+=as.BonusWildcard)}u.push(m)}i.push(u)}if(s.strict&&s.end){const d=i.length-1;i[d][i[d].length-1]+=as.BonusStrict}s.strict||(n+="/?"),s.end?n+="$":s.strict&&!n.endsWith("/")&&(n+="(?:/|$)");const o=new RegExp(n,s.sensitive?"":"i");function l(d){const u=d.match(o),f={};if(!u)return null;for(let h=1;h<u.length;h++){const m=u[h]||"",w=r[h-1];f[w.name]=m&&w.repeatable?m.split("/"):m}return f}function a(d){let u="",f=!1;for(const h of t){(!f||!u.endsWith("/"))&&(u+="/"),f=!1;for(const m of h)if(m.type===An.Static)u+=m.value;else if(m.type===An.Param){const{value:w,repeatable:S,optional:_}=m,M=w in d?d[w]:"";if(Js(M)&&!S)throw new Error(`Provided param "${w}" is an array but it is not repeatable (* or + modifiers)`);const L=Js(M)?M.join("/"):M;if(!L)if(_)h.length<2&&(u.endsWith("/")?u=u.slice(0,-1):f=!0);else throw new Error(`Missing required param "${w}"`);u+=L}}return u||"/"}return{re:o,score:i,keys:r,parse:l,stringify:a}}function kk(t,e){let s=0;for(;s<t.length&&s<e.length;){const i=e[s]-t[s];if(i)return i;s++}return t.length<e.length?t.length===1&&t[0]===as.Static+as.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===as.Static+as.Segment?1:-1:0}function Ng(t,e){let s=0;const i=t.score,n=e.score;for(;s<i.length&&s<n.length;){const r=kk(i[s],n[s]);if(r)return r;s++}if(Math.abs(n.length-i.length)===1){if(fh(i))return 1;if(fh(n))return-1}return n.length-i.length}function fh(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const wk={strict:!1,end:!0,sensitive:!1};function Sk(t,e,s){const i=xk(yk(t.path),s),n=rt(i,{record:t,parent:e,children:[],alias:[]});return e&&!n.record.aliasOf==!e.record.aliasOf&&e.children.push(n),n}function Ck(t,e){const s=[],i=new Map;e=nh(wk,e);function n(f){return i.get(f)}function r(f,h,m){const w=!m,S=ph(f);S.aliasOf=m&&m.record;const _=nh(e,f),M=[S];if("alias"in f){const T=typeof f.alias=="string"?[f.alias]:f.alias;for(const N of T)M.push(ph(rt({},S,{components:m?m.record.components:S.components,path:N,aliasOf:m?m.record:S})))}let L,$;for(const T of M){const{path:N}=T;if(h&&N[0]!=="/"){const B=h.record.path,I=B[B.length-1]==="/"?"":"/";T.path=h.record.path+(N&&I+N)}if(L=Sk(T,h,_),m?m.alias.push(L):($=$||L,$!==L&&$.alias.push(L),w&&f.name&&!mh(L)&&o(f.name)),zg(L)&&a(L),S.children){const B=S.children;for(let I=0;I<B.length;I++)r(B[I],L,m&&m.children[I])}m=m||L}return $?()=>{o($)}:Zr}function o(f){if(Bg(f)){const h=i.get(f);h&&(i.delete(f),s.splice(s.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=s.indexOf(f);h>-1&&(s.splice(h,1),f.record.name&&i.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function l(){return s}function a(f){const h=Vk(f,s);s.splice(h,0,f),f.record.name&&!mh(f)&&i.set(f.record.name,f)}function d(f,h){let m,w={},S,_;if("name"in f&&f.name){if(m=i.get(f.name),!m)throw pr(St.MATCHER_NOT_FOUND,{location:f});_=m.record.name,w=rt(hh(h.params,m.keys.filter($=>!$.optional).concat(m.parent?m.parent.keys.filter($=>$.optional):[]).map($=>$.name)),f.params&&hh(f.params,m.keys.map($=>$.name))),S=m.stringify(w)}else if(f.path!=null)S=f.path,m=s.find($=>$.re.test(S)),m&&(w=m.parse(S),_=m.record.name);else{if(m=h.name?i.get(h.name):s.find($=>$.re.test(h.path)),!m)throw pr(St.MATCHER_NOT_FOUND,{location:f,currentLocation:h});_=m.record.name,w=rt({},h.params,f.params),S=m.stringify(w)}const M=[];let L=m;for(;L;)M.unshift(L.record),L=L.parent;return{name:_,path:S,params:w,matched:M,meta:Ak(M)}}t.forEach(f=>r(f));function u(){s.length=0,i.clear()}return{addRoute:r,resolve:d,removeRoute:o,clearRoutes:u,getRoutes:l,getRecordMatcher:n}}function hh(t,e){const s={};for(const i of e)i in t&&(s[i]=t[i]);return s}function ph(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:_k(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function _k(t){const e={},s=t.props||!1;if("component"in t)e.default=s;else for(const i in t.components)e[i]=typeof s=="object"?s[i]:s;return e}function mh(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function Ak(t){return t.reduce((e,s)=>rt(e,s.meta),{})}function Vk(t,e){let s=0,i=e.length;for(;s!==i;){const r=s+i>>1;Ng(t,e[r])<0?i=r:s=r+1}const n=Mk(t);return n&&(i=e.lastIndexOf(n,i-1)),i}function Mk(t){let e=t;for(;e=e.parent;)if(zg(e)&&Ng(t,e)===0)return e}function zg({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function gh(t){const e=qs($a),s=qs(_c),i=le(()=>{const a=lt(t.to);return e.resolve(a)}),n=le(()=>{const{matched:a}=i.value,{length:d}=a,u=a[d-1],f=s.matched;if(!u||!f.length)return-1;const h=f.findIndex(hr.bind(null,u));if(h>-1)return h;const m=yh(a[d-2]);return d>1&&yh(u)===m&&f[f.length-1].path!==m?f.findIndex(hr.bind(null,a[d-2])):h}),r=le(()=>n.value>-1&&Pk(s.params,i.value.params)),o=le(()=>n.value>-1&&n.value===s.matched.length-1&&Lg(s.params,i.value.params));function l(a={}){if($k(a)){const d=e[lt(t.replace)?"replace":"push"](lt(t.to)).catch(Zr);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>d),d}return Promise.resolve()}return{route:i,href:le(()=>i.value.href),isActive:r,isExactActive:o,navigate:l}}function Dk(t){return t.length===1?t[0]:t}const Tk=Xm({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:gh,setup(t,{slots:e}){const s=hi(gh(t)),{options:i}=qs($a),n=le(()=>({[vh(t.activeClass,i.linkActiveClass,"router-link-active")]:s.isActive,[vh(t.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const r=e.default&&Dk(e.default(s));return t.custom?r:Tt("a",{"aria-current":s.isExactActive?t.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:n.value},r)}}}),Ek=Tk;function $k(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function Pk(t,e){for(const s in e){const i=e[s],n=t[s];if(typeof i=="string"){if(i!==n)return!1}else if(!Js(n)||n.length!==i.length||i.some((r,o)=>r!==n[o]))return!1}return!0}function yh(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const vh=(t,e,s)=>t??e??s,Ok=Xm({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:s}){const i=qs(ad),n=le(()=>t.route||i.value),r=qs(uh,0),o=le(()=>{let d=lt(r);const{matched:u}=n.value;let f;for(;(f=u[d])&&!f.components;)d++;return d}),l=le(()=>n.value.matched[o.value]);Dl(uh,le(()=>o.value+1)),Dl(ak,l),Dl(ad,n);const a=he();return Ye(()=>[a.value,l.value,t.name],([d,u,f],[h,m,w])=>{u&&(u.instances[f]=d,m&&m!==u&&d&&d===h&&(u.leaveGuards.size||(u.leaveGuards=m.leaveGuards),u.updateGuards.size||(u.updateGuards=m.updateGuards))),d&&u&&(!m||!hr(u,m)||!h)&&(u.enterCallbacks[f]||[]).forEach(S=>S(d))},{flush:"post"}),()=>{const d=n.value,u=t.name,f=l.value,h=f&&f.components[u];if(!h)return bh(s.default,{Component:h,route:d});const m=f.props[u],w=m?m===!0?d.params:typeof m=="function"?m(d):m:null,_=Tt(h,rt({},w,e,{onVnodeUnmounted:M=>{M.component.isUnmounted&&(f.instances[u]=null)},ref:a}));return bh(s.default,{Component:_,route:d})||_}}});function bh(t,e){if(!t)return null;const s=t(e);return s.length===1?s[0]:s}const Rk=Ok;function jk(t){const e=Ck(t.routes,t),s=t.parseQuery||ok,i=t.stringifyQuery||ah,n=t.history,r=Or(),o=Or(),l=Or(),a=R1(Ni);let d=Ni;Gn&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=fu.bind(null,V=>""+V),f=fu.bind(null,Fx),h=fu.bind(null,vo);function m(V,we){let ke,Ee;return Bg(V)?(ke=e.getRecordMatcher(V),Ee=we):Ee=V,e.addRoute(Ee,ke)}function w(V){const we=e.getRecordMatcher(V);we&&e.removeRoute(we)}function S(){return e.getRoutes().map(V=>V.record)}function _(V){return!!e.getRecordMatcher(V)}function M(V,we){if(we=rt({},we||a.value),typeof V=="string"){const W=hu(s,V,we.path),Q=e.resolve({path:W.path},we),se=n.createHref(W.fullPath);return rt(W,Q,{params:h(Q.params),hash:vo(W.hash),redirectedFrom:void 0,href:se})}let ke;if(V.path!=null)ke=rt({},V,{path:hu(s,V.path,we.path).path});else{const W=rt({},V.params);for(const Q in W)W[Q]==null&&delete W[Q];ke=rt({},V,{params:f(W)}),we.params=f(we.params)}const Ee=e.resolve(ke,we),Fe=V.hash||"";Ee.params=u(h(Ee.params));const E=qx(i,rt({},V,{hash:Ux(Fe),path:Ee.path})),P=n.createHref(E);return rt({fullPath:E,hash:Fe,query:i===ah?lk(V.query):V.query||{}},Ee,{redirectedFrom:void 0,href:P})}function L(V){return typeof V=="string"?hu(s,V,a.value.path):rt({},V)}function $(V,we){if(d!==V)return pr(St.NAVIGATION_CANCELLED,{from:we,to:V})}function T(V){return I(V)}function N(V){return T(rt(L(V),{replace:!0}))}function B(V,we){const ke=V.matched[V.matched.length-1];if(ke&&ke.redirect){const{redirect:Ee}=ke;let Fe=typeof Ee=="function"?Ee(V,we):Ee;return typeof Fe=="string"&&(Fe=Fe.includes("?")||Fe.includes("#")?Fe=L(Fe):{path:Fe},Fe.params={}),rt({query:V.query,hash:V.hash,params:Fe.path!=null?{}:V.params},Fe)}}function I(V,we){const ke=d=M(V),Ee=a.value,Fe=V.state,E=V.force,P=V.replace===!0,W=B(ke,Ee);if(W)return I(rt(L(W),{state:typeof W=="object"?rt({},Fe,W.state):Fe,force:E,replace:P}),we||ke);const Q=ke;Q.redirectedFrom=we;let se;return!E&&Gx(i,Ee,ke)&&(se=pr(St.NAVIGATION_DUPLICATED,{to:Q,from:Ee}),be(Ee,Ee,!0,!1)),(se?Promise.resolve(se):fe(Q,Ee)).catch(te=>Si(te)?Si(te,St.NAVIGATION_GUARD_REDIRECT)?te:A(te):D(te,Q,Ee)).then(te=>{if(te){if(Si(te,St.NAVIGATION_GUARD_REDIRECT))return I(rt({replace:P},L(te.to),{state:typeof te.to=="object"?rt({},Fe,te.to.state):Fe,force:E}),we||Q)}else te=z(Q,Ee,!0,P,Fe);return X(Q,Ee,te),te})}function Z(V,we){const ke=$(V,we);return ke?Promise.reject(ke):Promise.resolve()}function ee(V){const we=Ne.values().next().value;return we&&typeof we.runWithContext=="function"?we.runWithContext(V):V()}function fe(V,we){let ke;const[Ee,Fe,E]=uk(V,we);ke=mu(Ee.reverse(),"beforeRouteLeave",V,we);for(const W of Ee)W.leaveGuards.forEach(Q=>{ke.push(Wi(Q,V,we))});const P=Z.bind(null,V,we);return ke.push(P),st(ke).then(()=>{ke=[];for(const W of r.list())ke.push(Wi(W,V,we));return ke.push(P),st(ke)}).then(()=>{ke=mu(Fe,"beforeRouteUpdate",V,we);for(const W of Fe)W.updateGuards.forEach(Q=>{ke.push(Wi(Q,V,we))});return ke.push(P),st(ke)}).then(()=>{ke=[];for(const W of E)if(W.beforeEnter)if(Js(W.beforeEnter))for(const Q of W.beforeEnter)ke.push(Wi(Q,V,we));else ke.push(Wi(W.beforeEnter,V,we));return ke.push(P),st(ke)}).then(()=>(V.matched.forEach(W=>W.enterCallbacks={}),ke=mu(E,"beforeRouteEnter",V,we,ee),ke.push(P),st(ke))).then(()=>{ke=[];for(const W of o.list())ke.push(Wi(W,V,we));return ke.push(P),st(ke)}).catch(W=>Si(W,St.NAVIGATION_CANCELLED)?W:Promise.reject(W))}function X(V,we,ke){l.list().forEach(Ee=>ee(()=>Ee(V,we,ke)))}function z(V,we,ke,Ee,Fe){const E=$(V,we);if(E)return E;const P=we===Ni,W=Gn?history.state:{};ke&&(Ee||P?n.replace(V.fullPath,rt({scroll:P&&W&&W.scroll},Fe)):n.push(V.fullPath,Fe)),a.value=V,be(V,we,ke,P),A()}let ae;function oe(){ae||(ae=n.listen((V,we,ke)=>{if(!_t.listening)return;const Ee=M(V),Fe=B(Ee,_t.currentRoute.value);if(Fe){I(rt(Fe,{replace:!0,force:!0}),Ee).catch(Zr);return}d=Ee;const E=a.value;Gn&&tk(lh(E.fullPath,ke.delta),Ea()),fe(Ee,E).catch(P=>Si(P,St.NAVIGATION_ABORTED|St.NAVIGATION_CANCELLED)?P:Si(P,St.NAVIGATION_GUARD_REDIRECT)?(I(rt(L(P.to),{force:!0}),Ee).then(W=>{Si(W,St.NAVIGATION_ABORTED|St.NAVIGATION_DUPLICATED)&&!ke.delta&&ke.type===od.pop&&n.go(-1,!1)}).catch(Zr),Promise.reject()):(ke.delta&&n.go(-ke.delta,!1),D(P,Ee,E))).then(P=>{P=P||z(Ee,E,!1),P&&(ke.delta&&!Si(P,St.NAVIGATION_CANCELLED)?n.go(-ke.delta,!1):ke.type===od.pop&&Si(P,St.NAVIGATION_ABORTED|St.NAVIGATION_DUPLICATED)&&n.go(-1,!1)),X(Ee,E,P)}).catch(Zr)}))}let H=Or(),g=Or(),p;function D(V,we,ke){A(V);const Ee=g.list();return Ee.length?Ee.forEach(Fe=>Fe(V,we,ke)):console.error(V),Promise.reject(V)}function Y(){return p&&a.value!==Ni?Promise.resolve():new Promise((V,we)=>{H.add([V,we])})}function A(V){return p||(p=!V,oe(),H.list().forEach(([we,ke])=>V?ke(V):we()),H.reset()),V}function be(V,we,ke,Ee){const{scrollBehavior:Fe}=t;if(!Gn||!Fe)return Promise.resolve();const E=!ke&&sk(lh(V.fullPath,0))||(Ee||!ke)&&history.state&&history.state.scroll||null;return En().then(()=>Fe(V,we,E)).then(P=>P&&ek(P)).catch(P=>D(P,V,we))}const ge=V=>n.go(V);let qe;const Ne=new Set,_t={currentRoute:a,listening:!0,addRoute:m,removeRoute:w,clearRoutes:e.clearRoutes,hasRoute:_,getRoutes:S,resolve:M,options:t,push:T,replace:N,go:ge,back:()=>ge(-1),forward:()=>ge(1),beforeEach:r.add,beforeResolve:o.add,afterEach:l.add,onError:g.add,isReady:Y,install(V){V.component("RouterLink",Ek),V.component("RouterView",Rk),V.config.globalProperties.$router=_t,Object.defineProperty(V.config.globalProperties,"$route",{enumerable:!0,get:()=>lt(a)}),Gn&&!qe&&a.value===Ni&&(qe=!0,T(n.location).catch(Ee=>{}));const we={};for(const Ee in Ni)Object.defineProperty(we,Ee,{get:()=>a.value[Ee],enumerable:!0});V.provide($a,_t),V.provide(_c,Pm(we)),V.provide(ad,a);const ke=V.unmount;Ne.add(V),V.unmount=function(){Ne.delete(V),Ne.size<1&&(d=Ni,ae&&ae(),ae=null,a.value=Ni,qe=!1,p=!1),ke()}}};function st(V){return V.reduce((we,ke)=>we.then(()=>ee(ke)),Promise.resolve())}return _t}function Pa(){return qs($a)}function _r(t){return qs(_c)}const Ci=he(!1);function Lk(){const t=()=>{Ci.value=!Ci.value},e=()=>{Ci.value=!0},s=()=>{Ci.value=!1};return Ye(Ci,i=>{i?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},{immediate:!1}),es(()=>{const i=localStorage.getItem("theme");i?Ci.value=i==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches&&(Ci.value=!0),Ci.value?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}),{isDark:Ci,toggle:t,enable:e,disable:s}}function Bk(t,e){return y(),x("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function Ik(t,e){return y(),x("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})])}function Uk(t,e){return y(),x("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125"})])}function Nk(t,e){return y(),x("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}function xh(t,e){return y(),x("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"})])}function kh(t,e){return y(),x("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}function zk(t,e){return y(),x("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})])}function Fk(t,e){return y(),x("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"})])}function Hk(t,e){return y(),x("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}function Wk(t,e){return y(),x("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"})])}function Fg(t,e){return y(),x("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"})])}function wh(t,e){return y(),x("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"})])}function qk(t,e){return y(),x("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})])}function Sh(t,e){return y(),x("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21.75 17.25v-.228a4.5 4.5 0 0 0-.12-1.03l-2.268-9.64a3.375 3.375 0 0 0-3.285-2.602H7.923a3.375 3.375 0 0 0-3.285 2.602l-2.268 9.64a4.5 4.5 0 0 0-.12 1.03v.228m19.5 0a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3m19.5 0a3 3 0 0 0-3-3H5.25a3 3 0 0 0-3 3m16.5 0h.008v.008h-.008v-.008Zm-3 0h.008v.008h-.008v-.008Z"})])}function Gk(t,e){return y(),x("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}const Kk={key:0,class:"pointer-events-auto w-full max-w-sm rounded-lg bg-white shadow-lg outline-1 outline-black/5 dark:bg-gray-800 dark:-outline-offset-1 dark:outline-white/10"},Jk={class:"p-4"},Yk={key:0,class:"shrink-0"},Xk={key:0,class:"w-0 flex-1 text-sm font-medium text-gray-900 dark:text-white"},Qk={class:"text-sm font-medium text-gray-900 dark:text-white"},Zk={key:0,class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},ew={__name:"Toast",props:{title:{type:String,required:!0},description:{type:String,default:null},type:{type:String,default:"success",validator:t=>["success","error","warning","info"].includes(t)},variant:{type:String,default:"regular",validator:t=>["regular","condensed"].includes(t)},action:{type:String,default:null},duration:{type:Number,default:5e3},autoClose:{type:Boolean,default:!0}},emits:["close","action"],setup(t,{emit:e}){const s=t,i=e,n=he(!1);let r=null;const o=le(()=>{const d={success:Bk,error:Gk,warning:zk,info:Fg},u={success:"text-sky-400",error:"text-red-400",warning:"text-yellow-400",info:"text-blue-400"},f=d[s.type],h=u[s.type];return()=>Tt(f,{class:`size-6 ${h}`})}),l=()=>{n.value=!1,r&&clearTimeout(r),setTimeout(()=>i("close"),200)},a=()=>{i("action"),l()};return es(()=>{n.value=!0,s.autoClose&&s.duration>0&&(r=setTimeout(l,s.duration))}),Ye(()=>s.duration,d=>{r&&clearTimeout(r),s.autoClose&&d>0&&(r=setTimeout(l,d))}),(d,u)=>(y(),me(Sc,{"enter-active-class":"transform transition duration-300 ease-out","enter-from-class":"translate-y-2 opacity-0 sm:translate-x-2 sm:translate-y-0","enter-to-class":"translate-y-0 opacity-100 sm:translate-x-0","leave-active-class":"transition duration-200 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:R(()=>[n.value?(y(),x("div",Kk,[c("div",Jk,[c("div",{class:Ve(t.variant==="condensed"?"flex items-center":"flex items-start")},[t.variant==="regular"?(y(),x("div",Yk,[(y(),me(Ws(o.value),{class:"size-6"}))])):U("",!0),c("div",{class:Ve([t.variant==="regular"?"ml-3 w-0 flex-1 pt-0.5":"flex w-0 flex-1 justify-between"])},[t.variant==="condensed"?(y(),x("p",Xk,F(t.title),1)):(y(),x(J,{key:1},[c("p",Qk,F(t.title),1),t.description?(y(),x("p",Zk,F(t.description),1)):U("",!0)],64)),t.variant==="condensed"&&t.action?(y(),x("button",{key:2,type:"button",onClick:a,class:"ml-3 shrink-0 rounded-md bg-white text-sm font-medium text-sky-600 hover:text-sky-500 focus:outline-2 focus:outline-offset-2 focus:outline-sky-500 dark:bg-gray-800 dark:text-sky-400 dark:hover:text-sky-300 dark:focus:outline-sky-400"},F(t.action),1)):U("",!0)],2),c("div",{class:"ml-4 flex shrink-0"},[c("button",{type:"button",onClick:l,class:"inline-flex rounded-md text-gray-400 hover:text-gray-500 focus:outline-2 focus:outline-offset-2 focus:outline-sky-600 dark:hover:text-white dark:focus:outline-sky-500"},[...u[0]||(u[0]=[c("span",{class:"sr-only"},"Close",-1),c("svg",{viewBox:"0 0 20 20",fill:"currentColor",class:"size-5"},[c("path",{d:"M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z"})],-1)])])])],2)])])):U("",!0)]),_:1}))}},tw={"aria-live":"assertive",class:"pointer-events-none fixed inset-0 flex items-end px-4 py-6 sm:items-start sm:p-6 z-50"},sw={class:"flex w-full flex-col items-center space-y-4 sm:items-end"},iw={__name:"ToastContainer",setup(t,{expose:e}){const s=he([]);let i=1;const n=a=>{const d={id:i++,title:a.title,description:a.description||null,type:a.type||"success",variant:a.variant||"regular",action:a.action||null,duration:a.duration!==void 0?a.duration:5e3,autoClose:a.autoClose!==void 0?a.autoClose:!0,onAction:a.onAction||null};return s.value.push(d),d.id},r=a=>{const d=s.value.findIndex(u=>u.id===a);d>-1&&s.value.splice(d,1)},o=a=>{a.onAction&&a.onAction()};return e({addToast:n,removeToast:r,clearAll:()=>{s.value=[]}}),(a,d)=>(y(),me(Hm,{to:"body"},[c("div",tw,[c("div",sw,[(y(!0),x(J,null,ve(s.value,u=>(y(),me(ew,{key:u.id,title:u.title,description:u.description,type:u.type,variant:u.variant,action:u.action,duration:u.duration,"auto-close":u.autoClose,onClose:f=>r(u.id),onAction:f=>o(u)},null,8,["title","description","type","variant","action","duration","auto-close","onClose","onAction"]))),128))])])]))}};let kn=null;function nw(t){kn=t}function Oa(){const t=l=>{if(!kn){console.warn('ToastContainer not initialized. Add <ToastContainer ref="toastContainer" /> to your App.vue');return}return kn.addToast(l)};return{show:t,success:(l,a=null,d={})=>t({title:l,description:a,type:"success",...d}),error:(l,a=null,d={})=>t({title:l,description:a,type:"error",...d}),warning:(l,a=null,d={})=>t({title:l,description:a,type:"warning",...d}),info:(l,a=null,d={})=>t({title:l,description:a,type:"info",...d}),remove:l=>{kn&&kn.removeToast(l)},clearAll:()=>{kn&&kn.clearAll()}}}const rw={class:"flex min-h-screen bg-white dark:bg-zinc-900"},ow={class:"hidden lg:fixed lg:inset-y-0 lg:z-50 lg:flex lg:w-72 lg:flex-col xl:w-80"},lw={class:"flex grow flex-col overflow-y-auto border-r border-zinc-900/10 px-6 pb-8 pt-4 dark:border-white/10"},aw={class:"mt-6"},uw={class:"mt-10"},dw={role:"list"},cw={class:"relative mt-6"},fw={class:"relative mt-3 pl-2"},hw={role:"list",class:"border-l border-transparent"},pw={class:"truncate"},mw={key:0,class:"relative mt-6"},gw={class:"relative mt-3 pl-2"},yw={role:"list",class:"border-l border-transparent"},vw={class:"truncate"},bw={key:0,class:"text-xs text-zinc-400 dark:text-zinc-500"},xw={class:"sticky bottom-0 mt-6 border-t border-zinc-900/10 pt-6 dark:border-white/10"},kw={class:"lg:pl-72 xl:pl-80 w-full"},ww={class:"h-screen overflow-auto"},Sw={__name:"App",setup(t){const e=he(null),s=_r(),{isDark:i,toggle:n}=Lk(),r=he([]),o=f=>u.findIndex(m=>s.path.startsWith(m.to)),l=()=>r.value.findIndex(f=>s.path===`/project/${f.id}`),a=()=>Tt("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[Tt("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})]),d=()=>Tt("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[Tt("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})]),u=[{id:"projects",label:"Projects",to:"/projects"},{id:"settings",label:"Global Settings",to:"/settings"}];return es(async()=>{nw(e.value);try{const h=await(await fetch("/api/settings/get")).json();r.value=h.projects||[]}catch(f){console.error("Failed to load projects:",f)}}),(f,h)=>{const m=Kl("router-link"),w=Kl("router-view");return y(),x("div",rw,[c("div",ow,[c("div",lw,[k(m,{to:"/",class:"flex items-center gap-3"},{default:R(()=>[...h[1]||(h[1]=[c("img",{src:Dx,alt:"Framework",class:"h-10 w-10"},null,-1),c("span",{class:"text-lg font-semibold text-zinc-900 dark:text-white"},"Framework",-1)])]),_:1}),c("div",aw,[k(m,{to:"/projects/new",class:"flex w-full items-center justify-center gap-2 rounded-lg bg-white px-4 py-2.5 text-sm font-medium text-zinc-900 ring-1 ring-zinc-900/10 transition hover:bg-zinc-50 hover:ring-zinc-900/20 dark:bg-white/5 dark:text-white dark:ring-white/10 dark:hover:bg-white/10"},{default:R(()=>[...h[2]||(h[2]=[c("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),ie(" New Project ",-1)])]),_:1})]),c("nav",uw,[c("ul",dw,[c("li",cw,[h[4]||(h[4]=c("h2",{class:"text-xs font-semibold text-zinc-900 dark:text-white"}," Framework ",-1)),c("div",fw,[h[3]||(h[3]=c("div",{class:"absolute inset-y-0 left-2 w-px bg-zinc-900/10 dark:bg-white/5"},null,-1)),o()>=0?(y(),x("div",{key:0,class:"absolute left-2 h-6 w-px bg-sky-500 transition-all duration-200",style:ao({top:`${o()*32+4}px`})},null,4)):U("",!0),c("ul",hw,[(y(),x(J,null,ve(u,S=>c("li",{key:S.id,class:"relative"},[k(m,{to:S.to,class:Ve(["flex justify-between gap-2 py-1 pl-4 pr-3 text-sm transition",f.$route.path.startsWith(S.to)?"text-zinc-900 dark:text-white":"text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white"])},{default:R(()=>[c("span",pw,F(S.label),1)]),_:2},1032,["to","class"])])),64))])])]),r.value.length>0?(y(),x("li",mw,[h[6]||(h[6]=c("h2",{class:"text-xs font-semibold text-zinc-900 dark:text-white"}," Your Projects ",-1)),c("div",gw,[h[5]||(h[5]=c("div",{class:"absolute inset-y-0 left-2 w-px bg-zinc-900/10 dark:bg-white/5"},null,-1)),l()>=0?(y(),x("div",{key:0,class:"absolute left-2 h-6 w-px bg-sky-500 transition-all duration-200",style:ao({top:`${l()*32+4}px`})},null,4)):U("",!0),c("ul",yw,[(y(!0),x(J,null,ve(r.value,S=>(y(),x("li",{key:S.id,class:"relative"},[k(m,{to:`/project/${S.id}`,class:Ve(["flex justify-between gap-2 py-1 pl-4 pr-3 text-sm transition",f.$route.path===`/project/${S.id}`?"text-zinc-900 dark:text-white":"text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white"])},{default:R(()=>[c("span",vw,F(S.name),1),S.type?(y(),x("span",bw,F(S.type==="project"?"":S.type==="course"?"":""),1)):U("",!0)]),_:2},1032,["to","class"])]))),128))])])])):U("",!0),c("li",xw,[c("button",{onClick:h[0]||(h[0]=(...S)=>lt(n)&&lt(n)(...S)),class:"flex w-full items-center gap-3 text-sm text-zinc-600 transition hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white"},[(y(),me(Ws(lt(i)?d:a),{class:"h-5 w-5 shrink-0"})),ie(" "+F(lt(i)?"Light Mode":"Dark Mode"),1)])])])])])]),c("div",kw,[c("main",ww,[k(w)])]),k(iw,{ref_key:"toastContainer",ref:e},null,512)])}}},Cw={key:0,class:"flex items-center justify-center py-12"},_w={key:1,class:"max-w-4xl prose prose-slate dark:prose-invert"},Aw={class:"not-prose mb-8"},Vw={class:"flex items-center gap-3 mb-2"},Mw={class:"px-3 py-1 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded text-sm font-medium"},Dw={class:"text-4xl font-bold text-slate-900 dark:text-white mb-4"},Tw={class:"text-lg text-slate-600 dark:text-slate-400"},Ew={class:"not-prose mb-8"},$w={class:"bg-slate-900 dark:bg-slate-950 rounded-lg p-4 overflow-x-auto"},Pw={class:"text-sm text-slate-100"},Ow={key:0,class:"not-prose mb-8"},Rw={class:"space-y-4"},jw={class:"flex items-baseline gap-2 mb-1"},Lw={class:"text-base font-mono font-semibold text-slate-900 dark:text-white"},Bw={class:"text-sm text-slate-500 dark:text-slate-400"},Iw={key:0,class:"text-xs text-red-600 dark:text-red-400 font-medium"},Uw={key:1,class:"text-xs text-slate-500 dark:text-slate-400"},Nw={class:"text-sm text-slate-600 dark:text-slate-400"},zw={class:"not-prose mb-8"},Fw={class:"text-slate-700 dark:text-slate-300"},Hw={key:1,class:"not-prose mb-8"},Ww={class:"text-slate-700 dark:text-slate-300 whitespace-pre-line"},qw={key:2,class:"not-prose mb-8"},Gw={class:"space-y-6"},Kw={class:"bg-slate-900 dark:bg-slate-950 rounded-lg p-4 overflow-x-auto mb-2"},Jw={class:"text-sm text-slate-100"},Yw={class:"text-sm text-slate-600 dark:text-slate-400"},Xw={key:3,class:"not-prose mb-8"},Qw={class:"space-y-2"},Zw={class:"text-indigo-600 dark:text-indigo-400 font-mono font-semibold"},e2={class:"text-slate-700 dark:text-slate-300"},t2={key:4,class:"not-prose mb-8"},s2={class:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4"},i2={class:"list-disc list-inside space-y-1 text-sm text-amber-800 dark:text-amber-300"},n2={key:5,class:"not-prose"},r2={class:"flex items-center gap-2 flex-wrap"},o2={key:2,class:"text-center py-12"},l2={__name:"DocViewer",props:{functionName:{type:String,required:!0}},setup(t){const e=t,s=he(null),i=he(!0),n=async()=>{i.value=!0;try{const r=await fetch(`/docs/${e.functionName}.json`);r.ok?s.value=await r.json():s.value=null}catch(r){console.error("Failed to load documentation:",r),s.value=null}finally{i.value=!1}};return Ye(()=>e.functionName,n),es(n),(r,o)=>i.value?(y(),x("div",Cw,[...o[0]||(o[0]=[c("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"},null,-1)])])):s.value?(y(),x("div",_w,[c("div",Aw,[c("div",Vw,[c("span",Mw,F(s.value.category),1)]),c("h1",Dw,F(s.value.title),1),c("p",Tw,F(s.value.description),1)]),c("div",Ew,[o[1]||(o[1]=c("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white mb-4"},"Usage",-1)),c("div",$w,[c("pre",Pw,[c("code",null,F(s.value.usage),1)])])]),s.value.params&&s.value.params.length>0?(y(),x("div",Ow,[o[3]||(o[3]=c("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white mb-4"},"Parameters",-1)),c("div",Rw,[(y(!0),x(J,null,ve(s.value.params,l=>(y(),x("div",{key:l.name,class:"border-l-4 border-indigo-500 pl-4"},[c("div",jw,[c("code",Lw,F(l.name),1),c("span",Bw,F(l.type),1),l.required?(y(),x("span",Iw," required ")):U("",!0),l.default?(y(),x("span",Uw,[o[2]||(o[2]=ie(" default: ",-1)),c("code",null,F(l.default),1)])):U("",!0)]),c("p",Nw,F(l.description),1)]))),128))])])):U("",!0),c("div",zw,[o[4]||(o[4]=c("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white mb-4"},"Returns",-1)),c("p",Fw,F(s.value.returns),1)]),s.value.details?(y(),x("div",Hw,[o[5]||(o[5]=c("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white mb-4"},"Details",-1)),c("div",Ww,F(s.value.details),1)])):U("",!0),s.value.examples&&s.value.examples.length>0?(y(),x("div",qw,[o[6]||(o[6]=c("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white mb-4"},"Examples",-1)),c("div",Gw,[(y(!0),x(J,null,ve(s.value.examples,(l,a)=>(y(),x("div",{key:a},[c("div",Kw,[c("pre",Jw,[c("code",null,F(l.code),1)])]),c("p",Yw,F(l.description),1)]))),128))])])):U("",!0),s.value.see_also&&s.value.see_also.length>0?(y(),x("div",Xw,[o[7]||(o[7]=c("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white mb-4"},"See Also",-1)),c("ul",Qw,[(y(!0),x(J,null,ve(s.value.see_also,l=>(y(),x("li",{key:l.name},[c("code",Zw,F(l.name)+"() ",1),c("span",e2," - "+F(l.description),1)]))),128))])])):U("",!0),s.value.notes&&s.value.notes.length>0?(y(),x("div",t2,[c("div",s2,[o[8]||(o[8]=c("h3",{class:"text-lg font-semibold text-amber-900 dark:text-amber-200 mb-2"},"Notes",-1)),c("ul",i2,[(y(!0),x(J,null,ve(s.value.notes,(l,a)=>(y(),x("li",{key:a},F(l),1))),128))])])])):U("",!0),s.value.tags&&s.value.tags.length>0?(y(),x("div",n2,[c("div",r2,[o[9]||(o[9]=c("span",{class:"text-sm text-slate-500 dark:text-slate-400"},"Tags:",-1)),(y(!0),x(J,null,ve(s.value.tags,l=>(y(),x("span",{key:l,class:"px-2 py-1 bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 rounded text-xs"},F(l),1))),128))])])):U("",!0)])):(y(),x("div",o2,[...o[10]||(o[10]=[c("p",{class:"text-slate-600 dark:text-slate-400"},"Documentation not found.",-1)])]))}},a2={class:"flex h-full"},u2={class:"w-64 flex-shrink-0 border-r border-zinc-900/10 dark:border-white/10 overflow-y-auto"},d2={class:"p-4"},c2={class:"mt-3 space-y-1"},f2={class:"mt-3 space-y-1"},h2={class:"mt-3 space-y-1"},p2={class:"flex-1 overflow-y-auto"},m2={key:1,class:"flex h-full items-center justify-center p-8"},Ch={__name:"DocsView",setup(t){const e=_r(),s=le(()=>e.params.functionName),i=[{name:"scaffold",title:"scaffold()"}],n=[{name:"data_load",title:"data_load()"}],r=[{name:"cache_get",title:"cache_get()"}];return(o,l)=>{const a=Kl("router-link");return y(),x("div",a2,[c("div",u2,[c("div",d2,[l[0]||(l[0]=c("h2",{class:"text-xs font-semibold uppercase tracking-wide text-zinc-500 dark:text-zinc-400"}," Core Functions ",-1)),c("ul",c2,[(y(),x(J,null,ve(i,d=>c("li",{key:d.name},[k(a,{to:`/docs/${d.name}`,class:Ve(["block rounded-md px-3 py-2 text-sm font-medium hover:bg-zinc-50 dark:hover:bg-zinc-800",s.value===d.name?"bg-sky-50 text-sky-600 dark:bg-sky-400/10 dark:text-sky-400":"text-zinc-700 dark:text-zinc-300"])},{default:R(()=>[ie(F(d.title),1)]),_:2},1032,["to","class"])])),64))]),l[1]||(l[1]=c("h2",{class:"mt-6 text-xs font-semibold uppercase tracking-wide text-zinc-500 dark:text-zinc-400"}," Data Functions ",-1)),c("ul",f2,[(y(),x(J,null,ve(n,d=>c("li",{key:d.name},[k(a,{to:`/docs/${d.name}`,class:Ve(["block rounded-md px-3 py-2 text-sm font-medium hover:bg-zinc-50 dark:hover:bg-zinc-800",s.value===d.name?"bg-sky-50 text-sky-600 dark:bg-sky-400/10 dark:text-sky-400":"text-zinc-700 dark:text-zinc-300"])},{default:R(()=>[ie(F(d.title),1)]),_:2},1032,["to","class"])])),64))]),l[2]||(l[2]=c("h2",{class:"mt-6 text-xs font-semibold uppercase tracking-wide text-zinc-500 dark:text-zinc-400"}," Cache Functions ",-1)),c("ul",h2,[(y(),x(J,null,ve(r,d=>c("li",{key:d.name},[k(a,{to:`/docs/${d.name}`,class:Ve(["block rounded-md px-3 py-2 text-sm font-medium hover:bg-zinc-50 dark:hover:bg-zinc-800",s.value===d.name?"bg-sky-50 text-sky-600 dark:bg-sky-400/10 dark:text-sky-400":"text-zinc-700 dark:text-zinc-300"])},{default:R(()=>[ie(F(d.title),1)]),_:2},1032,["to","class"])])),64))])])]),c("div",p2,[s.value?(y(),me(l2,{key:0,functionName:s.value},null,8,["functionName"])):(y(),x("div",m2,[...l[3]||(l[3]=[c("div",{class:"text-center"},[c("h2",{class:"text-2xl font-bold text-zinc-900 dark:text-white"},"Framework Documentation"),c("p",{class:"mt-2 text-zinc-600 dark:text-zinc-400"}," Select a function from the sidebar to view its documentation. ")],-1)])]))])])}}},g2={key:0,class:"px-4 py-5 sm:px-6"},y2={class:"px-4 py-5 sm:p-6"},v2={key:1,class:"px-4 py-4 sm:px-6"},b2={__name:"Card",setup(t){const e=lb(),s=le(()=>{const i=["overflow-hidden","rounded-lg","bg-white","shadow-sm","dark:bg-gray-800/50","dark:shadow-none","dark:outline","dark:-outline-offset-1","dark:outline-white/10"];return(e.header||e.footer)&&i.push("divide-y","divide-gray-200","dark:divide-white/10"),i.join(" ")});return(i,n)=>(y(),x("div",{class:Ve(s.value)},[i.$slots.header?(y(),x("div",g2,[Ct(i.$slots,"header")])):U("",!0),c("div",y2,[Ct(i.$slots,"default")]),i.$slots.footer?(y(),x("div",v2,[Ct(i.$slots,"footer")])):U("",!0)],2))}},$e={__name:"Button",props:{variant:{type:String,default:"primary",validator:t=>["primary","secondary","soft"].includes(t)},size:{type:String,default:"md",validator:t=>["xs","sm","md","lg","xl"].includes(t)},rounded:{type:String,default:"md",validator:t=>["sm","md","full"].includes(t)},type:{type:String,default:"button"},href:{type:String,default:null},icon:{type:[Object,Function],default:null},iconPosition:{type:String,default:"left",validator:t=>["left","right"].includes(t)},iconOnly:{type:Boolean,default:!1}},emits:["click"],setup(t,{emit:e}){const s=t,i=e,n=l=>{i("click",l)},r=le(()=>{const l=["font-semibold","focus-visible:outline-2","focus-visible:outline-offset-2"],a={xs:s.iconOnly?"p-2":"px-3 py-2 text-xs",sm:s.iconOnly?"p-2.5":"px-3 py-2 text-sm",md:s.iconOnly?"p-3":"px-3.5 py-2.5 text-sm",lg:s.iconOnly?"p-3":"px-4 py-3 text-sm",xl:s.iconOnly?"p-3.5":"px-4.5 py-3.5 text-sm"};l.push(a[s.size]);const d={sm:"rounded-sm",md:"rounded-md",full:"rounded-full"};return l.push(d[s.rounded]),s.variant==="primary"?l.push("bg-sky-600","text-white","shadow-xs","hover:bg-sky-500","focus-visible:outline-sky-600","dark:bg-sky-500","dark:shadow-none","dark:hover:bg-sky-400","dark:focus-visible:outline-sky-500"):s.variant==="secondary"?l.push("bg-white","text-gray-900","shadow-xs","inset-ring","inset-ring-gray-300","hover:bg-gray-50","dark:bg-white/10","dark:text-white","dark:shadow-none","dark:inset-ring-white/5","dark:hover:bg-white/20"):s.variant==="soft"&&l.push("bg-sky-50","text-sky-600","shadow-xs","hover:bg-sky-100","dark:bg-sky-500/20","dark:text-sky-400","dark:shadow-none","dark:hover:bg-sky-500/30"),s.icon&&!s.iconOnly&&(l.push("inline-flex","items-center"),l.push(s.size==="xl"?"gap-x-2":"gap-x-1.5")),l.join(" ")}),o=le(()=>{const l=[];return s.iconOnly?l.push("size-5"):(l.push("size-5"),s.iconPosition==="left"?l.push("-ml-0.5"):l.push("-mr-0.5")),l.join(" ")});return(l,a)=>(y(),me(Ws(t.href?"a":"button"),{href:t.href,type:t.href?void 0:t.type,class:Ve(r.value),onClick:n},{default:R(()=>[t.icon&&t.iconPosition==="left"?(y(),x("svg",{key:0,viewBox:"0 0 20 20",fill:"currentColor","data-slot":"icon","aria-hidden":"true",class:Ve(o.value)},[(y(),me(Ws(t.icon)))],2)):U("",!0),Ct(l.$slots,"default"),t.icon&&t.iconPosition==="right"?(y(),x("svg",{key:1,viewBox:"0 0 20 20",fill:"currentColor","data-slot":"icon","aria-hidden":"true",class:Ve(o.value)},[(y(),me(Ws(t.icon)))],2)):U("",!0)]),_:3},8,["href","type","class"]))}},x2=["for"],k2={key:1,class:"mt-2 flex"},w2={class:"flex shrink-0 items-center rounded-l-md bg-gray-100 px-2 text-base text-gray-500 outline-1 -outline-offset-1 outline-gray-300 sm:text-sm/6 dark:bg-white/5 dark:text-gray-400 dark:outline-white/10 font-mono"},S2=["id","type","value","placeholder","required","disabled","aria-invalid","aria-describedby"],C2={key:2,class:"mt-2"},_2=["id","type","value","placeholder","required","disabled","aria-invalid","aria-describedby"],A2={key:0,viewBox:"0 0 16 16",fill:"currentColor","data-slot":"icon","aria-hidden":"true",class:"pointer-events-none col-start-1 row-start-1 mr-3 size-5 self-center justify-self-end text-red-500 sm:size-4 dark:text-red-400"},V2=["id"],M2=["id"],q={__name:"Input",props:{id:{type:String,default:()=>`input-${Math.random().toString(36).substr(2,9)}`},modelValue:{type:[String,Number],default:""},type:{type:String,default:"text"},label:{type:String,default:null},placeholder:{type:String,default:""},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},error:{type:String,default:null},hint:{type:String,default:null},monospace:{type:Boolean,default:!1},prefix:{type:String,default:null}},emits:["update:modelValue","blur"],setup(t){const e=t,s=le(()=>{const n=["block","w-full","rounded-md","bg-white","px-3","py-1.5","text-base","outline-1","-outline-offset-1","placeholder:text-gray-400","focus:outline-2","focus:-outline-offset-2","sm:text-sm/6","dark:bg-white/5","dark:placeholder:text-gray-500"];return e.monospace&&n.push("font-mono"),e.error?n.push("col-start-1","row-start-1","pr-10","pl-3","text-red-900","outline-red-300","placeholder:text-red-300","focus:outline-red-600","sm:pr-9","dark:text-red-400","dark:outline-red-500/50","dark:placeholder:text-red-400/70","dark:focus:outline-red-400"):n.push("text-gray-900","outline-gray-300","focus:outline-sky-600","dark:text-white","dark:outline-white/10","dark:focus:outline-sky-500"),n.join(" ")}),i=le(()=>{const n=["-ml-px","block","w-full","grow","rounded-r-md","bg-white","px-3","py-1.5","text-base","outline-1","-outline-offset-1","placeholder:text-gray-400","focus:outline-2","focus:-outline-offset-2","sm:text-sm/6","dark:bg-white/5","dark:placeholder:text-gray-500"];return e.monospace&&n.push("font-mono"),e.error?n.push("text-red-900","outline-red-300","placeholder:text-red-300","focus:outline-red-600","dark:text-red-400","dark:outline-red-500/50","dark:placeholder:text-red-400/70","dark:focus:outline-red-400"):n.push("text-gray-900","outline-gray-300","focus:outline-sky-600","dark:text-white","dark:outline-white/10","dark:focus:outline-sky-500"),n.join(" ")});return(n,r)=>(y(),x("div",null,[t.label?(y(),x("label",{key:0,for:t.id,class:"block text-sm/6 font-medium text-gray-900 dark:text-white"},F(t.label),9,x2)):U("",!0),t.prefix?(y(),x("div",k2,[c("div",w2,F(t.prefix),1),c("input",{id:t.id,type:t.type,value:t.modelValue,placeholder:t.placeholder,required:t.required,disabled:t.disabled,"aria-invalid":t.error?"true":void 0,"aria-describedby":t.error?`${t.id}-error`:t.hint?`${t.id}-description`:void 0,onInput:r[0]||(r[0]=o=>n.$emit("update:modelValue",o.target.value)),onBlur:r[1]||(r[1]=o=>n.$emit("blur",o)),class:Ve(i.value)},null,42,S2)])):(y(),x("div",C2,[c("input",{id:t.id,type:t.type,value:t.modelValue,placeholder:t.placeholder,required:t.required,disabled:t.disabled,"aria-invalid":t.error?"true":void 0,"aria-describedby":t.error?`${t.id}-error`:t.hint?`${t.id}-description`:void 0,onInput:r[2]||(r[2]=o=>n.$emit("update:modelValue",o.target.value)),onBlur:r[3]||(r[3]=o=>n.$emit("blur",o)),class:Ve(s.value)},null,42,_2),t.error?(y(),x("svg",A2,[...r[4]||(r[4]=[c("path",{d:"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14ZM8 4a.75.75 0 0 1 .75.75v3a.75.75 0 0 1-1.5 0v-3A.75.75 0 0 1 8 4Zm0 8a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z","clip-rule":"evenodd","fill-rule":"evenodd"},null,-1)])])):U("",!0)])),t.error?(y(),x("p",{key:3,id:`${t.id}-error`,class:"mt-2 text-sm text-red-600 dark:text-red-400"},F(t.error),9,V2)):U("",!0),t.hint&&!t.error?(y(),x("p",{key:4,id:`${t.id}-description`,class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},F(t.hint),9,M2)):U("",!0)]))}},D2={class:"flex gap-3"},T2={class:"flex h-6 shrink-0 items-center"},E2={class:"group grid size-4 grid-cols-1"},$2=["id","name","checked","aria-describedby"],P2={class:"text-sm/6"},O2=["for"],R2=["id"],zs={__name:"Checkbox",props:{id:{type:String,required:!0},name:{type:String,default:null},modelValue:{type:Boolean,default:!1},description:{type:String,default:null}},emits:["update:modelValue"],setup(t){return(e,s)=>(y(),x("div",D2,[c("div",T2,[c("div",E2,[c("input",{id:t.id,type:"checkbox",name:t.name,checked:t.modelValue,"aria-describedby":t.description?`${t.id}-description`:void 0,onChange:s[0]||(s[0]=i=>e.$emit("update:modelValue",i.target.checked)),class:"col-start-1 row-start-1 appearance-none rounded-sm border border-gray-300 bg-white checked:border-sky-600 checked:bg-sky-600 indeterminate:border-sky-600 indeterminate:bg-sky-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:checked:bg-gray-100 dark:border-white/10 dark:bg-white/5 dark:checked:border-sky-500 dark:checked:bg-sky-500 dark:indeterminate:border-sky-500 dark:indeterminate:bg-sky-500 dark:focus-visible:outline-sky-500 dark:disabled:border-white/5 dark:disabled:bg-white/10 dark:disabled:checked:bg-white/10 forced-colors:appearance-auto"},null,40,$2),s[1]||(s[1]=c("svg",{viewBox:"0 0 14 14",fill:"none",class:"pointer-events-none col-start-1 row-start-1 size-3.5 self-center justify-self-center stroke-white group-has-disabled:stroke-gray-950/25 dark:group-has-disabled:stroke-white/25"},[c("path",{d:"M3 8L6 11L11 3.5","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"opacity-0 group-has-checked:opacity-100"}),c("path",{d:"M3 7H11","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"opacity-0 group-has-indeterminate:opacity-100"})],-1))])]),c("div",P2,[c("label",{for:t.id,class:"font-medium text-gray-900 dark:text-white"},[Ct(e.$slots,"default")],8,O2),t.description?(y(),x("p",{key:0,id:`${t.id}-description`,class:"text-gray-500 dark:text-gray-400"},F(t.description),9,R2)):U("",!0)])]))}};function j2(t,e){return y(),x("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z","clip-rule":"evenodd"})])}function L2(t,e){return y(),x("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"fill-rule":"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z","clip-rule":"evenodd"})])}function B2(t,e){return y(),x("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 0 1 .67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 1 1-.671-1.34l.041-.022ZM12 9a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z","clip-rule":"evenodd"})])}function I2(t,e){return y(),x("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-1.72 6.97a.75.75 0 1 0-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 1 0 1.06 1.06L12 13.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L13.06 12l1.72-1.72a.75.75 0 1 0-1.06-1.06L12 10.94l-1.72-1.72Z","clip-rule":"evenodd"})])}const U2={class:"flex gap-3"},N2={class:"flex-1"},Ai={__name:"Alert",props:{type:{type:String,default:"info",validator:t=>["success","error","warning","info"].includes(t)},title:{type:String,default:null},description:{type:String,default:null},dismissible:{type:Boolean,default:!1}},emits:["dismiss"],setup(t,{emit:e}){const s=t,i=e,n={success:{container:"bg-sky-50 dark:bg-sky-900/20 inset-ring inset-ring-sky-200 dark:inset-ring-sky-800",icon:"text-sky-600 dark:text-sky-400",title:"text-sky-800 dark:text-sky-200",description:"text-sky-700 dark:text-sky-300",dismiss:"text-sky-600 hover:text-sky-700 dark:text-sky-400 dark:hover:text-sky-300"},error:{container:"bg-red-50 dark:bg-red-900/20 inset-ring inset-ring-red-200 dark:inset-ring-red-800",icon:"text-red-600 dark:text-red-400",title:"text-red-800 dark:text-red-200",description:"text-red-700 dark:text-red-300",dismiss:"text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300"},warning:{container:"bg-yellow-50 dark:bg-yellow-900/20 inset-ring inset-ring-yellow-200 dark:inset-ring-yellow-800",icon:"text-yellow-600 dark:text-yellow-400",title:"text-yellow-800 dark:text-yellow-200",description:"text-yellow-700 dark:text-yellow-300",dismiss:"text-yellow-600 hover:text-yellow-700 dark:text-yellow-400 dark:hover:text-yellow-300"},info:{container:"bg-blue-50 dark:bg-blue-900/20 inset-ring inset-ring-blue-200 dark:inset-ring-blue-800",icon:"text-blue-600 dark:text-blue-400",title:"text-blue-800 dark:text-blue-200",description:"text-blue-700 dark:text-blue-300",dismiss:"text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300"}},r=le(()=>`rounded-lg p-4 ${n[s.type].container}`),o=le(()=>`text-sm font-medium ${n[s.type].title}`),l=le(()=>{const f=[`text-sm ${n[s.type].description}`];return s.title&&f.push("mt-1"),f.join(" ")}),a=le(()=>`rounded-md p-1 ${n[s.type].dismiss} focus:outline-2 focus:outline-offset-2`),d=le(()=>({success:j2,error:I2,warning:L2,info:B2})[s.type]),u=()=>{i("dismiss")};return(f,h)=>(y(),x("div",{class:Ve(r.value),role:"alert"},[c("div",U2,[(y(),me(Ws(d.value),{class:"h-5 w-5 shrink-0"})),c("div",N2,[t.title?(y(),x("p",{key:0,class:Ve(o.value)},F(t.title),3)):U("",!0),t.description||f.$slots.default?(y(),x("p",{key:1,class:Ve(l.value)},[Ct(f.$slots,"default",{},()=>[ie(F(t.description),1)])],2)):U("",!0)]),t.dismissible?(y(),x("button",{key:0,type:"button",onClick:u,class:Ve(a.value)},[...h[0]||(h[0]=[c("span",{class:"sr-only"},"Dismiss",-1),c("svg",{viewBox:"0 0 20 20",fill:"currentColor",class:"size-5"},[c("path",{d:"M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z"})],-1)])],2)):U("",!0)])],2))}},z2={class:"flex items-center justify-between"},F2={class:"space-y-6"},H2={key:0,class:"text-xs text-gray-500 dark:text-gray-400 space-y-1"},W2={key:0},q2={class:"font-mono"},G2={key:1},K2={class:"font-mono"},J2={class:"space-y-2"},Y2=["onClick"],X2={class:"flex items-start gap-3"},Q2={class:"text-2xl mt-0.5"},Z2={class:"flex-1"},eS={class:"font-semibold text-gray-900 dark:text-white"},tS={class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},sS={key:0,class:"text-sky-600 dark:text-sky-400"},iS={key:1,class:"bg-gray-50 dark:bg-gray-800/50 rounded-lg p-4"},nS={class:"space-y-3"},rS={class:"list-decimal list-inside mt-1 space-y-1"},oS={class:"flex items-center justify-end gap-3"},lS={__name:"ProjectWizard",props:{mode:{type:String,default:"modal",validator:t=>["modal","page"].includes(t)},projectsRoot:{type:String,default:""}},emits:["close","created"],setup(t,{emit:e}){const s=t,i=e,n=le(()=>s.mode==="modal"),r=le(()=>(s.projectsRoot||"").trim()),o=B=>/^([A-Za-z]:[\\/]|\\\\|\/|~)/.test(B),l=(B,I)=>{if(!B)return I;const Z=I.replace(/^[\\/]+/,"");if(!Z)return B;if(B.endsWith("/")||B.endsWith("\\"))return`${B}${Z}`;const ee=B.includes("\\")&&!B.includes("/")?"\\":"/";return`${B}${ee}${Z}`},a=le(()=>n.value?"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4":"flex w-full justify-center"),d=le(()=>n.value?"max-w-2xl w-full max-h-[90vh] overflow-y-auto":"w-full max-w-2xl shadow-xl"),u=hi({directory:"",name:"",type:"project",sensitive:!1,use_git:!0,use_renv:!1,attach_defaults:!0}),f=le(()=>{const B=u.directory.trim();return B?o(B)||!r.value?B:l(r.value,B):r.value||""}),h=le(()=>{const B=u.directory.trim();return B?r.value.length>0||o(B):!1}),m=le(()=>r.value?`Folder will be created inside ${r.value}`:"The directory where your project will be created"),w=le(()=>r.value?"analytics-project":"my-analysis"),S=[{id:"project",title:"Data Analysis",description:"Full-featured project with notebooks, scripts, data management, and results tracking",icon:""},{id:"course",title:"Course Materials",description:"Teaching materials with slides, assignments, and course documentation",icon:""},{id:"presentation",title:"Presentation",description:"Single talk or presentation with minimal structure",icon:""}],_=he(!1),M=he(""),L=he(!1),$=()=>{n.value&&i("close")},T=()=>{!u.name&&u.directory&&(u.name=u.directory.split(/[-_]/).map(B=>B.charAt(0).toUpperCase()+B.slice(1)).join(" "))},N=async()=>{M.value="",L.value=!1,_.value=!0;try{const B=f.value||u.directory,I=await fetch("/api/project/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_dir:B,project_name:u.name||u.directory,type:u.type,sensitive:u.sensitive,use_git:u.use_git,use_renv:u.use_renv,attach_defaults:u.attach_defaults})}),Z=await I.json();I.ok&&Z.success?(L.value=!0,Z&&!Z.path&&(Z.path=B),i("created",Z),n.value&&setTimeout(()=>{i("close")},3e3)):M.value=Z.error||"Failed to create project"}catch(B){M.value="Network error: "+B.message}finally{_.value=!1}};return(B,I)=>(y(),x("div",{class:Ve(a.value),onClick:ht($,["self"])},[k(b2,{class:Ve(d.value)},{header:R(()=>[c("div",z2,[I[9]||(I[9]=c("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Create New Project",-1)),n.value?(y(),x("button",{key:0,onClick:I[0]||(I[0]=Z=>B.$emit("close")),class:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition"},[...I[8]||(I[8]=[c("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])):U("",!0)])]),footer:R(()=>[c("div",oS,[k($e,{variant:"secondary",onClick:I[7]||(I[7]=Z=>B.$emit("close"))},{default:R(()=>[...I[23]||(I[23]=[ie(" Cancel ",-1)])]),_:1}),k($e,{variant:"primary",onClick:N,disabled:_.value||!u.directory},{default:R(()=>[ie(F(_.value?"Creating...":"Create Project"),1)]),_:1},8,["disabled"])])]),default:R(()=>[c("div",F2,[k(q,{modelValue:u.directory,"onUpdate:modelValue":I[1]||(I[1]=Z=>u.directory=Z),label:"Project Directory",placeholder:w.value,hint:m.value,onInput:T},null,8,["modelValue","placeholder","hint"]),r.value||h.value?(y(),x("div",H2,[r.value?(y(),x("p",W2,[I[10]||(I[10]=ie(" Projects will be created inside ",-1)),c("span",q2,F(r.value),1),I[11]||(I[11]=ie(". ",-1))])):U("",!0),h.value?(y(),x("p",G2,[I[12]||(I[12]=ie(" Full path: ",-1)),c("span",K2,F(f.value),1)])):U("",!0)])):U("",!0),k(q,{modelValue:u.name,"onUpdate:modelValue":I[2]||(I[2]=Z=>u.name=Z),label:"Project Name",placeholder:"My Analysis"},null,8,["modelValue"]),c("div",null,[I[14]||(I[14]=c("label",{class:"block text-sm/6 font-medium text-gray-900 dark:text-white mb-3"}," Project Type ",-1)),c("div",J2,[(y(),x(J,null,ve(S,Z=>c("div",{key:Z.id,onClick:ee=>u.type=Z.id,class:Ve(["border-2 rounded-lg p-4 cursor-pointer transition",u.type===Z.id?"border-sky-600 bg-sky-50 dark:bg-sky-900/20 dark:border-sky-500":"border-gray-200 dark:border-gray-700 hover:border-sky-300 dark:hover:border-sky-600"])},[c("div",X2,[c("div",Q2,F(Z.icon),1),c("div",Z2,[c("h3",eS,F(Z.title),1),c("p",tS,F(Z.description),1)]),u.type===Z.id?(y(),x("div",sS,[...I[13]||(I[13]=[c("svg",{class:"h-6 w-6",fill:"currentColor",viewBox:"0 0 20 20"},[c("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1)])])):U("",!0)])],10,Y2)),64))])]),u.type==="project"?(y(),x("div",iS,[k(zs,{modelValue:u.sensitive,"onUpdate:modelValue":I[3]||(I[3]=Z=>u.sensitive=Z),id:"sensitive",description:"Creates separate public/private directories for inputs, reference materials, and outputs. Recommended for PHI, PII, or IRB-restricted data."},{default:R(()=>[...I[15]||(I[15]=[ie(" Privacy-first mode ",-1)])]),_:1},8,["modelValue"])])):U("",!0),c("div",nS,[k(zs,{modelValue:u.use_git,"onUpdate:modelValue":I[4]||(I[4]=Z=>u.use_git=Z),id:"use_git"},{default:R(()=>[...I[16]||(I[16]=[ie(" Initialize git repository ",-1)])]),_:1},8,["modelValue"]),k(zs,{modelValue:u.use_renv,"onUpdate:modelValue":I[5]||(I[5]=Z=>u.use_renv=Z),id:"use_renv"},{default:R(()=>[...I[17]||(I[17]=[ie(" Enable renv for package management ",-1)])]),_:1},8,["modelValue"]),k(zs,{modelValue:u.attach_defaults,"onUpdate:modelValue":I[6]||(I[6]=Z=>u.attach_defaults=Z),id:"attach_defaults"},{default:R(()=>[...I[18]||(I[18]=[ie(" Auto-load common packages (dplyr, tidyr, ggplot2) ",-1)])]),_:1},8,["modelValue"])]),M.value?(y(),me(Ai,{key:2,type:"error",description:M.value},null,8,["description"])):U("",!0),L.value?(y(),me(Ai,{key:3,type:"success",title:"Project created successfully!"},{default:R(()=>[I[22]||(I[22]=c("p",{class:"mt-2"},"Next steps:",-1)),c("ol",rS,[c("li",null,"cd "+F(f.value),1),I[19]||(I[19]=c("li",null,"R",-1)),I[20]||(I[20]=c("li",null,"library(framework)",-1)),I[21]||(I[21]=c("li",null,"scaffold()",-1))])]),_:1})):U("",!0)])]),_:1},8,["class"])],2))}},aS={class:"flex items-start justify-between"},uS={class:"text-3xl font-bold tracking-tight text-gray-900 dark:text-white"},dS={key:0,class:"mt-2 text-sm text-gray-600 dark:text-gray-400"},cS={key:0},Ar={__name:"PageHeader",props:{title:{type:String,required:!0},description:{type:String,default:null}},setup(t){return(e,s)=>(y(),x("div",aS,[c("div",null,[c("h1",uS,F(t.title),1),t.description?(y(),x("p",dS,F(t.description),1)):U("",!0)]),e.$slots.actions?(y(),x("div",cS,[Ct(e.$slots,"actions")])):U("",!0)]))}},Vn={__name:"Badge",props:{variant:{type:String,default:"gray",validator:t=>["gray","red","yellow","green","blue","indigo","purple","pink","sky"].includes(t)},pill:{type:Boolean,default:!1},dot:{type:Boolean,default:!1}},setup(t){const e=t,s=le(()=>{const n=["inline-flex","items-center","px-2","py-1","text-xs","font-medium","inset-ring"];n.push(e.pill?"rounded-full":"rounded-md"),e.dot&&n.push("gap-x-1.5");const o={gray:{bg:"bg-gray-50",text:"text-gray-600",ring:"inset-ring-gray-500/10",darkBg:"dark:bg-gray-400/10",darkText:e.dot?"dark:text-gray-200":"dark:text-gray-400",darkRing:e.dot?"dark:inset-ring-white/10":"dark:inset-ring-gray-400/20"},red:{bg:"bg-red-50",text:"text-red-700",ring:"inset-ring-red-600/10",darkBg:"dark:bg-red-400/10",darkText:"dark:text-red-400",darkRing:"dark:inset-ring-red-400/20"},yellow:{bg:"bg-yellow-50",text:"text-yellow-800",ring:"inset-ring-yellow-600/20",darkBg:"dark:bg-yellow-400/10",darkText:"dark:text-yellow-500",darkRing:"dark:inset-ring-yellow-400/20"},green:{bg:"bg-green-50",text:"text-green-700",ring:"inset-ring-green-600/20",darkBg:"dark:bg-green-400/10",darkText:"dark:text-green-400",darkRing:"dark:inset-ring-green-500/20"},sky:{bg:"bg-sky-50",text:"text-sky-700",ring:"inset-ring-sky-600/20",darkBg:"dark:bg-sky-400/10",darkText:"dark:text-sky-400",darkRing:"dark:inset-ring-sky-500/20"},blue:{bg:"bg-blue-50",text:"text-blue-700",ring:"inset-ring-blue-700/10",darkBg:"dark:bg-blue-400/10",darkText:"dark:text-blue-400",darkRing:"dark:inset-ring-blue-400/30"},indigo:{bg:"bg-indigo-50",text:"text-indigo-700",ring:"inset-ring-indigo-700/10",darkBg:"dark:bg-indigo-400/10",darkText:"dark:text-indigo-400",darkRing:"dark:inset-ring-indigo-400/30"},purple:{bg:"bg-purple-50",text:"text-purple-700",ring:"inset-ring-purple-700/10",darkBg:"dark:bg-purple-400/10",darkText:"dark:text-purple-400",darkRing:"dark:inset-ring-purple-400/30"},pink:{bg:"bg-pink-50",text:"text-pink-700",ring:"inset-ring-pink-700/10",darkBg:"dark:bg-pink-400/10",darkText:"dark:text-pink-400",darkRing:"dark:inset-ring-pink-400/20"}}[e.variant];return e.dot?n.push("text-gray-900","inset-ring-gray-200","dark:text-white","dark:inset-ring-white/10"):n.push(o.bg,o.text,o.ring,o.darkBg,o.darkText,o.darkRing),n.join(" ")}),i=le(()=>`size-1.5 ${{gray:"fill-gray-500 dark:fill-gray-400",red:"fill-red-500 dark:fill-red-400",yellow:"fill-yellow-500 dark:fill-yellow-400",green:"fill-green-500 dark:fill-green-400",sky:"fill-sky-500 dark:fill-sky-400",blue:"fill-blue-500 dark:fill-blue-400",indigo:"fill-indigo-500 dark:fill-indigo-400",purple:"fill-purple-500 dark:fill-purple-400",pink:"fill-pink-500 dark:fill-pink-400"}[e.variant]}`);return(n,r)=>(y(),x("span",{class:Ve(s.value)},[t.dot?(y(),x("svg",{key:0,viewBox:"0 0 6 6","aria-hidden":"true",class:Ve(i.value)},[...r[0]||(r[0]=[c("circle",{r:"3",cx:"3",cy:"3"},null,-1)])],2)):U("",!0),Ct(n.$slots,"default")],2))}},Hg=(t,e)=>{const s=t.__vccOpts||t;for(const[i,n]of e)s[i]=n;return s},fS={key:0,class:"relative z-50"},hS={class:"fixed inset-0 z-10 overflow-y-auto"},pS={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},mS=["aria-labelledby"],gS=["id"],yS={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},vS={__name:"Modal",props:{modelValue:{type:Boolean,default:!1},title:{type:String,default:null},description:{type:String,default:null},icon:{type:String,default:null,validator:t=>["success","error","warning","info"].includes(t)},size:{type:String,default:"md",validator:t=>["sm","md","lg","xl"].includes(t)},variant:{type:String,default:"centered",validator:t=>["centered","side-icon","left"].includes(t)},closeOnBackdrop:{type:Boolean,default:!0}},emits:["update:modelValue","close"],setup(t,{expose:e,emit:s}){const i=t,n=s,r=le(()=>`modal-title-${Math.random().toString(36).substr(2,9)}`),o={sm:"sm:max-w-sm",md:"sm:max-w-lg",lg:"sm:max-w-2xl",xl:"sm:max-w-4xl"},l=le(()=>["relative","transform","overflow-hidden","rounded-lg","bg-white","px-4","pt-5","pb-4","text-left","shadow-xl","transition-all","sm:my-8","sm:w-full","sm:p-6","dark:bg-gray-800","dark:outline","dark:-outline-offset-1","dark:outline-white/10",o[i.size]].join(" ")),a=le(()=>{const M=["flex","items-center","justify-center","rounded-full"];i.variant==="centered"?M.push("mx-auto","size-12"):M.push("shrink-0","sm:mx-0","sm:size-10");const L={success:"bg-sky-100 text-sky-600 dark:bg-sky-500/10 dark:text-sky-400",error:"bg-red-100 text-red-600 dark:bg-red-500/10 dark:text-red-400",warning:"bg-yellow-100 text-yellow-600 dark:bg-yellow-500/10 dark:text-yellow-400",info:"bg-blue-100 text-blue-600 dark:bg-blue-500/10 dark:text-blue-400"};return i.icon&&M.push(L[i.icon]),M.join(" ")}),d=le(()=>{const M=[];return i.variant==="centered"?M.push("mt-3","text-center","sm:mt-5"):i.variant==="left"?M.push("text-left"):M.push("mt-3","text-center","sm:mt-0","sm:ml-4","sm:text-left"),i.variant==="side-icon"&&(i.icon||i.$slots.icon)&&M.push("sm:flex","sm:items-start"),M.join(" ")}),u=le(()=>i.variant==="left"?"text-lg font-bold text-gray-900 dark:text-white mb-4":"text-base font-semibold text-gray-900 dark:text-white"),f=le(()=>(i.variant==="centered","mt-2")),h=le(()=>i.variant==="left"?"mt-6 pt-4 border-t border-gray-200 dark:border-gray-700 flex gap-3 justify-between":i.variant==="centered"?"mt-5 sm:mt-6 flex gap-3 justify-end":"mt-5 sm:mt-4 flex gap-3 justify-end"),m=le(()=>i.icon==="success"?{template:`
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="m4.5 12.75 6 6 9-13.5" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      `}:i.icon==="error"||i.icon==="warning"?{template:`
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      `}:i.icon==="info"?{template:`
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      `}:null),w=()=>{i.closeOnBackdrop&&_()},S=M=>{M.key==="Escape"&&i.modelValue&&_()},_=()=>{n("update:modelValue",!1),n("close")};return es(()=>{window.addEventListener("keydown",S)}),Cr(()=>{window.removeEventListener("keydown",S)}),e({close:_}),(M,L)=>(y(),me(Hm,{to:"body"},[k(Sc,{name:"modal"},{default:R(()=>[t.modelValue?(y(),x("div",fS,[c("div",{class:"fixed inset-0 bg-gray-500/75 transition-opacity dark:bg-gray-900/50",onClick:w}),c("div",hS,[c("div",pS,[c("div",{class:Ve(l.value),role:"dialog","aria-modal":"true","aria-labelledby":r.value},[M.$slots.icon||t.icon?(y(),x("div",{key:0,class:Ve(a.value)},[Ct(M.$slots,"icon",{},()=>[t.icon?(y(),me(Ws(m.value),{key:0,class:"size-6"})):U("",!0)],!0)],2)):U("",!0),c("div",{class:Ve(d.value)},[t.title?(y(),x("h3",{key:0,id:r.value,class:Ve(u.value)},F(t.title),11,gS)):U("",!0),t.description||M.$slots.default?(y(),x("div",{key:1,class:Ve(f.value)},[t.description?(y(),x("p",yS,F(t.description),1)):Ct(M.$slots,"default",{key:1},void 0,!0)],2)):U("",!0)],2),M.$slots.actions?(y(),x("div",{key:1,class:Ve(h.value)},[Ct(M.$slots,"actions",{},void 0,!0)],2)):U("",!0)],10,mS)])])])):U("",!0)]),_:3})]))}},bo=Hg(vS,[["__scopeId","data-v-2e078ad9"]]),bS=["title"],xS={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},kS={key:1,class:"h-4 w-4 text-sky-600 dark:text-sky-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},wS={key:2},eo={__name:"CopyButton",props:{value:{type:String,required:!0},showLabel:{type:Boolean,default:!1},variant:{type:String,default:"default",validator:t=>["default","ghost","bare"].includes(t)},successMessage:{type:String,default:"Copied to clipboard"}},setup(t){const e=t,s=Oa(),i=he(!1);let n=null;const r=le(()=>e.variant==="bare"?"inline-flex items-center text-sm font-medium transition-all":"inline-flex items-center gap-1.5 rounded-md px-2.5 py-1.5 text-sm font-medium transition-all"),o=le(()=>e.variant==="ghost"?"text-zinc-600 hover:bg-zinc-100 dark:text-zinc-400 dark:hover:bg-zinc-800":e.variant==="bare"?"gap-2 rounded-lg transition-all focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-1 focus-visible:outline-sky-500":"bg-zinc-100 text-zinc-700 hover:bg-zinc-200 dark:bg-zinc-800 dark:text-zinc-300 dark:hover:bg-zinc-700"),l=async()=>{try{await navigator.clipboard.writeText(e.value),i.value=!0,s.success("Copied!",e.successMessage),n&&clearTimeout(n),n=setTimeout(()=>{i.value=!1},2e3)}catch(a){s.error("Copy failed","Could not copy to clipboard"),console.error("Failed to copy:",a)}};return(a,d)=>(y(),x("button",{type:"button",onClick:l,class:Ve([r.value,o.value,i.value&&"ring-2 ring-sky-500/20"]),title:i.value?"Copied!":"Copy to clipboard"},[Ct(a.$slots,"default",{copied:i.value},()=>[i.value?(y(),x("svg",kS,[...d[1]||(d[1]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(y(),x("svg",xS,[...d[0]||(d[0]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"},null,-1)])])),t.showLabel?(y(),x("span",wS,F(i.value?"Copied!":"Copy"),1)):U("",!0)])],10,bS))}},SS={class:"mx-auto max-w-5xl p-10"},CS={class:"flex gap-3"},_S={key:0,class:"mt-6 flex flex-col gap-3 rounded-2xl border border-zinc-200 bg-white p-5 shadow-sm dark:border-zinc-800 dark:bg-zinc-900 sm:flex-row sm:items-center sm:justify-between"},AS={class:"min-w-0"},VS={class:"mt-1 font-mono text-sm text-zinc-600 dark:text-zinc-400 truncate"},MS={class:"flex items-center gap-2"},DS={key:1,class:"mt-10 grid gap-6 sm:grid-cols-2"},TS={class:"relative"},ES={class:"flex items-start justify-between"},$S={class:"flex-1"},PS={class:"flex items-center gap-3"},OS={class:"flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-sky-500 to-sky-600 shadow-lg shadow-sky-500/20"},RS={key:0,class:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},jS={key:1,class:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},LS={key:2,class:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},BS={class:"mt-4 text-xl font-bold text-zinc-900 dark:text-white"},IS={class:"mt-2 text-sm text-zinc-600 dark:text-zinc-400 font-mono truncate"},US={key:0,class:"mt-3 flex items-center gap-2 text-xs text-zinc-600 dark:text-zinc-400"},NS={key:0,class:"text-zinc-400 dark:text-zinc-500"},zS={key:1,class:"truncate"},FS={class:"mt-3 flex items-center gap-2 text-xs text-zinc-500 dark:text-zinc-500"},HS={class:"mt-6 flex gap-2"},WS={key:2,class:"mt-12 overflow-hidden rounded-3xl bg-gradient-to-br from-sky-600 via-sky-500 to-teal-500 p-12 shadow-2xl shadow-sky-500/20"},qS={class:"space-y-4"},GS={key:0,class:"mt-2 text-sm text-red-600 dark:text-red-400"},KS={class:"flex gap-3 justify-end"},JS={key:0,class:"space-y-6"},YS={class:"text-lg font-semibold text-zinc-900 dark:text-white mb-3"},XS={class:"grid gap-4"},QS={class:"text-sm text-zinc-600 dark:text-zinc-400 font-mono bg-zinc-50 dark:bg-zinc-800 px-3 py-2 rounded-lg"},ZS={key:0,class:"grid grid-cols-2 gap-4"},e4={class:"text-sm text-zinc-600 dark:text-zinc-400"},t4={key:0},s4={class:"text-sm text-zinc-600 dark:text-zinc-400"},i4={class:"text-sm text-zinc-600 dark:text-zinc-400"},n4={class:"flex gap-3 justify-end"},r4={__name:"ProjectsView",setup(t){const e=Pa(),s=_r(),i=he(!1),n=he(!1),r=he(!1),o=he(""),l=he(""),a=he(!1),d=he(null),u=he({projects:[]}),f=he(""),h=async()=>{try{const T=await(await fetch("/api/settings/get")).json();u.value.projects=T.projects||[],f.value=T.projects_root&&T.projects_root!==""?T.projects_root:""}catch($){console.error("Failed to load settings:",$)}},m=()=>{s.path==="/projects/new"?i.value=!0:e.push("/projects/new")},w=()=>{i.value=!1,s.path==="/projects/new"&&e.push("/projects")},S=$=>{i.value=!1,h(),$?.id?e.push(`/project/${$.id}`):e.push("/projects")},_=()=>{n.value=!1,o.value="",l.value=""},M=$=>{d.value=$,r.value=!0},L=async()=>{l.value="",a.value=!0;try{const $=await fetch("/api/project/import",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_dir:o.value})}),T=await $.text();if(!T){l.value="Server returned empty response",a.value=!1;return}const N=JSON.parse(T);$.ok?(_(),h()):l.value=N.error||"Failed to import project"}catch($){l.value="Network error: "+$.message}finally{a.value=!1}};return es(()=>{h(),i.value=s.path==="/projects/new"}),Ye(()=>s.path,$=>{i.value=$==="/projects/new"},{immediate:!0}),($,T)=>(y(),x("div",SS,[k(Ar,{title:"Your Projects",description:"Framework projects you've created."},{actions:R(()=>[c("div",CS,[k($e,{size:"lg",variant:"secondary",onClick:T[0]||(T[0]=N=>n.value=!0)},{default:R(()=>[...T[7]||(T[7]=[ie(" Import Project ",-1)])]),_:1}),k($e,{size:"lg",onClick:m},{default:R(()=>[...T[8]||(T[8]=[ie(" New Project ",-1)])]),_:1})])]),_:1}),f.value?(y(),x("div",_S,[c("div",AS,[T[9]||(T[9]=c("p",{class:"text-sm font-medium text-zinc-700 dark:text-zinc-200"},"Projects Root",-1)),c("p",VS,F(f.value),1)]),c("div",MS,[k(eo,{value:f.value,variant:"ghost","show-label":"","success-message":"Root path copied"},null,8,["value"]),k($e,{size:"sm",variant:"secondary",onClick:T[1]||(T[1]=N=>lt(e).push("/settings"))},{default:R(()=>[...T[10]||(T[10]=[ie(" Edit ",-1)])]),_:1})])])):U("",!0),u.value.projects&&u.value.projects.length>0?(y(),x("div",DS,[(y(!0),x(J,null,ve(u.value.projects,(N,B)=>(y(),x("div",{key:B,class:"group relative overflow-hidden rounded-2xl border border-zinc-200 bg-white p-6 shadow-sm transition-all duration-300 hover:shadow-xl hover:shadow-zinc-900/5 dark:border-zinc-800 dark:bg-zinc-900 dark:hover:shadow-sky-500/5"},[T[18]||(T[18]=c("div",{class:"absolute -right-6 -top-6 h-24 w-24 rounded-full bg-gradient-to-br from-sky-500/10 to-sky-600/10 blur-2xl transition-all duration-300 group-hover:scale-150"},null,-1)),c("div",TS,[c("div",ES,[c("div",$S,[c("div",PS,[c("div",OS,[N.type==="project"?(y(),x("svg",RS,[...T[11]||(T[11]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)])])):N.type==="course"?(y(),x("svg",jS,[...T[12]||(T[12]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"},null,-1)])])):(y(),x("svg",LS,[...T[13]||(T[13]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"},null,-1)])]))]),k(Vn,{variant:"sky"},{default:R(()=>[ie(F(N.type),1)]),_:2},1024)]),c("h3",BS,F(N.name),1),c("p",IS,F(N.path),1),N.author?(y(),x("div",US,[T[14]||(T[14]=c("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),c("span",null,F(N.author),1),N.author_email?(y(),x("span",NS,"")):U("",!0),N.author_email?(y(),x("span",zS,F(N.author_email),1)):U("",!0)])):U("",!0),c("div",FS,[T[15]||(T[15]=c("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),c("span",null,"Created "+F(N.created),1)])])]),c("div",HS,[k($e,{variant:"primary",size:"md",onClick:I=>$.$router.push(`/project/${N.id}`),class:"flex-1"},{default:R(()=>[...T[16]||(T[16]=[ie(" View Project ",-1)])]),_:1},8,["onClick"]),k($e,{variant:"secondary",size:"md",onClick:I=>M(N),class:"flex-1"},{default:R(()=>[...T[17]||(T[17]=[ie(" See More ",-1)])]),_:1},8,["onClick"])])])]))),128))])):(y(),x("div",WS,[c("div",{class:"relative"},[T[21]||(T[21]=c("div",{class:"absolute -right-10 -top-10 h-40 w-40 rounded-full bg-white/10 blur-3xl"},null,-1)),T[22]||(T[22]=c("div",{class:"absolute -bottom-10 -left-10 h-40 w-40 rounded-full bg-white/10 blur-3xl"},null,-1)),c("div",{class:"relative text-center"},[T[20]||(T[20]=Da('<div class="mx-auto flex h-16 w-16 items-center justify-center rounded-2xl bg-white/20 backdrop-blur-sm"><svg class="h-8 w-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg></div><h2 class="mt-6 text-3xl font-bold text-white">Ready to start?</h2><p class="mt-3 text-lg text-sky-50"> Create a new Framework project with beautiful structure and best practices built-in. </p>',3)),c("button",{onClick:m,class:"mt-8 inline-flex items-center gap-2 rounded-xl bg-white px-6 py-3 text-base font-semibold text-sky-600 shadow-xl transition-all duration-200 hover:scale-105 hover:shadow-2xl focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-white"},[...T[19]||(T[19]=[c("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),ie(" Create Your First Project ",-1)])])])])])),i.value?(y(),me(lS,{key:3,"projects-root":f.value,onClose:w,onCreated:S},null,8,["projects-root"])):U("",!0),k(bo,{modelValue:n.value,"onUpdate:modelValue":T[3]||(T[3]=N=>n.value=N),title:"Import Existing Project",size:"md"},{actions:R(()=>[c("div",KS,[k($e,{variant:"secondary",onClick:_},{default:R(()=>[...T[26]||(T[26]=[ie(" Cancel ",-1)])]),_:1}),k($e,{variant:"primary",onClick:L,disabled:!o.value||a.value},{default:R(()=>[ie(F(a.value?"Importing...":"Import"),1)]),_:1},8,["disabled"])])]),default:R(()=>[c("div",qS,[T[25]||(T[25]=c("p",{class:"text-sm text-zinc-600 dark:text-zinc-400"}," Import an existing Framework project that isn't in your registry yet. ",-1)),c("div",null,[T[23]||(T[23]=c("label",{for:"import-path",class:"block text-sm font-medium text-zinc-900 dark:text-white mb-2"}," Project Directory Path ",-1)),He(c("input",{id:"import-path","onUpdate:modelValue":T[2]||(T[2]=N=>o.value=N),type:"text",placeholder:"/Users/you/projects/my-framework-project",class:Ve(["block w-full rounded-lg border-0 px-4 py-2.5 text-zinc-900 shadow-sm ring-1 ring-inset ring-zinc-300 placeholder:text-zinc-400 focus:ring-2 focus:ring-inset focus:ring-sky-600 dark:bg-zinc-800 dark:text-white dark:ring-zinc-700 dark:placeholder:text-zinc-500 dark:focus:ring-sky-500 sm:text-sm sm:leading-6 font-mono",{"ring-red-500 dark:ring-red-500":l.value}])},null,2),[[Ki,o.value]]),T[24]||(T[24]=c("p",{class:"mt-2 text-xs text-zinc-500 dark:text-zinc-500"}," Enter the full path to the Framework project directory ",-1)),l.value?(y(),x("p",GS,F(l.value),1)):U("",!0)])])]),_:1},8,["modelValue"]),k(bo,{modelValue:r.value,"onUpdate:modelValue":T[6]||(T[6]=N=>r.value=N),title:"Project Details",size:"lg"},{actions:R(()=>[c("div",n4,[k($e,{variant:"secondary",onClick:T[4]||(T[4]=N=>r.value=!1)},{default:R(()=>[...T[31]||(T[31]=[ie(" Close ",-1)])]),_:1}),k($e,{variant:"primary",onClick:T[5]||(T[5]=N=>{$.$router.push(`/project/${d.value.id}`),r.value=!1})},{default:R(()=>[...T[32]||(T[32]=[ie(" View Full Details ",-1)])]),_:1})])]),default:R(()=>[d.value?(y(),x("div",JS,[c("div",null,[c("h3",YS,F(d.value.name),1),k(Vn,{variant:"sky",class:"mb-4"},{default:R(()=>[ie(F(d.value.type),1)]),_:1})]),c("div",XS,[c("div",null,[T[27]||(T[27]=c("label",{class:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1"}," Location ",-1)),c("p",QS,F(d.value.path),1)]),d.value.author?(y(),x("div",ZS,[c("div",null,[T[28]||(T[28]=c("label",{class:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1"}," Author ",-1)),c("p",e4,F(d.value.author),1)]),d.value.author_email?(y(),x("div",t4,[T[29]||(T[29]=c("label",{class:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1"}," Email ",-1)),c("p",s4,F(d.value.author_email),1)])):U("",!0)])):U("",!0),c("div",null,[T[30]||(T[30]=c("label",{class:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1"}," Created ",-1)),c("p",i4,F(d.value.created),1)])])])):U("",!0)]),_:1},8,["modelValue"])]))}},o4=["for"],l4={class:"mt-2 grid grid-cols-1"},a4=["id","value"],Cs={__name:"Select",props:{id:{type:String,default:()=>`select-${Math.random().toString(36).substr(2,9)}`},modelValue:{type:[String,Number],default:""},label:{type:String,default:null}},emits:["update:modelValue"],setup(t){return(e,s)=>(y(),x("div",null,[t.label?(y(),x("label",{key:0,for:t.id,class:"block text-sm/6 font-medium text-gray-900 dark:text-white"},F(t.label),9,o4)):U("",!0),c("div",l4,[c("select",{id:t.id,value:t.modelValue,onChange:s[0]||(s[0]=i=>e.$emit("update:modelValue",i.target.value)),class:"col-start-1 row-start-1 w-full appearance-none rounded-md bg-white py-1.5 pr-8 pl-3 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 focus-visible:outline-2 focus-visible:-outline-offset-2 focus-visible:outline-sky-600 sm:text-sm/6 dark:bg-white/5 dark:text-white dark:outline-white/10 dark:*:bg-gray-800 dark:focus-visible:outline-sky-500"},[Ct(e.$slots,"default")],40,a4),s[1]||(s[1]=c("svg",{viewBox:"0 0 16 16",fill:"currentColor","data-slot":"icon","aria-hidden":"true",class:"pointer-events-none col-start-1 row-start-1 mr-2 size-5 self-center justify-self-end text-gray-500 sm:size-4 dark:text-gray-400"},[c("path",{d:"M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z","clip-rule":"evenodd","fill-rule":"evenodd"})],-1))])]))}},u4={class:"flex items-center gap-3"},d4=["id","name","checked","disabled","aria-label"],c4={key:0,class:"text-sm/6"},f4=["for"],h4=["id"],Be={__name:"Toggle",props:{id:{type:String,default:()=>`toggle-${Math.random().toString(36).substr(2,9)}`},name:{type:String,default:null},modelValue:{type:Boolean,default:!1},label:{type:String,default:null},description:{type:String,default:null},ariaLabel:{type:String,default:null},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(t,{emit:e}){const s=t,i=e,n=r=>{if(!s.disabled){const o=r.target.checked;i("update:modelValue",o),i("change",o)}};return(r,o)=>(y(),x("div",u4,[c("div",{class:Ve(["group relative inline-flex w-11 shrink-0 rounded-full p-0.5 inset-ring inset-ring-gray-900/5 outline-offset-2 transition-colors duration-200 ease-in-out dark:inset-ring-white/10",[t.modelValue?"bg-sky-600 outline-sky-600 dark:bg-sky-500 dark:outline-sky-500":"bg-gray-200 outline-sky-600 dark:bg-white/5 dark:outline-sky-500"]])},[c("span",{class:Ve(["size-5 rounded-full bg-white shadow-xs ring-1 ring-gray-900/5 transition-transform duration-200 ease-in-out",{"translate-x-5":t.modelValue}])},null,2),c("input",{id:t.id,type:"checkbox",name:t.name,checked:t.modelValue,disabled:t.disabled,"aria-label":t.ariaLabel||t.label,class:"absolute inset-0 appearance-none focus:outline-hidden cursor-pointer disabled:cursor-not-allowed",onChange:n},null,40,d4)],2),t.label||t.description?(y(),x("div",c4,[t.label?(y(),x("label",{key:0,for:t.id,class:Ve(["font-medium text-gray-900 cursor-pointer dark:text-white",{"cursor-not-allowed opacity-50":t.disabled}])},F(t.label),11,f4)):U("",!0),t.description?(y(),x("p",{key:1,id:`${t.id}-description`,class:"text-gray-500 dark:text-gray-400"},F(t.description),9,h4)):U("",!0)])):U("",!0)]))}},p4={class:"flex items-center"},m4=["id","name","value","checked"],g4=["for"],ii={__name:"Radio",props:{id:{type:String,required:!0},name:{type:String,required:!0},value:{type:[String,Number,Boolean],required:!0},modelValue:{type:[String,Number,Boolean],default:null}},emits:["update:modelValue"],setup(t){return(e,s)=>(y(),x("div",p4,[c("input",{id:t.id,type:"radio",name:t.name,value:t.value,checked:t.modelValue===t.value,onChange:s[0]||(s[0]=i=>e.$emit("update:modelValue",t.value)),class:"relative size-4 appearance-none rounded-full border border-gray-300 bg-white before:absolute before:inset-1 before:rounded-full before:bg-white not-checked:before:hidden checked:border-sky-600 checked:bg-sky-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:before:bg-gray-400 dark:border-white/10 dark:bg-white/5 dark:checked:border-sky-500 dark:checked:bg-sky-500 dark:focus-visible:outline-sky-500 dark:disabled:border-white/5 dark:disabled:bg-white/10 dark:disabled:before:bg-white/20 forced-colors:appearance-auto forced-colors:before:hidden"},null,40,m4),c("label",{for:t.id,class:"ml-3 block text-sm/6 font-medium text-gray-900 dark:text-white"},[Ct(e.$slots,"default")],8,g4)]))}},y4={class:"text-sm/6 font-semibold text-gray-900 dark:text-white"},v4={key:0,class:"mt-1 text-sm/6 text-gray-600 dark:text-gray-400"},b4={class:"mt-6 space-y-6"},gu={__name:"RadioGroup",props:{legend:{type:String,required:!0},description:{type:String,default:null}},setup(t){return(e,s)=>(y(),x("fieldset",null,[c("legend",y4,F(t.legend),1),t.description?(y(),x("p",v4,F(t.description),1)):U("",!0),c("div",b4,[Ct(e.$slots,"default")])]))}},x4={class:"space-y-4"},k4={class:"flex items-start gap-4"},w4={class:"flex-1"},S4=["onClick"],Vt={__name:"Repeater",props:{modelValue:{type:Array,default:()=>[]},addLabel:{type:String,default:"Add Item"},defaultItem:{type:[Object,Function],default:()=>({})}},emits:["update:modelValue"],setup(t,{emit:e}){const s=t,i=e,n=()=>{const l=typeof s.defaultItem=="function"?s.defaultItem():{...s.defaultItem,_id:Date.now()};i("update:modelValue",[...s.modelValue,l])},r=l=>{const a=s.modelValue.filter((d,u)=>u!==l);i("update:modelValue",a)},o=(l,a,d)=>{const u=[...s.modelValue];u[l]={...u[l],[a]:d},i("update:modelValue",u)};return(l,a)=>(y(),x("div",x4,[(y(!0),x(J,null,ve(t.modelValue,(d,u)=>(y(),x("div",{key:d._id||u,class:"rounded-lg border border-gray-200 p-4 dark:border-gray-700"},[c("div",k4,[c("div",w4,[Ct(l.$slots,"default",{item:d,index:u,update:(f,h)=>o(u,f,h)})]),c("button",{type:"button",onClick:f=>r(u),class:"shrink-0 rounded-md p-1.5 text-gray-400 transition hover:bg-red-50 hover:text-red-600 dark:hover:bg-red-900/20 dark:hover:text-red-400",title:"Remove"},[...a[0]||(a[0]=[c("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,S4)])]))),128)),k($e,{variant:"secondary",size:"sm",onClick:n,class:"inline-flex items-center"},{default:R(()=>[a[1]||(a[1]=c("svg",{class:"mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)),ie(" "+F(t.addLabel),1)]),_:1})]))}};let ud=[],Wg=[];(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,s=0;e<t.length;e++)(e%2?Wg:ud).push(s=s+t[e])})();function C4(t){if(t<768)return!1;for(let e=0,s=ud.length;;){let i=e+s>>1;if(t<ud[i])s=i;else if(t>=Wg[i])e=i+1;else return!0;if(e==s)return!1}}function _h(t){return t>=127462&&t<=127487}const Ah=8205;function _4(t,e,s=!0,i=!0){return(s?qg:A4)(t,e,i)}function qg(t,e,s){if(e==t.length)return e;e&&Gg(t.charCodeAt(e))&&Kg(t.charCodeAt(e-1))&&e--;let i=yu(t,e);for(e+=Vh(i);e<t.length;){let n=yu(t,e);if(i==Ah||n==Ah||s&&C4(n))e+=Vh(n),i=n;else if(_h(n)){let r=0,o=e-2;for(;o>=0&&_h(yu(t,o));)r++,o-=2;if(r%2==0)break;e+=2}else break}return e}function A4(t,e,s){for(;e>0;){let i=qg(t,e-2,s);if(i<e)return i;e--}return 0}function yu(t,e){let s=t.charCodeAt(e);if(!Kg(s)||e+1==t.length)return s;let i=t.charCodeAt(e+1);return Gg(i)?(s-55296<<10)+(i-56320)+65536:s}function Gg(t){return t>=56320&&t<57344}function Kg(t){return t>=55296&&t<56320}function Vh(t){return t<65536?1:2}class tt{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,s,i){[e,s]=mr(this,e,s);let n=[];return this.decompose(0,e,n,2),i.length&&i.decompose(0,i.length,n,3),this.decompose(s,this.length,n,1),di.from(n,this.length-(s-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,s=this.length){[e,s]=mr(this,e,s);let i=[];return this.decompose(e,s,i,0),di.from(i,s-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let s=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),n=new to(this),r=new to(e);for(let o=s,l=s;;){if(n.next(o),r.next(o),o=0,n.lineBreak!=r.lineBreak||n.done!=r.done||n.value!=r.value)return!1;if(l+=n.value.length,n.done||l>=i)return!0}}iter(e=1){return new to(this,e)}iterRange(e,s=this.length){return new Jg(this,e,s)}iterLines(e,s){let i;if(e==null)i=this.iter();else{s==null&&(s=this.lines+1);let n=this.line(e).from;i=this.iterRange(n,Math.max(n,s==this.lines+1?this.length:s<=1?0:this.line(s-1).to))}return new Yg(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?tt.empty:e.length<=32?new Mt(e):di.from(Mt.split(e,[]))}}class Mt extends tt{constructor(e,s=V4(e)){super(),this.text=e,this.length=s}get lines(){return this.text.length}get children(){return null}lineInner(e,s,i,n){for(let r=0;;r++){let o=this.text[r],l=n+o.length;if((s?i:l)>=e)return new M4(n,l,i,o);n=l+1,i++}}decompose(e,s,i,n){let r=e<=0&&s>=this.length?this:new Mt(Mh(this.text,e,s),Math.min(s,this.length)-Math.max(0,e));if(n&1){let o=i.pop(),l=Pl(r.text,o.text.slice(),0,r.length);if(l.length<=32)i.push(new Mt(l,o.length+r.length));else{let a=l.length>>1;i.push(new Mt(l.slice(0,a)),new Mt(l.slice(a)))}}else i.push(r)}replace(e,s,i){if(!(i instanceof Mt))return super.replace(e,s,i);[e,s]=mr(this,e,s);let n=Pl(this.text,Pl(i.text,Mh(this.text,0,e)),s),r=this.length+i.length-(s-e);return n.length<=32?new Mt(n,r):di.from(Mt.split(n,[]),r)}sliceString(e,s=this.length,i=`
`){[e,s]=mr(this,e,s);let n="";for(let r=0,o=0;r<=s&&o<this.text.length;o++){let l=this.text[o],a=r+l.length;r>e&&o&&(n+=i),e<a&&s>r&&(n+=l.slice(Math.max(0,e-r),s-r)),r=a+1}return n}flatten(e){for(let s of this.text)e.push(s)}scanIdentical(){return 0}static split(e,s){let i=[],n=-1;for(let r of e)i.push(r),n+=r.length+1,i.length==32&&(s.push(new Mt(i,n)),i=[],n=-1);return n>-1&&s.push(new Mt(i,n)),s}}class di extends tt{constructor(e,s){super(),this.children=e,this.length=s,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,s,i,n){for(let r=0;;r++){let o=this.children[r],l=n+o.length,a=i+o.lines-1;if((s?a:l)>=e)return o.lineInner(e,s,i,n);n=l+1,i=a+1}}decompose(e,s,i,n){for(let r=0,o=0;o<=s&&r<this.children.length;r++){let l=this.children[r],a=o+l.length;if(e<=a&&s>=o){let d=n&((o<=e?1:0)|(a>=s?2:0));o>=e&&a<=s&&!d?i.push(l):l.decompose(e-o,s-o,i,d)}o=a+1}}replace(e,s,i){if([e,s]=mr(this,e,s),i.lines<this.lines)for(let n=0,r=0;n<this.children.length;n++){let o=this.children[n],l=r+o.length;if(e>=r&&s<=l){let a=o.replace(e-r,s-r,i),d=this.lines-o.lines+a.lines;if(a.lines<d>>4&&a.lines>d>>6){let u=this.children.slice();return u[n]=a,new di(u,this.length-(s-e)+i.length)}return super.replace(r,l,a)}r=l+1}return super.replace(e,s,i)}sliceString(e,s=this.length,i=`
`){[e,s]=mr(this,e,s);let n="";for(let r=0,o=0;r<this.children.length&&o<=s;r++){let l=this.children[r],a=o+l.length;o>e&&r&&(n+=i),e<a&&s>o&&(n+=l.sliceString(e-o,s-o,i)),o=a+1}return n}flatten(e){for(let s of this.children)s.flatten(e)}scanIdentical(e,s){if(!(e instanceof di))return 0;let i=0,[n,r,o,l]=s>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;n+=s,r+=s){if(n==o||r==l)return i;let a=this.children[n],d=e.children[r];if(a!=d)return i+a.scanIdentical(d,s);i+=a.length+1}}static from(e,s=e.reduce((i,n)=>i+n.length+1,-1)){let i=0;for(let m of e)i+=m.lines;if(i<32){let m=[];for(let w of e)w.flatten(m);return new Mt(m,s)}let n=Math.max(32,i>>5),r=n<<1,o=n>>1,l=[],a=0,d=-1,u=[];function f(m){let w;if(m.lines>r&&m instanceof di)for(let S of m.children)f(S);else m.lines>o&&(a>o||!a)?(h(),l.push(m)):m instanceof Mt&&a&&(w=u[u.length-1])instanceof Mt&&m.lines+w.lines<=32?(a+=m.lines,d+=m.length+1,u[u.length-1]=new Mt(w.text.concat(m.text),w.length+1+m.length)):(a+m.lines>n&&h(),a+=m.lines,d+=m.length+1,u.push(m))}function h(){a!=0&&(l.push(u.length==1?u[0]:di.from(u,d)),d=-1,a=u.length=0)}for(let m of e)f(m);return h(),l.length==1?l[0]:new di(l,s)}}tt.empty=new Mt([""],0);function V4(t){let e=-1;for(let s of t)e+=s.length+1;return e}function Pl(t,e,s=0,i=1e9){for(let n=0,r=0,o=!0;r<t.length&&n<=i;r++){let l=t[r],a=n+l.length;a>=s&&(a>i&&(l=l.slice(0,i-n)),n<s&&(l=l.slice(s-n)),o?(e[e.length-1]+=l,o=!1):e.push(l)),n=a+1}return e}function Mh(t,e,s){return Pl(t,[""],e,s)}class to{constructor(e,s=1){this.dir=s,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[s>0?1:(e instanceof Mt?e.text.length:e.children.length)<<1]}nextInner(e,s){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,n=this.nodes[i],r=this.offsets[i],o=r>>1,l=n instanceof Mt?n.text.length:n.children.length;if(o==(s>0?l:0)){if(i==0)return this.done=!0,this.value="",this;s>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((r&1)==(s>0?0:1)){if(this.offsets[i]+=s,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(n instanceof Mt){let a=n.text[o+(s<0?-1:0)];if(this.offsets[i]+=s,a.length>Math.max(0,e))return this.value=e==0?a:s>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=n.children[o+(s<0?-1:0)];e>a.length?(e-=a.length,this.offsets[i]+=s):(s<0&&this.offsets[i]--,this.nodes.push(a),this.offsets.push(s>0?1:(a instanceof Mt?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class Jg{constructor(e,s,i){this.value="",this.done=!1,this.cursor=new to(e,s>i?-1:1),this.pos=s>i?e.length:0,this.from=Math.min(s,i),this.to=Math.max(s,i)}nextInner(e,s){if(s<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,s<0?this.pos-this.to:this.from-this.pos);let i=s<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:n}=this.cursor.next(e);return this.pos+=(n.length+e)*s,this.value=n.length<=i?n:s<0?n.slice(n.length-i):n.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class Yg{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:s,lineBreak:i,value:n}=this.inner.next(e);return s&&this.afterBreak?(this.value="",this.afterBreak=!1):s?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=n,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(tt.prototype[Symbol.iterator]=function(){return this.iter()},to.prototype[Symbol.iterator]=Jg.prototype[Symbol.iterator]=Yg.prototype[Symbol.iterator]=function(){return this});class M4{constructor(e,s,i,n){this.from=e,this.to=s,this.number=i,this.text=n}get length(){return this.to-this.from}}function mr(t,e,s){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,s))]}function qt(t,e,s=!0,i=!0){return _4(t,e,s,i)}function D4(t){return t>=56320&&t<57344}function T4(t){return t>=55296&&t<56320}function ms(t,e){let s=t.charCodeAt(e);if(!T4(s)||e+1==t.length)return s;let i=t.charCodeAt(e+1);return D4(i)?(s-55296<<10)+(i-56320)+65536:s}function Ac(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function ci(t){return t<65536?1:2}const dd=/\r\n?|\n/;var cs=(function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t})(cs||(cs={}));class yi{constructor(e){this.sections=e}get length(){let e=0;for(let s=0;s<this.sections.length;s+=2)e+=this.sections[s];return e}get newLength(){let e=0;for(let s=0;s<this.sections.length;s+=2){let i=this.sections[s+1];e+=i<0?this.sections[s]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let s=0,i=0,n=0;s<this.sections.length;){let r=this.sections[s++],o=this.sections[s++];o<0?(e(i,n,r),n+=r):n+=o,i+=r}}iterChangedRanges(e,s=!1){cd(this,e,s)}get invertedDesc(){let e=[];for(let s=0;s<this.sections.length;){let i=this.sections[s++],n=this.sections[s++];n<0?e.push(i,n):e.push(n,i)}return new yi(e)}composeDesc(e){return this.empty?e:e.empty?this:Xg(this,e)}mapDesc(e,s=!1){return e.empty?this:fd(this,e,s)}mapPos(e,s=-1,i=cs.Simple){let n=0,r=0;for(let o=0;o<this.sections.length;){let l=this.sections[o++],a=this.sections[o++],d=n+l;if(a<0){if(d>e)return r+(e-n);r+=l}else{if(i!=cs.Simple&&d>=e&&(i==cs.TrackDel&&n<e&&d>e||i==cs.TrackBefore&&n<e||i==cs.TrackAfter&&d>e))return null;if(d>e||d==e&&s<0&&!l)return e==n||s<0?r:r+a;r+=a}n=d}if(e>n)throw new RangeError(`Position ${e} is out of range for changeset of length ${n}`);return r}touchesRange(e,s=e){for(let i=0,n=0;i<this.sections.length&&n<=s;){let r=this.sections[i++],o=this.sections[i++],l=n+r;if(o>=0&&n<=s&&l>=e)return n<e&&l>s?"cover":!0;n=l}return!1}toString(){let e="";for(let s=0;s<this.sections.length;){let i=this.sections[s++],n=this.sections[s++];e+=(e?" ":"")+i+(n>=0?":"+n:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(s=>typeof s!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new yi(e)}static create(e){return new yi(e)}}class Rt extends yi{constructor(e,s){super(e),this.inserted=s}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return cd(this,(s,i,n,r,o)=>e=e.replace(n,n+(i-s),o),!1),e}mapDesc(e,s=!1){return fd(this,e,s,!0)}invert(e){let s=this.sections.slice(),i=[];for(let n=0,r=0;n<s.length;n+=2){let o=s[n],l=s[n+1];if(l>=0){s[n]=l,s[n+1]=o;let a=n>>1;for(;i.length<a;)i.push(tt.empty);i.push(o?e.slice(r,r+o):tt.empty)}r+=o}return new Rt(s,i)}compose(e){return this.empty?e:e.empty?this:Xg(this,e,!0)}map(e,s=!1){return e.empty?this:fd(this,e,s,!0)}iterChanges(e,s=!1){cd(this,e,s)}get desc(){return yi.create(this.sections)}filter(e){let s=[],i=[],n=[],r=new xo(this);e:for(let o=0,l=0;;){let a=o==e.length?1e9:e[o++];for(;l<a||l==a&&r.len==0;){if(r.done)break e;let u=Math.min(r.len,a-l);Kt(n,u,-1);let f=r.ins==-1?-1:r.off==0?r.ins:0;Kt(s,u,f),f>0&&Yi(i,s,r.text),r.forward(u),l+=u}let d=e[o++];for(;l<d;){if(r.done)break e;let u=Math.min(r.len,d-l);Kt(s,u,-1),Kt(n,u,r.ins==-1?-1:r.off==0?r.ins:0),r.forward(u),l+=u}}return{changes:new Rt(s,i),filtered:yi.create(n)}}toJSON(){let e=[];for(let s=0;s<this.sections.length;s+=2){let i=this.sections[s],n=this.sections[s+1];n<0?e.push(i):n==0?e.push([i]):e.push([i].concat(this.inserted[s>>1].toJSON()))}return e}static of(e,s,i){let n=[],r=[],o=0,l=null;function a(u=!1){if(!u&&!n.length)return;o<s&&Kt(n,s-o,-1);let f=new Rt(n,r);l=l?l.compose(f.map(l)):f,n=[],r=[],o=0}function d(u){if(Array.isArray(u))for(let f of u)d(f);else if(u instanceof Rt){if(u.length!=s)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${s})`);a(),l=l?l.compose(u.map(l)):u}else{let{from:f,to:h=f,insert:m}=u;if(f>h||f<0||h>s)throw new RangeError(`Invalid change range ${f} to ${h} (in doc of length ${s})`);let w=m?typeof m=="string"?tt.of(m.split(i||dd)):m:tt.empty,S=w.length;if(f==h&&S==0)return;f<o&&a(),f>o&&Kt(n,f-o,-1),Kt(n,h-f,S),Yi(r,n,w),o=h}}return d(e),a(!l),l}static empty(e){return new Rt(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let s=[],i=[];for(let n=0;n<e.length;n++){let r=e[n];if(typeof r=="number")s.push(r,-1);else{if(!Array.isArray(r)||typeof r[0]!="number"||r.some((o,l)=>l&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(r.length==1)s.push(r[0],0);else{for(;i.length<n;)i.push(tt.empty);i[n]=tt.of(r.slice(1)),s.push(r[0],i[n].length)}}}return new Rt(s,i)}static createSet(e,s){return new Rt(e,s)}}function Kt(t,e,s,i=!1){if(e==0&&s<=0)return;let n=t.length-2;n>=0&&s<=0&&s==t[n+1]?t[n]+=e:n>=0&&e==0&&t[n]==0?t[n+1]+=s:i?(t[n]+=e,t[n+1]+=s):t.push(e,s)}function Yi(t,e,s){if(s.length==0)return;let i=e.length-2>>1;if(i<t.length)t[t.length-1]=t[t.length-1].append(s);else{for(;t.length<i;)t.push(tt.empty);t.push(s)}}function cd(t,e,s){let i=t.inserted;for(let n=0,r=0,o=0;o<t.sections.length;){let l=t.sections[o++],a=t.sections[o++];if(a<0)n+=l,r+=l;else{let d=n,u=r,f=tt.empty;for(;d+=l,u+=a,a&&i&&(f=f.append(i[o-2>>1])),!(s||o==t.sections.length||t.sections[o+1]<0);)l=t.sections[o++],a=t.sections[o++];e(n,d,r,u,f),n=d,r=u}}}function fd(t,e,s,i=!1){let n=[],r=i?[]:null,o=new xo(t),l=new xo(e);for(let a=-1;;){if(o.done&&l.len||l.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&l.ins==-1){let d=Math.min(o.len,l.len);Kt(n,d,-1),o.forward(d),l.forward(d)}else if(l.ins>=0&&(o.ins<0||a==o.i||o.off==0&&(l.len<o.len||l.len==o.len&&!s))){let d=l.len;for(Kt(n,l.ins,-1);d;){let u=Math.min(o.len,d);o.ins>=0&&a<o.i&&o.len<=u&&(Kt(n,0,o.ins),r&&Yi(r,n,o.text),a=o.i),o.forward(u),d-=u}l.next()}else if(o.ins>=0){let d=0,u=o.len;for(;u;)if(l.ins==-1){let f=Math.min(u,l.len);d+=f,u-=f,l.forward(f)}else if(l.ins==0&&l.len<u)u-=l.len,l.next();else break;Kt(n,d,a<o.i?o.ins:0),r&&a<o.i&&Yi(r,n,o.text),a=o.i,o.forward(o.len-u)}else{if(o.done&&l.done)return r?Rt.createSet(n,r):yi.create(n);throw new Error("Mismatched change set lengths")}}}function Xg(t,e,s=!1){let i=[],n=s?[]:null,r=new xo(t),o=new xo(e);for(let l=!1;;){if(r.done&&o.done)return n?Rt.createSet(i,n):yi.create(i);if(r.ins==0)Kt(i,r.len,0,l),r.next();else if(o.len==0&&!o.done)Kt(i,0,o.ins,l),n&&Yi(n,i,o.text),o.next();else{if(r.done||o.done)throw new Error("Mismatched change set lengths");{let a=Math.min(r.len2,o.len),d=i.length;if(r.ins==-1){let u=o.ins==-1?-1:o.off?0:o.ins;Kt(i,a,u,l),n&&u&&Yi(n,i,o.text)}else o.ins==-1?(Kt(i,r.off?0:r.len,a,l),n&&Yi(n,i,r.textBit(a))):(Kt(i,r.off?0:r.len,o.off?0:o.ins,l),n&&!o.off&&Yi(n,i,o.text));l=(r.ins>a||o.ins>=0&&o.len>a)&&(l||i.length>d),r.forward2(a),o.forward(a)}}}}class xo{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,s=this.i-2>>1;return s>=e.length?tt.empty:e[s]}textBit(e){let{inserted:s}=this.set,i=this.i-2>>1;return i>=s.length&&!e?tt.empty:s[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Mn{constructor(e,s,i){this.from=e,this.to=s,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,s=-1){let i,n;return this.empty?i=n=e.mapPos(this.from,s):(i=e.mapPos(this.from,1),n=e.mapPos(this.to,-1)),i==this.from&&n==this.to?this:new Mn(i,n,this.flags)}extend(e,s=e){if(e<=this.anchor&&s>=this.anchor)return ne.range(e,s);let i=Math.abs(e-this.anchor)>Math.abs(s-this.anchor)?e:s;return ne.range(this.anchor,i)}eq(e,s=!1){return this.anchor==e.anchor&&this.head==e.head&&(!s||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return ne.range(e.anchor,e.head)}static create(e,s,i){return new Mn(e,s,i)}}class ne{constructor(e,s){this.ranges=e,this.mainIndex=s}map(e,s=-1){return e.empty?this:ne.create(this.ranges.map(i=>i.map(e,s)),this.mainIndex)}eq(e,s=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],s))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new ne([this.main],0)}addRange(e,s=!0){return ne.create([e].concat(this.ranges),s?0:this.mainIndex+1)}replaceRange(e,s=this.mainIndex){let i=this.ranges.slice();return i[s]=e,ne.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new ne(e.ranges.map(s=>Mn.fromJSON(s)),e.main)}static single(e,s=e){return new ne([ne.range(e,s)],0)}static create(e,s=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,n=0;n<e.length;n++){let r=e[n];if(r.empty?r.from<=i:r.from<i)return ne.normalized(e.slice(),s);i=r.to}return new ne(e,s)}static cursor(e,s=0,i,n){return Mn.create(e,e,(s==0?0:s<0?8:16)|(i==null?7:Math.min(6,i))|(n??16777215)<<6)}static range(e,s,i,n){let r=(i??16777215)<<6|(n==null?7:Math.min(6,n));return s<e?Mn.create(s,e,48|r):Mn.create(e,s,(s>e?8:0)|r)}static normalized(e,s=0){let i=e[s];e.sort((n,r)=>n.from-r.from),s=e.indexOf(i);for(let n=1;n<e.length;n++){let r=e[n],o=e[n-1];if(r.empty?r.from<=o.to:r.from<o.to){let l=o.from,a=Math.max(r.to,o.to);n<=s&&s--,e.splice(--n,2,r.anchor>r.head?ne.range(a,l):ne.range(l,a))}}return new ne(e,s)}}function Qg(t,e){for(let s of t.ranges)if(s.to>e)throw new RangeError("Selection points outside of document")}let Vc=0;class De{constructor(e,s,i,n,r){this.combine=e,this.compareInput=s,this.compare=i,this.isStatic=n,this.id=Vc++,this.default=e([]),this.extensions=typeof r=="function"?r(this):r}get reader(){return this}static define(e={}){return new De(e.combine||(s=>s),e.compareInput||((s,i)=>s===i),e.compare||(e.combine?(s,i)=>s===i:Mc),!!e.static,e.enables)}of(e){return new Ol([],this,0,e)}compute(e,s){if(this.isStatic)throw new Error("Can't compute a static facet");return new Ol(e,this,1,s)}computeN(e,s){if(this.isStatic)throw new Error("Can't compute a static facet");return new Ol(e,this,2,s)}from(e,s){return s||(s=i=>i),this.compute([e],i=>s(i.field(e)))}}function Mc(t,e){return t==e||t.length==e.length&&t.every((s,i)=>s===e[i])}class Ol{constructor(e,s,i,n){this.dependencies=e,this.facet=s,this.type=i,this.value=n,this.id=Vc++}dynamicSlot(e){var s;let i=this.value,n=this.facet.compareInput,r=this.id,o=e[r]>>1,l=this.type==2,a=!1,d=!1,u=[];for(let f of this.dependencies)f=="doc"?a=!0:f=="selection"?d=!0:(((s=e[f.id])!==null&&s!==void 0?s:1)&1)==0&&u.push(e[f.id]);return{create(f){return f.values[o]=i(f),1},update(f,h){if(a&&h.docChanged||d&&(h.docChanged||h.selection)||hd(f,u)){let m=i(f);if(l?!Dh(m,f.values[o],n):!n(m,f.values[o]))return f.values[o]=m,1}return 0},reconfigure:(f,h)=>{let m,w=h.config.address[r];if(w!=null){let S=ea(h,w);if(this.dependencies.every(_=>_ instanceof De?h.facet(_)===f.facet(_):_ instanceof Gt?h.field(_,!1)==f.field(_,!1):!0)||(l?Dh(m=i(f),S,n):n(m=i(f),S)))return f.values[o]=S,0}else m=i(f);return f.values[o]=m,1}}}}function Dh(t,e,s){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!s(t[i],e[i]))return!1;return!0}function hd(t,e){let s=!1;for(let i of e)so(t,i)&1&&(s=!0);return s}function E4(t,e,s){let i=s.map(a=>t[a.id]),n=s.map(a=>a.type),r=i.filter(a=>!(a&1)),o=t[e.id]>>1;function l(a){let d=[];for(let u=0;u<i.length;u++){let f=ea(a,i[u]);if(n[u]==2)for(let h of f)d.push(h);else d.push(f)}return e.combine(d)}return{create(a){for(let d of i)so(a,d);return a.values[o]=l(a),1},update(a,d){if(!hd(a,r))return 0;let u=l(a);return e.compare(u,a.values[o])?0:(a.values[o]=u,1)},reconfigure(a,d){let u=hd(a,i),f=d.config.facets[e.id],h=d.facet(e);if(f&&!u&&Mc(s,f))return a.values[o]=h,0;let m=l(a);return e.compare(m,h)?(a.values[o]=h,0):(a.values[o]=m,1)}}}const nl=De.define({static:!0});class Gt{constructor(e,s,i,n,r){this.id=e,this.createF=s,this.updateF=i,this.compareF=n,this.spec=r,this.provides=void 0}static define(e){let s=new Gt(Vc++,e.create,e.update,e.compare||((i,n)=>i===n),e);return e.provide&&(s.provides=e.provide(s)),s}create(e){let s=e.facet(nl).find(i=>i.field==this);return(s?.create||this.createF)(e)}slot(e){let s=e[this.id]>>1;return{create:i=>(i.values[s]=this.create(i),1),update:(i,n)=>{let r=i.values[s],o=this.updateF(r,n);return this.compareF(r,o)?0:(i.values[s]=o,1)},reconfigure:(i,n)=>{let r=i.facet(nl),o=n.facet(nl),l;return(l=r.find(a=>a.field==this))&&l!=o.find(a=>a.field==this)?(i.values[s]=l.create(i),1):n.config.address[this.id]!=null?(i.values[s]=n.field(this),0):(i.values[s]=this.create(i),1)}}}init(e){return[this,nl.of({field:this,create:e})]}get extension(){return this}}const Cn={lowest:4,low:3,default:2,high:1,highest:0};function Rr(t){return e=>new Zg(e,t)}const zn={highest:Rr(Cn.highest),high:Rr(Cn.high),default:Rr(Cn.default),low:Rr(Cn.low),lowest:Rr(Cn.lowest)};class Zg{constructor(e,s){this.inner=e,this.prec=s}}class Ra{of(e){return new pd(this,e)}reconfigure(e){return Ra.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class pd{constructor(e,s){this.compartment=e,this.inner=s}}class Zl{constructor(e,s,i,n,r,o){for(this.base=e,this.compartments=s,this.dynamicSlots=i,this.address=n,this.staticValues=r,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let s=this.address[e.id];return s==null?e.default:this.staticValues[s>>1]}static resolve(e,s,i){let n=[],r=Object.create(null),o=new Map;for(let h of $4(e,s,o))h instanceof Gt?n.push(h):(r[h.facet.id]||(r[h.facet.id]=[])).push(h);let l=Object.create(null),a=[],d=[];for(let h of n)l[h.id]=d.length<<1,d.push(m=>h.slot(m));let u=i?.config.facets;for(let h in r){let m=r[h],w=m[0].facet,S=u&&u[h]||[];if(m.every(_=>_.type==0))if(l[w.id]=a.length<<1|1,Mc(S,m))a.push(i.facet(w));else{let _=w.combine(m.map(M=>M.value));a.push(i&&w.compare(_,i.facet(w))?i.facet(w):_)}else{for(let _ of m)_.type==0?(l[_.id]=a.length<<1|1,a.push(_.value)):(l[_.id]=d.length<<1,d.push(M=>_.dynamicSlot(M)));l[w.id]=d.length<<1,d.push(_=>E4(_,w,m))}}let f=d.map(h=>h(l));return new Zl(e,o,f,l,a,r)}}function $4(t,e,s){let i=[[],[],[],[],[]],n=new Map;function r(o,l){let a=n.get(o);if(a!=null){if(a<=l)return;let d=i[a].indexOf(o);d>-1&&i[a].splice(d,1),o instanceof pd&&s.delete(o.compartment)}if(n.set(o,l),Array.isArray(o))for(let d of o)r(d,l);else if(o instanceof pd){if(s.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let d=e.get(o.compartment)||o.inner;s.set(o.compartment,d),r(d,l)}else if(o instanceof Zg)r(o.inner,o.prec);else if(o instanceof Gt)i[l].push(o),o.provides&&r(o.provides,l);else if(o instanceof Ol)i[l].push(o),o.facet.extensions&&r(o.facet.extensions,Cn.default);else{let d=o.extension;if(!d)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);r(d,l)}}return r(t,Cn.default),i.reduce((o,l)=>o.concat(l))}function so(t,e){if(e&1)return 2;let s=e>>1,i=t.status[s];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;t.status[s]=4;let n=t.computeSlot(t,t.config.dynamicSlots[s]);return t.status[s]=2|n}function ea(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const e0=De.define(),md=De.define({combine:t=>t.some(e=>e),static:!0}),t0=De.define({combine:t=>t.length?t[0]:void 0,static:!0}),s0=De.define(),i0=De.define(),n0=De.define(),r0=De.define({combine:t=>t.length?t[0]:!1});class Ii{constructor(e,s){this.type=e,this.value=s}static define(){return new P4}}class P4{of(e){return new Ii(this,e)}}class O4{constructor(e){this.map=e}of(e){return new We(this,e)}}class We{constructor(e,s){this.type=e,this.value=s}map(e){let s=this.type.map(this.value,e);return s===void 0?void 0:s==this.value?this:new We(this.type,s)}is(e){return this.type==e}static define(e={}){return new O4(e.map||(s=>s))}static mapEffects(e,s){if(!e.length)return e;let i=[];for(let n of e){let r=n.map(s);r&&i.push(r)}return i}}We.reconfigure=We.define();We.appendConfig=We.define();class jt{constructor(e,s,i,n,r,o){this.startState=e,this.changes=s,this.selection=i,this.effects=n,this.annotations=r,this.scrollIntoView=o,this._doc=null,this._state=null,i&&Qg(i,s.newLength),r.some(l=>l.type==jt.time)||(this.annotations=r.concat(jt.time.of(Date.now())))}static create(e,s,i,n,r,o){return new jt(e,s,i,n,r,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let s of this.annotations)if(s.type==e)return s.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let s=this.annotation(jt.userEvent);return!!(s&&(s==e||s.length>e.length&&s.slice(0,e.length)==e&&s[e.length]=="."))}}jt.time=Ii.define();jt.userEvent=Ii.define();jt.addToHistory=Ii.define();jt.remote=Ii.define();function R4(t,e){let s=[];for(let i=0,n=0;;){let r,o;if(i<t.length&&(n==e.length||e[n]>=t[i]))r=t[i++],o=t[i++];else if(n<e.length)r=e[n++],o=e[n++];else return s;!s.length||s[s.length-1]<r?s.push(r,o):s[s.length-1]<o&&(s[s.length-1]=o)}}function o0(t,e,s){var i;let n,r,o;return s?(n=e.changes,r=Rt.empty(e.changes.length),o=t.changes.compose(e.changes)):(n=e.changes.map(t.changes),r=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(n)),{changes:o,selection:e.selection?e.selection.map(r):(i=t.selection)===null||i===void 0?void 0:i.map(n),effects:We.mapEffects(t.effects,n).concat(We.mapEffects(e.effects,r)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function gd(t,e,s){let i=e.selection,n=lr(e.annotations);return e.userEvent&&(n=n.concat(jt.userEvent.of(e.userEvent))),{changes:e.changes instanceof Rt?e.changes:Rt.of(e.changes||[],s,t.facet(t0)),selection:i&&(i instanceof ne?i:ne.single(i.anchor,i.head)),effects:lr(e.effects),annotations:n,scrollIntoView:!!e.scrollIntoView}}function l0(t,e,s){let i=gd(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(s=!1);for(let r=1;r<e.length;r++){e[r].filter===!1&&(s=!1);let o=!!e[r].sequential;i=o0(i,gd(t,e[r],o?i.changes.newLength:t.doc.length),o)}let n=jt.create(t,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return L4(s?j4(n):n)}function j4(t){let e=t.startState,s=!0;for(let n of e.facet(s0)){let r=n(t);if(r===!1){s=!1;break}Array.isArray(r)&&(s=s===!0?r:R4(s,r))}if(s!==!0){let n,r;if(s===!1)r=t.changes.invertedDesc,n=Rt.empty(e.doc.length);else{let o=t.changes.filter(s);n=o.changes,r=o.filtered.mapDesc(o.changes).invertedDesc}t=jt.create(e,n,t.selection&&t.selection.map(r),We.mapEffects(t.effects,r),t.annotations,t.scrollIntoView)}let i=e.facet(i0);for(let n=i.length-1;n>=0;n--){let r=i[n](t);r instanceof jt?t=r:Array.isArray(r)&&r.length==1&&r[0]instanceof jt?t=r[0]:t=l0(e,lr(r),!1)}return t}function L4(t){let e=t.startState,s=e.facet(n0),i=t;for(let n=s.length-1;n>=0;n--){let r=s[n](t);r&&Object.keys(r).length&&(i=o0(i,gd(e,r,t.changes.newLength),!0))}return i==t?t:jt.create(e,t.changes,t.selection,i.effects,i.annotations,i.scrollIntoView)}const B4=[];function lr(t){return t==null?B4:Array.isArray(t)?t:[t]}var vt=(function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t})(vt||(vt={}));const I4=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let yd;try{yd=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function U4(t){if(yd)return yd.test(t);for(let e=0;e<t.length;e++){let s=t[e];if(/\w/.test(s)||s>""&&(s.toUpperCase()!=s.toLowerCase()||I4.test(s)))return!0}return!1}function N4(t){return e=>{if(!/\S/.test(e))return vt.Space;if(U4(e))return vt.Word;for(let s=0;s<t.length;s++)if(e.indexOf(t[s])>-1)return vt.Word;return vt.Other}}class Ze{constructor(e,s,i,n,r,o){this.config=e,this.doc=s,this.selection=i,this.values=n,this.status=e.statusTemplate.slice(),this.computeSlot=r,o&&(o._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)so(this,l<<1);this.computeSlot=null}field(e,s=!0){let i=this.config.address[e.id];if(i==null){if(s)throw new RangeError("Field is not present in this state");return}return so(this,i),ea(this,i)}update(...e){return l0(this,e,!0)}applyTransaction(e){let s=this.config,{base:i,compartments:n}=s;for(let l of e.effects)l.is(Ra.reconfigure)?(s&&(n=new Map,s.compartments.forEach((a,d)=>n.set(d,a)),s=null),n.set(l.value.compartment,l.value.extension)):l.is(We.reconfigure)?(s=null,i=l.value):l.is(We.appendConfig)&&(s=null,i=lr(i).concat(l.value));let r;s?r=e.startState.values.slice():(s=Zl.resolve(i,n,this),r=new Ze(s,this.doc,this.selection,s.dynamicSlots.map(()=>null),(a,d)=>d.reconfigure(a,this),null).values);let o=e.startState.facet(md)?e.newSelection:e.newSelection.asSingle();new Ze(s,e.newDoc,o,r,(l,a)=>a.update(l,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(s=>({changes:{from:s.from,to:s.to,insert:e},range:ne.cursor(s.from+e.length)}))}changeByRange(e){let s=this.selection,i=e(s.ranges[0]),n=this.changes(i.changes),r=[i.range],o=lr(i.effects);for(let l=1;l<s.ranges.length;l++){let a=e(s.ranges[l]),d=this.changes(a.changes),u=d.map(n);for(let h=0;h<l;h++)r[h]=r[h].map(u);let f=n.mapDesc(d,!0);r.push(a.range.map(f)),n=n.compose(u),o=We.mapEffects(o,u).concat(We.mapEffects(lr(a.effects),f))}return{changes:n,selection:ne.create(r,s.mainIndex),effects:o}}changes(e=[]){return e instanceof Rt?e:Rt.of(e,this.doc.length,this.facet(Ze.lineSeparator))}toText(e){return tt.of(e.split(this.facet(Ze.lineSeparator)||dd))}sliceDoc(e=0,s=this.doc.length){return this.doc.sliceString(e,s,this.lineBreak)}facet(e){let s=this.config.address[e.id];return s==null?e.default:(so(this,s),ea(this,s))}toJSON(e){let s={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let n=e[i];n instanceof Gt&&this.config.address[n.id]!=null&&(s[i]=n.spec.toJSON(this.field(e[i]),this))}return s}static fromJSON(e,s={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let n=[];if(i){for(let r in i)if(Object.prototype.hasOwnProperty.call(e,r)){let o=i[r],l=e[r];n.push(o.init(a=>o.spec.fromJSON(l,a)))}}return Ze.create({doc:e.doc,selection:ne.fromJSON(e.selection),extensions:s.extensions?n.concat([s.extensions]):n})}static create(e={}){let s=Zl.resolve(e.extensions||[],new Map),i=e.doc instanceof tt?e.doc:tt.of((e.doc||"").split(s.staticFacet(Ze.lineSeparator)||dd)),n=e.selection?e.selection instanceof ne?e.selection:ne.single(e.selection.anchor,e.selection.head):ne.single(0);return Qg(n,i.length),s.staticFacet(md)||(n=n.asSingle()),new Ze(s,i,n,s.dynamicSlots.map(()=>null),(r,o)=>o.create(r),null)}get tabSize(){return this.facet(Ze.tabSize)}get lineBreak(){return this.facet(Ze.lineSeparator)||`
`}get readOnly(){return this.facet(r0)}phrase(e,...s){for(let i of this.facet(Ze.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return s.length&&(e=e.replace(/\$(\$|\d*)/g,(i,n)=>{if(n=="$")return"$";let r=+(n||1);return!r||r>s.length?i:s[r-1]})),e}languageDataAt(e,s,i=-1){let n=[];for(let r of this.facet(e0))for(let o of r(this,s,i))Object.prototype.hasOwnProperty.call(o,e)&&n.push(o[e]);return n}charCategorizer(e){return N4(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:s,from:i,length:n}=this.doc.lineAt(e),r=this.charCategorizer(e),o=e-i,l=e-i;for(;o>0;){let a=qt(s,o,!1);if(r(s.slice(a,o))!=vt.Word)break;o=a}for(;l<n;){let a=qt(s,l);if(r(s.slice(l,a))!=vt.Word)break;l=a}return o==l?null:ne.range(o+i,l+i)}}Ze.allowMultipleSelections=md;Ze.tabSize=De.define({combine:t=>t.length?t[0]:4});Ze.lineSeparator=t0;Ze.readOnly=r0;Ze.phrases=De.define({compare(t,e){let s=Object.keys(t),i=Object.keys(e);return s.length==i.length&&s.every(n=>t[n]==e[n])}});Ze.languageData=e0;Ze.changeFilter=s0;Ze.transactionFilter=i0;Ze.transactionExtender=n0;Ra.reconfigure=We.define();function bi(t,e,s={}){let i={};for(let n of t)for(let r of Object.keys(n)){let o=n[r],l=i[r];if(l===void 0)i[r]=o;else if(!(l===o||o===void 0))if(Object.hasOwnProperty.call(s,r))i[r]=s[r](l,o);else throw new Error("Config merge conflict for field "+r)}for(let n in e)i[n]===void 0&&(i[n]=e[n]);return i}class Rn{eq(e){return this==e}range(e,s=e){return vd.create(e,s,this)}}Rn.prototype.startSide=Rn.prototype.endSide=0;Rn.prototype.point=!1;Rn.prototype.mapMode=cs.TrackDel;let vd=class a0{constructor(e,s,i){this.from=e,this.to=s,this.value=i}static create(e,s,i){return new a0(e,s,i)}};function bd(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class Dc{constructor(e,s,i,n){this.from=e,this.to=s,this.value=i,this.maxPoint=n}get length(){return this.to[this.to.length-1]}findIndex(e,s,i,n=0){let r=i?this.to:this.from;for(let o=n,l=r.length;;){if(o==l)return o;let a=o+l>>1,d=r[a]-e||(i?this.value[a].endSide:this.value[a].startSide)-s;if(a==o)return d>=0?o:l;d>=0?l=a:o=a+1}}between(e,s,i,n){for(let r=this.findIndex(s,-1e9,!0),o=this.findIndex(i,1e9,!1,r);r<o;r++)if(n(this.from[r]+e,this.to[r]+e,this.value[r])===!1)return!1}map(e,s){let i=[],n=[],r=[],o=-1,l=-1;for(let a=0;a<this.value.length;a++){let d=this.value[a],u=this.from[a]+e,f=this.to[a]+e,h,m;if(u==f){let w=s.mapPos(u,d.startSide,d.mapMode);if(w==null||(h=m=w,d.startSide!=d.endSide&&(m=s.mapPos(u,d.endSide),m<h)))continue}else if(h=s.mapPos(u,d.startSide),m=s.mapPos(f,d.endSide),h>m||h==m&&d.startSide>0&&d.endSide<=0)continue;(m-h||d.endSide-d.startSide)<0||(o<0&&(o=h),d.point&&(l=Math.max(l,m-h)),i.push(d),n.push(h-o),r.push(m-o))}return{mapped:i.length?new Dc(n,r,i,l):null,pos:o}}}class et{constructor(e,s,i,n){this.chunkPos=e,this.chunk=s,this.nextLayer=i,this.maxPoint=n}static create(e,s,i,n){return new et(e,s,i,n)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let s of this.chunk)e+=s.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:s=[],sort:i=!1,filterFrom:n=0,filterTo:r=this.length}=e,o=e.filter;if(s.length==0&&!o)return this;if(i&&(s=s.slice().sort(bd)),this.isEmpty)return s.length?et.of(s):this;let l=new u0(this,null,-1).goto(0),a=0,d=[],u=new Ri;for(;l.value||a<s.length;)if(a<s.length&&(l.from-s[a].from||l.startSide-s[a].value.startSide)>=0){let f=s[a++];u.addInner(f.from,f.to,f.value)||d.push(f)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(a==s.length||this.chunkEnd(l.chunkIndex)<s[a].from)&&(!o||n>this.chunkEnd(l.chunkIndex)||r<this.chunkPos[l.chunkIndex])&&u.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!o||n>l.to||r<l.from||o(l.from,l.to,l.value))&&(u.addInner(l.from,l.to,l.value)||d.push(vd.create(l.from,l.to,l.value))),l.next());return u.finishInner(this.nextLayer.isEmpty&&!d.length?et.empty:this.nextLayer.update({add:d,filter:o,filterFrom:n,filterTo:r}))}map(e){if(e.empty||this.isEmpty)return this;let s=[],i=[],n=-1;for(let o=0;o<this.chunk.length;o++){let l=this.chunkPos[o],a=this.chunk[o],d=e.touchesRange(l,l+a.length);if(d===!1)n=Math.max(n,a.maxPoint),s.push(a),i.push(e.mapPos(l));else if(d===!0){let{mapped:u,pos:f}=a.map(l,e);u&&(n=Math.max(n,u.maxPoint),s.push(u),i.push(f))}}let r=this.nextLayer.map(e);return s.length==0?r:new et(i,s,r||et.empty,n)}between(e,s,i){if(!this.isEmpty){for(let n=0;n<this.chunk.length;n++){let r=this.chunkPos[n],o=this.chunk[n];if(s>=r&&e<=r+o.length&&o.between(r,e-r,s-r,i)===!1)return}this.nextLayer.between(e,s,i)}}iter(e=0){return ko.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,s=0){return ko.from(e).goto(s)}static compare(e,s,i,n,r=-1){let o=e.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=r),l=s.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=r),a=Th(o,l,i),d=new jr(o,a,r),u=new jr(l,a,r);i.iterGaps((f,h,m)=>Eh(d,f,u,h,m,n)),i.empty&&i.length==0&&Eh(d,0,u,0,0,n)}static eq(e,s,i=0,n){n==null&&(n=999999999);let r=e.filter(u=>!u.isEmpty&&s.indexOf(u)<0),o=s.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(r.length!=o.length)return!1;if(!r.length)return!0;let l=Th(r,o),a=new jr(r,l,0).goto(i),d=new jr(o,l,0).goto(i);for(;;){if(a.to!=d.to||!xd(a.active,d.active)||a.point&&(!d.point||!a.point.eq(d.point)))return!1;if(a.to>n)return!0;a.next(),d.next()}}static spans(e,s,i,n,r=-1){let o=new jr(e,null,r).goto(s),l=s,a=o.openStart;for(;;){let d=Math.min(o.to,i);if(o.point){let u=o.activeForPoint(o.to),f=o.pointFrom<s?u.length+1:o.point.startSide<0?u.length:Math.min(u.length,a);n.point(l,d,o.point,u,f,o.pointRank),a=Math.min(o.openEnd(d),u.length)}else d>l&&(n.span(l,d,o.active,a),a=o.openEnd(d));if(o.to>i)return a+(o.point&&o.to>i?1:0);l=o.to,o.next()}}static of(e,s=!1){let i=new Ri;for(let n of e instanceof vd?[e]:s?z4(e):e)i.add(n.from,n.to,n.value);return i.finish()}static join(e){if(!e.length)return et.empty;let s=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let n=e[i];n!=et.empty;n=n.nextLayer)s=new et(n.chunkPos,n.chunk,s,Math.max(n.maxPoint,s.maxPoint));return s}}et.empty=new et([],[],null,-1);function z4(t){if(t.length>1)for(let e=t[0],s=1;s<t.length;s++){let i=t[s];if(bd(e,i)>0)return t.slice().sort(bd);e=i}return t}et.empty.nextLayer=et.empty;class Ri{finishChunk(e){this.chunks.push(new Dc(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,s,i){this.addInner(e,s,i)||(this.nextLayer||(this.nextLayer=new Ri)).add(e,s,i)}addInner(e,s,i){let n=e-this.lastTo||i.startSide-this.last.endSide;if(n<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return n<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(s-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=s,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,s-e)),!0)}addChunk(e,s){if((e-this.lastTo||s.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,s.maxPoint),this.chunks.push(s),this.chunkPos.push(e);let i=s.value.length-1;return this.last=s.value[i],this.lastFrom=s.from[i]+e,this.lastTo=s.to[i]+e,!0}finish(){return this.finishInner(et.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let s=et.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,s}}function Th(t,e,s){let i=new Map;for(let r of t)for(let o=0;o<r.chunk.length;o++)r.chunk[o].maxPoint<=0&&i.set(r.chunk[o],r.chunkPos[o]);let n=new Set;for(let r of e)for(let o=0;o<r.chunk.length;o++){let l=i.get(r.chunk[o]);l!=null&&(s?s.mapPos(l):l)==r.chunkPos[o]&&!s?.touchesRange(l,l+r.chunk[o].length)&&n.add(r.chunk[o])}return n}class u0{constructor(e,s,i,n=0){this.layer=e,this.skip=s,this.minPoint=i,this.rank=n}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,s=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,s,!1),this}gotoInner(e,s,i){for(;this.chunkIndex<this.layer.chunk.length;){let n=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(n)||this.layer.chunkEnd(this.chunkIndex)<e||n.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let n=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],s,!0);(!i||this.rangeIndex<n)&&this.setRangeIndex(n)}this.next()}forward(e,s){(this.to-e||this.endSide-s)<0&&this.gotoInner(e,s,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],s=this.layer.chunk[this.chunkIndex],i=e+s.from[this.rangeIndex];if(this.from=i,this.to=e+s.to[this.rangeIndex],this.value=s.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class ko{constructor(e){this.heap=e}static from(e,s=null,i=-1){let n=[];for(let r=0;r<e.length;r++)for(let o=e[r];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&n.push(new u0(o,s,i,r));return n.length==1?n[0]:new ko(n)}get startSide(){return this.value?this.value.startSide:0}goto(e,s=-1e9){for(let i of this.heap)i.goto(e,s);for(let i=this.heap.length>>1;i>=0;i--)vu(this.heap,i);return this.next(),this}forward(e,s){for(let i of this.heap)i.forward(e,s);for(let i=this.heap.length>>1;i>=0;i--)vu(this.heap,i);(this.to-e||this.value.endSide-s)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),vu(this.heap,0)}}}function vu(t,e){for(let s=t[e];;){let i=(e<<1)+1;if(i>=t.length)break;let n=t[i];if(i+1<t.length&&n.compare(t[i+1])>=0&&(n=t[i+1],i++),s.compare(n)<0)break;t[i]=s,t[e]=n,e=i}}class jr{constructor(e,s,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=ko.from(e,s,i)}goto(e,s=-1e9){return this.cursor.goto(e,s),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=s,this.openStart=-1,this.next(),this}forward(e,s){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-s)<0;)this.removeActive(this.minActive);this.cursor.forward(e,s)}removeActive(e){rl(this.active,e),rl(this.activeTo,e),rl(this.activeRank,e),this.minActive=$h(this.active,this.activeTo)}addActive(e){let s=0,{value:i,to:n,rank:r}=this.cursor;for(;s<this.activeRank.length&&(r-this.activeRank[s]||n-this.activeTo[s])>0;)s++;ol(this.active,s,i),ol(this.activeTo,s,n),ol(this.activeRank,s,r),e&&ol(e,s,this.cursor.from),this.minActive=$h(this.active,this.activeTo)}next(){let e=this.to,s=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let n=this.minActive;if(n>-1&&(this.activeTo[n]-this.cursor.from||this.active[n].endSide-this.cursor.startSide)<0){if(this.activeTo[n]>e){this.to=this.activeTo[n],this.endSide=this.active[n].endSide;break}this.removeActive(n),i&&rl(i,n)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let r=this.cursor.value;if(!r.point)this.addActive(i),this.cursor.next();else if(s&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=r,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=r.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let n=i.length-1;n>=0&&i[n]<e;n--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let s=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&s.push(this.active[i]);return s.reverse()}openEnd(e){let s=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)s++;return s}}function Eh(t,e,s,i,n,r){t.goto(e),s.goto(i);let o=i+n,l=i,a=i-e;for(;;){let d=t.to+a-s.to,u=d||t.endSide-s.endSide,f=u<0?t.to+a:s.to,h=Math.min(f,o);if(t.point||s.point?t.point&&s.point&&(t.point==s.point||t.point.eq(s.point))&&xd(t.activeForPoint(t.to),s.activeForPoint(s.to))||r.comparePoint(l,h,t.point,s.point):h>l&&!xd(t.active,s.active)&&r.compareRange(l,h,t.active,s.active),f>o)break;(d||t.openEnd!=s.openEnd)&&r.boundChange&&r.boundChange(f),l=f,u<=0&&t.next(),u>=0&&s.next()}}function xd(t,e){if(t.length!=e.length)return!1;for(let s=0;s<t.length;s++)if(t[s]!=e[s]&&!t[s].eq(e[s]))return!1;return!0}function rl(t,e){for(let s=e,i=t.length-1;s<i;s++)t[s]=t[s+1];t.pop()}function ol(t,e,s){for(let i=t.length-1;i>=e;i--)t[i+1]=t[i];t[e]=s}function $h(t,e){let s=-1,i=1e9;for(let n=0;n<e.length;n++)(e[n]-i||t[n].endSide-t[s].endSide)<0&&(s=n,i=e[n]);return s}function Vr(t,e,s=t.length){let i=0;for(let n=0;n<s&&n<t.length;)t.charCodeAt(n)==9?(i+=e-i%e,n++):(i++,n=qt(t,n));return i}function kd(t,e,s,i){for(let n=0,r=0;;){if(r>=e)return n;if(n==t.length)break;r+=t.charCodeAt(n)==9?s-r%s:1,n=qt(t,n)}return i===!0?-1:t.length}const wd="",Ph=typeof Symbol>"u"?"__"+wd:Symbol.for(wd),Sd=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Oh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class on{constructor(e,s){this.rules=[];let{finish:i}=s||{};function n(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function r(o,l,a,d){let u=[],f=/^@(\w+)\b/.exec(o[0]),h=f&&f[1]=="keyframes";if(f&&l==null)return a.push(o[0]+";");for(let m in l){let w=l[m];if(/&/.test(m))r(m.split(/,\s*/).map(S=>o.map(_=>S.replace(/&/,_))).reduce((S,_)=>S.concat(_)),w,a);else if(w&&typeof w=="object"){if(!f)throw new RangeError("The value of a property ("+m+") should be a primitive value.");r(n(m),w,u,h)}else w!=null&&u.push(m.replace(/_.*/,"").replace(/[A-Z]/g,S=>"-"+S.toLowerCase())+": "+w+";")}(u.length||h)&&a.push((i&&!f&&!d?o.map(i):o).join(", ")+" {"+u.join(" ")+"}")}for(let o in e)r(n(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=Oh[Ph]||1;return Oh[Ph]=e+1,wd+e.toString(36)}static mount(e,s,i){let n=e[Sd],r=i&&i.nonce;n?r&&n.setNonce(r):n=new F4(e,r),n.mount(Array.isArray(s)?s:[s],e)}}let Rh=new Map;class F4{constructor(e,s){let i=e.ownerDocument||e,n=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&n.CSSStyleSheet){let r=Rh.get(i);if(r)return e[Sd]=r;this.sheet=new n.CSSStyleSheet,Rh.set(i,this)}else this.styleTag=i.createElement("style"),s&&this.styleTag.setAttribute("nonce",s);this.modules=[],e[Sd]=this}mount(e,s){let i=this.sheet,n=0,r=0;for(let o=0;o<e.length;o++){let l=e[o],a=this.modules.indexOf(l);if(a<r&&a>-1&&(this.modules.splice(a,1),r--,a=-1),a==-1){if(this.modules.splice(r++,0,l),i)for(let d=0;d<l.rules.length;d++)i.insertRule(l.rules[d],n++)}else{for(;r<a;)n+=this.modules[r++].rules.length;n+=l.rules.length,r++}}if(i)s.adoptedStyleSheets.indexOf(this.sheet)<0&&(s.adoptedStyleSheets=[this.sheet,...s.adoptedStyleSheets]);else{let o="";for(let a=0;a<this.modules.length;a++)o+=this.modules[a].getRules()+`
`;this.styleTag.textContent=o;let l=s.head||s;this.styleTag.parentNode!=l&&l.insertBefore(this.styleTag,l.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var ln={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},wo={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},H4=typeof navigator<"u"&&/Mac/.test(navigator.platform),W4=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Ft=0;Ft<10;Ft++)ln[48+Ft]=ln[96+Ft]=String(Ft);for(var Ft=1;Ft<=24;Ft++)ln[Ft+111]="F"+Ft;for(var Ft=65;Ft<=90;Ft++)ln[Ft]=String.fromCharCode(Ft+32),wo[Ft]=String.fromCharCode(Ft);for(var bu in ln)wo.hasOwnProperty(bu)||(wo[bu]=ln[bu]);function q4(t){var e=H4&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||W4&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",s=!e&&t.key||(t.shiftKey?wo:ln)[t.keyCode]||t.key||"Unidentified";return s=="Esc"&&(s="Escape"),s=="Del"&&(s="Delete"),s=="Left"&&(s="ArrowLeft"),s=="Up"&&(s="ArrowUp"),s=="Right"&&(s="ArrowRight"),s=="Down"&&(s="ArrowDown"),s}function dt(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,s=arguments[1];if(s&&typeof s=="object"&&s.nodeType==null&&!Array.isArray(s)){for(var i in s)if(Object.prototype.hasOwnProperty.call(s,i)){var n=s[i];typeof n=="string"?t.setAttribute(i,n):n!=null&&(t[i]=n)}e++}for(;e<arguments.length;e++)d0(t,arguments[e]);return t}function d0(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var s=0;s<e.length;s++)d0(t,e[s]);else throw new RangeError("Unsupported child node: "+e)}let us=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Cd=typeof document<"u"?document:{documentElement:{style:{}}};const _d=/Edge\/(\d+)/.exec(us.userAgent),c0=/MSIE \d/.test(us.userAgent),Ad=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(us.userAgent),ja=!!(c0||Ad||_d),jh=!ja&&/gecko\/(\d+)/i.test(us.userAgent),xu=!ja&&/Chrome\/(\d+)/.exec(us.userAgent),G4="webkitFontSmoothing"in Cd.documentElement.style,Vd=!ja&&/Apple Computer/.test(us.vendor),Lh=Vd&&(/Mobile\/\w+/.test(us.userAgent)||us.maxTouchPoints>2);var _e={mac:Lh||/Mac/.test(us.platform),windows:/Win/.test(us.platform),linux:/Linux|X11/.test(us.platform),ie:ja,ie_version:c0?Cd.documentMode||6:Ad?+Ad[1]:_d?+_d[1]:0,gecko:jh,gecko_version:jh?+(/Firefox\/(\d+)/.exec(us.userAgent)||[0,0])[1]:0,chrome:!!xu,chrome_version:xu?+xu[1]:0,ios:Lh,android:/Android\b/.test(us.userAgent),webkit_version:G4?+(/\bAppleWebKit\/(\d+)/.exec(us.userAgent)||[0,0])[1]:0,safari:Vd,safari_version:Vd?+(/\bVersion\/(\d+(\.\d+)?)/.exec(us.userAgent)||[0,0])[1]:0,tabSize:Cd.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function So(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function Md(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function Rl(t,e){if(!e.anchorNode)return!1;try{return Md(t,e.anchorNode)}catch{return!1}}function Co(t){return t.nodeType==3?Ln(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function io(t,e,s,i){return s?Bh(t,e,s,i,-1)||Bh(t,e,s,i,1):!1}function jn(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function ta(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function Bh(t,e,s,i,n){for(;;){if(t==s&&e==i)return!0;if(e==(n<0?0:vi(t))){if(t.nodeName=="DIV")return!1;let r=t.parentNode;if(!r||r.nodeType!=1)return!1;e=jn(t)+(n<0?0:1),t=r}else if(t.nodeType==1){if(t=t.childNodes[e+(n<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=n<0?vi(t):0}else return!1}}function vi(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function La(t,e){let s=e?t.left:t.right;return{left:s,right:s,top:t.top,bottom:t.bottom}}function K4(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function f0(t,e){let s=e.width/t.offsetWidth,i=e.height/t.offsetHeight;return(s>.995&&s<1.005||!isFinite(s)||Math.abs(e.width-t.offsetWidth)<1)&&(s=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-t.offsetHeight)<1)&&(i=1),{scaleX:s,scaleY:i}}function J4(t,e,s,i,n,r,o,l){let a=t.ownerDocument,d=a.defaultView||window;for(let u=t,f=!1;u&&!f;)if(u.nodeType==1){let h,m=u==a.body,w=1,S=1;if(m)h=K4(d);else{if(/^(fixed|sticky)$/.test(getComputedStyle(u).position)&&(f=!0),u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let L=u.getBoundingClientRect();({scaleX:w,scaleY:S}=f0(u,L)),h={left:L.left,right:L.left+u.clientWidth*w,top:L.top,bottom:L.top+u.clientHeight*S}}let _=0,M=0;if(n=="nearest")e.top<h.top?(M=e.top-(h.top+o),s>0&&e.bottom>h.bottom+M&&(M=e.bottom-h.bottom+o)):e.bottom>h.bottom&&(M=e.bottom-h.bottom+o,s<0&&e.top-M<h.top&&(M=e.top-(h.top+o)));else{let L=e.bottom-e.top,$=h.bottom-h.top;M=(n=="center"&&L<=$?e.top+L/2-$/2:n=="start"||n=="center"&&s<0?e.top-o:e.bottom-$+o)-h.top}if(i=="nearest"?e.left<h.left?(_=e.left-(h.left+r),s>0&&e.right>h.right+_&&(_=e.right-h.right+r)):e.right>h.right&&(_=e.right-h.right+r,s<0&&e.left<h.left+_&&(_=e.left-(h.left+r))):_=(i=="center"?e.left+(e.right-e.left)/2-(h.right-h.left)/2:i=="start"==l?e.left-r:e.right-(h.right-h.left)+r)-h.left,_||M)if(m)d.scrollBy(_,M);else{let L=0,$=0;if(M){let T=u.scrollTop;u.scrollTop+=M/S,$=(u.scrollTop-T)*S}if(_){let T=u.scrollLeft;u.scrollLeft+=_/w,L=(u.scrollLeft-T)*w}e={left:e.left-L,top:e.top-$,right:e.right-L,bottom:e.bottom-$},L&&Math.abs(L-_)<1&&(i="nearest"),$&&Math.abs($-M)<1&&(n="nearest")}if(m)break;(e.top<h.top||e.bottom>h.bottom||e.left<h.left||e.right>h.right)&&(e={left:Math.max(e.left,h.left),right:Math.min(e.right,h.right),top:Math.max(e.top,h.top),bottom:Math.min(e.bottom,h.bottom)}),u=u.assignedSlot||u.parentNode}else if(u.nodeType==11)u=u.host;else break}function Y4(t){let e=t.ownerDocument,s,i;for(let n=t.parentNode;n&&!(n==e.body||s&&i);)if(n.nodeType==1)!i&&n.scrollHeight>n.clientHeight&&(i=n),!s&&n.scrollWidth>n.clientWidth&&(s=n),n=n.assignedSlot||n.parentNode;else if(n.nodeType==11)n=n.host;else break;return{x:s,y:i}}class X4{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:s,focusNode:i}=e;this.set(s,Math.min(e.anchorOffset,s?vi(s):0),i,Math.min(e.focusOffset,i?vi(i):0))}set(e,s,i,n){this.anchorNode=e,this.anchorOffset=s,this.focusNode=i,this.focusOffset=n}}let wn=null;_e.safari&&_e.safari_version>=26&&(wn=!1);function h0(t){if(t.setActive)return t.setActive();if(wn)return t.focus(wn);let e=[];for(let s=t;s&&(e.push(s,s.scrollTop,s.scrollLeft),s!=s.ownerDocument);s=s.parentNode);if(t.focus(wn==null?{get preventScroll(){return wn={preventScroll:!0},!0}}:void 0),!wn){wn=!1;for(let s=0;s<e.length;){let i=e[s++],n=e[s++],r=e[s++];i.scrollTop!=n&&(i.scrollTop=n),i.scrollLeft!=r&&(i.scrollLeft=r)}}}let Ih;function Ln(t,e,s=e){let i=Ih||(Ih=document.createRange());return i.setEnd(t,s),i.setStart(t,e),i}function ar(t,e,s,i){let n={key:e,code:e,keyCode:s,which:s,cancelable:!0};i&&({altKey:n.altKey,ctrlKey:n.ctrlKey,shiftKey:n.shiftKey,metaKey:n.metaKey}=i);let r=new KeyboardEvent("keydown",n);r.synthetic=!0,t.dispatchEvent(r);let o=new KeyboardEvent("keyup",n);return o.synthetic=!0,t.dispatchEvent(o),r.defaultPrevented||o.defaultPrevented}function Q4(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function p0(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function Z4(t,e){let s=e.focusNode,i=e.focusOffset;if(!s||e.anchorNode!=s||e.anchorOffset!=i)return!1;for(i=Math.min(i,vi(s));;)if(i){if(s.nodeType!=1)return!1;let n=s.childNodes[i-1];n.contentEditable=="false"?i--:(s=n,i=vi(s))}else{if(s==t)return!0;i=jn(s),s=s.parentNode}}function m0(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function g0(t,e){for(let s=t,i=e;;){if(s.nodeType==3&&i>0)return{node:s,offset:i};if(s.nodeType==1&&i>0){if(s.contentEditable=="false")return null;s=s.childNodes[i-1],i=vi(s)}else if(s.parentNode&&!ta(s))i=jn(s),s=s.parentNode;else return null}}function y0(t,e){for(let s=t,i=e;;){if(s.nodeType==3&&i<s.nodeValue.length)return{node:s,offset:i};if(s.nodeType==1&&i<s.childNodes.length){if(s.contentEditable=="false")return null;s=s.childNodes[i],i=0}else if(s.parentNode&&!ta(s))i=jn(s)+1,s=s.parentNode;else return null}}class Qt{constructor(e,s,i=!0){this.node=e,this.offset=s,this.precise=i}static before(e,s){return new Qt(e.parentNode,jn(e),s)}static after(e,s){return new Qt(e.parentNode,jn(e)+1,s)}}const Tc=[];class at{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let s=this.posAtStart;for(let i of this.children){if(i==e)return s;s+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,s){if(this.flags&2){let i=this.dom,n=null,r;for(let o of this.children){if(o.flags&7){if(!o.dom&&(r=n?n.nextSibling:i.firstChild)){let l=at.get(r);(!l||!l.parent&&l.canReuseDOM(o))&&o.reuseDOM(r)}o.sync(e,s),o.flags&=-8}if(r=n?n.nextSibling:i.firstChild,s&&!s.written&&s.node==i&&r!=o.dom&&(s.written=!0),o.dom.parentNode==i)for(;r&&r!=o.dom;)r=Uh(r);else i.insertBefore(o.dom,r);n=o.dom}for(r=n?n.nextSibling:i.firstChild,r&&s&&s.node==i&&(s.written=!0);r;)r=Uh(r)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,s),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,s){let i;if(e==this.dom)i=this.dom.childNodes[s];else{let n=vi(e)==0?0:s==0?-1:1;for(;;){let r=e.parentNode;if(r==this.dom)break;n==0&&r.firstChild!=r.lastChild&&(e==r.firstChild?n=-1:n=1),e=r}n<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!at.get(i);)i=i.nextSibling;if(!i)return this.length;for(let n=0,r=0;;n++){let o=this.children[n];if(o.dom==i)return r;r+=o.length+o.breakAfter}}domBoundsAround(e,s,i=0){let n=-1,r=-1,o=-1,l=-1;for(let a=0,d=i,u=i;a<this.children.length;a++){let f=this.children[a],h=d+f.length;if(d<e&&h>s)return f.domBoundsAround(e,s,d);if(h>=e&&n==-1&&(n=a,r=d),d>s&&f.dom.parentNode==this.dom){o=a,l=u;break}u=h,d=h+f.breakAfter}return{from:r,to:l<0?i+this.length:l,startDOM:(n?this.children[n-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let s=this.parent;s;s=s.parent){if(e&&(s.flags|=2),s.flags&1)return;s.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let s=e.parent;if(!s)return e;e=s}}replaceChildren(e,s,i=Tc){this.markDirty();for(let n=e;n<s;n++){let r=this.children[n];r.parent==this&&i.indexOf(r)<0&&r.destroy()}i.length<250?this.children.splice(e,s-e,...i):this.children=[].concat(this.children.slice(0,e),i,this.children.slice(s));for(let n=0;n<i.length;n++)i[n].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new v0(this.children,e,this.children.length)}childPos(e,s=1){return this.childCursor().findPos(e,s)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,s,i,n,r,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}at.prototype.breakAfter=0;function Uh(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class v0{constructor(e,s,i){this.children=e,this.pos=s,this.i=i,this.off=0}findPos(e,s=1){for(;;){if(e>this.pos||e==this.pos&&(s>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function b0(t,e,s,i,n,r,o,l,a){let{children:d}=t,u=d.length?d[e]:null,f=r.length?r[r.length-1]:null,h=f?f.breakAfter:o;if(!(e==i&&u&&!o&&!h&&r.length<2&&u.merge(s,n,r.length?f:null,s==0,l,a))){if(i<d.length){let m=d[i];m&&(n<m.length||m.breakAfter&&f?.breakAfter)?(e==i&&(m=m.split(n),n=0),!h&&f&&m.merge(0,n,f,!0,0,a)?r[r.length-1]=m:((n||m.children.length&&!m.children[0].length)&&m.merge(0,n,null,!1,0,a),r.push(m))):m?.breakAfter&&(f?f.breakAfter=1:o=1),i++}for(u&&(u.breakAfter=o,s>0&&(!o&&r.length&&u.merge(s,u.length,r[0],!1,l,0)?u.breakAfter=r.shift().breakAfter:(s<u.length||u.children.length&&u.children[u.children.length-1].length==0)&&u.merge(s,u.length,null,!1,l,0),e++));e<i&&r.length;)if(d[i-1].become(r[r.length-1]))i--,r.pop(),a=r.length?0:l;else if(d[e].become(r[0]))e++,r.shift(),l=r.length?0:a;else break;!r.length&&e&&i<d.length&&!d[e-1].breakAfter&&d[i].merge(0,0,d[e-1],!1,l,a)&&e--,(e<i||r.length)&&t.replaceChildren(e,i,r)}}function x0(t,e,s,i,n,r){let o=t.childCursor(),{i:l,off:a}=o.findPos(s,1),{i:d,off:u}=o.findPos(e,-1),f=e-s;for(let h of i)f+=h.length;t.length+=f,b0(t,d,u,l,a,i,0,n,r)}const eC=256;class Ys extends at{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,s){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(s&&s.node==this.dom&&(s.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,s,i){return this.flags&8||i&&(!(i instanceof Ys)||this.length-(s-e)+i.length>eC||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(s),this.markDirty(),!0)}split(e){let s=new Ys(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),s.flags|=this.flags&8,s}localPosFromDOM(e,s){return e==this.dom?s:s?this.text.length:0}domAtPos(e){return new Qt(this.dom,e)}domBoundsAround(e,s,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,s){return tC(this.dom,e,s)}}class ji extends at{constructor(e,s=[],i=0){super(),this.mark=e,this.children=s,this.length=i;for(let n of s)n.setParent(this)}setAttrs(e){if(p0(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let s in this.mark.attrs)e.setAttribute(s,this.mark.attrs[s]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,s){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,s)}merge(e,s,i,n,r,o){return i&&(!(i instanceof ji&&i.mark.eq(this.mark))||e&&r<=0||s<this.length&&o<=0)?!1:(x0(this,e,s,i?i.children.slice():[],r-1,o-1),this.markDirty(),!0)}split(e){let s=[],i=0,n=-1,r=0;for(let l of this.children){let a=i+l.length;a>e&&s.push(i<e?l.split(e-i):l),n<0&&i>=e&&(n=r),i=a,r++}let o=this.length-e;return this.length=e,n>-1&&(this.children.length=n,this.markDirty()),new ji(this.mark,s,o)}domAtPos(e){return k0(this,e)}coordsAt(e,s){return S0(this,e,s)}}function tC(t,e,s){let i=t.nodeValue.length;e>i&&(e=i);let n=e,r=e,o=0;e==0&&s<0||e==i&&s>=0?_e.chrome||_e.gecko||(e?(n--,o=1):r<i&&(r++,o=-1)):s<0?n--:r<i&&r++;let l=Ln(t,n,r).getClientRects();if(!l.length)return null;let a=l[(o?o<0:s>=0)?0:l.length-1];return _e.safari&&!o&&a.width==0&&(a=Array.prototype.find.call(l,d=>d.width)||a),o?La(a,o<0):a||null}class Xi extends at{static create(e,s,i){return new Xi(e,s,i)}constructor(e,s,i){super(),this.widget=e,this.length=s,this.side=i,this.prevWidget=null}split(e){let s=Xi.create(this.widget,this.length-e,this.side);return this.length-=e,s}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,s,i,n,r,o){return i&&(!(i instanceof Xi)||!this.widget.compare(i.widget)||e>0&&r<=0||s<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-s),!0)}become(e){return e instanceof Xi&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return tt.empty;let e=this;for(;e.parent;)e=e.parent;let{view:s}=e,i=s&&s.state.doc,n=this.posAtStart;return i?i.slice(n,n+this.length):tt.empty}domAtPos(e){return(this.length?e==0:this.side>0)?Qt.before(this.dom):Qt.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,s){let i=this.widget.coordsAt(this.dom,e,s);if(i)return i;let n=this.dom.getClientRects(),r=null;if(!n.length)return null;let o=this.side?this.side<0:e>0;for(let l=o?n.length-1:0;r=n[l],!(e>0?l==0:l==n.length-1||r.top<r.bottom);l+=o?-1:1);return La(r,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class gr extends at{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof gr&&e.side==this.side}split(){return new gr(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?Qt.before(this.dom):Qt.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return tt.empty}get isHidden(){return!0}}Ys.prototype.children=Xi.prototype.children=gr.prototype.children=Tc;function k0(t,e){let s=t.dom,{children:i}=t,n=0;for(let r=0;n<i.length;n++){let o=i[n],l=r+o.length;if(!(l==r&&o.getSide()<=0)){if(e>r&&e<l&&o.dom.parentNode==s)return o.domAtPos(e-r);if(e<=r)break;r=l}}for(let r=n;r>0;r--){let o=i[r-1];if(o.dom.parentNode==s)return o.domAtPos(o.length)}for(let r=n;r<i.length;r++){let o=i[r];if(o.dom.parentNode==s)return o.domAtPos(0)}return new Qt(s,0)}function w0(t,e,s){let i,{children:n}=t;s>0&&e instanceof ji&&n.length&&(i=n[n.length-1])instanceof ji&&i.mark.eq(e.mark)?w0(i,e.children[0],s-1):(n.push(e),e.setParent(t)),t.length+=e.length}function S0(t,e,s){let i=null,n=-1,r=null,o=-1;function l(d,u){for(let f=0,h=0;f<d.children.length&&h<=u;f++){let m=d.children[f],w=h+m.length;w>=u&&(m.children.length?l(m,u-h):(!r||r.isHidden&&(s>0||iC(r,m)))&&(w>u||h==w&&m.getSide()>0)?(r=m,o=u-h):(h<u||h==w&&m.getSide()<0&&!m.isHidden)&&(i=m,n=u-h)),h=w}}l(t,e);let a=(s<0?i:r)||i||r;return a?a.coordsAt(Math.max(0,a==i?n:o),s):sC(t)}function sC(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let s=Co(e);return s[s.length-1]||null}function iC(t,e){let s=t.coordsAt(0,1),i=e.coordsAt(0,1);return s&&i&&i.top<s.bottom}function Dd(t,e){for(let s in t)s=="class"&&e.class?e.class+=" "+t.class:s=="style"&&e.style?e.style+=";"+t.style:e[s]=t[s];return e}const Nh=Object.create(null);function sa(t,e,s){if(t==e)return!0;t||(t=Nh),e||(e=Nh);let i=Object.keys(t),n=Object.keys(e);if(i.length-(s&&i.indexOf(s)>-1?1:0)!=n.length-(s&&n.indexOf(s)>-1?1:0))return!1;for(let r of i)if(r!=s&&(n.indexOf(r)==-1||t[r]!==e[r]))return!1;return!0}function Td(t,e,s){let i=!1;if(e)for(let n in e)s&&n in s||(i=!0,n=="style"?t.style.cssText="":t.removeAttribute(n));if(s)for(let n in s)e&&e[n]==s[n]||(i=!0,n=="style"?t.style.cssText=s[n]:t.setAttribute(n,s[n]));return i}function nC(t){let e=Object.create(null);for(let s=0;s<t.attributes.length;s++){let i=t.attributes[s];e[i.name]=i.value}return e}class cn{eq(e){return!1}updateDOM(e,s){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,s,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var fs=(function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t})(fs||(fs={}));class Ie extends Rn{constructor(e,s,i,n){super(),this.startSide=e,this.endSide=s,this.widget=i,this.spec=n}get heightRelevant(){return!1}static mark(e){return new No(e)}static widget(e){let s=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return s+=i&&!e.inlineOrder?s>0?3e8:-4e8:s>0?1e8:-1e8,new an(e,s,s,i,e.widget||null,!1)}static replace(e){let s=!!e.block,i,n;if(e.isBlockGap)i=-5e8,n=4e8;else{let{start:r,end:o}=C0(e,s);i=(r?s?-3e8:-1:5e8)-1,n=(o?s?2e8:1:-6e8)+1}return new an(e,i,n,s,e.widget||null,!0)}static line(e){return new zo(e)}static set(e,s=!1){return et.of(e,s)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Ie.none=et.empty;class No extends Ie{constructor(e){let{start:s,end:i}=C0(e);super(s?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var s,i;return this==e||e instanceof No&&this.tagName==e.tagName&&(this.class||((s=this.attrs)===null||s===void 0?void 0:s.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&sa(this.attrs,e.attrs,"class")}range(e,s=e){if(e>=s)throw new RangeError("Mark decorations may not be empty");return super.range(e,s)}}No.prototype.point=!1;class zo extends Ie{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof zo&&this.spec.class==e.spec.class&&sa(this.spec.attributes,e.spec.attributes)}range(e,s=e){if(s!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,s)}}zo.prototype.mapMode=cs.TrackBefore;zo.prototype.point=!0;class an extends Ie{constructor(e,s,i,n,r,o){super(s,i,r,e),this.block=n,this.isReplace=o,this.mapMode=n?s<=0?cs.TrackBefore:cs.TrackAfter:cs.TrackDel}get type(){return this.startSide!=this.endSide?fs.WidgetRange:this.startSide<=0?fs.WidgetBefore:fs.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof an&&rC(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,s=e){if(this.isReplace&&(e>s||e==s&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&s!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,s)}}an.prototype.point=!0;function C0(t,e=!1){let{inclusiveStart:s,inclusiveEnd:i}=t;return s==null&&(s=t.inclusive),i==null&&(i=t.inclusive),{start:s??e,end:i??e}}function rC(t,e){return t==e||!!(t&&e&&t.compare(e))}function jl(t,e,s,i=0){let n=s.length-1;n>=0&&s[n]+i>=t?s[n]=Math.max(s[n],e):s.push(t,e)}class Et extends at{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,s,i,n,r,o){if(i){if(!(i instanceof Et))return!1;this.dom||i.transferDOM(this)}return n&&this.setDeco(i?i.attrs:null),x0(this,e,s,i?i.children.slice():[],r,o),!0}split(e){let s=new Et;if(s.breakAfter=this.breakAfter,this.length==0)return s;let{i,off:n}=this.childPos(e);n&&(s.append(this.children[i].split(n),0),this.children[i].merge(n,this.children[i].length,null,!1,0,0),i++);for(let r=i;r<this.children.length;r++)s.append(this.children[r],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,s}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){sa(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,s){w0(this,e,s)}addLineDeco(e){let s=e.spec.attributes,i=e.spec.class;s&&(this.attrs=Dd(s,this.attrs||{})),i&&(this.attrs=Dd({class:i},this.attrs||{}))}domAtPos(e){return k0(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,s){var i;this.dom?this.flags&4&&(p0(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(Td(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,s);let n=this.dom.lastChild;for(;n&&at.get(n)instanceof ji;)n=n.lastChild;if(!n||!this.length||n.nodeName!="BR"&&((i=at.get(n))===null||i===void 0?void 0:i.isEditable)==!1&&(!_e.ios||!this.children.some(r=>r instanceof Ys))){let r=document.createElement("BR");r.cmIgnore=!0,this.dom.appendChild(r)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,s;for(let i of this.children){if(!(i instanceof Ys)||/[^ -~]/.test(i.text))return null;let n=Co(i.dom);if(n.length!=1)return null;e+=n[0].width,s=n[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:s}:null}coordsAt(e,s){let i=S0(this,e,s);if(!this.children.length&&i&&this.parent){let{heightOracle:n}=this.parent.view.viewState,r=i.bottom-i.top;if(Math.abs(r-n.lineHeight)<2&&n.textHeight<r){let o=(r-n.textHeight)/2;return{top:i.top+o,bottom:i.bottom-o,left:i.left,right:i.left}}}return i}become(e){return e instanceof Et&&this.children.length==0&&e.children.length==0&&sa(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,s){for(let i=0,n=0;i<e.children.length;i++){let r=e.children[i],o=n+r.length;if(o>=s){if(r instanceof Et)return r;if(o>s)break}n=o+r.breakAfter}return null}}class $i extends at{constructor(e,s,i){super(),this.widget=e,this.length=s,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,s,i,n,r,o){return i&&(!(i instanceof $i)||!this.widget.compare(i.widget)||e>0&&r<=0||s<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-s),!0)}domAtPos(e){return e==0?Qt.before(this.dom):Qt.after(this.dom,e==this.length)}split(e){let s=this.length-e;this.length=e;let i=new $i(this.widget,s,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return Tc}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):tt.empty}domBoundsAround(){return null}become(e){return e instanceof $i&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,s){let i=this.widget.coordsAt(this.dom,e,s);return i||(this.widget instanceof Ed?null:La(this.dom.getBoundingClientRect(),this.length?e==0:s<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:s,endSide:i}=this.deco;return s==i?!1:e<0?s<0:i>0}}class Ed extends cn{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class no{constructor(e,s,i,n){this.doc=e,this.pos=s,this.end=i,this.disallowBlockEffectsFor=n,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=s}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof $i&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Et),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(ll(new gr(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof $i)&&this.getLine()}buildText(e,s,i){for(;e>0;){if(this.textOff==this.text.length){let{value:o,lineBreak:l,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(l){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=o,this.textOff=0}let n=Math.min(this.text.length-this.textOff,e),r=Math.min(n,512);this.flushBuffer(s.slice(s.length-i)),this.getLine().append(ll(new Ys(this.text.slice(this.textOff,this.textOff+r)),s),i),this.atCursorPos=!0,this.textOff+=r,e-=r,i=n<=r?0:s.length}}span(e,s,i,n){this.buildText(s-e,i,n),this.pos=s,this.openStart<0&&(this.openStart=n)}point(e,s,i,n,r,o){if(this.disallowBlockEffectsFor[o]&&i instanceof an){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(s>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=s-e;if(i instanceof an)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new $i(i.widget||yr.block,l,i));else{let a=Xi.create(i.widget||yr.inline,l,l?0:i.startSide),d=this.atCursorPos&&!a.isEditable&&r<=n.length&&(e<s||i.startSide>0),u=!a.isEditable&&(e<s||r>n.length||i.startSide<=0),f=this.getLine();this.pendingBuffer==2&&!d&&!a.isEditable&&(this.pendingBuffer=0),this.flushBuffer(n),d&&(f.append(ll(new gr(1),n),r),r=n.length+Math.max(0,r-n.length)),f.append(ll(a,n),r),this.atCursorPos=u,this.pendingBuffer=u?e<s||r>n.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=n.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=s),this.openStart<0&&(this.openStart=r)}static build(e,s,i,n,r){let o=new no(e,s,i,r);return o.openEnd=et.spans(n,s,i,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function ll(t,e){for(let s of e)t=new ji(s,[t],t.length);return t}class yr extends cn{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}yr.inline=new yr("span");yr.block=new yr("div");var yt=(function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t})(yt||(yt={}));const Bn=yt.LTR,Ec=yt.RTL;function _0(t){let e=[];for(let s=0;s<t.length;s++)e.push(1<<+t[s]);return e}const oC=_0("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),lC=_0("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),$d=Object.create(null),ni=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),s=t.charCodeAt(1);$d[e]=s,$d[s]=-e}function A0(t){return t<=247?oC[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?lC[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const aC=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Qi{get dir(){return this.level%2?Ec:Bn}constructor(e,s,i){this.from=e,this.to=s,this.level=i}side(e,s){return this.dir==s==e?this.to:this.from}forward(e,s){return e==(this.dir==s)}static find(e,s,i,n){let r=-1;for(let o=0;o<e.length;o++){let l=e[o];if(l.from<=s&&l.to>=s){if(l.level==i)return o;(r<0||(n!=0?n<0?l.from<s:l.to>s:e[r].level>l.level))&&(r=o)}}if(r<0)throw new RangeError("Index out of range");return r}}function V0(t,e){if(t.length!=e.length)return!1;for(let s=0;s<t.length;s++){let i=t[s],n=e[s];if(i.from!=n.from||i.to!=n.to||i.direction!=n.direction||!V0(i.inner,n.inner))return!1}return!0}const ct=[];function uC(t,e,s,i,n){for(let r=0;r<=i.length;r++){let o=r?i[r-1].to:e,l=r<i.length?i[r].from:s,a=r?256:n;for(let d=o,u=a,f=a;d<l;d++){let h=A0(t.charCodeAt(d));h==512?h=u:h==8&&f==4&&(h=16),ct[d]=h==4?2:h,h&7&&(f=h),u=h}for(let d=o,u=a,f=a;d<l;d++){let h=ct[d];if(h==128)d<l-1&&u==ct[d+1]&&u&24?h=ct[d]=u:ct[d]=256;else if(h==64){let m=d+1;for(;m<l&&ct[m]==64;)m++;let w=d&&u==8||m<s&&ct[m]==8?f==1?1:8:256;for(let S=d;S<m;S++)ct[S]=w;d=m-1}else h==8&&f==1&&(ct[d]=1);u=h,h&7&&(f=h)}}}function dC(t,e,s,i,n){let r=n==1?2:1;for(let o=0,l=0,a=0;o<=i.length;o++){let d=o?i[o-1].to:e,u=o<i.length?i[o].from:s;for(let f=d,h,m,w;f<u;f++)if(m=$d[h=t.charCodeAt(f)])if(m<0){for(let S=l-3;S>=0;S-=3)if(ni[S+1]==-m){let _=ni[S+2],M=_&2?n:_&4?_&1?r:n:0;M&&(ct[f]=ct[ni[S]]=M),l=S;break}}else{if(ni.length==189)break;ni[l++]=f,ni[l++]=h,ni[l++]=a}else if((w=ct[f])==2||w==1){let S=w==n;a=S?0:1;for(let _=l-3;_>=0;_-=3){let M=ni[_+2];if(M&2)break;if(S)ni[_+2]|=2;else{if(M&4)break;ni[_+2]|=4}}}}}function cC(t,e,s,i){for(let n=0,r=i;n<=s.length;n++){let o=n?s[n-1].to:t,l=n<s.length?s[n].from:e;for(let a=o;a<l;){let d=ct[a];if(d==256){let u=a+1;for(;;)if(u==l){if(n==s.length)break;u=s[n++].to,l=n<s.length?s[n].from:e}else if(ct[u]==256)u++;else break;let f=r==1,h=(u<e?ct[u]:i)==1,m=f==h?f?1:2:i;for(let w=u,S=n,_=S?s[S-1].to:t;w>a;)w==_&&(w=s[--S].from,_=S?s[S-1].to:t),ct[--w]=m;a=u}else r=d,a++}}}function Pd(t,e,s,i,n,r,o){let l=i%2?2:1;if(i%2==n%2)for(let a=e,d=0;a<s;){let u=!0,f=!1;if(d==r.length||a<r[d].from){let S=ct[a];S!=l&&(u=!1,f=S==16)}let h=!u&&l==1?[]:null,m=u?i:i+1,w=a;e:for(;;)if(d<r.length&&w==r[d].from){if(f)break e;let S=r[d];if(!u)for(let _=S.to,M=d+1;;){if(_==s)break e;if(M<r.length&&r[M].from==_)_=r[M++].to;else{if(ct[_]==l)break e;break}}if(d++,h)h.push(S);else{S.from>a&&o.push(new Qi(a,S.from,m));let _=S.direction==Bn!=!(m%2);Od(t,_?i+1:i,n,S.inner,S.from,S.to,o),a=S.to}w=S.to}else{if(w==s||(u?ct[w]!=l:ct[w]==l))break;w++}h?Pd(t,a,w,i+1,n,h,o):a<w&&o.push(new Qi(a,w,m)),a=w}else for(let a=s,d=r.length;a>e;){let u=!0,f=!1;if(!d||a>r[d-1].to){let S=ct[a-1];S!=l&&(u=!1,f=S==16)}let h=!u&&l==1?[]:null,m=u?i:i+1,w=a;e:for(;;)if(d&&w==r[d-1].to){if(f)break e;let S=r[--d];if(!u)for(let _=S.from,M=d;;){if(_==e)break e;if(M&&r[M-1].to==_)_=r[--M].from;else{if(ct[_-1]==l)break e;break}}if(h)h.push(S);else{S.to<a&&o.push(new Qi(S.to,a,m));let _=S.direction==Bn!=!(m%2);Od(t,_?i+1:i,n,S.inner,S.from,S.to,o),a=S.from}w=S.from}else{if(w==e||(u?ct[w-1]!=l:ct[w-1]==l))break;w--}h?Pd(t,w,a,i+1,n,h,o):w<a&&o.push(new Qi(w,a,m)),a=w}}function Od(t,e,s,i,n,r,o){let l=e%2?2:1;uC(t,n,r,i,l),dC(t,n,r,i,l),cC(n,r,i,l),Pd(t,n,r,e,s,i,o)}function fC(t,e,s){if(!t)return[new Qi(0,0,e==Ec?1:0)];if(e==Bn&&!s.length&&!aC.test(t))return M0(t.length);if(s.length)for(;t.length>ct.length;)ct[ct.length]=256;let i=[],n=e==Bn?0:1;return Od(t,n,n,s,0,t.length,i),i}function M0(t){return[new Qi(0,t,0)]}let D0="";function hC(t,e,s,i,n){var r;let o=i.head-t.from,l=Qi.find(e,o,(r=i.bidiLevel)!==null&&r!==void 0?r:-1,i.assoc),a=e[l],d=a.side(n,s);if(o==d){let h=l+=n?1:-1;if(h<0||h>=e.length)return null;a=e[l=h],o=a.side(!n,s),d=a.side(n,s)}let u=qt(t.text,o,a.forward(n,s));(u<a.from||u>a.to)&&(u=d),D0=t.text.slice(Math.min(o,u),Math.max(o,u));let f=l==(n?e.length-1:0)?null:e[l+(n?1:-1)];return f&&u==d&&f.level+(n?0:1)<a.level?ne.cursor(f.side(!n,s)+t.from,f.forward(n,s)?1:-1,f.level):ne.cursor(u+t.from,a.forward(n,s)?-1:1,a.level)}function pC(t,e,s){for(let i=e;i<s;i++){let n=A0(t.charCodeAt(i));if(n==1)return Bn;if(n==2||n==4)return Ec}return Bn}const T0=De.define(),E0=De.define(),$0=De.define(),P0=De.define(),Rd=De.define(),O0=De.define(),R0=De.define(),$c=De.define(),Pc=De.define(),j0=De.define({combine:t=>t.some(e=>e)}),L0=De.define({combine:t=>t.some(e=>e)}),B0=De.define();class ur{constructor(e,s="nearest",i="nearest",n=5,r=5,o=!1){this.range=e,this.y=s,this.x=i,this.yMargin=n,this.xMargin=r,this.isSnapshot=o}map(e){return e.empty?this:new ur(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new ur(ne.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const al=We.define({map:(t,e)=>t.map(e)}),I0=We.define();function ys(t,e,s){let i=t.facet(P0);i.length?i[0](e):window.onerror&&window.onerror(String(e),s,void 0,void 0,e)||(s?console.error(s+":",e):console.error(e))}const Ei=De.define({combine:t=>t.length?t[0]:!0});let mC=0;const Yn=De.define({combine(t){return t.filter((e,s)=>{for(let i=0;i<s;i++)if(t[i].plugin==e.plugin)return!1;return!0})}});class $t{constructor(e,s,i,n,r){this.id=e,this.create=s,this.domEventHandlers=i,this.domEventObservers=n,this.baseExtensions=r(this),this.extension=this.baseExtensions.concat(Yn.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(Yn.of({plugin:this,arg:e}))}static define(e,s){const{eventHandlers:i,eventObservers:n,provide:r,decorations:o}=s||{};return new $t(mC++,e,i,n,l=>{let a=[];return o&&a.push(_o.of(d=>{let u=d.plugin(l);return u?o(u):Ie.none})),r&&a.push(r(l)),a})}static fromClass(e,s){return $t.define((i,n)=>new e(i,n),s)}}class ku{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let s=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(s)}catch(i){if(ys(s.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(s){ys(e.state,s,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var s;if(!((s=this.value)===null||s===void 0)&&s.destroy)try{this.value.destroy()}catch(i){ys(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const U0=De.define(),Oc=De.define(),_o=De.define(),N0=De.define(),Fo=De.define(),z0=De.define();function zh(t,e){let s=t.state.facet(z0);if(!s.length)return s;let i=s.map(r=>r instanceof Function?r(t):r),n=[];return et.spans(i,e.from,e.to,{point(){},span(r,o,l,a){let d=r-e.from,u=o-e.from,f=n;for(let h=l.length-1;h>=0;h--,a--){let m=l[h].spec.bidiIsolate,w;if(m==null&&(m=pC(e.text,d,u)),a>0&&f.length&&(w=f[f.length-1]).to==d&&w.direction==m)w.to=u,f=w.inner;else{let S={from:d,to:u,direction:m,inner:[]};f.push(S),f=S.inner}}}}),n}const F0=De.define();function Rc(t){let e=0,s=0,i=0,n=0;for(let r of t.state.facet(F0)){let o=r(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(s=Math.max(s,o.right)),o.top!=null&&(i=Math.max(i,o.top)),o.bottom!=null&&(n=Math.max(n,o.bottom)))}return{left:e,right:s,top:i,bottom:n}}const zr=De.define();class Os{constructor(e,s,i,n){this.fromA=e,this.toA=s,this.fromB=i,this.toB=n}join(e){return new Os(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let s=e.length,i=this;for(;s>0;s--){let n=e[s-1];if(!(n.fromA>i.toA)){if(n.toA<i.fromA)break;i=i.join(n),e.splice(s-1,1)}}return e.splice(s,0,i),e}static extendWithRanges(e,s){if(s.length==0)return e;let i=[];for(let n=0,r=0,o=0,l=0;;n++){let a=n==e.length?null:e[n],d=o-l,u=a?a.fromB:1e9;for(;r<s.length&&s[r]<u;){let f=s[r],h=s[r+1],m=Math.max(l,f),w=Math.min(u,h);if(m<=w&&new Os(m+d,w+d,m,w).addToSet(i),h>u)break;r+=2}if(!a)return i;new Os(a.fromA,a.toA,a.fromB,a.toB).addToSet(i),o=a.toA,l=a.toB}}}class ia{constructor(e,s,i){this.view=e,this.state=s,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=Rt.empty(this.startState.doc.length);for(let r of i)this.changes=this.changes.compose(r.changes);let n=[];this.changes.iterChangedRanges((r,o,l,a)=>n.push(new Os(r,o,l,a))),this.changedRanges=n}static create(e,s,i){return new ia(e,s,i)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class Fh extends at{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Ie.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Et],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Os(0,0,0,e.state.doc.length)],0,null)}update(e){var s;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:d,toA:u})=>u<this.minWidthFrom||d>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let n=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((s=this.domChanged)===null||s===void 0)&&s.newSel?n=this.domChanged.newSel.head:!wC(e.changes,this.hasComposition)&&!e.selectionSet&&(n=e.state.selection.main.head));let r=n>-1?yC(this.view,e.changes,n):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:d,to:u}=this.hasComposition;i=new Os(d,u,e.changes.mapPos(d,-1),e.changes.mapPos(u,1)).addToSet(i.slice())}this.hasComposition=r?{from:r.range.fromB,to:r.range.toB}:null,(_e.ie||_e.chrome)&&!r&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,l=this.updateDeco(),a=xC(o,l,e.changes);return i=Os.extendWithRanges(i,a),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,e.startState.doc.length,r),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,s,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,s,i);let{observer:n}=this.view;n.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=_e.chrome||_e.ios?{node:n.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||n.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof $i&&o.widget instanceof Ed&&r.push(o.dom);n.updateGaps(r)}updateChildren(e,s,i){let n=i?i.range.addToSet(e.slice()):e,r=this.childCursor(s);for(let o=n.length-1;;o--){let l=o>=0?n[o]:null;if(!l)break;let{fromA:a,toA:d,fromB:u,toB:f}=l,h,m,w,S;if(i&&i.range.fromB<f&&i.range.toB>u){let T=no.build(this.view.state.doc,u,i.range.fromB,this.decorations,this.dynamicDecorationMap),N=no.build(this.view.state.doc,i.range.toB,f,this.decorations,this.dynamicDecorationMap);m=T.breakAtStart,w=T.openStart,S=N.openEnd;let B=this.compositionView(i);N.breakAtStart?B.breakAfter=1:N.content.length&&B.merge(B.length,B.length,N.content[0],!1,N.openStart,0)&&(B.breakAfter=N.content[0].breakAfter,N.content.shift()),T.content.length&&B.merge(0,0,T.content[T.content.length-1],!0,0,T.openEnd)&&T.content.pop(),h=T.content.concat(B).concat(N.content)}else({content:h,breakAtStart:m,openStart:w,openEnd:S}=no.build(this.view.state.doc,u,f,this.decorations,this.dynamicDecorationMap));let{i:_,off:M}=r.findPos(d,1),{i:L,off:$}=r.findPos(a,-1);b0(this,L,$,_,M,h,m,w,S)}i&&this.fixCompositionDOM(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let s of e.transactions)for(let i of s.effects)i.is(I0)&&(this.editContextFormatting=i.value)}compositionView(e){let s=new Ys(e.text.nodeValue);s.flags|=8;for(let{deco:n}of e.marks)s=new ji(n,[s],s.length);let i=new Et;return i.append(s,0),i}fixCompositionDOM(e){let s=(r,o)=>{o.flags|=8|(o.children.some(a=>a.flags&7)?1:0),this.markedForComposition.add(o);let l=at.get(r);l&&l!=o&&(l.dom=null),o.setDOM(r)},i=this.childPos(e.range.fromB,1),n=this.children[i.i];s(e.line,n);for(let r=e.marks.length-1;r>=-1;r--)i=n.childPos(i.off,1),n=n.children[i.i],s(r>=0?e.marks[r].node:e.text,n)}updateSelection(e=!1,s=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,n=i==this.dom,r=!n&&!(this.view.state.facet(Ei)||this.dom.tabIndex>-1)&&Rl(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(n||s||r))return;let o=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(l.anchor)),d=l.empty?a:this.moveToLine(this.domAtPos(l.head));if(_e.gecko&&l.empty&&!this.hasComposition&&gC(a)){let f=document.createTextNode("");this.view.observer.ignore(()=>a.node.insertBefore(f,a.node.childNodes[a.offset]||null)),a=d=new Qt(f,0),o=!0}let u=this.view.observer.selectionRange;(o||!u.focusNode||(!io(a.node,a.offset,u.anchorNode,u.anchorOffset)||!io(d.node,d.offset,u.focusNode,u.focusOffset))&&!this.suppressWidgetCursorChange(u,l))&&(this.view.observer.ignore(()=>{_e.android&&_e.chrome&&this.dom.contains(u.focusNode)&&kC(u.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let f=So(this.view.root);if(f)if(l.empty){if(_e.gecko){let h=vC(a.node,a.offset);if(h&&h!=3){let m=(h==1?g0:y0)(a.node,a.offset);m&&(a=new Qt(m.node,m.offset))}}f.collapse(a.node,a.offset),l.bidiLevel!=null&&f.caretBidiLevel!==void 0&&(f.caretBidiLevel=l.bidiLevel)}else if(f.extend){f.collapse(a.node,a.offset);try{f.extend(d.node,d.offset)}catch{}}else{let h=document.createRange();l.anchor>l.head&&([a,d]=[d,a]),h.setEnd(d.node,d.offset),h.setStart(a.node,a.offset),f.removeAllRanges(),f.addRange(h)}r&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(a,d)),this.impreciseAnchor=a.precise?null:new Qt(u.anchorNode,u.anchorOffset),this.impreciseHead=d.precise?null:new Qt(u.focusNode,u.focusOffset)}suppressWidgetCursorChange(e,s){return this.hasComposition&&s.empty&&io(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==s.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,s=e.state.selection.main,i=So(e.root),{anchorNode:n,anchorOffset:r}=e.observer.selectionRange;if(!i||!s.empty||!s.assoc||!i.modify)return;let o=Et.find(this,s.head);if(!o)return;let l=o.posAtStart;if(s.head==l||s.head==l+o.length)return;let a=this.coordsAt(s.head,-1),d=this.coordsAt(s.head,1);if(!a||!d||a.bottom>d.top)return;let u=this.domAtPos(s.head+s.assoc);i.collapse(u.node,u.offset),i.modify("move",s.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let f=e.observer.selectionRange;e.docView.posFromDOM(f.anchorNode,f.anchorOffset)!=s.from&&i.collapse(n,r)}moveToLine(e){let s=this.dom,i;if(e.node!=s)return e;for(let n=e.offset;!i&&n<s.childNodes.length;n++){let r=at.get(s.childNodes[n]);r instanceof Et&&(i=r.domAtPos(0))}for(let n=e.offset-1;!i&&n>=0;n--){let r=at.get(s.childNodes[n]);r instanceof Et&&(i=r.domAtPos(r.length))}return i?new Qt(i.node,i.offset,!0):e}nearest(e){for(let s=e;s;){let i=at.get(s);if(i&&i.rootView==this)return i;s=s.parentNode}return null}posFromDOM(e,s){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,s)+i.posAtStart}domAtPos(e){let{i:s,off:i}=this.childCursor().findPos(e,-1);for(;s<this.children.length-1;){let n=this.children[s];if(i<n.length||n instanceof Et)break;s++,i=0}return this.children[s].domAtPos(i)}coordsAt(e,s){let i=null,n=0;for(let r=this.length,o=this.children.length-1;o>=0;o--){let l=this.children[o],a=r-l.breakAfter,d=a-l.length;if(a<e)break;if(d<=e&&(d<e||l.covers(-1))&&(a>e||l.covers(1))&&(!i||l instanceof Et&&!(i instanceof Et&&s>=0)))i=l,n=d;else if(i&&d==e&&a==e&&l instanceof $i&&Math.abs(s)<2){if(l.deco.startSide<0)break;o&&(i=null)}r=d}return i?i.coordsAt(e-n,s):null}coordsForChar(e){let{i:s,off:i}=this.childPos(e,1),n=this.children[s];if(!(n instanceof Et))return null;for(;n.children.length;){let{i:l,off:a}=n.childPos(i,1);for(;;l++){if(l==n.children.length)return null;if((n=n.children[l]).length)break}i=a}if(!(n instanceof Ys))return null;let r=qt(n.text,i);if(r==i)return null;let o=Ln(n.dom,i,r).getClientRects();for(let l=0;l<o.length;l++){let a=o[l];if(l==o.length-1||a.top<a.bottom&&a.left<a.right)return a}return null}measureVisibleLineHeights(e){let s=[],{from:i,to:n}=e,r=this.view.contentDOM.clientWidth,o=r>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,a=this.view.textDirection==yt.LTR;for(let d=0,u=0;u<this.children.length;u++){let f=this.children[u],h=d+f.length;if(h>n)break;if(d>=i){let m=f.dom.getBoundingClientRect();if(s.push(m.height),o){let w=f.dom.lastChild,S=w?Co(w):[];if(S.length){let _=S[S.length-1],M=a?_.right-m.left:m.right-_.left;M>l&&(l=M,this.minWidth=r,this.minWidthFrom=d,this.minWidthTo=h)}}}d=h+f.breakAfter}return s}textDirectionAt(e){let{i:s}=this.childPos(e,1);return getComputedStyle(this.children[s].dom).direction=="rtl"?yt.RTL:yt.LTR}measureTextSize(){for(let r of this.children)if(r instanceof Et){let o=r.measureTextSize();if(o)return o}let e=document.createElement("div"),s,i,n;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let r=Co(e.firstChild)[0];s=e.getBoundingClientRect().height,i=r?r.width/27:7,n=r?r.height:s,e.remove()}),{lineHeight:s,charWidth:i,textHeight:n}}childCursor(e=this.length){let s=this.children.length;return s&&(e-=this.children[--s].length),new v0(this.children,e,s)}computeBlockGapDeco(){let e=[],s=this.view.viewState;for(let i=0,n=0;;n++){let r=n==s.viewports.length?null:s.viewports[n],o=r?r.from-1:this.length;if(o>i){let l=(s.lineBlockAt(o).bottom-s.lineBlockAt(i).top)/this.view.scaleY;e.push(Ie.replace({widget:new Ed(l),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!r)break;i=r.to+1}return Ie.set(e)}updateDeco(){let e=1,s=this.view.state.facet(_o).map(r=>(this.dynamicDecorationMap[e++]=typeof r=="function")?r(this.view):r),i=!1,n=this.view.state.facet(N0).map((r,o)=>{let l=typeof r=="function";return l&&(i=!0),l?r(this.view):r});for(n.length&&(this.dynamicDecorationMap[e++]=i,s.push(et.join(n))),this.decorations=[this.editContextFormatting,...s,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let d=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=d.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let d of this.view.state.facet(B0))try{if(d(this.view,e.range,e))return!0}catch(u){ys(this.view.state,u,"scroll handler")}let{range:s}=e,i=this.coordsAt(s.head,s.empty?s.assoc:s.head>s.anchor?-1:1),n;if(!i)return;!s.empty&&(n=this.coordsAt(s.anchor,s.anchor>s.head?-1:1))&&(i={left:Math.min(i.left,n.left),top:Math.min(i.top,n.top),right:Math.max(i.right,n.right),bottom:Math.max(i.bottom,n.bottom)});let r=Rc(this.view),o={left:i.left-r.left,top:i.top-r.top,right:i.right+r.right,bottom:i.bottom+r.bottom},{offsetWidth:l,offsetHeight:a}=this.view.scrollDOM;J4(this.view.scrollDOM,o,s.head<s.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,l),-l),Math.max(Math.min(e.yMargin,a),-a),this.view.textDirection==yt.LTR)}}function gC(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function H0(t,e){let s=t.observer.selectionRange;if(!s.focusNode)return null;let i=g0(s.focusNode,s.focusOffset),n=y0(s.focusNode,s.focusOffset),r=i||n;if(n&&i&&n.node!=i.node){let l=at.get(n.node);if(!l||l instanceof Ys&&l.text!=n.node.nodeValue)r=n;else if(t.docView.lastCompositionAfterCursor){let a=at.get(i.node);!a||a instanceof Ys&&a.text!=i.node.nodeValue||(r=n)}}if(t.docView.lastCompositionAfterCursor=r!=i,!r)return null;let o=e-r.offset;return{from:o,to:o+r.node.nodeValue.length,node:r.node}}function yC(t,e,s){let i=H0(t,s);if(!i)return null;let{node:n,from:r,to:o}=i,l=n.nodeValue;if(/[\n\r]/.test(l)||t.state.doc.sliceString(i.from,i.to)!=l)return null;let a=e.invertedDesc,d=new Os(a.mapPos(r),a.mapPos(o),r,o),u=[];for(let f=n.parentNode;;f=f.parentNode){let h=at.get(f);if(h instanceof ji)u.push({node:f,deco:h.mark});else{if(h instanceof Et||f.nodeName=="DIV"&&f.parentNode==t.contentDOM)return{range:d,text:n,marks:u,line:f};if(f!=t.contentDOM)u.push({node:f,deco:new No({inclusive:!0,attributes:nC(f),tagName:f.tagName.toLowerCase()})});else return null}}}function vC(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let bC=class{constructor(){this.changes=[]}compareRange(e,s){jl(e,s,this.changes)}comparePoint(e,s){jl(e,s,this.changes)}boundChange(e){jl(e,e,this.changes)}};function xC(t,e,s){let i=new bC;return et.compare(t,e,s,i),i.changes}function kC(t,e){for(let s=t;s&&s!=e;s=s.assignedSlot||s.parentNode)if(s.nodeType==1&&s.contentEditable=="false")return!0;return!1}function wC(t,e){let s=!1;return e&&t.iterChangedRanges((i,n)=>{i<e.to&&n>e.from&&(s=!0)}),s}function SC(t,e,s=1){let i=t.charCategorizer(e),n=t.doc.lineAt(e),r=e-n.from;if(n.length==0)return ne.cursor(e);r==0?s=1:r==n.length&&(s=-1);let o=r,l=r;s<0?o=qt(n.text,r,!1):l=qt(n.text,r);let a=i(n.text.slice(o,l));for(;o>0;){let d=qt(n.text,o,!1);if(i(n.text.slice(d,o))!=a)break;o=d}for(;l<n.length;){let d=qt(n.text,l);if(i(n.text.slice(l,d))!=a)break;l=d}return ne.range(o+n.from,l+n.from)}function CC(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function _C(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function wu(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function Hh(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function Wh(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function jd(t,e,s){let i,n,r,o,l=!1,a,d,u,f;for(let w=t.firstChild;w;w=w.nextSibling){let S=Co(w);for(let _=0;_<S.length;_++){let M=S[_];n&&wu(n,M)&&(M=Hh(Wh(M,n.bottom),n.top));let L=CC(e,M),$=_C(s,M);if(L==0&&$==0)return w.nodeType==3?qh(w,e,s):jd(w,e,s);(!i||o>$||o==$&&r>L)&&(i=w,n=M,r=L,o=$,l=L?e<M.left?_>0:_<S.length-1:!0),L==0?s>M.bottom&&(!u||u.bottom<M.bottom)?(a=w,u=M):s<M.top&&(!f||f.top>M.top)&&(d=w,f=M):u&&wu(u,M)?u=Wh(u,M.bottom):f&&wu(f,M)&&(f=Hh(f,M.top))}}if(u&&u.bottom>=s?(i=a,n=u):f&&f.top<=s&&(i=d,n=f),!i)return{node:t,offset:0};let h=Math.max(n.left,Math.min(n.right,e));if(i.nodeType==3)return qh(i,h,s);if(l&&i.contentEditable!="false")return jd(i,h,s);let m=Array.prototype.indexOf.call(t.childNodes,i)+(e>=(n.left+n.right)/2?1:0);return{node:t,offset:m}}function qh(t,e,s){let i=t.nodeValue.length,n=-1,r=1e9,o=0;for(let l=0;l<i;l++){let a=Ln(t,l,l+1).getClientRects();for(let d=0;d<a.length;d++){let u=a[d];if(u.top==u.bottom)continue;o||(o=e-u.left);let f=(u.top>s?u.top-s:s-u.bottom)-1;if(u.left-1<=e&&u.right+1>=e&&f<r){let h=e>=(u.left+u.right)/2,m=h;if((_e.chrome||_e.gecko)&&Ln(t,l).getBoundingClientRect().left==u.right&&(m=!h),f<=0)return{node:t,offset:l+(m?1:0)};n=l+(m?1:0),r=f}}}return{node:t,offset:n>-1?n:o>0?t.nodeValue.length:0}}function W0(t,e,s,i=-1){var n,r;let o=t.contentDOM.getBoundingClientRect(),l=o.top+t.viewState.paddingTop,a,{docHeight:d}=t.viewState,{x:u,y:f}=e,h=f-l;if(h<0)return 0;if(h>d)return t.state.doc.length;for(let T=t.viewState.heightOracle.textHeight/2,N=!1;a=t.elementAtHeight(h),a.type!=fs.Text;)for(;h=i>0?a.bottom+T:a.top-T,!(h>=0&&h<=d);){if(N)return s?null:0;N=!0,i=-i}f=l+h;let m=a.from;if(m<t.viewport.from)return t.viewport.from==0?0:s?null:Gh(t,o,a,u,f);if(m>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:s?null:Gh(t,o,a,u,f);let w=t.dom.ownerDocument,S=t.root.elementFromPoint?t.root:w,_=S.elementFromPoint(u,f);_&&!t.contentDOM.contains(_)&&(_=null),_||(u=Math.max(o.left+1,Math.min(o.right-1,u)),_=S.elementFromPoint(u,f),_&&!t.contentDOM.contains(_)&&(_=null));let M,L=-1;if(_&&((n=t.docView.nearest(_))===null||n===void 0?void 0:n.isEditable)!=!1){if(w.caretPositionFromPoint){let T=w.caretPositionFromPoint(u,f);T&&({offsetNode:M,offset:L}=T)}else if(w.caretRangeFromPoint){let T=w.caretRangeFromPoint(u,f);T&&({startContainer:M,startOffset:L}=T)}M&&(!t.contentDOM.contains(M)||_e.safari&&AC(M,L,u)||_e.chrome&&VC(M,L,u))&&(M=void 0),M&&(L=Math.min(vi(M),L))}if(!M||!t.docView.dom.contains(M)){let T=Et.find(t.docView,m);if(!T)return h>a.top+a.height/2?a.to:a.from;({node:M,offset:L}=jd(T.dom,u,f))}let $=t.docView.nearest(M);if(!$)return null;if($.isWidget&&((r=$.dom)===null||r===void 0?void 0:r.nodeType)==1){let T=$.dom.getBoundingClientRect();return e.y<T.top||e.y<=T.bottom&&e.x<=(T.left+T.right)/2?$.posAtStart:$.posAtEnd}else return $.localPosFromDOM(M,L)+$.posAtStart}function Gh(t,e,s,i,n){let r=Math.round((i-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&s.height>t.defaultLineHeight*1.5){let l=t.viewState.heightOracle.textHeight,a=Math.floor((n-s.top-(t.defaultLineHeight-l)*.5)/l);r+=a*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(s.from,s.to);return s.from+kd(o,r,t.state.tabSize)}function q0(t,e,s){let i,n=t;if(t.nodeType!=3||e!=(i=t.nodeValue.length))return!1;for(;;){let r=n.nextSibling;if(r){if(r.nodeName=="BR")break;return!1}else{let o=n.parentNode;if(!o||o.nodeName=="DIV")break;n=o}}return Ln(t,i-1,i).getBoundingClientRect().right>s}function AC(t,e,s){return q0(t,e,s)}function VC(t,e,s){if(e!=0)return q0(t,e,s);for(let n=t;;){let r=n.parentNode;if(!r||r.nodeType!=1||r.firstChild!=n)return!1;if(r.classList.contains("cm-line"))break;n=r}let i=t.nodeType==1?t.getBoundingClientRect():Ln(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return s-i.left>5}function Ld(t,e,s){let i=t.lineBlockAt(e);if(Array.isArray(i.type)){let n;for(let r of i.type){if(r.from>e)break;if(!(r.to<e)){if(r.from<e&&r.to>e)return r;(!n||r.type==fs.Text&&(n.type!=r.type||(s<0?r.from<e:r.to>e)))&&(n=r)}}return n||i}return i}function MC(t,e,s,i){let n=Ld(t,e.head,e.assoc||-1),r=!i||n.type!=fs.Text||!(t.lineWrapping||n.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>n.from?e.head-1:e.head);if(r){let o=t.dom.getBoundingClientRect(),l=t.textDirectionAt(n.from),a=t.posAtCoords({x:s==(l==yt.LTR)?o.right-1:o.left+1,y:(r.top+r.bottom)/2});if(a!=null)return ne.cursor(a,s?-1:1)}return ne.cursor(s?n.to:n.from,s?-1:1)}function Kh(t,e,s,i){let n=t.state.doc.lineAt(e.head),r=t.bidiSpans(n),o=t.textDirectionAt(n.from);for(let l=e,a=null;;){let d=hC(n,r,o,l,s),u=D0;if(!d){if(n.number==(s?t.state.doc.lines:1))return l;u=`
`,n=t.state.doc.line(n.number+(s?1:-1)),r=t.bidiSpans(n),d=t.visualLineSide(n,!s)}if(a){if(!a(u))return l}else{if(!i)return d;a=i(u)}l=d}}function DC(t,e,s){let i=t.state.charCategorizer(e),n=i(s);return r=>{let o=i(r);return n==vt.Space&&(n=o),n==o}}function TC(t,e,s,i){let n=e.head,r=s?1:-1;if(n==(s?t.state.doc.length:0))return ne.cursor(n,e.assoc);let o=e.goalColumn,l,a=t.contentDOM.getBoundingClientRect(),d=t.coordsAtPos(n,e.assoc||-1),u=t.documentTop;if(d)o==null&&(o=d.left-a.left),l=r<0?d.top:d.bottom;else{let m=t.viewState.lineBlockAt(n);o==null&&(o=Math.min(a.right-a.left,t.defaultCharacterWidth*(n-m.from))),l=(r<0?m.top:m.bottom)+u}let f=a.left+o,h=i??t.viewState.heightOracle.textHeight>>1;for(let m=0;;m+=10){let w=l+(h+m)*r,S=W0(t,{x:f,y:w},!1,r);if(w<a.top||w>a.bottom||(r<0?S<n:S>n)){let _=t.docView.coordsForChar(S),M=!_||w<_.top?-1:1;return ne.cursor(S,M,void 0,o)}}}function ro(t,e,s){for(;;){let i=0;for(let n of t)n.between(e-1,e+1,(r,o,l)=>{if(e>r&&e<o){let a=i||s||(e-r<o-e?-1:1);e=a<0?r:o,i=a}});if(!i)return e}}function G0(t,e){let s=null;for(let i=0;i<e.ranges.length;i++){let n=e.ranges[i],r=null;if(n.empty){let o=ro(t,n.from,0);o!=n.from&&(r=ne.cursor(o,-1))}else{let o=ro(t,n.from,-1),l=ro(t,n.to,1);(o!=n.from||l!=n.to)&&(r=ne.range(n.from==n.anchor?o:l,n.from==n.head?o:l))}r&&(s||(s=e.ranges.slice()),s[i]=r)}return s?ne.create(s,e.mainIndex):e}function Su(t,e,s){let i=ro(t.state.facet(Fo).map(n=>n(t)),s.from,e.head>s.from?-1:1);return i==s.from?s:ne.cursor(i,i<s.from?1:-1)}const Fr="";class EC{constructor(e,s){this.points=e,this.text="",this.lineSeparator=s.facet(Ze.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Fr}readRange(e,s){if(!e)return this;let i=e.parentNode;for(let n=e;;){this.findPointBefore(i,n);let r=this.text.length;this.readNode(n);let o=n.nextSibling;if(o==s)break;let l=at.get(n),a=at.get(o);(l&&a?l.breakAfter:(l?l.breakAfter:ta(n))||ta(o)&&(n.nodeName!="BR"||n.cmIgnore)&&this.text.length>r)&&!PC(o,s)&&this.lineBreak(),n=o}return this.findPointBefore(i,s),this}readTextNode(e){let s=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,s.length));for(let i=0,n=this.lineSeparator?null:/\r\n?|\n/g;;){let r=-1,o=1,l;if(this.lineSeparator?(r=s.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(l=n.exec(s))&&(r=l.index,o=l[0].length),this.append(s.slice(i,r<0?s.length:r)),r<0)break;if(this.lineBreak(),o>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=o-1);i=r+o}}readNode(e){if(e.cmIgnore)return;let s=at.get(e),i=s&&s.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let n=i.iter();!n.next().done;)n.lineBreak?this.lineBreak():this.append(n.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,s){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==s&&(i.pos=this.text.length)}findPointInside(e,s){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+($C(e,i.node,i.offset)?s:0))}}function $C(t,e,s){for(;;){if(!e||s<vi(e))return!1;if(e==t)return!0;s=jn(e)+1,e=e.parentNode}}function PC(t,e){let s;for(;!(t==e||!t);t=t.nextSibling){let i=at.get(t);if(!(i?.isWidget||t.cmIgnore))return!1;i&&(s||(s=[])).push(i)}if(s)for(let i of s){let n=i.overrideDOMText;if(n?.length)return!1}return!0}class Jh{constructor(e,s){this.node=e,this.offset=s,this.pos=-1}}class OC{constructor(e,s,i,n){this.typeOver=n,this.bounds=null,this.text="",this.domChanged=s>-1;let{impreciseHead:r,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&s>-1)this.newSel=null;else if(s>-1&&(this.bounds=e.docView.domBoundsAround(s,i,0))){let l=r||o?[]:jC(e),a=new EC(l,e.state);a.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=a.text,this.newSel=LC(l,this.bounds.from)}else{let l=e.observer.selectionRange,a=r&&r.node==l.focusNode&&r.offset==l.focusOffset||!Md(e.contentDOM,l.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(l.focusNode,l.focusOffset),d=o&&o.node==l.anchorNode&&o.offset==l.anchorOffset||!Md(e.contentDOM,l.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(l.anchorNode,l.anchorOffset),u=e.viewport;if((_e.ios||_e.chrome)&&e.state.selection.main.empty&&a!=d&&(u.from>0||u.to<e.state.doc.length)){let f=Math.min(a,d),h=Math.max(a,d),m=u.from-f,w=u.to-h;(m==0||m==1||f==0)&&(w==0||w==-1||h==e.state.doc.length)&&(a=0,d=e.state.doc.length)}this.newSel=ne.single(d,a)}}}function K0(t,e){let s,{newSel:i}=e,n=t.state.selection.main,r=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:l}=e.bounds,a=n.from,d=null;(r===8||_e.android&&e.text.length<l-o)&&(a=n.to,d="end");let u=J0(t.state.doc.sliceString(o,l,Fr),e.text,a-o,d);u&&(_e.chrome&&r==13&&u.toB==u.from+2&&e.text.slice(u.from,u.toB)==Fr+Fr&&u.toB--,s={from:o+u.from,to:o+u.toA,insert:tt.of(e.text.slice(u.from,u.toB).split(Fr))})}else i&&(!t.hasFocus&&t.state.facet(Ei)||i.main.eq(n))&&(i=null);if(!s&&!i)return!1;if(!s&&e.typeOver&&!n.empty&&i&&i.main.empty?s={from:n.from,to:n.to,insert:t.state.doc.slice(n.from,n.to)}:(_e.mac||_e.android)&&s&&s.from==s.to&&s.from==n.head-1&&/^\. ?$/.test(s.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(i&&s.insert.length==2&&(i=ne.single(i.main.anchor-1,i.main.head-1)),s={from:s.from,to:s.to,insert:tt.of([s.insert.toString().replace("."," ")])}):s&&s.from>=n.from&&s.to<=n.to&&(s.from!=n.from||s.to!=n.to)&&n.to-n.from-(s.to-s.from)<=4?s={from:n.from,to:n.to,insert:t.state.doc.slice(n.from,s.from).append(s.insert).append(t.state.doc.slice(s.to,n.to))}:_e.chrome&&s&&s.from==s.to&&s.from==n.head&&s.insert.toString()==`
 `&&t.lineWrapping&&(i&&(i=ne.single(i.main.anchor-1,i.main.head-1)),s={from:n.from,to:n.to,insert:tt.of([" "])}),s)return jc(t,s,i,r);if(i&&!i.main.eq(n)){let o=!1,l="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),l=t.inputState.lastSelectionOrigin,l=="select.pointer"&&(i=G0(t.state.facet(Fo).map(a=>a(t)),i))),t.dispatch({selection:i,scrollIntoView:o,userEvent:l}),!0}else return!1}function jc(t,e,s,i=-1){if(_e.ios&&t.inputState.flushIOSKey(e))return!0;let n=t.state.selection.main;if(_e.android&&(e.to==n.to&&(e.from==n.from||e.from==n.from-1&&t.state.sliceDoc(e.from,n.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&ar(t.contentDOM,"Enter",13)||(e.from==n.from-1&&e.to==n.to&&e.insert.length==0||i==8&&e.insert.length<e.to-e.from&&e.to>n.head)&&ar(t.contentDOM,"Backspace",8)||e.from==n.from&&e.to==n.to+1&&e.insert.length==0&&ar(t.contentDOM,"Delete",46)))return!0;let r=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let o,l=()=>o||(o=RC(t,e,s));return t.state.facet(O0).some(a=>a(t,e.from,e.to,r,l))||t.dispatch(l()),!0}function RC(t,e,s){let i,n=t.state,r=n.selection.main,o=-1;if(e.from==e.to&&e.from<r.from||e.from>r.to){let a=e.from<r.from?-1:1,d=a<0?r.from:r.to,u=ro(n.facet(Fo).map(f=>f(t)),d,a);e.from==u&&(o=u)}if(o>-1)i={changes:e,selection:ne.cursor(e.from+e.insert.length,-1)};else if(e.from>=r.from&&e.to<=r.to&&e.to-e.from>=(r.to-r.from)/3&&(!s||s.main.empty&&s.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let a=r.from<e.from?n.sliceDoc(r.from,e.from):"",d=r.to>e.to?n.sliceDoc(e.to,r.to):"";i=n.replaceSelection(t.state.toText(a+e.insert.sliceString(0,void 0,t.state.lineBreak)+d))}else{let a=n.changes(e),d=s&&s.main.to<=a.newLength?s.main:void 0;if(n.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=r.to&&e.to>=r.to-10){let u=t.state.sliceDoc(e.from,e.to),f,h=s&&H0(t,s.main.head);if(h){let S=e.insert.length-(e.to-e.from);f={from:h.from,to:h.to-S}}else f=t.state.doc.lineAt(r.head);let m=r.to-e.to,w=r.to-r.from;i=n.changeByRange(S=>{if(S.from==r.from&&S.to==r.to)return{changes:a,range:d||S.map(a)};let _=S.to-m,M=_-u.length;if(S.to-S.from!=w||t.state.sliceDoc(M,_)!=u||S.to>=f.from&&S.from<=f.to)return{range:S};let L=n.changes({from:M,to:_,insert:e.insert}),$=S.to-r.to;return{changes:L,range:d?ne.range(Math.max(0,d.anchor+$),Math.max(0,d.head+$)):S.map(L)}})}else i={changes:a,selection:d&&n.selection.replaceRange(d)}}let l="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,l+=".compose",t.inputState.compositionFirstChange&&(l+=".start",t.inputState.compositionFirstChange=!1)),n.update(i,{userEvent:l,scrollIntoView:!0})}function J0(t,e,s,i){let n=Math.min(t.length,e.length),r=0;for(;r<n&&t.charCodeAt(r)==e.charCodeAt(r);)r++;if(r==n&&t.length==e.length)return null;let o=t.length,l=e.length;for(;o>0&&l>0&&t.charCodeAt(o-1)==e.charCodeAt(l-1);)o--,l--;if(i=="end"){let a=Math.max(0,r-Math.min(o,l));s-=o+a-r}if(o<r&&t.length<e.length){let a=s<=r&&s>=o?r-s:0;r-=a,l=r+(l-o),o=r}else if(l<r){let a=s<=r&&s>=l?r-s:0;r-=a,o=r+(o-l),l=r}return{from:r,toA:o,toB:l}}function jC(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:s,anchorOffset:i,focusNode:n,focusOffset:r}=t.observer.selectionRange;return s&&(e.push(new Jh(s,i)),(n!=s||r!=i)&&e.push(new Jh(n,r))),e}function LC(t,e){if(t.length==0)return null;let s=t[0].pos,i=t.length==2?t[1].pos:s;return s>-1&&i>-1?ne.single(s+e,i+e):null}class BC{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,_e.safari&&e.contentDOM.addEventListener("input",()=>null),_e.gecko&&e_(e.contentDOM.ownerDocument)}handleEvent(e){!qC(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,s){let i=this.handlers[e];if(i){for(let n of i.observers)n(this.view,s);for(let n of i.handlers){if(s.defaultPrevented)break;if(n(this.view,s)){s.preventDefault();break}}}}ensureHandlers(e){let s=IC(e),i=this.handlers,n=this.view.contentDOM;for(let r in s)if(r!="scroll"){let o=!s[r].handlers.length,l=i[r];l&&o!=!l.handlers.length&&(n.removeEventListener(r,this.handleEvent),l=null),l||n.addEventListener(r,this.handleEvent,{passive:o})}for(let r in i)r!="scroll"&&!s[r]&&n.removeEventListener(r,this.handleEvent);this.handlers=s}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&X0.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),_e.android&&_e.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let s;return _e.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((s=Y0.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||UC.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=s||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let s=this.pendingIOSKey;return!s||s.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,ar(this.view.contentDOM,s.key,s.keyCode,s instanceof KeyboardEvent?s:void 0))}ignoreDuringComposition(e){return!/^key/.test(e.type)||e.synthetic?!1:this.composing>0?!0:_e.safari&&!_e.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function Yh(t,e){return(s,i)=>{try{return e.call(t,i,s)}catch(n){ys(s.state,n)}}}function IC(t){let e=Object.create(null);function s(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of t){let n=i.spec,r=n&&n.plugin.domEventHandlers,o=n&&n.plugin.domEventObservers;if(r)for(let l in r){let a=r[l];a&&s(l).handlers.push(Yh(i.value,a))}if(o)for(let l in o){let a=o[l];a&&s(l).observers.push(Yh(i.value,a))}}for(let i in Xs)s(i).handlers.push(Xs[i]);for(let i in Ls)s(i).observers.push(Ls[i]);return e}const Y0=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],UC="dthko",X0=[16,17,18,20,91,92,224,225],ul=6;function dl(t){return Math.max(0,t)*.7+8}function NC(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class zC{constructor(e,s,i,n){this.view=e,this.startEvent=s,this.style=i,this.mustSelect=n,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=s,this.scrollParents=Y4(e.contentDOM),this.atoms=e.state.facet(Fo).map(o=>o(e));let r=e.contentDOM.ownerDocument;r.addEventListener("mousemove",this.move=this.move.bind(this)),r.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=s.shiftKey,this.multiple=e.state.facet(Ze.allowMultipleSelections)&&FC(e,s),this.dragging=WC(e,s)&&ey(s)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&NC(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let s=0,i=0,n=0,r=0,o=this.view.win.innerWidth,l=this.view.win.innerHeight;this.scrollParents.x&&({left:n,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:r,bottom:l}=this.scrollParents.y.getBoundingClientRect());let a=Rc(this.view);e.clientX-a.left<=n+ul?s=-dl(n-e.clientX):e.clientX+a.right>=o-ul&&(s=dl(e.clientX-o)),e.clientY-a.top<=r+ul?i=-dl(r-e.clientY):e.clientY+a.bottom>=l-ul&&(i=dl(e.clientY-l)),this.setScrollSpeed(s,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,s){this.scrollSpeed={x:e,y:s},e||s?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:s}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),s&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=s,s=0),(e||s)&&this.view.win.scrollBy(e,s),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:s}=this,i=G0(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(s.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(s=>s.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function FC(t,e){let s=t.state.facet(T0);return s.length?s[0](e):_e.mac?e.metaKey:e.ctrlKey}function HC(t,e){let s=t.state.facet(E0);return s.length?s[0](e):_e.mac?!e.altKey:!e.ctrlKey}function WC(t,e){let{main:s}=t.state.selection;if(s.empty)return!1;let i=So(t.root);if(!i||i.rangeCount==0)return!0;let n=i.getRangeAt(0).getClientRects();for(let r=0;r<n.length;r++){let o=n[r];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function qC(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let s=e.target,i;s!=t.contentDOM;s=s.parentNode)if(!s||s.nodeType==11||(i=at.get(s))&&i.ignoreEvent(e))return!1;return!0}const Xs=Object.create(null),Ls=Object.create(null),Q0=_e.ie&&_e.ie_version<15||_e.ios&&_e.webkit_version<604;function GC(t){let e=t.dom.parentNode;if(!e)return;let s=e.appendChild(document.createElement("textarea"));s.style.cssText="position: fixed; left: -10000px; top: 10px",s.focus(),setTimeout(()=>{t.focus(),s.remove(),Z0(t,s.value)},50)}function Ba(t,e,s){for(let i of t.facet(e))s=i(s,t);return s}function Z0(t,e){e=Ba(t.state,$c,e);let{state:s}=t,i,n=1,r=s.toText(e),o=r.lines==s.selection.ranges.length;if(Bd!=null&&s.selection.ranges.every(a=>a.empty)&&Bd==r.toString()){let a=-1;i=s.changeByRange(d=>{let u=s.doc.lineAt(d.from);if(u.from==a)return{range:d};a=u.from;let f=s.toText((o?r.line(n++).text:e)+s.lineBreak);return{changes:{from:u.from,insert:f},range:ne.cursor(d.from+f.length)}})}else o?i=s.changeByRange(a=>{let d=r.line(n++);return{changes:{from:a.from,to:a.to,insert:d.text},range:ne.cursor(a.from+d.length)}}):i=s.replaceSelection(r);t.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}Ls.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};Xs.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);Ls.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};Ls.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};Xs.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let s=null;for(let i of t.state.facet($0))if(s=i(t,e),s)break;if(!s&&e.button==0&&(s=YC(t,e)),s){let i=!t.hasFocus;t.inputState.startMouseSelection(new zC(t,e,s,i)),i&&t.observer.ignore(()=>{h0(t.contentDOM);let r=t.root.activeElement;r&&!r.contains(t.contentDOM)&&r.blur()});let n=t.inputState.mouseSelection;if(n)return n.start(e),n.dragging===!1}else t.inputState.setSelectionOrigin("select.pointer");return!1};function Xh(t,e,s,i){if(i==1)return ne.cursor(e,s);if(i==2)return SC(t.state,e,s);{let n=Et.find(t.docView,e),r=t.state.doc.lineAt(n?n.posAtEnd:e),o=n?n.posAtStart:r.from,l=n?n.posAtEnd:r.to;return l<t.state.doc.length&&l==r.to&&l++,ne.range(o,l)}}let Qh=(t,e,s)=>e>=s.top&&e<=s.bottom&&t>=s.left&&t<=s.right;function KC(t,e,s,i){let n=Et.find(t.docView,e);if(!n)return 1;let r=e-n.posAtStart;if(r==0)return 1;if(r==n.length)return-1;let o=n.coordsAt(r,-1);if(o&&Qh(s,i,o))return-1;let l=n.coordsAt(r,1);return l&&Qh(s,i,l)?1:o&&o.bottom>=i?-1:1}function Zh(t,e){let s=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:s,bias:KC(t,s,e.clientX,e.clientY)}}const JC=_e.ie&&_e.ie_version<=11;let ep=null,tp=0,sp=0;function ey(t){if(!JC)return t.detail;let e=ep,s=sp;return ep=t,sp=Date.now(),tp=!e||s>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(tp+1)%3:1}function YC(t,e){let s=Zh(t,e),i=ey(e),n=t.state.selection;return{update(r){r.docChanged&&(s.pos=r.changes.mapPos(s.pos),n=n.map(r.changes))},get(r,o,l){let a=Zh(t,r),d,u=Xh(t,a.pos,a.bias,i);if(s.pos!=a.pos&&!o){let f=Xh(t,s.pos,s.bias,i),h=Math.min(f.from,u.from),m=Math.max(f.to,u.to);u=h<u.from?ne.range(h,m):ne.range(m,h)}return o?n.replaceRange(n.main.extend(u.from,u.to)):l&&i==1&&n.ranges.length>1&&(d=XC(n,a.pos))?d:l?n.addRange(u):ne.create([u])}}}function XC(t,e){for(let s=0;s<t.ranges.length;s++){let{from:i,to:n}=t.ranges[s];if(i<=e&&n>=e)return ne.create(t.ranges.slice(0,s).concat(t.ranges.slice(s+1)),t.mainIndex==s?0:t.mainIndex-(t.mainIndex>s?1:0))}return null}Xs.dragstart=(t,e)=>{let{selection:{main:s}}=t.state;if(e.target.draggable){let n=t.docView.nearest(e.target);if(n&&n.isWidget){let r=n.posAtStart,o=r+n.length;(r>=s.to||o<=s.from)&&(s=ne.range(r,o))}}let{inputState:i}=t;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=s,e.dataTransfer&&(e.dataTransfer.setData("Text",Ba(t.state,Pc,t.state.sliceDoc(s.from,s.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Xs.dragend=t=>(t.inputState.draggedContent=null,!1);function ip(t,e,s,i){if(s=Ba(t.state,$c,s),!s)return;let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:r}=t.inputState,o=i&&r&&HC(t,e)?{from:r.from,to:r.to}:null,l={from:n,insert:s},a=t.state.changes(o?[o,l]:l);t.focus(),t.dispatch({changes:a,selection:{anchor:a.mapPos(n,-1),head:a.mapPos(n,1)},userEvent:o?"move.drop":"input.drop"}),t.inputState.draggedContent=null}Xs.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let s=e.dataTransfer.files;if(s&&s.length){let i=Array(s.length),n=0,r=()=>{++n==s.length&&ip(t,e,i.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<s.length;o++){let l=new FileReader;l.onerror=r,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(i[o]=l.result),r()},l.readAsText(s[o])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return ip(t,e,i,!0),!0}return!1};Xs.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let s=Q0?null:e.clipboardData;return s?(Z0(t,s.getData("text/plain")||s.getData("text/uri-list")),!0):(GC(t),!1)};function QC(t,e){let s=t.dom.parentNode;if(!s)return;let i=s.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),t.focus()},50)}function ZC(t){let e=[],s=[],i=!1;for(let n of t.selection.ranges)n.empty||(e.push(t.sliceDoc(n.from,n.to)),s.push(n));if(!e.length){let n=-1;for(let{from:r}of t.selection.ranges){let o=t.doc.lineAt(r);o.number>n&&(e.push(o.text),s.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),n=o.number}i=!0}return{text:Ba(t,Pc,e.join(t.lineBreak)),ranges:s,linewise:i}}let Bd=null;Xs.copy=Xs.cut=(t,e)=>{let{text:s,ranges:i,linewise:n}=ZC(t.state);if(!s&&!n)return!1;Bd=n?s:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let r=Q0?null:e.clipboardData;return r?(r.clearData(),r.setData("text/plain",s),!0):(QC(t,s),!1)};const ty=Ii.define();function sy(t,e){let s=[];for(let i of t.facet(R0)){let n=i(t,e);n&&s.push(n)}return s.length?t.update({effects:s,annotations:ty.of(!0)}):null}function iy(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let s=sy(t.state,e);s?t.dispatch(s):t.update([])}},10)}Ls.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),iy(t)};Ls.blur=t=>{t.observer.clearSelectionRange(),iy(t)};Ls.compositionstart=Ls.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};Ls.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,_e.chrome&&_e.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};Ls.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};Xs.beforeinput=(t,e)=>{var s,i;if(e.inputType=="insertReplacementText"&&t.observer.editContext){let r=(s=e.dataTransfer)===null||s===void 0?void 0:s.getData("text/plain"),o=e.getTargetRanges();if(r&&o.length){let l=o[0],a=t.posAtDOM(l.startContainer,l.startOffset),d=t.posAtDOM(l.endContainer,l.endOffset);return jc(t,{from:a,to:d,insert:t.state.toText(r)},null),!0}}let n;if(_e.chrome&&_e.android&&(n=Y0.find(r=>r.inputType==e.inputType))&&(t.observer.delayAndroidKey(n.key,n.keyCode),n.key=="Backspace"||n.key=="Delete")){let r=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>r+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return _e.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),_e.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>Ls.compositionend(t,e),20),!1};const np=new Set;function e_(t){np.has(t)||(np.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const rp=["pre-wrap","normal","pre-line","break-spaces"];let vr=!1;function op(){vr=!1}class t_{constructor(e){this.lineWrapping=e,this.doc=tt.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,s){let i=this.doc.lineAt(s).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((s-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return rp.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let s=!1;for(let i=0;i<e.length;i++){let n=e[i];n<0?i++:this.heightSamples[Math.floor(n*10)]||(s=!0,this.heightSamples[Math.floor(n*10)]=!0)}return s}refresh(e,s,i,n,r,o){let l=rp.indexOf(e)>-1,a=Math.round(s)!=Math.round(this.lineHeight)||this.lineWrapping!=l;if(this.lineWrapping=l,this.lineHeight=s,this.charWidth=i,this.textHeight=n,this.lineLength=r,a){this.heightSamples={};for(let d=0;d<o.length;d++){let u=o[d];u<0?d++:this.heightSamples[Math.floor(u*10)]=!0}}return a}}class s_{constructor(e,s){this.from=e,this.heights=s,this.index=0}get more(){return this.index<this.heights.length}}class fi{constructor(e,s,i,n,r){this.from=e,this.length=s,this.top=i,this.height=n,this._content=r}get type(){return typeof this._content=="number"?fs.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof an?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let s=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new fi(this.from,this.length+e.length,this.top,this.height+e.height,s)}}var mt=(function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t})(mt||(mt={}));const Ll=.001;class hs{constructor(e,s,i=2){this.length=e,this.height=s,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>Ll&&(vr=!0),this.height=e)}replace(e,s,i){return hs.of(i)}decomposeLeft(e,s){s.push(this)}decomposeRight(e,s){s.push(this)}applyChanges(e,s,i,n){let r=this,o=i.doc;for(let l=n.length-1;l>=0;l--){let{fromA:a,toA:d,fromB:u,toB:f}=n[l],h=r.lineAt(a,mt.ByPosNoHeight,i.setDoc(s),0,0),m=h.to>=d?h:r.lineAt(d,mt.ByPosNoHeight,i,0,0);for(f+=m.to-d,d=m.to;l>0&&h.from<=n[l-1].toA;)a=n[l-1].fromA,u=n[l-1].fromB,l--,a<h.from&&(h=r.lineAt(a,mt.ByPosNoHeight,i,0,0));u+=h.from-a,a=h.from;let w=Lc.build(i.setDoc(o),e,u,f);r=na(r,r.replace(a,d,w))}return r.updateHeight(i,0)}static empty(){return new Ss(0,0)}static of(e){if(e.length==1)return e[0];let s=0,i=e.length,n=0,r=0;for(;;)if(s==i)if(n>r*2){let l=e[s-1];l.break?e.splice(--s,1,l.left,null,l.right):e.splice(--s,1,l.left,l.right),i+=1+l.break,n-=l.size}else if(r>n*2){let l=e[i];l.break?e.splice(i,1,l.left,null,l.right):e.splice(i,1,l.left,l.right),i+=2+l.break,r-=l.size}else break;else if(n<r){let l=e[s++];l&&(n+=l.size)}else{let l=e[--i];l&&(r+=l.size)}let o=0;return e[s-1]==null?(o=1,s--):e[s]==null&&(o=1,i++),new i_(hs.of(e.slice(0,s)),o,hs.of(e.slice(i)))}}function na(t,e){return t==e?t:(t.constructor!=e.constructor&&(vr=!0),e)}hs.prototype.size=1;class ny extends hs{constructor(e,s,i){super(e,s),this.deco=i}blockAt(e,s,i,n){return new fi(n,this.length,i,this.height,this.deco||0)}lineAt(e,s,i,n,r){return this.blockAt(0,i,n,r)}forEachLine(e,s,i,n,r,o){e<=r+this.length&&s>=r&&o(this.blockAt(0,i,n,r))}updateHeight(e,s=0,i=!1,n){return n&&n.from<=s&&n.more&&this.setHeight(n.heights[n.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Ss extends ny{constructor(e,s){super(e,s,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,s,i,n){return new fi(n,this.length,i,this.height,this.breaks)}replace(e,s,i){let n=i[0];return i.length==1&&(n instanceof Ss||n instanceof Nt&&n.flags&4)&&Math.abs(this.length-n.length)<10?(n instanceof Nt?n=new Ss(n.length,this.height):n.height=this.height,this.outdated||(n.outdated=!1),n):hs.of(i)}updateHeight(e,s=0,i=!1,n){return n&&n.from<=s&&n.more?this.setHeight(n.heights[n.index++]):(i||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Nt extends hs{constructor(e){super(e,0)}heightMetrics(e,s){let i=e.doc.lineAt(s).number,n=e.doc.lineAt(s+this.length).number,r=n-i+1,o,l=0;if(e.lineWrapping){let a=Math.min(this.height,e.lineHeight*r);o=a/r,this.length>r+1&&(l=(this.height-a)/(this.length-r-1))}else o=this.height/r;return{firstLine:i,lastLine:n,perLine:o,perChar:l}}blockAt(e,s,i,n){let{firstLine:r,lastLine:o,perLine:l,perChar:a}=this.heightMetrics(s,n);if(s.lineWrapping){let d=n+(e<s.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),u=s.doc.lineAt(d),f=l+u.length*a,h=Math.max(i,e-f/2);return new fi(u.from,u.length,h,f,0)}else{let d=Math.max(0,Math.min(o-r,Math.floor((e-i)/l))),{from:u,length:f}=s.doc.line(r+d);return new fi(u,f,i+l*d,l,0)}}lineAt(e,s,i,n,r){if(s==mt.ByHeight)return this.blockAt(e,i,n,r);if(s==mt.ByPosNoHeight){let{from:m,to:w}=i.doc.lineAt(e);return new fi(m,w-m,0,0,0)}let{firstLine:o,perLine:l,perChar:a}=this.heightMetrics(i,r),d=i.doc.lineAt(e),u=l+d.length*a,f=d.number-o,h=n+l*f+a*(d.from-r-f);return new fi(d.from,d.length,Math.max(n,Math.min(h,n+this.height-u)),u,0)}forEachLine(e,s,i,n,r,o){e=Math.max(e,r),s=Math.min(s,r+this.length);let{firstLine:l,perLine:a,perChar:d}=this.heightMetrics(i,r);for(let u=e,f=n;u<=s;){let h=i.doc.lineAt(u);if(u==e){let w=h.number-l;f+=a*w+d*(e-r-w)}let m=a+d*h.length;o(new fi(h.from,h.length,f,m,0)),f+=m,u=h.to+1}}replace(e,s,i){let n=this.length-s;if(n>0){let r=i[i.length-1];r instanceof Nt?i[i.length-1]=new Nt(r.length+n):i.push(null,new Nt(n-1))}if(e>0){let r=i[0];r instanceof Nt?i[0]=new Nt(e+r.length):i.unshift(new Nt(e-1),null)}return hs.of(i)}decomposeLeft(e,s){s.push(new Nt(e-1),null)}decomposeRight(e,s){s.push(null,new Nt(this.length-e-1))}updateHeight(e,s=0,i=!1,n){let r=s+this.length;if(n&&n.from<=s+this.length&&n.more){let o=[],l=Math.max(s,n.from),a=-1;for(n.from>s&&o.push(new Nt(n.from-s-1).updateHeight(e,s));l<=r&&n.more;){let u=e.doc.lineAt(l).length;o.length&&o.push(null);let f=n.heights[n.index++];a==-1?a=f:Math.abs(f-a)>=Ll&&(a=-2);let h=new Ss(u,f);h.outdated=!1,o.push(h),l+=u+1}l<=r&&o.push(null,new Nt(r-l).updateHeight(e,l));let d=hs.of(o);return(a<0||Math.abs(d.height-this.height)>=Ll||Math.abs(a-this.heightMetrics(e,s).perLine)>=Ll)&&(vr=!0),na(this,d)}else(i||this.outdated)&&(this.setHeight(e.heightForGap(s,s+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class i_ extends hs{constructor(e,s,i){super(e.length+s+i.length,e.height+i.height,s|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,s,i,n){let r=i+this.left.height;return e<r?this.left.blockAt(e,s,i,n):this.right.blockAt(e,s,r,n+this.left.length+this.break)}lineAt(e,s,i,n,r){let o=n+this.left.height,l=r+this.left.length+this.break,a=s==mt.ByHeight?e<o:e<l,d=a?this.left.lineAt(e,s,i,n,r):this.right.lineAt(e,s,i,o,l);if(this.break||(a?d.to<l:d.from>l))return d;let u=s==mt.ByPosNoHeight?mt.ByPosNoHeight:mt.ByPos;return a?d.join(this.right.lineAt(l,u,i,o,l)):this.left.lineAt(l,u,i,n,r).join(d)}forEachLine(e,s,i,n,r,o){let l=n+this.left.height,a=r+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,s,i,n,r,o),s>=a&&this.right.forEachLine(e,s,i,l,a,o);else{let d=this.lineAt(a,mt.ByPos,i,n,r);e<d.from&&this.left.forEachLine(e,d.from-1,i,n,r,o),d.to>=e&&d.from<=s&&o(d),s>d.to&&this.right.forEachLine(d.to+1,s,i,l,a,o)}}replace(e,s,i){let n=this.left.length+this.break;if(s<n)return this.balanced(this.left.replace(e,s,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-n,s-n,i));let r=[];e>0&&this.decomposeLeft(e,r);let o=r.length;for(let l of i)r.push(l);if(e>0&&lp(r,o-1),s<this.length){let l=r.length;this.decomposeRight(s,r),lp(r,l)}return hs.of(r)}decomposeLeft(e,s){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,s);s.push(this.left),this.break&&(i++,e>=i&&s.push(null)),e>i&&this.right.decomposeLeft(e-i,s)}decomposeRight(e,s){let i=this.left.length,n=i+this.break;if(e>=n)return this.right.decomposeRight(e-n,s);e<i&&this.left.decomposeRight(e,s),this.break&&e<n&&s.push(null),s.push(this.right)}balanced(e,s){return e.size>2*s.size||s.size>2*e.size?hs.of(this.break?[e,null,s]:[e,s]):(this.left=na(this.left,e),this.right=na(this.right,s),this.setHeight(e.height+s.height),this.outdated=e.outdated||s.outdated,this.size=e.size+s.size,this.length=e.length+this.break+s.length,this)}updateHeight(e,s=0,i=!1,n){let{left:r,right:o}=this,l=s+r.length+this.break,a=null;return n&&n.from<=s+r.length&&n.more?a=r=r.updateHeight(e,s,i,n):r.updateHeight(e,s,i),n&&n.from<=l+o.length&&n.more?a=o=o.updateHeight(e,l,i,n):o.updateHeight(e,l,i),a?this.balanced(r,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function lp(t,e){let s,i;t[e]==null&&(s=t[e-1])instanceof Nt&&(i=t[e+1])instanceof Nt&&t.splice(e-1,3,new Nt(s.length+1+i.length))}const n_=5;class Lc{constructor(e,s){this.pos=e,this.oracle=s,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,s){if(this.lineStart>-1){let i=Math.min(s,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof Ss?n.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new Ss(i-this.pos,-1)),this.writtenTo=i,s>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=s}point(e,s,i){if(e<s||i.heightRelevant){let n=i.widget?i.widget.estimatedHeight:0,r=i.widget?i.widget.lineBreaks:0;n<0&&(n=this.oracle.lineHeight);let o=s-e;i.block?this.addBlock(new ny(o,n,i)):(o||r||n>=n_)&&this.addLineDeco(n,r,o)}else s>e&&this.span(e,s);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:s}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=s,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Ss(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,s){let i=new Nt(s-e);return this.oracle.doc.lineAt(e).to==s&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Ss)return e;let s=new Ss(0,-1);return this.nodes.push(s),s}addBlock(e){this.enterLine();let s=e.deco;s&&s.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,s&&s.endSide>0&&(this.covering=e)}addLineDeco(e,s,i){let n=this.ensureLine();n.length+=i,n.collapsed+=i,n.widgetHeight=Math.max(n.widgetHeight,e),n.breaks+=s,this.writtenTo=this.pos=this.pos+i}finish(e){let s=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(s instanceof Ss)&&!this.isCovered?this.nodes.push(new Ss(0,-1)):(this.writtenTo<this.pos||s==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let n of this.nodes)n instanceof Ss&&n.updateHeight(this.oracle,i),i+=n?n.length:1;return this.nodes}static build(e,s,i,n){let r=new Lc(i,e);return et.spans(s,i,n,r,0),r.finish(i)}}function r_(t,e,s){let i=new o_;return et.compare(t,e,s,i,0),i.changes}class o_{constructor(){this.changes=[]}compareRange(){}comparePoint(e,s,i,n){(e<s||i&&i.heightRelevant||n&&n.heightRelevant)&&jl(e,s,this.changes,5)}}function l_(t,e){let s=t.getBoundingClientRect(),i=t.ownerDocument,n=i.defaultView||window,r=Math.max(0,s.left),o=Math.min(n.innerWidth,s.right),l=Math.max(0,s.top),a=Math.min(n.innerHeight,s.bottom);for(let d=t.parentNode;d&&d!=i.body;)if(d.nodeType==1){let u=d,f=window.getComputedStyle(u);if((u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth)&&f.overflow!="visible"){let h=u.getBoundingClientRect();r=Math.max(r,h.left),o=Math.min(o,h.right),l=Math.max(l,h.top),a=Math.min(d==t.parentNode?n.innerHeight:a,h.bottom)}d=f.position=="absolute"||f.position=="fixed"?u.offsetParent:u.parentNode}else if(d.nodeType==11)d=d.host;else break;return{left:r-s.left,right:Math.max(r,o)-s.left,top:l-(s.top+e),bottom:Math.max(l,a)-(s.top+e)}}function a_(t){let e=t.getBoundingClientRect(),s=t.ownerDocument.defaultView||window;return e.left<s.innerWidth&&e.right>0&&e.top<s.innerHeight&&e.bottom>0}function u_(t,e){let s=t.getBoundingClientRect();return{left:0,right:s.right-s.left,top:e,bottom:s.bottom-(s.top+e)}}class Cu{constructor(e,s,i,n){this.from=e,this.to=s,this.size=i,this.displaySize=n}static same(e,s){if(e.length!=s.length)return!1;for(let i=0;i<e.length;i++){let n=e[i],r=s[i];if(n.from!=r.from||n.to!=r.to||n.size!=r.size)return!1}return!0}draw(e,s){return Ie.replace({widget:new d_(this.displaySize*(s?e.scaleY:e.scaleX),s)}).range(this.from,this.to)}}class d_ extends cn{constructor(e,s){super(),this.size=e,this.vertical=s}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class ap{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=up,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=yt.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let s=e.facet(Oc).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new t_(s),this.stateDeco=e.facet(_o).filter(i=>typeof i!="function"),this.heightMap=hs.empty().applyChanges(this.stateDeco,tt.empty,this.heightOracle.setDoc(e.doc),[new Os(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Ie.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:s}=this.state.selection;for(let i=0;i<=1;i++){let n=i?s.head:s.anchor;if(!e.some(({from:r,to:o})=>n>=r&&n<=o)){let{from:r,to:o}=this.lineBlockAt(n);e.push(new cl(r,o))}}return this.viewports=e.sort((i,n)=>i.from-n.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?up:new Bc(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Hr(e,this.scaler))})}update(e,s=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(_o).filter(u=>typeof u!="function");let n=e.changedRanges,r=Os.extendWithRanges(n,r_(i,this.stateDeco,e?e.changes:Rt.empty(this.state.doc.length))),o=this.heightMap.height,l=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);op(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),r),(this.heightMap.height!=o||vr)&&(e.flags|=2),l?(this.scrollAnchorPos=e.changes.mapPos(l.from,-1),this.scrollAnchorHeight=l.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let a=r.length?this.mapViewport(this.viewport,e.changes):this.viewport;(s&&(s.range.head<a.from||s.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,s));let d=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,e.flags|=this.updateForViewport(),(d||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),s&&(this.scrollTarget=s),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(L0)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let s=e.contentDOM,i=window.getComputedStyle(s),n=this.heightOracle,r=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?yt.RTL:yt.LTR;let o=this.heightOracle.mustRefreshForWrapping(r),l=s.getBoundingClientRect(),a=o||this.mustMeasureContent||this.contentDOMHeight!=l.height;this.contentDOMHeight=l.height,this.mustMeasureContent=!1;let d=0,u=0;if(l.width&&l.height){let{scaleX:T,scaleY:N}=f0(s,l);(T>.005&&Math.abs(this.scaleX-T)>.005||N>.005&&Math.abs(this.scaleY-N)>.005)&&(this.scaleX=T,this.scaleY=N,d|=16,o=a=!0)}let f=(parseInt(i.paddingTop)||0)*this.scaleY,h=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=f||this.paddingBottom!=h)&&(this.paddingTop=f,this.paddingBottom=h,d|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(n.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,d|=16);let m=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=m&&(this.scrollAnchorHeight=-1,this.scrollTop=m),this.scrolledToBottom=m0(e.scrollDOM);let w=(this.printing?u_:l_)(s,this.paddingTop),S=w.top-this.pixelViewport.top,_=w.bottom-this.pixelViewport.bottom;this.pixelViewport=w;let M=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(M!=this.inView&&(this.inView=M,M&&(a=!0)),!this.inView&&!this.scrollTarget&&!a_(e.dom))return 0;let L=l.width;if((this.contentDOMWidth!=L||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=l.width,this.editorHeight=e.scrollDOM.clientHeight,d|=16),a){let T=e.docView.measureVisibleLineHeights(this.viewport);if(n.mustRefreshForHeights(T)&&(o=!0),o||n.lineWrapping&&Math.abs(L-this.contentDOMWidth)>n.charWidth){let{lineHeight:N,charWidth:B,textHeight:I}=e.docView.measureTextSize();o=N>0&&n.refresh(r,N,B,I,Math.max(5,L/B),T),o&&(e.docView.minWidth=0,d|=16)}S>0&&_>0?u=Math.max(S,_):S<0&&_<0&&(u=Math.min(S,_)),op();for(let N of this.viewports){let B=N.from==this.viewport.from?T:e.docView.measureVisibleLineHeights(N);this.heightMap=(o?hs.empty().applyChanges(this.stateDeco,tt.empty,this.heightOracle,[new Os(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(n,0,o,new s_(N.from,B))}vr&&(d|=2)}let $=!this.viewportIsAppropriate(this.viewport,u)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return $&&(d&2&&(d|=this.updateScaler()),this.viewport=this.getViewport(u,this.scrollTarget),d|=this.updateForViewport()),(d&2||$)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),d|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),d}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,s){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),n=this.heightMap,r=this.heightOracle,{visibleTop:o,visibleBottom:l}=this,a=new cl(n.lineAt(o-i*1e3,mt.ByHeight,r,0,0).from,n.lineAt(l+(1-i)*1e3,mt.ByHeight,r,0,0).to);if(s){let{head:d}=s.range;if(d<a.from||d>a.to){let u=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),f=n.lineAt(d,mt.ByPos,r,0,0),h;s.y=="center"?h=(f.top+f.bottom)/2-u/2:s.y=="start"||s.y=="nearest"&&d<a.from?h=f.top:h=f.bottom-u,a=new cl(n.lineAt(h-1e3/2,mt.ByHeight,r,0,0).from,n.lineAt(h+u+1e3/2,mt.ByHeight,r,0,0).to)}}return a}mapViewport(e,s){let i=s.mapPos(e.from,-1),n=s.mapPos(e.to,1);return new cl(this.heightMap.lineAt(i,mt.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(n,mt.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:s},i=0){if(!this.inView)return!0;let{top:n}=this.heightMap.lineAt(e,mt.ByPos,this.heightOracle,0,0),{bottom:r}=this.heightMap.lineAt(s,mt.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:l}=this;return(e==0||n<=o-Math.max(10,Math.min(-i,250)))&&(s==this.state.doc.length||r>=l+Math.max(10,Math.min(i,250)))&&n>o-2*1e3&&r<l+2*1e3}mapLineGaps(e,s){if(!e.length||s.empty)return e;let i=[];for(let n of e)s.touchesRange(n.from,n.to)||i.push(new Cu(s.mapPos(n.from),s.mapPos(n.to),n.size,n.displaySize));return i}ensureLineGaps(e,s){let i=this.heightOracle.lineWrapping,n=i?1e4:2e3,r=n>>1,o=n<<1;if(this.defaultTextDirection!=yt.LTR&&!i)return[];let l=[],a=(u,f,h,m)=>{if(f-u<r)return;let w=this.state.selection.main,S=[w.from];w.empty||S.push(w.to);for(let M of S)if(M>u&&M<f){a(u,M-10,h,m),a(M+10,f,h,m);return}let _=f_(e,M=>M.from>=h.from&&M.to<=h.to&&Math.abs(M.from-u)<r&&Math.abs(M.to-f)<r&&!S.some(L=>M.from<L&&M.to>L));if(!_){if(f<h.to&&s&&i&&s.visibleRanges.some($=>$.from<=f&&$.to>=f)){let $=s.moveToLineBoundary(ne.cursor(f),!1,!0).head;$>u&&(f=$)}let M=this.gapSize(h,u,f,m),L=i||M<2e6?M:2e6;_=new Cu(u,f,M,L)}l.push(_)},d=u=>{if(u.length<o||u.type!=fs.Text)return;let f=c_(u.from,u.to,this.stateDeco);if(f.total<o)return;let h=this.scrollTarget?this.scrollTarget.range.head:null,m,w;if(i){let S=n/this.heightOracle.lineLength*this.heightOracle.lineHeight,_,M;if(h!=null){let L=hl(f,h),$=((this.visibleBottom-this.visibleTop)/2+S)/u.height;_=L-$,M=L+$}else _=(this.visibleTop-u.top-S)/u.height,M=(this.visibleBottom-u.top+S)/u.height;m=fl(f,_),w=fl(f,M)}else{let S=f.total*this.heightOracle.charWidth,_=n*this.heightOracle.charWidth,M=0;if(S>2e6)for(let B of e)B.from>=u.from&&B.from<u.to&&B.size!=B.displaySize&&B.from*this.heightOracle.charWidth+M<this.pixelViewport.left&&(M=B.size-B.displaySize);let L=this.pixelViewport.left+M,$=this.pixelViewport.right+M,T,N;if(h!=null){let B=hl(f,h),I=(($-L)/2+_)/S;T=B-I,N=B+I}else T=(L-_)/S,N=($+_)/S;m=fl(f,T),w=fl(f,N)}m>u.from&&a(u.from,m,u,f),w<u.to&&a(w,u.to,u,f)};for(let u of this.viewportLines)Array.isArray(u.type)?u.type.forEach(d):d(u);return l}gapSize(e,s,i,n){let r=hl(n,i)-hl(n,s);return this.heightOracle.lineWrapping?e.height*r:n.total*this.heightOracle.charWidth*r}updateLineGaps(e){Cu.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Ie.set(e.map(s=>s.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let s=this.stateDeco;this.lineGaps.length&&(s=s.concat(this.lineGapDeco));let i=[];et.spans(s,this.viewport.from,this.viewport.to,{span(r,o){i.push({from:r,to:o})},point(){}},20);let n=0;if(i.length!=this.visibleRanges.length)n=12;else for(let r=0;r<i.length&&!(n&8);r++){let o=this.visibleRanges[r],l=i[r];(o.from!=l.from||o.to!=l.to)&&(n|=4,e&&e.mapPos(o.from,-1)==l.from&&e.mapPos(o.to,1)==l.to||(n|=8))}return this.visibleRanges=i,n}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(s=>s.from<=e&&s.to>=e)||Hr(this.heightMap.lineAt(e,mt.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(s=>s.top<=e&&s.bottom>=e)||Hr(this.heightMap.lineAt(this.scaler.fromDOM(e),mt.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let s=this.lineBlockAtHeight(e+8);return s.from>=this.viewport.from||this.viewportLines[0].top-e>200?s:this.viewportLines[0]}elementAtHeight(e){return Hr(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class cl{constructor(e,s){this.from=e,this.to=s}}function c_(t,e,s){let i=[],n=t,r=0;return et.spans(s,t,e,{span(){},point(o,l){o>n&&(i.push({from:n,to:o}),r+=o-n),n=l}},20),n<e&&(i.push({from:n,to:e}),r+=e-n),{total:r,ranges:i}}function fl({total:t,ranges:e},s){if(s<=0)return e[0].from;if(s>=1)return e[e.length-1].to;let i=Math.floor(t*s);for(let n=0;;n++){let{from:r,to:o}=e[n],l=o-r;if(i<=l)return r+i;i-=l}}function hl(t,e){let s=0;for(let{from:i,to:n}of t.ranges){if(e<=n){s+=e-i;break}s+=n-i}return s/t.total}function f_(t,e){for(let s of t)if(e(s))return s}const up={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class Bc{constructor(e,s,i){let n=0,r=0,o=0;this.viewports=i.map(({from:l,to:a})=>{let d=s.lineAt(l,mt.ByPos,e,0,0).top,u=s.lineAt(a,mt.ByPos,e,0,0).bottom;return n+=u-d,{from:l,to:a,top:d,bottom:u,domTop:0,domBottom:0}}),this.scale=(7e6-n)/(s.height-n);for(let l of this.viewports)l.domTop=o+(l.top-r)*this.scale,o=l.domBottom=l.domTop+(l.bottom-l.top),r=l.bottom}toDOM(e){for(let s=0,i=0,n=0;;s++){let r=s<this.viewports.length?this.viewports[s]:null;if(!r||e<r.top)return n+(e-i)*this.scale;if(e<=r.bottom)return r.domTop+(e-r.top);i=r.bottom,n=r.domBottom}}fromDOM(e){for(let s=0,i=0,n=0;;s++){let r=s<this.viewports.length?this.viewports[s]:null;if(!r||e<r.domTop)return i+(e-n)/this.scale;if(e<=r.domBottom)return r.top+(e-r.domTop);i=r.bottom,n=r.domBottom}}eq(e){return e instanceof Bc?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((s,i)=>s.from==e.viewports[i].from&&s.to==e.viewports[i].to):!1}}function Hr(t,e){if(e.scale==1)return t;let s=e.toDOM(t.top),i=e.toDOM(t.bottom);return new fi(t.from,t.length,s,i-s,Array.isArray(t._content)?t._content.map(n=>Hr(n,e)):t._content)}const pl=De.define({combine:t=>t.join(" ")}),Id=De.define({combine:t=>t.indexOf(!0)>-1}),Ud=on.newName(),ry=on.newName(),oy=on.newName(),ly={"&light":"."+ry,"&dark":"."+oy};function Nd(t,e,s){return new on(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,n=>{if(n=="&")return t;if(!s||!s[n])throw new RangeError(`Unsupported selector: ${n}`);return s[n]}):t+" "+i}})}const h_=Nd("."+Ud,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},ly),p_={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},_u=_e.ie&&_e.ie_version<=11;class m_{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new X4,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(s=>{for(let i of s)this.queue.push(i);(_e.ie&&_e.ie_version<=11||_e.ios&&e.composing)&&s.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&_e.android&&e.constructor.EDIT_CONTEXT!==!1&&!(_e.chrome&&_e.chrome_version<126)&&(this.editContext=new y_(e),e.state.facet(Ei)&&(e.contentDOM.editContext=this.editContext.editContext)),_u&&(this.onCharData=s=>{this.queue.push({target:s.target,type:"characterData",oldValue:s.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var s;((s=this.view.docView)===null||s===void 0?void 0:s.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(s=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),s.length>0&&s[s.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(s=>{s.length>0&&s[s.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((s,i)=>s!=e[i]))){this.gapIntersection.disconnect();for(let s of e)this.gapIntersection.observe(s);this.gaps=e}}onSelectionChange(e){let s=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,n=this.selectionRange;if(i.state.facet(Ei)?i.root.activeElement!=this.dom:!Rl(this.dom,n))return;let r=n.anchorNode&&i.docView.nearest(n.anchorNode);if(r&&r.ignoreEvent(e)){s||(this.selectionChanged=!1);return}(_e.ie&&_e.ie_version<=11||_e.android&&_e.chrome)&&!i.state.selection.main.empty&&n.focusNode&&io(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,s=So(e.root);if(!s)return!1;let i=_e.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&g_(this.view,s)||s;if(!i||this.selectionRange.eq(i))return!1;let n=Rl(this.dom,i);return n&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&Z4(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),n&&(this.selectionChanged=!0),!0)}setSelectionRange(e,s){this.selectionRange.set(e.node,e.offset,s.node,s.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,s=null;for(let i=this.dom;i;)if(i.nodeType==1)!s&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:s||(s=this.scrollTargets.slice(0,e)),s&&s.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!s&&(s=this.scrollTargets.slice(0,e)),s){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=s)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,p_),_u&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),_u&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,s){var i;if(!this.delayedAndroidKey){let n=()=>{let r=this.delayedAndroidKey;r&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=r.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&r.force&&ar(this.dom,r.key,r.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(n)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:s,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let s=-1,i=-1,n=!1;for(let r of e){let o=this.readMutation(r);o&&(o.typeOver&&(n=!0),s==-1?{from:s,to:i}=o:(s=Math.min(o.from,s),i=Math.max(o.to,i)))}return{from:s,to:i,typeOver:n}}readChange(){let{from:e,to:s,typeOver:i}=this.processRecords(),n=this.selectionChanged&&Rl(this.dom,this.selectionRange);if(e<0&&!n)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let r=new OC(this.view,e,s,i);return this.view.docView.domChanged={newSel:r.newSel?r.newSel.main:null},r}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let s=this.readChange();if(!s)return this.view.requestMeasure(),!1;let i=this.view.state,n=K0(this.view,s);return this.view.state==i&&(s.domChanged||s.newSel&&!s.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),n}readMutation(e){let s=this.view.docView.nearest(e.target);if(!s||s.ignoreMutation(e))return null;if(s.markDirty(e.type=="attributes"),e.type=="attributes"&&(s.flags|=4),e.type=="childList"){let i=dp(s,e.previousSibling||e.target.previousSibling,-1),n=dp(s,e.nextSibling||e.target.nextSibling,1);return{from:i?s.posAfter(i):s.posAtStart,to:n?s.posBefore(n):s.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:s.posAtStart,to:s.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Ei)!=e.state.facet(Ei)&&(e.view.contentDOM.editContext=e.state.facet(Ei)?this.editContext.editContext:null))}destroy(){var e,s,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(s=this.gapIntersection)===null||s===void 0||s.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function dp(t,e,s){for(;e;){let i=at.get(e);if(i&&i.parent==t)return i;let n=e.parentNode;e=n!=t.dom?n:s>0?e.nextSibling:e.previousSibling}return null}function cp(t,e){let s=e.startContainer,i=e.startOffset,n=e.endContainer,r=e.endOffset,o=t.docView.domAtPos(t.state.selection.main.anchor);return io(o.node,o.offset,n,r)&&([s,i,n,r]=[n,r,s,i]),{anchorNode:s,anchorOffset:i,focusNode:n,focusOffset:r}}function g_(t,e){if(e.getComposedRanges){let n=e.getComposedRanges(t.root)[0];if(n)return cp(t,n)}let s=null;function i(n){n.preventDefault(),n.stopImmediatePropagation(),s=n.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",i,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",i,!0),s?cp(t,s):null}class y_{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let s=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let n=e.state.selection.main,{anchor:r,head:o}=n,l=this.toEditorPos(i.updateRangeStart),a=this.toEditorPos(i.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:l,drifted:!1});let d=a-l>i.text.length;l==this.from&&r<this.from?l=r:a==this.to&&r>this.to&&(a=r);let u=J0(e.state.sliceDoc(l,a),i.text,(d?n.from:n.to)-l,d?"end":null);if(!u){let h=ne.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd));h.main.eq(n)||e.dispatch({selection:h,userEvent:"select"});return}let f={from:u.from+l,to:u.toA+l,insert:tt.of(i.text.slice(u.from,u.toB).split(`
`))};if((_e.mac||_e.android)&&f.from==o-1&&/^\. ?$/.test(i.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(f={from:l,to:a,insert:tt.of([i.text.replace("."," ")])}),this.pendingContextChange=f,!e.state.readOnly){let h=this.to-this.from+(f.to-f.from+f.insert.length);jc(e,f,ne.single(this.toEditorPos(i.selectionStart,h),this.toEditorPos(i.selectionEnd,h)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),f.from<f.to&&!f.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(s.text.slice(Math.max(0,i.updateRangeStart-1),Math.min(s.text.length,i.updateRangeStart+1)))&&this.handlers.compositionend(i)},this.handlers.characterboundsupdate=i=>{let n=[],r=null;for(let o=this.toEditorPos(i.rangeStart),l=this.toEditorPos(i.rangeEnd);o<l;o++){let a=e.coordsForChar(o);r=a&&new DOMRect(a.left,a.top,a.right-a.left,a.bottom-a.top)||r||new DOMRect,n.push(r)}s.updateCharacterBounds(i.rangeStart,n)},this.handlers.textformatupdate=i=>{let n=[];for(let r of i.getTextFormats()){let o=r.underlineStyle,l=r.underlineThickness;if(!/none/i.test(o)&&!/none/i.test(l)){let a=this.toEditorPos(r.rangeStart),d=this.toEditorPos(r.rangeEnd);if(a<d){let u=`text-decoration: underline ${/^[a-z]/.test(o)?o+" ":o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${/thin/i.test(l)?1:2}px`;n.push(Ie.mark({attributes:{style:u}}).range(a,d))}}}e.dispatch({effects:I0.of(Ie.set(n))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:i}=this.composing;this.composing=null,i&&this.reset(e.state)}};for(let i in this.handlers)s.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let n=So(i.root);n&&n.rangeCount&&this.editContext.updateSelectionBounds(n.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let s=0,i=!1,n=this.pendingContextChange;return e.changes.iterChanges((r,o,l,a,d)=>{if(i)return;let u=d.length-(o-r);if(n&&o>=n.to)if(n.from==r&&n.to==o&&n.insert.eq(d)){n=this.pendingContextChange=null,s+=u,this.to+=u;return}else n=null,this.revertPending(e.state);if(r+=s,o+=s,o<=this.from)this.from+=u,this.to+=u;else if(r<this.to){if(r<this.from||o>this.to||this.to-this.from+d.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(r),this.toContextPos(o),d.toString()),this.to+=u}s+=u}),n&&!i&&this.revertPending(e.state),!i}update(e){let s=this.pendingContextChange,i=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(i.from,i.to)&&e.transactions.some(n=>!n.isUserEvent("input.type")&&n.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||s)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:s}=e.selection.main;this.from=Math.max(0,s-1e4),this.to=Math.min(e.doc.length,s+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let s=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(s.from),this.toContextPos(s.from+s.insert.length),e.doc.sliceString(s.from,s.to))}setSelection(e){let{main:s}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,s.anchor))),n=this.toContextPos(s.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=n)&&this.editContext.updateSelection(i,n)}rangeIsValid(e){let{head:s}=e.selection.main;return!(this.from>0&&s-this.from<500||this.to<e.doc.length&&this.to-s<500||this.to-this.from>1e4*3)}toEditorPos(e,s=this.to-this.from){e=Math.min(e,s);let i=this.composing;return i&&i.drifted?i.editorBase+(e-i.contextBase):e+this.from}toContextPos(e){let s=this.composing;return s&&s.drifted?s.contextBase+(e-s.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class Me{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var s;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(n=>n.forEach(r=>i(r,this)))||(n=>this.update(n)),this.dispatch=this.dispatch.bind(this),this._root=e.root||Q4(e.parent)||document,this.viewState=new ap(e.state||Ze.create(e)),e.scrollTo&&e.scrollTo.is(al)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Yn).map(n=>new ku(n));for(let n of this.plugins)n.update(this);this.observer=new m_(this),this.inputState=new BC(this),this.inputState.ensureHandlers(this.plugins),this.docView=new Fh(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((s=document.fonts)===null||s===void 0)&&s.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let s=e.length==1&&e[0]instanceof jt?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(s,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let s=!1,i=!1,n,r=this.state;for(let h of e){if(h.startState!=r)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");r=h.state}if(this.destroyed){this.viewState.state=r;return}let o=this.hasFocus,l=0,a=null;e.some(h=>h.annotation(ty))?(this.inputState.notifiedFocused=o,l=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,a=sy(r,o),a||(l=1));let d=this.observer.delayedAndroidKey,u=null;if(d?(this.observer.clearDelayedAndroidKey(),u=this.observer.readChange(),(u&&!this.state.doc.eq(r.doc)||!this.state.selection.eq(r.selection))&&(u=null)):this.observer.clear(),r.facet(Ze.phrases)!=this.state.facet(Ze.phrases))return this.setState(r);n=ia.create(this,r,e),n.flags|=l;let f=this.viewState.scrollTarget;try{this.updateState=2;for(let h of e){if(f&&(f=f.map(h.changes)),h.scrollIntoView){let{main:m}=h.state.selection;f=new ur(m.empty?m:ne.cursor(m.head,m.head>m.anchor?-1:1))}for(let m of h.effects)m.is(al)&&(f=m.value.clip(this.state))}this.viewState.update(n,f),this.bidiCache=ra.update(this.bidiCache,n.changes),n.empty||(this.updatePlugins(n),this.inputState.update(n)),s=this.docView.update(n),this.state.facet(zr)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(s,e.some(h=>h.isUserEvent("select.pointer")))}finally{this.updateState=0}if(n.startState.facet(pl)!=n.state.facet(pl)&&(this.viewState.mustMeasureContent=!0),(s||i||f||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),s&&this.docViewUpdate(),!n.empty)for(let h of this.state.facet(Rd))try{h(n)}catch(m){ys(this.state,m,"update listener")}(a||u)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),u&&!K0(this,u)&&d.force&&ar(this.contentDOM,d.key,d.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let s=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new ap(e),this.plugins=e.facet(Yn).map(i=>new ku(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new Fh(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}s&&this.focus(),this.requestMeasure()}updatePlugins(e){let s=e.startState.facet(Yn),i=e.state.facet(Yn);if(s!=i){let n=[];for(let r of i){let o=s.indexOf(r);if(o<0)n.push(new ku(r));else{let l=this.plugins[o];l.mustUpdate=e,n.push(l)}}for(let r of this.plugins)r.mustUpdate!=e&&r.destroy(this);this.plugins=n,this.pluginMap.clear()}else for(let n of this.plugins)n.mustUpdate=e;for(let n=0;n<this.plugins.length;n++)this.plugins[n].update(this);s!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let s=e.value;if(s&&s.docViewUpdate)try{s.docViewUpdate(this)}catch(i){ys(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let s=null,i=this.scrollDOM,n=i.scrollTop*this.scaleY,{scrollAnchorPos:r,scrollAnchorHeight:o}=this.viewState;Math.abs(n-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let l=0;;l++){if(o<0)if(m0(i))r=-1,o=this.viewState.heightMap.height;else{let m=this.viewState.scrollAnchorAt(n);r=m.from,o=m.top}this.updateState=1;let a=this.viewState.measure(this);if(!a&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let d=[];a&4||([this.measureRequests,d]=[d,this.measureRequests]);let u=d.map(m=>{try{return m.read(this)}catch(w){return ys(this.state,w),fp}}),f=ia.create(this,this.state,[]),h=!1;f.flags|=a,s?s.flags|=a:s=f,this.updateState=2,f.empty||(this.updatePlugins(f),this.inputState.update(f),this.updateAttrs(),h=this.docView.update(f),h&&this.docViewUpdate());for(let m=0;m<d.length;m++)if(u[m]!=fp)try{let w=d[m];w.write&&w.write(u[m],this)}catch(w){ys(this.state,w)}if(h&&this.docView.updateSelection(!0),!f.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let w=(r<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(r).top)-o;if(w>1||w<-1){n=n+w,i.scrollTop=n/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(s&&!s.empty)for(let l of this.state.facet(Rd))l(s)}get themeClasses(){return Ud+" "+(this.state.facet(Id)?oy:ry)+" "+this.state.facet(pl)}updateAttrs(){let e=hp(this,U0,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),s={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(Ei)?"true":"false",class:"cm-content",style:`${_e.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(s["aria-readonly"]="true"),hp(this,Oc,s);let i=this.observer.ignore(()=>{let n=Td(this.contentDOM,this.contentAttrs,s),r=Td(this.dom,this.editorAttrs,e);return n||r});return this.editorAttrs=e,this.contentAttrs=s,i}showAnnouncements(e){let s=!0;for(let i of e)for(let n of i.effects)if(n.is(Me.announce)){s&&(this.announceDOM.textContent=""),s=!1;let r=this.announceDOM.appendChild(document.createElement("div"));r.textContent=n.value}}mountStyles(){this.styleModules=this.state.facet(zr);let e=this.state.facet(Me.cspNonce);on.mount(this.root,this.styleModules.concat(h_).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let s=0;s<this.measureRequests.length;s++)if(this.measureRequests[s].key===e.key){this.measureRequests[s]=e;return}}this.measureRequests.push(e)}}plugin(e){let s=this.pluginMap.get(e);return(s===void 0||s&&s.plugin!=e)&&this.pluginMap.set(e,s=this.plugins.find(i=>i.plugin==e)||null),s&&s.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,s,i){return Su(this,e,Kh(this,e,s,i))}moveByGroup(e,s){return Su(this,e,Kh(this,e,s,i=>DC(this,e.head,i)))}visualLineSide(e,s){let i=this.bidiSpans(e),n=this.textDirectionAt(e.from),r=i[s?i.length-1:0];return ne.cursor(r.side(s,n)+e.from,r.forward(!s,n)?1:-1)}moveToLineBoundary(e,s,i=!0){return MC(this,e,s,i)}moveVertically(e,s,i){return Su(this,e,TC(this,e,s,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,s=0){return this.docView.posFromDOM(e,s)}posAtCoords(e,s=!0){return this.readMeasured(),W0(this,e,s)}coordsAtPos(e,s=1){this.readMeasured();let i=this.docView.coordsAt(e,s);if(!i||i.left==i.right)return i;let n=this.state.doc.lineAt(e),r=this.bidiSpans(n),o=r[Qi.find(r,e-n.from,-1,s)];return La(i,o.dir==yt.LTR==s>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(j0)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>v_)return M0(e.length);let s=this.textDirectionAt(e.from),i;for(let r of this.bidiCache)if(r.from==e.from&&r.dir==s&&(r.fresh||V0(r.isolates,i=zh(this,e))))return r.order;i||(i=zh(this,e));let n=fC(e.text,s,i);return this.bidiCache.push(new ra(e.from,e.to,s,i,!0,n)),n}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||_e.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{h0(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,s={}){return al.of(new ur(typeof e=="number"?ne.cursor(e):e,s.y,s.x,s.yMargin,s.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:s}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return al.of(new ur(ne.cursor(i.from),"start","start",i.top-e,s,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return $t.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return $t.define(()=>({}),{eventObservers:e})}static theme(e,s){let i=on.newName(),n=[pl.of(i),zr.of(Nd(`.${i}`,e))];return s&&s.dark&&n.push(Id.of(!0)),n}static baseTheme(e){return zn.lowest(zr.of(Nd("."+Ud,e,ly)))}static findFromDOM(e){var s;let i=e.querySelector(".cm-content"),n=i&&at.get(i)||at.get(e);return((s=n?.rootView)===null||s===void 0?void 0:s.view)||null}}Me.styleModule=zr;Me.inputHandler=O0;Me.clipboardInputFilter=$c;Me.clipboardOutputFilter=Pc;Me.scrollHandler=B0;Me.focusChangeEffect=R0;Me.perLineTextDirection=j0;Me.exceptionSink=P0;Me.updateListener=Rd;Me.editable=Ei;Me.mouseSelectionStyle=$0;Me.dragMovesSelection=E0;Me.clickAddsSelectionRange=T0;Me.decorations=_o;Me.outerDecorations=N0;Me.atomicRanges=Fo;Me.bidiIsolatedRanges=z0;Me.scrollMargins=F0;Me.darkTheme=Id;Me.cspNonce=De.define({combine:t=>t.length?t[0]:""});Me.contentAttributes=Oc;Me.editorAttributes=U0;Me.lineWrapping=Me.contentAttributes.of({class:"cm-lineWrapping"});Me.announce=We.define();const v_=4096,fp={};class ra{constructor(e,s,i,n,r,o){this.from=e,this.to=s,this.dir=i,this.isolates=n,this.fresh=r,this.order=o}static update(e,s){if(s.empty&&!e.some(r=>r.fresh))return e;let i=[],n=e.length?e[e.length-1].dir:yt.LTR;for(let r=Math.max(0,e.length-10);r<e.length;r++){let o=e[r];o.dir==n&&!s.touchesRange(o.from,o.to)&&i.push(new ra(s.mapPos(o.from,1),s.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return i}}function hp(t,e,s){for(let i=t.state.facet(e),n=i.length-1;n>=0;n--){let r=i[n],o=typeof r=="function"?r(t):r;o&&Dd(o,s)}return s}const b_=_e.mac?"mac":_e.windows?"win":_e.linux?"linux":"key";function x_(t,e){const s=t.split(/-(?!$)/);let i=s[s.length-1];i=="Space"&&(i=" ");let n,r,o,l;for(let a=0;a<s.length-1;++a){const d=s[a];if(/^(cmd|meta|m)$/i.test(d))l=!0;else if(/^a(lt)?$/i.test(d))n=!0;else if(/^(c|ctrl|control)$/i.test(d))r=!0;else if(/^s(hift)?$/i.test(d))o=!0;else if(/^mod$/i.test(d))e=="mac"?l=!0:r=!0;else throw new Error("Unrecognized modifier name: "+d)}return n&&(i="Alt-"+i),r&&(i="Ctrl-"+i),l&&(i="Meta-"+i),o&&(i="Shift-"+i),i}function ml(t,e,s){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),s!==!1&&e.shiftKey&&(t="Shift-"+t),t}const k_=zn.default(Me.domEventHandlers({keydown(t,e){return uy(ay(e.state),t,e,"editor")}})),Ic=De.define({enables:k_}),pp=new WeakMap;function ay(t){let e=t.facet(Ic),s=pp.get(e);return s||pp.set(e,s=C_(e.reduce((i,n)=>i.concat(n),[]))),s}function w_(t,e,s){return uy(ay(t.state),e,t,s)}let Ji=null;const S_=4e3;function C_(t,e=b_){let s=Object.create(null),i=Object.create(null),n=(o,l)=>{let a=i[o];if(a==null)i[o]=l;else if(a!=l)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},r=(o,l,a,d,u)=>{var f,h;let m=s[o]||(s[o]=Object.create(null)),w=l.split(/ (?!$)/).map(M=>x_(M,e));for(let M=1;M<w.length;M++){let L=w.slice(0,M).join(" ");n(L,!0),m[L]||(m[L]={preventDefault:!0,stopPropagation:!1,run:[$=>{let T=Ji={view:$,prefix:L,scope:o};return setTimeout(()=>{Ji==T&&(Ji=null)},S_),!0}]})}let S=w.join(" ");n(S,!1);let _=m[S]||(m[S]={preventDefault:!1,stopPropagation:!1,run:((h=(f=m._any)===null||f===void 0?void 0:f.run)===null||h===void 0?void 0:h.slice())||[]});a&&_.run.push(a),d&&(_.preventDefault=!0),u&&(_.stopPropagation=!0)};for(let o of t){let l=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let d of l){let u=s[d]||(s[d]=Object.create(null));u._any||(u._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:f}=o;for(let h in u)u[h].run.push(m=>f(m,zd))}let a=o[e]||o.key;if(a)for(let d of l)r(d,a,o.run,o.preventDefault,o.stopPropagation),o.shift&&r(d,"Shift-"+a,o.shift,o.preventDefault,o.stopPropagation)}return s}let zd=null;function uy(t,e,s,i){zd=e;let n=q4(e),r=ms(n,0),o=ci(r)==n.length&&n!=" ",l="",a=!1,d=!1,u=!1;Ji&&Ji.view==s&&Ji.scope==i&&(l=Ji.prefix+" ",X0.indexOf(e.keyCode)<0&&(d=!0,Ji=null));let f=new Set,h=_=>{if(_){for(let M of _.run)if(!f.has(M)&&(f.add(M),M(s)))return _.stopPropagation&&(u=!0),!0;_.preventDefault&&(_.stopPropagation&&(u=!0),d=!0)}return!1},m=t[i],w,S;return m&&(h(m[l+ml(n,e,!o)])?a=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(_e.windows&&e.ctrlKey&&e.altKey)&&!(_e.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(w=ln[e.keyCode])&&w!=n?(h(m[l+ml(w,e,!0)])||e.shiftKey&&(S=wo[e.keyCode])!=n&&S!=w&&h(m[l+ml(S,e,!1)]))&&(a=!0):o&&e.shiftKey&&h(m[l+ml(n,e,!0)])&&(a=!0),!a&&h(m._any)&&(a=!0)),d&&(a=!0),a&&u&&e.stopPropagation(),zd=null,a}class Ho{constructor(e,s,i,n,r){this.className=e,this.left=s,this.top=i,this.width=n,this.height=r}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,s){return s.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,s,i){if(i.empty){let n=e.coordsAtPos(i.head,i.assoc||1);if(!n)return[];let r=dy(e);return[new Ho(s,n.left-r.left,n.top-r.top,null,n.bottom-n.top)]}else return __(e,s,i)}}function dy(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==yt.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function mp(t,e,s,i){let n=t.coordsAtPos(e,s*2);if(!n)return i;let r=t.dom.getBoundingClientRect(),o=(n.top+n.bottom)/2,l=t.posAtCoords({x:r.left+1,y:o}),a=t.posAtCoords({x:r.right-1,y:o});return l==null||a==null?i:{from:Math.max(i.from,Math.min(l,a)),to:Math.min(i.to,Math.max(l,a))}}function __(t,e,s){if(s.to<=t.viewport.from||s.from>=t.viewport.to)return[];let i=Math.max(s.from,t.viewport.from),n=Math.min(s.to,t.viewport.to),r=t.textDirection==yt.LTR,o=t.contentDOM,l=o.getBoundingClientRect(),a=dy(t),d=o.querySelector(".cm-line"),u=d&&window.getComputedStyle(d),f=l.left+(u?parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)):0),h=l.right-(u?parseInt(u.paddingRight):0),m=Ld(t,i,1),w=Ld(t,n,-1),S=m.type==fs.Text?m:null,_=w.type==fs.Text?w:null;if(S&&(t.lineWrapping||m.widgetLineBreaks)&&(S=mp(t,i,1,S)),_&&(t.lineWrapping||w.widgetLineBreaks)&&(_=mp(t,n,-1,_)),S&&_&&S.from==_.from&&S.to==_.to)return L($(s.from,s.to,S));{let N=S?$(s.from,null,S):T(m,!1),B=_?$(null,s.to,_):T(w,!0),I=[];return(S||m).to<(_||w).from-(S&&_?1:0)||m.widgetLineBreaks>1&&N.bottom+t.defaultLineHeight/2<B.top?I.push(M(f,N.bottom,h,B.top)):N.bottom<B.top&&t.elementAtHeight((N.bottom+B.top)/2).type==fs.Text&&(N.bottom=B.top=(N.bottom+B.top)/2),L(N).concat(I).concat(L(B))}function M(N,B,I,Z){return new Ho(e,N-a.left,B-a.top,I-N,Z-B)}function L({top:N,bottom:B,horizontal:I}){let Z=[];for(let ee=0;ee<I.length;ee+=2)Z.push(M(I[ee],N,I[ee+1],B));return Z}function $(N,B,I){let Z=1e9,ee=-1e9,fe=[];function X(oe,H,g,p,D){let Y=t.coordsAtPos(oe,oe==I.to?-2:2),A=t.coordsAtPos(g,g==I.from?2:-2);!Y||!A||(Z=Math.min(Y.top,A.top,Z),ee=Math.max(Y.bottom,A.bottom,ee),D==yt.LTR?fe.push(r&&H?f:Y.left,r&&p?h:A.right):fe.push(!r&&p?f:A.left,!r&&H?h:Y.right))}let z=N??I.from,ae=B??I.to;for(let oe of t.visibleRanges)if(oe.to>z&&oe.from<ae)for(let H=Math.max(oe.from,z),g=Math.min(oe.to,ae);;){let p=t.state.doc.lineAt(H);for(let D of t.bidiSpans(p)){let Y=D.from+p.from,A=D.to+p.from;if(Y>=g)break;A>H&&X(Math.max(Y,H),N==null&&Y<=z,Math.min(A,g),B==null&&A>=ae,D.dir)}if(H=p.to+1,H>=g)break}return fe.length==0&&X(z,N==null,ae,B==null,t.textDirection),{top:Z,bottom:ee,horizontal:fe}}function T(N,B){let I=l.top+(B?N.top:N.bottom);return{top:I,bottom:I,horizontal:[]}}}function A_(t,e){return t.constructor==e.constructor&&t.eq(e)}class V_{constructor(e,s){this.view=e,this.layer=s,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),s.above&&this.dom.classList.add("cm-layer-above"),s.class&&this.dom.classList.add(s.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),s.mount&&s.mount(this.dom,e)}update(e){e.startState.facet(Bl)!=e.state.facet(Bl)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let s=0,i=e.facet(Bl);for(;s<i.length&&i[s]!=this.layer;)s++;this.dom.style.zIndex=String((this.layer.above?150:-1)-s)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:s}=this.view;(e!=this.scaleX||s!=this.scaleY)&&(this.scaleX=e,this.scaleY=s,this.dom.style.transform=`scale(${1/e}, ${1/s})`)}draw(e){if(e.length!=this.drawn.length||e.some((s,i)=>!A_(s,this.drawn[i]))){let s=this.dom.firstChild,i=0;for(let n of e)n.update&&s&&n.constructor&&this.drawn[i].constructor&&n.update(s,this.drawn[i])?(s=s.nextSibling,i++):this.dom.insertBefore(n.draw(),s);for(;s;){let n=s.nextSibling;s.remove(),s=n}this.drawn=e,_e.safari&&_e.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Bl=De.define();function cy(t){return[$t.define(e=>new V_(e,t)),Bl.of(t)]}const Ao=De.define({combine(t){return bi(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,s)=>Math.min(e,s),drawRangeCursor:(e,s)=>e||s})}});function M_(t={}){return[Ao.of(t),D_,T_,E_,L0.of(!0)]}function fy(t){return t.startState.facet(Ao)!=t.state.facet(Ao)}const D_=cy({above:!0,markers(t){let{state:e}=t,s=e.facet(Ao),i=[];for(let n of e.selection.ranges){let r=n==e.selection.main;if(n.empty||s.drawRangeCursor){let o=r?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",l=n.empty?n:ne.cursor(n.head,n.head>n.anchor?-1:1);for(let a of Ho.forRange(t,o,l))i.push(a)}}return i},update(t,e){t.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let s=fy(t);return s&&gp(t.state,e),t.docChanged||t.selectionSet||s},mount(t,e){gp(e.state,t)},class:"cm-cursorLayer"});function gp(t,e){e.style.animationDuration=t.facet(Ao).cursorBlinkRate+"ms"}const T_=cy({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:Ho.forRange(t,"cm-selectionBackground",e)).reduce((e,s)=>e.concat(s))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||fy(t)},class:"cm-selectionLayer"}),E_=zn.highest(Me.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),hy=We.define({map(t,e){return t==null?null:e.mapPos(t)}}),Wr=Gt.define({create(){return null},update(t,e){return t!=null&&(t=e.changes.mapPos(t)),e.effects.reduce((s,i)=>i.is(hy)?i.value:s,t)}}),$_=$t.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let s=t.state.field(Wr);s==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(Wr)!=s||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:t}=this,e=t.state.field(Wr),s=e!=null&&t.coordsAtPos(e);if(!s)return null;let i=t.scrollDOM.getBoundingClientRect();return{left:s.left-i.left+t.scrollDOM.scrollLeft*t.scaleX,top:s.top-i.top+t.scrollDOM.scrollTop*t.scaleY,height:s.bottom-s.top}}drawCursor(t){if(this.cursor){let{scaleX:e,scaleY:s}=this.view;t?(this.cursor.style.left=t.left/e+"px",this.cursor.style.top=t.top/s+"px",this.cursor.style.height=t.height/s+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(Wr)!=t&&this.view.dispatch({effects:hy.of(t)})}},{eventObservers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){(t.target==this.view.contentDOM||!this.view.contentDOM.contains(t.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function P_(){return[Wr,$_]}function yp(t,e,s,i,n){e.lastIndex=0;for(let r=t.iterRange(s,i),o=s,l;!r.next().done;o+=r.value.length)if(!r.lineBreak)for(;l=e.exec(r.value);)n(o+l.index,l)}function O_(t,e){let s=t.visibleRanges;if(s.length==1&&s[0].from==t.viewport.from&&s[0].to==t.viewport.to)return s;let i=[];for(let{from:n,to:r}of s)n=Math.max(t.state.doc.lineAt(n).from,n-e),r=Math.min(t.state.doc.lineAt(r).to,r+e),i.length&&i[i.length-1].to>=n?i[i.length-1].to=r:i.push({from:n,to:r});return i}class R_{constructor(e){const{regexp:s,decoration:i,decorate:n,boundary:r,maxLength:o=1e3}=e;if(!s.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=s,n)this.addMatch=(l,a,d,u)=>n(u,d,d+l[0].length,l,a);else if(typeof i=="function")this.addMatch=(l,a,d,u)=>{let f=i(l,a,d);f&&u(d,d+l[0].length,f)};else if(i)this.addMatch=(l,a,d,u)=>u(d,d+l[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=r,this.maxLength=o}createDeco(e){let s=new Ri,i=s.add.bind(s);for(let{from:n,to:r}of O_(e,this.maxLength))yp(e.state.doc,this.regexp,n,r,(o,l)=>this.addMatch(l,e,o,i));return s.finish()}updateDeco(e,s){let i=1e9,n=-1;return e.docChanged&&e.changes.iterChanges((r,o,l,a)=>{a>=e.view.viewport.from&&l<=e.view.viewport.to&&(i=Math.min(l,i),n=Math.max(a,n))}),e.viewportMoved||n-i>1e3?this.createDeco(e.view):n>-1?this.updateRange(e.view,s.map(e.changes),i,n):s}updateRange(e,s,i,n){for(let r of e.visibleRanges){let o=Math.max(r.from,i),l=Math.min(r.to,n);if(l>=o){let a=e.state.doc.lineAt(o),d=a.to<l?e.state.doc.lineAt(l):a,u=Math.max(r.from,a.from),f=Math.min(r.to,d.to);if(this.boundary){for(;o>a.from;o--)if(this.boundary.test(a.text[o-1-a.from])){u=o;break}for(;l<d.to;l++)if(this.boundary.test(d.text[l-d.from])){f=l;break}}let h=[],m,w=(S,_,M)=>h.push(M.range(S,_));if(a==d)for(this.regexp.lastIndex=u-a.from;(m=this.regexp.exec(a.text))&&m.index<f-a.from;)this.addMatch(m,e,m.index+a.from,w);else yp(e.state.doc,this.regexp,u,f,(S,_)=>this.addMatch(_,e,S,w));s=s.update({filterFrom:u,filterTo:f,filter:(S,_)=>S<u||_>f,add:h})}}return s}}const Fd=/x/.unicode!=null?"gu":"g",j_=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,Fd),L_={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Au=null;function B_(){var t;if(Au==null&&typeof document<"u"&&document.body){let e=document.body.style;Au=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return Au||!1}const Il=De.define({combine(t){let e=bi(t,{render:null,specialChars:j_,addSpecialChars:null});return(e.replaceTabs=!B_())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,Fd)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,Fd)),e}});function I_(t={}){return[Il.of(t),U_()]}let vp=null;function U_(){return vp||(vp=$t.fromClass(class{constructor(t){this.view=t,this.decorations=Ie.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(Il)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new R_({regexp:t.specialChars,decoration:(e,s,i)=>{let{doc:n}=s.state,r=ms(e[0],0);if(r==9){let o=n.lineAt(i),l=s.state.tabSize,a=Vr(o.text,l,i-o.from);return Ie.replace({widget:new H_((l-a%l)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[r]||(this.decorationCache[r]=Ie.replace({widget:new F_(t,r)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(Il);t.startState.facet(Il)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const N_="";function z_(t){return t>=32?N_:t==10?"":String.fromCharCode(9216+t)}class F_ extends cn{constructor(e,s){super(),this.options=e,this.code=s}eq(e){return e.code==this.code}toDOM(e){let s=z_(this.code),i=e.state.phrase("Control character")+" "+(L_[this.code]||"0x"+this.code.toString(16)),n=this.options.render&&this.options.render(this.code,i,s);if(n)return n;let r=document.createElement("span");return r.textContent=s,r.title=i,r.setAttribute("aria-label",i),r.className="cm-specialChar",r}ignoreEvent(){return!1}}class H_ extends cn{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function W_(){return G_}const q_=Ie.line({class:"cm-activeLine"}),G_=$t.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,s=[];for(let i of t.state.selection.ranges){let n=t.lineBlockAt(i.head);n.from>e&&(s.push(q_.range(n.from)),e=n.from)}return Ie.set(s)}},{decorations:t=>t.decorations}),Hd=2e3;function K_(t,e,s){let i=Math.min(e.line,s.line),n=Math.max(e.line,s.line),r=[];if(e.off>Hd||s.off>Hd||e.col<0||s.col<0){let o=Math.min(e.off,s.off),l=Math.max(e.off,s.off);for(let a=i;a<=n;a++){let d=t.doc.line(a);d.length<=l&&r.push(ne.range(d.from+o,d.to+l))}}else{let o=Math.min(e.col,s.col),l=Math.max(e.col,s.col);for(let a=i;a<=n;a++){let d=t.doc.line(a),u=kd(d.text,o,t.tabSize,!0);if(u<0)r.push(ne.cursor(d.to));else{let f=kd(d.text,l,t.tabSize);r.push(ne.range(d.from+u,d.from+f))}}}return r}function J_(t,e){let s=t.coordsAtPos(t.viewport.from);return s?Math.round(Math.abs((s.left-e)/t.defaultCharacterWidth)):-1}function bp(t,e){let s=t.posAtCoords({x:e.clientX,y:e.clientY},!1),i=t.state.doc.lineAt(s),n=s-i.from,r=n>Hd?-1:n==i.length?J_(t,e.clientX):Vr(i.text,t.state.tabSize,s-i.from);return{line:i.number,col:r,off:n}}function Y_(t,e){let s=bp(t,e),i=t.state.selection;return s?{update(n){if(n.docChanged){let r=n.changes.mapPos(n.startState.doc.line(s.line).from),o=n.state.doc.lineAt(r);s={line:o.number,col:s.col,off:Math.min(s.off,o.length)},i=i.map(n.changes)}},get(n,r,o){let l=bp(t,n);if(!l)return i;let a=K_(t.state,s,l);return a.length?o?ne.create(a.concat(i.ranges)):ne.create(a):i}}:null}function X_(t){let e=(s=>s.altKey&&s.button==0);return Me.mouseSelectionStyle.of((s,i)=>e(i)?Y_(s,i):null)}const Q_={Alt:[18,t=>!!t.altKey],Control:[17,t=>!!t.ctrlKey],Shift:[16,t=>!!t.shiftKey],Meta:[91,t=>!!t.metaKey]},Z_={style:"cursor: crosshair"};function e5(t={}){let[e,s]=Q_[t.key||"Alt"],i=$t.fromClass(class{constructor(n){this.view=n,this.isDown=!1}set(n){this.isDown!=n&&(this.isDown=n,this.view.update([]))}},{eventObservers:{keydown(n){this.set(n.keyCode==e||s(n))},keyup(n){(n.keyCode==e||!s(n))&&this.set(!1)},mousemove(n){this.set(s(n))}}});return[i,Me.contentAttributes.of(n=>{var r;return!((r=n.plugin(i))===null||r===void 0)&&r.isDown?Z_:null})]}const Lr="-10000px";class py{constructor(e,s,i,n){this.facet=s,this.createTooltipView=i,this.removeTooltipView=n,this.input=e.state.facet(s),this.tooltips=this.input.filter(o=>o);let r=null;this.tooltipViews=this.tooltips.map(o=>r=i(o,r))}update(e,s){var i;let n=e.state.facet(this.facet),r=n.filter(a=>a);if(n===this.input){for(let a of this.tooltipViews)a.update&&a.update(e);return!1}let o=[],l=s?[]:null;for(let a=0;a<r.length;a++){let d=r[a],u=-1;if(d){for(let f=0;f<this.tooltips.length;f++){let h=this.tooltips[f];h&&h.create==d.create&&(u=f)}if(u<0)o[a]=this.createTooltipView(d,a?o[a-1]:null),l&&(l[a]=!!d.above);else{let f=o[a]=this.tooltipViews[u];l&&(l[a]=s[u]),f.update&&f.update(e)}}}for(let a of this.tooltipViews)o.indexOf(a)<0&&(this.removeTooltipView(a),(i=a.destroy)===null||i===void 0||i.call(a));return s&&(l.forEach((a,d)=>s[d]=a),s.length=l.length),this.input=n,this.tooltips=r,this.tooltipViews=o,!0}}function t5(t){let e=t.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const Vu=De.define({combine:t=>{var e,s,i;return{position:_e.ios?"absolute":((e=t.find(n=>n.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((s=t.find(n=>n.parent))===null||s===void 0?void 0:s.parent)||null,tooltipSpace:((i=t.find(n=>n.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||t5}}}),xp=new WeakMap,Uc=$t.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(Vu);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new py(t,Nc,(s,i)=>this.createTooltip(s,i),s=>{this.resizeObserver&&this.resizeObserver.unobserve(s.dom),s.dom.remove()}),this.above=this.manager.tooltips.map(s=>!!s.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(s=>{Date.now()>this.lastTransaction-50&&s.length>0&&s[s.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let s=e||t.geometryChanged,i=t.state.facet(Vu);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let n of this.manager.tooltipViews)n.dom.style.position=this.position;s=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let n of this.manager.tooltipViews)this.container.appendChild(n.dom);s=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);s&&this.maybeMeasure()}createTooltip(t,e){let s=t.create(this.view),i=e?e.dom:null;if(s.dom.classList.add("cm-tooltip"),t.arrow&&!s.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let n=document.createElement("div");n.className="cm-tooltip-arrow",s.dom.appendChild(n)}return s.dom.style.position=this.position,s.dom.style.top=Lr,s.dom.style.left="0px",this.container.insertBefore(s.dom,i),s.mount&&s.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(s.dom),s}destroy(){var t,e,s;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(t=i.destroy)===null||t===void 0||t.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(s=this.intersectionObserver)===null||s===void 0||s.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=1,e=1,s=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:r}=this.manager.tooltipViews[0];if(_e.gecko)s=r.offsetParent!=this.container.ownerDocument.body;else if(r.style.top==Lr&&r.style.left=="0px"){let o=r.getBoundingClientRect();s=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}}if(s||this.position=="absolute")if(this.parent){let r=this.parent.getBoundingClientRect();r.width&&r.height&&(t=r.width/this.parent.offsetWidth,e=r.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:e}=this.view.viewState);let i=this.view.scrollDOM.getBoundingClientRect(),n=Rc(this.view);return{visible:{left:i.left+n.left,top:i.top+n.top,right:i.right-n.right,bottom:i.bottom-n.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((r,o)=>{let l=this.manager.tooltipViews[o];return l.getCoords?l.getCoords(r.pos):this.view.coordsAtPos(r.pos)}),size:this.manager.tooltipViews.map(({dom:r})=>r.getBoundingClientRect()),space:this.view.state.facet(Vu).tooltipSpace(this.view),scaleX:t,scaleY:e,makeAbsolute:s}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let l of this.manager.tooltipViews)l.dom.style.position="absolute"}let{visible:s,space:i,scaleX:n,scaleY:r}=t,o=[];for(let l=0;l<this.manager.tooltips.length;l++){let a=this.manager.tooltips[l],d=this.manager.tooltipViews[l],{dom:u}=d,f=t.pos[l],h=t.size[l];if(!f||a.clip!==!1&&(f.bottom<=Math.max(s.top,i.top)||f.top>=Math.min(s.bottom,i.bottom)||f.right<Math.max(s.left,i.left)-.1||f.left>Math.min(s.right,i.right)+.1)){u.style.top=Lr;continue}let m=a.arrow?d.dom.querySelector(".cm-tooltip-arrow"):null,w=m?7:0,S=h.right-h.left,_=(e=xp.get(d))!==null&&e!==void 0?e:h.bottom-h.top,M=d.offset||i5,L=this.view.textDirection==yt.LTR,$=h.width>i.right-i.left?L?i.left:i.right-h.width:L?Math.max(i.left,Math.min(f.left-(m?14:0)+M.x,i.right-S)):Math.min(Math.max(i.left,f.left-S+(m?14:0)-M.x),i.right-S),T=this.above[l];!a.strictSide&&(T?f.top-_-w-M.y<i.top:f.bottom+_+w+M.y>i.bottom)&&T==i.bottom-f.bottom>f.top-i.top&&(T=this.above[l]=!T);let N=(T?f.top-i.top:i.bottom-f.bottom)-w;if(N<_&&d.resize!==!1){if(N<this.view.defaultLineHeight){u.style.top=Lr;continue}xp.set(d,_),u.style.height=(_=N)/r+"px"}else u.style.height&&(u.style.height="");let B=T?f.top-_-w-M.y:f.bottom+w+M.y,I=$+S;if(d.overlap!==!0)for(let Z of o)Z.left<I&&Z.right>$&&Z.top<B+_&&Z.bottom>B&&(B=T?Z.top-_-2-w:Z.bottom+w+2);if(this.position=="absolute"?(u.style.top=(B-t.parent.top)/r+"px",kp(u,($-t.parent.left)/n)):(u.style.top=B/r+"px",kp(u,$/n)),m){let Z=f.left+(L?M.x:-M.x)-($+14-7);m.style.left=Z/n+"px"}d.overlap!==!0&&o.push({left:$,top:B,right:I,bottom:B+_}),u.classList.toggle("cm-tooltip-above",T),u.classList.toggle("cm-tooltip-below",!T),d.positioned&&d.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=Lr}},{eventObservers:{scroll(){this.maybeMeasure()}}});function kp(t,e){let s=parseInt(t.style.left,10);(isNaN(s)||Math.abs(e-s)>1)&&(t.style.left=e+"px")}const s5=Me.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),i5={x:0,y:0},Nc=De.define({enables:[Uc,s5]}),oa=De.define({combine:t=>t.reduce((e,s)=>e.concat(s),[])});class Ia{static create(e){return new Ia(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new py(e,oa,(s,i)=>this.createHostedView(s,i),s=>s.dom.remove())}createHostedView(e,s){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,s?s.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let s of this.manager.tooltipViews)s.mount&&s.mount(e);this.mounted=!0}positioned(e){for(let s of this.manager.tooltipViews)s.positioned&&s.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let s of this.manager.tooltipViews)(e=s.destroy)===null||e===void 0||e.call(s)}passProp(e){let s;for(let i of this.manager.tooltipViews){let n=i[e];if(n!==void 0){if(s===void 0)s=n;else if(s!==n)return}}return s}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const n5=Nc.compute([oa],t=>{let e=t.facet(oa);return e.length===0?null:{pos:Math.min(...e.map(s=>s.pos)),end:Math.max(...e.map(s=>{var i;return(i=s.end)!==null&&i!==void 0?i:s.pos})),create:Ia.create,above:e[0].above,arrow:e.some(s=>s.arrow)}});class r5{constructor(e,s,i,n,r){this.view=e,this.source=s,this.field=i,this.setHover=n,this.hoverTime=r,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:s}=this,i=e.docView.nearest(s.target);if(!i)return;let n,r=1;if(i instanceof Xi)n=i.posAtStart;else{if(n=e.posAtCoords(s),n==null)return;let l=e.coordsAtPos(n);if(!l||s.y<l.top||s.y>l.bottom||s.x<l.left-e.defaultCharacterWidth||s.x>l.right+e.defaultCharacterWidth)return;let a=e.bidiSpans(e.state.doc.lineAt(n)).find(u=>u.from<=n&&u.to>=n),d=a&&a.dir==yt.RTL?-1:1;r=s.x<l.left?-d:d}let o=this.source(e,n,r);if(o?.then){let l=this.pending={pos:n};o.then(a=>{this.pending==l&&(this.pending=null,a&&!(Array.isArray(a)&&!a.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(a)?a:[a])}))},a=>ys(e.state,a,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(Uc),s=e?e.manager.tooltips.findIndex(i=>i.create==Ia.create):-1;return s>-1?e.manager.tooltipViews[s]:null}mousemove(e){var s,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:n,tooltip:r}=this;if(n.length&&r&&!o5(r.dom,e)||this.pending){let{pos:o}=n[0]||this.pending,l=(i=(s=n[0])===null||s===void 0?void 0:s.end)!==null&&i!==void 0?i:o;(o==l?this.view.posAtCoords(this.lastMove)!=o:!l5(this.view,o,l,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:s}=this;if(s.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let s=i=>{e.removeEventListener("mouseleave",s),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",s)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const gl=4;function o5(t,e){let{left:s,right:i,top:n,bottom:r}=t.getBoundingClientRect(),o;if(o=t.querySelector(".cm-tooltip-arrow")){let l=o.getBoundingClientRect();n=Math.min(l.top,n),r=Math.max(l.bottom,r)}return e.clientX>=s-gl&&e.clientX<=i+gl&&e.clientY>=n-gl&&e.clientY<=r+gl}function l5(t,e,s,i,n,r){let o=t.scrollDOM.getBoundingClientRect(),l=t.documentTop+t.documentPadding.top+t.contentHeight;if(o.left>i||o.right<i||o.top>n||Math.min(o.bottom,l)<n)return!1;let a=t.posAtCoords({x:i,y:n},!1);return a>=e&&a<=s}function a5(t,e={}){let s=We.define(),i=Gt.define({create(){return[]},update(n,r){if(n.length&&(e.hideOnChange&&(r.docChanged||r.selection)?n=[]:e.hideOn&&(n=n.filter(o=>!e.hideOn(r,o))),r.docChanged)){let o=[];for(let l of n){let a=r.changes.mapPos(l.pos,-1,cs.TrackDel);if(a!=null){let d=Object.assign(Object.create(null),l);d.pos=a,d.end!=null&&(d.end=r.changes.mapPos(d.end)),o.push(d)}}n=o}for(let o of r.effects)o.is(s)&&(n=o.value),o.is(u5)&&(n=[]);return n},provide:n=>oa.from(n)});return{active:i,extension:[i,$t.define(n=>new r5(n,t,i,s,e.hoverTime||300)),n5]}}function my(t,e){let s=t.plugin(Uc);if(!s)return null;let i=s.manager.tooltips.indexOf(e);return i<0?null:s.manager.tooltipViews[i]}const u5=We.define(),wp=De.define({combine(t){let e,s;for(let i of t)e=e||i.topContainer,s=s||i.bottomContainer;return{topContainer:e,bottomContainer:s}}});function Vo(t,e){let s=t.plugin(gy),i=s?s.specs.indexOf(e):-1;return i>-1?s.panels[i]:null}const gy=$t.fromClass(class{constructor(t){this.input=t.state.facet(Mo),this.specs=this.input.filter(s=>s),this.panels=this.specs.map(s=>s(t));let e=t.state.facet(wp);this.top=new yl(t,!0,e.topContainer),this.bottom=new yl(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(s=>s.top)),this.bottom.sync(this.panels.filter(s=>!s.top));for(let s of this.panels)s.dom.classList.add("cm-panel"),s.mount&&s.mount()}update(t){let e=t.state.facet(wp);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new yl(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new yl(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let s=t.state.facet(Mo);if(s!=this.input){let i=s.filter(a=>a),n=[],r=[],o=[],l=[];for(let a of i){let d=this.specs.indexOf(a),u;d<0?(u=a(t.view),l.push(u)):(u=this.panels[d],u.update&&u.update(t)),n.push(u),(u.top?r:o).push(u)}this.specs=i,this.panels=n,this.top.sync(r),this.bottom.sync(o);for(let a of l)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}else for(let i of this.panels)i.update&&i.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>Me.scrollMargins.of(e=>{let s=e.plugin(t);return s&&{top:s.top.scrollMargin(),bottom:s.bottom.scrollMargin()}})});class yl{constructor(e,s,i){this.view=e,this.top=s,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let s of this.panels)s.destroy&&e.indexOf(s)<0&&s.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let s=this.container||this.view.dom;s.insertBefore(this.dom,this.top?s.firstChild:null)}let e=this.dom.firstChild;for(let s of this.panels)if(s.dom.parentNode==this.dom){for(;e!=s.dom;)e=Sp(e);e=e.nextSibling}else this.dom.insertBefore(s.dom,e);for(;e;)e=Sp(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function Sp(t){let e=t.nextSibling;return t.remove(),e}const Mo=De.define({enables:gy});class Li extends Rn{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Li.prototype.elementClass="";Li.prototype.toDOM=void 0;Li.prototype.mapMode=cs.TrackBefore;Li.prototype.startSide=Li.prototype.endSide=-1;Li.prototype.point=!0;const Ul=De.define(),d5=De.define(),c5={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>et.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},oo=De.define();function f5(t){return[yy(),oo.of({...c5,...t})]}const Cp=De.define({combine:t=>t.some(e=>e)});function yy(t){return[h5]}const h5=$t.fromClass(class{constructor(t){this.view=t,this.domAfter=null,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(oo).map(e=>new Ap(t,e)),this.fixed=!t.state.facet(Cp);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(t){if(this.updateGutters(t)){let e=this.prevViewport,s=t.view.viewport,i=Math.min(e.to,s.to)-Math.max(e.from,s.from);this.syncGutters(i<(s.to-s.from)*.8)}if(t.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(Cp)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let s=et.iter(this.view.state.facet(Ul),this.view.viewport.from),i=[],n=this.gutters.map(r=>new p5(r,this.view.viewport,-this.view.documentPadding.top));for(let r of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(r.type)){let o=!0;for(let l of r.type)if(l.type==fs.Text&&o){Wd(s,i,l.from);for(let a of n)a.line(this.view,l,i);o=!1}else if(l.widget)for(let a of n)a.widget(this.view,l)}else if(r.type==fs.Text){Wd(s,i,r.from);for(let o of n)o.line(this.view,r,i)}else if(r.widget)for(let o of n)o.widget(this.view,r);for(let r of n)r.finish();t&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(t){let e=t.startState.facet(oo),s=t.state.facet(oo),i=t.docChanged||t.heightChanged||t.viewportChanged||!et.eq(t.startState.facet(Ul),t.state.facet(Ul),t.view.viewport.from,t.view.viewport.to);if(e==s)for(let n of this.gutters)n.update(t)&&(i=!0);else{i=!0;let n=[];for(let r of s){let o=e.indexOf(r);o<0?n.push(new Ap(this.view,r)):(this.gutters[o].update(t),n.push(this.gutters[o]))}for(let r of this.gutters)r.dom.remove(),n.indexOf(r)<0&&r.destroy();for(let r of n)r.config.side=="after"?this.getDOMAfter().appendChild(r.dom):this.dom.appendChild(r.dom);this.gutters=n}return i}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:t=>Me.scrollMargins.of(e=>{let s=e.plugin(t);if(!s||s.gutters.length==0||!s.fixed)return null;let i=s.dom.offsetWidth*e.scaleX,n=s.domAfter?s.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==yt.LTR?{left:i,right:n}:{right:i,left:n}})});function _p(t){return Array.isArray(t)?t:[t]}function Wd(t,e,s){for(;t.value&&t.from<=s;)t.from==s&&e.push(t.value),t.next()}class p5{constructor(e,s,i){this.gutter=e,this.height=i,this.i=0,this.cursor=et.iter(e.markers,s.from)}addElement(e,s,i){let{gutter:n}=this,r=(s.top-this.height)/e.scaleY,o=s.height/e.scaleY;if(this.i==n.elements.length){let l=new vy(e,o,r,i);n.elements.push(l),n.dom.appendChild(l.dom)}else n.elements[this.i].update(e,o,r,i);this.height=s.bottom,this.i++}line(e,s,i){let n=[];Wd(this.cursor,n,s.from),i.length&&(n=n.concat(i));let r=this.gutter.config.lineMarker(e,s,n);r&&n.unshift(r);let o=this.gutter;n.length==0&&!o.config.renderEmptyElements||this.addElement(e,s,n)}widget(e,s){let i=this.gutter.config.widgetMarker(e,s.widget,s),n=i?[i]:null;for(let r of e.state.facet(d5)){let o=r(e,s.widget,s);o&&(n||(n=[])).push(o)}n&&this.addElement(e,s,n)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let s=e.elements.pop();e.dom.removeChild(s.dom),s.destroy()}}}class Ap{constructor(e,s){this.view=e,this.config=s,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in s.domEventHandlers)this.dom.addEventListener(i,n=>{let r=n.target,o;if(r!=this.dom&&this.dom.contains(r)){for(;r.parentNode!=this.dom;)r=r.parentNode;let a=r.getBoundingClientRect();o=(a.top+a.bottom)/2}else o=n.clientY;let l=e.lineBlockAtHeight(o-e.documentTop);s.domEventHandlers[i](e,l,n)&&n.preventDefault()});this.markers=_p(s.markers(e)),s.initialSpacer&&(this.spacer=new vy(e,0,0,[s.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let s=this.markers;if(this.markers=_p(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let n=this.config.updateSpacer(this.spacer.markers[0],e);n!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[n])}let i=e.view.viewport;return!et.eq(this.markers,s,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class vy{constructor(e,s,i,n){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,s,i,n)}update(e,s,i,n){this.height!=s&&(this.height=s,this.dom.style.height=s+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),m5(this.markers,n)||this.setMarkers(e,n)}setMarkers(e,s){let i="cm-gutterElement",n=this.dom.firstChild;for(let r=0,o=0;;){let l=o,a=r<s.length?s[r++]:null,d=!1;if(a){let u=a.elementClass;u&&(i+=" "+u);for(let f=o;f<this.markers.length;f++)if(this.markers[f].compare(a)){l=f,d=!0;break}}else l=this.markers.length;for(;o<l;){let u=this.markers[o++];if(u.toDOM){u.destroy(n);let f=n.nextSibling;n.remove(),n=f}}if(!a)break;a.toDOM&&(d?n=n.nextSibling:this.dom.insertBefore(a.toDOM(e),n)),d&&o++}this.dom.className=i,this.markers=s}destroy(){this.setMarkers(null,[])}}function m5(t,e){if(t.length!=e.length)return!1;for(let s=0;s<t.length;s++)if(!t[s].compare(e[s]))return!1;return!0}const g5=De.define(),y5=De.define(),Xn=De.define({combine(t){return bi(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,s){let i=Object.assign({},e);for(let n in s){let r=i[n],o=s[n];i[n]=r?(l,a,d)=>r(l,a,d)||o(l,a,d):o}return i}})}});class Mu extends Li{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Du(t,e){return t.state.facet(Xn).formatNumber(e,t.state)}const v5=oo.compute([Xn],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(g5)},lineMarker(e,s,i){return i.some(n=>n.toDOM)?null:new Mu(Du(e,e.state.doc.lineAt(s.from).number))},widgetMarker:(e,s,i)=>{for(let n of e.state.facet(y5)){let r=n(e,s,i);if(r)return r}return null},lineMarkerChange:e=>e.startState.facet(Xn)!=e.state.facet(Xn),initialSpacer(e){return new Mu(Du(e,Vp(e.state.doc.lines)))},updateSpacer(e,s){let i=Du(s.view,Vp(s.view.state.doc.lines));return i==e.number?e:new Mu(i)},domEventHandlers:t.facet(Xn).domEventHandlers,side:"before"}));function b5(t={}){return[Xn.of(t),yy(),v5]}function Vp(t){let e=9;for(;e<t;)e=e*10+9;return e}const x5=new class extends Li{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},k5=Ul.compute(["selection"],t=>{let e=[],s=-1;for(let i of t.selection.ranges){let n=t.doc.lineAt(i.head).from;n>s&&(s=n,e.push(x5.range(n)))}return et.of(e)});function w5(){return k5}const S5=1024;let C5=0;class Tu{constructor(e,s){this.from=e,this.to=s}}class Ge{constructor(e={}){this.id=C5++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=bs.match(e)),s=>{let i=e(s);return i===void 0?null:[this,i]}}}Ge.closedBy=new Ge({deserialize:t=>t.split(" ")});Ge.openedBy=new Ge({deserialize:t=>t.split(" ")});Ge.group=new Ge({deserialize:t=>t.split(" ")});Ge.isolate=new Ge({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});Ge.contextHash=new Ge({perNode:!0});Ge.lookAhead=new Ge({perNode:!0});Ge.mounted=new Ge({perNode:!0});class la{constructor(e,s,i){this.tree=e,this.overlay=s,this.parser=i}static get(e){return e&&e.props&&e.props[Ge.mounted.id]}}const _5=Object.create(null);class bs{constructor(e,s,i,n=0){this.name=e,this.props=s,this.id=i,this.flags=n}static define(e){let s=e.props&&e.props.length?Object.create(null):_5,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),n=new bs(e.name||"",s,e.id,i);if(e.props){for(let r of e.props)if(Array.isArray(r)||(r=r(n)),r){if(r[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");s[r[0].id]=r[1]}}return n}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let s=this.prop(Ge.group);return s?s.indexOf(e)>-1:!1}return this.id==e}static match(e){let s=Object.create(null);for(let i in e)for(let n of i.split(" "))s[n]=e[i];return i=>{for(let n=i.prop(Ge.group),r=-1;r<(n?n.length:0);r++){let o=s[r<0?i.name:n[r]];if(o)return o}}}}bs.none=new bs("",Object.create(null),0,8);class zc{constructor(e){this.types=e;for(let s=0;s<e.length;s++)if(e[s].id!=s)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let s=[];for(let i of this.types){let n=null;for(let r of e){let o=r(i);if(o){n||(n=Object.assign({},i.props));let l=o[1],a=o[0];a.combine&&a.id in n&&(l=a.combine(n[a.id],l)),n[a.id]=l}}s.push(n?new bs(i.name,n,i.id,i.flags):i)}return new zc(s)}}const vl=new WeakMap,Mp=new WeakMap;var Ht;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(Ht||(Ht={}));class kt{constructor(e,s,i,n,r){if(this.type=e,this.children=s,this.positions=i,this.length=n,this.props=null,r&&r.length){this.props=Object.create(null);for(let[o,l]of r)this.props[typeof o=="number"?o:o.id]=l}}toString(){let e=la.get(this);if(e&&!e.overlay)return e.tree.toString();let s="";for(let i of this.children){let n=i.toString();n&&(s&&(s+=","),s+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(s.length?"("+s+")":""):s}cursor(e=0){return new Gd(this.topNode,e)}cursorAt(e,s=0,i=0){let n=vl.get(this)||this.topNode,r=new Gd(n);return r.moveTo(e,s),vl.set(this,r._tree),r}get topNode(){return new Rs(this,0,0,null)}resolve(e,s=0){let i=Do(vl.get(this)||this.topNode,e,s,!1);return vl.set(this,i),i}resolveInner(e,s=0){let i=Do(Mp.get(this)||this.topNode,e,s,!0);return Mp.set(this,i),i}resolveStack(e,s=0){return M5(this,e,s)}iterate(e){let{enter:s,leave:i,from:n=0,to:r=this.length}=e,o=e.mode||0,l=(o&Ht.IncludeAnonymous)>0;for(let a=this.cursor(o|Ht.IncludeAnonymous);;){let d=!1;if(a.from<=r&&a.to>=n&&(!l&&a.type.isAnonymous||s(a)!==!1)){if(a.firstChild())continue;d=!0}for(;d&&i&&(l||!a.type.isAnonymous)&&i(a),!a.nextSibling();){if(!a.parent())return;d=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let s in this.props)e.push([+s,this.props[s]]);return e}balance(e={}){return this.children.length<=8?this:Wc(bs.none,this.children,this.positions,0,this.children.length,0,this.length,(s,i,n)=>new kt(this.type,s,i,n,this.propValues),e.makeTree||((s,i,n)=>new kt(bs.none,s,i,n)))}static build(e){return D5(e)}}kt.empty=new kt(bs.none,[],[],0);class Fc{constructor(e,s){this.buffer=e,this.index=s}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Fc(this.buffer,this.index)}}class un{constructor(e,s,i){this.buffer=e,this.length=s,this.set=i}get type(){return bs.none}toString(){let e=[];for(let s=0;s<this.buffer.length;)e.push(this.childString(s)),s=this.buffer[s+3];return e.join(",")}childString(e){let s=this.buffer[e],i=this.buffer[e+3],n=this.set.types[s],r=n.name;if(/\W/.test(r)&&!n.isError&&(r=JSON.stringify(r)),e+=4,i==e)return r;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return r+"("+o.join(",")+")"}findChild(e,s,i,n,r){let{buffer:o}=this,l=-1;for(let a=e;a!=s&&!(by(r,n,o[a+1],o[a+2])&&(l=a,i>0));a=o[a+3]);return l}slice(e,s,i){let n=this.buffer,r=new Uint16Array(s-e),o=0;for(let l=e,a=0;l<s;){r[a++]=n[l++],r[a++]=n[l++]-i;let d=r[a++]=n[l++]-i;r[a++]=n[l++]-e,o=Math.max(o,d)}return new un(r,o,this.set)}}function by(t,e,s,i){switch(t){case-2:return s<e;case-1:return i>=e&&s<e;case 0:return s<e&&i>e;case 1:return s<=e&&i>e;case 2:return i>e;case 4:return!0}}function Do(t,e,s,i){for(var n;t.from==t.to||(s<1?t.from>=e:t.from>e)||(s>-1?t.to<=e:t.to<e);){let o=!i&&t instanceof Rs&&t.index<0?null:t.parent;if(!o)return t;t=o}let r=i?0:Ht.IgnoreOverlays;if(i)for(let o=t,l=o.parent;l;o=l,l=o.parent)o instanceof Rs&&o.index<0&&((n=l.enter(e,s,r))===null||n===void 0?void 0:n.from)!=o.from&&(t=l);for(;;){let o=t.enter(e,s,r);if(!o)return t;t=o}}class xy{cursor(e=0){return new Gd(this,e)}getChild(e,s=null,i=null){let n=Dp(this,e,s,i);return n.length?n[0]:null}getChildren(e,s=null,i=null){return Dp(this,e,s,i)}resolve(e,s=0){return Do(this,e,s,!1)}resolveInner(e,s=0){return Do(this,e,s,!0)}matchContext(e){return qd(this.parent,e)}enterUnfinishedNodesBefore(e){let s=this.childBefore(e),i=this;for(;s;){let n=s.lastChild;if(!n||n.to!=s.to)break;n.type.isError&&n.from==n.to?(i=s,s=n.prevSibling):s=n}return i}get node(){return this}get next(){return this.parent}}class Rs extends xy{constructor(e,s,i,n){super(),this._tree=e,this.from=s,this.index=i,this._parent=n}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,s,i,n,r=0){for(let o=this;;){for(let{children:l,positions:a}=o._tree,d=s>0?l.length:-1;e!=d;e+=s){let u=l[e],f=a[e]+o.from;if(by(n,i,f,f+u.length)){if(u instanceof un){if(r&Ht.ExcludeBuffers)continue;let h=u.findChild(0,u.buffer.length,s,i-f,n);if(h>-1)return new Zi(new A5(o,u,e,f),null,h)}else if(r&Ht.IncludeAnonymous||!u.type.isAnonymous||Hc(u)){let h;if(!(r&Ht.IgnoreMounts)&&(h=la.get(u))&&!h.overlay)return new Rs(h.tree,f,e,o);let m=new Rs(u,f,e,o);return r&Ht.IncludeAnonymous||!m.type.isAnonymous?m:m.nextChild(s<0?u.children.length-1:0,s,i,n)}}}if(r&Ht.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+s:e=s<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,s,i=0){let n;if(!(i&Ht.IgnoreOverlays)&&(n=la.get(this._tree))&&n.overlay){let r=e-this.from;for(let{from:o,to:l}of n.overlay)if((s>0?o<=r:o<r)&&(s<0?l>=r:l>r))return new Rs(n.tree,n.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,s,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function Dp(t,e,s,i){let n=t.cursor(),r=[];if(!n.firstChild())return r;if(s!=null){for(let o=!1;!o;)if(o=n.type.is(s),!n.nextSibling())return r}for(;;){if(i!=null&&n.type.is(i))return r;if(n.type.is(e)&&r.push(n.node),!n.nextSibling())return i==null?r:[]}}function qd(t,e,s=e.length-1){for(let i=t;s>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[s]&&e[s]!=i.name)return!1;s--}}return!0}class A5{constructor(e,s,i,n){this.parent=e,this.buffer=s,this.index=i,this.start=n}}class Zi extends xy{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,s,i){super(),this.context=e,this._parent=s,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,s,i){let{buffer:n}=this.context,r=n.findChild(this.index+4,n.buffer[this.index+3],e,s-this.context.start,i);return r<0?null:new Zi(this.context,this,r)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,s,i=0){if(i&Ht.ExcludeBuffers)return null;let{buffer:n}=this.context,r=n.findChild(this.index+4,n.buffer[this.index+3],s>0?1:-1,e-this.context.start,s);return r<0?null:new Zi(this.context,this,r)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,s=e.buffer[this.index+3];return s<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Zi(this.context,this._parent,s):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,s=this._parent?this._parent.index+4:0;return this.index==s?this.externalSibling(-1):new Zi(this.context,this._parent,e.findChild(s,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],s=[],{buffer:i}=this.context,n=this.index+4,r=i.buffer[this.index+3];if(r>n){let o=i.buffer[this.index+1];e.push(i.slice(n,r,o)),s.push(0)}return new kt(this.type,e,s,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function ky(t){if(!t.length)return null;let e=0,s=t[0];for(let r=1;r<t.length;r++){let o=t[r];(o.from>s.from||o.to<s.to)&&(s=o,e=r)}let i=s instanceof Rs&&s.index<0?null:s.parent,n=t.slice();return i?n[e]=i:n.splice(e,1),new V5(n,s)}class V5{constructor(e,s){this.heads=e,this.node=s}get next(){return ky(this.heads)}}function M5(t,e,s){let i=t.resolveInner(e,s),n=null;for(let r=i instanceof Rs?i:i.context.parent;r;r=r.parent)if(r.index<0){let o=r.parent;(n||(n=[i])).push(o.resolve(e,s)),r=o}else{let o=la.get(r.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let l=new Rs(o.tree,o.overlay[0].from+r.from,-1,r);(n||(n=[i])).push(Do(l,e,s,!1))}}return n?ky(n):i}class Gd{get name(){return this.type.name}constructor(e,s=0){if(this.mode=s,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Rs)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,s){this.index=e;let{start:i,buffer:n}=this.buffer;return this.type=s||n.set.types[n.buffer[e]],this.from=i+n.buffer[e+1],this.to=i+n.buffer[e+2],!0}yield(e){return e?e instanceof Rs?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,s,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,s,i,this.mode));let{buffer:n}=this.buffer,r=n.findChild(this.index+4,n.buffer[this.index+3],e,s-this.buffer.start,i);return r<0?!1:(this.stack.push(this.index),this.yieldBuf(r))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,s,i=this.mode){return this.buffer?i&Ht.ExcludeBuffers?!1:this.enterChild(1,e,s):this.yield(this._tree.enter(e,s,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Ht.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Ht.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:s}=this.buffer,i=this.stack.length-1;if(e<0){let n=i<0?0:this.stack[i]+4;if(this.index!=n)return this.yieldBuf(s.findChild(n,this.index,-1,0,4))}else{let n=s.buffer[this.index+3];if(n<(i<0?s.buffer.length:s.buffer[this.stack[i]+3]))return this.yieldBuf(n)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let s,i,{buffer:n}=this;if(n){if(e>0){if(this.index<n.buffer.buffer.length)return!1}else for(let r=0;r<this.index;r++)if(n.buffer.buffer[r+3]<this.index)return!1;({index:s,parent:i}=n)}else({index:s,_parent:i}=this._tree);for(;i;{index:s,_parent:i}=i)if(s>-1)for(let r=s+e,o=e<0?-1:i._tree.children.length;r!=o;r+=e){let l=i._tree.children[r];if(this.mode&Ht.IncludeAnonymous||l instanceof un||!l.type.isAnonymous||Hc(l))return!1}return!0}move(e,s){if(s&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,s=0){for(;(this.from==this.to||(s<1?this.from>=e:this.from>e)||(s>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,s););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,s=null,i=0;if(e&&e.context==this.buffer)e:for(let n=this.index,r=this.stack.length;r>=0;){for(let o=e;o;o=o._parent)if(o.index==n){if(n==this.index)return o;s=o,i=r+1;break e}n=this.stack[--r]}for(let n=i;n<this.stack.length;n++)s=new Zi(this.buffer,s,this.stack[n]);return this.bufferNode=new Zi(this.buffer,s,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,s){for(let i=0;;){let n=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(n=!0)}for(;;){if(n&&s&&s(this),n=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,n=!0}}}matchContext(e){if(!this.buffer)return qd(this.node.parent,e);let{buffer:s}=this.buffer,{types:i}=s.set;for(let n=e.length-1,r=this.stack.length-1;n>=0;r--){if(r<0)return qd(this._tree,e,n);let o=i[s.buffer[this.stack[r]]];if(!o.isAnonymous){if(e[n]&&e[n]!=o.name)return!1;n--}}return!0}}function Hc(t){return t.children.some(e=>e instanceof un||!e.type.isAnonymous||Hc(e))}function D5(t){var e;let{buffer:s,nodeSet:i,maxBufferLength:n=S5,reused:r=[],minRepeatType:o=i.types.length}=t,l=Array.isArray(s)?new Fc(s,s.length):s,a=i.types,d=0,u=0;function f(N,B,I,Z,ee,fe){let{id:X,start:z,end:ae,size:oe}=l,H=u,g=d;if(oe<0)if(l.next(),oe==-1){let be=r[X];I.push(be),Z.push(z-N);return}else if(oe==-3){d=X;return}else if(oe==-4){u=X;return}else throw new RangeError(`Unrecognized record size: ${oe}`);let p=a[X],D,Y,A=z-N;if(ae-z<=n&&(Y=_(l.pos-B,ee))){let be=new Uint16Array(Y.size-Y.skip),ge=l.pos-Y.size,qe=be.length;for(;l.pos>ge;)qe=M(Y.start,be,qe);D=new un(be,ae-Y.start,i),A=Y.start-N}else{let be=l.pos-oe;l.next();let ge=[],qe=[],Ne=X>=o?X:-1,_t=0,st=ae;for(;l.pos>be;)Ne>=0&&l.id==Ne&&l.size>=0?(l.end<=st-n&&(w(ge,qe,z,_t,l.end,st,Ne,H,g),_t=ge.length,st=l.end),l.next()):fe>2500?h(z,be,ge,qe):f(z,be,ge,qe,Ne,fe+1);if(Ne>=0&&_t>0&&_t<ge.length&&w(ge,qe,z,_t,z,st,Ne,H,g),ge.reverse(),qe.reverse(),Ne>-1&&_t>0){let V=m(p,g);D=Wc(p,ge,qe,0,ge.length,0,ae-z,V,V)}else D=S(p,ge,qe,ae-z,H-ae,g)}I.push(D),Z.push(A)}function h(N,B,I,Z){let ee=[],fe=0,X=-1;for(;l.pos>B;){let{id:z,start:ae,end:oe,size:H}=l;if(H>4)l.next();else{if(X>-1&&ae<X)break;X<0&&(X=oe-n),ee.push(z,ae,oe),fe++,l.next()}}if(fe){let z=new Uint16Array(fe*4),ae=ee[ee.length-2];for(let oe=ee.length-3,H=0;oe>=0;oe-=3)z[H++]=ee[oe],z[H++]=ee[oe+1]-ae,z[H++]=ee[oe+2]-ae,z[H++]=H;I.push(new un(z,ee[2]-ae,i)),Z.push(ae-N)}}function m(N,B){return(I,Z,ee)=>{let fe=0,X=I.length-1,z,ae;if(X>=0&&(z=I[X])instanceof kt){if(!X&&z.type==N&&z.length==ee)return z;(ae=z.prop(Ge.lookAhead))&&(fe=Z[X]+z.length+ae)}return S(N,I,Z,ee,fe,B)}}function w(N,B,I,Z,ee,fe,X,z,ae){let oe=[],H=[];for(;N.length>Z;)oe.push(N.pop()),H.push(B.pop()+I-ee);N.push(S(i.types[X],oe,H,fe-ee,z-fe,ae)),B.push(ee-I)}function S(N,B,I,Z,ee,fe,X){if(fe){let z=[Ge.contextHash,fe];X=X?[z].concat(X):[z]}if(ee>25){let z=[Ge.lookAhead,ee];X=X?[z].concat(X):[z]}return new kt(N,B,I,Z,X)}function _(N,B){let I=l.fork(),Z=0,ee=0,fe=0,X=I.end-n,z={size:0,start:0,skip:0};e:for(let ae=I.pos-N;I.pos>ae;){let oe=I.size;if(I.id==B&&oe>=0){z.size=Z,z.start=ee,z.skip=fe,fe+=4,Z+=4,I.next();continue}let H=I.pos-oe;if(oe<0||H<ae||I.start<X)break;let g=I.id>=o?4:0,p=I.start;for(I.next();I.pos>H;){if(I.size<0)if(I.size==-3)g+=4;else break e;else I.id>=o&&(g+=4);I.next()}ee=p,Z+=oe,fe+=g}return(B<0||Z==N)&&(z.size=Z,z.start=ee,z.skip=fe),z.size>4?z:void 0}function M(N,B,I){let{id:Z,start:ee,end:fe,size:X}=l;if(l.next(),X>=0&&Z<o){let z=I;if(X>4){let ae=l.pos-(X-4);for(;l.pos>ae;)I=M(N,B,I)}B[--I]=z,B[--I]=fe-N,B[--I]=ee-N,B[--I]=Z}else X==-3?d=Z:X==-4&&(u=Z);return I}let L=[],$=[];for(;l.pos>0;)f(t.start||0,t.bufferStart||0,L,$,-1,0);let T=(e=t.length)!==null&&e!==void 0?e:L.length?$[0]+L[0].length:0;return new kt(a[t.topID],L.reverse(),$.reverse(),T)}const Tp=new WeakMap;function Nl(t,e){if(!t.isAnonymous||e instanceof un||e.type!=t)return 1;let s=Tp.get(e);if(s==null){s=1;for(let i of e.children){if(i.type!=t||!(i instanceof kt)){s=1;break}s+=Nl(t,i)}Tp.set(e,s)}return s}function Wc(t,e,s,i,n,r,o,l,a){let d=0;for(let w=i;w<n;w++)d+=Nl(t,e[w]);let u=Math.ceil(d*1.5/8),f=[],h=[];function m(w,S,_,M,L){for(let $=_;$<M;){let T=$,N=S[$],B=Nl(t,w[$]);for($++;$<M;$++){let I=Nl(t,w[$]);if(B+I>=u)break;B+=I}if($==T+1){if(B>u){let I=w[T];m(I.children,I.positions,0,I.children.length,S[T]+L);continue}f.push(w[T])}else{let I=S[$-1]+w[$-1].length-N;f.push(Wc(t,w,S,T,$,N,I,null,a))}h.push(N+L-r)}}return m(e,s,i,n,0),(l||a)(f,h,o)}class $n{constructor(e,s,i,n,r=!1,o=!1){this.from=e,this.to=s,this.tree=i,this.offset=n,this.open=(r?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,s=[],i=!1){let n=[new $n(0,e.length,e,0,!1,i)];for(let r of s)r.to>e.length&&n.push(r);return n}static applyChanges(e,s,i=128){if(!s.length)return e;let n=[],r=1,o=e.length?e[0]:null;for(let l=0,a=0,d=0;;l++){let u=l<s.length?s[l]:null,f=u?u.fromA:1e9;if(f-a>=i)for(;o&&o.from<f;){let h=o;if(a>=h.from||f<=h.to||d){let m=Math.max(h.from,a)-d,w=Math.min(h.to,f)-d;h=m>=w?null:new $n(m,w,h.tree,h.offset+d,l>0,!!u)}if(h&&n.push(h),o.to>f)break;o=r<e.length?e[r++]:null}if(!u)break;a=u.toA,d=u.toA-u.toB}return n}}class wy{startParse(e,s,i){return typeof e=="string"&&(e=new T5(e)),i=i?i.length?i.map(n=>new Tu(n.from,n.to)):[new Tu(0,0)]:[new Tu(0,e.length)],this.createParse(e,s||[],i)}parse(e,s,i){let n=this.startParse(e,s,i);for(;;){let r=n.advance();if(r)return r}}}class T5{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,s){return this.string.slice(e,s)}}new Ge({perNode:!0});let E5=0;class Ds{constructor(e,s,i,n){this.name=e,this.set=s,this.base=i,this.modified=n,this.id=E5++}toString(){let{name:e}=this;for(let s of this.modified)s.name&&(e=`${s.name}(${e})`);return e}static define(e,s){let i=typeof e=="string"?e:"?";if(e instanceof Ds&&(s=e),s?.base)throw new Error("Can not derive from a modified tag");let n=new Ds(i,[],null,[]);if(n.set.push(n),s)for(let r of s.set)n.set.push(r);return n}static defineModifier(e){let s=new aa(e);return i=>i.modified.indexOf(s)>-1?i:aa.get(i.base||i,i.modified.concat(s).sort((n,r)=>n.id-r.id))}}let $5=0;class aa{constructor(e){this.name=e,this.instances=[],this.id=$5++}static get(e,s){if(!s.length)return e;let i=s[0].instances.find(l=>l.base==e&&P5(s,l.modified));if(i)return i;let n=[],r=new Ds(e.name,n,e,s);for(let l of s)l.instances.push(r);let o=O5(s);for(let l of e.set)if(!l.modified.length)for(let a of o)n.push(aa.get(l,a));return r}}function P5(t,e){return t.length==e.length&&t.every((s,i)=>s==e[i])}function O5(t){let e=[[]];for(let s=0;s<t.length;s++)for(let i=0,n=e.length;i<n;i++)e.push(e[i].concat(t[s]));return e.sort((s,i)=>i.length-s.length)}function R5(t){let e=Object.create(null);for(let s in t){let i=t[s];Array.isArray(i)||(i=[i]);for(let n of s.split(" "))if(n){let r=[],o=2,l=n;for(let f=0;;){if(l=="..."&&f>0&&f+3==n.length){o=1;break}let h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!h)throw new RangeError("Invalid path: "+n);if(r.push(h[0]=="*"?"":h[0][0]=='"'?JSON.parse(h[0]):h[0]),f+=h[0].length,f==n.length)break;let m=n[f++];if(f==n.length&&m=="!"){o=0;break}if(m!="/")throw new RangeError("Invalid path: "+n);l=n.slice(f)}let a=r.length-1,d=r[a];if(!d)throw new RangeError("Invalid path: "+n);let u=new To(i,o,a>0?r.slice(0,a):null);e[d]=u.sort(e[d])}}return Sy.add(e)}const Sy=new Ge({combine(t,e){let s,i,n;for(;t||e;){if(!t||e&&t.depth>=e.depth?(n=e,e=e.next):(n=t,t=t.next),s&&s.mode==n.mode&&!n.context&&!s.context)continue;let r=new To(n.tags,n.mode,n.context);s?s.next=r:i=r,s=r}return i}});class To{constructor(e,s,i,n){this.tags=e,this.mode=s,this.context=i,this.next=n}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}To.empty=new To([],2,null);function Cy(t,e){let s=Object.create(null);for(let r of t)if(!Array.isArray(r.tag))s[r.tag.id]=r.class;else for(let o of r.tag)s[o.id]=r.class;let{scope:i,all:n=null}=e||{};return{style:r=>{let o=n;for(let l of r)for(let a of l.set){let d=s[a.id];if(d){o=o?o+" "+d:d;break}}return o},scope:i}}function j5(t,e){let s=null;for(let i of t){let n=i.style(e);n&&(s=s?s+" "+n:n)}return s}function L5(t,e,s,i=0,n=t.length){let r=new B5(i,Array.isArray(e)?e:[e],s);r.highlightRange(t.cursor(),i,n,"",r.highlighters),r.flush(n)}class B5{constructor(e,s,i){this.at=e,this.highlighters=s,this.span=i,this.class=""}startSpan(e,s){s!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=s)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,s,i,n,r){let{type:o,from:l,to:a}=e;if(l>=i||a<=s)return;o.isTop&&(r=this.highlighters.filter(m=>!m.scope||m.scope(o)));let d=n,u=I5(e)||To.empty,f=j5(r,u.tags);if(f&&(d&&(d+=" "),d+=f,u.mode==1&&(n+=(n?" ":"")+f)),this.startSpan(Math.max(s,l),d),u.opaque)return;let h=e.tree&&e.tree.prop(Ge.mounted);if(h&&h.overlay){let m=e.node.enter(h.overlay[0].from+l,1),w=this.highlighters.filter(_=>!_.scope||_.scope(h.tree.type)),S=e.firstChild();for(let _=0,M=l;;_++){let L=_<h.overlay.length?h.overlay[_]:null,$=L?L.from+l:a,T=Math.max(s,M),N=Math.min(i,$);if(T<N&&S)for(;e.from<N&&(this.highlightRange(e,T,N,n,r),this.startSpan(Math.min(N,e.to),d),!(e.to>=$||!e.nextSibling())););if(!L||$>i)break;M=L.to+l,M>s&&(this.highlightRange(m.cursor(),Math.max(s,L.from+l),Math.min(i,M),"",w),this.startSpan(Math.min(i,M),d))}S&&e.parent()}else if(e.firstChild()){h&&(n="");do if(!(e.to<=s)){if(e.from>=i)break;this.highlightRange(e,s,i,n,r),this.startSpan(Math.min(i,e.to),d)}while(e.nextSibling());e.parent()}}}function I5(t){let e=t.type.prop(Sy);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const xe=Ds.define,bl=xe(),qi=xe(),Ep=xe(qi),$p=xe(qi),Gi=xe(),xl=xe(Gi),Eu=xe(Gi),li=xe(),vn=xe(li),ri=xe(),oi=xe(),Kd=xe(),Br=xe(Kd),kl=xe(),Se={comment:bl,lineComment:xe(bl),blockComment:xe(bl),docComment:xe(bl),name:qi,variableName:xe(qi),typeName:Ep,tagName:xe(Ep),propertyName:$p,attributeName:xe($p),className:xe(qi),labelName:xe(qi),namespace:xe(qi),macroName:xe(qi),literal:Gi,string:xl,docString:xe(xl),character:xe(xl),attributeValue:xe(xl),number:Eu,integer:xe(Eu),float:xe(Eu),bool:xe(Gi),regexp:xe(Gi),escape:xe(Gi),color:xe(Gi),url:xe(Gi),keyword:ri,self:xe(ri),null:xe(ri),atom:xe(ri),unit:xe(ri),modifier:xe(ri),operatorKeyword:xe(ri),controlKeyword:xe(ri),definitionKeyword:xe(ri),moduleKeyword:xe(ri),operator:oi,derefOperator:xe(oi),arithmeticOperator:xe(oi),logicOperator:xe(oi),bitwiseOperator:xe(oi),compareOperator:xe(oi),updateOperator:xe(oi),definitionOperator:xe(oi),typeOperator:xe(oi),controlOperator:xe(oi),punctuation:Kd,separator:xe(Kd),bracket:Br,angleBracket:xe(Br),squareBracket:xe(Br),paren:xe(Br),brace:xe(Br),content:li,heading:vn,heading1:xe(vn),heading2:xe(vn),heading3:xe(vn),heading4:xe(vn),heading5:xe(vn),heading6:xe(vn),contentSeparator:xe(li),list:xe(li),quote:xe(li),emphasis:xe(li),strong:xe(li),link:xe(li),monospace:xe(li),strikethrough:xe(li),inserted:xe(),deleted:xe(),changed:xe(),invalid:xe(),meta:kl,documentMeta:xe(kl),annotation:xe(kl),processingInstruction:xe(kl),definition:Ds.defineModifier("definition"),constant:Ds.defineModifier("constant"),function:Ds.defineModifier("function"),standard:Ds.defineModifier("standard"),local:Ds.defineModifier("local"),special:Ds.defineModifier("special")};for(let t in Se){let e=Se[t];e instanceof Ds&&(e.name=t)}Cy([{tag:Se.link,class:"tok-link"},{tag:Se.heading,class:"tok-heading"},{tag:Se.emphasis,class:"tok-emphasis"},{tag:Se.strong,class:"tok-strong"},{tag:Se.keyword,class:"tok-keyword"},{tag:Se.atom,class:"tok-atom"},{tag:Se.bool,class:"tok-bool"},{tag:Se.url,class:"tok-url"},{tag:Se.labelName,class:"tok-labelName"},{tag:Se.inserted,class:"tok-inserted"},{tag:Se.deleted,class:"tok-deleted"},{tag:Se.literal,class:"tok-literal"},{tag:Se.string,class:"tok-string"},{tag:Se.number,class:"tok-number"},{tag:[Se.regexp,Se.escape,Se.special(Se.string)],class:"tok-string2"},{tag:Se.variableName,class:"tok-variableName"},{tag:Se.local(Se.variableName),class:"tok-variableName tok-local"},{tag:Se.definition(Se.variableName),class:"tok-variableName tok-definition"},{tag:Se.special(Se.variableName),class:"tok-variableName2"},{tag:Se.definition(Se.propertyName),class:"tok-propertyName tok-definition"},{tag:Se.typeName,class:"tok-typeName"},{tag:Se.namespace,class:"tok-namespace"},{tag:Se.className,class:"tok-className"},{tag:Se.macroName,class:"tok-macroName"},{tag:Se.propertyName,class:"tok-propertyName"},{tag:Se.operator,class:"tok-operator"},{tag:Se.comment,class:"tok-comment"},{tag:Se.meta,class:"tok-meta"},{tag:Se.invalid,class:"tok-invalid"},{tag:Se.punctuation,class:"tok-punctuation"}]);var $u;const Qn=new Ge;function U5(t){return De.define({combine:t?e=>e.concat(t):void 0})}const N5=new Ge;class Fs{constructor(e,s,i=[],n=""){this.data=e,this.name=n,Ze.prototype.hasOwnProperty("tree")||Object.defineProperty(Ze.prototype,"tree",{get(){return ts(this)}}),this.parser=s,this.extension=[dn.of(this),Ze.languageData.of((r,o,l)=>{let a=Pp(r,o,l),d=a.type.prop(Qn);if(!d)return[];let u=r.facet(d),f=a.type.prop(N5);if(f){let h=a.resolve(o-a.from,l);for(let m of f)if(m.test(h,r)){let w=r.facet(m.facet);return m.type=="replace"?w:w.concat(u)}}return u})].concat(i)}isActiveAt(e,s,i=-1){return Pp(e,s,i).type.prop(Qn)==this.data}findRegions(e){let s=e.facet(dn);if(s?.data==this.data)return[{from:0,to:e.doc.length}];if(!s||!s.allowsNesting)return[];let i=[],n=(r,o)=>{if(r.prop(Qn)==this.data){i.push({from:o,to:o+r.length});return}let l=r.prop(Ge.mounted);if(l){if(l.tree.prop(Qn)==this.data){if(l.overlay)for(let a of l.overlay)i.push({from:a.from+o,to:a.to+o});else i.push({from:o,to:o+r.length});return}else if(l.overlay){let a=i.length;if(n(l.tree,l.overlay[0].from+o),i.length>a)return}}for(let a=0;a<r.children.length;a++){let d=r.children[a];d instanceof kt&&n(d,r.positions[a]+o)}};return n(ts(e),0),i}get allowsNesting(){return!0}}Fs.setState=We.define();function Pp(t,e,s){let i=t.facet(dn),n=ts(t).topNode;if(!i||i.allowsNesting)for(let r=n;r;r=r.enter(e,s,Ht.ExcludeBuffers))r.type.isTop&&(n=r);return n}function ts(t){let e=t.field(Fs.state,!1);return e?e.tree:kt.empty}class z5{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,s){let i=this.cursorPos-this.string.length;return e<i||s>=this.cursorPos?this.doc.sliceString(e,s):this.string.slice(e-i,s-i)}}let Ir=null;class br{constructor(e,s,i=[],n,r,o,l,a){this.parser=e,this.state=s,this.fragments=i,this.tree=n,this.treeLen=r,this.viewport=o,this.skipped=l,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,s,i){return new br(e,s,[],kt.empty,0,i,[],null)}startParse(){return this.parser.startParse(new z5(this.state.doc),this.fragments)}work(e,s){return s!=null&&s>=this.state.doc.length&&(s=void 0),this.tree!=kt.empty&&this.isDone(s??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let n=Date.now()+e;e=()=>Date.now()>n}for(this.parse||(this.parse=this.startParse()),s!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>s)&&s<this.state.doc.length&&this.parse.stopAt(s);;){let n=this.parse.advance();if(n)if(this.fragments=this.withoutTempSkipped($n.addTree(n,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=n,this.parse=null,this.treeLen<(s??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,s;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(s=this.parse.advance()););}),this.treeLen=e,this.tree=s,this.fragments=this.withoutTempSkipped($n.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let s=Ir;Ir=this;try{return e()}finally{Ir=s}}withoutTempSkipped(e){for(let s;s=this.tempSkipped.pop();)e=Op(e,s.from,s.to);return e}changes(e,s){let{fragments:i,tree:n,treeLen:r,viewport:o,skipped:l}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((d,u,f,h)=>a.push({fromA:d,toA:u,fromB:f,toB:h})),i=$n.applyChanges(i,a),n=kt.empty,r=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){l=[];for(let d of this.skipped){let u=e.mapPos(d.from,1),f=e.mapPos(d.to,-1);u<f&&l.push({from:u,to:f})}}}return new br(this.parser,s,i,n,r,o,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let s=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:n,to:r}=this.skipped[i];n<e.to&&r>e.from&&(this.fragments=Op(this.fragments,n,r),this.skipped.splice(i--,1))}return this.skipped.length>=s?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,s){this.skipped.push({from:e,to:s})}static getSkippingParser(e){return new class extends wy{createParse(s,i,n){let r=n[0].from,o=n[n.length-1].to;return{parsedPos:r,advance(){let a=Ir;if(a){for(let d of n)a.tempSkipped.push(d);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=o,new kt(bs.none,[],[],o-r)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let s=this.fragments;return this.treeLen>=e&&s.length&&s[0].from==0&&s[0].to>=e}static get(){return Ir}}function Op(t,e,s){return $n.applyChanges(t,[{fromA:e,toA:s,fromB:e,toB:s}])}class xr{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let s=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),s.viewport.to);return s.work(20,i)||s.takeTree(),new xr(s)}static init(e){let s=Math.min(3e3,e.doc.length),i=br.create(e.facet(dn).parser,e,{from:0,to:s});return i.work(20,s)||i.takeTree(),new xr(i)}}Fs.state=Gt.define({create:xr.init,update(t,e){for(let s of e.effects)if(s.is(Fs.setState))return s.value;return e.startState.facet(dn)!=e.state.facet(dn)?xr.init(e.state):t.apply(e)}});let _y=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(_y=t=>{let e=-1,s=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(s):cancelIdleCallback(e)});const Pu=typeof navigator<"u"&&(!(($u=navigator.scheduling)===null||$u===void 0)&&$u.isInputPending)?()=>navigator.scheduling.isInputPending():null,F5=$t.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let s=this.view.state.field(Fs.state).context;(s.updateViewport(e.view.viewport)||this.view.viewport.to>s.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(s)}scheduleWork(){if(this.working)return;let{state:e}=this.view,s=e.field(Fs.state);(s.tree!=s.context.tree||!s.context.isDone(e.doc.length))&&(this.working=_y(this.work))}work(e){this.working=null;let s=Date.now();if(this.chunkEnd<s&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=s+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:n}}=this.view,r=i.field(Fs.state);if(r.tree==r.context.tree&&r.context.isDone(n+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!Pu?Math.max(25,e.timeRemaining()-5):1e9),l=r.context.treeLen<n&&i.doc.length>n+1e3,a=r.context.work(()=>Pu&&Pu()||Date.now()>o,n+(l?0:1e5));this.chunkBudget-=Date.now()-s,(a||this.chunkBudget<=0)&&(r.context.takeTree(),this.view.dispatch({effects:Fs.setState.of(new xr(r.context))})),this.chunkBudget>0&&!(a&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(r.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(s=>ys(this.view.state,s)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),dn=De.define({combine(t){return t.length?t[0]:null},enables:t=>[Fs.state,F5,Me.contentAttributes.compute([t],e=>{let s=e.facet(t);return s&&s.name?{"data-language":s.name}:{}})]}),H5=De.define(),qc=De.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(s=>s!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function In(t){let e=t.facet(qc);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function Eo(t,e){let s="",i=t.tabSize,n=t.facet(qc)[0];if(n=="	"){for(;e>=i;)s+="	",e-=i;n=" "}for(let r=0;r<e;r++)s+=n;return s}function Gc(t,e){t instanceof Ze&&(t=new Ua(t));for(let i of t.state.facet(H5)){let n=i(t,e);if(n!==void 0)return n}let s=ts(t.state);return s.length>=e?W5(t,s,e):null}class Ua{constructor(e,s={}){this.state=e,this.options=s,this.unit=In(e)}lineAt(e,s=1){let i=this.state.doc.lineAt(e),{simulateBreak:n,simulateDoubleBreak:r}=this.options;return n!=null&&n>=i.from&&n<=i.to?r&&n==e?{text:"",from:e}:(s<0?n<e:n<=e)?{text:i.text.slice(n-i.from),from:n}:{text:i.text.slice(0,n-i.from),from:i.from}:i}textAfterPos(e,s=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:n}=this.lineAt(e,s);return i.slice(e-n,Math.min(i.length,e+100-n))}column(e,s=1){let{text:i,from:n}=this.lineAt(e,s),r=this.countColumn(i,e-n),o=this.options.overrideIndentation?this.options.overrideIndentation(n):-1;return o>-1&&(r+=o-this.countColumn(i,i.search(/\S|$/))),r}countColumn(e,s=e.length){return Vr(e,this.state.tabSize,s)}lineIndent(e,s=1){let{text:i,from:n}=this.lineAt(e,s),r=this.options.overrideIndentation;if(r){let o=r(n);if(o>-1)return o}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Ay=new Ge;function W5(t,e,s){let i=e.resolveStack(s),n=e.resolveInner(s,-1).resolve(s,0).enterUnfinishedNodesBefore(s);if(n!=i.node){let r=[];for(let o=n;o&&!(o.from<i.node.from||o.to>i.node.to||o.from==i.node.from&&o.type==i.node.type);o=o.parent)r.push(o);for(let o=r.length-1;o>=0;o--)i={node:r[o],next:i}}return Vy(i,t,s)}function Vy(t,e,s){for(let i=t;i;i=i.next){let n=G5(i.node);if(n)return n(Kc.create(e,s,i))}return 0}function q5(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function G5(t){let e=t.type.prop(Ay);if(e)return e;let s=t.firstChild,i;if(s&&(i=s.type.prop(Ge.closedBy))){let n=t.lastChild,r=n&&i.indexOf(n.name)>-1;return o=>X5(o,!0,1,void 0,r&&!q5(o)?n.from:void 0)}return t.parent==null?K5:null}function K5(){return 0}class Kc extends Ua{constructor(e,s,i){super(e.state,e.options),this.base=e,this.pos=s,this.context=i}get node(){return this.context.node}static create(e,s,i){return new Kc(e,s,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let s=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(s.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(J5(i,e))break;s=this.state.doc.lineAt(i.from)}return this.lineIndent(s.from)}continue(){return Vy(this.context.next,this.base,this.pos)}}function J5(t,e){for(let s=e;s;s=s.parent)if(t==s)return!0;return!1}function Y5(t){let e=t.node,s=e.childAfter(e.from),i=e.lastChild;if(!s)return null;let n=t.options.simulateBreak,r=t.state.doc.lineAt(s.from),o=n==null||n<=r.from?r.to:Math.min(r.to,n);for(let l=s.to;;){let a=e.childAfter(l);if(!a||a==i)return null;if(!a.type.isSkipped){if(a.from>=o)return null;let d=/^ */.exec(r.text.slice(s.to-r.from))[0].length;return{from:s.from,to:s.to+d}}l=a.to}}function X5(t,e,s,i,n){let r=t.textAfter,o=r.match(/^\s*/)[0].length,l=i&&r.slice(o,o+i.length)==i||n==t.pos+o,a=Y5(t);return a?l?t.column(a.from):t.column(a.to):t.baseIndent+(l?0:t.unit*s)}const Q5=200;function Z5(){return Ze.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let s=t.newDoc,{head:i}=t.newSelection.main,n=s.lineAt(i);if(i>n.from+Q5)return t;let r=s.sliceString(n.from,i);if(!e.some(d=>d.test(r)))return t;let{state:o}=t,l=-1,a=[];for(let{head:d}of o.selection.ranges){let u=o.doc.lineAt(d);if(u.from==l)continue;l=u.from;let f=Gc(o,u.from);if(f==null)continue;let h=/^\s*/.exec(u.text)[0],m=Eo(o,f);h!=m&&a.push({from:u.from,to:u.from+h.length,insert:m})}return a.length?[t,{changes:a,sequential:!0}]:t})}const e3=De.define(),t3=new Ge;function s3(t,e,s){let i=ts(t);if(i.length<s)return null;let n=i.resolveStack(s,1),r=null;for(let o=n;o;o=o.next){let l=o.node;if(l.to<=s||l.from>s)continue;if(r&&l.from<e)break;let a=l.type.prop(t3);if(a&&(l.to<i.length-50||i.length==t.doc.length||!i3(l))){let d=a(l,t);d&&d.from<=s&&d.from>=e&&d.to>s&&(r=d)}}return r}function i3(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function ua(t,e,s){for(let i of t.facet(e3)){let n=i(t,e,s);if(n)return n}return s3(t,e,s)}function My(t,e){let s=e.mapPos(t.from,1),i=e.mapPos(t.to,-1);return s>=i?void 0:{from:s,to:i}}const Na=We.define({map:My}),Wo=We.define({map:My});function Dy(t){let e=[];for(let{head:s}of t.state.selection.ranges)e.some(i=>i.from<=s&&i.to>=s)||e.push(t.lineBlockAt(s));return e}const Un=Gt.define({create(){return Ie.none},update(t,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((s,i)=>t=Rp(t,s,i)),t=t.map(e.changes);for(let s of e.effects)if(s.is(Na)&&!n3(t,s.value.from,s.value.to)){let{preparePlaceholder:i}=e.state.facet($y),n=i?Ie.replace({widget:new c3(i(e.state,s.value))}):jp;t=t.update({add:[n.range(s.value.from,s.value.to)]})}else s.is(Wo)&&(t=t.update({filter:(i,n)=>s.value.from!=i||s.value.to!=n,filterFrom:s.value.from,filterTo:s.value.to}));return e.selection&&(t=Rp(t,e.selection.main.head)),t},provide:t=>Me.decorations.from(t),toJSON(t,e){let s=[];return t.between(0,e.doc.length,(i,n)=>{s.push(i,n)}),s},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let s=0;s<t.length;){let i=t[s++],n=t[s++];if(typeof i!="number"||typeof n!="number")throw new RangeError("Invalid JSON for fold state");e.push(jp.range(i,n))}return Ie.set(e,!0)}});function Rp(t,e,s=e){let i=!1;return t.between(e,s,(n,r)=>{n<s&&r>e&&(i=!0)}),i?t.update({filterFrom:e,filterTo:s,filter:(n,r)=>n>=s||r<=e}):t}function da(t,e,s){var i;let n=null;return(i=t.field(Un,!1))===null||i===void 0||i.between(e,s,(r,o)=>{(!n||n.from>r)&&(n={from:r,to:o})}),n}function n3(t,e,s){let i=!1;return t.between(e,e,(n,r)=>{n==e&&r==s&&(i=!0)}),i}function Ty(t,e){return t.field(Un,!1)?e:e.concat(We.appendConfig.of(Py()))}const r3=t=>{for(let e of Dy(t)){let s=ua(t.state,e.from,e.to);if(s)return t.dispatch({effects:Ty(t.state,[Na.of(s),Ey(t,s)])}),!0}return!1},o3=t=>{if(!t.state.field(Un,!1))return!1;let e=[];for(let s of Dy(t)){let i=da(t.state,s.from,s.to);i&&e.push(Wo.of(i),Ey(t,i,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function Ey(t,e,s=!0){let i=t.state.doc.lineAt(e.from).number,n=t.state.doc.lineAt(e.to).number;return Me.announce.of(`${t.state.phrase(s?"Folded lines":"Unfolded lines")} ${i} ${t.state.phrase("to")} ${n}.`)}const l3=t=>{let{state:e}=t,s=[];for(let i=0;i<e.doc.length;){let n=t.lineBlockAt(i),r=ua(e,n.from,n.to);r&&s.push(Na.of(r)),i=(r?t.lineBlockAt(r.to):n).to+1}return s.length&&t.dispatch({effects:Ty(t.state,s)}),!!s.length},a3=t=>{let e=t.state.field(Un,!1);if(!e||!e.size)return!1;let s=[];return e.between(0,t.state.doc.length,(i,n)=>{s.push(Wo.of({from:i,to:n}))}),t.dispatch({effects:s}),!0},u3=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:r3},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:o3},{key:"Ctrl-Alt-[",run:l3},{key:"Ctrl-Alt-]",run:a3}],d3={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},$y=De.define({combine(t){return bi(t,d3)}});function Py(t){return[Un,p3]}function Oy(t,e){let{state:s}=t,i=s.facet($y),n=o=>{let l=t.lineBlockAt(t.posAtDOM(o.target)),a=da(t.state,l.from,l.to);a&&t.dispatch({effects:Wo.of(a)}),o.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(t,n,e);let r=document.createElement("span");return r.textContent=i.placeholderText,r.setAttribute("aria-label",s.phrase("folded code")),r.title=s.phrase("unfold"),r.className="cm-foldPlaceholder",r.onclick=n,r}const jp=Ie.replace({widget:new class extends cn{toDOM(t){return Oy(t,null)}}});class c3 extends cn{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return Oy(e,this.value)}}const f3={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class Ou extends Li{constructor(e,s){super(),this.config=e,this.open=s}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let s=document.createElement("span");return s.textContent=this.open?this.config.openText:this.config.closedText,s.title=e.state.phrase(this.open?"Fold line":"Unfold line"),s}}function h3(t={}){let e={...f3,...t},s=new Ou(e,!0),i=new Ou(e,!1),n=$t.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(dn)!=o.state.facet(dn)||o.startState.field(Un,!1)!=o.state.field(Un,!1)||ts(o.startState)!=ts(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let l=new Ri;for(let a of o.viewportLineBlocks){let d=da(o.state,a.from,a.to)?i:ua(o.state,a.from,a.to)?s:null;d&&l.add(a.from,a.from,d)}return l.finish()}}),{domEventHandlers:r}=e;return[n,f5({class:"cm-foldGutter",markers(o){var l;return((l=o.plugin(n))===null||l===void 0?void 0:l.markers)||et.empty},initialSpacer(){return new Ou(e,!1)},domEventHandlers:{...r,click:(o,l,a)=>{if(r.click&&r.click(o,l,a))return!0;let d=da(o.state,l.from,l.to);if(d)return o.dispatch({effects:Wo.of(d)}),!0;let u=ua(o.state,l.from,l.to);return u?(o.dispatch({effects:Na.of(u)}),!0):!1}}}),Py()]}const p3=Me.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class qo{constructor(e,s){this.specs=e;let i;function n(l){let a=on.newName();return(i||(i=Object.create(null)))["."+a]=l,a}const r=typeof s.all=="string"?s.all:s.all?n(s.all):void 0,o=s.scope;this.scope=o instanceof Fs?l=>l.prop(Qn)==o.data:o?l=>l==o:void 0,this.style=Cy(e.map(l=>({tag:l.tag,class:l.class||n(Object.assign({},l,{tag:null}))})),{all:r}).style,this.module=i?new on(i):null,this.themeType=s.themeType}static define(e,s){return new qo(e,s||{})}}const Jd=De.define(),Ry=De.define({combine(t){return t.length?[t[0]]:null}});function Ru(t){let e=t.facet(Jd);return e.length?e:t.facet(Ry)}function jy(t,e){let s=[g3],i;return t instanceof qo&&(t.module&&s.push(Me.styleModule.of(t.module)),i=t.themeType),e?.fallback?s.push(Ry.of(t)):i?s.push(Jd.computeN([Me.darkTheme],n=>n.facet(Me.darkTheme)==(i=="dark")?[t]:[])):s.push(Jd.of(t)),s}class m3{constructor(e){this.markCache=Object.create(null),this.tree=ts(e.state),this.decorations=this.buildDeco(e,Ru(e.state)),this.decoratedTo=e.viewport.to}update(e){let s=ts(e.state),i=Ru(e.state),n=i!=Ru(e.startState),{viewport:r}=e.view,o=e.changes.mapPos(this.decoratedTo,1);s.length<r.to&&!n&&s.type==this.tree.type&&o>=r.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(s!=this.tree||e.viewportChanged||n)&&(this.tree=s,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=r.to)}buildDeco(e,s){if(!s||!this.tree.length)return Ie.none;let i=new Ri;for(let{from:n,to:r}of e.visibleRanges)L5(this.tree,s,(o,l,a)=>{i.add(o,l,this.markCache[a]||(this.markCache[a]=Ie.mark({class:a})))},n,r);return i.finish()}}const g3=zn.high($t.fromClass(m3,{decorations:t=>t.decorations})),y3=qo.define([{tag:Se.meta,color:"#404740"},{tag:Se.link,textDecoration:"underline"},{tag:Se.heading,textDecoration:"underline",fontWeight:"bold"},{tag:Se.emphasis,fontStyle:"italic"},{tag:Se.strong,fontWeight:"bold"},{tag:Se.strikethrough,textDecoration:"line-through"},{tag:Se.keyword,color:"#708"},{tag:[Se.atom,Se.bool,Se.url,Se.contentSeparator,Se.labelName],color:"#219"},{tag:[Se.literal,Se.inserted],color:"#164"},{tag:[Se.string,Se.deleted],color:"#a11"},{tag:[Se.regexp,Se.escape,Se.special(Se.string)],color:"#e40"},{tag:Se.definition(Se.variableName),color:"#00f"},{tag:Se.local(Se.variableName),color:"#30a"},{tag:[Se.typeName,Se.namespace],color:"#085"},{tag:Se.className,color:"#167"},{tag:[Se.special(Se.variableName),Se.macroName],color:"#256"},{tag:Se.definition(Se.propertyName),color:"#00c"},{tag:Se.comment,color:"#940"},{tag:Se.invalid,color:"#f00"}]),v3=Me.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Ly=1e4,By="()[]{}",Iy=De.define({combine(t){return bi(t,{afterCursor:!0,brackets:By,maxScanDistance:Ly,renderMatch:k3})}}),b3=Ie.mark({class:"cm-matchingBracket"}),x3=Ie.mark({class:"cm-nonmatchingBracket"});function k3(t){let e=[],s=t.matched?b3:x3;return e.push(s.range(t.start.from,t.start.to)),t.end&&e.push(s.range(t.end.from,t.end.to)),e}const w3=Gt.define({create(){return Ie.none},update(t,e){if(!e.docChanged&&!e.selection)return t;let s=[],i=e.state.facet(Iy);for(let n of e.state.selection.ranges){if(!n.empty)continue;let r=pi(e.state,n.head,-1,i)||n.head>0&&pi(e.state,n.head-1,1,i)||i.afterCursor&&(pi(e.state,n.head,1,i)||n.head<e.state.doc.length&&pi(e.state,n.head+1,-1,i));r&&(s=s.concat(i.renderMatch(r,e.state)))}return Ie.set(s,!0)},provide:t=>Me.decorations.from(t)}),S3=[w3,v3];function C3(t={}){return[Iy.of(t),S3]}const _3=new Ge;function Yd(t,e,s){let i=t.prop(e<0?Ge.openedBy:Ge.closedBy);if(i)return i;if(t.name.length==1){let n=s.indexOf(t.name);if(n>-1&&n%2==(e<0?1:0))return[s[n+e]]}return null}function Xd(t){let e=t.type.prop(_3);return e?e(t.node):t}function pi(t,e,s,i={}){let n=i.maxScanDistance||Ly,r=i.brackets||By,o=ts(t),l=o.resolveInner(e,s);for(let a=l;a;a=a.parent){let d=Yd(a.type,s,r);if(d&&a.from<a.to){let u=Xd(a);if(u&&(s>0?e>=u.from&&e<u.to:e>u.from&&e<=u.to))return A3(t,e,s,a,u,d,r)}}return V3(t,e,s,o,l.type,n,r)}function A3(t,e,s,i,n,r,o){let l=i.parent,a={from:n.from,to:n.to},d=0,u=l?.cursor();if(u&&(s<0?u.childBefore(i.from):u.childAfter(i.to)))do if(s<0?u.to<=i.from:u.from>=i.to){if(d==0&&r.indexOf(u.type.name)>-1&&u.from<u.to){let f=Xd(u);return{start:a,end:f?{from:f.from,to:f.to}:void 0,matched:!0}}else if(Yd(u.type,s,o))d++;else if(Yd(u.type,-s,o)){if(d==0){let f=Xd(u);return{start:a,end:f&&f.from<f.to?{from:f.from,to:f.to}:void 0,matched:!1}}d--}}while(s<0?u.prevSibling():u.nextSibling());return{start:a,matched:!1}}function V3(t,e,s,i,n,r,o){let l=s<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),a=o.indexOf(l);if(a<0||a%2==0!=s>0)return null;let d={from:s<0?e-1:e,to:s>0?e+1:e},u=t.doc.iterRange(e,s>0?t.doc.length:0),f=0;for(let h=0;!u.next().done&&h<=r;){let m=u.value;s<0&&(h+=m.length);let w=e+h*s;for(let S=s>0?0:m.length-1,_=s>0?m.length:-1;S!=_;S+=s){let M=o.indexOf(m[S]);if(!(M<0||i.resolveInner(w+S,1).type!=n))if(M%2==0==s>0)f++;else{if(f==1)return{start:d,end:{from:w+S,to:w+S+1},matched:M>>1==a>>1};f--}}s>0&&(h+=m.length)}return u.done?{start:d,matched:!1}:null}function Lp(t,e,s,i=0,n=0){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));let r=n;for(let o=i;o<e;o++)t.charCodeAt(o)==9?r+=s-r%s:r++;return r}class Uy{constructor(e,s,i,n){this.string=e,this.tabSize=s,this.indentUnit=i,this.overrideIndent=n,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let s=this.string.charAt(this.pos),i;if(typeof e=="string"?i=s==e:i=s&&(e instanceof RegExp?e.test(s):e(s)),i)return++this.pos,s}eatWhile(e){let s=this.pos;for(;this.eat(e););return this.pos>s}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let s=this.string.indexOf(e,this.pos);if(s>-1)return this.pos=s,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Lp(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:Lp(this.string,null,this.tabSize)}match(e,s,i){if(typeof e=="string"){let n=o=>i?o.toLowerCase():o,r=this.string.substr(this.pos,e.length);return n(r)==n(e)?(s!==!1&&(this.pos+=e.length),!0):null}else{let n=this.string.slice(this.pos).match(e);return n&&n.index>0?null:(n&&s!==!1&&(this.pos+=n[0].length),n)}}current(){return this.string.slice(this.start,this.pos)}}function M3(t){return{name:t.name||"",token:t.token,blankLine:t.blankLine||(()=>{}),startState:t.startState||(()=>!0),copyState:t.copyState||D3,indent:t.indent||(()=>null),languageData:t.languageData||{},tokenTable:t.tokenTable||Xc,mergeTokens:t.mergeTokens!==!1}}function D3(t){if(typeof t!="object")return t;let e={};for(let s in t){let i=t[s];e[s]=i instanceof Array?i.slice():i}return e}const Bp=new WeakMap;class Jc extends Fs{constructor(e){let s=U5(e.languageData),i=M3(e),n,r=new class extends wy{createParse(o,l,a){return new E3(n,o,l,a)}};super(s,r,[],e.name),this.topNode=O3(s,this),n=this,this.streamParser=i,this.stateAfter=new Ge({perNode:!0}),this.tokenTable=e.tokenTable?new Hy(i.tokenTable):P3}static define(e){return new Jc(e)}getIndent(e){let s,{overrideIndentation:i}=e.options;i&&(s=Bp.get(e.state),s!=null&&s<e.pos-1e4&&(s=void 0));let n=Yc(this,e.node.tree,e.node.from,e.node.from,s??e.pos),r,o;if(n?(o=n.state,r=n.pos+1):(o=this.streamParser.startState(e.unit),r=e.node.from),e.pos-r>1e4)return null;for(;r<e.pos;){let a=e.state.doc.lineAt(r),d=Math.min(e.pos,a.to);if(a.length){let u=i?i(a.from):-1,f=new Uy(a.text,e.state.tabSize,e.unit,u<0?void 0:u);for(;f.pos<d-a.from;)zy(this.streamParser.token,f,o)}else this.streamParser.blankLine(o,e.unit);if(d==e.pos)break;r=a.to+1}let l=e.lineAt(e.pos);return i&&s==null&&Bp.set(e.state,l.from),this.streamParser.indent(o,/^\s*(.*)/.exec(l.text)[1],e)}get allowsNesting(){return!1}}function Yc(t,e,s,i,n){let r=s>=i&&s+e.length<=n&&e.prop(t.stateAfter);if(r)return{state:t.streamParser.copyState(r),pos:s+e.length};for(let o=e.children.length-1;o>=0;o--){let l=e.children[o],a=s+e.positions[o],d=l instanceof kt&&a<n&&Yc(t,l,a,i,n);if(d)return d}return null}function Ny(t,e,s,i,n){if(n&&s<=0&&i>=e.length)return e;!n&&s==0&&e.type==t.topNode&&(n=!0);for(let r=e.children.length-1;r>=0;r--){let o=e.positions[r],l=e.children[r],a;if(o<i&&l instanceof kt){if(!(a=Ny(t,l,s-o,i-o,n)))break;return n?new kt(e.type,e.children.slice(0,r).concat(a),e.positions.slice(0,r+1),o+a.length):a}}return null}function T3(t,e,s,i,n){for(let r of e){let o=r.from+(r.openStart?25:0),l=r.to-(r.openEnd?25:0),a=o<=s&&l>s&&Yc(t,r.tree,0-r.offset,s,l),d;if(a&&a.pos<=i&&(d=Ny(t,r.tree,s+r.offset,a.pos+r.offset,!1)))return{state:a.state,tree:d}}return{state:t.streamParser.startState(n?In(n):4),tree:kt.empty}}class E3{constructor(e,s,i,n){this.lang=e,this.input=s,this.fragments=i,this.ranges=n,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=n[n.length-1].to;let r=br.get(),o=n[0].from,{state:l,tree:a}=T3(e,i,o,this.to,r?.state);this.state=l,this.parsedPos=this.chunkStart=o+a.length;for(let d=0;d<a.children.length;d++)this.chunks.push(a.children[d]),this.chunkPos.push(a.positions[d]);r&&this.parsedPos<r.viewport.from-1e5&&n.some(d=>d.from<=r.viewport.from&&d.to>=r.viewport.from)&&(this.state=this.lang.streamParser.startState(In(r.state)),r.skipUntilInView(this.parsedPos,r.viewport.from),this.parsedPos=r.viewport.from),this.moveRangeIndex()}advance(){let e=br.get(),s=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),i=Math.min(s,this.chunkStart+512);for(e&&(i=Math.min(i,e.viewport.to));this.parsedPos<i;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=s?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,s),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let s=this.input.chunk(e);if(this.input.lineChunks)s==`
`&&(s="");else{let i=s.indexOf(`
`);i>-1&&(s=s.slice(0,i))}return e+s.length<=this.to?s:s.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,s=this.lineAfter(e),i=e+s.length;for(let n=this.rangeIndex;;){let r=this.ranges[n].to;if(r>=i||(s=s.slice(0,r-(i-s.length)),n++,n==this.ranges.length))break;let o=this.ranges[n].from,l=this.lineAfter(o);s+=l,i=o+l.length}return{line:s,end:i}}skipGapsTo(e,s,i){for(;;){let n=this.ranges[this.rangeIndex].to,r=e+s;if(i>0?n>r:n>=r)break;let o=this.ranges[++this.rangeIndex].from;s+=o-n}return s}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,s,i,n){let r=4;if(this.ranges.length>1){n=this.skipGapsTo(s,n,1),s+=n;let l=this.chunk.length;n=this.skipGapsTo(i,n,-1),i+=n,r+=this.chunk.length-l}let o=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&r==4&&o>=0&&this.chunk[o]==e&&this.chunk[o+2]==s?this.chunk[o+2]=i:this.chunk.push(e,s,i,r),n}parseLine(e){let{line:s,end:i}=this.nextLine(),n=0,{streamParser:r}=this.lang,o=new Uy(s,e?e.state.tabSize:4,e?In(e.state):2);if(o.eol())r.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let l=zy(r.token,o,this.state);if(l&&(n=this.emitToken(this.lang.tokenTable.resolve(l),this.parsedPos+o.start,this.parsedPos+o.pos,n)),o.start>1e4)break}this.parsedPos=i,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=kt.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:$3,topID:0,maxBufferLength:512,reused:this.chunkReused});e=new kt(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new kt(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function zy(t,e,s){e.start=e.pos;for(let i=0;i<10;i++){let n=t(e,s);if(e.pos>e.start)return n}throw new Error("Stream parser failed to advance stream.")}const Xc=Object.create(null),$o=[bs.none],$3=new zc($o),Ip=[],Up=Object.create(null),Fy=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])Fy[t]=Wy(Xc,e);class Hy{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),Fy)}resolve(e){return e?this.table[e]||(this.table[e]=Wy(this.extra,e)):0}}const P3=new Hy(Xc);function ju(t,e){Ip.indexOf(t)>-1||(Ip.push(t),console.warn(e))}function Wy(t,e){let s=[];for(let l of e.split(" ")){let a=[];for(let d of l.split(".")){let u=t[d]||Se[d];u?typeof u=="function"?a.length?a=a.map(u):ju(d,`Modifier ${d} used at start of tag`):a.length?ju(d,`Tag ${d} used as modifier`):a=Array.isArray(u)?u:[u]:ju(d,`Unknown highlighting tag ${d}`)}for(let d of a)s.push(d)}if(!s.length)return 0;let i=e.replace(/ /g,"_"),n=i+" "+s.map(l=>l.id),r=Up[n];if(r)return r.id;let o=Up[n]=bs.define({id:$o.length,name:i,props:[R5({[i]:s})]});return $o.push(o),o.id}function O3(t,e){let s=bs.define({id:$o.length,name:"Document",props:[Qn.add(()=>t),Ay.add(()=>i=>e.getIndent(i))],top:!0});return $o.push(s),s}yt.RTL,yt.LTR;const R3=t=>{let{state:e}=t,s=e.doc.lineAt(e.selection.main.from),i=Zc(t.state,s.from);return i.line?j3(t):i.block?B3(t):!1};function Qc(t,e){return({state:s,dispatch:i})=>{if(s.readOnly)return!1;let n=t(e,s);return n?(i(s.update(n)),!0):!1}}const j3=Qc(N3,0),L3=Qc(qy,0),B3=Qc((t,e)=>qy(t,e,U3(e)),0);function Zc(t,e){let s=t.languageDataAt("commentTokens",e,1);return s.length?s[0]:{}}const Ur=50;function I3(t,{open:e,close:s},i,n){let r=t.sliceDoc(i-Ur,i),o=t.sliceDoc(n,n+Ur),l=/\s*$/.exec(r)[0].length,a=/^\s*/.exec(o)[0].length,d=r.length-l;if(r.slice(d-e.length,d)==e&&o.slice(a,a+s.length)==s)return{open:{pos:i-l,margin:l&&1},close:{pos:n+a,margin:a&&1}};let u,f;n-i<=2*Ur?u=f=t.sliceDoc(i,n):(u=t.sliceDoc(i,i+Ur),f=t.sliceDoc(n-Ur,n));let h=/^\s*/.exec(u)[0].length,m=/\s*$/.exec(f)[0].length,w=f.length-m-s.length;return u.slice(h,h+e.length)==e&&f.slice(w,w+s.length)==s?{open:{pos:i+h+e.length,margin:/\s/.test(u.charAt(h+e.length))?1:0},close:{pos:n-m-s.length,margin:/\s/.test(f.charAt(w-1))?1:0}}:null}function U3(t){let e=[];for(let s of t.selection.ranges){let i=t.doc.lineAt(s.from),n=s.to<=i.to?i:t.doc.lineAt(s.to);n.from>i.from&&n.from==s.to&&(n=s.to==i.to+1?i:t.doc.lineAt(s.to-1));let r=e.length-1;r>=0&&e[r].to>i.from?e[r].to=n.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:n.to})}return e}function qy(t,e,s=e.selection.ranges){let i=s.map(r=>Zc(e,r.from).block);if(!i.every(r=>r))return null;let n=s.map((r,o)=>I3(e,i[o],r.from,r.to));if(t!=2&&!n.every(r=>r))return{changes:e.changes(s.map((r,o)=>n[o]?[]:[{from:r.from,insert:i[o].open+" "},{from:r.to,insert:" "+i[o].close}]))};if(t!=1&&n.some(r=>r)){let r=[];for(let o=0,l;o<n.length;o++)if(l=n[o]){let a=i[o],{open:d,close:u}=l;r.push({from:d.pos-a.open.length,to:d.pos+d.margin},{from:u.pos-u.margin,to:u.pos+a.close.length})}return{changes:r}}return null}function N3(t,e,s=e.selection.ranges){let i=[],n=-1;for(let{from:r,to:o}of s){let l=i.length,a=1e9,d=Zc(e,r).line;if(d){for(let u=r;u<=o;){let f=e.doc.lineAt(u);if(f.from>n&&(r==o||o>f.from)){n=f.from;let h=/^\s*/.exec(f.text)[0].length,m=h==f.length,w=f.text.slice(h,h+d.length)==d?h:-1;h<f.text.length&&h<a&&(a=h),i.push({line:f,comment:w,token:d,indent:h,empty:m,single:!1})}u=f.to+1}if(a<1e9)for(let u=l;u<i.length;u++)i[u].indent<i[u].line.text.length&&(i[u].indent=a);i.length==l+1&&(i[l].single=!0)}}if(t!=2&&i.some(r=>r.comment<0&&(!r.empty||r.single))){let r=[];for(let{line:l,token:a,indent:d,empty:u,single:f}of i)(f||!u)&&r.push({from:l.from+d,insert:a+" "});let o=e.changes(r);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&i.some(r=>r.comment>=0)){let r=[];for(let{line:o,comment:l,token:a}of i)if(l>=0){let d=o.from+l,u=d+a.length;o.text[u-o.from]==" "&&u++,r.push({from:d,to:u})}return{changes:r}}return null}const Qd=Ii.define(),z3=Ii.define(),F3=De.define(),Gy=De.define({combine(t){return bi(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,s)=>s},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,s)=>(i,n)=>e(i,n)||s(i,n)})}}),Ky=Gt.define({create(){return mi.empty},update(t,e){let s=e.state.facet(Gy),i=e.annotation(Qd);if(i){let a=vs.fromTransaction(e,i.selection),d=i.side,u=d==0?t.undone:t.done;return a?u=ca(u,u.length,s.minDepth,a):u=Xy(u,e.startState.selection),new mi(d==0?i.rest:u,d==0?u:i.rest)}let n=e.annotation(z3);if((n=="full"||n=="before")&&(t=t.isolate()),e.annotation(jt.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let r=vs.fromTransaction(e),o=e.annotation(jt.time),l=e.annotation(jt.userEvent);return r?t=t.addChanges(r,o,l,s,e):e.selection&&(t=t.addSelection(e.startState.selection,o,l,s.newGroupDelay)),(n=="full"||n=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new mi(t.done.map(vs.fromJSON),t.undone.map(vs.fromJSON))}});function H3(t={}){return[Ky,Gy.of(t),Me.domEventHandlers({beforeinput(e,s){let i=e.inputType=="historyUndo"?Jy:e.inputType=="historyRedo"?Zd:null;return i?(e.preventDefault(),i(s)):!1}})]}function za(t,e){return function({state:s,dispatch:i}){if(!e&&s.readOnly)return!1;let n=s.field(Ky,!1);if(!n)return!1;let r=n.pop(t,s,e);return r?(i(r),!0):!1}}const Jy=za(0,!1),Zd=za(1,!1),W3=za(0,!0),q3=za(1,!0);class vs{constructor(e,s,i,n,r){this.changes=e,this.effects=s,this.mapped=i,this.startSelection=n,this.selectionsAfter=r}setSelAfter(e){return new vs(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,s,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(s=this.mapped)===null||s===void 0?void 0:s.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(n=>n.toJSON())}}static fromJSON(e){return new vs(e.changes&&Rt.fromJSON(e.changes),[],e.mapped&&yi.fromJSON(e.mapped),e.startSelection&&ne.fromJSON(e.startSelection),e.selectionsAfter.map(ne.fromJSON))}static fromTransaction(e,s){let i=Ts;for(let n of e.startState.facet(F3)){let r=n(e);r.length&&(i=i.concat(r))}return!i.length&&e.changes.empty?null:new vs(e.changes.invert(e.startState.doc),i,void 0,s||e.startState.selection,Ts)}static selection(e){return new vs(void 0,Ts,void 0,void 0,e)}}function ca(t,e,s,i){let n=e+1>s+20?e-s-1:0,r=t.slice(n,e);return r.push(i),r}function G3(t,e){let s=[],i=!1;return t.iterChangedRanges((n,r)=>s.push(n,r)),e.iterChangedRanges((n,r,o,l)=>{for(let a=0;a<s.length;){let d=s[a++],u=s[a++];l>=d&&o<=u&&(i=!0)}}),i}function K3(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((s,i)=>s.empty!=e.ranges[i].empty).length===0}function Yy(t,e){return t.length?e.length?t.concat(e):t:e}const Ts=[],J3=200;function Xy(t,e){if(t.length){let s=t[t.length-1],i=s.selectionsAfter.slice(Math.max(0,s.selectionsAfter.length-J3));return i.length&&i[i.length-1].eq(e)?t:(i.push(e),ca(t,t.length-1,1e9,s.setSelAfter(i)))}else return[vs.selection([e])]}function Y3(t){let e=t[t.length-1],s=t.slice();return s[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),s}function Lu(t,e){if(!t.length)return t;let s=t.length,i=Ts;for(;s;){let n=X3(t[s-1],e,i);if(n.changes&&!n.changes.empty||n.effects.length){let r=t.slice(0,s);return r[s-1]=n,r}else e=n.mapped,s--,i=n.selectionsAfter}return i.length?[vs.selection(i)]:Ts}function X3(t,e,s){let i=Yy(t.selectionsAfter.length?t.selectionsAfter.map(l=>l.map(e)):Ts,s);if(!t.changes)return vs.selection(i);let n=t.changes.map(e),r=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(r):r;return new vs(n,We.mapEffects(t.effects,e),o,t.startSelection.map(r),i)}const Q3=/^(input\.type|delete)($|\.)/;class mi{constructor(e,s,i=0,n=void 0){this.done=e,this.undone=s,this.prevTime=i,this.prevUserEvent=n}isolate(){return this.prevTime?new mi(this.done,this.undone):this}addChanges(e,s,i,n,r){let o=this.done,l=o[o.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!i||Q3.test(i))&&(!l.selectionsAfter.length&&s-this.prevTime<n.newGroupDelay&&n.joinToEvent(r,G3(l.changes,e.changes))||i=="input.type.compose")?o=ca(o,o.length-1,n.minDepth,new vs(e.changes.compose(l.changes),Yy(We.mapEffects(e.effects,l.changes),l.effects),l.mapped,l.startSelection,Ts)):o=ca(o,o.length,n.minDepth,e),new mi(o,Ts,s,i)}addSelection(e,s,i,n){let r=this.done.length?this.done[this.done.length-1].selectionsAfter:Ts;return r.length>0&&s-this.prevTime<n&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&K3(r[r.length-1],e)?this:new mi(Xy(this.done,e),this.undone,s,i)}addMapping(e){return new mi(Lu(this.done,e),Lu(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,s,i){let n=e==0?this.done:this.undone;if(n.length==0)return null;let r=n[n.length-1],o=r.selectionsAfter[0]||s.selection;if(i&&r.selectionsAfter.length)return s.update({selection:r.selectionsAfter[r.selectionsAfter.length-1],annotations:Qd.of({side:e,rest:Y3(n),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(r.changes){let l=n.length==1?Ts:n.slice(0,n.length-1);return r.mapped&&(l=Lu(l,r.mapped)),s.update({changes:r.changes,selection:r.startSelection,effects:r.effects,annotations:Qd.of({side:e,rest:l,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}mi.empty=new mi(Ts,Ts);const Z3=[{key:"Mod-z",run:Jy,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Zd,preventDefault:!0},{linux:"Ctrl-Shift-z",run:Zd,preventDefault:!0},{key:"Mod-u",run:W3,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:q3,preventDefault:!0}];function Mr(t,e){return ne.create(t.ranges.map(e),t.mainIndex)}function Qs(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Zs({state:t,dispatch:e},s){let i=Mr(t.selection,s);return i.eq(t.selection,!0)?!1:(e(Qs(t,i)),!0)}function Fa(t,e){return ne.cursor(e?t.to:t.from)}function Qy(t,e){return Zs(t,s=>s.empty?t.moveByChar(s,e):Fa(s,e))}function ss(t){return t.textDirectionAt(t.state.selection.main.head)==yt.LTR}const Zy=t=>Qy(t,!ss(t)),ev=t=>Qy(t,ss(t));function tv(t,e){return Zs(t,s=>s.empty?t.moveByGroup(s,e):Fa(s,e))}const eA=t=>tv(t,!ss(t)),tA=t=>tv(t,ss(t));function sA(t,e,s){if(e.type.prop(s))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function Ha(t,e,s){let i=ts(t).resolveInner(e.head),n=s?Ge.closedBy:Ge.openedBy;for(let a=e.head;;){let d=s?i.childAfter(a):i.childBefore(a);if(!d)break;sA(t,d,n)?i=d:a=s?d.to:d.from}let r=i.type.prop(n),o,l;return r&&(o=s?pi(t,i.from,1):pi(t,i.to,-1))&&o.matched?l=s?o.end.to:o.end.from:l=s?i.to:i.from,ne.cursor(l,s?-1:1)}const iA=t=>Zs(t,e=>Ha(t.state,e,!ss(t))),nA=t=>Zs(t,e=>Ha(t.state,e,ss(t)));function sv(t,e){return Zs(t,s=>{if(!s.empty)return Fa(s,e);let i=t.moveVertically(s,e);return i.head!=s.head?i:t.moveToLineBoundary(s,e)})}const iv=t=>sv(t,!1),nv=t=>sv(t,!0);function rv(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,s=0,i=0,n;if(e){for(let r of t.state.facet(Me.scrollMargins)){let o=r(t);o?.top&&(s=Math.max(o?.top,s)),o?.bottom&&(i=Math.max(o?.bottom,i))}n=t.scrollDOM.clientHeight-s-i}else n=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:s,marginBottom:i,selfScroll:e,height:Math.max(t.defaultLineHeight,n-5)}}function ov(t,e){let s=rv(t),{state:i}=t,n=Mr(i.selection,o=>o.empty?t.moveVertically(o,e,s.height):Fa(o,e));if(n.eq(i.selection))return!1;let r;if(s.selfScroll){let o=t.coordsAtPos(i.selection.main.head),l=t.scrollDOM.getBoundingClientRect(),a=l.top+s.marginTop,d=l.bottom-s.marginBottom;o&&o.top>a&&o.bottom<d&&(r=Me.scrollIntoView(n.main.head,{y:"start",yMargin:o.top-a}))}return t.dispatch(Qs(i,n),{effects:r}),!0}const Np=t=>ov(t,!1),ec=t=>ov(t,!0);function fn(t,e,s){let i=t.lineBlockAt(e.head),n=t.moveToLineBoundary(e,s);if(n.head==e.head&&n.head!=(s?i.to:i.from)&&(n=t.moveToLineBoundary(e,s,!1)),!s&&n.head==i.from&&i.length){let r=/^\s*/.exec(t.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;r&&e.head!=i.from+r&&(n=ne.cursor(i.from+r))}return n}const rA=t=>Zs(t,e=>fn(t,e,!0)),oA=t=>Zs(t,e=>fn(t,e,!1)),lA=t=>Zs(t,e=>fn(t,e,!ss(t))),aA=t=>Zs(t,e=>fn(t,e,ss(t))),uA=t=>Zs(t,e=>ne.cursor(t.lineBlockAt(e.head).from,1)),dA=t=>Zs(t,e=>ne.cursor(t.lineBlockAt(e.head).to,-1));function cA(t,e,s){let i=!1,n=Mr(t.selection,r=>{let o=pi(t,r.head,-1)||pi(t,r.head,1)||r.head>0&&pi(t,r.head-1,1)||r.head<t.doc.length&&pi(t,r.head+1,-1);if(!o||!o.end)return r;i=!0;let l=o.start.from==r.head?o.end.to:o.end.from;return ne.cursor(l)});return i?(e(Qs(t,n)),!0):!1}const fA=({state:t,dispatch:e})=>cA(t,e);function Bs(t,e){let s=Mr(t.state.selection,i=>{let n=e(i);return ne.range(i.anchor,n.head,n.goalColumn,n.bidiLevel||void 0)});return s.eq(t.state.selection)?!1:(t.dispatch(Qs(t.state,s)),!0)}function lv(t,e){return Bs(t,s=>t.moveByChar(s,e))}const av=t=>lv(t,!ss(t)),uv=t=>lv(t,ss(t));function dv(t,e){return Bs(t,s=>t.moveByGroup(s,e))}const hA=t=>dv(t,!ss(t)),pA=t=>dv(t,ss(t)),mA=t=>Bs(t,e=>Ha(t.state,e,!ss(t))),gA=t=>Bs(t,e=>Ha(t.state,e,ss(t)));function cv(t,e){return Bs(t,s=>t.moveVertically(s,e))}const fv=t=>cv(t,!1),hv=t=>cv(t,!0);function pv(t,e){return Bs(t,s=>t.moveVertically(s,e,rv(t).height))}const zp=t=>pv(t,!1),Fp=t=>pv(t,!0),yA=t=>Bs(t,e=>fn(t,e,!0)),vA=t=>Bs(t,e=>fn(t,e,!1)),bA=t=>Bs(t,e=>fn(t,e,!ss(t))),xA=t=>Bs(t,e=>fn(t,e,ss(t))),kA=t=>Bs(t,e=>ne.cursor(t.lineBlockAt(e.head).from)),wA=t=>Bs(t,e=>ne.cursor(t.lineBlockAt(e.head).to)),Hp=({state:t,dispatch:e})=>(e(Qs(t,{anchor:0})),!0),Wp=({state:t,dispatch:e})=>(e(Qs(t,{anchor:t.doc.length})),!0),qp=({state:t,dispatch:e})=>(e(Qs(t,{anchor:t.selection.main.anchor,head:0})),!0),Gp=({state:t,dispatch:e})=>(e(Qs(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),SA=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),CA=({state:t,dispatch:e})=>{let s=Wa(t).map(({from:i,to:n})=>ne.range(i,Math.min(n+1,t.doc.length)));return e(t.update({selection:ne.create(s),userEvent:"select"})),!0},_A=({state:t,dispatch:e})=>{let s=Mr(t.selection,i=>{let n=ts(t),r=n.resolveStack(i.from,1);if(i.empty){let o=n.resolveStack(i.from,-1);o.node.from>=r.node.from&&o.node.to<=r.node.to&&(r=o)}for(let o=r;o;o=o.next){let{node:l}=o;if((l.from<i.from&&l.to>=i.to||l.to>i.to&&l.from<=i.from)&&o.next)return ne.range(l.to,l.from)}return i});return s.eq(t.selection)?!1:(e(Qs(t,s)),!0)};function mv(t,e){let{state:s}=t,i=s.selection,n=s.selection.ranges.slice();for(let r of s.selection.ranges){let o=s.doc.lineAt(r.head);if(e?o.to<t.state.doc.length:o.from>0)for(let l=r;;){let a=t.moveVertically(l,e);if(a.head<o.from||a.head>o.to){n.some(d=>d.head==a.head)||n.push(a);break}else{if(a.head==l.head)break;l=a}}}return n.length==i.ranges.length?!1:(t.dispatch(Qs(s,ne.create(n,n.length-1))),!0)}const AA=t=>mv(t,!1),VA=t=>mv(t,!0),MA=({state:t,dispatch:e})=>{let s=t.selection,i=null;return s.ranges.length>1?i=ne.create([s.main]):s.main.empty||(i=ne.create([ne.cursor(s.main.head)])),i?(e(Qs(t,i)),!0):!1};function Go(t,e){if(t.state.readOnly)return!1;let s="delete.selection",{state:i}=t,n=i.changeByRange(r=>{let{from:o,to:l}=r;if(o==l){let a=e(r);a<o?(s="delete.backward",a=wl(t,a,!1)):a>o&&(s="delete.forward",a=wl(t,a,!0)),o=Math.min(o,a),l=Math.max(l,a)}else o=wl(t,o,!1),l=wl(t,l,!0);return o==l?{range:r}:{changes:{from:o,to:l},range:ne.cursor(o,o<r.head?-1:1)}});return n.changes.empty?!1:(t.dispatch(i.update(n,{scrollIntoView:!0,userEvent:s,effects:s=="delete.selection"?Me.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function wl(t,e,s){if(t instanceof Me)for(let i of t.state.facet(Me.atomicRanges).map(n=>n(t)))i.between(e,e,(n,r)=>{n<e&&r>e&&(e=s?r:n)});return e}const gv=(t,e,s)=>Go(t,i=>{let n=i.from,{state:r}=t,o=r.doc.lineAt(n),l,a;if(s&&!e&&n>o.from&&n<o.from+200&&!/[^ \t]/.test(l=o.text.slice(0,n-o.from))){if(l[l.length-1]=="	")return n-1;let d=Vr(l,r.tabSize),u=d%In(r)||In(r);for(let f=0;f<u&&l[l.length-1-f]==" ";f++)n--;a=n}else a=qt(o.text,n-o.from,e,e)+o.from,a==n&&o.number!=(e?r.doc.lines:1)?a+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(a-o.from,n-o.from))&&(a=qt(o.text,a-o.from,!1,!1)+o.from);return a}),tc=t=>gv(t,!1,!0),yv=t=>gv(t,!0,!1),vv=(t,e)=>Go(t,s=>{let i=s.head,{state:n}=t,r=n.doc.lineAt(i),o=n.charCategorizer(i);for(let l=null;;){if(i==(e?r.to:r.from)){i==s.head&&r.number!=(e?n.doc.lines:1)&&(i+=e?1:-1);break}let a=qt(r.text,i-r.from,e)+r.from,d=r.text.slice(Math.min(i,a)-r.from,Math.max(i,a)-r.from),u=o(d);if(l!=null&&u!=l)break;(d!=" "||i!=s.head)&&(l=u),i=a}return i}),bv=t=>vv(t,!1),DA=t=>vv(t,!0),TA=t=>Go(t,e=>{let s=t.lineBlockAt(e.head).to;return e.head<s?s:Math.min(t.state.doc.length,e.head+1)}),EA=t=>Go(t,e=>{let s=t.moveToLineBoundary(e,!1).head;return e.head>s?s:Math.max(0,e.head-1)}),$A=t=>Go(t,e=>{let s=t.moveToLineBoundary(e,!0).head;return e.head<s?s:Math.min(t.state.doc.length,e.head+1)}),PA=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let s=t.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:tt.of(["",""])},range:ne.cursor(i.from)}));return e(t.update(s,{scrollIntoView:!0,userEvent:"input"})),!0},OA=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let s=t.changeByRange(i=>{if(!i.empty||i.from==0||i.from==t.doc.length)return{range:i};let n=i.from,r=t.doc.lineAt(n),o=n==r.from?n-1:qt(r.text,n-r.from,!1)+r.from,l=n==r.to?n+1:qt(r.text,n-r.from,!0)+r.from;return{changes:{from:o,to:l,insert:t.doc.slice(n,l).append(t.doc.slice(o,n))},range:ne.cursor(l)}});return s.changes.empty?!1:(e(t.update(s,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Wa(t){let e=[],s=-1;for(let i of t.selection.ranges){let n=t.doc.lineAt(i.from),r=t.doc.lineAt(i.to);if(!i.empty&&i.to==r.from&&(r=t.doc.lineAt(i.to-1)),s>=n.number){let o=e[e.length-1];o.to=r.to,o.ranges.push(i)}else e.push({from:n.from,to:r.to,ranges:[i]});s=r.number+1}return e}function xv(t,e,s){if(t.readOnly)return!1;let i=[],n=[];for(let r of Wa(t)){if(s?r.to==t.doc.length:r.from==0)continue;let o=t.doc.lineAt(s?r.to+1:r.from-1),l=o.length+1;if(s){i.push({from:r.to,to:o.to},{from:r.from,insert:o.text+t.lineBreak});for(let a of r.ranges)n.push(ne.range(Math.min(t.doc.length,a.anchor+l),Math.min(t.doc.length,a.head+l)))}else{i.push({from:o.from,to:r.from},{from:r.to,insert:t.lineBreak+o.text});for(let a of r.ranges)n.push(ne.range(a.anchor-l,a.head-l))}}return i.length?(e(t.update({changes:i,scrollIntoView:!0,selection:ne.create(n,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const RA=({state:t,dispatch:e})=>xv(t,e,!1),jA=({state:t,dispatch:e})=>xv(t,e,!0);function kv(t,e,s){if(t.readOnly)return!1;let i=[];for(let n of Wa(t))s?i.push({from:n.from,insert:t.doc.slice(n.from,n.to)+t.lineBreak}):i.push({from:n.to,insert:t.lineBreak+t.doc.slice(n.from,n.to)});return e(t.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const LA=({state:t,dispatch:e})=>kv(t,e,!1),BA=({state:t,dispatch:e})=>kv(t,e,!0),IA=t=>{if(t.state.readOnly)return!1;let{state:e}=t,s=e.changes(Wa(e).map(({from:n,to:r})=>(n>0?n--:r<e.doc.length&&r++,{from:n,to:r}))),i=Mr(e.selection,n=>{let r;if(t.lineWrapping){let o=t.lineBlockAt(n.head),l=t.coordsAtPos(n.head,n.assoc||1);l&&(r=o.bottom+t.documentTop-l.bottom+t.defaultLineHeight/2)}return t.moveVertically(n,!0,r)}).map(s);return t.dispatch({changes:s,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function UA(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let s=ts(t).resolveInner(e),i=s.childBefore(e),n=s.childAfter(e),r;return i&&n&&i.to<=e&&n.from>=e&&(r=i.type.prop(Ge.closedBy))&&r.indexOf(n.name)>-1&&t.doc.lineAt(i.to).from==t.doc.lineAt(n.from).from&&!/\S/.test(t.sliceDoc(i.to,n.from))?{from:i.to,to:n.from}:null}const Kp=wv(!1),NA=wv(!0);function wv(t){return({state:e,dispatch:s})=>{if(e.readOnly)return!1;let i=e.changeByRange(n=>{let{from:r,to:o}=n,l=e.doc.lineAt(r),a=!t&&r==o&&UA(e,r);t&&(r=o=(o<=l.to?l:e.doc.lineAt(o)).to);let d=new Ua(e,{simulateBreak:r,simulateDoubleBreak:!!a}),u=Gc(d,r);for(u==null&&(u=Vr(/^\s*/.exec(e.doc.lineAt(r).text)[0],e.tabSize));o<l.to&&/\s/.test(l.text[o-l.from]);)o++;a?{from:r,to:o}=a:r>l.from&&r<l.from+100&&!/\S/.test(l.text.slice(0,r))&&(r=l.from);let f=["",Eo(e,u)];return a&&f.push(Eo(e,d.lineIndent(l.from,-1))),{changes:{from:r,to:o,insert:tt.of(f)},range:ne.cursor(r+1+f[1].length)}});return s(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function ef(t,e){let s=-1;return t.changeByRange(i=>{let n=[];for(let o=i.from;o<=i.to;){let l=t.doc.lineAt(o);l.number>s&&(i.empty||i.to>l.from)&&(e(l,n,i),s=l.number),o=l.to+1}let r=t.changes(n);return{changes:n,range:ne.range(r.mapPos(i.anchor,1),r.mapPos(i.head,1))}})}const zA=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let s=Object.create(null),i=new Ua(t,{overrideIndentation:r=>{let o=s[r];return o??-1}}),n=ef(t,(r,o,l)=>{let a=Gc(i,r.from);if(a==null)return;/\S/.test(r.text)||(a=0);let d=/^\s*/.exec(r.text)[0],u=Eo(t,a);(d!=u||l.from<r.from+d.length)&&(s[r.from]=a,o.push({from:r.from,to:r.from+d.length,insert:u}))});return n.changes.empty||e(t.update(n,{userEvent:"indent"})),!0},FA=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(ef(t,(s,i)=>{i.push({from:s.from,insert:t.facet(qc)})}),{userEvent:"input.indent"})),!0),HA=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(ef(t,(s,i)=>{let n=/^\s*/.exec(s.text)[0];if(!n)return;let r=Vr(n,t.tabSize),o=0,l=Eo(t,Math.max(0,r-In(t)));for(;o<n.length&&o<l.length&&n.charCodeAt(o)==l.charCodeAt(o);)o++;i.push({from:s.from+o,to:s.from+n.length,insert:l.slice(o)})}),{userEvent:"delete.dedent"})),!0),WA=t=>(t.setTabFocusMode(),!0),qA=[{key:"Ctrl-b",run:Zy,shift:av,preventDefault:!0},{key:"Ctrl-f",run:ev,shift:uv},{key:"Ctrl-p",run:iv,shift:fv},{key:"Ctrl-n",run:nv,shift:hv},{key:"Ctrl-a",run:uA,shift:kA},{key:"Ctrl-e",run:dA,shift:wA},{key:"Ctrl-d",run:yv},{key:"Ctrl-h",run:tc},{key:"Ctrl-k",run:TA},{key:"Ctrl-Alt-h",run:bv},{key:"Ctrl-o",run:PA},{key:"Ctrl-t",run:OA},{key:"Ctrl-v",run:ec}],GA=[{key:"ArrowLeft",run:Zy,shift:av,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:eA,shift:hA,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:lA,shift:bA,preventDefault:!0},{key:"ArrowRight",run:ev,shift:uv,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:tA,shift:pA,preventDefault:!0},{mac:"Cmd-ArrowRight",run:aA,shift:xA,preventDefault:!0},{key:"ArrowUp",run:iv,shift:fv,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Hp,shift:qp},{mac:"Ctrl-ArrowUp",run:Np,shift:zp},{key:"ArrowDown",run:nv,shift:hv,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Wp,shift:Gp},{mac:"Ctrl-ArrowDown",run:ec,shift:Fp},{key:"PageUp",run:Np,shift:zp},{key:"PageDown",run:ec,shift:Fp},{key:"Home",run:oA,shift:vA,preventDefault:!0},{key:"Mod-Home",run:Hp,shift:qp},{key:"End",run:rA,shift:yA,preventDefault:!0},{key:"Mod-End",run:Wp,shift:Gp},{key:"Enter",run:Kp,shift:Kp},{key:"Mod-a",run:SA},{key:"Backspace",run:tc,shift:tc,preventDefault:!0},{key:"Delete",run:yv,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:bv,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:DA,preventDefault:!0},{mac:"Mod-Backspace",run:EA,preventDefault:!0},{mac:"Mod-Delete",run:$A,preventDefault:!0}].concat(qA.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),KA=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:iA,shift:mA},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:nA,shift:gA},{key:"Alt-ArrowUp",run:RA},{key:"Shift-Alt-ArrowUp",run:LA},{key:"Alt-ArrowDown",run:jA},{key:"Shift-Alt-ArrowDown",run:BA},{key:"Mod-Alt-ArrowUp",run:AA},{key:"Mod-Alt-ArrowDown",run:VA},{key:"Escape",run:MA},{key:"Mod-Enter",run:NA},{key:"Alt-l",mac:"Ctrl-l",run:CA},{key:"Mod-i",run:_A,preventDefault:!0},{key:"Mod-[",run:HA},{key:"Mod-]",run:FA},{key:"Mod-Alt-\\",run:zA},{key:"Shift-Mod-k",run:IA},{key:"Shift-Mod-\\",run:fA},{key:"Mod-/",run:R3},{key:"Alt-A",run:L3},{key:"Ctrl-m",mac:"Shift-Alt-m",run:WA}].concat(GA),Jp=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class kr{constructor(e,s,i=0,n=e.length,r,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,n),this.bufferStart=i,this.normalize=r?l=>r(Jp(l)):Jp,this.query=this.normalize(s)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return ms(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let s=Ac(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=ci(e);let n=this.normalize(s);if(n.length)for(let r=0,o=i;;r++){let l=n.charCodeAt(r),a=this.match(l,o,this.bufferPos+this.bufferStart);if(r==n.length-1){if(a)return this.value=a,this;break}o==i&&r<s.length&&s.charCodeAt(r)==l&&o++}}}match(e,s,i){let n=null;for(let r=0;r<this.matches.length;r+=2){let o=this.matches[r],l=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?n={from:this.matches[r+1],to:i}:(this.matches[r]++,l=!0)),l||(this.matches.splice(r,2),r-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?n={from:s,to:i}:this.matches.push(1,s)),n&&this.test&&!this.test(n.from,n.to,this.buffer,this.bufferStart)&&(n=null),n}}typeof Symbol<"u"&&(kr.prototype[Symbol.iterator]=function(){return this});const Sv={from:-1,to:-1,match:/.*/.exec("")},tf="gm"+(/x/.unicode==null?"":"u");class Cv{constructor(e,s,i,n=0,r=e.length){if(this.text=e,this.to=r,this.curLine="",this.done=!1,this.value=Sv,/\\[sWDnr]|\n|\r|\[\^/.test(s))return new _v(e,s,i,n,r);this.re=new RegExp(s,tf+(i?.ignoreCase?"i":"")),this.test=i?.test,this.iter=e.iter();let o=e.lineAt(n);this.curLineStart=o.from,this.matchPos=fa(e,n),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let s=this.matchPos<=this.to&&this.re.exec(this.curLine);if(s){let i=this.curLineStart+s.index,n=i+s[0].length;if(this.matchPos=fa(this.text,n+(i==n?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<n||i>this.value.to)&&(!this.test||this.test(i,n,s)))return this.value={from:i,to:n,match:s},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const Bu=new WeakMap;class dr{constructor(e,s){this.from=e,this.text=s}get to(){return this.from+this.text.length}static get(e,s,i){let n=Bu.get(e);if(!n||n.from>=i||n.to<=s){let l=new dr(s,e.sliceString(s,i));return Bu.set(e,l),l}if(n.from==s&&n.to==i)return n;let{text:r,from:o}=n;return o>s&&(r=e.sliceString(s,o)+r,o=s),n.to<i&&(r+=e.sliceString(n.to,i)),Bu.set(e,new dr(o,r)),new dr(s,r.slice(s-o,i-o))}}class _v{constructor(e,s,i,n,r){this.text=e,this.to=r,this.done=!1,this.value=Sv,this.matchPos=fa(e,n),this.re=new RegExp(s,tf+(i?.ignoreCase?"i":"")),this.test=i?.test,this.flat=dr.get(e,n,this.chunkEnd(n+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,s=this.re.exec(this.flat.text);if(s&&!s[0]&&s.index==e&&(this.re.lastIndex=e+1,s=this.re.exec(this.flat.text)),s){let i=this.flat.from+s.index,n=i+s[0].length;if((this.flat.to>=this.to||s.index+s[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,n,s)))return this.value={from:i,to:n,match:s},this.matchPos=fa(this.text,n+(i==n?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=dr.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(Cv.prototype[Symbol.iterator]=_v.prototype[Symbol.iterator]=function(){return this});function JA(t){try{return new RegExp(t,tf),!0}catch{return!1}}function fa(t,e){if(e>=t.length)return e;let s=t.lineAt(e),i;for(;e<s.to&&(i=s.text.charCodeAt(e-s.from))>=56320&&i<57344;)e++;return e}function sc(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),s=dt("input",{class:"cm-textfield",name:"line",value:e}),i=dt("form",{class:"cm-gotoLine",onkeydown:r=>{r.keyCode==27?(r.preventDefault(),t.dispatch({effects:lo.of(!1)}),t.focus()):r.keyCode==13&&(r.preventDefault(),n())},onsubmit:r=>{r.preventDefault(),n()}},dt("label",t.state.phrase("Go to line"),": ",s)," ",dt("button",{class:"cm-button",type:"submit"},t.state.phrase("go")),dt("button",{name:"close",onclick:()=>{t.dispatch({effects:lo.of(!1)}),t.focus()},"aria-label":t.state.phrase("close"),type:"button"},[""]));function n(){let r=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(s.value);if(!r)return;let{state:o}=t,l=o.doc.lineAt(o.selection.main.head),[,a,d,u,f]=r,h=u?+u.slice(1):0,m=d?+d:l.number;if(d&&f){let _=m/100;a&&(_=_*(a=="-"?-1:1)+l.number/o.doc.lines),m=Math.round(o.doc.lines*_)}else d&&a&&(m=m*(a=="-"?-1:1)+l.number);let w=o.doc.line(Math.max(1,Math.min(o.doc.lines,m))),S=ne.cursor(w.from+Math.max(0,Math.min(h,w.length)));t.dispatch({effects:[lo.of(!1),Me.scrollIntoView(S.from,{y:"center"})],selection:S}),t.focus()}return{dom:i}}const lo=We.define(),Yp=Gt.define({create(){return!0},update(t,e){for(let s of e.effects)s.is(lo)&&(t=s.value);return t},provide:t=>Mo.from(t,e=>e?sc:null)}),YA=t=>{let e=Vo(t,sc);if(!e){let s=[lo.of(!0)];t.state.field(Yp,!1)==null&&s.push(We.appendConfig.of([Yp,XA])),t.dispatch({effects:s}),e=Vo(t,sc)}return e&&e.dom.querySelector("input").select(),!0},XA=Me.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),QA={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},ZA=De.define({combine(t){return bi(t,QA,{highlightWordAroundCursor:(e,s)=>e||s,minSelectionLength:Math.min,maxMatches:Math.min})}});function e8(t){return[r8,n8]}const t8=Ie.mark({class:"cm-selectionMatch"}),s8=Ie.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function Xp(t,e,s,i){return(s==0||t(e.sliceDoc(s-1,s))!=vt.Word)&&(i==e.doc.length||t(e.sliceDoc(i,i+1))!=vt.Word)}function i8(t,e,s,i){return t(e.sliceDoc(s,s+1))==vt.Word&&t(e.sliceDoc(i-1,i))==vt.Word}const n8=$t.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.selectionSet||t.docChanged||t.viewportChanged)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=t.state.facet(ZA),{state:s}=t,i=s.selection;if(i.ranges.length>1)return Ie.none;let n=i.main,r,o=null;if(n.empty){if(!e.highlightWordAroundCursor)return Ie.none;let a=s.wordAt(n.head);if(!a)return Ie.none;o=s.charCategorizer(n.head),r=s.sliceDoc(a.from,a.to)}else{let a=n.to-n.from;if(a<e.minSelectionLength||a>200)return Ie.none;if(e.wholeWords){if(r=s.sliceDoc(n.from,n.to),o=s.charCategorizer(n.head),!(Xp(o,s,n.from,n.to)&&i8(o,s,n.from,n.to)))return Ie.none}else if(r=s.sliceDoc(n.from,n.to),!r)return Ie.none}let l=[];for(let a of t.visibleRanges){let d=new kr(s.doc,r,a.from,a.to);for(;!d.next().done;){let{from:u,to:f}=d.value;if((!o||Xp(o,s,u,f))&&(n.empty&&u<=n.from&&f>=n.to?l.push(s8.range(u,f)):(u>=n.to||f<=n.from)&&l.push(t8.range(u,f)),l.length>e.maxMatches))return Ie.none}}return Ie.set(l)}},{decorations:t=>t.decorations}),r8=Me.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),o8=({state:t,dispatch:e})=>{let{selection:s}=t,i=ne.create(s.ranges.map(n=>t.wordAt(n.head)||ne.cursor(n.head)),s.mainIndex);return i.eq(s)?!1:(e(t.update({selection:i})),!0)};function l8(t,e){let{main:s,ranges:i}=t.selection,n=t.wordAt(s.head),r=n&&n.from==s.from&&n.to==s.to;for(let o=!1,l=new kr(t.doc,e,i[i.length-1].to);;)if(l.next(),l.done){if(o)return null;l=new kr(t.doc,e,0,Math.max(0,i[i.length-1].from-1)),o=!0}else{if(o&&i.some(a=>a.from==l.value.from))continue;if(r){let a=t.wordAt(l.value.from);if(!a||a.from!=l.value.from||a.to!=l.value.to)continue}return l.value}}const a8=({state:t,dispatch:e})=>{let{ranges:s}=t.selection;if(s.some(r=>r.from===r.to))return o8({state:t,dispatch:e});let i=t.sliceDoc(s[0].from,s[0].to);if(t.selection.ranges.some(r=>t.sliceDoc(r.from,r.to)!=i))return!1;let n=l8(t,i);return n?(e(t.update({selection:t.selection.addRange(ne.range(n.from,n.to),!1),effects:Me.scrollIntoView(n.to)})),!0):!1},Dr=De.define({combine(t){return bi(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new x8(e),scrollToMatch:e=>Me.scrollIntoView(e)})}});class Av{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||JA(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(s,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new f8(this):new d8(this)}getCursor(e,s=0,i){let n=e.doc?e:Ze.create({doc:e});return i==null&&(i=n.doc.length),this.regexp?Jn(this,n,s,i):Kn(this,n,s,i)}}class Vv{constructor(e){this.spec=e}}function Kn(t,e,s,i){return new kr(e.doc,t.unquoted,s,i,t.caseSensitive?void 0:n=>n.toLowerCase(),t.wholeWord?u8(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function u8(t,e){return(s,i,n,r)=>((r>s||r+n.length<i)&&(r=Math.max(0,s-2),n=t.sliceString(r,Math.min(t.length,i+2))),(e(ha(n,s-r))!=vt.Word||e(pa(n,s-r))!=vt.Word)&&(e(pa(n,i-r))!=vt.Word||e(ha(n,i-r))!=vt.Word))}class d8 extends Vv{constructor(e){super(e)}nextMatch(e,s,i){let n=Kn(this.spec,e,i,e.doc.length).nextOverlapping();if(n.done){let r=Math.min(e.doc.length,s+this.spec.unquoted.length);n=Kn(this.spec,e,0,r).nextOverlapping()}return n.done||n.value.from==s&&n.value.to==i?null:n.value}prevMatchInRange(e,s,i){for(let n=i;;){let r=Math.max(s,n-1e4-this.spec.unquoted.length),o=Kn(this.spec,e,r,n),l=null;for(;!o.nextOverlapping().done;)l=o.value;if(l)return l;if(r==s)return null;n-=1e4}}prevMatch(e,s,i){let n=this.prevMatchInRange(e,0,s);return n||(n=this.prevMatchInRange(e,Math.max(0,i-this.spec.unquoted.length),e.doc.length)),n&&(n.from!=s||n.to!=i)?n:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,s){let i=Kn(this.spec,e,0,e.doc.length),n=[];for(;!i.next().done;){if(n.length>=s)return null;n.push(i.value)}return n}highlight(e,s,i,n){let r=Kn(this.spec,e,Math.max(0,s-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!r.next().done;)n(r.value.from,r.value.to)}}function Jn(t,e,s,i){return new Cv(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?c8(e.charCategorizer(e.selection.main.head)):void 0},s,i)}function ha(t,e){return t.slice(qt(t,e,!1),e)}function pa(t,e){return t.slice(e,qt(t,e))}function c8(t){return(e,s,i)=>!i[0].length||(t(ha(i.input,i.index))!=vt.Word||t(pa(i.input,i.index))!=vt.Word)&&(t(pa(i.input,i.index+i[0].length))!=vt.Word||t(ha(i.input,i.index+i[0].length))!=vt.Word)}class f8 extends Vv{nextMatch(e,s,i){let n=Jn(this.spec,e,i,e.doc.length).next();return n.done&&(n=Jn(this.spec,e,0,s).next()),n.done?null:n.value}prevMatchInRange(e,s,i){for(let n=1;;n++){let r=Math.max(s,i-n*1e4),o=Jn(this.spec,e,r,i),l=null;for(;!o.next().done;)l=o.value;if(l&&(r==s||l.from>r+10))return l;if(r==s)return null}}prevMatch(e,s,i){return this.prevMatchInRange(e,0,s)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(s,i)=>{if(i=="&")return e.match[0];if(i=="$")return"$";for(let n=i.length;n>0;n--){let r=+i.slice(0,n);if(r>0&&r<e.match.length)return e.match[r]+i.slice(n)}return s})}matchAll(e,s){let i=Jn(this.spec,e,0,e.doc.length),n=[];for(;!i.next().done;){if(n.length>=s)return null;n.push(i.value)}return n}highlight(e,s,i,n){let r=Jn(this.spec,e,Math.max(0,s-250),Math.min(i+250,e.doc.length));for(;!r.next().done;)n(r.value.from,r.value.to)}}const Po=We.define(),sf=We.define(),tn=Gt.define({create(t){return new Iu(ic(t).create(),null)},update(t,e){for(let s of e.effects)s.is(Po)?t=new Iu(s.value.create(),t.panel):s.is(sf)&&(t=new Iu(t.query,s.value?nf:null));return t},provide:t=>Mo.from(t,e=>e.panel)});class Iu{constructor(e,s){this.query=e,this.panel=s}}const h8=Ie.mark({class:"cm-searchMatch"}),p8=Ie.mark({class:"cm-searchMatch cm-searchMatch-selected"}),m8=$t.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(tn))}update(t){let e=t.state.field(tn);(e!=t.startState.field(tn)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return Ie.none;let{view:s}=this,i=new Ri;for(let n=0,r=s.visibleRanges,o=r.length;n<o;n++){let{from:l,to:a}=r[n];for(;n<o-1&&a>r[n+1].from-500;)a=r[++n].to;t.highlight(s.state,l,a,(d,u)=>{let f=s.state.selection.ranges.some(h=>h.from==d&&h.to==u);i.add(d,u,f?p8:h8)})}return i.finish()}},{decorations:t=>t.decorations});function Ko(t){return e=>{let s=e.state.field(tn,!1);return s&&s.query.spec.valid?t(e,s):Tv(e)}}const ma=Ko((t,{query:e})=>{let{to:s}=t.state.selection.main,i=e.nextMatch(t.state,s,s);if(!i)return!1;let n=ne.single(i.from,i.to),r=t.state.facet(Dr);return t.dispatch({selection:n,effects:[rf(t,i),r.scrollToMatch(n.main,t)],userEvent:"select.search"}),Dv(t),!0}),ga=Ko((t,{query:e})=>{let{state:s}=t,{from:i}=s.selection.main,n=e.prevMatch(s,i,i);if(!n)return!1;let r=ne.single(n.from,n.to),o=t.state.facet(Dr);return t.dispatch({selection:r,effects:[rf(t,n),o.scrollToMatch(r.main,t)],userEvent:"select.search"}),Dv(t),!0}),g8=Ko((t,{query:e})=>{let s=e.matchAll(t.state,1e3);return!s||!s.length?!1:(t.dispatch({selection:ne.create(s.map(i=>ne.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),y8=({state:t,dispatch:e})=>{let s=t.selection;if(s.ranges.length>1||s.main.empty)return!1;let{from:i,to:n}=s.main,r=[],o=0;for(let l=new kr(t.doc,t.sliceDoc(i,n));!l.next().done;){if(r.length>1e3)return!1;l.value.from==i&&(o=r.length),r.push(ne.range(l.value.from,l.value.to))}return e(t.update({selection:ne.create(r,o),userEvent:"select.search.matches"})),!0},Qp=Ko((t,{query:e})=>{let{state:s}=t,{from:i,to:n}=s.selection.main;if(s.readOnly)return!1;let r=e.nextMatch(s,i,i);if(!r)return!1;let o=r,l=[],a,d,u=[];o.from==i&&o.to==n&&(d=s.toText(e.getReplacement(o)),l.push({from:o.from,to:o.to,insert:d}),o=e.nextMatch(s,o.from,o.to),u.push(Me.announce.of(s.phrase("replaced match on line $",s.doc.lineAt(i).number)+".")));let f=t.state.changes(l);return o&&(a=ne.single(o.from,o.to).map(f),u.push(rf(t,o)),u.push(s.facet(Dr).scrollToMatch(a.main,t))),t.dispatch({changes:f,selection:a,effects:u,userEvent:"input.replace"}),!0}),v8=Ko((t,{query:e})=>{if(t.state.readOnly)return!1;let s=e.matchAll(t.state,1e9).map(n=>{let{from:r,to:o}=n;return{from:r,to:o,insert:e.getReplacement(n)}});if(!s.length)return!1;let i=t.state.phrase("replaced $ matches",s.length)+".";return t.dispatch({changes:s,effects:Me.announce.of(i),userEvent:"input.replace.all"}),!0});function nf(t){return t.state.facet(Dr).createPanel(t)}function ic(t,e){var s,i,n,r,o;let l=t.selection.main,a=l.empty||l.to>l.from+100?"":t.sliceDoc(l.from,l.to);if(e&&!a)return e;let d=t.facet(Dr);return new Av({search:((s=e?.literal)!==null&&s!==void 0?s:d.literal)?a:a.replace(/\n/g,"\\n"),caseSensitive:(i=e?.caseSensitive)!==null&&i!==void 0?i:d.caseSensitive,literal:(n=e?.literal)!==null&&n!==void 0?n:d.literal,regexp:(r=e?.regexp)!==null&&r!==void 0?r:d.regexp,wholeWord:(o=e?.wholeWord)!==null&&o!==void 0?o:d.wholeWord})}function Mv(t){let e=Vo(t,nf);return e&&e.dom.querySelector("[main-field]")}function Dv(t){let e=Mv(t);e&&e==t.root.activeElement&&e.select()}const Tv=t=>{let e=t.state.field(tn,!1);if(e&&e.panel){let s=Mv(t);if(s&&s!=t.root.activeElement){let i=ic(t.state,e.query.spec);i.valid&&t.dispatch({effects:Po.of(i)}),s.focus(),s.select()}}else t.dispatch({effects:[sf.of(!0),e?Po.of(ic(t.state,e.query.spec)):We.appendConfig.of(w8)]});return!0},Ev=t=>{let e=t.state.field(tn,!1);if(!e||!e.panel)return!1;let s=Vo(t,nf);return s&&s.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:sf.of(!1)}),!0},b8=[{key:"Mod-f",run:Tv,scope:"editor search-panel"},{key:"F3",run:ma,shift:ga,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:ma,shift:ga,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Ev,scope:"editor search-panel"},{key:"Mod-Shift-l",run:y8},{key:"Mod-Alt-g",run:YA},{key:"Mod-d",run:a8,preventDefault:!0}];class x8{constructor(e){this.view=e;let s=this.query=e.state.field(tn).query.spec;this.commit=this.commit.bind(this),this.searchField=dt("input",{value:s.search,placeholder:ws(e,"Find"),"aria-label":ws(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=dt("input",{value:s.replace,placeholder:ws(e,"Replace"),"aria-label":ws(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=dt("input",{type:"checkbox",name:"case",form:"",checked:s.caseSensitive,onchange:this.commit}),this.reField=dt("input",{type:"checkbox",name:"re",form:"",checked:s.regexp,onchange:this.commit}),this.wordField=dt("input",{type:"checkbox",name:"word",form:"",checked:s.wholeWord,onchange:this.commit});function i(n,r,o){return dt("button",{class:"cm-button",name:n,onclick:r,type:"button"},o)}this.dom=dt("div",{onkeydown:n=>this.keydown(n),class:"cm-search"},[this.searchField,i("next",()=>ma(e),[ws(e,"next")]),i("prev",()=>ga(e),[ws(e,"previous")]),i("select",()=>g8(e),[ws(e,"all")]),dt("label",null,[this.caseField,ws(e,"match case")]),dt("label",null,[this.reField,ws(e,"regexp")]),dt("label",null,[this.wordField,ws(e,"by word")]),...e.state.readOnly?[]:[dt("br"),this.replaceField,i("replace",()=>Qp(e),[ws(e,"replace")]),i("replaceAll",()=>v8(e),[ws(e,"replace all")])],dt("button",{name:"close",onclick:()=>Ev(e),"aria-label":ws(e,"close"),type:"button"},[""])])}commit(){let e=new Av({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Po.of(e)}))}keydown(e){w_(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?ga:ma)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),Qp(this.view))}update(e){for(let s of e.transactions)for(let i of s.effects)i.is(Po)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Dr).top}}function ws(t,e){return t.state.phrase(e)}const Sl=30,Cl=/[\s\.,:;?!]/;function rf(t,{from:e,to:s}){let i=t.state.doc.lineAt(e),n=t.state.doc.lineAt(s).to,r=Math.max(i.from,e-Sl),o=Math.min(n,s+Sl),l=t.state.sliceDoc(r,o);if(r!=i.from){for(let a=0;a<Sl;a++)if(!Cl.test(l[a+1])&&Cl.test(l[a])){l=l.slice(a);break}}if(o!=n){for(let a=l.length-1;a>l.length-Sl;a--)if(!Cl.test(l[a-1])&&Cl.test(l[a])){l=l.slice(0,a);break}}return Me.announce.of(`${t.state.phrase("current match")}. ${l} ${t.state.phrase("on line")} ${i.number}.`)}const k8=Me.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),w8=[tn,zn.low(m8),k8];class $v{constructor(e,s,i,n){this.state=e,this.pos=s,this.explicit=i,this.view=n,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let s=ts(this.state).resolveInner(this.pos,-1);for(;s&&e.indexOf(s.name)<0;)s=s.parent;return s?{from:s.from,to:this.pos,text:this.state.sliceDoc(s.from,this.pos),type:s.type}:null}matchBefore(e){let s=this.state.doc.lineAt(this.pos),i=Math.max(s.from,this.pos-250),n=s.text.slice(i-s.from,this.pos-s.from),r=n.search(Pv(e,!1));return r<0?null:{from:i+r,to:this.pos,text:n.slice(r)}}get aborted(){return this.abortListeners==null}addEventListener(e,s,i){e=="abort"&&this.abortListeners&&(this.abortListeners.push(s),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function Zp(t){let e=Object.keys(t).join(""),s=/\w/.test(e);return s&&(e=e.replace(/\w/g,"")),`[${s?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function S8(t){let e=Object.create(null),s=Object.create(null);for(let{label:n}of t){e[n[0]]=!0;for(let r=1;r<n.length;r++)s[n[r]]=!0}let i=Zp(e)+Zp(s)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function C8(t){let e=t.map(n=>typeof n=="string"?{label:n}:n),[s,i]=e.every(n=>/^\w+$/.test(n.label))?[/\w*$/,/\w+$/]:S8(e);return n=>{let r=n.matchBefore(i);return r||n.explicit?{from:r?r.from:n.pos,options:e,validFor:s}:null}}class em{constructor(e,s,i,n){this.completion=e,this.source=s,this.match=i,this.score=n}}function Pn(t){return t.selection.main.from}function Pv(t,e){var s;let{source:i}=t,n=e&&i[0]!="^",r=i[i.length-1]!="$";return!n&&!r?t:new RegExp(`${n?"^":""}(?:${i})${r?"$":""}`,(s=t.flags)!==null&&s!==void 0?s:t.ignoreCase?"i":"")}const Ov=Ii.define();function _8(t,e,s,i){let{main:n}=t.selection,r=s-n.from,o=i-n.from;return{...t.changeByRange(l=>{if(l!=n&&s!=i&&t.sliceDoc(l.from+r,l.from+o)!=t.sliceDoc(s,i))return{range:l};let a=t.toText(e);return{changes:{from:l.from+r,to:i==n.from?l.to:l.from+o,insert:a},range:ne.cursor(l.from+r+a.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}const tm=new WeakMap;function A8(t){if(!Array.isArray(t))return t;let e=tm.get(t);return e||tm.set(t,e=C8(t)),e}const ya=We.define(),Oo=We.define();class V8{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let s=0;s<e.length;){let i=ms(e,s),n=ci(i);this.chars.push(i);let r=e.slice(s,s+n),o=r.toUpperCase();this.folded.push(ms(o==r?r.toLowerCase():o,0)),s+=n}this.astral=e.length!=this.chars.length}ret(e,s){return this.score=e,this.matched=s,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:s,folded:i,any:n,precise:r,byWord:o}=this;if(s.length==1){let L=ms(e,0),$=ci(L),T=$==e.length?0:-100;if(L!=s[0])if(L==i[0])T+=-200;else return null;return this.ret(T,[0,$])}let l=e.indexOf(this.pattern);if(l==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let a=s.length,d=0;if(l<0){for(let L=0,$=Math.min(e.length,200);L<$&&d<a;){let T=ms(e,L);(T==s[d]||T==i[d])&&(n[d++]=L),L+=ci(T)}if(d<a)return null}let u=0,f=0,h=!1,m=0,w=-1,S=-1,_=/[a-z]/.test(e),M=!0;for(let L=0,$=Math.min(e.length,200),T=0;L<$&&f<a;){let N=ms(e,L);l<0&&(u<a&&N==s[u]&&(r[u++]=L),m<a&&(N==s[m]||N==i[m]?(m==0&&(w=L),S=L+1,m++):m=0));let B,I=N<255?N>=48&&N<=57||N>=97&&N<=122?2:N>=65&&N<=90?1:0:(B=Ac(N))!=B.toLowerCase()?1:B!=B.toUpperCase()?2:0;(!L||I==1&&_||T==0&&I!=0)&&(s[f]==N||i[f]==N&&(h=!0)?o[f++]=L:o.length&&(M=!1)),T=I,L+=ci(N)}return f==a&&o[0]==0&&M?this.result(-100+(h?-200:0),o,e):m==a&&w==0?this.ret(-200-e.length+(S==e.length?0:-100),[0,S]):l>-1?this.ret(-700-e.length,[l,l+this.pattern.length]):m==a?this.ret(-900-e.length,[w,S]):f==a?this.result(-100+(h?-200:0)+-700+(M?0:-1100),o,e):s.length==2?null:this.result((n[0]?-700:0)+-200+-1100,n,e)}result(e,s,i){let n=[],r=0;for(let o of s){let l=o+(this.astral?ci(ms(i,o)):1);r&&n[r-1]==o?n[r-1]=l:(n[r++]=o,n[r++]=l)}return this.ret(e-i.length,n)}}class M8{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let s=e.slice(0,this.pattern.length),i=s==this.pattern?0:s.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,s.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const Bt=De.define({combine(t){return bi(t,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:D8,filterStrict:!1,compareCompletions:(e,s)=>e.label.localeCompare(s.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,s)=>e&&s,closeOnBlur:(e,s)=>e&&s,icons:(e,s)=>e&&s,tooltipClass:(e,s)=>i=>sm(e(i),s(i)),optionClass:(e,s)=>i=>sm(e(i),s(i)),addToOptions:(e,s)=>e.concat(s),filterStrict:(e,s)=>e||s})}});function sm(t,e){return t?e?t+" "+e:t:e}function D8(t,e,s,i,n,r){let o=t.textDirection==yt.RTL,l=o,a=!1,d="top",u,f,h=e.left-n.left,m=n.right-e.right,w=i.right-i.left,S=i.bottom-i.top;if(l&&h<Math.min(w,m)?l=!1:!l&&m<Math.min(w,h)&&(l=!0),w<=(l?h:m))u=Math.max(n.top,Math.min(s.top,n.bottom-S))-e.top,f=Math.min(400,l?h:m);else{a=!0,f=Math.min(400,(o?e.right:n.right-e.left)-30);let L=n.bottom-e.bottom;L>=S||L>e.top?u=s.bottom-e.top:(d="bottom",u=e.bottom-s.top)}let _=(e.bottom-e.top)/r.offsetHeight,M=(e.right-e.left)/r.offsetWidth;return{style:`${d}: ${u/_}px; max-width: ${f/M}px`,class:"cm-completionInfo-"+(a?o?"left-narrow":"right-narrow":l?"left":"right")}}function T8(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(s){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),s.type&&i.classList.add(...s.type.split(/\s+/g).map(n=>"cm-completionIcon-"+n)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(s,i,n,r){let o=document.createElement("span");o.className="cm-completionLabel";let l=s.displayLabel||s.label,a=0;for(let d=0;d<r.length;){let u=r[d++],f=r[d++];u>a&&o.appendChild(document.createTextNode(l.slice(a,u)));let h=o.appendChild(document.createElement("span"));h.appendChild(document.createTextNode(l.slice(u,f))),h.className="cm-completionMatchedText",a=f}return a<l.length&&o.appendChild(document.createTextNode(l.slice(a))),o},position:50},{render(s){if(!s.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=s.detail,i},position:80}),e.sort((s,i)=>s.position-i.position).map(s=>s.render)}function Uu(t,e,s){if(t<=s)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let n=Math.floor(e/s);return{from:n*s,to:(n+1)*s}}let i=Math.floor((t-e)/s);return{from:t-(i+1)*s,to:t-i*s}}class E8{constructor(e,s,i){this.view=e,this.stateField=s,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:a=>this.placeInfo(a),key:this},this.space=null,this.currentClass="";let n=e.state.field(s),{options:r,selected:o}=n.open,l=e.state.facet(Bt);this.optionContent=T8(l),this.optionClass=l.optionClass,this.tooltipClass=l.tooltipClass,this.range=Uu(r.length,o,l.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",a=>{let{options:d}=e.state.field(s).open;for(let u=a.target,f;u&&u!=this.dom;u=u.parentNode)if(u.nodeName=="LI"&&(f=/-(\d+)$/.exec(u.id))&&+f[1]<d.length){this.applyCompletion(e,d[+f[1]]),a.preventDefault();return}}),this.dom.addEventListener("focusout",a=>{let d=e.state.field(this.stateField,!1);d&&d.tooltip&&e.state.facet(Bt).closeOnBlur&&a.relatedTarget!=e.contentDOM&&e.dispatch({effects:Oo.of(null)})}),this.showOptions(r,n.id)}mount(){this.updateSel()}showOptions(e,s){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,s,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var s;let i=e.state.field(this.stateField),n=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=n){let{options:r,selected:o,disabled:l}=i.open;(!n.open||n.open.options!=r)&&(this.range=Uu(r.length,o,e.state.facet(Bt).maxRenderedOptions),this.showOptions(r,i.id)),this.updateSel(),l!=((s=n.open)===null||s===void 0?void 0:s.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!l)}}updateTooltipClass(e){let s=this.tooltipClass(e);if(s!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of s.split(" "))i&&this.dom.classList.add(i);this.currentClass=s}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),s=e.open;(s.selected>-1&&s.selected<this.range.from||s.selected>=this.range.to)&&(this.range=Uu(s.options.length,s.selected,this.view.state.facet(Bt).maxRenderedOptions),this.showOptions(s.options,e.id));let i=this.updateSelectedOption(s.selected);if(i){this.destroyInfo();let{completion:n}=s.options[s.selected],{info:r}=n;if(!r)return;let o=typeof r=="string"?document.createTextNode(r):r(n);if(!o)return;"then"in o?o.then(l=>{l&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(l,n)}).catch(l=>ys(this.view.state,l,"completion info")):(this.addInfoPane(o,n),i.setAttribute("aria-describedby",this.info.id))}}addInfoPane(e,s){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",i.id="cm-completionInfo-"+Math.floor(Math.random()*65535).toString(16),e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:n,destroy:r}=e;i.appendChild(n),this.infoDestroy=r||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let s=null;for(let i=this.list.firstChild,n=this.range.from;i;i=i.nextSibling,n++)i.nodeName!="LI"||!i.id?n--:n==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),s=i):i.hasAttribute("aria-selected")&&(i.removeAttribute("aria-selected"),i.removeAttribute("aria-describedby"));return s&&P8(this.list,s),s}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let s=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),n=e.getBoundingClientRect(),r=this.space;if(!r){let o=this.dom.ownerDocument.documentElement;r={left:0,top:0,right:o.clientWidth,bottom:o.clientHeight}}return n.top>Math.min(r.bottom,s.bottom)-10||n.bottom<Math.max(r.top,s.top)+10?null:this.view.state.facet(Bt).positionInfo(this.view,s,n,i,r,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,s,i){const n=document.createElement("ul");n.id=s,n.setAttribute("role","listbox"),n.setAttribute("aria-expanded","true"),n.setAttribute("aria-label",this.view.state.phrase("Completions")),n.addEventListener("mousedown",o=>{o.target==n&&o.preventDefault()});let r=null;for(let o=i.from;o<i.to;o++){let{completion:l,match:a}=e[o],{section:d}=l;if(d){let h=typeof d=="string"?d:d.name;if(h!=r&&(o>i.from||i.from==0))if(r=h,typeof d!="string"&&d.header)n.appendChild(d.header(d));else{let m=n.appendChild(document.createElement("completion-section"));m.textContent=h}}const u=n.appendChild(document.createElement("li"));u.id=s+"-"+o,u.setAttribute("role","option");let f=this.optionClass(l);f&&(u.className=f);for(let h of this.optionContent){let m=h(l,this.view.state,this.view,a);m&&u.appendChild(m)}}return i.from&&n.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&n.classList.add("cm-completionListIncompleteBottom"),n}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function $8(t,e){return s=>new E8(s,t,e)}function P8(t,e){let s=t.getBoundingClientRect(),i=e.getBoundingClientRect(),n=s.height/t.offsetHeight;i.top<s.top?t.scrollTop-=(s.top-i.top)/n:i.bottom>s.bottom&&(t.scrollTop+=(i.bottom-s.bottom)/n)}function im(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function O8(t,e){let s=[],i=null,n=null,r=u=>{s.push(u);let{section:f}=u.completion;if(f){i||(i=[]);let h=typeof f=="string"?f:f.name;i.some(m=>m.name==h)||i.push(typeof f=="string"?{name:h}:f)}},o=e.facet(Bt);for(let u of t)if(u.hasResult()){let f=u.result.getMatch;if(u.result.filter===!1)for(let h of u.result.options)r(new em(h,u.source,f?f(h):[],1e9-s.length));else{let h=e.sliceDoc(u.from,u.to),m,w=o.filterStrict?new M8(h):new V8(h);for(let S of u.result.options)if(m=w.match(S.label)){let _=S.displayLabel?f?f(S,m.matched):[]:m.matched,M=m.score+(S.boost||0);if(r(new em(S,u.source,_,M)),typeof S.section=="object"&&S.section.rank==="dynamic"){let{name:L}=S.section;n||(n=Object.create(null)),n[L]=Math.max(M,n[L]||-1e9)}}}}if(i){let u=Object.create(null),f=0,h=(m,w)=>(m.rank==="dynamic"&&w.rank==="dynamic"?n[w.name]-n[m.name]:0)||(typeof m.rank=="number"?m.rank:1e9)-(typeof w.rank=="number"?w.rank:1e9)||(m.name<w.name?-1:1);for(let m of i.sort(h))f-=1e5,u[m.name]=f;for(let m of s){let{section:w}=m.completion;w&&(m.score+=u[typeof w=="string"?w:w.name])}}let l=[],a=null,d=o.compareCompletions;for(let u of s.sort((f,h)=>h.score-f.score||d(f.completion,h.completion))){let f=u.completion;!a||a.label!=f.label||a.detail!=f.detail||a.type!=null&&f.type!=null&&a.type!=f.type||a.apply!=f.apply||a.boost!=f.boost?l.push(u):im(u.completion)>im(a)&&(l[l.length-1]=u),a=u.completion}return l}class Zn{constructor(e,s,i,n,r,o){this.options=e,this.attrs=s,this.tooltip=i,this.timestamp=n,this.selected=r,this.disabled=o}setSelected(e,s){return e==this.selected||e>=this.options.length?this:new Zn(this.options,nm(s,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,s,i,n,r,o){if(n&&!o&&e.some(d=>d.isPending))return n.setDisabled();let l=O8(e,s);if(!l.length)return n&&e.some(d=>d.isPending)?n.setDisabled():null;let a=s.facet(Bt).selectOnOpen?0:-1;if(n&&n.selected!=a&&n.selected!=-1){let d=n.options[n.selected].completion;for(let u=0;u<l.length;u++)if(l[u].completion==d){a=u;break}}return new Zn(l,nm(i,a),{pos:e.reduce((d,u)=>u.hasResult()?Math.min(d,u.from):d,1e8),create:U8,above:r.aboveCursor},n?n.timestamp:Date.now(),a,!1)}map(e){return new Zn(this.options,this.attrs,{...this.tooltip,pos:e.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new Zn(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class va{constructor(e,s,i){this.active=e,this.id=s,this.open=i}static start(){return new va(B8,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:s}=e,i=s.facet(Bt),r=(i.override||s.languageDataAt("autocomplete",Pn(s)).map(A8)).map(a=>(this.active.find(u=>u.source==a)||new Es(a,this.active.some(u=>u.state!=0)?1:0)).update(e,i));r.length==this.active.length&&r.every((a,d)=>a==this.active[d])&&(r=this.active);let o=this.open,l=e.effects.some(a=>a.is(of));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||r.some(a=>a.hasResult()&&e.changes.touchesRange(a.from,a.to))||!R8(r,this.active)||l?o=Zn.build(r,s,this.id,o,i,l):o&&o.disabled&&!r.some(a=>a.isPending)&&(o=null),!o&&r.every(a=>!a.isPending)&&r.some(a=>a.hasResult())&&(r=r.map(a=>a.hasResult()?new Es(a.source,0):a));for(let a of e.effects)a.is(jv)&&(o=o&&o.setSelected(a.value,this.id));return r==this.active&&o==this.open?this:new va(r,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?j8:L8}}function R8(t,e){if(t==e)return!0;for(let s=0,i=0;;){for(;s<t.length&&!t[s].hasResult();)s++;for(;i<e.length&&!e[i].hasResult();)i++;let n=s==t.length,r=i==e.length;if(n||r)return n==r;if(t[s++].result!=e[i++].result)return!1}}const j8={"aria-autocomplete":"list"},L8={};function nm(t,e){let s={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(s["aria-activedescendant"]=t+"-"+e),s}const B8=[];function Rv(t,e){if(t.isUserEvent("input.complete")){let i=t.annotation(Ov);if(i&&e.activateOnCompletion(i))return 12}let s=t.isUserEvent("input.type");return s&&e.activateOnTyping?5:s?1:t.isUserEvent("delete.backward")?2:t.selection?8:t.docChanged?16:0}class Es{constructor(e,s,i=!1){this.source=e,this.state=s,this.explicit=i}hasResult(){return!1}get isPending(){return this.state==1}update(e,s){let i=Rv(e,s),n=this;(i&8||i&16&&this.touches(e))&&(n=new Es(n.source,0)),i&4&&n.state==0&&(n=new Es(this.source,1)),n=n.updateFor(e,i);for(let r of e.effects)if(r.is(ya))n=new Es(n.source,1,r.value);else if(r.is(Oo))n=new Es(n.source,0);else if(r.is(of))for(let o of r.value)o.source==n.source&&(n=o);return n}updateFor(e,s){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(Pn(e.state))}}class cr extends Es{constructor(e,s,i,n,r,o){super(e,3,s),this.limit=i,this.result=n,this.from=r,this.to=o}hasResult(){return!0}updateFor(e,s){var i;if(!(s&3))return this.map(e.changes);let n=this.result;n.map&&!e.changes.empty&&(n=n.map(n,e.changes));let r=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),l=Pn(e.state);if(l>o||!n||s&2&&(Pn(e.startState)==this.from||l<this.limit))return new Es(this.source,s&4?1:0);let a=e.changes.mapPos(this.limit);return I8(n.validFor,e.state,r,o)?new cr(this.source,this.explicit,a,n,r,o):n.update&&(n=n.update(n,r,o,new $v(e.state,l,!1)))?new cr(this.source,this.explicit,a,n,n.from,(i=n.to)!==null&&i!==void 0?i:Pn(e.state)):new Es(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new cr(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new Es(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function I8(t,e,s,i){if(!t)return!1;let n=e.sliceDoc(s,i);return typeof t=="function"?t(n,s,i,e):Pv(t,!0).test(n)}const of=We.define({map(t,e){return t.map(s=>s.map(e))}}),jv=We.define(),gs=Gt.define({create(){return va.start()},update(t,e){return t.update(e)},provide:t=>[Nc.from(t,e=>e.tooltip),Me.contentAttributes.from(t,e=>e.attrs)]});function lf(t,e){const s=e.completion.apply||e.completion.label;let i=t.state.field(gs).active.find(n=>n.source==e.source);return i instanceof cr?(typeof s=="string"?t.dispatch({..._8(t.state,s,i.from,i.to),annotations:Ov.of(e.completion)}):s(t,e.completion,i.from,i.to),!0):!1}const U8=$8(gs,lf);function _l(t,e="option"){return s=>{let i=s.state.field(gs,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<s.state.facet(Bt).interactionDelay)return!1;let n=1,r;e=="page"&&(r=my(s,i.open.tooltip))&&(n=Math.max(2,Math.floor(r.dom.offsetHeight/r.dom.querySelector("li").offsetHeight)-1));let{length:o}=i.open.options,l=i.open.selected>-1?i.open.selected+n*(t?1:-1):t?0:o-1;return l<0?l=e=="page"?0:o-1:l>=o&&(l=e=="page"?o-1:0),s.dispatch({effects:jv.of(l)}),!0}}const N8=t=>{let e=t.state.field(gs,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(Bt).interactionDelay?!1:lf(t,e.open.options[e.open.selected])},Nu=t=>t.state.field(gs,!1)?(t.dispatch({effects:ya.of(!0)}),!0):!1,z8=t=>{let e=t.state.field(gs,!1);return!e||!e.active.some(s=>s.state!=0)?!1:(t.dispatch({effects:Oo.of(null)}),!0)};class F8{constructor(e,s){this.active=e,this.context=s,this.time=Date.now(),this.updates=[],this.done=void 0}}const H8=50,W8=1e3,q8=$t.fromClass(class{constructor(t){this.view=t,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of t.state.field(gs).active)e.isPending&&this.startQuery(e)}update(t){let e=t.state.field(gs),s=t.state.facet(Bt);if(!t.selectionSet&&!t.docChanged&&t.startState.field(gs)==e)return;let i=t.transactions.some(r=>{let o=Rv(r,s);return o&8||(r.selection||r.docChanged)&&!(o&3)});for(let r=0;r<this.running.length;r++){let o=this.running[r];if(i||o.context.abortOnDocChange&&t.docChanged||o.updates.length+t.transactions.length>H8&&Date.now()-o.time>W8){for(let l of o.context.abortListeners)try{l()}catch(a){ys(this.view.state,a)}o.context.abortListeners=null,this.running.splice(r--,1)}else o.updates.push(...t.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),t.transactions.some(r=>r.effects.some(o=>o.is(ya)))&&(this.pendingStart=!0);let n=this.pendingStart?50:s.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(r=>r.isPending&&!this.running.some(o=>o.active.source==r.source))?setTimeout(()=>this.startUpdate(),n):-1,this.composing!=0)for(let r of t.transactions)r.isUserEvent("input.type")?this.composing=2:this.composing==2&&r.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:t}=this.view,e=t.field(gs);for(let s of e.active)s.isPending&&!this.running.some(i=>i.active.source==s.source)&&this.startQuery(s);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Bt).updateSyncTime))}startQuery(t){let{state:e}=this.view,s=Pn(e),i=new $v(e,s,t.explicit,this.view),n=new F8(t,i);this.running.push(n),Promise.resolve(t.source(i)).then(r=>{n.context.aborted||(n.done=r||null,this.scheduleAccept())},r=>{this.view.dispatch({effects:Oo.of(null)}),ys(this.view.state,r)})}scheduleAccept(){this.running.every(t=>t.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Bt).updateSyncTime))}accept(){var t;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],s=this.view.state.facet(Bt),i=this.view.state.field(gs);for(let n=0;n<this.running.length;n++){let r=this.running[n];if(r.done===void 0)continue;if(this.running.splice(n--,1),r.done){let l=Pn(r.updates.length?r.updates[0].startState:this.view.state),a=Math.min(l,r.done.from+(r.active.explicit?0:1)),d=new cr(r.active.source,r.active.explicit,a,r.done,r.done.from,(t=r.done.to)!==null&&t!==void 0?t:l);for(let u of r.updates)d=d.update(u,s);if(d.hasResult()){e.push(d);continue}}let o=i.active.find(l=>l.source==r.active.source);if(o&&o.isPending)if(r.done==null){let l=new Es(r.active.source,0);for(let a of r.updates)l=l.update(a,s);l.isPending||e.push(l)}else this.startQuery(o)}(e.length||i.open&&i.open.disabled)&&this.view.dispatch({effects:of.of(e)})}},{eventHandlers:{blur(t){let e=this.view.state.field(gs,!1);if(e&&e.tooltip&&this.view.state.facet(Bt).closeOnBlur){let s=e.open&&my(this.view,e.open.tooltip);(!s||!s.dom.contains(t.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:Oo.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:ya.of(!1)}),20),this.composing=0}}}),G8=typeof navigator=="object"&&/Win/.test(navigator.platform),K8=zn.highest(Me.domEventHandlers({keydown(t,e){let s=e.state.field(gs,!1);if(!s||!s.open||s.open.disabled||s.open.selected<0||t.key.length>1||t.ctrlKey&&!(G8&&t.altKey)||t.metaKey)return!1;let i=s.open.options[s.open.selected],n=s.active.find(o=>o.source==i.source),r=i.completion.commitCharacters||n.result.commitCharacters;return r&&r.indexOf(t.key)>-1&&lf(e,i),!1}})),J8=Me.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),Ro={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Dn=We.define({map(t,e){let s=e.mapPos(t,-1,cs.TrackAfter);return s??void 0}}),af=new class extends Rn{};af.startSide=1;af.endSide=-1;const Lv=Gt.define({create(){return et.empty},update(t,e){if(t=t.map(e.changes),e.selection){let s=e.state.doc.lineAt(e.selection.main.head);t=t.update({filter:i=>i>=s.from&&i<=s.to})}for(let s of e.effects)s.is(Dn)&&(t=t.update({add:[af.range(s.value,s.value+1)]}));return t}});function Y8(){return[Q8,Lv]}const zu="()[]{}<>";function Bv(t){for(let e=0;e<zu.length;e+=2)if(zu.charCodeAt(e)==t)return zu.charAt(e+1);return Ac(t<128?t:t+1)}function Iv(t,e){return t.languageDataAt("closeBrackets",e)[0]||Ro}const X8=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),Q8=Me.inputHandler.of((t,e,s,i)=>{if((X8?t.composing:t.compositionStarted)||t.state.readOnly)return!1;let n=t.state.selection.main;if(i.length>2||i.length==2&&ci(ms(i,0))==1||e!=n.from||s!=n.to)return!1;let r=tV(t.state,i);return r?(t.dispatch(r),!0):!1}),Z8=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let i=Iv(t,t.selection.main.head).brackets||Ro.brackets,n=null,r=t.changeByRange(o=>{if(o.empty){let l=sV(t.doc,o.head);for(let a of i)if(a==l&&qa(t.doc,o.head)==Bv(ms(a,0)))return{changes:{from:o.head-a.length,to:o.head+a.length},range:ne.cursor(o.head-a.length)}}return{range:n=o}});return n||e(t.update(r,{scrollIntoView:!0,userEvent:"delete.backward"})),!n},eV=[{key:"Backspace",run:Z8}];function tV(t,e){let s=Iv(t,t.selection.main.head),i=s.brackets||Ro.brackets;for(let n of i){let r=Bv(ms(n,0));if(e==n)return r==n?rV(t,n,i.indexOf(n+n+n)>-1,s):iV(t,n,r,s.before||Ro.before);if(e==r&&Uv(t,t.selection.main.from))return nV(t,n,r)}return null}function Uv(t,e){let s=!1;return t.field(Lv).between(0,t.doc.length,i=>{i==e&&(s=!0)}),s}function qa(t,e){let s=t.sliceString(e,e+2);return s.slice(0,ci(ms(s,0)))}function sV(t,e){let s=t.sliceString(e-2,e);return ci(ms(s,0))==s.length?s:s.slice(1)}function iV(t,e,s,i){let n=null,r=t.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:s,from:o.to}],effects:Dn.of(o.to+e.length),range:ne.range(o.anchor+e.length,o.head+e.length)};let l=qa(t.doc,o.head);return!l||/\s/.test(l)||i.indexOf(l)>-1?{changes:{insert:e+s,from:o.head},effects:Dn.of(o.head+e.length),range:ne.cursor(o.head+e.length)}:{range:n=o}});return n?null:t.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function nV(t,e,s){let i=null,n=t.changeByRange(r=>r.empty&&qa(t.doc,r.head)==s?{changes:{from:r.head,to:r.head+s.length,insert:s},range:ne.cursor(r.head+s.length)}:i={range:r});return i?null:t.update(n,{scrollIntoView:!0,userEvent:"input.type"})}function rV(t,e,s,i){let n=i.stringPrefixes||Ro.stringPrefixes,r=null,o=t.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:e,from:l.to}],effects:Dn.of(l.to+e.length),range:ne.range(l.anchor+e.length,l.head+e.length)};let a=l.head,d=qa(t.doc,a),u;if(d==e){if(rm(t,a))return{changes:{insert:e+e,from:a},effects:Dn.of(a+e.length),range:ne.cursor(a+e.length)};if(Uv(t,a)){let h=s&&t.sliceDoc(a,a+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:a,to:a+h.length,insert:h},range:ne.cursor(a+h.length)}}}else{if(s&&t.sliceDoc(a-2*e.length,a)==e+e&&(u=om(t,a-2*e.length,n))>-1&&rm(t,u))return{changes:{insert:e+e+e+e,from:a},effects:Dn.of(a+e.length),range:ne.cursor(a+e.length)};if(t.charCategorizer(a)(d)!=vt.Word&&om(t,a,n)>-1&&!oV(t,a,e,n))return{changes:{insert:e+e,from:a},effects:Dn.of(a+e.length),range:ne.cursor(a+e.length)}}return{range:r=l}});return r?null:t.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function rm(t,e){let s=ts(t).resolveInner(e+1);return s.parent&&s.from==e}function oV(t,e,s,i){let n=ts(t).resolveInner(e,-1),r=i.reduce((o,l)=>Math.max(o,l.length),0);for(let o=0;o<5;o++){let l=t.sliceDoc(n.from,Math.min(n.to,n.from+s.length+r)),a=l.indexOf(s);if(!a||a>-1&&i.indexOf(l.slice(0,a))>-1){let u=n.firstChild;for(;u&&u.from==n.from&&u.to-u.from>s.length+a;){if(t.sliceDoc(u.to-s.length,u.to)==s)return!1;u=u.firstChild}return!0}let d=n.to==e&&n.parent;if(!d)break;n=d}return!1}function om(t,e,s){let i=t.charCategorizer(e);if(i(t.sliceDoc(e-1,e))!=vt.Word)return e;for(let n of s){let r=e-n.length;if(t.sliceDoc(r,e)==n&&i(t.sliceDoc(r-1,r))!=vt.Word)return r}return-1}function lV(t={}){return[K8,gs,Bt.of(t),q8,aV,J8]}const Nv=[{key:"Ctrl-Space",run:Nu},{mac:"Alt-`",run:Nu},{mac:"Alt-i",run:Nu},{key:"Escape",run:z8},{key:"ArrowDown",run:_l(!0)},{key:"ArrowUp",run:_l(!1)},{key:"PageDown",run:_l(!0,"page")},{key:"PageUp",run:_l(!1,"page")},{key:"Enter",run:N8}],aV=zn.highest(Ic.computeN([Bt],t=>t.facet(Bt).defaultKeymap?[Nv]:[]));class lm{constructor(e,s,i){this.from=e,this.to=s,this.diagnostic=i}}class _n{constructor(e,s,i){this.diagnostics=e,this.panel=s,this.selected=i}static init(e,s,i){let n=i.facet(jo).markerFilter;n&&(e=n(e,i));let r=e.slice().sort((m,w)=>m.from-w.from||m.to-w.to),o=new Ri,l=[],a=0,d=i.doc.iter(),u=0,f=i.doc.length;for(let m=0;;){let w=m==r.length?null:r[m];if(!w&&!l.length)break;let S,_;if(l.length)S=a,_=l.reduce(($,T)=>Math.min($,T.to),w&&w.from>S?w.from:1e8);else{if(S=w.from,S>f)break;_=w.to,l.push(w),m++}for(;m<r.length;){let $=r[m];if($.from==S&&($.to>$.from||$.to==S))l.push($),m++,_=Math.min($.to,_);else{_=Math.min($.from,_);break}}_=Math.min(_,f);let M=!1;if(l.some($=>$.from==S&&($.to==_||_==f))&&(M=S==_,!M&&_-S<10)){let $=S-(u+d.value.length);$>0&&(d.next($),u=S);for(let T=S;;){if(T>=_){M=!0;break}if(!d.lineBreak&&u+d.value.length>T)break;T=u+d.value.length,u+=d.value.length,d.next()}}let L=kV(l);if(M)o.add(S,S,Ie.widget({widget:new yV(L),diagnostics:l.slice()}));else{let $=l.reduce((T,N)=>N.markClass?T+" "+N.markClass:T,"");o.add(S,_,Ie.mark({class:"cm-lintRange cm-lintRange-"+L+$,diagnostics:l.slice(),inclusiveEnd:l.some(T=>T.to>_)}))}if(a=_,a==f)break;for(let $=0;$<l.length;$++)l[$].to<=a&&l.splice($--,1)}let h=o.finish();return new _n(h,s,wr(h))}}function wr(t,e=null,s=0){let i=null;return t.between(s,1e9,(n,r,{spec:o})=>{if(!(e&&o.diagnostics.indexOf(e)<0))if(!i)i=new lm(n,r,e||o.diagnostics[0]);else{if(o.diagnostics.indexOf(i.diagnostic)<0)return!1;i=new lm(i.from,r,i.diagnostic)}}),i}function uV(t,e){let s=e.pos,i=e.end||s,n=t.state.facet(jo).hideOn(t,s,i);if(n!=null)return n;let r=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(o=>o.is(zv))||t.changes.touchesRange(r.from,Math.max(r.to,i)))}function dV(t,e){return t.field(As,!1)?e:e.concat(We.appendConfig.of(wV))}const zv=We.define(),uf=We.define(),Fv=We.define(),As=Gt.define({create(){return new _n(Ie.none,null,null)},update(t,e){if(e.docChanged&&t.diagnostics.size){let s=t.diagnostics.map(e.changes),i=null,n=t.panel;if(t.selected){let r=e.changes.mapPos(t.selected.from,1);i=wr(s,t.selected.diagnostic,r)||wr(s,null,r)}!s.size&&n&&e.state.facet(jo).autoPanel&&(n=null),t=new _n(s,n,i)}for(let s of e.effects)if(s.is(zv)){let i=e.state.facet(jo).autoPanel?s.value.length?Lo.open:null:t.panel;t=_n.init(s.value,i,e.state)}else s.is(uf)?t=new _n(t.diagnostics,s.value?Lo.open:null,t.selected):s.is(Fv)&&(t=new _n(t.diagnostics,t.panel,s.value));return t},provide:t=>[Mo.from(t,e=>e.panel),Me.decorations.from(t,e=>e.diagnostics)]}),cV=Ie.mark({class:"cm-lintRange cm-lintRange-active"});function fV(t,e,s){let{diagnostics:i}=t.state.field(As),n,r=-1,o=-1;i.between(e-(s<0?1:0),e+(s>0?1:0),(a,d,{spec:u})=>{if(e>=a&&e<=d&&(a==d||(e>a||s>0)&&(e<d||s<0)))return n=u.diagnostics,r=a,o=d,!1});let l=t.state.facet(jo).tooltipFilter;return n&&l&&(n=l(n,t.state)),n?{pos:r,end:o,above:t.state.doc.lineAt(r).to<o,create(){return{dom:hV(t,n)}}}:null}function hV(t,e){return dt("ul",{class:"cm-tooltip-lint"},e.map(s=>Wv(t,s,!1)))}const pV=t=>{let e=t.state.field(As,!1);(!e||!e.panel)&&t.dispatch({effects:dV(t.state,[uf.of(!0)])});let s=Vo(t,Lo.open);return s&&s.dom.querySelector(".cm-panel-lint ul").focus(),!0},am=t=>{let e=t.state.field(As,!1);return!e||!e.panel?!1:(t.dispatch({effects:uf.of(!1)}),!0)},mV=t=>{let e=t.state.field(As,!1);if(!e)return!1;let s=t.state.selection.main,i=e.diagnostics.iter(s.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==s.from&&i.to==s.to)?!1:(t.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},gV=[{key:"Mod-Shift-m",run:pV,preventDefault:!0},{key:"F8",run:mV}],jo=De.define({combine(t){return{sources:t.map(e=>e.source).filter(e=>e!=null),...bi(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:um,tooltipFilter:um,needsRefresh:(e,s)=>e?s?i=>e(i)||s(i):e:s,hideOn:(e,s)=>e?s?(i,n,r)=>e(i,n,r)||s(i,n,r):e:s,autoPanel:(e,s)=>e||s})}}});function um(t,e){return t?e?(s,i)=>e(t(s,i),i):t:e}function Hv(t){let e=[];if(t)e:for(let{name:s}of t){for(let i=0;i<s.length;i++){let n=s[i];if(/[a-zA-Z]/.test(n)&&!e.some(r=>r.toLowerCase()==n.toLowerCase())){e.push(n);continue e}}e.push("")}return e}function Wv(t,e,s){var i;let n=s?Hv(e.actions):[];return dt("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},dt("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(t):e.message),(i=e.actions)===null||i===void 0?void 0:i.map((r,o)=>{let l=!1,a=m=>{if(m.preventDefault(),l)return;l=!0;let w=wr(t.state.field(As).diagnostics,e);w&&r.apply(t,w.from,w.to)},{name:d}=r,u=n[o]?d.indexOf(n[o]):-1,f=u<0?d:[d.slice(0,u),dt("u",d.slice(u,u+1)),d.slice(u+1)],h=r.markClass?" "+r.markClass:"";return dt("button",{type:"button",class:"cm-diagnosticAction"+h,onclick:a,onmousedown:a,"aria-label":` Action: ${d}${u<0?"":` (access key "${n[o]})"`}.`},f)}),e.source&&dt("div",{class:"cm-diagnosticSource"},e.source))}class yV extends cn{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return dt("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class dm{constructor(e,s){this.diagnostic=s,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=Wv(e,s,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Lo{constructor(e){this.view=e,this.items=[];let s=n=>{if(n.keyCode==27)am(this.view),this.view.focus();else if(n.keyCode==38||n.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(n.keyCode==40||n.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(n.keyCode==36)this.moveSelection(0);else if(n.keyCode==35)this.moveSelection(this.items.length-1);else if(n.keyCode==13)this.view.focus();else if(n.keyCode>=65&&n.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:r}=this.items[this.selectedIndex],o=Hv(r.actions);for(let l=0;l<o.length;l++)if(o[l].toUpperCase().charCodeAt(0)==n.keyCode){let a=wr(this.view.state.field(As).diagnostics,r);a&&r.actions[l].apply(e,a.from,a.to)}}else return;n.preventDefault()},i=n=>{for(let r=0;r<this.items.length;r++)this.items[r].dom.contains(n.target)&&this.moveSelection(r)};this.list=dt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:s,onclick:i}),this.dom=dt("div",{class:"cm-panel-lint"},this.list,dt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>am(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(As).selected;if(!e)return-1;for(let s=0;s<this.items.length;s++)if(this.items[s].diagnostic==e.diagnostic)return s;return-1}update(){let{diagnostics:e,selected:s}=this.view.state.field(As),i=0,n=!1,r=null,o=new Set;for(e.between(0,this.view.state.doc.length,(l,a,{spec:d})=>{for(let u of d.diagnostics){if(o.has(u))continue;o.add(u);let f=-1,h;for(let m=i;m<this.items.length;m++)if(this.items[m].diagnostic==u){f=m;break}f<0?(h=new dm(this.view,u),this.items.splice(i,0,h),n=!0):(h=this.items[f],f>i&&(this.items.splice(i,f-i),n=!0)),s&&h.diagnostic==s.diagnostic?h.dom.hasAttribute("aria-selected")||(h.dom.setAttribute("aria-selected","true"),r=h):h.dom.hasAttribute("aria-selected")&&h.dom.removeAttribute("aria-selected"),i++}});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)n=!0,this.items.pop();this.items.length==0&&(this.items.push(new dm(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),n=!0),r?(this.list.setAttribute("aria-activedescendant",r.id),this.view.requestMeasure({key:this,read:()=>({sel:r.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:l,panel:a})=>{let d=a.height/this.list.offsetHeight;l.top<a.top?this.list.scrollTop-=(a.top-l.top)/d:l.bottom>a.bottom&&(this.list.scrollTop+=(l.bottom-a.bottom)/d)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),n&&this.sync()}sync(){let e=this.list.firstChild;function s(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)s();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)s()}moveSelection(e){if(this.selectedIndex<0)return;let s=this.view.state.field(As),i=wr(s.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:Fv.of(i)})}static open(e){return new Lo(e)}}function vV(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function Al(t){return vV(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const bV=Me.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Al("#d11")},".cm-lintRange-warning":{backgroundImage:Al("orange")},".cm-lintRange-info":{backgroundImage:Al("#999")},".cm-lintRange-hint":{backgroundImage:Al("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function xV(t){return t=="error"?4:t=="warning"?3:t=="info"?2:1}function kV(t){let e="hint",s=1;for(let i of t){let n=xV(i.severity);n>s&&(s=n,e=i.severity)}return e}const wV=[As,Me.decorations.compute([As],t=>{let{selected:e,panel:s}=t.field(As);return!e||!s||e.from==e.to?Ie.none:Ie.set([cV.range(e.from,e.to)])}),a5(fV,{hideOn:uV}),bV],SV=[b5(),w5(),I_(),H3(),h3(),M_(),P_(),Ze.allowMultipleSelections.of(!0),Z5(),jy(y3,{fallback:!0}),C3(),Y8(),lV(),X_(),e5(),W_(),e8(),Ic.of([...eV,...KA,...b8,...Z3,...u3,...Nv,...gV])],CV={class:"rounded-lg border border-gray-300 overflow-hidden dark:border-gray-600"},er={__name:"CodeEditor",props:{modelValue:{type:String,default:""},language:{type:String,default:"r",validator:t=>["r","markdown","text"].includes(t)},minHeight:{type:String,default:"400px"},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:""}},emits:["update:modelValue"],setup(t,{emit:e}){const s=t,i=e,n=he(null);let r=null;const o=Jc.define({token(d){return d.sol()&&d.match(/^#/)?(d.skipToEnd(),"comment"):(d.skipToEnd(),null)}}),l=jy(qo.define([{tag:Se.comment,color:"#16a34a"}])),a=()=>[o,l];return es(()=>{if(!n.value)return;const d=Me.updateListener.of(h=>{h.docChanged&&i("update:modelValue",h.state.doc.toString())}),u=[SV,a(),d,Me.theme({"&":{minHeight:s.minHeight,fontSize:"13px",fontFamily:'ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, "Liberation Mono", monospace'},".cm-scroller":{fontFamily:'ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, "Liberation Mono", monospace'},".cm-content":{padding:"12px 0"},".cm-line":{padding:"0 12px"}})],f=Ze.create({doc:s.modelValue||"",extensions:u});r=new Me({state:f,parent:n.value})}),Ye(()=>s.modelValue,d=>{r&&d!==r.state.doc.toString()&&r.dispatch({changes:{from:0,to:r.state.doc.length,insert:d}})}),(d,u)=>(y(),x("div",CV,[c("div",{ref_key:"editorRef",ref:n},null,512)]))}},_V={class:"flex min-h-screen"},AV={class:"w-64 shrink-0 border-r border-gray-200 p-6 dark:border-gray-800"},VV={class:"space-y-1 mb-6"},MV=["onClick"],DV={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},TV={class:"flex-1 p-10"},EV={class:"mt-8 space-y-6"},$V={class:"space-y-6"},PV={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},OV={class:"space-y-6"},RV={class:"font-medium"},jV={class:"text-xs text-gray-600 dark:text-gray-400"},LV={class:"font-medium"},BV={class:"text-xs text-gray-600 dark:text-gray-400"},IV={class:"font-medium"},UV={class:"text-xs text-gray-600 dark:text-gray-400"},NV={class:"font-medium"},zV={class:"text-xs text-gray-600 dark:text-gray-400"},FV={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},HV={class:"space-y-3"},WV={class:"flex items-center justify-between"},qV={class:"flex-1"},GV={class:"text-sm text-gray-900 dark:text-white"},KV={key:0},JV={key:1,class:"text-gray-400 dark:text-gray-500 mx-1"},YV={key:2},XV={key:3,class:"text-gray-400 dark:text-gray-500 mx-1"},QV={key:4},ZV={class:"flex items-center justify-between"},e6={class:"flex-1"},t6={class:"text-sm text-gray-900 dark:text-white"},s6={class:"text-gray-600 dark:text-gray-400"},i6={class:"text-gray-600 dark:text-gray-400"},n6={class:"text-gray-600 dark:text-gray-400"},r6={class:"flex items-center justify-between"},o6={class:"flex-1"},l6={class:"text-sm text-gray-900 dark:text-white"},a6={class:"text-gray-600 dark:text-gray-400"},u6={class:"text-gray-600 dark:text-gray-400"},d6={class:"text-gray-600 dark:text-gray-400"},c6={class:"text-gray-600 dark:text-gray-400"},f6={class:"flex items-center justify-between"},h6={class:"flex-1"},p6={class:"text-sm text-gray-900 dark:text-white"},m6={class:"font-medium"},g6={key:0,class:"text-gray-400 dark:text-gray-500 mx-1"},y6={key:1},v6={class:"flex items-center justify-between"},b6={class:"flex-1"},x6={class:"text-sm text-gray-900 dark:text-white"},k6={class:"text-gray-600 dark:text-gray-400"},w6={class:"flex items-center justify-between"},S6={class:"flex-1"},C6={class:"text-sm text-gray-900 dark:text-white"},_6={class:"font-medium"},A6={class:"text-gray-600 dark:text-gray-400"},V6={class:"text-gray-600 dark:text-gray-400"},M6={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},D6={class:"space-y-4"},T6={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},E6={class:"space-y-5"},$6={class:"space-y-6"},P6={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},O6={key:0,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},R6={key:1,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},j6={class:"space-y-3"},L6={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},B6={class:"grid grid-cols-2 gap-3"},I6={key:2,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},U6={class:"space-y-3"},N6={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},z6={class:"grid grid-cols-2 gap-3"},F6={key:3,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},H6={class:"space-y-3"},W6={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},q6={class:"grid grid-cols-2 gap-3"},G6={key:4,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},K6={class:"space-y-3"},J6={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},Y6={class:"grid grid-cols-2 gap-3"},X6={key:5,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},Q6={class:"space-y-3"},Z6={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},eM={class:"grid grid-cols-2 gap-3"},tM={key:6,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},sM={class:"space-y-3"},iM={key:7,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},nM={class:"space-y-3"},rM={key:8,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},oM={class:"space-y-3"},lM={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},aM={class:"grid grid-cols-2 gap-3"},uM={key:9,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},dM={class:"space-y-3"},cM={class:"flex items-start gap-3 mb-2"},fM={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},hM={class:"grid grid-cols-2 gap-3"},pM={key:10,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},mM={class:"space-y-4"},gM={class:"grid gap-4 sm:grid-cols-2"},yM={class:"p-3 rounded-md"},vM={class:"p-3 rounded-md"},bM={class:"grid gap-4 sm:grid-cols-2"},xM={class:"space-y-3"},kM={class:"space-y-3"},wM={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},SM={class:"grid gap-6 sm:grid-cols-2"},CM={class:"space-y-2"},_M={class:"space-y-2"},AM={key:11,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},VM={class:"space-y-4"},MM={class:"grid gap-4 sm:grid-cols-2"},DM={class:"p-3 rounded-md"},TM={class:"p-3 rounded-md"},EM={class:"grid gap-4 sm:grid-cols-2"},$M={class:"space-y-3"},PM={class:"space-y-3"},OM={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},RM={class:"grid gap-6 sm:grid-cols-2"},jM={class:"space-y-2"},LM={class:"space-y-2"},BM={key:12,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},IM={class:"space-y-3"},UM={class:"flex items-start gap-3 mb-2"},NM={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},zM={class:"space-y-5"},FM={class:"pt-4 border-t border-gray-200 dark:border-gray-700"},HM={class:"space-y-3"},WM={class:"flex items-start gap-3"},qM={class:"flex-1 space-y-3"},GM=["onClick"],KM={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},JM={class:"space-y-5"},YM={key:0,class:"pt-4 border-t border-gray-200 dark:border-gray-700"},XM={class:"space-y-3"},QM={key:0,class:"mt-5 pt-5 border-t border-gray-200 dark:border-gray-700"},ZM={class:"rounded-md bg-sky-50 p-4 dark:bg-sky-900/20"},eD={class:"flex"},tD={class:"ml-3"},sD={class:"mt-2 text-sm text-sky-700 dark:text-sky-300"},iD={class:"list-disc list-inside space-y-1"},nD={key:0},rD={key:1},oD={key:2},lD={key:3},aD={class:"mt-5 pt-5 border-t border-gray-200 dark:border-gray-700"},uD={class:"flex items-center justify-between mb-3"},dD={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},cD={class:"space-y-5"},fD={key:0,class:"pt-4 border-t border-gray-200 dark:border-gray-700 space-y-5"},hD={class:"flex items-center justify-between mb-3"},pD={class:"text-sm text-gray-600 dark:text-gray-400 mb-3"},mD={class:"space-y-3"},gD={__name:"NewProjectView",setup(t){const e=Pa(),s=_r(),i=Oa(),n=he(null),r=he(null),o=he(!0),l=[{id:"overview",label:"Basics"},{id:"author",label:"Author & Metadata"},{id:"structure",label:"Project Structure"},{id:"packages",label:"Packages & Dependencies"},{id:"ai",label:"AI Assistants"},{id:"git",label:"Git & Hooks"},{id:"scaffold",label:"Scaffold Behavior"}],a=he("overview"),d=he(!1),u=he({name:"",location:"",type:"project",author:{name:"",email:"",affiliation:""},scaffold:{seed_on_scaffold:!1,seed:"",set_theme_on_scaffold:!0,ggplot_theme:"theme_minimal",source_all_functions:!0,notebook_format:"quarto",ide:"vscode"},packages:{use_renv:!1,default_packages:[]},ai:{enabled:!0,assistants:[],canonical_file:"CLAUDE.md",canonical_content:""},git:{initialize:!0,gitignore_template:"gitignore-project",gitignore_content:"",hooks:{ai_sync:!1,data_security:!1}},directories_enabled:{},directories:{},extra_directories:[],extra_directories_enabled:{}}),f=()=>{const H=s.query.section;H&&["overview","author","scaffold","structure","packages","ai","git"].includes(H)&&(a.value=H)};Ye(()=>s.query.section,H=>{H&&["overview","author","scaffold","structure","packages","ai","git"].includes(H)?a.value=H:H||(a.value="overview")}),Ye(a,H=>{s.query.section!==H&&e.replace({query:{...s.query,section:H}})}),es(async()=>{console.log("[DEBUG] NewProjectView mounted - starting initialization"),f();try{console.log("[DEBUG] Fetching global settings from /api/settings");const H=await fetch("/api/settings");if(console.log("[DEBUG] Settings response status:",H.status,H.ok),H.ok&&(n.value=await H.json(),n.value)){if(u.value.author={...n.value.author},n.value.defaults?.project_type&&(u.value.type=n.value.defaults.project_type),n.value.defaults?.scaffold&&(u.value.scaffold={...n.value.defaults.scaffold}),console.log("[DEBUG] Global settings loaded:",n.value),console.log("[DEBUG] Defaults object:",n.value.defaults),console.log("[DEBUG] Packages data:",n.value.defaults?.packages),console.log("[DEBUG] Is array?",Array.isArray(n.value.defaults?.packages)),n.value.defaults?.packages)if(Array.isArray(n.value.defaults.packages)){console.log("[DEBUG] Loading packages from flat array format");const p=n.value.defaults.packages.map(D=>({name:D.name||"",source:D.source||"cran",auto_attach:D.auto_attach!==!1}));console.log("[DEBUG] Mapped packages:",p),u.value.packages.default_packages.splice(0,u.value.packages.default_packages.length,...p),console.log("[DEBUG] Final project.packages:",u.value.packages)}else n.value.defaults.packages.default_packages?(console.log("[DEBUG] Loading packages from nested object format"),u.value.packages={use_renv:n.value.defaults.packages.use_renv||!1,default_packages:(n.value.defaults.packages.default_packages||[]).map(p=>({name:p.name||"",source:p.source||"cran",auto_attach:p.auto_attach!==!1}))},console.log("[DEBUG] Final project.packages:",u.value.packages)):console.log("[DEBUG] Packages exists but is not array or nested object:",typeof n.value.defaults.packages);else console.log("[DEBUG] No packages found in defaults");n.value.defaults?.ai&&(u.value.ai={enabled:n.value.defaults.ai.enabled!==!1,assistants:[...n.value.defaults.ai.assistants||[]],canonical_file:n.value.defaults.ai.canonical_file||"CLAUDE.md",canonical_content:""}),u.value.ai.enabled&&u.value.ai.canonical_file&&N(u.value.ai.canonical_file,u.value.type),n.value.defaults?.git&&(u.value.git={...n.value.defaults.git})}const g=await fetch("/api/settings-catalog");g.ok&&(r.value=await g.json()),h()}catch(H){console.error("[DEBUG] Failed to load settings:",H),console.error("[DEBUG] Error details:",H.message,H.stack),i.error("Load Error","Could not load default settings")}finally{console.log("[DEBUG] Initialization complete, loading =",o.value),o.value=!1}}),Ye(()=>u.value.type,()=>{h()}),Ye(()=>u.value.packages.default_packages,(H,g)=>{console.log("[DEBUG PACKAGES WATCH] Packages changed!"),console.log("[DEBUG PACKAGES WATCH] Old:",g),console.log("[DEBUG PACKAGES WATCH] New:",H),console.trace("[DEBUG PACKAGES WATCH] Stack trace:")},{deep:!0}),Ye(()=>u.value.git.gitignore_template,H=>{H&&T(H)}),Ye(()=>u.value.ai.enabled,H=>{H&&u.value.ai.canonical_file&&N(u.value.ai.canonical_file,u.value.type)}),Ye(()=>u.value.ai.canonical_file,H=>{H&&u.value.ai.enabled&&N(H,u.value.type)}),Ye(()=>u.value.type,H=>{u.value.ai.canonical_file==="CLAUDE.md"&&u.value.ai.enabled&&N("CLAUDE.md",H)});const h=()=>{if(console.log("[DEBUG] loadProjectTypeDefaults() called - current packages:",u.value.packages.default_packages),!r.value?.project_types)return;const H=r.value.project_types[u.value.type];if(!H?.directories)return;const g=n.value?.project_types?.[u.value.type];if(!u.value.git.gitignore_template||u.value.git.gitignore_template==="gitignore-project"){const p={project:"gitignore-project",project_sensitive:"gitignore-sensitive",course:"gitignore-course",presentation:"gitignore-presentation"};u.value.git.gitignore_template=p[u.value.type]||"gitignore-project"}T(u.value.git.gitignore_template),u.value.directories_enabled=Object.entries(H.directories).reduce((p,[D,Y])=>(p[D]=Y.enabled_by_default!==!1,p),{}),u.value.directories=Object.entries(H.directories).reduce((p,[D,Y])=>(p[D]=g?.directories?.[D]||Y.default||"",p),{}),g?.extra_directories&&Array.isArray(g.extra_directories)?(u.value.extra_directories=g.extra_directories.map(p=>({...p,_source:"global"})),u.value.extra_directories_enabled=g.extra_directories.reduce((p,D)=>(D.key&&(p[D.key]=!0),p),{})):(u.value.extra_directories=[],u.value.extra_directories_enabled={}),console.log("[DEBUG] loadProjectTypeDefaults() finished - packages still:",u.value.packages.default_packages)},m=H=>r.value?.project_types?.[H]?.label||H,w=H=>r.value?.project_types?.[H]?.description||"",S=le(()=>({overview:"Set your project name, location, and type. Customize defaults below or skip to create.",author:"Configure author information embedded in project templates.",scaffold:"Runtime settings that control what happens when scaffold() runs.",structure:"Customize which directories to create for this project type.",packages:"Configure package management and default packages.",ai:"Configure AI assistant integration for this project.",git:"Configure version control and git hooks."})[a.value]||"");le(()=>({vscode:"Positron / VS Code",rstudio:"RStudio","rstudio,vscode":"Both",none:"Other"})[u.value.scaffold.ide]||u.value.scaffold.ide);const _=H=>{const g={cran:"e.g., dplyr or dplyr@1.1.0",github:"e.g., user/repo or user/repo@branch",bioc:"e.g., DESeq2"};return g[H]||g.cran},M=H=>{const g={cran:"CRAN: name only (e.g., dplyr) or with version (dplyr@1.1.0)",github:"GitHub: user/repo format (e.g., tidyverse/dplyr or tidyverse/dplyr@main)",bioc:"Bioconductor: name only (e.g., DESeq2)"};return g[H]||g.cran},L=(H,g)=>{g?u.value.ai.assistants.includes(H)||u.value.ai.assistants.push(H):u.value.ai.assistants=u.value.ai.assistants.filter(p=>p!==H)},$=H=>({"gitignore-project":"Research Project","gitignore-sensitive":"Sensitive Data Project","gitignore-course":"Course/Teaching","gitignore-presentation":"Presentation"})[H]||H,T=async H=>{try{const g=await fetch(`/api/templates/${H}`);if(g.ok){const p=await g.json();p.success&&p.contents&&(u.value.git.gitignore_content=p.contents)}}catch(g){console.error("Failed to load gitignore template:",g)}},N=async(H,g)=>{try{let p;if(H==="CLAUDE.md")switch(g){case"project_sensitive":p="ai_claude_sensitive";break;case"course":p="ai_claude_course";break;case"presentation":p="ai_claude_presentation";break;default:p="ai_claude_project"}else if(H==="AGENTS.md")p="ai_agents";else if(H===".github/copilot-instructions.md")p="ai_copilot";else if(H===".cursorrules"){u.value.ai.canonical_content="";return}const D=await fetch(`/api/templates/${p}`);if(D.ok){const Y=await D.json();Y.success&&Y.contents&&(u.value.ai.canonical_content=Y.contents)}}catch(p){console.error("Failed to load AI template:",p)}},B=le(()=>r.value?.project_types?r.value.project_types[u.value.type]?.directories||{}:{});le(()=>Object.values(u.value.directories_enabled).filter(H=>H).length);const I=H=>Object.keys(u.value.directories_enabled).filter(p=>u.value.directories_enabled[p]?H==="workspace"?p==="notebooks"||p==="scripts"||p==="functions":H==="input"?p.startsWith("inputs_"):H==="output"?p.startsWith("outputs_"):H==="temporary"?p==="cache"||p==="scratch":!1:!1).length,Z=H=>Array.isArray(u.value.extra_directories)?u.value.extra_directories.filter(g=>g.type===H&&g._source==="global"):[],ee=H=>Array.isArray(u.value.extra_directories)?u.value.extra_directories.filter(g=>g.type===H&&g._source!=="global"):[],fe=(H,g)=>{Array.isArray(u.value.extra_directories)||(u.value.extra_directories=[]);const p=u.value.extra_directories.filter(Y=>Y._source==="global"||Y.type!==H&&Y._source!=="global"),D=g.map(Y=>({...Y,type:H,_source:"project"}));u.value.extra_directories=[...p,...D],D.forEach(Y=>{Y.key&&!u.value.extra_directories_enabled[Y.key]&&(u.value.extra_directories_enabled[Y.key]=!0)})},X=H=>{e.push({query:{...s.query,section:H}})},z=()=>{if(!u.value.name||!u.value.name.trim())return;const H=n.value?.global?.projects_root||"";if(!H)return;const g=u.value.location.trim();if(g&&!g.startsWith(H))return;const p=u.value.name.toLowerCase().trim().replace(/[\s_]+/g,"-").replace(/[^a-z0-9-]/g,"").replace(/-+/g,"-").replace(/^-|-$/g,"");u.value.location=`${H}/${p}`},ae=async()=>{if(!u.value.name||!u.value.name.trim()){i.error("Validation Error","Project name is required"),X("overview");return}if(!u.value.location||!u.value.location.trim()){i.error("Validation Error","Project location is required"),X("overview");return}try{d.value=!0;const H=r.value?.project_types?.[u.value.type],g={};H?.directories&&Object.entries(H.directories).forEach(([A,be])=>{u.value.directories_enabled[A]&&(g[A]=be.default)});const p={name:u.value.name,location:u.value.location,type:u.value.type,author:u.value.author,scaffold:u.value.scaffold,packages:u.value.packages,ai:u.value.ai,git:u.value.git,directories:g},D=await fetch("/api/projects/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)});if(!D.ok){const A=await D.json();throw new Error(A.message||"Failed to create project")}const Y=await D.json();i.success("Project Created",`${u.value.name} has been created successfully`),e.push("/projects")}catch(H){console.error("Failed to create project:",H),i.error("Creation Failed",H.message||"Could not create the project")}finally{d.value=!1}},oe=H=>{(H.metaKey||H.ctrlKey)&&H.key==="s"&&(H.preventDefault(),ae())};return es(()=>{window.addEventListener("keydown",oe)}),Cr(()=>{window.removeEventListener("keydown",oe)}),(H,g)=>(y(),x("div",_V,[c("nav",AV,[g[53]||(g[53]=c("h2",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"New Project",-1)),c("div",VV,[(y(),x(J,null,ve(l,p=>c("a",{key:p.id,href:"#",onClick:ht(D=>a.value=p.id,["prevent"]),class:Ve(["block px-3 py-2 rounded-md text-sm transition",a.value===p.id?"bg-sky-50 text-sky-700 font-medium dark:bg-sky-900/20 dark:text-sky-400":"text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-800"])},F(p.label),11,MV)),64))]),c("div",DV,[k($e,{variant:"primary",size:"md",class:"w-full",disabled:d.value,onClick:ae},{default:R(()=>[ie(F(d.value?"Creating...":"Create Project"),1)]),_:1},8,["disabled"])])]),c("div",TV,[k(Ar,{title:"New Project",description:S.value},null,8,["description"]),c("div",EV,[He(c("div",$V,[c("div",PV,[g[58]||(g[58]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"}," Project Essentials ",-1)),c("div",OV,[k(q,{modelValue:u.value.name,"onUpdate:modelValue":g[0]||(g[0]=p=>u.value.name=p),label:"Project Name",placeholder:"My Analysis Project",hint:"Used for the project directory name and title",onBlur:z},null,8,["modelValue"]),k(q,{modelValue:u.value.location,"onUpdate:modelValue":g[1]||(g[1]=p=>u.value.location=p),label:"Project Location",placeholder:n.value?.global?.projects_root||"~/projects",hint:"Parent directory where the project folder will be created",monospace:""},null,8,["modelValue","placeholder"]),k(gu,{legend:"Project Type"},{default:R(()=>[k(ii,{modelValue:u.value.type,"onUpdate:modelValue":g[2]||(g[2]=p=>u.value.type=p),value:"project",id:"overview-type-project",name:"overview_project_type"},{default:R(()=>[c("div",null,[c("div",RV,F(m("project")),1),c("div",jV,F(w("project")),1)])]),_:1},8,["modelValue"]),k(ii,{modelValue:u.value.type,"onUpdate:modelValue":g[3]||(g[3]=p=>u.value.type=p),value:"project_sensitive",id:"overview-type-sensitive",name:"overview_project_type"},{default:R(()=>[c("div",null,[c("div",LV,F(m("project_sensitive")),1),c("div",BV,F(w("project_sensitive")),1)])]),_:1},8,["modelValue"]),k(ii,{modelValue:u.value.type,"onUpdate:modelValue":g[4]||(g[4]=p=>u.value.type=p),value:"presentation",id:"overview-type-presentation",name:"overview_project_type"},{default:R(()=>[c("div",null,[c("div",IV,F(m("presentation")),1),c("div",UV,F(w("presentation")),1)])]),_:1},8,["modelValue"]),k(ii,{modelValue:u.value.type,"onUpdate:modelValue":g[5]||(g[5]=p=>u.value.type=p),value:"course",id:"overview-type-course",name:"overview_project_type"},{default:R(()=>[c("div",null,[c("div",NV,F(m("course")),1),c("div",zV,F(w("course")),1)])]),_:1},8,["modelValue"])]),_:1}),c("div",null,[g[56]||(g[56]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Notebook Format",-1)),k(gu,{legend:"",hideLegend:""},{default:R(()=>[k(ii,{modelValue:u.value.scaffold.notebook_format,"onUpdate:modelValue":g[6]||(g[6]=p=>u.value.scaffold.notebook_format=p),value:"quarto",id:"basics-format-quarto",name:"basics_notebook_format"},{default:R(()=>[...g[54]||(g[54]=[c("div",null,[c("div",{class:"font-medium"},"Quarto (.qmd)"),c("div",{class:"text-xs text-gray-600 dark:text-gray-400"},"Modern publishing system (recommended)")],-1)])]),_:1},8,["modelValue"]),k(ii,{modelValue:u.value.scaffold.notebook_format,"onUpdate:modelValue":g[7]||(g[7]=p=>u.value.scaffold.notebook_format=p),value:"rmarkdown",id:"basics-format-rmarkdown",name:"basics_notebook_format"},{default:R(()=>[...g[55]||(g[55]=[c("div",null,[c("div",{class:"font-medium"},"RMarkdown (.Rmd)"),c("div",{class:"text-xs text-gray-600 dark:text-gray-400"},"Classic R notebook format")],-1)])]),_:1},8,["modelValue"])]),_:1})]),c("div",null,[k(Cs,{modelValue:u.value.scaffold.ide,"onUpdate:modelValue":g[8]||(g[8]=p=>u.value.scaffold.ide=p),label:"Primary Editor"},{default:R(()=>[...g[57]||(g[57]=[c("option",{value:"vscode"},"Positron / VS Code",-1),c("option",{value:"rstudio"},"RStudio",-1),c("option",{value:"rstudio,vscode"},"Both",-1),c("option",{value:"none"},"Other",-1)])]),_:1},8,["modelValue"])])])]),c("div",FV,[g[83]||(g[83]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},[ie(" Optional Customization "),c("span",{class:"ml-2 text-xs font-normal text-gray-500 dark:text-gray-400"}," (using global defaults - click any card to customize) ")],-1)),c("div",HV,[c("button",{onClick:g[9]||(g[9]=p=>X("author")),class:"w-full text-left px-4 py-3 rounded-md bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 hover:border-sky-300 dark:hover:border-sky-700 transition"},[c("div",WV,[c("div",qV,[g[59]||(g[59]=c("div",{class:"text-xs text-gray-500 dark:text-gray-400 mb-1"},"Author & Metadata",-1)),c("div",GV,[u.value.author.name||u.value.author.email||u.value.author.affiliation?(y(),x(J,{key:0},[u.value.author.name?(y(),x("span",KV,F(u.value.author.name),1)):U("",!0),u.value.author.name&&u.value.author.email?(y(),x("span",JV,"")):U("",!0),u.value.author.email?(y(),x("span",YV,F(u.value.author.email),1)):U("",!0),(u.value.author.name||u.value.author.email)&&u.value.author.affiliation?(y(),x("span",XV,"")):U("",!0),u.value.author.affiliation?(y(),x("span",QV,F(u.value.author.affiliation),1)):U("",!0)],64)):(y(),x(J,{key:1},[ie(" Not set ")],64))])]),g[60]||(g[60]=c("svg",{class:"h-5 w-5 text-gray-400 shrink-0 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))])]),c("button",{onClick:g[10]||(g[10]=p=>X("scaffold")),class:"w-full text-left px-4 py-3 rounded-md bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 hover:border-sky-300 dark:hover:border-sky-700 transition"},[c("div",ZV,[c("div",e6,[g[65]||(g[65]=c("div",{class:"text-xs text-gray-500 dark:text-gray-400 mb-1"},"Scaffold Behavior",-1)),c("div",t6,[c("span",s6,[u.value.scaffold.source_all_functions?(y(),x(J,{key:0},[g[61]||(g[61]=ie(" Functions loaded from ",-1)),g[62]||(g[62]=c("code",{class:"text-xs bg-gray-100 dark:bg-gray-800 px-1 rounded"},"functions/",-1))],64)):(y(),x(J,{key:1},[ie(" Does not load functions ")],64))]),g[63]||(g[63]=c("span",{class:"text-gray-600 dark:text-gray-400 mx-2"},"",-1)),c("span",i6,[u.value.scaffold.set_theme_on_scaffold?(y(),x(J,{key:0},[ie(" ggplot2 theme: "+F((u.value.scaffold.ggplot_theme||"theme_minimal").replace("theme_","")),1)],64)):(y(),x(J,{key:1},[ie(" No ggplot theme ")],64))]),g[64]||(g[64]=c("span",{class:"text-gray-600 dark:text-gray-400 mx-2"},"",-1)),c("span",n6,F(u.value.scaffold.seed_on_scaffold?"Seed: "+(u.value.scaffold.seed||"default"):"No random seed"),1)])]),g[66]||(g[66]=c("svg",{class:"h-5 w-5 text-gray-400 shrink-0 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))])]),c("button",{onClick:g[11]||(g[11]=p=>X("structure")),class:"w-full text-left px-4 py-3 rounded-md bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 hover:border-sky-300 dark:hover:border-sky-700 transition"},[c("div",r6,[c("div",o6,[g[70]||(g[70]=c("div",{class:"text-xs text-gray-500 dark:text-gray-400 mb-1"},"Project Structure",-1)),c("div",l6,[c("span",a6,F(m(u.value.type)),1),g[68]||(g[68]=c("span",{class:"text-gray-600 dark:text-gray-400 mx-2"},"",-1)),c("span",u6,F(I("workspace"))+" workspace ",1),g[69]||(g[69]=c("span",{class:"text-gray-600 dark:text-gray-400 mx-2"},"",-1)),c("span",d6,F(I("input"))+" input ",1),I("output")>0?(y(),x(J,{key:0},[g[67]||(g[67]=c("span",{class:"text-gray-600 dark:text-gray-400 mx-2"},"",-1)),c("span",c6,F(I("output"))+" output ",1)],64)):U("",!0)])]),g[71]||(g[71]=c("svg",{class:"h-5 w-5 text-gray-400 shrink-0 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))])]),c("button",{onClick:g[12]||(g[12]=p=>X("packages")),class:"w-full text-left px-4 py-3 rounded-md bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 hover:border-sky-300 dark:hover:border-sky-700 transition"},[c("div",f6,[c("div",h6,[g[73]||(g[73]=c("div",{class:"text-xs text-gray-500 dark:text-gray-400 mb-1"},"Packages & Dependencies",-1)),c("div",p6,[g[72]||(g[72]=ie(" renv: ",-1)),c("span",m6,F(u.value.packages.use_renv?"Enabled":"Disabled"),1),u.value.packages.default_packages&&u.value.packages.default_packages.length>0?(y(),x("span",g6,"")):U("",!0),u.value.packages.default_packages&&u.value.packages.default_packages.length>0?(y(),x("span",y6,F(u.value.packages.default_packages.length)+" package"+F(u.value.packages.default_packages.length!==1?"s":""),1)):U("",!0)])]),g[74]||(g[74]=c("svg",{class:"h-5 w-5 text-gray-400 shrink-0 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))])]),c("button",{onClick:g[13]||(g[13]=p=>X("ai")),class:"w-full text-left px-4 py-3 rounded-md bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 hover:border-sky-300 dark:hover:border-sky-700 transition"},[c("div",v6,[c("div",b6,[g[76]||(g[76]=c("div",{class:"text-xs text-gray-500 dark:text-gray-400 mb-1"},"AI Assistants",-1)),c("div",x6,[u.value.ai.enabled&&u.value.ai.assistants.length>0?(y(),x(J,{key:0},[ie(F(u.value.ai.assistants.map(p=>p.charAt(0).toUpperCase()+p.slice(1)).join(", "))+" ",1),g[75]||(g[75]=c("span",{class:"text-gray-400 dark:text-gray-500 mx-1"},"",-1)),c("span",k6,F(u.value.ai.canonical_file),1)],64)):u.value.ai.enabled?(y(),x(J,{key:1},[ie(" Enabled (no assistants selected) ")],64)):(y(),x(J,{key:2},[ie(" Disabled ")],64))])]),g[77]||(g[77]=c("svg",{class:"h-5 w-5 text-gray-400 shrink-0 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))])]),c("button",{onClick:g[14]||(g[14]=p=>X("git")),class:"w-full text-left px-4 py-3 rounded-md bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 hover:border-sky-300 dark:hover:border-sky-700 transition"},[c("div",w6,[c("div",S6,[g[81]||(g[81]=c("div",{class:"text-xs text-gray-500 dark:text-gray-400 mb-1"},"Git & Hooks",-1)),c("div",C6,[g[80]||(g[80]=ie(" Git: ",-1)),c("span",_6,F(u.value.git.initialize?"Yes":"No"),1),u.value.git.initialize?(y(),x(J,{key:0},[g[79]||(g[79]=c("span",{class:"text-gray-400 dark:text-gray-500 mx-1"},"",-1)),c("span",A6,F($(u.value.git.gitignore_template)),1),u.value.git.hooks.ai_sync||u.value.git.hooks.data_security?(y(),x(J,{key:0},[g[78]||(g[78]=c("span",{class:"text-gray-400 dark:text-gray-500 mx-1"},"",-1)),c("span",V6,F(u.value.git.hooks.ai_sync&&u.value.git.hooks.data_security?"2 hooks":"1 hook"),1)],64)):U("",!0)],64)):U("",!0)])]),g[82]||(g[82]=c("svg",{class:"h-5 w-5 text-gray-400 shrink-0 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))])])])])],512),[[gt,a.value==="overview"]]),He(c("div",null,[c("div",M6,[g[84]||(g[84]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"}," Author & Metadata ",-1)),g[85]||(g[85]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Author information is embedded in project templates and documentation. ",-1)),c("div",D6,[k(q,{modelValue:u.value.author.name,"onUpdate:modelValue":g[15]||(g[15]=p=>u.value.author.name=p),label:"Your Name",placeholder:"Your Name"},null,8,["modelValue"]),k(q,{modelValue:u.value.author.email,"onUpdate:modelValue":g[16]||(g[16]=p=>u.value.author.email=p),type:"email",label:"Email",placeholder:"your.email@example.com"},null,8,["modelValue"]),k(q,{modelValue:u.value.author.affiliation,"onUpdate:modelValue":g[17]||(g[17]=p=>u.value.author.affiliation=p),label:"Affiliation",placeholder:"Organization"},null,8,["modelValue"])])])],512),[[gt,a.value==="author"]]),He(c("div",null,[c("div",T6,[g[90]||(g[90]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"}," Scaffold Behavior ",-1)),g[91]||(g[91]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"},[ie(" Automatic actions when "),c("code",{class:"px-1.5 py-0.5 bg-gray-200 dark:bg-gray-700 rounded text-xs"},"scaffold()"),ie(" runs to initialize your project environment. ")],-1)),c("div",E6,[c("div",null,[g[86]||(g[86]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Auto-Load Functions",-1)),k(Be,{modelValue:u.value.scaffold.source_all_functions,"onUpdate:modelValue":g[18]||(g[18]=p=>u.value.scaffold.source_all_functions=p),label:"Source all R files from functions/ directory",description:"Automatically loads all helper functions when scaffold() runs"},null,8,["modelValue"])]),c("div",null,[g[88]||(g[88]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"ggplot2 Theme",-1)),k(Be,{modelValue:u.value.scaffold.set_theme_on_scaffold,"onUpdate:modelValue":g[19]||(g[19]=p=>u.value.scaffold.set_theme_on_scaffold=p),label:"Set ggplot2 theme when scaffold() runs",description:"Automatically sets ggplot2 theme for consistent plot styling"},null,8,["modelValue"]),u.value.scaffold.set_theme_on_scaffold?(y(),me(Cs,{key:0,modelValue:u.value.scaffold.ggplot_theme,"onUpdate:modelValue":g[20]||(g[20]=p=>u.value.scaffold.ggplot_theme=p),label:"Theme",class:"mt-4"},{default:R(()=>[...g[87]||(g[87]=[c("option",{value:""},"None",-1),c("option",{value:"theme_minimal"},"Minimal",-1),c("option",{value:"theme_bw"},"Black & White",-1),c("option",{value:"theme_classic"},"Classic",-1),c("option",{value:"theme_gray"},"Gray (default)",-1),c("option",{value:"theme_light"},"Light",-1),c("option",{value:"theme_dark"},"Dark",-1),c("option",{value:"theme_void"},"Void",-1)])]),_:1},8,["modelValue"])):U("",!0)]),c("div",null,[g[89]||(g[89]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Random Seed",-1)),k(Be,{modelValue:u.value.scaffold.seed_on_scaffold,"onUpdate:modelValue":g[21]||(g[21]=p=>u.value.scaffold.seed_on_scaffold=p),label:"Set random seed when scaffold() runs",description:"Ensures deterministic behavior for reproducibility"},null,8,["modelValue"]),u.value.scaffold.seed_on_scaffold?(y(),me(q,{key:0,modelValue:u.value.scaffold.seed,"onUpdate:modelValue":g[22]||(g[22]=p=>u.value.scaffold.seed=p),label:"Seed Value",placeholder:"e.g., 1234 or 20241107",hint:"Leave empty to use global default",class:"mt-4"},null,8,["modelValue"])):U("",!0)])])])],512),[[gt,a.value==="scaffold"]]),He(c("div",$6,[c("div",P6,[k(gu,{legend:"Project Type",description:"Select a project type to customize the directory structure."},{default:R(()=>[k(ii,{modelValue:u.value.type,"onUpdate:modelValue":g[23]||(g[23]=p=>u.value.type=p),id:"type-project",name:"project-type",value:"project"},{default:R(()=>[...g[92]||(g[92]=[c("div",null,[c("div",{class:"font-medium text-sm"},"Research Project"),c("div",{class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5"}," Full-featured with organized data, work, and output directories ")],-1)])]),_:1},8,["modelValue"]),k(ii,{modelValue:u.value.type,"onUpdate:modelValue":g[24]||(g[24]=p=>u.value.type=p),id:"type-sensitive",name:"project-type",value:"project_sensitive"},{default:R(()=>[...g[93]||(g[93]=[c("div",null,[c("div",{class:"font-medium text-sm"},"Sensitive Data Project"),c("div",{class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5"}," Enhanced privacy controls with separate private/public flows ")],-1)])]),_:1},8,["modelValue"]),k(ii,{modelValue:u.value.type,"onUpdate:modelValue":g[25]||(g[25]=p=>u.value.type=p),id:"type-presentation",name:"project-type",value:"presentation"},{default:R(()=>[...g[94]||(g[94]=[c("div",null,[c("div",{class:"font-medium text-sm"},"Presentation"),c("div",{class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5"}," Minimal structure for slides and presentations ")],-1)])]),_:1},8,["modelValue"]),k(ii,{modelValue:u.value.type,"onUpdate:modelValue":g[26]||(g[26]=p=>u.value.type=p),id:"type-course",name:"project-type",value:"course"},{default:R(()=>[...g[95]||(g[95]=[c("div",null,[c("div",{class:"font-medium text-sm"},"Course/Teaching"),c("div",{class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5"}," Simplified structure for teaching materials ")],-1)])]),_:1},8,["modelValue"])]),_:1})]),u.value.type==="presentation"?(y(),x("div",O6,[g[96]||(g[96]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Presentation File",-1)),k(q,{modelValue:u.value.directories.presentation_source,"onUpdate:modelValue":g[27]||(g[27]=p=>u.value.directories.presentation_source=p),label:"Presentation source file",placeholder:"presentation.qmd",hint:"Main Quarto file for your slides"},null,8,["modelValue"])])):U("",!0),u.value.type==="project"?(y(),x("div",R6,[g[99]||(g[99]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Workspaces",-1)),g[100]||(g[100]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Functions, notebooks, and scripts scaffolded into every project.",-1)),c("div",j6,[(y(),x(J,null,ve(["functions","notebooks","scripts"],p=>c("div",{key:p},[k(Be,{id:`dir-${p}`,modelValue:u.value.directories_enabled[p],"onUpdate:modelValue":D=>u.value.directories_enabled[p]=D,label:B.value[p]?.label||p,description:B.value[p]?.hint,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),u.value.directories_enabled[p]?(y(),me(q,{key:0,modelValue:u.value.directories[p],"onUpdate:modelValue":D=>u.value.directories[p]=D,placeholder:B.value[p]?.default,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):U("",!0)])),64)),(y(!0),x(J,null,ve(Z("workspace"),p=>(y(),x("div",{key:`extra-${p.key}`},[k(Be,{id:`extra-dir-${p.key}`,modelValue:u.value.extra_directories_enabled[p.key],"onUpdate:modelValue":D=>u.value.extra_directories_enabled[p.key]=D,label:p.label,description:`Custom: ${p.path}`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),u.value.extra_directories_enabled[p.key]?(y(),me(q,{key:0,modelValue:p.path,"onUpdate:modelValue":D=>p.path=D,placeholder:p.path,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):U("",!0)]))),128))]),c("div",L6,[g[97]||(g[97]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Add Custom Workspace Directories",-1)),g[98]||(g[98]=c("p",{class:"text-xs text-gray-600 dark:text-gray-400 mb-3"},"Add directories specific to this project only.",-1)),k(Vt,{"model-value":ee("workspace"),"onUpdate:modelValue":g[28]||(g[28]=p=>fe("workspace",p)),"add-label":"Add Workspace Directory","default-item":()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:R(({item:p,index:D,update:Y})=>[c("div",B6,[k(q,{"model-value":p.key,"onUpdate:modelValue":A=>Y("key",A),label:"Key",placeholder:"e.g., tests",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(q,{"model-value":p.label,"onUpdate:modelValue":A=>Y("label",A),label:"Label",placeholder:"e.g., Tests",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(q,{"model-value":p.path,"onUpdate:modelValue":A=>Y("path",A),label:"Path",placeholder:"e.g., tests",prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])])):U("",!0),u.value.type==="project"?(y(),x("div",I6,[g[103]||(g[103]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Inputs",-1)),g[104]||(g[104]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Define the read-only locations where raw and prepared data live.",-1)),c("div",U6,[(y(),x(J,null,ve(["inputs_raw","inputs_intermediate","inputs_final","reference"],p=>c("div",{key:p},[k(Be,{id:`dir-${p}`,modelValue:u.value.directories_enabled[p],"onUpdate:modelValue":D=>u.value.directories_enabled[p]=D,label:B.value[p]?.label||p,description:B.value[p]?.hint,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),u.value.directories_enabled[p]?(y(),me(q,{key:0,modelValue:u.value.directories[p],"onUpdate:modelValue":D=>u.value.directories[p]=D,placeholder:B.value[p]?.default,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):U("",!0)])),64)),(y(!0),x(J,null,ve(Z("input"),p=>(y(),x("div",{key:`extra-${p.key}`},[k(Be,{id:`extra-dir-${p.key}`,modelValue:u.value.extra_directories_enabled[p.key],"onUpdate:modelValue":D=>u.value.extra_directories_enabled[p.key]=D,label:p.label,description:`Custom: ${p.path}`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),u.value.extra_directories_enabled[p.key]?(y(),me(q,{key:0,modelValue:p.path,"onUpdate:modelValue":D=>p.path=D,placeholder:p.path,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):U("",!0)]))),128))]),c("div",N6,[g[101]||(g[101]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Add Custom Input Directories",-1)),g[102]||(g[102]=c("p",{class:"text-xs text-gray-600 dark:text-gray-400 mb-3"},"Add directories specific to this project only.",-1)),k(Vt,{"model-value":ee("input"),"onUpdate:modelValue":g[29]||(g[29]=p=>fe("input",p)),"add-label":"Add Input Directory","default-item":()=>({key:"",label:"",path:"",type:"input",_id:Date.now()})},{default:R(({item:p,index:D,update:Y})=>[c("div",z6,[k(q,{"model-value":p.key,"onUpdate:modelValue":A=>Y("key",A),label:"Key",placeholder:"e.g., inputs_archive",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(q,{"model-value":p.label,"onUpdate:modelValue":A=>Y("label",A),label:"Label",placeholder:"e.g., Archive",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(q,{"model-value":p.path,"onUpdate:modelValue":A=>Y("path",A),label:"Path",placeholder:"e.g., inputs/archive",prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])])):U("",!0),u.value.type==="project"?(y(),x("div",F6,[g[106]||(g[106]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Outputs",-1)),g[107]||(g[107]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Outputs are public by default so results are easy to share.",-1)),c("div",H6,[(y(),x(J,null,ve(["outputs_notebooks","outputs_tables","outputs_figures","outputs_models","outputs_reports"],p=>c("div",{key:p},[k(Be,{id:`dir-${p}`,modelValue:u.value.directories_enabled[p],"onUpdate:modelValue":D=>u.value.directories_enabled[p]=D,label:B.value[p]?.label||p,description:B.value[p]?.hint,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),u.value.directories_enabled[p]?(y(),me(q,{key:0,modelValue:u.value.directories[p],"onUpdate:modelValue":D=>u.value.directories[p]=D,placeholder:B.value[p]?.default,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):U("",!0)])),64)),(y(!0),x(J,null,ve(Z("output"),p=>(y(),x("div",{key:`extra-${p.key}`},[k(Be,{id:`extra-${p.key}`,modelValue:u.value.extra_directories_enabled[p.key],"onUpdate:modelValue":D=>u.value.extra_directories_enabled[p.key]=D,label:p.label,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label"]),u.value.extra_directories_enabled[p.key]?(y(),me(q,{key:0,modelValue:p.path,"onUpdate:modelValue":D=>p.path=D,placeholder:p.path,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):U("",!0)]))),128))]),c("div",W6,[g[105]||(g[105]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Add Custom Output Directories",-1)),k(Vt,{"model-value":ee("output"),"onUpdate:modelValue":g[30]||(g[30]=p=>fe("output",p)),"add-label":"Add Output Directory","default-item":()=>({key:"",label:"",path:"",type:"output",_id:Date.now()})},{default:R(({item:p,index:D,update:Y})=>[c("div",q6,[k(q,{"model-value":p.key,"onUpdate:modelValue":A=>Y("key",A),label:"Key",placeholder:"e.g., outputs_animations",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(q,{"model-value":p.label,"onUpdate:modelValue":A=>Y("label",A),label:"Label",placeholder:"e.g., Animations",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(q,{"model-value":p.path,"onUpdate:modelValue":A=>Y("path",A),label:"Path",placeholder:"e.g., outputs/animations",prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])])):U("",!0),u.value.type==="project"?(y(),x("div",G6,[g[109]||(g[109]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Temporary",-1)),g[110]||(g[110]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Scratch space and cache (gitignored by default).",-1)),c("div",K6,[(y(),x(J,null,ve(["cache","scratch"],p=>c("div",{key:p},[k(Be,{id:`dir-${p}`,modelValue:u.value.directories_enabled[p],"onUpdate:modelValue":D=>u.value.directories_enabled[p]=D,label:B.value[p]?.label||p,description:B.value[p]?.hint,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),u.value.directories_enabled[p]?(y(),me(q,{key:0,modelValue:u.value.directories[p],"onUpdate:modelValue":D=>u.value.directories[p]=D,placeholder:B.value[p]?.default,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):U("",!0)])),64)),(y(!0),x(J,null,ve(Z("temporary"),p=>(y(),x("div",{key:`extra-${p.key}`},[k(Be,{id:`extra-${p.key}`,modelValue:u.value.extra_directories_enabled[p.key],"onUpdate:modelValue":D=>u.value.extra_directories_enabled[p.key]=D,label:p.label,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label"]),u.value.extra_directories_enabled[p.key]?(y(),me(q,{key:0,modelValue:p.path,"onUpdate:modelValue":D=>p.path=D,placeholder:p.path,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):U("",!0)]))),128))]),c("div",J6,[g[108]||(g[108]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Add Custom Temporary Directories",-1)),k(Vt,{"model-value":ee("temporary"),"onUpdate:modelValue":g[31]||(g[31]=p=>fe("temporary",p)),"add-label":"Add Temporary Directory","default-item":()=>({key:"",label:"",path:"",type:"temporary",_id:Date.now()})},{default:R(({item:p,index:D,update:Y})=>[c("div",Y6,[k(q,{"model-value":p.key,"onUpdate:modelValue":A=>Y("key",A),label:"Key",placeholder:"e.g., temp_downloads",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(q,{"model-value":p.label,"onUpdate:modelValue":A=>Y("label",A),label:"Label",placeholder:"e.g., Downloads",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(q,{"model-value":p.path,"onUpdate:modelValue":A=>Y("path",A),label:"Path",placeholder:"e.g., temp/downloads",prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])])):U("",!0),u.value.type==="course"?(y(),x("div",X6,[g[112]||(g[112]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Course Materials",-1)),g[113]||(g[113]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Slides, assignments, readings, and documentation.",-1)),c("div",Q6,[(y(),x(J,null,ve(["slides","assignments","readings","course_docs"],p=>c("div",{key:p},[k(Be,{id:`dir-${p}`,modelValue:u.value.directories_enabled[p],"onUpdate:modelValue":D=>u.value.directories_enabled[p]=D,label:B.value[p]?.label||p,description:B.value[p]?.hint,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),u.value.directories_enabled[p]?(y(),me(q,{key:0,modelValue:u.value.directories[p],"onUpdate:modelValue":D=>u.value.directories[p]=D,placeholder:B.value[p]?.default,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):U("",!0)])),64)),(y(!0),x(J,null,ve(Z("workspace"),p=>(y(),x("div",{key:`extra-${p.key}`},[k(Be,{id:`extra-dir-${p.key}`,modelValue:u.value.extra_directories_enabled[p.key],"onUpdate:modelValue":D=>u.value.extra_directories_enabled[p.key]=D,label:p.label,description:`Custom: ${p.path}`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),u.value.extra_directories_enabled[p.key]?(y(),me(q,{key:0,modelValue:p.path,"onUpdate:modelValue":D=>p.path=D,placeholder:p.path,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):U("",!0)]))),128))]),c("div",Z6,[g[111]||(g[111]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Add Custom Directories",-1)),k(Vt,{"model-value":ee("workspace"),"onUpdate:modelValue":g[32]||(g[32]=p=>fe("workspace",p)),"add-label":"Add Directory","default-item":()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:R(({item:p,index:D,update:Y})=>[c("div",eM,[k(q,{"model-value":p.key,"onUpdate:modelValue":A=>Y("key",A),label:"Key",placeholder:"e.g., exercises",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(q,{"model-value":p.label,"onUpdate:modelValue":A=>Y("label",A),label:"Label",placeholder:"e.g., Exercises",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(q,{"model-value":p.path,"onUpdate:modelValue":A=>Y("path",A),label:"Path",placeholder:"e.g., exercises",prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])])):U("",!0),u.value.type==="course"?(y(),x("div",tM,[g[114]||(g[114]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Workspaces",-1)),g[115]||(g[115]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Module notebooks, functions, and scripts.",-1)),c("div",sM,[(y(),x(J,null,ve(["notebooks","functions","scripts"],p=>c("div",{key:p},[k(Be,{id:`dir-${p}`,modelValue:u.value.directories_enabled[p],"onUpdate:modelValue":D=>u.value.directories_enabled[p]=D,label:B.value[p]?.label||p,description:B.value[p]?.hint,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),u.value.directories_enabled[p]?(y(),me(q,{key:0,modelValue:u.value.directories[p],"onUpdate:modelValue":D=>u.value.directories[p]=D,placeholder:B.value[p]?.default,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):U("",!0)])),64))])])):U("",!0),u.value.type==="course"?(y(),x("div",iM,[g[116]||(g[116]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Data & Storage",-1)),g[117]||(g[117]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Course datasets and temporary files.",-1)),c("div",nM,[(y(),x(J,null,ve(["data","inputs","outputs","cache"],p=>c("div",{key:p},[k(Be,{id:`dir-${p}`,modelValue:u.value.directories_enabled[p],"onUpdate:modelValue":D=>u.value.directories_enabled[p]=D,label:B.value[p]?.label||p,description:B.value[p]?.hint,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),u.value.directories_enabled[p]?(y(),me(q,{key:0,modelValue:u.value.directories[p],"onUpdate:modelValue":D=>u.value.directories[p]=D,placeholder:B.value[p]?.default,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):U("",!0)])),64))])])):U("",!0),u.value.type==="presentation"?(y(),x("div",rM,[g[119]||(g[119]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Optional Directories",-1)),g[120]||(g[120]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Add supporting directories for data, scripts, or helper functions.",-1)),c("div",oM,[(y(),x(J,null,ve(["data","scripts","functions"],p=>c("div",{key:p},[k(Be,{id:`dir-${p}`,modelValue:u.value.directories_enabled[p],"onUpdate:modelValue":D=>u.value.directories_enabled[p]=D,label:B.value[p]?.label||p,description:B.value[p]?.hint,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),u.value.directories_enabled[p]?(y(),me(q,{key:0,modelValue:u.value.directories[p],"onUpdate:modelValue":D=>u.value.directories[p]=D,placeholder:B.value[p]?.default,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):U("",!0)])),64)),(y(!0),x(J,null,ve(Z("workspace"),p=>(y(),x("div",{key:`extra-${p.key}`},[k(Be,{id:`extra-dir-${p.key}`,modelValue:u.value.extra_directories_enabled[p.key],"onUpdate:modelValue":D=>u.value.extra_directories_enabled[p.key]=D,label:p.label,description:`Custom: ${p.path}`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),u.value.extra_directories_enabled[p.key]?(y(),me(q,{key:0,modelValue:p.path,"onUpdate:modelValue":D=>p.path=D,placeholder:p.path,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):U("",!0)]))),128))]),c("div",lM,[g[118]||(g[118]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Add Custom Directories",-1)),k(Vt,{"model-value":ee("workspace"),"onUpdate:modelValue":g[33]||(g[33]=p=>fe("workspace",p)),"add-label":"Add Directory","default-item":()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:R(({item:p,index:D,update:Y})=>[c("div",aM,[k(q,{"model-value":p.key,"onUpdate:modelValue":A=>Y("key",A),label:"Key",placeholder:"e.g., assets",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(q,{"model-value":p.label,"onUpdate:modelValue":A=>Y("label",A),label:"Label",placeholder:"e.g., Assets",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(q,{"model-value":p.path,"onUpdate:modelValue":A=>Y("path",A),label:"Path",placeholder:"e.g., assets",prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])])):U("",!0),u.value.type==="project_sensitive"?(y(),x("div",uM,[g[122]||(g[122]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Work Directories",-1)),g[123]||(g[123]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Module locations for notebooks, scripts, and helper functions.",-1)),c("div",dM,[(y(),x(J,null,ve(["functions","notebooks","scripts"],p=>c("div",{key:p},[c("div",cM,[k(Be,{id:`dir-${p}`,modelValue:u.value.directories_enabled[p],"onUpdate:modelValue":D=>u.value.directories_enabled[p]=D,label:B.value[p]?.label||p,description:B.value[p]?.hint,class:"flex-1"},null,8,["id","modelValue","onUpdate:modelValue","label","description"])]),u.value.directories_enabled[p]?(y(),me(q,{key:0,modelValue:u.value.directories[p],"onUpdate:modelValue":D=>u.value.directories[p]=D,placeholder:B.value[p]?.default,class:"mt-2",prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):U("",!0)])),64)),(y(!0),x(J,null,ve(Z("workspace"),p=>(y(),x("div",{key:`extra-${p.key}`},[k(Be,{id:`extra-dir-${p.key}`,modelValue:u.value.extra_directories_enabled[p.key],"onUpdate:modelValue":D=>u.value.extra_directories_enabled[p.key]=D,label:p.label,description:`Custom: ${p.path}`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),u.value.extra_directories_enabled[p.key]?(y(),me(q,{key:0,modelValue:p.path,"onUpdate:modelValue":D=>p.path=D,placeholder:p.path,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):U("",!0)]))),128))]),c("div",fM,[g[121]||(g[121]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Add Custom Workspace Directories",-1)),k(Vt,{"model-value":ee("workspace"),"onUpdate:modelValue":g[34]||(g[34]=p=>fe("workspace",p)),"add-label":"Add Workspace Directory","default-item":()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:R(({item:p,index:D,update:Y})=>[c("div",hM,[k(q,{"model-value":p.key,"onUpdate:modelValue":A=>Y("key",A),label:"Key",placeholder:"e.g., helpers",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(q,{"model-value":p.label,"onUpdate:modelValue":A=>Y("label",A),label:"Label",placeholder:"e.g., Helper Functions",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(q,{"model-value":p.path,"onUpdate:modelValue":A=>Y("path",A),label:"Path",placeholder:"e.g., helpers",prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])])):U("",!0),u.value.type==="project_sensitive"?(y(),x("div",pM,[g[127]||(g[127]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Inputs",-1)),g[128]||(g[128]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Keep private inputs compartmentalized; publish processed data into public folders when ready. ",-1)),g[129]||(g[129]=c("div",{class:"grid gap-4 sm:grid-cols-2 text-xs font-semibold uppercase text-gray-500 dark:text-gray-400 mb-3"},[c("div",null,"Private"),c("div",null,"Public")],-1)),c("div",mM,[(y(),x(J,null,ve(["raw","intermediate","final"],p=>c("div",{key:p},[c("div",gM,[c("div",yM,[k(Be,{id:`dir-inputs_private_${p}`,modelValue:u.value.directories_enabled[`inputs_private_${p}`],"onUpdate:modelValue":D=>u.value.directories_enabled[`inputs_private_${p}`]=D,label:`${p.charAt(0).toUpperCase()+p.slice(1)} data`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label"]),u.value.directories_enabled[`inputs_private_${p}`]?(y(),me(q,{key:0,modelValue:u.value.directories[`inputs_private_${p}`],"onUpdate:modelValue":D=>u.value.directories[`inputs_private_${p}`]=D,placeholder:`inputs/private/${p}`,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):U("",!0)]),c("div",vM,[k(Be,{id:`dir-inputs_public_${p}`,modelValue:u.value.directories_enabled[`inputs_public_${p}`],"onUpdate:modelValue":D=>u.value.directories_enabled[`inputs_public_${p}`]=D,label:`${p.charAt(0).toUpperCase()+p.slice(1)} data`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label"]),u.value.directories_enabled[`inputs_public_${p}`]?(y(),me(q,{key:0,modelValue:u.value.directories[`inputs_public_${p}`],"onUpdate:modelValue":D=>u.value.directories[`inputs_public_${p}`]=D,placeholder:`inputs/public/${p}`,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):U("",!0)])])])),64)),c("div",bM,[c("div",xM,[(y(!0),x(J,null,ve(Z("input_private"),p=>(y(),x("div",{key:`extra-${p.key}`,class:"p-3 rounded-md"},[k(Be,{id:`extra-dir-${p.key}`,modelValue:u.value.extra_directories_enabled[p.key],"onUpdate:modelValue":D=>u.value.extra_directories_enabled[p.key]=D,label:p.label,description:`Custom: ${p.path}`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),u.value.extra_directories_enabled[p.key]?(y(),me(q,{key:0,modelValue:p.path,"onUpdate:modelValue":D=>p.path=D,placeholder:p.path,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):U("",!0)]))),128))]),c("div",kM,[(y(!0),x(J,null,ve(Z("input_public"),p=>(y(),x("div",{key:`extra-${p.key}`,class:"p-3 rounded-md"},[k(Be,{id:`extra-dir-${p.key}`,modelValue:u.value.extra_directories_enabled[p.key],"onUpdate:modelValue":D=>u.value.extra_directories_enabled[p.key]=D,label:p.label,description:`Custom: ${p.path}`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),u.value.extra_directories_enabled[p.key]?(y(),me(q,{key:0,modelValue:p.path,"onUpdate:modelValue":D=>p.path=D,placeholder:p.path,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):U("",!0)]))),128))])])]),c("div",wM,[g[126]||(g[126]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-4"},"Add Custom Input Directories",-1)),c("div",SM,[c("div",null,[g[124]||(g[124]=c("p",{class:"text-xs font-semibold uppercase text-gray-500 dark:text-gray-400 mb-3"},"Private",-1)),k(Vt,{"model-value":ee("input_private"),"onUpdate:modelValue":g[35]||(g[35]=p=>fe("input_private",p)),"add-label":"Add Private Input","default-item":()=>({key:"",label:"",path:"",type:"input_private",_id:Date.now()})},{default:R(({item:p,index:D,update:Y})=>[c("div",CM,[k(q,{"model-value":p.key,"onUpdate:modelValue":A=>Y("key",A),label:"Key",placeholder:"e.g., inputs_private_survey",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(q,{"model-value":p.label,"onUpdate:modelValue":A=>Y("label",A),label:"Label",placeholder:"e.g., Survey Data",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(q,{"model-value":p.path,"onUpdate:modelValue":A=>Y("path",A),label:"Path",placeholder:"e.g., inputs/private/survey",prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])]),c("div",null,[g[125]||(g[125]=c("p",{class:"text-xs font-semibold uppercase text-gray-500 dark:text-gray-400 mb-3"},"Public",-1)),k(Vt,{"model-value":ee("input_public"),"onUpdate:modelValue":g[36]||(g[36]=p=>fe("input_public",p)),"add-label":"Add Public Input","default-item":()=>({key:"",label:"",path:"",type:"input_public",_id:Date.now()})},{default:R(({item:p,index:D,update:Y})=>[c("div",_M,[k(q,{"model-value":p.key,"onUpdate:modelValue":A=>Y("key",A),label:"Key",placeholder:"e.g., inputs_public_survey",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(q,{"model-value":p.label,"onUpdate:modelValue":A=>Y("label",A),label:"Label",placeholder:"e.g., Survey Data",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(q,{"model-value":p.path,"onUpdate:modelValue":A=>Y("path",A),label:"Path",placeholder:"e.g., inputs/public/survey",prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])])])])):U("",!0),u.value.type==="project_sensitive"?(y(),x("div",AM,[g[133]||(g[133]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Outputs",-1)),g[134]||(g[134]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Review outputs before promotion; private folders remain gitignored while public copies are ready to share. ",-1)),g[135]||(g[135]=c("div",{class:"grid gap-4 sm:grid-cols-2 text-xs font-semibold uppercase text-gray-500 dark:text-gray-400 mb-3"},[c("div",null,"Private"),c("div",null,"Public")],-1)),c("div",VM,[(y(),x(J,null,ve(["notebooks","tables","figures","models","reports"],p=>c("div",{key:p},[c("div",MM,[c("div",DM,[k(Be,{id:`dir-outputs_private_${p}`,modelValue:u.value.directories_enabled[`outputs_private_${p}`],"onUpdate:modelValue":D=>u.value.directories_enabled[`outputs_private_${p}`]=D,label:p.replace("_"," ").charAt(0).toUpperCase()+p.replace("_"," ").slice(1),class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label"]),u.value.directories_enabled[`outputs_private_${p}`]?(y(),me(q,{key:0,modelValue:u.value.directories[`outputs_private_${p}`],"onUpdate:modelValue":D=>u.value.directories[`outputs_private_${p}`]=D,placeholder:`outputs/private/${p}`,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):U("",!0)]),c("div",TM,[k(Be,{id:`dir-outputs_public_${p}`,modelValue:u.value.directories_enabled[`outputs_public_${p}`],"onUpdate:modelValue":D=>u.value.directories_enabled[`outputs_public_${p}`]=D,label:p.replace("_"," ").charAt(0).toUpperCase()+p.replace("_"," ").slice(1),class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label"]),u.value.directories_enabled[`outputs_public_${p}`]?(y(),me(q,{key:0,modelValue:u.value.directories[`outputs_public_${p}`],"onUpdate:modelValue":D=>u.value.directories[`outputs_public_${p}`]=D,placeholder:`outputs/public/${p}`,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):U("",!0)])])])),64)),c("div",EM,[c("div",$M,[(y(!0),x(J,null,ve(Z("output_private"),p=>(y(),x("div",{key:`extra-${p.key}`,class:"p-3 rounded-md"},[k(Be,{id:`extra-dir-${p.key}`,modelValue:u.value.extra_directories_enabled[p.key],"onUpdate:modelValue":D=>u.value.extra_directories_enabled[p.key]=D,label:p.label,description:`Custom: ${p.path}`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),u.value.extra_directories_enabled[p.key]?(y(),me(q,{key:0,modelValue:p.path,"onUpdate:modelValue":D=>p.path=D,placeholder:p.path,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):U("",!0)]))),128))]),c("div",PM,[(y(!0),x(J,null,ve(Z("output_public"),p=>(y(),x("div",{key:`extra-${p.key}`,class:"p-3 rounded-md"},[k(Be,{id:`extra-dir-${p.key}`,modelValue:u.value.extra_directories_enabled[p.key],"onUpdate:modelValue":D=>u.value.extra_directories_enabled[p.key]=D,label:p.label,description:`Custom: ${p.path}`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),u.value.extra_directories_enabled[p.key]?(y(),me(q,{key:0,modelValue:p.path,"onUpdate:modelValue":D=>p.path=D,placeholder:p.path,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):U("",!0)]))),128))])])]),c("div",OM,[g[132]||(g[132]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-4"},"Add Custom Output Directories",-1)),c("div",RM,[c("div",null,[g[130]||(g[130]=c("p",{class:"text-xs font-semibold uppercase text-gray-500 dark:text-gray-400 mb-3"},"Private",-1)),k(Vt,{"model-value":ee("output_private"),"onUpdate:modelValue":g[37]||(g[37]=p=>fe("output_private",p)),"add-label":"Add Private Output","default-item":()=>({key:"",label:"",path:"",type:"output_private",_id:Date.now()})},{default:R(({item:p,index:D,update:Y})=>[c("div",jM,[k(q,{"model-value":p.key,"onUpdate:modelValue":A=>Y("key",A),label:"Key",placeholder:"e.g., outputs_private_videos",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(q,{"model-value":p.label,"onUpdate:modelValue":A=>Y("label",A),label:"Label",placeholder:"e.g., Videos",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(q,{"model-value":p.path,"onUpdate:modelValue":A=>Y("path",A),label:"Path",placeholder:"e.g., outputs/private/videos",prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])]),c("div",null,[g[131]||(g[131]=c("p",{class:"text-xs font-semibold uppercase text-gray-500 dark:text-gray-400 mb-3"},"Public",-1)),k(Vt,{"model-value":ee("output_public"),"onUpdate:modelValue":g[38]||(g[38]=p=>fe("output_public",p)),"add-label":"Add Public Output","default-item":()=>({key:"",label:"",path:"",type:"output_public",_id:Date.now()})},{default:R(({item:p,index:D,update:Y})=>[c("div",LM,[k(q,{"model-value":p.key,"onUpdate:modelValue":A=>Y("key",A),label:"Key",placeholder:"e.g., outputs_public_videos",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(q,{"model-value":p.label,"onUpdate:modelValue":A=>Y("label",A),label:"Label",placeholder:"e.g., Videos",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(q,{"model-value":p.path,"onUpdate:modelValue":A=>Y("path",A),label:"Path",placeholder:"e.g., outputs/public/videos",prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])])])])):U("",!0),u.value.type==="project_sensitive"?(y(),x("div",BM,[g[136]||(g[136]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Temporary",-1)),g[137]||(g[137]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Scratch space and cache (gitignored by default).",-1)),c("div",IM,[(y(),x(J,null,ve(["cache","scratch"],p=>He(c("div",{key:p},[c("div",UM,[k(Be,{id:`dir-${p}`,modelValue:u.value.directories_enabled[p],"onUpdate:modelValue":D=>u.value.directories_enabled[p]=D,label:B.value[p]?.label,description:B.value[p]?.hint,class:"flex-1"},null,8,["id","modelValue","onUpdate:modelValue","label","description"])]),u.value.directories_enabled[p]?(y(),me(q,{key:0,modelValue:u.value.directories[p],"onUpdate:modelValue":D=>u.value.directories[p]=D,placeholder:B.value[p]?.default,class:"mt-2",prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):U("",!0)]),[[gt,B.value[p]]])),64))])])):U("",!0)],512),[[gt,a.value==="structure"]]),He(c("div",null,[c("div",NM,[g[143]||(g[143]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"}," Packages & Dependencies ",-1)),g[144]||(g[144]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Configure package management and default packages for this project. ",-1)),c("div",zM,[k(Be,{modelValue:u.value.packages.use_renv,"onUpdate:modelValue":g[39]||(g[39]=p=>u.value.packages.use_renv=p),label:"Enable renv",description:"Use renv for package version management and reproducibility"},null,8,["modelValue"]),c("div",FM,[g[141]||(g[141]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Default Packages",-1)),g[142]||(g[142]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Packages to install during project initialization. Auto-attach loads them automatically when scaffold() runs. Supports version pinning (e.g., dplyr@1.1.0). ",-1)),c("div",HM,[(y(!0),x(J,null,ve(u.value.packages.default_packages,(p,D)=>(y(),x("div",{key:D,class:"rounded-lg border border-gray-200 p-4 dark:border-gray-700"},[c("div",WM,[c("div",qM,[k(q,{"model-value":p.name,"onUpdate:modelValue":Y=>u.value.packages.default_packages[D].name=Y,label:"Package Name",placeholder:_(p.source||"cran"),hint:M(p.source||"cran"),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","placeholder","hint"]),k(Cs,{modelValue:u.value.packages.default_packages[D].source,"onUpdate:modelValue":Y=>u.value.packages.default_packages[D].source=Y,label:"Source"},{default:R(()=>[...g[138]||(g[138]=[c("option",{value:"cran"},"CRAN",-1),c("option",{value:"github"},"GitHub",-1),c("option",{value:"bioc"},"Bioconductor",-1)])]),_:1},8,["modelValue","onUpdate:modelValue"]),k(Be,{id:`pkg-auto-attach-${D}`,modelValue:u.value.packages.default_packages[D].auto_attach,"onUpdate:modelValue":Y=>u.value.packages.default_packages[D].auto_attach=Y,label:"Auto-attach",description:"Automatically attach this package in every session (calls library() when scaffold() runs)"},null,8,["id","modelValue","onUpdate:modelValue"])]),c("button",{type:"button",onClick:Y=>u.value.packages.default_packages.splice(D,1),class:"shrink-0 rounded-md p-1.5 text-gray-400 transition hover:bg-red-50 hover:text-red-600 dark:hover:bg-red-900/20"},[...g[139]||(g[139]=[c("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,GM)])]))),128))]),k($e,{variant:"secondary",size:"sm",onClick:g[40]||(g[40]=p=>u.value.packages.default_packages.push({name:"",source:"cran",auto_attach:!0})),class:"mt-3 inline-flex"},{default:R(()=>[...g[140]||(g[140]=[c("svg",{class:"mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),ie(" Add Package ",-1)])]),_:1})])])])],512),[[gt,a.value==="packages"]]),He(c("div",null,[c("div",KM,[g[156]||(g[156]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"}," AI Assistants ",-1)),g[157]||(g[157]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Select which AI assistants you want to support. Context files will be created for each selected assistant. ",-1)),c("div",JM,[k(Be,{modelValue:u.value.ai.enabled,"onUpdate:modelValue":g[41]||(g[41]=p=>u.value.ai.enabled=p),label:"Enable AI support",description:"Create context files for AI assistants in this project"},null,8,["modelValue"]),u.value.ai.enabled?(y(),x("div",YM,[g[154]||(g[154]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Assistants to Support",-1)),g[155]||(g[155]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Select which AI assistants you'll use. Files will be created for each: ",-1)),c("div",XM,[k(zs,{id:"ai-claude","model-value":u.value.ai.assistants.includes("claude"),"onUpdate:modelValue":g[42]||(g[42]=p=>L("claude",p)),description:"Creates CLAUDE.md context file"},{default:R(()=>[...g[145]||(g[145]=[ie(" Claude Code & Claude ",-1)])]),_:1},8,["model-value"]),k(zs,{id:"ai-cursor","model-value":u.value.ai.assistants.includes("cursor"),"onUpdate:modelValue":g[43]||(g[43]=p=>L("cursor",p)),description:"Creates .cursorrules configuration file"},{default:R(()=>[...g[146]||(g[146]=[ie(" Cursor ",-1)])]),_:1},8,["model-value"]),k(zs,{id:"ai-copilot","model-value":u.value.ai.assistants.includes("copilot"),"onUpdate:modelValue":g[44]||(g[44]=p=>L("copilot",p)),description:"Creates .github/copilot-instructions.md"},{default:R(()=>[...g[147]||(g[147]=[ie(" GitHub Copilot ",-1)])]),_:1},8,["model-value"]),k(zs,{id:"ai-chatgpt","model-value":u.value.ai.assistants.includes("chatgpt"),"onUpdate:modelValue":g[45]||(g[45]=p=>L("chatgpt",p)),description:"Creates AGENTS.md context file"},{default:R(()=>[...g[148]||(g[148]=[ie(" ChatGPT ",-1)])]),_:1},8,["model-value"])]),u.value.ai.assistants.length>0?(y(),x("div",QM,[c("div",ZM,[c("div",eD,[g[150]||(g[150]=c("svg",{class:"h-5 w-5 text-sky-400",viewBox:"0 0 20 20",fill:"currentColor"},[c("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z","clip-rule":"evenodd"})],-1)),c("div",tD,[g[149]||(g[149]=c("h4",{class:"text-sm font-medium text-sky-800 dark:text-sky-200"},"Files to be created:",-1)),c("div",sD,[c("ul",iD,[u.value.ai.assistants.includes("claude")?(y(),x("li",nD,"CLAUDE.md")):U("",!0),u.value.ai.assistants.includes("cursor")?(y(),x("li",rD,".cursorrules")):U("",!0),u.value.ai.assistants.includes("copilot")?(y(),x("li",oD,".github/copilot-instructions.md")):U("",!0),u.value.ai.assistants.includes("chatgpt")?(y(),x("li",lD,"AGENTS.md")):U("",!0)])])])])]),c("div",aD,[c("div",uD,[g[152]||(g[152]=c("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"Primary Context File",-1)),k(Cs,{modelValue:u.value.ai.canonical_file,"onUpdate:modelValue":g[46]||(g[46]=p=>u.value.ai.canonical_file=p),class:"w-auto"},{default:R(()=>[...g[151]||(g[151]=[c("option",{value:"CLAUDE.md"},"CLAUDE.md",-1),c("option",{value:"AGENTS.md"},"AGENTS.md",-1),c("option",{value:".github/copilot-instructions.md"},".github/copilot-instructions.md",-1),c("option",{value:".cursorrules"},".cursorrules",-1)])]),_:1},8,["modelValue"])]),g[153]||(g[153]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-3"}," Edit the default content for your primary AI context file. This will be pre-populated based on your project type. ",-1)),k(er,{modelValue:u.value.ai.canonical_content,"onUpdate:modelValue":g[47]||(g[47]=p=>u.value.ai.canonical_content=p),language:"markdown","min-height":"400px"},null,8,["modelValue"])])])):U("",!0)])):U("",!0)])])],512),[[gt,a.value==="ai"]]),He(c("div",null,[c("div",dD,[g[163]||(g[163]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"}," Git & Hooks ",-1)),g[164]||(g[164]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Configure version control and git hooks for this project. ",-1)),c("div",cD,[k(Be,{modelValue:u.value.git.initialize,"onUpdate:modelValue":g[48]||(g[48]=p=>u.value.git.initialize=p),label:"Initialize Git repository",description:"Run git init for this project"},null,8,["modelValue"]),u.value.git.initialize?(y(),x("div",fD,[c("div",null,[c("div",hD,[g[159]||(g[159]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300"},".gitignore",-1)),k(Cs,{modelValue:u.value.git.gitignore_template,"onUpdate:modelValue":g[49]||(g[49]=p=>u.value.git.gitignore_template=p),class:"w-auto"},{default:R(()=>[...g[158]||(g[158]=[c("option",{value:"gitignore-project"},"Research Project",-1),c("option",{value:"gitignore-sensitive"},"Sensitive Data Project",-1),c("option",{value:"gitignore-course"},"Course/Teaching",-1),c("option",{value:"gitignore-presentation"},"Presentation",-1)])]),_:1},8,["modelValue"])]),c("p",pD," Files and directories to exclude from version control. Customized for "+F($(u.value.git.gitignore_template))+". ",1),k(er,{modelValue:u.value.git.gitignore_content,"onUpdate:modelValue":g[50]||(g[50]=p=>u.value.git.gitignore_content=p),language:"text","min-height":"300px",placeholder:"# Add patterns to ignore..."},null,8,["modelValue"])]),c("div",null,[g[162]||(g[162]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Git Hooks",-1)),c("div",mD,[k(zs,{id:"hook-ai-sync",modelValue:u.value.git.hooks.ai_sync,"onUpdate:modelValue":g[51]||(g[51]=p=>u.value.git.hooks.ai_sync=p),description:"Mirror and sync AI context files (CLAUDE.md, .cursorrules, etc.) on commit"},{default:R(()=>[...g[160]||(g[160]=[ie(" AI Context File Mirroring ",-1)])]),_:1},8,["modelValue"]),k(zs,{id:"hook-data-security",modelValue:u.value.git.hooks.data_security,"onUpdate:modelValue":g[52]||(g[52]=p=>u.value.git.hooks.data_security=p),description:"Scan for secrets before commit"},{default:R(()=>[...g[161]||(g[161]=[ie(" Data Security Scan ",-1)])]),_:1},8,["modelValue"])])])])):U("",!0)])])],512),[[gt,a.value==="git"]])])])]))}},yD={class:"mt-2 block text-sm font-semibold text-gray-900 dark:text-white"},vD={key:0,class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},bD={class:"mt-2 text-sm font-semibold text-gray-900 dark:text-white"},xD={key:0,class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},kD={key:1,class:"mt-6"},wD={__name:"EmptyState",props:{title:{type:String,required:!0},description:{type:String,default:null},icon:{type:String,default:null,validator:t=>["database","folder","document","users","inbox","photo"].includes(t)},action:{type:Boolean,default:!1}},emits:["click"],setup(t,{emit:e}){const s=t,i=e,n=le(()=>{const l=["relative","block","w-full","rounded-lg","border-2","border-dashed","border-gray-300","p-12","text-center","dark:border-white/15"];return s.action&&l.push("hover:border-gray-400","focus:outline-2","focus:outline-offset-2","focus:outline-sky-600","dark:hover:border-white/25","dark:focus:outline-sky-500","transition-colors"),l.join(" ")}),r=le(()=>({database:()=>Tt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Tt("path",{d:"M8 14v20c0 4.418 7.163 8 16 8 1.381 0 2.721-.087 4-.252M8 14c0 4.418 7.163 8 16 8s16-3.582 16-8M8 14c0-4.418 7.163-8 16-8s16 3.582 16 8m0 0v14m0-4c0 4.418-7.163 8-16 8S8 28.418 8 24m32 10v6m0 0v6m0-6h6m-6 0h-6"})]),folder:()=>Tt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Tt("path",{d:"M3 7v30a4 4 0 004 4h34a4 4 0 004-4V13a4 4 0 00-4-4H23.343a4 4 0 01-2.829-1.172l-2.828-2.828A4 4 0 0014.858 4H7a4 4 0 00-4 4v0zM37 17v6m0 0v6m0-6h6m-6 0h-6"})]),document:()=>Tt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Tt("path",{d:"M8 4a4 4 0 00-4 4v32a4 4 0 004 4h32a4 4 0 004-4V8a4 4 0 00-4-4H8zm24 16v6m0 0v6m0-6h6m-6 0h-6"})]),users:()=>Tt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Tt("path",{d:"M17 21a5 5 0 110-10 5 5 0 010 10zm-6.5 8a7.5 7.5 0 0115 0H10.5zM31 21a5 5 0 110-10 5 5 0 010 10zm-6.5 8a7.5 7.5 0 0115 0H24.5z"})]),inbox:()=>Tt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Tt("path",{d:"M4 8h40M4 8v28a4 4 0 004 4h32a4 4 0 004-4V8M4 8l18 14a2 2 0 002.4 0L44 8"})]),photo:()=>Tt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Tt("path",{d:"M4 8a4 4 0 014-4h32a4 4 0 014 4v32a4 4 0 01-4 4H8a4 4 0 01-4-4V8zm10 6a3 3 0 100-6 3 3 0 000 6zM4 40l12-12 8 8 8-8L44 40"})])})[s.icon]||null),o=()=>{s.action&&i("click")};return(l,a)=>t.action?(y(),x("button",{key:0,type:"button",onClick:o,class:Ve(n.value)},[Ct(l.$slots,"icon",{},()=>[t.icon?(y(),me(Ws(r.value),{key:0,class:"mx-auto size-12 text-gray-400 dark:text-gray-500"})):U("",!0)]),c("span",yD,F(t.title),1),t.description?(y(),x("p",vD,F(t.description),1)):U("",!0)],2)):(y(),x("div",{key:1,class:Ve(n.value.replace("hover:border-gray-400","").replace("focus:outline-2",""))},[Ct(l.$slots,"icon",{},()=>[t.icon?(y(),me(Ws(r.value),{key:0,class:"mx-auto size-12 text-gray-400 dark:text-gray-500"})):U("",!0)]),c("h3",bD,F(t.title),1),t.description?(y(),x("p",xD,F(t.description),1)):U("",!0),l.$slots.actions?(y(),x("div",kD,[Ct(l.$slots,"actions")])):U("",!0)],2))}},SD=["onClick","aria-current"],CD={class:"mt-4"},_D={__name:"Tabs",props:{modelValue:{type:[String,Number],required:!0},tabs:{type:Array,required:!0,validator:t=>t.every(e=>e.id&&e.label)},variant:{type:String,default:"pills",validator:t=>["pills","underline"].includes(t)},size:{type:String,default:"md",validator:t=>["sm","md","lg"].includes(t)}},emits:["update:modelValue","change"],setup(t,{emit:e}){const s=t,i=e,n=le(()=>s.variant==="underline"?"border-b border-gray-200 dark:border-white/10":""),r=le(()=>{const a=["flex","gap-2"];return s.variant==="underline"?a.push("-mb-px"):a.push("p-1","bg-gray-100","dark:bg-white/5","rounded-lg"),a.join(" ")}),o=a=>{const d=s.modelValue===a,u=["inline-flex","items-center","gap-2","font-medium","transition-colors"],f={sm:"px-2.5 py-1.5 text-xs",md:"px-3 py-2 text-sm",lg:"px-4 py-2.5 text-base"};return u.push(f[s.size]),s.variant==="pills"?(u.push("rounded-md"),d?u.push("bg-white","text-gray-900","shadow-xs","dark:bg-white/10","dark:text-white"):u.push("text-gray-600","hover:text-gray-900","dark:text-gray-400","dark:hover:text-white")):(u.push("border-b-2","pb-3"),d?u.push("border-sky-600","text-sky-600","dark:border-sky-500","dark:text-sky-400"):u.push("border-transparent","text-gray-600","hover:border-gray-300","hover:text-gray-900","dark:text-gray-400","dark:hover:border-gray-600","dark:hover:text-white")),u.join(" ")},l=a=>{i("update:modelValue",a),i("change",a)};return(a,d)=>(y(),x("div",null,[c("div",{class:Ve(n.value)},[c("nav",{class:Ve(r.value),"aria-label":"Tabs"},[(y(!0),x(J,null,ve(t.tabs,u=>(y(),x("button",{key:u.id,type:"button",onClick:f=>l(u.id),class:Ve(o(u.id)),"aria-current":t.modelValue===u.id?"page":void 0},[u.icon?(y(),me(Ws(u.icon),{key:0,class:"size-5"})):U("",!0),ie(" "+F(u.label)+" ",1),u.badge?(y(),me(Vn,{key:1,variant:t.modelValue===u.id?"emerald":"gray",pill:""},{default:R(()=>[ie(F(u.badge),1)]),_:2},1032,["variant"])):U("",!0)],10,SD))),128))],2)],2),c("div",CD,[Ct(a.$slots,"default")])]))}},AD=["for"],VD={class:"mt-2"},MD=["id","value","placeholder","rows","required","disabled"],DD={key:1,class:"mt-2 text-sm text-gray-500 dark:text-gray-400"},nc={__name:"Textarea",props:{id:{type:String,default:()=>`textarea-${Math.random().toString(36).substr(2,9)}`},modelValue:{type:String,default:""},label:{type:String,default:null},placeholder:{type:String,default:""},rows:{type:Number,default:4},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},hint:{type:String,default:null},monospace:{type:Boolean,default:!1},textareaClass:{type:[String,Array,Object],default:""}},emits:["update:modelValue"],setup(t){const e=t,s=le(()=>["block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-sky-600 sm:text-sm/6 dark:bg-white/5 dark:text-white dark:outline-white/10 dark:placeholder:text-gray-500 dark:focus:outline-sky-500",e.monospace?"font-mono text-sm leading-6":"",e.textareaClass]);return(i,n)=>(y(),x("div",null,[t.label?(y(),x("label",{key:0,for:t.id,class:"block text-sm/6 font-medium text-gray-900 dark:text-white"},F(t.label),9,AD)):U("",!0),c("div",VD,[c("textarea",{id:t.id,value:t.modelValue,placeholder:t.placeholder,rows:t.rows,required:t.required,disabled:t.disabled,onInput:n[0]||(n[0]=r=>i.$emit("update:modelValue",r.target.value)),class:Ve(s.value)},null,42,MD)]),t.hint?(y(),x("p",DD,F(t.hint),1)):U("",!0)]))}},TD={class:"space-y-6"},ED={key:0},$D={class:"mt-1 font-mono text-sm text-gray-900 dark:text-gray-100 break-words"},PD={key:1},OD={class:"grid gap-4 sm:grid-cols-2"},RD=["value"],jD={class:"sm:col-span-2"},LD={key:0,class:"sm:col-span-2"},BD={class:"space-y-3"},ID={class:"flex items-center justify-between"},UD={key:0,class:"rounded-md border border-dashed border-gray-300 p-4 text-sm text-gray-500 dark:border-gray-600 dark:text-gray-400"},ND={class:"grid gap-3 sm:grid-cols-[1fr_auto] sm:items-start"},zD={class:"mt-3"},FD={key:0,class:"mt-2 text-xs text-gray-500 dark:text-gray-400"},HD={class:"mt-2 flex justify-end"},WD={key:2,class:"text-sm text-red-600 dark:text-red-400"},qD={key:3,class:"text-sm text-red-600 dark:text-red-400"},GD={key:4,class:"text-sm text-red-600 dark:text-red-400"},KD='{"source": "data-catalog"}',JD={__name:"DataCatalogEditModal",props:{modelValue:{type:Boolean,default:!1},mode:{type:String,default:"edit",validator:t=>["edit","create"].includes(t)},entry:{type:Object,default:null},saving:{type:Boolean,default:!1},error:{type:String,default:null}},emits:["update:modelValue","save"],setup(t,{emit:e}){const s=t,i=e,n=Object.freeze([{value:"csv",label:"CSV (comma-separated)"},{value:"tsv",label:"TSV (tab-separated)"},{value:"csv_custom",label:"Delimited text (custom)"},{value:"rds",label:"RDS (R serialized)"},{value:"excel",label:"Excel (.xlsx / .xls)"},{value:"stata",label:"Stata (.dta)"},{value:"spss",label:"SPSS (.sav / .zsav)"},{value:"spss_por",label:"SPSS Portable (.por)"},{value:"sas",label:"SAS (.sas7bdat / .sas7bcat)"},{value:"sas_xpt",label:"SAS Transport (.xpt)"}]),r=["path","type","description","locked","delimiter"],o=he(null),l=he(!1),a=he(!1),d=le(()=>s.mode==="create"),u=hi({path:"",fullKey:"",type:"",description:"",delimiter:"",locked:!1,additionalFields:[]}),f=le(()=>u.type==="csv_custom"),h=le(()=>{if(!s.entry&&!d.value)return null;const g=ee();return g.length>0?`Duplicate metadata keys: ${g.join(", ")}`:u.additionalFields.some(p=>!p.key.trim())?"Metadata keys cannot be empty.":null}),m=le(()=>u.path.trim()?null:"File path is required"),w=le(()=>d.value?a.value?m.value:null:m.value);Ye(()=>s.entry,g=>{if(!g){N();return}T(g)},{immediate:!0}),Ye(()=>u.path,g=>{if(l.value)return;const p=L(g);p&&(p.type==="csv"?(u.type="csv",u.delimiter=_("csv")):p.type==="tsv"?(u.type="tsv",u.delimiter=_("tsv")):(u.type=p.type,u.delimiter=""))}),Ye(()=>u.type,g=>{g&&(g==="csv"?u.delimiter=_("csv"):g==="tsv"?u.delimiter=_("tsv"):g!=="csv_custom"&&(u.delimiter=""))});function S(){return`field-${Math.random().toString(36).slice(2,9)}`}function _(g){return g==="csv"?"comma":g==="tsv"?"tab":""}function M(g,p){if(!g)return!1;const D=g.toLowerCase();return p==="csv"?D==="comma"||g===",":p==="tsv"?D==="tab"||g==="	":!1}function L(g){if(!g)return null;const p=g.toLowerCase();return p.endsWith(".csv")?{type:"csv",delimiter:"comma"}:p.endsWith(".tsv")||p.endsWith(".txt")||p.endsWith(".dat")?{type:"tsv",delimiter:"tab"}:p.endsWith(".rds")?{type:"rds",delimiter:""}:p.endsWith(".xlsx")||p.endsWith(".xls")?{type:"excel",delimiter:""}:p.endsWith(".dta")?{type:"stata",delimiter:""}:p.endsWith(".sav")||p.endsWith(".zsav")?{type:"spss",delimiter:""}:p.endsWith(".por")?{type:"spss_por",delimiter:""}:p.endsWith(".sas7bdat")||p.endsWith(".sas7bcat")?{type:"sas",delimiter:""}:p.endsWith(".xpt")?{type:"sas_xpt",delimiter:""}:null}function $(g){if(!g){u.type="",u.delimiter="",l.value=!1;return}u.type=g,l.value=!0,g==="csv"?u.delimiter=_("csv"):g==="tsv"?u.delimiter=_("tsv"):u.delimiter=""}function T(g){if(N(),a.value=!1,d.value){const be=g?.data||{};u.fullKey=g?.fullKey||"",u.path=be.path||"",u.type=be.type||"",u.description=be.description||"",u.locked=!!be.locked,u.delimiter=be.delimiter||"",l.value=!1;return}const p=g.data||{};u.fullKey=g.fullKey||"",u.path=p.path||"";const D=L(u.path),Y=p.type||D?.type||"";if(u.description=p.description||"",u.locked=!!p.locked,Y==="csv"){const be=p.delimiter||D?.delimiter||_("csv");M(be,"csv")?(u.type="csv",u.delimiter=_("csv")):be?(u.type="csv_custom",u.delimiter=be):(u.type="csv",u.delimiter=_("csv"))}else Y==="tsv"?(u.type="tsv",u.delimiter=_("tsv")):(u.type=Y,u.delimiter=f.value&&p.delimiter||"");!u.type&&D?.type&&(u.type=D.type,u.delimiter=D.delimiter||_(D.type)),l.value=!!p.type||u.type==="csv_custom";const A=Object.entries(p).filter(([be])=>!r.includes(be)).map(([be,ge])=>({id:S(),key:be,valueInput:B(ge),valueType:I(ge),isMultiline:typeof ge=="object"&&ge!==null}));u.additionalFields=A,o.value=null}function N(){u.path="",u.fullKey="",u.type="",u.description="",u.delimiter="",u.locked=!1,u.additionalFields=[],o.value=null,l.value=!1}function B(g){if(typeof g=="object"&&g!==null)try{return JSON.stringify(g,null,2)}catch{return""}return g==null?"":String(g)}function I(g){return Array.isArray(g)||typeof g=="object"&&g!==null?"object":typeof g=="boolean"?"boolean":typeof g=="number"?"number":"string"}function Z(g){if(g.valueType==="object"){if(!g.valueInput.trim())return null;try{return JSON.parse(g.valueInput)}catch{throw new Error(`Invalid JSON for field "${g.key}"`)}}if(g.valueType==="number"){const p=Number(g.valueInput);if(Number.isNaN(p))throw new Error(`Value for "${g.key}" must be a number`);return p}if(g.valueType==="boolean"){const p=g.valueInput.trim().toLowerCase();if(["true","false"].includes(p))return p==="true";throw new Error(`Value for "${g.key}" must be "true" or "false"`)}return g.valueInput}function ee(){const g=new Set,p=[];return u.additionalFields.forEach(D=>{const Y=D.key.trim();Y&&(g.has(Y)||r.includes(Y)?p.push(Y):g.add(Y))}),p}function fe(g){return g.key.trim()?r.includes(g.key.trim())?"Reserved key name":u.additionalFields.some(p=>p!==g&&p.key.trim()===g.key.trim())?"Duplicate key":null:"Key is required"}function X(){u.additionalFields.push({id:S(),key:"",valueInput:"",valueType:"string",isMultiline:!1}),o.value=null}function z(g){u.additionalFields=u.additionalFields.filter(p=>p.id!==g)}function ae(g){g.isMultiline=!g.isMultiline,g.isMultiline?(g.valueType="object",g.valueInput&&!g.valueInput.trim().startsWith("{")&&(g.valueInput="")):(g.valueType="string",g.valueInput=g.valueInput!=null?String(g.valueInput):"")}const oe=()=>{if(o.value=null,a.value=!0,!(m.value||h.value)&&!(!d.value&&!s.entry))try{const g=H();i("save",g)}catch(g){o.value=g.message}},H=()=>{if(!u.path.trim())throw new Error("File path is required");const g={};g.path=u.path.trim();const p=u.type==="csv_custom"?"csv":u.type.trim();if(p&&(g.type=p),u.description.trim()&&(g.description=u.description.trim()),u.type==="csv_custom"){if(!u.delimiter.trim())throw new Error("Delimiter is required for custom delimited text sources");g.delimiter=u.delimiter.trim()}else u.delimiter.trim()&&!M(u.delimiter.trim(),u.type)&&(g.delimiter=u.delimiter.trim());u.locked&&(g.locked=!0);for(const Y of u.additionalFields){const A=Y.key.trim();if(!A||r.includes(A))continue;const be=Z({...Y,valueType:Y.valueType??"string"});be===null||be===""||(g[A]=be)}const D=(d.value?u.fullKey:s.entry.fullKey||"").trim();if(!D)throw new Error("Dot notation key is required");return{fullKey:D,data:g,isNew:d.value}};return(g,p)=>(y(),me(bo,{"model-value":t.modelValue,variant:"left",size:"lg",title:"Edit Data Entry","onUpdate:modelValue":p[6]||(p[6]=D=>i("update:modelValue",D))},rb({_:2},[t.entry||d.value?{name:"default",fn:R(()=>[c("div",TD,[d.value?(y(),x("div",PD,[k(q,{modelValue:u.fullKey,"onUpdate:modelValue":p[0]||(p[0]=D=>u.fullKey=D),label:"Dot Notation Key",placeholder:"e.g., inputs.raw.custom_dataset",hint:"Use dot notation to place this entry within the catalog hierarchy."},null,8,["modelValue"])])):(y(),x("div",ED,[p[7]||(p[7]=c("p",{class:"text-xs font-medium uppercase tracking-wide text-gray-500 dark:text-gray-400"}," Data Key ",-1)),c("p",$D,F(t.entry.fullKey),1)])),k(q,{modelValue:u.path,"onUpdate:modelValue":p[1]||(p[1]=D=>u.path=D),label:"File Path",placeholder:"inputs/raw/example.csv",required:"",error:w.value,monospace:"",hint:"Provide a path relative to the project root (e.g., inputs/raw/data.csv) or an absolute path."},null,8,["modelValue","error"]),c("div",OD,[k(Cs,{"model-value":u.type,label:"Type","onUpdate:modelValue":$},{default:R(()=>[p[8]||(p[8]=c("option",{disabled:"",value:""},"Select file type",-1)),(y(!0),x(J,null,ve(lt(n),D=>(y(),x("option",{key:D.value,value:D.value},F(D.label),9,RD))),128))]),_:1},8,["model-value"]),c("div",jD,[k(Be,{modelValue:u.locked,"onUpdate:modelValue":p[2]||(p[2]=D=>u.locked=D),label:"Locked",description:"Treat this data source as read-only."},null,8,["modelValue"])]),f.value?(y(),x("div",LD,[k(q,{modelValue:u.delimiter,"onUpdate:modelValue":p[3]||(p[3]=D=>u.delimiter=D),label:"Delimiter",placeholder:"e.g., tab or |",hint:"Use keywords 'tab', 'comma', 'semicolon', 'space' or supply a single character (e.g., |). Keywords map to their respective delimiters."},null,8,["modelValue"])])):U("",!0)]),k(nc,{modelValue:u.description,"onUpdate:modelValue":p[4]||(p[4]=D=>u.description=D),label:"Description",placeholder:"Explain what this source contains or how it was produced.",rows:4},null,8,["modelValue"]),c("div",BD,[c("div",ID,[p[10]||(p[10]=c("h4",{class:"text-sm font-semibold text-gray-900 dark:text-gray-100"}," Additional Metadata ",-1)),k($e,{size:"sm",variant:"secondary",class:"shadow-none",onClick:X},{default:R(()=>[...p[9]||(p[9]=[ie(" Add Field ",-1)])]),_:1})]),p[12]||(p[12]=c("p",{class:"text-xs text-gray-500 dark:text-gray-400"}," Store any extra properties (e.g., source, codebook details). Complex values can be provided as JSON. ",-1)),u.additionalFields.length===0?(y(),x("div",UD," No additional metadata fields. ")):U("",!0),(y(!0),x(J,null,ve(u.additionalFields,D=>(y(),x("div",{key:D.id,class:"rounded-md border border-gray-200 bg-white/80 p-4 dark:border-gray-700 dark:bg-gray-900/40"},[c("div",ND,[k(q,{modelValue:D.key,"onUpdate:modelValue":Y=>D.key=Y,label:"Key",placeholder:"e.g., source",error:fe(D)},null,8,["modelValue","onUpdate:modelValue","error"]),k($e,{size:"sm",variant:"secondary",class:"shadow-none",onClick:Y=>z(D.id)},{default:R(()=>[...p[11]||(p[11]=[ie(" Remove ",-1)])]),_:1},8,["onClick"])]),c("div",zD,[(y(),me(Ws(D.isMultiline?nc:q),{modelValue:D.valueInput,"onUpdate:modelValue":Y=>D.valueInput=Y,label:D.isMultiline?"Value (JSON)":"Value",rows:D.isMultiline?4:void 0,placeholder:D.isMultiline?KD:"comma",monospace:D.isMultiline?void 0:!1},null,8,["modelValue","onUpdate:modelValue","label","rows","placeholder","monospace"])),D.isMultiline?(y(),x("p",FD," Provide valid JSON to store complex data structures. ")):U("",!0),c("div",HD,[k($e,{size:"xs",variant:"soft",onClick:Y=>ae(D)},{default:R(()=>[ie(F(D.isMultiline?"Use single-line value":"Use JSON value"),1)]),_:2},1032,["onClick"])])])]))),128))]),h.value?(y(),x("p",WD,F(h.value),1)):U("",!0),o.value?(y(),x("p",qD,F(o.value),1)):U("",!0),t.error?(y(),x("p",GD,F(t.error),1)):U("",!0)])]),key:"0"}:void 0,t.entry?{name:"actions",fn:R(()=>[k($e,{size:"sm",variant:"secondary",class:"shadow-none",onClick:p[5]||(p[5]=D=>i("update:modelValue",!1))},{default:R(()=>[...p[13]||(p[13]=[ie(" Cancel ",-1)])]),_:1}),k($e,{size:"sm",disabled:t.saving,onClick:oe},{default:R(()=>[ie(F(t.saving?"Saving":"Save Entry"),1)]),_:1},8,["disabled"])]),key:"1"}:void 0]),1032,["model-value"]))}},qv=(t="")=>{const s=String(t??"").trim().replace(/[^a-zA-Z0-9]+/g,"-").replace(/^-+|-+$/g,"").toLowerCase();return s?`data-node-${s}`:"data-node-root"},YD=["id"],XD=["aria-expanded"],QD={class:"flex-1"},ZD={key:0,class:"rounded bg-amber-200/70 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},eT={key:1},tT={class:"mt-1 text-xs text-zinc-500 dark:text-zinc-400"},sT={class:"text-xs font-medium uppercase tracking-wide text-zinc-500 dark:text-zinc-400"},iT={class:"flex items-start gap-3"},nT={class:"flex-1"},rT={key:0,class:"rounded bg-amber-200/70 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},oT={key:1},lT={class:"mt-1 text-xs text-zinc-500 dark:text-zinc-400"},aT=["id"],uT={class:"flex items-start justify-between gap-4"},dT={class:"min-w-0 flex items-center gap-2"},cT={class:"text-sm font-semibold text-gray-900 dark:text-white"},fT={key:0,class:"rounded bg-amber-200/70 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},hT={key:1},pT={key:0,class:"inline-flex items-center rounded-full border border-gray-200 bg-white px-2.5 py-1 text-xs font-medium text-gray-700 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-100"},mT={class:"flex items-center gap-2 shrink-0"},gT={class:"mt-5 space-y-4"},yT={key:0,class:"space-y-2"},vT={class:"text-sm leading-relaxed text-gray-600 dark:text-zinc-300"},bT={key:1,class:"flex items-start gap-3"},xT={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},kT={key:1,class:"h-4 w-4 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},wT={class:"min-w-0 flex-1"},ST={class:"mt-1 font-mono text-sm leading-relaxed text-gray-900 dark:text-zinc-100"},CT={key:0,class:"rounded bg-amber-200/60 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},_T={key:1},AT={key:1,class:"text-zinc-500"},VT={class:"flex items-start gap-3 pt-4 border-t border-gray-200 dark:border-zinc-700"},MT={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},DT={key:1,class:"h-4 w-4 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},TT={class:"min-w-0 flex-1"},ET={class:"mt-1 font-mono text-sm leading-relaxed text-gray-900 dark:text-zinc-100"},$T={key:0,class:"rounded bg-amber-200/60 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},PT={key:1},OT={key:1,class:"text-zinc-500"},RT={class:"min-w-0"},jT={class:"text-xs font-medium uppercase tracking-wide text-gray-600 dark:text-zinc-200"},LT={class:"mt-1 whitespace-pre-wrap break-words font-mono text-[13px] text-gray-800 dark:text-zinc-200"},BT={class:"flex items-start gap-3 pt-4 border-t border-gray-200 dark:border-zinc-700"},IT={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},UT={key:1,class:"h-4 w-4 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},NT={class:"min-w-0 flex-1"},zT=["title"],Fu="mt-1.5 inline-flex h-10 w-10 items-center justify-center rounded-md border border-gray-200 bg-white text-gray-500 transition hover:border-gray-300 hover:text-gray-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-500 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-300 dark:hover:border-gray-500 dark:hover:text-gray-100",FT=Object.assign({name:"DataCatalogTree"},{__name:"DataCatalogTree",props:{node:{type:Object,required:!0},depth:{type:Number,default:0},expandedKeys:{type:Object,required:!0},autoExpandedKeys:{type:Object,required:!0},toggleGroup:{type:Function,required:!0},searchTerm:{type:String,default:""},hierarchical:{type:Boolean,default:!0},pendingDeletes:{type:Object,default:null}},emits:["edit","delete"],setup(t,{emit:e}){const s=e,i=t,n=le(()=>i.node?.type==="group"),r=le(()=>i.depth===0),o=le(()=>{if(!n.value)return!1;if(!i.hierarchical)return!0;const X=i.node?.fullKey;if(!X)return!1;const z=i.expandedKeys,ae=i.autoExpandedKeys,oe=typeof z?.has=="function"?z.has(X):!!z?.[X],H=typeof ae?.has=="function"?ae.has(X):!!ae?.[X];return oe||H}),l=le(()=>{const X=i.node?.leafCount||0;return`${X} ${X===1?"entry":"entries"}`}),a=le(()=>r.value?"mb-4 rounded-xl border border-gray-200 bg-white p-6 transition hover:border-gray-300 scroll-mt-16 dark:border-gray-700/70 dark:bg-gray-900 dark:hover:border-gray-600":"mb-3 rounded-lg border border-gray-200 bg-white p-4 transition hover:border-gray-300 dark:border-gray-700/60 dark:bg-gray-900/60 dark:hover:border-gray-600"),d=le(()=>r.value?"text-lg font-semibold text-zinc-900 dark:text-white":"text-sm font-semibold text-zinc-900 dark:text-white"),u=le(()=>r.value?"mt-4 space-y-3":"mt-3 space-y-3"),f=le(()=>i.pendingDeletes instanceof Set?i.pendingDeletes:i.pendingDeletes&&typeof i.pendingDeletes=="object"&&i.pendingDeletes.value instanceof Set?i.pendingDeletes.value:new Set),h=le(()=>f.value.has(i.node?.fullKey)),m=le(()=>{const X=i.node?.data||{},z=new Set(["path","type","description","locked","delimiter"]);return Object.keys(X).filter(ae=>!z.has(ae)).reduce((ae,oe)=>(ae[oe]=X[oe],ae),{})}),w=le(()=>{const X="relative rounded-lg p-6 transition focus-within:ring-2",z=r.value?"scroll-mt-16":"";return h.value?`${X} border border-red-200 bg-red-50 hover:bg-red-100 focus-within:ring-red-300 ${z} dark:border-red-500/40 dark:bg-red-900/30 dark:hover:bg-red-900/40 dark:focus-within:ring-red-500/40`:`${X} border border-gray-200 bg-gray-50 hover:bg-gray-100 focus-within:ring-sky-200 ${z} dark:border-gray-700/50 dark:bg-gray-800/50 dark:hover:bg-gray-800/60 dark:focus-within:ring-sky-500/40`}),S=le(()=>h.value?"shadow-none border border-red-200 text-red-700 hover:bg-red-50 dark:border-red-500/40 dark:text-red-200 dark:hover:bg-red-900/30":"shadow-none"),_=le(()=>i.searchTerm.trim().toLowerCase()),M=(X="")=>{const z=X??"",ae=_.value;if(!ae)return[{text:z,highlight:!1}];const oe=z.toLowerCase(),H=[];let g=0,p=oe.indexOf(ae);for(;p!==-1;)p>g&&H.push({text:z.slice(g,p),highlight:!1}),H.push({text:z.slice(p,p+ae.length),highlight:!0}),g=p+ae.length,p=oe.indexOf(ae,g);return g<z.length&&H.push({text:z.slice(g),highlight:!1}),H.length>0?H:[{text:z,highlight:!1}]},L=le(()=>i.node?.displayName||i.node?.name||""),$=le(()=>M(L.value)),T=le(()=>M(i.node?.data?.path||"")),N=le(()=>M(i.node?.fullKey||"")),B=le(()=>{const X=i.node?.fullKey||"";return X?`data_read('${X}')`:"data_read()"}),I=(X="")=>X.replace(/_/g," "),Z=X=>X==null?"":typeof X=="object"?JSON.stringify(X,null,2):String(X),ee=le(()=>{if(!r.value)return null;const X=i.node?.fullKey||i.node?.name;return X?qv(X):null}),fe=()=>{!n.value||!i.hierarchical||i.toggleGroup(i.node.fullKey)};return(X,z)=>{const ae=Kl("DataCatalogTree",!0);return y(),x("div",null,[n.value?(y(),x("div",{key:0,id:ee.value||void 0,class:Ve(a.value)},[t.hierarchical?(y(),x(J,{key:0},[c("button",{type:"button",class:"flex w-full items-start gap-3 text-left transition hover:text-zinc-900 focus:outline-none",onClick:fe,"aria-expanded":o.value},[k(lt(Ik),{class:Ve(["mt-1.5 h-4 w-4 shrink-0 text-zinc-400 transition-transform",{"rotate-90 text-sky-500":o.value}])},null,8,["class"]),c("div",QD,[c("p",{class:Ve(d.value)},[(y(!0),x(J,null,ve($.value,(oe,H)=>(y(),x(J,{key:H},[oe.highlight?(y(),x("mark",ZD,F(oe.text),1)):(y(),x("span",eT,F(oe.text),1))],64))),128))],2),c("p",tT,F(l.value),1)]),c("span",sT,F(o.value?"Hide":"Show"),1)],8,XD),k(Sc,{name:"catalog-collapse"},{default:R(()=>[He(c("div",{class:Ve(u.value)},[(y(!0),x(J,null,ve(t.node.children,oe=>(y(),me(ae,{key:oe.fullKey,node:oe,depth:t.depth+1,"expanded-keys":t.expandedKeys,"auto-expanded-keys":t.autoExpandedKeys,"toggle-group":t.toggleGroup,"search-term":t.searchTerm,hierarchical:t.hierarchical,"pending-deletes":t.pendingDeletes,onEdit:z[0]||(z[0]=H=>s("edit",H)),onDelete:z[1]||(z[1]=H=>s("delete",H))},null,8,["node","depth","expanded-keys","auto-expanded-keys","toggle-group","search-term","hierarchical","pending-deletes"]))),128))],2),[[gt,o.value]])]),_:1})],64)):(y(),x(J,{key:1},[c("div",iT,[c("div",nT,[c("p",{class:Ve(d.value)},[(y(!0),x(J,null,ve($.value,(oe,H)=>(y(),x(J,{key:H},[oe.highlight?(y(),x("mark",rT,F(oe.text),1)):(y(),x("span",oT,F(oe.text),1))],64))),128))],2),c("p",lT,F(l.value),1)])]),c("div",{class:Ve(u.value)},[(y(!0),x(J,null,ve(t.node.children,oe=>(y(),me(ae,{key:oe.fullKey,node:oe,depth:t.depth+1,"expanded-keys":t.expandedKeys,"auto-expanded-keys":t.autoExpandedKeys,"toggle-group":t.toggleGroup,"search-term":t.searchTerm,hierarchical:t.hierarchical,"pending-deletes":t.pendingDeletes,onEdit:z[2]||(z[2]=H=>s("edit",H)),onDelete:z[3]||(z[3]=H=>s("delete",H))},null,8,["node","depth","expanded-keys","auto-expanded-keys","toggle-group","search-term","hierarchical","pending-deletes"]))),128))],2)],64))],10,YD)):(y(),x("div",{key:1,id:ee.value||void 0,class:Ve(w.value)},[c("div",uT,[c("div",dT,[c("h3",cT,[(y(!0),x(J,null,ve($.value,(oe,H)=>(y(),x(J,{key:`leaf-${H}`},[oe.highlight?(y(),x("mark",fT,F(oe.text),1)):(y(),x("span",hT,F(oe.text),1))],64))),128))]),t.node.data?.type?(y(),x("span",pT,F(t.node.data.type),1)):U("",!0)]),c("div",mT,[k($e,{size:"sm",variant:"secondary",class:Ve(S.value),onClick:z[4]||(z[4]=ht(oe=>s("delete",t.node),["stop"]))},{default:R(()=>[ie(F(h.value?"Undo":"Delete"),1)]),_:1},8,["class"]),k($e,{size:"sm",variant:"secondary",class:"shadow-none",onClick:z[5]||(z[5]=oe=>s("edit",t.node))},{default:R(()=>[...z[6]||(z[6]=[ie(" Edit ",-1)])]),_:1})])]),c("div",gT,[t.node.data?.description?(y(),x("div",yT,[z[7]||(z[7]=c("p",{class:"text-xs font-medium text-gray-600 dark:text-zinc-200"}," Description ",-1)),c("p",vT,F(t.node.data.description),1)])):U("",!0),t.node.fullKey?(y(),x("div",bT,[k(eo,{value:t.node.fullKey||"",successMessage:"Dot notation copied",variant:"bare",class:Ve(Fu),title:"Copy dot notation"},{default:R(({copied:oe})=>[oe?(y(),x("svg",kT,[...z[9]||(z[9]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(y(),x("svg",xT,[...z[8]||(z[8]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"},null,-1)])]))]),_:1},8,["value"]),c("div",wT,[z[10]||(z[10]=c("p",{class:"text-xs font-medium text-gray-700 dark:text-zinc-100"}," Location (in Dot Notation) ",-1)),c("p",ST,[N.value.length>0?(y(!0),x(J,{key:0},ve(N.value,(oe,H)=>(y(),x(J,{key:`key-${H}`},[oe.highlight?(y(),x("mark",CT,F(oe.text),1)):(y(),x("span",_T,F(oe.text),1))],64))),128)):(y(),x("span",AT,""))])])])):U("",!0),c("div",VT,[k(eo,{value:t.node.data?.path||"",successMessage:"Path copied",variant:"bare",class:Ve(Fu),title:"Copy path"},{default:R(({copied:oe})=>[oe?(y(),x("svg",DT,[...z[12]||(z[12]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(y(),x("svg",MT,[...z[11]||(z[11]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"},null,-1)])]))]),_:1},8,["value"]),c("div",TT,[z[13]||(z[13]=c("p",{class:"text-xs font-medium text-gray-700 dark:text-zinc-100"}," File Path ",-1)),c("p",ET,[T.value.length>0?(y(!0),x(J,{key:0},ve(T.value,(oe,H)=>(y(),x(J,{key:`path-${H}`},[oe.highlight?(y(),x("mark",$T,F(oe.text),1)):(y(),x("span",PT,F(oe.text),1))],64))),128)):(y(),x("span",OT,""))])])]),(y(!0),x(J,null,ve(m.value,(oe,H)=>(y(),x("div",{key:`meta-${H}`,class:"flex items-start justify-between gap-3 border-t border-gray-200 pt-4 text-sm dark:border-zinc-700"},[c("div",RT,[c("p",jT,F(I(H)),1),c("pre",LT,F(Z(oe)),1)])]))),128)),c("div",BT,[k(eo,{value:B.value,successMessage:"data_read() command copied",variant:"bare",class:Ve([Fu,"w-10"]),title:"Copy data_read() helper","aria-label":`Copy ${B.value}`},{default:R(({copied:oe})=>[oe?(y(),x("svg",UT,[...z[15]||(z[15]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(y(),x("svg",IT,[...z[14]||(z[14]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8z"},null,-1)])]))]),_:1},8,["value","class","aria-label"]),c("div",NT,[z[16]||(z[16]=c("p",{class:"text-xs font-medium text-gray-700 dark:text-zinc-100"}," Usage ",-1)),c("p",{class:"mt-1 font-mono text-sm leading-relaxed text-gray-900 dark:text-zinc-100 truncate",title:B.value},F(B.value),9,zT)])])])],10,aT))])}}}),HT=Hg(FT,[["__scopeId","data-v-20f9f092"]]),WT={key:0,class:"flex items-center justify-center h-96"},qT={key:1,class:"flex-1 p-10"},GT={key:2,class:"flex min-h-screen"},KT={class:"w-64 shrink-0 border-r border-gray-200 p-6 dark:border-gray-800"},JT={class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},YT={class:"flex items-center gap-2 mb-4"},XT={class:"text-xs text-gray-500 dark:text-gray-400 font-mono truncate"},QT={class:"space-y-1"},ZT={key:0,class:"ml-6 space-y-0.5 mt-1"},eE={key:1,class:"ml-6 space-y-0.5 mt-1"},tE=["href","onClick"],sE={key:2,class:"ml-6 space-y-0.5 mt-1"},iE={key:3,class:"ml-6 mt-1 space-y-0.5"},nE=["href","onClick"],rE={class:"truncate"},oE={key:0,class:"shrink-0 rounded-full bg-gray-100 px-2 py-0.5 text-[10px] font-medium text-gray-500 dark:bg-gray-800 dark:text-gray-300"},lE={class:"flex-1 p-10"},aE={id:"overview"},uE={class:"flex items-start justify-between mb-6"},dE={class:"text-2xl font-semibold text-gray-900 dark:text-white"},cE={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},fE={class:"grid grid-cols-2 gap-6"},hE={class:"text-sm text-gray-600 dark:text-gray-400"},pE={class:"text-sm text-gray-600 dark:text-gray-400"},mE={key:0},gE={class:"text-sm text-gray-600 dark:text-gray-400"},yE={key:1},vE={class:"text-sm text-gray-600 dark:text-gray-400"},bE={id:"settings"},xE={key:0},kE={key:1},wE={key:2},SE={class:"space-y-6"},CE={id:"settings-project",class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 scroll-mt-6"},_E={class:"space-y-4"},AE={class:"flex gap-4"},VE={class:"flex items-center gap-2 cursor-pointer"},ME={class:"flex items-center gap-2 cursor-pointer"},DE={class:"flex items-center gap-2 cursor-pointer"},TE={class:"flex items-center gap-2 cursor-pointer"},EE={key:0,id:"settings-author",class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 scroll-mt-6"},$E={class:"grid grid-cols-2 gap-4"},PE={key:1,id:"settings-options",class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 scroll-mt-6"},OE={class:"space-y-4"},RE={class:"grid grid-cols-2 gap-4"},jE={class:"flex gap-4"},LE={class:"flex items-center gap-2 cursor-pointer"},BE={class:"flex items-center gap-2 cursor-pointer"},IE={key:2,id:"settings-git",class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 scroll-mt-6"},UE={class:"space-y-4"},NE={class:"grid grid-cols-2 gap-4"},zE={key:3,id:"settings-ai",class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 scroll-mt-6"},FE={class:"flex justify-end gap-3 pt-4 border-t border-zinc-200 dark:border-zinc-700"},HE={id:"notebooks"},WE={class:"rounded-lg bg-gray-50 p-12 dark:bg-gray-800/50 text-center"},qE={id:"data"},GE={class:"mb-6 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},KE={class:"mb-6"},JE={key:0,class:"space-y-4"},YE={key:1,class:"mt-4 rounded-lg border border-red-200 bg-red-50 p-4 dark:border-red-500/40 dark:bg-red-900/20"},XE={class:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"},QE={class:"text-sm font-medium text-red-700 dark:text-red-200"},ZE={class:"flex gap-2"},e7={class:"mt-3 list-disc space-y-1 pl-5 text-xs font-mono text-red-700 dark:text-red-200/90"},t7={key:2,class:"rounded-xl border border-dashed border-zinc-300 bg-white/70 p-10 text-center dark:border-zinc-700 dark:bg-zinc-900/40"},s7={class:"text-sm font-medium text-zinc-700 dark:text-zinc-200"},i7={id:"connections"},n7={key:0},r7={key:1},o7={key:2},l7={class:"space-y-6"},a7={key:0,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},u7={key:1},d7={key:0,class:"rounded-lg bg-gray-50 p-12 dark:bg-gray-800/50 text-center"},c7={key:1,class:"space-y-4"},f7=["id"],h7=["onClick","title"],p7={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},m7={key:1,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},g7={class:"text-sm font-semibold text-gray-900 dark:text-white mb-4 font-mono pr-8"},y7={class:"space-y-4"},v7={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},b7=["onUpdate:modelValue","disabled"],x7={class:"flex justify-end gap-3 pt-4 border-t border-zinc-200 dark:border-zinc-700"},k7={id:"packages"},w7={key:0},S7={key:1},C7={key:2},_7={key:0,class:"rounded-lg bg-gray-50 p-12 dark:bg-gray-800/50 text-center mb-6"},A7={key:1,class:"space-y-6"},V7={class:"flex items-center justify-between"},M7={class:"flex gap-3"},D7={class:"rounded-lg bg-gray-50 dark:bg-gray-800/50 overflow-hidden"},T7={class:"w-full"},E7={class:"bg-white dark:bg-gray-900"},$7={class:"px-4 py-3"},P7=["onUpdate:modelValue"],O7={class:"px-4 py-3"},R7={class:"relative"},j7=["onUpdate:modelValue"],L7={class:"px-4 py-3 text-center"},B7=["onUpdate:modelValue"],I7={class:"px-4 py-3 text-center"},U7=["onClick"],N7={class:"flex items-center justify-between pt-4 border-t border-gray-200 dark:border-gray-700"},z7={class:"flex gap-3"},F7={id:"directories"},H7={key:0},W7={key:1},q7={key:2},G7={class:"space-y-6"},K7={id:"directory-work",class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 scroll-mt-6"},J7={class:"space-y-4"},Y7={id:"directory-inputs",class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 scroll-mt-6"},X7={class:"space-y-4"},Q7={id:"directory-private-outputs",class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 scroll-mt-6"},Z7={class:"space-y-4"},e$={id:"directory-public-outputs",class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 scroll-mt-6"},t$={class:"space-y-4"},s$={id:"directory-other",class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 scroll-mt-6"},i$={class:"space-y-4"},n$={class:"flex justify-end gap-3 pt-4 border-t border-zinc-200 dark:border-zinc-700"},r$={id:"env"},o$={key:0},l$={key:1},a$={key:2},u$={key:0,class:"space-y-6"},d$={key:0,class:"rounded-lg bg-gray-50 p-12 dark:bg-gray-800/50 text-center"},c$={key:1,class:"space-y-6"},f$={class:"flex items-center justify-between mb-4"},h$={class:"text-sm font-semibold text-gray-900 dark:text-white"},p$={class:"space-y-4"},m$={class:"flex items-start gap-3"},g$={class:"mt-2"},y$={class:"flex-1 grid grid-cols-2 gap-3"},v$=["value","onInput"],b$={class:"relative"},x$=["onUpdate:modelValue","onInput","type","placeholder"],k$=["onClick"],w$={key:0,class:"ml-10 text-xs text-zinc-500 dark:text-zinc-400"},S$={key:1,class:"ml-10 text-xs text-zinc-400 dark:text-zinc-500"},C$={class:"rounded-lg bg-gray-50 p-4 dark:bg-gray-800/50 border border-zinc-200 dark:border-zinc-700"},_$={class:"flex justify-end gap-3 pt-4 border-t border-zinc-200 dark:border-zinc-700"},A$={key:1,class:"space-y-6"},V$={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},M$={class:"flex justify-end gap-3 pt-4 border-t border-zinc-200 dark:border-zinc-700"},D$={class:"space-y-6"},T$={key:0,class:"max-h-64 overflow-y-auto border border-gray-200 dark:border-gray-700 rounded-md"},E$=["onClick","onMouseenter"],$$={class:"flex items-start justify-between gap-2"},P$={class:"flex-1 min-w-0"},O$={class:"text-sm font-mono font-medium text-gray-900 dark:text-gray-100"},R$={key:0,class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5 line-clamp-1"},j$={key:1,class:"text-xs text-gray-500 dark:text-gray-500 mt-0.5"},L$={class:"text-xs text-gray-500 dark:text-gray-500 font-mono shrink-0"},B$={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},I$={key:1,class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},U$={class:"relative"},N$={class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},z$={__name:"ProjectDetailView",setup(t){const e=_r(),s=Pa(),i=Oa(),n=he(null),r=he(!0),o=he(null),l=he("overview"),a=he(null),d=he(""),u=he(new Set),f=he(!1),h=he(null),m=he(!1),w=he(null),S=he(!1),_=he(new Set),M=he(!1),L=he(null),$=he({}),T=he(!1),N=he(null),B=he(!1),I=he(null),Z=he(!1),ee=he(null),fe=he(!1),X=he(new Set),z=he([]),ae=he(!1),oe=he(null),H=he(!1),g=he(!1),p=he(""),D=he([]),Y=he(!1),A=he(-1),be=he({name:"",source:"cran",auto_attach:!0}),ge=he({}),qe=he(!1),Ne=he(null),_t=he(!1),st=he({}),V=he({}),we=he(""),ke=he(!1),Ee=he(null),Fe=he(!1),E=he(!1),P=he({}),W=he("grouped"),Q=he(!1),se=j=>["flex items-center gap-2 px-3 py-2 rounded-md text-sm transition",l.value===j?"bg-sky-50 text-sky-700 font-medium dark:bg-sky-900/20 dark:text-sky-400":"text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-800"],te=()=>{const j=e.query.section;j&&["overview","settings","notebooks","data","connections","packages","directories","env"].includes(j)?l.value=j:l.value="overview"};Ye(l,j=>{s.replace({query:{...e.query,section:j}}),j==="settings"&&!L.value&&Tr(),j==="connections"&&!I.value&&Ka(),j==="packages"&&z.value.length===0&&Yo(),j==="directories"&&Object.keys(ge.value).length===0&&Xa(),j==="env"&&Object.keys(st.value).length===0&&Xo()}),Ye(()=>e.query.section,j=>{const v=["overview","settings","notebooks","data","connections","packages","directories","env"];j&&j!==l.value&&v.includes(j)&&(l.value=j)});let ye=null;Ye(p,()=>{ye&&clearTimeout(ye),ye=setTimeout(()=>{Yv()},300)});const re=(j="")=>j.split(/[._-]/).filter(Boolean).map(v=>v.charAt(0).toUpperCase()+v.slice(1)).join(" "),ue=j=>JSON.parse(JSON.stringify(j)),ce=j=>Array.isArray(j)?j.map((v,O)=>[String(O),v]):Object.entries(j),Oe=(j,v="",O=0)=>!j||typeof j!="object"?[]:ce(j).reduce((Ae,[Te,Re])=>{if(Re==null)return Ae;const At=v?`${v}.${Te}`:Te;if(typeof Re=="object"&&!Array.isArray(Re)&&Re.path)return Ae.push({type:"leaf",name:Te,displayName:re(Te),fullKey:At,data:Re,leafCount:1,depth:O}),Ae;if(typeof Re=="object"){const bt=Oe(Re,At,O+1);if(bt.length>0){const ks=bt.reduce((Ns,eu)=>Ns+(eu.leafCount||0),0);Ae.push({type:"group",name:Te,displayName:re(Te),fullKey:At,children:bt,leafCount:ks,depth:O})}}return Ae},[]),Ce=j=>j.slice().sort((v,O)=>v.displayName.localeCompare(O.displayName,void 0,{sensitivity:"base",numeric:!0})).map(v=>v.type==="group"?{...v,children:Ce(v.children)}:v),Pe=(j,v)=>{if(!v)return!0;const O=v.toLowerCase(),Ae=[j.displayName,j.name,j.fullKey];return j.type==="leaf"&&j.data?.path&&Ae.push(j.data.path),Ae.some(Te=>Te&&Te.toLowerCase().includes(O))},Le=(j,v)=>{if(!v)return{nodes:j,matchedKeys:new Set};const O=[],Ae=new Set;return j.forEach(Te=>{if(Te.type==="leaf"){Pe(Te,v)&&(O.push(Te),Ae.add(Te.fullKey));return}const Re=Le(Te.children,v);if(Pe(Te,v)||Re.nodes.length>0){const bt=Re.nodes,ks=bt.reduce((Ns,eu)=>Ns+(eu.leafCount||0),0);O.push({...Te,children:bt,leafCount:ks||Te.leafCount}),Ae.add(Te.fullKey),Re.matchedKeys.forEach(Ns=>Ae.add(Ns))}}),{nodes:O,matchedKeys:Ae}},Ue=le(()=>{const j=a.value;return!j||typeof j!="object"?[]:!Array.isArray(j)&&j.path?[{type:"leaf",name:j.name||"data",displayName:re(j.name||"data"),fullKey:j.name||"data",data:j,leafCount:1,depth:0}]:Ce(Oe(j))}),Ke=le(()=>d.value.trim().toLowerCase()),Je=le(()=>{const j=Ke.value;return j?Le(Ue.value,j):{nodes:Ue.value,matchedKeys:new Set}}),Dt=le(()=>Je.value.nodes),nt=le(()=>Je.value.matchedKeys),Lt=le(()=>Ke.value.length>0),is=le(()=>Lt.value?[]:(Ue.value||[]).filter(j=>(j.depth||0)===0).map(j=>{const v=j.fullKey||j.name||"";return{anchorId:v?qv(v):null,label:j.displayName||re(j.name||v||"data source"),count:j.leafCount||(j.type==="leaf"?1:0),nodeKey:v}}).filter(j=>j.anchorId&&j.label)),Is=le(()=>_.value.size>0),hn=le(()=>_.value.size),Xe=le(()=>Array.from(_.value)),Ut=j=>{let v=0;return j.forEach(O=>{v=Math.max(v,O.depth||0),O.type==="group"&&O.children&&(v=Math.max(v,Ut(O.children)))}),v},Fn=le(()=>Ut(Ue.value)),Hn=le(()=>Fn.value>2),Ga=(j,v,O)=>{const Ae=v.split(".").filter(Boolean);if(Ae.length===0)return null;const Te=ue(j||{});let Re=Te;for(let At=0;At<Ae.length-1;At++){const bt=Ae[At];(!Re[bt]||typeof Re[bt]!="object"||Array.isArray(Re[bt]))&&(Re[bt]={}),Re=Re[bt]}return Re[Ae[Ae.length-1]]=ue(O),Te},ei=(j,v)=>{if(!j||!v)return null;const O=v.split(".").filter(Boolean);if(O.length===0)return null;let Ae=j;for(let Te=0;Te<O.length;Te++){const Re=O[Te];if(!Ae||typeof Ae!="object"||!(Re in Ae))return null;Ae=Ae[Re]}return Ae},Us=j=>{const v=j.split(".").filter(Boolean);if(v.length<=1)return;const O=new Set(u.value);let Ae="";for(let Te=0;Te<v.length-1;Te++)Ae=Ae?`${Ae}.${v[Te]}`:v[Te],O.add(Ae);u.value=O},Vs=async(j,v)=>{if(!j)return;if(v){Us(v);const Ae=new Set(u.value);Ae.add(v),u.value=Ae}await En();const O=document.getElementById(j);O&&O.scrollIntoView({behavior:"smooth",block:"start"})},xs=async j=>{const v=await fetch(`/api/project/${e.params.id}/data`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:j})}),O=await v.json();if(!v.ok||O.error)throw new Error(O.error||"Failed to save data catalog")},Jo=j=>{j&&(S.value=!1,h.value={fullKey:j.fullKey,name:j.name,data:ue(j.data||{})},w.value=null,f.value=!0)},K=()=>{S.value=!0,h.value={fullKey:"",data:{}},w.value=null,f.value=!0},C=j=>{f.value=j,j||(h.value=null,w.value=null,m.value=!1,S.value=!1)},b=async j=>{if(!j||!j.fullKey||!j.data){w.value=j?.error||"Invalid data entry payload";return}const v=j.fullKey.trim(),O=!!j.isNew;if(!v){w.value="Dot notation key is required";return}if(O&&ei(a.value,v)){w.value="A data source with this key already exists";return}const Ae=ue(a.value),Te=Ga(a.value,v,j.data);if(!Te){w.value="Unable to write data entry to catalog";return}a.value=Te,m.value=!0,w.value=null;try{if(await xs(Te),Us(v),i.success(O?"Data Source Added":"Data Catalog Updated",O?"Data entry created successfully":"Data entry saved successfully"),f.value=!1,h.value=null,S.value=!1,_.value.has(v)){const Re=new Set(_.value);Re.delete(v),_.value=Re}}catch(Re){a.value=Ae,w.value=Re.message||"Failed to save data catalog",i.error("Save Failed",Re.message||"Failed to save data catalog")}finally{m.value=!1}},G=(j,v)=>{if(!j||!v)return null;const O=v.split(".").filter(Boolean);if(O.length===0)return null;const Ae=ue(j),Te=[];let Re=Ae;for(let bt=0;bt<O.length;bt++){const ks=O[bt];if(!Re||typeof Re!="object"||!(ks in Re))return null;Te.push({parent:Re,key:ks}),Re=Re[ks]}const At=Te.pop();if(!At)return null;delete At.parent[At.key];for(let bt=Te.length-1;bt>=0;bt--){const{parent:ks,key:Ns}=Te[bt];ks[Ns]&&typeof ks[Ns]=="object"&&!Array.isArray(ks[Ns])&&Object.keys(ks[Ns]).length===0&&delete ks[Ns]}return Ae},de=async()=>{if(!Is.value)return;M.value=!0;const j=ue(a.value);let v=ue(j);for(const O of _.value){const Ae=G(v,O);if(!Ae){i.error("Delete Failed",`Unable to locate ${O} in catalog`),M.value=!1;return}v=Ae}try{await xs(v),a.value=v,i.success("Data Catalog Updated","Staged deletions have been saved"),_.value=new Set}catch(O){i.error("Delete Failed",O.message||"Failed to save catalog changes")}finally{M.value=!1}},pe=j=>{if(!j||!j.fullKey)return;const v=new Set(_.value);v.has(j.fullKey)?v.delete(j.fullKey):v.add(j.fullKey),_.value=v},Qe=()=>{_.value=new Set},ns=j=>{const v=new Set(u.value);v.has(j)?v.delete(j):v.add(j),u.value=v},rs=async()=>{r.value=!0,o.value=null;try{const v=await(await fetch(`/api/project/${e.params.id}`)).json();v.error?o.value=v.error:n.value=v}catch(j){o.value="Failed to load project: "+j.message}finally{r.value=!1}},xi=async()=>{try{const v=await(await fetch(`/api/project/${e.params.id}/data`)).json();v.error||(a.value=v.data||v)}catch(j){console.error("Failed to load data catalog:",j)}},Tr=async()=>{T.value=!0,N.value=null;try{const v=await(await fetch(`/api/project/${e.params.id}/settings`)).json();v.error?N.value=v.error:(L.value=v.settings,$.value=JSON.parse(JSON.stringify(v.settings)))}catch(j){N.value="Failed to load settings: "+j.message}finally{T.value=!1}},df=async()=>{B.value=!0;try{const v=await(await fetch(`/api/project/${e.params.id}/settings`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify($.value)})).json();v.success?(i.success("Settings Saved","Project settings have been updated"),L.value=JSON.parse(JSON.stringify($.value)),await Tr()):i.error("Save Failed",v.error||"Failed to save settings")}catch(j){i.error("Save Failed",j.message)}finally{B.value=!1}},Gv=j=>{const v=document.getElementById(`connection-${j}`);v&&v.scrollIntoView({behavior:"smooth",block:"start"})},ti=j=>{const v=document.getElementById(j);v&&v.scrollIntoView({behavior:"smooth",block:"start"})},Kv=j=>{j&&Vs(j.anchorId,j.nodeKey)},Ka=async()=>{Z.value=!0,ee.value=null;try{const v=await(await fetch(`/api/project/${e.params.id}/connections`)).json();v.error?ee.value=v.error:I.value=v}catch(j){ee.value="Failed to load connections: "+j.message}finally{Z.value=!1}},Jv=j=>{X.value.has(j)?X.value.delete(j):X.value.add(j)},cf=async()=>{fe.value=!0;try{const j={...I.value};j.connections&&(j.connections=Object.fromEntries(Object.entries(j.connections).filter(([Ae])=>!X.value.has(Ae))));const O=await(await fetch(`/api/project/${e.params.id}/connections`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(j)})).json();O.success?(X.value.clear(),i.success("Connections Saved","Connection settings have been updated"),await Ka()):i.error("Save Failed",O.error||"Failed to save connections")}catch(j){i.error("Save Failed",j.message)}finally{fe.value=!1}},Yo=async()=>{ae.value=!0,oe.value=null;try{const v=await(await fetch(`/api/project/${e.params.id}/packages`)).json();v.error?oe.value=v.error:z.value=(v.packages||[]).map(O=>({name:O.name||"",source:O.source||"cran",auto_attach:O.auto_attach!==void 0?O.auto_attach:!0,ref:O.ref||""}))}catch(j){oe.value="Failed to load packages: "+j.message}finally{ae.value=!1}},Ja=async()=>{H.value=!0;try{const v=await(await fetch(`/api/project/${e.params.id}/packages`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({packages:z.value})})).json();v.success?(i.success("Packages Saved","Package configuration has been updated"),await Yo()):i.error("Save Failed",v.error||"Failed to save packages")}catch(j){i.error("Save Failed",j.message)}finally{H.value=!1}},Ya=()=>{be.value={name:"",source:"cran",auto_attach:!0},p.value="",D.value=[],A.value=-1,g.value=!0},Yv=async()=>{if(p.value.length<2){D.value=[],A.value=-1;return}Y.value=!0;try{const v=await(await fetch(`/api/packages/search?q=${encodeURIComponent(p.value)}`)).json();console.log("Package search results:",v),D.value=v.packages||[],A.value=D.value.length>0?0:-1}catch(j){console.error("Failed to search packages:",j),D.value=[],A.value=-1}finally{Y.value=!1}},Xv=j=>{D.value.length!==0&&(j.key==="ArrowDown"?(j.preventDefault(),A.value=Math.min(A.value+1,D.value.length-1)):j.key==="ArrowUp"?(j.preventDefault(),A.value=Math.max(A.value-1,0)):j.key==="Enter"&&A.value>=0?(j.preventDefault(),ff(D.value[A.value])):j.key==="Escape"&&(D.value=[],A.value=-1))},ff=j=>{be.value.name=j.name,be.value.source=j.source,p.value="",D.value=[],A.value=-1},Qv=()=>{be.value.name.trim()&&(z.value.push({name:be.value.name.trim(),source:be.value.source,auto_attach:be.value.auto_attach}),g.value=!1,i.success("Package Added",`${be.value.name} added to package list`))},Zv=j=>{z.value.splice(j,1)},Xa=async()=>{qe.value=!0,Ne.value=null;try{const v=await(await fetch(`/api/project/${e.params.id}/directories`)).json();v.error?Ne.value=v.error:ge.value=v.directories||{}}catch(j){Ne.value="Failed to load directories: "+j.message}finally{qe.value=!1}},hf=async()=>{_t.value=!0;try{const v=await(await fetch(`/api/project/${e.params.id}/directories`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({directories:ge.value})})).json();v.success?(i.success("Directories Saved","Directory configuration has been updated"),await Xa()):i.error("Save Failed",v.error||"Failed to save directories")}catch(j){i.error("Save Failed",j.message)}finally{_t.value=!1}},Xo=async()=>{ke.value=!0,Ee.value=null;try{const v=await(await fetch(`/api/project/${e.params.id}/env`)).json();v.error?Ee.value=v.error:(st.value=v.variables||{},V.value=v.groups||{},we.value=v.raw_content||"")}catch(j){Ee.value="Failed to load .env: "+j.message}finally{ke.value=!1}},Qa=async()=>{Fe.value=!0;try{const j=W.value==="raw"?{raw_content:we.value}:{variables:st.value,regroup:Q.value},O=await(await fetch(`/api/project/${e.params.id}/env`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(j)})).json();O.success?(i.success(".env Saved","Environment variables have been updated"),await Xo()):i.error("Save Failed",O.error||"Failed to save .env")}catch(j){i.error("Save Failed",j.message)}finally{Fe.value=!1}},pf=()=>{const j=`NEW_VARIABLE_${Object.keys(st.value).length+1}`;st.value[j]=""},e1=j=>{delete st.value[j]},Za=j=>["PASSWORD","SECRET","KEY","TOKEN","CREDENTIAL"].some(O=>j.toUpperCase().includes(O)),t1=j=>{P.value[j]=!P.value[j]},mf=j=>E.value||P.value[j]||!Za(j),gf=j=>{(j.metaKey||j.ctrlKey)&&j.key==="s"&&(j.preventDefault(),l.value==="settings"?df():l.value==="connections"?cf():l.value==="packages"?Ja():l.value==="directories"?hf():l.value==="env"&&Qa())};return es(()=>{te(),rs(),xi(),window.addEventListener("keydown",gf)}),Cr(()=>{window.removeEventListener("keydown",gf)}),(j,v)=>(y(),x("div",null,[r.value?(y(),x("div",WT,[...v[68]||(v[68]=[c("div",{class:"text-zinc-600 dark:text-zinc-400"},"Loading project...",-1)])])):o.value?(y(),x("div",qT,[k(Ai,{type:"error",title:"Error Loading Project",description:o.value},null,8,["description"])])):n.value?(y(),x("div",GT,[c("nav",KT,[c("h2",JT,F(n.value.name),1),c("div",YT,[c("span",XT,F(n.value.path),1),k(eo,{value:n.value.path,variant:"ghost",successMessage:"Path copied",class:"shrink-0"},null,8,["value"])]),c("div",QT,[c("a",{href:"#overview",onClick:v[0]||(v[0]=ht(O=>l.value="overview",["prevent"])),class:Ve(se("overview"))},[k(lt(Fg),{class:"h-4 w-4"}),v[69]||(v[69]=ie(" Overview ",-1))],2),v[77]||(v[77]=c("div",{class:"pt-4 pb-2"},[c("h3",{class:"px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider dark:text-gray-400"}," Settings ")],-1)),c("a",{href:"#settings",onClick:v[1]||(v[1]=ht(O=>l.value="settings",["prevent"])),class:Ve(se("settings"))},[k(lt(Nk),{class:"h-4 w-4"}),v[70]||(v[70]=ie(" Project Settings ",-1))],2),l.value==="settings"?(y(),x("div",ZT,[c("a",{href:"#settings-project",onClick:v[2]||(v[2]=ht(O=>ti("settings-project"),["prevent"])),class:"flex items-center gap-2 px-3 py-1 rounded-md text-xs text-gray-600 hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-gray-800 transition"}," Project Information "),c("a",{href:"#settings-author",onClick:v[3]||(v[3]=ht(O=>ti("settings-author"),["prevent"])),class:"flex items-center gap-2 px-3 py-1 rounded-md text-xs text-gray-600 hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-gray-800 transition"}," Author Information "),c("a",{href:"#settings-options",onClick:v[4]||(v[4]=ht(O=>ti("settings-options"),["prevent"])),class:"flex items-center gap-2 px-3 py-1 rounded-md text-xs text-gray-600 hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-gray-800 transition"}," Project Options "),c("a",{href:"#settings-git",onClick:v[5]||(v[5]=ht(O=>ti("settings-git"),["prevent"])),class:"flex items-center gap-2 px-3 py-1 rounded-md text-xs text-gray-600 hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-gray-800 transition"}," Git Configuration "),c("a",{href:"#settings-ai",onClick:v[6]||(v[6]=ht(O=>ti("settings-ai"),["prevent"])),class:"flex items-center gap-2 px-3 py-1 rounded-md text-xs text-gray-600 hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-gray-800 transition"}," AI Assistant ")])):U("",!0),c("a",{href:"#connections",onClick:v[7]||(v[7]=ht(O=>l.value="connections",["prevent"])),class:Ve(se("connections"))},[k(lt(Sh),{class:"h-4 w-4"}),v[71]||(v[71]=ie(" Connections ",-1))],2),l.value==="connections"&&I.value&&I.value.connections?(y(),x("div",eE,[(y(!0),x(J,null,ve(I.value.connections,(O,Ae)=>(y(),x("a",{key:Ae,href:`#connection-${Ae}`,onClick:ht(Te=>Gv(Ae),["prevent"]),class:"flex items-center gap-2 px-3 py-1 rounded-md text-xs text-gray-600 hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-gray-800 transition"},F(Ae),9,tE))),128))])):U("",!0),c("a",{href:"#packages",onClick:v[8]||(v[8]=ht(O=>l.value="packages",["prevent"])),class:Ve(se("packages"))},[k(lt(xh),{class:"h-4 w-4"}),v[72]||(v[72]=ie(" Packages ",-1))],2),c("a",{href:"#directories",onClick:v[9]||(v[9]=ht(O=>l.value="directories",["prevent"])),class:Ve(se("directories"))},[k(lt(Wk),{class:"h-4 w-4"}),v[73]||(v[73]=ie(" Directories ",-1))],2),l.value==="directories"?(y(),x("div",sE,[c("a",{href:"#directory-work",onClick:v[10]||(v[10]=ht(O=>ti("directory-work"),["prevent"])),class:"flex items-center gap-2 px-3 py-1 rounded-md text-xs text-gray-600 hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-gray-800 transition"}," Work Directories "),c("a",{href:"#directory-inputs",onClick:v[11]||(v[11]=ht(O=>ti("directory-inputs"),["prevent"])),class:"flex items-center gap-2 px-3 py-1 rounded-md text-xs text-gray-600 hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-gray-800 transition"}," Input Directories "),c("a",{href:"#directory-private-outputs",onClick:v[12]||(v[12]=ht(O=>ti("directory-private-outputs"),["prevent"])),class:"flex items-center gap-2 px-3 py-1 rounded-md text-xs text-gray-600 hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-gray-800 transition"}," Private Outputs "),c("a",{href:"#directory-public-outputs",onClick:v[13]||(v[13]=ht(O=>ti("directory-public-outputs"),["prevent"])),class:"flex items-center gap-2 px-3 py-1 rounded-md text-xs text-gray-600 hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-gray-800 transition"}," Public Outputs "),c("a",{href:"#directory-other",onClick:v[14]||(v[14]=ht(O=>ti("directory-other"),["prevent"])),class:"flex items-center gap-2 px-3 py-1 rounded-md text-xs text-gray-600 hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-gray-800 transition"}," Other ")])):U("",!0),c("a",{href:"#data",onClick:v[15]||(v[15]=ht(O=>l.value="data",["prevent"])),class:Ve(se("data"))},[k(lt(Uk),{class:"h-4 w-4"}),v[74]||(v[74]=ie(" Data ",-1))],2),l.value==="data"&&is.value.length?(y(),x("div",iE,[(y(!0),x(J,null,ve(is.value,O=>(y(),x("a",{key:O.anchorId,href:`#${O.anchorId}`,onClick:ht(Ae=>Kv(O),["prevent"]),class:"flex items-center justify-between gap-2 rounded-md px-3 py-1 text-xs text-gray-600 transition hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-gray-800"},[c("span",rE,F(O.label),1),O.count?(y(),x("span",oE,F(O.count),1)):U("",!0)],8,nE))),128))])):U("",!0),c("a",{href:"#env",onClick:v[16]||(v[16]=ht(O=>l.value="env",["prevent"])),class:Ve(se("env"))},[k(lt(wh),{class:"h-4 w-4"}),v[75]||(v[75]=ie(" .env ",-1))],2),v[78]||(v[78]=c("div",{class:"pt-4 pb-2"},[c("h3",{class:"px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider dark:text-gray-400"}," Outputs ")],-1)),c("a",{href:"#notebooks",onClick:v[17]||(v[17]=ht(O=>l.value="notebooks",["prevent"])),class:Ve(se("notebooks"))},[k(lt(kh),{class:"h-4 w-4"}),v[76]||(v[76]=ie(" Notebooks ",-1))],2)])]),c("div",lE,[He(c("div",aE,[c("div",uE,[c("div",null,[c("h2",dE,F(n.value.name),1),k(Vn,{variant:"sky",class:"mt-2"},{default:R(()=>[ie(F(n.value.type),1)]),_:1})])]),c("div",cE,[v[83]||(v[83]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Project Information",-1)),c("div",fE,[c("div",null,[v[79]||(v[79]=c("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Project Type ",-1)),c("p",hE,F(n.value.type),1)]),c("div",null,[v[80]||(v[80]=c("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Created ",-1)),c("p",pE,F(n.value.created),1)]),n.value.author?(y(),x("div",mE,[v[81]||(v[81]=c("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Author ",-1)),c("p",gE,F(n.value.author),1)])):U("",!0),n.value.author_email?(y(),x("div",yE,[v[82]||(v[82]=c("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Email ",-1)),c("p",vE,F(n.value.author_email),1)])):U("",!0)])])],512),[[gt,l.value==="overview"]]),He(c("div",bE,[T.value?(y(),x("div",xE,[...v[84]||(v[84]=[c("div",{class:"text-center py-12 text-zinc-500 dark:text-zinc-400"}," Loading settings... ",-1)])])):N.value?(y(),x("div",kE,[k(Ai,{type:"error",title:"Error Loading Settings",description:N.value},null,8,["description"])])):(y(),x("div",wE,[v[99]||(v[99]=c("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Project Settings",-1)),v[100]||(v[100]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Configure settings for this project. ",-1)),c("div",SE,[c("div",CE,[v[90]||(v[90]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Project Information",-1)),c("div",_E,[k(q,{modelValue:$.value.project_name,"onUpdate:modelValue":v[18]||(v[18]=O=>$.value.project_name=O),label:"Project Name",hint:"Display name for this project"},null,8,["modelValue"]),c("div",null,[v[89]||(v[89]=c("label",{class:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-2"}," Project Type ",-1)),c("div",AE,[c("label",VE,[He(c("input",{type:"radio","onUpdate:modelValue":v[19]||(v[19]=O=>$.value.project_type=O),value:"project",class:"text-sky-600 focus:ring-sky-500"},null,512),[[xn,$.value.project_type]]),v[85]||(v[85]=c("span",{class:"text-sm text-zinc-700 dark:text-zinc-300"},"Project",-1))]),c("label",ME,[He(c("input",{type:"radio","onUpdate:modelValue":v[20]||(v[20]=O=>$.value.project_type=O),value:"course",class:"text-sky-600 focus:ring-sky-500"},null,512),[[xn,$.value.project_type]]),v[86]||(v[86]=c("span",{class:"text-sm text-zinc-700 dark:text-zinc-300"},"Course",-1))]),c("label",DE,[He(c("input",{type:"radio","onUpdate:modelValue":v[21]||(v[21]=O=>$.value.project_type=O),value:"presentation",class:"text-sky-600 focus:ring-sky-500"},null,512),[[xn,$.value.project_type]]),v[87]||(v[87]=c("span",{class:"text-sm text-zinc-700 dark:text-zinc-300"},"Presentation",-1))]),c("label",TE,[He(c("input",{type:"radio","onUpdate:modelValue":v[22]||(v[22]=O=>$.value.project_type=O),value:"project_sensitive",class:"text-sky-600 focus:ring-sky-500"},null,512),[[xn,$.value.project_type]]),v[88]||(v[88]=c("span",{class:"text-sm text-zinc-700 dark:text-zinc-300"},"Sensitive",-1))])])])])]),$.value.author?(y(),x("div",EE,[v[91]||(v[91]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Author Information",-1)),c("div",$E,[k(q,{modelValue:$.value.author.name,"onUpdate:modelValue":v[23]||(v[23]=O=>$.value.author.name=O),label:"Author Name"},null,8,["modelValue"]),k(q,{modelValue:$.value.author.email,"onUpdate:modelValue":v[24]||(v[24]=O=>$.value.author.email=O),label:"Email",type:"email"},null,8,["modelValue"]),k(q,{modelValue:$.value.author.affiliation,"onUpdate:modelValue":v[25]||(v[25]=O=>$.value.author.affiliation=O),label:"Affiliation",class:"col-span-2"},null,8,["modelValue"])])])):U("",!0),$.value.options?(y(),x("div",PE,[v[95]||(v[95]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Project Options",-1)),c("div",OE,[c("div",RE,[c("div",null,[v[94]||(v[94]=c("label",{class:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-2"}," Default Notebook Format ",-1)),c("div",jE,[c("label",LE,[He(c("input",{type:"radio","onUpdate:modelValue":v[26]||(v[26]=O=>$.value.options.default_notebook_format=O),value:"quarto",class:"text-sky-600 focus:ring-sky-500"},null,512),[[xn,$.value.options.default_notebook_format]]),v[92]||(v[92]=c("span",{class:"text-sm text-zinc-700 dark:text-zinc-300"},"Quarto",-1))]),c("label",BE,[He(c("input",{type:"radio","onUpdate:modelValue":v[27]||(v[27]=O=>$.value.options.default_notebook_format=O),value:"rmarkdown",class:"text-sky-600 focus:ring-sky-500"},null,512),[[xn,$.value.options.default_notebook_format]]),v[93]||(v[93]=c("span",{class:"text-sm text-zinc-700 dark:text-zinc-300"},"RMarkdown",-1))])])]),k(q,{modelValue:$.value.options.seed,"onUpdate:modelValue":v[28]||(v[28]=O=>$.value.options.seed=O),modelModifiers:{number:!0},label:"Random Seed",type:"number",hint:"For reproducibility (YYYYMMDD format)"},null,8,["modelValue"])]),k(Be,{modelValue:$.value.options.seed_on_scaffold,"onUpdate:modelValue":v[29]||(v[29]=O=>$.value.options.seed_on_scaffold=O),label:"Set Seed on Scaffold",description:"Automatically set random seed when loading project"},null,8,["modelValue"])])])):U("",!0),$.value.git?(y(),x("div",IE,[v[96]||(v[96]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Git Configuration",-1)),c("div",UE,[k(q,{modelValue:$.value.git.url,"onUpdate:modelValue":v[30]||(v[30]=O=>$.value.git.url=O),label:"Repository URL",hint:"Git repository URL for this project"},null,8,["modelValue"]),c("div",NE,[k(q,{modelValue:$.value.git.author,"onUpdate:modelValue":v[31]||(v[31]=O=>$.value.git.author=O),label:"Git Author"},null,8,["modelValue"]),k(q,{modelValue:$.value.git.email,"onUpdate:modelValue":v[32]||(v[32]=O=>$.value.git.email=O),label:"Git Email",type:"email"},null,8,["modelValue"])])])])):U("",!0),$.value.ai?(y(),x("div",zE,[v[97]||(v[97]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"AI Assistant Configuration",-1)),k(q,{modelValue:$.value.ai.canonical_file,"onUpdate:modelValue":v[33]||(v[33]=O=>$.value.ai.canonical_file=O),label:"Canonical AI File",hint:"Main file for AI context (e.g., CLAUDE.md)"},null,8,["modelValue"])])):U("",!0),c("div",FE,[k($e,{variant:"secondary",onClick:Tr},{default:R(()=>[...v[98]||(v[98]=[ie(" Reset ",-1)])]),_:1}),k($e,{variant:"primary",onClick:df,disabled:B.value},{default:R(()=>[ie(F(B.value?"Saving...":"Save Settings"),1)]),_:1},8,["disabled"])])])]))],512),[[gt,l.value==="settings"]]),He(c("div",HE,[v[102]||(v[102]=c("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Rendered Notebooks",-1)),v[103]||(v[103]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Browse and access your rendered Quarto/RMarkdown notebooks. ",-1)),c("div",WE,[k(lt(kh),{class:"h-12 w-12 mx-auto mb-4 text-gray-400"}),v[101]||(v[101]=c("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Notebook browser coming soon... ",-1))])],512),[[gt,l.value==="notebooks"]]),He(c("div",qE,[c("div",GE,[v[105]||(v[105]=c("div",null,[c("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white"},"Data Catalog"),c("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Browse your project's data sources with copy commands. ")],-1)),k($e,{variant:"primary",size:"sm",class:"inline-flex items-center gap-2",onClick:K},{default:R(()=>[k(lt(qk),{class:"h-4 w-4"}),v[104]||(v[104]=ie(" Add Data Source ",-1))]),_:1})]),c("div",KE,[k(q,{modelValue:d.value,"onUpdate:modelValue":v[34]||(v[34]=O=>d.value=O),label:"Search data sources",placeholder:"Filter by name, prefix, or file path"},null,8,["modelValue"])]),Dt.value.length>0?(y(),x("div",JE,[(y(!0),x(J,null,ve(Dt.value,O=>(y(),me(HT,{key:O.fullKey,node:O,"expanded-keys":u.value,"auto-expanded-keys":nt.value,"toggle-group":ns,"search-term":d.value,hierarchical:Hn.value,"pending-deletes":_.value,onEdit:Jo,onDelete:pe},null,8,["node","expanded-keys","auto-expanded-keys","search-term","hierarchical","pending-deletes"]))),128))])):U("",!0),Is.value?(y(),x("div",YE,[c("div",XE,[c("div",null,[c("p",QE,F(hn.value)+" data source"+F(hn.value===1?"":"s")+" marked for deletion. ",1),v[106]||(v[106]=c("p",{class:"text-xs text-red-600 dark:text-red-200/80"}," Changes will be applied when you save. ",-1))]),c("div",ZE,[k($e,{variant:"secondary",size:"sm",class:"shadow-none",disabled:M.value,onClick:Qe},{default:R(()=>[...v[107]||(v[107]=[ie(" Cancel ",-1)])]),_:1},8,["disabled"]),k($e,{size:"sm",class:"bg-red-600 text-white hover:bg-red-500 focus-visible:outline-red-600 dark:bg-red-500 dark:hover:bg-red-400",disabled:M.value,onClick:de},{default:R(()=>[ie(F(M.value?"Saving":"Save Changes"),1)]),_:1},8,["disabled"])])]),c("ul",e7,[(y(!0),x(J,null,ve(Xe.value,O=>(y(),x("li",{key:O},F(O),1))),128))])])):Lt.value?(y(),x("div",t7,[c("p",s7,' No data sources match "'+F(d.value)+'". ',1),v[108]||(v[108]=c("p",{class:"mt-2 text-xs text-zinc-500 dark:text-zinc-400"}," Try adjusting your search terms or clearing the filter. ",-1))])):(y(),x(J,{key:3},[!Is.value&&(!a.value||Object.keys(a.value||{}).length===0)?(y(),me(wD,{key:0,title:"No Data Sources",description:"This project doesn't have any data sources defined in its settings",icon:"database"})):U("",!0)],64))],512),[[gt,l.value==="data"]]),k(JD,{mode:S.value?"create":"edit",modelValue:f.value,"onUpdate:modelValue":[v[35]||(v[35]=O=>f.value=O),C],entry:h.value,saving:m.value,error:w.value,onSave:b},null,8,["mode","modelValue","entry","saving","error"]),He(c("div",i7,[Z.value?(y(),x("div",n7,[...v[109]||(v[109]=[c("div",{class:"text-center py-12 text-zinc-500 dark:text-zinc-400"}," Loading connections... ",-1)])])):ee.value?(y(),x("div",r7,[k(Ai,{type:"error",title:"Error Loading Connections",description:ee.value},null,8,["description"])])):(y(),x("div",o7,[v[115]||(v[115]=c("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Connections",-1)),v[116]||(v[116]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Manage database and external service connections for this project. ",-1)),c("div",l7,[I.value&&I.value.options?(y(),x("div",a7,[v[110]||(v[110]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Connection Options",-1)),k(q,{modelValue:I.value.options.default_connection,"onUpdate:modelValue":v[36]||(v[36]=O=>I.value.options.default_connection=O),label:"Default Connection",hint:"Name of the default connection to use"},null,8,["modelValue"])])):U("",!0),I.value&&I.value.connections?(y(),x("div",u7,[Object.keys(I.value.connections).length===0?(y(),x("div",d7,[k(lt(Sh),{class:"h-12 w-12 mx-auto mb-4 text-gray-400"}),v[111]||(v[111]=c("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," No connections defined yet ",-1))])):(y(),x("div",c7,[(y(!0),x(J,null,ve(I.value.connections,(O,Ae)=>(y(),x("div",{key:Ae,id:`connection-${Ae}`,class:Ve(["rounded-lg p-6 scroll-mt-6 relative transition",X.value.has(Ae)?"bg-red-50 dark:bg-red-900/10 opacity-60":"bg-gray-50 dark:bg-gray-800/50"])},[c("button",{onClick:Te=>Jv(Ae),class:Ve(["absolute top-3 right-3 p-1.5 rounded-md border border-gray-300 transition dark:border-gray-600",X.value.has(Ae)?"text-gray-600 hover:bg-gray-100 hover:border-gray-400 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:border-gray-500":"text-red-700 hover:bg-gray-100 hover:border-red-600 dark:text-red-400 dark:hover:bg-gray-700 dark:hover:border-red-500"]),title:X.value.has(Ae)?"Undo delete":"Delete connection"},[X.value.has(Ae)?(y(),x("svg",p7,[...v[112]||(v[112]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3"},null,-1)])])):(y(),x("svg",m7,[...v[113]||(v[113]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"},null,-1)])]))],10,h7),c("div",{class:Ve({"line-through opacity-50":X.value.has(Ae)})},[c("h3",g7,F(Ae),1),c("div",y7,[(y(!0),x(J,null,ve(O,(Te,Re)=>(y(),x("div",{key:Re},[c("label",v7,F(Re),1),He(c("input",{"onUpdate:modelValue":At=>I.value.connections[Ae][Re]=At,type:"text",disabled:X.value.has(Ae),class:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 px-3 py-2 text-sm text-gray-900 dark:text-gray-100 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500 font-mono disabled:opacity-50 disabled:cursor-not-allowed"},null,8,b7),[[Ki,I.value.connections[Ae][Re]]])]))),128))])],2)],10,f7))),128))]))])):U("",!0),c("div",x7,[k($e,{variant:"secondary",onClick:Ka},{default:R(()=>[...v[114]||(v[114]=[ie(" Reset ",-1)])]),_:1}),k($e,{variant:"primary",onClick:cf,disabled:fe.value},{default:R(()=>[ie(F(fe.value?"Saving...":"Save Connections"),1)]),_:1},8,["disabled"])])])]))],512),[[gt,l.value==="connections"]]),He(c("div",k7,[ae.value?(y(),x("div",w7,[...v[117]||(v[117]=[c("div",{class:"text-center py-12"},[c("div",{class:"text-sm text-gray-500 dark:text-gray-400"},"Loading packages...")],-1)])])):oe.value?(y(),x("div",S7,[k(Ai,{type:"error",title:"Error Loading Packages",description:oe.value},null,8,["description"])])):(y(),x("div",C7,[v[127]||(v[127]=c("div",{class:"mb-6"},[c("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Package Management"),c("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Manage R packages for this project. Packages with auto-attach will be loaded when scaffold() runs. ")],-1)),z.value.length===0?(y(),x("div",_7,[k(lt(xh),{class:"h-12 w-12 mx-auto mb-4 text-gray-400"}),v[119]||(v[119]=c("p",{class:"text-sm text-gray-500 dark:text-gray-400 mb-4"}," No packages configured ",-1)),k($e,{variant:"primary",onClick:Ya},{default:R(()=>[...v[118]||(v[118]=[ie(" Add Your First Package ",-1)])]),_:1})])):(y(),x("div",A7,[c("div",V7,[k($e,{variant:"primary",size:"sm",onClick:Ya},{default:R(()=>[...v[120]||(v[120]=[ie(" + Add Package ",-1)])]),_:1}),c("div",M7,[k($e,{variant:"secondary",onClick:Yo},{default:R(()=>[...v[121]||(v[121]=[ie(" Reset ",-1)])]),_:1}),k($e,{variant:"primary",onClick:Ja,disabled:H.value},{default:R(()=>[ie(F(H.value?"Saving...":"Save Packages"),1)]),_:1},8,["disabled"])])]),c("div",D7,[c("table",T7,[v[124]||(v[124]=c("thead",null,[c("tr",{class:"border-b border-gray-200 dark:border-gray-700"},[c("th",{class:"px-4 py-3 text-left text-xs font-semibold text-gray-700 dark:text-gray-300"}," Package Name "),c("th",{class:"px-4 py-3 text-left text-xs font-semibold text-gray-700 dark:text-gray-300"}," Source "),c("th",{class:"px-4 py-3 text-center text-xs font-semibold text-gray-700 dark:text-gray-300"}," Auto-attach "),c("th",{class:"px-4 py-3 text-center text-xs font-semibold text-gray-700 dark:text-gray-300 w-20"}," Actions ")])],-1)),c("tbody",E7,[(y(!0),x(J,null,ve(z.value,(O,Ae)=>(y(),x("tr",{key:Ae,class:"border-b border-gray-200 dark:border-gray-700 last:border-b-0"},[c("td",$7,[He(c("input",{"onUpdate:modelValue":Te=>O.name=Te,type:"text",placeholder:"dplyr",class:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 px-3 py-2 text-sm text-gray-900 dark:text-gray-100 font-mono focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500"},null,8,P7),[[Ki,O.name]])]),c("td",O7,[c("div",R7,[He(c("select",{"onUpdate:modelValue":Te=>O.source=Te,class:"w-full appearance-none rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 pl-3 pr-10 py-2 text-sm text-gray-900 dark:text-gray-100 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500"},[...v[122]||(v[122]=[c("option",{value:"cran"},"CRAN",-1),c("option",{value:"github"},"GitHub",-1),c("option",{value:"bioc"},"Bioconductor",-1)])],8,j7),[[nd,O.source]]),v[123]||(v[123]=c("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},[c("svg",{class:"h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))])]),c("td",L7,[He(c("input",{"onUpdate:modelValue":Te=>O.auto_attach=Te,type:"checkbox",style:{"accent-color":"rgb(2, 132, 199)"},class:"h-4 w-4 rounded border-gray-300 focus:ring-sky-500 dark:border-gray-600"},null,8,B7),[[Dg,O.auto_attach]])]),c("td",I7,[c("button",{onClick:Te=>Zv(Ae),class:"text-xs text-gray-600 hover:text-gray-900 font-medium dark:text-gray-400 dark:hover:text-gray-200"}," Delete ",8,U7)])]))),128))])])]),c("div",N7,[k($e,{variant:"primary",size:"sm",onClick:Ya},{default:R(()=>[...v[125]||(v[125]=[ie(" + Add Package ",-1)])]),_:1}),c("div",z7,[k($e,{variant:"secondary",onClick:Yo},{default:R(()=>[...v[126]||(v[126]=[ie(" Reset ",-1)])]),_:1}),k($e,{variant:"primary",onClick:Ja,disabled:H.value},{default:R(()=>[ie(F(H.value?"Saving...":"Save Packages"),1)]),_:1},8,["disabled"])])])]))]))],512),[[gt,l.value==="packages"]]),He(c("div",F7,[qe.value?(y(),x("div",H7,[...v[128]||(v[128]=[c("div",{class:"text-center py-12"},[c("div",{class:"text-sm text-gray-500 dark:text-gray-400"},"Loading directories...")],-1)])])):Ne.value?(y(),x("div",W7,[k(Ai,{type:"error",title:"Error Loading Directories",description:Ne.value},null,8,["description"])])):(y(),x("div",q7,[v[135]||(v[135]=c("div",{class:"mb-6"},[c("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Project Directories"),c("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Override directory structure for this project. Leave empty to use global defaults. ")],-1)),c("div",G7,[c("div",K7,[v[129]||(v[129]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Work Directories",-1)),c("div",J7,[k(q,{modelValue:ge.value.notebooks,"onUpdate:modelValue":v[37]||(v[37]=O=>ge.value.notebooks=O),label:"Notebooks",placeholder:"notebooks"},null,8,["modelValue"]),k(q,{modelValue:ge.value.scripts,"onUpdate:modelValue":v[38]||(v[38]=O=>ge.value.scripts=O),label:"Scripts",placeholder:"scripts"},null,8,["modelValue"]),k(q,{modelValue:ge.value.functions,"onUpdate:modelValue":v[39]||(v[39]=O=>ge.value.functions=O),label:"Functions",placeholder:"functions"},null,8,["modelValue"])])]),c("div",Y7,[v[130]||(v[130]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Input Directories",-1)),c("div",X7,[k(q,{modelValue:ge.value.inputs_raw,"onUpdate:modelValue":v[40]||(v[40]=O=>ge.value.inputs_raw=O),label:"Raw Inputs",placeholder:"inputs/raw"},null,8,["modelValue"]),k(q,{modelValue:ge.value.inputs_intermediate,"onUpdate:modelValue":v[41]||(v[41]=O=>ge.value.inputs_intermediate=O),label:"Intermediate Inputs",placeholder:"inputs/intermediate"},null,8,["modelValue"]),k(q,{modelValue:ge.value.inputs_final,"onUpdate:modelValue":v[42]||(v[42]=O=>ge.value.inputs_final=O),label:"Final Inputs",placeholder:"inputs/final"},null,8,["modelValue"]),k(q,{modelValue:ge.value.reference,"onUpdate:modelValue":v[43]||(v[43]=O=>ge.value.reference=O),label:"Reference Materials",placeholder:"reference"},null,8,["modelValue"])])]),c("div",Q7,[v[131]||(v[131]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Private Outputs",-1)),c("div",Z7,[k(q,{modelValue:ge.value.outputs_tables,"onUpdate:modelValue":v[44]||(v[44]=O=>ge.value.outputs_tables=O),label:"Tables",placeholder:"outputs/private/tables"},null,8,["modelValue"]),k(q,{modelValue:ge.value.outputs_figures,"onUpdate:modelValue":v[45]||(v[45]=O=>ge.value.outputs_figures=O),label:"Figures",placeholder:"outputs/private/figures"},null,8,["modelValue"]),k(q,{modelValue:ge.value.outputs_models,"onUpdate:modelValue":v[46]||(v[46]=O=>ge.value.outputs_models=O),label:"Models",placeholder:"outputs/private/models"},null,8,["modelValue"]),k(q,{modelValue:ge.value.outputs_notebooks,"onUpdate:modelValue":v[47]||(v[47]=O=>ge.value.outputs_notebooks=O),label:"Notebooks",placeholder:"outputs/private/notebooks"},null,8,["modelValue"]),k(q,{modelValue:ge.value.outputs_docs,"onUpdate:modelValue":v[48]||(v[48]=O=>ge.value.outputs_docs=O),label:"Docs",placeholder:"outputs/private/docs"},null,8,["modelValue"]),k(q,{modelValue:ge.value.outputs_final,"onUpdate:modelValue":v[49]||(v[49]=O=>ge.value.outputs_final=O),label:"Final",placeholder:"outputs/private/final"},null,8,["modelValue"])])]),c("div",e$,[v[132]||(v[132]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Public Outputs",-1)),c("div",t$,[k(q,{modelValue:ge.value.outputs_tables_public,"onUpdate:modelValue":v[50]||(v[50]=O=>ge.value.outputs_tables_public=O),label:"Tables",placeholder:"outputs/public/tables"},null,8,["modelValue"]),k(q,{modelValue:ge.value.outputs_figures_public,"onUpdate:modelValue":v[51]||(v[51]=O=>ge.value.outputs_figures_public=O),label:"Figures",placeholder:"outputs/public/figures"},null,8,["modelValue"]),k(q,{modelValue:ge.value.outputs_models_public,"onUpdate:modelValue":v[52]||(v[52]=O=>ge.value.outputs_models_public=O),label:"Models",placeholder:"outputs/public/models"},null,8,["modelValue"]),k(q,{modelValue:ge.value.outputs_notebooks_public,"onUpdate:modelValue":v[53]||(v[53]=O=>ge.value.outputs_notebooks_public=O),label:"Notebooks",placeholder:"outputs/public/notebooks"},null,8,["modelValue"]),k(q,{modelValue:ge.value.outputs_docs_public,"onUpdate:modelValue":v[54]||(v[54]=O=>ge.value.outputs_docs_public=O),label:"Docs",placeholder:"outputs/public/docs"},null,8,["modelValue"]),k(q,{modelValue:ge.value.outputs_final_public,"onUpdate:modelValue":v[55]||(v[55]=O=>ge.value.outputs_final_public=O),label:"Final",placeholder:"outputs/public/final"},null,8,["modelValue"])])]),c("div",s$,[v[133]||(v[133]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Other",-1)),c("div",i$,[k(q,{modelValue:ge.value.cache,"onUpdate:modelValue":v[56]||(v[56]=O=>ge.value.cache=O),label:"Cache",placeholder:"outputs/private/cache"},null,8,["modelValue"]),k(q,{modelValue:ge.value.scratch,"onUpdate:modelValue":v[57]||(v[57]=O=>ge.value.scratch=O),label:"Scratch",placeholder:"outputs/private/scratch"},null,8,["modelValue"])])]),c("div",n$,[k($e,{variant:"secondary",onClick:Xa},{default:R(()=>[...v[134]||(v[134]=[ie(" Reset ",-1)])]),_:1}),k($e,{variant:"primary",onClick:hf,disabled:_t.value},{default:R(()=>[ie(F(_t.value?"Saving...":"Save Directories"),1)]),_:1},8,["disabled"])])])]))],512),[[gt,l.value==="directories"]]),He(c("div",r$,[ke.value?(y(),x("div",o$,[...v[136]||(v[136]=[c("div",{class:"text-center py-12 text-zinc-500 dark:text-zinc-400"}," Loading environment variables... ",-1)])])):Ee.value?(y(),x("div",l$,[k(Ai,{type:"error",title:"Error Loading .env",description:Ee.value},null,8,["description"])])):(y(),x("div",a$,[v[149]||(v[149]=c("div",{class:"mb-6"},[c("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Environment Variables"),c("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Manage environment variables for this project (.env file). ")],-1)),k(Ai,{type:"warning",title:" Contains Sensitive Data",class:"mb-6"},{actions:R(()=>[W.value==="grouped"?(y(),me($e,{key:0,variant:"soft",size:"sm",onClick:v[58]||(v[58]=O=>E.value=!E.value)},{default:R(()=>[ie(F(E.value?"Hide Values":"Show Values"),1)]),_:1})):U("",!0)]),default:R(()=>[v[137]||(v[137]=ie(" This file contains passwords and secrets. It is automatically excluded from version control (.gitignore). ",-1))]),_:1}),k(_D,{modelValue:W.value,"onUpdate:modelValue":v[59]||(v[59]=O=>W.value=O),tabs:[{id:"grouped",label:"Grouped By Prefix"},{id:"raw",label:"Raw"}],variant:"pills",class:"mb-6"},null,8,["modelValue"]),W.value==="grouped"?(y(),x("div",u$,[Object.keys(V.value).length===0?(y(),x("div",d$,[k(lt(wh),{class:"h-12 w-12 mx-auto mb-4 text-gray-400"}),v[139]||(v[139]=c("p",{class:"text-sm text-gray-500 dark:text-gray-400 mb-4"}," No environment variables found ",-1)),k($e,{variant:"primary",onClick:pf},{default:R(()=>[...v[138]||(v[138]=[ie(" Add Your First Variable ",-1)])]),_:1})])):(y(),x("div",c$,[(y(!0),x(J,null,ve(V.value,(O,Ae)=>(y(),x("div",{key:Ae,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},[c("div",f$,[c("h3",h$,F(Ae==="Other"?"Other Variables":Ae.toUpperCase()+" Variables"),1),k($e,{variant:"soft",size:"sm",onClick:pf},{default:R(()=>[...v[140]||(v[140]=[ie(" + Add ",-1)])]),_:1})]),c("div",p$,[(y(!0),x(J,null,ve(O,(Te,Re)=>(y(),x("div",{key:Re,class:"space-y-2"},[c("div",m$,[c("div",g$,[Te.defined&&Te.used?(y(),me(Vn,{key:0,variant:"green",class:"text-xs"},{default:R(()=>[...v[141]||(v[141]=[ie("",-1)])]),_:1})):!Te.defined&&Te.used?(y(),me(Vn,{key:1,variant:"yellow",class:"text-xs"},{default:R(()=>[...v[142]||(v[142]=[ie("",-1)])]),_:1})):(y(),me(Vn,{key:2,variant:"gray",class:"text-xs"},{default:R(()=>[...v[143]||(v[143]=[ie("",-1)])]),_:1}))]),c("div",y$,[c("input",{value:Re,onInput:At=>{const bt=At.target.value;bt!==Re&&(st.value[bt]=st.value[Re]||"",delete st.value[Re])},type:"text",placeholder:"VARIABLE_NAME",class:"w-full rounded-md border border-zinc-300 dark:border-zinc-600 bg-white dark:bg-zinc-800 px-3 py-2 text-sm text-zinc-900 dark:text-zinc-100 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500 font-mono uppercase"},null,40,v$),c("div",b$,[He(c("input",{"onUpdate:modelValue":At=>st.value[Re]=At,onInput:At=>Te.value=st.value[Re],type:mf(Re)?"text":"password",placeholder:Te.defined?"value":"(not set)",class:Ve(["w-full rounded-md border border-zinc-300 dark:border-zinc-600 bg-white dark:bg-zinc-800 px-3 py-2 text-sm text-zinc-900 dark:text-zinc-100 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500 font-mono",Za(Re)?"pr-10":""])},null,42,x$),[[xx,st.value[Re]]]),Za(Re)?(y(),x("button",{key:0,onClick:At=>t1(Re),type:"button",class:"absolute right-2 top-1/2 -translate-y-1/2 text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300"},[mf(Re)?(y(),me(lt(Fk),{key:1,class:"h-4 w-4"})):(y(),me(lt(Hk),{key:0,class:"h-4 w-4"}))],8,k$)):U("",!0)])]),k($e,{variant:"soft",size:"sm",onClick:At=>e1(Re)},{default:R(()=>[...v[144]||(v[144]=[ie("  ",-1)])]),_:1},8,["onClick"])]),Te.used&&Te.used_in.length>0?(y(),x("div",w$," Used in: "+F(Te.used_in.join(", ")),1)):Te.defined&&!Te.used?(y(),x("div",S$," Not referenced in any files ")):U("",!0)]))),128))])]))),128))])),c("div",C$,[k(Be,{modelValue:Q.value,"onUpdate:modelValue":v[60]||(v[60]=O=>Q.value=O),label:"Regroup .env file by prefix when saving",description:" This will rewrite the entire file grouped by prefix and will lose all comments and original order."},null,8,["modelValue"])]),c("div",_$,[k($e,{variant:"secondary",onClick:Xo},{default:R(()=>[...v[145]||(v[145]=[ie(" Reset ",-1)])]),_:1}),k($e,{variant:"primary",onClick:Qa,disabled:Fe.value},{default:R(()=>[ie(F(Fe.value?"Saving...":"Save .env"),1)]),_:1},8,["disabled"])])])):W.value==="raw"?(y(),x("div",A$,[c("div",V$,[v[146]||(v[146]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"}," Raw .env File ",-1)),He(c("textarea",{"onUpdate:modelValue":v[61]||(v[61]=O=>we.value=O),class:"w-full h-96 font-mono text-sm rounded-md border border-zinc-300 dark:border-zinc-600 bg-white dark:bg-zinc-800 px-3 py-2 text-zinc-900 dark:text-zinc-100 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500",placeholder:`# Environment variables
# Example:
# DB_HOST=localhost
# DB_PORT=5432
# API_KEY=your_key_here`},null,512),[[Ki,we.value]]),v[147]||(v[147]=c("p",{class:"mt-2 text-xs text-gray-500 dark:text-gray-400"}," Edit the .env file directly. Comments and formatting will be preserved. ",-1))]),c("div",M$,[k($e,{variant:"secondary",onClick:Xo},{default:R(()=>[...v[148]||(v[148]=[ie(" Reset ",-1)])]),_:1}),k($e,{variant:"primary",onClick:Qa,disabled:Fe.value},{default:R(()=>[ie(F(Fe.value?"Saving...":"Save .env"),1)]),_:1},8,["disabled"])])])):U("",!0)]))],512),[[gt,l.value==="env"]])])])):U("",!0),k(bo,{modelValue:g.value,"onUpdate:modelValue":v[67]||(v[67]=O=>g.value=O),title:"Add Package",size:"md",variant:"left"},{actions:R(()=>[k($e,{variant:"primary",onClick:Qv,disabled:!be.value.name.trim()},{default:R(()=>[...v[155]||(v[155]=[ie(" Add Package ",-1)])]),_:1},8,["disabled"]),k($e,{variant:"secondary",onClick:v[66]||(v[66]=O=>g.value=!1)},{default:R(()=>[...v[156]||(v[156]=[ie(" Cancel ",-1)])]),_:1})]),default:R(()=>[c("div",D$,[c("div",null,[v[150]||(v[150]=c("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Search CRAN Packages ",-1)),He(c("input",{"onUpdate:modelValue":v[62]||(v[62]=O=>p.value=O),onKeydown:Xv,type:"text",placeholder:"Type to search CRAN...",class:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 px-3 py-2 text-sm text-gray-900 dark:text-gray-100 font-mono focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500"},null,544),[[Ki,p.value]])]),D.value.length>0?(y(),x("div",T$,[(y(!0),x(J,null,ve(D.value,(O,Ae)=>(y(),x("button",{key:O.name,onClick:Te=>ff(O),onMouseenter:Te=>A.value=Ae,class:Ve(["w-full px-3 py-2 text-left border-b border-gray-200 dark:border-gray-700 last:border-b-0 transition",A.value===Ae?"bg-sky-50 dark:bg-sky-900/20":"hover:bg-gray-50 dark:hover:bg-gray-800"])},[c("div",$$,[c("div",P$,[c("div",O$,F(O.name),1),O.title?(y(),x("div",R$,F(O.title),1)):U("",!0),O.author?(y(),x("div",j$,F(O.author),1)):U("",!0)]),c("div",L$," v"+F(O.version),1)])],42,E$))),128))])):U("",!0),c("div",null,[v[151]||(v[151]=c("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Package Name ",-1)),He(c("input",{"onUpdate:modelValue":v[63]||(v[63]=O=>be.value.name=O),type:"text",placeholder:"dplyr",class:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 px-3 py-2 text-sm text-gray-900 dark:text-gray-100 font-mono focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500"},null,512),[[Ki,be.value.name]]),be.value.source==="github"?(y(),x("p",B$," GitHub: user/repo (e.g., tidyverse/dplyr) ")):U("",!0),be.value.source==="bioc"?(y(),x("p",I$," Bioconductor: name only (e.g., DESeq2) ")):U("",!0)]),c("div",null,[v[154]||(v[154]=c("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Source ",-1)),c("div",U$,[He(c("select",{"onUpdate:modelValue":v[64]||(v[64]=O=>be.value.source=O),class:"w-full appearance-none rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 pl-3 pr-10 py-2 text-sm text-gray-900 dark:text-gray-100 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500"},[...v[152]||(v[152]=[c("option",{value:"cran"},"CRAN",-1),c("option",{value:"github"},"GitHub",-1),c("option",{value:"bioc"},"Bioconductor",-1)])],512),[[nd,be.value.source]]),v[153]||(v[153]=c("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},[c("svg",{class:"h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),c("p",N$,[be.value.source==="cran"?(y(),x(J,{key:0},[ie("CRAN: name only (e.g., dplyr)")],64)):be.value.source==="github"?(y(),x(J,{key:1},[ie("GitHub: user/repo (e.g., tidyverse/dplyr)")],64)):be.value.source==="bioc"?(y(),x(J,{key:2},[ie("Bioconductor: name only (e.g., DESeq2)")],64)):U("",!0)])]),c("div",null,[k(Be,{modelValue:be.value.auto_attach,"onUpdate:modelValue":v[65]||(v[65]=O=>be.value.auto_attach=O),label:"Auto-attach on scaffold()"},null,8,["modelValue"])])])]),_:1},8,["modelValue"])]))}},F$={class:"rounded-lg bg-gray-50 p-6 space-y-6 dark:bg-gray-800/50"},H$={key:0,class:"space-y-2"},W$={key:0,class:"text-lg font-semibold text-gray-900 dark:text-white"},q$={key:1,class:"text-sm text-gray-600 dark:text-gray-400"},G$={class:"space-y-6"},xt={__name:"SettingsPanel",props:{title:{type:String,default:""},description:{type:String,default:""}},setup(t){return(e,s)=>(y(),x("section",F$,[t.title||t.description?(y(),x("header",H$,[t.title?(y(),x("h2",W$,F(t.title),1)):U("",!0),t.description?(y(),x("p",q$,F(t.description),1)):U("",!0)])):U("",!0),c("div",G$,[Ct(e.$slots,"default")])]))}},K$={class:"space-y-3"},J$={key:0,class:"space-y-1"},Y$={key:0,class:"text-sm font-semibold text-gray-900 dark:text-white"},X$={key:1,class:"text-xs text-gray-600 dark:text-gray-400"},Q$={class:"space-y-3"},Pt={__name:"SettingsBlock",props:{title:{type:String,default:""},description:{type:String,default:""}},setup(t){return(e,s)=>(y(),x("div",K$,[t.title||t.description?(y(),x("div",J$,[t.title?(y(),x("h3",Y$,F(t.title),1)):U("",!0),t.description?(y(),x("p",X$,F(t.description),1)):U("",!0)])):U("",!0),c("div",Q$,[Ct(e.$slots,"default")])]))}},Z$={class:"flex min-h-screen"},eP={class:"w-64 shrink-0 border-r border-gray-200 p-6 dark:border-gray-800"},tP={class:"space-y-1"},sP=["href","onClick"],iP={key:0,class:"ml-4 mt-2 space-y-0.5 border-l border-gray-200 pl-3 dark:border-gray-700"},nP=["href","onClick"],rP={key:1,class:"ml-4 mt-2 space-y-0.5 border-l border-gray-200 pl-3 dark:border-gray-700"},oP=["href","onClick"],lP={class:"flex-1 p-10"},aP={class:"mt-8 space-y-10"},uP={id:"author"},dP={class:"space-y-5"},cP={id:"workflow"},fP={class:"space-y-5"},hP={id:"structure",class:"space-y-8"},pP={key:0,class:"space-y-6"},mP={key:0,class:"space-y-6"},gP={key:0},yP={class:"space-y-5"},vP=["value"],bP={class:"flex flex-wrap items-center justify-between gap-3"},xP={class:"flex flex-wrap gap-2 text-xs font-medium text-gray-600 dark:text-gray-400"},kP=["id"],wP={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},SP={class:"grid grid-cols-2 gap-3"},CP=["id"],_P={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},AP={class:"grid grid-cols-2 gap-3"},VP=["id"],MP={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},DP={class:"grid grid-cols-2 gap-3"},TP=["id"],EP={key:1,class:"space-y-6"},$P={key:0},PP={class:"space-y-5"},OP=["value"],RP={class:"flex flex-wrap items-center justify-between gap-3"},jP={class:"flex flex-wrap gap-2 text-xs font-medium text-gray-600 dark:text-gray-400"},LP=["id"],BP={class:"space-y-3"},IP={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},UP={class:"grid grid-cols-2 gap-3"},NP=["id"],zP={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},FP={class:"grid gap-4 sm:grid-cols-2"},HP={class:"space-y-3"},WP={class:"space-y-3"},qP=["id"],GP={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},KP={class:"grid gap-4 sm:grid-cols-2"},JP={class:"space-y-3"},YP={class:"space-y-3"},XP=["id"],QP={class:"space-y-3"},ZP={key:2,class:"space-y-6"},eO={key:0},tO={class:"space-y-5"},sO=["value"],iO={class:"flex flex-wrap items-center justify-between gap-3"},nO={class:"flex flex-wrap gap-2 text-xs font-medium text-gray-600 dark:text-gray-400"},rO=["id"],oO={class:"space-y-3"},lO=["id"],aO={class:"space-y-4"},uO={class:"space-y-2"},dO={class:"space-y-2"},cO={class:"space-y-2"},fO={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},hO={class:"grid grid-cols-2 gap-3"},pO={key:3,class:"space-y-6"},mO={key:0},gO={class:"space-y-5"},yO=["value"],vO={class:"flex flex-wrap items-center justify-between gap-3"},bO={class:"flex flex-wrap gap-2 text-xs font-medium text-gray-600 dark:text-gray-400"},xO=["id"],kO={class:"space-y-3"},wO=["id"],SO={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},CO={class:"grid grid-cols-2 gap-3"},_O={id:"notebooksScripts"},AO={class:"space-y-8"},VO={id:"notebooksScripts-format"},MO={id:"notebooksScripts-notebook-stub"},DO={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-2"},TO={class:"flex justify-end mt-3"},EO={id:"notebooksScripts-script-stub"},$O={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-2"},PO={class:"flex justify-end mt-3"},OO={id:"ai"},RO={class:"space-y-2"},jO={class:"flex justify-end mt-3"},LO={id:"git"},BO={class:"grid gap-4 sm:grid-cols-2"},IO={id:"packages"},UO={class:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"},NO={key:0,class:"space-y-3"},zO={key:1,class:"text-xs text-gray-500 dark:text-gray-400"},FO={id:"privacy"},HO={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-2"},WO={key:1,class:"mt-3 text-xs text-gray-600 dark:text-gray-400"},qO={class:"list-disc pl-4 space-y-0.5"},GO={class:"flex justify-end mt-3"},KO={class:"text-sm text-gray-600 dark:text-gray-300 mb-4"},JO={class:"flex gap-3 justify-end"},Hu="author",zi="project",YO="Settings",XO="Manage defaults shared across new projects.",QO={__name:"SettingsView",setup(t){const e=Oa(),s=Pa(),i=_r(),n=[{id:"author",label:"Author Information",slug:"author-information"},{id:"workflow",label:"Editor & Workflow",slug:"editor-workflow"},{id:"structure",label:"Project Defaults",slug:"project-defaults"},{id:"notebooksScripts",label:"Notebooks & Scripts",slug:"notebooks-scripts"},{id:"ai",label:"AI Assistants",slug:"ai-assistants"},{id:"git",label:"Git & Version Control",slug:"git-version-control"},{id:"packages",label:"Packages & Dependencies",slug:"packages-dependencies"},{id:"privacy",label:"Privacy & Security",slug:"privacy-security"}],r=Object.fromEntries(n.map(({id:K,slug:C})=>[K,C])),o=Object.fromEntries(n.map(({id:K,slug:C})=>[C,K])),l={project:{label:"Standard Data Project",description:"General-purpose analysis project with notebooks, scripts, and shared outputs.",directories:{functions:"R/functions",notebooks:"notebooks",scripts:"scripts",inputs_raw:"inputs/raw",inputs_intermediate:"inputs/intermediate",inputs_final:"inputs/final",reference:"reference",outputs_notebooks:"outputs/notebooks",outputs_tables:"outputs/tables",outputs_figures:"outputs/figures",outputs_models:"outputs/models",outputs_reports:"outputs/reports",cache:"outputs/cache",scratch:"scratch"},quarto:{render_dir:"outputs/notebooks"},notebook_template:"notebook",extra_directories:[]},project_sensitive:{label:"Privacy-First Project",description:"Projects handling PHI/PII with dedicated private/public data flows.",directories:{functions:"R/functions",notebooks:"notebooks",scripts:"scripts",inputs_private_raw:"inputs/private/raw",inputs_private_intermediate:"inputs/private/intermediate",inputs_private_final:"inputs/private/final",inputs_public_raw:"inputs/public/raw",inputs_public_intermediate:"inputs/public/intermediate",inputs_public_final:"inputs/public/final",outputs_private_tables:"outputs/private/tables",outputs_private_figures:"outputs/private/figures",outputs_private_models:"outputs/private/models",outputs_private_docs:"outputs/private/docs",outputs_private_data_final:"outputs/private/data_final",outputs_public_tables:"outputs/public/tables",outputs_public_figures:"outputs/public/figures",outputs_public_models:"outputs/public/models",outputs_public_docs:"outputs/public/docs",outputs_public_data_final:"outputs/public/data_final",cache:"outputs/private/cache",scratch:"scratch"},quarto:{render_dir:"outputs/public/docs"},notebook_template:"notebook",extra_directories:[]},presentation:{label:"Presentation",description:"Single talk or slide deck with minimal analysis scaffolding.",directories:{presentation_source:"presentation.qmd",rendered_slides:"."},quarto:{render_dir:"."},notebook_template:"notebook",extra_directories:[]},course:{label:"Course",description:"Courses with modules, assignments, and lecture materials.",directories:{data:"data",slides:"slides",assignments:"assignments",course_docs:"course_docs",readings:"readings",notebooks:"modules"},quarto:{render_dir:"course_docs"},notebook_template:"notebook",extra_directories:[]}},a=he(JSON.parse(JSON.stringify(l))),d={project:"project",project_sensitive:"sensitive-project",presentation:"presentation",course:"course"},u=Object.fromEntries(Object.entries(d).map(([K,C])=>[C,K])),f={project:"Tune the standard analysis layoutfunctions, notebooks, inputs, and outputs live here by default.",project_sensitive:"Private and public inputs stay separate so sensitive data never leaves restricted folders.",presentation:"Control where your presentation source lives and where rendered slides are written.",course:"Adjust the folders used for slides, assignments, readings, and course documentation."},h=K=>String(K).replace(/_/g," ").replace(/\b\w/g,C=>C.toUpperCase()),m=he(null),w=[{key:"functions",label:"Functions",hint:"R files here are sourced by scaffold(), so helper functions are available in every project session."},{key:"notebooks",label:"Notebooks",hint:"Where Quarto or R Markdown analysis notebooks live."},{key:"scripts",label:"Scripts",hint:"Reusable R scripts, job runners, or automation tasks."},{key:"reference",label:"Reference materials",hint:"Codebooks, documentation, and other background resources."}],S=[{key:"inputs_raw",label:"Raw data",hint:"Read-only exports from source systems."},{key:"inputs_intermediate",label:"Intermediate data",hint:"Data after light cleaning or pre-processing steps."},{key:"inputs_final",label:"Analysis-ready data",hint:"Final inputs ready for modeling or reporting."}],_=[{key:"outputs_notebooks",label:"Rendered notebooks",hint:"Compiled Quarto/R Markdown notebooks."},{key:"outputs_tables",label:"Tables",hint:"Publishable tables ready for reports or manuscripts."},{key:"outputs_figures",label:"Figures",hint:"Final plots and graphics."},{key:"outputs_models",label:"Models",hint:"Serialized models or model summaries."},{key:"outputs_reports",label:"Reports",hint:"Final reports and deliverables ready for publication."}],M=[{key:"cache",label:"Cache",hint:"Temporary artifacts (gitignored)."},{key:"scratch",label:"Scratch",hint:"Short-lived explorations (gitignored)."}],L=[{privateKey:"inputs_private_raw",publicKey:"inputs_public_raw",label:"Raw data",privateLabel:"Raw data (private)",publicLabel:"Raw data (public)"},{privateKey:"inputs_private_intermediate",publicKey:"inputs_public_intermediate",label:"Intermediate data",privateLabel:"Intermediate data (private)",publicLabel:"Intermediate data (public)"},{privateKey:"inputs_private_final",publicKey:"inputs_public_final",label:"Analysis-ready data",privateLabel:"Analysis-ready data (private)",publicLabel:"Analysis-ready data (public)"}],$=[{privateKey:"outputs_private_tables",publicKey:"outputs_public_tables",label:"Tables",privateLabel:"Tables (private)",publicLabel:"Tables (public)"},{privateKey:"outputs_private_figures",publicKey:"outputs_public_figures",label:"Figures",privateLabel:"Figures (private)",publicLabel:"Figures (public)"},{privateKey:"outputs_private_models",publicKey:"outputs_public_models",label:"Models",privateLabel:"Models (private)",publicLabel:"Models (public)"},{privateKey:"outputs_private_docs",publicKey:"outputs_public_docs",label:"Docs & reports",privateLabel:"Docs (private)",publicLabel:"Docs (public)"},{privateKey:"outputs_private_data_final",publicKey:"outputs_public_data_final",label:"Final data",privateLabel:"Final data (private)",publicLabel:"Final data (public)"}],T=(K,C)=>m.value?.project_types?.[K]?.directories?.[C]||{},N=(K,C)=>C.map(b=>{const G=T(K,b.key);return{key:b.key,label:G.label||b.label,hint:G.hint||b.hint||""}}),B=le(()=>N("project",w)),I=le(()=>N("project",S)),Z=le(()=>N("project",_)),ee=le(()=>N("project",M)),fe=K=>K.map(C=>{const b=T("project_sensitive",C.privateKey),G=T("project_sensitive",C.publicKey);return{...C,privateLabel:b.label||C.privateLabel,publicLabel:G.label||C.publicLabel}}),X=le(()=>fe(L)),z=le(()=>fe($)),ae=le(()=>{const K=V.value;return!K||!m.value?.project_types?.[K]?.settings?[]:m.value.project_types[K].settings}),oe={include_inputs:"inputs",include_scripts:"scripts",include_functions:"R/functions"},H=le(()=>{const K=m.value?.project_types?.presentation?.optional_toggles||{};return{inputs:K.include_inputs?.default_path||oe.include_inputs,scripts:K.include_scripts?.default_path||oe.include_scripts,functions:K.include_functions?.default_path||oe.include_functions}}),g={"CLAUDE.md":"ai_claude","AGENTS.md":"ai_agents",".github/copilot-instructions.md":"ai_copilot"},p=[{id:"claude",label:"Claude Code",description:"Anthropic's IDE-focused assistant."},{id:"copilot",label:"GitHub Copilot",description:"Complements VS Code and JetBrains editors."},{id:"agents",label:"Multi-Agent (OpenAI Codex, Cursor, etc.)",description:"Shared instructions for multi-model orchestrators."}],D=he(Hu),Y=he(!1),A=he({projects_root:"",project_types:JSON.parse(JSON.stringify(a.value)),author:{name:"",email:"",affiliation:""},defaults:{project_type:"project",notebook_format:"quarto",ide:"vscode",use_git:!0,use_renv:!1,seed:"",seed_on_scaffold:!1,ai_support:!0,ai_assistants:["claude"],ai_canonical_file:"CLAUDE.md",directories:JSON.parse(JSON.stringify(a.value.project.directories)),git_hooks:{ai_sync:!1,data_security:!1},packages:[{name:"dplyr",auto_attach:!0},{name:"ggplot2",auto_attach:!0}]},git:{user_name:"",user_email:""},privacy:{secret_scan:!1,gitignore_template:"gitignore"}}),be=hi({includeInputs:!1,includeScripts:!1,includeFunctions:!1}),ge=hi({claude:!0,agents:!1,copilot:!1}),qe=hi({open:!1,name:"",title:"",description:"",contents:"",loading:!1}),Ne=hi({notebook:{loading:!1,contents:""},script:{loading:!1,contents:""},canonical:{loading:!1,contents:""},gitignore:{loading:!1,contents:""}}),_t=le(()=>Object.entries(A.value.project_types||{})),st=le(()=>_t.value.map(([K,C])=>({key:K,label:C.label||h(K),slug:d[K]||K}))),V=le(()=>{const K=i.params.subsection;return u[K]||zi}),we=le(()=>{const K=V.value;return K&&A.value.project_types?.[K]||null}),ke={author:{title:"Author Information",description:"Defaults that populate README files and notebook headers when scaffold() runs."},workflow:{title:"Editor & Workflow",description:"Control how Framework scaffolds projects in your preferred tools."},structure:{title:"Project Defaults",description:"Customize the directory layout, templates, and scaffolding for each project type."},notebooksScripts:{title:"Notebooks & Scripts",description:"Choose default notebook formats and edit the starter stubs Framework ships with."},ai:{title:"AI Assistants",description:"Manage assistant support, canonical context files, and sync hooks."},git:{title:"Git & Version Control",description:"Configure repository initialization and commit identity defaults."},packages:{title:"Packages & Dependencies",description:"Define dependency defaults and auto-attach behavior for new projects."},privacy:{title:"Privacy & Security",description:"Manage secret scanning and shared .gitignore defaults."}},Ee=le(()=>ke[D.value]||{title:YO,description:XO}),Fe=le(()=>D.value==="structure"&&we.value?we.value.label||h(V.value):Ee.value.title),E=le(()=>D.value==="structure"&&we.value&&(we.value.description||f[V.value])||Ee.value.description),P=le(()=>A.value.privacy.gitignore_template||"gitignore"),W=le(()=>{const K=new Set,C=A.value.project_types||{},b=C.project_sensitive?.directories||{};for(const de of Object.values(b))typeof de=="string"&&de.trim()&&de.includes("private")&&K.add(de.replace(/^\/+/,""));const G=C.project?.directories||{};return["cache","scratch"].forEach(de=>{const pe=G[de];typeof pe=="string"&&pe.trim()&&K.add(pe.replace(/^\/+/,""))}),Array.from(K).sort()}),Q=le(()=>g[A.value.defaults.ai_canonical_file]||"ai_claude"),se=[{id:"notebooksScripts-format",label:"Defaults"},{id:"notebooksScripts-notebook-stub",label:"Notebook Stub"},{id:"notebooksScripts-script-stub",label:"Script Stub"}],te=(K,C)=>{const b={section:K||void 0};return C&&(b.subsection=C),s.resolve({name:"settings",params:b}).href},ye=(K,C)=>{const b={};K&&(b.section=K),C&&(b.subsection=C);const G=i.params.section||void 0,de=i.params.subsection||void 0,pe=b.section||void 0,Qe=b.subsection||void 0;return G===pe&&de===Qe?Promise.resolve():s.replace({name:"settings",params:b}).catch(()=>{})};Ye(()=>i.params.section,K=>{if(!K){ye(r[Hu],void 0);return}const C=o[K]||Hu;if(D.value=C,!o[K]){ye(r[C],C==="structure"?d[zi]:void 0);return}C==="structure"&&!i.params.subsection&&ye("project-defaults",d[zi])},{immediate:!0}),Ye(()=>i.params.subsection,K=>{D.value==="structure"&&(!K||!u[K])&&ye("project-defaults",d[zi])});const re=(K,C="")=>Array.isArray(K)?K.length>0?re(K[0],C):C:K??C,ue=(K,C=!1)=>{const b=re(K,C);return typeof b=="boolean"?b:typeof b=="string"?["true","1","yes"].includes(b.toLowerCase()):!!b},ce=K=>Array.isArray(K)?K.flatMap(C=>Array.isArray(C)?C:[C]).filter(Boolean):[],Oe=(K={},C={})=>{const b={...C};for(const[G,de]of Object.entries(K||{})){const pe=re(de,null);pe===null||pe===""?delete b[G]:b[G]=pe}return b},Ce=(K,C)=>{const b=a.value[K]||{directories:{},quarto:{},extra_directories:[]};return{label:re(C?.label,b.label||h(K)),description:re(C?.description,b.description||""),ggplot_theme:re(C?.ggplot_theme,"theme_minimal"),set_theme_on_scaffold:ue(C?.set_theme_on_scaffold,!0),directories:Oe(C?.directories,b.directories),quarto:{render_dir:re(C?.quarto?.render_dir,b.quarto?.render_dir||".")},notebook_template:re(C?.notebook_template,b.notebook_template||"notebook"),extra_directories:Array.isArray(C?.extra_directories)?C.extra_directories:b.extra_directories||[]}},Pe=K=>{if(!K||!K.project_types)return;const C={};for(const[b,G]of Object.entries(K.project_types)){const de=l[b]||{},pe={};for(const[Qe,ns]of Object.entries(G.directories||{})){const rs=de.directories?.[Qe]||"";pe[Qe]=re(ns?.default,rs)}C[b]={label:re(G.label,de.label||h(b)),description:re(G.description,de.description||""),directories:pe,quarto:{render_dir:re(G.quarto?.render_dir?.default,de.quarto?.render_dir||".")},notebook_template:re(G.notebook_template?.default,de.notebook_template||"notebook"),optional_toggles:G.optional_toggles||{}}}for(const[b,G]of Object.entries(l))C[b]||(C[b]=JSON.parse(JSON.stringify(G)));a.value=C},Le=(K,C,b)=>{if(!A.value.project_types?.presentation)return;const G=A.value.project_types.presentation.directories||(A.value.project_types.presentation.directories={});C?(!G[K]||G[K]==="")&&(G[K]=b):Object.prototype.hasOwnProperty.call(G,K)&&delete G[K]},Ue=async(K,C=K)=>{if(Ne[C]){Ne[C].loading=!0;try{const b=await fetch(`/api/templates/${K}`);if(!b.ok)throw new Error("Request failed");const G=await b.json();Ne[C].contents=G.contents||""}catch{e.error("Template Error","Unable to load template contents.")}finally{Ne[C].loading=!1}}},Ke=async(K,C=K)=>{if(Ne[C])try{if(!(await fetch(`/api/templates/${K}`,{method:"DELETE"})).ok)throw new Error("Request failed");await Ue(K,C),e.success("Template Reset","Restored the packaged default template.")}catch{e.error("Reset Failed","Unable to restore the default template.")}},Je=()=>{Ke(Q.value,"canonical")};Ye(ge,K=>{const C=[];K.claude&&C.push("claude"),K.copilot&&C.push("copilot"),K.agents&&C.push("agents"),A.value.defaults.ai_assistants=C},{deep:!0}),Ye(()=>A.value.defaults.ai_canonical_file,async()=>{await Ue(Q.value,"canonical")}),Ye(()=>A.value.defaults.git_hooks.data_security,K=>{A.value.privacy.secret_scan=K}),Ye(()=>A.value.privacy.secret_scan,K=>{A.value.defaults.git_hooks.data_security=K}),Ye(()=>be.includeInputs,K=>{Le("inputs",K,H.value.inputs)}),Ye(()=>be.includeScripts,K=>{Le("scripts",K,H.value.scripts)}),Ye(()=>be.includeFunctions,K=>{Le("functions",K,H.value.functions)});const Dt=K=>{(K.metaKey||K.ctrlKey)&&K.key==="s"&&(K.preventDefault(),Jo())},nt=(K,C)=>{const b=A.value.project_types?.[K]?.directories;return!!b&&Object.prototype.hasOwnProperty.call(b,C)},Lt=K=>{a.value[K]&&(A.value.project_types[K]=JSON.parse(JSON.stringify(a.value[K])),K==="presentation"&&(be.includeInputs=!1,be.includeScripts=!1,be.includeFunctions=!1))},is=async()=>{try{qe.loading=!0,await fetch(`/api/templates/${qe.name}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:qe.contents})}),e.success("Template Saved","Your changes have been saved."),qe.open=!1}catch{e.error("Save Failed","Could not save template changes.")}finally{qe.loading=!1}},Is=()=>{A.value.defaults.packages.push({name:"",auto_attach:!1})},hn=K=>{A.value.defaults.packages.splice(K,1)},Xe=K=>{const C=document.getElementById(K);C&&C.scrollIntoView({behavior:"smooth",block:"start"})},Ut=K=>{switch(K){case"project":return`project-${K}-inputs`;case"project_sensitive":return`project-${K}-workspaces`;case"presentation":return`project-${K}-primary`;case"course":return`project-${K}-core`;default:return`project-${K}`}},Fn=async K=>{const C=n.find(G=>G.id===K);if(!C)return;const b=C.id==="structure"?d[V.value||zi]:void 0;if(await ye(C.slug,b),await En(),C.id==="structure"){const G=V.value||zi;Xe(Ut(G))}else Xe(C.id)},Hn=async K=>{const C=d[K]||d[zi];await ye("project-defaults",C),await En(),Xe(Ut(K))};Ye(()=>V.value,(K,C)=>{D.value==="structure"&&(!K||K===C||En(()=>Xe(Ut(K))))}),Ye(()=>P.value,(K,C)=>{!K||K===C||Ue(K,"gitignore")});const Ga=async()=>{try{const[K,C]=await Promise.all([fetch("/api/settings/catalog"),fetch("/api/settings/get")]);if(!K.ok)throw new Error("Failed to load settings catalog");if(!C.ok)throw new Error("Failed to load settings payload");const b=await K.json();m.value=b,Pe(b);const G=await C.json();if(A.value.projects_root=re(G.projects_root,""),G.project_types){const de={},pe={...a.value,...G.project_types};for(const[Qe,ns]of Object.entries(pe))de[Qe]=Ce(Qe,ns);A.value.project_types=de}if(be.includeInputs=nt("presentation","inputs"),be.includeScripts=nt("presentation","scripts"),be.includeFunctions=nt("presentation","functions"),G.author&&(A.value.author={name:re(G.author.name,""),email:re(G.author.email,""),affiliation:re(G.author.affiliation,"")}),G.defaults){const de=G.defaults;A.value.defaults.project_type=re(de.project_type,"project"),A.value.defaults.notebook_format=re(de.notebook_format,"quarto"),A.value.defaults.ide=re(de.ide,"vscode"),A.value.defaults.use_git=ue(de.use_git,!0),A.value.defaults.use_renv=ue(de.use_renv,!1),A.value.defaults.seed_on_scaffold=ue(de.seed_on_scaffold,!1),A.value.defaults.seed=re(de.seed,""),A.value.defaults.ai_support=ue(de.ai_support,!0),A.value.defaults.ai_canonical_file=re(de.ai_canonical_file,"CLAUDE.md");const pe=ce(de.ai_assistants);pe.length&&(A.value.defaults.ai_assistants=pe,ge.claude=pe.includes("claude"),ge.copilot=pe.includes("copilot"),ge.agents=pe.includes("agents")),de.git_hooks&&(A.value.defaults.git_hooks={...A.value.defaults.git_hooks,...Object.fromEntries(Object.entries(de.git_hooks).map(([Qe,ns])=>[Qe,ue(ns,A.value.defaults.git_hooks[Qe])]))},A.value.privacy.secret_scan=A.value.defaults.git_hooks.data_security),console.log("[DEBUG LOAD] defaults.packages:",de.packages),console.log("[DEBUG LOAD] Is array?",Array.isArray(de.packages)),console.log("[DEBUG LOAD] Type:",typeof de.packages),Array.isArray(de.packages)?(console.log("[DEBUG LOAD] Loading packages from array"),A.value.defaults.packages=de.packages.map(Qe=>({name:re(Qe.name,""),auto_attach:ue(Qe.auto_attach,!1)})),console.log("[DEBUG LOAD] Loaded packages:",A.value.defaults.packages)):(console.log("[DEBUG LOAD] defaults.packages is not an array, using empty array"),A.value.defaults.packages=[]),de.directories?A.value.defaults.directories={...A.value.defaults.directories,...Object.fromEntries(Object.entries(de.directories).map(([Qe,ns])=>[Qe,re(ns,A.value.defaults.directories[Qe]||"")]))}:A.value.project_types.project&&(A.value.defaults.directories={...A.value.defaults.directories,...A.value.project_types.project.directories})}G.git&&(A.value.git={user_name:re(G.git.user_name,""),user_email:re(G.git.user_email,"")}),G.privacy?(A.value.privacy.secret_scan=ue(G.privacy.secret_scan,A.value.defaults.git_hooks.data_security),A.value.privacy.gitignore_template=re(G.privacy.gitignore_template,"gitignore")):A.value.privacy.secret_scan=A.value.defaults.git_hooks.data_security,await Ue(Q.value,"canonical")}catch(K){console.error("Failed to load settings:",K),e.error("Load Failed","Unable to load current settings.")}},ei=(K,C)=>{const b=A.value.project_types[K];return!b||!Array.isArray(b.extra_directories)?[]:b.extra_directories.filter(G=>G.type===C)},Us=(K,C,b)=>{const G=A.value.project_types[K];if(!G)return;Array.isArray(G.extra_directories)||(G.extra_directories=[]);const de=G.extra_directories.filter(Qe=>Qe&&Qe.type!==C),pe=b.map(Qe=>({...Qe,type:C}));G.extra_directories=[...de,...pe]},Vs=(K,C,b,G)=>{if(!K)return null;if(!/^[a-zA-Z0-9_]+$/.test(K))return"Only letters, numbers, and underscores allowed";const de=A.value.project_types[C];if(!de||!Array.isArray(de.extra_directories))return null;if(de.extra_directories.filter(xi=>xi.type===b).findIndex((xi,Tr)=>Tr!==G&&xi.key===K)!==-1)return"Duplicate key within this section";const rs=de.extra_directories.filter(xi=>xi.type!==b).find(xi=>xi.key===K);return rs?`Key already used in ${rs.type} directories`:null},xs=K=>!K||K.trim()===""?null:K.startsWith("/")?"Must be relative (no leading slash)":K.includes("..")?"Path traversal not allowed (..)":null,Jo=async()=>{try{Y.value=!0;const K=A.value.projects_root?.trim()||"",C=JSON.parse(JSON.stringify(A.value));C.projects_root=K||null,C.defaults.seed=C.defaults.seed===""?null:C.defaults.seed,console.log("[DEBUG SAVE] Before filter - packages:",C.defaults.packages),C.defaults.packages=(C.defaults.packages||[]).filter(Qe=>Qe.name&&Qe.name.trim()!==""),console.log("[DEBUG SAVE] After filter - packages:",C.defaults.packages),C.defaults.directories=C.project_types?.project?.directories||C.defaults.directories,C.defaults.git_hooks.data_security=C.privacy.secret_scan,C.git=C.git||{user_name:"",user_email:""};for(const Qe in C.project_types){const ns=C.project_types[Qe];ns.extra_directories&&Array.isArray(ns.extra_directories)&&(ns.extra_directories=ns.extra_directories.filter(rs=>rs.key&&rs.key.trim()!==""&&rs.label&&rs.label.trim()!==""&&rs.path&&rs.path.trim()!==""&&rs.type&&rs.type.trim()!==""))}console.log("[DEBUG SAVE] Sending payload to API:",C),console.log("[DEBUG SAVE] Payload.defaults.packages:",C.defaults.packages);const b=await fetch("/api/settings/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(C)});if(console.log("[DEBUG SAVE] API response status:",b.status,b.ok),!b.ok){const Qe=await b.text();throw console.error("[DEBUG SAVE] API error response:",Qe),new Error("Failed to save settings")}const G=await b.json();console.log("[DEBUG SAVE] API response data:",G);const de=P.value||"gitignore";if((await Promise.all([fetch("/api/templates/notebook",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:Ne.notebook.contents})}),fetch("/api/templates/script",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:Ne.script.contents})}),fetch(`/api/templates/${de}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:Ne.gitignore.contents})})])).some(Qe=>!Qe.ok))throw new Error("Template save failed");e.success("Settings Saved","Your global defaults were updated.")}catch(K){console.error("Failed to save settings:",K),e.error("Save Failed",K?.message||"Review your changes and try again.")}finally{Y.value=!1}};return es(()=>{Ga(),Ue("notebook"),Ue("script"),Ue(P.value,"gitignore"),Ue(Q.value,"canonical"),window.addEventListener("keydown",Dt)}),Cr(()=>{window.removeEventListener("keydown",Dt)}),(K,C)=>(y(),x("div",Z$,[c("nav",eP,[C[69]||(C[69]=c("h2",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Settings",-1)),c("div",tP,[(y(),x(J,null,ve(n,b=>c("div",{key:b.id},[c("a",{href:te(b.slug,b.id==="structure"?d[V.value]||d[zi]:void 0),onClick:ht(G=>Fn(b.id),["prevent"]),class:Ve(["block px-3 py-2 rounded-md text-sm transition",D.value===b.id?"bg-sky-50 text-sky-700 font-medium dark:bg-sky-900/20 dark:text-sky-400":"text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-800"])},F(b.label),11,sP),b.id==="structure"&&D.value==="structure"?(y(),x("div",iP,[(y(!0),x(J,null,ve(st.value,G=>(y(),x("a",{key:G.key,href:te("project-defaults",G.slug),onClick:ht(de=>Hn(G.key),["prevent"]),class:Ve(["block rounded-md py-1 pl-4 pr-2 text-xs font-medium transition",V.value===G.key?"bg-sky-100 text-sky-700 dark:bg-sky-900/30 dark:text-sky-300":"text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-800"])},F(G.label),11,nP))),128))])):b.id==="notebooksScripts"&&D.value==="notebooksScripts"?(y(),x("div",rP,[(y(),x(J,null,ve(se,G=>c("a",{key:G.id,href:`#${G.id}`,onClick:ht(de=>Xe(G.id),["prevent"]),class:"block rounded-md py-1 pl-4 pr-2 text-xs font-medium text-gray-600 transition hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-800"},F(G.label),9,oP)),64))])):U("",!0)])),64))])]),c("div",lP,[k(Ar,{title:Fe.value,description:E.value},{actions:R(()=>[k($e,{variant:"primary",size:"md",disabled:Y.value,onClick:Jo},{default:R(()=>[ie(F(Y.value?"Saving":"Save Changes"),1)]),_:1},8,["disabled"])]),_:1},8,["title","description"]),c("div",aP,[He(c("div",uP,[k(xt,{description:"Used as defaults when scaffold() creates README files and notebook headers, so every project starts with the right attribution."},{default:R(()=>[k(Pt,null,{default:R(()=>[c("div",dP,[k(q,{modelValue:A.value.author.name,"onUpdate:modelValue":C[0]||(C[0]=b=>A.value.author.name=b),label:"Your Name",placeholder:"Your Name"},null,8,["modelValue"]),k(q,{modelValue:A.value.author.email,"onUpdate:modelValue":C[1]||(C[1]=b=>A.value.author.email=b),type:"email",label:"Email",placeholder:"your.email@example.com"},null,8,["modelValue"]),k(q,{modelValue:A.value.author.affiliation,"onUpdate:modelValue":C[2]||(C[2]=b=>A.value.author.affiliation=b),label:"Affiliation",placeholder:"Organization"},null,8,["modelValue"])])]),_:1})]),_:1})],512),[[gt,D.value==="author"]]),He(c("div",cP,[k(xt,{description:"Control how Framework scaffolds projects in your preferred tools."},{default:R(()=>[k(Pt,null,{default:R(()=>[c("div",fP,[k(q,{modelValue:A.value.projects_root,"onUpdate:modelValue":C[3]||(C[3]=b=>A.value.projects_root=b),label:"Default Projects Directory",placeholder:"~/code",monospace:"",hint:"New projects default to this parent directory. Leave empty to choose a full path each time."},null,8,["modelValue"]),k(Cs,{modelValue:A.value.defaults.ide,"onUpdate:modelValue":C[4]||(C[4]=b=>A.value.defaults.ide=b),label:"Primary Editor"},{default:R(()=>[...C[70]||(C[70]=[c("option",{value:"vscode"},"Positron / VS Code",-1),c("option",{value:"rstudio"},"RStudio",-1),c("option",{value:"rstudio,vscode"},"Both",-1),c("option",{value:"none"},"Other",-1)])]),_:1},8,["modelValue"]),k(Be,{modelValue:A.value.defaults.seed_on_scaffold,"onUpdate:modelValue":C[5]||(C[5]=b=>A.value.defaults.seed_on_scaffold=b),label:"Call set.seed() when scaffold() runs",description:"Ensures deterministic behavior when a project is loaded."},null,8,["modelValue"]),k(q,{modelValue:A.value.defaults.seed,"onUpdate:modelValue":C[6]||(C[6]=b=>A.value.defaults.seed=b),label:"Default Random Seed",placeholder:"e.g., 1234",hint:"Set to 1234 when automatic seeding is enabled and no value is provided."},null,8,["modelValue"])])]),_:1})]),_:1})],512),[[gt,D.value==="workflow"]]),He(c("div",hP,[we.value?(y(),x("div",pP,[V.value==="project"?(y(),x("div",mP,[ae.value&&ae.value.length>0?(y(),x("div",gP,[k(xt,{title:"Project Settings",description:"Default settings applied when creating new projects of this type."},{default:R(()=>[k(Pt,null,{default:R(()=>[c("div",yP,[(y(!0),x(J,null,ve(ae.value,b=>(y(),x(J,{key:b.id},[b.control==="toggle"?(y(),me(Be,{key:0,modelValue:A.value.project_types[V.value][b.id],"onUpdate:modelValue":G=>A.value.project_types[V.value][b.id]=G,label:b.label,description:b.description},null,8,["modelValue","onUpdate:modelValue","label","description"])):b.control==="select"?(y(),me(Cs,{key:1,modelValue:A.value.project_types[V.value][b.id],"onUpdate:modelValue":G=>A.value.project_types[V.value][b.id]=G,label:b.label,hint:b.hint},{default:R(()=>[(y(!0),x(J,null,ve(b.options,G=>(y(),x("option",{key:G.value,value:G.value},F(G.label),9,vP))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","label","hint"])):b.control==="text"?(y(),me(q,{key:2,modelValue:A.value.project_types[V.value][b.id],"onUpdate:modelValue":G=>A.value.project_types[V.value][b.id]=G,label:b.label,hint:b.hint,placeholder:b.placeholder},null,8,["modelValue","onUpdate:modelValue","label","hint","placeholder"])):U("",!0)],64))),128))])]),_:1})]),_:1})])):U("",!0),c("div",bP,[c("div",xP,[c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:C[7]||(C[7]=b=>Xe(`project-${V.value}-inputs`))}," Inputs "),c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:C[8]||(C[8]=b=>Xe(`project-${V.value}-workspaces`))}," Workspaces "),c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:C[9]||(C[9]=b=>Xe(`project-${V.value}-outputs`))}," Outputs "),c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:C[10]||(C[10]=b=>Xe(`project-${V.value}-utility`))}," Utility ")]),k($e,{variant:"secondary",size:"sm",class:"mt-3 sm:mt-0",onClick:C[11]||(C[11]=b=>Lt(V.value))},{default:R(()=>[...C[71]||(C[71]=[ie(" Reset to Defaults ",-1)])]),_:1})]),c("div",{id:`project-${V.value}-inputs`},[k(xt,{title:"Inputs",description:"Define the read-only locations where raw and prepared data live."},{default:R(()=>[(y(!0),x(J,null,ve(I.value,b=>(y(),x(J,{key:b.key},[nt(V.value,b.key)?(y(),me(q,{key:0,modelValue:A.value.project_types[V.value].directories[b.key],"onUpdate:modelValue":G=>A.value.project_types[V.value].directories[b.key]=G,label:b.label,hint:b.hint,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label","hint"])):U("",!0)],64))),128)),c("div",wP,[C[72]||(C[72]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Input Directories",-1)),k(Vt,{"model-value":ei(V.value,"input"),"onUpdate:modelValue":C[12]||(C[12]=b=>Us(V.value,"input",b)),"add-label":"Add Input Directory","default-item":()=>({key:"",label:"",path:"",type:"input",_id:Date.now()})},{default:R(({item:b,index:G,update:de})=>[c("div",SP,[k(q,{"model-value":b.key,"onUpdate:modelValue":pe=>de("key",pe),label:"Key",placeholder:"e.g., inputs_archive",error:Vs(b.key,V.value,"input",G),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),k(q,{"model-value":b.label,"onUpdate:modelValue":pe=>de("label",pe),label:"Label",placeholder:"e.g., Archive",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(q,{"model-value":b.path,"onUpdate:modelValue":pe=>de("path",pe),label:"Path",placeholder:"e.g., inputs/archive",error:xs(b.path),prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])])]),_:1})],8,kP),c("div",{id:`project-${V.value}-workspaces`},[k(xt,{title:"Workspaces",description:"Functions, notebooks, and scripts scaffolded into every project."},{default:R(()=>[(y(!0),x(J,null,ve(B.value,b=>(y(),x(J,{key:b.key},[nt(V.value,b.key)?(y(),me(q,{key:0,modelValue:A.value.project_types[V.value].directories[b.key],"onUpdate:modelValue":G=>A.value.project_types[V.value].directories[b.key]=G,label:b.label,hint:b.hint,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label","hint"])):U("",!0)],64))),128)),c("div",_P,[C[73]||(C[73]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Workspace Directories",-1)),k(Vt,{"model-value":ei(V.value,"workspace"),"onUpdate:modelValue":C[13]||(C[13]=b=>Us(V.value,"workspace",b)),"add-label":"Add Workspace Directory","default-item":()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:R(({item:b,index:G,update:de})=>[c("div",AP,[k(q,{"model-value":b.key,"onUpdate:modelValue":pe=>de("key",pe),label:"Key",placeholder:"e.g., tests",error:Vs(b.key,V.value,"workspace",G),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),k(q,{"model-value":b.label,"onUpdate:modelValue":pe=>de("label",pe),label:"Label",placeholder:"e.g., Tests",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(q,{"model-value":b.path,"onUpdate:modelValue":pe=>de("path",pe),label:"Path",placeholder:"e.g., tests",error:xs(b.path),prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])])]),_:1})],8,CP),c("div",{id:`project-${V.value}-outputs`},[k(xt,{title:"Outputs",description:"Outputs are public by default so results are easy to share."},{default:R(()=>[(y(!0),x(J,null,ve(Z.value,b=>(y(),x(J,{key:b.key},[nt(V.value,b.key)?(y(),me(q,{key:0,modelValue:A.value.project_types[V.value].directories[b.key],"onUpdate:modelValue":G=>A.value.project_types[V.value].directories[b.key]=G,label:b.label,hint:b.hint,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label","hint"])):U("",!0)],64))),128)),k(q,{modelValue:A.value.project_types[V.value].quarto.render_dir,"onUpdate:modelValue":C[14]||(C[14]=b=>A.value.project_types[V.value].quarto.render_dir=b),label:"Notebook output directory",hint:"Rendered notebooks and reports are written here by default.",prefix:"/",monospace:""},null,8,["modelValue"]),c("div",MP,[C[74]||(C[74]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Output Directories",-1)),k(Vt,{"model-value":ei(V.value,"output"),"onUpdate:modelValue":C[15]||(C[15]=b=>Us(V.value,"output",b)),"add-label":"Add Output Directory","default-item":()=>({key:"",label:"",path:"",type:"output",_id:Date.now()})},{default:R(({item:b,index:G,update:de})=>[c("div",DP,[k(q,{"model-value":b.key,"onUpdate:modelValue":pe=>de("key",pe),label:"Key",placeholder:"e.g., outputs_animations",error:Vs(b.key,V.value,"output",G),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),k(q,{"model-value":b.label,"onUpdate:modelValue":pe=>de("label",pe),label:"Label",placeholder:"e.g., Animations",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(q,{"model-value":b.path,"onUpdate:modelValue":pe=>de("path",pe),label:"Path",placeholder:"e.g., outputs/animations",error:xs(b.path),prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])])]),_:1})],8,VP),c("div",{id:`project-${V.value}-utility`},[k(xt,{title:"Utility directories",description:"Cache and scratch folders are gitignored so temporary artifacts never leak into version control."},{default:R(()=>[(y(!0),x(J,null,ve(ee.value,b=>(y(),x(J,{key:b.key},[nt(V.value,b.key)?(y(),me(q,{key:0,modelValue:A.value.project_types[V.value].directories[b.key],"onUpdate:modelValue":G=>A.value.project_types[V.value].directories[b.key]=G,label:b.label,hint:b.hint,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label","hint"])):U("",!0)],64))),128))]),_:1})],8,TP)])):V.value==="project_sensitive"?(y(),x("div",EP,[ae.value&&ae.value.length>0?(y(),x("div",$P,[k(xt,{title:"Project Settings",description:"Default settings applied when creating new projects of this type."},{default:R(()=>[k(Pt,null,{default:R(()=>[c("div",PP,[(y(!0),x(J,null,ve(ae.value,b=>(y(),x(J,{key:b.id},[b.control==="toggle"?(y(),me(Be,{key:0,modelValue:A.value.project_types[V.value][b.id],"onUpdate:modelValue":G=>A.value.project_types[V.value][b.id]=G,label:b.label,description:b.description},null,8,["modelValue","onUpdate:modelValue","label","description"])):b.control==="select"?(y(),me(Cs,{key:1,modelValue:A.value.project_types[V.value][b.id],"onUpdate:modelValue":G=>A.value.project_types[V.value][b.id]=G,label:b.label,hint:b.hint},{default:R(()=>[(y(!0),x(J,null,ve(b.options,G=>(y(),x("option",{key:G.value,value:G.value},F(G.label),9,OP))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","label","hint"])):b.control==="text"?(y(),me(q,{key:2,modelValue:A.value.project_types[V.value][b.id],"onUpdate:modelValue":G=>A.value.project_types[V.value][b.id]=G,label:b.label,hint:b.hint,placeholder:b.placeholder},null,8,["modelValue","onUpdate:modelValue","label","hint","placeholder"])):U("",!0)],64))),128))])]),_:1})]),_:1})])):U("",!0),c("div",RP,[c("div",jP,[c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:C[16]||(C[16]=b=>Xe(`project-${V.value}-workspaces`))}," Workspaces "),c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:C[17]||(C[17]=b=>Xe(`project-${V.value}-inputs-private`))}," Inputs "),c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:C[18]||(C[18]=b=>Xe(`project-${V.value}-outputs-private`))}," Outputs "),c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:C[19]||(C[19]=b=>Xe(`project-${V.value}-utility`))}," Utility ")]),k($e,{variant:"secondary",size:"sm",class:"mt-3 sm:mt-0",onClick:C[20]||(C[20]=b=>Lt(V.value))},{default:R(()=>[...C[75]||(C[75]=[ie(" Reset to Defaults ",-1)])]),_:1})]),c("div",{id:`project-${V.value}-workspaces`},[k(xt,{title:"Workspaces",description:"Module locations for notebooks, scripts, and helper functions."},{default:R(()=>[c("div",BP,[(y(!0),x(J,null,ve(B.value,b=>(y(),x(J,{key:`sensitive-${b.key}`},[nt(V.value,b.key)?(y(),me(q,{key:0,modelValue:A.value.project_types[V.value].directories[b.key],"onUpdate:modelValue":G=>A.value.project_types[V.value].directories[b.key]=G,label:b.label,hint:b.hint,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label","hint"])):U("",!0)],64))),128))]),c("div",IP,[C[76]||(C[76]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Workspace Directories",-1)),k(Vt,{"model-value":ei(V.value,"workspace"),"onUpdate:modelValue":C[21]||(C[21]=b=>Us(V.value,"workspace",b)),"add-label":"Add Workspace Directory","default-item":()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:R(({item:b,index:G,update:de})=>[c("div",UP,[k(q,{"model-value":b.key,"onUpdate:modelValue":pe=>de("key",pe),label:"Key",placeholder:"e.g., tests",error:Vs(b.key,V.value,"workspace",G),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),k(q,{"model-value":b.label,"onUpdate:modelValue":pe=>de("label",pe),label:"Label",placeholder:"e.g., Tests",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(q,{"model-value":b.path,"onUpdate:modelValue":pe=>de("path",pe),label:"Path",placeholder:"e.g., tests",error:xs(b.path),prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])])]),_:1})],8,LP),c("div",{id:`project-${V.value}-inputs-private`},[k(xt,{title:"Inputs",description:"Keep private inputs compartmentalized; publish processed outputs into public folders when ready."},{default:R(()=>[C[79]||(C[79]=c("div",{class:"grid gap-4 sm:grid-cols-2 text-xs font-semibold uppercase text-gray-500 dark:text-gray-400"},[c("div",null,"Private"),c("div",null,"Public")],-1)),(y(!0),x(J,null,ve(X.value,b=>(y(),x("div",{key:b.privateKey,class:"grid gap-4 sm:grid-cols-2"},[nt(V.value,b.privateKey)?(y(),me(q,{key:0,modelValue:A.value.project_types[V.value].directories[b.privateKey],"onUpdate:modelValue":G=>A.value.project_types[V.value].directories[b.privateKey]=G,label:b.privateLabel||`${b.label} (private)`,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label"])):U("",!0),nt(V.value,b.publicKey)?(y(),me(q,{key:1,modelValue:A.value.project_types[V.value].directories[b.publicKey],"onUpdate:modelValue":G=>A.value.project_types[V.value].directories[b.publicKey]=G,label:b.publicLabel||`${b.label} (public)`,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label"])):U("",!0)]))),128)),c("div",zP,[c("div",FP,[c("div",null,[C[77]||(C[77]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Private Inputs",-1)),k(Vt,{"model-value":ei(V.value,"input_private"),"onUpdate:modelValue":C[22]||(C[22]=b=>Us(V.value,"input_private",b)),"add-label":"Add Private Input","default-item":()=>({key:"",label:"",path:"",type:"input_private",_id:Date.now()})},{default:R(({item:b,index:G,update:de})=>[c("div",HP,[k(q,{"model-value":b.key,"onUpdate:modelValue":pe=>de("key",pe),label:"Key",placeholder:"e.g., inputs_archive",error:Vs(b.key,V.value,"input_private",G),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),k(q,{"model-value":b.label,"onUpdate:modelValue":pe=>de("label",pe),label:"Label",placeholder:"e.g., Archive",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(q,{"model-value":b.path,"onUpdate:modelValue":pe=>de("path",pe),label:"Path",placeholder:"e.g., inputs/archive",error:xs(b.path),prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])]),c("div",null,[C[78]||(C[78]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Public Inputs",-1)),k(Vt,{"model-value":ei(V.value,"input_public"),"onUpdate:modelValue":C[23]||(C[23]=b=>Us(V.value,"input_public",b)),"add-label":"Add Public Input","default-item":()=>({key:"",label:"",path:"",type:"input_public",_id:Date.now()})},{default:R(({item:b,index:G,update:de})=>[c("div",WP,[k(q,{"model-value":b.key,"onUpdate:modelValue":pe=>de("key",pe),label:"Key",placeholder:"e.g., inputs_public_archive",error:Vs(b.key,V.value,"input_public",G),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),k(q,{"model-value":b.label,"onUpdate:modelValue":pe=>de("label",pe),label:"Label",placeholder:"e.g., Archive (Public)",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(q,{"model-value":b.path,"onUpdate:modelValue":pe=>de("path",pe),label:"Path",placeholder:"e.g., inputs_public/archive",error:xs(b.path),prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])])])])]),_:1})],8,NP),c("div",{id:`project-${V.value}-outputs-private`},[k(xt,{title:"Outputs",description:"Review outputs before promotion; private folders remain gitignored while public copies are ready to share."},{default:R(()=>[C[82]||(C[82]=c("div",{class:"grid gap-4 sm:grid-cols-2 text-xs font-semibold uppercase text-gray-500 dark:text-gray-400"},[c("div",null,"Private"),c("div",null,"Public")],-1)),(y(!0),x(J,null,ve(z.value,b=>(y(),x("div",{key:b.privateKey,class:"grid gap-4 sm:grid-cols-2"},[nt(V.value,b.privateKey)?(y(),me(q,{key:0,modelValue:A.value.project_types[V.value].directories[b.privateKey],"onUpdate:modelValue":G=>A.value.project_types[V.value].directories[b.privateKey]=G,label:b.privateLabel||`${b.label} (private)`,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label"])):U("",!0),nt(V.value,b.publicKey)?(y(),me(q,{key:1,modelValue:A.value.project_types[V.value].directories[b.publicKey],"onUpdate:modelValue":G=>A.value.project_types[V.value].directories[b.publicKey]=G,label:b.publicLabel||`${b.label} (public)`,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label"])):U("",!0)]))),128)),k(q,{modelValue:A.value.project_types[V.value].quarto.render_dir,"onUpdate:modelValue":C[24]||(C[24]=b=>A.value.project_types[V.value].quarto.render_dir=b),label:"Notebook output directory",hint:"Rendered docs default to a public location but can be moved if needed.",prefix:"/",monospace:""},null,8,["modelValue"]),c("div",GP,[c("div",KP,[c("div",null,[C[80]||(C[80]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Private Outputs",-1)),k(Vt,{"model-value":ei(V.value,"output_private"),"onUpdate:modelValue":C[25]||(C[25]=b=>Us(V.value,"output_private",b)),"add-label":"Add Private Output","default-item":()=>({key:"",label:"",path:"",type:"output_private",_id:Date.now()})},{default:R(({item:b,index:G,update:de})=>[c("div",JP,[k(q,{"model-value":b.key,"onUpdate:modelValue":pe=>de("key",pe),label:"Key",placeholder:"e.g., outputs_animations",error:Vs(b.key,V.value,"output_private",G),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),k(q,{"model-value":b.label,"onUpdate:modelValue":pe=>de("label",pe),label:"Label",placeholder:"e.g., Animations",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(q,{"model-value":b.path,"onUpdate:modelValue":pe=>de("path",pe),label:"Path",placeholder:"e.g., outputs/animations",error:xs(b.path),prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])]),c("div",null,[C[81]||(C[81]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Public Outputs",-1)),k(Vt,{"model-value":ei(V.value,"output_public"),"onUpdate:modelValue":C[26]||(C[26]=b=>Us(V.value,"output_public",b)),"add-label":"Add Public Output","default-item":()=>({key:"",label:"",path:"",type:"output_public",_id:Date.now()})},{default:R(({item:b,index:G,update:de})=>[c("div",YP,[k(q,{"model-value":b.key,"onUpdate:modelValue":pe=>de("key",pe),label:"Key",placeholder:"e.g., outputs_public_animations",error:Vs(b.key,V.value,"output_public",G),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),k(q,{"model-value":b.label,"onUpdate:modelValue":pe=>de("label",pe),label:"Label",placeholder:"e.g., Animations (Public)",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(q,{"model-value":b.path,"onUpdate:modelValue":pe=>de("path",pe),label:"Path",placeholder:"e.g., outputs_public/animations",error:xs(b.path),prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])])])])]),_:1})],8,qP),c("div",{id:`project-${V.value}-utility`},[k(xt,{title:"Utility directories",description:"Keep cache and scratch in private space for safety; both remain gitignored."},{default:R(()=>[c("div",QP,[(y(!0),x(J,null,ve(ee.value,b=>(y(),x(J,{key:`sensitive-${b.key}`},[nt(V.value,b.key)?(y(),me(q,{key:0,modelValue:A.value.project_types[V.value].directories[b.key],"onUpdate:modelValue":G=>A.value.project_types[V.value].directories[b.key]=G,label:b.label,hint:b.hint,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label","hint"])):U("",!0)],64))),128))])]),_:1})],8,XP)])):V.value==="presentation"?(y(),x("div",ZP,[ae.value&&ae.value.length>0?(y(),x("div",eO,[k(xt,{title:"Project Settings",description:"Default settings applied when creating new projects of this type."},{default:R(()=>[k(Pt,null,{default:R(()=>[c("div",tO,[(y(!0),x(J,null,ve(ae.value,b=>(y(),x(J,{key:b.id},[b.control==="toggle"?(y(),me(Be,{key:0,modelValue:A.value.project_types[V.value][b.id],"onUpdate:modelValue":G=>A.value.project_types[V.value][b.id]=G,label:b.label,description:b.description},null,8,["modelValue","onUpdate:modelValue","label","description"])):b.control==="select"?(y(),me(Cs,{key:1,modelValue:A.value.project_types[V.value][b.id],"onUpdate:modelValue":G=>A.value.project_types[V.value][b.id]=G,label:b.label,hint:b.hint},{default:R(()=>[(y(!0),x(J,null,ve(b.options,G=>(y(),x("option",{key:G.value,value:G.value},F(G.label),9,sO))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","label","hint"])):b.control==="text"?(y(),me(q,{key:2,modelValue:A.value.project_types[V.value][b.id],"onUpdate:modelValue":G=>A.value.project_types[V.value][b.id]=G,label:b.label,hint:b.hint,placeholder:b.placeholder},null,8,["modelValue","onUpdate:modelValue","label","hint","placeholder"])):U("",!0)],64))),128))])]),_:1})]),_:1})])):U("",!0),c("div",iO,[c("div",nO,[c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:C[27]||(C[27]=b=>Xe(`project-${V.value}-primary`))}," Primary files "),c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:C[28]||(C[28]=b=>Xe(`project-${V.value}-optional`))}," Optional folders ")]),k($e,{variant:"secondary",size:"sm",class:"mt-3 sm:mt-0",onClick:C[29]||(C[29]=b=>Lt(V.value))},{default:R(()=>[...C[83]||(C[83]=[ie(" Reset to Defaults ",-1)])]),_:1})]),c("div",{id:`project-${V.value}-primary`},[k(xt,{title:"Primary files"},{default:R(()=>[c("div",oO,[k(q,{modelValue:A.value.project_types[V.value].directories.presentation_source,"onUpdate:modelValue":C[30]||(C[30]=b=>A.value.project_types[V.value].directories.presentation_source=b),label:"Presentation source file",hint:"Relative path to your primary presentation.qmd.",monospace:""},null,8,["modelValue"]),k(q,{modelValue:A.value.project_types[V.value].directories.rendered_slides,"onUpdate:modelValue":C[31]||(C[31]=b=>A.value.project_types[V.value].directories.rendered_slides=b),label:"Rendered slides directory",hint:"Rendered slides write to the project root by default ('.').",monospace:""},null,8,["modelValue"])])]),_:1})],8,rO),c("div",{id:`project-${V.value}-optional`},[k(xt,{title:"Optional folders",description:"Toggle extra scaffolding when you need supporting data, scripts, or helper utilities."},{default:R(()=>[c("div",aO,[c("div",uO,[k(Be,{modelValue:be.includeInputs,"onUpdate:modelValue":C[32]||(C[32]=b=>be.includeInputs=b),label:"Include inputs directory",description:"Adds an inputs/ folder for sample data used in the presentation."},null,8,["modelValue"]),be.includeInputs?(y(),me(q,{key:0,modelValue:A.value.project_types[V.value].directories.inputs,"onUpdate:modelValue":C[33]||(C[33]=b=>A.value.project_types[V.value].directories.inputs=b),label:"Inputs directory",prefix:"/",monospace:""},null,8,["modelValue"])):U("",!0)]),c("div",dO,[k(Be,{modelValue:be.includeScripts,"onUpdate:modelValue":C[34]||(C[34]=b=>be.includeScripts=b),label:"Include scripts directory",description:"Adds a scripts/ folder for demo code or automation."},null,8,["modelValue"]),be.includeScripts?(y(),me(q,{key:0,modelValue:A.value.project_types[V.value].directories.scripts,"onUpdate:modelValue":C[35]||(C[35]=b=>A.value.project_types[V.value].directories.scripts=b),label:"Scripts directory",prefix:"/",monospace:""},null,8,["modelValue"])):U("",!0)]),c("div",cO,[k(Be,{modelValue:be.includeFunctions,"onUpdate:modelValue":C[36]||(C[36]=b=>be.includeFunctions=b),label:"Include functions directory",description:"Adds R/functions for helper utilities that should load automatically."},null,8,["modelValue"]),be.includeFunctions?(y(),me(q,{key:0,modelValue:A.value.project_types[V.value].directories.functions,"onUpdate:modelValue":C[37]||(C[37]=b=>A.value.project_types[V.value].directories.functions=b),label:"Functions directory",prefix:"/",monospace:""},null,8,["modelValue"])):U("",!0)]),c("div",fO,[C[84]||(C[84]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Custom Directories",-1)),C[85]||(C[85]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Add any additional directories you need for your presentations.",-1)),k(Vt,{"model-value":A.value.project_types[V.value].extra_directories||[],"onUpdate:modelValue":C[38]||(C[38]=b=>A.value.project_types[V.value].extra_directories=b),"add-label":"Add Directory","default-item":()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:R(({item:b,index:G,update:de})=>[c("div",hO,[k(q,{"model-value":b.key,"onUpdate:modelValue":pe=>de("key",pe),label:"Key",placeholder:"e.g., assets",error:Vs(b.key,V.value,"workspace",G),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),k(q,{"model-value":b.label,"onUpdate:modelValue":pe=>de("label",pe),label:"Label",placeholder:"e.g., Assets",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(q,{"model-value":b.path,"onUpdate:modelValue":pe=>de("path",pe),label:"Path",placeholder:"e.g., assets",error:xs(b.path),prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])])])]),_:1})],8,lO)])):V.value==="course"?(y(),x("div",pO,[ae.value&&ae.value.length>0?(y(),x("div",mO,[k(xt,{title:"Project Settings",description:"Default settings applied when creating new projects of this type."},{default:R(()=>[k(Pt,null,{default:R(()=>[c("div",gO,[(y(!0),x(J,null,ve(ae.value,b=>(y(),x(J,{key:b.id},[b.control==="toggle"?(y(),me(Be,{key:0,modelValue:A.value.project_types[V.value][b.id],"onUpdate:modelValue":G=>A.value.project_types[V.value][b.id]=G,label:b.label,description:b.description},null,8,["modelValue","onUpdate:modelValue","label","description"])):b.control==="select"?(y(),me(Cs,{key:1,modelValue:A.value.project_types[V.value][b.id],"onUpdate:modelValue":G=>A.value.project_types[V.value][b.id]=G,label:b.label,hint:b.hint},{default:R(()=>[(y(!0),x(J,null,ve(b.options,G=>(y(),x("option",{key:G.value,value:G.value},F(G.label),9,yO))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","label","hint"])):b.control==="text"?(y(),me(q,{key:2,modelValue:A.value.project_types[V.value][b.id],"onUpdate:modelValue":G=>A.value.project_types[V.value][b.id]=G,label:b.label,hint:b.hint,placeholder:b.placeholder},null,8,["modelValue","onUpdate:modelValue","label","hint","placeholder"])):U("",!0)],64))),128))])]),_:1})]),_:1})])):U("",!0),c("div",vO,[c("div",bO,[c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:C[39]||(C[39]=b=>Xe(`project-${V.value}-core`))}," Core folders "),c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:C[40]||(C[40]=b=>Xe(`project-${V.value}-quarto`))}," Quarto render directory ")]),k($e,{variant:"secondary",size:"sm",class:"mt-3 sm:mt-0",onClick:C[41]||(C[41]=b=>Lt(V.value))},{default:R(()=>[...C[86]||(C[86]=[ie(" Reset to Defaults ",-1)])]),_:1})]),c("div",{id:`project-${V.value}-core`},[k(xt,{title:"Core folders",description:"Configure folders for course datasets, slide decks, assignments, and readings."},{default:R(()=>[c("div",kO,[k(q,{modelValue:A.value.project_types[V.value].directories.data,"onUpdate:modelValue":C[42]||(C[42]=b=>A.value.project_types[V.value].directories.data=b),label:"Course data",prefix:"/",monospace:"",hint:"Shared datasets distributed with the course."},null,8,["modelValue"]),k(q,{modelValue:A.value.project_types[V.value].directories.slides,"onUpdate:modelValue":C[43]||(C[43]=b=>A.value.project_types[V.value].directories.slides=b),label:"Slides",prefix:"/",monospace:"",hint:"Lecture slide sources."},null,8,["modelValue"]),k(q,{modelValue:A.value.project_types[V.value].directories.assignments,"onUpdate:modelValue":C[44]||(C[44]=b=>A.value.project_types[V.value].directories.assignments=b),label:"Assignments",prefix:"/",monospace:"",hint:"Homework or lab materials."},null,8,["modelValue"]),k(q,{modelValue:A.value.project_types[V.value].directories.course_docs,"onUpdate:modelValue":C[45]||(C[45]=b=>A.value.project_types[V.value].directories.course_docs=b),label:"Course documents",prefix:"/",monospace:"",hint:"Syllabus, policies, grading guides."},null,8,["modelValue"]),k(q,{modelValue:A.value.project_types[V.value].directories.readings,"onUpdate:modelValue":C[46]||(C[46]=b=>A.value.project_types[V.value].directories.readings=b),label:"Readings",prefix:"/",monospace:"",hint:"Assigned readings and references."},null,8,["modelValue"]),k(q,{modelValue:A.value.project_types[V.value].directories.notebooks,"onUpdate:modelValue":C[47]||(C[47]=b=>A.value.project_types[V.value].directories.notebooks=b),label:"Module notebooks",prefix:"/",monospace:"",hint:"Module notebooks or workshop materials."},null,8,["modelValue"])])]),_:1})],8,xO),c("div",{id:`project-${V.value}-quarto`},[k(xt,{title:"Quarto render directory",description:"Default location for rendered course documentation."},{default:R(()=>[k(q,{modelValue:A.value.project_types[V.value].quarto.render_dir,"onUpdate:modelValue":C[48]||(C[48]=b=>A.value.project_types[V.value].quarto.render_dir=b),label:"Render directory",prefix:"/",monospace:""},null,8,["modelValue"])]),_:1}),c("div",SO,[C[87]||(C[87]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Custom Directories",-1)),C[88]||(C[88]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Add any additional directories you need for your courses.",-1)),k(Vt,{"model-value":A.value.project_types[V.value].extra_directories||[],"onUpdate:modelValue":C[49]||(C[49]=b=>A.value.project_types[V.value].extra_directories=b),"add-label":"Add Directory","default-item":()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:R(({item:b,index:G,update:de})=>[c("div",CO,[k(q,{"model-value":b.key,"onUpdate:modelValue":pe=>de("key",pe),label:"Key",placeholder:"e.g., resources",error:Vs(b.key,V.value,"workspace",G),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),k(q,{"model-value":b.label,"onUpdate:modelValue":pe=>de("label",pe),label:"Label",placeholder:"e.g., Resources",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(q,{"model-value":b.path,"onUpdate:modelValue":pe=>de("path",pe),label:"Path",placeholder:"e.g., resources",error:xs(b.path),prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])])],8,wO)])):U("",!0)])):U("",!0)],512),[[gt,D.value==="structure"]]),He(c("div",_O,[k(xt,null,{default:R(()=>[c("div",AO,[c("div",VO,[k(Cs,{modelValue:A.value.defaults.notebook_format,"onUpdate:modelValue":C[50]||(C[50]=b=>A.value.defaults.notebook_format=b),label:"Default Format"},{default:R(()=>[...C[89]||(C[89]=[c("option",{value:"quarto"},"Quarto (.qmd)",-1),c("option",{value:"rmarkdown"},"RMarkdown (.Rmd)",-1)])]),_:1},8,["modelValue"])]),c("div",MO,[k(Pt,{title:"Notebook Stub",description:"This template populates every new notebook."},{default:R(()=>[k(er,{modelValue:Ne.notebook.contents,"onUpdate:modelValue":C[51]||(C[51]=b=>Ne.notebook.contents=b),language:"markdown","min-height":"500px",disabled:Ne.notebook.loading},null,8,["modelValue","disabled"]),Ne.notebook.loading?(y(),x("p",DO,"Loading notebook stub")):U("",!0),c("div",TO,[k($e,{size:"sm",variant:"secondary",onClick:C[52]||(C[52]=b=>Ke("notebook"))},{default:R(()=>[...C[90]||(C[90]=[ie("Restore Default",-1)])]),_:1})])]),_:1})]),c("div",EO,[k(Pt,{title:"Script Stub",description:"Used by `framework make:script` for quick task scaffolds."},{default:R(()=>[k(er,{modelValue:Ne.script.contents,"onUpdate:modelValue":C[53]||(C[53]=b=>Ne.script.contents=b),language:"r","min-height":"450px",disabled:Ne.script.loading},null,8,["modelValue","disabled"]),Ne.script.loading?(y(),x("p",$O,"Loading script stub")):U("",!0),c("div",PO,[k($e,{size:"sm",variant:"secondary",onClick:C[54]||(C[54]=b=>Ke("script"))},{default:R(()=>[...C[91]||(C[91]=[ie("Restore Default",-1)])]),_:1})])]),_:1})])])]),_:1})],512),[[gt,D.value==="notebooksScripts"]]),He(c("div",OO,[k(xt,{description:"Framework maintains context files for selected assistants and keeps them in sync before commits."},{default:R(()=>[k(Pt,null,{default:R(()=>[k(Be,{modelValue:A.value.defaults.ai_support,"onUpdate:modelValue":C[55]||(C[55]=b=>A.value.defaults.ai_support=b),label:"Enable AI Support",description:"Generate and sync assistant-specific context files."},null,8,["modelValue"])]),_:1}),k(Pt,{title:"Canonical context file",description:"This file is the source of truth; other instructions files are synced to it when AI hooks run."},{default:R(()=>[k(Cs,{modelValue:A.value.defaults.ai_canonical_file,"onUpdate:modelValue":C[56]||(C[56]=b=>A.value.defaults.ai_canonical_file=b),disabled:!A.value.defaults.ai_support,label:"Canonical Context File"},{default:R(()=>[...C[92]||(C[92]=[c("option",{value:"AGENTS.md"},"AGENTS.md (multi-agent orchestrator)",-1),c("option",{value:"CLAUDE.md"},"CLAUDE.md",-1),c("option",{value:".github/copilot-instructions.md"},".github/copilot-instructions.md",-1)])]),_:1},8,["modelValue","disabled"])]),_:1}),A.value.defaults.ai_support?(y(),x(J,{key:0},[k(Pt,{title:"Assistants",description:"Choose which assistants receive context updates."},{default:R(()=>[c("div",RO,[(y(),x(J,null,ve(p,b=>k(zs,{key:b.id,id:`ai-${b.id}`,modelValue:ge[b.id],"onUpdate:modelValue":G=>ge[b.id]=G,description:b.description},{default:R(()=>[ie(F(b.label),1)]),_:2},1032,["id","modelValue","onUpdate:modelValue","description"])),64))])]),_:1}),k(Pt,null,{default:R(()=>[k(Be,{modelValue:A.value.defaults.git_hooks.ai_sync,"onUpdate:modelValue":C[57]||(C[57]=b=>A.value.defaults.git_hooks.ai_sync=b),label:"Sync AI Files Before Commit",description:"Update non-canonical files so assistants share the same instructions."},null,8,["modelValue"])]),_:1}),k(Pt,{title:"Canonical instructions",description:"Edit the canonical file directly. Restore defaults if you want to start over."},{default:R(()=>[k(er,{modelValue:Ne.canonical.contents,"onUpdate:modelValue":C[58]||(C[58]=b=>Ne.canonical.contents=b),language:"markdown","min-height":"500px",disabled:Ne.canonical.loading||!A.value.defaults.ai_support},null,8,["modelValue","disabled"]),c("div",jO,[k($e,{size:"sm",variant:"secondary",disabled:Ne.canonical.loading,onClick:Je},{default:R(()=>[...C[93]||(C[93]=[ie("Restore Default",-1)])]),_:1},8,["disabled"])])]),_:1})],64)):U("",!0)]),_:1})],512),[[gt,D.value==="ai"]]),He(c("div",LO,[k(xt,{description:"Configure how Framework initializes repositories and stamps commits."},{default:R(()=>[k(Pt,null,{default:R(()=>[k(Be,{modelValue:A.value.defaults.use_git,"onUpdate:modelValue":C[59]||(C[59]=b=>A.value.defaults.use_git=b),label:"Initialize Git",description:"Run git init for every new project."},null,8,["modelValue"])]),_:1}),k(Pt,{title:"Git identity",description:"Overrides Author Information when provided."},{default:R(()=>[c("div",BO,[k(q,{modelValue:A.value.git.user_name,"onUpdate:modelValue":C[60]||(C[60]=b=>A.value.git.user_name=b),label:"Git Name",placeholder:"Jane Analyst"},null,8,["modelValue"]),k(q,{modelValue:A.value.git.user_email,"onUpdate:modelValue":C[61]||(C[61]=b=>A.value.git.user_email=b),label:"Git Email",placeholder:"jane@example.com",hint:"Used for git config user.email during project setup."},null,8,["modelValue"])])]),_:1})]),_:1})],512),[[gt,D.value==="git"]]),He(c("div",IO,[k(xt,{description:"Define how Framework manages renv and which packages load automatically in new projects."},{default:R(()=>[k(Pt,null,{default:R(()=>[k(Be,{modelValue:A.value.defaults.use_renv,"onUpdate:modelValue":C[62]||(C[62]=b=>A.value.defaults.use_renv=b),label:"Enable renv",description:"Create renv environments for new projects."},null,8,["modelValue"])]),_:1}),k(Pt,{title:"Default packages",description:"Installed (and optionally attached) when scaffold() runs."},{default:R(()=>[c("div",UO,[C[95]||(C[95]=c("p",{class:"text-xs text-gray-600 dark:text-gray-400"},"Use this list to preseed notebooks with your preferred helpers.",-1)),k($e,{size:"sm",variant:"secondary",onClick:Is},{default:R(()=>[...C[94]||(C[94]=[ie("Add Package",-1)])]),_:1})]),A.value.defaults.packages.length?(y(),x("div",NO,[(y(!0),x(J,null,ve(A.value.defaults.packages,(b,G)=>(y(),x("div",{key:`pkg-${G}`,class:"flex flex-col gap-3 rounded-md border border-gray-200 p-3 dark:border-gray-700 sm:flex-row sm:items-center"},[k(q,{modelValue:b.name,"onUpdate:modelValue":de=>b.name=de,label:"Package",placeholder:"dplyr",class:"sm:flex-1"},null,8,["modelValue","onUpdate:modelValue"]),k(Be,{modelValue:b.auto_attach,"onUpdate:modelValue":de=>b.auto_attach=de,label:"Auto-Attach",description:"Call library() in notebooks."},null,8,["modelValue","onUpdate:modelValue"]),k($e,{size:"xs",variant:"secondary",onClick:de=>hn(G)},{default:R(()=>[...C[96]||(C[96]=[ie("Remove",-1)])]),_:1},8,["onClick"])]))),128))])):(y(),x("p",zO,"No packages configured. Add packages to include tidyverse helpers or internal utilities automatically."))]),_:1})]),_:1})],512),[[gt,D.value==="packages"]]),He(c("div",FO,[k(xt,null,{default:R(()=>[k(Pt,null,{default:R(()=>[k(Be,{modelValue:A.value.privacy.secret_scan,"onUpdate:modelValue":C[63]||(C[63]=b=>A.value.privacy.secret_scan=b),label:"Check for Secrets",description:"Run a lightweight scan for API keys and credentials before commits."},null,8,["modelValue"])]),_:1}),k(Pt,{title:"Universal .gitignore",description:"Patterns from this template are applied to every new project."},{default:R(()=>[k(er,{modelValue:Ne.gitignore.contents,"onUpdate:modelValue":C[64]||(C[64]=b=>Ne.gitignore.contents=b),language:"text","min-height":"500px",disabled:Ne.gitignore.loading},null,8,["modelValue","disabled"]),Ne.gitignore.loading?(y(),x("p",HO,"Loading .gitignore template")):U("",!0),W.value.length?(y(),x("div",WO,[C[97]||(C[97]=c("p",{class:"font-medium text-gray-700 dark:text-gray-300 mb-1"},"Recommended private directories:",-1)),c("ul",qO,[(y(!0),x(J,null,ve(W.value,b=>(y(),x("li",{key:b},"/"+F(b),1))),128))])])):U("",!0),c("div",GO,[k($e,{size:"sm",variant:"secondary",onClick:C[65]||(C[65]=b=>Ke(P.value.value,"gitignore"))},{default:R(()=>[...C[98]||(C[98]=[ie("Restore Default",-1)])]),_:1})])]),_:1})]),_:1})],512),[[gt,D.value==="privacy"]])])]),k(bo,{modelValue:qe.open,"onUpdate:modelValue":C[68]||(C[68]=b=>qe.open=b),size:"lg",title:qe.title},{default:R(()=>[c("p",KO,F(qe.description),1),k(nc,{modelValue:qe.contents,"onUpdate:modelValue":C[66]||(C[66]=b=>qe.contents=b),rows:18,monospace:""},null,8,["modelValue"])]),actions:R(()=>[c("div",JO,[k($e,{variant:"secondary",onClick:C[67]||(C[67]=b=>qe.open=!1)},{default:R(()=>[...C[99]||(C[99]=[ie("Cancel",-1)])]),_:1}),k($e,{variant:"primary",disabled:qe.loading,onClick:is},{default:R(()=>[ie(F(qe.loading?"Saving":"Save Template"),1)]),_:1},8,["disabled"])])]),_:1},8,["modelValue","title"])]))}},ZO={class:"mx-auto max-w-5xl p-10"},eR={__name:"ProjectPackagesView",setup(t){return he([]),es(async()=>{}),(e,s)=>(y(),x("div",ZO,[k(Ar,{title:"Packages",description:"Manage R packages for this project."}),s[0]||(s[0]=Da('<div class="mt-10 rounded-2xl border border-zinc-200 bg-white p-8 shadow-sm dark:border-zinc-800 dark:bg-zinc-900"><div class="flex items-center gap-3 border-b border-zinc-100 pb-6 dark:border-zinc-800"><div class="flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-sky-500 to-sky-600 shadow-lg shadow-sky-500/20"><svg class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg></div><h3 class="text-xl font-bold text-zinc-900 dark:text-white">Package Configuration</h3></div><div class="mt-8"><p class="text-sm text-zinc-600 dark:text-zinc-400"> Package management interface coming soon. This page will allow you to: </p><ul class="mt-4 space-y-2 text-sm text-zinc-600 dark:text-zinc-400"><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Add and remove project packages </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Specify package versions </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Toggle renv integration </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Install and update packages </li></ul></div></div>',1))]))}},tR={class:"mx-auto max-w-5xl p-10"},sR={__name:"ProjectDataView",setup(t){return he([]),es(async()=>{}),(e,s)=>(y(),x("div",tR,[k(Ar,{title:"Data",description:"Manage data catalog and sources for this project."}),s[0]||(s[0]=Da('<div class="mt-10 rounded-2xl border border-zinc-200 bg-white p-8 shadow-sm dark:border-zinc-800 dark:bg-zinc-900"><div class="flex items-center gap-3 border-b border-zinc-100 pb-6 dark:border-zinc-800"><div class="flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-sky-500 to-sky-600 shadow-lg shadow-sky-500/20"><svg class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"></path></svg></div><h3 class="text-xl font-bold text-zinc-900 dark:text-white">Data Catalog</h3></div><div class="mt-8"><p class="text-sm text-zinc-600 dark:text-zinc-400"> Data catalog management interface coming soon. This page will allow you to: </p><ul class="mt-4 space-y-2 text-sm text-zinc-600 dark:text-zinc-400"><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Define data sources in the catalog </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Specify data formats (CSV, RDS, etc.) </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Configure encryption settings </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Track data integrity via digests </li></ul></div></div>',1))]))}},iR={class:"mx-auto max-w-5xl p-10"},nR={__name:"ProjectConnectionsView",setup(t){return he([]),es(async()=>{}),(e,s)=>(y(),x("div",iR,[k(Ar,{title:"Connections",description:"Manage database connections for this project."}),s[0]||(s[0]=Da('<div class="mt-10 rounded-2xl border border-zinc-200 bg-white p-8 shadow-sm dark:border-zinc-800 dark:bg-zinc-900"><div class="flex items-center gap-3 border-b border-zinc-100 pb-6 dark:border-zinc-800"><div class="flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-sky-500 to-sky-600 shadow-lg shadow-sky-500/20"><svg class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg></div><h3 class="text-xl font-bold text-zinc-900 dark:text-white">Database Connections</h3></div><div class="mt-8"><p class="text-sm text-zinc-600 dark:text-zinc-400"> Connection management interface coming soon. This page will allow you to: </p><ul class="mt-4 space-y-2 text-sm text-zinc-600 dark:text-zinc-400"><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Configure database connections (SQLite, PostgreSQL) </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Store connection credentials securely </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Test database connectivity </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Manage connection pooling settings </li></ul></div></div>',1))]))}},rR=[{path:"/",redirect:"/projects"},{path:"/docs",name:"docs",component:Ch},{path:"/docs/:functionName",name:"doc-detail",component:Ch,props:!0},{path:"/projects",name:"projects",component:r4},{path:"/projects/new",name:"project-create",component:gD},{path:"/project/:id",name:"project-detail",component:z$,props:!0},{path:"/settings/:section?/:subsection?",name:"settings",component:QO,props:!0},{path:"/project/packages",name:"project-packages",component:eR},{path:"/project/data",name:"project-data",component:sR},{path:"/project/connections",name:"project-connections",component:nR}],oR=jk({history:pk(),routes:rR});Ax(Sw).use(oR).mount("#app");
