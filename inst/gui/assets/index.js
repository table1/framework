(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function s(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(n){if(n.ep)return;n.ep=!0;const r=s(n);fetch(n.href,r)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function nc(t){const e=Object.create(null);for(const s of t.split(","))e[s]=1;return s=>s in e}const ct={},er=[],pi=()=>{},dm=()=>!1,ya=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),rc=t=>t.startsWith("onUpdate:"),It=Object.assign,oc=(t,e)=>{const s=t.indexOf(e);s>-1&&t.splice(s,1)},i1=Object.prototype.hasOwnProperty,nt=(t,e)=>i1.call(t,e),Le=Array.isArray,tr=t=>Ro(t)==="[object Map]",wr=t=>Ro(t)==="[object Set]",gf=t=>Ro(t)==="[object Date]",ze=t=>typeof t=="function",wt=t=>typeof t=="string",Ws=t=>typeof t=="symbol",at=t=>t!==null&&typeof t=="object",cm=t=>(at(t)||ze(t))&&ze(t.then)&&ze(t.catch),fm=Object.prototype.toString,Ro=t=>fm.call(t),n1=t=>Ro(t).slice(8,-1),hm=t=>Ro(t)==="[object Object]",lc=t=>wt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Hr=nc(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),va=t=>{const e=Object.create(null);return(s=>e[s]||(e[s]=t(s)))},r1=/-\w/g,Ls=va(t=>t.replace(r1,e=>e.slice(1).toUpperCase())),o1=/\B([A-Z])/g,Un=va(t=>t.replace(o1,"-$1").toLowerCase()),ba=va(t=>t.charAt(0).toUpperCase()+t.slice(1)),eu=va(t=>t?`on${ba(t)}`:""),en=(t,e)=>!Object.is(t,e),Cl=(t,...e)=>{for(let s=0;s<t.length;s++)t[s](...e)},pm=(t,e,s,i=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:i,value:s})},Ul=t=>{const e=parseFloat(t);return isNaN(e)?t:e},l1=t=>{const e=wt(t)?Number(t):NaN;return isNaN(e)?t:e};let yf;const xa=()=>yf||(yf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function oo(t){if(Le(t)){const e={};for(let s=0;s<t.length;s++){const i=t[s],n=wt(i)?c1(i):oo(i);if(n)for(const r in n)e[r]=n[r]}return e}else if(wt(t)||at(t))return t}const a1=/;(?![^(]*\))/g,u1=/:([^]+)/,d1=/\/\*[^]*?\*\//g;function c1(t){const e={};return t.replace(d1,"").split(a1).forEach(s=>{if(s){const i=s.split(u1);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function Ve(t){let e="";if(wt(t))e=t;else if(Le(t))for(let s=0;s<t.length;s++){const i=Ve(t[s]);i&&(e+=i+" ")}else if(at(t))for(const s in t)t[s]&&(e+=s+" ");return e.trim()}const f1="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",h1=nc(f1);function mm(t){return!!t||t===""}function p1(t,e){if(t.length!==e.length)return!1;let s=!0;for(let i=0;s&&i<t.length;i++)s=On(t[i],e[i]);return s}function On(t,e){if(t===e)return!0;let s=gf(t),i=gf(e);if(s||i)return s&&i?t.getTime()===e.getTime():!1;if(s=Ws(t),i=Ws(e),s||i)return t===e;if(s=Le(t),i=Le(e),s||i)return s&&i?p1(t,e):!1;if(s=at(t),i=at(e),s||i){if(!s||!i)return!1;const n=Object.keys(t).length,r=Object.keys(e).length;if(n!==r)return!1;for(const o in t){const l=t.hasOwnProperty(o),a=e.hasOwnProperty(o);if(l&&!a||!l&&a||!On(t[o],e[o]))return!1}}return String(t)===String(e)}function ac(t,e){return t.findIndex(s=>On(s,e))}const gm=t=>!!(t&&t.__v_isRef===!0),F=t=>wt(t)?t:t==null?"":Le(t)||at(t)&&(t.toString===fm||!ze(t.toString))?gm(t)?F(t.value):JSON.stringify(t,ym,2):String(t),ym=(t,e)=>gm(e)?ym(t,e.value):tr(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((s,[i,n],r)=>(s[tu(i,r)+" =>"]=n,s),{})}:wr(e)?{[`Set(${e.size})`]:[...e.values()].map(s=>tu(s))}:Ws(e)?tu(e):at(e)&&!Le(e)&&!hm(e)?String(e):e,tu=(t,e="")=>{var s;return Ws(t)?`Symbol(${(s=t.description)!=null?s:e})`:t};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ps;class m1{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ps,!e&&ps&&(this.index=(ps.scopes||(ps.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].pause();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].resume();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].resume()}}run(e){if(this._active){const s=ps;try{return ps=this,e()}finally{ps=s}}}on(){++this._on===1&&(this.prevScope=ps,ps=this)}off(){this._on>0&&--this._on===0&&(ps=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let s,i;for(s=0,i=this.effects.length;s<i;s++)this.effects[s].stop();for(this.effects.length=0,s=0,i=this.cleanups.length;s<i;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,i=this.scopes.length;s<i;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function g1(){return ps}let ht;const su=new WeakSet;class vm{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ps&&ps.active&&ps.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,su.has(this)&&(su.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||xm(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,vf(this),km(this);const e=ht,s=zs;ht=this,zs=!0;try{return this.fn()}finally{wm(this),ht=e,zs=s,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)cc(e);this.deps=this.depsTail=void 0,vf(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?su.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Hu(this)&&this.run()}get dirty(){return Hu(this)}}let bm=0,Wr,qr;function xm(t,e=!1){if(t.flags|=8,e){t.next=qr,qr=t;return}t.next=Wr,Wr=t}function uc(){bm++}function dc(){if(--bm>0)return;if(qr){let e=qr;for(qr=void 0;e;){const s=e.next;e.next=void 0,e.flags&=-9,e=s}}let t;for(;Wr;){let e=Wr;for(Wr=void 0;e;){const s=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(i){t||(t=i)}e=s}}if(t)throw t}function km(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function wm(t){let e,s=t.depsTail,i=s;for(;i;){const n=i.prevDep;i.version===-1?(i===s&&(s=n),cc(i),y1(i)):e=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=n}t.deps=e,t.depsTail=s}function Hu(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Sm(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Sm(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===lo)||(t.globalVersion=lo,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Hu(t))))return;t.flags|=2;const e=t.dep,s=ht,i=zs;ht=t,zs=!0;try{km(t);const n=t.fn(t._value);(e.version===0||en(n,t._value))&&(t.flags|=128,t._value=n,e.version++)}catch(n){throw e.version++,n}finally{ht=s,zs=i,wm(t),t.flags&=-3}}function cc(t,e=!1){const{dep:s,prevSub:i,nextSub:n}=t;if(i&&(i.nextSub=n,t.prevSub=void 0),n&&(n.prevSub=i,t.nextSub=void 0),s.subs===t&&(s.subs=i,!i&&s.computed)){s.computed.flags&=-5;for(let r=s.computed.deps;r;r=r.nextDep)cc(r,!0)}!e&&!--s.sc&&s.map&&s.map.delete(s.key)}function y1(t){const{prevDep:e,nextDep:s}=t;e&&(e.nextDep=s,t.prevDep=void 0),s&&(s.prevDep=e,t.nextDep=void 0)}let zs=!0;const _m=[];function $i(){_m.push(zs),zs=!1}function Oi(){const t=_m.pop();zs=t===void 0?!0:t}function vf(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const s=ht;ht=void 0;try{e()}finally{ht=s}}}let lo=0;class v1{constructor(e,s){this.sub=e,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class fc{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!ht||!zs||ht===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==ht)s=this.activeLink=new v1(ht,this),ht.deps?(s.prevDep=ht.depsTail,ht.depsTail.nextDep=s,ht.depsTail=s):ht.deps=ht.depsTail=s,Cm(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const i=s.nextDep;i.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=i),s.prevDep=ht.depsTail,s.nextDep=void 0,ht.depsTail.nextDep=s,ht.depsTail=s,ht.deps===s&&(ht.deps=i)}return s}trigger(e){this.version++,lo++,this.notify(e)}notify(e){uc();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{dc()}}}function Cm(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let i=e.deps;i;i=i.nextDep)Cm(i)}const s=t.dep.subs;s!==t&&(t.prevSub=s,s&&(s.nextSub=t)),t.dep.subs=t}}const Wu=new WeakMap,Dn=Symbol(""),qu=Symbol(""),ao=Symbol("");function Jt(t,e,s){if(zs&&ht){let i=Wu.get(t);i||Wu.set(t,i=new Map);let n=i.get(s);n||(i.set(s,n=new fc),n.map=i,n.key=s),n.track()}}function Vi(t,e,s,i,n,r){const o=Wu.get(t);if(!o){lo++;return}const l=a=>{a&&a.trigger()};if(uc(),e==="clear")o.forEach(l);else{const a=Le(t),d=a&&lc(s);if(a&&s==="length"){const u=Number(i);o.forEach((f,h)=>{(h==="length"||h===ao||!Ws(h)&&h>=u)&&l(f)})}else switch((s!==void 0||o.has(void 0))&&l(o.get(s)),d&&l(o.get(ao)),e){case"add":a?d&&l(o.get("length")):(l(o.get(Dn)),tr(t)&&l(o.get(qu)));break;case"delete":a||(l(o.get(Dn)),tr(t)&&l(o.get(qu)));break;case"set":tr(t)&&l(o.get(Dn));break}}dc()}function Hn(t){const e=st(t);return e===t?e:(Jt(e,"iterate",ao),Os(t)?e:e.map(zt))}function ka(t){return Jt(t=st(t),"iterate",ao),t}const b1={__proto__:null,[Symbol.iterator](){return iu(this,Symbol.iterator,zt)},concat(...t){return Hn(this).concat(...t.map(e=>Le(e)?Hn(e):e))},entries(){return iu(this,"entries",t=>(t[1]=zt(t[1]),t))},every(t,e){return xi(this,"every",t,e,void 0,arguments)},filter(t,e){return xi(this,"filter",t,e,s=>s.map(zt),arguments)},find(t,e){return xi(this,"find",t,e,zt,arguments)},findIndex(t,e){return xi(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return xi(this,"findLast",t,e,zt,arguments)},findLastIndex(t,e){return xi(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return xi(this,"forEach",t,e,void 0,arguments)},includes(...t){return nu(this,"includes",t)},indexOf(...t){return nu(this,"indexOf",t)},join(t){return Hn(this).join(t)},lastIndexOf(...t){return nu(this,"lastIndexOf",t)},map(t,e){return xi(this,"map",t,e,void 0,arguments)},pop(){return Dr(this,"pop")},push(...t){return Dr(this,"push",t)},reduce(t,...e){return bf(this,"reduce",t,e)},reduceRight(t,...e){return bf(this,"reduceRight",t,e)},shift(){return Dr(this,"shift")},some(t,e){return xi(this,"some",t,e,void 0,arguments)},splice(...t){return Dr(this,"splice",t)},toReversed(){return Hn(this).toReversed()},toSorted(t){return Hn(this).toSorted(t)},toSpliced(...t){return Hn(this).toSpliced(...t)},unshift(...t){return Dr(this,"unshift",t)},values(){return iu(this,"values",zt)}};function iu(t,e,s){const i=ka(t),n=i[e]();return i!==t&&!Os(t)&&(n._next=n.next,n.next=()=>{const r=n._next();return r.done||(r.value=s(r.value)),r}),n}const x1=Array.prototype;function xi(t,e,s,i,n,r){const o=ka(t),l=o!==t&&!Os(t),a=o[e];if(a!==x1[e]){const f=a.apply(t,r);return l?zt(f):f}let d=s;o!==t&&(l?d=function(f,h){return s.call(this,zt(f),h,t)}:s.length>2&&(d=function(f,h){return s.call(this,f,h,t)}));const u=a.call(o,d,i);return l&&n?n(u):u}function bf(t,e,s,i){const n=ka(t);let r=s;return n!==t&&(Os(t)?s.length>3&&(r=function(o,l,a){return s.call(this,o,l,a,t)}):r=function(o,l,a){return s.call(this,o,zt(l),a,t)}),n[e](r,...i)}function nu(t,e,s){const i=st(t);Jt(i,"iterate",ao);const n=i[e](...s);return(n===-1||n===!1)&&mc(s[0])?(s[0]=st(s[0]),i[e](...s)):n}function Dr(t,e,s=[]){$i(),uc();const i=st(t)[e].apply(t,s);return dc(),Oi(),i}const k1=nc("__proto__,__v_isRef,__isVue"),Am=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Ws));function w1(t){Ws(t)||(t=String(t));const e=st(this);return Jt(e,"has",t),e.hasOwnProperty(t)}class Vm{constructor(e=!1,s=!1){this._isReadonly=e,this._isShallow=s}get(e,s,i){if(s==="__v_skip")return e.__v_skip;const n=this._isReadonly,r=this._isShallow;if(s==="__v_isReactive")return!n;if(s==="__v_isReadonly")return n;if(s==="__v_isShallow")return r;if(s==="__v_raw")return i===(n?r?$1:Em:r?Tm:Dm).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(i)?e:void 0;const o=Le(e);if(!n){let a;if(o&&(a=b1[s]))return a;if(s==="hasOwnProperty")return w1}const l=Reflect.get(e,s,Zt(e)?e:i);if((Ws(s)?Am.has(s):k1(s))||(n||Jt(e,"get",s),r))return l;if(Zt(l)){const a=o&&lc(s)?l:l.value;return n&&at(a)?Ku(a):a}return at(l)?n?Ku(l):ci(l):l}}class Mm extends Vm{constructor(e=!1){super(!1,e)}set(e,s,i,n){let r=e[s];if(!this._isShallow){const a=sn(r);if(!Os(i)&&!sn(i)&&(r=st(r),i=st(i)),!Le(e)&&Zt(r)&&!Zt(i))return a||(r.value=i),!0}const o=Le(e)&&lc(s)?Number(s)<e.length:nt(e,s),l=Reflect.set(e,s,i,Zt(e)?e:n);return e===st(n)&&(o?en(i,r)&&Vi(e,"set",s,i):Vi(e,"add",s,i)),l}deleteProperty(e,s){const i=nt(e,s);e[s];const n=Reflect.deleteProperty(e,s);return n&&i&&Vi(e,"delete",s,void 0),n}has(e,s){const i=Reflect.has(e,s);return(!Ws(s)||!Am.has(s))&&Jt(e,"has",s),i}ownKeys(e){return Jt(e,"iterate",Le(e)?"length":Dn),Reflect.ownKeys(e)}}class S1 extends Vm{constructor(e=!1){super(!0,e)}set(e,s){return!0}deleteProperty(e,s){return!0}}const _1=new Mm,C1=new S1,A1=new Mm(!0);const Gu=t=>t,Yo=t=>Reflect.getPrototypeOf(t);function V1(t,e,s){return function(...i){const n=this.__v_raw,r=st(n),o=tr(r),l=t==="entries"||t===Symbol.iterator&&o,a=t==="keys"&&o,d=n[t](...i),u=s?Gu:e?Nl:zt;return!e&&Jt(r,"iterate",a?qu:Dn),{next(){const{value:f,done:h}=d.next();return h?{value:f,done:h}:{value:l?[u(f[0]),u(f[1])]:u(f),done:h}},[Symbol.iterator](){return this}}}}function Xo(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function M1(t,e){const s={get(n){const r=this.__v_raw,o=st(r),l=st(n);t||(en(n,l)&&Jt(o,"get",n),Jt(o,"get",l));const{has:a}=Yo(o),d=e?Gu:t?Nl:zt;if(a.call(o,n))return d(r.get(n));if(a.call(o,l))return d(r.get(l));r!==o&&r.get(n)},get size(){const n=this.__v_raw;return!t&&Jt(st(n),"iterate",Dn),n.size},has(n){const r=this.__v_raw,o=st(r),l=st(n);return t||(en(n,l)&&Jt(o,"has",n),Jt(o,"has",l)),n===l?r.has(n):r.has(n)||r.has(l)},forEach(n,r){const o=this,l=o.__v_raw,a=st(l),d=e?Gu:t?Nl:zt;return!t&&Jt(a,"iterate",Dn),l.forEach((u,f)=>n.call(r,d(u),d(f),o))}};return It(s,t?{add:Xo("add"),set:Xo("set"),delete:Xo("delete"),clear:Xo("clear")}:{add(n){!e&&!Os(n)&&!sn(n)&&(n=st(n));const r=st(this);return Yo(r).has.call(r,n)||(r.add(n),Vi(r,"add",n,n)),this},set(n,r){!e&&!Os(r)&&!sn(r)&&(r=st(r));const o=st(this),{has:l,get:a}=Yo(o);let d=l.call(o,n);d||(n=st(n),d=l.call(o,n));const u=a.call(o,n);return o.set(n,r),d?en(r,u)&&Vi(o,"set",n,r):Vi(o,"add",n,r),this},delete(n){const r=st(this),{has:o,get:l}=Yo(r);let a=o.call(r,n);a||(n=st(n),a=o.call(r,n)),l&&l.call(r,n);const d=r.delete(n);return a&&Vi(r,"delete",n,void 0),d},clear(){const n=st(this),r=n.size!==0,o=n.clear();return r&&Vi(n,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(n=>{s[n]=V1(n,t,e)}),s}function hc(t,e){const s=M1(t,e);return(i,n,r)=>n==="__v_isReactive"?!t:n==="__v_isReadonly"?t:n==="__v_raw"?i:Reflect.get(nt(s,n)&&n in i?s:i,n,r)}const D1={get:hc(!1,!1)},T1={get:hc(!1,!0)},E1={get:hc(!0,!1)};const Dm=new WeakMap,Tm=new WeakMap,Em=new WeakMap,$1=new WeakMap;function O1(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function P1(t){return t.__v_skip||!Object.isExtensible(t)?0:O1(n1(t))}function ci(t){return sn(t)?t:pc(t,!1,_1,D1,Dm)}function $m(t){return pc(t,!1,A1,T1,Tm)}function Ku(t){return pc(t,!0,C1,E1,Em)}function pc(t,e,s,i,n){if(!at(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const r=P1(t);if(r===0)return t;const o=n.get(t);if(o)return o;const l=new Proxy(t,r===2?i:s);return n.set(t,l),l}function sr(t){return sn(t)?sr(t.__v_raw):!!(t&&t.__v_isReactive)}function sn(t){return!!(t&&t.__v_isReadonly)}function Os(t){return!!(t&&t.__v_isShallow)}function mc(t){return t?!!t.__v_raw:!1}function st(t){const e=t&&t.__v_raw;return e?st(e):t}function j1(t){return!nt(t,"__v_skip")&&Object.isExtensible(t)&&pm(t,"__v_skip",!0),t}const zt=t=>at(t)?ci(t):t,Nl=t=>at(t)?Ku(t):t;function Zt(t){return t?t.__v_isRef===!0:!1}function fe(t){return Om(t,!1)}function R1(t){return Om(t,!0)}function Om(t,e){return Zt(t)?t:new L1(t,e)}class L1{constructor(e,s){this.dep=new fc,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?e:st(e),this._value=s?e:zt(e),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(e){const s=this._rawValue,i=this.__v_isShallow||Os(e)||sn(e);e=i?e:st(e),en(e,s)&&(this._rawValue=e,this._value=i?e:zt(e),this.dep.trigger())}}function ot(t){return Zt(t)?t.value:t}const B1={get:(t,e,s)=>e==="__v_raw"?t:ot(Reflect.get(t,e,s)),set:(t,e,s,i)=>{const n=t[e];return Zt(n)&&!Zt(s)?(n.value=s,!0):Reflect.set(t,e,s,i)}};function Pm(t){return sr(t)?t:new Proxy(t,B1)}class I1{constructor(e,s,i){this.fn=e,this.setter=s,this._value=void 0,this.dep=new fc(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=lo-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&ht!==this)return xm(this,!0),!0}get value(){const e=this.dep.track();return Sm(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function U1(t,e,s=!1){let i,n;return ze(t)?i=t:(i=t.get,n=t.set),new I1(i,n,s)}const Qo={},zl=new WeakMap;let vn;function N1(t,e=!1,s=vn){if(s){let i=zl.get(s);i||zl.set(s,i=[]),i.push(t)}}function z1(t,e,s=ct){const{immediate:i,deep:n,once:r,scheduler:o,augmentJob:l,call:a}=s,d=D=>n?D:Os(D)||n===!1||n===0?Mi(D,1):Mi(D);let u,f,h,m,w=!1,_=!1;if(Zt(t)?(f=()=>t.value,w=Os(t)):sr(t)?(f=()=>d(t),w=!0):Le(t)?(_=!0,w=t.some(D=>sr(D)||Os(D)),f=()=>t.map(D=>{if(Zt(D))return D.value;if(sr(D))return d(D);if(ze(D))return a?a(D,2):D()})):ze(t)?e?f=a?()=>a(t,2):t:f=()=>{if(h){$i();try{h()}finally{Oi()}}const D=vn;vn=u;try{return a?a(t,3,[m]):t(m)}finally{vn=D}}:f=pi,e&&n){const D=f,N=n===!0?1/0:n;f=()=>Mi(D(),N)}const C=g1(),M=()=>{u.stop(),C&&C.active&&oc(C.effects,u)};if(r&&e){const D=e;e=(...N)=>{D(...N),M()}}let U=_?new Array(t.length).fill(Qo):Qo;const $=D=>{if(!(!(u.flags&1)||!u.dirty&&!D))if(e){const N=u.run();if(n||w||(_?N.some((q,P)=>en(q,U[P])):en(N,U))){h&&h();const q=vn;vn=u;try{const P=[N,U===Qo?void 0:_&&U[0]===Qo?[]:U,m];U=N,a?a(e,3,P):e(...P)}finally{vn=q}}}else u.run()};return l&&l($),u=new vm(f),u.scheduler=o?()=>o($,!1):$,m=D=>N1(D,!1,u),h=u.onStop=()=>{const D=zl.get(u);if(D){if(a)a(D,4);else for(const N of D)N();zl.delete(u)}},e?i?$(!0):U=u.run():o?o($.bind(null,!0),!0):u.run(),M.pause=u.pause.bind(u),M.resume=u.resume.bind(u),M.stop=M,M}function Mi(t,e=1/0,s){if(e<=0||!at(t)||t.__v_skip||(s=s||new Map,(s.get(t)||0)>=e))return t;if(s.set(t,e),e--,Zt(t))Mi(t.value,e,s);else if(Le(t))for(let i=0;i<t.length;i++)Mi(t[i],e,s);else if(wr(t)||tr(t))t.forEach(i=>{Mi(i,e,s)});else if(hm(t)){for(const i in t)Mi(t[i],e,s);for(const i of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,i)&&Mi(t[i],e,s)}return t}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Lo(t,e,s,i){try{return i?t(...i):t()}catch(n){wa(n,e,s)}}function qs(t,e,s,i){if(ze(t)){const n=Lo(t,e,s,i);return n&&cm(n)&&n.catch(r=>{wa(r,e,s)}),n}if(Le(t)){const n=[];for(let r=0;r<t.length;r++)n.push(qs(t[r],e,s,i));return n}}function wa(t,e,s,i=!0){const n=e?e.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||ct;if(e){let l=e.parent;const a=e.proxy,d=`https://vuejs.org/error-reference/#runtime-${s}`;for(;l;){const u=l.ec;if(u){for(let f=0;f<u.length;f++)if(u[f](t,a,d)===!1)return}l=l.parent}if(r){$i(),Lo(r,null,10,[t,a,d]),Oi();return}}F1(t,s,n,i,o)}function F1(t,e,s,i=!0,n=!1){if(n)throw t;console.error(t)}const ds=[];let oi=-1;const ir=[];let zi=null,Wn=0;const jm=Promise.resolve();let Fl=null;function Tn(t){const e=Fl||jm;return t?e.then(this?t.bind(this):t):e}function H1(t){let e=oi+1,s=ds.length;for(;e<s;){const i=e+s>>>1,n=ds[i],r=uo(n);r<t||r===t&&n.flags&2?e=i+1:s=i}return e}function gc(t){if(!(t.flags&1)){const e=uo(t),s=ds[ds.length-1];!s||!(t.flags&2)&&e>=uo(s)?ds.push(t):ds.splice(H1(e),0,t),t.flags|=1,Rm()}}function Rm(){Fl||(Fl=jm.then(Bm))}function W1(t){Le(t)?ir.push(...t):zi&&t.id===-1?zi.splice(Wn+1,0,t):t.flags&1||(ir.push(t),t.flags|=1),Rm()}function xf(t,e,s=oi+1){for(;s<ds.length;s++){const i=ds[s];if(i&&i.flags&2){if(t&&i.id!==t.uid)continue;ds.splice(s,1),s--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function Lm(t){if(ir.length){const e=[...new Set(ir)].sort((s,i)=>uo(s)-uo(i));if(ir.length=0,zi){zi.push(...e);return}for(zi=e,Wn=0;Wn<zi.length;Wn++){const s=zi[Wn];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}zi=null,Wn=0}}const uo=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Bm(t){try{for(oi=0;oi<ds.length;oi++){const e=ds[oi];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Lo(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;oi<ds.length;oi++){const e=ds[oi];e&&(e.flags&=-2)}oi=-1,ds.length=0,Lm(),Fl=null,(ds.length||ir.length)&&Bm()}}let Wt=null,Im=null;function Hl(t){const e=Wt;return Wt=t,Im=t&&t.type.__scopeId||null,e}function B(t,e=Wt,s){if(!e||t._n)return t;const i=(...n)=>{i._d&&Kl(-1);const r=Hl(e);let o;try{o=t(...n)}finally{Hl(r),i._d&&Kl(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function qe(t,e){if(Wt===null)return t;const s=Ma(Wt),i=t.dirs||(t.dirs=[]);for(let n=0;n<e.length;n++){let[r,o,l,a=ct]=e[n];r&&(ze(r)&&(r={mounted:r,updated:r}),r.deep&&Mi(o),i.push({dir:r,instance:s,value:o,oldValue:void 0,arg:l,modifiers:a}))}return t}function hn(t,e,s,i){const n=t.dirs,r=e&&e.dirs;for(let o=0;o<n.length;o++){const l=n[o];r&&(l.oldValue=r[o].value);let a=l.dir[i];a&&($i(),qs(a,s,8,[t.el,l,t,e]),Oi())}}const Um=Symbol("_vte"),Nm=t=>t.__isTeleport,Gr=t=>t&&(t.disabled||t.disabled===""),kf=t=>t&&(t.defer||t.defer===""),wf=t=>typeof SVGElement<"u"&&t instanceof SVGElement,Sf=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,Ju=(t,e)=>{const s=t&&t.to;return wt(s)?e?e(s):null:s},zm={name:"Teleport",__isTeleport:!0,process(t,e,s,i,n,r,o,l,a,d){const{mc:u,pc:f,pbc:h,o:{insert:m,querySelector:w,createText:_,createComment:C}}=d,M=Gr(e.props);let{shapeFlag:U,children:$,dynamicChildren:D}=e;if(t==null){const N=e.el=_(""),q=e.anchor=_("");m(N,s,i),m(q,s,i);const P=(te,pe)=>{U&16&&u($,te,pe,n,r,o,l,a)},ne=()=>{const te=e.target=Ju(e.props,w),pe=Hm(te,e,_,m);te&&(o!=="svg"&&wf(te)?o="svg":o!=="mathml"&&Sf(te)&&(o="mathml"),n&&n.isCE&&(n.ce._teleportTargets||(n.ce._teleportTargets=new Set)).add(te),M||(P(te,pe),Al(e,!1)))};M&&(P(s,q),Al(e,!0)),kf(e.props)?(e.el.__isMounted=!1,ls(()=>{ne(),delete e.el.__isMounted},r)):ne()}else{if(kf(e.props)&&t.el.__isMounted===!1){ls(()=>{zm.process(t,e,s,i,n,r,o,l,a,d)},r);return}e.el=t.el,e.targetStart=t.targetStart;const N=e.anchor=t.anchor,q=e.target=t.target,P=e.targetAnchor=t.targetAnchor,ne=Gr(t.props),te=ne?s:q,pe=ne?N:P;if(o==="svg"||wf(q)?o="svg":(o==="mathml"||Sf(q))&&(o="mathml"),D?(h(t.dynamicChildren,D,te,n,r,o,l),bc(t,e,!0)):a||f(t,e,te,pe,n,r,o,l,!1),M)ne?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):Zo(e,s,N,d,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const Q=e.target=Ju(e.props,w);Q&&Zo(e,Q,null,d,0)}else ne&&Zo(e,q,P,d,1);Al(e,M)}},remove(t,e,s,{um:i,o:{remove:n}},r){const{shapeFlag:o,children:l,anchor:a,targetStart:d,targetAnchor:u,target:f,props:h}=t;if(f&&(n(d),n(u)),r&&n(a),o&16){const m=r||!Gr(h);for(let w=0;w<l.length;w++){const _=l[w];i(_,e,s,m,!!_.dynamicChildren)}}},move:Zo,hydrate:q1};function Zo(t,e,s,{o:{insert:i},m:n},r=2){r===0&&i(t.targetAnchor,e,s);const{el:o,anchor:l,shapeFlag:a,children:d,props:u}=t,f=r===2;if(f&&i(o,e,s),(!f||Gr(u))&&a&16)for(let h=0;h<d.length;h++)n(d[h],e,s,2);f&&i(l,e,s)}function q1(t,e,s,i,n,r,{o:{nextSibling:o,parentNode:l,querySelector:a,insert:d,createText:u}},f){function h(_,C,M,U){C.anchor=f(o(_),C,l(_),s,i,n,r),C.targetStart=M,C.targetAnchor=U}const m=e.target=Ju(e.props,a),w=Gr(e.props);if(m){const _=m._lpa||m.firstChild;if(e.shapeFlag&16)if(w)h(t,e,_,_&&o(_));else{e.anchor=o(t);let C=_;for(;C;){if(C&&C.nodeType===8){if(C.data==="teleport start anchor")e.targetStart=C;else if(C.data==="teleport anchor"){e.targetAnchor=C,m._lpa=e.targetAnchor&&o(e.targetAnchor);break}}C=o(C)}e.targetAnchor||Hm(m,e,u,d),f(_&&o(_),e,m,s,i,n,r)}Al(e,w)}else w&&e.shapeFlag&16&&h(t,e,t,o(t));return e.anchor&&o(e.anchor)}const Fm=zm;function Al(t,e){const s=t.ctx;if(s&&s.ut){let i,n;for(e?(i=t.el,n=t.anchor):(i=t.targetStart,n=t.targetAnchor);i&&i!==n;)i.nodeType===1&&i.setAttribute("data-v-owner",s.uid),i=i.nextSibling;s.ut()}}function Hm(t,e,s,i){const n=e.targetStart=s(""),r=e.targetAnchor=s("");return n[Um]=r,t&&(i(n,t),i(r,t)),r}const Ai=Symbol("_leaveCb"),el=Symbol("_enterCb");function G1(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return es(()=>{t.isMounted=!0}),Zm(()=>{t.isUnmounting=!0}),t}const Ds=[Function,Array],Wm={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ds,onEnter:Ds,onAfterEnter:Ds,onEnterCancelled:Ds,onBeforeLeave:Ds,onLeave:Ds,onAfterLeave:Ds,onLeaveCancelled:Ds,onBeforeAppear:Ds,onAppear:Ds,onAfterAppear:Ds,onAppearCancelled:Ds},qm=t=>{const e=t.subTree;return e.component?qm(e.component):e},K1={name:"BaseTransition",props:Wm,setup(t,{slots:e}){const s=kc(),i=G1();return()=>{const n=e.default&&Jm(e.default(),!0);if(!n||!n.length)return;const r=Gm(n),o=st(t),{mode:l}=o;if(i.isLeaving)return ru(r);const a=_f(r);if(!a)return ru(r);let d=Yu(a,o,i,s,f=>d=f);a.type!==Yt&&co(a,d);let u=s.subTree&&_f(s.subTree);if(u&&u.type!==Yt&&!wn(u,a)&&qm(s).type!==Yt){let f=Yu(u,o,i,s);if(co(u,f),l==="out-in"&&a.type!==Yt)return i.isLeaving=!0,f.afterLeave=()=>{i.isLeaving=!1,s.job.flags&8||s.update(),delete f.afterLeave,u=void 0},ru(r);l==="in-out"&&a.type!==Yt?f.delayLeave=(h,m,w)=>{const _=Km(i,u);_[String(u.key)]=u,h[Ai]=()=>{m(),h[Ai]=void 0,delete d.delayedLeave,u=void 0},d.delayedLeave=()=>{w(),delete d.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return r}}};function Gm(t){let e=t[0];if(t.length>1){for(const s of t)if(s.type!==Yt){e=s;break}}return e}const J1=K1;function Km(t,e){const{leavingVNodes:s}=t;let i=s.get(e.type);return i||(i=Object.create(null),s.set(e.type,i)),i}function Yu(t,e,s,i,n){const{appear:r,mode:o,persisted:l=!1,onBeforeEnter:a,onEnter:d,onAfterEnter:u,onEnterCancelled:f,onBeforeLeave:h,onLeave:m,onAfterLeave:w,onLeaveCancelled:_,onBeforeAppear:C,onAppear:M,onAfterAppear:U,onAppearCancelled:$}=e,D=String(t.key),N=Km(s,t),q=(te,pe)=>{te&&qs(te,i,9,pe)},P=(te,pe)=>{const Q=pe[1];q(te,pe),Le(te)?te.every(z=>z.length<=1)&&Q():te.length<=1&&Q()},ne={mode:o,persisted:l,beforeEnter(te){let pe=a;if(!s.isMounted)if(r)pe=C||a;else return;te[Ai]&&te[Ai](!0);const Q=N[D];Q&&wn(t,Q)&&Q.el[Ai]&&Q.el[Ai](),q(pe,[te])},enter(te){let pe=d,Q=u,z=f;if(!s.isMounted)if(r)pe=M||d,Q=U||u,z=$||f;else return;let ae=!1;const re=te[el]=ye=>{ae||(ae=!0,ye?q(z,[te]):q(Q,[te]),ne.delayedLeave&&ne.delayedLeave(),te[el]=void 0)};pe?P(pe,[te,re]):re()},leave(te,pe){const Q=String(t.key);if(te[el]&&te[el](!0),s.isUnmounting)return pe();q(h,[te]);let z=!1;const ae=te[Ai]=re=>{z||(z=!0,pe(),re?q(_,[te]):q(w,[te]),te[Ai]=void 0,N[Q]===t&&delete N[Q])};N[Q]=t,m?P(m,[te,ae]):ae()},clone(te){const pe=Yu(te,e,s,i,n);return n&&n(pe),pe}};return ne}function ru(t){if(Sa(t))return t=nn(t),t.children=null,t}function _f(t){if(!Sa(t))return Nm(t.type)&&t.children?Gm(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:s}=t;if(s){if(e&16)return s[0];if(e&32&&ze(s.default))return s.default()}}function co(t,e){t.shapeFlag&6&&t.component?(t.transition=e,co(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Jm(t,e=!1,s){let i=[],n=0;for(let r=0;r<t.length;r++){let o=t[r];const l=s==null?o.key:String(s)+String(o.key!=null?o.key:r);o.type===X?(o.patchFlag&128&&n++,i=i.concat(Jm(o.children,e,l))):(e||o.type!==Yt)&&i.push(l!=null?nn(o,{key:l}):o)}if(n>1)for(let r=0;r<i.length;r++)i[r].patchFlag=-2;return i}function Ym(t,e){return ze(t)?It({name:t.name},e,{setup:t}):t}function Xm(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const Wl=new WeakMap;function Kr(t,e,s,i,n=!1){if(Le(t)){t.forEach((w,_)=>Kr(w,e&&(Le(e)?e[_]:e),s,i,n));return}if(nr(i)&&!n){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&Kr(t,e,s,i.component.subTree);return}const r=i.shapeFlag&4?Ma(i.component):i.el,o=n?null:r,{i:l,r:a}=t,d=e&&e.r,u=l.refs===ct?l.refs={}:l.refs,f=l.setupState,h=st(f),m=f===ct?dm:w=>nt(h,w);if(d!=null&&d!==a){if(Cf(e),wt(d))u[d]=null,m(d)&&(f[d]=null);else if(Zt(d)){d.value=null;const w=e;w.k&&(u[w.k]=null)}}if(ze(a))Lo(a,l,12,[o,u]);else{const w=wt(a),_=Zt(a);if(w||_){const C=()=>{if(t.f){const M=w?m(a)?f[a]:u[a]:a.value;if(n)Le(M)&&oc(M,r);else if(Le(M))M.includes(r)||M.push(r);else if(w)u[a]=[r],m(a)&&(f[a]=u[a]);else{const U=[r];a.value=U,t.k&&(u[t.k]=U)}}else w?(u[a]=o,m(a)&&(f[a]=o)):_&&(a.value=o,t.k&&(u[t.k]=o))};if(o){const M=()=>{C(),Wl.delete(t)};M.id=-1,Wl.set(t,M),ls(M,s)}else Cf(t),C()}}}function Cf(t){const e=Wl.get(t);e&&(e.flags|=8,Wl.delete(t))}xa().requestIdleCallback;xa().cancelIdleCallback;const nr=t=>!!t.type.__asyncLoader,Sa=t=>t.type.__isKeepAlive;function Y1(t,e){Qm(t,"a",e)}function X1(t,e){Qm(t,"da",e)}function Qm(t,e,s=Xt){const i=t.__wdc||(t.__wdc=()=>{let n=s;for(;n;){if(n.isDeactivated)return;n=n.parent}return t()});if(_a(e,i,s),s){let n=s.parent;for(;n&&n.parent;)Sa(n.parent.vnode)&&Q1(i,e,s,n),n=n.parent}}function Q1(t,e,s,i){const n=_a(e,t,i,!0);Sr(()=>{oc(i[e],n)},s)}function _a(t,e,s=Xt,i=!1){if(s){const n=s[t]||(s[t]=[]),r=e.__weh||(e.__weh=(...o)=>{$i();const l=Bo(s),a=qs(e,s,t,o);return l(),Oi(),a});return i?n.unshift(r):n.push(r),r}}const Li=t=>(e,s=Xt)=>{(!po||t==="sp")&&_a(t,(...i)=>e(...i),s)},Z1=Li("bm"),es=Li("m"),eb=Li("bu"),tb=Li("u"),Zm=Li("bum"),Sr=Li("um"),sb=Li("sp"),ib=Li("rtg"),nb=Li("rtc");function rb(t,e=Xt){_a("ec",t,e)}const eg="components";function ql(t,e){return sg(eg,t,!0,e)||t}const tg=Symbol.for("v-ndc");function Fs(t){return wt(t)?sg(eg,t,!1)||t:t||tg}function sg(t,e,s=!0,i=!1){const n=Wt||Xt;if(n){const r=n.type;{const l=Kb(r,!1);if(l&&(l===e||l===Ls(e)||l===ba(Ls(e))))return r}const o=Af(n[t]||r[t],e)||Af(n.appContext[t],e);return!o&&i?r:o}}function Af(t,e){return t&&(t[e]||t[Ls(e)]||t[ba(Ls(e))])}function be(t,e,s,i){let n;const r=s,o=Le(t);if(o||wt(t)){const l=o&&sr(t);let a=!1,d=!1;l&&(a=!Os(t),d=sn(t),t=ka(t)),n=new Array(t.length);for(let u=0,f=t.length;u<f;u++)n[u]=e(a?d?Nl(zt(t[u])):zt(t[u]):t[u],u,void 0,r)}else if(typeof t=="number"){n=new Array(t);for(let l=0;l<t;l++)n[l]=e(l+1,l,void 0,r)}else if(at(t))if(t[Symbol.iterator])n=Array.from(t,(l,a)=>e(l,a,void 0,r));else{const l=Object.keys(t);n=new Array(l.length);for(let a=0,d=l.length;a<d;a++){const u=l[a];n[a]=e(t[u],u,a,r)}}else n=[];return n}function ob(t,e){for(let s=0;s<e.length;s++){const i=e[s];if(Le(i))for(let n=0;n<i.length;n++)t[i[n].name]=i[n].fn;else i&&(t[i.name]=i.key?(...n)=>{const r=i.fn(...n);return r&&(r.key=i.key),r}:i.fn)}return t}function kt(t,e,s={},i,n){if(Wt.ce||Wt.parent&&nr(Wt.parent)&&Wt.parent.ce){const d=Object.keys(s).length>0;return e!=="default"&&(s.name=e),g(),he(X,null,[k("slot",s,i&&i())],d?-2:64)}let r=t[e];r&&r._c&&(r._d=!1),g();const o=r&&ig(r(s)),l=s.key||o&&o.key,a=he(X,{key:(l&&!Ws(l)?l:`_${e}`)+(!o&&i?"_fb":"")},o||(i?i():[]),o&&t._===1?64:-2);return!n&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),r&&r._c&&(r._d=!0),a}function ig(t){return t.some(e=>ho(e)?!(e.type===Yt||e.type===X&&!ig(e.children)):!0)?t:null}const Xu=t=>t?wg(t)?Ma(t):Xu(t.parent):null,Jr=It(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Xu(t.parent),$root:t=>Xu(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>rg(t),$forceUpdate:t=>t.f||(t.f=()=>{gc(t.update)}),$nextTick:t=>t.n||(t.n=Tn.bind(t.proxy)),$watch:t=>Db.bind(t)}),ou=(t,e)=>t!==ct&&!t.__isScriptSetup&&nt(t,e),lb={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:s,setupState:i,data:n,props:r,accessCache:o,type:l,appContext:a}=t;let d;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return i[e];case 2:return n[e];case 4:return s[e];case 3:return r[e]}else{if(ou(i,e))return o[e]=1,i[e];if(n!==ct&&nt(n,e))return o[e]=2,n[e];if((d=t.propsOptions[0])&&nt(d,e))return o[e]=3,r[e];if(s!==ct&&nt(s,e))return o[e]=4,s[e];Qu&&(o[e]=0)}}const u=Jr[e];let f,h;if(u)return e==="$attrs"&&Jt(t.attrs,"get",""),u(t);if((f=l.__cssModules)&&(f=f[e]))return f;if(s!==ct&&nt(s,e))return o[e]=4,s[e];if(h=a.config.globalProperties,nt(h,e))return h[e]},set({_:t},e,s){const{data:i,setupState:n,ctx:r}=t;return ou(n,e)?(n[e]=s,!0):i!==ct&&nt(i,e)?(i[e]=s,!0):nt(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(r[e]=s,!0)},has({_:{data:t,setupState:e,accessCache:s,ctx:i,appContext:n,propsOptions:r,type:o}},l){let a,d;return!!(s[l]||t!==ct&&l[0]!=="$"&&nt(t,l)||ou(e,l)||(a=r[0])&&nt(a,l)||nt(i,l)||nt(Jr,l)||nt(n.config.globalProperties,l)||(d=o.__cssModules)&&d[l])},defineProperty(t,e,s){return s.get!=null?t._.accessCache[e]=0:nt(s,"value")&&this.set(t,e,s.value,null),Reflect.defineProperty(t,e,s)}};function ab(){return ub().slots}function ub(t){const e=kc();return e.setupContext||(e.setupContext=_g(e))}function Vf(t){return Le(t)?t.reduce((e,s)=>(e[s]=null,e),{}):t}let Qu=!0;function db(t){const e=rg(t),s=t.proxy,i=t.ctx;Qu=!1,e.beforeCreate&&Mf(e.beforeCreate,t,"bc");const{data:n,computed:r,methods:o,watch:l,provide:a,inject:d,created:u,beforeMount:f,mounted:h,beforeUpdate:m,updated:w,activated:_,deactivated:C,beforeDestroy:M,beforeUnmount:U,destroyed:$,unmounted:D,render:N,renderTracked:q,renderTriggered:P,errorCaptured:ne,serverPrefetch:te,expose:pe,inheritAttrs:Q,components:z,directives:ae,filters:re}=e;if(d&&cb(d,i,null),o)for(const y in o){const p=o[y];ze(p)&&(i[y]=p.bind(s))}if(n){const y=n.call(s,s);at(y)&&(t.data=ci(y))}if(Qu=!0,r)for(const y in r){const p=r[y],I=ze(p)?p.bind(s,s):ze(p.get)?p.get.bind(s,s):pi,A=!ze(p)&&ze(p.set)?p.set.bind(s):pi,J=le({get:I,set:A});Object.defineProperty(i,y,{enumerable:!0,configurable:!0,get:()=>J.value,set:ge=>J.value=ge})}if(l)for(const y in l)ng(l[y],i,s,y);if(a){const y=ze(a)?a.call(s):a;Reflect.ownKeys(y).forEach(p=>{Vl(p,y[p])})}u&&Mf(u,t,"c");function E(y,p){Le(p)?p.forEach(I=>y(I.bind(s))):p&&y(p.bind(s))}if(E(Z1,f),E(es,h),E(eb,m),E(tb,w),E(Y1,_),E(X1,C),E(rb,ne),E(nb,q),E(ib,P),E(Zm,U),E(Sr,D),E(sb,te),Le(pe))if(pe.length){const y=t.exposed||(t.exposed={});pe.forEach(p=>{Object.defineProperty(y,p,{get:()=>s[p],set:I=>s[p]=I,enumerable:!0})})}else t.exposed||(t.exposed={});N&&t.render===pi&&(t.render=N),Q!=null&&(t.inheritAttrs=Q),z&&(t.components=z),ae&&(t.directives=ae),te&&Xm(t)}function cb(t,e,s=pi){Le(t)&&(t=Zu(t));for(const i in t){const n=t[i];let r;at(n)?"default"in n?r=Hs(n.from||i,n.default,!0):r=Hs(n.from||i):r=Hs(n),Zt(r)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):e[i]=r}}function Mf(t,e,s){qs(Le(t)?t.map(i=>i.bind(e.proxy)):t.bind(e.proxy),e,s)}function ng(t,e,s,i){let n=i.includes(".")?yg(s,i):()=>s[i];if(wt(t)){const r=e[t];ze(r)&&Je(n,r)}else if(ze(t))Je(n,t.bind(s));else if(at(t))if(Le(t))t.forEach(r=>ng(r,e,s,i));else{const r=ze(t.handler)?t.handler.bind(s):e[t.handler];ze(r)&&Je(n,r,t)}}function rg(t){const e=t.type,{mixins:s,extends:i}=e,{mixins:n,optionsCache:r,config:{optionMergeStrategies:o}}=t.appContext,l=r.get(e);let a;return l?a=l:!n.length&&!s&&!i?a=e:(a={},n.length&&n.forEach(d=>Gl(a,d,o,!0)),Gl(a,e,o)),at(e)&&r.set(e,a),a}function Gl(t,e,s,i=!1){const{mixins:n,extends:r}=e;r&&Gl(t,r,s,!0),n&&n.forEach(o=>Gl(t,o,s,!0));for(const o in e)if(!(i&&o==="expose")){const l=fb[o]||s&&s[o];t[o]=l?l(t[o],e[o]):e[o]}return t}const fb={data:Df,props:Tf,emits:Tf,methods:Ir,computed:Ir,beforeCreate:os,created:os,beforeMount:os,mounted:os,beforeUpdate:os,updated:os,beforeDestroy:os,beforeUnmount:os,destroyed:os,unmounted:os,activated:os,deactivated:os,errorCaptured:os,serverPrefetch:os,components:Ir,directives:Ir,watch:pb,provide:Df,inject:hb};function Df(t,e){return e?t?function(){return It(ze(t)?t.call(this,this):t,ze(e)?e.call(this,this):e)}:e:t}function hb(t,e){return Ir(Zu(t),Zu(e))}function Zu(t){if(Le(t)){const e={};for(let s=0;s<t.length;s++)e[t[s]]=t[s];return e}return t}function os(t,e){return t?[...new Set([].concat(t,e))]:e}function Ir(t,e){return t?It(Object.create(null),t,e):e}function Tf(t,e){return t?Le(t)&&Le(e)?[...new Set([...t,...e])]:It(Object.create(null),Vf(t),Vf(e??{})):e}function pb(t,e){if(!t)return e;if(!e)return t;const s=It(Object.create(null),t);for(const i in e)s[i]=os(t[i],e[i]);return s}function og(){return{app:null,config:{isNativeTag:dm,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let mb=0;function gb(t,e){return function(i,n=null){ze(i)||(i=It({},i)),n!=null&&!at(n)&&(n=null);const r=og(),o=new WeakSet,l=[];let a=!1;const d=r.app={_uid:mb++,_component:i,_props:n,_container:null,_context:r,_instance:null,version:Yb,get config(){return r.config},set config(u){},use(u,...f){return o.has(u)||(u&&ze(u.install)?(o.add(u),u.install(d,...f)):ze(u)&&(o.add(u),u(d,...f))),d},mixin(u){return r.mixins.includes(u)||r.mixins.push(u),d},component(u,f){return f?(r.components[u]=f,d):r.components[u]},directive(u,f){return f?(r.directives[u]=f,d):r.directives[u]},mount(u,f,h){if(!a){const m=d._ceVNode||k(i,n);return m.appContext=r,h===!0?h="svg":h===!1&&(h=void 0),t(m,u,h),a=!0,d._container=u,u.__vue_app__=d,Ma(m.component)}},onUnmount(u){l.push(u)},unmount(){a&&(qs(l,d._instance,16),t(null,d._container),delete d._container.__vue_app__)},provide(u,f){return r.provides[u]=f,d},runWithContext(u){const f=rr;rr=d;try{return u()}finally{rr=f}}};return d}}let rr=null;function Vl(t,e){if(Xt){let s=Xt.provides;const i=Xt.parent&&Xt.parent.provides;i===s&&(s=Xt.provides=Object.create(i)),s[t]=e}}function Hs(t,e,s=!1){const i=kc();if(i||rr){let n=rr?rr._context.provides:i?i.parent==null||i.ce?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(n&&t in n)return n[t];if(arguments.length>1)return s&&ze(e)?e.call(i&&i.proxy):e}}const lg={},ag=()=>Object.create(lg),ug=t=>Object.getPrototypeOf(t)===lg;function yb(t,e,s,i=!1){const n={},r=ag();t.propsDefaults=Object.create(null),dg(t,e,n,r);for(const o in t.propsOptions[0])o in n||(n[o]=void 0);s?t.props=i?n:$m(n):t.type.props?t.props=n:t.props=r,t.attrs=r}function vb(t,e,s,i){const{props:n,attrs:r,vnode:{patchFlag:o}}=t,l=st(n),[a]=t.propsOptions;let d=!1;if((i||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let f=0;f<u.length;f++){let h=u[f];if(Ca(t.emitsOptions,h))continue;const m=e[h];if(a)if(nt(r,h))m!==r[h]&&(r[h]=m,d=!0);else{const w=Ls(h);n[w]=ed(a,l,w,m,t,!1)}else m!==r[h]&&(r[h]=m,d=!0)}}}else{dg(t,e,n,r)&&(d=!0);let u;for(const f in l)(!e||!nt(e,f)&&((u=Un(f))===f||!nt(e,u)))&&(a?s&&(s[f]!==void 0||s[u]!==void 0)&&(n[f]=ed(a,l,f,void 0,t,!0)):delete n[f]);if(r!==l)for(const f in r)(!e||!nt(e,f))&&(delete r[f],d=!0)}d&&Vi(t.attrs,"set","")}function dg(t,e,s,i){const[n,r]=t.propsOptions;let o=!1,l;if(e)for(let a in e){if(Hr(a))continue;const d=e[a];let u;n&&nt(n,u=Ls(a))?!r||!r.includes(u)?s[u]=d:(l||(l={}))[u]=d:Ca(t.emitsOptions,a)||(!(a in i)||d!==i[a])&&(i[a]=d,o=!0)}if(r){const a=st(s),d=l||ct;for(let u=0;u<r.length;u++){const f=r[u];s[f]=ed(n,a,f,d[f],t,!nt(d,f))}}return o}function ed(t,e,s,i,n,r){const o=t[s];if(o!=null){const l=nt(o,"default");if(l&&i===void 0){const a=o.default;if(o.type!==Function&&!o.skipFactory&&ze(a)){const{propsDefaults:d}=n;if(s in d)i=d[s];else{const u=Bo(n);i=d[s]=a.call(null,e),u()}}else i=a;n.ce&&n.ce._setProp(s,i)}o[0]&&(r&&!l?i=!1:o[1]&&(i===""||i===Un(s))&&(i=!0))}return i}const bb=new WeakMap;function cg(t,e,s=!1){const i=s?bb:e.propsCache,n=i.get(t);if(n)return n;const r=t.props,o={},l=[];let a=!1;if(!ze(t)){const u=f=>{a=!0;const[h,m]=cg(f,e,!0);It(o,h),m&&l.push(...m)};!s&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!r&&!a)return at(t)&&i.set(t,er),er;if(Le(r))for(let u=0;u<r.length;u++){const f=Ls(r[u]);Ef(f)&&(o[f]=ct)}else if(r)for(const u in r){const f=Ls(u);if(Ef(f)){const h=r[u],m=o[f]=Le(h)||ze(h)?{type:h}:It({},h),w=m.type;let _=!1,C=!0;if(Le(w))for(let M=0;M<w.length;++M){const U=w[M],$=ze(U)&&U.name;if($==="Boolean"){_=!0;break}else $==="String"&&(C=!1)}else _=ze(w)&&w.name==="Boolean";m[0]=_,m[1]=C,(_||nt(m,"default"))&&l.push(f)}}const d=[o,l];return at(t)&&i.set(t,d),d}function Ef(t){return t[0]!=="$"&&!Hr(t)}const yc=t=>t==="_"||t==="_ctx"||t==="$stable",vc=t=>Le(t)?t.map(li):[li(t)],xb=(t,e,s)=>{if(e._n)return e;const i=B((...n)=>vc(e(...n)),s);return i._c=!1,i},fg=(t,e,s)=>{const i=t._ctx;for(const n in t){if(yc(n))continue;const r=t[n];if(ze(r))e[n]=xb(n,r,i);else if(r!=null){const o=vc(r);e[n]=()=>o}}},hg=(t,e)=>{const s=vc(e);t.slots.default=()=>s},pg=(t,e,s)=>{for(const i in e)(s||!yc(i))&&(t[i]=e[i])},kb=(t,e,s)=>{const i=t.slots=ag();if(t.vnode.shapeFlag&32){const n=e._;n?(pg(i,e,s),s&&pm(i,"_",n,!0)):fg(e,i)}else e&&hg(t,e)},wb=(t,e,s)=>{const{vnode:i,slots:n}=t;let r=!0,o=ct;if(i.shapeFlag&32){const l=e._;l?s&&l===1?r=!1:pg(n,e,s):(r=!e.$stable,fg(e,n)),o=e}else e&&(hg(t,e),o={default:1});if(r)for(const l in n)!yc(l)&&o[l]==null&&delete n[l]},ls=Lb;function Sb(t){return _b(t)}function _b(t,e){const s=xa();s.__VUE__=!0;const{insert:i,remove:n,patchProp:r,createElement:o,createText:l,createComment:a,setText:d,setElementText:u,parentNode:f,nextSibling:h,setScopeId:m=pi,insertStaticContent:w}=t,_=(T,O,H,ee=null,Z=null,Y=null,me=void 0,ve=null,ce=!!O.dynamicChildren)=>{if(T===O)return;T&&!wn(T,O)&&(ee=V(T),ge(T,Z,Y,!0),T=null),O.patchFlag===-2&&(ce=!1,O.dynamicChildren=null);const{type:ue,ref:Pe,shapeFlag:we}=O;switch(ue){case Aa:C(T,O,H,ee);break;case Yt:M(T,O,H,ee);break;case Ml:T==null&&U(O,H,ee,me);break;case X:z(T,O,H,ee,Z,Y,me,ve,ce);break;default:we&1?N(T,O,H,ee,Z,Y,me,ve,ce):we&6?ae(T,O,H,ee,Z,Y,me,ve,ce):(we&64||we&128)&&ue.process(T,O,H,ee,Z,Y,me,ve,ce,$e)}Pe!=null&&Z?Kr(Pe,T&&T.ref,Y,O||T,!O):Pe==null&&T&&T.ref!=null&&Kr(T.ref,null,Y,T,!0)},C=(T,O,H,ee)=>{if(T==null)i(O.el=l(O.children),H,ee);else{const Z=O.el=T.el;O.children!==T.children&&d(Z,O.children)}},M=(T,O,H,ee)=>{T==null?i(O.el=a(O.children||""),H,ee):O.el=T.el},U=(T,O,H,ee)=>{[T.el,T.anchor]=w(T.children,O,H,ee,T.el,T.anchor)},$=({el:T,anchor:O},H,ee)=>{let Z;for(;T&&T!==O;)Z=h(T),i(T,H,ee),T=Z;i(O,H,ee)},D=({el:T,anchor:O})=>{let H;for(;T&&T!==O;)H=h(T),n(T),T=H;n(O)},N=(T,O,H,ee,Z,Y,me,ve,ce)=>{O.type==="svg"?me="svg":O.type==="math"&&(me="mathml"),T==null?q(O,H,ee,Z,Y,me,ve,ce):te(T,O,Z,Y,me,ve,ce)},q=(T,O,H,ee,Z,Y,me,ve)=>{let ce,ue;const{props:Pe,shapeFlag:we,transition:Te,dirs:Be}=T;if(ce=T.el=o(T.type,Y,Pe&&Pe.is,Pe),we&8?u(ce,T.children):we&16&&ne(T.children,ce,null,ee,Z,lu(T,Y),me,ve),Be&&hn(T,null,ee,"created"),P(ce,T,T.scopeId,me,ee),Pe){for(const tt in Pe)tt!=="value"&&!Hr(tt)&&r(ce,tt,null,Pe[tt],Y,ee);"value"in Pe&&r(ce,"value",null,Pe.value,Y),(ue=Pe.onVnodeBeforeMount)&&ei(ue,ee,T)}Be&&hn(T,null,ee,"beforeMount");const He=Cb(Z,Te);He&&Te.beforeEnter(ce),i(ce,O,H),((ue=Pe&&Pe.onVnodeMounted)||He||Be)&&ls(()=>{ue&&ei(ue,ee,T),He&&Te.enter(ce),Be&&hn(T,null,ee,"mounted")},Z)},P=(T,O,H,ee,Z)=>{if(H&&m(T,H),ee)for(let Y=0;Y<ee.length;Y++)m(T,ee[Y]);if(Z){let Y=Z.subTree;if(O===Y||bg(Y.type)&&(Y.ssContent===O||Y.ssFallback===O)){const me=Z.vnode;P(T,me,me.scopeId,me.slotScopeIds,Z.parent)}}},ne=(T,O,H,ee,Z,Y,me,ve,ce=0)=>{for(let ue=ce;ue<T.length;ue++){const Pe=T[ue]=ve?Fi(T[ue]):li(T[ue]);_(null,Pe,O,H,ee,Z,Y,me,ve)}},te=(T,O,H,ee,Z,Y,me)=>{const ve=O.el=T.el;let{patchFlag:ce,dynamicChildren:ue,dirs:Pe}=O;ce|=T.patchFlag&16;const we=T.props||ct,Te=O.props||ct;let Be;if(H&&pn(H,!1),(Be=Te.onVnodeBeforeUpdate)&&ei(Be,H,O,T),Pe&&hn(O,T,H,"beforeUpdate"),H&&pn(H,!0),(we.innerHTML&&Te.innerHTML==null||we.textContent&&Te.textContent==null)&&u(ve,""),ue?pe(T.dynamicChildren,ue,ve,H,ee,lu(O,Z),Y):me||p(T,O,ve,null,H,ee,lu(O,Z),Y,!1),ce>0){if(ce&16)Q(ve,we,Te,H,Z);else if(ce&2&&we.class!==Te.class&&r(ve,"class",null,Te.class,Z),ce&4&&r(ve,"style",we.style,Te.style,Z),ce&8){const He=O.dynamicProps;for(let tt=0;tt<He.length;tt++){const Ne=He[tt],St=we[Ne],Rt=Te[Ne];(Rt!==St||Ne==="value")&&r(ve,Ne,St,Rt,Z,H)}}ce&1&&T.children!==O.children&&u(ve,O.children)}else!me&&ue==null&&Q(ve,we,Te,H,Z);((Be=Te.onVnodeUpdated)||Pe)&&ls(()=>{Be&&ei(Be,H,O,T),Pe&&hn(O,T,H,"updated")},ee)},pe=(T,O,H,ee,Z,Y,me)=>{for(let ve=0;ve<O.length;ve++){const ce=T[ve],ue=O[ve],Pe=ce.el&&(ce.type===X||!wn(ce,ue)||ce.shapeFlag&198)?f(ce.el):H;_(ce,ue,Pe,null,ee,Z,Y,me,!0)}},Q=(T,O,H,ee,Z)=>{if(O!==H){if(O!==ct)for(const Y in O)!Hr(Y)&&!(Y in H)&&r(T,Y,O[Y],null,Z,ee);for(const Y in H){if(Hr(Y))continue;const me=H[Y],ve=O[Y];me!==ve&&Y!=="value"&&r(T,Y,ve,me,Z,ee)}"value"in H&&r(T,"value",O.value,H.value,Z)}},z=(T,O,H,ee,Z,Y,me,ve,ce)=>{const ue=O.el=T?T.el:l(""),Pe=O.anchor=T?T.anchor:l("");let{patchFlag:we,dynamicChildren:Te,slotScopeIds:Be}=O;Be&&(ve=ve?ve.concat(Be):Be),T==null?(i(ue,H,ee),i(Pe,H,ee),ne(O.children||[],H,Pe,Z,Y,me,ve,ce)):we>0&&we&64&&Te&&T.dynamicChildren?(pe(T.dynamicChildren,Te,H,Z,Y,me,ve),(O.key!=null||Z&&O===Z.subTree)&&bc(T,O,!0)):p(T,O,H,Pe,Z,Y,me,ve,ce)},ae=(T,O,H,ee,Z,Y,me,ve,ce)=>{O.slotScopeIds=ve,T==null?O.shapeFlag&512?Z.ctx.activate(O,H,ee,me,ce):re(O,H,ee,Z,Y,me,ce):ye(T,O,ce)},re=(T,O,H,ee,Z,Y,me)=>{const ve=T.component=Hb(T,ee,Z);if(Sa(T)&&(ve.ctx.renderer=$e),Wb(ve,!1,me),ve.asyncDep){if(Z&&Z.registerDep(ve,E,me),!T.el){const ce=ve.subTree=k(Yt);M(null,ce,O,H),T.placeholder=ce.el}}else E(ve,T,O,H,Z,Y,me)},ye=(T,O,H)=>{const ee=O.component=T.component;if(jb(T,O,H))if(ee.asyncDep&&!ee.asyncResolved){y(ee,O,H);return}else ee.next=O,ee.update();else O.el=T.el,ee.vnode=O},E=(T,O,H,ee,Z,Y,me)=>{const ve=()=>{if(T.isMounted){let{next:we,bu:Te,u:Be,parent:He,vnode:tt}=T;{const ns=mg(T);if(ns){we&&(we.el=tt.el,y(T,we,me)),ns.asyncDep.then(()=>{T.isUnmounted||ve()});return}}let Ne=we,St;pn(T,!1),we?(we.el=tt.el,y(T,we,me)):we=tt,Te&&Cl(Te),(St=we.props&&we.props.onVnodeBeforeUpdate)&&ei(St,He,we,tt),pn(T,!0);const Rt=Of(T),is=T.subTree;T.subTree=Rt,_(is,Rt,f(is.el),V(is),T,Z,Y),we.el=Rt.el,Ne===null&&Rb(T,Rt.el),Be&&ls(Be,Z),(St=we.props&&we.props.onVnodeUpdated)&&ls(()=>ei(St,He,we,tt),Z)}else{let we;const{el:Te,props:Be}=O,{bm:He,m:tt,parent:Ne,root:St,type:Rt}=T,is=nr(O);pn(T,!1),He&&Cl(He),!is&&(we=Be&&Be.onVnodeBeforeMount)&&ei(we,Ne,O),pn(T,!0);{St.ce&&St.ce._def.shadowRoot!==!1&&St.ce._injectChildStyle(Rt);const ns=T.subTree=Of(T);_(null,ns,H,ee,T,Z,Y),O.el=ns.el}if(tt&&ls(tt,Z),!is&&(we=Be&&Be.onVnodeMounted)){const ns=O;ls(()=>ei(we,Ne,ns),Z)}(O.shapeFlag&256||Ne&&nr(Ne.vnode)&&Ne.vnode.shapeFlag&256)&&T.a&&ls(T.a,Z),T.isMounted=!0,O=H=ee=null}};T.scope.on();const ce=T.effect=new vm(ve);T.scope.off();const ue=T.update=ce.run.bind(ce),Pe=T.job=ce.runIfDirty.bind(ce);Pe.i=T,Pe.id=T.uid,ce.scheduler=()=>gc(Pe),pn(T,!0),ue()},y=(T,O,H)=>{O.component=T;const ee=T.vnode.props;T.vnode=O,T.next=null,vb(T,O.props,ee,H),wb(T,O.children,H),$i(),xf(T),Oi()},p=(T,O,H,ee,Z,Y,me,ve,ce=!1)=>{const ue=T&&T.children,Pe=T?T.shapeFlag:0,we=O.children,{patchFlag:Te,shapeFlag:Be}=O;if(Te>0){if(Te&128){A(ue,we,H,ee,Z,Y,me,ve,ce);return}else if(Te&256){I(ue,we,H,ee,Z,Y,me,ve,ce);return}}Be&8?(Pe&16&&et(ue,Z,Y),we!==ue&&u(H,we)):Pe&16?Be&16?A(ue,we,H,ee,Z,Y,me,ve,ce):et(ue,Z,Y,!0):(Pe&8&&u(H,""),Be&16&&ne(we,H,ee,Z,Y,me,ve,ce))},I=(T,O,H,ee,Z,Y,me,ve,ce)=>{T=T||er,O=O||er;const ue=T.length,Pe=O.length,we=Math.min(ue,Pe);let Te;for(Te=0;Te<we;Te++){const Be=O[Te]=ce?Fi(O[Te]):li(O[Te]);_(T[Te],Be,H,null,Z,Y,me,ve,ce)}ue>Pe?et(T,Z,Y,!0,!1,we):ne(O,H,ee,Z,Y,me,ve,ce,we)},A=(T,O,H,ee,Z,Y,me,ve,ce)=>{let ue=0;const Pe=O.length;let we=T.length-1,Te=Pe-1;for(;ue<=we&&ue<=Te;){const Be=T[ue],He=O[ue]=ce?Fi(O[ue]):li(O[ue]);if(wn(Be,He))_(Be,He,H,null,Z,Y,me,ve,ce);else break;ue++}for(;ue<=we&&ue<=Te;){const Be=T[we],He=O[Te]=ce?Fi(O[Te]):li(O[Te]);if(wn(Be,He))_(Be,He,H,null,Z,Y,me,ve,ce);else break;we--,Te--}if(ue>we){if(ue<=Te){const Be=Te+1,He=Be<Pe?O[Be].el:ee;for(;ue<=Te;)_(null,O[ue]=ce?Fi(O[ue]):li(O[ue]),H,He,Z,Y,me,ve,ce),ue++}}else if(ue>Te)for(;ue<=we;)ge(T[ue],Z,Y,!0),ue++;else{const Be=ue,He=ue,tt=new Map;for(ue=He;ue<=Te;ue++){const Ut=O[ue]=ce?Fi(O[ue]):li(O[ue]);Ut.key!=null&&tt.set(Ut.key,ue)}let Ne,St=0;const Rt=Te-He+1;let is=!1,ns=0;const rt=new Array(Rt);for(ue=0;ue<Rt;ue++)rt[ue]=0;for(ue=Be;ue<=we;ue++){const Ut=T[ue];if(St>=Rt){ge(Ut,Z,Y,!0);continue}let rs;if(Ut.key!=null)rs=tt.get(Ut.key);else for(Ne=He;Ne<=Te;Ne++)if(rt[Ne-He]===0&&wn(Ut,O[Ne])){rs=Ne;break}rs===void 0?ge(Ut,Z,Y,!0):(rt[rs-He]=ue+1,rs>=ns?ns=rs:is=!0,_(Ut,O[rs],H,null,Z,Y,me,ve,ce),St++)}const vi=is?Ab(rt):er;for(Ne=vi.length-1,ue=Rt-1;ue>=0;ue--){const Ut=He+ue,rs=O[Ut],zn=O[Ut+1],xs=Ut+1<Pe?zn.el||zn.placeholder:ee;rt[ue]===0?_(null,rs,H,xs,Z,Y,me,ve,ce):is&&(Ne<0||ue!==vi[Ne]?J(rs,H,xs,2):Ne--)}}},J=(T,O,H,ee,Z=null)=>{const{el:Y,type:me,transition:ve,children:ce,shapeFlag:ue}=T;if(ue&6){J(T.component.subTree,O,H,ee);return}if(ue&128){T.suspense.move(O,H,ee);return}if(ue&64){me.move(T,O,H,$e);return}if(me===X){i(Y,O,H);for(let we=0;we<ce.length;we++)J(ce[we],O,H,ee);i(T.anchor,O,H);return}if(me===Ml){$(T,O,H);return}if(ee!==2&&ue&1&&ve)if(ee===0)ve.beforeEnter(Y),i(Y,O,H),ls(()=>ve.enter(Y),Z);else{const{leave:we,delayLeave:Te,afterLeave:Be}=ve,He=()=>{T.ctx.isUnmounted?n(Y):i(Y,O,H)},tt=()=>{Y._isLeaving&&Y[Ai](!0),we(Y,()=>{He(),Be&&Be()})};Te?Te(Y,He,tt):tt()}else i(Y,O,H)},ge=(T,O,H,ee=!1,Z=!1)=>{const{type:Y,props:me,ref:ve,children:ce,dynamicChildren:ue,shapeFlag:Pe,patchFlag:we,dirs:Te,cacheIndex:Be}=T;if(we===-2&&(Z=!1),ve!=null&&($i(),Kr(ve,null,H,T,!0),Oi()),Be!=null&&(O.renderCache[Be]=void 0),Pe&256){O.ctx.deactivate(T);return}const He=Pe&1&&Te,tt=!nr(T);let Ne;if(tt&&(Ne=me&&me.onVnodeBeforeUnmount)&&ei(Ne,O,T),Pe&6)Ct(T.component,H,ee);else{if(Pe&128){T.suspense.unmount(H,ee);return}He&&hn(T,null,O,"beforeUnmount"),Pe&64?T.type.remove(T,O,H,$e,ee):ue&&!ue.hasOnce&&(Y!==X||we>0&&we&64)?et(ue,O,H,!1,!0):(Y===X&&we&384||!Z&&Pe&16)&&et(ce,O,H),ee&&Ge(T)}(tt&&(Ne=me&&me.onVnodeUnmounted)||He)&&ls(()=>{Ne&&ei(Ne,O,T),He&&hn(T,null,O,"unmounted")},H)},Ge=T=>{const{type:O,el:H,anchor:ee,transition:Z}=T;if(O===X){Ue(H,ee);return}if(O===Ml){D(T);return}const Y=()=>{n(H),Z&&!Z.persisted&&Z.afterLeave&&Z.afterLeave()};if(T.shapeFlag&1&&Z&&!Z.persisted){const{leave:me,delayLeave:ve}=Z,ce=()=>me(H,Y);ve?ve(T.el,Y,ce):ce()}else Y()},Ue=(T,O)=>{let H;for(;T!==O;)H=h(T),n(T),T=H;n(O)},Ct=(T,O,H)=>{const{bum:ee,scope:Z,job:Y,subTree:me,um:ve,m:ce,a:ue}=T;$f(ce),$f(ue),ee&&Cl(ee),Z.stop(),Y&&(Y.flags|=8,ge(me,T,O,H)),ve&&ls(ve,O),ls(()=>{T.isUnmounted=!0},O)},et=(T,O,H,ee=!1,Z=!1,Y=0)=>{for(let me=Y;me<T.length;me++)ge(T[me],O,H,ee,Z)},V=T=>{if(T.shapeFlag&6)return V(T.component.subTree);if(T.shapeFlag&128)return T.suspense.next();const O=h(T.anchor||T.el),H=O&&O[Um];return H?h(H):O};let Se=!1;const ke=(T,O,H)=>{T==null?O._vnode&&ge(O._vnode,null,null,!0):_(O._vnode||null,T,O,null,null,null,H),O._vnode=T,Se||(Se=!0,xf(),Lm(),Se=!1)},$e={p:_,um:ge,m:J,r:Ge,mt:re,mc:ne,pc:p,pbc:pe,n:V,o:t};return{render:ke,hydrate:void 0,createApp:gb(ke)}}function lu({type:t,props:e},s){return s==="svg"&&t==="foreignObject"||s==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:s}function pn({effect:t,job:e},s){s?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function Cb(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function bc(t,e,s=!1){const i=t.children,n=e.children;if(Le(i)&&Le(n))for(let r=0;r<i.length;r++){const o=i[r];let l=n[r];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=n[r]=Fi(n[r]),l.el=o.el),!s&&l.patchFlag!==-2&&bc(o,l)),l.type===Aa&&l.patchFlag!==-1&&(l.el=o.el),l.type===Yt&&!l.el&&(l.el=o.el)}}function Ab(t){const e=t.slice(),s=[0];let i,n,r,o,l;const a=t.length;for(i=0;i<a;i++){const d=t[i];if(d!==0){if(n=s[s.length-1],t[n]<d){e[i]=n,s.push(i);continue}for(r=0,o=s.length-1;r<o;)l=r+o>>1,t[s[l]]<d?r=l+1:o=l;d<t[s[r]]&&(r>0&&(e[i]=s[r-1]),s[r]=i)}}for(r=s.length,o=s[r-1];r-- >0;)s[r]=o,o=e[o];return s}function mg(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:mg(e)}function $f(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const Vb=Symbol.for("v-scx"),Mb=()=>Hs(Vb);function Je(t,e,s){return gg(t,e,s)}function gg(t,e,s=ct){const{immediate:i,deep:n,flush:r,once:o}=s,l=It({},s),a=e&&i||!e&&r!=="post";let d;if(po){if(r==="sync"){const m=Mb();d=m.__watcherHandles||(m.__watcherHandles=[])}else if(!a){const m=()=>{};return m.stop=pi,m.resume=pi,m.pause=pi,m}}const u=Xt;l.call=(m,w,_)=>qs(m,u,w,_);let f=!1;r==="post"?l.scheduler=m=>{ls(m,u&&u.suspense)}:r!=="sync"&&(f=!0,l.scheduler=(m,w)=>{w?m():gc(m)}),l.augmentJob=m=>{e&&(m.flags|=4),f&&(m.flags|=2,u&&(m.id=u.uid,m.i=u))};const h=z1(t,e,l);return po&&(d?d.push(h):a&&h()),h}function Db(t,e,s){const i=this.proxy,n=wt(t)?t.includes(".")?yg(i,t):()=>i[t]:t.bind(i,i);let r;ze(e)?r=e:(r=e.handler,s=e);const o=Bo(this),l=gg(n,r.bind(i),s);return o(),l}function yg(t,e){const s=e.split(".");return()=>{let i=t;for(let n=0;n<s.length&&i;n++)i=i[s[n]];return i}}const Tb=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Ls(e)}Modifiers`]||t[`${Un(e)}Modifiers`];function Eb(t,e,...s){if(t.isUnmounted)return;const i=t.vnode.props||ct;let n=s;const r=e.startsWith("update:"),o=r&&Tb(i,e.slice(7));o&&(o.trim&&(n=s.map(u=>wt(u)?u.trim():u)),o.number&&(n=s.map(Ul)));let l,a=i[l=eu(e)]||i[l=eu(Ls(e))];!a&&r&&(a=i[l=eu(Un(e))]),a&&qs(a,t,6,n);const d=i[l+"Once"];if(d){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,qs(d,t,6,n)}}const $b=new WeakMap;function vg(t,e,s=!1){const i=s?$b:e.emitsCache,n=i.get(t);if(n!==void 0)return n;const r=t.emits;let o={},l=!1;if(!ze(t)){const a=d=>{const u=vg(d,e,!0);u&&(l=!0,It(o,u))};!s&&e.mixins.length&&e.mixins.forEach(a),t.extends&&a(t.extends),t.mixins&&t.mixins.forEach(a)}return!r&&!l?(at(t)&&i.set(t,null),null):(Le(r)?r.forEach(a=>o[a]=null):It(o,r),at(t)&&i.set(t,o),o)}function Ca(t,e){return!t||!ya(e)?!1:(e=e.slice(2).replace(/Once$/,""),nt(t,e[0].toLowerCase()+e.slice(1))||nt(t,Un(e))||nt(t,e))}function Of(t){const{type:e,vnode:s,proxy:i,withProxy:n,propsOptions:[r],slots:o,attrs:l,emit:a,render:d,renderCache:u,props:f,data:h,setupState:m,ctx:w,inheritAttrs:_}=t,C=Hl(t);let M,U;try{if(s.shapeFlag&4){const D=n||i,N=D;M=li(d.call(N,D,u,f,m,h,w)),U=l}else{const D=e;M=li(D.length>1?D(f,{attrs:l,slots:o,emit:a}):D(f,null)),U=e.props?l:Ob(l)}}catch(D){Yr.length=0,wa(D,t,1),M=k(Yt)}let $=M;if(U&&_!==!1){const D=Object.keys(U),{shapeFlag:N}=$;D.length&&N&7&&(r&&D.some(rc)&&(U=Pb(U,r)),$=nn($,U,!1,!0))}return s.dirs&&($=nn($,null,!1,!0),$.dirs=$.dirs?$.dirs.concat(s.dirs):s.dirs),s.transition&&co($,s.transition),M=$,Hl(C),M}const Ob=t=>{let e;for(const s in t)(s==="class"||s==="style"||ya(s))&&((e||(e={}))[s]=t[s]);return e},Pb=(t,e)=>{const s={};for(const i in t)(!rc(i)||!(i.slice(9)in e))&&(s[i]=t[i]);return s};function jb(t,e,s){const{props:i,children:n,component:r}=t,{props:o,children:l,patchFlag:a}=e,d=r.emitsOptions;if(e.dirs||e.transition)return!0;if(s&&a>=0){if(a&1024)return!0;if(a&16)return i?Pf(i,o,d):!!o;if(a&8){const u=e.dynamicProps;for(let f=0;f<u.length;f++){const h=u[f];if(o[h]!==i[h]&&!Ca(d,h))return!0}}}else return(n||l)&&(!l||!l.$stable)?!0:i===o?!1:i?o?Pf(i,o,d):!0:!!o;return!1}function Pf(t,e,s){const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!0;for(let n=0;n<i.length;n++){const r=i[n];if(e[r]!==t[r]&&!Ca(s,r))return!0}return!1}function Rb({vnode:t,parent:e},s){for(;e;){const i=e.subTree;if(i.suspense&&i.suspense.activeBranch===t&&(i.el=t.el),i===t)(t=e.vnode).el=s,e=e.parent;else break}}const bg=t=>t.__isSuspense;function Lb(t,e){e&&e.pendingBranch?Le(t)?e.effects.push(...t):e.effects.push(t):W1(t)}const X=Symbol.for("v-fgt"),Aa=Symbol.for("v-txt"),Yt=Symbol.for("v-cmt"),Ml=Symbol.for("v-stc"),Yr=[];let As=null;function g(t=!1){Yr.push(As=t?null:[])}function Bb(){Yr.pop(),As=Yr[Yr.length-1]||null}let fo=1;function Kl(t,e=!1){fo+=t,t<0&&As&&e&&(As.hasOnce=!0)}function xg(t){return t.dynamicChildren=fo>0?As||er:null,Bb(),fo>0&&As&&As.push(t),t}function x(t,e,s,i,n,r){return xg(c(t,e,s,i,n,r,!0))}function he(t,e,s,i,n){return xg(k(t,e,s,i,n,!0))}function ho(t){return t?t.__v_isVNode===!0:!1}function wn(t,e){return t.type===e.type&&t.key===e.key}const kg=({key:t})=>t??null,Dl=({ref:t,ref_key:e,ref_for:s})=>(typeof t=="number"&&(t=""+t),t!=null?wt(t)||Zt(t)||ze(t)?{i:Wt,r:t,k:e,f:!!s}:t:null);function c(t,e=null,s=null,i=0,n=null,r=t===X?0:1,o=!1,l=!1){const a={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&kg(e),ref:e&&Dl(e),scopeId:Im,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:i,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:Wt};return l?(xc(a,s),r&128&&t.normalize(a)):s&&(a.shapeFlag|=wt(s)?8:16),fo>0&&!o&&As&&(a.patchFlag>0||r&6)&&a.patchFlag!==32&&As.push(a),a}const k=Ib;function Ib(t,e=null,s=null,i=0,n=null,r=!1){if((!t||t===tg)&&(t=Yt),ho(t)){const l=nn(t,e,!0);return s&&xc(l,s),fo>0&&!r&&As&&(l.shapeFlag&6?As[As.indexOf(t)]=l:As.push(l)),l.patchFlag=-2,l}if(Jb(t)&&(t=t.__vccOpts),e){e=Ub(e);let{class:l,style:a}=e;l&&!wt(l)&&(e.class=Ve(l)),at(a)&&(mc(a)&&!Le(a)&&(a=It({},a)),e.style=oo(a))}const o=wt(t)?1:bg(t)?128:Nm(t)?64:at(t)?4:ze(t)?2:0;return c(t,e,s,i,n,o,r,!0)}function Ub(t){return t?mc(t)||ug(t)?It({},t):t:null}function nn(t,e,s=!1,i=!1){const{props:n,ref:r,patchFlag:o,children:l,transition:a}=t,d=e?Nb(n||{},e):n,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:d,key:d&&kg(d),ref:e&&e.ref?s&&r?Le(r)?r.concat(Dl(e)):[r,Dl(e)]:Dl(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==X?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:a,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&nn(t.ssContent),ssFallback:t.ssFallback&&nn(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return a&&i&&co(u,a.clone(u)),u}function se(t=" ",e=0){return k(Aa,null,t,e)}function Va(t,e){const s=k(Ml,null,t);return s.staticCount=e,s}function R(t="",e=!1){return e?(g(),he(Yt,null,t)):k(Yt,null,t)}function li(t){return t==null||typeof t=="boolean"?k(Yt):Le(t)?k(X,null,t.slice()):ho(t)?Fi(t):k(Aa,null,String(t))}function Fi(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:nn(t)}function xc(t,e){let s=0;const{shapeFlag:i}=t;if(e==null)e=null;else if(Le(e))s=16;else if(typeof e=="object")if(i&65){const n=e.default;n&&(n._c&&(n._d=!1),xc(t,n()),n._c&&(n._d=!0));return}else{s=32;const n=e._;!n&&!ug(e)?e._ctx=Wt:n===3&&Wt&&(Wt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else ze(e)?(e={default:e,_ctx:Wt},s=32):(e=String(e),i&64?(s=16,e=[se(e)]):s=8);t.children=e,t.shapeFlag|=s}function Nb(...t){const e={};for(let s=0;s<t.length;s++){const i=t[s];for(const n in i)if(n==="class")e.class!==i.class&&(e.class=Ve([e.class,i.class]));else if(n==="style")e.style=oo([e.style,i.style]);else if(ya(n)){const r=e[n],o=i[n];o&&r!==o&&!(Le(r)&&r.includes(o))&&(e[n]=r?[].concat(r,o):o)}else n!==""&&(e[n]=i[n])}return e}function ei(t,e,s,i=null){qs(t,e,7,[s,i])}const zb=og();let Fb=0;function Hb(t,e,s){const i=t.type,n=(e?e.appContext:t.appContext)||zb,r={uid:Fb++,vnode:t,type:i,parent:e,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new m1(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(n.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:cg(i,n),emitsOptions:vg(i,n),emit:null,emitted:null,propsDefaults:ct,inheritAttrs:i.inheritAttrs,ctx:ct,data:ct,props:ct,attrs:ct,slots:ct,refs:ct,setupState:ct,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=Eb.bind(null,r),t.ce&&t.ce(r),r}let Xt=null;const kc=()=>Xt||Wt;let Jl,td;{const t=xa(),e=(s,i)=>{let n;return(n=t[s])||(n=t[s]=[]),n.push(i),r=>{n.length>1?n.forEach(o=>o(r)):n[0](r)}};Jl=e("__VUE_INSTANCE_SETTERS__",s=>Xt=s),td=e("__VUE_SSR_SETTERS__",s=>po=s)}const Bo=t=>{const e=Xt;return Jl(t),t.scope.on(),()=>{t.scope.off(),Jl(e)}},jf=()=>{Xt&&Xt.scope.off(),Jl(null)};function wg(t){return t.vnode.shapeFlag&4}let po=!1;function Wb(t,e=!1,s=!1){e&&td(e);const{props:i,children:n}=t.vnode,r=wg(t);yb(t,i,r,e),kb(t,n,s||e);const o=r?qb(t,e):void 0;return e&&td(!1),o}function qb(t,e){const s=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,lb);const{setup:i}=s;if(i){$i();const n=t.setupContext=i.length>1?_g(t):null,r=Bo(t),o=Lo(i,t,0,[t.props,n]),l=cm(o);if(Oi(),r(),(l||t.sp)&&!nr(t)&&Xm(t),l){if(o.then(jf,jf),e)return o.then(a=>{Rf(t,a)}).catch(a=>{wa(a,t,0)});t.asyncDep=o}else Rf(t,o)}else Sg(t)}function Rf(t,e,s){ze(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:at(e)&&(t.setupState=Pm(e)),Sg(t)}function Sg(t,e,s){const i=t.type;t.render||(t.render=i.render||pi);{const n=Bo(t);$i();try{db(t)}finally{Oi(),n()}}}const Gb={get(t,e){return Jt(t,"get",""),t[e]}};function _g(t){const e=s=>{t.exposed=s||{}};return{attrs:new Proxy(t.attrs,Gb),slots:t.slots,emit:t.emit,expose:e}}function Ma(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Pm(j1(t.exposed)),{get(e,s){if(s in e)return e[s];if(s in Jr)return Jr[s](t)},has(e,s){return s in e||s in Jr}})):t.proxy}function Kb(t,e=!0){return ze(t)?t.displayName||t.name:t.name||e&&t.__name}function Jb(t){return ze(t)&&"__vccOpts"in t}const le=(t,e)=>U1(t,e,po);function Dt(t,e,s){try{Kl(-1);const i=arguments.length;return i===2?at(e)&&!Le(e)?ho(e)?k(t,null,[e]):k(t,e):k(t,null,e):(i>3?s=Array.prototype.slice.call(arguments,2):i===3&&ho(s)&&(s=[s]),k(t,e,s))}finally{Kl(1)}}const Yb="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let sd;const Lf=typeof window<"u"&&window.trustedTypes;if(Lf)try{sd=Lf.createPolicy("vue",{createHTML:t=>t})}catch{}const Cg=sd?t=>sd.createHTML(t):t=>t,Xb="http://www.w3.org/2000/svg",Qb="http://www.w3.org/1998/Math/MathML",_i=typeof document<"u"?document:null,Bf=_i&&_i.createElement("template"),Zb={insert:(t,e,s)=>{e.insertBefore(t,s||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,s,i)=>{const n=e==="svg"?_i.createElementNS(Xb,t):e==="mathml"?_i.createElementNS(Qb,t):s?_i.createElement(t,{is:s}):_i.createElement(t);return t==="select"&&i&&i.multiple!=null&&n.setAttribute("multiple",i.multiple),n},createText:t=>_i.createTextNode(t),createComment:t=>_i.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>_i.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,s,i,n,r){const o=s?s.previousSibling:e.lastChild;if(n&&(n===r||n.nextSibling))for(;e.insertBefore(n.cloneNode(!0),s),!(n===r||!(n=n.nextSibling)););else{Bf.innerHTML=Cg(i==="svg"?`<svg>${t}</svg>`:i==="mathml"?`<math>${t}</math>`:t);const l=Bf.content;if(i==="svg"||i==="mathml"){const a=l.firstChild;for(;a.firstChild;)l.appendChild(a.firstChild);l.removeChild(a)}e.insertBefore(l,s)}return[o?o.nextSibling:e.firstChild,s?s.previousSibling:e.lastChild]}},Ii="transition",Tr="animation",mo=Symbol("_vtc"),Ag={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},ex=It({},Wm,Ag),tx=t=>(t.displayName="Transition",t.props=ex,t),wc=tx((t,{slots:e})=>Dt(J1,sx(t),e)),mn=(t,e=[])=>{Le(t)?t.forEach(s=>s(...e)):t&&t(...e)},If=t=>t?Le(t)?t.some(e=>e.length>1):t.length>1:!1;function sx(t){const e={};for(const z in t)z in Ag||(e[z]=t[z]);if(t.css===!1)return e;const{name:s="v",type:i,duration:n,enterFromClass:r=`${s}-enter-from`,enterActiveClass:o=`${s}-enter-active`,enterToClass:l=`${s}-enter-to`,appearFromClass:a=r,appearActiveClass:d=o,appearToClass:u=l,leaveFromClass:f=`${s}-leave-from`,leaveActiveClass:h=`${s}-leave-active`,leaveToClass:m=`${s}-leave-to`}=t,w=ix(n),_=w&&w[0],C=w&&w[1],{onBeforeEnter:M,onEnter:U,onEnterCancelled:$,onLeave:D,onLeaveCancelled:N,onBeforeAppear:q=M,onAppear:P=U,onAppearCancelled:ne=$}=e,te=(z,ae,re,ye)=>{z._enterCancelled=ye,gn(z,ae?u:l),gn(z,ae?d:o),re&&re()},pe=(z,ae)=>{z._isLeaving=!1,gn(z,f),gn(z,m),gn(z,h),ae&&ae()},Q=z=>(ae,re)=>{const ye=z?P:U,E=()=>te(ae,z,re);mn(ye,[ae,E]),Uf(()=>{gn(ae,z?a:r),ki(ae,z?u:l),If(ye)||Nf(ae,i,_,E)})};return It(e,{onBeforeEnter(z){mn(M,[z]),ki(z,r),ki(z,o)},onBeforeAppear(z){mn(q,[z]),ki(z,a),ki(z,d)},onEnter:Q(!1),onAppear:Q(!0),onLeave(z,ae){z._isLeaving=!0;const re=()=>pe(z,ae);ki(z,f),z._enterCancelled?(ki(z,h),Hf(z)):(Hf(z),ki(z,h)),Uf(()=>{z._isLeaving&&(gn(z,f),ki(z,m),If(D)||Nf(z,i,C,re))}),mn(D,[z,re])},onEnterCancelled(z){te(z,!1,void 0,!0),mn($,[z])},onAppearCancelled(z){te(z,!0,void 0,!0),mn(ne,[z])},onLeaveCancelled(z){pe(z),mn(N,[z])}})}function ix(t){if(t==null)return null;if(at(t))return[au(t.enter),au(t.leave)];{const e=au(t);return[e,e]}}function au(t){return l1(t)}function ki(t,e){e.split(/\s+/).forEach(s=>s&&t.classList.add(s)),(t[mo]||(t[mo]=new Set)).add(e)}function gn(t,e){e.split(/\s+/).forEach(i=>i&&t.classList.remove(i));const s=t[mo];s&&(s.delete(e),s.size||(t[mo]=void 0))}function Uf(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let nx=0;function Nf(t,e,s,i){const n=t._endId=++nx,r=()=>{n===t._endId&&i()};if(s!=null)return setTimeout(r,s);const{type:o,timeout:l,propCount:a}=rx(t,e);if(!o)return i();const d=o+"end";let u=0;const f=()=>{t.removeEventListener(d,h),r()},h=m=>{m.target===t&&++u>=a&&f()};setTimeout(()=>{u<a&&f()},l+1),t.addEventListener(d,h)}function rx(t,e){const s=window.getComputedStyle(t),i=w=>(s[w]||"").split(", "),n=i(`${Ii}Delay`),r=i(`${Ii}Duration`),o=zf(n,r),l=i(`${Tr}Delay`),a=i(`${Tr}Duration`),d=zf(l,a);let u=null,f=0,h=0;e===Ii?o>0&&(u=Ii,f=o,h=r.length):e===Tr?d>0&&(u=Tr,f=d,h=a.length):(f=Math.max(o,d),u=f>0?o>d?Ii:Tr:null,h=u?u===Ii?r.length:a.length:0);const m=u===Ii&&/\b(?:transform|all)(?:,|$)/.test(i(`${Ii}Property`).toString());return{type:u,timeout:f,propCount:h,hasTransform:m}}function zf(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((s,i)=>Ff(s)+Ff(t[i])))}function Ff(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function Hf(t){return(t?t.ownerDocument:document).body.offsetHeight}function ox(t,e,s){const i=t[mo];i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?t.removeAttribute("class"):s?t.setAttribute("class",e):t.className=e}const Yl=Symbol("_vod"),Vg=Symbol("_vsh"),gt={name:"show",beforeMount(t,{value:e},{transition:s}){t[Yl]=t.style.display==="none"?"":t.style.display,s&&e?s.beforeEnter(t):Er(t,e)},mounted(t,{value:e},{transition:s}){s&&e&&s.enter(t)},updated(t,{value:e,oldValue:s},{transition:i}){!e!=!s&&(i?e?(i.beforeEnter(t),Er(t,!0),i.enter(t)):i.leave(t,()=>{Er(t,!1)}):Er(t,e))},beforeUnmount(t,{value:e}){Er(t,e)}};function Er(t,e){t.style.display=e?t[Yl]:"none",t[Vg]=!e}const lx=Symbol(""),ax=/(?:^|;)\s*display\s*:/;function ux(t,e,s){const i=t.style,n=wt(s);let r=!1;if(s&&!n){if(e)if(wt(e))for(const o of e.split(";")){const l=o.slice(0,o.indexOf(":")).trim();s[l]==null&&Tl(i,l,"")}else for(const o in e)s[o]==null&&Tl(i,o,"");for(const o in s)o==="display"&&(r=!0),Tl(i,o,s[o])}else if(n){if(e!==s){const o=i[lx];o&&(s+=";"+o),i.cssText=s,r=ax.test(s)}}else e&&t.removeAttribute("style");Yl in t&&(t[Yl]=r?i.display:"",t[Vg]&&(i.display="none"))}const Wf=/\s*!important$/;function Tl(t,e,s){if(Le(s))s.forEach(i=>Tl(t,e,i));else if(s==null&&(s=""),e.startsWith("--"))t.setProperty(e,s);else{const i=dx(t,e);Wf.test(s)?t.setProperty(Un(i),s.replace(Wf,""),"important"):t[i]=s}}const qf=["Webkit","Moz","ms"],uu={};function dx(t,e){const s=uu[e];if(s)return s;let i=Ls(e);if(i!=="filter"&&i in t)return uu[e]=i;i=ba(i);for(let n=0;n<qf.length;n++){const r=qf[n]+i;if(r in t)return uu[e]=r}return e}const Gf="http://www.w3.org/1999/xlink";function Kf(t,e,s,i,n,r=h1(e)){i&&e.startsWith("xlink:")?s==null?t.removeAttributeNS(Gf,e.slice(6,e.length)):t.setAttributeNS(Gf,e,s):s==null||r&&!mm(s)?t.removeAttribute(e):t.setAttribute(e,r?"":Ws(s)?String(s):s)}function Jf(t,e,s,i,n){if(e==="innerHTML"||e==="textContent"){s!=null&&(t[e]=e==="innerHTML"?Cg(s):s);return}const r=t.tagName;if(e==="value"&&r!=="PROGRESS"&&!r.includes("-")){const l=r==="OPTION"?t.getAttribute("value")||"":t.value,a=s==null?t.type==="checkbox"?"on":"":String(s);(l!==a||!("_value"in t))&&(t.value=a),s==null&&t.removeAttribute(e),t._value=s;return}let o=!1;if(s===""||s==null){const l=typeof t[e];l==="boolean"?s=mm(s):s==null&&l==="string"?(s="",o=!0):l==="number"&&(s=0,o=!0)}try{t[e]=s}catch{}o&&t.removeAttribute(n||e)}function Di(t,e,s,i){t.addEventListener(e,s,i)}function cx(t,e,s,i){t.removeEventListener(e,s,i)}const Yf=Symbol("_vei");function fx(t,e,s,i,n=null){const r=t[Yf]||(t[Yf]={}),o=r[e];if(i&&o)o.value=i;else{const[l,a]=hx(e);if(i){const d=r[e]=gx(i,n);Di(t,l,d,a)}else o&&(cx(t,l,o,a),r[e]=void 0)}}const Xf=/(?:Once|Passive|Capture)$/;function hx(t){let e;if(Xf.test(t)){e={};let i;for(;i=t.match(Xf);)t=t.slice(0,t.length-i[0].length),e[i[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Un(t.slice(2)),e]}let du=0;const px=Promise.resolve(),mx=()=>du||(px.then(()=>du=0),du=Date.now());function gx(t,e){const s=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=s.attached)return;qs(yx(i,s.value),e,5,[i])};return s.value=t,s.attached=mx(),s}function yx(t,e){if(Le(e)){const s=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{s.call(t),t._stopped=!0},e.map(i=>n=>!n._stopped&&i&&i(n))}else return e}const Qf=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,vx=(t,e,s,i,n,r)=>{const o=n==="svg";e==="class"?ox(t,i,o):e==="style"?ux(t,s,i):ya(e)?rc(e)||fx(t,e,s,i,r):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):bx(t,e,i,o))?(Jf(t,e,i),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Kf(t,e,i,o,r,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!wt(i))?Jf(t,Ls(e),i,r,e):(e==="true-value"?t._trueValue=i:e==="false-value"&&(t._falseValue=i),Kf(t,e,i,o))};function bx(t,e,s,i){if(i)return!!(e==="innerHTML"||e==="textContent"||e in t&&Qf(e)&&ze(s));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const n=t.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return Qf(e)&&wt(s)?!1:e in t}const rn=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Le(e)?s=>Cl(e,s):e};function xx(t){t.target.composing=!0}function Zf(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Ps=Symbol("_assign"),Gi={created(t,{modifiers:{lazy:e,trim:s,number:i}},n){t[Ps]=rn(n);const r=i||n.props&&n.props.type==="number";Di(t,e?"change":"input",o=>{if(o.target.composing)return;let l=t.value;s&&(l=l.trim()),r&&(l=Ul(l)),t[Ps](l)}),s&&Di(t,"change",()=>{t.value=t.value.trim()}),e||(Di(t,"compositionstart",xx),Di(t,"compositionend",Zf),Di(t,"change",Zf))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:s,modifiers:{lazy:i,trim:n,number:r}},o){if(t[Ps]=rn(o),t.composing)return;const l=(r||t.type==="number")&&!/^0\d/.test(t.value)?Ul(t.value):t.value,a=e??"";l!==a&&(document.activeElement===t&&t.type!=="range"&&(i&&e===s||n&&t.value.trim()===a)||(t.value=a))}},Mg={deep:!0,created(t,e,s){t[Ps]=rn(s),Di(t,"change",()=>{const i=t._modelValue,n=cr(t),r=t.checked,o=t[Ps];if(Le(i)){const l=ac(i,n),a=l!==-1;if(r&&!a)o(i.concat(n));else if(!r&&a){const d=[...i];d.splice(l,1),o(d)}}else if(wr(i)){const l=new Set(i);r?l.add(n):l.delete(n),o(l)}else o(Dg(t,r))})},mounted:eh,beforeUpdate(t,e,s){t[Ps]=rn(s),eh(t,e,s)}};function eh(t,{value:e,oldValue:s},i){t._modelValue=e;let n;if(Le(e))n=ac(e,i.props.value)>-1;else if(wr(e))n=e.has(i.props.value);else{if(e===s)return;n=On(e,Dg(t,!0))}t.checked!==n&&(t.checked=n)}const bn={created(t,{value:e},s){t.checked=On(e,s.props.value),t[Ps]=rn(s),Di(t,"change",()=>{t[Ps](cr(t))})},beforeUpdate(t,{value:e,oldValue:s},i){t[Ps]=rn(i),e!==s&&(t.checked=On(e,i.props.value))}},id={deep:!0,created(t,{value:e,modifiers:{number:s}},i){const n=wr(e);Di(t,"change",()=>{const r=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>s?Ul(cr(o)):cr(o));t[Ps](t.multiple?n?new Set(r):r:r[0]),t._assigning=!0,Tn(()=>{t._assigning=!1})}),t[Ps]=rn(i)},mounted(t,{value:e}){th(t,e)},beforeUpdate(t,e,s){t[Ps]=rn(s)},updated(t,{value:e}){t._assigning||th(t,e)}};function th(t,e){const s=t.multiple,i=Le(e);if(!(s&&!i&&!wr(e))){for(let n=0,r=t.options.length;n<r;n++){const o=t.options[n],l=cr(o);if(s)if(i){const a=typeof l;a==="string"||a==="number"?o.selected=e.some(d=>String(d)===String(l)):o.selected=ac(e,l)>-1}else o.selected=e.has(l);else if(On(cr(o),e)){t.selectedIndex!==n&&(t.selectedIndex=n);return}}!s&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function cr(t){return"_value"in t?t._value:t.value}function Dg(t,e){const s=e?"_trueValue":"_falseValue";return s in t?t[s]:e}const kx={created(t,e,s){tl(t,e,s,null,"created")},mounted(t,e,s){tl(t,e,s,null,"mounted")},beforeUpdate(t,e,s,i){tl(t,e,s,i,"beforeUpdate")},updated(t,e,s,i){tl(t,e,s,i,"updated")}};function wx(t,e){switch(t){case"SELECT":return id;case"TEXTAREA":return Gi;default:switch(e){case"checkbox":return Mg;case"radio":return bn;default:return Gi}}}function tl(t,e,s,i,n){const o=wx(t.tagName,s.props&&s.props.type)[n];o&&o(t,e,s,i)}const Sx=["ctrl","shift","alt","meta"],_x={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>Sx.some(s=>t[`${s}Key`]&&!e.includes(s))},ft=(t,e)=>{const s=t._withMods||(t._withMods={}),i=e.join(".");return s[i]||(s[i]=((n,...r)=>{for(let o=0;o<e.length;o++){const l=_x[e[o]];if(l&&l(n,e))return}return t(n,...r)}))},Cx=It({patchProp:vx},Zb);let sh;function Ax(){return sh||(sh=Sb(Cx))}const Vx=((...t)=>{const e=Ax().createApp(...t),{mount:s}=e;return e.mount=i=>{const n=Dx(i);if(!n)return;const r=e._component;!ze(r)&&!r.render&&!r.template&&(r.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const o=s(n,!1,Mx(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),o},e});function Mx(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Dx(t){return wt(t)?document.querySelector(t):t}const Tx="/framework-logo.png";/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const qn=typeof document<"u";function Tg(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Ex(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&Tg(t.default)}const it=Object.assign;function cu(t,e){const s={};for(const i in e){const n=e[i];s[i]=Gs(n)?n.map(t):t(n)}return s}const Xr=()=>{},Gs=Array.isArray;function ih(t,e){const s={};for(const i in t)s[i]=i in e?e[i]:t[i];return s}const Eg=/#/g,$x=/&/g,Ox=/\//g,Px=/=/g,jx=/\?/g,$g=/\+/g,Rx=/%5B/g,Lx=/%5D/g,Og=/%5E/g,Bx=/%60/g,Pg=/%7B/g,Ix=/%7C/g,jg=/%7D/g,Ux=/%20/g;function Sc(t){return t==null?"":encodeURI(""+t).replace(Ix,"|").replace(Rx,"[").replace(Lx,"]")}function Nx(t){return Sc(t).replace(Pg,"{").replace(jg,"}").replace(Og,"^")}function nd(t){return Sc(t).replace($g,"%2B").replace(Ux,"+").replace(Eg,"%23").replace($x,"%26").replace(Bx,"`").replace(Pg,"{").replace(jg,"}").replace(Og,"^")}function zx(t){return nd(t).replace(Px,"%3D")}function Fx(t){return Sc(t).replace(Eg,"%23").replace(jx,"%3F")}function Hx(t){return Fx(t).replace(Ox,"%2F")}function go(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const Wx=/\/$/,qx=t=>t.replace(Wx,"");function fu(t,e,s="/"){let i,n={},r="",o="";const l=e.indexOf("#");let a=e.indexOf("?");return a=l>=0&&a>l?-1:a,a>=0&&(i=e.slice(0,a),r=e.slice(a,l>0?l:e.length),n=t(r.slice(1))),l>=0&&(i=i||e.slice(0,l),o=e.slice(l,e.length)),i=Yx(i??e,s),{fullPath:i+r+o,path:i,query:n,hash:go(o)}}function Gx(t,e){const s=e.query?t(e.query):"";return e.path+(s&&"?")+s+(e.hash||"")}function nh(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function Kx(t,e,s){const i=e.matched.length-1,n=s.matched.length-1;return i>-1&&i===n&&fr(e.matched[i],s.matched[n])&&Rg(e.params,s.params)&&t(e.query)===t(s.query)&&e.hash===s.hash}function fr(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Rg(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const s in t)if(!Jx(t[s],e[s]))return!1;return!0}function Jx(t,e){return Gs(t)?rh(t,e):Gs(e)?rh(e,t):t===e}function rh(t,e){return Gs(e)?t.length===e.length&&t.every((s,i)=>s===e[i]):t.length===1&&t[0]===e}function Yx(t,e){if(t.startsWith("/"))return t;if(!t)return e;const s=e.split("/"),i=t.split("/"),n=i[i.length-1];(n===".."||n===".")&&i.push("");let r=s.length-1,o,l;for(o=0;o<i.length;o++)if(l=i[o],l!==".")if(l==="..")r>1&&r--;else break;return s.slice(0,r).join("/")+"/"+i.slice(o).join("/")}const Ui={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let rd=(function(t){return t.pop="pop",t.push="push",t})({}),hu=(function(t){return t.back="back",t.forward="forward",t.unknown="",t})({});function Xx(t){if(!t)if(qn){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),qx(t)}const Qx=/^[^#]+#/;function Zx(t,e){return t.replace(Qx,"#")+e}function ek(t,e){const s=document.documentElement.getBoundingClientRect(),i=t.getBoundingClientRect();return{behavior:e.behavior,left:i.left-s.left-(e.left||0),top:i.top-s.top-(e.top||0)}}const Da=()=>({left:window.scrollX,top:window.scrollY});function tk(t){let e;if("el"in t){const s=t.el,i=typeof s=="string"&&s.startsWith("#"),n=typeof s=="string"?i?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!n)return;e=ek(n,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function oh(t,e){return(history.state?history.state.position-e:-1)+t}const od=new Map;function sk(t,e){od.set(t,e)}function ik(t){const e=od.get(t);return od.delete(t),e}function nk(t){return typeof t=="string"||t&&typeof t=="object"}function Lg(t){return typeof t=="string"||typeof t=="symbol"}let _t=(function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t})({});const Bg=Symbol("");_t.MATCHER_NOT_FOUND+"",_t.NAVIGATION_GUARD_REDIRECT+"",_t.NAVIGATION_ABORTED+"",_t.NAVIGATION_CANCELLED+"",_t.NAVIGATION_DUPLICATED+"";function hr(t,e){return it(new Error,{type:t,[Bg]:!0},e)}function wi(t,e){return t instanceof Error&&Bg in t&&(e==null||!!(t.type&e))}const rk=["params","query","hash"];function ok(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const s of rk)s in t&&(e[s]=t[s]);return JSON.stringify(e,null,2)}function lk(t){const e={};if(t===""||t==="?")return e;const s=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<s.length;++i){const n=s[i].replace($g," "),r=n.indexOf("="),o=go(r<0?n:n.slice(0,r)),l=r<0?null:go(n.slice(r+1));if(o in e){let a=e[o];Gs(a)||(a=e[o]=[a]),a.push(l)}else e[o]=l}return e}function lh(t){let e="";for(let s in t){const i=t[s];if(s=zx(s),i==null){i!==void 0&&(e+=(e.length?"&":"")+s);continue}(Gs(i)?i.map(n=>n&&nd(n)):[i&&nd(i)]).forEach(n=>{n!==void 0&&(e+=(e.length?"&":"")+s,n!=null&&(e+="="+n))})}return e}function ak(t){const e={};for(const s in t){const i=t[s];i!==void 0&&(e[s]=Gs(i)?i.map(n=>n==null?null:""+n):i==null?i:""+i)}return e}const uk=Symbol(""),ah=Symbol(""),Ta=Symbol(""),_c=Symbol(""),ld=Symbol("");function $r(){let t=[];function e(i){return t.push(i),()=>{const n=t.indexOf(i);n>-1&&t.splice(n,1)}}function s(){t=[]}return{add:e,list:()=>t.slice(),reset:s}}function Hi(t,e,s,i,n,r=o=>o()){const o=i&&(i.enterCallbacks[n]=i.enterCallbacks[n]||[]);return()=>new Promise((l,a)=>{const d=h=>{h===!1?a(hr(_t.NAVIGATION_ABORTED,{from:s,to:e})):h instanceof Error?a(h):nk(h)?a(hr(_t.NAVIGATION_GUARD_REDIRECT,{from:e,to:h})):(o&&i.enterCallbacks[n]===o&&typeof h=="function"&&o.push(h),l())},u=r(()=>t.call(i&&i.instances[n],e,s,d));let f=Promise.resolve(u);t.length<3&&(f=f.then(d)),f.catch(h=>a(h))})}function pu(t,e,s,i,n=r=>r()){const r=[];for(const o of t)for(const l in o.components){let a=o.components[l];if(!(e!=="beforeRouteEnter"&&!o.instances[l]))if(Tg(a)){const d=(a.__vccOpts||a)[e];d&&r.push(Hi(d,s,i,o,l,n))}else{let d=a();r.push(()=>d.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${l}" at "${o.path}"`);const f=Ex(u)?u.default:u;o.mods[l]=u,o.components[l]=f;const h=(f.__vccOpts||f)[e];return h&&Hi(h,s,i,o,l,n)()}))}}return r}function dk(t,e){const s=[],i=[],n=[],r=Math.max(e.matched.length,t.matched.length);for(let o=0;o<r;o++){const l=e.matched[o];l&&(t.matched.find(d=>fr(d,l))?i.push(l):s.push(l));const a=t.matched[o];a&&(e.matched.find(d=>fr(d,a))||n.push(a))}return[s,i,n]}/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let ck=()=>location.protocol+"//"+location.host;function Ig(t,e){const{pathname:s,search:i,hash:n}=e,r=t.indexOf("#");if(r>-1){let o=n.includes(t.slice(r))?t.slice(r).length:1,l=n.slice(o);return l[0]!=="/"&&(l="/"+l),nh(l,"")}return nh(s,t)+i+n}function fk(t,e,s,i){let n=[],r=[],o=null;const l=({state:h})=>{const m=Ig(t,location),w=s.value,_=e.value;let C=0;if(h){if(s.value=m,e.value=h,o&&o===w){o=null;return}C=_?h.position-_.position:0}else i(m);n.forEach(M=>{M(s.value,w,{delta:C,type:rd.pop,direction:C?C>0?hu.forward:hu.back:hu.unknown})})};function a(){o=s.value}function d(h){n.push(h);const m=()=>{const w=n.indexOf(h);w>-1&&n.splice(w,1)};return r.push(m),m}function u(){if(document.visibilityState==="hidden"){const{history:h}=window;if(!h.state)return;h.replaceState(it({},h.state,{scroll:Da()}),"")}}function f(){for(const h of r)h();r=[],window.removeEventListener("popstate",l),window.removeEventListener("pagehide",u),document.removeEventListener("visibilitychange",u)}return window.addEventListener("popstate",l),window.addEventListener("pagehide",u),document.addEventListener("visibilitychange",u),{pauseListeners:a,listen:d,destroy:f}}function uh(t,e,s,i=!1,n=!1){return{back:t,current:e,forward:s,replaced:i,position:window.history.length,scroll:n?Da():null}}function hk(t){const{history:e,location:s}=window,i={value:Ig(t,s)},n={value:e.state};n.value||r(i.value,{back:null,current:i.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function r(a,d,u){const f=t.indexOf("#"),h=f>-1?(s.host&&document.querySelector("base")?t:t.slice(f))+a:ck()+t+a;try{e[u?"replaceState":"pushState"](d,"",h),n.value=d}catch(m){console.error(m),s[u?"replace":"assign"](h)}}function o(a,d){r(a,it({},e.state,uh(n.value.back,a,n.value.forward,!0),d,{position:n.value.position}),!0),i.value=a}function l(a,d){const u=it({},n.value,e.state,{forward:a,scroll:Da()});r(u.current,u,!0),r(a,it({},uh(i.value,a,null),{position:u.position+1},d),!1),i.value=a}return{location:i,state:n,push:l,replace:o}}function pk(t){t=Xx(t);const e=hk(t),s=fk(t,e.state,e.location,e.replace);function i(r,o=!0){o||s.pauseListeners(),history.go(r)}const n=it({location:"",base:t,go:i,createHref:Zx.bind(null,t)},e,s);return Object.defineProperty(n,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(n,"state",{enumerable:!0,get:()=>e.state.value}),n}function mk(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),pk(t)}let Cn=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t})({});var Ot=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t})(Ot||{});const gk={type:Cn.Static,value:""},yk=/[a-zA-Z0-9_]/;function vk(t){if(!t)return[[]];if(t==="/")return[[gk]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(m){throw new Error(`ERR (${s})/"${d}": ${m}`)}let s=Ot.Static,i=s;const n=[];let r;function o(){r&&n.push(r),r=[]}let l=0,a,d="",u="";function f(){d&&(s===Ot.Static?r.push({type:Cn.Static,value:d}):s===Ot.Param||s===Ot.ParamRegExp||s===Ot.ParamRegExpEnd?(r.length>1&&(a==="*"||a==="+")&&e(`A repeatable param (${d}) must be alone in its segment. eg: '/:ids+.`),r.push({type:Cn.Param,value:d,regexp:u,repeatable:a==="*"||a==="+",optional:a==="*"||a==="?"})):e("Invalid state to consume buffer"),d="")}function h(){d+=a}for(;l<t.length;){if(a=t[l++],a==="\\"&&s!==Ot.ParamRegExp){i=s,s=Ot.EscapeNext;continue}switch(s){case Ot.Static:a==="/"?(d&&f(),o()):a===":"?(f(),s=Ot.Param):h();break;case Ot.EscapeNext:h(),s=i;break;case Ot.Param:a==="("?s=Ot.ParamRegExp:yk.test(a)?h():(f(),s=Ot.Static,a!=="*"&&a!=="?"&&a!=="+"&&l--);break;case Ot.ParamRegExp:a===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+a:s=Ot.ParamRegExpEnd:u+=a;break;case Ot.ParamRegExpEnd:f(),s=Ot.Static,a!=="*"&&a!=="?"&&a!=="+"&&l--,u="";break;default:e("Unknown state");break}}return s===Ot.ParamRegExp&&e(`Unfinished custom RegExp for param "${d}"`),f(),o(),n}const dh="[^/]+?",bk={sensitive:!1,strict:!1,start:!0,end:!0};var as=(function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t})(as||{});const xk=/[.+*?^${}()[\]/\\]/g;function kk(t,e){const s=it({},bk,e),i=[];let n=s.start?"^":"";const r=[];for(const d of t){const u=d.length?[]:[as.Root];s.strict&&!d.length&&(n+="/");for(let f=0;f<d.length;f++){const h=d[f];let m=as.Segment+(s.sensitive?as.BonusCaseSensitive:0);if(h.type===Cn.Static)f||(n+="/"),n+=h.value.replace(xk,"\\$&"),m+=as.Static;else if(h.type===Cn.Param){const{value:w,repeatable:_,optional:C,regexp:M}=h;r.push({name:w,repeatable:_,optional:C});const U=M||dh;if(U!==dh){m+=as.BonusCustomRegExp;try{`${U}`}catch(D){throw new Error(`Invalid custom RegExp for param "${w}" (${U}): `+D.message)}}let $=_?`((?:${U})(?:/(?:${U}))*)`:`(${U})`;f||($=C&&d.length<2?`(?:/${$})`:"/"+$),C&&($+="?"),n+=$,m+=as.Dynamic,C&&(m+=as.BonusOptional),_&&(m+=as.BonusRepeatable),U===".*"&&(m+=as.BonusWildcard)}u.push(m)}i.push(u)}if(s.strict&&s.end){const d=i.length-1;i[d][i[d].length-1]+=as.BonusStrict}s.strict||(n+="/?"),s.end?n+="$":s.strict&&!n.endsWith("/")&&(n+="(?:/|$)");const o=new RegExp(n,s.sensitive?"":"i");function l(d){const u=d.match(o),f={};if(!u)return null;for(let h=1;h<u.length;h++){const m=u[h]||"",w=r[h-1];f[w.name]=m&&w.repeatable?m.split("/"):m}return f}function a(d){let u="",f=!1;for(const h of t){(!f||!u.endsWith("/"))&&(u+="/"),f=!1;for(const m of h)if(m.type===Cn.Static)u+=m.value;else if(m.type===Cn.Param){const{value:w,repeatable:_,optional:C}=m,M=w in d?d[w]:"";if(Gs(M)&&!_)throw new Error(`Provided param "${w}" is an array but it is not repeatable (* or + modifiers)`);const U=Gs(M)?M.join("/"):M;if(!U)if(C)h.length<2&&(u.endsWith("/")?u=u.slice(0,-1):f=!0);else throw new Error(`Missing required param "${w}"`);u+=U}}return u||"/"}return{re:o,score:i,keys:r,parse:l,stringify:a}}function wk(t,e){let s=0;for(;s<t.length&&s<e.length;){const i=e[s]-t[s];if(i)return i;s++}return t.length<e.length?t.length===1&&t[0]===as.Static+as.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===as.Static+as.Segment?1:-1:0}function Ug(t,e){let s=0;const i=t.score,n=e.score;for(;s<i.length&&s<n.length;){const r=wk(i[s],n[s]);if(r)return r;s++}if(Math.abs(n.length-i.length)===1){if(ch(i))return 1;if(ch(n))return-1}return n.length-i.length}function ch(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const Sk={strict:!1,end:!0,sensitive:!1};function _k(t,e,s){const i=kk(vk(t.path),s),n=it(i,{record:t,parent:e,children:[],alias:[]});return e&&!n.record.aliasOf==!e.record.aliasOf&&e.children.push(n),n}function Ck(t,e){const s=[],i=new Map;e=ih(Sk,e);function n(f){return i.get(f)}function r(f,h,m){const w=!m,_=hh(f);_.aliasOf=m&&m.record;const C=ih(e,f),M=[_];if("alias"in f){const D=typeof f.alias=="string"?[f.alias]:f.alias;for(const N of D)M.push(hh(it({},_,{components:m?m.record.components:_.components,path:N,aliasOf:m?m.record:_})))}let U,$;for(const D of M){const{path:N}=D;if(h&&N[0]!=="/"){const q=h.record.path,P=q[q.length-1]==="/"?"":"/";D.path=h.record.path+(N&&P+N)}if(U=_k(D,h,C),m?m.alias.push(U):($=$||U,$!==U&&$.alias.push(U),w&&f.name&&!ph(U)&&o(f.name)),Ng(U)&&a(U),_.children){const q=_.children;for(let P=0;P<q.length;P++)r(q[P],U,m&&m.children[P])}m=m||U}return $?()=>{o($)}:Xr}function o(f){if(Lg(f)){const h=i.get(f);h&&(i.delete(f),s.splice(s.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=s.indexOf(f);h>-1&&(s.splice(h,1),f.record.name&&i.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function l(){return s}function a(f){const h=Mk(f,s);s.splice(h,0,f),f.record.name&&!ph(f)&&i.set(f.record.name,f)}function d(f,h){let m,w={},_,C;if("name"in f&&f.name){if(m=i.get(f.name),!m)throw hr(_t.MATCHER_NOT_FOUND,{location:f});C=m.record.name,w=it(fh(h.params,m.keys.filter($=>!$.optional).concat(m.parent?m.parent.keys.filter($=>$.optional):[]).map($=>$.name)),f.params&&fh(f.params,m.keys.map($=>$.name))),_=m.stringify(w)}else if(f.path!=null)_=f.path,m=s.find($=>$.re.test(_)),m&&(w=m.parse(_),C=m.record.name);else{if(m=h.name?i.get(h.name):s.find($=>$.re.test(h.path)),!m)throw hr(_t.MATCHER_NOT_FOUND,{location:f,currentLocation:h});C=m.record.name,w=it({},h.params,f.params),_=m.stringify(w)}const M=[];let U=m;for(;U;)M.unshift(U.record),U=U.parent;return{name:C,path:_,params:w,matched:M,meta:Vk(M)}}t.forEach(f=>r(f));function u(){s.length=0,i.clear()}return{addRoute:r,resolve:d,removeRoute:o,clearRoutes:u,getRoutes:l,getRecordMatcher:n}}function fh(t,e){const s={};for(const i of e)i in t&&(s[i]=t[i]);return s}function hh(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:Ak(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function Ak(t){const e={},s=t.props||!1;if("component"in t)e.default=s;else for(const i in t.components)e[i]=typeof s=="object"?s[i]:s;return e}function ph(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function Vk(t){return t.reduce((e,s)=>it(e,s.meta),{})}function Mk(t,e){let s=0,i=e.length;for(;s!==i;){const r=s+i>>1;Ug(t,e[r])<0?i=r:s=r+1}const n=Dk(t);return n&&(i=e.lastIndexOf(n,i-1)),i}function Dk(t){let e=t;for(;e=e.parent;)if(Ng(e)&&Ug(t,e)===0)return e}function Ng({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function mh(t){const e=Hs(Ta),s=Hs(_c),i=le(()=>{const a=ot(t.to);return e.resolve(a)}),n=le(()=>{const{matched:a}=i.value,{length:d}=a,u=a[d-1],f=s.matched;if(!u||!f.length)return-1;const h=f.findIndex(fr.bind(null,u));if(h>-1)return h;const m=gh(a[d-2]);return d>1&&gh(u)===m&&f[f.length-1].path!==m?f.findIndex(fr.bind(null,a[d-2])):h}),r=le(()=>n.value>-1&&Pk(s.params,i.value.params)),o=le(()=>n.value>-1&&n.value===s.matched.length-1&&Rg(s.params,i.value.params));function l(a={}){if(Ok(a)){const d=e[ot(t.replace)?"replace":"push"](ot(t.to)).catch(Xr);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>d),d}return Promise.resolve()}return{route:i,href:le(()=>i.value.href),isActive:r,isExactActive:o,navigate:l}}function Tk(t){return t.length===1?t[0]:t}const Ek=Ym({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:mh,setup(t,{slots:e}){const s=ci(mh(t)),{options:i}=Hs(Ta),n=le(()=>({[yh(t.activeClass,i.linkActiveClass,"router-link-active")]:s.isActive,[yh(t.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const r=e.default&&Tk(e.default(s));return t.custom?r:Dt("a",{"aria-current":s.isExactActive?t.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:n.value},r)}}}),$k=Ek;function Ok(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function Pk(t,e){for(const s in e){const i=e[s],n=t[s];if(typeof i=="string"){if(i!==n)return!1}else if(!Gs(n)||n.length!==i.length||i.some((r,o)=>r!==n[o]))return!1}return!0}function gh(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const yh=(t,e,s)=>t??e??s,jk=Ym({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:s}){const i=Hs(ld),n=le(()=>t.route||i.value),r=Hs(ah,0),o=le(()=>{let d=ot(r);const{matched:u}=n.value;let f;for(;(f=u[d])&&!f.components;)d++;return d}),l=le(()=>n.value.matched[o.value]);Vl(ah,le(()=>o.value+1)),Vl(uk,l),Vl(ld,n);const a=fe();return Je(()=>[a.value,l.value,t.name],([d,u,f],[h,m,w])=>{u&&(u.instances[f]=d,m&&m!==u&&d&&d===h&&(u.leaveGuards.size||(u.leaveGuards=m.leaveGuards),u.updateGuards.size||(u.updateGuards=m.updateGuards))),d&&u&&(!m||!fr(u,m)||!h)&&(u.enterCallbacks[f]||[]).forEach(_=>_(d))},{flush:"post"}),()=>{const d=n.value,u=t.name,f=l.value,h=f&&f.components[u];if(!h)return vh(s.default,{Component:h,route:d});const m=f.props[u],w=m?m===!0?d.params:typeof m=="function"?m(d):m:null,C=Dt(h,it({},w,e,{onVnodeUnmounted:M=>{M.component.isUnmounted&&(f.instances[u]=null)},ref:a}));return vh(s.default,{Component:C,route:d})||C}}});function vh(t,e){if(!t)return null;const s=t(e);return s.length===1?s[0]:s}const Rk=jk;function Lk(t){const e=Ck(t.routes,t),s=t.parseQuery||lk,i=t.stringifyQuery||lh,n=t.history,r=$r(),o=$r(),l=$r(),a=R1(Ui);let d=Ui;qn&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=cu.bind(null,V=>""+V),f=cu.bind(null,Hx),h=cu.bind(null,go);function m(V,Se){let ke,$e;return Lg(V)?(ke=e.getRecordMatcher(V),$e=Se):$e=V,e.addRoute($e,ke)}function w(V){const Se=e.getRecordMatcher(V);Se&&e.removeRoute(Se)}function _(){return e.getRoutes().map(V=>V.record)}function C(V){return!!e.getRecordMatcher(V)}function M(V,Se){if(Se=it({},Se||a.value),typeof V=="string"){const H=fu(s,V,Se.path),ee=e.resolve({path:H.path},Se),Z=n.createHref(H.fullPath);return it(H,ee,{params:h(ee.params),hash:go(H.hash),redirectedFrom:void 0,href:Z})}let ke;if(V.path!=null)ke=it({},V,{path:fu(s,V.path,Se.path).path});else{const H=it({},V.params);for(const ee in H)H[ee]==null&&delete H[ee];ke=it({},V,{params:f(H)}),Se.params=f(Se.params)}const $e=e.resolve(ke,Se),Fe=V.hash||"";$e.params=u(h($e.params));const T=Gx(i,it({},V,{hash:Nx(Fe),path:$e.path})),O=n.createHref(T);return it({fullPath:T,hash:Fe,query:i===lh?ak(V.query):V.query||{}},$e,{redirectedFrom:void 0,href:O})}function U(V){return typeof V=="string"?fu(s,V,a.value.path):it({},V)}function $(V,Se){if(d!==V)return hr(_t.NAVIGATION_CANCELLED,{from:Se,to:V})}function D(V){return P(V)}function N(V){return D(it(U(V),{replace:!0}))}function q(V,Se){const ke=V.matched[V.matched.length-1];if(ke&&ke.redirect){const{redirect:$e}=ke;let Fe=typeof $e=="function"?$e(V,Se):$e;return typeof Fe=="string"&&(Fe=Fe.includes("?")||Fe.includes("#")?Fe=U(Fe):{path:Fe},Fe.params={}),it({query:V.query,hash:V.hash,params:Fe.path!=null?{}:V.params},Fe)}}function P(V,Se){const ke=d=M(V),$e=a.value,Fe=V.state,T=V.force,O=V.replace===!0,H=q(ke,$e);if(H)return P(it(U(H),{state:typeof H=="object"?it({},Fe,H.state):Fe,force:T,replace:O}),Se||ke);const ee=ke;ee.redirectedFrom=Se;let Z;return!T&&Kx(i,$e,ke)&&(Z=hr(_t.NAVIGATION_DUPLICATED,{to:ee,from:$e}),J($e,$e,!0,!1)),(Z?Promise.resolve(Z):pe(ee,$e)).catch(Y=>wi(Y)?wi(Y,_t.NAVIGATION_GUARD_REDIRECT)?Y:A(Y):p(Y,ee,$e)).then(Y=>{if(Y){if(wi(Y,_t.NAVIGATION_GUARD_REDIRECT))return P(it({replace:O},U(Y.to),{state:typeof Y.to=="object"?it({},Fe,Y.to.state):Fe,force:T}),Se||ee)}else Y=z(ee,$e,!0,O,Fe);return Q(ee,$e,Y),Y})}function ne(V,Se){const ke=$(V,Se);return ke?Promise.reject(ke):Promise.resolve()}function te(V){const Se=Ue.values().next().value;return Se&&typeof Se.runWithContext=="function"?Se.runWithContext(V):V()}function pe(V,Se){let ke;const[$e,Fe,T]=dk(V,Se);ke=pu($e.reverse(),"beforeRouteLeave",V,Se);for(const H of $e)H.leaveGuards.forEach(ee=>{ke.push(Hi(ee,V,Se))});const O=ne.bind(null,V,Se);return ke.push(O),et(ke).then(()=>{ke=[];for(const H of r.list())ke.push(Hi(H,V,Se));return ke.push(O),et(ke)}).then(()=>{ke=pu(Fe,"beforeRouteUpdate",V,Se);for(const H of Fe)H.updateGuards.forEach(ee=>{ke.push(Hi(ee,V,Se))});return ke.push(O),et(ke)}).then(()=>{ke=[];for(const H of T)if(H.beforeEnter)if(Gs(H.beforeEnter))for(const ee of H.beforeEnter)ke.push(Hi(ee,V,Se));else ke.push(Hi(H.beforeEnter,V,Se));return ke.push(O),et(ke)}).then(()=>(V.matched.forEach(H=>H.enterCallbacks={}),ke=pu(T,"beforeRouteEnter",V,Se,te),ke.push(O),et(ke))).then(()=>{ke=[];for(const H of o.list())ke.push(Hi(H,V,Se));return ke.push(O),et(ke)}).catch(H=>wi(H,_t.NAVIGATION_CANCELLED)?H:Promise.reject(H))}function Q(V,Se,ke){l.list().forEach($e=>te(()=>$e(V,Se,ke)))}function z(V,Se,ke,$e,Fe){const T=$(V,Se);if(T)return T;const O=Se===Ui,H=qn?history.state:{};ke&&($e||O?n.replace(V.fullPath,it({scroll:O&&H&&H.scroll},Fe)):n.push(V.fullPath,Fe)),a.value=V,J(V,Se,ke,O),A()}let ae;function re(){ae||(ae=n.listen((V,Se,ke)=>{if(!Ct.listening)return;const $e=M(V),Fe=q($e,Ct.currentRoute.value);if(Fe){P(it(Fe,{replace:!0,force:!0}),$e).catch(Xr);return}d=$e;const T=a.value;qn&&sk(oh(T.fullPath,ke.delta),Da()),pe($e,T).catch(O=>wi(O,_t.NAVIGATION_ABORTED|_t.NAVIGATION_CANCELLED)?O:wi(O,_t.NAVIGATION_GUARD_REDIRECT)?(P(it(U(O.to),{force:!0}),$e).then(H=>{wi(H,_t.NAVIGATION_ABORTED|_t.NAVIGATION_DUPLICATED)&&!ke.delta&&ke.type===rd.pop&&n.go(-1,!1)}).catch(Xr),Promise.reject()):(ke.delta&&n.go(-ke.delta,!1),p(O,$e,T))).then(O=>{O=O||z($e,T,!1),O&&(ke.delta&&!wi(O,_t.NAVIGATION_CANCELLED)?n.go(-ke.delta,!1):ke.type===rd.pop&&wi(O,_t.NAVIGATION_ABORTED|_t.NAVIGATION_DUPLICATED)&&n.go(-1,!1)),Q($e,T,O)}).catch(Xr)}))}let ye=$r(),E=$r(),y;function p(V,Se,ke){A(V);const $e=E.list();return $e.length?$e.forEach(Fe=>Fe(V,Se,ke)):console.error(V),Promise.reject(V)}function I(){return y&&a.value!==Ui?Promise.resolve():new Promise((V,Se)=>{ye.add([V,Se])})}function A(V){return y||(y=!V,re(),ye.list().forEach(([Se,ke])=>V?ke(V):Se()),ye.reset()),V}function J(V,Se,ke,$e){const{scrollBehavior:Fe}=t;if(!qn||!Fe)return Promise.resolve();const T=!ke&&ik(oh(V.fullPath,0))||($e||!ke)&&history.state&&history.state.scroll||null;return Tn().then(()=>Fe(V,Se,T)).then(O=>O&&tk(O)).catch(O=>p(O,V,Se))}const ge=V=>n.go(V);let Ge;const Ue=new Set,Ct={currentRoute:a,listening:!0,addRoute:m,removeRoute:w,clearRoutes:e.clearRoutes,hasRoute:C,getRoutes:_,resolve:M,options:t,push:D,replace:N,go:ge,back:()=>ge(-1),forward:()=>ge(1),beforeEach:r.add,beforeResolve:o.add,afterEach:l.add,onError:E.add,isReady:I,install(V){V.component("RouterLink",$k),V.component("RouterView",Rk),V.config.globalProperties.$router=Ct,Object.defineProperty(V.config.globalProperties,"$route",{enumerable:!0,get:()=>ot(a)}),qn&&!Ge&&a.value===Ui&&(Ge=!0,D(n.location).catch($e=>{}));const Se={};for(const $e in Ui)Object.defineProperty(Se,$e,{get:()=>a.value[$e],enumerable:!0});V.provide(Ta,Ct),V.provide(_c,$m(Se)),V.provide(ld,a);const ke=V.unmount;Ue.add(V),V.unmount=function(){Ue.delete(V),Ue.size<1&&(d=Ui,ae&&ae(),ae=null,a.value=Ui,Ge=!1,y=!1),ke()}}};function et(V){return V.reduce((Se,ke)=>Se.then(()=>te(ke)),Promise.resolve())}return Ct}function Ea(){return Hs(Ta)}function _r(t){return Hs(_c)}const Si=fe(!1);function Bk(){const t=()=>{Si.value=!Si.value},e=()=>{Si.value=!0},s=()=>{Si.value=!1};return Je(Si,i=>{i?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},{immediate:!1}),es(()=>{const i=localStorage.getItem("theme");i?Si.value=i==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches&&(Si.value=!0),Si.value?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}),{isDark:Si,toggle:t,enable:e,disable:s}}function Ik(t,e){return g(),x("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function Uk(t,e){return g(),x("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})])}function Nk(t,e){return g(),x("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125"})])}function zk(t,e){return g(),x("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}function bh(t,e){return g(),x("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"})])}function xh(t,e){return g(),x("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}function Fk(t,e){return g(),x("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})])}function Hk(t,e){return g(),x("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"})])}function Wk(t,e){return g(),x("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}function qk(t,e){return g(),x("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"})])}function zg(t,e){return g(),x("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"})])}function kh(t,e){return g(),x("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"})])}function Gk(t,e){return g(),x("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})])}function wh(t,e){return g(),x("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21.75 17.25v-.228a4.5 4.5 0 0 0-.12-1.03l-2.268-9.64a3.375 3.375 0 0 0-3.285-2.602H7.923a3.375 3.375 0 0 0-3.285 2.602l-2.268 9.64a4.5 4.5 0 0 0-.12 1.03v.228m19.5 0a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3m19.5 0a3 3 0 0 0-3-3H5.25a3 3 0 0 0-3 3m16.5 0h.008v.008h-.008v-.008Zm-3 0h.008v.008h-.008v-.008Z"})])}function Kk(t,e){return g(),x("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}const Jk={key:0,class:"pointer-events-auto w-full max-w-sm rounded-lg bg-white shadow-lg outline-1 outline-black/5 dark:bg-gray-800 dark:-outline-offset-1 dark:outline-white/10"},Yk={class:"p-4"},Xk={key:0,class:"shrink-0"},Qk={key:0,class:"w-0 flex-1 text-sm font-medium text-gray-900 dark:text-white"},Zk={class:"text-sm font-medium text-gray-900 dark:text-white"},ew={key:0,class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},tw={__name:"Toast",props:{title:{type:String,required:!0},description:{type:String,default:null},type:{type:String,default:"success",validator:t=>["success","error","warning","info"].includes(t)},variant:{type:String,default:"regular",validator:t=>["regular","condensed"].includes(t)},action:{type:String,default:null},duration:{type:Number,default:5e3},autoClose:{type:Boolean,default:!0}},emits:["close","action"],setup(t,{emit:e}){const s=t,i=e,n=fe(!1);let r=null;const o=le(()=>{const d={success:Ik,error:Kk,warning:Fk,info:zg},u={success:"text-sky-400",error:"text-red-400",warning:"text-yellow-400",info:"text-blue-400"},f=d[s.type],h=u[s.type];return()=>Dt(f,{class:`size-6 ${h}`})}),l=()=>{n.value=!1,r&&clearTimeout(r),setTimeout(()=>i("close"),200)},a=()=>{i("action"),l()};return es(()=>{n.value=!0,s.autoClose&&s.duration>0&&(r=setTimeout(l,s.duration))}),Je(()=>s.duration,d=>{r&&clearTimeout(r),s.autoClose&&d>0&&(r=setTimeout(l,d))}),(d,u)=>(g(),he(wc,{"enter-active-class":"transform transition duration-300 ease-out","enter-from-class":"translate-y-2 opacity-0 sm:translate-x-2 sm:translate-y-0","enter-to-class":"translate-y-0 opacity-100 sm:translate-x-0","leave-active-class":"transition duration-200 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:B(()=>[n.value?(g(),x("div",Jk,[c("div",Yk,[c("div",{class:Ve(t.variant==="condensed"?"flex items-center":"flex items-start")},[t.variant==="regular"?(g(),x("div",Xk,[(g(),he(Fs(o.value),{class:"size-6"}))])):R("",!0),c("div",{class:Ve([t.variant==="regular"?"ml-3 w-0 flex-1 pt-0.5":"flex w-0 flex-1 justify-between"])},[t.variant==="condensed"?(g(),x("p",Qk,F(t.title),1)):(g(),x(X,{key:1},[c("p",Zk,F(t.title),1),t.description?(g(),x("p",ew,F(t.description),1)):R("",!0)],64)),t.variant==="condensed"&&t.action?(g(),x("button",{key:2,type:"button",onClick:a,class:"ml-3 shrink-0 rounded-md bg-white text-sm font-medium text-sky-600 hover:text-sky-500 focus:outline-2 focus:outline-offset-2 focus:outline-sky-500 dark:bg-gray-800 dark:text-sky-400 dark:hover:text-sky-300 dark:focus:outline-sky-400"},F(t.action),1)):R("",!0)],2),c("div",{class:"ml-4 flex shrink-0"},[c("button",{type:"button",onClick:l,class:"inline-flex rounded-md text-gray-400 hover:text-gray-500 focus:outline-2 focus:outline-offset-2 focus:outline-sky-600 dark:hover:text-white dark:focus:outline-sky-500"},[...u[0]||(u[0]=[c("span",{class:"sr-only"},"Close",-1),c("svg",{viewBox:"0 0 20 20",fill:"currentColor",class:"size-5"},[c("path",{d:"M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z"})],-1)])])])],2)])])):R("",!0)]),_:1}))}},sw={"aria-live":"assertive",class:"pointer-events-none fixed inset-0 flex items-end px-4 py-6 sm:items-start sm:p-6 z-50"},iw={class:"flex w-full flex-col items-center space-y-4 sm:items-end"},nw={__name:"ToastContainer",setup(t,{expose:e}){const s=fe([]);let i=1;const n=a=>{const d={id:i++,title:a.title,description:a.description||null,type:a.type||"success",variant:a.variant||"regular",action:a.action||null,duration:a.duration!==void 0?a.duration:5e3,autoClose:a.autoClose!==void 0?a.autoClose:!0,onAction:a.onAction||null};return s.value.push(d),d.id},r=a=>{const d=s.value.findIndex(u=>u.id===a);d>-1&&s.value.splice(d,1)},o=a=>{a.onAction&&a.onAction()};return e({addToast:n,removeToast:r,clearAll:()=>{s.value=[]}}),(a,d)=>(g(),he(Fm,{to:"body"},[c("div",sw,[c("div",iw,[(g(!0),x(X,null,be(s.value,u=>(g(),he(tw,{key:u.id,title:u.title,description:u.description,type:u.type,variant:u.variant,action:u.action,duration:u.duration,"auto-close":u.autoClose,onClose:f=>r(u.id),onAction:f=>o(u)},null,8,["title","description","type","variant","action","duration","auto-close","onClose","onAction"]))),128))])])]))}};let xn=null;function rw(t){xn=t}function $a(){const t=l=>{if(!xn){console.warn('ToastContainer not initialized. Add <ToastContainer ref="toastContainer" /> to your App.vue');return}return xn.addToast(l)};return{show:t,success:(l,a=null,d={})=>t({title:l,description:a,type:"success",...d}),error:(l,a=null,d={})=>t({title:l,description:a,type:"error",...d}),warning:(l,a=null,d={})=>t({title:l,description:a,type:"warning",...d}),info:(l,a=null,d={})=>t({title:l,description:a,type:"info",...d}),remove:l=>{xn&&xn.removeToast(l)},clearAll:()=>{xn&&xn.clearAll()}}}const ow={class:"flex min-h-screen bg-white dark:bg-zinc-900"},lw={class:"hidden lg:fixed lg:inset-y-0 lg:z-50 lg:flex lg:w-72 lg:flex-col xl:w-80"},aw={class:"flex grow flex-col overflow-y-auto border-r border-zinc-900/10 px-6 pb-8 pt-4 dark:border-white/10"},uw={key:0,class:"mt-6"},dw={class:"mt-10"},cw={role:"list"},fw={class:"relative mt-6"},hw={class:"relative mt-3 pl-2"},pw={role:"list",class:"border-l border-transparent"},mw={class:"truncate"},gw={key:0,class:"relative mt-6"},yw={class:"relative mt-3 pl-2"},vw={role:"list",class:"border-l border-transparent"},bw={class:"truncate"},xw={key:0,class:"text-xs text-zinc-400 dark:text-zinc-500"},kw={class:"sticky bottom-0 mt-6 border-t border-zinc-900/10 pt-6 dark:border-white/10"},ww={class:"lg:pl-72 xl:pl-80 w-full"},Sw={class:"h-screen overflow-auto"},_w={__name:"App",setup(t){const e=fe(null),s=_r(),{isDark:i,toggle:n}=Bk(),r=fe([]),o=h=>f.findIndex(w=>w.to==="/projects"&&s.path==="/projects/new"?!1:s.path.startsWith(w.to)),l=()=>r.value.findIndex(h=>s.path===`/project/${h.id}`),a=h=>h.to==="/projects"&&s.path==="/projects/new"?!1:s.path.startsWith(h.to),d=()=>Dt("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[Dt("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})]),u=()=>Dt("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[Dt("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})]),f=[{id:"projects",label:"Projects",to:"/projects"},{id:"settings",label:"Global Settings",to:"/settings"}];return es(async()=>{rw(e.value);try{const m=await(await fetch("/api/settings/get")).json();r.value=m.projects||[]}catch(h){console.error("Failed to load projects:",h)}}),(h,m)=>{const w=ql("router-link"),_=ql("router-view");return g(),x("div",ow,[c("div",lw,[c("div",aw,[k(w,{to:"/",class:"flex items-center gap-3"},{default:B(()=>[...m[1]||(m[1]=[c("img",{src:Tx,alt:"Framework",class:"h-10 w-10"},null,-1),c("span",{class:"text-lg font-semibold text-zinc-900 dark:text-white"},"Framework",-1)])]),_:1}),h.$route.path!=="/projects/new"?(g(),x("div",uw,[k(w,{to:"/projects/new",class:"flex w-full items-center justify-center gap-2 rounded-lg bg-white px-4 py-2.5 text-sm font-medium text-zinc-900 ring-1 ring-zinc-900/10 transition hover:bg-zinc-50 hover:ring-zinc-900/20 dark:bg-white/5 dark:text-white dark:ring-white/10 dark:hover:bg-white/10"},{default:B(()=>[...m[2]||(m[2]=[c("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),se(" New Project ",-1)])]),_:1})])):R("",!0),c("nav",dw,[c("ul",cw,[c("li",fw,[m[4]||(m[4]=c("h2",{class:"text-xs font-semibold text-zinc-900 dark:text-white"}," Framework ",-1)),c("div",hw,[m[3]||(m[3]=c("div",{class:"absolute inset-y-0 left-2 w-px bg-zinc-900/10 dark:bg-white/5"},null,-1)),o()>=0?(g(),x("div",{key:0,class:"absolute left-2 h-6 w-px bg-sky-500 transition-all duration-200",style:oo({top:`${o()*32+4}px`})},null,4)):R("",!0),c("ul",pw,[(g(),x(X,null,be(f,C=>c("li",{key:C.id,class:"relative"},[k(w,{to:C.to,class:Ve(["flex justify-between gap-2 py-1 pl-4 pr-3 text-sm transition",a(C)?"text-zinc-900 dark:text-white":"text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white"])},{default:B(()=>[c("span",mw,F(C.label),1)]),_:2},1032,["to","class"])])),64))])])]),r.value.length>0?(g(),x("li",gw,[m[6]||(m[6]=c("h2",{class:"text-xs font-semibold text-zinc-900 dark:text-white"}," Your Projects ",-1)),c("div",yw,[m[5]||(m[5]=c("div",{class:"absolute inset-y-0 left-2 w-px bg-zinc-900/10 dark:bg-white/5"},null,-1)),l()>=0?(g(),x("div",{key:0,class:"absolute left-2 h-6 w-px bg-sky-500 transition-all duration-200",style:oo({top:`${l()*32+4}px`})},null,4)):R("",!0),c("ul",vw,[(g(!0),x(X,null,be(r.value,C=>(g(),x("li",{key:C.id,class:"relative"},[k(w,{to:`/project/${C.id}`,class:Ve(["flex justify-between gap-2 py-1 pl-4 pr-3 text-sm transition",h.$route.path===`/project/${C.id}`?"text-zinc-900 dark:text-white":"text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white"])},{default:B(()=>[c("span",bw,F(C.name),1),C.type?(g(),x("span",xw,F(C.type==="project"?"":C.type==="course"?"":""),1)):R("",!0)]),_:2},1032,["to","class"])]))),128))])])])):R("",!0),c("li",kw,[c("button",{onClick:m[0]||(m[0]=(...C)=>ot(n)&&ot(n)(...C)),class:"flex w-full items-center gap-3 text-sm text-zinc-600 transition hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white"},[(g(),he(Fs(ot(i)?u:d),{class:"h-5 w-5 shrink-0"})),se(" "+F(ot(i)?"Light Mode":"Dark Mode"),1)])])])])])]),c("div",ww,[c("main",Sw,[k(_)])]),k(nw,{ref_key:"toastContainer",ref:e},null,512)])}}},Cw={key:0,class:"flex items-center justify-center py-12"},Aw={key:1,class:"max-w-4xl prose prose-slate dark:prose-invert"},Vw={class:"not-prose mb-8"},Mw={class:"flex items-center gap-3 mb-2"},Dw={class:"px-3 py-1 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded text-sm font-medium"},Tw={class:"text-4xl font-bold text-slate-900 dark:text-white mb-4"},Ew={class:"text-lg text-slate-600 dark:text-slate-400"},$w={class:"not-prose mb-8"},Ow={class:"bg-slate-900 dark:bg-slate-950 rounded-lg p-4 overflow-x-auto"},Pw={class:"text-sm text-slate-100"},jw={key:0,class:"not-prose mb-8"},Rw={class:"space-y-4"},Lw={class:"flex items-baseline gap-2 mb-1"},Bw={class:"text-base font-mono font-semibold text-slate-900 dark:text-white"},Iw={class:"text-sm text-slate-500 dark:text-slate-400"},Uw={key:0,class:"text-xs text-red-600 dark:text-red-400 font-medium"},Nw={key:1,class:"text-xs text-slate-500 dark:text-slate-400"},zw={class:"text-sm text-slate-600 dark:text-slate-400"},Fw={class:"not-prose mb-8"},Hw={class:"text-slate-700 dark:text-slate-300"},Ww={key:1,class:"not-prose mb-8"},qw={class:"text-slate-700 dark:text-slate-300 whitespace-pre-line"},Gw={key:2,class:"not-prose mb-8"},Kw={class:"space-y-6"},Jw={class:"bg-slate-900 dark:bg-slate-950 rounded-lg p-4 overflow-x-auto mb-2"},Yw={class:"text-sm text-slate-100"},Xw={class:"text-sm text-slate-600 dark:text-slate-400"},Qw={key:3,class:"not-prose mb-8"},Zw={class:"space-y-2"},e2={class:"text-indigo-600 dark:text-indigo-400 font-mono font-semibold"},t2={class:"text-slate-700 dark:text-slate-300"},s2={key:4,class:"not-prose mb-8"},i2={class:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4"},n2={class:"list-disc list-inside space-y-1 text-sm text-amber-800 dark:text-amber-300"},r2={key:5,class:"not-prose"},o2={class:"flex items-center gap-2 flex-wrap"},l2={key:2,class:"text-center py-12"},a2={__name:"DocViewer",props:{functionName:{type:String,required:!0}},setup(t){const e=t,s=fe(null),i=fe(!0),n=async()=>{i.value=!0;try{const r=await fetch(`/docs/${e.functionName}.json`);r.ok?s.value=await r.json():s.value=null}catch(r){console.error("Failed to load documentation:",r),s.value=null}finally{i.value=!1}};return Je(()=>e.functionName,n),es(n),(r,o)=>i.value?(g(),x("div",Cw,[...o[0]||(o[0]=[c("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"},null,-1)])])):s.value?(g(),x("div",Aw,[c("div",Vw,[c("div",Mw,[c("span",Dw,F(s.value.category),1)]),c("h1",Tw,F(s.value.title),1),c("p",Ew,F(s.value.description),1)]),c("div",$w,[o[1]||(o[1]=c("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white mb-4"},"Usage",-1)),c("div",Ow,[c("pre",Pw,[c("code",null,F(s.value.usage),1)])])]),s.value.params&&s.value.params.length>0?(g(),x("div",jw,[o[3]||(o[3]=c("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white mb-4"},"Parameters",-1)),c("div",Rw,[(g(!0),x(X,null,be(s.value.params,l=>(g(),x("div",{key:l.name,class:"border-l-4 border-indigo-500 pl-4"},[c("div",Lw,[c("code",Bw,F(l.name),1),c("span",Iw,F(l.type),1),l.required?(g(),x("span",Uw," required ")):R("",!0),l.default?(g(),x("span",Nw,[o[2]||(o[2]=se(" default: ",-1)),c("code",null,F(l.default),1)])):R("",!0)]),c("p",zw,F(l.description),1)]))),128))])])):R("",!0),c("div",Fw,[o[4]||(o[4]=c("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white mb-4"},"Returns",-1)),c("p",Hw,F(s.value.returns),1)]),s.value.details?(g(),x("div",Ww,[o[5]||(o[5]=c("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white mb-4"},"Details",-1)),c("div",qw,F(s.value.details),1)])):R("",!0),s.value.examples&&s.value.examples.length>0?(g(),x("div",Gw,[o[6]||(o[6]=c("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white mb-4"},"Examples",-1)),c("div",Kw,[(g(!0),x(X,null,be(s.value.examples,(l,a)=>(g(),x("div",{key:a},[c("div",Jw,[c("pre",Yw,[c("code",null,F(l.code),1)])]),c("p",Xw,F(l.description),1)]))),128))])])):R("",!0),s.value.see_also&&s.value.see_also.length>0?(g(),x("div",Qw,[o[7]||(o[7]=c("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white mb-4"},"See Also",-1)),c("ul",Zw,[(g(!0),x(X,null,be(s.value.see_also,l=>(g(),x("li",{key:l.name},[c("code",e2,F(l.name)+"() ",1),c("span",t2," - "+F(l.description),1)]))),128))])])):R("",!0),s.value.notes&&s.value.notes.length>0?(g(),x("div",s2,[c("div",i2,[o[8]||(o[8]=c("h3",{class:"text-lg font-semibold text-amber-900 dark:text-amber-200 mb-2"},"Notes",-1)),c("ul",n2,[(g(!0),x(X,null,be(s.value.notes,(l,a)=>(g(),x("li",{key:a},F(l),1))),128))])])])):R("",!0),s.value.tags&&s.value.tags.length>0?(g(),x("div",r2,[c("div",o2,[o[9]||(o[9]=c("span",{class:"text-sm text-slate-500 dark:text-slate-400"},"Tags:",-1)),(g(!0),x(X,null,be(s.value.tags,l=>(g(),x("span",{key:l,class:"px-2 py-1 bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 rounded text-xs"},F(l),1))),128))])])):R("",!0)])):(g(),x("div",l2,[...o[10]||(o[10]=[c("p",{class:"text-slate-600 dark:text-slate-400"},"Documentation not found.",-1)])]))}},u2={class:"flex h-full"},d2={class:"w-64 flex-shrink-0 border-r border-zinc-900/10 dark:border-white/10 overflow-y-auto"},c2={class:"p-4"},f2={class:"mt-3 space-y-1"},h2={class:"mt-3 space-y-1"},p2={class:"mt-3 space-y-1"},m2={class:"flex-1 overflow-y-auto"},g2={key:1,class:"flex h-full items-center justify-center p-8"},Sh={__name:"DocsView",setup(t){const e=_r(),s=le(()=>e.params.functionName),i=[{name:"scaffold",title:"scaffold()"}],n=[{name:"data_load",title:"data_load()"}],r=[{name:"cache_get",title:"cache_get()"}];return(o,l)=>{const a=ql("router-link");return g(),x("div",u2,[c("div",d2,[c("div",c2,[l[0]||(l[0]=c("h2",{class:"text-xs font-semibold uppercase tracking-wide text-zinc-500 dark:text-zinc-400"}," Core Functions ",-1)),c("ul",f2,[(g(),x(X,null,be(i,d=>c("li",{key:d.name},[k(a,{to:`/docs/${d.name}`,class:Ve(["block rounded-md px-3 py-2 text-sm font-medium hover:bg-zinc-50 dark:hover:bg-zinc-800",s.value===d.name?"bg-sky-50 text-sky-600 dark:bg-sky-400/10 dark:text-sky-400":"text-zinc-700 dark:text-zinc-300"])},{default:B(()=>[se(F(d.title),1)]),_:2},1032,["to","class"])])),64))]),l[1]||(l[1]=c("h2",{class:"mt-6 text-xs font-semibold uppercase tracking-wide text-zinc-500 dark:text-zinc-400"}," Data Functions ",-1)),c("ul",h2,[(g(),x(X,null,be(n,d=>c("li",{key:d.name},[k(a,{to:`/docs/${d.name}`,class:Ve(["block rounded-md px-3 py-2 text-sm font-medium hover:bg-zinc-50 dark:hover:bg-zinc-800",s.value===d.name?"bg-sky-50 text-sky-600 dark:bg-sky-400/10 dark:text-sky-400":"text-zinc-700 dark:text-zinc-300"])},{default:B(()=>[se(F(d.title),1)]),_:2},1032,["to","class"])])),64))]),l[2]||(l[2]=c("h2",{class:"mt-6 text-xs font-semibold uppercase tracking-wide text-zinc-500 dark:text-zinc-400"}," Cache Functions ",-1)),c("ul",p2,[(g(),x(X,null,be(r,d=>c("li",{key:d.name},[k(a,{to:`/docs/${d.name}`,class:Ve(["block rounded-md px-3 py-2 text-sm font-medium hover:bg-zinc-50 dark:hover:bg-zinc-800",s.value===d.name?"bg-sky-50 text-sky-600 dark:bg-sky-400/10 dark:text-sky-400":"text-zinc-700 dark:text-zinc-300"])},{default:B(()=>[se(F(d.title),1)]),_:2},1032,["to","class"])])),64))])])]),c("div",m2,[s.value?(g(),he(a2,{key:0,functionName:s.value},null,8,["functionName"])):(g(),x("div",g2,[...l[3]||(l[3]=[c("div",{class:"text-center"},[c("h2",{class:"text-2xl font-bold text-zinc-900 dark:text-white"},"Framework Documentation"),c("p",{class:"mt-2 text-zinc-600 dark:text-zinc-400"}," Select a function from the sidebar to view its documentation. ")],-1)])]))])])}}},y2={key:0,class:"px-4 py-5 sm:px-6"},v2={class:"px-4 py-5 sm:p-6"},b2={key:1,class:"px-4 py-4 sm:px-6"},x2={__name:"Card",setup(t){const e=ab(),s=le(()=>{const i=["overflow-hidden","rounded-lg","bg-white","shadow-sm","dark:bg-gray-800/50","dark:shadow-none","dark:outline","dark:-outline-offset-1","dark:outline-white/10"];return(e.header||e.footer)&&i.push("divide-y","divide-gray-200","dark:divide-white/10"),i.join(" ")});return(i,n)=>(g(),x("div",{class:Ve(s.value)},[i.$slots.header?(g(),x("div",y2,[kt(i.$slots,"header")])):R("",!0),c("div",v2,[kt(i.$slots,"default")]),i.$slots.footer?(g(),x("div",b2,[kt(i.$slots,"footer")])):R("",!0)],2))}},Oe={__name:"Button",props:{variant:{type:String,default:"primary",validator:t=>["primary","secondary","soft"].includes(t)},size:{type:String,default:"md",validator:t=>["xs","sm","md","lg","xl"].includes(t)},rounded:{type:String,default:"md",validator:t=>["sm","md","full"].includes(t)},type:{type:String,default:"button"},href:{type:String,default:null},icon:{type:[Object,Function],default:null},iconPosition:{type:String,default:"left",validator:t=>["left","right"].includes(t)},iconOnly:{type:Boolean,default:!1}},emits:["click"],setup(t,{emit:e}){const s=t,i=e,n=l=>{i("click",l)},r=le(()=>{const l=["font-semibold","focus-visible:outline-2","focus-visible:outline-offset-2"],a={xs:s.iconOnly?"p-2":"px-3 py-2 text-xs",sm:s.iconOnly?"p-2.5":"px-3 py-2 text-sm",md:s.iconOnly?"p-3":"px-3.5 py-2.5 text-sm",lg:s.iconOnly?"p-3":"px-4 py-3 text-sm",xl:s.iconOnly?"p-3.5":"px-4.5 py-3.5 text-sm"};l.push(a[s.size]);const d={sm:"rounded-sm",md:"rounded-md",full:"rounded-full"};return l.push(d[s.rounded]),s.variant==="primary"?l.push("bg-sky-600","text-white","shadow-xs","hover:bg-sky-500","focus-visible:outline-sky-600","dark:bg-sky-500","dark:shadow-none","dark:hover:bg-sky-400","dark:focus-visible:outline-sky-500"):s.variant==="secondary"?l.push("bg-white","text-gray-900","shadow-xs","inset-ring","inset-ring-gray-300","hover:bg-gray-50","dark:bg-white/10","dark:text-white","dark:shadow-none","dark:inset-ring-white/5","dark:hover:bg-white/20"):s.variant==="soft"&&l.push("bg-sky-50","text-sky-600","shadow-xs","hover:bg-sky-100","dark:bg-sky-500/20","dark:text-sky-400","dark:shadow-none","dark:hover:bg-sky-500/30"),s.icon&&!s.iconOnly&&(l.push("inline-flex","items-center"),l.push(s.size==="xl"?"gap-x-2":"gap-x-1.5")),l.join(" ")}),o=le(()=>{const l=[];return s.iconOnly?l.push("size-5"):(l.push("size-5"),s.iconPosition==="left"?l.push("-ml-0.5"):l.push("-mr-0.5")),l.join(" ")});return(l,a)=>(g(),he(Fs(t.href?"a":"button"),{href:t.href,type:t.href?void 0:t.type,class:Ve(r.value),onClick:n},{default:B(()=>[t.icon&&t.iconPosition==="left"?(g(),x("svg",{key:0,viewBox:"0 0 20 20",fill:"currentColor","data-slot":"icon","aria-hidden":"true",class:Ve(o.value)},[(g(),he(Fs(t.icon)))],2)):R("",!0),kt(l.$slots,"default"),t.icon&&t.iconPosition==="right"?(g(),x("svg",{key:1,viewBox:"0 0 20 20",fill:"currentColor","data-slot":"icon","aria-hidden":"true",class:Ve(o.value)},[(g(),he(Fs(t.icon)))],2)):R("",!0)]),_:3},8,["href","type","class"]))}},k2=["for"],w2={key:1,class:"mt-2 flex"},S2={class:"flex shrink-0 items-center rounded-l-md bg-gray-100 px-2 text-base text-gray-500 outline-1 -outline-offset-1 outline-gray-300 sm:text-sm/6 dark:bg-white/5 dark:text-gray-400 dark:outline-white/10 font-mono"},_2=["id","type","value","placeholder","required","disabled","aria-invalid","aria-describedby"],C2={key:2,class:"mt-2"},A2=["id","type","value","placeholder","required","disabled","aria-invalid","aria-describedby"],V2={key:0,viewBox:"0 0 16 16",fill:"currentColor","data-slot":"icon","aria-hidden":"true",class:"pointer-events-none col-start-1 row-start-1 mr-3 size-5 self-center justify-self-end text-red-500 sm:size-4 dark:text-red-400"},M2=["id"],D2=["id"],W={__name:"Input",props:{id:{type:String,default:()=>`input-${Math.random().toString(36).substr(2,9)}`},modelValue:{type:[String,Number],default:""},type:{type:String,default:"text"},label:{type:String,default:null},placeholder:{type:String,default:""},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},error:{type:String,default:null},hint:{type:String,default:null},monospace:{type:Boolean,default:!1},prefix:{type:String,default:null}},emits:["update:modelValue","blur"],setup(t){const e=t,s=le(()=>{const n=["block","w-full","rounded-md","bg-white","px-3","py-1.5","text-base","outline-1","-outline-offset-1","placeholder:text-gray-400","focus:outline-2","focus:-outline-offset-2","sm:text-sm/6","dark:bg-white/5","dark:placeholder:text-gray-500"];return e.monospace&&n.push("font-mono"),e.error?n.push("col-start-1","row-start-1","pr-10","pl-3","text-red-900","outline-red-300","placeholder:text-red-300","focus:outline-red-600","sm:pr-9","dark:text-red-400","dark:outline-red-500/50","dark:placeholder:text-red-400/70","dark:focus:outline-red-400"):n.push("text-gray-900","outline-gray-300","focus:outline-sky-600","dark:text-white","dark:outline-white/10","dark:focus:outline-sky-500"),n.join(" ")}),i=le(()=>{const n=["-ml-px","block","w-full","grow","rounded-r-md","bg-white","px-3","py-1.5","text-base","outline-1","-outline-offset-1","placeholder:text-gray-400","focus:outline-2","focus:-outline-offset-2","sm:text-sm/6","dark:bg-white/5","dark:placeholder:text-gray-500"];return e.monospace&&n.push("font-mono"),e.error?n.push("text-red-900","outline-red-300","placeholder:text-red-300","focus:outline-red-600","dark:text-red-400","dark:outline-red-500/50","dark:placeholder:text-red-400/70","dark:focus:outline-red-400"):n.push("text-gray-900","outline-gray-300","focus:outline-sky-600","dark:text-white","dark:outline-white/10","dark:focus:outline-sky-500"),n.join(" ")});return(n,r)=>(g(),x("div",null,[t.label?(g(),x("label",{key:0,for:t.id,class:"block text-sm/6 font-medium text-gray-900 dark:text-white"},F(t.label),9,k2)):R("",!0),t.prefix?(g(),x("div",w2,[c("div",S2,F(t.prefix),1),c("input",{id:t.id,type:t.type,value:t.modelValue,placeholder:t.placeholder,required:t.required,disabled:t.disabled,"aria-invalid":t.error?"true":void 0,"aria-describedby":t.error?`${t.id}-error`:t.hint?`${t.id}-description`:void 0,onInput:r[0]||(r[0]=o=>n.$emit("update:modelValue",o.target.value)),onBlur:r[1]||(r[1]=o=>n.$emit("blur",o)),class:Ve(i.value)},null,42,_2)])):(g(),x("div",C2,[c("input",{id:t.id,type:t.type,value:t.modelValue,placeholder:t.placeholder,required:t.required,disabled:t.disabled,"aria-invalid":t.error?"true":void 0,"aria-describedby":t.error?`${t.id}-error`:t.hint?`${t.id}-description`:void 0,onInput:r[2]||(r[2]=o=>n.$emit("update:modelValue",o.target.value)),onBlur:r[3]||(r[3]=o=>n.$emit("blur",o)),class:Ve(s.value)},null,42,A2),t.error?(g(),x("svg",V2,[...r[4]||(r[4]=[c("path",{d:"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14ZM8 4a.75.75 0 0 1 .75.75v3a.75.75 0 0 1-1.5 0v-3A.75.75 0 0 1 8 4Zm0 8a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z","clip-rule":"evenodd","fill-rule":"evenodd"},null,-1)])])):R("",!0)])),t.error?(g(),x("p",{key:3,id:`${t.id}-error`,class:"mt-2 text-sm text-red-600 dark:text-red-400"},F(t.error),9,M2)):R("",!0),t.hint&&!t.error?(g(),x("p",{key:4,id:`${t.id}-description`,class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},F(t.hint),9,D2)):R("",!0)]))}},T2={class:"flex gap-3"},E2={class:"flex h-6 shrink-0 items-center"},$2={class:"group grid size-4 grid-cols-1"},O2=["id","name","checked","aria-describedby"],P2={class:"text-sm/6"},j2=["for"],R2=["id"],Ji={__name:"Checkbox",props:{id:{type:String,required:!0},name:{type:String,default:null},modelValue:{type:Boolean,default:!1},description:{type:String,default:null}},emits:["update:modelValue"],setup(t){return(e,s)=>(g(),x("div",T2,[c("div",E2,[c("div",$2,[c("input",{id:t.id,type:"checkbox",name:t.name,checked:t.modelValue,"aria-describedby":t.description?`${t.id}-description`:void 0,onChange:s[0]||(s[0]=i=>e.$emit("update:modelValue",i.target.checked)),class:"col-start-1 row-start-1 appearance-none rounded-sm border border-gray-300 bg-white checked:border-sky-600 checked:bg-sky-600 indeterminate:border-sky-600 indeterminate:bg-sky-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:checked:bg-gray-100 dark:border-white/10 dark:bg-white/5 dark:checked:border-sky-500 dark:checked:bg-sky-500 dark:indeterminate:border-sky-500 dark:indeterminate:bg-sky-500 dark:focus-visible:outline-sky-500 dark:disabled:border-white/5 dark:disabled:bg-white/10 dark:disabled:checked:bg-white/10 forced-colors:appearance-auto"},null,40,O2),s[1]||(s[1]=c("svg",{viewBox:"0 0 14 14",fill:"none",class:"pointer-events-none col-start-1 row-start-1 size-3.5 self-center justify-self-center stroke-white group-has-disabled:stroke-gray-950/25 dark:group-has-disabled:stroke-white/25"},[c("path",{d:"M3 8L6 11L11 3.5","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"opacity-0 group-has-checked:opacity-100"}),c("path",{d:"M3 7H11","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"opacity-0 group-has-indeterminate:opacity-100"})],-1))])]),c("div",P2,[c("label",{for:t.id,class:"font-medium text-gray-900 dark:text-white"},[kt(e.$slots,"default")],8,j2),t.description?(g(),x("p",{key:0,id:`${t.id}-description`,class:"text-gray-500 dark:text-gray-400"},F(t.description),9,R2)):R("",!0)])]))}};function L2(t,e){return g(),x("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z","clip-rule":"evenodd"})])}function B2(t,e){return g(),x("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"fill-rule":"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z","clip-rule":"evenodd"})])}function I2(t,e){return g(),x("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 0 1 .67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 1 1-.671-1.34l.041-.022ZM12 9a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z","clip-rule":"evenodd"})])}function U2(t,e){return g(),x("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-1.72 6.97a.75.75 0 1 0-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 1 0 1.06 1.06L12 13.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L13.06 12l1.72-1.72a.75.75 0 1 0-1.06-1.06L12 10.94l-1.72-1.72Z","clip-rule":"evenodd"})])}const N2={class:"flex gap-3"},z2={class:"flex-1"},Ci={__name:"Alert",props:{type:{type:String,default:"info",validator:t=>["success","error","warning","info"].includes(t)},title:{type:String,default:null},description:{type:String,default:null},dismissible:{type:Boolean,default:!1}},emits:["dismiss"],setup(t,{emit:e}){const s=t,i=e,n={success:{container:"bg-sky-50 dark:bg-sky-900/20 inset-ring inset-ring-sky-200 dark:inset-ring-sky-800",icon:"text-sky-600 dark:text-sky-400",title:"text-sky-800 dark:text-sky-200",description:"text-sky-700 dark:text-sky-300",dismiss:"text-sky-600 hover:text-sky-700 dark:text-sky-400 dark:hover:text-sky-300"},error:{container:"bg-red-50 dark:bg-red-900/20 inset-ring inset-ring-red-200 dark:inset-ring-red-800",icon:"text-red-600 dark:text-red-400",title:"text-red-800 dark:text-red-200",description:"text-red-700 dark:text-red-300",dismiss:"text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300"},warning:{container:"bg-yellow-50 dark:bg-yellow-900/20 inset-ring inset-ring-yellow-200 dark:inset-ring-yellow-800",icon:"text-yellow-600 dark:text-yellow-400",title:"text-yellow-800 dark:text-yellow-200",description:"text-yellow-700 dark:text-yellow-300",dismiss:"text-yellow-600 hover:text-yellow-700 dark:text-yellow-400 dark:hover:text-yellow-300"},info:{container:"bg-blue-50 dark:bg-blue-900/20 inset-ring inset-ring-blue-200 dark:inset-ring-blue-800",icon:"text-blue-600 dark:text-blue-400",title:"text-blue-800 dark:text-blue-200",description:"text-blue-700 dark:text-blue-300",dismiss:"text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300"}},r=le(()=>`rounded-lg p-4 ${n[s.type].container}`),o=le(()=>`text-sm font-medium ${n[s.type].title}`),l=le(()=>{const f=[`text-sm ${n[s.type].description}`];return s.title&&f.push("mt-1"),f.join(" ")}),a=le(()=>`rounded-md p-1 ${n[s.type].dismiss} focus:outline-2 focus:outline-offset-2`),d=le(()=>({success:L2,error:U2,warning:B2,info:I2})[s.type]),u=()=>{i("dismiss")};return(f,h)=>(g(),x("div",{class:Ve(r.value),role:"alert"},[c("div",N2,[(g(),he(Fs(d.value),{class:"h-5 w-5 shrink-0"})),c("div",z2,[t.title?(g(),x("p",{key:0,class:Ve(o.value)},F(t.title),3)):R("",!0),t.description||f.$slots.default?(g(),x("p",{key:1,class:Ve(l.value)},[kt(f.$slots,"default",{},()=>[se(F(t.description),1)])],2)):R("",!0)]),t.dismissible?(g(),x("button",{key:0,type:"button",onClick:u,class:Ve(a.value)},[...h[0]||(h[0]=[c("span",{class:"sr-only"},"Dismiss",-1),c("svg",{viewBox:"0 0 20 20",fill:"currentColor",class:"size-5"},[c("path",{d:"M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z"})],-1)])],2)):R("",!0)])],2))}},F2={class:"flex items-center justify-between"},H2={class:"space-y-6"},W2={key:0,class:"text-xs text-gray-500 dark:text-gray-400 space-y-1"},q2={key:0},G2={class:"font-mono"},K2={key:1},J2={class:"font-mono"},Y2={class:"space-y-2"},X2=["onClick"],Q2={class:"flex items-start gap-3"},Z2={class:"text-2xl mt-0.5"},eS={class:"flex-1"},tS={class:"font-semibold text-gray-900 dark:text-white"},sS={class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},iS={key:0,class:"text-sky-600 dark:text-sky-400"},nS={key:1,class:"bg-gray-50 dark:bg-gray-800/50 rounded-lg p-4"},rS={class:"space-y-3"},oS={class:"list-decimal list-inside mt-1 space-y-1"},lS={class:"flex items-center justify-end gap-3"},aS={__name:"ProjectWizard",props:{mode:{type:String,default:"modal",validator:t=>["modal","page"].includes(t)},projectsRoot:{type:String,default:""}},emits:["close","created"],setup(t,{emit:e}){const s=t,i=e,n=le(()=>s.mode==="modal"),r=le(()=>(s.projectsRoot||"").trim()),o=q=>/^([A-Za-z]:[\\/]|\\\\|\/|~)/.test(q),l=(q,P)=>{if(!q)return P;const ne=P.replace(/^[\\/]+/,"");if(!ne)return q;if(q.endsWith("/")||q.endsWith("\\"))return`${q}${ne}`;const te=q.includes("\\")&&!q.includes("/")?"\\":"/";return`${q}${te}${ne}`},a=le(()=>n.value?"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4":"flex w-full justify-center"),d=le(()=>n.value?"max-w-2xl w-full max-h-[90vh] overflow-y-auto":"w-full max-w-2xl shadow-xl"),u=ci({directory:"",name:"",type:"project",sensitive:!1,use_git:!0,use_renv:!1,attach_defaults:!0}),f=le(()=>{const q=u.directory.trim();return q?o(q)||!r.value?q:l(r.value,q):r.value||""}),h=le(()=>{const q=u.directory.trim();return q?r.value.length>0||o(q):!1}),m=le(()=>r.value?`Folder will be created inside ${r.value}`:"The directory where your project will be created"),w=le(()=>r.value?"analytics-project":"my-analysis"),_=[{id:"project",title:"Data Analysis",description:"Full-featured project with notebooks, scripts, data management, and results tracking",icon:""},{id:"course",title:"Course Materials",description:"Teaching materials with slides, assignments, and course documentation",icon:""},{id:"presentation",title:"Presentation",description:"Single talk or presentation with minimal structure",icon:""}],C=fe(!1),M=fe(""),U=fe(!1),$=()=>{n.value&&i("close")},D=()=>{!u.name&&u.directory&&(u.name=u.directory.split(/[-_]/).map(q=>q.charAt(0).toUpperCase()+q.slice(1)).join(" "))},N=async()=>{M.value="",U.value=!1,C.value=!0;try{const q=f.value||u.directory,P=await fetch("/api/project/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_dir:q,project_name:u.name||u.directory,type:u.type,sensitive:u.sensitive,use_git:u.use_git,use_renv:u.use_renv,attach_defaults:u.attach_defaults})}),ne=await P.json();P.ok&&ne.success?(U.value=!0,ne&&!ne.path&&(ne.path=q),i("created",ne),n.value&&setTimeout(()=>{i("close")},3e3)):M.value=ne.error||"Failed to create project"}catch(q){M.value="Network error: "+q.message}finally{C.value=!1}};return(q,P)=>(g(),x("div",{class:Ve(a.value),onClick:ft($,["self"])},[k(x2,{class:Ve(d.value)},{header:B(()=>[c("div",F2,[P[9]||(P[9]=c("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Create New Project",-1)),n.value?(g(),x("button",{key:0,onClick:P[0]||(P[0]=ne=>q.$emit("close")),class:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition"},[...P[8]||(P[8]=[c("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])):R("",!0)])]),footer:B(()=>[c("div",lS,[k(Oe,{variant:"secondary",onClick:P[7]||(P[7]=ne=>q.$emit("close"))},{default:B(()=>[...P[23]||(P[23]=[se(" Cancel ",-1)])]),_:1}),k(Oe,{variant:"primary",onClick:N,disabled:C.value||!u.directory},{default:B(()=>[se(F(C.value?"Creating...":"Create Project"),1)]),_:1},8,["disabled"])])]),default:B(()=>[c("div",H2,[k(W,{modelValue:u.directory,"onUpdate:modelValue":P[1]||(P[1]=ne=>u.directory=ne),label:"Project Directory",placeholder:w.value,hint:m.value,onInput:D},null,8,["modelValue","placeholder","hint"]),r.value||h.value?(g(),x("div",W2,[r.value?(g(),x("p",q2,[P[10]||(P[10]=se(" Projects will be created inside ",-1)),c("span",G2,F(r.value),1),P[11]||(P[11]=se(". ",-1))])):R("",!0),h.value?(g(),x("p",K2,[P[12]||(P[12]=se(" Full path: ",-1)),c("span",J2,F(f.value),1)])):R("",!0)])):R("",!0),k(W,{modelValue:u.name,"onUpdate:modelValue":P[2]||(P[2]=ne=>u.name=ne),label:"Project Name",placeholder:"My Analysis"},null,8,["modelValue"]),c("div",null,[P[14]||(P[14]=c("label",{class:"block text-sm/6 font-medium text-gray-900 dark:text-white mb-3"}," Project Type ",-1)),c("div",Y2,[(g(),x(X,null,be(_,ne=>c("div",{key:ne.id,onClick:te=>u.type=ne.id,class:Ve(["border-2 rounded-lg p-4 cursor-pointer transition",u.type===ne.id?"border-sky-600 bg-sky-50 dark:bg-sky-900/20 dark:border-sky-500":"border-gray-200 dark:border-gray-700 hover:border-sky-300 dark:hover:border-sky-600"])},[c("div",Q2,[c("div",Z2,F(ne.icon),1),c("div",eS,[c("h3",tS,F(ne.title),1),c("p",sS,F(ne.description),1)]),u.type===ne.id?(g(),x("div",iS,[...P[13]||(P[13]=[c("svg",{class:"h-6 w-6",fill:"currentColor",viewBox:"0 0 20 20"},[c("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1)])])):R("",!0)])],10,X2)),64))])]),u.type==="project"?(g(),x("div",nS,[k(Ji,{modelValue:u.sensitive,"onUpdate:modelValue":P[3]||(P[3]=ne=>u.sensitive=ne),id:"sensitive",description:"Creates separate public/private directories for inputs, reference materials, and outputs. Recommended for PHI, PII, or IRB-restricted data."},{default:B(()=>[...P[15]||(P[15]=[se(" Privacy-first mode ",-1)])]),_:1},8,["modelValue"])])):R("",!0),c("div",rS,[k(Ji,{modelValue:u.use_git,"onUpdate:modelValue":P[4]||(P[4]=ne=>u.use_git=ne),id:"use_git"},{default:B(()=>[...P[16]||(P[16]=[se(" Initialize git repository ",-1)])]),_:1},8,["modelValue"]),k(Ji,{modelValue:u.use_renv,"onUpdate:modelValue":P[5]||(P[5]=ne=>u.use_renv=ne),id:"use_renv"},{default:B(()=>[...P[17]||(P[17]=[se(" Enable renv for package management ",-1)])]),_:1},8,["modelValue"]),k(Ji,{modelValue:u.attach_defaults,"onUpdate:modelValue":P[6]||(P[6]=ne=>u.attach_defaults=ne),id:"attach_defaults"},{default:B(()=>[...P[18]||(P[18]=[se(" Auto-load common packages (dplyr, tidyr, ggplot2) ",-1)])]),_:1},8,["modelValue"])]),M.value?(g(),he(Ci,{key:2,type:"error",description:M.value},null,8,["description"])):R("",!0),U.value?(g(),he(Ci,{key:3,type:"success",title:"Project created successfully!"},{default:B(()=>[P[22]||(P[22]=c("p",{class:"mt-2"},"Next steps:",-1)),c("ol",oS,[c("li",null,"cd "+F(f.value),1),P[19]||(P[19]=c("li",null,"R",-1)),P[20]||(P[20]=c("li",null,"library(framework)",-1)),P[21]||(P[21]=c("li",null,"scaffold()",-1))])]),_:1})):R("",!0)])]),_:1},8,["class"])],2))}},uS={class:"flex items-start justify-between"},dS={class:"text-3xl font-bold tracking-tight text-gray-900 dark:text-white"},cS={key:0,class:"mt-2 text-sm text-gray-600 dark:text-gray-400"},fS={key:0},Cr={__name:"PageHeader",props:{title:{type:String,required:!0},description:{type:String,default:null}},setup(t){return(e,s)=>(g(),x("div",uS,[c("div",null,[c("h1",dS,F(t.title),1),t.description?(g(),x("p",cS,F(t.description),1)):R("",!0)]),e.$slots.actions?(g(),x("div",fS,[kt(e.$slots,"actions")])):R("",!0)]))}},An={__name:"Badge",props:{variant:{type:String,default:"gray",validator:t=>["gray","red","yellow","green","blue","indigo","purple","pink","sky"].includes(t)},pill:{type:Boolean,default:!1},dot:{type:Boolean,default:!1}},setup(t){const e=t,s=le(()=>{const n=["inline-flex","items-center","px-2","py-1","text-xs","font-medium","inset-ring"];n.push(e.pill?"rounded-full":"rounded-md"),e.dot&&n.push("gap-x-1.5");const o={gray:{bg:"bg-gray-50",text:"text-gray-600",ring:"inset-ring-gray-500/10",darkBg:"dark:bg-gray-400/10",darkText:e.dot?"dark:text-gray-200":"dark:text-gray-400",darkRing:e.dot?"dark:inset-ring-white/10":"dark:inset-ring-gray-400/20"},red:{bg:"bg-red-50",text:"text-red-700",ring:"inset-ring-red-600/10",darkBg:"dark:bg-red-400/10",darkText:"dark:text-red-400",darkRing:"dark:inset-ring-red-400/20"},yellow:{bg:"bg-yellow-50",text:"text-yellow-800",ring:"inset-ring-yellow-600/20",darkBg:"dark:bg-yellow-400/10",darkText:"dark:text-yellow-500",darkRing:"dark:inset-ring-yellow-400/20"},green:{bg:"bg-green-50",text:"text-green-700",ring:"inset-ring-green-600/20",darkBg:"dark:bg-green-400/10",darkText:"dark:text-green-400",darkRing:"dark:inset-ring-green-500/20"},sky:{bg:"bg-sky-50",text:"text-sky-700",ring:"inset-ring-sky-600/20",darkBg:"dark:bg-sky-400/10",darkText:"dark:text-sky-400",darkRing:"dark:inset-ring-sky-500/20"},blue:{bg:"bg-blue-50",text:"text-blue-700",ring:"inset-ring-blue-700/10",darkBg:"dark:bg-blue-400/10",darkText:"dark:text-blue-400",darkRing:"dark:inset-ring-blue-400/30"},indigo:{bg:"bg-indigo-50",text:"text-indigo-700",ring:"inset-ring-indigo-700/10",darkBg:"dark:bg-indigo-400/10",darkText:"dark:text-indigo-400",darkRing:"dark:inset-ring-indigo-400/30"},purple:{bg:"bg-purple-50",text:"text-purple-700",ring:"inset-ring-purple-700/10",darkBg:"dark:bg-purple-400/10",darkText:"dark:text-purple-400",darkRing:"dark:inset-ring-purple-400/30"},pink:{bg:"bg-pink-50",text:"text-pink-700",ring:"inset-ring-pink-700/10",darkBg:"dark:bg-pink-400/10",darkText:"dark:text-pink-400",darkRing:"dark:inset-ring-pink-400/20"}}[e.variant];return e.dot?n.push("text-gray-900","inset-ring-gray-200","dark:text-white","dark:inset-ring-white/10"):n.push(o.bg,o.text,o.ring,o.darkBg,o.darkText,o.darkRing),n.join(" ")}),i=le(()=>`size-1.5 ${{gray:"fill-gray-500 dark:fill-gray-400",red:"fill-red-500 dark:fill-red-400",yellow:"fill-yellow-500 dark:fill-yellow-400",green:"fill-green-500 dark:fill-green-400",sky:"fill-sky-500 dark:fill-sky-400",blue:"fill-blue-500 dark:fill-blue-400",indigo:"fill-indigo-500 dark:fill-indigo-400",purple:"fill-purple-500 dark:fill-purple-400",pink:"fill-pink-500 dark:fill-pink-400"}[e.variant]}`);return(n,r)=>(g(),x("span",{class:Ve(s.value)},[t.dot?(g(),x("svg",{key:0,viewBox:"0 0 6 6","aria-hidden":"true",class:Ve(i.value)},[...r[0]||(r[0]=[c("circle",{r:"3",cx:"3",cy:"3"},null,-1)])],2)):R("",!0),kt(n.$slots,"default")],2))}},Fg=(t,e)=>{const s=t.__vccOpts||t;for(const[i,n]of e)s[i]=n;return s},hS={key:0,class:"relative z-50"},pS={class:"fixed inset-0 z-10 overflow-y-auto"},mS={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},gS=["aria-labelledby"],yS=["id"],vS={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},bS={__name:"Modal",props:{modelValue:{type:Boolean,default:!1},title:{type:String,default:null},description:{type:String,default:null},icon:{type:String,default:null,validator:t=>["success","error","warning","info"].includes(t)},size:{type:String,default:"md",validator:t=>["sm","md","lg","xl"].includes(t)},variant:{type:String,default:"centered",validator:t=>["centered","side-icon","left"].includes(t)},closeOnBackdrop:{type:Boolean,default:!0}},emits:["update:modelValue","close"],setup(t,{expose:e,emit:s}){const i=t,n=s,r=le(()=>`modal-title-${Math.random().toString(36).substr(2,9)}`),o={sm:"sm:max-w-sm",md:"sm:max-w-lg",lg:"sm:max-w-2xl",xl:"sm:max-w-4xl"},l=le(()=>["relative","transform","overflow-hidden","rounded-lg","bg-white","px-4","pt-5","pb-4","text-left","shadow-xl","transition-all","sm:my-8","sm:w-full","sm:p-6","dark:bg-gray-800","dark:outline","dark:-outline-offset-1","dark:outline-white/10",o[i.size]].join(" ")),a=le(()=>{const M=["flex","items-center","justify-center","rounded-full"];i.variant==="centered"?M.push("mx-auto","size-12"):M.push("shrink-0","sm:mx-0","sm:size-10");const U={success:"bg-sky-100 text-sky-600 dark:bg-sky-500/10 dark:text-sky-400",error:"bg-red-100 text-red-600 dark:bg-red-500/10 dark:text-red-400",warning:"bg-yellow-100 text-yellow-600 dark:bg-yellow-500/10 dark:text-yellow-400",info:"bg-blue-100 text-blue-600 dark:bg-blue-500/10 dark:text-blue-400"};return i.icon&&M.push(U[i.icon]),M.join(" ")}),d=le(()=>{const M=[];return i.variant==="centered"?M.push("mt-3","text-center","sm:mt-5"):i.variant==="left"?M.push("text-left"):M.push("mt-3","text-center","sm:mt-0","sm:ml-4","sm:text-left"),i.variant==="side-icon"&&(i.icon||i.$slots.icon)&&M.push("sm:flex","sm:items-start"),M.join(" ")}),u=le(()=>i.variant==="left"?"text-lg font-bold text-gray-900 dark:text-white mb-4":"text-base font-semibold text-gray-900 dark:text-white"),f=le(()=>(i.variant==="centered","mt-2")),h=le(()=>i.variant==="left"?"mt-6 pt-4 border-t border-gray-200 dark:border-gray-700 flex gap-3 justify-between":i.variant==="centered"?"mt-5 sm:mt-6 flex gap-3 justify-end":"mt-5 sm:mt-4 flex gap-3 justify-end"),m=le(()=>i.icon==="success"?{template:`
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="m4.5 12.75 6 6 9-13.5" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      `}:i.icon==="error"||i.icon==="warning"?{template:`
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      `}:i.icon==="info"?{template:`
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      `}:null),w=()=>{i.closeOnBackdrop&&C()},_=M=>{M.key==="Escape"&&i.modelValue&&C()},C=()=>{n("update:modelValue",!1),n("close")};return es(()=>{window.addEventListener("keydown",_)}),Sr(()=>{window.removeEventListener("keydown",_)}),e({close:C}),(M,U)=>(g(),he(Fm,{to:"body"},[k(wc,{name:"modal"},{default:B(()=>[t.modelValue?(g(),x("div",hS,[c("div",{class:"fixed inset-0 bg-gray-500/75 transition-opacity dark:bg-gray-900/50",onClick:w}),c("div",pS,[c("div",mS,[c("div",{class:Ve(l.value),role:"dialog","aria-modal":"true","aria-labelledby":r.value},[M.$slots.icon||t.icon?(g(),x("div",{key:0,class:Ve(a.value)},[kt(M.$slots,"icon",{},()=>[t.icon?(g(),he(Fs(m.value),{key:0,class:"size-6"})):R("",!0)],!0)],2)):R("",!0),c("div",{class:Ve(d.value)},[t.title?(g(),x("h3",{key:0,id:r.value,class:Ve(u.value)},F(t.title),11,yS)):R("",!0),t.description||M.$slots.default?(g(),x("div",{key:1,class:Ve(f.value)},[t.description?(g(),x("p",vS,F(t.description),1)):kt(M.$slots,"default",{key:1},void 0,!0)],2)):R("",!0)],2),M.$slots.actions?(g(),x("div",{key:1,class:Ve(h.value)},[kt(M.$slots,"actions",{},void 0,!0)],2)):R("",!0)],10,gS)])])])):R("",!0)]),_:3})]))}},yo=Fg(bS,[["__scopeId","data-v-2e078ad9"]]),xS=["title"],kS={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},wS={key:1,class:"h-4 w-4 text-sky-600 dark:text-sky-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},SS={key:2},Qr={__name:"CopyButton",props:{value:{type:String,required:!0},showLabel:{type:Boolean,default:!1},variant:{type:String,default:"default",validator:t=>["default","ghost","bare"].includes(t)},successMessage:{type:String,default:"Copied to clipboard"}},setup(t){const e=t,s=$a(),i=fe(!1);let n=null;const r=le(()=>e.variant==="bare"?"inline-flex items-center text-sm font-medium transition-all":"inline-flex items-center gap-1.5 rounded-md px-2.5 py-1.5 text-sm font-medium transition-all"),o=le(()=>e.variant==="ghost"?"text-zinc-600 hover:bg-zinc-100 dark:text-zinc-400 dark:hover:bg-zinc-800":e.variant==="bare"?"gap-2 rounded-lg transition-all focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-1 focus-visible:outline-sky-500":"bg-zinc-100 text-zinc-700 hover:bg-zinc-200 dark:bg-zinc-800 dark:text-zinc-300 dark:hover:bg-zinc-700"),l=async()=>{try{await navigator.clipboard.writeText(e.value),i.value=!0,s.success("Copied!",e.successMessage),n&&clearTimeout(n),n=setTimeout(()=>{i.value=!1},2e3)}catch(a){s.error("Copy failed","Could not copy to clipboard"),console.error("Failed to copy:",a)}};return(a,d)=>(g(),x("button",{type:"button",onClick:l,class:Ve([r.value,o.value,i.value&&"ring-2 ring-sky-500/20"]),title:i.value?"Copied!":"Copy to clipboard"},[kt(a.$slots,"default",{copied:i.value},()=>[i.value?(g(),x("svg",wS,[...d[1]||(d[1]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(g(),x("svg",kS,[...d[0]||(d[0]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"},null,-1)])])),t.showLabel?(g(),x("span",SS,F(i.value?"Copied!":"Copy"),1)):R("",!0)])],10,xS))}},_S={class:"mx-auto max-w-5xl p-10"},CS={class:"flex gap-3"},AS={key:0,class:"mt-6 flex flex-col gap-3 rounded-2xl border border-zinc-200 bg-white p-5 shadow-sm dark:border-zinc-800 dark:bg-zinc-900 sm:flex-row sm:items-center sm:justify-between"},VS={class:"min-w-0"},MS={class:"mt-1 font-mono text-sm text-zinc-600 dark:text-zinc-400 truncate"},DS={class:"flex items-center gap-2"},TS={key:1,class:"mt-10 grid gap-6 sm:grid-cols-2"},ES={class:"relative"},$S={class:"flex items-start justify-between"},OS={class:"flex-1"},PS={class:"flex items-center gap-3"},jS={class:"flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-sky-500 to-sky-600 shadow-lg shadow-sky-500/20"},RS={key:0,class:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},LS={key:1,class:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},BS={key:2,class:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},IS={class:"mt-4 text-xl font-bold text-zinc-900 dark:text-white"},US={class:"mt-2 text-sm text-zinc-600 dark:text-zinc-400 font-mono truncate"},NS={key:0,class:"mt-3 flex items-center gap-2 text-xs text-zinc-600 dark:text-zinc-400"},zS={key:0,class:"text-zinc-400 dark:text-zinc-500"},FS={key:1,class:"truncate"},HS={class:"mt-3 flex items-center gap-2 text-xs text-zinc-500 dark:text-zinc-500"},WS={class:"mt-6 flex gap-2"},qS={key:2,class:"mt-12 overflow-hidden rounded-3xl bg-gradient-to-br from-sky-600 via-sky-500 to-teal-500 p-12 shadow-2xl shadow-sky-500/20"},GS={class:"space-y-4"},KS={key:0,class:"mt-2 text-sm text-red-600 dark:text-red-400"},JS={class:"flex gap-3 justify-end"},YS={key:0,class:"space-y-6"},XS={class:"text-lg font-semibold text-zinc-900 dark:text-white mb-3"},QS={class:"grid gap-4"},ZS={class:"text-sm text-zinc-600 dark:text-zinc-400 font-mono bg-zinc-50 dark:bg-zinc-800 px-3 py-2 rounded-lg"},e4={key:0,class:"grid grid-cols-2 gap-4"},t4={class:"text-sm text-zinc-600 dark:text-zinc-400"},s4={key:0},i4={class:"text-sm text-zinc-600 dark:text-zinc-400"},n4={class:"text-sm text-zinc-600 dark:text-zinc-400"},r4={class:"flex gap-3 justify-end"},o4={__name:"ProjectsView",setup(t){const e=Ea(),s=_r(),i=fe(!1),n=fe(!1),r=fe(!1),o=fe(""),l=fe(""),a=fe(!1),d=fe(null),u=fe({projects:[]}),f=fe(""),h=async()=>{try{const D=await(await fetch("/api/settings/get")).json();u.value.projects=D.projects||[],f.value=D.projects_root&&D.projects_root!==""?D.projects_root:""}catch($){console.error("Failed to load settings:",$)}},m=()=>{s.path==="/projects/new"?i.value=!0:e.push("/projects/new")},w=()=>{i.value=!1,s.path==="/projects/new"&&e.push("/projects")},_=$=>{i.value=!1,h(),$?.id?e.push(`/project/${$.id}`):e.push("/projects")},C=()=>{n.value=!1,o.value="",l.value=""},M=$=>{d.value=$,r.value=!0},U=async()=>{l.value="",a.value=!0;try{const $=await fetch("/api/project/import",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_dir:o.value})}),D=await $.text();if(!D){l.value="Server returned empty response",a.value=!1;return}const N=JSON.parse(D);$.ok?(C(),h()):l.value=N.error||"Failed to import project"}catch($){l.value="Network error: "+$.message}finally{a.value=!1}};return es(()=>{h(),i.value=s.path==="/projects/new"}),Je(()=>s.path,$=>{i.value=$==="/projects/new"},{immediate:!0}),($,D)=>(g(),x("div",_S,[k(Cr,{title:"Your Projects",description:"Framework projects you've created."},{actions:B(()=>[c("div",CS,[k(Oe,{size:"lg",variant:"secondary",onClick:D[0]||(D[0]=N=>n.value=!0)},{default:B(()=>[...D[7]||(D[7]=[se(" Import Project ",-1)])]),_:1}),k(Oe,{size:"lg",onClick:m},{default:B(()=>[...D[8]||(D[8]=[se(" New Project ",-1)])]),_:1})])]),_:1}),f.value?(g(),x("div",AS,[c("div",VS,[D[9]||(D[9]=c("p",{class:"text-sm font-medium text-zinc-700 dark:text-zinc-200"},"Projects Root",-1)),c("p",MS,F(f.value),1)]),c("div",DS,[k(Qr,{value:f.value,variant:"ghost","show-label":"","success-message":"Root path copied"},null,8,["value"]),k(Oe,{size:"sm",variant:"secondary",onClick:D[1]||(D[1]=N=>ot(e).push("/settings"))},{default:B(()=>[...D[10]||(D[10]=[se(" Edit ",-1)])]),_:1})])])):R("",!0),u.value.projects&&u.value.projects.length>0?(g(),x("div",TS,[(g(!0),x(X,null,be(u.value.projects,(N,q)=>(g(),x("div",{key:q,class:"group relative overflow-hidden rounded-2xl border border-zinc-200 bg-white p-6 shadow-sm transition-all duration-300 hover:shadow-xl hover:shadow-zinc-900/5 dark:border-zinc-800 dark:bg-zinc-900 dark:hover:shadow-sky-500/5"},[D[18]||(D[18]=c("div",{class:"absolute -right-6 -top-6 h-24 w-24 rounded-full bg-gradient-to-br from-sky-500/10 to-sky-600/10 blur-2xl transition-all duration-300 group-hover:scale-150"},null,-1)),c("div",ES,[c("div",$S,[c("div",OS,[c("div",PS,[c("div",jS,[N.type==="project"?(g(),x("svg",RS,[...D[11]||(D[11]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)])])):N.type==="course"?(g(),x("svg",LS,[...D[12]||(D[12]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"},null,-1)])])):(g(),x("svg",BS,[...D[13]||(D[13]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"},null,-1)])]))]),k(An,{variant:"sky"},{default:B(()=>[se(F(N.type),1)]),_:2},1024)]),c("h3",IS,F(N.name),1),c("p",US,F(N.path),1),N.author?(g(),x("div",NS,[D[14]||(D[14]=c("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),c("span",null,F(N.author),1),N.author_email?(g(),x("span",zS,"")):R("",!0),N.author_email?(g(),x("span",FS,F(N.author_email),1)):R("",!0)])):R("",!0),c("div",HS,[D[15]||(D[15]=c("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),c("span",null,"Created "+F(N.created),1)])])]),c("div",WS,[k(Oe,{variant:"primary",size:"md",onClick:P=>$.$router.push(`/project/${N.id}`),class:"flex-1"},{default:B(()=>[...D[16]||(D[16]=[se(" View Project ",-1)])]),_:1},8,["onClick"]),k(Oe,{variant:"secondary",size:"md",onClick:P=>M(N),class:"flex-1"},{default:B(()=>[...D[17]||(D[17]=[se(" See More ",-1)])]),_:1},8,["onClick"])])])]))),128))])):(g(),x("div",qS,[c("div",{class:"relative"},[D[21]||(D[21]=c("div",{class:"absolute -right-10 -top-10 h-40 w-40 rounded-full bg-white/10 blur-3xl"},null,-1)),D[22]||(D[22]=c("div",{class:"absolute -bottom-10 -left-10 h-40 w-40 rounded-full bg-white/10 blur-3xl"},null,-1)),c("div",{class:"relative text-center"},[D[20]||(D[20]=Va('<div class="mx-auto flex h-16 w-16 items-center justify-center rounded-2xl bg-white/20 backdrop-blur-sm"><svg class="h-8 w-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg></div><h2 class="mt-6 text-3xl font-bold text-white">Ready to start?</h2><p class="mt-3 text-lg text-sky-50"> Create a new Framework project with beautiful structure and best practices built-in. </p>',3)),c("button",{onClick:m,class:"mt-8 inline-flex items-center gap-2 rounded-xl bg-white px-6 py-3 text-base font-semibold text-sky-600 shadow-xl transition-all duration-200 hover:scale-105 hover:shadow-2xl focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-white"},[...D[19]||(D[19]=[c("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),se(" Create Your First Project ",-1)])])])])])),i.value?(g(),he(aS,{key:3,"projects-root":f.value,onClose:w,onCreated:_},null,8,["projects-root"])):R("",!0),k(yo,{modelValue:n.value,"onUpdate:modelValue":D[3]||(D[3]=N=>n.value=N),title:"Import Existing Project",size:"md"},{actions:B(()=>[c("div",JS,[k(Oe,{variant:"secondary",onClick:C},{default:B(()=>[...D[26]||(D[26]=[se(" Cancel ",-1)])]),_:1}),k(Oe,{variant:"primary",onClick:U,disabled:!o.value||a.value},{default:B(()=>[se(F(a.value?"Importing...":"Import"),1)]),_:1},8,["disabled"])])]),default:B(()=>[c("div",GS,[D[25]||(D[25]=c("p",{class:"text-sm text-zinc-600 dark:text-zinc-400"}," Import an existing Framework project that isn't in your registry yet. ",-1)),c("div",null,[D[23]||(D[23]=c("label",{for:"import-path",class:"block text-sm font-medium text-zinc-900 dark:text-white mb-2"}," Project Directory Path ",-1)),qe(c("input",{id:"import-path","onUpdate:modelValue":D[2]||(D[2]=N=>o.value=N),type:"text",placeholder:"/Users/you/projects/my-framework-project",class:Ve(["block w-full rounded-lg border-0 px-4 py-2.5 text-zinc-900 shadow-sm ring-1 ring-inset ring-zinc-300 placeholder:text-zinc-400 focus:ring-2 focus:ring-inset focus:ring-sky-600 dark:bg-zinc-800 dark:text-white dark:ring-zinc-700 dark:placeholder:text-zinc-500 dark:focus:ring-sky-500 sm:text-sm sm:leading-6 font-mono",{"ring-red-500 dark:ring-red-500":l.value}])},null,2),[[Gi,o.value]]),D[24]||(D[24]=c("p",{class:"mt-2 text-xs text-zinc-500 dark:text-zinc-500"}," Enter the full path to the Framework project directory ",-1)),l.value?(g(),x("p",KS,F(l.value),1)):R("",!0)])])]),_:1},8,["modelValue"]),k(yo,{modelValue:r.value,"onUpdate:modelValue":D[6]||(D[6]=N=>r.value=N),title:"Project Details",size:"lg"},{actions:B(()=>[c("div",r4,[k(Oe,{variant:"secondary",onClick:D[4]||(D[4]=N=>r.value=!1)},{default:B(()=>[...D[31]||(D[31]=[se(" Close ",-1)])]),_:1}),k(Oe,{variant:"primary",onClick:D[5]||(D[5]=N=>{$.$router.push(`/project/${d.value.id}`),r.value=!1})},{default:B(()=>[...D[32]||(D[32]=[se(" View Full Details ",-1)])]),_:1})])]),default:B(()=>[d.value?(g(),x("div",YS,[c("div",null,[c("h3",XS,F(d.value.name),1),k(An,{variant:"sky",class:"mb-4"},{default:B(()=>[se(F(d.value.type),1)]),_:1})]),c("div",QS,[c("div",null,[D[27]||(D[27]=c("label",{class:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1"}," Location ",-1)),c("p",ZS,F(d.value.path),1)]),d.value.author?(g(),x("div",e4,[c("div",null,[D[28]||(D[28]=c("label",{class:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1"}," Author ",-1)),c("p",t4,F(d.value.author),1)]),d.value.author_email?(g(),x("div",s4,[D[29]||(D[29]=c("label",{class:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1"}," Email ",-1)),c("p",i4,F(d.value.author_email),1)])):R("",!0)])):R("",!0),c("div",null,[D[30]||(D[30]=c("label",{class:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1"}," Created ",-1)),c("p",n4,F(d.value.created),1)])])])):R("",!0)]),_:1},8,["modelValue"])]))}},l4=["for"],a4={class:"mt-2 grid grid-cols-1"},u4=["id","value"],_s={__name:"Select",props:{id:{type:String,default:()=>`select-${Math.random().toString(36).substr(2,9)}`},modelValue:{type:[String,Number],default:""},label:{type:String,default:null}},emits:["update:modelValue"],setup(t){return(e,s)=>(g(),x("div",null,[t.label?(g(),x("label",{key:0,for:t.id,class:"block text-sm/6 font-medium text-gray-900 dark:text-white"},F(t.label),9,l4)):R("",!0),c("div",a4,[c("select",{id:t.id,value:t.modelValue,onChange:s[0]||(s[0]=i=>e.$emit("update:modelValue",i.target.value)),class:"col-start-1 row-start-1 w-full appearance-none rounded-md bg-white py-1.5 pr-8 pl-3 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 focus-visible:outline-2 focus-visible:-outline-offset-2 focus-visible:outline-sky-600 sm:text-sm/6 dark:bg-white/5 dark:text-white dark:outline-white/10 dark:*:bg-gray-800 dark:focus-visible:outline-sky-500"},[kt(e.$slots,"default")],40,u4),s[1]||(s[1]=c("svg",{viewBox:"0 0 16 16",fill:"currentColor","data-slot":"icon","aria-hidden":"true",class:"pointer-events-none col-start-1 row-start-1 mr-2 size-5 self-center justify-self-end text-gray-500 sm:size-4 dark:text-gray-400"},[c("path",{d:"M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z","clip-rule":"evenodd","fill-rule":"evenodd"})],-1))])]))}},d4={class:"flex items-center gap-3"},c4=["id","name","checked","disabled","aria-label"],f4={key:0,class:"text-sm/6"},h4=["for"],p4=["id"],Re={__name:"Toggle",props:{id:{type:String,default:()=>`toggle-${Math.random().toString(36).substr(2,9)}`},name:{type:String,default:null},modelValue:{type:Boolean,default:!1},label:{type:String,default:null},description:{type:String,default:null},ariaLabel:{type:String,default:null},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(t,{emit:e}){const s=t,i=e,n=r=>{if(!s.disabled){const o=r.target.checked;i("update:modelValue",o),i("change",o)}};return(r,o)=>(g(),x("div",d4,[c("div",{class:Ve(["group relative inline-flex w-11 shrink-0 rounded-full p-0.5 inset-ring inset-ring-gray-900/5 outline-offset-2 transition-colors duration-200 ease-in-out dark:inset-ring-white/10",[t.modelValue?"bg-sky-600 outline-sky-600 dark:bg-sky-500 dark:outline-sky-500":"bg-gray-200 outline-sky-600 dark:bg-white/5 dark:outline-sky-500"]])},[c("span",{class:Ve(["size-5 rounded-full bg-white shadow-xs ring-1 ring-gray-900/5 transition-transform duration-200 ease-in-out",{"translate-x-5":t.modelValue}])},null,2),c("input",{id:t.id,type:"checkbox",name:t.name,checked:t.modelValue,disabled:t.disabled,"aria-label":t.ariaLabel||t.label,class:"absolute inset-0 appearance-none focus:outline-hidden cursor-pointer disabled:cursor-not-allowed",onChange:n},null,40,c4)],2),t.label||t.description?(g(),x("div",f4,[t.label?(g(),x("label",{key:0,for:t.id,class:Ve(["font-medium text-gray-900 cursor-pointer dark:text-white",{"cursor-not-allowed opacity-50":t.disabled}])},F(t.label),11,h4)):R("",!0),t.description?(g(),x("p",{key:1,id:`${t.id}-description`,class:"text-gray-500 dark:text-gray-400"},F(t.description),9,p4)):R("",!0)])):R("",!0)]))}},m4={class:"flex items-center"},g4=["id","name","value","checked"],y4=["for"],ti={__name:"Radio",props:{id:{type:String,required:!0},name:{type:String,required:!0},value:{type:[String,Number,Boolean],required:!0},modelValue:{type:[String,Number,Boolean],default:null}},emits:["update:modelValue"],setup(t){return(e,s)=>(g(),x("div",m4,[c("input",{id:t.id,type:"radio",name:t.name,value:t.value,checked:t.modelValue===t.value,onChange:s[0]||(s[0]=i=>e.$emit("update:modelValue",t.value)),class:"relative size-4 appearance-none rounded-full border border-gray-300 bg-white before:absolute before:inset-1 before:rounded-full before:bg-white not-checked:before:hidden checked:border-sky-600 checked:bg-sky-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:before:bg-gray-400 dark:border-white/10 dark:bg-white/5 dark:checked:border-sky-500 dark:checked:bg-sky-500 dark:focus-visible:outline-sky-500 dark:disabled:border-white/5 dark:disabled:bg-white/10 dark:disabled:before:bg-white/20 forced-colors:appearance-auto forced-colors:before:hidden"},null,40,g4),c("label",{for:t.id,class:"ml-3 block text-sm/6 font-medium text-gray-900 dark:text-white"},[kt(e.$slots,"default")],8,y4)]))}},v4={class:"text-sm/6 font-semibold text-gray-900 dark:text-white"},b4={key:0,class:"mt-1 text-sm/6 text-gray-600 dark:text-gray-400"},x4={class:"mt-6 space-y-6"},mu={__name:"RadioGroup",props:{legend:{type:String,required:!0},description:{type:String,default:null}},setup(t){return(e,s)=>(g(),x("fieldset",null,[c("legend",v4,F(t.legend),1),t.description?(g(),x("p",b4,F(t.description),1)):R("",!0),c("div",x4,[kt(e.$slots,"default")])]))}},k4={class:"space-y-4"},w4={class:"flex items-start gap-4"},S4={class:"flex-1"},_4=["onClick"],Vt={__name:"Repeater",props:{modelValue:{type:Array,default:()=>[]},addLabel:{type:String,default:"Add Item"},defaultItem:{type:[Object,Function],default:()=>({})}},emits:["update:modelValue"],setup(t,{emit:e}){const s=t,i=e,n=()=>{const l=typeof s.defaultItem=="function"?s.defaultItem():{...s.defaultItem,_id:Date.now()};i("update:modelValue",[...s.modelValue,l])},r=l=>{const a=s.modelValue.filter((d,u)=>u!==l);i("update:modelValue",a)},o=(l,a,d)=>{const u=[...s.modelValue];u[l]={...u[l],[a]:d},i("update:modelValue",u)};return(l,a)=>(g(),x("div",k4,[(g(!0),x(X,null,be(t.modelValue,(d,u)=>(g(),x("div",{key:d._id||u,class:"rounded-lg border border-gray-200 p-4 dark:border-gray-700"},[c("div",w4,[c("div",S4,[kt(l.$slots,"default",{item:d,index:u,update:(f,h)=>o(u,f,h)})]),c("button",{type:"button",onClick:f=>r(u),class:"shrink-0 rounded-md p-1.5 text-gray-400 transition hover:bg-red-50 hover:text-red-600 dark:hover:bg-red-900/20 dark:hover:text-red-400",title:"Remove"},[...a[0]||(a[0]=[c("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,_4)])]))),128)),k(Oe,{variant:"secondary",size:"sm",onClick:n,class:"inline-flex items-center"},{default:B(()=>[a[1]||(a[1]=c("svg",{class:"mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)),se(" "+F(t.addLabel),1)]),_:1})]))}};let ad=[],Hg=[];(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,s=0;e<t.length;e++)(e%2?Hg:ad).push(s=s+t[e])})();function C4(t){if(t<768)return!1;for(let e=0,s=ad.length;;){let i=e+s>>1;if(t<ad[i])s=i;else if(t>=Hg[i])e=i+1;else return!0;if(e==s)return!1}}function _h(t){return t>=127462&&t<=127487}const Ch=8205;function A4(t,e,s=!0,i=!0){return(s?Wg:V4)(t,e,i)}function Wg(t,e,s){if(e==t.length)return e;e&&qg(t.charCodeAt(e))&&Gg(t.charCodeAt(e-1))&&e--;let i=gu(t,e);for(e+=Ah(i);e<t.length;){let n=gu(t,e);if(i==Ch||n==Ch||s&&C4(n))e+=Ah(n),i=n;else if(_h(n)){let r=0,o=e-2;for(;o>=0&&_h(gu(t,o));)r++,o-=2;if(r%2==0)break;e+=2}else break}return e}function V4(t,e,s){for(;e>0;){let i=Wg(t,e-2,s);if(i<e)return i;e--}return 0}function gu(t,e){let s=t.charCodeAt(e);if(!Gg(s)||e+1==t.length)return s;let i=t.charCodeAt(e+1);return qg(i)?(s-55296<<10)+(i-56320)+65536:s}function qg(t){return t>=56320&&t<57344}function Gg(t){return t>=55296&&t<56320}function Ah(t){return t<65536?1:2}class Ze{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,s,i){[e,s]=pr(this,e,s);let n=[];return this.decompose(0,e,n,2),i.length&&i.decompose(0,i.length,n,3),this.decompose(s,this.length,n,1),ai.from(n,this.length-(s-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,s=this.length){[e,s]=pr(this,e,s);let i=[];return this.decompose(e,s,i,0),ai.from(i,s-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let s=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),n=new Zr(this),r=new Zr(e);for(let o=s,l=s;;){if(n.next(o),r.next(o),o=0,n.lineBreak!=r.lineBreak||n.done!=r.done||n.value!=r.value)return!1;if(l+=n.value.length,n.done||l>=i)return!0}}iter(e=1){return new Zr(this,e)}iterRange(e,s=this.length){return new Kg(this,e,s)}iterLines(e,s){let i;if(e==null)i=this.iter();else{s==null&&(s=this.lines+1);let n=this.line(e).from;i=this.iterRange(n,Math.max(n,s==this.lines+1?this.length:s<=1?0:this.line(s-1).to))}return new Jg(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Ze.empty:e.length<=32?new Mt(e):ai.from(Mt.split(e,[]))}}class Mt extends Ze{constructor(e,s=M4(e)){super(),this.text=e,this.length=s}get lines(){return this.text.length}get children(){return null}lineInner(e,s,i,n){for(let r=0;;r++){let o=this.text[r],l=n+o.length;if((s?i:l)>=e)return new D4(n,l,i,o);n=l+1,i++}}decompose(e,s,i,n){let r=e<=0&&s>=this.length?this:new Mt(Vh(this.text,e,s),Math.min(s,this.length)-Math.max(0,e));if(n&1){let o=i.pop(),l=El(r.text,o.text.slice(),0,r.length);if(l.length<=32)i.push(new Mt(l,o.length+r.length));else{let a=l.length>>1;i.push(new Mt(l.slice(0,a)),new Mt(l.slice(a)))}}else i.push(r)}replace(e,s,i){if(!(i instanceof Mt))return super.replace(e,s,i);[e,s]=pr(this,e,s);let n=El(this.text,El(i.text,Vh(this.text,0,e)),s),r=this.length+i.length-(s-e);return n.length<=32?new Mt(n,r):ai.from(Mt.split(n,[]),r)}sliceString(e,s=this.length,i=`
`){[e,s]=pr(this,e,s);let n="";for(let r=0,o=0;r<=s&&o<this.text.length;o++){let l=this.text[o],a=r+l.length;r>e&&o&&(n+=i),e<a&&s>r&&(n+=l.slice(Math.max(0,e-r),s-r)),r=a+1}return n}flatten(e){for(let s of this.text)e.push(s)}scanIdentical(){return 0}static split(e,s){let i=[],n=-1;for(let r of e)i.push(r),n+=r.length+1,i.length==32&&(s.push(new Mt(i,n)),i=[],n=-1);return n>-1&&s.push(new Mt(i,n)),s}}class ai extends Ze{constructor(e,s){super(),this.children=e,this.length=s,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,s,i,n){for(let r=0;;r++){let o=this.children[r],l=n+o.length,a=i+o.lines-1;if((s?a:l)>=e)return o.lineInner(e,s,i,n);n=l+1,i=a+1}}decompose(e,s,i,n){for(let r=0,o=0;o<=s&&r<this.children.length;r++){let l=this.children[r],a=o+l.length;if(e<=a&&s>=o){let d=n&((o<=e?1:0)|(a>=s?2:0));o>=e&&a<=s&&!d?i.push(l):l.decompose(e-o,s-o,i,d)}o=a+1}}replace(e,s,i){if([e,s]=pr(this,e,s),i.lines<this.lines)for(let n=0,r=0;n<this.children.length;n++){let o=this.children[n],l=r+o.length;if(e>=r&&s<=l){let a=o.replace(e-r,s-r,i),d=this.lines-o.lines+a.lines;if(a.lines<d>>4&&a.lines>d>>6){let u=this.children.slice();return u[n]=a,new ai(u,this.length-(s-e)+i.length)}return super.replace(r,l,a)}r=l+1}return super.replace(e,s,i)}sliceString(e,s=this.length,i=`
`){[e,s]=pr(this,e,s);let n="";for(let r=0,o=0;r<this.children.length&&o<=s;r++){let l=this.children[r],a=o+l.length;o>e&&r&&(n+=i),e<a&&s>o&&(n+=l.sliceString(e-o,s-o,i)),o=a+1}return n}flatten(e){for(let s of this.children)s.flatten(e)}scanIdentical(e,s){if(!(e instanceof ai))return 0;let i=0,[n,r,o,l]=s>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;n+=s,r+=s){if(n==o||r==l)return i;let a=this.children[n],d=e.children[r];if(a!=d)return i+a.scanIdentical(d,s);i+=a.length+1}}static from(e,s=e.reduce((i,n)=>i+n.length+1,-1)){let i=0;for(let m of e)i+=m.lines;if(i<32){let m=[];for(let w of e)w.flatten(m);return new Mt(m,s)}let n=Math.max(32,i>>5),r=n<<1,o=n>>1,l=[],a=0,d=-1,u=[];function f(m){let w;if(m.lines>r&&m instanceof ai)for(let _ of m.children)f(_);else m.lines>o&&(a>o||!a)?(h(),l.push(m)):m instanceof Mt&&a&&(w=u[u.length-1])instanceof Mt&&m.lines+w.lines<=32?(a+=m.lines,d+=m.length+1,u[u.length-1]=new Mt(w.text.concat(m.text),w.length+1+m.length)):(a+m.lines>n&&h(),a+=m.lines,d+=m.length+1,u.push(m))}function h(){a!=0&&(l.push(u.length==1?u[0]:ai.from(u,d)),d=-1,a=u.length=0)}for(let m of e)f(m);return h(),l.length==1?l[0]:new ai(l,s)}}Ze.empty=new Mt([""],0);function M4(t){let e=-1;for(let s of t)e+=s.length+1;return e}function El(t,e,s=0,i=1e9){for(let n=0,r=0,o=!0;r<t.length&&n<=i;r++){let l=t[r],a=n+l.length;a>=s&&(a>i&&(l=l.slice(0,i-n)),n<s&&(l=l.slice(s-n)),o?(e[e.length-1]+=l,o=!1):e.push(l)),n=a+1}return e}function Vh(t,e,s){return El(t,[""],e,s)}class Zr{constructor(e,s=1){this.dir=s,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[s>0?1:(e instanceof Mt?e.text.length:e.children.length)<<1]}nextInner(e,s){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,n=this.nodes[i],r=this.offsets[i],o=r>>1,l=n instanceof Mt?n.text.length:n.children.length;if(o==(s>0?l:0)){if(i==0)return this.done=!0,this.value="",this;s>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((r&1)==(s>0?0:1)){if(this.offsets[i]+=s,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(n instanceof Mt){let a=n.text[o+(s<0?-1:0)];if(this.offsets[i]+=s,a.length>Math.max(0,e))return this.value=e==0?a:s>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=n.children[o+(s<0?-1:0)];e>a.length?(e-=a.length,this.offsets[i]+=s):(s<0&&this.offsets[i]--,this.nodes.push(a),this.offsets.push(s>0?1:(a instanceof Mt?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class Kg{constructor(e,s,i){this.value="",this.done=!1,this.cursor=new Zr(e,s>i?-1:1),this.pos=s>i?e.length:0,this.from=Math.min(s,i),this.to=Math.max(s,i)}nextInner(e,s){if(s<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,s<0?this.pos-this.to:this.from-this.pos);let i=s<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:n}=this.cursor.next(e);return this.pos+=(n.length+e)*s,this.value=n.length<=i?n:s<0?n.slice(n.length-i):n.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class Jg{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:s,lineBreak:i,value:n}=this.inner.next(e);return s&&this.afterBreak?(this.value="",this.afterBreak=!1):s?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=n,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Ze.prototype[Symbol.iterator]=function(){return this.iter()},Zr.prototype[Symbol.iterator]=Kg.prototype[Symbol.iterator]=Jg.prototype[Symbol.iterator]=function(){return this});class D4{constructor(e,s,i,n){this.from=e,this.to=s,this.number=i,this.text=n}get length(){return this.to-this.from}}function pr(t,e,s){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,s))]}function qt(t,e,s=!0,i=!0){return A4(t,e,s,i)}function T4(t){return t>=56320&&t<57344}function E4(t){return t>=55296&&t<56320}function ms(t,e){let s=t.charCodeAt(e);if(!E4(s)||e+1==t.length)return s;let i=t.charCodeAt(e+1);return T4(i)?(s-55296<<10)+(i-56320)+65536:s}function Cc(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function ui(t){return t<65536?1:2}const ud=/\r\n?|\n/;var cs=(function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t})(cs||(cs={}));class mi{constructor(e){this.sections=e}get length(){let e=0;for(let s=0;s<this.sections.length;s+=2)e+=this.sections[s];return e}get newLength(){let e=0;for(let s=0;s<this.sections.length;s+=2){let i=this.sections[s+1];e+=i<0?this.sections[s]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let s=0,i=0,n=0;s<this.sections.length;){let r=this.sections[s++],o=this.sections[s++];o<0?(e(i,n,r),n+=r):n+=o,i+=r}}iterChangedRanges(e,s=!1){dd(this,e,s)}get invertedDesc(){let e=[];for(let s=0;s<this.sections.length;){let i=this.sections[s++],n=this.sections[s++];n<0?e.push(i,n):e.push(n,i)}return new mi(e)}composeDesc(e){return this.empty?e:e.empty?this:Yg(this,e)}mapDesc(e,s=!1){return e.empty?this:cd(this,e,s)}mapPos(e,s=-1,i=cs.Simple){let n=0,r=0;for(let o=0;o<this.sections.length;){let l=this.sections[o++],a=this.sections[o++],d=n+l;if(a<0){if(d>e)return r+(e-n);r+=l}else{if(i!=cs.Simple&&d>=e&&(i==cs.TrackDel&&n<e&&d>e||i==cs.TrackBefore&&n<e||i==cs.TrackAfter&&d>e))return null;if(d>e||d==e&&s<0&&!l)return e==n||s<0?r:r+a;r+=a}n=d}if(e>n)throw new RangeError(`Position ${e} is out of range for changeset of length ${n}`);return r}touchesRange(e,s=e){for(let i=0,n=0;i<this.sections.length&&n<=s;){let r=this.sections[i++],o=this.sections[i++],l=n+r;if(o>=0&&n<=s&&l>=e)return n<e&&l>s?"cover":!0;n=l}return!1}toString(){let e="";for(let s=0;s<this.sections.length;){let i=this.sections[s++],n=this.sections[s++];e+=(e?" ":"")+i+(n>=0?":"+n:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(s=>typeof s!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new mi(e)}static create(e){return new mi(e)}}class Pt extends mi{constructor(e,s){super(e),this.inserted=s}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return dd(this,(s,i,n,r,o)=>e=e.replace(n,n+(i-s),o),!1),e}mapDesc(e,s=!1){return cd(this,e,s,!0)}invert(e){let s=this.sections.slice(),i=[];for(let n=0,r=0;n<s.length;n+=2){let o=s[n],l=s[n+1];if(l>=0){s[n]=l,s[n+1]=o;let a=n>>1;for(;i.length<a;)i.push(Ze.empty);i.push(o?e.slice(r,r+o):Ze.empty)}r+=o}return new Pt(s,i)}compose(e){return this.empty?e:e.empty?this:Yg(this,e,!0)}map(e,s=!1){return e.empty?this:cd(this,e,s,!0)}iterChanges(e,s=!1){dd(this,e,s)}get desc(){return mi.create(this.sections)}filter(e){let s=[],i=[],n=[],r=new vo(this);e:for(let o=0,l=0;;){let a=o==e.length?1e9:e[o++];for(;l<a||l==a&&r.len==0;){if(r.done)break e;let u=Math.min(r.len,a-l);Kt(n,u,-1);let f=r.ins==-1?-1:r.off==0?r.ins:0;Kt(s,u,f),f>0&&Yi(i,s,r.text),r.forward(u),l+=u}let d=e[o++];for(;l<d;){if(r.done)break e;let u=Math.min(r.len,d-l);Kt(s,u,-1),Kt(n,u,r.ins==-1?-1:r.off==0?r.ins:0),r.forward(u),l+=u}}return{changes:new Pt(s,i),filtered:mi.create(n)}}toJSON(){let e=[];for(let s=0;s<this.sections.length;s+=2){let i=this.sections[s],n=this.sections[s+1];n<0?e.push(i):n==0?e.push([i]):e.push([i].concat(this.inserted[s>>1].toJSON()))}return e}static of(e,s,i){let n=[],r=[],o=0,l=null;function a(u=!1){if(!u&&!n.length)return;o<s&&Kt(n,s-o,-1);let f=new Pt(n,r);l=l?l.compose(f.map(l)):f,n=[],r=[],o=0}function d(u){if(Array.isArray(u))for(let f of u)d(f);else if(u instanceof Pt){if(u.length!=s)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${s})`);a(),l=l?l.compose(u.map(l)):u}else{let{from:f,to:h=f,insert:m}=u;if(f>h||f<0||h>s)throw new RangeError(`Invalid change range ${f} to ${h} (in doc of length ${s})`);let w=m?typeof m=="string"?Ze.of(m.split(i||ud)):m:Ze.empty,_=w.length;if(f==h&&_==0)return;f<o&&a(),f>o&&Kt(n,f-o,-1),Kt(n,h-f,_),Yi(r,n,w),o=h}}return d(e),a(!l),l}static empty(e){return new Pt(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let s=[],i=[];for(let n=0;n<e.length;n++){let r=e[n];if(typeof r=="number")s.push(r,-1);else{if(!Array.isArray(r)||typeof r[0]!="number"||r.some((o,l)=>l&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(r.length==1)s.push(r[0],0);else{for(;i.length<n;)i.push(Ze.empty);i[n]=Ze.of(r.slice(1)),s.push(r[0],i[n].length)}}}return new Pt(s,i)}static createSet(e,s){return new Pt(e,s)}}function Kt(t,e,s,i=!1){if(e==0&&s<=0)return;let n=t.length-2;n>=0&&s<=0&&s==t[n+1]?t[n]+=e:n>=0&&e==0&&t[n]==0?t[n+1]+=s:i?(t[n]+=e,t[n+1]+=s):t.push(e,s)}function Yi(t,e,s){if(s.length==0)return;let i=e.length-2>>1;if(i<t.length)t[t.length-1]=t[t.length-1].append(s);else{for(;t.length<i;)t.push(Ze.empty);t.push(s)}}function dd(t,e,s){let i=t.inserted;for(let n=0,r=0,o=0;o<t.sections.length;){let l=t.sections[o++],a=t.sections[o++];if(a<0)n+=l,r+=l;else{let d=n,u=r,f=Ze.empty;for(;d+=l,u+=a,a&&i&&(f=f.append(i[o-2>>1])),!(s||o==t.sections.length||t.sections[o+1]<0);)l=t.sections[o++],a=t.sections[o++];e(n,d,r,u,f),n=d,r=u}}}function cd(t,e,s,i=!1){let n=[],r=i?[]:null,o=new vo(t),l=new vo(e);for(let a=-1;;){if(o.done&&l.len||l.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&l.ins==-1){let d=Math.min(o.len,l.len);Kt(n,d,-1),o.forward(d),l.forward(d)}else if(l.ins>=0&&(o.ins<0||a==o.i||o.off==0&&(l.len<o.len||l.len==o.len&&!s))){let d=l.len;for(Kt(n,l.ins,-1);d;){let u=Math.min(o.len,d);o.ins>=0&&a<o.i&&o.len<=u&&(Kt(n,0,o.ins),r&&Yi(r,n,o.text),a=o.i),o.forward(u),d-=u}l.next()}else if(o.ins>=0){let d=0,u=o.len;for(;u;)if(l.ins==-1){let f=Math.min(u,l.len);d+=f,u-=f,l.forward(f)}else if(l.ins==0&&l.len<u)u-=l.len,l.next();else break;Kt(n,d,a<o.i?o.ins:0),r&&a<o.i&&Yi(r,n,o.text),a=o.i,o.forward(o.len-u)}else{if(o.done&&l.done)return r?Pt.createSet(n,r):mi.create(n);throw new Error("Mismatched change set lengths")}}}function Yg(t,e,s=!1){let i=[],n=s?[]:null,r=new vo(t),o=new vo(e);for(let l=!1;;){if(r.done&&o.done)return n?Pt.createSet(i,n):mi.create(i);if(r.ins==0)Kt(i,r.len,0,l),r.next();else if(o.len==0&&!o.done)Kt(i,0,o.ins,l),n&&Yi(n,i,o.text),o.next();else{if(r.done||o.done)throw new Error("Mismatched change set lengths");{let a=Math.min(r.len2,o.len),d=i.length;if(r.ins==-1){let u=o.ins==-1?-1:o.off?0:o.ins;Kt(i,a,u,l),n&&u&&Yi(n,i,o.text)}else o.ins==-1?(Kt(i,r.off?0:r.len,a,l),n&&Yi(n,i,r.textBit(a))):(Kt(i,r.off?0:r.len,o.off?0:o.ins,l),n&&!o.off&&Yi(n,i,o.text));l=(r.ins>a||o.ins>=0&&o.len>a)&&(l||i.length>d),r.forward2(a),o.forward(a)}}}}class vo{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,s=this.i-2>>1;return s>=e.length?Ze.empty:e[s]}textBit(e){let{inserted:s}=this.set,i=this.i-2>>1;return i>=s.length&&!e?Ze.empty:s[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Vn{constructor(e,s,i){this.from=e,this.to=s,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,s=-1){let i,n;return this.empty?i=n=e.mapPos(this.from,s):(i=e.mapPos(this.from,1),n=e.mapPos(this.to,-1)),i==this.from&&n==this.to?this:new Vn(i,n,this.flags)}extend(e,s=e){if(e<=this.anchor&&s>=this.anchor)return ie.range(e,s);let i=Math.abs(e-this.anchor)>Math.abs(s-this.anchor)?e:s;return ie.range(this.anchor,i)}eq(e,s=!1){return this.anchor==e.anchor&&this.head==e.head&&(!s||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return ie.range(e.anchor,e.head)}static create(e,s,i){return new Vn(e,s,i)}}class ie{constructor(e,s){this.ranges=e,this.mainIndex=s}map(e,s=-1){return e.empty?this:ie.create(this.ranges.map(i=>i.map(e,s)),this.mainIndex)}eq(e,s=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],s))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new ie([this.main],0)}addRange(e,s=!0){return ie.create([e].concat(this.ranges),s?0:this.mainIndex+1)}replaceRange(e,s=this.mainIndex){let i=this.ranges.slice();return i[s]=e,ie.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new ie(e.ranges.map(s=>Vn.fromJSON(s)),e.main)}static single(e,s=e){return new ie([ie.range(e,s)],0)}static create(e,s=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,n=0;n<e.length;n++){let r=e[n];if(r.empty?r.from<=i:r.from<i)return ie.normalized(e.slice(),s);i=r.to}return new ie(e,s)}static cursor(e,s=0,i,n){return Vn.create(e,e,(s==0?0:s<0?8:16)|(i==null?7:Math.min(6,i))|(n??16777215)<<6)}static range(e,s,i,n){let r=(i??16777215)<<6|(n==null?7:Math.min(6,n));return s<e?Vn.create(s,e,48|r):Vn.create(e,s,(s>e?8:0)|r)}static normalized(e,s=0){let i=e[s];e.sort((n,r)=>n.from-r.from),s=e.indexOf(i);for(let n=1;n<e.length;n++){let r=e[n],o=e[n-1];if(r.empty?r.from<=o.to:r.from<o.to){let l=o.from,a=Math.max(r.to,o.to);n<=s&&s--,e.splice(--n,2,r.anchor>r.head?ie.range(a,l):ie.range(l,a))}}return new ie(e,s)}}function Xg(t,e){for(let s of t.ranges)if(s.to>e)throw new RangeError("Selection points outside of document")}let Ac=0;class De{constructor(e,s,i,n,r){this.combine=e,this.compareInput=s,this.compare=i,this.isStatic=n,this.id=Ac++,this.default=e([]),this.extensions=typeof r=="function"?r(this):r}get reader(){return this}static define(e={}){return new De(e.combine||(s=>s),e.compareInput||((s,i)=>s===i),e.compare||(e.combine?(s,i)=>s===i:Vc),!!e.static,e.enables)}of(e){return new $l([],this,0,e)}compute(e,s){if(this.isStatic)throw new Error("Can't compute a static facet");return new $l(e,this,1,s)}computeN(e,s){if(this.isStatic)throw new Error("Can't compute a static facet");return new $l(e,this,2,s)}from(e,s){return s||(s=i=>i),this.compute([e],i=>s(i.field(e)))}}function Vc(t,e){return t==e||t.length==e.length&&t.every((s,i)=>s===e[i])}class $l{constructor(e,s,i,n){this.dependencies=e,this.facet=s,this.type=i,this.value=n,this.id=Ac++}dynamicSlot(e){var s;let i=this.value,n=this.facet.compareInput,r=this.id,o=e[r]>>1,l=this.type==2,a=!1,d=!1,u=[];for(let f of this.dependencies)f=="doc"?a=!0:f=="selection"?d=!0:(((s=e[f.id])!==null&&s!==void 0?s:1)&1)==0&&u.push(e[f.id]);return{create(f){return f.values[o]=i(f),1},update(f,h){if(a&&h.docChanged||d&&(h.docChanged||h.selection)||fd(f,u)){let m=i(f);if(l?!Mh(m,f.values[o],n):!n(m,f.values[o]))return f.values[o]=m,1}return 0},reconfigure:(f,h)=>{let m,w=h.config.address[r];if(w!=null){let _=Ql(h,w);if(this.dependencies.every(C=>C instanceof De?h.facet(C)===f.facet(C):C instanceof Gt?h.field(C,!1)==f.field(C,!1):!0)||(l?Mh(m=i(f),_,n):n(m=i(f),_)))return f.values[o]=_,0}else m=i(f);return f.values[o]=m,1}}}}function Mh(t,e,s){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!s(t[i],e[i]))return!1;return!0}function fd(t,e){let s=!1;for(let i of e)eo(t,i)&1&&(s=!0);return s}function $4(t,e,s){let i=s.map(a=>t[a.id]),n=s.map(a=>a.type),r=i.filter(a=>!(a&1)),o=t[e.id]>>1;function l(a){let d=[];for(let u=0;u<i.length;u++){let f=Ql(a,i[u]);if(n[u]==2)for(let h of f)d.push(h);else d.push(f)}return e.combine(d)}return{create(a){for(let d of i)eo(a,d);return a.values[o]=l(a),1},update(a,d){if(!fd(a,r))return 0;let u=l(a);return e.compare(u,a.values[o])?0:(a.values[o]=u,1)},reconfigure(a,d){let u=fd(a,i),f=d.config.facets[e.id],h=d.facet(e);if(f&&!u&&Vc(s,f))return a.values[o]=h,0;let m=l(a);return e.compare(m,h)?(a.values[o]=h,0):(a.values[o]=m,1)}}}const sl=De.define({static:!0});class Gt{constructor(e,s,i,n,r){this.id=e,this.createF=s,this.updateF=i,this.compareF=n,this.spec=r,this.provides=void 0}static define(e){let s=new Gt(Ac++,e.create,e.update,e.compare||((i,n)=>i===n),e);return e.provide&&(s.provides=e.provide(s)),s}create(e){let s=e.facet(sl).find(i=>i.field==this);return(s?.create||this.createF)(e)}slot(e){let s=e[this.id]>>1;return{create:i=>(i.values[s]=this.create(i),1),update:(i,n)=>{let r=i.values[s],o=this.updateF(r,n);return this.compareF(r,o)?0:(i.values[s]=o,1)},reconfigure:(i,n)=>{let r=i.facet(sl),o=n.facet(sl),l;return(l=r.find(a=>a.field==this))&&l!=o.find(a=>a.field==this)?(i.values[s]=l.create(i),1):n.config.address[this.id]!=null?(i.values[s]=n.field(this),0):(i.values[s]=this.create(i),1)}}}init(e){return[this,sl.of({field:this,create:e})]}get extension(){return this}}const Sn={lowest:4,low:3,default:2,high:1,highest:0};function Or(t){return e=>new Qg(e,t)}const Nn={highest:Or(Sn.highest),high:Or(Sn.high),default:Or(Sn.default),low:Or(Sn.low),lowest:Or(Sn.lowest)};class Qg{constructor(e,s){this.inner=e,this.prec=s}}class Oa{of(e){return new hd(this,e)}reconfigure(e){return Oa.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class hd{constructor(e,s){this.compartment=e,this.inner=s}}class Xl{constructor(e,s,i,n,r,o){for(this.base=e,this.compartments=s,this.dynamicSlots=i,this.address=n,this.staticValues=r,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let s=this.address[e.id];return s==null?e.default:this.staticValues[s>>1]}static resolve(e,s,i){let n=[],r=Object.create(null),o=new Map;for(let h of O4(e,s,o))h instanceof Gt?n.push(h):(r[h.facet.id]||(r[h.facet.id]=[])).push(h);let l=Object.create(null),a=[],d=[];for(let h of n)l[h.id]=d.length<<1,d.push(m=>h.slot(m));let u=i?.config.facets;for(let h in r){let m=r[h],w=m[0].facet,_=u&&u[h]||[];if(m.every(C=>C.type==0))if(l[w.id]=a.length<<1|1,Vc(_,m))a.push(i.facet(w));else{let C=w.combine(m.map(M=>M.value));a.push(i&&w.compare(C,i.facet(w))?i.facet(w):C)}else{for(let C of m)C.type==0?(l[C.id]=a.length<<1|1,a.push(C.value)):(l[C.id]=d.length<<1,d.push(M=>C.dynamicSlot(M)));l[w.id]=d.length<<1,d.push(C=>$4(C,w,m))}}let f=d.map(h=>h(l));return new Xl(e,o,f,l,a,r)}}function O4(t,e,s){let i=[[],[],[],[],[]],n=new Map;function r(o,l){let a=n.get(o);if(a!=null){if(a<=l)return;let d=i[a].indexOf(o);d>-1&&i[a].splice(d,1),o instanceof hd&&s.delete(o.compartment)}if(n.set(o,l),Array.isArray(o))for(let d of o)r(d,l);else if(o instanceof hd){if(s.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let d=e.get(o.compartment)||o.inner;s.set(o.compartment,d),r(d,l)}else if(o instanceof Qg)r(o.inner,o.prec);else if(o instanceof Gt)i[l].push(o),o.provides&&r(o.provides,l);else if(o instanceof $l)i[l].push(o),o.facet.extensions&&r(o.facet.extensions,Sn.default);else{let d=o.extension;if(!d)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);r(d,l)}}return r(t,Sn.default),i.reduce((o,l)=>o.concat(l))}function eo(t,e){if(e&1)return 2;let s=e>>1,i=t.status[s];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;t.status[s]=4;let n=t.computeSlot(t,t.config.dynamicSlots[s]);return t.status[s]=2|n}function Ql(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const Zg=De.define(),pd=De.define({combine:t=>t.some(e=>e),static:!0}),e0=De.define({combine:t=>t.length?t[0]:void 0,static:!0}),t0=De.define(),s0=De.define(),i0=De.define(),n0=De.define({combine:t=>t.length?t[0]:!1});class Bi{constructor(e,s){this.type=e,this.value=s}static define(){return new P4}}class P4{of(e){return new Bi(this,e)}}class j4{constructor(e){this.map=e}of(e){return new We(this,e)}}class We{constructor(e,s){this.type=e,this.value=s}map(e){let s=this.type.map(this.value,e);return s===void 0?void 0:s==this.value?this:new We(this.type,s)}is(e){return this.type==e}static define(e={}){return new j4(e.map||(s=>s))}static mapEffects(e,s){if(!e.length)return e;let i=[];for(let n of e){let r=n.map(s);r&&i.push(r)}return i}}We.reconfigure=We.define();We.appendConfig=We.define();class jt{constructor(e,s,i,n,r,o){this.startState=e,this.changes=s,this.selection=i,this.effects=n,this.annotations=r,this.scrollIntoView=o,this._doc=null,this._state=null,i&&Xg(i,s.newLength),r.some(l=>l.type==jt.time)||(this.annotations=r.concat(jt.time.of(Date.now())))}static create(e,s,i,n,r,o){return new jt(e,s,i,n,r,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let s of this.annotations)if(s.type==e)return s.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let s=this.annotation(jt.userEvent);return!!(s&&(s==e||s.length>e.length&&s.slice(0,e.length)==e&&s[e.length]=="."))}}jt.time=Bi.define();jt.userEvent=Bi.define();jt.addToHistory=Bi.define();jt.remote=Bi.define();function R4(t,e){let s=[];for(let i=0,n=0;;){let r,o;if(i<t.length&&(n==e.length||e[n]>=t[i]))r=t[i++],o=t[i++];else if(n<e.length)r=e[n++],o=e[n++];else return s;!s.length||s[s.length-1]<r?s.push(r,o):s[s.length-1]<o&&(s[s.length-1]=o)}}function r0(t,e,s){var i;let n,r,o;return s?(n=e.changes,r=Pt.empty(e.changes.length),o=t.changes.compose(e.changes)):(n=e.changes.map(t.changes),r=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(n)),{changes:o,selection:e.selection?e.selection.map(r):(i=t.selection)===null||i===void 0?void 0:i.map(n),effects:We.mapEffects(t.effects,n).concat(We.mapEffects(e.effects,r)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function md(t,e,s){let i=e.selection,n=or(e.annotations);return e.userEvent&&(n=n.concat(jt.userEvent.of(e.userEvent))),{changes:e.changes instanceof Pt?e.changes:Pt.of(e.changes||[],s,t.facet(e0)),selection:i&&(i instanceof ie?i:ie.single(i.anchor,i.head)),effects:or(e.effects),annotations:n,scrollIntoView:!!e.scrollIntoView}}function o0(t,e,s){let i=md(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(s=!1);for(let r=1;r<e.length;r++){e[r].filter===!1&&(s=!1);let o=!!e[r].sequential;i=r0(i,md(t,e[r],o?i.changes.newLength:t.doc.length),o)}let n=jt.create(t,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return B4(s?L4(n):n)}function L4(t){let e=t.startState,s=!0;for(let n of e.facet(t0)){let r=n(t);if(r===!1){s=!1;break}Array.isArray(r)&&(s=s===!0?r:R4(s,r))}if(s!==!0){let n,r;if(s===!1)r=t.changes.invertedDesc,n=Pt.empty(e.doc.length);else{let o=t.changes.filter(s);n=o.changes,r=o.filtered.mapDesc(o.changes).invertedDesc}t=jt.create(e,n,t.selection&&t.selection.map(r),We.mapEffects(t.effects,r),t.annotations,t.scrollIntoView)}let i=e.facet(s0);for(let n=i.length-1;n>=0;n--){let r=i[n](t);r instanceof jt?t=r:Array.isArray(r)&&r.length==1&&r[0]instanceof jt?t=r[0]:t=o0(e,or(r),!1)}return t}function B4(t){let e=t.startState,s=e.facet(i0),i=t;for(let n=s.length-1;n>=0;n--){let r=s[n](t);r&&Object.keys(r).length&&(i=r0(i,md(e,r,t.changes.newLength),!0))}return i==t?t:jt.create(e,t.changes,t.selection,i.effects,i.annotations,i.scrollIntoView)}const I4=[];function or(t){return t==null?I4:Array.isArray(t)?t:[t]}var yt=(function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t})(yt||(yt={}));const U4=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let gd;try{gd=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function N4(t){if(gd)return gd.test(t);for(let e=0;e<t.length;e++){let s=t[e];if(/\w/.test(s)||s>""&&(s.toUpperCase()!=s.toLowerCase()||U4.test(s)))return!0}return!1}function z4(t){return e=>{if(!/\S/.test(e))return yt.Space;if(N4(e))return yt.Word;for(let s=0;s<t.length;s++)if(e.indexOf(t[s])>-1)return yt.Word;return yt.Other}}class Xe{constructor(e,s,i,n,r,o){this.config=e,this.doc=s,this.selection=i,this.values=n,this.status=e.statusTemplate.slice(),this.computeSlot=r,o&&(o._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)eo(this,l<<1);this.computeSlot=null}field(e,s=!0){let i=this.config.address[e.id];if(i==null){if(s)throw new RangeError("Field is not present in this state");return}return eo(this,i),Ql(this,i)}update(...e){return o0(this,e,!0)}applyTransaction(e){let s=this.config,{base:i,compartments:n}=s;for(let l of e.effects)l.is(Oa.reconfigure)?(s&&(n=new Map,s.compartments.forEach((a,d)=>n.set(d,a)),s=null),n.set(l.value.compartment,l.value.extension)):l.is(We.reconfigure)?(s=null,i=l.value):l.is(We.appendConfig)&&(s=null,i=or(i).concat(l.value));let r;s?r=e.startState.values.slice():(s=Xl.resolve(i,n,this),r=new Xe(s,this.doc,this.selection,s.dynamicSlots.map(()=>null),(a,d)=>d.reconfigure(a,this),null).values);let o=e.startState.facet(pd)?e.newSelection:e.newSelection.asSingle();new Xe(s,e.newDoc,o,r,(l,a)=>a.update(l,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(s=>({changes:{from:s.from,to:s.to,insert:e},range:ie.cursor(s.from+e.length)}))}changeByRange(e){let s=this.selection,i=e(s.ranges[0]),n=this.changes(i.changes),r=[i.range],o=or(i.effects);for(let l=1;l<s.ranges.length;l++){let a=e(s.ranges[l]),d=this.changes(a.changes),u=d.map(n);for(let h=0;h<l;h++)r[h]=r[h].map(u);let f=n.mapDesc(d,!0);r.push(a.range.map(f)),n=n.compose(u),o=We.mapEffects(o,u).concat(We.mapEffects(or(a.effects),f))}return{changes:n,selection:ie.create(r,s.mainIndex),effects:o}}changes(e=[]){return e instanceof Pt?e:Pt.of(e,this.doc.length,this.facet(Xe.lineSeparator))}toText(e){return Ze.of(e.split(this.facet(Xe.lineSeparator)||ud))}sliceDoc(e=0,s=this.doc.length){return this.doc.sliceString(e,s,this.lineBreak)}facet(e){let s=this.config.address[e.id];return s==null?e.default:(eo(this,s),Ql(this,s))}toJSON(e){let s={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let n=e[i];n instanceof Gt&&this.config.address[n.id]!=null&&(s[i]=n.spec.toJSON(this.field(e[i]),this))}return s}static fromJSON(e,s={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let n=[];if(i){for(let r in i)if(Object.prototype.hasOwnProperty.call(e,r)){let o=i[r],l=e[r];n.push(o.init(a=>o.spec.fromJSON(l,a)))}}return Xe.create({doc:e.doc,selection:ie.fromJSON(e.selection),extensions:s.extensions?n.concat([s.extensions]):n})}static create(e={}){let s=Xl.resolve(e.extensions||[],new Map),i=e.doc instanceof Ze?e.doc:Ze.of((e.doc||"").split(s.staticFacet(Xe.lineSeparator)||ud)),n=e.selection?e.selection instanceof ie?e.selection:ie.single(e.selection.anchor,e.selection.head):ie.single(0);return Xg(n,i.length),s.staticFacet(pd)||(n=n.asSingle()),new Xe(s,i,n,s.dynamicSlots.map(()=>null),(r,o)=>o.create(r),null)}get tabSize(){return this.facet(Xe.tabSize)}get lineBreak(){return this.facet(Xe.lineSeparator)||`
`}get readOnly(){return this.facet(n0)}phrase(e,...s){for(let i of this.facet(Xe.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return s.length&&(e=e.replace(/\$(\$|\d*)/g,(i,n)=>{if(n=="$")return"$";let r=+(n||1);return!r||r>s.length?i:s[r-1]})),e}languageDataAt(e,s,i=-1){let n=[];for(let r of this.facet(Zg))for(let o of r(this,s,i))Object.prototype.hasOwnProperty.call(o,e)&&n.push(o[e]);return n}charCategorizer(e){return z4(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:s,from:i,length:n}=this.doc.lineAt(e),r=this.charCategorizer(e),o=e-i,l=e-i;for(;o>0;){let a=qt(s,o,!1);if(r(s.slice(a,o))!=yt.Word)break;o=a}for(;l<n;){let a=qt(s,l);if(r(s.slice(l,a))!=yt.Word)break;l=a}return o==l?null:ie.range(o+i,l+i)}}Xe.allowMultipleSelections=pd;Xe.tabSize=De.define({combine:t=>t.length?t[0]:4});Xe.lineSeparator=e0;Xe.readOnly=n0;Xe.phrases=De.define({compare(t,e){let s=Object.keys(t),i=Object.keys(e);return s.length==i.length&&s.every(n=>t[n]==e[n])}});Xe.languageData=Zg;Xe.changeFilter=t0;Xe.transactionFilter=s0;Xe.transactionExtender=i0;Oa.reconfigure=We.define();function yi(t,e,s={}){let i={};for(let n of t)for(let r of Object.keys(n)){let o=n[r],l=i[r];if(l===void 0)i[r]=o;else if(!(l===o||o===void 0))if(Object.hasOwnProperty.call(s,r))i[r]=s[r](l,o);else throw new Error("Config merge conflict for field "+r)}for(let n in e)i[n]===void 0&&(i[n]=e[n]);return i}class Pn{eq(e){return this==e}range(e,s=e){return yd.create(e,s,this)}}Pn.prototype.startSide=Pn.prototype.endSide=0;Pn.prototype.point=!1;Pn.prototype.mapMode=cs.TrackDel;let yd=class l0{constructor(e,s,i){this.from=e,this.to=s,this.value=i}static create(e,s,i){return new l0(e,s,i)}};function vd(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class Mc{constructor(e,s,i,n){this.from=e,this.to=s,this.value=i,this.maxPoint=n}get length(){return this.to[this.to.length-1]}findIndex(e,s,i,n=0){let r=i?this.to:this.from;for(let o=n,l=r.length;;){if(o==l)return o;let a=o+l>>1,d=r[a]-e||(i?this.value[a].endSide:this.value[a].startSide)-s;if(a==o)return d>=0?o:l;d>=0?l=a:o=a+1}}between(e,s,i,n){for(let r=this.findIndex(s,-1e9,!0),o=this.findIndex(i,1e9,!1,r);r<o;r++)if(n(this.from[r]+e,this.to[r]+e,this.value[r])===!1)return!1}map(e,s){let i=[],n=[],r=[],o=-1,l=-1;for(let a=0;a<this.value.length;a++){let d=this.value[a],u=this.from[a]+e,f=this.to[a]+e,h,m;if(u==f){let w=s.mapPos(u,d.startSide,d.mapMode);if(w==null||(h=m=w,d.startSide!=d.endSide&&(m=s.mapPos(u,d.endSide),m<h)))continue}else if(h=s.mapPos(u,d.startSide),m=s.mapPos(f,d.endSide),h>m||h==m&&d.startSide>0&&d.endSide<=0)continue;(m-h||d.endSide-d.startSide)<0||(o<0&&(o=h),d.point&&(l=Math.max(l,m-h)),i.push(d),n.push(h-o),r.push(m-o))}return{mapped:i.length?new Mc(n,r,i,l):null,pos:o}}}class Qe{constructor(e,s,i,n){this.chunkPos=e,this.chunk=s,this.nextLayer=i,this.maxPoint=n}static create(e,s,i,n){return new Qe(e,s,i,n)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let s of this.chunk)e+=s.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:s=[],sort:i=!1,filterFrom:n=0,filterTo:r=this.length}=e,o=e.filter;if(s.length==0&&!o)return this;if(i&&(s=s.slice().sort(vd)),this.isEmpty)return s.length?Qe.of(s):this;let l=new a0(this,null,-1).goto(0),a=0,d=[],u=new Pi;for(;l.value||a<s.length;)if(a<s.length&&(l.from-s[a].from||l.startSide-s[a].value.startSide)>=0){let f=s[a++];u.addInner(f.from,f.to,f.value)||d.push(f)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(a==s.length||this.chunkEnd(l.chunkIndex)<s[a].from)&&(!o||n>this.chunkEnd(l.chunkIndex)||r<this.chunkPos[l.chunkIndex])&&u.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!o||n>l.to||r<l.from||o(l.from,l.to,l.value))&&(u.addInner(l.from,l.to,l.value)||d.push(yd.create(l.from,l.to,l.value))),l.next());return u.finishInner(this.nextLayer.isEmpty&&!d.length?Qe.empty:this.nextLayer.update({add:d,filter:o,filterFrom:n,filterTo:r}))}map(e){if(e.empty||this.isEmpty)return this;let s=[],i=[],n=-1;for(let o=0;o<this.chunk.length;o++){let l=this.chunkPos[o],a=this.chunk[o],d=e.touchesRange(l,l+a.length);if(d===!1)n=Math.max(n,a.maxPoint),s.push(a),i.push(e.mapPos(l));else if(d===!0){let{mapped:u,pos:f}=a.map(l,e);u&&(n=Math.max(n,u.maxPoint),s.push(u),i.push(f))}}let r=this.nextLayer.map(e);return s.length==0?r:new Qe(i,s,r||Qe.empty,n)}between(e,s,i){if(!this.isEmpty){for(let n=0;n<this.chunk.length;n++){let r=this.chunkPos[n],o=this.chunk[n];if(s>=r&&e<=r+o.length&&o.between(r,e-r,s-r,i)===!1)return}this.nextLayer.between(e,s,i)}}iter(e=0){return bo.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,s=0){return bo.from(e).goto(s)}static compare(e,s,i,n,r=-1){let o=e.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=r),l=s.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=r),a=Dh(o,l,i),d=new Pr(o,a,r),u=new Pr(l,a,r);i.iterGaps((f,h,m)=>Th(d,f,u,h,m,n)),i.empty&&i.length==0&&Th(d,0,u,0,0,n)}static eq(e,s,i=0,n){n==null&&(n=999999999);let r=e.filter(u=>!u.isEmpty&&s.indexOf(u)<0),o=s.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(r.length!=o.length)return!1;if(!r.length)return!0;let l=Dh(r,o),a=new Pr(r,l,0).goto(i),d=new Pr(o,l,0).goto(i);for(;;){if(a.to!=d.to||!bd(a.active,d.active)||a.point&&(!d.point||!a.point.eq(d.point)))return!1;if(a.to>n)return!0;a.next(),d.next()}}static spans(e,s,i,n,r=-1){let o=new Pr(e,null,r).goto(s),l=s,a=o.openStart;for(;;){let d=Math.min(o.to,i);if(o.point){let u=o.activeForPoint(o.to),f=o.pointFrom<s?u.length+1:o.point.startSide<0?u.length:Math.min(u.length,a);n.point(l,d,o.point,u,f,o.pointRank),a=Math.min(o.openEnd(d),u.length)}else d>l&&(n.span(l,d,o.active,a),a=o.openEnd(d));if(o.to>i)return a+(o.point&&o.to>i?1:0);l=o.to,o.next()}}static of(e,s=!1){let i=new Pi;for(let n of e instanceof yd?[e]:s?F4(e):e)i.add(n.from,n.to,n.value);return i.finish()}static join(e){if(!e.length)return Qe.empty;let s=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let n=e[i];n!=Qe.empty;n=n.nextLayer)s=new Qe(n.chunkPos,n.chunk,s,Math.max(n.maxPoint,s.maxPoint));return s}}Qe.empty=new Qe([],[],null,-1);function F4(t){if(t.length>1)for(let e=t[0],s=1;s<t.length;s++){let i=t[s];if(vd(e,i)>0)return t.slice().sort(vd);e=i}return t}Qe.empty.nextLayer=Qe.empty;class Pi{finishChunk(e){this.chunks.push(new Mc(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,s,i){this.addInner(e,s,i)||(this.nextLayer||(this.nextLayer=new Pi)).add(e,s,i)}addInner(e,s,i){let n=e-this.lastTo||i.startSide-this.last.endSide;if(n<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return n<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(s-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=s,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,s-e)),!0)}addChunk(e,s){if((e-this.lastTo||s.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,s.maxPoint),this.chunks.push(s),this.chunkPos.push(e);let i=s.value.length-1;return this.last=s.value[i],this.lastFrom=s.from[i]+e,this.lastTo=s.to[i]+e,!0}finish(){return this.finishInner(Qe.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let s=Qe.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,s}}function Dh(t,e,s){let i=new Map;for(let r of t)for(let o=0;o<r.chunk.length;o++)r.chunk[o].maxPoint<=0&&i.set(r.chunk[o],r.chunkPos[o]);let n=new Set;for(let r of e)for(let o=0;o<r.chunk.length;o++){let l=i.get(r.chunk[o]);l!=null&&(s?s.mapPos(l):l)==r.chunkPos[o]&&!s?.touchesRange(l,l+r.chunk[o].length)&&n.add(r.chunk[o])}return n}class a0{constructor(e,s,i,n=0){this.layer=e,this.skip=s,this.minPoint=i,this.rank=n}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,s=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,s,!1),this}gotoInner(e,s,i){for(;this.chunkIndex<this.layer.chunk.length;){let n=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(n)||this.layer.chunkEnd(this.chunkIndex)<e||n.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let n=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],s,!0);(!i||this.rangeIndex<n)&&this.setRangeIndex(n)}this.next()}forward(e,s){(this.to-e||this.endSide-s)<0&&this.gotoInner(e,s,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],s=this.layer.chunk[this.chunkIndex],i=e+s.from[this.rangeIndex];if(this.from=i,this.to=e+s.to[this.rangeIndex],this.value=s.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class bo{constructor(e){this.heap=e}static from(e,s=null,i=-1){let n=[];for(let r=0;r<e.length;r++)for(let o=e[r];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&n.push(new a0(o,s,i,r));return n.length==1?n[0]:new bo(n)}get startSide(){return this.value?this.value.startSide:0}goto(e,s=-1e9){for(let i of this.heap)i.goto(e,s);for(let i=this.heap.length>>1;i>=0;i--)yu(this.heap,i);return this.next(),this}forward(e,s){for(let i of this.heap)i.forward(e,s);for(let i=this.heap.length>>1;i>=0;i--)yu(this.heap,i);(this.to-e||this.value.endSide-s)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),yu(this.heap,0)}}}function yu(t,e){for(let s=t[e];;){let i=(e<<1)+1;if(i>=t.length)break;let n=t[i];if(i+1<t.length&&n.compare(t[i+1])>=0&&(n=t[i+1],i++),s.compare(n)<0)break;t[i]=s,t[e]=n,e=i}}class Pr{constructor(e,s,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=bo.from(e,s,i)}goto(e,s=-1e9){return this.cursor.goto(e,s),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=s,this.openStart=-1,this.next(),this}forward(e,s){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-s)<0;)this.removeActive(this.minActive);this.cursor.forward(e,s)}removeActive(e){il(this.active,e),il(this.activeTo,e),il(this.activeRank,e),this.minActive=Eh(this.active,this.activeTo)}addActive(e){let s=0,{value:i,to:n,rank:r}=this.cursor;for(;s<this.activeRank.length&&(r-this.activeRank[s]||n-this.activeTo[s])>0;)s++;nl(this.active,s,i),nl(this.activeTo,s,n),nl(this.activeRank,s,r),e&&nl(e,s,this.cursor.from),this.minActive=Eh(this.active,this.activeTo)}next(){let e=this.to,s=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let n=this.minActive;if(n>-1&&(this.activeTo[n]-this.cursor.from||this.active[n].endSide-this.cursor.startSide)<0){if(this.activeTo[n]>e){this.to=this.activeTo[n],this.endSide=this.active[n].endSide;break}this.removeActive(n),i&&il(i,n)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let r=this.cursor.value;if(!r.point)this.addActive(i),this.cursor.next();else if(s&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=r,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=r.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let n=i.length-1;n>=0&&i[n]<e;n--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let s=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&s.push(this.active[i]);return s.reverse()}openEnd(e){let s=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)s++;return s}}function Th(t,e,s,i,n,r){t.goto(e),s.goto(i);let o=i+n,l=i,a=i-e;for(;;){let d=t.to+a-s.to,u=d||t.endSide-s.endSide,f=u<0?t.to+a:s.to,h=Math.min(f,o);if(t.point||s.point?t.point&&s.point&&(t.point==s.point||t.point.eq(s.point))&&bd(t.activeForPoint(t.to),s.activeForPoint(s.to))||r.comparePoint(l,h,t.point,s.point):h>l&&!bd(t.active,s.active)&&r.compareRange(l,h,t.active,s.active),f>o)break;(d||t.openEnd!=s.openEnd)&&r.boundChange&&r.boundChange(f),l=f,u<=0&&t.next(),u>=0&&s.next()}}function bd(t,e){if(t.length!=e.length)return!1;for(let s=0;s<t.length;s++)if(t[s]!=e[s]&&!t[s].eq(e[s]))return!1;return!0}function il(t,e){for(let s=e,i=t.length-1;s<i;s++)t[s]=t[s+1];t.pop()}function nl(t,e,s){for(let i=t.length-1;i>=e;i--)t[i+1]=t[i];t[e]=s}function Eh(t,e){let s=-1,i=1e9;for(let n=0;n<e.length;n++)(e[n]-i||t[n].endSide-t[s].endSide)<0&&(s=n,i=e[n]);return s}function Ar(t,e,s=t.length){let i=0;for(let n=0;n<s&&n<t.length;)t.charCodeAt(n)==9?(i+=e-i%e,n++):(i++,n=qt(t,n));return i}function xd(t,e,s,i){for(let n=0,r=0;;){if(r>=e)return n;if(n==t.length)break;r+=t.charCodeAt(n)==9?s-r%s:1,n=qt(t,n)}return i===!0?-1:t.length}const kd="",$h=typeof Symbol>"u"?"__"+kd:Symbol.for(kd),wd=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Oh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class on{constructor(e,s){this.rules=[];let{finish:i}=s||{};function n(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function r(o,l,a,d){let u=[],f=/^@(\w+)\b/.exec(o[0]),h=f&&f[1]=="keyframes";if(f&&l==null)return a.push(o[0]+";");for(let m in l){let w=l[m];if(/&/.test(m))r(m.split(/,\s*/).map(_=>o.map(C=>_.replace(/&/,C))).reduce((_,C)=>_.concat(C)),w,a);else if(w&&typeof w=="object"){if(!f)throw new RangeError("The value of a property ("+m+") should be a primitive value.");r(n(m),w,u,h)}else w!=null&&u.push(m.replace(/_.*/,"").replace(/[A-Z]/g,_=>"-"+_.toLowerCase())+": "+w+";")}(u.length||h)&&a.push((i&&!f&&!d?o.map(i):o).join(", ")+" {"+u.join(" ")+"}")}for(let o in e)r(n(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=Oh[$h]||1;return Oh[$h]=e+1,kd+e.toString(36)}static mount(e,s,i){let n=e[wd],r=i&&i.nonce;n?r&&n.setNonce(r):n=new H4(e,r),n.mount(Array.isArray(s)?s:[s],e)}}let Ph=new Map;class H4{constructor(e,s){let i=e.ownerDocument||e,n=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&n.CSSStyleSheet){let r=Ph.get(i);if(r)return e[wd]=r;this.sheet=new n.CSSStyleSheet,Ph.set(i,this)}else this.styleTag=i.createElement("style"),s&&this.styleTag.setAttribute("nonce",s);this.modules=[],e[wd]=this}mount(e,s){let i=this.sheet,n=0,r=0;for(let o=0;o<e.length;o++){let l=e[o],a=this.modules.indexOf(l);if(a<r&&a>-1&&(this.modules.splice(a,1),r--,a=-1),a==-1){if(this.modules.splice(r++,0,l),i)for(let d=0;d<l.rules.length;d++)i.insertRule(l.rules[d],n++)}else{for(;r<a;)n+=this.modules[r++].rules.length;n+=l.rules.length,r++}}if(i)s.adoptedStyleSheets.indexOf(this.sheet)<0&&(s.adoptedStyleSheets=[this.sheet,...s.adoptedStyleSheets]);else{let o="";for(let a=0;a<this.modules.length;a++)o+=this.modules[a].getRules()+`
`;this.styleTag.textContent=o;let l=s.head||s;this.styleTag.parentNode!=l&&l.insertBefore(this.styleTag,l.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var ln={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},xo={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},W4=typeof navigator<"u"&&/Mac/.test(navigator.platform),q4=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Ft=0;Ft<10;Ft++)ln[48+Ft]=ln[96+Ft]=String(Ft);for(var Ft=1;Ft<=24;Ft++)ln[Ft+111]="F"+Ft;for(var Ft=65;Ft<=90;Ft++)ln[Ft]=String.fromCharCode(Ft+32),xo[Ft]=String.fromCharCode(Ft);for(var vu in ln)xo.hasOwnProperty(vu)||(xo[vu]=ln[vu]);function G4(t){var e=W4&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||q4&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",s=!e&&t.key||(t.shiftKey?xo:ln)[t.keyCode]||t.key||"Unidentified";return s=="Esc"&&(s="Escape"),s=="Del"&&(s="Delete"),s=="Left"&&(s="ArrowLeft"),s=="Up"&&(s="ArrowUp"),s=="Right"&&(s="ArrowRight"),s=="Down"&&(s="ArrowDown"),s}function ut(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,s=arguments[1];if(s&&typeof s=="object"&&s.nodeType==null&&!Array.isArray(s)){for(var i in s)if(Object.prototype.hasOwnProperty.call(s,i)){var n=s[i];typeof n=="string"?t.setAttribute(i,n):n!=null&&(t[i]=n)}e++}for(;e<arguments.length;e++)u0(t,arguments[e]);return t}function u0(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var s=0;s<e.length;s++)u0(t,e[s]);else throw new RangeError("Unsupported child node: "+e)}let us=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Sd=typeof document<"u"?document:{documentElement:{style:{}}};const _d=/Edge\/(\d+)/.exec(us.userAgent),d0=/MSIE \d/.test(us.userAgent),Cd=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(us.userAgent),Pa=!!(d0||Cd||_d),jh=!Pa&&/gecko\/(\d+)/i.test(us.userAgent),bu=!Pa&&/Chrome\/(\d+)/.exec(us.userAgent),K4="webkitFontSmoothing"in Sd.documentElement.style,Ad=!Pa&&/Apple Computer/.test(us.vendor),Rh=Ad&&(/Mobile\/\w+/.test(us.userAgent)||us.maxTouchPoints>2);var Ce={mac:Rh||/Mac/.test(us.platform),windows:/Win/.test(us.platform),linux:/Linux|X11/.test(us.platform),ie:Pa,ie_version:d0?Sd.documentMode||6:Cd?+Cd[1]:_d?+_d[1]:0,gecko:jh,gecko_version:jh?+(/Firefox\/(\d+)/.exec(us.userAgent)||[0,0])[1]:0,chrome:!!bu,chrome_version:bu?+bu[1]:0,ios:Rh,android:/Android\b/.test(us.userAgent),webkit_version:K4?+(/\bAppleWebKit\/(\d+)/.exec(us.userAgent)||[0,0])[1]:0,safari:Ad,safari_version:Ad?+(/\bVersion\/(\d+(\.\d+)?)/.exec(us.userAgent)||[0,0])[1]:0,tabSize:Sd.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function ko(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function Vd(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function Ol(t,e){if(!e.anchorNode)return!1;try{return Vd(t,e.anchorNode)}catch{return!1}}function wo(t){return t.nodeType==3?Rn(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function to(t,e,s,i){return s?Lh(t,e,s,i,-1)||Lh(t,e,s,i,1):!1}function jn(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function Zl(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function Lh(t,e,s,i,n){for(;;){if(t==s&&e==i)return!0;if(e==(n<0?0:gi(t))){if(t.nodeName=="DIV")return!1;let r=t.parentNode;if(!r||r.nodeType!=1)return!1;e=jn(t)+(n<0?0:1),t=r}else if(t.nodeType==1){if(t=t.childNodes[e+(n<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=n<0?gi(t):0}else return!1}}function gi(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function ja(t,e){let s=e?t.left:t.right;return{left:s,right:s,top:t.top,bottom:t.bottom}}function J4(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function c0(t,e){let s=e.width/t.offsetWidth,i=e.height/t.offsetHeight;return(s>.995&&s<1.005||!isFinite(s)||Math.abs(e.width-t.offsetWidth)<1)&&(s=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-t.offsetHeight)<1)&&(i=1),{scaleX:s,scaleY:i}}function Y4(t,e,s,i,n,r,o,l){let a=t.ownerDocument,d=a.defaultView||window;for(let u=t,f=!1;u&&!f;)if(u.nodeType==1){let h,m=u==a.body,w=1,_=1;if(m)h=J4(d);else{if(/^(fixed|sticky)$/.test(getComputedStyle(u).position)&&(f=!0),u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let U=u.getBoundingClientRect();({scaleX:w,scaleY:_}=c0(u,U)),h={left:U.left,right:U.left+u.clientWidth*w,top:U.top,bottom:U.top+u.clientHeight*_}}let C=0,M=0;if(n=="nearest")e.top<h.top?(M=e.top-(h.top+o),s>0&&e.bottom>h.bottom+M&&(M=e.bottom-h.bottom+o)):e.bottom>h.bottom&&(M=e.bottom-h.bottom+o,s<0&&e.top-M<h.top&&(M=e.top-(h.top+o)));else{let U=e.bottom-e.top,$=h.bottom-h.top;M=(n=="center"&&U<=$?e.top+U/2-$/2:n=="start"||n=="center"&&s<0?e.top-o:e.bottom-$+o)-h.top}if(i=="nearest"?e.left<h.left?(C=e.left-(h.left+r),s>0&&e.right>h.right+C&&(C=e.right-h.right+r)):e.right>h.right&&(C=e.right-h.right+r,s<0&&e.left<h.left+C&&(C=e.left-(h.left+r))):C=(i=="center"?e.left+(e.right-e.left)/2-(h.right-h.left)/2:i=="start"==l?e.left-r:e.right-(h.right-h.left)+r)-h.left,C||M)if(m)d.scrollBy(C,M);else{let U=0,$=0;if(M){let D=u.scrollTop;u.scrollTop+=M/_,$=(u.scrollTop-D)*_}if(C){let D=u.scrollLeft;u.scrollLeft+=C/w,U=(u.scrollLeft-D)*w}e={left:e.left-U,top:e.top-$,right:e.right-U,bottom:e.bottom-$},U&&Math.abs(U-C)<1&&(i="nearest"),$&&Math.abs($-M)<1&&(n="nearest")}if(m)break;(e.top<h.top||e.bottom>h.bottom||e.left<h.left||e.right>h.right)&&(e={left:Math.max(e.left,h.left),right:Math.min(e.right,h.right),top:Math.max(e.top,h.top),bottom:Math.min(e.bottom,h.bottom)}),u=u.assignedSlot||u.parentNode}else if(u.nodeType==11)u=u.host;else break}function X4(t){let e=t.ownerDocument,s,i;for(let n=t.parentNode;n&&!(n==e.body||s&&i);)if(n.nodeType==1)!i&&n.scrollHeight>n.clientHeight&&(i=n),!s&&n.scrollWidth>n.clientWidth&&(s=n),n=n.assignedSlot||n.parentNode;else if(n.nodeType==11)n=n.host;else break;return{x:s,y:i}}class Q4{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:s,focusNode:i}=e;this.set(s,Math.min(e.anchorOffset,s?gi(s):0),i,Math.min(e.focusOffset,i?gi(i):0))}set(e,s,i,n){this.anchorNode=e,this.anchorOffset=s,this.focusNode=i,this.focusOffset=n}}let kn=null;Ce.safari&&Ce.safari_version>=26&&(kn=!1);function f0(t){if(t.setActive)return t.setActive();if(kn)return t.focus(kn);let e=[];for(let s=t;s&&(e.push(s,s.scrollTop,s.scrollLeft),s!=s.ownerDocument);s=s.parentNode);if(t.focus(kn==null?{get preventScroll(){return kn={preventScroll:!0},!0}}:void 0),!kn){kn=!1;for(let s=0;s<e.length;){let i=e[s++],n=e[s++],r=e[s++];i.scrollTop!=n&&(i.scrollTop=n),i.scrollLeft!=r&&(i.scrollLeft=r)}}}let Bh;function Rn(t,e,s=e){let i=Bh||(Bh=document.createRange());return i.setEnd(t,s),i.setStart(t,e),i}function lr(t,e,s,i){let n={key:e,code:e,keyCode:s,which:s,cancelable:!0};i&&({altKey:n.altKey,ctrlKey:n.ctrlKey,shiftKey:n.shiftKey,metaKey:n.metaKey}=i);let r=new KeyboardEvent("keydown",n);r.synthetic=!0,t.dispatchEvent(r);let o=new KeyboardEvent("keyup",n);return o.synthetic=!0,t.dispatchEvent(o),r.defaultPrevented||o.defaultPrevented}function Z4(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function h0(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function e_(t,e){let s=e.focusNode,i=e.focusOffset;if(!s||e.anchorNode!=s||e.anchorOffset!=i)return!1;for(i=Math.min(i,gi(s));;)if(i){if(s.nodeType!=1)return!1;let n=s.childNodes[i-1];n.contentEditable=="false"?i--:(s=n,i=gi(s))}else{if(s==t)return!0;i=jn(s),s=s.parentNode}}function p0(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function m0(t,e){for(let s=t,i=e;;){if(s.nodeType==3&&i>0)return{node:s,offset:i};if(s.nodeType==1&&i>0){if(s.contentEditable=="false")return null;s=s.childNodes[i-1],i=gi(s)}else if(s.parentNode&&!Zl(s))i=jn(s),s=s.parentNode;else return null}}function g0(t,e){for(let s=t,i=e;;){if(s.nodeType==3&&i<s.nodeValue.length)return{node:s,offset:i};if(s.nodeType==1&&i<s.childNodes.length){if(s.contentEditable=="false")return null;s=s.childNodes[i],i=0}else if(s.parentNode&&!Zl(s))i=jn(s)+1,s=s.parentNode;else return null}}class Qt{constructor(e,s,i=!0){this.node=e,this.offset=s,this.precise=i}static before(e,s){return new Qt(e.parentNode,jn(e),s)}static after(e,s){return new Qt(e.parentNode,jn(e)+1,s)}}const Dc=[];class lt{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let s=this.posAtStart;for(let i of this.children){if(i==e)return s;s+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,s){if(this.flags&2){let i=this.dom,n=null,r;for(let o of this.children){if(o.flags&7){if(!o.dom&&(r=n?n.nextSibling:i.firstChild)){let l=lt.get(r);(!l||!l.parent&&l.canReuseDOM(o))&&o.reuseDOM(r)}o.sync(e,s),o.flags&=-8}if(r=n?n.nextSibling:i.firstChild,s&&!s.written&&s.node==i&&r!=o.dom&&(s.written=!0),o.dom.parentNode==i)for(;r&&r!=o.dom;)r=Ih(r);else i.insertBefore(o.dom,r);n=o.dom}for(r=n?n.nextSibling:i.firstChild,r&&s&&s.node==i&&(s.written=!0);r;)r=Ih(r)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,s),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,s){let i;if(e==this.dom)i=this.dom.childNodes[s];else{let n=gi(e)==0?0:s==0?-1:1;for(;;){let r=e.parentNode;if(r==this.dom)break;n==0&&r.firstChild!=r.lastChild&&(e==r.firstChild?n=-1:n=1),e=r}n<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!lt.get(i);)i=i.nextSibling;if(!i)return this.length;for(let n=0,r=0;;n++){let o=this.children[n];if(o.dom==i)return r;r+=o.length+o.breakAfter}}domBoundsAround(e,s,i=0){let n=-1,r=-1,o=-1,l=-1;for(let a=0,d=i,u=i;a<this.children.length;a++){let f=this.children[a],h=d+f.length;if(d<e&&h>s)return f.domBoundsAround(e,s,d);if(h>=e&&n==-1&&(n=a,r=d),d>s&&f.dom.parentNode==this.dom){o=a,l=u;break}u=h,d=h+f.breakAfter}return{from:r,to:l<0?i+this.length:l,startDOM:(n?this.children[n-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let s=this.parent;s;s=s.parent){if(e&&(s.flags|=2),s.flags&1)return;s.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let s=e.parent;if(!s)return e;e=s}}replaceChildren(e,s,i=Dc){this.markDirty();for(let n=e;n<s;n++){let r=this.children[n];r.parent==this&&i.indexOf(r)<0&&r.destroy()}i.length<250?this.children.splice(e,s-e,...i):this.children=[].concat(this.children.slice(0,e),i,this.children.slice(s));for(let n=0;n<i.length;n++)i[n].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new y0(this.children,e,this.children.length)}childPos(e,s=1){return this.childCursor().findPos(e,s)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,s,i,n,r,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}lt.prototype.breakAfter=0;function Ih(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class y0{constructor(e,s,i){this.children=e,this.pos=s,this.i=i,this.off=0}findPos(e,s=1){for(;;){if(e>this.pos||e==this.pos&&(s>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function v0(t,e,s,i,n,r,o,l,a){let{children:d}=t,u=d.length?d[e]:null,f=r.length?r[r.length-1]:null,h=f?f.breakAfter:o;if(!(e==i&&u&&!o&&!h&&r.length<2&&u.merge(s,n,r.length?f:null,s==0,l,a))){if(i<d.length){let m=d[i];m&&(n<m.length||m.breakAfter&&f?.breakAfter)?(e==i&&(m=m.split(n),n=0),!h&&f&&m.merge(0,n,f,!0,0,a)?r[r.length-1]=m:((n||m.children.length&&!m.children[0].length)&&m.merge(0,n,null,!1,0,a),r.push(m))):m?.breakAfter&&(f?f.breakAfter=1:o=1),i++}for(u&&(u.breakAfter=o,s>0&&(!o&&r.length&&u.merge(s,u.length,r[0],!1,l,0)?u.breakAfter=r.shift().breakAfter:(s<u.length||u.children.length&&u.children[u.children.length-1].length==0)&&u.merge(s,u.length,null,!1,l,0),e++));e<i&&r.length;)if(d[i-1].become(r[r.length-1]))i--,r.pop(),a=r.length?0:l;else if(d[e].become(r[0]))e++,r.shift(),l=r.length?0:a;else break;!r.length&&e&&i<d.length&&!d[e-1].breakAfter&&d[i].merge(0,0,d[e-1],!1,l,a)&&e--,(e<i||r.length)&&t.replaceChildren(e,i,r)}}function b0(t,e,s,i,n,r){let o=t.childCursor(),{i:l,off:a}=o.findPos(s,1),{i:d,off:u}=o.findPos(e,-1),f=e-s;for(let h of i)f+=h.length;t.length+=f,v0(t,d,u,l,a,i,0,n,r)}const t_=256;class Ks extends lt{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,s){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(s&&s.node==this.dom&&(s.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,s,i){return this.flags&8||i&&(!(i instanceof Ks)||this.length-(s-e)+i.length>t_||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(s),this.markDirty(),!0)}split(e){let s=new Ks(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),s.flags|=this.flags&8,s}localPosFromDOM(e,s){return e==this.dom?s:s?this.text.length:0}domAtPos(e){return new Qt(this.dom,e)}domBoundsAround(e,s,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,s){return s_(this.dom,e,s)}}class ji extends lt{constructor(e,s=[],i=0){super(),this.mark=e,this.children=s,this.length=i;for(let n of s)n.setParent(this)}setAttrs(e){if(h0(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let s in this.mark.attrs)e.setAttribute(s,this.mark.attrs[s]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,s){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,s)}merge(e,s,i,n,r,o){return i&&(!(i instanceof ji&&i.mark.eq(this.mark))||e&&r<=0||s<this.length&&o<=0)?!1:(b0(this,e,s,i?i.children.slice():[],r-1,o-1),this.markDirty(),!0)}split(e){let s=[],i=0,n=-1,r=0;for(let l of this.children){let a=i+l.length;a>e&&s.push(i<e?l.split(e-i):l),n<0&&i>=e&&(n=r),i=a,r++}let o=this.length-e;return this.length=e,n>-1&&(this.children.length=n,this.markDirty()),new ji(this.mark,s,o)}domAtPos(e){return x0(this,e)}coordsAt(e,s){return w0(this,e,s)}}function s_(t,e,s){let i=t.nodeValue.length;e>i&&(e=i);let n=e,r=e,o=0;e==0&&s<0||e==i&&s>=0?Ce.chrome||Ce.gecko||(e?(n--,o=1):r<i&&(r++,o=-1)):s<0?n--:r<i&&r++;let l=Rn(t,n,r).getClientRects();if(!l.length)return null;let a=l[(o?o<0:s>=0)?0:l.length-1];return Ce.safari&&!o&&a.width==0&&(a=Array.prototype.find.call(l,d=>d.width)||a),o?ja(a,o<0):a||null}class Xi extends lt{static create(e,s,i){return new Xi(e,s,i)}constructor(e,s,i){super(),this.widget=e,this.length=s,this.side=i,this.prevWidget=null}split(e){let s=Xi.create(this.widget,this.length-e,this.side);return this.length-=e,s}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,s,i,n,r,o){return i&&(!(i instanceof Xi)||!this.widget.compare(i.widget)||e>0&&r<=0||s<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-s),!0)}become(e){return e instanceof Xi&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Ze.empty;let e=this;for(;e.parent;)e=e.parent;let{view:s}=e,i=s&&s.state.doc,n=this.posAtStart;return i?i.slice(n,n+this.length):Ze.empty}domAtPos(e){return(this.length?e==0:this.side>0)?Qt.before(this.dom):Qt.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,s){let i=this.widget.coordsAt(this.dom,e,s);if(i)return i;let n=this.dom.getClientRects(),r=null;if(!n.length)return null;let o=this.side?this.side<0:e>0;for(let l=o?n.length-1:0;r=n[l],!(e>0?l==0:l==n.length-1||r.top<r.bottom);l+=o?-1:1);return ja(r,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class mr extends lt{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof mr&&e.side==this.side}split(){return new mr(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?Qt.before(this.dom):Qt.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Ze.empty}get isHidden(){return!0}}Ks.prototype.children=Xi.prototype.children=mr.prototype.children=Dc;function x0(t,e){let s=t.dom,{children:i}=t,n=0;for(let r=0;n<i.length;n++){let o=i[n],l=r+o.length;if(!(l==r&&o.getSide()<=0)){if(e>r&&e<l&&o.dom.parentNode==s)return o.domAtPos(e-r);if(e<=r)break;r=l}}for(let r=n;r>0;r--){let o=i[r-1];if(o.dom.parentNode==s)return o.domAtPos(o.length)}for(let r=n;r<i.length;r++){let o=i[r];if(o.dom.parentNode==s)return o.domAtPos(0)}return new Qt(s,0)}function k0(t,e,s){let i,{children:n}=t;s>0&&e instanceof ji&&n.length&&(i=n[n.length-1])instanceof ji&&i.mark.eq(e.mark)?k0(i,e.children[0],s-1):(n.push(e),e.setParent(t)),t.length+=e.length}function w0(t,e,s){let i=null,n=-1,r=null,o=-1;function l(d,u){for(let f=0,h=0;f<d.children.length&&h<=u;f++){let m=d.children[f],w=h+m.length;w>=u&&(m.children.length?l(m,u-h):(!r||r.isHidden&&(s>0||n_(r,m)))&&(w>u||h==w&&m.getSide()>0)?(r=m,o=u-h):(h<u||h==w&&m.getSide()<0&&!m.isHidden)&&(i=m,n=u-h)),h=w}}l(t,e);let a=(s<0?i:r)||i||r;return a?a.coordsAt(Math.max(0,a==i?n:o),s):i_(t)}function i_(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let s=wo(e);return s[s.length-1]||null}function n_(t,e){let s=t.coordsAt(0,1),i=e.coordsAt(0,1);return s&&i&&i.top<s.bottom}function Md(t,e){for(let s in t)s=="class"&&e.class?e.class+=" "+t.class:s=="style"&&e.style?e.style+=";"+t.style:e[s]=t[s];return e}const Uh=Object.create(null);function ea(t,e,s){if(t==e)return!0;t||(t=Uh),e||(e=Uh);let i=Object.keys(t),n=Object.keys(e);if(i.length-(s&&i.indexOf(s)>-1?1:0)!=n.length-(s&&n.indexOf(s)>-1?1:0))return!1;for(let r of i)if(r!=s&&(n.indexOf(r)==-1||t[r]!==e[r]))return!1;return!0}function Dd(t,e,s){let i=!1;if(e)for(let n in e)s&&n in s||(i=!0,n=="style"?t.style.cssText="":t.removeAttribute(n));if(s)for(let n in s)e&&e[n]==s[n]||(i=!0,n=="style"?t.style.cssText=s[n]:t.setAttribute(n,s[n]));return i}function r_(t){let e=Object.create(null);for(let s=0;s<t.attributes.length;s++){let i=t.attributes[s];e[i.name]=i.value}return e}class cn{eq(e){return!1}updateDOM(e,s){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,s,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var fs=(function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t})(fs||(fs={}));class Ie extends Pn{constructor(e,s,i,n){super(),this.startSide=e,this.endSide=s,this.widget=i,this.spec=n}get heightRelevant(){return!1}static mark(e){return new Io(e)}static widget(e){let s=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return s+=i&&!e.inlineOrder?s>0?3e8:-4e8:s>0?1e8:-1e8,new an(e,s,s,i,e.widget||null,!1)}static replace(e){let s=!!e.block,i,n;if(e.isBlockGap)i=-5e8,n=4e8;else{let{start:r,end:o}=S0(e,s);i=(r?s?-3e8:-1:5e8)-1,n=(o?s?2e8:1:-6e8)+1}return new an(e,i,n,s,e.widget||null,!0)}static line(e){return new Uo(e)}static set(e,s=!1){return Qe.of(e,s)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Ie.none=Qe.empty;class Io extends Ie{constructor(e){let{start:s,end:i}=S0(e);super(s?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var s,i;return this==e||e instanceof Io&&this.tagName==e.tagName&&(this.class||((s=this.attrs)===null||s===void 0?void 0:s.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&ea(this.attrs,e.attrs,"class")}range(e,s=e){if(e>=s)throw new RangeError("Mark decorations may not be empty");return super.range(e,s)}}Io.prototype.point=!1;class Uo extends Ie{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Uo&&this.spec.class==e.spec.class&&ea(this.spec.attributes,e.spec.attributes)}range(e,s=e){if(s!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,s)}}Uo.prototype.mapMode=cs.TrackBefore;Uo.prototype.point=!0;class an extends Ie{constructor(e,s,i,n,r,o){super(s,i,r,e),this.block=n,this.isReplace=o,this.mapMode=n?s<=0?cs.TrackBefore:cs.TrackAfter:cs.TrackDel}get type(){return this.startSide!=this.endSide?fs.WidgetRange:this.startSide<=0?fs.WidgetBefore:fs.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof an&&o_(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,s=e){if(this.isReplace&&(e>s||e==s&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&s!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,s)}}an.prototype.point=!0;function S0(t,e=!1){let{inclusiveStart:s,inclusiveEnd:i}=t;return s==null&&(s=t.inclusive),i==null&&(i=t.inclusive),{start:s??e,end:i??e}}function o_(t,e){return t==e||!!(t&&e&&t.compare(e))}function Pl(t,e,s,i=0){let n=s.length-1;n>=0&&s[n]+i>=t?s[n]=Math.max(s[n],e):s.push(t,e)}class Tt extends lt{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,s,i,n,r,o){if(i){if(!(i instanceof Tt))return!1;this.dom||i.transferDOM(this)}return n&&this.setDeco(i?i.attrs:null),b0(this,e,s,i?i.children.slice():[],r,o),!0}split(e){let s=new Tt;if(s.breakAfter=this.breakAfter,this.length==0)return s;let{i,off:n}=this.childPos(e);n&&(s.append(this.children[i].split(n),0),this.children[i].merge(n,this.children[i].length,null,!1,0,0),i++);for(let r=i;r<this.children.length;r++)s.append(this.children[r],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,s}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){ea(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,s){k0(this,e,s)}addLineDeco(e){let s=e.spec.attributes,i=e.spec.class;s&&(this.attrs=Md(s,this.attrs||{})),i&&(this.attrs=Md({class:i},this.attrs||{}))}domAtPos(e){return x0(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,s){var i;this.dom?this.flags&4&&(h0(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(Dd(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,s);let n=this.dom.lastChild;for(;n&&lt.get(n)instanceof ji;)n=n.lastChild;if(!n||!this.length||n.nodeName!="BR"&&((i=lt.get(n))===null||i===void 0?void 0:i.isEditable)==!1&&(!Ce.ios||!this.children.some(r=>r instanceof Ks))){let r=document.createElement("BR");r.cmIgnore=!0,this.dom.appendChild(r)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,s;for(let i of this.children){if(!(i instanceof Ks)||/[^ -~]/.test(i.text))return null;let n=wo(i.dom);if(n.length!=1)return null;e+=n[0].width,s=n[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:s}:null}coordsAt(e,s){let i=w0(this,e,s);if(!this.children.length&&i&&this.parent){let{heightOracle:n}=this.parent.view.viewState,r=i.bottom-i.top;if(Math.abs(r-n.lineHeight)<2&&n.textHeight<r){let o=(r-n.textHeight)/2;return{top:i.top+o,bottom:i.bottom-o,left:i.left,right:i.left}}}return i}become(e){return e instanceof Tt&&this.children.length==0&&e.children.length==0&&ea(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,s){for(let i=0,n=0;i<e.children.length;i++){let r=e.children[i],o=n+r.length;if(o>=s){if(r instanceof Tt)return r;if(o>s)break}n=o+r.breakAfter}return null}}class Ei extends lt{constructor(e,s,i){super(),this.widget=e,this.length=s,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,s,i,n,r,o){return i&&(!(i instanceof Ei)||!this.widget.compare(i.widget)||e>0&&r<=0||s<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-s),!0)}domAtPos(e){return e==0?Qt.before(this.dom):Qt.after(this.dom,e==this.length)}split(e){let s=this.length-e;this.length=e;let i=new Ei(this.widget,s,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return Dc}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Ze.empty}domBoundsAround(){return null}become(e){return e instanceof Ei&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,s){let i=this.widget.coordsAt(this.dom,e,s);return i||(this.widget instanceof Td?null:ja(this.dom.getBoundingClientRect(),this.length?e==0:s<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:s,endSide:i}=this.deco;return s==i?!1:e<0?s<0:i>0}}class Td extends cn{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class so{constructor(e,s,i,n){this.doc=e,this.pos=s,this.end=i,this.disallowBlockEffectsFor=n,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=s}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Ei&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Tt),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(rl(new mr(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Ei)&&this.getLine()}buildText(e,s,i){for(;e>0;){if(this.textOff==this.text.length){let{value:o,lineBreak:l,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(l){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=o,this.textOff=0}let n=Math.min(this.text.length-this.textOff,e),r=Math.min(n,512);this.flushBuffer(s.slice(s.length-i)),this.getLine().append(rl(new Ks(this.text.slice(this.textOff,this.textOff+r)),s),i),this.atCursorPos=!0,this.textOff+=r,e-=r,i=n<=r?0:s.length}}span(e,s,i,n){this.buildText(s-e,i,n),this.pos=s,this.openStart<0&&(this.openStart=n)}point(e,s,i,n,r,o){if(this.disallowBlockEffectsFor[o]&&i instanceof an){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(s>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=s-e;if(i instanceof an)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Ei(i.widget||gr.block,l,i));else{let a=Xi.create(i.widget||gr.inline,l,l?0:i.startSide),d=this.atCursorPos&&!a.isEditable&&r<=n.length&&(e<s||i.startSide>0),u=!a.isEditable&&(e<s||r>n.length||i.startSide<=0),f=this.getLine();this.pendingBuffer==2&&!d&&!a.isEditable&&(this.pendingBuffer=0),this.flushBuffer(n),d&&(f.append(rl(new mr(1),n),r),r=n.length+Math.max(0,r-n.length)),f.append(rl(a,n),r),this.atCursorPos=u,this.pendingBuffer=u?e<s||r>n.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=n.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=s),this.openStart<0&&(this.openStart=r)}static build(e,s,i,n,r){let o=new so(e,s,i,r);return o.openEnd=Qe.spans(n,s,i,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function rl(t,e){for(let s of e)t=new ji(s,[t],t.length);return t}class gr extends cn{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}gr.inline=new gr("span");gr.block=new gr("div");var mt=(function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t})(mt||(mt={}));const Ln=mt.LTR,Tc=mt.RTL;function _0(t){let e=[];for(let s=0;s<t.length;s++)e.push(1<<+t[s]);return e}const l_=_0("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),a_=_0("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Ed=Object.create(null),si=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),s=t.charCodeAt(1);Ed[e]=s,Ed[s]=-e}function C0(t){return t<=247?l_[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?a_[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const u_=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Qi{get dir(){return this.level%2?Tc:Ln}constructor(e,s,i){this.from=e,this.to=s,this.level=i}side(e,s){return this.dir==s==e?this.to:this.from}forward(e,s){return e==(this.dir==s)}static find(e,s,i,n){let r=-1;for(let o=0;o<e.length;o++){let l=e[o];if(l.from<=s&&l.to>=s){if(l.level==i)return o;(r<0||(n!=0?n<0?l.from<s:l.to>s:e[r].level>l.level))&&(r=o)}}if(r<0)throw new RangeError("Index out of range");return r}}function A0(t,e){if(t.length!=e.length)return!1;for(let s=0;s<t.length;s++){let i=t[s],n=e[s];if(i.from!=n.from||i.to!=n.to||i.direction!=n.direction||!A0(i.inner,n.inner))return!1}return!0}const dt=[];function d_(t,e,s,i,n){for(let r=0;r<=i.length;r++){let o=r?i[r-1].to:e,l=r<i.length?i[r].from:s,a=r?256:n;for(let d=o,u=a,f=a;d<l;d++){let h=C0(t.charCodeAt(d));h==512?h=u:h==8&&f==4&&(h=16),dt[d]=h==4?2:h,h&7&&(f=h),u=h}for(let d=o,u=a,f=a;d<l;d++){let h=dt[d];if(h==128)d<l-1&&u==dt[d+1]&&u&24?h=dt[d]=u:dt[d]=256;else if(h==64){let m=d+1;for(;m<l&&dt[m]==64;)m++;let w=d&&u==8||m<s&&dt[m]==8?f==1?1:8:256;for(let _=d;_<m;_++)dt[_]=w;d=m-1}else h==8&&f==1&&(dt[d]=1);u=h,h&7&&(f=h)}}}function c_(t,e,s,i,n){let r=n==1?2:1;for(let o=0,l=0,a=0;o<=i.length;o++){let d=o?i[o-1].to:e,u=o<i.length?i[o].from:s;for(let f=d,h,m,w;f<u;f++)if(m=Ed[h=t.charCodeAt(f)])if(m<0){for(let _=l-3;_>=0;_-=3)if(si[_+1]==-m){let C=si[_+2],M=C&2?n:C&4?C&1?r:n:0;M&&(dt[f]=dt[si[_]]=M),l=_;break}}else{if(si.length==189)break;si[l++]=f,si[l++]=h,si[l++]=a}else if((w=dt[f])==2||w==1){let _=w==n;a=_?0:1;for(let C=l-3;C>=0;C-=3){let M=si[C+2];if(M&2)break;if(_)si[C+2]|=2;else{if(M&4)break;si[C+2]|=4}}}}}function f_(t,e,s,i){for(let n=0,r=i;n<=s.length;n++){let o=n?s[n-1].to:t,l=n<s.length?s[n].from:e;for(let a=o;a<l;){let d=dt[a];if(d==256){let u=a+1;for(;;)if(u==l){if(n==s.length)break;u=s[n++].to,l=n<s.length?s[n].from:e}else if(dt[u]==256)u++;else break;let f=r==1,h=(u<e?dt[u]:i)==1,m=f==h?f?1:2:i;for(let w=u,_=n,C=_?s[_-1].to:t;w>a;)w==C&&(w=s[--_].from,C=_?s[_-1].to:t),dt[--w]=m;a=u}else r=d,a++}}}function $d(t,e,s,i,n,r,o){let l=i%2?2:1;if(i%2==n%2)for(let a=e,d=0;a<s;){let u=!0,f=!1;if(d==r.length||a<r[d].from){let _=dt[a];_!=l&&(u=!1,f=_==16)}let h=!u&&l==1?[]:null,m=u?i:i+1,w=a;e:for(;;)if(d<r.length&&w==r[d].from){if(f)break e;let _=r[d];if(!u)for(let C=_.to,M=d+1;;){if(C==s)break e;if(M<r.length&&r[M].from==C)C=r[M++].to;else{if(dt[C]==l)break e;break}}if(d++,h)h.push(_);else{_.from>a&&o.push(new Qi(a,_.from,m));let C=_.direction==Ln!=!(m%2);Od(t,C?i+1:i,n,_.inner,_.from,_.to,o),a=_.to}w=_.to}else{if(w==s||(u?dt[w]!=l:dt[w]==l))break;w++}h?$d(t,a,w,i+1,n,h,o):a<w&&o.push(new Qi(a,w,m)),a=w}else for(let a=s,d=r.length;a>e;){let u=!0,f=!1;if(!d||a>r[d-1].to){let _=dt[a-1];_!=l&&(u=!1,f=_==16)}let h=!u&&l==1?[]:null,m=u?i:i+1,w=a;e:for(;;)if(d&&w==r[d-1].to){if(f)break e;let _=r[--d];if(!u)for(let C=_.from,M=d;;){if(C==e)break e;if(M&&r[M-1].to==C)C=r[--M].from;else{if(dt[C-1]==l)break e;break}}if(h)h.push(_);else{_.to<a&&o.push(new Qi(_.to,a,m));let C=_.direction==Ln!=!(m%2);Od(t,C?i+1:i,n,_.inner,_.from,_.to,o),a=_.from}w=_.from}else{if(w==e||(u?dt[w-1]!=l:dt[w-1]==l))break;w--}h?$d(t,w,a,i+1,n,h,o):w<a&&o.push(new Qi(w,a,m)),a=w}}function Od(t,e,s,i,n,r,o){let l=e%2?2:1;d_(t,n,r,i,l),c_(t,n,r,i,l),f_(n,r,i,l),$d(t,n,r,e,s,i,o)}function h_(t,e,s){if(!t)return[new Qi(0,0,e==Tc?1:0)];if(e==Ln&&!s.length&&!u_.test(t))return V0(t.length);if(s.length)for(;t.length>dt.length;)dt[dt.length]=256;let i=[],n=e==Ln?0:1;return Od(t,n,n,s,0,t.length,i),i}function V0(t){return[new Qi(0,t,0)]}let M0="";function p_(t,e,s,i,n){var r;let o=i.head-t.from,l=Qi.find(e,o,(r=i.bidiLevel)!==null&&r!==void 0?r:-1,i.assoc),a=e[l],d=a.side(n,s);if(o==d){let h=l+=n?1:-1;if(h<0||h>=e.length)return null;a=e[l=h],o=a.side(!n,s),d=a.side(n,s)}let u=qt(t.text,o,a.forward(n,s));(u<a.from||u>a.to)&&(u=d),M0=t.text.slice(Math.min(o,u),Math.max(o,u));let f=l==(n?e.length-1:0)?null:e[l+(n?1:-1)];return f&&u==d&&f.level+(n?0:1)<a.level?ie.cursor(f.side(!n,s)+t.from,f.forward(n,s)?1:-1,f.level):ie.cursor(u+t.from,a.forward(n,s)?-1:1,a.level)}function m_(t,e,s){for(let i=e;i<s;i++){let n=C0(t.charCodeAt(i));if(n==1)return Ln;if(n==2||n==4)return Tc}return Ln}const D0=De.define(),T0=De.define(),E0=De.define(),$0=De.define(),Pd=De.define(),O0=De.define(),P0=De.define(),Ec=De.define(),$c=De.define(),j0=De.define({combine:t=>t.some(e=>e)}),R0=De.define({combine:t=>t.some(e=>e)}),L0=De.define();class ar{constructor(e,s="nearest",i="nearest",n=5,r=5,o=!1){this.range=e,this.y=s,this.x=i,this.yMargin=n,this.xMargin=r,this.isSnapshot=o}map(e){return e.empty?this:new ar(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new ar(ie.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const ol=We.define({map:(t,e)=>t.map(e)}),B0=We.define();function ys(t,e,s){let i=t.facet($0);i.length?i[0](e):window.onerror&&window.onerror(String(e),s,void 0,void 0,e)||(s?console.error(s+":",e):console.error(e))}const Ti=De.define({combine:t=>t.length?t[0]:!0});let g_=0;const Jn=De.define({combine(t){return t.filter((e,s)=>{for(let i=0;i<s;i++)if(t[i].plugin==e.plugin)return!1;return!0})}});class Et{constructor(e,s,i,n,r){this.id=e,this.create=s,this.domEventHandlers=i,this.domEventObservers=n,this.baseExtensions=r(this),this.extension=this.baseExtensions.concat(Jn.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(Jn.of({plugin:this,arg:e}))}static define(e,s){const{eventHandlers:i,eventObservers:n,provide:r,decorations:o}=s||{};return new Et(g_++,e,i,n,l=>{let a=[];return o&&a.push(So.of(d=>{let u=d.plugin(l);return u?o(u):Ie.none})),r&&a.push(r(l)),a})}static fromClass(e,s){return Et.define((i,n)=>new e(i,n),s)}}class xu{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let s=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(s)}catch(i){if(ys(s.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(s){ys(e.state,s,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var s;if(!((s=this.value)===null||s===void 0)&&s.destroy)try{this.value.destroy()}catch(i){ys(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const I0=De.define(),Oc=De.define(),So=De.define(),U0=De.define(),No=De.define(),N0=De.define();function Nh(t,e){let s=t.state.facet(N0);if(!s.length)return s;let i=s.map(r=>r instanceof Function?r(t):r),n=[];return Qe.spans(i,e.from,e.to,{point(){},span(r,o,l,a){let d=r-e.from,u=o-e.from,f=n;for(let h=l.length-1;h>=0;h--,a--){let m=l[h].spec.bidiIsolate,w;if(m==null&&(m=m_(e.text,d,u)),a>0&&f.length&&(w=f[f.length-1]).to==d&&w.direction==m)w.to=u,f=w.inner;else{let _={from:d,to:u,direction:m,inner:[]};f.push(_),f=_.inner}}}}),n}const z0=De.define();function Pc(t){let e=0,s=0,i=0,n=0;for(let r of t.state.facet(z0)){let o=r(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(s=Math.max(s,o.right)),o.top!=null&&(i=Math.max(i,o.top)),o.bottom!=null&&(n=Math.max(n,o.bottom)))}return{left:e,right:s,top:i,bottom:n}}const Ur=De.define();class js{constructor(e,s,i,n){this.fromA=e,this.toA=s,this.fromB=i,this.toB=n}join(e){return new js(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let s=e.length,i=this;for(;s>0;s--){let n=e[s-1];if(!(n.fromA>i.toA)){if(n.toA<i.fromA)break;i=i.join(n),e.splice(s-1,1)}}return e.splice(s,0,i),e}static extendWithRanges(e,s){if(s.length==0)return e;let i=[];for(let n=0,r=0,o=0,l=0;;n++){let a=n==e.length?null:e[n],d=o-l,u=a?a.fromB:1e9;for(;r<s.length&&s[r]<u;){let f=s[r],h=s[r+1],m=Math.max(l,f),w=Math.min(u,h);if(m<=w&&new js(m+d,w+d,m,w).addToSet(i),h>u)break;r+=2}if(!a)return i;new js(a.fromA,a.toA,a.fromB,a.toB).addToSet(i),o=a.toA,l=a.toB}}}class ta{constructor(e,s,i){this.view=e,this.state=s,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=Pt.empty(this.startState.doc.length);for(let r of i)this.changes=this.changes.compose(r.changes);let n=[];this.changes.iterChangedRanges((r,o,l,a)=>n.push(new js(r,o,l,a))),this.changedRanges=n}static create(e,s,i){return new ta(e,s,i)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class zh extends lt{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Ie.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Tt],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new js(0,0,0,e.state.doc.length)],0,null)}update(e){var s;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:d,toA:u})=>u<this.minWidthFrom||d>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let n=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((s=this.domChanged)===null||s===void 0)&&s.newSel?n=this.domChanged.newSel.head:!S_(e.changes,this.hasComposition)&&!e.selectionSet&&(n=e.state.selection.main.head));let r=n>-1?v_(this.view,e.changes,n):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:d,to:u}=this.hasComposition;i=new js(d,u,e.changes.mapPos(d,-1),e.changes.mapPos(u,1)).addToSet(i.slice())}this.hasComposition=r?{from:r.range.fromB,to:r.range.toB}:null,(Ce.ie||Ce.chrome)&&!r&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,l=this.updateDeco(),a=k_(o,l,e.changes);return i=js.extendWithRanges(i,a),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,e.startState.doc.length,r),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,s,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,s,i);let{observer:n}=this.view;n.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=Ce.chrome||Ce.ios?{node:n.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||n.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof Ei&&o.widget instanceof Td&&r.push(o.dom);n.updateGaps(r)}updateChildren(e,s,i){let n=i?i.range.addToSet(e.slice()):e,r=this.childCursor(s);for(let o=n.length-1;;o--){let l=o>=0?n[o]:null;if(!l)break;let{fromA:a,toA:d,fromB:u,toB:f}=l,h,m,w,_;if(i&&i.range.fromB<f&&i.range.toB>u){let D=so.build(this.view.state.doc,u,i.range.fromB,this.decorations,this.dynamicDecorationMap),N=so.build(this.view.state.doc,i.range.toB,f,this.decorations,this.dynamicDecorationMap);m=D.breakAtStart,w=D.openStart,_=N.openEnd;let q=this.compositionView(i);N.breakAtStart?q.breakAfter=1:N.content.length&&q.merge(q.length,q.length,N.content[0],!1,N.openStart,0)&&(q.breakAfter=N.content[0].breakAfter,N.content.shift()),D.content.length&&q.merge(0,0,D.content[D.content.length-1],!0,0,D.openEnd)&&D.content.pop(),h=D.content.concat(q).concat(N.content)}else({content:h,breakAtStart:m,openStart:w,openEnd:_}=so.build(this.view.state.doc,u,f,this.decorations,this.dynamicDecorationMap));let{i:C,off:M}=r.findPos(d,1),{i:U,off:$}=r.findPos(a,-1);v0(this,U,$,C,M,h,m,w,_)}i&&this.fixCompositionDOM(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let s of e.transactions)for(let i of s.effects)i.is(B0)&&(this.editContextFormatting=i.value)}compositionView(e){let s=new Ks(e.text.nodeValue);s.flags|=8;for(let{deco:n}of e.marks)s=new ji(n,[s],s.length);let i=new Tt;return i.append(s,0),i}fixCompositionDOM(e){let s=(r,o)=>{o.flags|=8|(o.children.some(a=>a.flags&7)?1:0),this.markedForComposition.add(o);let l=lt.get(r);l&&l!=o&&(l.dom=null),o.setDOM(r)},i=this.childPos(e.range.fromB,1),n=this.children[i.i];s(e.line,n);for(let r=e.marks.length-1;r>=-1;r--)i=n.childPos(i.off,1),n=n.children[i.i],s(r>=0?e.marks[r].node:e.text,n)}updateSelection(e=!1,s=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,n=i==this.dom,r=!n&&!(this.view.state.facet(Ti)||this.dom.tabIndex>-1)&&Ol(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(n||s||r))return;let o=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(l.anchor)),d=l.empty?a:this.moveToLine(this.domAtPos(l.head));if(Ce.gecko&&l.empty&&!this.hasComposition&&y_(a)){let f=document.createTextNode("");this.view.observer.ignore(()=>a.node.insertBefore(f,a.node.childNodes[a.offset]||null)),a=d=new Qt(f,0),o=!0}let u=this.view.observer.selectionRange;(o||!u.focusNode||(!to(a.node,a.offset,u.anchorNode,u.anchorOffset)||!to(d.node,d.offset,u.focusNode,u.focusOffset))&&!this.suppressWidgetCursorChange(u,l))&&(this.view.observer.ignore(()=>{Ce.android&&Ce.chrome&&this.dom.contains(u.focusNode)&&w_(u.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let f=ko(this.view.root);if(f)if(l.empty){if(Ce.gecko){let h=b_(a.node,a.offset);if(h&&h!=3){let m=(h==1?m0:g0)(a.node,a.offset);m&&(a=new Qt(m.node,m.offset))}}f.collapse(a.node,a.offset),l.bidiLevel!=null&&f.caretBidiLevel!==void 0&&(f.caretBidiLevel=l.bidiLevel)}else if(f.extend){f.collapse(a.node,a.offset);try{f.extend(d.node,d.offset)}catch{}}else{let h=document.createRange();l.anchor>l.head&&([a,d]=[d,a]),h.setEnd(d.node,d.offset),h.setStart(a.node,a.offset),f.removeAllRanges(),f.addRange(h)}r&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(a,d)),this.impreciseAnchor=a.precise?null:new Qt(u.anchorNode,u.anchorOffset),this.impreciseHead=d.precise?null:new Qt(u.focusNode,u.focusOffset)}suppressWidgetCursorChange(e,s){return this.hasComposition&&s.empty&&to(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==s.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,s=e.state.selection.main,i=ko(e.root),{anchorNode:n,anchorOffset:r}=e.observer.selectionRange;if(!i||!s.empty||!s.assoc||!i.modify)return;let o=Tt.find(this,s.head);if(!o)return;let l=o.posAtStart;if(s.head==l||s.head==l+o.length)return;let a=this.coordsAt(s.head,-1),d=this.coordsAt(s.head,1);if(!a||!d||a.bottom>d.top)return;let u=this.domAtPos(s.head+s.assoc);i.collapse(u.node,u.offset),i.modify("move",s.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let f=e.observer.selectionRange;e.docView.posFromDOM(f.anchorNode,f.anchorOffset)!=s.from&&i.collapse(n,r)}moveToLine(e){let s=this.dom,i;if(e.node!=s)return e;for(let n=e.offset;!i&&n<s.childNodes.length;n++){let r=lt.get(s.childNodes[n]);r instanceof Tt&&(i=r.domAtPos(0))}for(let n=e.offset-1;!i&&n>=0;n--){let r=lt.get(s.childNodes[n]);r instanceof Tt&&(i=r.domAtPos(r.length))}return i?new Qt(i.node,i.offset,!0):e}nearest(e){for(let s=e;s;){let i=lt.get(s);if(i&&i.rootView==this)return i;s=s.parentNode}return null}posFromDOM(e,s){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,s)+i.posAtStart}domAtPos(e){let{i:s,off:i}=this.childCursor().findPos(e,-1);for(;s<this.children.length-1;){let n=this.children[s];if(i<n.length||n instanceof Tt)break;s++,i=0}return this.children[s].domAtPos(i)}coordsAt(e,s){let i=null,n=0;for(let r=this.length,o=this.children.length-1;o>=0;o--){let l=this.children[o],a=r-l.breakAfter,d=a-l.length;if(a<e)break;if(d<=e&&(d<e||l.covers(-1))&&(a>e||l.covers(1))&&(!i||l instanceof Tt&&!(i instanceof Tt&&s>=0)))i=l,n=d;else if(i&&d==e&&a==e&&l instanceof Ei&&Math.abs(s)<2){if(l.deco.startSide<0)break;o&&(i=null)}r=d}return i?i.coordsAt(e-n,s):null}coordsForChar(e){let{i:s,off:i}=this.childPos(e,1),n=this.children[s];if(!(n instanceof Tt))return null;for(;n.children.length;){let{i:l,off:a}=n.childPos(i,1);for(;;l++){if(l==n.children.length)return null;if((n=n.children[l]).length)break}i=a}if(!(n instanceof Ks))return null;let r=qt(n.text,i);if(r==i)return null;let o=Rn(n.dom,i,r).getClientRects();for(let l=0;l<o.length;l++){let a=o[l];if(l==o.length-1||a.top<a.bottom&&a.left<a.right)return a}return null}measureVisibleLineHeights(e){let s=[],{from:i,to:n}=e,r=this.view.contentDOM.clientWidth,o=r>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,a=this.view.textDirection==mt.LTR;for(let d=0,u=0;u<this.children.length;u++){let f=this.children[u],h=d+f.length;if(h>n)break;if(d>=i){let m=f.dom.getBoundingClientRect();if(s.push(m.height),o){let w=f.dom.lastChild,_=w?wo(w):[];if(_.length){let C=_[_.length-1],M=a?C.right-m.left:m.right-C.left;M>l&&(l=M,this.minWidth=r,this.minWidthFrom=d,this.minWidthTo=h)}}}d=h+f.breakAfter}return s}textDirectionAt(e){let{i:s}=this.childPos(e,1);return getComputedStyle(this.children[s].dom).direction=="rtl"?mt.RTL:mt.LTR}measureTextSize(){for(let r of this.children)if(r instanceof Tt){let o=r.measureTextSize();if(o)return o}let e=document.createElement("div"),s,i,n;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let r=wo(e.firstChild)[0];s=e.getBoundingClientRect().height,i=r?r.width/27:7,n=r?r.height:s,e.remove()}),{lineHeight:s,charWidth:i,textHeight:n}}childCursor(e=this.length){let s=this.children.length;return s&&(e-=this.children[--s].length),new y0(this.children,e,s)}computeBlockGapDeco(){let e=[],s=this.view.viewState;for(let i=0,n=0;;n++){let r=n==s.viewports.length?null:s.viewports[n],o=r?r.from-1:this.length;if(o>i){let l=(s.lineBlockAt(o).bottom-s.lineBlockAt(i).top)/this.view.scaleY;e.push(Ie.replace({widget:new Td(l),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!r)break;i=r.to+1}return Ie.set(e)}updateDeco(){let e=1,s=this.view.state.facet(So).map(r=>(this.dynamicDecorationMap[e++]=typeof r=="function")?r(this.view):r),i=!1,n=this.view.state.facet(U0).map((r,o)=>{let l=typeof r=="function";return l&&(i=!0),l?r(this.view):r});for(n.length&&(this.dynamicDecorationMap[e++]=i,s.push(Qe.join(n))),this.decorations=[this.editContextFormatting,...s,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let d=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=d.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let d of this.view.state.facet(L0))try{if(d(this.view,e.range,e))return!0}catch(u){ys(this.view.state,u,"scroll handler")}let{range:s}=e,i=this.coordsAt(s.head,s.empty?s.assoc:s.head>s.anchor?-1:1),n;if(!i)return;!s.empty&&(n=this.coordsAt(s.anchor,s.anchor>s.head?-1:1))&&(i={left:Math.min(i.left,n.left),top:Math.min(i.top,n.top),right:Math.max(i.right,n.right),bottom:Math.max(i.bottom,n.bottom)});let r=Pc(this.view),o={left:i.left-r.left,top:i.top-r.top,right:i.right+r.right,bottom:i.bottom+r.bottom},{offsetWidth:l,offsetHeight:a}=this.view.scrollDOM;Y4(this.view.scrollDOM,o,s.head<s.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,l),-l),Math.max(Math.min(e.yMargin,a),-a),this.view.textDirection==mt.LTR)}}function y_(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function F0(t,e){let s=t.observer.selectionRange;if(!s.focusNode)return null;let i=m0(s.focusNode,s.focusOffset),n=g0(s.focusNode,s.focusOffset),r=i||n;if(n&&i&&n.node!=i.node){let l=lt.get(n.node);if(!l||l instanceof Ks&&l.text!=n.node.nodeValue)r=n;else if(t.docView.lastCompositionAfterCursor){let a=lt.get(i.node);!a||a instanceof Ks&&a.text!=i.node.nodeValue||(r=n)}}if(t.docView.lastCompositionAfterCursor=r!=i,!r)return null;let o=e-r.offset;return{from:o,to:o+r.node.nodeValue.length,node:r.node}}function v_(t,e,s){let i=F0(t,s);if(!i)return null;let{node:n,from:r,to:o}=i,l=n.nodeValue;if(/[\n\r]/.test(l)||t.state.doc.sliceString(i.from,i.to)!=l)return null;let a=e.invertedDesc,d=new js(a.mapPos(r),a.mapPos(o),r,o),u=[];for(let f=n.parentNode;;f=f.parentNode){let h=lt.get(f);if(h instanceof ji)u.push({node:f,deco:h.mark});else{if(h instanceof Tt||f.nodeName=="DIV"&&f.parentNode==t.contentDOM)return{range:d,text:n,marks:u,line:f};if(f!=t.contentDOM)u.push({node:f,deco:new Io({inclusive:!0,attributes:r_(f),tagName:f.tagName.toLowerCase()})});else return null}}}function b_(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let x_=class{constructor(){this.changes=[]}compareRange(e,s){Pl(e,s,this.changes)}comparePoint(e,s){Pl(e,s,this.changes)}boundChange(e){Pl(e,e,this.changes)}};function k_(t,e,s){let i=new x_;return Qe.compare(t,e,s,i),i.changes}function w_(t,e){for(let s=t;s&&s!=e;s=s.assignedSlot||s.parentNode)if(s.nodeType==1&&s.contentEditable=="false")return!0;return!1}function S_(t,e){let s=!1;return e&&t.iterChangedRanges((i,n)=>{i<e.to&&n>e.from&&(s=!0)}),s}function __(t,e,s=1){let i=t.charCategorizer(e),n=t.doc.lineAt(e),r=e-n.from;if(n.length==0)return ie.cursor(e);r==0?s=1:r==n.length&&(s=-1);let o=r,l=r;s<0?o=qt(n.text,r,!1):l=qt(n.text,r);let a=i(n.text.slice(o,l));for(;o>0;){let d=qt(n.text,o,!1);if(i(n.text.slice(d,o))!=a)break;o=d}for(;l<n.length;){let d=qt(n.text,l);if(i(n.text.slice(l,d))!=a)break;l=d}return ie.range(o+n.from,l+n.from)}function C_(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function A_(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function ku(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function Fh(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function Hh(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function jd(t,e,s){let i,n,r,o,l=!1,a,d,u,f;for(let w=t.firstChild;w;w=w.nextSibling){let _=wo(w);for(let C=0;C<_.length;C++){let M=_[C];n&&ku(n,M)&&(M=Fh(Hh(M,n.bottom),n.top));let U=C_(e,M),$=A_(s,M);if(U==0&&$==0)return w.nodeType==3?Wh(w,e,s):jd(w,e,s);(!i||o>$||o==$&&r>U)&&(i=w,n=M,r=U,o=$,l=U?e<M.left?C>0:C<_.length-1:!0),U==0?s>M.bottom&&(!u||u.bottom<M.bottom)?(a=w,u=M):s<M.top&&(!f||f.top>M.top)&&(d=w,f=M):u&&ku(u,M)?u=Hh(u,M.bottom):f&&ku(f,M)&&(f=Fh(f,M.top))}}if(u&&u.bottom>=s?(i=a,n=u):f&&f.top<=s&&(i=d,n=f),!i)return{node:t,offset:0};let h=Math.max(n.left,Math.min(n.right,e));if(i.nodeType==3)return Wh(i,h,s);if(l&&i.contentEditable!="false")return jd(i,h,s);let m=Array.prototype.indexOf.call(t.childNodes,i)+(e>=(n.left+n.right)/2?1:0);return{node:t,offset:m}}function Wh(t,e,s){let i=t.nodeValue.length,n=-1,r=1e9,o=0;for(let l=0;l<i;l++){let a=Rn(t,l,l+1).getClientRects();for(let d=0;d<a.length;d++){let u=a[d];if(u.top==u.bottom)continue;o||(o=e-u.left);let f=(u.top>s?u.top-s:s-u.bottom)-1;if(u.left-1<=e&&u.right+1>=e&&f<r){let h=e>=(u.left+u.right)/2,m=h;if((Ce.chrome||Ce.gecko)&&Rn(t,l).getBoundingClientRect().left==u.right&&(m=!h),f<=0)return{node:t,offset:l+(m?1:0)};n=l+(m?1:0),r=f}}}return{node:t,offset:n>-1?n:o>0?t.nodeValue.length:0}}function H0(t,e,s,i=-1){var n,r;let o=t.contentDOM.getBoundingClientRect(),l=o.top+t.viewState.paddingTop,a,{docHeight:d}=t.viewState,{x:u,y:f}=e,h=f-l;if(h<0)return 0;if(h>d)return t.state.doc.length;for(let D=t.viewState.heightOracle.textHeight/2,N=!1;a=t.elementAtHeight(h),a.type!=fs.Text;)for(;h=i>0?a.bottom+D:a.top-D,!(h>=0&&h<=d);){if(N)return s?null:0;N=!0,i=-i}f=l+h;let m=a.from;if(m<t.viewport.from)return t.viewport.from==0?0:s?null:qh(t,o,a,u,f);if(m>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:s?null:qh(t,o,a,u,f);let w=t.dom.ownerDocument,_=t.root.elementFromPoint?t.root:w,C=_.elementFromPoint(u,f);C&&!t.contentDOM.contains(C)&&(C=null),C||(u=Math.max(o.left+1,Math.min(o.right-1,u)),C=_.elementFromPoint(u,f),C&&!t.contentDOM.contains(C)&&(C=null));let M,U=-1;if(C&&((n=t.docView.nearest(C))===null||n===void 0?void 0:n.isEditable)!=!1){if(w.caretPositionFromPoint){let D=w.caretPositionFromPoint(u,f);D&&({offsetNode:M,offset:U}=D)}else if(w.caretRangeFromPoint){let D=w.caretRangeFromPoint(u,f);D&&({startContainer:M,startOffset:U}=D)}M&&(!t.contentDOM.contains(M)||Ce.safari&&V_(M,U,u)||Ce.chrome&&M_(M,U,u))&&(M=void 0),M&&(U=Math.min(gi(M),U))}if(!M||!t.docView.dom.contains(M)){let D=Tt.find(t.docView,m);if(!D)return h>a.top+a.height/2?a.to:a.from;({node:M,offset:U}=jd(D.dom,u,f))}let $=t.docView.nearest(M);if(!$)return null;if($.isWidget&&((r=$.dom)===null||r===void 0?void 0:r.nodeType)==1){let D=$.dom.getBoundingClientRect();return e.y<D.top||e.y<=D.bottom&&e.x<=(D.left+D.right)/2?$.posAtStart:$.posAtEnd}else return $.localPosFromDOM(M,U)+$.posAtStart}function qh(t,e,s,i,n){let r=Math.round((i-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&s.height>t.defaultLineHeight*1.5){let l=t.viewState.heightOracle.textHeight,a=Math.floor((n-s.top-(t.defaultLineHeight-l)*.5)/l);r+=a*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(s.from,s.to);return s.from+xd(o,r,t.state.tabSize)}function W0(t,e,s){let i,n=t;if(t.nodeType!=3||e!=(i=t.nodeValue.length))return!1;for(;;){let r=n.nextSibling;if(r){if(r.nodeName=="BR")break;return!1}else{let o=n.parentNode;if(!o||o.nodeName=="DIV")break;n=o}}return Rn(t,i-1,i).getBoundingClientRect().right>s}function V_(t,e,s){return W0(t,e,s)}function M_(t,e,s){if(e!=0)return W0(t,e,s);for(let n=t;;){let r=n.parentNode;if(!r||r.nodeType!=1||r.firstChild!=n)return!1;if(r.classList.contains("cm-line"))break;n=r}let i=t.nodeType==1?t.getBoundingClientRect():Rn(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return s-i.left>5}function Rd(t,e,s){let i=t.lineBlockAt(e);if(Array.isArray(i.type)){let n;for(let r of i.type){if(r.from>e)break;if(!(r.to<e)){if(r.from<e&&r.to>e)return r;(!n||r.type==fs.Text&&(n.type!=r.type||(s<0?r.from<e:r.to>e)))&&(n=r)}}return n||i}return i}function D_(t,e,s,i){let n=Rd(t,e.head,e.assoc||-1),r=!i||n.type!=fs.Text||!(t.lineWrapping||n.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>n.from?e.head-1:e.head);if(r){let o=t.dom.getBoundingClientRect(),l=t.textDirectionAt(n.from),a=t.posAtCoords({x:s==(l==mt.LTR)?o.right-1:o.left+1,y:(r.top+r.bottom)/2});if(a!=null)return ie.cursor(a,s?-1:1)}return ie.cursor(s?n.to:n.from,s?-1:1)}function Gh(t,e,s,i){let n=t.state.doc.lineAt(e.head),r=t.bidiSpans(n),o=t.textDirectionAt(n.from);for(let l=e,a=null;;){let d=p_(n,r,o,l,s),u=M0;if(!d){if(n.number==(s?t.state.doc.lines:1))return l;u=`
`,n=t.state.doc.line(n.number+(s?1:-1)),r=t.bidiSpans(n),d=t.visualLineSide(n,!s)}if(a){if(!a(u))return l}else{if(!i)return d;a=i(u)}l=d}}function T_(t,e,s){let i=t.state.charCategorizer(e),n=i(s);return r=>{let o=i(r);return n==yt.Space&&(n=o),n==o}}function E_(t,e,s,i){let n=e.head,r=s?1:-1;if(n==(s?t.state.doc.length:0))return ie.cursor(n,e.assoc);let o=e.goalColumn,l,a=t.contentDOM.getBoundingClientRect(),d=t.coordsAtPos(n,e.assoc||-1),u=t.documentTop;if(d)o==null&&(o=d.left-a.left),l=r<0?d.top:d.bottom;else{let m=t.viewState.lineBlockAt(n);o==null&&(o=Math.min(a.right-a.left,t.defaultCharacterWidth*(n-m.from))),l=(r<0?m.top:m.bottom)+u}let f=a.left+o,h=i??t.viewState.heightOracle.textHeight>>1;for(let m=0;;m+=10){let w=l+(h+m)*r,_=H0(t,{x:f,y:w},!1,r);if(w<a.top||w>a.bottom||(r<0?_<n:_>n)){let C=t.docView.coordsForChar(_),M=!C||w<C.top?-1:1;return ie.cursor(_,M,void 0,o)}}}function io(t,e,s){for(;;){let i=0;for(let n of t)n.between(e-1,e+1,(r,o,l)=>{if(e>r&&e<o){let a=i||s||(e-r<o-e?-1:1);e=a<0?r:o,i=a}});if(!i)return e}}function q0(t,e){let s=null;for(let i=0;i<e.ranges.length;i++){let n=e.ranges[i],r=null;if(n.empty){let o=io(t,n.from,0);o!=n.from&&(r=ie.cursor(o,-1))}else{let o=io(t,n.from,-1),l=io(t,n.to,1);(o!=n.from||l!=n.to)&&(r=ie.range(n.from==n.anchor?o:l,n.from==n.head?o:l))}r&&(s||(s=e.ranges.slice()),s[i]=r)}return s?ie.create(s,e.mainIndex):e}function wu(t,e,s){let i=io(t.state.facet(No).map(n=>n(t)),s.from,e.head>s.from?-1:1);return i==s.from?s:ie.cursor(i,i<s.from?1:-1)}const Nr="";class $_{constructor(e,s){this.points=e,this.text="",this.lineSeparator=s.facet(Xe.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Nr}readRange(e,s){if(!e)return this;let i=e.parentNode;for(let n=e;;){this.findPointBefore(i,n);let r=this.text.length;this.readNode(n);let o=n.nextSibling;if(o==s)break;let l=lt.get(n),a=lt.get(o);(l&&a?l.breakAfter:(l?l.breakAfter:Zl(n))||Zl(o)&&(n.nodeName!="BR"||n.cmIgnore)&&this.text.length>r)&&!P_(o,s)&&this.lineBreak(),n=o}return this.findPointBefore(i,s),this}readTextNode(e){let s=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,s.length));for(let i=0,n=this.lineSeparator?null:/\r\n?|\n/g;;){let r=-1,o=1,l;if(this.lineSeparator?(r=s.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(l=n.exec(s))&&(r=l.index,o=l[0].length),this.append(s.slice(i,r<0?s.length:r)),r<0)break;if(this.lineBreak(),o>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=o-1);i=r+o}}readNode(e){if(e.cmIgnore)return;let s=lt.get(e),i=s&&s.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let n=i.iter();!n.next().done;)n.lineBreak?this.lineBreak():this.append(n.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,s){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==s&&(i.pos=this.text.length)}findPointInside(e,s){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(O_(e,i.node,i.offset)?s:0))}}function O_(t,e,s){for(;;){if(!e||s<gi(e))return!1;if(e==t)return!0;s=jn(e)+1,e=e.parentNode}}function P_(t,e){let s;for(;!(t==e||!t);t=t.nextSibling){let i=lt.get(t);if(!(i?.isWidget||t.cmIgnore))return!1;i&&(s||(s=[])).push(i)}if(s)for(let i of s){let n=i.overrideDOMText;if(n?.length)return!1}return!0}class Kh{constructor(e,s){this.node=e,this.offset=s,this.pos=-1}}class j_{constructor(e,s,i,n){this.typeOver=n,this.bounds=null,this.text="",this.domChanged=s>-1;let{impreciseHead:r,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&s>-1)this.newSel=null;else if(s>-1&&(this.bounds=e.docView.domBoundsAround(s,i,0))){let l=r||o?[]:L_(e),a=new $_(l,e.state);a.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=a.text,this.newSel=B_(l,this.bounds.from)}else{let l=e.observer.selectionRange,a=r&&r.node==l.focusNode&&r.offset==l.focusOffset||!Vd(e.contentDOM,l.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(l.focusNode,l.focusOffset),d=o&&o.node==l.anchorNode&&o.offset==l.anchorOffset||!Vd(e.contentDOM,l.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(l.anchorNode,l.anchorOffset),u=e.viewport;if((Ce.ios||Ce.chrome)&&e.state.selection.main.empty&&a!=d&&(u.from>0||u.to<e.state.doc.length)){let f=Math.min(a,d),h=Math.max(a,d),m=u.from-f,w=u.to-h;(m==0||m==1||f==0)&&(w==0||w==-1||h==e.state.doc.length)&&(a=0,d=e.state.doc.length)}this.newSel=ie.single(d,a)}}}function G0(t,e){let s,{newSel:i}=e,n=t.state.selection.main,r=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:l}=e.bounds,a=n.from,d=null;(r===8||Ce.android&&e.text.length<l-o)&&(a=n.to,d="end");let u=K0(t.state.doc.sliceString(o,l,Nr),e.text,a-o,d);u&&(Ce.chrome&&r==13&&u.toB==u.from+2&&e.text.slice(u.from,u.toB)==Nr+Nr&&u.toB--,s={from:o+u.from,to:o+u.toA,insert:Ze.of(e.text.slice(u.from,u.toB).split(Nr))})}else i&&(!t.hasFocus&&t.state.facet(Ti)||i.main.eq(n))&&(i=null);if(!s&&!i)return!1;if(!s&&e.typeOver&&!n.empty&&i&&i.main.empty?s={from:n.from,to:n.to,insert:t.state.doc.slice(n.from,n.to)}:(Ce.mac||Ce.android)&&s&&s.from==s.to&&s.from==n.head-1&&/^\. ?$/.test(s.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(i&&s.insert.length==2&&(i=ie.single(i.main.anchor-1,i.main.head-1)),s={from:s.from,to:s.to,insert:Ze.of([s.insert.toString().replace("."," ")])}):s&&s.from>=n.from&&s.to<=n.to&&(s.from!=n.from||s.to!=n.to)&&n.to-n.from-(s.to-s.from)<=4?s={from:n.from,to:n.to,insert:t.state.doc.slice(n.from,s.from).append(s.insert).append(t.state.doc.slice(s.to,n.to))}:Ce.chrome&&s&&s.from==s.to&&s.from==n.head&&s.insert.toString()==`
 `&&t.lineWrapping&&(i&&(i=ie.single(i.main.anchor-1,i.main.head-1)),s={from:n.from,to:n.to,insert:Ze.of([" "])}),s)return jc(t,s,i,r);if(i&&!i.main.eq(n)){let o=!1,l="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),l=t.inputState.lastSelectionOrigin,l=="select.pointer"&&(i=q0(t.state.facet(No).map(a=>a(t)),i))),t.dispatch({selection:i,scrollIntoView:o,userEvent:l}),!0}else return!1}function jc(t,e,s,i=-1){if(Ce.ios&&t.inputState.flushIOSKey(e))return!0;let n=t.state.selection.main;if(Ce.android&&(e.to==n.to&&(e.from==n.from||e.from==n.from-1&&t.state.sliceDoc(e.from,n.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&lr(t.contentDOM,"Enter",13)||(e.from==n.from-1&&e.to==n.to&&e.insert.length==0||i==8&&e.insert.length<e.to-e.from&&e.to>n.head)&&lr(t.contentDOM,"Backspace",8)||e.from==n.from&&e.to==n.to+1&&e.insert.length==0&&lr(t.contentDOM,"Delete",46)))return!0;let r=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let o,l=()=>o||(o=R_(t,e,s));return t.state.facet(O0).some(a=>a(t,e.from,e.to,r,l))||t.dispatch(l()),!0}function R_(t,e,s){let i,n=t.state,r=n.selection.main,o=-1;if(e.from==e.to&&e.from<r.from||e.from>r.to){let a=e.from<r.from?-1:1,d=a<0?r.from:r.to,u=io(n.facet(No).map(f=>f(t)),d,a);e.from==u&&(o=u)}if(o>-1)i={changes:e,selection:ie.cursor(e.from+e.insert.length,-1)};else if(e.from>=r.from&&e.to<=r.to&&e.to-e.from>=(r.to-r.from)/3&&(!s||s.main.empty&&s.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let a=r.from<e.from?n.sliceDoc(r.from,e.from):"",d=r.to>e.to?n.sliceDoc(e.to,r.to):"";i=n.replaceSelection(t.state.toText(a+e.insert.sliceString(0,void 0,t.state.lineBreak)+d))}else{let a=n.changes(e),d=s&&s.main.to<=a.newLength?s.main:void 0;if(n.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=r.to&&e.to>=r.to-10){let u=t.state.sliceDoc(e.from,e.to),f,h=s&&F0(t,s.main.head);if(h){let _=e.insert.length-(e.to-e.from);f={from:h.from,to:h.to-_}}else f=t.state.doc.lineAt(r.head);let m=r.to-e.to,w=r.to-r.from;i=n.changeByRange(_=>{if(_.from==r.from&&_.to==r.to)return{changes:a,range:d||_.map(a)};let C=_.to-m,M=C-u.length;if(_.to-_.from!=w||t.state.sliceDoc(M,C)!=u||_.to>=f.from&&_.from<=f.to)return{range:_};let U=n.changes({from:M,to:C,insert:e.insert}),$=_.to-r.to;return{changes:U,range:d?ie.range(Math.max(0,d.anchor+$),Math.max(0,d.head+$)):_.map(U)}})}else i={changes:a,selection:d&&n.selection.replaceRange(d)}}let l="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,l+=".compose",t.inputState.compositionFirstChange&&(l+=".start",t.inputState.compositionFirstChange=!1)),n.update(i,{userEvent:l,scrollIntoView:!0})}function K0(t,e,s,i){let n=Math.min(t.length,e.length),r=0;for(;r<n&&t.charCodeAt(r)==e.charCodeAt(r);)r++;if(r==n&&t.length==e.length)return null;let o=t.length,l=e.length;for(;o>0&&l>0&&t.charCodeAt(o-1)==e.charCodeAt(l-1);)o--,l--;if(i=="end"){let a=Math.max(0,r-Math.min(o,l));s-=o+a-r}if(o<r&&t.length<e.length){let a=s<=r&&s>=o?r-s:0;r-=a,l=r+(l-o),o=r}else if(l<r){let a=s<=r&&s>=l?r-s:0;r-=a,o=r+(o-l),l=r}return{from:r,toA:o,toB:l}}function L_(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:s,anchorOffset:i,focusNode:n,focusOffset:r}=t.observer.selectionRange;return s&&(e.push(new Kh(s,i)),(n!=s||r!=i)&&e.push(new Kh(n,r))),e}function B_(t,e){if(t.length==0)return null;let s=t[0].pos,i=t.length==2?t[1].pos:s;return s>-1&&i>-1?ie.single(s+e,i+e):null}class I_{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Ce.safari&&e.contentDOM.addEventListener("input",()=>null),Ce.gecko&&tC(e.contentDOM.ownerDocument)}handleEvent(e){!G_(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,s){let i=this.handlers[e];if(i){for(let n of i.observers)n(this.view,s);for(let n of i.handlers){if(s.defaultPrevented)break;if(n(this.view,s)){s.preventDefault();break}}}}ensureHandlers(e){let s=U_(e),i=this.handlers,n=this.view.contentDOM;for(let r in s)if(r!="scroll"){let o=!s[r].handlers.length,l=i[r];l&&o!=!l.handlers.length&&(n.removeEventListener(r,this.handleEvent),l=null),l||n.addEventListener(r,this.handleEvent,{passive:o})}for(let r in i)r!="scroll"&&!s[r]&&n.removeEventListener(r,this.handleEvent);this.handlers=s}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&Y0.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),Ce.android&&Ce.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let s;return Ce.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((s=J0.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||N_.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=s||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let s=this.pendingIOSKey;return!s||s.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,lr(this.view.contentDOM,s.key,s.keyCode,s instanceof KeyboardEvent?s:void 0))}ignoreDuringComposition(e){return!/^key/.test(e.type)||e.synthetic?!1:this.composing>0?!0:Ce.safari&&!Ce.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function Jh(t,e){return(s,i)=>{try{return e.call(t,i,s)}catch(n){ys(s.state,n)}}}function U_(t){let e=Object.create(null);function s(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of t){let n=i.spec,r=n&&n.plugin.domEventHandlers,o=n&&n.plugin.domEventObservers;if(r)for(let l in r){let a=r[l];a&&s(l).handlers.push(Jh(i.value,a))}if(o)for(let l in o){let a=o[l];a&&s(l).observers.push(Jh(i.value,a))}}for(let i in Js)s(i).handlers.push(Js[i]);for(let i in Bs)s(i).observers.push(Bs[i]);return e}const J0=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],N_="dthko",Y0=[16,17,18,20,91,92,224,225],ll=6;function al(t){return Math.max(0,t)*.7+8}function z_(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class F_{constructor(e,s,i,n){this.view=e,this.startEvent=s,this.style=i,this.mustSelect=n,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=s,this.scrollParents=X4(e.contentDOM),this.atoms=e.state.facet(No).map(o=>o(e));let r=e.contentDOM.ownerDocument;r.addEventListener("mousemove",this.move=this.move.bind(this)),r.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=s.shiftKey,this.multiple=e.state.facet(Xe.allowMultipleSelections)&&H_(e,s),this.dragging=q_(e,s)&&Z0(s)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&z_(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let s=0,i=0,n=0,r=0,o=this.view.win.innerWidth,l=this.view.win.innerHeight;this.scrollParents.x&&({left:n,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:r,bottom:l}=this.scrollParents.y.getBoundingClientRect());let a=Pc(this.view);e.clientX-a.left<=n+ll?s=-al(n-e.clientX):e.clientX+a.right>=o-ll&&(s=al(e.clientX-o)),e.clientY-a.top<=r+ll?i=-al(r-e.clientY):e.clientY+a.bottom>=l-ll&&(i=al(e.clientY-l)),this.setScrollSpeed(s,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,s){this.scrollSpeed={x:e,y:s},e||s?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:s}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),s&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=s,s=0),(e||s)&&this.view.win.scrollBy(e,s),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:s}=this,i=q0(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(s.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(s=>s.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function H_(t,e){let s=t.state.facet(D0);return s.length?s[0](e):Ce.mac?e.metaKey:e.ctrlKey}function W_(t,e){let s=t.state.facet(T0);return s.length?s[0](e):Ce.mac?!e.altKey:!e.ctrlKey}function q_(t,e){let{main:s}=t.state.selection;if(s.empty)return!1;let i=ko(t.root);if(!i||i.rangeCount==0)return!0;let n=i.getRangeAt(0).getClientRects();for(let r=0;r<n.length;r++){let o=n[r];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function G_(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let s=e.target,i;s!=t.contentDOM;s=s.parentNode)if(!s||s.nodeType==11||(i=lt.get(s))&&i.ignoreEvent(e))return!1;return!0}const Js=Object.create(null),Bs=Object.create(null),X0=Ce.ie&&Ce.ie_version<15||Ce.ios&&Ce.webkit_version<604;function K_(t){let e=t.dom.parentNode;if(!e)return;let s=e.appendChild(document.createElement("textarea"));s.style.cssText="position: fixed; left: -10000px; top: 10px",s.focus(),setTimeout(()=>{t.focus(),s.remove(),Q0(t,s.value)},50)}function Ra(t,e,s){for(let i of t.facet(e))s=i(s,t);return s}function Q0(t,e){e=Ra(t.state,Ec,e);let{state:s}=t,i,n=1,r=s.toText(e),o=r.lines==s.selection.ranges.length;if(Ld!=null&&s.selection.ranges.every(a=>a.empty)&&Ld==r.toString()){let a=-1;i=s.changeByRange(d=>{let u=s.doc.lineAt(d.from);if(u.from==a)return{range:d};a=u.from;let f=s.toText((o?r.line(n++).text:e)+s.lineBreak);return{changes:{from:u.from,insert:f},range:ie.cursor(d.from+f.length)}})}else o?i=s.changeByRange(a=>{let d=r.line(n++);return{changes:{from:a.from,to:a.to,insert:d.text},range:ie.cursor(a.from+d.length)}}):i=s.replaceSelection(r);t.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}Bs.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};Js.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);Bs.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};Bs.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};Js.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let s=null;for(let i of t.state.facet(E0))if(s=i(t,e),s)break;if(!s&&e.button==0&&(s=X_(t,e)),s){let i=!t.hasFocus;t.inputState.startMouseSelection(new F_(t,e,s,i)),i&&t.observer.ignore(()=>{f0(t.contentDOM);let r=t.root.activeElement;r&&!r.contains(t.contentDOM)&&r.blur()});let n=t.inputState.mouseSelection;if(n)return n.start(e),n.dragging===!1}else t.inputState.setSelectionOrigin("select.pointer");return!1};function Yh(t,e,s,i){if(i==1)return ie.cursor(e,s);if(i==2)return __(t.state,e,s);{let n=Tt.find(t.docView,e),r=t.state.doc.lineAt(n?n.posAtEnd:e),o=n?n.posAtStart:r.from,l=n?n.posAtEnd:r.to;return l<t.state.doc.length&&l==r.to&&l++,ie.range(o,l)}}let Xh=(t,e,s)=>e>=s.top&&e<=s.bottom&&t>=s.left&&t<=s.right;function J_(t,e,s,i){let n=Tt.find(t.docView,e);if(!n)return 1;let r=e-n.posAtStart;if(r==0)return 1;if(r==n.length)return-1;let o=n.coordsAt(r,-1);if(o&&Xh(s,i,o))return-1;let l=n.coordsAt(r,1);return l&&Xh(s,i,l)?1:o&&o.bottom>=i?-1:1}function Qh(t,e){let s=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:s,bias:J_(t,s,e.clientX,e.clientY)}}const Y_=Ce.ie&&Ce.ie_version<=11;let Zh=null,ep=0,tp=0;function Z0(t){if(!Y_)return t.detail;let e=Zh,s=tp;return Zh=t,tp=Date.now(),ep=!e||s>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(ep+1)%3:1}function X_(t,e){let s=Qh(t,e),i=Z0(e),n=t.state.selection;return{update(r){r.docChanged&&(s.pos=r.changes.mapPos(s.pos),n=n.map(r.changes))},get(r,o,l){let a=Qh(t,r),d,u=Yh(t,a.pos,a.bias,i);if(s.pos!=a.pos&&!o){let f=Yh(t,s.pos,s.bias,i),h=Math.min(f.from,u.from),m=Math.max(f.to,u.to);u=h<u.from?ie.range(h,m):ie.range(m,h)}return o?n.replaceRange(n.main.extend(u.from,u.to)):l&&i==1&&n.ranges.length>1&&(d=Q_(n,a.pos))?d:l?n.addRange(u):ie.create([u])}}}function Q_(t,e){for(let s=0;s<t.ranges.length;s++){let{from:i,to:n}=t.ranges[s];if(i<=e&&n>=e)return ie.create(t.ranges.slice(0,s).concat(t.ranges.slice(s+1)),t.mainIndex==s?0:t.mainIndex-(t.mainIndex>s?1:0))}return null}Js.dragstart=(t,e)=>{let{selection:{main:s}}=t.state;if(e.target.draggable){let n=t.docView.nearest(e.target);if(n&&n.isWidget){let r=n.posAtStart,o=r+n.length;(r>=s.to||o<=s.from)&&(s=ie.range(r,o))}}let{inputState:i}=t;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=s,e.dataTransfer&&(e.dataTransfer.setData("Text",Ra(t.state,$c,t.state.sliceDoc(s.from,s.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Js.dragend=t=>(t.inputState.draggedContent=null,!1);function sp(t,e,s,i){if(s=Ra(t.state,Ec,s),!s)return;let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:r}=t.inputState,o=i&&r&&W_(t,e)?{from:r.from,to:r.to}:null,l={from:n,insert:s},a=t.state.changes(o?[o,l]:l);t.focus(),t.dispatch({changes:a,selection:{anchor:a.mapPos(n,-1),head:a.mapPos(n,1)},userEvent:o?"move.drop":"input.drop"}),t.inputState.draggedContent=null}Js.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let s=e.dataTransfer.files;if(s&&s.length){let i=Array(s.length),n=0,r=()=>{++n==s.length&&sp(t,e,i.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<s.length;o++){let l=new FileReader;l.onerror=r,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(i[o]=l.result),r()},l.readAsText(s[o])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return sp(t,e,i,!0),!0}return!1};Js.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let s=X0?null:e.clipboardData;return s?(Q0(t,s.getData("text/plain")||s.getData("text/uri-list")),!0):(K_(t),!1)};function Z_(t,e){let s=t.dom.parentNode;if(!s)return;let i=s.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),t.focus()},50)}function eC(t){let e=[],s=[],i=!1;for(let n of t.selection.ranges)n.empty||(e.push(t.sliceDoc(n.from,n.to)),s.push(n));if(!e.length){let n=-1;for(let{from:r}of t.selection.ranges){let o=t.doc.lineAt(r);o.number>n&&(e.push(o.text),s.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),n=o.number}i=!0}return{text:Ra(t,$c,e.join(t.lineBreak)),ranges:s,linewise:i}}let Ld=null;Js.copy=Js.cut=(t,e)=>{let{text:s,ranges:i,linewise:n}=eC(t.state);if(!s&&!n)return!1;Ld=n?s:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let r=X0?null:e.clipboardData;return r?(r.clearData(),r.setData("text/plain",s),!0):(Z_(t,s),!1)};const ey=Bi.define();function ty(t,e){let s=[];for(let i of t.facet(P0)){let n=i(t,e);n&&s.push(n)}return s.length?t.update({effects:s,annotations:ey.of(!0)}):null}function sy(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let s=ty(t.state,e);s?t.dispatch(s):t.update([])}},10)}Bs.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),sy(t)};Bs.blur=t=>{t.observer.clearSelectionRange(),sy(t)};Bs.compositionstart=Bs.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};Bs.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,Ce.chrome&&Ce.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};Bs.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};Js.beforeinput=(t,e)=>{var s,i;if(e.inputType=="insertReplacementText"&&t.observer.editContext){let r=(s=e.dataTransfer)===null||s===void 0?void 0:s.getData("text/plain"),o=e.getTargetRanges();if(r&&o.length){let l=o[0],a=t.posAtDOM(l.startContainer,l.startOffset),d=t.posAtDOM(l.endContainer,l.endOffset);return jc(t,{from:a,to:d,insert:t.state.toText(r)},null),!0}}let n;if(Ce.chrome&&Ce.android&&(n=J0.find(r=>r.inputType==e.inputType))&&(t.observer.delayAndroidKey(n.key,n.keyCode),n.key=="Backspace"||n.key=="Delete")){let r=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>r+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return Ce.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),Ce.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>Bs.compositionend(t,e),20),!1};const ip=new Set;function tC(t){ip.has(t)||(ip.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const np=["pre-wrap","normal","pre-line","break-spaces"];let yr=!1;function rp(){yr=!1}class sC{constructor(e){this.lineWrapping=e,this.doc=Ze.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,s){let i=this.doc.lineAt(s).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((s-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return np.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let s=!1;for(let i=0;i<e.length;i++){let n=e[i];n<0?i++:this.heightSamples[Math.floor(n*10)]||(s=!0,this.heightSamples[Math.floor(n*10)]=!0)}return s}refresh(e,s,i,n,r,o){let l=np.indexOf(e)>-1,a=Math.round(s)!=Math.round(this.lineHeight)||this.lineWrapping!=l;if(this.lineWrapping=l,this.lineHeight=s,this.charWidth=i,this.textHeight=n,this.lineLength=r,a){this.heightSamples={};for(let d=0;d<o.length;d++){let u=o[d];u<0?d++:this.heightSamples[Math.floor(u*10)]=!0}}return a}}class iC{constructor(e,s){this.from=e,this.heights=s,this.index=0}get more(){return this.index<this.heights.length}}class di{constructor(e,s,i,n,r){this.from=e,this.length=s,this.top=i,this.height=n,this._content=r}get type(){return typeof this._content=="number"?fs.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof an?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let s=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new di(this.from,this.length+e.length,this.top,this.height+e.height,s)}}var pt=(function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t})(pt||(pt={}));const jl=.001;class hs{constructor(e,s,i=2){this.length=e,this.height=s,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>jl&&(yr=!0),this.height=e)}replace(e,s,i){return hs.of(i)}decomposeLeft(e,s){s.push(this)}decomposeRight(e,s){s.push(this)}applyChanges(e,s,i,n){let r=this,o=i.doc;for(let l=n.length-1;l>=0;l--){let{fromA:a,toA:d,fromB:u,toB:f}=n[l],h=r.lineAt(a,pt.ByPosNoHeight,i.setDoc(s),0,0),m=h.to>=d?h:r.lineAt(d,pt.ByPosNoHeight,i,0,0);for(f+=m.to-d,d=m.to;l>0&&h.from<=n[l-1].toA;)a=n[l-1].fromA,u=n[l-1].fromB,l--,a<h.from&&(h=r.lineAt(a,pt.ByPosNoHeight,i,0,0));u+=h.from-a,a=h.from;let w=Rc.build(i.setDoc(o),e,u,f);r=sa(r,r.replace(a,d,w))}return r.updateHeight(i,0)}static empty(){return new Cs(0,0)}static of(e){if(e.length==1)return e[0];let s=0,i=e.length,n=0,r=0;for(;;)if(s==i)if(n>r*2){let l=e[s-1];l.break?e.splice(--s,1,l.left,null,l.right):e.splice(--s,1,l.left,l.right),i+=1+l.break,n-=l.size}else if(r>n*2){let l=e[i];l.break?e.splice(i,1,l.left,null,l.right):e.splice(i,1,l.left,l.right),i+=2+l.break,r-=l.size}else break;else if(n<r){let l=e[s++];l&&(n+=l.size)}else{let l=e[--i];l&&(r+=l.size)}let o=0;return e[s-1]==null?(o=1,s--):e[s]==null&&(o=1,i++),new nC(hs.of(e.slice(0,s)),o,hs.of(e.slice(i)))}}function sa(t,e){return t==e?t:(t.constructor!=e.constructor&&(yr=!0),e)}hs.prototype.size=1;class iy extends hs{constructor(e,s,i){super(e,s),this.deco=i}blockAt(e,s,i,n){return new di(n,this.length,i,this.height,this.deco||0)}lineAt(e,s,i,n,r){return this.blockAt(0,i,n,r)}forEachLine(e,s,i,n,r,o){e<=r+this.length&&s>=r&&o(this.blockAt(0,i,n,r))}updateHeight(e,s=0,i=!1,n){return n&&n.from<=s&&n.more&&this.setHeight(n.heights[n.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Cs extends iy{constructor(e,s){super(e,s,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,s,i,n){return new di(n,this.length,i,this.height,this.breaks)}replace(e,s,i){let n=i[0];return i.length==1&&(n instanceof Cs||n instanceof Nt&&n.flags&4)&&Math.abs(this.length-n.length)<10?(n instanceof Nt?n=new Cs(n.length,this.height):n.height=this.height,this.outdated||(n.outdated=!1),n):hs.of(i)}updateHeight(e,s=0,i=!1,n){return n&&n.from<=s&&n.more?this.setHeight(n.heights[n.index++]):(i||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Nt extends hs{constructor(e){super(e,0)}heightMetrics(e,s){let i=e.doc.lineAt(s).number,n=e.doc.lineAt(s+this.length).number,r=n-i+1,o,l=0;if(e.lineWrapping){let a=Math.min(this.height,e.lineHeight*r);o=a/r,this.length>r+1&&(l=(this.height-a)/(this.length-r-1))}else o=this.height/r;return{firstLine:i,lastLine:n,perLine:o,perChar:l}}blockAt(e,s,i,n){let{firstLine:r,lastLine:o,perLine:l,perChar:a}=this.heightMetrics(s,n);if(s.lineWrapping){let d=n+(e<s.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),u=s.doc.lineAt(d),f=l+u.length*a,h=Math.max(i,e-f/2);return new di(u.from,u.length,h,f,0)}else{let d=Math.max(0,Math.min(o-r,Math.floor((e-i)/l))),{from:u,length:f}=s.doc.line(r+d);return new di(u,f,i+l*d,l,0)}}lineAt(e,s,i,n,r){if(s==pt.ByHeight)return this.blockAt(e,i,n,r);if(s==pt.ByPosNoHeight){let{from:m,to:w}=i.doc.lineAt(e);return new di(m,w-m,0,0,0)}let{firstLine:o,perLine:l,perChar:a}=this.heightMetrics(i,r),d=i.doc.lineAt(e),u=l+d.length*a,f=d.number-o,h=n+l*f+a*(d.from-r-f);return new di(d.from,d.length,Math.max(n,Math.min(h,n+this.height-u)),u,0)}forEachLine(e,s,i,n,r,o){e=Math.max(e,r),s=Math.min(s,r+this.length);let{firstLine:l,perLine:a,perChar:d}=this.heightMetrics(i,r);for(let u=e,f=n;u<=s;){let h=i.doc.lineAt(u);if(u==e){let w=h.number-l;f+=a*w+d*(e-r-w)}let m=a+d*h.length;o(new di(h.from,h.length,f,m,0)),f+=m,u=h.to+1}}replace(e,s,i){let n=this.length-s;if(n>0){let r=i[i.length-1];r instanceof Nt?i[i.length-1]=new Nt(r.length+n):i.push(null,new Nt(n-1))}if(e>0){let r=i[0];r instanceof Nt?i[0]=new Nt(e+r.length):i.unshift(new Nt(e-1),null)}return hs.of(i)}decomposeLeft(e,s){s.push(new Nt(e-1),null)}decomposeRight(e,s){s.push(null,new Nt(this.length-e-1))}updateHeight(e,s=0,i=!1,n){let r=s+this.length;if(n&&n.from<=s+this.length&&n.more){let o=[],l=Math.max(s,n.from),a=-1;for(n.from>s&&o.push(new Nt(n.from-s-1).updateHeight(e,s));l<=r&&n.more;){let u=e.doc.lineAt(l).length;o.length&&o.push(null);let f=n.heights[n.index++];a==-1?a=f:Math.abs(f-a)>=jl&&(a=-2);let h=new Cs(u,f);h.outdated=!1,o.push(h),l+=u+1}l<=r&&o.push(null,new Nt(r-l).updateHeight(e,l));let d=hs.of(o);return(a<0||Math.abs(d.height-this.height)>=jl||Math.abs(a-this.heightMetrics(e,s).perLine)>=jl)&&(yr=!0),sa(this,d)}else(i||this.outdated)&&(this.setHeight(e.heightForGap(s,s+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class nC extends hs{constructor(e,s,i){super(e.length+s+i.length,e.height+i.height,s|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,s,i,n){let r=i+this.left.height;return e<r?this.left.blockAt(e,s,i,n):this.right.blockAt(e,s,r,n+this.left.length+this.break)}lineAt(e,s,i,n,r){let o=n+this.left.height,l=r+this.left.length+this.break,a=s==pt.ByHeight?e<o:e<l,d=a?this.left.lineAt(e,s,i,n,r):this.right.lineAt(e,s,i,o,l);if(this.break||(a?d.to<l:d.from>l))return d;let u=s==pt.ByPosNoHeight?pt.ByPosNoHeight:pt.ByPos;return a?d.join(this.right.lineAt(l,u,i,o,l)):this.left.lineAt(l,u,i,n,r).join(d)}forEachLine(e,s,i,n,r,o){let l=n+this.left.height,a=r+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,s,i,n,r,o),s>=a&&this.right.forEachLine(e,s,i,l,a,o);else{let d=this.lineAt(a,pt.ByPos,i,n,r);e<d.from&&this.left.forEachLine(e,d.from-1,i,n,r,o),d.to>=e&&d.from<=s&&o(d),s>d.to&&this.right.forEachLine(d.to+1,s,i,l,a,o)}}replace(e,s,i){let n=this.left.length+this.break;if(s<n)return this.balanced(this.left.replace(e,s,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-n,s-n,i));let r=[];e>0&&this.decomposeLeft(e,r);let o=r.length;for(let l of i)r.push(l);if(e>0&&op(r,o-1),s<this.length){let l=r.length;this.decomposeRight(s,r),op(r,l)}return hs.of(r)}decomposeLeft(e,s){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,s);s.push(this.left),this.break&&(i++,e>=i&&s.push(null)),e>i&&this.right.decomposeLeft(e-i,s)}decomposeRight(e,s){let i=this.left.length,n=i+this.break;if(e>=n)return this.right.decomposeRight(e-n,s);e<i&&this.left.decomposeRight(e,s),this.break&&e<n&&s.push(null),s.push(this.right)}balanced(e,s){return e.size>2*s.size||s.size>2*e.size?hs.of(this.break?[e,null,s]:[e,s]):(this.left=sa(this.left,e),this.right=sa(this.right,s),this.setHeight(e.height+s.height),this.outdated=e.outdated||s.outdated,this.size=e.size+s.size,this.length=e.length+this.break+s.length,this)}updateHeight(e,s=0,i=!1,n){let{left:r,right:o}=this,l=s+r.length+this.break,a=null;return n&&n.from<=s+r.length&&n.more?a=r=r.updateHeight(e,s,i,n):r.updateHeight(e,s,i),n&&n.from<=l+o.length&&n.more?a=o=o.updateHeight(e,l,i,n):o.updateHeight(e,l,i),a?this.balanced(r,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function op(t,e){let s,i;t[e]==null&&(s=t[e-1])instanceof Nt&&(i=t[e+1])instanceof Nt&&t.splice(e-1,3,new Nt(s.length+1+i.length))}const rC=5;class Rc{constructor(e,s){this.pos=e,this.oracle=s,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,s){if(this.lineStart>-1){let i=Math.min(s,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof Cs?n.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new Cs(i-this.pos,-1)),this.writtenTo=i,s>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=s}point(e,s,i){if(e<s||i.heightRelevant){let n=i.widget?i.widget.estimatedHeight:0,r=i.widget?i.widget.lineBreaks:0;n<0&&(n=this.oracle.lineHeight);let o=s-e;i.block?this.addBlock(new iy(o,n,i)):(o||r||n>=rC)&&this.addLineDeco(n,r,o)}else s>e&&this.span(e,s);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:s}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=s,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Cs(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,s){let i=new Nt(s-e);return this.oracle.doc.lineAt(e).to==s&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Cs)return e;let s=new Cs(0,-1);return this.nodes.push(s),s}addBlock(e){this.enterLine();let s=e.deco;s&&s.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,s&&s.endSide>0&&(this.covering=e)}addLineDeco(e,s,i){let n=this.ensureLine();n.length+=i,n.collapsed+=i,n.widgetHeight=Math.max(n.widgetHeight,e),n.breaks+=s,this.writtenTo=this.pos=this.pos+i}finish(e){let s=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(s instanceof Cs)&&!this.isCovered?this.nodes.push(new Cs(0,-1)):(this.writtenTo<this.pos||s==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let n of this.nodes)n instanceof Cs&&n.updateHeight(this.oracle,i),i+=n?n.length:1;return this.nodes}static build(e,s,i,n){let r=new Rc(i,e);return Qe.spans(s,i,n,r,0),r.finish(i)}}function oC(t,e,s){let i=new lC;return Qe.compare(t,e,s,i,0),i.changes}class lC{constructor(){this.changes=[]}compareRange(){}comparePoint(e,s,i,n){(e<s||i&&i.heightRelevant||n&&n.heightRelevant)&&Pl(e,s,this.changes,5)}}function aC(t,e){let s=t.getBoundingClientRect(),i=t.ownerDocument,n=i.defaultView||window,r=Math.max(0,s.left),o=Math.min(n.innerWidth,s.right),l=Math.max(0,s.top),a=Math.min(n.innerHeight,s.bottom);for(let d=t.parentNode;d&&d!=i.body;)if(d.nodeType==1){let u=d,f=window.getComputedStyle(u);if((u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth)&&f.overflow!="visible"){let h=u.getBoundingClientRect();r=Math.max(r,h.left),o=Math.min(o,h.right),l=Math.max(l,h.top),a=Math.min(d==t.parentNode?n.innerHeight:a,h.bottom)}d=f.position=="absolute"||f.position=="fixed"?u.offsetParent:u.parentNode}else if(d.nodeType==11)d=d.host;else break;return{left:r-s.left,right:Math.max(r,o)-s.left,top:l-(s.top+e),bottom:Math.max(l,a)-(s.top+e)}}function uC(t){let e=t.getBoundingClientRect(),s=t.ownerDocument.defaultView||window;return e.left<s.innerWidth&&e.right>0&&e.top<s.innerHeight&&e.bottom>0}function dC(t,e){let s=t.getBoundingClientRect();return{left:0,right:s.right-s.left,top:e,bottom:s.bottom-(s.top+e)}}class Su{constructor(e,s,i,n){this.from=e,this.to=s,this.size=i,this.displaySize=n}static same(e,s){if(e.length!=s.length)return!1;for(let i=0;i<e.length;i++){let n=e[i],r=s[i];if(n.from!=r.from||n.to!=r.to||n.size!=r.size)return!1}return!0}draw(e,s){return Ie.replace({widget:new cC(this.displaySize*(s?e.scaleY:e.scaleX),s)}).range(this.from,this.to)}}class cC extends cn{constructor(e,s){super(),this.size=e,this.vertical=s}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class lp{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=ap,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=mt.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let s=e.facet(Oc).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new sC(s),this.stateDeco=e.facet(So).filter(i=>typeof i!="function"),this.heightMap=hs.empty().applyChanges(this.stateDeco,Ze.empty,this.heightOracle.setDoc(e.doc),[new js(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Ie.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:s}=this.state.selection;for(let i=0;i<=1;i++){let n=i?s.head:s.anchor;if(!e.some(({from:r,to:o})=>n>=r&&n<=o)){let{from:r,to:o}=this.lineBlockAt(n);e.push(new ul(r,o))}}return this.viewports=e.sort((i,n)=>i.from-n.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?ap:new Lc(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(zr(e,this.scaler))})}update(e,s=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(So).filter(u=>typeof u!="function");let n=e.changedRanges,r=js.extendWithRanges(n,oC(i,this.stateDeco,e?e.changes:Pt.empty(this.state.doc.length))),o=this.heightMap.height,l=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);rp(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),r),(this.heightMap.height!=o||yr)&&(e.flags|=2),l?(this.scrollAnchorPos=e.changes.mapPos(l.from,-1),this.scrollAnchorHeight=l.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let a=r.length?this.mapViewport(this.viewport,e.changes):this.viewport;(s&&(s.range.head<a.from||s.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,s));let d=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,e.flags|=this.updateForViewport(),(d||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),s&&(this.scrollTarget=s),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(R0)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let s=e.contentDOM,i=window.getComputedStyle(s),n=this.heightOracle,r=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?mt.RTL:mt.LTR;let o=this.heightOracle.mustRefreshForWrapping(r),l=s.getBoundingClientRect(),a=o||this.mustMeasureContent||this.contentDOMHeight!=l.height;this.contentDOMHeight=l.height,this.mustMeasureContent=!1;let d=0,u=0;if(l.width&&l.height){let{scaleX:D,scaleY:N}=c0(s,l);(D>.005&&Math.abs(this.scaleX-D)>.005||N>.005&&Math.abs(this.scaleY-N)>.005)&&(this.scaleX=D,this.scaleY=N,d|=16,o=a=!0)}let f=(parseInt(i.paddingTop)||0)*this.scaleY,h=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=f||this.paddingBottom!=h)&&(this.paddingTop=f,this.paddingBottom=h,d|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(n.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,d|=16);let m=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=m&&(this.scrollAnchorHeight=-1,this.scrollTop=m),this.scrolledToBottom=p0(e.scrollDOM);let w=(this.printing?dC:aC)(s,this.paddingTop),_=w.top-this.pixelViewport.top,C=w.bottom-this.pixelViewport.bottom;this.pixelViewport=w;let M=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(M!=this.inView&&(this.inView=M,M&&(a=!0)),!this.inView&&!this.scrollTarget&&!uC(e.dom))return 0;let U=l.width;if((this.contentDOMWidth!=U||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=l.width,this.editorHeight=e.scrollDOM.clientHeight,d|=16),a){let D=e.docView.measureVisibleLineHeights(this.viewport);if(n.mustRefreshForHeights(D)&&(o=!0),o||n.lineWrapping&&Math.abs(U-this.contentDOMWidth)>n.charWidth){let{lineHeight:N,charWidth:q,textHeight:P}=e.docView.measureTextSize();o=N>0&&n.refresh(r,N,q,P,Math.max(5,U/q),D),o&&(e.docView.minWidth=0,d|=16)}_>0&&C>0?u=Math.max(_,C):_<0&&C<0&&(u=Math.min(_,C)),rp();for(let N of this.viewports){let q=N.from==this.viewport.from?D:e.docView.measureVisibleLineHeights(N);this.heightMap=(o?hs.empty().applyChanges(this.stateDeco,Ze.empty,this.heightOracle,[new js(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(n,0,o,new iC(N.from,q))}yr&&(d|=2)}let $=!this.viewportIsAppropriate(this.viewport,u)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return $&&(d&2&&(d|=this.updateScaler()),this.viewport=this.getViewport(u,this.scrollTarget),d|=this.updateForViewport()),(d&2||$)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),d|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),d}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,s){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),n=this.heightMap,r=this.heightOracle,{visibleTop:o,visibleBottom:l}=this,a=new ul(n.lineAt(o-i*1e3,pt.ByHeight,r,0,0).from,n.lineAt(l+(1-i)*1e3,pt.ByHeight,r,0,0).to);if(s){let{head:d}=s.range;if(d<a.from||d>a.to){let u=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),f=n.lineAt(d,pt.ByPos,r,0,0),h;s.y=="center"?h=(f.top+f.bottom)/2-u/2:s.y=="start"||s.y=="nearest"&&d<a.from?h=f.top:h=f.bottom-u,a=new ul(n.lineAt(h-1e3/2,pt.ByHeight,r,0,0).from,n.lineAt(h+u+1e3/2,pt.ByHeight,r,0,0).to)}}return a}mapViewport(e,s){let i=s.mapPos(e.from,-1),n=s.mapPos(e.to,1);return new ul(this.heightMap.lineAt(i,pt.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(n,pt.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:s},i=0){if(!this.inView)return!0;let{top:n}=this.heightMap.lineAt(e,pt.ByPos,this.heightOracle,0,0),{bottom:r}=this.heightMap.lineAt(s,pt.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:l}=this;return(e==0||n<=o-Math.max(10,Math.min(-i,250)))&&(s==this.state.doc.length||r>=l+Math.max(10,Math.min(i,250)))&&n>o-2*1e3&&r<l+2*1e3}mapLineGaps(e,s){if(!e.length||s.empty)return e;let i=[];for(let n of e)s.touchesRange(n.from,n.to)||i.push(new Su(s.mapPos(n.from),s.mapPos(n.to),n.size,n.displaySize));return i}ensureLineGaps(e,s){let i=this.heightOracle.lineWrapping,n=i?1e4:2e3,r=n>>1,o=n<<1;if(this.defaultTextDirection!=mt.LTR&&!i)return[];let l=[],a=(u,f,h,m)=>{if(f-u<r)return;let w=this.state.selection.main,_=[w.from];w.empty||_.push(w.to);for(let M of _)if(M>u&&M<f){a(u,M-10,h,m),a(M+10,f,h,m);return}let C=hC(e,M=>M.from>=h.from&&M.to<=h.to&&Math.abs(M.from-u)<r&&Math.abs(M.to-f)<r&&!_.some(U=>M.from<U&&M.to>U));if(!C){if(f<h.to&&s&&i&&s.visibleRanges.some($=>$.from<=f&&$.to>=f)){let $=s.moveToLineBoundary(ie.cursor(f),!1,!0).head;$>u&&(f=$)}let M=this.gapSize(h,u,f,m),U=i||M<2e6?M:2e6;C=new Su(u,f,M,U)}l.push(C)},d=u=>{if(u.length<o||u.type!=fs.Text)return;let f=fC(u.from,u.to,this.stateDeco);if(f.total<o)return;let h=this.scrollTarget?this.scrollTarget.range.head:null,m,w;if(i){let _=n/this.heightOracle.lineLength*this.heightOracle.lineHeight,C,M;if(h!=null){let U=cl(f,h),$=((this.visibleBottom-this.visibleTop)/2+_)/u.height;C=U-$,M=U+$}else C=(this.visibleTop-u.top-_)/u.height,M=(this.visibleBottom-u.top+_)/u.height;m=dl(f,C),w=dl(f,M)}else{let _=f.total*this.heightOracle.charWidth,C=n*this.heightOracle.charWidth,M=0;if(_>2e6)for(let q of e)q.from>=u.from&&q.from<u.to&&q.size!=q.displaySize&&q.from*this.heightOracle.charWidth+M<this.pixelViewport.left&&(M=q.size-q.displaySize);let U=this.pixelViewport.left+M,$=this.pixelViewport.right+M,D,N;if(h!=null){let q=cl(f,h),P=(($-U)/2+C)/_;D=q-P,N=q+P}else D=(U-C)/_,N=($+C)/_;m=dl(f,D),w=dl(f,N)}m>u.from&&a(u.from,m,u,f),w<u.to&&a(w,u.to,u,f)};for(let u of this.viewportLines)Array.isArray(u.type)?u.type.forEach(d):d(u);return l}gapSize(e,s,i,n){let r=cl(n,i)-cl(n,s);return this.heightOracle.lineWrapping?e.height*r:n.total*this.heightOracle.charWidth*r}updateLineGaps(e){Su.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Ie.set(e.map(s=>s.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let s=this.stateDeco;this.lineGaps.length&&(s=s.concat(this.lineGapDeco));let i=[];Qe.spans(s,this.viewport.from,this.viewport.to,{span(r,o){i.push({from:r,to:o})},point(){}},20);let n=0;if(i.length!=this.visibleRanges.length)n=12;else for(let r=0;r<i.length&&!(n&8);r++){let o=this.visibleRanges[r],l=i[r];(o.from!=l.from||o.to!=l.to)&&(n|=4,e&&e.mapPos(o.from,-1)==l.from&&e.mapPos(o.to,1)==l.to||(n|=8))}return this.visibleRanges=i,n}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(s=>s.from<=e&&s.to>=e)||zr(this.heightMap.lineAt(e,pt.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(s=>s.top<=e&&s.bottom>=e)||zr(this.heightMap.lineAt(this.scaler.fromDOM(e),pt.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let s=this.lineBlockAtHeight(e+8);return s.from>=this.viewport.from||this.viewportLines[0].top-e>200?s:this.viewportLines[0]}elementAtHeight(e){return zr(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class ul{constructor(e,s){this.from=e,this.to=s}}function fC(t,e,s){let i=[],n=t,r=0;return Qe.spans(s,t,e,{span(){},point(o,l){o>n&&(i.push({from:n,to:o}),r+=o-n),n=l}},20),n<e&&(i.push({from:n,to:e}),r+=e-n),{total:r,ranges:i}}function dl({total:t,ranges:e},s){if(s<=0)return e[0].from;if(s>=1)return e[e.length-1].to;let i=Math.floor(t*s);for(let n=0;;n++){let{from:r,to:o}=e[n],l=o-r;if(i<=l)return r+i;i-=l}}function cl(t,e){let s=0;for(let{from:i,to:n}of t.ranges){if(e<=n){s+=e-i;break}s+=n-i}return s/t.total}function hC(t,e){for(let s of t)if(e(s))return s}const ap={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class Lc{constructor(e,s,i){let n=0,r=0,o=0;this.viewports=i.map(({from:l,to:a})=>{let d=s.lineAt(l,pt.ByPos,e,0,0).top,u=s.lineAt(a,pt.ByPos,e,0,0).bottom;return n+=u-d,{from:l,to:a,top:d,bottom:u,domTop:0,domBottom:0}}),this.scale=(7e6-n)/(s.height-n);for(let l of this.viewports)l.domTop=o+(l.top-r)*this.scale,o=l.domBottom=l.domTop+(l.bottom-l.top),r=l.bottom}toDOM(e){for(let s=0,i=0,n=0;;s++){let r=s<this.viewports.length?this.viewports[s]:null;if(!r||e<r.top)return n+(e-i)*this.scale;if(e<=r.bottom)return r.domTop+(e-r.top);i=r.bottom,n=r.domBottom}}fromDOM(e){for(let s=0,i=0,n=0;;s++){let r=s<this.viewports.length?this.viewports[s]:null;if(!r||e<r.domTop)return i+(e-n)/this.scale;if(e<=r.domBottom)return r.top+(e-r.domTop);i=r.bottom,n=r.domBottom}}eq(e){return e instanceof Lc?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((s,i)=>s.from==e.viewports[i].from&&s.to==e.viewports[i].to):!1}}function zr(t,e){if(e.scale==1)return t;let s=e.toDOM(t.top),i=e.toDOM(t.bottom);return new di(t.from,t.length,s,i-s,Array.isArray(t._content)?t._content.map(n=>zr(n,e)):t._content)}const fl=De.define({combine:t=>t.join(" ")}),Bd=De.define({combine:t=>t.indexOf(!0)>-1}),Id=on.newName(),ny=on.newName(),ry=on.newName(),oy={"&light":"."+ny,"&dark":"."+ry};function Ud(t,e,s){return new on(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,n=>{if(n=="&")return t;if(!s||!s[n])throw new RangeError(`Unsupported selector: ${n}`);return s[n]}):t+" "+i}})}const pC=Ud("."+Id,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},oy),mC={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},_u=Ce.ie&&Ce.ie_version<=11;class gC{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new Q4,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(s=>{for(let i of s)this.queue.push(i);(Ce.ie&&Ce.ie_version<=11||Ce.ios&&e.composing)&&s.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&Ce.android&&e.constructor.EDIT_CONTEXT!==!1&&!(Ce.chrome&&Ce.chrome_version<126)&&(this.editContext=new vC(e),e.state.facet(Ti)&&(e.contentDOM.editContext=this.editContext.editContext)),_u&&(this.onCharData=s=>{this.queue.push({target:s.target,type:"characterData",oldValue:s.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var s;((s=this.view.docView)===null||s===void 0?void 0:s.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(s=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),s.length>0&&s[s.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(s=>{s.length>0&&s[s.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((s,i)=>s!=e[i]))){this.gapIntersection.disconnect();for(let s of e)this.gapIntersection.observe(s);this.gaps=e}}onSelectionChange(e){let s=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,n=this.selectionRange;if(i.state.facet(Ti)?i.root.activeElement!=this.dom:!Ol(this.dom,n))return;let r=n.anchorNode&&i.docView.nearest(n.anchorNode);if(r&&r.ignoreEvent(e)){s||(this.selectionChanged=!1);return}(Ce.ie&&Ce.ie_version<=11||Ce.android&&Ce.chrome)&&!i.state.selection.main.empty&&n.focusNode&&to(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,s=ko(e.root);if(!s)return!1;let i=Ce.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&yC(this.view,s)||s;if(!i||this.selectionRange.eq(i))return!1;let n=Ol(this.dom,i);return n&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&e_(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),n&&(this.selectionChanged=!0),!0)}setSelectionRange(e,s){this.selectionRange.set(e.node,e.offset,s.node,s.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,s=null;for(let i=this.dom;i;)if(i.nodeType==1)!s&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:s||(s=this.scrollTargets.slice(0,e)),s&&s.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!s&&(s=this.scrollTargets.slice(0,e)),s){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=s)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,mC),_u&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),_u&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,s){var i;if(!this.delayedAndroidKey){let n=()=>{let r=this.delayedAndroidKey;r&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=r.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&r.force&&lr(this.dom,r.key,r.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(n)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:s,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let s=-1,i=-1,n=!1;for(let r of e){let o=this.readMutation(r);o&&(o.typeOver&&(n=!0),s==-1?{from:s,to:i}=o:(s=Math.min(o.from,s),i=Math.max(o.to,i)))}return{from:s,to:i,typeOver:n}}readChange(){let{from:e,to:s,typeOver:i}=this.processRecords(),n=this.selectionChanged&&Ol(this.dom,this.selectionRange);if(e<0&&!n)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let r=new j_(this.view,e,s,i);return this.view.docView.domChanged={newSel:r.newSel?r.newSel.main:null},r}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let s=this.readChange();if(!s)return this.view.requestMeasure(),!1;let i=this.view.state,n=G0(this.view,s);return this.view.state==i&&(s.domChanged||s.newSel&&!s.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),n}readMutation(e){let s=this.view.docView.nearest(e.target);if(!s||s.ignoreMutation(e))return null;if(s.markDirty(e.type=="attributes"),e.type=="attributes"&&(s.flags|=4),e.type=="childList"){let i=up(s,e.previousSibling||e.target.previousSibling,-1),n=up(s,e.nextSibling||e.target.nextSibling,1);return{from:i?s.posAfter(i):s.posAtStart,to:n?s.posBefore(n):s.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:s.posAtStart,to:s.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Ti)!=e.state.facet(Ti)&&(e.view.contentDOM.editContext=e.state.facet(Ti)?this.editContext.editContext:null))}destroy(){var e,s,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(s=this.gapIntersection)===null||s===void 0||s.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function up(t,e,s){for(;e;){let i=lt.get(e);if(i&&i.parent==t)return i;let n=e.parentNode;e=n!=t.dom?n:s>0?e.nextSibling:e.previousSibling}return null}function dp(t,e){let s=e.startContainer,i=e.startOffset,n=e.endContainer,r=e.endOffset,o=t.docView.domAtPos(t.state.selection.main.anchor);return to(o.node,o.offset,n,r)&&([s,i,n,r]=[n,r,s,i]),{anchorNode:s,anchorOffset:i,focusNode:n,focusOffset:r}}function yC(t,e){if(e.getComposedRanges){let n=e.getComposedRanges(t.root)[0];if(n)return dp(t,n)}let s=null;function i(n){n.preventDefault(),n.stopImmediatePropagation(),s=n.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",i,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",i,!0),s?dp(t,s):null}class vC{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let s=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let n=e.state.selection.main,{anchor:r,head:o}=n,l=this.toEditorPos(i.updateRangeStart),a=this.toEditorPos(i.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:l,drifted:!1});let d=a-l>i.text.length;l==this.from&&r<this.from?l=r:a==this.to&&r>this.to&&(a=r);let u=K0(e.state.sliceDoc(l,a),i.text,(d?n.from:n.to)-l,d?"end":null);if(!u){let h=ie.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd));h.main.eq(n)||e.dispatch({selection:h,userEvent:"select"});return}let f={from:u.from+l,to:u.toA+l,insert:Ze.of(i.text.slice(u.from,u.toB).split(`
`))};if((Ce.mac||Ce.android)&&f.from==o-1&&/^\. ?$/.test(i.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(f={from:l,to:a,insert:Ze.of([i.text.replace("."," ")])}),this.pendingContextChange=f,!e.state.readOnly){let h=this.to-this.from+(f.to-f.from+f.insert.length);jc(e,f,ie.single(this.toEditorPos(i.selectionStart,h),this.toEditorPos(i.selectionEnd,h)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),f.from<f.to&&!f.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(s.text.slice(Math.max(0,i.updateRangeStart-1),Math.min(s.text.length,i.updateRangeStart+1)))&&this.handlers.compositionend(i)},this.handlers.characterboundsupdate=i=>{let n=[],r=null;for(let o=this.toEditorPos(i.rangeStart),l=this.toEditorPos(i.rangeEnd);o<l;o++){let a=e.coordsForChar(o);r=a&&new DOMRect(a.left,a.top,a.right-a.left,a.bottom-a.top)||r||new DOMRect,n.push(r)}s.updateCharacterBounds(i.rangeStart,n)},this.handlers.textformatupdate=i=>{let n=[];for(let r of i.getTextFormats()){let o=r.underlineStyle,l=r.underlineThickness;if(!/none/i.test(o)&&!/none/i.test(l)){let a=this.toEditorPos(r.rangeStart),d=this.toEditorPos(r.rangeEnd);if(a<d){let u=`text-decoration: underline ${/^[a-z]/.test(o)?o+" ":o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${/thin/i.test(l)?1:2}px`;n.push(Ie.mark({attributes:{style:u}}).range(a,d))}}}e.dispatch({effects:B0.of(Ie.set(n))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:i}=this.composing;this.composing=null,i&&this.reset(e.state)}};for(let i in this.handlers)s.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let n=ko(i.root);n&&n.rangeCount&&this.editContext.updateSelectionBounds(n.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let s=0,i=!1,n=this.pendingContextChange;return e.changes.iterChanges((r,o,l,a,d)=>{if(i)return;let u=d.length-(o-r);if(n&&o>=n.to)if(n.from==r&&n.to==o&&n.insert.eq(d)){n=this.pendingContextChange=null,s+=u,this.to+=u;return}else n=null,this.revertPending(e.state);if(r+=s,o+=s,o<=this.from)this.from+=u,this.to+=u;else if(r<this.to){if(r<this.from||o>this.to||this.to-this.from+d.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(r),this.toContextPos(o),d.toString()),this.to+=u}s+=u}),n&&!i&&this.revertPending(e.state),!i}update(e){let s=this.pendingContextChange,i=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(i.from,i.to)&&e.transactions.some(n=>!n.isUserEvent("input.type")&&n.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||s)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:s}=e.selection.main;this.from=Math.max(0,s-1e4),this.to=Math.min(e.doc.length,s+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let s=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(s.from),this.toContextPos(s.from+s.insert.length),e.doc.sliceString(s.from,s.to))}setSelection(e){let{main:s}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,s.anchor))),n=this.toContextPos(s.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=n)&&this.editContext.updateSelection(i,n)}rangeIsValid(e){let{head:s}=e.selection.main;return!(this.from>0&&s-this.from<500||this.to<e.doc.length&&this.to-s<500||this.to-this.from>1e4*3)}toEditorPos(e,s=this.to-this.from){e=Math.min(e,s);let i=this.composing;return i&&i.drifted?i.editorBase+(e-i.contextBase):e+this.from}toContextPos(e){let s=this.composing;return s&&s.drifted?s.contextBase+(e-s.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class Me{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var s;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(n=>n.forEach(r=>i(r,this)))||(n=>this.update(n)),this.dispatch=this.dispatch.bind(this),this._root=e.root||Z4(e.parent)||document,this.viewState=new lp(e.state||Xe.create(e)),e.scrollTo&&e.scrollTo.is(ol)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Jn).map(n=>new xu(n));for(let n of this.plugins)n.update(this);this.observer=new gC(this),this.inputState=new I_(this),this.inputState.ensureHandlers(this.plugins),this.docView=new zh(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((s=document.fonts)===null||s===void 0)&&s.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let s=e.length==1&&e[0]instanceof jt?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(s,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let s=!1,i=!1,n,r=this.state;for(let h of e){if(h.startState!=r)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");r=h.state}if(this.destroyed){this.viewState.state=r;return}let o=this.hasFocus,l=0,a=null;e.some(h=>h.annotation(ey))?(this.inputState.notifiedFocused=o,l=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,a=ty(r,o),a||(l=1));let d=this.observer.delayedAndroidKey,u=null;if(d?(this.observer.clearDelayedAndroidKey(),u=this.observer.readChange(),(u&&!this.state.doc.eq(r.doc)||!this.state.selection.eq(r.selection))&&(u=null)):this.observer.clear(),r.facet(Xe.phrases)!=this.state.facet(Xe.phrases))return this.setState(r);n=ta.create(this,r,e),n.flags|=l;let f=this.viewState.scrollTarget;try{this.updateState=2;for(let h of e){if(f&&(f=f.map(h.changes)),h.scrollIntoView){let{main:m}=h.state.selection;f=new ar(m.empty?m:ie.cursor(m.head,m.head>m.anchor?-1:1))}for(let m of h.effects)m.is(ol)&&(f=m.value.clip(this.state))}this.viewState.update(n,f),this.bidiCache=ia.update(this.bidiCache,n.changes),n.empty||(this.updatePlugins(n),this.inputState.update(n)),s=this.docView.update(n),this.state.facet(Ur)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(s,e.some(h=>h.isUserEvent("select.pointer")))}finally{this.updateState=0}if(n.startState.facet(fl)!=n.state.facet(fl)&&(this.viewState.mustMeasureContent=!0),(s||i||f||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),s&&this.docViewUpdate(),!n.empty)for(let h of this.state.facet(Pd))try{h(n)}catch(m){ys(this.state,m,"update listener")}(a||u)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),u&&!G0(this,u)&&d.force&&lr(this.contentDOM,d.key,d.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let s=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new lp(e),this.plugins=e.facet(Jn).map(i=>new xu(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new zh(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}s&&this.focus(),this.requestMeasure()}updatePlugins(e){let s=e.startState.facet(Jn),i=e.state.facet(Jn);if(s!=i){let n=[];for(let r of i){let o=s.indexOf(r);if(o<0)n.push(new xu(r));else{let l=this.plugins[o];l.mustUpdate=e,n.push(l)}}for(let r of this.plugins)r.mustUpdate!=e&&r.destroy(this);this.plugins=n,this.pluginMap.clear()}else for(let n of this.plugins)n.mustUpdate=e;for(let n=0;n<this.plugins.length;n++)this.plugins[n].update(this);s!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let s=e.value;if(s&&s.docViewUpdate)try{s.docViewUpdate(this)}catch(i){ys(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let s=null,i=this.scrollDOM,n=i.scrollTop*this.scaleY,{scrollAnchorPos:r,scrollAnchorHeight:o}=this.viewState;Math.abs(n-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let l=0;;l++){if(o<0)if(p0(i))r=-1,o=this.viewState.heightMap.height;else{let m=this.viewState.scrollAnchorAt(n);r=m.from,o=m.top}this.updateState=1;let a=this.viewState.measure(this);if(!a&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let d=[];a&4||([this.measureRequests,d]=[d,this.measureRequests]);let u=d.map(m=>{try{return m.read(this)}catch(w){return ys(this.state,w),cp}}),f=ta.create(this,this.state,[]),h=!1;f.flags|=a,s?s.flags|=a:s=f,this.updateState=2,f.empty||(this.updatePlugins(f),this.inputState.update(f),this.updateAttrs(),h=this.docView.update(f),h&&this.docViewUpdate());for(let m=0;m<d.length;m++)if(u[m]!=cp)try{let w=d[m];w.write&&w.write(u[m],this)}catch(w){ys(this.state,w)}if(h&&this.docView.updateSelection(!0),!f.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let w=(r<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(r).top)-o;if(w>1||w<-1){n=n+w,i.scrollTop=n/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(s&&!s.empty)for(let l of this.state.facet(Pd))l(s)}get themeClasses(){return Id+" "+(this.state.facet(Bd)?ry:ny)+" "+this.state.facet(fl)}updateAttrs(){let e=fp(this,I0,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),s={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(Ti)?"true":"false",class:"cm-content",style:`${Ce.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(s["aria-readonly"]="true"),fp(this,Oc,s);let i=this.observer.ignore(()=>{let n=Dd(this.contentDOM,this.contentAttrs,s),r=Dd(this.dom,this.editorAttrs,e);return n||r});return this.editorAttrs=e,this.contentAttrs=s,i}showAnnouncements(e){let s=!0;for(let i of e)for(let n of i.effects)if(n.is(Me.announce)){s&&(this.announceDOM.textContent=""),s=!1;let r=this.announceDOM.appendChild(document.createElement("div"));r.textContent=n.value}}mountStyles(){this.styleModules=this.state.facet(Ur);let e=this.state.facet(Me.cspNonce);on.mount(this.root,this.styleModules.concat(pC).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let s=0;s<this.measureRequests.length;s++)if(this.measureRequests[s].key===e.key){this.measureRequests[s]=e;return}}this.measureRequests.push(e)}}plugin(e){let s=this.pluginMap.get(e);return(s===void 0||s&&s.plugin!=e)&&this.pluginMap.set(e,s=this.plugins.find(i=>i.plugin==e)||null),s&&s.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,s,i){return wu(this,e,Gh(this,e,s,i))}moveByGroup(e,s){return wu(this,e,Gh(this,e,s,i=>T_(this,e.head,i)))}visualLineSide(e,s){let i=this.bidiSpans(e),n=this.textDirectionAt(e.from),r=i[s?i.length-1:0];return ie.cursor(r.side(s,n)+e.from,r.forward(!s,n)?1:-1)}moveToLineBoundary(e,s,i=!0){return D_(this,e,s,i)}moveVertically(e,s,i){return wu(this,e,E_(this,e,s,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,s=0){return this.docView.posFromDOM(e,s)}posAtCoords(e,s=!0){return this.readMeasured(),H0(this,e,s)}coordsAtPos(e,s=1){this.readMeasured();let i=this.docView.coordsAt(e,s);if(!i||i.left==i.right)return i;let n=this.state.doc.lineAt(e),r=this.bidiSpans(n),o=r[Qi.find(r,e-n.from,-1,s)];return ja(i,o.dir==mt.LTR==s>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(j0)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>bC)return V0(e.length);let s=this.textDirectionAt(e.from),i;for(let r of this.bidiCache)if(r.from==e.from&&r.dir==s&&(r.fresh||A0(r.isolates,i=Nh(this,e))))return r.order;i||(i=Nh(this,e));let n=h_(e.text,s,i);return this.bidiCache.push(new ia(e.from,e.to,s,i,!0,n)),n}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Ce.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{f0(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,s={}){return ol.of(new ar(typeof e=="number"?ie.cursor(e):e,s.y,s.x,s.yMargin,s.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:s}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return ol.of(new ar(ie.cursor(i.from),"start","start",i.top-e,s,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return Et.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Et.define(()=>({}),{eventObservers:e})}static theme(e,s){let i=on.newName(),n=[fl.of(i),Ur.of(Ud(`.${i}`,e))];return s&&s.dark&&n.push(Bd.of(!0)),n}static baseTheme(e){return Nn.lowest(Ur.of(Ud("."+Id,e,oy)))}static findFromDOM(e){var s;let i=e.querySelector(".cm-content"),n=i&&lt.get(i)||lt.get(e);return((s=n?.rootView)===null||s===void 0?void 0:s.view)||null}}Me.styleModule=Ur;Me.inputHandler=O0;Me.clipboardInputFilter=Ec;Me.clipboardOutputFilter=$c;Me.scrollHandler=L0;Me.focusChangeEffect=P0;Me.perLineTextDirection=j0;Me.exceptionSink=$0;Me.updateListener=Pd;Me.editable=Ti;Me.mouseSelectionStyle=E0;Me.dragMovesSelection=T0;Me.clickAddsSelectionRange=D0;Me.decorations=So;Me.outerDecorations=U0;Me.atomicRanges=No;Me.bidiIsolatedRanges=N0;Me.scrollMargins=z0;Me.darkTheme=Bd;Me.cspNonce=De.define({combine:t=>t.length?t[0]:""});Me.contentAttributes=Oc;Me.editorAttributes=I0;Me.lineWrapping=Me.contentAttributes.of({class:"cm-lineWrapping"});Me.announce=We.define();const bC=4096,cp={};class ia{constructor(e,s,i,n,r,o){this.from=e,this.to=s,this.dir=i,this.isolates=n,this.fresh=r,this.order=o}static update(e,s){if(s.empty&&!e.some(r=>r.fresh))return e;let i=[],n=e.length?e[e.length-1].dir:mt.LTR;for(let r=Math.max(0,e.length-10);r<e.length;r++){let o=e[r];o.dir==n&&!s.touchesRange(o.from,o.to)&&i.push(new ia(s.mapPos(o.from,1),s.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return i}}function fp(t,e,s){for(let i=t.state.facet(e),n=i.length-1;n>=0;n--){let r=i[n],o=typeof r=="function"?r(t):r;o&&Md(o,s)}return s}const xC=Ce.mac?"mac":Ce.windows?"win":Ce.linux?"linux":"key";function kC(t,e){const s=t.split(/-(?!$)/);let i=s[s.length-1];i=="Space"&&(i=" ");let n,r,o,l;for(let a=0;a<s.length-1;++a){const d=s[a];if(/^(cmd|meta|m)$/i.test(d))l=!0;else if(/^a(lt)?$/i.test(d))n=!0;else if(/^(c|ctrl|control)$/i.test(d))r=!0;else if(/^s(hift)?$/i.test(d))o=!0;else if(/^mod$/i.test(d))e=="mac"?l=!0:r=!0;else throw new Error("Unrecognized modifier name: "+d)}return n&&(i="Alt-"+i),r&&(i="Ctrl-"+i),l&&(i="Meta-"+i),o&&(i="Shift-"+i),i}function hl(t,e,s){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),s!==!1&&e.shiftKey&&(t="Shift-"+t),t}const wC=Nn.default(Me.domEventHandlers({keydown(t,e){return ay(ly(e.state),t,e,"editor")}})),Bc=De.define({enables:wC}),hp=new WeakMap;function ly(t){let e=t.facet(Bc),s=hp.get(e);return s||hp.set(e,s=CC(e.reduce((i,n)=>i.concat(n),[]))),s}function SC(t,e,s){return ay(ly(t.state),e,t,s)}let Ki=null;const _C=4e3;function CC(t,e=xC){let s=Object.create(null),i=Object.create(null),n=(o,l)=>{let a=i[o];if(a==null)i[o]=l;else if(a!=l)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},r=(o,l,a,d,u)=>{var f,h;let m=s[o]||(s[o]=Object.create(null)),w=l.split(/ (?!$)/).map(M=>kC(M,e));for(let M=1;M<w.length;M++){let U=w.slice(0,M).join(" ");n(U,!0),m[U]||(m[U]={preventDefault:!0,stopPropagation:!1,run:[$=>{let D=Ki={view:$,prefix:U,scope:o};return setTimeout(()=>{Ki==D&&(Ki=null)},_C),!0}]})}let _=w.join(" ");n(_,!1);let C=m[_]||(m[_]={preventDefault:!1,stopPropagation:!1,run:((h=(f=m._any)===null||f===void 0?void 0:f.run)===null||h===void 0?void 0:h.slice())||[]});a&&C.run.push(a),d&&(C.preventDefault=!0),u&&(C.stopPropagation=!0)};for(let o of t){let l=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let d of l){let u=s[d]||(s[d]=Object.create(null));u._any||(u._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:f}=o;for(let h in u)u[h].run.push(m=>f(m,Nd))}let a=o[e]||o.key;if(a)for(let d of l)r(d,a,o.run,o.preventDefault,o.stopPropagation),o.shift&&r(d,"Shift-"+a,o.shift,o.preventDefault,o.stopPropagation)}return s}let Nd=null;function ay(t,e,s,i){Nd=e;let n=G4(e),r=ms(n,0),o=ui(r)==n.length&&n!=" ",l="",a=!1,d=!1,u=!1;Ki&&Ki.view==s&&Ki.scope==i&&(l=Ki.prefix+" ",Y0.indexOf(e.keyCode)<0&&(d=!0,Ki=null));let f=new Set,h=C=>{if(C){for(let M of C.run)if(!f.has(M)&&(f.add(M),M(s)))return C.stopPropagation&&(u=!0),!0;C.preventDefault&&(C.stopPropagation&&(u=!0),d=!0)}return!1},m=t[i],w,_;return m&&(h(m[l+hl(n,e,!o)])?a=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Ce.windows&&e.ctrlKey&&e.altKey)&&!(Ce.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(w=ln[e.keyCode])&&w!=n?(h(m[l+hl(w,e,!0)])||e.shiftKey&&(_=xo[e.keyCode])!=n&&_!=w&&h(m[l+hl(_,e,!1)]))&&(a=!0):o&&e.shiftKey&&h(m[l+hl(n,e,!0)])&&(a=!0),!a&&h(m._any)&&(a=!0)),d&&(a=!0),a&&u&&e.stopPropagation(),Nd=null,a}class zo{constructor(e,s,i,n,r){this.className=e,this.left=s,this.top=i,this.width=n,this.height=r}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,s){return s.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,s,i){if(i.empty){let n=e.coordsAtPos(i.head,i.assoc||1);if(!n)return[];let r=uy(e);return[new zo(s,n.left-r.left,n.top-r.top,null,n.bottom-n.top)]}else return AC(e,s,i)}}function uy(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==mt.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function pp(t,e,s,i){let n=t.coordsAtPos(e,s*2);if(!n)return i;let r=t.dom.getBoundingClientRect(),o=(n.top+n.bottom)/2,l=t.posAtCoords({x:r.left+1,y:o}),a=t.posAtCoords({x:r.right-1,y:o});return l==null||a==null?i:{from:Math.max(i.from,Math.min(l,a)),to:Math.min(i.to,Math.max(l,a))}}function AC(t,e,s){if(s.to<=t.viewport.from||s.from>=t.viewport.to)return[];let i=Math.max(s.from,t.viewport.from),n=Math.min(s.to,t.viewport.to),r=t.textDirection==mt.LTR,o=t.contentDOM,l=o.getBoundingClientRect(),a=uy(t),d=o.querySelector(".cm-line"),u=d&&window.getComputedStyle(d),f=l.left+(u?parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)):0),h=l.right-(u?parseInt(u.paddingRight):0),m=Rd(t,i,1),w=Rd(t,n,-1),_=m.type==fs.Text?m:null,C=w.type==fs.Text?w:null;if(_&&(t.lineWrapping||m.widgetLineBreaks)&&(_=pp(t,i,1,_)),C&&(t.lineWrapping||w.widgetLineBreaks)&&(C=pp(t,n,-1,C)),_&&C&&_.from==C.from&&_.to==C.to)return U($(s.from,s.to,_));{let N=_?$(s.from,null,_):D(m,!1),q=C?$(null,s.to,C):D(w,!0),P=[];return(_||m).to<(C||w).from-(_&&C?1:0)||m.widgetLineBreaks>1&&N.bottom+t.defaultLineHeight/2<q.top?P.push(M(f,N.bottom,h,q.top)):N.bottom<q.top&&t.elementAtHeight((N.bottom+q.top)/2).type==fs.Text&&(N.bottom=q.top=(N.bottom+q.top)/2),U(N).concat(P).concat(U(q))}function M(N,q,P,ne){return new zo(e,N-a.left,q-a.top,P-N,ne-q)}function U({top:N,bottom:q,horizontal:P}){let ne=[];for(let te=0;te<P.length;te+=2)ne.push(M(P[te],N,P[te+1],q));return ne}function $(N,q,P){let ne=1e9,te=-1e9,pe=[];function Q(re,ye,E,y,p){let I=t.coordsAtPos(re,re==P.to?-2:2),A=t.coordsAtPos(E,E==P.from?2:-2);!I||!A||(ne=Math.min(I.top,A.top,ne),te=Math.max(I.bottom,A.bottom,te),p==mt.LTR?pe.push(r&&ye?f:I.left,r&&y?h:A.right):pe.push(!r&&y?f:A.left,!r&&ye?h:I.right))}let z=N??P.from,ae=q??P.to;for(let re of t.visibleRanges)if(re.to>z&&re.from<ae)for(let ye=Math.max(re.from,z),E=Math.min(re.to,ae);;){let y=t.state.doc.lineAt(ye);for(let p of t.bidiSpans(y)){let I=p.from+y.from,A=p.to+y.from;if(I>=E)break;A>ye&&Q(Math.max(I,ye),N==null&&I<=z,Math.min(A,E),q==null&&A>=ae,p.dir)}if(ye=y.to+1,ye>=E)break}return pe.length==0&&Q(z,N==null,ae,q==null,t.textDirection),{top:ne,bottom:te,horizontal:pe}}function D(N,q){let P=l.top+(q?N.top:N.bottom);return{top:P,bottom:P,horizontal:[]}}}function VC(t,e){return t.constructor==e.constructor&&t.eq(e)}class MC{constructor(e,s){this.view=e,this.layer=s,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),s.above&&this.dom.classList.add("cm-layer-above"),s.class&&this.dom.classList.add(s.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),s.mount&&s.mount(this.dom,e)}update(e){e.startState.facet(Rl)!=e.state.facet(Rl)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let s=0,i=e.facet(Rl);for(;s<i.length&&i[s]!=this.layer;)s++;this.dom.style.zIndex=String((this.layer.above?150:-1)-s)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:s}=this.view;(e!=this.scaleX||s!=this.scaleY)&&(this.scaleX=e,this.scaleY=s,this.dom.style.transform=`scale(${1/e}, ${1/s})`)}draw(e){if(e.length!=this.drawn.length||e.some((s,i)=>!VC(s,this.drawn[i]))){let s=this.dom.firstChild,i=0;for(let n of e)n.update&&s&&n.constructor&&this.drawn[i].constructor&&n.update(s,this.drawn[i])?(s=s.nextSibling,i++):this.dom.insertBefore(n.draw(),s);for(;s;){let n=s.nextSibling;s.remove(),s=n}this.drawn=e,Ce.safari&&Ce.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Rl=De.define();function dy(t){return[Et.define(e=>new MC(e,t)),Rl.of(t)]}const _o=De.define({combine(t){return yi(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,s)=>Math.min(e,s),drawRangeCursor:(e,s)=>e||s})}});function DC(t={}){return[_o.of(t),TC,EC,$C,R0.of(!0)]}function cy(t){return t.startState.facet(_o)!=t.state.facet(_o)}const TC=dy({above:!0,markers(t){let{state:e}=t,s=e.facet(_o),i=[];for(let n of e.selection.ranges){let r=n==e.selection.main;if(n.empty||s.drawRangeCursor){let o=r?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",l=n.empty?n:ie.cursor(n.head,n.head>n.anchor?-1:1);for(let a of zo.forRange(t,o,l))i.push(a)}}return i},update(t,e){t.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let s=cy(t);return s&&mp(t.state,e),t.docChanged||t.selectionSet||s},mount(t,e){mp(e.state,t)},class:"cm-cursorLayer"});function mp(t,e){e.style.animationDuration=t.facet(_o).cursorBlinkRate+"ms"}const EC=dy({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:zo.forRange(t,"cm-selectionBackground",e)).reduce((e,s)=>e.concat(s))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||cy(t)},class:"cm-selectionLayer"}),$C=Nn.highest(Me.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),fy=We.define({map(t,e){return t==null?null:e.mapPos(t)}}),Fr=Gt.define({create(){return null},update(t,e){return t!=null&&(t=e.changes.mapPos(t)),e.effects.reduce((s,i)=>i.is(fy)?i.value:s,t)}}),OC=Et.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let s=t.state.field(Fr);s==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(Fr)!=s||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:t}=this,e=t.state.field(Fr),s=e!=null&&t.coordsAtPos(e);if(!s)return null;let i=t.scrollDOM.getBoundingClientRect();return{left:s.left-i.left+t.scrollDOM.scrollLeft*t.scaleX,top:s.top-i.top+t.scrollDOM.scrollTop*t.scaleY,height:s.bottom-s.top}}drawCursor(t){if(this.cursor){let{scaleX:e,scaleY:s}=this.view;t?(this.cursor.style.left=t.left/e+"px",this.cursor.style.top=t.top/s+"px",this.cursor.style.height=t.height/s+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(Fr)!=t&&this.view.dispatch({effects:fy.of(t)})}},{eventObservers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){(t.target==this.view.contentDOM||!this.view.contentDOM.contains(t.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function PC(){return[Fr,OC]}function gp(t,e,s,i,n){e.lastIndex=0;for(let r=t.iterRange(s,i),o=s,l;!r.next().done;o+=r.value.length)if(!r.lineBreak)for(;l=e.exec(r.value);)n(o+l.index,l)}function jC(t,e){let s=t.visibleRanges;if(s.length==1&&s[0].from==t.viewport.from&&s[0].to==t.viewport.to)return s;let i=[];for(let{from:n,to:r}of s)n=Math.max(t.state.doc.lineAt(n).from,n-e),r=Math.min(t.state.doc.lineAt(r).to,r+e),i.length&&i[i.length-1].to>=n?i[i.length-1].to=r:i.push({from:n,to:r});return i}class RC{constructor(e){const{regexp:s,decoration:i,decorate:n,boundary:r,maxLength:o=1e3}=e;if(!s.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=s,n)this.addMatch=(l,a,d,u)=>n(u,d,d+l[0].length,l,a);else if(typeof i=="function")this.addMatch=(l,a,d,u)=>{let f=i(l,a,d);f&&u(d,d+l[0].length,f)};else if(i)this.addMatch=(l,a,d,u)=>u(d,d+l[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=r,this.maxLength=o}createDeco(e){let s=new Pi,i=s.add.bind(s);for(let{from:n,to:r}of jC(e,this.maxLength))gp(e.state.doc,this.regexp,n,r,(o,l)=>this.addMatch(l,e,o,i));return s.finish()}updateDeco(e,s){let i=1e9,n=-1;return e.docChanged&&e.changes.iterChanges((r,o,l,a)=>{a>=e.view.viewport.from&&l<=e.view.viewport.to&&(i=Math.min(l,i),n=Math.max(a,n))}),e.viewportMoved||n-i>1e3?this.createDeco(e.view):n>-1?this.updateRange(e.view,s.map(e.changes),i,n):s}updateRange(e,s,i,n){for(let r of e.visibleRanges){let o=Math.max(r.from,i),l=Math.min(r.to,n);if(l>=o){let a=e.state.doc.lineAt(o),d=a.to<l?e.state.doc.lineAt(l):a,u=Math.max(r.from,a.from),f=Math.min(r.to,d.to);if(this.boundary){for(;o>a.from;o--)if(this.boundary.test(a.text[o-1-a.from])){u=o;break}for(;l<d.to;l++)if(this.boundary.test(d.text[l-d.from])){f=l;break}}let h=[],m,w=(_,C,M)=>h.push(M.range(_,C));if(a==d)for(this.regexp.lastIndex=u-a.from;(m=this.regexp.exec(a.text))&&m.index<f-a.from;)this.addMatch(m,e,m.index+a.from,w);else gp(e.state.doc,this.regexp,u,f,(_,C)=>this.addMatch(C,e,_,w));s=s.update({filterFrom:u,filterTo:f,filter:(_,C)=>_<u||C>f,add:h})}}return s}}const zd=/x/.unicode!=null?"gu":"g",LC=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,zd),BC={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Cu=null;function IC(){var t;if(Cu==null&&typeof document<"u"&&document.body){let e=document.body.style;Cu=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return Cu||!1}const Ll=De.define({combine(t){let e=yi(t,{render:null,specialChars:LC,addSpecialChars:null});return(e.replaceTabs=!IC())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,zd)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,zd)),e}});function UC(t={}){return[Ll.of(t),NC()]}let yp=null;function NC(){return yp||(yp=Et.fromClass(class{constructor(t){this.view=t,this.decorations=Ie.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(Ll)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new RC({regexp:t.specialChars,decoration:(e,s,i)=>{let{doc:n}=s.state,r=ms(e[0],0);if(r==9){let o=n.lineAt(i),l=s.state.tabSize,a=Ar(o.text,l,i-o.from);return Ie.replace({widget:new WC((l-a%l)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[r]||(this.decorationCache[r]=Ie.replace({widget:new HC(t,r)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(Ll);t.startState.facet(Ll)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const zC="";function FC(t){return t>=32?zC:t==10?"":String.fromCharCode(9216+t)}class HC extends cn{constructor(e,s){super(),this.options=e,this.code=s}eq(e){return e.code==this.code}toDOM(e){let s=FC(this.code),i=e.state.phrase("Control character")+" "+(BC[this.code]||"0x"+this.code.toString(16)),n=this.options.render&&this.options.render(this.code,i,s);if(n)return n;let r=document.createElement("span");return r.textContent=s,r.title=i,r.setAttribute("aria-label",i),r.className="cm-specialChar",r}ignoreEvent(){return!1}}class WC extends cn{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function qC(){return KC}const GC=Ie.line({class:"cm-activeLine"}),KC=Et.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,s=[];for(let i of t.state.selection.ranges){let n=t.lineBlockAt(i.head);n.from>e&&(s.push(GC.range(n.from)),e=n.from)}return Ie.set(s)}},{decorations:t=>t.decorations}),Fd=2e3;function JC(t,e,s){let i=Math.min(e.line,s.line),n=Math.max(e.line,s.line),r=[];if(e.off>Fd||s.off>Fd||e.col<0||s.col<0){let o=Math.min(e.off,s.off),l=Math.max(e.off,s.off);for(let a=i;a<=n;a++){let d=t.doc.line(a);d.length<=l&&r.push(ie.range(d.from+o,d.to+l))}}else{let o=Math.min(e.col,s.col),l=Math.max(e.col,s.col);for(let a=i;a<=n;a++){let d=t.doc.line(a),u=xd(d.text,o,t.tabSize,!0);if(u<0)r.push(ie.cursor(d.to));else{let f=xd(d.text,l,t.tabSize);r.push(ie.range(d.from+u,d.from+f))}}}return r}function YC(t,e){let s=t.coordsAtPos(t.viewport.from);return s?Math.round(Math.abs((s.left-e)/t.defaultCharacterWidth)):-1}function vp(t,e){let s=t.posAtCoords({x:e.clientX,y:e.clientY},!1),i=t.state.doc.lineAt(s),n=s-i.from,r=n>Fd?-1:n==i.length?YC(t,e.clientX):Ar(i.text,t.state.tabSize,s-i.from);return{line:i.number,col:r,off:n}}function XC(t,e){let s=vp(t,e),i=t.state.selection;return s?{update(n){if(n.docChanged){let r=n.changes.mapPos(n.startState.doc.line(s.line).from),o=n.state.doc.lineAt(r);s={line:o.number,col:s.col,off:Math.min(s.off,o.length)},i=i.map(n.changes)}},get(n,r,o){let l=vp(t,n);if(!l)return i;let a=JC(t.state,s,l);return a.length?o?ie.create(a.concat(i.ranges)):ie.create(a):i}}:null}function QC(t){let e=(s=>s.altKey&&s.button==0);return Me.mouseSelectionStyle.of((s,i)=>e(i)?XC(s,i):null)}const ZC={Alt:[18,t=>!!t.altKey],Control:[17,t=>!!t.ctrlKey],Shift:[16,t=>!!t.shiftKey],Meta:[91,t=>!!t.metaKey]},e5={style:"cursor: crosshair"};function t5(t={}){let[e,s]=ZC[t.key||"Alt"],i=Et.fromClass(class{constructor(n){this.view=n,this.isDown=!1}set(n){this.isDown!=n&&(this.isDown=n,this.view.update([]))}},{eventObservers:{keydown(n){this.set(n.keyCode==e||s(n))},keyup(n){(n.keyCode==e||!s(n))&&this.set(!1)},mousemove(n){this.set(s(n))}}});return[i,Me.contentAttributes.of(n=>{var r;return!((r=n.plugin(i))===null||r===void 0)&&r.isDown?e5:null})]}const jr="-10000px";class hy{constructor(e,s,i,n){this.facet=s,this.createTooltipView=i,this.removeTooltipView=n,this.input=e.state.facet(s),this.tooltips=this.input.filter(o=>o);let r=null;this.tooltipViews=this.tooltips.map(o=>r=i(o,r))}update(e,s){var i;let n=e.state.facet(this.facet),r=n.filter(a=>a);if(n===this.input){for(let a of this.tooltipViews)a.update&&a.update(e);return!1}let o=[],l=s?[]:null;for(let a=0;a<r.length;a++){let d=r[a],u=-1;if(d){for(let f=0;f<this.tooltips.length;f++){let h=this.tooltips[f];h&&h.create==d.create&&(u=f)}if(u<0)o[a]=this.createTooltipView(d,a?o[a-1]:null),l&&(l[a]=!!d.above);else{let f=o[a]=this.tooltipViews[u];l&&(l[a]=s[u]),f.update&&f.update(e)}}}for(let a of this.tooltipViews)o.indexOf(a)<0&&(this.removeTooltipView(a),(i=a.destroy)===null||i===void 0||i.call(a));return s&&(l.forEach((a,d)=>s[d]=a),s.length=l.length),this.input=n,this.tooltips=r,this.tooltipViews=o,!0}}function s5(t){let e=t.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const Au=De.define({combine:t=>{var e,s,i;return{position:Ce.ios?"absolute":((e=t.find(n=>n.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((s=t.find(n=>n.parent))===null||s===void 0?void 0:s.parent)||null,tooltipSpace:((i=t.find(n=>n.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||s5}}}),bp=new WeakMap,Ic=Et.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(Au);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new hy(t,Uc,(s,i)=>this.createTooltip(s,i),s=>{this.resizeObserver&&this.resizeObserver.unobserve(s.dom),s.dom.remove()}),this.above=this.manager.tooltips.map(s=>!!s.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(s=>{Date.now()>this.lastTransaction-50&&s.length>0&&s[s.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let s=e||t.geometryChanged,i=t.state.facet(Au);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let n of this.manager.tooltipViews)n.dom.style.position=this.position;s=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let n of this.manager.tooltipViews)this.container.appendChild(n.dom);s=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);s&&this.maybeMeasure()}createTooltip(t,e){let s=t.create(this.view),i=e?e.dom:null;if(s.dom.classList.add("cm-tooltip"),t.arrow&&!s.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let n=document.createElement("div");n.className="cm-tooltip-arrow",s.dom.appendChild(n)}return s.dom.style.position=this.position,s.dom.style.top=jr,s.dom.style.left="0px",this.container.insertBefore(s.dom,i),s.mount&&s.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(s.dom),s}destroy(){var t,e,s;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(t=i.destroy)===null||t===void 0||t.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(s=this.intersectionObserver)===null||s===void 0||s.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=1,e=1,s=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:r}=this.manager.tooltipViews[0];if(Ce.gecko)s=r.offsetParent!=this.container.ownerDocument.body;else if(r.style.top==jr&&r.style.left=="0px"){let o=r.getBoundingClientRect();s=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}}if(s||this.position=="absolute")if(this.parent){let r=this.parent.getBoundingClientRect();r.width&&r.height&&(t=r.width/this.parent.offsetWidth,e=r.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:e}=this.view.viewState);let i=this.view.scrollDOM.getBoundingClientRect(),n=Pc(this.view);return{visible:{left:i.left+n.left,top:i.top+n.top,right:i.right-n.right,bottom:i.bottom-n.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((r,o)=>{let l=this.manager.tooltipViews[o];return l.getCoords?l.getCoords(r.pos):this.view.coordsAtPos(r.pos)}),size:this.manager.tooltipViews.map(({dom:r})=>r.getBoundingClientRect()),space:this.view.state.facet(Au).tooltipSpace(this.view),scaleX:t,scaleY:e,makeAbsolute:s}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let l of this.manager.tooltipViews)l.dom.style.position="absolute"}let{visible:s,space:i,scaleX:n,scaleY:r}=t,o=[];for(let l=0;l<this.manager.tooltips.length;l++){let a=this.manager.tooltips[l],d=this.manager.tooltipViews[l],{dom:u}=d,f=t.pos[l],h=t.size[l];if(!f||a.clip!==!1&&(f.bottom<=Math.max(s.top,i.top)||f.top>=Math.min(s.bottom,i.bottom)||f.right<Math.max(s.left,i.left)-.1||f.left>Math.min(s.right,i.right)+.1)){u.style.top=jr;continue}let m=a.arrow?d.dom.querySelector(".cm-tooltip-arrow"):null,w=m?7:0,_=h.right-h.left,C=(e=bp.get(d))!==null&&e!==void 0?e:h.bottom-h.top,M=d.offset||n5,U=this.view.textDirection==mt.LTR,$=h.width>i.right-i.left?U?i.left:i.right-h.width:U?Math.max(i.left,Math.min(f.left-(m?14:0)+M.x,i.right-_)):Math.min(Math.max(i.left,f.left-_+(m?14:0)-M.x),i.right-_),D=this.above[l];!a.strictSide&&(D?f.top-C-w-M.y<i.top:f.bottom+C+w+M.y>i.bottom)&&D==i.bottom-f.bottom>f.top-i.top&&(D=this.above[l]=!D);let N=(D?f.top-i.top:i.bottom-f.bottom)-w;if(N<C&&d.resize!==!1){if(N<this.view.defaultLineHeight){u.style.top=jr;continue}bp.set(d,C),u.style.height=(C=N)/r+"px"}else u.style.height&&(u.style.height="");let q=D?f.top-C-w-M.y:f.bottom+w+M.y,P=$+_;if(d.overlap!==!0)for(let ne of o)ne.left<P&&ne.right>$&&ne.top<q+C&&ne.bottom>q&&(q=D?ne.top-C-2-w:ne.bottom+w+2);if(this.position=="absolute"?(u.style.top=(q-t.parent.top)/r+"px",xp(u,($-t.parent.left)/n)):(u.style.top=q/r+"px",xp(u,$/n)),m){let ne=f.left+(U?M.x:-M.x)-($+14-7);m.style.left=ne/n+"px"}d.overlap!==!0&&o.push({left:$,top:q,right:P,bottom:q+C}),u.classList.toggle("cm-tooltip-above",D),u.classList.toggle("cm-tooltip-below",!D),d.positioned&&d.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=jr}},{eventObservers:{scroll(){this.maybeMeasure()}}});function xp(t,e){let s=parseInt(t.style.left,10);(isNaN(s)||Math.abs(e-s)>1)&&(t.style.left=e+"px")}const i5=Me.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),n5={x:0,y:0},Uc=De.define({enables:[Ic,i5]}),na=De.define({combine:t=>t.reduce((e,s)=>e.concat(s),[])});class La{static create(e){return new La(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new hy(e,na,(s,i)=>this.createHostedView(s,i),s=>s.dom.remove())}createHostedView(e,s){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,s?s.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let s of this.manager.tooltipViews)s.mount&&s.mount(e);this.mounted=!0}positioned(e){for(let s of this.manager.tooltipViews)s.positioned&&s.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let s of this.manager.tooltipViews)(e=s.destroy)===null||e===void 0||e.call(s)}passProp(e){let s;for(let i of this.manager.tooltipViews){let n=i[e];if(n!==void 0){if(s===void 0)s=n;else if(s!==n)return}}return s}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const r5=Uc.compute([na],t=>{let e=t.facet(na);return e.length===0?null:{pos:Math.min(...e.map(s=>s.pos)),end:Math.max(...e.map(s=>{var i;return(i=s.end)!==null&&i!==void 0?i:s.pos})),create:La.create,above:e[0].above,arrow:e.some(s=>s.arrow)}});class o5{constructor(e,s,i,n,r){this.view=e,this.source=s,this.field=i,this.setHover=n,this.hoverTime=r,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:s}=this,i=e.docView.nearest(s.target);if(!i)return;let n,r=1;if(i instanceof Xi)n=i.posAtStart;else{if(n=e.posAtCoords(s),n==null)return;let l=e.coordsAtPos(n);if(!l||s.y<l.top||s.y>l.bottom||s.x<l.left-e.defaultCharacterWidth||s.x>l.right+e.defaultCharacterWidth)return;let a=e.bidiSpans(e.state.doc.lineAt(n)).find(u=>u.from<=n&&u.to>=n),d=a&&a.dir==mt.RTL?-1:1;r=s.x<l.left?-d:d}let o=this.source(e,n,r);if(o?.then){let l=this.pending={pos:n};o.then(a=>{this.pending==l&&(this.pending=null,a&&!(Array.isArray(a)&&!a.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(a)?a:[a])}))},a=>ys(e.state,a,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(Ic),s=e?e.manager.tooltips.findIndex(i=>i.create==La.create):-1;return s>-1?e.manager.tooltipViews[s]:null}mousemove(e){var s,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:n,tooltip:r}=this;if(n.length&&r&&!l5(r.dom,e)||this.pending){let{pos:o}=n[0]||this.pending,l=(i=(s=n[0])===null||s===void 0?void 0:s.end)!==null&&i!==void 0?i:o;(o==l?this.view.posAtCoords(this.lastMove)!=o:!a5(this.view,o,l,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:s}=this;if(s.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let s=i=>{e.removeEventListener("mouseleave",s),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",s)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const pl=4;function l5(t,e){let{left:s,right:i,top:n,bottom:r}=t.getBoundingClientRect(),o;if(o=t.querySelector(".cm-tooltip-arrow")){let l=o.getBoundingClientRect();n=Math.min(l.top,n),r=Math.max(l.bottom,r)}return e.clientX>=s-pl&&e.clientX<=i+pl&&e.clientY>=n-pl&&e.clientY<=r+pl}function a5(t,e,s,i,n,r){let o=t.scrollDOM.getBoundingClientRect(),l=t.documentTop+t.documentPadding.top+t.contentHeight;if(o.left>i||o.right<i||o.top>n||Math.min(o.bottom,l)<n)return!1;let a=t.posAtCoords({x:i,y:n},!1);return a>=e&&a<=s}function u5(t,e={}){let s=We.define(),i=Gt.define({create(){return[]},update(n,r){if(n.length&&(e.hideOnChange&&(r.docChanged||r.selection)?n=[]:e.hideOn&&(n=n.filter(o=>!e.hideOn(r,o))),r.docChanged)){let o=[];for(let l of n){let a=r.changes.mapPos(l.pos,-1,cs.TrackDel);if(a!=null){let d=Object.assign(Object.create(null),l);d.pos=a,d.end!=null&&(d.end=r.changes.mapPos(d.end)),o.push(d)}}n=o}for(let o of r.effects)o.is(s)&&(n=o.value),o.is(d5)&&(n=[]);return n},provide:n=>na.from(n)});return{active:i,extension:[i,Et.define(n=>new o5(n,t,i,s,e.hoverTime||300)),r5]}}function py(t,e){let s=t.plugin(Ic);if(!s)return null;let i=s.manager.tooltips.indexOf(e);return i<0?null:s.manager.tooltipViews[i]}const d5=We.define(),kp=De.define({combine(t){let e,s;for(let i of t)e=e||i.topContainer,s=s||i.bottomContainer;return{topContainer:e,bottomContainer:s}}});function Co(t,e){let s=t.plugin(my),i=s?s.specs.indexOf(e):-1;return i>-1?s.panels[i]:null}const my=Et.fromClass(class{constructor(t){this.input=t.state.facet(Ao),this.specs=this.input.filter(s=>s),this.panels=this.specs.map(s=>s(t));let e=t.state.facet(kp);this.top=new ml(t,!0,e.topContainer),this.bottom=new ml(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(s=>s.top)),this.bottom.sync(this.panels.filter(s=>!s.top));for(let s of this.panels)s.dom.classList.add("cm-panel"),s.mount&&s.mount()}update(t){let e=t.state.facet(kp);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new ml(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new ml(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let s=t.state.facet(Ao);if(s!=this.input){let i=s.filter(a=>a),n=[],r=[],o=[],l=[];for(let a of i){let d=this.specs.indexOf(a),u;d<0?(u=a(t.view),l.push(u)):(u=this.panels[d],u.update&&u.update(t)),n.push(u),(u.top?r:o).push(u)}this.specs=i,this.panels=n,this.top.sync(r),this.bottom.sync(o);for(let a of l)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}else for(let i of this.panels)i.update&&i.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>Me.scrollMargins.of(e=>{let s=e.plugin(t);return s&&{top:s.top.scrollMargin(),bottom:s.bottom.scrollMargin()}})});class ml{constructor(e,s,i){this.view=e,this.top=s,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let s of this.panels)s.destroy&&e.indexOf(s)<0&&s.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let s=this.container||this.view.dom;s.insertBefore(this.dom,this.top?s.firstChild:null)}let e=this.dom.firstChild;for(let s of this.panels)if(s.dom.parentNode==this.dom){for(;e!=s.dom;)e=wp(e);e=e.nextSibling}else this.dom.insertBefore(s.dom,e);for(;e;)e=wp(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function wp(t){let e=t.nextSibling;return t.remove(),e}const Ao=De.define({enables:my});class Ri extends Pn{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Ri.prototype.elementClass="";Ri.prototype.toDOM=void 0;Ri.prototype.mapMode=cs.TrackBefore;Ri.prototype.startSide=Ri.prototype.endSide=-1;Ri.prototype.point=!0;const Bl=De.define(),c5=De.define(),f5={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Qe.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},no=De.define();function h5(t){return[gy(),no.of({...f5,...t})]}const Sp=De.define({combine:t=>t.some(e=>e)});function gy(t){return[p5]}const p5=Et.fromClass(class{constructor(t){this.view=t,this.domAfter=null,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(no).map(e=>new Cp(t,e)),this.fixed=!t.state.facet(Sp);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(t){if(this.updateGutters(t)){let e=this.prevViewport,s=t.view.viewport,i=Math.min(e.to,s.to)-Math.max(e.from,s.from);this.syncGutters(i<(s.to-s.from)*.8)}if(t.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(Sp)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let s=Qe.iter(this.view.state.facet(Bl),this.view.viewport.from),i=[],n=this.gutters.map(r=>new m5(r,this.view.viewport,-this.view.documentPadding.top));for(let r of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(r.type)){let o=!0;for(let l of r.type)if(l.type==fs.Text&&o){Hd(s,i,l.from);for(let a of n)a.line(this.view,l,i);o=!1}else if(l.widget)for(let a of n)a.widget(this.view,l)}else if(r.type==fs.Text){Hd(s,i,r.from);for(let o of n)o.line(this.view,r,i)}else if(r.widget)for(let o of n)o.widget(this.view,r);for(let r of n)r.finish();t&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(t){let e=t.startState.facet(no),s=t.state.facet(no),i=t.docChanged||t.heightChanged||t.viewportChanged||!Qe.eq(t.startState.facet(Bl),t.state.facet(Bl),t.view.viewport.from,t.view.viewport.to);if(e==s)for(let n of this.gutters)n.update(t)&&(i=!0);else{i=!0;let n=[];for(let r of s){let o=e.indexOf(r);o<0?n.push(new Cp(this.view,r)):(this.gutters[o].update(t),n.push(this.gutters[o]))}for(let r of this.gutters)r.dom.remove(),n.indexOf(r)<0&&r.destroy();for(let r of n)r.config.side=="after"?this.getDOMAfter().appendChild(r.dom):this.dom.appendChild(r.dom);this.gutters=n}return i}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:t=>Me.scrollMargins.of(e=>{let s=e.plugin(t);if(!s||s.gutters.length==0||!s.fixed)return null;let i=s.dom.offsetWidth*e.scaleX,n=s.domAfter?s.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==mt.LTR?{left:i,right:n}:{right:i,left:n}})});function _p(t){return Array.isArray(t)?t:[t]}function Hd(t,e,s){for(;t.value&&t.from<=s;)t.from==s&&e.push(t.value),t.next()}class m5{constructor(e,s,i){this.gutter=e,this.height=i,this.i=0,this.cursor=Qe.iter(e.markers,s.from)}addElement(e,s,i){let{gutter:n}=this,r=(s.top-this.height)/e.scaleY,o=s.height/e.scaleY;if(this.i==n.elements.length){let l=new yy(e,o,r,i);n.elements.push(l),n.dom.appendChild(l.dom)}else n.elements[this.i].update(e,o,r,i);this.height=s.bottom,this.i++}line(e,s,i){let n=[];Hd(this.cursor,n,s.from),i.length&&(n=n.concat(i));let r=this.gutter.config.lineMarker(e,s,n);r&&n.unshift(r);let o=this.gutter;n.length==0&&!o.config.renderEmptyElements||this.addElement(e,s,n)}widget(e,s){let i=this.gutter.config.widgetMarker(e,s.widget,s),n=i?[i]:null;for(let r of e.state.facet(c5)){let o=r(e,s.widget,s);o&&(n||(n=[])).push(o)}n&&this.addElement(e,s,n)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let s=e.elements.pop();e.dom.removeChild(s.dom),s.destroy()}}}class Cp{constructor(e,s){this.view=e,this.config=s,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in s.domEventHandlers)this.dom.addEventListener(i,n=>{let r=n.target,o;if(r!=this.dom&&this.dom.contains(r)){for(;r.parentNode!=this.dom;)r=r.parentNode;let a=r.getBoundingClientRect();o=(a.top+a.bottom)/2}else o=n.clientY;let l=e.lineBlockAtHeight(o-e.documentTop);s.domEventHandlers[i](e,l,n)&&n.preventDefault()});this.markers=_p(s.markers(e)),s.initialSpacer&&(this.spacer=new yy(e,0,0,[s.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let s=this.markers;if(this.markers=_p(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let n=this.config.updateSpacer(this.spacer.markers[0],e);n!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[n])}let i=e.view.viewport;return!Qe.eq(this.markers,s,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class yy{constructor(e,s,i,n){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,s,i,n)}update(e,s,i,n){this.height!=s&&(this.height=s,this.dom.style.height=s+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),g5(this.markers,n)||this.setMarkers(e,n)}setMarkers(e,s){let i="cm-gutterElement",n=this.dom.firstChild;for(let r=0,o=0;;){let l=o,a=r<s.length?s[r++]:null,d=!1;if(a){let u=a.elementClass;u&&(i+=" "+u);for(let f=o;f<this.markers.length;f++)if(this.markers[f].compare(a)){l=f,d=!0;break}}else l=this.markers.length;for(;o<l;){let u=this.markers[o++];if(u.toDOM){u.destroy(n);let f=n.nextSibling;n.remove(),n=f}}if(!a)break;a.toDOM&&(d?n=n.nextSibling:this.dom.insertBefore(a.toDOM(e),n)),d&&o++}this.dom.className=i,this.markers=s}destroy(){this.setMarkers(null,[])}}function g5(t,e){if(t.length!=e.length)return!1;for(let s=0;s<t.length;s++)if(!t[s].compare(e[s]))return!1;return!0}const y5=De.define(),v5=De.define(),Yn=De.define({combine(t){return yi(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,s){let i=Object.assign({},e);for(let n in s){let r=i[n],o=s[n];i[n]=r?(l,a,d)=>r(l,a,d)||o(l,a,d):o}return i}})}});class Vu extends Ri{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Mu(t,e){return t.state.facet(Yn).formatNumber(e,t.state)}const b5=no.compute([Yn],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(y5)},lineMarker(e,s,i){return i.some(n=>n.toDOM)?null:new Vu(Mu(e,e.state.doc.lineAt(s.from).number))},widgetMarker:(e,s,i)=>{for(let n of e.state.facet(v5)){let r=n(e,s,i);if(r)return r}return null},lineMarkerChange:e=>e.startState.facet(Yn)!=e.state.facet(Yn),initialSpacer(e){return new Vu(Mu(e,Ap(e.state.doc.lines)))},updateSpacer(e,s){let i=Mu(s.view,Ap(s.view.state.doc.lines));return i==e.number?e:new Vu(i)},domEventHandlers:t.facet(Yn).domEventHandlers,side:"before"}));function x5(t={}){return[Yn.of(t),gy(),b5]}function Ap(t){let e=9;for(;e<t;)e=e*10+9;return e}const k5=new class extends Ri{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},w5=Bl.compute(["selection"],t=>{let e=[],s=-1;for(let i of t.selection.ranges){let n=t.doc.lineAt(i.head).from;n>s&&(s=n,e.push(k5.range(n)))}return Qe.of(e)});function S5(){return w5}const _5=1024;let C5=0;class Du{constructor(e,s){this.from=e,this.to=s}}class Ke{constructor(e={}){this.id=C5++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=bs.match(e)),s=>{let i=e(s);return i===void 0?null:[this,i]}}}Ke.closedBy=new Ke({deserialize:t=>t.split(" ")});Ke.openedBy=new Ke({deserialize:t=>t.split(" ")});Ke.group=new Ke({deserialize:t=>t.split(" ")});Ke.isolate=new Ke({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});Ke.contextHash=new Ke({perNode:!0});Ke.lookAhead=new Ke({perNode:!0});Ke.mounted=new Ke({perNode:!0});class ra{constructor(e,s,i){this.tree=e,this.overlay=s,this.parser=i}static get(e){return e&&e.props&&e.props[Ke.mounted.id]}}const A5=Object.create(null);class bs{constructor(e,s,i,n=0){this.name=e,this.props=s,this.id=i,this.flags=n}static define(e){let s=e.props&&e.props.length?Object.create(null):A5,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),n=new bs(e.name||"",s,e.id,i);if(e.props){for(let r of e.props)if(Array.isArray(r)||(r=r(n)),r){if(r[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");s[r[0].id]=r[1]}}return n}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let s=this.prop(Ke.group);return s?s.indexOf(e)>-1:!1}return this.id==e}static match(e){let s=Object.create(null);for(let i in e)for(let n of i.split(" "))s[n]=e[i];return i=>{for(let n=i.prop(Ke.group),r=-1;r<(n?n.length:0);r++){let o=s[r<0?i.name:n[r]];if(o)return o}}}}bs.none=new bs("",Object.create(null),0,8);class Nc{constructor(e){this.types=e;for(let s=0;s<e.length;s++)if(e[s].id!=s)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let s=[];for(let i of this.types){let n=null;for(let r of e){let o=r(i);if(o){n||(n=Object.assign({},i.props));let l=o[1],a=o[0];a.combine&&a.id in n&&(l=a.combine(n[a.id],l)),n[a.id]=l}}s.push(n?new bs(i.name,n,i.id,i.flags):i)}return new Nc(s)}}const gl=new WeakMap,Vp=new WeakMap;var Ht;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(Ht||(Ht={}));class xt{constructor(e,s,i,n,r){if(this.type=e,this.children=s,this.positions=i,this.length=n,this.props=null,r&&r.length){this.props=Object.create(null);for(let[o,l]of r)this.props[typeof o=="number"?o:o.id]=l}}toString(){let e=ra.get(this);if(e&&!e.overlay)return e.tree.toString();let s="";for(let i of this.children){let n=i.toString();n&&(s&&(s+=","),s+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(s.length?"("+s+")":""):s}cursor(e=0){return new qd(this.topNode,e)}cursorAt(e,s=0,i=0){let n=gl.get(this)||this.topNode,r=new qd(n);return r.moveTo(e,s),gl.set(this,r._tree),r}get topNode(){return new Rs(this,0,0,null)}resolve(e,s=0){let i=Vo(gl.get(this)||this.topNode,e,s,!1);return gl.set(this,i),i}resolveInner(e,s=0){let i=Vo(Vp.get(this)||this.topNode,e,s,!0);return Vp.set(this,i),i}resolveStack(e,s=0){return D5(this,e,s)}iterate(e){let{enter:s,leave:i,from:n=0,to:r=this.length}=e,o=e.mode||0,l=(o&Ht.IncludeAnonymous)>0;for(let a=this.cursor(o|Ht.IncludeAnonymous);;){let d=!1;if(a.from<=r&&a.to>=n&&(!l&&a.type.isAnonymous||s(a)!==!1)){if(a.firstChild())continue;d=!0}for(;d&&i&&(l||!a.type.isAnonymous)&&i(a),!a.nextSibling();){if(!a.parent())return;d=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let s in this.props)e.push([+s,this.props[s]]);return e}balance(e={}){return this.children.length<=8?this:Hc(bs.none,this.children,this.positions,0,this.children.length,0,this.length,(s,i,n)=>new xt(this.type,s,i,n,this.propValues),e.makeTree||((s,i,n)=>new xt(bs.none,s,i,n)))}static build(e){return T5(e)}}xt.empty=new xt(bs.none,[],[],0);class zc{constructor(e,s){this.buffer=e,this.index=s}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new zc(this.buffer,this.index)}}class un{constructor(e,s,i){this.buffer=e,this.length=s,this.set=i}get type(){return bs.none}toString(){let e=[];for(let s=0;s<this.buffer.length;)e.push(this.childString(s)),s=this.buffer[s+3];return e.join(",")}childString(e){let s=this.buffer[e],i=this.buffer[e+3],n=this.set.types[s],r=n.name;if(/\W/.test(r)&&!n.isError&&(r=JSON.stringify(r)),e+=4,i==e)return r;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return r+"("+o.join(",")+")"}findChild(e,s,i,n,r){let{buffer:o}=this,l=-1;for(let a=e;a!=s&&!(vy(r,n,o[a+1],o[a+2])&&(l=a,i>0));a=o[a+3]);return l}slice(e,s,i){let n=this.buffer,r=new Uint16Array(s-e),o=0;for(let l=e,a=0;l<s;){r[a++]=n[l++],r[a++]=n[l++]-i;let d=r[a++]=n[l++]-i;r[a++]=n[l++]-e,o=Math.max(o,d)}return new un(r,o,this.set)}}function vy(t,e,s,i){switch(t){case-2:return s<e;case-1:return i>=e&&s<e;case 0:return s<e&&i>e;case 1:return s<=e&&i>e;case 2:return i>e;case 4:return!0}}function Vo(t,e,s,i){for(var n;t.from==t.to||(s<1?t.from>=e:t.from>e)||(s>-1?t.to<=e:t.to<e);){let o=!i&&t instanceof Rs&&t.index<0?null:t.parent;if(!o)return t;t=o}let r=i?0:Ht.IgnoreOverlays;if(i)for(let o=t,l=o.parent;l;o=l,l=o.parent)o instanceof Rs&&o.index<0&&((n=l.enter(e,s,r))===null||n===void 0?void 0:n.from)!=o.from&&(t=l);for(;;){let o=t.enter(e,s,r);if(!o)return t;t=o}}class by{cursor(e=0){return new qd(this,e)}getChild(e,s=null,i=null){let n=Mp(this,e,s,i);return n.length?n[0]:null}getChildren(e,s=null,i=null){return Mp(this,e,s,i)}resolve(e,s=0){return Vo(this,e,s,!1)}resolveInner(e,s=0){return Vo(this,e,s,!0)}matchContext(e){return Wd(this.parent,e)}enterUnfinishedNodesBefore(e){let s=this.childBefore(e),i=this;for(;s;){let n=s.lastChild;if(!n||n.to!=s.to)break;n.type.isError&&n.from==n.to?(i=s,s=n.prevSibling):s=n}return i}get node(){return this}get next(){return this.parent}}class Rs extends by{constructor(e,s,i,n){super(),this._tree=e,this.from=s,this.index=i,this._parent=n}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,s,i,n,r=0){for(let o=this;;){for(let{children:l,positions:a}=o._tree,d=s>0?l.length:-1;e!=d;e+=s){let u=l[e],f=a[e]+o.from;if(vy(n,i,f,f+u.length)){if(u instanceof un){if(r&Ht.ExcludeBuffers)continue;let h=u.findChild(0,u.buffer.length,s,i-f,n);if(h>-1)return new Zi(new V5(o,u,e,f),null,h)}else if(r&Ht.IncludeAnonymous||!u.type.isAnonymous||Fc(u)){let h;if(!(r&Ht.IgnoreMounts)&&(h=ra.get(u))&&!h.overlay)return new Rs(h.tree,f,e,o);let m=new Rs(u,f,e,o);return r&Ht.IncludeAnonymous||!m.type.isAnonymous?m:m.nextChild(s<0?u.children.length-1:0,s,i,n)}}}if(r&Ht.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+s:e=s<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,s,i=0){let n;if(!(i&Ht.IgnoreOverlays)&&(n=ra.get(this._tree))&&n.overlay){let r=e-this.from;for(let{from:o,to:l}of n.overlay)if((s>0?o<=r:o<r)&&(s<0?l>=r:l>r))return new Rs(n.tree,n.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,s,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function Mp(t,e,s,i){let n=t.cursor(),r=[];if(!n.firstChild())return r;if(s!=null){for(let o=!1;!o;)if(o=n.type.is(s),!n.nextSibling())return r}for(;;){if(i!=null&&n.type.is(i))return r;if(n.type.is(e)&&r.push(n.node),!n.nextSibling())return i==null?r:[]}}function Wd(t,e,s=e.length-1){for(let i=t;s>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[s]&&e[s]!=i.name)return!1;s--}}return!0}class V5{constructor(e,s,i,n){this.parent=e,this.buffer=s,this.index=i,this.start=n}}class Zi extends by{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,s,i){super(),this.context=e,this._parent=s,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,s,i){let{buffer:n}=this.context,r=n.findChild(this.index+4,n.buffer[this.index+3],e,s-this.context.start,i);return r<0?null:new Zi(this.context,this,r)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,s,i=0){if(i&Ht.ExcludeBuffers)return null;let{buffer:n}=this.context,r=n.findChild(this.index+4,n.buffer[this.index+3],s>0?1:-1,e-this.context.start,s);return r<0?null:new Zi(this.context,this,r)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,s=e.buffer[this.index+3];return s<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Zi(this.context,this._parent,s):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,s=this._parent?this._parent.index+4:0;return this.index==s?this.externalSibling(-1):new Zi(this.context,this._parent,e.findChild(s,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],s=[],{buffer:i}=this.context,n=this.index+4,r=i.buffer[this.index+3];if(r>n){let o=i.buffer[this.index+1];e.push(i.slice(n,r,o)),s.push(0)}return new xt(this.type,e,s,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function xy(t){if(!t.length)return null;let e=0,s=t[0];for(let r=1;r<t.length;r++){let o=t[r];(o.from>s.from||o.to<s.to)&&(s=o,e=r)}let i=s instanceof Rs&&s.index<0?null:s.parent,n=t.slice();return i?n[e]=i:n.splice(e,1),new M5(n,s)}class M5{constructor(e,s){this.heads=e,this.node=s}get next(){return xy(this.heads)}}function D5(t,e,s){let i=t.resolveInner(e,s),n=null;for(let r=i instanceof Rs?i:i.context.parent;r;r=r.parent)if(r.index<0){let o=r.parent;(n||(n=[i])).push(o.resolve(e,s)),r=o}else{let o=ra.get(r.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let l=new Rs(o.tree,o.overlay[0].from+r.from,-1,r);(n||(n=[i])).push(Vo(l,e,s,!1))}}return n?xy(n):i}class qd{get name(){return this.type.name}constructor(e,s=0){if(this.mode=s,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Rs)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,s){this.index=e;let{start:i,buffer:n}=this.buffer;return this.type=s||n.set.types[n.buffer[e]],this.from=i+n.buffer[e+1],this.to=i+n.buffer[e+2],!0}yield(e){return e?e instanceof Rs?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,s,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,s,i,this.mode));let{buffer:n}=this.buffer,r=n.findChild(this.index+4,n.buffer[this.index+3],e,s-this.buffer.start,i);return r<0?!1:(this.stack.push(this.index),this.yieldBuf(r))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,s,i=this.mode){return this.buffer?i&Ht.ExcludeBuffers?!1:this.enterChild(1,e,s):this.yield(this._tree.enter(e,s,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Ht.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Ht.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:s}=this.buffer,i=this.stack.length-1;if(e<0){let n=i<0?0:this.stack[i]+4;if(this.index!=n)return this.yieldBuf(s.findChild(n,this.index,-1,0,4))}else{let n=s.buffer[this.index+3];if(n<(i<0?s.buffer.length:s.buffer[this.stack[i]+3]))return this.yieldBuf(n)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let s,i,{buffer:n}=this;if(n){if(e>0){if(this.index<n.buffer.buffer.length)return!1}else for(let r=0;r<this.index;r++)if(n.buffer.buffer[r+3]<this.index)return!1;({index:s,parent:i}=n)}else({index:s,_parent:i}=this._tree);for(;i;{index:s,_parent:i}=i)if(s>-1)for(let r=s+e,o=e<0?-1:i._tree.children.length;r!=o;r+=e){let l=i._tree.children[r];if(this.mode&Ht.IncludeAnonymous||l instanceof un||!l.type.isAnonymous||Fc(l))return!1}return!0}move(e,s){if(s&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,s=0){for(;(this.from==this.to||(s<1?this.from>=e:this.from>e)||(s>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,s););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,s=null,i=0;if(e&&e.context==this.buffer)e:for(let n=this.index,r=this.stack.length;r>=0;){for(let o=e;o;o=o._parent)if(o.index==n){if(n==this.index)return o;s=o,i=r+1;break e}n=this.stack[--r]}for(let n=i;n<this.stack.length;n++)s=new Zi(this.buffer,s,this.stack[n]);return this.bufferNode=new Zi(this.buffer,s,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,s){for(let i=0;;){let n=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(n=!0)}for(;;){if(n&&s&&s(this),n=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,n=!0}}}matchContext(e){if(!this.buffer)return Wd(this.node.parent,e);let{buffer:s}=this.buffer,{types:i}=s.set;for(let n=e.length-1,r=this.stack.length-1;n>=0;r--){if(r<0)return Wd(this._tree,e,n);let o=i[s.buffer[this.stack[r]]];if(!o.isAnonymous){if(e[n]&&e[n]!=o.name)return!1;n--}}return!0}}function Fc(t){return t.children.some(e=>e instanceof un||!e.type.isAnonymous||Fc(e))}function T5(t){var e;let{buffer:s,nodeSet:i,maxBufferLength:n=_5,reused:r=[],minRepeatType:o=i.types.length}=t,l=Array.isArray(s)?new zc(s,s.length):s,a=i.types,d=0,u=0;function f(N,q,P,ne,te,pe){let{id:Q,start:z,end:ae,size:re}=l,ye=u,E=d;if(re<0)if(l.next(),re==-1){let J=r[Q];P.push(J),ne.push(z-N);return}else if(re==-3){d=Q;return}else if(re==-4){u=Q;return}else throw new RangeError(`Unrecognized record size: ${re}`);let y=a[Q],p,I,A=z-N;if(ae-z<=n&&(I=C(l.pos-q,te))){let J=new Uint16Array(I.size-I.skip),ge=l.pos-I.size,Ge=J.length;for(;l.pos>ge;)Ge=M(I.start,J,Ge);p=new un(J,ae-I.start,i),A=I.start-N}else{let J=l.pos-re;l.next();let ge=[],Ge=[],Ue=Q>=o?Q:-1,Ct=0,et=ae;for(;l.pos>J;)Ue>=0&&l.id==Ue&&l.size>=0?(l.end<=et-n&&(w(ge,Ge,z,Ct,l.end,et,Ue,ye,E),Ct=ge.length,et=l.end),l.next()):pe>2500?h(z,J,ge,Ge):f(z,J,ge,Ge,Ue,pe+1);if(Ue>=0&&Ct>0&&Ct<ge.length&&w(ge,Ge,z,Ct,z,et,Ue,ye,E),ge.reverse(),Ge.reverse(),Ue>-1&&Ct>0){let V=m(y,E);p=Hc(y,ge,Ge,0,ge.length,0,ae-z,V,V)}else p=_(y,ge,Ge,ae-z,ye-ae,E)}P.push(p),ne.push(A)}function h(N,q,P,ne){let te=[],pe=0,Q=-1;for(;l.pos>q;){let{id:z,start:ae,end:re,size:ye}=l;if(ye>4)l.next();else{if(Q>-1&&ae<Q)break;Q<0&&(Q=re-n),te.push(z,ae,re),pe++,l.next()}}if(pe){let z=new Uint16Array(pe*4),ae=te[te.length-2];for(let re=te.length-3,ye=0;re>=0;re-=3)z[ye++]=te[re],z[ye++]=te[re+1]-ae,z[ye++]=te[re+2]-ae,z[ye++]=ye;P.push(new un(z,te[2]-ae,i)),ne.push(ae-N)}}function m(N,q){return(P,ne,te)=>{let pe=0,Q=P.length-1,z,ae;if(Q>=0&&(z=P[Q])instanceof xt){if(!Q&&z.type==N&&z.length==te)return z;(ae=z.prop(Ke.lookAhead))&&(pe=ne[Q]+z.length+ae)}return _(N,P,ne,te,pe,q)}}function w(N,q,P,ne,te,pe,Q,z,ae){let re=[],ye=[];for(;N.length>ne;)re.push(N.pop()),ye.push(q.pop()+P-te);N.push(_(i.types[Q],re,ye,pe-te,z-pe,ae)),q.push(te-P)}function _(N,q,P,ne,te,pe,Q){if(pe){let z=[Ke.contextHash,pe];Q=Q?[z].concat(Q):[z]}if(te>25){let z=[Ke.lookAhead,te];Q=Q?[z].concat(Q):[z]}return new xt(N,q,P,ne,Q)}function C(N,q){let P=l.fork(),ne=0,te=0,pe=0,Q=P.end-n,z={size:0,start:0,skip:0};e:for(let ae=P.pos-N;P.pos>ae;){let re=P.size;if(P.id==q&&re>=0){z.size=ne,z.start=te,z.skip=pe,pe+=4,ne+=4,P.next();continue}let ye=P.pos-re;if(re<0||ye<ae||P.start<Q)break;let E=P.id>=o?4:0,y=P.start;for(P.next();P.pos>ye;){if(P.size<0)if(P.size==-3)E+=4;else break e;else P.id>=o&&(E+=4);P.next()}te=y,ne+=re,pe+=E}return(q<0||ne==N)&&(z.size=ne,z.start=te,z.skip=pe),z.size>4?z:void 0}function M(N,q,P){let{id:ne,start:te,end:pe,size:Q}=l;if(l.next(),Q>=0&&ne<o){let z=P;if(Q>4){let ae=l.pos-(Q-4);for(;l.pos>ae;)P=M(N,q,P)}q[--P]=z,q[--P]=pe-N,q[--P]=te-N,q[--P]=ne}else Q==-3?d=ne:Q==-4&&(u=ne);return P}let U=[],$=[];for(;l.pos>0;)f(t.start||0,t.bufferStart||0,U,$,-1,0);let D=(e=t.length)!==null&&e!==void 0?e:U.length?$[0]+U[0].length:0;return new xt(a[t.topID],U.reverse(),$.reverse(),D)}const Dp=new WeakMap;function Il(t,e){if(!t.isAnonymous||e instanceof un||e.type!=t)return 1;let s=Dp.get(e);if(s==null){s=1;for(let i of e.children){if(i.type!=t||!(i instanceof xt)){s=1;break}s+=Il(t,i)}Dp.set(e,s)}return s}function Hc(t,e,s,i,n,r,o,l,a){let d=0;for(let w=i;w<n;w++)d+=Il(t,e[w]);let u=Math.ceil(d*1.5/8),f=[],h=[];function m(w,_,C,M,U){for(let $=C;$<M;){let D=$,N=_[$],q=Il(t,w[$]);for($++;$<M;$++){let P=Il(t,w[$]);if(q+P>=u)break;q+=P}if($==D+1){if(q>u){let P=w[D];m(P.children,P.positions,0,P.children.length,_[D]+U);continue}f.push(w[D])}else{let P=_[$-1]+w[$-1].length-N;f.push(Hc(t,w,_,D,$,N,P,null,a))}h.push(N+U-r)}}return m(e,s,i,n,0),(l||a)(f,h,o)}class En{constructor(e,s,i,n,r=!1,o=!1){this.from=e,this.to=s,this.tree=i,this.offset=n,this.open=(r?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,s=[],i=!1){let n=[new En(0,e.length,e,0,!1,i)];for(let r of s)r.to>e.length&&n.push(r);return n}static applyChanges(e,s,i=128){if(!s.length)return e;let n=[],r=1,o=e.length?e[0]:null;for(let l=0,a=0,d=0;;l++){let u=l<s.length?s[l]:null,f=u?u.fromA:1e9;if(f-a>=i)for(;o&&o.from<f;){let h=o;if(a>=h.from||f<=h.to||d){let m=Math.max(h.from,a)-d,w=Math.min(h.to,f)-d;h=m>=w?null:new En(m,w,h.tree,h.offset+d,l>0,!!u)}if(h&&n.push(h),o.to>f)break;o=r<e.length?e[r++]:null}if(!u)break;a=u.toA,d=u.toA-u.toB}return n}}class ky{startParse(e,s,i){return typeof e=="string"&&(e=new E5(e)),i=i?i.length?i.map(n=>new Du(n.from,n.to)):[new Du(0,0)]:[new Du(0,e.length)],this.createParse(e,s||[],i)}parse(e,s,i){let n=this.startParse(e,s,i);for(;;){let r=n.advance();if(r)return r}}}class E5{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,s){return this.string.slice(e,s)}}new Ke({perNode:!0});let $5=0;class Ts{constructor(e,s,i,n){this.name=e,this.set=s,this.base=i,this.modified=n,this.id=$5++}toString(){let{name:e}=this;for(let s of this.modified)s.name&&(e=`${s.name}(${e})`);return e}static define(e,s){let i=typeof e=="string"?e:"?";if(e instanceof Ts&&(s=e),s?.base)throw new Error("Can not derive from a modified tag");let n=new Ts(i,[],null,[]);if(n.set.push(n),s)for(let r of s.set)n.set.push(r);return n}static defineModifier(e){let s=new oa(e);return i=>i.modified.indexOf(s)>-1?i:oa.get(i.base||i,i.modified.concat(s).sort((n,r)=>n.id-r.id))}}let O5=0;class oa{constructor(e){this.name=e,this.instances=[],this.id=O5++}static get(e,s){if(!s.length)return e;let i=s[0].instances.find(l=>l.base==e&&P5(s,l.modified));if(i)return i;let n=[],r=new Ts(e.name,n,e,s);for(let l of s)l.instances.push(r);let o=j5(s);for(let l of e.set)if(!l.modified.length)for(let a of o)n.push(oa.get(l,a));return r}}function P5(t,e){return t.length==e.length&&t.every((s,i)=>s==e[i])}function j5(t){let e=[[]];for(let s=0;s<t.length;s++)for(let i=0,n=e.length;i<n;i++)e.push(e[i].concat(t[s]));return e.sort((s,i)=>i.length-s.length)}function R5(t){let e=Object.create(null);for(let s in t){let i=t[s];Array.isArray(i)||(i=[i]);for(let n of s.split(" "))if(n){let r=[],o=2,l=n;for(let f=0;;){if(l=="..."&&f>0&&f+3==n.length){o=1;break}let h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!h)throw new RangeError("Invalid path: "+n);if(r.push(h[0]=="*"?"":h[0][0]=='"'?JSON.parse(h[0]):h[0]),f+=h[0].length,f==n.length)break;let m=n[f++];if(f==n.length&&m=="!"){o=0;break}if(m!="/")throw new RangeError("Invalid path: "+n);l=n.slice(f)}let a=r.length-1,d=r[a];if(!d)throw new RangeError("Invalid path: "+n);let u=new Mo(i,o,a>0?r.slice(0,a):null);e[d]=u.sort(e[d])}}return wy.add(e)}const wy=new Ke({combine(t,e){let s,i,n;for(;t||e;){if(!t||e&&t.depth>=e.depth?(n=e,e=e.next):(n=t,t=t.next),s&&s.mode==n.mode&&!n.context&&!s.context)continue;let r=new Mo(n.tags,n.mode,n.context);s?s.next=r:i=r,s=r}return i}});class Mo{constructor(e,s,i,n){this.tags=e,this.mode=s,this.context=i,this.next=n}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Mo.empty=new Mo([],2,null);function Sy(t,e){let s=Object.create(null);for(let r of t)if(!Array.isArray(r.tag))s[r.tag.id]=r.class;else for(let o of r.tag)s[o.id]=r.class;let{scope:i,all:n=null}=e||{};return{style:r=>{let o=n;for(let l of r)for(let a of l.set){let d=s[a.id];if(d){o=o?o+" "+d:d;break}}return o},scope:i}}function L5(t,e){let s=null;for(let i of t){let n=i.style(e);n&&(s=s?s+" "+n:n)}return s}function B5(t,e,s,i=0,n=t.length){let r=new I5(i,Array.isArray(e)?e:[e],s);r.highlightRange(t.cursor(),i,n,"",r.highlighters),r.flush(n)}class I5{constructor(e,s,i){this.at=e,this.highlighters=s,this.span=i,this.class=""}startSpan(e,s){s!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=s)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,s,i,n,r){let{type:o,from:l,to:a}=e;if(l>=i||a<=s)return;o.isTop&&(r=this.highlighters.filter(m=>!m.scope||m.scope(o)));let d=n,u=U5(e)||Mo.empty,f=L5(r,u.tags);if(f&&(d&&(d+=" "),d+=f,u.mode==1&&(n+=(n?" ":"")+f)),this.startSpan(Math.max(s,l),d),u.opaque)return;let h=e.tree&&e.tree.prop(Ke.mounted);if(h&&h.overlay){let m=e.node.enter(h.overlay[0].from+l,1),w=this.highlighters.filter(C=>!C.scope||C.scope(h.tree.type)),_=e.firstChild();for(let C=0,M=l;;C++){let U=C<h.overlay.length?h.overlay[C]:null,$=U?U.from+l:a,D=Math.max(s,M),N=Math.min(i,$);if(D<N&&_)for(;e.from<N&&(this.highlightRange(e,D,N,n,r),this.startSpan(Math.min(N,e.to),d),!(e.to>=$||!e.nextSibling())););if(!U||$>i)break;M=U.to+l,M>s&&(this.highlightRange(m.cursor(),Math.max(s,U.from+l),Math.min(i,M),"",w),this.startSpan(Math.min(i,M),d))}_&&e.parent()}else if(e.firstChild()){h&&(n="");do if(!(e.to<=s)){if(e.from>=i)break;this.highlightRange(e,s,i,n,r),this.startSpan(Math.min(i,e.to),d)}while(e.nextSibling());e.parent()}}}function U5(t){let e=t.type.prop(wy);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const xe=Ts.define,yl=xe(),Wi=xe(),Tp=xe(Wi),Ep=xe(Wi),qi=xe(),vl=xe(qi),Tu=xe(qi),ri=xe(),yn=xe(ri),ii=xe(),ni=xe(),Gd=xe(),Rr=xe(Gd),bl=xe(),_e={comment:yl,lineComment:xe(yl),blockComment:xe(yl),docComment:xe(yl),name:Wi,variableName:xe(Wi),typeName:Tp,tagName:xe(Tp),propertyName:Ep,attributeName:xe(Ep),className:xe(Wi),labelName:xe(Wi),namespace:xe(Wi),macroName:xe(Wi),literal:qi,string:vl,docString:xe(vl),character:xe(vl),attributeValue:xe(vl),number:Tu,integer:xe(Tu),float:xe(Tu),bool:xe(qi),regexp:xe(qi),escape:xe(qi),color:xe(qi),url:xe(qi),keyword:ii,self:xe(ii),null:xe(ii),atom:xe(ii),unit:xe(ii),modifier:xe(ii),operatorKeyword:xe(ii),controlKeyword:xe(ii),definitionKeyword:xe(ii),moduleKeyword:xe(ii),operator:ni,derefOperator:xe(ni),arithmeticOperator:xe(ni),logicOperator:xe(ni),bitwiseOperator:xe(ni),compareOperator:xe(ni),updateOperator:xe(ni),definitionOperator:xe(ni),typeOperator:xe(ni),controlOperator:xe(ni),punctuation:Gd,separator:xe(Gd),bracket:Rr,angleBracket:xe(Rr),squareBracket:xe(Rr),paren:xe(Rr),brace:xe(Rr),content:ri,heading:yn,heading1:xe(yn),heading2:xe(yn),heading3:xe(yn),heading4:xe(yn),heading5:xe(yn),heading6:xe(yn),contentSeparator:xe(ri),list:xe(ri),quote:xe(ri),emphasis:xe(ri),strong:xe(ri),link:xe(ri),monospace:xe(ri),strikethrough:xe(ri),inserted:xe(),deleted:xe(),changed:xe(),invalid:xe(),meta:bl,documentMeta:xe(bl),annotation:xe(bl),processingInstruction:xe(bl),definition:Ts.defineModifier("definition"),constant:Ts.defineModifier("constant"),function:Ts.defineModifier("function"),standard:Ts.defineModifier("standard"),local:Ts.defineModifier("local"),special:Ts.defineModifier("special")};for(let t in _e){let e=_e[t];e instanceof Ts&&(e.name=t)}Sy([{tag:_e.link,class:"tok-link"},{tag:_e.heading,class:"tok-heading"},{tag:_e.emphasis,class:"tok-emphasis"},{tag:_e.strong,class:"tok-strong"},{tag:_e.keyword,class:"tok-keyword"},{tag:_e.atom,class:"tok-atom"},{tag:_e.bool,class:"tok-bool"},{tag:_e.url,class:"tok-url"},{tag:_e.labelName,class:"tok-labelName"},{tag:_e.inserted,class:"tok-inserted"},{tag:_e.deleted,class:"tok-deleted"},{tag:_e.literal,class:"tok-literal"},{tag:_e.string,class:"tok-string"},{tag:_e.number,class:"tok-number"},{tag:[_e.regexp,_e.escape,_e.special(_e.string)],class:"tok-string2"},{tag:_e.variableName,class:"tok-variableName"},{tag:_e.local(_e.variableName),class:"tok-variableName tok-local"},{tag:_e.definition(_e.variableName),class:"tok-variableName tok-definition"},{tag:_e.special(_e.variableName),class:"tok-variableName2"},{tag:_e.definition(_e.propertyName),class:"tok-propertyName tok-definition"},{tag:_e.typeName,class:"tok-typeName"},{tag:_e.namespace,class:"tok-namespace"},{tag:_e.className,class:"tok-className"},{tag:_e.macroName,class:"tok-macroName"},{tag:_e.propertyName,class:"tok-propertyName"},{tag:_e.operator,class:"tok-operator"},{tag:_e.comment,class:"tok-comment"},{tag:_e.meta,class:"tok-meta"},{tag:_e.invalid,class:"tok-invalid"},{tag:_e.punctuation,class:"tok-punctuation"}]);var Eu;const Xn=new Ke;function N5(t){return De.define({combine:t?e=>e.concat(t):void 0})}const z5=new Ke;class Ns{constructor(e,s,i=[],n=""){this.data=e,this.name=n,Xe.prototype.hasOwnProperty("tree")||Object.defineProperty(Xe.prototype,"tree",{get(){return ts(this)}}),this.parser=s,this.extension=[dn.of(this),Xe.languageData.of((r,o,l)=>{let a=$p(r,o,l),d=a.type.prop(Xn);if(!d)return[];let u=r.facet(d),f=a.type.prop(z5);if(f){let h=a.resolve(o-a.from,l);for(let m of f)if(m.test(h,r)){let w=r.facet(m.facet);return m.type=="replace"?w:w.concat(u)}}return u})].concat(i)}isActiveAt(e,s,i=-1){return $p(e,s,i).type.prop(Xn)==this.data}findRegions(e){let s=e.facet(dn);if(s?.data==this.data)return[{from:0,to:e.doc.length}];if(!s||!s.allowsNesting)return[];let i=[],n=(r,o)=>{if(r.prop(Xn)==this.data){i.push({from:o,to:o+r.length});return}let l=r.prop(Ke.mounted);if(l){if(l.tree.prop(Xn)==this.data){if(l.overlay)for(let a of l.overlay)i.push({from:a.from+o,to:a.to+o});else i.push({from:o,to:o+r.length});return}else if(l.overlay){let a=i.length;if(n(l.tree,l.overlay[0].from+o),i.length>a)return}}for(let a=0;a<r.children.length;a++){let d=r.children[a];d instanceof xt&&n(d,r.positions[a]+o)}};return n(ts(e),0),i}get allowsNesting(){return!0}}Ns.setState=We.define();function $p(t,e,s){let i=t.facet(dn),n=ts(t).topNode;if(!i||i.allowsNesting)for(let r=n;r;r=r.enter(e,s,Ht.ExcludeBuffers))r.type.isTop&&(n=r);return n}function ts(t){let e=t.field(Ns.state,!1);return e?e.tree:xt.empty}class F5{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,s){let i=this.cursorPos-this.string.length;return e<i||s>=this.cursorPos?this.doc.sliceString(e,s):this.string.slice(e-i,s-i)}}let Lr=null;class vr{constructor(e,s,i=[],n,r,o,l,a){this.parser=e,this.state=s,this.fragments=i,this.tree=n,this.treeLen=r,this.viewport=o,this.skipped=l,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,s,i){return new vr(e,s,[],xt.empty,0,i,[],null)}startParse(){return this.parser.startParse(new F5(this.state.doc),this.fragments)}work(e,s){return s!=null&&s>=this.state.doc.length&&(s=void 0),this.tree!=xt.empty&&this.isDone(s??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let n=Date.now()+e;e=()=>Date.now()>n}for(this.parse||(this.parse=this.startParse()),s!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>s)&&s<this.state.doc.length&&this.parse.stopAt(s);;){let n=this.parse.advance();if(n)if(this.fragments=this.withoutTempSkipped(En.addTree(n,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=n,this.parse=null,this.treeLen<(s??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,s;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(s=this.parse.advance()););}),this.treeLen=e,this.tree=s,this.fragments=this.withoutTempSkipped(En.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let s=Lr;Lr=this;try{return e()}finally{Lr=s}}withoutTempSkipped(e){for(let s;s=this.tempSkipped.pop();)e=Op(e,s.from,s.to);return e}changes(e,s){let{fragments:i,tree:n,treeLen:r,viewport:o,skipped:l}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((d,u,f,h)=>a.push({fromA:d,toA:u,fromB:f,toB:h})),i=En.applyChanges(i,a),n=xt.empty,r=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){l=[];for(let d of this.skipped){let u=e.mapPos(d.from,1),f=e.mapPos(d.to,-1);u<f&&l.push({from:u,to:f})}}}return new vr(this.parser,s,i,n,r,o,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let s=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:n,to:r}=this.skipped[i];n<e.to&&r>e.from&&(this.fragments=Op(this.fragments,n,r),this.skipped.splice(i--,1))}return this.skipped.length>=s?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,s){this.skipped.push({from:e,to:s})}static getSkippingParser(e){return new class extends ky{createParse(s,i,n){let r=n[0].from,o=n[n.length-1].to;return{parsedPos:r,advance(){let a=Lr;if(a){for(let d of n)a.tempSkipped.push(d);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=o,new xt(bs.none,[],[],o-r)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let s=this.fragments;return this.treeLen>=e&&s.length&&s[0].from==0&&s[0].to>=e}static get(){return Lr}}function Op(t,e,s){return En.applyChanges(t,[{fromA:e,toA:s,fromB:e,toB:s}])}class br{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let s=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),s.viewport.to);return s.work(20,i)||s.takeTree(),new br(s)}static init(e){let s=Math.min(3e3,e.doc.length),i=vr.create(e.facet(dn).parser,e,{from:0,to:s});return i.work(20,s)||i.takeTree(),new br(i)}}Ns.state=Gt.define({create:br.init,update(t,e){for(let s of e.effects)if(s.is(Ns.setState))return s.value;return e.startState.facet(dn)!=e.state.facet(dn)?br.init(e.state):t.apply(e)}});let _y=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(_y=t=>{let e=-1,s=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(s):cancelIdleCallback(e)});const $u=typeof navigator<"u"&&(!((Eu=navigator.scheduling)===null||Eu===void 0)&&Eu.isInputPending)?()=>navigator.scheduling.isInputPending():null,H5=Et.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let s=this.view.state.field(Ns.state).context;(s.updateViewport(e.view.viewport)||this.view.viewport.to>s.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(s)}scheduleWork(){if(this.working)return;let{state:e}=this.view,s=e.field(Ns.state);(s.tree!=s.context.tree||!s.context.isDone(e.doc.length))&&(this.working=_y(this.work))}work(e){this.working=null;let s=Date.now();if(this.chunkEnd<s&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=s+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:n}}=this.view,r=i.field(Ns.state);if(r.tree==r.context.tree&&r.context.isDone(n+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!$u?Math.max(25,e.timeRemaining()-5):1e9),l=r.context.treeLen<n&&i.doc.length>n+1e3,a=r.context.work(()=>$u&&$u()||Date.now()>o,n+(l?0:1e5));this.chunkBudget-=Date.now()-s,(a||this.chunkBudget<=0)&&(r.context.takeTree(),this.view.dispatch({effects:Ns.setState.of(new br(r.context))})),this.chunkBudget>0&&!(a&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(r.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(s=>ys(this.view.state,s)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),dn=De.define({combine(t){return t.length?t[0]:null},enables:t=>[Ns.state,H5,Me.contentAttributes.compute([t],e=>{let s=e.facet(t);return s&&s.name?{"data-language":s.name}:{}})]}),W5=De.define(),Wc=De.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(s=>s!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function Bn(t){let e=t.facet(Wc);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function Do(t,e){let s="",i=t.tabSize,n=t.facet(Wc)[0];if(n=="	"){for(;e>=i;)s+="	",e-=i;n=" "}for(let r=0;r<e;r++)s+=n;return s}function qc(t,e){t instanceof Xe&&(t=new Ba(t));for(let i of t.state.facet(W5)){let n=i(t,e);if(n!==void 0)return n}let s=ts(t.state);return s.length>=e?q5(t,s,e):null}class Ba{constructor(e,s={}){this.state=e,this.options=s,this.unit=Bn(e)}lineAt(e,s=1){let i=this.state.doc.lineAt(e),{simulateBreak:n,simulateDoubleBreak:r}=this.options;return n!=null&&n>=i.from&&n<=i.to?r&&n==e?{text:"",from:e}:(s<0?n<e:n<=e)?{text:i.text.slice(n-i.from),from:n}:{text:i.text.slice(0,n-i.from),from:i.from}:i}textAfterPos(e,s=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:n}=this.lineAt(e,s);return i.slice(e-n,Math.min(i.length,e+100-n))}column(e,s=1){let{text:i,from:n}=this.lineAt(e,s),r=this.countColumn(i,e-n),o=this.options.overrideIndentation?this.options.overrideIndentation(n):-1;return o>-1&&(r+=o-this.countColumn(i,i.search(/\S|$/))),r}countColumn(e,s=e.length){return Ar(e,this.state.tabSize,s)}lineIndent(e,s=1){let{text:i,from:n}=this.lineAt(e,s),r=this.options.overrideIndentation;if(r){let o=r(n);if(o>-1)return o}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Cy=new Ke;function q5(t,e,s){let i=e.resolveStack(s),n=e.resolveInner(s,-1).resolve(s,0).enterUnfinishedNodesBefore(s);if(n!=i.node){let r=[];for(let o=n;o&&!(o.from<i.node.from||o.to>i.node.to||o.from==i.node.from&&o.type==i.node.type);o=o.parent)r.push(o);for(let o=r.length-1;o>=0;o--)i={node:r[o],next:i}}return Ay(i,t,s)}function Ay(t,e,s){for(let i=t;i;i=i.next){let n=K5(i.node);if(n)return n(Gc.create(e,s,i))}return 0}function G5(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function K5(t){let e=t.type.prop(Cy);if(e)return e;let s=t.firstChild,i;if(s&&(i=s.type.prop(Ke.closedBy))){let n=t.lastChild,r=n&&i.indexOf(n.name)>-1;return o=>Q5(o,!0,1,void 0,r&&!G5(o)?n.from:void 0)}return t.parent==null?J5:null}function J5(){return 0}class Gc extends Ba{constructor(e,s,i){super(e.state,e.options),this.base=e,this.pos=s,this.context=i}get node(){return this.context.node}static create(e,s,i){return new Gc(e,s,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let s=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(s.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(Y5(i,e))break;s=this.state.doc.lineAt(i.from)}return this.lineIndent(s.from)}continue(){return Ay(this.context.next,this.base,this.pos)}}function Y5(t,e){for(let s=e;s;s=s.parent)if(t==s)return!0;return!1}function X5(t){let e=t.node,s=e.childAfter(e.from),i=e.lastChild;if(!s)return null;let n=t.options.simulateBreak,r=t.state.doc.lineAt(s.from),o=n==null||n<=r.from?r.to:Math.min(r.to,n);for(let l=s.to;;){let a=e.childAfter(l);if(!a||a==i)return null;if(!a.type.isSkipped){if(a.from>=o)return null;let d=/^ */.exec(r.text.slice(s.to-r.from))[0].length;return{from:s.from,to:s.to+d}}l=a.to}}function Q5(t,e,s,i,n){let r=t.textAfter,o=r.match(/^\s*/)[0].length,l=i&&r.slice(o,o+i.length)==i||n==t.pos+o,a=X5(t);return a?l?t.column(a.from):t.column(a.to):t.baseIndent+(l?0:t.unit*s)}const Z5=200;function e3(){return Xe.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let s=t.newDoc,{head:i}=t.newSelection.main,n=s.lineAt(i);if(i>n.from+Z5)return t;let r=s.sliceString(n.from,i);if(!e.some(d=>d.test(r)))return t;let{state:o}=t,l=-1,a=[];for(let{head:d}of o.selection.ranges){let u=o.doc.lineAt(d);if(u.from==l)continue;l=u.from;let f=qc(o,u.from);if(f==null)continue;let h=/^\s*/.exec(u.text)[0],m=Do(o,f);h!=m&&a.push({from:u.from,to:u.from+h.length,insert:m})}return a.length?[t,{changes:a,sequential:!0}]:t})}const t3=De.define(),s3=new Ke;function i3(t,e,s){let i=ts(t);if(i.length<s)return null;let n=i.resolveStack(s,1),r=null;for(let o=n;o;o=o.next){let l=o.node;if(l.to<=s||l.from>s)continue;if(r&&l.from<e)break;let a=l.type.prop(s3);if(a&&(l.to<i.length-50||i.length==t.doc.length||!n3(l))){let d=a(l,t);d&&d.from<=s&&d.from>=e&&d.to>s&&(r=d)}}return r}function n3(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function la(t,e,s){for(let i of t.facet(t3)){let n=i(t,e,s);if(n)return n}return i3(t,e,s)}function Vy(t,e){let s=e.mapPos(t.from,1),i=e.mapPos(t.to,-1);return s>=i?void 0:{from:s,to:i}}const Ia=We.define({map:Vy}),Fo=We.define({map:Vy});function My(t){let e=[];for(let{head:s}of t.state.selection.ranges)e.some(i=>i.from<=s&&i.to>=s)||e.push(t.lineBlockAt(s));return e}const In=Gt.define({create(){return Ie.none},update(t,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((s,i)=>t=Pp(t,s,i)),t=t.map(e.changes);for(let s of e.effects)if(s.is(Ia)&&!r3(t,s.value.from,s.value.to)){let{preparePlaceholder:i}=e.state.facet(Ey),n=i?Ie.replace({widget:new f3(i(e.state,s.value))}):jp;t=t.update({add:[n.range(s.value.from,s.value.to)]})}else s.is(Fo)&&(t=t.update({filter:(i,n)=>s.value.from!=i||s.value.to!=n,filterFrom:s.value.from,filterTo:s.value.to}));return e.selection&&(t=Pp(t,e.selection.main.head)),t},provide:t=>Me.decorations.from(t),toJSON(t,e){let s=[];return t.between(0,e.doc.length,(i,n)=>{s.push(i,n)}),s},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let s=0;s<t.length;){let i=t[s++],n=t[s++];if(typeof i!="number"||typeof n!="number")throw new RangeError("Invalid JSON for fold state");e.push(jp.range(i,n))}return Ie.set(e,!0)}});function Pp(t,e,s=e){let i=!1;return t.between(e,s,(n,r)=>{n<s&&r>e&&(i=!0)}),i?t.update({filterFrom:e,filterTo:s,filter:(n,r)=>n>=s||r<=e}):t}function aa(t,e,s){var i;let n=null;return(i=t.field(In,!1))===null||i===void 0||i.between(e,s,(r,o)=>{(!n||n.from>r)&&(n={from:r,to:o})}),n}function r3(t,e,s){let i=!1;return t.between(e,e,(n,r)=>{n==e&&r==s&&(i=!0)}),i}function Dy(t,e){return t.field(In,!1)?e:e.concat(We.appendConfig.of($y()))}const o3=t=>{for(let e of My(t)){let s=la(t.state,e.from,e.to);if(s)return t.dispatch({effects:Dy(t.state,[Ia.of(s),Ty(t,s)])}),!0}return!1},l3=t=>{if(!t.state.field(In,!1))return!1;let e=[];for(let s of My(t)){let i=aa(t.state,s.from,s.to);i&&e.push(Fo.of(i),Ty(t,i,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function Ty(t,e,s=!0){let i=t.state.doc.lineAt(e.from).number,n=t.state.doc.lineAt(e.to).number;return Me.announce.of(`${t.state.phrase(s?"Folded lines":"Unfolded lines")} ${i} ${t.state.phrase("to")} ${n}.`)}const a3=t=>{let{state:e}=t,s=[];for(let i=0;i<e.doc.length;){let n=t.lineBlockAt(i),r=la(e,n.from,n.to);r&&s.push(Ia.of(r)),i=(r?t.lineBlockAt(r.to):n).to+1}return s.length&&t.dispatch({effects:Dy(t.state,s)}),!!s.length},u3=t=>{let e=t.state.field(In,!1);if(!e||!e.size)return!1;let s=[];return e.between(0,t.state.doc.length,(i,n)=>{s.push(Fo.of({from:i,to:n}))}),t.dispatch({effects:s}),!0},d3=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:o3},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:l3},{key:"Ctrl-Alt-[",run:a3},{key:"Ctrl-Alt-]",run:u3}],c3={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},Ey=De.define({combine(t){return yi(t,c3)}});function $y(t){return[In,m3]}function Oy(t,e){let{state:s}=t,i=s.facet(Ey),n=o=>{let l=t.lineBlockAt(t.posAtDOM(o.target)),a=aa(t.state,l.from,l.to);a&&t.dispatch({effects:Fo.of(a)}),o.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(t,n,e);let r=document.createElement("span");return r.textContent=i.placeholderText,r.setAttribute("aria-label",s.phrase("folded code")),r.title=s.phrase("unfold"),r.className="cm-foldPlaceholder",r.onclick=n,r}const jp=Ie.replace({widget:new class extends cn{toDOM(t){return Oy(t,null)}}});class f3 extends cn{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return Oy(e,this.value)}}const h3={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class Ou extends Ri{constructor(e,s){super(),this.config=e,this.open=s}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let s=document.createElement("span");return s.textContent=this.open?this.config.openText:this.config.closedText,s.title=e.state.phrase(this.open?"Fold line":"Unfold line"),s}}function p3(t={}){let e={...h3,...t},s=new Ou(e,!0),i=new Ou(e,!1),n=Et.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(dn)!=o.state.facet(dn)||o.startState.field(In,!1)!=o.state.field(In,!1)||ts(o.startState)!=ts(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let l=new Pi;for(let a of o.viewportLineBlocks){let d=aa(o.state,a.from,a.to)?i:la(o.state,a.from,a.to)?s:null;d&&l.add(a.from,a.from,d)}return l.finish()}}),{domEventHandlers:r}=e;return[n,h5({class:"cm-foldGutter",markers(o){var l;return((l=o.plugin(n))===null||l===void 0?void 0:l.markers)||Qe.empty},initialSpacer(){return new Ou(e,!1)},domEventHandlers:{...r,click:(o,l,a)=>{if(r.click&&r.click(o,l,a))return!0;let d=aa(o.state,l.from,l.to);if(d)return o.dispatch({effects:Fo.of(d)}),!0;let u=la(o.state,l.from,l.to);return u?(o.dispatch({effects:Ia.of(u)}),!0):!1}}}),$y()]}const m3=Me.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Ho{constructor(e,s){this.specs=e;let i;function n(l){let a=on.newName();return(i||(i=Object.create(null)))["."+a]=l,a}const r=typeof s.all=="string"?s.all:s.all?n(s.all):void 0,o=s.scope;this.scope=o instanceof Ns?l=>l.prop(Xn)==o.data:o?l=>l==o:void 0,this.style=Sy(e.map(l=>({tag:l.tag,class:l.class||n(Object.assign({},l,{tag:null}))})),{all:r}).style,this.module=i?new on(i):null,this.themeType=s.themeType}static define(e,s){return new Ho(e,s||{})}}const Kd=De.define(),Py=De.define({combine(t){return t.length?[t[0]]:null}});function Pu(t){let e=t.facet(Kd);return e.length?e:t.facet(Py)}function jy(t,e){let s=[y3],i;return t instanceof Ho&&(t.module&&s.push(Me.styleModule.of(t.module)),i=t.themeType),e?.fallback?s.push(Py.of(t)):i?s.push(Kd.computeN([Me.darkTheme],n=>n.facet(Me.darkTheme)==(i=="dark")?[t]:[])):s.push(Kd.of(t)),s}class g3{constructor(e){this.markCache=Object.create(null),this.tree=ts(e.state),this.decorations=this.buildDeco(e,Pu(e.state)),this.decoratedTo=e.viewport.to}update(e){let s=ts(e.state),i=Pu(e.state),n=i!=Pu(e.startState),{viewport:r}=e.view,o=e.changes.mapPos(this.decoratedTo,1);s.length<r.to&&!n&&s.type==this.tree.type&&o>=r.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(s!=this.tree||e.viewportChanged||n)&&(this.tree=s,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=r.to)}buildDeco(e,s){if(!s||!this.tree.length)return Ie.none;let i=new Pi;for(let{from:n,to:r}of e.visibleRanges)B5(this.tree,s,(o,l,a)=>{i.add(o,l,this.markCache[a]||(this.markCache[a]=Ie.mark({class:a})))},n,r);return i.finish()}}const y3=Nn.high(Et.fromClass(g3,{decorations:t=>t.decorations})),v3=Ho.define([{tag:_e.meta,color:"#404740"},{tag:_e.link,textDecoration:"underline"},{tag:_e.heading,textDecoration:"underline",fontWeight:"bold"},{tag:_e.emphasis,fontStyle:"italic"},{tag:_e.strong,fontWeight:"bold"},{tag:_e.strikethrough,textDecoration:"line-through"},{tag:_e.keyword,color:"#708"},{tag:[_e.atom,_e.bool,_e.url,_e.contentSeparator,_e.labelName],color:"#219"},{tag:[_e.literal,_e.inserted],color:"#164"},{tag:[_e.string,_e.deleted],color:"#a11"},{tag:[_e.regexp,_e.escape,_e.special(_e.string)],color:"#e40"},{tag:_e.definition(_e.variableName),color:"#00f"},{tag:_e.local(_e.variableName),color:"#30a"},{tag:[_e.typeName,_e.namespace],color:"#085"},{tag:_e.className,color:"#167"},{tag:[_e.special(_e.variableName),_e.macroName],color:"#256"},{tag:_e.definition(_e.propertyName),color:"#00c"},{tag:_e.comment,color:"#940"},{tag:_e.invalid,color:"#f00"}]),b3=Me.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Ry=1e4,Ly="()[]{}",By=De.define({combine(t){return yi(t,{afterCursor:!0,brackets:Ly,maxScanDistance:Ry,renderMatch:w3})}}),x3=Ie.mark({class:"cm-matchingBracket"}),k3=Ie.mark({class:"cm-nonmatchingBracket"});function w3(t){let e=[],s=t.matched?x3:k3;return e.push(s.range(t.start.from,t.start.to)),t.end&&e.push(s.range(t.end.from,t.end.to)),e}const S3=Gt.define({create(){return Ie.none},update(t,e){if(!e.docChanged&&!e.selection)return t;let s=[],i=e.state.facet(By);for(let n of e.state.selection.ranges){if(!n.empty)continue;let r=fi(e.state,n.head,-1,i)||n.head>0&&fi(e.state,n.head-1,1,i)||i.afterCursor&&(fi(e.state,n.head,1,i)||n.head<e.state.doc.length&&fi(e.state,n.head+1,-1,i));r&&(s=s.concat(i.renderMatch(r,e.state)))}return Ie.set(s,!0)},provide:t=>Me.decorations.from(t)}),_3=[S3,b3];function C3(t={}){return[By.of(t),_3]}const A3=new Ke;function Jd(t,e,s){let i=t.prop(e<0?Ke.openedBy:Ke.closedBy);if(i)return i;if(t.name.length==1){let n=s.indexOf(t.name);if(n>-1&&n%2==(e<0?1:0))return[s[n+e]]}return null}function Yd(t){let e=t.type.prop(A3);return e?e(t.node):t}function fi(t,e,s,i={}){let n=i.maxScanDistance||Ry,r=i.brackets||Ly,o=ts(t),l=o.resolveInner(e,s);for(let a=l;a;a=a.parent){let d=Jd(a.type,s,r);if(d&&a.from<a.to){let u=Yd(a);if(u&&(s>0?e>=u.from&&e<u.to:e>u.from&&e<=u.to))return V3(t,e,s,a,u,d,r)}}return M3(t,e,s,o,l.type,n,r)}function V3(t,e,s,i,n,r,o){let l=i.parent,a={from:n.from,to:n.to},d=0,u=l?.cursor();if(u&&(s<0?u.childBefore(i.from):u.childAfter(i.to)))do if(s<0?u.to<=i.from:u.from>=i.to){if(d==0&&r.indexOf(u.type.name)>-1&&u.from<u.to){let f=Yd(u);return{start:a,end:f?{from:f.from,to:f.to}:void 0,matched:!0}}else if(Jd(u.type,s,o))d++;else if(Jd(u.type,-s,o)){if(d==0){let f=Yd(u);return{start:a,end:f&&f.from<f.to?{from:f.from,to:f.to}:void 0,matched:!1}}d--}}while(s<0?u.prevSibling():u.nextSibling());return{start:a,matched:!1}}function M3(t,e,s,i,n,r,o){let l=s<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),a=o.indexOf(l);if(a<0||a%2==0!=s>0)return null;let d={from:s<0?e-1:e,to:s>0?e+1:e},u=t.doc.iterRange(e,s>0?t.doc.length:0),f=0;for(let h=0;!u.next().done&&h<=r;){let m=u.value;s<0&&(h+=m.length);let w=e+h*s;for(let _=s>0?0:m.length-1,C=s>0?m.length:-1;_!=C;_+=s){let M=o.indexOf(m[_]);if(!(M<0||i.resolveInner(w+_,1).type!=n))if(M%2==0==s>0)f++;else{if(f==1)return{start:d,end:{from:w+_,to:w+_+1},matched:M>>1==a>>1};f--}}s>0&&(h+=m.length)}return u.done?{start:d,matched:!1}:null}function Rp(t,e,s,i=0,n=0){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));let r=n;for(let o=i;o<e;o++)t.charCodeAt(o)==9?r+=s-r%s:r++;return r}class Iy{constructor(e,s,i,n){this.string=e,this.tabSize=s,this.indentUnit=i,this.overrideIndent=n,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let s=this.string.charAt(this.pos),i;if(typeof e=="string"?i=s==e:i=s&&(e instanceof RegExp?e.test(s):e(s)),i)return++this.pos,s}eatWhile(e){let s=this.pos;for(;this.eat(e););return this.pos>s}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let s=this.string.indexOf(e,this.pos);if(s>-1)return this.pos=s,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Rp(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:Rp(this.string,null,this.tabSize)}match(e,s,i){if(typeof e=="string"){let n=o=>i?o.toLowerCase():o,r=this.string.substr(this.pos,e.length);return n(r)==n(e)?(s!==!1&&(this.pos+=e.length),!0):null}else{let n=this.string.slice(this.pos).match(e);return n&&n.index>0?null:(n&&s!==!1&&(this.pos+=n[0].length),n)}}current(){return this.string.slice(this.start,this.pos)}}function D3(t){return{name:t.name||"",token:t.token,blankLine:t.blankLine||(()=>{}),startState:t.startState||(()=>!0),copyState:t.copyState||T3,indent:t.indent||(()=>null),languageData:t.languageData||{},tokenTable:t.tokenTable||Yc,mergeTokens:t.mergeTokens!==!1}}function T3(t){if(typeof t!="object")return t;let e={};for(let s in t){let i=t[s];e[s]=i instanceof Array?i.slice():i}return e}const Lp=new WeakMap;class Kc extends Ns{constructor(e){let s=N5(e.languageData),i=D3(e),n,r=new class extends ky{createParse(o,l,a){return new $3(n,o,l,a)}};super(s,r,[],e.name),this.topNode=j3(s,this),n=this,this.streamParser=i,this.stateAfter=new Ke({perNode:!0}),this.tokenTable=e.tokenTable?new Fy(i.tokenTable):P3}static define(e){return new Kc(e)}getIndent(e){let s,{overrideIndentation:i}=e.options;i&&(s=Lp.get(e.state),s!=null&&s<e.pos-1e4&&(s=void 0));let n=Jc(this,e.node.tree,e.node.from,e.node.from,s??e.pos),r,o;if(n?(o=n.state,r=n.pos+1):(o=this.streamParser.startState(e.unit),r=e.node.from),e.pos-r>1e4)return null;for(;r<e.pos;){let a=e.state.doc.lineAt(r),d=Math.min(e.pos,a.to);if(a.length){let u=i?i(a.from):-1,f=new Iy(a.text,e.state.tabSize,e.unit,u<0?void 0:u);for(;f.pos<d-a.from;)Ny(this.streamParser.token,f,o)}else this.streamParser.blankLine(o,e.unit);if(d==e.pos)break;r=a.to+1}let l=e.lineAt(e.pos);return i&&s==null&&Lp.set(e.state,l.from),this.streamParser.indent(o,/^\s*(.*)/.exec(l.text)[1],e)}get allowsNesting(){return!1}}function Jc(t,e,s,i,n){let r=s>=i&&s+e.length<=n&&e.prop(t.stateAfter);if(r)return{state:t.streamParser.copyState(r),pos:s+e.length};for(let o=e.children.length-1;o>=0;o--){let l=e.children[o],a=s+e.positions[o],d=l instanceof xt&&a<n&&Jc(t,l,a,i,n);if(d)return d}return null}function Uy(t,e,s,i,n){if(n&&s<=0&&i>=e.length)return e;!n&&s==0&&e.type==t.topNode&&(n=!0);for(let r=e.children.length-1;r>=0;r--){let o=e.positions[r],l=e.children[r],a;if(o<i&&l instanceof xt){if(!(a=Uy(t,l,s-o,i-o,n)))break;return n?new xt(e.type,e.children.slice(0,r).concat(a),e.positions.slice(0,r+1),o+a.length):a}}return null}function E3(t,e,s,i,n){for(let r of e){let o=r.from+(r.openStart?25:0),l=r.to-(r.openEnd?25:0),a=o<=s&&l>s&&Jc(t,r.tree,0-r.offset,s,l),d;if(a&&a.pos<=i&&(d=Uy(t,r.tree,s+r.offset,a.pos+r.offset,!1)))return{state:a.state,tree:d}}return{state:t.streamParser.startState(n?Bn(n):4),tree:xt.empty}}class $3{constructor(e,s,i,n){this.lang=e,this.input=s,this.fragments=i,this.ranges=n,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=n[n.length-1].to;let r=vr.get(),o=n[0].from,{state:l,tree:a}=E3(e,i,o,this.to,r?.state);this.state=l,this.parsedPos=this.chunkStart=o+a.length;for(let d=0;d<a.children.length;d++)this.chunks.push(a.children[d]),this.chunkPos.push(a.positions[d]);r&&this.parsedPos<r.viewport.from-1e5&&n.some(d=>d.from<=r.viewport.from&&d.to>=r.viewport.from)&&(this.state=this.lang.streamParser.startState(Bn(r.state)),r.skipUntilInView(this.parsedPos,r.viewport.from),this.parsedPos=r.viewport.from),this.moveRangeIndex()}advance(){let e=vr.get(),s=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),i=Math.min(s,this.chunkStart+512);for(e&&(i=Math.min(i,e.viewport.to));this.parsedPos<i;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=s?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,s),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let s=this.input.chunk(e);if(this.input.lineChunks)s==`
`&&(s="");else{let i=s.indexOf(`
`);i>-1&&(s=s.slice(0,i))}return e+s.length<=this.to?s:s.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,s=this.lineAfter(e),i=e+s.length;for(let n=this.rangeIndex;;){let r=this.ranges[n].to;if(r>=i||(s=s.slice(0,r-(i-s.length)),n++,n==this.ranges.length))break;let o=this.ranges[n].from,l=this.lineAfter(o);s+=l,i=o+l.length}return{line:s,end:i}}skipGapsTo(e,s,i){for(;;){let n=this.ranges[this.rangeIndex].to,r=e+s;if(i>0?n>r:n>=r)break;let o=this.ranges[++this.rangeIndex].from;s+=o-n}return s}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,s,i,n){let r=4;if(this.ranges.length>1){n=this.skipGapsTo(s,n,1),s+=n;let l=this.chunk.length;n=this.skipGapsTo(i,n,-1),i+=n,r+=this.chunk.length-l}let o=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&r==4&&o>=0&&this.chunk[o]==e&&this.chunk[o+2]==s?this.chunk[o+2]=i:this.chunk.push(e,s,i,r),n}parseLine(e){let{line:s,end:i}=this.nextLine(),n=0,{streamParser:r}=this.lang,o=new Iy(s,e?e.state.tabSize:4,e?Bn(e.state):2);if(o.eol())r.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let l=Ny(r.token,o,this.state);if(l&&(n=this.emitToken(this.lang.tokenTable.resolve(l),this.parsedPos+o.start,this.parsedPos+o.pos,n)),o.start>1e4)break}this.parsedPos=i,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=xt.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:O3,topID:0,maxBufferLength:512,reused:this.chunkReused});e=new xt(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new xt(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function Ny(t,e,s){e.start=e.pos;for(let i=0;i<10;i++){let n=t(e,s);if(e.pos>e.start)return n}throw new Error("Stream parser failed to advance stream.")}const Yc=Object.create(null),To=[bs.none],O3=new Nc(To),Bp=[],Ip=Object.create(null),zy=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])zy[t]=Hy(Yc,e);class Fy{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),zy)}resolve(e){return e?this.table[e]||(this.table[e]=Hy(this.extra,e)):0}}const P3=new Fy(Yc);function ju(t,e){Bp.indexOf(t)>-1||(Bp.push(t),console.warn(e))}function Hy(t,e){let s=[];for(let l of e.split(" ")){let a=[];for(let d of l.split(".")){let u=t[d]||_e[d];u?typeof u=="function"?a.length?a=a.map(u):ju(d,`Modifier ${d} used at start of tag`):a.length?ju(d,`Tag ${d} used as modifier`):a=Array.isArray(u)?u:[u]:ju(d,`Unknown highlighting tag ${d}`)}for(let d of a)s.push(d)}if(!s.length)return 0;let i=e.replace(/ /g,"_"),n=i+" "+s.map(l=>l.id),r=Ip[n];if(r)return r.id;let o=Ip[n]=bs.define({id:To.length,name:i,props:[R5({[i]:s})]});return To.push(o),o.id}function j3(t,e){let s=bs.define({id:To.length,name:"Document",props:[Xn.add(()=>t),Cy.add(()=>i=>e.getIndent(i))],top:!0});return To.push(s),s}mt.RTL,mt.LTR;const R3=t=>{let{state:e}=t,s=e.doc.lineAt(e.selection.main.from),i=Qc(t.state,s.from);return i.line?L3(t):i.block?I3(t):!1};function Xc(t,e){return({state:s,dispatch:i})=>{if(s.readOnly)return!1;let n=t(e,s);return n?(i(s.update(n)),!0):!1}}const L3=Xc(z3,0),B3=Xc(Wy,0),I3=Xc((t,e)=>Wy(t,e,N3(e)),0);function Qc(t,e){let s=t.languageDataAt("commentTokens",e,1);return s.length?s[0]:{}}const Br=50;function U3(t,{open:e,close:s},i,n){let r=t.sliceDoc(i-Br,i),o=t.sliceDoc(n,n+Br),l=/\s*$/.exec(r)[0].length,a=/^\s*/.exec(o)[0].length,d=r.length-l;if(r.slice(d-e.length,d)==e&&o.slice(a,a+s.length)==s)return{open:{pos:i-l,margin:l&&1},close:{pos:n+a,margin:a&&1}};let u,f;n-i<=2*Br?u=f=t.sliceDoc(i,n):(u=t.sliceDoc(i,i+Br),f=t.sliceDoc(n-Br,n));let h=/^\s*/.exec(u)[0].length,m=/\s*$/.exec(f)[0].length,w=f.length-m-s.length;return u.slice(h,h+e.length)==e&&f.slice(w,w+s.length)==s?{open:{pos:i+h+e.length,margin:/\s/.test(u.charAt(h+e.length))?1:0},close:{pos:n-m-s.length,margin:/\s/.test(f.charAt(w-1))?1:0}}:null}function N3(t){let e=[];for(let s of t.selection.ranges){let i=t.doc.lineAt(s.from),n=s.to<=i.to?i:t.doc.lineAt(s.to);n.from>i.from&&n.from==s.to&&(n=s.to==i.to+1?i:t.doc.lineAt(s.to-1));let r=e.length-1;r>=0&&e[r].to>i.from?e[r].to=n.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:n.to})}return e}function Wy(t,e,s=e.selection.ranges){let i=s.map(r=>Qc(e,r.from).block);if(!i.every(r=>r))return null;let n=s.map((r,o)=>U3(e,i[o],r.from,r.to));if(t!=2&&!n.every(r=>r))return{changes:e.changes(s.map((r,o)=>n[o]?[]:[{from:r.from,insert:i[o].open+" "},{from:r.to,insert:" "+i[o].close}]))};if(t!=1&&n.some(r=>r)){let r=[];for(let o=0,l;o<n.length;o++)if(l=n[o]){let a=i[o],{open:d,close:u}=l;r.push({from:d.pos-a.open.length,to:d.pos+d.margin},{from:u.pos-u.margin,to:u.pos+a.close.length})}return{changes:r}}return null}function z3(t,e,s=e.selection.ranges){let i=[],n=-1;for(let{from:r,to:o}of s){let l=i.length,a=1e9,d=Qc(e,r).line;if(d){for(let u=r;u<=o;){let f=e.doc.lineAt(u);if(f.from>n&&(r==o||o>f.from)){n=f.from;let h=/^\s*/.exec(f.text)[0].length,m=h==f.length,w=f.text.slice(h,h+d.length)==d?h:-1;h<f.text.length&&h<a&&(a=h),i.push({line:f,comment:w,token:d,indent:h,empty:m,single:!1})}u=f.to+1}if(a<1e9)for(let u=l;u<i.length;u++)i[u].indent<i[u].line.text.length&&(i[u].indent=a);i.length==l+1&&(i[l].single=!0)}}if(t!=2&&i.some(r=>r.comment<0&&(!r.empty||r.single))){let r=[];for(let{line:l,token:a,indent:d,empty:u,single:f}of i)(f||!u)&&r.push({from:l.from+d,insert:a+" "});let o=e.changes(r);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&i.some(r=>r.comment>=0)){let r=[];for(let{line:o,comment:l,token:a}of i)if(l>=0){let d=o.from+l,u=d+a.length;o.text[u-o.from]==" "&&u++,r.push({from:d,to:u})}return{changes:r}}return null}const Xd=Bi.define(),F3=Bi.define(),H3=De.define(),qy=De.define({combine(t){return yi(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,s)=>s},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,s)=>(i,n)=>e(i,n)||s(i,n)})}}),Gy=Gt.define({create(){return hi.empty},update(t,e){let s=e.state.facet(qy),i=e.annotation(Xd);if(i){let a=vs.fromTransaction(e,i.selection),d=i.side,u=d==0?t.undone:t.done;return a?u=ua(u,u.length,s.minDepth,a):u=Yy(u,e.startState.selection),new hi(d==0?i.rest:u,d==0?u:i.rest)}let n=e.annotation(F3);if((n=="full"||n=="before")&&(t=t.isolate()),e.annotation(jt.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let r=vs.fromTransaction(e),o=e.annotation(jt.time),l=e.annotation(jt.userEvent);return r?t=t.addChanges(r,o,l,s,e):e.selection&&(t=t.addSelection(e.startState.selection,o,l,s.newGroupDelay)),(n=="full"||n=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new hi(t.done.map(vs.fromJSON),t.undone.map(vs.fromJSON))}});function W3(t={}){return[Gy,qy.of(t),Me.domEventHandlers({beforeinput(e,s){let i=e.inputType=="historyUndo"?Ky:e.inputType=="historyRedo"?Qd:null;return i?(e.preventDefault(),i(s)):!1}})]}function Ua(t,e){return function({state:s,dispatch:i}){if(!e&&s.readOnly)return!1;let n=s.field(Gy,!1);if(!n)return!1;let r=n.pop(t,s,e);return r?(i(r),!0):!1}}const Ky=Ua(0,!1),Qd=Ua(1,!1),q3=Ua(0,!0),G3=Ua(1,!0);class vs{constructor(e,s,i,n,r){this.changes=e,this.effects=s,this.mapped=i,this.startSelection=n,this.selectionsAfter=r}setSelAfter(e){return new vs(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,s,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(s=this.mapped)===null||s===void 0?void 0:s.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(n=>n.toJSON())}}static fromJSON(e){return new vs(e.changes&&Pt.fromJSON(e.changes),[],e.mapped&&mi.fromJSON(e.mapped),e.startSelection&&ie.fromJSON(e.startSelection),e.selectionsAfter.map(ie.fromJSON))}static fromTransaction(e,s){let i=Es;for(let n of e.startState.facet(H3)){let r=n(e);r.length&&(i=i.concat(r))}return!i.length&&e.changes.empty?null:new vs(e.changes.invert(e.startState.doc),i,void 0,s||e.startState.selection,Es)}static selection(e){return new vs(void 0,Es,void 0,void 0,e)}}function ua(t,e,s,i){let n=e+1>s+20?e-s-1:0,r=t.slice(n,e);return r.push(i),r}function K3(t,e){let s=[],i=!1;return t.iterChangedRanges((n,r)=>s.push(n,r)),e.iterChangedRanges((n,r,o,l)=>{for(let a=0;a<s.length;){let d=s[a++],u=s[a++];l>=d&&o<=u&&(i=!0)}}),i}function J3(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((s,i)=>s.empty!=e.ranges[i].empty).length===0}function Jy(t,e){return t.length?e.length?t.concat(e):t:e}const Es=[],Y3=200;function Yy(t,e){if(t.length){let s=t[t.length-1],i=s.selectionsAfter.slice(Math.max(0,s.selectionsAfter.length-Y3));return i.length&&i[i.length-1].eq(e)?t:(i.push(e),ua(t,t.length-1,1e9,s.setSelAfter(i)))}else return[vs.selection([e])]}function X3(t){let e=t[t.length-1],s=t.slice();return s[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),s}function Ru(t,e){if(!t.length)return t;let s=t.length,i=Es;for(;s;){let n=Q3(t[s-1],e,i);if(n.changes&&!n.changes.empty||n.effects.length){let r=t.slice(0,s);return r[s-1]=n,r}else e=n.mapped,s--,i=n.selectionsAfter}return i.length?[vs.selection(i)]:Es}function Q3(t,e,s){let i=Jy(t.selectionsAfter.length?t.selectionsAfter.map(l=>l.map(e)):Es,s);if(!t.changes)return vs.selection(i);let n=t.changes.map(e),r=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(r):r;return new vs(n,We.mapEffects(t.effects,e),o,t.startSelection.map(r),i)}const Z3=/^(input\.type|delete)($|\.)/;class hi{constructor(e,s,i=0,n=void 0){this.done=e,this.undone=s,this.prevTime=i,this.prevUserEvent=n}isolate(){return this.prevTime?new hi(this.done,this.undone):this}addChanges(e,s,i,n,r){let o=this.done,l=o[o.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!i||Z3.test(i))&&(!l.selectionsAfter.length&&s-this.prevTime<n.newGroupDelay&&n.joinToEvent(r,K3(l.changes,e.changes))||i=="input.type.compose")?o=ua(o,o.length-1,n.minDepth,new vs(e.changes.compose(l.changes),Jy(We.mapEffects(e.effects,l.changes),l.effects),l.mapped,l.startSelection,Es)):o=ua(o,o.length,n.minDepth,e),new hi(o,Es,s,i)}addSelection(e,s,i,n){let r=this.done.length?this.done[this.done.length-1].selectionsAfter:Es;return r.length>0&&s-this.prevTime<n&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&J3(r[r.length-1],e)?this:new hi(Yy(this.done,e),this.undone,s,i)}addMapping(e){return new hi(Ru(this.done,e),Ru(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,s,i){let n=e==0?this.done:this.undone;if(n.length==0)return null;let r=n[n.length-1],o=r.selectionsAfter[0]||s.selection;if(i&&r.selectionsAfter.length)return s.update({selection:r.selectionsAfter[r.selectionsAfter.length-1],annotations:Xd.of({side:e,rest:X3(n),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(r.changes){let l=n.length==1?Es:n.slice(0,n.length-1);return r.mapped&&(l=Ru(l,r.mapped)),s.update({changes:r.changes,selection:r.startSelection,effects:r.effects,annotations:Xd.of({side:e,rest:l,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}hi.empty=new hi(Es,Es);const eA=[{key:"Mod-z",run:Ky,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Qd,preventDefault:!0},{linux:"Ctrl-Shift-z",run:Qd,preventDefault:!0},{key:"Mod-u",run:q3,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:G3,preventDefault:!0}];function Vr(t,e){return ie.create(t.ranges.map(e),t.mainIndex)}function Ys(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Xs({state:t,dispatch:e},s){let i=Vr(t.selection,s);return i.eq(t.selection,!0)?!1:(e(Ys(t,i)),!0)}function Na(t,e){return ie.cursor(e?t.to:t.from)}function Xy(t,e){return Xs(t,s=>s.empty?t.moveByChar(s,e):Na(s,e))}function ss(t){return t.textDirectionAt(t.state.selection.main.head)==mt.LTR}const Qy=t=>Xy(t,!ss(t)),Zy=t=>Xy(t,ss(t));function ev(t,e){return Xs(t,s=>s.empty?t.moveByGroup(s,e):Na(s,e))}const tA=t=>ev(t,!ss(t)),sA=t=>ev(t,ss(t));function iA(t,e,s){if(e.type.prop(s))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function za(t,e,s){let i=ts(t).resolveInner(e.head),n=s?Ke.closedBy:Ke.openedBy;for(let a=e.head;;){let d=s?i.childAfter(a):i.childBefore(a);if(!d)break;iA(t,d,n)?i=d:a=s?d.to:d.from}let r=i.type.prop(n),o,l;return r&&(o=s?fi(t,i.from,1):fi(t,i.to,-1))&&o.matched?l=s?o.end.to:o.end.from:l=s?i.to:i.from,ie.cursor(l,s?-1:1)}const nA=t=>Xs(t,e=>za(t.state,e,!ss(t))),rA=t=>Xs(t,e=>za(t.state,e,ss(t)));function tv(t,e){return Xs(t,s=>{if(!s.empty)return Na(s,e);let i=t.moveVertically(s,e);return i.head!=s.head?i:t.moveToLineBoundary(s,e)})}const sv=t=>tv(t,!1),iv=t=>tv(t,!0);function nv(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,s=0,i=0,n;if(e){for(let r of t.state.facet(Me.scrollMargins)){let o=r(t);o?.top&&(s=Math.max(o?.top,s)),o?.bottom&&(i=Math.max(o?.bottom,i))}n=t.scrollDOM.clientHeight-s-i}else n=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:s,marginBottom:i,selfScroll:e,height:Math.max(t.defaultLineHeight,n-5)}}function rv(t,e){let s=nv(t),{state:i}=t,n=Vr(i.selection,o=>o.empty?t.moveVertically(o,e,s.height):Na(o,e));if(n.eq(i.selection))return!1;let r;if(s.selfScroll){let o=t.coordsAtPos(i.selection.main.head),l=t.scrollDOM.getBoundingClientRect(),a=l.top+s.marginTop,d=l.bottom-s.marginBottom;o&&o.top>a&&o.bottom<d&&(r=Me.scrollIntoView(n.main.head,{y:"start",yMargin:o.top-a}))}return t.dispatch(Ys(i,n),{effects:r}),!0}const Up=t=>rv(t,!1),Zd=t=>rv(t,!0);function fn(t,e,s){let i=t.lineBlockAt(e.head),n=t.moveToLineBoundary(e,s);if(n.head==e.head&&n.head!=(s?i.to:i.from)&&(n=t.moveToLineBoundary(e,s,!1)),!s&&n.head==i.from&&i.length){let r=/^\s*/.exec(t.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;r&&e.head!=i.from+r&&(n=ie.cursor(i.from+r))}return n}const oA=t=>Xs(t,e=>fn(t,e,!0)),lA=t=>Xs(t,e=>fn(t,e,!1)),aA=t=>Xs(t,e=>fn(t,e,!ss(t))),uA=t=>Xs(t,e=>fn(t,e,ss(t))),dA=t=>Xs(t,e=>ie.cursor(t.lineBlockAt(e.head).from,1)),cA=t=>Xs(t,e=>ie.cursor(t.lineBlockAt(e.head).to,-1));function fA(t,e,s){let i=!1,n=Vr(t.selection,r=>{let o=fi(t,r.head,-1)||fi(t,r.head,1)||r.head>0&&fi(t,r.head-1,1)||r.head<t.doc.length&&fi(t,r.head+1,-1);if(!o||!o.end)return r;i=!0;let l=o.start.from==r.head?o.end.to:o.end.from;return ie.cursor(l)});return i?(e(Ys(t,n)),!0):!1}const hA=({state:t,dispatch:e})=>fA(t,e);function Is(t,e){let s=Vr(t.state.selection,i=>{let n=e(i);return ie.range(i.anchor,n.head,n.goalColumn,n.bidiLevel||void 0)});return s.eq(t.state.selection)?!1:(t.dispatch(Ys(t.state,s)),!0)}function ov(t,e){return Is(t,s=>t.moveByChar(s,e))}const lv=t=>ov(t,!ss(t)),av=t=>ov(t,ss(t));function uv(t,e){return Is(t,s=>t.moveByGroup(s,e))}const pA=t=>uv(t,!ss(t)),mA=t=>uv(t,ss(t)),gA=t=>Is(t,e=>za(t.state,e,!ss(t))),yA=t=>Is(t,e=>za(t.state,e,ss(t)));function dv(t,e){return Is(t,s=>t.moveVertically(s,e))}const cv=t=>dv(t,!1),fv=t=>dv(t,!0);function hv(t,e){return Is(t,s=>t.moveVertically(s,e,nv(t).height))}const Np=t=>hv(t,!1),zp=t=>hv(t,!0),vA=t=>Is(t,e=>fn(t,e,!0)),bA=t=>Is(t,e=>fn(t,e,!1)),xA=t=>Is(t,e=>fn(t,e,!ss(t))),kA=t=>Is(t,e=>fn(t,e,ss(t))),wA=t=>Is(t,e=>ie.cursor(t.lineBlockAt(e.head).from)),SA=t=>Is(t,e=>ie.cursor(t.lineBlockAt(e.head).to)),Fp=({state:t,dispatch:e})=>(e(Ys(t,{anchor:0})),!0),Hp=({state:t,dispatch:e})=>(e(Ys(t,{anchor:t.doc.length})),!0),Wp=({state:t,dispatch:e})=>(e(Ys(t,{anchor:t.selection.main.anchor,head:0})),!0),qp=({state:t,dispatch:e})=>(e(Ys(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),_A=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),CA=({state:t,dispatch:e})=>{let s=Fa(t).map(({from:i,to:n})=>ie.range(i,Math.min(n+1,t.doc.length)));return e(t.update({selection:ie.create(s),userEvent:"select"})),!0},AA=({state:t,dispatch:e})=>{let s=Vr(t.selection,i=>{let n=ts(t),r=n.resolveStack(i.from,1);if(i.empty){let o=n.resolveStack(i.from,-1);o.node.from>=r.node.from&&o.node.to<=r.node.to&&(r=o)}for(let o=r;o;o=o.next){let{node:l}=o;if((l.from<i.from&&l.to>=i.to||l.to>i.to&&l.from<=i.from)&&o.next)return ie.range(l.to,l.from)}return i});return s.eq(t.selection)?!1:(e(Ys(t,s)),!0)};function pv(t,e){let{state:s}=t,i=s.selection,n=s.selection.ranges.slice();for(let r of s.selection.ranges){let o=s.doc.lineAt(r.head);if(e?o.to<t.state.doc.length:o.from>0)for(let l=r;;){let a=t.moveVertically(l,e);if(a.head<o.from||a.head>o.to){n.some(d=>d.head==a.head)||n.push(a);break}else{if(a.head==l.head)break;l=a}}}return n.length==i.ranges.length?!1:(t.dispatch(Ys(s,ie.create(n,n.length-1))),!0)}const VA=t=>pv(t,!1),MA=t=>pv(t,!0),DA=({state:t,dispatch:e})=>{let s=t.selection,i=null;return s.ranges.length>1?i=ie.create([s.main]):s.main.empty||(i=ie.create([ie.cursor(s.main.head)])),i?(e(Ys(t,i)),!0):!1};function Wo(t,e){if(t.state.readOnly)return!1;let s="delete.selection",{state:i}=t,n=i.changeByRange(r=>{let{from:o,to:l}=r;if(o==l){let a=e(r);a<o?(s="delete.backward",a=xl(t,a,!1)):a>o&&(s="delete.forward",a=xl(t,a,!0)),o=Math.min(o,a),l=Math.max(l,a)}else o=xl(t,o,!1),l=xl(t,l,!0);return o==l?{range:r}:{changes:{from:o,to:l},range:ie.cursor(o,o<r.head?-1:1)}});return n.changes.empty?!1:(t.dispatch(i.update(n,{scrollIntoView:!0,userEvent:s,effects:s=="delete.selection"?Me.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function xl(t,e,s){if(t instanceof Me)for(let i of t.state.facet(Me.atomicRanges).map(n=>n(t)))i.between(e,e,(n,r)=>{n<e&&r>e&&(e=s?r:n)});return e}const mv=(t,e,s)=>Wo(t,i=>{let n=i.from,{state:r}=t,o=r.doc.lineAt(n),l,a;if(s&&!e&&n>o.from&&n<o.from+200&&!/[^ \t]/.test(l=o.text.slice(0,n-o.from))){if(l[l.length-1]=="	")return n-1;let d=Ar(l,r.tabSize),u=d%Bn(r)||Bn(r);for(let f=0;f<u&&l[l.length-1-f]==" ";f++)n--;a=n}else a=qt(o.text,n-o.from,e,e)+o.from,a==n&&o.number!=(e?r.doc.lines:1)?a+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(a-o.from,n-o.from))&&(a=qt(o.text,a-o.from,!1,!1)+o.from);return a}),ec=t=>mv(t,!1,!0),gv=t=>mv(t,!0,!1),yv=(t,e)=>Wo(t,s=>{let i=s.head,{state:n}=t,r=n.doc.lineAt(i),o=n.charCategorizer(i);for(let l=null;;){if(i==(e?r.to:r.from)){i==s.head&&r.number!=(e?n.doc.lines:1)&&(i+=e?1:-1);break}let a=qt(r.text,i-r.from,e)+r.from,d=r.text.slice(Math.min(i,a)-r.from,Math.max(i,a)-r.from),u=o(d);if(l!=null&&u!=l)break;(d!=" "||i!=s.head)&&(l=u),i=a}return i}),vv=t=>yv(t,!1),TA=t=>yv(t,!0),EA=t=>Wo(t,e=>{let s=t.lineBlockAt(e.head).to;return e.head<s?s:Math.min(t.state.doc.length,e.head+1)}),$A=t=>Wo(t,e=>{let s=t.moveToLineBoundary(e,!1).head;return e.head>s?s:Math.max(0,e.head-1)}),OA=t=>Wo(t,e=>{let s=t.moveToLineBoundary(e,!0).head;return e.head<s?s:Math.min(t.state.doc.length,e.head+1)}),PA=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let s=t.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:Ze.of(["",""])},range:ie.cursor(i.from)}));return e(t.update(s,{scrollIntoView:!0,userEvent:"input"})),!0},jA=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let s=t.changeByRange(i=>{if(!i.empty||i.from==0||i.from==t.doc.length)return{range:i};let n=i.from,r=t.doc.lineAt(n),o=n==r.from?n-1:qt(r.text,n-r.from,!1)+r.from,l=n==r.to?n+1:qt(r.text,n-r.from,!0)+r.from;return{changes:{from:o,to:l,insert:t.doc.slice(n,l).append(t.doc.slice(o,n))},range:ie.cursor(l)}});return s.changes.empty?!1:(e(t.update(s,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Fa(t){let e=[],s=-1;for(let i of t.selection.ranges){let n=t.doc.lineAt(i.from),r=t.doc.lineAt(i.to);if(!i.empty&&i.to==r.from&&(r=t.doc.lineAt(i.to-1)),s>=n.number){let o=e[e.length-1];o.to=r.to,o.ranges.push(i)}else e.push({from:n.from,to:r.to,ranges:[i]});s=r.number+1}return e}function bv(t,e,s){if(t.readOnly)return!1;let i=[],n=[];for(let r of Fa(t)){if(s?r.to==t.doc.length:r.from==0)continue;let o=t.doc.lineAt(s?r.to+1:r.from-1),l=o.length+1;if(s){i.push({from:r.to,to:o.to},{from:r.from,insert:o.text+t.lineBreak});for(let a of r.ranges)n.push(ie.range(Math.min(t.doc.length,a.anchor+l),Math.min(t.doc.length,a.head+l)))}else{i.push({from:o.from,to:r.from},{from:r.to,insert:t.lineBreak+o.text});for(let a of r.ranges)n.push(ie.range(a.anchor-l,a.head-l))}}return i.length?(e(t.update({changes:i,scrollIntoView:!0,selection:ie.create(n,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const RA=({state:t,dispatch:e})=>bv(t,e,!1),LA=({state:t,dispatch:e})=>bv(t,e,!0);function xv(t,e,s){if(t.readOnly)return!1;let i=[];for(let n of Fa(t))s?i.push({from:n.from,insert:t.doc.slice(n.from,n.to)+t.lineBreak}):i.push({from:n.to,insert:t.lineBreak+t.doc.slice(n.from,n.to)});return e(t.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const BA=({state:t,dispatch:e})=>xv(t,e,!1),IA=({state:t,dispatch:e})=>xv(t,e,!0),UA=t=>{if(t.state.readOnly)return!1;let{state:e}=t,s=e.changes(Fa(e).map(({from:n,to:r})=>(n>0?n--:r<e.doc.length&&r++,{from:n,to:r}))),i=Vr(e.selection,n=>{let r;if(t.lineWrapping){let o=t.lineBlockAt(n.head),l=t.coordsAtPos(n.head,n.assoc||1);l&&(r=o.bottom+t.documentTop-l.bottom+t.defaultLineHeight/2)}return t.moveVertically(n,!0,r)}).map(s);return t.dispatch({changes:s,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function NA(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let s=ts(t).resolveInner(e),i=s.childBefore(e),n=s.childAfter(e),r;return i&&n&&i.to<=e&&n.from>=e&&(r=i.type.prop(Ke.closedBy))&&r.indexOf(n.name)>-1&&t.doc.lineAt(i.to).from==t.doc.lineAt(n.from).from&&!/\S/.test(t.sliceDoc(i.to,n.from))?{from:i.to,to:n.from}:null}const Gp=kv(!1),zA=kv(!0);function kv(t){return({state:e,dispatch:s})=>{if(e.readOnly)return!1;let i=e.changeByRange(n=>{let{from:r,to:o}=n,l=e.doc.lineAt(r),a=!t&&r==o&&NA(e,r);t&&(r=o=(o<=l.to?l:e.doc.lineAt(o)).to);let d=new Ba(e,{simulateBreak:r,simulateDoubleBreak:!!a}),u=qc(d,r);for(u==null&&(u=Ar(/^\s*/.exec(e.doc.lineAt(r).text)[0],e.tabSize));o<l.to&&/\s/.test(l.text[o-l.from]);)o++;a?{from:r,to:o}=a:r>l.from&&r<l.from+100&&!/\S/.test(l.text.slice(0,r))&&(r=l.from);let f=["",Do(e,u)];return a&&f.push(Do(e,d.lineIndent(l.from,-1))),{changes:{from:r,to:o,insert:Ze.of(f)},range:ie.cursor(r+1+f[1].length)}});return s(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function Zc(t,e){let s=-1;return t.changeByRange(i=>{let n=[];for(let o=i.from;o<=i.to;){let l=t.doc.lineAt(o);l.number>s&&(i.empty||i.to>l.from)&&(e(l,n,i),s=l.number),o=l.to+1}let r=t.changes(n);return{changes:n,range:ie.range(r.mapPos(i.anchor,1),r.mapPos(i.head,1))}})}const FA=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let s=Object.create(null),i=new Ba(t,{overrideIndentation:r=>{let o=s[r];return o??-1}}),n=Zc(t,(r,o,l)=>{let a=qc(i,r.from);if(a==null)return;/\S/.test(r.text)||(a=0);let d=/^\s*/.exec(r.text)[0],u=Do(t,a);(d!=u||l.from<r.from+d.length)&&(s[r.from]=a,o.push({from:r.from,to:r.from+d.length,insert:u}))});return n.changes.empty||e(t.update(n,{userEvent:"indent"})),!0},HA=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(Zc(t,(s,i)=>{i.push({from:s.from,insert:t.facet(Wc)})}),{userEvent:"input.indent"})),!0),WA=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(Zc(t,(s,i)=>{let n=/^\s*/.exec(s.text)[0];if(!n)return;let r=Ar(n,t.tabSize),o=0,l=Do(t,Math.max(0,r-Bn(t)));for(;o<n.length&&o<l.length&&n.charCodeAt(o)==l.charCodeAt(o);)o++;i.push({from:s.from+o,to:s.from+n.length,insert:l.slice(o)})}),{userEvent:"delete.dedent"})),!0),qA=t=>(t.setTabFocusMode(),!0),GA=[{key:"Ctrl-b",run:Qy,shift:lv,preventDefault:!0},{key:"Ctrl-f",run:Zy,shift:av},{key:"Ctrl-p",run:sv,shift:cv},{key:"Ctrl-n",run:iv,shift:fv},{key:"Ctrl-a",run:dA,shift:wA},{key:"Ctrl-e",run:cA,shift:SA},{key:"Ctrl-d",run:gv},{key:"Ctrl-h",run:ec},{key:"Ctrl-k",run:EA},{key:"Ctrl-Alt-h",run:vv},{key:"Ctrl-o",run:PA},{key:"Ctrl-t",run:jA},{key:"Ctrl-v",run:Zd}],KA=[{key:"ArrowLeft",run:Qy,shift:lv,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:tA,shift:pA,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:aA,shift:xA,preventDefault:!0},{key:"ArrowRight",run:Zy,shift:av,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:sA,shift:mA,preventDefault:!0},{mac:"Cmd-ArrowRight",run:uA,shift:kA,preventDefault:!0},{key:"ArrowUp",run:sv,shift:cv,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Fp,shift:Wp},{mac:"Ctrl-ArrowUp",run:Up,shift:Np},{key:"ArrowDown",run:iv,shift:fv,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Hp,shift:qp},{mac:"Ctrl-ArrowDown",run:Zd,shift:zp},{key:"PageUp",run:Up,shift:Np},{key:"PageDown",run:Zd,shift:zp},{key:"Home",run:lA,shift:bA,preventDefault:!0},{key:"Mod-Home",run:Fp,shift:Wp},{key:"End",run:oA,shift:vA,preventDefault:!0},{key:"Mod-End",run:Hp,shift:qp},{key:"Enter",run:Gp,shift:Gp},{key:"Mod-a",run:_A},{key:"Backspace",run:ec,shift:ec,preventDefault:!0},{key:"Delete",run:gv,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:vv,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:TA,preventDefault:!0},{mac:"Mod-Backspace",run:$A,preventDefault:!0},{mac:"Mod-Delete",run:OA,preventDefault:!0}].concat(GA.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),JA=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:nA,shift:gA},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:rA,shift:yA},{key:"Alt-ArrowUp",run:RA},{key:"Shift-Alt-ArrowUp",run:BA},{key:"Alt-ArrowDown",run:LA},{key:"Shift-Alt-ArrowDown",run:IA},{key:"Mod-Alt-ArrowUp",run:VA},{key:"Mod-Alt-ArrowDown",run:MA},{key:"Escape",run:DA},{key:"Mod-Enter",run:zA},{key:"Alt-l",mac:"Ctrl-l",run:CA},{key:"Mod-i",run:AA,preventDefault:!0},{key:"Mod-[",run:WA},{key:"Mod-]",run:HA},{key:"Mod-Alt-\\",run:FA},{key:"Shift-Mod-k",run:UA},{key:"Shift-Mod-\\",run:hA},{key:"Mod-/",run:R3},{key:"Alt-A",run:B3},{key:"Ctrl-m",mac:"Shift-Alt-m",run:qA}].concat(KA),Kp=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class xr{constructor(e,s,i=0,n=e.length,r,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,n),this.bufferStart=i,this.normalize=r?l=>r(Kp(l)):Kp,this.query=this.normalize(s)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return ms(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let s=Cc(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=ui(e);let n=this.normalize(s);if(n.length)for(let r=0,o=i;;r++){let l=n.charCodeAt(r),a=this.match(l,o,this.bufferPos+this.bufferStart);if(r==n.length-1){if(a)return this.value=a,this;break}o==i&&r<s.length&&s.charCodeAt(r)==l&&o++}}}match(e,s,i){let n=null;for(let r=0;r<this.matches.length;r+=2){let o=this.matches[r],l=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?n={from:this.matches[r+1],to:i}:(this.matches[r]++,l=!0)),l||(this.matches.splice(r,2),r-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?n={from:s,to:i}:this.matches.push(1,s)),n&&this.test&&!this.test(n.from,n.to,this.buffer,this.bufferStart)&&(n=null),n}}typeof Symbol<"u"&&(xr.prototype[Symbol.iterator]=function(){return this});const wv={from:-1,to:-1,match:/.*/.exec("")},ef="gm"+(/x/.unicode==null?"":"u");class Sv{constructor(e,s,i,n=0,r=e.length){if(this.text=e,this.to=r,this.curLine="",this.done=!1,this.value=wv,/\\[sWDnr]|\n|\r|\[\^/.test(s))return new _v(e,s,i,n,r);this.re=new RegExp(s,ef+(i?.ignoreCase?"i":"")),this.test=i?.test,this.iter=e.iter();let o=e.lineAt(n);this.curLineStart=o.from,this.matchPos=da(e,n),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let s=this.matchPos<=this.to&&this.re.exec(this.curLine);if(s){let i=this.curLineStart+s.index,n=i+s[0].length;if(this.matchPos=da(this.text,n+(i==n?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<n||i>this.value.to)&&(!this.test||this.test(i,n,s)))return this.value={from:i,to:n,match:s},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const Lu=new WeakMap;class ur{constructor(e,s){this.from=e,this.text=s}get to(){return this.from+this.text.length}static get(e,s,i){let n=Lu.get(e);if(!n||n.from>=i||n.to<=s){let l=new ur(s,e.sliceString(s,i));return Lu.set(e,l),l}if(n.from==s&&n.to==i)return n;let{text:r,from:o}=n;return o>s&&(r=e.sliceString(s,o)+r,o=s),n.to<i&&(r+=e.sliceString(n.to,i)),Lu.set(e,new ur(o,r)),new ur(s,r.slice(s-o,i-o))}}class _v{constructor(e,s,i,n,r){this.text=e,this.to=r,this.done=!1,this.value=wv,this.matchPos=da(e,n),this.re=new RegExp(s,ef+(i?.ignoreCase?"i":"")),this.test=i?.test,this.flat=ur.get(e,n,this.chunkEnd(n+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,s=this.re.exec(this.flat.text);if(s&&!s[0]&&s.index==e&&(this.re.lastIndex=e+1,s=this.re.exec(this.flat.text)),s){let i=this.flat.from+s.index,n=i+s[0].length;if((this.flat.to>=this.to||s.index+s[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,n,s)))return this.value={from:i,to:n,match:s},this.matchPos=da(this.text,n+(i==n?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=ur.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(Sv.prototype[Symbol.iterator]=_v.prototype[Symbol.iterator]=function(){return this});function YA(t){try{return new RegExp(t,ef),!0}catch{return!1}}function da(t,e){if(e>=t.length)return e;let s=t.lineAt(e),i;for(;e<s.to&&(i=s.text.charCodeAt(e-s.from))>=56320&&i<57344;)e++;return e}function tc(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),s=ut("input",{class:"cm-textfield",name:"line",value:e}),i=ut("form",{class:"cm-gotoLine",onkeydown:r=>{r.keyCode==27?(r.preventDefault(),t.dispatch({effects:ro.of(!1)}),t.focus()):r.keyCode==13&&(r.preventDefault(),n())},onsubmit:r=>{r.preventDefault(),n()}},ut("label",t.state.phrase("Go to line"),": ",s)," ",ut("button",{class:"cm-button",type:"submit"},t.state.phrase("go")),ut("button",{name:"close",onclick:()=>{t.dispatch({effects:ro.of(!1)}),t.focus()},"aria-label":t.state.phrase("close"),type:"button"},[""]));function n(){let r=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(s.value);if(!r)return;let{state:o}=t,l=o.doc.lineAt(o.selection.main.head),[,a,d,u,f]=r,h=u?+u.slice(1):0,m=d?+d:l.number;if(d&&f){let C=m/100;a&&(C=C*(a=="-"?-1:1)+l.number/o.doc.lines),m=Math.round(o.doc.lines*C)}else d&&a&&(m=m*(a=="-"?-1:1)+l.number);let w=o.doc.line(Math.max(1,Math.min(o.doc.lines,m))),_=ie.cursor(w.from+Math.max(0,Math.min(h,w.length)));t.dispatch({effects:[ro.of(!1),Me.scrollIntoView(_.from,{y:"center"})],selection:_}),t.focus()}return{dom:i}}const ro=We.define(),Jp=Gt.define({create(){return!0},update(t,e){for(let s of e.effects)s.is(ro)&&(t=s.value);return t},provide:t=>Ao.from(t,e=>e?tc:null)}),XA=t=>{let e=Co(t,tc);if(!e){let s=[ro.of(!0)];t.state.field(Jp,!1)==null&&s.push(We.appendConfig.of([Jp,QA])),t.dispatch({effects:s}),e=Co(t,tc)}return e&&e.dom.querySelector("input").select(),!0},QA=Me.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),ZA={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},e8=De.define({combine(t){return yi(t,ZA,{highlightWordAroundCursor:(e,s)=>e||s,minSelectionLength:Math.min,maxMatches:Math.min})}});function t8(t){return[o8,r8]}const s8=Ie.mark({class:"cm-selectionMatch"}),i8=Ie.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function Yp(t,e,s,i){return(s==0||t(e.sliceDoc(s-1,s))!=yt.Word)&&(i==e.doc.length||t(e.sliceDoc(i,i+1))!=yt.Word)}function n8(t,e,s,i){return t(e.sliceDoc(s,s+1))==yt.Word&&t(e.sliceDoc(i-1,i))==yt.Word}const r8=Et.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.selectionSet||t.docChanged||t.viewportChanged)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=t.state.facet(e8),{state:s}=t,i=s.selection;if(i.ranges.length>1)return Ie.none;let n=i.main,r,o=null;if(n.empty){if(!e.highlightWordAroundCursor)return Ie.none;let a=s.wordAt(n.head);if(!a)return Ie.none;o=s.charCategorizer(n.head),r=s.sliceDoc(a.from,a.to)}else{let a=n.to-n.from;if(a<e.minSelectionLength||a>200)return Ie.none;if(e.wholeWords){if(r=s.sliceDoc(n.from,n.to),o=s.charCategorizer(n.head),!(Yp(o,s,n.from,n.to)&&n8(o,s,n.from,n.to)))return Ie.none}else if(r=s.sliceDoc(n.from,n.to),!r)return Ie.none}let l=[];for(let a of t.visibleRanges){let d=new xr(s.doc,r,a.from,a.to);for(;!d.next().done;){let{from:u,to:f}=d.value;if((!o||Yp(o,s,u,f))&&(n.empty&&u<=n.from&&f>=n.to?l.push(i8.range(u,f)):(u>=n.to||f<=n.from)&&l.push(s8.range(u,f)),l.length>e.maxMatches))return Ie.none}}return Ie.set(l)}},{decorations:t=>t.decorations}),o8=Me.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),l8=({state:t,dispatch:e})=>{let{selection:s}=t,i=ie.create(s.ranges.map(n=>t.wordAt(n.head)||ie.cursor(n.head)),s.mainIndex);return i.eq(s)?!1:(e(t.update({selection:i})),!0)};function a8(t,e){let{main:s,ranges:i}=t.selection,n=t.wordAt(s.head),r=n&&n.from==s.from&&n.to==s.to;for(let o=!1,l=new xr(t.doc,e,i[i.length-1].to);;)if(l.next(),l.done){if(o)return null;l=new xr(t.doc,e,0,Math.max(0,i[i.length-1].from-1)),o=!0}else{if(o&&i.some(a=>a.from==l.value.from))continue;if(r){let a=t.wordAt(l.value.from);if(!a||a.from!=l.value.from||a.to!=l.value.to)continue}return l.value}}const u8=({state:t,dispatch:e})=>{let{ranges:s}=t.selection;if(s.some(r=>r.from===r.to))return l8({state:t,dispatch:e});let i=t.sliceDoc(s[0].from,s[0].to);if(t.selection.ranges.some(r=>t.sliceDoc(r.from,r.to)!=i))return!1;let n=a8(t,i);return n?(e(t.update({selection:t.selection.addRange(ie.range(n.from,n.to),!1),effects:Me.scrollIntoView(n.to)})),!0):!1},Mr=De.define({combine(t){return yi(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new k8(e),scrollToMatch:e=>Me.scrollIntoView(e)})}});class Cv{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||YA(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(s,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new h8(this):new c8(this)}getCursor(e,s=0,i){let n=e.doc?e:Xe.create({doc:e});return i==null&&(i=n.doc.length),this.regexp?Kn(this,n,s,i):Gn(this,n,s,i)}}class Av{constructor(e){this.spec=e}}function Gn(t,e,s,i){return new xr(e.doc,t.unquoted,s,i,t.caseSensitive?void 0:n=>n.toLowerCase(),t.wholeWord?d8(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function d8(t,e){return(s,i,n,r)=>((r>s||r+n.length<i)&&(r=Math.max(0,s-2),n=t.sliceString(r,Math.min(t.length,i+2))),(e(ca(n,s-r))!=yt.Word||e(fa(n,s-r))!=yt.Word)&&(e(fa(n,i-r))!=yt.Word||e(ca(n,i-r))!=yt.Word))}class c8 extends Av{constructor(e){super(e)}nextMatch(e,s,i){let n=Gn(this.spec,e,i,e.doc.length).nextOverlapping();if(n.done){let r=Math.min(e.doc.length,s+this.spec.unquoted.length);n=Gn(this.spec,e,0,r).nextOverlapping()}return n.done||n.value.from==s&&n.value.to==i?null:n.value}prevMatchInRange(e,s,i){for(let n=i;;){let r=Math.max(s,n-1e4-this.spec.unquoted.length),o=Gn(this.spec,e,r,n),l=null;for(;!o.nextOverlapping().done;)l=o.value;if(l)return l;if(r==s)return null;n-=1e4}}prevMatch(e,s,i){let n=this.prevMatchInRange(e,0,s);return n||(n=this.prevMatchInRange(e,Math.max(0,i-this.spec.unquoted.length),e.doc.length)),n&&(n.from!=s||n.to!=i)?n:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,s){let i=Gn(this.spec,e,0,e.doc.length),n=[];for(;!i.next().done;){if(n.length>=s)return null;n.push(i.value)}return n}highlight(e,s,i,n){let r=Gn(this.spec,e,Math.max(0,s-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!r.next().done;)n(r.value.from,r.value.to)}}function Kn(t,e,s,i){return new Sv(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?f8(e.charCategorizer(e.selection.main.head)):void 0},s,i)}function ca(t,e){return t.slice(qt(t,e,!1),e)}function fa(t,e){return t.slice(e,qt(t,e))}function f8(t){return(e,s,i)=>!i[0].length||(t(ca(i.input,i.index))!=yt.Word||t(fa(i.input,i.index))!=yt.Word)&&(t(fa(i.input,i.index+i[0].length))!=yt.Word||t(ca(i.input,i.index+i[0].length))!=yt.Word)}class h8 extends Av{nextMatch(e,s,i){let n=Kn(this.spec,e,i,e.doc.length).next();return n.done&&(n=Kn(this.spec,e,0,s).next()),n.done?null:n.value}prevMatchInRange(e,s,i){for(let n=1;;n++){let r=Math.max(s,i-n*1e4),o=Kn(this.spec,e,r,i),l=null;for(;!o.next().done;)l=o.value;if(l&&(r==s||l.from>r+10))return l;if(r==s)return null}}prevMatch(e,s,i){return this.prevMatchInRange(e,0,s)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(s,i)=>{if(i=="&")return e.match[0];if(i=="$")return"$";for(let n=i.length;n>0;n--){let r=+i.slice(0,n);if(r>0&&r<e.match.length)return e.match[r]+i.slice(n)}return s})}matchAll(e,s){let i=Kn(this.spec,e,0,e.doc.length),n=[];for(;!i.next().done;){if(n.length>=s)return null;n.push(i.value)}return n}highlight(e,s,i,n){let r=Kn(this.spec,e,Math.max(0,s-250),Math.min(i+250,e.doc.length));for(;!r.next().done;)n(r.value.from,r.value.to)}}const Eo=We.define(),tf=We.define(),tn=Gt.define({create(t){return new Bu(sc(t).create(),null)},update(t,e){for(let s of e.effects)s.is(Eo)?t=new Bu(s.value.create(),t.panel):s.is(tf)&&(t=new Bu(t.query,s.value?sf:null));return t},provide:t=>Ao.from(t,e=>e.panel)});class Bu{constructor(e,s){this.query=e,this.panel=s}}const p8=Ie.mark({class:"cm-searchMatch"}),m8=Ie.mark({class:"cm-searchMatch cm-searchMatch-selected"}),g8=Et.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(tn))}update(t){let e=t.state.field(tn);(e!=t.startState.field(tn)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return Ie.none;let{view:s}=this,i=new Pi;for(let n=0,r=s.visibleRanges,o=r.length;n<o;n++){let{from:l,to:a}=r[n];for(;n<o-1&&a>r[n+1].from-500;)a=r[++n].to;t.highlight(s.state,l,a,(d,u)=>{let f=s.state.selection.ranges.some(h=>h.from==d&&h.to==u);i.add(d,u,f?m8:p8)})}return i.finish()}},{decorations:t=>t.decorations});function qo(t){return e=>{let s=e.state.field(tn,!1);return s&&s.query.spec.valid?t(e,s):Dv(e)}}const ha=qo((t,{query:e})=>{let{to:s}=t.state.selection.main,i=e.nextMatch(t.state,s,s);if(!i)return!1;let n=ie.single(i.from,i.to),r=t.state.facet(Mr);return t.dispatch({selection:n,effects:[nf(t,i),r.scrollToMatch(n.main,t)],userEvent:"select.search"}),Mv(t),!0}),pa=qo((t,{query:e})=>{let{state:s}=t,{from:i}=s.selection.main,n=e.prevMatch(s,i,i);if(!n)return!1;let r=ie.single(n.from,n.to),o=t.state.facet(Mr);return t.dispatch({selection:r,effects:[nf(t,n),o.scrollToMatch(r.main,t)],userEvent:"select.search"}),Mv(t),!0}),y8=qo((t,{query:e})=>{let s=e.matchAll(t.state,1e3);return!s||!s.length?!1:(t.dispatch({selection:ie.create(s.map(i=>ie.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),v8=({state:t,dispatch:e})=>{let s=t.selection;if(s.ranges.length>1||s.main.empty)return!1;let{from:i,to:n}=s.main,r=[],o=0;for(let l=new xr(t.doc,t.sliceDoc(i,n));!l.next().done;){if(r.length>1e3)return!1;l.value.from==i&&(o=r.length),r.push(ie.range(l.value.from,l.value.to))}return e(t.update({selection:ie.create(r,o),userEvent:"select.search.matches"})),!0},Xp=qo((t,{query:e})=>{let{state:s}=t,{from:i,to:n}=s.selection.main;if(s.readOnly)return!1;let r=e.nextMatch(s,i,i);if(!r)return!1;let o=r,l=[],a,d,u=[];o.from==i&&o.to==n&&(d=s.toText(e.getReplacement(o)),l.push({from:o.from,to:o.to,insert:d}),o=e.nextMatch(s,o.from,o.to),u.push(Me.announce.of(s.phrase("replaced match on line $",s.doc.lineAt(i).number)+".")));let f=t.state.changes(l);return o&&(a=ie.single(o.from,o.to).map(f),u.push(nf(t,o)),u.push(s.facet(Mr).scrollToMatch(a.main,t))),t.dispatch({changes:f,selection:a,effects:u,userEvent:"input.replace"}),!0}),b8=qo((t,{query:e})=>{if(t.state.readOnly)return!1;let s=e.matchAll(t.state,1e9).map(n=>{let{from:r,to:o}=n;return{from:r,to:o,insert:e.getReplacement(n)}});if(!s.length)return!1;let i=t.state.phrase("replaced $ matches",s.length)+".";return t.dispatch({changes:s,effects:Me.announce.of(i),userEvent:"input.replace.all"}),!0});function sf(t){return t.state.facet(Mr).createPanel(t)}function sc(t,e){var s,i,n,r,o;let l=t.selection.main,a=l.empty||l.to>l.from+100?"":t.sliceDoc(l.from,l.to);if(e&&!a)return e;let d=t.facet(Mr);return new Cv({search:((s=e?.literal)!==null&&s!==void 0?s:d.literal)?a:a.replace(/\n/g,"\\n"),caseSensitive:(i=e?.caseSensitive)!==null&&i!==void 0?i:d.caseSensitive,literal:(n=e?.literal)!==null&&n!==void 0?n:d.literal,regexp:(r=e?.regexp)!==null&&r!==void 0?r:d.regexp,wholeWord:(o=e?.wholeWord)!==null&&o!==void 0?o:d.wholeWord})}function Vv(t){let e=Co(t,sf);return e&&e.dom.querySelector("[main-field]")}function Mv(t){let e=Vv(t);e&&e==t.root.activeElement&&e.select()}const Dv=t=>{let e=t.state.field(tn,!1);if(e&&e.panel){let s=Vv(t);if(s&&s!=t.root.activeElement){let i=sc(t.state,e.query.spec);i.valid&&t.dispatch({effects:Eo.of(i)}),s.focus(),s.select()}}else t.dispatch({effects:[tf.of(!0),e?Eo.of(sc(t.state,e.query.spec)):We.appendConfig.of(S8)]});return!0},Tv=t=>{let e=t.state.field(tn,!1);if(!e||!e.panel)return!1;let s=Co(t,sf);return s&&s.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:tf.of(!1)}),!0},x8=[{key:"Mod-f",run:Dv,scope:"editor search-panel"},{key:"F3",run:ha,shift:pa,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:ha,shift:pa,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Tv,scope:"editor search-panel"},{key:"Mod-Shift-l",run:v8},{key:"Mod-Alt-g",run:XA},{key:"Mod-d",run:u8,preventDefault:!0}];class k8{constructor(e){this.view=e;let s=this.query=e.state.field(tn).query.spec;this.commit=this.commit.bind(this),this.searchField=ut("input",{value:s.search,placeholder:Ss(e,"Find"),"aria-label":Ss(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=ut("input",{value:s.replace,placeholder:Ss(e,"Replace"),"aria-label":Ss(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=ut("input",{type:"checkbox",name:"case",form:"",checked:s.caseSensitive,onchange:this.commit}),this.reField=ut("input",{type:"checkbox",name:"re",form:"",checked:s.regexp,onchange:this.commit}),this.wordField=ut("input",{type:"checkbox",name:"word",form:"",checked:s.wholeWord,onchange:this.commit});function i(n,r,o){return ut("button",{class:"cm-button",name:n,onclick:r,type:"button"},o)}this.dom=ut("div",{onkeydown:n=>this.keydown(n),class:"cm-search"},[this.searchField,i("next",()=>ha(e),[Ss(e,"next")]),i("prev",()=>pa(e),[Ss(e,"previous")]),i("select",()=>y8(e),[Ss(e,"all")]),ut("label",null,[this.caseField,Ss(e,"match case")]),ut("label",null,[this.reField,Ss(e,"regexp")]),ut("label",null,[this.wordField,Ss(e,"by word")]),...e.state.readOnly?[]:[ut("br"),this.replaceField,i("replace",()=>Xp(e),[Ss(e,"replace")]),i("replaceAll",()=>b8(e),[Ss(e,"replace all")])],ut("button",{name:"close",onclick:()=>Tv(e),"aria-label":Ss(e,"close"),type:"button"},[""])])}commit(){let e=new Cv({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Eo.of(e)}))}keydown(e){SC(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?pa:ha)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),Xp(this.view))}update(e){for(let s of e.transactions)for(let i of s.effects)i.is(Eo)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Mr).top}}function Ss(t,e){return t.state.phrase(e)}const kl=30,wl=/[\s\.,:;?!]/;function nf(t,{from:e,to:s}){let i=t.state.doc.lineAt(e),n=t.state.doc.lineAt(s).to,r=Math.max(i.from,e-kl),o=Math.min(n,s+kl),l=t.state.sliceDoc(r,o);if(r!=i.from){for(let a=0;a<kl;a++)if(!wl.test(l[a+1])&&wl.test(l[a])){l=l.slice(a);break}}if(o!=n){for(let a=l.length-1;a>l.length-kl;a--)if(!wl.test(l[a-1])&&wl.test(l[a])){l=l.slice(0,a);break}}return Me.announce.of(`${t.state.phrase("current match")}. ${l} ${t.state.phrase("on line")} ${i.number}.`)}const w8=Me.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),S8=[tn,Nn.low(g8),w8];class Ev{constructor(e,s,i,n){this.state=e,this.pos=s,this.explicit=i,this.view=n,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let s=ts(this.state).resolveInner(this.pos,-1);for(;s&&e.indexOf(s.name)<0;)s=s.parent;return s?{from:s.from,to:this.pos,text:this.state.sliceDoc(s.from,this.pos),type:s.type}:null}matchBefore(e){let s=this.state.doc.lineAt(this.pos),i=Math.max(s.from,this.pos-250),n=s.text.slice(i-s.from,this.pos-s.from),r=n.search($v(e,!1));return r<0?null:{from:i+r,to:this.pos,text:n.slice(r)}}get aborted(){return this.abortListeners==null}addEventListener(e,s,i){e=="abort"&&this.abortListeners&&(this.abortListeners.push(s),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function Qp(t){let e=Object.keys(t).join(""),s=/\w/.test(e);return s&&(e=e.replace(/\w/g,"")),`[${s?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function _8(t){let e=Object.create(null),s=Object.create(null);for(let{label:n}of t){e[n[0]]=!0;for(let r=1;r<n.length;r++)s[n[r]]=!0}let i=Qp(e)+Qp(s)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function C8(t){let e=t.map(n=>typeof n=="string"?{label:n}:n),[s,i]=e.every(n=>/^\w+$/.test(n.label))?[/\w*$/,/\w+$/]:_8(e);return n=>{let r=n.matchBefore(i);return r||n.explicit?{from:r?r.from:n.pos,options:e,validFor:s}:null}}class Zp{constructor(e,s,i,n){this.completion=e,this.source=s,this.match=i,this.score=n}}function $n(t){return t.selection.main.from}function $v(t,e){var s;let{source:i}=t,n=e&&i[0]!="^",r=i[i.length-1]!="$";return!n&&!r?t:new RegExp(`${n?"^":""}(?:${i})${r?"$":""}`,(s=t.flags)!==null&&s!==void 0?s:t.ignoreCase?"i":"")}const Ov=Bi.define();function A8(t,e,s,i){let{main:n}=t.selection,r=s-n.from,o=i-n.from;return{...t.changeByRange(l=>{if(l!=n&&s!=i&&t.sliceDoc(l.from+r,l.from+o)!=t.sliceDoc(s,i))return{range:l};let a=t.toText(e);return{changes:{from:l.from+r,to:i==n.from?l.to:l.from+o,insert:a},range:ie.cursor(l.from+r+a.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}const em=new WeakMap;function V8(t){if(!Array.isArray(t))return t;let e=em.get(t);return e||em.set(t,e=C8(t)),e}const ma=We.define(),$o=We.define();class M8{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let s=0;s<e.length;){let i=ms(e,s),n=ui(i);this.chars.push(i);let r=e.slice(s,s+n),o=r.toUpperCase();this.folded.push(ms(o==r?r.toLowerCase():o,0)),s+=n}this.astral=e.length!=this.chars.length}ret(e,s){return this.score=e,this.matched=s,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:s,folded:i,any:n,precise:r,byWord:o}=this;if(s.length==1){let U=ms(e,0),$=ui(U),D=$==e.length?0:-100;if(U!=s[0])if(U==i[0])D+=-200;else return null;return this.ret(D,[0,$])}let l=e.indexOf(this.pattern);if(l==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let a=s.length,d=0;if(l<0){for(let U=0,$=Math.min(e.length,200);U<$&&d<a;){let D=ms(e,U);(D==s[d]||D==i[d])&&(n[d++]=U),U+=ui(D)}if(d<a)return null}let u=0,f=0,h=!1,m=0,w=-1,_=-1,C=/[a-z]/.test(e),M=!0;for(let U=0,$=Math.min(e.length,200),D=0;U<$&&f<a;){let N=ms(e,U);l<0&&(u<a&&N==s[u]&&(r[u++]=U),m<a&&(N==s[m]||N==i[m]?(m==0&&(w=U),_=U+1,m++):m=0));let q,P=N<255?N>=48&&N<=57||N>=97&&N<=122?2:N>=65&&N<=90?1:0:(q=Cc(N))!=q.toLowerCase()?1:q!=q.toUpperCase()?2:0;(!U||P==1&&C||D==0&&P!=0)&&(s[f]==N||i[f]==N&&(h=!0)?o[f++]=U:o.length&&(M=!1)),D=P,U+=ui(N)}return f==a&&o[0]==0&&M?this.result(-100+(h?-200:0),o,e):m==a&&w==0?this.ret(-200-e.length+(_==e.length?0:-100),[0,_]):l>-1?this.ret(-700-e.length,[l,l+this.pattern.length]):m==a?this.ret(-900-e.length,[w,_]):f==a?this.result(-100+(h?-200:0)+-700+(M?0:-1100),o,e):s.length==2?null:this.result((n[0]?-700:0)+-200+-1100,n,e)}result(e,s,i){let n=[],r=0;for(let o of s){let l=o+(this.astral?ui(ms(i,o)):1);r&&n[r-1]==o?n[r-1]=l:(n[r++]=o,n[r++]=l)}return this.ret(e-i.length,n)}}class D8{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let s=e.slice(0,this.pattern.length),i=s==this.pattern?0:s.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,s.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const Bt=De.define({combine(t){return yi(t,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:T8,filterStrict:!1,compareCompletions:(e,s)=>e.label.localeCompare(s.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,s)=>e&&s,closeOnBlur:(e,s)=>e&&s,icons:(e,s)=>e&&s,tooltipClass:(e,s)=>i=>tm(e(i),s(i)),optionClass:(e,s)=>i=>tm(e(i),s(i)),addToOptions:(e,s)=>e.concat(s),filterStrict:(e,s)=>e||s})}});function tm(t,e){return t?e?t+" "+e:t:e}function T8(t,e,s,i,n,r){let o=t.textDirection==mt.RTL,l=o,a=!1,d="top",u,f,h=e.left-n.left,m=n.right-e.right,w=i.right-i.left,_=i.bottom-i.top;if(l&&h<Math.min(w,m)?l=!1:!l&&m<Math.min(w,h)&&(l=!0),w<=(l?h:m))u=Math.max(n.top,Math.min(s.top,n.bottom-_))-e.top,f=Math.min(400,l?h:m);else{a=!0,f=Math.min(400,(o?e.right:n.right-e.left)-30);let U=n.bottom-e.bottom;U>=_||U>e.top?u=s.bottom-e.top:(d="bottom",u=e.bottom-s.top)}let C=(e.bottom-e.top)/r.offsetHeight,M=(e.right-e.left)/r.offsetWidth;return{style:`${d}: ${u/C}px; max-width: ${f/M}px`,class:"cm-completionInfo-"+(a?o?"left-narrow":"right-narrow":l?"left":"right")}}function E8(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(s){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),s.type&&i.classList.add(...s.type.split(/\s+/g).map(n=>"cm-completionIcon-"+n)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(s,i,n,r){let o=document.createElement("span");o.className="cm-completionLabel";let l=s.displayLabel||s.label,a=0;for(let d=0;d<r.length;){let u=r[d++],f=r[d++];u>a&&o.appendChild(document.createTextNode(l.slice(a,u)));let h=o.appendChild(document.createElement("span"));h.appendChild(document.createTextNode(l.slice(u,f))),h.className="cm-completionMatchedText",a=f}return a<l.length&&o.appendChild(document.createTextNode(l.slice(a))),o},position:50},{render(s){if(!s.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=s.detail,i},position:80}),e.sort((s,i)=>s.position-i.position).map(s=>s.render)}function Iu(t,e,s){if(t<=s)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let n=Math.floor(e/s);return{from:n*s,to:(n+1)*s}}let i=Math.floor((t-e)/s);return{from:t-(i+1)*s,to:t-i*s}}class $8{constructor(e,s,i){this.view=e,this.stateField=s,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:a=>this.placeInfo(a),key:this},this.space=null,this.currentClass="";let n=e.state.field(s),{options:r,selected:o}=n.open,l=e.state.facet(Bt);this.optionContent=E8(l),this.optionClass=l.optionClass,this.tooltipClass=l.tooltipClass,this.range=Iu(r.length,o,l.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",a=>{let{options:d}=e.state.field(s).open;for(let u=a.target,f;u&&u!=this.dom;u=u.parentNode)if(u.nodeName=="LI"&&(f=/-(\d+)$/.exec(u.id))&&+f[1]<d.length){this.applyCompletion(e,d[+f[1]]),a.preventDefault();return}}),this.dom.addEventListener("focusout",a=>{let d=e.state.field(this.stateField,!1);d&&d.tooltip&&e.state.facet(Bt).closeOnBlur&&a.relatedTarget!=e.contentDOM&&e.dispatch({effects:$o.of(null)})}),this.showOptions(r,n.id)}mount(){this.updateSel()}showOptions(e,s){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,s,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var s;let i=e.state.field(this.stateField),n=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=n){let{options:r,selected:o,disabled:l}=i.open;(!n.open||n.open.options!=r)&&(this.range=Iu(r.length,o,e.state.facet(Bt).maxRenderedOptions),this.showOptions(r,i.id)),this.updateSel(),l!=((s=n.open)===null||s===void 0?void 0:s.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!l)}}updateTooltipClass(e){let s=this.tooltipClass(e);if(s!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of s.split(" "))i&&this.dom.classList.add(i);this.currentClass=s}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),s=e.open;(s.selected>-1&&s.selected<this.range.from||s.selected>=this.range.to)&&(this.range=Iu(s.options.length,s.selected,this.view.state.facet(Bt).maxRenderedOptions),this.showOptions(s.options,e.id));let i=this.updateSelectedOption(s.selected);if(i){this.destroyInfo();let{completion:n}=s.options[s.selected],{info:r}=n;if(!r)return;let o=typeof r=="string"?document.createTextNode(r):r(n);if(!o)return;"then"in o?o.then(l=>{l&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(l,n)}).catch(l=>ys(this.view.state,l,"completion info")):(this.addInfoPane(o,n),i.setAttribute("aria-describedby",this.info.id))}}addInfoPane(e,s){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",i.id="cm-completionInfo-"+Math.floor(Math.random()*65535).toString(16),e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:n,destroy:r}=e;i.appendChild(n),this.infoDestroy=r||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let s=null;for(let i=this.list.firstChild,n=this.range.from;i;i=i.nextSibling,n++)i.nodeName!="LI"||!i.id?n--:n==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),s=i):i.hasAttribute("aria-selected")&&(i.removeAttribute("aria-selected"),i.removeAttribute("aria-describedby"));return s&&P8(this.list,s),s}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let s=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),n=e.getBoundingClientRect(),r=this.space;if(!r){let o=this.dom.ownerDocument.documentElement;r={left:0,top:0,right:o.clientWidth,bottom:o.clientHeight}}return n.top>Math.min(r.bottom,s.bottom)-10||n.bottom<Math.max(r.top,s.top)+10?null:this.view.state.facet(Bt).positionInfo(this.view,s,n,i,r,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,s,i){const n=document.createElement("ul");n.id=s,n.setAttribute("role","listbox"),n.setAttribute("aria-expanded","true"),n.setAttribute("aria-label",this.view.state.phrase("Completions")),n.addEventListener("mousedown",o=>{o.target==n&&o.preventDefault()});let r=null;for(let o=i.from;o<i.to;o++){let{completion:l,match:a}=e[o],{section:d}=l;if(d){let h=typeof d=="string"?d:d.name;if(h!=r&&(o>i.from||i.from==0))if(r=h,typeof d!="string"&&d.header)n.appendChild(d.header(d));else{let m=n.appendChild(document.createElement("completion-section"));m.textContent=h}}const u=n.appendChild(document.createElement("li"));u.id=s+"-"+o,u.setAttribute("role","option");let f=this.optionClass(l);f&&(u.className=f);for(let h of this.optionContent){let m=h(l,this.view.state,this.view,a);m&&u.appendChild(m)}}return i.from&&n.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&n.classList.add("cm-completionListIncompleteBottom"),n}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function O8(t,e){return s=>new $8(s,t,e)}function P8(t,e){let s=t.getBoundingClientRect(),i=e.getBoundingClientRect(),n=s.height/t.offsetHeight;i.top<s.top?t.scrollTop-=(s.top-i.top)/n:i.bottom>s.bottom&&(t.scrollTop+=(i.bottom-s.bottom)/n)}function sm(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function j8(t,e){let s=[],i=null,n=null,r=u=>{s.push(u);let{section:f}=u.completion;if(f){i||(i=[]);let h=typeof f=="string"?f:f.name;i.some(m=>m.name==h)||i.push(typeof f=="string"?{name:h}:f)}},o=e.facet(Bt);for(let u of t)if(u.hasResult()){let f=u.result.getMatch;if(u.result.filter===!1)for(let h of u.result.options)r(new Zp(h,u.source,f?f(h):[],1e9-s.length));else{let h=e.sliceDoc(u.from,u.to),m,w=o.filterStrict?new D8(h):new M8(h);for(let _ of u.result.options)if(m=w.match(_.label)){let C=_.displayLabel?f?f(_,m.matched):[]:m.matched,M=m.score+(_.boost||0);if(r(new Zp(_,u.source,C,M)),typeof _.section=="object"&&_.section.rank==="dynamic"){let{name:U}=_.section;n||(n=Object.create(null)),n[U]=Math.max(M,n[U]||-1e9)}}}}if(i){let u=Object.create(null),f=0,h=(m,w)=>(m.rank==="dynamic"&&w.rank==="dynamic"?n[w.name]-n[m.name]:0)||(typeof m.rank=="number"?m.rank:1e9)-(typeof w.rank=="number"?w.rank:1e9)||(m.name<w.name?-1:1);for(let m of i.sort(h))f-=1e5,u[m.name]=f;for(let m of s){let{section:w}=m.completion;w&&(m.score+=u[typeof w=="string"?w:w.name])}}let l=[],a=null,d=o.compareCompletions;for(let u of s.sort((f,h)=>h.score-f.score||d(f.completion,h.completion))){let f=u.completion;!a||a.label!=f.label||a.detail!=f.detail||a.type!=null&&f.type!=null&&a.type!=f.type||a.apply!=f.apply||a.boost!=f.boost?l.push(u):sm(u.completion)>sm(a)&&(l[l.length-1]=u),a=u.completion}return l}class Qn{constructor(e,s,i,n,r,o){this.options=e,this.attrs=s,this.tooltip=i,this.timestamp=n,this.selected=r,this.disabled=o}setSelected(e,s){return e==this.selected||e>=this.options.length?this:new Qn(this.options,im(s,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,s,i,n,r,o){if(n&&!o&&e.some(d=>d.isPending))return n.setDisabled();let l=j8(e,s);if(!l.length)return n&&e.some(d=>d.isPending)?n.setDisabled():null;let a=s.facet(Bt).selectOnOpen?0:-1;if(n&&n.selected!=a&&n.selected!=-1){let d=n.options[n.selected].completion;for(let u=0;u<l.length;u++)if(l[u].completion==d){a=u;break}}return new Qn(l,im(i,a),{pos:e.reduce((d,u)=>u.hasResult()?Math.min(d,u.from):d,1e8),create:N8,above:r.aboveCursor},n?n.timestamp:Date.now(),a,!1)}map(e){return new Qn(this.options,this.attrs,{...this.tooltip,pos:e.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new Qn(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class ga{constructor(e,s,i){this.active=e,this.id=s,this.open=i}static start(){return new ga(I8,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:s}=e,i=s.facet(Bt),r=(i.override||s.languageDataAt("autocomplete",$n(s)).map(V8)).map(a=>(this.active.find(u=>u.source==a)||new $s(a,this.active.some(u=>u.state!=0)?1:0)).update(e,i));r.length==this.active.length&&r.every((a,d)=>a==this.active[d])&&(r=this.active);let o=this.open,l=e.effects.some(a=>a.is(rf));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||r.some(a=>a.hasResult()&&e.changes.touchesRange(a.from,a.to))||!R8(r,this.active)||l?o=Qn.build(r,s,this.id,o,i,l):o&&o.disabled&&!r.some(a=>a.isPending)&&(o=null),!o&&r.every(a=>!a.isPending)&&r.some(a=>a.hasResult())&&(r=r.map(a=>a.hasResult()?new $s(a.source,0):a));for(let a of e.effects)a.is(jv)&&(o=o&&o.setSelected(a.value,this.id));return r==this.active&&o==this.open?this:new ga(r,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?L8:B8}}function R8(t,e){if(t==e)return!0;for(let s=0,i=0;;){for(;s<t.length&&!t[s].hasResult();)s++;for(;i<e.length&&!e[i].hasResult();)i++;let n=s==t.length,r=i==e.length;if(n||r)return n==r;if(t[s++].result!=e[i++].result)return!1}}const L8={"aria-autocomplete":"list"},B8={};function im(t,e){let s={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(s["aria-activedescendant"]=t+"-"+e),s}const I8=[];function Pv(t,e){if(t.isUserEvent("input.complete")){let i=t.annotation(Ov);if(i&&e.activateOnCompletion(i))return 12}let s=t.isUserEvent("input.type");return s&&e.activateOnTyping?5:s?1:t.isUserEvent("delete.backward")?2:t.selection?8:t.docChanged?16:0}class $s{constructor(e,s,i=!1){this.source=e,this.state=s,this.explicit=i}hasResult(){return!1}get isPending(){return this.state==1}update(e,s){let i=Pv(e,s),n=this;(i&8||i&16&&this.touches(e))&&(n=new $s(n.source,0)),i&4&&n.state==0&&(n=new $s(this.source,1)),n=n.updateFor(e,i);for(let r of e.effects)if(r.is(ma))n=new $s(n.source,1,r.value);else if(r.is($o))n=new $s(n.source,0);else if(r.is(rf))for(let o of r.value)o.source==n.source&&(n=o);return n}updateFor(e,s){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange($n(e.state))}}class dr extends $s{constructor(e,s,i,n,r,o){super(e,3,s),this.limit=i,this.result=n,this.from=r,this.to=o}hasResult(){return!0}updateFor(e,s){var i;if(!(s&3))return this.map(e.changes);let n=this.result;n.map&&!e.changes.empty&&(n=n.map(n,e.changes));let r=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),l=$n(e.state);if(l>o||!n||s&2&&($n(e.startState)==this.from||l<this.limit))return new $s(this.source,s&4?1:0);let a=e.changes.mapPos(this.limit);return U8(n.validFor,e.state,r,o)?new dr(this.source,this.explicit,a,n,r,o):n.update&&(n=n.update(n,r,o,new Ev(e.state,l,!1)))?new dr(this.source,this.explicit,a,n,n.from,(i=n.to)!==null&&i!==void 0?i:$n(e.state)):new $s(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new dr(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new $s(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function U8(t,e,s,i){if(!t)return!1;let n=e.sliceDoc(s,i);return typeof t=="function"?t(n,s,i,e):$v(t,!0).test(n)}const rf=We.define({map(t,e){return t.map(s=>s.map(e))}}),jv=We.define(),gs=Gt.define({create(){return ga.start()},update(t,e){return t.update(e)},provide:t=>[Uc.from(t,e=>e.tooltip),Me.contentAttributes.from(t,e=>e.attrs)]});function of(t,e){const s=e.completion.apply||e.completion.label;let i=t.state.field(gs).active.find(n=>n.source==e.source);return i instanceof dr?(typeof s=="string"?t.dispatch({...A8(t.state,s,i.from,i.to),annotations:Ov.of(e.completion)}):s(t,e.completion,i.from,i.to),!0):!1}const N8=O8(gs,of);function Sl(t,e="option"){return s=>{let i=s.state.field(gs,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<s.state.facet(Bt).interactionDelay)return!1;let n=1,r;e=="page"&&(r=py(s,i.open.tooltip))&&(n=Math.max(2,Math.floor(r.dom.offsetHeight/r.dom.querySelector("li").offsetHeight)-1));let{length:o}=i.open.options,l=i.open.selected>-1?i.open.selected+n*(t?1:-1):t?0:o-1;return l<0?l=e=="page"?0:o-1:l>=o&&(l=e=="page"?o-1:0),s.dispatch({effects:jv.of(l)}),!0}}const z8=t=>{let e=t.state.field(gs,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(Bt).interactionDelay?!1:of(t,e.open.options[e.open.selected])},Uu=t=>t.state.field(gs,!1)?(t.dispatch({effects:ma.of(!0)}),!0):!1,F8=t=>{let e=t.state.field(gs,!1);return!e||!e.active.some(s=>s.state!=0)?!1:(t.dispatch({effects:$o.of(null)}),!0)};class H8{constructor(e,s){this.active=e,this.context=s,this.time=Date.now(),this.updates=[],this.done=void 0}}const W8=50,q8=1e3,G8=Et.fromClass(class{constructor(t){this.view=t,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of t.state.field(gs).active)e.isPending&&this.startQuery(e)}update(t){let e=t.state.field(gs),s=t.state.facet(Bt);if(!t.selectionSet&&!t.docChanged&&t.startState.field(gs)==e)return;let i=t.transactions.some(r=>{let o=Pv(r,s);return o&8||(r.selection||r.docChanged)&&!(o&3)});for(let r=0;r<this.running.length;r++){let o=this.running[r];if(i||o.context.abortOnDocChange&&t.docChanged||o.updates.length+t.transactions.length>W8&&Date.now()-o.time>q8){for(let l of o.context.abortListeners)try{l()}catch(a){ys(this.view.state,a)}o.context.abortListeners=null,this.running.splice(r--,1)}else o.updates.push(...t.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),t.transactions.some(r=>r.effects.some(o=>o.is(ma)))&&(this.pendingStart=!0);let n=this.pendingStart?50:s.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(r=>r.isPending&&!this.running.some(o=>o.active.source==r.source))?setTimeout(()=>this.startUpdate(),n):-1,this.composing!=0)for(let r of t.transactions)r.isUserEvent("input.type")?this.composing=2:this.composing==2&&r.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:t}=this.view,e=t.field(gs);for(let s of e.active)s.isPending&&!this.running.some(i=>i.active.source==s.source)&&this.startQuery(s);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Bt).updateSyncTime))}startQuery(t){let{state:e}=this.view,s=$n(e),i=new Ev(e,s,t.explicit,this.view),n=new H8(t,i);this.running.push(n),Promise.resolve(t.source(i)).then(r=>{n.context.aborted||(n.done=r||null,this.scheduleAccept())},r=>{this.view.dispatch({effects:$o.of(null)}),ys(this.view.state,r)})}scheduleAccept(){this.running.every(t=>t.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Bt).updateSyncTime))}accept(){var t;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],s=this.view.state.facet(Bt),i=this.view.state.field(gs);for(let n=0;n<this.running.length;n++){let r=this.running[n];if(r.done===void 0)continue;if(this.running.splice(n--,1),r.done){let l=$n(r.updates.length?r.updates[0].startState:this.view.state),a=Math.min(l,r.done.from+(r.active.explicit?0:1)),d=new dr(r.active.source,r.active.explicit,a,r.done,r.done.from,(t=r.done.to)!==null&&t!==void 0?t:l);for(let u of r.updates)d=d.update(u,s);if(d.hasResult()){e.push(d);continue}}let o=i.active.find(l=>l.source==r.active.source);if(o&&o.isPending)if(r.done==null){let l=new $s(r.active.source,0);for(let a of r.updates)l=l.update(a,s);l.isPending||e.push(l)}else this.startQuery(o)}(e.length||i.open&&i.open.disabled)&&this.view.dispatch({effects:rf.of(e)})}},{eventHandlers:{blur(t){let e=this.view.state.field(gs,!1);if(e&&e.tooltip&&this.view.state.facet(Bt).closeOnBlur){let s=e.open&&py(this.view,e.open.tooltip);(!s||!s.dom.contains(t.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:$o.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:ma.of(!1)}),20),this.composing=0}}}),K8=typeof navigator=="object"&&/Win/.test(navigator.platform),J8=Nn.highest(Me.domEventHandlers({keydown(t,e){let s=e.state.field(gs,!1);if(!s||!s.open||s.open.disabled||s.open.selected<0||t.key.length>1||t.ctrlKey&&!(K8&&t.altKey)||t.metaKey)return!1;let i=s.open.options[s.open.selected],n=s.active.find(o=>o.source==i.source),r=i.completion.commitCharacters||n.result.commitCharacters;return r&&r.indexOf(t.key)>-1&&of(e,i),!1}})),Y8=Me.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),Oo={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Mn=We.define({map(t,e){let s=e.mapPos(t,-1,cs.TrackAfter);return s??void 0}}),lf=new class extends Pn{};lf.startSide=1;lf.endSide=-1;const Rv=Gt.define({create(){return Qe.empty},update(t,e){if(t=t.map(e.changes),e.selection){let s=e.state.doc.lineAt(e.selection.main.head);t=t.update({filter:i=>i>=s.from&&i<=s.to})}for(let s of e.effects)s.is(Mn)&&(t=t.update({add:[lf.range(s.value,s.value+1)]}));return t}});function X8(){return[Z8,Rv]}const Nu="()[]{}<>";function Lv(t){for(let e=0;e<Nu.length;e+=2)if(Nu.charCodeAt(e)==t)return Nu.charAt(e+1);return Cc(t<128?t:t+1)}function Bv(t,e){return t.languageDataAt("closeBrackets",e)[0]||Oo}const Q8=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),Z8=Me.inputHandler.of((t,e,s,i)=>{if((Q8?t.composing:t.compositionStarted)||t.state.readOnly)return!1;let n=t.state.selection.main;if(i.length>2||i.length==2&&ui(ms(i,0))==1||e!=n.from||s!=n.to)return!1;let r=sV(t.state,i);return r?(t.dispatch(r),!0):!1}),eV=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let i=Bv(t,t.selection.main.head).brackets||Oo.brackets,n=null,r=t.changeByRange(o=>{if(o.empty){let l=iV(t.doc,o.head);for(let a of i)if(a==l&&Ha(t.doc,o.head)==Lv(ms(a,0)))return{changes:{from:o.head-a.length,to:o.head+a.length},range:ie.cursor(o.head-a.length)}}return{range:n=o}});return n||e(t.update(r,{scrollIntoView:!0,userEvent:"delete.backward"})),!n},tV=[{key:"Backspace",run:eV}];function sV(t,e){let s=Bv(t,t.selection.main.head),i=s.brackets||Oo.brackets;for(let n of i){let r=Lv(ms(n,0));if(e==n)return r==n?oV(t,n,i.indexOf(n+n+n)>-1,s):nV(t,n,r,s.before||Oo.before);if(e==r&&Iv(t,t.selection.main.from))return rV(t,n,r)}return null}function Iv(t,e){let s=!1;return t.field(Rv).between(0,t.doc.length,i=>{i==e&&(s=!0)}),s}function Ha(t,e){let s=t.sliceString(e,e+2);return s.slice(0,ui(ms(s,0)))}function iV(t,e){let s=t.sliceString(e-2,e);return ui(ms(s,0))==s.length?s:s.slice(1)}function nV(t,e,s,i){let n=null,r=t.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:s,from:o.to}],effects:Mn.of(o.to+e.length),range:ie.range(o.anchor+e.length,o.head+e.length)};let l=Ha(t.doc,o.head);return!l||/\s/.test(l)||i.indexOf(l)>-1?{changes:{insert:e+s,from:o.head},effects:Mn.of(o.head+e.length),range:ie.cursor(o.head+e.length)}:{range:n=o}});return n?null:t.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function rV(t,e,s){let i=null,n=t.changeByRange(r=>r.empty&&Ha(t.doc,r.head)==s?{changes:{from:r.head,to:r.head+s.length,insert:s},range:ie.cursor(r.head+s.length)}:i={range:r});return i?null:t.update(n,{scrollIntoView:!0,userEvent:"input.type"})}function oV(t,e,s,i){let n=i.stringPrefixes||Oo.stringPrefixes,r=null,o=t.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:e,from:l.to}],effects:Mn.of(l.to+e.length),range:ie.range(l.anchor+e.length,l.head+e.length)};let a=l.head,d=Ha(t.doc,a),u;if(d==e){if(nm(t,a))return{changes:{insert:e+e,from:a},effects:Mn.of(a+e.length),range:ie.cursor(a+e.length)};if(Iv(t,a)){let h=s&&t.sliceDoc(a,a+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:a,to:a+h.length,insert:h},range:ie.cursor(a+h.length)}}}else{if(s&&t.sliceDoc(a-2*e.length,a)==e+e&&(u=rm(t,a-2*e.length,n))>-1&&nm(t,u))return{changes:{insert:e+e+e+e,from:a},effects:Mn.of(a+e.length),range:ie.cursor(a+e.length)};if(t.charCategorizer(a)(d)!=yt.Word&&rm(t,a,n)>-1&&!lV(t,a,e,n))return{changes:{insert:e+e,from:a},effects:Mn.of(a+e.length),range:ie.cursor(a+e.length)}}return{range:r=l}});return r?null:t.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function nm(t,e){let s=ts(t).resolveInner(e+1);return s.parent&&s.from==e}function lV(t,e,s,i){let n=ts(t).resolveInner(e,-1),r=i.reduce((o,l)=>Math.max(o,l.length),0);for(let o=0;o<5;o++){let l=t.sliceDoc(n.from,Math.min(n.to,n.from+s.length+r)),a=l.indexOf(s);if(!a||a>-1&&i.indexOf(l.slice(0,a))>-1){let u=n.firstChild;for(;u&&u.from==n.from&&u.to-u.from>s.length+a;){if(t.sliceDoc(u.to-s.length,u.to)==s)return!1;u=u.firstChild}return!0}let d=n.to==e&&n.parent;if(!d)break;n=d}return!1}function rm(t,e,s){let i=t.charCategorizer(e);if(i(t.sliceDoc(e-1,e))!=yt.Word)return e;for(let n of s){let r=e-n.length;if(t.sliceDoc(r,e)==n&&i(t.sliceDoc(r-1,r))!=yt.Word)return r}return-1}function aV(t={}){return[J8,gs,Bt.of(t),G8,uV,Y8]}const Uv=[{key:"Ctrl-Space",run:Uu},{mac:"Alt-`",run:Uu},{mac:"Alt-i",run:Uu},{key:"Escape",run:F8},{key:"ArrowDown",run:Sl(!0)},{key:"ArrowUp",run:Sl(!1)},{key:"PageDown",run:Sl(!0,"page")},{key:"PageUp",run:Sl(!1,"page")},{key:"Enter",run:z8}],uV=Nn.highest(Bc.computeN([Bt],t=>t.facet(Bt).defaultKeymap?[Uv]:[]));class om{constructor(e,s,i){this.from=e,this.to=s,this.diagnostic=i}}class _n{constructor(e,s,i){this.diagnostics=e,this.panel=s,this.selected=i}static init(e,s,i){let n=i.facet(Po).markerFilter;n&&(e=n(e,i));let r=e.slice().sort((m,w)=>m.from-w.from||m.to-w.to),o=new Pi,l=[],a=0,d=i.doc.iter(),u=0,f=i.doc.length;for(let m=0;;){let w=m==r.length?null:r[m];if(!w&&!l.length)break;let _,C;if(l.length)_=a,C=l.reduce(($,D)=>Math.min($,D.to),w&&w.from>_?w.from:1e8);else{if(_=w.from,_>f)break;C=w.to,l.push(w),m++}for(;m<r.length;){let $=r[m];if($.from==_&&($.to>$.from||$.to==_))l.push($),m++,C=Math.min($.to,C);else{C=Math.min($.from,C);break}}C=Math.min(C,f);let M=!1;if(l.some($=>$.from==_&&($.to==C||C==f))&&(M=_==C,!M&&C-_<10)){let $=_-(u+d.value.length);$>0&&(d.next($),u=_);for(let D=_;;){if(D>=C){M=!0;break}if(!d.lineBreak&&u+d.value.length>D)break;D=u+d.value.length,u+=d.value.length,d.next()}}let U=wV(l);if(M)o.add(_,_,Ie.widget({widget:new vV(U),diagnostics:l.slice()}));else{let $=l.reduce((D,N)=>N.markClass?D+" "+N.markClass:D,"");o.add(_,C,Ie.mark({class:"cm-lintRange cm-lintRange-"+U+$,diagnostics:l.slice(),inclusiveEnd:l.some(D=>D.to>C)}))}if(a=C,a==f)break;for(let $=0;$<l.length;$++)l[$].to<=a&&l.splice($--,1)}let h=o.finish();return new _n(h,s,kr(h))}}function kr(t,e=null,s=0){let i=null;return t.between(s,1e9,(n,r,{spec:o})=>{if(!(e&&o.diagnostics.indexOf(e)<0))if(!i)i=new om(n,r,e||o.diagnostics[0]);else{if(o.diagnostics.indexOf(i.diagnostic)<0)return!1;i=new om(i.from,r,i.diagnostic)}}),i}function dV(t,e){let s=e.pos,i=e.end||s,n=t.state.facet(Po).hideOn(t,s,i);if(n!=null)return n;let r=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(o=>o.is(Nv))||t.changes.touchesRange(r.from,Math.max(r.to,i)))}function cV(t,e){return t.field(Vs,!1)?e:e.concat(We.appendConfig.of(SV))}const Nv=We.define(),af=We.define(),zv=We.define(),Vs=Gt.define({create(){return new _n(Ie.none,null,null)},update(t,e){if(e.docChanged&&t.diagnostics.size){let s=t.diagnostics.map(e.changes),i=null,n=t.panel;if(t.selected){let r=e.changes.mapPos(t.selected.from,1);i=kr(s,t.selected.diagnostic,r)||kr(s,null,r)}!s.size&&n&&e.state.facet(Po).autoPanel&&(n=null),t=new _n(s,n,i)}for(let s of e.effects)if(s.is(Nv)){let i=e.state.facet(Po).autoPanel?s.value.length?jo.open:null:t.panel;t=_n.init(s.value,i,e.state)}else s.is(af)?t=new _n(t.diagnostics,s.value?jo.open:null,t.selected):s.is(zv)&&(t=new _n(t.diagnostics,t.panel,s.value));return t},provide:t=>[Ao.from(t,e=>e.panel),Me.decorations.from(t,e=>e.diagnostics)]}),fV=Ie.mark({class:"cm-lintRange cm-lintRange-active"});function hV(t,e,s){let{diagnostics:i}=t.state.field(Vs),n,r=-1,o=-1;i.between(e-(s<0?1:0),e+(s>0?1:0),(a,d,{spec:u})=>{if(e>=a&&e<=d&&(a==d||(e>a||s>0)&&(e<d||s<0)))return n=u.diagnostics,r=a,o=d,!1});let l=t.state.facet(Po).tooltipFilter;return n&&l&&(n=l(n,t.state)),n?{pos:r,end:o,above:t.state.doc.lineAt(r).to<o,create(){return{dom:pV(t,n)}}}:null}function pV(t,e){return ut("ul",{class:"cm-tooltip-lint"},e.map(s=>Hv(t,s,!1)))}const mV=t=>{let e=t.state.field(Vs,!1);(!e||!e.panel)&&t.dispatch({effects:cV(t.state,[af.of(!0)])});let s=Co(t,jo.open);return s&&s.dom.querySelector(".cm-panel-lint ul").focus(),!0},lm=t=>{let e=t.state.field(Vs,!1);return!e||!e.panel?!1:(t.dispatch({effects:af.of(!1)}),!0)},gV=t=>{let e=t.state.field(Vs,!1);if(!e)return!1;let s=t.state.selection.main,i=e.diagnostics.iter(s.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==s.from&&i.to==s.to)?!1:(t.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},yV=[{key:"Mod-Shift-m",run:mV,preventDefault:!0},{key:"F8",run:gV}],Po=De.define({combine(t){return{sources:t.map(e=>e.source).filter(e=>e!=null),...yi(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:am,tooltipFilter:am,needsRefresh:(e,s)=>e?s?i=>e(i)||s(i):e:s,hideOn:(e,s)=>e?s?(i,n,r)=>e(i,n,r)||s(i,n,r):e:s,autoPanel:(e,s)=>e||s})}}});function am(t,e){return t?e?(s,i)=>e(t(s,i),i):t:e}function Fv(t){let e=[];if(t)e:for(let{name:s}of t){for(let i=0;i<s.length;i++){let n=s[i];if(/[a-zA-Z]/.test(n)&&!e.some(r=>r.toLowerCase()==n.toLowerCase())){e.push(n);continue e}}e.push("")}return e}function Hv(t,e,s){var i;let n=s?Fv(e.actions):[];return ut("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},ut("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(t):e.message),(i=e.actions)===null||i===void 0?void 0:i.map((r,o)=>{let l=!1,a=m=>{if(m.preventDefault(),l)return;l=!0;let w=kr(t.state.field(Vs).diagnostics,e);w&&r.apply(t,w.from,w.to)},{name:d}=r,u=n[o]?d.indexOf(n[o]):-1,f=u<0?d:[d.slice(0,u),ut("u",d.slice(u,u+1)),d.slice(u+1)],h=r.markClass?" "+r.markClass:"";return ut("button",{type:"button",class:"cm-diagnosticAction"+h,onclick:a,onmousedown:a,"aria-label":` Action: ${d}${u<0?"":` (access key "${n[o]})"`}.`},f)}),e.source&&ut("div",{class:"cm-diagnosticSource"},e.source))}class vV extends cn{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return ut("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class um{constructor(e,s){this.diagnostic=s,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=Hv(e,s,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class jo{constructor(e){this.view=e,this.items=[];let s=n=>{if(n.keyCode==27)lm(this.view),this.view.focus();else if(n.keyCode==38||n.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(n.keyCode==40||n.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(n.keyCode==36)this.moveSelection(0);else if(n.keyCode==35)this.moveSelection(this.items.length-1);else if(n.keyCode==13)this.view.focus();else if(n.keyCode>=65&&n.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:r}=this.items[this.selectedIndex],o=Fv(r.actions);for(let l=0;l<o.length;l++)if(o[l].toUpperCase().charCodeAt(0)==n.keyCode){let a=kr(this.view.state.field(Vs).diagnostics,r);a&&r.actions[l].apply(e,a.from,a.to)}}else return;n.preventDefault()},i=n=>{for(let r=0;r<this.items.length;r++)this.items[r].dom.contains(n.target)&&this.moveSelection(r)};this.list=ut("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:s,onclick:i}),this.dom=ut("div",{class:"cm-panel-lint"},this.list,ut("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>lm(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(Vs).selected;if(!e)return-1;for(let s=0;s<this.items.length;s++)if(this.items[s].diagnostic==e.diagnostic)return s;return-1}update(){let{diagnostics:e,selected:s}=this.view.state.field(Vs),i=0,n=!1,r=null,o=new Set;for(e.between(0,this.view.state.doc.length,(l,a,{spec:d})=>{for(let u of d.diagnostics){if(o.has(u))continue;o.add(u);let f=-1,h;for(let m=i;m<this.items.length;m++)if(this.items[m].diagnostic==u){f=m;break}f<0?(h=new um(this.view,u),this.items.splice(i,0,h),n=!0):(h=this.items[f],f>i&&(this.items.splice(i,f-i),n=!0)),s&&h.diagnostic==s.diagnostic?h.dom.hasAttribute("aria-selected")||(h.dom.setAttribute("aria-selected","true"),r=h):h.dom.hasAttribute("aria-selected")&&h.dom.removeAttribute("aria-selected"),i++}});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)n=!0,this.items.pop();this.items.length==0&&(this.items.push(new um(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),n=!0),r?(this.list.setAttribute("aria-activedescendant",r.id),this.view.requestMeasure({key:this,read:()=>({sel:r.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:l,panel:a})=>{let d=a.height/this.list.offsetHeight;l.top<a.top?this.list.scrollTop-=(a.top-l.top)/d:l.bottom>a.bottom&&(this.list.scrollTop+=(l.bottom-a.bottom)/d)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),n&&this.sync()}sync(){let e=this.list.firstChild;function s(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)s();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)s()}moveSelection(e){if(this.selectedIndex<0)return;let s=this.view.state.field(Vs),i=kr(s.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:zv.of(i)})}static open(e){return new jo(e)}}function bV(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function _l(t){return bV(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const xV=Me.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:_l("#d11")},".cm-lintRange-warning":{backgroundImage:_l("orange")},".cm-lintRange-info":{backgroundImage:_l("#999")},".cm-lintRange-hint":{backgroundImage:_l("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function kV(t){return t=="error"?4:t=="warning"?3:t=="info"?2:1}function wV(t){let e="hint",s=1;for(let i of t){let n=kV(i.severity);n>s&&(s=n,e=i.severity)}return e}const SV=[Vs,Me.decorations.compute([Vs],t=>{let{selected:e,panel:s}=t.field(Vs);return!e||!s||e.from==e.to?Ie.none:Ie.set([fV.range(e.from,e.to)])}),u5(hV,{hideOn:dV}),xV],_V=[x5(),S5(),UC(),W3(),p3(),DC(),PC(),Xe.allowMultipleSelections.of(!0),e3(),jy(v3,{fallback:!0}),C3(),X8(),aV(),QC(),t5(),qC(),t8(),Bc.of([...tV,...JA,...x8,...eA,...d3,...Uv,...yV])],CV={class:"rounded-lg border border-gray-300 overflow-hidden dark:border-gray-600"},Zn={__name:"CodeEditor",props:{modelValue:{type:String,default:""},language:{type:String,default:"r",validator:t=>["r","markdown","text","gitignore"].includes(t)},minHeight:{type:String,default:"400px"},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:""}},emits:["update:modelValue"],setup(t,{emit:e}){const s=t,i=e,n=fe(null);let r=null;const o=Kc.define({token(d){return d.sol()&&d.match(/^#/)?(d.skipToEnd(),"comment"):(d.skipToEnd(),null)}}),l=jy(Ho.define([{tag:_e.comment,color:"#16a34a"}])),a=()=>[o,l];return es(()=>{if(!n.value)return;const d=Me.updateListener.of(h=>{h.docChanged&&i("update:modelValue",h.state.doc.toString())}),u=[_V,a(),d,Me.lineWrapping,Me.theme({"&":{minHeight:s.minHeight,fontSize:"13px",fontFamily:'ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, "Liberation Mono", monospace'},".cm-scroller":{fontFamily:'ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, "Liberation Mono", monospace'},".cm-content":{padding:"12px 0"},".cm-line":{padding:"0 12px"}})],f=Xe.create({doc:s.modelValue||"",extensions:u});r=new Me({state:f,parent:n.value})}),Je(()=>s.modelValue,d=>{r&&d!==r.state.doc.toString()&&r.dispatch({changes:{from:0,to:r.state.doc.length,insert:d}})}),(d,u)=>(g(),x("div",CV,[c("div",{ref_key:"editorRef",ref:n},null,512)]))}},AV={class:"relative"},VV={key:0,class:"absolute z-10 mt-1 w-full max-h-64 overflow-y-auto border border-gray-200 dark:border-gray-700 rounded-md bg-white dark:bg-gray-800 shadow-lg"},MV=["onClick","onMouseenter"],DV={class:"flex items-center justify-between gap-3"},TV={class:"flex-1 min-w-0"},EV={class:"font-medium text-gray-900 dark:text-white"},$V={class:"text-xs text-gray-500 dark:text-gray-400 truncate"},OV={class:"ml-3 text-xs text-gray-400 dark:text-gray-500 shrink-0 flex items-center gap-1.5"},PV={class:"text-[10px] font-medium"},jV={key:1,class:"absolute right-3 top-9 text-gray-400"},Wv={__name:"PackageAutocomplete",props:{modelValue:{type:String,default:""},label:{type:String,default:"Search Packages"},placeholder:{type:String,default:"Type to search..."},source:{type:String,default:"cran",validator:t=>["cran","bioconductor","github"].includes(t)}},emits:["update:modelValue","select"],setup(t,{emit:e}){const s=t,i=e,n=fe(s.modelValue),r=fe([]),o=fe(!1),l=fe(-1);let a=null;Je(()=>s.modelValue,h=>{n.value=h}),Je(n,h=>{if(i("update:modelValue",h),a&&clearTimeout(a),h.length<2){r.value=[],l.value=-1;return}a=setTimeout(()=>{d(h)},300)});const d=async h=>{o.value=!0;try{const w=await(await fetch(`/api/packages/search?q=${encodeURIComponent(h)}&source=${encodeURIComponent(s.source)}`)).json();r.value=w.packages||[],l.value=r.value.length>0?0:-1}catch(m){console.error("Failed to search packages:",m),r.value=[],l.value=-1}finally{o.value=!1}},u=h=>{r.value.length!==0&&(h.key==="ArrowDown"?(h.preventDefault(),l.value=Math.min(l.value+1,r.value.length-1)):h.key==="ArrowUp"?(h.preventDefault(),l.value=Math.max(l.value-1,0)):h.key==="Enter"&&l.value>=0?(h.preventDefault(),f(r.value[l.value])):h.key==="Escape"&&(r.value=[],l.value=-1))},f=h=>{n.value=h.name,i("update:modelValue",h.name),i("select",h),r.value=[],l.value=-1};return(h,m)=>(g(),x("div",AV,[k(W,{modelValue:n.value,"onUpdate:modelValue":m[0]||(m[0]=w=>n.value=w),label:t.label,placeholder:t.placeholder,onKeydown:u},null,8,["modelValue","label","placeholder"]),r.value.length>0?(g(),x("div",VV,[(g(!0),x(X,null,be(r.value,(w,_)=>(g(),x("button",{key:w.name,onClick:C=>f(w),onMouseenter:C=>l.value=_,class:Ve(["w-full px-3 py-2 text-left border-b border-gray-200 dark:border-gray-700 last:border-b-0 transition",l.value===_?"bg-sky-50 dark:bg-sky-900/20":"hover:bg-gray-50 dark:hover:bg-gray-700"])},[c("div",DV,[c("div",TV,[c("div",EV,F(w.name),1),c("div",$V,F(w.title),1)]),c("div",OV,[c("span",PV,F(w.source==="cran"?"CRAN":w.source==="bioconductor"?"Bioconductor":w.source),1),m[1]||(m[1]=c("span",null,"",-1)),c("span",null,"v"+F(w.version),1)])])],42,MV))),128))])):R("",!0),o.value?(g(),x("div",jV,[...m[2]||(m[2]=[c("svg",{class:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[c("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),c("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):R("",!0)]))}},RV={class:"flex min-h-screen"},LV={class:"w-64 shrink-0 border-r border-gray-200 p-6 dark:border-gray-800"},BV={class:"space-y-1 mb-6"},IV=["onClick"],UV={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},NV={class:"flex-1 p-10"},zV={class:"mt-8 space-y-6"},FV={class:"space-y-6"},HV={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},WV={class:"space-y-6"},qV={class:"font-medium"},GV={class:"text-xs text-gray-600 dark:text-gray-400"},KV={class:"font-medium"},JV={class:"text-xs text-gray-600 dark:text-gray-400"},YV={class:"font-medium"},XV={class:"text-xs text-gray-600 dark:text-gray-400"},QV={class:"font-medium"},ZV={class:"text-xs text-gray-600 dark:text-gray-400"},eM={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},tM={class:"space-y-3"},sM={class:"flex items-center justify-between"},iM={class:"flex-1"},nM={class:"text-sm text-gray-900 dark:text-white"},rM={key:0},oM={key:1,class:"text-gray-400 dark:text-gray-500 mx-1"},lM={key:2},aM={key:3,class:"text-gray-400 dark:text-gray-500 mx-1"},uM={key:4},dM={class:"flex items-center justify-between"},cM={class:"flex-1"},fM={class:"text-sm text-gray-900 dark:text-white"},hM={class:"text-gray-600 dark:text-gray-400"},pM={class:"text-gray-600 dark:text-gray-400"},mM={class:"text-gray-600 dark:text-gray-400"},gM={class:"flex items-center justify-between"},yM={class:"flex-1"},vM={class:"text-sm text-gray-900 dark:text-white"},bM={class:"text-gray-600 dark:text-gray-400"},xM={class:"text-gray-600 dark:text-gray-400"},kM={class:"text-gray-600 dark:text-gray-400"},wM={class:"text-gray-600 dark:text-gray-400"},SM={class:"flex items-center justify-between"},_M={class:"flex-1"},CM={class:"text-sm text-gray-900 dark:text-white"},AM={class:"font-medium"},VM={key:0,class:"text-gray-400 dark:text-gray-500 mx-1"},MM={key:1},DM={class:"flex items-center justify-between"},TM={class:"flex-1"},EM={class:"text-sm text-gray-900 dark:text-white"},$M={class:"text-gray-600 dark:text-gray-400"},OM={class:"flex items-center justify-between"},PM={class:"flex-1"},jM={class:"text-sm text-gray-900 dark:text-white"},RM={class:"font-medium"},LM={class:"text-gray-600 dark:text-gray-400"},BM={class:"text-gray-600 dark:text-gray-400"},IM={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},UM={class:"space-y-4"},NM={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},zM={class:"space-y-5"},FM={class:"space-y-6"},HM={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},WM={key:0,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},qM={key:1,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},GM={class:"space-y-3"},KM={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},JM={class:"grid grid-cols-2 gap-3"},YM={key:2,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},XM={class:"space-y-3"},QM={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},ZM={class:"grid grid-cols-2 gap-3"},e6={key:3,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},t6={class:"space-y-3"},s6={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},i6={class:"grid grid-cols-2 gap-3"},n6={key:4,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},r6={class:"space-y-3"},o6={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},l6={class:"grid grid-cols-2 gap-3"},a6={key:5,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},u6={class:"space-y-3"},d6={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},c6={class:"grid grid-cols-2 gap-3"},f6={key:6,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},h6={class:"space-y-3"},p6={key:7,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},m6={class:"space-y-3"},g6={key:8,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},y6={class:"space-y-3"},v6={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},b6={class:"grid grid-cols-2 gap-3"},x6={key:9,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},k6={class:"space-y-3"},w6={class:"flex items-start gap-3 mb-2"},S6={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},_6={class:"grid grid-cols-2 gap-3"},C6={key:10,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},A6={class:"space-y-4"},V6={class:"grid gap-4 sm:grid-cols-2"},M6={class:"p-3 rounded-md"},D6={class:"p-3 rounded-md"},T6={class:"grid gap-4 sm:grid-cols-2"},E6={class:"space-y-3"},$6={class:"space-y-3"},O6={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},P6={class:"grid gap-6 sm:grid-cols-2"},j6={class:"space-y-2"},R6={class:"space-y-2"},L6={key:11,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},B6={class:"space-y-4"},I6={class:"grid gap-4 sm:grid-cols-2"},U6={class:"p-3 rounded-md"},N6={class:"p-3 rounded-md"},z6={class:"grid gap-4 sm:grid-cols-2"},F6={class:"space-y-3"},H6={class:"space-y-3"},W6={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},q6={class:"grid gap-6 sm:grid-cols-2"},G6={class:"space-y-2"},K6={class:"space-y-2"},J6={key:12,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},Y6={class:"space-y-3"},X6={class:"flex items-start gap-3 mb-2"},Q6={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},Z6={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},eD={class:"space-y-5"},tD={class:"pt-4 border-t border-gray-200 dark:border-gray-700"},sD={class:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between mb-4"},iD={key:0,class:"space-y-3"},nD={class:"flex flex-col gap-3"},rD={class:"grid gap-3 grid-cols-[1fr_160px]"},oD={class:"flex items-center justify-between"},lD={key:1,class:"text-xs text-gray-500 dark:text-gray-400"},aD={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},uD={class:"space-y-5"},dD={key:0,class:"pt-4 border-t border-gray-200 dark:border-gray-700"},cD={class:"space-y-3"},fD={key:0,class:"mt-5 pt-5 border-t border-gray-200 dark:border-gray-700"},hD={class:"rounded-md bg-sky-50 p-4 dark:bg-sky-900/20"},pD={class:"flex"},mD={class:"ml-3"},gD={class:"mt-2 text-sm text-sky-700 dark:text-sky-300"},yD={class:"list-disc list-inside space-y-1"},vD={key:0},bD={key:1},xD={key:2},kD={key:0,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},wD={class:"flex items-center justify-between mb-1"},SD={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},_D={class:"space-y-5"},CD={key:0,class:"pt-4 border-t border-gray-200 dark:border-gray-700 space-y-5"},AD={class:"space-y-4"},VD={__name:"NewProjectView",setup(t){const e=Ea(),s=_r(),i=$a(),n=fe(null),r=fe(null),o=fe(!0),l=[{id:"overview",label:"Basics"},{id:"author",label:"Author & Metadata"},{id:"structure",label:"Project Structure"},{id:"packages",label:"Packages & Dependencies"},{id:"ai",label:"AI Assistants"},{id:"git",label:"Git & Hooks"},{id:"scaffold",label:"Scaffold Behavior"}],a=fe("overview"),d=fe(!1),u=fe({name:"",location:"",type:"project",author:{name:"",email:"",affiliation:""},scaffold:{seed_on_scaffold:!1,seed:"",set_theme_on_scaffold:!0,ggplot_theme:"theme_minimal",source_all_functions:!0,notebook_format:"quarto",ide:"vscode"},packages:{use_renv:!1,default_packages:[]},ai:{enabled:!0,assistants:[],canonical_file:"CLAUDE.md",canonical_content:""},git:{initialize:!0,gitignore_template:"gitignore-project",gitignore_content:"",hooks:{ai_sync:!1,data_security:!1,check_sensitive_dirs:!1}},directories_enabled:{},directories:{},extra_directories:[],extra_directories_enabled:{}}),f=()=>{const E=s.query.section;E&&["overview","author","scaffold","structure","packages","ai","git"].includes(E)&&(a.value=E)};Je(()=>s.query.section,E=>{E&&["overview","author","scaffold","structure","packages","ai","git"].includes(E)?a.value=E:E||(a.value="overview")}),Je(a,E=>{s.query.section!==E&&e.replace({query:{...s.query,section:E}})}),es(async()=>{console.log("[DEBUG] NewProjectView mounted - starting initialization"),f();try{console.log("[DEBUG] Fetching global settings from /api/settings");const E=await fetch("/api/settings");if(console.log("[DEBUG] Settings response status:",E.status,E.ok),E.ok&&(n.value=await E.json(),n.value)){if(u.value.author={...n.value.author},n.value.defaults?.project_type&&(u.value.type=n.value.defaults.project_type),n.value.defaults?.scaffold&&(u.value.scaffold={...n.value.defaults.scaffold}),console.log("[DEBUG] Global settings loaded:",n.value),console.log("[DEBUG] Defaults object:",n.value.defaults),console.log("[DEBUG] Packages data:",n.value.defaults?.packages),console.log("[DEBUG] Is array?",Array.isArray(n.value.defaults?.packages)),n.value.defaults?.packages)if(Array.isArray(n.value.defaults.packages)){console.log("[DEBUG] Loading packages from flat array format");const I=n.value.defaults.packages.map(A=>({name:A.name||"",source:A.source||"cran",auto_attach:A.auto_attach!==!1}));console.log("[DEBUG] Mapped packages:",I),u.value.packages.default_packages.splice(0,u.value.packages.default_packages.length,...I),console.log("[DEBUG] Final project.packages:",u.value.packages)}else n.value.defaults.packages.default_packages?(console.log("[DEBUG] Loading packages from nested object format"),u.value.packages={use_renv:n.value.defaults.packages.use_renv||!1,default_packages:(n.value.defaults.packages.default_packages||[]).map(I=>({name:I.name||"",source:I.source||"cran",auto_attach:I.auto_attach!==!1}))},console.log("[DEBUG] Final project.packages:",u.value.packages)):console.log("[DEBUG] Packages exists but is not array or nested object:",typeof n.value.defaults.packages);else console.log("[DEBUG] No packages found in defaults");n.value.defaults?.ai&&(u.value.ai={enabled:n.value.defaults.ai.enabled!==!1,assistants:[],canonical_file:n.value.defaults.ai.canonical_file||"CLAUDE.md",canonical_content:""}),u.value.ai.enabled&&u.value.ai.canonical_file&&q(u.value.ai.canonical_file,u.value.type),n.value.defaults?.git&&(u.value.git={...n.value.defaults.git});const p={project:"gitignore-project",project_sensitive:"gitignore-project_sensitive",course:"gitignore-course",presentation:"gitignore-presentation"};u.value.git.gitignore_template=p[u.value.type]||"gitignore-project",u.value.git.gitignore_template&&D(u.value.git.gitignore_template)}const y=await fetch("/api/settings-catalog");y.ok&&(r.value=await y.json()),h()}catch(E){console.error("[DEBUG] Failed to load settings:",E),console.error("[DEBUG] Error details:",E.message,E.stack),i.error("Load Error","Could not load default settings")}finally{console.log("[DEBUG] Initialization complete, loading =",o.value),o.value=!1}}),Je(()=>u.value.type,E=>{h();const y={project:"gitignore-project",project_sensitive:"gitignore-project_sensitive",course:"gitignore-course",presentation:"gitignore-presentation"};u.value.git.gitignore_template=y[E]||"gitignore-project"}),Je(()=>u.value.packages.default_packages,(E,y)=>{console.log("[DEBUG PACKAGES WATCH] Packages changed!"),console.log("[DEBUG PACKAGES WATCH] Old:",y),console.log("[DEBUG PACKAGES WATCH] New:",E),console.trace("[DEBUG PACKAGES WATCH] Stack trace:")},{deep:!0}),Je(()=>u.value.git.gitignore_template,E=>{E&&D(E)}),Je(()=>u.value.ai.enabled,E=>{E&&u.value.ai.canonical_file&&q(u.value.ai.canonical_file,u.value.type)}),Je(()=>u.value.ai.canonical_file,E=>{E&&u.value.ai.enabled&&q(E,u.value.type)}),Je(()=>u.value.type,E=>{u.value.ai.canonical_file==="CLAUDE.md"&&u.value.ai.enabled&&q("CLAUDE.md",E)});const h=()=>{if(console.log("[DEBUG] loadProjectTypeDefaults() called - current packages:",u.value.packages.default_packages),!r.value?.project_types)return;const E=r.value.project_types[u.value.type];if(!E?.directories)return;const y=n.value?.project_types?.[u.value.type];if(!u.value.git.gitignore_template||u.value.git.gitignore_template==="gitignore-project"){const p={project:"gitignore-project",project_sensitive:"gitignore-sensitive",course:"gitignore-course",presentation:"gitignore-presentation"};u.value.git.gitignore_template=p[u.value.type]||"gitignore-project"}D(u.value.git.gitignore_template),u.value.directories_enabled=Object.entries(E.directories).reduce((p,[I,A])=>(p[I]=A.enabled_by_default!==!1,p),{}),u.value.directories=Object.entries(E.directories).reduce((p,[I,A])=>(p[I]=y?.directories?.[I]||A.default||"",p),{}),y?.extra_directories&&Array.isArray(y.extra_directories)?(u.value.extra_directories=y.extra_directories.map(p=>({...p,_source:"global"})),u.value.extra_directories_enabled=y.extra_directories.reduce((p,I)=>(I.key&&(p[I.key]=!0),p),{})):(u.value.extra_directories=[],u.value.extra_directories_enabled={}),console.log("[DEBUG] loadProjectTypeDefaults() finished - packages still:",u.value.packages.default_packages)},m=E=>r.value?.project_types?.[E]?.label||E,w=E=>r.value?.project_types?.[E]?.description||"",_=le(()=>({overview:"Set your project name, location, and type. Customize defaults below or skip to create.",author:"Configure author information embedded in project templates.",scaffold:"Runtime settings that control what happens when scaffold() runs.",structure:"Customize which directories to create for this project type.",packages:"Configure package management and default packages.",ai:"Configure AI assistant integration for this project.",git:"Configure version control and git hooks."})[a.value]||"");le(()=>({vscode:"Positron / VS Code",rstudio:"RStudio","rstudio,vscode":"Both",none:"Other"})[u.value.scaffold.ide]||u.value.scaffold.ide);const C=(E,y)=>{y?u.value.ai.assistants.includes(E)||u.value.ai.assistants.push(E):u.value.ai.assistants=u.value.ai.assistants.filter(p=>p!==E)},M=()=>{u.value.packages.default_packages||(u.value.packages.default_packages=[]),u.value.packages.default_packages.push({name:"",source:"cran",auto_attach:!1})},U=E=>{u.value.packages.default_packages.splice(E,1)},$=E=>({"gitignore-project":"Research Project","gitignore-sensitive":"Sensitive Data Project","gitignore-course":"Course/Teaching","gitignore-presentation":"Presentation"})[E]||E,D=async E=>{try{const y=await fetch(`/api/templates/${E}`);if(y.ok){const p=await y.json();p.success&&p.contents&&(u.value.git.gitignore_content=p.contents)}}catch(y){console.error("Failed to load gitignore template:",y)}},N=async()=>{u.value.git.gitignore_template&&(await D(u.value.git.gitignore_template),i.success("Template Reset","Restored default .gitignore template"))},q=async(E,y)=>{try{let p;if(E==="CLAUDE.md")switch(y){case"project_sensitive":p="ai_claude_sensitive";break;case"course":p="ai_claude_course";break;case"presentation":p="ai_claude_presentation";break;default:p="ai_claude_project"}else E==="AGENTS.md"?p="ai_agents":E===".github/copilot-instructions.md"&&(p="ai_copilot");const I=await fetch(`/api/templates/${p}`);if(I.ok){const A=await I.json();A.success&&A.contents&&(u.value.ai.canonical_content=A.contents)}}catch(p){console.error("Failed to load AI template:",p)}},P=le(()=>r.value?.project_types?r.value.project_types[u.value.type]?.directories||{}:{});le(()=>Object.values(u.value.directories_enabled).filter(E=>E).length);const ne=E=>Object.keys(u.value.directories_enabled).filter(p=>u.value.directories_enabled[p]?E==="workspace"?p==="notebooks"||p==="scripts"||p==="functions":E==="input"?p.startsWith("inputs_"):E==="output"?p.startsWith("outputs_"):E==="temporary"?p==="cache"||p==="scratch":!1:!1).length,te=E=>Array.isArray(u.value.extra_directories)?u.value.extra_directories.filter(y=>y.type===E&&y._source==="global"):[],pe=E=>Array.isArray(u.value.extra_directories)?u.value.extra_directories.filter(y=>y.type===E&&y._source!=="global"):[],Q=(E,y)=>{Array.isArray(u.value.extra_directories)||(u.value.extra_directories=[]);const p=u.value.extra_directories.filter(A=>A._source==="global"||A.type!==E&&A._source!=="global"),I=y.map(A=>({...A,type:E,_source:"project"}));u.value.extra_directories=[...p,...I],I.forEach(A=>{A.key&&!u.value.extra_directories_enabled[A.key]&&(u.value.extra_directories_enabled[A.key]=!0)})},z=E=>{e.push({query:{...s.query,section:E}})},ae=()=>{if(!u.value.name||!u.value.name.trim())return;const E=n.value?.global?.projects_root||"";if(!E)return;const y=u.value.location.trim();if(y&&!y.startsWith(E))return;const p=u.value.name.toLowerCase().trim().replace(/[\s_]+/g,"-").replace(/[^a-z0-9-]/g,"").replace(/-+/g,"-").replace(/^-|-$/g,"");u.value.location=`${E}/${p}`},re=async()=>{if(!u.value.name||!u.value.name.trim()){i.error("Validation Error","Project name is required"),z("overview");return}if(!u.value.location||!u.value.location.trim()){i.error("Validation Error","Project location is required"),z("overview");return}try{d.value=!0;const E=r.value?.project_types?.[u.value.type],y={};E?.directories&&Object.entries(E.directories).forEach(([J,ge])=>{u.value.directories_enabled[J]&&(y[J]=ge.default)});const p={name:u.value.name,location:u.value.location,type:u.value.type,author:u.value.author,scaffold:u.value.scaffold,packages:u.value.packages,ai:u.value.ai,git:u.value.git,directories:y},I=await fetch("/api/projects/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)});if(!I.ok){const J=await I.json();throw new Error(J.message||"Failed to create project")}const A=await I.json();i.success("Project Created",`${u.value.name} has been created successfully`),e.push("/projects")}catch(E){console.error("Failed to create project:",E),i.error("Creation Failed",E.message||"Could not create the project")}finally{d.value=!1}},ye=E=>{(E.metaKey||E.ctrlKey)&&E.key==="s"&&(E.preventDefault(),re())};return es(()=>{window.addEventListener("keydown",ye)}),Sr(()=>{window.removeEventListener("keydown",ye)}),(E,y)=>(g(),x("div",RV,[c("nav",LV,[y[51]||(y[51]=c("h2",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"New Project",-1)),c("div",BV,[(g(),x(X,null,be(l,p=>c("a",{key:p.id,href:"#",onClick:ft(I=>a.value=p.id,["prevent"]),class:Ve(["block px-3 py-2 rounded-md text-sm transition",a.value===p.id?"bg-sky-50 text-sky-700 font-medium dark:bg-sky-900/20 dark:text-sky-400":"text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-800"])},F(p.label),11,IV)),64))]),c("div",UV,[k(Oe,{variant:"primary",size:"md",class:"w-full",disabled:d.value,onClick:re},{default:B(()=>[se(F(d.value?"Creating...":"Create Project"),1)]),_:1},8,["disabled"])])]),c("div",NV,[k(Cr,{title:"New Project",description:_.value},null,8,["description"]),c("div",zV,[qe(c("div",FV,[c("div",HV,[y[56]||(y[56]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"}," Project Essentials ",-1)),c("div",WV,[k(W,{modelValue:u.value.name,"onUpdate:modelValue":y[0]||(y[0]=p=>u.value.name=p),label:"Project Name",placeholder:"My Analysis Project",hint:"Used for the project directory name and title",onBlur:ae},null,8,["modelValue"]),k(W,{modelValue:u.value.location,"onUpdate:modelValue":y[1]||(y[1]=p=>u.value.location=p),label:"Project Location",placeholder:n.value?.global?.projects_root||"~/projects",hint:"Parent directory where the project folder will be created",monospace:""},null,8,["modelValue","placeholder"]),k(mu,{legend:"Project Type"},{default:B(()=>[k(ti,{modelValue:u.value.type,"onUpdate:modelValue":y[2]||(y[2]=p=>u.value.type=p),value:"project",id:"overview-type-project",name:"overview_project_type"},{default:B(()=>[c("div",null,[c("div",qV,F(m("project")),1),c("div",GV,F(w("project")),1)])]),_:1},8,["modelValue"]),k(ti,{modelValue:u.value.type,"onUpdate:modelValue":y[3]||(y[3]=p=>u.value.type=p),value:"project_sensitive",id:"overview-type-sensitive",name:"overview_project_type"},{default:B(()=>[c("div",null,[c("div",KV,F(m("project_sensitive")),1),c("div",JV,F(w("project_sensitive")),1)])]),_:1},8,["modelValue"]),k(ti,{modelValue:u.value.type,"onUpdate:modelValue":y[4]||(y[4]=p=>u.value.type=p),value:"presentation",id:"overview-type-presentation",name:"overview_project_type"},{default:B(()=>[c("div",null,[c("div",YV,F(m("presentation")),1),c("div",XV,F(w("presentation")),1)])]),_:1},8,["modelValue"]),k(ti,{modelValue:u.value.type,"onUpdate:modelValue":y[5]||(y[5]=p=>u.value.type=p),value:"course",id:"overview-type-course",name:"overview_project_type"},{default:B(()=>[c("div",null,[c("div",QV,F(m("course")),1),c("div",ZV,F(w("course")),1)])]),_:1},8,["modelValue"])]),_:1}),c("div",null,[y[54]||(y[54]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Notebook Format",-1)),k(mu,{legend:"",hideLegend:""},{default:B(()=>[k(ti,{modelValue:u.value.scaffold.notebook_format,"onUpdate:modelValue":y[6]||(y[6]=p=>u.value.scaffold.notebook_format=p),value:"quarto",id:"basics-format-quarto",name:"basics_notebook_format"},{default:B(()=>[...y[52]||(y[52]=[c("div",null,[c("div",{class:"font-medium"},"Quarto (.qmd)"),c("div",{class:"text-xs text-gray-600 dark:text-gray-400"},"Modern publishing system (recommended)")],-1)])]),_:1},8,["modelValue"]),k(ti,{modelValue:u.value.scaffold.notebook_format,"onUpdate:modelValue":y[7]||(y[7]=p=>u.value.scaffold.notebook_format=p),value:"rmarkdown",id:"basics-format-rmarkdown",name:"basics_notebook_format"},{default:B(()=>[...y[53]||(y[53]=[c("div",null,[c("div",{class:"font-medium"},"RMarkdown (.Rmd)"),c("div",{class:"text-xs text-gray-600 dark:text-gray-400"},"Classic R notebook format")],-1)])]),_:1},8,["modelValue"])]),_:1})]),c("div",null,[k(_s,{modelValue:u.value.scaffold.ide,"onUpdate:modelValue":y[8]||(y[8]=p=>u.value.scaffold.ide=p),label:"Primary Editor"},{default:B(()=>[...y[55]||(y[55]=[c("option",{value:"vscode"},"Positron / VS Code",-1),c("option",{value:"rstudio"},"RStudio",-1),c("option",{value:"rstudio,vscode"},"Both",-1),c("option",{value:"none"},"Other",-1)])]),_:1},8,["modelValue"])])])]),c("div",eM,[y[81]||(y[81]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},[se(" Optional Customization "),c("span",{class:"ml-2 text-xs font-normal text-gray-500 dark:text-gray-400"}," (using global defaults - click any card to customize) ")],-1)),c("div",tM,[c("button",{onClick:y[9]||(y[9]=p=>z("author")),class:"w-full text-left px-4 py-3 rounded-md bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 hover:border-sky-300 dark:hover:border-sky-700 transition"},[c("div",sM,[c("div",iM,[y[57]||(y[57]=c("div",{class:"text-xs text-gray-500 dark:text-gray-400 mb-1"},"Author & Metadata",-1)),c("div",nM,[u.value.author.name||u.value.author.email||u.value.author.affiliation?(g(),x(X,{key:0},[u.value.author.name?(g(),x("span",rM,F(u.value.author.name),1)):R("",!0),u.value.author.name&&u.value.author.email?(g(),x("span",oM,"")):R("",!0),u.value.author.email?(g(),x("span",lM,F(u.value.author.email),1)):R("",!0),(u.value.author.name||u.value.author.email)&&u.value.author.affiliation?(g(),x("span",aM,"")):R("",!0),u.value.author.affiliation?(g(),x("span",uM,F(u.value.author.affiliation),1)):R("",!0)],64)):(g(),x(X,{key:1},[se(" Not set ")],64))])]),y[58]||(y[58]=c("svg",{class:"h-5 w-5 text-gray-400 shrink-0 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))])]),c("button",{onClick:y[10]||(y[10]=p=>z("scaffold")),class:"w-full text-left px-4 py-3 rounded-md bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 hover:border-sky-300 dark:hover:border-sky-700 transition"},[c("div",dM,[c("div",cM,[y[63]||(y[63]=c("div",{class:"text-xs text-gray-500 dark:text-gray-400 mb-1"},"Scaffold Behavior",-1)),c("div",fM,[c("span",hM,[u.value.scaffold.source_all_functions?(g(),x(X,{key:0},[y[59]||(y[59]=se(" Functions loaded from ",-1)),y[60]||(y[60]=c("code",{class:"text-xs bg-gray-100 dark:bg-gray-800 px-1 rounded"},"functions/",-1))],64)):(g(),x(X,{key:1},[se(" Does not load functions ")],64))]),y[61]||(y[61]=c("span",{class:"text-gray-600 dark:text-gray-400 mx-2"},"",-1)),c("span",pM,[u.value.scaffold.set_theme_on_scaffold?(g(),x(X,{key:0},[se(" ggplot2 theme: "+F((u.value.scaffold.ggplot_theme||"theme_minimal").replace("theme_","")),1)],64)):(g(),x(X,{key:1},[se(" No ggplot theme ")],64))]),y[62]||(y[62]=c("span",{class:"text-gray-600 dark:text-gray-400 mx-2"},"",-1)),c("span",mM,F(u.value.scaffold.seed_on_scaffold?"Seed: "+(u.value.scaffold.seed||"default"):"No random seed"),1)])]),y[64]||(y[64]=c("svg",{class:"h-5 w-5 text-gray-400 shrink-0 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))])]),c("button",{onClick:y[11]||(y[11]=p=>z("structure")),class:"w-full text-left px-4 py-3 rounded-md bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 hover:border-sky-300 dark:hover:border-sky-700 transition"},[c("div",gM,[c("div",yM,[y[68]||(y[68]=c("div",{class:"text-xs text-gray-500 dark:text-gray-400 mb-1"},"Project Structure",-1)),c("div",vM,[c("span",bM,F(m(u.value.type)),1),y[66]||(y[66]=c("span",{class:"text-gray-600 dark:text-gray-400 mx-2"},"",-1)),c("span",xM,F(ne("workspace"))+" workspace ",1),y[67]||(y[67]=c("span",{class:"text-gray-600 dark:text-gray-400 mx-2"},"",-1)),c("span",kM,F(ne("input"))+" input ",1),ne("output")>0?(g(),x(X,{key:0},[y[65]||(y[65]=c("span",{class:"text-gray-600 dark:text-gray-400 mx-2"},"",-1)),c("span",wM,F(ne("output"))+" output ",1)],64)):R("",!0)])]),y[69]||(y[69]=c("svg",{class:"h-5 w-5 text-gray-400 shrink-0 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))])]),c("button",{onClick:y[12]||(y[12]=p=>z("packages")),class:"w-full text-left px-4 py-3 rounded-md bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 hover:border-sky-300 dark:hover:border-sky-700 transition"},[c("div",SM,[c("div",_M,[y[71]||(y[71]=c("div",{class:"text-xs text-gray-500 dark:text-gray-400 mb-1"},"Packages & Dependencies",-1)),c("div",CM,[y[70]||(y[70]=se(" renv: ",-1)),c("span",AM,F(u.value.packages.use_renv?"Enabled":"Disabled"),1),u.value.packages.default_packages&&u.value.packages.default_packages.length>0?(g(),x("span",VM,"")):R("",!0),u.value.packages.default_packages&&u.value.packages.default_packages.length>0?(g(),x("span",MM,F(u.value.packages.default_packages.length)+" package"+F(u.value.packages.default_packages.length!==1?"s":""),1)):R("",!0)])]),y[72]||(y[72]=c("svg",{class:"h-5 w-5 text-gray-400 shrink-0 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))])]),c("button",{onClick:y[13]||(y[13]=p=>z("ai")),class:"w-full text-left px-4 py-3 rounded-md bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 hover:border-sky-300 dark:hover:border-sky-700 transition"},[c("div",DM,[c("div",TM,[y[74]||(y[74]=c("div",{class:"text-xs text-gray-500 dark:text-gray-400 mb-1"},"AI Assistants",-1)),c("div",EM,[u.value.ai.enabled&&u.value.ai.assistants.length>0?(g(),x(X,{key:0},[se(F(u.value.ai.assistants.map(p=>p.charAt(0).toUpperCase()+p.slice(1)).join(", "))+" ",1),y[73]||(y[73]=c("span",{class:"text-gray-400 dark:text-gray-500 mx-1"},"",-1)),c("span",$M,F(u.value.ai.canonical_file),1)],64)):u.value.ai.enabled?(g(),x(X,{key:1},[se(" Enabled (no assistants selected) ")],64)):(g(),x(X,{key:2},[se(" Disabled ")],64))])]),y[75]||(y[75]=c("svg",{class:"h-5 w-5 text-gray-400 shrink-0 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))])]),c("button",{onClick:y[14]||(y[14]=p=>z("git")),class:"w-full text-left px-4 py-3 rounded-md bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 hover:border-sky-300 dark:hover:border-sky-700 transition"},[c("div",OM,[c("div",PM,[y[79]||(y[79]=c("div",{class:"text-xs text-gray-500 dark:text-gray-400 mb-1"},"Git & Hooks",-1)),c("div",jM,[y[78]||(y[78]=se(" Git: ",-1)),c("span",RM,F(u.value.git.initialize?"Yes":"No"),1),u.value.git.initialize?(g(),x(X,{key:0},[y[77]||(y[77]=c("span",{class:"text-gray-400 dark:text-gray-500 mx-1"},"",-1)),c("span",LM,F($(u.value.git.gitignore_template)),1),u.value.git.hooks.ai_sync||u.value.git.hooks.data_security?(g(),x(X,{key:0},[y[76]||(y[76]=c("span",{class:"text-gray-400 dark:text-gray-500 mx-1"},"",-1)),c("span",BM,F(u.value.git.hooks.ai_sync&&u.value.git.hooks.data_security?"2 hooks":"1 hook"),1)],64)):R("",!0)],64)):R("",!0)])]),y[80]||(y[80]=c("svg",{class:"h-5 w-5 text-gray-400 shrink-0 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))])])])])],512),[[gt,a.value==="overview"]]),qe(c("div",null,[c("div",IM,[y[82]||(y[82]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"}," Author & Metadata ",-1)),y[83]||(y[83]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Author information is embedded in project templates and documentation. ",-1)),c("div",UM,[k(W,{modelValue:u.value.author.name,"onUpdate:modelValue":y[15]||(y[15]=p=>u.value.author.name=p),label:"Your Name",placeholder:"Your Name"},null,8,["modelValue"]),k(W,{modelValue:u.value.author.email,"onUpdate:modelValue":y[16]||(y[16]=p=>u.value.author.email=p),type:"email",label:"Email",placeholder:"your.email@example.com"},null,8,["modelValue"]),k(W,{modelValue:u.value.author.affiliation,"onUpdate:modelValue":y[17]||(y[17]=p=>u.value.author.affiliation=p),label:"Affiliation",placeholder:"Organization"},null,8,["modelValue"])])])],512),[[gt,a.value==="author"]]),qe(c("div",null,[c("div",NM,[y[88]||(y[88]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"}," Scaffold Behavior ",-1)),y[89]||(y[89]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"},[se(" Automatic actions when "),c("code",{class:"px-1.5 py-0.5 bg-gray-200 dark:bg-gray-700 rounded text-xs"},"scaffold()"),se(" runs to initialize your project environment. ")],-1)),c("div",zM,[c("div",null,[y[84]||(y[84]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Auto-Load Functions",-1)),k(Re,{modelValue:u.value.scaffold.source_all_functions,"onUpdate:modelValue":y[18]||(y[18]=p=>u.value.scaffold.source_all_functions=p),label:"Source all R files from functions/ directory",description:"Automatically loads all helper functions when scaffold() runs"},null,8,["modelValue"])]),c("div",null,[y[86]||(y[86]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"ggplot2 Theme",-1)),k(Re,{modelValue:u.value.scaffold.set_theme_on_scaffold,"onUpdate:modelValue":y[19]||(y[19]=p=>u.value.scaffold.set_theme_on_scaffold=p),label:"Set ggplot2 theme when scaffold() runs",description:"Automatically sets ggplot2 theme for consistent plot styling"},null,8,["modelValue"]),u.value.scaffold.set_theme_on_scaffold?(g(),he(_s,{key:0,modelValue:u.value.scaffold.ggplot_theme,"onUpdate:modelValue":y[20]||(y[20]=p=>u.value.scaffold.ggplot_theme=p),label:"Theme",class:"mt-4"},{default:B(()=>[...y[85]||(y[85]=[c("option",{value:""},"None",-1),c("option",{value:"theme_minimal"},"Minimal",-1),c("option",{value:"theme_bw"},"Black & White",-1),c("option",{value:"theme_classic"},"Classic",-1),c("option",{value:"theme_gray"},"Gray (default)",-1),c("option",{value:"theme_light"},"Light",-1),c("option",{value:"theme_dark"},"Dark",-1),c("option",{value:"theme_void"},"Void",-1)])]),_:1},8,["modelValue"])):R("",!0)]),c("div",null,[y[87]||(y[87]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Random Seed",-1)),k(Re,{modelValue:u.value.scaffold.seed_on_scaffold,"onUpdate:modelValue":y[21]||(y[21]=p=>u.value.scaffold.seed_on_scaffold=p),label:"Set random seed when scaffold() runs",description:"Ensures deterministic behavior for reproducibility"},null,8,["modelValue"]),u.value.scaffold.seed_on_scaffold?(g(),he(W,{key:0,modelValue:u.value.scaffold.seed,"onUpdate:modelValue":y[22]||(y[22]=p=>u.value.scaffold.seed=p),label:"Seed Value",placeholder:"e.g., 1234 or 20241107",hint:"Leave empty to use global default",class:"mt-4"},null,8,["modelValue"])):R("",!0)])])])],512),[[gt,a.value==="scaffold"]]),qe(c("div",FM,[c("div",HM,[k(mu,{legend:"Project Type",description:"Select a project type to customize the directory structure."},{default:B(()=>[k(ti,{modelValue:u.value.type,"onUpdate:modelValue":y[23]||(y[23]=p=>u.value.type=p),id:"type-project",name:"project-type",value:"project"},{default:B(()=>[...y[90]||(y[90]=[c("div",null,[c("div",{class:"font-medium text-sm"},"Research Project"),c("div",{class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5"}," Full-featured with organized data, work, and output directories ")],-1)])]),_:1},8,["modelValue"]),k(ti,{modelValue:u.value.type,"onUpdate:modelValue":y[24]||(y[24]=p=>u.value.type=p),id:"type-sensitive",name:"project-type",value:"project_sensitive"},{default:B(()=>[...y[91]||(y[91]=[c("div",null,[c("div",{class:"font-medium text-sm"},"Sensitive Data Project"),c("div",{class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5"}," Enhanced privacy controls with separate private/public flows ")],-1)])]),_:1},8,["modelValue"]),k(ti,{modelValue:u.value.type,"onUpdate:modelValue":y[25]||(y[25]=p=>u.value.type=p),id:"type-presentation",name:"project-type",value:"presentation"},{default:B(()=>[...y[92]||(y[92]=[c("div",null,[c("div",{class:"font-medium text-sm"},"Presentation"),c("div",{class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5"}," Minimal structure for slides and presentations ")],-1)])]),_:1},8,["modelValue"]),k(ti,{modelValue:u.value.type,"onUpdate:modelValue":y[26]||(y[26]=p=>u.value.type=p),id:"type-course",name:"project-type",value:"course"},{default:B(()=>[...y[93]||(y[93]=[c("div",null,[c("div",{class:"font-medium text-sm"},"Course/Teaching"),c("div",{class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5"}," Simplified structure for teaching materials ")],-1)])]),_:1},8,["modelValue"])]),_:1})]),u.value.type==="presentation"?(g(),x("div",WM,[y[94]||(y[94]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Presentation File",-1)),k(W,{modelValue:u.value.directories.presentation_source,"onUpdate:modelValue":y[27]||(y[27]=p=>u.value.directories.presentation_source=p),label:"Presentation source file",placeholder:"presentation.qmd",hint:"Main Quarto file for your slides"},null,8,["modelValue"])])):R("",!0),u.value.type==="project"?(g(),x("div",qM,[y[97]||(y[97]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Workspaces",-1)),y[98]||(y[98]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Functions, notebooks, and scripts scaffolded into every project.",-1)),c("div",GM,[(g(),x(X,null,be(["functions","notebooks","scripts"],p=>c("div",{key:p},[k(Re,{id:`dir-${p}`,modelValue:u.value.directories_enabled[p],"onUpdate:modelValue":I=>u.value.directories_enabled[p]=I,label:P.value[p]?.label||p,description:P.value[p]?.hint,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),u.value.directories_enabled[p]?(g(),he(W,{key:0,modelValue:u.value.directories[p],"onUpdate:modelValue":I=>u.value.directories[p]=I,placeholder:P.value[p]?.default,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):R("",!0)])),64)),(g(!0),x(X,null,be(te("workspace"),p=>(g(),x("div",{key:`extra-${p.key}`},[k(Re,{id:`extra-dir-${p.key}`,modelValue:u.value.extra_directories_enabled[p.key],"onUpdate:modelValue":I=>u.value.extra_directories_enabled[p.key]=I,label:p.label,description:`Custom: ${p.path}`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),u.value.extra_directories_enabled[p.key]?(g(),he(W,{key:0,modelValue:p.path,"onUpdate:modelValue":I=>p.path=I,placeholder:p.path,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):R("",!0)]))),128))]),c("div",KM,[y[95]||(y[95]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Add Custom Workspace Directories",-1)),y[96]||(y[96]=c("p",{class:"text-xs text-gray-600 dark:text-gray-400 mb-3"},"Add directories specific to this project only.",-1)),k(Vt,{"model-value":pe("workspace"),"onUpdate:modelValue":y[28]||(y[28]=p=>Q("workspace",p)),"add-label":"Add Workspace Directory","default-item":()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:B(({item:p,index:I,update:A})=>[c("div",JM,[k(W,{"model-value":p.key,"onUpdate:modelValue":J=>A("key",J),label:"Key",placeholder:"e.g., tests",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":p.label,"onUpdate:modelValue":J=>A("label",J),label:"Label",placeholder:"e.g., Tests",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":p.path,"onUpdate:modelValue":J=>A("path",J),label:"Path",placeholder:"e.g., tests",prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])])):R("",!0),u.value.type==="project"?(g(),x("div",YM,[y[101]||(y[101]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Inputs",-1)),y[102]||(y[102]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Define the read-only locations where raw and prepared data live.",-1)),c("div",XM,[(g(),x(X,null,be(["inputs_raw","inputs_intermediate","inputs_final","reference"],p=>c("div",{key:p},[k(Re,{id:`dir-${p}`,modelValue:u.value.directories_enabled[p],"onUpdate:modelValue":I=>u.value.directories_enabled[p]=I,label:P.value[p]?.label||p,description:P.value[p]?.hint,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),u.value.directories_enabled[p]?(g(),he(W,{key:0,modelValue:u.value.directories[p],"onUpdate:modelValue":I=>u.value.directories[p]=I,placeholder:P.value[p]?.default,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):R("",!0)])),64)),(g(!0),x(X,null,be(te("input"),p=>(g(),x("div",{key:`extra-${p.key}`},[k(Re,{id:`extra-dir-${p.key}`,modelValue:u.value.extra_directories_enabled[p.key],"onUpdate:modelValue":I=>u.value.extra_directories_enabled[p.key]=I,label:p.label,description:`Custom: ${p.path}`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),u.value.extra_directories_enabled[p.key]?(g(),he(W,{key:0,modelValue:p.path,"onUpdate:modelValue":I=>p.path=I,placeholder:p.path,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):R("",!0)]))),128))]),c("div",QM,[y[99]||(y[99]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Add Custom Input Directories",-1)),y[100]||(y[100]=c("p",{class:"text-xs text-gray-600 dark:text-gray-400 mb-3"},"Add directories specific to this project only.",-1)),k(Vt,{"model-value":pe("input"),"onUpdate:modelValue":y[29]||(y[29]=p=>Q("input",p)),"add-label":"Add Input Directory","default-item":()=>({key:"",label:"",path:"",type:"input",_id:Date.now()})},{default:B(({item:p,index:I,update:A})=>[c("div",ZM,[k(W,{"model-value":p.key,"onUpdate:modelValue":J=>A("key",J),label:"Key",placeholder:"e.g., inputs_archive",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":p.label,"onUpdate:modelValue":J=>A("label",J),label:"Label",placeholder:"e.g., Archive",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":p.path,"onUpdate:modelValue":J=>A("path",J),label:"Path",placeholder:"e.g., inputs/archive",prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])])):R("",!0),u.value.type==="project"?(g(),x("div",e6,[y[104]||(y[104]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Outputs",-1)),y[105]||(y[105]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Outputs are public by default so results are easy to share.",-1)),c("div",t6,[(g(),x(X,null,be(["outputs_notebooks","outputs_tables","outputs_figures","outputs_models","outputs_reports"],p=>c("div",{key:p},[k(Re,{id:`dir-${p}`,modelValue:u.value.directories_enabled[p],"onUpdate:modelValue":I=>u.value.directories_enabled[p]=I,label:P.value[p]?.label||p,description:P.value[p]?.hint,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),u.value.directories_enabled[p]?(g(),he(W,{key:0,modelValue:u.value.directories[p],"onUpdate:modelValue":I=>u.value.directories[p]=I,placeholder:P.value[p]?.default,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):R("",!0)])),64)),(g(!0),x(X,null,be(te("output"),p=>(g(),x("div",{key:`extra-${p.key}`},[k(Re,{id:`extra-${p.key}`,modelValue:u.value.extra_directories_enabled[p.key],"onUpdate:modelValue":I=>u.value.extra_directories_enabled[p.key]=I,label:p.label,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label"]),u.value.extra_directories_enabled[p.key]?(g(),he(W,{key:0,modelValue:p.path,"onUpdate:modelValue":I=>p.path=I,placeholder:p.path,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):R("",!0)]))),128))]),c("div",s6,[y[103]||(y[103]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Add Custom Output Directories",-1)),k(Vt,{"model-value":pe("output"),"onUpdate:modelValue":y[30]||(y[30]=p=>Q("output",p)),"add-label":"Add Output Directory","default-item":()=>({key:"",label:"",path:"",type:"output",_id:Date.now()})},{default:B(({item:p,index:I,update:A})=>[c("div",i6,[k(W,{"model-value":p.key,"onUpdate:modelValue":J=>A("key",J),label:"Key",placeholder:"e.g., outputs_animations",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":p.label,"onUpdate:modelValue":J=>A("label",J),label:"Label",placeholder:"e.g., Animations",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":p.path,"onUpdate:modelValue":J=>A("path",J),label:"Path",placeholder:"e.g., outputs/animations",prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])])):R("",!0),u.value.type==="project"?(g(),x("div",n6,[y[107]||(y[107]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Temporary",-1)),y[108]||(y[108]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Scratch space and cache (gitignored by default).",-1)),c("div",r6,[(g(),x(X,null,be(["cache","scratch"],p=>c("div",{key:p},[k(Re,{id:`dir-${p}`,modelValue:u.value.directories_enabled[p],"onUpdate:modelValue":I=>u.value.directories_enabled[p]=I,label:P.value[p]?.label||p,description:P.value[p]?.hint,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),u.value.directories_enabled[p]?(g(),he(W,{key:0,modelValue:u.value.directories[p],"onUpdate:modelValue":I=>u.value.directories[p]=I,placeholder:P.value[p]?.default,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):R("",!0)])),64)),(g(!0),x(X,null,be(te("temporary"),p=>(g(),x("div",{key:`extra-${p.key}`},[k(Re,{id:`extra-${p.key}`,modelValue:u.value.extra_directories_enabled[p.key],"onUpdate:modelValue":I=>u.value.extra_directories_enabled[p.key]=I,label:p.label,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label"]),u.value.extra_directories_enabled[p.key]?(g(),he(W,{key:0,modelValue:p.path,"onUpdate:modelValue":I=>p.path=I,placeholder:p.path,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):R("",!0)]))),128))]),c("div",o6,[y[106]||(y[106]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Add Custom Temporary Directories",-1)),k(Vt,{"model-value":pe("temporary"),"onUpdate:modelValue":y[31]||(y[31]=p=>Q("temporary",p)),"add-label":"Add Temporary Directory","default-item":()=>({key:"",label:"",path:"",type:"temporary",_id:Date.now()})},{default:B(({item:p,index:I,update:A})=>[c("div",l6,[k(W,{"model-value":p.key,"onUpdate:modelValue":J=>A("key",J),label:"Key",placeholder:"e.g., temp_downloads",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":p.label,"onUpdate:modelValue":J=>A("label",J),label:"Label",placeholder:"e.g., Downloads",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":p.path,"onUpdate:modelValue":J=>A("path",J),label:"Path",placeholder:"e.g., temp/downloads",prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])])):R("",!0),u.value.type==="course"?(g(),x("div",a6,[y[110]||(y[110]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Course Materials",-1)),y[111]||(y[111]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Slides, assignments, readings, and documentation.",-1)),c("div",u6,[(g(),x(X,null,be(["slides","assignments","readings","course_docs"],p=>c("div",{key:p},[k(Re,{id:`dir-${p}`,modelValue:u.value.directories_enabled[p],"onUpdate:modelValue":I=>u.value.directories_enabled[p]=I,label:P.value[p]?.label||p,description:P.value[p]?.hint,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),u.value.directories_enabled[p]?(g(),he(W,{key:0,modelValue:u.value.directories[p],"onUpdate:modelValue":I=>u.value.directories[p]=I,placeholder:P.value[p]?.default,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):R("",!0)])),64)),(g(!0),x(X,null,be(te("workspace"),p=>(g(),x("div",{key:`extra-${p.key}`},[k(Re,{id:`extra-dir-${p.key}`,modelValue:u.value.extra_directories_enabled[p.key],"onUpdate:modelValue":I=>u.value.extra_directories_enabled[p.key]=I,label:p.label,description:`Custom: ${p.path}`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),u.value.extra_directories_enabled[p.key]?(g(),he(W,{key:0,modelValue:p.path,"onUpdate:modelValue":I=>p.path=I,placeholder:p.path,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):R("",!0)]))),128))]),c("div",d6,[y[109]||(y[109]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Add Custom Directories",-1)),k(Vt,{"model-value":pe("workspace"),"onUpdate:modelValue":y[32]||(y[32]=p=>Q("workspace",p)),"add-label":"Add Directory","default-item":()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:B(({item:p,index:I,update:A})=>[c("div",c6,[k(W,{"model-value":p.key,"onUpdate:modelValue":J=>A("key",J),label:"Key",placeholder:"e.g., exercises",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":p.label,"onUpdate:modelValue":J=>A("label",J),label:"Label",placeholder:"e.g., Exercises",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":p.path,"onUpdate:modelValue":J=>A("path",J),label:"Path",placeholder:"e.g., exercises",prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])])):R("",!0),u.value.type==="course"?(g(),x("div",f6,[y[112]||(y[112]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Workspaces",-1)),y[113]||(y[113]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Module notebooks, functions, and scripts.",-1)),c("div",h6,[(g(),x(X,null,be(["notebooks","functions","scripts"],p=>c("div",{key:p},[k(Re,{id:`dir-${p}`,modelValue:u.value.directories_enabled[p],"onUpdate:modelValue":I=>u.value.directories_enabled[p]=I,label:P.value[p]?.label||p,description:P.value[p]?.hint,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),u.value.directories_enabled[p]?(g(),he(W,{key:0,modelValue:u.value.directories[p],"onUpdate:modelValue":I=>u.value.directories[p]=I,placeholder:P.value[p]?.default,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):R("",!0)])),64))])])):R("",!0),u.value.type==="course"?(g(),x("div",p6,[y[114]||(y[114]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Data & Storage",-1)),y[115]||(y[115]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Course datasets and temporary files.",-1)),c("div",m6,[(g(),x(X,null,be(["data","inputs","outputs","cache"],p=>c("div",{key:p},[k(Re,{id:`dir-${p}`,modelValue:u.value.directories_enabled[p],"onUpdate:modelValue":I=>u.value.directories_enabled[p]=I,label:P.value[p]?.label||p,description:P.value[p]?.hint,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),u.value.directories_enabled[p]?(g(),he(W,{key:0,modelValue:u.value.directories[p],"onUpdate:modelValue":I=>u.value.directories[p]=I,placeholder:P.value[p]?.default,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):R("",!0)])),64))])])):R("",!0),u.value.type==="presentation"?(g(),x("div",g6,[y[117]||(y[117]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Optional Directories",-1)),y[118]||(y[118]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Add supporting directories for data, scripts, or helper functions.",-1)),c("div",y6,[(g(),x(X,null,be(["data","scripts","functions"],p=>c("div",{key:p},[k(Re,{id:`dir-${p}`,modelValue:u.value.directories_enabled[p],"onUpdate:modelValue":I=>u.value.directories_enabled[p]=I,label:P.value[p]?.label||p,description:P.value[p]?.hint,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),u.value.directories_enabled[p]?(g(),he(W,{key:0,modelValue:u.value.directories[p],"onUpdate:modelValue":I=>u.value.directories[p]=I,placeholder:P.value[p]?.default,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):R("",!0)])),64)),(g(!0),x(X,null,be(te("workspace"),p=>(g(),x("div",{key:`extra-${p.key}`},[k(Re,{id:`extra-dir-${p.key}`,modelValue:u.value.extra_directories_enabled[p.key],"onUpdate:modelValue":I=>u.value.extra_directories_enabled[p.key]=I,label:p.label,description:`Custom: ${p.path}`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),u.value.extra_directories_enabled[p.key]?(g(),he(W,{key:0,modelValue:p.path,"onUpdate:modelValue":I=>p.path=I,placeholder:p.path,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):R("",!0)]))),128))]),c("div",v6,[y[116]||(y[116]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Add Custom Directories",-1)),k(Vt,{"model-value":pe("workspace"),"onUpdate:modelValue":y[33]||(y[33]=p=>Q("workspace",p)),"add-label":"Add Directory","default-item":()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:B(({item:p,index:I,update:A})=>[c("div",b6,[k(W,{"model-value":p.key,"onUpdate:modelValue":J=>A("key",J),label:"Key",placeholder:"e.g., assets",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":p.label,"onUpdate:modelValue":J=>A("label",J),label:"Label",placeholder:"e.g., Assets",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":p.path,"onUpdate:modelValue":J=>A("path",J),label:"Path",placeholder:"e.g., assets",prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])])):R("",!0),u.value.type==="project_sensitive"?(g(),x("div",x6,[y[120]||(y[120]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Work Directories",-1)),y[121]||(y[121]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Module locations for notebooks, scripts, and helper functions.",-1)),c("div",k6,[(g(),x(X,null,be(["functions","notebooks","scripts"],p=>c("div",{key:p},[c("div",w6,[k(Re,{id:`dir-${p}`,modelValue:u.value.directories_enabled[p],"onUpdate:modelValue":I=>u.value.directories_enabled[p]=I,label:P.value[p]?.label||p,description:P.value[p]?.hint,class:"flex-1"},null,8,["id","modelValue","onUpdate:modelValue","label","description"])]),u.value.directories_enabled[p]?(g(),he(W,{key:0,modelValue:u.value.directories[p],"onUpdate:modelValue":I=>u.value.directories[p]=I,placeholder:P.value[p]?.default,class:"mt-2",prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):R("",!0)])),64)),(g(!0),x(X,null,be(te("workspace"),p=>(g(),x("div",{key:`extra-${p.key}`},[k(Re,{id:`extra-dir-${p.key}`,modelValue:u.value.extra_directories_enabled[p.key],"onUpdate:modelValue":I=>u.value.extra_directories_enabled[p.key]=I,label:p.label,description:`Custom: ${p.path}`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),u.value.extra_directories_enabled[p.key]?(g(),he(W,{key:0,modelValue:p.path,"onUpdate:modelValue":I=>p.path=I,placeholder:p.path,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):R("",!0)]))),128))]),c("div",S6,[y[119]||(y[119]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Add Custom Workspace Directories",-1)),k(Vt,{"model-value":pe("workspace"),"onUpdate:modelValue":y[34]||(y[34]=p=>Q("workspace",p)),"add-label":"Add Workspace Directory","default-item":()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:B(({item:p,index:I,update:A})=>[c("div",_6,[k(W,{"model-value":p.key,"onUpdate:modelValue":J=>A("key",J),label:"Key",placeholder:"e.g., helpers",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":p.label,"onUpdate:modelValue":J=>A("label",J),label:"Label",placeholder:"e.g., Helper Functions",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":p.path,"onUpdate:modelValue":J=>A("path",J),label:"Path",placeholder:"e.g., helpers",prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])])):R("",!0),u.value.type==="project_sensitive"?(g(),x("div",C6,[y[125]||(y[125]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Inputs",-1)),y[126]||(y[126]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Keep private inputs compartmentalized; publish processed data into public folders when ready. ",-1)),y[127]||(y[127]=c("div",{class:"grid gap-4 sm:grid-cols-2 text-xs font-semibold uppercase text-gray-500 dark:text-gray-400 mb-3"},[c("div",null,"Private"),c("div",null,"Public")],-1)),c("div",A6,[(g(),x(X,null,be(["raw","intermediate","final"],p=>c("div",{key:p},[c("div",V6,[c("div",M6,[k(Re,{id:`dir-inputs_private_${p}`,modelValue:u.value.directories_enabled[`inputs_private_${p}`],"onUpdate:modelValue":I=>u.value.directories_enabled[`inputs_private_${p}`]=I,label:`${p.charAt(0).toUpperCase()+p.slice(1)} data`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label"]),u.value.directories_enabled[`inputs_private_${p}`]?(g(),he(W,{key:0,modelValue:u.value.directories[`inputs_private_${p}`],"onUpdate:modelValue":I=>u.value.directories[`inputs_private_${p}`]=I,placeholder:`inputs/private/${p}`,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):R("",!0)]),c("div",D6,[k(Re,{id:`dir-inputs_public_${p}`,modelValue:u.value.directories_enabled[`inputs_public_${p}`],"onUpdate:modelValue":I=>u.value.directories_enabled[`inputs_public_${p}`]=I,label:`${p.charAt(0).toUpperCase()+p.slice(1)} data`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label"]),u.value.directories_enabled[`inputs_public_${p}`]?(g(),he(W,{key:0,modelValue:u.value.directories[`inputs_public_${p}`],"onUpdate:modelValue":I=>u.value.directories[`inputs_public_${p}`]=I,placeholder:`inputs/public/${p}`,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):R("",!0)])])])),64)),c("div",T6,[c("div",E6,[(g(!0),x(X,null,be(te("input_private"),p=>(g(),x("div",{key:`extra-${p.key}`,class:"p-3 rounded-md"},[k(Re,{id:`extra-dir-${p.key}`,modelValue:u.value.extra_directories_enabled[p.key],"onUpdate:modelValue":I=>u.value.extra_directories_enabled[p.key]=I,label:p.label,description:`Custom: ${p.path}`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),u.value.extra_directories_enabled[p.key]?(g(),he(W,{key:0,modelValue:p.path,"onUpdate:modelValue":I=>p.path=I,placeholder:p.path,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):R("",!0)]))),128))]),c("div",$6,[(g(!0),x(X,null,be(te("input_public"),p=>(g(),x("div",{key:`extra-${p.key}`,class:"p-3 rounded-md"},[k(Re,{id:`extra-dir-${p.key}`,modelValue:u.value.extra_directories_enabled[p.key],"onUpdate:modelValue":I=>u.value.extra_directories_enabled[p.key]=I,label:p.label,description:`Custom: ${p.path}`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),u.value.extra_directories_enabled[p.key]?(g(),he(W,{key:0,modelValue:p.path,"onUpdate:modelValue":I=>p.path=I,placeholder:p.path,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):R("",!0)]))),128))])])]),c("div",O6,[y[124]||(y[124]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-4"},"Add Custom Input Directories",-1)),c("div",P6,[c("div",null,[y[122]||(y[122]=c("p",{class:"text-xs font-semibold uppercase text-gray-500 dark:text-gray-400 mb-3"},"Private",-1)),k(Vt,{"model-value":pe("input_private"),"onUpdate:modelValue":y[35]||(y[35]=p=>Q("input_private",p)),"add-label":"Add Private Input","default-item":()=>({key:"",label:"",path:"",type:"input_private",_id:Date.now()})},{default:B(({item:p,index:I,update:A})=>[c("div",j6,[k(W,{"model-value":p.key,"onUpdate:modelValue":J=>A("key",J),label:"Key",placeholder:"e.g., inputs_private_survey",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":p.label,"onUpdate:modelValue":J=>A("label",J),label:"Label",placeholder:"e.g., Survey Data",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":p.path,"onUpdate:modelValue":J=>A("path",J),label:"Path",placeholder:"e.g., inputs/private/survey",prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])]),c("div",null,[y[123]||(y[123]=c("p",{class:"text-xs font-semibold uppercase text-gray-500 dark:text-gray-400 mb-3"},"Public",-1)),k(Vt,{"model-value":pe("input_public"),"onUpdate:modelValue":y[36]||(y[36]=p=>Q("input_public",p)),"add-label":"Add Public Input","default-item":()=>({key:"",label:"",path:"",type:"input_public",_id:Date.now()})},{default:B(({item:p,index:I,update:A})=>[c("div",R6,[k(W,{"model-value":p.key,"onUpdate:modelValue":J=>A("key",J),label:"Key",placeholder:"e.g., inputs_public_survey",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":p.label,"onUpdate:modelValue":J=>A("label",J),label:"Label",placeholder:"e.g., Survey Data",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":p.path,"onUpdate:modelValue":J=>A("path",J),label:"Path",placeholder:"e.g., inputs/public/survey",prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])])])])):R("",!0),u.value.type==="project_sensitive"?(g(),x("div",L6,[y[131]||(y[131]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Outputs",-1)),y[132]||(y[132]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Review outputs before promotion; private folders remain gitignored while public copies are ready to share. ",-1)),y[133]||(y[133]=c("div",{class:"grid gap-4 sm:grid-cols-2 text-xs font-semibold uppercase text-gray-500 dark:text-gray-400 mb-3"},[c("div",null,"Private"),c("div",null,"Public")],-1)),c("div",B6,[(g(),x(X,null,be(["notebooks","tables","figures","models","reports"],p=>c("div",{key:p},[c("div",I6,[c("div",U6,[k(Re,{id:`dir-outputs_private_${p}`,modelValue:u.value.directories_enabled[`outputs_private_${p}`],"onUpdate:modelValue":I=>u.value.directories_enabled[`outputs_private_${p}`]=I,label:p.replace("_"," ").charAt(0).toUpperCase()+p.replace("_"," ").slice(1),class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label"]),u.value.directories_enabled[`outputs_private_${p}`]?(g(),he(W,{key:0,modelValue:u.value.directories[`outputs_private_${p}`],"onUpdate:modelValue":I=>u.value.directories[`outputs_private_${p}`]=I,placeholder:`outputs/private/${p}`,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):R("",!0)]),c("div",N6,[k(Re,{id:`dir-outputs_public_${p}`,modelValue:u.value.directories_enabled[`outputs_public_${p}`],"onUpdate:modelValue":I=>u.value.directories_enabled[`outputs_public_${p}`]=I,label:p.replace("_"," ").charAt(0).toUpperCase()+p.replace("_"," ").slice(1),class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label"]),u.value.directories_enabled[`outputs_public_${p}`]?(g(),he(W,{key:0,modelValue:u.value.directories[`outputs_public_${p}`],"onUpdate:modelValue":I=>u.value.directories[`outputs_public_${p}`]=I,placeholder:`outputs/public/${p}`,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):R("",!0)])])])),64)),c("div",z6,[c("div",F6,[(g(!0),x(X,null,be(te("output_private"),p=>(g(),x("div",{key:`extra-${p.key}`,class:"p-3 rounded-md"},[k(Re,{id:`extra-dir-${p.key}`,modelValue:u.value.extra_directories_enabled[p.key],"onUpdate:modelValue":I=>u.value.extra_directories_enabled[p.key]=I,label:p.label,description:`Custom: ${p.path}`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),u.value.extra_directories_enabled[p.key]?(g(),he(W,{key:0,modelValue:p.path,"onUpdate:modelValue":I=>p.path=I,placeholder:p.path,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):R("",!0)]))),128))]),c("div",H6,[(g(!0),x(X,null,be(te("output_public"),p=>(g(),x("div",{key:`extra-${p.key}`,class:"p-3 rounded-md"},[k(Re,{id:`extra-dir-${p.key}`,modelValue:u.value.extra_directories_enabled[p.key],"onUpdate:modelValue":I=>u.value.extra_directories_enabled[p.key]=I,label:p.label,description:`Custom: ${p.path}`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),u.value.extra_directories_enabled[p.key]?(g(),he(W,{key:0,modelValue:p.path,"onUpdate:modelValue":I=>p.path=I,placeholder:p.path,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):R("",!0)]))),128))])])]),c("div",W6,[y[130]||(y[130]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-4"},"Add Custom Output Directories",-1)),c("div",q6,[c("div",null,[y[128]||(y[128]=c("p",{class:"text-xs font-semibold uppercase text-gray-500 dark:text-gray-400 mb-3"},"Private",-1)),k(Vt,{"model-value":pe("output_private"),"onUpdate:modelValue":y[37]||(y[37]=p=>Q("output_private",p)),"add-label":"Add Private Output","default-item":()=>({key:"",label:"",path:"",type:"output_private",_id:Date.now()})},{default:B(({item:p,index:I,update:A})=>[c("div",G6,[k(W,{"model-value":p.key,"onUpdate:modelValue":J=>A("key",J),label:"Key",placeholder:"e.g., outputs_private_videos",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":p.label,"onUpdate:modelValue":J=>A("label",J),label:"Label",placeholder:"e.g., Videos",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":p.path,"onUpdate:modelValue":J=>A("path",J),label:"Path",placeholder:"e.g., outputs/private/videos",prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])]),c("div",null,[y[129]||(y[129]=c("p",{class:"text-xs font-semibold uppercase text-gray-500 dark:text-gray-400 mb-3"},"Public",-1)),k(Vt,{"model-value":pe("output_public"),"onUpdate:modelValue":y[38]||(y[38]=p=>Q("output_public",p)),"add-label":"Add Public Output","default-item":()=>({key:"",label:"",path:"",type:"output_public",_id:Date.now()})},{default:B(({item:p,index:I,update:A})=>[c("div",K6,[k(W,{"model-value":p.key,"onUpdate:modelValue":J=>A("key",J),label:"Key",placeholder:"e.g., outputs_public_videos",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":p.label,"onUpdate:modelValue":J=>A("label",J),label:"Label",placeholder:"e.g., Videos",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":p.path,"onUpdate:modelValue":J=>A("path",J),label:"Path",placeholder:"e.g., outputs/public/videos",prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])])])])):R("",!0),u.value.type==="project_sensitive"?(g(),x("div",J6,[y[134]||(y[134]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Temporary",-1)),y[135]||(y[135]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Scratch space and cache (gitignored by default).",-1)),c("div",Y6,[(g(),x(X,null,be(["cache","scratch"],p=>qe(c("div",{key:p},[c("div",X6,[k(Re,{id:`dir-${p}`,modelValue:u.value.directories_enabled[p],"onUpdate:modelValue":I=>u.value.directories_enabled[p]=I,label:P.value[p]?.label,description:P.value[p]?.hint,class:"flex-1"},null,8,["id","modelValue","onUpdate:modelValue","label","description"])]),u.value.directories_enabled[p]?(g(),he(W,{key:0,modelValue:u.value.directories[p],"onUpdate:modelValue":I=>u.value.directories[p]=I,placeholder:P.value[p]?.default,class:"mt-2",prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):R("",!0)]),[[gt,P.value[p]]])),64))])])):R("",!0),c("div",Q6,[y[137]||(y[137]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},".gitignore Template",-1)),y[138]||(y[138]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Customize the .gitignore template for this project type. Uses pattern-based matching to catch sensitive directories anywhere in your project tree. ",-1)),k(Zn,{modelValue:u.value.git.gitignore_content,"onUpdate:modelValue":y[39]||(y[39]=p=>u.value.git.gitignore_content=p),language:"gitignore",class:"mb-4"},null,8,["modelValue"]),k(Oe,{variant:"secondary",size:"sm",onClick:N},{default:B(()=>[...y[136]||(y[136]=[se(" Restore Default ",-1)])]),_:1})])],512),[[gt,a.value==="structure"]]),qe(c("div",null,[c("div",Z6,[y[143]||(y[143]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"}," Packages & Dependencies ",-1)),y[144]||(y[144]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Configure package management and default packages for this project. ",-1)),c("div",eD,[k(Re,{modelValue:u.value.packages.use_renv,"onUpdate:modelValue":y[40]||(y[40]=p=>u.value.packages.use_renv=p),label:"Enable renv",description:"Use renv for package version management and reproducibility"},null,8,["modelValue"]),c("div",tD,[c("div",sD,[y[140]||(y[140]=c("div",null,[c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300"},"Default Packages"),c("p",{class:"text-xs text-gray-600 dark:text-gray-400 mt-1"},"Installed (and optionally attached) when scaffold() runs.")],-1)),k(Oe,{size:"sm",variant:"secondary",onClick:M},{default:B(()=>[...y[139]||(y[139]=[se("Add Package",-1)])]),_:1})]),u.value.packages.default_packages&&u.value.packages.default_packages.length?(g(),x("div",iD,[(g(!0),x(X,null,be(u.value.packages.default_packages,(p,I)=>(g(),x("div",{key:`pkg-${I}`,class:"rounded-md border border-gray-200 p-4 dark:border-gray-700"},[c("div",nD,[c("div",rD,[p.source==="cran"||p.source==="bioconductor"?(g(),he(Wv,{key:0,modelValue:p.name,"onUpdate:modelValue":A=>p.name=A,source:p.source,label:"Package",placeholder:p.source==="cran"?"Search CRAN...":"Search Bioconductor...",onSelect:A=>p.name=A.name},null,8,["modelValue","onUpdate:modelValue","source","placeholder","onSelect"])):(g(),he(W,{key:1,modelValue:p.name,"onUpdate:modelValue":A=>p.name=A,label:"Package",placeholder:"user/repo"},null,8,["modelValue","onUpdate:modelValue"])),k(_s,{modelValue:p.source,"onUpdate:modelValue":A=>p.source=A,label:"Source"},{default:B(()=>[...y[141]||(y[141]=[c("option",{value:"cran"},"CRAN",-1),c("option",{value:"github"},"GitHub",-1),c("option",{value:"bioconductor"},"Bioconductor",-1)])]),_:1},8,["modelValue","onUpdate:modelValue"])]),c("div",oD,[k(Re,{modelValue:p.auto_attach,"onUpdate:modelValue":A=>p.auto_attach=A,label:"Auto-Attach",description:"Call library() in notebooks."},null,8,["modelValue","onUpdate:modelValue"]),k(Oe,{size:"sm",variant:"secondary",onClick:A=>U(I)},{default:B(()=>[...y[142]||(y[142]=[se("Remove",-1)])]),_:1},8,["onClick"])])])]))),128))])):(g(),x("p",lD,"No packages configured. Add packages to include tidyverse helpers or internal utilities automatically."))])])])],512),[[gt,a.value==="packages"]]),qe(c("div",null,[c("div",aD,[y[152]||(y[152]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"}," AI Assistants ",-1)),y[153]||(y[153]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Select which AI assistants you want to support. Context files will be created for each selected assistant. ",-1)),c("div",uD,[k(Re,{modelValue:u.value.ai.enabled,"onUpdate:modelValue":y[41]||(y[41]=p=>u.value.ai.enabled=p),label:"Enable AI support",description:"Create context files for AI assistants in this project"},null,8,["modelValue"]),u.value.ai.enabled?(g(),x("div",dD,[y[150]||(y[150]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Assistants to Support",-1)),y[151]||(y[151]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Select which AI assistants you'll use. Files will be created for each: ",-1)),c("div",cD,[k(Ji,{id:"ai-claude","model-value":u.value.ai.assistants.includes("claude"),"onUpdate:modelValue":y[42]||(y[42]=p=>C("claude",p)),description:"Creates CLAUDE.md context file"},{default:B(()=>[...y[145]||(y[145]=[se(" Claude Code & Claude ",-1)])]),_:1},8,["model-value"]),k(Ji,{id:"ai-copilot","model-value":u.value.ai.assistants.includes("copilot"),"onUpdate:modelValue":y[43]||(y[43]=p=>C("copilot",p)),description:"Creates .github/copilot-instructions.md"},{default:B(()=>[...y[146]||(y[146]=[se(" GitHub Copilot ",-1)])]),_:1},8,["model-value"]),k(Ji,{id:"ai-agents","model-value":u.value.ai.assistants.includes("agents"),"onUpdate:modelValue":y[44]||(y[44]=p=>C("agents",p)),description:"Creates AGENTS.md (supported by ChatGPT, Cursor, Codex, and other tools)"},{default:B(()=>[...y[147]||(y[147]=[se(" AGENTS.md ",-1)])]),_:1},8,["model-value"])]),u.value.ai.assistants.length>0?(g(),x("div",fD,[c("div",hD,[c("div",pD,[y[149]||(y[149]=c("svg",{class:"h-5 w-5 text-sky-400",viewBox:"0 0 20 20",fill:"currentColor"},[c("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z","clip-rule":"evenodd"})],-1)),c("div",mD,[y[148]||(y[148]=c("h4",{class:"text-sm font-medium text-sky-800 dark:text-sky-200"},"Files to be created:",-1)),c("div",gD,[c("ul",yD,[u.value.ai.assistants.includes("claude")?(g(),x("li",vD,"CLAUDE.md")):R("",!0),u.value.ai.assistants.includes("copilot")?(g(),x("li",bD,".github/copilot-instructions.md")):R("",!0),u.value.ai.assistants.includes("agents")?(g(),x("li",xD,"AGENTS.md")):R("",!0)])])])])])])):R("",!0)])):R("",!0)])]),u.value.ai.enabled&&u.value.ai.assistants.length>0?(g(),x("div",kD,[c("div",wD,[y[155]||(y[155]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"Primary Context File",-1)),k(_s,{modelValue:u.value.ai.canonical_file,"onUpdate:modelValue":y[45]||(y[45]=p=>u.value.ai.canonical_file=p),class:"w-auto"},{default:B(()=>[...y[154]||(y[154]=[c("option",{value:"CLAUDE.md"},"CLAUDE.md",-1),c("option",{value:"AGENTS.md"},"AGENTS.md",-1),c("option",{value:".github/copilot-instructions.md"},".github/copilot-instructions.md",-1)])]),_:1},8,["modelValue"])]),y[156]||(y[156]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Edit the default content for your primary AI context file. This will be pre-populated based on your project type. ",-1)),k(Zn,{modelValue:u.value.ai.canonical_content,"onUpdate:modelValue":y[46]||(y[46]=p=>u.value.ai.canonical_content=p),language:"markdown","min-height":"400px",class:"mb-4"},null,8,["modelValue"])])):R("",!0)],512),[[gt,a.value==="ai"]]),qe(c("div",null,[c("div",SD,[y[158]||(y[158]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"}," Git & Hooks ",-1)),y[159]||(y[159]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Configure version control and git hooks for this project. ",-1)),c("div",_D,[k(Re,{modelValue:u.value.git.initialize,"onUpdate:modelValue":y[47]||(y[47]=p=>u.value.git.initialize=p),label:"Initialize Git repository",description:"Run git init for this project"},null,8,["modelValue"]),u.value.git.initialize?(g(),x("div",CD,[c("div",null,[y[157]||(y[157]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Git Hooks",-1)),c("div",AD,[k(Re,{id:"hook-ai-sync",modelValue:u.value.git.hooks.ai_sync,"onUpdate:modelValue":y[48]||(y[48]=p=>u.value.git.hooks.ai_sync=p),label:"AI Context File Mirroring",description:"Mirror and sync AI context files (CLAUDE.md, AGENTS.md, etc.) on commit"},null,8,["modelValue"]),k(Re,{id:"hook-data-security",modelValue:u.value.git.hooks.data_security,"onUpdate:modelValue":y[49]||(y[49]=p=>u.value.git.hooks.data_security=p),label:"Data Security Scan",description:"Scan for secrets before commit"},null,8,["modelValue"]),k(Re,{id:"hook-check-sensitive-dirs",modelValue:u.value.git.hooks.check_sensitive_dirs,"onUpdate:modelValue":y[50]||(y[50]=p=>u.value.git.hooks.check_sensitive_dirs=p),label:"Check Sensitive Directories",description:"Warn about unignored sensitive directories (private, cache, scratch, etc.)"},null,8,["modelValue"])])])])):R("",!0)])])],512),[[gt,a.value==="git"]])])])]))}},MD={class:"mt-2 block text-sm font-semibold text-gray-900 dark:text-white"},DD={key:0,class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},TD={class:"mt-2 text-sm font-semibold text-gray-900 dark:text-white"},ED={key:0,class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},$D={key:1,class:"mt-6"},OD={__name:"EmptyState",props:{title:{type:String,required:!0},description:{type:String,default:null},icon:{type:String,default:null,validator:t=>["database","folder","document","users","inbox","photo"].includes(t)},action:{type:Boolean,default:!1}},emits:["click"],setup(t,{emit:e}){const s=t,i=e,n=le(()=>{const l=["relative","block","w-full","rounded-lg","border-2","border-dashed","border-gray-300","p-12","text-center","dark:border-white/15"];return s.action&&l.push("hover:border-gray-400","focus:outline-2","focus:outline-offset-2","focus:outline-sky-600","dark:hover:border-white/25","dark:focus:outline-sky-500","transition-colors"),l.join(" ")}),r=le(()=>({database:()=>Dt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Dt("path",{d:"M8 14v20c0 4.418 7.163 8 16 8 1.381 0 2.721-.087 4-.252M8 14c0 4.418 7.163 8 16 8s16-3.582 16-8M8 14c0-4.418 7.163-8 16-8s16 3.582 16 8m0 0v14m0-4c0 4.418-7.163 8-16 8S8 28.418 8 24m32 10v6m0 0v6m0-6h6m-6 0h-6"})]),folder:()=>Dt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Dt("path",{d:"M3 7v30a4 4 0 004 4h34a4 4 0 004-4V13a4 4 0 00-4-4H23.343a4 4 0 01-2.829-1.172l-2.828-2.828A4 4 0 0014.858 4H7a4 4 0 00-4 4v0zM37 17v6m0 0v6m0-6h6m-6 0h-6"})]),document:()=>Dt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Dt("path",{d:"M8 4a4 4 0 00-4 4v32a4 4 0 004 4h32a4 4 0 004-4V8a4 4 0 00-4-4H8zm24 16v6m0 0v6m0-6h6m-6 0h-6"})]),users:()=>Dt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Dt("path",{d:"M17 21a5 5 0 110-10 5 5 0 010 10zm-6.5 8a7.5 7.5 0 0115 0H10.5zM31 21a5 5 0 110-10 5 5 0 010 10zm-6.5 8a7.5 7.5 0 0115 0H24.5z"})]),inbox:()=>Dt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Dt("path",{d:"M4 8h40M4 8v28a4 4 0 004 4h32a4 4 0 004-4V8M4 8l18 14a2 2 0 002.4 0L44 8"})]),photo:()=>Dt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Dt("path",{d:"M4 8a4 4 0 014-4h32a4 4 0 014 4v32a4 4 0 01-4 4H8a4 4 0 01-4-4V8zm10 6a3 3 0 100-6 3 3 0 000 6zM4 40l12-12 8 8 8-8L44 40"})])})[s.icon]||null),o=()=>{s.action&&i("click")};return(l,a)=>t.action?(g(),x("button",{key:0,type:"button",onClick:o,class:Ve(n.value)},[kt(l.$slots,"icon",{},()=>[t.icon?(g(),he(Fs(r.value),{key:0,class:"mx-auto size-12 text-gray-400 dark:text-gray-500"})):R("",!0)]),c("span",MD,F(t.title),1),t.description?(g(),x("p",DD,F(t.description),1)):R("",!0)],2)):(g(),x("div",{key:1,class:Ve(n.value.replace("hover:border-gray-400","").replace("focus:outline-2",""))},[kt(l.$slots,"icon",{},()=>[t.icon?(g(),he(Fs(r.value),{key:0,class:"mx-auto size-12 text-gray-400 dark:text-gray-500"})):R("",!0)]),c("h3",TD,F(t.title),1),t.description?(g(),x("p",ED,F(t.description),1)):R("",!0),l.$slots.actions?(g(),x("div",$D,[kt(l.$slots,"actions")])):R("",!0)],2))}},PD=["onClick","aria-current"],jD={class:"mt-4"},RD={__name:"Tabs",props:{modelValue:{type:[String,Number],required:!0},tabs:{type:Array,required:!0,validator:t=>t.every(e=>e.id&&e.label)},variant:{type:String,default:"pills",validator:t=>["pills","underline"].includes(t)},size:{type:String,default:"md",validator:t=>["sm","md","lg"].includes(t)}},emits:["update:modelValue","change"],setup(t,{emit:e}){const s=t,i=e,n=le(()=>s.variant==="underline"?"border-b border-gray-200 dark:border-white/10":""),r=le(()=>{const a=["flex","gap-2"];return s.variant==="underline"?a.push("-mb-px"):a.push("p-1","bg-gray-100","dark:bg-white/5","rounded-lg"),a.join(" ")}),o=a=>{const d=s.modelValue===a,u=["inline-flex","items-center","gap-2","font-medium","transition-colors"],f={sm:"px-2.5 py-1.5 text-xs",md:"px-3 py-2 text-sm",lg:"px-4 py-2.5 text-base"};return u.push(f[s.size]),s.variant==="pills"?(u.push("rounded-md"),d?u.push("bg-white","text-gray-900","shadow-xs","dark:bg-white/10","dark:text-white"):u.push("text-gray-600","hover:text-gray-900","dark:text-gray-400","dark:hover:text-white")):(u.push("border-b-2","pb-3"),d?u.push("border-sky-600","text-sky-600","dark:border-sky-500","dark:text-sky-400"):u.push("border-transparent","text-gray-600","hover:border-gray-300","hover:text-gray-900","dark:text-gray-400","dark:hover:border-gray-600","dark:hover:text-white")),u.join(" ")},l=a=>{i("update:modelValue",a),i("change",a)};return(a,d)=>(g(),x("div",null,[c("div",{class:Ve(n.value)},[c("nav",{class:Ve(r.value),"aria-label":"Tabs"},[(g(!0),x(X,null,be(t.tabs,u=>(g(),x("button",{key:u.id,type:"button",onClick:f=>l(u.id),class:Ve(o(u.id)),"aria-current":t.modelValue===u.id?"page":void 0},[u.icon?(g(),he(Fs(u.icon),{key:0,class:"size-5"})):R("",!0),se(" "+F(u.label)+" ",1),u.badge?(g(),he(An,{key:1,variant:t.modelValue===u.id?"emerald":"gray",pill:""},{default:B(()=>[se(F(u.badge),1)]),_:2},1032,["variant"])):R("",!0)],10,PD))),128))],2)],2),c("div",jD,[kt(a.$slots,"default")])]))}},LD=["for"],BD={class:"mt-2"},ID=["id","value","placeholder","rows","required","disabled"],UD={key:1,class:"mt-2 text-sm text-gray-500 dark:text-gray-400"},ic={__name:"Textarea",props:{id:{type:String,default:()=>`textarea-${Math.random().toString(36).substr(2,9)}`},modelValue:{type:String,default:""},label:{type:String,default:null},placeholder:{type:String,default:""},rows:{type:Number,default:4},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},hint:{type:String,default:null},monospace:{type:Boolean,default:!1},textareaClass:{type:[String,Array,Object],default:""}},emits:["update:modelValue"],setup(t){const e=t,s=le(()=>["block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-sky-600 sm:text-sm/6 dark:bg-white/5 dark:text-white dark:outline-white/10 dark:placeholder:text-gray-500 dark:focus:outline-sky-500",e.monospace?"font-mono text-sm leading-6":"",e.textareaClass]);return(i,n)=>(g(),x("div",null,[t.label?(g(),x("label",{key:0,for:t.id,class:"block text-sm/6 font-medium text-gray-900 dark:text-white"},F(t.label),9,LD)):R("",!0),c("div",BD,[c("textarea",{id:t.id,value:t.modelValue,placeholder:t.placeholder,rows:t.rows,required:t.required,disabled:t.disabled,onInput:n[0]||(n[0]=r=>i.$emit("update:modelValue",r.target.value)),class:Ve(s.value)},null,42,ID)]),t.hint?(g(),x("p",UD,F(t.hint),1)):R("",!0)]))}},ND={class:"space-y-6"},zD={key:0},FD={class:"mt-1 font-mono text-sm text-gray-900 dark:text-gray-100 break-words"},HD={key:1},WD={class:"grid gap-4 sm:grid-cols-2"},qD=["value"],GD={class:"sm:col-span-2"},KD={key:0,class:"sm:col-span-2"},JD={class:"space-y-3"},YD={class:"flex items-center justify-between"},XD={key:0,class:"rounded-md border border-dashed border-gray-300 p-4 text-sm text-gray-500 dark:border-gray-600 dark:text-gray-400"},QD={class:"grid gap-3 sm:grid-cols-[1fr_auto] sm:items-start"},ZD={class:"mt-3"},eT={key:0,class:"mt-2 text-xs text-gray-500 dark:text-gray-400"},tT={class:"mt-2 flex justify-end"},sT={key:2,class:"text-sm text-red-600 dark:text-red-400"},iT={key:3,class:"text-sm text-red-600 dark:text-red-400"},nT={key:4,class:"text-sm text-red-600 dark:text-red-400"},rT='{"source": "data-catalog"}',oT={__name:"DataCatalogEditModal",props:{modelValue:{type:Boolean,default:!1},mode:{type:String,default:"edit",validator:t=>["edit","create"].includes(t)},entry:{type:Object,default:null},saving:{type:Boolean,default:!1},error:{type:String,default:null}},emits:["update:modelValue","save"],setup(t,{emit:e}){const s=t,i=e,n=Object.freeze([{value:"csv",label:"CSV (comma-separated)"},{value:"tsv",label:"TSV (tab-separated)"},{value:"csv_custom",label:"Delimited text (custom)"},{value:"rds",label:"RDS (R serialized)"},{value:"excel",label:"Excel (.xlsx / .xls)"},{value:"stata",label:"Stata (.dta)"},{value:"spss",label:"SPSS (.sav / .zsav)"},{value:"spss_por",label:"SPSS Portable (.por)"},{value:"sas",label:"SAS (.sas7bdat / .sas7bcat)"},{value:"sas_xpt",label:"SAS Transport (.xpt)"}]),r=["path","type","description","locked","delimiter"],o=fe(null),l=fe(!1),a=fe(!1),d=le(()=>s.mode==="create"),u=ci({path:"",fullKey:"",type:"",description:"",delimiter:"",locked:!1,additionalFields:[]}),f=le(()=>u.type==="csv_custom"),h=le(()=>{if(!s.entry&&!d.value)return null;const E=te();return E.length>0?`Duplicate metadata keys: ${E.join(", ")}`:u.additionalFields.some(y=>!y.key.trim())?"Metadata keys cannot be empty.":null}),m=le(()=>u.path.trim()?null:"File path is required"),w=le(()=>d.value?a.value?m.value:null:m.value);Je(()=>s.entry,E=>{if(!E){N();return}D(E)},{immediate:!0}),Je(()=>u.path,E=>{if(l.value)return;const y=U(E);y&&(y.type==="csv"?(u.type="csv",u.delimiter=C("csv")):y.type==="tsv"?(u.type="tsv",u.delimiter=C("tsv")):(u.type=y.type,u.delimiter=""))}),Je(()=>u.type,E=>{E&&(E==="csv"?u.delimiter=C("csv"):E==="tsv"?u.delimiter=C("tsv"):E!=="csv_custom"&&(u.delimiter=""))});function _(){return`field-${Math.random().toString(36).slice(2,9)}`}function C(E){return E==="csv"?"comma":E==="tsv"?"tab":""}function M(E,y){if(!E)return!1;const p=E.toLowerCase();return y==="csv"?p==="comma"||E===",":y==="tsv"?p==="tab"||E==="	":!1}function U(E){if(!E)return null;const y=E.toLowerCase();return y.endsWith(".csv")?{type:"csv",delimiter:"comma"}:y.endsWith(".tsv")||y.endsWith(".txt")||y.endsWith(".dat")?{type:"tsv",delimiter:"tab"}:y.endsWith(".rds")?{type:"rds",delimiter:""}:y.endsWith(".xlsx")||y.endsWith(".xls")?{type:"excel",delimiter:""}:y.endsWith(".dta")?{type:"stata",delimiter:""}:y.endsWith(".sav")||y.endsWith(".zsav")?{type:"spss",delimiter:""}:y.endsWith(".por")?{type:"spss_por",delimiter:""}:y.endsWith(".sas7bdat")||y.endsWith(".sas7bcat")?{type:"sas",delimiter:""}:y.endsWith(".xpt")?{type:"sas_xpt",delimiter:""}:null}function $(E){if(!E){u.type="",u.delimiter="",l.value=!1;return}u.type=E,l.value=!0,E==="csv"?u.delimiter=C("csv"):E==="tsv"?u.delimiter=C("tsv"):u.delimiter=""}function D(E){if(N(),a.value=!1,d.value){const J=E?.data||{};u.fullKey=E?.fullKey||"",u.path=J.path||"",u.type=J.type||"",u.description=J.description||"",u.locked=!!J.locked,u.delimiter=J.delimiter||"",l.value=!1;return}const y=E.data||{};u.fullKey=E.fullKey||"",u.path=y.path||"";const p=U(u.path),I=y.type||p?.type||"";if(u.description=y.description||"",u.locked=!!y.locked,I==="csv"){const J=y.delimiter||p?.delimiter||C("csv");M(J,"csv")?(u.type="csv",u.delimiter=C("csv")):J?(u.type="csv_custom",u.delimiter=J):(u.type="csv",u.delimiter=C("csv"))}else I==="tsv"?(u.type="tsv",u.delimiter=C("tsv")):(u.type=I,u.delimiter=f.value&&y.delimiter||"");!u.type&&p?.type&&(u.type=p.type,u.delimiter=p.delimiter||C(p.type)),l.value=!!y.type||u.type==="csv_custom";const A=Object.entries(y).filter(([J])=>!r.includes(J)).map(([J,ge])=>({id:_(),key:J,valueInput:q(ge),valueType:P(ge),isMultiline:typeof ge=="object"&&ge!==null}));u.additionalFields=A,o.value=null}function N(){u.path="",u.fullKey="",u.type="",u.description="",u.delimiter="",u.locked=!1,u.additionalFields=[],o.value=null,l.value=!1}function q(E){if(typeof E=="object"&&E!==null)try{return JSON.stringify(E,null,2)}catch{return""}return E==null?"":String(E)}function P(E){return Array.isArray(E)||typeof E=="object"&&E!==null?"object":typeof E=="boolean"?"boolean":typeof E=="number"?"number":"string"}function ne(E){if(E.valueType==="object"){if(!E.valueInput.trim())return null;try{return JSON.parse(E.valueInput)}catch{throw new Error(`Invalid JSON for field "${E.key}"`)}}if(E.valueType==="number"){const y=Number(E.valueInput);if(Number.isNaN(y))throw new Error(`Value for "${E.key}" must be a number`);return y}if(E.valueType==="boolean"){const y=E.valueInput.trim().toLowerCase();if(["true","false"].includes(y))return y==="true";throw new Error(`Value for "${E.key}" must be "true" or "false"`)}return E.valueInput}function te(){const E=new Set,y=[];return u.additionalFields.forEach(p=>{const I=p.key.trim();I&&(E.has(I)||r.includes(I)?y.push(I):E.add(I))}),y}function pe(E){return E.key.trim()?r.includes(E.key.trim())?"Reserved key name":u.additionalFields.some(y=>y!==E&&y.key.trim()===E.key.trim())?"Duplicate key":null:"Key is required"}function Q(){u.additionalFields.push({id:_(),key:"",valueInput:"",valueType:"string",isMultiline:!1}),o.value=null}function z(E){u.additionalFields=u.additionalFields.filter(y=>y.id!==E)}function ae(E){E.isMultiline=!E.isMultiline,E.isMultiline?(E.valueType="object",E.valueInput&&!E.valueInput.trim().startsWith("{")&&(E.valueInput="")):(E.valueType="string",E.valueInput=E.valueInput!=null?String(E.valueInput):"")}const re=()=>{if(o.value=null,a.value=!0,!(m.value||h.value)&&!(!d.value&&!s.entry))try{const E=ye();i("save",E)}catch(E){o.value=E.message}},ye=()=>{if(!u.path.trim())throw new Error("File path is required");const E={};E.path=u.path.trim();const y=u.type==="csv_custom"?"csv":u.type.trim();if(y&&(E.type=y),u.description.trim()&&(E.description=u.description.trim()),u.type==="csv_custom"){if(!u.delimiter.trim())throw new Error("Delimiter is required for custom delimited text sources");E.delimiter=u.delimiter.trim()}else u.delimiter.trim()&&!M(u.delimiter.trim(),u.type)&&(E.delimiter=u.delimiter.trim());u.locked&&(E.locked=!0);for(const I of u.additionalFields){const A=I.key.trim();if(!A||r.includes(A))continue;const J=ne({...I,valueType:I.valueType??"string"});J===null||J===""||(E[A]=J)}const p=(d.value?u.fullKey:s.entry.fullKey||"").trim();if(!p)throw new Error("Dot notation key is required");return{fullKey:p,data:E,isNew:d.value}};return(E,y)=>(g(),he(yo,{"model-value":t.modelValue,variant:"left",size:"lg",title:"Edit Data Entry","onUpdate:modelValue":y[6]||(y[6]=p=>i("update:modelValue",p))},ob({_:2},[t.entry||d.value?{name:"default",fn:B(()=>[c("div",ND,[d.value?(g(),x("div",HD,[k(W,{modelValue:u.fullKey,"onUpdate:modelValue":y[0]||(y[0]=p=>u.fullKey=p),label:"Dot Notation Key",placeholder:"e.g., inputs.raw.custom_dataset",hint:"Use dot notation to place this entry within the catalog hierarchy."},null,8,["modelValue"])])):(g(),x("div",zD,[y[7]||(y[7]=c("p",{class:"text-xs font-medium uppercase tracking-wide text-gray-500 dark:text-gray-400"}," Data Key ",-1)),c("p",FD,F(t.entry.fullKey),1)])),k(W,{modelValue:u.path,"onUpdate:modelValue":y[1]||(y[1]=p=>u.path=p),label:"File Path",placeholder:"inputs/raw/example.csv",required:"",error:w.value,monospace:"",hint:"Provide a path relative to the project root (e.g., inputs/raw/data.csv) or an absolute path."},null,8,["modelValue","error"]),c("div",WD,[k(_s,{"model-value":u.type,label:"Type","onUpdate:modelValue":$},{default:B(()=>[y[8]||(y[8]=c("option",{disabled:"",value:""},"Select file type",-1)),(g(!0),x(X,null,be(ot(n),p=>(g(),x("option",{key:p.value,value:p.value},F(p.label),9,qD))),128))]),_:1},8,["model-value"]),c("div",GD,[k(Re,{modelValue:u.locked,"onUpdate:modelValue":y[2]||(y[2]=p=>u.locked=p),label:"Locked",description:"Treat this data source as read-only."},null,8,["modelValue"])]),f.value?(g(),x("div",KD,[k(W,{modelValue:u.delimiter,"onUpdate:modelValue":y[3]||(y[3]=p=>u.delimiter=p),label:"Delimiter",placeholder:"e.g., tab or |",hint:"Use keywords 'tab', 'comma', 'semicolon', 'space' or supply a single character (e.g., |). Keywords map to their respective delimiters."},null,8,["modelValue"])])):R("",!0)]),k(ic,{modelValue:u.description,"onUpdate:modelValue":y[4]||(y[4]=p=>u.description=p),label:"Description",placeholder:"Explain what this source contains or how it was produced.",rows:4},null,8,["modelValue"]),c("div",JD,[c("div",YD,[y[10]||(y[10]=c("h4",{class:"text-sm font-semibold text-gray-900 dark:text-gray-100"}," Additional Metadata ",-1)),k(Oe,{size:"sm",variant:"secondary",class:"shadow-none",onClick:Q},{default:B(()=>[...y[9]||(y[9]=[se(" Add Field ",-1)])]),_:1})]),y[12]||(y[12]=c("p",{class:"text-xs text-gray-500 dark:text-gray-400"}," Store any extra properties (e.g., source, codebook details). Complex values can be provided as JSON. ",-1)),u.additionalFields.length===0?(g(),x("div",XD," No additional metadata fields. ")):R("",!0),(g(!0),x(X,null,be(u.additionalFields,p=>(g(),x("div",{key:p.id,class:"rounded-md border border-gray-200 bg-white/80 p-4 dark:border-gray-700 dark:bg-gray-900/40"},[c("div",QD,[k(W,{modelValue:p.key,"onUpdate:modelValue":I=>p.key=I,label:"Key",placeholder:"e.g., source",error:pe(p)},null,8,["modelValue","onUpdate:modelValue","error"]),k(Oe,{size:"sm",variant:"secondary",class:"shadow-none",onClick:I=>z(p.id)},{default:B(()=>[...y[11]||(y[11]=[se(" Remove ",-1)])]),_:1},8,["onClick"])]),c("div",ZD,[(g(),he(Fs(p.isMultiline?ic:W),{modelValue:p.valueInput,"onUpdate:modelValue":I=>p.valueInput=I,label:p.isMultiline?"Value (JSON)":"Value",rows:p.isMultiline?4:void 0,placeholder:p.isMultiline?rT:"comma",monospace:p.isMultiline?void 0:!1},null,8,["modelValue","onUpdate:modelValue","label","rows","placeholder","monospace"])),p.isMultiline?(g(),x("p",eT," Provide valid JSON to store complex data structures. ")):R("",!0),c("div",tT,[k(Oe,{size:"xs",variant:"soft",onClick:I=>ae(p)},{default:B(()=>[se(F(p.isMultiline?"Use single-line value":"Use JSON value"),1)]),_:2},1032,["onClick"])])])]))),128))]),h.value?(g(),x("p",sT,F(h.value),1)):R("",!0),o.value?(g(),x("p",iT,F(o.value),1)):R("",!0),t.error?(g(),x("p",nT,F(t.error),1)):R("",!0)])]),key:"0"}:void 0,t.entry?{name:"actions",fn:B(()=>[k(Oe,{size:"sm",variant:"secondary",class:"shadow-none",onClick:y[5]||(y[5]=p=>i("update:modelValue",!1))},{default:B(()=>[...y[13]||(y[13]=[se(" Cancel ",-1)])]),_:1}),k(Oe,{size:"sm",disabled:t.saving,onClick:re},{default:B(()=>[se(F(t.saving?"Saving":"Save Entry"),1)]),_:1},8,["disabled"])]),key:"1"}:void 0]),1032,["model-value"]))}},qv=(t="")=>{const s=String(t??"").trim().replace(/[^a-zA-Z0-9]+/g,"-").replace(/^-+|-+$/g,"").toLowerCase();return s?`data-node-${s}`:"data-node-root"},lT=["id"],aT=["aria-expanded"],uT={class:"flex-1"},dT={key:0,class:"rounded bg-amber-200/70 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},cT={key:1},fT={class:"mt-1 text-xs text-zinc-500 dark:text-zinc-400"},hT={class:"text-xs font-medium uppercase tracking-wide text-zinc-500 dark:text-zinc-400"},pT={class:"flex items-start gap-3"},mT={class:"flex-1"},gT={key:0,class:"rounded bg-amber-200/70 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},yT={key:1},vT={class:"mt-1 text-xs text-zinc-500 dark:text-zinc-400"},bT=["id"],xT={class:"flex items-start justify-between gap-4"},kT={class:"min-w-0 flex items-center gap-2"},wT={class:"text-sm font-semibold text-gray-900 dark:text-white"},ST={key:0,class:"rounded bg-amber-200/70 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},_T={key:1},CT={key:0,class:"inline-flex items-center rounded-full border border-gray-200 bg-white px-2.5 py-1 text-xs font-medium text-gray-700 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-100"},AT={class:"flex items-center gap-2 shrink-0"},VT={class:"mt-5 space-y-4"},MT={key:0,class:"space-y-2"},DT={class:"text-sm leading-relaxed text-gray-600 dark:text-zinc-300"},TT={key:1,class:"flex items-start gap-3"},ET={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},$T={key:1,class:"h-4 w-4 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},OT={class:"min-w-0 flex-1"},PT={class:"mt-1 font-mono text-sm leading-relaxed text-gray-900 dark:text-zinc-100"},jT={key:0,class:"rounded bg-amber-200/60 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},RT={key:1},LT={key:1,class:"text-zinc-500"},BT={class:"flex items-start gap-3 pt-4 border-t border-gray-200 dark:border-zinc-700"},IT={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},UT={key:1,class:"h-4 w-4 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},NT={class:"min-w-0 flex-1"},zT={class:"mt-1 font-mono text-sm leading-relaxed text-gray-900 dark:text-zinc-100"},FT={key:0,class:"rounded bg-amber-200/60 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},HT={key:1},WT={key:1,class:"text-zinc-500"},qT={class:"min-w-0"},GT={class:"text-xs font-medium uppercase tracking-wide text-gray-600 dark:text-zinc-200"},KT={class:"mt-1 whitespace-pre-wrap break-words font-mono text-[13px] text-gray-800 dark:text-zinc-200"},JT={class:"flex items-start gap-3 pt-4 border-t border-gray-200 dark:border-zinc-700"},YT={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},XT={key:1,class:"h-4 w-4 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},QT={class:"min-w-0 flex-1"},ZT=["title"],zu="mt-1.5 inline-flex h-10 w-10 items-center justify-center rounded-md border border-gray-200 bg-white text-gray-500 transition hover:border-gray-300 hover:text-gray-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-500 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-300 dark:hover:border-gray-500 dark:hover:text-gray-100",eE=Object.assign({name:"DataCatalogTree"},{__name:"DataCatalogTree",props:{node:{type:Object,required:!0},depth:{type:Number,default:0},expandedKeys:{type:Object,required:!0},autoExpandedKeys:{type:Object,required:!0},toggleGroup:{type:Function,required:!0},searchTerm:{type:String,default:""},hierarchical:{type:Boolean,default:!0},pendingDeletes:{type:Object,default:null}},emits:["edit","delete"],setup(t,{emit:e}){const s=e,i=t,n=le(()=>i.node?.type==="group"),r=le(()=>i.depth===0),o=le(()=>{if(!n.value)return!1;if(!i.hierarchical)return!0;const Q=i.node?.fullKey;if(!Q)return!1;const z=i.expandedKeys,ae=i.autoExpandedKeys,re=typeof z?.has=="function"?z.has(Q):!!z?.[Q],ye=typeof ae?.has=="function"?ae.has(Q):!!ae?.[Q];return re||ye}),l=le(()=>{const Q=i.node?.leafCount||0;return`${Q} ${Q===1?"entry":"entries"}`}),a=le(()=>r.value?"mb-4 rounded-xl border border-gray-200 bg-white p-6 transition hover:border-gray-300 scroll-mt-16 dark:border-gray-700/70 dark:bg-gray-900 dark:hover:border-gray-600":"mb-3 rounded-lg border border-gray-200 bg-white p-4 transition hover:border-gray-300 dark:border-gray-700/60 dark:bg-gray-900/60 dark:hover:border-gray-600"),d=le(()=>r.value?"text-lg font-semibold text-zinc-900 dark:text-white":"text-sm font-semibold text-zinc-900 dark:text-white"),u=le(()=>r.value?"mt-4 space-y-3":"mt-3 space-y-3"),f=le(()=>i.pendingDeletes instanceof Set?i.pendingDeletes:i.pendingDeletes&&typeof i.pendingDeletes=="object"&&i.pendingDeletes.value instanceof Set?i.pendingDeletes.value:new Set),h=le(()=>f.value.has(i.node?.fullKey)),m=le(()=>{const Q=i.node?.data||{},z=new Set(["path","type","description","locked","delimiter"]);return Object.keys(Q).filter(ae=>!z.has(ae)).reduce((ae,re)=>(ae[re]=Q[re],ae),{})}),w=le(()=>{const Q="relative rounded-lg p-6 transition focus-within:ring-2",z=r.value?"scroll-mt-16":"";return h.value?`${Q} border border-red-200 bg-red-50 hover:bg-red-100 focus-within:ring-red-300 ${z} dark:border-red-500/40 dark:bg-red-900/30 dark:hover:bg-red-900/40 dark:focus-within:ring-red-500/40`:`${Q} border border-gray-200 bg-gray-50 hover:bg-gray-100 focus-within:ring-sky-200 ${z} dark:border-gray-700/50 dark:bg-gray-800/50 dark:hover:bg-gray-800/60 dark:focus-within:ring-sky-500/40`}),_=le(()=>h.value?"shadow-none border border-red-200 text-red-700 hover:bg-red-50 dark:border-red-500/40 dark:text-red-200 dark:hover:bg-red-900/30":"shadow-none"),C=le(()=>i.searchTerm.trim().toLowerCase()),M=(Q="")=>{const z=Q??"",ae=C.value;if(!ae)return[{text:z,highlight:!1}];const re=z.toLowerCase(),ye=[];let E=0,y=re.indexOf(ae);for(;y!==-1;)y>E&&ye.push({text:z.slice(E,y),highlight:!1}),ye.push({text:z.slice(y,y+ae.length),highlight:!0}),E=y+ae.length,y=re.indexOf(ae,E);return E<z.length&&ye.push({text:z.slice(E),highlight:!1}),ye.length>0?ye:[{text:z,highlight:!1}]},U=le(()=>i.node?.displayName||i.node?.name||""),$=le(()=>M(U.value)),D=le(()=>M(i.node?.data?.path||"")),N=le(()=>M(i.node?.fullKey||"")),q=le(()=>{const Q=i.node?.fullKey||"";return Q?`data_read('${Q}')`:"data_read()"}),P=(Q="")=>Q.replace(/_/g," "),ne=Q=>Q==null?"":typeof Q=="object"?JSON.stringify(Q,null,2):String(Q),te=le(()=>{if(!r.value)return null;const Q=i.node?.fullKey||i.node?.name;return Q?qv(Q):null}),pe=()=>{!n.value||!i.hierarchical||i.toggleGroup(i.node.fullKey)};return(Q,z)=>{const ae=ql("DataCatalogTree",!0);return g(),x("div",null,[n.value?(g(),x("div",{key:0,id:te.value||void 0,class:Ve(a.value)},[t.hierarchical?(g(),x(X,{key:0},[c("button",{type:"button",class:"flex w-full items-start gap-3 text-left transition hover:text-zinc-900 focus:outline-none",onClick:pe,"aria-expanded":o.value},[k(ot(Uk),{class:Ve(["mt-1.5 h-4 w-4 shrink-0 text-zinc-400 transition-transform",{"rotate-90 text-sky-500":o.value}])},null,8,["class"]),c("div",uT,[c("p",{class:Ve(d.value)},[(g(!0),x(X,null,be($.value,(re,ye)=>(g(),x(X,{key:ye},[re.highlight?(g(),x("mark",dT,F(re.text),1)):(g(),x("span",cT,F(re.text),1))],64))),128))],2),c("p",fT,F(l.value),1)]),c("span",hT,F(o.value?"Hide":"Show"),1)],8,aT),k(wc,{name:"catalog-collapse"},{default:B(()=>[qe(c("div",{class:Ve(u.value)},[(g(!0),x(X,null,be(t.node.children,re=>(g(),he(ae,{key:re.fullKey,node:re,depth:t.depth+1,"expanded-keys":t.expandedKeys,"auto-expanded-keys":t.autoExpandedKeys,"toggle-group":t.toggleGroup,"search-term":t.searchTerm,hierarchical:t.hierarchical,"pending-deletes":t.pendingDeletes,onEdit:z[0]||(z[0]=ye=>s("edit",ye)),onDelete:z[1]||(z[1]=ye=>s("delete",ye))},null,8,["node","depth","expanded-keys","auto-expanded-keys","toggle-group","search-term","hierarchical","pending-deletes"]))),128))],2),[[gt,o.value]])]),_:1})],64)):(g(),x(X,{key:1},[c("div",pT,[c("div",mT,[c("p",{class:Ve(d.value)},[(g(!0),x(X,null,be($.value,(re,ye)=>(g(),x(X,{key:ye},[re.highlight?(g(),x("mark",gT,F(re.text),1)):(g(),x("span",yT,F(re.text),1))],64))),128))],2),c("p",vT,F(l.value),1)])]),c("div",{class:Ve(u.value)},[(g(!0),x(X,null,be(t.node.children,re=>(g(),he(ae,{key:re.fullKey,node:re,depth:t.depth+1,"expanded-keys":t.expandedKeys,"auto-expanded-keys":t.autoExpandedKeys,"toggle-group":t.toggleGroup,"search-term":t.searchTerm,hierarchical:t.hierarchical,"pending-deletes":t.pendingDeletes,onEdit:z[2]||(z[2]=ye=>s("edit",ye)),onDelete:z[3]||(z[3]=ye=>s("delete",ye))},null,8,["node","depth","expanded-keys","auto-expanded-keys","toggle-group","search-term","hierarchical","pending-deletes"]))),128))],2)],64))],10,lT)):(g(),x("div",{key:1,id:te.value||void 0,class:Ve(w.value)},[c("div",xT,[c("div",kT,[c("h3",wT,[(g(!0),x(X,null,be($.value,(re,ye)=>(g(),x(X,{key:`leaf-${ye}`},[re.highlight?(g(),x("mark",ST,F(re.text),1)):(g(),x("span",_T,F(re.text),1))],64))),128))]),t.node.data?.type?(g(),x("span",CT,F(t.node.data.type),1)):R("",!0)]),c("div",AT,[k(Oe,{size:"sm",variant:"secondary",class:Ve(_.value),onClick:z[4]||(z[4]=ft(re=>s("delete",t.node),["stop"]))},{default:B(()=>[se(F(h.value?"Undo":"Delete"),1)]),_:1},8,["class"]),k(Oe,{size:"sm",variant:"secondary",class:"shadow-none",onClick:z[5]||(z[5]=re=>s("edit",t.node))},{default:B(()=>[...z[6]||(z[6]=[se(" Edit ",-1)])]),_:1})])]),c("div",VT,[t.node.data?.description?(g(),x("div",MT,[z[7]||(z[7]=c("p",{class:"text-xs font-medium text-gray-600 dark:text-zinc-200"}," Description ",-1)),c("p",DT,F(t.node.data.description),1)])):R("",!0),t.node.fullKey?(g(),x("div",TT,[k(Qr,{value:t.node.fullKey||"",successMessage:"Dot notation copied",variant:"bare",class:Ve(zu),title:"Copy dot notation"},{default:B(({copied:re})=>[re?(g(),x("svg",$T,[...z[9]||(z[9]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(g(),x("svg",ET,[...z[8]||(z[8]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"},null,-1)])]))]),_:1},8,["value"]),c("div",OT,[z[10]||(z[10]=c("p",{class:"text-xs font-medium text-gray-700 dark:text-zinc-100"}," Location (in Dot Notation) ",-1)),c("p",PT,[N.value.length>0?(g(!0),x(X,{key:0},be(N.value,(re,ye)=>(g(),x(X,{key:`key-${ye}`},[re.highlight?(g(),x("mark",jT,F(re.text),1)):(g(),x("span",RT,F(re.text),1))],64))),128)):(g(),x("span",LT,""))])])])):R("",!0),c("div",BT,[k(Qr,{value:t.node.data?.path||"",successMessage:"Path copied",variant:"bare",class:Ve(zu),title:"Copy path"},{default:B(({copied:re})=>[re?(g(),x("svg",UT,[...z[12]||(z[12]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(g(),x("svg",IT,[...z[11]||(z[11]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"},null,-1)])]))]),_:1},8,["value"]),c("div",NT,[z[13]||(z[13]=c("p",{class:"text-xs font-medium text-gray-700 dark:text-zinc-100"}," File Path ",-1)),c("p",zT,[D.value.length>0?(g(!0),x(X,{key:0},be(D.value,(re,ye)=>(g(),x(X,{key:`path-${ye}`},[re.highlight?(g(),x("mark",FT,F(re.text),1)):(g(),x("span",HT,F(re.text),1))],64))),128)):(g(),x("span",WT,""))])])]),(g(!0),x(X,null,be(m.value,(re,ye)=>(g(),x("div",{key:`meta-${ye}`,class:"flex items-start justify-between gap-3 border-t border-gray-200 pt-4 text-sm dark:border-zinc-700"},[c("div",qT,[c("p",GT,F(P(ye)),1),c("pre",KT,F(ne(re)),1)])]))),128)),c("div",JT,[k(Qr,{value:q.value,successMessage:"data_read() command copied",variant:"bare",class:Ve([zu,"w-10"]),title:"Copy data_read() helper","aria-label":`Copy ${q.value}`},{default:B(({copied:re})=>[re?(g(),x("svg",XT,[...z[15]||(z[15]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(g(),x("svg",YT,[...z[14]||(z[14]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8z"},null,-1)])]))]),_:1},8,["value","class","aria-label"]),c("div",QT,[z[16]||(z[16]=c("p",{class:"text-xs font-medium text-gray-700 dark:text-zinc-100"}," Usage ",-1)),c("p",{class:"mt-1 font-mono text-sm leading-relaxed text-gray-900 dark:text-zinc-100 truncate",title:q.value},F(q.value),9,ZT)])])])],10,bT))])}}}),tE=Fg(eE,[["__scopeId","data-v-20f9f092"]]),sE={key:0,class:"flex items-center justify-center h-96"},iE={key:1,class:"flex-1 p-10"},nE={key:2,class:"flex min-h-screen"},rE={class:"w-64 shrink-0 border-r border-gray-200 p-6 dark:border-gray-800"},oE={class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},lE={class:"flex items-center gap-2 mb-4"},aE={class:"text-xs text-gray-500 dark:text-gray-400 font-mono truncate"},uE={class:"space-y-1"},dE={key:0,class:"ml-6 space-y-0.5 mt-1"},cE={key:1,class:"ml-6 space-y-0.5 mt-1"},fE=["href","onClick"],hE={key:2,class:"ml-6 space-y-0.5 mt-1"},pE={key:3,class:"ml-6 mt-1 space-y-0.5"},mE=["href","onClick"],gE={class:"truncate"},yE={key:0,class:"shrink-0 rounded-full bg-gray-100 px-2 py-0.5 text-[10px] font-medium text-gray-500 dark:bg-gray-800 dark:text-gray-300"},vE={class:"flex-1 p-10"},bE={id:"overview"},xE={class:"flex items-start justify-between mb-6"},kE={class:"text-2xl font-semibold text-gray-900 dark:text-white"},wE={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},SE={class:"grid grid-cols-2 gap-6"},_E={class:"text-sm text-gray-600 dark:text-gray-400"},CE={class:"text-sm text-gray-600 dark:text-gray-400"},AE={key:0},VE={class:"text-sm text-gray-600 dark:text-gray-400"},ME={key:1},DE={class:"text-sm text-gray-600 dark:text-gray-400"},TE={id:"settings"},EE={key:0},$E={key:1},OE={key:2},PE={class:"space-y-6"},jE={id:"settings-project",class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 scroll-mt-6"},RE={class:"space-y-4"},LE={class:"flex gap-4"},BE={class:"flex items-center gap-2 cursor-pointer"},IE={class:"flex items-center gap-2 cursor-pointer"},UE={class:"flex items-center gap-2 cursor-pointer"},NE={class:"flex items-center gap-2 cursor-pointer"},zE={key:0,id:"settings-author",class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 scroll-mt-6"},FE={class:"grid grid-cols-2 gap-4"},HE={key:1,id:"settings-options",class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 scroll-mt-6"},WE={class:"space-y-4"},qE={class:"grid grid-cols-2 gap-4"},GE={class:"flex gap-4"},KE={class:"flex items-center gap-2 cursor-pointer"},JE={class:"flex items-center gap-2 cursor-pointer"},YE={key:2,id:"settings-git",class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 scroll-mt-6"},XE={class:"space-y-4"},QE={class:"grid grid-cols-2 gap-4"},ZE={key:3,id:"settings-ai",class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 scroll-mt-6"},e$={class:"flex justify-end gap-3 pt-4 border-t border-zinc-200 dark:border-zinc-700"},t$={id:"notebooks"},s$={class:"rounded-lg bg-gray-50 p-12 dark:bg-gray-800/50 text-center"},i$={id:"data"},n$={class:"mb-6 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},r$={class:"mb-6"},o$={key:0,class:"space-y-4"},l$={key:1,class:"mt-4 rounded-lg border border-red-200 bg-red-50 p-4 dark:border-red-500/40 dark:bg-red-900/20"},a$={class:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"},u$={class:"text-sm font-medium text-red-700 dark:text-red-200"},d$={class:"flex gap-2"},c$={class:"mt-3 list-disc space-y-1 pl-5 text-xs font-mono text-red-700 dark:text-red-200/90"},f$={key:2,class:"rounded-xl border border-dashed border-zinc-300 bg-white/70 p-10 text-center dark:border-zinc-700 dark:bg-zinc-900/40"},h$={class:"text-sm font-medium text-zinc-700 dark:text-zinc-200"},p$={id:"connections"},m$={key:0},g$={key:1},y$={key:2},v$={class:"space-y-6"},b$={key:0,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},x$={key:1},k$={key:0,class:"rounded-lg bg-gray-50 p-12 dark:bg-gray-800/50 text-center"},w$={key:1,class:"space-y-4"},S$=["id"],_$=["onClick","title"],C$={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},A$={key:1,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},V$={class:"text-sm font-semibold text-gray-900 dark:text-white mb-4 font-mono pr-8"},M$={class:"space-y-4"},D$={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},T$=["onUpdate:modelValue","disabled"],E$={class:"flex justify-end gap-3 pt-4 border-t border-zinc-200 dark:border-zinc-700"},$$={id:"packages"},O$={key:0},P$={key:1},j$={key:2},R$={key:0,class:"rounded-lg bg-gray-50 p-12 dark:bg-gray-800/50 text-center mb-6"},L$={key:1,class:"space-y-6"},B$={class:"flex items-center justify-between"},I$={class:"flex gap-3"},U$={class:"rounded-lg bg-gray-50 dark:bg-gray-800/50 overflow-hidden"},N$={class:"w-full"},z$={class:"bg-white dark:bg-gray-900"},F$={class:"px-4 py-3"},H$=["onUpdate:modelValue"],W$={class:"px-4 py-3"},q$={class:"relative"},G$=["onUpdate:modelValue"],K$={class:"px-4 py-3 text-center"},J$=["onUpdate:modelValue"],Y$={class:"px-4 py-3 text-center"},X$=["onClick"],Q$={class:"flex items-center justify-between pt-4 border-t border-gray-200 dark:border-gray-700"},Z$={class:"flex gap-3"},e7={id:"directories"},t7={key:0},s7={key:1},i7={key:2},n7={class:"space-y-6"},r7={id:"directory-work",class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 scroll-mt-6"},o7={class:"space-y-4"},l7={id:"directory-inputs",class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 scroll-mt-6"},a7={class:"space-y-4"},u7={id:"directory-private-outputs",class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 scroll-mt-6"},d7={class:"space-y-4"},c7={id:"directory-public-outputs",class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 scroll-mt-6"},f7={class:"space-y-4"},h7={id:"directory-other",class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 scroll-mt-6"},p7={class:"space-y-4"},m7={class:"flex justify-end gap-3 pt-4 border-t border-zinc-200 dark:border-zinc-700"},g7={id:"env"},y7={key:0},v7={key:1},b7={key:2},x7={key:0,class:"space-y-6"},k7={key:0,class:"rounded-lg bg-gray-50 p-12 dark:bg-gray-800/50 text-center"},w7={key:1,class:"space-y-6"},S7={class:"flex items-center justify-between mb-4"},_7={class:"text-sm font-semibold text-gray-900 dark:text-white"},C7={class:"space-y-4"},A7={class:"flex items-start gap-3"},V7={class:"mt-2"},M7={class:"flex-1 grid grid-cols-2 gap-3"},D7=["value","onInput"],T7={class:"relative"},E7=["onUpdate:modelValue","onInput","type","placeholder"],$7=["onClick"],O7={key:0,class:"ml-10 text-xs text-zinc-500 dark:text-zinc-400"},P7={key:1,class:"ml-10 text-xs text-zinc-400 dark:text-zinc-500"},j7={class:"rounded-lg bg-gray-50 p-4 dark:bg-gray-800/50 border border-zinc-200 dark:border-zinc-700"},R7={class:"flex justify-end gap-3 pt-4 border-t border-zinc-200 dark:border-zinc-700"},L7={key:1,class:"space-y-6"},B7={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},I7={class:"flex justify-end gap-3 pt-4 border-t border-zinc-200 dark:border-zinc-700"},U7={class:"space-y-6"},N7={key:0,class:"max-h-64 overflow-y-auto border border-gray-200 dark:border-gray-700 rounded-md"},z7=["onClick","onMouseenter"],F7={class:"flex items-start justify-between gap-2"},H7={class:"flex-1 min-w-0"},W7={class:"text-sm font-mono font-medium text-gray-900 dark:text-gray-100"},q7={key:0,class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5 line-clamp-1"},G7={key:1,class:"text-xs text-gray-500 dark:text-gray-500 mt-0.5"},K7={class:"text-xs text-gray-500 dark:text-gray-500 font-mono shrink-0"},J7={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},Y7={key:1,class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},X7={class:"relative"},Q7={class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},Z7={__name:"ProjectDetailView",setup(t){const e=_r(),s=Ea(),i=$a(),n=fe(null),r=fe(!0),o=fe(null),l=fe("overview"),a=fe(null),d=fe(""),u=fe(new Set),f=fe(!1),h=fe(null),m=fe(!1),w=fe(null),_=fe(!1),C=fe(new Set),M=fe(!1),U=fe(null),$=fe({}),D=fe(!1),N=fe(null),q=fe(!1),P=fe(null),ne=fe(!1),te=fe(null),pe=fe(!1),Q=fe(new Set),z=fe([]),ae=fe(!1),re=fe(null),ye=fe(!1),E=fe(!1),y=fe(""),p=fe([]),I=fe(!1),A=fe(-1),J=fe({name:"",source:"cran",auto_attach:!0}),ge=fe({}),Ge=fe(!1),Ue=fe(null),Ct=fe(!1),et=fe({}),V=fe({}),Se=fe(""),ke=fe(!1),$e=fe(null),Fe=fe(!1),T=fe(!1),O=fe({}),H=fe("grouped"),ee=fe(!1),Z=L=>["flex items-center gap-2 px-3 py-2 rounded-md text-sm transition",l.value===L?"bg-sky-50 text-sky-700 font-medium dark:bg-sky-900/20 dark:text-sky-400":"text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-800"],Y=()=>{const L=e.query.section;L&&["overview","settings","notebooks","data","connections","packages","directories","env"].includes(L)?l.value=L:l.value="overview"};Je(l,L=>{s.replace({query:{...e.query,section:L}}),L==="settings"&&!U.value&&qa(),L==="connections"&&!P.value&&Ga(),L==="packages"&&z.value.length===0&&Ko(),L==="directories"&&Object.keys(ge.value).length===0&&Ya(),L==="env"&&Object.keys(et.value).length===0&&Jo()}),Je(()=>e.query.section,L=>{const v=["overview","settings","notebooks","data","connections","packages","directories","env"];L&&L!==l.value&&v.includes(L)&&(l.value=L)});let me=null;Je(y,()=>{me&&clearTimeout(me),me=setTimeout(()=>{Xv()},300)});const ve=(L="")=>L.split(/[._-]/).filter(Boolean).map(v=>v.charAt(0).toUpperCase()+v.slice(1)).join(" "),ce=L=>JSON.parse(JSON.stringify(L)),ue=L=>Array.isArray(L)?L.map((v,j)=>[String(j),v]):Object.entries(L),Pe=(L,v="",j=0)=>!L||typeof L!="object"?[]:ue(L).reduce((Ae,[Ee,je])=>{if(je==null)return Ae;const At=v?`${v}.${Ee}`:Ee;if(typeof je=="object"&&!Array.isArray(je)&&je.path)return Ae.push({type:"leaf",name:Ee,displayName:ve(Ee),fullKey:At,data:je,leafCount:1,depth:j}),Ae;if(typeof je=="object"){const vt=Pe(je,At,j+1);if(vt.length>0){const ws=vt.reduce((Us,Za)=>Us+(Za.leafCount||0),0);Ae.push({type:"group",name:Ee,displayName:ve(Ee),fullKey:At,children:vt,leafCount:ws,depth:j})}}return Ae},[]),we=L=>L.slice().sort((v,j)=>v.displayName.localeCompare(j.displayName,void 0,{sensitivity:"base",numeric:!0})).map(v=>v.type==="group"?{...v,children:we(v.children)}:v),Te=(L,v)=>{if(!v)return!0;const j=v.toLowerCase(),Ae=[L.displayName,L.name,L.fullKey];return L.type==="leaf"&&L.data?.path&&Ae.push(L.data.path),Ae.some(Ee=>Ee&&Ee.toLowerCase().includes(j))},Be=(L,v)=>{if(!v)return{nodes:L,matchedKeys:new Set};const j=[],Ae=new Set;return L.forEach(Ee=>{if(Ee.type==="leaf"){Te(Ee,v)&&(j.push(Ee),Ae.add(Ee.fullKey));return}const je=Be(Ee.children,v);if(Te(Ee,v)||je.nodes.length>0){const vt=je.nodes,ws=vt.reduce((Us,Za)=>Us+(Za.leafCount||0),0);j.push({...Ee,children:vt,leafCount:ws||Ee.leafCount}),Ae.add(Ee.fullKey),je.matchedKeys.forEach(Us=>Ae.add(Us))}}),{nodes:j,matchedKeys:Ae}},He=le(()=>{const L=a.value;return!L||typeof L!="object"?[]:!Array.isArray(L)&&L.path?[{type:"leaf",name:L.name||"data",displayName:ve(L.name||"data"),fullKey:L.name||"data",data:L,leafCount:1,depth:0}]:we(Pe(L))}),tt=le(()=>d.value.trim().toLowerCase()),Ne=le(()=>{const L=tt.value;return L?Be(He.value,L):{nodes:He.value,matchedKeys:new Set}}),St=le(()=>Ne.value.nodes),Rt=le(()=>Ne.value.matchedKeys),is=le(()=>tt.value.length>0),ns=le(()=>is.value?[]:(He.value||[]).filter(L=>(L.depth||0)===0).map(L=>{const v=L.fullKey||L.name||"";return{anchorId:v?qv(v):null,label:L.displayName||ve(L.name||v||"data source"),count:L.leafCount||(L.type==="leaf"?1:0),nodeKey:v}}).filter(L=>L.anchorId&&L.label)),rt=le(()=>C.value.size>0),vi=le(()=>C.value.size),Ut=le(()=>Array.from(C.value)),rs=L=>{let v=0;return L.forEach(j=>{v=Math.max(v,j.depth||0),j.type==="group"&&j.children&&(v=Math.max(v,rs(j.children)))}),v},zn=le(()=>rs(He.value)),xs=le(()=>zn.value>2),Qs=(L,v,j)=>{const Ae=v.split(".").filter(Boolean);if(Ae.length===0)return null;const Ee=ce(L||{});let je=Ee;for(let At=0;At<Ae.length-1;At++){const vt=Ae[At];(!je[vt]||typeof je[vt]!="object"||Array.isArray(je[vt]))&&(je[vt]={}),je=je[vt]}return je[Ae[Ae.length-1]]=ce(j),Ee},Ms=(L,v)=>{if(!L||!v)return null;const j=v.split(".").filter(Boolean);if(j.length===0)return null;let Ae=L;for(let Ee=0;Ee<j.length;Ee++){const je=j[Ee];if(!Ae||typeof Ae!="object"||!(je in Ae))return null;Ae=Ae[je]}return Ae},ks=L=>{const v=L.split(".").filter(Boolean);if(v.length<=1)return;const j=new Set(u.value);let Ae="";for(let Ee=0;Ee<v.length-1;Ee++)Ae=Ae?`${Ae}.${v[Ee]}`:v[Ee],j.add(Ae);u.value=j},Go=async(L,v)=>{if(!L)return;if(v){ks(v);const Ae=new Set(u.value);Ae.add(v),u.value=Ae}await Tn();const j=document.getElementById(L);j&&j.scrollIntoView({behavior:"smooth",block:"start"})},K=async L=>{const v=await fetch(`/api/project/${e.params.id}/data`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:L})}),j=await v.json();if(!v.ok||j.error)throw new Error(j.error||"Failed to save data catalog")},S=L=>{L&&(_.value=!1,h.value={fullKey:L.fullKey,name:L.name,data:ce(L.data||{})},w.value=null,f.value=!0)},b=()=>{_.value=!0,h.value={fullKey:"",data:{}},w.value=null,f.value=!0},G=L=>{f.value=L,L||(h.value=null,w.value=null,m.value=!1,_.value=!1)},oe=async L=>{if(!L||!L.fullKey||!L.data){w.value=L?.error||"Invalid data entry payload";return}const v=L.fullKey.trim(),j=!!L.isNew;if(!v){w.value="Dot notation key is required";return}if(j&&Ms(a.value,v)){w.value="A data source with this key already exists";return}const Ae=ce(a.value),Ee=Qs(a.value,v,L.data);if(!Ee){w.value="Unable to write data entry to catalog";return}a.value=Ee,m.value=!0,w.value=null;try{if(await K(Ee),ks(v),i.success(j?"Data Source Added":"Data Catalog Updated",j?"Data entry created successfully":"Data entry saved successfully"),f.value=!1,h.value=null,_.value=!1,C.value.has(v)){const je=new Set(C.value);je.delete(v),C.value=je}}catch(je){a.value=Ae,w.value=je.message||"Failed to save data catalog",i.error("Save Failed",je.message||"Failed to save data catalog")}finally{m.value=!1}},de=(L,v)=>{if(!L||!v)return null;const j=v.split(".").filter(Boolean);if(j.length===0)return null;const Ae=ce(L),Ee=[];let je=Ae;for(let vt=0;vt<j.length;vt++){const ws=j[vt];if(!je||typeof je!="object"||!(ws in je))return null;Ee.push({parent:je,key:ws}),je=je[ws]}const At=Ee.pop();if(!At)return null;delete At.parent[At.key];for(let vt=Ee.length-1;vt>=0;vt--){const{parent:ws,key:Us}=Ee[vt];ws[Us]&&typeof ws[Us]=="object"&&!Array.isArray(ws[Us])&&Object.keys(ws[Us]).length===0&&delete ws[Us]}return Ae},Ye=async()=>{if(!rt.value)return;M.value=!0;const L=ce(a.value);let v=ce(L);for(const j of C.value){const Ae=de(v,j);if(!Ae){i.error("Delete Failed",`Unable to locate ${j} in catalog`),M.value=!1;return}v=Ae}try{await K(v),a.value=v,i.success("Data Catalog Updated","Staged deletions have been saved"),C.value=new Set}catch(j){i.error("Delete Failed",j.message||"Failed to save catalog changes")}finally{M.value=!1}},$t=L=>{if(!L||!L.fullKey)return;const v=new Set(C.value);v.has(L.fullKey)?v.delete(L.fullKey):v.add(L.fullKey),C.value=v},Fn=()=>{C.value=new Set},bi=L=>{const v=new Set(u.value);v.has(L)?v.delete(L):v.add(L),u.value=v},Wa=async()=>{r.value=!0,o.value=null;try{const v=await(await fetch(`/api/project/${e.params.id}`)).json();v.error?o.value=v.error:n.value=v}catch(L){o.value="Failed to load project: "+L.message}finally{r.value=!1}},Gv=async()=>{try{const v=await(await fetch(`/api/project/${e.params.id}/data`)).json();v.error||(a.value=v.data||v)}catch(L){console.error("Failed to load data catalog:",L)}},qa=async()=>{D.value=!0,N.value=null;try{const v=await(await fetch(`/api/project/${e.params.id}/settings`)).json();v.error?N.value=v.error:(U.value=v.settings,$.value=JSON.parse(JSON.stringify(v.settings)))}catch(L){N.value="Failed to load settings: "+L.message}finally{D.value=!1}},uf=async()=>{q.value=!0;try{const v=await(await fetch(`/api/project/${e.params.id}/settings`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify($.value)})).json();v.success?(i.success("Settings Saved","Project settings have been updated"),U.value=JSON.parse(JSON.stringify($.value)),await qa()):i.error("Save Failed",v.error||"Failed to save settings")}catch(L){i.error("Save Failed",L.message)}finally{q.value=!1}},Kv=L=>{const v=document.getElementById(`connection-${L}`);v&&v.scrollIntoView({behavior:"smooth",block:"start"})},Zs=L=>{const v=document.getElementById(L);v&&v.scrollIntoView({behavior:"smooth",block:"start"})},Jv=L=>{L&&Go(L.anchorId,L.nodeKey)},Ga=async()=>{ne.value=!0,te.value=null;try{const v=await(await fetch(`/api/project/${e.params.id}/connections`)).json();v.error?te.value=v.error:P.value=v}catch(L){te.value="Failed to load connections: "+L.message}finally{ne.value=!1}},Yv=L=>{Q.value.has(L)?Q.value.delete(L):Q.value.add(L)},df=async()=>{pe.value=!0;try{const L={...P.value};L.connections&&(L.connections=Object.fromEntries(Object.entries(L.connections).filter(([Ae])=>!Q.value.has(Ae))));const j=await(await fetch(`/api/project/${e.params.id}/connections`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(L)})).json();j.success?(Q.value.clear(),i.success("Connections Saved","Connection settings have been updated"),await Ga()):i.error("Save Failed",j.error||"Failed to save connections")}catch(L){i.error("Save Failed",L.message)}finally{pe.value=!1}},Ko=async()=>{ae.value=!0,re.value=null;try{const v=await(await fetch(`/api/project/${e.params.id}/packages`)).json();v.error?re.value=v.error:z.value=(v.packages||[]).map(j=>({name:j.name||"",source:j.source||"cran",auto_attach:j.auto_attach!==void 0?j.auto_attach:!0,ref:j.ref||""}))}catch(L){re.value="Failed to load packages: "+L.message}finally{ae.value=!1}},Ka=async()=>{ye.value=!0;try{const v=await(await fetch(`/api/project/${e.params.id}/packages`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({packages:z.value})})).json();v.success?(i.success("Packages Saved","Package configuration has been updated"),await Ko()):i.error("Save Failed",v.error||"Failed to save packages")}catch(L){i.error("Save Failed",L.message)}finally{ye.value=!1}},Ja=()=>{J.value={name:"",source:"cran",auto_attach:!0},y.value="",p.value=[],A.value=-1,E.value=!0},Xv=async()=>{if(y.value.length<2){p.value=[],A.value=-1;return}I.value=!0;try{const v=await(await fetch(`/api/packages/search?q=${encodeURIComponent(y.value)}`)).json();console.log("Package search results:",v),p.value=v.packages||[],A.value=p.value.length>0?0:-1}catch(L){console.error("Failed to search packages:",L),p.value=[],A.value=-1}finally{I.value=!1}},Qv=L=>{p.value.length!==0&&(L.key==="ArrowDown"?(L.preventDefault(),A.value=Math.min(A.value+1,p.value.length-1)):L.key==="ArrowUp"?(L.preventDefault(),A.value=Math.max(A.value-1,0)):L.key==="Enter"&&A.value>=0?(L.preventDefault(),cf(p.value[A.value])):L.key==="Escape"&&(p.value=[],A.value=-1))},cf=L=>{J.value.name=L.name,J.value.source=L.source,y.value="",p.value=[],A.value=-1},Zv=()=>{J.value.name.trim()&&(z.value.push({name:J.value.name.trim(),source:J.value.source,auto_attach:J.value.auto_attach}),E.value=!1,i.success("Package Added",`${J.value.name} added to package list`))},e1=L=>{z.value.splice(L,1)},Ya=async()=>{Ge.value=!0,Ue.value=null;try{const v=await(await fetch(`/api/project/${e.params.id}/directories`)).json();v.error?Ue.value=v.error:ge.value=v.directories||{}}catch(L){Ue.value="Failed to load directories: "+L.message}finally{Ge.value=!1}},ff=async()=>{Ct.value=!0;try{const v=await(await fetch(`/api/project/${e.params.id}/directories`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({directories:ge.value})})).json();v.success?(i.success("Directories Saved","Directory configuration has been updated"),await Ya()):i.error("Save Failed",v.error||"Failed to save directories")}catch(L){i.error("Save Failed",L.message)}finally{Ct.value=!1}},Jo=async()=>{ke.value=!0,$e.value=null;try{const v=await(await fetch(`/api/project/${e.params.id}/env`)).json();v.error?$e.value=v.error:(et.value=v.variables||{},V.value=v.groups||{},Se.value=v.raw_content||"")}catch(L){$e.value="Failed to load .env: "+L.message}finally{ke.value=!1}},Xa=async()=>{Fe.value=!0;try{const L=H.value==="raw"?{raw_content:Se.value}:{variables:et.value,regroup:ee.value},j=await(await fetch(`/api/project/${e.params.id}/env`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(L)})).json();j.success?(i.success(".env Saved","Environment variables have been updated"),await Jo()):i.error("Save Failed",j.error||"Failed to save .env")}catch(L){i.error("Save Failed",L.message)}finally{Fe.value=!1}},hf=()=>{const L=`NEW_VARIABLE_${Object.keys(et.value).length+1}`;et.value[L]=""},t1=L=>{delete et.value[L]},Qa=L=>["PASSWORD","SECRET","KEY","TOKEN","CREDENTIAL"].some(j=>L.toUpperCase().includes(j)),s1=L=>{O.value[L]=!O.value[L]},pf=L=>T.value||O.value[L]||!Qa(L),mf=L=>{(L.metaKey||L.ctrlKey)&&L.key==="s"&&(L.preventDefault(),l.value==="settings"?uf():l.value==="connections"?df():l.value==="packages"?Ka():l.value==="directories"?ff():l.value==="env"&&Xa())};return es(()=>{Y(),Wa(),Gv(),window.addEventListener("keydown",mf)}),Sr(()=>{window.removeEventListener("keydown",mf)}),(L,v)=>(g(),x("div",null,[r.value?(g(),x("div",sE,[...v[68]||(v[68]=[c("div",{class:"text-zinc-600 dark:text-zinc-400"},"Loading project...",-1)])])):o.value?(g(),x("div",iE,[k(Ci,{type:"error",title:"Error Loading Project",description:o.value},null,8,["description"])])):n.value?(g(),x("div",nE,[c("nav",rE,[c("h2",oE,F(n.value.name),1),c("div",lE,[c("span",aE,F(n.value.path),1),k(Qr,{value:n.value.path,variant:"ghost",successMessage:"Path copied",class:"shrink-0"},null,8,["value"])]),c("div",uE,[c("a",{href:"#overview",onClick:v[0]||(v[0]=ft(j=>l.value="overview",["prevent"])),class:Ve(Z("overview"))},[k(ot(zg),{class:"h-4 w-4"}),v[69]||(v[69]=se(" Overview ",-1))],2),v[77]||(v[77]=c("div",{class:"pt-4 pb-2"},[c("h3",{class:"px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider dark:text-gray-400"}," Settings ")],-1)),c("a",{href:"#settings",onClick:v[1]||(v[1]=ft(j=>l.value="settings",["prevent"])),class:Ve(Z("settings"))},[k(ot(zk),{class:"h-4 w-4"}),v[70]||(v[70]=se(" Project Settings ",-1))],2),l.value==="settings"?(g(),x("div",dE,[c("a",{href:"#settings-project",onClick:v[2]||(v[2]=ft(j=>Zs("settings-project"),["prevent"])),class:"flex items-center gap-2 px-3 py-1 rounded-md text-xs text-gray-600 hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-gray-800 transition"}," Project Information "),c("a",{href:"#settings-author",onClick:v[3]||(v[3]=ft(j=>Zs("settings-author"),["prevent"])),class:"flex items-center gap-2 px-3 py-1 rounded-md text-xs text-gray-600 hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-gray-800 transition"}," Author Information "),c("a",{href:"#settings-options",onClick:v[4]||(v[4]=ft(j=>Zs("settings-options"),["prevent"])),class:"flex items-center gap-2 px-3 py-1 rounded-md text-xs text-gray-600 hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-gray-800 transition"}," Project Options "),c("a",{href:"#settings-git",onClick:v[5]||(v[5]=ft(j=>Zs("settings-git"),["prevent"])),class:"flex items-center gap-2 px-3 py-1 rounded-md text-xs text-gray-600 hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-gray-800 transition"}," Git Configuration "),c("a",{href:"#settings-ai",onClick:v[6]||(v[6]=ft(j=>Zs("settings-ai"),["prevent"])),class:"flex items-center gap-2 px-3 py-1 rounded-md text-xs text-gray-600 hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-gray-800 transition"}," AI Assistant ")])):R("",!0),c("a",{href:"#connections",onClick:v[7]||(v[7]=ft(j=>l.value="connections",["prevent"])),class:Ve(Z("connections"))},[k(ot(wh),{class:"h-4 w-4"}),v[71]||(v[71]=se(" Connections ",-1))],2),l.value==="connections"&&P.value&&P.value.connections?(g(),x("div",cE,[(g(!0),x(X,null,be(P.value.connections,(j,Ae)=>(g(),x("a",{key:Ae,href:`#connection-${Ae}`,onClick:ft(Ee=>Kv(Ae),["prevent"]),class:"flex items-center gap-2 px-3 py-1 rounded-md text-xs text-gray-600 hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-gray-800 transition"},F(Ae),9,fE))),128))])):R("",!0),c("a",{href:"#packages",onClick:v[8]||(v[8]=ft(j=>l.value="packages",["prevent"])),class:Ve(Z("packages"))},[k(ot(bh),{class:"h-4 w-4"}),v[72]||(v[72]=se(" Packages ",-1))],2),c("a",{href:"#directories",onClick:v[9]||(v[9]=ft(j=>l.value="directories",["prevent"])),class:Ve(Z("directories"))},[k(ot(qk),{class:"h-4 w-4"}),v[73]||(v[73]=se(" Directories ",-1))],2),l.value==="directories"?(g(),x("div",hE,[c("a",{href:"#directory-work",onClick:v[10]||(v[10]=ft(j=>Zs("directory-work"),["prevent"])),class:"flex items-center gap-2 px-3 py-1 rounded-md text-xs text-gray-600 hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-gray-800 transition"}," Work Directories "),c("a",{href:"#directory-inputs",onClick:v[11]||(v[11]=ft(j=>Zs("directory-inputs"),["prevent"])),class:"flex items-center gap-2 px-3 py-1 rounded-md text-xs text-gray-600 hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-gray-800 transition"}," Input Directories "),c("a",{href:"#directory-private-outputs",onClick:v[12]||(v[12]=ft(j=>Zs("directory-private-outputs"),["prevent"])),class:"flex items-center gap-2 px-3 py-1 rounded-md text-xs text-gray-600 hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-gray-800 transition"}," Private Outputs "),c("a",{href:"#directory-public-outputs",onClick:v[13]||(v[13]=ft(j=>Zs("directory-public-outputs"),["prevent"])),class:"flex items-center gap-2 px-3 py-1 rounded-md text-xs text-gray-600 hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-gray-800 transition"}," Public Outputs "),c("a",{href:"#directory-other",onClick:v[14]||(v[14]=ft(j=>Zs("directory-other"),["prevent"])),class:"flex items-center gap-2 px-3 py-1 rounded-md text-xs text-gray-600 hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-gray-800 transition"}," Other ")])):R("",!0),c("a",{href:"#data",onClick:v[15]||(v[15]=ft(j=>l.value="data",["prevent"])),class:Ve(Z("data"))},[k(ot(Nk),{class:"h-4 w-4"}),v[74]||(v[74]=se(" Data ",-1))],2),l.value==="data"&&ns.value.length?(g(),x("div",pE,[(g(!0),x(X,null,be(ns.value,j=>(g(),x("a",{key:j.anchorId,href:`#${j.anchorId}`,onClick:ft(Ae=>Jv(j),["prevent"]),class:"flex items-center justify-between gap-2 rounded-md px-3 py-1 text-xs text-gray-600 transition hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-gray-800"},[c("span",gE,F(j.label),1),j.count?(g(),x("span",yE,F(j.count),1)):R("",!0)],8,mE))),128))])):R("",!0),c("a",{href:"#env",onClick:v[16]||(v[16]=ft(j=>l.value="env",["prevent"])),class:Ve(Z("env"))},[k(ot(kh),{class:"h-4 w-4"}),v[75]||(v[75]=se(" .env ",-1))],2),v[78]||(v[78]=c("div",{class:"pt-4 pb-2"},[c("h3",{class:"px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider dark:text-gray-400"}," Outputs ")],-1)),c("a",{href:"#notebooks",onClick:v[17]||(v[17]=ft(j=>l.value="notebooks",["prevent"])),class:Ve(Z("notebooks"))},[k(ot(xh),{class:"h-4 w-4"}),v[76]||(v[76]=se(" Notebooks ",-1))],2)])]),c("div",vE,[qe(c("div",bE,[c("div",xE,[c("div",null,[c("h2",kE,F(n.value.name),1),k(An,{variant:"sky",class:"mt-2"},{default:B(()=>[se(F(n.value.type),1)]),_:1})])]),c("div",wE,[v[83]||(v[83]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Project Information",-1)),c("div",SE,[c("div",null,[v[79]||(v[79]=c("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Project Type ",-1)),c("p",_E,F(n.value.type),1)]),c("div",null,[v[80]||(v[80]=c("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Created ",-1)),c("p",CE,F(n.value.created),1)]),n.value.author?(g(),x("div",AE,[v[81]||(v[81]=c("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Author ",-1)),c("p",VE,F(n.value.author),1)])):R("",!0),n.value.author_email?(g(),x("div",ME,[v[82]||(v[82]=c("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Email ",-1)),c("p",DE,F(n.value.author_email),1)])):R("",!0)])])],512),[[gt,l.value==="overview"]]),qe(c("div",TE,[D.value?(g(),x("div",EE,[...v[84]||(v[84]=[c("div",{class:"text-center py-12 text-zinc-500 dark:text-zinc-400"}," Loading settings... ",-1)])])):N.value?(g(),x("div",$E,[k(Ci,{type:"error",title:"Error Loading Settings",description:N.value},null,8,["description"])])):(g(),x("div",OE,[v[99]||(v[99]=c("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Project Settings",-1)),v[100]||(v[100]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Configure settings for this project. ",-1)),c("div",PE,[c("div",jE,[v[90]||(v[90]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Project Information",-1)),c("div",RE,[k(W,{modelValue:$.value.project_name,"onUpdate:modelValue":v[18]||(v[18]=j=>$.value.project_name=j),label:"Project Name",hint:"Display name for this project"},null,8,["modelValue"]),c("div",null,[v[89]||(v[89]=c("label",{class:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-2"}," Project Type ",-1)),c("div",LE,[c("label",BE,[qe(c("input",{type:"radio","onUpdate:modelValue":v[19]||(v[19]=j=>$.value.project_type=j),value:"project",class:"text-sky-600 focus:ring-sky-500"},null,512),[[bn,$.value.project_type]]),v[85]||(v[85]=c("span",{class:"text-sm text-zinc-700 dark:text-zinc-300"},"Project",-1))]),c("label",IE,[qe(c("input",{type:"radio","onUpdate:modelValue":v[20]||(v[20]=j=>$.value.project_type=j),value:"course",class:"text-sky-600 focus:ring-sky-500"},null,512),[[bn,$.value.project_type]]),v[86]||(v[86]=c("span",{class:"text-sm text-zinc-700 dark:text-zinc-300"},"Course",-1))]),c("label",UE,[qe(c("input",{type:"radio","onUpdate:modelValue":v[21]||(v[21]=j=>$.value.project_type=j),value:"presentation",class:"text-sky-600 focus:ring-sky-500"},null,512),[[bn,$.value.project_type]]),v[87]||(v[87]=c("span",{class:"text-sm text-zinc-700 dark:text-zinc-300"},"Presentation",-1))]),c("label",NE,[qe(c("input",{type:"radio","onUpdate:modelValue":v[22]||(v[22]=j=>$.value.project_type=j),value:"project_sensitive",class:"text-sky-600 focus:ring-sky-500"},null,512),[[bn,$.value.project_type]]),v[88]||(v[88]=c("span",{class:"text-sm text-zinc-700 dark:text-zinc-300"},"Sensitive",-1))])])])])]),$.value.author?(g(),x("div",zE,[v[91]||(v[91]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Author Information",-1)),c("div",FE,[k(W,{modelValue:$.value.author.name,"onUpdate:modelValue":v[23]||(v[23]=j=>$.value.author.name=j),label:"Author Name"},null,8,["modelValue"]),k(W,{modelValue:$.value.author.email,"onUpdate:modelValue":v[24]||(v[24]=j=>$.value.author.email=j),label:"Email",type:"email"},null,8,["modelValue"]),k(W,{modelValue:$.value.author.affiliation,"onUpdate:modelValue":v[25]||(v[25]=j=>$.value.author.affiliation=j),label:"Affiliation",class:"col-span-2"},null,8,["modelValue"])])])):R("",!0),$.value.options?(g(),x("div",HE,[v[95]||(v[95]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Project Options",-1)),c("div",WE,[c("div",qE,[c("div",null,[v[94]||(v[94]=c("label",{class:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-2"}," Default Notebook Format ",-1)),c("div",GE,[c("label",KE,[qe(c("input",{type:"radio","onUpdate:modelValue":v[26]||(v[26]=j=>$.value.options.default_notebook_format=j),value:"quarto",class:"text-sky-600 focus:ring-sky-500"},null,512),[[bn,$.value.options.default_notebook_format]]),v[92]||(v[92]=c("span",{class:"text-sm text-zinc-700 dark:text-zinc-300"},"Quarto",-1))]),c("label",JE,[qe(c("input",{type:"radio","onUpdate:modelValue":v[27]||(v[27]=j=>$.value.options.default_notebook_format=j),value:"rmarkdown",class:"text-sky-600 focus:ring-sky-500"},null,512),[[bn,$.value.options.default_notebook_format]]),v[93]||(v[93]=c("span",{class:"text-sm text-zinc-700 dark:text-zinc-300"},"RMarkdown",-1))])])]),k(W,{modelValue:$.value.options.seed,"onUpdate:modelValue":v[28]||(v[28]=j=>$.value.options.seed=j),modelModifiers:{number:!0},label:"Random Seed",type:"number",hint:"For reproducibility (YYYYMMDD format)"},null,8,["modelValue"])]),k(Re,{modelValue:$.value.options.seed_on_scaffold,"onUpdate:modelValue":v[29]||(v[29]=j=>$.value.options.seed_on_scaffold=j),label:"Set Seed on Scaffold",description:"Automatically set random seed when loading project"},null,8,["modelValue"])])])):R("",!0),$.value.git?(g(),x("div",YE,[v[96]||(v[96]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Git Configuration",-1)),c("div",XE,[k(W,{modelValue:$.value.git.url,"onUpdate:modelValue":v[30]||(v[30]=j=>$.value.git.url=j),label:"Repository URL",hint:"Git repository URL for this project"},null,8,["modelValue"]),c("div",QE,[k(W,{modelValue:$.value.git.author,"onUpdate:modelValue":v[31]||(v[31]=j=>$.value.git.author=j),label:"Git Author"},null,8,["modelValue"]),k(W,{modelValue:$.value.git.email,"onUpdate:modelValue":v[32]||(v[32]=j=>$.value.git.email=j),label:"Git Email",type:"email"},null,8,["modelValue"])])])])):R("",!0),$.value.ai?(g(),x("div",ZE,[v[97]||(v[97]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"AI Assistant Configuration",-1)),k(W,{modelValue:$.value.ai.canonical_file,"onUpdate:modelValue":v[33]||(v[33]=j=>$.value.ai.canonical_file=j),label:"Canonical AI File",hint:"Main file for AI context (e.g., CLAUDE.md)"},null,8,["modelValue"])])):R("",!0),c("div",e$,[k(Oe,{variant:"secondary",onClick:qa},{default:B(()=>[...v[98]||(v[98]=[se(" Reset ",-1)])]),_:1}),k(Oe,{variant:"primary",onClick:uf,disabled:q.value},{default:B(()=>[se(F(q.value?"Saving...":"Save Settings"),1)]),_:1},8,["disabled"])])])]))],512),[[gt,l.value==="settings"]]),qe(c("div",t$,[v[102]||(v[102]=c("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Rendered Notebooks",-1)),v[103]||(v[103]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Browse and access your rendered Quarto/RMarkdown notebooks. ",-1)),c("div",s$,[k(ot(xh),{class:"h-12 w-12 mx-auto mb-4 text-gray-400"}),v[101]||(v[101]=c("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Notebook browser coming soon... ",-1))])],512),[[gt,l.value==="notebooks"]]),qe(c("div",i$,[c("div",n$,[v[105]||(v[105]=c("div",null,[c("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white"},"Data Catalog"),c("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Browse your project's data sources with copy commands. ")],-1)),k(Oe,{variant:"primary",size:"sm",class:"inline-flex items-center gap-2",onClick:b},{default:B(()=>[k(ot(Gk),{class:"h-4 w-4"}),v[104]||(v[104]=se(" Add Data Source ",-1))]),_:1})]),c("div",r$,[k(W,{modelValue:d.value,"onUpdate:modelValue":v[34]||(v[34]=j=>d.value=j),label:"Search data sources",placeholder:"Filter by name, prefix, or file path"},null,8,["modelValue"])]),St.value.length>0?(g(),x("div",o$,[(g(!0),x(X,null,be(St.value,j=>(g(),he(tE,{key:j.fullKey,node:j,"expanded-keys":u.value,"auto-expanded-keys":Rt.value,"toggle-group":bi,"search-term":d.value,hierarchical:xs.value,"pending-deletes":C.value,onEdit:S,onDelete:$t},null,8,["node","expanded-keys","auto-expanded-keys","search-term","hierarchical","pending-deletes"]))),128))])):R("",!0),rt.value?(g(),x("div",l$,[c("div",a$,[c("div",null,[c("p",u$,F(vi.value)+" data source"+F(vi.value===1?"":"s")+" marked for deletion. ",1),v[106]||(v[106]=c("p",{class:"text-xs text-red-600 dark:text-red-200/80"}," Changes will be applied when you save. ",-1))]),c("div",d$,[k(Oe,{variant:"secondary",size:"sm",class:"shadow-none",disabled:M.value,onClick:Fn},{default:B(()=>[...v[107]||(v[107]=[se(" Cancel ",-1)])]),_:1},8,["disabled"]),k(Oe,{size:"sm",class:"bg-red-600 text-white hover:bg-red-500 focus-visible:outline-red-600 dark:bg-red-500 dark:hover:bg-red-400",disabled:M.value,onClick:Ye},{default:B(()=>[se(F(M.value?"Saving":"Save Changes"),1)]),_:1},8,["disabled"])])]),c("ul",c$,[(g(!0),x(X,null,be(Ut.value,j=>(g(),x("li",{key:j},F(j),1))),128))])])):is.value?(g(),x("div",f$,[c("p",h$,' No data sources match "'+F(d.value)+'". ',1),v[108]||(v[108]=c("p",{class:"mt-2 text-xs text-zinc-500 dark:text-zinc-400"}," Try adjusting your search terms or clearing the filter. ",-1))])):(g(),x(X,{key:3},[!rt.value&&(!a.value||Object.keys(a.value||{}).length===0)?(g(),he(OD,{key:0,title:"No Data Sources",description:"This project doesn't have any data sources defined in its settings",icon:"database"})):R("",!0)],64))],512),[[gt,l.value==="data"]]),k(oT,{mode:_.value?"create":"edit",modelValue:f.value,"onUpdate:modelValue":[v[35]||(v[35]=j=>f.value=j),G],entry:h.value,saving:m.value,error:w.value,onSave:oe},null,8,["mode","modelValue","entry","saving","error"]),qe(c("div",p$,[ne.value?(g(),x("div",m$,[...v[109]||(v[109]=[c("div",{class:"text-center py-12 text-zinc-500 dark:text-zinc-400"}," Loading connections... ",-1)])])):te.value?(g(),x("div",g$,[k(Ci,{type:"error",title:"Error Loading Connections",description:te.value},null,8,["description"])])):(g(),x("div",y$,[v[115]||(v[115]=c("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Connections",-1)),v[116]||(v[116]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Manage database and external service connections for this project. ",-1)),c("div",v$,[P.value&&P.value.options?(g(),x("div",b$,[v[110]||(v[110]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Connection Options",-1)),k(W,{modelValue:P.value.options.default_connection,"onUpdate:modelValue":v[36]||(v[36]=j=>P.value.options.default_connection=j),label:"Default Connection",hint:"Name of the default connection to use"},null,8,["modelValue"])])):R("",!0),P.value&&P.value.connections?(g(),x("div",x$,[Object.keys(P.value.connections).length===0?(g(),x("div",k$,[k(ot(wh),{class:"h-12 w-12 mx-auto mb-4 text-gray-400"}),v[111]||(v[111]=c("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," No connections defined yet ",-1))])):(g(),x("div",w$,[(g(!0),x(X,null,be(P.value.connections,(j,Ae)=>(g(),x("div",{key:Ae,id:`connection-${Ae}`,class:Ve(["rounded-lg p-6 scroll-mt-6 relative transition",Q.value.has(Ae)?"bg-red-50 dark:bg-red-900/10 opacity-60":"bg-gray-50 dark:bg-gray-800/50"])},[c("button",{onClick:Ee=>Yv(Ae),class:Ve(["absolute top-3 right-3 p-1.5 rounded-md border border-gray-300 transition dark:border-gray-600",Q.value.has(Ae)?"text-gray-600 hover:bg-gray-100 hover:border-gray-400 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:border-gray-500":"text-red-700 hover:bg-gray-100 hover:border-red-600 dark:text-red-400 dark:hover:bg-gray-700 dark:hover:border-red-500"]),title:Q.value.has(Ae)?"Undo delete":"Delete connection"},[Q.value.has(Ae)?(g(),x("svg",C$,[...v[112]||(v[112]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3"},null,-1)])])):(g(),x("svg",A$,[...v[113]||(v[113]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"},null,-1)])]))],10,_$),c("div",{class:Ve({"line-through opacity-50":Q.value.has(Ae)})},[c("h3",V$,F(Ae),1),c("div",M$,[(g(!0),x(X,null,be(j,(Ee,je)=>(g(),x("div",{key:je},[c("label",D$,F(je),1),qe(c("input",{"onUpdate:modelValue":At=>P.value.connections[Ae][je]=At,type:"text",disabled:Q.value.has(Ae),class:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 px-3 py-2 text-sm text-gray-900 dark:text-gray-100 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500 font-mono disabled:opacity-50 disabled:cursor-not-allowed"},null,8,T$),[[Gi,P.value.connections[Ae][je]]])]))),128))])],2)],10,S$))),128))]))])):R("",!0),c("div",E$,[k(Oe,{variant:"secondary",onClick:Ga},{default:B(()=>[...v[114]||(v[114]=[se(" Reset ",-1)])]),_:1}),k(Oe,{variant:"primary",onClick:df,disabled:pe.value},{default:B(()=>[se(F(pe.value?"Saving...":"Save Connections"),1)]),_:1},8,["disabled"])])])]))],512),[[gt,l.value==="connections"]]),qe(c("div",$$,[ae.value?(g(),x("div",O$,[...v[117]||(v[117]=[c("div",{class:"text-center py-12"},[c("div",{class:"text-sm text-gray-500 dark:text-gray-400"},"Loading packages...")],-1)])])):re.value?(g(),x("div",P$,[k(Ci,{type:"error",title:"Error Loading Packages",description:re.value},null,8,["description"])])):(g(),x("div",j$,[v[127]||(v[127]=c("div",{class:"mb-6"},[c("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Package Management"),c("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Manage R packages for this project. Packages with auto-attach will be loaded when scaffold() runs. ")],-1)),z.value.length===0?(g(),x("div",R$,[k(ot(bh),{class:"h-12 w-12 mx-auto mb-4 text-gray-400"}),v[119]||(v[119]=c("p",{class:"text-sm text-gray-500 dark:text-gray-400 mb-4"}," No packages configured ",-1)),k(Oe,{variant:"primary",onClick:Ja},{default:B(()=>[...v[118]||(v[118]=[se(" Add Your First Package ",-1)])]),_:1})])):(g(),x("div",L$,[c("div",B$,[k(Oe,{variant:"primary",size:"sm",onClick:Ja},{default:B(()=>[...v[120]||(v[120]=[se(" + Add Package ",-1)])]),_:1}),c("div",I$,[k(Oe,{variant:"secondary",onClick:Ko},{default:B(()=>[...v[121]||(v[121]=[se(" Reset ",-1)])]),_:1}),k(Oe,{variant:"primary",onClick:Ka,disabled:ye.value},{default:B(()=>[se(F(ye.value?"Saving...":"Save Packages"),1)]),_:1},8,["disabled"])])]),c("div",U$,[c("table",N$,[v[124]||(v[124]=c("thead",null,[c("tr",{class:"border-b border-gray-200 dark:border-gray-700"},[c("th",{class:"px-4 py-3 text-left text-xs font-semibold text-gray-700 dark:text-gray-300"}," Package Name "),c("th",{class:"px-4 py-3 text-left text-xs font-semibold text-gray-700 dark:text-gray-300"}," Source "),c("th",{class:"px-4 py-3 text-center text-xs font-semibold text-gray-700 dark:text-gray-300"}," Auto-attach "),c("th",{class:"px-4 py-3 text-center text-xs font-semibold text-gray-700 dark:text-gray-300 w-20"}," Actions ")])],-1)),c("tbody",z$,[(g(!0),x(X,null,be(z.value,(j,Ae)=>(g(),x("tr",{key:Ae,class:"border-b border-gray-200 dark:border-gray-700 last:border-b-0"},[c("td",F$,[qe(c("input",{"onUpdate:modelValue":Ee=>j.name=Ee,type:"text",placeholder:"dplyr",class:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 px-3 py-2 text-sm text-gray-900 dark:text-gray-100 font-mono focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500"},null,8,H$),[[Gi,j.name]])]),c("td",W$,[c("div",q$,[qe(c("select",{"onUpdate:modelValue":Ee=>j.source=Ee,class:"w-full appearance-none rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 pl-3 pr-10 py-2 text-sm text-gray-900 dark:text-gray-100 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500"},[...v[122]||(v[122]=[c("option",{value:"cran"},"CRAN",-1),c("option",{value:"github"},"GitHub",-1),c("option",{value:"bioc"},"Bioconductor",-1)])],8,G$),[[id,j.source]]),v[123]||(v[123]=c("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},[c("svg",{class:"h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))])]),c("td",K$,[qe(c("input",{"onUpdate:modelValue":Ee=>j.auto_attach=Ee,type:"checkbox",style:{"accent-color":"rgb(2, 132, 199)"},class:"h-4 w-4 rounded border-gray-300 focus:ring-sky-500 dark:border-gray-600"},null,8,J$),[[Mg,j.auto_attach]])]),c("td",Y$,[c("button",{onClick:Ee=>e1(Ae),class:"text-xs text-gray-600 hover:text-gray-900 font-medium dark:text-gray-400 dark:hover:text-gray-200"}," Delete ",8,X$)])]))),128))])])]),c("div",Q$,[k(Oe,{variant:"primary",size:"sm",onClick:Ja},{default:B(()=>[...v[125]||(v[125]=[se(" + Add Package ",-1)])]),_:1}),c("div",Z$,[k(Oe,{variant:"secondary",onClick:Ko},{default:B(()=>[...v[126]||(v[126]=[se(" Reset ",-1)])]),_:1}),k(Oe,{variant:"primary",onClick:Ka,disabled:ye.value},{default:B(()=>[se(F(ye.value?"Saving...":"Save Packages"),1)]),_:1},8,["disabled"])])])]))]))],512),[[gt,l.value==="packages"]]),qe(c("div",e7,[Ge.value?(g(),x("div",t7,[...v[128]||(v[128]=[c("div",{class:"text-center py-12"},[c("div",{class:"text-sm text-gray-500 dark:text-gray-400"},"Loading directories...")],-1)])])):Ue.value?(g(),x("div",s7,[k(Ci,{type:"error",title:"Error Loading Directories",description:Ue.value},null,8,["description"])])):(g(),x("div",i7,[v[135]||(v[135]=c("div",{class:"mb-6"},[c("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Project Directories"),c("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Override directory structure for this project. Leave empty to use global defaults. ")],-1)),c("div",n7,[c("div",r7,[v[129]||(v[129]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Work Directories",-1)),c("div",o7,[k(W,{modelValue:ge.value.notebooks,"onUpdate:modelValue":v[37]||(v[37]=j=>ge.value.notebooks=j),label:"Notebooks",placeholder:"notebooks"},null,8,["modelValue"]),k(W,{modelValue:ge.value.scripts,"onUpdate:modelValue":v[38]||(v[38]=j=>ge.value.scripts=j),label:"Scripts",placeholder:"scripts"},null,8,["modelValue"]),k(W,{modelValue:ge.value.functions,"onUpdate:modelValue":v[39]||(v[39]=j=>ge.value.functions=j),label:"Functions",placeholder:"functions"},null,8,["modelValue"])])]),c("div",l7,[v[130]||(v[130]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Input Directories",-1)),c("div",a7,[k(W,{modelValue:ge.value.inputs_raw,"onUpdate:modelValue":v[40]||(v[40]=j=>ge.value.inputs_raw=j),label:"Raw Inputs",placeholder:"inputs/raw"},null,8,["modelValue"]),k(W,{modelValue:ge.value.inputs_intermediate,"onUpdate:modelValue":v[41]||(v[41]=j=>ge.value.inputs_intermediate=j),label:"Intermediate Inputs",placeholder:"inputs/intermediate"},null,8,["modelValue"]),k(W,{modelValue:ge.value.inputs_final,"onUpdate:modelValue":v[42]||(v[42]=j=>ge.value.inputs_final=j),label:"Final Inputs",placeholder:"inputs/final"},null,8,["modelValue"]),k(W,{modelValue:ge.value.reference,"onUpdate:modelValue":v[43]||(v[43]=j=>ge.value.reference=j),label:"Reference Materials",placeholder:"reference"},null,8,["modelValue"])])]),c("div",u7,[v[131]||(v[131]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Private Outputs",-1)),c("div",d7,[k(W,{modelValue:ge.value.outputs_tables,"onUpdate:modelValue":v[44]||(v[44]=j=>ge.value.outputs_tables=j),label:"Tables",placeholder:"outputs/private/tables"},null,8,["modelValue"]),k(W,{modelValue:ge.value.outputs_figures,"onUpdate:modelValue":v[45]||(v[45]=j=>ge.value.outputs_figures=j),label:"Figures",placeholder:"outputs/private/figures"},null,8,["modelValue"]),k(W,{modelValue:ge.value.outputs_models,"onUpdate:modelValue":v[46]||(v[46]=j=>ge.value.outputs_models=j),label:"Models",placeholder:"outputs/private/models"},null,8,["modelValue"]),k(W,{modelValue:ge.value.outputs_notebooks,"onUpdate:modelValue":v[47]||(v[47]=j=>ge.value.outputs_notebooks=j),label:"Notebooks",placeholder:"outputs/private/notebooks"},null,8,["modelValue"]),k(W,{modelValue:ge.value.outputs_docs,"onUpdate:modelValue":v[48]||(v[48]=j=>ge.value.outputs_docs=j),label:"Docs",placeholder:"outputs/private/docs"},null,8,["modelValue"]),k(W,{modelValue:ge.value.outputs_final,"onUpdate:modelValue":v[49]||(v[49]=j=>ge.value.outputs_final=j),label:"Final",placeholder:"outputs/private/final"},null,8,["modelValue"])])]),c("div",c7,[v[132]||(v[132]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Public Outputs",-1)),c("div",f7,[k(W,{modelValue:ge.value.outputs_tables_public,"onUpdate:modelValue":v[50]||(v[50]=j=>ge.value.outputs_tables_public=j),label:"Tables",placeholder:"outputs/public/tables"},null,8,["modelValue"]),k(W,{modelValue:ge.value.outputs_figures_public,"onUpdate:modelValue":v[51]||(v[51]=j=>ge.value.outputs_figures_public=j),label:"Figures",placeholder:"outputs/public/figures"},null,8,["modelValue"]),k(W,{modelValue:ge.value.outputs_models_public,"onUpdate:modelValue":v[52]||(v[52]=j=>ge.value.outputs_models_public=j),label:"Models",placeholder:"outputs/public/models"},null,8,["modelValue"]),k(W,{modelValue:ge.value.outputs_notebooks_public,"onUpdate:modelValue":v[53]||(v[53]=j=>ge.value.outputs_notebooks_public=j),label:"Notebooks",placeholder:"outputs/public/notebooks"},null,8,["modelValue"]),k(W,{modelValue:ge.value.outputs_docs_public,"onUpdate:modelValue":v[54]||(v[54]=j=>ge.value.outputs_docs_public=j),label:"Docs",placeholder:"outputs/public/docs"},null,8,["modelValue"]),k(W,{modelValue:ge.value.outputs_final_public,"onUpdate:modelValue":v[55]||(v[55]=j=>ge.value.outputs_final_public=j),label:"Final",placeholder:"outputs/public/final"},null,8,["modelValue"])])]),c("div",h7,[v[133]||(v[133]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Other",-1)),c("div",p7,[k(W,{modelValue:ge.value.cache,"onUpdate:modelValue":v[56]||(v[56]=j=>ge.value.cache=j),label:"Cache",placeholder:"outputs/private/cache"},null,8,["modelValue"]),k(W,{modelValue:ge.value.scratch,"onUpdate:modelValue":v[57]||(v[57]=j=>ge.value.scratch=j),label:"Scratch",placeholder:"outputs/private/scratch"},null,8,["modelValue"])])]),c("div",m7,[k(Oe,{variant:"secondary",onClick:Ya},{default:B(()=>[...v[134]||(v[134]=[se(" Reset ",-1)])]),_:1}),k(Oe,{variant:"primary",onClick:ff,disabled:Ct.value},{default:B(()=>[se(F(Ct.value?"Saving...":"Save Directories"),1)]),_:1},8,["disabled"])])])]))],512),[[gt,l.value==="directories"]]),qe(c("div",g7,[ke.value?(g(),x("div",y7,[...v[136]||(v[136]=[c("div",{class:"text-center py-12 text-zinc-500 dark:text-zinc-400"}," Loading environment variables... ",-1)])])):$e.value?(g(),x("div",v7,[k(Ci,{type:"error",title:"Error Loading .env",description:$e.value},null,8,["description"])])):(g(),x("div",b7,[v[149]||(v[149]=c("div",{class:"mb-6"},[c("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Environment Variables"),c("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Manage environment variables for this project (.env file). ")],-1)),k(Ci,{type:"warning",title:" Contains Sensitive Data",class:"mb-6"},{actions:B(()=>[H.value==="grouped"?(g(),he(Oe,{key:0,variant:"soft",size:"sm",onClick:v[58]||(v[58]=j=>T.value=!T.value)},{default:B(()=>[se(F(T.value?"Hide Values":"Show Values"),1)]),_:1})):R("",!0)]),default:B(()=>[v[137]||(v[137]=se(" This file contains passwords and secrets. It is automatically excluded from version control (.gitignore). ",-1))]),_:1}),k(RD,{modelValue:H.value,"onUpdate:modelValue":v[59]||(v[59]=j=>H.value=j),tabs:[{id:"grouped",label:"Grouped By Prefix"},{id:"raw",label:"Raw"}],variant:"pills",class:"mb-6"},null,8,["modelValue"]),H.value==="grouped"?(g(),x("div",x7,[Object.keys(V.value).length===0?(g(),x("div",k7,[k(ot(kh),{class:"h-12 w-12 mx-auto mb-4 text-gray-400"}),v[139]||(v[139]=c("p",{class:"text-sm text-gray-500 dark:text-gray-400 mb-4"}," No environment variables found ",-1)),k(Oe,{variant:"primary",onClick:hf},{default:B(()=>[...v[138]||(v[138]=[se(" Add Your First Variable ",-1)])]),_:1})])):(g(),x("div",w7,[(g(!0),x(X,null,be(V.value,(j,Ae)=>(g(),x("div",{key:Ae,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},[c("div",S7,[c("h3",_7,F(Ae==="Other"?"Other Variables":Ae.toUpperCase()+" Variables"),1),k(Oe,{variant:"soft",size:"sm",onClick:hf},{default:B(()=>[...v[140]||(v[140]=[se(" + Add ",-1)])]),_:1})]),c("div",C7,[(g(!0),x(X,null,be(j,(Ee,je)=>(g(),x("div",{key:je,class:"space-y-2"},[c("div",A7,[c("div",V7,[Ee.defined&&Ee.used?(g(),he(An,{key:0,variant:"green",class:"text-xs"},{default:B(()=>[...v[141]||(v[141]=[se("",-1)])]),_:1})):!Ee.defined&&Ee.used?(g(),he(An,{key:1,variant:"yellow",class:"text-xs"},{default:B(()=>[...v[142]||(v[142]=[se("",-1)])]),_:1})):(g(),he(An,{key:2,variant:"gray",class:"text-xs"},{default:B(()=>[...v[143]||(v[143]=[se("",-1)])]),_:1}))]),c("div",M7,[c("input",{value:je,onInput:At=>{const vt=At.target.value;vt!==je&&(et.value[vt]=et.value[je]||"",delete et.value[je])},type:"text",placeholder:"VARIABLE_NAME",class:"w-full rounded-md border border-zinc-300 dark:border-zinc-600 bg-white dark:bg-zinc-800 px-3 py-2 text-sm text-zinc-900 dark:text-zinc-100 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500 font-mono uppercase"},null,40,D7),c("div",T7,[qe(c("input",{"onUpdate:modelValue":At=>et.value[je]=At,onInput:At=>Ee.value=et.value[je],type:pf(je)?"text":"password",placeholder:Ee.defined?"value":"(not set)",class:Ve(["w-full rounded-md border border-zinc-300 dark:border-zinc-600 bg-white dark:bg-zinc-800 px-3 py-2 text-sm text-zinc-900 dark:text-zinc-100 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500 font-mono",Qa(je)?"pr-10":""])},null,42,E7),[[kx,et.value[je]]]),Qa(je)?(g(),x("button",{key:0,onClick:At=>s1(je),type:"button",class:"absolute right-2 top-1/2 -translate-y-1/2 text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300"},[pf(je)?(g(),he(ot(Hk),{key:1,class:"h-4 w-4"})):(g(),he(ot(Wk),{key:0,class:"h-4 w-4"}))],8,$7)):R("",!0)])]),k(Oe,{variant:"soft",size:"sm",onClick:At=>t1(je)},{default:B(()=>[...v[144]||(v[144]=[se("  ",-1)])]),_:1},8,["onClick"])]),Ee.used&&Ee.used_in.length>0?(g(),x("div",O7," Used in: "+F(Ee.used_in.join(", ")),1)):Ee.defined&&!Ee.used?(g(),x("div",P7," Not referenced in any files ")):R("",!0)]))),128))])]))),128))])),c("div",j7,[k(Re,{modelValue:ee.value,"onUpdate:modelValue":v[60]||(v[60]=j=>ee.value=j),label:"Regroup .env file by prefix when saving",description:" This will rewrite the entire file grouped by prefix and will lose all comments and original order."},null,8,["modelValue"])]),c("div",R7,[k(Oe,{variant:"secondary",onClick:Jo},{default:B(()=>[...v[145]||(v[145]=[se(" Reset ",-1)])]),_:1}),k(Oe,{variant:"primary",onClick:Xa,disabled:Fe.value},{default:B(()=>[se(F(Fe.value?"Saving...":"Save .env"),1)]),_:1},8,["disabled"])])])):H.value==="raw"?(g(),x("div",L7,[c("div",B7,[v[146]||(v[146]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"}," Raw .env File ",-1)),qe(c("textarea",{"onUpdate:modelValue":v[61]||(v[61]=j=>Se.value=j),class:"w-full h-96 font-mono text-sm rounded-md border border-zinc-300 dark:border-zinc-600 bg-white dark:bg-zinc-800 px-3 py-2 text-zinc-900 dark:text-zinc-100 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500",placeholder:`# Environment variables
# Example:
# DB_HOST=localhost
# DB_PORT=5432
# API_KEY=your_key_here`},null,512),[[Gi,Se.value]]),v[147]||(v[147]=c("p",{class:"mt-2 text-xs text-gray-500 dark:text-gray-400"}," Edit the .env file directly. Comments and formatting will be preserved. ",-1))]),c("div",I7,[k(Oe,{variant:"secondary",onClick:Jo},{default:B(()=>[...v[148]||(v[148]=[se(" Reset ",-1)])]),_:1}),k(Oe,{variant:"primary",onClick:Xa,disabled:Fe.value},{default:B(()=>[se(F(Fe.value?"Saving...":"Save .env"),1)]),_:1},8,["disabled"])])])):R("",!0)]))],512),[[gt,l.value==="env"]])])])):R("",!0),k(yo,{modelValue:E.value,"onUpdate:modelValue":v[67]||(v[67]=j=>E.value=j),title:"Add Package",size:"md",variant:"left"},{actions:B(()=>[k(Oe,{variant:"primary",onClick:Zv,disabled:!J.value.name.trim()},{default:B(()=>[...v[155]||(v[155]=[se(" Add Package ",-1)])]),_:1},8,["disabled"]),k(Oe,{variant:"secondary",onClick:v[66]||(v[66]=j=>E.value=!1)},{default:B(()=>[...v[156]||(v[156]=[se(" Cancel ",-1)])]),_:1})]),default:B(()=>[c("div",U7,[c("div",null,[v[150]||(v[150]=c("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Search CRAN Packages ",-1)),qe(c("input",{"onUpdate:modelValue":v[62]||(v[62]=j=>y.value=j),onKeydown:Qv,type:"text",placeholder:"Type to search CRAN...",class:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 px-3 py-2 text-sm text-gray-900 dark:text-gray-100 font-mono focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500"},null,544),[[Gi,y.value]])]),p.value.length>0?(g(),x("div",N7,[(g(!0),x(X,null,be(p.value,(j,Ae)=>(g(),x("button",{key:j.name,onClick:Ee=>cf(j),onMouseenter:Ee=>A.value=Ae,class:Ve(["w-full px-3 py-2 text-left border-b border-gray-200 dark:border-gray-700 last:border-b-0 transition",A.value===Ae?"bg-sky-50 dark:bg-sky-900/20":"hover:bg-gray-50 dark:hover:bg-gray-800"])},[c("div",F7,[c("div",H7,[c("div",W7,F(j.name),1),j.title?(g(),x("div",q7,F(j.title),1)):R("",!0),j.author?(g(),x("div",G7,F(j.author),1)):R("",!0)]),c("div",K7," v"+F(j.version),1)])],42,z7))),128))])):R("",!0),c("div",null,[v[151]||(v[151]=c("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Package Name ",-1)),qe(c("input",{"onUpdate:modelValue":v[63]||(v[63]=j=>J.value.name=j),type:"text",placeholder:"dplyr",class:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 px-3 py-2 text-sm text-gray-900 dark:text-gray-100 font-mono focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500"},null,512),[[Gi,J.value.name]]),J.value.source==="github"?(g(),x("p",J7," GitHub: user/repo (e.g., tidyverse/dplyr) ")):R("",!0),J.value.source==="bioc"?(g(),x("p",Y7," Bioconductor: name only (e.g., DESeq2) ")):R("",!0)]),c("div",null,[v[154]||(v[154]=c("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Source ",-1)),c("div",X7,[qe(c("select",{"onUpdate:modelValue":v[64]||(v[64]=j=>J.value.source=j),class:"w-full appearance-none rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 pl-3 pr-10 py-2 text-sm text-gray-900 dark:text-gray-100 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500"},[...v[152]||(v[152]=[c("option",{value:"cran"},"CRAN",-1),c("option",{value:"github"},"GitHub",-1),c("option",{value:"bioc"},"Bioconductor",-1)])],512),[[id,J.value.source]]),v[153]||(v[153]=c("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},[c("svg",{class:"h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),c("p",Q7,[J.value.source==="cran"?(g(),x(X,{key:0},[se("CRAN: name only (e.g., dplyr)")],64)):J.value.source==="github"?(g(),x(X,{key:1},[se("GitHub: user/repo (e.g., tidyverse/dplyr)")],64)):J.value.source==="bioc"?(g(),x(X,{key:2},[se("Bioconductor: name only (e.g., DESeq2)")],64)):R("",!0)])]),c("div",null,[k(Re,{modelValue:J.value.auto_attach,"onUpdate:modelValue":v[65]||(v[65]=j=>J.value.auto_attach=j),label:"Auto-attach on scaffold()"},null,8,["modelValue"])])])]),_:1},8,["modelValue"])]))}},eO={class:"rounded-lg bg-gray-50 p-6 space-y-6 dark:bg-gray-800/50"},tO={key:0,class:"space-y-2"},sO={key:0,class:"text-lg font-semibold text-gray-900 dark:text-white"},iO={key:1,class:"text-sm text-gray-600 dark:text-gray-400"},nO={class:"space-y-6"},rO={key:1,class:"flex justify-end pt-4 border-t border-gray-200 dark:border-gray-700"},bt={__name:"SettingsPanel",props:{title:{type:String,default:""},description:{type:String,default:""}},setup(t){return(e,s)=>(g(),x("section",eO,[t.title||t.description?(g(),x("header",tO,[t.title?(g(),x("h2",sO,F(t.title),1)):R("",!0),t.description?(g(),x("p",iO,F(t.description),1)):R("",!0)])):R("",!0),c("div",nO,[kt(e.$slots,"default")]),e.$slots.actions?(g(),x("div",rO,[kt(e.$slots,"actions")])):R("",!0)]))}},oO={class:"space-y-3"},lO={key:0,class:"space-y-1"},aO={key:0,class:"text-sm font-semibold text-gray-900 dark:text-white"},uO={key:1,class:"text-xs text-gray-600 dark:text-gray-400"},dO={class:"space-y-3"},Lt={__name:"SettingsBlock",props:{title:{type:String,default:""},description:{type:String,default:""}},setup(t){return(e,s)=>(g(),x("div",oO,[t.title||t.description?(g(),x("div",lO,[t.title?(g(),x("h3",aO,F(t.title),1)):R("",!0),t.description?(g(),x("p",uO,F(t.description),1)):R("",!0)])):R("",!0),c("div",dO,[kt(e.$slots,"default")])]))}},cO={class:"flex min-h-screen"},fO={class:"w-64 shrink-0 border-r border-gray-200 p-6 dark:border-gray-800"},hO={class:"space-y-1"},pO=["href","onClick"],mO={key:0,class:"ml-4 mt-2 space-y-0.5 border-l border-gray-200 pl-3 dark:border-gray-700"},gO=["href","onClick"],yO={key:1,class:"ml-4 mt-2 space-y-0.5 border-l border-gray-200 pl-3 dark:border-gray-700"},vO=["href","onClick"],bO={class:"mt-6 px-3"},xO={class:"flex-1 p-10 pb-24"},kO={class:"mt-8 space-y-10"},wO={id:"author"},SO={class:"space-y-5"},_O={id:"workflow"},CO={class:"space-y-5"},AO={id:"structure",class:"space-y-8"},VO={key:0,class:"space-y-6"},MO={key:0,class:"space-y-6"},DO={key:0},TO={class:"space-y-5"},EO=["value"],$O={class:"flex flex-wrap items-center justify-between gap-3"},OO={class:"flex flex-wrap gap-2 text-xs font-medium text-gray-600 dark:text-gray-400"},PO=["id"],jO={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},RO={class:"grid grid-cols-2 gap-3"},LO=["id"],BO={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},IO={class:"grid grid-cols-2 gap-3"},UO=["id"],NO={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},zO={class:"grid grid-cols-2 gap-3"},FO=["id"],HO={key:1,class:"space-y-6"},WO={key:0},qO={class:"space-y-5"},GO=["value"],KO={class:"flex flex-wrap items-center justify-between gap-3"},JO={class:"flex flex-wrap gap-2 text-xs font-medium text-gray-600 dark:text-gray-400"},YO=["id"],XO={class:"space-y-3"},QO={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},ZO={class:"grid grid-cols-2 gap-3"},eP=["id"],tP={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},sP={class:"grid gap-4 sm:grid-cols-2"},iP={class:"space-y-3"},nP={class:"space-y-3"},rP=["id"],oP={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},lP={class:"grid gap-4 sm:grid-cols-2"},aP={class:"space-y-3"},uP={class:"space-y-3"},dP=["id"],cP={class:"space-y-3"},fP={key:2,class:"space-y-6"},hP={key:0},pP={class:"space-y-5"},mP=["value"],gP={class:"flex flex-wrap items-center justify-between gap-3"},yP={class:"flex flex-wrap gap-2 text-xs font-medium text-gray-600 dark:text-gray-400"},vP=["id"],bP={class:"space-y-3"},xP=["id"],kP={class:"space-y-4"},wP={class:"space-y-2"},SP={class:"space-y-2"},_P={class:"space-y-2"},CP={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},AP={class:"grid grid-cols-2 gap-3"},VP={key:3,class:"space-y-6"},MP={key:0},DP={class:"space-y-5"},TP=["value"],EP={class:"flex flex-wrap items-center justify-between gap-3"},$P={class:"flex flex-wrap gap-2 text-xs font-medium text-gray-600 dark:text-gray-400"},OP=["id"],PP={class:"space-y-3"},jP=["id"],RP={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},LP={class:"grid grid-cols-2 gap-3"},BP=["id"],IP={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-2"},UP={class:"flex justify-end mt-3"},NP={id:"notebooksScripts"},zP={class:"space-y-8"},FP={id:"notebooksScripts-format"},HP={id:"notebooksScripts-notebook-stub"},WP={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-2"},qP={class:"flex justify-end mt-3"},GP={id:"notebooksScripts-script-stub"},KP={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-2"},JP={class:"flex justify-end mt-3"},YP={id:"ai"},XP={class:"space-y-2"},QP={class:"flex justify-end mt-3"},ZP={id:"git"},ej={class:"grid gap-4 sm:grid-cols-2"},tj={class:"space-y-4"},sj={id:"packages"},ij={class:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"},nj={key:0,class:"space-y-3"},rj={class:"flex flex-col gap-3"},oj={class:"grid gap-3 grid-cols-[1fr_160px]"},lj={class:"flex items-center justify-between"},aj={key:1,class:"text-xs text-gray-500 dark:text-gray-400"},uj={class:"text-sm text-gray-600 dark:text-gray-300 mb-4"},dj={class:"flex gap-3 justify-end"},Fu="author",Ni="project",cj="Settings",fj="Manage defaults shared across new projects.",hj={__name:"SettingsView",setup(t){const e=$a(),s=Ea(),i=_r(),n=[{id:"author",label:"Author Information",slug:"author-information"},{id:"workflow",label:"Editor & Workflow",slug:"editor-workflow"},{id:"structure",label:"Project Defaults",slug:"project-defaults"},{id:"notebooksScripts",label:"Notebooks & Scripts",slug:"notebooks-scripts"},{id:"ai",label:"AI Assistants",slug:"ai-assistants"},{id:"git",label:"Git & Hooks",slug:"git-hooks"},{id:"packages",label:"Packages & Dependencies",slug:"packages-dependencies"}],r=Object.fromEntries(n.map(({id:K,slug:S})=>[K,S])),o=Object.fromEntries(n.map(({id:K,slug:S})=>[S,K])),l={project:{label:"Standard Data Project",description:"General-purpose analysis project with notebooks, scripts, and shared outputs.",directories:{functions:"R/functions",notebooks:"notebooks",scripts:"scripts",inputs_raw:"inputs/raw",inputs_intermediate:"inputs/intermediate",inputs_final:"inputs/final",reference:"reference",outputs_notebooks:"outputs/notebooks",outputs_tables:"outputs/tables",outputs_figures:"outputs/figures",outputs_models:"outputs/models",outputs_reports:"outputs/reports",cache:"outputs/cache",scratch:"scratch"},quarto:{render_dir:"outputs/notebooks"},notebook_template:"notebook",extra_directories:[]},project_sensitive:{label:"Privacy-First Project",description:"Projects handling PHI/PII with dedicated private/public data flows.",directories:{functions:"R/functions",notebooks:"notebooks",scripts:"scripts",inputs_private_raw:"inputs/private/raw",inputs_private_intermediate:"inputs/private/intermediate",inputs_private_final:"inputs/private/final",inputs_public_raw:"inputs/public/raw",inputs_public_intermediate:"inputs/public/intermediate",inputs_public_final:"inputs/public/final",outputs_private_tables:"outputs/private/tables",outputs_private_figures:"outputs/private/figures",outputs_private_models:"outputs/private/models",outputs_private_docs:"outputs/private/docs",outputs_private_data_final:"outputs/private/data_final",outputs_public_tables:"outputs/public/tables",outputs_public_figures:"outputs/public/figures",outputs_public_models:"outputs/public/models",outputs_public_docs:"outputs/public/docs",outputs_public_data_final:"outputs/public/data_final",cache:"outputs/private/cache",scratch:"scratch"},quarto:{render_dir:"outputs/public/docs"},notebook_template:"notebook",extra_directories:[]},presentation:{label:"Presentation",description:"Single talk or slide deck with minimal analysis scaffolding.",directories:{presentation_source:"presentation.qmd",rendered_slides:"."},quarto:{render_dir:"."},notebook_template:"notebook",extra_directories:[]},course:{label:"Course",description:"Courses with modules, assignments, and lecture materials.",directories:{data:"data",slides:"slides",assignments:"assignments",course_docs:"course_docs",readings:"readings",notebooks:"modules"},quarto:{render_dir:"course_docs"},notebook_template:"notebook",extra_directories:[]}},a=fe(JSON.parse(JSON.stringify(l))),d={project:"project",project_sensitive:"sensitive-project",presentation:"presentation",course:"course"},u=Object.fromEntries(Object.entries(d).map(([K,S])=>[S,K])),f={project:"Tune the standard analysis layoutfunctions, notebooks, inputs, and outputs live here by default.",project_sensitive:"Private and public inputs stay separate so sensitive data never leaves restricted folders.",presentation:"Control where your presentation source lives and where rendered slides are written.",course:"Adjust the folders used for slides, assignments, readings, and course documentation."},h=K=>String(K).replace(/_/g," ").replace(/\b\w/g,S=>S.toUpperCase()),m=fe(null),w=[{key:"functions",label:"Functions",hint:"R files here are sourced by scaffold(), so helper functions are available in every project session."},{key:"notebooks",label:"Notebooks",hint:"Where Quarto or R Markdown analysis notebooks live."},{key:"scripts",label:"Scripts",hint:"Reusable R scripts, job runners, or automation tasks."},{key:"reference",label:"Reference materials",hint:"Codebooks, documentation, and other background resources."}],_=[{key:"inputs_raw",label:"Raw data",hint:"Read-only exports from source systems."},{key:"inputs_intermediate",label:"Intermediate data",hint:"Data after light cleaning or pre-processing steps."},{key:"inputs_final",label:"Analysis-ready data",hint:"Final inputs ready for modeling or reporting."}],C=[{key:"outputs_notebooks",label:"Rendered notebooks",hint:"Compiled Quarto/R Markdown notebooks."},{key:"outputs_tables",label:"Tables",hint:"Publishable tables ready for reports or manuscripts."},{key:"outputs_figures",label:"Figures",hint:"Final plots and graphics."},{key:"outputs_models",label:"Models",hint:"Serialized models or model summaries."},{key:"outputs_reports",label:"Reports",hint:"Final reports and deliverables ready for publication."}],M=[{key:"cache",label:"Cache",hint:"Temporary artifacts (gitignored)."},{key:"scratch",label:"Scratch",hint:"Short-lived explorations (gitignored)."}],U=[{privateKey:"inputs_private_raw",publicKey:"inputs_public_raw",label:"Raw data",privateLabel:"Raw data (private)",publicLabel:"Raw data (public)"},{privateKey:"inputs_private_intermediate",publicKey:"inputs_public_intermediate",label:"Intermediate data",privateLabel:"Intermediate data (private)",publicLabel:"Intermediate data (public)"},{privateKey:"inputs_private_final",publicKey:"inputs_public_final",label:"Analysis-ready data",privateLabel:"Analysis-ready data (private)",publicLabel:"Analysis-ready data (public)"}],$=[{privateKey:"outputs_private_tables",publicKey:"outputs_public_tables",label:"Tables",privateLabel:"Tables (private)",publicLabel:"Tables (public)"},{privateKey:"outputs_private_figures",publicKey:"outputs_public_figures",label:"Figures",privateLabel:"Figures (private)",publicLabel:"Figures (public)"},{privateKey:"outputs_private_models",publicKey:"outputs_public_models",label:"Models",privateLabel:"Models (private)",publicLabel:"Models (public)"},{privateKey:"outputs_private_docs",publicKey:"outputs_public_docs",label:"Docs & reports",privateLabel:"Docs (private)",publicLabel:"Docs (public)"},{privateKey:"outputs_private_data_final",publicKey:"outputs_public_data_final",label:"Final data",privateLabel:"Final data (private)",publicLabel:"Final data (public)"}],D=(K,S)=>m.value?.project_types?.[K]?.directories?.[S]||{},N=(K,S)=>S.map(b=>{const G=D(K,b.key);return{key:b.key,label:G.label||b.label,hint:G.hint||b.hint||""}}),q=le(()=>N("project",w)),P=le(()=>N("project",_)),ne=le(()=>N("project",C)),te=le(()=>N("project",M)),pe=K=>K.map(S=>{const b=D("project_sensitive",S.privateKey),G=D("project_sensitive",S.publicKey);return{...S,privateLabel:b.label||S.privateLabel,publicLabel:G.label||S.publicLabel}}),Q=le(()=>pe(U)),z=le(()=>pe($)),ae=le(()=>{const K=V.value;return!K||!m.value?.project_types?.[K]?.settings?[]:m.value.project_types[K].settings}),re={include_inputs:"inputs",include_scripts:"scripts",include_functions:"R/functions"},ye=le(()=>{const K=m.value?.project_types?.presentation?.optional_toggles||{};return{inputs:K.include_inputs?.default_path||re.include_inputs,scripts:K.include_scripts?.default_path||re.include_scripts,functions:K.include_functions?.default_path||re.include_functions}}),E={"CLAUDE.md":"ai_claude","AGENTS.md":"ai_agents",".github/copilot-instructions.md":"ai_copilot"},y=[{id:"claude",label:"Claude Code",description:"Anthropic's IDE-focused assistant."},{id:"copilot",label:"GitHub Copilot",description:"Complements VS Code and JetBrains editors."},{id:"agents",label:"Multi-Agent (OpenAI Codex, Cursor, etc.)",description:"Shared instructions for multi-model orchestrators."}],p=fe(Fu),I=fe(!1),A=fe({projects_root:"",project_types:JSON.parse(JSON.stringify(a.value)),author:{name:"",email:"",affiliation:""},defaults:{project_type:"project",notebook_format:"quarto",ide:"vscode",use_git:!0,use_renv:!1,seed:"",seed_on_scaffold:!1,ai_support:!0,ai_assistants:["claude"],ai_canonical_file:"CLAUDE.md",directories:JSON.parse(JSON.stringify(a.value.project.directories)),git_hooks:{ai_sync:!1,data_security:!1,check_sensitive_dirs:!1},packages:{use_renv:!1,default_packages:[{name:"dplyr",source:"cran",auto_attach:!0},{name:"ggplot2",source:"cran",auto_attach:!0}]}},git:{user_name:"",user_email:""},privacy:{secret_scan:!1,gitignore_template:"gitignore"}}),J=ci({includeInputs:!1,includeScripts:!1,includeFunctions:!1}),ge=ci({claude:!0,agents:!1,copilot:!1}),Ge=ci({open:!1,name:"",title:"",description:"",contents:"",loading:!1}),Ue=ci({notebook:{loading:!1,contents:""},script:{loading:!1,contents:""},canonical:{loading:!1,contents:""},gitignore_project:{loading:!1,contents:""},gitignore_project_sensitive:{loading:!1,contents:""},gitignore_course:{loading:!1,contents:""},gitignore_presentation:{loading:!1,contents:""}}),Ct=le(()=>Object.entries(A.value.project_types||{})),et=le(()=>Ct.value.map(([K,S])=>({key:K,label:S.label||h(K),slug:d[K]||K}))),V=le(()=>{const K=i.params.subsection;return u[K]||Ni}),Se=le(()=>{const K=V.value;return K&&A.value.project_types?.[K]||null}),ke={author:{title:"Author Information",description:"Defaults that populate README files and notebook headers when scaffold() runs."},workflow:{title:"Editor & Workflow",description:"Control how Framework scaffolds projects in your preferred tools."},structure:{title:"Project Defaults",description:"Customize the directory layout, templates, and scaffolding for each project type."},notebooksScripts:{title:"Notebooks & Scripts",description:"Choose default notebook formats and edit the starter stubs Framework ships with."},ai:{title:"AI Assistants",description:"Manage assistant support, canonical context files, and sync hooks."},git:{title:"Git & Hooks",description:"Configure repository initialization, commit identity, git hooks, and security scanning."},packages:{title:"Packages & Dependencies",description:"Define dependency defaults and auto-attach behavior for new projects."}},$e=le(()=>ke[p.value]||{title:cj,description:fj}),Fe=le(()=>p.value==="structure"&&Se.value?Se.value.label||h(V.value):$e.value.title),T=le(()=>p.value==="structure"&&Se.value&&(Se.value.description||f[V.value])||$e.value.description);le(()=>A.value.privacy.gitignore_template||"gitignore"),le(()=>{const K=new Set,S=A.value.project_types||{},b=S.project_sensitive?.directories||{};for(const oe of Object.values(b))typeof oe=="string"&&oe.trim()&&oe.includes("private")&&K.add(oe.replace(/^\/+/,""));const G=S.project?.directories||{};return["cache","scratch"].forEach(oe=>{const de=G[oe];typeof de=="string"&&de.trim()&&K.add(de.replace(/^\/+/,""))}),Array.from(K).sort()});const O=le(()=>E[A.value.defaults.ai_canonical_file]||"ai_claude"),H=[{id:"notebooksScripts-format",label:"Defaults"},{id:"notebooksScripts-notebook-stub",label:"Notebook Stub"},{id:"notebooksScripts-script-stub",label:"Script Stub"}],ee=(K,S)=>{const b={section:K||void 0};return S&&(b.subsection=S),s.resolve({name:"settings",params:b}).href},Z=(K,S)=>{const b={};K&&(b.section=K),S&&(b.subsection=S);const G=i.params.section||void 0,oe=i.params.subsection||void 0,de=b.section||void 0,Ye=b.subsection||void 0;return G===de&&oe===Ye?Promise.resolve():s.replace({name:"settings",params:b}).catch(()=>{})};Je(()=>i.params.section,K=>{if(!K){Z(r[Fu],void 0);return}const S=o[K]||Fu;if(p.value=S,!o[K]){Z(r[S],S==="structure"?d[Ni]:void 0);return}S==="structure"&&!i.params.subsection&&Z("project-defaults",d[Ni])},{immediate:!0}),Je(()=>i.params.subsection,K=>{p.value==="structure"&&(!K||!u[K])&&Z("project-defaults",d[Ni])});const Y=(K,S="")=>Array.isArray(K)?K.length>0?Y(K[0],S):S:K??S,me=(K,S=!1)=>{const b=Y(K,S);return typeof b=="boolean"?b:typeof b=="string"?["true","1","yes"].includes(b.toLowerCase()):!!b},ve=K=>Array.isArray(K)?K.flatMap(S=>Array.isArray(S)?S:[S]).filter(Boolean):[],ce=(K={},S={})=>{const b={...S};for(const[G,oe]of Object.entries(K||{})){const de=Y(oe,null);de===null||de===""?delete b[G]:b[G]=de}return b},ue=(K,S)=>{const b=a.value[K]||{directories:{},quarto:{},extra_directories:[]};return{label:Y(S?.label,b.label||h(K)),description:Y(S?.description,b.description||""),ggplot_theme:Y(S?.ggplot_theme,"theme_minimal"),set_theme_on_scaffold:me(S?.set_theme_on_scaffold,!0),directories:ce(S?.directories,b.directories),quarto:{render_dir:Y(S?.quarto?.render_dir,b.quarto?.render_dir||".")},notebook_template:Y(S?.notebook_template,b.notebook_template||"notebook"),extra_directories:Array.isArray(S?.extra_directories)?S.extra_directories:b.extra_directories||[]}},Pe=K=>{if(!K||!K.project_types)return;const S={};for(const[b,G]of Object.entries(K.project_types)){const oe=l[b]||{},de={};for(const[Ye,$t]of Object.entries(G.directories||{})){const Fn=oe.directories?.[Ye]||"";de[Ye]=Y($t?.default,Fn)}S[b]={label:Y(G.label,oe.label||h(b)),description:Y(G.description,oe.description||""),directories:de,quarto:{render_dir:Y(G.quarto?.render_dir?.default,oe.quarto?.render_dir||".")},notebook_template:Y(G.notebook_template?.default,oe.notebook_template||"notebook"),optional_toggles:G.optional_toggles||{}}}for(const[b,G]of Object.entries(l))S[b]||(S[b]=JSON.parse(JSON.stringify(G)));a.value=S},we=(K,S,b)=>{if(!A.value.project_types?.presentation)return;const G=A.value.project_types.presentation.directories||(A.value.project_types.presentation.directories={});S?(!G[K]||G[K]==="")&&(G[K]=b):Object.prototype.hasOwnProperty.call(G,K)&&delete G[K]},Te=async(K,S=K)=>{if(Ue[S]){Ue[S].loading=!0;try{const b=await fetch(`/api/templates/${K}`);if(!b.ok)throw new Error("Request failed");const G=await b.json();Ue[S].contents=G.contents||""}catch{e.error("Template Error","Unable to load template contents.")}finally{Ue[S].loading=!1}}},Be=async(K,S=K)=>{if(Ue[S])try{if(!(await fetch(`/api/templates/${K}`,{method:"DELETE"})).ok)throw new Error("Request failed");await Te(K,S),e.success("Template Reset","Restored the packaged default template.")}catch{e.error("Reset Failed","Unable to restore the default template.")}},He=()=>{Be(O.value,"canonical")};Je(ge,K=>{const S=[];K.claude&&S.push("claude"),K.copilot&&S.push("copilot"),K.agents&&S.push("agents"),A.value.defaults.ai_assistants=S},{deep:!0}),Je(()=>A.value.defaults.ai_canonical_file,async()=>{await Te(O.value,"canonical")}),Je(()=>A.value.defaults.git_hooks.data_security,K=>{A.value.privacy.secret_scan=K}),Je(()=>A.value.privacy.secret_scan,K=>{A.value.defaults.git_hooks.data_security=K}),Je(()=>J.includeInputs,K=>{we("inputs",K,ye.value.inputs)}),Je(()=>J.includeScripts,K=>{we("scripts",K,ye.value.scripts)}),Je(()=>J.includeFunctions,K=>{we("functions",K,ye.value.functions)});const tt=K=>{(K.metaKey||K.ctrlKey)&&K.key==="s"&&(K.preventDefault(),Go())},Ne=(K,S)=>{const b=A.value.project_types?.[K]?.directories;return!!b&&Object.prototype.hasOwnProperty.call(b,S)},St=K=>{a.value[K]&&(A.value.project_types[K]=JSON.parse(JSON.stringify(a.value[K])),K==="presentation"&&(J.includeInputs=!1,J.includeScripts=!1,J.includeFunctions=!1))},Rt=async()=>{try{Ge.loading=!0,await fetch(`/api/templates/${Ge.name}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:Ge.contents})}),e.success("Template Saved","Your changes have been saved."),Ge.open=!1}catch{e.error("Save Failed","Could not save template changes.")}finally{Ge.loading=!1}},is=()=>{A.value.defaults.packages.default_packages||(A.value.defaults.packages.default_packages=[]),A.value.defaults.packages.default_packages.push({name:"",source:"cran",auto_attach:!1})},ns=K=>{A.value.defaults.packages.default_packages.splice(K,1)},rt=K=>{const S=document.getElementById(K);S&&S.scrollIntoView({behavior:"smooth",block:"start"})},vi=K=>{switch(K){case"project":return`project-${K}-inputs`;case"project_sensitive":return`project-${K}-workspaces`;case"presentation":return`project-${K}-primary`;case"course":return`project-${K}-core`;default:return`project-${K}`}},Ut=async K=>{const S=n.find(G=>G.id===K);if(!S)return;const b=S.id==="structure"?d[V.value||Ni]:void 0;if(await Z(S.slug,b),await Tn(),S.id==="structure"){const G=V.value||Ni;rt(vi(G))}else rt(S.id)},rs=async K=>{const S=d[K]||d[Ni];await Z("project-defaults",S),await Tn(),rt(vi(K))};Je(()=>V.value,(K,S)=>{p.value==="structure"&&(!K||K===S||Tn(()=>rt(vi(K))))});const zn=async()=>{try{const[K,S]=await Promise.all([fetch("/api/settings/catalog"),fetch("/api/settings/get")]);if(!K.ok)throw new Error("Failed to load settings catalog");if(!S.ok)throw new Error("Failed to load settings payload");const b=await K.json();m.value=b,Pe(b);const G=await S.json();if(A.value.projects_root=Y(G.projects_root,""),G.project_types){const oe={},de={...a.value,...G.project_types};for(const[Ye,$t]of Object.entries(de))oe[Ye]=ue(Ye,$t);A.value.project_types=oe}if(J.includeInputs=Ne("presentation","inputs"),J.includeScripts=Ne("presentation","scripts"),J.includeFunctions=Ne("presentation","functions"),G.author&&(A.value.author={name:Y(G.author.name,""),email:Y(G.author.email,""),affiliation:Y(G.author.affiliation,"")}),G.defaults){const oe=G.defaults;A.value.defaults.project_type=Y(oe.project_type,"project"),A.value.defaults.notebook_format=Y(oe.notebook_format,"quarto"),A.value.defaults.ide=Y(oe.ide,"vscode"),A.value.defaults.use_git=me(oe.use_git,!0),A.value.defaults.use_renv=me(oe.use_renv,!1),A.value.defaults.seed_on_scaffold=me(oe.seed_on_scaffold,!1),A.value.defaults.seed=Y(oe.seed,""),A.value.defaults.ai_support=me(oe.ai_support,!0),A.value.defaults.ai_canonical_file=Y(oe.ai_canonical_file,"CLAUDE.md");const de=ve(oe.ai_assistants);de.length&&(A.value.defaults.ai_assistants=de,ge.claude=de.includes("claude"),ge.copilot=de.includes("copilot"),ge.agents=de.includes("agents")),oe.git_hooks&&(A.value.defaults.git_hooks={...A.value.defaults.git_hooks,...Object.fromEntries(Object.entries(oe.git_hooks).map(([Ye,$t])=>[Ye,me($t,A.value.defaults.git_hooks[Ye])]))},A.value.privacy.secret_scan=A.value.defaults.git_hooks.data_security),console.log("[DEBUG LOAD] defaults.packages:",oe.packages),console.log("[DEBUG LOAD] Is array?",Array.isArray(oe.packages)),console.log("[DEBUG LOAD] Type:",typeof oe.packages),oe.packages&&(oe.packages.default_packages?(console.log("[DEBUG LOAD] Loading packages from nested structure (default_packages)"),A.value.defaults.packages={use_renv:me(oe.packages.use_renv,!1),default_packages:(oe.packages.default_packages||[]).map(Ye=>({name:Y(Ye.name,""),source:Y(Ye.source,"cran"),auto_attach:me(Ye.auto_attach,!1)}))},console.log("[DEBUG LOAD] Loaded packages:",A.value.defaults.packages)):Array.isArray(oe.packages)&&(console.log("[DEBUG LOAD] Loading packages from legacy array structure"),A.value.defaults.packages={use_renv:!1,default_packages:oe.packages.map(Ye=>({name:Y(Ye.name,""),source:Y(Ye.source,"cran"),auto_attach:me(Ye.auto_attach,!1)}))},console.log("[DEBUG LOAD] Loaded packages:",A.value.defaults.packages))),oe.directories?A.value.defaults.directories={...A.value.defaults.directories,...Object.fromEntries(Object.entries(oe.directories).map(([Ye,$t])=>[Ye,Y($t,A.value.defaults.directories[Ye]||"")]))}:A.value.project_types.project&&(A.value.defaults.directories={...A.value.defaults.directories,...A.value.project_types.project.directories})}G.git&&(A.value.git={user_name:Y(G.git.user_name,""),user_email:Y(G.git.user_email,"")}),G.privacy?(A.value.privacy.secret_scan=me(G.privacy.secret_scan,A.value.defaults.git_hooks.data_security),A.value.privacy.gitignore_template=Y(G.privacy.gitignore_template,"gitignore")):A.value.privacy.secret_scan=A.value.defaults.git_hooks.data_security,await Te(O.value,"canonical")}catch(K){console.error("Failed to load settings:",K),e.error("Load Failed","Unable to load current settings.")}},xs=(K,S)=>{const b=A.value.project_types[K];return!b||!Array.isArray(b.extra_directories)?[]:b.extra_directories.filter(G=>G.type===S)},Qs=(K,S,b)=>{const G=A.value.project_types[K];if(!G)return;Array.isArray(G.extra_directories)||(G.extra_directories=[]);const oe=G.extra_directories.filter(Ye=>Ye&&Ye.type!==S),de=b.map(Ye=>({...Ye,type:S}));G.extra_directories=[...oe,...de]},Ms=(K,S,b,G)=>{if(!K)return null;if(!/^[a-zA-Z0-9_]+$/.test(K))return"Only letters, numbers, and underscores allowed";const oe=A.value.project_types[S];if(!oe||!Array.isArray(oe.extra_directories))return null;if(oe.extra_directories.filter(bi=>bi.type===b).findIndex((bi,Wa)=>Wa!==G&&bi.key===K)!==-1)return"Duplicate key within this section";const Fn=oe.extra_directories.filter(bi=>bi.type!==b).find(bi=>bi.key===K);return Fn?`Key already used in ${Fn.type} directories`:null},ks=K=>!K||K.trim()===""?null:K.startsWith("/")?"Must be relative (no leading slash)":K.includes("..")?"Path traversal not allowed (..)":null,Go=async()=>{try{I.value=!0;const K=A.value.projects_root?.trim()||"",S=JSON.parse(JSON.stringify(A.value));S.projects_root=K||null,S.defaults.seed=S.defaults.seed===""?null:S.defaults.seed,console.log("[DEBUG SAVE] Before filter - packages:",S.defaults.packages),S.defaults.packages&&S.defaults.packages.default_packages&&(S.defaults.packages.default_packages=(S.defaults.packages.default_packages||[]).filter(de=>de.name&&de.name.trim()!=="")),console.log("[DEBUG SAVE] After filter - packages:",S.defaults.packages),S.defaults.directories=S.project_types?.project?.directories||S.defaults.directories,S.defaults.git_hooks.data_security=S.privacy.secret_scan,S.git=S.git||{user_name:"",user_email:""};for(const de in S.project_types){const Ye=S.project_types[de];Ye.extra_directories&&Array.isArray(Ye.extra_directories)&&(Ye.extra_directories=Ye.extra_directories.filter($t=>$t.key&&$t.key.trim()!==""&&$t.label&&$t.label.trim()!==""&&$t.path&&$t.path.trim()!==""&&$t.type&&$t.type.trim()!==""))}console.log("[DEBUG SAVE] Sending payload to API:",S),console.log("[DEBUG SAVE] Payload.defaults.packages:",S.defaults.packages);const b=await fetch("/api/settings/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)});if(console.log("[DEBUG SAVE] API response status:",b.status,b.ok),!b.ok){const de=await b.text();throw console.error("[DEBUG SAVE] API error response:",de),new Error("Failed to save settings")}const G=await b.json();if(console.log("[DEBUG SAVE] API response data:",G),(await Promise.all([fetch("/api/templates/notebook",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:Ue.notebook.contents})}),fetch("/api/templates/script",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:Ue.script.contents})}),fetch("/api/templates/gitignore-project",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:Ue.gitignore_project.contents})}),fetch("/api/templates/gitignore-project_sensitive",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:Ue.gitignore_project_sensitive.contents})}),fetch("/api/templates/gitignore-course",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:Ue.gitignore_course.contents})}),fetch("/api/templates/gitignore-presentation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:Ue.gitignore_presentation.contents})})])).some(de=>!de.ok))throw new Error("Template save failed");e.success("Settings Saved","Your global defaults were updated.")}catch(K){console.error("Failed to save settings:",K),e.error("Save Failed",K?.message||"Review your changes and try again.")}finally{I.value=!1}};return es(()=>{zn(),Te("notebook"),Te("script"),Te("gitignore-project","gitignore_project"),Te("gitignore-project_sensitive","gitignore_project_sensitive"),Te("gitignore-course","gitignore_course"),Te("gitignore-presentation","gitignore_presentation"),Te(O.value,"canonical"),window.addEventListener("keydown",tt)}),Sr(()=>{window.removeEventListener("keydown",tt)}),(K,S)=>(g(),x("div",cO,[c("nav",fO,[S[72]||(S[72]=c("h2",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Settings",-1)),c("div",hO,[(g(),x(X,null,be(n,b=>c("div",{key:b.id},[c("a",{href:ee(b.slug,b.id==="structure"?d[V.value]||d[Ni]:void 0),onClick:ft(G=>Ut(b.id),["prevent"]),class:Ve(["block px-3 py-2 rounded-md text-sm transition",p.value===b.id?"bg-sky-50 text-sky-700 font-medium dark:bg-sky-900/20 dark:text-sky-400":"text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-800"])},F(b.label),11,pO),b.id==="structure"&&p.value==="structure"?(g(),x("div",mO,[(g(!0),x(X,null,be(et.value,G=>(g(),x("a",{key:G.key,href:ee("project-defaults",G.slug),onClick:ft(oe=>rs(G.key),["prevent"]),class:Ve(["block rounded-md py-1 pl-4 pr-2 text-xs font-medium transition",V.value===G.key?"bg-sky-100 text-sky-700 dark:bg-sky-900/30 dark:text-sky-300":"text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-800"])},F(G.label),11,gO))),128))])):b.id==="notebooksScripts"&&p.value==="notebooksScripts"?(g(),x("div",yO,[(g(),x(X,null,be(H,G=>c("a",{key:G.id,href:`#${G.id}`,onClick:ft(oe=>rt(G.id),["prevent"]),class:"block rounded-md py-1 pl-4 pr-2 text-xs font-medium text-gray-600 transition hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-800"},F(G.label),9,vO)),64))])):R("",!0)])),64))]),c("div",bO,[k(Oe,{variant:"primary",size:"md",disabled:I.value,onClick:Go,class:"w-full"},{default:B(()=>[se(F(I.value?"Saving":"Save Changes"),1)]),_:1},8,["disabled"])])]),c("div",xO,[k(Cr,{title:Fe.value,description:T.value},null,8,["title","description"]),c("div",kO,[qe(c("div",wO,[k(bt,{description:"Used as defaults when scaffold() creates README files and notebook headers, so every project starts with the right attribution."},{default:B(()=>[k(Lt,null,{default:B(()=>[c("div",SO,[k(W,{modelValue:A.value.author.name,"onUpdate:modelValue":S[0]||(S[0]=b=>A.value.author.name=b),label:"Your Name",placeholder:"Your Name"},null,8,["modelValue"]),k(W,{modelValue:A.value.author.email,"onUpdate:modelValue":S[1]||(S[1]=b=>A.value.author.email=b),type:"email",label:"Email",placeholder:"your.email@example.com"},null,8,["modelValue"]),k(W,{modelValue:A.value.author.affiliation,"onUpdate:modelValue":S[2]||(S[2]=b=>A.value.author.affiliation=b),label:"Affiliation",placeholder:"Organization"},null,8,["modelValue"])])]),_:1})]),_:1})],512),[[gt,p.value==="author"]]),qe(c("div",_O,[k(bt,{description:"Control how Framework scaffolds projects in your preferred tools."},{default:B(()=>[k(Lt,null,{default:B(()=>[c("div",CO,[k(W,{modelValue:A.value.projects_root,"onUpdate:modelValue":S[3]||(S[3]=b=>A.value.projects_root=b),label:"Default Projects Directory",placeholder:"~/code",monospace:"",hint:"New projects default to this parent directory. Leave empty to choose a full path each time."},null,8,["modelValue"]),k(_s,{modelValue:A.value.defaults.ide,"onUpdate:modelValue":S[4]||(S[4]=b=>A.value.defaults.ide=b),label:"Primary Editor"},{default:B(()=>[...S[73]||(S[73]=[c("option",{value:"vscode"},"Positron / VS Code",-1),c("option",{value:"rstudio"},"RStudio",-1),c("option",{value:"rstudio,vscode"},"Both",-1),c("option",{value:"none"},"Other",-1)])]),_:1},8,["modelValue"]),k(Re,{modelValue:A.value.defaults.seed_on_scaffold,"onUpdate:modelValue":S[5]||(S[5]=b=>A.value.defaults.seed_on_scaffold=b),label:"Call set.seed() when scaffold() runs",description:"Ensures deterministic behavior when a project is loaded."},null,8,["modelValue"]),k(W,{modelValue:A.value.defaults.seed,"onUpdate:modelValue":S[6]||(S[6]=b=>A.value.defaults.seed=b),label:"Default Random Seed",placeholder:"e.g., 1234",hint:"Set to 1234 when automatic seeding is enabled and no value is provided."},null,8,["modelValue"])])]),_:1})]),_:1})],512),[[gt,p.value==="workflow"]]),qe(c("div",AO,[Se.value?(g(),x("div",VO,[V.value==="project"?(g(),x("div",MO,[ae.value&&ae.value.length>0?(g(),x("div",DO,[k(bt,{title:"Project Settings",description:"Default settings applied when creating new projects of this type."},{default:B(()=>[k(Lt,null,{default:B(()=>[c("div",TO,[(g(!0),x(X,null,be(ae.value,b=>(g(),x(X,{key:b.id},[b.control==="toggle"?(g(),he(Re,{key:0,modelValue:A.value.project_types[V.value][b.id],"onUpdate:modelValue":G=>A.value.project_types[V.value][b.id]=G,label:b.label,description:b.description},null,8,["modelValue","onUpdate:modelValue","label","description"])):b.control==="select"?(g(),he(_s,{key:1,modelValue:A.value.project_types[V.value][b.id],"onUpdate:modelValue":G=>A.value.project_types[V.value][b.id]=G,label:b.label,hint:b.hint},{default:B(()=>[(g(!0),x(X,null,be(b.options,G=>(g(),x("option",{key:G.value,value:G.value},F(G.label),9,EO))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","label","hint"])):b.control==="text"?(g(),he(W,{key:2,modelValue:A.value.project_types[V.value][b.id],"onUpdate:modelValue":G=>A.value.project_types[V.value][b.id]=G,label:b.label,hint:b.hint,placeholder:b.placeholder},null,8,["modelValue","onUpdate:modelValue","label","hint","placeholder"])):R("",!0)],64))),128))])]),_:1})]),_:1})])):R("",!0),c("div",$O,[c("div",OO,[c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:S[7]||(S[7]=b=>rt(`project-${V.value}-inputs`))}," Inputs "),c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:S[8]||(S[8]=b=>rt(`project-${V.value}-workspaces`))}," Workspaces "),c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:S[9]||(S[9]=b=>rt(`project-${V.value}-outputs`))}," Outputs "),c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:S[10]||(S[10]=b=>rt(`project-${V.value}-utility`))}," Utility "),c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:S[11]||(S[11]=b=>rt(`project-${V.value}-gitignore`))}," .gitignore ")]),k(Oe,{variant:"secondary",size:"sm",class:"mt-3 sm:mt-0",onClick:S[12]||(S[12]=b=>St(V.value))},{default:B(()=>[...S[74]||(S[74]=[se(" Reset to Defaults ",-1)])]),_:1})]),c("div",{id:`project-${V.value}-inputs`},[k(bt,{title:"Inputs",description:"Define the read-only locations where raw and prepared data live."},{default:B(()=>[(g(!0),x(X,null,be(P.value,b=>(g(),x(X,{key:b.key},[Ne(V.value,b.key)?(g(),he(W,{key:0,modelValue:A.value.project_types[V.value].directories[b.key],"onUpdate:modelValue":G=>A.value.project_types[V.value].directories[b.key]=G,label:b.label,hint:b.hint,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label","hint"])):R("",!0)],64))),128)),c("div",jO,[S[75]||(S[75]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Input Directories",-1)),k(Vt,{"model-value":xs(V.value,"input"),"onUpdate:modelValue":S[13]||(S[13]=b=>Qs(V.value,"input",b)),"add-label":"Add Input Directory","default-item":()=>({key:"",label:"",path:"",type:"input",_id:Date.now()})},{default:B(({item:b,index:G,update:oe})=>[c("div",RO,[k(W,{"model-value":b.key,"onUpdate:modelValue":de=>oe("key",de),label:"Key",placeholder:"e.g., inputs_archive",error:Ms(b.key,V.value,"input",G),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),k(W,{"model-value":b.label,"onUpdate:modelValue":de=>oe("label",de),label:"Label",placeholder:"e.g., Archive",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":b.path,"onUpdate:modelValue":de=>oe("path",de),label:"Path",placeholder:"e.g., inputs/archive",error:ks(b.path),prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])])]),_:1})],8,PO),c("div",{id:`project-${V.value}-workspaces`},[k(bt,{title:"Workspaces",description:"Functions, notebooks, and scripts scaffolded into every project."},{default:B(()=>[(g(!0),x(X,null,be(q.value,b=>(g(),x(X,{key:b.key},[Ne(V.value,b.key)?(g(),he(W,{key:0,modelValue:A.value.project_types[V.value].directories[b.key],"onUpdate:modelValue":G=>A.value.project_types[V.value].directories[b.key]=G,label:b.label,hint:b.hint,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label","hint"])):R("",!0)],64))),128)),c("div",BO,[S[76]||(S[76]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Workspace Directories",-1)),k(Vt,{"model-value":xs(V.value,"workspace"),"onUpdate:modelValue":S[14]||(S[14]=b=>Qs(V.value,"workspace",b)),"add-label":"Add Workspace Directory","default-item":()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:B(({item:b,index:G,update:oe})=>[c("div",IO,[k(W,{"model-value":b.key,"onUpdate:modelValue":de=>oe("key",de),label:"Key",placeholder:"e.g., tests",error:Ms(b.key,V.value,"workspace",G),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),k(W,{"model-value":b.label,"onUpdate:modelValue":de=>oe("label",de),label:"Label",placeholder:"e.g., Tests",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":b.path,"onUpdate:modelValue":de=>oe("path",de),label:"Path",placeholder:"e.g., tests",error:ks(b.path),prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])])]),_:1})],8,LO),c("div",{id:`project-${V.value}-outputs`},[k(bt,{title:"Outputs",description:"Outputs are public by default so results are easy to share."},{default:B(()=>[(g(!0),x(X,null,be(ne.value,b=>(g(),x(X,{key:b.key},[Ne(V.value,b.key)?(g(),he(W,{key:0,modelValue:A.value.project_types[V.value].directories[b.key],"onUpdate:modelValue":G=>A.value.project_types[V.value].directories[b.key]=G,label:b.label,hint:b.hint,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label","hint"])):R("",!0)],64))),128)),k(W,{modelValue:A.value.project_types[V.value].quarto.render_dir,"onUpdate:modelValue":S[15]||(S[15]=b=>A.value.project_types[V.value].quarto.render_dir=b),label:"Notebook output directory",hint:"Rendered notebooks and reports are written here by default.",prefix:"/",monospace:""},null,8,["modelValue"]),c("div",NO,[S[77]||(S[77]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Output Directories",-1)),k(Vt,{"model-value":xs(V.value,"output"),"onUpdate:modelValue":S[16]||(S[16]=b=>Qs(V.value,"output",b)),"add-label":"Add Output Directory","default-item":()=>({key:"",label:"",path:"",type:"output",_id:Date.now()})},{default:B(({item:b,index:G,update:oe})=>[c("div",zO,[k(W,{"model-value":b.key,"onUpdate:modelValue":de=>oe("key",de),label:"Key",placeholder:"e.g., outputs_animations",error:Ms(b.key,V.value,"output",G),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),k(W,{"model-value":b.label,"onUpdate:modelValue":de=>oe("label",de),label:"Label",placeholder:"e.g., Animations",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":b.path,"onUpdate:modelValue":de=>oe("path",de),label:"Path",placeholder:"e.g., outputs/animations",error:ks(b.path),prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])])]),_:1})],8,UO),c("div",{id:`project-${V.value}-utility`},[k(bt,{title:"Utility directories",description:"Cache and scratch folders are gitignored so temporary artifacts never leak into version control."},{default:B(()=>[(g(!0),x(X,null,be(te.value,b=>(g(),x(X,{key:b.key},[Ne(V.value,b.key)?(g(),he(W,{key:0,modelValue:A.value.project_types[V.value].directories[b.key],"onUpdate:modelValue":G=>A.value.project_types[V.value].directories[b.key]=G,label:b.label,hint:b.hint,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label","hint"])):R("",!0)],64))),128))]),_:1})],8,FO)])):V.value==="project_sensitive"?(g(),x("div",HO,[ae.value&&ae.value.length>0?(g(),x("div",WO,[k(bt,{title:"Project Settings",description:"Default settings applied when creating new projects of this type."},{default:B(()=>[k(Lt,null,{default:B(()=>[c("div",qO,[(g(!0),x(X,null,be(ae.value,b=>(g(),x(X,{key:b.id},[b.control==="toggle"?(g(),he(Re,{key:0,modelValue:A.value.project_types[V.value][b.id],"onUpdate:modelValue":G=>A.value.project_types[V.value][b.id]=G,label:b.label,description:b.description},null,8,["modelValue","onUpdate:modelValue","label","description"])):b.control==="select"?(g(),he(_s,{key:1,modelValue:A.value.project_types[V.value][b.id],"onUpdate:modelValue":G=>A.value.project_types[V.value][b.id]=G,label:b.label,hint:b.hint},{default:B(()=>[(g(!0),x(X,null,be(b.options,G=>(g(),x("option",{key:G.value,value:G.value},F(G.label),9,GO))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","label","hint"])):b.control==="text"?(g(),he(W,{key:2,modelValue:A.value.project_types[V.value][b.id],"onUpdate:modelValue":G=>A.value.project_types[V.value][b.id]=G,label:b.label,hint:b.hint,placeholder:b.placeholder},null,8,["modelValue","onUpdate:modelValue","label","hint","placeholder"])):R("",!0)],64))),128))])]),_:1})]),_:1})])):R("",!0),c("div",KO,[c("div",JO,[c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:S[17]||(S[17]=b=>rt(`project-${V.value}-workspaces`))}," Workspaces "),c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:S[18]||(S[18]=b=>rt(`project-${V.value}-inputs-private`))}," Inputs "),c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:S[19]||(S[19]=b=>rt(`project-${V.value}-outputs-private`))}," Outputs "),c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:S[20]||(S[20]=b=>rt(`project-${V.value}-utility`))}," Utility ")]),k(Oe,{variant:"secondary",size:"sm",class:"mt-3 sm:mt-0",onClick:S[21]||(S[21]=b=>St(V.value))},{default:B(()=>[...S[78]||(S[78]=[se(" Reset to Defaults ",-1)])]),_:1})]),c("div",{id:`project-${V.value}-workspaces`},[k(bt,{title:"Workspaces",description:"Module locations for notebooks, scripts, and helper functions."},{default:B(()=>[c("div",XO,[(g(!0),x(X,null,be(q.value,b=>(g(),x(X,{key:`sensitive-${b.key}`},[Ne(V.value,b.key)?(g(),he(W,{key:0,modelValue:A.value.project_types[V.value].directories[b.key],"onUpdate:modelValue":G=>A.value.project_types[V.value].directories[b.key]=G,label:b.label,hint:b.hint,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label","hint"])):R("",!0)],64))),128))]),c("div",QO,[S[79]||(S[79]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Workspace Directories",-1)),k(Vt,{"model-value":xs(V.value,"workspace"),"onUpdate:modelValue":S[22]||(S[22]=b=>Qs(V.value,"workspace",b)),"add-label":"Add Workspace Directory","default-item":()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:B(({item:b,index:G,update:oe})=>[c("div",ZO,[k(W,{"model-value":b.key,"onUpdate:modelValue":de=>oe("key",de),label:"Key",placeholder:"e.g., tests",error:Ms(b.key,V.value,"workspace",G),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),k(W,{"model-value":b.label,"onUpdate:modelValue":de=>oe("label",de),label:"Label",placeholder:"e.g., Tests",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":b.path,"onUpdate:modelValue":de=>oe("path",de),label:"Path",placeholder:"e.g., tests",error:ks(b.path),prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])])]),_:1})],8,YO),c("div",{id:`project-${V.value}-inputs-private`},[k(bt,{title:"Inputs",description:"Keep private inputs compartmentalized; publish processed outputs into public folders when ready."},{default:B(()=>[S[82]||(S[82]=c("div",{class:"grid gap-4 sm:grid-cols-2 text-xs font-semibold uppercase text-gray-500 dark:text-gray-400"},[c("div",null,"Private"),c("div",null,"Public")],-1)),(g(!0),x(X,null,be(Q.value,b=>(g(),x("div",{key:b.privateKey,class:"grid gap-4 sm:grid-cols-2"},[Ne(V.value,b.privateKey)?(g(),he(W,{key:0,modelValue:A.value.project_types[V.value].directories[b.privateKey],"onUpdate:modelValue":G=>A.value.project_types[V.value].directories[b.privateKey]=G,label:b.privateLabel||`${b.label} (private)`,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label"])):R("",!0),Ne(V.value,b.publicKey)?(g(),he(W,{key:1,modelValue:A.value.project_types[V.value].directories[b.publicKey],"onUpdate:modelValue":G=>A.value.project_types[V.value].directories[b.publicKey]=G,label:b.publicLabel||`${b.label} (public)`,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label"])):R("",!0)]))),128)),c("div",tP,[c("div",sP,[c("div",null,[S[80]||(S[80]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Private Inputs",-1)),k(Vt,{"model-value":xs(V.value,"input_private"),"onUpdate:modelValue":S[23]||(S[23]=b=>Qs(V.value,"input_private",b)),"add-label":"Add Private Input","default-item":()=>({key:"",label:"",path:"",type:"input_private",_id:Date.now()})},{default:B(({item:b,index:G,update:oe})=>[c("div",iP,[k(W,{"model-value":b.key,"onUpdate:modelValue":de=>oe("key",de),label:"Key",placeholder:"e.g., inputs_archive",error:Ms(b.key,V.value,"input_private",G),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),k(W,{"model-value":b.label,"onUpdate:modelValue":de=>oe("label",de),label:"Label",placeholder:"e.g., Archive",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":b.path,"onUpdate:modelValue":de=>oe("path",de),label:"Path",placeholder:"e.g., inputs/archive",error:ks(b.path),prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])]),c("div",null,[S[81]||(S[81]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Public Inputs",-1)),k(Vt,{"model-value":xs(V.value,"input_public"),"onUpdate:modelValue":S[24]||(S[24]=b=>Qs(V.value,"input_public",b)),"add-label":"Add Public Input","default-item":()=>({key:"",label:"",path:"",type:"input_public",_id:Date.now()})},{default:B(({item:b,index:G,update:oe})=>[c("div",nP,[k(W,{"model-value":b.key,"onUpdate:modelValue":de=>oe("key",de),label:"Key",placeholder:"e.g., inputs_public_archive",error:Ms(b.key,V.value,"input_public",G),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),k(W,{"model-value":b.label,"onUpdate:modelValue":de=>oe("label",de),label:"Label",placeholder:"e.g., Archive (Public)",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":b.path,"onUpdate:modelValue":de=>oe("path",de),label:"Path",placeholder:"e.g., inputs_public/archive",error:ks(b.path),prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])])])])]),_:1})],8,eP),c("div",{id:`project-${V.value}-outputs-private`},[k(bt,{title:"Outputs",description:"Review outputs before promotion; private folders remain gitignored while public copies are ready to share."},{default:B(()=>[S[85]||(S[85]=c("div",{class:"grid gap-4 sm:grid-cols-2 text-xs font-semibold uppercase text-gray-500 dark:text-gray-400"},[c("div",null,"Private"),c("div",null,"Public")],-1)),(g(!0),x(X,null,be(z.value,b=>(g(),x("div",{key:b.privateKey,class:"grid gap-4 sm:grid-cols-2"},[Ne(V.value,b.privateKey)?(g(),he(W,{key:0,modelValue:A.value.project_types[V.value].directories[b.privateKey],"onUpdate:modelValue":G=>A.value.project_types[V.value].directories[b.privateKey]=G,label:b.privateLabel||`${b.label} (private)`,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label"])):R("",!0),Ne(V.value,b.publicKey)?(g(),he(W,{key:1,modelValue:A.value.project_types[V.value].directories[b.publicKey],"onUpdate:modelValue":G=>A.value.project_types[V.value].directories[b.publicKey]=G,label:b.publicLabel||`${b.label} (public)`,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label"])):R("",!0)]))),128)),k(W,{modelValue:A.value.project_types[V.value].quarto.render_dir,"onUpdate:modelValue":S[25]||(S[25]=b=>A.value.project_types[V.value].quarto.render_dir=b),label:"Notebook output directory",hint:"Rendered docs default to a public location but can be moved if needed.",prefix:"/",monospace:""},null,8,["modelValue"]),c("div",oP,[c("div",lP,[c("div",null,[S[83]||(S[83]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Private Outputs",-1)),k(Vt,{"model-value":xs(V.value,"output_private"),"onUpdate:modelValue":S[26]||(S[26]=b=>Qs(V.value,"output_private",b)),"add-label":"Add Private Output","default-item":()=>({key:"",label:"",path:"",type:"output_private",_id:Date.now()})},{default:B(({item:b,index:G,update:oe})=>[c("div",aP,[k(W,{"model-value":b.key,"onUpdate:modelValue":de=>oe("key",de),label:"Key",placeholder:"e.g., outputs_animations",error:Ms(b.key,V.value,"output_private",G),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),k(W,{"model-value":b.label,"onUpdate:modelValue":de=>oe("label",de),label:"Label",placeholder:"e.g., Animations",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":b.path,"onUpdate:modelValue":de=>oe("path",de),label:"Path",placeholder:"e.g., outputs/animations",error:ks(b.path),prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])]),c("div",null,[S[84]||(S[84]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Public Outputs",-1)),k(Vt,{"model-value":xs(V.value,"output_public"),"onUpdate:modelValue":S[27]||(S[27]=b=>Qs(V.value,"output_public",b)),"add-label":"Add Public Output","default-item":()=>({key:"",label:"",path:"",type:"output_public",_id:Date.now()})},{default:B(({item:b,index:G,update:oe})=>[c("div",uP,[k(W,{"model-value":b.key,"onUpdate:modelValue":de=>oe("key",de),label:"Key",placeholder:"e.g., outputs_public_animations",error:Ms(b.key,V.value,"output_public",G),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),k(W,{"model-value":b.label,"onUpdate:modelValue":de=>oe("label",de),label:"Label",placeholder:"e.g., Animations (Public)",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":b.path,"onUpdate:modelValue":de=>oe("path",de),label:"Path",placeholder:"e.g., outputs_public/animations",error:ks(b.path),prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])])])])]),_:1})],8,rP),c("div",{id:`project-${V.value}-utility`},[k(bt,{title:"Utility directories",description:"Keep cache and scratch in private space for safety; both remain gitignored."},{default:B(()=>[c("div",cP,[(g(!0),x(X,null,be(te.value,b=>(g(),x(X,{key:`sensitive-${b.key}`},[Ne(V.value,b.key)?(g(),he(W,{key:0,modelValue:A.value.project_types[V.value].directories[b.key],"onUpdate:modelValue":G=>A.value.project_types[V.value].directories[b.key]=G,label:b.label,hint:b.hint,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label","hint"])):R("",!0)],64))),128))])]),_:1})],8,dP)])):V.value==="presentation"?(g(),x("div",fP,[ae.value&&ae.value.length>0?(g(),x("div",hP,[k(bt,{title:"Project Settings",description:"Default settings applied when creating new projects of this type."},{default:B(()=>[k(Lt,null,{default:B(()=>[c("div",pP,[(g(!0),x(X,null,be(ae.value,b=>(g(),x(X,{key:b.id},[b.control==="toggle"?(g(),he(Re,{key:0,modelValue:A.value.project_types[V.value][b.id],"onUpdate:modelValue":G=>A.value.project_types[V.value][b.id]=G,label:b.label,description:b.description},null,8,["modelValue","onUpdate:modelValue","label","description"])):b.control==="select"?(g(),he(_s,{key:1,modelValue:A.value.project_types[V.value][b.id],"onUpdate:modelValue":G=>A.value.project_types[V.value][b.id]=G,label:b.label,hint:b.hint},{default:B(()=>[(g(!0),x(X,null,be(b.options,G=>(g(),x("option",{key:G.value,value:G.value},F(G.label),9,mP))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","label","hint"])):b.control==="text"?(g(),he(W,{key:2,modelValue:A.value.project_types[V.value][b.id],"onUpdate:modelValue":G=>A.value.project_types[V.value][b.id]=G,label:b.label,hint:b.hint,placeholder:b.placeholder},null,8,["modelValue","onUpdate:modelValue","label","hint","placeholder"])):R("",!0)],64))),128))])]),_:1})]),_:1})])):R("",!0),c("div",gP,[c("div",yP,[c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:S[28]||(S[28]=b=>rt(`project-${V.value}-primary`))}," Primary files "),c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:S[29]||(S[29]=b=>rt(`project-${V.value}-optional`))}," Optional folders ")]),k(Oe,{variant:"secondary",size:"sm",class:"mt-3 sm:mt-0",onClick:S[30]||(S[30]=b=>St(V.value))},{default:B(()=>[...S[86]||(S[86]=[se(" Reset to Defaults ",-1)])]),_:1})]),c("div",{id:`project-${V.value}-primary`},[k(bt,{title:"Primary files"},{default:B(()=>[c("div",bP,[k(W,{modelValue:A.value.project_types[V.value].directories.presentation_source,"onUpdate:modelValue":S[31]||(S[31]=b=>A.value.project_types[V.value].directories.presentation_source=b),label:"Presentation source file",hint:"Relative path to your primary presentation.qmd.",monospace:""},null,8,["modelValue"]),k(W,{modelValue:A.value.project_types[V.value].directories.rendered_slides,"onUpdate:modelValue":S[32]||(S[32]=b=>A.value.project_types[V.value].directories.rendered_slides=b),label:"Rendered slides directory",hint:"Rendered slides write to the project root by default ('.').",monospace:""},null,8,["modelValue"])])]),_:1})],8,vP),c("div",{id:`project-${V.value}-optional`},[k(bt,{title:"Optional folders",description:"Toggle extra scaffolding when you need supporting data, scripts, or helper utilities."},{default:B(()=>[c("div",kP,[c("div",wP,[k(Re,{modelValue:J.includeInputs,"onUpdate:modelValue":S[33]||(S[33]=b=>J.includeInputs=b),label:"Include inputs directory",description:"Adds an inputs/ folder for sample data used in the presentation."},null,8,["modelValue"]),J.includeInputs?(g(),he(W,{key:0,modelValue:A.value.project_types[V.value].directories.inputs,"onUpdate:modelValue":S[34]||(S[34]=b=>A.value.project_types[V.value].directories.inputs=b),label:"Inputs directory",prefix:"/",monospace:""},null,8,["modelValue"])):R("",!0)]),c("div",SP,[k(Re,{modelValue:J.includeScripts,"onUpdate:modelValue":S[35]||(S[35]=b=>J.includeScripts=b),label:"Include scripts directory",description:"Adds a scripts/ folder for demo code or automation."},null,8,["modelValue"]),J.includeScripts?(g(),he(W,{key:0,modelValue:A.value.project_types[V.value].directories.scripts,"onUpdate:modelValue":S[36]||(S[36]=b=>A.value.project_types[V.value].directories.scripts=b),label:"Scripts directory",prefix:"/",monospace:""},null,8,["modelValue"])):R("",!0)]),c("div",_P,[k(Re,{modelValue:J.includeFunctions,"onUpdate:modelValue":S[37]||(S[37]=b=>J.includeFunctions=b),label:"Include functions directory",description:"Adds R/functions for helper utilities that should load automatically."},null,8,["modelValue"]),J.includeFunctions?(g(),he(W,{key:0,modelValue:A.value.project_types[V.value].directories.functions,"onUpdate:modelValue":S[38]||(S[38]=b=>A.value.project_types[V.value].directories.functions=b),label:"Functions directory",prefix:"/",monospace:""},null,8,["modelValue"])):R("",!0)]),c("div",CP,[S[87]||(S[87]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Custom Directories",-1)),S[88]||(S[88]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Add any additional directories you need for your presentations.",-1)),k(Vt,{"model-value":A.value.project_types[V.value].extra_directories||[],"onUpdate:modelValue":S[39]||(S[39]=b=>A.value.project_types[V.value].extra_directories=b),"add-label":"Add Directory","default-item":()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:B(({item:b,index:G,update:oe})=>[c("div",AP,[k(W,{"model-value":b.key,"onUpdate:modelValue":de=>oe("key",de),label:"Key",placeholder:"e.g., assets",error:Ms(b.key,V.value,"workspace",G),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),k(W,{"model-value":b.label,"onUpdate:modelValue":de=>oe("label",de),label:"Label",placeholder:"e.g., Assets",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":b.path,"onUpdate:modelValue":de=>oe("path",de),label:"Path",placeholder:"e.g., assets",error:ks(b.path),prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])])])]),_:1})],8,xP)])):V.value==="course"?(g(),x("div",VP,[ae.value&&ae.value.length>0?(g(),x("div",MP,[k(bt,{title:"Project Settings",description:"Default settings applied when creating new projects of this type."},{default:B(()=>[k(Lt,null,{default:B(()=>[c("div",DP,[(g(!0),x(X,null,be(ae.value,b=>(g(),x(X,{key:b.id},[b.control==="toggle"?(g(),he(Re,{key:0,modelValue:A.value.project_types[V.value][b.id],"onUpdate:modelValue":G=>A.value.project_types[V.value][b.id]=G,label:b.label,description:b.description},null,8,["modelValue","onUpdate:modelValue","label","description"])):b.control==="select"?(g(),he(_s,{key:1,modelValue:A.value.project_types[V.value][b.id],"onUpdate:modelValue":G=>A.value.project_types[V.value][b.id]=G,label:b.label,hint:b.hint},{default:B(()=>[(g(!0),x(X,null,be(b.options,G=>(g(),x("option",{key:G.value,value:G.value},F(G.label),9,TP))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","label","hint"])):b.control==="text"?(g(),he(W,{key:2,modelValue:A.value.project_types[V.value][b.id],"onUpdate:modelValue":G=>A.value.project_types[V.value][b.id]=G,label:b.label,hint:b.hint,placeholder:b.placeholder},null,8,["modelValue","onUpdate:modelValue","label","hint","placeholder"])):R("",!0)],64))),128))])]),_:1})]),_:1})])):R("",!0),c("div",EP,[c("div",$P,[c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:S[40]||(S[40]=b=>rt(`project-${V.value}-core`))}," Core folders "),c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:S[41]||(S[41]=b=>rt(`project-${V.value}-quarto`))}," Quarto render directory ")]),k(Oe,{variant:"secondary",size:"sm",class:"mt-3 sm:mt-0",onClick:S[42]||(S[42]=b=>St(V.value))},{default:B(()=>[...S[89]||(S[89]=[se(" Reset to Defaults ",-1)])]),_:1})]),c("div",{id:`project-${V.value}-core`},[k(bt,{title:"Core folders",description:"Configure folders for course datasets, slide decks, assignments, and readings."},{default:B(()=>[c("div",PP,[k(W,{modelValue:A.value.project_types[V.value].directories.data,"onUpdate:modelValue":S[43]||(S[43]=b=>A.value.project_types[V.value].directories.data=b),label:"Course data",prefix:"/",monospace:"",hint:"Shared datasets distributed with the course."},null,8,["modelValue"]),k(W,{modelValue:A.value.project_types[V.value].directories.slides,"onUpdate:modelValue":S[44]||(S[44]=b=>A.value.project_types[V.value].directories.slides=b),label:"Slides",prefix:"/",monospace:"",hint:"Lecture slide sources."},null,8,["modelValue"]),k(W,{modelValue:A.value.project_types[V.value].directories.assignments,"onUpdate:modelValue":S[45]||(S[45]=b=>A.value.project_types[V.value].directories.assignments=b),label:"Assignments",prefix:"/",monospace:"",hint:"Homework or lab materials."},null,8,["modelValue"]),k(W,{modelValue:A.value.project_types[V.value].directories.course_docs,"onUpdate:modelValue":S[46]||(S[46]=b=>A.value.project_types[V.value].directories.course_docs=b),label:"Course documents",prefix:"/",monospace:"",hint:"Syllabus, policies, grading guides."},null,8,["modelValue"]),k(W,{modelValue:A.value.project_types[V.value].directories.readings,"onUpdate:modelValue":S[47]||(S[47]=b=>A.value.project_types[V.value].directories.readings=b),label:"Readings",prefix:"/",monospace:"",hint:"Assigned readings and references."},null,8,["modelValue"]),k(W,{modelValue:A.value.project_types[V.value].directories.notebooks,"onUpdate:modelValue":S[48]||(S[48]=b=>A.value.project_types[V.value].directories.notebooks=b),label:"Module notebooks",prefix:"/",monospace:"",hint:"Module notebooks or workshop materials."},null,8,["modelValue"])])]),_:1})],8,OP),c("div",{id:`project-${V.value}-quarto`},[k(bt,{title:"Quarto render directory",description:"Default location for rendered course documentation."},{default:B(()=>[k(W,{modelValue:A.value.project_types[V.value].quarto.render_dir,"onUpdate:modelValue":S[49]||(S[49]=b=>A.value.project_types[V.value].quarto.render_dir=b),label:"Render directory",prefix:"/",monospace:""},null,8,["modelValue"])]),_:1}),c("div",RP,[S[90]||(S[90]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Custom Directories",-1)),S[91]||(S[91]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Add any additional directories you need for your courses.",-1)),k(Vt,{"model-value":A.value.project_types[V.value].extra_directories||[],"onUpdate:modelValue":S[50]||(S[50]=b=>A.value.project_types[V.value].extra_directories=b),"add-label":"Add Directory","default-item":()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:B(({item:b,index:G,update:oe})=>[c("div",LP,[k(W,{"model-value":b.key,"onUpdate:modelValue":de=>oe("key",de),label:"Key",placeholder:"e.g., resources",error:Ms(b.key,V.value,"workspace",G),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),k(W,{"model-value":b.label,"onUpdate:modelValue":de=>oe("label",de),label:"Label",placeholder:"e.g., Resources",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":b.path,"onUpdate:modelValue":de=>oe("path",de),label:"Path",placeholder:"e.g., resources",error:ks(b.path),prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])])],8,jP)])):R("",!0),c("div",{id:`project-${V.value}-gitignore`},[k(bt,{title:".gitignore Template",description:"Patterns applied to all new projects of this type."},{default:B(()=>[k(Zn,{modelValue:Ue[`gitignore_${V.value}`].contents,"onUpdate:modelValue":S[51]||(S[51]=b=>Ue[`gitignore_${V.value}`].contents=b),language:"text","min-height":"400px",disabled:Ue[`gitignore_${V.value}`].loading},null,8,["modelValue","disabled"]),Ue[`gitignore_${V.value}`].loading?(g(),x("p",IP,"Loading .gitignore template")):R("",!0),c("div",UP,[k(Oe,{size:"sm",variant:"secondary",onClick:S[52]||(S[52]=b=>Be(`gitignore-${V.value}`,`gitignore_${V.value}`))},{default:B(()=>[...S[92]||(S[92]=[se("Restore Default",-1)])]),_:1})])]),_:1})],8,BP)])):R("",!0)],512),[[gt,p.value==="structure"]]),qe(c("div",NP,[k(bt,null,{default:B(()=>[c("div",zP,[c("div",FP,[k(_s,{modelValue:A.value.defaults.notebook_format,"onUpdate:modelValue":S[53]||(S[53]=b=>A.value.defaults.notebook_format=b),label:"Default Format"},{default:B(()=>[...S[93]||(S[93]=[c("option",{value:"quarto"},"Quarto (.qmd)",-1),c("option",{value:"rmarkdown"},"RMarkdown (.Rmd)",-1)])]),_:1},8,["modelValue"])]),c("div",HP,[k(Lt,{title:"Notebook Stub",description:"This template populates every new notebook."},{default:B(()=>[k(Zn,{modelValue:Ue.notebook.contents,"onUpdate:modelValue":S[54]||(S[54]=b=>Ue.notebook.contents=b),language:"markdown","min-height":"500px",disabled:Ue.notebook.loading},null,8,["modelValue","disabled"]),Ue.notebook.loading?(g(),x("p",WP,"Loading notebook stub")):R("",!0),c("div",qP,[k(Oe,{size:"sm",variant:"secondary",onClick:S[55]||(S[55]=b=>Be("notebook"))},{default:B(()=>[...S[94]||(S[94]=[se("Restore Default",-1)])]),_:1})])]),_:1})]),c("div",GP,[k(Lt,{title:"Script Stub",description:"Used by `framework make:script` for quick task scaffolds."},{default:B(()=>[k(Zn,{modelValue:Ue.script.contents,"onUpdate:modelValue":S[56]||(S[56]=b=>Ue.script.contents=b),language:"r","min-height":"450px",disabled:Ue.script.loading},null,8,["modelValue","disabled"]),Ue.script.loading?(g(),x("p",KP,"Loading script stub")):R("",!0),c("div",JP,[k(Oe,{size:"sm",variant:"secondary",onClick:S[57]||(S[57]=b=>Be("script"))},{default:B(()=>[...S[95]||(S[95]=[se("Restore Default",-1)])]),_:1})])]),_:1})])])]),_:1})],512),[[gt,p.value==="notebooksScripts"]]),qe(c("div",YP,[k(bt,{description:"Framework maintains context files for selected assistants and keeps them in sync before commits."},{default:B(()=>[k(Lt,null,{default:B(()=>[k(Re,{modelValue:A.value.defaults.ai_support,"onUpdate:modelValue":S[58]||(S[58]=b=>A.value.defaults.ai_support=b),label:"Enable AI Support",description:"Generate and sync assistant-specific context files."},null,8,["modelValue"])]),_:1}),k(Lt,{title:"Canonical context file",description:"This file is the source of truth; other instructions files are synced to it when AI hooks run."},{default:B(()=>[k(_s,{modelValue:A.value.defaults.ai_canonical_file,"onUpdate:modelValue":S[59]||(S[59]=b=>A.value.defaults.ai_canonical_file=b),disabled:!A.value.defaults.ai_support,label:"Canonical Context File"},{default:B(()=>[...S[96]||(S[96]=[c("option",{value:"AGENTS.md"},"AGENTS.md (multi-agent orchestrator)",-1),c("option",{value:"CLAUDE.md"},"CLAUDE.md",-1),c("option",{value:".github/copilot-instructions.md"},".github/copilot-instructions.md",-1)])]),_:1},8,["modelValue","disabled"])]),_:1}),A.value.defaults.ai_support?(g(),x(X,{key:0},[k(Lt,{title:"Assistants",description:"Choose which assistants receive context updates."},{default:B(()=>[c("div",XP,[(g(),x(X,null,be(y,b=>k(Ji,{key:b.id,id:`ai-${b.id}`,modelValue:ge[b.id],"onUpdate:modelValue":G=>ge[b.id]=G,description:b.description},{default:B(()=>[se(F(b.label),1)]),_:2},1032,["id","modelValue","onUpdate:modelValue","description"])),64))])]),_:1}),k(Lt,null,{default:B(()=>[k(Re,{modelValue:A.value.defaults.git_hooks.ai_sync,"onUpdate:modelValue":S[60]||(S[60]=b=>A.value.defaults.git_hooks.ai_sync=b),label:"Sync AI Files Before Commit",description:"Update non-canonical files so assistants share the same instructions."},null,8,["modelValue"])]),_:1}),k(Lt,{title:"Canonical instructions",description:"Edit the canonical file directly. Restore defaults if you want to start over."},{default:B(()=>[k(Zn,{modelValue:Ue.canonical.contents,"onUpdate:modelValue":S[61]||(S[61]=b=>Ue.canonical.contents=b),language:"markdown","min-height":"500px",disabled:Ue.canonical.loading||!A.value.defaults.ai_support},null,8,["modelValue","disabled"]),c("div",QP,[k(Oe,{size:"sm",variant:"secondary",disabled:Ue.canonical.loading,onClick:He},{default:B(()=>[...S[97]||(S[97]=[se("Restore Default",-1)])]),_:1},8,["disabled"])])]),_:1})],64)):R("",!0)]),_:1})],512),[[gt,p.value==="ai"]]),qe(c("div",ZP,[k(bt,{description:"Configure how Framework initializes repositories, commits, and pre-commit hooks."},{default:B(()=>[k(Lt,null,{default:B(()=>[k(Re,{modelValue:A.value.defaults.use_git,"onUpdate:modelValue":S[62]||(S[62]=b=>A.value.defaults.use_git=b),label:"Initialize Git",description:"Run git init for every new project."},null,8,["modelValue"])]),_:1}),k(Lt,{title:"Git identity",description:"Overrides Author Information when provided."},{default:B(()=>[c("div",ej,[k(W,{modelValue:A.value.git.user_name,"onUpdate:modelValue":S[63]||(S[63]=b=>A.value.git.user_name=b),label:"Git Name",placeholder:"Jane Analyst"},null,8,["modelValue"]),k(W,{modelValue:A.value.git.user_email,"onUpdate:modelValue":S[64]||(S[64]=b=>A.value.git.user_email=b),label:"Git Email",placeholder:"jane@example.com",hint:"Used for git config user.email during project setup."},null,8,["modelValue"])])]),_:1}),k(Lt,{title:"Git Hooks",description:"Pre-commit hooks that run automatically before each commit."},{default:B(()=>[c("div",tj,[k(Re,{modelValue:A.value.defaults.git_hooks.ai_sync,"onUpdate:modelValue":S[65]||(S[65]=b=>A.value.defaults.git_hooks.ai_sync=b),label:"Sync AI Files Before Commit",description:"Update non-canonical files so assistants share the same instructions."},null,8,["modelValue"]),k(Re,{modelValue:A.value.privacy.secret_scan,"onUpdate:modelValue":S[66]||(S[66]=b=>A.value.privacy.secret_scan=b),label:"Check for Secrets",description:"Run a lightweight scan for API keys and credentials before commits."},null,8,["modelValue"]),k(Re,{modelValue:A.value.defaults.git_hooks.check_sensitive_dirs,"onUpdate:modelValue":S[67]||(S[67]=b=>A.value.defaults.git_hooks.check_sensitive_dirs=b),label:"Warn About Unignored Sensitive Directories",description:"Block commits if directories with sensitive names aren't gitignored."},null,8,["modelValue"])]),S[98]||(S[98]=c("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-4"},[se(" Project-specific .gitignore templates can be customized in "),c("a",{href:"#/settings/project-defaults",class:"text-sky-600 dark:text-sky-400 hover:underline"},"Project Defaults"),se(". ")],-1))]),_:1})]),_:1})],512),[[gt,p.value==="git"]]),qe(c("div",sj,[k(bt,{description:"Define how Framework manages renv and which packages load automatically in new projects."},{default:B(()=>[k(Lt,null,{default:B(()=>[k(Re,{modelValue:A.value.defaults.packages.use_renv,"onUpdate:modelValue":S[68]||(S[68]=b=>A.value.defaults.packages.use_renv=b),label:"Enable renv",description:"Create renv environments for new projects."},null,8,["modelValue"])]),_:1}),k(Lt,{title:"Default packages",description:"Installed (and optionally attached) when scaffold() runs."},{default:B(()=>[c("div",ij,[S[100]||(S[100]=c("p",{class:"text-xs text-gray-600 dark:text-gray-400"},"Use this list to preseed notebooks with your preferred helpers.",-1)),k(Oe,{size:"sm",variant:"secondary",onClick:is},{default:B(()=>[...S[99]||(S[99]=[se("Add Package",-1)])]),_:1})]),A.value.defaults.packages.default_packages&&A.value.defaults.packages.default_packages.length?(g(),x("div",nj,[(g(!0),x(X,null,be(A.value.defaults.packages.default_packages,(b,G)=>(g(),x("div",{key:`pkg-${G}`,class:"rounded-md border border-gray-200 p-4 dark:border-gray-700"},[c("div",rj,[c("div",oj,[b.source==="cran"||b.source==="bioconductor"?(g(),he(Wv,{key:0,modelValue:b.name,"onUpdate:modelValue":oe=>b.name=oe,source:b.source,label:"Package",placeholder:b.source==="cran"?"Search CRAN...":"Search Bioconductor...",onSelect:oe=>b.name=oe.name},null,8,["modelValue","onUpdate:modelValue","source","placeholder","onSelect"])):(g(),he(W,{key:1,modelValue:b.name,"onUpdate:modelValue":oe=>b.name=oe,label:"Package",placeholder:"user/repo"},null,8,["modelValue","onUpdate:modelValue"])),k(_s,{modelValue:b.source,"onUpdate:modelValue":oe=>b.source=oe,label:"Source"},{default:B(()=>[...S[101]||(S[101]=[c("option",{value:"cran"},"CRAN",-1),c("option",{value:"github"},"GitHub",-1),c("option",{value:"bioconductor"},"Bioconductor",-1)])]),_:1},8,["modelValue","onUpdate:modelValue"])]),c("div",lj,[k(Re,{modelValue:b.auto_attach,"onUpdate:modelValue":oe=>b.auto_attach=oe,label:"Auto-Attach",description:"Call library() in notebooks."},null,8,["modelValue","onUpdate:modelValue"]),k(Oe,{size:"sm",variant:"secondary",onClick:oe=>ns(G)},{default:B(()=>[...S[102]||(S[102]=[se("Remove",-1)])]),_:1},8,["onClick"])])])]))),128))])):(g(),x("p",aj,"No packages configured. Add packages to include tidyverse helpers or internal utilities automatically."))]),_:1})]),_:1})],512),[[gt,p.value==="packages"]])])]),k(yo,{modelValue:Ge.open,"onUpdate:modelValue":S[71]||(S[71]=b=>Ge.open=b),size:"lg",title:Ge.title},{default:B(()=>[c("p",uj,F(Ge.description),1),k(ic,{modelValue:Ge.contents,"onUpdate:modelValue":S[69]||(S[69]=b=>Ge.contents=b),rows:18,monospace:""},null,8,["modelValue"])]),actions:B(()=>[c("div",dj,[k(Oe,{variant:"secondary",onClick:S[70]||(S[70]=b=>Ge.open=!1)},{default:B(()=>[...S[103]||(S[103]=[se("Cancel",-1)])]),_:1}),k(Oe,{variant:"primary",disabled:Ge.loading,onClick:Rt},{default:B(()=>[se(F(Ge.loading?"Saving":"Save Template"),1)]),_:1},8,["disabled"])])]),_:1},8,["modelValue","title"])]))}},pj={class:"mx-auto max-w-5xl p-10"},mj={__name:"ProjectPackagesView",setup(t){return fe([]),es(async()=>{}),(e,s)=>(g(),x("div",pj,[k(Cr,{title:"Packages",description:"Manage R packages for this project."}),s[0]||(s[0]=Va('<div class="mt-10 rounded-2xl border border-zinc-200 bg-white p-8 shadow-sm dark:border-zinc-800 dark:bg-zinc-900"><div class="flex items-center gap-3 border-b border-zinc-100 pb-6 dark:border-zinc-800"><div class="flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-sky-500 to-sky-600 shadow-lg shadow-sky-500/20"><svg class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg></div><h3 class="text-xl font-bold text-zinc-900 dark:text-white">Package Configuration</h3></div><div class="mt-8"><p class="text-sm text-zinc-600 dark:text-zinc-400"> Package management interface coming soon. This page will allow you to: </p><ul class="mt-4 space-y-2 text-sm text-zinc-600 dark:text-zinc-400"><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Add and remove project packages </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Specify package versions </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Toggle renv integration </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Install and update packages </li></ul></div></div>',1))]))}},gj={class:"mx-auto max-w-5xl p-10"},yj={__name:"ProjectDataView",setup(t){return fe([]),es(async()=>{}),(e,s)=>(g(),x("div",gj,[k(Cr,{title:"Data",description:"Manage data catalog and sources for this project."}),s[0]||(s[0]=Va('<div class="mt-10 rounded-2xl border border-zinc-200 bg-white p-8 shadow-sm dark:border-zinc-800 dark:bg-zinc-900"><div class="flex items-center gap-3 border-b border-zinc-100 pb-6 dark:border-zinc-800"><div class="flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-sky-500 to-sky-600 shadow-lg shadow-sky-500/20"><svg class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"></path></svg></div><h3 class="text-xl font-bold text-zinc-900 dark:text-white">Data Catalog</h3></div><div class="mt-8"><p class="text-sm text-zinc-600 dark:text-zinc-400"> Data catalog management interface coming soon. This page will allow you to: </p><ul class="mt-4 space-y-2 text-sm text-zinc-600 dark:text-zinc-400"><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Define data sources in the catalog </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Specify data formats (CSV, RDS, etc.) </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Configure encryption settings </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Track data integrity via digests </li></ul></div></div>',1))]))}},vj={class:"mx-auto max-w-5xl p-10"},bj={__name:"ProjectConnectionsView",setup(t){return fe([]),es(async()=>{}),(e,s)=>(g(),x("div",vj,[k(Cr,{title:"Connections",description:"Manage database connections for this project."}),s[0]||(s[0]=Va('<div class="mt-10 rounded-2xl border border-zinc-200 bg-white p-8 shadow-sm dark:border-zinc-800 dark:bg-zinc-900"><div class="flex items-center gap-3 border-b border-zinc-100 pb-6 dark:border-zinc-800"><div class="flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-sky-500 to-sky-600 shadow-lg shadow-sky-500/20"><svg class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg></div><h3 class="text-xl font-bold text-zinc-900 dark:text-white">Database Connections</h3></div><div class="mt-8"><p class="text-sm text-zinc-600 dark:text-zinc-400"> Connection management interface coming soon. This page will allow you to: </p><ul class="mt-4 space-y-2 text-sm text-zinc-600 dark:text-zinc-400"><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Configure database connections (SQLite, PostgreSQL) </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Store connection credentials securely </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Test database connectivity </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Manage connection pooling settings </li></ul></div></div>',1))]))}},xj=[{path:"/",redirect:"/projects"},{path:"/docs",name:"docs",component:Sh},{path:"/docs/:functionName",name:"doc-detail",component:Sh,props:!0},{path:"/projects",name:"projects",component:o4},{path:"/projects/new",name:"project-create",component:VD},{path:"/project/:id",name:"project-detail",component:Z7,props:!0},{path:"/settings/:section?/:subsection?",name:"settings",component:hj,props:!0},{path:"/project/packages",name:"project-packages",component:mj},{path:"/project/data",name:"project-data",component:yj},{path:"/project/connections",name:"project-connections",component:bj}],kj=Lk({history:mk(),routes:xj});Vx(_w).use(kj).mount("#app");
