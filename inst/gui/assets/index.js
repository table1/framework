const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/angular-html.js","assets/html.js","assets/javascript.js","assets/css.js","assets/angular-ts.js","assets/scss.js","assets/apl.js","assets/xml.js","assets/java.js","assets/json.js","assets/astro.js","assets/typescript.js","assets/postcss.js","assets/tsx.js","assets/blade.js","assets/html-derivative.js","assets/sql.js","assets/bsl.js","assets/sdbl.js","assets/cairo.js","assets/python.js","assets/cobol.js","assets/coffee.js","assets/cpp.js","assets/regexp.js","assets/glsl.js","assets/c.js","assets/crystal.js","assets/shellscript.js","assets/edge.js","assets/elixir.js","assets/elm.js","assets/erb.js","assets/ruby.js","assets/haml.js","assets/graphql.js","assets/jsx.js","assets/lua.js","assets/yaml.js","assets/erlang.js","assets/markdown.js","assets/fortran-fixed-form.js","assets/fortran-free-form.js","assets/fsharp.js","assets/gdresource.js","assets/gdshader.js","assets/gdscript.js","assets/git-commit.js","assets/diff.js","assets/git-rebase.js","assets/glimmer-js.js","assets/glimmer-ts.js","assets/hack.js","assets/handlebars.js","assets/http.js","assets/hurl.js","assets/csv.js","assets/hxml.js","assets/haxe.js","assets/jinja.js","assets/jison.js","assets/julia.js","assets/r.js","assets/latex.js","assets/tex.js","assets/liquid.js","assets/marko.js","assets/less.js","assets/mdc.js","assets/nginx.js","assets/nim.js","assets/perl.js","assets/php.js","assets/pug.js","assets/qml.js","assets/razor.js","assets/csharp.js","assets/rst.js","assets/cmake.js","assets/sas.js","assets/shaderlab.js","assets/hlsl.js","assets/shellsession.js","assets/soy.js","assets/sparql.js","assets/turtle.js","assets/stata.js","assets/svelte.js","assets/templ.js","assets/go.js","assets/ts-tags.js","assets/twig.js","assets/vue.js","assets/vue-html.js","assets/vue-vine.js","assets/stylus.js","assets/xsl.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ah(n){const e=Object.create(null);for(const t of n.split(","))e[t]=1;return t=>t in e}const wt={},Mr=[],js=()=>{},yv=()=>!1,qu=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),uh=n=>n.startsWith("onUpdate:"),Xt=Object.assign,ch=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},h_=Object.prototype.hasOwnProperty,ht=(n,e)=>h_.call(n,e),Be=Array.isArray,Ir=n=>Vl(n)==="[object Map]",lo=n=>Vl(n)==="[object Set]",nm=n=>Vl(n)==="[object Date]",Je=n=>typeof n=="function",Lt=n=>typeof n=="string",hs=n=>typeof n=="symbol",vt=n=>n!==null&&typeof n=="object",bv=n=>(vt(n)||Je(n))&&Je(n.then)&&Je(n.catch),kv=Object.prototype.toString,Vl=n=>kv.call(n),p_=n=>Vl(n).slice(8,-1),xv=n=>Vl(n)==="[object Object]",dh=n=>Lt(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,Uo=ah(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Gu=n=>{const e=Object.create(null);return(t=>e[t]||(e[t]=n(t)))},m_=/-\w/g,ls=Gu(n=>n.replace(m_,e=>e.slice(1).toUpperCase())),g_=/\B([A-Z])/g,pr=Gu(n=>n.replace(g_,"-$1").toLowerCase()),Ku=Gu(n=>n.charAt(0).toUpperCase()+n.slice(1)),Mc=Gu(n=>n?`on${Ku(n)}`:""),xi=(n,e)=>!Object.is(n,e),Fa=(n,...e)=>{for(let t=0;t<n.length;t++)n[t](...e)},_v=(n,e,t,s=!1)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,writable:s,value:t})},su=n=>{const e=parseFloat(n);return isNaN(e)?n:e},v_=n=>{const e=Lt(n)?Number(n):NaN;return isNaN(e)?n:e};let sm;const Ju=()=>sm||(sm=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function jr(n){if(Be(n)){const e={};for(let t=0;t<n.length;t++){const s=n[t],i=Lt(s)?x_(s):jr(s);if(i)for(const r in i)e[r]=i[r]}return e}else if(Lt(n)||vt(n))return n}const y_=/;(?![^(]*\))/g,b_=/:([^]+)/,k_=/\/\*[^]*?\*\//g;function x_(n){const e={};return n.replace(k_,"").split(y_).forEach(t=>{if(t){const s=t.split(b_);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function we(n){let e="";if(Lt(n))e=n;else if(Be(n))for(let t=0;t<n.length;t++){const s=we(n[t]);s&&(e+=s+" ")}else if(vt(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}const __="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",w_=ah(__);function wv(n){return!!n||n===""}function S_(n,e){if(n.length!==e.length)return!1;let t=!0;for(let s=0;t&&s<n.length;s++)t=rr(n[s],e[s]);return t}function rr(n,e){if(n===e)return!0;let t=nm(n),s=nm(e);if(t||s)return t&&s?n.getTime()===e.getTime():!1;if(t=hs(n),s=hs(e),t||s)return n===e;if(t=Be(n),s=Be(e),t||s)return t&&s?S_(n,e):!1;if(t=vt(n),s=vt(e),t||s){if(!t||!s)return!1;const i=Object.keys(n).length,r=Object.keys(e).length;if(i!==r)return!1;for(const o in n){const l=n.hasOwnProperty(o),a=e.hasOwnProperty(o);if(l&&!a||!l&&a||!rr(n[o],e[o]))return!1}}return String(n)===String(e)}function fh(n,e){return n.findIndex(t=>rr(t,e))}const Sv=n=>!!(n&&n.__v_isRef===!0),X=n=>Lt(n)?n:n==null?"":Be(n)||vt(n)&&(n.toString===kv||!Je(n.toString))?Sv(n)?X(n.value):JSON.stringify(n,Cv,2):String(n),Cv=(n,e)=>Sv(e)?Cv(n,e.value):Ir(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[s,i],r)=>(t[Ic(s,r)+" =>"]=i,t),{})}:lo(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>Ic(t))}:hs(e)?Ic(e):vt(e)&&!Be(e)&&!xv(e)?String(e):e,Ic=(n,e="")=>{var t;return hs(n)?`Symbol(${(t=n.description)!=null?t:e})`:n};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Mn;class C_{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Mn,!e&&Mn&&(this.index=(Mn.scopes||(Mn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=Mn;try{return Mn=this,e()}finally{Mn=t}}}on(){++this._on===1&&(this.prevScope=Mn,Mn=this)}off(){this._on>0&&--this._on===0&&(Mn=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let t,s;for(t=0,s=this.effects.length;t<s;t++)this.effects[t].stop();for(this.effects.length=0,t=0,s=this.cleanups.length;t<s;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function A_(){return Mn}let Ct;const jc=new WeakSet;class Av{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Mn&&Mn.active&&Mn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,jc.has(this)&&(jc.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Tv(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,im(this),Dv(this);const e=Ct,t=fs;Ct=this,fs=!0;try{return this.fn()}finally{Pv(this),Ct=e,fs=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)mh(e);this.deps=this.depsTail=void 0,im(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?jc.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Ld(this)&&this.run()}get dirty(){return Ld(this)}}let Ev=0,zo,Ho;function Tv(n,e=!1){if(n.flags|=8,e){n.next=Ho,Ho=n;return}n.next=zo,zo=n}function hh(){Ev++}function ph(){if(--Ev>0)return;if(Ho){let e=Ho;for(Ho=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let n;for(;zo;){let e=zo;for(zo=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){n||(n=s)}e=t}}if(n)throw n}function Dv(n){for(let e=n.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Pv(n){let e,t=n.depsTail,s=t;for(;s;){const i=s.prevDep;s.version===-1?(s===t&&(t=i),mh(s),E_(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=i}n.deps=e,n.depsTail=t}function Ld(n){for(let e=n.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Rv(e.dep.computed)||e.dep.version!==e.version))return!0;return!!n._dirty}function Rv(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===rl)||(n.globalVersion=rl,!n.isSSR&&n.flags&128&&(!n.deps&&!n._dirty||!Ld(n))))return;n.flags|=2;const e=n.dep,t=Ct,s=fs;Ct=n,fs=!0;try{Dv(n);const i=n.fn(n._value);(e.version===0||xi(i,n._value))&&(n.flags|=128,n._value=i,e.version++)}catch(i){throw e.version++,i}finally{Ct=t,fs=s,Pv(n),n.flags&=-3}}function mh(n,e=!1){const{dep:t,prevSub:s,nextSub:i}=n;if(s&&(s.nextSub=i,n.prevSub=void 0),i&&(i.prevSub=s,n.nextSub=void 0),t.subs===n&&(t.subs=s,!s&&t.computed)){t.computed.flags&=-5;for(let r=t.computed.deps;r;r=r.nextDep)mh(r,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function E_(n){const{prevDep:e,nextDep:t}=n;e&&(e.nextDep=t,n.prevDep=void 0),t&&(t.prevDep=e,n.nextDep=void 0)}let fs=!0;const Ov=[];function Zs(){Ov.push(fs),fs=!1}function ei(){const n=Ov.pop();fs=n===void 0?!0:n}function im(n){const{cleanup:e}=n;if(n.cleanup=void 0,e){const t=Ct;Ct=void 0;try{e()}finally{Ct=t}}}let rl=0;class T_{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class gh{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Ct||!fs||Ct===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==Ct)t=this.activeLink=new T_(Ct,this),Ct.deps?(t.prevDep=Ct.depsTail,Ct.depsTail.nextDep=t,Ct.depsTail=t):Ct.deps=Ct.depsTail=t,Lv(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const s=t.nextDep;s.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=s),t.prevDep=Ct.depsTail,t.nextDep=void 0,Ct.depsTail.nextDep=t,Ct.depsTail=t,Ct.deps===t&&(Ct.deps=s)}return t}trigger(e){this.version++,rl++,this.notify(e)}notify(e){hh();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{ph()}}}function Lv(n){if(n.dep.sc++,n.sub.flags&4){const e=n.dep.computed;if(e&&!n.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)Lv(s)}const t=n.dep.subs;t!==n&&(n.prevSub=t,t&&(t.nextSub=n)),n.dep.subs=n}}const Md=new WeakMap,nr=Symbol(""),Id=Symbol(""),ol=Symbol("");function hn(n,e,t){if(fs&&Ct){let s=Md.get(n);s||Md.set(n,s=new Map);let i=s.get(t);i||(s.set(t,i=new gh),i.map=s,i.key=t),i.track()}}function Gs(n,e,t,s,i,r){const o=Md.get(n);if(!o){rl++;return}const l=a=>{a&&a.trigger()};if(hh(),e==="clear")o.forEach(l);else{const a=Be(n),u=a&&dh(t);if(a&&t==="length"){const c=Number(s);o.forEach((d,f)=>{(f==="length"||f===ol||!hs(f)&&f>=c)&&l(d)})}else switch((t!==void 0||o.has(void 0))&&l(o.get(t)),u&&l(o.get(ol)),e){case"add":a?u&&l(o.get("length")):(l(o.get(nr)),Ir(n)&&l(o.get(Id)));break;case"delete":a||(l(o.get(nr)),Ir(n)&&l(o.get(Id)));break;case"set":Ir(n)&&l(o.get(nr));break}}ph()}function wr(n){const e=dt(n);return e===n?e:(hn(e,"iterate",ol),ns(n)?e:e.map(tn))}function Qu(n){return hn(n=dt(n),"iterate",ol),n}const D_={__proto__:null,[Symbol.iterator](){return Vc(this,Symbol.iterator,tn)},concat(...n){return wr(this).concat(...n.map(e=>Be(e)?wr(e):e))},entries(){return Vc(this,"entries",n=>(n[1]=tn(n[1]),n))},every(n,e){return Fs(this,"every",n,e,void 0,arguments)},filter(n,e){return Fs(this,"filter",n,e,t=>t.map(tn),arguments)},find(n,e){return Fs(this,"find",n,e,tn,arguments)},findIndex(n,e){return Fs(this,"findIndex",n,e,void 0,arguments)},findLast(n,e){return Fs(this,"findLast",n,e,tn,arguments)},findLastIndex(n,e){return Fs(this,"findLastIndex",n,e,void 0,arguments)},forEach(n,e){return Fs(this,"forEach",n,e,void 0,arguments)},includes(...n){return $c(this,"includes",n)},indexOf(...n){return $c(this,"indexOf",n)},join(n){return wr(this).join(n)},lastIndexOf(...n){return $c(this,"lastIndexOf",n)},map(n,e){return Fs(this,"map",n,e,void 0,arguments)},pop(){return Co(this,"pop")},push(...n){return Co(this,"push",n)},reduce(n,...e){return rm(this,"reduce",n,e)},reduceRight(n,...e){return rm(this,"reduceRight",n,e)},shift(){return Co(this,"shift")},some(n,e){return Fs(this,"some",n,e,void 0,arguments)},splice(...n){return Co(this,"splice",n)},toReversed(){return wr(this).toReversed()},toSorted(n){return wr(this).toSorted(n)},toSpliced(...n){return wr(this).toSpliced(...n)},unshift(...n){return Co(this,"unshift",n)},values(){return Vc(this,"values",tn)}};function Vc(n,e,t){const s=Qu(n),i=s[e]();return s!==n&&!ns(n)&&(i._next=i.next,i.next=()=>{const r=i._next();return r.done||(r.value=t(r.value)),r}),i}const P_=Array.prototype;function Fs(n,e,t,s,i,r){const o=Qu(n),l=o!==n&&!ns(n),a=o[e];if(a!==P_[e]){const d=a.apply(n,r);return l?tn(d):d}let u=t;o!==n&&(l?u=function(d,f){return t.call(this,tn(d),f,n)}:t.length>2&&(u=function(d,f){return t.call(this,d,f,n)}));const c=a.call(o,u,s);return l&&i?i(c):c}function rm(n,e,t,s){const i=Qu(n);let r=t;return i!==n&&(ns(n)?t.length>3&&(r=function(o,l,a){return t.call(this,o,l,a,n)}):r=function(o,l,a){return t.call(this,o,tn(l),a,n)}),i[e](r,...s)}function $c(n,e,t){const s=dt(n);hn(s,"iterate",ol);const i=s[e](...t);return(i===-1||i===!1)&&bh(t[0])?(t[0]=dt(t[0]),s[e](...t)):i}function Co(n,e,t=[]){Zs(),hh();const s=dt(n)[e].apply(n,t);return ph(),ei(),s}const R_=ah("__proto__,__v_isRef,__isVue"),Mv=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(hs));function O_(n){hs(n)||(n=String(n));const e=dt(this);return hn(e,"has",n),e.hasOwnProperty(n)}class Iv{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,s){if(t==="__v_skip")return e.__v_skip;const i=this._isReadonly,r=this._isShallow;if(t==="__v_isReactive")return!i;if(t==="__v_isReadonly")return i;if(t==="__v_isShallow")return r;if(t==="__v_raw")return s===(i?r?U_:Nv:r?$v:Vv).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=Be(e);if(!i){let a;if(o&&(a=D_[t]))return a;if(t==="hasOwnProperty")return O_}const l=Reflect.get(e,t,bn(e)?e:s);if((hs(t)?Mv.has(t):R_(t))||(i||hn(e,"get",t),r))return l;if(bn(l)){const a=o&&dh(t)?l:l.value;return i&&vt(a)?Vd(a):a}return vt(l)?i?Vd(l):cs(l):l}}class jv extends Iv{constructor(e=!1){super(!1,e)}set(e,t,s,i){let r=e[t];if(!this._isShallow){const a=Ci(r);if(!ns(s)&&!Ci(s)&&(r=dt(r),s=dt(s)),!Be(e)&&bn(r)&&!bn(s))return a||(r.value=s),!0}const o=Be(e)&&dh(t)?Number(t)<e.length:ht(e,t),l=Reflect.set(e,t,s,bn(e)?e:i);return e===dt(i)&&(o?xi(s,r)&&Gs(e,"set",t,s):Gs(e,"add",t,s)),l}deleteProperty(e,t){const s=ht(e,t);e[t];const i=Reflect.deleteProperty(e,t);return i&&s&&Gs(e,"delete",t,void 0),i}has(e,t){const s=Reflect.has(e,t);return(!hs(t)||!Mv.has(t))&&hn(e,"has",t),s}ownKeys(e){return hn(e,"iterate",Be(e)?"length":nr),Reflect.ownKeys(e)}}class L_ extends Iv{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const M_=new jv,I_=new L_,j_=new jv(!0);const jd=n=>n,la=n=>Reflect.getPrototypeOf(n);function V_(n,e,t){return function(...s){const i=this.__v_raw,r=dt(i),o=Ir(r),l=n==="entries"||n===Symbol.iterator&&o,a=n==="keys"&&o,u=i[n](...s),c=t?jd:e?iu:tn;return!e&&hn(r,"iterate",a?Id:nr),{next(){const{value:d,done:f}=u.next();return f?{value:d,done:f}:{value:l?[c(d[0]),c(d[1])]:c(d),done:f}},[Symbol.iterator](){return this}}}}function aa(n){return function(...e){return n==="delete"?!1:n==="clear"?void 0:this}}function $_(n,e){const t={get(i){const r=this.__v_raw,o=dt(r),l=dt(i);n||(xi(i,l)&&hn(o,"get",i),hn(o,"get",l));const{has:a}=la(o),u=e?jd:n?iu:tn;if(a.call(o,i))return u(r.get(i));if(a.call(o,l))return u(r.get(l));r!==o&&r.get(i)},get size(){const i=this.__v_raw;return!n&&hn(dt(i),"iterate",nr),i.size},has(i){const r=this.__v_raw,o=dt(r),l=dt(i);return n||(xi(i,l)&&hn(o,"has",i),hn(o,"has",l)),i===l?r.has(i):r.has(i)||r.has(l)},forEach(i,r){const o=this,l=o.__v_raw,a=dt(l),u=e?jd:n?iu:tn;return!n&&hn(a,"iterate",nr),l.forEach((c,d)=>i.call(r,u(c),u(d),o))}};return Xt(t,n?{add:aa("add"),set:aa("set"),delete:aa("delete"),clear:aa("clear")}:{add(i){!e&&!ns(i)&&!Ci(i)&&(i=dt(i));const r=dt(this);return la(r).has.call(r,i)||(r.add(i),Gs(r,"add",i,i)),this},set(i,r){!e&&!ns(r)&&!Ci(r)&&(r=dt(r));const o=dt(this),{has:l,get:a}=la(o);let u=l.call(o,i);u||(i=dt(i),u=l.call(o,i));const c=a.call(o,i);return o.set(i,r),u?xi(r,c)&&Gs(o,"set",i,r):Gs(o,"add",i,r),this},delete(i){const r=dt(this),{has:o,get:l}=la(r);let a=o.call(r,i);a||(i=dt(i),a=o.call(r,i)),l&&l.call(r,i);const u=r.delete(i);return a&&Gs(r,"delete",i,void 0),u},clear(){const i=dt(this),r=i.size!==0,o=i.clear();return r&&Gs(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=V_(i,n,e)}),t}function vh(n,e){const t=$_(n,e);return(s,i,r)=>i==="__v_isReactive"?!n:i==="__v_isReadonly"?n:i==="__v_raw"?s:Reflect.get(ht(t,i)&&i in s?t:s,i,r)}const N_={get:vh(!1,!1)},B_={get:vh(!1,!0)},F_={get:vh(!0,!1)};const Vv=new WeakMap,$v=new WeakMap,Nv=new WeakMap,U_=new WeakMap;function z_(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function H_(n){return n.__v_skip||!Object.isExtensible(n)?0:z_(p_(n))}function cs(n){return Ci(n)?n:yh(n,!1,M_,N_,Vv)}function Bv(n){return yh(n,!1,j_,B_,$v)}function Vd(n){return yh(n,!0,I_,F_,Nv)}function yh(n,e,t,s,i){if(!vt(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const r=H_(n);if(r===0)return n;const o=i.get(n);if(o)return o;const l=new Proxy(n,r===2?s:t);return i.set(n,l),l}function Vr(n){return Ci(n)?Vr(n.__v_raw):!!(n&&n.__v_isReactive)}function Ci(n){return!!(n&&n.__v_isReadonly)}function ns(n){return!!(n&&n.__v_isShallow)}function bh(n){return n?!!n.__v_raw:!1}function dt(n){const e=n&&n.__v_raw;return e?dt(e):n}function W_(n){return!ht(n,"__v_skip")&&Object.isExtensible(n)&&_v(n,"__v_skip",!0),n}const tn=n=>vt(n)?cs(n):n,iu=n=>vt(n)?Vd(n):n;function bn(n){return n?n.__v_isRef===!0:!1}function Y(n){return Fv(n,!1)}function q_(n){return Fv(n,!0)}function Fv(n,e){return bn(n)?n:new G_(n,e)}class G_{constructor(e,t){this.dep=new gh,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:dt(e),this._value=t?e:tn(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,s=this.__v_isShallow||ns(e)||Ci(e);e=s?e:dt(e),xi(e,t)&&(this._rawValue=e,this._value=s?e:tn(e),this.dep.trigger())}}function ut(n){return bn(n)?n.value:n}const K_={get:(n,e,t)=>e==="__v_raw"?n:ut(Reflect.get(n,e,t)),set:(n,e,t,s)=>{const i=n[e];return bn(i)&&!bn(t)?(i.value=t,!0):Reflect.set(n,e,t,s)}};function Uv(n){return Vr(n)?n:new Proxy(n,K_)}class J_{constructor(e,t,s){this.fn=e,this.setter=t,this._value=void 0,this.dep=new gh(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=rl-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&Ct!==this)return Tv(this,!0),!0}get value(){const e=this.dep.track();return Rv(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Q_(n,e,t=!1){let s,i;return Je(n)?s=n:(s=n.get,i=n.set),new J_(s,i,t)}const ua={},ru=new WeakMap;let Hi;function Y_(n,e=!1,t=Hi){if(t){let s=ru.get(t);s||ru.set(t,s=[]),s.push(n)}}function X_(n,e,t=wt){const{immediate:s,deep:i,once:r,scheduler:o,augmentJob:l,call:a}=t,u=U=>i?U:ns(U)||i===!1||i===0?Ks(U,1):Ks(U);let c,d,f,p,g=!1,b=!1;if(bn(n)?(d=()=>n.value,g=ns(n)):Vr(n)?(d=()=>u(n),g=!0):Be(n)?(b=!0,g=n.some(U=>Vr(U)||ns(U)),d=()=>n.map(U=>{if(bn(U))return U.value;if(Vr(U))return u(U);if(Je(U))return a?a(U,2):U()})):Je(n)?e?d=a?()=>a(n,2):n:d=()=>{if(f){Zs();try{f()}finally{ei()}}const U=Hi;Hi=c;try{return a?a(n,3,[p]):n(p)}finally{Hi=U}}:d=js,e&&i){const U=d,O=i===!0?1/0:i;d=()=>Ks(U(),O)}const x=A_(),m=()=>{c.stop(),x&&x.active&&ch(x.effects,c)};if(r&&e){const U=e;e=(...O)=>{U(...O),m()}}let w=b?new Array(n.length).fill(ua):ua;const P=U=>{if(!(!(c.flags&1)||!c.dirty&&!U))if(e){const O=c.run();if(i||g||(b?O.some((A,_)=>xi(A,w[_])):xi(O,w))){f&&f();const A=Hi;Hi=c;try{const _=[O,w===ua?void 0:b&&w[0]===ua?[]:w,p];w=O,a?a(e,3,_):e(..._)}finally{Hi=A}}}else c.run()};return l&&l(P),c=new Av(d),c.scheduler=o?()=>o(P,!1):P,p=U=>Y_(U,!1,c),f=c.onStop=()=>{const U=ru.get(c);if(U){if(a)a(U,4);else for(const O of U)O();ru.delete(c)}},e?s?P(!0):w=c.run():o?o(P.bind(null,!0),!0):c.run(),m.pause=c.pause.bind(c),m.resume=c.resume.bind(c),m.stop=m,m}function Ks(n,e=1/0,t){if(e<=0||!vt(n)||n.__v_skip||(t=t||new Map,(t.get(n)||0)>=e))return n;if(t.set(n,e),e--,bn(n))Ks(n.value,e,t);else if(Be(n))for(let s=0;s<n.length;s++)Ks(n[s],e,t);else if(lo(n)||Ir(n))n.forEach(s=>{Ks(s,e,t)});else if(xv(n)){for(const s in n)Ks(n[s],e,t);for(const s of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,s)&&Ks(n[s],e,t)}return n}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function $l(n,e,t,s){try{return s?n(...s):n()}catch(i){Yu(i,e,t)}}function ps(n,e,t,s){if(Je(n)){const i=$l(n,e,t,s);return i&&bv(i)&&i.catch(r=>{Yu(r,e,t)}),i}if(Be(n)){const i=[];for(let r=0;r<n.length;r++)i.push(ps(n[r],e,t,s));return i}}function Yu(n,e,t,s=!0){const i=e?e.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||wt;if(e){let l=e.parent;const a=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${t}`;for(;l;){const c=l.ec;if(c){for(let d=0;d<c.length;d++)if(c[d](n,a,u)===!1)return}l=l.parent}if(r){Zs(),$l(r,null,10,[n,a,u]),ei();return}}Z_(n,t,i,s,o)}function Z_(n,e,t,s=!0,i=!1){if(i)throw n;console.error(n)}const Tn=[];let Ds=-1;const $r=[];let di=null,Sr=0;const zv=Promise.resolve();let ou=null;function Zn(n){const e=ou||zv;return n?e.then(this?n.bind(this):n):e}function ew(n){let e=Ds+1,t=Tn.length;for(;e<t;){const s=e+t>>>1,i=Tn[s],r=ll(i);r<n||r===n&&i.flags&2?e=s+1:t=s}return e}function kh(n){if(!(n.flags&1)){const e=ll(n),t=Tn[Tn.length-1];!t||!(n.flags&2)&&e>=ll(t)?Tn.push(n):Tn.splice(ew(e),0,n),n.flags|=1,Hv()}}function Hv(){ou||(ou=zv.then(qv))}function tw(n){Be(n)?$r.push(...n):di&&n.id===-1?di.splice(Sr+1,0,n):n.flags&1||($r.push(n),n.flags|=1),Hv()}function om(n,e,t=Ds+1){for(;t<Tn.length;t++){const s=Tn[t];if(s&&s.flags&2){if(n&&s.id!==n.uid)continue;Tn.splice(t,1),t--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function Wv(n){if($r.length){const e=[...new Set($r)].sort((t,s)=>ll(t)-ll(s));if($r.length=0,di){di.push(...e);return}for(di=e,Sr=0;Sr<di.length;Sr++){const t=di[Sr];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}di=null,Sr=0}}const ll=n=>n.id==null?n.flags&2?-1:1/0:n.id;function qv(n){try{for(Ds=0;Ds<Tn.length;Ds++){const e=Tn[Ds];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),$l(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Ds<Tn.length;Ds++){const e=Tn[Ds];e&&(e.flags&=-2)}Ds=-1,Tn.length=0,Wv(),ou=null,(Tn.length||$r.length)&&qv()}}let rn=null,Gv=null;function lu(n){const e=rn;return rn=n,Gv=n&&n.type.__scopeId||null,e}function te(n,e=rn,t){if(!e||n._n)return n;const s=(...i)=>{s._d&&cu(-1);const r=lu(e);let o;try{o=n(...i)}finally{lu(r),s._d&&cu(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function Ge(n,e){if(rn===null)return n;const t=nc(rn),s=n.dirs||(n.dirs=[]);for(let i=0;i<e.length;i++){let[r,o,l,a=wt]=e[i];r&&(Je(r)&&(r={mounted:r,updated:r}),r.deep&&Ks(o),s.push({dir:r,instance:t,value:o,oldValue:void 0,arg:l,modifiers:a}))}return n}function Vi(n,e,t,s){const i=n.dirs,r=e&&e.dirs;for(let o=0;o<i.length;o++){const l=i[o];r&&(l.oldValue=r[o].value);let a=l.dir[s];a&&(Zs(),ps(a,t,8,[n.el,l,n,e]),ei())}}const Kv=Symbol("_vte"),Jv=n=>n.__isTeleport,Wo=n=>n&&(n.disabled||n.disabled===""),lm=n=>n&&(n.defer||n.defer===""),am=n=>typeof SVGElement<"u"&&n instanceof SVGElement,um=n=>typeof MathMLElement=="function"&&n instanceof MathMLElement,$d=(n,e)=>{const t=n&&n.to;return Lt(t)?e?e(t):null:t},Qv={name:"Teleport",__isTeleport:!0,process(n,e,t,s,i,r,o,l,a,u){const{mc:c,pc:d,pbc:f,o:{insert:p,querySelector:g,createText:b,createComment:x}}=u,m=Wo(e.props);let{shapeFlag:w,children:P,dynamicChildren:U}=e;if(n==null){const O=e.el=b(""),A=e.anchor=b("");p(O,t,s),p(A,t,s);const _=(W,ue)=>{w&16&&c(P,W,ue,i,r,o,l,a)},M=()=>{const W=e.target=$d(e.props,g),ue=Xv(W,e,b,p);W&&(o!=="svg"&&am(W)?o="svg":o!=="mathml"&&um(W)&&(o="mathml"),i&&i.isCE&&(i.ce._teleportTargets||(i.ce._teleportTargets=new Set)).add(W),m||(_(W,ue),Ua(e,!1)))};m&&(_(t,A),Ua(e,!0)),lm(e.props)?(e.el.__isMounted=!1,Cn(()=>{M(),delete e.el.__isMounted},r)):M()}else{if(lm(e.props)&&n.el.__isMounted===!1){Cn(()=>{Qv.process(n,e,t,s,i,r,o,l,a,u)},r);return}e.el=n.el,e.targetStart=n.targetStart;const O=e.anchor=n.anchor,A=e.target=n.target,_=e.targetAnchor=n.targetAnchor,M=Wo(n.props),W=M?t:A,ue=M?O:_;if(o==="svg"||am(A)?o="svg":(o==="mathml"||um(A))&&(o="mathml"),U?(f(n.dynamicChildren,U,W,i,r,o,l),wh(n,e,!0)):a||d(n,e,W,ue,i,r,o,l,!1),m)M?e.props&&n.props&&e.props.to!==n.props.to&&(e.props.to=n.props.to):ca(e,t,O,u,1);else if((e.props&&e.props.to)!==(n.props&&n.props.to)){const ee=e.target=$d(e.props,g);ee&&ca(e,ee,null,u,0)}else M&&ca(e,A,_,u,1);Ua(e,m)}},remove(n,e,t,{um:s,o:{remove:i}},r){const{shapeFlag:o,children:l,anchor:a,targetStart:u,targetAnchor:c,target:d,props:f}=n;if(d&&(i(u),i(c)),r&&i(a),o&16){const p=r||!Wo(f);for(let g=0;g<l.length;g++){const b=l[g];s(b,e,t,p,!!b.dynamicChildren)}}},move:ca,hydrate:nw};function ca(n,e,t,{o:{insert:s},m:i},r=2){r===0&&s(n.targetAnchor,e,t);const{el:o,anchor:l,shapeFlag:a,children:u,props:c}=n,d=r===2;if(d&&s(o,e,t),(!d||Wo(c))&&a&16)for(let f=0;f<u.length;f++)i(u[f],e,t,2);d&&s(l,e,t)}function nw(n,e,t,s,i,r,{o:{nextSibling:o,parentNode:l,querySelector:a,insert:u,createText:c}},d){function f(b,x,m,w){x.anchor=d(o(b),x,l(b),t,s,i,r),x.targetStart=m,x.targetAnchor=w}const p=e.target=$d(e.props,a),g=Wo(e.props);if(p){const b=p._lpa||p.firstChild;if(e.shapeFlag&16)if(g)f(n,e,b,b&&o(b));else{e.anchor=o(n);let x=b;for(;x;){if(x&&x.nodeType===8){if(x.data==="teleport start anchor")e.targetStart=x;else if(x.data==="teleport anchor"){e.targetAnchor=x,p._lpa=e.targetAnchor&&o(e.targetAnchor);break}}x=o(x)}e.targetAnchor||Xv(p,e,c,u),d(b&&o(b),e,p,t,s,i,r)}Ua(e,g)}else g&&e.shapeFlag&16&&f(n,e,n,o(n));return e.anchor&&o(e.anchor)}const Yv=Qv;function Ua(n,e){const t=n.ctx;if(t&&t.ut){let s,i;for(e?(s=n.el,i=n.anchor):(s=n.targetStart,i=n.targetAnchor);s&&s!==i;)s.nodeType===1&&s.setAttribute("data-v-owner",t.uid),s=s.nextSibling;t.ut()}}function Xv(n,e,t,s){const i=e.targetStart=t(""),r=e.targetAnchor=t("");return i[Kv]=r,n&&(s(i,n),s(r,n)),r}const qs=Symbol("_leaveCb"),da=Symbol("_enterCb");function sw(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return kn(()=>{n.isMounted=!0}),ly(()=>{n.isUnmounting=!0}),n}const Qn=[Function,Array],Zv={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Qn,onEnter:Qn,onAfterEnter:Qn,onEnterCancelled:Qn,onBeforeLeave:Qn,onLeave:Qn,onAfterLeave:Qn,onLeaveCancelled:Qn,onBeforeAppear:Qn,onAppear:Qn,onAfterAppear:Qn,onAppearCancelled:Qn},ey=n=>{const e=n.subTree;return e.component?ey(e.component):e},iw={name:"BaseTransition",props:Zv,setup(n,{slots:e}){const t=Ch(),s=sw();return()=>{const i=e.default&&sy(e.default(),!0);if(!i||!i.length)return;const r=ty(i),o=dt(n),{mode:l}=o;if(s.isLeaving)return Nc(r);const a=cm(r);if(!a)return Nc(r);let u=Nd(a,o,s,t,d=>u=d);a.type!==mn&&al(a,u);let c=t.subTree&&cm(t.subTree);if(c&&c.type!==mn&&!Ki(c,a)&&ey(t).type!==mn){let d=Nd(c,o,s,t);if(al(c,d),l==="out-in"&&a.type!==mn)return s.isLeaving=!0,d.afterLeave=()=>{s.isLeaving=!1,t.job.flags&8||t.update(),delete d.afterLeave,c=void 0},Nc(r);l==="in-out"&&a.type!==mn?d.delayLeave=(f,p,g)=>{const b=ny(s,c);b[String(c.key)]=c,f[qs]=()=>{p(),f[qs]=void 0,delete u.delayedLeave,c=void 0},u.delayedLeave=()=>{g(),delete u.delayedLeave,c=void 0}}:c=void 0}else c&&(c=void 0);return r}}};function ty(n){let e=n[0];if(n.length>1){for(const t of n)if(t.type!==mn){e=t;break}}return e}const rw=iw;function ny(n,e){const{leavingVNodes:t}=n;let s=t.get(e.type);return s||(s=Object.create(null),t.set(e.type,s)),s}function Nd(n,e,t,s,i){const{appear:r,mode:o,persisted:l=!1,onBeforeEnter:a,onEnter:u,onAfterEnter:c,onEnterCancelled:d,onBeforeLeave:f,onLeave:p,onAfterLeave:g,onLeaveCancelled:b,onBeforeAppear:x,onAppear:m,onAfterAppear:w,onAppearCancelled:P}=e,U=String(n.key),O=ny(t,n),A=(W,ue)=>{W&&ps(W,s,9,ue)},_=(W,ue)=>{const ee=ue[1];A(W,ue),Be(W)?W.every(F=>F.length<=1)&&ee():W.length<=1&&ee()},M={mode:o,persisted:l,beforeEnter(W){let ue=a;if(!t.isMounted)if(r)ue=x||a;else return;W[qs]&&W[qs](!0);const ee=O[U];ee&&Ki(n,ee)&&ee.el[qs]&&ee.el[qs](),A(ue,[W])},enter(W){let ue=u,ee=c,F=d;if(!t.isMounted)if(r)ue=m||u,ee=w||c,F=P||d;else return;let ae=!1;const Z=W[da]=B=>{ae||(ae=!0,B?A(F,[W]):A(ee,[W]),M.delayedLeave&&M.delayedLeave(),W[da]=void 0)};ue?_(ue,[W,Z]):Z()},leave(W,ue){const ee=String(n.key);if(W[da]&&W[da](!0),t.isUnmounting)return ue();A(f,[W]);let F=!1;const ae=W[qs]=Z=>{F||(F=!0,ue(),Z?A(b,[W]):A(g,[W]),W[qs]=void 0,O[ee]===n&&delete O[ee])};O[ee]=n,p?_(p,[W,ae]):ae()},clone(W){const ue=Nd(W,e,t,s,i);return i&&i(ue),ue}};return M}function Nc(n){if(Xu(n))return n=Ai(n),n.children=null,n}function cm(n){if(!Xu(n))return Jv(n.type)&&n.children?ty(n.children):n;if(n.component)return n.component.subTree;const{shapeFlag:e,children:t}=n;if(t){if(e&16)return t[0];if(e&32&&Je(t.default))return t.default()}}function al(n,e){n.shapeFlag&6&&n.component?(n.transition=e,al(n.component.subTree,e)):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}function sy(n,e=!1,t){let s=[],i=0;for(let r=0;r<n.length;r++){let o=n[r];const l=t==null?o.key:String(t)+String(o.key!=null?o.key:r);o.type===xe?(o.patchFlag&128&&i++,s=s.concat(sy(o.children,e,l))):(e||o.type!==mn)&&s.push(l!=null?Ai(o,{key:l}):o)}if(i>1)for(let r=0;r<s.length;r++)s[r].patchFlag=-2;return s}function iy(n,e){return Je(n)?Xt({name:n.name},e,{setup:n}):n}function ry(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}const au=new WeakMap;function qo(n,e,t,s,i=!1){if(Be(n)){n.forEach((g,b)=>qo(g,e&&(Be(e)?e[b]:e),t,s,i));return}if(Nr(s)&&!i){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&qo(n,e,t,s.component.subTree);return}const r=s.shapeFlag&4?nc(s.component):s.el,o=i?null:r,{i:l,r:a}=n,u=e&&e.r,c=l.refs===wt?l.refs={}:l.refs,d=l.setupState,f=dt(d),p=d===wt?yv:g=>ht(f,g);if(u!=null&&u!==a){if(dm(e),Lt(u))c[u]=null,p(u)&&(d[u]=null);else if(bn(u)){u.value=null;const g=e;g.k&&(c[g.k]=null)}}if(Je(a))$l(a,l,12,[o,c]);else{const g=Lt(a),b=bn(a);if(g||b){const x=()=>{if(n.f){const m=g?p(a)?d[a]:c[a]:a.value;if(i)Be(m)&&ch(m,r);else if(Be(m))m.includes(r)||m.push(r);else if(g)c[a]=[r],p(a)&&(d[a]=c[a]);else{const w=[r];a.value=w,n.k&&(c[n.k]=w)}}else g?(c[a]=o,p(a)&&(d[a]=o)):b&&(a.value=o,n.k&&(c[n.k]=o))};if(o){const m=()=>{x(),au.delete(n)};m.id=-1,au.set(n,m),Cn(m,t)}else dm(n),x()}}}function dm(n){const e=au.get(n);e&&(e.flags|=8,au.delete(n))}Ju().requestIdleCallback;Ju().cancelIdleCallback;const Nr=n=>!!n.type.__asyncLoader,Xu=n=>n.type.__isKeepAlive;function ow(n,e){oy(n,"a",e)}function lw(n,e){oy(n,"da",e)}function oy(n,e,t=gn){const s=n.__wdc||(n.__wdc=()=>{let i=t;for(;i;){if(i.isDeactivated)return;i=i.parent}return n()});if(Zu(e,s,t),t){let i=t.parent;for(;i&&i.parent;)Xu(i.parent.vnode)&&aw(s,e,t,i),i=i.parent}}function aw(n,e,t,s){const i=Zu(e,n,s,!0);ao(()=>{ch(s[e],i)},t)}function Zu(n,e,t=gn,s=!1){if(t){const i=t[n]||(t[n]=[]),r=e.__weh||(e.__weh=(...o)=>{Zs();const l=Nl(t),a=ps(e,t,n,o);return l(),ei(),a});return s?i.unshift(r):i.push(r),r}}const ii=n=>(e,t=gn)=>{(!dl||n==="sp")&&Zu(n,(...s)=>e(...s),t)},uw=ii("bm"),kn=ii("m"),cw=ii("bu"),dw=ii("u"),ly=ii("bum"),ao=ii("um"),fw=ii("sp"),hw=ii("rtg"),pw=ii("rtc");function mw(n,e=gn){Zu("ec",n,e)}const ay="components";function Bd(n,e){return cy(ay,n,!0,e)||n}const uy=Symbol.for("v-ndc");function Nn(n){return Lt(n)?cy(ay,n,!1)||n:n||uy}function cy(n,e,t=!0,s=!1){const i=rn||gn;if(i){const r=i.type;{const l=i2(r,!1);if(l&&(l===e||l===ls(e)||l===Ku(ls(e))))return r}const o=fm(i[n]||r[n],e)||fm(i.appContext[n],e);return!o&&s?r:o}}function fm(n,e){return n&&(n[e]||n[ls(e)]||n[Ku(ls(e))])}function Ve(n,e,t,s){let i;const r=t,o=Be(n);if(o||Lt(n)){const l=o&&Vr(n);let a=!1,u=!1;l&&(a=!ns(n),u=Ci(n),n=Qu(n)),i=new Array(n.length);for(let c=0,d=n.length;c<d;c++)i[c]=e(a?u?iu(tn(n[c])):tn(n[c]):n[c],c,void 0,r)}else if(typeof n=="number"){i=new Array(n);for(let l=0;l<n;l++)i[l]=e(l+1,l,void 0,r)}else if(vt(n))if(n[Symbol.iterator])i=Array.from(n,(l,a)=>e(l,a,void 0,r));else{const l=Object.keys(n);i=new Array(l.length);for(let a=0,u=l.length;a<u;a++){const c=l[a];i[a]=e(n[c],c,a,r)}}else i=[];return i}function gw(n,e){for(let t=0;t<e.length;t++){const s=e[t];if(Be(s))for(let i=0;i<s.length;i++)n[s[i].name]=s[i].fn;else s&&(n[s.name]=s.key?(...i)=>{const r=s.fn(...i);return r&&(r.key=s.key),r}:s.fn)}return n}function pt(n,e,t={},s,i){if(rn.ce||rn.parent&&Nr(rn.parent)&&rn.parent.ce){const u=Object.keys(t).length>0;return e!=="default"&&(t.name=e),v(),Ee(xe,null,[C("slot",t,s&&s())],u?-2:64)}let r=n[e];r&&r._c&&(r._d=!1),v();const o=r&&dy(r(t)),l=t.key||o&&o.key,a=Ee(xe,{key:(l&&!hs(l)?l:`_${e}`)+(!o&&s?"_fb":"")},o||(s?s():[]),o&&n._===1?64:-2);return!i&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),r&&r._c&&(r._d=!0),a}function dy(n){return n.some(e=>cl(e)?!(e.type===mn||e.type===xe&&!dy(e.children)):!0)?n:null}const Fd=n=>n?Py(n)?nc(n):Fd(n.parent):null,Go=Xt(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>Fd(n.parent),$root:n=>Fd(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>hy(n),$forceUpdate:n=>n.f||(n.f=()=>{kh(n.update)}),$nextTick:n=>n.n||(n.n=Zn.bind(n.proxy)),$watch:n=>Nw.bind(n)}),Bc=(n,e)=>n!==wt&&!n.__isScriptSetup&&ht(n,e),vw={get({_:n},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:s,data:i,props:r,accessCache:o,type:l,appContext:a}=n;let u;if(e[0]!=="$"){const p=o[e];if(p!==void 0)switch(p){case 1:return s[e];case 2:return i[e];case 4:return t[e];case 3:return r[e]}else{if(Bc(s,e))return o[e]=1,s[e];if(i!==wt&&ht(i,e))return o[e]=2,i[e];if((u=n.propsOptions[0])&&ht(u,e))return o[e]=3,r[e];if(t!==wt&&ht(t,e))return o[e]=4,t[e];Ud&&(o[e]=0)}}const c=Go[e];let d,f;if(c)return e==="$attrs"&&hn(n.attrs,"get",""),c(n);if((d=l.__cssModules)&&(d=d[e]))return d;if(t!==wt&&ht(t,e))return o[e]=4,t[e];if(f=a.config.globalProperties,ht(f,e))return f[e]},set({_:n},e,t){const{data:s,setupState:i,ctx:r}=n;return Bc(i,e)?(i[e]=t,!0):s!==wt&&ht(s,e)?(s[e]=t,!0):ht(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(r[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:s,appContext:i,propsOptions:r,type:o}},l){let a,u;return!!(t[l]||n!==wt&&l[0]!=="$"&&ht(n,l)||Bc(e,l)||(a=r[0])&&ht(a,l)||ht(s,l)||ht(Go,l)||ht(i.config.globalProperties,l)||(u=o.__cssModules)&&u[l])},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:ht(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};function yw(){return bw().slots}function bw(n){const e=Ch();return e.setupContext||(e.setupContext=Oy(e))}function hm(n){return Be(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}let Ud=!0;function kw(n){const e=hy(n),t=n.proxy,s=n.ctx;Ud=!1,e.beforeCreate&&pm(e.beforeCreate,n,"bc");const{data:i,computed:r,methods:o,watch:l,provide:a,inject:u,created:c,beforeMount:d,mounted:f,beforeUpdate:p,updated:g,activated:b,deactivated:x,beforeDestroy:m,beforeUnmount:w,destroyed:P,unmounted:U,render:O,renderTracked:A,renderTriggered:_,errorCaptured:M,serverPrefetch:W,expose:ue,inheritAttrs:ee,components:F,directives:ae,filters:Z}=e;if(u&&xw(u,s,null),o)for(const Q in o){const ce=o[Q];Je(ce)&&(s[Q]=ce.bind(t))}if(i){const Q=i.call(t,t);vt(Q)&&(n.data=cs(Q))}if(Ud=!0,r)for(const Q in r){const ce=r[Q],ve=Je(ce)?ce.bind(t,t):Je(ce.get)?ce.get.bind(t,t):js,je=!Je(ce)&&Je(ce.set)?ce.set.bind(t):js,$e=z({get:ve,set:je});Object.defineProperty(s,Q,{enumerable:!0,configurable:!0,get:()=>$e.value,set:Me=>$e.value=Me})}if(l)for(const Q in l)fy(l[Q],s,t,Q);if(a){const Q=Je(a)?a.call(t):a;Reflect.ownKeys(Q).forEach(ce=>{Ko(ce,Q[ce])})}c&&pm(c,n,"c");function J(Q,ce){Be(ce)?ce.forEach(ve=>Q(ve.bind(t))):ce&&Q(ce.bind(t))}if(J(uw,d),J(kn,f),J(cw,p),J(dw,g),J(ow,b),J(lw,x),J(mw,M),J(pw,A),J(hw,_),J(ly,w),J(ao,U),J(fw,W),Be(ue))if(ue.length){const Q=n.exposed||(n.exposed={});ue.forEach(ce=>{Object.defineProperty(Q,ce,{get:()=>t[ce],set:ve=>t[ce]=ve,enumerable:!0})})}else n.exposed||(n.exposed={});O&&n.render===js&&(n.render=O),ee!=null&&(n.inheritAttrs=ee),F&&(n.components=F),ae&&(n.directives=ae),W&&ry(n)}function xw(n,e,t=js){Be(n)&&(n=zd(n));for(const s in n){const i=n[s];let r;vt(i)?"default"in i?r=ss(i.from||s,i.default,!0):r=ss(i.from||s):r=ss(i),bn(r)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):e[s]=r}}function pm(n,e,t){ps(Be(n)?n.map(s=>s.bind(e.proxy)):n.bind(e.proxy),e,t)}function fy(n,e,t,s){let i=s.includes(".")?Cy(t,s):()=>t[s];if(Lt(n)){const r=e[n];Je(r)&&Ie(i,r)}else if(Je(n))Ie(i,n.bind(t));else if(vt(n))if(Be(n))n.forEach(r=>fy(r,e,t,s));else{const r=Je(n.handler)?n.handler.bind(t):e[n.handler];Je(r)&&Ie(i,r,n)}}function hy(n){const e=n.type,{mixins:t,extends:s}=e,{mixins:i,optionsCache:r,config:{optionMergeStrategies:o}}=n.appContext,l=r.get(e);let a;return l?a=l:!i.length&&!t&&!s?a=e:(a={},i.length&&i.forEach(u=>uu(a,u,o,!0)),uu(a,e,o)),vt(e)&&r.set(e,a),a}function uu(n,e,t,s=!1){const{mixins:i,extends:r}=e;r&&uu(n,r,t,!0),i&&i.forEach(o=>uu(n,o,t,!0));for(const o in e)if(!(s&&o==="expose")){const l=_w[o]||t&&t[o];n[o]=l?l(n[o],e[o]):e[o]}return n}const _w={data:mm,props:gm,emits:gm,methods:jo,computed:jo,beforeCreate:Sn,created:Sn,beforeMount:Sn,mounted:Sn,beforeUpdate:Sn,updated:Sn,beforeDestroy:Sn,beforeUnmount:Sn,destroyed:Sn,unmounted:Sn,activated:Sn,deactivated:Sn,errorCaptured:Sn,serverPrefetch:Sn,components:jo,directives:jo,watch:Sw,provide:mm,inject:ww};function mm(n,e){return e?n?function(){return Xt(Je(n)?n.call(this,this):n,Je(e)?e.call(this,this):e)}:e:n}function ww(n,e){return jo(zd(n),zd(e))}function zd(n){if(Be(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function Sn(n,e){return n?[...new Set([].concat(n,e))]:e}function jo(n,e){return n?Xt(Object.create(null),n,e):e}function gm(n,e){return n?Be(n)&&Be(e)?[...new Set([...n,...e])]:Xt(Object.create(null),hm(n),hm(e??{})):e}function Sw(n,e){if(!n)return e;if(!e)return n;const t=Xt(Object.create(null),n);for(const s in e)t[s]=Sn(n[s],e[s]);return t}function py(){return{app:null,config:{isNativeTag:yv,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Cw=0;function Aw(n,e){return function(s,i=null){Je(s)||(s=Xt({},s)),i!=null&&!vt(i)&&(i=null);const r=py(),o=new WeakSet,l=[];let a=!1;const u=r.app={_uid:Cw++,_component:s,_props:i,_container:null,_context:r,_instance:null,version:o2,get config(){return r.config},set config(c){},use(c,...d){return o.has(c)||(c&&Je(c.install)?(o.add(c),c.install(u,...d)):Je(c)&&(o.add(c),c(u,...d))),u},mixin(c){return r.mixins.includes(c)||r.mixins.push(c),u},component(c,d){return d?(r.components[c]=d,u):r.components[c]},directive(c,d){return d?(r.directives[c]=d,u):r.directives[c]},mount(c,d,f){if(!a){const p=u._ceVNode||C(s,i);return p.appContext=r,f===!0?f="svg":f===!1&&(f=void 0),n(p,c,f),a=!0,u._container=c,c.__vue_app__=u,nc(p.component)}},onUnmount(c){l.push(c)},unmount(){a&&(ps(l,u._instance,16),n(null,u._container),delete u._container.__vue_app__)},provide(c,d){return r.provides[c]=d,u},runWithContext(c){const d=Br;Br=u;try{return c()}finally{Br=d}}};return u}}let Br=null;function Ko(n,e){if(gn){let t=gn.provides;const s=gn.parent&&gn.parent.provides;s===t&&(t=gn.provides=Object.create(s)),t[n]=e}}function ss(n,e,t=!1){const s=Ch();if(s||Br){let i=Br?Br._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(i&&n in i)return i[n];if(arguments.length>1)return t&&Je(e)?e.call(s&&s.proxy):e}}const my={},gy=()=>Object.create(my),vy=n=>Object.getPrototypeOf(n)===my;function Ew(n,e,t,s=!1){const i={},r=gy();n.propsDefaults=Object.create(null),yy(n,e,i,r);for(const o in n.propsOptions[0])o in i||(i[o]=void 0);t?n.props=s?i:Bv(i):n.type.props?n.props=i:n.props=r,n.attrs=r}function Tw(n,e,t,s){const{props:i,attrs:r,vnode:{patchFlag:o}}=n,l=dt(i),[a]=n.propsOptions;let u=!1;if((s||o>0)&&!(o&16)){if(o&8){const c=n.vnode.dynamicProps;for(let d=0;d<c.length;d++){let f=c[d];if(ec(n.emitsOptions,f))continue;const p=e[f];if(a)if(ht(r,f))p!==r[f]&&(r[f]=p,u=!0);else{const g=ls(f);i[g]=Hd(a,l,g,p,n,!1)}else p!==r[f]&&(r[f]=p,u=!0)}}}else{yy(n,e,i,r)&&(u=!0);let c;for(const d in l)(!e||!ht(e,d)&&((c=pr(d))===d||!ht(e,c)))&&(a?t&&(t[d]!==void 0||t[c]!==void 0)&&(i[d]=Hd(a,l,d,void 0,n,!0)):delete i[d]);if(r!==l)for(const d in r)(!e||!ht(e,d))&&(delete r[d],u=!0)}u&&Gs(n.attrs,"set","")}function yy(n,e,t,s){const[i,r]=n.propsOptions;let o=!1,l;if(e)for(let a in e){if(Uo(a))continue;const u=e[a];let c;i&&ht(i,c=ls(a))?!r||!r.includes(c)?t[c]=u:(l||(l={}))[c]=u:ec(n.emitsOptions,a)||(!(a in s)||u!==s[a])&&(s[a]=u,o=!0)}if(r){const a=dt(t),u=l||wt;for(let c=0;c<r.length;c++){const d=r[c];t[d]=Hd(i,a,d,u[d],n,!ht(u,d))}}return o}function Hd(n,e,t,s,i,r){const o=n[t];if(o!=null){const l=ht(o,"default");if(l&&s===void 0){const a=o.default;if(o.type!==Function&&!o.skipFactory&&Je(a)){const{propsDefaults:u}=i;if(t in u)s=u[t];else{const c=Nl(i);s=u[t]=a.call(null,e),c()}}else s=a;i.ce&&i.ce._setProp(t,s)}o[0]&&(r&&!l?s=!1:o[1]&&(s===""||s===pr(t))&&(s=!0))}return s}const Dw=new WeakMap;function by(n,e,t=!1){const s=t?Dw:e.propsCache,i=s.get(n);if(i)return i;const r=n.props,o={},l=[];let a=!1;if(!Je(n)){const c=d=>{a=!0;const[f,p]=by(d,e,!0);Xt(o,f),p&&l.push(...p)};!t&&e.mixins.length&&e.mixins.forEach(c),n.extends&&c(n.extends),n.mixins&&n.mixins.forEach(c)}if(!r&&!a)return vt(n)&&s.set(n,Mr),Mr;if(Be(r))for(let c=0;c<r.length;c++){const d=ls(r[c]);vm(d)&&(o[d]=wt)}else if(r)for(const c in r){const d=ls(c);if(vm(d)){const f=r[c],p=o[d]=Be(f)||Je(f)?{type:f}:Xt({},f),g=p.type;let b=!1,x=!0;if(Be(g))for(let m=0;m<g.length;++m){const w=g[m],P=Je(w)&&w.name;if(P==="Boolean"){b=!0;break}else P==="String"&&(x=!1)}else b=Je(g)&&g.name==="Boolean";p[0]=b,p[1]=x,(b||ht(p,"default"))&&l.push(d)}}const u=[o,l];return vt(n)&&s.set(n,u),u}function vm(n){return n[0]!=="$"&&!Uo(n)}const xh=n=>n==="_"||n==="_ctx"||n==="$stable",_h=n=>Be(n)?n.map(Ps):[Ps(n)],Pw=(n,e,t)=>{if(e._n)return e;const s=te((...i)=>_h(e(...i)),t);return s._c=!1,s},ky=(n,e,t)=>{const s=n._ctx;for(const i in n){if(xh(i))continue;const r=n[i];if(Je(r))e[i]=Pw(i,r,s);else if(r!=null){const o=_h(r);e[i]=()=>o}}},xy=(n,e)=>{const t=_h(e);n.slots.default=()=>t},_y=(n,e,t)=>{for(const s in e)(t||!xh(s))&&(n[s]=e[s])},Rw=(n,e,t)=>{const s=n.slots=gy();if(n.vnode.shapeFlag&32){const i=e._;i?(_y(s,e,t),t&&_v(s,"_",i,!0)):ky(e,s)}else e&&xy(n,e)},Ow=(n,e,t)=>{const{vnode:s,slots:i}=n;let r=!0,o=wt;if(s.shapeFlag&32){const l=e._;l?t&&l===1?r=!1:_y(i,e,t):(r=!e.$stable,ky(e,i)),o=e}else e&&(xy(n,e),o={default:1});if(r)for(const l in i)!xh(l)&&o[l]==null&&delete i[l]},Cn=Gw;function Lw(n){return Mw(n)}function Mw(n,e){const t=Ju();t.__VUE__=!0;const{insert:s,remove:i,patchProp:r,createElement:o,createText:l,createComment:a,setText:u,setElementText:c,parentNode:d,nextSibling:f,setScopeId:p=js,insertStaticContent:g}=n,b=(T,N,G,le=null,se=null,ie=null,be=void 0,L=null,j=!!N.dynamicChildren)=>{if(T===N)return;T&&!Ki(T,N)&&(le=oe(T),Me(T,se,ie,!0),T=null),N.patchFlag===-2&&(j=!1,N.dynamicChildren=null);const{type:$,ref:de,shapeFlag:ge}=N;switch($){case tc:x(T,N,G,le);break;case mn:m(T,N,G,le);break;case za:T==null&&w(N,G,le,be);break;case xe:F(T,N,G,le,se,ie,be,L,j);break;default:ge&1?O(T,N,G,le,se,ie,be,L,j):ge&6?ae(T,N,G,le,se,ie,be,L,j):(ge&64||ge&128)&&$.process(T,N,G,le,se,ie,be,L,j,E)}de!=null&&se?qo(de,T&&T.ref,ie,N||T,!N):de==null&&T&&T.ref!=null&&qo(T.ref,null,ie,T,!0)},x=(T,N,G,le)=>{if(T==null)s(N.el=l(N.children),G,le);else{const se=N.el=T.el;N.children!==T.children&&u(se,N.children)}},m=(T,N,G,le)=>{T==null?s(N.el=a(N.children||""),G,le):N.el=T.el},w=(T,N,G,le)=>{[T.el,T.anchor]=g(T.children,N,G,le,T.el,T.anchor)},P=({el:T,anchor:N},G,le)=>{let se;for(;T&&T!==N;)se=f(T),s(T,G,le),T=se;s(N,G,le)},U=({el:T,anchor:N})=>{let G;for(;T&&T!==N;)G=f(T),i(T),T=G;i(N)},O=(T,N,G,le,se,ie,be,L,j)=>{N.type==="svg"?be="svg":N.type==="math"&&(be="mathml"),T==null?A(N,G,le,se,ie,be,L,j):W(T,N,se,ie,be,L,j)},A=(T,N,G,le,se,ie,be,L)=>{let j,$;const{props:de,shapeFlag:ge,transition:Se,dirs:Re}=T;if(j=T.el=o(T.type,ie,de&&de.is,de),ge&8?c(j,T.children):ge&16&&M(T.children,j,null,le,se,Fc(T,ie),be,L),Re&&Vi(T,null,le,"created"),_(j,T,T.scopeId,be,le),de){for(const et in de)et!=="value"&&!Uo(et)&&r(j,et,null,de[et],ie,le);"value"in de&&r(j,"value",null,de.value,ie),($=de.onVnodeBeforeMount)&&_s($,le,T)}Re&&Vi(T,null,le,"beforeMount");const Fe=Iw(se,Se);Fe&&Se.beforeEnter(j),s(j,N,G),(($=de&&de.onVnodeMounted)||Fe||Re)&&Cn(()=>{$&&_s($,le,T),Fe&&Se.enter(j),Re&&Vi(T,null,le,"mounted")},se)},_=(T,N,G,le,se)=>{if(G&&p(T,G),le)for(let ie=0;ie<le.length;ie++)p(T,le[ie]);if(se){let ie=se.subTree;if(N===ie||Ey(ie.type)&&(ie.ssContent===N||ie.ssFallback===N)){const be=se.vnode;_(T,be,be.scopeId,be.slotScopeIds,se.parent)}}},M=(T,N,G,le,se,ie,be,L,j=0)=>{for(let $=j;$<T.length;$++){const de=T[$]=L?fi(T[$]):Ps(T[$]);b(null,de,N,G,le,se,ie,be,L)}},W=(T,N,G,le,se,ie,be)=>{const L=N.el=T.el;let{patchFlag:j,dynamicChildren:$,dirs:de}=N;j|=T.patchFlag&16;const ge=T.props||wt,Se=N.props||wt;let Re;if(G&&$i(G,!1),(Re=Se.onVnodeBeforeUpdate)&&_s(Re,G,N,T),de&&Vi(N,T,G,"beforeUpdate"),G&&$i(G,!0),(ge.innerHTML&&Se.innerHTML==null||ge.textContent&&Se.textContent==null)&&c(L,""),$?ue(T.dynamicChildren,$,L,G,le,Fc(N,se),ie):be||ce(T,N,L,null,G,le,Fc(N,se),ie,!1),j>0){if(j&16)ee(L,ge,Se,G,se);else if(j&2&&ge.class!==Se.class&&r(L,"class",null,Se.class,se),j&4&&r(L,"style",ge.style,Se.style,se),j&8){const Fe=N.dynamicProps;for(let et=0;et<Fe.length;et++){const me=Fe[et],yt=ge[me],Rt=Se[me];(Rt!==yt||me==="value")&&r(L,me,yt,Rt,se,G)}}j&1&&T.children!==N.children&&c(L,N.children)}else!be&&$==null&&ee(L,ge,Se,G,se);((Re=Se.onVnodeUpdated)||de)&&Cn(()=>{Re&&_s(Re,G,N,T),de&&Vi(N,T,G,"updated")},le)},ue=(T,N,G,le,se,ie,be)=>{for(let L=0;L<N.length;L++){const j=T[L],$=N[L],de=j.el&&(j.type===xe||!Ki(j,$)||j.shapeFlag&198)?d(j.el):G;b(j,$,de,null,le,se,ie,be,!0)}},ee=(T,N,G,le,se)=>{if(N!==G){if(N!==wt)for(const ie in N)!Uo(ie)&&!(ie in G)&&r(T,ie,N[ie],null,se,le);for(const ie in G){if(Uo(ie))continue;const be=G[ie],L=N[ie];be!==L&&ie!=="value"&&r(T,ie,L,be,se,le)}"value"in G&&r(T,"value",N.value,G.value,se)}},F=(T,N,G,le,se,ie,be,L,j)=>{const $=N.el=T?T.el:l(""),de=N.anchor=T?T.anchor:l("");let{patchFlag:ge,dynamicChildren:Se,slotScopeIds:Re}=N;Re&&(L=L?L.concat(Re):Re),T==null?(s($,G,le),s(de,G,le),M(N.children||[],G,de,se,ie,be,L,j)):ge>0&&ge&64&&Se&&T.dynamicChildren?(ue(T.dynamicChildren,Se,G,se,ie,be,L),(N.key!=null||se&&N===se.subTree)&&wh(T,N,!0)):ce(T,N,G,de,se,ie,be,L,j)},ae=(T,N,G,le,se,ie,be,L,j)=>{N.slotScopeIds=L,T==null?N.shapeFlag&512?se.ctx.activate(N,G,le,be,j):Z(N,G,le,se,ie,be,j):B(T,N,j)},Z=(T,N,G,le,se,ie,be)=>{const L=T.component=e2(T,le,se);if(Xu(T)&&(L.ctx.renderer=E),t2(L,!1,be),L.asyncDep){if(se&&se.registerDep(L,J,be),!T.el){const j=L.subTree=C(mn);m(null,j,N,G),T.placeholder=j.el}}else J(L,T,N,G,se,ie,be)},B=(T,N,G)=>{const le=N.component=T.component;if(Ww(T,N,G))if(le.asyncDep&&!le.asyncResolved){Q(le,N,G);return}else le.next=N,le.update();else N.el=T.el,le.vnode=N},J=(T,N,G,le,se,ie,be)=>{const L=()=>{if(T.isMounted){let{next:ge,bu:Se,u:Re,parent:Fe,vnode:et}=T;{const nt=wy(T);if(nt){ge&&(ge.el=et.el,Q(T,ge,be)),nt.asyncDep.then(()=>{T.isUnmounted||L()});return}}let me=ge,yt;$i(T,!1),ge?(ge.el=et.el,Q(T,ge,be)):ge=et,Se&&Fa(Se),(yt=ge.props&&ge.props.onVnodeBeforeUpdate)&&_s(yt,Fe,ge,et),$i(T,!0);const Rt=bm(T),Vt=T.subTree;T.subTree=Rt,b(Vt,Rt,d(Vt.el),oe(Vt),T,se,ie),ge.el=Rt.el,me===null&&qw(T,Rt.el),Re&&Cn(Re,se),(yt=ge.props&&ge.props.onVnodeUpdated)&&Cn(()=>_s(yt,Fe,ge,et),se)}else{let ge;const{el:Se,props:Re}=N,{bm:Fe,m:et,parent:me,root:yt,type:Rt}=T,Vt=Nr(N);$i(T,!1),Fe&&Fa(Fe),!Vt&&(ge=Re&&Re.onVnodeBeforeMount)&&_s(ge,me,N),$i(T,!0);{yt.ce&&yt.ce._def.shadowRoot!==!1&&yt.ce._injectChildStyle(Rt);const nt=T.subTree=bm(T);b(null,nt,G,le,T,se,ie),N.el=nt.el}if(et&&Cn(et,se),!Vt&&(ge=Re&&Re.onVnodeMounted)){const nt=N;Cn(()=>_s(ge,me,nt),se)}(N.shapeFlag&256||me&&Nr(me.vnode)&&me.vnode.shapeFlag&256)&&T.a&&Cn(T.a,se),T.isMounted=!0,N=G=le=null}};T.scope.on();const j=T.effect=new Av(L);T.scope.off();const $=T.update=j.run.bind(j),de=T.job=j.runIfDirty.bind(j);de.i=T,de.id=T.uid,j.scheduler=()=>kh(de),$i(T,!0),$()},Q=(T,N,G)=>{N.component=T;const le=T.vnode.props;T.vnode=N,T.next=null,Tw(T,N.props,le,G),Ow(T,N.children,G),Zs(),om(T),ei()},ce=(T,N,G,le,se,ie,be,L,j=!1)=>{const $=T&&T.children,de=T?T.shapeFlag:0,ge=N.children,{patchFlag:Se,shapeFlag:Re}=N;if(Se>0){if(Se&128){je($,ge,G,le,se,ie,be,L,j);return}else if(Se&256){ve($,ge,G,le,se,ie,be,L,j);return}}Re&8?(de&16&&tt($,se,ie),ge!==$&&c(G,ge)):de&16?Re&16?je($,ge,G,le,se,ie,be,L,j):tt($,se,ie,!0):(de&8&&c(G,""),Re&16&&M(ge,G,le,se,ie,be,L,j))},ve=(T,N,G,le,se,ie,be,L,j)=>{T=T||Mr,N=N||Mr;const $=T.length,de=N.length,ge=Math.min($,de);let Se;for(Se=0;Se<ge;Se++){const Re=N[Se]=j?fi(N[Se]):Ps(N[Se]);b(T[Se],Re,G,null,se,ie,be,L,j)}$>de?tt(T,se,ie,!0,!1,ge):M(N,G,le,se,ie,be,L,j,ge)},je=(T,N,G,le,se,ie,be,L,j)=>{let $=0;const de=N.length;let ge=T.length-1,Se=de-1;for(;$<=ge&&$<=Se;){const Re=T[$],Fe=N[$]=j?fi(N[$]):Ps(N[$]);if(Ki(Re,Fe))b(Re,Fe,G,null,se,ie,be,L,j);else break;$++}for(;$<=ge&&$<=Se;){const Re=T[ge],Fe=N[Se]=j?fi(N[Se]):Ps(N[Se]);if(Ki(Re,Fe))b(Re,Fe,G,null,se,ie,be,L,j);else break;ge--,Se--}if($>ge){if($<=Se){const Re=Se+1,Fe=Re<de?N[Re].el:le;for(;$<=Se;)b(null,N[$]=j?fi(N[$]):Ps(N[$]),G,Fe,se,ie,be,L,j),$++}}else if($>Se)for(;$<=ge;)Me(T[$],se,ie,!0),$++;else{const Re=$,Fe=$,et=new Map;for($=Fe;$<=Se;$++){const bt=N[$]=j?fi(N[$]):Ps(N[$]);bt.key!=null&&et.set(bt.key,$)}let me,yt=0;const Rt=Se-Fe+1;let Vt=!1,nt=0;const an=new Array(Rt);for($=0;$<Rt;$++)an[$]=0;for($=Re;$<=ge;$++){const bt=T[$];if(yt>=Rt){Me(bt,se,ie,!0);continue}let At;if(bt.key!=null)At=et.get(bt.key);else for(me=Fe;me<=Se;me++)if(an[me-Fe]===0&&Ki(bt,N[me])){At=me;break}At===void 0?Me(bt,se,ie,!0):(an[At-Fe]=$+1,At>=nt?nt=At:Vt=!0,b(bt,N[At],G,null,se,ie,be,L,j),yt++)}const Ht=Vt?jw(an):Mr;for(me=Ht.length-1,$=Rt-1;$>=0;$--){const bt=Fe+$,At=N[bt],Ke=N[bt+1],kt=bt+1<de?Ke.el||Ke.placeholder:le;an[$]===0?b(null,At,G,kt,se,ie,be,L,j):Vt&&(me<0||$!==Ht[me]?$e(At,G,kt,2):me--)}}},$e=(T,N,G,le,se=null)=>{const{el:ie,type:be,transition:L,children:j,shapeFlag:$}=T;if($&6){$e(T.component.subTree,N,G,le);return}if($&128){T.suspense.move(N,G,le);return}if($&64){be.move(T,N,G,E);return}if(be===xe){s(ie,N,G);for(let ge=0;ge<j.length;ge++)$e(j[ge],N,G,le);s(T.anchor,N,G);return}if(be===za){P(T,N,G);return}if(le!==2&&$&1&&L)if(le===0)L.beforeEnter(ie),s(ie,N,G),Cn(()=>L.enter(ie),se);else{const{leave:ge,delayLeave:Se,afterLeave:Re}=L,Fe=()=>{T.ctx.isUnmounted?i(ie):s(ie,N,G)},et=()=>{ie._isLeaving&&ie[qs](!0),ge(ie,()=>{Fe(),Re&&Re()})};Se?Se(ie,Fe,et):et()}else s(ie,N,G)},Me=(T,N,G,le=!1,se=!1)=>{const{type:ie,props:be,ref:L,children:j,dynamicChildren:$,shapeFlag:de,patchFlag:ge,dirs:Se,cacheIndex:Re}=T;if(ge===-2&&(se=!1),L!=null&&(Zs(),qo(L,null,G,T,!0),ei()),Re!=null&&(N.renderCache[Re]=void 0),de&256){N.ctx.deactivate(T);return}const Fe=de&1&&Se,et=!Nr(T);let me;if(et&&(me=be&&be.onVnodeBeforeUnmount)&&_s(me,N,T),de&6)rt(T.component,G,le);else{if(de&128){T.suspense.unmount(G,le);return}Fe&&Vi(T,null,N,"beforeUnmount"),de&64?T.type.remove(T,N,G,E,le):$&&!$.hasOnce&&(ie!==xe||ge>0&&ge&64)?tt($,N,G,!1,!0):(ie===xe&&ge&384||!se&&de&16)&&tt(j,N,G),le&&We(T)}(et&&(me=be&&be.onVnodeUnmounted)||Fe)&&Cn(()=>{me&&_s(me,N,T),Fe&&Vi(T,null,N,"unmounted")},G)},We=T=>{const{type:N,el:G,anchor:le,transition:se}=T;if(N===xe){ct(G,le);return}if(N===za){U(T);return}const ie=()=>{i(G),se&&!se.persisted&&se.afterLeave&&se.afterLeave()};if(T.shapeFlag&1&&se&&!se.persisted){const{leave:be,delayLeave:L}=se,j=()=>be(G,ie);L?L(T.el,ie,j):j()}else ie()},ct=(T,N)=>{let G;for(;T!==N;)G=f(T),i(T),T=G;i(N)},rt=(T,N,G)=>{const{bum:le,scope:se,job:ie,subTree:be,um:L,m:j,a:$}=T;ym(j),ym($),le&&Fa(le),se.stop(),ie&&(ie.flags|=8,Me(be,T,N,G)),L&&Cn(L,N),Cn(()=>{T.isUnmounted=!0},N)},tt=(T,N,G,le=!1,se=!1,ie=0)=>{for(let be=ie;be<T.length;be++)Me(T[be],N,G,le,se)},oe=T=>{if(T.shapeFlag&6)return oe(T.component.subTree);if(T.shapeFlag&128)return T.suspense.next();const N=f(T.anchor||T.el),G=N&&N[Kv];return G?f(G):N};let ne=!1;const K=(T,N,G)=>{T==null?N._vnode&&Me(N._vnode,null,null,!0):b(N._vnode||null,T,N,null,null,null,G),N._vnode=T,ne||(ne=!0,om(),Wv(),ne=!1)},E={p:b,um:Me,m:$e,r:We,mt:Z,mc:M,pc:ce,pbc:ue,n:oe,o:n};return{render:K,hydrate:void 0,createApp:Aw(K)}}function Fc({type:n,props:e},t){return t==="svg"&&n==="foreignObject"||t==="mathml"&&n==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function $i({effect:n,job:e},t){t?(n.flags|=32,e.flags|=4):(n.flags&=-33,e.flags&=-5)}function Iw(n,e){return(!n||n&&!n.pendingBranch)&&e&&!e.persisted}function wh(n,e,t=!1){const s=n.children,i=e.children;if(Be(s)&&Be(i))for(let r=0;r<s.length;r++){const o=s[r];let l=i[r];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=i[r]=fi(i[r]),l.el=o.el),!t&&l.patchFlag!==-2&&wh(o,l)),l.type===tc&&l.patchFlag!==-1&&(l.el=o.el),l.type===mn&&!l.el&&(l.el=o.el)}}function jw(n){const e=n.slice(),t=[0];let s,i,r,o,l;const a=n.length;for(s=0;s<a;s++){const u=n[s];if(u!==0){if(i=t[t.length-1],n[i]<u){e[s]=i,t.push(s);continue}for(r=0,o=t.length-1;r<o;)l=r+o>>1,n[t[l]]<u?r=l+1:o=l;u<n[t[r]]&&(r>0&&(e[s]=t[r-1]),t[r]=s)}}for(r=t.length,o=t[r-1];r-- >0;)t[r]=o,o=e[o];return t}function wy(n){const e=n.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:wy(e)}function ym(n){if(n)for(let e=0;e<n.length;e++)n[e].flags|=8}const Vw=Symbol.for("v-scx"),$w=()=>ss(Vw);function Ie(n,e,t){return Sy(n,e,t)}function Sy(n,e,t=wt){const{immediate:s,deep:i,flush:r,once:o}=t,l=Xt({},t),a=e&&s||!e&&r!=="post";let u;if(dl){if(r==="sync"){const p=$w();u=p.__watcherHandles||(p.__watcherHandles=[])}else if(!a){const p=()=>{};return p.stop=js,p.resume=js,p.pause=js,p}}const c=gn;l.call=(p,g,b)=>ps(p,c,g,b);let d=!1;r==="post"?l.scheduler=p=>{Cn(p,c&&c.suspense)}:r!=="sync"&&(d=!0,l.scheduler=(p,g)=>{g?p():kh(p)}),l.augmentJob=p=>{e&&(p.flags|=4),d&&(p.flags|=2,c&&(p.id=c.uid,p.i=c))};const f=X_(n,e,l);return dl&&(u?u.push(f):a&&f()),f}function Nw(n,e,t){const s=this.proxy,i=Lt(n)?n.includes(".")?Cy(s,n):()=>s[n]:n.bind(s,s);let r;Je(e)?r=e:(r=e.handler,t=e);const o=Nl(this),l=Sy(i,r.bind(s),t);return o(),l}function Cy(n,e){const t=e.split(".");return()=>{let s=n;for(let i=0;i<t.length&&s;i++)s=s[t[i]];return s}}const Bw=(n,e)=>e==="modelValue"||e==="model-value"?n.modelModifiers:n[`${e}Modifiers`]||n[`${ls(e)}Modifiers`]||n[`${pr(e)}Modifiers`];function Fw(n,e,...t){if(n.isUnmounted)return;const s=n.vnode.props||wt;let i=t;const r=e.startsWith("update:"),o=r&&Bw(s,e.slice(7));o&&(o.trim&&(i=t.map(c=>Lt(c)?c.trim():c)),o.number&&(i=t.map(su)));let l,a=s[l=Mc(e)]||s[l=Mc(ls(e))];!a&&r&&(a=s[l=Mc(pr(e))]),a&&ps(a,n,6,i);const u=s[l+"Once"];if(u){if(!n.emitted)n.emitted={};else if(n.emitted[l])return;n.emitted[l]=!0,ps(u,n,6,i)}}const Uw=new WeakMap;function Ay(n,e,t=!1){const s=t?Uw:e.emitsCache,i=s.get(n);if(i!==void 0)return i;const r=n.emits;let o={},l=!1;if(!Je(n)){const a=u=>{const c=Ay(u,e,!0);c&&(l=!0,Xt(o,c))};!t&&e.mixins.length&&e.mixins.forEach(a),n.extends&&a(n.extends),n.mixins&&n.mixins.forEach(a)}return!r&&!l?(vt(n)&&s.set(n,null),null):(Be(r)?r.forEach(a=>o[a]=null):Xt(o,r),vt(n)&&s.set(n,o),o)}function ec(n,e){return!n||!qu(e)?!1:(e=e.slice(2).replace(/Once$/,""),ht(n,e[0].toLowerCase()+e.slice(1))||ht(n,pr(e))||ht(n,e))}function bm(n){const{type:e,vnode:t,proxy:s,withProxy:i,propsOptions:[r],slots:o,attrs:l,emit:a,render:u,renderCache:c,props:d,data:f,setupState:p,ctx:g,inheritAttrs:b}=n,x=lu(n);let m,w;try{if(t.shapeFlag&4){const U=i||s,O=U;m=Ps(u.call(O,U,c,d,p,f,g)),w=l}else{const U=e;m=Ps(U.length>1?U(d,{attrs:l,slots:o,emit:a}):U(d,null)),w=e.props?l:zw(l)}}catch(U){Jo.length=0,Yu(U,n,1),m=C(mn)}let P=m;if(w&&b!==!1){const U=Object.keys(w),{shapeFlag:O}=P;U.length&&O&7&&(r&&U.some(uh)&&(w=Hw(w,r)),P=Ai(P,w,!1,!0))}return t.dirs&&(P=Ai(P,null,!1,!0),P.dirs=P.dirs?P.dirs.concat(t.dirs):t.dirs),t.transition&&al(P,t.transition),m=P,lu(x),m}const zw=n=>{let e;for(const t in n)(t==="class"||t==="style"||qu(t))&&((e||(e={}))[t]=n[t]);return e},Hw=(n,e)=>{const t={};for(const s in n)(!uh(s)||!(s.slice(9)in e))&&(t[s]=n[s]);return t};function Ww(n,e,t){const{props:s,children:i,component:r}=n,{props:o,children:l,patchFlag:a}=e,u=r.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&a>=0){if(a&1024)return!0;if(a&16)return s?km(s,o,u):!!o;if(a&8){const c=e.dynamicProps;for(let d=0;d<c.length;d++){const f=c[d];if(o[f]!==s[f]&&!ec(u,f))return!0}}}else return(i||l)&&(!l||!l.$stable)?!0:s===o?!1:s?o?km(s,o,u):!0:!!o;return!1}function km(n,e,t){const s=Object.keys(e);if(s.length!==Object.keys(n).length)return!0;for(let i=0;i<s.length;i++){const r=s[i];if(e[r]!==n[r]&&!ec(t,r))return!0}return!1}function qw({vnode:n,parent:e},t){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===n&&(s.el=n.el),s===n)(n=e.vnode).el=t,e=e.parent;else break}}const Ey=n=>n.__isSuspense;function Gw(n,e){e&&e.pendingBranch?Be(n)?e.effects.push(...n):e.effects.push(n):tw(n)}const xe=Symbol.for("v-fgt"),tc=Symbol.for("v-txt"),mn=Symbol.for("v-cmt"),za=Symbol.for("v-stc"),Jo=[];let Gn=null;function v(n=!1){Jo.push(Gn=n?null:[])}function Kw(){Jo.pop(),Gn=Jo[Jo.length-1]||null}let ul=1;function cu(n,e=!1){ul+=n,n<0&&Gn&&e&&(Gn.hasOnce=!0)}function Ty(n){return n.dynamicChildren=ul>0?Gn||Mr:null,Kw(),ul>0&&Gn&&Gn.push(n),n}function k(n,e,t,s,i,r){return Ty(h(n,e,t,s,i,r,!0))}function Ee(n,e,t,s,i){return Ty(C(n,e,t,s,i,!0))}function cl(n){return n?n.__v_isVNode===!0:!1}function Ki(n,e){return n.type===e.type&&n.key===e.key}const Dy=({key:n})=>n??null,Ha=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?Lt(n)||bn(n)||Je(n)?{i:rn,r:n,k:e,f:!!t}:n:null);function h(n,e=null,t=null,s=0,i=null,r=n===xe?0:1,o=!1,l=!1){const a={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&Dy(e),ref:e&&Ha(e),scopeId:Gv,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:rn};return l?(Sh(a,t),r&128&&n.normalize(a)):t&&(a.shapeFlag|=Lt(t)?8:16),ul>0&&!o&&Gn&&(a.patchFlag>0||r&6)&&a.patchFlag!==32&&Gn.push(a),a}const C=Jw;function Jw(n,e=null,t=null,s=0,i=null,r=!1){if((!n||n===uy)&&(n=mn),cl(n)){const l=Ai(n,e,!0);return t&&Sh(l,t),ul>0&&!r&&Gn&&(l.shapeFlag&6?Gn[Gn.indexOf(n)]=l:Gn.push(l)),l.patchFlag=-2,l}if(r2(n)&&(n=n.__vccOpts),e){e=Qw(e);let{class:l,style:a}=e;l&&!Lt(l)&&(e.class=we(l)),vt(a)&&(bh(a)&&!Be(a)&&(a=Xt({},a)),e.style=jr(a))}const o=Lt(n)?1:Ey(n)?128:Jv(n)?64:vt(n)?4:Je(n)?2:0;return h(n,e,t,s,i,o,r,!0)}function Qw(n){return n?bh(n)||vy(n)?Xt({},n):n:null}function Ai(n,e,t=!1,s=!1){const{props:i,ref:r,patchFlag:o,children:l,transition:a}=n,u=e?Yw(i||{},e):i,c={__v_isVNode:!0,__v_skip:!0,type:n.type,props:u,key:u&&Dy(u),ref:e&&e.ref?t&&r?Be(r)?r.concat(Ha(e)):[r,Ha(e)]:Ha(e):r,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:l,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==xe?o===-1?16:o|16:o,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:a,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&Ai(n.ssContent),ssFallback:n.ssFallback&&Ai(n.ssFallback),placeholder:n.placeholder,el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return a&&s&&al(c,a.clone(c)),c}function fe(n=" ",e=0){return C(tc,null,n,e)}function uo(n,e){const t=C(za,null,n);return t.staticCount=e,t}function q(n="",e=!1){return e?(v(),Ee(mn,null,n)):C(mn,null,n)}function Ps(n){return n==null||typeof n=="boolean"?C(mn):Be(n)?C(xe,null,n.slice()):cl(n)?fi(n):C(tc,null,String(n))}function fi(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:Ai(n)}function Sh(n,e){let t=0;const{shapeFlag:s}=n;if(e==null)e=null;else if(Be(e))t=16;else if(typeof e=="object")if(s&65){const i=e.default;i&&(i._c&&(i._d=!1),Sh(n,i()),i._c&&(i._d=!0));return}else{t=32;const i=e._;!i&&!vy(e)?e._ctx=rn:i===3&&rn&&(rn.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else Je(e)?(e={default:e,_ctx:rn},t=32):(e=String(e),s&64?(t=16,e=[fe(e)]):t=8);n.children=e,n.shapeFlag|=t}function Yw(...n){const e={};for(let t=0;t<n.length;t++){const s=n[t];for(const i in s)if(i==="class")e.class!==s.class&&(e.class=we([e.class,s.class]));else if(i==="style")e.style=jr([e.style,s.style]);else if(qu(i)){const r=e[i],o=s[i];o&&r!==o&&!(Be(r)&&r.includes(o))&&(e[i]=r?[].concat(r,o):o)}else i!==""&&(e[i]=s[i])}return e}function _s(n,e,t,s=null){ps(n,e,7,[t,s])}const Xw=py();let Zw=0;function e2(n,e,t){const s=n.type,i=(e?e.appContext:n.appContext)||Xw,r={uid:Zw++,vnode:n,type:s,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new C_(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:by(s,i),emitsOptions:Ay(s,i),emit:null,emitted:null,propsDefaults:wt,inheritAttrs:s.inheritAttrs,ctx:wt,data:wt,props:wt,attrs:wt,slots:wt,refs:wt,setupState:wt,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=Fw.bind(null,r),n.ce&&n.ce(r),r}let gn=null;const Ch=()=>gn||rn;let du,Wd;{const n=Ju(),e=(t,s)=>{let i;return(i=n[t])||(i=n[t]=[]),i.push(s),r=>{i.length>1?i.forEach(o=>o(r)):i[0](r)}};du=e("__VUE_INSTANCE_SETTERS__",t=>gn=t),Wd=e("__VUE_SSR_SETTERS__",t=>dl=t)}const Nl=n=>{const e=gn;return du(n),n.scope.on(),()=>{n.scope.off(),du(e)}},xm=()=>{gn&&gn.scope.off(),du(null)};function Py(n){return n.vnode.shapeFlag&4}let dl=!1;function t2(n,e=!1,t=!1){e&&Wd(e);const{props:s,children:i}=n.vnode,r=Py(n);Ew(n,s,r,e),Rw(n,i,t||e);const o=r?n2(n,e):void 0;return e&&Wd(!1),o}function n2(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,vw);const{setup:s}=t;if(s){Zs();const i=n.setupContext=s.length>1?Oy(n):null,r=Nl(n),o=$l(s,n,0,[n.props,i]),l=bv(o);if(ei(),r(),(l||n.sp)&&!Nr(n)&&ry(n),l){if(o.then(xm,xm),e)return o.then(a=>{_m(n,a)}).catch(a=>{Yu(a,n,0)});n.asyncDep=o}else _m(n,o)}else Ry(n)}function _m(n,e,t){Je(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:vt(e)&&(n.setupState=Uv(e)),Ry(n)}function Ry(n,e,t){const s=n.type;n.render||(n.render=s.render||js);{const i=Nl(n);Zs();try{kw(n)}finally{ei(),i()}}}const s2={get(n,e){return hn(n,"get",""),n[e]}};function Oy(n){const e=t=>{n.exposed=t||{}};return{attrs:new Proxy(n.attrs,s2),slots:n.slots,emit:n.emit,expose:e}}function nc(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(Uv(W_(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in Go)return Go[t](n)},has(e,t){return t in e||t in Go}})):n.proxy}function i2(n,e=!0){return Je(n)?n.displayName||n.name:n.name||e&&n.__name}function r2(n){return Je(n)&&"__vccOpts"in n}const z=(n,e)=>Q_(n,e,dl);function Bt(n,e,t){try{cu(-1);const s=arguments.length;return s===2?vt(e)&&!Be(e)?cl(e)?C(n,null,[e]):C(n,e):C(n,null,e):(s>3?t=Array.prototype.slice.call(arguments,2):s===3&&cl(t)&&(t=[t]),C(n,e,t))}finally{cu(1)}}const o2="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let qd;const wm=typeof window<"u"&&window.trustedTypes;if(wm)try{qd=wm.createPolicy("vue",{createHTML:n=>n})}catch{}const Ly=qd?n=>qd.createHTML(n):n=>n,l2="http://www.w3.org/2000/svg",a2="http://www.w3.org/1998/Math/MathML",Ws=typeof document<"u"?document:null,Sm=Ws&&Ws.createElement("template"),u2={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,s)=>{const i=e==="svg"?Ws.createElementNS(l2,n):e==="mathml"?Ws.createElementNS(a2,n):t?Ws.createElement(n,{is:t}):Ws.createElement(n);return n==="select"&&s&&s.multiple!=null&&i.setAttribute("multiple",s.multiple),i},createText:n=>Ws.createTextNode(n),createComment:n=>Ws.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>Ws.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,s,i,r){const o=t?t.previousSibling:e.lastChild;if(i&&(i===r||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),t),!(i===r||!(i=i.nextSibling)););else{Sm.innerHTML=Ly(s==="svg"?`<svg>${n}</svg>`:s==="mathml"?`<math>${n}</math>`:n);const l=Sm.content;if(s==="svg"||s==="mathml"){const a=l.firstChild;for(;a.firstChild;)l.appendChild(a.firstChild);l.removeChild(a)}e.insertBefore(l,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},ui="transition",Ao="animation",fl=Symbol("_vtc"),My={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},c2=Xt({},Zv,My),d2=n=>(n.displayName="Transition",n.props=c2,n),Ah=d2((n,{slots:e})=>Bt(rw,f2(n),e)),Ni=(n,e=[])=>{Be(n)?n.forEach(t=>t(...e)):n&&n(...e)},Cm=n=>n?Be(n)?n.some(e=>e.length>1):n.length>1:!1;function f2(n){const e={};for(const F in n)F in My||(e[F]=n[F]);if(n.css===!1)return e;const{name:t="v",type:s,duration:i,enterFromClass:r=`${t}-enter-from`,enterActiveClass:o=`${t}-enter-active`,enterToClass:l=`${t}-enter-to`,appearFromClass:a=r,appearActiveClass:u=o,appearToClass:c=l,leaveFromClass:d=`${t}-leave-from`,leaveActiveClass:f=`${t}-leave-active`,leaveToClass:p=`${t}-leave-to`}=n,g=h2(i),b=g&&g[0],x=g&&g[1],{onBeforeEnter:m,onEnter:w,onEnterCancelled:P,onLeave:U,onLeaveCancelled:O,onBeforeAppear:A=m,onAppear:_=w,onAppearCancelled:M=P}=e,W=(F,ae,Z,B)=>{F._enterCancelled=B,Bi(F,ae?c:l),Bi(F,ae?u:o),Z&&Z()},ue=(F,ae)=>{F._isLeaving=!1,Bi(F,d),Bi(F,p),Bi(F,f),ae&&ae()},ee=F=>(ae,Z)=>{const B=F?_:w,J=()=>W(ae,F,Z);Ni(B,[ae,J]),Am(()=>{Bi(ae,F?a:r),Us(ae,F?c:l),Cm(B)||Em(ae,s,b,J)})};return Xt(e,{onBeforeEnter(F){Ni(m,[F]),Us(F,r),Us(F,o)},onBeforeAppear(F){Ni(A,[F]),Us(F,a),Us(F,u)},onEnter:ee(!1),onAppear:ee(!0),onLeave(F,ae){F._isLeaving=!0;const Z=()=>ue(F,ae);Us(F,d),F._enterCancelled?(Us(F,f),Pm(F)):(Pm(F),Us(F,f)),Am(()=>{F._isLeaving&&(Bi(F,d),Us(F,p),Cm(U)||Em(F,s,x,Z))}),Ni(U,[F,Z])},onEnterCancelled(F){W(F,!1,void 0,!0),Ni(P,[F])},onAppearCancelled(F){W(F,!0,void 0,!0),Ni(M,[F])},onLeaveCancelled(F){ue(F),Ni(O,[F])}})}function h2(n){if(n==null)return null;if(vt(n))return[Uc(n.enter),Uc(n.leave)];{const e=Uc(n);return[e,e]}}function Uc(n){return v_(n)}function Us(n,e){e.split(/\s+/).forEach(t=>t&&n.classList.add(t)),(n[fl]||(n[fl]=new Set)).add(e)}function Bi(n,e){e.split(/\s+/).forEach(s=>s&&n.classList.remove(s));const t=n[fl];t&&(t.delete(e),t.size||(n[fl]=void 0))}function Am(n){requestAnimationFrame(()=>{requestAnimationFrame(n)})}let p2=0;function Em(n,e,t,s){const i=n._endId=++p2,r=()=>{i===n._endId&&s()};if(t!=null)return setTimeout(r,t);const{type:o,timeout:l,propCount:a}=m2(n,e);if(!o)return s();const u=o+"end";let c=0;const d=()=>{n.removeEventListener(u,f),r()},f=p=>{p.target===n&&++c>=a&&d()};setTimeout(()=>{c<a&&d()},l+1),n.addEventListener(u,f)}function m2(n,e){const t=window.getComputedStyle(n),s=g=>(t[g]||"").split(", "),i=s(`${ui}Delay`),r=s(`${ui}Duration`),o=Tm(i,r),l=s(`${Ao}Delay`),a=s(`${Ao}Duration`),u=Tm(l,a);let c=null,d=0,f=0;e===ui?o>0&&(c=ui,d=o,f=r.length):e===Ao?u>0&&(c=Ao,d=u,f=a.length):(d=Math.max(o,u),c=d>0?o>u?ui:Ao:null,f=c?c===ui?r.length:a.length:0);const p=c===ui&&/\b(?:transform|all)(?:,|$)/.test(s(`${ui}Property`).toString());return{type:c,timeout:d,propCount:f,hasTransform:p}}function Tm(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max(...e.map((t,s)=>Dm(t)+Dm(n[s])))}function Dm(n){return n==="auto"?0:Number(n.slice(0,-1).replace(",","."))*1e3}function Pm(n){return(n?n.ownerDocument:document).body.offsetHeight}function g2(n,e,t){const s=n[fl];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}const fu=Symbol("_vod"),Iy=Symbol("_vsh"),it={name:"show",beforeMount(n,{value:e},{transition:t}){n[fu]=n.style.display==="none"?"":n.style.display,t&&e?t.beforeEnter(n):Eo(n,e)},mounted(n,{value:e},{transition:t}){t&&e&&t.enter(n)},updated(n,{value:e,oldValue:t},{transition:s}){!e!=!t&&(s?e?(s.beforeEnter(n),Eo(n,!0),s.enter(n)):s.leave(n,()=>{Eo(n,!1)}):Eo(n,e))},beforeUnmount(n,{value:e}){Eo(n,e)}};function Eo(n,e){n.style.display=e?n[fu]:"none",n[Iy]=!e}const v2=Symbol(""),y2=/(?:^|;)\s*display\s*:/;function b2(n,e,t){const s=n.style,i=Lt(t);let r=!1;if(t&&!i){if(e)if(Lt(e))for(const o of e.split(";")){const l=o.slice(0,o.indexOf(":")).trim();t[l]==null&&Wa(s,l,"")}else for(const o in e)t[o]==null&&Wa(s,o,"");for(const o in t)o==="display"&&(r=!0),Wa(s,o,t[o])}else if(i){if(e!==t){const o=s[v2];o&&(t+=";"+o),s.cssText=t,r=y2.test(t)}}else e&&n.removeAttribute("style");fu in n&&(n[fu]=r?s.display:"",n[Iy]&&(s.display="none"))}const Rm=/\s*!important$/;function Wa(n,e,t){if(Be(t))t.forEach(s=>Wa(n,e,s));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const s=k2(n,e);Rm.test(t)?n.setProperty(pr(s),t.replace(Rm,""),"important"):n[s]=t}}const Om=["Webkit","Moz","ms"],zc={};function k2(n,e){const t=zc[e];if(t)return t;let s=ls(e);if(s!=="filter"&&s in n)return zc[e]=s;s=Ku(s);for(let i=0;i<Om.length;i++){const r=Om[i]+s;if(r in n)return zc[e]=r}return e}const Lm="http://www.w3.org/1999/xlink";function Mm(n,e,t,s,i,r=w_(e)){s&&e.startsWith("xlink:")?t==null?n.removeAttributeNS(Lm,e.slice(6,e.length)):n.setAttributeNS(Lm,e,t):t==null||r&&!wv(t)?n.removeAttribute(e):n.setAttribute(e,r?"":hs(t)?String(t):t)}function Im(n,e,t,s,i){if(e==="innerHTML"||e==="textContent"){t!=null&&(n[e]=e==="innerHTML"?Ly(t):t);return}const r=n.tagName;if(e==="value"&&r!=="PROGRESS"&&!r.includes("-")){const l=r==="OPTION"?n.getAttribute("value")||"":n.value,a=t==null?n.type==="checkbox"?"on":"":String(t);(l!==a||!("_value"in n))&&(n.value=a),t==null&&n.removeAttribute(e),n._value=t;return}let o=!1;if(t===""||t==null){const l=typeof n[e];l==="boolean"?t=wv(t):t==null&&l==="string"?(t="",o=!0):l==="number"&&(t=0,o=!0)}try{n[e]=t}catch{}o&&n.removeAttribute(i||e)}function Js(n,e,t,s){n.addEventListener(e,t,s)}function x2(n,e,t,s){n.removeEventListener(e,t,s)}const jm=Symbol("_vei");function _2(n,e,t,s,i=null){const r=n[jm]||(n[jm]={}),o=r[e];if(s&&o)o.value=s;else{const[l,a]=w2(e);if(s){const u=r[e]=A2(s,i);Js(n,l,u,a)}else o&&(x2(n,l,o,a),r[e]=void 0)}}const Vm=/(?:Once|Passive|Capture)$/;function w2(n){let e;if(Vm.test(n)){e={};let s;for(;s=n.match(Vm);)n=n.slice(0,n.length-s[0].length),e[s[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):pr(n.slice(2)),e]}let Hc=0;const S2=Promise.resolve(),C2=()=>Hc||(S2.then(()=>Hc=0),Hc=Date.now());function A2(n,e){const t=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=t.attached)return;ps(E2(s,t.value),e,5,[s])};return t.value=n,t.attached=C2(),t}function E2(n,e){if(Be(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(s=>i=>!i._stopped&&s&&s(i))}else return e}const $m=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,T2=(n,e,t,s,i,r)=>{const o=i==="svg";e==="class"?g2(n,s,o):e==="style"?b2(n,t,s):qu(e)?uh(e)||_2(n,e,t,s,r):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):D2(n,e,s,o))?(Im(n,e,s),!n.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Mm(n,e,s,o,r,e!=="value")):n._isVueCE&&(/[A-Z]/.test(e)||!Lt(s))?Im(n,ls(e),s,r,e):(e==="true-value"?n._trueValue=s:e==="false-value"&&(n._falseValue=s),Mm(n,e,s,o))};function D2(n,e,t,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in n&&$m(e)&&Je(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=n.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return $m(e)&&Lt(t)?!1:e in n}const Ei=n=>{const e=n.props["onUpdate:modelValue"]||!1;return Be(e)?t=>Fa(e,t):e};function P2(n){n.target.composing=!0}function Nm(n){const e=n.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const is=Symbol("_assign"),or={created(n,{modifiers:{lazy:e,trim:t,number:s}},i){n[is]=Ei(i);const r=s||i.props&&i.props.type==="number";Js(n,e?"change":"input",o=>{if(o.target.composing)return;let l=n.value;t&&(l=l.trim()),r&&(l=su(l)),n[is](l)}),t&&Js(n,"change",()=>{n.value=n.value.trim()}),e||(Js(n,"compositionstart",P2),Js(n,"compositionend",Nm),Js(n,"change",Nm))},mounted(n,{value:e}){n.value=e??""},beforeUpdate(n,{value:e,oldValue:t,modifiers:{lazy:s,trim:i,number:r}},o){if(n[is]=Ei(o),n.composing)return;const l=(r||n.type==="number")&&!/^0\d/.test(n.value)?su(n.value):n.value,a=e??"";l!==a&&(document.activeElement===n&&n.type!=="range"&&(s&&e===t||i&&n.value.trim()===a)||(n.value=a))}},R2={deep:!0,created(n,e,t){n[is]=Ei(t),Js(n,"change",()=>{const s=n._modelValue,i=Jr(n),r=n.checked,o=n[is];if(Be(s)){const l=fh(s,i),a=l!==-1;if(r&&!a)o(s.concat(i));else if(!r&&a){const u=[...s];u.splice(l,1),o(u)}}else if(lo(s)){const l=new Set(s);r?l.add(i):l.delete(i),o(l)}else o(jy(n,r))})},mounted:Bm,beforeUpdate(n,e,t){n[is]=Ei(t),Bm(n,e,t)}};function Bm(n,{value:e,oldValue:t},s){n._modelValue=e;let i;if(Be(e))i=fh(e,s.props.value)>-1;else if(lo(e))i=e.has(s.props.value);else{if(e===t)return;i=rr(e,jy(n,!0))}n.checked!==i&&(n.checked=i)}const Gd={created(n,{value:e},t){n.checked=rr(e,t.props.value),n[is]=Ei(t),Js(n,"change",()=>{n[is](Jr(n))})},beforeUpdate(n,{value:e,oldValue:t},s){n[is]=Ei(s),e!==t&&(n.checked=rr(e,s.props.value))}},Kd={deep:!0,created(n,{value:e,modifiers:{number:t}},s){const i=lo(e);Js(n,"change",()=>{const r=Array.prototype.filter.call(n.options,o=>o.selected).map(o=>t?su(Jr(o)):Jr(o));n[is](n.multiple?i?new Set(r):r:r[0]),n._assigning=!0,Zn(()=>{n._assigning=!1})}),n[is]=Ei(s)},mounted(n,{value:e}){Fm(n,e)},beforeUpdate(n,e,t){n[is]=Ei(t)},updated(n,{value:e}){n._assigning||Fm(n,e)}};function Fm(n,e){const t=n.multiple,s=Be(e);if(!(t&&!s&&!lo(e))){for(let i=0,r=n.options.length;i<r;i++){const o=n.options[i],l=Jr(o);if(t)if(s){const a=typeof l;a==="string"||a==="number"?o.selected=e.some(u=>String(u)===String(l)):o.selected=fh(e,l)>-1}else o.selected=e.has(l);else if(rr(Jr(o),e)){n.selectedIndex!==i&&(n.selectedIndex=i);return}}!t&&n.selectedIndex!==-1&&(n.selectedIndex=-1)}}function Jr(n){return"_value"in n?n._value:n.value}function jy(n,e){const t=e?"_trueValue":"_falseValue";return t in n?n[t]:e}const O2={created(n,e,t){fa(n,e,t,null,"created")},mounted(n,e,t){fa(n,e,t,null,"mounted")},beforeUpdate(n,e,t,s){fa(n,e,t,s,"beforeUpdate")},updated(n,e,t,s){fa(n,e,t,s,"updated")}};function L2(n,e){switch(n){case"SELECT":return Kd;case"TEXTAREA":return or;default:switch(e){case"checkbox":return R2;case"radio":return Gd;default:return or}}}function fa(n,e,t,s,i){const o=L2(n.tagName,t.props&&t.props.type)[i];o&&o(n,e,t,s)}const M2=["ctrl","shift","alt","meta"],I2={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>M2.some(t=>n[`${t}Key`]&&!e.includes(t))},It=(n,e)=>{const t=n._withMods||(n._withMods={}),s=e.join(".");return t[s]||(t[s]=((i,...r)=>{for(let o=0;o<e.length;o++){const l=I2[e[o]];if(l&&l(i,e))return}return n(i,...r)}))},j2=Xt({patchProp:T2},u2);let Um;function V2(){return Um||(Um=Lw(j2))}const $2=((...n)=>{const e=V2().createApp(...n),{mount:t}=e;return e.mount=s=>{const i=B2(s);if(!i)return;const r=e._component;!Je(r)&&!r.render&&!r.template&&(r.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=t(i,!1,N2(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e});function N2(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function B2(n){return Lt(n)?document.querySelector(n):n}const F2="/framework-logo.png";/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const Cr=typeof document<"u";function Vy(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function U2(n){return n.__esModule||n[Symbol.toStringTag]==="Module"||n.default&&Vy(n.default)}const ft=Object.assign;function Wc(n,e){const t={};for(const s in e){const i=e[s];t[s]=ms(i)?i.map(n):n(i)}return t}const Qo=()=>{},ms=Array.isArray;function zm(n,e){const t={};for(const s in n)t[s]=s in e?e[s]:n[s];return t}const $y=/#/g,z2=/&/g,H2=/\//g,W2=/=/g,q2=/\?/g,Ny=/\+/g,G2=/%5B/g,K2=/%5D/g,By=/%5E/g,J2=/%60/g,Fy=/%7B/g,Q2=/%7C/g,Uy=/%7D/g,Y2=/%20/g;function Eh(n){return n==null?"":encodeURI(""+n).replace(Q2,"|").replace(G2,"[").replace(K2,"]")}function X2(n){return Eh(n).replace(Fy,"{").replace(Uy,"}").replace(By,"^")}function Jd(n){return Eh(n).replace(Ny,"%2B").replace(Y2,"+").replace($y,"%23").replace(z2,"%26").replace(J2,"`").replace(Fy,"{").replace(Uy,"}").replace(By,"^")}function Z2(n){return Jd(n).replace(W2,"%3D")}function eS(n){return Eh(n).replace($y,"%23").replace(q2,"%3F")}function tS(n){return eS(n).replace(H2,"%2F")}function hl(n){if(n==null)return null;try{return decodeURIComponent(""+n)}catch{}return""+n}const nS=/\/$/,sS=n=>n.replace(nS,"");function qc(n,e,t="/"){let s,i={},r="",o="";const l=e.indexOf("#");let a=e.indexOf("?");return a=l>=0&&a>l?-1:a,a>=0&&(s=e.slice(0,a),r=e.slice(a,l>0?l:e.length),i=n(r.slice(1))),l>=0&&(s=s||e.slice(0,l),o=e.slice(l,e.length)),s=lS(s??e,t),{fullPath:s+r+o,path:s,query:i,hash:hl(o)}}function iS(n,e){const t=e.query?n(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function Hm(n,e){return!e||!n.toLowerCase().startsWith(e.toLowerCase())?n:n.slice(e.length)||"/"}function rS(n,e,t){const s=e.matched.length-1,i=t.matched.length-1;return s>-1&&s===i&&Qr(e.matched[s],t.matched[i])&&zy(e.params,t.params)&&n(e.query)===n(t.query)&&e.hash===t.hash}function Qr(n,e){return(n.aliasOf||n)===(e.aliasOf||e)}function zy(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(!oS(n[t],e[t]))return!1;return!0}function oS(n,e){return ms(n)?Wm(n,e):ms(e)?Wm(e,n):n===e}function Wm(n,e){return ms(e)?n.length===e.length&&n.every((t,s)=>t===e[s]):n.length===1&&n[0]===e}function lS(n,e){if(n.startsWith("/"))return n;if(!n)return e;const t=e.split("/"),s=n.split("/"),i=s[s.length-1];(i===".."||i===".")&&s.push("");let r=t.length-1,o,l;for(o=0;o<s.length;o++)if(l=s[o],l!==".")if(l==="..")r>1&&r--;else break;return t.slice(0,r).join("/")+"/"+s.slice(o).join("/")}const ci={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Qd=(function(n){return n.pop="pop",n.push="push",n})({}),Gc=(function(n){return n.back="back",n.forward="forward",n.unknown="",n})({});function aS(n){if(!n)if(Cr){const e=document.querySelector("base");n=e&&e.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),sS(n)}const uS=/^[^#]+#/;function cS(n,e){return n.replace(uS,"#")+e}function dS(n,e){const t=document.documentElement.getBoundingClientRect(),s=n.getBoundingClientRect();return{behavior:e.behavior,left:s.left-t.left-(e.left||0),top:s.top-t.top-(e.top||0)}}const sc=()=>({left:window.scrollX,top:window.scrollY});function fS(n){let e;if("el"in n){const t=n.el,s=typeof t=="string"&&t.startsWith("#"),i=typeof t=="string"?s?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!i)return;e=dS(i,n)}else e=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function qm(n,e){return(history.state?history.state.position-e:-1)+n}const Yd=new Map;function hS(n,e){Yd.set(n,e)}function pS(n){const e=Yd.get(n);return Yd.delete(n),e}function mS(n){return typeof n=="string"||n&&typeof n=="object"}function Hy(n){return typeof n=="string"||typeof n=="symbol"}let jt=(function(n){return n[n.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",n[n.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",n[n.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",n[n.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",n[n.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",n})({});const Wy=Symbol("");jt.MATCHER_NOT_FOUND+"",jt.NAVIGATION_GUARD_REDIRECT+"",jt.NAVIGATION_ABORTED+"",jt.NAVIGATION_CANCELLED+"",jt.NAVIGATION_DUPLICATED+"";function Yr(n,e){return ft(new Error,{type:n,[Wy]:!0},e)}function zs(n,e){return n instanceof Error&&Wy in n&&(e==null||!!(n.type&e))}const gS=["params","query","hash"];function vS(n){if(typeof n=="string")return n;if(n.path!=null)return n.path;const e={};for(const t of gS)t in n&&(e[t]=n[t]);return JSON.stringify(e,null,2)}function yS(n){const e={};if(n===""||n==="?")return e;const t=(n[0]==="?"?n.slice(1):n).split("&");for(let s=0;s<t.length;++s){const i=t[s].replace(Ny," "),r=i.indexOf("="),o=hl(r<0?i:i.slice(0,r)),l=r<0?null:hl(i.slice(r+1));if(o in e){let a=e[o];ms(a)||(a=e[o]=[a]),a.push(l)}else e[o]=l}return e}function Gm(n){let e="";for(let t in n){const s=n[t];if(t=Z2(t),s==null){s!==void 0&&(e+=(e.length?"&":"")+t);continue}(ms(s)?s.map(i=>i&&Jd(i)):[s&&Jd(s)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+t,i!=null&&(e+="="+i))})}return e}function bS(n){const e={};for(const t in n){const s=n[t];s!==void 0&&(e[t]=ms(s)?s.map(i=>i==null?null:""+i):s==null?s:""+s)}return e}const kS=Symbol(""),Km=Symbol(""),ic=Symbol(""),Th=Symbol(""),Xd=Symbol("");function To(){let n=[];function e(s){return n.push(s),()=>{const i=n.indexOf(s);i>-1&&n.splice(i,1)}}function t(){n=[]}return{add:e,list:()=>n.slice(),reset:t}}function hi(n,e,t,s,i,r=o=>o()){const o=s&&(s.enterCallbacks[i]=s.enterCallbacks[i]||[]);return()=>new Promise((l,a)=>{const u=f=>{f===!1?a(Yr(jt.NAVIGATION_ABORTED,{from:t,to:e})):f instanceof Error?a(f):mS(f)?a(Yr(jt.NAVIGATION_GUARD_REDIRECT,{from:e,to:f})):(o&&s.enterCallbacks[i]===o&&typeof f=="function"&&o.push(f),l())},c=r(()=>n.call(s&&s.instances[i],e,t,u));let d=Promise.resolve(c);n.length<3&&(d=d.then(u)),d.catch(f=>a(f))})}function Kc(n,e,t,s,i=r=>r()){const r=[];for(const o of n)for(const l in o.components){let a=o.components[l];if(!(e!=="beforeRouteEnter"&&!o.instances[l]))if(Vy(a)){const u=(a.__vccOpts||a)[e];u&&r.push(hi(u,t,s,o,l,i))}else{let u=a();r.push(()=>u.then(c=>{if(!c)throw new Error(`Couldn't resolve component "${l}" at "${o.path}"`);const d=U2(c)?c.default:c;o.mods[l]=c,o.components[l]=d;const f=(d.__vccOpts||d)[e];return f&&hi(f,t,s,o,l,i)()}))}}return r}function xS(n,e){const t=[],s=[],i=[],r=Math.max(e.matched.length,n.matched.length);for(let o=0;o<r;o++){const l=e.matched[o];l&&(n.matched.find(u=>Qr(u,l))?s.push(l):t.push(l));const a=n.matched[o];a&&(e.matched.find(u=>Qr(u,a))||i.push(a))}return[t,s,i]}/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let _S=()=>location.protocol+"//"+location.host;function qy(n,e){const{pathname:t,search:s,hash:i}=e,r=n.indexOf("#");if(r>-1){let o=i.includes(n.slice(r))?n.slice(r).length:1,l=i.slice(o);return l[0]!=="/"&&(l="/"+l),Hm(l,"")}return Hm(t,n)+s+i}function wS(n,e,t,s){let i=[],r=[],o=null;const l=({state:f})=>{const p=qy(n,location),g=t.value,b=e.value;let x=0;if(f){if(t.value=p,e.value=f,o&&o===g){o=null;return}x=b?f.position-b.position:0}else s(p);i.forEach(m=>{m(t.value,g,{delta:x,type:Qd.pop,direction:x?x>0?Gc.forward:Gc.back:Gc.unknown})})};function a(){o=t.value}function u(f){i.push(f);const p=()=>{const g=i.indexOf(f);g>-1&&i.splice(g,1)};return r.push(p),p}function c(){if(document.visibilityState==="hidden"){const{history:f}=window;if(!f.state)return;f.replaceState(ft({},f.state,{scroll:sc()}),"")}}function d(){for(const f of r)f();r=[],window.removeEventListener("popstate",l),window.removeEventListener("pagehide",c),document.removeEventListener("visibilitychange",c)}return window.addEventListener("popstate",l),window.addEventListener("pagehide",c),document.addEventListener("visibilitychange",c),{pauseListeners:a,listen:u,destroy:d}}function Jm(n,e,t,s=!1,i=!1){return{back:n,current:e,forward:t,replaced:s,position:window.history.length,scroll:i?sc():null}}function SS(n){const{history:e,location:t}=window,s={value:qy(n,t)},i={value:e.state};i.value||r(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function r(a,u,c){const d=n.indexOf("#"),f=d>-1?(t.host&&document.querySelector("base")?n:n.slice(d))+a:_S()+n+a;try{e[c?"replaceState":"pushState"](u,"",f),i.value=u}catch(p){console.error(p),t[c?"replace":"assign"](f)}}function o(a,u){r(a,ft({},e.state,Jm(i.value.back,a,i.value.forward,!0),u,{position:i.value.position}),!0),s.value=a}function l(a,u){const c=ft({},i.value,e.state,{forward:a,scroll:sc()});r(c.current,c,!0),r(a,ft({},Jm(s.value,a,null),{position:c.position+1},u),!1),s.value=a}return{location:s,state:i,push:l,replace:o}}function CS(n){n=aS(n);const e=SS(n),t=wS(n,e.state,e.location,e.replace);function s(r,o=!0){o||t.pauseListeners(),history.go(r)}const i=ft({location:"",base:n,go:s,createHref:cS.bind(null,n)},e,t);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function AS(n){return n=location.host?n||location.pathname+location.search:"",n.includes("#")||(n+="#"),CS(n)}let Yi=(function(n){return n[n.Static=0]="Static",n[n.Param=1]="Param",n[n.Group=2]="Group",n})({});var Wt=(function(n){return n[n.Static=0]="Static",n[n.Param=1]="Param",n[n.ParamRegExp=2]="ParamRegExp",n[n.ParamRegExpEnd=3]="ParamRegExpEnd",n[n.EscapeNext=4]="EscapeNext",n})(Wt||{});const ES={type:Yi.Static,value:""},TS=/[a-zA-Z0-9_]/;function DS(n){if(!n)return[[]];if(n==="/")return[[ES]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function e(p){throw new Error(`ERR (${t})/"${u}": ${p}`)}let t=Wt.Static,s=t;const i=[];let r;function o(){r&&i.push(r),r=[]}let l=0,a,u="",c="";function d(){u&&(t===Wt.Static?r.push({type:Yi.Static,value:u}):t===Wt.Param||t===Wt.ParamRegExp||t===Wt.ParamRegExpEnd?(r.length>1&&(a==="*"||a==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),r.push({type:Yi.Param,value:u,regexp:c,repeatable:a==="*"||a==="+",optional:a==="*"||a==="?"})):e("Invalid state to consume buffer"),u="")}function f(){u+=a}for(;l<n.length;){if(a=n[l++],a==="\\"&&t!==Wt.ParamRegExp){s=t,t=Wt.EscapeNext;continue}switch(t){case Wt.Static:a==="/"?(u&&d(),o()):a===":"?(d(),t=Wt.Param):f();break;case Wt.EscapeNext:f(),t=s;break;case Wt.Param:a==="("?t=Wt.ParamRegExp:TS.test(a)?f():(d(),t=Wt.Static,a!=="*"&&a!=="?"&&a!=="+"&&l--);break;case Wt.ParamRegExp:a===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+a:t=Wt.ParamRegExpEnd:c+=a;break;case Wt.ParamRegExpEnd:d(),t=Wt.Static,a!=="*"&&a!=="?"&&a!=="+"&&l--,c="";break;default:e("Unknown state");break}}return t===Wt.ParamRegExp&&e(`Unfinished custom RegExp for param "${u}"`),d(),o(),i}const Qm="[^/]+?",PS={sensitive:!1,strict:!1,start:!0,end:!0};var An=(function(n){return n[n._multiplier=10]="_multiplier",n[n.Root=90]="Root",n[n.Segment=40]="Segment",n[n.SubSegment=30]="SubSegment",n[n.Static=40]="Static",n[n.Dynamic=20]="Dynamic",n[n.BonusCustomRegExp=10]="BonusCustomRegExp",n[n.BonusWildcard=-50]="BonusWildcard",n[n.BonusRepeatable=-20]="BonusRepeatable",n[n.BonusOptional=-8]="BonusOptional",n[n.BonusStrict=.7000000000000001]="BonusStrict",n[n.BonusCaseSensitive=.25]="BonusCaseSensitive",n})(An||{});const RS=/[.+*?^${}()[\]/\\]/g;function OS(n,e){const t=ft({},PS,e),s=[];let i=t.start?"^":"";const r=[];for(const u of n){const c=u.length?[]:[An.Root];t.strict&&!u.length&&(i+="/");for(let d=0;d<u.length;d++){const f=u[d];let p=An.Segment+(t.sensitive?An.BonusCaseSensitive:0);if(f.type===Yi.Static)d||(i+="/"),i+=f.value.replace(RS,"\\$&"),p+=An.Static;else if(f.type===Yi.Param){const{value:g,repeatable:b,optional:x,regexp:m}=f;r.push({name:g,repeatable:b,optional:x});const w=m||Qm;if(w!==Qm){p+=An.BonusCustomRegExp;try{`${w}`}catch(U){throw new Error(`Invalid custom RegExp for param "${g}" (${w}): `+U.message)}}let P=b?`((?:${w})(?:/(?:${w}))*)`:`(${w})`;d||(P=x&&u.length<2?`(?:/${P})`:"/"+P),x&&(P+="?"),i+=P,p+=An.Dynamic,x&&(p+=An.BonusOptional),b&&(p+=An.BonusRepeatable),w===".*"&&(p+=An.BonusWildcard)}c.push(p)}s.push(c)}if(t.strict&&t.end){const u=s.length-1;s[u][s[u].length-1]+=An.BonusStrict}t.strict||(i+="/?"),t.end?i+="$":t.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,t.sensitive?"":"i");function l(u){const c=u.match(o),d={};if(!c)return null;for(let f=1;f<c.length;f++){const p=c[f]||"",g=r[f-1];d[g.name]=p&&g.repeatable?p.split("/"):p}return d}function a(u){let c="",d=!1;for(const f of n){(!d||!c.endsWith("/"))&&(c+="/"),d=!1;for(const p of f)if(p.type===Yi.Static)c+=p.value;else if(p.type===Yi.Param){const{value:g,repeatable:b,optional:x}=p,m=g in u?u[g]:"";if(ms(m)&&!b)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const w=ms(m)?m.join("/"):m;if(!w)if(x)f.length<2&&(c.endsWith("/")?c=c.slice(0,-1):d=!0);else throw new Error(`Missing required param "${g}"`);c+=w}}return c||"/"}return{re:o,score:s,keys:r,parse:l,stringify:a}}function LS(n,e){let t=0;for(;t<n.length&&t<e.length;){const s=e[t]-n[t];if(s)return s;t++}return n.length<e.length?n.length===1&&n[0]===An.Static+An.Segment?-1:1:n.length>e.length?e.length===1&&e[0]===An.Static+An.Segment?1:-1:0}function Gy(n,e){let t=0;const s=n.score,i=e.score;for(;t<s.length&&t<i.length;){const r=LS(s[t],i[t]);if(r)return r;t++}if(Math.abs(i.length-s.length)===1){if(Ym(s))return 1;if(Ym(i))return-1}return i.length-s.length}function Ym(n){const e=n[n.length-1];return n.length>0&&e[e.length-1]<0}const MS={strict:!1,end:!0,sensitive:!1};function IS(n,e,t){const s=OS(DS(n.path),t),i=ft(s,{record:n,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function jS(n,e){const t=[],s=new Map;e=zm(MS,e);function i(d){return s.get(d)}function r(d,f,p){const g=!p,b=Zm(d);b.aliasOf=p&&p.record;const x=zm(e,d),m=[b];if("alias"in d){const U=typeof d.alias=="string"?[d.alias]:d.alias;for(const O of U)m.push(Zm(ft({},b,{components:p?p.record.components:b.components,path:O,aliasOf:p?p.record:b})))}let w,P;for(const U of m){const{path:O}=U;if(f&&O[0]!=="/"){const A=f.record.path,_=A[A.length-1]==="/"?"":"/";U.path=f.record.path+(O&&_+O)}if(w=IS(U,f,x),p?p.alias.push(w):(P=P||w,P!==w&&P.alias.push(w),g&&d.name&&!eg(w)&&o(d.name)),Ky(w)&&a(w),b.children){const A=b.children;for(let _=0;_<A.length;_++)r(A[_],w,p&&p.children[_])}p=p||w}return P?()=>{o(P)}:Qo}function o(d){if(Hy(d)){const f=s.get(d);f&&(s.delete(d),t.splice(t.indexOf(f),1),f.children.forEach(o),f.alias.forEach(o))}else{const f=t.indexOf(d);f>-1&&(t.splice(f,1),d.record.name&&s.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function l(){return t}function a(d){const f=NS(d,t);t.splice(f,0,d),d.record.name&&!eg(d)&&s.set(d.record.name,d)}function u(d,f){let p,g={},b,x;if("name"in d&&d.name){if(p=s.get(d.name),!p)throw Yr(jt.MATCHER_NOT_FOUND,{location:d});x=p.record.name,g=ft(Xm(f.params,p.keys.filter(P=>!P.optional).concat(p.parent?p.parent.keys.filter(P=>P.optional):[]).map(P=>P.name)),d.params&&Xm(d.params,p.keys.map(P=>P.name))),b=p.stringify(g)}else if(d.path!=null)b=d.path,p=t.find(P=>P.re.test(b)),p&&(g=p.parse(b),x=p.record.name);else{if(p=f.name?s.get(f.name):t.find(P=>P.re.test(f.path)),!p)throw Yr(jt.MATCHER_NOT_FOUND,{location:d,currentLocation:f});x=p.record.name,g=ft({},f.params,d.params),b=p.stringify(g)}const m=[];let w=p;for(;w;)m.unshift(w.record),w=w.parent;return{name:x,path:b,params:g,matched:m,meta:$S(m)}}n.forEach(d=>r(d));function c(){t.length=0,s.clear()}return{addRoute:r,resolve:u,removeRoute:o,clearRoutes:c,getRoutes:l,getRecordMatcher:i}}function Xm(n,e){const t={};for(const s of e)s in n&&(t[s]=n[s]);return t}function Zm(n){const e={path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:n.aliasOf,beforeEnter:n.beforeEnter,props:VS(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function VS(n){const e={},t=n.props||!1;if("component"in n)e.default=t;else for(const s in n.components)e[s]=typeof t=="object"?t[s]:t;return e}function eg(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function $S(n){return n.reduce((e,t)=>ft(e,t.meta),{})}function NS(n,e){let t=0,s=e.length;for(;t!==s;){const r=t+s>>1;Gy(n,e[r])<0?s=r:t=r+1}const i=BS(n);return i&&(s=e.lastIndexOf(i,s-1)),s}function BS(n){let e=n;for(;e=e.parent;)if(Ky(e)&&Gy(n,e)===0)return e}function Ky({record:n}){return!!(n.name||n.components&&Object.keys(n.components).length||n.redirect)}function tg(n){const e=ss(ic),t=ss(Th),s=z(()=>{const a=ut(n.to);return e.resolve(a)}),i=z(()=>{const{matched:a}=s.value,{length:u}=a,c=a[u-1],d=t.matched;if(!c||!d.length)return-1;const f=d.findIndex(Qr.bind(null,c));if(f>-1)return f;const p=ng(a[u-2]);return u>1&&ng(c)===p&&d[d.length-1].path!==p?d.findIndex(Qr.bind(null,a[u-2])):f}),r=z(()=>i.value>-1&&WS(t.params,s.value.params)),o=z(()=>i.value>-1&&i.value===t.matched.length-1&&zy(t.params,s.value.params));function l(a={}){if(HS(a)){const u=e[ut(n.replace)?"replace":"push"](ut(n.to)).catch(Qo);return n.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:s,href:z(()=>s.value.href),isActive:r,isExactActive:o,navigate:l}}function FS(n){return n.length===1?n[0]:n}const US=iy({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:tg,setup(n,{slots:e}){const t=cs(tg(n)),{options:s}=ss(ic),i=z(()=>({[sg(n.activeClass,s.linkActiveClass,"router-link-active")]:t.isActive,[sg(n.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const r=e.default&&FS(e.default(t));return n.custom?r:Bt("a",{"aria-current":t.isExactActive?n.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:i.value},r)}}}),zS=US;function HS(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const e=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return n.preventDefault&&n.preventDefault(),!0}}function WS(n,e){for(const t in e){const s=e[t],i=n[t];if(typeof s=="string"){if(s!==i)return!1}else if(!ms(i)||i.length!==s.length||s.some((r,o)=>r!==i[o]))return!1}return!0}function ng(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const sg=(n,e,t)=>n??e??t,qS=iy({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:e,slots:t}){const s=ss(Xd),i=z(()=>n.route||s.value),r=ss(Km,0),o=z(()=>{let u=ut(r);const{matched:c}=i.value;let d;for(;(d=c[u])&&!d.components;)u++;return u}),l=z(()=>i.value.matched[o.value]);Ko(Km,z(()=>o.value+1)),Ko(kS,l),Ko(Xd,i);const a=Y();return Ie(()=>[a.value,l.value,n.name],([u,c,d],[f,p,g])=>{c&&(c.instances[d]=u,p&&p!==c&&u&&u===f&&(c.leaveGuards.size||(c.leaveGuards=p.leaveGuards),c.updateGuards.size||(c.updateGuards=p.updateGuards))),u&&c&&(!p||!Qr(c,p)||!f)&&(c.enterCallbacks[d]||[]).forEach(b=>b(u))},{flush:"post"}),()=>{const u=i.value,c=n.name,d=l.value,f=d&&d.components[c];if(!f)return ig(t.default,{Component:f,route:u});const p=d.props[c],g=p?p===!0?u.params:typeof p=="function"?p(u):p:null,x=Bt(f,ft({},g,e,{onVnodeUnmounted:m=>{m.component.isUnmounted&&(d.instances[c]=null)},ref:a}));return ig(t.default,{Component:x,route:u})||x}}});function ig(n,e){if(!n)return null;const t=n(e);return t.length===1?t[0]:t}const GS=qS;function KS(n){const e=jS(n.routes,n),t=n.parseQuery||yS,s=n.stringifyQuery||Gm,i=n.history,r=To(),o=To(),l=To(),a=q_(ci);let u=ci;Cr&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=Wc.bind(null,oe=>""+oe),d=Wc.bind(null,tS),f=Wc.bind(null,hl);function p(oe,ne){let K,E;return Hy(oe)?(K=e.getRecordMatcher(oe),E=ne):E=oe,e.addRoute(E,K)}function g(oe){const ne=e.getRecordMatcher(oe);ne&&e.removeRoute(ne)}function b(){return e.getRoutes().map(oe=>oe.record)}function x(oe){return!!e.getRecordMatcher(oe)}function m(oe,ne){if(ne=ft({},ne||a.value),typeof oe=="string"){const G=qc(t,oe,ne.path),le=e.resolve({path:G.path},ne),se=i.createHref(G.fullPath);return ft(G,le,{params:f(le.params),hash:hl(G.hash),redirectedFrom:void 0,href:se})}let K;if(oe.path!=null)K=ft({},oe,{path:qc(t,oe.path,ne.path).path});else{const G=ft({},oe.params);for(const le in G)G[le]==null&&delete G[le];K=ft({},oe,{params:d(G)}),ne.params=d(ne.params)}const E=e.resolve(K,ne),re=oe.hash||"";E.params=c(f(E.params));const T=iS(s,ft({},oe,{hash:X2(re),path:E.path})),N=i.createHref(T);return ft({fullPath:T,hash:re,query:s===Gm?bS(oe.query):oe.query||{}},E,{redirectedFrom:void 0,href:N})}function w(oe){return typeof oe=="string"?qc(t,oe,a.value.path):ft({},oe)}function P(oe,ne){if(u!==oe)return Yr(jt.NAVIGATION_CANCELLED,{from:ne,to:oe})}function U(oe){return _(oe)}function O(oe){return U(ft(w(oe),{replace:!0}))}function A(oe,ne){const K=oe.matched[oe.matched.length-1];if(K&&K.redirect){const{redirect:E}=K;let re=typeof E=="function"?E(oe,ne):E;return typeof re=="string"&&(re=re.includes("?")||re.includes("#")?re=w(re):{path:re},re.params={}),ft({query:oe.query,hash:oe.hash,params:re.path!=null?{}:oe.params},re)}}function _(oe,ne){const K=u=m(oe),E=a.value,re=oe.state,T=oe.force,N=oe.replace===!0,G=A(K,E);if(G)return _(ft(w(G),{state:typeof G=="object"?ft({},re,G.state):re,force:T,replace:N}),ne||K);const le=K;le.redirectedFrom=ne;let se;return!T&&rS(s,E,K)&&(se=Yr(jt.NAVIGATION_DUPLICATED,{to:le,from:E}),$e(E,E,!0,!1)),(se?Promise.resolve(se):ue(le,E)).catch(ie=>zs(ie)?zs(ie,jt.NAVIGATION_GUARD_REDIRECT)?ie:je(ie):ce(ie,le,E)).then(ie=>{if(ie){if(zs(ie,jt.NAVIGATION_GUARD_REDIRECT))return _(ft({replace:N},w(ie.to),{state:typeof ie.to=="object"?ft({},re,ie.to.state):re,force:T}),ne||le)}else ie=F(le,E,!0,N,re);return ee(le,E,ie),ie})}function M(oe,ne){const K=P(oe,ne);return K?Promise.reject(K):Promise.resolve()}function W(oe){const ne=ct.values().next().value;return ne&&typeof ne.runWithContext=="function"?ne.runWithContext(oe):oe()}function ue(oe,ne){let K;const[E,re,T]=xS(oe,ne);K=Kc(E.reverse(),"beforeRouteLeave",oe,ne);for(const G of E)G.leaveGuards.forEach(le=>{K.push(hi(le,oe,ne))});const N=M.bind(null,oe,ne);return K.push(N),tt(K).then(()=>{K=[];for(const G of r.list())K.push(hi(G,oe,ne));return K.push(N),tt(K)}).then(()=>{K=Kc(re,"beforeRouteUpdate",oe,ne);for(const G of re)G.updateGuards.forEach(le=>{K.push(hi(le,oe,ne))});return K.push(N),tt(K)}).then(()=>{K=[];for(const G of T)if(G.beforeEnter)if(ms(G.beforeEnter))for(const le of G.beforeEnter)K.push(hi(le,oe,ne));else K.push(hi(G.beforeEnter,oe,ne));return K.push(N),tt(K)}).then(()=>(oe.matched.forEach(G=>G.enterCallbacks={}),K=Kc(T,"beforeRouteEnter",oe,ne,W),K.push(N),tt(K))).then(()=>{K=[];for(const G of o.list())K.push(hi(G,oe,ne));return K.push(N),tt(K)}).catch(G=>zs(G,jt.NAVIGATION_CANCELLED)?G:Promise.reject(G))}function ee(oe,ne,K){l.list().forEach(E=>W(()=>E(oe,ne,K)))}function F(oe,ne,K,E,re){const T=P(oe,ne);if(T)return T;const N=ne===ci,G=Cr?history.state:{};K&&(E||N?i.replace(oe.fullPath,ft({scroll:N&&G&&G.scroll},re)):i.push(oe.fullPath,re)),a.value=oe,$e(oe,ne,K,N),je()}let ae;function Z(){ae||(ae=i.listen((oe,ne,K)=>{if(!rt.listening)return;const E=m(oe),re=A(E,rt.currentRoute.value);if(re){_(ft(re,{replace:!0,force:!0}),E).catch(Qo);return}u=E;const T=a.value;Cr&&hS(qm(T.fullPath,K.delta),sc()),ue(E,T).catch(N=>zs(N,jt.NAVIGATION_ABORTED|jt.NAVIGATION_CANCELLED)?N:zs(N,jt.NAVIGATION_GUARD_REDIRECT)?(_(ft(w(N.to),{force:!0}),E).then(G=>{zs(G,jt.NAVIGATION_ABORTED|jt.NAVIGATION_DUPLICATED)&&!K.delta&&K.type===Qd.pop&&i.go(-1,!1)}).catch(Qo),Promise.reject()):(K.delta&&i.go(-K.delta,!1),ce(N,E,T))).then(N=>{N=N||F(E,T,!1),N&&(K.delta&&!zs(N,jt.NAVIGATION_CANCELLED)?i.go(-K.delta,!1):K.type===Qd.pop&&zs(N,jt.NAVIGATION_ABORTED|jt.NAVIGATION_DUPLICATED)&&i.go(-1,!1)),ee(E,T,N)}).catch(Qo)}))}let B=To(),J=To(),Q;function ce(oe,ne,K){je(oe);const E=J.list();return E.length?E.forEach(re=>re(oe,ne,K)):console.error(oe),Promise.reject(oe)}function ve(){return Q&&a.value!==ci?Promise.resolve():new Promise((oe,ne)=>{B.add([oe,ne])})}function je(oe){return Q||(Q=!oe,Z(),B.list().forEach(([ne,K])=>oe?K(oe):ne()),B.reset()),oe}function $e(oe,ne,K,E){const{scrollBehavior:re}=n;if(!Cr||!re)return Promise.resolve();const T=!K&&pS(qm(oe.fullPath,0))||(E||!K)&&history.state&&history.state.scroll||null;return Zn().then(()=>re(oe,ne,T)).then(N=>N&&fS(N)).catch(N=>ce(N,oe,ne))}const Me=oe=>i.go(oe);let We;const ct=new Set,rt={currentRoute:a,listening:!0,addRoute:p,removeRoute:g,clearRoutes:e.clearRoutes,hasRoute:x,getRoutes:b,resolve:m,options:n,push:U,replace:O,go:Me,back:()=>Me(-1),forward:()=>Me(1),beforeEach:r.add,beforeResolve:o.add,afterEach:l.add,onError:J.add,isReady:ve,install(oe){oe.component("RouterLink",zS),oe.component("RouterView",GS),oe.config.globalProperties.$router=rt,Object.defineProperty(oe.config.globalProperties,"$route",{enumerable:!0,get:()=>ut(a)}),Cr&&!We&&a.value===ci&&(We=!0,U(i.location).catch(E=>{}));const ne={};for(const E in ci)Object.defineProperty(ne,E,{get:()=>a.value[E],enumerable:!0});oe.provide(ic,rt),oe.provide(Th,Bv(ne)),oe.provide(Xd,a);const K=oe.unmount;ct.add(oe),oe.unmount=function(){ct.delete(oe),ct.size<1&&(u=ci,ae&&ae(),ae=null,a.value=ci,We=!1,Q=!1),K()}}};function tt(oe){return oe.reduce((ne,K)=>ne.then(()=>W(K)),Promise.resolve())}return rt}function Bl(){return ss(ic)}function co(n){return ss(Th)}const Hs=Y(!1);function JS(){const n=()=>{Hs.value=!Hs.value},e=()=>{Hs.value=!0},t=()=>{Hs.value=!1};return Ie(Hs,s=>{s?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},{immediate:!1}),kn(()=>{const s=localStorage.getItem("theme");s?Hs.value=s==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches&&(Hs.value=!0),Hs.value?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}),{isDark:Hs,toggle:n,enable:e,disable:t}}function QS(n,e){return v(),k("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 13.5V3.75m0 9.75a1.5 1.5 0 0 1 0 3m0-3a1.5 1.5 0 0 0 0 3m0 3.75V16.5m12-3V3.75m0 9.75a1.5 1.5 0 0 1 0 3m0-3a1.5 1.5 0 0 0 0 3m0 3.75V16.5m-6-9V3.75m0 3.75a1.5 1.5 0 0 1 0 3m0-3a1.5 1.5 0 0 0 0 3m0 9.75V10.5"})])}function YS(n,e){return v(),k("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function XS(n,e){return v(),k("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})])}function ZS(n,e){return v(),k("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125"})])}function Dh(n,e){return v(),k("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}function Ph(n,e){return v(),k("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"})])}function Fr(n,e){return v(),k("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}function eC(n,e){return v(),k("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})])}function tC(n,e){return v(),k("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"})])}function nC(n,e){return v(),k("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}function hu(n,e){return v(),k("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"})])}function rc(n,e){return v(),k("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"})])}function oc(n,e){return v(),k("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"})])}function sC(n,e){return v(),k("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})])}function Rh(n,e){return v(),k("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5.25 14.25h13.5m-13.5 0a3 3 0 0 1-3-3m3 3a3 3 0 1 0 0 6h13.5a3 3 0 1 0 0-6m-16.5-3a3 3 0 0 1 3-3h13.5a3 3 0 0 1 3 3m-19.5 0a4.5 4.5 0 0 1 .9-2.7L5.737 5.1a3.375 3.375 0 0 1 2.7-1.35h7.126c1.062 0 2.062.5 2.7 1.35l2.587 3.45a4.5 4.5 0 0 1 .9 2.7m0 0a3 3 0 0 1-3 3m0 3h.008v.008h-.008v-.008Zm0-6h.008v.008h-.008v-.008Zm-3 6h.008v.008h-.008v-.008Zm0-6h.008v.008h-.008v-.008Z"})])}function iC(n,e){return v(),k("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"})])}function rC(n,e){return v(),k("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}const oC={key:0,class:"pointer-events-auto w-full max-w-sm rounded-lg bg-white shadow-lg outline-1 outline-black/5 dark:bg-gray-800 dark:-outline-offset-1 dark:outline-white/10"},lC={class:"p-4"},aC={key:0,class:"shrink-0"},uC={key:0,class:"w-0 flex-1 text-sm font-medium text-gray-900 dark:text-white"},cC={class:"text-sm font-medium text-gray-900 dark:text-white"},dC={key:0,class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},fC={__name:"Toast",props:{title:{type:String,required:!0},description:{type:String,default:null},type:{type:String,default:"success",validator:n=>["success","error","warning","info"].includes(n)},variant:{type:String,default:"regular",validator:n=>["regular","condensed"].includes(n)},action:{type:String,default:null},duration:{type:Number,default:5e3},autoClose:{type:Boolean,default:!0}},emits:["close","action"],setup(n,{emit:e}){const t=n,s=e,i=Y(!1);let r=null;const o=z(()=>{const u={success:YS,error:rC,warning:eC,info:rc},c={success:"text-sky-400",error:"text-red-400",warning:"text-yellow-400",info:"text-blue-400"},d=u[t.type],f=c[t.type];return()=>Bt(d,{class:`size-6 ${f}`})}),l=()=>{i.value=!1,r&&clearTimeout(r),setTimeout(()=>s("close"),200)},a=()=>{s("action"),l()};return kn(()=>{i.value=!0,t.autoClose&&t.duration>0&&(r=setTimeout(l,t.duration))}),Ie(()=>t.duration,u=>{r&&clearTimeout(r),t.autoClose&&u>0&&(r=setTimeout(l,u))}),(u,c)=>(v(),Ee(Ah,{"enter-active-class":"transform transition duration-300 ease-out","enter-from-class":"translate-y-2 opacity-0 sm:translate-x-2 sm:translate-y-0","enter-to-class":"translate-y-0 opacity-100 sm:translate-x-0","leave-active-class":"transition duration-200 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:te(()=>[i.value?(v(),k("div",oC,[h("div",lC,[h("div",{class:we(n.variant==="condensed"?"flex items-center":"flex items-start")},[n.variant==="regular"?(v(),k("div",aC,[(v(),Ee(Nn(o.value),{class:"size-6"}))])):q("",!0),h("div",{class:we([n.variant==="regular"?"ml-3 w-0 flex-1 pt-0.5":"flex w-0 flex-1 justify-between"])},[n.variant==="condensed"?(v(),k("p",uC,X(n.title),1)):(v(),k(xe,{key:1},[h("p",cC,X(n.title),1),n.description?(v(),k("p",dC,X(n.description),1)):q("",!0)],64)),n.variant==="condensed"&&n.action?(v(),k("button",{key:2,type:"button",onClick:a,class:"ml-3 shrink-0 rounded-md bg-white text-sm font-medium text-sky-600 hover:text-sky-500 focus:outline-2 focus:outline-offset-2 focus:outline-sky-500 dark:bg-gray-800 dark:text-sky-400 dark:hover:text-sky-300 dark:focus:outline-sky-400"},X(n.action),1)):q("",!0)],2),h("div",{class:"ml-4 flex shrink-0"},[h("button",{type:"button",onClick:l,class:"inline-flex rounded-md text-gray-400 hover:text-gray-500 focus:outline-2 focus:outline-offset-2 focus:outline-sky-600 dark:hover:text-white dark:focus:outline-sky-500"},[...c[0]||(c[0]=[h("span",{class:"sr-only"},"Close",-1),h("svg",{viewBox:"0 0 20 20",fill:"currentColor",class:"size-5"},[h("path",{d:"M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z"})],-1)])])])],2)])])):q("",!0)]),_:1}))}},hC={"aria-live":"assertive",class:"pointer-events-none fixed inset-0 flex items-end px-4 py-6 sm:items-start sm:p-6 z-50"},pC={class:"flex w-full flex-col items-center space-y-4 sm:items-end"},mC={__name:"ToastContainer",setup(n,{expose:e}){const t=Y([]);let s=1;const i=a=>{const u=a.type||"success",c=a.title,d=t.value.findIndex(p=>p.title===c&&p.type===u);d>-1&&t.value.splice(d,1);const f={id:s++,title:c,description:a.description||null,type:u,variant:a.variant||"regular",action:a.action||null,duration:a.duration!==void 0?a.duration:5e3,autoClose:a.autoClose!==void 0?a.autoClose:!0,onAction:a.onAction||null};return t.value.push(f),f.id},r=a=>{const u=t.value.findIndex(c=>c.id===a);u>-1&&t.value.splice(u,1)},o=a=>{a.onAction&&a.onAction()};return e({addToast:i,removeToast:r,clearAll:()=>{t.value=[]}}),(a,u)=>(v(),Ee(Yv,{to:"body"},[h("div",hC,[h("div",pC,[(v(!0),k(xe,null,Ve(t.value,c=>(v(),Ee(fC,{key:c.id,title:c.title,description:c.description,type:c.type,variant:c.variant,action:c.action,duration:c.duration,"auto-close":c.autoClose,onClose:d=>r(c.id),onAction:d=>o(c)},null,8,["title","description","type","variant","action","duration","auto-close","onClose","onAction"]))),128))])])]))}};let Wi=null;function gC(n){Wi=n}function lc(){const n=l=>{if(!Wi){console.warn('ToastContainer not initialized. Add <ToastContainer ref="toastContainer" /> to your App.vue');return}return Wi.addToast(l)};return{show:n,success:(l,a=null,u={})=>n({title:l,description:a,type:"success",...u}),error:(l,a=null,u={})=>n({title:l,description:a,type:"error",...u}),warning:(l,a=null,u={})=>n({title:l,description:a,type:"warning",...u}),info:(l,a=null,u={})=>n({title:l,description:a,type:"info",...u}),remove:l=>{Wi&&Wi.removeToast(l)},clearAll:()=>{Wi&&Wi.clearAll()}}}const vC={class:"flex min-h-screen bg-white dark:bg-zinc-900"},yC={class:"hidden lg:fixed lg:inset-y-0 lg:z-50 lg:flex lg:w-72 lg:flex-col xl:w-80"},bC={class:"flex grow flex-col overflow-y-auto border-r border-zinc-900/10 px-6 pb-8 pt-4 dark:border-white/10"},kC={key:0,class:"mt-6"},xC={class:"mt-10"},_C={role:"list"},wC={class:"relative mt-6"},SC={class:"relative mt-3 pl-2"},CC={role:"list",class:"border-l border-transparent"},AC={class:"truncate"},EC={key:0,class:"relative mt-6"},TC={class:"relative mt-3 pl-2"},DC={role:"list",class:"border-l border-transparent"},PC={class:"truncate"},RC={key:0,class:"text-xs text-zinc-400 dark:text-zinc-500"},OC={class:"relative mt-6"},LC={class:"relative mt-3 pl-2"},MC={role:"list",class:"border-l border-transparent"},IC={class:"truncate"},jC={class:"text-xs text-zinc-400 dark:text-zinc-500"},VC={class:"sticky bottom-0 mt-6 border-t border-zinc-900/10 pt-6 dark:border-white/10"},$C={class:"lg:pl-72 xl:pl-80 w-full"},NC={class:"h-screen overflow-auto"},BC={__name:"App",setup(n){const e=Y(null),t=co(),{isDark:s,toggle:i}=JS(),r=Y([]),o=Y([]),l=async()=>{try{const w=await(await fetch("/api/settings/get")).json();r.value=w.projects||[]}catch(m){console.error("Failed to load projects:",m)}},a=async()=>{try{const w=await(await fetch("/api/docs/categories")).json();o.value=w.categories||[]}catch(m){console.error("Failed to load docs categories:",m)}};Ko("loadProjects",l);const u=m=>x.findIndex(P=>P.to==="/projects"&&t.path==="/projects/new"?!1:t.path.startsWith(P.to)),c=()=>r.value.findIndex(m=>t.path===`/project/${m.id}`),d=()=>{const m=t.path.match(/^\/docs\/category\/(\d+)/);if(m){const w=parseInt(m[1]);return o.value.findIndex(P=>P.id===w)}if(t.path.startsWith("/docs/function/")){const w=t.query.category;if(w)return o.value.findIndex(P=>P.id===parseInt(w))}return-1},f=m=>m.to==="/projects"&&t.path==="/projects/new"||t.path.startsWith("/docs")?!1:t.path.startsWith(m.to),p=m=>t.path===`/docs/category/${m}`?!0:t.path.startsWith("/docs/function/")&&t.query.category?parseInt(t.query.category)===m:!1,g=()=>Bt("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[Bt("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})]),b=()=>Bt("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[Bt("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})]),x=[{id:"projects",label:"Projects",to:"/projects"},{id:"settings",label:"New Project Defaults",to:"/settings"}];return kn(async()=>{gC(e.value),await l(),await a()}),(m,w)=>{const P=Bd("router-link"),U=Bd("router-view");return v(),k("div",vC,[h("div",yC,[h("div",bC,[C(P,{to:"/",class:"flex items-center gap-3"},{default:te(()=>[...w[1]||(w[1]=[h("img",{src:F2,alt:"Framework",class:"h-10 w-10"},null,-1),h("span",{class:"text-lg font-semibold text-zinc-900 dark:text-white"},"Framework",-1)])]),_:1}),m.$route.path!=="/projects/new"?(v(),k("div",kC,[C(P,{to:"/projects/new",class:"flex w-full items-center justify-center gap-2 rounded-lg bg-white px-4 py-2.5 text-sm font-medium text-zinc-900 ring-1 ring-zinc-900/10 transition hover:bg-zinc-50 hover:ring-zinc-900/20 dark:bg-white/5 dark:text-white dark:ring-white/10 dark:hover:bg-white/10"},{default:te(()=>[...w[2]||(w[2]=[h("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),fe(" New Project ",-1)])]),_:1})])):q("",!0),h("nav",xC,[h("ul",_C,[h("li",wC,[w[4]||(w[4]=h("h2",{class:"text-xs font-semibold text-zinc-900 dark:text-white"}," Framework ",-1)),h("div",SC,[w[3]||(w[3]=h("div",{class:"absolute inset-y-0 left-2 w-px bg-zinc-900/10 dark:bg-white/5"},null,-1)),u()>=0?(v(),k("div",{key:0,class:"absolute left-2 h-6 w-px bg-sky-500 transition-all duration-200",style:jr({top:`${u()*32+4}px`})},null,4)):q("",!0),h("ul",CC,[(v(),k(xe,null,Ve(x,O=>h("li",{key:O.id,class:"relative"},[C(P,{to:O.to,class:we(["flex justify-between gap-2 py-1 pl-4 pr-3 text-sm transition",f(O)?"text-zinc-900 dark:text-white":"text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white"])},{default:te(()=>[h("span",AC,X(O.label),1)]),_:2},1032,["to","class"])])),64))])])]),r.value.length>0?(v(),k("li",EC,[w[6]||(w[6]=h("h2",{class:"text-xs font-semibold text-zinc-900 dark:text-white"}," Your Projects ",-1)),h("div",TC,[w[5]||(w[5]=h("div",{class:"absolute inset-y-0 left-2 w-px bg-zinc-900/10 dark:bg-white/5"},null,-1)),c()>=0?(v(),k("div",{key:0,class:"absolute left-2 h-6 w-px bg-sky-500 transition-all duration-200",style:jr({top:`${c()*32+4}px`})},null,4)):q("",!0),h("ul",DC,[(v(!0),k(xe,null,Ve(r.value,O=>(v(),k("li",{key:O.id,class:"relative"},[C(P,{to:`/project/${O.id}`,class:we(["flex justify-between gap-2 py-1 pl-4 pr-3 text-sm transition",m.$route.path===`/project/${O.id}`?"text-zinc-900 dark:text-white":"text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white"])},{default:te(()=>[h("span",PC,X(O.name),1),O.type?(v(),k("span",RC,X(O.type==="project"?"":O.type==="course"?"":""),1)):q("",!0)]),_:2},1032,["to","class"])]))),128))])])])):q("",!0),h("li",OC,[w[8]||(w[8]=h("h2",{class:"text-xs font-semibold text-zinc-900 dark:text-white"}," Documentation ",-1)),h("div",LC,[w[7]||(w[7]=h("div",{class:"absolute inset-y-0 left-2 w-px bg-zinc-900/10 dark:bg-white/5"},null,-1)),d()>=0?(v(),k("div",{key:0,class:"absolute left-2 h-6 w-px bg-sky-500 transition-all duration-200",style:jr({top:`${d()*32+4}px`})},null,4)):q("",!0),h("ul",MC,[(v(!0),k(xe,null,Ve(o.value,O=>(v(),k("li",{key:O.id,class:"relative"},[C(P,{to:`/docs/category/${O.id}`,class:we(["flex justify-between gap-2 py-1 pl-4 pr-3 text-sm transition",p(O.id)?"text-zinc-900 dark:text-white":"text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white"])},{default:te(()=>[h("span",IC,X(O.name),1),h("span",jC,X(O.function_count),1)]),_:2},1032,["to","class"])]))),128))])])]),h("li",VC,[h("button",{onClick:w[0]||(w[0]=(...O)=>ut(i)&&ut(i)(...O)),class:"flex w-full items-center gap-3 text-sm text-zinc-600 transition hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white"},[(v(),Ee(Nn(ut(s)?b:g),{class:"h-5 w-5 shrink-0"})),fe(" "+X(ut(s)?"Light Mode":"Dark Mode"),1)])])])])])]),h("div",$C,[h("main",NC,[C(U)])]),C(mC,{ref_key:"toastContainer",ref:e},null,512)])}}},FC=["title"],UC={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},zC={key:1,class:"h-4 w-4 text-sky-600 dark:text-sky-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},HC={key:2},_i={__name:"CopyButton",props:{value:{type:String,required:!0},showLabel:{type:Boolean,default:!1},variant:{type:String,default:"default",validator:n=>["default","ghost","bare"].includes(n)},successMessage:{type:String,default:"Copied to clipboard"}},setup(n){const e=n,t=lc(),s=Y(!1);let i=null;const r=z(()=>e.variant==="bare"?"inline-flex items-center text-sm font-medium transition-all":"inline-flex items-center gap-1.5 rounded-md px-2.5 py-1.5 text-sm font-medium transition-all"),o=z(()=>e.variant==="ghost"?"text-zinc-600 hover:bg-zinc-100 dark:text-zinc-400 dark:hover:bg-zinc-800":e.variant==="bare"?"gap-2 rounded-lg transition-all focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-1 focus-visible:outline-sky-500":"bg-zinc-100 text-zinc-700 hover:bg-zinc-200 dark:bg-zinc-800 dark:text-zinc-300 dark:hover:bg-zinc-700"),l=async()=>{try{await navigator.clipboard.writeText(e.value),s.value=!0,t.success("Copied!",e.successMessage),i&&clearTimeout(i),i=setTimeout(()=>{s.value=!1},2e3)}catch(a){t.error("Copy failed","Could not copy to clipboard"),console.error("Failed to copy:",a)}};return(a,u)=>(v(),k("button",{type:"button",onClick:l,class:we([r.value,o.value,s.value&&"ring-2 ring-sky-500/20"]),title:s.value?"Copied!":"Copy to clipboard"},[pt(a.$slots,"default",{copied:s.value},()=>[s.value?(v(),k("svg",zC,[...u[1]||(u[1]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(v(),k("svg",UC,[...u[0]||(u[0]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"},null,-1)])])),n.showLabel?(v(),k("span",HC,X(s.value?"Copied!":"Copy"),1)):q("",!0)])],10,FC))}},ac=(n,e)=>{const t=n.__vccOpts||n;for(const[s,i]of e)t[s]=i;return t},WC=["innerHTML"],qC={__name:"MarkdownText",props:{content:{type:String,default:""}},setup(n){const e=n,t=z(()=>{if(!e.content)return"";let s=e.content;s=s.replace(/```\n?([\s\S]*?)```/g,(g,b)=>`<pre class="bg-gray-100 dark:bg-gray-800 p-3 rounded text-sm font-mono overflow-x-auto my-2"><code>${b.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").trim()}</code></pre>`),s=s.split(/(<pre[\s\S]*?<\/pre>)/).map(g=>g.startsWith("<pre")?g:g.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")).join(""),s=s.replace(/`([^`]+)`/g,'<code class="bg-gray-100 dark:bg-gray-800 px-1 py-0.5 rounded text-sm font-mono">$1</code>'),s=s.replace(/\*\*([^*]+)\*\*/g,"<strong>$1</strong>"),s=s.replace(new RegExp("(?<!\\S)\\*([^*]+)\\*(?!\\S)","g"),"<em>$1</em>"),s=s.replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" class="text-sky-600 hover:underline" target="_blank">$1</a>');const r=s.split(`
`),o=[];let l=[],a=[],u=null;const c=()=>{l.length>0&&(o.push(`<p>${l.join(" ")}</p>`),l=[])},d=()=>{if(a.length>0&&u){const g=u,b=a.map(x=>`<li>${x}</li>`).join("");o.push(`<${g} class="list-${u==="ul"?"disc":"decimal"} list-inside space-y-1 my-2">${b}</${g}>`),a=[],u=null}};let f=!1,p=[];for(const g of r){const b=g.trim();if(b.startsWith("<pre")){c(),d(),f=!0,p=[g],b.includes("</pre>")&&(o.push(g),f=!1,p=[]);continue}if(f){p.push(g),b.includes("</pre>")&&(o.push(p.join(`
`)),f=!1,p=[]);continue}const x=b.match(/^[-]\s+(.*)$/),m=b.match(/^\d+\.\s+(.*)$/);x?(c(),u&&u!=="ul"&&d(),u="ul",a.push(x[1])):m?(c(),u&&u!=="ol"&&d(),u="ol",a.push(m[1])):b===""?(c(),d()):(d(),l.push(b))}return c(),d(),o.join("")});return(s,i)=>(v(),k("div",{innerHTML:t.value,class:"markdown-text"},null,8,WC))}},Fi=ac(qC,[["__scopeId","data-v-4f93a38e"]]),GC="modulepreload",KC=function(n){return"/"+n},rg={},R=function(e,t,s){let i=Promise.resolve();if(t&&t.length>0){let u=function(c){return Promise.all(c.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};var o=u;document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),a=l?.nonce||l?.getAttribute("nonce");i=u(t.map(c=>{if(c=KC(c),c in rg)return;rg[c]=!0;const d=c.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":GC,d||(p.as="script"),p.crossOrigin="",p.href=c,a&&p.setAttribute("nonce",a),document.head.appendChild(p),d)return new Promise((g,b)=>{p.addEventListener("load",g),p.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${c}`)))})}))}function r(l){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=l,window.dispatchEvent(a),!a.defaultPrevented)throw l}return i.then(l=>{for(const a of l||[])a.status==="rejected"&&r(a.reason);return e().catch(r)})};let Ut=class extends Error{constructor(e){super(e),this.name="ShikiError"}};function JC(n){return Oh(n)}function Oh(n){return Array.isArray(n)?QC(n):n instanceof RegExp?n:typeof n=="object"?YC(n):n}function QC(n){let e=[];for(let t=0,s=n.length;t<s;t++)e[t]=Oh(n[t]);return e}function YC(n){let e={};for(let t in n)e[t]=Oh(n[t]);return e}function Jy(n,...e){return e.forEach(t=>{for(let s in t)n[s]=t[s]}),n}function Qy(n){const e=~n.lastIndexOf("/")||~n.lastIndexOf("\\");return e===0?n:~e===n.length-1?Qy(n.substring(0,n.length-1)):n.substr(~e+1)}var Jc=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g,ha=class{static hasCaptures(n){return n===null?!1:(Jc.lastIndex=0,Jc.test(n))}static replaceCaptures(n,e,t){return n.replace(Jc,(s,i,r,o)=>{let l=t[parseInt(i||r,10)];if(l){let a=e.substring(l.start,l.end);for(;a[0]===".";)a=a.substring(1);switch(o){case"downcase":return a.toLowerCase();case"upcase":return a.toUpperCase();default:return a}}else return s})}};function Yy(n,e){return n<e?-1:n>e?1:0}function Xy(n,e){if(n===null&&e===null)return 0;if(!n)return-1;if(!e)return 1;let t=n.length,s=e.length;if(t===s){for(let i=0;i<t;i++){let r=Yy(n[i],e[i]);if(r!==0)return r}return 0}return t-s}function og(n){return!!(/^#[0-9a-f]{6}$/i.test(n)||/^#[0-9a-f]{8}$/i.test(n)||/^#[0-9a-f]{3}$/i.test(n)||/^#[0-9a-f]{4}$/i.test(n))}function Zy(n){return n.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")}var eb=class{constructor(n){this.fn=n}cache=new Map;get(n){if(this.cache.has(n))return this.cache.get(n);const e=this.fn(n);return this.cache.set(n,e),e}},pu=class{constructor(n,e,t){this._colorMap=n,this._defaults=e,this._root=t}static createFromRawTheme(n,e){return this.createFromParsedTheme(eA(n),e)}static createFromParsedTheme(n,e){return nA(n,e)}_cachedMatchRoot=new eb(n=>this._root.match(n));getColorMap(){return this._colorMap.getColorMap()}getDefaults(){return this._defaults}match(n){if(n===null)return this._defaults;const e=n.scopeName,s=this._cachedMatchRoot.get(e).find(i=>XC(n.parent,i.parentScopes));return s?new tb(s.fontStyle,s.foreground,s.background):null}},Qc=class qa{constructor(e,t){this.parent=e,this.scopeName=t}static push(e,t){for(const s of t)e=new qa(e,s);return e}static from(...e){let t=null;for(let s=0;s<e.length;s++)t=new qa(t,e[s]);return t}push(e){return new qa(this,e)}getSegments(){let e=this;const t=[];for(;e;)t.push(e.scopeName),e=e.parent;return t.reverse(),t}toString(){return this.getSegments().join(" ")}extends(e){return this===e?!0:this.parent===null?!1:this.parent.extends(e)}getExtensionIfDefined(e){const t=[];let s=this;for(;s&&s!==e;)t.push(s.scopeName),s=s.parent;return s===e?t.reverse():void 0}};function XC(n,e){if(e.length===0)return!0;for(let t=0;t<e.length;t++){let s=e[t],i=!1;if(s===">"){if(t===e.length-1)return!1;s=e[++t],i=!0}for(;n&&!ZC(n.scopeName,s);){if(i)return!1;n=n.parent}if(!n)return!1;n=n.parent}return!0}function ZC(n,e){return e===n||n.startsWith(e)&&n[e.length]==="."}var tb=class{constructor(n,e,t){this.fontStyle=n,this.foregroundId=e,this.backgroundId=t}};function eA(n){if(!n)return[];if(!n.settings||!Array.isArray(n.settings))return[];let e=n.settings,t=[],s=0;for(let i=0,r=e.length;i<r;i++){let o=e[i];if(!o.settings)continue;let l;if(typeof o.scope=="string"){let d=o.scope;d=d.replace(/^[,]+/,""),d=d.replace(/[,]+$/,""),l=d.split(",")}else Array.isArray(o.scope)?l=o.scope:l=[""];let a=-1;if(typeof o.settings.fontStyle=="string"){a=0;let d=o.settings.fontStyle.split(" ");for(let f=0,p=d.length;f<p;f++)switch(d[f]){case"italic":a=a|1;break;case"bold":a=a|2;break;case"underline":a=a|4;break;case"strikethrough":a=a|8;break}}let u=null;typeof o.settings.foreground=="string"&&og(o.settings.foreground)&&(u=o.settings.foreground);let c=null;typeof o.settings.background=="string"&&og(o.settings.background)&&(c=o.settings.background);for(let d=0,f=l.length;d<f;d++){let g=l[d].trim().split(" "),b=g[g.length-1],x=null;g.length>1&&(x=g.slice(0,g.length-1),x.reverse()),t[s++]=new tA(b,x,i,a,u,c)}}return t}var tA=class{constructor(n,e,t,s,i,r){this.scope=n,this.parentScopes=e,this.index=t,this.fontStyle=s,this.foreground=i,this.background=r}},vn=(n=>(n[n.NotSet=-1]="NotSet",n[n.None=0]="None",n[n.Italic=1]="Italic",n[n.Bold=2]="Bold",n[n.Underline=4]="Underline",n[n.Strikethrough=8]="Strikethrough",n))(vn||{});function nA(n,e){n.sort((a,u)=>{let c=Yy(a.scope,u.scope);return c!==0||(c=Xy(a.parentScopes,u.parentScopes),c!==0)?c:a.index-u.index});let t=0,s="#000000",i="#ffffff";for(;n.length>=1&&n[0].scope==="";){let a=n.shift();a.fontStyle!==-1&&(t=a.fontStyle),a.foreground!==null&&(s=a.foreground),a.background!==null&&(i=a.background)}let r=new sA(e),o=new tb(t,r.getId(s),r.getId(i)),l=new rA(new Zd(0,null,-1,0,0),[]);for(let a=0,u=n.length;a<u;a++){let c=n[a];l.insert(0,c.scope,c.parentScopes,c.fontStyle,r.getId(c.foreground),r.getId(c.background))}return new pu(r,o,l)}var sA=class{_isFrozen;_lastColorId;_id2color;_color2id;constructor(n){if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(n)){this._isFrozen=!0;for(let e=0,t=n.length;e<t;e++)this._color2id[n[e]]=e,this._id2color[e]=n[e]}else this._isFrozen=!1}getId(n){if(n===null)return 0;n=n.toUpperCase();let e=this._color2id[n];if(e)return e;if(this._isFrozen)throw new Error(`Missing color in color map - ${n}`);return e=++this._lastColorId,this._color2id[n]=e,this._id2color[e]=n,e}getColorMap(){return this._id2color.slice(0)}},iA=Object.freeze([]),Zd=class nb{scopeDepth;parentScopes;fontStyle;foreground;background;constructor(e,t,s,i,r){this.scopeDepth=e,this.parentScopes=t||iA,this.fontStyle=s,this.foreground=i,this.background=r}clone(){return new nb(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}static cloneArr(e){let t=[];for(let s=0,i=e.length;s<i;s++)t[s]=e[s].clone();return t}acceptOverwrite(e,t,s,i){this.scopeDepth>e?console.log("how did this happen?"):this.scopeDepth=e,t!==-1&&(this.fontStyle=t),s!==0&&(this.foreground=s),i!==0&&(this.background=i)}},rA=class ef{constructor(e,t=[],s={}){this._mainRule=e,this._children=s,this._rulesWithParentScopes=t}_rulesWithParentScopes;static _cmpBySpecificity(e,t){if(e.scopeDepth!==t.scopeDepth)return t.scopeDepth-e.scopeDepth;let s=0,i=0;for(;e.parentScopes[s]===">"&&s++,t.parentScopes[i]===">"&&i++,!(s>=e.parentScopes.length||i>=t.parentScopes.length);){const r=t.parentScopes[i].length-e.parentScopes[s].length;if(r!==0)return r;s++,i++}return t.parentScopes.length-e.parentScopes.length}match(e){if(e!==""){let s=e.indexOf("."),i,r;if(s===-1?(i=e,r=""):(i=e.substring(0,s),r=e.substring(s+1)),this._children.hasOwnProperty(i))return this._children[i].match(r)}const t=this._rulesWithParentScopes.concat(this._mainRule);return t.sort(ef._cmpBySpecificity),t}insert(e,t,s,i,r,o){if(t===""){this._doInsertHere(e,s,i,r,o);return}let l=t.indexOf("."),a,u;l===-1?(a=t,u=""):(a=t.substring(0,l),u=t.substring(l+1));let c;this._children.hasOwnProperty(a)?c=this._children[a]:(c=new ef(this._mainRule.clone(),Zd.cloneArr(this._rulesWithParentScopes)),this._children[a]=c),c.insert(e+1,u,s,i,r,o)}_doInsertHere(e,t,s,i,r){if(t===null){this._mainRule.acceptOverwrite(e,s,i,r);return}for(let o=0,l=this._rulesWithParentScopes.length;o<l;o++){let a=this._rulesWithParentScopes[o];if(Xy(a.parentScopes,t)===0){a.acceptOverwrite(e,s,i,r);return}}s===-1&&(s=this._mainRule.fontStyle),i===0&&(i=this._mainRule.foreground),r===0&&(r=this._mainRule.background),this._rulesWithParentScopes.push(new Zd(e,t,s,i,r))}},Xr=class Yn{static toBinaryStr(e){return e.toString(2).padStart(32,"0")}static print(e){const t=Yn.getLanguageId(e),s=Yn.getTokenType(e),i=Yn.getFontStyle(e),r=Yn.getForeground(e),o=Yn.getBackground(e);console.log({languageId:t,tokenType:s,fontStyle:i,foreground:r,background:o})}static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getBackground(e){return(e&4278190080)>>>24}static set(e,t,s,i,r,o,l){let a=Yn.getLanguageId(e),u=Yn.getTokenType(e),c=Yn.containsBalancedBrackets(e)?1:0,d=Yn.getFontStyle(e),f=Yn.getForeground(e),p=Yn.getBackground(e);return t!==0&&(a=t),s!==8&&(u=s),i!==null&&(c=i?1:0),r!==-1&&(d=r),o!==0&&(f=o),l!==0&&(p=l),(a<<0|u<<8|c<<10|d<<11|f<<15|p<<24)>>>0}};function mu(n,e){const t=[],s=oA(n);let i=s.next();for(;i!==null;){let a=0;if(i.length===2&&i.charAt(1)===":"){switch(i.charAt(0)){case"R":a=1;break;case"L":a=-1;break;default:console.log(`Unknown priority ${i} in scope selector`)}i=s.next()}let u=o();if(t.push({matcher:u,priority:a}),i!==",")break;i=s.next()}return t;function r(){if(i==="-"){i=s.next();const a=r();return u=>!!a&&!a(u)}if(i==="("){i=s.next();const a=l();return i===")"&&(i=s.next()),a}if(lg(i)){const a=[];do a.push(i),i=s.next();while(lg(i));return u=>e(a,u)}return null}function o(){const a=[];let u=r();for(;u;)a.push(u),u=r();return c=>a.every(d=>d(c))}function l(){const a=[];let u=o();for(;u&&(a.push(u),i==="|"||i===",");){do i=s.next();while(i==="|"||i===",");u=o()}return c=>a.some(d=>d(c))}}function lg(n){return!!n&&!!n.match(/[\w\.:]+/)}function oA(n){let e=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,t=e.exec(n);return{next:()=>{if(!t)return null;const s=t[0];return t=e.exec(n),s}}}function sb(n){typeof n.dispose=="function"&&n.dispose()}var pl=class{constructor(n){this.scopeName=n}toKey(){return this.scopeName}},lA=class{constructor(n,e){this.scopeName=n,this.ruleName=e}toKey(){return`${this.scopeName}#${this.ruleName}`}},aA=class{_references=[];_seenReferenceKeys=new Set;get references(){return this._references}visitedRule=new Set;add(n){const e=n.toKey();this._seenReferenceKeys.has(e)||(this._seenReferenceKeys.add(e),this._references.push(n))}},uA=class{constructor(n,e){this.repo=n,this.initialScopeName=e,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new pl(this.initialScopeName)]}seenFullScopeRequests=new Set;seenPartialScopeRequests=new Set;Q;processQueue(){const n=this.Q;this.Q=[];const e=new aA;for(const t of n)cA(t,this.initialScopeName,this.repo,e);for(const t of e.references)if(t instanceof pl){if(this.seenFullScopeRequests.has(t.scopeName))continue;this.seenFullScopeRequests.add(t.scopeName),this.Q.push(t)}else{if(this.seenFullScopeRequests.has(t.scopeName)||this.seenPartialScopeRequests.has(t.toKey()))continue;this.seenPartialScopeRequests.add(t.toKey()),this.Q.push(t)}}};function cA(n,e,t,s){const i=t.lookup(n.scopeName);if(!i){if(n.scopeName===e)throw new Error(`No grammar provided for <${e}>`);return}const r=t.lookup(e);n instanceof pl?Ga({baseGrammar:r,selfGrammar:i},s):tf(n.ruleName,{baseGrammar:r,selfGrammar:i,repository:i.repository},s);const o=t.injections(n.scopeName);if(o)for(const l of o)s.add(new pl(l))}function tf(n,e,t){if(e.repository&&e.repository[n]){const s=e.repository[n];gu([s],e,t)}}function Ga(n,e){n.selfGrammar.patterns&&Array.isArray(n.selfGrammar.patterns)&&gu(n.selfGrammar.patterns,{...n,repository:n.selfGrammar.repository},e),n.selfGrammar.injections&&gu(Object.values(n.selfGrammar.injections),{...n,repository:n.selfGrammar.repository},e)}function gu(n,e,t){for(const s of n){if(t.visitedRule.has(s))continue;t.visitedRule.add(s);const i=s.repository?Jy({},e.repository,s.repository):e.repository;Array.isArray(s.patterns)&&gu(s.patterns,{...e,repository:i},t);const r=s.include;if(!r)continue;const o=ib(r);switch(o.kind){case 0:Ga({...e,selfGrammar:e.baseGrammar},t);break;case 1:Ga(e,t);break;case 2:tf(o.ruleName,{...e,repository:i},t);break;case 3:case 4:const l=o.scopeName===e.selfGrammar.scopeName?e.selfGrammar:o.scopeName===e.baseGrammar.scopeName?e.baseGrammar:void 0;if(l){const a={baseGrammar:e.baseGrammar,selfGrammar:l,repository:i};o.kind===4?tf(o.ruleName,a,t):Ga(a,t)}else o.kind===4?t.add(new lA(o.scopeName,o.ruleName)):t.add(new pl(o.scopeName));break}}}var dA=class{kind=0},fA=class{kind=1},hA=class{constructor(n){this.ruleName=n}kind=2},pA=class{constructor(n){this.scopeName=n}kind=3},mA=class{constructor(n,e){this.scopeName=n,this.ruleName=e}kind=4};function ib(n){if(n==="$base")return new dA;if(n==="$self")return new fA;const e=n.indexOf("#");if(e===-1)return new pA(n);if(e===0)return new hA(n.substring(1));{const t=n.substring(0,e),s=n.substring(e+1);return new mA(t,s)}}var gA=/\\(\d+)/,ag=/\\(\d+)/g,vA=-1,rb=-2;var Fl=class{$location;id;_nameIsCapturing;_name;_contentNameIsCapturing;_contentName;constructor(e,t,s,i){this.$location=e,this.id=t,this._name=s||null,this._nameIsCapturing=ha.hasCaptures(this._name),this._contentName=i||null,this._contentNameIsCapturing=ha.hasCaptures(this._contentName)}get debugName(){const e=this.$location?`${Qy(this.$location.filename)}:${this.$location.line}`:"unknown";return`${this.constructor.name}#${this.id} @ ${e}`}getName(e,t){return!this._nameIsCapturing||this._name===null||e===null||t===null?this._name:ha.replaceCaptures(this._name,e,t)}getContentName(e,t){return!this._contentNameIsCapturing||this._contentName===null?this._contentName:ha.replaceCaptures(this._contentName,e,t)}},yA=class extends Fl{retokenizeCapturedWithRuleId;constructor(n,e,t,s,i){super(n,e,t,s),this.retokenizeCapturedWithRuleId=i}dispose(){}collectPatterns(n,e){throw new Error("Not supported!")}compile(n,e){throw new Error("Not supported!")}compileAG(n,e,t,s){throw new Error("Not supported!")}},bA=class extends Fl{_match;captures;_cachedCompiledPatterns;constructor(n,e,t,s,i){super(n,e,t,null),this._match=new ml(s,this.id),this.captures=i,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugMatchRegExp(){return`${this._match.source}`}collectPatterns(n,e){e.push(this._match)}compile(n,e){return this._getCachedCompiledPatterns(n).compile(n)}compileAG(n,e,t,s){return this._getCachedCompiledPatterns(n).compileAG(n,t,s)}_getCachedCompiledPatterns(n){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new gl,this.collectPatterns(n,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},ug=class extends Fl{hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(n,e,t,s,i){super(n,e,t,s),this.patterns=i.patterns,this.hasMissingPatterns=i.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}collectPatterns(n,e){for(const t of this.patterns)n.getRule(t).collectPatterns(n,e)}compile(n,e){return this._getCachedCompiledPatterns(n).compile(n)}compileAG(n,e,t,s){return this._getCachedCompiledPatterns(n).compileAG(n,t,s)}_getCachedCompiledPatterns(n){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new gl,this.collectPatterns(n,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},nf=class extends Fl{_begin;beginCaptures;_end;endHasBackReferences;endCaptures;applyEndPatternLast;hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(n,e,t,s,i,r,o,l,a,u){super(n,e,t,s),this._begin=new ml(i,this.id),this.beginCaptures=r,this._end=new ml(o||"",-1),this.endHasBackReferences=this._end.hasBackReferences,this.endCaptures=l,this.applyEndPatternLast=a||!1,this.patterns=u.patterns,this.hasMissingPatterns=u.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugEndRegExp(){return`${this._end.source}`}getEndWithResolvedBackReferences(n,e){return this._end.resolveBackReferences(n,e)}collectPatterns(n,e){e.push(this._begin)}compile(n,e){return this._getCachedCompiledPatterns(n,e).compile(n)}compileAG(n,e,t,s){return this._getCachedCompiledPatterns(n,e).compileAG(n,t,s)}_getCachedCompiledPatterns(n,e){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new gl;for(const t of this.patterns)n.getRule(t).collectPatterns(n,this._cachedCompiledPatterns);this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,e):this._cachedCompiledPatterns.setSource(0,e)),this._cachedCompiledPatterns}},vu=class extends Fl{_begin;beginCaptures;whileCaptures;_while;whileHasBackReferences;hasMissingPatterns;patterns;_cachedCompiledPatterns;_cachedCompiledWhilePatterns;constructor(n,e,t,s,i,r,o,l,a){super(n,e,t,s),this._begin=new ml(i,this.id),this.beginCaptures=r,this.whileCaptures=l,this._while=new ml(o,rb),this.whileHasBackReferences=this._while.hasBackReferences,this.patterns=a.patterns,this.hasMissingPatterns=a.hasMissingPatterns,this._cachedCompiledPatterns=null,this._cachedCompiledWhilePatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugWhileRegExp(){return`${this._while.source}`}getWhileWithResolvedBackReferences(n,e){return this._while.resolveBackReferences(n,e)}collectPatterns(n,e){e.push(this._begin)}compile(n,e){return this._getCachedCompiledPatterns(n).compile(n)}compileAG(n,e,t,s){return this._getCachedCompiledPatterns(n).compileAG(n,t,s)}_getCachedCompiledPatterns(n){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new gl;for(const e of this.patterns)n.getRule(e).collectPatterns(n,this._cachedCompiledPatterns)}return this._cachedCompiledPatterns}compileWhile(n,e){return this._getCachedCompiledWhilePatterns(n,e).compile(n)}compileWhileAG(n,e,t,s){return this._getCachedCompiledWhilePatterns(n,e).compileAG(n,t,s)}_getCachedCompiledWhilePatterns(n,e){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new gl,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,e||""),this._cachedCompiledWhilePatterns}},ob=class cn{static createCaptureRule(e,t,s,i,r){return e.registerRule(o=>new yA(t,o,s,i,r))}static getCompiledRuleId(e,t,s){return e.id||t.registerRule(i=>{if(e.id=i,e.match)return new bA(e.$vscodeTextmateLocation,e.id,e.name,e.match,cn._compileCaptures(e.captures,t,s));if(typeof e.begin>"u"){e.repository&&(s=Jy({},s,e.repository));let r=e.patterns;return typeof r>"u"&&e.include&&(r=[{include:e.include}]),new ug(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,cn._compilePatterns(r,t,s))}return e.while?new vu(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,cn._compileCaptures(e.beginCaptures||e.captures,t,s),e.while,cn._compileCaptures(e.whileCaptures||e.captures,t,s),cn._compilePatterns(e.patterns,t,s)):new nf(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,cn._compileCaptures(e.beginCaptures||e.captures,t,s),e.end,cn._compileCaptures(e.endCaptures||e.captures,t,s),e.applyEndPatternLast,cn._compilePatterns(e.patterns,t,s))}),e.id}static _compileCaptures(e,t,s){let i=[];if(e){let r=0;for(const o in e){if(o==="$vscodeTextmateLocation")continue;const l=parseInt(o,10);l>r&&(r=l)}for(let o=0;o<=r;o++)i[o]=null;for(const o in e){if(o==="$vscodeTextmateLocation")continue;const l=parseInt(o,10);let a=0;e[o].patterns&&(a=cn.getCompiledRuleId(e[o],t,s)),i[l]=cn.createCaptureRule(t,e[o].$vscodeTextmateLocation,e[o].name,e[o].contentName,a)}}return i}static _compilePatterns(e,t,s){let i=[];if(e)for(let r=0,o=e.length;r<o;r++){const l=e[r];let a=-1;if(l.include){const u=ib(l.include);switch(u.kind){case 0:case 1:a=cn.getCompiledRuleId(s[l.include],t,s);break;case 2:let c=s[u.ruleName];c&&(a=cn.getCompiledRuleId(c,t,s));break;case 3:case 4:const d=u.scopeName,f=u.kind===4?u.ruleName:null,p=t.getExternalGrammar(d,s);if(p)if(f){let g=p.repository[f];g&&(a=cn.getCompiledRuleId(g,t,p.repository))}else a=cn.getCompiledRuleId(p.repository.$self,t,p.repository);break}}else a=cn.getCompiledRuleId(l,t,s);if(a!==-1){const u=t.getRule(a);let c=!1;if((u instanceof ug||u instanceof nf||u instanceof vu)&&u.hasMissingPatterns&&u.patterns.length===0&&(c=!0),c)continue;i.push(a)}}return{patterns:i,hasMissingPatterns:(e?e.length:0)!==i.length}}},ml=class lb{source;ruleId;hasAnchor;hasBackReferences;_anchorCache;constructor(e,t){if(e&&typeof e=="string"){const s=e.length;let i=0,r=[],o=!1;for(let l=0;l<s;l++)if(e.charAt(l)==="\\"&&l+1<s){const u=e.charAt(l+1);u==="z"?(r.push(e.substring(i,l)),r.push("$(?!\\n)(?<!\\n)"),i=l+2):(u==="A"||u==="G")&&(o=!0),l++}this.hasAnchor=o,i===0?this.source=e:(r.push(e.substring(i,s)),this.source=r.join(""))}else this.hasAnchor=!1,this.source=e;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=t,typeof this.source=="string"?this.hasBackReferences=gA.test(this.source):this.hasBackReferences=!1}clone(){return new lb(this.source,this.ruleId)}setSource(e){this.source!==e&&(this.source=e,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}resolveBackReferences(e,t){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let s=t.map(i=>e.substring(i.start,i.end));return ag.lastIndex=0,this.source.replace(ag,(i,r)=>Zy(s[parseInt(r,10)]||""))}_buildAnchorCache(){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let e=[],t=[],s=[],i=[],r,o,l,a;for(r=0,o=this.source.length;r<o;r++)l=this.source.charAt(r),e[r]=l,t[r]=l,s[r]=l,i[r]=l,l==="\\"&&r+1<o&&(a=this.source.charAt(r+1),a==="A"?(e[r+1]="",t[r+1]="",s[r+1]="A",i[r+1]="A"):a==="G"?(e[r+1]="",t[r+1]="G",s[r+1]="",i[r+1]="G"):(e[r+1]=a,t[r+1]=a,s[r+1]=a,i[r+1]=a),r++);return{A0_G0:e.join(""),A0_G1:t.join(""),A1_G0:s.join(""),A1_G1:i.join("")}}resolveAnchors(e,t){return!this.hasAnchor||!this._anchorCache||typeof this.source!="string"?this.source:e?t?this._anchorCache.A1_G1:this._anchorCache.A1_G0:t?this._anchorCache.A0_G1:this._anchorCache.A0_G0}},gl=class{_items;_hasAnchors;_cached;_anchorCache;constructor(){this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}dispose(){this._disposeCaches()}_disposeCaches(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}push(n){this._items.push(n),this._hasAnchors=this._hasAnchors||n.hasAnchor}unshift(n){this._items.unshift(n),this._hasAnchors=this._hasAnchors||n.hasAnchor}length(){return this._items.length}setSource(n,e){this._items[n].source!==e&&(this._disposeCaches(),this._items[n].setSource(e))}compile(n){if(!this._cached){let e=this._items.map(t=>t.source);this._cached=new cg(n,e,this._items.map(t=>t.ruleId))}return this._cached}compileAG(n,e,t){return this._hasAnchors?e?t?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(n,e,t)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(n,e,t)),this._anchorCache.A1_G0):t?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(n,e,t)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(n,e,t)),this._anchorCache.A0_G0):this.compile(n)}_resolveAnchors(n,e,t){let s=this._items.map(i=>i.resolveAnchors(e,t));return new cg(n,s,this._items.map(i=>i.ruleId))}},cg=class{constructor(n,e,t){this.regExps=e,this.rules=t,this.scanner=n.createOnigScanner(e)}scanner;dispose(){typeof this.scanner.dispose=="function"&&this.scanner.dispose()}toString(){const n=[];for(let e=0,t=this.rules.length;e<t;e++)n.push("   - "+this.rules[e]+": "+this.regExps[e]);return n.join(`
`)}findNextMatchSync(n,e,t){const s=this.scanner.findNextMatchSync(n,e,t);return s?{ruleId:this.rules[s.index],captureIndices:s.captureIndices}:null}},Yc=class{constructor(n,e){this.languageId=n,this.tokenType=e}},kA=class sf{_defaultAttributes;_embeddedLanguagesMatcher;constructor(e,t){this._defaultAttributes=new Yc(e,8),this._embeddedLanguagesMatcher=new xA(Object.entries(t||{}))}getDefaultAttributes(){return this._defaultAttributes}getBasicScopeAttributes(e){return e===null?sf._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(e)}static _NULL_SCOPE_METADATA=new Yc(0,0);_getBasicScopeAttributes=new eb(e=>{const t=this._scopeToLanguage(e),s=this._toStandardTokenType(e);return new Yc(t,s)});_scopeToLanguage(e){return this._embeddedLanguagesMatcher.match(e)||0}_toStandardTokenType(e){const t=e.match(sf.STANDARD_TOKEN_TYPE_REGEXP);if(!t)return 8;switch(t[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw new Error("Unexpected match for standard token type!")}static STANDARD_TOKEN_TYPE_REGEXP=/\b(comment|string|regex|meta\.embedded)\b/},xA=class{values;scopesRegExp;constructor(n){if(n.length===0)this.values=null,this.scopesRegExp=null;else{this.values=new Map(n);const e=n.map(([t,s])=>Zy(t));e.sort(),e.reverse(),this.scopesRegExp=new RegExp(`^((${e.join(")|(")}))($|\\.)`,"")}}match(n){if(!this.scopesRegExp)return;const e=n.match(this.scopesRegExp);if(e)return this.values.get(e[1])}},dg=class{constructor(n,e){this.stack=n,this.stoppedEarly=e}};function ab(n,e,t,s,i,r,o,l){const a=e.content.length;let u=!1,c=-1;if(o){const p=_A(n,e,t,s,i,r);i=p.stack,s=p.linePos,t=p.isFirstLine,c=p.anchorPosition}const d=Date.now();for(;!u;){if(l!==0&&Date.now()-d>l)return new dg(i,!0);f()}return new dg(i,!1);function f(){const p=wA(n,e,t,s,i,c);if(!p){r.produce(i,a),u=!0;return}const g=p.captureIndices,b=p.matchedRuleId,x=g&&g.length>0?g[0].end>s:!1;if(b===vA){const m=i.getRule(n);r.produce(i,g[0].start),i=i.withContentNameScopesList(i.nameScopesList),Vo(n,e,t,i,r,m.endCaptures,g),r.produce(i,g[0].end);const w=i;if(i=i.parent,c=w.getAnchorPos(),!x&&w.getEnterPos()===s){i=w,r.produce(i,a),u=!0;return}}else{const m=n.getRule(b);r.produce(i,g[0].start);const w=i,P=m.getName(e.content,g),U=i.contentNameScopesList.pushAttributed(P,n);if(i=i.push(b,s,c,g[0].end===a,null,U,U),m instanceof nf){const O=m;Vo(n,e,t,i,r,O.beginCaptures,g),r.produce(i,g[0].end),c=g[0].end;const A=O.getContentName(e.content,g),_=U.pushAttributed(A,n);if(i=i.withContentNameScopesList(_),O.endHasBackReferences&&(i=i.withEndRule(O.getEndWithResolvedBackReferences(e.content,g))),!x&&w.hasSameRuleAs(i)){i=i.pop(),r.produce(i,a),u=!0;return}}else if(m instanceof vu){const O=m;Vo(n,e,t,i,r,O.beginCaptures,g),r.produce(i,g[0].end),c=g[0].end;const A=O.getContentName(e.content,g),_=U.pushAttributed(A,n);if(i=i.withContentNameScopesList(_),O.whileHasBackReferences&&(i=i.withEndRule(O.getWhileWithResolvedBackReferences(e.content,g))),!x&&w.hasSameRuleAs(i)){i=i.pop(),r.produce(i,a),u=!0;return}}else if(Vo(n,e,t,i,r,m.captures,g),r.produce(i,g[0].end),i=i.pop(),!x){i=i.safePop(),r.produce(i,a),u=!0;return}}g[0].end>s&&(s=g[0].end,t=!1)}}function _A(n,e,t,s,i,r){let o=i.beginRuleCapturedEOL?0:-1;const l=[];for(let a=i;a;a=a.pop()){const u=a.getRule(n);u instanceof vu&&l.push({rule:u,stack:a})}for(let a=l.pop();a;a=l.pop()){const{ruleScanner:u,findOptions:c}=AA(a.rule,n,a.stack.endRule,t,s===o),d=u.findNextMatchSync(e,s,c);if(d){if(d.ruleId!==rb){i=a.stack.pop();break}d.captureIndices&&d.captureIndices.length&&(r.produce(a.stack,d.captureIndices[0].start),Vo(n,e,t,a.stack,r,a.rule.whileCaptures,d.captureIndices),r.produce(a.stack,d.captureIndices[0].end),o=d.captureIndices[0].end,d.captureIndices[0].end>s&&(s=d.captureIndices[0].end,t=!1))}else{i=a.stack.pop();break}}return{stack:i,linePos:s,anchorPosition:o,isFirstLine:t}}function wA(n,e,t,s,i,r){const o=SA(n,e,t,s,i,r),l=n.getInjections();if(l.length===0)return o;const a=CA(l,n,e,t,s,i,r);if(!a)return o;if(!o)return a;const u=o.captureIndices[0].start,c=a.captureIndices[0].start;return c<u||a.priorityMatch&&c===u?a:o}function SA(n,e,t,s,i,r){const o=i.getRule(n),{ruleScanner:l,findOptions:a}=ub(o,n,i.endRule,t,s===r),u=l.findNextMatchSync(e,s,a);return u?{captureIndices:u.captureIndices,matchedRuleId:u.ruleId}:null}function CA(n,e,t,s,i,r,o){let l=Number.MAX_VALUE,a=null,u,c=0;const d=r.contentNameScopesList.getScopeNames();for(let f=0,p=n.length;f<p;f++){const g=n[f];if(!g.matcher(d))continue;const b=e.getRule(g.ruleId),{ruleScanner:x,findOptions:m}=ub(b,e,null,s,i===o),w=x.findNextMatchSync(t,i,m);if(!w)continue;const P=w.captureIndices[0].start;if(!(P>=l)&&(l=P,a=w.captureIndices,u=w.ruleId,c=g.priority,l===i))break}return a?{priorityMatch:c===-1,captureIndices:a,matchedRuleId:u}:null}function ub(n,e,t,s,i){return{ruleScanner:n.compileAG(e,t,s,i),findOptions:0}}function AA(n,e,t,s,i){return{ruleScanner:n.compileWhileAG(e,t,s,i),findOptions:0}}function Vo(n,e,t,s,i,r,o){if(r.length===0)return;const l=e.content,a=Math.min(r.length,o.length),u=[],c=o[0].end;for(let d=0;d<a;d++){const f=r[d];if(f===null)continue;const p=o[d];if(p.length===0)continue;if(p.start>c)break;for(;u.length>0&&u[u.length-1].endPos<=p.start;)i.produceFromScopes(u[u.length-1].scopes,u[u.length-1].endPos),u.pop();if(u.length>0?i.produceFromScopes(u[u.length-1].scopes,p.start):i.produce(s,p.start),f.retokenizeCapturedWithRuleId){const b=f.getName(l,o),x=s.contentNameScopesList.pushAttributed(b,n),m=f.getContentName(l,o),w=x.pushAttributed(m,n),P=s.push(f.retokenizeCapturedWithRuleId,p.start,-1,!1,null,x,w),U=n.createOnigString(l.substring(0,p.end));ab(n,U,t&&p.start===0,p.start,P,i,!1,0),sb(U);continue}const g=f.getName(l,o);if(g!==null){const x=(u.length>0?u[u.length-1].scopes:s.contentNameScopesList).pushAttributed(g,n);u.push(new EA(x,p.end))}}for(;u.length>0;)i.produceFromScopes(u[u.length-1].scopes,u[u.length-1].endPos),u.pop()}var EA=class{scopes;endPos;constructor(n,e){this.scopes=n,this.endPos=e}};function TA(n,e,t,s,i,r,o,l){return new PA(n,e,t,s,i,r,o,l)}function fg(n,e,t,s,i){const r=mu(e,yu),o=ob.getCompiledRuleId(t,s,i.repository);for(const l of r)n.push({debugSelector:e,matcher:l.matcher,ruleId:o,grammar:i,priority:l.priority})}function yu(n,e){if(e.length<n.length)return!1;let t=0;return n.every(s=>{for(let i=t;i<e.length;i++)if(DA(e[i],s))return t=i+1,!0;return!1})}function DA(n,e){if(!n)return!1;if(n===e)return!0;const t=e.length;return n.length>t&&n.substr(0,t)===e&&n[t]==="."}var PA=class{constructor(n,e,t,s,i,r,o,l){if(this._rootScopeName=n,this.balancedBracketSelectors=r,this._onigLib=l,this._basicScopeAttributesProvider=new kA(t,s),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=o,this._grammar=hg(e,null),this._injections=null,this._tokenTypeMatchers=[],i)for(const a of Object.keys(i)){const u=mu(a,yu);for(const c of u)this._tokenTypeMatchers.push({matcher:c.matcher,type:i[a]})}}_rootId;_lastRuleId;_ruleId2desc;_includedGrammars;_grammarRepository;_grammar;_injections;_basicScopeAttributesProvider;_tokenTypeMatchers;get themeProvider(){return this._grammarRepository}dispose(){for(const n of this._ruleId2desc)n&&n.dispose()}createOnigScanner(n){return this._onigLib.createOnigScanner(n)}createOnigString(n){return this._onigLib.createOnigString(n)}getMetadataForScope(n){return this._basicScopeAttributesProvider.getBasicScopeAttributes(n)}_collectInjections(){const n={lookup:i=>i===this._rootScopeName?this._grammar:this.getExternalGrammar(i),injections:i=>this._grammarRepository.injections(i)},e=[],t=this._rootScopeName,s=n.lookup(t);if(s){const i=s.injections;if(i)for(let o in i)fg(e,o,i[o],this,s);const r=this._grammarRepository.injections(t);r&&r.forEach(o=>{const l=this.getExternalGrammar(o);if(l){const a=l.injectionSelector;a&&fg(e,a,l,this,l)}})}return e.sort((i,r)=>i.priority-r.priority),e}getInjections(){return this._injections===null&&(this._injections=this._collectInjections()),this._injections}registerRule(n){const e=++this._lastRuleId,t=n(e);return this._ruleId2desc[e]=t,t}getRule(n){return this._ruleId2desc[n]}getExternalGrammar(n,e){if(this._includedGrammars[n])return this._includedGrammars[n];if(this._grammarRepository){const t=this._grammarRepository.lookup(n);if(t)return this._includedGrammars[n]=hg(t,e&&e.$base),this._includedGrammars[n]}}tokenizeLine(n,e,t=0){const s=this._tokenize(n,e,!1,t);return{tokens:s.lineTokens.getResult(s.ruleStack,s.lineLength),ruleStack:s.ruleStack,stoppedEarly:s.stoppedEarly}}tokenizeLine2(n,e,t=0){const s=this._tokenize(n,e,!0,t);return{tokens:s.lineTokens.getBinaryResult(s.ruleStack,s.lineLength),ruleStack:s.ruleStack,stoppedEarly:s.stoppedEarly}}_tokenize(n,e,t,s){this._rootId===-1&&(this._rootId=ob.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository),this.getInjections());let i;if(!e||e===rf.NULL){i=!0;const u=this._basicScopeAttributesProvider.getDefaultAttributes(),c=this.themeProvider.getDefaults(),d=Xr.set(0,u.languageId,u.tokenType,null,c.fontStyle,c.foregroundId,c.backgroundId),f=this.getRule(this._rootId).getName(null,null);let p;f?p=Yo.createRootAndLookUpScopeName(f,d,this):p=Yo.createRoot("unknown",d),e=new rf(null,this._rootId,-1,-1,!1,null,p,p)}else i=!1,e.reset();n=n+`
`;const r=this.createOnigString(n),o=r.content.length,l=new OA(t,n,this._tokenTypeMatchers,this.balancedBracketSelectors),a=ab(this,r,i,0,e,l,!0,s);return sb(r),{lineLength:o,lineTokens:l,ruleStack:a.stack,stoppedEarly:a.stoppedEarly}}};function hg(n,e){return n=JC(n),n.repository=n.repository||{},n.repository.$self={$vscodeTextmateLocation:n.$vscodeTextmateLocation,patterns:n.patterns,name:n.scopeName},n.repository.$base=e||n.repository.$self,n}var Yo=class As{constructor(e,t,s){this.parent=e,this.scopePath=t,this.tokenAttributes=s}static fromExtension(e,t){let s=e,i=e?.scopePath??null;for(const r of t)i=Qc.push(i,r.scopeNames),s=new As(s,i,r.encodedTokenAttributes);return s}static createRoot(e,t){return new As(null,new Qc(null,e),t)}static createRootAndLookUpScopeName(e,t,s){const i=s.getMetadataForScope(e),r=new Qc(null,e),o=s.themeProvider.themeMatch(r),l=As.mergeAttributes(t,i,o);return new As(null,r,l)}get scopeName(){return this.scopePath.scopeName}toString(){return this.getScopeNames().join(" ")}equals(e){return As.equals(this,e)}static equals(e,t){do{if(e===t||!e&&!t)return!0;if(!e||!t||e.scopeName!==t.scopeName||e.tokenAttributes!==t.tokenAttributes)return!1;e=e.parent,t=t.parent}while(!0)}static mergeAttributes(e,t,s){let i=-1,r=0,o=0;return s!==null&&(i=s.fontStyle,r=s.foregroundId,o=s.backgroundId),Xr.set(e,t.languageId,t.tokenType,null,i,r,o)}pushAttributed(e,t){if(e===null)return this;if(e.indexOf(" ")===-1)return As._pushAttributed(this,e,t);const s=e.split(/ /g);let i=this;for(const r of s)i=As._pushAttributed(i,r,t);return i}static _pushAttributed(e,t,s){const i=s.getMetadataForScope(t),r=e.scopePath.push(t),o=s.themeProvider.themeMatch(r),l=As.mergeAttributes(e.tokenAttributes,i,o);return new As(e,r,l)}getScopeNames(){return this.scopePath.getSegments()}getExtensionIfDefined(e){const t=[];let s=this;for(;s&&s!==e;)t.push({encodedTokenAttributes:s.tokenAttributes,scopeNames:s.scopePath.getExtensionIfDefined(s.parent?.scopePath??null)}),s=s.parent;return s===e?t.reverse():void 0}},rf=class qi{constructor(e,t,s,i,r,o,l,a){this.parent=e,this.ruleId=t,this.beginRuleCapturedEOL=r,this.endRule=o,this.nameScopesList=l,this.contentNameScopesList=a,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=s,this._anchorPos=i}_stackElementBrand=void 0;static NULL=new qi(null,0,0,0,!1,null,null,null);_enterPos;_anchorPos;depth;equals(e){return e===null?!1:qi._equals(this,e)}static _equals(e,t){return e===t?!0:this._structuralEquals(e,t)?Yo.equals(e.contentNameScopesList,t.contentNameScopesList):!1}static _structuralEquals(e,t){do{if(e===t||!e&&!t)return!0;if(!e||!t||e.depth!==t.depth||e.ruleId!==t.ruleId||e.endRule!==t.endRule)return!1;e=e.parent,t=t.parent}while(!0)}clone(){return this}static _reset(e){for(;e;)e._enterPos=-1,e._anchorPos=-1,e=e.parent}reset(){qi._reset(this)}pop(){return this.parent}safePop(){return this.parent?this.parent:this}push(e,t,s,i,r,o,l){return new qi(this,e,t,s,i,r,o,l)}getEnterPos(){return this._enterPos}getAnchorPos(){return this._anchorPos}getRule(e){return e.getRule(this.ruleId)}toString(){const e=[];return this._writeString(e,0),"["+e.join(",")+"]"}_writeString(e,t){return this.parent&&(t=this.parent._writeString(e,t)),e[t++]=`(${this.ruleId}, ${this.nameScopesList?.toString()}, ${this.contentNameScopesList?.toString()})`,t}withContentNameScopesList(e){return this.contentNameScopesList===e?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,e)}withEndRule(e){return this.endRule===e?this:new qi(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,e,this.nameScopesList,this.contentNameScopesList)}hasSameRuleAs(e){let t=this;for(;t&&t._enterPos===e._enterPos;){if(t.ruleId===e.ruleId)return!0;t=t.parent}return!1}toStateStackFrame(){return{ruleId:this.ruleId,beginRuleCapturedEOL:this.beginRuleCapturedEOL,endRule:this.endRule,nameScopesList:this.nameScopesList?.getExtensionIfDefined(this.parent?.nameScopesList??null)??[],contentNameScopesList:this.contentNameScopesList?.getExtensionIfDefined(this.nameScopesList)??[]}}static pushFrame(e,t){const s=Yo.fromExtension(e?.nameScopesList??null,t.nameScopesList);return new qi(e,t.ruleId,t.enterPos??-1,t.anchorPos??-1,t.beginRuleCapturedEOL,t.endRule,s,Yo.fromExtension(s,t.contentNameScopesList))}},RA=class{balancedBracketScopes;unbalancedBracketScopes;allowAny=!1;constructor(n,e){this.balancedBracketScopes=n.flatMap(t=>t==="*"?(this.allowAny=!0,[]):mu(t,yu).map(s=>s.matcher)),this.unbalancedBracketScopes=e.flatMap(t=>mu(t,yu).map(s=>s.matcher))}get matchesAlways(){return this.allowAny&&this.unbalancedBracketScopes.length===0}get matchesNever(){return this.balancedBracketScopes.length===0&&!this.allowAny}match(n){for(const e of this.unbalancedBracketScopes)if(e(n))return!1;for(const e of this.balancedBracketScopes)if(e(n))return!0;return this.allowAny}},OA=class{constructor(n,e,t,s){this.balancedBracketSelectors=s,this._emitBinaryTokens=n,this._tokenTypeOverrides=t,this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}_emitBinaryTokens;_lineText;_tokens;_binaryTokens;_lastTokenEndIndex;_tokenTypeOverrides;produce(n,e){this.produceFromScopes(n.contentNameScopesList,e)}produceFromScopes(n,e){if(this._lastTokenEndIndex>=e)return;if(this._emitBinaryTokens){let s=n?.tokenAttributes??0,i=!1;if(this.balancedBracketSelectors?.matchesAlways&&(i=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){const r=n?.getScopeNames()??[];for(const o of this._tokenTypeOverrides)o.matcher(r)&&(s=Xr.set(s,0,o.type,null,-1,0,0));this.balancedBracketSelectors&&(i=this.balancedBracketSelectors.match(r))}if(i&&(s=Xr.set(s,0,8,i,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===s){this._lastTokenEndIndex=e;return}this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(s),this._lastTokenEndIndex=e;return}const t=n?.getScopeNames()??[];this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:e,scopes:t}),this._lastTokenEndIndex=e}getResult(n,e){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===e-1&&this._tokens.pop(),this._tokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(n,e),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}getBinaryResult(n,e){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===e-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),this._binaryTokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(n,e),this._binaryTokens[this._binaryTokens.length-2]=0);const t=new Uint32Array(this._binaryTokens.length);for(let s=0,i=this._binaryTokens.length;s<i;s++)t[s]=this._binaryTokens[s];return t}},LA=class{constructor(n,e){this._onigLib=e,this._theme=n}_grammars=new Map;_rawGrammars=new Map;_injectionGrammars=new Map;_theme;dispose(){for(const n of this._grammars.values())n.dispose()}setTheme(n){this._theme=n}getColorMap(){return this._theme.getColorMap()}addGrammar(n,e){this._rawGrammars.set(n.scopeName,n),e&&this._injectionGrammars.set(n.scopeName,e)}lookup(n){return this._rawGrammars.get(n)}injections(n){return this._injectionGrammars.get(n)}getDefaults(){return this._theme.getDefaults()}themeMatch(n){return this._theme.match(n)}grammarForScopeName(n,e,t,s,i){if(!this._grammars.has(n)){let r=this._rawGrammars.get(n);if(!r)return null;this._grammars.set(n,TA(n,r,e,t,s,i,this,this._onigLib))}return this._grammars.get(n)}},MA=class{_options;_syncRegistry;_ensureGrammarCache;constructor(e){this._options=e,this._syncRegistry=new LA(pu.createFromRawTheme(e.theme,e.colorMap),e.onigLib),this._ensureGrammarCache=new Map}dispose(){this._syncRegistry.dispose()}setTheme(e,t){this._syncRegistry.setTheme(pu.createFromRawTheme(e,t))}getColorMap(){return this._syncRegistry.getColorMap()}loadGrammarWithEmbeddedLanguages(e,t,s){return this.loadGrammarWithConfiguration(e,t,{embeddedLanguages:s})}loadGrammarWithConfiguration(e,t,s){return this._loadGrammar(e,t,s.embeddedLanguages,s.tokenTypes,new RA(s.balancedBracketSelectors||[],s.unbalancedBracketSelectors||[]))}loadGrammar(e){return this._loadGrammar(e,0,null,null,null)}_loadGrammar(e,t,s,i,r){const o=new uA(this._syncRegistry,e);for(;o.Q.length>0;)o.Q.map(l=>this._loadSingleGrammar(l.scopeName)),o.processQueue();return this._grammarForScopeName(e,t,s,i,r)}_loadSingleGrammar(e){this._ensureGrammarCache.has(e)||(this._doLoadSingleGrammar(e),this._ensureGrammarCache.set(e,!0))}_doLoadSingleGrammar(e){const t=this._options.loadGrammar(e);if(t){const s=typeof this._options.getInjections=="function"?this._options.getInjections(e):void 0;this._syncRegistry.addGrammar(t,s)}}addGrammar(e,t=[],s=0,i=null){return this._syncRegistry.addGrammar(e,t),this._grammarForScopeName(e.scopeName,s,i)}_grammarForScopeName(e,t=0,s=null,i=null,r=null){return this._syncRegistry.grammarForScopeName(e,t,s,i,r)}},of=rf.NULL;const IA=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"];class Ul{constructor(e,t,s){this.normal=t,this.property=e,s&&(this.space=s)}}Ul.prototype.normal={};Ul.prototype.property={};Ul.prototype.space=void 0;function cb(n,e){const t={},s={};for(const i of n)Object.assign(t,i.property),Object.assign(s,i.normal);return new Ul(t,s,e)}function lf(n){return n.toLowerCase()}class Fn{constructor(e,t){this.attribute=t,this.property=e}}Fn.prototype.attribute="";Fn.prototype.booleanish=!1;Fn.prototype.boolean=!1;Fn.prototype.commaOrSpaceSeparated=!1;Fn.prototype.commaSeparated=!1;Fn.prototype.defined=!1;Fn.prototype.mustUseProperty=!1;Fn.prototype.number=!1;Fn.prototype.overloadedBoolean=!1;Fn.prototype.property="";Fn.prototype.spaceSeparated=!1;Fn.prototype.space=void 0;let jA=0;const Xe=mr(),Nt=mr(),af=mr(),ke=mr(),St=mr(),Ur=mr(),Hn=mr();function mr(){return 2**++jA}const uf=Object.freeze(Object.defineProperty({__proto__:null,boolean:Xe,booleanish:Nt,commaOrSpaceSeparated:Hn,commaSeparated:Ur,number:ke,overloadedBoolean:af,spaceSeparated:St},Symbol.toStringTag,{value:"Module"})),Xc=Object.keys(uf);class Lh extends Fn{constructor(e,t,s,i){let r=-1;if(super(e,t),pg(this,"space",i),typeof s=="number")for(;++r<Xc.length;){const o=Xc[r];pg(this,Xc[r],(s&uf[o])===uf[o])}}}Lh.prototype.defined=!0;function pg(n,e,t){t&&(n[e]=t)}function fo(n){const e={},t={};for(const[s,i]of Object.entries(n.properties)){const r=new Lh(s,n.transform(n.attributes||{},s),i,n.space);n.mustUseProperty&&n.mustUseProperty.includes(s)&&(r.mustUseProperty=!0),e[s]=r,t[lf(s)]=s,t[lf(r.attribute)]=s}return new Ul(e,t,n.space)}const db=fo({properties:{ariaActiveDescendant:null,ariaAtomic:Nt,ariaAutoComplete:null,ariaBusy:Nt,ariaChecked:Nt,ariaColCount:ke,ariaColIndex:ke,ariaColSpan:ke,ariaControls:St,ariaCurrent:null,ariaDescribedBy:St,ariaDetails:null,ariaDisabled:Nt,ariaDropEffect:St,ariaErrorMessage:null,ariaExpanded:Nt,ariaFlowTo:St,ariaGrabbed:Nt,ariaHasPopup:null,ariaHidden:Nt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:St,ariaLevel:ke,ariaLive:null,ariaModal:Nt,ariaMultiLine:Nt,ariaMultiSelectable:Nt,ariaOrientation:null,ariaOwns:St,ariaPlaceholder:null,ariaPosInSet:ke,ariaPressed:Nt,ariaReadOnly:Nt,ariaRelevant:null,ariaRequired:Nt,ariaRoleDescription:St,ariaRowCount:ke,ariaRowIndex:ke,ariaRowSpan:ke,ariaSelected:Nt,ariaSetSize:ke,ariaSort:null,ariaValueMax:ke,ariaValueMin:ke,ariaValueNow:ke,ariaValueText:null,role:null},transform(n,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function fb(n,e){return e in n?n[e]:e}function hb(n,e){return fb(n,e.toLowerCase())}const VA=fo({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Ur,acceptCharset:St,accessKey:St,action:null,allow:null,allowFullScreen:Xe,allowPaymentRequest:Xe,allowUserMedia:Xe,alt:null,as:null,async:Xe,autoCapitalize:null,autoComplete:St,autoFocus:Xe,autoPlay:Xe,blocking:St,capture:null,charSet:null,checked:Xe,cite:null,className:St,cols:ke,colSpan:null,content:null,contentEditable:Nt,controls:Xe,controlsList:St,coords:ke|Ur,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Xe,defer:Xe,dir:null,dirName:null,disabled:Xe,download:af,draggable:Nt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Xe,formTarget:null,headers:St,height:ke,hidden:af,high:ke,href:null,hrefLang:null,htmlFor:St,httpEquiv:St,id:null,imageSizes:null,imageSrcSet:null,inert:Xe,inputMode:null,integrity:null,is:null,isMap:Xe,itemId:null,itemProp:St,itemRef:St,itemScope:Xe,itemType:St,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Xe,low:ke,manifest:null,max:null,maxLength:ke,media:null,method:null,min:null,minLength:ke,multiple:Xe,muted:Xe,name:null,nonce:null,noModule:Xe,noValidate:Xe,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Xe,optimum:ke,pattern:null,ping:St,placeholder:null,playsInline:Xe,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Xe,referrerPolicy:null,rel:St,required:Xe,reversed:Xe,rows:ke,rowSpan:ke,sandbox:St,scope:null,scoped:Xe,seamless:Xe,selected:Xe,shadowRootClonable:Xe,shadowRootDelegatesFocus:Xe,shadowRootMode:null,shape:null,size:ke,sizes:null,slot:null,span:ke,spellCheck:Nt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:ke,step:null,style:null,tabIndex:ke,target:null,title:null,translate:null,type:null,typeMustMatch:Xe,useMap:null,value:Nt,width:ke,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:St,axis:null,background:null,bgColor:null,border:ke,borderColor:null,bottomMargin:ke,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Xe,declare:Xe,event:null,face:null,frame:null,frameBorder:null,hSpace:ke,leftMargin:ke,link:null,longDesc:null,lowSrc:null,marginHeight:ke,marginWidth:ke,noResize:Xe,noHref:Xe,noShade:Xe,noWrap:Xe,object:null,profile:null,prompt:null,rev:null,rightMargin:ke,rules:null,scheme:null,scrolling:Nt,standby:null,summary:null,text:null,topMargin:ke,valueType:null,version:null,vAlign:null,vLink:null,vSpace:ke,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Xe,disableRemotePlayback:Xe,prefix:null,property:null,results:ke,security:null,unselectable:null},space:"html",transform:hb}),$A=fo({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Hn,accentHeight:ke,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:ke,amplitude:ke,arabicForm:null,ascent:ke,attributeName:null,attributeType:null,azimuth:ke,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:ke,by:null,calcMode:null,capHeight:ke,className:St,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:ke,diffuseConstant:ke,direction:null,display:null,dur:null,divisor:ke,dominantBaseline:null,download:Xe,dx:null,dy:null,edgeMode:null,editable:null,elevation:ke,enableBackground:null,end:null,event:null,exponent:ke,externalResourcesRequired:null,fill:null,fillOpacity:ke,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Ur,g2:Ur,glyphName:Ur,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:ke,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:ke,horizOriginX:ke,horizOriginY:ke,id:null,ideographic:ke,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:ke,k:ke,k1:ke,k2:ke,k3:ke,k4:ke,kernelMatrix:Hn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:ke,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:ke,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:ke,overlineThickness:ke,paintOrder:null,panose1:null,path:null,pathLength:ke,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:St,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:ke,pointsAtY:ke,pointsAtZ:ke,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Hn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Hn,rev:Hn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Hn,requiredFeatures:Hn,requiredFonts:Hn,requiredFormats:Hn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:ke,specularExponent:ke,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:ke,strikethroughThickness:ke,string:null,stroke:null,strokeDashArray:Hn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:ke,strokeOpacity:ke,strokeWidth:null,style:null,surfaceScale:ke,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Hn,tabIndex:ke,tableValues:null,target:null,targetX:ke,targetY:ke,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Hn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:ke,underlineThickness:ke,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:ke,values:null,vAlphabetic:ke,vMathematical:ke,vectorEffect:null,vHanging:ke,vIdeographic:ke,version:null,vertAdvY:ke,vertOriginX:ke,vertOriginY:ke,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:ke,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:fb}),pb=fo({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(n,e){return"xlink:"+e.slice(5).toLowerCase()}}),mb=fo({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:hb}),gb=fo({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(n,e){return"xml:"+e.slice(3).toLowerCase()}}),NA=/[A-Z]/g,mg=/-[a-z]/g,BA=/^data[-\w.:]+$/i;function FA(n,e){const t=lf(e);let s=e,i=Fn;if(t in n.normal)return n.property[n.normal[t]];if(t.length>4&&t.slice(0,4)==="data"&&BA.test(e)){if(e.charAt(4)==="-"){const r=e.slice(5).replace(mg,zA);s="data"+r.charAt(0).toUpperCase()+r.slice(1)}else{const r=e.slice(4);if(!mg.test(r)){let o=r.replace(NA,UA);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=Lh}return new i(s,e)}function UA(n){return"-"+n.toLowerCase()}function zA(n){return n.charAt(1).toUpperCase()}const HA=cb([db,VA,pb,mb,gb],"html"),vb=cb([db,$A,pb,mb,gb],"svg"),gg={}.hasOwnProperty;function WA(n,e){const t=e||{};function s(i,...r){let o=s.invalid;const l=s.handlers;if(i&&gg.call(i,n)){const a=String(i[n]);o=gg.call(l,a)?l[a]:s.unknown}if(o)return o.call(this,i,...r)}return s.handlers=t.handlers||{},s.invalid=t.invalid,s.unknown=t.unknown,s}const qA=/["&'<>`]/g,GA=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,KA=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,JA=/[|\\{}()[\]^$+*?.]/g,vg=new WeakMap;function QA(n,e){if(n=n.replace(e.subset?YA(e.subset):qA,s),e.subset||e.escapeOnly)return n;return n.replace(GA,t).replace(KA,s);function t(i,r,o){return e.format((i.charCodeAt(0)-55296)*1024+i.charCodeAt(1)-56320+65536,o.charCodeAt(r+2),e)}function s(i,r,o){return e.format(i.charCodeAt(0),o.charCodeAt(r+1),e)}}function YA(n){let e=vg.get(n);return e||(e=XA(n),vg.set(n,e)),e}function XA(n){const e=[];let t=-1;for(;++t<n.length;)e.push(n[t].replace(JA,"\\$&"));return new RegExp("(?:"+e.join("|")+")","g")}const ZA=/[\dA-Fa-f]/;function eE(n,e,t){const s="&#x"+n.toString(16).toUpperCase();return t&&e&&!ZA.test(String.fromCharCode(e))?s:s+";"}const tE=/\d/;function nE(n,e,t){const s="&#"+String(n);return t&&e&&!tE.test(String.fromCharCode(e))?s:s+";"}const sE=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],Zc={nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",times:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",divide:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",fnof:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",bull:"",hellip:"",prime:"",Prime:"",oline:"",frasl:"",weierp:"",image:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",lang:"",rang:"",loz:"",spades:"",clubs:"",hearts:"",diams:"",quot:'"',amp:"&",lt:"<",gt:">",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",circ:"",tilde:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",permil:"",lsaquo:"",rsaquo:"",euro:""},iE=["cent","copy","divide","gt","lt","not","para","times"],yb={}.hasOwnProperty,cf={};let pa;for(pa in Zc)yb.call(Zc,pa)&&(cf[Zc[pa]]=pa);const rE=/[^\dA-Za-z]/;function oE(n,e,t,s){const i=String.fromCharCode(n);if(yb.call(cf,i)){const r=cf[i],o="&"+r;return t&&sE.includes(r)&&!iE.includes(r)&&(!s||e&&e!==61&&rE.test(String.fromCharCode(e)))?o:o+";"}return""}function lE(n,e,t){let s=eE(n,e,t.omitOptionalSemicolons),i;if((t.useNamedReferences||t.useShortestReferences)&&(i=oE(n,e,t.omitOptionalSemicolons,t.attribute)),(t.useShortestReferences||!i)&&t.useShortestReferences){const r=nE(n,e,t.omitOptionalSemicolons);r.length<s.length&&(s=r)}return i&&(!t.useShortestReferences||i.length<s.length)?i:s}function zr(n,e){return QA(n,Object.assign({format:lE},e))}const aE=/^>|^->|<!--|-->|--!>|<!-$/g,uE=[">"],cE=["<",">"];function dE(n,e,t,s){return s.settings.bogusComments?"<?"+zr(n.value,Object.assign({},s.settings.characterReferences,{subset:uE}))+">":"<!--"+n.value.replace(aE,i)+"-->";function i(r){return zr(r,Object.assign({},s.settings.characterReferences,{subset:cE}))}}function fE(n,e,t,s){return"<!"+(s.settings.upperDoctype?"DOCTYPE":"doctype")+(s.settings.tightDoctype?"":" ")+"html>"}function yg(n,e){const t=String(n);if(typeof e!="string")throw new TypeError("Expected character");let s=0,i=t.indexOf(e);for(;i!==-1;)s++,i=t.indexOf(e,i+e.length);return s}function hE(n,e){const t=e||{};return(n[n.length-1]===""?[...n,""]:n).join((t.padRight?" ":"")+","+(t.padLeft===!1?"":" ")).trim()}function pE(n){return n.join(" ").trim()}const mE=/[ \t\n\f\r]/g;function Mh(n){return typeof n=="object"?n.type==="text"?bg(n.value):!1:bg(n)}function bg(n){return n.replace(mE,"")===""}const Jt=kb(1),bb=kb(-1),gE=[];function kb(n){return e;function e(t,s,i){const r=t?t.children:gE;let o=(s||0)+n,l=r[o];if(!i)for(;l&&Mh(l);)o+=n,l=r[o];return l}}const vE={}.hasOwnProperty;function xb(n){return e;function e(t,s,i){return vE.call(n,t.tagName)&&n[t.tagName](t,s,i)}}const Ih=xb({body:bE,caption:ed,colgroup:ed,dd:wE,dt:_E,head:ed,html:yE,li:xE,optgroup:SE,option:CE,p:kE,rp:kg,rt:kg,tbody:EE,td:xg,tfoot:TE,th:xg,thead:AE,tr:DE});function ed(n,e,t){const s=Jt(t,e,!0);return!s||s.type!=="comment"&&!(s.type==="text"&&Mh(s.value.charAt(0)))}function yE(n,e,t){const s=Jt(t,e);return!s||s.type!=="comment"}function bE(n,e,t){const s=Jt(t,e);return!s||s.type!=="comment"}function kE(n,e,t){const s=Jt(t,e);return s?s.type==="element"&&(s.tagName==="address"||s.tagName==="article"||s.tagName==="aside"||s.tagName==="blockquote"||s.tagName==="details"||s.tagName==="div"||s.tagName==="dl"||s.tagName==="fieldset"||s.tagName==="figcaption"||s.tagName==="figure"||s.tagName==="footer"||s.tagName==="form"||s.tagName==="h1"||s.tagName==="h2"||s.tagName==="h3"||s.tagName==="h4"||s.tagName==="h5"||s.tagName==="h6"||s.tagName==="header"||s.tagName==="hgroup"||s.tagName==="hr"||s.tagName==="main"||s.tagName==="menu"||s.tagName==="nav"||s.tagName==="ol"||s.tagName==="p"||s.tagName==="pre"||s.tagName==="section"||s.tagName==="table"||s.tagName==="ul"):!t||!(t.type==="element"&&(t.tagName==="a"||t.tagName==="audio"||t.tagName==="del"||t.tagName==="ins"||t.tagName==="map"||t.tagName==="noscript"||t.tagName==="video"))}function xE(n,e,t){const s=Jt(t,e);return!s||s.type==="element"&&s.tagName==="li"}function _E(n,e,t){const s=Jt(t,e);return!!(s&&s.type==="element"&&(s.tagName==="dt"||s.tagName==="dd"))}function wE(n,e,t){const s=Jt(t,e);return!s||s.type==="element"&&(s.tagName==="dt"||s.tagName==="dd")}function kg(n,e,t){const s=Jt(t,e);return!s||s.type==="element"&&(s.tagName==="rp"||s.tagName==="rt")}function SE(n,e,t){const s=Jt(t,e);return!s||s.type==="element"&&s.tagName==="optgroup"}function CE(n,e,t){const s=Jt(t,e);return!s||s.type==="element"&&(s.tagName==="option"||s.tagName==="optgroup")}function AE(n,e,t){const s=Jt(t,e);return!!(s&&s.type==="element"&&(s.tagName==="tbody"||s.tagName==="tfoot"))}function EE(n,e,t){const s=Jt(t,e);return!s||s.type==="element"&&(s.tagName==="tbody"||s.tagName==="tfoot")}function TE(n,e,t){return!Jt(t,e)}function DE(n,e,t){const s=Jt(t,e);return!s||s.type==="element"&&s.tagName==="tr"}function xg(n,e,t){const s=Jt(t,e);return!s||s.type==="element"&&(s.tagName==="td"||s.tagName==="th")}const PE=xb({body:LE,colgroup:ME,head:OE,html:RE,tbody:IE});function RE(n){const e=Jt(n,-1);return!e||e.type!=="comment"}function OE(n){const e=new Set;for(const s of n.children)if(s.type==="element"&&(s.tagName==="base"||s.tagName==="title")){if(e.has(s.tagName))return!1;e.add(s.tagName)}const t=n.children[0];return!t||t.type==="element"}function LE(n){const e=Jt(n,-1,!0);return!e||e.type!=="comment"&&!(e.type==="text"&&Mh(e.value.charAt(0)))&&!(e.type==="element"&&(e.tagName==="meta"||e.tagName==="link"||e.tagName==="script"||e.tagName==="style"||e.tagName==="template"))}function ME(n,e,t){const s=bb(t,e),i=Jt(n,-1,!0);return t&&s&&s.type==="element"&&s.tagName==="colgroup"&&Ih(s,t.children.indexOf(s),t)?!1:!!(i&&i.type==="element"&&i.tagName==="col")}function IE(n,e,t){const s=bb(t,e),i=Jt(n,-1);return t&&s&&s.type==="element"&&(s.tagName==="thead"||s.tagName==="tbody")&&Ih(s,t.children.indexOf(s),t)?!1:!!(i&&i.type==="element"&&i.tagName==="tr")}const ma={name:[[`	
\f\r &/=>`.split(""),`	
\f\r "&'/=>\``.split("")],[`\0	
\f\r "&'/<=>`.split(""),`\0	
\f\r "&'/<=>\``.split("")]],unquoted:[[`	
\f\r &>`.split(""),`\0	
\f\r "&'<=>\``.split("")],[`\0	
\f\r "&'<=>\``.split(""),`\0	
\f\r "&'<=>\``.split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function jE(n,e,t,s){const i=s.schema,r=i.space==="svg"?!1:s.settings.omitOptionalTags;let o=i.space==="svg"?s.settings.closeEmptyElements:s.settings.voids.includes(n.tagName.toLowerCase());const l=[];let a;i.space==="html"&&n.tagName==="svg"&&(s.schema=vb);const u=VE(s,n.properties),c=s.all(i.space==="html"&&n.tagName==="template"?n.content:n);return s.schema=i,c&&(o=!1),(u||!r||!PE(n,e,t))&&(l.push("<",n.tagName,u?" "+u:""),o&&(i.space==="svg"||s.settings.closeSelfClosing)&&(a=u.charAt(u.length-1),(!s.settings.tightSelfClosing||a==="/"||a&&a!=='"'&&a!=="'")&&l.push(" "),l.push("/")),l.push(">")),l.push(c),!o&&(!r||!Ih(n,e,t))&&l.push("</"+n.tagName+">"),l.join("")}function VE(n,e){const t=[];let s=-1,i;if(e){for(i in e)if(e[i]!==null&&e[i]!==void 0){const r=$E(n,i,e[i]);r&&t.push(r)}}for(;++s<t.length;){const r=n.settings.tightAttributes?t[s].charAt(t[s].length-1):void 0;s!==t.length-1&&r!=='"'&&r!=="'"&&(t[s]+=" ")}return t.join("")}function $E(n,e,t){const s=FA(n.schema,e),i=n.settings.allowParseErrors&&n.schema.space==="html"?0:1,r=n.settings.allowDangerousCharacters?0:1;let o=n.quote,l;if(s.overloadedBoolean&&(t===s.attribute||t==="")?t=!0:(s.boolean||s.overloadedBoolean)&&(typeof t!="string"||t===s.attribute||t==="")&&(t=!!t),t==null||t===!1||typeof t=="number"&&Number.isNaN(t))return"";const a=zr(s.attribute,Object.assign({},n.settings.characterReferences,{subset:ma.name[i][r]}));return t===!0||(t=Array.isArray(t)?(s.commaSeparated?hE:pE)(t,{padLeft:!n.settings.tightCommaSeparatedLists}):String(t),n.settings.collapseEmptyAttributes&&!t)?a:(n.settings.preferUnquoted&&(l=zr(t,Object.assign({},n.settings.characterReferences,{attribute:!0,subset:ma.unquoted[i][r]}))),l!==t&&(n.settings.quoteSmart&&yg(t,o)>yg(t,n.alternative)&&(o=n.alternative),l=o+zr(t,Object.assign({},n.settings.characterReferences,{subset:(o==="'"?ma.single:ma.double)[i][r],attribute:!0}))+o),a+(l&&"="+l))}const NE=["<","&"];function _b(n,e,t,s){return t&&t.type==="element"&&(t.tagName==="script"||t.tagName==="style")?n.value:zr(n.value,Object.assign({},s.settings.characterReferences,{subset:NE}))}function BE(n,e,t,s){return s.settings.allowDangerousHtml?n.value:_b(n,e,t,s)}function FE(n,e,t,s){return s.all(n)}const UE=WA("type",{invalid:zE,unknown:HE,handlers:{comment:dE,doctype:fE,element:jE,raw:BE,root:FE,text:_b}});function zE(n){throw new Error("Expected node, not `"+n+"`")}function HE(n){const e=n;throw new Error("Cannot compile unknown node `"+e.type+"`")}const WE={},qE={},GE=[];function KE(n,e){const t=e||WE,s=t.quote||'"',i=s==='"'?"'":'"';if(s!=='"'&&s!=="'")throw new Error("Invalid quote `"+s+"`, expected `'` or `\"`");return{one:JE,all:QE,settings:{omitOptionalTags:t.omitOptionalTags||!1,allowParseErrors:t.allowParseErrors||!1,allowDangerousCharacters:t.allowDangerousCharacters||!1,quoteSmart:t.quoteSmart||!1,preferUnquoted:t.preferUnquoted||!1,tightAttributes:t.tightAttributes||!1,upperDoctype:t.upperDoctype||!1,tightDoctype:t.tightDoctype||!1,bogusComments:t.bogusComments||!1,tightCommaSeparatedLists:t.tightCommaSeparatedLists||!1,tightSelfClosing:t.tightSelfClosing||!1,collapseEmptyAttributes:t.collapseEmptyAttributes||!1,allowDangerousHtml:t.allowDangerousHtml||!1,voids:t.voids||IA,characterReferences:t.characterReferences||qE,closeSelfClosing:t.closeSelfClosing||!1,closeEmptyElements:t.closeEmptyElements||!1},schema:t.space==="svg"?vb:HA,quote:s,alternative:i}.one(Array.isArray(n)?{type:"root",children:n}:n,void 0,void 0)}function JE(n,e,t){return UE(n,e,t,this)}function QE(n){const e=[],t=n&&n.children||GE;let s=-1;for(;++s<t.length;)e[s]=this.one(t[s],s,n);return e.join("")}function bu(n,e){const t=typeof n=="string"?{}:{...n.colorReplacements},s=typeof n=="string"?n:n.name;for(const[i,r]of Object.entries(e?.colorReplacements||{}))typeof r=="string"?t[i]=r:i===s&&Object.assign(t,r);return t}function wi(n,e){return n&&(e?.[n?.toLowerCase()]||n)}function YE(n){return Array.isArray(n)?n:[n]}async function wb(n){return Promise.resolve(typeof n=="function"?n():n).then(e=>e.default||e)}function jh(n){return!n||["plaintext","txt","text","plain"].includes(n)}function Sb(n){return n==="ansi"||jh(n)}function Vh(n){return n==="none"}function Cb(n){return Vh(n)}function Ab(n,e){if(!e)return n;n.properties||={},n.properties.class||=[],typeof n.properties.class=="string"&&(n.properties.class=n.properties.class.split(/\s+/g)),Array.isArray(n.properties.class)||(n.properties.class=[]);const t=Array.isArray(e)?e:e.split(/\s+/g);for(const s of t)s&&!n.properties.class.includes(s)&&n.properties.class.push(s);return n}function uc(n,e=!1){if(n.length===0)return[["",0]];const t=n.split(/(\r?\n)/g);let s=0;const i=[];for(let r=0;r<t.length;r+=2){const o=e?t[r]+(t[r+1]||""):t[r];i.push([o,s]),s+=t[r].length,s+=t[r+1]?.length||0}return i}function XE(n){const e=uc(n,!0).map(([i])=>i);function t(i){if(i===n.length)return{line:e.length-1,character:e[e.length-1].length};let r=i,o=0;for(const l of e){if(r<l.length)break;r-=l.length,o++}return{line:o,character:r}}function s(i,r){let o=0;for(let l=0;l<i;l++)o+=e[l].length;return o+=r,o}return{lines:e,indexToPos:t,posToIndex:s}}const $h="light-dark()",ZE=["color","background-color"];function e4(n,e){let t=0;const s=[];for(const i of e)i>t&&s.push({...n,content:n.content.slice(t,i),offset:n.offset+t}),t=i;return t<n.content.length&&s.push({...n,content:n.content.slice(t),offset:n.offset+t}),s}function t4(n,e){const t=Array.from(e instanceof Set?e:new Set(e)).sort((s,i)=>s-i);return t.length?n.map(s=>s.flatMap(i=>{const r=t.filter(o=>i.offset<o&&o<i.offset+i.content.length).map(o=>o-i.offset).sort((o,l)=>o-l);return r.length?e4(i,r):i})):n}function n4(n,e,t,s,i="css-vars"){const r={content:n.content,explanation:n.explanation,offset:n.offset},o=e.map(c=>ku(n.variants[c])),l=new Set(o.flatMap(c=>Object.keys(c))),a={},u=(c,d)=>{const f=d==="color"?"":d==="background-color"?"-bg":`-${d}`;return t+e[c]+(d==="color"?"":f)};return o.forEach((c,d)=>{for(const f of l){const p=c[f]||"inherit";if(d===0&&s&&ZE.includes(f))if(s===$h&&o.length>1){const g=e.findIndex(w=>w==="light"),b=e.findIndex(w=>w==="dark");if(g===-1||b===-1)throw new Ut('When using `defaultColor: "light-dark()"`, you must provide both `light` and `dark` themes');const x=o[g][f]||"inherit",m=o[b][f]||"inherit";a[f]=`light-dark(${x}, ${m})`,i==="css-vars"&&(a[u(d,f)]=p)}else a[f]=p;else i==="css-vars"&&(a[u(d,f)]=p)}}),r.htmlStyle=a,r}function ku(n){const e={};if(n.color&&(e.color=n.color),n.bgColor&&(e["background-color"]=n.bgColor),n.fontStyle){n.fontStyle&vn.Italic&&(e["font-style"]="italic"),n.fontStyle&vn.Bold&&(e["font-weight"]="bold");const t=[];n.fontStyle&vn.Underline&&t.push("underline"),n.fontStyle&vn.Strikethrough&&t.push("line-through"),t.length&&(e["text-decoration"]=t.join(" "))}return e}function df(n){return typeof n=="string"?n:Object.entries(n).map(([e,t])=>`${e}:${t}`).join(";")}const Eb=new WeakMap;function cc(n,e){Eb.set(n,e)}function vl(n){return Eb.get(n)}class ho{_stacks={};lang;get themes(){return Object.keys(this._stacks)}get theme(){return this.themes[0]}get _stack(){return this._stacks[this.theme]}static initial(e,t){return new ho(Object.fromEntries(YE(t).map(s=>[s,of])),e)}constructor(...e){if(e.length===2){const[t,s]=e;this.lang=s,this._stacks=t}else{const[t,s,i]=e;this.lang=s,this._stacks={[i]:t}}}getInternalStack(e=this.theme){return this._stacks[e]}getScopes(e=this.theme){return s4(this._stacks[e])}toJSON(){return{lang:this.lang,theme:this.theme,themes:this.themes,scopes:this.getScopes()}}}function s4(n){const e=[],t=new Set;function s(i){if(t.has(i))return;t.add(i);const r=i?.nameScopesList?.scopeName;r&&e.push(r),i.parent&&s(i.parent)}return s(n),e}function i4(n,e){if(!(n instanceof ho))throw new Ut("Invalid grammar state");return n.getInternalStack(e)}function r4(){const n=new WeakMap;function e(t){if(!n.has(t.meta)){let s=function(o){if(typeof o=="number"){if(o<0||o>t.source.length)throw new Ut(`Invalid decoration offset: ${o}. Code length: ${t.source.length}`);return{...i.indexToPos(o),offset:o}}else{const l=i.lines[o.line];if(l===void 0)throw new Ut(`Invalid decoration position ${JSON.stringify(o)}. Lines length: ${i.lines.length}`);let a=o.character;if(a<0&&(a=l.length+a),a<0||a>l.length)throw new Ut(`Invalid decoration position ${JSON.stringify(o)}. Line ${o.line} length: ${l.length}`);return{...o,character:a,offset:i.posToIndex(o.line,a)}}};const i=XE(t.source),r=(t.options.decorations||[]).map(o=>({...o,start:s(o.start),end:s(o.end)}));o4(r),n.set(t.meta,{decorations:r,converter:i,source:t.source})}return n.get(t.meta)}return{name:"shiki:decorations",tokens(t){if(!this.options.decorations?.length)return;const i=e(this).decorations.flatMap(o=>[o.start.offset,o.end.offset]);return t4(t,i)},code(t){if(!this.options.decorations?.length)return;const s=e(this),i=Array.from(t.children).filter(c=>c.type==="element"&&c.tagName==="span");if(i.length!==s.converter.lines.length)throw new Ut(`Number of lines in code element (${i.length}) does not match the number of lines in the source (${s.converter.lines.length}). Failed to apply decorations.`);function r(c,d,f,p){const g=i[c];let b="",x=-1,m=-1;if(d===0&&(x=0),f===0&&(m=0),f===Number.POSITIVE_INFINITY&&(m=g.children.length),x===-1||m===-1)for(let P=0;P<g.children.length;P++)b+=Tb(g.children[P]),x===-1&&b.length===d&&(x=P+1),m===-1&&b.length===f&&(m=P+1);if(x===-1)throw new Ut(`Failed to find start index for decoration ${JSON.stringify(p.start)}`);if(m===-1)throw new Ut(`Failed to find end index for decoration ${JSON.stringify(p.end)}`);const w=g.children.slice(x,m);if(!p.alwaysWrap&&w.length===g.children.length)l(g,p,"line");else if(!p.alwaysWrap&&w.length===1&&w[0].type==="element")l(w[0],p,"token");else{const P={type:"element",tagName:"span",properties:{},children:w};l(P,p,"wrapper"),g.children.splice(x,w.length,P)}}function o(c,d){i[c]=l(i[c],d,"line")}function l(c,d,f){const p=d.properties||{},g=d.transform||(b=>b);return c.tagName=d.tagName||"span",c.properties={...c.properties,...p,class:c.properties.class},d.properties?.class&&Ab(c,d.properties.class),c=g(c,f)||c,c}const a=[],u=s.decorations.sort((c,d)=>d.start.offset-c.start.offset||c.end.offset-d.end.offset);for(const c of u){const{start:d,end:f}=c;if(d.line===f.line)r(d.line,d.character,f.character,c);else if(d.line<f.line){r(d.line,d.character,Number.POSITIVE_INFINITY,c);for(let p=d.line+1;p<f.line;p++)a.unshift(()=>o(p,c));r(f.line,0,f.character,c)}}a.forEach(c=>c())}}}function o4(n){for(let e=0;e<n.length;e++){const t=n[e];if(t.start.offset>t.end.offset)throw new Ut(`Invalid decoration range: ${JSON.stringify(t.start)} - ${JSON.stringify(t.end)}`);for(let s=e+1;s<n.length;s++){const i=n[s],r=t.start.offset<=i.start.offset&&i.start.offset<t.end.offset,o=t.start.offset<i.end.offset&&i.end.offset<=t.end.offset,l=i.start.offset<=t.start.offset&&t.start.offset<i.end.offset,a=i.start.offset<t.end.offset&&t.end.offset<=i.end.offset;if(r||o||l||a){if(r&&o||l&&a||l&&t.start.offset===t.end.offset||o&&i.start.offset===i.end.offset)continue;throw new Ut(`Decorations ${JSON.stringify(t.start)} and ${JSON.stringify(i.start)} intersect.`)}}}}function Tb(n){return n.type==="text"?n.value:n.type==="element"?n.children.map(Tb).join(""):""}const l4=[r4()];function xu(n){const e=a4(n.transformers||[]);return[...e.pre,...e.normal,...e.post,...l4]}function a4(n){const e=[],t=[],s=[];for(const i of n)switch(i.enforce){case"pre":e.push(i);break;case"post":t.push(i);break;default:s.push(i)}return{pre:e,post:t,normal:s}}var Xi=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"],td={1:"bold",2:"dim",3:"italic",4:"underline",7:"reverse",8:"hidden",9:"strikethrough"};function u4(n,e){const t=n.indexOf("\x1B",e);if(t!==-1&&n[t+1]==="["){const s=n.indexOf("m",t);if(s!==-1)return{sequence:n.substring(t+2,s).split(";"),startPosition:t,position:s+1}}return{position:n.length}}function _g(n){const e=n.shift();if(e==="2"){const t=n.splice(0,3).map(s=>Number.parseInt(s));return t.length!==3||t.some(s=>Number.isNaN(s))?void 0:{type:"rgb",rgb:t}}else if(e==="5"){const t=n.shift();if(t)return{type:"table",index:Number(t)}}}function c4(n){const e=[];for(;n.length>0;){const t=n.shift();if(!t)continue;const s=Number.parseInt(t);if(!Number.isNaN(s))if(s===0)e.push({type:"resetAll"});else if(s<=9)td[s]&&e.push({type:"setDecoration",value:td[s]});else if(s<=29){const i=td[s-20];i&&(e.push({type:"resetDecoration",value:i}),i==="dim"&&e.push({type:"resetDecoration",value:"bold"}))}else if(s<=37)e.push({type:"setForegroundColor",value:{type:"named",name:Xi[s-30]}});else if(s===38){const i=_g(n);i&&e.push({type:"setForegroundColor",value:i})}else if(s===39)e.push({type:"resetForegroundColor"});else if(s<=47)e.push({type:"setBackgroundColor",value:{type:"named",name:Xi[s-40]}});else if(s===48){const i=_g(n);i&&e.push({type:"setBackgroundColor",value:i})}else s===49?e.push({type:"resetBackgroundColor"}):s===53?e.push({type:"setDecoration",value:"overline"}):s===55?e.push({type:"resetDecoration",value:"overline"}):s>=90&&s<=97?e.push({type:"setForegroundColor",value:{type:"named",name:Xi[s-90+8]}}):s>=100&&s<=107&&e.push({type:"setBackgroundColor",value:{type:"named",name:Xi[s-100+8]}})}return e}function d4(){let n=null,e=null,t=new Set;return{parse(s){const i=[];let r=0;do{const o=u4(s,r),l=o.sequence?s.substring(r,o.startPosition):s.substring(r);if(l.length>0&&i.push({value:l,foreground:n,background:e,decorations:new Set(t)}),o.sequence){const a=c4(o.sequence);for(const u of a)u.type==="resetAll"?(n=null,e=null,t.clear()):u.type==="resetForegroundColor"?n=null:u.type==="resetBackgroundColor"?e=null:u.type==="resetDecoration"&&t.delete(u.value);for(const u of a)u.type==="setForegroundColor"?n=u.value:u.type==="setBackgroundColor"?e=u.value:u.type==="setDecoration"&&t.add(u.value)}r=o.position}while(r<s.length);return i}}}var f4={black:"#000000",red:"#bb0000",green:"#00bb00",yellow:"#bbbb00",blue:"#0000bb",magenta:"#ff00ff",cyan:"#00bbbb",white:"#eeeeee",brightBlack:"#555555",brightRed:"#ff5555",brightGreen:"#00ff00",brightYellow:"#ffff55",brightBlue:"#5555ff",brightMagenta:"#ff55ff",brightCyan:"#55ffff",brightWhite:"#ffffff"};function h4(n=f4){function e(l){return n[l]}function t(l){return`#${l.map(a=>Math.max(0,Math.min(a,255)).toString(16).padStart(2,"0")).join("")}`}let s;function i(){if(s)return s;s=[];for(let u=0;u<Xi.length;u++)s.push(e(Xi[u]));let l=[0,95,135,175,215,255];for(let u=0;u<6;u++)for(let c=0;c<6;c++)for(let d=0;d<6;d++)s.push(t([l[u],l[c],l[d]]));let a=8;for(let u=0;u<24;u++,a+=10)s.push(t([a,a,a]));return s}function r(l){return i()[l]}function o(l){switch(l.type){case"named":return e(l.name);case"rgb":return t(l.rgb);case"table":return r(l.index)}}return{value:o}}const p4={black:"#000000",red:"#cd3131",green:"#0DBC79",yellow:"#E5E510",blue:"#2472C8",magenta:"#BC3FBC",cyan:"#11A8CD",white:"#E5E5E5",brightBlack:"#666666",brightRed:"#F14C4C",brightGreen:"#23D18B",brightYellow:"#F5F543",brightBlue:"#3B8EEA",brightMagenta:"#D670D6",brightCyan:"#29B8DB",brightWhite:"#FFFFFF"};function m4(n,e,t){const s=bu(n,t),i=uc(e),r=Object.fromEntries(Xi.map(a=>{const u=`terminal.ansi${a[0].toUpperCase()}${a.substring(1)}`,c=n.colors?.[u];return[a,c||p4[a]]})),o=h4(r),l=d4();return i.map(a=>l.parse(a[0]).map(u=>{let c,d;u.decorations.has("reverse")?(c=u.background?o.value(u.background):n.bg,d=u.foreground?o.value(u.foreground):n.fg):(c=u.foreground?o.value(u.foreground):n.fg,d=u.background?o.value(u.background):void 0),c=wi(c,s),d=wi(d,s),u.decorations.has("dim")&&(c=g4(c));let f=vn.None;return u.decorations.has("bold")&&(f|=vn.Bold),u.decorations.has("italic")&&(f|=vn.Italic),u.decorations.has("underline")&&(f|=vn.Underline),u.decorations.has("strikethrough")&&(f|=vn.Strikethrough),{content:u.value,offset:a[1],color:c,bgColor:d,fontStyle:f}}))}function g4(n){const e=n.match(/#([0-9a-f]{3,8})/i);if(e){const s=e[1];if(s.length===8){const i=Math.round(Number.parseInt(s.slice(6,8),16)/2).toString(16).padStart(2,"0");return`#${s.slice(0,6)}${i}`}else{if(s.length===6)return`#${s}80`;if(s.length===4){const i=s[0],r=s[1],o=s[2],l=s[3],a=Math.round(Number.parseInt(`${l}${l}`,16)/2).toString(16).padStart(2,"0");return`#${i}${i}${r}${r}${o}${o}${a}`}else if(s.length===3){const i=s[0],r=s[1],o=s[2];return`#${i}${i}${r}${r}${o}${o}80`}}}const t=n.match(/var\((--[\w-]+-ansi-[\w-]+)\)/);return t?`var(${t[1]}-dim)`:n}function Nh(n,e,t={}){const{lang:s="text",theme:i=n.getLoadedThemes()[0]}=t;if(jh(s)||Vh(i))return uc(e).map(a=>[{content:a[0],offset:a[1]}]);const{theme:r,colorMap:o}=n.setTheme(i);if(s==="ansi")return m4(r,e,t);const l=n.getLanguage(s);if(t.grammarState){if(t.grammarState.lang!==l.name)throw new Ut(`Grammar state language "${t.grammarState.lang}" does not match highlight language "${l.name}"`);if(!t.grammarState.themes.includes(r.name))throw new Ut(`Grammar state themes "${t.grammarState.themes}" do not contain highlight theme "${r.name}"`)}return y4(e,l,r,o,t)}function v4(...n){if(n.length===2)return vl(n[1]);const[e,t,s={}]=n,{lang:i="text",theme:r=e.getLoadedThemes()[0]}=s;if(jh(i)||Vh(r))throw new Ut("Plain language does not have grammar state");if(i==="ansi")throw new Ut("ANSI language does not have grammar state");const{theme:o,colorMap:l}=e.setTheme(r),a=e.getLanguage(i);return new ho(_u(t,a,o,l,s).stateStack,a.name,o.name)}function y4(n,e,t,s,i){const r=_u(n,e,t,s,i),o=new ho(_u(n,e,t,s,i).stateStack,e.name,t.name);return cc(r.tokens,o),r.tokens}function _u(n,e,t,s,i){const r=bu(t,i),{tokenizeMaxLineLength:o=0,tokenizeTimeLimit:l=500}=i,a=uc(n);let u=i.grammarState?i4(i.grammarState,t.name)??of:i.grammarContextCode!=null?_u(i.grammarContextCode,e,t,s,{...i,grammarState:void 0,grammarContextCode:void 0}).stateStack:of,c=[];const d=[];for(let f=0,p=a.length;f<p;f++){const[g,b]=a[f];if(g===""){c=[],d.push([]);continue}if(o>0&&g.length>=o){c=[],d.push([{content:g,offset:b,color:"",fontStyle:0}]);continue}let x,m,w;i.includeExplanation&&(x=e.tokenizeLine(g,u,l),m=x.tokens,w=0);const P=e.tokenizeLine2(g,u,l),U=P.tokens.length/2;for(let O=0;O<U;O++){const A=P.tokens[2*O],_=O+1<U?P.tokens[2*O+2]:g.length;if(A===_)continue;const M=P.tokens[2*O+1],W=wi(s[Xr.getForeground(M)],r),ue=Xr.getFontStyle(M),ee={content:g.substring(A,_),offset:b+A,color:W,fontStyle:ue};if(i.includeExplanation){const F=[];if(i.includeExplanation!=="scopeName")for(const Z of t.settings){let B;switch(typeof Z.scope){case"string":B=Z.scope.split(/,/).map(J=>J.trim());break;case"object":B=Z.scope;break;default:continue}F.push({settings:Z,selectors:B.map(J=>J.split(/ /))})}ee.explanation=[];let ae=0;for(;A+ae<_;){const Z=m[w],B=g.substring(Z.startIndex,Z.endIndex);ae+=B.length,ee.explanation.push({content:B,scopes:i.includeExplanation==="scopeName"?b4(Z.scopes):k4(F,Z.scopes)}),w+=1}}c.push(ee)}d.push(c),c=[],u=P.ruleStack}return{tokens:d,stateStack:u}}function b4(n){return n.map(e=>({scopeName:e}))}function k4(n,e){const t=[];for(let s=0,i=e.length;s<i;s++){const r=e[s];t[s]={scopeName:r,themeMatches:_4(n,r,e.slice(0,s))}}return t}function wg(n,e){return n===e||e.substring(0,n.length)===n&&e[n.length]==="."}function x4(n,e,t){if(!wg(n[n.length-1],e))return!1;let s=n.length-2,i=t.length-1;for(;s>=0&&i>=0;)wg(n[s],t[i])&&(s-=1),i-=1;return s===-1}function _4(n,e,t){const s=[];for(const{selectors:i,settings:r}of n)for(const o of i)if(x4(o,e,t)){s.push(r);break}return s}function Db(n,e,t){const s=Object.entries(t.themes).filter(a=>a[1]).map(a=>({color:a[0],theme:a[1]})),i=s.map(a=>{const u=Nh(n,e,{...t,theme:a.theme}),c=vl(u),d=typeof a.theme=="string"?a.theme:a.theme.name;return{tokens:u,state:c,theme:d}}),r=w4(...i.map(a=>a.tokens)),o=r[0].map((a,u)=>a.map((c,d)=>{const f={content:c.content,variants:{},offset:c.offset};return"includeExplanation"in t&&t.includeExplanation&&(f.explanation=c.explanation),r.forEach((p,g)=>{const{content:b,explanation:x,offset:m,...w}=p[u][d];f.variants[s[g].color]=w}),f})),l=i[0].state?new ho(Object.fromEntries(i.map(a=>[a.theme,a.state?.getInternalStack(a.theme)])),i[0].state.lang):void 0;return l&&cc(o,l),o}function w4(...n){const e=n.map(()=>[]),t=n.length;for(let s=0;s<n[0].length;s++){const i=n.map(a=>a[s]),r=e.map(()=>[]);e.forEach((a,u)=>a.push(r[u]));const o=i.map(()=>0),l=i.map(a=>a[0]);for(;l.every(a=>a);){const a=Math.min(...l.map(u=>u.content.length));for(let u=0;u<t;u++){const c=l[u];c.content.length===a?(r[u].push(c),o[u]+=1,l[u]=i[u][o[u]]):(r[u].push({...c,content:c.content.slice(0,a)}),l[u]={...c,content:c.content.slice(a),offset:c.offset+a})}}}return e}function wu(n,e,t){let s,i,r,o,l,a;if("themes"in t){const{defaultColor:u="light",cssVariablePrefix:c="--shiki-",colorsRendering:d="css-vars"}=t,f=Object.entries(t.themes).filter(m=>m[1]).map(m=>({color:m[0],theme:m[1]})).sort((m,w)=>m.color===u?-1:w.color===u?1:0);if(f.length===0)throw new Ut("`themes` option must not be empty");const p=Db(n,e,t);if(a=vl(p),u&&$h!==u&&!f.find(m=>m.color===u))throw new Ut(`\`themes\` option must contain the defaultColor key \`${u}\``);const g=f.map(m=>n.getTheme(m.theme)),b=f.map(m=>m.color);r=p.map(m=>m.map(w=>n4(w,b,c,u,d))),a&&cc(r,a);const x=f.map(m=>bu(m.theme,t));i=Sg(f,g,x,c,u,"fg",d),s=Sg(f,g,x,c,u,"bg",d),o=`shiki-themes ${g.map(m=>m.name).join(" ")}`,l=u?void 0:[i,s].join(";")}else if("theme"in t){const u=bu(t.theme,t);r=Nh(n,e,t);const c=n.getTheme(t.theme);s=wi(c.bg,u),i=wi(c.fg,u),o=c.name,a=vl(r)}else throw new Ut("Invalid options, either `theme` or `themes` must be provided");return{tokens:r,fg:i,bg:s,themeName:o,rootStyle:l,grammarState:a}}function Sg(n,e,t,s,i,r,o){return n.map((l,a)=>{const u=wi(e[a][r],t[a])||"inherit",c=`${s+l.color}${r==="bg"?"-bg":""}:${u}`;if(a===0&&i){if(i===$h&&n.length>1){const d=n.findIndex(b=>b.color==="light"),f=n.findIndex(b=>b.color==="dark");if(d===-1||f===-1)throw new Ut('When using `defaultColor: "light-dark()"`, you must provide both `light` and `dark` themes');const p=wi(e[d][r],t[d])||"inherit",g=wi(e[f][r],t[f])||"inherit";return`light-dark(${p}, ${g});${c}`}return u}return o==="css-vars"?c:null}).filter(l=>!!l).join(";")}function Su(n,e,t,s={meta:{},options:t,codeToHast:(i,r)=>Su(n,i,r),codeToTokens:(i,r)=>wu(n,i,r)}){let i=e;for(const g of xu(t))i=g.preprocess?.call(s,i,t)||i;let{tokens:r,fg:o,bg:l,themeName:a,rootStyle:u,grammarState:c}=wu(n,i,t);const{mergeWhitespaces:d=!0,mergeSameStyleTokens:f=!1}=t;d===!0?r=C4(r):d==="never"&&(r=A4(r)),f&&(r=E4(r));const p={...s,get source(){return i}};for(const g of xu(t))r=g.tokens?.call(p,r)||r;return S4(r,{...t,fg:o,bg:l,themeName:a,rootStyle:u},p,c)}function S4(n,e,t,s=vl(n)){const i=xu(e),r=[],o={type:"root",children:[]},{structure:l="classic",tabindex:a="0"}=e;let u={type:"element",tagName:"pre",properties:{class:`shiki ${e.themeName||""}`,style:e.rootStyle||`background-color:${e.bg};color:${e.fg}`,...a!==!1&&a!=null?{tabindex:a.toString()}:{},...Object.fromEntries(Array.from(Object.entries(e.meta||{})).filter(([g])=>!g.startsWith("_")))},children:[]},c={type:"element",tagName:"code",properties:{},children:r};const d=[],f={...t,structure:l,addClassToHast:Ab,get source(){return t.source},get tokens(){return n},get options(){return e},get root(){return o},get pre(){return u},get code(){return c},get lines(){return d}};if(n.forEach((g,b)=>{b&&(l==="inline"?o.children.push({type:"element",tagName:"br",properties:{},children:[]}):l==="classic"&&r.push({type:"text",value:`
`}));let x={type:"element",tagName:"span",properties:{class:"line"},children:[]},m=0;for(const w of g){let P={type:"element",tagName:"span",properties:{...w.htmlAttrs},children:[{type:"text",value:w.content}]};const U=df(w.htmlStyle||ku(w));U&&(P.properties.style=U);for(const O of i)P=O?.span?.call(f,P,b+1,m,x,w)||P;l==="inline"?o.children.push(P):l==="classic"&&x.children.push(P),m+=w.content.length}if(l==="classic"){for(const w of i)x=w?.line?.call(f,x,b+1)||x;d.push(x),r.push(x)}else l==="inline"&&d.push(x)}),l==="classic"){for(const g of i)c=g?.code?.call(f,c)||c;u.children.push(c);for(const g of i)u=g?.pre?.call(f,u)||u;o.children.push(u)}else if(l==="inline"){const g=[];let b={type:"element",tagName:"span",properties:{class:"line"},children:[]};for(const w of o.children)w.type==="element"&&w.tagName==="br"?(g.push(b),b={type:"element",tagName:"span",properties:{class:"line"},children:[]}):(w.type==="element"||w.type==="text")&&b.children.push(w);g.push(b);let m={type:"element",tagName:"code",properties:{},children:g};for(const w of i)m=w?.code?.call(f,m)||m;o.children=[];for(let w=0;w<m.children.length;w++){w>0&&o.children.push({type:"element",tagName:"br",properties:{},children:[]});const P=m.children[w];P.type==="element"&&o.children.push(...P.children)}}let p=o;for(const g of i)p=g?.root?.call(f,p)||p;return s&&cc(p,s),p}function C4(n){return n.map(e=>{const t=[];let s="",i=0;return e.forEach((r,o)=>{const a=!(r.fontStyle&&(r.fontStyle&vn.Underline||r.fontStyle&vn.Strikethrough));a&&r.content.match(/^\s+$/)&&e[o+1]?(i||(i=r.offset),s+=r.content):s?(a?t.push({...r,offset:i,content:s+r.content}):t.push({content:s,offset:i},r),i=0,s=""):t.push(r)}),t})}function A4(n){return n.map(e=>e.flatMap(t=>{if(t.content.match(/^\s+$/))return t;const s=t.content.match(/^(\s*)(.*?)(\s*)$/);if(!s)return t;const[,i,r,o]=s;if(!i&&!o)return t;const l=[{...t,offset:t.offset+i.length,content:r}];return i&&l.unshift({content:i,offset:t.offset}),o&&l.push({content:o,offset:t.offset+i.length+r.length}),l}))}function E4(n){return n.map(e=>{const t=[];for(const s of e){if(t.length===0){t.push({...s});continue}const i=t[t.length-1],r=df(i.htmlStyle||ku(i)),o=df(s.htmlStyle||ku(s)),l=i.fontStyle&&(i.fontStyle&vn.Underline||i.fontStyle&vn.Strikethrough),a=s.fontStyle&&(s.fontStyle&vn.Underline||s.fontStyle&vn.Strikethrough);!l&&!a&&r===o?i.content+=s.content:t.push({...s})}return t})}const T4=KE;function D4(n,e,t){const s={meta:{},options:t,codeToHast:(r,o)=>Su(n,r,o),codeToTokens:(r,o)=>wu(n,r,o)};let i=T4(Su(n,e,t,s));for(const r of xu(t))i=r.postprocess?.call(s,i,t)||i;return i}const Cg={light:"#333333",dark:"#bbbbbb"},Ag={light:"#fffffe",dark:"#1e1e1e"},Eg="__shiki_resolved";function Bh(n){if(n?.[Eg])return n;const e={...n};e.tokenColors&&!e.settings&&(e.settings=e.tokenColors,delete e.tokenColors),e.type||="dark",e.colorReplacements={...e.colorReplacements},e.settings||=[];let{bg:t,fg:s}=e;if(!t||!s){const l=e.settings?e.settings.find(a=>!a.name&&!a.scope):void 0;l?.settings?.foreground&&(s=l.settings.foreground),l?.settings?.background&&(t=l.settings.background),!s&&e?.colors?.["editor.foreground"]&&(s=e.colors["editor.foreground"]),!t&&e?.colors?.["editor.background"]&&(t=e.colors["editor.background"]),s||(s=e.type==="light"?Cg.light:Cg.dark),t||(t=e.type==="light"?Ag.light:Ag.dark),e.fg=s,e.bg=t}e.settings[0]&&e.settings[0].settings&&!e.settings[0].scope||e.settings.unshift({settings:{foreground:e.fg,background:e.bg}});let i=0;const r=new Map;function o(l){if(r.has(l))return r.get(l);i+=1;const a=`#${i.toString(16).padStart(8,"0").toLowerCase()}`;return e.colorReplacements?.[`#${a}`]?o(l):(r.set(l,a),a)}e.settings=e.settings.map(l=>{const a=l.settings?.foreground&&!l.settings.foreground.startsWith("#"),u=l.settings?.background&&!l.settings.background.startsWith("#");if(!a&&!u)return l;const c={...l,settings:{...l.settings}};if(a){const d=o(l.settings.foreground);e.colorReplacements[d]=l.settings.foreground,c.settings.foreground=d}if(u){const d=o(l.settings.background);e.colorReplacements[d]=l.settings.background,c.settings.background=d}return c});for(const l of Object.keys(e.colors||{}))if((l==="editor.foreground"||l==="editor.background"||l.startsWith("terminal.ansi"))&&!e.colors[l]?.startsWith("#")){const a=o(e.colors[l]);e.colorReplacements[a]=e.colors[l],e.colors[l]=a}return Object.defineProperty(e,Eg,{enumerable:!1,writable:!1,value:!0}),e}async function Pb(n){return Array.from(new Set((await Promise.all(n.filter(e=>!Sb(e)).map(async e=>await wb(e).then(t=>Array.isArray(t)?t:[t])))).flat()))}async function Rb(n){return(await Promise.all(n.map(async t=>Cb(t)?null:Bh(await wb(t))))).filter(t=>!!t)}let P4=3;function R4(n,e=3){e>P4||console.trace(`[SHIKI DEPRECATE]: ${n}`)}let Tr=class extends Error{constructor(e){super(e),this.name="ShikiError"}};class O4 extends MA{constructor(e,t,s,i={}){super(e),this._resolver=e,this._themes=t,this._langs=s,this._alias=i,this._themes.map(r=>this.loadTheme(r)),this.loadLanguages(this._langs)}_resolvedThemes=new Map;_resolvedGrammars=new Map;_langMap=new Map;_langGraph=new Map;_textmateThemeCache=new WeakMap;_loadedThemesCache=null;_loadedLanguagesCache=null;getTheme(e){return typeof e=="string"?this._resolvedThemes.get(e):this.loadTheme(e)}loadTheme(e){const t=Bh(e);return t.name&&(this._resolvedThemes.set(t.name,t),this._loadedThemesCache=null),t}getLoadedThemes(){return this._loadedThemesCache||(this._loadedThemesCache=[...this._resolvedThemes.keys()]),this._loadedThemesCache}setTheme(e){let t=this._textmateThemeCache.get(e);t||(t=pu.createFromRawTheme(e),this._textmateThemeCache.set(e,t)),this._syncRegistry.setTheme(t)}getGrammar(e){if(this._alias[e]){const t=new Set([e]);for(;this._alias[e];){if(e=this._alias[e],t.has(e))throw new Tr(`Circular alias \`${Array.from(t).join(" -> ")} -> ${e}\``);t.add(e)}}return this._resolvedGrammars.get(e)}loadLanguage(e){if(this.getGrammar(e.name))return;const t=new Set([...this._langMap.values()].filter(r=>r.embeddedLangsLazy?.includes(e.name)));this._resolver.addLanguage(e);const s={balancedBracketSelectors:e.balancedBracketSelectors||["*"],unbalancedBracketSelectors:e.unbalancedBracketSelectors||[]};this._syncRegistry._rawGrammars.set(e.scopeName,e);const i=this.loadGrammarWithConfiguration(e.scopeName,1,s);if(i.name=e.name,this._resolvedGrammars.set(e.name,i),e.aliases&&e.aliases.forEach(r=>{this._alias[r]=e.name}),this._loadedLanguagesCache=null,t.size)for(const r of t)this._resolvedGrammars.delete(r.name),this._loadedLanguagesCache=null,this._syncRegistry?._injectionGrammars?.delete(r.scopeName),this._syncRegistry?._grammars?.delete(r.scopeName),this.loadLanguage(this._langMap.get(r.name))}dispose(){super.dispose(),this._resolvedThemes.clear(),this._resolvedGrammars.clear(),this._langMap.clear(),this._langGraph.clear(),this._loadedThemesCache=null}loadLanguages(e){for(const i of e)this.resolveEmbeddedLanguages(i);const t=Array.from(this._langGraph.entries()),s=t.filter(([i,r])=>!r);if(s.length){const i=t.filter(([r,o])=>o&&o.embeddedLangs?.some(l=>s.map(([a])=>a).includes(l))).filter(r=>!s.includes(r));throw new Tr(`Missing languages ${s.map(([r])=>`\`${r}\``).join(", ")}, required by ${i.map(([r])=>`\`${r}\``).join(", ")}`)}for(const[i,r]of t)this._resolver.addLanguage(r);for(const[i,r]of t)this.loadLanguage(r)}getLoadedLanguages(){return this._loadedLanguagesCache||(this._loadedLanguagesCache=[...new Set([...this._resolvedGrammars.keys(),...Object.keys(this._alias)])]),this._loadedLanguagesCache}resolveEmbeddedLanguages(e){this._langMap.set(e.name,e),this._langGraph.set(e.name,e);const t=e.embeddedLanguages??e.embeddedLangs;if(t)for(const s of t)this._langGraph.set(s,this._langMap.get(s))}}class L4{_langs=new Map;_scopeToLang=new Map;_injections=new Map;_onigLib;constructor(e,t){this._onigLib={createOnigScanner:s=>e.createScanner(s),createOnigString:s=>e.createString(s)},t.forEach(s=>this.addLanguage(s))}get onigLib(){return this._onigLib}getLangRegistration(e){return this._langs.get(e)}loadGrammar(e){return this._scopeToLang.get(e)}addLanguage(e){this._langs.set(e.name,e),e.aliases&&e.aliases.forEach(t=>{this._langs.set(t,e)}),this._scopeToLang.set(e.scopeName,e),e.injectTo&&e.injectTo.forEach(t=>{this._injections.get(t)||this._injections.set(t,[]),this._injections.get(t).push(e.scopeName)})}getInjections(e){const t=e.split(".");let s=[];for(let i=1;i<=t.length;i++){const r=t.slice(0,i).join(".");s=[...s,...this._injections.get(r)||[]]}return s}}let Do=0;function M4(n){Do+=1,n.warnings!==!1&&Do>=10&&Do%10===0&&console.warn(`[Shiki] ${Do} instances have been created. Shiki is supposed to be used as a singleton, consider refactoring your code to cache your highlighter instance; Or call \`highlighter.dispose()\` to release unused instances.`);let e=!1;if(!n.engine)throw new Tr("`engine` option is required for synchronous mode");const t=(n.langs||[]).flat(1),s=(n.themes||[]).flat(1).map(Bh),i=new L4(n.engine,t),r=new O4(i,s,t,n.langAlias);let o;function l(w){x();const P=r.getGrammar(typeof w=="string"?w:w.name);if(!P)throw new Tr(`Language \`${w}\` not found, you may need to load it first`);return P}function a(w){if(w==="none")return{bg:"",fg:"",name:"none",settings:[],type:"dark"};x();const P=r.getTheme(w);if(!P)throw new Tr(`Theme \`${w}\` not found, you may need to load it first`);return P}function u(w){x();const P=a(w);o!==w&&(r.setTheme(P),o=w);const U=r.getColorMap();return{theme:P,colorMap:U}}function c(){return x(),r.getLoadedThemes()}function d(){return x(),r.getLoadedLanguages()}function f(...w){x(),r.loadLanguages(w.flat(1))}async function p(...w){return f(await Pb(w))}function g(...w){x();for(const P of w.flat(1))r.loadTheme(P)}async function b(...w){return x(),g(await Rb(w))}function x(){if(e)throw new Tr("Shiki instance has been disposed")}function m(){e||(e=!0,r.dispose(),Do-=1)}return{setTheme:u,getTheme:a,getLanguage:l,getLoadedThemes:c,getLoadedLanguages:d,loadLanguage:p,loadLanguageSync:f,loadTheme:b,loadThemeSync:g,dispose:m,[Symbol.dispose]:m}}async function I4(n){n.engine||R4("`engine` option is required. Use `createOnigurumaEngine` or `createJavaScriptRegexEngine` to create an engine.");const[e,t,s]=await Promise.all([Rb(n.themes||[]),Pb(n.langs||[]),n.engine]);return M4({...n,themes:e,langs:t,engine:s})}async function j4(n){const e=await I4(n);return{getLastGrammarState:(...t)=>v4(e,...t),codeToTokensBase:(t,s)=>Nh(e,t,s),codeToTokensWithThemes:(t,s)=>Db(e,t,s),codeToTokens:(t,s)=>wu(e,t,s),codeToHast:(t,s)=>Su(e,t,s),codeToHtml:(t,s)=>D4(e,t,s),getBundledLanguages:()=>({}),getBundledThemes:()=>({}),...e,getInternalContext:()=>e}}function V4(n){const e=n.langs,t=n.themes,s=n.engine;async function i(r){function o(d){if(typeof d=="string"){if(Sb(d))return[];d=r.langAlias?.[d]||d;const f=e[d];if(!f)throw new Ut(`Language \`${d}\` is not included in this bundle. You may want to load it from external source.`);return f}return d}function l(d){if(Cb(d))return"none";if(typeof d=="string"){const f=t[d];if(!f)throw new Ut(`Theme \`${d}\` is not included in this bundle. You may want to load it from external source.`);return f}return d}const a=(r.themes??[]).map(d=>l(d)),u=(r.langs??[]).map(d=>o(d)),c=await j4({engine:r.engine??s(),...r,themes:a,langs:u});return{...c,loadLanguage(...d){return c.loadLanguage(...d.map(o))},loadTheme(...d){return c.loadTheme(...d.map(l))},getBundledLanguages(){return e},getBundledThemes(){return t}}}return i}const Ob=[{id:"abap",name:"ABAP",import:(()=>R(()=>import("./abap.js"),[]))},{id:"actionscript-3",name:"ActionScript",import:(()=>R(()=>import("./actionscript-3.js"),[]))},{id:"ada",name:"Ada",import:(()=>R(()=>import("./ada.js"),[]))},{id:"angular-html",name:"Angular HTML",import:(()=>R(()=>import("./angular-html.js").then(n=>n.f),__vite__mapDeps([0,1,2,3])))},{id:"angular-ts",name:"Angular TypeScript",import:(()=>R(()=>import("./angular-ts.js"),__vite__mapDeps([4,0,1,2,3,5])))},{id:"apache",name:"Apache Conf",import:(()=>R(()=>import("./apache.js"),[]))},{id:"apex",name:"Apex",import:(()=>R(()=>import("./apex.js"),[]))},{id:"apl",name:"APL",import:(()=>R(()=>import("./apl.js"),__vite__mapDeps([6,1,2,3,7,8,9])))},{id:"applescript",name:"AppleScript",import:(()=>R(()=>import("./applescript.js"),[]))},{id:"ara",name:"Ara",import:(()=>R(()=>import("./ara.js"),[]))},{id:"asciidoc",name:"AsciiDoc",aliases:["adoc"],import:(()=>R(()=>import("./asciidoc.js"),[]))},{id:"asm",name:"Assembly",import:(()=>R(()=>import("./asm.js"),[]))},{id:"astro",name:"Astro",import:(()=>R(()=>import("./astro.js"),__vite__mapDeps([10,9,2,11,3,12,13])))},{id:"awk",name:"AWK",import:(()=>R(()=>import("./awk.js"),[]))},{id:"ballerina",name:"Ballerina",import:(()=>R(()=>import("./ballerina.js"),[]))},{id:"bat",name:"Batch File",aliases:["batch"],import:(()=>R(()=>import("./bat.js"),[]))},{id:"beancount",name:"Beancount",import:(()=>R(()=>import("./beancount.js"),[]))},{id:"berry",name:"Berry",aliases:["be"],import:(()=>R(()=>import("./berry.js"),[]))},{id:"bibtex",name:"BibTeX",import:(()=>R(()=>import("./bibtex.js"),[]))},{id:"bicep",name:"Bicep",import:(()=>R(()=>import("./bicep.js"),[]))},{id:"blade",name:"Blade",import:(()=>R(()=>import("./blade.js"),__vite__mapDeps([14,15,1,2,3,7,8,16,9])))},{id:"bsl",name:"1C (Enterprise)",aliases:["1c"],import:(()=>R(()=>import("./bsl.js"),__vite__mapDeps([17,18])))},{id:"c",name:"C",import:(()=>R(()=>import("./c.js"),[]))},{id:"cadence",name:"Cadence",aliases:["cdc"],import:(()=>R(()=>import("./cadence.js"),[]))},{id:"cairo",name:"Cairo",import:(()=>R(()=>import("./cairo.js"),__vite__mapDeps([19,20])))},{id:"clarity",name:"Clarity",import:(()=>R(()=>import("./clarity.js"),[]))},{id:"clojure",name:"Clojure",aliases:["clj"],import:(()=>R(()=>import("./clojure.js"),[]))},{id:"cmake",name:"CMake",import:(()=>R(()=>import("./cmake.js"),[]))},{id:"cobol",name:"COBOL",import:(()=>R(()=>import("./cobol.js"),__vite__mapDeps([21,1,2,3,8])))},{id:"codeowners",name:"CODEOWNERS",import:(()=>R(()=>import("./codeowners.js"),[]))},{id:"codeql",name:"CodeQL",aliases:["ql"],import:(()=>R(()=>import("./codeql.js"),[]))},{id:"coffee",name:"CoffeeScript",aliases:["coffeescript"],import:(()=>R(()=>import("./coffee.js"),__vite__mapDeps([22,2])))},{id:"common-lisp",name:"Common Lisp",aliases:["lisp"],import:(()=>R(()=>import("./common-lisp.js"),[]))},{id:"coq",name:"Coq",import:(()=>R(()=>import("./coq.js"),[]))},{id:"cpp",name:"C++",aliases:["c++"],import:(()=>R(()=>import("./cpp.js"),__vite__mapDeps([23,24,25,26,16])))},{id:"crystal",name:"Crystal",import:(()=>R(()=>import("./crystal.js"),__vite__mapDeps([27,1,2,3,16,26,28])))},{id:"csharp",name:"C#",aliases:["c#","cs"],import:(()=>R(()=>import("./csharp.js"),[]))},{id:"css",name:"CSS",import:(()=>R(()=>import("./css.js"),[]))},{id:"csv",name:"CSV",import:(()=>R(()=>import("./csv.js"),[]))},{id:"cue",name:"CUE",import:(()=>R(()=>import("./cue.js"),[]))},{id:"cypher",name:"Cypher",aliases:["cql"],import:(()=>R(()=>import("./cypher.js"),[]))},{id:"d",name:"D",import:(()=>R(()=>import("./d.js"),[]))},{id:"dart",name:"Dart",import:(()=>R(()=>import("./dart.js"),[]))},{id:"dax",name:"DAX",import:(()=>R(()=>import("./dax.js"),[]))},{id:"desktop",name:"Desktop",import:(()=>R(()=>import("./desktop.js"),[]))},{id:"diff",name:"Diff",import:(()=>R(()=>import("./diff.js"),[]))},{id:"docker",name:"Dockerfile",aliases:["dockerfile"],import:(()=>R(()=>import("./docker.js"),[]))},{id:"dotenv",name:"dotEnv",import:(()=>R(()=>import("./dotenv.js"),[]))},{id:"dream-maker",name:"Dream Maker",import:(()=>R(()=>import("./dream-maker.js"),[]))},{id:"edge",name:"Edge",import:(()=>R(()=>import("./edge.js"),__vite__mapDeps([29,11,1,2,3,15])))},{id:"elixir",name:"Elixir",import:(()=>R(()=>import("./elixir.js"),__vite__mapDeps([30,1,2,3])))},{id:"elm",name:"Elm",import:(()=>R(()=>import("./elm.js"),__vite__mapDeps([31,25,26])))},{id:"emacs-lisp",name:"Emacs Lisp",aliases:["elisp"],import:(()=>R(()=>import("./emacs-lisp.js"),[]))},{id:"erb",name:"ERB",import:(()=>R(()=>import("./erb.js"),__vite__mapDeps([32,1,2,3,33,34,7,8,16,35,11,36,13,23,24,25,26,28,37,38])))},{id:"erlang",name:"Erlang",aliases:["erl"],import:(()=>R(()=>import("./erlang.js"),__vite__mapDeps([39,40])))},{id:"fennel",name:"Fennel",import:(()=>R(()=>import("./fennel.js"),[]))},{id:"fish",name:"Fish",import:(()=>R(()=>import("./fish.js"),[]))},{id:"fluent",name:"Fluent",aliases:["ftl"],import:(()=>R(()=>import("./fluent.js"),[]))},{id:"fortran-fixed-form",name:"Fortran (Fixed Form)",aliases:["f","for","f77"],import:(()=>R(()=>import("./fortran-fixed-form.js"),__vite__mapDeps([41,42])))},{id:"fortran-free-form",name:"Fortran (Free Form)",aliases:["f90","f95","f03","f08","f18"],import:(()=>R(()=>import("./fortran-free-form.js"),[]))},{id:"fsharp",name:"F#",aliases:["f#","fs"],import:(()=>R(()=>import("./fsharp.js"),__vite__mapDeps([43,40])))},{id:"gdresource",name:"GDResource",import:(()=>R(()=>import("./gdresource.js"),__vite__mapDeps([44,45,46])))},{id:"gdscript",name:"GDScript",import:(()=>R(()=>import("./gdscript.js"),[]))},{id:"gdshader",name:"GDShader",import:(()=>R(()=>import("./gdshader.js"),[]))},{id:"genie",name:"Genie",import:(()=>R(()=>import("./genie.js"),[]))},{id:"gherkin",name:"Gherkin",import:(()=>R(()=>import("./gherkin.js"),[]))},{id:"git-commit",name:"Git Commit Message",import:(()=>R(()=>import("./git-commit.js"),__vite__mapDeps([47,48])))},{id:"git-rebase",name:"Git Rebase Message",import:(()=>R(()=>import("./git-rebase.js"),__vite__mapDeps([49,28])))},{id:"gleam",name:"Gleam",import:(()=>R(()=>import("./gleam.js"),[]))},{id:"glimmer-js",name:"Glimmer JS",aliases:["gjs"],import:(()=>R(()=>import("./glimmer-js.js"),__vite__mapDeps([50,2,11,3,1])))},{id:"glimmer-ts",name:"Glimmer TS",aliases:["gts"],import:(()=>R(()=>import("./glimmer-ts.js"),__vite__mapDeps([51,11,3,2,1])))},{id:"glsl",name:"GLSL",import:(()=>R(()=>import("./glsl.js"),__vite__mapDeps([25,26])))},{id:"gnuplot",name:"Gnuplot",import:(()=>R(()=>import("./gnuplot.js"),[]))},{id:"go",name:"Go",import:(()=>R(()=>import("./go.js"),[]))},{id:"graphql",name:"GraphQL",aliases:["gql"],import:(()=>R(()=>import("./graphql.js"),__vite__mapDeps([35,2,11,36,13])))},{id:"groovy",name:"Groovy",import:(()=>R(()=>import("./groovy.js"),[]))},{id:"hack",name:"Hack",import:(()=>R(()=>import("./hack.js"),__vite__mapDeps([52,1,2,3,16])))},{id:"haml",name:"Ruby Haml",import:(()=>R(()=>import("./haml.js"),__vite__mapDeps([34,2,3])))},{id:"handlebars",name:"Handlebars",aliases:["hbs"],import:(()=>R(()=>import("./handlebars.js"),__vite__mapDeps([53,1,2,3,38])))},{id:"haskell",name:"Haskell",aliases:["hs"],import:(()=>R(()=>import("./haskell.js"),[]))},{id:"haxe",name:"Haxe",import:(()=>R(()=>import("./haxe.js"),[]))},{id:"hcl",name:"HashiCorp HCL",import:(()=>R(()=>import("./hcl.js"),[]))},{id:"hjson",name:"Hjson",import:(()=>R(()=>import("./hjson.js"),[]))},{id:"hlsl",name:"HLSL",import:(()=>R(()=>import("./hlsl.js"),[]))},{id:"html",name:"HTML",import:(()=>R(()=>import("./html.js"),__vite__mapDeps([1,2,3])))},{id:"html-derivative",name:"HTML (Derivative)",import:(()=>R(()=>import("./html-derivative.js"),__vite__mapDeps([15,1,2,3])))},{id:"http",name:"HTTP",import:(()=>R(()=>import("./http.js"),__vite__mapDeps([54,28,9,7,8,35,2,11,36,13])))},{id:"hurl",name:"Hurl",import:(()=>R(()=>import("./hurl.js"),__vite__mapDeps([55,35,2,11,36,13,7,8,56])))},{id:"hxml",name:"HXML",import:(()=>R(()=>import("./hxml.js"),__vite__mapDeps([57,58])))},{id:"hy",name:"Hy",import:(()=>R(()=>import("./hy.js"),[]))},{id:"imba",name:"Imba",import:(()=>R(()=>import("./imba.js"),[]))},{id:"ini",name:"INI",aliases:["properties"],import:(()=>R(()=>import("./ini.js"),[]))},{id:"java",name:"Java",import:(()=>R(()=>import("./java.js"),[]))},{id:"javascript",name:"JavaScript",aliases:["js","cjs","mjs"],import:(()=>R(()=>import("./javascript.js"),[]))},{id:"jinja",name:"Jinja",import:(()=>R(()=>import("./jinja.js"),__vite__mapDeps([59,1,2,3])))},{id:"jison",name:"Jison",import:(()=>R(()=>import("./jison.js"),__vite__mapDeps([60,2])))},{id:"json",name:"JSON",import:(()=>R(()=>import("./json.js"),[]))},{id:"json5",name:"JSON5",import:(()=>R(()=>import("./json5.js"),[]))},{id:"jsonc",name:"JSON with Comments",import:(()=>R(()=>import("./jsonc.js"),[]))},{id:"jsonl",name:"JSON Lines",import:(()=>R(()=>import("./jsonl.js"),[]))},{id:"jsonnet",name:"Jsonnet",import:(()=>R(()=>import("./jsonnet.js"),[]))},{id:"jssm",name:"JSSM",aliases:["fsl"],import:(()=>R(()=>import("./jssm.js"),[]))},{id:"jsx",name:"JSX",import:(()=>R(()=>import("./jsx.js"),[]))},{id:"julia",name:"Julia",aliases:["jl"],import:(()=>R(()=>import("./julia.js"),__vite__mapDeps([61,23,24,25,26,16,20,2,62])))},{id:"kdl",name:"KDL",import:(()=>R(()=>import("./kdl.js"),[]))},{id:"kotlin",name:"Kotlin",aliases:["kt","kts"],import:(()=>R(()=>import("./kotlin.js"),[]))},{id:"kusto",name:"Kusto",aliases:["kql"],import:(()=>R(()=>import("./kusto.js"),[]))},{id:"latex",name:"LaTeX",import:(()=>R(()=>import("./latex.js"),__vite__mapDeps([63,64,62])))},{id:"lean",name:"Lean 4",aliases:["lean4"],import:(()=>R(()=>import("./lean.js"),[]))},{id:"less",name:"Less",import:(()=>R(()=>import("./less.js"),[]))},{id:"liquid",name:"Liquid",import:(()=>R(()=>import("./liquid.js"),__vite__mapDeps([65,1,2,3,9])))},{id:"llvm",name:"LLVM IR",import:(()=>R(()=>import("./llvm.js"),[]))},{id:"log",name:"Log file",import:(()=>R(()=>import("./log.js"),[]))},{id:"logo",name:"Logo",import:(()=>R(()=>import("./logo.js"),[]))},{id:"lua",name:"Lua",import:(()=>R(()=>import("./lua.js"),__vite__mapDeps([37,26])))},{id:"luau",name:"Luau",import:(()=>R(()=>import("./luau.js"),[]))},{id:"make",name:"Makefile",aliases:["makefile"],import:(()=>R(()=>import("./make.js"),[]))},{id:"markdown",name:"Markdown",aliases:["md"],import:(()=>R(()=>import("./markdown.js"),[]))},{id:"marko",name:"Marko",import:(()=>R(()=>import("./marko.js"),__vite__mapDeps([66,3,67,5,11])))},{id:"matlab",name:"MATLAB",import:(()=>R(()=>import("./matlab.js"),[]))},{id:"mdc",name:"MDC",import:(()=>R(()=>import("./mdc.js"),__vite__mapDeps([68,40,38,15,1,2,3])))},{id:"mdx",name:"MDX",import:(()=>R(()=>import("./mdx.js"),[]))},{id:"mermaid",name:"Mermaid",aliases:["mmd"],import:(()=>R(()=>import("./mermaid.js"),[]))},{id:"mipsasm",name:"MIPS Assembly",aliases:["mips"],import:(()=>R(()=>import("./mipsasm.js"),[]))},{id:"mojo",name:"Mojo",import:(()=>R(()=>import("./mojo.js"),[]))},{id:"move",name:"Move",import:(()=>R(()=>import("./move.js"),[]))},{id:"narrat",name:"Narrat Language",aliases:["nar"],import:(()=>R(()=>import("./narrat.js"),[]))},{id:"nextflow",name:"Nextflow",aliases:["nf"],import:(()=>R(()=>import("./nextflow.js"),[]))},{id:"nginx",name:"Nginx",import:(()=>R(()=>import("./nginx.js"),__vite__mapDeps([69,37,26])))},{id:"nim",name:"Nim",import:(()=>R(()=>import("./nim.js"),__vite__mapDeps([70,26,1,2,3,7,8,25,40])))},{id:"nix",name:"Nix",import:(()=>R(()=>import("./nix.js"),[]))},{id:"nushell",name:"nushell",aliases:["nu"],import:(()=>R(()=>import("./nushell.js"),[]))},{id:"objective-c",name:"Objective-C",aliases:["objc"],import:(()=>R(()=>import("./objective-c.js"),[]))},{id:"objective-cpp",name:"Objective-C++",import:(()=>R(()=>import("./objective-cpp.js"),[]))},{id:"ocaml",name:"OCaml",import:(()=>R(()=>import("./ocaml.js"),[]))},{id:"openscad",name:"OpenSCAD",aliases:["scad"],import:(()=>R(()=>import("./openscad.js"),[]))},{id:"pascal",name:"Pascal",import:(()=>R(()=>import("./pascal.js"),[]))},{id:"perl",name:"Perl",import:(()=>R(()=>import("./perl.js"),__vite__mapDeps([71,1,2,3,7,8,16])))},{id:"php",name:"PHP",import:(()=>R(()=>import("./php.js"),__vite__mapDeps([72,1,2,3,7,8,16,9])))},{id:"pkl",name:"Pkl",import:(()=>R(()=>import("./pkl.js"),[]))},{id:"plsql",name:"PL/SQL",import:(()=>R(()=>import("./plsql.js"),[]))},{id:"po",name:"Gettext PO",aliases:["pot","potx"],import:(()=>R(()=>import("./po.js"),[]))},{id:"polar",name:"Polar",import:(()=>R(()=>import("./polar.js"),[]))},{id:"postcss",name:"PostCSS",import:(()=>R(()=>import("./postcss.js"),[]))},{id:"powerquery",name:"PowerQuery",import:(()=>R(()=>import("./powerquery.js"),[]))},{id:"powershell",name:"PowerShell",aliases:["ps","ps1"],import:(()=>R(()=>import("./powershell.js"),[]))},{id:"prisma",name:"Prisma",import:(()=>R(()=>import("./prisma.js"),[]))},{id:"prolog",name:"Prolog",import:(()=>R(()=>import("./prolog.js"),[]))},{id:"proto",name:"Protocol Buffer 3",aliases:["protobuf"],import:(()=>R(()=>import("./proto.js"),[]))},{id:"pug",name:"Pug",aliases:["jade"],import:(()=>R(()=>import("./pug.js"),__vite__mapDeps([73,2,3,1])))},{id:"puppet",name:"Puppet",import:(()=>R(()=>import("./puppet.js"),[]))},{id:"purescript",name:"PureScript",import:(()=>R(()=>import("./purescript.js"),[]))},{id:"python",name:"Python",aliases:["py"],import:(()=>R(()=>import("./python.js"),[]))},{id:"qml",name:"QML",import:(()=>R(()=>import("./qml.js"),__vite__mapDeps([74,2])))},{id:"qmldir",name:"QML Directory",import:(()=>R(()=>import("./qmldir.js"),[]))},{id:"qss",name:"Qt Style Sheets",import:(()=>R(()=>import("./qss.js"),[]))},{id:"r",name:"R",import:(()=>R(()=>import("./r.js"),[]))},{id:"racket",name:"Racket",import:(()=>R(()=>import("./racket.js"),[]))},{id:"raku",name:"Raku",aliases:["perl6"],import:(()=>R(()=>import("./raku.js"),[]))},{id:"razor",name:"ASP.NET Razor",import:(()=>R(()=>import("./razor.js"),__vite__mapDeps([75,1,2,3,76])))},{id:"reg",name:"Windows Registry Script",import:(()=>R(()=>import("./reg.js"),[]))},{id:"regexp",name:"RegExp",aliases:["regex"],import:(()=>R(()=>import("./regexp.js"),[]))},{id:"rel",name:"Rel",import:(()=>R(()=>import("./rel.js"),[]))},{id:"riscv",name:"RISC-V",import:(()=>R(()=>import("./riscv.js"),[]))},{id:"rosmsg",name:"ROS Interface",import:(()=>R(()=>import("./rosmsg.js"),[]))},{id:"rst",name:"reStructuredText",import:(()=>R(()=>import("./rst.js"),__vite__mapDeps([77,15,1,2,3,23,24,25,26,16,20,28,38,78,33,34,7,8,35,11,36,13,37])))},{id:"ruby",name:"Ruby",aliases:["rb"],import:(()=>R(()=>import("./ruby.js"),__vite__mapDeps([33,1,2,3,34,7,8,16,35,11,36,13,23,24,25,26,28,37,38])))},{id:"rust",name:"Rust",aliases:["rs"],import:(()=>R(()=>import("./rust.js"),[]))},{id:"sas",name:"SAS",import:(()=>R(()=>import("./sas.js"),__vite__mapDeps([79,16])))},{id:"sass",name:"Sass",import:(()=>R(()=>import("./sass.js"),[]))},{id:"scala",name:"Scala",import:(()=>R(()=>import("./scala.js"),[]))},{id:"scheme",name:"Scheme",import:(()=>R(()=>import("./scheme.js"),[]))},{id:"scss",name:"SCSS",import:(()=>R(()=>import("./scss.js"),__vite__mapDeps([5,3])))},{id:"sdbl",name:"1C (Query)",aliases:["1c-query"],import:(()=>R(()=>import("./sdbl.js"),[]))},{id:"shaderlab",name:"ShaderLab",aliases:["shader"],import:(()=>R(()=>import("./shaderlab.js"),__vite__mapDeps([80,81])))},{id:"shellscript",name:"Shell",aliases:["bash","sh","shell","zsh"],import:(()=>R(()=>import("./shellscript.js"),[]))},{id:"shellsession",name:"Shell Session",aliases:["console"],import:(()=>R(()=>import("./shellsession.js"),__vite__mapDeps([82,28])))},{id:"smalltalk",name:"Smalltalk",import:(()=>R(()=>import("./smalltalk.js"),[]))},{id:"solidity",name:"Solidity",import:(()=>R(()=>import("./solidity.js"),[]))},{id:"soy",name:"Closure Templates",aliases:["closure-templates"],import:(()=>R(()=>import("./soy.js"),__vite__mapDeps([83,1,2,3])))},{id:"sparql",name:"SPARQL",import:(()=>R(()=>import("./sparql.js"),__vite__mapDeps([84,85])))},{id:"splunk",name:"Splunk Query Language",aliases:["spl"],import:(()=>R(()=>import("./splunk.js"),[]))},{id:"sql",name:"SQL",import:(()=>R(()=>import("./sql.js"),[]))},{id:"ssh-config",name:"SSH Config",import:(()=>R(()=>import("./ssh-config.js"),[]))},{id:"stata",name:"Stata",import:(()=>R(()=>import("./stata.js"),__vite__mapDeps([86,16])))},{id:"stylus",name:"Stylus",aliases:["styl"],import:(()=>R(()=>import("./stylus.js"),[]))},{id:"svelte",name:"Svelte",import:(()=>R(()=>import("./svelte.js"),__vite__mapDeps([87,2,11,3,12])))},{id:"swift",name:"Swift",import:(()=>R(()=>import("./swift.js"),[]))},{id:"system-verilog",name:"SystemVerilog",import:(()=>R(()=>import("./system-verilog.js"),[]))},{id:"systemd",name:"Systemd Units",import:(()=>R(()=>import("./systemd.js"),[]))},{id:"talonscript",name:"TalonScript",aliases:["talon"],import:(()=>R(()=>import("./talonscript.js"),[]))},{id:"tasl",name:"Tasl",import:(()=>R(()=>import("./tasl.js"),[]))},{id:"tcl",name:"Tcl",import:(()=>R(()=>import("./tcl.js"),[]))},{id:"templ",name:"Templ",import:(()=>R(()=>import("./templ.js"),__vite__mapDeps([88,89,2,3])))},{id:"terraform",name:"Terraform",aliases:["tf","tfvars"],import:(()=>R(()=>import("./terraform.js"),[]))},{id:"tex",name:"TeX",import:(()=>R(()=>import("./tex.js"),__vite__mapDeps([64,62])))},{id:"toml",name:"TOML",import:(()=>R(()=>import("./toml.js"),[]))},{id:"ts-tags",name:"TypeScript with Tags",aliases:["lit"],import:(()=>R(()=>import("./ts-tags.js"),__vite__mapDeps([90,11,3,2,25,26,1,16,7,8])))},{id:"tsv",name:"TSV",import:(()=>R(()=>import("./tsv.js"),[]))},{id:"tsx",name:"TSX",import:(()=>R(()=>import("./tsx.js"),[]))},{id:"turtle",name:"Turtle",import:(()=>R(()=>import("./turtle.js"),[]))},{id:"twig",name:"Twig",import:(()=>R(()=>import("./twig.js"),__vite__mapDeps([91,3,2,5,72,1,7,8,16,9,20,33,34,35,11,36,13,23,24,25,26,28,37,38])))},{id:"typescript",name:"TypeScript",aliases:["ts","cts","mts"],import:(()=>R(()=>import("./typescript.js"),[]))},{id:"typespec",name:"TypeSpec",aliases:["tsp"],import:(()=>R(()=>import("./typespec.js"),[]))},{id:"typst",name:"Typst",aliases:["typ"],import:(()=>R(()=>import("./typst.js"),[]))},{id:"v",name:"V",import:(()=>R(()=>import("./v.js"),[]))},{id:"vala",name:"Vala",import:(()=>R(()=>import("./vala.js"),[]))},{id:"vb",name:"Visual Basic",aliases:["cmd"],import:(()=>R(()=>import("./vb.js"),[]))},{id:"verilog",name:"Verilog",import:(()=>R(()=>import("./verilog.js"),[]))},{id:"vhdl",name:"VHDL",import:(()=>R(()=>import("./vhdl.js"),[]))},{id:"viml",name:"Vim Script",aliases:["vim","vimscript"],import:(()=>R(()=>import("./viml.js"),[]))},{id:"vue",name:"Vue",import:(()=>R(()=>import("./vue.js"),__vite__mapDeps([92,3,2,11,9,15,1])))},{id:"vue-html",name:"Vue HTML",import:(()=>R(()=>import("./vue-html.js"),__vite__mapDeps([93,92,3,2,11,9,15,1])))},{id:"vue-vine",name:"Vue Vine",import:(()=>R(()=>import("./vue-vine.js"),__vite__mapDeps([94,3,5,67,95,12,92,2,11,9,15,1])))},{id:"vyper",name:"Vyper",aliases:["vy"],import:(()=>R(()=>import("./vyper.js"),[]))},{id:"wasm",name:"WebAssembly",import:(()=>R(()=>import("./wasm.js"),[]))},{id:"wenyan",name:"Wenyan",aliases:[""],import:(()=>R(()=>import("./wenyan.js"),[]))},{id:"wgsl",name:"WGSL",import:(()=>R(()=>import("./wgsl.js"),[]))},{id:"wikitext",name:"Wikitext",aliases:["mediawiki","wiki"],import:(()=>R(()=>import("./wikitext.js"),[]))},{id:"wit",name:"WebAssembly Interface Types",import:(()=>R(()=>import("./wit.js"),[]))},{id:"wolfram",name:"Wolfram",aliases:["wl"],import:(()=>R(()=>import("./wolfram.js"),[]))},{id:"xml",name:"XML",import:(()=>R(()=>import("./xml.js"),__vite__mapDeps([7,8])))},{id:"xsl",name:"XSL",import:(()=>R(()=>import("./xsl.js"),__vite__mapDeps([96,7,8])))},{id:"yaml",name:"YAML",aliases:["yml"],import:(()=>R(()=>import("./yaml.js"),[]))},{id:"zenscript",name:"ZenScript",import:(()=>R(()=>import("./zenscript.js"),[]))},{id:"zig",name:"Zig",import:(()=>R(()=>import("./zig.js"),[]))}],$4=Object.fromEntries(Ob.map(n=>[n.id,n.import])),N4=Object.fromEntries(Ob.flatMap(n=>n.aliases?.map(e=>[e,n.import])||[])),B4={...$4,...N4},F4=[{id:"andromeeda",displayName:"Andromeeda",type:"dark",import:(()=>R(()=>import("./andromeeda.js"),[]))},{id:"aurora-x",displayName:"Aurora X",type:"dark",import:(()=>R(()=>import("./aurora-x.js"),[]))},{id:"ayu-dark",displayName:"Ayu Dark",type:"dark",import:(()=>R(()=>import("./ayu-dark.js"),[]))},{id:"catppuccin-frappe",displayName:"Catppuccin Frapp",type:"dark",import:(()=>R(()=>import("./catppuccin-frappe.js"),[]))},{id:"catppuccin-latte",displayName:"Catppuccin Latte",type:"light",import:(()=>R(()=>import("./catppuccin-latte.js"),[]))},{id:"catppuccin-macchiato",displayName:"Catppuccin Macchiato",type:"dark",import:(()=>R(()=>import("./catppuccin-macchiato.js"),[]))},{id:"catppuccin-mocha",displayName:"Catppuccin Mocha",type:"dark",import:(()=>R(()=>import("./catppuccin-mocha.js"),[]))},{id:"dark-plus",displayName:"Dark Plus",type:"dark",import:(()=>R(()=>import("./dark-plus.js"),[]))},{id:"dracula",displayName:"Dracula Theme",type:"dark",import:(()=>R(()=>import("./dracula.js"),[]))},{id:"dracula-soft",displayName:"Dracula Theme Soft",type:"dark",import:(()=>R(()=>import("./dracula-soft.js"),[]))},{id:"everforest-dark",displayName:"Everforest Dark",type:"dark",import:(()=>R(()=>import("./everforest-dark.js"),[]))},{id:"everforest-light",displayName:"Everforest Light",type:"light",import:(()=>R(()=>import("./everforest-light.js"),[]))},{id:"github-dark",displayName:"GitHub Dark",type:"dark",import:(()=>R(()=>import("./github-dark.js"),[]))},{id:"github-dark-default",displayName:"GitHub Dark Default",type:"dark",import:(()=>R(()=>import("./github-dark-default.js"),[]))},{id:"github-dark-dimmed",displayName:"GitHub Dark Dimmed",type:"dark",import:(()=>R(()=>import("./github-dark-dimmed.js"),[]))},{id:"github-dark-high-contrast",displayName:"GitHub Dark High Contrast",type:"dark",import:(()=>R(()=>import("./github-dark-high-contrast.js"),[]))},{id:"github-light",displayName:"GitHub Light",type:"light",import:(()=>R(()=>import("./github-light.js"),[]))},{id:"github-light-default",displayName:"GitHub Light Default",type:"light",import:(()=>R(()=>import("./github-light-default.js"),[]))},{id:"github-light-high-contrast",displayName:"GitHub Light High Contrast",type:"light",import:(()=>R(()=>import("./github-light-high-contrast.js"),[]))},{id:"gruvbox-dark-hard",displayName:"Gruvbox Dark Hard",type:"dark",import:(()=>R(()=>import("./gruvbox-dark-hard.js"),[]))},{id:"gruvbox-dark-medium",displayName:"Gruvbox Dark Medium",type:"dark",import:(()=>R(()=>import("./gruvbox-dark-medium.js"),[]))},{id:"gruvbox-dark-soft",displayName:"Gruvbox Dark Soft",type:"dark",import:(()=>R(()=>import("./gruvbox-dark-soft.js"),[]))},{id:"gruvbox-light-hard",displayName:"Gruvbox Light Hard",type:"light",import:(()=>R(()=>import("./gruvbox-light-hard.js"),[]))},{id:"gruvbox-light-medium",displayName:"Gruvbox Light Medium",type:"light",import:(()=>R(()=>import("./gruvbox-light-medium.js"),[]))},{id:"gruvbox-light-soft",displayName:"Gruvbox Light Soft",type:"light",import:(()=>R(()=>import("./gruvbox-light-soft.js"),[]))},{id:"houston",displayName:"Houston",type:"dark",import:(()=>R(()=>import("./houston.js"),[]))},{id:"kanagawa-dragon",displayName:"Kanagawa Dragon",type:"dark",import:(()=>R(()=>import("./kanagawa-dragon.js"),[]))},{id:"kanagawa-lotus",displayName:"Kanagawa Lotus",type:"light",import:(()=>R(()=>import("./kanagawa-lotus.js"),[]))},{id:"kanagawa-wave",displayName:"Kanagawa Wave",type:"dark",import:(()=>R(()=>import("./kanagawa-wave.js"),[]))},{id:"laserwave",displayName:"LaserWave",type:"dark",import:(()=>R(()=>import("./laserwave.js"),[]))},{id:"light-plus",displayName:"Light Plus",type:"light",import:(()=>R(()=>import("./light-plus.js"),[]))},{id:"material-theme",displayName:"Material Theme",type:"dark",import:(()=>R(()=>import("./material-theme.js"),[]))},{id:"material-theme-darker",displayName:"Material Theme Darker",type:"dark",import:(()=>R(()=>import("./material-theme-darker.js"),[]))},{id:"material-theme-lighter",displayName:"Material Theme Lighter",type:"light",import:(()=>R(()=>import("./material-theme-lighter.js"),[]))},{id:"material-theme-ocean",displayName:"Material Theme Ocean",type:"dark",import:(()=>R(()=>import("./material-theme-ocean.js"),[]))},{id:"material-theme-palenight",displayName:"Material Theme Palenight",type:"dark",import:(()=>R(()=>import("./material-theme-palenight.js"),[]))},{id:"min-dark",displayName:"Min Dark",type:"dark",import:(()=>R(()=>import("./min-dark.js"),[]))},{id:"min-light",displayName:"Min Light",type:"light",import:(()=>R(()=>import("./min-light.js"),[]))},{id:"monokai",displayName:"Monokai",type:"dark",import:(()=>R(()=>import("./monokai.js"),[]))},{id:"night-owl",displayName:"Night Owl",type:"dark",import:(()=>R(()=>import("./night-owl.js"),[]))},{id:"nord",displayName:"Nord",type:"dark",import:(()=>R(()=>import("./nord.js"),[]))},{id:"one-dark-pro",displayName:"One Dark Pro",type:"dark",import:(()=>R(()=>import("./one-dark-pro.js"),[]))},{id:"one-light",displayName:"One Light",type:"light",import:(()=>R(()=>import("./one-light.js"),[]))},{id:"plastic",displayName:"Plastic",type:"dark",import:(()=>R(()=>import("./plastic.js"),[]))},{id:"poimandres",displayName:"Poimandres",type:"dark",import:(()=>R(()=>import("./poimandres.js"),[]))},{id:"red",displayName:"Red",type:"dark",import:(()=>R(()=>import("./red.js"),[]))},{id:"rose-pine",displayName:"Ros Pine",type:"dark",import:(()=>R(()=>import("./rose-pine.js"),[]))},{id:"rose-pine-dawn",displayName:"Ros Pine Dawn",type:"light",import:(()=>R(()=>import("./rose-pine-dawn.js"),[]))},{id:"rose-pine-moon",displayName:"Ros Pine Moon",type:"dark",import:(()=>R(()=>import("./rose-pine-moon.js"),[]))},{id:"slack-dark",displayName:"Slack Dark",type:"dark",import:(()=>R(()=>import("./slack-dark.js"),[]))},{id:"slack-ochin",displayName:"Slack Ochin",type:"light",import:(()=>R(()=>import("./slack-ochin.js"),[]))},{id:"snazzy-light",displayName:"Snazzy Light",type:"light",import:(()=>R(()=>import("./snazzy-light.js"),[]))},{id:"solarized-dark",displayName:"Solarized Dark",type:"dark",import:(()=>R(()=>import("./solarized-dark.js"),[]))},{id:"solarized-light",displayName:"Solarized Light",type:"light",import:(()=>R(()=>import("./solarized-light.js"),[]))},{id:"synthwave-84",displayName:"Synthwave '84",type:"dark",import:(()=>R(()=>import("./synthwave-84.js"),[]))},{id:"tokyo-night",displayName:"Tokyo Night",type:"dark",import:(()=>R(()=>import("./tokyo-night.js"),[]))},{id:"vesper",displayName:"Vesper",type:"dark",import:(()=>R(()=>import("./vesper.js"),[]))},{id:"vitesse-black",displayName:"Vitesse Black",type:"dark",import:(()=>R(()=>import("./vitesse-black.js"),[]))},{id:"vitesse-dark",displayName:"Vitesse Dark",type:"dark",import:(()=>R(()=>import("./vitesse-dark.js"),[]))},{id:"vitesse-light",displayName:"Vitesse Light",type:"light",import:(()=>R(()=>import("./vitesse-light.js"),[]))}],U4=Object.fromEntries(F4.map(n=>[n.id,n.import]));class Fh extends Error{constructor(e){super(e),this.name="ShikiError"}}function z4(){return 2147483648}function H4(){return typeof performance<"u"?performance.now():Date.now()}const W4=(n,e)=>n+(e-n%e)%e;async function q4(n){let e,t;const s={};function i(p){t=p,s.HEAPU8=new Uint8Array(p),s.HEAPU32=new Uint32Array(p)}function r(p,g,b){s.HEAPU8.copyWithin(p,g,g+b)}function o(p){try{return e.grow(p-t.byteLength+65535>>>16),i(e.buffer),1}catch{}}function l(p){const g=s.HEAPU8.length;p=p>>>0;const b=z4();if(p>b)return!1;for(let x=1;x<=4;x*=2){let m=g*(1+.2/x);m=Math.min(m,p+100663296);const w=Math.min(b,W4(Math.max(p,m),65536));if(o(w))return!0}return!1}const a=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function u(p,g,b=1024){const x=g+b;let m=g;for(;p[m]&&!(m>=x);)++m;if(m-g>16&&p.buffer&&a)return a.decode(p.subarray(g,m));let w="";for(;g<m;){let P=p[g++];if(!(P&128)){w+=String.fromCharCode(P);continue}const U=p[g++]&63;if((P&224)===192){w+=String.fromCharCode((P&31)<<6|U);continue}const O=p[g++]&63;if((P&240)===224?P=(P&15)<<12|U<<6|O:P=(P&7)<<18|U<<12|O<<6|p[g++]&63,P<65536)w+=String.fromCharCode(P);else{const A=P-65536;w+=String.fromCharCode(55296|A>>10,56320|A&1023)}}return w}function c(p,g){return p?u(s.HEAPU8,p,g):""}const d={emscripten_get_now:H4,emscripten_memcpy_big:r,emscripten_resize_heap:l,fd_write:()=>0};async function f(){const g=await n({env:d,wasi_snapshot_preview1:d});e=g.memory,i(e.buffer),Object.assign(s,g),s.UTF8ToString=c}return await f(),s}var G4=Object.defineProperty,K4=(n,e,t)=>e in n?G4(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,qt=(n,e,t)=>K4(n,typeof e!="symbol"?e+"":e,t);let Qt=null;function J4(n){throw new Fh(n.UTF8ToString(n.getLastOnigError()))}class dc{constructor(e){qt(this,"utf16Length"),qt(this,"utf8Length"),qt(this,"utf16Value"),qt(this,"utf8Value"),qt(this,"utf16OffsetToUtf8"),qt(this,"utf8OffsetToUtf16");const t=e.length,s=dc._utf8ByteLength(e),i=s!==t,r=i?new Uint32Array(t+1):null;i&&(r[t]=s);const o=i?new Uint32Array(s+1):null;i&&(o[s]=t);const l=new Uint8Array(s);let a=0;for(let u=0;u<t;u++){const c=e.charCodeAt(u);let d=c,f=!1;if(c>=55296&&c<=56319&&u+1<t){const p=e.charCodeAt(u+1);p>=56320&&p<=57343&&(d=(c-55296<<10)+65536|p-56320,f=!0)}i&&(r[u]=a,f&&(r[u+1]=a),d<=127?o[a+0]=u:d<=2047?(o[a+0]=u,o[a+1]=u):d<=65535?(o[a+0]=u,o[a+1]=u,o[a+2]=u):(o[a+0]=u,o[a+1]=u,o[a+2]=u,o[a+3]=u)),d<=127?l[a++]=d:d<=2047?(l[a++]=192|(d&1984)>>>6,l[a++]=128|(d&63)>>>0):d<=65535?(l[a++]=224|(d&61440)>>>12,l[a++]=128|(d&4032)>>>6,l[a++]=128|(d&63)>>>0):(l[a++]=240|(d&1835008)>>>18,l[a++]=128|(d&258048)>>>12,l[a++]=128|(d&4032)>>>6,l[a++]=128|(d&63)>>>0),f&&u++}this.utf16Length=t,this.utf8Length=s,this.utf16Value=e,this.utf8Value=l,this.utf16OffsetToUtf8=r,this.utf8OffsetToUtf16=o}static _utf8ByteLength(e){let t=0;for(let s=0,i=e.length;s<i;s++){const r=e.charCodeAt(s);let o=r,l=!1;if(r>=55296&&r<=56319&&s+1<i){const a=e.charCodeAt(s+1);a>=56320&&a<=57343&&(o=(r-55296<<10)+65536|a-56320,l=!0)}o<=127?t+=1:o<=2047?t+=2:o<=65535?t+=3:t+=4,l&&s++}return t}createString(e){const t=e.omalloc(this.utf8Length);return e.HEAPU8.set(this.utf8Value,t),t}}const fc=class Es{constructor(e){if(qt(this,"id",++Es.LAST_ID),qt(this,"_onigBinding"),qt(this,"content"),qt(this,"utf16Length"),qt(this,"utf8Length"),qt(this,"utf16OffsetToUtf8"),qt(this,"utf8OffsetToUtf16"),qt(this,"ptr"),!Qt)throw new Fh("Must invoke loadWasm first.");this._onigBinding=Qt,this.content=e;const t=new dc(e);this.utf16Length=t.utf16Length,this.utf8Length=t.utf8Length,this.utf16OffsetToUtf8=t.utf16OffsetToUtf8,this.utf8OffsetToUtf16=t.utf8OffsetToUtf16,this.utf8Length<1e4&&!Es._sharedPtrInUse?(Es._sharedPtr||(Es._sharedPtr=Qt.omalloc(1e4)),Es._sharedPtrInUse=!0,Qt.HEAPU8.set(t.utf8Value,Es._sharedPtr),this.ptr=Es._sharedPtr):this.ptr=t.createString(Qt)}convertUtf8OffsetToUtf16(e){return this.utf8OffsetToUtf16?e<0?0:e>this.utf8Length?this.utf16Length:this.utf8OffsetToUtf16[e]:e}convertUtf16OffsetToUtf8(e){return this.utf16OffsetToUtf8?e<0?0:e>this.utf16Length?this.utf8Length:this.utf16OffsetToUtf8[e]:e}dispose(){this.ptr===Es._sharedPtr?Es._sharedPtrInUse=!1:this._onigBinding.ofree(this.ptr)}};qt(fc,"LAST_ID",0);qt(fc,"_sharedPtr",0);qt(fc,"_sharedPtrInUse",!1);let Lb=fc;class Q4{constructor(e){if(qt(this,"_onigBinding"),qt(this,"_ptr"),!Qt)throw new Fh("Must invoke loadWasm first.");const t=[],s=[];for(let l=0,a=e.length;l<a;l++){const u=new dc(e[l]);t[l]=u.createString(Qt),s[l]=u.utf8Length}const i=Qt.omalloc(4*e.length);Qt.HEAPU32.set(t,i/4);const r=Qt.omalloc(4*e.length);Qt.HEAPU32.set(s,r/4);const o=Qt.createOnigScanner(i,r,e.length);for(let l=0,a=e.length;l<a;l++)Qt.ofree(t[l]);Qt.ofree(r),Qt.ofree(i),o===0&&J4(Qt),this._onigBinding=Qt,this._ptr=o}dispose(){this._onigBinding.freeOnigScanner(this._ptr)}findNextMatchSync(e,t,s){let i=0;if(typeof s=="number"&&(i=s),typeof e=="string"){e=new Lb(e);const r=this._findNextMatchSync(e,t,!1,i);return e.dispose(),r}return this._findNextMatchSync(e,t,!1,i)}_findNextMatchSync(e,t,s,i){const r=this._onigBinding,o=r.findNextOnigScannerMatch(this._ptr,e.id,e.ptr,e.utf8Length,e.convertUtf16OffsetToUtf8(t),i);if(o===0)return null;const l=r.HEAPU32;let a=o/4;const u=l[a++],c=l[a++],d=[];for(let f=0;f<c;f++){const p=e.convertUtf8OffsetToUtf16(l[a++]),g=e.convertUtf8OffsetToUtf16(l[a++]);d[f]={start:p,end:g,length:g-p}}return{index:u,captureIndices:d}}}function Y4(n){return typeof n.instantiator=="function"}function X4(n){return typeof n.default=="function"}function Z4(n){return typeof n.data<"u"}function eT(n){return typeof Response<"u"&&n instanceof Response}function tT(n){return typeof ArrayBuffer<"u"&&(n instanceof ArrayBuffer||ArrayBuffer.isView(n))||typeof Buffer<"u"&&Buffer.isBuffer?.(n)||typeof SharedArrayBuffer<"u"&&n instanceof SharedArrayBuffer||typeof Uint32Array<"u"&&n instanceof Uint32Array}let ga;function nT(n){if(ga)return ga;async function e(){Qt=await q4(async t=>{let s=n;return s=await s,typeof s=="function"&&(s=await s(t)),typeof s=="function"&&(s=await s(t)),Y4(s)?s=await s.instantiator(t):X4(s)?s=await s.default(t):(Z4(s)&&(s=s.data),eT(s)?typeof WebAssembly.instantiateStreaming=="function"?s=await sT(s)(t):s=await iT(s)(t):tT(s)?s=await nd(s)(t):s instanceof WebAssembly.Module?s=await nd(s)(t):"default"in s&&s.default instanceof WebAssembly.Module&&(s=await nd(s.default)(t))),"instance"in s&&(s=s.instance),"exports"in s&&(s=s.exports),s})}return ga=e(),ga}function nd(n){return e=>WebAssembly.instantiate(n,e)}function sT(n){return e=>WebAssembly.instantiateStreaming(n,e)}function iT(n){return async e=>{const t=await n.arrayBuffer();return WebAssembly.instantiate(t,e)}}async function rT(n){return n&&await nT(n),{createScanner(e){return new Q4(e.map(t=>typeof t=="string"?t:t.source))},createString(e){return new Lb(e)}}}const oT=V4({langs:B4,themes:U4,engine:()=>rT(R(()=>import("./wasm2.js"),[]))}),Ui=Y(null),sd=Y(!0),Tg=Y(!1);let id=null;function lT(){return{highlighter:Ui,isLoading:sd,isReady:Tg,initHighlighter:async()=>{if(Ui.value)return Ui.value;id||(id=oT({themes:["github-light","github-dark"],langs:["r"]}));try{Ui.value=await id,sd.value=!1,Tg.value=!0,console.log("Shiki highlighter initialized successfully")}catch(t){console.error("Failed to initialize syntax highlighter:",t),sd.value=!1}return Ui.value},highlight:(t,s="r")=>{if(!t)return"<pre><code></code></pre>";if(!Ui.value)return`<pre><code>${Dg(t)}</code></pre>`;try{return Ui.value.codeToHtml(t,{lang:s,theme:"github-light"})}catch(i){return console.error("Highlight error:",i),`<pre><code>${Dg(t)}</code></pre>`}}}}function Dg(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}const aT={class:"flex min-h-screen"},uT={class:"w-64 shrink-0 border-r border-gray-200 p-6 dark:border-gray-800 overflow-y-auto"},cT={class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},dT={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mb-4"},fT={class:"relative mb-4"},hT={key:1,class:"flex items-center justify-center py-8"},pT={key:2,class:"space-y-4"},mT={key:0},gT={class:"space-y-0.5"},vT=["onClick"],yT={class:"font-mono text-xs"},bT={key:1},kT={key:0,class:"px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider dark:text-gray-400 pt-4 pb-2"},xT={class:"space-y-0.5"},_T=["onClick"],wT={class:"font-mono text-xs"},ST={key:2,class:"text-center py-4"},CT={class:"flex-1 pt-10 pb-8 px-10 overflow-y-auto border-l border-gray-100 bg-gray-50/30 dark:border-gray-800 dark:bg-gray-900/20"},AT={key:0,class:"flex items-center justify-center py-12"},ET={key:1,class:"flex h-full items-center justify-center"},TT={key:2,class:"max-w-3xl text-[15px] leading-relaxed"},DT={class:"mb-8"},PT={class:"flex items-center justify-between text-sm tracking-wide text-gray-400 dark:text-gray-500 mb-2"},RT={key:0,class:"font-mono"},OT={class:"text-2xl font-semibold text-gray-900 dark:text-white font-mono leading-tight mb-3"},LT={key:0,class:"text-base text-gray-600 dark:text-gray-400 leading-relaxed"},MT={key:0,class:"mb-5"},IT={class:"relative group"},jT=["innerHTML"],VT={key:2,class:"mb-5"},$T={class:"overflow-hidden rounded border border-gray-200 dark:border-gray-700"},NT={class:"w-full"},BT={class:"divide-y divide-gray-100 dark:divide-gray-800"},FT={class:"px-3 py-2 align-top"},UT={class:"text-sm font-mono font-medium text-gray-900 dark:text-white"},zT={class:"px-3 py-2 text-[15px] text-gray-600 dark:text-gray-400"},HT={key:1},WT={key:3,class:"mb-5"},qT={key:4,class:"mb-5"},GT={class:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1.5"},KT={key:0,class:"mt-2 pl-3 border-l-2 border-gray-200 dark:border-gray-700"},JT={class:"text-xs font-medium text-gray-600 dark:text-gray-400 mb-1"},QT={class:"space-y-2"},YT=["innerHTML"],XT={key:7,class:"mb-5"},ZT={class:"flex flex-wrap gap-1.5"},e5=["onClick"],t5={key:8,class:"mb-5"},n5={class:"flex flex-wrap gap-1.5"},s5={key:9,class:"mb-5"},i5={class:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded px-3 py-2"},r5={key:3,class:"text-center py-12"},o5={class:"text-gray-600 dark:text-gray-400"},l5={class:"font-mono"},a5={__name:"DocsCategoryView",props:{categoryId:{type:String,required:!0}},setup(n){const e=n,t=co(),s=Bl(),{initHighlighter:i,highlight:r,isReady:o}=lT(),l=Y(!0),a=Y(!1),u=Y(null),c=Y([]),d=Y(""),f=Y(null),p=Y(null),g=z(()=>{let O=c.value;if(d.value.trim()){const A=d.value.toLowerCase();O=O.filter(_=>_.name.toLowerCase().includes(A)||_.title&&_.title.toLowerCase().includes(A))}return O}),b=z(()=>g.value.filter(O=>O.is_common===1)),x=z(()=>g.value.filter(O=>O.is_common!==1)),m=async()=>{l.value=!0;try{const A=await(await fetch("/api/docs/categories")).json();A.error||(u.value=A.categories?.find(W=>W.id===parseInt(e.categoryId)));const M=await(await fetch(`/api/docs/functions?category_id=${e.categoryId}`)).json();M.error||(c.value=M.functions||[],!f.value&&c.value.length>0&&(t.query.fn?w(t.query.fn):w(c.value[0].name)))}catch(O){console.error("Failed to load category:",O)}finally{l.value=!1}},w=async O=>{f.value=O,a.value=!0,p.value=null,s.replace({path:t.path,query:{fn:O}});try{const _=await(await fetch(`/api/docs/function/${encodeURIComponent(O)}`)).json();_.error||(p.value=_.function_doc)}catch(A){console.error("Failed to load function:",A)}finally{a.value=!1}};Ie(()=>e.categoryId,()=>{f.value=null,p.value=null,d.value="",m()}),Ie(()=>t.query.fn,O=>{O&&O!==f.value&&w(O)});const P=O=>{if(!O)return"";const A=O.split(`
`),_=[];for(let M=0;M<A.length;M++){const W=A[M],ue=W.trim(),ee=M>0?A[M-1].trim():"";ue.startsWith("#")&&ee&&!ee.startsWith("#")&&_.push(""),_.push(W)}return _.join(`
`)},U=O=>{const A=r(O,"r");return console.log("highlightCode input:",O?.substring(0,50),"output length:",A?.length),A};return kn(async()=>{await i(),m()}),(O,A)=>(v(),k("div",aT,[h("nav",uT,[h("h2",cT,X(u.value?.name||"Documentation"),1),u.value?.description?(v(),k("p",dT,X(u.value.description),1)):q("",!0),h("div",fT,[Ge(h("input",{"onUpdate:modelValue":A[0]||(A[0]=_=>d.value=_),type:"text",placeholder:"Filter...",class:"w-full rounded-md border border-gray-300 bg-white px-3 py-1.5 pl-8 text-sm placeholder-gray-400 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500 dark:border-gray-700 dark:bg-gray-800 dark:text-white dark:placeholder-gray-500"},null,512),[[or,d.value]]),A[1]||(A[1]=h("svg",{class:"absolute left-2.5 top-2 h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))]),l.value?(v(),k("div",hT,[...A[2]||(A[2]=[h("svg",{class:"h-6 w-6 animate-spin text-sky-600",fill:"none",viewBox:"0 0 24 24"},[h("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),h("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):(v(),k("div",pT,[b.value.length>0?(v(),k("div",mT,[A[3]||(A[3]=h("h3",{class:"px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider dark:text-gray-400 pb-2"},"Common",-1)),h("div",gT,[(v(!0),k(xe,null,Ve(b.value,_=>(v(),k("a",{key:_.id,href:"#",onClick:It(M=>w(_.name),["prevent"]),class:"group relative"},[h("span",{class:we(["block rounded-md px-3 py-2 text-sm transition truncate",f.value===_.name?"bg-sky-50 text-sky-700 font-medium dark:bg-sky-900/20 dark:text-sky-400":"text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-800"])},[h("span",yT,X(_.name)+"()",1)],2)],8,vT))),128))])])):q("",!0),x.value.length>0?(v(),k("div",bT,[b.value.length>0?(v(),k("h3",kT,"Other")):q("",!0),h("div",xT,[(v(!0),k(xe,null,Ve(x.value,_=>(v(),k("a",{key:_.id,href:"#",onClick:It(M=>w(_.name),["prevent"]),class:"group relative"},[h("span",{class:we(["block rounded-md px-3 py-2 text-sm transition truncate",f.value===_.name?"bg-sky-50 text-sky-700 font-medium dark:bg-sky-900/20 dark:text-sky-400":"text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-800"])},[h("span",wT,X(_.name)+"()",1)],2)],8,_T))),128))])])):q("",!0),g.value.length===0&&d.value?(v(),k("div",ST,[...A[4]||(A[4]=[h("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"No matches",-1)])])):q("",!0)]))]),h("div",CT,[a.value?(v(),k("div",AT,[...A[5]||(A[5]=[h("svg",{class:"h-8 w-8 animate-spin text-sky-600",fill:"none",viewBox:"0 0 24 24"},[h("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),h("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):!f.value&&!a.value?(v(),k("div",ET,[...A[6]||(A[6]=[uo('<div class="text-center max-w-md" data-v-e2689d0c><svg class="mx-auto h-12 w-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-e2689d0c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" data-v-e2689d0c></path></svg><h3 class="mt-4 text-lg font-medium text-gray-900 dark:text-white" data-v-e2689d0c>Select a function</h3><p class="mt-2 text-sm text-gray-600 dark:text-gray-400" data-v-e2689d0c> Choose a function from the list to view its documentation. </p></div>',1)])])):p.value?(v(),k("div",TT,[h("header",DT,[h("div",PT,[h("span",null,"Function  "+X(u.value?.name||"Documentation"),1),p.value.source_file?(v(),k("span",RT,X(p.value.source_file),1)):q("",!0)]),h("h1",OT,X(p.value.name)+"()",1),p.value.title?(v(),k("p",LT,X(p.value.title),1)):q("",!0)]),p.value.description?(v(),k("section",MT,[A[7]||(A[7]=h("h2",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1.5"},"Description",-1)),C(Fi,{content:p.value.description,class:"text-[15px] text-gray-700 dark:text-gray-300 leading-relaxed"},null,8,["content"])])):q("",!0),p.value.usage?(v(),k("section",{class:"mb-5",key:"usage-"+ut(o)},[A[8]||(A[8]=h("h2",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1.5"},"Usage",-1)),h("div",IT,[h("div",{class:"code-block rounded overflow-x-auto border border-gray-200 dark:border-gray-700",innerHTML:U(p.value.usage)},null,8,jT),C(_i,{value:p.value.usage,variant:"ghost",class:"absolute top-1.5 right-1.5 opacity-0 group-hover:opacity-100 transition-opacity text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},null,8,["value"])])])):q("",!0),p.value.parameters&&p.value.parameters.length>0?(v(),k("section",VT,[A[10]||(A[10]=h("h2",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1.5"},"Arguments",-1)),h("div",$T,[h("table",NT,[A[9]||(A[9]=h("thead",{class:"bg-gray-50 dark:bg-gray-800/50 text-xs text-gray-500 dark:text-gray-400"},[h("tr",null,[h("th",{class:"text-left px-3 py-1.5 font-medium w-28"},"Argument"),h("th",{class:"text-left px-3 py-1.5 font-medium"},"Description")])],-1)),h("tbody",BT,[(v(!0),k(xe,null,Ve(p.value.parameters,_=>(v(),k("tr",{key:_.name,class:"bg-white dark:bg-gray-900"},[h("td",FT,[h("code",UT,X(_.name),1)]),h("td",zT,[_.description?(v(),Ee(Fi,{key:0,content:_.description},null,8,["content"])):(v(),k("span",HT,""))])]))),128))])])])])):q("",!0),p.value.details?(v(),k("section",WT,[A[11]||(A[11]=h("h2",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1.5"},"Details",-1)),C(Fi,{content:p.value.details,class:"text-[15px] text-gray-700 dark:text-gray-300 leading-relaxed"},null,8,["content"])])):q("",!0),p.value.value?(v(),k("section",qT,[A[12]||(A[12]=h("h2",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1.5"},"Returns",-1)),C(Fi,{content:p.value.value,class:"text-[15px] text-gray-700 dark:text-gray-300 leading-relaxed"},null,8,["content"])])):q("",!0),p.value.sections&&p.value.sections.length>0?(v(!0),k(xe,{key:5},Ve(p.value.sections,_=>(v(),k("section",{key:_.id,class:"mb-5"},[h("h2",GT,X(_.title),1),C(Fi,{content:_.content,class:"text-[15px] text-gray-700 dark:text-gray-300 leading-relaxed"},null,8,["content"]),_.subsections&&_.subsections.length>0?(v(),k("div",KT,[(v(!0),k(xe,null,Ve(_.subsections,M=>(v(),k("div",{key:M.title,class:"mb-2 last:mb-0"},[h("h3",JT,X(M.title),1),C(Fi,{content:M.content,class:"text-sm text-gray-600 dark:text-gray-400 leading-relaxed"},null,8,["content"])]))),128))])):q("",!0)]))),128)):q("",!0),p.value.examples&&p.value.examples.length>0?(v(),k("section",{class:"mb-5",key:"examples-"+ut(o)},[A[13]||(A[13]=h("h2",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1.5"},"Examples",-1)),h("div",QT,[(v(!0),k(xe,null,Ve(p.value.examples,(_,M)=>(v(),k("div",{key:M,class:"relative group"},[h("div",{class:"code-block rounded overflow-x-auto border border-gray-200 dark:border-gray-700",innerHTML:U(P(_.content))},null,8,YT),C(_i,{value:_.content,variant:"ghost",class:"absolute top-1.5 right-1.5 opacity-0 group-hover:opacity-100 transition-opacity text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},null,8,["value"])]))),128))])])):q("",!0),p.value.seealso&&p.value.seealso.length>0?(v(),k("section",XT,[A[14]||(A[14]=h("h2",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1.5"},"See also",-1)),h("div",ZT,[(v(!0),k(xe,null,Ve(p.value.seealso,_=>(v(),k("a",{key:_.target,href:"#",onClick:It(M=>w(_.target),["prevent"]),class:"inline-flex items-center px-2 py-0.5 rounded bg-gray-100 dark:bg-gray-800 text-sky-600 dark:text-sky-400 font-mono text-sm hover:bg-gray-200 dark:hover:bg-gray-700 transition"},X(_.link_text||_.target),9,e5))),128))])])):q("",!0),p.value.aliases&&p.value.aliases.length>0?(v(),k("section",t5,[A[15]||(A[15]=h("h2",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1.5"},"Aliases",-1)),h("div",n5,[(v(!0),k(xe,null,Ve(p.value.aliases,_=>(v(),k("span",{key:_,class:"inline-flex items-center px-2 py-0.5 rounded bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 font-mono text-sm"},X(_)+"()",1))),128))])])):q("",!0),p.value.note?(v(),k("section",s5,[h("div",i5,[A[16]||(A[16]=h("h3",{class:"text-xs font-medium text-amber-600 dark:text-amber-400 mb-1"},"Note",-1)),C(Fi,{content:p.value.note,class:"text-[15px] text-amber-700 dark:text-amber-300 leading-relaxed"},null,8,["content"])])])):q("",!0)])):f.value&&!p.value&&!a.value?(v(),k("div",r5,[h("p",o5,[A[17]||(A[17]=fe(" Documentation for ",-1)),h("code",l5,X(f.value),1),A[18]||(A[18]=fe(" not found. ",-1))])])):q("",!0)])]))}},u5=ac(a5,[["__scopeId","data-v-e2689d0c"]]),c5={key:0,class:"px-4 py-5 sm:px-6"},d5={class:"px-4 py-5 sm:p-6"},f5={key:1,class:"px-4 py-4 sm:px-6"},h5={__name:"Card",setup(n){const e=yw(),t=z(()=>{const s=["overflow-hidden","rounded-lg","bg-white","shadow-sm","dark:bg-gray-800/50","dark:shadow-none","dark:outline","dark:-outline-offset-1","dark:outline-white/10"];return(e.header||e.footer)&&s.push("divide-y","divide-gray-200","dark:divide-white/10"),s.join(" ")});return(s,i)=>(v(),k("div",{class:we(t.value)},[s.$slots.header?(v(),k("div",c5,[pt(s.$slots,"header")])):q("",!0),h("div",d5,[pt(s.$slots,"default")]),s.$slots.footer?(v(),k("div",f5,[pt(s.$slots,"footer")])):q("",!0)],2))}},Ye={__name:"Button",props:{variant:{type:String,default:"primary",validator:n=>["primary","secondary","soft"].includes(n)},size:{type:String,default:"md",validator:n=>["xs","sm","md","lg","xl"].includes(n)},rounded:{type:String,default:"md",validator:n=>["sm","md","full"].includes(n)},type:{type:String,default:"button"},href:{type:String,default:null},icon:{type:[Object,Function],default:null},iconPosition:{type:String,default:"left",validator:n=>["left","right"].includes(n)},iconOnly:{type:Boolean,default:!1}},emits:["click"],setup(n,{emit:e}){const t=n,s=e,i=l=>{s("click",l)},r=z(()=>{const l=["font-semibold","focus-visible:outline-2","focus-visible:outline-offset-2"],a={xs:t.iconOnly?"p-2":"px-3 py-2 text-xs",sm:t.iconOnly?"p-2.5":"px-3 py-2 text-sm",md:t.iconOnly?"p-3":"px-3.5 py-2.5 text-sm",lg:t.iconOnly?"p-3":"px-4 py-3 text-sm",xl:t.iconOnly?"p-3.5":"px-4.5 py-3.5 text-sm"};l.push(a[t.size]);const u={sm:"rounded-sm",md:"rounded-md",full:"rounded-full"};return l.push(u[t.rounded]),t.variant==="primary"?l.push("bg-sky-600","text-white","shadow-xs","hover:bg-sky-500","focus-visible:outline-sky-600","dark:bg-sky-500","dark:shadow-none","dark:hover:bg-sky-400","dark:focus-visible:outline-sky-500"):t.variant==="secondary"?l.push("bg-white","text-gray-900","shadow-xs","inset-ring","inset-ring-gray-300","hover:bg-gray-50","dark:bg-white/10","dark:text-white","dark:shadow-none","dark:inset-ring-white/5","dark:hover:bg-white/20"):t.variant==="soft"&&l.push("bg-sky-50","text-sky-600","shadow-xs","hover:bg-sky-100","dark:bg-sky-500/20","dark:text-sky-400","dark:shadow-none","dark:hover:bg-sky-500/30"),t.icon&&!t.iconOnly&&(l.push("inline-flex","items-center"),l.push(t.size==="xl"?"gap-x-2":"gap-x-1.5")),l.join(" ")}),o=z(()=>{const l=[];return t.iconOnly?l.push("size-5"):(l.push("size-5"),t.iconPosition==="left"?l.push("-ml-0.5"):l.push("-mr-0.5")),l.join(" ")});return(l,a)=>(v(),Ee(Nn(n.href?"a":"button"),{href:n.href,type:n.href?void 0:n.type,class:we(r.value),onClick:i},{default:te(()=>[n.icon&&n.iconPosition==="left"?(v(),k("svg",{key:0,viewBox:"0 0 20 20",fill:"currentColor","data-slot":"icon","aria-hidden":"true",class:we(o.value)},[(v(),Ee(Nn(n.icon)))],2)):q("",!0),pt(l.$slots,"default"),n.icon&&n.iconPosition==="right"?(v(),k("svg",{key:1,viewBox:"0 0 20 20",fill:"currentColor","data-slot":"icon","aria-hidden":"true",class:we(o.value)},[(v(),Ee(Nn(n.icon)))],2)):q("",!0)]),_:3},8,["href","type","class"]))}},p5=["for"],m5={key:1,class:"mt-2 flex"},g5={class:"flex shrink-0 items-center rounded-l-md bg-gray-100 px-2 text-base text-gray-500 outline-1 -outline-offset-1 outline-gray-300 sm:text-sm/6 dark:bg-white/5 dark:text-gray-400 dark:outline-white/10 font-mono"},v5=["id","type","value","placeholder","required","disabled","aria-invalid","aria-describedby"],y5={key:2,class:"mt-2"},b5=["id","type","value","placeholder","required","disabled","aria-invalid","aria-describedby"],k5={key:0,viewBox:"0 0 16 16",fill:"currentColor","data-slot":"icon","aria-hidden":"true",class:"pointer-events-none col-start-1 row-start-1 mr-3 size-5 self-center justify-self-end text-red-500 sm:size-4 dark:text-red-400"},x5=["id"],_5=["id"],Ce={__name:"Input",props:{id:{type:String,default:()=>`input-${Math.random().toString(36).substr(2,9)}`},modelValue:{type:[String,Number],default:""},type:{type:String,default:"text"},label:{type:String,default:null},placeholder:{type:String,default:""},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},error:{type:String,default:null},hint:{type:String,default:null},monospace:{type:Boolean,default:!1},prefix:{type:String,default:null}},emits:["update:modelValue","blur"],setup(n){const e=n,t=z(()=>{const i=["block","w-full","rounded-md","bg-white","px-3","py-1.5","text-base","outline-1","-outline-offset-1","placeholder:text-gray-400","focus:outline-2","focus:-outline-offset-2","sm:text-sm/6","dark:bg-white/5","dark:placeholder:text-gray-500"];return e.monospace&&i.push("font-mono"),e.error?i.push("col-start-1","row-start-1","pr-10","pl-3","text-red-900","outline-red-300","placeholder:text-red-300","focus:outline-red-600","sm:pr-9","dark:text-red-400","dark:outline-red-500/50","dark:placeholder:text-red-400/70","dark:focus:outline-red-400"):i.push("text-gray-900","outline-gray-300","focus:outline-sky-600","dark:text-white","dark:outline-white/10","dark:focus:outline-sky-500"),i.join(" ")}),s=z(()=>{const i=["-ml-px","block","w-full","grow","rounded-r-md","bg-white","px-3","py-1.5","text-base","outline-1","-outline-offset-1","placeholder:text-gray-400","focus:outline-2","focus:-outline-offset-2","sm:text-sm/6","dark:bg-white/5","dark:placeholder:text-gray-500"];return e.monospace&&i.push("font-mono"),e.error?i.push("text-red-900","outline-red-300","placeholder:text-red-300","focus:outline-red-600","dark:text-red-400","dark:outline-red-500/50","dark:placeholder:text-red-400/70","dark:focus:outline-red-400"):i.push("text-gray-900","outline-gray-300","focus:outline-sky-600","dark:text-white","dark:outline-white/10","dark:focus:outline-sky-500"),i.join(" ")});return(i,r)=>(v(),k("div",null,[n.label?(v(),k("label",{key:0,for:n.id,class:"block text-sm/6 font-medium text-gray-900 dark:text-white"},X(n.label),9,p5)):q("",!0),n.prefix?(v(),k("div",m5,[h("div",g5,X(n.prefix),1),h("input",{id:n.id,type:n.type,value:n.modelValue,placeholder:n.placeholder,required:n.required,disabled:n.disabled,"aria-invalid":n.error?"true":void 0,"aria-describedby":n.error?`${n.id}-error`:n.hint?`${n.id}-description`:void 0,onInput:r[0]||(r[0]=o=>i.$emit("update:modelValue",o.target.value)),onBlur:r[1]||(r[1]=o=>i.$emit("blur",o)),class:we(s.value)},null,42,v5)])):(v(),k("div",y5,[h("input",{id:n.id,type:n.type,value:n.modelValue,placeholder:n.placeholder,required:n.required,disabled:n.disabled,"aria-invalid":n.error?"true":void 0,"aria-describedby":n.error?`${n.id}-error`:n.hint?`${n.id}-description`:void 0,onInput:r[2]||(r[2]=o=>i.$emit("update:modelValue",o.target.value)),onBlur:r[3]||(r[3]=o=>i.$emit("blur",o)),class:we(t.value)},null,42,b5),n.error?(v(),k("svg",k5,[...r[4]||(r[4]=[h("path",{d:"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14ZM8 4a.75.75 0 0 1 .75.75v3a.75.75 0 0 1-1.5 0v-3A.75.75 0 0 1 8 4Zm0 8a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z","clip-rule":"evenodd","fill-rule":"evenodd"},null,-1)])])):q("",!0)])),n.error?(v(),k("p",{key:3,id:`${n.id}-error`,class:"mt-2 text-sm text-red-600 dark:text-red-400"},X(n.error),9,x5)):q("",!0),n.hint&&!n.error?(v(),k("p",{key:4,id:`${n.id}-description`,class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},X(n.hint),9,_5)):q("",!0)]))}},w5={class:"flex gap-3"},S5={class:"flex h-6 shrink-0 items-center"},C5={class:"group grid size-4 grid-cols-1"},A5=["id","name","checked","aria-describedby"],E5={class:"text-sm/6"},T5=["for"],D5=["id"],Ys={__name:"Checkbox",props:{id:{type:String,required:!0},name:{type:String,default:null},modelValue:{type:Boolean,default:!1},description:{type:String,default:null}},emits:["update:modelValue"],setup(n){return(e,t)=>(v(),k("div",w5,[h("div",S5,[h("div",C5,[h("input",{id:n.id,type:"checkbox",name:n.name,checked:n.modelValue,"aria-describedby":n.description?`${n.id}-description`:void 0,onChange:t[0]||(t[0]=s=>e.$emit("update:modelValue",s.target.checked)),class:"col-start-1 row-start-1 appearance-none rounded-sm border border-gray-300 bg-white checked:border-sky-600 checked:bg-sky-600 indeterminate:border-sky-600 indeterminate:bg-sky-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:checked:bg-gray-100 dark:border-white/10 dark:bg-white/5 dark:checked:border-sky-500 dark:checked:bg-sky-500 dark:indeterminate:border-sky-500 dark:indeterminate:bg-sky-500 dark:focus-visible:outline-sky-500 dark:disabled:border-white/5 dark:disabled:bg-white/10 dark:disabled:checked:bg-white/10 forced-colors:appearance-auto"},null,40,A5),t[1]||(t[1]=h("svg",{viewBox:"0 0 14 14",fill:"none",class:"pointer-events-none col-start-1 row-start-1 size-3.5 self-center justify-self-center stroke-white group-has-disabled:stroke-gray-950/25 dark:group-has-disabled:stroke-white/25"},[h("path",{d:"M3 8L6 11L11 3.5","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"opacity-0 group-has-checked:opacity-100"}),h("path",{d:"M3 7H11","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"opacity-0 group-has-indeterminate:opacity-100"})],-1))])]),h("div",E5,[h("label",{for:n.id,class:"font-medium text-gray-900 dark:text-white"},[pt(e.$slots,"default")],8,T5),n.description?(v(),k("p",{key:0,id:`${n.id}-description`,class:"text-gray-500 dark:text-gray-400"},X(n.description),9,D5)):q("",!0)])]))}};function P5(n,e){return v(),k("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z","clip-rule":"evenodd"})])}function R5(n,e){return v(),k("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"fill-rule":"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z","clip-rule":"evenodd"})])}function O5(n,e){return v(),k("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 0 1 .67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 1 1-.671-1.34l.041-.022ZM12 9a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z","clip-rule":"evenodd"})])}function L5(n,e){return v(),k("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-1.72 6.97a.75.75 0 1 0-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 1 0 1.06 1.06L12 13.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L13.06 12l1.72-1.72a.75.75 0 1 0-1.06-1.06L12 10.94l-1.72-1.72Z","clip-rule":"evenodd"})])}const M5={class:"flex gap-3"},I5={class:"flex-1"},Wn={__name:"Alert",props:{type:{type:String,default:"info",validator:n=>["success","error","warning","info"].includes(n)},title:{type:String,default:null},description:{type:String,default:null},dismissible:{type:Boolean,default:!1}},emits:["dismiss"],setup(n,{emit:e}){const t=n,s=e,i={success:{container:"bg-sky-50 dark:bg-sky-900/20 inset-ring inset-ring-sky-200 dark:inset-ring-sky-800",icon:"text-sky-600 dark:text-sky-400",title:"text-sky-800 dark:text-sky-200",description:"text-sky-700 dark:text-sky-300",dismiss:"text-sky-600 hover:text-sky-700 dark:text-sky-400 dark:hover:text-sky-300"},error:{container:"bg-red-50 dark:bg-red-900/20 inset-ring inset-ring-red-200 dark:inset-ring-red-800",icon:"text-red-600 dark:text-red-400",title:"text-red-800 dark:text-red-200",description:"text-red-700 dark:text-red-300",dismiss:"text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300"},warning:{container:"bg-yellow-50 dark:bg-yellow-900/20 inset-ring inset-ring-yellow-200 dark:inset-ring-yellow-800",icon:"text-yellow-600 dark:text-yellow-400",title:"text-yellow-800 dark:text-yellow-200",description:"text-yellow-700 dark:text-yellow-300",dismiss:"text-yellow-600 hover:text-yellow-700 dark:text-yellow-400 dark:hover:text-yellow-300"},info:{container:"bg-blue-50 dark:bg-blue-900/20 inset-ring inset-ring-blue-200 dark:inset-ring-blue-800",icon:"text-blue-600 dark:text-blue-400",title:"text-blue-800 dark:text-blue-200",description:"text-blue-700 dark:text-blue-300",dismiss:"text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300"}},r=z(()=>`rounded-lg p-4 ${i[t.type].container}`),o=z(()=>`text-sm font-medium ${i[t.type].title}`),l=z(()=>{const d=[`text-sm ${i[t.type].description}`];return t.title&&d.push("mt-1"),d.join(" ")}),a=z(()=>`rounded-md p-1 ${i[t.type].dismiss} focus:outline-2 focus:outline-offset-2`),u=z(()=>({success:P5,error:L5,warning:R5,info:O5})[t.type]),c=()=>{s("dismiss")};return(d,f)=>(v(),k("div",{class:we(r.value),role:"alert"},[h("div",M5,[(v(),Ee(Nn(u.value),{class:we(["h-5 w-5 shrink-0",i[n.type].icon])},null,8,["class"])),h("div",I5,[n.title?(v(),k("p",{key:0,class:we(o.value)},X(n.title),3)):q("",!0),n.description||d.$slots.default?(v(),k("p",{key:1,class:we(l.value)},[pt(d.$slots,"default",{},()=>[fe(X(n.description),1)])],2)):q("",!0)]),n.dismissible?(v(),k("button",{key:0,type:"button",onClick:c,class:we(a.value)},[...f[0]||(f[0]=[h("span",{class:"sr-only"},"Dismiss",-1),h("svg",{viewBox:"0 0 20 20",fill:"currentColor",class:"size-5"},[h("path",{d:"M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z"})],-1)])],2)):q("",!0)])],2))}},j5={class:"flex items-center justify-between"},V5={class:"space-y-6"},$5={key:0,class:"text-xs text-gray-500 dark:text-gray-400 space-y-1"},N5={key:0},B5={class:"font-mono"},F5={key:1},U5={class:"font-mono"},z5={class:"space-y-2"},H5=["onClick"],W5={class:"flex items-start gap-3"},q5={class:"text-2xl mt-0.5"},G5={class:"flex-1"},K5={class:"font-semibold text-gray-900 dark:text-white"},J5={class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},Q5={key:0,class:"text-sky-600 dark:text-sky-400"},Y5={key:1,class:"bg-gray-50 dark:bg-gray-800/50 rounded-lg p-4"},X5={class:"space-y-3"},Z5={class:"list-decimal list-inside mt-1 space-y-1"},eD={class:"flex items-center justify-end gap-3"},tD={__name:"ProjectWizard",props:{mode:{type:String,default:"modal",validator:n=>["modal","page"].includes(n)},projectsRoot:{type:String,default:""}},emits:["close","created"],setup(n,{emit:e}){const t=n,s=e,i=z(()=>t.mode==="modal"),r=z(()=>(t.projectsRoot||"").trim()),o=A=>/^([A-Za-z]:[\\/]|\\\\|\/|~)/.test(A),l=(A,_)=>{if(!A)return _;const M=_.replace(/^[\\/]+/,"");if(!M)return A;if(A.endsWith("/")||A.endsWith("\\"))return`${A}${M}`;const W=A.includes("\\")&&!A.includes("/")?"\\":"/";return`${A}${W}${M}`},a=z(()=>i.value?"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4":"flex w-full justify-center"),u=z(()=>i.value?"max-w-2xl w-full max-h-[90vh] overflow-y-auto":"w-full max-w-2xl shadow-xl"),c=cs({directory:"",name:"",type:"project",sensitive:!1,use_git:!0,use_renv:!1,attach_defaults:!0}),d=z(()=>{const A=c.directory.trim();return A?o(A)||!r.value?A:l(r.value,A):r.value||""}),f=z(()=>{const A=c.directory.trim();return A?r.value.length>0||o(A):!1}),p=z(()=>r.value?`Folder will be created inside ${r.value}`:"The directory where your project will be created"),g=z(()=>r.value?"analytics-project":"my-analysis"),b=[{id:"project",title:"Data Analysis",description:"Full-featured project with notebooks, scripts, data management, and results tracking",icon:""},{id:"course",title:"Course Materials",description:"Teaching materials with slides, assignments, and course documentation",icon:""},{id:"presentation",title:"Presentation",description:"Single talk or presentation with minimal structure",icon:""}],x=Y(!1),m=Y(""),w=Y(!1),P=()=>{i.value&&s("close")},U=()=>{!c.name&&c.directory&&(c.name=c.directory.split(/[-_]/).map(A=>A.charAt(0).toUpperCase()+A.slice(1)).join(" "))},O=async()=>{m.value="",w.value=!1,x.value=!0;try{const A=d.value||c.directory,_=await fetch("/api/project/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_dir:A,project_name:c.name||c.directory,type:c.type,sensitive:c.sensitive,use_git:c.use_git,use_renv:c.use_renv,attach_defaults:c.attach_defaults})}),M=await _.json();_.ok&&M.success?(w.value=!0,M&&!M.path&&(M.path=A),s("created",M),i.value&&setTimeout(()=>{s("close")},3e3)):m.value=M.error||"Failed to create project"}catch(A){m.value="Network error: "+A.message}finally{x.value=!1}};return(A,_)=>(v(),k("div",{class:we(a.value),onClick:It(P,["self"])},[C(h5,{class:we(u.value)},{header:te(()=>[h("div",j5,[_[9]||(_[9]=h("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Create New Project",-1)),i.value?(v(),k("button",{key:0,onClick:_[0]||(_[0]=M=>A.$emit("close")),class:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition"},[..._[8]||(_[8]=[h("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])):q("",!0)])]),footer:te(()=>[h("div",eD,[C(Ye,{variant:"secondary",onClick:_[7]||(_[7]=M=>A.$emit("close"))},{default:te(()=>[..._[23]||(_[23]=[fe(" Cancel ",-1)])]),_:1}),C(Ye,{variant:"primary",onClick:O,disabled:x.value||!c.directory},{default:te(()=>[fe(X(x.value?"Creating...":"Create Project"),1)]),_:1},8,["disabled"])])]),default:te(()=>[h("div",V5,[C(Ce,{modelValue:c.directory,"onUpdate:modelValue":_[1]||(_[1]=M=>c.directory=M),label:"Project Directory",placeholder:g.value,hint:p.value,onInput:U},null,8,["modelValue","placeholder","hint"]),r.value||f.value?(v(),k("div",$5,[r.value?(v(),k("p",N5,[_[10]||(_[10]=fe(" Projects will be created inside ",-1)),h("span",B5,X(r.value),1),_[11]||(_[11]=fe(". ",-1))])):q("",!0),f.value?(v(),k("p",F5,[_[12]||(_[12]=fe(" Full path: ",-1)),h("span",U5,X(d.value),1)])):q("",!0)])):q("",!0),C(Ce,{modelValue:c.name,"onUpdate:modelValue":_[2]||(_[2]=M=>c.name=M),label:"Project Name",placeholder:"My Analysis"},null,8,["modelValue"]),h("div",null,[_[14]||(_[14]=h("label",{class:"block text-sm/6 font-medium text-gray-900 dark:text-white mb-3"}," Project Type ",-1)),h("div",z5,[(v(),k(xe,null,Ve(b,M=>h("div",{key:M.id,onClick:W=>c.type=M.id,class:we(["border-2 rounded-lg p-4 cursor-pointer transition",c.type===M.id?"border-sky-600 bg-sky-50 dark:bg-sky-900/20 dark:border-sky-500":"border-gray-200 dark:border-gray-700 hover:border-sky-300 dark:hover:border-sky-600"])},[h("div",W5,[h("div",q5,X(M.icon),1),h("div",G5,[h("h3",K5,X(M.title),1),h("p",J5,X(M.description),1)]),c.type===M.id?(v(),k("div",Q5,[..._[13]||(_[13]=[h("svg",{class:"h-6 w-6",fill:"currentColor",viewBox:"0 0 20 20"},[h("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1)])])):q("",!0)])],10,H5)),64))])]),c.type==="project"?(v(),k("div",Y5,[C(Ys,{modelValue:c.sensitive,"onUpdate:modelValue":_[3]||(_[3]=M=>c.sensitive=M),id:"sensitive",description:"Creates separate public/private directories for inputs, reference materials, and outputs. Recommended for PHI, PII, or IRB-restricted data."},{default:te(()=>[..._[15]||(_[15]=[fe(" Privacy-first mode ",-1)])]),_:1},8,["modelValue"])])):q("",!0),h("div",X5,[C(Ys,{modelValue:c.use_git,"onUpdate:modelValue":_[4]||(_[4]=M=>c.use_git=M),id:"use_git"},{default:te(()=>[..._[16]||(_[16]=[fe(" Initialize git repository ",-1)])]),_:1},8,["modelValue"]),C(Ys,{modelValue:c.use_renv,"onUpdate:modelValue":_[5]||(_[5]=M=>c.use_renv=M),id:"use_renv"},{default:te(()=>[..._[17]||(_[17]=[fe(" Enable renv for package management ",-1)])]),_:1},8,["modelValue"]),C(Ys,{modelValue:c.attach_defaults,"onUpdate:modelValue":_[6]||(_[6]=M=>c.attach_defaults=M),id:"attach_defaults"},{default:te(()=>[..._[18]||(_[18]=[fe(" Auto-load common packages (dplyr, tidyr, ggplot2) ",-1)])]),_:1},8,["modelValue"])]),m.value?(v(),Ee(Wn,{key:2,type:"error",description:m.value},null,8,["description"])):q("",!0),w.value?(v(),Ee(Wn,{key:3,type:"success",title:"Project created successfully!"},{default:te(()=>[_[22]||(_[22]=h("p",{class:"mt-2"},"Next steps:",-1)),h("ol",Z5,[h("li",null,"cd "+X(d.value),1),_[19]||(_[19]=h("li",null,"R",-1)),_[20]||(_[20]=h("li",null,"library(framework)",-1)),_[21]||(_[21]=h("li",null,"scaffold()",-1))])]),_:1})):q("",!0)])]),_:1},8,["class"])],2))}},nD={class:"flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-sky-500 to-sky-600 shadow-lg shadow-sky-500/20"},sD={key:0,class:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},iD={key:1,class:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},rD={key:2,class:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},oD={__name:"ProjectTypeIcon",props:{type:{type:String,required:!0,validator:n=>["project","course","presentation"].includes(n)}},setup(n){return(e,t)=>(v(),k("div",nD,[n.type==="project"?(v(),k("svg",sD,[...t[0]||(t[0]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)])])):n.type==="course"?(v(),k("svg",iD,[...t[1]||(t[1]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"},null,-1)])])):(v(),k("svg",rD,[...t[2]||(t[2]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"},null,-1)])]))]))}},lD={class:"flex items-center gap-2 text-xs text-zinc-600 dark:text-zinc-400"},aD={class:"truncate"},uD={__name:"ProjectAuthor",props:{author:{type:Object,required:!0}},setup(n){return(e,t)=>(v(),k("div",lD,[t[1]||(t[1]=h("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),h("span",null,X(n.author.author),1),n.author.author_email?(v(),k(xe,{key:0},[t[0]||(t[0]=h("span",{class:"text-zinc-400 dark:text-zinc-500"},"",-1)),h("span",aD,X(n.author.author_email),1)],64)):q("",!0)]))}},cD={class:"flex items-center gap-2 text-xs text-zinc-500 dark:text-zinc-500"},dD={__name:"ProjectCreatedDate",props:{date:{type:String,required:!0}},setup(n){return(e,t)=>(v(),k("div",cD,[t[0]||(t[0]=h("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),h("span",null,"Created "+X(n.date),1)]))}},hc={__name:"Badge",props:{variant:{type:String,default:"gray",validator:n=>["gray","red","yellow","green","blue","indigo","purple","pink","sky"].includes(n)},pill:{type:Boolean,default:!1},dot:{type:Boolean,default:!1}},setup(n){const e=n,t=z(()=>{const i=["inline-flex","items-center","px-2","py-1","text-xs","font-medium","inset-ring"];i.push(e.pill?"rounded-full":"rounded-md"),e.dot&&i.push("gap-x-1.5");const o={gray:{bg:"bg-gray-50",text:"text-gray-600",ring:"inset-ring-gray-500/10",darkBg:"dark:bg-gray-400/10",darkText:e.dot?"dark:text-gray-200":"dark:text-gray-400",darkRing:e.dot?"dark:inset-ring-white/10":"dark:inset-ring-gray-400/20"},red:{bg:"bg-red-50",text:"text-red-700",ring:"inset-ring-red-600/10",darkBg:"dark:bg-red-400/10",darkText:"dark:text-red-400",darkRing:"dark:inset-ring-red-400/20"},yellow:{bg:"bg-yellow-50",text:"text-yellow-800",ring:"inset-ring-yellow-600/20",darkBg:"dark:bg-yellow-400/10",darkText:"dark:text-yellow-500",darkRing:"dark:inset-ring-yellow-400/20"},green:{bg:"bg-green-50",text:"text-green-700",ring:"inset-ring-green-600/20",darkBg:"dark:bg-green-400/10",darkText:"dark:text-green-400",darkRing:"dark:inset-ring-green-500/20"},sky:{bg:"bg-sky-50",text:"text-sky-700",ring:"inset-ring-sky-600/20",darkBg:"dark:bg-sky-400/10",darkText:"dark:text-sky-400",darkRing:"dark:inset-ring-sky-500/20"},blue:{bg:"bg-blue-50",text:"text-blue-700",ring:"inset-ring-blue-700/10",darkBg:"dark:bg-blue-400/10",darkText:"dark:text-blue-400",darkRing:"dark:inset-ring-blue-400/30"},indigo:{bg:"bg-indigo-50",text:"text-indigo-700",ring:"inset-ring-indigo-700/10",darkBg:"dark:bg-indigo-400/10",darkText:"dark:text-indigo-400",darkRing:"dark:inset-ring-indigo-400/30"},purple:{bg:"bg-purple-50",text:"text-purple-700",ring:"inset-ring-purple-700/10",darkBg:"dark:bg-purple-400/10",darkText:"dark:text-purple-400",darkRing:"dark:inset-ring-purple-400/30"},pink:{bg:"bg-pink-50",text:"text-pink-700",ring:"inset-ring-pink-700/10",darkBg:"dark:bg-pink-400/10",darkText:"dark:text-pink-400",darkRing:"dark:inset-ring-pink-400/20"}}[e.variant];return e.dot?i.push("text-gray-900","inset-ring-gray-200","dark:text-white","dark:inset-ring-white/10"):i.push(o.bg,o.text,o.ring,o.darkBg,o.darkText,o.darkRing),i.join(" ")}),s=z(()=>`size-1.5 ${{gray:"fill-gray-500 dark:fill-gray-400",red:"fill-red-500 dark:fill-red-400",yellow:"fill-yellow-500 dark:fill-yellow-400",green:"fill-green-500 dark:fill-green-400",sky:"fill-sky-500 dark:fill-sky-400",blue:"fill-blue-500 dark:fill-blue-400",indigo:"fill-indigo-500 dark:fill-indigo-400",purple:"fill-purple-500 dark:fill-purple-400",pink:"fill-pink-500 dark:fill-pink-400"}[e.variant]}`);return(i,r)=>(v(),k("span",{class:we(t.value)},[n.dot?(v(),k("svg",{key:0,viewBox:"0 0 6 6","aria-hidden":"true",class:we(s.value)},[...r[0]||(r[0]=[h("circle",{r:"3",cx:"3",cy:"3"},null,-1)])],2)):q("",!0),pt(i.$slots,"default")],2))}},fD={class:"group relative overflow-hidden rounded-2xl border border-zinc-200 bg-white p-6 shadow-sm transition-all duration-300 hover:shadow-xl hover:shadow-zinc-900/5 dark:border-zinc-800 dark:bg-zinc-900 dark:hover:shadow-sky-500/5"},hD={class:"relative"},pD={class:"flex items-start justify-between"},mD={class:"flex-1"},gD={class:"flex items-center gap-3"},vD={class:"mt-4 text-xl font-bold text-zinc-900 dark:text-white"},yD={class:"mt-2 text-sm text-zinc-600 dark:text-zinc-400 font-mono truncate"},bD={class:"mt-6 flex gap-2"},kD={__name:"ProjectCard",props:{project:{type:Object,required:!0},typeLabel:{type:String,required:!0}},emits:["view","details"],setup(n){return(e,t)=>(v(),k("div",fD,[t[4]||(t[4]=h("div",{class:"absolute -right-6 -top-6 h-24 w-24 rounded-full bg-gradient-to-br from-sky-500/10 to-sky-600/10 blur-2xl transition-all duration-300 group-hover:scale-150"},null,-1)),h("div",hD,[h("div",pD,[h("div",mD,[h("div",gD,[C(oD,{type:n.project.type},null,8,["type"]),C(hc,{variant:"sky"},{default:te(()=>[fe(X(n.typeLabel),1)]),_:1})]),h("h3",vD,X(n.project.name),1),h("p",yD,X(n.project.path),1),n.project.author?(v(),Ee(uD,{key:0,author:n.project,class:"mt-3"},null,8,["author"])):q("",!0),C(dD,{date:n.project.created,class:"mt-3"},null,8,["date"])])]),h("div",bD,[C(Ye,{variant:"primary",size:"md",onClick:t[0]||(t[0]=s=>e.$emit("view",n.project)),class:"flex-1"},{default:te(()=>[...t[2]||(t[2]=[fe(" View Project ",-1)])]),_:1}),C(Ye,{variant:"secondary",size:"md",onClick:t[1]||(t[1]=s=>e.$emit("details",n.project)),class:"flex-1"},{default:te(()=>[...t[3]||(t[3]=[fe(" See More ",-1)])]),_:1})])])]))}},xD={class:"flex items-start justify-between"},_D={class:"text-3xl font-bold tracking-tight text-gray-900 dark:text-white"},wD={key:0,class:"mt-2 text-sm text-gray-600 dark:text-gray-400"},SD={key:0},po={__name:"PageHeader",props:{title:{type:String,required:!0},description:{type:String,default:null}},setup(n){return(e,t)=>(v(),k("div",xD,[h("div",null,[h("h1",_D,X(n.title),1),n.description?(v(),k("p",wD,X(n.description),1)):q("",!0)]),e.$slots.actions?(v(),k("div",SD,[pt(e.$slots,"actions")])):q("",!0)]))}},CD={key:0,class:"relative z-50"},AD={class:"fixed inset-0 z-10 overflow-y-auto"},ED={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},TD=["aria-labelledby"],DD=["id"],PD={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},RD={__name:"Modal",props:{modelValue:{type:Boolean,default:!1},title:{type:String,default:null},description:{type:String,default:null},icon:{type:String,default:null,validator:n=>["success","error","warning","info"].includes(n)},size:{type:String,default:"md",validator:n=>["sm","md","lg","xl"].includes(n)},variant:{type:String,default:"centered",validator:n=>["centered","side-icon","left"].includes(n)},closeOnBackdrop:{type:Boolean,default:!0}},emits:["update:modelValue","close"],setup(n,{expose:e,emit:t}){const s=n,i=t,r=z(()=>`modal-title-${Math.random().toString(36).substr(2,9)}`),o={sm:"sm:max-w-sm",md:"sm:max-w-lg",lg:"sm:max-w-2xl",xl:"sm:max-w-4xl"},l=z(()=>["relative","transform","overflow-hidden","rounded-lg","bg-white","px-4","pt-5","pb-4","text-left","shadow-xl","transition-all","sm:my-8","sm:w-full","sm:p-6","dark:bg-gray-800","dark:outline","dark:-outline-offset-1","dark:outline-white/10",o[s.size]].join(" ")),a=z(()=>{const m=["flex","items-center","justify-center","rounded-full"];s.variant==="centered"?m.push("mx-auto","size-12"):m.push("shrink-0","sm:mx-0","sm:size-10");const w={success:"bg-sky-100 text-sky-600 dark:bg-sky-500/10 dark:text-sky-400",error:"bg-red-100 text-red-600 dark:bg-red-500/10 dark:text-red-400",warning:"bg-yellow-100 text-yellow-600 dark:bg-yellow-500/10 dark:text-yellow-400",info:"bg-blue-100 text-blue-600 dark:bg-blue-500/10 dark:text-blue-400"};return s.icon&&m.push(w[s.icon]),m.join(" ")}),u=z(()=>{const m=[];return s.variant==="centered"?m.push("mt-3","text-center","sm:mt-5"):s.variant==="left"?m.push("text-left"):m.push("mt-3","text-center","sm:mt-0","sm:ml-4","sm:text-left"),s.variant==="side-icon"&&(s.icon||s.$slots.icon)&&m.push("sm:flex","sm:items-start"),m.join(" ")}),c=z(()=>s.variant==="left"?"text-lg font-bold text-gray-900 dark:text-white mb-4":"text-base font-semibold text-gray-900 dark:text-white"),d=z(()=>(s.variant==="centered","mt-2")),f=z(()=>s.variant==="left"?"mt-6 pt-4 border-t border-gray-200 dark:border-gray-700 flex gap-3 justify-between":s.variant==="centered"?"mt-5 sm:mt-6 flex gap-3 justify-end":"mt-5 sm:mt-4 flex gap-3 justify-end"),p=z(()=>s.icon==="success"?{template:`
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="m4.5 12.75 6 6 9-13.5" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      `}:s.icon==="error"||s.icon==="warning"?{template:`
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      `}:s.icon==="info"?{template:`
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      `}:null),g=()=>{s.closeOnBackdrop&&x()},b=m=>{m.key==="Escape"&&s.modelValue&&x()},x=()=>{i("update:modelValue",!1),i("close")};return kn(()=>{window.addEventListener("keydown",b)}),ao(()=>{window.removeEventListener("keydown",b)}),e({close:x}),(m,w)=>(v(),Ee(Yv,{to:"body"},[C(Ah,{name:"modal"},{default:te(()=>[n.modelValue?(v(),k("div",CD,[h("div",{class:"fixed inset-0 bg-gray-500/75 transition-opacity dark:bg-gray-900/50",onClick:g}),h("div",AD,[h("div",ED,[h("div",{class:we(l.value),role:"dialog","aria-modal":"true","aria-labelledby":r.value},[m.$slots.icon||n.icon?(v(),k("div",{key:0,class:we(a.value)},[pt(m.$slots,"icon",{},()=>[n.icon?(v(),Ee(Nn(p.value),{key:0,class:"size-6"})):q("",!0)],!0)],2)):q("",!0),h("div",{class:we(u.value)},[n.title?(v(),k("h3",{key:0,id:r.value,class:we(c.value)},X(n.title),11,DD)):q("",!0),n.description||m.$slots.default?(v(),k("div",{key:1,class:we(d.value)},[n.description?(v(),k("p",PD,X(n.description),1)):pt(m.$slots,"default",{key:1},void 0,!0)],2)):q("",!0)],2),m.$slots.actions?(v(),k("div",{key:1,class:we(f.value)},[pt(m.$slots,"actions",{},void 0,!0)],2)):q("",!0)],10,TD)])])])):q("",!0)]),_:3})]))}},lr=ac(RD,[["__scopeId","data-v-2e078ad9"]]),OD={class:"flex flex-col gap-3 rounded-2xl border border-zinc-200 bg-white p-5 shadow-sm dark:border-zinc-800 dark:bg-zinc-900 sm:flex-row sm:items-center sm:justify-between"},LD={class:"min-w-0"},MD={class:"text-sm font-medium text-zinc-700 dark:text-zinc-200"},ID={class:"mt-1 font-mono text-sm text-zinc-600 dark:text-zinc-400 truncate"},jD={class:"flex items-center gap-2"},VD={__name:"InfoCard",props:{label:{type:String,required:!0},value:{type:String,required:!0},copyable:{type:Boolean,default:!1},copyMessage:{type:String,default:"Copied!"}},setup(n){return(e,t)=>(v(),k("div",OD,[h("div",LD,[h("p",MD,X(n.label),1),h("p",ID,X(n.value),1)]),h("div",jD,[n.copyable?(v(),Ee(_i,{key:0,value:n.value,variant:"ghost","show-label":"","success-message":n.copyMessage},null,8,["value","success-message"])):q("",!0),pt(e.$slots,"actions")])]))}},$D={class:"mx-auto max-w-5xl p-10"},ND={class:"flex gap-3"},BD={key:1,class:"mt-10 grid gap-6 sm:grid-cols-2"},FD={key:2,class:"mt-12 overflow-hidden rounded-3xl bg-gradient-to-br from-sky-600 via-sky-500 to-teal-500 p-12 shadow-2xl shadow-sky-500/20"},UD={class:"space-y-4"},zD={key:0,class:"mt-2 text-sm text-red-600 dark:text-red-400"},HD={class:"flex gap-3 justify-end"},WD={key:0,class:"space-y-6"},qD={class:"text-lg font-semibold text-zinc-900 dark:text-white mb-3"},GD={class:"grid gap-4"},KD={class:"text-sm text-zinc-600 dark:text-zinc-400 font-mono bg-zinc-50 dark:bg-zinc-800 px-3 py-2 rounded-lg"},JD={key:0,class:"grid grid-cols-2 gap-4"},QD={class:"text-sm text-zinc-600 dark:text-zinc-400"},YD={key:0},XD={class:"text-sm text-zinc-600 dark:text-zinc-400"},ZD={class:"text-sm text-zinc-600 dark:text-zinc-400"},e3={class:"flex gap-3 justify-end"},t3={__name:"ProjectsView",setup(n){const e=Bl(),t=co(),s=Y(!1),i=Y(!1),r=Y(!1),o=Y(""),l=Y(""),a=Y(!1),u=Y(null),c=Y({projects:[]}),d=Y(""),f=Y(null),p=A=>{if(!A)return"Unknown";const _=f.value?.project_types?.[A]?.label;return _||A.split("_").map(M=>M.charAt(0).toUpperCase()+M.slice(1)).join(" ")},g=async()=>{try{const _=await(await fetch("/api/settings/get")).json();c.value.projects=_.projects||[],d.value=_.global?.projects_root&&_.global.projects_root!==""?_.global.projects_root:""}catch(A){console.error("Failed to load settings:",A)}},b=()=>{t.path==="/projects/new"?s.value=!0:e.push("/projects/new")},x=()=>{s.value=!1,t.path==="/projects/new"&&e.push("/projects")},m=A=>{s.value=!1,g(),A?.id?e.push(`/project/${A.id}`):e.push("/projects")},w=()=>{i.value=!1,o.value="",l.value=""},P=A=>{u.value=A,r.value=!0},U=async()=>{l.value="",a.value=!0;try{const A=await fetch("/api/project/import",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_dir:o.value})}),_=await A.text();if(!_){l.value="Server returned empty response",a.value=!1;return}const M=JSON.parse(_);A.ok?(w(),g()):l.value=M.error||"Failed to import project"}catch(A){l.value="Network error: "+A.message}finally{a.value=!1}},O=async()=>{try{const _=await(await fetch("/api/settings-catalog")).json();_.error||(f.value=_)}catch(A){console.error("Failed to load settings catalog:",A)}};return kn(()=>{g(),O(),s.value=t.path==="/projects/new"}),Ie(()=>t.path,A=>{s.value=A==="/projects/new"},{immediate:!0}),(A,_)=>(v(),k("div",$D,[C(po,{title:"Your Projects",description:"Framework projects you've created."},{actions:te(()=>[h("div",ND,[C(Ye,{size:"lg",variant:"secondary",onClick:_[0]||(_[0]=M=>i.value=!0)},{default:te(()=>[..._[7]||(_[7]=[fe(" Import Project ",-1)])]),_:1}),C(Ye,{size:"lg",onClick:b},{default:te(()=>[..._[8]||(_[8]=[fe(" New Project ",-1)])]),_:1})])]),_:1}),d.value?(v(),Ee(VD,{key:0,class:"mt-6",label:"Projects Root",value:d.value,copyable:"","copy-message":"Root path copied"},{actions:te(()=>[C(Ye,{size:"sm",variant:"secondary",onClick:_[1]||(_[1]=M=>ut(e).push("/settings"))},{default:te(()=>[..._[9]||(_[9]=[fe(" Edit ",-1)])]),_:1})]),_:1},8,["value"])):q("",!0),c.value.projects&&c.value.projects.length>0?(v(),k("div",BD,[(v(!0),k(xe,null,Ve(c.value.projects,(M,W)=>(v(),Ee(kD,{key:W,project:M,"type-label":p(M.type),onView:ue=>A.$router.push(`/project/${M.id}`),onDetails:P},null,8,["project","type-label","onView"]))),128))])):(v(),k("div",FD,[h("div",{class:"relative"},[_[12]||(_[12]=h("div",{class:"absolute -right-10 -top-10 h-40 w-40 rounded-full bg-white/10 blur-3xl"},null,-1)),_[13]||(_[13]=h("div",{class:"absolute -bottom-10 -left-10 h-40 w-40 rounded-full bg-white/10 blur-3xl"},null,-1)),h("div",{class:"relative text-center"},[_[11]||(_[11]=uo('<div class="mx-auto flex h-16 w-16 items-center justify-center rounded-2xl bg-white/20 backdrop-blur-sm"><svg class="h-8 w-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg></div><h2 class="mt-6 text-3xl font-bold text-white">Ready to start?</h2><p class="mt-3 text-lg text-sky-50"> Create a new Framework project with a sensible structure and best practices built-in. </p>',3)),h("button",{onClick:b,class:"mt-8 inline-flex items-center gap-2 rounded-xl bg-white px-6 py-3 text-base font-semibold text-sky-600 shadow-xl transition-all duration-200 hover:scale-105 hover:shadow-2xl focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-white"},[..._[10]||(_[10]=[h("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),fe(" Create Your First Project ",-1)])])])])])),s.value?(v(),Ee(tD,{key:3,"projects-root":d.value,onClose:x,onCreated:m},null,8,["projects-root"])):q("",!0),C(lr,{modelValue:i.value,"onUpdate:modelValue":_[3]||(_[3]=M=>i.value=M),title:"Import Existing Project",size:"md"},{actions:te(()=>[h("div",HD,[C(Ye,{variant:"secondary",onClick:w},{default:te(()=>[..._[17]||(_[17]=[fe(" Cancel ",-1)])]),_:1}),C(Ye,{variant:"primary",onClick:U,disabled:!o.value||a.value},{default:te(()=>[fe(X(a.value?"Importing...":"Import"),1)]),_:1},8,["disabled"])])]),default:te(()=>[h("div",UD,[_[16]||(_[16]=h("p",{class:"text-sm text-zinc-600 dark:text-zinc-400"}," Import an existing Framework project that isn't in your registry yet. ",-1)),h("div",null,[_[14]||(_[14]=h("label",{for:"import-path",class:"block text-sm font-medium text-zinc-900 dark:text-white mb-2"}," Project Directory Path ",-1)),Ge(h("input",{id:"import-path","onUpdate:modelValue":_[2]||(_[2]=M=>o.value=M),type:"text",placeholder:"/Users/you/projects/my-framework-project",class:we(["block w-full rounded-lg border-0 px-4 py-2.5 text-zinc-900 shadow-sm ring-1 ring-inset ring-zinc-300 placeholder:text-zinc-400 focus:ring-2 focus:ring-inset focus:ring-sky-600 dark:bg-zinc-800 dark:text-white dark:ring-zinc-700 dark:placeholder:text-zinc-500 dark:focus:ring-sky-500 sm:text-sm sm:leading-6 font-mono",{"ring-red-500 dark:ring-red-500":l.value}])},null,2),[[or,o.value]]),_[15]||(_[15]=h("p",{class:"mt-2 text-xs text-zinc-500 dark:text-zinc-500"}," Enter the full path to the Framework project directory ",-1)),l.value?(v(),k("p",zD,X(l.value),1)):q("",!0)])])]),_:1},8,["modelValue"]),C(lr,{modelValue:r.value,"onUpdate:modelValue":_[6]||(_[6]=M=>r.value=M),title:"Project Details",size:"lg"},{actions:te(()=>[h("div",e3,[C(Ye,{variant:"secondary",onClick:_[4]||(_[4]=M=>r.value=!1)},{default:te(()=>[..._[22]||(_[22]=[fe(" Close ",-1)])]),_:1}),C(Ye,{variant:"primary",onClick:_[5]||(_[5]=M=>{A.$router.push(`/project/${u.value.id}`),r.value=!1})},{default:te(()=>[..._[23]||(_[23]=[fe(" View Full Details ",-1)])]),_:1})])]),default:te(()=>[u.value?(v(),k("div",WD,[h("div",null,[h("h3",qD,X(u.value.name),1),C(hc,{variant:"sky",class:"mb-4"},{default:te(()=>[fe(X(u.value.type),1)]),_:1})]),h("div",GD,[h("div",null,[_[18]||(_[18]=h("label",{class:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1"}," Location ",-1)),h("p",KD,X(u.value.path),1)]),u.value.author?(v(),k("div",JD,[h("div",null,[_[19]||(_[19]=h("label",{class:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1"}," Author ",-1)),h("p",QD,X(u.value.author),1)]),u.value.author_email?(v(),k("div",YD,[_[20]||(_[20]=h("label",{class:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1"}," Email ",-1)),h("p",XD,X(u.value.author_email),1)])):q("",!0)])):q("",!0),h("div",null,[_[21]||(_[21]=h("label",{class:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1"}," Created ",-1)),h("p",ZD,X(u.value.created),1)])])])):q("",!0)]),_:1},8,["modelValue"])]))}},n3=["for"],s3={class:"mt-2 grid grid-cols-1"},i3=["id","value"],r3={key:1,class:"mt-2 text-sm text-gray-500 dark:text-gray-400"},pn={__name:"Select",props:{id:{type:String,default:()=>`select-${Math.random().toString(36).substr(2,9)}`},modelValue:{type:[String,Number],default:""},label:{type:String,default:null},hint:{type:String,default:null}},emits:["update:modelValue"],setup(n){return(e,t)=>(v(),k("div",null,[n.label?(v(),k("label",{key:0,for:n.id,class:"block text-sm/6 font-medium text-gray-900 dark:text-white"},X(n.label),9,n3)):q("",!0),h("div",s3,[h("select",{id:n.id,value:n.modelValue,onChange:t[0]||(t[0]=s=>e.$emit("update:modelValue",s.target.value)),class:"col-start-1 row-start-1 w-full appearance-none rounded-md bg-white py-1.5 pr-8 pl-3 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 focus-visible:outline-2 focus-visible:-outline-offset-2 focus-visible:outline-sky-600 sm:text-sm/6 dark:bg-white/5 dark:text-white dark:outline-white/10 dark:*:bg-gray-800 dark:focus-visible:outline-sky-500"},[pt(e.$slots,"default")],40,i3),t[1]||(t[1]=h("svg",{viewBox:"0 0 16 16",fill:"currentColor","data-slot":"icon","aria-hidden":"true",class:"pointer-events-none col-start-1 row-start-1 mr-2 size-5 self-center justify-self-end text-gray-500 sm:size-4 dark:text-gray-400"},[h("path",{d:"M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z","clip-rule":"evenodd","fill-rule":"evenodd"})],-1))]),n.hint?(v(),k("p",r3,X(n.hint),1)):q("",!0)]))}},o3={class:"flex items-center gap-3"},l3=["id","name","checked","disabled","aria-label"],a3={key:0,class:"text-sm/6"},u3=["for"],c3=["id"],Qe={__name:"Toggle",props:{id:{type:String,default:()=>`toggle-${Math.random().toString(36).substr(2,9)}`},name:{type:String,default:null},modelValue:{type:Boolean,default:!1},label:{type:String,default:null},description:{type:String,default:null},ariaLabel:{type:String,default:null},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(n,{emit:e}){const t=n,s=e,i=r=>{if(!t.disabled){const o=r.target.checked;s("update:modelValue",o),s("change",o)}};return(r,o)=>(v(),k("div",o3,[h("div",{class:we(["group relative inline-flex w-11 shrink-0 rounded-full p-0.5 inset-ring inset-ring-gray-900/5 outline-offset-2 transition-colors duration-200 ease-in-out dark:inset-ring-white/10",[n.modelValue?"bg-sky-600 outline-sky-600 dark:bg-sky-500 dark:outline-sky-500":"bg-gray-200 outline-sky-600 dark:bg-white/5 dark:outline-sky-500",n.disabled?"opacity-50 cursor-not-allowed":"cursor-pointer"]])},[h("span",{class:we(["size-5 rounded-full bg-white shadow-xs ring-1 ring-gray-900/5 transition-transform duration-200 ease-in-out",{"translate-x-5":n.modelValue}])},null,2),h("input",{id:n.id,type:"checkbox",name:n.name,checked:n.modelValue,disabled:n.disabled,"aria-label":n.ariaLabel||n.label,class:"absolute inset-0 appearance-none focus:outline-hidden cursor-pointer disabled:cursor-not-allowed",onChange:i},null,40,l3)],2),n.label||n.description?(v(),k("div",a3,[n.label?(v(),k("label",{key:0,for:n.id,class:we(["font-medium text-gray-900 cursor-pointer dark:text-white",{"cursor-not-allowed opacity-50":n.disabled}])},X(n.label),11,u3)):q("",!0),n.description?(v(),k("p",{key:1,id:`${n.id}-description`,class:"text-gray-500 dark:text-gray-400"},X(n.description),9,c3)):q("",!0)])):q("",!0)]))}},d3={class:"flex items-center"},f3=["id","name","value","checked"],h3=["for"],va={__name:"Radio",props:{id:{type:String,required:!0},name:{type:String,required:!0},value:{type:[String,Number,Boolean],required:!0},modelValue:{type:[String,Number,Boolean],default:null}},emits:["update:modelValue"],setup(n){return(e,t)=>(v(),k("div",d3,[h("input",{id:n.id,type:"radio",name:n.name,value:n.value,checked:n.modelValue===n.value,onChange:t[0]||(t[0]=s=>e.$emit("update:modelValue",n.value)),class:"relative size-4 appearance-none rounded-full border border-gray-300 bg-white before:absolute before:inset-1 before:rounded-full before:bg-white not-checked:before:hidden checked:border-sky-600 checked:bg-sky-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:before:bg-gray-400 dark:border-white/10 dark:bg-white/5 dark:checked:border-sky-500 dark:checked:bg-sky-500 dark:focus-visible:outline-sky-500 dark:disabled:border-white/5 dark:disabled:bg-white/10 dark:disabled:before:bg-white/20 forced-colors:appearance-auto forced-colors:before:hidden"},null,40,f3),h("label",{for:n.id,class:"ml-3 block text-sm/6 font-medium text-gray-900 dark:text-white"},[pt(e.$slots,"default")],8,h3)]))}},p3={class:"text-sm/6 font-semibold text-gray-900 dark:text-white"},m3={key:0,class:"mt-1 text-sm/6 text-gray-600 dark:text-gray-400"},g3={class:"mt-6 space-y-6"},v3={__name:"RadioGroup",props:{legend:{type:String,required:!0},description:{type:String,default:null}},setup(n){return(e,t)=>(v(),k("fieldset",null,[h("legend",p3,X(n.legend),1),n.description?(v(),k("p",m3,X(n.description),1)):q("",!0),h("div",g3,[pt(e.$slots,"default")])]))}},y3={class:"space-y-4"},b3={class:"flex items-start gap-4"},k3={class:"flex-1"},x3=["onClick"],Zi={__name:"Repeater",props:{modelValue:{type:Array,default:()=>[]},addLabel:{type:String,default:"Add Item"},defaultItem:{type:[Object,Function],default:()=>({})}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,s=e,i=()=>{const l=typeof t.defaultItem=="function"?t.defaultItem():{...t.defaultItem,_id:Date.now()};s("update:modelValue",[...t.modelValue,l])},r=l=>{const a=t.modelValue.filter((u,c)=>c!==l);s("update:modelValue",a)},o=(l,a,u)=>{const c=[...t.modelValue];c[l]={...c[l],[a]:u},s("update:modelValue",c)};return(l,a)=>(v(),k("div",y3,[(v(!0),k(xe,null,Ve(n.modelValue,(u,c)=>(v(),k("div",{key:u._id||c,class:"rounded-lg border border-gray-200 p-4 dark:border-gray-700"},[h("div",b3,[h("div",k3,[pt(l.$slots,"default",{item:u,index:c,update:(d,f)=>o(c,d,f)})]),h("button",{type:"button",onClick:d=>r(c),class:"shrink-0 rounded-md p-1.5 text-gray-400 transition hover:bg-red-50 hover:text-red-600 dark:hover:bg-red-900/20 dark:hover:text-red-400",title:"Remove"},[...a[0]||(a[0]=[h("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,x3)])]))),128)),C(Ye,{variant:"secondary",size:"sm",onClick:i,class:"inline-flex items-center"},{default:te(()=>[a[1]||(a[1]=h("svg",{class:"mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)),fe(" "+X(n.addLabel),1)]),_:1})]))}};let ff=[],Mb=[];(()=>{let n="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,t=0;e<n.length;e++)(e%2?Mb:ff).push(t=t+n[e])})();function _3(n){if(n<768)return!1;for(let e=0,t=ff.length;;){let s=e+t>>1;if(n<ff[s])t=s;else if(n>=Mb[s])e=s+1;else return!0;if(e==t)return!1}}function Pg(n){return n>=127462&&n<=127487}const Rg=8205;function w3(n,e,t=!0,s=!0){return(t?Ib:S3)(n,e,s)}function Ib(n,e,t){if(e==n.length)return e;e&&jb(n.charCodeAt(e))&&Vb(n.charCodeAt(e-1))&&e--;let s=rd(n,e);for(e+=Og(s);e<n.length;){let i=rd(n,e);if(s==Rg||i==Rg||t&&_3(i))e+=Og(i),s=i;else if(Pg(i)){let r=0,o=e-2;for(;o>=0&&Pg(rd(n,o));)r++,o-=2;if(r%2==0)break;e+=2}else break}return e}function S3(n,e,t){for(;e>0;){let s=Ib(n,e-2,t);if(s<e)return s;e--}return 0}function rd(n,e){let t=n.charCodeAt(e);if(!Vb(t)||e+1==n.length)return t;let s=n.charCodeAt(e+1);return jb(s)?(t-55296<<10)+(s-56320)+65536:t}function jb(n){return n>=56320&&n<57344}function Vb(n){return n>=55296&&n<56320}function Og(n){return n<65536?1:2}class at{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,s){[e,t]=Zr(this,e,t);let i=[];return this.decompose(0,e,i,2),s.length&&s.decompose(0,s.length,i,3),this.decompose(t,this.length,i,1),Rs.from(i,this.length-(t-e)+s.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=Zr(this,e,t);let s=[];return this.decompose(e,t,s,0),Rs.from(s,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),s=this.length-this.scanIdentical(e,-1),i=new Xo(this),r=new Xo(e);for(let o=t,l=t;;){if(i.next(o),r.next(o),o=0,i.lineBreak!=r.lineBreak||i.done!=r.done||i.value!=r.value)return!1;if(l+=i.value.length,i.done||l>=s)return!0}}iter(e=1){return new Xo(this,e)}iterRange(e,t=this.length){return new $b(this,e,t)}iterLines(e,t){let s;if(e==null)s=this.iter();else{t==null&&(t=this.lines+1);let i=this.line(e).from;s=this.iterRange(i,Math.max(i,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new Nb(s)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?at.empty:e.length<=32?new $t(e):Rs.from($t.split(e,[]))}}class $t extends at{constructor(e,t=C3(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,s,i){for(let r=0;;r++){let o=this.text[r],l=i+o.length;if((t?s:l)>=e)return new A3(i,l,s,o);i=l+1,s++}}decompose(e,t,s,i){let r=e<=0&&t>=this.length?this:new $t(Lg(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(i&1){let o=s.pop(),l=Ka(r.text,o.text.slice(),0,r.length);if(l.length<=32)s.push(new $t(l,o.length+r.length));else{let a=l.length>>1;s.push(new $t(l.slice(0,a)),new $t(l.slice(a)))}}else s.push(r)}replace(e,t,s){if(!(s instanceof $t))return super.replace(e,t,s);[e,t]=Zr(this,e,t);let i=Ka(this.text,Ka(s.text,Lg(this.text,0,e)),t),r=this.length+s.length-(t-e);return i.length<=32?new $t(i,r):Rs.from($t.split(i,[]),r)}sliceString(e,t=this.length,s=`
`){[e,t]=Zr(this,e,t);let i="";for(let r=0,o=0;r<=t&&o<this.text.length;o++){let l=this.text[o],a=r+l.length;r>e&&o&&(i+=s),e<a&&t>r&&(i+=l.slice(Math.max(0,e-r),t-r)),r=a+1}return i}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let s=[],i=-1;for(let r of e)s.push(r),i+=r.length+1,s.length==32&&(t.push(new $t(s,i)),s=[],i=-1);return i>-1&&t.push(new $t(s,i)),t}}class Rs extends at{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let s of e)this.lines+=s.lines}lineInner(e,t,s,i){for(let r=0;;r++){let o=this.children[r],l=i+o.length,a=s+o.lines-1;if((t?a:l)>=e)return o.lineInner(e,t,s,i);i=l+1,s=a+1}}decompose(e,t,s,i){for(let r=0,o=0;o<=t&&r<this.children.length;r++){let l=this.children[r],a=o+l.length;if(e<=a&&t>=o){let u=i&((o<=e?1:0)|(a>=t?2:0));o>=e&&a<=t&&!u?s.push(l):l.decompose(e-o,t-o,s,u)}o=a+1}}replace(e,t,s){if([e,t]=Zr(this,e,t),s.lines<this.lines)for(let i=0,r=0;i<this.children.length;i++){let o=this.children[i],l=r+o.length;if(e>=r&&t<=l){let a=o.replace(e-r,t-r,s),u=this.lines-o.lines+a.lines;if(a.lines<u>>4&&a.lines>u>>6){let c=this.children.slice();return c[i]=a,new Rs(c,this.length-(t-e)+s.length)}return super.replace(r,l,a)}r=l+1}return super.replace(e,t,s)}sliceString(e,t=this.length,s=`
`){[e,t]=Zr(this,e,t);let i="";for(let r=0,o=0;r<this.children.length&&o<=t;r++){let l=this.children[r],a=o+l.length;o>e&&r&&(i+=s),e<a&&t>o&&(i+=l.sliceString(e-o,t-o,s)),o=a+1}return i}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof Rs))return 0;let s=0,[i,r,o,l]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=t,r+=t){if(i==o||r==l)return s;let a=this.children[i],u=e.children[r];if(a!=u)return s+a.scanIdentical(u,t);s+=a.length+1}}static from(e,t=e.reduce((s,i)=>s+i.length+1,-1)){let s=0;for(let p of e)s+=p.lines;if(s<32){let p=[];for(let g of e)g.flatten(p);return new $t(p,t)}let i=Math.max(32,s>>5),r=i<<1,o=i>>1,l=[],a=0,u=-1,c=[];function d(p){let g;if(p.lines>r&&p instanceof Rs)for(let b of p.children)d(b);else p.lines>o&&(a>o||!a)?(f(),l.push(p)):p instanceof $t&&a&&(g=c[c.length-1])instanceof $t&&p.lines+g.lines<=32?(a+=p.lines,u+=p.length+1,c[c.length-1]=new $t(g.text.concat(p.text),g.length+1+p.length)):(a+p.lines>i&&f(),a+=p.lines,u+=p.length+1,c.push(p))}function f(){a!=0&&(l.push(c.length==1?c[0]:Rs.from(c,u)),u=-1,a=c.length=0)}for(let p of e)d(p);return f(),l.length==1?l[0]:new Rs(l,t)}}at.empty=new $t([""],0);function C3(n){let e=-1;for(let t of n)e+=t.length+1;return e}function Ka(n,e,t=0,s=1e9){for(let i=0,r=0,o=!0;r<n.length&&i<=s;r++){let l=n[r],a=i+l.length;a>=t&&(a>s&&(l=l.slice(0,s-i)),i<t&&(l=l.slice(t-i)),o?(e[e.length-1]+=l,o=!1):e.push(l)),i=a+1}return e}function Lg(n,e,t){return Ka(n,[""],e,t)}class Xo{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof $t?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let s=this.nodes.length-1,i=this.nodes[s],r=this.offsets[s],o=r>>1,l=i instanceof $t?i.text.length:i.children.length;if(o==(t>0?l:0)){if(s==0)return this.done=!0,this.value="",this;t>0&&this.offsets[s-1]++,this.nodes.pop(),this.offsets.pop()}else if((r&1)==(t>0?0:1)){if(this.offsets[s]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof $t){let a=i.text[o+(t<0?-1:0)];if(this.offsets[s]+=t,a.length>Math.max(0,e))return this.value=e==0?a:t>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=i.children[o+(t<0?-1:0)];e>a.length?(e-=a.length,this.offsets[s]+=t):(t<0&&this.offsets[s]--,this.nodes.push(a),this.offsets.push(t>0?1:(a instanceof $t?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class $b{constructor(e,t,s){this.value="",this.done=!1,this.cursor=new Xo(e,t>s?-1:1),this.pos=t>s?e.length:0,this.from=Math.min(t,s),this.to=Math.max(t,s)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let s=t<0?this.pos-this.from:this.to-this.pos;e>s&&(e=s),s-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*t,this.value=i.length<=s?i:t<0?i.slice(i.length-s):i.slice(0,s),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class Nb{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:s,value:i}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):s?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(at.prototype[Symbol.iterator]=function(){return this.iter()},Xo.prototype[Symbol.iterator]=$b.prototype[Symbol.iterator]=Nb.prototype[Symbol.iterator]=function(){return this});class A3{constructor(e,t,s,i){this.from=e,this.to=t,this.number=s,this.text=i}get length(){return this.to-this.from}}function Zr(n,e,t){return e=Math.max(0,Math.min(n.length,e)),[e,Math.max(e,Math.min(n.length,t))]}function on(n,e,t=!0,s=!0){return w3(n,e,t,s)}function E3(n){return n>=56320&&n<57344}function T3(n){return n>=55296&&n<56320}function In(n,e){let t=n.charCodeAt(e);if(!T3(t)||e+1==n.length)return t;let s=n.charCodeAt(e+1);return E3(s)?(t-55296<<10)+(s-56320)+65536:t}function Uh(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode((n>>10)+55296,(n&1023)+56320))}function Os(n){return n<65536?1:2}const hf=/\r\n?|\n/;var Dn=(function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n})(Dn||(Dn={}));class Vs{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let s=this.sections[t+1];e+=s<0?this.sections[t]:s}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,s=0,i=0;t<this.sections.length;){let r=this.sections[t++],o=this.sections[t++];o<0?(e(s,i,r),i+=r):i+=o,s+=r}}iterChangedRanges(e,t=!1){pf(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let s=this.sections[t++],i=this.sections[t++];i<0?e.push(s,i):e.push(i,s)}return new Vs(e)}composeDesc(e){return this.empty?e:e.empty?this:Bb(this,e)}mapDesc(e,t=!1){return e.empty?this:mf(this,e,t)}mapPos(e,t=-1,s=Dn.Simple){let i=0,r=0;for(let o=0;o<this.sections.length;){let l=this.sections[o++],a=this.sections[o++],u=i+l;if(a<0){if(u>e)return r+(e-i);r+=l}else{if(s!=Dn.Simple&&u>=e&&(s==Dn.TrackDel&&i<e&&u>e||s==Dn.TrackBefore&&i<e||s==Dn.TrackAfter&&u>e))return null;if(u>e||u==e&&t<0&&!l)return e==i||t<0?r:r+a;r+=a}i=u}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return r}touchesRange(e,t=e){for(let s=0,i=0;s<this.sections.length&&i<=t;){let r=this.sections[s++],o=this.sections[s++],l=i+r;if(o>=0&&i<=t&&l>=e)return i<e&&l>t?"cover":!0;i=l}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let s=this.sections[t++],i=this.sections[t++];e+=(e?" ":"")+s+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Vs(e)}static create(e){return new Vs(e)}}class Gt extends Vs{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return pf(this,(t,s,i,r,o)=>e=e.replace(i,i+(s-t),o),!1),e}mapDesc(e,t=!1){return mf(this,e,t,!0)}invert(e){let t=this.sections.slice(),s=[];for(let i=0,r=0;i<t.length;i+=2){let o=t[i],l=t[i+1];if(l>=0){t[i]=l,t[i+1]=o;let a=i>>1;for(;s.length<a;)s.push(at.empty);s.push(o?e.slice(r,r+o):at.empty)}r+=o}return new Gt(t,s)}compose(e){return this.empty?e:e.empty?this:Bb(this,e,!0)}map(e,t=!1){return e.empty?this:mf(this,e,t,!0)}iterChanges(e,t=!1){pf(this,e,t)}get desc(){return Vs.create(this.sections)}filter(e){let t=[],s=[],i=[],r=new yl(this);e:for(let o=0,l=0;;){let a=o==e.length?1e9:e[o++];for(;l<a||l==a&&r.len==0;){if(r.done)break e;let c=Math.min(r.len,a-l);fn(i,c,-1);let d=r.ins==-1?-1:r.off==0?r.ins:0;fn(t,c,d),d>0&&vi(s,t,r.text),r.forward(c),l+=c}let u=e[o++];for(;l<u;){if(r.done)break e;let c=Math.min(r.len,u-l);fn(t,c,-1),fn(i,c,r.ins==-1?-1:r.off==0?r.ins:0),r.forward(c),l+=c}}return{changes:new Gt(t,s),filtered:Vs.create(i)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let s=this.sections[t],i=this.sections[t+1];i<0?e.push(s):i==0?e.push([s]):e.push([s].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,s){let i=[],r=[],o=0,l=null;function a(c=!1){if(!c&&!i.length)return;o<t&&fn(i,t-o,-1);let d=new Gt(i,r);l=l?l.compose(d.map(l)):d,i=[],r=[],o=0}function u(c){if(Array.isArray(c))for(let d of c)u(d);else if(c instanceof Gt){if(c.length!=t)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${t})`);a(),l=l?l.compose(c.map(l)):c}else{let{from:d,to:f=d,insert:p}=c;if(d>f||d<0||f>t)throw new RangeError(`Invalid change range ${d} to ${f} (in doc of length ${t})`);let g=p?typeof p=="string"?at.of(p.split(s||hf)):p:at.empty,b=g.length;if(d==f&&b==0)return;d<o&&a(),d>o&&fn(i,d-o,-1),fn(i,f-d,b),vi(r,i,g),o=f}}return u(e),a(!l),l}static empty(e){return new Gt(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],s=[];for(let i=0;i<e.length;i++){let r=e[i];if(typeof r=="number")t.push(r,-1);else{if(!Array.isArray(r)||typeof r[0]!="number"||r.some((o,l)=>l&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(r.length==1)t.push(r[0],0);else{for(;s.length<i;)s.push(at.empty);s[i]=at.of(r.slice(1)),t.push(r[0],s[i].length)}}}return new Gt(t,s)}static createSet(e,t){return new Gt(e,t)}}function fn(n,e,t,s=!1){if(e==0&&t<=0)return;let i=n.length-2;i>=0&&t<=0&&t==n[i+1]?n[i]+=e:i>=0&&e==0&&n[i]==0?n[i+1]+=t:s?(n[i]+=e,n[i+1]+=t):n.push(e,t)}function vi(n,e,t){if(t.length==0)return;let s=e.length-2>>1;if(s<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<s;)n.push(at.empty);n.push(t)}}function pf(n,e,t){let s=n.inserted;for(let i=0,r=0,o=0;o<n.sections.length;){let l=n.sections[o++],a=n.sections[o++];if(a<0)i+=l,r+=l;else{let u=i,c=r,d=at.empty;for(;u+=l,c+=a,a&&s&&(d=d.append(s[o-2>>1])),!(t||o==n.sections.length||n.sections[o+1]<0);)l=n.sections[o++],a=n.sections[o++];e(i,u,r,c,d),i=u,r=c}}}function mf(n,e,t,s=!1){let i=[],r=s?[]:null,o=new yl(n),l=new yl(e);for(let a=-1;;){if(o.done&&l.len||l.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&l.ins==-1){let u=Math.min(o.len,l.len);fn(i,u,-1),o.forward(u),l.forward(u)}else if(l.ins>=0&&(o.ins<0||a==o.i||o.off==0&&(l.len<o.len||l.len==o.len&&!t))){let u=l.len;for(fn(i,l.ins,-1);u;){let c=Math.min(o.len,u);o.ins>=0&&a<o.i&&o.len<=c&&(fn(i,0,o.ins),r&&vi(r,i,o.text),a=o.i),o.forward(c),u-=c}l.next()}else if(o.ins>=0){let u=0,c=o.len;for(;c;)if(l.ins==-1){let d=Math.min(c,l.len);u+=d,c-=d,l.forward(d)}else if(l.ins==0&&l.len<c)c-=l.len,l.next();else break;fn(i,u,a<o.i?o.ins:0),r&&a<o.i&&vi(r,i,o.text),a=o.i,o.forward(o.len-c)}else{if(o.done&&l.done)return r?Gt.createSet(i,r):Vs.create(i);throw new Error("Mismatched change set lengths")}}}function Bb(n,e,t=!1){let s=[],i=t?[]:null,r=new yl(n),o=new yl(e);for(let l=!1;;){if(r.done&&o.done)return i?Gt.createSet(s,i):Vs.create(s);if(r.ins==0)fn(s,r.len,0,l),r.next();else if(o.len==0&&!o.done)fn(s,0,o.ins,l),i&&vi(i,s,o.text),o.next();else{if(r.done||o.done)throw new Error("Mismatched change set lengths");{let a=Math.min(r.len2,o.len),u=s.length;if(r.ins==-1){let c=o.ins==-1?-1:o.off?0:o.ins;fn(s,a,c,l),i&&c&&vi(i,s,o.text)}else o.ins==-1?(fn(s,r.off?0:r.len,a,l),i&&vi(i,s,r.textBit(a))):(fn(s,r.off?0:r.len,o.off?0:o.ins,l),i&&!o.off&&vi(i,s,o.text));l=(r.ins>a||o.ins>=0&&o.len>a)&&(l||s.length>u),r.forward2(a),o.forward(a)}}}}class yl{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?at.empty:e[t]}textBit(e){let{inserted:t}=this.set,s=this.i-2>>1;return s>=t.length&&!e?at.empty:t[s].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class er{constructor(e,t,s){this.from=e,this.to=t,this.flags=s}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let s,i;return this.empty?s=i=e.mapPos(this.from,t):(s=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),s==this.from&&i==this.to?this:new er(s,i,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return he.range(e,t);let s=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return he.range(this.anchor,s)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return he.range(e.anchor,e.head)}static create(e,t,s){return new er(e,t,s)}}class he{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:he.create(this.ranges.map(s=>s.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let s=0;s<this.ranges.length;s++)if(!this.ranges[s].eq(e.ranges[s],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new he([this.main],0)}addRange(e,t=!0){return he.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let s=this.ranges.slice();return s[t]=e,he.create(s,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new he(e.ranges.map(t=>er.fromJSON(t)),e.main)}static single(e,t=e){return new he([he.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let s=0,i=0;i<e.length;i++){let r=e[i];if(r.empty?r.from<=s:r.from<s)return he.normalized(e.slice(),t);s=r.to}return new he(e,t)}static cursor(e,t=0,s,i){return er.create(e,e,(t==0?0:t<0?8:16)|(s==null?7:Math.min(6,s))|(i??16777215)<<6)}static range(e,t,s,i){let r=(s??16777215)<<6|(i==null?7:Math.min(6,i));return t<e?er.create(t,e,48|r):er.create(e,t,(t>e?8:0)|r)}static normalized(e,t=0){let s=e[t];e.sort((i,r)=>i.from-r.from),t=e.indexOf(s);for(let i=1;i<e.length;i++){let r=e[i],o=e[i-1];if(r.empty?r.from<=o.to:r.from<o.to){let l=o.from,a=Math.max(r.to,o.to);i<=t&&t--,e.splice(--i,2,r.anchor>r.head?he.range(a,l):he.range(l,a))}}return new he(e,t)}}function Fb(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let zh=0;class Le{constructor(e,t,s,i,r){this.combine=e,this.compareInput=t,this.compare=s,this.isStatic=i,this.id=zh++,this.default=e([]),this.extensions=typeof r=="function"?r(this):r}get reader(){return this}static define(e={}){return new Le(e.combine||(t=>t),e.compareInput||((t,s)=>t===s),e.compare||(e.combine?(t,s)=>t===s:Hh),!!e.static,e.enables)}of(e){return new Ja([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Ja(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Ja(e,this,2,t)}from(e,t){return t||(t=s=>s),this.compute([e],s=>t(s.field(e)))}}function Hh(n,e){return n==e||n.length==e.length&&n.every((t,s)=>t===e[s])}class Ja{constructor(e,t,s,i){this.dependencies=e,this.facet=t,this.type=s,this.value=i,this.id=zh++}dynamicSlot(e){var t;let s=this.value,i=this.facet.compareInput,r=this.id,o=e[r]>>1,l=this.type==2,a=!1,u=!1,c=[];for(let d of this.dependencies)d=="doc"?a=!0:d=="selection"?u=!0:(((t=e[d.id])!==null&&t!==void 0?t:1)&1)==0&&c.push(e[d.id]);return{create(d){return d.values[o]=s(d),1},update(d,f){if(a&&f.docChanged||u&&(f.docChanged||f.selection)||gf(d,c)){let p=s(d);if(l?!Mg(p,d.values[o],i):!i(p,d.values[o]))return d.values[o]=p,1}return 0},reconfigure:(d,f)=>{let p,g=f.config.address[r];if(g!=null){let b=Au(f,g);if(this.dependencies.every(x=>x instanceof Le?f.facet(x)===d.facet(x):x instanceof ln?f.field(x,!1)==d.field(x,!1):!0)||(l?Mg(p=s(d),b,i):i(p=s(d),b)))return d.values[o]=b,0}else p=s(d);return d.values[o]=p,1}}}}function Mg(n,e,t){if(n.length!=e.length)return!1;for(let s=0;s<n.length;s++)if(!t(n[s],e[s]))return!1;return!0}function gf(n,e){let t=!1;for(let s of e)Zo(n,s)&1&&(t=!0);return t}function D3(n,e,t){let s=t.map(a=>n[a.id]),i=t.map(a=>a.type),r=s.filter(a=>!(a&1)),o=n[e.id]>>1;function l(a){let u=[];for(let c=0;c<s.length;c++){let d=Au(a,s[c]);if(i[c]==2)for(let f of d)u.push(f);else u.push(d)}return e.combine(u)}return{create(a){for(let u of s)Zo(a,u);return a.values[o]=l(a),1},update(a,u){if(!gf(a,r))return 0;let c=l(a);return e.compare(c,a.values[o])?0:(a.values[o]=c,1)},reconfigure(a,u){let c=gf(a,s),d=u.config.facets[e.id],f=u.facet(e);if(d&&!c&&Hh(t,d))return a.values[o]=f,0;let p=l(a);return e.compare(p,f)?(a.values[o]=f,0):(a.values[o]=p,1)}}}const ya=Le.define({static:!0});class ln{constructor(e,t,s,i,r){this.id=e,this.createF=t,this.updateF=s,this.compareF=i,this.spec=r,this.provides=void 0}static define(e){let t=new ln(zh++,e.create,e.update,e.compare||((s,i)=>s===i),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(ya).find(s=>s.field==this);return(t?.create||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:s=>(s.values[t]=this.create(s),1),update:(s,i)=>{let r=s.values[t],o=this.updateF(r,i);return this.compareF(r,o)?0:(s.values[t]=o,1)},reconfigure:(s,i)=>{let r=s.facet(ya),o=i.facet(ya),l;return(l=r.find(a=>a.field==this))&&l!=o.find(a=>a.field==this)?(s.values[t]=l.create(s),1):i.config.address[this.id]!=null?(s.values[t]=i.field(this),0):(s.values[t]=this.create(s),1)}}}init(e){return[this,ya.of({field:this,create:e})]}get extension(){return this}}const Ji={lowest:4,low:3,default:2,high:1,highest:0};function Po(n){return e=>new Ub(e,n)}const gr={highest:Po(Ji.highest),high:Po(Ji.high),default:Po(Ji.default),low:Po(Ji.low),lowest:Po(Ji.lowest)};class Ub{constructor(e,t){this.inner=e,this.prec=t}}class pc{of(e){return new vf(this,e)}reconfigure(e){return pc.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class vf{constructor(e,t){this.compartment=e,this.inner=t}}class Cu{constructor(e,t,s,i,r,o){for(this.base=e,this.compartments=t,this.dynamicSlots=s,this.address=i,this.staticValues=r,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<s.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,s){let i=[],r=Object.create(null),o=new Map;for(let f of P3(e,t,o))f instanceof ln?i.push(f):(r[f.facet.id]||(r[f.facet.id]=[])).push(f);let l=Object.create(null),a=[],u=[];for(let f of i)l[f.id]=u.length<<1,u.push(p=>f.slot(p));let c=s?.config.facets;for(let f in r){let p=r[f],g=p[0].facet,b=c&&c[f]||[];if(p.every(x=>x.type==0))if(l[g.id]=a.length<<1|1,Hh(b,p))a.push(s.facet(g));else{let x=g.combine(p.map(m=>m.value));a.push(s&&g.compare(x,s.facet(g))?s.facet(g):x)}else{for(let x of p)x.type==0?(l[x.id]=a.length<<1|1,a.push(x.value)):(l[x.id]=u.length<<1,u.push(m=>x.dynamicSlot(m)));l[g.id]=u.length<<1,u.push(x=>D3(x,g,p))}}let d=u.map(f=>f(l));return new Cu(e,o,d,l,a,r)}}function P3(n,e,t){let s=[[],[],[],[],[]],i=new Map;function r(o,l){let a=i.get(o);if(a!=null){if(a<=l)return;let u=s[a].indexOf(o);u>-1&&s[a].splice(u,1),o instanceof vf&&t.delete(o.compartment)}if(i.set(o,l),Array.isArray(o))for(let u of o)r(u,l);else if(o instanceof vf){if(t.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(o.compartment)||o.inner;t.set(o.compartment,u),r(u,l)}else if(o instanceof Ub)r(o.inner,o.prec);else if(o instanceof ln)s[l].push(o),o.provides&&r(o.provides,l);else if(o instanceof Ja)s[l].push(o),o.facet.extensions&&r(o.facet.extensions,Ji.default);else{let u=o.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);r(u,l)}}return r(n,Ji.default),s.reduce((o,l)=>o.concat(l))}function Zo(n,e){if(e&1)return 2;let t=e>>1,s=n.status[t];if(s==4)throw new Error("Cyclic dependency between fields and/or facets");if(s&2)return s;n.status[t]=4;let i=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|i}function Au(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const zb=Le.define(),yf=Le.define({combine:n=>n.some(e=>e),static:!0}),Hb=Le.define({combine:n=>n.length?n[0]:void 0,static:!0}),Wb=Le.define(),qb=Le.define(),Gb=Le.define(),Kb=Le.define({combine:n=>n.length?n[0]:!1});class ri{constructor(e,t){this.type=e,this.value=t}static define(){return new R3}}class R3{of(e){return new ri(this,e)}}class O3{constructor(e){this.map=e}of(e){return new Ze(this,e)}}class Ze{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new Ze(this.type,t)}is(e){return this.type==e}static define(e={}){return new O3(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let s=[];for(let i of e){let r=i.map(t);r&&s.push(r)}return s}}Ze.reconfigure=Ze.define();Ze.appendConfig=Ze.define();class Kt{constructor(e,t,s,i,r,o){this.startState=e,this.changes=t,this.selection=s,this.effects=i,this.annotations=r,this.scrollIntoView=o,this._doc=null,this._state=null,s&&Fb(s,t.newLength),r.some(l=>l.type==Kt.time)||(this.annotations=r.concat(Kt.time.of(Date.now())))}static create(e,t,s,i,r,o){return new Kt(e,t,s,i,r,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Kt.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}Kt.time=ri.define();Kt.userEvent=ri.define();Kt.addToHistory=ri.define();Kt.remote=ri.define();function L3(n,e){let t=[];for(let s=0,i=0;;){let r,o;if(s<n.length&&(i==e.length||e[i]>=n[s]))r=n[s++],o=n[s++];else if(i<e.length)r=e[i++],o=e[i++];else return t;!t.length||t[t.length-1]<r?t.push(r,o):t[t.length-1]<o&&(t[t.length-1]=o)}}function Jb(n,e,t){var s;let i,r,o;return t?(i=e.changes,r=Gt.empty(e.changes.length),o=n.changes.compose(e.changes)):(i=e.changes.map(n.changes),r=n.changes.mapDesc(e.changes,!0),o=n.changes.compose(i)),{changes:o,selection:e.selection?e.selection.map(r):(s=n.selection)===null||s===void 0?void 0:s.map(i),effects:Ze.mapEffects(n.effects,i).concat(Ze.mapEffects(e.effects,r)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function bf(n,e,t){let s=e.selection,i=Hr(e.annotations);return e.userEvent&&(i=i.concat(Kt.userEvent.of(e.userEvent))),{changes:e.changes instanceof Gt?e.changes:Gt.of(e.changes||[],t,n.facet(Hb)),selection:s&&(s instanceof he?s:he.single(s.anchor,s.head)),effects:Hr(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function Qb(n,e,t){let s=bf(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let r=1;r<e.length;r++){e[r].filter===!1&&(t=!1);let o=!!e[r].sequential;s=Jb(s,bf(n,e[r],o?s.changes.newLength:n.doc.length),o)}let i=Kt.create(n,s.changes,s.selection,s.effects,s.annotations,s.scrollIntoView);return I3(t?M3(i):i)}function M3(n){let e=n.startState,t=!0;for(let i of e.facet(Wb)){let r=i(n);if(r===!1){t=!1;break}Array.isArray(r)&&(t=t===!0?r:L3(t,r))}if(t!==!0){let i,r;if(t===!1)r=n.changes.invertedDesc,i=Gt.empty(e.doc.length);else{let o=n.changes.filter(t);i=o.changes,r=o.filtered.mapDesc(o.changes).invertedDesc}n=Kt.create(e,i,n.selection&&n.selection.map(r),Ze.mapEffects(n.effects,r),n.annotations,n.scrollIntoView)}let s=e.facet(qb);for(let i=s.length-1;i>=0;i--){let r=s[i](n);r instanceof Kt?n=r:Array.isArray(r)&&r.length==1&&r[0]instanceof Kt?n=r[0]:n=Qb(e,Hr(r),!1)}return n}function I3(n){let e=n.startState,t=e.facet(Gb),s=n;for(let i=t.length-1;i>=0;i--){let r=t[i](n);r&&Object.keys(r).length&&(s=Jb(s,bf(e,r,n.changes.newLength),!0))}return s==n?n:Kt.create(e,n.changes,n.selection,s.effects,s.annotations,s.scrollIntoView)}const j3=[];function Hr(n){return n==null?j3:Array.isArray(n)?n:[n]}var Pt=(function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n})(Pt||(Pt={}));const V3=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let kf;try{kf=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function $3(n){if(kf)return kf.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||V3.test(t)))return!0}return!1}function N3(n){return e=>{if(!/\S/.test(e))return Pt.Space;if($3(e))return Pt.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return Pt.Word;return Pt.Other}}class ot{constructor(e,t,s,i,r,o){this.config=e,this.doc=t,this.selection=s,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=r,o&&(o._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)Zo(this,l<<1);this.computeSlot=null}field(e,t=!0){let s=this.config.address[e.id];if(s==null){if(t)throw new RangeError("Field is not present in this state");return}return Zo(this,s),Au(this,s)}update(...e){return Qb(this,e,!0)}applyTransaction(e){let t=this.config,{base:s,compartments:i}=t;for(let l of e.effects)l.is(pc.reconfigure)?(t&&(i=new Map,t.compartments.forEach((a,u)=>i.set(u,a)),t=null),i.set(l.value.compartment,l.value.extension)):l.is(Ze.reconfigure)?(t=null,s=l.value):l.is(Ze.appendConfig)&&(t=null,s=Hr(s).concat(l.value));let r;t?r=e.startState.values.slice():(t=Cu.resolve(s,i,this),r=new ot(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(a,u)=>u.reconfigure(a,this),null).values);let o=e.startState.facet(yf)?e.newSelection:e.newSelection.asSingle();new ot(t,e.newDoc,o,r,(l,a)=>a.update(l,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:he.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,s=e(t.ranges[0]),i=this.changes(s.changes),r=[s.range],o=Hr(s.effects);for(let l=1;l<t.ranges.length;l++){let a=e(t.ranges[l]),u=this.changes(a.changes),c=u.map(i);for(let f=0;f<l;f++)r[f]=r[f].map(c);let d=i.mapDesc(u,!0);r.push(a.range.map(d)),i=i.compose(c),o=Ze.mapEffects(o,c).concat(Ze.mapEffects(Hr(a.effects),d))}return{changes:i,selection:he.create(r,t.mainIndex),effects:o}}changes(e=[]){return e instanceof Gt?e:Gt.of(e,this.doc.length,this.facet(ot.lineSeparator))}toText(e){return at.of(e.split(this.facet(ot.lineSeparator)||hf))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(Zo(this,t),Au(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let s in e){let i=e[s];i instanceof ln&&this.config.address[i.id]!=null&&(t[s]=i.spec.toJSON(this.field(e[s]),this))}return t}static fromJSON(e,t={},s){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(s){for(let r in s)if(Object.prototype.hasOwnProperty.call(e,r)){let o=s[r],l=e[r];i.push(o.init(a=>o.spec.fromJSON(l,a)))}}return ot.create({doc:e.doc,selection:he.fromJSON(e.selection),extensions:t.extensions?i.concat([t.extensions]):i})}static create(e={}){let t=Cu.resolve(e.extensions||[],new Map),s=e.doc instanceof at?e.doc:at.of((e.doc||"").split(t.staticFacet(ot.lineSeparator)||hf)),i=e.selection?e.selection instanceof he?e.selection:he.single(e.selection.anchor,e.selection.head):he.single(0);return Fb(i,s.length),t.staticFacet(yf)||(i=i.asSingle()),new ot(t,s,i,t.dynamicSlots.map(()=>null),(r,o)=>o.create(r),null)}get tabSize(){return this.facet(ot.tabSize)}get lineBreak(){return this.facet(ot.lineSeparator)||`
`}get readOnly(){return this.facet(Kb)}phrase(e,...t){for(let s of this.facet(ot.phrases))if(Object.prototype.hasOwnProperty.call(s,e)){e=s[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(s,i)=>{if(i=="$")return"$";let r=+(i||1);return!r||r>t.length?s:t[r-1]})),e}languageDataAt(e,t,s=-1){let i=[];for(let r of this.facet(zb))for(let o of r(this,t,s))Object.prototype.hasOwnProperty.call(o,e)&&i.push(o[e]);return i}charCategorizer(e){return N3(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:s,length:i}=this.doc.lineAt(e),r=this.charCategorizer(e),o=e-s,l=e-s;for(;o>0;){let a=on(t,o,!1);if(r(t.slice(a,o))!=Pt.Word)break;o=a}for(;l<i;){let a=on(t,l);if(r(t.slice(l,a))!=Pt.Word)break;l=a}return o==l?null:he.range(o+s,l+s)}}ot.allowMultipleSelections=yf;ot.tabSize=Le.define({combine:n=>n.length?n[0]:4});ot.lineSeparator=Hb;ot.readOnly=Kb;ot.phrases=Le.define({compare(n,e){let t=Object.keys(n),s=Object.keys(e);return t.length==s.length&&t.every(i=>n[i]==e[i])}});ot.languageData=zb;ot.changeFilter=Wb;ot.transactionFilter=qb;ot.transactionExtender=Gb;pc.reconfigure=Ze.define();function Ns(n,e,t={}){let s={};for(let i of n)for(let r of Object.keys(i)){let o=i[r],l=s[r];if(l===void 0)s[r]=o;else if(!(l===o||o===void 0))if(Object.hasOwnProperty.call(t,r))s[r]=t[r](l,o);else throw new Error("Config merge conflict for field "+r)}for(let i in e)s[i]===void 0&&(s[i]=e[i]);return s}class ar{eq(e){return this==e}range(e,t=e){return xf.create(e,t,this)}}ar.prototype.startSide=ar.prototype.endSide=0;ar.prototype.point=!1;ar.prototype.mapMode=Dn.TrackDel;let xf=class Yb{constructor(e,t,s){this.from=e,this.to=t,this.value=s}static create(e,t,s){return new Yb(e,t,s)}};function _f(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class Wh{constructor(e,t,s,i){this.from=e,this.to=t,this.value=s,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,t,s,i=0){let r=s?this.to:this.from;for(let o=i,l=r.length;;){if(o==l)return o;let a=o+l>>1,u=r[a]-e||(s?this.value[a].endSide:this.value[a].startSide)-t;if(a==o)return u>=0?o:l;u>=0?l=a:o=a+1}}between(e,t,s,i){for(let r=this.findIndex(t,-1e9,!0),o=this.findIndex(s,1e9,!1,r);r<o;r++)if(i(this.from[r]+e,this.to[r]+e,this.value[r])===!1)return!1}map(e,t){let s=[],i=[],r=[],o=-1,l=-1;for(let a=0;a<this.value.length;a++){let u=this.value[a],c=this.from[a]+e,d=this.to[a]+e,f,p;if(c==d){let g=t.mapPos(c,u.startSide,u.mapMode);if(g==null||(f=p=g,u.startSide!=u.endSide&&(p=t.mapPos(c,u.endSide),p<f)))continue}else if(f=t.mapPos(c,u.startSide),p=t.mapPos(d,u.endSide),f>p||f==p&&u.startSide>0&&u.endSide<=0)continue;(p-f||u.endSide-u.startSide)<0||(o<0&&(o=f),u.point&&(l=Math.max(l,p-f)),s.push(u),i.push(f-o),r.push(p-o))}return{mapped:s.length?new Wh(i,r,s,l):null,pos:o}}}class lt{constructor(e,t,s,i){this.chunkPos=e,this.chunk=t,this.nextLayer=s,this.maxPoint=i}static create(e,t,s,i){return new lt(e,t,s,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:s=!1,filterFrom:i=0,filterTo:r=this.length}=e,o=e.filter;if(t.length==0&&!o)return this;if(s&&(t=t.slice().sort(_f)),this.isEmpty)return t.length?lt.of(t):this;let l=new Xb(this,null,-1).goto(0),a=0,u=[],c=new ti;for(;l.value||a<t.length;)if(a<t.length&&(l.from-t[a].from||l.startSide-t[a].value.startSide)>=0){let d=t[a++];c.addInner(d.from,d.to,d.value)||u.push(d)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(a==t.length||this.chunkEnd(l.chunkIndex)<t[a].from)&&(!o||i>this.chunkEnd(l.chunkIndex)||r<this.chunkPos[l.chunkIndex])&&c.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!o||i>l.to||r<l.from||o(l.from,l.to,l.value))&&(c.addInner(l.from,l.to,l.value)||u.push(xf.create(l.from,l.to,l.value))),l.next());return c.finishInner(this.nextLayer.isEmpty&&!u.length?lt.empty:this.nextLayer.update({add:u,filter:o,filterFrom:i,filterTo:r}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],s=[],i=-1;for(let o=0;o<this.chunk.length;o++){let l=this.chunkPos[o],a=this.chunk[o],u=e.touchesRange(l,l+a.length);if(u===!1)i=Math.max(i,a.maxPoint),t.push(a),s.push(e.mapPos(l));else if(u===!0){let{mapped:c,pos:d}=a.map(l,e);c&&(i=Math.max(i,c.maxPoint),t.push(c),s.push(d))}}let r=this.nextLayer.map(e);return t.length==0?r:new lt(s,t,r||lt.empty,i)}between(e,t,s){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let r=this.chunkPos[i],o=this.chunk[i];if(t>=r&&e<=r+o.length&&o.between(r,e-r,t-r,s)===!1)return}this.nextLayer.between(e,t,s)}}iter(e=0){return bl.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return bl.from(e).goto(t)}static compare(e,t,s,i,r=-1){let o=e.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=r),l=t.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=r),a=Ig(o,l,s),u=new Ro(o,a,r),c=new Ro(l,a,r);s.iterGaps((d,f,p)=>jg(u,d,c,f,p,i)),s.empty&&s.length==0&&jg(u,0,c,0,0,i)}static eq(e,t,s=0,i){i==null&&(i=999999999);let r=e.filter(c=>!c.isEmpty&&t.indexOf(c)<0),o=t.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(r.length!=o.length)return!1;if(!r.length)return!0;let l=Ig(r,o),a=new Ro(r,l,0).goto(s),u=new Ro(o,l,0).goto(s);for(;;){if(a.to!=u.to||!wf(a.active,u.active)||a.point&&(!u.point||!a.point.eq(u.point)))return!1;if(a.to>i)return!0;a.next(),u.next()}}static spans(e,t,s,i,r=-1){let o=new Ro(e,null,r).goto(t),l=t,a=o.openStart;for(;;){let u=Math.min(o.to,s);if(o.point){let c=o.activeForPoint(o.to),d=o.pointFrom<t?c.length+1:o.point.startSide<0?c.length:Math.min(c.length,a);i.point(l,u,o.point,c,d,o.pointRank),a=Math.min(o.openEnd(u),c.length)}else u>l&&(i.span(l,u,o.active,a),a=o.openEnd(u));if(o.to>s)return a+(o.point&&o.to>s?1:0);l=o.to,o.next()}}static of(e,t=!1){let s=new ti;for(let i of e instanceof xf?[e]:t?B3(e):e)s.add(i.from,i.to,i.value);return s.finish()}static join(e){if(!e.length)return lt.empty;let t=e[e.length-1];for(let s=e.length-2;s>=0;s--)for(let i=e[s];i!=lt.empty;i=i.nextLayer)t=new lt(i.chunkPos,i.chunk,t,Math.max(i.maxPoint,t.maxPoint));return t}}lt.empty=new lt([],[],null,-1);function B3(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let s=n[t];if(_f(e,s)>0)return n.slice().sort(_f);e=s}return n}lt.empty.nextLayer=lt.empty;class ti{finishChunk(e){this.chunks.push(new Wh(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,s){this.addInner(e,t,s)||(this.nextLayer||(this.nextLayer=new ti)).add(e,t,s)}addInner(e,t,s){let i=e-this.lastTo||s.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||s.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=s,this.lastFrom=e,this.lastTo=t,this.value.push(s),s.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let s=t.value.length-1;return this.last=t.value[s],this.lastFrom=t.from[s]+e,this.lastTo=t.to[s]+e,!0}finish(){return this.finishInner(lt.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=lt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function Ig(n,e,t){let s=new Map;for(let r of n)for(let o=0;o<r.chunk.length;o++)r.chunk[o].maxPoint<=0&&s.set(r.chunk[o],r.chunkPos[o]);let i=new Set;for(let r of e)for(let o=0;o<r.chunk.length;o++){let l=s.get(r.chunk[o]);l!=null&&(t?t.mapPos(l):l)==r.chunkPos[o]&&!t?.touchesRange(l,l+r.chunk[o].length)&&i.add(r.chunk[o])}return i}class Xb{constructor(e,t,s,i=0){this.layer=e,this.skip=t,this.minPoint=s,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,s){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,s=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!s||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],s=e+t.from[this.rangeIndex];if(this.from=s,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class bl{constructor(e){this.heap=e}static from(e,t=null,s=-1){let i=[];for(let r=0;r<e.length;r++)for(let o=e[r];!o.isEmpty;o=o.nextLayer)o.maxPoint>=s&&i.push(new Xb(o,t,s,r));return i.length==1?i[0]:new bl(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let s of this.heap)s.goto(e,t);for(let s=this.heap.length>>1;s>=0;s--)od(this.heap,s);return this.next(),this}forward(e,t){for(let s of this.heap)s.forward(e,t);for(let s=this.heap.length>>1;s>=0;s--)od(this.heap,s);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),od(this.heap,0)}}}function od(n,e){for(let t=n[e];;){let s=(e<<1)+1;if(s>=n.length)break;let i=n[s];if(s+1<n.length&&i.compare(n[s+1])>=0&&(i=n[s+1],s++),t.compare(i)<0)break;n[s]=t,n[e]=i,e=s}}class Ro{constructor(e,t,s){this.minPoint=s,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=bl.from(e,t,s)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){ba(this.active,e),ba(this.activeTo,e),ba(this.activeRank,e),this.minActive=Vg(this.active,this.activeTo)}addActive(e){let t=0,{value:s,to:i,rank:r}=this.cursor;for(;t<this.activeRank.length&&(r-this.activeRank[t]||i-this.activeTo[t])>0;)t++;ka(this.active,t,s),ka(this.activeTo,t,i),ka(this.activeRank,t,r),e&&ka(e,t,this.cursor.from),this.minActive=Vg(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let s=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),s&&ba(s,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let r=this.cursor.value;if(!r.point)this.addActive(s),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=r,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=r.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(s){this.openStart=0;for(let i=s.length-1;i>=0&&s[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let s=this.active.length-1;s>=0&&!(this.activeRank[s]<this.pointRank);s--)(this.activeTo[s]>e||this.activeTo[s]==e&&this.active[s].endSide>=this.point.endSide)&&t.push(this.active[s]);return t.reverse()}openEnd(e){let t=0;for(let s=this.activeTo.length-1;s>=0&&this.activeTo[s]>e;s--)t++;return t}}function jg(n,e,t,s,i,r){n.goto(e),t.goto(s);let o=s+i,l=s,a=s-e;for(;;){let u=n.to+a-t.to,c=u||n.endSide-t.endSide,d=c<0?n.to+a:t.to,f=Math.min(d,o);if(n.point||t.point?n.point&&t.point&&(n.point==t.point||n.point.eq(t.point))&&wf(n.activeForPoint(n.to),t.activeForPoint(t.to))||r.comparePoint(l,f,n.point,t.point):f>l&&!wf(n.active,t.active)&&r.compareRange(l,f,n.active,t.active),d>o)break;(u||n.openEnd!=t.openEnd)&&r.boundChange&&r.boundChange(d),l=d,c<=0&&n.next(),c>=0&&t.next()}}function wf(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!n[t].eq(e[t]))return!1;return!0}function ba(n,e){for(let t=e,s=n.length-1;t<s;t++)n[t]=n[t+1];n.pop()}function ka(n,e,t){for(let s=n.length-1;s>=e;s--)n[s+1]=n[s];n[e]=t}function Vg(n,e){let t=-1,s=1e9;for(let i=0;i<e.length;i++)(e[i]-s||n[i].endSide-n[t].endSide)<0&&(t=i,s=e[i]);return t}function mo(n,e,t=n.length){let s=0;for(let i=0;i<t&&i<n.length;)n.charCodeAt(i)==9?(s+=e-s%e,i++):(s++,i=on(n,i));return s}function Sf(n,e,t,s){for(let i=0,r=0;;){if(r>=e)return i;if(i==n.length)break;r+=n.charCodeAt(i)==9?t-r%t:1,i=on(n,i)}return s===!0?-1:n.length}const Cf="",$g=typeof Symbol>"u"?"__"+Cf:Symbol.for(Cf),Af=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Ng=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Ti{constructor(e,t){this.rules=[];let{finish:s}=t||{};function i(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function r(o,l,a,u){let c=[],d=/^@(\w+)\b/.exec(o[0]),f=d&&d[1]=="keyframes";if(d&&l==null)return a.push(o[0]+";");for(let p in l){let g=l[p];if(/&/.test(p))r(p.split(/,\s*/).map(b=>o.map(x=>b.replace(/&/,x))).reduce((b,x)=>b.concat(x)),g,a);else if(g&&typeof g=="object"){if(!d)throw new RangeError("The value of a property ("+p+") should be a primitive value.");r(i(p),g,c,f)}else g!=null&&c.push(p.replace(/_.*/,"").replace(/[A-Z]/g,b=>"-"+b.toLowerCase())+": "+g+";")}(c.length||f)&&a.push((s&&!d&&!u?o.map(s):o).join(", ")+" {"+c.join(" ")+"}")}for(let o in e)r(i(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=Ng[$g]||1;return Ng[$g]=e+1,Cf+e.toString(36)}static mount(e,t,s){let i=e[Af],r=s&&s.nonce;i?r&&i.setNonce(r):i=new F3(e,r),i.mount(Array.isArray(t)?t:[t],e)}}let Bg=new Map;class F3{constructor(e,t){let s=e.ownerDocument||e,i=s.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let r=Bg.get(s);if(r)return e[Af]=r;this.sheet=new i.CSSStyleSheet,Bg.set(s,this)}else this.styleTag=s.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[Af]=this}mount(e,t){let s=this.sheet,i=0,r=0;for(let o=0;o<e.length;o++){let l=e[o],a=this.modules.indexOf(l);if(a<r&&a>-1&&(this.modules.splice(a,1),r--,a=-1),a==-1){if(this.modules.splice(r++,0,l),s)for(let u=0;u<l.rules.length;u++)s.insertRule(l.rules[u],i++)}else{for(;r<a;)i+=this.modules[r++].rules.length;i+=l.rules.length,r++}}if(s)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let o="";for(let a=0;a<this.modules.length;a++)o+=this.modules[a].getRules()+`
`;this.styleTag.textContent=o;let l=t.head||t;this.styleTag.parentNode!=l&&l.insertBefore(this.styleTag,l.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var Di={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},kl={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},U3=typeof navigator<"u"&&/Mac/.test(navigator.platform),z3=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var nn=0;nn<10;nn++)Di[48+nn]=Di[96+nn]=String(nn);for(var nn=1;nn<=24;nn++)Di[nn+111]="F"+nn;for(var nn=65;nn<=90;nn++)Di[nn]=String.fromCharCode(nn+32),kl[nn]=String.fromCharCode(nn);for(var ld in Di)kl.hasOwnProperty(ld)||(kl[ld]=Di[ld]);function H3(n){var e=U3&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||z3&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?kl:Di)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function xt(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var i=t[s];typeof i=="string"?n.setAttribute(s,i):i!=null&&(n[s]=i)}e++}for(;e<arguments.length;e++)Zb(n,arguments[e]);return n}function Zb(n,e){if(typeof e=="string")n.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)n.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)Zb(n,e[t]);else throw new RangeError("Unsupported child node: "+e)}let En=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Ef=typeof document<"u"?document:{documentElement:{style:{}}};const Tf=/Edge\/(\d+)/.exec(En.userAgent),e1=/MSIE \d/.test(En.userAgent),Df=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(En.userAgent),mc=!!(e1||Df||Tf),Fg=!mc&&/gecko\/(\d+)/i.test(En.userAgent),ad=!mc&&/Chrome\/(\d+)/.exec(En.userAgent),W3="webkitFontSmoothing"in Ef.documentElement.style,Pf=!mc&&/Apple Computer/.test(En.vendor),Ug=Pf&&(/Mobile\/\w+/.test(En.userAgent)||En.maxTouchPoints>2);var De={mac:Ug||/Mac/.test(En.platform),windows:/Win/.test(En.platform),linux:/Linux|X11/.test(En.platform),ie:mc,ie_version:e1?Ef.documentMode||6:Df?+Df[1]:Tf?+Tf[1]:0,gecko:Fg,gecko_version:Fg?+(/Firefox\/(\d+)/.exec(En.userAgent)||[0,0])[1]:0,chrome:!!ad,chrome_version:ad?+ad[1]:0,ios:Ug,android:/Android\b/.test(En.userAgent),webkit_version:W3?+(/\bAppleWebKit\/(\d+)/.exec(En.userAgent)||[0,0])[1]:0,safari:Pf,safari_version:Pf?+(/\bVersion\/(\d+(\.\d+)?)/.exec(En.userAgent)||[0,0])[1]:0,tabSize:Ef.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function xl(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function Rf(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function Qa(n,e){if(!e.anchorNode)return!1;try{return Rf(n,e.anchorNode)}catch{return!1}}function _l(n){return n.nodeType==3?cr(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function el(n,e,t,s){return t?zg(n,e,t,s,-1)||zg(n,e,t,s,1):!1}function ur(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function Eu(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}function zg(n,e,t,s,i){for(;;){if(n==t&&e==s)return!0;if(e==(i<0?0:$s(n))){if(n.nodeName=="DIV")return!1;let r=n.parentNode;if(!r||r.nodeType!=1)return!1;e=ur(n)+(i<0?0:1),n=r}else if(n.nodeType==1){if(n=n.childNodes[e+(i<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=i<0?$s(n):0}else return!1}}function $s(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function gc(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function q3(n){let e=n.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function t1(n,e){let t=e.width/n.offsetWidth,s=e.height/n.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-n.offsetWidth)<1)&&(t=1),(s>.995&&s<1.005||!isFinite(s)||Math.abs(e.height-n.offsetHeight)<1)&&(s=1),{scaleX:t,scaleY:s}}function G3(n,e,t,s,i,r,o,l){let a=n.ownerDocument,u=a.defaultView||window;for(let c=n,d=!1;c&&!d;)if(c.nodeType==1){let f,p=c==a.body,g=1,b=1;if(p)f=q3(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(d=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let w=c.getBoundingClientRect();({scaleX:g,scaleY:b}=t1(c,w)),f={left:w.left,right:w.left+c.clientWidth*g,top:w.top,bottom:w.top+c.clientHeight*b}}let x=0,m=0;if(i=="nearest")e.top<f.top?(m=e.top-(f.top+o),t>0&&e.bottom>f.bottom+m&&(m=e.bottom-f.bottom+o)):e.bottom>f.bottom&&(m=e.bottom-f.bottom+o,t<0&&e.top-m<f.top&&(m=e.top-(f.top+o)));else{let w=e.bottom-e.top,P=f.bottom-f.top;m=(i=="center"&&w<=P?e.top+w/2-P/2:i=="start"||i=="center"&&t<0?e.top-o:e.bottom-P+o)-f.top}if(s=="nearest"?e.left<f.left?(x=e.left-(f.left+r),t>0&&e.right>f.right+x&&(x=e.right-f.right+r)):e.right>f.right&&(x=e.right-f.right+r,t<0&&e.left<f.left+x&&(x=e.left-(f.left+r))):x=(s=="center"?e.left+(e.right-e.left)/2-(f.right-f.left)/2:s=="start"==l?e.left-r:e.right-(f.right-f.left)+r)-f.left,x||m)if(p)u.scrollBy(x,m);else{let w=0,P=0;if(m){let U=c.scrollTop;c.scrollTop+=m/b,P=(c.scrollTop-U)*b}if(x){let U=c.scrollLeft;c.scrollLeft+=x/g,w=(c.scrollLeft-U)*g}e={left:e.left-w,top:e.top-P,right:e.right-w,bottom:e.bottom-P},w&&Math.abs(w-x)<1&&(s="nearest"),P&&Math.abs(P-m)<1&&(i="nearest")}if(p)break;(e.top<f.top||e.bottom>f.bottom||e.left<f.left||e.right>f.right)&&(e={left:Math.max(e.left,f.left),right:Math.min(e.right,f.right),top:Math.max(e.top,f.top),bottom:Math.min(e.bottom,f.bottom)}),c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function K3(n){let e=n.ownerDocument,t,s;for(let i=n.parentNode;i&&!(i==e.body||t&&s);)if(i.nodeType==1)!s&&i.scrollHeight>i.clientHeight&&(s=i),!t&&i.scrollWidth>i.clientWidth&&(t=i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;return{x:t,y:s}}class J3{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:s}=e;this.set(t,Math.min(e.anchorOffset,t?$s(t):0),s,Math.min(e.focusOffset,s?$s(s):0))}set(e,t,s,i){this.anchorNode=e,this.anchorOffset=t,this.focusNode=s,this.focusOffset=i}}let Gi=null;De.safari&&De.safari_version>=26&&(Gi=!1);function n1(n){if(n.setActive)return n.setActive();if(Gi)return n.focus(Gi);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(Gi==null?{get preventScroll(){return Gi={preventScroll:!0},!0}}:void 0),!Gi){Gi=!1;for(let t=0;t<e.length;){let s=e[t++],i=e[t++],r=e[t++];s.scrollTop!=i&&(s.scrollTop=i),s.scrollLeft!=r&&(s.scrollLeft=r)}}}let Hg;function cr(n,e,t=e){let s=Hg||(Hg=document.createRange());return s.setEnd(n,t),s.setStart(n,e),s}function Wr(n,e,t,s){let i={key:e,code:e,keyCode:t,which:t,cancelable:!0};s&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=s);let r=new KeyboardEvent("keydown",i);r.synthetic=!0,n.dispatchEvent(r);let o=new KeyboardEvent("keyup",i);return o.synthetic=!0,n.dispatchEvent(o),r.defaultPrevented||o.defaultPrevented}function Q3(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function s1(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}function Y3(n,e){let t=e.focusNode,s=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=s)return!1;for(s=Math.min(s,$s(t));;)if(s){if(t.nodeType!=1)return!1;let i=t.childNodes[s-1];i.contentEditable=="false"?s--:(t=i,s=$s(t))}else{if(t==n)return!0;s=ur(t),t=t.parentNode}}function i1(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}function r1(n,e){for(let t=n,s=e;;){if(t.nodeType==3&&s>0)return{node:t,offset:s};if(t.nodeType==1&&s>0){if(t.contentEditable=="false")return null;t=t.childNodes[s-1],s=$s(t)}else if(t.parentNode&&!Eu(t))s=ur(t),t=t.parentNode;else return null}}function o1(n,e){for(let t=n,s=e;;){if(t.nodeType==3&&s<t.nodeValue.length)return{node:t,offset:s};if(t.nodeType==1&&s<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[s],s=0}else if(t.parentNode&&!Eu(t))s=ur(t)+1,t=t.parentNode;else return null}}class yn{constructor(e,t,s=!0){this.node=e,this.offset=t,this.precise=s}static before(e,t){return new yn(e.parentNode,ur(e),t)}static after(e,t){return new yn(e.parentNode,ur(e)+1,t)}}const qh=[];class gt{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let s of this.children){if(s==e)return t;t+=s.length+s.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let s=this.dom,i=null,r;for(let o of this.children){if(o.flags&7){if(!o.dom&&(r=i?i.nextSibling:s.firstChild)){let l=gt.get(r);(!l||!l.parent&&l.canReuseDOM(o))&&o.reuseDOM(r)}o.sync(e,t),o.flags&=-8}if(r=i?i.nextSibling:s.firstChild,t&&!t.written&&t.node==s&&r!=o.dom&&(t.written=!0),o.dom.parentNode==s)for(;r&&r!=o.dom;)r=Wg(r);else s.insertBefore(o.dom,r);i=o.dom}for(r=i?i.nextSibling:s.firstChild,r&&t&&t.node==s&&(t.written=!0);r;)r=Wg(r)}else if(this.flags&1)for(let s of this.children)s.flags&7&&(s.sync(e,t),s.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let s;if(e==this.dom)s=this.dom.childNodes[t];else{let i=$s(e)==0?0:t==0?-1:1;for(;;){let r=e.parentNode;if(r==this.dom)break;i==0&&r.firstChild!=r.lastChild&&(e==r.firstChild?i=-1:i=1),e=r}i<0?s=e:s=e.nextSibling}if(s==this.dom.firstChild)return 0;for(;s&&!gt.get(s);)s=s.nextSibling;if(!s)return this.length;for(let i=0,r=0;;i++){let o=this.children[i];if(o.dom==s)return r;r+=o.length+o.breakAfter}}domBoundsAround(e,t,s=0){let i=-1,r=-1,o=-1,l=-1;for(let a=0,u=s,c=s;a<this.children.length;a++){let d=this.children[a],f=u+d.length;if(u<e&&f>t)return d.domBoundsAround(e,t,u);if(f>=e&&i==-1&&(i=a,r=u),u>t&&d.dom.parentNode==this.dom){o=a,l=c;break}c=f,u=f+d.breakAfter}return{from:r,to:l<0?s+this.length:l,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,s=qh){this.markDirty();for(let i=e;i<t;i++){let r=this.children[i];r.parent==this&&s.indexOf(r)<0&&r.destroy()}s.length<250?this.children.splice(e,t-e,...s):this.children=[].concat(this.children.slice(0,e),s,this.children.slice(t));for(let i=0;i<s.length;i++)s[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new l1(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,s,i,r,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}gt.prototype.breakAfter=0;function Wg(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class l1{constructor(e,t,s){this.children=e,this.pos=t,this.i=s,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let s=this.children[--this.i];this.pos-=s.length+s.breakAfter}}}function a1(n,e,t,s,i,r,o,l,a){let{children:u}=n,c=u.length?u[e]:null,d=r.length?r[r.length-1]:null,f=d?d.breakAfter:o;if(!(e==s&&c&&!o&&!f&&r.length<2&&c.merge(t,i,r.length?d:null,t==0,l,a))){if(s<u.length){let p=u[s];p&&(i<p.length||p.breakAfter&&d?.breakAfter)?(e==s&&(p=p.split(i),i=0),!f&&d&&p.merge(0,i,d,!0,0,a)?r[r.length-1]=p:((i||p.children.length&&!p.children[0].length)&&p.merge(0,i,null,!1,0,a),r.push(p))):p?.breakAfter&&(d?d.breakAfter=1:o=1),s++}for(c&&(c.breakAfter=o,t>0&&(!o&&r.length&&c.merge(t,c.length,r[0],!1,l,0)?c.breakAfter=r.shift().breakAfter:(t<c.length||c.children.length&&c.children[c.children.length-1].length==0)&&c.merge(t,c.length,null,!1,l,0),e++));e<s&&r.length;)if(u[s-1].become(r[r.length-1]))s--,r.pop(),a=r.length?0:l;else if(u[e].become(r[0]))e++,r.shift(),l=r.length?0:a;else break;!r.length&&e&&s<u.length&&!u[e-1].breakAfter&&u[s].merge(0,0,u[e-1],!1,l,a)&&e--,(e<s||r.length)&&n.replaceChildren(e,s,r)}}function u1(n,e,t,s,i,r){let o=n.childCursor(),{i:l,off:a}=o.findPos(t,1),{i:u,off:c}=o.findPos(e,-1),d=e-t;for(let f of s)d+=f.length;n.length+=d,a1(n,u,c,l,a,s,0,i,r)}const X3=256;class gs extends gt{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,s){return this.flags&8||s&&(!(s instanceof gs)||this.length-(t-e)+s.length>X3||s.flags&8)?!1:(this.text=this.text.slice(0,e)+(s?s.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new gs(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new yn(this.dom,e)}domBoundsAround(e,t,s){return{from:s,to:s+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return Z3(this.dom,e,t)}}class ni extends gt{constructor(e,t=[],s=0){super(),this.mark=e,this.children=t,this.length=s;for(let i of t)i.setParent(this)}setAttrs(e){if(s1(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,s,i,r,o){return s&&(!(s instanceof ni&&s.mark.eq(this.mark))||e&&r<=0||t<this.length&&o<=0)?!1:(u1(this,e,t,s?s.children.slice():[],r-1,o-1),this.markDirty(),!0)}split(e){let t=[],s=0,i=-1,r=0;for(let l of this.children){let a=s+l.length;a>e&&t.push(s<e?l.split(e-s):l),i<0&&s>=e&&(i=r),s=a,r++}let o=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new ni(this.mark,t,o)}domAtPos(e){return c1(this,e)}coordsAt(e,t){return f1(this,e,t)}}function Z3(n,e,t){let s=n.nodeValue.length;e>s&&(e=s);let i=e,r=e,o=0;e==0&&t<0||e==s&&t>=0?De.chrome||De.gecko||(e?(i--,o=1):r<s&&(r++,o=-1)):t<0?i--:r<s&&r++;let l=cr(n,i,r).getClientRects();if(!l.length)return null;let a=l[(o?o<0:t>=0)?0:l.length-1];return De.safari&&!o&&a.width==0&&(a=Array.prototype.find.call(l,u=>u.width)||a),o?gc(a,o<0):a||null}class yi extends gt{static create(e,t,s){return new yi(e,t,s)}constructor(e,t,s){super(),this.widget=e,this.length=t,this.side=s,this.prevWidget=null}split(e){let t=yi.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,s,i,r,o){return s&&(!(s instanceof yi)||!this.widget.compare(s.widget)||e>0&&r<=0||t<this.length&&o<=0)?!1:(this.length=e+(s?s.length:0)+(this.length-t),!0)}become(e){return e instanceof yi&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return at.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,s=t&&t.state.doc,i=this.posAtStart;return s?s.slice(i,i+this.length):at.empty}domAtPos(e){return(this.length?e==0:this.side>0)?yn.before(this.dom):yn.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let s=this.widget.coordsAt(this.dom,e,t);if(s)return s;let i=this.dom.getClientRects(),r=null;if(!i.length)return null;let o=this.side?this.side<0:e>0;for(let l=o?i.length-1:0;r=i[l],!(e>0?l==0:l==i.length-1||r.top<r.bottom);l+=o?-1:1);return gc(r,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class eo extends gt{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof eo&&e.side==this.side}split(){return new eo(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?yn.before(this.dom):yn.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return at.empty}get isHidden(){return!0}}gs.prototype.children=yi.prototype.children=eo.prototype.children=qh;function c1(n,e){let t=n.dom,{children:s}=n,i=0;for(let r=0;i<s.length;i++){let o=s[i],l=r+o.length;if(!(l==r&&o.getSide()<=0)){if(e>r&&e<l&&o.dom.parentNode==t)return o.domAtPos(e-r);if(e<=r)break;r=l}}for(let r=i;r>0;r--){let o=s[r-1];if(o.dom.parentNode==t)return o.domAtPos(o.length)}for(let r=i;r<s.length;r++){let o=s[r];if(o.dom.parentNode==t)return o.domAtPos(0)}return new yn(t,0)}function d1(n,e,t){let s,{children:i}=n;t>0&&e instanceof ni&&i.length&&(s=i[i.length-1])instanceof ni&&s.mark.eq(e.mark)?d1(s,e.children[0],t-1):(i.push(e),e.setParent(n)),n.length+=e.length}function f1(n,e,t){let s=null,i=-1,r=null,o=-1;function l(u,c){for(let d=0,f=0;d<u.children.length&&f<=c;d++){let p=u.children[d],g=f+p.length;g>=c&&(p.children.length?l(p,c-f):(!r||r.isHidden&&(t>0||tP(r,p)))&&(g>c||f==g&&p.getSide()>0)?(r=p,o=c-f):(f<c||f==g&&p.getSide()<0&&!p.isHidden)&&(s=p,i=c-f)),f=g}}l(n,e);let a=(t<0?s:r)||s||r;return a?a.coordsAt(Math.max(0,a==s?i:o),t):eP(n)}function eP(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=_l(e);return t[t.length-1]||null}function tP(n,e){let t=n.coordsAt(0,1),s=e.coordsAt(0,1);return t&&s&&s.top<t.bottom}function Of(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}const qg=Object.create(null);function Tu(n,e,t){if(n==e)return!0;n||(n=qg),e||(e=qg);let s=Object.keys(n),i=Object.keys(e);if(s.length-(t&&s.indexOf(t)>-1?1:0)!=i.length-(t&&i.indexOf(t)>-1?1:0))return!1;for(let r of s)if(r!=t&&(i.indexOf(r)==-1||n[r]!==e[r]))return!1;return!0}function Lf(n,e,t){let s=!1;if(e)for(let i in e)t&&i in t||(s=!0,i=="style"?n.style.cssText="":n.removeAttribute(i));if(t)for(let i in t)e&&e[i]==t[i]||(s=!0,i=="style"?n.style.cssText=t[i]:n.setAttribute(i,t[i]));return s}function nP(n){let e=Object.create(null);for(let t=0;t<n.attributes.length;t++){let s=n.attributes[t];e[s.name]=s.value}return e}class Li{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,s){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Pn=(function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n})(Pn||(Pn={}));class ze extends ar{constructor(e,t,s,i){super(),this.startSide=e,this.endSide=t,this.widget=s,this.spec=i}get heightRelevant(){return!1}static mark(e){return new zl(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),s=!!e.block;return t+=s&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new Pi(e,t,t,s,e.widget||null,!1)}static replace(e){let t=!!e.block,s,i;if(e.isBlockGap)s=-5e8,i=4e8;else{let{start:r,end:o}=h1(e,t);s=(r?t?-3e8:-1:5e8)-1,i=(o?t?2e8:1:-6e8)+1}return new Pi(e,s,i,t,e.widget||null,!0)}static line(e){return new Hl(e)}static set(e,t=!1){return lt.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}ze.none=lt.empty;class zl extends ze{constructor(e){let{start:t,end:s}=h1(e);super(t?-1:5e8,s?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,s;return this==e||e instanceof zl&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((s=e.attrs)===null||s===void 0?void 0:s.class))&&Tu(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}zl.prototype.point=!1;class Hl extends ze{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Hl&&this.spec.class==e.spec.class&&Tu(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}Hl.prototype.mapMode=Dn.TrackBefore;Hl.prototype.point=!0;class Pi extends ze{constructor(e,t,s,i,r,o){super(t,s,r,e),this.block=i,this.isReplace=o,this.mapMode=i?t<=0?Dn.TrackBefore:Dn.TrackAfter:Dn.TrackDel}get type(){return this.startSide!=this.endSide?Pn.WidgetRange:this.startSide<=0?Pn.WidgetBefore:Pn.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Pi&&sP(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}Pi.prototype.point=!0;function h1(n,e=!1){let{inclusiveStart:t,inclusiveEnd:s}=n;return t==null&&(t=n.inclusive),s==null&&(s=n.inclusive),{start:t??e,end:s??e}}function sP(n,e){return n==e||!!(n&&e&&n.compare(e))}function Ya(n,e,t,s=0){let i=t.length-1;i>=0&&t[i]+s>=n?t[i]=Math.max(t[i],e):t.push(n,e)}class Ft extends gt{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,s,i,r,o){if(s){if(!(s instanceof Ft))return!1;this.dom||s.transferDOM(this)}return i&&this.setDeco(s?s.attrs:null),u1(this,e,t,s?s.children.slice():[],r,o),!0}split(e){let t=new Ft;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i:s,off:i}=this.childPos(e);i&&(t.append(this.children[s].split(i),0),this.children[s].merge(i,this.children[s].length,null,!1,0,0),s++);for(let r=s;r<this.children.length;r++)t.append(this.children[r],0);for(;s>0&&this.children[s-1].length==0;)this.children[--s].destroy();return this.children.length=s,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Tu(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){d1(this,e,t)}addLineDeco(e){let t=e.spec.attributes,s=e.spec.class;t&&(this.attrs=Of(t,this.attrs||{})),s&&(this.attrs=Of({class:s},this.attrs||{}))}domAtPos(e){return c1(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var s;this.dom?this.flags&4&&(s1(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(Lf(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let i=this.dom.lastChild;for(;i&&gt.get(i)instanceof ni;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((s=gt.get(i))===null||s===void 0?void 0:s.isEditable)==!1&&(!De.ios||!this.children.some(r=>r instanceof gs))){let r=document.createElement("BR");r.cmIgnore=!0,this.dom.appendChild(r)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let s of this.children){if(!(s instanceof gs)||/[^ -~]/.test(s.text))return null;let i=_l(s.dom);if(i.length!=1)return null;e+=i[0].width,t=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let s=f1(this,e,t);if(!this.children.length&&s&&this.parent){let{heightOracle:i}=this.parent.view.viewState,r=s.bottom-s.top;if(Math.abs(r-i.lineHeight)<2&&i.textHeight<r){let o=(r-i.textHeight)/2;return{top:s.top+o,bottom:s.bottom-o,left:s.left,right:s.left}}}return s}become(e){return e instanceof Ft&&this.children.length==0&&e.children.length==0&&Tu(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let s=0,i=0;s<e.children.length;s++){let r=e.children[s],o=i+r.length;if(o>=t){if(r instanceof Ft)return r;if(o>t)break}i=o+r.breakAfter}return null}}class Xs extends gt{constructor(e,t,s){super(),this.widget=e,this.length=t,this.deco=s,this.breakAfter=0,this.prevWidget=null}merge(e,t,s,i,r,o){return s&&(!(s instanceof Xs)||!this.widget.compare(s.widget)||e>0&&r<=0||t<this.length&&o<=0)?!1:(this.length=e+(s?s.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?yn.before(this.dom):yn.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let s=new Xs(this.widget,t,this.deco);return s.breakAfter=this.breakAfter,s}get children(){return qh}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):at.empty}domBoundsAround(){return null}become(e){return e instanceof Xs&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){let s=this.widget.coordsAt(this.dom,e,t);return s||(this.widget instanceof Mf?null:gc(this.dom.getBoundingClientRect(),this.length?e==0:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:s}=this.deco;return t==s?!1:e<0?t<0:s>0}}class Mf extends Li{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class tl{constructor(e,t,s,i){this.doc=e,this.pos=t,this.end=s,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Xs&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Ft),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(xa(new eo(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Xs)&&this.getLine()}buildText(e,t,s){for(;e>0;){if(this.textOff==this.text.length){let{value:o,lineBreak:l,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(l){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=o,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e),r=Math.min(i,512);this.flushBuffer(t.slice(t.length-s)),this.getLine().append(xa(new gs(this.text.slice(this.textOff,this.textOff+r)),t),s),this.atCursorPos=!0,this.textOff+=r,e-=r,s=i<=r?0:t.length}}span(e,t,s,i){this.buildText(t-e,s,i),this.pos=t,this.openStart<0&&(this.openStart=i)}point(e,t,s,i,r,o){if(this.disallowBlockEffectsFor[o]&&s instanceof Pi){if(s.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=t-e;if(s instanceof Pi)if(s.block)s.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Xs(s.widget||to.block,l,s));else{let a=yi.create(s.widget||to.inline,l,l?0:s.startSide),u=this.atCursorPos&&!a.isEditable&&r<=i.length&&(e<t||s.startSide>0),c=!a.isEditable&&(e<t||r>i.length||s.startSide<=0),d=this.getLine();this.pendingBuffer==2&&!u&&!a.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),u&&(d.append(xa(new eo(1),i),r),r=i.length+Math.max(0,r-i.length)),d.append(xa(a,i),r),this.atCursorPos=c,this.pendingBuffer=c?e<t||r>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(s);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=r)}static build(e,t,s,i,r){let o=new tl(e,t,s,r);return o.openEnd=lt.spans(i,t,s,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function xa(n,e){for(let t of e)n=new ni(t,[n],n.length);return n}class to extends Li{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}to.inline=new to("span");to.block=new to("div");var Tt=(function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n})(Tt||(Tt={}));const dr=Tt.LTR,Gh=Tt.RTL;function p1(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const iP=p1("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),rP=p1("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),If=Object.create(null),ws=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);If[e]=t,If[t]=-e}function m1(n){return n<=247?iP[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?rP[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8204?256:64336<=n&&n<=65023?4:1}const oP=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class bi{get dir(){return this.level%2?Gh:dr}constructor(e,t,s){this.from=e,this.to=t,this.level=s}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,s,i){let r=-1;for(let o=0;o<e.length;o++){let l=e[o];if(l.from<=t&&l.to>=t){if(l.level==s)return o;(r<0||(i!=0?i<0?l.from<t:l.to>t:e[r].level>l.level))&&(r=o)}}if(r<0)throw new RangeError("Index out of range");return r}}function g1(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++){let s=n[t],i=e[t];if(s.from!=i.from||s.to!=i.to||s.direction!=i.direction||!g1(s.inner,i.inner))return!1}return!0}const _t=[];function lP(n,e,t,s,i){for(let r=0;r<=s.length;r++){let o=r?s[r-1].to:e,l=r<s.length?s[r].from:t,a=r?256:i;for(let u=o,c=a,d=a;u<l;u++){let f=m1(n.charCodeAt(u));f==512?f=c:f==8&&d==4&&(f=16),_t[u]=f==4?2:f,f&7&&(d=f),c=f}for(let u=o,c=a,d=a;u<l;u++){let f=_t[u];if(f==128)u<l-1&&c==_t[u+1]&&c&24?f=_t[u]=c:_t[u]=256;else if(f==64){let p=u+1;for(;p<l&&_t[p]==64;)p++;let g=u&&c==8||p<t&&_t[p]==8?d==1?1:8:256;for(let b=u;b<p;b++)_t[b]=g;u=p-1}else f==8&&d==1&&(_t[u]=1);c=f,f&7&&(d=f)}}}function aP(n,e,t,s,i){let r=i==1?2:1;for(let o=0,l=0,a=0;o<=s.length;o++){let u=o?s[o-1].to:e,c=o<s.length?s[o].from:t;for(let d=u,f,p,g;d<c;d++)if(p=If[f=n.charCodeAt(d)])if(p<0){for(let b=l-3;b>=0;b-=3)if(ws[b+1]==-p){let x=ws[b+2],m=x&2?i:x&4?x&1?r:i:0;m&&(_t[d]=_t[ws[b]]=m),l=b;break}}else{if(ws.length==189)break;ws[l++]=d,ws[l++]=f,ws[l++]=a}else if((g=_t[d])==2||g==1){let b=g==i;a=b?0:1;for(let x=l-3;x>=0;x-=3){let m=ws[x+2];if(m&2)break;if(b)ws[x+2]|=2;else{if(m&4)break;ws[x+2]|=4}}}}}function uP(n,e,t,s){for(let i=0,r=s;i<=t.length;i++){let o=i?t[i-1].to:n,l=i<t.length?t[i].from:e;for(let a=o;a<l;){let u=_t[a];if(u==256){let c=a+1;for(;;)if(c==l){if(i==t.length)break;c=t[i++].to,l=i<t.length?t[i].from:e}else if(_t[c]==256)c++;else break;let d=r==1,f=(c<e?_t[c]:s)==1,p=d==f?d?1:2:s;for(let g=c,b=i,x=b?t[b-1].to:n;g>a;)g==x&&(g=t[--b].from,x=b?t[b-1].to:n),_t[--g]=p;a=c}else r=u,a++}}}function jf(n,e,t,s,i,r,o){let l=s%2?2:1;if(s%2==i%2)for(let a=e,u=0;a<t;){let c=!0,d=!1;if(u==r.length||a<r[u].from){let b=_t[a];b!=l&&(c=!1,d=b==16)}let f=!c&&l==1?[]:null,p=c?s:s+1,g=a;e:for(;;)if(u<r.length&&g==r[u].from){if(d)break e;let b=r[u];if(!c)for(let x=b.to,m=u+1;;){if(x==t)break e;if(m<r.length&&r[m].from==x)x=r[m++].to;else{if(_t[x]==l)break e;break}}if(u++,f)f.push(b);else{b.from>a&&o.push(new bi(a,b.from,p));let x=b.direction==dr!=!(p%2);Vf(n,x?s+1:s,i,b.inner,b.from,b.to,o),a=b.to}g=b.to}else{if(g==t||(c?_t[g]!=l:_t[g]==l))break;g++}f?jf(n,a,g,s+1,i,f,o):a<g&&o.push(new bi(a,g,p)),a=g}else for(let a=t,u=r.length;a>e;){let c=!0,d=!1;if(!u||a>r[u-1].to){let b=_t[a-1];b!=l&&(c=!1,d=b==16)}let f=!c&&l==1?[]:null,p=c?s:s+1,g=a;e:for(;;)if(u&&g==r[u-1].to){if(d)break e;let b=r[--u];if(!c)for(let x=b.from,m=u;;){if(x==e)break e;if(m&&r[m-1].to==x)x=r[--m].from;else{if(_t[x-1]==l)break e;break}}if(f)f.push(b);else{b.to<a&&o.push(new bi(b.to,a,p));let x=b.direction==dr!=!(p%2);Vf(n,x?s+1:s,i,b.inner,b.from,b.to,o),a=b.from}g=b.from}else{if(g==e||(c?_t[g-1]!=l:_t[g-1]==l))break;g--}f?jf(n,g,a,s+1,i,f,o):g<a&&o.push(new bi(g,a,p)),a=g}}function Vf(n,e,t,s,i,r,o){let l=e%2?2:1;lP(n,i,r,s,l),aP(n,i,r,s,l),uP(i,r,s,l),jf(n,i,r,e,t,s,o)}function cP(n,e,t){if(!n)return[new bi(0,0,e==Gh?1:0)];if(e==dr&&!t.length&&!oP.test(n))return v1(n.length);if(t.length)for(;n.length>_t.length;)_t[_t.length]=256;let s=[],i=e==dr?0:1;return Vf(n,i,i,t,0,n.length,s),s}function v1(n){return[new bi(0,n,0)]}let y1="";function dP(n,e,t,s,i){var r;let o=s.head-n.from,l=bi.find(e,o,(r=s.bidiLevel)!==null&&r!==void 0?r:-1,s.assoc),a=e[l],u=a.side(i,t);if(o==u){let f=l+=i?1:-1;if(f<0||f>=e.length)return null;a=e[l=f],o=a.side(!i,t),u=a.side(i,t)}let c=on(n.text,o,a.forward(i,t));(c<a.from||c>a.to)&&(c=u),y1=n.text.slice(Math.min(o,c),Math.max(o,c));let d=l==(i?e.length-1:0)?null:e[l+(i?1:-1)];return d&&c==u&&d.level+(i?0:1)<a.level?he.cursor(d.side(!i,t)+n.from,d.forward(i,t)?1:-1,d.level):he.cursor(c+n.from,a.forward(i,t)?-1:1,a.level)}function fP(n,e,t){for(let s=e;s<t;s++){let i=m1(n.charCodeAt(s));if(i==1)return dr;if(i==2||i==4)return Gh}return dr}const b1=Le.define(),k1=Le.define(),x1=Le.define(),_1=Le.define(),$f=Le.define(),w1=Le.define(),S1=Le.define(),Kh=Le.define(),Jh=Le.define(),C1=Le.define({combine:n=>n.some(e=>e)}),A1=Le.define({combine:n=>n.some(e=>e)}),E1=Le.define();class qr{constructor(e,t="nearest",s="nearest",i=5,r=5,o=!1){this.range=e,this.y=t,this.x=s,this.yMargin=i,this.xMargin=r,this.isSnapshot=o}map(e){return e.empty?this:new qr(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new qr(he.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const _a=Ze.define({map:(n,e)=>n.map(e)}),T1=Ze.define();function Vn(n,e,t){let s=n.facet(_1);s.length?s[0](e):window.onerror&&window.onerror(String(e),t,void 0,void 0,e)||(t?console.error(t+":",e):console.error(e))}const Qs=Le.define({combine:n=>n.length?n[0]:!0});let hP=0;const Dr=Le.define({combine(n){return n.filter((e,t)=>{for(let s=0;s<t;s++)if(n[s].plugin==e.plugin)return!1;return!0})}});class zt{constructor(e,t,s,i,r){this.id=e,this.create=t,this.domEventHandlers=s,this.domEventObservers=i,this.baseExtensions=r(this),this.extension=this.baseExtensions.concat(Dr.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(Dr.of({plugin:this,arg:e}))}static define(e,t){const{eventHandlers:s,eventObservers:i,provide:r,decorations:o}=t||{};return new zt(hP++,e,s,i,l=>{let a=[];return o&&a.push(wl.of(u=>{let c=u.plugin(l);return c?o(c):ze.none})),r&&a.push(r(l)),a})}static fromClass(e,t){return zt.define((s,i)=>new e(s,i),t)}}class ud{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(s){if(Vn(t.state,s,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(t){Vn(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(s){Vn(e.state,s,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const D1=Le.define(),Qh=Le.define(),wl=Le.define(),P1=Le.define(),Wl=Le.define(),R1=Le.define();function Gg(n,e){let t=n.state.facet(R1);if(!t.length)return t;let s=t.map(r=>r instanceof Function?r(n):r),i=[];return lt.spans(s,e.from,e.to,{point(){},span(r,o,l,a){let u=r-e.from,c=o-e.from,d=i;for(let f=l.length-1;f>=0;f--,a--){let p=l[f].spec.bidiIsolate,g;if(p==null&&(p=fP(e.text,u,c)),a>0&&d.length&&(g=d[d.length-1]).to==u&&g.direction==p)g.to=c,d=g.inner;else{let b={from:u,to:c,direction:p,inner:[]};d.push(b),d=b.inner}}}}),i}const O1=Le.define();function Yh(n){let e=0,t=0,s=0,i=0;for(let r of n.state.facet(O1)){let o=r(n);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(t=Math.max(t,o.right)),o.top!=null&&(s=Math.max(s,o.top)),o.bottom!=null&&(i=Math.max(i,o.bottom)))}return{left:e,right:t,top:s,bottom:i}}const $o=Le.define();class rs{constructor(e,t,s,i){this.fromA=e,this.toA=t,this.fromB=s,this.toB=i}join(e){return new rs(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,s=this;for(;t>0;t--){let i=e[t-1];if(!(i.fromA>s.toA)){if(i.toA<s.fromA)break;s=s.join(i),e.splice(t-1,1)}}return e.splice(t,0,s),e}static extendWithRanges(e,t){if(t.length==0)return e;let s=[];for(let i=0,r=0,o=0,l=0;;i++){let a=i==e.length?null:e[i],u=o-l,c=a?a.fromB:1e9;for(;r<t.length&&t[r]<c;){let d=t[r],f=t[r+1],p=Math.max(l,d),g=Math.min(c,f);if(p<=g&&new rs(p+u,g+u,p,g).addToSet(s),f>c)break;r+=2}if(!a)return s;new rs(a.fromA,a.toA,a.fromB,a.toB).addToSet(s),o=a.toA,l=a.toB}}}class Du{constructor(e,t,s){this.view=e,this.state=t,this.transactions=s,this.flags=0,this.startState=e.state,this.changes=Gt.empty(this.startState.doc.length);for(let r of s)this.changes=this.changes.compose(r.changes);let i=[];this.changes.iterChangedRanges((r,o,l,a)=>i.push(new rs(r,o,l,a))),this.changedRanges=i}static create(e,t,s){return new Du(e,t,s)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class Kg extends gt{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=ze.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Ft],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new rs(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let s=e.changedRanges;this.minWidth>0&&s.length&&(s.every(({fromA:u,toA:c})=>c<this.minWidthFrom||u>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?i=this.domChanged.newSel.head:!kP(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let r=i>-1?mP(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:u,to:c}=this.hasComposition;s=new rs(u,c,e.changes.mapPos(u,-1),e.changes.mapPos(c,1)).addToSet(s.slice())}this.hasComposition=r?{from:r.range.fromB,to:r.range.toB}:null,(De.ie||De.chrome)&&!r&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,l=this.updateDeco(),a=yP(o,l,e.changes);return s=rs.extendWithRanges(s,a),!(this.flags&7)&&s.length==0?!1:(this.updateInner(s,e.startState.doc.length,r),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,s){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,s);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=De.chrome||De.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||i.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof Xs&&o.widget instanceof Mf&&r.push(o.dom);i.updateGaps(r)}updateChildren(e,t,s){let i=s?s.range.addToSet(e.slice()):e,r=this.childCursor(t);for(let o=i.length-1;;o--){let l=o>=0?i[o]:null;if(!l)break;let{fromA:a,toA:u,fromB:c,toB:d}=l,f,p,g,b;if(s&&s.range.fromB<d&&s.range.toB>c){let U=tl.build(this.view.state.doc,c,s.range.fromB,this.decorations,this.dynamicDecorationMap),O=tl.build(this.view.state.doc,s.range.toB,d,this.decorations,this.dynamicDecorationMap);p=U.breakAtStart,g=U.openStart,b=O.openEnd;let A=this.compositionView(s);O.breakAtStart?A.breakAfter=1:O.content.length&&A.merge(A.length,A.length,O.content[0],!1,O.openStart,0)&&(A.breakAfter=O.content[0].breakAfter,O.content.shift()),U.content.length&&A.merge(0,0,U.content[U.content.length-1],!0,0,U.openEnd)&&U.content.pop(),f=U.content.concat(A).concat(O.content)}else({content:f,breakAtStart:p,openStart:g,openEnd:b}=tl.build(this.view.state.doc,c,d,this.decorations,this.dynamicDecorationMap));let{i:x,off:m}=r.findPos(u,1),{i:w,off:P}=r.findPos(a,-1);a1(this,w,P,x,m,f,p,g,b)}s&&this.fixCompositionDOM(s)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let s of t.effects)s.is(T1)&&(this.editContextFormatting=s.value)}compositionView(e){let t=new gs(e.text.nodeValue);t.flags|=8;for(let{deco:i}of e.marks)t=new ni(i,[t],t.length);let s=new Ft;return s.append(t,0),s}fixCompositionDOM(e){let t=(r,o)=>{o.flags|=8|(o.children.some(a=>a.flags&7)?1:0),this.markedForComposition.add(o);let l=gt.get(r);l&&l!=o&&(l.dom=null),o.setDOM(r)},s=this.childPos(e.range.fromB,1),i=this.children[s.i];t(e.line,i);for(let r=e.marks.length-1;r>=-1;r--)s=i.childPos(s.off,1),i=i.children[s.i],t(r>=0?e.marks[r].node:e.text,i)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let s=this.view.root.activeElement,i=s==this.dom,r=!i&&!(this.view.state.facet(Qs)||this.dom.tabIndex>-1)&&Qa(this.dom,this.view.observer.selectionRange)&&!(s&&this.dom.contains(s));if(!(i||t||r))return;let o=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(l.anchor)),u=l.empty?a:this.moveToLine(this.domAtPos(l.head));if(De.gecko&&l.empty&&!this.hasComposition&&pP(a)){let d=document.createTextNode("");this.view.observer.ignore(()=>a.node.insertBefore(d,a.node.childNodes[a.offset]||null)),a=u=new yn(d,0),o=!0}let c=this.view.observer.selectionRange;(o||!c.focusNode||(!el(a.node,a.offset,c.anchorNode,c.anchorOffset)||!el(u.node,u.offset,c.focusNode,c.focusOffset))&&!this.suppressWidgetCursorChange(c,l))&&(this.view.observer.ignore(()=>{De.android&&De.chrome&&this.dom.contains(c.focusNode)&&bP(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let d=xl(this.view.root);if(d)if(l.empty){if(De.gecko){let f=gP(a.node,a.offset);if(f&&f!=3){let p=(f==1?r1:o1)(a.node,a.offset);p&&(a=new yn(p.node,p.offset))}}d.collapse(a.node,a.offset),l.bidiLevel!=null&&d.caretBidiLevel!==void 0&&(d.caretBidiLevel=l.bidiLevel)}else if(d.extend){d.collapse(a.node,a.offset);try{d.extend(u.node,u.offset)}catch{}}else{let f=document.createRange();l.anchor>l.head&&([a,u]=[u,a]),f.setEnd(u.node,u.offset),f.setStart(a.node,a.offset),d.removeAllRanges(),d.addRange(f)}r&&this.view.root.activeElement==this.dom&&(this.dom.blur(),s&&s.focus())}),this.view.observer.setSelectionRange(a,u)),this.impreciseAnchor=a.precise?null:new yn(c.anchorNode,c.anchorOffset),this.impreciseHead=u.precise?null:new yn(c.focusNode,c.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&el(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,s=xl(e.root),{anchorNode:i,anchorOffset:r}=e.observer.selectionRange;if(!s||!t.empty||!t.assoc||!s.modify)return;let o=Ft.find(this,t.head);if(!o)return;let l=o.posAtStart;if(t.head==l||t.head==l+o.length)return;let a=this.coordsAt(t.head,-1),u=this.coordsAt(t.head,1);if(!a||!u||a.bottom>u.top)return;let c=this.domAtPos(t.head+t.assoc);s.collapse(c.node,c.offset),s.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let d=e.observer.selectionRange;e.docView.posFromDOM(d.anchorNode,d.anchorOffset)!=t.from&&s.collapse(i,r)}moveToLine(e){let t=this.dom,s;if(e.node!=t)return e;for(let i=e.offset;!s&&i<t.childNodes.length;i++){let r=gt.get(t.childNodes[i]);r instanceof Ft&&(s=r.domAtPos(0))}for(let i=e.offset-1;!s&&i>=0;i--){let r=gt.get(t.childNodes[i]);r instanceof Ft&&(s=r.domAtPos(r.length))}return s?new yn(s.node,s.offset,!0):e}nearest(e){for(let t=e;t;){let s=gt.get(t);if(s&&s.rootView==this)return s;t=t.parentNode}return null}posFromDOM(e,t){let s=this.nearest(e);if(!s)throw new RangeError("Trying to find position for a DOM position outside of the document");return s.localPosFromDOM(e,t)+s.posAtStart}domAtPos(e){let{i:t,off:s}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let i=this.children[t];if(s<i.length||i instanceof Ft)break;t++,s=0}return this.children[t].domAtPos(s)}coordsAt(e,t){let s=null,i=0;for(let r=this.length,o=this.children.length-1;o>=0;o--){let l=this.children[o],a=r-l.breakAfter,u=a-l.length;if(a<e)break;if(u<=e&&(u<e||l.covers(-1))&&(a>e||l.covers(1))&&(!s||l instanceof Ft&&!(s instanceof Ft&&t>=0)))s=l,i=u;else if(s&&u==e&&a==e&&l instanceof Xs&&Math.abs(t)<2){if(l.deco.startSide<0)break;o&&(s=null)}r=u}return s?s.coordsAt(e-i,t):null}coordsForChar(e){let{i:t,off:s}=this.childPos(e,1),i=this.children[t];if(!(i instanceof Ft))return null;for(;i.children.length;){let{i:l,off:a}=i.childPos(s,1);for(;;l++){if(l==i.children.length)return null;if((i=i.children[l]).length)break}s=a}if(!(i instanceof gs))return null;let r=on(i.text,s);if(r==s)return null;let o=cr(i.dom,s,r).getClientRects();for(let l=0;l<o.length;l++){let a=o[l];if(l==o.length-1||a.top<a.bottom&&a.left<a.right)return a}return null}measureVisibleLineHeights(e){let t=[],{from:s,to:i}=e,r=this.view.contentDOM.clientWidth,o=r>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,a=this.view.textDirection==Tt.LTR;for(let u=0,c=0;c<this.children.length;c++){let d=this.children[c],f=u+d.length;if(f>i)break;if(u>=s){let p=d.dom.getBoundingClientRect();if(t.push(p.height),o){let g=d.dom.lastChild,b=g?_l(g):[];if(b.length){let x=b[b.length-1],m=a?x.right-p.left:p.right-x.left;m>l&&(l=m,this.minWidth=r,this.minWidthFrom=u,this.minWidthTo=f)}}}u=f+d.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?Tt.RTL:Tt.LTR}measureTextSize(){for(let r of this.children)if(r instanceof Ft){let o=r.measureTextSize();if(o)return o}let e=document.createElement("div"),t,s,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let r=_l(e.firstChild)[0];t=e.getBoundingClientRect().height,s=r?r.width/27:7,i=r?r.height:t,e.remove()}),{lineHeight:t,charWidth:s,textHeight:i}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new l1(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let s=0,i=0;;i++){let r=i==t.viewports.length?null:t.viewports[i],o=r?r.from-1:this.length;if(o>s){let l=(t.lineBlockAt(o).bottom-t.lineBlockAt(s).top)/this.view.scaleY;e.push(ze.replace({widget:new Mf(l),block:!0,inclusive:!0,isBlockGap:!0}).range(s,o))}if(!r)break;s=r.to+1}return ze.set(e)}updateDeco(){let e=1,t=this.view.state.facet(wl).map(r=>(this.dynamicDecorationMap[e++]=typeof r=="function")?r(this.view):r),s=!1,i=this.view.state.facet(P1).map((r,o)=>{let l=typeof r=="function";return l&&(s=!0),l?r(this.view):r});for(i.length&&(this.dynamicDecorationMap[e++]=s,t.push(lt.join(i))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let u=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=u.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let u of this.view.state.facet(E1))try{if(u(this.view,e.range,e))return!0}catch(c){Vn(this.view.state,c,"scroll handler")}let{range:t}=e,s=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),i;if(!s)return;!t.empty&&(i=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(s={left:Math.min(s.left,i.left),top:Math.min(s.top,i.top),right:Math.max(s.right,i.right),bottom:Math.max(s.bottom,i.bottom)});let r=Yh(this.view),o={left:s.left-r.left,top:s.top-r.top,right:s.right+r.right,bottom:s.bottom+r.bottom},{offsetWidth:l,offsetHeight:a}=this.view.scrollDOM;G3(this.view.scrollDOM,o,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,l),-l),Math.max(Math.min(e.yMargin,a),-a),this.view.textDirection==Tt.LTR)}}function pP(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}function L1(n,e){let t=n.observer.selectionRange;if(!t.focusNode)return null;let s=r1(t.focusNode,t.focusOffset),i=o1(t.focusNode,t.focusOffset),r=s||i;if(i&&s&&i.node!=s.node){let l=gt.get(i.node);if(!l||l instanceof gs&&l.text!=i.node.nodeValue)r=i;else if(n.docView.lastCompositionAfterCursor){let a=gt.get(s.node);!a||a instanceof gs&&a.text!=s.node.nodeValue||(r=i)}}if(n.docView.lastCompositionAfterCursor=r!=s,!r)return null;let o=e-r.offset;return{from:o,to:o+r.node.nodeValue.length,node:r.node}}function mP(n,e,t){let s=L1(n,t);if(!s)return null;let{node:i,from:r,to:o}=s,l=i.nodeValue;if(/[\n\r]/.test(l)||n.state.doc.sliceString(s.from,s.to)!=l)return null;let a=e.invertedDesc,u=new rs(a.mapPos(r),a.mapPos(o),r,o),c=[];for(let d=i.parentNode;;d=d.parentNode){let f=gt.get(d);if(f instanceof ni)c.push({node:d,deco:f.mark});else{if(f instanceof Ft||d.nodeName=="DIV"&&d.parentNode==n.contentDOM)return{range:u,text:i,marks:c,line:d};if(d!=n.contentDOM)c.push({node:d,deco:new zl({inclusive:!0,attributes:nP(d),tagName:d.tagName.toLowerCase()})});else return null}}}function gP(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}let vP=class{constructor(){this.changes=[]}compareRange(e,t){Ya(e,t,this.changes)}comparePoint(e,t){Ya(e,t,this.changes)}boundChange(e){Ya(e,e,this.changes)}};function yP(n,e,t){let s=new vP;return lt.compare(n,e,t,s),s.changes}function bP(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function kP(n,e){let t=!1;return e&&n.iterChangedRanges((s,i)=>{s<e.to&&i>e.from&&(t=!0)}),t}function xP(n,e,t=1){let s=n.charCategorizer(e),i=n.doc.lineAt(e),r=e-i.from;if(i.length==0)return he.cursor(e);r==0?t=1:r==i.length&&(t=-1);let o=r,l=r;t<0?o=on(i.text,r,!1):l=on(i.text,r);let a=s(i.text.slice(o,l));for(;o>0;){let u=on(i.text,o,!1);if(s(i.text.slice(u,o))!=a)break;o=u}for(;l<i.length;){let u=on(i.text,l);if(s(i.text.slice(l,u))!=a)break;l=u}return he.range(o+i.from,l+i.from)}function _P(n,e){return e.left>n?e.left-n:Math.max(0,n-e.right)}function wP(n,e){return e.top>n?e.top-n:Math.max(0,n-e.bottom)}function cd(n,e){return n.top<e.bottom-1&&n.bottom>e.top+1}function Jg(n,e){return e<n.top?{top:e,left:n.left,right:n.right,bottom:n.bottom}:n}function Qg(n,e){return e>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:e}:n}function Nf(n,e,t){let s,i,r,o,l=!1,a,u,c,d;for(let g=n.firstChild;g;g=g.nextSibling){let b=_l(g);for(let x=0;x<b.length;x++){let m=b[x];i&&cd(i,m)&&(m=Jg(Qg(m,i.bottom),i.top));let w=_P(e,m),P=wP(t,m);if(w==0&&P==0)return g.nodeType==3?Yg(g,e,t):Nf(g,e,t);(!s||o>P||o==P&&r>w)&&(s=g,i=m,r=w,o=P,l=w?e<m.left?x>0:x<b.length-1:!0),w==0?t>m.bottom&&(!c||c.bottom<m.bottom)?(a=g,c=m):t<m.top&&(!d||d.top>m.top)&&(u=g,d=m):c&&cd(c,m)?c=Qg(c,m.bottom):d&&cd(d,m)&&(d=Jg(d,m.top))}}if(c&&c.bottom>=t?(s=a,i=c):d&&d.top<=t&&(s=u,i=d),!s)return{node:n,offset:0};let f=Math.max(i.left,Math.min(i.right,e));if(s.nodeType==3)return Yg(s,f,t);if(l&&s.contentEditable!="false")return Nf(s,f,t);let p=Array.prototype.indexOf.call(n.childNodes,s)+(e>=(i.left+i.right)/2?1:0);return{node:n,offset:p}}function Yg(n,e,t){let s=n.nodeValue.length,i=-1,r=1e9,o=0;for(let l=0;l<s;l++){let a=cr(n,l,l+1).getClientRects();for(let u=0;u<a.length;u++){let c=a[u];if(c.top==c.bottom)continue;o||(o=e-c.left);let d=(c.top>t?c.top-t:t-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&d<r){let f=e>=(c.left+c.right)/2,p=f;if((De.chrome||De.gecko)&&cr(n,l).getBoundingClientRect().left==c.right&&(p=!f),d<=0)return{node:n,offset:l+(p?1:0)};i=l+(p?1:0),r=d}}}return{node:n,offset:i>-1?i:o>0?n.nodeValue.length:0}}function M1(n,e,t,s=-1){var i,r;let o=n.contentDOM.getBoundingClientRect(),l=o.top+n.viewState.paddingTop,a,{docHeight:u}=n.viewState,{x:c,y:d}=e,f=d-l;if(f<0)return 0;if(f>u)return n.state.doc.length;for(let U=n.viewState.heightOracle.textHeight/2,O=!1;a=n.elementAtHeight(f),a.type!=Pn.Text;)for(;f=s>0?a.bottom+U:a.top-U,!(f>=0&&f<=u);){if(O)return t?null:0;O=!0,s=-s}d=l+f;let p=a.from;if(p<n.viewport.from)return n.viewport.from==0?0:t?null:Xg(n,o,a,c,d);if(p>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:t?null:Xg(n,o,a,c,d);let g=n.dom.ownerDocument,b=n.root.elementFromPoint?n.root:g,x=b.elementFromPoint(c,d);x&&!n.contentDOM.contains(x)&&(x=null),x||(c=Math.max(o.left+1,Math.min(o.right-1,c)),x=b.elementFromPoint(c,d),x&&!n.contentDOM.contains(x)&&(x=null));let m,w=-1;if(x&&((i=n.docView.nearest(x))===null||i===void 0?void 0:i.isEditable)!=!1){if(g.caretPositionFromPoint){let U=g.caretPositionFromPoint(c,d);U&&({offsetNode:m,offset:w}=U)}else if(g.caretRangeFromPoint){let U=g.caretRangeFromPoint(c,d);U&&({startContainer:m,startOffset:w}=U)}m&&(!n.contentDOM.contains(m)||De.safari&&SP(m,w,c)||De.chrome&&CP(m,w,c))&&(m=void 0),m&&(w=Math.min($s(m),w))}if(!m||!n.docView.dom.contains(m)){let U=Ft.find(n.docView,p);if(!U)return f>a.top+a.height/2?a.to:a.from;({node:m,offset:w}=Nf(U.dom,c,d))}let P=n.docView.nearest(m);if(!P)return null;if(P.isWidget&&((r=P.dom)===null||r===void 0?void 0:r.nodeType)==1){let U=P.dom.getBoundingClientRect();return e.y<U.top||e.y<=U.bottom&&e.x<=(U.left+U.right)/2?P.posAtStart:P.posAtEnd}else return P.localPosFromDOM(m,w)+P.posAtStart}function Xg(n,e,t,s,i){let r=Math.round((s-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&t.height>n.defaultLineHeight*1.5){let l=n.viewState.heightOracle.textHeight,a=Math.floor((i-t.top-(n.defaultLineHeight-l)*.5)/l);r+=a*n.viewState.heightOracle.lineLength}let o=n.state.sliceDoc(t.from,t.to);return t.from+Sf(o,r,n.state.tabSize)}function I1(n,e,t){let s,i=n;if(n.nodeType!=3||e!=(s=n.nodeValue.length))return!1;for(;;){let r=i.nextSibling;if(r){if(r.nodeName=="BR")break;return!1}else{let o=i.parentNode;if(!o||o.nodeName=="DIV")break;i=o}}return cr(n,s-1,s).getBoundingClientRect().right>t}function SP(n,e,t){return I1(n,e,t)}function CP(n,e,t){if(e!=0)return I1(n,e,t);for(let i=n;;){let r=i.parentNode;if(!r||r.nodeType!=1||r.firstChild!=i)return!1;if(r.classList.contains("cm-line"))break;i=r}let s=n.nodeType==1?n.getBoundingClientRect():cr(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect();return t-s.left>5}function Bf(n,e,t){let s=n.lineBlockAt(e);if(Array.isArray(s.type)){let i;for(let r of s.type){if(r.from>e)break;if(!(r.to<e)){if(r.from<e&&r.to>e)return r;(!i||r.type==Pn.Text&&(i.type!=r.type||(t<0?r.from<e:r.to>e)))&&(i=r)}}return i||s}return s}function AP(n,e,t,s){let i=Bf(n,e.head,e.assoc||-1),r=!s||i.type!=Pn.Text||!(n.lineWrapping||i.widgetLineBreaks)?null:n.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(r){let o=n.dom.getBoundingClientRect(),l=n.textDirectionAt(i.from),a=n.posAtCoords({x:t==(l==Tt.LTR)?o.right-1:o.left+1,y:(r.top+r.bottom)/2});if(a!=null)return he.cursor(a,t?-1:1)}return he.cursor(t?i.to:i.from,t?-1:1)}function Zg(n,e,t,s){let i=n.state.doc.lineAt(e.head),r=n.bidiSpans(i),o=n.textDirectionAt(i.from);for(let l=e,a=null;;){let u=dP(i,r,o,l,t),c=y1;if(!u){if(i.number==(t?n.state.doc.lines:1))return l;c=`
`,i=n.state.doc.line(i.number+(t?1:-1)),r=n.bidiSpans(i),u=n.visualLineSide(i,!t)}if(a){if(!a(c))return l}else{if(!s)return u;a=s(c)}l=u}}function EP(n,e,t){let s=n.state.charCategorizer(e),i=s(t);return r=>{let o=s(r);return i==Pt.Space&&(i=o),i==o}}function TP(n,e,t,s){let i=e.head,r=t?1:-1;if(i==(t?n.state.doc.length:0))return he.cursor(i,e.assoc);let o=e.goalColumn,l,a=n.contentDOM.getBoundingClientRect(),u=n.coordsAtPos(i,e.assoc||-1),c=n.documentTop;if(u)o==null&&(o=u.left-a.left),l=r<0?u.top:u.bottom;else{let p=n.viewState.lineBlockAt(i);o==null&&(o=Math.min(a.right-a.left,n.defaultCharacterWidth*(i-p.from))),l=(r<0?p.top:p.bottom)+c}let d=a.left+o,f=s??n.viewState.heightOracle.textHeight>>1;for(let p=0;;p+=10){let g=l+(f+p)*r,b=M1(n,{x:d,y:g},!1,r);if(g<a.top||g>a.bottom||(r<0?b<i:b>i)){let x=n.docView.coordsForChar(b),m=!x||g<x.top?-1:1;return he.cursor(b,m,void 0,o)}}}function nl(n,e,t){for(;;){let s=0;for(let i of n)i.between(e-1,e+1,(r,o,l)=>{if(e>r&&e<o){let a=s||t||(e-r<o-e?-1:1);e=a<0?r:o,s=a}});if(!s)return e}}function j1(n,e){let t=null;for(let s=0;s<e.ranges.length;s++){let i=e.ranges[s],r=null;if(i.empty){let o=nl(n,i.from,0);o!=i.from&&(r=he.cursor(o,-1))}else{let o=nl(n,i.from,-1),l=nl(n,i.to,1);(o!=i.from||l!=i.to)&&(r=he.range(i.from==i.anchor?o:l,i.from==i.head?o:l))}r&&(t||(t=e.ranges.slice()),t[s]=r)}return t?he.create(t,e.mainIndex):e}function dd(n,e,t){let s=nl(n.state.facet(Wl).map(i=>i(n)),t.from,e.head>t.from?-1:1);return s==t.from?t:he.cursor(s,s<t.from?1:-1)}const No="";class DP{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(ot.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=No}readRange(e,t){if(!e)return this;let s=e.parentNode;for(let i=e;;){this.findPointBefore(s,i);let r=this.text.length;this.readNode(i);let o=i.nextSibling;if(o==t)break;let l=gt.get(i),a=gt.get(o);(l&&a?l.breakAfter:(l?l.breakAfter:Eu(i))||Eu(o)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>r)&&!RP(o,t)&&this.lineBreak(),i=o}return this.findPointBefore(s,t),this}readTextNode(e){let t=e.nodeValue;for(let s of this.points)s.node==e&&(s.pos=this.text.length+Math.min(s.offset,t.length));for(let s=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let r=-1,o=1,l;if(this.lineSeparator?(r=t.indexOf(this.lineSeparator,s),o=this.lineSeparator.length):(l=i.exec(t))&&(r=l.index,o=l[0].length),this.append(t.slice(s,r<0?t.length:r)),r<0)break;if(this.lineBreak(),o>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=o-1);s=r+o}}readNode(e){if(e.cmIgnore)return;let t=gt.get(e),s=t&&t.overrideDOMText;if(s!=null){this.findPointInside(e,s.length);for(let i=s.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let s of this.points)s.node==e&&e.childNodes[s.offset]==t&&(s.pos=this.text.length)}findPointInside(e,t){for(let s of this.points)(e.nodeType==3?s.node==e:e.contains(s.node))&&(s.pos=this.text.length+(PP(e,s.node,s.offset)?t:0))}}function PP(n,e,t){for(;;){if(!e||t<$s(e))return!1;if(e==n)return!0;t=ur(e)+1,e=e.parentNode}}function RP(n,e){let t;for(;!(n==e||!n);n=n.nextSibling){let s=gt.get(n);if(!(s?.isWidget||n.cmIgnore))return!1;s&&(t||(t=[])).push(s)}if(t)for(let s of t){let i=s.overrideDOMText;if(i?.length)return!1}return!0}class e0{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class OP{constructor(e,t,s,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:r,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,s,0))){let l=r||o?[]:MP(e),a=new DP(l,e.state);a.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=a.text,this.newSel=IP(l,this.bounds.from)}else{let l=e.observer.selectionRange,a=r&&r.node==l.focusNode&&r.offset==l.focusOffset||!Rf(e.contentDOM,l.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(l.focusNode,l.focusOffset),u=o&&o.node==l.anchorNode&&o.offset==l.anchorOffset||!Rf(e.contentDOM,l.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(l.anchorNode,l.anchorOffset),c=e.viewport;if((De.ios||De.chrome)&&e.state.selection.main.empty&&a!=u&&(c.from>0||c.to<e.state.doc.length)){let d=Math.min(a,u),f=Math.max(a,u),p=c.from-d,g=c.to-f;(p==0||p==1||d==0)&&(g==0||g==-1||f==e.state.doc.length)&&(a=0,u=e.state.doc.length)}this.newSel=he.single(u,a)}}}function V1(n,e){let t,{newSel:s}=e,i=n.state.selection.main,r=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:l}=e.bounds,a=i.from,u=null;(r===8||De.android&&e.text.length<l-o)&&(a=i.to,u="end");let c=$1(n.state.doc.sliceString(o,l,No),e.text,a-o,u);c&&(De.chrome&&r==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==No+No&&c.toB--,t={from:o+c.from,to:o+c.toA,insert:at.of(e.text.slice(c.from,c.toB).split(No))})}else s&&(!n.hasFocus&&n.state.facet(Qs)||s.main.eq(i))&&(s=null);if(!t&&!s)return!1;if(!t&&e.typeOver&&!i.empty&&s&&s.main.empty?t={from:i.from,to:i.to,insert:n.state.doc.slice(i.from,i.to)}:(De.mac||De.android)&&t&&t.from==t.to&&t.from==i.head-1&&/^\. ?$/.test(t.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(s&&t.insert.length==2&&(s=he.single(s.main.anchor-1,s.main.head-1)),t={from:t.from,to:t.to,insert:at.of([t.insert.toString().replace("."," ")])}):t&&t.from>=i.from&&t.to<=i.to&&(t.from!=i.from||t.to!=i.to)&&i.to-i.from-(t.to-t.from)<=4?t={from:i.from,to:i.to,insert:n.state.doc.slice(i.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,i.to))}:De.chrome&&t&&t.from==t.to&&t.from==i.head&&t.insert.toString()==`
 `&&n.lineWrapping&&(s&&(s=he.single(s.main.anchor-1,s.main.head-1)),t={from:i.from,to:i.to,insert:at.of([" "])}),t)return Xh(n,t,s,r);if(s&&!s.main.eq(i)){let o=!1,l="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(o=!0),l=n.inputState.lastSelectionOrigin,l=="select.pointer"&&(s=j1(n.state.facet(Wl).map(a=>a(n)),s))),n.dispatch({selection:s,scrollIntoView:o,userEvent:l}),!0}else return!1}function Xh(n,e,t,s=-1){if(De.ios&&n.inputState.flushIOSKey(e))return!0;let i=n.state.selection.main;if(De.android&&(e.to==i.to&&(e.from==i.from||e.from==i.from-1&&n.state.sliceDoc(e.from,i.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&Wr(n.contentDOM,"Enter",13)||(e.from==i.from-1&&e.to==i.to&&e.insert.length==0||s==8&&e.insert.length<e.to-e.from&&e.to>i.head)&&Wr(n.contentDOM,"Backspace",8)||e.from==i.from&&e.to==i.to+1&&e.insert.length==0&&Wr(n.contentDOM,"Delete",46)))return!0;let r=e.insert.toString();n.inputState.composing>=0&&n.inputState.composing++;let o,l=()=>o||(o=LP(n,e,t));return n.state.facet(w1).some(a=>a(n,e.from,e.to,r,l))||n.dispatch(l()),!0}function LP(n,e,t){let s,i=n.state,r=i.selection.main,o=-1;if(e.from==e.to&&e.from<r.from||e.from>r.to){let a=e.from<r.from?-1:1,u=a<0?r.from:r.to,c=nl(i.facet(Wl).map(d=>d(n)),u,a);e.from==c&&(o=c)}if(o>-1)s={changes:e,selection:he.cursor(e.from+e.insert.length,-1)};else if(e.from>=r.from&&e.to<=r.to&&e.to-e.from>=(r.to-r.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&n.inputState.composing<0){let a=r.from<e.from?i.sliceDoc(r.from,e.from):"",u=r.to>e.to?i.sliceDoc(e.to,r.to):"";s=i.replaceSelection(n.state.toText(a+e.insert.sliceString(0,void 0,n.state.lineBreak)+u))}else{let a=i.changes(e),u=t&&t.main.to<=a.newLength?t.main:void 0;if(i.selection.ranges.length>1&&n.inputState.composing>=0&&e.to<=r.to&&e.to>=r.to-10){let c=n.state.sliceDoc(e.from,e.to),d,f=t&&L1(n,t.main.head);if(f){let b=e.insert.length-(e.to-e.from);d={from:f.from,to:f.to-b}}else d=n.state.doc.lineAt(r.head);let p=r.to-e.to,g=r.to-r.from;s=i.changeByRange(b=>{if(b.from==r.from&&b.to==r.to)return{changes:a,range:u||b.map(a)};let x=b.to-p,m=x-c.length;if(b.to-b.from!=g||n.state.sliceDoc(m,x)!=c||b.to>=d.from&&b.from<=d.to)return{range:b};let w=i.changes({from:m,to:x,insert:e.insert}),P=b.to-r.to;return{changes:w,range:u?he.range(Math.max(0,u.anchor+P),Math.max(0,u.head+P)):b.map(w)}})}else s={changes:a,selection:u&&i.selection.replaceRange(u)}}let l="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,l+=".compose",n.inputState.compositionFirstChange&&(l+=".start",n.inputState.compositionFirstChange=!1)),i.update(s,{userEvent:l,scrollIntoView:!0})}function $1(n,e,t,s){let i=Math.min(n.length,e.length),r=0;for(;r<i&&n.charCodeAt(r)==e.charCodeAt(r);)r++;if(r==i&&n.length==e.length)return null;let o=n.length,l=e.length;for(;o>0&&l>0&&n.charCodeAt(o-1)==e.charCodeAt(l-1);)o--,l--;if(s=="end"){let a=Math.max(0,r-Math.min(o,l));t-=o+a-r}if(o<r&&n.length<e.length){let a=t<=r&&t>=o?r-t:0;r-=a,l=r+(l-o),o=r}else if(l<r){let a=t<=r&&t>=l?r-t:0;r-=a,o=r+(o-l),l=r}return{from:r,toA:o,toB:l}}function MP(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:s,focusNode:i,focusOffset:r}=n.observer.selectionRange;return t&&(e.push(new e0(t,s)),(i!=t||r!=s)&&e.push(new e0(i,r))),e}function IP(n,e){if(n.length==0)return null;let t=n[0].pos,s=n.length==2?n[1].pos:t;return t>-1&&s>-1?he.single(t+e,s+e):null}class jP{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,De.safari&&e.contentDOM.addEventListener("input",()=>null),De.gecko&&XP(e.contentDOM.ownerDocument)}handleEvent(e){!HP(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,t){let s=this.handlers[e];if(s){for(let i of s.observers)i(this.view,t);for(let i of s.handlers){if(t.defaultPrevented)break;if(i(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=VP(e),s=this.handlers,i=this.view.contentDOM;for(let r in t)if(r!="scroll"){let o=!t[r].handlers.length,l=s[r];l&&o!=!l.handlers.length&&(i.removeEventListener(r,this.handleEvent),l=null),l||i.addEventListener(r,this.handleEvent,{passive:o})}for(let r in s)r!="scroll"&&!t[r]&&i.removeEventListener(r,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&B1.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),De.android&&De.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return De.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=N1.find(s=>s.keyCode==e.keyCode))&&!e.ctrlKey||$P.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Wr(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return!/^key/.test(e.type)||e.synthetic?!1:this.composing>0?!0:De.safari&&!De.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function t0(n,e){return(t,s)=>{try{return e.call(n,s,t)}catch(i){Vn(t.state,i)}}}function VP(n){let e=Object.create(null);function t(s){return e[s]||(e[s]={observers:[],handlers:[]})}for(let s of n){let i=s.spec,r=i&&i.plugin.domEventHandlers,o=i&&i.plugin.domEventObservers;if(r)for(let l in r){let a=r[l];a&&t(l).handlers.push(t0(s.value,a))}if(o)for(let l in o){let a=o[l];a&&t(l).observers.push(t0(s.value,a))}}for(let s in vs)t(s).handlers.push(vs[s]);for(let s in as)t(s).observers.push(as[s]);return e}const N1=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],$P="dthko",B1=[16,17,18,20,91,92,224,225],wa=6;function Sa(n){return Math.max(0,n)*.7+8}function NP(n,e){return Math.max(Math.abs(n.clientX-e.clientX),Math.abs(n.clientY-e.clientY))}class BP{constructor(e,t,s,i){this.view=e,this.startEvent=t,this.style=s,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=K3(e.contentDOM),this.atoms=e.state.facet(Wl).map(o=>o(e));let r=e.contentDOM.ownerDocument;r.addEventListener("mousemove",this.move=this.move.bind(this)),r.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(ot.allowMultipleSelections)&&FP(e,t),this.dragging=zP(e,t)&&z1(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&NP(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,s=0,i=0,r=0,o=this.view.win.innerWidth,l=this.view.win.innerHeight;this.scrollParents.x&&({left:i,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:r,bottom:l}=this.scrollParents.y.getBoundingClientRect());let a=Yh(this.view);e.clientX-a.left<=i+wa?t=-Sa(i-e.clientX):e.clientX+a.right>=o-wa&&(t=Sa(e.clientX-o)),e.clientY-a.top<=r+wa?s=-Sa(r-e.clientY):e.clientY+a.bottom>=l-wa&&(s=Sa(e.clientY-l)),this.setScrollSpeed(t,s)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:t}=this,s=j1(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!s.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:s,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function FP(n,e){let t=n.state.facet(b1);return t.length?t[0](e):De.mac?e.metaKey:e.ctrlKey}function UP(n,e){let t=n.state.facet(k1);return t.length?t[0](e):De.mac?!e.altKey:!e.ctrlKey}function zP(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let s=xl(n.root);if(!s||s.rangeCount==0)return!0;let i=s.getRangeAt(0).getClientRects();for(let r=0;r<i.length;r++){let o=i[r];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function HP(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,s;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(s=gt.get(t))&&s.ignoreEvent(e))return!1;return!0}const vs=Object.create(null),as=Object.create(null),F1=De.ie&&De.ie_version<15||De.ios&&De.webkit_version<604;function WP(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),U1(n,t.value)},50)}function vc(n,e,t){for(let s of n.facet(e))t=s(t,n);return t}function U1(n,e){e=vc(n.state,Kh,e);let{state:t}=n,s,i=1,r=t.toText(e),o=r.lines==t.selection.ranges.length;if(Ff!=null&&t.selection.ranges.every(a=>a.empty)&&Ff==r.toString()){let a=-1;s=t.changeByRange(u=>{let c=t.doc.lineAt(u.from);if(c.from==a)return{range:u};a=c.from;let d=t.toText((o?r.line(i++).text:e)+t.lineBreak);return{changes:{from:c.from,insert:d},range:he.cursor(u.from+d.length)}})}else o?s=t.changeByRange(a=>{let u=r.line(i++);return{changes:{from:a.from,to:a.to,insert:u.text},range:he.cursor(a.from+u.length)}}):s=t.replaceSelection(r);n.dispatch(s,{userEvent:"input.paste",scrollIntoView:!0})}as.scroll=n=>{n.inputState.lastScrollTop=n.scrollDOM.scrollTop,n.inputState.lastScrollLeft=n.scrollDOM.scrollLeft};vs.keydown=(n,e)=>(n.inputState.setSelectionOrigin("select"),e.keyCode==27&&n.inputState.tabFocusMode!=0&&(n.inputState.tabFocusMode=Date.now()+2e3),!1);as.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};as.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};vs.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let s of n.state.facet(x1))if(t=s(n,e),t)break;if(!t&&e.button==0&&(t=KP(n,e)),t){let s=!n.hasFocus;n.inputState.startMouseSelection(new BP(n,e,t,s)),s&&n.observer.ignore(()=>{n1(n.contentDOM);let r=n.root.activeElement;r&&!r.contains(n.contentDOM)&&r.blur()});let i=n.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}else n.inputState.setSelectionOrigin("select.pointer");return!1};function n0(n,e,t,s){if(s==1)return he.cursor(e,t);if(s==2)return xP(n.state,e,t);{let i=Ft.find(n.docView,e),r=n.state.doc.lineAt(i?i.posAtEnd:e),o=i?i.posAtStart:r.from,l=i?i.posAtEnd:r.to;return l<n.state.doc.length&&l==r.to&&l++,he.range(o,l)}}let s0=(n,e,t)=>e>=t.top&&e<=t.bottom&&n>=t.left&&n<=t.right;function qP(n,e,t,s){let i=Ft.find(n.docView,e);if(!i)return 1;let r=e-i.posAtStart;if(r==0)return 1;if(r==i.length)return-1;let o=i.coordsAt(r,-1);if(o&&s0(t,s,o))return-1;let l=i.coordsAt(r,1);return l&&s0(t,s,l)?1:o&&o.bottom>=s?-1:1}function i0(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:qP(n,t,e.clientX,e.clientY)}}const GP=De.ie&&De.ie_version<=11;let r0=null,o0=0,l0=0;function z1(n){if(!GP)return n.detail;let e=r0,t=l0;return r0=n,l0=Date.now(),o0=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(o0+1)%3:1}function KP(n,e){let t=i0(n,e),s=z1(e),i=n.state.selection;return{update(r){r.docChanged&&(t.pos=r.changes.mapPos(t.pos),i=i.map(r.changes))},get(r,o,l){let a=i0(n,r),u,c=n0(n,a.pos,a.bias,s);if(t.pos!=a.pos&&!o){let d=n0(n,t.pos,t.bias,s),f=Math.min(d.from,c.from),p=Math.max(d.to,c.to);c=f<c.from?he.range(f,p):he.range(p,f)}return o?i.replaceRange(i.main.extend(c.from,c.to)):l&&s==1&&i.ranges.length>1&&(u=JP(i,a.pos))?u:l?i.addRange(c):he.create([c])}}}function JP(n,e){for(let t=0;t<n.ranges.length;t++){let{from:s,to:i}=n.ranges[t];if(s<=e&&i>=e)return he.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}return null}vs.dragstart=(n,e)=>{let{selection:{main:t}}=n.state;if(e.target.draggable){let i=n.docView.nearest(e.target);if(i&&i.isWidget){let r=i.posAtStart,o=r+i.length;(r>=t.to||o<=t.from)&&(t=he.range(r,o))}}let{inputState:s}=n;return s.mouseSelection&&(s.mouseSelection.dragging=!0),s.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",vc(n.state,Jh,n.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1};vs.dragend=n=>(n.inputState.draggedContent=null,!1);function a0(n,e,t,s){if(t=vc(n.state,Kh,t),!t)return;let i=n.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:r}=n.inputState,o=s&&r&&UP(n,e)?{from:r.from,to:r.to}:null,l={from:i,insert:t},a=n.state.changes(o?[o,l]:l);n.focus(),n.dispatch({changes:a,selection:{anchor:a.mapPos(i,-1),head:a.mapPos(i,1)},userEvent:o?"move.drop":"input.drop"}),n.inputState.draggedContent=null}vs.drop=(n,e)=>{if(!e.dataTransfer)return!1;if(n.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let s=Array(t.length),i=0,r=()=>{++i==t.length&&a0(n,e,s.filter(o=>o!=null).join(n.state.lineBreak),!1)};for(let o=0;o<t.length;o++){let l=new FileReader;l.onerror=r,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(s[o]=l.result),r()},l.readAsText(t[o])}return!0}else{let s=e.dataTransfer.getData("Text");if(s)return a0(n,e,s,!0),!0}return!1};vs.paste=(n,e)=>{if(n.state.readOnly)return!0;n.observer.flush();let t=F1?null:e.clipboardData;return t?(U1(n,t.getData("text/plain")||t.getData("text/uri-list")),!0):(WP(n),!1)};function QP(n,e){let t=n.dom.parentNode;if(!t)return;let s=t.appendChild(document.createElement("textarea"));s.style.cssText="position: fixed; left: -10000px; top: 10px",s.value=e,s.focus(),s.selectionEnd=e.length,s.selectionStart=0,setTimeout(()=>{s.remove(),n.focus()},50)}function YP(n){let e=[],t=[],s=!1;for(let i of n.selection.ranges)i.empty||(e.push(n.sliceDoc(i.from,i.to)),t.push(i));if(!e.length){let i=-1;for(let{from:r}of n.selection.ranges){let o=n.doc.lineAt(r);o.number>i&&(e.push(o.text),t.push({from:o.from,to:Math.min(n.doc.length,o.to+1)})),i=o.number}s=!0}return{text:vc(n,Jh,e.join(n.lineBreak)),ranges:t,linewise:s}}let Ff=null;vs.copy=vs.cut=(n,e)=>{let{text:t,ranges:s,linewise:i}=YP(n.state);if(!t&&!i)return!1;Ff=i?t:null,e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:s,scrollIntoView:!0,userEvent:"delete.cut"});let r=F1?null:e.clipboardData;return r?(r.clearData(),r.setData("text/plain",t),!0):(QP(n,t),!1)};const H1=ri.define();function W1(n,e){let t=[];for(let s of n.facet(S1)){let i=s(n,e);i&&t.push(i)}return t.length?n.update({effects:t,annotations:H1.of(!0)}):null}function q1(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let t=W1(n.state,e);t?n.dispatch(t):n.update([])}},10)}as.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),q1(n)};as.blur=n=>{n.observer.clearSelectionRange(),q1(n)};as.compositionstart=as.compositionupdate=n=>{n.observer.editContext||(n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0))};as.compositionend=n=>{n.observer.editContext||(n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,De.chrome&&De.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.hasComposition&&n.update([])},50))};as.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};vs.beforeinput=(n,e)=>{var t,s;if(e.inputType=="insertReplacementText"&&n.observer.editContext){let r=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),o=e.getTargetRanges();if(r&&o.length){let l=o[0],a=n.posAtDOM(l.startContainer,l.startOffset),u=n.posAtDOM(l.endContainer,l.endOffset);return Xh(n,{from:a,to:u,insert:n.state.toText(r)},null),!0}}let i;if(De.chrome&&De.android&&(i=N1.find(r=>r.inputType==e.inputType))&&(n.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let r=((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>r+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}return De.ios&&e.inputType=="deleteContentForward"&&n.observer.flushSoon(),De.safari&&e.inputType=="insertText"&&n.inputState.composing>=0&&setTimeout(()=>as.compositionend(n,e),20),!1};const u0=new Set;function XP(n){u0.has(n)||(u0.add(n),n.addEventListener("copy",()=>{}),n.addEventListener("cut",()=>{}))}const c0=["pre-wrap","normal","pre-line","break-spaces"];let no=!1;function d0(){no=!1}class ZP{constructor(e){this.lineWrapping=e,this.doc=at.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let s=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(s+=Math.max(0,Math.ceil((t-e-s*this.lineLength*.5)/this.lineLength))),this.lineHeight*s}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return c0.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let s=0;s<e.length;s++){let i=e[s];i<0?s++:this.heightSamples[Math.floor(i*10)]||(t=!0,this.heightSamples[Math.floor(i*10)]=!0)}return t}refresh(e,t,s,i,r,o){let l=c0.indexOf(e)>-1,a=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=l;if(this.lineWrapping=l,this.lineHeight=t,this.charWidth=s,this.textHeight=i,this.lineLength=r,a){this.heightSamples={};for(let u=0;u<o.length;u++){let c=o[u];c<0?u++:this.heightSamples[Math.floor(c*10)]=!0}}return a}}class eR{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class Ls{constructor(e,t,s,i,r){this.from=e,this.length=t,this.top=s,this.height=i,this._content=r}get type(){return typeof this._content=="number"?Pn.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Pi?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Ls(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var Et=(function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n})(Et||(Et={}));const Xa=.001;class Rn{constructor(e,t,s=2){this.length=e,this.height=t,this.flags=s}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>Xa&&(no=!0),this.height=e)}replace(e,t,s){return Rn.of(s)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,s,i){let r=this,o=s.doc;for(let l=i.length-1;l>=0;l--){let{fromA:a,toA:u,fromB:c,toB:d}=i[l],f=r.lineAt(a,Et.ByPosNoHeight,s.setDoc(t),0,0),p=f.to>=u?f:r.lineAt(u,Et.ByPosNoHeight,s,0,0);for(d+=p.to-u,u=p.to;l>0&&f.from<=i[l-1].toA;)a=i[l-1].fromA,c=i[l-1].fromB,l--,a<f.from&&(f=r.lineAt(a,Et.ByPosNoHeight,s,0,0));c+=f.from-a,a=f.from;let g=Zh.build(s.setDoc(o),e,c,d);r=Pu(r,r.replace(a,u,g))}return r.updateHeight(s,0)}static empty(){return new qn(0,0)}static of(e){if(e.length==1)return e[0];let t=0,s=e.length,i=0,r=0;for(;;)if(t==s)if(i>r*2){let l=e[t-1];l.break?e.splice(--t,1,l.left,null,l.right):e.splice(--t,1,l.left,l.right),s+=1+l.break,i-=l.size}else if(r>i*2){let l=e[s];l.break?e.splice(s,1,l.left,null,l.right):e.splice(s,1,l.left,l.right),s+=2+l.break,r-=l.size}else break;else if(i<r){let l=e[t++];l&&(i+=l.size)}else{let l=e[--s];l&&(r+=l.size)}let o=0;return e[t-1]==null?(o=1,t--):e[t]==null&&(o=1,s++),new tR(Rn.of(e.slice(0,t)),o,Rn.of(e.slice(s)))}}function Pu(n,e){return n==e?n:(n.constructor!=e.constructor&&(no=!0),e)}Rn.prototype.size=1;class G1 extends Rn{constructor(e,t,s){super(e,t),this.deco=s}blockAt(e,t,s,i){return new Ls(i,this.length,s,this.height,this.deco||0)}lineAt(e,t,s,i,r){return this.blockAt(0,s,i,r)}forEachLine(e,t,s,i,r,o){e<=r+this.length&&t>=r&&o(this.blockAt(0,s,i,r))}updateHeight(e,t=0,s=!1,i){return i&&i.from<=t&&i.more&&this.setHeight(i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class qn extends G1{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,s,i){return new Ls(i,this.length,s,this.height,this.breaks)}replace(e,t,s){let i=s[0];return s.length==1&&(i instanceof qn||i instanceof en&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof en?i=new qn(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):Rn.of(s)}updateHeight(e,t=0,s=!1,i){return i&&i.from<=t&&i.more?this.setHeight(i.heights[i.index++]):(s||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class en extends Rn{constructor(e){super(e,0)}heightMetrics(e,t){let s=e.doc.lineAt(t).number,i=e.doc.lineAt(t+this.length).number,r=i-s+1,o,l=0;if(e.lineWrapping){let a=Math.min(this.height,e.lineHeight*r);o=a/r,this.length>r+1&&(l=(this.height-a)/(this.length-r-1))}else o=this.height/r;return{firstLine:s,lastLine:i,perLine:o,perChar:l}}blockAt(e,t,s,i){let{firstLine:r,lastLine:o,perLine:l,perChar:a}=this.heightMetrics(t,i);if(t.lineWrapping){let u=i+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-s)/this.height))*this.length)),c=t.doc.lineAt(u),d=l+c.length*a,f=Math.max(s,e-d/2);return new Ls(c.from,c.length,f,d,0)}else{let u=Math.max(0,Math.min(o-r,Math.floor((e-s)/l))),{from:c,length:d}=t.doc.line(r+u);return new Ls(c,d,s+l*u,l,0)}}lineAt(e,t,s,i,r){if(t==Et.ByHeight)return this.blockAt(e,s,i,r);if(t==Et.ByPosNoHeight){let{from:p,to:g}=s.doc.lineAt(e);return new Ls(p,g-p,0,0,0)}let{firstLine:o,perLine:l,perChar:a}=this.heightMetrics(s,r),u=s.doc.lineAt(e),c=l+u.length*a,d=u.number-o,f=i+l*d+a*(u.from-r-d);return new Ls(u.from,u.length,Math.max(i,Math.min(f,i+this.height-c)),c,0)}forEachLine(e,t,s,i,r,o){e=Math.max(e,r),t=Math.min(t,r+this.length);let{firstLine:l,perLine:a,perChar:u}=this.heightMetrics(s,r);for(let c=e,d=i;c<=t;){let f=s.doc.lineAt(c);if(c==e){let g=f.number-l;d+=a*g+u*(e-r-g)}let p=a+u*f.length;o(new Ls(f.from,f.length,d,p,0)),d+=p,c=f.to+1}}replace(e,t,s){let i=this.length-t;if(i>0){let r=s[s.length-1];r instanceof en?s[s.length-1]=new en(r.length+i):s.push(null,new en(i-1))}if(e>0){let r=s[0];r instanceof en?s[0]=new en(e+r.length):s.unshift(new en(e-1),null)}return Rn.of(s)}decomposeLeft(e,t){t.push(new en(e-1),null)}decomposeRight(e,t){t.push(null,new en(this.length-e-1))}updateHeight(e,t=0,s=!1,i){let r=t+this.length;if(i&&i.from<=t+this.length&&i.more){let o=[],l=Math.max(t,i.from),a=-1;for(i.from>t&&o.push(new en(i.from-t-1).updateHeight(e,t));l<=r&&i.more;){let c=e.doc.lineAt(l).length;o.length&&o.push(null);let d=i.heights[i.index++];a==-1?a=d:Math.abs(d-a)>=Xa&&(a=-2);let f=new qn(c,d);f.outdated=!1,o.push(f),l+=c+1}l<=r&&o.push(null,new en(r-l).updateHeight(e,l));let u=Rn.of(o);return(a<0||Math.abs(u.height-this.height)>=Xa||Math.abs(a-this.heightMetrics(e,t).perLine)>=Xa)&&(no=!0),Pu(this,u)}else(s||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class tR extends Rn{constructor(e,t,s){super(e.length+t+s.length,e.height+s.height,t|(e.outdated||s.outdated?2:0)),this.left=e,this.right=s,this.size=e.size+s.size}get break(){return this.flags&1}blockAt(e,t,s,i){let r=s+this.left.height;return e<r?this.left.blockAt(e,t,s,i):this.right.blockAt(e,t,r,i+this.left.length+this.break)}lineAt(e,t,s,i,r){let o=i+this.left.height,l=r+this.left.length+this.break,a=t==Et.ByHeight?e<o:e<l,u=a?this.left.lineAt(e,t,s,i,r):this.right.lineAt(e,t,s,o,l);if(this.break||(a?u.to<l:u.from>l))return u;let c=t==Et.ByPosNoHeight?Et.ByPosNoHeight:Et.ByPos;return a?u.join(this.right.lineAt(l,c,s,o,l)):this.left.lineAt(l,c,s,i,r).join(u)}forEachLine(e,t,s,i,r,o){let l=i+this.left.height,a=r+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,t,s,i,r,o),t>=a&&this.right.forEachLine(e,t,s,l,a,o);else{let u=this.lineAt(a,Et.ByPos,s,i,r);e<u.from&&this.left.forEachLine(e,u.from-1,s,i,r,o),u.to>=e&&u.from<=t&&o(u),t>u.to&&this.right.forEachLine(u.to+1,t,s,l,a,o)}}replace(e,t,s){let i=this.left.length+this.break;if(t<i)return this.balanced(this.left.replace(e,t,s),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,t-i,s));let r=[];e>0&&this.decomposeLeft(e,r);let o=r.length;for(let l of s)r.push(l);if(e>0&&f0(r,o-1),t<this.length){let l=r.length;this.decomposeRight(t,r),f0(r,l)}return Rn.of(r)}decomposeLeft(e,t){let s=this.left.length;if(e<=s)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(s++,e>=s&&t.push(null)),e>s&&this.right.decomposeLeft(e-s,t)}decomposeRight(e,t){let s=this.left.length,i=s+this.break;if(e>=i)return this.right.decomposeRight(e-i,t);e<s&&this.left.decomposeRight(e,t),this.break&&e<i&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Rn.of(this.break?[e,null,t]:[e,t]):(this.left=Pu(this.left,e),this.right=Pu(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,s=!1,i){let{left:r,right:o}=this,l=t+r.length+this.break,a=null;return i&&i.from<=t+r.length&&i.more?a=r=r.updateHeight(e,t,s,i):r.updateHeight(e,t,s),i&&i.from<=l+o.length&&i.more?a=o=o.updateHeight(e,l,s,i):o.updateHeight(e,l,s),a?this.balanced(r,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function f0(n,e){let t,s;n[e]==null&&(t=n[e-1])instanceof en&&(s=n[e+1])instanceof en&&n.splice(e-1,3,new en(t.length+1+s.length))}const nR=5;class Zh{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let s=Math.min(t,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof qn?i.length+=s-this.pos:(s>this.pos||!this.isCovered)&&this.nodes.push(new qn(s-this.pos,-1)),this.writtenTo=s,t>s&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,s){if(e<t||s.heightRelevant){let i=s.widget?s.widget.estimatedHeight:0,r=s.widget?s.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let o=t-e;s.block?this.addBlock(new G1(o,i,s)):(o||r||i>=nR)&&this.addLineDeco(i,r,o)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new qn(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let s=new en(t-e);return this.oracle.doc.lineAt(e).to==t&&(s.flags|=4),s}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof qn)return e;let t=new qn(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,s){let i=this.ensureLine();i.length+=s,i.collapsed+=s,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=t,this.writtenTo=this.pos=this.pos+s}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof qn)&&!this.isCovered?this.nodes.push(new qn(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let s=e;for(let i of this.nodes)i instanceof qn&&i.updateHeight(this.oracle,s),s+=i?i.length:1;return this.nodes}static build(e,t,s,i){let r=new Zh(s,e);return lt.spans(t,s,i,r,0),r.finish(s)}}function sR(n,e,t){let s=new iR;return lt.compare(n,e,t,s,0),s.changes}class iR{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,s,i){(e<t||s&&s.heightRelevant||i&&i.heightRelevant)&&Ya(e,t,this.changes,5)}}function rR(n,e){let t=n.getBoundingClientRect(),s=n.ownerDocument,i=s.defaultView||window,r=Math.max(0,t.left),o=Math.min(i.innerWidth,t.right),l=Math.max(0,t.top),a=Math.min(i.innerHeight,t.bottom);for(let u=n.parentNode;u&&u!=s.body;)if(u.nodeType==1){let c=u,d=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&d.overflow!="visible"){let f=c.getBoundingClientRect();r=Math.max(r,f.left),o=Math.min(o,f.right),l=Math.max(l,f.top),a=Math.min(u==n.parentNode?i.innerHeight:a,f.bottom)}u=d.position=="absolute"||d.position=="fixed"?c.offsetParent:c.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:r-t.left,right:Math.max(r,o)-t.left,top:l-(t.top+e),bottom:Math.max(l,a)-(t.top+e)}}function oR(n){let e=n.getBoundingClientRect(),t=n.ownerDocument.defaultView||window;return e.left<t.innerWidth&&e.right>0&&e.top<t.innerHeight&&e.bottom>0}function lR(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class fd{constructor(e,t,s,i){this.from=e,this.to=t,this.size=s,this.displaySize=i}static same(e,t){if(e.length!=t.length)return!1;for(let s=0;s<e.length;s++){let i=e[s],r=t[s];if(i.from!=r.from||i.to!=r.to||i.size!=r.size)return!1}return!0}draw(e,t){return ze.replace({widget:new aR(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class aR extends Li{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class h0{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=p0,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Tt.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(Qh).some(s=>typeof s!="function"&&s.class=="cm-lineWrapping");this.heightOracle=new ZP(t),this.stateDeco=e.facet(wl).filter(s=>typeof s!="function"),this.heightMap=Rn.empty().applyChanges(this.stateDeco,at.empty,this.heightOracle.setDoc(e.doc),[new rs(0,0,0,e.doc.length)]);for(let s=0;s<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());s++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=ze.set(this.lineGaps.map(s=>s.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let s=0;s<=1;s++){let i=s?t.head:t.anchor;if(!e.some(({from:r,to:o})=>i>=r&&i<=o)){let{from:r,to:o}=this.lineBlockAt(i);e.push(new Ca(r,o))}}return this.viewports=e.sort((s,i)=>s.from-i.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?p0:new ep(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Bo(e,this.scaler))})}update(e,t=null){this.state=e.state;let s=this.stateDeco;this.stateDeco=this.state.facet(wl).filter(c=>typeof c!="function");let i=e.changedRanges,r=rs.extendWithRanges(i,sR(s,this.stateDeco,e?e.changes:Gt.empty(this.state.doc.length))),o=this.heightMap.height,l=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);d0(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),r),(this.heightMap.height!=o||no)&&(e.flags|=2),l?(this.scrollAnchorPos=e.changes.mapPos(l.from,-1),this.scrollAnchorHeight=l.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let a=r.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<a.from||t.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,t));let u=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,e.flags|=this.updateForViewport(),(u||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(A1)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,s=window.getComputedStyle(t),i=this.heightOracle,r=s.whiteSpace;this.defaultTextDirection=s.direction=="rtl"?Tt.RTL:Tt.LTR;let o=this.heightOracle.mustRefreshForWrapping(r),l=t.getBoundingClientRect(),a=o||this.mustMeasureContent||this.contentDOMHeight!=l.height;this.contentDOMHeight=l.height,this.mustMeasureContent=!1;let u=0,c=0;if(l.width&&l.height){let{scaleX:U,scaleY:O}=t1(t,l);(U>.005&&Math.abs(this.scaleX-U)>.005||O>.005&&Math.abs(this.scaleY-O)>.005)&&(this.scaleX=U,this.scaleY=O,u|=16,o=a=!0)}let d=(parseInt(s.paddingTop)||0)*this.scaleY,f=(parseInt(s.paddingBottom)||0)*this.scaleY;(this.paddingTop!=d||this.paddingBottom!=f)&&(this.paddingTop=d,this.paddingBottom=f,u|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=16);let p=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=p&&(this.scrollAnchorHeight=-1,this.scrollTop=p),this.scrolledToBottom=i1(e.scrollDOM);let g=(this.printing?lR:rR)(t,this.paddingTop),b=g.top-this.pixelViewport.top,x=g.bottom-this.pixelViewport.bottom;this.pixelViewport=g;let m=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(m!=this.inView&&(this.inView=m,m&&(a=!0)),!this.inView&&!this.scrollTarget&&!oR(e.dom))return 0;let w=l.width;if((this.contentDOMWidth!=w||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=l.width,this.editorHeight=e.scrollDOM.clientHeight,u|=16),a){let U=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(U)&&(o=!0),o||i.lineWrapping&&Math.abs(w-this.contentDOMWidth)>i.charWidth){let{lineHeight:O,charWidth:A,textHeight:_}=e.docView.measureTextSize();o=O>0&&i.refresh(r,O,A,_,Math.max(5,w/A),U),o&&(e.docView.minWidth=0,u|=16)}b>0&&x>0?c=Math.max(b,x):b<0&&x<0&&(c=Math.min(b,x)),d0();for(let O of this.viewports){let A=O.from==this.viewport.from?U:e.docView.measureVisibleLineHeights(O);this.heightMap=(o?Rn.empty().applyChanges(this.stateDeco,at.empty,this.heightOracle,[new rs(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,o,new eR(O.from,A))}no&&(u|=2)}let P=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return P&&(u&2&&(u|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),u|=this.updateForViewport()),(u&2||P)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let s=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,r=this.heightOracle,{visibleTop:o,visibleBottom:l}=this,a=new Ca(i.lineAt(o-s*1e3,Et.ByHeight,r,0,0).from,i.lineAt(l+(1-s)*1e3,Et.ByHeight,r,0,0).to);if(t){let{head:u}=t.range;if(u<a.from||u>a.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),d=i.lineAt(u,Et.ByPos,r,0,0),f;t.y=="center"?f=(d.top+d.bottom)/2-c/2:t.y=="start"||t.y=="nearest"&&u<a.from?f=d.top:f=d.bottom-c,a=new Ca(i.lineAt(f-1e3/2,Et.ByHeight,r,0,0).from,i.lineAt(f+c+1e3/2,Et.ByHeight,r,0,0).to)}}return a}mapViewport(e,t){let s=t.mapPos(e.from,-1),i=t.mapPos(e.to,1);return new Ca(this.heightMap.lineAt(s,Et.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,Et.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},s=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,Et.ByPos,this.heightOracle,0,0),{bottom:r}=this.heightMap.lineAt(t,Et.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:l}=this;return(e==0||i<=o-Math.max(10,Math.min(-s,250)))&&(t==this.state.doc.length||r>=l+Math.max(10,Math.min(s,250)))&&i>o-2*1e3&&r<l+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let s=[];for(let i of e)t.touchesRange(i.from,i.to)||s.push(new fd(t.mapPos(i.from),t.mapPos(i.to),i.size,i.displaySize));return s}ensureLineGaps(e,t){let s=this.heightOracle.lineWrapping,i=s?1e4:2e3,r=i>>1,o=i<<1;if(this.defaultTextDirection!=Tt.LTR&&!s)return[];let l=[],a=(c,d,f,p)=>{if(d-c<r)return;let g=this.state.selection.main,b=[g.from];g.empty||b.push(g.to);for(let m of b)if(m>c&&m<d){a(c,m-10,f,p),a(m+10,d,f,p);return}let x=cR(e,m=>m.from>=f.from&&m.to<=f.to&&Math.abs(m.from-c)<r&&Math.abs(m.to-d)<r&&!b.some(w=>m.from<w&&m.to>w));if(!x){if(d<f.to&&t&&s&&t.visibleRanges.some(P=>P.from<=d&&P.to>=d)){let P=t.moveToLineBoundary(he.cursor(d),!1,!0).head;P>c&&(d=P)}let m=this.gapSize(f,c,d,p),w=s||m<2e6?m:2e6;x=new fd(c,d,m,w)}l.push(x)},u=c=>{if(c.length<o||c.type!=Pn.Text)return;let d=uR(c.from,c.to,this.stateDeco);if(d.total<o)return;let f=this.scrollTarget?this.scrollTarget.range.head:null,p,g;if(s){let b=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,x,m;if(f!=null){let w=Ea(d,f),P=((this.visibleBottom-this.visibleTop)/2+b)/c.height;x=w-P,m=w+P}else x=(this.visibleTop-c.top-b)/c.height,m=(this.visibleBottom-c.top+b)/c.height;p=Aa(d,x),g=Aa(d,m)}else{let b=d.total*this.heightOracle.charWidth,x=i*this.heightOracle.charWidth,m=0;if(b>2e6)for(let A of e)A.from>=c.from&&A.from<c.to&&A.size!=A.displaySize&&A.from*this.heightOracle.charWidth+m<this.pixelViewport.left&&(m=A.size-A.displaySize);let w=this.pixelViewport.left+m,P=this.pixelViewport.right+m,U,O;if(f!=null){let A=Ea(d,f),_=((P-w)/2+x)/b;U=A-_,O=A+_}else U=(w-x)/b,O=(P+x)/b;p=Aa(d,U),g=Aa(d,O)}p>c.from&&a(c.from,p,c,d),g<c.to&&a(g,c.to,c,d)};for(let c of this.viewportLines)Array.isArray(c.type)?c.type.forEach(u):u(c);return l}gapSize(e,t,s,i){let r=Ea(i,s)-Ea(i,t);return this.heightOracle.lineWrapping?e.height*r:i.total*this.heightOracle.charWidth*r}updateLineGaps(e){fd.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=ze.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let s=[];lt.spans(t,this.viewport.from,this.viewport.to,{span(r,o){s.push({from:r,to:o})},point(){}},20);let i=0;if(s.length!=this.visibleRanges.length)i=12;else for(let r=0;r<s.length&&!(i&8);r++){let o=this.visibleRanges[r],l=s[r];(o.from!=l.from||o.to!=l.to)&&(i|=4,e&&e.mapPos(o.from,-1)==l.from&&e.mapPos(o.to,1)==l.to||(i|=8))}return this.visibleRanges=s,i}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||Bo(this.heightMap.lineAt(e,Et.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||Bo(this.heightMap.lineAt(this.scaler.fromDOM(e),Et.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return Bo(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Ca{constructor(e,t){this.from=e,this.to=t}}function uR(n,e,t){let s=[],i=n,r=0;return lt.spans(t,n,e,{span(){},point(o,l){o>i&&(s.push({from:i,to:o}),r+=o-i),i=l}},20),i<e&&(s.push({from:i,to:e}),r+=e-i),{total:r,ranges:s}}function Aa({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let s=Math.floor(n*t);for(let i=0;;i++){let{from:r,to:o}=e[i],l=o-r;if(s<=l)return r+s;s-=l}}function Ea(n,e){let t=0;for(let{from:s,to:i}of n.ranges){if(e<=i){t+=e-s;break}t+=i-s}return t/n.total}function cR(n,e){for(let t of n)if(e(t))return t}const p0={toDOM(n){return n},fromDOM(n){return n},scale:1,eq(n){return n==this}};class ep{constructor(e,t,s){let i=0,r=0,o=0;this.viewports=s.map(({from:l,to:a})=>{let u=t.lineAt(l,Et.ByPos,e,0,0).top,c=t.lineAt(a,Et.ByPos,e,0,0).bottom;return i+=c-u,{from:l,to:a,top:u,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(t.height-i);for(let l of this.viewports)l.domTop=o+(l.top-r)*this.scale,o=l.domBottom=l.domTop+(l.bottom-l.top),r=l.bottom}toDOM(e){for(let t=0,s=0,i=0;;t++){let r=t<this.viewports.length?this.viewports[t]:null;if(!r||e<r.top)return i+(e-s)*this.scale;if(e<=r.bottom)return r.domTop+(e-r.top);s=r.bottom,i=r.domBottom}}fromDOM(e){for(let t=0,s=0,i=0;;t++){let r=t<this.viewports.length?this.viewports[t]:null;if(!r||e<r.domTop)return s+(e-i)/this.scale;if(e<=r.domBottom)return r.top+(e-r.domTop);s=r.bottom,i=r.domBottom}}eq(e){return e instanceof ep?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,s)=>t.from==e.viewports[s].from&&t.to==e.viewports[s].to):!1}}function Bo(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),s=e.toDOM(n.bottom);return new Ls(n.from,n.length,t,s-t,Array.isArray(n._content)?n._content.map(i=>Bo(i,e)):n._content)}const Ta=Le.define({combine:n=>n.join(" ")}),Uf=Le.define({combine:n=>n.indexOf(!0)>-1}),zf=Ti.newName(),K1=Ti.newName(),J1=Ti.newName(),Q1={"&light":"."+K1,"&dark":"."+J1};function Hf(n,e,t){return new Ti(e,{finish(s){return/&/.test(s)?s.replace(/&\w*/,i=>{if(i=="&")return n;if(!t||!t[i])throw new RangeError(`Unsupported selector: ${i}`);return t[i]}):n+" "+s}})}const dR=Hf("."+zf,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Q1),fR={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},hd=De.ie&&De.ie_version<=11;class hR{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new J3,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let s of t)this.queue.push(s);(De.ie&&De.ie_version<=11||De.ios&&e.composing)&&t.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&De.android&&e.constructor.EDIT_CONTEXT!==!1&&!(De.chrome&&De.chrome_version<126)&&(this.editContext=new mR(e),e.state.facet(Qs)&&(e.contentDOM.editContext=this.editContext.editContext)),hd&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,s)=>t!=e[s]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:s}=this,i=this.selectionRange;if(s.state.facet(Qs)?s.root.activeElement!=this.dom:!Qa(this.dom,i))return;let r=i.anchorNode&&s.docView.nearest(i.anchorNode);if(r&&r.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(De.ie&&De.ie_version<=11||De.android&&De.chrome)&&!s.state.selection.main.empty&&i.focusNode&&el(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=xl(e.root);if(!t)return!1;let s=De.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&pR(this.view,t)||t;if(!s||this.selectionRange.eq(s))return!1;let i=Qa(this.dom,s);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&Y3(this.dom,s)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(s),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let s=this.dom;s;)if(s.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==s?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(s),s=s.assignedSlot||s.parentNode;else if(s.nodeType==11)s=s.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);for(let s of this.scrollTargets=t)s.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,fR),hd&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),hd&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var s;if(!this.delayedAndroidKey){let i=()=>{let r=this.delayedAndroidKey;r&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=r.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&r.force&&Wr(this.dom,r.key,r.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((s=this.delayedAndroidKey)===null||s===void 0)&&s.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,s=-1,i=!1;for(let r of e){let o=this.readMutation(r);o&&(o.typeOver&&(i=!0),t==-1?{from:t,to:s}=o:(t=Math.min(o.from,t),s=Math.max(o.to,s)))}return{from:t,to:s,typeOver:i}}readChange(){let{from:e,to:t,typeOver:s}=this.processRecords(),i=this.selectionChanged&&Qa(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let r=new OP(this.view,e,t,s);return this.view.docView.domChanged={newSel:r.newSel?r.newSel.main:null},r}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let s=this.view.state,i=V1(this.view,t);return this.view.state==s&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let s=m0(t,e.previousSibling||e.target.previousSibling,-1),i=m0(t,e.nextSibling||e.target.nextSibling,1);return{from:s?t.posAfter(s):t.posAtStart,to:i?t.posBefore(i):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Qs)!=e.state.facet(Qs)&&(e.view.contentDOM.editContext=e.state.facet(Qs)?this.editContext.editContext:null))}destroy(){var e,t,s;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(s=this.resizeScroll)===null||s===void 0||s.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function m0(n,e,t){for(;e;){let s=gt.get(e);if(s&&s.parent==n)return s;let i=e.parentNode;e=i!=n.dom?i:t>0?e.nextSibling:e.previousSibling}return null}function g0(n,e){let t=e.startContainer,s=e.startOffset,i=e.endContainer,r=e.endOffset,o=n.docView.domAtPos(n.state.selection.main.anchor);return el(o.node,o.offset,i,r)&&([t,s,i,r]=[i,r,t,s]),{anchorNode:t,anchorOffset:s,focusNode:i,focusOffset:r}}function pR(n,e){if(e.getComposedRanges){let i=e.getComposedRanges(n.root)[0];if(i)return g0(n,i)}let t=null;function s(i){i.preventDefault(),i.stopImmediatePropagation(),t=i.getTargetRanges()[0]}return n.contentDOM.addEventListener("beforeinput",s,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",s,!0),t?g0(n,t):null}class mR{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=s=>{let i=e.state.selection.main,{anchor:r,head:o}=i,l=this.toEditorPos(s.updateRangeStart),a=this.toEditorPos(s.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:s.updateRangeStart,editorBase:l,drifted:!1});let u=a-l>s.text.length;l==this.from&&r<this.from?l=r:a==this.to&&r>this.to&&(a=r);let c=$1(e.state.sliceDoc(l,a),s.text,(u?i.from:i.to)-l,u?"end":null);if(!c){let f=he.single(this.toEditorPos(s.selectionStart),this.toEditorPos(s.selectionEnd));f.main.eq(i)||e.dispatch({selection:f,userEvent:"select"});return}let d={from:c.from+l,to:c.toA+l,insert:at.of(s.text.slice(c.from,c.toB).split(`
`))};if((De.mac||De.android)&&d.from==o-1&&/^\. ?$/.test(s.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(d={from:l,to:a,insert:at.of([s.text.replace("."," ")])}),this.pendingContextChange=d,!e.state.readOnly){let f=this.to-this.from+(d.to-d.from+d.insert.length);Xh(e,d,he.single(this.toEditorPos(s.selectionStart,f),this.toEditorPos(s.selectionEnd,f)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),d.from<d.to&&!d.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(t.text.slice(Math.max(0,s.updateRangeStart-1),Math.min(t.text.length,s.updateRangeStart+1)))&&this.handlers.compositionend(s)},this.handlers.characterboundsupdate=s=>{let i=[],r=null;for(let o=this.toEditorPos(s.rangeStart),l=this.toEditorPos(s.rangeEnd);o<l;o++){let a=e.coordsForChar(o);r=a&&new DOMRect(a.left,a.top,a.right-a.left,a.bottom-a.top)||r||new DOMRect,i.push(r)}t.updateCharacterBounds(s.rangeStart,i)},this.handlers.textformatupdate=s=>{let i=[];for(let r of s.getTextFormats()){let o=r.underlineStyle,l=r.underlineThickness;if(!/none/i.test(o)&&!/none/i.test(l)){let a=this.toEditorPos(r.rangeStart),u=this.toEditorPos(r.rangeEnd);if(a<u){let c=`text-decoration: underline ${/^[a-z]/.test(o)?o+" ":o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${/thin/i.test(l)?1:2}px`;i.push(ze.mark({attributes:{style:c}}).range(a,u))}}}e.dispatch({effects:T1.of(ze.set(i))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:s}=this.composing;this.composing=null,s&&this.reset(e.state)}};for(let s in this.handlers)t.addEventListener(s,this.handlers[s]);this.measureReq={read:s=>{this.editContext.updateControlBounds(s.contentDOM.getBoundingClientRect());let i=xl(s.root);i&&i.rangeCount&&this.editContext.updateSelectionBounds(i.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,s=!1,i=this.pendingContextChange;return e.changes.iterChanges((r,o,l,a,u)=>{if(s)return;let c=u.length-(o-r);if(i&&o>=i.to)if(i.from==r&&i.to==o&&i.insert.eq(u)){i=this.pendingContextChange=null,t+=c,this.to+=c;return}else i=null,this.revertPending(e.state);if(r+=t,o+=t,o<=this.from)this.from+=c,this.to+=c;else if(r<this.to){if(r<this.from||o>this.to||this.to-this.from+u.length>3e4){s=!0;return}this.editContext.updateText(this.toContextPos(r),this.toContextPos(o),u.toString()),this.to+=c}t+=c}),i&&!s&&this.revertPending(e.state),!s}update(e){let t=this.pendingContextChange,s=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(s.from,s.to)&&e.transactions.some(i=>!i.isUserEvent("input.type")&&i.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,s=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),i=this.toContextPos(t.head);(this.editContext.selectionStart!=s||this.editContext.selectionEnd!=i)&&this.editContext.updateSelection(s,i)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let s=this.composing;return s&&s.drifted?s.editorBase+(e-s.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class Oe{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:s}=e;this.dispatchTransactions=e.dispatchTransactions||s&&(i=>i.forEach(r=>s(r,this)))||(i=>this.update(i)),this.dispatch=this.dispatch.bind(this),this._root=e.root||Q3(e.parent)||document,this.viewState=new h0(e.state||ot.create(e)),e.scrollTo&&e.scrollTo.is(_a)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Dr).map(i=>new ud(i));for(let i of this.plugins)i.update(this);this.observer=new hR(this),this.inputState=new jP(this),this.inputState.ensureHandlers(this.plugins),this.docView=new Kg(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=e.length==1&&e[0]instanceof Kt?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,s=!1,i,r=this.state;for(let f of e){if(f.startState!=r)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");r=f.state}if(this.destroyed){this.viewState.state=r;return}let o=this.hasFocus,l=0,a=null;e.some(f=>f.annotation(H1))?(this.inputState.notifiedFocused=o,l=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,a=W1(r,o),a||(l=1));let u=this.observer.delayedAndroidKey,c=null;if(u?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(r.doc)||!this.state.selection.eq(r.selection))&&(c=null)):this.observer.clear(),r.facet(ot.phrases)!=this.state.facet(ot.phrases))return this.setState(r);i=Du.create(this,r,e),i.flags|=l;let d=this.viewState.scrollTarget;try{this.updateState=2;for(let f of e){if(d&&(d=d.map(f.changes)),f.scrollIntoView){let{main:p}=f.state.selection;d=new qr(p.empty?p:he.cursor(p.head,p.head>p.anchor?-1:1))}for(let p of f.effects)p.is(_a)&&(d=p.value.clip(this.state))}this.viewState.update(i,d),this.bidiCache=Ru.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),t=this.docView.update(i),this.state.facet($o)!=this.styleModules&&this.mountStyles(),s=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(f=>f.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(Ta)!=i.state.facet(Ta)&&(this.viewState.mustMeasureContent=!0),(t||s||d||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!i.empty)for(let f of this.state.facet($f))try{f(i)}catch(p){Vn(this.state,p,"update listener")}(a||c)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),c&&!V1(this,c)&&u.force&&Wr(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let s of this.plugins)s.destroy(this);this.viewState=new h0(e),this.plugins=e.facet(Dr).map(s=>new ud(s)),this.pluginMap.clear();for(let s of this.plugins)s.update(this);this.docView.destroy(),this.docView=new Kg(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(Dr),s=e.state.facet(Dr);if(t!=s){let i=[];for(let r of s){let o=t.indexOf(r);if(o<0)i.push(new ud(r));else{let l=this.plugins[o];l.mustUpdate=e,i.push(l)}}for(let r of this.plugins)r.mustUpdate!=e&&r.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);t!=s&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(s){Vn(this.state,s,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,s=this.scrollDOM,i=s.scrollTop*this.scaleY,{scrollAnchorPos:r,scrollAnchorHeight:o}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let l=0;;l++){if(o<0)if(i1(s))r=-1,o=this.viewState.heightMap.height;else{let p=this.viewState.scrollAnchorAt(i);r=p.from,o=p.top}this.updateState=1;let a=this.viewState.measure(this);if(!a&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];a&4||([this.measureRequests,u]=[u,this.measureRequests]);let c=u.map(p=>{try{return p.read(this)}catch(g){return Vn(this.state,g),v0}}),d=Du.create(this,this.state,[]),f=!1;d.flags|=a,t?t.flags|=a:t=d,this.updateState=2,d.empty||(this.updatePlugins(d),this.inputState.update(d),this.updateAttrs(),f=this.docView.update(d),f&&this.docViewUpdate());for(let p=0;p<u.length;p++)if(c[p]!=v0)try{let g=u[p];g.write&&g.write(c[p],this)}catch(g){Vn(this.state,g)}if(f&&this.docView.updateSelection(!0),!d.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let g=(r<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(r).top)-o;if(g>1||g<-1){i=i+g,s.scrollTop=i/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let l of this.state.facet($f))l(t)}get themeClasses(){return zf+" "+(this.state.facet(Uf)?J1:K1)+" "+this.state.facet(Ta)}updateAttrs(){let e=y0(this,D1,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(Qs)?"true":"false",class:"cm-content",style:`${De.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),y0(this,Qh,t);let s=this.observer.ignore(()=>{let i=Lf(this.contentDOM,this.contentAttrs,t),r=Lf(this.dom,this.editorAttrs,e);return i||r});return this.editorAttrs=e,this.contentAttrs=t,s}showAnnouncements(e){let t=!0;for(let s of e)for(let i of s.effects)if(i.is(Oe.announce)){t&&(this.announceDOM.textContent=""),t=!1;let r=this.announceDOM.appendChild(document.createElement("div"));r.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet($o);let e=this.state.facet(Oe.cspNonce);Ti.mount(this.root,this.styleModules.concat(dR).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.plugin!=e)&&this.pluginMap.set(e,t=this.plugins.find(s=>s.plugin==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,s){return dd(this,e,Zg(this,e,t,s))}moveByGroup(e,t){return dd(this,e,Zg(this,e,t,s=>EP(this,e.head,s)))}visualLineSide(e,t){let s=this.bidiSpans(e),i=this.textDirectionAt(e.from),r=s[t?s.length-1:0];return he.cursor(r.side(t,i)+e.from,r.forward(!t,i)?1:-1)}moveToLineBoundary(e,t,s=!0){return AP(this,e,t,s)}moveVertically(e,t,s){return dd(this,e,TP(this,e,t,s))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),M1(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let s=this.docView.coordsAt(e,t);if(!s||s.left==s.right)return s;let i=this.state.doc.lineAt(e),r=this.bidiSpans(i),o=r[bi.find(r,e-i.from,-1,t)];return gc(s,o.dir==Tt.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(C1)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>gR)return v1(e.length);let t=this.textDirectionAt(e.from),s;for(let r of this.bidiCache)if(r.from==e.from&&r.dir==t&&(r.fresh||g1(r.isolates,s=Gg(this,e))))return r.order;s||(s=Gg(this,e));let i=cP(e.text,t,s);return this.bidiCache.push(new Ru(e.from,e.to,t,s,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||De.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{n1(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return _a.of(new qr(typeof e=="number"?he.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,s=this.viewState.scrollAnchorAt(e);return _a.of(new qr(he.cursor(s.from),"start","start",s.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return zt.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return zt.define(()=>({}),{eventObservers:e})}static theme(e,t){let s=Ti.newName(),i=[Ta.of(s),$o.of(Hf(`.${s}`,e))];return t&&t.dark&&i.push(Uf.of(!0)),i}static baseTheme(e){return gr.lowest($o.of(Hf("."+zf,e,Q1)))}static findFromDOM(e){var t;let s=e.querySelector(".cm-content"),i=s&&gt.get(s)||gt.get(e);return((t=i?.rootView)===null||t===void 0?void 0:t.view)||null}}Oe.styleModule=$o;Oe.inputHandler=w1;Oe.clipboardInputFilter=Kh;Oe.clipboardOutputFilter=Jh;Oe.scrollHandler=E1;Oe.focusChangeEffect=S1;Oe.perLineTextDirection=C1;Oe.exceptionSink=_1;Oe.updateListener=$f;Oe.editable=Qs;Oe.mouseSelectionStyle=x1;Oe.dragMovesSelection=k1;Oe.clickAddsSelectionRange=b1;Oe.decorations=wl;Oe.outerDecorations=P1;Oe.atomicRanges=Wl;Oe.bidiIsolatedRanges=R1;Oe.scrollMargins=O1;Oe.darkTheme=Uf;Oe.cspNonce=Le.define({combine:n=>n.length?n[0]:""});Oe.contentAttributes=Qh;Oe.editorAttributes=D1;Oe.lineWrapping=Oe.contentAttributes.of({class:"cm-lineWrapping"});Oe.announce=Ze.define();const gR=4096,v0={};class Ru{constructor(e,t,s,i,r,o){this.from=e,this.to=t,this.dir=s,this.isolates=i,this.fresh=r,this.order=o}static update(e,t){if(t.empty&&!e.some(r=>r.fresh))return e;let s=[],i=e.length?e[e.length-1].dir:Tt.LTR;for(let r=Math.max(0,e.length-10);r<e.length;r++){let o=e[r];o.dir==i&&!t.touchesRange(o.from,o.to)&&s.push(new Ru(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return s}}function y0(n,e,t){for(let s=n.state.facet(e),i=s.length-1;i>=0;i--){let r=s[i],o=typeof r=="function"?r(n):r;o&&Of(o,t)}return t}const vR=De.mac?"mac":De.windows?"win":De.linux?"linux":"key";function yR(n,e){const t=n.split(/-(?!$)/);let s=t[t.length-1];s=="Space"&&(s=" ");let i,r,o,l;for(let a=0;a<t.length-1;++a){const u=t[a];if(/^(cmd|meta|m)$/i.test(u))l=!0;else if(/^a(lt)?$/i.test(u))i=!0;else if(/^(c|ctrl|control)$/i.test(u))r=!0;else if(/^s(hift)?$/i.test(u))o=!0;else if(/^mod$/i.test(u))e=="mac"?l=!0:r=!0;else throw new Error("Unrecognized modifier name: "+u)}return i&&(s="Alt-"+s),r&&(s="Ctrl-"+s),l&&(s="Meta-"+s),o&&(s="Shift-"+s),s}function Da(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}const bR=gr.default(Oe.domEventHandlers({keydown(n,e){return X1(Y1(e.state),n,e,"editor")}})),tp=Le.define({enables:bR}),b0=new WeakMap;function Y1(n){let e=n.facet(tp),t=b0.get(e);return t||b0.set(e,t=_R(e.reduce((s,i)=>s.concat(i),[]))),t}function kR(n,e,t){return X1(Y1(n.state),e,n,t)}let gi=null;const xR=4e3;function _R(n,e=vR){let t=Object.create(null),s=Object.create(null),i=(o,l)=>{let a=s[o];if(a==null)s[o]=l;else if(a!=l)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},r=(o,l,a,u,c)=>{var d,f;let p=t[o]||(t[o]=Object.create(null)),g=l.split(/ (?!$)/).map(m=>yR(m,e));for(let m=1;m<g.length;m++){let w=g.slice(0,m).join(" ");i(w,!0),p[w]||(p[w]={preventDefault:!0,stopPropagation:!1,run:[P=>{let U=gi={view:P,prefix:w,scope:o};return setTimeout(()=>{gi==U&&(gi=null)},xR),!0}]})}let b=g.join(" ");i(b,!1);let x=p[b]||(p[b]={preventDefault:!1,stopPropagation:!1,run:((f=(d=p._any)===null||d===void 0?void 0:d.run)===null||f===void 0?void 0:f.slice())||[]});a&&x.run.push(a),u&&(x.preventDefault=!0),c&&(x.stopPropagation=!0)};for(let o of n){let l=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let u of l){let c=t[u]||(t[u]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:d}=o;for(let f in c)c[f].run.push(p=>d(p,Wf))}let a=o[e]||o.key;if(a)for(let u of l)r(u,a,o.run,o.preventDefault,o.stopPropagation),o.shift&&r(u,"Shift-"+a,o.shift,o.preventDefault,o.stopPropagation)}return t}let Wf=null;function X1(n,e,t,s){Wf=e;let i=H3(e),r=In(i,0),o=Os(r)==i.length&&i!=" ",l="",a=!1,u=!1,c=!1;gi&&gi.view==t&&gi.scope==s&&(l=gi.prefix+" ",B1.indexOf(e.keyCode)<0&&(u=!0,gi=null));let d=new Set,f=x=>{if(x){for(let m of x.run)if(!d.has(m)&&(d.add(m),m(t)))return x.stopPropagation&&(c=!0),!0;x.preventDefault&&(x.stopPropagation&&(c=!0),u=!0)}return!1},p=n[s],g,b;return p&&(f(p[l+Da(i,e,!o)])?a=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(De.windows&&e.ctrlKey&&e.altKey)&&!(De.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(g=Di[e.keyCode])&&g!=i?(f(p[l+Da(g,e,!0)])||e.shiftKey&&(b=kl[e.keyCode])!=i&&b!=g&&f(p[l+Da(b,e,!1)]))&&(a=!0):o&&e.shiftKey&&f(p[l+Da(i,e,!0)])&&(a=!0),!a&&f(p._any)&&(a=!0)),u&&(a=!0),a&&c&&e.stopPropagation(),Wf=null,a}class ql{constructor(e,t,s,i,r){this.className=e,this.left=t,this.top=s,this.width=i,this.height=r}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,s){if(s.empty){let i=e.coordsAtPos(s.head,s.assoc||1);if(!i)return[];let r=Z1(e);return[new ql(t,i.left-r.left,i.top-r.top,null,i.bottom-i.top)]}else return wR(e,t,s)}}function Z1(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==Tt.LTR?e.left:e.right-n.scrollDOM.clientWidth*n.scaleX)-n.scrollDOM.scrollLeft*n.scaleX,top:e.top-n.scrollDOM.scrollTop*n.scaleY}}function k0(n,e,t,s){let i=n.coordsAtPos(e,t*2);if(!i)return s;let r=n.dom.getBoundingClientRect(),o=(i.top+i.bottom)/2,l=n.posAtCoords({x:r.left+1,y:o}),a=n.posAtCoords({x:r.right-1,y:o});return l==null||a==null?s:{from:Math.max(s.from,Math.min(l,a)),to:Math.min(s.to,Math.max(l,a))}}function wR(n,e,t){if(t.to<=n.viewport.from||t.from>=n.viewport.to)return[];let s=Math.max(t.from,n.viewport.from),i=Math.min(t.to,n.viewport.to),r=n.textDirection==Tt.LTR,o=n.contentDOM,l=o.getBoundingClientRect(),a=Z1(n),u=o.querySelector(".cm-line"),c=u&&window.getComputedStyle(u),d=l.left+(c?parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)):0),f=l.right-(c?parseInt(c.paddingRight):0),p=Bf(n,s,1),g=Bf(n,i,-1),b=p.type==Pn.Text?p:null,x=g.type==Pn.Text?g:null;if(b&&(n.lineWrapping||p.widgetLineBreaks)&&(b=k0(n,s,1,b)),x&&(n.lineWrapping||g.widgetLineBreaks)&&(x=k0(n,i,-1,x)),b&&x&&b.from==x.from&&b.to==x.to)return w(P(t.from,t.to,b));{let O=b?P(t.from,null,b):U(p,!1),A=x?P(null,t.to,x):U(g,!0),_=[];return(b||p).to<(x||g).from-(b&&x?1:0)||p.widgetLineBreaks>1&&O.bottom+n.defaultLineHeight/2<A.top?_.push(m(d,O.bottom,f,A.top)):O.bottom<A.top&&n.elementAtHeight((O.bottom+A.top)/2).type==Pn.Text&&(O.bottom=A.top=(O.bottom+A.top)/2),w(O).concat(_).concat(w(A))}function m(O,A,_,M){return new ql(e,O-a.left,A-a.top,_-O,M-A)}function w({top:O,bottom:A,horizontal:_}){let M=[];for(let W=0;W<_.length;W+=2)M.push(m(_[W],O,_[W+1],A));return M}function P(O,A,_){let M=1e9,W=-1e9,ue=[];function ee(Z,B,J,Q,ce){let ve=n.coordsAtPos(Z,Z==_.to?-2:2),je=n.coordsAtPos(J,J==_.from?2:-2);!ve||!je||(M=Math.min(ve.top,je.top,M),W=Math.max(ve.bottom,je.bottom,W),ce==Tt.LTR?ue.push(r&&B?d:ve.left,r&&Q?f:je.right):ue.push(!r&&Q?d:je.left,!r&&B?f:ve.right))}let F=O??_.from,ae=A??_.to;for(let Z of n.visibleRanges)if(Z.to>F&&Z.from<ae)for(let B=Math.max(Z.from,F),J=Math.min(Z.to,ae);;){let Q=n.state.doc.lineAt(B);for(let ce of n.bidiSpans(Q)){let ve=ce.from+Q.from,je=ce.to+Q.from;if(ve>=J)break;je>B&&ee(Math.max(ve,B),O==null&&ve<=F,Math.min(je,J),A==null&&je>=ae,ce.dir)}if(B=Q.to+1,B>=J)break}return ue.length==0&&ee(F,O==null,ae,A==null,n.textDirection),{top:M,bottom:W,horizontal:ue}}function U(O,A){let _=l.top+(A?O.top:O.bottom);return{top:_,bottom:_,horizontal:[]}}}function SR(n,e){return n.constructor==e.constructor&&n.eq(e)}class CR{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(Za)!=e.state.facet(Za)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,s=e.facet(Za);for(;t<s.length&&s[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,s)=>!SR(t,this.drawn[s]))){let t=this.dom.firstChild,s=0;for(let i of e)i.update&&t&&i.constructor&&this.drawn[s].constructor&&i.update(t,this.drawn[s])?(t=t.nextSibling,s++):this.dom.insertBefore(i.draw(),t);for(;t;){let i=t.nextSibling;t.remove(),t=i}this.drawn=e,De.safari&&De.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Za=Le.define();function ek(n){return[zt.define(e=>new CR(e,n)),Za.of(n)]}const Sl=Le.define({combine(n){return Ns(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function AR(n={}){return[Sl.of(n),ER,TR,DR,A1.of(!0)]}function tk(n){return n.startState.facet(Sl)!=n.state.facet(Sl)}const ER=ek({above:!0,markers(n){let{state:e}=n,t=e.facet(Sl),s=[];for(let i of e.selection.ranges){let r=i==e.selection.main;if(i.empty||t.drawRangeCursor){let o=r?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",l=i.empty?i:he.cursor(i.head,i.head>i.anchor?-1:1);for(let a of ql.forRange(n,o,l))s.push(a)}}return s},update(n,e){n.transactions.some(s=>s.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=tk(n);return t&&x0(n.state,e),n.docChanged||n.selectionSet||t},mount(n,e){x0(e.state,n)},class:"cm-cursorLayer"});function x0(n,e){e.style.animationDuration=n.facet(Sl).cursorBlinkRate+"ms"}const TR=ek({above:!1,markers(n){return n.state.selection.ranges.map(e=>e.empty?[]:ql.forRange(n,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(n,e){return n.docChanged||n.selectionSet||n.viewportChanged||tk(n)},class:"cm-selectionLayer"}),DR=gr.highest(Oe.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),nk=Ze.define({map(n,e){return n==null?null:e.mapPos(n)}}),Fo=ln.define({create(){return null},update(n,e){return n!=null&&(n=e.changes.mapPos(n)),e.effects.reduce((t,s)=>s.is(nk)?s.value:t,n)}}),PR=zt.fromClass(class{constructor(n){this.view=n,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(n){var e;let t=n.state.field(Fo);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(n.startState.field(Fo)!=t||n.docChanged||n.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:n}=this,e=n.state.field(Fo),t=e!=null&&n.coordsAtPos(e);if(!t)return null;let s=n.scrollDOM.getBoundingClientRect();return{left:t.left-s.left+n.scrollDOM.scrollLeft*n.scaleX,top:t.top-s.top+n.scrollDOM.scrollTop*n.scaleY,height:t.bottom-t.top}}drawCursor(n){if(this.cursor){let{scaleX:e,scaleY:t}=this.view;n?(this.cursor.style.left=n.left/e+"px",this.cursor.style.top=n.top/t+"px",this.cursor.style.height=n.height/t+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(n){this.view.state.field(Fo)!=n&&this.view.dispatch({effects:nk.of(n)})}},{eventObservers:{dragover(n){this.setDropPos(this.view.posAtCoords({x:n.clientX,y:n.clientY}))},dragleave(n){(n.target==this.view.contentDOM||!this.view.contentDOM.contains(n.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function RR(){return[Fo,PR]}function _0(n,e,t,s,i){e.lastIndex=0;for(let r=n.iterRange(t,s),o=t,l;!r.next().done;o+=r.value.length)if(!r.lineBreak)for(;l=e.exec(r.value);)i(o+l.index,l)}function OR(n,e){let t=n.visibleRanges;if(t.length==1&&t[0].from==n.viewport.from&&t[0].to==n.viewport.to)return t;let s=[];for(let{from:i,to:r}of t)i=Math.max(n.state.doc.lineAt(i).from,i-e),r=Math.min(n.state.doc.lineAt(r).to,r+e),s.length&&s[s.length-1].to>=i?s[s.length-1].to=r:s.push({from:i,to:r});return s}class LR{constructor(e){const{regexp:t,decoration:s,decorate:i,boundary:r,maxLength:o=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,i)this.addMatch=(l,a,u,c)=>i(c,u,u+l[0].length,l,a);else if(typeof s=="function")this.addMatch=(l,a,u,c)=>{let d=s(l,a,u);d&&c(u,u+l[0].length,d)};else if(s)this.addMatch=(l,a,u,c)=>c(u,u+l[0].length,s);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=r,this.maxLength=o}createDeco(e){let t=new ti,s=t.add.bind(t);for(let{from:i,to:r}of OR(e,this.maxLength))_0(e.state.doc,this.regexp,i,r,(o,l)=>this.addMatch(l,e,o,s));return t.finish()}updateDeco(e,t){let s=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((r,o,l,a)=>{a>=e.view.viewport.from&&l<=e.view.viewport.to&&(s=Math.min(l,s),i=Math.max(a,i))}),e.viewportMoved||i-s>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,t.map(e.changes),s,i):t}updateRange(e,t,s,i){for(let r of e.visibleRanges){let o=Math.max(r.from,s),l=Math.min(r.to,i);if(l>=o){let a=e.state.doc.lineAt(o),u=a.to<l?e.state.doc.lineAt(l):a,c=Math.max(r.from,a.from),d=Math.min(r.to,u.to);if(this.boundary){for(;o>a.from;o--)if(this.boundary.test(a.text[o-1-a.from])){c=o;break}for(;l<u.to;l++)if(this.boundary.test(u.text[l-u.from])){d=l;break}}let f=[],p,g=(b,x,m)=>f.push(m.range(b,x));if(a==u)for(this.regexp.lastIndex=c-a.from;(p=this.regexp.exec(a.text))&&p.index<d-a.from;)this.addMatch(p,e,p.index+a.from,g);else _0(e.state.doc,this.regexp,c,d,(b,x)=>this.addMatch(x,e,b,g));t=t.update({filterFrom:c,filterTo:d,filter:(b,x)=>b<c||x>d,add:f})}}return t}}const qf=/x/.unicode!=null?"gu":"g",MR=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,qf),IR={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let pd=null;function jR(){var n;if(pd==null&&typeof document<"u"&&document.body){let e=document.body.style;pd=((n=e.tabSize)!==null&&n!==void 0?n:e.MozTabSize)!=null}return pd||!1}const eu=Le.define({combine(n){let e=Ns(n,{render:null,specialChars:MR,addSpecialChars:null});return(e.replaceTabs=!jR())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,qf)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,qf)),e}});function VR(n={}){return[eu.of(n),$R()]}let w0=null;function $R(){return w0||(w0=zt.fromClass(class{constructor(n){this.view=n,this.decorations=ze.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(n.state.facet(eu)),this.decorations=this.decorator.createDeco(n)}makeDecorator(n){return new LR({regexp:n.specialChars,decoration:(e,t,s)=>{let{doc:i}=t.state,r=In(e[0],0);if(r==9){let o=i.lineAt(s),l=t.state.tabSize,a=mo(o.text,l,s-o.from);return ze.replace({widget:new UR((l-a%l)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[r]||(this.decorationCache[r]=ze.replace({widget:new FR(n,r)}))},boundary:n.replaceTabs?void 0:/[^]/})}update(n){let e=n.state.facet(eu);n.startState.facet(eu)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(n.view)):this.decorations=this.decorator.updateDeco(n,this.decorations)}},{decorations:n=>n.decorations}))}const NR="";function BR(n){return n>=32?NR:n==10?"":String.fromCharCode(9216+n)}class FR extends Li{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=BR(this.code),s=e.state.phrase("Control character")+" "+(IR[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,s,t);if(i)return i;let r=document.createElement("span");return r.textContent=t,r.title=s,r.setAttribute("aria-label",s),r.className="cm-specialChar",r}ignoreEvent(){return!1}}class UR extends Li{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function zR(){return WR}const HR=ze.line({class:"cm-activeLine"}),WR=zt.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=-1,t=[];for(let s of n.state.selection.ranges){let i=n.lineBlockAt(s.head);i.from>e&&(t.push(HR.range(i.from)),e=i.from)}return ze.set(t)}},{decorations:n=>n.decorations}),Gf=2e3;function qR(n,e,t){let s=Math.min(e.line,t.line),i=Math.max(e.line,t.line),r=[];if(e.off>Gf||t.off>Gf||e.col<0||t.col<0){let o=Math.min(e.off,t.off),l=Math.max(e.off,t.off);for(let a=s;a<=i;a++){let u=n.doc.line(a);u.length<=l&&r.push(he.range(u.from+o,u.to+l))}}else{let o=Math.min(e.col,t.col),l=Math.max(e.col,t.col);for(let a=s;a<=i;a++){let u=n.doc.line(a),c=Sf(u.text,o,n.tabSize,!0);if(c<0)r.push(he.cursor(u.to));else{let d=Sf(u.text,l,n.tabSize);r.push(he.range(u.from+c,u.from+d))}}}return r}function GR(n,e){let t=n.coordsAtPos(n.viewport.from);return t?Math.round(Math.abs((t.left-e)/n.defaultCharacterWidth)):-1}function S0(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1),s=n.state.doc.lineAt(t),i=t-s.from,r=i>Gf?-1:i==s.length?GR(n,e.clientX):mo(s.text,n.state.tabSize,t-s.from);return{line:s.number,col:r,off:i}}function KR(n,e){let t=S0(n,e),s=n.state.selection;return t?{update(i){if(i.docChanged){let r=i.changes.mapPos(i.startState.doc.line(t.line).from),o=i.state.doc.lineAt(r);t={line:o.number,col:t.col,off:Math.min(t.off,o.length)},s=s.map(i.changes)}},get(i,r,o){let l=S0(n,i);if(!l)return s;let a=qR(n.state,t,l);return a.length?o?he.create(a.concat(s.ranges)):he.create(a):s}}:null}function JR(n){let e=(t=>t.altKey&&t.button==0);return Oe.mouseSelectionStyle.of((t,s)=>e(s)?KR(t,s):null)}const QR={Alt:[18,n=>!!n.altKey],Control:[17,n=>!!n.ctrlKey],Shift:[16,n=>!!n.shiftKey],Meta:[91,n=>!!n.metaKey]},YR={style:"cursor: crosshair"};function XR(n={}){let[e,t]=QR[n.key||"Alt"],s=zt.fromClass(class{constructor(i){this.view=i,this.isDown=!1}set(i){this.isDown!=i&&(this.isDown=i,this.view.update([]))}},{eventObservers:{keydown(i){this.set(i.keyCode==e||t(i))},keyup(i){(i.keyCode==e||!t(i))&&this.set(!1)},mousemove(i){this.set(t(i))}}});return[s,Oe.contentAttributes.of(i=>{var r;return!((r=i.plugin(s))===null||r===void 0)&&r.isDown?YR:null})]}const Oo="-10000px";class sk{constructor(e,t,s,i){this.facet=t,this.createTooltipView=s,this.removeTooltipView=i,this.input=e.state.facet(t),this.tooltips=this.input.filter(o=>o);let r=null;this.tooltipViews=this.tooltips.map(o=>r=s(o,r))}update(e,t){var s;let i=e.state.facet(this.facet),r=i.filter(a=>a);if(i===this.input){for(let a of this.tooltipViews)a.update&&a.update(e);return!1}let o=[],l=t?[]:null;for(let a=0;a<r.length;a++){let u=r[a],c=-1;if(u){for(let d=0;d<this.tooltips.length;d++){let f=this.tooltips[d];f&&f.create==u.create&&(c=d)}if(c<0)o[a]=this.createTooltipView(u,a?o[a-1]:null),l&&(l[a]=!!u.above);else{let d=o[a]=this.tooltipViews[c];l&&(l[a]=t[c]),d.update&&d.update(e)}}}for(let a of this.tooltipViews)o.indexOf(a)<0&&(this.removeTooltipView(a),(s=a.destroy)===null||s===void 0||s.call(a));return t&&(l.forEach((a,u)=>t[u]=a),t.length=l.length),this.input=i,this.tooltips=r,this.tooltipViews=o,!0}}function ZR(n){let e=n.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const md=Le.define({combine:n=>{var e,t,s;return{position:De.ios?"absolute":((e=n.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=n.find(i=>i.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((s=n.find(i=>i.tooltipSpace))===null||s===void 0?void 0:s.tooltipSpace)||ZR}}}),C0=new WeakMap,np=zt.fromClass(class{constructor(n){this.view=n,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=n.state.facet(md);this.position=e.position,this.parent=e.parent,this.classes=n.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new sk(n,sp,(t,s)=>this.createTooltip(t,s),t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()}),this.above=this.manager.tooltips.map(t=>!!t.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),n.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let n of this.manager.tooltipViews)this.intersectionObserver.observe(n.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(n){n.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(n,this.above);e&&this.observeIntersection();let t=e||n.geometryChanged,s=n.state.facet(md);if(s.position!=this.position&&!this.madeAbsolute){this.position=s.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;t=!0}if(s.parent!=this.parent){this.parent&&this.container.remove(),this.parent=s.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(n,e){let t=n.create(this.view),s=e?e.dom:null;if(t.dom.classList.add("cm-tooltip"),n.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let i=document.createElement("div");i.className="cm-tooltip-arrow",t.dom.appendChild(i)}return t.dom.style.position=this.position,t.dom.style.top=Oo,t.dom.style.left="0px",this.container.insertBefore(t.dom,s),t.mount&&t.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(t.dom),t}destroy(){var n,e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let s of this.manager.tooltipViews)s.dom.remove(),(n=s.destroy)===null||n===void 0||n.call(s);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let n=1,e=1,t=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:r}=this.manager.tooltipViews[0];if(De.gecko)t=r.offsetParent!=this.container.ownerDocument.body;else if(r.style.top==Oo&&r.style.left=="0px"){let o=r.getBoundingClientRect();t=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}}if(t||this.position=="absolute")if(this.parent){let r=this.parent.getBoundingClientRect();r.width&&r.height&&(n=r.width/this.parent.offsetWidth,e=r.height/this.parent.offsetHeight)}else({scaleX:n,scaleY:e}=this.view.viewState);let s=this.view.scrollDOM.getBoundingClientRect(),i=Yh(this.view);return{visible:{left:s.left+i.left,top:s.top+i.top,right:s.right-i.right,bottom:s.bottom-i.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((r,o)=>{let l=this.manager.tooltipViews[o];return l.getCoords?l.getCoords(r.pos):this.view.coordsAtPos(r.pos)}),size:this.manager.tooltipViews.map(({dom:r})=>r.getBoundingClientRect()),space:this.view.state.facet(md).tooltipSpace(this.view),scaleX:n,scaleY:e,makeAbsolute:t}}writeMeasure(n){var e;if(n.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let l of this.manager.tooltipViews)l.dom.style.position="absolute"}let{visible:t,space:s,scaleX:i,scaleY:r}=n,o=[];for(let l=0;l<this.manager.tooltips.length;l++){let a=this.manager.tooltips[l],u=this.manager.tooltipViews[l],{dom:c}=u,d=n.pos[l],f=n.size[l];if(!d||a.clip!==!1&&(d.bottom<=Math.max(t.top,s.top)||d.top>=Math.min(t.bottom,s.bottom)||d.right<Math.max(t.left,s.left)-.1||d.left>Math.min(t.right,s.right)+.1)){c.style.top=Oo;continue}let p=a.arrow?u.dom.querySelector(".cm-tooltip-arrow"):null,g=p?7:0,b=f.right-f.left,x=(e=C0.get(u))!==null&&e!==void 0?e:f.bottom-f.top,m=u.offset||tO,w=this.view.textDirection==Tt.LTR,P=f.width>s.right-s.left?w?s.left:s.right-f.width:w?Math.max(s.left,Math.min(d.left-(p?14:0)+m.x,s.right-b)):Math.min(Math.max(s.left,d.left-b+(p?14:0)-m.x),s.right-b),U=this.above[l];!a.strictSide&&(U?d.top-x-g-m.y<s.top:d.bottom+x+g+m.y>s.bottom)&&U==s.bottom-d.bottom>d.top-s.top&&(U=this.above[l]=!U);let O=(U?d.top-s.top:s.bottom-d.bottom)-g;if(O<x&&u.resize!==!1){if(O<this.view.defaultLineHeight){c.style.top=Oo;continue}C0.set(u,x),c.style.height=(x=O)/r+"px"}else c.style.height&&(c.style.height="");let A=U?d.top-x-g-m.y:d.bottom+g+m.y,_=P+b;if(u.overlap!==!0)for(let M of o)M.left<_&&M.right>P&&M.top<A+x&&M.bottom>A&&(A=U?M.top-x-2-g:M.bottom+g+2);if(this.position=="absolute"?(c.style.top=(A-n.parent.top)/r+"px",A0(c,(P-n.parent.left)/i)):(c.style.top=A/r+"px",A0(c,P/i)),p){let M=d.left+(w?m.x:-m.x)-(P+14-7);p.style.left=M/i+"px"}u.overlap!==!0&&o.push({left:P,top:A,right:_,bottom:A+x}),c.classList.toggle("cm-tooltip-above",U),c.classList.toggle("cm-tooltip-below",!U),u.positioned&&u.positioned(n.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let n of this.manager.tooltipViews)n.dom.style.top=Oo}},{eventObservers:{scroll(){this.maybeMeasure()}}});function A0(n,e){let t=parseInt(n.style.left,10);(isNaN(t)||Math.abs(e-t)>1)&&(n.style.left=e+"px")}const eO=Oe.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),tO={x:0,y:0},sp=Le.define({enables:[np,eO]}),Ou=Le.define({combine:n=>n.reduce((e,t)=>e.concat(t),[])});class yc{static create(e){return new yc(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new sk(e,Ou,(t,s)=>this.createHostedView(t,s),t=>t.dom.remove())}createHostedView(e,t){let s=e.create(this.view);return s.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(s.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&s.mount&&s.mount(this.view),s}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}passProp(e){let t;for(let s of this.manager.tooltipViews){let i=s[e];if(i!==void 0){if(t===void 0)t=i;else if(t!==i)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const nO=sp.compute([Ou],n=>{let e=n.facet(Ou);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.map(t=>{var s;return(s=t.end)!==null&&s!==void 0?s:t.pos})),create:yc.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class sO{constructor(e,t,s,i,r){this.view=e,this.source=t,this.field=s,this.setHover=i,this.hoverTime=r,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,s=e.docView.nearest(t.target);if(!s)return;let i,r=1;if(s instanceof yi)i=s.posAtStart;else{if(i=e.posAtCoords(t),i==null)return;let l=e.coordsAtPos(i);if(!l||t.y<l.top||t.y>l.bottom||t.x<l.left-e.defaultCharacterWidth||t.x>l.right+e.defaultCharacterWidth)return;let a=e.bidiSpans(e.state.doc.lineAt(i)).find(c=>c.from<=i&&c.to>=i),u=a&&a.dir==Tt.RTL?-1:1;r=t.x<l.left?-u:u}let o=this.source(e,i,r);if(o?.then){let l=this.pending={pos:i};o.then(a=>{this.pending==l&&(this.pending=null,a&&!(Array.isArray(a)&&!a.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(a)?a:[a])}))},a=>Vn(e.state,a,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(np),t=e?e.manager.tooltips.findIndex(s=>s.create==yc.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,s;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:i,tooltip:r}=this;if(i.length&&r&&!iO(r.dom,e)||this.pending){let{pos:o}=i[0]||this.pending,l=(s=(t=i[0])===null||t===void 0?void 0:t.end)!==null&&s!==void 0?s:o;(o==l?this.view.posAtCoords(this.lastMove)!=o:!rO(this.view,o,l,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:s}=this;s&&s.dom.contains(e.relatedTarget)?this.watchTooltipLeave(s.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=s=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(s.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const Pa=4;function iO(n,e){let{left:t,right:s,top:i,bottom:r}=n.getBoundingClientRect(),o;if(o=n.querySelector(".cm-tooltip-arrow")){let l=o.getBoundingClientRect();i=Math.min(l.top,i),r=Math.max(l.bottom,r)}return e.clientX>=t-Pa&&e.clientX<=s+Pa&&e.clientY>=i-Pa&&e.clientY<=r+Pa}function rO(n,e,t,s,i,r){let o=n.scrollDOM.getBoundingClientRect(),l=n.documentTop+n.documentPadding.top+n.contentHeight;if(o.left>s||o.right<s||o.top>i||Math.min(o.bottom,l)<i)return!1;let a=n.posAtCoords({x:s,y:i},!1);return a>=e&&a<=t}function oO(n,e={}){let t=Ze.define(),s=ln.define({create(){return[]},update(i,r){if(i.length&&(e.hideOnChange&&(r.docChanged||r.selection)?i=[]:e.hideOn&&(i=i.filter(o=>!e.hideOn(r,o))),r.docChanged)){let o=[];for(let l of i){let a=r.changes.mapPos(l.pos,-1,Dn.TrackDel);if(a!=null){let u=Object.assign(Object.create(null),l);u.pos=a,u.end!=null&&(u.end=r.changes.mapPos(u.end)),o.push(u)}}i=o}for(let o of r.effects)o.is(t)&&(i=o.value),o.is(lO)&&(i=[]);return i},provide:i=>Ou.from(i)});return{active:s,extension:[s,zt.define(i=>new sO(i,n,s,t,e.hoverTime||300)),nO]}}function ik(n,e){let t=n.plugin(np);if(!t)return null;let s=t.manager.tooltips.indexOf(e);return s<0?null:t.manager.tooltipViews[s]}const lO=Ze.define(),E0=Le.define({combine(n){let e,t;for(let s of n)e=e||s.topContainer,t=t||s.bottomContainer;return{topContainer:e,bottomContainer:t}}});function Cl(n,e){let t=n.plugin(rk),s=t?t.specs.indexOf(e):-1;return s>-1?t.panels[s]:null}const rk=zt.fromClass(class{constructor(n){this.input=n.state.facet(Al),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(n));let e=n.state.facet(E0);this.top=new Ra(n,!0,e.topContainer),this.bottom=new Ra(n,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(n){let e=n.state.facet(E0);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Ra(n.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Ra(n.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=n.state.facet(Al);if(t!=this.input){let s=t.filter(a=>a),i=[],r=[],o=[],l=[];for(let a of s){let u=this.specs.indexOf(a),c;u<0?(c=a(n.view),l.push(c)):(c=this.panels[u],c.update&&c.update(n)),i.push(c),(c.top?r:o).push(c)}this.specs=s,this.panels=i,this.top.sync(r),this.bottom.sync(o);for(let a of l)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}else for(let s of this.panels)s.update&&s.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>Oe.scrollMargins.of(e=>{let t=e.plugin(n);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class Ra{constructor(e,t,s){this.view=e,this.top=t,this.container=s,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=T0(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=T0(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function T0(n){let e=n.nextSibling;return n.remove(),e}const Al=Le.define({enables:rk});class si extends ar{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}si.prototype.elementClass="";si.prototype.toDOM=void 0;si.prototype.mapMode=Dn.TrackBefore;si.prototype.startSide=si.prototype.endSide=-1;si.prototype.point=!0;const tu=Le.define(),aO=Le.define(),uO={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>lt.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},sl=Le.define();function cO(n){return[ok(),sl.of({...uO,...n})]}const D0=Le.define({combine:n=>n.some(e=>e)});function ok(n){return[dO]}const dO=zt.fromClass(class{constructor(n){this.view=n,this.domAfter=null,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=n.state.facet(sl).map(e=>new R0(n,e)),this.fixed=!n.state.facet(D0);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(n){if(this.updateGutters(n)){let e=this.prevViewport,t=n.view.viewport,s=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(s<(t.to-t.from)*.8)}if(n.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(D0)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let t=lt.iter(this.view.state.facet(tu),this.view.viewport.from),s=[],i=this.gutters.map(r=>new fO(r,this.view.viewport,-this.view.documentPadding.top));for(let r of this.view.viewportLineBlocks)if(s.length&&(s=[]),Array.isArray(r.type)){let o=!0;for(let l of r.type)if(l.type==Pn.Text&&o){Kf(t,s,l.from);for(let a of i)a.line(this.view,l,s);o=!1}else if(l.widget)for(let a of i)a.widget(this.view,l)}else if(r.type==Pn.Text){Kf(t,s,r.from);for(let o of i)o.line(this.view,r,s)}else if(r.widget)for(let o of i)o.widget(this.view,r);for(let r of i)r.finish();n&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(n){let e=n.startState.facet(sl),t=n.state.facet(sl),s=n.docChanged||n.heightChanged||n.viewportChanged||!lt.eq(n.startState.facet(tu),n.state.facet(tu),n.view.viewport.from,n.view.viewport.to);if(e==t)for(let i of this.gutters)i.update(n)&&(s=!0);else{s=!0;let i=[];for(let r of t){let o=e.indexOf(r);o<0?i.push(new R0(this.view,r)):(this.gutters[o].update(n),i.push(this.gutters[o]))}for(let r of this.gutters)r.dom.remove(),i.indexOf(r)<0&&r.destroy();for(let r of i)r.config.side=="after"?this.getDOMAfter().appendChild(r.dom):this.dom.appendChild(r.dom);this.gutters=i}return s}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:n=>Oe.scrollMargins.of(e=>{let t=e.plugin(n);if(!t||t.gutters.length==0||!t.fixed)return null;let s=t.dom.offsetWidth*e.scaleX,i=t.domAfter?t.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==Tt.LTR?{left:s,right:i}:{right:s,left:i}})});function P0(n){return Array.isArray(n)?n:[n]}function Kf(n,e,t){for(;n.value&&n.from<=t;)n.from==t&&e.push(n.value),n.next()}class fO{constructor(e,t,s){this.gutter=e,this.height=s,this.i=0,this.cursor=lt.iter(e.markers,t.from)}addElement(e,t,s){let{gutter:i}=this,r=(t.top-this.height)/e.scaleY,o=t.height/e.scaleY;if(this.i==i.elements.length){let l=new lk(e,o,r,s);i.elements.push(l),i.dom.appendChild(l.dom)}else i.elements[this.i].update(e,o,r,s);this.height=t.bottom,this.i++}line(e,t,s){let i=[];Kf(this.cursor,i,t.from),s.length&&(i=i.concat(s));let r=this.gutter.config.lineMarker(e,t,i);r&&i.unshift(r);let o=this.gutter;i.length==0&&!o.config.renderEmptyElements||this.addElement(e,t,i)}widget(e,t){let s=this.gutter.config.widgetMarker(e,t.widget,t),i=s?[s]:null;for(let r of e.state.facet(aO)){let o=r(e,t.widget,t);o&&(i||(i=[])).push(o)}i&&this.addElement(e,t,i)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class R0{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let s in t.domEventHandlers)this.dom.addEventListener(s,i=>{let r=i.target,o;if(r!=this.dom&&this.dom.contains(r)){for(;r.parentNode!=this.dom;)r=r.parentNode;let a=r.getBoundingClientRect();o=(a.top+a.bottom)/2}else o=i.clientY;let l=e.lineBlockAtHeight(o-e.documentTop);t.domEventHandlers[s](e,l,i)&&i.preventDefault()});this.markers=P0(t.markers(e)),t.initialSpacer&&(this.spacer=new lk(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=P0(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let s=e.view.viewport;return!lt.eq(this.markers,t,s.from,s.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class lk{constructor(e,t,s,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,s,i)}update(e,t,s,i){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=s&&(this.dom.style.marginTop=(this.above=s)?s+"px":""),hO(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,t){let s="cm-gutterElement",i=this.dom.firstChild;for(let r=0,o=0;;){let l=o,a=r<t.length?t[r++]:null,u=!1;if(a){let c=a.elementClass;c&&(s+=" "+c);for(let d=o;d<this.markers.length;d++)if(this.markers[d].compare(a)){l=d,u=!0;break}}else l=this.markers.length;for(;o<l;){let c=this.markers[o++];if(c.toDOM){c.destroy(i);let d=i.nextSibling;i.remove(),i=d}}if(!a)break;a.toDOM&&(u?i=i.nextSibling:this.dom.insertBefore(a.toDOM(e),i)),u&&o++}this.dom.className=s,this.markers=t}destroy(){this.setMarkers(null,[])}}function hO(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].compare(e[t]))return!1;return!0}const pO=Le.define(),mO=Le.define(),Pr=Le.define({combine(n){return Ns(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let s=Object.assign({},e);for(let i in t){let r=s[i],o=t[i];s[i]=r?(l,a,u)=>r(l,a,u)||o(l,a,u):o}return s}})}});class gd extends si{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function vd(n,e){return n.state.facet(Pr).formatNumber(e,n.state)}const gO=sl.compute([Pr],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(pO)},lineMarker(e,t,s){return s.some(i=>i.toDOM)?null:new gd(vd(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,s)=>{for(let i of e.state.facet(mO)){let r=i(e,t,s);if(r)return r}return null},lineMarkerChange:e=>e.startState.facet(Pr)!=e.state.facet(Pr),initialSpacer(e){return new gd(vd(e,O0(e.state.doc.lines)))},updateSpacer(e,t){let s=vd(t.view,O0(t.view.state.doc.lines));return s==e.number?e:new gd(s)},domEventHandlers:n.facet(Pr).domEventHandlers,side:"before"}));function vO(n={}){return[Pr.of(n),ok(),gO]}function O0(n){let e=9;for(;e<n;)e=e*10+9;return e}const yO=new class extends si{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},bO=tu.compute(["selection"],n=>{let e=[],t=-1;for(let s of n.selection.ranges){let i=n.doc.lineAt(s.head).from;i>t&&(t=i,e.push(yO.range(i)))}return lt.of(e)});function kO(){return bO}const xO=1024;let _O=0;class yd{constructor(e,t){this.from=e,this.to=t}}class st{constructor(e={}){this.id=_O++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Bn.match(e)),t=>{let s=e(t);return s===void 0?null:[this,s]}}}st.closedBy=new st({deserialize:n=>n.split(" ")});st.openedBy=new st({deserialize:n=>n.split(" ")});st.group=new st({deserialize:n=>n.split(" ")});st.isolate=new st({deserialize:n=>{if(n&&n!="rtl"&&n!="ltr"&&n!="auto")throw new RangeError("Invalid value for isolate: "+n);return n||"auto"}});st.contextHash=new st({perNode:!0});st.lookAhead=new st({perNode:!0});st.mounted=new st({perNode:!0});class Lu{constructor(e,t,s){this.tree=e,this.overlay=t,this.parser=s}static get(e){return e&&e.props&&e.props[st.mounted.id]}}const wO=Object.create(null);class Bn{constructor(e,t,s,i=0){this.name=e,this.props=t,this.id=s,this.flags=i}static define(e){let t=e.props&&e.props.length?Object.create(null):wO,s=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new Bn(e.name||"",t,e.id,s);if(e.props){for(let r of e.props)if(Array.isArray(r)||(r=r(i)),r){if(r[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[r[0].id]=r[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(st.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let s in e)for(let i of s.split(" "))t[i]=e[s];return s=>{for(let i=s.prop(st.group),r=-1;r<(i?i.length:0);r++){let o=t[r<0?s.name:i[r]];if(o)return o}}}}Bn.none=new Bn("",Object.create(null),0,8);class ip{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let s of this.types){let i=null;for(let r of e){let o=r(s);if(o){i||(i=Object.assign({},s.props));let l=o[1],a=o[0];a.combine&&a.id in i&&(l=a.combine(i[a.id],l)),i[a.id]=l}}t.push(i?new Bn(s.name,i,s.id,s.flags):s)}return new ip(t)}}const Oa=new WeakMap,L0=new WeakMap;var sn;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(sn||(sn={}));class Ot{constructor(e,t,s,i,r){if(this.type=e,this.children=t,this.positions=s,this.length=i,this.props=null,r&&r.length){this.props=Object.create(null);for(let[o,l]of r)this.props[typeof o=="number"?o:o.id]=l}}toString(){let e=Lu.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let s of this.children){let i=s.toString();i&&(t&&(t+=","),t+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new Qf(this.topNode,e)}cursorAt(e,t=0,s=0){let i=Oa.get(this)||this.topNode,r=new Qf(i);return r.moveTo(e,t),Oa.set(this,r._tree),r}get topNode(){return new os(this,0,0,null)}resolve(e,t=0){let s=El(Oa.get(this)||this.topNode,e,t,!1);return Oa.set(this,s),s}resolveInner(e,t=0){let s=El(L0.get(this)||this.topNode,e,t,!0);return L0.set(this,s),s}resolveStack(e,t=0){return AO(this,e,t)}iterate(e){let{enter:t,leave:s,from:i=0,to:r=this.length}=e,o=e.mode||0,l=(o&sn.IncludeAnonymous)>0;for(let a=this.cursor(o|sn.IncludeAnonymous);;){let u=!1;if(a.from<=r&&a.to>=i&&(!l&&a.type.isAnonymous||t(a)!==!1)){if(a.firstChild())continue;u=!0}for(;u&&s&&(l||!a.type.isAnonymous)&&s(a),!a.nextSibling();){if(!a.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:lp(Bn.none,this.children,this.positions,0,this.children.length,0,this.length,(t,s,i)=>new Ot(this.type,t,s,i,this.propValues),e.makeTree||((t,s,i)=>new Ot(Bn.none,t,s,i)))}static build(e){return EO(e)}}Ot.empty=new Ot(Bn.none,[],[],0);class rp{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new rp(this.buffer,this.index)}}class Ri{constructor(e,t,s){this.buffer=e,this.length=t,this.set=s}get type(){return Bn.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],s=this.buffer[e+3],i=this.set.types[t],r=i.name;if(/\W/.test(r)&&!i.isError&&(r=JSON.stringify(r)),e+=4,s==e)return r;let o=[];for(;e<s;)o.push(this.childString(e)),e=this.buffer[e+3];return r+"("+o.join(",")+")"}findChild(e,t,s,i,r){let{buffer:o}=this,l=-1;for(let a=e;a!=t&&!(ak(r,i,o[a+1],o[a+2])&&(l=a,s>0));a=o[a+3]);return l}slice(e,t,s){let i=this.buffer,r=new Uint16Array(t-e),o=0;for(let l=e,a=0;l<t;){r[a++]=i[l++],r[a++]=i[l++]-s;let u=r[a++]=i[l++]-s;r[a++]=i[l++]-e,o=Math.max(o,u)}return new Ri(r,o,this.set)}}function ak(n,e,t,s){switch(n){case-2:return t<e;case-1:return s>=e&&t<e;case 0:return t<e&&s>e;case 1:return t<=e&&s>e;case 2:return s>e;case 4:return!0}}function El(n,e,t,s){for(var i;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let o=!s&&n instanceof os&&n.index<0?null:n.parent;if(!o)return n;n=o}let r=s?0:sn.IgnoreOverlays;if(s)for(let o=n,l=o.parent;l;o=l,l=o.parent)o instanceof os&&o.index<0&&((i=l.enter(e,t,r))===null||i===void 0?void 0:i.from)!=o.from&&(n=l);for(;;){let o=n.enter(e,t,r);if(!o)return n;n=o}}class uk{cursor(e=0){return new Qf(this,e)}getChild(e,t=null,s=null){let i=M0(this,e,t,s);return i.length?i[0]:null}getChildren(e,t=null,s=null){return M0(this,e,t,s)}resolve(e,t=0){return El(this,e,t,!1)}resolveInner(e,t=0){return El(this,e,t,!0)}matchContext(e){return Jf(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),s=this;for(;t;){let i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(s=t,t=i.prevSibling):t=i}return s}get node(){return this}get next(){return this.parent}}class os extends uk{constructor(e,t,s,i){super(),this._tree=e,this.from=t,this.index=s,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,s,i,r=0){for(let o=this;;){for(let{children:l,positions:a}=o._tree,u=t>0?l.length:-1;e!=u;e+=t){let c=l[e],d=a[e]+o.from;if(ak(i,s,d,d+c.length)){if(c instanceof Ri){if(r&sn.ExcludeBuffers)continue;let f=c.findChild(0,c.buffer.length,t,s-d,i);if(f>-1)return new ki(new SO(o,c,e,d),null,f)}else if(r&sn.IncludeAnonymous||!c.type.isAnonymous||op(c)){let f;if(!(r&sn.IgnoreMounts)&&(f=Lu.get(c))&&!f.overlay)return new os(f.tree,d,e,o);let p=new os(c,d,e,o);return r&sn.IncludeAnonymous||!p.type.isAnonymous?p:p.nextChild(t<0?c.children.length-1:0,t,s,i)}}}if(r&sn.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,s=0){let i;if(!(s&sn.IgnoreOverlays)&&(i=Lu.get(this._tree))&&i.overlay){let r=e-this.from;for(let{from:o,to:l}of i.overlay)if((t>0?o<=r:o<r)&&(t<0?l>=r:l>r))return new os(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,s)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function M0(n,e,t,s){let i=n.cursor(),r=[];if(!i.firstChild())return r;if(t!=null){for(let o=!1;!o;)if(o=i.type.is(t),!i.nextSibling())return r}for(;;){if(s!=null&&i.type.is(s))return r;if(i.type.is(e)&&r.push(i.node),!i.nextSibling())return s==null?r:[]}}function Jf(n,e,t=e.length-1){for(let s=n;t>=0;s=s.parent){if(!s)return!1;if(!s.type.isAnonymous){if(e[t]&&e[t]!=s.name)return!1;t--}}return!0}class SO{constructor(e,t,s,i){this.parent=e,this.buffer=t,this.index=s,this.start=i}}class ki extends uk{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,s){super(),this.context=e,this._parent=t,this.index=s,this.type=e.buffer.set.types[e.buffer.buffer[s]]}child(e,t,s){let{buffer:i}=this.context,r=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.context.start,s);return r<0?null:new ki(this.context,this,r)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,s=0){if(s&sn.ExcludeBuffers)return null;let{buffer:i}=this.context,r=i.findChild(this.index+4,i.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return r<0?null:new ki(this.context,this,r)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new ki(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new ki(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:s}=this.context,i=this.index+4,r=s.buffer[this.index+3];if(r>i){let o=s.buffer[this.index+1];e.push(s.slice(i,r,o)),t.push(0)}return new Ot(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function ck(n){if(!n.length)return null;let e=0,t=n[0];for(let r=1;r<n.length;r++){let o=n[r];(o.from>t.from||o.to<t.to)&&(t=o,e=r)}let s=t instanceof os&&t.index<0?null:t.parent,i=n.slice();return s?i[e]=s:i.splice(e,1),new CO(i,t)}class CO{constructor(e,t){this.heads=e,this.node=t}get next(){return ck(this.heads)}}function AO(n,e,t){let s=n.resolveInner(e,t),i=null;for(let r=s instanceof os?s:s.context.parent;r;r=r.parent)if(r.index<0){let o=r.parent;(i||(i=[s])).push(o.resolve(e,t)),r=o}else{let o=Lu.get(r.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let l=new os(o.tree,o.overlay[0].from+r.from,-1,r);(i||(i=[s])).push(El(l,e,t,!1))}}return i?ck(i):s}class Qf{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof os)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let s=e._parent;s;s=s._parent)this.stack.unshift(s.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:s,buffer:i}=this.buffer;return this.type=t||i.set.types[i.buffer[e]],this.from=s+i.buffer[e+1],this.to=s+i.buffer[e+2],!0}yield(e){return e?e instanceof os?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,s){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,s,this.mode));let{buffer:i}=this.buffer,r=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.buffer.start,s);return r<0?!1:(this.stack.push(this.index),this.yieldBuf(r))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,s=this.mode){return this.buffer?s&sn.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,s))}parent(){if(!this.buffer)return this.yieldNode(this.mode&sn.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&sn.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,s=this.stack.length-1;if(e<0){let i=s<0?0:this.stack[s]+4;if(this.index!=i)return this.yieldBuf(t.findChild(i,this.index,-1,0,4))}else{let i=t.buffer[this.index+3];if(i<(s<0?t.buffer.length:t.buffer[this.stack[s]+3]))return this.yieldBuf(i)}return s<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,s,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let r=0;r<this.index;r++)if(i.buffer.buffer[r+3]<this.index)return!1;({index:t,parent:s}=i)}else({index:t,_parent:s}=this._tree);for(;s;{index:t,_parent:s}=s)if(t>-1)for(let r=t+e,o=e<0?-1:s._tree.children.length;r!=o;r+=e){let l=s._tree.children[r];if(this.mode&sn.IncludeAnonymous||l instanceof Ri||!l.type.isAnonymous||op(l))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,s=0;if(e&&e.context==this.buffer)e:for(let i=this.index,r=this.stack.length;r>=0;){for(let o=e;o;o=o._parent)if(o.index==i){if(i==this.index)return o;t=o,s=r+1;break e}i=this.stack[--r]}for(let i=s;i<this.stack.length;i++)t=new ki(this.buffer,t,this.stack[i]);return this.bufferNode=new ki(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let s=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){s++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&t&&t(this),i=this.type.isAnonymous,!s)return;if(this.nextSibling())break;this.parent(),s--,i=!0}}}matchContext(e){if(!this.buffer)return Jf(this.node.parent,e);let{buffer:t}=this.buffer,{types:s}=t.set;for(let i=e.length-1,r=this.stack.length-1;i>=0;r--){if(r<0)return Jf(this._tree,e,i);let o=s[t.buffer[this.stack[r]]];if(!o.isAnonymous){if(e[i]&&e[i]!=o.name)return!1;i--}}return!0}}function op(n){return n.children.some(e=>e instanceof Ri||!e.type.isAnonymous||op(e))}function EO(n){var e;let{buffer:t,nodeSet:s,maxBufferLength:i=xO,reused:r=[],minRepeatType:o=s.types.length}=n,l=Array.isArray(t)?new rp(t,t.length):t,a=s.types,u=0,c=0;function d(O,A,_,M,W,ue){let{id:ee,start:F,end:ae,size:Z}=l,B=c,J=u;if(Z<0)if(l.next(),Z==-1){let $e=r[ee];_.push($e),M.push(F-O);return}else if(Z==-3){u=ee;return}else if(Z==-4){c=ee;return}else throw new RangeError(`Unrecognized record size: ${Z}`);let Q=a[ee],ce,ve,je=F-O;if(ae-F<=i&&(ve=x(l.pos-A,W))){let $e=new Uint16Array(ve.size-ve.skip),Me=l.pos-ve.size,We=$e.length;for(;l.pos>Me;)We=m(ve.start,$e,We);ce=new Ri($e,ae-ve.start,s),je=ve.start-O}else{let $e=l.pos-Z;l.next();let Me=[],We=[],ct=ee>=o?ee:-1,rt=0,tt=ae;for(;l.pos>$e;)ct>=0&&l.id==ct&&l.size>=0?(l.end<=tt-i&&(g(Me,We,F,rt,l.end,tt,ct,B,J),rt=Me.length,tt=l.end),l.next()):ue>2500?f(F,$e,Me,We):d(F,$e,Me,We,ct,ue+1);if(ct>=0&&rt>0&&rt<Me.length&&g(Me,We,F,rt,F,tt,ct,B,J),Me.reverse(),We.reverse(),ct>-1&&rt>0){let oe=p(Q,J);ce=lp(Q,Me,We,0,Me.length,0,ae-F,oe,oe)}else ce=b(Q,Me,We,ae-F,B-ae,J)}_.push(ce),M.push(je)}function f(O,A,_,M){let W=[],ue=0,ee=-1;for(;l.pos>A;){let{id:F,start:ae,end:Z,size:B}=l;if(B>4)l.next();else{if(ee>-1&&ae<ee)break;ee<0&&(ee=Z-i),W.push(F,ae,Z),ue++,l.next()}}if(ue){let F=new Uint16Array(ue*4),ae=W[W.length-2];for(let Z=W.length-3,B=0;Z>=0;Z-=3)F[B++]=W[Z],F[B++]=W[Z+1]-ae,F[B++]=W[Z+2]-ae,F[B++]=B;_.push(new Ri(F,W[2]-ae,s)),M.push(ae-O)}}function p(O,A){return(_,M,W)=>{let ue=0,ee=_.length-1,F,ae;if(ee>=0&&(F=_[ee])instanceof Ot){if(!ee&&F.type==O&&F.length==W)return F;(ae=F.prop(st.lookAhead))&&(ue=M[ee]+F.length+ae)}return b(O,_,M,W,ue,A)}}function g(O,A,_,M,W,ue,ee,F,ae){let Z=[],B=[];for(;O.length>M;)Z.push(O.pop()),B.push(A.pop()+_-W);O.push(b(s.types[ee],Z,B,ue-W,F-ue,ae)),A.push(W-_)}function b(O,A,_,M,W,ue,ee){if(ue){let F=[st.contextHash,ue];ee=ee?[F].concat(ee):[F]}if(W>25){let F=[st.lookAhead,W];ee=ee?[F].concat(ee):[F]}return new Ot(O,A,_,M,ee)}function x(O,A){let _=l.fork(),M=0,W=0,ue=0,ee=_.end-i,F={size:0,start:0,skip:0};e:for(let ae=_.pos-O;_.pos>ae;){let Z=_.size;if(_.id==A&&Z>=0){F.size=M,F.start=W,F.skip=ue,ue+=4,M+=4,_.next();continue}let B=_.pos-Z;if(Z<0||B<ae||_.start<ee)break;let J=_.id>=o?4:0,Q=_.start;for(_.next();_.pos>B;){if(_.size<0)if(_.size==-3)J+=4;else break e;else _.id>=o&&(J+=4);_.next()}W=Q,M+=Z,ue+=J}return(A<0||M==O)&&(F.size=M,F.start=W,F.skip=ue),F.size>4?F:void 0}function m(O,A,_){let{id:M,start:W,end:ue,size:ee}=l;if(l.next(),ee>=0&&M<o){let F=_;if(ee>4){let ae=l.pos-(ee-4);for(;l.pos>ae;)_=m(O,A,_)}A[--_]=F,A[--_]=ue-O,A[--_]=W-O,A[--_]=M}else ee==-3?u=M:ee==-4&&(c=M);return _}let w=[],P=[];for(;l.pos>0;)d(n.start||0,n.bufferStart||0,w,P,-1,0);let U=(e=n.length)!==null&&e!==void 0?e:w.length?P[0]+w[0].length:0;return new Ot(a[n.topID],w.reverse(),P.reverse(),U)}const I0=new WeakMap;function nu(n,e){if(!n.isAnonymous||e instanceof Ri||e.type!=n)return 1;let t=I0.get(e);if(t==null){t=1;for(let s of e.children){if(s.type!=n||!(s instanceof Ot)){t=1;break}t+=nu(n,s)}I0.set(e,t)}return t}function lp(n,e,t,s,i,r,o,l,a){let u=0;for(let g=s;g<i;g++)u+=nu(n,e[g]);let c=Math.ceil(u*1.5/8),d=[],f=[];function p(g,b,x,m,w){for(let P=x;P<m;){let U=P,O=b[P],A=nu(n,g[P]);for(P++;P<m;P++){let _=nu(n,g[P]);if(A+_>=c)break;A+=_}if(P==U+1){if(A>c){let _=g[U];p(_.children,_.positions,0,_.children.length,b[U]+w);continue}d.push(g[U])}else{let _=b[P-1]+g[P-1].length-O;d.push(lp(n,g,b,U,P,O,_,null,a))}f.push(O+w-r)}}return p(e,t,s,i,0),(l||a)(d,f,o)}class sr{constructor(e,t,s,i,r=!1,o=!1){this.from=e,this.to=t,this.tree=s,this.offset=i,this.open=(r?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],s=!1){let i=[new sr(0,e.length,e,0,!1,s)];for(let r of t)r.to>e.length&&i.push(r);return i}static applyChanges(e,t,s=128){if(!t.length)return e;let i=[],r=1,o=e.length?e[0]:null;for(let l=0,a=0,u=0;;l++){let c=l<t.length?t[l]:null,d=c?c.fromA:1e9;if(d-a>=s)for(;o&&o.from<d;){let f=o;if(a>=f.from||d<=f.to||u){let p=Math.max(f.from,a)-u,g=Math.min(f.to,d)-u;f=p>=g?null:new sr(p,g,f.tree,f.offset+u,l>0,!!c)}if(f&&i.push(f),o.to>d)break;o=r<e.length?e[r++]:null}if(!c)break;a=c.toA,u=c.toA-c.toB}return i}}class dk{startParse(e,t,s){return typeof e=="string"&&(e=new TO(e)),s=s?s.length?s.map(i=>new yd(i.from,i.to)):[new yd(0,0)]:[new yd(0,e.length)],this.createParse(e,t||[],s)}parse(e,t,s){let i=this.startParse(e,t,s);for(;;){let r=i.advance();if(r)return r}}}class TO{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new st({perNode:!0});let DO=0;class Xn{constructor(e,t,s,i){this.name=e,this.set=t,this.base=s,this.modified=i,this.id=DO++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let s=typeof e=="string"?e:"?";if(e instanceof Xn&&(t=e),t?.base)throw new Error("Can not derive from a modified tag");let i=new Xn(s,[],null,[]);if(i.set.push(i),t)for(let r of t.set)i.set.push(r);return i}static defineModifier(e){let t=new Mu(e);return s=>s.modified.indexOf(t)>-1?s:Mu.get(s.base||s,s.modified.concat(t).sort((i,r)=>i.id-r.id))}}let PO=0;class Mu{constructor(e){this.name=e,this.instances=[],this.id=PO++}static get(e,t){if(!t.length)return e;let s=t[0].instances.find(l=>l.base==e&&RO(t,l.modified));if(s)return s;let i=[],r=new Xn(e.name,i,e,t);for(let l of t)l.instances.push(r);let o=OO(t);for(let l of e.set)if(!l.modified.length)for(let a of o)i.push(Mu.get(l,a));return r}}function RO(n,e){return n.length==e.length&&n.every((t,s)=>t==e[s])}function OO(n){let e=[[]];for(let t=0;t<n.length;t++)for(let s=0,i=e.length;s<i;s++)e.push(e[s].concat(n[t]));return e.sort((t,s)=>s.length-t.length)}function LO(n){let e=Object.create(null);for(let t in n){let s=n[t];Array.isArray(s)||(s=[s]);for(let i of t.split(" "))if(i){let r=[],o=2,l=i;for(let d=0;;){if(l=="..."&&d>0&&d+3==i.length){o=1;break}let f=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!f)throw new RangeError("Invalid path: "+i);if(r.push(f[0]=="*"?"":f[0][0]=='"'?JSON.parse(f[0]):f[0]),d+=f[0].length,d==i.length)break;let p=i[d++];if(d==i.length&&p=="!"){o=0;break}if(p!="/")throw new RangeError("Invalid path: "+i);l=i.slice(d)}let a=r.length-1,u=r[a];if(!u)throw new RangeError("Invalid path: "+i);let c=new Tl(s,o,a>0?r.slice(0,a):null);e[u]=c.sort(e[u])}}return fk.add(e)}const fk=new st({combine(n,e){let t,s,i;for(;n||e;){if(!n||e&&n.depth>=e.depth?(i=e,e=e.next):(i=n,n=n.next),t&&t.mode==i.mode&&!i.context&&!t.context)continue;let r=new Tl(i.tags,i.mode,i.context);t?t.next=r:s=r,t=r}return s}});class Tl{constructor(e,t,s,i){this.tags=e,this.mode=t,this.context=s,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Tl.empty=new Tl([],2,null);function hk(n,e){let t=Object.create(null);for(let r of n)if(!Array.isArray(r.tag))t[r.tag.id]=r.class;else for(let o of r.tag)t[o.id]=r.class;let{scope:s,all:i=null}=e||{};return{style:r=>{let o=i;for(let l of r)for(let a of l.set){let u=t[a.id];if(u){o=o?o+" "+u:u;break}}return o},scope:s}}function MO(n,e){let t=null;for(let s of n){let i=s.style(e);i&&(t=t?t+" "+i:i)}return t}function IO(n,e,t,s=0,i=n.length){let r=new jO(s,Array.isArray(e)?e:[e],t);r.highlightRange(n.cursor(),s,i,"",r.highlighters),r.flush(i)}class jO{constructor(e,t,s){this.at=e,this.highlighters=t,this.span=s,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,s,i,r){let{type:o,from:l,to:a}=e;if(l>=s||a<=t)return;o.isTop&&(r=this.highlighters.filter(p=>!p.scope||p.scope(o)));let u=i,c=VO(e)||Tl.empty,d=MO(r,c.tags);if(d&&(u&&(u+=" "),u+=d,c.mode==1&&(i+=(i?" ":"")+d)),this.startSpan(Math.max(t,l),u),c.opaque)return;let f=e.tree&&e.tree.prop(st.mounted);if(f&&f.overlay){let p=e.node.enter(f.overlay[0].from+l,1),g=this.highlighters.filter(x=>!x.scope||x.scope(f.tree.type)),b=e.firstChild();for(let x=0,m=l;;x++){let w=x<f.overlay.length?f.overlay[x]:null,P=w?w.from+l:a,U=Math.max(t,m),O=Math.min(s,P);if(U<O&&b)for(;e.from<O&&(this.highlightRange(e,U,O,i,r),this.startSpan(Math.min(O,e.to),u),!(e.to>=P||!e.nextSibling())););if(!w||P>s)break;m=w.to+l,m>t&&(this.highlightRange(p.cursor(),Math.max(t,w.from+l),Math.min(s,m),"",g),this.startSpan(Math.min(s,m),u))}b&&e.parent()}else if(e.firstChild()){f&&(i="");do if(!(e.to<=t)){if(e.from>=s)break;this.highlightRange(e,t,s,i,r),this.startSpan(Math.min(s,e.to),u)}while(e.nextSibling());e.parent()}}}function VO(n){let e=n.type.prop(fk);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}const Ae=Xn.define,La=Ae(),pi=Ae(),j0=Ae(pi),V0=Ae(pi),mi=Ae(),Ma=Ae(mi),bd=Ae(mi),Ts=Ae(),zi=Ae(Ts),Ss=Ae(),Cs=Ae(),Yf=Ae(),Lo=Ae(Yf),Ia=Ae(),Te={comment:La,lineComment:Ae(La),blockComment:Ae(La),docComment:Ae(La),name:pi,variableName:Ae(pi),typeName:j0,tagName:Ae(j0),propertyName:V0,attributeName:Ae(V0),className:Ae(pi),labelName:Ae(pi),namespace:Ae(pi),macroName:Ae(pi),literal:mi,string:Ma,docString:Ae(Ma),character:Ae(Ma),attributeValue:Ae(Ma),number:bd,integer:Ae(bd),float:Ae(bd),bool:Ae(mi),regexp:Ae(mi),escape:Ae(mi),color:Ae(mi),url:Ae(mi),keyword:Ss,self:Ae(Ss),null:Ae(Ss),atom:Ae(Ss),unit:Ae(Ss),modifier:Ae(Ss),operatorKeyword:Ae(Ss),controlKeyword:Ae(Ss),definitionKeyword:Ae(Ss),moduleKeyword:Ae(Ss),operator:Cs,derefOperator:Ae(Cs),arithmeticOperator:Ae(Cs),logicOperator:Ae(Cs),bitwiseOperator:Ae(Cs),compareOperator:Ae(Cs),updateOperator:Ae(Cs),definitionOperator:Ae(Cs),typeOperator:Ae(Cs),controlOperator:Ae(Cs),punctuation:Yf,separator:Ae(Yf),bracket:Lo,angleBracket:Ae(Lo),squareBracket:Ae(Lo),paren:Ae(Lo),brace:Ae(Lo),content:Ts,heading:zi,heading1:Ae(zi),heading2:Ae(zi),heading3:Ae(zi),heading4:Ae(zi),heading5:Ae(zi),heading6:Ae(zi),contentSeparator:Ae(Ts),list:Ae(Ts),quote:Ae(Ts),emphasis:Ae(Ts),strong:Ae(Ts),link:Ae(Ts),monospace:Ae(Ts),strikethrough:Ae(Ts),inserted:Ae(),deleted:Ae(),changed:Ae(),invalid:Ae(),meta:Ia,documentMeta:Ae(Ia),annotation:Ae(Ia),processingInstruction:Ae(Ia),definition:Xn.defineModifier("definition"),constant:Xn.defineModifier("constant"),function:Xn.defineModifier("function"),standard:Xn.defineModifier("standard"),local:Xn.defineModifier("local"),special:Xn.defineModifier("special")};for(let n in Te){let e=Te[n];e instanceof Xn&&(e.name=n)}hk([{tag:Te.link,class:"tok-link"},{tag:Te.heading,class:"tok-heading"},{tag:Te.emphasis,class:"tok-emphasis"},{tag:Te.strong,class:"tok-strong"},{tag:Te.keyword,class:"tok-keyword"},{tag:Te.atom,class:"tok-atom"},{tag:Te.bool,class:"tok-bool"},{tag:Te.url,class:"tok-url"},{tag:Te.labelName,class:"tok-labelName"},{tag:Te.inserted,class:"tok-inserted"},{tag:Te.deleted,class:"tok-deleted"},{tag:Te.literal,class:"tok-literal"},{tag:Te.string,class:"tok-string"},{tag:Te.number,class:"tok-number"},{tag:[Te.regexp,Te.escape,Te.special(Te.string)],class:"tok-string2"},{tag:Te.variableName,class:"tok-variableName"},{tag:Te.local(Te.variableName),class:"tok-variableName tok-local"},{tag:Te.definition(Te.variableName),class:"tok-variableName tok-definition"},{tag:Te.special(Te.variableName),class:"tok-variableName2"},{tag:Te.definition(Te.propertyName),class:"tok-propertyName tok-definition"},{tag:Te.typeName,class:"tok-typeName"},{tag:Te.namespace,class:"tok-namespace"},{tag:Te.className,class:"tok-className"},{tag:Te.macroName,class:"tok-macroName"},{tag:Te.propertyName,class:"tok-propertyName"},{tag:Te.operator,class:"tok-operator"},{tag:Te.comment,class:"tok-comment"},{tag:Te.meta,class:"tok-meta"},{tag:Te.invalid,class:"tok-invalid"},{tag:Te.punctuation,class:"tok-punctuation"}]);var kd;const Rr=new st;function $O(n){return Le.define({combine:n?e=>e.concat(n):void 0})}const NO=new st;class ds{constructor(e,t,s=[],i=""){this.data=e,this.name=i,ot.prototype.hasOwnProperty("tree")||Object.defineProperty(ot.prototype,"tree",{get(){return xn(this)}}),this.parser=t,this.extension=[Oi.of(this),ot.languageData.of((r,o,l)=>{let a=$0(r,o,l),u=a.type.prop(Rr);if(!u)return[];let c=r.facet(u),d=a.type.prop(NO);if(d){let f=a.resolve(o-a.from,l);for(let p of d)if(p.test(f,r)){let g=r.facet(p.facet);return p.type=="replace"?g:g.concat(c)}}return c})].concat(s)}isActiveAt(e,t,s=-1){return $0(e,t,s).type.prop(Rr)==this.data}findRegions(e){let t=e.facet(Oi);if(t?.data==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let s=[],i=(r,o)=>{if(r.prop(Rr)==this.data){s.push({from:o,to:o+r.length});return}let l=r.prop(st.mounted);if(l){if(l.tree.prop(Rr)==this.data){if(l.overlay)for(let a of l.overlay)s.push({from:a.from+o,to:a.to+o});else s.push({from:o,to:o+r.length});return}else if(l.overlay){let a=s.length;if(i(l.tree,l.overlay[0].from+o),s.length>a)return}}for(let a=0;a<r.children.length;a++){let u=r.children[a];u instanceof Ot&&i(u,r.positions[a]+o)}};return i(xn(e),0),s}get allowsNesting(){return!0}}ds.setState=Ze.define();function $0(n,e,t){let s=n.facet(Oi),i=xn(n).topNode;if(!s||s.allowsNesting)for(let r=i;r;r=r.enter(e,t,sn.ExcludeBuffers))r.type.isTop&&(i=r);return i}function xn(n){let e=n.field(ds.state,!1);return e?e.tree:Ot.empty}class BO{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let s=this.cursorPos-this.string.length;return e<s||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-s,t-s)}}let Mo=null;class so{constructor(e,t,s=[],i,r,o,l,a){this.parser=e,this.state=t,this.fragments=s,this.tree=i,this.treeLen=r,this.viewport=o,this.skipped=l,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,s){return new so(e,t,[],Ot.empty,0,s,[],null)}startParse(){return this.parser.startParse(new BO(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=Ot.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var s;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(sr.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(s=this.parse.stoppedAt)!==null&&s!==void 0?s:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(sr.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=Mo;Mo=this;try{return e()}finally{Mo=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=N0(e,t.from,t.to);return e}changes(e,t){let{fragments:s,tree:i,treeLen:r,viewport:o,skipped:l}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((u,c,d,f)=>a.push({fromA:u,toA:c,fromB:d,toB:f})),s=sr.applyChanges(s,a),i=Ot.empty,r=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){l=[];for(let u of this.skipped){let c=e.mapPos(u.from,1),d=e.mapPos(u.to,-1);c<d&&l.push({from:c,to:d})}}}return new so(this.parser,t,s,i,r,o,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let s=0;s<this.skipped.length;s++){let{from:i,to:r}=this.skipped[s];i<e.to&&r>e.from&&(this.fragments=N0(this.fragments,i,r),this.skipped.splice(s--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends dk{createParse(t,s,i){let r=i[0].from,o=i[i.length-1].to;return{parsedPos:r,advance(){let a=Mo;if(a){for(let u of i)a.tempSkipped.push(u);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=o,new Ot(Bn.none,[],[],o-r)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return Mo}}function N0(n,e,t){return sr.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class io{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),s=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,s)||t.takeTree(),new io(t)}static init(e){let t=Math.min(3e3,e.doc.length),s=so.create(e.facet(Oi).parser,e,{from:0,to:t});return s.work(20,t)||s.takeTree(),new io(s)}}ds.state=ln.define({create:io.init,update(n,e){for(let t of e.effects)if(t.is(ds.setState))return t.value;return e.startState.facet(Oi)!=e.state.facet(Oi)?io.init(e.state):n.apply(e)}});let pk=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(pk=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const xd=typeof navigator<"u"&&(!((kd=navigator.scheduling)===null||kd===void 0)&&kd.isInputPending)?()=>navigator.scheduling.isInputPending():null,FO=zt.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(ds.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(ds.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=pk(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:s,viewport:{to:i}}=this.view,r=s.field(ds.state);if(r.tree==r.context.tree&&r.context.isDone(i+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!xd?Math.max(25,e.timeRemaining()-5):1e9),l=r.context.treeLen<i&&s.doc.length>i+1e3,a=r.context.work(()=>xd&&xd()||Date.now()>o,i+(l?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(r.context.takeTree(),this.view.dispatch({effects:ds.setState.of(new io(r.context))})),this.chunkBudget>0&&!(a&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(r.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>Vn(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Oi=Le.define({combine(n){return n.length?n[0]:null},enables:n=>[ds.state,FO,Oe.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]}),UO=Le.define(),ap=Le.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function fr(n){let e=n.facet(ap);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function Dl(n,e){let t="",s=n.tabSize,i=n.facet(ap)[0];if(i=="	"){for(;e>=s;)t+="	",e-=s;i=" "}for(let r=0;r<e;r++)t+=i;return t}function up(n,e){n instanceof ot&&(n=new bc(n));for(let s of n.state.facet(UO)){let i=s(n,e);if(i!==void 0)return i}let t=xn(n.state);return t.length>=e?zO(n,t,e):null}class bc{constructor(e,t={}){this.state=e,this.options=t,this.unit=fr(e)}lineAt(e,t=1){let s=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:r}=this.options;return i!=null&&i>=s.from&&i<=s.to?r&&i==e?{text:"",from:e}:(t<0?i<e:i<=e)?{text:s.text.slice(i-s.from),from:i}:{text:s.text.slice(0,i-s.from),from:s.from}:s}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:s,from:i}=this.lineAt(e,t);return s.slice(e-i,Math.min(s.length,e+100-i))}column(e,t=1){let{text:s,from:i}=this.lineAt(e,t),r=this.countColumn(s,e-i),o=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return o>-1&&(r+=o-this.countColumn(s,s.search(/\S|$/))),r}countColumn(e,t=e.length){return mo(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:s,from:i}=this.lineAt(e,t),r=this.options.overrideIndentation;if(r){let o=r(i);if(o>-1)return o}return this.countColumn(s,s.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const mk=new st;function zO(n,e,t){let s=e.resolveStack(t),i=e.resolveInner(t,-1).resolve(t,0).enterUnfinishedNodesBefore(t);if(i!=s.node){let r=[];for(let o=i;o&&!(o.from<s.node.from||o.to>s.node.to||o.from==s.node.from&&o.type==s.node.type);o=o.parent)r.push(o);for(let o=r.length-1;o>=0;o--)s={node:r[o],next:s}}return gk(s,n,t)}function gk(n,e,t){for(let s=n;s;s=s.next){let i=WO(s.node);if(i)return i(cp.create(e,t,s))}return 0}function HO(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function WO(n){let e=n.type.prop(mk);if(e)return e;let t=n.firstChild,s;if(t&&(s=t.type.prop(st.closedBy))){let i=n.lastChild,r=i&&s.indexOf(i.name)>-1;return o=>JO(o,!0,1,void 0,r&&!HO(o)?i.from:void 0)}return n.parent==null?qO:null}function qO(){return 0}class cp extends bc{constructor(e,t,s){super(e.state,e.options),this.base=e,this.pos=t,this.context=s}get node(){return this.context.node}static create(e,t,s){return new cp(e,t,s)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let s=e.resolve(t.from);for(;s.parent&&s.parent.from==s.from;)s=s.parent;if(GO(s,e))break;t=this.state.doc.lineAt(s.from)}return this.lineIndent(t.from)}continue(){return gk(this.context.next,this.base,this.pos)}}function GO(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function KO(n){let e=n.node,t=e.childAfter(e.from),s=e.lastChild;if(!t)return null;let i=n.options.simulateBreak,r=n.state.doc.lineAt(t.from),o=i==null||i<=r.from?r.to:Math.min(r.to,i);for(let l=t.to;;){let a=e.childAfter(l);if(!a||a==s)return null;if(!a.type.isSkipped){if(a.from>=o)return null;let u=/^ */.exec(r.text.slice(t.to-r.from))[0].length;return{from:t.from,to:t.to+u}}l=a.to}}function JO(n,e,t,s,i){let r=n.textAfter,o=r.match(/^\s*/)[0].length,l=s&&r.slice(o,o+s.length)==s||i==n.pos+o,a=KO(n);return a?l?n.column(a.from):n.column(a.to):n.baseIndent+(l?0:n.unit*t)}const QO=200;function YO(){return ot.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let e=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!e.length)return n;let t=n.newDoc,{head:s}=n.newSelection.main,i=t.lineAt(s);if(s>i.from+QO)return n;let r=t.sliceString(i.from,s);if(!e.some(u=>u.test(r)))return n;let{state:o}=n,l=-1,a=[];for(let{head:u}of o.selection.ranges){let c=o.doc.lineAt(u);if(c.from==l)continue;l=c.from;let d=up(o,c.from);if(d==null)continue;let f=/^\s*/.exec(c.text)[0],p=Dl(o,d);f!=p&&a.push({from:c.from,to:c.from+f.length,insert:p})}return a.length?[n,{changes:a,sequential:!0}]:n})}const XO=Le.define(),ZO=new st;function eL(n,e,t){let s=xn(n);if(s.length<t)return null;let i=s.resolveStack(t,1),r=null;for(let o=i;o;o=o.next){let l=o.node;if(l.to<=t||l.from>t)continue;if(r&&l.from<e)break;let a=l.type.prop(ZO);if(a&&(l.to<s.length-50||s.length==n.doc.length||!tL(l))){let u=a(l,n);u&&u.from<=t&&u.from>=e&&u.to>t&&(r=u)}}return r}function tL(n){let e=n.lastChild;return e&&e.to==n.to&&e.type.isError}function Iu(n,e,t){for(let s of n.facet(XO)){let i=s(n,e,t);if(i)return i}return eL(n,e,t)}function vk(n,e){let t=e.mapPos(n.from,1),s=e.mapPos(n.to,-1);return t>=s?void 0:{from:t,to:s}}const kc=Ze.define({map:vk}),Gl=Ze.define({map:vk});function yk(n){let e=[];for(let{head:t}of n.state.selection.ranges)e.some(s=>s.from<=t&&s.to>=t)||e.push(n.lineBlockAt(t));return e}const hr=ln.define({create(){return ze.none},update(n,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((t,s)=>n=B0(n,t,s)),n=n.map(e.changes);for(let t of e.effects)if(t.is(kc)&&!nL(n,t.value.from,t.value.to)){let{preparePlaceholder:s}=e.state.facet(xk),i=s?ze.replace({widget:new uL(s(e.state,t.value))}):F0;n=n.update({add:[i.range(t.value.from,t.value.to)]})}else t.is(Gl)&&(n=n.update({filter:(s,i)=>t.value.from!=s||t.value.to!=i,filterFrom:t.value.from,filterTo:t.value.to}));return e.selection&&(n=B0(n,e.selection.main.head)),n},provide:n=>Oe.decorations.from(n),toJSON(n,e){let t=[];return n.between(0,e.doc.length,(s,i)=>{t.push(s,i)}),t},fromJSON(n){if(!Array.isArray(n)||n.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<n.length;){let s=n[t++],i=n[t++];if(typeof s!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(F0.range(s,i))}return ze.set(e,!0)}});function B0(n,e,t=e){let s=!1;return n.between(e,t,(i,r)=>{i<t&&r>e&&(s=!0)}),s?n.update({filterFrom:e,filterTo:t,filter:(i,r)=>i>=t||r<=e}):n}function ju(n,e,t){var s;let i=null;return(s=n.field(hr,!1))===null||s===void 0||s.between(e,t,(r,o)=>{(!i||i.from>r)&&(i={from:r,to:o})}),i}function nL(n,e,t){let s=!1;return n.between(e,e,(i,r)=>{i==e&&r==t&&(s=!0)}),s}function bk(n,e){return n.field(hr,!1)?e:e.concat(Ze.appendConfig.of(_k()))}const sL=n=>{for(let e of yk(n)){let t=Iu(n.state,e.from,e.to);if(t)return n.dispatch({effects:bk(n.state,[kc.of(t),kk(n,t)])}),!0}return!1},iL=n=>{if(!n.state.field(hr,!1))return!1;let e=[];for(let t of yk(n)){let s=ju(n.state,t.from,t.to);s&&e.push(Gl.of(s),kk(n,s,!1))}return e.length&&n.dispatch({effects:e}),e.length>0};function kk(n,e,t=!0){let s=n.state.doc.lineAt(e.from).number,i=n.state.doc.lineAt(e.to).number;return Oe.announce.of(`${n.state.phrase(t?"Folded lines":"Unfolded lines")} ${s} ${n.state.phrase("to")} ${i}.`)}const rL=n=>{let{state:e}=n,t=[];for(let s=0;s<e.doc.length;){let i=n.lineBlockAt(s),r=Iu(e,i.from,i.to);r&&t.push(kc.of(r)),s=(r?n.lineBlockAt(r.to):i).to+1}return t.length&&n.dispatch({effects:bk(n.state,t)}),!!t.length},oL=n=>{let e=n.state.field(hr,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,n.state.doc.length,(s,i)=>{t.push(Gl.of({from:s,to:i}))}),n.dispatch({effects:t}),!0},lL=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:sL},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:iL},{key:"Ctrl-Alt-[",run:rL},{key:"Ctrl-Alt-]",run:oL}],aL={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},xk=Le.define({combine(n){return Ns(n,aL)}});function _k(n){return[hr,fL]}function wk(n,e){let{state:t}=n,s=t.facet(xk),i=o=>{let l=n.lineBlockAt(n.posAtDOM(o.target)),a=ju(n.state,l.from,l.to);a&&n.dispatch({effects:Gl.of(a)}),o.preventDefault()};if(s.placeholderDOM)return s.placeholderDOM(n,i,e);let r=document.createElement("span");return r.textContent=s.placeholderText,r.setAttribute("aria-label",t.phrase("folded code")),r.title=t.phrase("unfold"),r.className="cm-foldPlaceholder",r.onclick=i,r}const F0=ze.replace({widget:new class extends Li{toDOM(n){return wk(n,null)}}});class uL extends Li{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return wk(e,this.value)}}const cL={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class _d extends si{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function dL(n={}){let e={...cL,...n},t=new _d(e,!0),s=new _d(e,!1),i=zt.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(Oi)!=o.state.facet(Oi)||o.startState.field(hr,!1)!=o.state.field(hr,!1)||xn(o.startState)!=xn(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let l=new ti;for(let a of o.viewportLineBlocks){let u=ju(o.state,a.from,a.to)?s:Iu(o.state,a.from,a.to)?t:null;u&&l.add(a.from,a.from,u)}return l.finish()}}),{domEventHandlers:r}=e;return[i,cO({class:"cm-foldGutter",markers(o){var l;return((l=o.plugin(i))===null||l===void 0?void 0:l.markers)||lt.empty},initialSpacer(){return new _d(e,!1)},domEventHandlers:{...r,click:(o,l,a)=>{if(r.click&&r.click(o,l,a))return!0;let u=ju(o.state,l.from,l.to);if(u)return o.dispatch({effects:Gl.of(u)}),!0;let c=Iu(o.state,l.from,l.to);return c?(o.dispatch({effects:kc.of(c)}),!0):!1}}}),_k()]}const fL=Oe.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Kl{constructor(e,t){this.specs=e;let s;function i(l){let a=Ti.newName();return(s||(s=Object.create(null)))["."+a]=l,a}const r=typeof t.all=="string"?t.all:t.all?i(t.all):void 0,o=t.scope;this.scope=o instanceof ds?l=>l.prop(Rr)==o.data:o?l=>l==o:void 0,this.style=hk(e.map(l=>({tag:l.tag,class:l.class||i(Object.assign({},l,{tag:null}))})),{all:r}).style,this.module=s?new Ti(s):null,this.themeType=t.themeType}static define(e,t){return new Kl(e,t||{})}}const Xf=Le.define(),Sk=Le.define({combine(n){return n.length?[n[0]]:null}});function wd(n){let e=n.facet(Xf);return e.length?e:n.facet(Sk)}function Ck(n,e){let t=[pL],s;return n instanceof Kl&&(n.module&&t.push(Oe.styleModule.of(n.module)),s=n.themeType),e?.fallback?t.push(Sk.of(n)):s?t.push(Xf.computeN([Oe.darkTheme],i=>i.facet(Oe.darkTheme)==(s=="dark")?[n]:[])):t.push(Xf.of(n)),t}class hL{constructor(e){this.markCache=Object.create(null),this.tree=xn(e.state),this.decorations=this.buildDeco(e,wd(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=xn(e.state),s=wd(e.state),i=s!=wd(e.startState),{viewport:r}=e.view,o=e.changes.mapPos(this.decoratedTo,1);t.length<r.to&&!i&&t.type==this.tree.type&&o>=r.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(t!=this.tree||e.viewportChanged||i)&&(this.tree=t,this.decorations=this.buildDeco(e.view,s),this.decoratedTo=r.to)}buildDeco(e,t){if(!t||!this.tree.length)return ze.none;let s=new ti;for(let{from:i,to:r}of e.visibleRanges)IO(this.tree,t,(o,l,a)=>{s.add(o,l,this.markCache[a]||(this.markCache[a]=ze.mark({class:a})))},i,r);return s.finish()}}const pL=gr.high(zt.fromClass(hL,{decorations:n=>n.decorations})),mL=Kl.define([{tag:Te.meta,color:"#404740"},{tag:Te.link,textDecoration:"underline"},{tag:Te.heading,textDecoration:"underline",fontWeight:"bold"},{tag:Te.emphasis,fontStyle:"italic"},{tag:Te.strong,fontWeight:"bold"},{tag:Te.strikethrough,textDecoration:"line-through"},{tag:Te.keyword,color:"#708"},{tag:[Te.atom,Te.bool,Te.url,Te.contentSeparator,Te.labelName],color:"#219"},{tag:[Te.literal,Te.inserted],color:"#164"},{tag:[Te.string,Te.deleted],color:"#a11"},{tag:[Te.regexp,Te.escape,Te.special(Te.string)],color:"#e40"},{tag:Te.definition(Te.variableName),color:"#00f"},{tag:Te.local(Te.variableName),color:"#30a"},{tag:[Te.typeName,Te.namespace],color:"#085"},{tag:Te.className,color:"#167"},{tag:[Te.special(Te.variableName),Te.macroName],color:"#256"},{tag:Te.definition(Te.propertyName),color:"#00c"},{tag:Te.comment,color:"#940"},{tag:Te.invalid,color:"#f00"}]),gL=Oe.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Ak=1e4,Ek="()[]{}",Tk=Le.define({combine(n){return Ns(n,{afterCursor:!0,brackets:Ek,maxScanDistance:Ak,renderMatch:bL})}}),vL=ze.mark({class:"cm-matchingBracket"}),yL=ze.mark({class:"cm-nonmatchingBracket"});function bL(n){let e=[],t=n.matched?vL:yL;return e.push(t.range(n.start.from,n.start.to)),n.end&&e.push(t.range(n.end.from,n.end.to)),e}const kL=ln.define({create(){return ze.none},update(n,e){if(!e.docChanged&&!e.selection)return n;let t=[],s=e.state.facet(Tk);for(let i of e.state.selection.ranges){if(!i.empty)continue;let r=Ms(e.state,i.head,-1,s)||i.head>0&&Ms(e.state,i.head-1,1,s)||s.afterCursor&&(Ms(e.state,i.head,1,s)||i.head<e.state.doc.length&&Ms(e.state,i.head+1,-1,s));r&&(t=t.concat(s.renderMatch(r,e.state)))}return ze.set(t,!0)},provide:n=>Oe.decorations.from(n)}),xL=[kL,gL];function _L(n={}){return[Tk.of(n),xL]}const wL=new st;function Zf(n,e,t){let s=n.prop(e<0?st.openedBy:st.closedBy);if(s)return s;if(n.name.length==1){let i=t.indexOf(n.name);if(i>-1&&i%2==(e<0?1:0))return[t[i+e]]}return null}function eh(n){let e=n.type.prop(wL);return e?e(n.node):n}function Ms(n,e,t,s={}){let i=s.maxScanDistance||Ak,r=s.brackets||Ek,o=xn(n),l=o.resolveInner(e,t);for(let a=l;a;a=a.parent){let u=Zf(a.type,t,r);if(u&&a.from<a.to){let c=eh(a);if(c&&(t>0?e>=c.from&&e<c.to:e>c.from&&e<=c.to))return SL(n,e,t,a,c,u,r)}}return CL(n,e,t,o,l.type,i,r)}function SL(n,e,t,s,i,r,o){let l=s.parent,a={from:i.from,to:i.to},u=0,c=l?.cursor();if(c&&(t<0?c.childBefore(s.from):c.childAfter(s.to)))do if(t<0?c.to<=s.from:c.from>=s.to){if(u==0&&r.indexOf(c.type.name)>-1&&c.from<c.to){let d=eh(c);return{start:a,end:d?{from:d.from,to:d.to}:void 0,matched:!0}}else if(Zf(c.type,t,o))u++;else if(Zf(c.type,-t,o)){if(u==0){let d=eh(c);return{start:a,end:d&&d.from<d.to?{from:d.from,to:d.to}:void 0,matched:!1}}u--}}while(t<0?c.prevSibling():c.nextSibling());return{start:a,matched:!1}}function CL(n,e,t,s,i,r,o){let l=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),a=o.indexOf(l);if(a<0||a%2==0!=t>0)return null;let u={from:t<0?e-1:e,to:t>0?e+1:e},c=n.doc.iterRange(e,t>0?n.doc.length:0),d=0;for(let f=0;!c.next().done&&f<=r;){let p=c.value;t<0&&(f+=p.length);let g=e+f*t;for(let b=t>0?0:p.length-1,x=t>0?p.length:-1;b!=x;b+=t){let m=o.indexOf(p[b]);if(!(m<0||s.resolveInner(g+b,1).type!=i))if(m%2==0==t>0)d++;else{if(d==1)return{start:u,end:{from:g+b,to:g+b+1},matched:m>>1==a>>1};d--}}t>0&&(f+=p.length)}return c.done?{start:u,matched:!1}:null}function U0(n,e,t,s=0,i=0){e==null&&(e=n.search(/[^\s\u00a0]/),e==-1&&(e=n.length));let r=i;for(let o=s;o<e;o++)n.charCodeAt(o)==9?r+=t-r%t:r++;return r}class Dk{constructor(e,t,s,i){this.string=e,this.tabSize=t,this.indentUnit=s,this.overrideIndent=i,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let t=this.string.charAt(this.pos),s;if(typeof e=="string"?s=t==e:s=t&&(e instanceof RegExp?e.test(t):e(t)),s)return++this.pos,t}eatWhile(e){let t=this.pos;for(;this.eat(e););return this.pos>t}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=U0(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:U0(this.string,null,this.tabSize)}match(e,t,s){if(typeof e=="string"){let i=o=>s?o.toLowerCase():o,r=this.string.substr(this.pos,e.length);return i(r)==i(e)?(t!==!1&&(this.pos+=e.length),!0):null}else{let i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&t!==!1&&(this.pos+=i[0].length),i)}}current(){return this.string.slice(this.start,this.pos)}}function AL(n){return{name:n.name||"",token:n.token,blankLine:n.blankLine||(()=>{}),startState:n.startState||(()=>!0),copyState:n.copyState||EL,indent:n.indent||(()=>null),languageData:n.languageData||{},tokenTable:n.tokenTable||hp,mergeTokens:n.mergeTokens!==!1}}function EL(n){if(typeof n!="object")return n;let e={};for(let t in n){let s=n[t];e[t]=s instanceof Array?s.slice():s}return e}const z0=new WeakMap;class dp extends ds{constructor(e){let t=$O(e.languageData),s=AL(e),i,r=new class extends dk{createParse(o,l,a){return new DL(i,o,l,a)}};super(t,r,[],e.name),this.topNode=OL(t,this),i=this,this.streamParser=s,this.stateAfter=new st({perNode:!0}),this.tokenTable=e.tokenTable?new Lk(s.tokenTable):RL}static define(e){return new dp(e)}getIndent(e){let t,{overrideIndentation:s}=e.options;s&&(t=z0.get(e.state),t!=null&&t<e.pos-1e4&&(t=void 0));let i=fp(this,e.node.tree,e.node.from,e.node.from,t??e.pos),r,o;if(i?(o=i.state,r=i.pos+1):(o=this.streamParser.startState(e.unit),r=e.node.from),e.pos-r>1e4)return null;for(;r<e.pos;){let a=e.state.doc.lineAt(r),u=Math.min(e.pos,a.to);if(a.length){let c=s?s(a.from):-1,d=new Dk(a.text,e.state.tabSize,e.unit,c<0?void 0:c);for(;d.pos<u-a.from;)Rk(this.streamParser.token,d,o)}else this.streamParser.blankLine(o,e.unit);if(u==e.pos)break;r=a.to+1}let l=e.lineAt(e.pos);return s&&t==null&&z0.set(e.state,l.from),this.streamParser.indent(o,/^\s*(.*)/.exec(l.text)[1],e)}get allowsNesting(){return!1}}function fp(n,e,t,s,i){let r=t>=s&&t+e.length<=i&&e.prop(n.stateAfter);if(r)return{state:n.streamParser.copyState(r),pos:t+e.length};for(let o=e.children.length-1;o>=0;o--){let l=e.children[o],a=t+e.positions[o],u=l instanceof Ot&&a<i&&fp(n,l,a,s,i);if(u)return u}return null}function Pk(n,e,t,s,i){if(i&&t<=0&&s>=e.length)return e;!i&&t==0&&e.type==n.topNode&&(i=!0);for(let r=e.children.length-1;r>=0;r--){let o=e.positions[r],l=e.children[r],a;if(o<s&&l instanceof Ot){if(!(a=Pk(n,l,t-o,s-o,i)))break;return i?new Ot(e.type,e.children.slice(0,r).concat(a),e.positions.slice(0,r+1),o+a.length):a}}return null}function TL(n,e,t,s,i){for(let r of e){let o=r.from+(r.openStart?25:0),l=r.to-(r.openEnd?25:0),a=o<=t&&l>t&&fp(n,r.tree,0-r.offset,t,l),u;if(a&&a.pos<=s&&(u=Pk(n,r.tree,t+r.offset,a.pos+r.offset,!1)))return{state:a.state,tree:u}}return{state:n.streamParser.startState(i?fr(i):4),tree:Ot.empty}}class DL{constructor(e,t,s,i){this.lang=e,this.input=t,this.fragments=s,this.ranges=i,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=i[i.length-1].to;let r=so.get(),o=i[0].from,{state:l,tree:a}=TL(e,s,o,this.to,r?.state);this.state=l,this.parsedPos=this.chunkStart=o+a.length;for(let u=0;u<a.children.length;u++)this.chunks.push(a.children[u]),this.chunkPos.push(a.positions[u]);r&&this.parsedPos<r.viewport.from-1e5&&i.some(u=>u.from<=r.viewport.from&&u.to>=r.viewport.from)&&(this.state=this.lang.streamParser.startState(fr(r.state)),r.skipUntilInView(this.parsedPos,r.viewport.from),this.parsedPos=r.viewport.from),this.moveRangeIndex()}advance(){let e=so.get(),t=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),s=Math.min(t,this.chunkStart+512);for(e&&(s=Math.min(s,e.viewport.to));this.parsedPos<s;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=t?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,t),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let t=this.input.chunk(e);if(this.input.lineChunks)t==`
`&&(t="");else{let s=t.indexOf(`
`);s>-1&&(t=t.slice(0,s))}return e+t.length<=this.to?t:t.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,t=this.lineAfter(e),s=e+t.length;for(let i=this.rangeIndex;;){let r=this.ranges[i].to;if(r>=s||(t=t.slice(0,r-(s-t.length)),i++,i==this.ranges.length))break;let o=this.ranges[i].from,l=this.lineAfter(o);t+=l,s=o+l.length}return{line:t,end:s}}skipGapsTo(e,t,s){for(;;){let i=this.ranges[this.rangeIndex].to,r=e+t;if(s>0?i>r:i>=r)break;let o=this.ranges[++this.rangeIndex].from;t+=o-i}return t}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,t,s,i){let r=4;if(this.ranges.length>1){i=this.skipGapsTo(t,i,1),t+=i;let l=this.chunk.length;i=this.skipGapsTo(s,i,-1),s+=i,r+=this.chunk.length-l}let o=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&r==4&&o>=0&&this.chunk[o]==e&&this.chunk[o+2]==t?this.chunk[o+2]=s:this.chunk.push(e,t,s,r),i}parseLine(e){let{line:t,end:s}=this.nextLine(),i=0,{streamParser:r}=this.lang,o=new Dk(t,e?e.state.tabSize:4,e?fr(e.state):2);if(o.eol())r.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let l=Rk(r.token,o,this.state);if(l&&(i=this.emitToken(this.lang.tokenTable.resolve(l),this.parsedPos+o.start,this.parsedPos+o.pos,i)),o.start>1e4)break}this.parsedPos=s,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=Ot.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:PL,topID:0,maxBufferLength:512,reused:this.chunkReused});e=new Ot(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new Ot(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function Rk(n,e,t){e.start=e.pos;for(let s=0;s<10;s++){let i=n(e,t);if(e.pos>e.start)return i}throw new Error("Stream parser failed to advance stream.")}const hp=Object.create(null),Pl=[Bn.none],PL=new ip(Pl),H0=[],W0=Object.create(null),Ok=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])Ok[n]=Mk(hp,e);class Lk{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),Ok)}resolve(e){return e?this.table[e]||(this.table[e]=Mk(this.extra,e)):0}}const RL=new Lk(hp);function Sd(n,e){H0.indexOf(n)>-1||(H0.push(n),console.warn(e))}function Mk(n,e){let t=[];for(let l of e.split(" ")){let a=[];for(let u of l.split(".")){let c=n[u]||Te[u];c?typeof c=="function"?a.length?a=a.map(c):Sd(u,`Modifier ${u} used at start of tag`):a.length?Sd(u,`Tag ${u} used as modifier`):a=Array.isArray(c)?c:[c]:Sd(u,`Unknown highlighting tag ${u}`)}for(let u of a)t.push(u)}if(!t.length)return 0;let s=e.replace(/ /g,"_"),i=s+" "+t.map(l=>l.id),r=W0[i];if(r)return r.id;let o=W0[i]=Bn.define({id:Pl.length,name:s,props:[LO({[s]:t})]});return Pl.push(o),o.id}function OL(n,e){let t=Bn.define({id:Pl.length,name:"Document",props:[Rr.add(()=>n),mk.add(()=>s=>e.getIndent(s))],top:!0});return Pl.push(t),t}Tt.RTL,Tt.LTR;const LL=n=>{let{state:e}=n,t=e.doc.lineAt(e.selection.main.from),s=mp(n.state,t.from);return s.line?ML(n):s.block?jL(n):!1};function pp(n,e){return({state:t,dispatch:s})=>{if(t.readOnly)return!1;let i=n(e,t);return i?(s(t.update(i)),!0):!1}}const ML=pp(NL,0),IL=pp(Ik,0),jL=pp((n,e)=>Ik(n,e,$L(e)),0);function mp(n,e){let t=n.languageDataAt("commentTokens",e,1);return t.length?t[0]:{}}const Io=50;function VL(n,{open:e,close:t},s,i){let r=n.sliceDoc(s-Io,s),o=n.sliceDoc(i,i+Io),l=/\s*$/.exec(r)[0].length,a=/^\s*/.exec(o)[0].length,u=r.length-l;if(r.slice(u-e.length,u)==e&&o.slice(a,a+t.length)==t)return{open:{pos:s-l,margin:l&&1},close:{pos:i+a,margin:a&&1}};let c,d;i-s<=2*Io?c=d=n.sliceDoc(s,i):(c=n.sliceDoc(s,s+Io),d=n.sliceDoc(i-Io,i));let f=/^\s*/.exec(c)[0].length,p=/\s*$/.exec(d)[0].length,g=d.length-p-t.length;return c.slice(f,f+e.length)==e&&d.slice(g,g+t.length)==t?{open:{pos:s+f+e.length,margin:/\s/.test(c.charAt(f+e.length))?1:0},close:{pos:i-p-t.length,margin:/\s/.test(d.charAt(g-1))?1:0}}:null}function $L(n){let e=[];for(let t of n.selection.ranges){let s=n.doc.lineAt(t.from),i=t.to<=s.to?s:n.doc.lineAt(t.to);i.from>s.from&&i.from==t.to&&(i=t.to==s.to+1?s:n.doc.lineAt(t.to-1));let r=e.length-1;r>=0&&e[r].to>s.from?e[r].to=i.to:e.push({from:s.from+/^\s*/.exec(s.text)[0].length,to:i.to})}return e}function Ik(n,e,t=e.selection.ranges){let s=t.map(r=>mp(e,r.from).block);if(!s.every(r=>r))return null;let i=t.map((r,o)=>VL(e,s[o],r.from,r.to));if(n!=2&&!i.every(r=>r))return{changes:e.changes(t.map((r,o)=>i[o]?[]:[{from:r.from,insert:s[o].open+" "},{from:r.to,insert:" "+s[o].close}]))};if(n!=1&&i.some(r=>r)){let r=[];for(let o=0,l;o<i.length;o++)if(l=i[o]){let a=s[o],{open:u,close:c}=l;r.push({from:u.pos-a.open.length,to:u.pos+u.margin},{from:c.pos-c.margin,to:c.pos+a.close.length})}return{changes:r}}return null}function NL(n,e,t=e.selection.ranges){let s=[],i=-1;for(let{from:r,to:o}of t){let l=s.length,a=1e9,u=mp(e,r).line;if(u){for(let c=r;c<=o;){let d=e.doc.lineAt(c);if(d.from>i&&(r==o||o>d.from)){i=d.from;let f=/^\s*/.exec(d.text)[0].length,p=f==d.length,g=d.text.slice(f,f+u.length)==u?f:-1;f<d.text.length&&f<a&&(a=f),s.push({line:d,comment:g,token:u,indent:f,empty:p,single:!1})}c=d.to+1}if(a<1e9)for(let c=l;c<s.length;c++)s[c].indent<s[c].line.text.length&&(s[c].indent=a);s.length==l+1&&(s[l].single=!0)}}if(n!=2&&s.some(r=>r.comment<0&&(!r.empty||r.single))){let r=[];for(let{line:l,token:a,indent:u,empty:c,single:d}of s)(d||!c)&&r.push({from:l.from+u,insert:a+" "});let o=e.changes(r);return{changes:o,selection:e.selection.map(o,1)}}else if(n!=1&&s.some(r=>r.comment>=0)){let r=[];for(let{line:o,comment:l,token:a}of s)if(l>=0){let u=o.from+l,c=u+a.length;o.text[c-o.from]==" "&&c++,r.push({from:u,to:c})}return{changes:r}}return null}const th=ri.define(),BL=ri.define(),FL=Le.define(),jk=Le.define({combine(n){return Ns(n,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(s,i)=>e(s,i)||t(s,i)})}}),Vk=ln.define({create(){return Is.empty},update(n,e){let t=e.state.facet(jk),s=e.annotation(th);if(s){let a=$n.fromTransaction(e,s.selection),u=s.side,c=u==0?n.undone:n.done;return a?c=Vu(c,c.length,t.minDepth,a):c=Bk(c,e.startState.selection),new Is(u==0?s.rest:c,u==0?c:s.rest)}let i=e.annotation(BL);if((i=="full"||i=="before")&&(n=n.isolate()),e.annotation(Kt.addToHistory)===!1)return e.changes.empty?n:n.addMapping(e.changes.desc);let r=$n.fromTransaction(e),o=e.annotation(Kt.time),l=e.annotation(Kt.userEvent);return r?n=n.addChanges(r,o,l,t,e):e.selection&&(n=n.addSelection(e.startState.selection,o,l,t.newGroupDelay)),(i=="full"||i=="after")&&(n=n.isolate()),n},toJSON(n){return{done:n.done.map(e=>e.toJSON()),undone:n.undone.map(e=>e.toJSON())}},fromJSON(n){return new Is(n.done.map($n.fromJSON),n.undone.map($n.fromJSON))}});function UL(n={}){return[Vk,jk.of(n),Oe.domEventHandlers({beforeinput(e,t){let s=e.inputType=="historyUndo"?$k:e.inputType=="historyRedo"?nh:null;return s?(e.preventDefault(),s(t)):!1}})]}function xc(n,e){return function({state:t,dispatch:s}){if(!e&&t.readOnly)return!1;let i=t.field(Vk,!1);if(!i)return!1;let r=i.pop(n,t,e);return r?(s(r),!0):!1}}const $k=xc(0,!1),nh=xc(1,!1),zL=xc(0,!0),HL=xc(1,!0);class $n{constructor(e,t,s,i,r){this.changes=e,this.effects=t,this.mapped=s,this.startSelection=i,this.selectionsAfter=r}setSelAfter(e){return new $n(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,s;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(s=this.startSelection)===null||s===void 0?void 0:s.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new $n(e.changes&&Gt.fromJSON(e.changes),[],e.mapped&&Vs.fromJSON(e.mapped),e.startSelection&&he.fromJSON(e.startSelection),e.selectionsAfter.map(he.fromJSON))}static fromTransaction(e,t){let s=es;for(let i of e.startState.facet(FL)){let r=i(e);r.length&&(s=s.concat(r))}return!s.length&&e.changes.empty?null:new $n(e.changes.invert(e.startState.doc),s,void 0,t||e.startState.selection,es)}static selection(e){return new $n(void 0,es,void 0,void 0,e)}}function Vu(n,e,t,s){let i=e+1>t+20?e-t-1:0,r=n.slice(i,e);return r.push(s),r}function WL(n,e){let t=[],s=!1;return n.iterChangedRanges((i,r)=>t.push(i,r)),e.iterChangedRanges((i,r,o,l)=>{for(let a=0;a<t.length;){let u=t[a++],c=t[a++];l>=u&&o<=c&&(s=!0)}}),s}function qL(n,e){return n.ranges.length==e.ranges.length&&n.ranges.filter((t,s)=>t.empty!=e.ranges[s].empty).length===0}function Nk(n,e){return n.length?e.length?n.concat(e):n:e}const es=[],GL=200;function Bk(n,e){if(n.length){let t=n[n.length-1],s=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-GL));return s.length&&s[s.length-1].eq(e)?n:(s.push(e),Vu(n,n.length-1,1e9,t.setSelAfter(s)))}else return[$n.selection([e])]}function KL(n){let e=n[n.length-1],t=n.slice();return t[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function Cd(n,e){if(!n.length)return n;let t=n.length,s=es;for(;t;){let i=JL(n[t-1],e,s);if(i.changes&&!i.changes.empty||i.effects.length){let r=n.slice(0,t);return r[t-1]=i,r}else e=i.mapped,t--,s=i.selectionsAfter}return s.length?[$n.selection(s)]:es}function JL(n,e,t){let s=Nk(n.selectionsAfter.length?n.selectionsAfter.map(l=>l.map(e)):es,t);if(!n.changes)return $n.selection(s);let i=n.changes.map(e),r=e.mapDesc(n.changes,!0),o=n.mapped?n.mapped.composeDesc(r):r;return new $n(i,Ze.mapEffects(n.effects,e),o,n.startSelection.map(r),s)}const QL=/^(input\.type|delete)($|\.)/;class Is{constructor(e,t,s=0,i=void 0){this.done=e,this.undone=t,this.prevTime=s,this.prevUserEvent=i}isolate(){return this.prevTime?new Is(this.done,this.undone):this}addChanges(e,t,s,i,r){let o=this.done,l=o[o.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!s||QL.test(s))&&(!l.selectionsAfter.length&&t-this.prevTime<i.newGroupDelay&&i.joinToEvent(r,WL(l.changes,e.changes))||s=="input.type.compose")?o=Vu(o,o.length-1,i.minDepth,new $n(e.changes.compose(l.changes),Nk(Ze.mapEffects(e.effects,l.changes),l.effects),l.mapped,l.startSelection,es)):o=Vu(o,o.length,i.minDepth,e),new Is(o,es,t,s)}addSelection(e,t,s,i){let r=this.done.length?this.done[this.done.length-1].selectionsAfter:es;return r.length>0&&t-this.prevTime<i&&s==this.prevUserEvent&&s&&/^select($|\.)/.test(s)&&qL(r[r.length-1],e)?this:new Is(Bk(this.done,e),this.undone,t,s)}addMapping(e){return new Is(Cd(this.done,e),Cd(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,s){let i=e==0?this.done:this.undone;if(i.length==0)return null;let r=i[i.length-1],o=r.selectionsAfter[0]||t.selection;if(s&&r.selectionsAfter.length)return t.update({selection:r.selectionsAfter[r.selectionsAfter.length-1],annotations:th.of({side:e,rest:KL(i),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(r.changes){let l=i.length==1?es:i.slice(0,i.length-1);return r.mapped&&(l=Cd(l,r.mapped)),t.update({changes:r.changes,selection:r.startSelection,effects:r.effects,annotations:th.of({side:e,rest:l,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Is.empty=new Is(es,es);const YL=[{key:"Mod-z",run:$k,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:nh,preventDefault:!0},{linux:"Ctrl-Shift-z",run:nh,preventDefault:!0},{key:"Mod-u",run:zL,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:HL,preventDefault:!0}];function go(n,e){return he.create(n.ranges.map(e),n.mainIndex)}function ys(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function bs({state:n,dispatch:e},t){let s=go(n.selection,t);return s.eq(n.selection,!0)?!1:(e(ys(n,s)),!0)}function _c(n,e){return he.cursor(e?n.to:n.from)}function Fk(n,e){return bs(n,t=>t.empty?n.moveByChar(t,e):_c(t,e))}function _n(n){return n.textDirectionAt(n.state.selection.main.head)==Tt.LTR}const Uk=n=>Fk(n,!_n(n)),zk=n=>Fk(n,_n(n));function Hk(n,e){return bs(n,t=>t.empty?n.moveByGroup(t,e):_c(t,e))}const XL=n=>Hk(n,!_n(n)),ZL=n=>Hk(n,_n(n));function eM(n,e,t){if(e.type.prop(t))return!0;let s=e.to-e.from;return s&&(s>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function wc(n,e,t){let s=xn(n).resolveInner(e.head),i=t?st.closedBy:st.openedBy;for(let a=e.head;;){let u=t?s.childAfter(a):s.childBefore(a);if(!u)break;eM(n,u,i)?s=u:a=t?u.to:u.from}let r=s.type.prop(i),o,l;return r&&(o=t?Ms(n,s.from,1):Ms(n,s.to,-1))&&o.matched?l=t?o.end.to:o.end.from:l=t?s.to:s.from,he.cursor(l,t?-1:1)}const tM=n=>bs(n,e=>wc(n.state,e,!_n(n))),nM=n=>bs(n,e=>wc(n.state,e,_n(n)));function Wk(n,e){return bs(n,t=>{if(!t.empty)return _c(t,e);let s=n.moveVertically(t,e);return s.head!=t.head?s:n.moveToLineBoundary(t,e)})}const qk=n=>Wk(n,!1),Gk=n=>Wk(n,!0);function Kk(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,t=0,s=0,i;if(e){for(let r of n.state.facet(Oe.scrollMargins)){let o=r(n);o?.top&&(t=Math.max(o?.top,t)),o?.bottom&&(s=Math.max(o?.bottom,s))}i=n.scrollDOM.clientHeight-t-s}else i=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:s,selfScroll:e,height:Math.max(n.defaultLineHeight,i-5)}}function Jk(n,e){let t=Kk(n),{state:s}=n,i=go(s.selection,o=>o.empty?n.moveVertically(o,e,t.height):_c(o,e));if(i.eq(s.selection))return!1;let r;if(t.selfScroll){let o=n.coordsAtPos(s.selection.main.head),l=n.scrollDOM.getBoundingClientRect(),a=l.top+t.marginTop,u=l.bottom-t.marginBottom;o&&o.top>a&&o.bottom<u&&(r=Oe.scrollIntoView(i.main.head,{y:"start",yMargin:o.top-a}))}return n.dispatch(ys(s,i),{effects:r}),!0}const q0=n=>Jk(n,!1),sh=n=>Jk(n,!0);function Mi(n,e,t){let s=n.lineBlockAt(e.head),i=n.moveToLineBoundary(e,t);if(i.head==e.head&&i.head!=(t?s.to:s.from)&&(i=n.moveToLineBoundary(e,t,!1)),!t&&i.head==s.from&&s.length){let r=/^\s*/.exec(n.state.sliceDoc(s.from,Math.min(s.from+100,s.to)))[0].length;r&&e.head!=s.from+r&&(i=he.cursor(s.from+r))}return i}const sM=n=>bs(n,e=>Mi(n,e,!0)),iM=n=>bs(n,e=>Mi(n,e,!1)),rM=n=>bs(n,e=>Mi(n,e,!_n(n))),oM=n=>bs(n,e=>Mi(n,e,_n(n))),lM=n=>bs(n,e=>he.cursor(n.lineBlockAt(e.head).from,1)),aM=n=>bs(n,e=>he.cursor(n.lineBlockAt(e.head).to,-1));function uM(n,e,t){let s=!1,i=go(n.selection,r=>{let o=Ms(n,r.head,-1)||Ms(n,r.head,1)||r.head>0&&Ms(n,r.head-1,1)||r.head<n.doc.length&&Ms(n,r.head+1,-1);if(!o||!o.end)return r;s=!0;let l=o.start.from==r.head?o.end.to:o.end.from;return he.cursor(l)});return s?(e(ys(n,i)),!0):!1}const cM=({state:n,dispatch:e})=>uM(n,e);function us(n,e){let t=go(n.state.selection,s=>{let i=e(s);return he.range(s.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return t.eq(n.state.selection)?!1:(n.dispatch(ys(n.state,t)),!0)}function Qk(n,e){return us(n,t=>n.moveByChar(t,e))}const Yk=n=>Qk(n,!_n(n)),Xk=n=>Qk(n,_n(n));function Zk(n,e){return us(n,t=>n.moveByGroup(t,e))}const dM=n=>Zk(n,!_n(n)),fM=n=>Zk(n,_n(n)),hM=n=>us(n,e=>wc(n.state,e,!_n(n))),pM=n=>us(n,e=>wc(n.state,e,_n(n)));function ex(n,e){return us(n,t=>n.moveVertically(t,e))}const tx=n=>ex(n,!1),nx=n=>ex(n,!0);function sx(n,e){return us(n,t=>n.moveVertically(t,e,Kk(n).height))}const G0=n=>sx(n,!1),K0=n=>sx(n,!0),mM=n=>us(n,e=>Mi(n,e,!0)),gM=n=>us(n,e=>Mi(n,e,!1)),vM=n=>us(n,e=>Mi(n,e,!_n(n))),yM=n=>us(n,e=>Mi(n,e,_n(n))),bM=n=>us(n,e=>he.cursor(n.lineBlockAt(e.head).from)),kM=n=>us(n,e=>he.cursor(n.lineBlockAt(e.head).to)),J0=({state:n,dispatch:e})=>(e(ys(n,{anchor:0})),!0),Q0=({state:n,dispatch:e})=>(e(ys(n,{anchor:n.doc.length})),!0),Y0=({state:n,dispatch:e})=>(e(ys(n,{anchor:n.selection.main.anchor,head:0})),!0),X0=({state:n,dispatch:e})=>(e(ys(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),xM=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),_M=({state:n,dispatch:e})=>{let t=Sc(n).map(({from:s,to:i})=>he.range(s,Math.min(i+1,n.doc.length)));return e(n.update({selection:he.create(t),userEvent:"select"})),!0},wM=({state:n,dispatch:e})=>{let t=go(n.selection,s=>{let i=xn(n),r=i.resolveStack(s.from,1);if(s.empty){let o=i.resolveStack(s.from,-1);o.node.from>=r.node.from&&o.node.to<=r.node.to&&(r=o)}for(let o=r;o;o=o.next){let{node:l}=o;if((l.from<s.from&&l.to>=s.to||l.to>s.to&&l.from<=s.from)&&o.next)return he.range(l.to,l.from)}return s});return t.eq(n.selection)?!1:(e(ys(n,t)),!0)};function ix(n,e){let{state:t}=n,s=t.selection,i=t.selection.ranges.slice();for(let r of t.selection.ranges){let o=t.doc.lineAt(r.head);if(e?o.to<n.state.doc.length:o.from>0)for(let l=r;;){let a=n.moveVertically(l,e);if(a.head<o.from||a.head>o.to){i.some(u=>u.head==a.head)||i.push(a);break}else{if(a.head==l.head)break;l=a}}}return i.length==s.ranges.length?!1:(n.dispatch(ys(t,he.create(i,i.length-1))),!0)}const SM=n=>ix(n,!1),CM=n=>ix(n,!0),AM=({state:n,dispatch:e})=>{let t=n.selection,s=null;return t.ranges.length>1?s=he.create([t.main]):t.main.empty||(s=he.create([he.cursor(t.main.head)])),s?(e(ys(n,s)),!0):!1};function Jl(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:s}=n,i=s.changeByRange(r=>{let{from:o,to:l}=r;if(o==l){let a=e(r);a<o?(t="delete.backward",a=ja(n,a,!1)):a>o&&(t="delete.forward",a=ja(n,a,!0)),o=Math.min(o,a),l=Math.max(l,a)}else o=ja(n,o,!1),l=ja(n,l,!0);return o==l?{range:r}:{changes:{from:o,to:l},range:he.cursor(o,o<r.head?-1:1)}});return i.changes.empty?!1:(n.dispatch(s.update(i,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?Oe.announce.of(s.phrase("Selection deleted")):void 0})),!0)}function ja(n,e,t){if(n instanceof Oe)for(let s of n.state.facet(Oe.atomicRanges).map(i=>i(n)))s.between(e,e,(i,r)=>{i<e&&r>e&&(e=t?r:i)});return e}const rx=(n,e,t)=>Jl(n,s=>{let i=s.from,{state:r}=n,o=r.doc.lineAt(i),l,a;if(t&&!e&&i>o.from&&i<o.from+200&&!/[^ \t]/.test(l=o.text.slice(0,i-o.from))){if(l[l.length-1]=="	")return i-1;let u=mo(l,r.tabSize),c=u%fr(r)||fr(r);for(let d=0;d<c&&l[l.length-1-d]==" ";d++)i--;a=i}else a=on(o.text,i-o.from,e,e)+o.from,a==i&&o.number!=(e?r.doc.lines:1)?a+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(a-o.from,i-o.from))&&(a=on(o.text,a-o.from,!1,!1)+o.from);return a}),ih=n=>rx(n,!1,!0),ox=n=>rx(n,!0,!1),lx=(n,e)=>Jl(n,t=>{let s=t.head,{state:i}=n,r=i.doc.lineAt(s),o=i.charCategorizer(s);for(let l=null;;){if(s==(e?r.to:r.from)){s==t.head&&r.number!=(e?i.doc.lines:1)&&(s+=e?1:-1);break}let a=on(r.text,s-r.from,e)+r.from,u=r.text.slice(Math.min(s,a)-r.from,Math.max(s,a)-r.from),c=o(u);if(l!=null&&c!=l)break;(u!=" "||s!=t.head)&&(l=c),s=a}return s}),ax=n=>lx(n,!1),EM=n=>lx(n,!0),TM=n=>Jl(n,e=>{let t=n.lineBlockAt(e.head).to;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),DM=n=>Jl(n,e=>{let t=n.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),PM=n=>Jl(n,e=>{let t=n.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),RM=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(s=>({changes:{from:s.from,to:s.to,insert:at.of(["",""])},range:he.cursor(s.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},OM=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(s=>{if(!s.empty||s.from==0||s.from==n.doc.length)return{range:s};let i=s.from,r=n.doc.lineAt(i),o=i==r.from?i-1:on(r.text,i-r.from,!1)+r.from,l=i==r.to?i+1:on(r.text,i-r.from,!0)+r.from;return{changes:{from:o,to:l,insert:n.doc.slice(i,l).append(n.doc.slice(o,i))},range:he.cursor(l)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Sc(n){let e=[],t=-1;for(let s of n.selection.ranges){let i=n.doc.lineAt(s.from),r=n.doc.lineAt(s.to);if(!s.empty&&s.to==r.from&&(r=n.doc.lineAt(s.to-1)),t>=i.number){let o=e[e.length-1];o.to=r.to,o.ranges.push(s)}else e.push({from:i.from,to:r.to,ranges:[s]});t=r.number+1}return e}function ux(n,e,t){if(n.readOnly)return!1;let s=[],i=[];for(let r of Sc(n)){if(t?r.to==n.doc.length:r.from==0)continue;let o=n.doc.lineAt(t?r.to+1:r.from-1),l=o.length+1;if(t){s.push({from:r.to,to:o.to},{from:r.from,insert:o.text+n.lineBreak});for(let a of r.ranges)i.push(he.range(Math.min(n.doc.length,a.anchor+l),Math.min(n.doc.length,a.head+l)))}else{s.push({from:o.from,to:r.from},{from:r.to,insert:n.lineBreak+o.text});for(let a of r.ranges)i.push(he.range(a.anchor-l,a.head-l))}}return s.length?(e(n.update({changes:s,scrollIntoView:!0,selection:he.create(i,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const LM=({state:n,dispatch:e})=>ux(n,e,!1),MM=({state:n,dispatch:e})=>ux(n,e,!0);function cx(n,e,t){if(n.readOnly)return!1;let s=[];for(let i of Sc(n))t?s.push({from:i.from,insert:n.doc.slice(i.from,i.to)+n.lineBreak}):s.push({from:i.to,insert:n.lineBreak+n.doc.slice(i.from,i.to)});return e(n.update({changes:s,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const IM=({state:n,dispatch:e})=>cx(n,e,!1),jM=({state:n,dispatch:e})=>cx(n,e,!0),VM=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(Sc(e).map(({from:i,to:r})=>(i>0?i--:r<e.doc.length&&r++,{from:i,to:r}))),s=go(e.selection,i=>{let r;if(n.lineWrapping){let o=n.lineBlockAt(i.head),l=n.coordsAtPos(i.head,i.assoc||1);l&&(r=o.bottom+n.documentTop-l.bottom+n.defaultLineHeight/2)}return n.moveVertically(i,!0,r)}).map(t);return n.dispatch({changes:t,selection:s,scrollIntoView:!0,userEvent:"delete.line"}),!0};function $M(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=xn(n).resolveInner(e),s=t.childBefore(e),i=t.childAfter(e),r;return s&&i&&s.to<=e&&i.from>=e&&(r=s.type.prop(st.closedBy))&&r.indexOf(i.name)>-1&&n.doc.lineAt(s.to).from==n.doc.lineAt(i.from).from&&!/\S/.test(n.sliceDoc(s.to,i.from))?{from:s.to,to:i.from}:null}const Z0=dx(!1),NM=dx(!0);function dx(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let s=e.changeByRange(i=>{let{from:r,to:o}=i,l=e.doc.lineAt(r),a=!n&&r==o&&$M(e,r);n&&(r=o=(o<=l.to?l:e.doc.lineAt(o)).to);let u=new bc(e,{simulateBreak:r,simulateDoubleBreak:!!a}),c=up(u,r);for(c==null&&(c=mo(/^\s*/.exec(e.doc.lineAt(r).text)[0],e.tabSize));o<l.to&&/\s/.test(l.text[o-l.from]);)o++;a?{from:r,to:o}=a:r>l.from&&r<l.from+100&&!/\S/.test(l.text.slice(0,r))&&(r=l.from);let d=["",Dl(e,c)];return a&&d.push(Dl(e,u.lineIndent(l.from,-1))),{changes:{from:r,to:o,insert:at.of(d)},range:he.cursor(r+1+d[1].length)}});return t(e.update(s,{scrollIntoView:!0,userEvent:"input"})),!0}}function gp(n,e){let t=-1;return n.changeByRange(s=>{let i=[];for(let o=s.from;o<=s.to;){let l=n.doc.lineAt(o);l.number>t&&(s.empty||s.to>l.from)&&(e(l,i,s),t=l.number),o=l.to+1}let r=n.changes(i);return{changes:i,range:he.range(r.mapPos(s.anchor,1),r.mapPos(s.head,1))}})}const BM=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),s=new bc(n,{overrideIndentation:r=>{let o=t[r];return o??-1}}),i=gp(n,(r,o,l)=>{let a=up(s,r.from);if(a==null)return;/\S/.test(r.text)||(a=0);let u=/^\s*/.exec(r.text)[0],c=Dl(n,a);(u!=c||l.from<r.from+u.length)&&(t[r.from]=a,o.push({from:r.from,to:r.from+u.length,insert:c}))});return i.changes.empty||e(n.update(i,{userEvent:"indent"})),!0},FM=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(gp(n,(t,s)=>{s.push({from:t.from,insert:n.facet(ap)})}),{userEvent:"input.indent"})),!0),UM=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(gp(n,(t,s)=>{let i=/^\s*/.exec(t.text)[0];if(!i)return;let r=mo(i,n.tabSize),o=0,l=Dl(n,Math.max(0,r-fr(n)));for(;o<i.length&&o<l.length&&i.charCodeAt(o)==l.charCodeAt(o);)o++;s.push({from:t.from+o,to:t.from+i.length,insert:l.slice(o)})}),{userEvent:"delete.dedent"})),!0),zM=n=>(n.setTabFocusMode(),!0),HM=[{key:"Ctrl-b",run:Uk,shift:Yk,preventDefault:!0},{key:"Ctrl-f",run:zk,shift:Xk},{key:"Ctrl-p",run:qk,shift:tx},{key:"Ctrl-n",run:Gk,shift:nx},{key:"Ctrl-a",run:lM,shift:bM},{key:"Ctrl-e",run:aM,shift:kM},{key:"Ctrl-d",run:ox},{key:"Ctrl-h",run:ih},{key:"Ctrl-k",run:TM},{key:"Ctrl-Alt-h",run:ax},{key:"Ctrl-o",run:RM},{key:"Ctrl-t",run:OM},{key:"Ctrl-v",run:sh}],WM=[{key:"ArrowLeft",run:Uk,shift:Yk,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:XL,shift:dM,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:rM,shift:vM,preventDefault:!0},{key:"ArrowRight",run:zk,shift:Xk,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:ZL,shift:fM,preventDefault:!0},{mac:"Cmd-ArrowRight",run:oM,shift:yM,preventDefault:!0},{key:"ArrowUp",run:qk,shift:tx,preventDefault:!0},{mac:"Cmd-ArrowUp",run:J0,shift:Y0},{mac:"Ctrl-ArrowUp",run:q0,shift:G0},{key:"ArrowDown",run:Gk,shift:nx,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Q0,shift:X0},{mac:"Ctrl-ArrowDown",run:sh,shift:K0},{key:"PageUp",run:q0,shift:G0},{key:"PageDown",run:sh,shift:K0},{key:"Home",run:iM,shift:gM,preventDefault:!0},{key:"Mod-Home",run:J0,shift:Y0},{key:"End",run:sM,shift:mM,preventDefault:!0},{key:"Mod-End",run:Q0,shift:X0},{key:"Enter",run:Z0,shift:Z0},{key:"Mod-a",run:xM},{key:"Backspace",run:ih,shift:ih,preventDefault:!0},{key:"Delete",run:ox,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:ax,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:EM,preventDefault:!0},{mac:"Mod-Backspace",run:DM,preventDefault:!0},{mac:"Mod-Delete",run:PM,preventDefault:!0}].concat(HM.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),qM=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:tM,shift:hM},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:nM,shift:pM},{key:"Alt-ArrowUp",run:LM},{key:"Shift-Alt-ArrowUp",run:IM},{key:"Alt-ArrowDown",run:MM},{key:"Shift-Alt-ArrowDown",run:jM},{key:"Mod-Alt-ArrowUp",run:SM},{key:"Mod-Alt-ArrowDown",run:CM},{key:"Escape",run:AM},{key:"Mod-Enter",run:NM},{key:"Alt-l",mac:"Ctrl-l",run:_M},{key:"Mod-i",run:wM,preventDefault:!0},{key:"Mod-[",run:UM},{key:"Mod-]",run:FM},{key:"Mod-Alt-\\",run:BM},{key:"Shift-Mod-k",run:VM},{key:"Shift-Mod-\\",run:cM},{key:"Mod-/",run:LL},{key:"Alt-A",run:IL},{key:"Ctrl-m",mac:"Shift-Alt-m",run:zM}].concat(WM),ev=typeof String.prototype.normalize=="function"?n=>n.normalize("NFKD"):n=>n;class ro{constructor(e,t,s=0,i=e.length,r,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(s,i),this.bufferStart=s,this.normalize=r?l=>r(ev(l)):ev,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return In(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=Uh(e),s=this.bufferStart+this.bufferPos;this.bufferPos+=Os(e);let i=this.normalize(t);if(i.length)for(let r=0,o=s;;r++){let l=i.charCodeAt(r),a=this.match(l,o,this.bufferPos+this.bufferStart);if(r==i.length-1){if(a)return this.value=a,this;break}o==s&&r<t.length&&t.charCodeAt(r)==l&&o++}}}match(e,t,s){let i=null;for(let r=0;r<this.matches.length;r+=2){let o=this.matches[r],l=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?i={from:this.matches[r+1],to:s}:(this.matches[r]++,l=!0)),l||(this.matches.splice(r,2),r-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:t,to:s}:this.matches.push(1,t)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}typeof Symbol<"u"&&(ro.prototype[Symbol.iterator]=function(){return this});const fx={from:-1,to:-1,match:/.*/.exec("")},vp="gm"+(/x/.unicode==null?"":"u");class hx{constructor(e,t,s,i=0,r=e.length){if(this.text=e,this.to=r,this.curLine="",this.done=!1,this.value=fx,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new px(e,t,s,i,r);this.re=new RegExp(t,vp+(s?.ignoreCase?"i":"")),this.test=s?.test,this.iter=e.iter();let o=e.lineAt(i);this.curLineStart=o.from,this.matchPos=$u(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let s=this.curLineStart+t.index,i=s+t[0].length;if(this.matchPos=$u(this.text,i+(s==i?1:0)),s==this.curLineStart+this.curLine.length&&this.nextLine(),(s<i||s>this.value.to)&&(!this.test||this.test(s,i,t)))return this.value={from:s,to:i,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const Ad=new WeakMap;class Gr{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,s){let i=Ad.get(e);if(!i||i.from>=s||i.to<=t){let l=new Gr(t,e.sliceString(t,s));return Ad.set(e,l),l}if(i.from==t&&i.to==s)return i;let{text:r,from:o}=i;return o>t&&(r=e.sliceString(t,o)+r,o=t),i.to<s&&(r+=e.sliceString(i.to,s)),Ad.set(e,new Gr(o,r)),new Gr(t,r.slice(t-o,s-o))}}class px{constructor(e,t,s,i,r){this.text=e,this.to=r,this.done=!1,this.value=fx,this.matchPos=$u(e,i),this.re=new RegExp(t,vp+(s?.ignoreCase?"i":"")),this.test=s?.test,this.flat=Gr.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let s=this.flat.from+t.index,i=s+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(s,i,t)))return this.value={from:s,to:i,match:t},this.matchPos=$u(this.text,i+(s==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Gr.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(hx.prototype[Symbol.iterator]=px.prototype[Symbol.iterator]=function(){return this});function GM(n){try{return new RegExp(n,vp),!0}catch{return!1}}function $u(n,e){if(e>=n.length)return e;let t=n.lineAt(e),s;for(;e<t.to&&(s=t.text.charCodeAt(e-t.from))>=56320&&s<57344;)e++;return e}function rh(n){let e=String(n.state.doc.lineAt(n.state.selection.main.head).number),t=xt("input",{class:"cm-textfield",name:"line",value:e}),s=xt("form",{class:"cm-gotoLine",onkeydown:r=>{r.keyCode==27?(r.preventDefault(),n.dispatch({effects:il.of(!1)}),n.focus()):r.keyCode==13&&(r.preventDefault(),i())},onsubmit:r=>{r.preventDefault(),i()}},xt("label",n.state.phrase("Go to line"),": ",t)," ",xt("button",{class:"cm-button",type:"submit"},n.state.phrase("go")),xt("button",{name:"close",onclick:()=>{n.dispatch({effects:il.of(!1)}),n.focus()},"aria-label":n.state.phrase("close"),type:"button"},[""]));function i(){let r=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!r)return;let{state:o}=n,l=o.doc.lineAt(o.selection.main.head),[,a,u,c,d]=r,f=c?+c.slice(1):0,p=u?+u:l.number;if(u&&d){let x=p/100;a&&(x=x*(a=="-"?-1:1)+l.number/o.doc.lines),p=Math.round(o.doc.lines*x)}else u&&a&&(p=p*(a=="-"?-1:1)+l.number);let g=o.doc.line(Math.max(1,Math.min(o.doc.lines,p))),b=he.cursor(g.from+Math.max(0,Math.min(f,g.length)));n.dispatch({effects:[il.of(!1),Oe.scrollIntoView(b.from,{y:"center"})],selection:b}),n.focus()}return{dom:s}}const il=Ze.define(),tv=ln.define({create(){return!0},update(n,e){for(let t of e.effects)t.is(il)&&(n=t.value);return n},provide:n=>Al.from(n,e=>e?rh:null)}),KM=n=>{let e=Cl(n,rh);if(!e){let t=[il.of(!0)];n.state.field(tv,!1)==null&&t.push(Ze.appendConfig.of([tv,JM])),n.dispatch({effects:t}),e=Cl(n,rh)}return e&&e.dom.querySelector("input").select(),!0},JM=Oe.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),QM={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},YM=Le.define({combine(n){return Ns(n,QM,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function XM(n){return[s8,n8]}const ZM=ze.mark({class:"cm-selectionMatch"}),e8=ze.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function nv(n,e,t,s){return(t==0||n(e.sliceDoc(t-1,t))!=Pt.Word)&&(s==e.doc.length||n(e.sliceDoc(s,s+1))!=Pt.Word)}function t8(n,e,t,s){return n(e.sliceDoc(t,t+1))==Pt.Word&&n(e.sliceDoc(s-1,s))==Pt.Word}const n8=zt.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.selectionSet||n.docChanged||n.viewportChanged)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=n.state.facet(YM),{state:t}=n,s=t.selection;if(s.ranges.length>1)return ze.none;let i=s.main,r,o=null;if(i.empty){if(!e.highlightWordAroundCursor)return ze.none;let a=t.wordAt(i.head);if(!a)return ze.none;o=t.charCategorizer(i.head),r=t.sliceDoc(a.from,a.to)}else{let a=i.to-i.from;if(a<e.minSelectionLength||a>200)return ze.none;if(e.wholeWords){if(r=t.sliceDoc(i.from,i.to),o=t.charCategorizer(i.head),!(nv(o,t,i.from,i.to)&&t8(o,t,i.from,i.to)))return ze.none}else if(r=t.sliceDoc(i.from,i.to),!r)return ze.none}let l=[];for(let a of n.visibleRanges){let u=new ro(t.doc,r,a.from,a.to);for(;!u.next().done;){let{from:c,to:d}=u.value;if((!o||nv(o,t,c,d))&&(i.empty&&c<=i.from&&d>=i.to?l.push(e8.range(c,d)):(c>=i.to||d<=i.from)&&l.push(ZM.range(c,d)),l.length>e.maxMatches))return ze.none}}return ze.set(l)}},{decorations:n=>n.decorations}),s8=Oe.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),i8=({state:n,dispatch:e})=>{let{selection:t}=n,s=he.create(t.ranges.map(i=>n.wordAt(i.head)||he.cursor(i.head)),t.mainIndex);return s.eq(t)?!1:(e(n.update({selection:s})),!0)};function r8(n,e){let{main:t,ranges:s}=n.selection,i=n.wordAt(t.head),r=i&&i.from==t.from&&i.to==t.to;for(let o=!1,l=new ro(n.doc,e,s[s.length-1].to);;)if(l.next(),l.done){if(o)return null;l=new ro(n.doc,e,0,Math.max(0,s[s.length-1].from-1)),o=!0}else{if(o&&s.some(a=>a.from==l.value.from))continue;if(r){let a=n.wordAt(l.value.from);if(!a||a.from!=l.value.from||a.to!=l.value.to)continue}return l.value}}const o8=({state:n,dispatch:e})=>{let{ranges:t}=n.selection;if(t.some(r=>r.from===r.to))return i8({state:n,dispatch:e});let s=n.sliceDoc(t[0].from,t[0].to);if(n.selection.ranges.some(r=>n.sliceDoc(r.from,r.to)!=s))return!1;let i=r8(n,s);return i?(e(n.update({selection:n.selection.addRange(he.range(i.from,i.to),!1),effects:Oe.scrollIntoView(i.to)})),!0):!1},vo=Le.define({combine(n){return Ns(n,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new y8(e),scrollToMatch:e=>Oe.scrollIntoView(e)})}});class mx{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||GM(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,s)=>s=="n"?`
`:s=="r"?"\r":s=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new c8(this):new a8(this)}getCursor(e,t=0,s){let i=e.doc?e:ot.create({doc:e});return s==null&&(s=i.doc.length),this.regexp?Er(this,i,t,s):Ar(this,i,t,s)}}class gx{constructor(e){this.spec=e}}function Ar(n,e,t,s){return new ro(e.doc,n.unquoted,t,s,n.caseSensitive?void 0:i=>i.toLowerCase(),n.wholeWord?l8(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function l8(n,e){return(t,s,i,r)=>((r>t||r+i.length<s)&&(r=Math.max(0,t-2),i=n.sliceString(r,Math.min(n.length,s+2))),(e(Nu(i,t-r))!=Pt.Word||e(Bu(i,t-r))!=Pt.Word)&&(e(Bu(i,s-r))!=Pt.Word||e(Nu(i,s-r))!=Pt.Word))}class a8 extends gx{constructor(e){super(e)}nextMatch(e,t,s){let i=Ar(this.spec,e,s,e.doc.length).nextOverlapping();if(i.done){let r=Math.min(e.doc.length,t+this.spec.unquoted.length);i=Ar(this.spec,e,0,r).nextOverlapping()}return i.done||i.value.from==t&&i.value.to==s?null:i.value}prevMatchInRange(e,t,s){for(let i=s;;){let r=Math.max(t,i-1e4-this.spec.unquoted.length),o=Ar(this.spec,e,r,i),l=null;for(;!o.nextOverlapping().done;)l=o.value;if(l)return l;if(r==t)return null;i-=1e4}}prevMatch(e,t,s){let i=this.prevMatchInRange(e,0,t);return i||(i=this.prevMatchInRange(e,Math.max(0,s-this.spec.unquoted.length),e.doc.length)),i&&(i.from!=t||i.to!=s)?i:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let s=Ar(this.spec,e,0,e.doc.length),i=[];for(;!s.next().done;){if(i.length>=t)return null;i.push(s.value)}return i}highlight(e,t,s,i){let r=Ar(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(s+this.spec.unquoted.length,e.doc.length));for(;!r.next().done;)i(r.value.from,r.value.to)}}function Er(n,e,t,s){return new hx(e.doc,n.search,{ignoreCase:!n.caseSensitive,test:n.wholeWord?u8(e.charCategorizer(e.selection.main.head)):void 0},t,s)}function Nu(n,e){return n.slice(on(n,e,!1),e)}function Bu(n,e){return n.slice(e,on(n,e))}function u8(n){return(e,t,s)=>!s[0].length||(n(Nu(s.input,s.index))!=Pt.Word||n(Bu(s.input,s.index))!=Pt.Word)&&(n(Bu(s.input,s.index+s[0].length))!=Pt.Word||n(Nu(s.input,s.index+s[0].length))!=Pt.Word)}class c8 extends gx{nextMatch(e,t,s){let i=Er(this.spec,e,s,e.doc.length).next();return i.done&&(i=Er(this.spec,e,0,t).next()),i.done?null:i.value}prevMatchInRange(e,t,s){for(let i=1;;i++){let r=Math.max(t,s-i*1e4),o=Er(this.spec,e,r,s),l=null;for(;!o.next().done;)l=o.value;if(l&&(r==t||l.from>r+10))return l;if(r==t)return null}}prevMatch(e,t,s){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,s,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(t,s)=>{if(s=="&")return e.match[0];if(s=="$")return"$";for(let i=s.length;i>0;i--){let r=+s.slice(0,i);if(r>0&&r<e.match.length)return e.match[r]+s.slice(i)}return t})}matchAll(e,t){let s=Er(this.spec,e,0,e.doc.length),i=[];for(;!s.next().done;){if(i.length>=t)return null;i.push(s.value)}return i}highlight(e,t,s,i){let r=Er(this.spec,e,Math.max(0,t-250),Math.min(s+250,e.doc.length));for(;!r.next().done;)i(r.value.from,r.value.to)}}const Rl=Ze.define(),yp=Ze.define(),Si=ln.define({create(n){return new Ed(oh(n).create(),null)},update(n,e){for(let t of e.effects)t.is(Rl)?n=new Ed(t.value.create(),n.panel):t.is(yp)&&(n=new Ed(n.query,t.value?bp:null));return n},provide:n=>Al.from(n,e=>e.panel)});class Ed{constructor(e,t){this.query=e,this.panel=t}}const d8=ze.mark({class:"cm-searchMatch"}),f8=ze.mark({class:"cm-searchMatch cm-searchMatch-selected"}),h8=zt.fromClass(class{constructor(n){this.view=n,this.decorations=this.highlight(n.state.field(Si))}update(n){let e=n.state.field(Si);(e!=n.startState.field(Si)||n.docChanged||n.selectionSet||n.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:n,panel:e}){if(!e||!n.spec.valid)return ze.none;let{view:t}=this,s=new ti;for(let i=0,r=t.visibleRanges,o=r.length;i<o;i++){let{from:l,to:a}=r[i];for(;i<o-1&&a>r[i+1].from-500;)a=r[++i].to;n.highlight(t.state,l,a,(u,c)=>{let d=t.state.selection.ranges.some(f=>f.from==u&&f.to==c);s.add(u,c,d?f8:d8)})}return s.finish()}},{decorations:n=>n.decorations});function Ql(n){return e=>{let t=e.state.field(Si,!1);return t&&t.query.spec.valid?n(e,t):bx(e)}}const Fu=Ql((n,{query:e})=>{let{to:t}=n.state.selection.main,s=e.nextMatch(n.state,t,t);if(!s)return!1;let i=he.single(s.from,s.to),r=n.state.facet(vo);return n.dispatch({selection:i,effects:[kp(n,s),r.scrollToMatch(i.main,n)],userEvent:"select.search"}),yx(n),!0}),Uu=Ql((n,{query:e})=>{let{state:t}=n,{from:s}=t.selection.main,i=e.prevMatch(t,s,s);if(!i)return!1;let r=he.single(i.from,i.to),o=n.state.facet(vo);return n.dispatch({selection:r,effects:[kp(n,i),o.scrollToMatch(r.main,n)],userEvent:"select.search"}),yx(n),!0}),p8=Ql((n,{query:e})=>{let t=e.matchAll(n.state,1e3);return!t||!t.length?!1:(n.dispatch({selection:he.create(t.map(s=>he.range(s.from,s.to))),userEvent:"select.search.matches"}),!0)}),m8=({state:n,dispatch:e})=>{let t=n.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:s,to:i}=t.main,r=[],o=0;for(let l=new ro(n.doc,n.sliceDoc(s,i));!l.next().done;){if(r.length>1e3)return!1;l.value.from==s&&(o=r.length),r.push(he.range(l.value.from,l.value.to))}return e(n.update({selection:he.create(r,o),userEvent:"select.search.matches"})),!0},sv=Ql((n,{query:e})=>{let{state:t}=n,{from:s,to:i}=t.selection.main;if(t.readOnly)return!1;let r=e.nextMatch(t,s,s);if(!r)return!1;let o=r,l=[],a,u,c=[];o.from==s&&o.to==i&&(u=t.toText(e.getReplacement(o)),l.push({from:o.from,to:o.to,insert:u}),o=e.nextMatch(t,o.from,o.to),c.push(Oe.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(s).number)+".")));let d=n.state.changes(l);return o&&(a=he.single(o.from,o.to).map(d),c.push(kp(n,o)),c.push(t.facet(vo).scrollToMatch(a.main,n))),n.dispatch({changes:d,selection:a,effects:c,userEvent:"input.replace"}),!0}),g8=Ql((n,{query:e})=>{if(n.state.readOnly)return!1;let t=e.matchAll(n.state,1e9).map(i=>{let{from:r,to:o}=i;return{from:r,to:o,insert:e.getReplacement(i)}});if(!t.length)return!1;let s=n.state.phrase("replaced $ matches",t.length)+".";return n.dispatch({changes:t,effects:Oe.announce.of(s),userEvent:"input.replace.all"}),!0});function bp(n){return n.state.facet(vo).createPanel(n)}function oh(n,e){var t,s,i,r,o;let l=n.selection.main,a=l.empty||l.to>l.from+100?"":n.sliceDoc(l.from,l.to);if(e&&!a)return e;let u=n.facet(vo);return new mx({search:((t=e?.literal)!==null&&t!==void 0?t:u.literal)?a:a.replace(/\n/g,"\\n"),caseSensitive:(s=e?.caseSensitive)!==null&&s!==void 0?s:u.caseSensitive,literal:(i=e?.literal)!==null&&i!==void 0?i:u.literal,regexp:(r=e?.regexp)!==null&&r!==void 0?r:u.regexp,wholeWord:(o=e?.wholeWord)!==null&&o!==void 0?o:u.wholeWord})}function vx(n){let e=Cl(n,bp);return e&&e.dom.querySelector("[main-field]")}function yx(n){let e=vx(n);e&&e==n.root.activeElement&&e.select()}const bx=n=>{let e=n.state.field(Si,!1);if(e&&e.panel){let t=vx(n);if(t&&t!=n.root.activeElement){let s=oh(n.state,e.query.spec);s.valid&&n.dispatch({effects:Rl.of(s)}),t.focus(),t.select()}}else n.dispatch({effects:[yp.of(!0),e?Rl.of(oh(n.state,e.query.spec)):Ze.appendConfig.of(k8)]});return!0},kx=n=>{let e=n.state.field(Si,!1);if(!e||!e.panel)return!1;let t=Cl(n,bp);return t&&t.dom.contains(n.root.activeElement)&&n.focus(),n.dispatch({effects:yp.of(!1)}),!0},v8=[{key:"Mod-f",run:bx,scope:"editor search-panel"},{key:"F3",run:Fu,shift:Uu,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Fu,shift:Uu,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:kx,scope:"editor search-panel"},{key:"Mod-Shift-l",run:m8},{key:"Mod-Alt-g",run:KM},{key:"Mod-d",run:o8,preventDefault:!0}];class y8{constructor(e){this.view=e;let t=this.query=e.state.field(Si).query.spec;this.commit=this.commit.bind(this),this.searchField=xt("input",{value:t.search,placeholder:zn(e,"Find"),"aria-label":zn(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=xt("input",{value:t.replace,placeholder:zn(e,"Replace"),"aria-label":zn(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=xt("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=xt("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=xt("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function s(i,r,o){return xt("button",{class:"cm-button",name:i,onclick:r,type:"button"},o)}this.dom=xt("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,s("next",()=>Fu(e),[zn(e,"next")]),s("prev",()=>Uu(e),[zn(e,"previous")]),s("select",()=>p8(e),[zn(e,"all")]),xt("label",null,[this.caseField,zn(e,"match case")]),xt("label",null,[this.reField,zn(e,"regexp")]),xt("label",null,[this.wordField,zn(e,"by word")]),...e.state.readOnly?[]:[xt("br"),this.replaceField,s("replace",()=>sv(e),[zn(e,"replace")]),s("replaceAll",()=>g8(e),[zn(e,"replace all")])],xt("button",{name:"close",onclick:()=>kx(e),"aria-label":zn(e,"close"),type:"button"},[""])])}commit(){let e=new mx({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Rl.of(e)}))}keydown(e){kR(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Uu:Fu)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),sv(this.view))}update(e){for(let t of e.transactions)for(let s of t.effects)s.is(Rl)&&!s.value.eq(this.query)&&this.setQuery(s.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(vo).top}}function zn(n,e){return n.state.phrase(e)}const Va=30,$a=/[\s\.,:;?!]/;function kp(n,{from:e,to:t}){let s=n.state.doc.lineAt(e),i=n.state.doc.lineAt(t).to,r=Math.max(s.from,e-Va),o=Math.min(i,t+Va),l=n.state.sliceDoc(r,o);if(r!=s.from){for(let a=0;a<Va;a++)if(!$a.test(l[a+1])&&$a.test(l[a])){l=l.slice(a);break}}if(o!=i){for(let a=l.length-1;a>l.length-Va;a--)if(!$a.test(l[a-1])&&$a.test(l[a])){l=l.slice(0,a);break}}return Oe.announce.of(`${n.state.phrase("current match")}. ${l} ${n.state.phrase("on line")} ${s.number}.`)}const b8=Oe.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),k8=[Si,gr.low(h8),b8];class xx{constructor(e,t,s,i){this.state=e,this.pos=t,this.explicit=s,this.view=i,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=xn(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),s=Math.max(t.from,this.pos-250),i=t.text.slice(s-t.from,this.pos-t.from),r=i.search(_x(e,!1));return r<0?null:{from:s+r,to:this.pos,text:i.slice(r)}}get aborted(){return this.abortListeners==null}addEventListener(e,t,s){e=="abort"&&this.abortListeners&&(this.abortListeners.push(t),s&&s.onDocChange&&(this.abortOnDocChange=!0))}}function iv(n){let e=Object.keys(n).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function x8(n){let e=Object.create(null),t=Object.create(null);for(let{label:i}of n){e[i[0]]=!0;for(let r=1;r<i.length;r++)t[i[r]]=!0}let s=iv(e)+iv(t)+"*$";return[new RegExp("^"+s),new RegExp(s)]}function _8(n){let e=n.map(i=>typeof i=="string"?{label:i}:i),[t,s]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:x8(e);return i=>{let r=i.matchBefore(s);return r||i.explicit?{from:r?r.from:i.pos,options:e,validFor:t}:null}}class rv{constructor(e,t,s,i){this.completion=e,this.source=t,this.match=s,this.score=i}}function ir(n){return n.selection.main.from}function _x(n,e){var t;let{source:s}=n,i=e&&s[0]!="^",r=s[s.length-1]!="$";return!i&&!r?n:new RegExp(`${i?"^":""}(?:${s})${r?"$":""}`,(t=n.flags)!==null&&t!==void 0?t:n.ignoreCase?"i":"")}const wx=ri.define();function w8(n,e,t,s){let{main:i}=n.selection,r=t-i.from,o=s-i.from;return{...n.changeByRange(l=>{if(l!=i&&t!=s&&n.sliceDoc(l.from+r,l.from+o)!=n.sliceDoc(t,s))return{range:l};let a=n.toText(e);return{changes:{from:l.from+r,to:s==i.from?l.to:l.from+o,insert:a},range:he.cursor(l.from+r+a.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}const ov=new WeakMap;function S8(n){if(!Array.isArray(n))return n;let e=ov.get(n);return e||ov.set(n,e=_8(n)),e}const zu=Ze.define(),Ol=Ze.define();class C8{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let s=In(e,t),i=Os(s);this.chars.push(s);let r=e.slice(t,t+i),o=r.toUpperCase();this.folded.push(In(o==r?r.toLowerCase():o,0)),t+=i}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:s,any:i,precise:r,byWord:o}=this;if(t.length==1){let w=In(e,0),P=Os(w),U=P==e.length?0:-100;if(w!=t[0])if(w==s[0])U+=-200;else return null;return this.ret(U,[0,P])}let l=e.indexOf(this.pattern);if(l==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let a=t.length,u=0;if(l<0){for(let w=0,P=Math.min(e.length,200);w<P&&u<a;){let U=In(e,w);(U==t[u]||U==s[u])&&(i[u++]=w),w+=Os(U)}if(u<a)return null}let c=0,d=0,f=!1,p=0,g=-1,b=-1,x=/[a-z]/.test(e),m=!0;for(let w=0,P=Math.min(e.length,200),U=0;w<P&&d<a;){let O=In(e,w);l<0&&(c<a&&O==t[c]&&(r[c++]=w),p<a&&(O==t[p]||O==s[p]?(p==0&&(g=w),b=w+1,p++):p=0));let A,_=O<255?O>=48&&O<=57||O>=97&&O<=122?2:O>=65&&O<=90?1:0:(A=Uh(O))!=A.toLowerCase()?1:A!=A.toUpperCase()?2:0;(!w||_==1&&x||U==0&&_!=0)&&(t[d]==O||s[d]==O&&(f=!0)?o[d++]=w:o.length&&(m=!1)),U=_,w+=Os(O)}return d==a&&o[0]==0&&m?this.result(-100+(f?-200:0),o,e):p==a&&g==0?this.ret(-200-e.length+(b==e.length?0:-100),[0,b]):l>-1?this.ret(-700-e.length,[l,l+this.pattern.length]):p==a?this.ret(-900-e.length,[g,b]):d==a?this.result(-100+(f?-200:0)+-700+(m?0:-1100),o,e):t.length==2?null:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,t,s){let i=[],r=0;for(let o of t){let l=o+(this.astral?Os(In(s,o)):1);r&&i[r-1]==o?i[r-1]=l:(i[r++]=o,i[r++]=l)}return this.ret(e-s.length,i)}}class A8{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),s=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return s==null?null:(this.matched=[0,t.length],this.score=s+(e.length==this.pattern.length?0:-100),this)}}const Yt=Le.define({combine(n){return Ns(n,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:E8,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>s=>lv(e(s),t(s)),optionClass:(e,t)=>s=>lv(e(s),t(s)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})}});function lv(n,e){return n?e?n+" "+e:n:e}function E8(n,e,t,s,i,r){let o=n.textDirection==Tt.RTL,l=o,a=!1,u="top",c,d,f=e.left-i.left,p=i.right-e.right,g=s.right-s.left,b=s.bottom-s.top;if(l&&f<Math.min(g,p)?l=!1:!l&&p<Math.min(g,f)&&(l=!0),g<=(l?f:p))c=Math.max(i.top,Math.min(t.top,i.bottom-b))-e.top,d=Math.min(400,l?f:p);else{a=!0,d=Math.min(400,(o?e.right:i.right-e.left)-30);let w=i.bottom-e.bottom;w>=b||w>e.top?c=t.bottom-e.top:(u="bottom",c=e.bottom-t.top)}let x=(e.bottom-e.top)/r.offsetHeight,m=(e.right-e.left)/r.offsetWidth;return{style:`${u}: ${c/x}px; max-width: ${d/m}px`,class:"cm-completionInfo-"+(a?o?"left-narrow":"right-narrow":l?"left":"right")}}function T8(n){let e=n.addToOptions.slice();return n.icons&&e.push({render(t){let s=document.createElement("div");return s.classList.add("cm-completionIcon"),t.type&&s.classList.add(...t.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),s.setAttribute("aria-hidden","true"),s},position:20}),e.push({render(t,s,i,r){let o=document.createElement("span");o.className="cm-completionLabel";let l=t.displayLabel||t.label,a=0;for(let u=0;u<r.length;){let c=r[u++],d=r[u++];c>a&&o.appendChild(document.createTextNode(l.slice(a,c)));let f=o.appendChild(document.createElement("span"));f.appendChild(document.createTextNode(l.slice(c,d))),f.className="cm-completionMatchedText",a=d}return a<l.length&&o.appendChild(document.createTextNode(l.slice(a))),o},position:50},{render(t){if(!t.detail)return null;let s=document.createElement("span");return s.className="cm-completionDetail",s.textContent=t.detail,s},position:80}),e.sort((t,s)=>t.position-s.position).map(t=>t.render)}function Td(n,e,t){if(n<=t)return{from:0,to:n};if(e<0&&(e=0),e<=n>>1){let i=Math.floor(e/t);return{from:i*t,to:(i+1)*t}}let s=Math.floor((n-e)/t);return{from:n-(s+1)*t,to:n-s*t}}class D8{constructor(e,t,s){this.view=e,this.stateField=t,this.applyCompletion=s,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:a=>this.placeInfo(a),key:this},this.space=null,this.currentClass="";let i=e.state.field(t),{options:r,selected:o}=i.open,l=e.state.facet(Yt);this.optionContent=T8(l),this.optionClass=l.optionClass,this.tooltipClass=l.tooltipClass,this.range=Td(r.length,o,l.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",a=>{let{options:u}=e.state.field(t).open;for(let c=a.target,d;c&&c!=this.dom;c=c.parentNode)if(c.nodeName=="LI"&&(d=/-(\d+)$/.exec(c.id))&&+d[1]<u.length){this.applyCompletion(e,u[+d[1]]),a.preventDefault();return}}),this.dom.addEventListener("focusout",a=>{let u=e.state.field(this.stateField,!1);u&&u.tooltip&&e.state.facet(Yt).closeOnBlur&&a.relatedTarget!=e.contentDOM&&e.dispatch({effects:Ol.of(null)})}),this.showOptions(r,i.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let s=e.state.field(this.stateField),i=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),s!=i){let{options:r,selected:o,disabled:l}=s.open;(!i.open||i.open.options!=r)&&(this.range=Td(r.length,o,e.state.facet(Yt).maxRenderedOptions),this.showOptions(r,s.id)),this.updateSel(),l!=((t=i.open)===null||t===void 0?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!l)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let s of this.currentClass.split(" "))s&&this.dom.classList.remove(s);for(let s of t.split(" "))s&&this.dom.classList.add(s);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;(t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=Td(t.options.length,t.selected,this.view.state.facet(Yt).maxRenderedOptions),this.showOptions(t.options,e.id));let s=this.updateSelectedOption(t.selected);if(s){this.destroyInfo();let{completion:i}=t.options[t.selected],{info:r}=i;if(!r)return;let o=typeof r=="string"?document.createTextNode(r):r(i);if(!o)return;"then"in o?o.then(l=>{l&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(l,i)}).catch(l=>Vn(this.view.state,l,"completion info")):(this.addInfoPane(o,i),s.setAttribute("aria-describedby",this.info.id))}}addInfoPane(e,t){this.destroyInfo();let s=this.info=document.createElement("div");if(s.className="cm-tooltip cm-completionInfo",s.id="cm-completionInfo-"+Math.floor(Math.random()*65535).toString(16),e.nodeType!=null)s.appendChild(e),this.infoDestroy=null;else{let{dom:i,destroy:r}=e;s.appendChild(i),this.infoDestroy=r||null}this.dom.appendChild(s),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let s=this.list.firstChild,i=this.range.from;s;s=s.nextSibling,i++)s.nodeName!="LI"||!s.id?i--:i==e?s.hasAttribute("aria-selected")||(s.setAttribute("aria-selected","true"),t=s):s.hasAttribute("aria-selected")&&(s.removeAttribute("aria-selected"),s.removeAttribute("aria-describedby"));return t&&R8(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),s=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),r=this.space;if(!r){let o=this.dom.ownerDocument.documentElement;r={left:0,top:0,right:o.clientWidth,bottom:o.clientHeight}}return i.top>Math.min(r.bottom,t.bottom)-10||i.bottom<Math.max(r.top,t.top)+10?null:this.view.state.facet(Yt).positionInfo(this.view,t,i,s,r,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,s){const i=document.createElement("ul");i.id=t,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions")),i.addEventListener("mousedown",o=>{o.target==i&&o.preventDefault()});let r=null;for(let o=s.from;o<s.to;o++){let{completion:l,match:a}=e[o],{section:u}=l;if(u){let f=typeof u=="string"?u:u.name;if(f!=r&&(o>s.from||s.from==0))if(r=f,typeof u!="string"&&u.header)i.appendChild(u.header(u));else{let p=i.appendChild(document.createElement("completion-section"));p.textContent=f}}const c=i.appendChild(document.createElement("li"));c.id=t+"-"+o,c.setAttribute("role","option");let d=this.optionClass(l);d&&(c.className=d);for(let f of this.optionContent){let p=f(l,this.view.state,this.view,a);p&&c.appendChild(p)}}return s.from&&i.classList.add("cm-completionListIncompleteTop"),s.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function P8(n,e){return t=>new D8(t,n,e)}function R8(n,e){let t=n.getBoundingClientRect(),s=e.getBoundingClientRect(),i=t.height/n.offsetHeight;s.top<t.top?n.scrollTop-=(t.top-s.top)/i:s.bottom>t.bottom&&(n.scrollTop+=(s.bottom-t.bottom)/i)}function av(n){return(n.boost||0)*100+(n.apply?10:0)+(n.info?5:0)+(n.type?1:0)}function O8(n,e){let t=[],s=null,i=null,r=c=>{t.push(c);let{section:d}=c.completion;if(d){s||(s=[]);let f=typeof d=="string"?d:d.name;s.some(p=>p.name==f)||s.push(typeof d=="string"?{name:f}:d)}},o=e.facet(Yt);for(let c of n)if(c.hasResult()){let d=c.result.getMatch;if(c.result.filter===!1)for(let f of c.result.options)r(new rv(f,c.source,d?d(f):[],1e9-t.length));else{let f=e.sliceDoc(c.from,c.to),p,g=o.filterStrict?new A8(f):new C8(f);for(let b of c.result.options)if(p=g.match(b.label)){let x=b.displayLabel?d?d(b,p.matched):[]:p.matched,m=p.score+(b.boost||0);if(r(new rv(b,c.source,x,m)),typeof b.section=="object"&&b.section.rank==="dynamic"){let{name:w}=b.section;i||(i=Object.create(null)),i[w]=Math.max(m,i[w]||-1e9)}}}}if(s){let c=Object.create(null),d=0,f=(p,g)=>(p.rank==="dynamic"&&g.rank==="dynamic"?i[g.name]-i[p.name]:0)||(typeof p.rank=="number"?p.rank:1e9)-(typeof g.rank=="number"?g.rank:1e9)||(p.name<g.name?-1:1);for(let p of s.sort(f))d-=1e5,c[p.name]=d;for(let p of t){let{section:g}=p.completion;g&&(p.score+=c[typeof g=="string"?g:g.name])}}let l=[],a=null,u=o.compareCompletions;for(let c of t.sort((d,f)=>f.score-d.score||u(d.completion,f.completion))){let d=c.completion;!a||a.label!=d.label||a.detail!=d.detail||a.type!=null&&d.type!=null&&a.type!=d.type||a.apply!=d.apply||a.boost!=d.boost?l.push(c):av(c.completion)>av(a)&&(l[l.length-1]=c),a=c.completion}return l}class Or{constructor(e,t,s,i,r,o){this.options=e,this.attrs=t,this.tooltip=s,this.timestamp=i,this.selected=r,this.disabled=o}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new Or(this.options,uv(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,s,i,r,o){if(i&&!o&&e.some(u=>u.isPending))return i.setDisabled();let l=O8(e,t);if(!l.length)return i&&e.some(u=>u.isPending)?i.setDisabled():null;let a=t.facet(Yt).selectOnOpen?0:-1;if(i&&i.selected!=a&&i.selected!=-1){let u=i.options[i.selected].completion;for(let c=0;c<l.length;c++)if(l[c].completion==u){a=c;break}}return new Or(l,uv(s,a),{pos:e.reduce((u,c)=>c.hasResult()?Math.min(u,c.from):u,1e8),create:$8,above:r.aboveCursor},i?i.timestamp:Date.now(),a,!1)}map(e){return new Or(this.options,this.attrs,{...this.tooltip,pos:e.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new Or(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class Hu{constructor(e,t,s){this.active=e,this.id=t,this.open=s}static start(){return new Hu(j8,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,s=t.facet(Yt),r=(s.override||t.languageDataAt("autocomplete",ir(t)).map(S8)).map(a=>(this.active.find(c=>c.source==a)||new ts(a,this.active.some(c=>c.state!=0)?1:0)).update(e,s));r.length==this.active.length&&r.every((a,u)=>a==this.active[u])&&(r=this.active);let o=this.open,l=e.effects.some(a=>a.is(xp));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||r.some(a=>a.hasResult()&&e.changes.touchesRange(a.from,a.to))||!L8(r,this.active)||l?o=Or.build(r,t,this.id,o,s,l):o&&o.disabled&&!r.some(a=>a.isPending)&&(o=null),!o&&r.every(a=>!a.isPending)&&r.some(a=>a.hasResult())&&(r=r.map(a=>a.hasResult()?new ts(a.source,0):a));for(let a of e.effects)a.is(Cx)&&(o=o&&o.setSelected(a.value,this.id));return r==this.active&&o==this.open?this:new Hu(r,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?M8:I8}}function L8(n,e){if(n==e)return!0;for(let t=0,s=0;;){for(;t<n.length&&!n[t].hasResult();)t++;for(;s<e.length&&!e[s].hasResult();)s++;let i=t==n.length,r=s==e.length;if(i||r)return i==r;if(n[t++].result!=e[s++].result)return!1}}const M8={"aria-autocomplete":"list"},I8={};function uv(n,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":n};return e>-1&&(t["aria-activedescendant"]=n+"-"+e),t}const j8=[];function Sx(n,e){if(n.isUserEvent("input.complete")){let s=n.annotation(wx);if(s&&e.activateOnCompletion(s))return 12}let t=n.isUserEvent("input.type");return t&&e.activateOnTyping?5:t?1:n.isUserEvent("delete.backward")?2:n.selection?8:n.docChanged?16:0}class ts{constructor(e,t,s=!1){this.source=e,this.state=t,this.explicit=s}hasResult(){return!1}get isPending(){return this.state==1}update(e,t){let s=Sx(e,t),i=this;(s&8||s&16&&this.touches(e))&&(i=new ts(i.source,0)),s&4&&i.state==0&&(i=new ts(this.source,1)),i=i.updateFor(e,s);for(let r of e.effects)if(r.is(zu))i=new ts(i.source,1,r.value);else if(r.is(Ol))i=new ts(i.source,0);else if(r.is(xp))for(let o of r.value)o.source==i.source&&(i=o);return i}updateFor(e,t){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(ir(e.state))}}class Kr extends ts{constructor(e,t,s,i,r,o){super(e,3,t),this.limit=s,this.result=i,this.from=r,this.to=o}hasResult(){return!0}updateFor(e,t){var s;if(!(t&3))return this.map(e.changes);let i=this.result;i.map&&!e.changes.empty&&(i=i.map(i,e.changes));let r=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),l=ir(e.state);if(l>o||!i||t&2&&(ir(e.startState)==this.from||l<this.limit))return new ts(this.source,t&4?1:0);let a=e.changes.mapPos(this.limit);return V8(i.validFor,e.state,r,o)?new Kr(this.source,this.explicit,a,i,r,o):i.update&&(i=i.update(i,r,o,new xx(e.state,l,!1)))?new Kr(this.source,this.explicit,a,i,i.from,(s=i.to)!==null&&s!==void 0?s:ir(e.state)):new ts(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new Kr(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new ts(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function V8(n,e,t,s){if(!n)return!1;let i=e.sliceDoc(t,s);return typeof n=="function"?n(i,t,s,e):_x(n,!0).test(i)}const xp=Ze.define({map(n,e){return n.map(t=>t.map(e))}}),Cx=Ze.define(),jn=ln.define({create(){return Hu.start()},update(n,e){return n.update(e)},provide:n=>[sp.from(n,e=>e.tooltip),Oe.contentAttributes.from(n,e=>e.attrs)]});function _p(n,e){const t=e.completion.apply||e.completion.label;let s=n.state.field(jn).active.find(i=>i.source==e.source);return s instanceof Kr?(typeof t=="string"?n.dispatch({...w8(n.state,t,s.from,s.to),annotations:wx.of(e.completion)}):t(n,e.completion,s.from,s.to),!0):!1}const $8=P8(jn,_p);function Na(n,e="option"){return t=>{let s=t.state.field(jn,!1);if(!s||!s.open||s.open.disabled||Date.now()-s.open.timestamp<t.state.facet(Yt).interactionDelay)return!1;let i=1,r;e=="page"&&(r=ik(t,s.open.tooltip))&&(i=Math.max(2,Math.floor(r.dom.offsetHeight/r.dom.querySelector("li").offsetHeight)-1));let{length:o}=s.open.options,l=s.open.selected>-1?s.open.selected+i*(n?1:-1):n?0:o-1;return l<0?l=e=="page"?0:o-1:l>=o&&(l=e=="page"?o-1:0),t.dispatch({effects:Cx.of(l)}),!0}}const N8=n=>{let e=n.state.field(jn,!1);return n.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<n.state.facet(Yt).interactionDelay?!1:_p(n,e.open.options[e.open.selected])},Dd=n=>n.state.field(jn,!1)?(n.dispatch({effects:zu.of(!0)}),!0):!1,B8=n=>{let e=n.state.field(jn,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(n.dispatch({effects:Ol.of(null)}),!0)};class F8{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const U8=50,z8=1e3,H8=zt.fromClass(class{constructor(n){this.view=n,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of n.state.field(jn).active)e.isPending&&this.startQuery(e)}update(n){let e=n.state.field(jn),t=n.state.facet(Yt);if(!n.selectionSet&&!n.docChanged&&n.startState.field(jn)==e)return;let s=n.transactions.some(r=>{let o=Sx(r,t);return o&8||(r.selection||r.docChanged)&&!(o&3)});for(let r=0;r<this.running.length;r++){let o=this.running[r];if(s||o.context.abortOnDocChange&&n.docChanged||o.updates.length+n.transactions.length>U8&&Date.now()-o.time>z8){for(let l of o.context.abortListeners)try{l()}catch(a){Vn(this.view.state,a)}o.context.abortListeners=null,this.running.splice(r--,1)}else o.updates.push(...n.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),n.transactions.some(r=>r.effects.some(o=>o.is(zu)))&&(this.pendingStart=!0);let i=this.pendingStart?50:t.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(r=>r.isPending&&!this.running.some(o=>o.active.source==r.source))?setTimeout(()=>this.startUpdate(),i):-1,this.composing!=0)for(let r of n.transactions)r.isUserEvent("input.type")?this.composing=2:this.composing==2&&r.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:n}=this.view,e=n.field(jn);for(let t of e.active)t.isPending&&!this.running.some(s=>s.active.source==t.source)&&this.startQuery(t);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Yt).updateSyncTime))}startQuery(n){let{state:e}=this.view,t=ir(e),s=new xx(e,t,n.explicit,this.view),i=new F8(n,s);this.running.push(i),Promise.resolve(n.source(s)).then(r=>{i.context.aborted||(i.done=r||null,this.scheduleAccept())},r=>{this.view.dispatch({effects:Ol.of(null)}),Vn(this.view.state,r)})}scheduleAccept(){this.running.every(n=>n.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Yt).updateSyncTime))}accept(){var n;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(Yt),s=this.view.state.field(jn);for(let i=0;i<this.running.length;i++){let r=this.running[i];if(r.done===void 0)continue;if(this.running.splice(i--,1),r.done){let l=ir(r.updates.length?r.updates[0].startState:this.view.state),a=Math.min(l,r.done.from+(r.active.explicit?0:1)),u=new Kr(r.active.source,r.active.explicit,a,r.done,r.done.from,(n=r.done.to)!==null&&n!==void 0?n:l);for(let c of r.updates)u=u.update(c,t);if(u.hasResult()){e.push(u);continue}}let o=s.active.find(l=>l.source==r.active.source);if(o&&o.isPending)if(r.done==null){let l=new ts(r.active.source,0);for(let a of r.updates)l=l.update(a,t);l.isPending||e.push(l)}else this.startQuery(o)}(e.length||s.open&&s.open.disabled)&&this.view.dispatch({effects:xp.of(e)})}},{eventHandlers:{blur(n){let e=this.view.state.field(jn,!1);if(e&&e.tooltip&&this.view.state.facet(Yt).closeOnBlur){let t=e.open&&ik(this.view,e.open.tooltip);(!t||!t.dom.contains(n.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:Ol.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:zu.of(!1)}),20),this.composing=0}}}),W8=typeof navigator=="object"&&/Win/.test(navigator.platform),q8=gr.highest(Oe.domEventHandlers({keydown(n,e){let t=e.state.field(jn,!1);if(!t||!t.open||t.open.disabled||t.open.selected<0||n.key.length>1||n.ctrlKey&&!(W8&&n.altKey)||n.metaKey)return!1;let s=t.open.options[t.open.selected],i=t.active.find(o=>o.source==s.source),r=s.completion.commitCharacters||i.result.commitCharacters;return r&&r.indexOf(n.key)>-1&&_p(e,s),!1}})),G8=Oe.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),Ll={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},tr=Ze.define({map(n,e){let t=e.mapPos(n,-1,Dn.TrackAfter);return t??void 0}}),wp=new class extends ar{};wp.startSide=1;wp.endSide=-1;const Ax=ln.define({create(){return lt.empty},update(n,e){if(n=n.map(e.changes),e.selection){let t=e.state.doc.lineAt(e.selection.main.head);n=n.update({filter:s=>s>=t.from&&s<=t.to})}for(let t of e.effects)t.is(tr)&&(n=n.update({add:[wp.range(t.value,t.value+1)]}));return n}});function K8(){return[Q8,Ax]}const Pd="()[]{}<>";function Ex(n){for(let e=0;e<Pd.length;e+=2)if(Pd.charCodeAt(e)==n)return Pd.charAt(e+1);return Uh(n<128?n:n+1)}function Tx(n,e){return n.languageDataAt("closeBrackets",e)[0]||Ll}const J8=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),Q8=Oe.inputHandler.of((n,e,t,s)=>{if((J8?n.composing:n.compositionStarted)||n.state.readOnly)return!1;let i=n.state.selection.main;if(s.length>2||s.length==2&&Os(In(s,0))==1||e!=i.from||t!=i.to)return!1;let r=Z8(n.state,s);return r?(n.dispatch(r),!0):!1}),Y8=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let s=Tx(n,n.selection.main.head).brackets||Ll.brackets,i=null,r=n.changeByRange(o=>{if(o.empty){let l=eI(n.doc,o.head);for(let a of s)if(a==l&&Cc(n.doc,o.head)==Ex(In(a,0)))return{changes:{from:o.head-a.length,to:o.head+a.length},range:he.cursor(o.head-a.length)}}return{range:i=o}});return i||e(n.update(r,{scrollIntoView:!0,userEvent:"delete.backward"})),!i},X8=[{key:"Backspace",run:Y8}];function Z8(n,e){let t=Tx(n,n.selection.main.head),s=t.brackets||Ll.brackets;for(let i of s){let r=Ex(In(i,0));if(e==i)return r==i?sI(n,i,s.indexOf(i+i+i)>-1,t):tI(n,i,r,t.before||Ll.before);if(e==r&&Dx(n,n.selection.main.from))return nI(n,i,r)}return null}function Dx(n,e){let t=!1;return n.field(Ax).between(0,n.doc.length,s=>{s==e&&(t=!0)}),t}function Cc(n,e){let t=n.sliceString(e,e+2);return t.slice(0,Os(In(t,0)))}function eI(n,e){let t=n.sliceString(e-2,e);return Os(In(t,0))==t.length?t:t.slice(1)}function tI(n,e,t,s){let i=null,r=n.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:t,from:o.to}],effects:tr.of(o.to+e.length),range:he.range(o.anchor+e.length,o.head+e.length)};let l=Cc(n.doc,o.head);return!l||/\s/.test(l)||s.indexOf(l)>-1?{changes:{insert:e+t,from:o.head},effects:tr.of(o.head+e.length),range:he.cursor(o.head+e.length)}:{range:i=o}});return i?null:n.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function nI(n,e,t){let s=null,i=n.changeByRange(r=>r.empty&&Cc(n.doc,r.head)==t?{changes:{from:r.head,to:r.head+t.length,insert:t},range:he.cursor(r.head+t.length)}:s={range:r});return s?null:n.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function sI(n,e,t,s){let i=s.stringPrefixes||Ll.stringPrefixes,r=null,o=n.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:e,from:l.to}],effects:tr.of(l.to+e.length),range:he.range(l.anchor+e.length,l.head+e.length)};let a=l.head,u=Cc(n.doc,a),c;if(u==e){if(cv(n,a))return{changes:{insert:e+e,from:a},effects:tr.of(a+e.length),range:he.cursor(a+e.length)};if(Dx(n,a)){let f=t&&n.sliceDoc(a,a+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:a,to:a+f.length,insert:f},range:he.cursor(a+f.length)}}}else{if(t&&n.sliceDoc(a-2*e.length,a)==e+e&&(c=dv(n,a-2*e.length,i))>-1&&cv(n,c))return{changes:{insert:e+e+e+e,from:a},effects:tr.of(a+e.length),range:he.cursor(a+e.length)};if(n.charCategorizer(a)(u)!=Pt.Word&&dv(n,a,i)>-1&&!iI(n,a,e,i))return{changes:{insert:e+e,from:a},effects:tr.of(a+e.length),range:he.cursor(a+e.length)}}return{range:r=l}});return r?null:n.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function cv(n,e){let t=xn(n).resolveInner(e+1);return t.parent&&t.from==e}function iI(n,e,t,s){let i=xn(n).resolveInner(e,-1),r=s.reduce((o,l)=>Math.max(o,l.length),0);for(let o=0;o<5;o++){let l=n.sliceDoc(i.from,Math.min(i.to,i.from+t.length+r)),a=l.indexOf(t);if(!a||a>-1&&s.indexOf(l.slice(0,a))>-1){let c=i.firstChild;for(;c&&c.from==i.from&&c.to-c.from>t.length+a;){if(n.sliceDoc(c.to-t.length,c.to)==t)return!1;c=c.firstChild}return!0}let u=i.to==e&&i.parent;if(!u)break;i=u}return!1}function dv(n,e,t){let s=n.charCategorizer(e);if(s(n.sliceDoc(e-1,e))!=Pt.Word)return e;for(let i of t){let r=e-i.length;if(n.sliceDoc(r,e)==i&&s(n.sliceDoc(r-1,r))!=Pt.Word)return r}return-1}function rI(n={}){return[q8,jn,Yt.of(n),H8,oI,G8]}const Px=[{key:"Ctrl-Space",run:Dd},{mac:"Alt-`",run:Dd},{mac:"Alt-i",run:Dd},{key:"Escape",run:B8},{key:"ArrowDown",run:Na(!0)},{key:"ArrowUp",run:Na(!1)},{key:"PageDown",run:Na(!0,"page")},{key:"PageUp",run:Na(!1,"page")},{key:"Enter",run:N8}],oI=gr.highest(tp.computeN([Yt],n=>n.facet(Yt).defaultKeymap?[Px]:[]));class fv{constructor(e,t,s){this.from=e,this.to=t,this.diagnostic=s}}class Qi{constructor(e,t,s){this.diagnostics=e,this.panel=t,this.selected=s}static init(e,t,s){let i=s.facet(Ml).markerFilter;i&&(e=i(e,s));let r=e.slice().sort((p,g)=>p.from-g.from||p.to-g.to),o=new ti,l=[],a=0,u=s.doc.iter(),c=0,d=s.doc.length;for(let p=0;;){let g=p==r.length?null:r[p];if(!g&&!l.length)break;let b,x;if(l.length)b=a,x=l.reduce((P,U)=>Math.min(P,U.to),g&&g.from>b?g.from:1e8);else{if(b=g.from,b>d)break;x=g.to,l.push(g),p++}for(;p<r.length;){let P=r[p];if(P.from==b&&(P.to>P.from||P.to==b))l.push(P),p++,x=Math.min(P.to,x);else{x=Math.min(P.from,x);break}}x=Math.min(x,d);let m=!1;if(l.some(P=>P.from==b&&(P.to==x||x==d))&&(m=b==x,!m&&x-b<10)){let P=b-(c+u.value.length);P>0&&(u.next(P),c=b);for(let U=b;;){if(U>=x){m=!0;break}if(!u.lineBreak&&c+u.value.length>U)break;U=c+u.value.length,c+=u.value.length,u.next()}}let w=bI(l);if(m)o.add(b,b,ze.widget({widget:new mI(w),diagnostics:l.slice()}));else{let P=l.reduce((U,O)=>O.markClass?U+" "+O.markClass:U,"");o.add(b,x,ze.mark({class:"cm-lintRange cm-lintRange-"+w+P,diagnostics:l.slice(),inclusiveEnd:l.some(U=>U.to>x)}))}if(a=x,a==d)break;for(let P=0;P<l.length;P++)l[P].to<=a&&l.splice(P--,1)}let f=o.finish();return new Qi(f,t,oo(f))}}function oo(n,e=null,t=0){let s=null;return n.between(t,1e9,(i,r,{spec:o})=>{if(!(e&&o.diagnostics.indexOf(e)<0))if(!s)s=new fv(i,r,e||o.diagnostics[0]);else{if(o.diagnostics.indexOf(s.diagnostic)<0)return!1;s=new fv(s.from,r,s.diagnostic)}}),s}function lI(n,e){let t=e.pos,s=e.end||t,i=n.state.facet(Ml).hideOn(n,t,s);if(i!=null)return i;let r=n.startState.doc.lineAt(e.pos);return!!(n.effects.some(o=>o.is(Rx))||n.changes.touchesRange(r.from,Math.max(r.to,s)))}function aI(n,e){return n.field(Kn,!1)?e:e.concat(Ze.appendConfig.of(kI))}const Rx=Ze.define(),Sp=Ze.define(),Ox=Ze.define(),Kn=ln.define({create(){return new Qi(ze.none,null,null)},update(n,e){if(e.docChanged&&n.diagnostics.size){let t=n.diagnostics.map(e.changes),s=null,i=n.panel;if(n.selected){let r=e.changes.mapPos(n.selected.from,1);s=oo(t,n.selected.diagnostic,r)||oo(t,null,r)}!t.size&&i&&e.state.facet(Ml).autoPanel&&(i=null),n=new Qi(t,i,s)}for(let t of e.effects)if(t.is(Rx)){let s=e.state.facet(Ml).autoPanel?t.value.length?Il.open:null:n.panel;n=Qi.init(t.value,s,e.state)}else t.is(Sp)?n=new Qi(n.diagnostics,t.value?Il.open:null,n.selected):t.is(Ox)&&(n=new Qi(n.diagnostics,n.panel,t.value));return n},provide:n=>[Al.from(n,e=>e.panel),Oe.decorations.from(n,e=>e.diagnostics)]}),uI=ze.mark({class:"cm-lintRange cm-lintRange-active"});function cI(n,e,t){let{diagnostics:s}=n.state.field(Kn),i,r=-1,o=-1;s.between(e-(t<0?1:0),e+(t>0?1:0),(a,u,{spec:c})=>{if(e>=a&&e<=u&&(a==u||(e>a||t>0)&&(e<u||t<0)))return i=c.diagnostics,r=a,o=u,!1});let l=n.state.facet(Ml).tooltipFilter;return i&&l&&(i=l(i,n.state)),i?{pos:r,end:o,above:n.state.doc.lineAt(r).to<o,create(){return{dom:dI(n,i)}}}:null}function dI(n,e){return xt("ul",{class:"cm-tooltip-lint"},e.map(t=>Mx(n,t,!1)))}const fI=n=>{let e=n.state.field(Kn,!1);(!e||!e.panel)&&n.dispatch({effects:aI(n.state,[Sp.of(!0)])});let t=Cl(n,Il.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},hv=n=>{let e=n.state.field(Kn,!1);return!e||!e.panel?!1:(n.dispatch({effects:Sp.of(!1)}),!0)},hI=n=>{let e=n.state.field(Kn,!1);if(!e)return!1;let t=n.state.selection.main,s=e.diagnostics.iter(t.to+1);return!s.value&&(s=e.diagnostics.iter(0),!s.value||s.from==t.from&&s.to==t.to)?!1:(n.dispatch({selection:{anchor:s.from,head:s.to},scrollIntoView:!0}),!0)},pI=[{key:"Mod-Shift-m",run:fI,preventDefault:!0},{key:"F8",run:hI}],Ml=Le.define({combine(n){return{sources:n.map(e=>e.source).filter(e=>e!=null),...Ns(n.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:pv,tooltipFilter:pv,needsRefresh:(e,t)=>e?t?s=>e(s)||t(s):e:t,hideOn:(e,t)=>e?t?(s,i,r)=>e(s,i,r)||t(s,i,r):e:t,autoPanel:(e,t)=>e||t})}}});function pv(n,e){return n?e?(t,s)=>e(n(t,s),s):n:e}function Lx(n){let e=[];if(n)e:for(let{name:t}of n){for(let s=0;s<t.length;s++){let i=t[s];if(/[a-zA-Z]/.test(i)&&!e.some(r=>r.toLowerCase()==i.toLowerCase())){e.push(i);continue e}}e.push("")}return e}function Mx(n,e,t){var s;let i=t?Lx(e.actions):[];return xt("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},xt("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(n):e.message),(s=e.actions)===null||s===void 0?void 0:s.map((r,o)=>{let l=!1,a=p=>{if(p.preventDefault(),l)return;l=!0;let g=oo(n.state.field(Kn).diagnostics,e);g&&r.apply(n,g.from,g.to)},{name:u}=r,c=i[o]?u.indexOf(i[o]):-1,d=c<0?u:[u.slice(0,c),xt("u",u.slice(c,c+1)),u.slice(c+1)],f=r.markClass?" "+r.markClass:"";return xt("button",{type:"button",class:"cm-diagnosticAction"+f,onclick:a,onmousedown:a,"aria-label":` Action: ${u}${c<0?"":` (access key "${i[o]})"`}.`},d)}),e.source&&xt("div",{class:"cm-diagnosticSource"},e.source))}class mI extends Li{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return xt("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class mv{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=Mx(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Il{constructor(e){this.view=e,this.items=[];let t=i=>{if(i.keyCode==27)hv(this.view),this.view.focus();else if(i.keyCode==38||i.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(i.keyCode==40||i.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(i.keyCode==36)this.moveSelection(0);else if(i.keyCode==35)this.moveSelection(this.items.length-1);else if(i.keyCode==13)this.view.focus();else if(i.keyCode>=65&&i.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:r}=this.items[this.selectedIndex],o=Lx(r.actions);for(let l=0;l<o.length;l++)if(o[l].toUpperCase().charCodeAt(0)==i.keyCode){let a=oo(this.view.state.field(Kn).diagnostics,r);a&&r.actions[l].apply(e,a.from,a.to)}}else return;i.preventDefault()},s=i=>{for(let r=0;r<this.items.length;r++)this.items[r].dom.contains(i.target)&&this.moveSelection(r)};this.list=xt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:s}),this.dom=xt("div",{class:"cm-panel-lint"},this.list,xt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>hv(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(Kn).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(Kn),s=0,i=!1,r=null,o=new Set;for(e.between(0,this.view.state.doc.length,(l,a,{spec:u})=>{for(let c of u.diagnostics){if(o.has(c))continue;o.add(c);let d=-1,f;for(let p=s;p<this.items.length;p++)if(this.items[p].diagnostic==c){d=p;break}d<0?(f=new mv(this.view,c),this.items.splice(s,0,f),i=!0):(f=this.items[d],d>s&&(this.items.splice(s,d-s),i=!0)),t&&f.diagnostic==t.diagnostic?f.dom.hasAttribute("aria-selected")||(f.dom.setAttribute("aria-selected","true"),r=f):f.dom.hasAttribute("aria-selected")&&f.dom.removeAttribute("aria-selected"),s++}});s<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();this.items.length==0&&(this.items.push(new mv(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),r?(this.list.setAttribute("aria-activedescendant",r.id),this.view.requestMeasure({key:this,read:()=>({sel:r.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:l,panel:a})=>{let u=a.height/this.list.offsetHeight;l.top<a.top?this.list.scrollTop-=(a.top-l.top)/u:l.bottom>a.bottom&&(this.list.scrollTop+=(l.bottom-a.bottom)/u)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function t(){let s=e;e=s.nextSibling,s.remove()}for(let s of this.items)if(s.dom.parentNode==this.list){for(;e!=s.dom;)t();e=s.dom.nextSibling}else this.list.insertBefore(s.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(Kn),s=oo(t.diagnostics,this.items[e].diagnostic);s&&this.view.dispatch({selection:{anchor:s.from,head:s.to},scrollIntoView:!0,effects:Ox.of(s)})}static open(e){return new Il(e)}}function gI(n,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(n)}</svg>')`}function Ba(n){return gI(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${n}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const vI=Oe.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Ba("#d11")},".cm-lintRange-warning":{backgroundImage:Ba("orange")},".cm-lintRange-info":{backgroundImage:Ba("#999")},".cm-lintRange-hint":{backgroundImage:Ba("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function yI(n){return n=="error"?4:n=="warning"?3:n=="info"?2:1}function bI(n){let e="hint",t=1;for(let s of n){let i=yI(s.severity);i>t&&(t=i,e=s.severity)}return e}const kI=[Kn,Oe.decorations.compute([Kn],n=>{let{selected:e,panel:t}=n.field(Kn);return!e||!t||e.from==e.to?ze.none:ze.set([uI.range(e.from,e.to)])}),oO(cI,{hideOn:lI}),vI],xI=[vO(),kO(),VR(),UL(),dL(),AR(),RR(),ot.allowMultipleSelections.of(!0),YO(),Ck(mL,{fallback:!0}),_L(),K8(),rI(),JR(),XR(),zR(),XM(),tp.of([...X8,...qM,...v8,...YL,...lL,...Px,...pI])],_I={class:"rounded-lg border border-gray-300 overflow-hidden dark:border-gray-600"},Ac={__name:"CodeEditor",props:{modelValue:{type:String,default:""},language:{type:String,default:"r",validator:n=>["r","markdown","text","gitignore"].includes(n)},minHeight:{type:String,default:"400px"},autoGrow:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:""}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,s=e,i=Y(null);let r=null;const o=dp.define({token(u){return u.sol()&&u.match(/^#/)?(u.skipToEnd(),"comment"):(u.skipToEnd(),null)}}),l=Ck(Kl.define([{tag:Te.comment,color:"#16a34a"}])),a=()=>[o,l];return kn(()=>{if(!i.value)return;const u=Oe.updateListener.of(p=>{p.docChanged&&s("update:modelValue",p.state.doc.toString())}),c={"&":{fontSize:"13px",fontFamily:'ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, "Liberation Mono", monospace'},".cm-scroller":{fontFamily:'ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, "Liberation Mono", monospace'},".cm-content":{padding:"12px 0"},".cm-line":{padding:"0 12px"}};t.autoGrow||(c["&"].minHeight=t.minHeight);const d=[xI,a(),u,Oe.lineWrapping,Oe.theme(c)],f=ot.create({doc:t.modelValue||"",extensions:d});r=new Oe({state:f,parent:i.value})}),Ie(()=>t.modelValue,u=>{r&&u!==r.state.doc.toString()&&r.dispatch({changes:{from:0,to:r.state.doc.length,insert:u}})}),(u,c)=>(v(),k("div",_I,[h("div",{ref_key:"editorRef",ref:i},null,512)]))}},wI={class:"relative"},SI={key:0,class:"absolute z-10 mt-1 w-full max-h-64 overflow-y-auto border border-gray-200 dark:border-gray-700 rounded-md bg-white dark:bg-gray-800 shadow-lg"},CI=["onClick","onMouseenter"],AI={class:"flex items-center justify-between gap-3"},EI={class:"flex-1 min-w-0"},TI={class:"font-medium text-gray-900 dark:text-white"},DI={class:"text-xs text-gray-500 dark:text-gray-400 truncate"},PI={class:"ml-3 text-xs text-gray-400 dark:text-gray-500 shrink-0 flex items-center gap-1.5"},RI={class:"text-[10px] font-medium"},OI={key:1,class:"absolute right-3 top-9 text-gray-400"},LI={__name:"PackageAutocomplete",props:{modelValue:{type:String,default:""},label:{type:String,default:"Search Packages"},placeholder:{type:String,default:"Type to search..."},source:{type:String,default:"cran",validator:n=>["cran","bioconductor","github"].includes(n)}},emits:["update:modelValue","select"],setup(n,{emit:e}){const t=n,s=e,i=z({get:()=>t.modelValue,set:f=>s("update:modelValue",f)}),r=Y([]),o=Y(!1),l=Y(-1);let a=null;Ie(i,f=>{if(a&&clearTimeout(a),f.length<2){r.value=[],l.value=-1;return}a=setTimeout(()=>{u(f)},300)});const u=async f=>{o.value=!0;try{const g=await(await fetch(`/api/packages/search?q=${encodeURIComponent(f)}&source=${encodeURIComponent(t.source)}`)).json();r.value=g.packages||[],l.value=r.value.length>0?0:-1}catch(p){console.error("Failed to search packages:",p),r.value=[],l.value=-1}finally{o.value=!1}},c=f=>{r.value.length!==0&&(f.key==="ArrowDown"?(f.preventDefault(),l.value=Math.min(l.value+1,r.value.length-1)):f.key==="ArrowUp"?(f.preventDefault(),l.value=Math.max(l.value-1,0)):f.key==="Enter"&&l.value>=0?(f.preventDefault(),d(r.value[l.value])):f.key==="Escape"&&(r.value=[],l.value=-1))},d=f=>{s("update:modelValue",f.name),s("select",f),r.value=[],l.value=-1};return(f,p)=>(v(),k("div",wI,[C(Ce,{modelValue:i.value,"onUpdate:modelValue":p[0]||(p[0]=g=>i.value=g),label:n.label,placeholder:n.placeholder,onKeydown:c},null,8,["modelValue","label","placeholder"]),r.value.length>0?(v(),k("div",SI,[(v(!0),k(xe,null,Ve(r.value,(g,b)=>(v(),k("button",{key:g.name,onClick:x=>d(g),onMouseenter:x=>l.value=b,class:we(["w-full px-3 py-2 text-left border-b border-gray-200 dark:border-gray-700 last:border-b-0 transition",l.value===b?"bg-sky-50 dark:bg-sky-900/20":"hover:bg-gray-50 dark:hover:bg-gray-700"])},[h("div",AI,[h("div",EI,[h("div",TI,X(g.name),1),h("div",DI,X(g.title),1)]),h("div",PI,[h("span",RI,X(g.source==="cran"?"CRAN":g.source==="bioconductor"?"Bioconductor":g.source),1),p[1]||(p[1]=h("span",null,"",-1)),h("span",null,"v"+X(g.version),1)])])],42,CI))),128))])):q("",!0),o.value?(v(),k("div",OI,[...p[2]||(p[2]=[h("svg",{class:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[h("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),h("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):q("",!0)]))}},MI={class:"flex items-center justify-between"},II={class:"flex-1"},jI={class:"text-xs text-gray-500 dark:text-gray-400 mb-1"},VI={class:"text-sm text-gray-900 dark:text-white"},$I={__name:"OverviewCard",props:{title:{type:String,required:!0}},emits:["click"],setup(n){return(e,t)=>(v(),k("button",{onClick:t[0]||(t[0]=s=>e.$emit("click")),class:"w-full text-left px-4 py-3 rounded-md bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 hover:border-sky-300 dark:hover:border-sky-700 transition"},[h("div",MI,[h("div",II,[h("div",jI,X(n.title),1),h("div",VI,[pt(e.$slots,"default")])]),t[1]||(t[1]=h("svg",{class:"h-5 w-5 text-gray-400 shrink-0 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))])]))}},NI={class:"space-y-3"},BI=["innerHTML"],Cp={__name:"OverviewSummary",props:{cards:{type:Array,required:!0}},emits:["navigate"],setup(n){return(e,t)=>(v(),k("div",NI,[(v(!0),k(xe,null,Ve(n.cards,s=>(v(),Ee($I,{key:s.id,title:s.title,onClick:i=>e.$emit("navigate",s.section)},{default:te(()=>[typeof s.content=="object"?(v(),Ee(Nn(s.content),{key:0})):(v(),k("span",{key:1,innerHTML:s.content},null,8,BI))]),_:2},1032,["title","onClick"]))),128))]))}},FI={class:"pt-4 pb-2"},UI={class:"px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider dark:text-gray-400"},Wu={__name:"NavigationSectionHeading",setup(n){return(e,t)=>(v(),k("div",FI,[h("h3",UI,[pt(e.$slots,"default")])]))}},zI={class:"rounded-lg bg-gray-50 dark:bg-gray-800/50"},HI={class:"space-y-5"},WI={class:"pt-4 border-t border-gray-200 dark:border-gray-700"},qI={class:"space-y-4"},Ap={__name:"AuthorInformationPanel",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,s=e,i=Y({name:t.modelValue.name??"",email:t.modelValue.email??"",affiliation:t.modelValue.affiliation??"",github_username:t.modelValue.github_username??"",github_email:t.modelValue.github_email??""});Ie(()=>t.modelValue,o=>{i.value={name:o.name??"",email:o.email??"",affiliation:o.affiliation??"",github_username:o.github_username??"",github_email:o.github_email??""}},{deep:!0});const r=(o,l)=>{i.value[o]=l,s("update:modelValue",{...i.value})};return(o,l)=>(v(),k("div",zI,[l[6]||(l[6]=h("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-2"}," Author Information ",-1)),l[7]||(l[7]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-5"}," Used as defaults when creating notebook author settings and similar tasks. ",-1)),h("div",HI,[C(Ce,{"model-value":i.value.name,"onUpdate:modelValue":l[0]||(l[0]=a=>r("name",a)),label:"Your Name",placeholder:"Your Name"},null,8,["model-value"]),C(Ce,{"model-value":i.value.email,"onUpdate:modelValue":l[1]||(l[1]=a=>r("email",a)),type:"email",label:"Email",placeholder:"your.email@example.com"},null,8,["model-value"]),C(Ce,{"model-value":i.value.affiliation,"onUpdate:modelValue":l[2]||(l[2]=a=>r("affiliation",a)),label:"Affiliation",placeholder:"Organization"},null,8,["model-value"]),h("div",WI,[l[5]||(l[5]=h("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"GitHub",-1)),h("div",qI,[C(Ce,{"model-value":i.value.github_username,"onUpdate:modelValue":l[3]||(l[3]=a=>r("github_username",a)),label:"GitHub Username",placeholder:"username"},null,8,["model-value"]),C(Ce,{"model-value":i.value.github_email,"onUpdate:modelValue":l[4]||(l[4]=a=>r("github_email",a)),type:"email",label:"GitHub Email",placeholder:"username@users.noreply.github.com",hint:"For git commits (often different from primary email)"},null,8,["model-value"])])])])]))}},GI={class:"space-y-6"},KI={key:0,class:"space-y-3"},JI={class:"flex flex-col gap-3"},QI={class:"grid gap-3 grid-cols-[1fr_160px]"},YI={class:"flex items-center justify-between"},XI={key:1,class:"text-xs text-gray-500 dark:text-gray-400 mb-4"},ZI={class:"mt-4"},Ep={__name:"PackagesEditor",props:{modelValue:{type:Object,required:!0},showRenvToggle:{type:Boolean,default:!0},flush:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,s=z(()=>t.flush?"":"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"),i=z(()=>t.flush?"":"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"),r=e,o=Y({use_renv:t.modelValue.use_renv??!1,default_packages:t.modelValue.default_packages??[]});Ie(()=>t.modelValue,g=>{o.value={use_renv:g.use_renv??!1,default_packages:g.default_packages??[]}},{deep:!0});const l=()=>{r("update:modelValue",{...o.value})},a=g=>{o.value.use_renv=g,l()},u=(g,b)=>{o.value.default_packages[g].name=b,l()},c=(g,b)=>{o.value.default_packages[g].source=b,l()},d=(g,b)=>{o.value.default_packages[g].auto_attach=b,l()},f=()=>{o.value.default_packages.push({name:"",source:"cran",auto_attach:!0}),l()},p=g=>{o.value.default_packages.splice(g,1),l()};return(g,b)=>(v(),k("div",GI,[n.showRenvToggle?(v(),k("div",{key:0,class:we(s.value)},[C(Qe,{"model-value":o.value.use_renv,"onUpdate:modelValue":a,label:"Enable renv",description:"Create renv environments for new projects."},null,8,["model-value"])],2)):q("",!0),h("div",{class:we(i.value)},[b[3]||(b[3]=h("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-2"}," Default packages ",-1)),b[4]||(b[4]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Installed (and optionally attached) when scaffold() runs. ",-1)),b[5]||(b[5]=h("p",{class:"text-xs text-gray-600 dark:text-gray-400 mb-4"}," Use this list to preseed notebooks with your preferred helpers. ",-1)),o.value.default_packages&&o.value.default_packages.length?(v(),k("div",KI,[(v(!0),k(xe,null,Ve(o.value.default_packages,(x,m)=>(v(),k("div",{key:`pkg-${m}`,class:"rounded-md border border-gray-200 p-4 dark:border-gray-700"},[h("div",JI,[h("div",QI,[x.source==="cran"||x.source==="bioconductor"?(v(),Ee(LI,{key:0,"model-value":x.name,"onUpdate:modelValue":w=>u(m,w),source:x.source,label:"Package",placeholder:x.source==="cran"?"Search CRAN...":"Search Bioconductor...",onSelect:w=>u(m,w.name)},null,8,["model-value","onUpdate:modelValue","source","placeholder","onSelect"])):(v(),Ee(Ce,{key:1,"model-value":x.name,"onUpdate:modelValue":w=>u(m,w),label:"Package",placeholder:"user/repo"},null,8,["model-value","onUpdate:modelValue"])),C(pn,{"model-value":x.source,"onUpdate:modelValue":w=>c(m,w),label:"Source"},{default:te(()=>[...b[0]||(b[0]=[h("option",{value:"cran"},"CRAN",-1),h("option",{value:"github"},"GitHub",-1),h("option",{value:"bioconductor"},"Bioconductor",-1)])]),_:1},8,["model-value","onUpdate:modelValue"])]),h("div",YI,[C(Qe,{"model-value":x.auto_attach,"onUpdate:modelValue":w=>d(m,w),label:"Auto-Attach",description:"Call library() when scaffold() runs."},null,8,["model-value","onUpdate:modelValue"]),C(Ye,{size:"sm",variant:"secondary",onClick:w=>p(m)},{default:te(()=>[...b[1]||(b[1]=[fe("Remove",-1)])]),_:1},8,["onClick"])])])]))),128))])):(v(),k("p",XI," No packages configured. Add packages to include tidyverse helpers or internal utilities automatically. ")),h("div",ZI,[C(Ye,{size:"sm",variant:"secondary",onClick:f},{default:te(()=>[...b[2]||(b[2]=[fe("Add Package",-1)])]),_:1})])],2)]))}},ej={class:"space-y-6"},tj={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},nj={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},sj={class:"space-y-2"},ij={key:0,class:"pt-6 border-t border-gray-200 dark:border-gray-700"},rj={class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},oj={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-2"},Tp={__name:"AIAssistantsPanel",props:{modelValue:{type:Object,required:!0},flush:{type:Boolean,default:!1},showEditor:{type:Boolean,default:!0},editorHeight:{type:String,default:"500px"},editorDisabled:{type:Boolean,default:!1},editorLoading:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,s=e,i=Y(Math.random().toString(36).substring(7)),r=[{id:"claude",label:"Claude Code",description:"Anthropic's IDE-focused assistant."},{id:"copilot",label:"GitHub Copilot",description:"Complements VS Code and JetBrains editors."},{id:"agents",label:"Multi-Agent (OpenAI Codex, Cursor, etc.)",description:"Shared instructions for multi-model orchestrators."}],o=()=>({enabled:t.modelValue?.enabled??!1,canonical_file:t.modelValue?.canonical_file??"CLAUDE.md",assistants:Array.isArray(t.modelValue?.assistants)?t.modelValue.assistants:[],canonical_content:t.modelValue?.canonical_content??""}),l=z(()=>t.flush?"space-y-6":"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 space-y-6"),a=z(o),u=d=>{const f=o(),p=d.assistants!==void 0?d.assistants:f.assistants;s("update:modelValue",{...f,...d,assistants:p})},c=(d,f)=>{const p=[...a.value.assistants];if(f)p.includes(d)||p.push(d);else{const g=p.indexOf(d);g!==-1&&p.splice(g,1)}u({assistants:p})};return(d,f)=>(v(),k("div",{class:we(l.value)},[h("div",ej,[h("div",null,[C(Qe,{"model-value":a.value.enabled,label:"Enable AI Support",description:"Generate and sync assistant-specific context files.","onUpdate:modelValue":f[0]||(f[0]=p=>u({enabled:p}))},null,8,["model-value"])]),a.value.enabled?(v(),k(xe,{key:0},[h("div",tj,[f[4]||(f[4]=h("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Canonical context file",-1)),f[5]||(f[5]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," This file is the source of truth; other instructions files are synced to it when AI hooks run. ",-1)),C(pn,{"model-value":a.value.canonical_file,label:"Canonical Context File","onUpdate:modelValue":f[1]||(f[1]=p=>u({canonical_file:p}))},{default:te(()=>[...f[3]||(f[3]=[h("option",{value:"AGENTS.md"},"AGENTS.md (multi-agent orchestrator)",-1),h("option",{value:"CLAUDE.md"},"CLAUDE.md",-1),h("option",{value:".github/copilot-instructions.md"},".github/copilot-instructions.md",-1)])]),_:1},8,["model-value"])]),h("div",nj,[f[6]||(f[6]=h("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Assistants",-1)),f[7]||(f[7]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Choose which assistants receive context updates. ",-1)),h("div",sj,[(v(),k(xe,null,Ve(r,p=>C(Ys,{key:p.id,id:`ai-${p.id}-${i.value}`,"model-value":a.value.assistants.includes(p.id),"onUpdate:modelValue":g=>c(p.id,g),description:p.description},{default:te(()=>[fe(X(p.label),1)]),_:2},1032,["id","model-value","onUpdate:modelValue","description"])),64))])]),n.showEditor?(v(),k("div",ij,[f[9]||(f[9]=h("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Canonical instructions",-1)),h("p",rj,[pt(d.$slots,"editor-description",{},()=>[f[8]||(f[8]=fe(" Edit the canonical file directly. Framework mirrors this content to other assistant files. ",-1))])]),pt(d.$slots,"editor-alert"),C(Ac,{"model-value":a.value.canonical_content,language:"markdown","min-height":n.editorHeight,disabled:n.editorDisabled,"onUpdate:modelValue":f[2]||(f[2]=p=>u({canonical_content:p}))},null,8,["model-value","min-height","disabled"]),pt(d.$slots,"editor-actions"),n.editorLoading?(v(),k("p",oj," Loading "+X(a.value.canonical_file)+" ",1)):q("",!0)])):q("",!0)],64)):q("",!0)])],2))}},lj={class:"space-y-3"},aj={class:"grid gap-4 sm:grid-cols-2"},uj={class:"space-y-3"},cj={class:"space-y-4"},dj={class:"text-xs text-gray-500 dark:text-gray-400"},Dp={__name:"GitHooksPanel",props:{modelValue:{type:Object,required:!0},flush:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,s=e,i=()=>({initialize:t.modelValue?.initialize??!0,user_name:t.modelValue?.user_name??"",user_email:t.modelValue?.user_email??"",hooks:{ai_sync:t.modelValue?.hooks?.ai_sync??!1,data_security:t.modelValue?.hooks?.data_security??!1,check_sensitive_dirs:t.modelValue?.hooks?.check_sensitive_dirs??!1}}),r=z(()=>t.flush?"space-y-6":"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 space-y-6"),o=z(i),l=u=>{const c=i(),d={...c.hooks,...u?.hooks||{}};s("update:modelValue",{...c,...u,hooks:d})},a=(u,c)=>{l({hooks:{[u]:c}})};return(u,c)=>(v(),k("div",{class:we(r.value)},[C(Qe,{"model-value":o.value.initialize,label:"Initialize Git",description:"Run git init for every new project.","onUpdate:modelValue":c[0]||(c[0]=d=>l({initialize:d}))},null,8,["model-value"]),h("div",lj,[c[6]||(c[6]=h("div",null,[h("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"Git identity"),h("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Overrides Author Information when provided. ")],-1)),h("div",aj,[C(Ce,{"model-value":o.value.user_name,label:"Git Name",placeholder:"Jane Analyst",disabled:!o.value.initialize,"onUpdate:modelValue":c[1]||(c[1]=d=>l({user_name:d}))},null,8,["model-value","disabled"]),C(Ce,{"model-value":o.value.user_email,label:"Git Email",placeholder:"jane@example.com",hint:"Used for git config user.email during project setup.",disabled:!o.value.initialize,"onUpdate:modelValue":c[2]||(c[2]=d=>l({user_email:d}))},null,8,["model-value","disabled"])])]),h("div",uj,[c[8]||(c[8]=h("div",null,[h("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"Git Hooks"),h("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Pre-commit hooks that run automatically before each commit. ")],-1)),h("div",cj,[C(Qe,{"model-value":o.value.hooks.ai_sync,label:"Sync AI Files Before Commit",description:"Update non-canonical files so assistants share the same instructions.",disabled:!o.value.initialize,"onUpdate:modelValue":c[3]||(c[3]=d=>a("ai_sync",d))},null,8,["model-value","disabled"]),C(Qe,{"model-value":o.value.hooks.data_security,label:"Check for Secrets",description:"Run a lightweight scan for API keys and credentials before commits.",disabled:!o.value.initialize,"onUpdate:modelValue":c[4]||(c[4]=d=>a("data_security",d))},null,8,["model-value","disabled"]),C(Qe,{"model-value":o.value.hooks.check_sensitive_dirs,label:"Warn About Unignored Sensitive Directories",description:"Block commits if directories with sensitive names aren't gitignored.",disabled:!o.value.initialize,"onUpdate:modelValue":c[5]||(c[5]=d=>a("check_sensitive_dirs",d))},null,8,["model-value","disabled"])]),h("p",dj,[pt(u.$slots,"note",{},()=>[c[7]||(c[7]=fe(" Project-specific .gitignore templates can be customized in Project Defaults. ",-1))])])])],2))}},fj={class:"space-y-5"},Pp={__name:"ScaffoldBehaviorPanel",props:{modelValue:{type:Object,required:!0},flush:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,s=e,i=(u,c="")=>u==null?c:typeof u=="number"||typeof u=="string"?String(u):c,r=()=>({source_all_functions:t.modelValue?.source_all_functions??!0,set_theme_on_scaffold:t.modelValue?.set_theme_on_scaffold??!1,ggplot_theme:t.modelValue?.ggplot_theme??"theme_minimal",seed_on_scaffold:t.modelValue?.seed_on_scaffold??!1,seed:i(t.modelValue?.seed,"123")}),o=z(r),l=z(()=>t.flush?"space-y-5":"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 space-y-5"),a=u=>{const c=r();s("update:modelValue",{...c,...u})};return(u,c)=>(v(),k("div",{class:we(l.value)},[h("div",fj,[h("div",null,[c[5]||(c[5]=h("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Auto-Load Functions",-1)),C(Qe,{"model-value":o.value.source_all_functions,label:"Source all R files from functions/ directory",description:"Automatically loads all helper functions when scaffold() runs","onUpdate:modelValue":c[0]||(c[0]=d=>a({source_all_functions:d}))},null,8,["model-value"])]),h("div",null,[c[7]||(c[7]=h("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"ggplot2 Theme",-1)),C(Qe,{"model-value":o.value.set_theme_on_scaffold,label:"Set ggplot2 theme when scaffold() runs",description:"Automatically sets ggplot2 theme for consistent plot styling","onUpdate:modelValue":c[1]||(c[1]=d=>a({set_theme_on_scaffold:d}))},null,8,["model-value"]),o.value.set_theme_on_scaffold?(v(),Ee(pn,{key:0,"model-value":o.value.ggplot_theme,label:"Theme",class:"mt-4","onUpdate:modelValue":c[2]||(c[2]=d=>a({ggplot_theme:d}))},{default:te(()=>[...c[6]||(c[6]=[h("option",{value:""},"None",-1),h("option",{value:"theme_minimal"},"Minimal",-1),h("option",{value:"theme_bw"},"Black & White",-1),h("option",{value:"theme_classic"},"Classic",-1),h("option",{value:"theme_gray"},"Gray (default)",-1),h("option",{value:"theme_light"},"Light",-1),h("option",{value:"theme_dark"},"Dark",-1),h("option",{value:"theme_void"},"Void",-1)])]),_:1},8,["model-value"])):q("",!0)]),h("div",null,[c[8]||(c[8]=h("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Random Seed",-1)),C(Qe,{"model-value":o.value.seed_on_scaffold,label:"Set random seed when scaffold() runs",description:"Ensures deterministic behavior for reproducibility","onUpdate:modelValue":c[3]||(c[3]=d=>a({seed_on_scaffold:d}))},null,8,["model-value"]),o.value.seed_on_scaffold?(v(),Ee(Ce,{key:0,"model-value":o.value.seed,label:"Seed Value",placeholder:"e.g., 1234 or 20241107",hint:"Leave empty to use global default",class:"mt-4","onUpdate:modelValue":c[4]||(c[4]=d=>a({seed:d}))},null,8,["model-value"])):q("",!0)])])],2))}},hj={class:"space-y-6"},pj={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},mj={class:"mb-4 rounded-md border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900 p-4"},gj={class:"flex items-center justify-between mb-3"},vj={class:"flex items-center gap-2"},yj={class:"space-y-3"},bj={class:"grid grid-cols-2 gap-3"},kj={class:"flex items-center gap-2"},xj=["id","checked","onChange"],_j=["for"],wj={key:0},Sj={key:1,class:"space-y-3"},Cj={class:"grid grid-cols-2 gap-3"},Aj={class:"grid grid-cols-2 gap-3"},Ej={class:"grid grid-cols-2 gap-3"},Tj={key:2,class:"space-y-3"},Dj={class:"grid grid-cols-2 gap-3"},Pj={class:"grid grid-cols-2 gap-3"},Rj={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},Oj={class:"space-y-3"},Lj={class:"flex items-center gap-2"},Mj=["id","checked","onChange"],Ij=["for"],jj={class:"grid grid-cols-2 gap-3"},Vj={class:"grid grid-cols-2 gap-3"},Rp={__name:"ConnectionsPanel",props:{databaseConnections:{type:Array,required:!0},s3Connections:{type:Array,required:!0},defaultDatabase:{type:String,default:null},defaultStorageBucket:{type:String,default:null}},emits:["update:databaseConnections","update:s3Connections","update:defaultDatabase","update:defaultStorageBucket"],setup(n){const e=n,t=(l,a)=>!l||l.trim()===""?"Connection name is required":l==="framework_db"?"framework_db is reserved for system use":e.databaseConnections.findIndex((d,f)=>f!==a&&d.name===l)!==-1?"Connection name must be unique":e.s3Connections.findIndex(d=>d.name===l)!==-1?"Connection name must be unique across all connections":null,s=(l,a)=>!l||l.trim()===""?"Connection name is required":l==="framework_db"?"framework_db is reserved for system use":e.s3Connections.findIndex((d,f)=>f!==a&&d.name===l)!==-1?"Connection name must be unique":e.databaseConnections.findIndex(d=>d.name===l)!==-1?"Connection name must be unique across all connections":null,i=(l,a)=>{let u=1,c=l;for(;a.includes(c)||c==="framework_db";)u+=1,c=`${l}_${u}`;return c},r=()=>{const l=e.databaseConnections.map(f=>f.name);let a="postgres",u="database";l.some(f=>f.startsWith("postgres"))?l.some(f=>f.startsWith("mysql"))?l.some(f=>f.startsWith("sqlserver"))||(a="sqlserver",u="sqlserver"):(a="mysql",u="mysql"):(a="postgres",u="postgres");const c=i(u,l),d={_id:Date.now(),name:c,driver:a};return a==="postgres"?{...d,host:'env("POSTGRES_HOST", "localhost")',port:'env("POSTGRES_PORT", "5432")',database:'env("POSTGRES_DB", "mydb")',schema:'env("POSTGRES_SCHEMA", "public")',user:'env("POSTGRES_USER", "postgres")',password:'env("POSTGRES_PASSWORD", "")'}:a==="mysql"?{...d,host:'env("MYSQL_HOST", "localhost")',port:'env("MYSQL_PORT", "3306")',database:'env("MYSQL_DB", "mydb")',user:'env("MYSQL_USER", "root")',password:'env("MYSQL_PASSWORD", "")'}:a==="sqlserver"?{...d,host:'env("SQLSERVER_HOST", "localhost")',port:'env("SQLSERVER_PORT", "1433")',database:'env("SQLSERVER_DB", "mydb")',user:'env("SQLSERVER_USER", "sa")',password:'env("SQLSERVER_PASSWORD", "")'}:d},o=()=>({_id:Date.now(),name:i("s3_bucket",e.s3Connections.map(l=>l.name)),bucket:'env("S3_BUCKET", "my-bucket")',region:'env("S3_REGION", "us-east-1")',endpoint:'env("S3_ENDPOINT", "")',access_key:'env("S3_ACCESS_KEY", "")',secret_key:'env("S3_SECRET_KEY", "")',static_hosting:!1});return(l,a)=>(v(),k("div",hj,[h("div",pj,[a[7]||(a[7]=h("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Databases",-1)),h("div",mj,[h("div",gj,[h("div",vj,[C(hc,{variant:"gray",size:"sm"},{default:te(()=>[...a[2]||(a[2]=[fe("System",-1)])]),_:1}),a[3]||(a[3]=h("span",{class:"text-sm font-medium text-gray-900 dark:text-gray-100 font-mono"},"framework_db",-1))]),a[4]||(a[4]=h("span",{class:"text-xs text-gray-500 dark:text-gray-400"},"SQLite - Framework metadata",-1))]),a[5]||(a[5]=h("div",{class:"text-sm text-gray-600 dark:text-gray-400 font-mono"}," framework.db ",-1))]),C(Zi,{"model-value":n.databaseConnections,"onUpdate:modelValue":a[0]||(a[0]=u=>l.$emit("update:databaseConnections",u)),"add-label":"Add Database","default-item":r},{default:te(({item:u,index:c,update:d})=>[h("div",yj,[h("div",bj,[C(Ce,{"model-value":u.name,"onUpdate:modelValue":f=>d("name",f),label:"Connection Name",error:t(u.name,c),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),C(pn,{"model-value":u.driver,"onUpdate:modelValue":f=>d("driver",f),label:"Driver",size:"sm"},{default:te(()=>[...a[6]||(a[6]=[h("option",{value:"sqlite"},"SQLite",-1),h("option",{value:"postgres"},"PostgreSQL",-1),h("option",{value:"mysql"},"MySQL",-1),h("option",{value:"sqlserver"},"SQL Server",-1)])]),_:1},8,["model-value","onUpdate:modelValue"])]),h("div",kj,[h("input",{type:"radio",id:`default-db-${u._id}`,checked:n.defaultDatabase===u.name,onChange:f=>l.$emit("update:defaultDatabase",u.name),class:"h-4 w-4 text-sky-600 focus:ring-sky-500"},null,40,xj),h("label",{for:`default-db-${u._id}`,class:"text-sm text-gray-700 dark:text-gray-300"}," Default database ",8,_j)]),u.driver==="sqlite"?(v(),k("div",wj,[C(Ce,{"model-value":u.database,"onUpdate:modelValue":f=>d("database",f),label:"Database Path",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])):u.driver==="postgres"||u.driver==="postgresql"?(v(),k("div",Sj,[h("div",Cj,[C(Ce,{"model-value":u.host,"onUpdate:modelValue":f=>d("host",f),label:"Host",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),C(Ce,{"model-value":u.port,"onUpdate:modelValue":f=>d("port",f),label:"Port",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])]),h("div",Aj,[C(Ce,{"model-value":u.database,"onUpdate:modelValue":f=>d("database",f),label:"Database",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),C(Ce,{"model-value":u.schema,"onUpdate:modelValue":f=>d("schema",f),label:"Schema",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])]),h("div",Ej,[C(Ce,{"model-value":u.user,"onUpdate:modelValue":f=>d("user",f),label:"User",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),C(Ce,{"model-value":u.password,"onUpdate:modelValue":f=>d("password",f),label:"Password",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])])):u.driver==="mysql"||u.driver==="sqlserver"?(v(),k("div",Tj,[h("div",Dj,[C(Ce,{"model-value":u.host,"onUpdate:modelValue":f=>d("host",f),label:"Host",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),C(Ce,{"model-value":u.port,"onUpdate:modelValue":f=>d("port",f),label:"Port",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])]),C(Ce,{"model-value":u.database,"onUpdate:modelValue":f=>d("database",f),label:"Database",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),h("div",Pj,[C(Ce,{"model-value":u.user,"onUpdate:modelValue":f=>d("user",f),label:"User",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),C(Ce,{"model-value":u.password,"onUpdate:modelValue":f=>d("password",f),label:"Password",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])])):q("",!0)])]),_:1},8,["model-value"])]),h("div",Rj,[a[9]||(a[9]=h("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"S3-compatible Storage",-1)),C(Zi,{"model-value":n.s3Connections,"onUpdate:modelValue":a[1]||(a[1]=u=>l.$emit("update:s3Connections",u)),"add-label":"Add Bucket","default-item":o},{default:te(({item:u,index:c,update:d})=>[h("div",Oj,[C(Ce,{"model-value":u.name,"onUpdate:modelValue":f=>d("name",f),label:"Connection Name",error:s(u.name,c),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),h("div",Lj,[h("input",{type:"radio",id:`default-s3-${u._id}`,checked:n.defaultStorageBucket===u.name,onChange:f=>l.$emit("update:defaultStorageBucket",u.name),class:"h-4 w-4 text-sky-600 focus:ring-sky-500"},null,40,Mj),h("label",{for:`default-s3-${u._id}`,class:"text-sm text-gray-700 dark:text-gray-300"}," Default storage bucket ",8,Ij)]),h("div",jj,[C(Ce,{"model-value":u.bucket,"onUpdate:modelValue":f=>d("bucket",f),label:"Bucket",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),C(Ce,{"model-value":u.region,"onUpdate:modelValue":f=>d("region",f),label:"Region",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])]),h("div",Vj,[C(Ce,{"model-value":u.access_key,"onUpdate:modelValue":f=>d("access_key",f),label:"Access Key",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),C(Ce,{"model-value":u.secret_key,"onUpdate:modelValue":f=>d("secret_key",f),label:"Secret Key",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])]),C(Ce,{"model-value":u.endpoint,"onUpdate:modelValue":f=>d("endpoint",f),label:"Endpoint",hint:"Leave empty for AWS S3, or specify custom endpoint for MinIO, etc.",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),C(Ys,{"model-value":u.static_hosting,"onUpdate:modelValue":f=>d("static_hosting",f),id:"static-hosting",description:"Enable for S3 static website hosting, R2 public buckets, or CDN-fronted storage. Allows clean URLs like /report/ instead of /report.html"},{default:te(()=>[...a[8]||(a[8]=[fe(" Static website hosting ",-1)])]),_:1},8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value"])])]))}},$j={class:"space-y-6"},Nj={class:"space-y-4"},Bj={class:"space-y-4"},Op={__name:"QuartoSettingsPanel",props:{modelValue:{type:Object,required:!0},flush:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,s=e,i=z(()=>t.flush?"":"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"),r=Y({html:{format:"html",embed_resources:t.modelValue.html?.embed_resources??!0,theme:t.modelValue.html?.theme??"default",toc:t.modelValue.html?.toc??!0,toc_depth:t.modelValue.html?.toc_depth??3,code_fold:t.modelValue.html?.code_fold??!1,code_tools:t.modelValue.html?.code_tools??!1,highlight_style:t.modelValue.html?.highlight_style??"github"},revealjs:{format:"revealjs",theme:t.modelValue.revealjs?.theme??"default",incremental:t.modelValue.revealjs?.incremental??!1,slide_number:t.modelValue.revealjs?.slide_number??!0,transition:t.modelValue.revealjs?.transition??"slide",background_transition:t.modelValue.revealjs?.background_transition??"fade",controls:t.modelValue.revealjs?.controls??!0,progress:t.modelValue.revealjs?.progress??!0,center:t.modelValue.revealjs?.center??!0,highlight_style:t.modelValue.revealjs?.highlight_style??"github"}});Ie(()=>t.modelValue,l=>{r.value={html:{format:"html",embed_resources:l.html?.embed_resources??!0,theme:l.html?.theme??"default",toc:l.html?.toc??!0,toc_depth:l.html?.toc_depth??3,code_fold:l.html?.code_fold??!1,code_tools:l.html?.code_tools??!1,highlight_style:l.html?.highlight_style??"github"},revealjs:{format:"revealjs",theme:l.revealjs?.theme??"default",incremental:l.revealjs?.incremental??!1,slide_number:l.revealjs?.slide_number??!0,transition:l.revealjs?.transition??"slide",background_transition:l.revealjs?.background_transition??"fade",controls:l.revealjs?.controls??!0,progress:l.revealjs?.progress??!0,center:l.revealjs?.center??!0,highlight_style:l.revealjs?.highlight_style??"github"}}},{deep:!0});const o=(l,a,u)=>{r.value[l][a]=u,s("update:modelValue",{...r.value})};return(l,a)=>(v(),k("div",$j,[h("div",{class:we(i.value)},[a[18]||(a[18]=h("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-2"}," HTML Rendering ",-1)),a[19]||(a[19]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Default settings for HTML documents (notebooks, documentation). ",-1)),h("div",Nj,[C(pn,{"model-value":r.value.html.theme,"onUpdate:modelValue":a[0]||(a[0]=u=>o("html","theme",u)),label:"Theme"},{default:te(()=>[...a[16]||(a[16]=[h("option",{value:"default"},"Default",-1),h("option",{value:"cosmo"},"Cosmo",-1),h("option",{value:"cerulean"},"Cerulean",-1),h("option",{value:"flatly"},"Flatly",-1),h("option",{value:"journal"},"Journal",-1),h("option",{value:"lumen"},"Lumen",-1),h("option",{value:"minty"},"Minty",-1),h("option",{value:"pulse"},"Pulse",-1),h("option",{value:"sandstone"},"Sandstone",-1),h("option",{value:"simplex"},"Simplex",-1),h("option",{value:"sketchy"},"Sketchy",-1),h("option",{value:"slate"},"Slate",-1),h("option",{value:"solar"},"Solar",-1),h("option",{value:"spacelab"},"Spacelab",-1),h("option",{value:"superhero"},"Superhero",-1),h("option",{value:"united"},"United",-1),h("option",{value:"yeti"},"Yeti",-1)])]),_:1},8,["model-value"]),C(Qe,{"model-value":r.value.html.embed_resources,"onUpdate:modelValue":a[1]||(a[1]=u=>o("html","embed_resources",u)),label:"Embed resources",description:"Produce standalone HTML files with all dependencies and resources embedded."},null,8,["model-value"]),C(Qe,{"model-value":r.value.html.toc,"onUpdate:modelValue":a[2]||(a[2]=u=>o("html","toc",u)),label:"Table of contents",description:"Generate a table of contents sidebar."},null,8,["model-value"]),C(Ce,{type:"number","model-value":r.value.html.toc_depth,"onUpdate:modelValue":a[3]||(a[3]=u=>o("html","toc_depth",parseInt(u)||3)),label:"TOC depth",min:"1",max:"5"},null,8,["model-value"]),C(Qe,{"model-value":r.value.html.code_fold,"onUpdate:modelValue":a[4]||(a[4]=u=>o("html","code_fold",u)),label:"Code folding",description:"Allow readers to collapse/expand code blocks."},null,8,["model-value"]),C(Qe,{"model-value":r.value.html.code_tools,"onUpdate:modelValue":a[5]||(a[5]=u=>o("html","code_tools",u)),label:"Code tools",description:"Provide code download and viewing options."},null,8,["model-value"]),C(pn,{"model-value":r.value.html.highlight_style,"onUpdate:modelValue":a[6]||(a[6]=u=>o("html","highlight_style",u)),label:"Syntax highlighting"},{default:te(()=>[...a[17]||(a[17]=[h("option",{value:"github"},"GitHub",-1),h("option",{value:"tango"},"Tango",-1),h("option",{value:"pygments"},"Pygments",-1),h("option",{value:"kate"},"Kate",-1),h("option",{value:"monochrome"},"Monochrome",-1),h("option",{value:"espresso"},"Espresso",-1),h("option",{value:"zenburn"},"Zenburn",-1),h("option",{value:"haddock"},"Haddock",-1),h("option",{value:"breezedark"},"Breeze Dark",-1)])]),_:1},8,["model-value"])])],2),h("div",{class:we(i.value)},[a[24]||(a[24]=h("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-2"}," Presentations (revealjs) ",-1)),a[25]||(a[25]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Default settings for slide presentations. ",-1)),h("div",Bj,[C(pn,{"model-value":r.value.revealjs.theme,"onUpdate:modelValue":a[7]||(a[7]=u=>o("revealjs","theme",u)),label:"Theme"},{default:te(()=>[...a[20]||(a[20]=[h("option",{value:"default"},"Default",-1),h("option",{value:"beige"},"Beige",-1),h("option",{value:"black"},"Black",-1),h("option",{value:"blood"},"Blood",-1),h("option",{value:"league"},"League",-1),h("option",{value:"moon"},"Moon",-1),h("option",{value:"night"},"Night",-1),h("option",{value:"serif"},"Serif",-1),h("option",{value:"simple"},"Simple",-1),h("option",{value:"sky"},"Sky",-1),h("option",{value:"solarized"},"Solarized",-1),h("option",{value:"white"},"White",-1)])]),_:1},8,["model-value"]),C(Qe,{"model-value":r.value.revealjs.incremental,"onUpdate:modelValue":a[8]||(a[8]=u=>o("revealjs","incremental",u)),label:"Incremental bullets",description:"Reveal list items one at a time."},null,8,["model-value"]),C(Qe,{"model-value":r.value.revealjs.slide_number,"onUpdate:modelValue":a[9]||(a[9]=u=>o("revealjs","slide_number",u)),label:"Slide numbers",description:"Show slide numbers in the corner."},null,8,["model-value"]),C(Qe,{"model-value":r.value.revealjs.controls,"onUpdate:modelValue":a[10]||(a[10]=u=>o("revealjs","controls",u)),label:"Navigation controls",description:"Show arrow controls for navigation."},null,8,["model-value"]),C(Qe,{"model-value":r.value.revealjs.progress,"onUpdate:modelValue":a[11]||(a[11]=u=>o("revealjs","progress",u)),label:"Progress bar",description:"Show progress bar at the bottom."},null,8,["model-value"]),C(Qe,{"model-value":r.value.revealjs.center,"onUpdate:modelValue":a[12]||(a[12]=u=>o("revealjs","center",u)),label:"Center slides",description:"Vertically center slide content."},null,8,["model-value"]),C(pn,{"model-value":r.value.revealjs.transition,"onUpdate:modelValue":a[13]||(a[13]=u=>o("revealjs","transition",u)),label:"Slide transition"},{default:te(()=>[...a[21]||(a[21]=[h("option",{value:"none"},"None",-1),h("option",{value:"fade"},"Fade",-1),h("option",{value:"slide"},"Slide",-1),h("option",{value:"convex"},"Convex",-1),h("option",{value:"concave"},"Concave",-1),h("option",{value:"zoom"},"Zoom",-1)])]),_:1},8,["model-value"]),C(pn,{"model-value":r.value.revealjs.background_transition,"onUpdate:modelValue":a[14]||(a[14]=u=>o("revealjs","background_transition",u)),label:"Background transition"},{default:te(()=>[...a[22]||(a[22]=[h("option",{value:"none"},"None",-1),h("option",{value:"fade"},"Fade",-1),h("option",{value:"slide"},"Slide",-1),h("option",{value:"convex"},"Convex",-1),h("option",{value:"concave"},"Concave",-1),h("option",{value:"zoom"},"Zoom",-1)])]),_:1},8,["model-value"]),C(pn,{"model-value":r.value.revealjs.highlight_style,"onUpdate:modelValue":a[15]||(a[15]=u=>o("revealjs","highlight_style",u)),label:"Syntax highlighting"},{default:te(()=>[...a[23]||(a[23]=[h("option",{value:"github"},"GitHub",-1),h("option",{value:"tango"},"Tango",-1),h("option",{value:"pygments"},"Pygments",-1),h("option",{value:"kate"},"Kate",-1),h("option",{value:"monochrome"},"Monochrome",-1),h("option",{value:"espresso"},"Espresso",-1),h("option",{value:"zenburn"},"Zenburn",-1),h("option",{value:"haddock"},"Haddock",-1),h("option",{value:"breezedark"},"Breeze Dark",-1)])]),_:1},8,["model-value"])])],2)]))}},Fj={key:0,class:"space-y-2"},Uj={key:0,class:"text-lg font-semibold text-gray-900 dark:text-white"},zj={key:1,class:"text-sm text-gray-600 dark:text-gray-400"},Hj={class:"space-y-6"},dn={__name:"SettingsPanel",props:{title:{type:String,default:""},description:{type:String,default:""},flush:{type:Boolean,default:!1}},setup(n){return(e,t)=>(v(),k("section",{class:we(["space-y-6",n.flush?"":"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"])},[n.title||n.description?(v(),k("header",Fj,[n.title?(v(),k("h2",Uj,X(n.title),1)):q("",!0),n.description?(v(),k("p",zj,X(n.description),1)):q("",!0)])):q("",!0),h("div",Hj,[pt(e.$slots,"default")]),e.$slots.actions?(v(),k("div",{key:1,class:we(["flex justify-end",n.flush?"":"pt-4 border-t border-gray-200 dark:border-gray-700"])},[pt(e.$slots,"actions")],2)):q("",!0)],2))}},Wj={class:"space-y-3"},qj={key:0,class:"space-y-1"},Gj={key:0,class:"text-sm font-semibold text-gray-900 dark:text-white"},Kj={key:1,class:"text-xs text-gray-600 dark:text-gray-400"},Jj={class:"space-y-3"},lh={__name:"SettingsBlock",props:{title:{type:String,default:""},description:{type:String,default:""}},setup(n){return(e,t)=>(v(),k("div",Wj,[n.title||n.description?(v(),k("div",qj,[n.title?(v(),k("h3",Gj,X(n.title),1)):q("",!0),n.description?(v(),k("p",Kj,X(n.description),1)):q("",!0)])):q("",!0),h("div",Jj,[pt(e.$slots,"default")])]))}},Qj={class:"space-y-5"},Yj={key:0,class:"grid grid-cols-2 gap-3"},Xj={key:0,class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},Zj={class:"grid grid-cols-2 gap-3"},eV={__name:"CourseDirectoriesPanel",props:{directoriesEnabled:{type:Object,required:!0},directories:{type:Object,required:!0},renderDirs:{type:Object,default:()=>({})},catalog:{type:Object,default:()=>({})},extraDirectoriesEnabled:{type:Object,default:()=>({})},extraDirectories:{type:Array,default:()=>[]},projectCustomDirectories:{type:Array,default:()=>[]},allowCustomDirectories:{type:Boolean,default:!1},flush:{type:Boolean,default:!1}},emits:["update:directoriesEnabled","update:directories","update:renderDirs","update:extraDirectoriesEnabled","update:projectCustomDirectories"],setup(n,{emit:e}){const t=n,s=e,i=Y(Math.random().toString(36).substring(7)),r=["slides","assignments","course_docs","notebooks"],o=["readings","data"],l=["functions","scripts"],a=z(()=>t.flush?"":"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"),u=A=>A in t.directoriesEnabled?t.directoriesEnabled[A]:t.catalog?.directories?.[A]?.enabled_by_default??!1,c=(A,_)=>{s("update:directoriesEnabled",{...t.directoriesEnabled,[A]:_})},d=A=>t.directories[A]||"",f=(A,_)=>{s("update:directories",{...t.directories,[A]:_})},p=A=>{const _=A==="notebooks"?"modules":A;return t.renderDirs[_]?t.renderDirs[_]:t.catalog?.render_dirs?.[_]?.default||""},g=(A,_)=>{const M=A==="notebooks"?"modules":A;s("update:renderDirs",{...t.renderDirs,[M]:_})},b=A=>{if(!t.catalog||typeof t.catalog!="object")return"";const _=A==="notebooks"?"modules":A;return(t.catalog.render_dirs||{})[_]?.default||`rendered/${_}`},x=A=>!t.catalog||typeof t.catalog!="object"?A.charAt(0).toUpperCase()+A.slice(1):(t.catalog.directories||{})[A]?.label||A.charAt(0).toUpperCase()+A.slice(1),m=A=>!t.catalog||typeof t.catalog!="object"?"":(t.catalog.directories||{})[A]?.hint||"",w=A=>!t.catalog||typeof t.catalog!="object"?A:(t.catalog.directories||{})[A]?.default||A,P=A=>t.extraDirectoriesEnabled[A]??!1,U=(A,_)=>{s("update:extraDirectoriesEnabled",{...t.extraDirectoriesEnabled,[A]:_})},O=(A,_)=>{console.warn("Extra directory paths are managed in global settings")};return(A,_)=>(v(),k("div",{class:we(a.value)},[_[3]||(_[3]=h("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"},"Materials",-1)),_[4]||(_[4]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Slides, assignments, readings, and course documentation with automatic rendering to web-ready formats. ",-1)),h("div",Qj,[(v(),k(xe,null,Ve(r,M=>h("div",{key:M},[C(Qe,{id:`course-${M}-${i.value}`,"model-value":u(M),"onUpdate:modelValue":W=>c(M,W),label:x(M),description:m(M),class:"mb-2"},null,8,["id","model-value","onUpdate:modelValue","label","description"]),u(M)?(v(),k("div",Yj,[C(Ce,{"model-value":d(M),"onUpdate:modelValue":W=>f(M,W),placeholder:w(M),label:"Source files",prefix:"/",monospace:""},null,8,["model-value","onUpdate:modelValue","placeholder"]),C(Ce,{"model-value":p(M),"onUpdate:modelValue":W=>g(M,W),placeholder:b(M),label:"Quarto render directory",prefix:"/",monospace:""},null,8,["model-value","onUpdate:modelValue","placeholder"])])):q("",!0)])),64)),(v(),k(xe,null,Ve(o,M=>h("div",{key:M},[C(Qe,{id:`course-${M}-${i.value}`,"model-value":u(M),"onUpdate:modelValue":W=>c(M,W),label:x(M),description:m(M),class:"mb-2"},null,8,["id","model-value","onUpdate:modelValue","label","description"]),u(M)?(v(),Ee(Ce,{key:0,"model-value":d(M),"onUpdate:modelValue":W=>f(M,W),placeholder:w(M),prefix:"/",monospace:""},null,8,["model-value","onUpdate:modelValue","placeholder"])):q("",!0)])),64)),(v(),k(xe,null,Ve(l,M=>h("div",{key:M},[C(Qe,{id:`course-${M}-${i.value}`,"model-value":u(M),"onUpdate:modelValue":W=>c(M,W),label:x(M),description:m(M),class:"mb-2"},null,8,["id","model-value","onUpdate:modelValue","label","description"]),u(M)?(v(),Ee(Ce,{key:0,"model-value":d(M),"onUpdate:modelValue":W=>f(M,W),placeholder:w(M),prefix:"/",monospace:""},null,8,["model-value","onUpdate:modelValue","placeholder"])):q("",!0)])),64)),(v(!0),k(xe,null,Ve(n.extraDirectories,M=>(v(),k("div",{key:`extra-${M.key}`,class:"space-y-1.5"},[C(Qe,{id:`extra-course-${M.key}-${i.value}`,"model-value":P(M.key),"onUpdate:modelValue":W=>U(M.key,W),label:M.label,description:`Custom: ${M.path}`,class:"mb-2"},null,8,["id","model-value","onUpdate:modelValue","label","description"]),P(M.key)?(v(),Ee(Ce,{key:0,"model-value":M.path,"onUpdate:modelValue":W=>O(M.key),placeholder:M.path,prefix:"/",monospace:"",readonly:""},null,8,["model-value","onUpdate:modelValue","placeholder"])):q("",!0)]))),128))]),n.allowCustomDirectories?(v(),k("div",Xj,[_[1]||(_[1]=h("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"}," Add Custom Course Directories ",-1)),_[2]||(_[2]=h("p",{class:"text-xs text-gray-600 dark:text-gray-400 mb-3"}," Add directories specific to this course only. ",-1)),C(Zi,{"model-value":n.projectCustomDirectories,"onUpdate:modelValue":_[0]||(_[0]=M=>A.$emit("update:projectCustomDirectories",M)),"add-label":"Add Course Directory","default-item":()=>({key:"",label:"",path:"",type:"course",_id:Date.now()})},{default:te(({item:M,index:W,update:ue})=>[h("div",Zj,[C(Ce,{"model-value":M.key,"onUpdate:modelValue":ee=>ue("key",ee),label:"Key",placeholder:"e.g., course_videos",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),C(Ce,{"model-value":M.label,"onUpdate:modelValue":ee=>ue("label",ee),label:"Label",placeholder:"e.g., Videos",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),C(Ce,{"model-value":M.path,"onUpdate:modelValue":ee=>ue("path",ee),label:"Path",placeholder:"e.g., videos",prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])):q("",!0)],2))}},tV={class:"space-y-6"},nV={class:"space-y-5"},sV=["value"],iV={class:"flex flex-wrap items-center justify-between gap-3"},rV={class:"flex flex-wrap gap-2 text-xs font-medium text-gray-600 dark:text-gray-400"},oV={key:1,id:"section-primary-files"},lV={class:"space-y-4"},aV={key:2,id:"section-optional-directories"},uV={class:"space-y-4"},cV={class:"space-y-2"},dV={class:"space-y-2"},fV={class:"space-y-2"},hV={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},pV={key:0,class:"space-y-3 mb-4"},mV={class:"space-y-3"},gV={key:3,id:"section-materials"},vV={key:4,id:"section-inputs"},yV={key:0},bV={class:"space-y-5"},kV={key:0,class:"text-sm text-gray-500 dark:text-gray-400 mb-2"},xV={class:"grid gap-4 sm:grid-cols-2"},_V={class:"space-y-2"},wV={class:"space-y-2"},SV={key:1,class:"space-y-5"},CV={key:2,class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},AV={key:0,class:"space-y-3 mb-4"},EV={class:"space-y-3"},TV={key:5,id:"section-workspaces"},DV={class:"space-y-5"},PV={key:0,class:"grid grid-cols-2 gap-3"},RV={key:0,class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},OV={key:0,class:"space-y-3 mb-4"},LV={class:"space-y-3"},MV={key:6,id:"section-outputs"},IV={key:0},jV={class:"space-y-5"},VV={key:0,class:"text-sm text-gray-500 dark:text-gray-400 mb-2"},$V={class:"grid gap-4 sm:grid-cols-2"},NV={class:"space-y-2"},BV={class:"space-y-2"},FV={key:1,class:"space-y-5"},UV={key:2,class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},zV={key:0,class:"space-y-3 mb-4"},HV={class:"space-y-3"},WV={key:7,id:"section-utility"},qV={class:"space-y-5"},GV={id:"section-gitignore"},Lp={__name:"ProjectStructureEditor",props:{projectType:{type:String,required:!0},directories:{type:Object,required:!0},renderDirs:{type:Object,default:()=>({})},enabled:{type:Object,required:!0},extraDirectories:{type:Array,default:()=>[]},settings:{type:Object,default:()=>({})},gitignore:{type:String,default:""},catalog:{type:Object,required:!0},newExtraIds:{type:Set,default:()=>new Set},disabled:{type:Boolean,default:!1},allowDestruction:{type:Boolean,default:!0}},emits:["update:directories","update:renderDirs","update:enabled","update:extraDirectories","update:settings","update:gitignore","update:newExtraIds","reset"],setup(n,{emit:e}){const t=n,s=e,i=Y({...t.directories}),r=Y({...t.renderDirs}),o=Y({...t.enabled}),l=Y({...t.settings}),a=Y(t.gitignore),u=ne=>i.value[ne]?i.value[ne]:t.catalog?.directories?.[ne]?.default||"",c=ne=>r.value[ne]?r.value[ne]:t.catalog?.render_dirs?.[ne]?.default||"";Ie(()=>t.directories,ne=>{i.value={...ne}},{deep:!0}),Ie(()=>t.renderDirs,ne=>{r.value={...ne}},{deep:!0}),Ie(()=>t.enabled,ne=>{o.value={...ne}},{deep:!0}),Ie(()=>t.settings,ne=>{l.value={...ne}},{deep:!0}),Ie(()=>t.gitignore,ne=>{a.value=ne}),Ie(()=>t.extraDirectories,ne=>{if(ne.some(E=>E.label&&!E.key)){const E=[...t.catalog?.directories?Object.keys(t.catalog.directories):[],...ne.filter(T=>T.key).map(T=>T.key)],re=ne.map(T=>{if(T.label&&!T.key){const N=ve(T.label,E);return E.push(N),console.log("[DEBUG] Auto-generated key:",{label:T.label,key:N}),{...T,key:N}}return T});s("update:extraDirectories",re)}},{deep:!0});const d=[{key:"notebooks",label:"Notebooks",hint:"Quarto or R Markdown notebooks for analysis.",defaultRenderDir:"outputs/notebooks"},{key:"docs",label:"Documentation",hint:"Codebooks, documentation, and other reference materials.",defaultRenderDir:"outputs/docs"}],f=[{key:"functions",label:"Functions",hint:"R files here are sourced by scaffold(), so helper functions are available in every project session."},{key:"scripts",label:"Scripts",hint:"Reusable R scripts, job runners, or automation tasks."}],p=[{key:"inputs_raw",label:"Raw data",hint:"Read-only exports from source systems."},{key:"inputs_intermediate",label:"Intermediate data",hint:"Data after light cleaning or pre-processing steps."},{key:"inputs_final",label:"Analysis-ready data",hint:"Final inputs ready for modeling or reporting."}],g=[{key:"outputs_tables",label:"Tables",hint:"Publishable tables ready for reports or manuscripts."},{key:"outputs_figures",label:"Figures",hint:"Final plots and graphics."},{key:"outputs_models",label:"Models",hint:"Serialized models or model summaries."},{key:"outputs_reports",label:"Reports",hint:"Final reports and deliverables ready for publication."}],b=[{key:"scratch",label:"Scratch",hint:"Short-lived explorations (gitignored)."}],x=ne=>t.catalog?.directories?.[ne]||{},m=ne=>ne.map(K=>{const E=x(K.key),re=t.catalog?.render_dirs?.[K.key]||{};return{key:K.key,label:E.label||K.label,hint:E.hint||K.hint||"",defaultRenderDir:re.default||K.defaultRenderDir||""}}),w=z(()=>t.projectType==="project_sensitive"),P=z(()=>t.projectType==="presentation"),U=z(()=>t.projectType==="course"),O=(ne,K)=>ne.map(E=>{const re=`${K}_private_${E.key.replace(K+"_","")}`,T=`${K}_public_${E.key.replace(K+"_","")}`,N=x(re),G=x(T);return{privateKey:re,publicKey:T,privateLabel:N.label||`${E.label} (private)`,publicLabel:G.label||`${E.label} (public)`,hint:E.hint||""}}),A=z(()=>m(d)),_=z(()=>m(f)),M=z(()=>[...A.value,..._.value]),W=z(()=>w.value?O(p,"inputs"):m(p)),ue=z(()=>w.value?O(g,"outputs"):m(g)),ee=z(()=>m(b)),F=z(()=>t.catalog?.settings||[]),ae=z(()=>t.extraDirectories.filter(ne=>ne.type==="input"&&!t.newExtraIds.has(ne._id))),Z=z(()=>t.extraDirectories.filter(ne=>ne.type==="workspace"&&!t.newExtraIds.has(ne._id))),B=z(()=>t.extraDirectories.filter(ne=>ne.type==="output"&&!t.newExtraIds.has(ne._id))),J=z(()=>t.extraDirectories.filter(ne=>ne.type==="input"&&t.newExtraIds.has(ne._id))),Q=z(()=>t.extraDirectories.filter(ne=>ne.type==="workspace"&&t.newExtraIds.has(ne._id))),ce=z(()=>t.extraDirectories.filter(ne=>ne.type==="output"&&t.newExtraIds.has(ne._id))),ve=(ne,K=[])=>{if(!ne)return"";let E=ne.toLowerCase().trim().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,"").replace(/_+/g,"_").replace(/^_|_$/g,""),re=E,T=2;for(;K.includes(re);)re=`${E}_${T}`,T++;return re},je=(ne,K)=>{i.value[ne]=K,s("update:directories",{...i.value})},$e=(ne,K)=>{r.value[ne]=K,s("update:renderDirs",{...r.value})},Me=(ne,K)=>{!t.allowDestruction&&o.value[ne]===!0&&K===!1||(o.value[ne]=K,s("update:enabled",{...o.value}))},We=ne=>!!(t.disabled||!t.allowDestruction&&o.value[ne]===!0),ct=(ne,K)=>{l.value[ne]=K,s("update:settings",{...l.value})},rt=(ne,K)=>{const E=t.extraDirectories.map(re=>re.key===ne?{...re,path:K}:re);s("update:extraDirectories",E)},tt=(ne,K)=>{console.log("[DEBUG] updateNewExtras called:",{type:ne,newItems:JSON.parse(JSON.stringify(K)),itemCount:K.length});const E=t.extraDirectories.filter(ie=>ie.type===ne&&!t.newExtraIds.has(ie._id)),T=t.extraDirectories.filter(ie=>ie.type===ne&&t.newExtraIds.has(ie._id)).filter(ie=>!K.some(be=>be._id===ie._id)),N=new Set(t.newExtraIds);T.forEach(ie=>{ie._id&&N.delete(ie._id)}),K.forEach(ie=>{ie._id&&N.add(ie._id)}),s("update:newExtraIds",N);const G={...o.value};let le=!1;K.forEach(ie=>{if(ie.key){const be=E.some(j=>j.key===ie.key),L=t.catalog?.directories&&Object.keys(t.catalog.directories).includes(ie.key);!G.hasOwnProperty(ie.key)&&!be&&!L&&(G[ie.key]=!0,le=!0)}}),le&&s("update:enabled",G);const se=t.extraDirectories.filter(ie=>ie.type!==ne);s("update:extraDirectories",[...se,...E,...K])},oe=ne=>{const K=document.getElementById(`section-${ne}`);K&&K.scrollIntoView({behavior:"smooth",block:"start"})};return(ne,K)=>(v(),k("div",tV,[F.value.length>0?(v(),Ee(dn,{key:0,title:"Project Settings",description:"Default settings applied when creating new projects of this type."},{default:te(()=>[C(lh,null,{default:te(()=>[h("div",nV,[(v(!0),k(xe,null,Ve(F.value,E=>(v(),k(xe,{key:E.id},[E.control==="toggle"?(v(),Ee(Qe,{key:0,"model-value":l.value[E.id],"onUpdate:modelValue":re=>ct(E.id,re),label:E.label,description:E.description,disabled:n.disabled},null,8,["model-value","onUpdate:modelValue","label","description","disabled"])):E.control==="select"?(v(),Ee(pn,{key:1,"model-value":l.value[E.id],"onUpdate:modelValue":re=>ct(E.id,re),label:E.label,hint:E.hint},{default:te(()=>[(v(!0),k(xe,null,Ve(E.options,re=>(v(),k("option",{key:re.value,value:re.value},X(re.label),9,sV))),128))]),_:2},1032,["model-value","onUpdate:modelValue","label","hint"])):E.control==="text"?(v(),Ee(Ce,{key:2,"model-value":l.value[E.id],"onUpdate:modelValue":re=>ct(E.id,re),label:E.label,hint:E.hint,placeholder:E.placeholder},null,8,["model-value","onUpdate:modelValue","label","hint","placeholder"])):q("",!0)],64))),128))])]),_:1})]),_:1})):q("",!0),h("div",iV,[h("div",rV,[P.value?(v(),k("button",{key:0,type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:K[0]||(K[0]=E=>oe("primary-files"))}," Primary Files ")):q("",!0),P.value?(v(),k("button",{key:1,type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:K[1]||(K[1]=E=>oe("optional-directories"))}," Optional Directories ")):q("",!0),U.value?(v(),k("button",{key:2,type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:K[2]||(K[2]=E=>oe("materials"))}," Materials ")):q("",!0),!P.value&&!U.value&&W.value.length>0?(v(),k("button",{key:3,type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:K[3]||(K[3]=E=>oe("inputs"))}," Inputs ")):q("",!0),!P.value&&!U.value&&M.value.length>0?(v(),k("button",{key:4,type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:K[4]||(K[4]=E=>oe("workspaces"))}," Workspaces ")):q("",!0),!P.value&&!U.value&&ue.value.length>0?(v(),k("button",{key:5,type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:K[5]||(K[5]=E=>oe("outputs"))}," Outputs ")):q("",!0),!P.value&&!U.value&&ee.value.length>0?(v(),k("button",{key:6,type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:K[6]||(K[6]=E=>oe("utility"))}," Utility ")):q("",!0),h("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:K[7]||(K[7]=E=>oe("gitignore"))}," .gitignore ")]),!n.disabled&&n.allowDestruction?(v(),Ee(Ye,{key:0,variant:"secondary",size:"sm",class:"mt-3 sm:mt-0",onClick:K[8]||(K[8]=E=>ne.$emit("reset"))},{default:te(()=>[...K[25]||(K[25]=[fe(" Reset to Defaults ",-1)])]),_:1})):q("",!0)]),P.value?(v(),k("div",oV,[C(dn,{title:"Primary Files",description:"The main presentation file and where rendered slides are output."},{default:te(()=>[h("div",lV,[C(Ce,{"model-value":i.value.presentation_source,"onUpdate:modelValue":K[9]||(K[9]=E=>je("presentation_source",E)),label:"Presentation source file",placeholder:"presentation.qmd",hint:"Main Quarto file for your slides",disabled:n.disabled},null,8,["model-value","disabled"]),C(Ce,{"model-value":i.value.rendered_slides,"onUpdate:modelValue":K[10]||(K[10]=E=>je("rendered_slides",E)),label:"Rendered slides directory",placeholder:".",hint:"Rendered slides write to the project root by default (.)",prefix:"/",monospace:"",disabled:n.disabled},null,8,["model-value","disabled"])])]),_:1})])):q("",!0),P.value?(v(),k("div",aV,[C(dn,{title:"Optional Directories",description:"Toggle extra scaffolding when you need supporting data, scripts, or helper utilities."},{default:te(()=>[h("div",uV,[h("div",cV,[C(Qe,{"model-value":o.value.data,"onUpdate:modelValue":K[11]||(K[11]=E=>Me("data",E)),label:"Include data directory",description:"Adds a /data folder for sample data used in the presentation.",disabled:We("data")},null,8,["model-value","disabled"]),o.value.data?(v(),Ee(Ce,{key:0,"model-value":u("data"),"onUpdate:modelValue":K[12]||(K[12]=E=>je("data",E)),prefix:"/",monospace:"",disabled:n.disabled},null,8,["model-value","disabled"])):q("",!0)]),h("div",dV,[C(Qe,{"model-value":o.value.scripts,"onUpdate:modelValue":K[13]||(K[13]=E=>Me("scripts",E)),label:"Include scripts directory",description:"Adds a scripts/ folder for demo code or automation.",disabled:We("scripts")},null,8,["model-value","disabled"]),o.value.scripts?(v(),Ee(Ce,{key:0,"model-value":u("scripts"),"onUpdate:modelValue":K[14]||(K[14]=E=>je("scripts",E)),prefix:"/",monospace:"",disabled:n.disabled},null,8,["model-value","disabled"])):q("",!0)]),h("div",fV,[C(Qe,{"model-value":o.value.functions,"onUpdate:modelValue":K[15]||(K[15]=E=>Me("functions",E)),label:"Include functions directory",description:"Adds functions/ for helper utilities that should load automatically.",disabled:We("functions")},null,8,["model-value","disabled"]),o.value.functions?(v(),Ee(Ce,{key:0,"model-value":u("functions"),"onUpdate:modelValue":K[16]||(K[16]=E=>je("functions",E)),prefix:"/",monospace:"",disabled:n.disabled},null,8,["model-value","disabled"])):q("",!0)]),h("div",hV,[K[26]||(K[26]=h("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Add Custom Directories",-1)),Z.value.length>0?(v(),k("div",pV,[(v(!0),k(xe,null,Ve(Z.value,E=>(v(),k("div",{key:E.key,class:"space-y-1.5"},[C(Qe,{"model-value":o.value[E.key],"onUpdate:modelValue":re=>Me(E.key,re),label:E.label,disabled:We(E.key)},null,8,["model-value","onUpdate:modelValue","label","disabled"]),o.value[E.key]!==!1?(v(),Ee(Ce,{key:0,"model-value":E.path,"onUpdate:modelValue":re=>rt(E.key,re),prefix:"/",monospace:"",disabled:n.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):q("",!0)]))),128))])):q("",!0),n.disabled?q("",!0):(v(),Ee(Zi,{key:1,"model-value":Q.value,"onUpdate:modelValue":K[17]||(K[17]=E=>tt("workspace",E)),"add-label":"Add Directory","default-item":()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:te(({item:E,update:re})=>[h("div",mV,[C(Ce,{"model-value":E.label,"onUpdate:modelValue":T=>re("label",T),label:"Label",placeholder:"e.g., Assets"},null,8,["model-value","onUpdate:modelValue"]),C(Ce,{"model-value":E.path,"onUpdate:modelValue":T=>re("path",T),label:"Path",placeholder:"e.g., assets",prefix:"/",monospace:""},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"]))])])]),_:1})])):q("",!0),U.value?(v(),k("div",gV,[C(eV,{"directories-enabled":o.value,"onUpdate:directoriesEnabled":K[18]||(K[18]=E=>{o.value=E,s("update:enabled",E)}),directories:i.value,"onUpdate:directories":K[19]||(K[19]=E=>{i.value=E,s("update:directories",E)}),"render-dirs":r.value,"onUpdate:renderDirs":K[20]||(K[20]=E=>{r.value=E,s("update:renderDirs",E)}),catalog:n.catalog,"extra-directories":n.extraDirectories.filter(E=>E.type==="course"),"extra-directories-enabled":{},"onUpdate:extraDirectoriesEnabled":()=>{},"project-custom-directories":[],"onUpdate:projectCustomDirectories":()=>{},"allow-custom-directories":!1,flush:!1},null,8,["directories-enabled","directories","render-dirs","catalog","extra-directories"])])):q("",!0),!P.value&&!U.value&&W.value.length>0?(v(),k("div",vV,[C(dn,{title:"Inputs",description:w.value?"Keep private inputs compartmentalized; publish processed outputs into public folders when ready.":"Define the read-only locations where raw and prepared data live."},{default:te(()=>[w.value?(v(),k("div",yV,[K[27]||(K[27]=h("div",{class:"grid gap-4 sm:grid-cols-2 text-xs font-semibold uppercase text-gray-500 dark:text-gray-400 mb-4"},[h("div",null,"Private"),h("div",null,"Public")],-1)),h("div",bV,[(v(!0),k(xe,null,Ve(W.value,E=>(v(),k("div",{key:E.privateKey},[E.hint?(v(),k("p",kV,X(E.hint),1)):q("",!0),h("div",xV,[h("div",_V,[C(Qe,{"model-value":o.value[E.privateKey],"onUpdate:modelValue":re=>Me(E.privateKey,re),label:E.privateLabel,disabled:We(E.privateKey)},null,8,["model-value","onUpdate:modelValue","label","disabled"]),o.value[E.privateKey]!==!1?(v(),Ee(Ce,{key:0,"model-value":u(E.privateKey),"onUpdate:modelValue":re=>je(E.privateKey,re),prefix:"/",monospace:"",disabled:n.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):q("",!0)]),h("div",wV,[C(Qe,{"model-value":o.value[E.publicKey],"onUpdate:modelValue":re=>Me(E.publicKey,re),label:E.publicLabel,disabled:We(E.publicKey)},null,8,["model-value","onUpdate:modelValue","label","disabled"]),o.value[E.publicKey]!==!1?(v(),Ee(Ce,{key:0,"model-value":u(E.publicKey),"onUpdate:modelValue":re=>je(E.publicKey,re),prefix:"/",monospace:"",disabled:n.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):q("",!0)])])]))),128))])])):(v(),k("div",SV,[(v(!0),k(xe,null,Ve(W.value,E=>(v(),k("div",{key:E.key,class:"space-y-1.5"},[C(Qe,{"model-value":o.value[E.key],"onUpdate:modelValue":re=>Me(E.key,re),label:E.label,description:E.hint,disabled:We(E.key)},null,8,["model-value","onUpdate:modelValue","label","description","disabled"]),o.value[E.key]!==!1?(v(),Ee(Ce,{key:0,"model-value":u(E.key),"onUpdate:modelValue":re=>je(E.key,re),prefix:"/",monospace:"",disabled:n.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):q("",!0)]))),128))])),(ae.value.length>0,v(),k("div",CV,[K[28]||(K[28]=h("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Input Directories",-1)),ae.value.length>0?(v(),k("div",AV,[(v(!0),k(xe,null,Ve(ae.value,E=>(v(),k("div",{key:E.key,class:"space-y-1.5"},[C(Qe,{"model-value":o.value[E.key],"onUpdate:modelValue":re=>Me(E.key,re),label:E.label,disabled:We(E.key)},null,8,["model-value","onUpdate:modelValue","label","disabled"]),o.value[E.key]!==!1?(v(),Ee(Ce,{key:0,"model-value":E.path,"onUpdate:modelValue":re=>rt(E.key,re),prefix:"/",monospace:"",disabled:n.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):q("",!0)]))),128))])):q("",!0),n.disabled?q("",!0):(v(),Ee(Zi,{key:1,"model-value":J.value,"onUpdate:modelValue":K[21]||(K[21]=E=>tt("input",E)),addLabel:"Add Input Directory",defaultItem:()=>({key:"",label:"",path:"",type:"input",_id:Date.now()})},{default:te(({item:E,update:re})=>[h("div",EV,[C(Ce,{"model-value":E.label,"onUpdate:modelValue":T=>re("label",T),label:"Label",placeholder:"Archive"},null,8,["model-value","onUpdate:modelValue"]),C(Ce,{"model-value":E.path,"onUpdate:modelValue":T=>re("path",T),label:"Path",prefix:"/",placeholder:"inputs/archive",monospace:"",disabled:n.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])])]),_:1},8,["model-value","defaultItem"]))]))]),_:1},8,["description"])])):q("",!0),!P.value&&!U.value&&M.value.length>0?(v(),k("div",TV,[C(dn,{title:"Workspaces",description:"Functions, notebooks, and scripts scaffolded into every project."},{default:te(()=>[h("div",DV,[(v(!0),k(xe,null,Ve(A.value,E=>(v(),k("div",{key:E.key,class:"space-y-1.5"},[C(Qe,{"model-value":o.value[E.key],"onUpdate:modelValue":re=>Me(E.key,re),label:E.label,description:E.hint,disabled:We(E.key)},null,8,["model-value","onUpdate:modelValue","label","description","disabled"]),o.value[E.key]!==!1?(v(),k("div",PV,[C(Ce,{"model-value":u(E.key),"onUpdate:modelValue":re=>je(E.key,re),label:"Source files",prefix:"/",monospace:"",disabled:n.disabled},null,8,["model-value","onUpdate:modelValue","disabled"]),C(Ce,{"model-value":c(E.key),"onUpdate:modelValue":re=>$e(E.key,re),label:"Quarto render directory",prefix:"/",monospace:"",disabled:n.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])])):q("",!0)]))),128)),(v(!0),k(xe,null,Ve(_.value,E=>(v(),k("div",{key:E.key,class:"space-y-1.5"},[C(Qe,{"model-value":o.value[E.key],"onUpdate:modelValue":re=>Me(E.key,re),label:E.label,description:E.hint,disabled:We(E.key)},null,8,["model-value","onUpdate:modelValue","label","description","disabled"]),o.value[E.key]!==!1?(v(),Ee(Ce,{key:0,"model-value":u(E.key),"onUpdate:modelValue":re=>je(E.key,re),prefix:"/",monospace:"",disabled:n.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):q("",!0)]))),128))]),(Z.value.length>0,v(),k("div",RV,[K[29]||(K[29]=h("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Workspace Directories",-1)),Z.value.length>0?(v(),k("div",OV,[(v(!0),k(xe,null,Ve(Z.value,E=>(v(),k("div",{key:E.key,class:"space-y-1.5"},[C(Qe,{"model-value":o.value[E.key],"onUpdate:modelValue":re=>Me(E.key,re),label:E.label,disabled:We(E.key)},null,8,["model-value","onUpdate:modelValue","label","disabled"]),o.value[E.key]!==!1?(v(),Ee(Ce,{key:0,"model-value":E.path,"onUpdate:modelValue":re=>rt(E.key,re),prefix:"/",monospace:"",disabled:n.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):q("",!0)]))),128))])):q("",!0),n.disabled?q("",!0):(v(),Ee(Zi,{key:1,"model-value":Q.value,"onUpdate:modelValue":K[22]||(K[22]=E=>tt("workspace",E)),addLabel:"Add Workspace Directory",defaultItem:()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:te(({item:E,update:re})=>[h("div",LV,[C(Ce,{"model-value":E.label,"onUpdate:modelValue":T=>re("label",T),label:"Label",placeholder:"Templates"},null,8,["model-value","onUpdate:modelValue"]),C(Ce,{"model-value":E.path,"onUpdate:modelValue":T=>re("path",T),label:"Path",prefix:"/",placeholder:"templates",monospace:"",disabled:n.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])])]),_:1},8,["model-value","defaultItem"]))]))]),_:1})])):q("",!0),!P.value&&!U.value&&ue.value.length>0?(v(),k("div",MV,[C(dn,{title:"Outputs",description:w.value?"Review outputs before promotion; private folders remain gitignored while public copies are ready to share.":"Results, figures, models, and reports generated by your analysis."},{default:te(()=>[w.value?(v(),k("div",IV,[K[30]||(K[30]=h("div",{class:"grid gap-4 sm:grid-cols-2 text-xs font-semibold uppercase text-gray-500 dark:text-gray-400 mb-4"},[h("div",null,"Private"),h("div",null,"Public")],-1)),h("div",jV,[(v(!0),k(xe,null,Ve(ue.value,E=>(v(),k("div",{key:E.privateKey},[E.hint?(v(),k("p",VV,X(E.hint),1)):q("",!0),h("div",$V,[h("div",NV,[C(Qe,{"model-value":o.value[E.privateKey],"onUpdate:modelValue":re=>Me(E.privateKey,re),label:E.privateLabel,disabled:We(E.privateKey)},null,8,["model-value","onUpdate:modelValue","label","disabled"]),o.value[E.privateKey]!==!1?(v(),Ee(Ce,{key:0,"model-value":u(E.privateKey),"onUpdate:modelValue":re=>je(E.privateKey,re),prefix:"/",monospace:"",disabled:n.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):q("",!0)]),h("div",BV,[C(Qe,{"model-value":o.value[E.publicKey],"onUpdate:modelValue":re=>Me(E.publicKey,re),label:E.publicLabel,disabled:We(E.publicKey)},null,8,["model-value","onUpdate:modelValue","label","disabled"]),o.value[E.publicKey]!==!1?(v(),Ee(Ce,{key:0,"model-value":u(E.publicKey),"onUpdate:modelValue":re=>je(E.publicKey,re),prefix:"/",monospace:"",disabled:n.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):q("",!0)])])]))),128))])])):(v(),k("div",FV,[(v(!0),k(xe,null,Ve(ue.value,E=>(v(),k("div",{key:E.key,class:"space-y-1.5"},[C(Qe,{"model-value":o.value[E.key],"onUpdate:modelValue":re=>Me(E.key,re),label:E.label,description:E.hint,disabled:We(E.key)},null,8,["model-value","onUpdate:modelValue","label","description","disabled"]),o.value[E.key]!==!1?(v(),Ee(Ce,{key:0,"model-value":u(E.key),"onUpdate:modelValue":re=>je(E.key,re),prefix:"/",monospace:"",disabled:n.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):q("",!0)]))),128))])),(B.value.length>0,v(),k("div",UV,[K[31]||(K[31]=h("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Output Directories",-1)),B.value.length>0?(v(),k("div",zV,[(v(!0),k(xe,null,Ve(B.value,E=>(v(),k("div",{key:E.key,class:"space-y-1.5"},[C(Qe,{"model-value":o.value[E.key],"onUpdate:modelValue":re=>Me(E.key,re),label:E.label,disabled:We(E.key)},null,8,["model-value","onUpdate:modelValue","label","disabled"]),o.value[E.key]!==!1?(v(),Ee(Ce,{key:0,"model-value":E.path,"onUpdate:modelValue":re=>rt(E.key,re),prefix:"/",monospace:"",disabled:n.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):q("",!0)]))),128))])):q("",!0),n.disabled?q("",!0):(v(),Ee(Zi,{key:1,"model-value":ce.value,"onUpdate:modelValue":K[23]||(K[23]=E=>tt("output",E)),addLabel:"Add Output Directory",defaultItem:()=>({key:"",label:"",path:"",type:"output",_id:Date.now()})},{default:te(({item:E,update:re})=>[h("div",HV,[C(Ce,{"model-value":E.label,"onUpdate:modelValue":T=>re("label",T),label:"Label",placeholder:"Archive"},null,8,["model-value","onUpdate:modelValue"]),C(Ce,{"model-value":E.path,"onUpdate:modelValue":T=>re("path",T),label:"Path",prefix:"/",placeholder:"outputs/archive",monospace:"",disabled:n.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])])]),_:1},8,["model-value","defaultItem"]))]))]),_:1},8,["description"])])):q("",!0),!P.value&&!U.value&&ee.value.length>0?(v(),k("div",WV,[C(dn,{title:"Utility",description:"Scratch space and other temporary directories (gitignored by default). Cache is always created on first use."},{default:te(()=>[h("div",qV,[(v(!0),k(xe,null,Ve(ee.value,E=>(v(),k("div",{key:E.key,class:"space-y-1.5"},[C(Qe,{"model-value":o.value[E.key],"onUpdate:modelValue":re=>Me(E.key,re),label:E.label,description:E.hint,disabled:We(E.key)},null,8,["model-value","onUpdate:modelValue","label","description","disabled"]),o.value[E.key]!==!1?(v(),Ee(Ce,{key:0,"model-value":u(E.key),"onUpdate:modelValue":re=>je(E.key,re),prefix:"/",monospace:"",disabled:n.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):q("",!0)]))),128))])]),_:1})])):q("",!0),h("div",GV,[C(dn,{title:".gitignore Patterns",description:"Define which files and directories Git should ignore."},{default:te(()=>[C(lh,null,{default:te(()=>[C(Ac,{"model-value":a.value,"onUpdate:modelValue":K[24]||(K[24]=E=>ne.$emit("update:gitignore",E)),language:"gitignore","min-height":"500px",disabled:n.disabled,placeholder:`# Framework gitignore patterns
cache/
scratch/
*.log`},null,8,["model-value","disabled"])]),_:1})]),_:1})])]))}},KV=["onClick","aria-current"],JV={class:"mt-4"},QV={__name:"Tabs",props:{modelValue:{type:[String,Number],required:!0},tabs:{type:Array,required:!0,validator:n=>n.every(e=>e.id&&e.label)},variant:{type:String,default:"pills",validator:n=>["pills","underline"].includes(n)},size:{type:String,default:"md",validator:n=>["sm","md","lg"].includes(n)}},emits:["update:modelValue","change"],setup(n,{emit:e}){const t=n,s=e,i=z(()=>t.variant==="underline"?"border-b border-gray-200 dark:border-white/10":""),r=z(()=>{const a=["flex","gap-2"];return t.variant==="underline"?a.push("-mb-px"):a.push("p-1","bg-gray-100","dark:bg-white/5","rounded-lg"),a.join(" ")}),o=a=>{const u=t.modelValue===a,c=["inline-flex","items-center","gap-2","font-medium","transition-colors"],d={sm:"px-2.5 py-1.5 text-xs",md:"px-3 py-2 text-sm",lg:"px-4 py-2.5 text-base"};return c.push(d[t.size]),t.variant==="pills"?(c.push("rounded-md"),u?c.push("bg-white","text-gray-900","shadow-xs","dark:bg-white/10","dark:text-white"):c.push("text-gray-600","hover:text-gray-900","dark:text-gray-400","dark:hover:text-white")):(c.push("border-b-2","pb-3"),u?c.push("border-sky-600","text-sky-600","dark:border-sky-500","dark:text-sky-400"):c.push("border-transparent","text-gray-600","hover:border-gray-300","hover:text-gray-900","dark:text-gray-400","dark:hover:border-gray-600","dark:hover:text-white")),c.join(" ")},l=a=>{s("update:modelValue",a),s("change",a)};return(a,u)=>(v(),k("div",null,[h("div",{class:we(i.value)},[h("nav",{class:we(r.value),"aria-label":"Tabs"},[(v(!0),k(xe,null,Ve(n.tabs,c=>(v(),k("button",{key:c.id,type:"button",onClick:d=>l(c.id),class:we(o(c.id)),"aria-current":n.modelValue===c.id?"page":void 0},[c.icon?(v(),Ee(Nn(c.icon),{key:0,class:"size-5"})):q("",!0),fe(" "+X(c.label)+" ",1),c.badge?(v(),Ee(hc,{key:1,variant:n.modelValue===c.id?"emerald":"gray",pill:""},{default:te(()=>[fe(X(c.badge),1)]),_:2},1032,["variant"])):q("",!0)],10,KV))),128))],2)],2),h("div",JV,[pt(a.$slots,"default")])]))}},YV={key:0,class:"mb-4"},XV={key:1,class:"mb-4"},ZV={key:2,class:"space-y-6"},e6={key:0,class:"rounded-lg bg-gray-50 p-8 text-center dark:bg-gray-800/40"},t6={key:1,class:"space-y-5"},n6={class:"mb-4"},s6={class:"text-sm font-semibold text-gray-900 dark:text-white"},i6={class:"text-xs text-gray-500 dark:text-gray-400"},r6={class:"space-y-3"},o6={class:"flex items-start gap-3"},l6={class:"grid flex-1 grid-cols-2 gap-3"},a6=["value","onInput","disabled"],u6={class:"relative"},c6=["onUpdate:modelValue","type","placeholder","disabled"],d6=["onClick"],f6=["onClick"],h6={key:0,class:"mt-4"},p6={key:2,class:"rounded-lg border border-gray-200 bg-gray-50 p-4 text-sm dark:border-gray-700 dark:bg-gray-800/60"},m6={key:3,class:"space-y-3"},g6=["disabled"],v6={key:4,class:"mt-4 flex justify-end"},Mp={__name:"EnvEditor",props:{loading:{type:Boolean,default:!1},error:{type:String,default:""},showSecurityAlert:{type:Boolean,default:!0},allowAdd:{type:Boolean,default:!0},allowRemove:{type:Boolean,default:!0},allowShowValuesToggle:{type:Boolean,default:!0},allowRegroupOption:{type:Boolean,default:!0},showSaveButton:{type:Boolean,default:!0},saveLabel:{type:String,default:"Save .env"},groups:{type:Object,default:()=>({})},variables:{type:Object,default:()=>({})},rawContent:{type:String,default:""},viewMode:{type:String,default:"grouped"},regroupOnSave:{type:Boolean,default:!1}},emits:["update:variables","update:rawContent","update:viewMode","update:regroupOnSave","save"],setup(n,{emit:e}){const t=n,s=e,i=M=>JSON.parse(JSON.stringify(M||{})),r=Y(i(t.variables)),o=Y(t.rawContent||""),l=Y(t.viewMode||"grouped"),a=Y(!!t.regroupOnSave),u=Y(!1),c=Y({});let d=!1,f=!1;Ie(()=>t.variables,M=>{d=!0,r.value=i(M),Zn(()=>{d=!1})},{deep:!0}),Ie(()=>t.rawContent,M=>{f=!0,o.value=M||"",Zn(()=>{f=!1})},{immediate:!0}),Ie(()=>t.viewMode,M=>{l.value=M||"grouped"}),Ie(()=>t.regroupOnSave,M=>{a.value=!!M}),Ie(r,M=>{d||(s("update:variables",i(M)),l.value!=="raw"&&(o.value=x(o.value,M,a.value),s("update:rawContent",o.value)))},{deep:!0}),Ie(o,M=>{if(!f&&l.value==="raw"){s("update:rawContent",M);const W=p(M);r.value=W,s("update:variables",i(W))}}),Ie(l,(M,W)=>{s("update:viewMode",M),M==="raw"&&W!=="raw"&&(Object.keys(r.value).length>0?o.value=x(o.value,r.value,a.value):!o.value&&t.rawContent&&(o.value=t.rawContent))}),Ie(a,M=>{s("update:regroupOnSave",M)});const p=M=>{const W=(M||"").split(/\r?\n/),ue={};return W.forEach(ee=>{const F=ee.trim();if(!F||F.startsWith("#")||!F.includes("="))return;const[ae,...Z]=F.split("=");ue[ae.trim()]=Z.join("=").replace(/^"|"$/g,"")}),ue},g=M=>{const W=Object.entries(M||{});return W.length?W.reduce((ue,[ee,F])=>{const ae=ee.includes("_")?ee.split("_")[0]:"Other";return ue[ae]||(ue[ae]={}),ue[ae][ee]={defined:!!F,used:!1,used_in:[],value:F},ue},{}):{}},b=z(()=>{const M=t.groups||{};return Object.keys(M).length?M:g(r.value)}),x=(M,W,ue=!1)=>{if(ue){const B={};for(const[ce,ve]of Object.entries(W)){const je=ce.includes("_")?ce.split("_")[0]:"Other";B[je]||(B[je]=[]),B[je].push([ce,ve])}const J=[],Q=Object.keys(B).sort();for(let ce=0;ce<Q.length;ce++){const ve=Q[ce],je=B[ve];ce>0&&(J.push(""),J.push("")),J.push(`# ${ve==="Other"?"Other variables":ve.toUpperCase()}`);for(const[$e,Me]of je)J.push(`${$e}=${Me??""}`)}return J.join(`
`)}const ee=(M||"").split(/\r?\n/),F=new Set,ae=[];for(const B of ee){const J=B.trim();if(!J||J.startsWith("#")||!J.includes("=")){ae.push(B);continue}const[Q,...ce]=J.split("="),ve=Q.trim(),je=ce.join("=").trim();if(ve in W){const $e=W[ve]??"";ae.push(`${ve}=${$e}`),F.add(ve)}else(Object.keys(W).length===0||je==="")&&ae.push(B)}const Z=Object.entries(W).filter(([B])=>!F.has(B));if(Z.length>0){const B={};for(const[J,Q]of Z){const ce=J.includes("_")?J.split("_")[0]:"Other";B[ce]||(B[ce]=[]),B[ce].push([J,Q])}for(const[J,Q]of Object.entries(B)){ae.length>0&&ae[ae.length-1]!==""&&(ae.push(""),ae.push("")),ae.push(`# ${J==="Other"?"Other variables":J.toUpperCase()}`);for(const[ce,ve]of Q)ae.push(`${ce}=${ve??""}`)}}return ae.join(`
`)},m=()=>{if(!t.allowAdd)return;const M="NEW_VARIABLE";let W=1,ue=`${M}_${W}`;for(;r.value[ue];)W+=1,ue=`${M}_${W}`;r.value={...r.value,[ue]:""}},w=M=>{if(!t.allowRemove)return;const W=i(r.value);delete W[M],r.value=W},P=(M,W)=>{if(!W||M===W)return;const ue=W.replace(/[^A-Z0-9_]/gi,"").toUpperCase();if(!ue)return;const ee=i(r.value);ee[ue]||(ee[ue]=ee[M],delete ee[M],r.value=ee)},U=M=>{const W=["PASSWORD","SECRET","KEY","TOKEN"],ue=M.toUpperCase();return W.some(ee=>ue.includes(ee))},O=M=>u.value||c.value[M]||!U(M),A=M=>{c.value[M]=!c.value[M]},_=()=>{u.value=!u.value};return(M,W)=>(v(),k("div",null,[n.error?(v(),k("div",YV,[C(Wn,{type:"error",title:"Error",description:n.error},null,8,["description"])])):q("",!0),n.showSecurityAlert?(v(),k("div",XV,[C(Wn,{type:"warning",title:" Contains Sensitive Data"},{actions:te(()=>[n.viewMode==="grouped"&&n.allowShowValuesToggle?(v(),Ee(Ye,{key:0,variant:"soft",size:"sm",onClick:_},{default:te(()=>[fe(X(u.value?"Hide Values":"Show Values"),1)]),_:1})):q("",!0)]),default:te(()=>[W[4]||(W[4]=fe(" This file can include passwords and secrets. Keep it out of version control. ",-1))]),_:1})])):q("",!0),C(QV,{modelValue:l.value,"onUpdate:modelValue":W[0]||(W[0]=ue=>l.value=ue),tabs:[{id:"grouped",label:"Key/Value Editor"},{id:"raw",label:"Raw .env"}],variant:"pills",class:"mb-4"},null,8,["modelValue"]),l.value==="grouped"?(v(),k("div",ZV,[Object.keys(b.value).length===0?(v(),k("div",e6,[C(ut(oc),{class:"mx-auto mb-3 h-10 w-10 text-gray-400"}),W[6]||(W[6]=h("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"No environment variables yet.",-1)),n.allowAdd?(v(),Ee(Ye,{key:0,variant:"primary",class:"mt-4",onClick:m},{default:te(()=>[...W[5]||(W[5]=[fe(" Add Variable ",-1)])]),_:1})):q("",!0)])):(v(),k("div",t6,[(v(!0),k(xe,null,Ve(b.value,(ue,ee)=>(v(),k("div",{key:ee,class:"rounded-lg bg-gray-50 p-5 dark:bg-gray-800/40"},[h("div",n6,[h("p",s6,X(ee==="Other"?"Uncategorized":ee.toUpperCase()),1),h("p",i6,"Variables with the "+X(ee)+" prefix.",1)]),h("div",r6,[(v(!0),k(xe,null,Ve(ue,(F,ae)=>(v(),k("div",{key:ae,class:"space-y-2"},[h("div",o6,[h("div",l6,[h("input",{value:ae,onInput:Z=>P(ae,Z.target.value),type:"text",class:"w-full rounded-md border border-gray-300 bg-white px-3 py-2 font-mono text-sm uppercase text-gray-900 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-100",disabled:n.loading},null,40,a6),h("div",u6,[Ge(h("input",{"onUpdate:modelValue":Z=>r.value[ae]=Z,type:O(ae)?"text":"password",placeholder:F.defined?"value":"(not set)",class:"w-full rounded-md border border-gray-300 bg-white px-3 py-2 font-mono text-sm text-gray-900 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-100",disabled:n.loading},null,8,c6),[[O2,r.value[ae]]]),U(ae)&&n.allowShowValuesToggle?(v(),k("button",{key:0,type:"button",class:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300",onClick:Z=>A(ae)},[O(ae)?(v(),Ee(ut(tC),{key:0,class:"h-4 w-4"})):(v(),Ee(ut(nC),{key:1,class:"h-4 w-4"}))],8,d6)):q("",!0)])]),n.allowRemove?(v(),k("button",{key:0,type:"button",class:"mt-2 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300",onClick:Z=>w(ae)},[...W[7]||(W[7]=[h("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,f6)):q("",!0)])]))),128))]),n.allowAdd?(v(),k("div",h6,[C(Ye,{variant:"secondary",size:"sm",onClick:m},{default:te(()=>[...W[8]||(W[8]=[fe(" + Add Variable ",-1)])]),_:1})])):q("",!0)]))),128))])),n.allowRegroupOption?(v(),k("div",p6,[C(Qe,{modelValue:a.value,"onUpdate:modelValue":W[1]||(W[1]=ue=>a.value=ue),label:"Regroup .env file by prefix when saving",description:"Rewrites the file grouped by prefix and strips comments."},null,8,["modelValue"])])):q("",!0)])):(v(),k("div",m6,[Ge(h("textarea",{"onUpdate:modelValue":W[2]||(W[2]=ue=>o.value=ue),class:"h-80 w-full rounded-md border border-gray-300 bg-white px-3 py-2 font-mono text-sm text-gray-900 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-100",disabled:n.loading},null,8,g6),[[or,o.value]]),W[9]||(W[9]=h("p",{class:"text-xs text-gray-500"},"Edit the .env file directly. Comments and formatting are preserved.",-1))])),n.showSaveButton?(v(),k("div",v6,[C(Ye,{disabled:n.loading,variant:"primary",onClick:W[3]||(W[3]=ue=>M.$emit("save"))},{default:te(()=>[fe(X(n.saveLabel),1)]),_:1},8,["disabled"])])):q("",!0)]))}},Ip=({useGit:n,gitHooks:e,git:t}={})=>{const s=e||t?.hooks||{};return{initialize:n!==!1&&t?.initialize!==!1,user_name:t?.user_name||"",user_email:t?.user_email||"",hooks:{ai_sync:s.ai_sync||!1,data_security:s.data_security||!1,check_sensitive_dirs:s.check_sensitive_dirs||!1}}},jp=({gitTarget:n,gitHooksTarget:e,setUseGit:t}={},s={})=>{typeof t=="function"&&t(s.initialize),n&&(n.initialize=s.initialize,n.user_name=s.user_name,n.user_email=s.user_email,n.hooks={ai_sync:s.hooks?.ai_sync||!1,data_security:s.hooks?.data_security||!1,check_sensitive_dirs:s.hooks?.check_sensitive_dirs||!1}),e&&(e.ai_sync=s.hooks?.ai_sync||!1,e.data_security=s.hooks?.data_security||!1,e.check_sensitive_dirs=s.hooks?.check_sensitive_dirs||!1)},y6=(n={},e={},t={},s={})=>{const i=l=>typeof l=="string"?l:l&&typeof l=="object"&&l.default||"",r={},o={};return Object.entries(n).forEach(([l,a])=>{const u=i(a),c=s[l]||"";r[l]=e[l]||u||c,t[l]!==void 0?o[l]=t[l]:a&&typeof a=="object"&&a.enabled_by_default!==void 0?o[l]=a.enabled_by_default===!0:o[l]=!0}),{directories:r,directories_enabled:o}},b6=(n={},e={},t={})=>{const s=r=>typeof r=="string"?r:r&&typeof r=="object"&&r.default||"",i={};return Object.entries(n).forEach(([r,o])=>{const l=s(o),a=t[r]||"";i[r]=e[r]||l||a}),i},k6=(n=[],e={})=>(n||[]).filter(t=>!(!t.key||!t.label||!t.path||!t.type||e&&e[t.key]===!1)),Ix=(n={},e=[],t={})=>{const s=new Set;Object.keys(n||{}).forEach(r=>s.add(r)),(e||[]).forEach(r=>{r.key&&s.add(r.key)});const i={};return Object.keys(t||{}).forEach(r=>{s.has(r)&&(i[r]=t[r])}),i},jx=(n={},e={},t={},s={})=>{const{directories:i,directories_enabled:r}=y6(n.directories||{},e.directories||{},e.directories_enabled||{},t),o=b6(n.render_dirs||{},e.render_dirs||{},s),l=e.extra_directories||[],a={...r,...e.directories_enabled||{}};return{directories:i,directories_enabled:r,render_dirs:o,extra_directories:l,enabled:a}},x6=(n={},e={})=>{const t=n.directories||{},s=n.render_dirs||{},i=n.extra_directories||[],r=Ix(e,i,n.enabled||{});return{directories:t,render_dirs:s,extra_directories:i,enabled:r}},Vx=({catalogDirs:n={},directories:e={},render_dirs:t={},enabled:s={},extra_directories:i=[]})=>{const r=Ix(n,i,s),o=k6(i,r);return{directories:e,render_dirs:t,enabled:r,extra_directories:o}},jl=(n={})=>({name:n.name||"",source:n.source||"cran",auto_attach:n.auto_attach!==!1}),Lr=n=>n?n.default_packages?{use_renv:!!n.use_renv,default_packages:(n.default_packages||[]).map(jl)}:Array.isArray(n)?{use_renv:!1,default_packages:n.map(jl)}:{use_renv:!!n.use_renv,default_packages:[]}:{use_renv:!1,default_packages:[]},_6=(n={})=>{const e=!!n.use_renv,t=(n.default_packages||[]).filter(s=>s?.name&&s.name.trim()!=="").map(jl);return{use_renv:e,default_packages:t}},w6=n=>({use_renv:!!n?.use_renv,default_packages:(n?.packages||[]).map(jl)}),$x=(n={})=>{const e=!!n.use_renv,t=(n.default_packages||[]).filter(s=>s?.name&&s.name.trim()!=="").map(jl);return{use_renv:e,default_packages:t}},S6=([n])=>n!=="framework_db",Vp=(n={})=>{const e=n.databases||{},t=n.storage_buckets||{},s=Object.entries(e).filter(S6).map(([l,a])=>({_id:l,name:l,...a})),i=Object.entries(t).map(([l,a])=>({_id:l,name:l,...a})),r=n.default_database,o=n.default_storage_bucket;return{databaseConnections:s,s3Connections:i,defaultDatabase:typeof r=="string"&&r?r:null,defaultStorageBucket:typeof o=="string"&&o?o:null}},$p=({databaseConnections:n=[],s3Connections:e=[],defaultDatabase:t=null,defaultStorageBucket:s=null})=>{const i={};n.forEach(o=>{const{_id:l,name:a,...u}=o||{};a&&(i[a]=u)});const r={};return e.forEach(o=>{const{_id:l,name:a,...u}=o||{};a&&(r[a]=u)}),{default_database:t,default_storage_bucket:s,databases:i,storage_buckets:r}},C6={class:"flex min-h-screen"},A6={class:"w-64 shrink-0 border-r border-gray-200 p-6 dark:border-gray-800"},E6={class:"space-y-1 mb-6"},T6=["onClick"],D6=["fill","viewBox","stroke"],P6=["stroke-linecap","stroke-linejoin","stroke-width","fill","d"],R6={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},O6={class:"flex-1 p-10"},L6={class:"mt-8 space-y-6"},M6={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},I6={class:"space-y-5"},j6={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},V6={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 space-y-6"},$6={class:"space-y-6"},N6={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},B6={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},F6={__name:"NewProjectView",setup(n){const e=Bl(),t=co(),s=lc(),i=ss("loadProjects"),r=Y(null),o=Y(null),l=Y(!0),a=L=>L?Array.isArray(L)?Array.from(new Set(L.map(j=>String(j)))):typeof L=="string"?[L]:[]:[],u=()=>{Array.isArray(m.value.ai.assistants)||(m.value.ai.assistants=a(m.value.ai.assistants))},c=()=>({html:{format:"html",embed_resources:!0,theme:"default",toc:!0,toc_depth:3,code_fold:!1,code_tools:!1,highlight_style:"github"},revealjs:{format:"revealjs",theme:"default",incremental:!1,slide_number:!0,transition:"slide",background_transition:"fade",controls:!0,progress:!0,center:!0,highlight_style:"github"},render_dir:null}),d=[{id:"overview",label:"Overview",icon:rc},{id:"basics",label:"Basics",icon:Dh},{id:"structure",label:"Project Structure",icon:hu},{id:"quarto",label:"Quarto",icon:Fr},{id:"packages",label:"Packages",icon:Ph},{id:"ai",label:"AI Assistants",svgIcon:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"},{id:"git",label:"Git & Hooks",svgIcon:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"},{id:"connections",label:"Connections",icon:Rh},{id:"env",label:".env Defaults",icon:oc},{id:"scaffold",label:"Scaffold Behavior",svgIcon:"M256 64L576 64L576 576L64 576L64 192L256 192L256 64zM256 224L96 224L96 544L256 544L256 224zM288 544L544 544L544 96L288 96L288 544zM440 152L488 152L488 200L440 200L440 152zM392 152L392 200L344 200L344 152L392 152zM440 248L488 248L488 296L440 296L440 248zM392 248L392 296L344 296L344 248L392 248zM152 280L200 280L200 328L152 328L152 280zM392 344L392 392L344 392L344 344L392 344zM152 376L200 376L200 424L152 424L152 376zM488 344L488 392L440 392L440 344L488 344z",svgViewBox:"0 0 640 640",svgFill:"currentColor",svgStroke:"none",svgStrokeWidth:0,svgPathFill:"currentColor"}],f=Y("basics"),p=Y(!1),g=Y(null),b=Y(!0),x=Y(new Set),m=Y({name:"",location:"",type:"project",author:{name:"",email:"",affiliation:""},scaffold:{seed_on_scaffold:!1,seed:"",set_theme_on_scaffold:!0,ggplot_theme:"theme_minimal",source_all_functions:!0,notebook_format:"quarto",ide:"vscode",positron:!1},packages:{...Lr()},quarto:c(),ai:{enabled:!0,assistants:[],canonical_file:"CLAUDE.md",canonical_content:""},git:{initialize:!0,gitignore_template:"gitignore-project",gitignore_content:"",user_name:"",user_email:"",hooks:{ai_sync:!1,data_security:!1,check_sensitive_dirs:!1}},connections:{databaseConnections:[],s3Connections:[],defaultDatabase:null,defaultStorageBucket:null},env:{variables:{},rawContent:`# Framework environment defaults
# Populate these values before running scaffold() or publishing.

# PostgreSQL connection
POSTGRES_HOST=127.0.0.1
POSTGRES_PORT=5432
POSTGRES_DB=postgres
POSTGRES_SCHEMA=public
POSTGRES_USER=postgres
POSTGRES_PASSWORD=

# S3-compatible storage (AWS S3, MinIO, etc.)
S3_BUCKET=
S3_ACCESS_KEY=
S3_SECRET_KEY=
S3_REGION=us-east-1
S3_ENDPOINT=
S3_SESSION_TOKEN=`,viewMode:"grouped",regroupOnSave:!1,groups:{}},directories_enabled:{},directories:{},render_dirs:{},extra_directories:[],extra_directories_enabled:{}}),w=()=>{const L=t.query.section;L&&["overview","author","scaffold","structure","quarto","connections","env","packages","ai","git"].includes(L)&&(f.value=L)};Ie(()=>t.query.section,L=>{L&&["overview","author","scaffold","structure","quarto","connections","env","packages","ai","git"].includes(L)?f.value=L:L||(f.value="overview")}),Ie(f,L=>{t.query.section!==L&&e.replace({query:{...t.query,section:L}})}),kn(async()=>{console.log("[DEBUG] NewProjectView mounted - starting initialization"),w();try{console.log("[DEBUG] Fetching global settings from /api/settings");const L=await fetch("/api/settings");if(console.log("[DEBUG] Settings response status:",L.status,L.ok),L.ok&&(r.value=await L.json(),r.value)){r.value.global?.projects_root&&(m.value.location=r.value.global.projects_root),m.value.author={...r.value.author},r.value.defaults?.project_type&&(m.value.type=r.value.defaults.project_type),r.value.defaults?.scaffold&&(m.value.scaffold={...m.value.scaffold,...r.value.defaults.scaffold}),r.value.defaults?.notebook_format&&(m.value.scaffold.notebook_format=r.value.defaults.notebook_format),m.value.scaffold.notebook_format||(m.value.scaffold.notebook_format="quarto"),r.value.defaults?.positron!==void 0&&(m.value.scaffold.positron=r.value.defaults.positron),(r.value.defaults?.default_packages||r.value.defaults?.packages)&&(m.value.packages=Lr({use_renv:r.value.defaults.use_renv,default_packages:r.value.defaults.default_packages||r.value.defaults.packages}));const $=a(r.value.defaults?.ai_assistants);if(m.value.ai={enabled:r.value.defaults?.ai_support!==!1,assistants:$.length>0?$:["claude"],canonical_file:r.value.defaults?.ai_canonical_file||"CLAUDE.md",canonical_content:""},u(),m.value.ai.enabled&&m.value.ai.canonical_file&&ce(m.value.ai.canonical_file,m.value.type),m.value.git.initialize=r.value.defaults?.use_git!==!1,m.value.git.user_name=r.value.git?.user_name||"",m.value.git.user_email=r.value.git?.user_email||"",r.value.defaults?.git_hooks&&(m.value.git.hooks={...r.value.defaults.git_hooks}),r.value.defaults?.connections){const Se=Vp(r.value.defaults.connections);m.value.connections.databaseConnections=Se.databaseConnections,m.value.connections.s3Connections=Se.s3Connections,m.value.connections.defaultDatabase=Se.defaultDatabase,m.value.connections.defaultStorageBucket=Se.defaultStorageBucket}if(r.value.defaults?.env){const Se=r.value.defaults.env;typeof Se=="string"?m.value.env.rawContent=Se:Se?.raw&&(m.value.env.rawContent=Se.raw),m.value.env.variables=O(m.value.env.rawContent),m.value.env.groups=A(m.value.env.variables)}const de=c();r.value.defaults?.quarto&&(de.html={...de.html,...r.value.defaults.quarto.html||{}},de.revealjs={...de.revealjs,...r.value.defaults.quarto.revealjs||{}},r.value.defaults.quarto.render_dir&&(de.render_dir=r.value.defaults.quarto.render_dir)),m.value.quarto=de;const ge={project:"gitignore-project",project_sensitive:"gitignore-project_sensitive",course:"gitignore-course",presentation:"gitignore-presentation"};m.value.git.gitignore_template=ge[m.value.type]||"gitignore-project",m.value.git.gitignore_template&&Q(m.value.git.gitignore_template)}const j=await fetch("/api/settings-catalog");j.ok&&(o.value=await j.json()),P(),_()}catch(L){console.error("[DEBUG] Failed to load settings:",L),console.error("[DEBUG] Error details:",L.message,L.stack),s.error("Load Error","Could not load default settings")}finally{console.log("[DEBUG] Initialization complete, loading =",l.value),l.value=!1,setTimeout(()=>{if(g.value&&g.value.$el){const L=g.value.$el.querySelector("input");L&&L.focus()}},100)}}),Ie(()=>m.value.type,L=>{P();const j={project:"gitignore-project",project_sensitive:"gitignore-project_sensitive",course:"gitignore-course",presentation:"gitignore-presentation"};m.value.git.gitignore_template=j[L]||"gitignore-project"}),Ie(()=>m.value.git.gitignore_template,L=>{L&&Q(L)}),Ie(()=>m.value.name,()=>{r.value?.global?.projects_root&&se()}),Ie(()=>m.value.ai.enabled,L=>{L&&m.value.ai.canonical_file&&ce(m.value.ai.canonical_file,m.value.type)}),Ie(()=>m.value.ai.canonical_file,L=>{L&&m.value.ai.enabled&&ce(L,m.value.type)}),Ie(()=>m.value.type,L=>{m.value.ai.canonical_file==="CLAUDE.md"&&m.value.ai.enabled&&ce("CLAUDE.md",L)});const P=()=>{if(!o.value?.project_types)return;const L=o.value.project_types[m.value.type];if(!L?.directories)return;const j=r.value?.project_types?.[m.value.type];if(!m.value.git.gitignore_template||m.value.git.gitignore_template==="gitignore-project"){const ge={project:"gitignore-project",project_sensitive:"gitignore-sensitive",course:"gitignore-course",presentation:"gitignore-presentation"};m.value.git.gitignore_template=ge[m.value.type]||"gitignore-project"}Q(m.value.git.gitignore_template);const $=jx(L,j||{},{},{});m.value.directories=$.directories,m.value.directories_enabled=$.directories_enabled,m.value.render_dirs=$.render_dirs,m.value.extra_directories=$.extra_directories||[],m.value.extra_directories_enabled=j?.extra_directories_enabled||{};const de=L?.quarto?.render_dir;de&&(m.value.quarto.render_dir=typeof de=="object"&&de.default||de),console.log("[DEBUG] loadProjectTypeDefaults() finished - packages still:",m.value.packages.default_packages)},U=L=>o.value?.project_types?.[L]?.label||L,O=(L="")=>{const j={};return L.split(/\r?\n/).forEach($=>{const de=$.trim();if(!de||de.startsWith("#")||!de.includes("="))return;const[ge,...Se]=de.split("=");j[ge.trim()]=Se.join("=").replace(/^"|"$/g,"")}),j},A=(L={})=>{const j=Object.entries(L);return j.length?j.reduce(($,[de,ge])=>{const Se=de.includes("_")?de.split("_")[0]:"Other";return $[Se]||($[Se]={}),$[Se][de]={defined:!!ge,used:!1,used_in:[],value:ge},$},{}):{}};Ie(()=>m.value.env.variables,L=>{m.value.env.groups=A(L||{})},{deep:!0});const _=()=>{m.value.env.rawContent&&(m.value.env.variables=O(m.value.env.rawContent),m.value.env.groups=A(m.value.env.variables))},M=z(()=>({overview:"Overview",basics:"Basics",author:"Author & Metadata",scaffold:"Scaffold Behavior",structure:"Project Structure",quarto:"Quarto",connections:"Connections",env:".env Defaults",packages:"Packages & Dependencies",ai:"AI Assistants",git:"Git & Hooks",review:"Review & Create"})[f.value]||"New Project"),W=z(()=>({overview:"Quick overview of your project settings. We used your Framework Project Defaults as a starting point.",basics:"Essential project settings including name, location, type, and editor support.",author:"Configure author information embedded in project templates.",scaffold:"Runtime settings that control what happens when scaffold() runs.",structure:"Customize which directories to create for this project type.",quarto:"Adjust Quarto rendering defaults for notebooks, docs, and slides.",connections:"Database and storage connections for this project.",env:"Environment variables template for this project.",packages:"Configure package management and default packages.",ai:"Configure AI assistant integration for this project.",git:"Configure version control and git hooks.",review:"Review your project configuration and create the project."})[f.value]||"");z(()=>({vscode:"Positron / VS Code",rstudio:"RStudio","rstudio,vscode":"Both",none:"Other"})[m.value.scaffold.ide]||m.value.scaffold.ide),z(()=>{const L=[];return m.value.git.hooks.ai_sync&&L.push("Sync AI files"),m.value.git.hooks.data_security&&L.push("Check for secrets"),m.value.git.hooks.check_sensitive_dirs&&L.push("Warn about sensitive dirs"),L});const ue=z(()=>{const L=m.value.connections.databaseConnections.length,j=m.value.connections.s3Connections.length;return{databases:L,buckets:j}}),ee=z(()=>{const L=m.value.env?.variables||{};return Object.keys(L).length});Ie(()=>m.value.connections.databaseConnections,L=>{const j=m.value.connections.defaultDatabase,$=L.some(de=>de.name===j);if(L.length===1){const de=L[0];de?.name&&de.name!=="framework_db"&&(m.value.connections.defaultDatabase=de.name)}else j&&!$&&(m.value.connections.defaultDatabase=null)},{deep:!0}),Ie(()=>m.value.connections.s3Connections,L=>{const j=m.value.connections.defaultStorageBucket,$=L.some(de=>de.name===j);if(L.length===1){const de=L[0];de?.name&&(m.value.connections.defaultStorageBucket=de.name)}else j&&!$&&(m.value.connections.defaultStorageBucket=null)},{deep:!0});const F=z(()=>{const L=m.value.name||"Untitled Project",j=m.value.author?.name||"",$=Z.value,de=U(m.value.type),ge=$e("workspace"),Se=$e("input"),Re=$e("output"),Fe=m.value.packages?.default_packages?.length||0,et=m.value.packages?.use_renv||!1,me=ee.value,yt=m.value.ai?.enabled||!1,Rt=m.value.ai?.assistants?.[0]?m.value.ai.assistants.map(At=>At.charAt(0).toUpperCase()+At.slice(1)).join(", "):"",Vt=m.value.ai?.canonical_file||"",nt=m.value.git?.initialize||!1,an=ue.value.databases,Ht=ue.value.buckets,bt=an>0||Ht>0?`${an} database${an!==1?"s":""}${Ht>0?`  ${Ht} bucket${Ht!==1?"s":""}`:""}`:"framework_db only";return[{id:"basics",title:"Basics",section:"basics",content:`<div>${L}  ${j}  ${de}</div><div class="text-sm text-gray-600 dark:text-gray-400 mt-1">${$}</div>`},{id:"structure",title:"Project Structure",section:"structure",content:`${de}  ${ge} workspace  ${Se} input  ${Re} output`},{id:"packages",title:"Packages",section:"packages",content:Fe>0?`${Fe} packages  renv ${et?"enabled":"disabled"}`:`renv: ${et?"enabled":"disabled"}`},{id:"env",title:".env Defaults",section:"env",content:me>0?`${me} variable${me===1?"":"s"}`:"No variables defined"},{id:"ai",title:"AI Assistants",section:"ai",content:yt?`<span class="text-green-600 dark:text-green-400">${Rt}  ${Vt}</span>`:'<span class="text-gray-600 dark:text-gray-400">Disabled</span>'},{id:"git",title:"Git & Hooks",section:"git",content:`Git: ${nt?"enabled":"disabled"}`},{id:"connections",title:"Connections",section:"connections",content:bt},{id:"scaffold",title:"Scaffold Behavior",section:"scaffold",content:`${m.value.scaffold?.source_all_functions?"Functions loaded from functions/":"Does not load functions"}  ${m.value.scaffold?.set_theme_on_scaffold?`ggplot2: ${(m.value.scaffold.ggplot_theme||"theme_minimal").replace("theme_","")}`:"No ggplot theme"}  ${m.value.scaffold?.set_seed?`Seed: ${m.value.scaffold.seed}`:"No random seed"}`}]}),ae=z({get(){return Ip({useGit:m.value.git.initialize,gitHooks:m.value.git.hooks,git:m.value.git})},set(L){jp({gitTarget:m.value.git,setUseGit:j=>{m.value.git.initialize=j}},L)}}),Z=z(()=>{const L=m.value.location,j=r.value?.global?.projects_root;return!L||L===j?"(not set)":L}),B=L=>{m.value.location=L;const j=r.value?.global?.projects_root||"",$=typeof L=="string"?L.trim():"";!$||j&&$===j?(b.value=!0,se()):b.value=!1},J=L=>L?L.startsWith("http")?L:new URL(L,globalThis.location?.origin||"http://localhost").toString():"",Q=async L=>{try{const j=await fetch(J(`/api/templates/${L}`));if(j.ok){const $=await j.json();$.success&&$.contents&&(m.value.git.gitignore_content=$.contents)}}catch(j){console.error("Failed to load gitignore template:",j)}},ce=async(L,j)=>{try{let $;if(L==="CLAUDE.md")switch(j){case"project_sensitive":$="ai_claude_sensitive";break;case"course":$="ai_claude_course";break;case"presentation":$="ai_claude_presentation";break;default:$="ai_claude_project"}else L==="AGENTS.md"?$="ai_agents":L===".github/copilot-instructions.md"&&($="ai_copilot");const de=await fetch(J(`/api/templates/${$}`));if(de.ok){const ge=await de.json();ge.success&&ge.contents&&(m.value.ai.canonical_content=ge.contents)}}catch($){console.error("Failed to load AI template:",$)}};z(()=>o.value?.project_types?o.value.project_types[m.value.type]?.directories||{}:{}),z(()=>{if(!o.value?.project_types)return[];const L=o.value.project_types[m.value.type];return L?.directories?Object.keys(L.directories).filter(j=>{const $=L.directories[j];return $&&$.enabled_by_default===!1}):[]}),z(()=>Object.values(m.value.directories_enabled).filter(L=>L).length);const ve=z(()=>(m.value.extra_directories||[]).filter(L=>L.type==="input"&&L._source==="global"));z(()=>ve.value.filter(L=>L.scope==="private")),z(()=>ve.value.filter(L=>L.scope==="public")),z(()=>(m.value.extra_directories||[]).filter(L=>L.type==="workspace"&&L._source==="global"));const je=z(()=>(m.value.extra_directories||[]).filter(L=>L.type==="output"&&L._source==="global"));z(()=>je.value.filter(L=>L.scope==="private")),z(()=>je.value.filter(L=>L.scope==="public"));const $e=L=>Object.keys(m.value.directories_enabled).filter($=>m.value.directories_enabled[$]?L==="workspace"?$==="notebooks"||$==="scripts"||$==="functions":L==="input"?$.startsWith("inputs_"):L==="output"?$.startsWith("outputs_"):L==="temporary"?$==="scratch":!1:!1).length,Me=[{key:"notebooks",label:"Notebooks",hint:"Quarto or R Markdown notebooks for analysis.",defaultRenderDir:"outputs/notebooks"},{key:"docs",label:"Documentation",hint:"Codebooks, documentation, and other reference materials.",defaultRenderDir:"outputs/docs"}],We=[{key:"functions",label:"Functions",hint:"R files here are sourced by scaffold(), so helper functions are available in every project session."},{key:"scripts",label:"Scripts",hint:"Reusable R scripts, job runners, or automation tasks."}],ct=[{key:"inputs_raw",label:"Raw data",hint:"Read-only exports from source systems."},{key:"inputs_intermediate",label:"Intermediate data",hint:"Data after light cleaning or pre-processing steps."},{key:"inputs_final",label:"Analysis-ready data",hint:"Final inputs ready for modeling or reporting."}],rt=[{key:"outputs_tables",label:"Tables",hint:"Publishable tables ready for reports or manuscripts."},{key:"outputs_figures",label:"Figures",hint:"Final plots and graphics."},{key:"outputs_models",label:"Models",hint:"Serialized models or model summaries."},{key:"outputs_reports",label:"Reports",hint:"Final reports and deliverables ready for publication."}],tt=[{key:"scratch",label:"Scratch",hint:"Short-lived explorations (gitignored)."}],oe=[{privateKey:"inputs_private_raw",publicKey:"inputs_public_raw",label:"Raw data",privateLabel:"Raw data (private)",publicLabel:"Raw data (public)"},{privateKey:"inputs_private_intermediate",publicKey:"inputs_public_intermediate",label:"Intermediate data",privateLabel:"Intermediate data (private)",publicLabel:"Intermediate data (public)"},{privateKey:"inputs_private_final",publicKey:"inputs_public_final",label:"Analysis-ready data",privateLabel:"Analysis-ready data (private)",publicLabel:"Analysis-ready data (public)"}],ne=[{privateKey:"outputs_private_tables",publicKey:"outputs_public_tables",label:"Tables",privateLabel:"Tables (private)",publicLabel:"Tables (public)"},{privateKey:"outputs_private_figures",publicKey:"outputs_public_figures",label:"Figures",privateLabel:"Figures (private)",publicLabel:"Figures (public)"},{privateKey:"outputs_private_models",publicKey:"outputs_public_models",label:"Models",privateLabel:"Models (private)",publicLabel:"Models (public)"},{privateKey:"outputs_private_reports",publicKey:"outputs_public_reports",label:"Reports",privateLabel:"Reports (private)",publicLabel:"Reports (public)"}],K=(L,j)=>o.value?.project_types?.[L]?.directories?.[j]||{},E=(L,j)=>j.map($=>{const de=K(L,$.key);return{key:$.key,label:de.label||$.label,hint:de.hint||$.hint||""}});z(()=>E("project",Me).map(L=>({...L,defaultRenderDir:Me.find(j=>j.key===L.key)?.defaultRenderDir||""}))),z(()=>E("project",We)),z(()=>E("project",ct)),z(()=>E("project",rt)),z(()=>E("project",tt));const re=L=>L.map(j=>{const $=K("project_sensitive",j.privateKey),de=K("project_sensitive",j.publicKey);return{...j,privateLabel:$.label||j.privateLabel,publicLabel:de.label||j.publicLabel}});z(()=>re(oe)),z(()=>re(ne));const T=z(()=>Array.isArray(m.value.extra_directories)?m.value.extra_directories:[]),N=L=>{m.value.extra_directories=L},G=()=>{if(!o.value?.project_types?.[m.value.type])return;const L=o.value.project_types[m.value.type];L.directories&&(m.value.directories={},Object.keys(L.directories).forEach(j=>{m.value.directories[j]=L.directories[j].default})),L.directories&&(m.value.directories_enabled={},Object.keys(L.directories).forEach(j=>{m.value.directories_enabled[j]=L.directories[j].enabled_by_default===!0})),m.value.render_dirs={},L.gitignore_template&&(m.value.git.gitignore_content=L.gitignore_template)},le=L=>{e.push({query:{...t.query,section:L}})},se=()=>{if(!b.value||!m.value.name||!m.value.name.trim())return;const L=r.value?.global?.projects_root||"";if(!L)return;const j=(m.value.location||"").trim();if(j&&!j.startsWith(L))return;const $=m.value.name.toLowerCase().trim().replace(/[\s_]+/g,"-").replace(/[^a-z0-9-]/g,"").replace(/-+/g,"-").replace(/^-|-$/g,"");if(!$){m.value.location=L;return}const de=L.replace(/\/+$/,"");m.value.location=`${de}/${$}`},ie=async()=>{if(!m.value.name||!m.value.name.trim()){s.error("Validation Error","Project name is required"),le("overview");return}if(!m.value.location||!m.value.location.trim()){s.error("Validation Error","Project location is required"),le("overview");return}try{p.value=!0;const L=o.value?.project_types?.[m.value.type],j={};L?.directories&&Object.entries(L.directories).forEach(([Re,Fe])=>{m.value.directories_enabled[Re]&&(j[Re]=m.value.directories[Re]||Fe.default)});const $=$p({databaseConnections:m.value.connections.databaseConnections,s3Connections:m.value.connections.s3Connections,defaultDatabase:m.value.connections.defaultDatabase,defaultStorageBucket:m.value.connections.defaultStorageBucket}),de={name:m.value.name.trim(),location:m.value.location.trim(),type:m.value.type,author:m.value.author,scaffold:m.value.scaffold,packages:$x(m.value.packages),ai:m.value.ai,git:m.value.git,connections:$,env:{raw:m.value.env.rawContent||""},quarto:m.value.quarto,directories:j,render_dirs:m.value.render_dirs||{},extra_directories:(m.value.extra_directories||[]).filter(Re=>{const Fe=Re.key&&Re.key.trim()&&Re.label&&Re.label.trim()&&Re.path&&Re.path.trim(),et=m.value.extra_directories_enabled?.[Re.key]!==!1;return Fe&&et}),extra_directories_enabled:m.value.extra_directories_enabled||{}},ge=await fetch("/api/projects/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(de)});if(!ge.ok){const Re=await ge.json();throw new Error(Re.message||"Failed to create project")}const Se=await ge.json();if(Se.success===!1)throw new Error(Se.error||"Project creation failed");s.success("Project Created",`${m.value.name} has been created successfully`),await i(),Se.project_id?e.push(`/project/${Se.project_id}`):e.push("/projects")}catch(L){console.error("Failed to create project:",L),s.error("Creation Failed",L.message||"Could not create the project")}finally{p.value=!1}},be=L=>{(L.metaKey||L.ctrlKey)&&L.key==="s"&&(L.preventDefault(),ie())};return kn(()=>{window.addEventListener("keydown",be)}),ao(()=>{window.removeEventListener("keydown",be)}),(L,j)=>(v(),k("div",C6,[h("nav",A6,[j[29]||(j[29]=h("h2",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"New Project",-1)),h("div",E6,[(v(),k(xe,null,Ve(d,$=>(v(),k(xe,{key:$.id},[$.id==="basics"?(v(),Ee(Wu,{key:0},{default:te(()=>[...j[28]||(j[28]=[fe("Settings",-1)])]),_:1})):q("",!0),h("a",{href:"#",onClick:It(de=>f.value=$.id,["prevent"]),class:we(["flex items-center gap-2 px-3 py-2 rounded-md text-sm transition",f.value===$.id?"bg-sky-50 text-sky-700 font-medium dark:bg-sky-900/20 dark:text-sky-400":"text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-800"])},[$.icon?(v(),Ee(Nn($.icon),{key:0,class:"h-4 w-4"})):$.svgIcon?(v(),k("svg",{key:1,class:"h-4 w-4",fill:$.svgFill??"none",viewBox:$.svgViewBox??"0 0 24 24",stroke:$.svgStroke??"currentColor"},[h("path",{"stroke-linecap":$.svgStrokeLinecap??"round","stroke-linejoin":$.svgStrokeLinejoin??"round","stroke-width":$.svgStrokeWidth??2,fill:$.svgPathFill??"none",d:$.svgIcon},null,8,P6)],8,D6)):q("",!0),fe(" "+X($.label),1)],10,T6)],64))),64))]),h("div",R6,[C(Ye,{variant:"primary",size:"md",class:"w-full",disabled:p.value||!m.value.name||!m.value.location,onClick:ie},{default:te(()=>[fe(X(p.value?"Creating...":"Create Project"),1)]),_:1},8,["disabled"])])]),h("div",O6,[C(po,{title:M.value,description:W.value},null,8,["title","description"]),h("div",L6,[Ge(h("div",null,[C(Cp,{cards:F.value,onNavigate:j[0]||(j[0]=$=>f.value=$)},null,8,["cards"])],512),[[it,f.value==="overview"]]),Ge(h("div",null,[h("div",M6,[h("div",I6,[C(Ce,{ref_key:"projectNameInput",ref:g,modelValue:m.value.name,"onUpdate:modelValue":j[1]||(j[1]=$=>m.value.name=$),label:"Project Name",hint:"Human-readable name for your project",placeholder:"My Analysis Project",required:""},null,8,["modelValue"]),C(Ce,{"model-value":m.value.location,"onUpdate:modelValue":B,label:"Project Location",hint:"Directory where the project will be created",placeholder:"e.g., ~/projects or /Users/yourname/code"},null,8,["model-value"]),C(pn,{modelValue:m.value.type,"onUpdate:modelValue":j[2]||(j[2]=$=>m.value.type=$),label:"Project Type",hint:"Choose the template structure for your project"},{default:te(()=>[...j[30]||(j[30]=[h("option",{value:"project"},"Standard Project",-1),h("option",{value:"project_sensitive"},"Privacy Sensitive Project",-1),h("option",{value:"course"},"Course",-1),h("option",{value:"presentation"},"Presentation",-1)])]),_:1},8,["modelValue"]),h("div",null,[j[32]||(j[32]=h("label",{class:"block text-sm font-semibold text-gray-900 dark:text-white mb-3"}," Supported Editors ",-1)),C(Ys,{modelValue:m.value.scaffold.positron,"onUpdate:modelValue":j[3]||(j[3]=$=>m.value.scaffold.positron=$),id:"support-positron",description:"Creates .code-workspace file for Positron/VS Code users"},{default:te(()=>[...j[31]||(j[31]=[fe(" Positron / VS Code ",-1)])]),_:1},8,["modelValue"]),j[33]||(j[33]=h("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-3"}," RStudio supported by default ",-1))]),C(pn,{modelValue:m.value.scaffold.notebook_format,"onUpdate:modelValue":j[4]||(j[4]=$=>m.value.scaffold.notebook_format=$),label:"Default Notebook Format",hint:"Format used when creating new notebooks"},{default:te(()=>[...j[34]||(j[34]=[h("option",{value:"quarto"},"Quarto (.qmd)",-1),h("option",{value:"rmarkdown"},"R Markdown (.Rmd)",-1)])]),_:1},8,["modelValue"]),h("div",j6,[C(Ap,{modelValue:m.value.author,"onUpdate:modelValue":j[5]||(j[5]=$=>m.value.author=$)},null,8,["modelValue"])])])])],512),[[it,f.value==="basics"]]),Ge(h("div",null,[h("div",V6,[j[35]||(j[35]=h("div",null,[h("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"}," Scaffold Behavior "),h("p",{class:"text-sm text-gray-600 dark:text-gray-400"},[fe(" Automatic actions when "),h("code",{class:"px-1.5 py-0.5 bg-gray-200 dark:bg-gray-700 rounded text-xs"},"scaffold()"),fe(" runs to initialize your project environment. ")])],-1)),C(Pp,{modelValue:m.value.scaffold,"onUpdate:modelValue":j[6]||(j[6]=$=>m.value.scaffold=$),flush:""},null,8,["modelValue"])])],512),[[it,f.value==="scaffold"]]),Ge(h("div",$6,[h("div",N6,[C(v3,{legend:"Project Type",description:"Select a project type to customize the directory structure."},{default:te(()=>[C(va,{modelValue:m.value.type,"onUpdate:modelValue":j[7]||(j[7]=$=>m.value.type=$),id:"type-project",name:"project-type",value:"project"},{default:te(()=>[...j[36]||(j[36]=[h("div",null,[h("div",{class:"font-medium text-sm"},"Standard Project"),h("div",{class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5"}," Full-featured with organized data, work, and output directories ")],-1)])]),_:1},8,["modelValue"]),C(va,{modelValue:m.value.type,"onUpdate:modelValue":j[8]||(j[8]=$=>m.value.type=$),id:"type-sensitive",name:"project-type",value:"project_sensitive"},{default:te(()=>[...j[37]||(j[37]=[h("div",null,[h("div",{class:"font-medium text-sm"},"Privacy Sensitive Project"),h("div",{class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5"}," Enhanced privacy controls with separate private/public flows ")],-1)])]),_:1},8,["modelValue"]),C(va,{modelValue:m.value.type,"onUpdate:modelValue":j[9]||(j[9]=$=>m.value.type=$),id:"type-course",name:"project-type",value:"course"},{default:te(()=>[...j[38]||(j[38]=[h("div",null,[h("div",{class:"font-medium text-sm"},"Course/Teaching"),h("div",{class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5"}," Simplified structure for teaching materials ")],-1)])]),_:1},8,["modelValue"]),C(va,{modelValue:m.value.type,"onUpdate:modelValue":j[10]||(j[10]=$=>m.value.type=$),id:"type-presentation",name:"project-type",value:"presentation"},{default:te(()=>[...j[39]||(j[39]=[h("div",null,[h("div",{class:"font-medium text-sm"},"Presentation"),h("div",{class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5"}," Minimal structure for slides and presentations ")],-1)])]),_:1},8,["modelValue"])]),_:1})]),o.value?(v(),Ee(Lp,{key:0,"project-type":m.value.type,directories:m.value.directories,"render-dirs":m.value.render_dirs,enabled:m.value.directories_enabled,"extra-directories":T.value,settings:m.value,gitignore:m.value.git.gitignore_content,catalog:o.value.project_types?.[m.value.type],"new-extra-ids":x.value,"allow-destruction":!0,"onUpdate:directories":j[11]||(j[11]=$=>m.value.directories=$),"onUpdate:renderDirs":j[12]||(j[12]=$=>m.value.render_dirs=$),"onUpdate:enabled":j[13]||(j[13]=$=>m.value.directories_enabled=$),"onUpdate:extraDirectories":N,"onUpdate:gitignore":j[14]||(j[14]=$=>m.value.git.gitignore_content=$),"onUpdate:newExtraIds":j[15]||(j[15]=$=>x.value=$),onReset:G},null,8,["project-type","directories","render-dirs","enabled","extra-directories","settings","gitignore","catalog","new-extra-ids"])):q("",!0)],512),[[it,f.value==="structure"]]),Ge(h("div",null,[C(dn,{flush:""},{default:te(()=>[C(Op,{modelValue:m.value.quarto,"onUpdate:modelValue":j[16]||(j[16]=$=>m.value.quarto=$)},null,8,["modelValue"])]),_:1})],512),[[it,f.value==="quarto"]]),Ge(h("div",null,[C(Rp,{"database-connections":m.value.connections.databaseConnections,"onUpdate:databaseConnections":j[17]||(j[17]=$=>m.value.connections.databaseConnections=$),"s3-connections":m.value.connections.s3Connections,"onUpdate:s3Connections":j[18]||(j[18]=$=>m.value.connections.s3Connections=$),"default-database":m.value.connections.defaultDatabase,"onUpdate:defaultDatabase":j[19]||(j[19]=$=>m.value.connections.defaultDatabase=$),"default-storage-bucket":m.value.connections.defaultStorageBucket,"onUpdate:defaultStorageBucket":j[20]||(j[20]=$=>m.value.connections.defaultStorageBucket=$)},null,8,["database-connections","s3-connections","default-database","default-storage-bucket"])],512),[[it,f.value==="connections"]]),Ge(h("div",null,[j[40]||(j[40]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Environment variables template for this project. These defaults help connections work immediately. ",-1)),C(Mp,{groups:m.value.env.groups,variables:m.value.env.variables,"onUpdate:variables":j[21]||(j[21]=$=>m.value.env.variables=$),"raw-content":m.value.env.rawContent,"onUpdate:rawContent":j[22]||(j[22]=$=>m.value.env.rawContent=$),"view-mode":m.value.env.viewMode,"onUpdate:viewMode":j[23]||(j[23]=$=>m.value.env.viewMode=$),"regroup-on-save":m.value.env.regroupOnSave,"onUpdate:regroupOnSave":j[24]||(j[24]=$=>m.value.env.regroupOnSave=$),"show-save-button":!1,"allow-show-values-toggle":!0},null,8,["groups","variables","raw-content","view-mode","regroup-on-save"])],512),[[it,f.value==="env"]]),Ge(h("div",null,[C(Ep,{modelValue:m.value.packages,"onUpdate:modelValue":j[25]||(j[25]=$=>m.value.packages=$),"show-renv-toggle":!0,flush:!1},null,8,["modelValue"])],512),[[it,f.value==="packages"]]),Ge(h("div",null,[h("div",B6,[j[42]||(j[42]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Framework maintains context files for selected assistants and keeps them in sync before commits. ",-1)),C(Tp,{modelValue:m.value.ai,"onUpdate:modelValue":j[26]||(j[26]=$=>m.value.ai=$),flush:!0,"show-editor":!0,"editor-height":"500px"},{"editor-description":te(()=>[...j[41]||(j[41]=[fe(" Edit the canonical file directly. This will be pre-populated when the project is created. ",-1)])]),_:1},8,["modelValue"])])],512),[[it,f.value==="ai"]]),Ge(h("div",null,[C(Dp,{modelValue:ae.value,"onUpdate:modelValue":j[27]||(j[27]=$=>ae.value=$)},{note:te(()=>[...j[43]||(j[43]=[fe(" Project-specific .gitignore templates can be customized in Project Defaults. ",-1)])]),_:1},8,["modelValue"])],512),[[it,f.value==="git"]])])])]))}},U6={class:"mt-2 block text-sm font-semibold text-gray-900 dark:text-white"},z6={key:0,class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},H6={class:"mt-2 text-sm font-semibold text-gray-900 dark:text-white"},W6={key:0,class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},q6={key:1,class:"mt-6"},G6={__name:"EmptyState",props:{title:{type:String,required:!0},description:{type:String,default:null},icon:{type:String,default:null,validator:n=>["database","folder","document","users","inbox","photo"].includes(n)},action:{type:Boolean,default:!1}},emits:["click"],setup(n,{emit:e}){const t=n,s=e,i=z(()=>{const l=["relative","block","w-full","rounded-lg","border-2","border-dashed","border-gray-300","p-12","text-center","dark:border-white/15"];return t.action&&l.push("hover:border-gray-400","focus:outline-2","focus:outline-offset-2","focus:outline-sky-600","dark:hover:border-white/25","dark:focus:outline-sky-500","transition-colors"),l.join(" ")}),r=z(()=>({database:()=>Bt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Bt("path",{d:"M8 14v20c0 4.418 7.163 8 16 8 1.381 0 2.721-.087 4-.252M8 14c0 4.418 7.163 8 16 8s16-3.582 16-8M8 14c0-4.418 7.163-8 16-8s16 3.582 16 8m0 0v14m0-4c0 4.418-7.163 8-16 8S8 28.418 8 24m32 10v6m0 0v6m0-6h6m-6 0h-6"})]),folder:()=>Bt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Bt("path",{d:"M3 7v30a4 4 0 004 4h34a4 4 0 004-4V13a4 4 0 00-4-4H23.343a4 4 0 01-2.829-1.172l-2.828-2.828A4 4 0 0014.858 4H7a4 4 0 00-4 4v0zM37 17v6m0 0v6m0-6h6m-6 0h-6"})]),document:()=>Bt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Bt("path",{d:"M8 4a4 4 0 00-4 4v32a4 4 0 004 4h32a4 4 0 004-4V8a4 4 0 00-4-4H8zm24 16v6m0 0v6m0-6h6m-6 0h-6"})]),users:()=>Bt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Bt("path",{d:"M17 21a5 5 0 110-10 5 5 0 010 10zm-6.5 8a7.5 7.5 0 0115 0H10.5zM31 21a5 5 0 110-10 5 5 0 010 10zm-6.5 8a7.5 7.5 0 0115 0H24.5z"})]),inbox:()=>Bt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Bt("path",{d:"M4 8h40M4 8v28a4 4 0 004 4h32a4 4 0 004-4V8M4 8l18 14a2 2 0 002.4 0L44 8"})]),photo:()=>Bt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Bt("path",{d:"M4 8a4 4 0 014-4h32a4 4 0 014 4v32a4 4 0 01-4 4H8a4 4 0 01-4-4V8zm10 6a3 3 0 100-6 3 3 0 000 6zM4 40l12-12 8 8 8-8L44 40"})])})[t.icon]||null),o=()=>{t.action&&s("click")};return(l,a)=>n.action?(v(),k("button",{key:0,type:"button",onClick:o,class:we(i.value)},[pt(l.$slots,"icon",{},()=>[n.icon?(v(),Ee(Nn(r.value),{key:0,class:"mx-auto size-12 text-gray-400 dark:text-gray-500"})):q("",!0)]),h("span",U6,X(n.title),1),n.description?(v(),k("p",z6,X(n.description),1)):q("",!0)],2)):(v(),k("div",{key:1,class:we(i.value.replace("hover:border-gray-400","").replace("focus:outline-2",""))},[pt(l.$slots,"icon",{},()=>[n.icon?(v(),Ee(Nn(r.value),{key:0,class:"mx-auto size-12 text-gray-400 dark:text-gray-500"})):q("",!0)]),h("h3",H6,X(n.title),1),n.description?(v(),k("p",W6,X(n.description),1)):q("",!0),l.$slots.actions?(v(),k("div",q6,[pt(l.$slots,"actions")])):q("",!0)],2))}},K6=["for"],J6={class:"mt-2"},Q6=["id","value","placeholder","rows","required","disabled"],Y6={key:1,class:"mt-2 text-sm text-gray-500 dark:text-gray-400"},gv={__name:"Textarea",props:{id:{type:String,default:()=>`textarea-${Math.random().toString(36).substr(2,9)}`},modelValue:{type:String,default:""},label:{type:String,default:null},placeholder:{type:String,default:""},rows:{type:Number,default:4},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},hint:{type:String,default:null},monospace:{type:Boolean,default:!1},textareaClass:{type:[String,Array,Object],default:""}},emits:["update:modelValue"],setup(n){const e=n,t=z(()=>["block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-sky-600 sm:text-sm/6 dark:bg-white/5 dark:text-white dark:outline-white/10 dark:placeholder:text-gray-500 dark:focus:outline-sky-500",e.monospace?"font-mono text-sm leading-6":"",e.textareaClass]);return(s,i)=>(v(),k("div",null,[n.label?(v(),k("label",{key:0,for:n.id,class:"block text-sm/6 font-medium text-gray-900 dark:text-white"},X(n.label),9,K6)):q("",!0),h("div",J6,[h("textarea",{id:n.id,value:n.modelValue,placeholder:n.placeholder,rows:n.rows,required:n.required,disabled:n.disabled,onInput:i[0]||(i[0]=r=>s.$emit("update:modelValue",r.target.value)),class:we(t.value)},null,42,Q6)]),n.hint?(v(),k("p",Y6,X(n.hint),1)):q("",!0)]))}},X6={class:"space-y-6"},Z6={key:0},e$={class:"mt-1 font-mono text-sm text-gray-900 dark:text-gray-100 break-words"},t$={key:1},n$={class:"grid gap-4 sm:grid-cols-2"},s$=["value"],i$={class:"sm:col-span-2"},r$={key:0,class:"sm:col-span-2"},o$={class:"space-y-3"},l$={class:"flex items-center justify-between"},a$={key:0,class:"rounded-md border border-dashed border-gray-300 p-4 text-sm text-gray-500 dark:border-gray-600 dark:text-gray-400"},u$={class:"grid gap-3 sm:grid-cols-[1fr_auto] sm:items-start"},c$={class:"mt-3"},d$={key:0,class:"mt-2 text-xs text-gray-500 dark:text-gray-400"},f$={class:"mt-2 flex justify-end"},h$={key:2,class:"text-sm text-red-600 dark:text-red-400"},p$={key:3,class:"text-sm text-red-600 dark:text-red-400"},m$={key:4,class:"text-sm text-red-600 dark:text-red-400"},g$='{"source": "data-catalog"}',v$={__name:"DataCatalogEditModal",props:{modelValue:{type:Boolean,default:!1},mode:{type:String,default:"edit",validator:n=>["edit","create"].includes(n)},entry:{type:Object,default:null},saving:{type:Boolean,default:!1},error:{type:String,default:null}},emits:["update:modelValue","save"],setup(n,{emit:e}){const t=n,s=e,i=Object.freeze([{value:"csv",label:"CSV (comma-separated)"},{value:"tsv",label:"TSV (tab-separated)"},{value:"csv_custom",label:"Delimited text (custom)"},{value:"rds",label:"RDS (R serialized)"},{value:"excel",label:"Excel (.xlsx / .xls)"},{value:"stata",label:"Stata (.dta)"},{value:"spss",label:"SPSS (.sav / .zsav)"},{value:"spss_por",label:"SPSS Portable (.por)"},{value:"sas",label:"SAS (.sas7bdat / .sas7bcat)"},{value:"sas_xpt",label:"SAS Transport (.xpt)"}]),r=["path","type","description","locked","delimiter"],o=Y(null),l=Y(!1),a=Y(!1),u=z(()=>t.mode==="create"),c=cs({path:"",fullKey:"",type:"",description:"",delimiter:"",locked:!1,additionalFields:[]}),d=z(()=>c.type==="csv_custom"),f=z(()=>{if(!t.entry&&!u.value)return null;const J=W();return J.length>0?`Duplicate metadata keys: ${J.join(", ")}`:c.additionalFields.some(Q=>!Q.key.trim())?"Metadata keys cannot be empty.":null}),p=z(()=>c.path.trim()?null:"File path is required"),g=z(()=>u.value?a.value?p.value:null:p.value);Ie(()=>t.entry,J=>{if(!J){O();return}U(J)},{immediate:!0}),Ie(()=>c.path,J=>{if(l.value)return;const Q=w(J);Q&&(Q.type==="csv"?(c.type="csv",c.delimiter=x("csv")):Q.type==="tsv"?(c.type="tsv",c.delimiter=x("tsv")):(c.type=Q.type,c.delimiter=""))}),Ie(()=>c.type,J=>{J&&(J==="csv"?c.delimiter=x("csv"):J==="tsv"?c.delimiter=x("tsv"):J!=="csv_custom"&&(c.delimiter=""))});function b(){return`field-${Math.random().toString(36).slice(2,9)}`}function x(J){return J==="csv"?"comma":J==="tsv"?"tab":""}function m(J,Q){if(!J)return!1;const ce=J.toLowerCase();return Q==="csv"?ce==="comma"||J===",":Q==="tsv"?ce==="tab"||J==="	":!1}function w(J){if(!J)return null;const Q=J.toLowerCase();return Q.endsWith(".csv")?{type:"csv",delimiter:"comma"}:Q.endsWith(".tsv")||Q.endsWith(".txt")||Q.endsWith(".dat")?{type:"tsv",delimiter:"tab"}:Q.endsWith(".rds")?{type:"rds",delimiter:""}:Q.endsWith(".xlsx")||Q.endsWith(".xls")?{type:"excel",delimiter:""}:Q.endsWith(".dta")?{type:"stata",delimiter:""}:Q.endsWith(".sav")||Q.endsWith(".zsav")?{type:"spss",delimiter:""}:Q.endsWith(".por")?{type:"spss_por",delimiter:""}:Q.endsWith(".sas7bdat")||Q.endsWith(".sas7bcat")?{type:"sas",delimiter:""}:Q.endsWith(".xpt")?{type:"sas_xpt",delimiter:""}:null}function P(J){if(!J){c.type="",c.delimiter="",l.value=!1;return}c.type=J,l.value=!0,J==="csv"?c.delimiter=x("csv"):J==="tsv"?c.delimiter=x("tsv"):c.delimiter=""}function U(J){if(O(),a.value=!1,u.value){const $e=J?.data||{};c.fullKey=J?.fullKey||"",c.path=$e.path||"",c.type=$e.type||"",c.description=$e.description||"",c.locked=!!$e.locked,c.delimiter=$e.delimiter||"",l.value=!1;return}const Q=J.data||{};c.fullKey=J.fullKey||"",c.path=Q.path||"";const ce=w(c.path),ve=Q.type||ce?.type||"";if(c.description=Q.description||"",c.locked=!!Q.locked,ve==="csv"){const $e=Q.delimiter||ce?.delimiter||x("csv");m($e,"csv")?(c.type="csv",c.delimiter=x("csv")):$e?(c.type="csv_custom",c.delimiter=$e):(c.type="csv",c.delimiter=x("csv"))}else ve==="tsv"?(c.type="tsv",c.delimiter=x("tsv")):(c.type=ve,c.delimiter=d.value&&Q.delimiter||"");!c.type&&ce?.type&&(c.type=ce.type,c.delimiter=ce.delimiter||x(ce.type)),l.value=!!Q.type||c.type==="csv_custom";const je=Object.entries(Q).filter(([$e])=>!r.includes($e)).map(([$e,Me])=>({id:b(),key:$e,valueInput:A(Me),valueType:_(Me),isMultiline:typeof Me=="object"&&Me!==null}));c.additionalFields=je,o.value=null}function O(){c.path="",c.fullKey="",c.type="",c.description="",c.delimiter="",c.locked=!1,c.additionalFields=[],o.value=null,l.value=!1}function A(J){if(typeof J=="object"&&J!==null)try{return JSON.stringify(J,null,2)}catch{return""}return J==null?"":String(J)}function _(J){return Array.isArray(J)||typeof J=="object"&&J!==null?"object":typeof J=="boolean"?"boolean":typeof J=="number"?"number":"string"}function M(J){if(J.valueType==="object"){if(!J.valueInput.trim())return null;try{return JSON.parse(J.valueInput)}catch{throw new Error(`Invalid JSON for field "${J.key}"`)}}if(J.valueType==="number"){const Q=Number(J.valueInput);if(Number.isNaN(Q))throw new Error(`Value for "${J.key}" must be a number`);return Q}if(J.valueType==="boolean"){const Q=J.valueInput.trim().toLowerCase();if(["true","false"].includes(Q))return Q==="true";throw new Error(`Value for "${J.key}" must be "true" or "false"`)}return J.valueInput}function W(){const J=new Set,Q=[];return c.additionalFields.forEach(ce=>{const ve=ce.key.trim();ve&&(J.has(ve)||r.includes(ve)?Q.push(ve):J.add(ve))}),Q}function ue(J){return J.key.trim()?r.includes(J.key.trim())?"Reserved key name":c.additionalFields.some(Q=>Q!==J&&Q.key.trim()===J.key.trim())?"Duplicate key":null:"Key is required"}function ee(){c.additionalFields.push({id:b(),key:"",valueInput:"",valueType:"string",isMultiline:!1}),o.value=null}function F(J){c.additionalFields=c.additionalFields.filter(Q=>Q.id!==J)}function ae(J){J.isMultiline=!J.isMultiline,J.isMultiline?(J.valueType="object",J.valueInput&&!J.valueInput.trim().startsWith("{")&&(J.valueInput="")):(J.valueType="string",J.valueInput=J.valueInput!=null?String(J.valueInput):"")}const Z=()=>{if(o.value=null,a.value=!0,!(p.value||f.value)&&!(!u.value&&!t.entry))try{const J=B();s("save",J)}catch(J){o.value=J.message}},B=()=>{if(!c.path.trim())throw new Error("File path is required");const J={};J.path=c.path.trim();const Q=c.type==="csv_custom"?"csv":c.type.trim();if(Q&&(J.type=Q),c.description.trim()&&(J.description=c.description.trim()),c.type==="csv_custom"){if(!c.delimiter.trim())throw new Error("Delimiter is required for custom delimited text sources");J.delimiter=c.delimiter.trim()}else c.delimiter.trim()&&!m(c.delimiter.trim(),c.type)&&(J.delimiter=c.delimiter.trim());c.locked&&(J.locked=!0);for(const ve of c.additionalFields){const je=ve.key.trim();if(!je||r.includes(je))continue;const $e=M({...ve,valueType:ve.valueType??"string"});$e===null||$e===""||(J[je]=$e)}const ce=(u.value?c.fullKey:t.entry.fullKey||"").trim();if(!ce)throw new Error("Dot notation key is required");return{fullKey:ce,data:J,isNew:u.value}};return(J,Q)=>(v(),Ee(lr,{"model-value":n.modelValue,variant:"left",size:"lg",title:"Edit Data Entry","onUpdate:modelValue":Q[6]||(Q[6]=ce=>s("update:modelValue",ce))},gw({_:2},[n.entry||u.value?{name:"default",fn:te(()=>[h("div",X6,[u.value?(v(),k("div",t$,[C(Ce,{modelValue:c.fullKey,"onUpdate:modelValue":Q[0]||(Q[0]=ce=>c.fullKey=ce),label:"Dot Notation Key",placeholder:"e.g., inputs.raw.custom_dataset",hint:"Use dot notation to place this entry within the catalog hierarchy."},null,8,["modelValue"])])):(v(),k("div",Z6,[Q[7]||(Q[7]=h("p",{class:"text-xs font-medium uppercase tracking-wide text-gray-500 dark:text-gray-400"}," Data Key ",-1)),h("p",e$,X(n.entry.fullKey),1)])),C(Ce,{modelValue:c.path,"onUpdate:modelValue":Q[1]||(Q[1]=ce=>c.path=ce),label:"File Path",placeholder:"inputs/raw/example.csv",required:"",error:g.value,monospace:"",hint:"Provide a path relative to the project root (e.g., inputs/raw/data.csv) or an absolute path."},null,8,["modelValue","error"]),h("div",n$,[C(pn,{"model-value":c.type,label:"Type","onUpdate:modelValue":P},{default:te(()=>[Q[8]||(Q[8]=h("option",{disabled:"",value:""},"Select file type",-1)),(v(!0),k(xe,null,Ve(ut(i),ce=>(v(),k("option",{key:ce.value,value:ce.value},X(ce.label),9,s$))),128))]),_:1},8,["model-value"]),h("div",i$,[C(Qe,{modelValue:c.locked,"onUpdate:modelValue":Q[2]||(Q[2]=ce=>c.locked=ce),label:"Locked",description:"Treat this data source as read-only."},null,8,["modelValue"])]),d.value?(v(),k("div",r$,[C(Ce,{modelValue:c.delimiter,"onUpdate:modelValue":Q[3]||(Q[3]=ce=>c.delimiter=ce),label:"Delimiter",placeholder:"e.g., tab or |",hint:"Use keywords 'tab', 'comma', 'semicolon', 'space' or supply a single character (e.g., |). Keywords map to their respective delimiters."},null,8,["modelValue"])])):q("",!0)]),C(gv,{modelValue:c.description,"onUpdate:modelValue":Q[4]||(Q[4]=ce=>c.description=ce),label:"Description",placeholder:"Explain what this source contains or how it was produced.",rows:4},null,8,["modelValue"]),h("div",o$,[h("div",l$,[Q[10]||(Q[10]=h("h4",{class:"text-sm font-semibold text-gray-900 dark:text-gray-100"}," Additional Metadata ",-1)),C(Ye,{size:"sm",variant:"secondary",class:"shadow-none",onClick:ee},{default:te(()=>[...Q[9]||(Q[9]=[fe(" Add Field ",-1)])]),_:1})]),Q[12]||(Q[12]=h("p",{class:"text-xs text-gray-500 dark:text-gray-400"}," Store any extra properties (e.g., source, codebook details). Complex values can be provided as JSON. ",-1)),c.additionalFields.length===0?(v(),k("div",a$," No additional metadata fields. ")):q("",!0),(v(!0),k(xe,null,Ve(c.additionalFields,ce=>(v(),k("div",{key:ce.id,class:"rounded-md border border-gray-200 bg-white/80 p-4 dark:border-gray-700 dark:bg-gray-900/40"},[h("div",u$,[C(Ce,{modelValue:ce.key,"onUpdate:modelValue":ve=>ce.key=ve,label:"Key",placeholder:"e.g., source",error:ue(ce)},null,8,["modelValue","onUpdate:modelValue","error"]),C(Ye,{size:"sm",variant:"secondary",class:"shadow-none",onClick:ve=>F(ce.id)},{default:te(()=>[...Q[11]||(Q[11]=[fe(" Remove ",-1)])]),_:1},8,["onClick"])]),h("div",c$,[(v(),Ee(Nn(ce.isMultiline?gv:Ce),{modelValue:ce.valueInput,"onUpdate:modelValue":ve=>ce.valueInput=ve,label:ce.isMultiline?"Value (JSON)":"Value",rows:ce.isMultiline?4:void 0,placeholder:ce.isMultiline?g$:"comma",monospace:ce.isMultiline?void 0:!1},null,8,["modelValue","onUpdate:modelValue","label","rows","placeholder","monospace"])),ce.isMultiline?(v(),k("p",d$," Provide valid JSON to store complex data structures. ")):q("",!0),h("div",f$,[C(Ye,{size:"xs",variant:"soft",onClick:ve=>ae(ce)},{default:te(()=>[fe(X(ce.isMultiline?"Use single-line value":"Use JSON value"),1)]),_:2},1032,["onClick"])])])]))),128))]),f.value?(v(),k("p",h$,X(f.value),1)):q("",!0),o.value?(v(),k("p",p$,X(o.value),1)):q("",!0),n.error?(v(),k("p",m$,X(n.error),1)):q("",!0)])]),key:"0"}:void 0,n.entry?{name:"actions",fn:te(()=>[C(Ye,{size:"sm",variant:"secondary",class:"shadow-none",onClick:Q[5]||(Q[5]=ce=>s("update:modelValue",!1))},{default:te(()=>[...Q[13]||(Q[13]=[fe(" Cancel ",-1)])]),_:1}),C(Ye,{size:"sm",disabled:n.saving,onClick:Z},{default:te(()=>[fe(X(n.saving?"Saving":"Save Entry"),1)]),_:1},8,["disabled"])]),key:"1"}:void 0]),1032,["model-value"]))}},Nx=(n="")=>{const t=String(n??"").trim().replace(/[^a-zA-Z0-9]+/g,"-").replace(/^-+|-+$/g,"").toLowerCase();return t?`data-node-${t}`:"data-node-root"},y$=["id"],b$=["aria-expanded"],k$={class:"flex-1"},x$={key:0,class:"rounded bg-amber-200/70 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},_$={key:1},w$={class:"mt-1 text-xs text-zinc-500 dark:text-zinc-400"},S$={class:"text-xs font-medium uppercase tracking-wide text-zinc-500 dark:text-zinc-400"},C$={class:"flex items-start gap-3"},A$={class:"flex-1"},E$={key:0,class:"rounded bg-amber-200/70 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},T$={key:1},D$={class:"mt-1 text-xs text-zinc-500 dark:text-zinc-400"},P$=["id"],R$={class:"flex items-start justify-between gap-4"},O$={class:"min-w-0 flex items-center gap-2"},L$={class:"text-sm font-semibold text-gray-900 dark:text-white"},M$={key:0,class:"rounded bg-amber-200/70 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},I$={key:1},j$={key:0,class:"inline-flex items-center rounded-full border border-gray-200 bg-white px-2.5 py-1 text-xs font-medium text-gray-700 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-100"},V$={class:"flex items-center gap-2 shrink-0"},$$={class:"mt-5 space-y-4"},N$={key:0,class:"space-y-2"},B$={class:"text-sm leading-relaxed text-gray-600 dark:text-zinc-300"},F$={key:1,class:"flex items-start gap-3"},U$={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},z$={key:1,class:"h-4 w-4 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},H$={class:"min-w-0 flex-1"},W$={class:"mt-1 font-mono text-sm leading-relaxed text-gray-900 dark:text-zinc-100"},q$={key:0,class:"rounded bg-amber-200/60 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},G$={key:1},K$={key:1,class:"text-zinc-500"},J$={class:"flex items-start gap-3 pt-4 border-t border-gray-200 dark:border-zinc-700"},Q$={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Y$={key:1,class:"h-4 w-4 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},X$={class:"min-w-0 flex-1"},Z$={class:"mt-1 font-mono text-sm leading-relaxed text-gray-900 dark:text-zinc-100"},eN={key:0,class:"rounded bg-amber-200/60 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},tN={key:1},nN={key:1,class:"text-zinc-500"},sN={class:"min-w-0"},iN={class:"text-xs font-medium uppercase tracking-wide text-gray-600 dark:text-zinc-200"},rN={class:"mt-1 whitespace-pre-wrap break-words font-mono text-[13px] text-gray-800 dark:text-zinc-200"},oN={class:"flex items-start gap-3 pt-4 border-t border-gray-200 dark:border-zinc-700"},lN={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},aN={key:1,class:"h-4 w-4 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},uN={class:"min-w-0 flex-1"},cN=["title"],Rd="mt-1.5 inline-flex h-10 w-10 items-center justify-center rounded-md border border-gray-200 bg-white text-gray-500 transition hover:border-gray-300 hover:text-gray-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-500 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-300 dark:hover:border-gray-500 dark:hover:text-gray-100",dN=Object.assign({name:"DataCatalogTree"},{__name:"DataCatalogTree",props:{node:{type:Object,required:!0},depth:{type:Number,default:0},expandedKeys:{type:Object,required:!0},autoExpandedKeys:{type:Object,required:!0},toggleGroup:{type:Function,required:!0},searchTerm:{type:String,default:""},hierarchical:{type:Boolean,default:!0},pendingDeletes:{type:Object,default:null}},emits:["edit","delete"],setup(n,{emit:e}){const t=e,s=n,i=z(()=>s.node?.type==="group"),r=z(()=>s.depth===0),o=z(()=>{if(!i.value)return!1;if(!s.hierarchical)return!0;const ee=s.node?.fullKey;if(!ee)return!1;const F=s.expandedKeys,ae=s.autoExpandedKeys,Z=typeof F?.has=="function"?F.has(ee):!!F?.[ee],B=typeof ae?.has=="function"?ae.has(ee):!!ae?.[ee];return Z||B}),l=z(()=>{const ee=s.node?.leafCount||0;return`${ee} ${ee===1?"entry":"entries"}`}),a=z(()=>r.value?"mb-4 rounded-xl border border-gray-200 bg-white p-6 transition hover:border-gray-300 scroll-mt-16 dark:border-gray-700/70 dark:bg-gray-900 dark:hover:border-gray-600":"mb-3 rounded-lg border border-gray-200 bg-white p-4 transition hover:border-gray-300 dark:border-gray-700/60 dark:bg-gray-900/60 dark:hover:border-gray-600"),u=z(()=>r.value?"text-lg font-semibold text-zinc-900 dark:text-white":"text-sm font-semibold text-zinc-900 dark:text-white"),c=z(()=>r.value?"mt-4 space-y-3":"mt-3 space-y-3"),d=z(()=>s.pendingDeletes instanceof Set?s.pendingDeletes:s.pendingDeletes&&typeof s.pendingDeletes=="object"&&s.pendingDeletes.value instanceof Set?s.pendingDeletes.value:new Set),f=z(()=>d.value.has(s.node?.fullKey)),p=z(()=>{const ee=s.node?.data||{},F=new Set(["path","type","description","locked","delimiter"]);return Object.keys(ee).filter(ae=>!F.has(ae)).reduce((ae,Z)=>(ae[Z]=ee[Z],ae),{})}),g=z(()=>{const ee="relative rounded-lg p-6 transition focus-within:ring-2",F=r.value?"scroll-mt-16":"";return f.value?`${ee} border border-red-200 bg-red-50 hover:bg-red-100 focus-within:ring-red-300 ${F} dark:border-red-500/40 dark:bg-red-900/30 dark:hover:bg-red-900/40 dark:focus-within:ring-red-500/40`:`${ee} border border-gray-200 bg-gray-50 hover:bg-gray-100 focus-within:ring-sky-200 ${F} dark:border-gray-700/50 dark:bg-gray-800/50 dark:hover:bg-gray-800/60 dark:focus-within:ring-sky-500/40`}),b=z(()=>f.value?"shadow-none border border-red-200 text-red-700 hover:bg-red-50 dark:border-red-500/40 dark:text-red-200 dark:hover:bg-red-900/30":"shadow-none"),x=z(()=>s.searchTerm.trim().toLowerCase()),m=(ee="")=>{const F=ee??"",ae=x.value;if(!ae)return[{text:F,highlight:!1}];const Z=F.toLowerCase(),B=[];let J=0,Q=Z.indexOf(ae);for(;Q!==-1;)Q>J&&B.push({text:F.slice(J,Q),highlight:!1}),B.push({text:F.slice(Q,Q+ae.length),highlight:!0}),J=Q+ae.length,Q=Z.indexOf(ae,J);return J<F.length&&B.push({text:F.slice(J),highlight:!1}),B.length>0?B:[{text:F,highlight:!1}]},w=z(()=>s.node?.displayName||s.node?.name||""),P=z(()=>m(w.value)),U=z(()=>m(s.node?.data?.path||"")),O=z(()=>m(s.node?.fullKey||"")),A=z(()=>{const ee=s.node?.fullKey||"";return ee?`data_read('${ee}')`:"data_read()"}),_=(ee="")=>ee.replace(/_/g," "),M=ee=>ee==null?"":typeof ee=="object"?JSON.stringify(ee,null,2):String(ee),W=z(()=>{if(!r.value)return null;const ee=s.node?.fullKey||s.node?.name;return ee?Nx(ee):null}),ue=()=>{!i.value||!s.hierarchical||s.toggleGroup(s.node.fullKey)};return(ee,F)=>{const ae=Bd("DataCatalogTree",!0);return v(),k("div",null,[i.value?(v(),k("div",{key:0,id:W.value||void 0,class:we(a.value)},[n.hierarchical?(v(),k(xe,{key:0},[h("button",{type:"button",class:"flex w-full items-start gap-3 text-left transition hover:text-zinc-900 focus:outline-none",onClick:ue,"aria-expanded":o.value},[C(ut(XS),{class:we(["mt-1.5 h-4 w-4 shrink-0 text-zinc-400 transition-transform",{"rotate-90 text-sky-500":o.value}])},null,8,["class"]),h("div",k$,[h("p",{class:we(u.value)},[(v(!0),k(xe,null,Ve(P.value,(Z,B)=>(v(),k(xe,{key:B},[Z.highlight?(v(),k("mark",x$,X(Z.text),1)):(v(),k("span",_$,X(Z.text),1))],64))),128))],2),h("p",w$,X(l.value),1)]),h("span",S$,X(o.value?"Hide":"Show"),1)],8,b$),C(Ah,{name:"catalog-collapse"},{default:te(()=>[Ge(h("div",{class:we(c.value)},[(v(!0),k(xe,null,Ve(n.node.children,Z=>(v(),Ee(ae,{key:Z.fullKey,node:Z,depth:n.depth+1,"expanded-keys":n.expandedKeys,"auto-expanded-keys":n.autoExpandedKeys,"toggle-group":n.toggleGroup,"search-term":n.searchTerm,hierarchical:n.hierarchical,"pending-deletes":n.pendingDeletes,onEdit:F[0]||(F[0]=B=>t("edit",B)),onDelete:F[1]||(F[1]=B=>t("delete",B))},null,8,["node","depth","expanded-keys","auto-expanded-keys","toggle-group","search-term","hierarchical","pending-deletes"]))),128))],2),[[it,o.value]])]),_:1})],64)):(v(),k(xe,{key:1},[h("div",C$,[h("div",A$,[h("p",{class:we(u.value)},[(v(!0),k(xe,null,Ve(P.value,(Z,B)=>(v(),k(xe,{key:B},[Z.highlight?(v(),k("mark",E$,X(Z.text),1)):(v(),k("span",T$,X(Z.text),1))],64))),128))],2),h("p",D$,X(l.value),1)])]),h("div",{class:we(c.value)},[(v(!0),k(xe,null,Ve(n.node.children,Z=>(v(),Ee(ae,{key:Z.fullKey,node:Z,depth:n.depth+1,"expanded-keys":n.expandedKeys,"auto-expanded-keys":n.autoExpandedKeys,"toggle-group":n.toggleGroup,"search-term":n.searchTerm,hierarchical:n.hierarchical,"pending-deletes":n.pendingDeletes,onEdit:F[2]||(F[2]=B=>t("edit",B)),onDelete:F[3]||(F[3]=B=>t("delete",B))},null,8,["node","depth","expanded-keys","auto-expanded-keys","toggle-group","search-term","hierarchical","pending-deletes"]))),128))],2)],64))],10,y$)):(v(),k("div",{key:1,id:W.value||void 0,class:we(g.value)},[h("div",R$,[h("div",O$,[h("h3",L$,[(v(!0),k(xe,null,Ve(P.value,(Z,B)=>(v(),k(xe,{key:`leaf-${B}`},[Z.highlight?(v(),k("mark",M$,X(Z.text),1)):(v(),k("span",I$,X(Z.text),1))],64))),128))]),n.node.data?.type?(v(),k("span",j$,X(n.node.data.type),1)):q("",!0)]),h("div",V$,[C(Ye,{size:"sm",variant:"secondary",class:we(b.value),onClick:F[4]||(F[4]=It(Z=>t("delete",n.node),["stop"]))},{default:te(()=>[fe(X(f.value?"Undo":"Delete"),1)]),_:1},8,["class"]),C(Ye,{size:"sm",variant:"secondary",class:"shadow-none",onClick:F[5]||(F[5]=Z=>t("edit",n.node))},{default:te(()=>[...F[6]||(F[6]=[fe(" Edit ",-1)])]),_:1})])]),h("div",$$,[n.node.data?.description?(v(),k("div",N$,[F[7]||(F[7]=h("p",{class:"text-xs font-medium text-gray-600 dark:text-zinc-200"}," Description ",-1)),h("p",B$,X(n.node.data.description),1)])):q("",!0),n.node.fullKey?(v(),k("div",F$,[C(_i,{value:n.node.fullKey||"",successMessage:"Dot notation copied",variant:"bare",class:we(Rd),title:"Copy dot notation"},{default:te(({copied:Z})=>[Z?(v(),k("svg",z$,[...F[9]||(F[9]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(v(),k("svg",U$,[...F[8]||(F[8]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"},null,-1)])]))]),_:1},8,["value"]),h("div",H$,[F[10]||(F[10]=h("p",{class:"text-xs font-medium text-gray-700 dark:text-zinc-100"}," Location (in Dot Notation) ",-1)),h("p",W$,[O.value.length>0?(v(!0),k(xe,{key:0},Ve(O.value,(Z,B)=>(v(),k(xe,{key:`key-${B}`},[Z.highlight?(v(),k("mark",q$,X(Z.text),1)):(v(),k("span",G$,X(Z.text),1))],64))),128)):(v(),k("span",K$,""))])])])):q("",!0),h("div",J$,[C(_i,{value:n.node.data?.path||"",successMessage:"Path copied",variant:"bare",class:we(Rd),title:"Copy path"},{default:te(({copied:Z})=>[Z?(v(),k("svg",Y$,[...F[12]||(F[12]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(v(),k("svg",Q$,[...F[11]||(F[11]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"},null,-1)])]))]),_:1},8,["value"]),h("div",X$,[F[13]||(F[13]=h("p",{class:"text-xs font-medium text-gray-700 dark:text-zinc-100"}," File Path ",-1)),h("p",Z$,[U.value.length>0?(v(!0),k(xe,{key:0},Ve(U.value,(Z,B)=>(v(),k(xe,{key:`path-${B}`},[Z.highlight?(v(),k("mark",eN,X(Z.text),1)):(v(),k("span",tN,X(Z.text),1))],64))),128)):(v(),k("span",nN,""))])])]),(v(!0),k(xe,null,Ve(p.value,(Z,B)=>(v(),k("div",{key:`meta-${B}`,class:"flex items-start justify-between gap-3 border-t border-gray-200 pt-4 text-sm dark:border-zinc-700"},[h("div",sN,[h("p",iN,X(_(B)),1),h("pre",rN,X(M(Z)),1)])]))),128)),h("div",oN,[C(_i,{value:A.value,successMessage:"data_read() command copied",variant:"bare",class:we([Rd,"w-10"]),title:"Copy data_read() helper","aria-label":`Copy ${A.value}`},{default:te(({copied:Z})=>[Z?(v(),k("svg",aN,[...F[15]||(F[15]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(v(),k("svg",lN,[...F[14]||(F[14]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8z"},null,-1)])]))]),_:1},8,["value","class","aria-label"]),h("div",uN,[F[16]||(F[16]=h("p",{class:"text-xs font-medium text-gray-700 dark:text-zinc-100"}," Usage ",-1)),h("p",{class:"mt-1 font-mono text-sm leading-relaxed text-gray-900 dark:text-zinc-100 truncate",title:A.value},X(A.value),9,cN)])])])],10,P$))])}}}),fN=ac(dN,[["__scopeId","data-v-20f9f092"]]),hN={key:0,class:"flex items-center justify-center h-96"},pN={key:1,class:"flex-1 p-10"},mN={key:2,class:"flex min-h-screen"},gN={class:"w-64 shrink-0 border-r border-gray-200 p-6 dark:border-gray-800 flex flex-col"},vN={class:"mb-4"},yN={class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},bN={class:"flex items-center gap-2"},kN={class:"text-xs text-gray-500 dark:text-gray-400 font-mono truncate"},xN={class:"space-y-1"},_N={key:0,class:"ml-6 mt-1 space-y-0.5"},wN=["href","onClick"],SN={class:"truncate"},CN={key:0,class:"shrink-0 rounded-full bg-gray-100 px-2 py-0.5 text-[10px] font-medium text-gray-500 dark:bg-gray-800 dark:text-gray-300"},AN={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},EN={class:"mt-auto pt-4 border-t border-gray-200 dark:border-gray-700"},TN={class:"text-center py-3"},DN={class:"flex-1 p-10"},PN={id:"overview"},RN={id:"basics"},ON={key:0},LN={key:1},MN={key:2},IN={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},jN={key:0,class:"space-y-5"},VN={class:"flex items-center gap-2"},$N={class:"flex-1 px-3 py-2 text-sm font-mono text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-md"},NN={key:0,class:"pt-6 border-t border-gray-200 dark:border-gray-700"},BN={id:"settings"},FN={key:0},UN={key:1},zN={key:2},HN={class:"text-sm text-gray-600 dark:text-gray-400 mb-6"},WN={id:"notebooks"},qN={class:"rounded-lg bg-gray-50 p-12 dark:bg-gray-800/50 text-center"},GN={id:"data"},KN={class:"mb-6 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},JN={class:"mb-6"},QN={key:0,class:"space-y-4"},YN={key:1,class:"mt-4 rounded-lg border border-red-200 bg-red-50 p-4 dark:border-red-500/40 dark:bg-red-900/20"},XN={class:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"},ZN={class:"text-sm font-medium text-red-700 dark:text-red-200"},eB={class:"flex gap-2"},tB={class:"mt-3 list-disc space-y-1 pl-5 text-xs font-mono text-red-700 dark:text-red-200/90"},nB={key:2,class:"rounded-xl border border-dashed border-zinc-300 bg-white/70 p-10 text-center dark:border-zinc-700 dark:bg-zinc-900/40"},sB={class:"text-sm font-medium text-zinc-700 dark:text-zinc-200"},iB={id:"connections"},rB={id:"packages"},oB={key:0},lB={key:1},aB={key:2},uB={id:"ai"},cB={key:0},dB={key:1},fB={key:2},hB={id:"quarto"},pB={key:0},mB={key:1},gB={class:"rounded-lg bg-gray-50 p-4 dark:bg-gray-800/50 space-y-3"},vB=["value"],yB={key:0,class:"rounded-md border border-gray-200 dark:border-gray-700 overflow-hidden"},bB={key:1,class:"text-sm text-gray-500 dark:text-gray-400 py-8 text-center"},kB={class:"mt-4 rounded-lg bg-gray-50 p-4 dark:bg-gray-800/50"},xB={class:"mt-4 rounded-lg border border-amber-200 bg-amber-50 p-4 dark:border-amber-800 dark:bg-amber-900/20"},_B={class:"flex items-start justify-between gap-4"},wB={id:"git"},SB={key:0},CB={key:1},AB={key:2},EB={id:"scaffold"},TB={key:0},DB={key:1},PB={key:2},RB={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},OB={id:"env"},LB={class:"space-y-6"},MB={key:0,class:"max-h-64 overflow-y-auto border border-gray-200 dark:border-gray-700 rounded-md"},IB=["onClick","onMouseenter"],jB={class:"flex items-start justify-between gap-2"},VB={class:"flex-1 min-w-0"},$B={class:"text-sm font-mono font-medium text-gray-900 dark:text-gray-100"},NB={key:0,class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5 line-clamp-1"},BB={key:1,class:"text-xs text-gray-500 dark:text-gray-500 mt-0.5"},FB={class:"text-xs text-gray-500 dark:text-gray-500 font-mono shrink-0"},UB={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},zB={key:1,class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},HB={class:"relative"},WB={class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},qB={class:"space-y-4 text-left"},GB={class:"flex items-start gap-3"},KB={class:"flex items-start gap-3"},JB={key:0,class:"mt-4"},QB={class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},YB={class:"font-mono font-bold"},XB={__name:"ProjectDetailView",setup(n){const e=co(),t=Bl(),s=lc(),i=Y(null),r=Y(!0),o=Y(null),l=Y("overview"),a=["overview","basics","settings","quarto","notebooks","connections","data","packages","ai","git","scaffold","env"],u=Y(null),c=Y(""),d=Y(new Set),f=Y(!1),p=Y(null),g=Y(!1),b=Y(null),x=Y(!1),m=Y(new Set),w=Y(!1),P=Y(null),U=Y(null),O=Y({}),A=Y(!1),_=Y(null),M=Y(new Set),W=Y(!1),ue=Y(!1),ee=Y(!1),F=Y([]),ae=Y({}),Z=Y(null),B=Y(null),J=Y(!1),Q=Y(!1),ce=Y({html:{format:"html",embed_resources:!0,theme:"default",toc:!0,toc_depth:3,code_fold:!1,code_tools:!1,highlight_style:"github"},revealjs:{format:"revealjs",theme:"default",incremental:!1,slide_number:!0,transition:"slide",background_transition:"fade",controls:!0,progress:!0,center:!0,highlight_style:"github"}}),ve=Y({initialize:!0,user_name:"",user_email:"",hooks:{ai_sync:!1,data_security:!1,check_sensitive_dirs:!1}}),je=Y(!1),$e=Y(null),Me=Y(!1),We=Y(!1);Y([]),Y([]),Y([]),Y(!1);const ct=Y([]),rt=Y([]),tt=Y(null),oe=Y(null),ne=Y(!1),K=Y([]),E=Y({use_renv:!1,default_packages:[]}),re=Y(!1),T=Y(null),N=Y(!1),G=Y(!1),le=Y(!1),se=Y("untrack"),ie=Y(""),be=Y(""),L=Y([]),j=Y(!1),$=Y(-1),de=Y({name:"",source:"cran",auto_attach:!0}),ge=Y({}),Se=Y({}),Re=Y(""),Fe=Y(!1),et=Y(null),me=Y(!1),yt=Y(!1),Rt=Y("grouped"),Vt=Y(!1),nt=Y({enabled:!1,canonical_file:"CLAUDE.md",canonical_content:"",assistants:[]}),an=Y(!1),Ht=Y(null),bt=Y(!1),At=Y(!1),Ke=Y(!1),kt=Y({file:"CLAUDE.md",exists:!0}),vr=z(()=>Object.keys(ge.value||{}).length),yr=z(()=>{const S=i.value?.name||"Untitled",y=i.value?.path||"",V=O.value?.author?.name||P.value?.author?.name||i.value?.author||"";return{name:S,path:y,author:V}}),Ec=z(()=>i.value?.type||P.value?.project_type||"Not set"),Tc=z(()=>O.value?.scaffold?.notebook_format||P.value?.scaffold?.notebook_format||"quarto"),br=S=>S?S.charAt(0).toUpperCase()+S.slice(1):"";z(()=>{if(!nt.value.enabled)return"Disabled";const S=Array.isArray(nt.value.assistants)?nt.value.assistants:[],y=S.length?S.map(br).join(", "):"Enabled",V=nt.value.canonical_file||"CLAUDE.md";return`${y}  ${V}`});const Un={ai_sync:"AI sync",data_security:"Secret scan",check_sensitive_dirs:"Sensitive dirs"},yo=z(()=>{const S=ve.value?.hooks||{};return Object.entries(S).filter(([,y])=>!!y).map(([y])=>Un[y]||y)});z(()=>{const S=ve.value.initialize?"Auto-initialize repositories":"Manual initialization";return yo.value.length?`${S}  ${yo.value.join(", ")}`:S});const Ii=z(()=>E.value?.default_packages?.length||0);z(()=>{const S=E.value?.use_renv?"renv enabled":"renv disabled";return Ii.value>0?`${Ii.value} package${Ii.value===1?"":"s"}  ${S}`:`No default packages  ${S}`}),z(()=>vr.value>0?`${vr.value} variable${vr.value===1?"":"s"}`:"No variables defined"),Ie(ct,S=>{const y=tt.value,V=S.some(_e=>_e.name===y);if(S.length===1){const _e=S[0];_e?.name&&_e.name!=="framework_db"&&(tt.value=_e.name)}else y&&!V&&(tt.value=null)},{deep:!0}),Ie(rt,S=>{const y=oe.value,V=S.some(_e=>_e.name===y);if(S.length===1){const _e=S[0];_e?.name&&(oe.value=_e.name)}else y&&!V&&(oe.value=null)},{deep:!0});const bo=z(()=>{const S=yr.value.name,y=yr.value.path,V=yr.value.author;Ec.value;const _e=Tc.value,Ne=nt.value.enabled,He=nt.value.enabled?Array.isArray(nt.value.assistants)?nt.value.assistants.map(br).join(", "):"Enabled":"",Dt=nt.value.canonical_file||"CLAUDE.md",mt=ve.value.initialize,un=yo.value,Ln=Ii.value,_r=E.value?.use_renv||!1,Lc=vr.value;return[{id:"basics",title:"Basics",section:"basics",content:`<div>${S}  ${V}</div><div class="text-sm text-gray-600 dark:text-gray-400 mt-1">${y}</div>`},{id:"structure",title:"Project Structure",section:"settings",content:`${Zt.value}  ${Object.keys(qe.value).length} workspace  ${Object.keys(Mt.value).length} input  ${Object.keys(xs.value).length} output`},{id:"notebooks",title:"Notebooks & Scripts",section:"scaffold",content:_e},{id:"packages",title:"Packages",section:"packages",content:Ln>0?`${Ln} packages  renv ${_r?"enabled":"disabled"}`:`renv: ${_r?"enabled":"disabled"}`},{id:"env",title:".env",section:"env",content:Lc>0?`${Lc} variable${Lc===1?"":"s"}`:"No variables defined"},{id:"ai",title:"AI Assistants",section:"ai",content:Ne?`<span class="text-green-600 dark:text-green-400">${He}  ${Dt}</span>`:'<span class="text-gray-600 dark:text-gray-400">Disabled</span>'},{id:"git",title:"Git & Hooks",section:"git",content:mt?`Auto-initialize repositories${un.length?`  ${un.join(", ")}`:""}`:"Manual initialization"}]}),On=S=>["flex items-center gap-2 px-3 py-2 rounded-md text-sm transition",l.value===S?"bg-sky-50 text-sky-700 font-medium dark:bg-sky-900/20 dark:text-sky-400":"text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-800"],Yl=()=>{const S=e.query.section;S&&a.includes(S)?(l.value=S,S==="env"&&(xr(),Zn(()=>zp()))):l.value="overview"};Ie(l,S=>{t.replace({query:{...e.query,section:S}}),(S==="settings"||S==="basics"||S==="scaffold"||S==="connections")&&!P.value&&na(),S==="connections"&&ct.value.length===0&&rt.value.length===0&&s_(),S==="packages"&&K.value.length===0&&ia(),S==="git"&&!Me.value&&oa(),S==="ai"&&!bt.value&&ra(),S==="env"&&!me.value&&xr()}),Ie(()=>e.query.section,S=>{S&&a.includes(S)?(l.value=S,S==="env"&&(Zn(()=>zp()),me.value||xr())):S||(l.value="overview")});let oi=!1,li=!1;Ie(()=>nt.value.canonical_file,(S,y)=>{oi||bt.value&&(!S||S===y||c_(S))}),Ie(ge,S=>{li||console.log("[envVariables watcher] Value changed (not suppressed)")},{deep:!0}),Ie(Se,S=>{li||console.log("[envGroups watcher] Value changed (not suppressed)")},{deep:!0}),Ie(Re,S=>{li||console.log("[envRawContent watcher] Value changed (not suppressed)")});let ai=null;Ie(be,()=>{ai&&clearTimeout(ai),ai=setTimeout(()=>{i_()},300)});const ji=(S="")=>S.split(/[._-]/).filter(Boolean).map(y=>y.charAt(0).toUpperCase()+y.slice(1)).join(" "),Bs=S=>JSON.parse(JSON.stringify(S)),Xl=S=>Array.isArray(S)?S.map((y,V)=>[String(V),y]):Object.entries(S),ko=(S,y="",V=0)=>!S||typeof S!="object"?[]:Xl(S).reduce((_e,[Ne,He])=>{if(He==null)return _e;const Dt=y?`${y}.${Ne}`:Ne;if(typeof He=="object"&&!Array.isArray(He)&&He.path)return _e.push({type:"leaf",name:Ne,displayName:ji(Ne),fullKey:Dt,data:He,leafCount:1,depth:V}),_e;if(typeof He=="object"){const mt=ko(He,Dt,V+1);if(mt.length>0){const un=mt.reduce((Ln,_r)=>Ln+(_r.leafCount||0),0);_e.push({type:"group",name:Ne,displayName:ji(Ne),fullKey:Dt,children:mt,leafCount:un,depth:V})}}return _e},[]),xo=S=>S.slice().sort((y,V)=>y.displayName.localeCompare(V.displayName,void 0,{sensitivity:"base",numeric:!0})).map(y=>y.type==="group"?{...y,children:xo(y.children)}:y),_o=(S,y)=>{if(!y)return!0;const V=y.toLowerCase(),_e=[S.displayName,S.name,S.fullKey];return S.type==="leaf"&&S.data?.path&&_e.push(S.data.path),_e.some(Ne=>Ne&&Ne.toLowerCase().includes(V))},wo=(S,y)=>{if(!y)return{nodes:S,matchedKeys:new Set};const V=[],_e=new Set;return S.forEach(Ne=>{if(Ne.type==="leaf"){_o(Ne,y)&&(V.push(Ne),_e.add(Ne.fullKey));return}const He=wo(Ne.children,y);if(_o(Ne,y)||He.nodes.length>0){const mt=He.nodes,un=mt.reduce((Ln,_r)=>Ln+(_r.leafCount||0),0);V.push({...Ne,children:mt,leafCount:un||Ne.leafCount}),_e.add(Ne.fullKey),He.matchedKeys.forEach(Ln=>_e.add(Ln))}}),{nodes:V,matchedKeys:_e}},Jn=z(()=>{const S=u.value;return!S||typeof S!="object"?[]:!Array.isArray(S)&&S.path?[{type:"leaf",name:S.name||"data",displayName:ji(S.name||"data"),fullKey:S.name||"data",data:S,leafCount:1,depth:0}]:xo(ko(S))}),wn=z(()=>c.value.trim().toLowerCase()),ks=z(()=>{const S=wn.value;return S?wo(Jn.value,S):{nodes:Jn.value,matchedKeys:new Set}}),So=z(()=>ks.value.nodes),Zl=z(()=>ks.value.matchedKeys),kr=z(()=>wn.value.length>0),I=z(()=>kr.value?[]:(Jn.value||[]).filter(S=>(S.depth||0)===0).map(S=>{const y=S.fullKey||S.name||"";return{anchorId:y?Nx(y):null,label:S.displayName||ji(S.name||y||"data source"),count:S.leafCount||(S.type==="leaf"?1:0),nodeKey:y}}).filter(S=>S.anchorId&&S.label)),D=z(()=>m.value.size>0),H=z(()=>m.value.size),pe=z(()=>Array.from(m.value)),Ue=S=>{let y=0;return S.forEach(V=>{y=Math.max(y,V.depth||0),V.type==="group"&&V.children&&(y=Math.max(y,Ue(V.children)))}),y},ye=z(()=>Ue(Jn.value)),Pe=z(()=>ye.value>2),qe=z(()=>{const S=O.value.directories||{},y={},V=["functions","notebooks","scripts"];return Object.keys(S).forEach(_e=>{V.includes(_e)&&(y[_e]=S[_e])}),y}),Mt=z(()=>{const S=O.value.directories||{},y={};return Object.keys(S).forEach(V=>{(V.startsWith("inputs_")||V.includes("_raw")||V.includes("_intermediate")||V.includes("_final"))&&(y[V]=S[V])}),y}),xs=z(()=>{const S=O.value.directories||{},y={};return Object.keys(S).forEach(V=>{(V.startsWith("outputs_")||V.includes("_figures")||V.includes("_tables")||V.includes("_models")||V.includes("_reports")||V==="scratch")&&!V.startsWith("inputs_")&&V!=="cache"&&(y[V]=S[V])}),y});z(()=>(O.value.extra_directories||[]).filter(y=>y.type==="input")),z(()=>(O.value.extra_directories||[]).filter(y=>y.type==="output")),z(()=>(O.value.extra_directories||[]).filter(y=>y.type==="workspace"));const Zt=z(()=>{const S=i.value?.type;return S?{project:"Standard Project Structure",project_sensitive:"Privacy Sensitive Project Structure",presentation:"Presentation Structure",course:"Course Structure"}[S]||S:"Standard Project Structure"}),ea=z(()=>{if(!P.value?.directories)return{};const S={},y=P.value.directories||{},V=U.value?.project_types?.[i.value.type]?.directories||{};return Object.keys(V).forEach(_e=>{S[_e]=_e in y}),P.value.extra_directories&&P.value.extra_directories.forEach(_e=>{S[_e.key]=!0}),S}),ta=z(()=>se.value==="untrack"?!0:se.value==="delete"?ie.value===i.value?.name:!1),Ux=(S,y,V)=>{const _e=y.split(".").filter(Boolean);if(_e.length===0)return null;const Ne=Bs(S||{});let He=Ne;for(let Dt=0;Dt<_e.length-1;Dt++){const mt=_e[Dt];(!He[mt]||typeof He[mt]!="object"||Array.isArray(He[mt]))&&(He[mt]={}),He=He[mt]}return He[_e[_e.length-1]]=Bs(V),Ne},zx=(S,y)=>{if(!S||!y)return null;const V=y.split(".").filter(Boolean);if(V.length===0)return null;let _e=S;for(let Ne=0;Ne<V.length;Ne++){const He=V[Ne];if(!_e||typeof _e!="object"||!(He in _e))return null;_e=_e[He]}return _e},Np=S=>{const y=S.split(".").filter(Boolean);if(y.length<=1)return;const V=new Set(d.value);let _e="";for(let Ne=0;Ne<y.length-1;Ne++)_e=_e?`${_e}.${y[Ne]}`:y[Ne],V.add(_e);d.value=V},Hx=async(S,y)=>{if(!S)return;if(y){Np(y);const _e=new Set(d.value);_e.add(y),d.value=_e}await Zn();const V=document.getElementById(S);V&&V.scrollIntoView({behavior:"smooth",block:"start"})},Bp=async S=>{const y=await fetch(`/api/project/${e.params.id}/data`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:S})}),V=await y.json();if(!y.ok||V.error)throw new Error(V.error||"Failed to save data catalog")},Wx=S=>{S&&(x.value=!1,p.value={fullKey:S.fullKey,name:S.name,data:Bs(S.data||{})},b.value=null,f.value=!0)},qx=()=>{x.value=!0,p.value={fullKey:"",data:{}},b.value=null,f.value=!0},Gx=S=>{f.value=S,S||(p.value=null,b.value=null,g.value=!1,x.value=!1)},Kx=async S=>{if(!S||!S.fullKey||!S.data){b.value=S?.error||"Invalid data entry payload";return}const y=S.fullKey.trim(),V=!!S.isNew;if(!y){b.value="Dot notation key is required";return}if(V&&zx(u.value,y)){b.value="A data source with this key already exists";return}const _e=Bs(u.value),Ne=Ux(u.value,y,S.data);if(!Ne){b.value="Unable to write data entry to catalog";return}u.value=Ne,g.value=!0,b.value=null;try{if(await Bp(Ne),Np(y),s.success(V?"Data Source Added":"Data Catalog Updated",V?"Data entry created successfully":"Data entry saved successfully"),f.value=!1,p.value=null,x.value=!1,m.value.has(y)){const He=new Set(m.value);He.delete(y),m.value=He}}catch(He){u.value=_e,b.value=He.message||"Failed to save data catalog",s.error("Save Failed",He.message||"Failed to save data catalog")}finally{g.value=!1}},Jx=(S,y)=>{if(!S||!y)return null;const V=y.split(".").filter(Boolean);if(V.length===0)return null;const _e=Bs(S),Ne=[];let He=_e;for(let mt=0;mt<V.length;mt++){const un=V[mt];if(!He||typeof He!="object"||!(un in He))return null;Ne.push({parent:He,key:un}),He=He[un]}const Dt=Ne.pop();if(!Dt)return null;delete Dt.parent[Dt.key];for(let mt=Ne.length-1;mt>=0;mt--){const{parent:un,key:Ln}=Ne[mt];un[Ln]&&typeof un[Ln]=="object"&&!Array.isArray(un[Ln])&&Object.keys(un[Ln]).length===0&&delete un[Ln]}return _e},Qx=async()=>{if(!D.value)return;w.value=!0;const S=Bs(u.value);let y=Bs(S);for(const V of m.value){const _e=Jx(y,V);if(!_e){s.error("Delete Failed",`Unable to locate ${V} in catalog`),w.value=!1;return}y=_e}try{await Bp(y),u.value=y,s.success("Data Catalog Updated","Staged deletions have been saved"),m.value=new Set}catch(V){s.error("Delete Failed",V.message||"Failed to save catalog changes")}finally{w.value=!1}},Yx=S=>{if(!S||!S.fullKey)return;const y=new Set(m.value);y.has(S.fullKey)?y.delete(S.fullKey):y.add(S.fullKey),m.value=y},Xx=()=>{m.value=new Set},Zx=S=>{const y=new Set(d.value);y.has(S)?y.delete(S):y.add(S),d.value=y},Fp=async()=>{r.value=!0,o.value=null;try{const y=await(await fetch(`/api/project/${e.params.id}`)).json();y.error?o.value=y.error:i.value=y}catch(S){o.value="Failed to load project: "+S.message}finally{r.value=!1}},Up=async()=>{try{const y=await(await fetch(`/api/project/${e.params.id}/data`)).json();y.error||(u.value=y.data||y)}catch(S){console.error("Failed to load data catalog:",S)}},e_=(S={})=>{const y=S.databases||{},V=S.storage_buckets||{};return!!(Object.keys(y).length||Object.keys(V).length||S.default_database||S.default_storage_bucket)},Dc=(S={})=>{const y=Vp(S||{});ct.value=y.databaseConnections,rt.value=y.s3Connections,tt.value=y.defaultDatabase,oe.value=y.defaultStorageBucket},na=async()=>{A.value=!0,_.value=null;try{const[S,y]=await Promise.all([fetch(`/api/project/${e.params.id}/settings`),fetch("/api/settings/catalog")]),V=await S.json(),_e=await y.json();if(U.value=_e,V.error)_.value=V.error;else{console.log("[DEBUG] Loaded project settings:",V.settings),console.log("[DEBUG] extra_directories:",V.settings.extra_directories),P.value=V.settings;const Ne=x6(V.settings,U.value?.project_types?.[V.settings?.type||i.value.type]?.directories||{});O.value={...JSON.parse(JSON.stringify(V.settings)),directories:Ne.directories,render_dirs:Ne.render_dirs,extra_directories:Ne.extra_directories,enabled:Ne.enabled},Zp(O.value.quarto),O.value.scaffold||(O.value.scaffold={notebook_format:"quarto",positron:!1}),V.settings?.connections&&Dc(V.settings.connections),V.settings?.quarto&&Zp(V.settings.quarto)}}catch(S){_.value="Failed to load settings: "+S.message}finally{A.value=!1}},t_=async()=>{switch(l.value){case"author":case"settings":await sa();break;case"packages":await Hp();break;case"scaffold":await sa();break;case"git":await Yp();break;case"connections":await Wp();break;case"ai":await Qp();break;case"quarto":await em();break;case"env":await Pc();break;case"overview":case"notebooks":case"data":s.info("No Changes to Save","This section has no editable settings");break;default:s.info("No Changes to Save","This section has no editable settings")}},sa=async()=>{console.log("[DEBUG] saveSettings called! Stack trace:",new Error().stack),W.value=!0;try{const S=(O.value.extra_directories||[]).filter(Dt=>M.value.has(Dt._id));if(S.length>0){const mt=await(await fetch(`/api/project/${e.params.id}/directories`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({directories:S})})).json();if(!mt.success){s.error("Directory Creation Failed",mt.error||"Failed to create directories"),W.value=!1;return}M.value=new Set}const y=U.value?.project_types?.[i.value.type]?.directories||{},V=Vx({catalogDirs:y,directories:O.value.directories||{},render_dirs:O.value.render_dirs||{},enabled:O.value.enabled||{},extra_directories:O.value.extra_directories||[]}),_e={...O.value,directories:V.directories,render_dirs:V.render_dirs,enabled:V.enabled,extra_directories:V.extra_directories,quarto:ce.value};console.log("[DEBUG] Saving settings with extra_directories:",_e.extra_directories);const He=await(await fetch(`/api/project/${e.params.id}/settings`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_e)})).json();if(He.success){const Dt=S.length>0?`Settings updated and ${S.length} director${S.length===1?"y":"ies"} created`:"Project settings have been updated";s.success("Settings Saved",Dt),P.value=JSON.parse(JSON.stringify(O.value)),await na()}else s.error("Save Failed",He.error||"Failed to save settings")}catch(S){s.error("Save Failed",S.message)}finally{W.value=!1}},n_=S=>{S&&Hx(S.anchorId,S.nodeKey)},zp=()=>{const S=document.getElementById("env");S&&S.scrollIntoView({behavior:"smooth",block:"start"})},s_=async()=>{P.value?.connections&&Dc(P.value.connections);try{const y=await(await fetch(`/api/project/${e.params.id}/connections`)).json();y.error?console.error("Failed to load connections:",y.error):e_(y)&&(Dc(y),P.value&&(P.value.connections=y))}catch(S){console.error("Failed to load connections:",S.message)}},ia=async()=>{re.value=!0,T.value=null;try{const y=await(await fetch(`/api/project/${e.params.id}/packages`)).json();if(y.error)T.value=y.error;else{const V=w6(y);K.value=JSON.parse(JSON.stringify(V.default_packages||[])),E.value=V}}catch(S){T.value="Failed to load packages: "+S.message}finally{re.value=!1}},Hp=async()=>{N.value=!0;try{const y=await(await fetch(`/api/project/${e.params.id}/packages`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify($x(E.value))})).json();y.success?(s.success("Packages Saved","Package configuration has been updated"),await ia()):s.error("Save Failed",y.error||"Failed to save packages")}catch(S){s.error("Save Failed",S.message)}finally{N.value=!1}},Wp=async()=>{ne.value=!0;try{const S=$p({databaseConnections:ct.value,s3Connections:rt.value,defaultDatabase:tt.value,defaultStorageBucket:oe.value}),V=await(await fetch(`/api/project/${e.params.id}/connections`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)})).json();V.success?(s.success("Connections Saved","Connection configuration has been updated"),P.value&&(P.value.connections=S)):s.error("Save Failed",V.error||"Failed to save connections")}catch(S){s.error("Save Failed",S.message)}finally{ne.value=!1}},i_=async()=>{if(be.value.length<2){L.value=[],$.value=-1;return}j.value=!0;try{const y=await(await fetch(`/api/packages/search?q=${encodeURIComponent(be.value)}`)).json();console.log("Package search results:",y),L.value=y.packages||[],$.value=L.value.length>0?0:-1}catch(S){console.error("Failed to search packages:",S),L.value=[],$.value=-1}finally{j.value=!1}},r_=S=>{L.value.length!==0&&(S.key==="ArrowDown"?(S.preventDefault(),$.value=Math.min($.value+1,L.value.length-1)):S.key==="ArrowUp"?(S.preventDefault(),$.value=Math.max($.value-1,0)):S.key==="Enter"&&$.value>=0?(S.preventDefault(),qp(L.value[$.value])):S.key==="Escape"&&(L.value=[],$.value=-1))},qp=S=>{de.value.name=S.name,de.value.source=S.source,be.value="",L.value=[],$.value=-1},o_=()=>{de.value.name.trim()&&(K.value.push({name:de.value.name.trim(),source:de.value.source,auto_attach:de.value.auto_attach}),G.value=!1,s.success("Package Added",`${de.value.name} added to package list`))},l_=()=>{le.value=!1,se.value="untrack",ie.value=""},a_=async()=>{if(!ta.value){console.log("[DELETE] Cannot delete - canDelete is false");return}console.log("[DELETE] Starting delete with option:",se.value),console.log("[DELETE] Project ID:",e.params.id);try{const S=se.value==="delete"?`/api/projects/${e.params.id}/delete`:`/api/projects/${e.params.id}/untrack`;console.log("[DELETE] Calling endpoint:",S);const y=await fetch(S,{method:"POST",headers:{"Content-Type":"application/json"}});if(console.log("[DELETE] Response status:",y.status),!y.ok){const Ne=await y.json();throw console.error("[DELETE] Error response:",Ne),new Error(Ne.message||"Failed to delete project")}const V=await y.json();console.log("[DELETE] Success result:",V);const _e=se.value==="delete"?"deleted":"removed from Framework";s.success("Project Removed",`${i.value.name} has been ${_e}`),setTimeout(()=>{window.location.href="/projects"},500)}catch(S){console.error("[DELETE] Failed to delete project:",S),s.error("Delete Failed",S.message||"Could not delete project")}},u_=S=>S?Array.isArray(S)?Array.from(new Set(S.map(y=>String(y)))):typeof S=="string"?[S]:[]:[],Gp=async S=>{let y=`/api/project/${e.params.id}/ai`;if(S){const _e=new URLSearchParams;_e.set("canonical_file",S),y+=`?${_e.toString()}`}const V=await fetch(y);if(!V.ok)throw new Error("Failed to load AI settings");return V.json()},ra=async()=>{an.value=!0,Ht.value=null;try{const S=await Gp();if(S.error){Ht.value=S.error,bt.value=!1;return}const y=S.ai||{};oi=!0;const V={enabled:!!y.enabled,canonical_file:y.canonical_file||"CLAUDE.md",canonical_content:y.canonical_content||"",assistants:u_(y.assistants)};nt.value=V,kt.value={file:y.content_file||y.canonical_file||"CLAUDE.md",exists:!!y.content_exists},oi=!1,await Jp(V.canonical_file,{preserveContentIfMissing:!1}),bt.value=!0}catch(S){Ht.value=S.message||"Failed to load AI settings",bt.value=!1}finally{oi=!1,an.value=!1,Ke.value=!1}},oa=async()=>{je.value=!0,$e.value=null;try{const y=await(await fetch(`/api/project/${e.params.id}/git`)).json();if(y.error){$e.value=y.error,Me.value=!1;return}const V=y.git||{};ve.value={initialize:V.initialize!==void 0?!!V.initialize:!0,user_name:V.user_name||"",user_email:V.user_email||"",hooks:{ai_sync:V.hooks?.ai_sync||!1,data_security:V.hooks?.data_security||!1,check_sensitive_dirs:V.hooks?.check_sensitive_dirs||!1}},Me.value=!0}catch(S){$e.value=S.message||"Failed to load Git settings",Me.value=!1}finally{je.value=!1}},Kp=z({get(){return Ip({useGit:ve.value.initialize,gitHooks:ve.value.hooks,git:ve.value})},set(S){const y={...ve.value,hooks:{...ve.value.hooks||{}}};jp({gitTarget:y,gitHooksTarget:y.hooks,setUseGit:V=>{y.initialize=V}},S),ve.value=y}}),Jp=async(S,{preserveContentIfMissing:y=!0}={})=>{if(S){Ke.value=!0;try{const V=await Gp(S);if(V.error){s.error("Load Failed",V.error);return}const _e=V.ai||{};kt.value={file:_e.content_file||S,exists:!!_e.content_exists},(_e.content_exists||!y)&&(nt.value.canonical_content=_e.canonical_content||"")}catch(V){s.error("Load Failed",V.message||"Unable to load canonical file")}finally{Ke.value=!1}}},c_=S=>{const y=typeof S=="string"&&S.length>0?S:"CLAUDE.md";Jp(y,{preserveContentIfMissing:!0})},Qp=async()=>{At.value=!0;try{const y=await(await fetch(`/api/project/${e.params.id}/ai`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:nt.value.enabled,canonical_file:nt.value.canonical_file,assistants:nt.value.assistants,canonical_content:nt.value.canonical_content})})).json();y.success?(s.success("AI Settings Saved","AI assistant configuration has been updated"),bt.value=!1,await ra()):s.error("Save Failed",y.error||"Failed to save AI settings")}catch(S){s.error("Save Failed",S.message||"Failed to save AI settings")}finally{At.value=!1}},Yp=async()=>{We.value=!0;try{const y=await(await fetch(`/api/project/${e.params.id}/git`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({initialize:ve.value.initialize,user_name:ve.value.user_name,user_email:ve.value.user_email,hooks:ve.value.hooks})})).json();y.success?(s.success("Git Settings Saved","Repository configuration has been updated"),Me.value=!1,await oa()):s.error("Save Failed",y.error||"Failed to save Git settings")}catch(S){s.error("Save Failed",S.message||"Failed to save Git settings")}finally{We.value=!1}},xr=async()=>{if(Fe.value||me.value){console.log("[loadEnv] Blocked: already loading or loaded",{loading:Fe.value,loaded:me.value});return}Fe.value=!0,et.value=null;try{const y=await(await fetch(`/api/project/${e.params.id}/env`)).json();y.error?(et.value=y.error,me.value=!1):(li=!0,console.log("[loadEnv] Updating env values with suppressEnvWatch = true"),me.value=!0,ge.value=y.variables||{},Se.value=y.groups||{},Re.value=y.raw_content||"",li=!1,console.log("[loadEnv] Env values updated, suppressEnvWatch = false"))}catch(S){et.value="Failed to load .env: "+S.message,me.value=!1}finally{li=!1,Fe.value=!1}},Pc=async()=>{yt.value=!0;try{const S=Rt.value==="raw"?{raw_content:Re.value}:{variables:ge.value,regroup:Vt.value},V=await(await fetch(`/api/project/${e.params.id}/env`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)})).json();V.success?(s.success(".env Saved","Environment variables have been updated"),me.value=!1,await xr()):s.error("Save Failed",V.error||"Failed to save .env")}catch(S){s.error("Save Failed",S.message)}finally{yt.value=!1}},Rc=z(()=>{const S=F.value||[];return S.length?S.find(y=>y.key===B.value)||S[0]:null}),Xp=z({get:()=>Rc.value?.contents||"",set:S=>{const y=Rc.value;y&&(y.contents=S)}}),Zp=S=>{const y=S?.quarto;y&&(ce.value={html:{format:"html",embed_resources:y.html?.embed_resources??!0,theme:y.html?.theme??"default",toc:y.html?.toc??!0,toc_depth:y.html?.toc_depth??3,code_fold:y.html?.code_fold??!1,code_tools:y.html?.code_tools??!1,highlight_style:y.html?.highlight_style??"github"},revealjs:{format:"revealjs",theme:y.revealjs?.theme??"default",incremental:y.revealjs?.incremental??!1,slide_number:y.revealjs?.slide_number??!0,transition:y.revealjs?.transition??"slide",background_transition:y.revealjs?.background_transition??"fade",controls:y.revealjs?.controls??!0,progress:y.revealjs?.progress??!0,center:y.revealjs?.center??!0,highlight_style:y.revealjs?.highlight_style??"github"}},Z.value=JSON.parse(JSON.stringify(ce.value)))},Oc=async()=>{J.value=!0;try{const y=await(await fetch(`/api/project/${e.params.id}/quarto/files`)).json();if(y.error)throw new Error(y.error);F.value=y.files||[],ae.value={};for(const V of F.value)ae.value[V.key]=V.contents||"";F.value.length>0&&!B.value&&(B.value=F.value[0].key)}catch(S){s.error("Failed to load Quarto configs",S.message)}finally{J.value=!1}},em=async()=>{let S=!1,y=!1,V=!1;const _e=F.value.filter(He=>{const Dt=ae.value[He.key]||"";return He.contents!==Dt});if(_e.length>0){V=!0,Q.value=!0;try{const Dt=await(await fetch(`/api/project/${e.params.id}/quarto/files`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({files:_e})})).json();if(Dt.success){S=!0;for(const mt of _e)ae.value[mt.key]=mt.contents}else{s.error("Save Failed",Dt.error||"Failed to save Quarto files"),Q.value=!1;return}}catch(He){s.error("Save Failed",He.message),Q.value=!1;return}Q.value=!1}if(Z.value&&JSON.stringify(ce.value)!==JSON.stringify(Z.value)){V=!0,ee.value=!0;try{await sa(),y=!0,Z.value=JSON.parse(JSON.stringify(ce.value))}catch(He){s.error("Save Failed",He.message),ee.value=!1;return}ee.value=!1}V?S&&y?s.success("Quarto Saved","Files and defaults saved successfully"):S?s.success("Quarto Files Saved",`${_e.length} file(s) saved`):y&&s.success("Quarto Defaults Saved","Defaults saved to project settings"):s.info("No Changes","No changes detected in Quarto settings")},d_=async()=>{ue.value=!0;try{const y=await(await fetch(`/api/project/${e.params.id}/quarto/regenerate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({backup:!0})})).json();y.success?(s.success("Quarto Configs Regenerated",y.message+(y.backup_location?`

Backup: ${y.backup_location}`:"")),await Oc()):s.error("Regeneration Failed",y.error||"Failed to regenerate Quarto configurations")}catch(S){s.error("Regeneration Failed",S.message)}finally{ue.value=!1}},f_=async()=>{const S=[];O.value&&Object.keys(O.value).length>0&&S.push(sa()),(ct.value?.length>0||rt.value?.length>0)&&S.push(Wp()),K.value?.length>0&&S.push(Hp()),ve.value&&S.push(Yp()),nt.value&&S.push(Qp()),envContents.value!==null&&S.push(Pc()),F.value?.length>0&&S.push(em()),S.length>0&&await Promise.all(S)},tm=S=>{(S.metaKey||S.ctrlKey)&&S.key==="s"&&(S.preventDefault(),f_())};return kn(()=>{Yl(),Fp(),Up(),na(),Oc(),ia(),ra(),oa(),xr(),window.addEventListener("keydown",tm)}),ao(()=>{window.removeEventListener("keydown",tm)}),Ie(()=>e.params.id,(S,y)=>{S&&S!==y&&(l.value="overview",i.value=null,P.value=null,O.value={},_.value=null,A.value=!1,K.value=[],E.value={use_renv:!1,default_packages:[]},T.value=null,re.value=!1,u.value=null,m.value=new Set,b.value=null,p.value=null,ge.value={},Se.value={},Re.value="",et.value=null,Fe.value=!1,Rt.value="grouped",Vt.value=!1,ve.value={initialize:!0,user_name:"",user_email:"",hooks:{ai_sync:!1,data_security:!1,check_sensitive_dirs:!1}},Me.value=!1,$e.value=null,je.value=!1,oi=!0,nt.value={enabled:!1,canonical_file:"CLAUDE.md",canonical_content:"",assistants:[]},kt.value={file:"CLAUDE.md",exists:!0},bt.value=!1,Ht.value=null,an.value=!1,Ke.value=!1,oi=!1,me.value=!1,et.value=null,Fe.value=!1,u.value=null,F.value=[],B.value=null,Yl(),Fp(),Up(),na(),Oc(),ia(),ra(),oa(),xr())}),(S,y)=>(v(),k("div",null,[r.value?(v(),k("div",hN,[...y[51]||(y[51]=[h("div",{class:"text-zinc-600 dark:text-zinc-400"},"Loading project...",-1)])])):o.value?(v(),k("div",pN,[C(Wn,{type:"error",title:"Error Loading Project",description:o.value},null,8,["description"])])):i.value?(v(),k("div",mN,[h("nav",gN,[h("div",vN,[h("h2",yN,X(i.value.name),1),h("div",bN,[h("span",kN,X(i.value.path),1),C(_i,{value:i.value.path,successMessage:"Path copied",class:"shrink-0"},null,8,["value"])])]),h("div",xN,[h("a",{href:"#overview",onClick:y[0]||(y[0]=It(V=>l.value="overview",["prevent"])),class:we(On("overview"))},[C(ut(rc),{class:"h-4 w-4"}),y[52]||(y[52]=fe(" Overview ",-1))],2),C(Wu,null,{default:te(()=>[...y[53]||(y[53]=[fe("Settings",-1)])]),_:1}),h("a",{href:"#basics",onClick:y[1]||(y[1]=It(V=>l.value="basics",["prevent"])),class:we(On("basics"))},[C(ut(Dh),{class:"h-4 w-4"}),y[54]||(y[54]=fe(" Basics ",-1))],2),h("a",{href:"#settings",onClick:y[2]||(y[2]=It(V=>l.value="settings",["prevent"])),class:we(On("settings"))},[C(ut(hu),{class:"h-4 w-4"}),y[55]||(y[55]=fe(" Project Structure ",-1))],2),h("a",{href:"#packages",onClick:y[3]||(y[3]=It(V=>l.value="packages",["prevent"])),class:we(On("packages"))},[C(ut(Ph),{class:"h-4 w-4"}),y[56]||(y[56]=fe(" Packages ",-1))],2),h("a",{href:"#ai",onClick:y[4]||(y[4]=It(V=>l.value="ai",["prevent"])),class:we(On("ai"))},[C(ut(iC),{class:"h-4 w-4"}),y[57]||(y[57]=fe(" AI Assistants ",-1))],2),h("a",{href:"#quarto",onClick:y[5]||(y[5]=It(V=>l.value="quarto",["prevent"])),class:we(On("quarto"))},[C(ut(Fr),{class:"h-4 w-4"}),y[58]||(y[58]=fe(" Quarto ",-1))],2),h("a",{href:"#git",onClick:y[6]||(y[6]=It(V=>l.value="git",["prevent"])),class:we(On("git"))},[...y[59]||(y[59]=[h("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})],-1),fe(" Git & Hooks ",-1)])],2),h("a",{href:"#connections",onClick:y[7]||(y[7]=It(V=>l.value="connections",["prevent"])),class:we(On("connections"))},[C(ut(Rh),{class:"h-4 w-4"}),y[60]||(y[60]=fe(" Connections ",-1))],2),h("a",{href:"#env",onClick:y[8]||(y[8]=It(V=>l.value="env",["prevent"])),class:we(On("env"))},[C(ut(oc),{class:"h-4 w-4"}),y[61]||(y[61]=fe(" .env Defaults ",-1))],2),h("a",{href:"#scaffold",onClick:y[9]||(y[9]=It(V=>l.value="scaffold",["prevent"])),class:we(On("scaffold"))},[C(ut(QS),{class:"h-4 w-4"}),y[62]||(y[62]=fe(" Scaffold Behavior ",-1))],2),C(Wu,null,{default:te(()=>[...y[63]||(y[63]=[fe("Project",-1)])]),_:1}),h("a",{href:"#data",onClick:y[10]||(y[10]=It(V=>l.value="data",["prevent"])),class:we(On("data"))},[C(ut(ZS),{class:"h-4 w-4"}),y[64]||(y[64]=fe(" Data ",-1))],2),l.value==="data"&&I.value.length?(v(),k("div",_N,[(v(!0),k(xe,null,Ve(I.value,V=>(v(),k("a",{key:V.anchorId,href:`#${V.anchorId}`,onClick:It(_e=>n_(V),["prevent"]),class:"flex items-center justify-between gap-2 rounded-md px-3 py-1 text-xs text-gray-600 transition hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-gray-800"},[h("span",SN,X(V.label),1),V.count?(v(),k("span",CN,X(V.count),1)):q("",!0)],8,wN))),128))])):q("",!0),h("a",{href:"#notebooks",onClick:y[11]||(y[11]=It(V=>l.value="notebooks",["prevent"])),class:we(On("notebooks"))},[C(ut(Fr),{class:"h-4 w-4"}),y[65]||(y[65]=fe(" Notebooks ",-1))],2)]),h("div",AN,[C(Ye,{variant:"primary",onClick:t_,disabled:W.value||N.value||yt.value||At.value||We.value||ne.value||Q.value||ee.value,class:"w-full"},{default:te(()=>[fe(X(W.value||N.value||yt.value||At.value||We.value||ne.value||Q.value||ee.value?"Saving...":"Save"),1)]),_:1},8,["disabled"])]),h("div",EN,[h("div",TN,[h("button",{onClick:y[12]||(y[12]=V=>le.value=!0),class:"text-xs text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-400 transition"}," Delete Project ")])])]),h("div",DN,[Ge(h("div",PN,[y[66]||(y[66]=h("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Overview",-1)),y[67]||(y[67]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Quick overview of your project settings. ",-1)),C(Cp,{cards:bo.value,onNavigate:y[13]||(y[13]=V=>l.value=V)},null,8,["cards"])],512),[[it,l.value==="overview"]]),Ge(h("div",RN,[A.value?(v(),k("div",ON,[...y[68]||(y[68]=[h("div",{class:"text-center py-12 text-zinc-500 dark:text-zinc-400"}," Loading settings... ",-1)])])):_.value?(v(),k("div",LN,[C(Wn,{type:"error",title:"Error Loading Settings",description:_.value},null,8,["description"])])):(v(),k("div",MN,[y[74]||(y[74]=h("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Basics",-1)),y[75]||(y[75]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Essential project settings. ",-1)),h("div",IN,[O.value.scaffold?(v(),k("div",jN,[C(Ce,{modelValue:i.value.name,"onUpdate:modelValue":y[14]||(y[14]=V=>i.value.name=V),label:"Project Name",hint:"Changing this will rename the project directory"},null,8,["modelValue"]),h("div",null,[y[69]||(y[69]=h("label",{class:"block text-sm font-semibold text-gray-900 dark:text-white mb-2"}," Filesystem Location ",-1)),h("div",VN,[h("code",$N,X(i.value.path),1),C(_i,{value:i.value.path,successMessage:"Path copied"},null,8,["value"])])]),h("div",null,[y[71]||(y[71]=h("label",{class:"block text-sm font-semibold text-gray-900 dark:text-white mb-3"}," Supported Editors ",-1)),C(Ys,{modelValue:O.value.scaffold.positron,"onUpdate:modelValue":y[15]||(y[15]=V=>O.value.scaffold.positron=V),id:"support-positron-edit",description:"Creates .code-workspace file for Positron/VS Code users"},{default:te(()=>[...y[70]||(y[70]=[fe(" Positron / VS Code ",-1)])]),_:1},8,["modelValue"]),y[72]||(y[72]=h("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-3"}," RStudio supported by default ",-1))]),C(pn,{modelValue:O.value.scaffold.notebook_format,"onUpdate:modelValue":y[16]||(y[16]=V=>O.value.scaffold.notebook_format=V),label:"Default Notebook Format",hint:"Format used when creating new notebooks"},{default:te(()=>[...y[73]||(y[73]=[h("option",{value:"quarto"},"Quarto (.qmd)",-1),h("option",{value:"rmarkdown"},"R Markdown (.Rmd)",-1)])]),_:1},8,["modelValue"]),O.value.author?(v(),k("div",NN,[C(Ap,{modelValue:O.value.author,"onUpdate:modelValue":y[17]||(y[17]=V=>O.value.author=V)},null,8,["modelValue"])])):q("",!0)])):q("",!0)])]))],512),[[it,l.value==="basics"]]),Ge(h("div",BN,[A.value?(v(),k("div",FN,[...y[76]||(y[76]=[h("div",{class:"text-center py-12 text-zinc-500 dark:text-zinc-400"}," Loading settings... ",-1)])])):_.value?(v(),k("div",UN,[C(Wn,{type:"error",title:"Error Loading Settings",description:_.value},null,8,["description"])])):P.value?(v(),k("div",zN,[y[79]||(y[79]=h("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Project Structure",-1)),h("p",HN,[y[77]||(y[77]=fe(" This project uses the ",-1)),h("strong",null,X(Zt.value),1),y[78]||(y[78]=fe(" structure. ",-1))]),C(Wn,{type:"info",title:"Append-Only Mode",description:"You can enable disabled directories and add new custom directories. Directories that are already enabled cannot be turned off to prevent accidental data loss.",class:"mb-6"}),C(Lp,{"project-type":i.value.type,directories:O.value.directories||{},"render-dirs":O.value.render_dirs||{},enabled:O.value.enabled||ea.value,"extra-directories":O.value.extra_directories||[],settings:O.value,gitignore:O.value.gitignore||"",catalog:U.value?.project_types?.[i.value.type]||{},"new-extra-ids":M.value,"allow-destruction":!1,"onUpdate:directories":y[18]||(y[18]=V=>O.value.directories=V),"onUpdate:renderDirs":y[19]||(y[19]=V=>O.value.render_dirs=V),"onUpdate:enabled":y[20]||(y[20]=V=>O.value.enabled=V),"onUpdate:extraDirectories":y[21]||(y[21]=V=>O.value.extra_directories=V),"onUpdate:gitignore":y[22]||(y[22]=V=>O.value.gitignore=V),"onUpdate:newExtraIds":y[23]||(y[23]=V=>M.value=V)},null,8,["project-type","directories","render-dirs","enabled","extra-directories","settings","gitignore","catalog","new-extra-ids"])])):q("",!0)],512),[[it,l.value==="settings"]]),Ge(h("div",WN,[y[81]||(y[81]=h("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Rendered Notebooks",-1)),y[82]||(y[82]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Browse and access your rendered Quarto/RMarkdown notebooks. ",-1)),h("div",qN,[C(ut(Fr),{class:"h-12 w-12 mx-auto mb-4 text-gray-400"}),y[80]||(y[80]=h("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Notebook browser coming soon... ",-1))])],512),[[it,l.value==="notebooks"]]),Ge(h("div",GN,[h("div",KN,[y[84]||(y[84]=h("div",null,[h("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white"},"Data Catalog"),h("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Browse your project's data sources with copy commands. ")],-1)),C(Ye,{variant:"primary",size:"sm",class:"inline-flex items-center gap-2",onClick:qx},{default:te(()=>[C(ut(sC),{class:"h-4 w-4"}),y[83]||(y[83]=fe(" Add Data Source ",-1))]),_:1})]),h("div",JN,[C(Ce,{modelValue:c.value,"onUpdate:modelValue":y[24]||(y[24]=V=>c.value=V),label:"Search data sources",placeholder:"Filter by name, prefix, or file path"},null,8,["modelValue"])]),So.value.length>0?(v(),k("div",QN,[(v(!0),k(xe,null,Ve(So.value,V=>(v(),Ee(fN,{key:V.fullKey,node:V,"expanded-keys":d.value,"auto-expanded-keys":Zl.value,"toggle-group":Zx,"search-term":c.value,hierarchical:Pe.value,"pending-deletes":m.value,onEdit:Wx,onDelete:Yx},null,8,["node","expanded-keys","auto-expanded-keys","search-term","hierarchical","pending-deletes"]))),128))])):q("",!0),D.value?(v(),k("div",YN,[h("div",XN,[h("div",null,[h("p",ZN,X(H.value)+" data source"+X(H.value===1?"":"s")+" marked for deletion. ",1),y[85]||(y[85]=h("p",{class:"text-xs text-red-600 dark:text-red-200/80"}," Changes will be applied when you save. ",-1))]),h("div",eB,[C(Ye,{variant:"secondary",size:"sm",class:"shadow-none",disabled:w.value,onClick:Xx},{default:te(()=>[...y[86]||(y[86]=[fe(" Cancel ",-1)])]),_:1},8,["disabled"]),C(Ye,{size:"sm",class:"bg-red-600 text-white hover:bg-red-500 focus-visible:outline-red-600 dark:bg-red-500 dark:hover:bg-red-400",disabled:w.value,onClick:Qx},{default:te(()=>[fe(X(w.value?"Saving":"Save Changes"),1)]),_:1},8,["disabled"])])]),h("ul",tB,[(v(!0),k(xe,null,Ve(pe.value,V=>(v(),k("li",{key:V},X(V),1))),128))])])):kr.value?(v(),k("div",nB,[h("p",sB,' No data sources match "'+X(c.value)+'". ',1),y[87]||(y[87]=h("p",{class:"mt-2 text-xs text-zinc-500 dark:text-zinc-400"}," Try adjusting your search terms or clearing the filter. ",-1))])):(v(),k(xe,{key:3},[!D.value&&(!u.value||Object.keys(u.value||{}).length===0)?(v(),Ee(G6,{key:0,title:"No Data Sources",description:"This project doesn't have any data sources defined in its settings",icon:"database"})):q("",!0)],64))],512),[[it,l.value==="data"]]),C(v$,{mode:x.value?"create":"edit",modelValue:f.value,"onUpdate:modelValue":[y[25]||(y[25]=V=>f.value=V),Gx],entry:p.value,saving:g.value,error:b.value,onSave:Kx},null,8,["mode","modelValue","entry","saving","error"]),Ge(h("div",iB,[y[88]||(y[88]=h("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Connections",-1)),y[89]||(y[89]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Database and storage connections for this project. ",-1)),C(Rp,{"database-connections":ct.value,"onUpdate:databaseConnections":y[26]||(y[26]=V=>ct.value=V),"s3-connections":rt.value,"onUpdate:s3Connections":y[27]||(y[27]=V=>rt.value=V),"default-database":tt.value,"onUpdate:defaultDatabase":y[28]||(y[28]=V=>tt.value=V),"default-storage-bucket":oe.value,"onUpdate:defaultStorageBucket":y[29]||(y[29]=V=>oe.value=V)},null,8,["database-connections","s3-connections","default-database","default-storage-bucket"])],512),[[it,l.value==="connections"]]),Ge(h("div",rB,[re.value?(v(),k("div",oB,[...y[90]||(y[90]=[h("div",{class:"text-center py-12"},[h("div",{class:"text-sm text-gray-500 dark:text-gray-400"},"Loading packages...")],-1)])])):T.value?(v(),k("div",lB,[C(Wn,{type:"error",title:"Error Loading Packages",description:T.value},null,8,["description"])])):(v(),k("div",aB,[y[91]||(y[91]=h("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Packages & Dependencies",-1)),y[92]||(y[92]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Configure package management and default packages for this project. ",-1)),C(Ep,{modelValue:E.value,"onUpdate:modelValue":y[30]||(y[30]=V=>E.value=V),"show-renv-toggle":!0,flush:!1},null,8,["modelValue"])]))],512),[[it,l.value==="packages"]]),Ge(h("div",uB,[an.value?(v(),k("div",cB,[...y[93]||(y[93]=[h("div",{class:"text-center py-12 text-sm text-gray-500 dark:text-gray-400"},"Loading AI settings...",-1)])])):Ht.value?(v(),k("div",dB,[C(Wn,{type:"error",title:"Error Loading AI Settings",description:Ht.value},null,8,["description"])])):(v(),k("div",fB,[y[94]||(y[94]=h("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"AI Assistants",-1)),y[95]||(y[95]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Framework maintains context files for selected assistants and keeps them in sync before commits. ",-1)),C(Tp,{modelValue:nt.value,"onUpdate:modelValue":y[31]||(y[31]=V=>nt.value=V),flush:!1,"show-editor":!0,"editor-height":"400px","editor-disabled":Ke.value,"editor-loading":Ke.value},{"editor-alert":te(()=>[kt.value.exists?q("",!0):(v(),Ee(Wn,{key:0,type:"info",title:"New canonical file",description:`Saving copies the current instructions into ${nt.value.canonical_file||"CLAUDE.md"}. The original file stays on disk; if AI sync hooks are enabled they mirror everything from the new canonical file.`,class:"mb-4"},null,8,["description"]))]),_:1},8,["modelValue","editor-disabled","editor-loading"])]))],512),[[it,l.value==="ai"]]),Ge(h("div",hB,[J.value?(v(),k("div",pB,[...y[96]||(y[96]=[h("div",{class:"text-center py-12 text-sm text-gray-500 dark:text-gray-400"},"Loading Quarto files...",-1)])])):(v(),k("div",mB,[y[100]||(y[100]=h("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Quarto",-1)),y[101]||(y[101]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Edit project _quarto.yml files and default rendering options. ",-1)),h("div",gB,[h("div",null,[y[97]||(y[97]=h("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Configuration File ",-1)),Ge(h("select",{"onUpdate:modelValue":y[32]||(y[32]=V=>B.value=V),class:"w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm shadow-sm focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-200"},[(v(!0),k(xe,null,Ve(F.value,V=>(v(),k("option",{key:V.key,value:V.key},X(V.label)+"  "+X(V.path),9,vB))),128))],512),[[Kd,B.value]])]),Rc.value?(v(),k("div",yB,[C(Ac,{modelValue:Xp.value,"onUpdate:modelValue":y[33]||(y[33]=V=>Xp.value=V),language:"yaml","auto-grow":!0,class:"min-h-[300px] w-full"},null,8,["modelValue"])])):(v(),k("div",bB," No Quarto files detected for this project. "))]),h("div",kB,[y[98]||(y[98]=h("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-3"},"Quarto Defaults",-1)),C(Op,{modelValue:ce.value,"onUpdate:modelValue":y[34]||(y[34]=V=>ce.value=V),flush:""},null,8,["modelValue"])]),h("div",xB,[h("div",_B,[y[99]||(y[99]=h("div",null,[h("h3",{class:"text-sm font-semibold text-amber-900 dark:text-amber-100 mb-1"},"Regenerate Configurations"),h("p",{class:"text-sm text-amber-800 dark:text-amber-200"},[fe(" Overwrite all _quarto.yml files using current settings. Existing files are backed up to "),h("code",{class:"px-1 py-0.5 bg-amber-100 dark:bg-amber-800 rounded text-xs"},".quarto_backups/"),fe(". ")])],-1)),C(Ye,{variant:"secondary",size:"sm",onClick:d_,disabled:ue.value,class:"shrink-0"},{default:te(()=>[fe(X(ue.value?"Regenerating...":"Regenerate"),1)]),_:1},8,["disabled"])])])]))],512),[[it,l.value==="quarto"]]),Ge(h("div",wB,[je.value?(v(),k("div",SB,[...y[102]||(y[102]=[h("div",{class:"text-center py-12 text-sm text-gray-500 dark:text-gray-400"},"Loading git settings...",-1)])])):$e.value?(v(),k("div",CB,[C(Wn,{type:"error",title:"Error Loading Git Settings",description:$e.value},null,8,["description"])])):(v(),k("div",AB,[y[104]||(y[104]=h("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Git & Hooks",-1)),y[105]||(y[105]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Configure repository initialization, commit identity, git hooks, and security scanning. ",-1)),C(Dp,{modelValue:Kp.value,"onUpdate:modelValue":y[35]||(y[35]=V=>Kp.value=V)},{note:te(()=>[...y[103]||(y[103]=[fe(" Project-specific .gitignore templates can be customized in Project Defaults. ",-1)])]),_:1},8,["modelValue"])]))],512),[[it,l.value==="git"]]),Ge(h("div",EB,[A.value?(v(),k("div",TB,[...y[106]||(y[106]=[h("div",{class:"text-center py-12 text-zinc-500 dark:text-zinc-400"}," Loading settings... ",-1)])])):_.value?(v(),k("div",DB,[C(Wn,{type:"error",title:"Error Loading Settings",description:_.value},null,8,["description"])])):(v(),k("div",PB,[y[107]||(y[107]=h("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Scaffold Behavior",-1)),y[108]||(y[108]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"},[fe(" Automatic actions when "),h("code",{class:"px-1.5 py-0.5 bg-gray-200 dark:bg-gray-700 rounded text-xs"},"scaffold()"),fe(" runs to initialize your project environment. ")],-1)),h("div",RB,[O.value.scaffold?(v(),Ee(Pp,{key:0,modelValue:O.value.scaffold,"onUpdate:modelValue":y[36]||(y[36]=V=>O.value.scaffold=V),flush:""},null,8,["modelValue"])):q("",!0)])]))],512),[[it,l.value==="scaffold"]]),Ge(h("div",OB,[y[109]||(y[109]=h("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Environment Variables",-1)),y[110]||(y[110]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Manage environment variables for this project (.env file). ",-1)),C(Mp,{loading:Fe.value,error:et.value,groups:Se.value,variables:ge.value,"onUpdate:variables":y[37]||(y[37]=V=>ge.value=V),"raw-content":Re.value,"onUpdate:rawContent":y[38]||(y[38]=V=>Re.value=V),"view-mode":Rt.value,"onUpdate:viewMode":y[39]||(y[39]=V=>Rt.value=V),"regroup-on-save":Vt.value,"onUpdate:regroupOnSave":y[40]||(y[40]=V=>Vt.value=V),onSave:Pc},null,8,["loading","error","groups","variables","raw-content","view-mode","regroup-on-save"])],512),[[it,l.value==="env"]])])])):q("",!0),C(lr,{modelValue:G.value,"onUpdate:modelValue":y[46]||(y[46]=V=>G.value=V),title:"Add Package",size:"md",variant:"left"},{actions:te(()=>[C(Ye,{variant:"primary",onClick:o_,disabled:!de.value.name.trim()},{default:te(()=>[...y[116]||(y[116]=[fe(" Add Package ",-1)])]),_:1},8,["disabled"]),C(Ye,{variant:"secondary",onClick:y[45]||(y[45]=V=>G.value=!1)},{default:te(()=>[...y[117]||(y[117]=[fe(" Cancel ",-1)])]),_:1})]),default:te(()=>[h("div",LB,[h("div",null,[y[111]||(y[111]=h("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Search CRAN Packages ",-1)),Ge(h("input",{"onUpdate:modelValue":y[41]||(y[41]=V=>be.value=V),onKeydown:r_,type:"text",placeholder:"Type to search CRAN...",class:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 px-3 py-2 text-sm text-gray-900 dark:text-gray-100 font-mono focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500"},null,544),[[or,be.value]])]),L.value.length>0?(v(),k("div",MB,[(v(!0),k(xe,null,Ve(L.value,(V,_e)=>(v(),k("button",{key:V.name,onClick:Ne=>qp(V),onMouseenter:Ne=>$.value=_e,class:we(["w-full px-3 py-2 text-left border-b border-gray-200 dark:border-gray-700 last:border-b-0 transition",$.value===_e?"bg-sky-50 dark:bg-sky-900/20":"hover:bg-gray-50 dark:hover:bg-gray-800"])},[h("div",jB,[h("div",VB,[h("div",$B,X(V.name),1),V.title?(v(),k("div",NB,X(V.title),1)):q("",!0),V.author?(v(),k("div",BB,X(V.author),1)):q("",!0)]),h("div",FB," v"+X(V.version),1)])],42,IB))),128))])):q("",!0),h("div",null,[y[112]||(y[112]=h("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Package Name ",-1)),Ge(h("input",{"onUpdate:modelValue":y[42]||(y[42]=V=>de.value.name=V),type:"text",placeholder:"dplyr",class:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 px-3 py-2 text-sm text-gray-900 dark:text-gray-100 font-mono focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500"},null,512),[[or,de.value.name]]),de.value.source==="github"?(v(),k("p",UB," GitHub: user/repo (e.g., tidyverse/dplyr) ")):q("",!0),de.value.source==="bioc"?(v(),k("p",zB," Bioconductor: name only (e.g., DESeq2) ")):q("",!0)]),h("div",null,[y[115]||(y[115]=h("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Source ",-1)),h("div",HB,[Ge(h("select",{"onUpdate:modelValue":y[43]||(y[43]=V=>de.value.source=V),class:"w-full appearance-none rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 pl-3 pr-10 py-2 text-sm text-gray-900 dark:text-gray-100 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500"},[...y[113]||(y[113]=[h("option",{value:"cran"},"CRAN",-1),h("option",{value:"github"},"GitHub",-1),h("option",{value:"bioc"},"Bioconductor",-1)])],512),[[Kd,de.value.source]]),y[114]||(y[114]=h("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},[h("svg",{class:"h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),h("p",WB,[de.value.source==="cran"?(v(),k(xe,{key:0},[fe("CRAN: name only (e.g., dplyr)")],64)):de.value.source==="github"?(v(),k(xe,{key:1},[fe("GitHub: user/repo (e.g., tidyverse/dplyr)")],64)):de.value.source==="bioc"?(v(),k(xe,{key:2},[fe("Bioconductor: name only (e.g., DESeq2)")],64)):q("",!0)])]),h("div",null,[C(Qe,{modelValue:de.value.auto_attach,"onUpdate:modelValue":y[44]||(y[44]=V=>de.value.auto_attach=V),label:"Auto-attach on scaffold()"},null,8,["modelValue"])])])]),_:1},8,["modelValue"]),C(lr,{modelValue:le.value,"onUpdate:modelValue":y[50]||(y[50]=V=>le.value=V),title:"Delete Project",size:"md"},{actions:te(()=>[C(Ye,{variant:"secondary",onClick:l_},{default:te(()=>[...y[123]||(y[123]=[fe(" Cancel ",-1)])]),_:1}),C(Ye,{variant:"primary",onClick:a_,disabled:!ta.value,class:"bg-red-600 hover:bg-red-500 focus-visible:outline-red-600 dark:bg-red-500 dark:hover:bg-red-400"},{default:te(()=>[fe(X(se.value==="delete"?"Delete Project":"Remove from Framework"),1)]),_:1},8,["disabled"])]),default:te(()=>[h("div",qB,[y[122]||(y[122]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Choose how you want to remove this project: ",-1)),h("label",{class:we(["block cursor-pointer rounded-lg border-2 p-4 transition",se.value==="untrack"?"border-sky-500 bg-sky-50 dark:border-sky-600 dark:bg-sky-950/30":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"])},[h("div",GB,[Ge(h("input",{type:"radio",id:"delete-untrack",value:"untrack","onUpdate:modelValue":y[47]||(y[47]=V=>se.value=V),class:"mt-1"},null,512),[[Gd,se.value]]),y[118]||(y[118]=h("div",{class:"flex-1"},[h("div",{class:"font-medium text-gray-900 dark:text-white"}," Remove from Framework "),h("div",{class:"text-sm text-gray-600 dark:text-gray-400 mt-1"}," Stop tracking this project in Framework. Files remain on disk. ")],-1))])],2),h("label",{class:we(["block cursor-pointer rounded-lg border-2 p-4 transition",se.value==="delete"?"border-red-500 bg-red-50 dark:border-red-700 dark:bg-red-950/30":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"])},[h("div",KB,[Ge(h("input",{type:"radio",id:"delete-files",value:"delete","onUpdate:modelValue":y[48]||(y[48]=V=>se.value=V),class:"mt-1"},null,512),[[Gd,se.value]]),y[119]||(y[119]=h("div",{class:"flex-1"},[h("div",{class:"font-medium text-red-700 dark:text-red-400"}," Delete Entire Project "),h("div",{class:"text-sm text-gray-600 dark:text-gray-400 mt-1"}," Permanently delete all files and folders. This cannot be undone. ")],-1))]),se.value==="delete"?(v(),k("div",JB,[h("div",QB,[y[120]||(y[120]=fe(" Type ",-1)),h("span",YB,X(i.value?.name),1),y[121]||(y[121]=fe(" to confirm: ",-1))]),C(Ce,{modelValue:ie.value,"onUpdate:modelValue":y[49]||(y[49]=V=>ie.value=V),placeholder:"Project name",class:"font-mono"},null,8,["modelValue"])])):q("",!0)],2)])]),_:1},8,["modelValue"])]))}},ZB={class:"space-y-5"},e7={__name:"EditorAndNotebookPanel",props:{positron:{type:Boolean,default:!1},notebookFormat:{type:String,default:"quarto"}},emits:["update:positron","update:notebookFormat"],setup(n){return(e,t)=>(v(),k("div",ZB,[h("div",null,[t[3]||(t[3]=h("label",{class:"block text-sm font-semibold text-gray-900 dark:text-white mb-3"}," Supported Editors ",-1)),C(Ys,{"model-value":n.positron,"onUpdate:modelValue":t[0]||(t[0]=s=>e.$emit("update:positron",s)),id:"support-positron",description:"Creates .code-workspace file for Positron/VS Code users"},{default:te(()=>[...t[2]||(t[2]=[fe(" Positron / VS Code ",-1)])]),_:1},8,["model-value"]),t[4]||(t[4]=h("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-3"}," RStudio supported by default ",-1))]),C(pn,{"model-value":n.notebookFormat,"onUpdate:modelValue":t[1]||(t[1]=s=>e.$emit("update:notebookFormat",s)),label:"Default Notebook Format",hint:"Format used when creating new notebooks"},{default:te(()=>[...t[5]||(t[5]=[h("option",{value:"quarto"},"Quarto (.qmd)",-1),h("option",{value:"rmarkdown"},"R Markdown (.Rmd)",-1)])]),_:1},8,["model-value"])]))}},Bx=`# Framework environment defaults
# Populate these values before running scaffold() or publishing.

# PostgreSQL connection
POSTGRES_HOST=127.0.0.1
POSTGRES_PORT=5432
POSTGRES_DB=postgres
POSTGRES_SCHEMA=public
POSTGRES_USER=postgres
POSTGRES_PASSWORD=

# S3-compatible storage (AWS S3, MinIO, etc.)
S3_BUCKET=
S3_ACCESS_KEY=
S3_SECRET_KEY=
S3_REGION=us-east-1
S3_ENDPOINT=
S3_SESSION_TOKEN=`,t7=(n="")=>{const e={};return n.split(/\r?\n/).forEach(t=>{const s=t.trim();if(!s||s.startsWith("#")||!s.includes("="))return;const[i,...r]=s.split("=");e[i.trim()]=r.join("=").replace(/^"|"$/g,"")}),e},n7=(n={})=>Object.entries(n).map(([e,t])=>`${e}=${t??""}`).join(`
`),Fx=(n={})=>{const e=Object.entries(n);return e.length?e.reduce((t,[s,i])=>{const r=s.includes("_")?s.split("_")[0]:"Other";return t[r]||(t[r]={}),t[r][s]={defined:!!i,used:!1,used_in:[],value:i},t},{}):{}},s7=(n,e=Bx)=>{let t=e;typeof n=="string"?t=n:n?.raw?t=n.raw:n?.variables&&(t=n7(n.variables));const s=t7(t),i=Fx(s);return{rawContent:t,variables:s,groups:i,viewMode:"grouped"}},i7={class:"flex min-h-screen"},r7={class:"w-64 shrink-0 border-r border-gray-200 p-6 dark:border-gray-800"},o7={class:"space-y-1"},l7=["href","onClick"],a7=["fill","viewBox","stroke"],u7=["stroke-linecap","stroke-linejoin","stroke-width","fill","d"],c7={key:1,class:"ml-4 mt-2 space-y-0.5 border-l border-gray-200 pl-3 dark:border-gray-700"},d7=["href","onClick"],f7={key:2,class:"ml-4 mt-2 space-y-0.5 border-l border-gray-200 pl-3 dark:border-gray-700"},h7=["href","onClick"],p7={class:"rounded-md bg-gray-900 p-4 text-xs text-gray-200"},m7={class:"mt-4 flex justify-end"},g7={class:"mt-6 px-3"},v7={key:0,class:"flex-1 flex items-center justify-center"},y7={class:"flex-1 p-10 pb-24"},b7={class:"mt-8 space-y-10"},k7={id:"overview"},x7={id:"connections-defaults"},_7={id:"env-defaults"},w7={class:"mt-6 flex justify-end"},S7={id:"basics"},C7={class:"space-y-5"},A7={class:"pt-4 border-t border-gray-200 dark:border-gray-700"},E7={id:"structure",class:"space-y-8"},T7={key:0,class:"space-y-6"},D7={class:"space-y-3"},P7=["onClick"],R7={class:"flex items-start gap-3"},O7={class:"font-semibold text-gray-900 dark:text-white"},L7={class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},M7={key:1},I7={id:"git"},j7={id:"scaffold"},V7={id:"packages"},$7={id:"quarto"},N7={id:"ai"},B7={class:"mt-4 flex justify-end"},F7={id:"templates"},U7={class:"flex flex-wrap gap-2 mb-6"},z7=["onClick"],H7={class:"flex flex-col gap-4"},W7={class:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"},q7={class:"space-y-1"},G7={class:"text-base font-semibold text-gray-900 dark:text-white"},K7={class:"text-sm text-gray-600 dark:text-gray-400"},J7={key:0,class:"rounded-md bg-sky-50 dark:bg-sky-900/20 border border-sky-200 dark:border-sky-800 p-3"},Q7={class:"text-xs"},Y7={class:"font-mono font-medium text-sky-700 dark:text-sky-300 pr-4 py-0.5"},X7={class:"text-gray-600 dark:text-gray-400 py-0.5"},Z7={class:"text-sm text-gray-600 dark:text-gray-300"},e9={class:"flex gap-3 justify-end"},Od="overview",vv="project",t9="Settings",n9="Manage default settings for new projects.",s9={__name:"SettingsView",setup(n){const e=lc(),t=Bl(),s=co(),i=[{id:"overview",label:"Overview",slug:"overview",icon:rc},{id:"basics",label:"Basics",slug:"basics",icon:Dh},{id:"structure",label:"Project Structure",slug:"project-structure",icon:hu},{id:"packages",label:"Packages",slug:"packages-dependencies",icon:Ph},{id:"quarto",label:"Quarto",slug:"quarto",icon:Fr},{id:"git",label:"Git & Hooks",slug:"git-hooks",svgIcon:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"},{id:"ai",label:"AI Assistants",slug:"ai-assistants",svgIcon:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"},{id:"scaffold",label:"Scaffold Behavior",slug:"scaffold-behavior",svgIcon:"M256 64L576 64L576 576L64 576L64 192L256 192L256 64zM256 224L96 224L96 544L256 544L256 224zM288 544L544 544L544 96L288 96L288 544zM440 152L488 152L488 200L440 200L440 152zM392 152L392 200L344 200L344 152L392 152zM440 248L488 248L488 296L440 296L440 248zM392 248L392 296L344 296L344 248L392 248zM152 280L200 280L200 328L152 328L152 280zM392 344L392 392L344 392L344 344L392 344zM152 376L200 376L200 424L152 424L152 376zM488 344L488 392L440 392L440 344L488 344z",svgViewBox:"0 0 640 640",svgFill:"currentColor",svgStroke:"none",svgStrokeWidth:0,svgPathFill:"currentColor"},{id:"templates",label:"Templates",slug:"templates",icon:Fr},{id:"connections-defaults",label:"Connections",slug:"connections",icon:Rh},{id:"env-defaults",label:".env Defaults",slug:"env",icon:oc}],r=Object.fromEntries(i.map(({id:I,slug:D})=>[I,D])),o=Object.fromEntries(i.map(({id:I,slug:D})=>[D,I])),l={project:{label:"Standard Project Structure",description:"General-purpose analysis project with notebooks, scripts, and shared outputs.",directories:{functions:"R/functions",notebooks:"notebooks",scripts:"scripts",inputs_raw:"inputs/raw",inputs_intermediate:"inputs/intermediate",inputs_final:"inputs/final",docs:"docs",outputs_tables:"outputs/tables",outputs_figures:"outputs/figures",outputs_models:"outputs/models",outputs_reports:"outputs/reports",scratch:"scratch"},render_dirs:{notebooks:"outputs/notebooks",docs:"outputs/docs"},quarto:{render_dir:"outputs/notebooks"},notebook_template:"notebook",extra_directories:[]},project_sensitive:{label:"Privacy Sensitive Project Structure",description:"Projects handling PHI/PII with dedicated private/public data flows.",directories:{functions:"R/functions",notebooks:"notebooks",scripts:"scripts",inputs_private_raw:"inputs/private/raw",inputs_private_intermediate:"inputs/private/intermediate",inputs_private_final:"inputs/private/final",inputs_public_raw:"inputs/public/raw",inputs_public_intermediate:"inputs/public/intermediate",inputs_public_final:"inputs/public/final",outputs_private_tables:"outputs/private/tables",outputs_private_figures:"outputs/private/figures",outputs_private_models:"outputs/private/models",outputs_private_docs:"outputs/private/docs",outputs_private_data_final:"outputs/private/data_final",outputs_public_tables:"outputs/public/tables",outputs_public_figures:"outputs/public/figures",outputs_public_models:"outputs/public/models",outputs_public_docs:"outputs/public/docs",outputs_public_data_final:"outputs/public/data_final",scratch:"scratch"},quarto:{render_dir:"outputs/public/docs"},notebook_template:"notebook",extra_directories:[]},presentation:{label:"Presentation Structure",description:"Single talk or slide deck with minimal analysis scaffolding.",directories:{presentation_source:"presentation.qmd",rendered_slides:"."},quarto:{render_dir:"."},notebook_template:"notebook",extra_directories:[]},course:{label:"Course Structure",description:"Courses with modules, assignments, and lecture materials.",directories:{data:"data",slides:"slides",assignments:"assignments",course_docs:"course_docs",readings:"readings",notebooks:"modules"},quarto:{render_dir:"course_docs"},notebook_template:"notebook",extra_directories:[]}},a=Y(JSON.parse(JSON.stringify(l))),u={project:"project",project_sensitive:"sensitive-project",presentation:"presentation",course:"course"},c=Object.fromEntries(Object.entries(u).map(([I,D])=>[D,I])),d={project:"Tune the standard analysis layoutfunctions, notebooks, inputs, and outputs live here by default.",project_sensitive:"Private and public inputs stay separate so sensitive data never leaves restricted folders.",presentation:"Control where your presentation source lives and where rendered slides are written.",course:"Adjust the folders used for slides, assignments, readings, and course documentation."},f=I=>String(I).replace(/_/g," ").replace(/\b\w/g,D=>D.toUpperCase()),p=Y(null),g=[{key:"notebooks",label:"Notebooks",hint:"Quarto or R Markdown notebooks for analysis.",defaultRenderDir:"outputs/notebooks"},{key:"docs",label:"Documentation",hint:"Codebooks, documentation, and other reference materials.",defaultRenderDir:"outputs/docs"}],b=[{key:"functions",label:"Functions",hint:"R files here are sourced by scaffold(), so helper functions are available in every project session."},{key:"scripts",label:"Scripts",hint:"Reusable R scripts, job runners, or automation tasks."}],x=[...g,...b],m=[{key:"inputs_raw",label:"Raw data",hint:"Read-only exports from source systems."},{key:"inputs_intermediate",label:"Intermediate data",hint:"Data after light cleaning or pre-processing steps."},{key:"inputs_final",label:"Analysis-ready data",hint:"Final inputs ready for modeling or reporting."}],w=[{key:"outputs_tables",label:"Tables",hint:"Publishable tables ready for reports or manuscripts."},{key:"outputs_figures",label:"Figures",hint:"Final plots and graphics."},{key:"outputs_models",label:"Models",hint:"Serialized models or model summaries."},{key:"outputs_reports",label:"Reports",hint:"Final reports and deliverables ready for publication."}],P=[{key:"scratch",label:"Scratch",hint:"Short-lived explorations (gitignored)."}],U=[{privateKey:"inputs_private_raw",publicKey:"inputs_public_raw",label:"Raw data",privateLabel:"Raw data (private)",publicLabel:"Raw data (public)",hint:"Read-only exports from source systems."},{privateKey:"inputs_private_intermediate",publicKey:"inputs_public_intermediate",label:"Intermediate data",privateLabel:"Intermediate data (private)",publicLabel:"Intermediate data (public)",hint:"Data after light cleaning or pre-processing steps."},{privateKey:"inputs_private_final",publicKey:"inputs_public_final",label:"Analysis-ready data",privateLabel:"Analysis-ready data (private)",publicLabel:"Analysis-ready data (public)",hint:"Final inputs ready for modeling or reporting."}],O=[{privateKey:"outputs_private_tables",publicKey:"outputs_public_tables",label:"Tables",privateLabel:"Tables (private)",publicLabel:"Tables (public)",hint:"Publishable tables ready for reports or manuscripts."},{privateKey:"outputs_private_figures",publicKey:"outputs_public_figures",label:"Figures",privateLabel:"Figures (private)",publicLabel:"Figures (public)",hint:"Final plots and graphics."},{privateKey:"outputs_private_models",publicKey:"outputs_public_models",label:"Models",privateLabel:"Models (private)",publicLabel:"Models (public)",hint:"Serialized models or model summaries."},{privateKey:"outputs_private_reports",publicKey:"outputs_public_reports",label:"Reports",privateLabel:"Reports (private)",publicLabel:"Reports (public)",hint:"Final reports and deliverables ready for publication."}],A=(I,D)=>p.value?.project_types?.[I]?.directories?.[D]||{},_=(I,D)=>D.map(H=>{const pe=A(I,H.key);return{key:H.key,label:pe.label||H.label,hint:pe.hint||H.hint||""}});z(()=>_("project",x)),z(()=>_("project",g).map(I=>({...I,defaultRenderDir:g.find(D=>D.key===I.key)?.defaultRenderDir||""}))),z(()=>_("project",b)),z(()=>_("project",m)),z(()=>_("project",w)),z(()=>_("project",P));const M=I=>I.map(D=>{const H=A("project_sensitive",D.privateKey),pe=A("project_sensitive",D.publicKey);return{...D,privateLabel:H.label||D.privateLabel,publicLabel:pe.label||D.publicLabel}});z(()=>M(U)),z(()=>M(O)),z(()=>{const I=me.value;return!I||!p.value?.project_types?.[I]?.settings?[]:p.value.project_types[I].settings});const W={include_inputs:"data",include_scripts:"scripts",include_functions:"functions"},ue=z(()=>{const I=p.value?.project_types?.presentation?.optional_toggles||{};return{inputs:I.include_inputs?.default_path||W.include_inputs,scripts:I.include_scripts?.default_path||W.include_scripts,functions:I.include_functions?.default_path||W.include_functions}}),ee={"CLAUDE.md":"ai_claude","AGENTS.md":"ai_agents",".github/copilot-instructions.md":"ai_copilot"},F=Y(Od),ae=Y(!1),Z=Y(new Set),B=Y({projects_root:"",project_types:JSON.parse(JSON.stringify(a.value)),author:{name:"",email:"",affiliation:""},defaults:{project_type:"project",notebook_format:"quarto",ide:"vscode",positron:!1,use_git:!0,use_renv:!1,seed:"123",seed_on_scaffold:!1,ai_support:!0,ai_assistants:["claude"],ai_canonical_file:"CLAUDE.md",scaffold:{source_all_functions:!0,set_theme_on_scaffold:!1,ggplot_theme:"theme_minimal",seed_on_scaffold:!1,seed:"123"},directories:JSON.parse(JSON.stringify(a.value.project.directories)),git_hooks:{ai_sync:!1,data_security:!1,check_sensitive_dirs:!1},packages:{use_renv:!1,default_packages:[{name:"dplyr",source:"cran",auto_attach:!1},{name:"ggplot2",source:"cran",auto_attach:!1},{name:"readr",source:"cran",auto_attach:!1}]},quarto:{html:{format:"html",embed_resources:!0,theme:"default",toc:!0,toc_depth:3,code_fold:!1,code_tools:!1,highlight_style:"github"},revealjs:{format:"revealjs",theme:"default",incremental:!1,slide_number:!0,transition:"slide",background_transition:"fade",controls:!0,progress:!0,center:!0,highlight_style:"github"}},env:{raw:""}},git:{user_name:"",user_email:""},privacy:{secret_scan:!1,gitignore_template:"gitignore"}}),J=cs({includeInputs:!1,includeScripts:!1,includeFunctions:!1}),Q=cs({project:{},project_sensitive:{},course:{},presentation:{}}),ce=I=>(Q[I]||(Q[I]={}),Q[I]),ve=Y(!1),je=cs({claude:!0,agents:!1,copilot:!1}),$e=Y(""),Me=Y({}),We=Y("grouped"),ct=Y(!1),rt=Y({}),tt=Y(!1),oe=z(()=>Object.keys(Me.value||{}).length),ne=z({get(){return Lr(B.value.defaults.packages)},set(I){B.value.defaults.packages=I||{use_renv:!1,default_packages:[]}}}),K=I=>p.value?.project_types?.[I]?.label||I,E=z(()=>{const I=B.value.projects_root||"",D=B.value.author?.name||"",H=B.value.defaults?.project_type||"project",pe=K(H),Ue=B.value.defaults?.notebook_format||"quarto",ye=B.value.ai_config?.enabled||!1,Pe=B.value.ai_config?.provider||"",qe=B.value.ai_config?.canonical_file||"",Mt=B.value.git?.auto_init||!1,xs=ne.value?.default_packages?.length||0,Zt=oe.value;return[{id:"basics",title:"Basics",section:"basics",content:`${I}  ${D}`},{id:"structure",title:"Project Structure",section:"structure",content:pe},{id:"notebooks",title:"Notebooks & Scripts",section:"scaffold",content:Ue},{id:"packages",title:"Packages",section:"packages",content:xs===0?"No default packages":`${xs} packages`},{id:"env",title:".env Defaults",section:"env-defaults",content:`${Zt} variables`},{id:"ai",title:"AI Assistants",section:"ai",content:ye?`<span class="text-green-600 dark:text-green-400">${Pe}  ${qe}</span>`:'<span class="text-gray-600 dark:text-gray-400">Disabled</span>'},{id:"git",title:"Git & Hooks",section:"git",content:Mt?"Auto-initialize repositories":"Manual initialization"}]}),re=Y([]),T=Y([]),N=Y(null),G=Y(null);Ie(re,I=>{const D=N.value,H=I.some(pe=>pe.name===D);if(I.length===1){const pe=I[0];pe?.name&&pe.name!=="framework_db"&&(N.value=pe.name)}else D&&!H&&(N.value=null)},{deep:!0}),Ie(T,I=>{const D=G.value,H=I.some(pe=>pe.name===D);if(I.length===1){const pe=I[0];pe?.name&&(G.value=pe.name)}else D&&!H&&(G.value=null)},{deep:!0});const le=cs({open:!1,projectTypeKey:null,projectTypeName:""}),se=cs({notebook:{loading:!1,contents:""},script:{loading:!1,contents:""},presentation:{loading:!1,contents:""},canonical:{loading:!1,contents:""},gitignore_project:{loading:!1,contents:""},gitignore_project_sensitive:{loading:!1,contents:""},gitignore_course:{loading:!1,contents:""},gitignore_presentation:{loading:!1,contents:""}}),ie=[{syntax:"{{author}}",description:"Author name"},{syntax:"{{email}}",description:"Author email"},{syntax:"{{affiliation}}",description:"Author affiliation"},{syntax:"{{github_username}}",description:"GitHub username"},{syntax:"{{github_email}}",description:"GitHub email"}],be=z(()=>[{key:"notebook",label:"Notebook",description:"Starter Quarto notebook used when creating notebooks.",editorKey:"notebook",apiName:"notebook",language:"markdown",hasVariables:!0},{key:"script",label:"Script",description:"Starter R script used for new scripts.",editorKey:"script",apiName:"script",language:"r",hasVariables:!1},{key:"presentation",label:"Presentation",description:"Starter presentation content for revealjs slides.",editorKey:"presentation",apiName:"presentation",language:"markdown",hasVariables:!0}]),L=Y(s.params.subsection||"notebook"),j=z(()=>be.value.find(I=>I.key===L.value)||be.value[0]),$=async I=>{L.value=I||"notebook",await At("templates",L.value)},de=async I=>{I&&typeof I.preventDefault=="function"&&I.preventDefault();const D=j.value;if(!D||!window.confirm("Reset this template to the default packaged version?"))return;const pe=D.editorKey,Ue=D.apiName;await yo(Ue,pe)},ge=z({get(){const I=B.value.defaults||{};return{enabled:I.ai_support!==!1,canonical_file:I.ai_canonical_file||"CLAUDE.md",assistants:Array.isArray(I.ai_assistants)?[...I.ai_assistants]:[],canonical_content:se.canonical?.contents||""}},set(I){if(!I)return;const D=B.value.defaults||{};D.ai_support=I.enabled,D.ai_canonical_file=I.canonical_file,D.ai_assistants=Array.isArray(I.assistants)?[...I.assistants]:[],I.canonical_content!==void 0&&se.canonical&&(se.canonical.contents=I.canonical_content),B.value.defaults={...D}}}),Se=z(()=>Object.entries(B.value.project_types||{})),Re=z(()=>Se.value.map(([I,D])=>({key:I,label:(D.label||f(I)).replace(/ Structure$/i,""),slug:u[I]||I}))),Fe=[{id:"templates-notebook",label:"Notebook",slug:"notebook"},{id:"templates-script",label:"Script",slug:"script"},{id:"templates-presentation",label:"Presentation",slug:"presentation"}],et=z(()=>"# Connections section temporarily disabled for debugging"),me=z(()=>{const I=s.params.subsection;return I?c[I]||vv:null}),yt=z(()=>{const I=me.value;return I&&B.value.project_types?.[I]||null}),Rt={overview:{title:"Overview",description:"Overview of your Framework global settings and preferences."},"connections-defaults":{title:"Connections",description:"Database and storage connections that every new project will inherit."},basics:{title:"Basics",description:"Essential settings for new projects."},author:{title:"Author Information",description:"Defaults that populate README files and notebook headers when scaffold() runs."},workflow:{title:"Editor & Workflow",description:"Control how Framework scaffolds projects in your preferred tools."},structure:{title:"Project Structure Defaults",description:"Choose a project type to configure its directory structure and default settings."},templates:{title:"Templates",description:"Edit the starter templates Framework uses for notebooks, scripts, and presentations."},ai:{title:"AI Assistants",description:"Manage assistant support, canonical context files, and sync hooks."},git:{title:"Git & Hooks",description:"Configure repository initialization, commit identity, git hooks, and security scanning."},scaffold:{title:"Scaffold Behavior",description:"Automatic actions Framework performs when scaffold() runs."},packages:{title:"Packages & Dependencies",description:"Define dependency defaults and auto-attach behavior for new projects."},"env-defaults":{title:".env Defaults",description:"Template applied to every new project so core connections work immediately."}},Vt=z(()=>Rt[F.value]||{title:t9,description:n9}),nt=z(()=>F.value==="structure"&&yt.value?yt.value.label||f(me.value):Vt.value.title),an=z(()=>F.value==="structure"&&yt.value&&(yt.value.description||d[me.value])||Vt.value.description);z(()=>B.value.privacy.gitignore_template||"gitignore"),z(()=>{const I=new Set,D=B.value.project_types||{},H=D.project_sensitive?.directories||{};for(const Ue of Object.values(H))typeof Ue=="string"&&Ue.trim()&&Ue.includes("private")&&I.add(Ue.replace(/^\/+/,""));const pe=D.project?.directories||{};return["cache","scratch"].forEach(Ue=>{const ye=pe[Ue];typeof ye=="string"&&ye.trim()&&I.add(ye.replace(/^\/+/,""))}),Array.from(I).sort()});const Ht=z(()=>ee[B.value.defaults.ai_canonical_file]||"ai_claude"),bt=(I,D)=>{const H={section:I||void 0};return D&&(H.subsection=D),t.resolve({name:"settings",params:H}).href},At=(I,D)=>{const H={};I&&(H.section=I),D&&(H.subsection=D);const pe=s.params.section||void 0,Ue=s.params.subsection||void 0,ye=H.section||void 0,Pe=H.subsection||void 0;return pe===ye&&Ue===Pe?Promise.resolve():t.replace({name:"settings",params:H}).catch(()=>{})};Ie(()=>s.params.section,I=>{if(!I){At(r[Od],void 0);return}const D=o[I]||Od;if(F.value=D,!o[I]){At(r[D],void 0);return}},{immediate:!0});const Ke=(I,D="")=>Array.isArray(I)?I.length>0?Ke(I[0],D):D:I??D,kt=(I,D=!1)=>{const H=Ke(I,D);return typeof H=="boolean"?H:typeof H=="string"?["true","1","yes"].includes(H.toLowerCase()):!!H},vr=I=>Array.isArray(I)?I.flatMap(D=>Array.isArray(D)?D:[D]).filter(Boolean):[],yr=(I={},D={})=>{const H={...D};for(const[pe,Ue]of Object.entries(I||{})){const ye=Ke(Ue,null);ye===null||ye===""?delete H[pe]:H[pe]=ye}return H},Ec=(I,D)=>{const H=a.value[I]||{render_dirs:{},quarto:{},extra_directories:[]};return{label:Ke(D?.label,H.label||f(I)),description:Ke(D?.description,H.description||""),ggplot_theme:Ke(D?.ggplot_theme,"theme_minimal"),set_theme_on_scaffold:kt(D?.set_theme_on_scaffold,!1),directories:yr(D?.directories,{}),render_dirs:yr(D?.render_dirs,H.render_dirs||{}),quarto:{render_dir:Ke(D?.quarto?.render_dir,H.quarto?.render_dir||".")},notebook_template:Ke(D?.notebook_template,H.notebook_template||"notebook"),extra_directories:Array.isArray(D?.extra_directories)?D.extra_directories:H.extra_directories||[],gitignore:Ke(D?.gitignore,H.gitignore||"")}},Tc=I=>{if(!I||!I.project_types)return;console.log("[DEBUG] hydrateDefaultsFromCatalog - catalogData.project_types:",I.project_types),console.log("[DEBUG] project gitignore from catalog:",I.project_types.project?.gitignore?.substring(0,100));const D={};for(const[H,pe]of Object.entries(I.project_types)){const Ue=l[H]||{},ye=jx(pe,{},Ue.directories||{},Ue.render_dirs||{}),{directories:Pe,render_dirs:qe}=ye;D[H]={label:Ke(pe.label,Ue.label||f(H)),description:Ke(pe.description,Ue.description||""),directories:Pe,render_dirs:qe,quarto:{render_dir:Ke(pe.quarto?.render_dir?.default,Ue.quarto?.render_dir||".")},notebook_template:Ke(pe.notebook_template?.default,Ue.notebook_template||"notebook"),optional_toggles:pe.optional_toggles||{},gitignore:Ke(pe.gitignore,Ue.gitignore||"")},console.log(`[DEBUG] Normalized ${H} - gitignore length:`,D[H].gitignore?.length)}for(const[H,pe]of Object.entries(l))D[H]||(D[H]=JSON.parse(JSON.stringify(pe)));a.value=D},br=(I,D,H)=>{if(!B.value.project_types?.presentation)return;const pe=B.value.project_types.presentation.directories||(B.value.project_types.presentation.directories={});D?(!pe[I]||pe[I]==="")&&(pe[I]=H):Object.prototype.hasOwnProperty.call(pe,I)&&delete pe[I]},Un=async(I,D=I)=>{if(se[D]){se[D].loading=!0;try{const H=await fetch(`/api/templates/${I}`);if(!H.ok)throw new Error("Request failed");const pe=await H.json();se[D].contents=pe.contents||""}catch{e.error("Template Error","Unable to load template contents.")}finally{se[D].loading=!1}}},yo=async(I,D=I)=>{if(se[D])try{if(!(await fetch(`/api/templates/${I}`,{method:"DELETE"})).ok)throw new Error("Request failed");await Un(I,D),e.success("Template Reset","Restored the packaged default template.")}catch{e.error("Reset Failed","Unable to restore the default template.")}};Ie(je,I=>{if(ve.value){console.log("[watch:aiAssistants] Skipped - loading");return}console.log("[watch:aiAssistants] Triggered",I);const D=[];I.claude&&D.push("claude"),I.copilot&&D.push("copilot"),I.agents&&D.push("agents"),B.value.defaults.ai_assistants=D},{deep:!0}),Ie(()=>B.value.defaults.ai_canonical_file,async()=>{ve.value||await Un(Ht.value,"canonical")}),Ie(()=>B.value.defaults.git_hooks.data_security,I=>{ve.value||B.value.privacy.secret_scan!==I&&(B.value.privacy.secret_scan=I)}),Ie(()=>B.value.privacy.secret_scan,I=>{ve.value||B.value.defaults.git_hooks.data_security!==I&&(B.value.defaults.git_hooks.data_security=I)}),Ie(()=>J.includeInputs,I=>{ve.value||br("inputs",I,ue.value.inputs)}),Ie(()=>J.includeScripts,I=>{ve.value||br("scripts",I,ue.value.scripts)}),Ie(()=>J.includeFunctions,I=>{ve.value||br("functions",I,ue.value.functions)}),Ie(Q,I=>{if(!ve.value)for(const[D,H]of Object.entries(I)){if(!B.value.project_types?.[D])continue;const pe=B.value.project_types[D].directories||{},Ue=B.value.project_types[D].render_dirs||{},ye=p.value?.project_types?.[D]?.directories||{},Pe=p.value?.project_types?.[D]?.render_dirs||{};for(const[qe,Mt]of Object.entries(H))if(Mt===!1)Object.prototype.hasOwnProperty.call(pe,qe)&&delete B.value.project_types[D].directories[qe],Object.prototype.hasOwnProperty.call(Ue,qe)&&delete B.value.project_types[D].render_dirs[qe];else if(Mt===!0){if(!Object.prototype.hasOwnProperty.call(pe,qe)){const xs=ye[qe]?.default||"";B.value.project_types[D].directories[qe]=xs}if(Pe[qe]&&!Object.prototype.hasOwnProperty.call(Ue,qe)){const xs=Pe[qe]?.default||"";xs&&(B.value.project_types[D].render_dirs[qe]=xs)}}}},{deep:!0}),Ie(Me,I=>{ve.value||(rt.value=Fx(I))},{deep:!0});const Ii=I=>{(I.metaKey||I.ctrlKey)&&I.key==="s"&&(I.preventDefault(),kr())},bo=(I,D)=>{const H=B.value.project_types?.[I]?.directories;return!!H&&Object.prototype.hasOwnProperty.call(H,D)},On=I=>{a.value[I]&&(le.projectTypeKey=I,le.projectTypeName=B.value.project_types[I]?.label||f(I),le.open=!0)},Yl=()=>{const I=le.projectTypeKey;a.value[I]&&(B.value.project_types[I]=JSON.parse(JSON.stringify(a.value[I])),I==="presentation"&&(J.includeInputs=!1,J.includeScripts=!1,J.includeFunctions=!1),le.open=!1,e.success("Reset Complete",`${le.projectTypeName} has been reset to defaults`))},oi=async(I,{title:D,description:H})=>{templateModal.open=!0,templateModal.loading=!0,templateModal.name=I,templateModal.title=D,templateModal.description=H;try{const Ue=await(await fetch(`/api/templates/${I}`)).json();templateModal.contents=Ue.contents||""}catch{e.error("Template Error","Unable to load template contents.")}finally{templateModal.loading=!1}},li=()=>{const I=ee[B.value.defaults.ai_canonical_file]||"ai_claude";oi(I,{title:`Edit ${B.value.defaults.ai_canonical_file}`,description:"This file is treated as canonical; other assistant files are synced to it."})},ai=I=>{const D=document.getElementById(I);D&&D.scrollIntoView({behavior:"smooth",block:"start"})},ji=I=>{switch(I){case"project":return`project-${I}-inputs`;case"project_sensitive":return`project-${I}-workspaces`;case"presentation":return`project-${I}-primary`;case"course":return`project-${I}-core`;default:return`project-${I}`}},Bs=I=>!(F.value!==I||I==="structure"&&me.value||I==="templates"),Xl=async I=>{const D=i.find(pe=>pe.id===I);if(!D)return;const H=D.id==="structure"?void 0:D.id==="templates"?s.params.subsection||L.value||"notebook":void 0;await At(D.slug,H),await Zn(),ai(D.id)},ko=async I=>{const D=u[I]||u[vv];await At("project-structure",D),await Zn(),ai(ji(I))};Ie(()=>me.value,(I,D)=>{F.value==="structure"&&(!I||I===D||Zn(()=>ai(ji(I))))}),Ie(()=>s.params.subsection,async I=>{if(s.params.section!=="templates")return;const D=I||"notebook";L.value!==D&&(L.value=D),await Zn(),ai("templates")});const xo=async()=>{try{console.log("[loadSettings] Starting load, setting isLoadingSettings = true"),ve.value=!0;const[I,D]=await Promise.all([fetch("/api/settings/catalog"),fetch("/api/settings/get")]);if(!I.ok)throw new Error("Failed to load settings catalog");if(!D.ok)throw new Error("Failed to load settings payload");console.log("[loadSettings] Responses received, parsing JSON");const H=await I.json();p.value=H,Tc(H);const pe=await D.json();console.log("[loadSettings] Settings data:",pe),console.log("[loadSettings] data.global:",pe.global),console.log("[loadSettings] data.global?.projects_root:",pe.global?.projects_root);const Ue=Ke(pe.global?.projects_root||pe.projects_root,"");if(console.log("[loadSettings] Setting projects_root to:",Ue),B.value.projects_root=Ue,pe.project_types){const ye={},Pe={...a.value,...pe.project_types};for(const[qe,Mt]of Object.entries(Pe))ye[qe]=Ec(qe,Mt);B.value.project_types=ye;for(const qe of Object.keys(B.value.project_types))B.value.project_types[qe].render_dirs||(B.value.project_types[qe].render_dirs={})}J.includeInputs=bo("presentation","inputs"),J.includeScripts=bo("presentation","scripts"),J.includeFunctions=bo("presentation","functions");for(const ye of["project","project_sensitive","course","presentation"]){const Pe=B.value.project_types?.[ye]?.directories||{},qe=H?.project_types?.[ye]?.directories||{},Mt=ce(ye);for(const Zt of Object.keys(qe)){const ea=qe[Zt];if(Zt==="cache"||ea.always_lazy)continue;const ta=ea.enabled_by_default??Object.prototype.hasOwnProperty.call(Pe,Zt);Mt[Zt]=ta}for(const Zt of Object.keys(Pe))Object.prototype.hasOwnProperty.call(qe,Zt)||(Mt[Zt]=!0);(B.value.project_types?.[ye]?.extra_directories||[]).forEach(Zt=>{Zt.key&&(B.value.project_types[ye].directories_enabled&&B.value.project_types[ye].directories_enabled[Zt.key]===!1?Mt[Zt.key]=!1:Mt[Zt.key]=!0)})}if(pe.author&&(B.value.author={name:Ke(pe.author.name,""),email:Ke(pe.author.email,""),affiliation:Ke(pe.author.affiliation,"")}),pe.defaults){const ye=pe.defaults;B.value.defaults.project_type=Ke(ye.project_type,"project"),B.value.defaults.notebook_format=Ke(ye.notebook_format,"quarto"),B.value.defaults.ide=Ke(ye.ide,"vscode"),B.value.defaults.positron=kt(ye.positron,!1),B.value.defaults.use_git=kt(ye.use_git,!0),B.value.defaults.use_renv=kt(ye.use_renv,!1),B.value.defaults.ai_support=kt(ye.ai_support,!0),B.value.defaults.ai_canonical_file=Ke(ye.ai_canonical_file,"CLAUDE.md");const Pe=vr(ye.ai_assistants);Pe.length&&(B.value.defaults.ai_assistants=Pe,je.claude=Pe.includes("claude"),je.copilot=Pe.includes("copilot"),je.agents=Pe.includes("agents")),ye.git_hooks&&(B.value.defaults.git_hooks={...B.value.defaults.git_hooks,...Object.fromEntries(Object.entries(ye.git_hooks).map(([qe,Mt])=>[qe,kt(Mt,B.value.defaults.git_hooks[qe])]))},B.value.privacy.secret_scan=B.value.defaults.git_hooks.data_security),ye.scaffold&&(B.value.defaults.scaffold={source_all_functions:kt(ye.scaffold.source_all_functions,!0),set_theme_on_scaffold:kt(ye.scaffold.set_theme_on_scaffold,!1),ggplot_theme:Ke(ye.scaffold.ggplot_theme,"theme_minimal"),seed_on_scaffold:kt(ye.scaffold.seed_on_scaffold,!1),seed:Ke(ye.scaffold.seed,"123")}),ye.packages&&ye.packages.default_packages?.length?B.value.defaults.packages=Lr(ye.packages):H?.defaults?.packages&&(B.value.defaults.packages=Lr(H.defaults.packages)),ye.quarto&&(B.value.defaults.quarto={html:{format:"html",embed_resources:kt(ye.quarto.html?.embed_resources,!0),theme:Ke(ye.quarto.html?.theme,"default"),toc:kt(ye.quarto.html?.toc,!0),toc_depth:parseInt(ye.quarto.html?.toc_depth)||3,code_fold:kt(ye.quarto.html?.code_fold,!1),code_tools:kt(ye.quarto.html?.code_tools,!1),highlight_style:Ke(ye.quarto.html?.highlight_style,"github")},revealjs:{format:"revealjs",theme:Ke(ye.quarto.revealjs?.theme,"default"),incremental:kt(ye.quarto.revealjs?.incremental,!1),slide_number:kt(ye.quarto.revealjs?.slide_number,!0),transition:Ke(ye.quarto.revealjs?.transition,"slide"),background_transition:Ke(ye.quarto.revealjs?.background_transition,"fade"),controls:kt(ye.quarto.revealjs?.controls,!0),progress:kt(ye.quarto.revealjs?.progress,!0),center:kt(ye.quarto.revealjs?.center,!0),highlight_style:Ke(ye.quarto.revealjs?.highlight_style,"github")}}),ye.directories?B.value.defaults.directories={...B.value.defaults.directories,...Object.fromEntries(Object.entries(ye.directories).map(([qe,Mt])=>[qe,Ke(Mt,B.value.defaults.directories[qe]||"")]))}:B.value.project_types.project&&(B.value.defaults.directories={...B.value.defaults.directories,...B.value.project_types.project.directories}),So(ye.env),Zl(ye.connections)}pe.defaults||(So(null),Zl(null),H?.defaults?.packages&&(B.value.defaults.packages=Lr(H.defaults.packages))),pe.git&&(B.value.git={user_name:Ke(pe.git.user_name,""),user_email:Ke(pe.git.user_email,"")}),pe.privacy?(B.value.privacy.secret_scan=kt(pe.privacy.secret_scan,B.value.defaults.git_hooks.data_security),B.value.privacy.gitignore_template=Ke(pe.privacy.gitignore_template,"gitignore")):B.value.privacy.secret_scan=B.value.defaults.git_hooks.data_security,await Un(Ht.value,"canonical"),console.log("[loadSettings] Load complete, about to set isLoadingSettings = false")}catch(I){console.error("[loadSettings] Error during load:",I),e.error("Load Failed","Unable to load current settings.")}finally{ve.value=!1,console.log("[loadSettings] isLoadingSettings now false")}},_o=z({get(){const I=B.value.defaults||{},D=B.value.git||{};return Ip({useGit:I.use_git,gitHooks:I.git_hooks,git:D})},set(I){if(ve.value){console.log("[gitPanelModel setter] Blocked during load");return}B.value.defaults.git_hooks=B.value.defaults.git_hooks||{},B.value.git=B.value.git||{},jp({gitTarget:B.value.git,gitHooksTarget:B.value.defaults.git_hooks,setUseGit:D=>{B.value.defaults.use_git=D}},I)}}),wo=z({get(){const I=B.value.defaults?.scaffold||{};return{source_all_functions:I.source_all_functions!==!1,set_theme_on_scaffold:I.set_theme_on_scaffold===!0,ggplot_theme:I.ggplot_theme||"theme_minimal",seed_on_scaffold:I.seed_on_scaffold||!1,seed:I.seed||"123"}},set(I){if(ve.value){console.log("[scaffoldPanelModel setter] Blocked during load");return}B.value.defaults.scaffold={...B.value.defaults.scaffold||{},source_all_functions:I.source_all_functions,set_theme_on_scaffold:I.set_theme_on_scaffold,ggplot_theme:I.ggplot_theme,seed_on_scaffold:I.seed_on_scaffold,seed:I.seed}}}),Jn=(I,D)=>{const H=B.value.project_types[I];return!H||!Array.isArray(H.extra_directories)?[]:H.extra_directories.filter(pe=>pe.type===D&&!Z.value.has(pe._id))},wn=(I,D)=>{const H=B.value.project_types[I];return!H||!Array.isArray(H.extra_directories)?[]:H.extra_directories.filter(pe=>pe.type===D&&Z.value.has(pe._id))},ks=(I,D,H)=>{const pe=B.value.project_types[I];if(!pe)return;Array.isArray(pe.extra_directories)||(pe.extra_directories=[]);const Ue=pe.extra_directories.filter(Pe=>Pe&&Pe.type!==D),ye=H.map(Pe=>({...Pe,type:D}));pe.extra_directories=[...Ue,...ye]};z({get(){return wn(me.value,"input_private")},set(I){if(!B.value.project_types[me.value])return;wn(me.value,"input_private").filter(Pe=>!I.some(qe=>qe._id===Pe._id)).forEach(Pe=>{Pe._id&&Z.value.delete(Pe._id)});const ye=[...Jn(me.value,"input_private"),...I];ks(me.value,"input_private",ye),I.forEach(Pe=>{Pe._id&&!Z.value.has(Pe._id)&&Z.value.add(Pe._id)})}}),z({get(){return wn(me.value,"input_public")},set(I){if(!B.value.project_types[me.value])return;wn(me.value,"input_public").filter(Pe=>!I.some(qe=>qe._id===Pe._id)).forEach(Pe=>{Pe._id&&Z.value.delete(Pe._id)});const ye=[...Jn(me.value,"input_public"),...I];ks(me.value,"input_public",ye),I.forEach(Pe=>{Pe._id&&!Z.value.has(Pe._id)&&Z.value.add(Pe._id)})}}),z({get(){return wn(me.value,"output_private")},set(I){if(!B.value.project_types[me.value])return;const pe=[...Jn(me.value,"output_private"),...I];ks(me.value,"output_private",pe),I.forEach(Ue=>{Ue._id&&!Z.value.has(Ue._id)&&Z.value.add(Ue._id)})}}),z({get(){return wn(me.value,"output_public")},set(I){if(!B.value.project_types[me.value])return;const pe=[...Jn(me.value,"output_public"),...I];ks(me.value,"output_public",pe),I.forEach(Ue=>{Ue._id&&!Z.value.has(Ue._id)&&Z.value.add(Ue._id)})}}),z({get(){return wn(me.value,"workspace")},set(I){if(!B.value.project_types[me.value])return;wn(me.value,"workspace").filter(Pe=>!I.some(qe=>qe._id===Pe._id)).forEach(Pe=>{Pe._id&&Z.value.delete(Pe._id)});const ye=[...Jn(me.value,"workspace"),...I];ks(me.value,"workspace",ye),I.forEach(Pe=>{Pe._id&&!Z.value.has(Pe._id)&&Z.value.add(Pe._id)})}}),z({get(){return wn(me.value,"input")},set(I){if(!B.value.project_types[me.value])return;wn(me.value,"input").filter(Pe=>!I.some(qe=>qe._id===Pe._id)).forEach(Pe=>{Pe._id&&Z.value.delete(Pe._id)});const ye=[...Jn(me.value,"input"),...I];ks(me.value,"input",ye),I.forEach(Pe=>{Pe._id&&!Z.value.has(Pe._id)&&Z.value.add(Pe._id)})}}),z({get(){return wn(me.value,"output")},set(I){if(!B.value.project_types[me.value])return;wn(me.value,"output").filter(Pe=>!I.some(qe=>qe._id===Pe._id)).forEach(Pe=>{Pe._id&&Z.value.delete(Pe._id)});const ye=[...Jn(me.value,"output"),...I];ks(me.value,"output",ye),I.forEach(Pe=>{Pe._id&&!Z.value.has(Pe._id)&&Z.value.add(Pe._id)})}});const So=I=>{const D=s7(I,Bx);$e.value=D.rawContent,Me.value=D.variables,rt.value=D.groups,We.value=D.viewMode},Zl=I=>{const D=Vp(I||{});re.value=D.databaseConnections,T.value=D.s3Connections,N.value=D.defaultDatabase,G.value=D.defaultStorageBucket},kr=async()=>{try{ae.value=!0;const I=B.value.projects_root?.trim()||"";console.log("[saveSettings] settings.value.projects_root:",B.value.projects_root),console.log("[saveSettings] normalizedRoot:",I);const D=JSON.parse(JSON.stringify(B.value));D.global||(D.global={}),D.global.projects_root=I||null,delete D.projects_root,console.log("[saveSettings] payload.global.projects_root:",D.global.projects_root),D.defaults.scaffold&&(D.defaults.scaffold.seed=D.defaults.scaffold.seed??""),D.defaults.seed=D.defaults.seed??"",D.defaults.packages=_6(B.value.defaults.packages),D.defaults.env={raw:$e.value||""},D.defaults.connections=$p({databaseConnections:re.value,s3Connections:T.value,defaultDatabase:N.value,defaultStorageBucket:G.value}),D.defaults.directories=D.project_types?.project?.directories||D.defaults.directories,D.defaults.git_hooks.data_security=D.privacy.secret_scan,D.git=D.git||{user_name:"",user_email:""};for(const ye in D.project_types){const Pe=p.value?.project_types?.[ye]?.directories||{},qe=Q[ye]||D.project_types[ye].directories_enabled||{},Mt=Vx({catalogDirs:Pe,directories:D.project_types[ye].directories||{},render_dirs:D.project_types[ye].render_dirs||{},enabled:qe,extra_directories:D.project_types[ye].extra_directories||[]});D.project_types[ye].directories=Mt.directories,D.project_types[ye].render_dirs=Mt.render_dirs,D.project_types[ye].directories_enabled=Mt.enabled,D.project_types[ye].extra_directories=Mt.extra_directories}const H=await fetch("/api/settings/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(D)});if(!H.ok){const ye=await H.text();throw new Error("Failed to save settings")}const pe=await H.json();if((await Promise.all([fetch("/api/templates/notebook",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:se.notebook.contents})}),fetch("/api/templates/script",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:se.script.contents})}),fetch("/api/templates/presentation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:se.presentation.contents})}),fetch("/api/templates/gitignore-project",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:se.gitignore_project.contents})}),fetch("/api/templates/gitignore-project_sensitive",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:se.gitignore_project_sensitive.contents})}),fetch("/api/templates/gitignore-course",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:se.gitignore_course.contents})}),fetch("/api/templates/gitignore-presentation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:se.gitignore_presentation.contents})}),fetch(`/api/templates/${Ht.value}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:se.canonical.contents})})])).some(ye=>!ye.ok))throw new Error("Template save failed");Z.value.clear(),console.log("[saveSettings] Before loadSettings, projects_root was:",B.value.projects_root),await xo(),console.log("[saveSettings] After loadSettings, projects_root is:",B.value.projects_root),e.success("Settings Saved","Your global defaults were updated.")}catch(I){console.error("Failed to save settings:",I),e.error("Save Failed",I?.message||"Review your changes and try again.")}finally{ae.value=!1}};return kn(()=>{xo(),Un("notebook"),Un("script"),Un("presentation"),Un("gitignore-project","gitignore_project"),Un("gitignore-project_sensitive","gitignore_project_sensitive"),Un("gitignore-course","gitignore_course"),Un("gitignore-presentation","gitignore_presentation"),Un(Ht.value,"canonical"),s.params.section==="templates"&&!s.params.subsection&&At("templates",L.value||"notebook"),window.addEventListener("keydown",Ii)}),ao(()=>{window.removeEventListener("keydown",Ii)}),(I,D)=>(v(),k("div",i7,[h("nav",r7,[D[34]||(D[34]=h("h2",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"New Project Defaults",-1)),h("div",o7,[(v(),k(xe,null,Ve(i,H=>h("div",{key:H.id},[H.id==="basics"?(v(),Ee(Wu,{key:0},{default:te(()=>[...D[31]||(D[31]=[fe("Settings",-1)])]),_:1})):q("",!0),h("a",{href:bt(H.slug),onClick:It(pe=>Xl(H.id),["prevent"]),class:we(["flex items-center gap-2 px-3 py-2 rounded-md text-sm transition",Bs(H.id)?"bg-sky-50 text-sky-700 font-medium dark:bg-sky-900/20 dark:text-sky-400":"text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-800"])},[H.icon?(v(),Ee(Nn(H.icon),{key:0,class:"h-4 w-4"})):H.svgIcon?(v(),k("svg",{key:1,class:"h-4 w-4",fill:H.svgFill??"none",viewBox:H.svgViewBox??"0 0 24 24",stroke:H.svgStroke??"currentColor"},[h("path",{"stroke-linecap":H.svgStrokeLinecap??"round","stroke-linejoin":H.svgStrokeLinejoin??"round","stroke-width":H.svgStrokeWidth??2,fill:H.svgPathFill??"none",d:H.svgIcon},null,8,u7)],8,a7)):q("",!0),fe(" "+X(H.label),1)],10,l7),H.id==="structure"&&F.value==="structure"?(v(),k("div",c7,[(v(!0),k(xe,null,Ve(Re.value,pe=>(v(),k("a",{key:pe.key,href:bt("project-structure",pe.slug),onClick:It(Ue=>ko(pe.key),["prevent"]),class:we(["block rounded-md py-1 pl-4 pr-2 text-xs font-medium transition",me.value===pe.key?"bg-sky-100 text-sky-700 dark:bg-sky-900/30 dark:text-sky-300":"text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-800"])},X(pe.label),11,d7))),128))])):H.id==="templates"&&F.value==="templates"?(v(),k("div",f7,[(v(),k(xe,null,Ve(Fe,pe=>h("a",{key:pe.id,href:bt("templates",pe.slug),onClick:It(Ue=>$(pe.slug),["prevent"]),class:we(["block rounded-md py-1 pl-4 pr-2 text-xs font-medium transition",L.value===pe.slug?"bg-sky-100 text-sky-700 dark:bg-sky-900/30 dark:text-sky-300":"text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-800"])},X(pe.label),11,h7)),64))])):q("",!0)])),64)),C(lr,{modelValue:tt.value,"onUpdate:modelValue":D[1]||(D[1]=H=>tt.value=H),title:".env Variables Preview"},{default:te(()=>[D[33]||(D[33]=h("p",{class:"mb-3 text-sm text-gray-600 dark:text-gray-400"},[fe(" Copy these entries into your projects "),h("code",null,".env"),fe(" file so the connections above resolve properly. ")],-1)),h("pre",p7,X(et.value),1),h("div",m7,[C(Ye,{variant:"primary",onClick:D[0]||(D[0]=H=>tt.value=!1)},{default:te(()=>[...D[32]||(D[32]=[fe("Close",-1)])]),_:1})])]),_:1},8,["modelValue"])]),h("div",g7,[C(Ye,{variant:"primary",size:"md",disabled:ae.value,onClick:kr,class:"w-full"},{default:te(()=>[fe(X(ae.value?"Saving":"Save Changes"),1)]),_:1},8,["disabled"])])]),ve.value?(v(),k("div",v7,[...D[35]||(D[35]=[h("div",{class:"text-center"},[h("div",{class:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-sky-600 border-r-transparent"}),h("p",{class:"mt-4 text-sm text-gray-600 dark:text-gray-400"},"Loading settings...")],-1)])])):q("",!0),Ge(h("div",y7,[C(po,{title:nt.value,description:an.value},null,8,["title","description"]),h("div",b7,[Ge(h("div",k7,[C(Cp,{cards:E.value,onNavigate:Xl},null,8,["cards"])],512),[[it,F.value==="overview"]]),Ge(h("div",x7,[D[36]||(D[36]=uo('<div class="mb-6 rounded-lg border border-sky-200 bg-sky-50 p-4 dark:border-sky-800 dark:bg-sky-900/20"><h4 class="text-sm font-semibold text-sky-900 dark:text-sky-100 mb-2">Connection values</h4><p class="text-sm text-sky-800 dark:text-sky-200 mb-2"> Use <code class="px-1 py-0.5 bg-sky-100 dark:bg-sky-800 rounded text-xs">env(&quot;VAR_NAME&quot;, &quot;default&quot;)</code> to read from your project&#39;s <code class="px-1 py-0.5 bg-sky-100 dark:bg-sky-800 rounded text-xs">.env</code> file. This keeps credentials out of version control while letting each machine use its own values. </p><p class="text-sm text-sky-800 dark:text-sky-200"> You can also type values directly (e.g. <code class="px-1 py-0.5 bg-sky-100 dark:bg-sky-800 rounded text-xs">localhost</code> or <code class="px-1 py-0.5 bg-sky-100 dark:bg-sky-800 rounded text-xs">5432</code>) if you don&#39;t need environment variable substitution. </p></div>',1)),C(Rp,{"database-connections":re.value,"onUpdate:databaseConnections":D[2]||(D[2]=H=>re.value=H),"s3-connections":T.value,"onUpdate:s3Connections":D[3]||(D[3]=H=>T.value=H),"default-database":N.value,"onUpdate:defaultDatabase":D[4]||(D[4]=H=>N.value=H),"default-storage-bucket":G.value,"onUpdate:defaultStorageBucket":D[5]||(D[5]=H=>G.value=H)},null,8,["database-connections","s3-connections","default-database","default-storage-bucket"])],512),[[it,F.value==="connections-defaults"]]),Ge(h("div",_7,[C(dn,{flush:""},{default:te(()=>[D[37]||(D[37]=h("div",{class:"mb-6 rounded-lg border border-sky-200 bg-sky-50 p-4 dark:border-sky-800 dark:bg-sky-900/20"},[h("h4",{class:"text-sm font-semibold text-sky-900 dark:text-sky-100 mb-2"},"How .env files work"),h("p",{class:"text-sm text-sky-800 dark:text-sky-200 mb-2"},[fe(" Environment variables let you keep sensitive data (passwords, API keys) separate from your code. Instead of hardcoding "),h("code",{class:"px-1 py-0.5 bg-sky-100 dark:bg-sky-800 rounded text-xs"},'password = "secret123"'),fe(", your code reads from a variable: "),h("code",{class:"px-1 py-0.5 bg-sky-100 dark:bg-sky-800 rounded text-xs"},'Sys.getenv("POSTGRES_PASSWORD")')]),h("p",{class:"text-sm text-sky-800 dark:text-sky-200"},[fe(" The "),h("code",{class:"px-1 py-0.5 bg-sky-100 dark:bg-sky-800 rounded text-xs"},".env"),fe(" file is gitignored by default, so your secrets stay on your machine while your code can be shared safely. ")])],-1)),C(Mp,{groups:rt.value,variables:Me.value,"onUpdate:variables":D[6]||(D[6]=H=>Me.value=H),"raw-content":$e.value,"onUpdate:rawContent":D[7]||(D[7]=H=>$e.value=H),"view-mode":We.value,"onUpdate:viewMode":D[8]||(D[8]=H=>We.value=H),"regroup-on-save":ct.value,"onUpdate:regroupOnSave":D[9]||(D[9]=H=>ct.value=H),"show-save-button":!1,"allow-show-values-toggle":!0},null,8,["groups","variables","raw-content","view-mode","regroup-on-save"]),h("div",w7,[C(Ye,{variant:"primary",onClick:kr,disabled:ae.value},{default:te(()=>[fe(X(ae.value?"Saving":"Save Changes"),1)]),_:1},8,["disabled"])])]),_:1})],512),[[it,F.value==="env-defaults"]]),Ge(h("div",S7,[C(dn,null,{default:te(()=>[C(lh,null,{default:te(()=>[h("div",C7,[C(Ce,{modelValue:B.value.projects_root,"onUpdate:modelValue":D[10]||(D[10]=H=>B.value.projects_root=H),label:"Default Projects Directory",hint:"New projects will be created in this directory by default",placeholder:"e.g., ~/projects or /Users/yourname/code"},null,8,["modelValue"]),C(e7,{positron:B.value.defaults.positron,"onUpdate:positron":D[11]||(D[11]=H=>B.value.defaults.positron=H),"notebook-format":B.value.defaults.notebook_format,"onUpdate:notebookFormat":D[12]||(D[12]=H=>B.value.defaults.notebook_format=H)},null,8,["positron","notebook-format"]),h("div",A7,[C(Ap,{modelValue:B.value.author,"onUpdate:modelValue":D[13]||(D[13]=H=>B.value.author=H)},null,8,["modelValue"])])])]),_:1})]),_:1})],512),[[it,F.value==="basics"]]),Ge(h("div",E7,[me.value?yt.value&&p.value?(v(),k("div",M7,[C(Lp,{"project-type":me.value,directories:B.value.project_types[me.value].directories,"onUpdate:directories":D[14]||(D[14]=H=>B.value.project_types[me.value].directories=H),"render-dirs":B.value.project_types[me.value].render_dirs,"onUpdate:renderDirs":D[15]||(D[15]=H=>B.value.project_types[me.value].render_dirs=H),enabled:Q[me.value],"onUpdate:enabled":D[16]||(D[16]=H=>Q[me.value]=H),"extra-directories":B.value.project_types[me.value].extra_directories,"onUpdate:extraDirectories":D[17]||(D[17]=H=>B.value.project_types[me.value].extra_directories=H),settings:B.value.project_types[me.value],"onUpdate:settings":D[18]||(D[18]=H=>B.value.project_types[me.value]=H),gitignore:B.value.project_types[me.value].gitignore,"onUpdate:gitignore":D[19]||(D[19]=H=>B.value.project_types[me.value].gitignore=H),catalog:p.value.project_types[me.value]||{},"new-extra-ids":Z.value,"onUpdate:newExtraIds":D[20]||(D[20]=H=>Z.value=H),onReset:D[21]||(D[21]=H=>On(me.value))},null,8,["project-type","directories","render-dirs","enabled","extra-directories","settings","gitignore","catalog","new-extra-ids"])])):q("",!0):(v(),k("div",T7,[h("div",D7,[(v(!0),k(xe,null,Ve(Re.value,H=>(v(),k("button",{key:H.key,onClick:pe=>ko(H.key),class:"group relative w-full rounded-lg border border-gray-200 p-6 text-left transition hover:border-sky-300 dark:border-gray-700 dark:hover:border-sky-600"},[h("div",R7,[C(ut(hu),{class:"h-6 w-6 flex-shrink-0 text-gray-400 transition group-hover:text-sky-600 dark:group-hover:text-sky-400"}),h("div",null,[h("h3",O7,X(H.label),1),h("p",L7,X(B.value.project_types[H.key]?.description||""),1)])])],8,P7))),128))])]))],512),[[it,F.value==="structure"]]),Ge(h("div",I7,[C(dn,null,{default:te(()=>[C(Dp,{modelValue:_o.value,"onUpdate:modelValue":D[22]||(D[22]=H=>_o.value=H),flush:""},{note:te(()=>[...D[38]||(D[38]=[fe(" Project-specific .gitignore templates can be customized in ",-1),h("a",{href:"#/settings/project-defaults",class:"text-sky-600 dark:text-sky-400 hover:underline"},"Project Defaults",-1),fe(". ",-1)])]),_:1},8,["modelValue"])]),_:1})],512),[[it,F.value==="git"]]),Ge(h("div",j7,[C(dn,null,{default:te(()=>[D[39]||(D[39]=h("div",null,[h("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Scaffold Behavior"),h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"},[fe(" Automatic actions when "),h("code",{class:"px-1.5 py-0.5 bg-gray-200 dark:bg-gray-700 rounded text-xs"},"scaffold()"),fe(" runs to initialize your project environment. ")])],-1)),C(Pp,{modelValue:wo.value,"onUpdate:modelValue":D[23]||(D[23]=H=>wo.value=H),flush:""},null,8,["modelValue"])]),_:1})],512),[[it,F.value==="scaffold"]]),Ge(h("div",V7,[C(Ep,{modelValue:ne.value,"onUpdate:modelValue":D[24]||(D[24]=H=>ne.value=H),"show-renv-toggle":!0},null,8,["modelValue"])],512),[[it,F.value==="packages"]]),Ge(h("div",$7,[C(dn,{flush:""},{default:te(()=>[C(Op,{modelValue:B.value.defaults.quarto,"onUpdate:modelValue":D[25]||(D[25]=H=>B.value.defaults.quarto=H)},null,8,["modelValue"])]),_:1})],512),[[it,F.value==="quarto"]]),Ge(h("div",N7,[C(dn,null,{default:te(()=>[D[41]||(D[41]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Manage assistant support, canonical context files, and sync hooks for all new projects. ",-1)),C(Tp,{modelValue:ge.value,"onUpdate:modelValue":D[26]||(D[26]=H=>ge.value=H),flush:!0,"show-editor":!0,"editor-height":"420px"},{"editor-actions":te(()=>[h("div",B7,[C(Ye,{size:"sm",variant:"secondary",onClick:li},{default:te(()=>[...D[40]||(D[40]=[fe(" Open canonical file ",-1)])]),_:1})])]),_:1},8,["modelValue"])]),_:1})],512),[[it,F.value==="ai"]]),Ge(h("div",F7,[C(dn,{flush:""},{default:te(()=>[h("div",U7,[(v(!0),k(xe,null,Ve(be.value,H=>(v(),k("button",{key:H.key,type:"button",onClick:pe=>$(H.key),class:we(["px-3 py-1.5 rounded-full text-sm font-medium border transition",L.value===H.key?"bg-sky-100 text-sky-700 border-sky-300 dark:bg-sky-900/30 dark:text-sky-200 dark:border-sky-700":"text-gray-700 border-gray-200 hover:border-sky-300 hover:text-sky-700 dark:text-gray-300 dark:border-gray-700 dark:hover:text-sky-200"])},X(H.label),11,z7))),128))]),h("div",H7,[h("div",W7,[h("div",q7,[h("h4",G7,X(j.value.label)+" Template ",1),h("p",K7,X(j.value.description),1),D[42]||(D[42]=h("p",{class:"text-xs text-gray-500 dark:text-gray-500"},' Edits save with the main "Save Changes" button. ',-1))]),C(Ye,{size:"sm",variant:"secondary",disabled:se[j.value.editorKey].loading,onClick:D[27]||(D[27]=H=>de(H))},{default:te(()=>[...D[43]||(D[43]=[fe(" Reset to default ",-1)])]),_:1},8,["disabled"])]),j.value.hasVariables?(v(),k("div",J7,[D[44]||(D[44]=h("h5",{class:"text-xs font-semibold text-sky-800 dark:text-sky-300 mb-2"},"Available Variables",-1)),h("table",Q7,[h("tbody",null,[(v(),k(xe,null,Ve(ie,H=>h("tr",{key:H.syntax},[h("td",Y7,X(H.syntax),1),h("td",X7,X(H.description),1)])),64))])])])):q("",!0),C(Ac,{modelValue:se[j.value.editorKey].contents,"onUpdate:modelValue":D[28]||(D[28]=H=>se[j.value.editorKey].contents=H),language:j.value.language,"auto-grow":""},null,8,["modelValue","language"])])]),_:1})],512),[[it,F.value==="templates"]])])],512),[[it,!ve.value]]),C(lr,{modelValue:le.open,"onUpdate:modelValue":D[30]||(D[30]=H=>le.open=H),size:"md",title:"Reset to Defaults",icon:"warning"},{default:te(()=>[h("p",Z7,[D[45]||(D[45]=fe(" Are you sure you want to reset ",-1)),h("strong",null,X(le.projectTypeName),1),D[46]||(D[46]=fe(" to default settings? This will discard all your customizations for this project type. ",-1))])]),actions:te(()=>[h("div",e9,[C(Ye,{variant:"secondary",onClick:D[29]||(D[29]=H=>le.open=!1)},{default:te(()=>[...D[47]||(D[47]=[fe("Cancel",-1)])]),_:1}),C(Ye,{variant:"primary",onClick:Yl},{default:te(()=>[...D[48]||(D[48]=[fe(" Reset to Defaults ",-1)])]),_:1})])]),_:1},8,["modelValue"])]))}},i9={class:"mx-auto max-w-5xl p-10"},r9={__name:"ProjectPackagesView",setup(n){return Y([]),kn(async()=>{}),(e,t)=>(v(),k("div",i9,[C(po,{title:"Packages",description:"Manage R packages for this project."}),t[0]||(t[0]=uo('<div class="mt-10 rounded-2xl border border-zinc-200 bg-white p-8 shadow-sm dark:border-zinc-800 dark:bg-zinc-900"><div class="flex items-center gap-3 border-b border-zinc-100 pb-6 dark:border-zinc-800"><div class="flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-sky-500 to-sky-600 shadow-lg shadow-sky-500/20"><svg class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg></div><h3 class="text-xl font-bold text-zinc-900 dark:text-white">Package Configuration</h3></div><div class="mt-8"><p class="text-sm text-zinc-600 dark:text-zinc-400"> Package management interface coming soon. This page will allow you to: </p><ul class="mt-4 space-y-2 text-sm text-zinc-600 dark:text-zinc-400"><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Add and remove project packages </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Specify package versions </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Toggle renv integration </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Install and update packages </li></ul></div></div>',1))]))}},o9={class:"mx-auto max-w-5xl p-10"},l9={__name:"ProjectDataView",setup(n){return Y([]),kn(async()=>{}),(e,t)=>(v(),k("div",o9,[C(po,{title:"Data",description:"Manage data catalog and sources for this project."}),t[0]||(t[0]=uo('<div class="mt-10 rounded-2xl border border-zinc-200 bg-white p-8 shadow-sm dark:border-zinc-800 dark:bg-zinc-900"><div class="flex items-center gap-3 border-b border-zinc-100 pb-6 dark:border-zinc-800"><div class="flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-sky-500 to-sky-600 shadow-lg shadow-sky-500/20"><svg class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"></path></svg></div><h3 class="text-xl font-bold text-zinc-900 dark:text-white">Data Catalog</h3></div><div class="mt-8"><p class="text-sm text-zinc-600 dark:text-zinc-400"> Data catalog management interface coming soon. This page will allow you to: </p><ul class="mt-4 space-y-2 text-sm text-zinc-600 dark:text-zinc-400"><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Define data sources in the catalog </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Specify data formats (CSV, RDS, etc.) </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Configure encryption settings </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Track data integrity via digests </li></ul></div></div>',1))]))}},a9={class:"mx-auto max-w-5xl p-10"},u9={__name:"ProjectConnectionsView",setup(n){return Y([]),kn(async()=>{}),(e,t)=>(v(),k("div",a9,[C(po,{title:"Connections",description:"Manage database connections for this project."}),t[0]||(t[0]=uo('<div class="mt-10 rounded-2xl border border-zinc-200 bg-white p-8 shadow-sm dark:border-zinc-800 dark:bg-zinc-900"><div class="flex items-center gap-3 border-b border-zinc-100 pb-6 dark:border-zinc-800"><div class="flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-sky-500 to-sky-600 shadow-lg shadow-sky-500/20"><svg class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg></div><h3 class="text-xl font-bold text-zinc-900 dark:text-white">Database Connections</h3></div><div class="mt-8"><p class="text-sm text-zinc-600 dark:text-zinc-400"> Connection management interface coming soon. This page will allow you to: </p><ul class="mt-4 space-y-2 text-sm text-zinc-600 dark:text-zinc-400"><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Configure database connections (SQLite, PostgreSQL) </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Store connection credentials securely </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Test database connectivity </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Manage connection pooling settings </li></ul></div></div>',1))]))}},c9=[{path:"/",redirect:"/projects"},{path:"/docs",redirect:"/docs/category/1"},{path:"/docs/category/:categoryId",name:"docs-category",component:u5,props:!0},{path:"/projects",name:"projects",component:t3},{path:"/projects/new",name:"project-create",component:F6},{path:"/project/:id",name:"project-detail",component:XB,props:!0},{path:"/settings/:section?/:subsection?",name:"settings",component:s9,props:!0},{path:"/project/packages",name:"project-packages",component:r9},{path:"/project/data",name:"project-data",component:l9},{path:"/project/connections",name:"project-connections",component:u9}],d9=KS({history:AS(),routes:c9});$2(BC).use(d9).mount("#app");
