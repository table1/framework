(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(n){if(n.ep)return;n.ep=!0;const r=t(n);fetch(n.href,r)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function xd(s){const e=Object.create(null);for(const t of s.split(","))e[t]=1;return t=>t in e}const yt={},ir=[],vi=()=>{},Fm=()=>!1,Va=s=>s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&(s.charCodeAt(2)>122||s.charCodeAt(2)<97),wd=s=>s.startsWith("onUpdate:"),zt=Object.assign,Sd=(s,e)=>{const t=s.indexOf(e);t>-1&&s.splice(t,1)},Kb=Object.prototype.hasOwnProperty,ct=(s,e)=>Kb.call(s,e),Ie=Array.isArray,nr=s=>Go(s)==="[object Map]",Mr=s=>Go(s)==="[object Set]",Yf=s=>Go(s)==="[object Date]",qe=s=>typeof s=="function",At=s=>typeof s=="string",Gs=s=>typeof s=="symbol",mt=s=>s!==null&&typeof s=="object",zm=s=>(mt(s)||qe(s))&&qe(s.then)&&qe(s.catch),Um=Object.prototype.toString,Go=s=>Um.call(s),qb=s=>Go(s).slice(8,-1),Hm=s=>Go(s)==="[object Object]",Cd=s=>At(s)&&s!=="NaN"&&s[0]!=="-"&&""+parseInt(s,10)===s,so=xd(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ba=s=>{const e=Object.create(null);return(t=>e[t]||(e[t]=s(t)))},Gb=/-\w/g,zs=Ba(s=>s.replace(Gb,e=>e.slice(1).toUpperCase())),Jb=/\B([A-Z])/g,zn=Ba(s=>s.replace(Jb,"-$1").toLowerCase()),Ia=Ba(s=>s.charAt(0).toUpperCase()+s.slice(1)),vc=Ba(s=>s?`on${Ia(s)}`:""),en=(s,e)=>!Object.is(s,e),Hl=(s,...e)=>{for(let t=0;t<s.length;t++)s[t](...e)},Wm=(s,e,t,i=!1)=>{Object.defineProperty(s,e,{configurable:!0,enumerable:!1,writable:i,value:t})},na=s=>{const e=parseFloat(s);return isNaN(e)?s:e},Yb=s=>{const e=At(s)?Number(s):NaN;return isNaN(e)?s:e};let Qf;const Na=()=>Qf||(Qf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ko(s){if(Ie(s)){const e={};for(let t=0;t<s.length;t++){const i=s[t],n=At(i)?e1(i):ko(i);if(n)for(const r in n)e[r]=n[r]}return e}else if(At(s)||mt(s))return s}const Qb=/;(?![^(]*\))/g,Xb=/:([^]+)/,Zb=/\/\*[^]*?\*\//g;function e1(s){const e={};return s.replace(Zb,"").split(Qb).forEach(t=>{if(t){const i=t.split(Xb);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function xe(s){let e="";if(At(s))e=s;else if(Ie(s))for(let t=0;t<s.length;t++){const i=xe(s[t]);i&&(e+=i+" ")}else if(mt(s))for(const t in s)s[t]&&(e+=t+" ");return e.trim()}const t1="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",s1=xd(t1);function Km(s){return!!s||s===""}function i1(s,e){if(s.length!==e.length)return!1;let t=!0;for(let i=0;t&&i<s.length;i++)t=Rn(s[i],e[i]);return t}function Rn(s,e){if(s===e)return!0;let t=Yf(s),i=Yf(e);if(t||i)return t&&i?s.getTime()===e.getTime():!1;if(t=Gs(s),i=Gs(e),t||i)return s===e;if(t=Ie(s),i=Ie(e),t||i)return t&&i?i1(s,e):!1;if(t=mt(s),i=mt(e),t||i){if(!t||!i)return!1;const n=Object.keys(s).length,r=Object.keys(e).length;if(n!==r)return!1;for(const o in s){const l=s.hasOwnProperty(o),a=e.hasOwnProperty(o);if(l&&!a||!l&&a||!Rn(s[o],e[o]))return!1}}return String(s)===String(e)}function _d(s,e){return s.findIndex(t=>Rn(t,e))}const qm=s=>!!(s&&s.__v_isRef===!0),X=s=>At(s)?s:s==null?"":Ie(s)||mt(s)&&(s.toString===Um||!qe(s.toString))?qm(s)?X(s.value):JSON.stringify(s,Gm,2):String(s),Gm=(s,e)=>qm(e)?Gm(s,e.value):nr(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[i,n],r)=>(t[yc(i,r)+" =>"]=n,t),{})}:Mr(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>yc(t))}:Gs(e)?yc(e):mt(e)&&!Ie(e)&&!Hm(e)?String(e):e,yc=(s,e="")=>{var t;return Gs(s)?`Symbol(${(t=s.description)!=null?t:e})`:s};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let vs;class n1{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=vs,!e&&vs&&(this.index=(vs.scopes||(vs.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=vs;try{return vs=this,e()}finally{vs=t}}}on(){++this._on===1&&(this.prevScope=vs,vs=this)}off(){this._on>0&&--this._on===0&&(vs=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let t,i;for(t=0,i=this.effects.length;t<i;t++)this.effects[t].stop();for(this.effects.length=0,t=0,i=this.cleanups.length;t<i;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function r1(){return vs}let xt;const bc=new WeakSet;class Jm{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,vs&&vs.active&&vs.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,bc.has(this)&&(bc.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Qm(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Xf(this),Xm(this);const e=xt,t=Ks;xt=this,Ks=!0;try{return this.fn()}finally{Zm(this),xt=e,Ks=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Dd(e);this.deps=this.depsTail=void 0,Xf(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?bc.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){ou(this)&&this.run()}get dirty(){return ou(this)}}let Ym=0,io,no;function Qm(s,e=!1){if(s.flags|=8,e){s.next=no,no=s;return}s.next=io,io=s}function Ad(){Ym++}function Md(){if(--Ym>0)return;if(no){let e=no;for(no=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let s;for(;io;){let e=io;for(io=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(i){s||(s=i)}e=t}}if(s)throw s}function Xm(s){for(let e=s.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Zm(s){let e,t=s.depsTail,i=t;for(;i;){const n=i.prevDep;i.version===-1?(i===t&&(t=n),Dd(i),o1(i)):e=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=n}s.deps=e,s.depsTail=t}function ou(s){for(let e=s.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(eg(e.dep.computed)||e.dep.version!==e.version))return!0;return!!s._dirty}function eg(s){if(s.flags&4&&!(s.flags&16)||(s.flags&=-17,s.globalVersion===xo)||(s.globalVersion=xo,!s.isSSR&&s.flags&128&&(!s.deps&&!s._dirty||!ou(s))))return;s.flags|=2;const e=s.dep,t=xt,i=Ks;xt=s,Ks=!0;try{Xm(s);const n=s.fn(s._value);(e.version===0||en(n,s._value))&&(s.flags|=128,s._value=n,e.version++)}catch(n){throw e.version++,n}finally{xt=t,Ks=i,Zm(s),s.flags&=-3}}function Dd(s,e=!1){const{dep:t,prevSub:i,nextSub:n}=s;if(i&&(i.nextSub=n,s.prevSub=void 0),n&&(n.prevSub=i,s.nextSub=void 0),t.subs===s&&(t.subs=i,!i&&t.computed)){t.computed.flags&=-5;for(let r=t.computed.deps;r;r=r.nextDep)Dd(r,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function o1(s){const{prevDep:e,nextDep:t}=s;e&&(e.nextDep=t,s.prevDep=void 0),t&&(t.prevDep=e,s.nextDep=void 0)}let Ks=!0;const tg=[];function Pi(){tg.push(Ks),Ks=!1}function ji(){const s=tg.pop();Ks=s===void 0?!0:s}function Xf(s){const{cleanup:e}=s;if(s.cleanup=void 0,e){const t=xt;xt=void 0;try{e()}finally{xt=t}}}let xo=0;class l1{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Ed{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!xt||!Ks||xt===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==xt)t=this.activeLink=new l1(xt,this),xt.deps?(t.prevDep=xt.depsTail,xt.depsTail.nextDep=t,xt.depsTail=t):xt.deps=xt.depsTail=t,sg(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const i=t.nextDep;i.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=i),t.prevDep=xt.depsTail,t.nextDep=void 0,xt.depsTail.nextDep=t,xt.depsTail=t,xt.deps===t&&(xt.deps=i)}return t}trigger(e){this.version++,xo++,this.notify(e)}notify(e){Ad();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{Md()}}}function sg(s){if(s.dep.sc++,s.sub.flags&4){const e=s.dep.computed;if(e&&!s.dep.subs){e.flags|=20;for(let i=e.deps;i;i=i.nextDep)sg(i)}const t=s.dep.subs;t!==s&&(s.prevSub=t,t&&(t.nextSub=s)),s.dep.subs=s}}const lu=new WeakMap,Pn=Symbol(""),au=Symbol(""),wo=Symbol("");function Xt(s,e,t){if(Ks&&xt){let i=lu.get(s);i||lu.set(s,i=new Map);let n=i.get(t);n||(i.set(t,n=new Ed),n.map=i,n.key=t),n.track()}}function Mi(s,e,t,i,n,r){const o=lu.get(s);if(!o){xo++;return}const l=a=>{a&&a.trigger()};if(Ad(),e==="clear")o.forEach(l);else{const a=Ie(s),u=a&&Cd(t);if(a&&t==="length"){const c=Number(i);o.forEach((d,f)=>{(f==="length"||f===wo||!Gs(f)&&f>=c)&&l(d)})}else switch((t!==void 0||o.has(void 0))&&l(o.get(t)),u&&l(o.get(wo)),e){case"add":a?u&&l(o.get("length")):(l(o.get(Pn)),nr(s)&&l(o.get(au)));break;case"delete":a||(l(o.get(Pn)),nr(s)&&l(o.get(au)));break;case"set":nr(s)&&l(o.get(Pn));break}}Md()}function Gn(s){const e=lt(s);return e===s?e:(Xt(e,"iterate",wo),Vs(s)?e:e.map(Wt))}function Fa(s){return Xt(s=lt(s),"iterate",wo),s}const a1={__proto__:null,[Symbol.iterator](){return kc(this,Symbol.iterator,Wt)},concat(...s){return Gn(this).concat(...s.map(e=>Ie(e)?Gn(e):e))},entries(){return kc(this,"entries",s=>(s[1]=Wt(s[1]),s))},every(s,e){return xi(this,"every",s,e,void 0,arguments)},filter(s,e){return xi(this,"filter",s,e,t=>t.map(Wt),arguments)},find(s,e){return xi(this,"find",s,e,Wt,arguments)},findIndex(s,e){return xi(this,"findIndex",s,e,void 0,arguments)},findLast(s,e){return xi(this,"findLast",s,e,Wt,arguments)},findLastIndex(s,e){return xi(this,"findLastIndex",s,e,void 0,arguments)},forEach(s,e){return xi(this,"forEach",s,e,void 0,arguments)},includes(...s){return xc(this,"includes",s)},indexOf(...s){return xc(this,"indexOf",s)},join(s){return Gn(this).join(s)},lastIndexOf(...s){return xc(this,"lastIndexOf",s)},map(s,e){return xi(this,"map",s,e,void 0,arguments)},pop(){return Fr(this,"pop")},push(...s){return Fr(this,"push",s)},reduce(s,...e){return Zf(this,"reduce",s,e)},reduceRight(s,...e){return Zf(this,"reduceRight",s,e)},shift(){return Fr(this,"shift")},some(s,e){return xi(this,"some",s,e,void 0,arguments)},splice(...s){return Fr(this,"splice",s)},toReversed(){return Gn(this).toReversed()},toSorted(s){return Gn(this).toSorted(s)},toSpliced(...s){return Gn(this).toSpliced(...s)},unshift(...s){return Fr(this,"unshift",s)},values(){return kc(this,"values",Wt)}};function kc(s,e,t){const i=Fa(s),n=i[e]();return i!==s&&!Vs(s)&&(n._next=n.next,n.next=()=>{const r=n._next();return r.done||(r.value=t(r.value)),r}),n}const c1=Array.prototype;function xi(s,e,t,i,n,r){const o=Fa(s),l=o!==s&&!Vs(s),a=o[e];if(a!==c1[e]){const d=a.apply(s,r);return l?Wt(d):d}let u=t;o!==s&&(l?u=function(d,f){return t.call(this,Wt(d),f,s)}:t.length>2&&(u=function(d,f){return t.call(this,d,f,s)}));const c=a.call(o,u,i);return l&&n?n(c):c}function Zf(s,e,t,i){const n=Fa(s);let r=t;return n!==s&&(Vs(s)?t.length>3&&(r=function(o,l,a){return t.call(this,o,l,a,s)}):r=function(o,l,a){return t.call(this,o,Wt(l),a,s)}),n[e](r,...i)}function xc(s,e,t){const i=lt(s);Xt(i,"iterate",wo);const n=i[e](...t);return(n===-1||n===!1)&&Pd(t[0])?(t[0]=lt(t[0]),i[e](...t)):n}function Fr(s,e,t=[]){Pi(),Ad();const i=lt(s)[e].apply(s,t);return Md(),ji(),i}const u1=xd("__proto__,__v_isRef,__isVue"),ig=new Set(Object.getOwnPropertyNames(Symbol).filter(s=>s!=="arguments"&&s!=="caller").map(s=>Symbol[s]).filter(Gs));function d1(s){Gs(s)||(s=String(s));const e=lt(this);return Xt(e,"has",s),e.hasOwnProperty(s)}class ng{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,i){if(t==="__v_skip")return e.__v_skip;const n=this._isReadonly,r=this._isShallow;if(t==="__v_isReactive")return!n;if(t==="__v_isReadonly")return n;if(t==="__v_isShallow")return r;if(t==="__v_raw")return i===(n?r?x1:ag:r?lg:og).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(i)?e:void 0;const o=Ie(e);if(!n){let a;if(o&&(a=a1[t]))return a;if(t==="hasOwnProperty")return d1}const l=Reflect.get(e,t,ss(e)?e:i);if((Gs(t)?ig.has(t):u1(t))||(n||Xt(e,"get",t),r))return l;if(ss(l)){const a=o&&Cd(t)?l:l.value;return n&&mt(a)?uu(a):a}return mt(l)?n?uu(l):js(l):l}}class rg extends ng{constructor(e=!1){super(!1,e)}set(e,t,i,n){let r=e[t];if(!this._isShallow){const a=nn(r);if(!Vs(i)&&!nn(i)&&(r=lt(r),i=lt(i)),!Ie(e)&&ss(r)&&!ss(i))return a||(r.value=i),!0}const o=Ie(e)&&Cd(t)?Number(t)<e.length:ct(e,t),l=Reflect.set(e,t,i,ss(e)?e:n);return e===lt(n)&&(o?en(i,r)&&Mi(e,"set",t,i):Mi(e,"add",t,i)),l}deleteProperty(e,t){const i=ct(e,t);e[t];const n=Reflect.deleteProperty(e,t);return n&&i&&Mi(e,"delete",t,void 0),n}has(e,t){const i=Reflect.has(e,t);return(!Gs(t)||!ig.has(t))&&Xt(e,"has",t),i}ownKeys(e){return Xt(e,"iterate",Ie(e)?"length":Pn),Reflect.ownKeys(e)}}class f1 extends ng{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const h1=new rg,p1=new f1,m1=new rg(!0);const cu=s=>s,pl=s=>Reflect.getPrototypeOf(s);function g1(s,e,t){return function(...i){const n=this.__v_raw,r=lt(n),o=nr(r),l=s==="entries"||s===Symbol.iterator&&o,a=s==="keys"&&o,u=n[s](...i),c=t?cu:e?ra:Wt;return!e&&Xt(r,"iterate",a?au:Pn),{next(){const{value:d,done:f}=u.next();return f?{value:d,done:f}:{value:l?[c(d[0]),c(d[1])]:c(d),done:f}},[Symbol.iterator](){return this}}}}function ml(s){return function(...e){return s==="delete"?!1:s==="clear"?void 0:this}}function v1(s,e){const t={get(n){const r=this.__v_raw,o=lt(r),l=lt(n);s||(en(n,l)&&Xt(o,"get",n),Xt(o,"get",l));const{has:a}=pl(o),u=e?cu:s?ra:Wt;if(a.call(o,n))return u(r.get(n));if(a.call(o,l))return u(r.get(l));r!==o&&r.get(n)},get size(){const n=this.__v_raw;return!s&&Xt(lt(n),"iterate",Pn),n.size},has(n){const r=this.__v_raw,o=lt(r),l=lt(n);return s||(en(n,l)&&Xt(o,"has",n),Xt(o,"has",l)),n===l?r.has(n):r.has(n)||r.has(l)},forEach(n,r){const o=this,l=o.__v_raw,a=lt(l),u=e?cu:s?ra:Wt;return!s&&Xt(a,"iterate",Pn),l.forEach((c,d)=>n.call(r,u(c),u(d),o))}};return zt(t,s?{add:ml("add"),set:ml("set"),delete:ml("delete"),clear:ml("clear")}:{add(n){!e&&!Vs(n)&&!nn(n)&&(n=lt(n));const r=lt(this);return pl(r).has.call(r,n)||(r.add(n),Mi(r,"add",n,n)),this},set(n,r){!e&&!Vs(r)&&!nn(r)&&(r=lt(r));const o=lt(this),{has:l,get:a}=pl(o);let u=l.call(o,n);u||(n=lt(n),u=l.call(o,n));const c=a.call(o,n);return o.set(n,r),u?en(r,c)&&Mi(o,"set",n,r):Mi(o,"add",n,r),this},delete(n){const r=lt(this),{has:o,get:l}=pl(r);let a=o.call(r,n);a||(n=lt(n),a=o.call(r,n)),l&&l.call(r,n);const u=r.delete(n);return a&&Mi(r,"delete",n,void 0),u},clear(){const n=lt(this),r=n.size!==0,o=n.clear();return r&&Mi(n,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(n=>{t[n]=g1(n,s,e)}),t}function Td(s,e){const t=v1(s,e);return(i,n,r)=>n==="__v_isReactive"?!s:n==="__v_isReadonly"?s:n==="__v_raw"?i:Reflect.get(ct(t,n)&&n in i?t:i,n,r)}const y1={get:Td(!1,!1)},b1={get:Td(!1,!0)},k1={get:Td(!0,!1)};const og=new WeakMap,lg=new WeakMap,ag=new WeakMap,x1=new WeakMap;function w1(s){switch(s){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function S1(s){return s.__v_skip||!Object.isExtensible(s)?0:w1(qb(s))}function js(s){return nn(s)?s:Od(s,!1,h1,y1,og)}function cg(s){return Od(s,!1,m1,b1,lg)}function uu(s){return Od(s,!0,p1,k1,ag)}function Od(s,e,t,i,n){if(!mt(s)||s.__v_raw&&!(e&&s.__v_isReactive))return s;const r=S1(s);if(r===0)return s;const o=n.get(s);if(o)return o;const l=new Proxy(s,r===2?i:t);return n.set(s,l),l}function rr(s){return nn(s)?rr(s.__v_raw):!!(s&&s.__v_isReactive)}function nn(s){return!!(s&&s.__v_isReadonly)}function Vs(s){return!!(s&&s.__v_isShallow)}function Pd(s){return s?!!s.__v_raw:!1}function lt(s){const e=s&&s.__v_raw;return e?lt(e):s}function C1(s){return!ct(s,"__v_skip")&&Object.isExtensible(s)&&Wm(s,"__v_skip",!0),s}const Wt=s=>mt(s)?js(s):s,ra=s=>mt(s)?uu(s):s;function ss(s){return s?s.__v_isRef===!0:!1}function ie(s){return ug(s,!1)}function _1(s){return ug(s,!0)}function ug(s,e){return ss(s)?s:new A1(s,e)}class A1{constructor(e,t){this.dep=new Ed,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:lt(e),this._value=t?e:Wt(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,i=this.__v_isShallow||Vs(e)||nn(e);e=i?e:lt(e),en(e,t)&&(this._rawValue=e,this._value=i?e:Wt(e),this.dep.trigger())}}function ft(s){return ss(s)?s.value:s}const M1={get:(s,e,t)=>e==="__v_raw"?s:ft(Reflect.get(s,e,t)),set:(s,e,t,i)=>{const n=s[e];return ss(n)&&!ss(t)?(n.value=t,!0):Reflect.set(s,e,t,i)}};function dg(s){return rr(s)?s:new Proxy(s,M1)}class D1{constructor(e,t,i){this.fn=e,this.setter=t,this._value=void 0,this.dep=new Ed(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=xo-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&xt!==this)return Qm(this,!0),!0}get value(){const e=this.dep.track();return eg(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function E1(s,e,t=!1){let i,n;return qe(s)?i=s:(i=s.get,n=s.set),new D1(i,n,t)}const gl={},oa=new WeakMap;let wn;function T1(s,e=!1,t=wn){if(t){let i=oa.get(t);i||oa.set(t,i=[]),i.push(s)}}function O1(s,e,t=yt){const{immediate:i,deep:n,once:r,scheduler:o,augmentJob:l,call:a}=t,u=H=>n?H:Vs(H)||n===!1||n===0?Di(H,1):Di(H);let c,d,f,p,v=!1,k=!1;if(ss(s)?(d=()=>s.value,v=Vs(s)):rr(s)?(d=()=>u(s),v=!0):Ie(s)?(k=!0,v=s.some(H=>rr(H)||Vs(H)),d=()=>s.map(H=>{if(ss(H))return H.value;if(rr(H))return u(H);if(qe(H))return a?a(H,2):H()})):qe(s)?e?d=a?()=>a(s,2):s:d=()=>{if(f){Pi();try{f()}finally{ji()}}const H=wn;wn=c;try{return a?a(s,3,[p]):s(p)}finally{wn=H}}:d=vi,e&&n){const H=d,N=n===!0?1/0:n;d=()=>Di(H(),N)}const m=r1(),w=()=>{c.stop(),m&&m.active&&Sd(m.effects,c)};if(r&&e){const H=e;e=(...N)=>{H(...N),w()}}let L=k?new Array(s.length).fill(gl):gl;const I=H=>{if(!(!(c.flags&1)||!c.dirty&&!H))if(e){const N=c.run();if(n||v||(k?N.some((P,S)=>en(P,L[S])):en(N,L))){f&&f();const P=wn;wn=c;try{const S=[N,L===gl?void 0:k&&L[0]===gl?[]:L,p];L=N,a?a(e,3,S):e(...S)}finally{wn=P}}}else c.run()};return l&&l(I),c=new Jm(d),c.scheduler=o?()=>o(I,!1):I,p=H=>T1(H,!1,c),f=c.onStop=()=>{const H=oa.get(c);if(H){if(a)a(H,4);else for(const N of H)N();oa.delete(c)}},e?i?I(!0):L=c.run():o?o(I.bind(null,!0),!0):c.run(),w.pause=c.pause.bind(c),w.resume=c.resume.bind(c),w.stop=w,w}function Di(s,e=1/0,t){if(e<=0||!mt(s)||s.__v_skip||(t=t||new Map,(t.get(s)||0)>=e))return s;if(t.set(s,e),e--,ss(s))Di(s.value,e,t);else if(Ie(s))for(let i=0;i<s.length;i++)Di(s[i],e,t);else if(Mr(s)||nr(s))s.forEach(i=>{Di(i,e,t)});else if(Hm(s)){for(const i in s)Di(s[i],e,t);for(const i of Object.getOwnPropertySymbols(s))Object.prototype.propertyIsEnumerable.call(s,i)&&Di(s[i],e,t)}return s}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Jo(s,e,t,i){try{return i?s(...i):s()}catch(n){za(n,e,t)}}function Js(s,e,t,i){if(qe(s)){const n=Jo(s,e,t,i);return n&&zm(n)&&n.catch(r=>{za(r,e,t)}),n}if(Ie(s)){const n=[];for(let r=0;r<s.length;r++)n.push(Js(s[r],e,t,i));return n}}function za(s,e,t,i=!0){const n=e?e.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||yt;if(e){let l=e.parent;const a=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${t}`;for(;l;){const c=l.ec;if(c){for(let d=0;d<c.length;d++)if(c[d](s,a,u)===!1)return}l=l.parent}if(r){Pi(),Jo(r,null,10,[s,a,u]),ji();return}}P1(s,t,n,i,o)}function P1(s,e,t,i=!0,n=!1){if(n)throw s;console.error(s)}const fs=[];let ui=-1;const or=[];let Ui=null,Jn=0;const fg=Promise.resolve();let la=null;function qs(s){const e=la||fg;return s?e.then(this?s.bind(this):s):e}function j1(s){let e=ui+1,t=fs.length;for(;e<t;){const i=e+t>>>1,n=fs[i],r=So(n);r<s||r===s&&n.flags&2?e=i+1:t=i}return e}function jd(s){if(!(s.flags&1)){const e=So(s),t=fs[fs.length-1];!t||!(s.flags&2)&&e>=So(t)?fs.push(s):fs.splice(j1(e),0,s),s.flags|=1,hg()}}function hg(){la||(la=fg.then(mg))}function $1(s){Ie(s)?or.push(...s):Ui&&s.id===-1?Ui.splice(Jn+1,0,s):s.flags&1||(or.push(s),s.flags|=1),hg()}function eh(s,e,t=ui+1){for(;t<fs.length;t++){const i=fs[t];if(i&&i.flags&2){if(s&&i.id!==s.uid)continue;fs.splice(t,1),t--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function pg(s){if(or.length){const e=[...new Set(or)].sort((t,i)=>So(t)-So(i));if(or.length=0,Ui){Ui.push(...e);return}for(Ui=e,Jn=0;Jn<Ui.length;Jn++){const t=Ui[Jn];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}Ui=null,Jn=0}}const So=s=>s.id==null?s.flags&2?-1:1/0:s.id;function mg(s){try{for(ui=0;ui<fs.length;ui++){const e=fs[ui];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Jo(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;ui<fs.length;ui++){const e=fs[ui];e&&(e.flags&=-2)}ui=-1,fs.length=0,pg(),la=null,(fs.length||or.length)&&mg()}}let Gt=null,gg=null;function aa(s){const e=Gt;return Gt=s,gg=s&&s.type.__scopeId||null,e}function Z(s,e=Gt,t){if(!e||s._n)return s;const i=(...n)=>{i._d&&fa(-1);const r=aa(e);let o;try{o=s(...n)}finally{aa(r),i._d&&fa(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function Ze(s,e){if(Gt===null)return s;const t=Ga(Gt),i=s.dirs||(s.dirs=[]);for(let n=0;n<e.length;n++){let[r,o,l,a=yt]=e[n];r&&(qe(r)&&(r={mounted:r,updated:r}),r.deep&&Di(o),i.push({dir:r,instance:t,value:o,oldValue:void 0,arg:l,modifiers:a}))}return s}function vn(s,e,t,i){const n=s.dirs,r=e&&e.dirs;for(let o=0;o<n.length;o++){const l=n[o];r&&(l.oldValue=r[o].value);let a=l.dir[i];a&&(Pi(),Js(a,t,8,[s.el,l,s,e]),ji())}}const vg=Symbol("_vte"),yg=s=>s.__isTeleport,ro=s=>s&&(s.disabled||s.disabled===""),th=s=>s&&(s.defer||s.defer===""),sh=s=>typeof SVGElement<"u"&&s instanceof SVGElement,ih=s=>typeof MathMLElement=="function"&&s instanceof MathMLElement,du=(s,e)=>{const t=s&&s.to;return At(t)?e?e(t):null:t},bg={name:"Teleport",__isTeleport:!0,process(s,e,t,i,n,r,o,l,a,u){const{mc:c,pc:d,pbc:f,o:{insert:p,querySelector:v,createText:k,createComment:m}}=u,w=ro(e.props);let{shapeFlag:L,children:I,dynamicChildren:H}=e;if(s==null){const N=e.el=k(""),P=e.anchor=k("");p(N,t,i),p(P,t,i);const S=(W,oe)=>{L&16&&c(I,W,oe,n,r,o,l,a)},O=()=>{const W=e.target=du(e.props,v),oe=xg(W,e,k,p);W&&(o!=="svg"&&sh(W)?o="svg":o!=="mathml"&&ih(W)&&(o="mathml"),n&&n.isCE&&(n.ce._teleportTargets||(n.ce._teleportTargets=new Set)).add(W),w||(S(W,oe),Wl(e,!1)))};w&&(S(t,P),Wl(e,!0)),th(e.props)?(e.el.__isMounted=!1,cs(()=>{O(),delete e.el.__isMounted},r)):O()}else{if(th(e.props)&&s.el.__isMounted===!1){cs(()=>{bg.process(s,e,t,i,n,r,o,l,a,u)},r);return}e.el=s.el,e.targetStart=s.targetStart;const N=e.anchor=s.anchor,P=e.target=s.target,S=e.targetAnchor=s.targetAnchor,O=ro(s.props),W=O?t:P,oe=O?N:S;if(o==="svg"||sh(P)?o="svg":(o==="mathml"||ih(P))&&(o="mathml"),H?(f(s.dynamicChildren,H,W,n,r,o,l),Ld(s,e,!0)):a||d(s,e,W,oe,n,r,o,l,!1),w)O?e.props&&s.props&&e.props.to!==s.props.to&&(e.props.to=s.props.to):vl(e,t,N,u,1);else if((e.props&&e.props.to)!==(s.props&&s.props.to)){const se=e.target=du(e.props,v);se&&vl(e,se,null,u,0)}else O&&vl(e,P,S,u,1);Wl(e,w)}},remove(s,e,t,{um:i,o:{remove:n}},r){const{shapeFlag:o,children:l,anchor:a,targetStart:u,targetAnchor:c,target:d,props:f}=s;if(d&&(n(u),n(c)),r&&n(a),o&16){const p=r||!ro(f);for(let v=0;v<l.length;v++){const k=l[v];i(k,e,t,p,!!k.dynamicChildren)}}},move:vl,hydrate:R1};function vl(s,e,t,{o:{insert:i},m:n},r=2){r===0&&i(s.targetAnchor,e,t);const{el:o,anchor:l,shapeFlag:a,children:u,props:c}=s,d=r===2;if(d&&i(o,e,t),(!d||ro(c))&&a&16)for(let f=0;f<u.length;f++)n(u[f],e,t,2);d&&i(l,e,t)}function R1(s,e,t,i,n,r,{o:{nextSibling:o,parentNode:l,querySelector:a,insert:u,createText:c}},d){function f(k,m,w,L){m.anchor=d(o(k),m,l(k),t,i,n,r),m.targetStart=w,m.targetAnchor=L}const p=e.target=du(e.props,a),v=ro(e.props);if(p){const k=p._lpa||p.firstChild;if(e.shapeFlag&16)if(v)f(s,e,k,k&&o(k));else{e.anchor=o(s);let m=k;for(;m;){if(m&&m.nodeType===8){if(m.data==="teleport start anchor")e.targetStart=m;else if(m.data==="teleport anchor"){e.targetAnchor=m,p._lpa=e.targetAnchor&&o(e.targetAnchor);break}}m=o(m)}e.targetAnchor||xg(p,e,c,u),d(k&&o(k),e,p,t,i,n,r)}Wl(e,v)}else v&&e.shapeFlag&16&&f(s,e,s,o(s));return e.anchor&&o(e.anchor)}const kg=bg;function Wl(s,e){const t=s.ctx;if(t&&t.ut){let i,n;for(e?(i=s.el,n=s.anchor):(i=s.targetStart,n=s.targetAnchor);i&&i!==n;)i.nodeType===1&&i.setAttribute("data-v-owner",t.uid),i=i.nextSibling;t.ut()}}function xg(s,e,t,i){const n=e.targetStart=t(""),r=e.targetAnchor=t("");return n[vg]=r,s&&(i(n,s),i(r,s)),r}const Ai=Symbol("_leaveCb"),yl=Symbol("_enterCb");function L1(){const s={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return is(()=>{s.isMounted=!0}),Tg(()=>{s.isUnmounting=!0}),s}const Ps=[Function,Array],wg={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ps,onEnter:Ps,onAfterEnter:Ps,onEnterCancelled:Ps,onBeforeLeave:Ps,onLeave:Ps,onAfterLeave:Ps,onLeaveCancelled:Ps,onBeforeAppear:Ps,onAppear:Ps,onAfterAppear:Ps,onAppearCancelled:Ps},Sg=s=>{const e=s.subTree;return e.component?Sg(e.component):e},V1={name:"BaseTransition",props:wg,setup(s,{slots:e}){const t=Bd(),i=L1();return()=>{const n=e.default&&Ag(e.default(),!0);if(!n||!n.length)return;const r=Cg(n),o=lt(s),{mode:l}=o;if(i.isLeaving)return wc(r);const a=nh(r);if(!a)return wc(r);let u=fu(a,o,i,t,d=>u=d);a.type!==Zt&&Co(a,u);let c=t.subTree&&nh(t.subTree);if(c&&c.type!==Zt&&!_n(c,a)&&Sg(t).type!==Zt){let d=fu(c,o,i,t);if(Co(c,d),l==="out-in"&&a.type!==Zt)return i.isLeaving=!0,d.afterLeave=()=>{i.isLeaving=!1,t.job.flags&8||t.update(),delete d.afterLeave,c=void 0},wc(r);l==="in-out"&&a.type!==Zt?d.delayLeave=(f,p,v)=>{const k=_g(i,c);k[String(c.key)]=c,f[Ai]=()=>{p(),f[Ai]=void 0,delete u.delayedLeave,c=void 0},u.delayedLeave=()=>{v(),delete u.delayedLeave,c=void 0}}:c=void 0}else c&&(c=void 0);return r}}};function Cg(s){let e=s[0];if(s.length>1){for(const t of s)if(t.type!==Zt){e=t;break}}return e}const B1=V1;function _g(s,e){const{leavingVNodes:t}=s;let i=t.get(e.type);return i||(i=Object.create(null),t.set(e.type,i)),i}function fu(s,e,t,i,n){const{appear:r,mode:o,persisted:l=!1,onBeforeEnter:a,onEnter:u,onAfterEnter:c,onEnterCancelled:d,onBeforeLeave:f,onLeave:p,onAfterLeave:v,onLeaveCancelled:k,onBeforeAppear:m,onAppear:w,onAfterAppear:L,onAppearCancelled:I}=e,H=String(s.key),N=_g(t,s),P=(W,oe)=>{W&&Js(W,i,9,oe)},S=(W,oe)=>{const se=oe[1];P(W,oe),Ie(W)?W.every(B=>B.length<=1)&&se():W.length<=1&&se()},O={mode:o,persisted:l,beforeEnter(W){let oe=a;if(!t.isMounted)if(r)oe=m||a;else return;W[Ai]&&W[Ai](!0);const se=N[H];se&&_n(s,se)&&se.el[Ai]&&se.el[Ai](),P(oe,[W])},enter(W){let oe=u,se=c,B=d;if(!t.isMounted)if(r)oe=w||u,se=L||c,B=I||d;else return;let ae=!1;const ee=W[yl]=$=>{ae||(ae=!0,$?P(B,[W]):P(se,[W]),O.delayedLeave&&O.delayedLeave(),W[yl]=void 0)};oe?S(oe,[W,ee]):ee()},leave(W,oe){const se=String(s.key);if(W[yl]&&W[yl](!0),t.isUnmounting)return oe();P(f,[W]);let B=!1;const ae=W[Ai]=ee=>{B||(B=!0,oe(),ee?P(k,[W]):P(v,[W]),W[Ai]=void 0,N[se]===s&&delete N[se])};N[se]=s,p?S(p,[W,ae]):ae()},clone(W){const oe=fu(W,e,t,i,n);return n&&n(oe),oe}};return O}function wc(s){if(Ua(s))return s=rn(s),s.children=null,s}function nh(s){if(!Ua(s))return yg(s.type)&&s.children?Cg(s.children):s;if(s.component)return s.component.subTree;const{shapeFlag:e,children:t}=s;if(t){if(e&16)return t[0];if(e&32&&qe(t.default))return t.default()}}function Co(s,e){s.shapeFlag&6&&s.component?(s.transition=e,Co(s.component.subTree,e)):s.shapeFlag&128?(s.ssContent.transition=e.clone(s.ssContent),s.ssFallback.transition=e.clone(s.ssFallback)):s.transition=e}function Ag(s,e=!1,t){let i=[],n=0;for(let r=0;r<s.length;r++){let o=s[r];const l=t==null?o.key:String(t)+String(o.key!=null?o.key:r);o.type===ye?(o.patchFlag&128&&n++,i=i.concat(Ag(o.children,e,l))):(e||o.type!==Zt)&&i.push(l!=null?rn(o,{key:l}):o)}if(n>1)for(let r=0;r<i.length;r++)i[r].patchFlag=-2;return i}function Mg(s,e){return qe(s)?zt({name:s.name},e,{setup:s}):s}function Dg(s){s.ids=[s.ids[0]+s.ids[2]+++"-",0,0]}const ca=new WeakMap;function oo(s,e,t,i,n=!1){if(Ie(s)){s.forEach((v,k)=>oo(v,e&&(Ie(e)?e[k]:e),t,i,n));return}if(lr(i)&&!n){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&oo(s,e,t,i.component.subTree);return}const r=i.shapeFlag&4?Ga(i.component):i.el,o=n?null:r,{i:l,r:a}=s,u=e&&e.r,c=l.refs===yt?l.refs={}:l.refs,d=l.setupState,f=lt(d),p=d===yt?Fm:v=>ct(f,v);if(u!=null&&u!==a){if(rh(e),At(u))c[u]=null,p(u)&&(d[u]=null);else if(ss(u)){u.value=null;const v=e;v.k&&(c[v.k]=null)}}if(qe(a))Jo(a,l,12,[o,c]);else{const v=At(a),k=ss(a);if(v||k){const m=()=>{if(s.f){const w=v?p(a)?d[a]:c[a]:a.value;if(n)Ie(w)&&Sd(w,r);else if(Ie(w))w.includes(r)||w.push(r);else if(v)c[a]=[r],p(a)&&(d[a]=c[a]);else{const L=[r];a.value=L,s.k&&(c[s.k]=L)}}else v?(c[a]=o,p(a)&&(d[a]=o)):k&&(a.value=o,s.k&&(c[s.k]=o))};if(o){const w=()=>{m(),ca.delete(s)};w.id=-1,ca.set(s,w),cs(w,t)}else rh(s),m()}}}function rh(s){const e=ca.get(s);e&&(e.flags|=8,ca.delete(s))}Na().requestIdleCallback;Na().cancelIdleCallback;const lr=s=>!!s.type.__asyncLoader,Ua=s=>s.type.__isKeepAlive;function I1(s,e){Eg(s,"a",e)}function N1(s,e){Eg(s,"da",e)}function Eg(s,e,t=es){const i=s.__wdc||(s.__wdc=()=>{let n=t;for(;n;){if(n.isDeactivated)return;n=n.parent}return s()});if(Ha(e,i,t),t){let n=t.parent;for(;n&&n.parent;)Ua(n.parent.vnode)&&F1(i,e,t,n),n=n.parent}}function F1(s,e,t,i){const n=Ha(e,s,i,!0);Dr(()=>{Sd(i[e],n)},t)}function Ha(s,e,t=es,i=!1){if(t){const n=t[s]||(t[s]=[]),r=e.__weh||(e.__weh=(...o)=>{Pi();const l=Yo(t),a=Js(e,t,s,o);return l(),ji(),a});return i?n.unshift(r):n.push(r),r}}const Vi=s=>(e,t=es)=>{(!Mo||s==="sp")&&Ha(s,(...i)=>e(...i),t)},z1=Vi("bm"),is=Vi("m"),U1=Vi("bu"),H1=Vi("u"),Tg=Vi("bum"),Dr=Vi("um"),W1=Vi("sp"),K1=Vi("rtg"),q1=Vi("rtc");function G1(s,e=es){Ha("ec",s,e)}const Og="components";function ua(s,e){return jg(Og,s,!0,e)||s}const Pg=Symbol.for("v-ndc");function ws(s){return At(s)?jg(Og,s,!1)||s:s||Pg}function jg(s,e,t=!0,i=!1){const n=Gt||es;if(n){const r=n.type;{const l=Vk(r,!1);if(l&&(l===e||l===zs(e)||l===Ia(zs(e))))return r}const o=oh(n[s]||r[s],e)||oh(n.appContext[s],e);return!o&&i?r:o}}function oh(s,e){return s&&(s[e]||s[zs(e)]||s[Ia(zs(e))])}function $e(s,e,t,i){let n;const r=t,o=Ie(s);if(o||At(s)){const l=o&&rr(s);let a=!1,u=!1;l&&(a=!Vs(s),u=nn(s),s=Fa(s)),n=new Array(s.length);for(let c=0,d=s.length;c<d;c++)n[c]=e(a?u?ra(Wt(s[c])):Wt(s[c]):s[c],c,void 0,r)}else if(typeof s=="number"){n=new Array(s);for(let l=0;l<s;l++)n[l]=e(l+1,l,void 0,r)}else if(mt(s))if(s[Symbol.iterator])n=Array.from(s,(l,a)=>e(l,a,void 0,r));else{const l=Object.keys(s);n=new Array(l.length);for(let a=0,u=l.length;a<u;a++){const c=l[a];n[a]=e(s[c],c,a,r)}}else n=[];return n}function J1(s,e){for(let t=0;t<e.length;t++){const i=e[t];if(Ie(i))for(let n=0;n<i.length;n++)s[i[n].name]=i[n].fn;else i&&(s[i.name]=i.key?(...n)=>{const r=i.fn(...n);return r&&(r.key=i.key),r}:i.fn)}return s}function dt(s,e,t={},i,n){if(Gt.ce||Gt.parent&&lr(Gt.parent)&&Gt.parent.ce){const u=Object.keys(t).length>0;return e!=="default"&&(t.name=e),g(),_e(ye,null,[A("slot",t,i&&i())],u?-2:64)}let r=s[e];r&&r._c&&(r._d=!1),g();const o=r&&$g(r(t)),l=t.key||o&&o.key,a=_e(ye,{key:(l&&!Gs(l)?l:`_${e}`)+(!o&&i?"_fb":"")},o||(i?i():[]),o&&s._===1?64:-2);return!n&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),r&&r._c&&(r._d=!0),a}function $g(s){return s.some(e=>Ao(e)?!(e.type===Zt||e.type===ye&&!$g(e.children)):!0)?s:null}const hu=s=>s?Zg(s)?Ga(s):hu(s.parent):null,lo=zt(Object.create(null),{$:s=>s,$el:s=>s.vnode.el,$data:s=>s.data,$props:s=>s.props,$attrs:s=>s.attrs,$slots:s=>s.slots,$refs:s=>s.refs,$parent:s=>hu(s.parent),$root:s=>hu(s.root),$host:s=>s.ce,$emit:s=>s.emit,$options:s=>Lg(s),$forceUpdate:s=>s.f||(s.f=()=>{jd(s.update)}),$nextTick:s=>s.n||(s.n=qs.bind(s.proxy)),$watch:s=>yk.bind(s)}),Sc=(s,e)=>s!==yt&&!s.__isScriptSetup&&ct(s,e),Y1={get({_:s},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:i,data:n,props:r,accessCache:o,type:l,appContext:a}=s;let u;if(e[0]!=="$"){const p=o[e];if(p!==void 0)switch(p){case 1:return i[e];case 2:return n[e];case 4:return t[e];case 3:return r[e]}else{if(Sc(i,e))return o[e]=1,i[e];if(n!==yt&&ct(n,e))return o[e]=2,n[e];if((u=s.propsOptions[0])&&ct(u,e))return o[e]=3,r[e];if(t!==yt&&ct(t,e))return o[e]=4,t[e];pu&&(o[e]=0)}}const c=lo[e];let d,f;if(c)return e==="$attrs"&&Xt(s.attrs,"get",""),c(s);if((d=l.__cssModules)&&(d=d[e]))return d;if(t!==yt&&ct(t,e))return o[e]=4,t[e];if(f=a.config.globalProperties,ct(f,e))return f[e]},set({_:s},e,t){const{data:i,setupState:n,ctx:r}=s;return Sc(n,e)?(n[e]=t,!0):i!==yt&&ct(i,e)?(i[e]=t,!0):ct(s.props,e)||e[0]==="$"&&e.slice(1)in s?!1:(r[e]=t,!0)},has({_:{data:s,setupState:e,accessCache:t,ctx:i,appContext:n,propsOptions:r,type:o}},l){let a,u;return!!(t[l]||s!==yt&&l[0]!=="$"&&ct(s,l)||Sc(e,l)||(a=r[0])&&ct(a,l)||ct(i,l)||ct(lo,l)||ct(n.config.globalProperties,l)||(u=o.__cssModules)&&u[l])},defineProperty(s,e,t){return t.get!=null?s._.accessCache[e]=0:ct(t,"value")&&this.set(s,e,t.value,null),Reflect.defineProperty(s,e,t)}};function Q1(){return X1().slots}function X1(s){const e=Bd();return e.setupContext||(e.setupContext=t0(e))}function lh(s){return Ie(s)?s.reduce((e,t)=>(e[t]=null,e),{}):s}let pu=!0;function Z1(s){const e=Lg(s),t=s.proxy,i=s.ctx;pu=!1,e.beforeCreate&&ah(e.beforeCreate,s,"bc");const{data:n,computed:r,methods:o,watch:l,provide:a,inject:u,created:c,beforeMount:d,mounted:f,beforeUpdate:p,updated:v,activated:k,deactivated:m,beforeDestroy:w,beforeUnmount:L,destroyed:I,unmounted:H,render:N,renderTracked:P,renderTriggered:S,errorCaptured:O,serverPrefetch:W,expose:oe,inheritAttrs:se,components:B,directives:ae,filters:ee}=e;if(u&&ek(u,i,null),o)for(const Y in o){const ce=o[Y];qe(ce)&&(i[Y]=ce.bind(t))}if(n){const Y=n.call(t,t);mt(Y)&&(s.data=js(Y))}if(pu=!0,r)for(const Y in r){const ce=r[Y],ge=qe(ce)?ce.bind(t,t):qe(ce.get)?ce.get.bind(t,t):vi,Ne=!qe(ce)&&qe(ce.set)?ce.set.bind(t):vi,be=z({get:ge,set:Ne});Object.defineProperty(i,Y,{enumerable:!0,configurable:!0,get:()=>be.value,set:ze=>be.value=ze})}if(l)for(const Y in l)Rg(l[Y],i,t,Y);if(a){const Y=qe(a)?a.call(t):a;Reflect.ownKeys(Y).forEach(ce=>{ao(ce,Y[ce])})}c&&ah(c,s,"c");function q(Y,ce){Ie(ce)?ce.forEach(ge=>Y(ge.bind(t))):ce&&Y(ce.bind(t))}if(q(z1,d),q(is,f),q(U1,p),q(H1,v),q(I1,k),q(N1,m),q(G1,O),q(q1,P),q(K1,S),q(Tg,L),q(Dr,H),q(W1,W),Ie(oe))if(oe.length){const Y=s.exposed||(s.exposed={});oe.forEach(ce=>{Object.defineProperty(Y,ce,{get:()=>t[ce],set:ge=>t[ce]=ge,enumerable:!0})})}else s.exposed||(s.exposed={});N&&s.render===vi&&(s.render=N),se!=null&&(s.inheritAttrs=se),B&&(s.components=B),ae&&(s.directives=ae),W&&Dg(s)}function ek(s,e,t=vi){Ie(s)&&(s=mu(s));for(const i in s){const n=s[i];let r;mt(n)?"default"in n?r=Bs(n.from||i,n.default,!0):r=Bs(n.from||i):r=Bs(n),ss(r)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):e[i]=r}}function ah(s,e,t){Js(Ie(s)?s.map(i=>i.bind(e.proxy)):s.bind(e.proxy),e,t)}function Rg(s,e,t,i){let n=i.includes(".")?Gg(t,i):()=>t[i];if(At(s)){const r=e[s];qe(r)&&Re(n,r)}else if(qe(s))Re(n,s.bind(t));else if(mt(s))if(Ie(s))s.forEach(r=>Rg(r,e,t,i));else{const r=qe(s.handler)?s.handler.bind(t):e[s.handler];qe(r)&&Re(n,r,s)}}function Lg(s){const e=s.type,{mixins:t,extends:i}=e,{mixins:n,optionsCache:r,config:{optionMergeStrategies:o}}=s.appContext,l=r.get(e);let a;return l?a=l:!n.length&&!t&&!i?a=e:(a={},n.length&&n.forEach(u=>da(a,u,o,!0)),da(a,e,o)),mt(e)&&r.set(e,a),a}function da(s,e,t,i=!1){const{mixins:n,extends:r}=e;r&&da(s,r,t,!0),n&&n.forEach(o=>da(s,o,t,!0));for(const o in e)if(!(i&&o==="expose")){const l=tk[o]||t&&t[o];s[o]=l?l(s[o],e[o]):e[o]}return s}const tk={data:ch,props:uh,emits:uh,methods:Qr,computed:Qr,beforeCreate:as,created:as,beforeMount:as,mounted:as,beforeUpdate:as,updated:as,beforeDestroy:as,beforeUnmount:as,destroyed:as,unmounted:as,activated:as,deactivated:as,errorCaptured:as,serverPrefetch:as,components:Qr,directives:Qr,watch:ik,provide:ch,inject:sk};function ch(s,e){return e?s?function(){return zt(qe(s)?s.call(this,this):s,qe(e)?e.call(this,this):e)}:e:s}function sk(s,e){return Qr(mu(s),mu(e))}function mu(s){if(Ie(s)){const e={};for(let t=0;t<s.length;t++)e[s[t]]=s[t];return e}return s}function as(s,e){return s?[...new Set([].concat(s,e))]:e}function Qr(s,e){return s?zt(Object.create(null),s,e):e}function uh(s,e){return s?Ie(s)&&Ie(e)?[...new Set([...s,...e])]:zt(Object.create(null),lh(s),lh(e??{})):e}function ik(s,e){if(!s)return e;if(!e)return s;const t=zt(Object.create(null),s);for(const i in e)t[i]=as(s[i],e[i]);return t}function Vg(){return{app:null,config:{isNativeTag:Fm,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let nk=0;function rk(s,e){return function(i,n=null){qe(i)||(i=zt({},i)),n!=null&&!mt(n)&&(n=null);const r=Vg(),o=new WeakSet,l=[];let a=!1;const u=r.app={_uid:nk++,_component:i,_props:n,_container:null,_context:r,_instance:null,version:Ik,get config(){return r.config},set config(c){},use(c,...d){return o.has(c)||(c&&qe(c.install)?(o.add(c),c.install(u,...d)):qe(c)&&(o.add(c),c(u,...d))),u},mixin(c){return r.mixins.includes(c)||r.mixins.push(c),u},component(c,d){return d?(r.components[c]=d,u):r.components[c]},directive(c,d){return d?(r.directives[c]=d,u):r.directives[c]},mount(c,d,f){if(!a){const p=u._ceVNode||A(i,n);return p.appContext=r,f===!0?f="svg":f===!1&&(f=void 0),s(p,c,f),a=!0,u._container=c,c.__vue_app__=u,Ga(p.component)}},onUnmount(c){l.push(c)},unmount(){a&&(Js(l,u._instance,16),s(null,u._container),delete u._container.__vue_app__)},provide(c,d){return r.provides[c]=d,u},runWithContext(c){const d=ar;ar=u;try{return c()}finally{ar=d}}};return u}}let ar=null;function ao(s,e){if(es){let t=es.provides;const i=es.parent&&es.parent.provides;i===t&&(t=es.provides=Object.create(i)),t[s]=e}}function Bs(s,e,t=!1){const i=Bd();if(i||ar){let n=ar?ar._context.provides:i?i.parent==null||i.ce?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(n&&s in n)return n[s];if(arguments.length>1)return t&&qe(e)?e.call(i&&i.proxy):e}}const Bg={},Ig=()=>Object.create(Bg),Ng=s=>Object.getPrototypeOf(s)===Bg;function ok(s,e,t,i=!1){const n={},r=Ig();s.propsDefaults=Object.create(null),Fg(s,e,n,r);for(const o in s.propsOptions[0])o in n||(n[o]=void 0);t?s.props=i?n:cg(n):s.type.props?s.props=n:s.props=r,s.attrs=r}function lk(s,e,t,i){const{props:n,attrs:r,vnode:{patchFlag:o}}=s,l=lt(n),[a]=s.propsOptions;let u=!1;if((i||o>0)&&!(o&16)){if(o&8){const c=s.vnode.dynamicProps;for(let d=0;d<c.length;d++){let f=c[d];if(Wa(s.emitsOptions,f))continue;const p=e[f];if(a)if(ct(r,f))p!==r[f]&&(r[f]=p,u=!0);else{const v=zs(f);n[v]=gu(a,l,v,p,s,!1)}else p!==r[f]&&(r[f]=p,u=!0)}}}else{Fg(s,e,n,r)&&(u=!0);let c;for(const d in l)(!e||!ct(e,d)&&((c=zn(d))===d||!ct(e,c)))&&(a?t&&(t[d]!==void 0||t[c]!==void 0)&&(n[d]=gu(a,l,d,void 0,s,!0)):delete n[d]);if(r!==l)for(const d in r)(!e||!ct(e,d))&&(delete r[d],u=!0)}u&&Mi(s.attrs,"set","")}function Fg(s,e,t,i){const[n,r]=s.propsOptions;let o=!1,l;if(e)for(let a in e){if(so(a))continue;const u=e[a];let c;n&&ct(n,c=zs(a))?!r||!r.includes(c)?t[c]=u:(l||(l={}))[c]=u:Wa(s.emitsOptions,a)||(!(a in i)||u!==i[a])&&(i[a]=u,o=!0)}if(r){const a=lt(t),u=l||yt;for(let c=0;c<r.length;c++){const d=r[c];t[d]=gu(n,a,d,u[d],s,!ct(u,d))}}return o}function gu(s,e,t,i,n,r){const o=s[t];if(o!=null){const l=ct(o,"default");if(l&&i===void 0){const a=o.default;if(o.type!==Function&&!o.skipFactory&&qe(a)){const{propsDefaults:u}=n;if(t in u)i=u[t];else{const c=Yo(n);i=u[t]=a.call(null,e),c()}}else i=a;n.ce&&n.ce._setProp(t,i)}o[0]&&(r&&!l?i=!1:o[1]&&(i===""||i===zn(t))&&(i=!0))}return i}const ak=new WeakMap;function zg(s,e,t=!1){const i=t?ak:e.propsCache,n=i.get(s);if(n)return n;const r=s.props,o={},l=[];let a=!1;if(!qe(s)){const c=d=>{a=!0;const[f,p]=zg(d,e,!0);zt(o,f),p&&l.push(...p)};!t&&e.mixins.length&&e.mixins.forEach(c),s.extends&&c(s.extends),s.mixins&&s.mixins.forEach(c)}if(!r&&!a)return mt(s)&&i.set(s,ir),ir;if(Ie(r))for(let c=0;c<r.length;c++){const d=zs(r[c]);dh(d)&&(o[d]=yt)}else if(r)for(const c in r){const d=zs(c);if(dh(d)){const f=r[c],p=o[d]=Ie(f)||qe(f)?{type:f}:zt({},f),v=p.type;let k=!1,m=!0;if(Ie(v))for(let w=0;w<v.length;++w){const L=v[w],I=qe(L)&&L.name;if(I==="Boolean"){k=!0;break}else I==="String"&&(m=!1)}else k=qe(v)&&v.name==="Boolean";p[0]=k,p[1]=m,(k||ct(p,"default"))&&l.push(d)}}const u=[o,l];return mt(s)&&i.set(s,u),u}function dh(s){return s[0]!=="$"&&!so(s)}const $d=s=>s==="_"||s==="_ctx"||s==="$stable",Rd=s=>Ie(s)?s.map(di):[di(s)],ck=(s,e,t)=>{if(e._n)return e;const i=Z((...n)=>Rd(e(...n)),t);return i._c=!1,i},Ug=(s,e,t)=>{const i=s._ctx;for(const n in s){if($d(n))continue;const r=s[n];if(qe(r))e[n]=ck(n,r,i);else if(r!=null){const o=Rd(r);e[n]=()=>o}}},Hg=(s,e)=>{const t=Rd(e);s.slots.default=()=>t},Wg=(s,e,t)=>{for(const i in e)(t||!$d(i))&&(s[i]=e[i])},uk=(s,e,t)=>{const i=s.slots=Ig();if(s.vnode.shapeFlag&32){const n=e._;n?(Wg(i,e,t),t&&Wm(i,"_",n,!0)):Ug(e,i)}else e&&Hg(s,e)},dk=(s,e,t)=>{const{vnode:i,slots:n}=s;let r=!0,o=yt;if(i.shapeFlag&32){const l=e._;l?t&&l===1?r=!1:Wg(n,e,t):(r=!e.$stable,Ug(e,n)),o=e}else e&&(Hg(s,e),o={default:1});if(r)for(const l in n)!$d(l)&&o[l]==null&&delete n[l]},cs=Ak;function fk(s){return hk(s)}function hk(s,e){const t=Na();t.__VUE__=!0;const{insert:i,remove:n,patchProp:r,createElement:o,createText:l,createComment:a,setText:u,setElementText:c,parentNode:d,nextSibling:f,setScopeId:p=vi,insertStaticContent:v}=s,k=(x,_,U,ne=null,le=null,C=null,E=void 0,j=null,re=!!_.dynamicChildren)=>{if(x===_)return;x&&!_n(x,_)&&(ne=te(x),ze(x,le,C,!0),x=null),_.patchFlag===-2&&(re=!1,_.dynamicChildren=null);const{type:K,ref:Ce,shapeFlag:pe}=_;switch(K){case Ka:m(x,_,U,ne);break;case Zt:w(x,_,U,ne);break;case Kl:x==null&&L(_,U,ne,E);break;case ye:B(x,_,U,ne,le,C,E,j,re);break;default:pe&1?N(x,_,U,ne,le,C,E,j,re):pe&6?ae(x,_,U,ne,le,C,E,j,re):(pe&64||pe&128)&&K.process(x,_,U,ne,le,C,E,j,re,J)}Ce!=null&&le?oo(Ce,x&&x.ref,C,_||x,!_):Ce==null&&x&&x.ref!=null&&oo(x.ref,null,C,x,!0)},m=(x,_,U,ne)=>{if(x==null)i(_.el=l(_.children),U,ne);else{const le=_.el=x.el;_.children!==x.children&&u(le,_.children)}},w=(x,_,U,ne)=>{x==null?i(_.el=a(_.children||""),U,ne):_.el=x.el},L=(x,_,U,ne)=>{[x.el,x.anchor]=v(x.children,_,U,ne,x.el,x.anchor)},I=({el:x,anchor:_},U,ne)=>{let le;for(;x&&x!==_;)le=f(x),i(x,U,ne),x=le;i(_,U,ne)},H=({el:x,anchor:_})=>{let U;for(;x&&x!==_;)U=f(x),n(x),x=U;n(_)},N=(x,_,U,ne,le,C,E,j,re)=>{_.type==="svg"?E="svg":_.type==="math"&&(E="mathml"),x==null?P(_,U,ne,le,C,E,j,re):W(x,_,le,C,E,j,re)},P=(x,_,U,ne,le,C,E,j)=>{let re,K;const{props:Ce,shapeFlag:pe,transition:ke,dirs:Oe}=x;if(re=x.el=o(x.type,C,Ce&&Ce.is,Ce),pe&8?c(re,x.children):pe&16&&O(x.children,re,null,ne,le,Cc(x,C),E,j),Oe&&vn(x,null,ne,"created"),S(re,x,x.scopeId,E,ne),Ce){for(const Ye in Ce)Ye!=="value"&&!so(Ye)&&r(re,Ye,null,Ce[Ye],C,ne);"value"in Ce&&r(re,"value",null,Ce.value,C),(K=Ce.onVnodeBeforeMount)&&ri(K,ne,x)}Oe&&vn(x,null,ne,"beforeMount");const Be=pk(le,ke);Be&&ke.beforeEnter(re),i(re,_,U),((K=Ce&&Ce.onVnodeMounted)||Be||Oe)&&cs(()=>{K&&ri(K,ne,x),Be&&ke.enter(re),Oe&&vn(x,null,ne,"mounted")},le)},S=(x,_,U,ne,le)=>{if(U&&p(x,U),ne)for(let C=0;C<ne.length;C++)p(x,ne[C]);if(le){let C=le.subTree;if(_===C||Yg(C.type)&&(C.ssContent===_||C.ssFallback===_)){const E=le.vnode;S(x,E,E.scopeId,E.slotScopeIds,le.parent)}}},O=(x,_,U,ne,le,C,E,j,re=0)=>{for(let K=re;K<x.length;K++){const Ce=x[K]=j?Hi(x[K]):di(x[K]);k(null,Ce,_,U,ne,le,C,E,j)}},W=(x,_,U,ne,le,C,E)=>{const j=_.el=x.el;let{patchFlag:re,dynamicChildren:K,dirs:Ce}=_;re|=x.patchFlag&16;const pe=x.props||yt,ke=_.props||yt;let Oe;if(U&&yn(U,!1),(Oe=ke.onVnodeBeforeUpdate)&&ri(Oe,U,_,x),Ce&&vn(_,x,U,"beforeUpdate"),U&&yn(U,!0),(pe.innerHTML&&ke.innerHTML==null||pe.textContent&&ke.textContent==null)&&c(j,""),K?oe(x.dynamicChildren,K,j,U,ne,Cc(_,le),C):E||ce(x,_,j,null,U,ne,Cc(_,le),C,!1),re>0){if(re&16)se(j,pe,ke,U,le);else if(re&2&&pe.class!==ke.class&&r(j,"class",null,ke.class,le),re&4&&r(j,"style",pe.style,ke.style,le),re&8){const Be=_.dynamicProps;for(let Ye=0;Ye<Be.length;Ye++){const Qe=Be[Ye],bt=pe[Qe],Le=ke[Qe];(Le!==bt||Qe==="value")&&r(j,Qe,bt,Le,le,U)}}re&1&&x.children!==_.children&&c(j,_.children)}else!E&&K==null&&se(j,pe,ke,U,le);((Oe=ke.onVnodeUpdated)||Ce)&&cs(()=>{Oe&&ri(Oe,U,_,x),Ce&&vn(_,x,U,"updated")},ne)},oe=(x,_,U,ne,le,C,E)=>{for(let j=0;j<_.length;j++){const re=x[j],K=_[j],Ce=re.el&&(re.type===ye||!_n(re,K)||re.shapeFlag&198)?d(re.el):U;k(re,K,Ce,null,ne,le,C,E,!0)}},se=(x,_,U,ne,le)=>{if(_!==U){if(_!==yt)for(const C in _)!so(C)&&!(C in U)&&r(x,C,_[C],null,le,ne);for(const C in U){if(so(C))continue;const E=U[C],j=_[C];E!==j&&C!=="value"&&r(x,C,j,E,le,ne)}"value"in U&&r(x,"value",_.value,U.value,le)}},B=(x,_,U,ne,le,C,E,j,re)=>{const K=_.el=x?x.el:l(""),Ce=_.anchor=x?x.anchor:l("");let{patchFlag:pe,dynamicChildren:ke,slotScopeIds:Oe}=_;Oe&&(j=j?j.concat(Oe):Oe),x==null?(i(K,U,ne),i(Ce,U,ne),O(_.children||[],U,Ce,le,C,E,j,re)):pe>0&&pe&64&&ke&&x.dynamicChildren?(oe(x.dynamicChildren,ke,U,le,C,E,j),(_.key!=null||le&&_===le.subTree)&&Ld(x,_,!0)):ce(x,_,U,Ce,le,C,E,j,re)},ae=(x,_,U,ne,le,C,E,j,re)=>{_.slotScopeIds=j,x==null?_.shapeFlag&512?le.ctx.activate(_,U,ne,E,re):ee(_,U,ne,le,C,E,re):$(x,_,re)},ee=(x,_,U,ne,le,C,E)=>{const j=x.component=jk(x,ne,le);if(Ua(x)&&(j.ctx.renderer=J),$k(j,!1,E),j.asyncDep){if(le&&le.registerDep(j,q,E),!x.el){const re=j.subTree=A(Zt);w(null,re,_,U),x.placeholder=re.el}}else q(j,x,_,U,le,C,E)},$=(x,_,U)=>{const ne=_.component=x.component;if(Ck(x,_,U))if(ne.asyncDep&&!ne.asyncResolved){Y(ne,_,U);return}else ne.next=_,ne.update();else _.el=x.el,ne.vnode=_},q=(x,_,U,ne,le,C,E)=>{const j=()=>{if(x.isMounted){let{next:pe,bu:ke,u:Oe,parent:Be,vnode:Ye}=x;{const jt=Kg(x);if(jt){pe&&(pe.el=Ye.el,Y(x,pe,E)),jt.asyncDep.then(()=>{x.isUnmounted||j()});return}}let Qe=pe,bt;yn(x,!1),pe?(pe.el=Ye.el,Y(x,pe,E)):pe=Ye,ke&&Hl(ke),(bt=pe.props&&pe.props.onVnodeBeforeUpdate)&&ri(bt,Be,pe,Ye),yn(x,!0);const Le=hh(x),ot=x.subTree;x.subTree=Le,k(ot,Le,d(ot.el),te(ot),x,le,C),pe.el=Le.el,Qe===null&&_k(x,Le.el),Oe&&cs(Oe,le),(bt=pe.props&&pe.props.onVnodeUpdated)&&cs(()=>ri(bt,Be,pe,Ye),le)}else{let pe;const{el:ke,props:Oe}=_,{bm:Be,m:Ye,parent:Qe,root:bt,type:Le}=x,ot=lr(_);yn(x,!1),Be&&Hl(Be),!ot&&(pe=Oe&&Oe.onVnodeBeforeMount)&&ri(pe,Qe,_),yn(x,!0);{bt.ce&&bt.ce._def.shadowRoot!==!1&&bt.ce._injectChildStyle(Le);const jt=x.subTree=hh(x);k(null,jt,U,ne,x,le,C),_.el=jt.el}if(Ye&&cs(Ye,le),!ot&&(pe=Oe&&Oe.onVnodeMounted)){const jt=_;cs(()=>ri(pe,Qe,jt),le)}(_.shapeFlag&256||Qe&&lr(Qe.vnode)&&Qe.vnode.shapeFlag&256)&&x.a&&cs(x.a,le),x.isMounted=!0,_=U=ne=null}};x.scope.on();const re=x.effect=new Jm(j);x.scope.off();const K=x.update=re.run.bind(re),Ce=x.job=re.runIfDirty.bind(re);Ce.i=x,Ce.id=x.uid,re.scheduler=()=>jd(Ce),yn(x,!0),K()},Y=(x,_,U)=>{_.component=x;const ne=x.vnode.props;x.vnode=_,x.next=null,lk(x,_.props,ne,U),dk(x,_.children,U),Pi(),eh(x),ji()},ce=(x,_,U,ne,le,C,E,j,re=!1)=>{const K=x&&x.children,Ce=x?x.shapeFlag:0,pe=_.children,{patchFlag:ke,shapeFlag:Oe}=_;if(ke>0){if(ke&128){Ne(K,pe,U,ne,le,C,E,j,re);return}else if(ke&256){ge(K,pe,U,ne,le,C,E,j,re);return}}Oe&8?(Ce&16&&rt(K,le,C),pe!==K&&c(U,pe)):Ce&16?Oe&16?Ne(K,pe,U,ne,le,C,E,j,re):rt(K,le,C,!0):(Ce&8&&c(U,""),Oe&16&&O(pe,U,ne,le,C,E,j,re))},ge=(x,_,U,ne,le,C,E,j,re)=>{x=x||ir,_=_||ir;const K=x.length,Ce=_.length,pe=Math.min(K,Ce);let ke;for(ke=0;ke<pe;ke++){const Oe=_[ke]=re?Hi(_[ke]):di(_[ke]);k(x[ke],Oe,U,null,le,C,E,j,re)}K>Ce?rt(x,le,C,!0,!1,pe):O(_,U,ne,le,C,E,j,re,pe)},Ne=(x,_,U,ne,le,C,E,j,re)=>{let K=0;const Ce=_.length;let pe=x.length-1,ke=Ce-1;for(;K<=pe&&K<=ke;){const Oe=x[K],Be=_[K]=re?Hi(_[K]):di(_[K]);if(_n(Oe,Be))k(Oe,Be,U,null,le,C,E,j,re);else break;K++}for(;K<=pe&&K<=ke;){const Oe=x[pe],Be=_[ke]=re?Hi(_[ke]):di(_[ke]);if(_n(Oe,Be))k(Oe,Be,U,null,le,C,E,j,re);else break;pe--,ke--}if(K>pe){if(K<=ke){const Oe=ke+1,Be=Oe<Ce?_[Oe].el:ne;for(;K<=ke;)k(null,_[K]=re?Hi(_[K]):di(_[K]),U,Be,le,C,E,j,re),K++}}else if(K>ke)for(;K<=pe;)ze(x[K],le,C,!0),K++;else{const Oe=K,Be=K,Ye=new Map;for(K=Be;K<=ke;K++){const Ut=_[K]=re?Hi(_[K]):di(_[K]);Ut.key!=null&&Ye.set(Ut.key,K)}let Qe,bt=0;const Le=ke-Be+1;let ot=!1,jt=0;const Ts=new Array(Le);for(K=0;K<Le;K++)Ts[K]=0;for(K=Oe;K<=pe;K++){const Ut=x[K];if(bt>=Le){ze(Ut,le,C,!0);continue}let Bt;if(Ut.key!=null)Bt=Ye.get(Ut.key);else for(Qe=Be;Qe<=ke;Qe++)if(Ts[Qe-Be]===0&&_n(Ut,_[Qe])){Bt=Qe;break}Bt===void 0?ze(Ut,le,C,!0):(Ts[Bt-Be]=K+1,Bt>=jt?jt=Bt:ot=!0,k(Ut,_[Bt],U,null,le,C,E,j,re),bt++)}const si=ot?mk(Ts):ir;for(Qe=si.length-1,K=Le-1;K>=0;K--){const Ut=Be+K,Bt=_[Ut],It=_[Ut+1],pn=Ut+1<Ce?It.el||It.placeholder:ne;Ts[K]===0?k(null,Bt,U,pn,le,C,E,j,re):ot&&(Qe<0||K!==si[Qe]?be(Bt,U,pn,2):Qe--)}}},be=(x,_,U,ne,le=null)=>{const{el:C,type:E,transition:j,children:re,shapeFlag:K}=x;if(K&6){be(x.component.subTree,_,U,ne);return}if(K&128){x.suspense.move(_,U,ne);return}if(K&64){E.move(x,_,U,J);return}if(E===ye){i(C,_,U);for(let pe=0;pe<re.length;pe++)be(re[pe],_,U,ne);i(x.anchor,_,U);return}if(E===Kl){I(x,_,U);return}if(ne!==2&&K&1&&j)if(ne===0)j.beforeEnter(C),i(C,_,U),cs(()=>j.enter(C),le);else{const{leave:pe,delayLeave:ke,afterLeave:Oe}=j,Be=()=>{x.ctx.isUnmounted?n(C):i(C,_,U)},Ye=()=>{C._isLeaving&&C[Ai](!0),pe(C,()=>{Be(),Oe&&Oe()})};ke?ke(C,Be,Ye):Ye()}else i(C,_,U)},ze=(x,_,U,ne=!1,le=!1)=>{const{type:C,props:E,ref:j,children:re,dynamicChildren:K,shapeFlag:Ce,patchFlag:pe,dirs:ke,cacheIndex:Oe}=x;if(pe===-2&&(le=!1),j!=null&&(Pi(),oo(j,null,U,x,!0),ji()),Oe!=null&&(_.renderCache[Oe]=void 0),Ce&256){_.ctx.deactivate(x);return}const Be=Ce&1&&ke,Ye=!lr(x);let Qe;if(Ye&&(Qe=E&&E.onVnodeBeforeUnmount)&&ri(Qe,_,x),Ce&6)ht(x.component,U,ne);else{if(Ce&128){x.suspense.unmount(U,ne);return}Be&&vn(x,null,_,"beforeUnmount"),Ce&64?x.type.remove(x,_,U,J,ne):K&&!K.hasOnce&&(C!==ye||pe>0&&pe&64)?rt(K,_,U,!1,!0):(C===ye&&pe&384||!le&&Ce&16)&&rt(re,_,U),ne&&Ue(x)}(Ye&&(Qe=E&&E.onVnodeUnmounted)||Be)&&cs(()=>{Qe&&ri(Qe,_,x),Be&&vn(x,null,_,"unmounted")},U)},Ue=x=>{const{type:_,el:U,anchor:ne,transition:le}=x;if(_===ye){Je(U,ne);return}if(_===Kl){H(x);return}const C=()=>{n(U),le&&!le.persisted&&le.afterLeave&&le.afterLeave()};if(x.shapeFlag&1&&le&&!le.persisted){const{leave:E,delayLeave:j}=le,re=()=>E(U,C);j?j(x.el,C,re):re()}else C()},Je=(x,_)=>{let U;for(;x!==_;)U=f(x),n(x),x=U;n(_)},ht=(x,_,U)=>{const{bum:ne,scope:le,job:C,subTree:E,um:j,m:re,a:K}=x;fh(re),fh(K),ne&&Hl(ne),le.stop(),C&&(C.flags|=8,ze(E,x,_,U)),j&&cs(j,_),cs(()=>{x.isUnmounted=!0},_)},rt=(x,_,U,ne=!1,le=!1,C=0)=>{for(let E=C;E<x.length;E++)ze(x[E],_,U,ne,le)},te=x=>{if(x.shapeFlag&6)return te(x.component.subTree);if(x.shapeFlag&128)return x.suspense.next();const _=f(x.anchor||x.el),U=_&&_[vg];return U?f(U):_};let ve=!1;const Q=(x,_,U)=>{x==null?_._vnode&&ze(_._vnode,null,null,!0):k(_._vnode||null,x,_,null,null,null,U),_._vnode=x,ve||(ve=!0,eh(),pg(),ve=!1)},J={p:k,um:ze,m:be,r:Ue,mt:ee,mc:O,pc:ce,pbc:oe,n:te,o:s};return{render:Q,hydrate:void 0,createApp:rk(Q)}}function Cc({type:s,props:e},t){return t==="svg"&&s==="foreignObject"||t==="mathml"&&s==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function yn({effect:s,job:e},t){t?(s.flags|=32,e.flags|=4):(s.flags&=-33,e.flags&=-5)}function pk(s,e){return(!s||s&&!s.pendingBranch)&&e&&!e.persisted}function Ld(s,e,t=!1){const i=s.children,n=e.children;if(Ie(i)&&Ie(n))for(let r=0;r<i.length;r++){const o=i[r];let l=n[r];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=n[r]=Hi(n[r]),l.el=o.el),!t&&l.patchFlag!==-2&&Ld(o,l)),l.type===Ka&&l.patchFlag!==-1&&(l.el=o.el),l.type===Zt&&!l.el&&(l.el=o.el)}}function mk(s){const e=s.slice(),t=[0];let i,n,r,o,l;const a=s.length;for(i=0;i<a;i++){const u=s[i];if(u!==0){if(n=t[t.length-1],s[n]<u){e[i]=n,t.push(i);continue}for(r=0,o=t.length-1;r<o;)l=r+o>>1,s[t[l]]<u?r=l+1:o=l;u<s[t[r]]&&(r>0&&(e[i]=t[r-1]),t[r]=i)}}for(r=t.length,o=t[r-1];r-- >0;)t[r]=o,o=e[o];return t}function Kg(s){const e=s.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Kg(e)}function fh(s){if(s)for(let e=0;e<s.length;e++)s[e].flags|=8}const gk=Symbol.for("v-scx"),vk=()=>Bs(gk);function Re(s,e,t){return qg(s,e,t)}function qg(s,e,t=yt){const{immediate:i,deep:n,flush:r,once:o}=t,l=zt({},t),a=e&&i||!e&&r!=="post";let u;if(Mo){if(r==="sync"){const p=vk();u=p.__watcherHandles||(p.__watcherHandles=[])}else if(!a){const p=()=>{};return p.stop=vi,p.resume=vi,p.pause=vi,p}}const c=es;l.call=(p,v,k)=>Js(p,c,v,k);let d=!1;r==="post"?l.scheduler=p=>{cs(p,c&&c.suspense)}:r!=="sync"&&(d=!0,l.scheduler=(p,v)=>{v?p():jd(p)}),l.augmentJob=p=>{e&&(p.flags|=4),d&&(p.flags|=2,c&&(p.id=c.uid,p.i=c))};const f=O1(s,e,l);return Mo&&(u?u.push(f):a&&f()),f}function yk(s,e,t){const i=this.proxy,n=At(s)?s.includes(".")?Gg(i,s):()=>i[s]:s.bind(i,i);let r;qe(e)?r=e:(r=e.handler,t=e);const o=Yo(this),l=qg(n,r.bind(i),t);return o(),l}function Gg(s,e){const t=e.split(".");return()=>{let i=s;for(let n=0;n<t.length&&i;n++)i=i[t[n]];return i}}const bk=(s,e)=>e==="modelValue"||e==="model-value"?s.modelModifiers:s[`${e}Modifiers`]||s[`${zs(e)}Modifiers`]||s[`${zn(e)}Modifiers`];function kk(s,e,...t){if(s.isUnmounted)return;const i=s.vnode.props||yt;let n=t;const r=e.startsWith("update:"),o=r&&bk(i,e.slice(7));o&&(o.trim&&(n=t.map(c=>At(c)?c.trim():c)),o.number&&(n=t.map(na)));let l,a=i[l=vc(e)]||i[l=vc(zs(e))];!a&&r&&(a=i[l=vc(zn(e))]),a&&Js(a,s,6,n);const u=i[l+"Once"];if(u){if(!s.emitted)s.emitted={};else if(s.emitted[l])return;s.emitted[l]=!0,Js(u,s,6,n)}}const xk=new WeakMap;function Jg(s,e,t=!1){const i=t?xk:e.emitsCache,n=i.get(s);if(n!==void 0)return n;const r=s.emits;let o={},l=!1;if(!qe(s)){const a=u=>{const c=Jg(u,e,!0);c&&(l=!0,zt(o,c))};!t&&e.mixins.length&&e.mixins.forEach(a),s.extends&&a(s.extends),s.mixins&&s.mixins.forEach(a)}return!r&&!l?(mt(s)&&i.set(s,null),null):(Ie(r)?r.forEach(a=>o[a]=null):zt(o,r),mt(s)&&i.set(s,o),o)}function Wa(s,e){return!s||!Va(e)?!1:(e=e.slice(2).replace(/Once$/,""),ct(s,e[0].toLowerCase()+e.slice(1))||ct(s,zn(e))||ct(s,e))}function hh(s){const{type:e,vnode:t,proxy:i,withProxy:n,propsOptions:[r],slots:o,attrs:l,emit:a,render:u,renderCache:c,props:d,data:f,setupState:p,ctx:v,inheritAttrs:k}=s,m=aa(s);let w,L;try{if(t.shapeFlag&4){const H=n||i,N=H;w=di(u.call(N,H,c,d,p,f,v)),L=l}else{const H=e;w=di(H.length>1?H(d,{attrs:l,slots:o,emit:a}):H(d,null)),L=e.props?l:wk(l)}}catch(H){co.length=0,za(H,s,1),w=A(Zt)}let I=w;if(L&&k!==!1){const H=Object.keys(L),{shapeFlag:N}=I;H.length&&N&7&&(r&&H.some(wd)&&(L=Sk(L,r)),I=rn(I,L,!1,!0))}return t.dirs&&(I=rn(I,null,!1,!0),I.dirs=I.dirs?I.dirs.concat(t.dirs):t.dirs),t.transition&&Co(I,t.transition),w=I,aa(m),w}const wk=s=>{let e;for(const t in s)(t==="class"||t==="style"||Va(t))&&((e||(e={}))[t]=s[t]);return e},Sk=(s,e)=>{const t={};for(const i in s)(!wd(i)||!(i.slice(9)in e))&&(t[i]=s[i]);return t};function Ck(s,e,t){const{props:i,children:n,component:r}=s,{props:o,children:l,patchFlag:a}=e,u=r.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&a>=0){if(a&1024)return!0;if(a&16)return i?ph(i,o,u):!!o;if(a&8){const c=e.dynamicProps;for(let d=0;d<c.length;d++){const f=c[d];if(o[f]!==i[f]&&!Wa(u,f))return!0}}}else return(n||l)&&(!l||!l.$stable)?!0:i===o?!1:i?o?ph(i,o,u):!0:!!o;return!1}function ph(s,e,t){const i=Object.keys(e);if(i.length!==Object.keys(s).length)return!0;for(let n=0;n<i.length;n++){const r=i[n];if(e[r]!==s[r]&&!Wa(t,r))return!0}return!1}function _k({vnode:s,parent:e},t){for(;e;){const i=e.subTree;if(i.suspense&&i.suspense.activeBranch===s&&(i.el=s.el),i===s)(s=e.vnode).el=t,e=e.parent;else break}}const Yg=s=>s.__isSuspense;function Ak(s,e){e&&e.pendingBranch?Ie(s)?e.effects.push(...s):e.effects.push(s):$1(s)}const ye=Symbol.for("v-fgt"),Ka=Symbol.for("v-txt"),Zt=Symbol.for("v-cmt"),Kl=Symbol.for("v-stc"),co=[];let Ds=null;function g(s=!1){co.push(Ds=s?null:[])}function Mk(){co.pop(),Ds=co[co.length-1]||null}let _o=1;function fa(s,e=!1){_o+=s,s<0&&Ds&&e&&(Ds.hasOnce=!0)}function Qg(s){return s.dynamicChildren=_o>0?Ds||ir:null,Mk(),_o>0&&Ds&&Ds.push(s),s}function b(s,e,t,i,n,r){return Qg(h(s,e,t,i,n,r,!0))}function _e(s,e,t,i,n){return Qg(A(s,e,t,i,n,!0))}function Ao(s){return s?s.__v_isVNode===!0:!1}function _n(s,e){return s.type===e.type&&s.key===e.key}const Xg=({key:s})=>s??null,ql=({ref:s,ref_key:e,ref_for:t})=>(typeof s=="number"&&(s=""+s),s!=null?At(s)||ss(s)||qe(s)?{i:Gt,r:s,k:e,f:!!t}:s:null);function h(s,e=null,t=null,i=0,n=null,r=s===ye?0:1,o=!1,l=!1){const a={__v_isVNode:!0,__v_skip:!0,type:s,props:e,key:e&&Xg(e),ref:e&&ql(e),scopeId:gg,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:i,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:Gt};return l?(Vd(a,t),r&128&&s.normalize(a)):t&&(a.shapeFlag|=At(t)?8:16),_o>0&&!o&&Ds&&(a.patchFlag>0||r&6)&&a.patchFlag!==32&&Ds.push(a),a}const A=Dk;function Dk(s,e=null,t=null,i=0,n=null,r=!1){if((!s||s===Pg)&&(s=Zt),Ao(s)){const l=rn(s,e,!0);return t&&Vd(l,t),_o>0&&!r&&Ds&&(l.shapeFlag&6?Ds[Ds.indexOf(s)]=l:Ds.push(l)),l.patchFlag=-2,l}if(Bk(s)&&(s=s.__vccOpts),e){e=Ek(e);let{class:l,style:a}=e;l&&!At(l)&&(e.class=xe(l)),mt(a)&&(Pd(a)&&!Ie(a)&&(a=zt({},a)),e.style=ko(a))}const o=At(s)?1:Yg(s)?128:yg(s)?64:mt(s)?4:qe(s)?2:0;return h(s,e,t,i,n,o,r,!0)}function Ek(s){return s?Pd(s)||Ng(s)?zt({},s):s:null}function rn(s,e,t=!1,i=!1){const{props:n,ref:r,patchFlag:o,children:l,transition:a}=s,u=e?Tk(n||{},e):n,c={__v_isVNode:!0,__v_skip:!0,type:s.type,props:u,key:u&&Xg(u),ref:e&&e.ref?t&&r?Ie(r)?r.concat(ql(e)):[r,ql(e)]:ql(e):r,scopeId:s.scopeId,slotScopeIds:s.slotScopeIds,children:l,target:s.target,targetStart:s.targetStart,targetAnchor:s.targetAnchor,staticCount:s.staticCount,shapeFlag:s.shapeFlag,patchFlag:e&&s.type!==ye?o===-1?16:o|16:o,dynamicProps:s.dynamicProps,dynamicChildren:s.dynamicChildren,appContext:s.appContext,dirs:s.dirs,transition:a,component:s.component,suspense:s.suspense,ssContent:s.ssContent&&rn(s.ssContent),ssFallback:s.ssFallback&&rn(s.ssFallback),placeholder:s.placeholder,el:s.el,anchor:s.anchor,ctx:s.ctx,ce:s.ce};return a&&i&&Co(c,a.clone(c)),c}function de(s=" ",e=0){return A(Ka,null,s,e)}function qa(s,e){const t=A(Kl,null,s);return t.staticCount=e,t}function G(s="",e=!1){return e?(g(),_e(Zt,null,s)):A(Zt,null,s)}function di(s){return s==null||typeof s=="boolean"?A(Zt):Ie(s)?A(ye,null,s.slice()):Ao(s)?Hi(s):A(Ka,null,String(s))}function Hi(s){return s.el===null&&s.patchFlag!==-1||s.memo?s:rn(s)}function Vd(s,e){let t=0;const{shapeFlag:i}=s;if(e==null)e=null;else if(Ie(e))t=16;else if(typeof e=="object")if(i&65){const n=e.default;n&&(n._c&&(n._d=!1),Vd(s,n()),n._c&&(n._d=!0));return}else{t=32;const n=e._;!n&&!Ng(e)?e._ctx=Gt:n===3&&Gt&&(Gt.slots._===1?e._=1:(e._=2,s.patchFlag|=1024))}else qe(e)?(e={default:e,_ctx:Gt},t=32):(e=String(e),i&64?(t=16,e=[de(e)]):t=8);s.children=e,s.shapeFlag|=t}function Tk(...s){const e={};for(let t=0;t<s.length;t++){const i=s[t];for(const n in i)if(n==="class")e.class!==i.class&&(e.class=xe([e.class,i.class]));else if(n==="style")e.style=ko([e.style,i.style]);else if(Va(n)){const r=e[n],o=i[n];o&&r!==o&&!(Ie(r)&&r.includes(o))&&(e[n]=r?[].concat(r,o):o)}else n!==""&&(e[n]=i[n])}return e}function ri(s,e,t,i=null){Js(s,e,7,[t,i])}const Ok=Vg();let Pk=0;function jk(s,e,t){const i=s.type,n=(e?e.appContext:s.appContext)||Ok,r={uid:Pk++,vnode:s,type:i,parent:e,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new n1(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(n.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:zg(i,n),emitsOptions:Jg(i,n),emit:null,emitted:null,propsDefaults:yt,inheritAttrs:i.inheritAttrs,ctx:yt,data:yt,props:yt,attrs:yt,slots:yt,refs:yt,setupState:yt,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=kk.bind(null,r),s.ce&&s.ce(r),r}let es=null;const Bd=()=>es||Gt;let ha,vu;{const s=Na(),e=(t,i)=>{let n;return(n=s[t])||(n=s[t]=[]),n.push(i),r=>{n.length>1?n.forEach(o=>o(r)):n[0](r)}};ha=e("__VUE_INSTANCE_SETTERS__",t=>es=t),vu=e("__VUE_SSR_SETTERS__",t=>Mo=t)}const Yo=s=>{const e=es;return ha(s),s.scope.on(),()=>{s.scope.off(),ha(e)}},mh=()=>{es&&es.scope.off(),ha(null)};function Zg(s){return s.vnode.shapeFlag&4}let Mo=!1;function $k(s,e=!1,t=!1){e&&vu(e);const{props:i,children:n}=s.vnode,r=Zg(s);ok(s,i,r,e),uk(s,n,t||e);const o=r?Rk(s,e):void 0;return e&&vu(!1),o}function Rk(s,e){const t=s.type;s.accessCache=Object.create(null),s.proxy=new Proxy(s.ctx,Y1);const{setup:i}=t;if(i){Pi();const n=s.setupContext=i.length>1?t0(s):null,r=Yo(s),o=Jo(i,s,0,[s.props,n]),l=zm(o);if(ji(),r(),(l||s.sp)&&!lr(s)&&Dg(s),l){if(o.then(mh,mh),e)return o.then(a=>{gh(s,a)}).catch(a=>{za(a,s,0)});s.asyncDep=o}else gh(s,o)}else e0(s)}function gh(s,e,t){qe(e)?s.type.__ssrInlineRender?s.ssrRender=e:s.render=e:mt(e)&&(s.setupState=dg(e)),e0(s)}function e0(s,e,t){const i=s.type;s.render||(s.render=i.render||vi);{const n=Yo(s);Pi();try{Z1(s)}finally{ji(),n()}}}const Lk={get(s,e){return Xt(s,"get",""),s[e]}};function t0(s){const e=t=>{s.exposed=t||{}};return{attrs:new Proxy(s.attrs,Lk),slots:s.slots,emit:s.emit,expose:e}}function Ga(s){return s.exposed?s.exposeProxy||(s.exposeProxy=new Proxy(dg(C1(s.exposed)),{get(e,t){if(t in e)return e[t];if(t in lo)return lo[t](s)},has(e,t){return t in e||t in lo}})):s.proxy}function Vk(s,e=!0){return qe(s)?s.displayName||s.name:s.name||e&&s.__name}function Bk(s){return qe(s)&&"__vccOpts"in s}const z=(s,e)=>E1(s,e,Mo);function Tt(s,e,t){try{fa(-1);const i=arguments.length;return i===2?mt(e)&&!Ie(e)?Ao(e)?A(s,null,[e]):A(s,e):A(s,null,e):(i>3?t=Array.prototype.slice.call(arguments,2):i===3&&Ao(t)&&(t=[t]),A(s,e,t))}finally{fa(1)}}const Ik="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let yu;const vh=typeof window<"u"&&window.trustedTypes;if(vh)try{yu=vh.createPolicy("vue",{createHTML:s=>s})}catch{}const s0=yu?s=>yu.createHTML(s):s=>s,Nk="http://www.w3.org/2000/svg",Fk="http://www.w3.org/1998/Math/MathML",_i=typeof document<"u"?document:null,yh=_i&&_i.createElement("template"),zk={insert:(s,e,t)=>{e.insertBefore(s,t||null)},remove:s=>{const e=s.parentNode;e&&e.removeChild(s)},createElement:(s,e,t,i)=>{const n=e==="svg"?_i.createElementNS(Nk,s):e==="mathml"?_i.createElementNS(Fk,s):t?_i.createElement(s,{is:t}):_i.createElement(s);return s==="select"&&i&&i.multiple!=null&&n.setAttribute("multiple",i.multiple),n},createText:s=>_i.createTextNode(s),createComment:s=>_i.createComment(s),setText:(s,e)=>{s.nodeValue=e},setElementText:(s,e)=>{s.textContent=e},parentNode:s=>s.parentNode,nextSibling:s=>s.nextSibling,querySelector:s=>_i.querySelector(s),setScopeId(s,e){s.setAttribute(e,"")},insertStaticContent(s,e,t,i,n,r){const o=t?t.previousSibling:e.lastChild;if(n&&(n===r||n.nextSibling))for(;e.insertBefore(n.cloneNode(!0),t),!(n===r||!(n=n.nextSibling)););else{yh.innerHTML=s0(i==="svg"?`<svg>${s}</svg>`:i==="mathml"?`<math>${s}</math>`:s);const l=yh.content;if(i==="svg"||i==="mathml"){const a=l.firstChild;for(;a.firstChild;)l.appendChild(a.firstChild);l.removeChild(a)}e.insertBefore(l,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},Fi="transition",zr="animation",Do=Symbol("_vtc"),i0={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Uk=zt({},wg,i0),Hk=s=>(s.displayName="Transition",s.props=Uk,s),Id=Hk((s,{slots:e})=>Tt(B1,Wk(s),e)),bn=(s,e=[])=>{Ie(s)?s.forEach(t=>t(...e)):s&&s(...e)},bh=s=>s?Ie(s)?s.some(e=>e.length>1):s.length>1:!1;function Wk(s){const e={};for(const B in s)B in i0||(e[B]=s[B]);if(s.css===!1)return e;const{name:t="v",type:i,duration:n,enterFromClass:r=`${t}-enter-from`,enterActiveClass:o=`${t}-enter-active`,enterToClass:l=`${t}-enter-to`,appearFromClass:a=r,appearActiveClass:u=o,appearToClass:c=l,leaveFromClass:d=`${t}-leave-from`,leaveActiveClass:f=`${t}-leave-active`,leaveToClass:p=`${t}-leave-to`}=s,v=Kk(n),k=v&&v[0],m=v&&v[1],{onBeforeEnter:w,onEnter:L,onEnterCancelled:I,onLeave:H,onLeaveCancelled:N,onBeforeAppear:P=w,onAppear:S=L,onAppearCancelled:O=I}=e,W=(B,ae,ee,$)=>{B._enterCancelled=$,kn(B,ae?c:l),kn(B,ae?u:o),ee&&ee()},oe=(B,ae)=>{B._isLeaving=!1,kn(B,d),kn(B,p),kn(B,f),ae&&ae()},se=B=>(ae,ee)=>{const $=B?S:L,q=()=>W(ae,B,ee);bn($,[ae,q]),kh(()=>{kn(ae,B?a:r),wi(ae,B?c:l),bh($)||xh(ae,i,k,q)})};return zt(e,{onBeforeEnter(B){bn(w,[B]),wi(B,r),wi(B,o)},onBeforeAppear(B){bn(P,[B]),wi(B,a),wi(B,u)},onEnter:se(!1),onAppear:se(!0),onLeave(B,ae){B._isLeaving=!0;const ee=()=>oe(B,ae);wi(B,d),B._enterCancelled?(wi(B,f),Ch(B)):(Ch(B),wi(B,f)),kh(()=>{B._isLeaving&&(kn(B,d),wi(B,p),bh(H)||xh(B,i,m,ee))}),bn(H,[B,ee])},onEnterCancelled(B){W(B,!1,void 0,!0),bn(I,[B])},onAppearCancelled(B){W(B,!0,void 0,!0),bn(O,[B])},onLeaveCancelled(B){oe(B),bn(N,[B])}})}function Kk(s){if(s==null)return null;if(mt(s))return[_c(s.enter),_c(s.leave)];{const e=_c(s);return[e,e]}}function _c(s){return Yb(s)}function wi(s,e){e.split(/\s+/).forEach(t=>t&&s.classList.add(t)),(s[Do]||(s[Do]=new Set)).add(e)}function kn(s,e){e.split(/\s+/).forEach(i=>i&&s.classList.remove(i));const t=s[Do];t&&(t.delete(e),t.size||(s[Do]=void 0))}function kh(s){requestAnimationFrame(()=>{requestAnimationFrame(s)})}let qk=0;function xh(s,e,t,i){const n=s._endId=++qk,r=()=>{n===s._endId&&i()};if(t!=null)return setTimeout(r,t);const{type:o,timeout:l,propCount:a}=Gk(s,e);if(!o)return i();const u=o+"end";let c=0;const d=()=>{s.removeEventListener(u,f),r()},f=p=>{p.target===s&&++c>=a&&d()};setTimeout(()=>{c<a&&d()},l+1),s.addEventListener(u,f)}function Gk(s,e){const t=window.getComputedStyle(s),i=v=>(t[v]||"").split(", "),n=i(`${Fi}Delay`),r=i(`${Fi}Duration`),o=wh(n,r),l=i(`${zr}Delay`),a=i(`${zr}Duration`),u=wh(l,a);let c=null,d=0,f=0;e===Fi?o>0&&(c=Fi,d=o,f=r.length):e===zr?u>0&&(c=zr,d=u,f=a.length):(d=Math.max(o,u),c=d>0?o>u?Fi:zr:null,f=c?c===Fi?r.length:a.length:0);const p=c===Fi&&/\b(?:transform|all)(?:,|$)/.test(i(`${Fi}Property`).toString());return{type:c,timeout:d,propCount:f,hasTransform:p}}function wh(s,e){for(;s.length<e.length;)s=s.concat(s);return Math.max(...e.map((t,i)=>Sh(t)+Sh(s[i])))}function Sh(s){return s==="auto"?0:Number(s.slice(0,-1).replace(",","."))*1e3}function Ch(s){return(s?s.ownerDocument:document).body.offsetHeight}function Jk(s,e,t){const i=s[Do];i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?s.removeAttribute("class"):t?s.setAttribute("class",e):s.className=e}const pa=Symbol("_vod"),n0=Symbol("_vsh"),ut={name:"show",beforeMount(s,{value:e},{transition:t}){s[pa]=s.style.display==="none"?"":s.style.display,t&&e?t.beforeEnter(s):Ur(s,e)},mounted(s,{value:e},{transition:t}){t&&e&&t.enter(s)},updated(s,{value:e,oldValue:t},{transition:i}){!e!=!t&&(i?e?(i.beforeEnter(s),Ur(s,!0),i.enter(s)):i.leave(s,()=>{Ur(s,!1)}):Ur(s,e))},beforeUnmount(s,{value:e}){Ur(s,e)}};function Ur(s,e){s.style.display=e?s[pa]:"none",s[n0]=!e}const Yk=Symbol(""),Qk=/(?:^|;)\s*display\s*:/;function Xk(s,e,t){const i=s.style,n=At(t);let r=!1;if(t&&!n){if(e)if(At(e))for(const o of e.split(";")){const l=o.slice(0,o.indexOf(":")).trim();t[l]==null&&Gl(i,l,"")}else for(const o in e)t[o]==null&&Gl(i,o,"");for(const o in t)o==="display"&&(r=!0),Gl(i,o,t[o])}else if(n){if(e!==t){const o=i[Yk];o&&(t+=";"+o),i.cssText=t,r=Qk.test(t)}}else e&&s.removeAttribute("style");pa in s&&(s[pa]=r?i.display:"",s[n0]&&(i.display="none"))}const _h=/\s*!important$/;function Gl(s,e,t){if(Ie(t))t.forEach(i=>Gl(s,e,i));else if(t==null&&(t=""),e.startsWith("--"))s.setProperty(e,t);else{const i=Zk(s,e);_h.test(t)?s.setProperty(zn(i),t.replace(_h,""),"important"):s[i]=t}}const Ah=["Webkit","Moz","ms"],Ac={};function Zk(s,e){const t=Ac[e];if(t)return t;let i=zs(e);if(i!=="filter"&&i in s)return Ac[e]=i;i=Ia(i);for(let n=0;n<Ah.length;n++){const r=Ah[n]+i;if(r in s)return Ac[e]=r}return e}const Mh="http://www.w3.org/1999/xlink";function Dh(s,e,t,i,n,r=s1(e)){i&&e.startsWith("xlink:")?t==null?s.removeAttributeNS(Mh,e.slice(6,e.length)):s.setAttributeNS(Mh,e,t):t==null||r&&!Km(t)?s.removeAttribute(e):s.setAttribute(e,r?"":Gs(t)?String(t):t)}function Eh(s,e,t,i,n){if(e==="innerHTML"||e==="textContent"){t!=null&&(s[e]=e==="innerHTML"?s0(t):t);return}const r=s.tagName;if(e==="value"&&r!=="PROGRESS"&&!r.includes("-")){const l=r==="OPTION"?s.getAttribute("value")||"":s.value,a=t==null?s.type==="checkbox"?"on":"":String(t);(l!==a||!("_value"in s))&&(s.value=a),t==null&&s.removeAttribute(e),s._value=t;return}let o=!1;if(t===""||t==null){const l=typeof s[e];l==="boolean"?t=Km(t):t==null&&l==="string"?(t="",o=!0):l==="number"&&(t=0,o=!0)}try{s[e]=t}catch{}o&&s.removeAttribute(n||e)}function Ei(s,e,t,i){s.addEventListener(e,t,i)}function ex(s,e,t,i){s.removeEventListener(e,t,i)}const Th=Symbol("_vei");function tx(s,e,t,i,n=null){const r=s[Th]||(s[Th]={}),o=r[e];if(i&&o)o.value=i;else{const[l,a]=sx(e);if(i){const u=r[e]=rx(i,n);Ei(s,l,u,a)}else o&&(ex(s,l,o,a),r[e]=void 0)}}const Oh=/(?:Once|Passive|Capture)$/;function sx(s){let e;if(Oh.test(s)){e={};let i;for(;i=s.match(Oh);)s=s.slice(0,s.length-i[0].length),e[i[0].toLowerCase()]=!0}return[s[2]===":"?s.slice(3):zn(s.slice(2)),e]}let Mc=0;const ix=Promise.resolve(),nx=()=>Mc||(ix.then(()=>Mc=0),Mc=Date.now());function rx(s,e){const t=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=t.attached)return;Js(ox(i,t.value),e,5,[i])};return t.value=s,t.attached=nx(),t}function ox(s,e){if(Ie(e)){const t=s.stopImmediatePropagation;return s.stopImmediatePropagation=()=>{t.call(s),s._stopped=!0},e.map(i=>n=>!n._stopped&&i&&i(n))}else return e}const Ph=s=>s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&s.charCodeAt(2)>96&&s.charCodeAt(2)<123,lx=(s,e,t,i,n,r)=>{const o=n==="svg";e==="class"?Jk(s,i,o):e==="style"?Xk(s,t,i):Va(e)?wd(e)||tx(s,e,t,i,r):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):ax(s,e,i,o))?(Eh(s,e,i),!s.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Dh(s,e,i,o,r,e!=="value")):s._isVueCE&&(/[A-Z]/.test(e)||!At(i))?Eh(s,zs(e),i,r,e):(e==="true-value"?s._trueValue=i:e==="false-value"&&(s._falseValue=i),Dh(s,e,i,o))};function ax(s,e,t,i){if(i)return!!(e==="innerHTML"||e==="textContent"||e in s&&Ph(e)&&qe(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&s.tagName==="INPUT"||e==="type"&&s.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const n=s.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return Ph(e)&&At(t)?!1:e in s}const on=s=>{const e=s.props["onUpdate:modelValue"]||!1;return Ie(e)?t=>Hl(e,t):e};function cx(s){s.target.composing=!0}function jh(s){const e=s.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Is=Symbol("_assign"),mr={created(s,{modifiers:{lazy:e,trim:t,number:i}},n){s[Is]=on(n);const r=i||n.props&&n.props.type==="number";Ei(s,e?"change":"input",o=>{if(o.target.composing)return;let l=s.value;t&&(l=l.trim()),r&&(l=na(l)),s[Is](l)}),t&&Ei(s,"change",()=>{s.value=s.value.trim()}),e||(Ei(s,"compositionstart",cx),Ei(s,"compositionend",jh),Ei(s,"change",jh))},mounted(s,{value:e}){s.value=e??""},beforeUpdate(s,{value:e,oldValue:t,modifiers:{lazy:i,trim:n,number:r}},o){if(s[Is]=on(o),s.composing)return;const l=(r||s.type==="number")&&!/^0\d/.test(s.value)?na(s.value):s.value,a=e??"";l!==a&&(document.activeElement===s&&s.type!=="range"&&(i&&e===t||n&&s.value.trim()===a)||(s.value=a))}},ux={deep:!0,created(s,e,t){s[Is]=on(t),Ei(s,"change",()=>{const i=s._modelValue,n=gr(s),r=s.checked,o=s[Is];if(Ie(i)){const l=_d(i,n),a=l!==-1;if(r&&!a)o(i.concat(n));else if(!r&&a){const u=[...i];u.splice(l,1),o(u)}}else if(Mr(i)){const l=new Set(i);r?l.add(n):l.delete(n),o(l)}else o(o0(s,r))})},mounted:$h,beforeUpdate(s,e,t){s[Is]=on(t),$h(s,e,t)}};function $h(s,{value:e,oldValue:t},i){s._modelValue=e;let n;if(Ie(e))n=_d(e,i.props.value)>-1;else if(Mr(e))n=e.has(i.props.value);else{if(e===t)return;n=Rn(e,o0(s,!0))}s.checked!==n&&(s.checked=n)}const bu={created(s,{value:e},t){s.checked=Rn(e,t.props.value),s[Is]=on(t),Ei(s,"change",()=>{s[Is](gr(s))})},beforeUpdate(s,{value:e,oldValue:t},i){s[Is]=on(i),e!==t&&(s.checked=Rn(e,i.props.value))}},r0={deep:!0,created(s,{value:e,modifiers:{number:t}},i){const n=Mr(e);Ei(s,"change",()=>{const r=Array.prototype.filter.call(s.options,o=>o.selected).map(o=>t?na(gr(o)):gr(o));s[Is](s.multiple?n?new Set(r):r:r[0]),s._assigning=!0,qs(()=>{s._assigning=!1})}),s[Is]=on(i)},mounted(s,{value:e}){Rh(s,e)},beforeUpdate(s,e,t){s[Is]=on(t)},updated(s,{value:e}){s._assigning||Rh(s,e)}};function Rh(s,e){const t=s.multiple,i=Ie(e);if(!(t&&!i&&!Mr(e))){for(let n=0,r=s.options.length;n<r;n++){const o=s.options[n],l=gr(o);if(t)if(i){const a=typeof l;a==="string"||a==="number"?o.selected=e.some(u=>String(u)===String(l)):o.selected=_d(e,l)>-1}else o.selected=e.has(l);else if(Rn(gr(o),e)){s.selectedIndex!==n&&(s.selectedIndex=n);return}}!t&&s.selectedIndex!==-1&&(s.selectedIndex=-1)}}function gr(s){return"_value"in s?s._value:s.value}function o0(s,e){const t=e?"_trueValue":"_falseValue";return t in s?s[t]:e}const dx={created(s,e,t){bl(s,e,t,null,"created")},mounted(s,e,t){bl(s,e,t,null,"mounted")},beforeUpdate(s,e,t,i){bl(s,e,t,i,"beforeUpdate")},updated(s,e,t,i){bl(s,e,t,i,"updated")}};function fx(s,e){switch(s){case"SELECT":return r0;case"TEXTAREA":return mr;default:switch(e){case"checkbox":return ux;case"radio":return bu;default:return mr}}}function bl(s,e,t,i,n){const o=fx(s.tagName,t.props&&t.props.type)[n];o&&o(s,e,t,i)}const hx=["ctrl","shift","alt","meta"],px={stop:s=>s.stopPropagation(),prevent:s=>s.preventDefault(),self:s=>s.target!==s.currentTarget,ctrl:s=>!s.ctrlKey,shift:s=>!s.shiftKey,alt:s=>!s.altKey,meta:s=>!s.metaKey,left:s=>"button"in s&&s.button!==0,middle:s=>"button"in s&&s.button!==1,right:s=>"button"in s&&s.button!==2,exact:(s,e)=>hx.some(t=>s[`${t}Key`]&&!e.includes(t))},Nt=(s,e)=>{const t=s._withMods||(s._withMods={}),i=e.join(".");return t[i]||(t[i]=((n,...r)=>{for(let o=0;o<e.length;o++){const l=px[e[o]];if(l&&l(n,e))return}return s(n,...r)}))},mx=zt({patchProp:lx},zk);let Lh;function gx(){return Lh||(Lh=fk(mx))}const vx=((...s)=>{const e=gx().createApp(...s),{mount:t}=e;return e.mount=i=>{const n=bx(i);if(!n)return;const r=e._component;!qe(r)&&!r.render&&!r.template&&(r.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const o=t(n,!1,yx(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),o},e});function yx(s){if(s instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&s instanceof MathMLElement)return"mathml"}function bx(s){return At(s)?document.querySelector(s):s}const kx="/framework-logo.png";/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const Yn=typeof document<"u";function l0(s){return typeof s=="object"||"displayName"in s||"props"in s||"__vccOpts"in s}function xx(s){return s.__esModule||s[Symbol.toStringTag]==="Module"||s.default&&l0(s.default)}const at=Object.assign;function Dc(s,e){const t={};for(const i in e){const n=e[i];t[i]=Ys(n)?n.map(s):s(n)}return t}const uo=()=>{},Ys=Array.isArray;function Vh(s,e){const t={};for(const i in s)t[i]=i in e?e[i]:s[i];return t}const a0=/#/g,wx=/&/g,Sx=/\//g,Cx=/=/g,_x=/\?/g,c0=/\+/g,Ax=/%5B/g,Mx=/%5D/g,u0=/%5E/g,Dx=/%60/g,d0=/%7B/g,Ex=/%7C/g,f0=/%7D/g,Tx=/%20/g;function Nd(s){return s==null?"":encodeURI(""+s).replace(Ex,"|").replace(Ax,"[").replace(Mx,"]")}function Ox(s){return Nd(s).replace(d0,"{").replace(f0,"}").replace(u0,"^")}function ku(s){return Nd(s).replace(c0,"%2B").replace(Tx,"+").replace(a0,"%23").replace(wx,"%26").replace(Dx,"`").replace(d0,"{").replace(f0,"}").replace(u0,"^")}function Px(s){return ku(s).replace(Cx,"%3D")}function jx(s){return Nd(s).replace(a0,"%23").replace(_x,"%3F")}function $x(s){return jx(s).replace(Sx,"%2F")}function Eo(s){if(s==null)return null;try{return decodeURIComponent(""+s)}catch{}return""+s}const Rx=/\/$/,Lx=s=>s.replace(Rx,"");function Ec(s,e,t="/"){let i,n={},r="",o="";const l=e.indexOf("#");let a=e.indexOf("?");return a=l>=0&&a>l?-1:a,a>=0&&(i=e.slice(0,a),r=e.slice(a,l>0?l:e.length),n=s(r.slice(1))),l>=0&&(i=i||e.slice(0,l),o=e.slice(l,e.length)),i=Nx(i??e,t),{fullPath:i+r+o,path:i,query:n,hash:Eo(o)}}function Vx(s,e){const t=e.query?s(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function Bh(s,e){return!e||!s.toLowerCase().startsWith(e.toLowerCase())?s:s.slice(e.length)||"/"}function Bx(s,e,t){const i=e.matched.length-1,n=t.matched.length-1;return i>-1&&i===n&&vr(e.matched[i],t.matched[n])&&h0(e.params,t.params)&&s(e.query)===s(t.query)&&e.hash===t.hash}function vr(s,e){return(s.aliasOf||s)===(e.aliasOf||e)}function h0(s,e){if(Object.keys(s).length!==Object.keys(e).length)return!1;for(const t in s)if(!Ix(s[t],e[t]))return!1;return!0}function Ix(s,e){return Ys(s)?Ih(s,e):Ys(e)?Ih(e,s):s===e}function Ih(s,e){return Ys(e)?s.length===e.length&&s.every((t,i)=>t===e[i]):s.length===1&&s[0]===e}function Nx(s,e){if(s.startsWith("/"))return s;if(!s)return e;const t=e.split("/"),i=s.split("/"),n=i[i.length-1];(n===".."||n===".")&&i.push("");let r=t.length-1,o,l;for(o=0;o<i.length;o++)if(l=i[o],l!==".")if(l==="..")r>1&&r--;else break;return t.slice(0,r).join("/")+"/"+i.slice(o).join("/")}const zi={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let xu=(function(s){return s.pop="pop",s.push="push",s})({}),Tc=(function(s){return s.back="back",s.forward="forward",s.unknown="",s})({});function Fx(s){if(!s)if(Yn){const e=document.querySelector("base");s=e&&e.getAttribute("href")||"/",s=s.replace(/^\w+:\/\/[^\/]+/,"")}else s="/";return s[0]!=="/"&&s[0]!=="#"&&(s="/"+s),Lx(s)}const zx=/^[^#]+#/;function Ux(s,e){return s.replace(zx,"#")+e}function Hx(s,e){const t=document.documentElement.getBoundingClientRect(),i=s.getBoundingClientRect();return{behavior:e.behavior,left:i.left-t.left-(e.left||0),top:i.top-t.top-(e.top||0)}}const Ja=()=>({left:window.scrollX,top:window.scrollY});function Wx(s){let e;if("el"in s){const t=s.el,i=typeof t=="string"&&t.startsWith("#"),n=typeof t=="string"?i?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!n)return;e=Hx(n,s)}else e=s;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Nh(s,e){return(history.state?history.state.position-e:-1)+s}const wu=new Map;function Kx(s,e){wu.set(s,e)}function qx(s){const e=wu.get(s);return wu.delete(s),e}function Gx(s){return typeof s=="string"||s&&typeof s=="object"}function p0(s){return typeof s=="string"||typeof s=="symbol"}let Mt=(function(s){return s[s.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",s[s.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",s[s.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",s[s.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",s[s.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",s})({});const m0=Symbol("");Mt.MATCHER_NOT_FOUND+"",Mt.NAVIGATION_GUARD_REDIRECT+"",Mt.NAVIGATION_ABORTED+"",Mt.NAVIGATION_CANCELLED+"",Mt.NAVIGATION_DUPLICATED+"";function yr(s,e){return at(new Error,{type:s,[m0]:!0},e)}function Si(s,e){return s instanceof Error&&m0 in s&&(e==null||!!(s.type&e))}const Jx=["params","query","hash"];function Yx(s){if(typeof s=="string")return s;if(s.path!=null)return s.path;const e={};for(const t of Jx)t in s&&(e[t]=s[t]);return JSON.stringify(e,null,2)}function Qx(s){const e={};if(s===""||s==="?")return e;const t=(s[0]==="?"?s.slice(1):s).split("&");for(let i=0;i<t.length;++i){const n=t[i].replace(c0," "),r=n.indexOf("="),o=Eo(r<0?n:n.slice(0,r)),l=r<0?null:Eo(n.slice(r+1));if(o in e){let a=e[o];Ys(a)||(a=e[o]=[a]),a.push(l)}else e[o]=l}return e}function Fh(s){let e="";for(let t in s){const i=s[t];if(t=Px(t),i==null){i!==void 0&&(e+=(e.length?"&":"")+t);continue}(Ys(i)?i.map(n=>n&&ku(n)):[i&&ku(i)]).forEach(n=>{n!==void 0&&(e+=(e.length?"&":"")+t,n!=null&&(e+="="+n))})}return e}function Xx(s){const e={};for(const t in s){const i=s[t];i!==void 0&&(e[t]=Ys(i)?i.map(n=>n==null?null:""+n):i==null?i:""+i)}return e}const Zx=Symbol(""),zh=Symbol(""),Ya=Symbol(""),Fd=Symbol(""),Su=Symbol("");function Hr(){let s=[];function e(i){return s.push(i),()=>{const n=s.indexOf(i);n>-1&&s.splice(n,1)}}function t(){s=[]}return{add:e,list:()=>s.slice(),reset:t}}function Wi(s,e,t,i,n,r=o=>o()){const o=i&&(i.enterCallbacks[n]=i.enterCallbacks[n]||[]);return()=>new Promise((l,a)=>{const u=f=>{f===!1?a(yr(Mt.NAVIGATION_ABORTED,{from:t,to:e})):f instanceof Error?a(f):Gx(f)?a(yr(Mt.NAVIGATION_GUARD_REDIRECT,{from:e,to:f})):(o&&i.enterCallbacks[n]===o&&typeof f=="function"&&o.push(f),l())},c=r(()=>s.call(i&&i.instances[n],e,t,u));let d=Promise.resolve(c);s.length<3&&(d=d.then(u)),d.catch(f=>a(f))})}function Oc(s,e,t,i,n=r=>r()){const r=[];for(const o of s)for(const l in o.components){let a=o.components[l];if(!(e!=="beforeRouteEnter"&&!o.instances[l]))if(l0(a)){const u=(a.__vccOpts||a)[e];u&&r.push(Wi(u,t,i,o,l,n))}else{let u=a();r.push(()=>u.then(c=>{if(!c)throw new Error(`Couldn't resolve component "${l}" at "${o.path}"`);const d=xx(c)?c.default:c;o.mods[l]=c,o.components[l]=d;const f=(d.__vccOpts||d)[e];return f&&Wi(f,t,i,o,l,n)()}))}}return r}function ew(s,e){const t=[],i=[],n=[],r=Math.max(e.matched.length,s.matched.length);for(let o=0;o<r;o++){const l=e.matched[o];l&&(s.matched.find(u=>vr(u,l))?i.push(l):t.push(l));const a=s.matched[o];a&&(e.matched.find(u=>vr(u,a))||n.push(a))}return[t,i,n]}/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let tw=()=>location.protocol+"//"+location.host;function g0(s,e){const{pathname:t,search:i,hash:n}=e,r=s.indexOf("#");if(r>-1){let o=n.includes(s.slice(r))?s.slice(r).length:1,l=n.slice(o);return l[0]!=="/"&&(l="/"+l),Bh(l,"")}return Bh(t,s)+i+n}function sw(s,e,t,i){let n=[],r=[],o=null;const l=({state:f})=>{const p=g0(s,location),v=t.value,k=e.value;let m=0;if(f){if(t.value=p,e.value=f,o&&o===v){o=null;return}m=k?f.position-k.position:0}else i(p);n.forEach(w=>{w(t.value,v,{delta:m,type:xu.pop,direction:m?m>0?Tc.forward:Tc.back:Tc.unknown})})};function a(){o=t.value}function u(f){n.push(f);const p=()=>{const v=n.indexOf(f);v>-1&&n.splice(v,1)};return r.push(p),p}function c(){if(document.visibilityState==="hidden"){const{history:f}=window;if(!f.state)return;f.replaceState(at({},f.state,{scroll:Ja()}),"")}}function d(){for(const f of r)f();r=[],window.removeEventListener("popstate",l),window.removeEventListener("pagehide",c),document.removeEventListener("visibilitychange",c)}return window.addEventListener("popstate",l),window.addEventListener("pagehide",c),document.addEventListener("visibilitychange",c),{pauseListeners:a,listen:u,destroy:d}}function Uh(s,e,t,i=!1,n=!1){return{back:s,current:e,forward:t,replaced:i,position:window.history.length,scroll:n?Ja():null}}function iw(s){const{history:e,location:t}=window,i={value:g0(s,t)},n={value:e.state};n.value||r(i.value,{back:null,current:i.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function r(a,u,c){const d=s.indexOf("#"),f=d>-1?(t.host&&document.querySelector("base")?s:s.slice(d))+a:tw()+s+a;try{e[c?"replaceState":"pushState"](u,"",f),n.value=u}catch(p){console.error(p),t[c?"replace":"assign"](f)}}function o(a,u){r(a,at({},e.state,Uh(n.value.back,a,n.value.forward,!0),u,{position:n.value.position}),!0),i.value=a}function l(a,u){const c=at({},n.value,e.state,{forward:a,scroll:Ja()});r(c.current,c,!0),r(a,at({},Uh(i.value,a,null),{position:c.position+1},u),!1),i.value=a}return{location:i,state:n,push:l,replace:o}}function nw(s){s=Fx(s);const e=iw(s),t=sw(s,e.state,e.location,e.replace);function i(r,o=!0){o||t.pauseListeners(),history.go(r)}const n=at({location:"",base:s,go:i,createHref:Ux.bind(null,s)},e,t);return Object.defineProperty(n,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(n,"state",{enumerable:!0,get:()=>e.state.value}),n}function rw(s){return s=location.host?s||location.pathname+location.search:"",s.includes("#")||(s+="#"),nw(s)}let Dn=(function(s){return s[s.Static=0]="Static",s[s.Param=1]="Param",s[s.Group=2]="Group",s})({});var Rt=(function(s){return s[s.Static=0]="Static",s[s.Param=1]="Param",s[s.ParamRegExp=2]="ParamRegExp",s[s.ParamRegExpEnd=3]="ParamRegExpEnd",s[s.EscapeNext=4]="EscapeNext",s})(Rt||{});const ow={type:Dn.Static,value:""},lw=/[a-zA-Z0-9_]/;function aw(s){if(!s)return[[]];if(s==="/")return[[ow]];if(!s.startsWith("/"))throw new Error(`Invalid path "${s}"`);function e(p){throw new Error(`ERR (${t})/"${u}": ${p}`)}let t=Rt.Static,i=t;const n=[];let r;function o(){r&&n.push(r),r=[]}let l=0,a,u="",c="";function d(){u&&(t===Rt.Static?r.push({type:Dn.Static,value:u}):t===Rt.Param||t===Rt.ParamRegExp||t===Rt.ParamRegExpEnd?(r.length>1&&(a==="*"||a==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),r.push({type:Dn.Param,value:u,regexp:c,repeatable:a==="*"||a==="+",optional:a==="*"||a==="?"})):e("Invalid state to consume buffer"),u="")}function f(){u+=a}for(;l<s.length;){if(a=s[l++],a==="\\"&&t!==Rt.ParamRegExp){i=t,t=Rt.EscapeNext;continue}switch(t){case Rt.Static:a==="/"?(u&&d(),o()):a===":"?(d(),t=Rt.Param):f();break;case Rt.EscapeNext:f(),t=i;break;case Rt.Param:a==="("?t=Rt.ParamRegExp:lw.test(a)?f():(d(),t=Rt.Static,a!=="*"&&a!=="?"&&a!=="+"&&l--);break;case Rt.ParamRegExp:a===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+a:t=Rt.ParamRegExpEnd:c+=a;break;case Rt.ParamRegExpEnd:d(),t=Rt.Static,a!=="*"&&a!=="?"&&a!=="+"&&l--,c="";break;default:e("Unknown state");break}}return t===Rt.ParamRegExp&&e(`Unfinished custom RegExp for param "${u}"`),d(),o(),n}const Hh="[^/]+?",cw={sensitive:!1,strict:!1,start:!0,end:!0};var us=(function(s){return s[s._multiplier=10]="_multiplier",s[s.Root=90]="Root",s[s.Segment=40]="Segment",s[s.SubSegment=30]="SubSegment",s[s.Static=40]="Static",s[s.Dynamic=20]="Dynamic",s[s.BonusCustomRegExp=10]="BonusCustomRegExp",s[s.BonusWildcard=-50]="BonusWildcard",s[s.BonusRepeatable=-20]="BonusRepeatable",s[s.BonusOptional=-8]="BonusOptional",s[s.BonusStrict=.7000000000000001]="BonusStrict",s[s.BonusCaseSensitive=.25]="BonusCaseSensitive",s})(us||{});const uw=/[.+*?^${}()[\]/\\]/g;function dw(s,e){const t=at({},cw,e),i=[];let n=t.start?"^":"";const r=[];for(const u of s){const c=u.length?[]:[us.Root];t.strict&&!u.length&&(n+="/");for(let d=0;d<u.length;d++){const f=u[d];let p=us.Segment+(t.sensitive?us.BonusCaseSensitive:0);if(f.type===Dn.Static)d||(n+="/"),n+=f.value.replace(uw,"\\$&"),p+=us.Static;else if(f.type===Dn.Param){const{value:v,repeatable:k,optional:m,regexp:w}=f;r.push({name:v,repeatable:k,optional:m});const L=w||Hh;if(L!==Hh){p+=us.BonusCustomRegExp;try{`${L}`}catch(H){throw new Error(`Invalid custom RegExp for param "${v}" (${L}): `+H.message)}}let I=k?`((?:${L})(?:/(?:${L}))*)`:`(${L})`;d||(I=m&&u.length<2?`(?:/${I})`:"/"+I),m&&(I+="?"),n+=I,p+=us.Dynamic,m&&(p+=us.BonusOptional),k&&(p+=us.BonusRepeatable),L===".*"&&(p+=us.BonusWildcard)}c.push(p)}i.push(c)}if(t.strict&&t.end){const u=i.length-1;i[u][i[u].length-1]+=us.BonusStrict}t.strict||(n+="/?"),t.end?n+="$":t.strict&&!n.endsWith("/")&&(n+="(?:/|$)");const o=new RegExp(n,t.sensitive?"":"i");function l(u){const c=u.match(o),d={};if(!c)return null;for(let f=1;f<c.length;f++){const p=c[f]||"",v=r[f-1];d[v.name]=p&&v.repeatable?p.split("/"):p}return d}function a(u){let c="",d=!1;for(const f of s){(!d||!c.endsWith("/"))&&(c+="/"),d=!1;for(const p of f)if(p.type===Dn.Static)c+=p.value;else if(p.type===Dn.Param){const{value:v,repeatable:k,optional:m}=p,w=v in u?u[v]:"";if(Ys(w)&&!k)throw new Error(`Provided param "${v}" is an array but it is not repeatable (* or + modifiers)`);const L=Ys(w)?w.join("/"):w;if(!L)if(m)f.length<2&&(c.endsWith("/")?c=c.slice(0,-1):d=!0);else throw new Error(`Missing required param "${v}"`);c+=L}}return c||"/"}return{re:o,score:i,keys:r,parse:l,stringify:a}}function fw(s,e){let t=0;for(;t<s.length&&t<e.length;){const i=e[t]-s[t];if(i)return i;t++}return s.length<e.length?s.length===1&&s[0]===us.Static+us.Segment?-1:1:s.length>e.length?e.length===1&&e[0]===us.Static+us.Segment?1:-1:0}function v0(s,e){let t=0;const i=s.score,n=e.score;for(;t<i.length&&t<n.length;){const r=fw(i[t],n[t]);if(r)return r;t++}if(Math.abs(n.length-i.length)===1){if(Wh(i))return 1;if(Wh(n))return-1}return n.length-i.length}function Wh(s){const e=s[s.length-1];return s.length>0&&e[e.length-1]<0}const hw={strict:!1,end:!0,sensitive:!1};function pw(s,e,t){const i=dw(aw(s.path),t),n=at(i,{record:s,parent:e,children:[],alias:[]});return e&&!n.record.aliasOf==!e.record.aliasOf&&e.children.push(n),n}function mw(s,e){const t=[],i=new Map;e=Vh(hw,e);function n(d){return i.get(d)}function r(d,f,p){const v=!p,k=qh(d);k.aliasOf=p&&p.record;const m=Vh(e,d),w=[k];if("alias"in d){const H=typeof d.alias=="string"?[d.alias]:d.alias;for(const N of H)w.push(qh(at({},k,{components:p?p.record.components:k.components,path:N,aliasOf:p?p.record:k})))}let L,I;for(const H of w){const{path:N}=H;if(f&&N[0]!=="/"){const P=f.record.path,S=P[P.length-1]==="/"?"":"/";H.path=f.record.path+(N&&S+N)}if(L=pw(H,f,m),p?p.alias.push(L):(I=I||L,I!==L&&I.alias.push(L),v&&d.name&&!Gh(L)&&o(d.name)),y0(L)&&a(L),k.children){const P=k.children;for(let S=0;S<P.length;S++)r(P[S],L,p&&p.children[S])}p=p||L}return I?()=>{o(I)}:uo}function o(d){if(p0(d)){const f=i.get(d);f&&(i.delete(d),t.splice(t.indexOf(f),1),f.children.forEach(o),f.alias.forEach(o))}else{const f=t.indexOf(d);f>-1&&(t.splice(f,1),d.record.name&&i.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function l(){return t}function a(d){const f=yw(d,t);t.splice(f,0,d),d.record.name&&!Gh(d)&&i.set(d.record.name,d)}function u(d,f){let p,v={},k,m;if("name"in d&&d.name){if(p=i.get(d.name),!p)throw yr(Mt.MATCHER_NOT_FOUND,{location:d});m=p.record.name,v=at(Kh(f.params,p.keys.filter(I=>!I.optional).concat(p.parent?p.parent.keys.filter(I=>I.optional):[]).map(I=>I.name)),d.params&&Kh(d.params,p.keys.map(I=>I.name))),k=p.stringify(v)}else if(d.path!=null)k=d.path,p=t.find(I=>I.re.test(k)),p&&(v=p.parse(k),m=p.record.name);else{if(p=f.name?i.get(f.name):t.find(I=>I.re.test(f.path)),!p)throw yr(Mt.MATCHER_NOT_FOUND,{location:d,currentLocation:f});m=p.record.name,v=at({},f.params,d.params),k=p.stringify(v)}const w=[];let L=p;for(;L;)w.unshift(L.record),L=L.parent;return{name:m,path:k,params:v,matched:w,meta:vw(w)}}s.forEach(d=>r(d));function c(){t.length=0,i.clear()}return{addRoute:r,resolve:u,removeRoute:o,clearRoutes:c,getRoutes:l,getRecordMatcher:n}}function Kh(s,e){const t={};for(const i of e)i in s&&(t[i]=s[i]);return t}function qh(s){const e={path:s.path,redirect:s.redirect,name:s.name,meta:s.meta||{},aliasOf:s.aliasOf,beforeEnter:s.beforeEnter,props:gw(s),children:s.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in s?s.components||null:s.component&&{default:s.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function gw(s){const e={},t=s.props||!1;if("component"in s)e.default=t;else for(const i in s.components)e[i]=typeof t=="object"?t[i]:t;return e}function Gh(s){for(;s;){if(s.record.aliasOf)return!0;s=s.parent}return!1}function vw(s){return s.reduce((e,t)=>at(e,t.meta),{})}function yw(s,e){let t=0,i=e.length;for(;t!==i;){const r=t+i>>1;v0(s,e[r])<0?i=r:t=r+1}const n=bw(s);return n&&(i=e.lastIndexOf(n,i-1)),i}function bw(s){let e=s;for(;e=e.parent;)if(y0(e)&&v0(s,e)===0)return e}function y0({record:s}){return!!(s.name||s.components&&Object.keys(s.components).length||s.redirect)}function Jh(s){const e=Bs(Ya),t=Bs(Fd),i=z(()=>{const a=ft(s.to);return e.resolve(a)}),n=z(()=>{const{matched:a}=i.value,{length:u}=a,c=a[u-1],d=t.matched;if(!c||!d.length)return-1;const f=d.findIndex(vr.bind(null,c));if(f>-1)return f;const p=Yh(a[u-2]);return u>1&&Yh(c)===p&&d[d.length-1].path!==p?d.findIndex(vr.bind(null,a[u-2])):f}),r=z(()=>n.value>-1&&Cw(t.params,i.value.params)),o=z(()=>n.value>-1&&n.value===t.matched.length-1&&h0(t.params,i.value.params));function l(a={}){if(Sw(a)){const u=e[ft(s.replace)?"replace":"push"](ft(s.to)).catch(uo);return s.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:i,href:z(()=>i.value.href),isActive:r,isExactActive:o,navigate:l}}function kw(s){return s.length===1?s[0]:s}const xw=Mg({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Jh,setup(s,{slots:e}){const t=js(Jh(s)),{options:i}=Bs(Ya),n=z(()=>({[Qh(s.activeClass,i.linkActiveClass,"router-link-active")]:t.isActive,[Qh(s.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const r=e.default&&kw(e.default(t));return s.custom?r:Tt("a",{"aria-current":t.isExactActive?s.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:n.value},r)}}}),ww=xw;function Sw(s){if(!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)&&!s.defaultPrevented&&!(s.button!==void 0&&s.button!==0)){if(s.currentTarget&&s.currentTarget.getAttribute){const e=s.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return s.preventDefault&&s.preventDefault(),!0}}function Cw(s,e){for(const t in e){const i=e[t],n=s[t];if(typeof i=="string"){if(i!==n)return!1}else if(!Ys(n)||n.length!==i.length||i.some((r,o)=>r!==n[o]))return!1}return!0}function Yh(s){return s?s.aliasOf?s.aliasOf.path:s.path:""}const Qh=(s,e,t)=>s??e??t,_w=Mg({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(s,{attrs:e,slots:t}){const i=Bs(Su),n=z(()=>s.route||i.value),r=Bs(zh,0),o=z(()=>{let u=ft(r);const{matched:c}=n.value;let d;for(;(d=c[u])&&!d.components;)u++;return u}),l=z(()=>n.value.matched[o.value]);ao(zh,z(()=>o.value+1)),ao(Zx,l),ao(Su,n);const a=ie();return Re(()=>[a.value,l.value,s.name],([u,c,d],[f,p,v])=>{c&&(c.instances[d]=u,p&&p!==c&&u&&u===f&&(c.leaveGuards.size||(c.leaveGuards=p.leaveGuards),c.updateGuards.size||(c.updateGuards=p.updateGuards))),u&&c&&(!p||!vr(c,p)||!f)&&(c.enterCallbacks[d]||[]).forEach(k=>k(u))},{flush:"post"}),()=>{const u=n.value,c=s.name,d=l.value,f=d&&d.components[c];if(!f)return Xh(t.default,{Component:f,route:u});const p=d.props[c],v=p?p===!0?u.params:typeof p=="function"?p(u):p:null,m=Tt(f,at({},v,e,{onVnodeUnmounted:w=>{w.component.isUnmounted&&(d.instances[c]=null)},ref:a}));return Xh(t.default,{Component:m,route:u})||m}}});function Xh(s,e){if(!s)return null;const t=s(e);return t.length===1?t[0]:t}const Aw=_w;function Mw(s){const e=mw(s.routes,s),t=s.parseQuery||Qx,i=s.stringifyQuery||Fh,n=s.history,r=Hr(),o=Hr(),l=Hr(),a=_1(zi);let u=zi;Yn&&s.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=Dc.bind(null,te=>""+te),d=Dc.bind(null,$x),f=Dc.bind(null,Eo);function p(te,ve){let Q,J;return p0(te)?(Q=e.getRecordMatcher(te),J=ve):J=te,e.addRoute(J,Q)}function v(te){const ve=e.getRecordMatcher(te);ve&&e.removeRoute(ve)}function k(){return e.getRoutes().map(te=>te.record)}function m(te){return!!e.getRecordMatcher(te)}function w(te,ve){if(ve=at({},ve||a.value),typeof te=="string"){const U=Ec(t,te,ve.path),ne=e.resolve({path:U.path},ve),le=n.createHref(U.fullPath);return at(U,ne,{params:f(ne.params),hash:Eo(U.hash),redirectedFrom:void 0,href:le})}let Q;if(te.path!=null)Q=at({},te,{path:Ec(t,te.path,ve.path).path});else{const U=at({},te.params);for(const ne in U)U[ne]==null&&delete U[ne];Q=at({},te,{params:d(U)}),ve.params=d(ve.params)}const J=e.resolve(Q,ve),T=te.hash||"";J.params=c(f(J.params));const x=Vx(i,at({},te,{hash:Ox(T),path:J.path})),_=n.createHref(x);return at({fullPath:x,hash:T,query:i===Fh?Xx(te.query):te.query||{}},J,{redirectedFrom:void 0,href:_})}function L(te){return typeof te=="string"?Ec(t,te,a.value.path):at({},te)}function I(te,ve){if(u!==te)return yr(Mt.NAVIGATION_CANCELLED,{from:ve,to:te})}function H(te){return S(te)}function N(te){return H(at(L(te),{replace:!0}))}function P(te,ve){const Q=te.matched[te.matched.length-1];if(Q&&Q.redirect){const{redirect:J}=Q;let T=typeof J=="function"?J(te,ve):J;return typeof T=="string"&&(T=T.includes("?")||T.includes("#")?T=L(T):{path:T},T.params={}),at({query:te.query,hash:te.hash,params:T.path!=null?{}:te.params},T)}}function S(te,ve){const Q=u=w(te),J=a.value,T=te.state,x=te.force,_=te.replace===!0,U=P(Q,J);if(U)return S(at(L(U),{state:typeof U=="object"?at({},T,U.state):T,force:x,replace:_}),ve||Q);const ne=Q;ne.redirectedFrom=ve;let le;return!x&&Bx(i,J,Q)&&(le=yr(Mt.NAVIGATION_DUPLICATED,{to:ne,from:J}),be(J,J,!0,!1)),(le?Promise.resolve(le):oe(ne,J)).catch(C=>Si(C)?Si(C,Mt.NAVIGATION_GUARD_REDIRECT)?C:Ne(C):ce(C,ne,J)).then(C=>{if(C){if(Si(C,Mt.NAVIGATION_GUARD_REDIRECT))return S(at({replace:_},L(C.to),{state:typeof C.to=="object"?at({},T,C.to.state):T,force:x}),ve||ne)}else C=B(ne,J,!0,_,T);return se(ne,J,C),C})}function O(te,ve){const Q=I(te,ve);return Q?Promise.reject(Q):Promise.resolve()}function W(te){const ve=Je.values().next().value;return ve&&typeof ve.runWithContext=="function"?ve.runWithContext(te):te()}function oe(te,ve){let Q;const[J,T,x]=ew(te,ve);Q=Oc(J.reverse(),"beforeRouteLeave",te,ve);for(const U of J)U.leaveGuards.forEach(ne=>{Q.push(Wi(ne,te,ve))});const _=O.bind(null,te,ve);return Q.push(_),rt(Q).then(()=>{Q=[];for(const U of r.list())Q.push(Wi(U,te,ve));return Q.push(_),rt(Q)}).then(()=>{Q=Oc(T,"beforeRouteUpdate",te,ve);for(const U of T)U.updateGuards.forEach(ne=>{Q.push(Wi(ne,te,ve))});return Q.push(_),rt(Q)}).then(()=>{Q=[];for(const U of x)if(U.beforeEnter)if(Ys(U.beforeEnter))for(const ne of U.beforeEnter)Q.push(Wi(ne,te,ve));else Q.push(Wi(U.beforeEnter,te,ve));return Q.push(_),rt(Q)}).then(()=>(te.matched.forEach(U=>U.enterCallbacks={}),Q=Oc(x,"beforeRouteEnter",te,ve,W),Q.push(_),rt(Q))).then(()=>{Q=[];for(const U of o.list())Q.push(Wi(U,te,ve));return Q.push(_),rt(Q)}).catch(U=>Si(U,Mt.NAVIGATION_CANCELLED)?U:Promise.reject(U))}function se(te,ve,Q){l.list().forEach(J=>W(()=>J(te,ve,Q)))}function B(te,ve,Q,J,T){const x=I(te,ve);if(x)return x;const _=ve===zi,U=Yn?history.state:{};Q&&(J||_?n.replace(te.fullPath,at({scroll:_&&U&&U.scroll},T)):n.push(te.fullPath,T)),a.value=te,be(te,ve,Q,_),Ne()}let ae;function ee(){ae||(ae=n.listen((te,ve,Q)=>{if(!ht.listening)return;const J=w(te),T=P(J,ht.currentRoute.value);if(T){S(at(T,{replace:!0,force:!0}),J).catch(uo);return}u=J;const x=a.value;Yn&&Kx(Nh(x.fullPath,Q.delta),Ja()),oe(J,x).catch(_=>Si(_,Mt.NAVIGATION_ABORTED|Mt.NAVIGATION_CANCELLED)?_:Si(_,Mt.NAVIGATION_GUARD_REDIRECT)?(S(at(L(_.to),{force:!0}),J).then(U=>{Si(U,Mt.NAVIGATION_ABORTED|Mt.NAVIGATION_DUPLICATED)&&!Q.delta&&Q.type===xu.pop&&n.go(-1,!1)}).catch(uo),Promise.reject()):(Q.delta&&n.go(-Q.delta,!1),ce(_,J,x))).then(_=>{_=_||B(J,x,!1),_&&(Q.delta&&!Si(_,Mt.NAVIGATION_CANCELLED)?n.go(-Q.delta,!1):Q.type===xu.pop&&Si(_,Mt.NAVIGATION_ABORTED|Mt.NAVIGATION_DUPLICATED)&&n.go(-1,!1)),se(J,x,_)}).catch(uo)}))}let $=Hr(),q=Hr(),Y;function ce(te,ve,Q){Ne(te);const J=q.list();return J.length?J.forEach(T=>T(te,ve,Q)):console.error(te),Promise.reject(te)}function ge(){return Y&&a.value!==zi?Promise.resolve():new Promise((te,ve)=>{$.add([te,ve])})}function Ne(te){return Y||(Y=!te,ee(),$.list().forEach(([ve,Q])=>te?Q(te):ve()),$.reset()),te}function be(te,ve,Q,J){const{scrollBehavior:T}=s;if(!Yn||!T)return Promise.resolve();const x=!Q&&qx(Nh(te.fullPath,0))||(J||!Q)&&history.state&&history.state.scroll||null;return qs().then(()=>T(te,ve,x)).then(_=>_&&Wx(_)).catch(_=>ce(_,te,ve))}const ze=te=>n.go(te);let Ue;const Je=new Set,ht={currentRoute:a,listening:!0,addRoute:p,removeRoute:v,clearRoutes:e.clearRoutes,hasRoute:m,getRoutes:k,resolve:w,options:s,push:H,replace:N,go:ze,back:()=>ze(-1),forward:()=>ze(1),beforeEach:r.add,beforeResolve:o.add,afterEach:l.add,onError:q.add,isReady:ge,install(te){te.component("RouterLink",ww),te.component("RouterView",Aw),te.config.globalProperties.$router=ht,Object.defineProperty(te.config.globalProperties,"$route",{enumerable:!0,get:()=>ft(a)}),Yn&&!Ue&&a.value===zi&&(Ue=!0,H(n.location).catch(J=>{}));const ve={};for(const J in zi)Object.defineProperty(ve,J,{get:()=>a.value[J],enumerable:!0});te.provide(Ya,ht),te.provide(Fd,cg(ve)),te.provide(Su,a);const Q=te.unmount;Je.add(te),te.unmount=function(){Je.delete(te),Je.size<1&&(u=zi,ae&&ae(),ae=null,a.value=zi,Ue=!1,Y=!1),Q()}}};function rt(te){return te.reduce((ve,Q)=>ve.then(()=>W(Q)),Promise.resolve())}return ht}function Qa(){return Bs(Ya)}function Er(s){return Bs(Fd)}const Ci=ie(!1);function Dw(){const s=()=>{Ci.value=!Ci.value},e=()=>{Ci.value=!0},t=()=>{Ci.value=!1};return Re(Ci,i=>{i?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},{immediate:!1}),is(()=>{const i=localStorage.getItem("theme");i?Ci.value=i==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches&&(Ci.value=!0),Ci.value?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}),{isDark:Ci,toggle:s,enable:e,disable:t}}function Ew(s,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 13.5V3.75m0 9.75a1.5 1.5 0 0 1 0 3m0-3a1.5 1.5 0 0 0 0 3m0 3.75V16.5m12-3V3.75m0 9.75a1.5 1.5 0 0 1 0 3m0-3a1.5 1.5 0 0 0 0 3m0 3.75V16.5m-6-9V3.75m0 3.75a1.5 1.5 0 0 1 0 3m0-3a1.5 1.5 0 0 0 0 3m0 9.75V10.5"})])}function Tw(s,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function Ow(s,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})])}function Pw(s,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125"})])}function zd(s,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}function Ud(s,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"})])}function Cu(s,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}function jw(s,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})])}function $w(s,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"})])}function Rw(s,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}function ma(s,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"})])}function Xa(s,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"})])}function Za(s,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"})])}function Lw(s,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})])}function Hd(s,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5.25 14.25h13.5m-13.5 0a3 3 0 0 1-3-3m3 3a3 3 0 1 0 0 6h13.5a3 3 0 1 0 0-6m-16.5-3a3 3 0 0 1 3-3h13.5a3 3 0 0 1 3 3m-19.5 0a4.5 4.5 0 0 1 .9-2.7L5.737 5.1a3.375 3.375 0 0 1 2.7-1.35h7.126c1.062 0 2.062.5 2.7 1.35l2.587 3.45a4.5 4.5 0 0 1 .9 2.7m0 0a3 3 0 0 1-3 3m0 3h.008v.008h-.008v-.008Zm0-6h.008v.008h-.008v-.008Zm-3 6h.008v.008h-.008v-.008Zm0-6h.008v.008h-.008v-.008Z"})])}function Vw(s,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"})])}function Bw(s,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}const Iw={key:0,class:"pointer-events-auto w-full max-w-sm rounded-lg bg-white shadow-lg outline-1 outline-black/5 dark:bg-gray-800 dark:-outline-offset-1 dark:outline-white/10"},Nw={class:"p-4"},Fw={key:0,class:"shrink-0"},zw={key:0,class:"w-0 flex-1 text-sm font-medium text-gray-900 dark:text-white"},Uw={class:"text-sm font-medium text-gray-900 dark:text-white"},Hw={key:0,class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},Ww={__name:"Toast",props:{title:{type:String,required:!0},description:{type:String,default:null},type:{type:String,default:"success",validator:s=>["success","error","warning","info"].includes(s)},variant:{type:String,default:"regular",validator:s=>["regular","condensed"].includes(s)},action:{type:String,default:null},duration:{type:Number,default:5e3},autoClose:{type:Boolean,default:!0}},emits:["close","action"],setup(s,{emit:e}){const t=s,i=e,n=ie(!1);let r=null;const o=z(()=>{const u={success:Tw,error:Bw,warning:jw,info:Xa},c={success:"text-sky-400",error:"text-red-400",warning:"text-yellow-400",info:"text-blue-400"},d=u[t.type],f=c[t.type];return()=>Tt(d,{class:`size-6 ${f}`})}),l=()=>{n.value=!1,r&&clearTimeout(r),setTimeout(()=>i("close"),200)},a=()=>{i("action"),l()};return is(()=>{n.value=!0,t.autoClose&&t.duration>0&&(r=setTimeout(l,t.duration))}),Re(()=>t.duration,u=>{r&&clearTimeout(r),t.autoClose&&u>0&&(r=setTimeout(l,u))}),(u,c)=>(g(),_e(Id,{"enter-active-class":"transform transition duration-300 ease-out","enter-from-class":"translate-y-2 opacity-0 sm:translate-x-2 sm:translate-y-0","enter-to-class":"translate-y-0 opacity-100 sm:translate-x-0","leave-active-class":"transition duration-200 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:Z(()=>[n.value?(g(),b("div",Iw,[h("div",Nw,[h("div",{class:xe(s.variant==="condensed"?"flex items-center":"flex items-start")},[s.variant==="regular"?(g(),b("div",Fw,[(g(),_e(ws(o.value),{class:"size-6"}))])):G("",!0),h("div",{class:xe([s.variant==="regular"?"ml-3 w-0 flex-1 pt-0.5":"flex w-0 flex-1 justify-between"])},[s.variant==="condensed"?(g(),b("p",zw,X(s.title),1)):(g(),b(ye,{key:1},[h("p",Uw,X(s.title),1),s.description?(g(),b("p",Hw,X(s.description),1)):G("",!0)],64)),s.variant==="condensed"&&s.action?(g(),b("button",{key:2,type:"button",onClick:a,class:"ml-3 shrink-0 rounded-md bg-white text-sm font-medium text-sky-600 hover:text-sky-500 focus:outline-2 focus:outline-offset-2 focus:outline-sky-500 dark:bg-gray-800 dark:text-sky-400 dark:hover:text-sky-300 dark:focus:outline-sky-400"},X(s.action),1)):G("",!0)],2),h("div",{class:"ml-4 flex shrink-0"},[h("button",{type:"button",onClick:l,class:"inline-flex rounded-md text-gray-400 hover:text-gray-500 focus:outline-2 focus:outline-offset-2 focus:outline-sky-600 dark:hover:text-white dark:focus:outline-sky-500"},[...c[0]||(c[0]=[h("span",{class:"sr-only"},"Close",-1),h("svg",{viewBox:"0 0 20 20",fill:"currentColor",class:"size-5"},[h("path",{d:"M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z"})],-1)])])])],2)])])):G("",!0)]),_:1}))}},Kw={"aria-live":"assertive",class:"pointer-events-none fixed inset-0 flex items-end px-4 py-6 sm:items-start sm:p-6 z-50"},qw={class:"flex w-full flex-col items-center space-y-4 sm:items-end"},Gw={__name:"ToastContainer",setup(s,{expose:e}){const t=ie([]);let i=1;const n=a=>{const u={id:i++,title:a.title,description:a.description||null,type:a.type||"success",variant:a.variant||"regular",action:a.action||null,duration:a.duration!==void 0?a.duration:5e3,autoClose:a.autoClose!==void 0?a.autoClose:!0,onAction:a.onAction||null};return t.value.push(u),u.id},r=a=>{const u=t.value.findIndex(c=>c.id===a);u>-1&&t.value.splice(u,1)},o=a=>{a.onAction&&a.onAction()};return e({addToast:n,removeToast:r,clearAll:()=>{t.value=[]}}),(a,u)=>(g(),_e(kg,{to:"body"},[h("div",Kw,[h("div",qw,[(g(!0),b(ye,null,$e(t.value,c=>(g(),_e(Ww,{key:c.id,title:c.title,description:c.description,type:c.type,variant:c.variant,action:c.action,duration:c.duration,"auto-close":c.autoClose,onClose:d=>r(c.id),onAction:d=>o(c)},null,8,["title","description","type","variant","action","duration","auto-close","onClose","onAction"]))),128))])])]))}};let Sn=null;function Jw(s){Sn=s}function ec(){const s=l=>{if(!Sn){console.warn('ToastContainer not initialized. Add <ToastContainer ref="toastContainer" /> to your App.vue');return}return Sn.addToast(l)};return{show:s,success:(l,a=null,u={})=>s({title:l,description:a,type:"success",...u}),error:(l,a=null,u={})=>s({title:l,description:a,type:"error",...u}),warning:(l,a=null,u={})=>s({title:l,description:a,type:"warning",...u}),info:(l,a=null,u={})=>s({title:l,description:a,type:"info",...u}),remove:l=>{Sn&&Sn.removeToast(l)},clearAll:()=>{Sn&&Sn.clearAll()}}}const Yw={class:"flex min-h-screen bg-white dark:bg-zinc-900"},Qw={class:"hidden lg:fixed lg:inset-y-0 lg:z-50 lg:flex lg:w-72 lg:flex-col xl:w-80"},Xw={class:"flex grow flex-col overflow-y-auto border-r border-zinc-900/10 px-6 pb-8 pt-4 dark:border-white/10"},Zw={key:0,class:"mt-6"},e2={class:"mt-10"},t2={role:"list"},s2={class:"relative mt-6"},i2={class:"relative mt-3 pl-2"},n2={role:"list",class:"border-l border-transparent"},r2={class:"truncate"},o2={key:0,class:"relative mt-6"},l2={class:"relative mt-3 pl-2"},a2={role:"list",class:"border-l border-transparent"},c2={class:"truncate"},u2={key:0,class:"text-xs text-zinc-400 dark:text-zinc-500"},d2={class:"sticky bottom-0 mt-6 border-t border-zinc-900/10 pt-6 dark:border-white/10"},f2={class:"lg:pl-72 xl:pl-80 w-full"},h2={class:"h-screen overflow-auto"},p2={__name:"App",setup(s){const e=ie(null),t=Er(),{isDark:i,toggle:n}=Dw(),r=ie([]),o=async()=>{try{const v=await(await fetch("/api/settings/get")).json();r.value=v.projects||[]}catch(p){console.error("Failed to load projects:",p)}};ao("loadProjects",o);const l=p=>f.findIndex(k=>k.to==="/projects"&&t.path==="/projects/new"?!1:t.path.startsWith(k.to)),a=()=>r.value.findIndex(p=>t.path===`/project/${p.id}`),u=p=>p.to==="/projects"&&t.path==="/projects/new"?!1:t.path.startsWith(p.to),c=()=>Tt("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[Tt("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})]),d=()=>Tt("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[Tt("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})]),f=[{id:"projects",label:"Projects",to:"/projects"},{id:"settings",label:"New Project Defaults",to:"/settings"}];return is(async()=>{Jw(e.value),await o()}),(p,v)=>{const k=ua("router-link"),m=ua("router-view");return g(),b("div",Yw,[h("div",Qw,[h("div",Xw,[A(k,{to:"/",class:"flex items-center gap-3"},{default:Z(()=>[...v[1]||(v[1]=[h("img",{src:kx,alt:"Framework",class:"h-10 w-10"},null,-1),h("span",{class:"text-lg font-semibold text-zinc-900 dark:text-white"},"Framework",-1)])]),_:1}),p.$route.path!=="/projects/new"?(g(),b("div",Zw,[A(k,{to:"/projects/new",class:"flex w-full items-center justify-center gap-2 rounded-lg bg-white px-4 py-2.5 text-sm font-medium text-zinc-900 ring-1 ring-zinc-900/10 transition hover:bg-zinc-50 hover:ring-zinc-900/20 dark:bg-white/5 dark:text-white dark:ring-white/10 dark:hover:bg-white/10"},{default:Z(()=>[...v[2]||(v[2]=[h("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),de(" New Project ",-1)])]),_:1})])):G("",!0),h("nav",e2,[h("ul",t2,[h("li",s2,[v[4]||(v[4]=h("h2",{class:"text-xs font-semibold text-zinc-900 dark:text-white"}," Framework ",-1)),h("div",i2,[v[3]||(v[3]=h("div",{class:"absolute inset-y-0 left-2 w-px bg-zinc-900/10 dark:bg-white/5"},null,-1)),l()>=0?(g(),b("div",{key:0,class:"absolute left-2 h-6 w-px bg-sky-500 transition-all duration-200",style:ko({top:`${l()*32+4}px`})},null,4)):G("",!0),h("ul",n2,[(g(),b(ye,null,$e(f,w=>h("li",{key:w.id,class:"relative"},[A(k,{to:w.to,class:xe(["flex justify-between gap-2 py-1 pl-4 pr-3 text-sm transition",u(w)?"text-zinc-900 dark:text-white":"text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white"])},{default:Z(()=>[h("span",r2,X(w.label),1)]),_:2},1032,["to","class"])])),64))])])]),r.value.length>0?(g(),b("li",o2,[v[6]||(v[6]=h("h2",{class:"text-xs font-semibold text-zinc-900 dark:text-white"}," Your Projects ",-1)),h("div",l2,[v[5]||(v[5]=h("div",{class:"absolute inset-y-0 left-2 w-px bg-zinc-900/10 dark:bg-white/5"},null,-1)),a()>=0?(g(),b("div",{key:0,class:"absolute left-2 h-6 w-px bg-sky-500 transition-all duration-200",style:ko({top:`${a()*32+4}px`})},null,4)):G("",!0),h("ul",a2,[(g(!0),b(ye,null,$e(r.value,w=>(g(),b("li",{key:w.id,class:"relative"},[A(k,{to:`/project/${w.id}`,class:xe(["flex justify-between gap-2 py-1 pl-4 pr-3 text-sm transition",p.$route.path===`/project/${w.id}`?"text-zinc-900 dark:text-white":"text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white"])},{default:Z(()=>[h("span",c2,X(w.name),1),w.type?(g(),b("span",u2,X(w.type==="project"?"":w.type==="course"?"":""),1)):G("",!0)]),_:2},1032,["to","class"])]))),128))])])])):G("",!0),h("li",d2,[h("button",{onClick:v[0]||(v[0]=(...w)=>ft(n)&&ft(n)(...w)),class:"flex w-full items-center gap-3 text-sm text-zinc-600 transition hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white"},[(g(),_e(ws(ft(i)?d:c),{class:"h-5 w-5 shrink-0"})),de(" "+X(ft(i)?"Light Mode":"Dark Mode"),1)])])])])])]),h("div",f2,[h("main",h2,[A(m)])]),A(Gw,{ref_key:"toastContainer",ref:e},null,512)])}}},m2={key:0,class:"flex items-center justify-center py-12"},g2={key:1,class:"max-w-4xl prose prose-slate dark:prose-invert"},v2={class:"not-prose mb-8"},y2={class:"flex items-center gap-3 mb-2"},b2={class:"px-3 py-1 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded text-sm font-medium"},k2={class:"text-4xl font-bold text-slate-900 dark:text-white mb-4"},x2={class:"text-lg text-slate-600 dark:text-slate-400"},w2={class:"not-prose mb-8"},S2={class:"bg-slate-900 dark:bg-slate-950 rounded-lg p-4 overflow-x-auto"},C2={class:"text-sm text-slate-100"},_2={key:0,class:"not-prose mb-8"},A2={class:"space-y-4"},M2={class:"flex items-baseline gap-2 mb-1"},D2={class:"text-base font-mono font-semibold text-slate-900 dark:text-white"},E2={class:"text-sm text-slate-500 dark:text-slate-400"},T2={key:0,class:"text-xs text-red-600 dark:text-red-400 font-medium"},O2={key:1,class:"text-xs text-slate-500 dark:text-slate-400"},P2={class:"text-sm text-slate-600 dark:text-slate-400"},j2={class:"not-prose mb-8"},$2={class:"text-slate-700 dark:text-slate-300"},R2={key:1,class:"not-prose mb-8"},L2={class:"text-slate-700 dark:text-slate-300 whitespace-pre-line"},V2={key:2,class:"not-prose mb-8"},B2={class:"space-y-6"},I2={class:"bg-slate-900 dark:bg-slate-950 rounded-lg p-4 overflow-x-auto mb-2"},N2={class:"text-sm text-slate-100"},F2={class:"text-sm text-slate-600 dark:text-slate-400"},z2={key:3,class:"not-prose mb-8"},U2={class:"space-y-2"},H2={class:"text-indigo-600 dark:text-indigo-400 font-mono font-semibold"},W2={class:"text-slate-700 dark:text-slate-300"},K2={key:4,class:"not-prose mb-8"},q2={class:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4"},G2={class:"list-disc list-inside space-y-1 text-sm text-amber-800 dark:text-amber-300"},J2={key:5,class:"not-prose"},Y2={class:"flex items-center gap-2 flex-wrap"},Q2={key:2,class:"text-center py-12"},X2={__name:"DocViewer",props:{functionName:{type:String,required:!0}},setup(s){const e=s,t=ie(null),i=ie(!0),n=async()=>{i.value=!0;try{const r=await fetch(`/docs/${e.functionName}.json`);r.ok?t.value=await r.json():t.value=null}catch(r){console.error("Failed to load documentation:",r),t.value=null}finally{i.value=!1}};return Re(()=>e.functionName,n),is(n),(r,o)=>i.value?(g(),b("div",m2,[...o[0]||(o[0]=[h("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"},null,-1)])])):t.value?(g(),b("div",g2,[h("div",v2,[h("div",y2,[h("span",b2,X(t.value.category),1)]),h("h1",k2,X(t.value.title),1),h("p",x2,X(t.value.description),1)]),h("div",w2,[o[1]||(o[1]=h("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white mb-4"},"Usage",-1)),h("div",S2,[h("pre",C2,[h("code",null,X(t.value.usage),1)])])]),t.value.params&&t.value.params.length>0?(g(),b("div",_2,[o[3]||(o[3]=h("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white mb-4"},"Parameters",-1)),h("div",A2,[(g(!0),b(ye,null,$e(t.value.params,l=>(g(),b("div",{key:l.name,class:"border-l-4 border-indigo-500 pl-4"},[h("div",M2,[h("code",D2,X(l.name),1),h("span",E2,X(l.type),1),l.required?(g(),b("span",T2," required ")):G("",!0),l.default?(g(),b("span",O2,[o[2]||(o[2]=de(" default: ",-1)),h("code",null,X(l.default),1)])):G("",!0)]),h("p",P2,X(l.description),1)]))),128))])])):G("",!0),h("div",j2,[o[4]||(o[4]=h("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white mb-4"},"Returns",-1)),h("p",$2,X(t.value.returns),1)]),t.value.details?(g(),b("div",R2,[o[5]||(o[5]=h("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white mb-4"},"Details",-1)),h("div",L2,X(t.value.details),1)])):G("",!0),t.value.examples&&t.value.examples.length>0?(g(),b("div",V2,[o[6]||(o[6]=h("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white mb-4"},"Examples",-1)),h("div",B2,[(g(!0),b(ye,null,$e(t.value.examples,(l,a)=>(g(),b("div",{key:a},[h("div",I2,[h("pre",N2,[h("code",null,X(l.code),1)])]),h("p",F2,X(l.description),1)]))),128))])])):G("",!0),t.value.see_also&&t.value.see_also.length>0?(g(),b("div",z2,[o[7]||(o[7]=h("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white mb-4"},"See Also",-1)),h("ul",U2,[(g(!0),b(ye,null,$e(t.value.see_also,l=>(g(),b("li",{key:l.name},[h("code",H2,X(l.name)+"() ",1),h("span",W2," - "+X(l.description),1)]))),128))])])):G("",!0),t.value.notes&&t.value.notes.length>0?(g(),b("div",K2,[h("div",q2,[o[8]||(o[8]=h("h3",{class:"text-lg font-semibold text-amber-900 dark:text-amber-200 mb-2"},"Notes",-1)),h("ul",G2,[(g(!0),b(ye,null,$e(t.value.notes,(l,a)=>(g(),b("li",{key:a},X(l),1))),128))])])])):G("",!0),t.value.tags&&t.value.tags.length>0?(g(),b("div",J2,[h("div",Y2,[o[9]||(o[9]=h("span",{class:"text-sm text-slate-500 dark:text-slate-400"},"Tags:",-1)),(g(!0),b(ye,null,$e(t.value.tags,l=>(g(),b("span",{key:l,class:"px-2 py-1 bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 rounded text-xs"},X(l),1))),128))])])):G("",!0)])):(g(),b("div",Q2,[...o[10]||(o[10]=[h("p",{class:"text-slate-600 dark:text-slate-400"},"Documentation not found.",-1)])]))}},Z2={class:"flex h-full"},eS={class:"w-64 flex-shrink-0 border-r border-zinc-900/10 dark:border-white/10 overflow-y-auto"},tS={class:"p-4"},sS={class:"mt-3 space-y-1"},iS={class:"mt-3 space-y-1"},nS={class:"mt-3 space-y-1"},rS={class:"flex-1 overflow-y-auto"},oS={key:1,class:"flex h-full items-center justify-center p-8"},Zh={__name:"DocsView",setup(s){const e=Er(),t=z(()=>e.params.functionName),i=[{name:"scaffold",title:"scaffold()"}],n=[{name:"data_load",title:"data_load()"}],r=[{name:"cache_get",title:"cache_get()"}];return(o,l)=>{const a=ua("router-link");return g(),b("div",Z2,[h("div",eS,[h("div",tS,[l[0]||(l[0]=h("h2",{class:"text-xs font-semibold uppercase tracking-wide text-zinc-500 dark:text-zinc-400"}," Core Functions ",-1)),h("ul",sS,[(g(),b(ye,null,$e(i,u=>h("li",{key:u.name},[A(a,{to:`/docs/${u.name}`,class:xe(["block rounded-md px-3 py-2 text-sm font-medium hover:bg-zinc-50 dark:hover:bg-zinc-800",t.value===u.name?"bg-sky-50 text-sky-600 dark:bg-sky-400/10 dark:text-sky-400":"text-zinc-700 dark:text-zinc-300"])},{default:Z(()=>[de(X(u.title),1)]),_:2},1032,["to","class"])])),64))]),l[1]||(l[1]=h("h2",{class:"mt-6 text-xs font-semibold uppercase tracking-wide text-zinc-500 dark:text-zinc-400"}," Data Functions ",-1)),h("ul",iS,[(g(),b(ye,null,$e(n,u=>h("li",{key:u.name},[A(a,{to:`/docs/${u.name}`,class:xe(["block rounded-md px-3 py-2 text-sm font-medium hover:bg-zinc-50 dark:hover:bg-zinc-800",t.value===u.name?"bg-sky-50 text-sky-600 dark:bg-sky-400/10 dark:text-sky-400":"text-zinc-700 dark:text-zinc-300"])},{default:Z(()=>[de(X(u.title),1)]),_:2},1032,["to","class"])])),64))]),l[2]||(l[2]=h("h2",{class:"mt-6 text-xs font-semibold uppercase tracking-wide text-zinc-500 dark:text-zinc-400"}," Cache Functions ",-1)),h("ul",nS,[(g(),b(ye,null,$e(r,u=>h("li",{key:u.name},[A(a,{to:`/docs/${u.name}`,class:xe(["block rounded-md px-3 py-2 text-sm font-medium hover:bg-zinc-50 dark:hover:bg-zinc-800",t.value===u.name?"bg-sky-50 text-sky-600 dark:bg-sky-400/10 dark:text-sky-400":"text-zinc-700 dark:text-zinc-300"])},{default:Z(()=>[de(X(u.title),1)]),_:2},1032,["to","class"])])),64))])])]),h("div",rS,[t.value?(g(),_e(X2,{key:0,functionName:t.value},null,8,["functionName"])):(g(),b("div",oS,[...l[3]||(l[3]=[h("div",{class:"text-center"},[h("h2",{class:"text-2xl font-bold text-zinc-900 dark:text-white"},"Framework Documentation"),h("p",{class:"mt-2 text-zinc-600 dark:text-zinc-400"}," Select a function from the sidebar to view its documentation. ")],-1)])]))])])}}},lS={key:0,class:"px-4 py-5 sm:px-6"},aS={class:"px-4 py-5 sm:p-6"},cS={key:1,class:"px-4 py-4 sm:px-6"},uS={__name:"Card",setup(s){const e=Q1(),t=z(()=>{const i=["overflow-hidden","rounded-lg","bg-white","shadow-sm","dark:bg-gray-800/50","dark:shadow-none","dark:outline","dark:-outline-offset-1","dark:outline-white/10"];return(e.header||e.footer)&&i.push("divide-y","divide-gray-200","dark:divide-white/10"),i.join(" ")});return(i,n)=>(g(),b("div",{class:xe(t.value)},[i.$slots.header?(g(),b("div",lS,[dt(i.$slots,"header")])):G("",!0),h("div",aS,[dt(i.$slots,"default")]),i.$slots.footer?(g(),b("div",cS,[dt(i.$slots,"footer")])):G("",!0)],2))}},Ke={__name:"Button",props:{variant:{type:String,default:"primary",validator:s=>["primary","secondary","soft"].includes(s)},size:{type:String,default:"md",validator:s=>["xs","sm","md","lg","xl"].includes(s)},rounded:{type:String,default:"md",validator:s=>["sm","md","full"].includes(s)},type:{type:String,default:"button"},href:{type:String,default:null},icon:{type:[Object,Function],default:null},iconPosition:{type:String,default:"left",validator:s=>["left","right"].includes(s)},iconOnly:{type:Boolean,default:!1}},emits:["click"],setup(s,{emit:e}){const t=s,i=e,n=l=>{i("click",l)},r=z(()=>{const l=["font-semibold","focus-visible:outline-2","focus-visible:outline-offset-2"],a={xs:t.iconOnly?"p-2":"px-3 py-2 text-xs",sm:t.iconOnly?"p-2.5":"px-3 py-2 text-sm",md:t.iconOnly?"p-3":"px-3.5 py-2.5 text-sm",lg:t.iconOnly?"p-3":"px-4 py-3 text-sm",xl:t.iconOnly?"p-3.5":"px-4.5 py-3.5 text-sm"};l.push(a[t.size]);const u={sm:"rounded-sm",md:"rounded-md",full:"rounded-full"};return l.push(u[t.rounded]),t.variant==="primary"?l.push("bg-sky-600","text-white","shadow-xs","hover:bg-sky-500","focus-visible:outline-sky-600","dark:bg-sky-500","dark:shadow-none","dark:hover:bg-sky-400","dark:focus-visible:outline-sky-500"):t.variant==="secondary"?l.push("bg-white","text-gray-900","shadow-xs","inset-ring","inset-ring-gray-300","hover:bg-gray-50","dark:bg-white/10","dark:text-white","dark:shadow-none","dark:inset-ring-white/5","dark:hover:bg-white/20"):t.variant==="soft"&&l.push("bg-sky-50","text-sky-600","shadow-xs","hover:bg-sky-100","dark:bg-sky-500/20","dark:text-sky-400","dark:shadow-none","dark:hover:bg-sky-500/30"),t.icon&&!t.iconOnly&&(l.push("inline-flex","items-center"),l.push(t.size==="xl"?"gap-x-2":"gap-x-1.5")),l.join(" ")}),o=z(()=>{const l=[];return t.iconOnly?l.push("size-5"):(l.push("size-5"),t.iconPosition==="left"?l.push("-ml-0.5"):l.push("-mr-0.5")),l.join(" ")});return(l,a)=>(g(),_e(ws(s.href?"a":"button"),{href:s.href,type:s.href?void 0:s.type,class:xe(r.value),onClick:n},{default:Z(()=>[s.icon&&s.iconPosition==="left"?(g(),b("svg",{key:0,viewBox:"0 0 20 20",fill:"currentColor","data-slot":"icon","aria-hidden":"true",class:xe(o.value)},[(g(),_e(ws(s.icon)))],2)):G("",!0),dt(l.$slots,"default"),s.icon&&s.iconPosition==="right"?(g(),b("svg",{key:1,viewBox:"0 0 20 20",fill:"currentColor","data-slot":"icon","aria-hidden":"true",class:xe(o.value)},[(g(),_e(ws(s.icon)))],2)):G("",!0)]),_:3},8,["href","type","class"]))}},dS=["for"],fS={key:1,class:"mt-2 flex"},hS={class:"flex shrink-0 items-center rounded-l-md bg-gray-100 px-2 text-base text-gray-500 outline-1 -outline-offset-1 outline-gray-300 sm:text-sm/6 dark:bg-white/5 dark:text-gray-400 dark:outline-white/10 font-mono"},pS=["id","type","value","placeholder","required","disabled","aria-invalid","aria-describedby"],mS={key:2,class:"mt-2"},gS=["id","type","value","placeholder","required","disabled","aria-invalid","aria-describedby"],vS={key:0,viewBox:"0 0 16 16",fill:"currentColor","data-slot":"icon","aria-hidden":"true",class:"pointer-events-none col-start-1 row-start-1 mr-3 size-5 self-center justify-self-end text-red-500 sm:size-4 dark:text-red-400"},yS=["id"],bS=["id"],Ae={__name:"Input",props:{id:{type:String,default:()=>`input-${Math.random().toString(36).substr(2,9)}`},modelValue:{type:[String,Number],default:""},type:{type:String,default:"text"},label:{type:String,default:null},placeholder:{type:String,default:""},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},error:{type:String,default:null},hint:{type:String,default:null},monospace:{type:Boolean,default:!1},prefix:{type:String,default:null}},emits:["update:modelValue","blur"],setup(s){const e=s,t=z(()=>{const n=["block","w-full","rounded-md","bg-white","px-3","py-1.5","text-base","outline-1","-outline-offset-1","placeholder:text-gray-400","focus:outline-2","focus:-outline-offset-2","sm:text-sm/6","dark:bg-white/5","dark:placeholder:text-gray-500"];return e.monospace&&n.push("font-mono"),e.error?n.push("col-start-1","row-start-1","pr-10","pl-3","text-red-900","outline-red-300","placeholder:text-red-300","focus:outline-red-600","sm:pr-9","dark:text-red-400","dark:outline-red-500/50","dark:placeholder:text-red-400/70","dark:focus:outline-red-400"):n.push("text-gray-900","outline-gray-300","focus:outline-sky-600","dark:text-white","dark:outline-white/10","dark:focus:outline-sky-500"),n.join(" ")}),i=z(()=>{const n=["-ml-px","block","w-full","grow","rounded-r-md","bg-white","px-3","py-1.5","text-base","outline-1","-outline-offset-1","placeholder:text-gray-400","focus:outline-2","focus:-outline-offset-2","sm:text-sm/6","dark:bg-white/5","dark:placeholder:text-gray-500"];return e.monospace&&n.push("font-mono"),e.error?n.push("text-red-900","outline-red-300","placeholder:text-red-300","focus:outline-red-600","dark:text-red-400","dark:outline-red-500/50","dark:placeholder:text-red-400/70","dark:focus:outline-red-400"):n.push("text-gray-900","outline-gray-300","focus:outline-sky-600","dark:text-white","dark:outline-white/10","dark:focus:outline-sky-500"),n.join(" ")});return(n,r)=>(g(),b("div",null,[s.label?(g(),b("label",{key:0,for:s.id,class:"block text-sm/6 font-medium text-gray-900 dark:text-white"},X(s.label),9,dS)):G("",!0),s.prefix?(g(),b("div",fS,[h("div",hS,X(s.prefix),1),h("input",{id:s.id,type:s.type,value:s.modelValue,placeholder:s.placeholder,required:s.required,disabled:s.disabled,"aria-invalid":s.error?"true":void 0,"aria-describedby":s.error?`${s.id}-error`:s.hint?`${s.id}-description`:void 0,onInput:r[0]||(r[0]=o=>n.$emit("update:modelValue",o.target.value)),onBlur:r[1]||(r[1]=o=>n.$emit("blur",o)),class:xe(i.value)},null,42,pS)])):(g(),b("div",mS,[h("input",{id:s.id,type:s.type,value:s.modelValue,placeholder:s.placeholder,required:s.required,disabled:s.disabled,"aria-invalid":s.error?"true":void 0,"aria-describedby":s.error?`${s.id}-error`:s.hint?`${s.id}-description`:void 0,onInput:r[2]||(r[2]=o=>n.$emit("update:modelValue",o.target.value)),onBlur:r[3]||(r[3]=o=>n.$emit("blur",o)),class:xe(t.value)},null,42,gS),s.error?(g(),b("svg",vS,[...r[4]||(r[4]=[h("path",{d:"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14ZM8 4a.75.75 0 0 1 .75.75v3a.75.75 0 0 1-1.5 0v-3A.75.75 0 0 1 8 4Zm0 8a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z","clip-rule":"evenodd","fill-rule":"evenodd"},null,-1)])])):G("",!0)])),s.error?(g(),b("p",{key:3,id:`${s.id}-error`,class:"mt-2 text-sm text-red-600 dark:text-red-400"},X(s.error),9,yS)):G("",!0),s.hint&&!s.error?(g(),b("p",{key:4,id:`${s.id}-description`,class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},X(s.hint),9,bS)):G("",!0)]))}},kS={class:"flex gap-3"},xS={class:"flex h-6 shrink-0 items-center"},wS={class:"group grid size-4 grid-cols-1"},SS=["id","name","checked","aria-describedby"],CS={class:"text-sm/6"},_S=["for"],AS=["id"],Ji={__name:"Checkbox",props:{id:{type:String,required:!0},name:{type:String,default:null},modelValue:{type:Boolean,default:!1},description:{type:String,default:null}},emits:["update:modelValue"],setup(s){return(e,t)=>(g(),b("div",kS,[h("div",xS,[h("div",wS,[h("input",{id:s.id,type:"checkbox",name:s.name,checked:s.modelValue,"aria-describedby":s.description?`${s.id}-description`:void 0,onChange:t[0]||(t[0]=i=>e.$emit("update:modelValue",i.target.checked)),class:"col-start-1 row-start-1 appearance-none rounded-sm border border-gray-300 bg-white checked:border-sky-600 checked:bg-sky-600 indeterminate:border-sky-600 indeterminate:bg-sky-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:checked:bg-gray-100 dark:border-white/10 dark:bg-white/5 dark:checked:border-sky-500 dark:checked:bg-sky-500 dark:indeterminate:border-sky-500 dark:indeterminate:bg-sky-500 dark:focus-visible:outline-sky-500 dark:disabled:border-white/5 dark:disabled:bg-white/10 dark:disabled:checked:bg-white/10 forced-colors:appearance-auto"},null,40,SS),t[1]||(t[1]=h("svg",{viewBox:"0 0 14 14",fill:"none",class:"pointer-events-none col-start-1 row-start-1 size-3.5 self-center justify-self-center stroke-white group-has-disabled:stroke-gray-950/25 dark:group-has-disabled:stroke-white/25"},[h("path",{d:"M3 8L6 11L11 3.5","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"opacity-0 group-has-checked:opacity-100"}),h("path",{d:"M3 7H11","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"opacity-0 group-has-indeterminate:opacity-100"})],-1))])]),h("div",CS,[h("label",{for:s.id,class:"font-medium text-gray-900 dark:text-white"},[dt(e.$slots,"default")],8,_S),s.description?(g(),b("p",{key:0,id:`${s.id}-description`,class:"text-gray-500 dark:text-gray-400"},X(s.description),9,AS)):G("",!0)])]))}};function MS(s,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z","clip-rule":"evenodd"})])}function DS(s,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"fill-rule":"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z","clip-rule":"evenodd"})])}function ES(s,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 0 1 .67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 1 1-.671-1.34l.041-.022ZM12 9a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z","clip-rule":"evenodd"})])}function TS(s,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-1.72 6.97a.75.75 0 1 0-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 1 0 1.06 1.06L12 13.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L13.06 12l1.72-1.72a.75.75 0 1 0-1.06-1.06L12 10.94l-1.72-1.72Z","clip-rule":"evenodd"})])}const OS={class:"flex gap-3"},PS={class:"flex-1"},_s={__name:"Alert",props:{type:{type:String,default:"info",validator:s=>["success","error","warning","info"].includes(s)},title:{type:String,default:null},description:{type:String,default:null},dismissible:{type:Boolean,default:!1}},emits:["dismiss"],setup(s,{emit:e}){const t=s,i=e,n={success:{container:"bg-sky-50 dark:bg-sky-900/20 inset-ring inset-ring-sky-200 dark:inset-ring-sky-800",icon:"text-sky-600 dark:text-sky-400",title:"text-sky-800 dark:text-sky-200",description:"text-sky-700 dark:text-sky-300",dismiss:"text-sky-600 hover:text-sky-700 dark:text-sky-400 dark:hover:text-sky-300"},error:{container:"bg-red-50 dark:bg-red-900/20 inset-ring inset-ring-red-200 dark:inset-ring-red-800",icon:"text-red-600 dark:text-red-400",title:"text-red-800 dark:text-red-200",description:"text-red-700 dark:text-red-300",dismiss:"text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300"},warning:{container:"bg-yellow-50 dark:bg-yellow-900/20 inset-ring inset-ring-yellow-200 dark:inset-ring-yellow-800",icon:"text-yellow-600 dark:text-yellow-400",title:"text-yellow-800 dark:text-yellow-200",description:"text-yellow-700 dark:text-yellow-300",dismiss:"text-yellow-600 hover:text-yellow-700 dark:text-yellow-400 dark:hover:text-yellow-300"},info:{container:"bg-blue-50 dark:bg-blue-900/20 inset-ring inset-ring-blue-200 dark:inset-ring-blue-800",icon:"text-blue-600 dark:text-blue-400",title:"text-blue-800 dark:text-blue-200",description:"text-blue-700 dark:text-blue-300",dismiss:"text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300"}},r=z(()=>`rounded-lg p-4 ${n[t.type].container}`),o=z(()=>`text-sm font-medium ${n[t.type].title}`),l=z(()=>{const d=[`text-sm ${n[t.type].description}`];return t.title&&d.push("mt-1"),d.join(" ")}),a=z(()=>`rounded-md p-1 ${n[t.type].dismiss} focus:outline-2 focus:outline-offset-2`),u=z(()=>({success:MS,error:TS,warning:DS,info:ES})[t.type]),c=()=>{i("dismiss")};return(d,f)=>(g(),b("div",{class:xe(r.value),role:"alert"},[h("div",OS,[(g(),_e(ws(u.value),{class:xe(["h-5 w-5 shrink-0",n[s.type].icon])},null,8,["class"])),h("div",PS,[s.title?(g(),b("p",{key:0,class:xe(o.value)},X(s.title),3)):G("",!0),s.description||d.$slots.default?(g(),b("p",{key:1,class:xe(l.value)},[dt(d.$slots,"default",{},()=>[de(X(s.description),1)])],2)):G("",!0)]),s.dismissible?(g(),b("button",{key:0,type:"button",onClick:c,class:xe(a.value)},[...f[0]||(f[0]=[h("span",{class:"sr-only"},"Dismiss",-1),h("svg",{viewBox:"0 0 20 20",fill:"currentColor",class:"size-5"},[h("path",{d:"M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z"})],-1)])],2)):G("",!0)])],2))}},jS={class:"flex items-center justify-between"},$S={class:"space-y-6"},RS={key:0,class:"text-xs text-gray-500 dark:text-gray-400 space-y-1"},LS={key:0},VS={class:"font-mono"},BS={key:1},IS={class:"font-mono"},NS={class:"space-y-2"},FS=["onClick"],zS={class:"flex items-start gap-3"},US={class:"text-2xl mt-0.5"},HS={class:"flex-1"},WS={class:"font-semibold text-gray-900 dark:text-white"},KS={class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},qS={key:0,class:"text-sky-600 dark:text-sky-400"},GS={key:1,class:"bg-gray-50 dark:bg-gray-800/50 rounded-lg p-4"},JS={class:"space-y-3"},YS={class:"list-decimal list-inside mt-1 space-y-1"},QS={class:"flex items-center justify-end gap-3"},XS={__name:"ProjectWizard",props:{mode:{type:String,default:"modal",validator:s=>["modal","page"].includes(s)},projectsRoot:{type:String,default:""}},emits:["close","created"],setup(s,{emit:e}){const t=s,i=e,n=z(()=>t.mode==="modal"),r=z(()=>(t.projectsRoot||"").trim()),o=P=>/^([A-Za-z]:[\\/]|\\\\|\/|~)/.test(P),l=(P,S)=>{if(!P)return S;const O=S.replace(/^[\\/]+/,"");if(!O)return P;if(P.endsWith("/")||P.endsWith("\\"))return`${P}${O}`;const W=P.includes("\\")&&!P.includes("/")?"\\":"/";return`${P}${W}${O}`},a=z(()=>n.value?"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4":"flex w-full justify-center"),u=z(()=>n.value?"max-w-2xl w-full max-h-[90vh] overflow-y-auto":"w-full max-w-2xl shadow-xl"),c=js({directory:"",name:"",type:"project",sensitive:!1,use_git:!0,use_renv:!1,attach_defaults:!0}),d=z(()=>{const P=c.directory.trim();return P?o(P)||!r.value?P:l(r.value,P):r.value||""}),f=z(()=>{const P=c.directory.trim();return P?r.value.length>0||o(P):!1}),p=z(()=>r.value?`Folder will be created inside ${r.value}`:"The directory where your project will be created"),v=z(()=>r.value?"analytics-project":"my-analysis"),k=[{id:"project",title:"Data Analysis",description:"Full-featured project with notebooks, scripts, data management, and results tracking",icon:""},{id:"course",title:"Course Materials",description:"Teaching materials with slides, assignments, and course documentation",icon:""},{id:"presentation",title:"Presentation",description:"Single talk or presentation with minimal structure",icon:""}],m=ie(!1),w=ie(""),L=ie(!1),I=()=>{n.value&&i("close")},H=()=>{!c.name&&c.directory&&(c.name=c.directory.split(/[-_]/).map(P=>P.charAt(0).toUpperCase()+P.slice(1)).join(" "))},N=async()=>{w.value="",L.value=!1,m.value=!0;try{const P=d.value||c.directory,S=await fetch("/api/project/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_dir:P,project_name:c.name||c.directory,type:c.type,sensitive:c.sensitive,use_git:c.use_git,use_renv:c.use_renv,attach_defaults:c.attach_defaults})}),O=await S.json();S.ok&&O.success?(L.value=!0,O&&!O.path&&(O.path=P),i("created",O),n.value&&setTimeout(()=>{i("close")},3e3)):w.value=O.error||"Failed to create project"}catch(P){w.value="Network error: "+P.message}finally{m.value=!1}};return(P,S)=>(g(),b("div",{class:xe(a.value),onClick:Nt(I,["self"])},[A(uS,{class:xe(u.value)},{header:Z(()=>[h("div",jS,[S[9]||(S[9]=h("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Create New Project",-1)),n.value?(g(),b("button",{key:0,onClick:S[0]||(S[0]=O=>P.$emit("close")),class:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition"},[...S[8]||(S[8]=[h("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])):G("",!0)])]),footer:Z(()=>[h("div",QS,[A(Ke,{variant:"secondary",onClick:S[7]||(S[7]=O=>P.$emit("close"))},{default:Z(()=>[...S[23]||(S[23]=[de(" Cancel ",-1)])]),_:1}),A(Ke,{variant:"primary",onClick:N,disabled:m.value||!c.directory},{default:Z(()=>[de(X(m.value?"Creating...":"Create Project"),1)]),_:1},8,["disabled"])])]),default:Z(()=>[h("div",$S,[A(Ae,{modelValue:c.directory,"onUpdate:modelValue":S[1]||(S[1]=O=>c.directory=O),label:"Project Directory",placeholder:v.value,hint:p.value,onInput:H},null,8,["modelValue","placeholder","hint"]),r.value||f.value?(g(),b("div",RS,[r.value?(g(),b("p",LS,[S[10]||(S[10]=de(" Projects will be created inside ",-1)),h("span",VS,X(r.value),1),S[11]||(S[11]=de(". ",-1))])):G("",!0),f.value?(g(),b("p",BS,[S[12]||(S[12]=de(" Full path: ",-1)),h("span",IS,X(d.value),1)])):G("",!0)])):G("",!0),A(Ae,{modelValue:c.name,"onUpdate:modelValue":S[2]||(S[2]=O=>c.name=O),label:"Project Name",placeholder:"My Analysis"},null,8,["modelValue"]),h("div",null,[S[14]||(S[14]=h("label",{class:"block text-sm/6 font-medium text-gray-900 dark:text-white mb-3"}," Project Type ",-1)),h("div",NS,[(g(),b(ye,null,$e(k,O=>h("div",{key:O.id,onClick:W=>c.type=O.id,class:xe(["border-2 rounded-lg p-4 cursor-pointer transition",c.type===O.id?"border-sky-600 bg-sky-50 dark:bg-sky-900/20 dark:border-sky-500":"border-gray-200 dark:border-gray-700 hover:border-sky-300 dark:hover:border-sky-600"])},[h("div",zS,[h("div",US,X(O.icon),1),h("div",HS,[h("h3",WS,X(O.title),1),h("p",KS,X(O.description),1)]),c.type===O.id?(g(),b("div",qS,[...S[13]||(S[13]=[h("svg",{class:"h-6 w-6",fill:"currentColor",viewBox:"0 0 20 20"},[h("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1)])])):G("",!0)])],10,FS)),64))])]),c.type==="project"?(g(),b("div",GS,[A(Ji,{modelValue:c.sensitive,"onUpdate:modelValue":S[3]||(S[3]=O=>c.sensitive=O),id:"sensitive",description:"Creates separate public/private directories for inputs, reference materials, and outputs. Recommended for PHI, PII, or IRB-restricted data."},{default:Z(()=>[...S[15]||(S[15]=[de(" Privacy-first mode ",-1)])]),_:1},8,["modelValue"])])):G("",!0),h("div",JS,[A(Ji,{modelValue:c.use_git,"onUpdate:modelValue":S[4]||(S[4]=O=>c.use_git=O),id:"use_git"},{default:Z(()=>[...S[16]||(S[16]=[de(" Initialize git repository ",-1)])]),_:1},8,["modelValue"]),A(Ji,{modelValue:c.use_renv,"onUpdate:modelValue":S[5]||(S[5]=O=>c.use_renv=O),id:"use_renv"},{default:Z(()=>[...S[17]||(S[17]=[de(" Enable renv for package management ",-1)])]),_:1},8,["modelValue"]),A(Ji,{modelValue:c.attach_defaults,"onUpdate:modelValue":S[6]||(S[6]=O=>c.attach_defaults=O),id:"attach_defaults"},{default:Z(()=>[...S[18]||(S[18]=[de(" Auto-load common packages (dplyr, tidyr, ggplot2) ",-1)])]),_:1},8,["modelValue"])]),w.value?(g(),_e(_s,{key:2,type:"error",description:w.value},null,8,["description"])):G("",!0),L.value?(g(),_e(_s,{key:3,type:"success",title:"Project created successfully!"},{default:Z(()=>[S[22]||(S[22]=h("p",{class:"mt-2"},"Next steps:",-1)),h("ol",YS,[h("li",null,"cd "+X(d.value),1),S[19]||(S[19]=h("li",null,"R",-1)),S[20]||(S[20]=h("li",null,"library(framework)",-1)),S[21]||(S[21]=h("li",null,"scaffold()",-1))])]),_:1})):G("",!0)])]),_:1},8,["class"])],2))}},ZS={class:"flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-sky-500 to-sky-600 shadow-lg shadow-sky-500/20"},eC={key:0,class:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},tC={key:1,class:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},sC={key:2,class:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},iC={__name:"ProjectTypeIcon",props:{type:{type:String,required:!0,validator:s=>["project","course","presentation"].includes(s)}},setup(s){return(e,t)=>(g(),b("div",ZS,[s.type==="project"?(g(),b("svg",eC,[...t[0]||(t[0]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)])])):s.type==="course"?(g(),b("svg",tC,[...t[1]||(t[1]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"},null,-1)])])):(g(),b("svg",sC,[...t[2]||(t[2]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"},null,-1)])]))]))}},nC={class:"flex items-center gap-2 text-xs text-zinc-600 dark:text-zinc-400"},rC={class:"truncate"},oC={__name:"ProjectAuthor",props:{author:{type:Object,required:!0}},setup(s){return(e,t)=>(g(),b("div",nC,[t[1]||(t[1]=h("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),h("span",null,X(s.author.author),1),s.author.author_email?(g(),b(ye,{key:0},[t[0]||(t[0]=h("span",{class:"text-zinc-400 dark:text-zinc-500"},"",-1)),h("span",rC,X(s.author.author_email),1)],64)):G("",!0)]))}},lC={class:"flex items-center gap-2 text-xs text-zinc-500 dark:text-zinc-500"},aC={__name:"ProjectCreatedDate",props:{date:{type:String,required:!0}},setup(s){return(e,t)=>(g(),b("div",lC,[t[0]||(t[0]=h("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),h("span",null,"Created "+X(s.date),1)]))}},tc={__name:"Badge",props:{variant:{type:String,default:"gray",validator:s=>["gray","red","yellow","green","blue","indigo","purple","pink","sky"].includes(s)},pill:{type:Boolean,default:!1},dot:{type:Boolean,default:!1}},setup(s){const e=s,t=z(()=>{const n=["inline-flex","items-center","px-2","py-1","text-xs","font-medium","inset-ring"];n.push(e.pill?"rounded-full":"rounded-md"),e.dot&&n.push("gap-x-1.5");const o={gray:{bg:"bg-gray-50",text:"text-gray-600",ring:"inset-ring-gray-500/10",darkBg:"dark:bg-gray-400/10",darkText:e.dot?"dark:text-gray-200":"dark:text-gray-400",darkRing:e.dot?"dark:inset-ring-white/10":"dark:inset-ring-gray-400/20"},red:{bg:"bg-red-50",text:"text-red-700",ring:"inset-ring-red-600/10",darkBg:"dark:bg-red-400/10",darkText:"dark:text-red-400",darkRing:"dark:inset-ring-red-400/20"},yellow:{bg:"bg-yellow-50",text:"text-yellow-800",ring:"inset-ring-yellow-600/20",darkBg:"dark:bg-yellow-400/10",darkText:"dark:text-yellow-500",darkRing:"dark:inset-ring-yellow-400/20"},green:{bg:"bg-green-50",text:"text-green-700",ring:"inset-ring-green-600/20",darkBg:"dark:bg-green-400/10",darkText:"dark:text-green-400",darkRing:"dark:inset-ring-green-500/20"},sky:{bg:"bg-sky-50",text:"text-sky-700",ring:"inset-ring-sky-600/20",darkBg:"dark:bg-sky-400/10",darkText:"dark:text-sky-400",darkRing:"dark:inset-ring-sky-500/20"},blue:{bg:"bg-blue-50",text:"text-blue-700",ring:"inset-ring-blue-700/10",darkBg:"dark:bg-blue-400/10",darkText:"dark:text-blue-400",darkRing:"dark:inset-ring-blue-400/30"},indigo:{bg:"bg-indigo-50",text:"text-indigo-700",ring:"inset-ring-indigo-700/10",darkBg:"dark:bg-indigo-400/10",darkText:"dark:text-indigo-400",darkRing:"dark:inset-ring-indigo-400/30"},purple:{bg:"bg-purple-50",text:"text-purple-700",ring:"inset-ring-purple-700/10",darkBg:"dark:bg-purple-400/10",darkText:"dark:text-purple-400",darkRing:"dark:inset-ring-purple-400/30"},pink:{bg:"bg-pink-50",text:"text-pink-700",ring:"inset-ring-pink-700/10",darkBg:"dark:bg-pink-400/10",darkText:"dark:text-pink-400",darkRing:"dark:inset-ring-pink-400/20"}}[e.variant];return e.dot?n.push("text-gray-900","inset-ring-gray-200","dark:text-white","dark:inset-ring-white/10"):n.push(o.bg,o.text,o.ring,o.darkBg,o.darkText,o.darkRing),n.join(" ")}),i=z(()=>`size-1.5 ${{gray:"fill-gray-500 dark:fill-gray-400",red:"fill-red-500 dark:fill-red-400",yellow:"fill-yellow-500 dark:fill-yellow-400",green:"fill-green-500 dark:fill-green-400",sky:"fill-sky-500 dark:fill-sky-400",blue:"fill-blue-500 dark:fill-blue-400",indigo:"fill-indigo-500 dark:fill-indigo-400",purple:"fill-purple-500 dark:fill-purple-400",pink:"fill-pink-500 dark:fill-pink-400"}[e.variant]}`);return(n,r)=>(g(),b("span",{class:xe(t.value)},[s.dot?(g(),b("svg",{key:0,viewBox:"0 0 6 6","aria-hidden":"true",class:xe(i.value)},[...r[0]||(r[0]=[h("circle",{r:"3",cx:"3",cy:"3"},null,-1)])],2)):G("",!0),dt(n.$slots,"default")],2))}},cC={class:"group relative overflow-hidden rounded-2xl border border-zinc-200 bg-white p-6 shadow-sm transition-all duration-300 hover:shadow-xl hover:shadow-zinc-900/5 dark:border-zinc-800 dark:bg-zinc-900 dark:hover:shadow-sky-500/5"},uC={class:"relative"},dC={class:"flex items-start justify-between"},fC={class:"flex-1"},hC={class:"flex items-center gap-3"},pC={class:"mt-4 text-xl font-bold text-zinc-900 dark:text-white"},mC={class:"mt-2 text-sm text-zinc-600 dark:text-zinc-400 font-mono truncate"},gC={class:"mt-6 flex gap-2"},vC={__name:"ProjectCard",props:{project:{type:Object,required:!0},typeLabel:{type:String,required:!0}},emits:["view","details"],setup(s){return(e,t)=>(g(),b("div",cC,[t[4]||(t[4]=h("div",{class:"absolute -right-6 -top-6 h-24 w-24 rounded-full bg-gradient-to-br from-sky-500/10 to-sky-600/10 blur-2xl transition-all duration-300 group-hover:scale-150"},null,-1)),h("div",uC,[h("div",dC,[h("div",fC,[h("div",hC,[A(iC,{type:s.project.type},null,8,["type"]),A(tc,{variant:"sky"},{default:Z(()=>[de(X(s.typeLabel),1)]),_:1})]),h("h3",pC,X(s.project.name),1),h("p",mC,X(s.project.path),1),s.project.author?(g(),_e(oC,{key:0,author:s.project,class:"mt-3"},null,8,["author"])):G("",!0),A(aC,{date:s.project.created,class:"mt-3"},null,8,["date"])])]),h("div",gC,[A(Ke,{variant:"primary",size:"md",onClick:t[0]||(t[0]=i=>e.$emit("view",s.project)),class:"flex-1"},{default:Z(()=>[...t[2]||(t[2]=[de(" View Project ",-1)])]),_:1}),A(Ke,{variant:"secondary",size:"md",onClick:t[1]||(t[1]=i=>e.$emit("details",s.project)),class:"flex-1"},{default:Z(()=>[...t[3]||(t[3]=[de(" See More ",-1)])]),_:1})])])]))}},yC={class:"flex items-start justify-between"},bC={class:"text-3xl font-bold tracking-tight text-gray-900 dark:text-white"},kC={key:0,class:"mt-2 text-sm text-gray-600 dark:text-gray-400"},xC={key:0},Tr={__name:"PageHeader",props:{title:{type:String,required:!0},description:{type:String,default:null}},setup(s){return(e,t)=>(g(),b("div",yC,[h("div",null,[h("h1",bC,X(s.title),1),s.description?(g(),b("p",kC,X(s.description),1)):G("",!0)]),e.$slots.actions?(g(),b("div",xC,[dt(e.$slots,"actions")])):G("",!0)]))}},b0=(s,e)=>{const t=s.__vccOpts||s;for(const[i,n]of e)t[i]=n;return t},wC={key:0,class:"relative z-50"},SC={class:"fixed inset-0 z-10 overflow-y-auto"},CC={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},_C=["aria-labelledby"],AC=["id"],MC={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},DC={__name:"Modal",props:{modelValue:{type:Boolean,default:!1},title:{type:String,default:null},description:{type:String,default:null},icon:{type:String,default:null,validator:s=>["success","error","warning","info"].includes(s)},size:{type:String,default:"md",validator:s=>["sm","md","lg","xl"].includes(s)},variant:{type:String,default:"centered",validator:s=>["centered","side-icon","left"].includes(s)},closeOnBackdrop:{type:Boolean,default:!0}},emits:["update:modelValue","close"],setup(s,{expose:e,emit:t}){const i=s,n=t,r=z(()=>`modal-title-${Math.random().toString(36).substr(2,9)}`),o={sm:"sm:max-w-sm",md:"sm:max-w-lg",lg:"sm:max-w-2xl",xl:"sm:max-w-4xl"},l=z(()=>["relative","transform","overflow-hidden","rounded-lg","bg-white","px-4","pt-5","pb-4","text-left","shadow-xl","transition-all","sm:my-8","sm:w-full","sm:p-6","dark:bg-gray-800","dark:outline","dark:-outline-offset-1","dark:outline-white/10",o[i.size]].join(" ")),a=z(()=>{const w=["flex","items-center","justify-center","rounded-full"];i.variant==="centered"?w.push("mx-auto","size-12"):w.push("shrink-0","sm:mx-0","sm:size-10");const L={success:"bg-sky-100 text-sky-600 dark:bg-sky-500/10 dark:text-sky-400",error:"bg-red-100 text-red-600 dark:bg-red-500/10 dark:text-red-400",warning:"bg-yellow-100 text-yellow-600 dark:bg-yellow-500/10 dark:text-yellow-400",info:"bg-blue-100 text-blue-600 dark:bg-blue-500/10 dark:text-blue-400"};return i.icon&&w.push(L[i.icon]),w.join(" ")}),u=z(()=>{const w=[];return i.variant==="centered"?w.push("mt-3","text-center","sm:mt-5"):i.variant==="left"?w.push("text-left"):w.push("mt-3","text-center","sm:mt-0","sm:ml-4","sm:text-left"),i.variant==="side-icon"&&(i.icon||i.$slots.icon)&&w.push("sm:flex","sm:items-start"),w.join(" ")}),c=z(()=>i.variant==="left"?"text-lg font-bold text-gray-900 dark:text-white mb-4":"text-base font-semibold text-gray-900 dark:text-white"),d=z(()=>(i.variant==="centered","mt-2")),f=z(()=>i.variant==="left"?"mt-6 pt-4 border-t border-gray-200 dark:border-gray-700 flex gap-3 justify-between":i.variant==="centered"?"mt-5 sm:mt-6 flex gap-3 justify-end":"mt-5 sm:mt-4 flex gap-3 justify-end"),p=z(()=>i.icon==="success"?{template:`
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="m4.5 12.75 6 6 9-13.5" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      `}:i.icon==="error"||i.icon==="warning"?{template:`
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      `}:i.icon==="info"?{template:`
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      `}:null),v=()=>{i.closeOnBackdrop&&m()},k=w=>{w.key==="Escape"&&i.modelValue&&m()},m=()=>{n("update:modelValue",!1),n("close")};return is(()=>{window.addEventListener("keydown",k)}),Dr(()=>{window.removeEventListener("keydown",k)}),e({close:m}),(w,L)=>(g(),_e(kg,{to:"body"},[A(Id,{name:"modal"},{default:Z(()=>[s.modelValue?(g(),b("div",wC,[h("div",{class:"fixed inset-0 bg-gray-500/75 transition-opacity dark:bg-gray-900/50",onClick:v}),h("div",SC,[h("div",CC,[h("div",{class:xe(l.value),role:"dialog","aria-modal":"true","aria-labelledby":r.value},[w.$slots.icon||s.icon?(g(),b("div",{key:0,class:xe(a.value)},[dt(w.$slots,"icon",{},()=>[s.icon?(g(),_e(ws(p.value),{key:0,class:"size-6"})):G("",!0)],!0)],2)):G("",!0),h("div",{class:xe(u.value)},[s.title?(g(),b("h3",{key:0,id:r.value,class:xe(c.value)},X(s.title),11,AC)):G("",!0),s.description||w.$slots.default?(g(),b("div",{key:1,class:xe(d.value)},[s.description?(g(),b("p",MC,X(s.description),1)):dt(w.$slots,"default",{key:1},void 0,!0)],2)):G("",!0)],2),w.$slots.actions?(g(),b("div",{key:1,class:xe(f.value)},[dt(w.$slots,"actions",{},void 0,!0)],2)):G("",!0)],10,_C)])])])):G("",!0)]),_:3})]))}},tn=b0(DC,[["__scopeId","data-v-2e078ad9"]]),EC=["title"],TC={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},OC={key:1,class:"h-4 w-4 text-sky-600 dark:text-sky-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},PC={key:2},cr={__name:"CopyButton",props:{value:{type:String,required:!0},showLabel:{type:Boolean,default:!1},variant:{type:String,default:"default",validator:s=>["default","ghost","bare"].includes(s)},successMessage:{type:String,default:"Copied to clipboard"}},setup(s){const e=s,t=ec(),i=ie(!1);let n=null;const r=z(()=>e.variant==="bare"?"inline-flex items-center text-sm font-medium transition-all":"inline-flex items-center gap-1.5 rounded-md px-2.5 py-1.5 text-sm font-medium transition-all"),o=z(()=>e.variant==="ghost"?"text-zinc-600 hover:bg-zinc-100 dark:text-zinc-400 dark:hover:bg-zinc-800":e.variant==="bare"?"gap-2 rounded-lg transition-all focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-1 focus-visible:outline-sky-500":"bg-zinc-100 text-zinc-700 hover:bg-zinc-200 dark:bg-zinc-800 dark:text-zinc-300 dark:hover:bg-zinc-700"),l=async()=>{try{await navigator.clipboard.writeText(e.value),i.value=!0,t.success("Copied!",e.successMessage),n&&clearTimeout(n),n=setTimeout(()=>{i.value=!1},2e3)}catch(a){t.error("Copy failed","Could not copy to clipboard"),console.error("Failed to copy:",a)}};return(a,u)=>(g(),b("button",{type:"button",onClick:l,class:xe([r.value,o.value,i.value&&"ring-2 ring-sky-500/20"]),title:i.value?"Copied!":"Copy to clipboard"},[dt(a.$slots,"default",{copied:i.value},()=>[i.value?(g(),b("svg",OC,[...u[1]||(u[1]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(g(),b("svg",TC,[...u[0]||(u[0]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"},null,-1)])])),s.showLabel?(g(),b("span",PC,X(i.value?"Copied!":"Copy"),1)):G("",!0)])],10,EC))}},jC={class:"flex flex-col gap-3 rounded-2xl border border-zinc-200 bg-white p-5 shadow-sm dark:border-zinc-800 dark:bg-zinc-900 sm:flex-row sm:items-center sm:justify-between"},$C={class:"min-w-0"},RC={class:"text-sm font-medium text-zinc-700 dark:text-zinc-200"},LC={class:"mt-1 font-mono text-sm text-zinc-600 dark:text-zinc-400 truncate"},VC={class:"flex items-center gap-2"},BC={__name:"InfoCard",props:{label:{type:String,required:!0},value:{type:String,required:!0},copyable:{type:Boolean,default:!1},copyMessage:{type:String,default:"Copied!"}},setup(s){return(e,t)=>(g(),b("div",jC,[h("div",$C,[h("p",RC,X(s.label),1),h("p",LC,X(s.value),1)]),h("div",VC,[s.copyable?(g(),_e(cr,{key:0,value:s.value,variant:"ghost","show-label":"","success-message":s.copyMessage},null,8,["value","success-message"])):G("",!0),dt(e.$slots,"actions")])]))}},IC={class:"mx-auto max-w-5xl p-10"},NC={class:"flex gap-3"},FC={key:1,class:"mt-10 grid gap-6 sm:grid-cols-2"},zC={key:2,class:"mt-12 overflow-hidden rounded-3xl bg-gradient-to-br from-sky-600 via-sky-500 to-teal-500 p-12 shadow-2xl shadow-sky-500/20"},UC={class:"space-y-4"},HC={key:0,class:"mt-2 text-sm text-red-600 dark:text-red-400"},WC={class:"flex gap-3 justify-end"},KC={key:0,class:"space-y-6"},qC={class:"text-lg font-semibold text-zinc-900 dark:text-white mb-3"},GC={class:"grid gap-4"},JC={class:"text-sm text-zinc-600 dark:text-zinc-400 font-mono bg-zinc-50 dark:bg-zinc-800 px-3 py-2 rounded-lg"},YC={key:0,class:"grid grid-cols-2 gap-4"},QC={class:"text-sm text-zinc-600 dark:text-zinc-400"},XC={key:0},ZC={class:"text-sm text-zinc-600 dark:text-zinc-400"},e_={class:"text-sm text-zinc-600 dark:text-zinc-400"},t_={class:"flex gap-3 justify-end"},s_={__name:"ProjectsView",setup(s){const e=Qa(),t=Er(),i=ie(!1),n=ie(!1),r=ie(!1),o=ie(""),l=ie(""),a=ie(!1),u=ie(null),c=ie({projects:[]}),d=ie(""),f=ie(null),p=P=>{if(!P)return"Unknown";const S=f.value?.project_types?.[P]?.label;return S||P.split("_").map(O=>O.charAt(0).toUpperCase()+O.slice(1)).join(" ")},v=async()=>{try{const S=await(await fetch("/api/settings/get")).json();c.value.projects=S.projects||[],d.value=S.global?.projects_root&&S.global.projects_root!==""?S.global.projects_root:""}catch(P){console.error("Failed to load settings:",P)}},k=()=>{t.path==="/projects/new"?i.value=!0:e.push("/projects/new")},m=()=>{i.value=!1,t.path==="/projects/new"&&e.push("/projects")},w=P=>{i.value=!1,v(),P?.id?e.push(`/project/${P.id}`):e.push("/projects")},L=()=>{n.value=!1,o.value="",l.value=""},I=P=>{u.value=P,r.value=!0},H=async()=>{l.value="",a.value=!0;try{const P=await fetch("/api/project/import",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_dir:o.value})}),S=await P.text();if(!S){l.value="Server returned empty response",a.value=!1;return}const O=JSON.parse(S);P.ok?(L(),v()):l.value=O.error||"Failed to import project"}catch(P){l.value="Network error: "+P.message}finally{a.value=!1}},N=async()=>{try{const S=await(await fetch("/api/settings-catalog")).json();S.error||(f.value=S)}catch(P){console.error("Failed to load settings catalog:",P)}};return is(()=>{v(),N(),i.value=t.path==="/projects/new"}),Re(()=>t.path,P=>{i.value=P==="/projects/new"},{immediate:!0}),(P,S)=>(g(),b("div",IC,[A(Tr,{title:"Your Projects",description:"Framework projects you've created."},{actions:Z(()=>[h("div",NC,[A(Ke,{size:"lg",variant:"secondary",onClick:S[0]||(S[0]=O=>n.value=!0)},{default:Z(()=>[...S[7]||(S[7]=[de(" Import Project ",-1)])]),_:1}),A(Ke,{size:"lg",onClick:k},{default:Z(()=>[...S[8]||(S[8]=[de(" New Project ",-1)])]),_:1})])]),_:1}),d.value?(g(),_e(BC,{key:0,class:"mt-6",label:"Projects Root",value:d.value,copyable:"","copy-message":"Root path copied"},{actions:Z(()=>[A(Ke,{size:"sm",variant:"secondary",onClick:S[1]||(S[1]=O=>ft(e).push("/settings"))},{default:Z(()=>[...S[9]||(S[9]=[de(" Edit ",-1)])]),_:1})]),_:1},8,["value"])):G("",!0),c.value.projects&&c.value.projects.length>0?(g(),b("div",FC,[(g(!0),b(ye,null,$e(c.value.projects,(O,W)=>(g(),_e(vC,{key:W,project:O,"type-label":p(O.type),onView:oe=>P.$router.push(`/project/${O.id}`),onDetails:I},null,8,["project","type-label","onView"]))),128))])):(g(),b("div",zC,[h("div",{class:"relative"},[S[12]||(S[12]=h("div",{class:"absolute -right-10 -top-10 h-40 w-40 rounded-full bg-white/10 blur-3xl"},null,-1)),S[13]||(S[13]=h("div",{class:"absolute -bottom-10 -left-10 h-40 w-40 rounded-full bg-white/10 blur-3xl"},null,-1)),h("div",{class:"relative text-center"},[S[11]||(S[11]=qa('<div class="mx-auto flex h-16 w-16 items-center justify-center rounded-2xl bg-white/20 backdrop-blur-sm"><svg class="h-8 w-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg></div><h2 class="mt-6 text-3xl font-bold text-white">Ready to start?</h2><p class="mt-3 text-lg text-sky-50"> Create a new Framework project with a sensible structure and best practices built-in. </p>',3)),h("button",{onClick:k,class:"mt-8 inline-flex items-center gap-2 rounded-xl bg-white px-6 py-3 text-base font-semibold text-sky-600 shadow-xl transition-all duration-200 hover:scale-105 hover:shadow-2xl focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-white"},[...S[10]||(S[10]=[h("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),de(" Create Your First Project ",-1)])])])])])),i.value?(g(),_e(XS,{key:3,"projects-root":d.value,onClose:m,onCreated:w},null,8,["projects-root"])):G("",!0),A(tn,{modelValue:n.value,"onUpdate:modelValue":S[3]||(S[3]=O=>n.value=O),title:"Import Existing Project",size:"md"},{actions:Z(()=>[h("div",WC,[A(Ke,{variant:"secondary",onClick:L},{default:Z(()=>[...S[17]||(S[17]=[de(" Cancel ",-1)])]),_:1}),A(Ke,{variant:"primary",onClick:H,disabled:!o.value||a.value},{default:Z(()=>[de(X(a.value?"Importing...":"Import"),1)]),_:1},8,["disabled"])])]),default:Z(()=>[h("div",UC,[S[16]||(S[16]=h("p",{class:"text-sm text-zinc-600 dark:text-zinc-400"}," Import an existing Framework project that isn't in your registry yet. ",-1)),h("div",null,[S[14]||(S[14]=h("label",{for:"import-path",class:"block text-sm font-medium text-zinc-900 dark:text-white mb-2"}," Project Directory Path ",-1)),Ze(h("input",{id:"import-path","onUpdate:modelValue":S[2]||(S[2]=O=>o.value=O),type:"text",placeholder:"/Users/you/projects/my-framework-project",class:xe(["block w-full rounded-lg border-0 px-4 py-2.5 text-zinc-900 shadow-sm ring-1 ring-inset ring-zinc-300 placeholder:text-zinc-400 focus:ring-2 focus:ring-inset focus:ring-sky-600 dark:bg-zinc-800 dark:text-white dark:ring-zinc-700 dark:placeholder:text-zinc-500 dark:focus:ring-sky-500 sm:text-sm sm:leading-6 font-mono",{"ring-red-500 dark:ring-red-500":l.value}])},null,2),[[mr,o.value]]),S[15]||(S[15]=h("p",{class:"mt-2 text-xs text-zinc-500 dark:text-zinc-500"}," Enter the full path to the Framework project directory ",-1)),l.value?(g(),b("p",HC,X(l.value),1)):G("",!0)])])]),_:1},8,["modelValue"]),A(tn,{modelValue:r.value,"onUpdate:modelValue":S[6]||(S[6]=O=>r.value=O),title:"Project Details",size:"lg"},{actions:Z(()=>[h("div",t_,[A(Ke,{variant:"secondary",onClick:S[4]||(S[4]=O=>r.value=!1)},{default:Z(()=>[...S[22]||(S[22]=[de(" Close ",-1)])]),_:1}),A(Ke,{variant:"primary",onClick:S[5]||(S[5]=O=>{P.$router.push(`/project/${u.value.id}`),r.value=!1})},{default:Z(()=>[...S[23]||(S[23]=[de(" View Full Details ",-1)])]),_:1})])]),default:Z(()=>[u.value?(g(),b("div",KC,[h("div",null,[h("h3",qC,X(u.value.name),1),A(tc,{variant:"sky",class:"mb-4"},{default:Z(()=>[de(X(u.value.type),1)]),_:1})]),h("div",GC,[h("div",null,[S[18]||(S[18]=h("label",{class:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1"}," Location ",-1)),h("p",JC,X(u.value.path),1)]),u.value.author?(g(),b("div",YC,[h("div",null,[S[19]||(S[19]=h("label",{class:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1"}," Author ",-1)),h("p",QC,X(u.value.author),1)]),u.value.author_email?(g(),b("div",XC,[S[20]||(S[20]=h("label",{class:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1"}," Email ",-1)),h("p",ZC,X(u.value.author_email),1)])):G("",!0)])):G("",!0),h("div",null,[S[21]||(S[21]=h("label",{class:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1"}," Created ",-1)),h("p",e_,X(u.value.created),1)])])])):G("",!0)]),_:1},8,["modelValue"])]))}},i_=["for"],n_={class:"mt-2 grid grid-cols-1"},r_=["id","value"],o_={key:1,class:"mt-2 text-sm text-gray-500 dark:text-gray-400"},Qs={__name:"Select",props:{id:{type:String,default:()=>`select-${Math.random().toString(36).substr(2,9)}`},modelValue:{type:[String,Number],default:""},label:{type:String,default:null},hint:{type:String,default:null}},emits:["update:modelValue"],setup(s){return(e,t)=>(g(),b("div",null,[s.label?(g(),b("label",{key:0,for:s.id,class:"block text-sm/6 font-medium text-gray-900 dark:text-white"},X(s.label),9,i_)):G("",!0),h("div",n_,[h("select",{id:s.id,value:s.modelValue,onChange:t[0]||(t[0]=i=>e.$emit("update:modelValue",i.target.value)),class:"col-start-1 row-start-1 w-full appearance-none rounded-md bg-white py-1.5 pr-8 pl-3 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 focus-visible:outline-2 focus-visible:-outline-offset-2 focus-visible:outline-sky-600 sm:text-sm/6 dark:bg-white/5 dark:text-white dark:outline-white/10 dark:*:bg-gray-800 dark:focus-visible:outline-sky-500"},[dt(e.$slots,"default")],40,r_),t[1]||(t[1]=h("svg",{viewBox:"0 0 16 16",fill:"currentColor","data-slot":"icon","aria-hidden":"true",class:"pointer-events-none col-start-1 row-start-1 mr-2 size-5 self-center justify-self-end text-gray-500 sm:size-4 dark:text-gray-400"},[h("path",{d:"M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z","clip-rule":"evenodd","fill-rule":"evenodd"})],-1))]),s.hint?(g(),b("p",o_,X(s.hint),1)):G("",!0)]))}},l_={class:"flex items-center gap-3"},a_=["id","name","checked","disabled","aria-label"],c_={key:0,class:"text-sm/6"},u_=["for"],d_=["id"],tt={__name:"Toggle",props:{id:{type:String,default:()=>`toggle-${Math.random().toString(36).substr(2,9)}`},name:{type:String,default:null},modelValue:{type:Boolean,default:!1},label:{type:String,default:null},description:{type:String,default:null},ariaLabel:{type:String,default:null},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(s,{emit:e}){const t=s,i=e,n=r=>{if(!t.disabled){const o=r.target.checked;i("update:modelValue",o),i("change",o)}};return(r,o)=>(g(),b("div",l_,[h("div",{class:xe(["group relative inline-flex w-11 shrink-0 rounded-full p-0.5 inset-ring inset-ring-gray-900/5 outline-offset-2 transition-colors duration-200 ease-in-out dark:inset-ring-white/10",[s.modelValue?"bg-sky-600 outline-sky-600 dark:bg-sky-500 dark:outline-sky-500":"bg-gray-200 outline-sky-600 dark:bg-white/5 dark:outline-sky-500",s.disabled?"opacity-50 cursor-not-allowed":"cursor-pointer"]])},[h("span",{class:xe(["size-5 rounded-full bg-white shadow-xs ring-1 ring-gray-900/5 transition-transform duration-200 ease-in-out",{"translate-x-5":s.modelValue}])},null,2),h("input",{id:s.id,type:"checkbox",name:s.name,checked:s.modelValue,disabled:s.disabled,"aria-label":s.ariaLabel||s.label,class:"absolute inset-0 appearance-none focus:outline-hidden cursor-pointer disabled:cursor-not-allowed",onChange:n},null,40,a_)],2),s.label||s.description?(g(),b("div",c_,[s.label?(g(),b("label",{key:0,for:s.id,class:xe(["font-medium text-gray-900 cursor-pointer dark:text-white",{"cursor-not-allowed opacity-50":s.disabled}])},X(s.label),11,u_)):G("",!0),s.description?(g(),b("p",{key:1,id:`${s.id}-description`,class:"text-gray-500 dark:text-gray-400"},X(s.description),9,d_)):G("",!0)])):G("",!0)]))}},f_={class:"flex items-center"},h_=["id","name","value","checked"],p_=["for"],kl={__name:"Radio",props:{id:{type:String,required:!0},name:{type:String,required:!0},value:{type:[String,Number,Boolean],required:!0},modelValue:{type:[String,Number,Boolean],default:null}},emits:["update:modelValue"],setup(s){return(e,t)=>(g(),b("div",f_,[h("input",{id:s.id,type:"radio",name:s.name,value:s.value,checked:s.modelValue===s.value,onChange:t[0]||(t[0]=i=>e.$emit("update:modelValue",s.value)),class:"relative size-4 appearance-none rounded-full border border-gray-300 bg-white before:absolute before:inset-1 before:rounded-full before:bg-white not-checked:before:hidden checked:border-sky-600 checked:bg-sky-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:before:bg-gray-400 dark:border-white/10 dark:bg-white/5 dark:checked:border-sky-500 dark:checked:bg-sky-500 dark:focus-visible:outline-sky-500 dark:disabled:border-white/5 dark:disabled:bg-white/10 dark:disabled:before:bg-white/20 forced-colors:appearance-auto forced-colors:before:hidden"},null,40,h_),h("label",{for:s.id,class:"ml-3 block text-sm/6 font-medium text-gray-900 dark:text-white"},[dt(e.$slots,"default")],8,p_)]))}},m_={class:"text-sm/6 font-semibold text-gray-900 dark:text-white"},g_={key:0,class:"mt-1 text-sm/6 text-gray-600 dark:text-gray-400"},v_={class:"mt-6 space-y-6"},y_={__name:"RadioGroup",props:{legend:{type:String,required:!0},description:{type:String,default:null}},setup(s){return(e,t)=>(g(),b("fieldset",null,[h("legend",m_,X(s.legend),1),s.description?(g(),b("p",g_,X(s.description),1)):G("",!0),h("div",v_,[dt(e.$slots,"default")])]))}},b_={class:"space-y-4"},k_={class:"flex items-start gap-4"},x_={class:"flex-1"},w_=["onClick"],En={__name:"Repeater",props:{modelValue:{type:Array,default:()=>[]},addLabel:{type:String,default:"Add Item"},defaultItem:{type:[Object,Function],default:()=>({})}},emits:["update:modelValue"],setup(s,{emit:e}){const t=s,i=e,n=()=>{const l=typeof t.defaultItem=="function"?t.defaultItem():{...t.defaultItem,_id:Date.now()};i("update:modelValue",[...t.modelValue,l])},r=l=>{const a=t.modelValue.filter((u,c)=>c!==l);i("update:modelValue",a)},o=(l,a,u)=>{const c=[...t.modelValue];c[l]={...c[l],[a]:u},i("update:modelValue",c)};return(l,a)=>(g(),b("div",b_,[(g(!0),b(ye,null,$e(s.modelValue,(u,c)=>(g(),b("div",{key:u._id||c,class:"rounded-lg border border-gray-200 p-4 dark:border-gray-700"},[h("div",k_,[h("div",x_,[dt(l.$slots,"default",{item:u,index:c,update:(d,f)=>o(c,d,f)})]),h("button",{type:"button",onClick:d=>r(c),class:"shrink-0 rounded-md p-1.5 text-gray-400 transition hover:bg-red-50 hover:text-red-600 dark:hover:bg-red-900/20 dark:hover:text-red-400",title:"Remove"},[...a[0]||(a[0]=[h("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,w_)])]))),128)),A(Ke,{variant:"secondary",size:"sm",onClick:n,class:"inline-flex items-center"},{default:Z(()=>[a[1]||(a[1]=h("svg",{class:"mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)),de(" "+X(s.addLabel),1)]),_:1})]))}};let _u=[],k0=[];(()=>{let s="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,t=0;e<s.length;e++)(e%2?k0:_u).push(t=t+s[e])})();function S_(s){if(s<768)return!1;for(let e=0,t=_u.length;;){let i=e+t>>1;if(s<_u[i])t=i;else if(s>=k0[i])e=i+1;else return!0;if(e==t)return!1}}function ep(s){return s>=127462&&s<=127487}const tp=8205;function C_(s,e,t=!0,i=!0){return(t?x0:__)(s,e,i)}function x0(s,e,t){if(e==s.length)return e;e&&w0(s.charCodeAt(e))&&S0(s.charCodeAt(e-1))&&e--;let i=Pc(s,e);for(e+=sp(i);e<s.length;){let n=Pc(s,e);if(i==tp||n==tp||t&&S_(n))e+=sp(n),i=n;else if(ep(n)){let r=0,o=e-2;for(;o>=0&&ep(Pc(s,o));)r++,o-=2;if(r%2==0)break;e+=2}else break}return e}function __(s,e,t){for(;e>0;){let i=x0(s,e-2,t);if(i<e)return i;e--}return 0}function Pc(s,e){let t=s.charCodeAt(e);if(!S0(t)||e+1==s.length)return t;let i=s.charCodeAt(e+1);return w0(i)?(t-55296<<10)+(i-56320)+65536:t}function w0(s){return s>=56320&&s<57344}function S0(s){return s>=55296&&s<56320}function sp(s){return s<65536?1:2}class nt{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,i){[e,t]=br(this,e,t);let n=[];return this.decompose(0,e,n,2),i.length&&i.decompose(0,i.length,n,3),this.decompose(t,this.length,n,1),fi.from(n,this.length-(t-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=br(this,e,t);let i=[];return this.decompose(e,t,i,0),fi.from(i,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),n=new fo(this),r=new fo(e);for(let o=t,l=t;;){if(n.next(o),r.next(o),o=0,n.lineBreak!=r.lineBreak||n.done!=r.done||n.value!=r.value)return!1;if(l+=n.value.length,n.done||l>=i)return!0}}iter(e=1){return new fo(this,e)}iterRange(e,t=this.length){return new C0(this,e,t)}iterLines(e,t){let i;if(e==null)i=this.iter();else{t==null&&(t=this.lines+1);let n=this.line(e).from;i=this.iterRange(n,Math.max(n,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new _0(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?nt.empty:e.length<=32?new Et(e):fi.from(Et.split(e,[]))}}class Et extends nt{constructor(e,t=A_(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,n){for(let r=0;;r++){let o=this.text[r],l=n+o.length;if((t?i:l)>=e)return new M_(n,l,i,o);n=l+1,i++}}decompose(e,t,i,n){let r=e<=0&&t>=this.length?this:new Et(ip(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(n&1){let o=i.pop(),l=Jl(r.text,o.text.slice(),0,r.length);if(l.length<=32)i.push(new Et(l,o.length+r.length));else{let a=l.length>>1;i.push(new Et(l.slice(0,a)),new Et(l.slice(a)))}}else i.push(r)}replace(e,t,i){if(!(i instanceof Et))return super.replace(e,t,i);[e,t]=br(this,e,t);let n=Jl(this.text,Jl(i.text,ip(this.text,0,e)),t),r=this.length+i.length-(t-e);return n.length<=32?new Et(n,r):fi.from(Et.split(n,[]),r)}sliceString(e,t=this.length,i=`
`){[e,t]=br(this,e,t);let n="";for(let r=0,o=0;r<=t&&o<this.text.length;o++){let l=this.text[o],a=r+l.length;r>e&&o&&(n+=i),e<a&&t>r&&(n+=l.slice(Math.max(0,e-r),t-r)),r=a+1}return n}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let i=[],n=-1;for(let r of e)i.push(r),n+=r.length+1,i.length==32&&(t.push(new Et(i,n)),i=[],n=-1);return n>-1&&t.push(new Et(i,n)),t}}class fi extends nt{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,t,i,n){for(let r=0;;r++){let o=this.children[r],l=n+o.length,a=i+o.lines-1;if((t?a:l)>=e)return o.lineInner(e,t,i,n);n=l+1,i=a+1}}decompose(e,t,i,n){for(let r=0,o=0;o<=t&&r<this.children.length;r++){let l=this.children[r],a=o+l.length;if(e<=a&&t>=o){let u=n&((o<=e?1:0)|(a>=t?2:0));o>=e&&a<=t&&!u?i.push(l):l.decompose(e-o,t-o,i,u)}o=a+1}}replace(e,t,i){if([e,t]=br(this,e,t),i.lines<this.lines)for(let n=0,r=0;n<this.children.length;n++){let o=this.children[n],l=r+o.length;if(e>=r&&t<=l){let a=o.replace(e-r,t-r,i),u=this.lines-o.lines+a.lines;if(a.lines<u>>4&&a.lines>u>>6){let c=this.children.slice();return c[n]=a,new fi(c,this.length-(t-e)+i.length)}return super.replace(r,l,a)}r=l+1}return super.replace(e,t,i)}sliceString(e,t=this.length,i=`
`){[e,t]=br(this,e,t);let n="";for(let r=0,o=0;r<this.children.length&&o<=t;r++){let l=this.children[r],a=o+l.length;o>e&&r&&(n+=i),e<a&&t>o&&(n+=l.sliceString(e-o,t-o,i)),o=a+1}return n}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof fi))return 0;let i=0,[n,r,o,l]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;n+=t,r+=t){if(n==o||r==l)return i;let a=this.children[n],u=e.children[r];if(a!=u)return i+a.scanIdentical(u,t);i+=a.length+1}}static from(e,t=e.reduce((i,n)=>i+n.length+1,-1)){let i=0;for(let p of e)i+=p.lines;if(i<32){let p=[];for(let v of e)v.flatten(p);return new Et(p,t)}let n=Math.max(32,i>>5),r=n<<1,o=n>>1,l=[],a=0,u=-1,c=[];function d(p){let v;if(p.lines>r&&p instanceof fi)for(let k of p.children)d(k);else p.lines>o&&(a>o||!a)?(f(),l.push(p)):p instanceof Et&&a&&(v=c[c.length-1])instanceof Et&&p.lines+v.lines<=32?(a+=p.lines,u+=p.length+1,c[c.length-1]=new Et(v.text.concat(p.text),v.length+1+p.length)):(a+p.lines>n&&f(),a+=p.lines,u+=p.length+1,c.push(p))}function f(){a!=0&&(l.push(c.length==1?c[0]:fi.from(c,u)),u=-1,a=c.length=0)}for(let p of e)d(p);return f(),l.length==1?l[0]:new fi(l,t)}}nt.empty=new Et([""],0);function A_(s){let e=-1;for(let t of s)e+=t.length+1;return e}function Jl(s,e,t=0,i=1e9){for(let n=0,r=0,o=!0;r<s.length&&n<=i;r++){let l=s[r],a=n+l.length;a>=t&&(a>i&&(l=l.slice(0,i-n)),n<t&&(l=l.slice(t-n)),o?(e[e.length-1]+=l,o=!1):e.push(l)),n=a+1}return e}function ip(s,e,t){return Jl(s,[""],e,t)}class fo{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Et?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,n=this.nodes[i],r=this.offsets[i],o=r>>1,l=n instanceof Et?n.text.length:n.children.length;if(o==(t>0?l:0)){if(i==0)return this.done=!0,this.value="",this;t>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((r&1)==(t>0?0:1)){if(this.offsets[i]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(n instanceof Et){let a=n.text[o+(t<0?-1:0)];if(this.offsets[i]+=t,a.length>Math.max(0,e))return this.value=e==0?a:t>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=n.children[o+(t<0?-1:0)];e>a.length?(e-=a.length,this.offsets[i]+=t):(t<0&&this.offsets[i]--,this.nodes.push(a),this.offsets.push(t>0?1:(a instanceof Et?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class C0{constructor(e,t,i){this.value="",this.done=!1,this.cursor=new fo(e,t>i?-1:1),this.pos=t>i?e.length:0,this.from=Math.min(t,i),this.to=Math.max(t,i)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let i=t<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:n}=this.cursor.next(e);return this.pos+=(n.length+e)*t,this.value=n.length<=i?n:t<0?n.slice(n.length-i):n.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class _0{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:i,value:n}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=n,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(nt.prototype[Symbol.iterator]=function(){return this.iter()},fo.prototype[Symbol.iterator]=C0.prototype[Symbol.iterator]=_0.prototype[Symbol.iterator]=function(){return this});class M_{constructor(e,t,i,n){this.from=e,this.to=t,this.number=i,this.text=n}get length(){return this.to-this.from}}function br(s,e,t){return e=Math.max(0,Math.min(s.length,e)),[e,Math.max(e,Math.min(s.length,t))]}function Jt(s,e,t=!0,i=!0){return C_(s,e,t,i)}function D_(s){return s>=56320&&s<57344}function E_(s){return s>=55296&&s<56320}function ys(s,e){let t=s.charCodeAt(e);if(!E_(t)||e+1==s.length)return t;let i=s.charCodeAt(e+1);return D_(i)?(t-55296<<10)+(i-56320)+65536:t}function Wd(s){return s<=65535?String.fromCharCode(s):(s-=65536,String.fromCharCode((s>>10)+55296,(s&1023)+56320))}function hi(s){return s<65536?1:2}const Au=/\r\n?|\n/;var hs=(function(s){return s[s.Simple=0]="Simple",s[s.TrackDel=1]="TrackDel",s[s.TrackBefore=2]="TrackBefore",s[s.TrackAfter=3]="TrackAfter",s})(hs||(hs={}));class yi{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,n=0;t<this.sections.length;){let r=this.sections[t++],o=this.sections[t++];o<0?(e(i,n,r),n+=r):n+=o,i+=r}}iterChangedRanges(e,t=!1){Mu(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],n=this.sections[t++];n<0?e.push(i,n):e.push(n,i)}return new yi(e)}composeDesc(e){return this.empty?e:e.empty?this:A0(this,e)}mapDesc(e,t=!1){return e.empty?this:Du(this,e,t)}mapPos(e,t=-1,i=hs.Simple){let n=0,r=0;for(let o=0;o<this.sections.length;){let l=this.sections[o++],a=this.sections[o++],u=n+l;if(a<0){if(u>e)return r+(e-n);r+=l}else{if(i!=hs.Simple&&u>=e&&(i==hs.TrackDel&&n<e&&u>e||i==hs.TrackBefore&&n<e||i==hs.TrackAfter&&u>e))return null;if(u>e||u==e&&t<0&&!l)return e==n||t<0?r:r+a;r+=a}n=u}if(e>n)throw new RangeError(`Position ${e} is out of range for changeset of length ${n}`);return r}touchesRange(e,t=e){for(let i=0,n=0;i<this.sections.length&&n<=t;){let r=this.sections[i++],o=this.sections[i++],l=n+r;if(o>=0&&n<=t&&l>=e)return n<e&&l>t?"cover":!0;n=l}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],n=this.sections[t++];e+=(e?" ":"")+i+(n>=0?":"+n:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new yi(e)}static create(e){return new yi(e)}}class Lt extends yi{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return Mu(this,(t,i,n,r,o)=>e=e.replace(n,n+(i-t),o),!1),e}mapDesc(e,t=!1){return Du(this,e,t,!0)}invert(e){let t=this.sections.slice(),i=[];for(let n=0,r=0;n<t.length;n+=2){let o=t[n],l=t[n+1];if(l>=0){t[n]=l,t[n+1]=o;let a=n>>1;for(;i.length<a;)i.push(nt.empty);i.push(o?e.slice(r,r+o):nt.empty)}r+=o}return new Lt(t,i)}compose(e){return this.empty?e:e.empty?this:A0(this,e,!0)}map(e,t=!1){return e.empty?this:Du(this,e,t,!0)}iterChanges(e,t=!1){Mu(this,e,t)}get desc(){return yi.create(this.sections)}filter(e){let t=[],i=[],n=[],r=new To(this);e:for(let o=0,l=0;;){let a=o==e.length?1e9:e[o++];for(;l<a||l==a&&r.len==0;){if(r.done)break e;let c=Math.min(r.len,a-l);Qt(n,c,-1);let d=r.ins==-1?-1:r.off==0?r.ins:0;Qt(t,c,d),d>0&&Yi(i,t,r.text),r.forward(c),l+=c}let u=e[o++];for(;l<u;){if(r.done)break e;let c=Math.min(r.len,u-l);Qt(t,c,-1),Qt(n,c,r.ins==-1?-1:r.off==0?r.ins:0),r.forward(c),l+=c}}return{changes:new Lt(t,i),filtered:yi.create(n)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],n=this.sections[t+1];n<0?e.push(i):n==0?e.push([i]):e.push([i].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,i){let n=[],r=[],o=0,l=null;function a(c=!1){if(!c&&!n.length)return;o<t&&Qt(n,t-o,-1);let d=new Lt(n,r);l=l?l.compose(d.map(l)):d,n=[],r=[],o=0}function u(c){if(Array.isArray(c))for(let d of c)u(d);else if(c instanceof Lt){if(c.length!=t)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${t})`);a(),l=l?l.compose(c.map(l)):c}else{let{from:d,to:f=d,insert:p}=c;if(d>f||d<0||f>t)throw new RangeError(`Invalid change range ${d} to ${f} (in doc of length ${t})`);let v=p?typeof p=="string"?nt.of(p.split(i||Au)):p:nt.empty,k=v.length;if(d==f&&k==0)return;d<o&&a(),d>o&&Qt(n,d-o,-1),Qt(n,f-d,k),Yi(r,n,v),o=f}}return u(e),a(!l),l}static empty(e){return new Lt(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],i=[];for(let n=0;n<e.length;n++){let r=e[n];if(typeof r=="number")t.push(r,-1);else{if(!Array.isArray(r)||typeof r[0]!="number"||r.some((o,l)=>l&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(r.length==1)t.push(r[0],0);else{for(;i.length<n;)i.push(nt.empty);i[n]=nt.of(r.slice(1)),t.push(r[0],i[n].length)}}}return new Lt(t,i)}static createSet(e,t){return new Lt(e,t)}}function Qt(s,e,t,i=!1){if(e==0&&t<=0)return;let n=s.length-2;n>=0&&t<=0&&t==s[n+1]?s[n]+=e:n>=0&&e==0&&s[n]==0?s[n+1]+=t:i?(s[n]+=e,s[n+1]+=t):s.push(e,t)}function Yi(s,e,t){if(t.length==0)return;let i=e.length-2>>1;if(i<s.length)s[s.length-1]=s[s.length-1].append(t);else{for(;s.length<i;)s.push(nt.empty);s.push(t)}}function Mu(s,e,t){let i=s.inserted;for(let n=0,r=0,o=0;o<s.sections.length;){let l=s.sections[o++],a=s.sections[o++];if(a<0)n+=l,r+=l;else{let u=n,c=r,d=nt.empty;for(;u+=l,c+=a,a&&i&&(d=d.append(i[o-2>>1])),!(t||o==s.sections.length||s.sections[o+1]<0);)l=s.sections[o++],a=s.sections[o++];e(n,u,r,c,d),n=u,r=c}}}function Du(s,e,t,i=!1){let n=[],r=i?[]:null,o=new To(s),l=new To(e);for(let a=-1;;){if(o.done&&l.len||l.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&l.ins==-1){let u=Math.min(o.len,l.len);Qt(n,u,-1),o.forward(u),l.forward(u)}else if(l.ins>=0&&(o.ins<0||a==o.i||o.off==0&&(l.len<o.len||l.len==o.len&&!t))){let u=l.len;for(Qt(n,l.ins,-1);u;){let c=Math.min(o.len,u);o.ins>=0&&a<o.i&&o.len<=c&&(Qt(n,0,o.ins),r&&Yi(r,n,o.text),a=o.i),o.forward(c),u-=c}l.next()}else if(o.ins>=0){let u=0,c=o.len;for(;c;)if(l.ins==-1){let d=Math.min(c,l.len);u+=d,c-=d,l.forward(d)}else if(l.ins==0&&l.len<c)c-=l.len,l.next();else break;Qt(n,u,a<o.i?o.ins:0),r&&a<o.i&&Yi(r,n,o.text),a=o.i,o.forward(o.len-c)}else{if(o.done&&l.done)return r?Lt.createSet(n,r):yi.create(n);throw new Error("Mismatched change set lengths")}}}function A0(s,e,t=!1){let i=[],n=t?[]:null,r=new To(s),o=new To(e);for(let l=!1;;){if(r.done&&o.done)return n?Lt.createSet(i,n):yi.create(i);if(r.ins==0)Qt(i,r.len,0,l),r.next();else if(o.len==0&&!o.done)Qt(i,0,o.ins,l),n&&Yi(n,i,o.text),o.next();else{if(r.done||o.done)throw new Error("Mismatched change set lengths");{let a=Math.min(r.len2,o.len),u=i.length;if(r.ins==-1){let c=o.ins==-1?-1:o.off?0:o.ins;Qt(i,a,c,l),n&&c&&Yi(n,i,o.text)}else o.ins==-1?(Qt(i,r.off?0:r.len,a,l),n&&Yi(n,i,r.textBit(a))):(Qt(i,r.off?0:r.len,o.off?0:o.ins,l),n&&!o.off&&Yi(n,i,o.text));l=(r.ins>a||o.ins>=0&&o.len>a)&&(l||i.length>u),r.forward2(a),o.forward(a)}}}}class To{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?nt.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?nt.empty:t[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Tn{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let i,n;return this.empty?i=n=e.mapPos(this.from,t):(i=e.mapPos(this.from,1),n=e.mapPos(this.to,-1)),i==this.from&&n==this.to?this:new Tn(i,n,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return ue.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return ue.range(this.anchor,i)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return ue.range(e.anchor,e.head)}static create(e,t,i){return new Tn(e,t,i)}}class ue{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:ue.create(this.ranges.map(i=>i.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new ue([this.main],0)}addRange(e,t=!0){return ue.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let i=this.ranges.slice();return i[t]=e,ue.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new ue(e.ranges.map(t=>Tn.fromJSON(t)),e.main)}static single(e,t=e){return new ue([ue.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,n=0;n<e.length;n++){let r=e[n];if(r.empty?r.from<=i:r.from<i)return ue.normalized(e.slice(),t);i=r.to}return new ue(e,t)}static cursor(e,t=0,i,n){return Tn.create(e,e,(t==0?0:t<0?8:16)|(i==null?7:Math.min(6,i))|(n??16777215)<<6)}static range(e,t,i,n){let r=(i??16777215)<<6|(n==null?7:Math.min(6,n));return t<e?Tn.create(t,e,48|r):Tn.create(e,t,(t>e?8:0)|r)}static normalized(e,t=0){let i=e[t];e.sort((n,r)=>n.from-r.from),t=e.indexOf(i);for(let n=1;n<e.length;n++){let r=e[n],o=e[n-1];if(r.empty?r.from<=o.to:r.from<o.to){let l=o.from,a=Math.max(r.to,o.to);n<=t&&t--,e.splice(--n,2,r.anchor>r.head?ue.range(a,l):ue.range(l,a))}}return new ue(e,t)}}function M0(s,e){for(let t of s.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let Kd=0;class Te{constructor(e,t,i,n,r){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=n,this.id=Kd++,this.default=e([]),this.extensions=typeof r=="function"?r(this):r}get reader(){return this}static define(e={}){return new Te(e.combine||(t=>t),e.compareInput||((t,i)=>t===i),e.compare||(e.combine?(t,i)=>t===i:qd),!!e.static,e.enables)}of(e){return new Yl([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Yl(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Yl(e,this,2,t)}from(e,t){return t||(t=i=>i),this.compute([e],i=>t(i.field(e)))}}function qd(s,e){return s==e||s.length==e.length&&s.every((t,i)=>t===e[i])}class Yl{constructor(e,t,i,n){this.dependencies=e,this.facet=t,this.type=i,this.value=n,this.id=Kd++}dynamicSlot(e){var t;let i=this.value,n=this.facet.compareInput,r=this.id,o=e[r]>>1,l=this.type==2,a=!1,u=!1,c=[];for(let d of this.dependencies)d=="doc"?a=!0:d=="selection"?u=!0:(((t=e[d.id])!==null&&t!==void 0?t:1)&1)==0&&c.push(e[d.id]);return{create(d){return d.values[o]=i(d),1},update(d,f){if(a&&f.docChanged||u&&(f.docChanged||f.selection)||Eu(d,c)){let p=i(d);if(l?!np(p,d.values[o],n):!n(p,d.values[o]))return d.values[o]=p,1}return 0},reconfigure:(d,f)=>{let p,v=f.config.address[r];if(v!=null){let k=va(f,v);if(this.dependencies.every(m=>m instanceof Te?f.facet(m)===d.facet(m):m instanceof Yt?f.field(m,!1)==d.field(m,!1):!0)||(l?np(p=i(d),k,n):n(p=i(d),k)))return d.values[o]=k,0}else p=i(d);return d.values[o]=p,1}}}}function np(s,e,t){if(s.length!=e.length)return!1;for(let i=0;i<s.length;i++)if(!t(s[i],e[i]))return!1;return!0}function Eu(s,e){let t=!1;for(let i of e)ho(s,i)&1&&(t=!0);return t}function T_(s,e,t){let i=t.map(a=>s[a.id]),n=t.map(a=>a.type),r=i.filter(a=>!(a&1)),o=s[e.id]>>1;function l(a){let u=[];for(let c=0;c<i.length;c++){let d=va(a,i[c]);if(n[c]==2)for(let f of d)u.push(f);else u.push(d)}return e.combine(u)}return{create(a){for(let u of i)ho(a,u);return a.values[o]=l(a),1},update(a,u){if(!Eu(a,r))return 0;let c=l(a);return e.compare(c,a.values[o])?0:(a.values[o]=c,1)},reconfigure(a,u){let c=Eu(a,i),d=u.config.facets[e.id],f=u.facet(e);if(d&&!c&&qd(t,d))return a.values[o]=f,0;let p=l(a);return e.compare(p,f)?(a.values[o]=f,0):(a.values[o]=p,1)}}}const xl=Te.define({static:!0});class Yt{constructor(e,t,i,n,r){this.id=e,this.createF=t,this.updateF=i,this.compareF=n,this.spec=r,this.provides=void 0}static define(e){let t=new Yt(Kd++,e.create,e.update,e.compare||((i,n)=>i===n),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(xl).find(i=>i.field==this);return(t?.create||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:i=>(i.values[t]=this.create(i),1),update:(i,n)=>{let r=i.values[t],o=this.updateF(r,n);return this.compareF(r,o)?0:(i.values[t]=o,1)},reconfigure:(i,n)=>{let r=i.facet(xl),o=n.facet(xl),l;return(l=r.find(a=>a.field==this))&&l!=o.find(a=>a.field==this)?(i.values[t]=l.create(i),1):n.config.address[this.id]!=null?(i.values[t]=n.field(this),0):(i.values[t]=this.create(i),1)}}}init(e){return[this,xl.of({field:this,create:e})]}get extension(){return this}}const An={lowest:4,low:3,default:2,high:1,highest:0};function Wr(s){return e=>new D0(e,s)}const Un={highest:Wr(An.highest),high:Wr(An.high),default:Wr(An.default),low:Wr(An.low),lowest:Wr(An.lowest)};class D0{constructor(e,t){this.inner=e,this.prec=t}}class sc{of(e){return new Tu(this,e)}reconfigure(e){return sc.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Tu{constructor(e,t){this.compartment=e,this.inner=t}}class ga{constructor(e,t,i,n,r,o){for(this.base=e,this.compartments=t,this.dynamicSlots=i,this.address=n,this.staticValues=r,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,i){let n=[],r=Object.create(null),o=new Map;for(let f of O_(e,t,o))f instanceof Yt?n.push(f):(r[f.facet.id]||(r[f.facet.id]=[])).push(f);let l=Object.create(null),a=[],u=[];for(let f of n)l[f.id]=u.length<<1,u.push(p=>f.slot(p));let c=i?.config.facets;for(let f in r){let p=r[f],v=p[0].facet,k=c&&c[f]||[];if(p.every(m=>m.type==0))if(l[v.id]=a.length<<1|1,qd(k,p))a.push(i.facet(v));else{let m=v.combine(p.map(w=>w.value));a.push(i&&v.compare(m,i.facet(v))?i.facet(v):m)}else{for(let m of p)m.type==0?(l[m.id]=a.length<<1|1,a.push(m.value)):(l[m.id]=u.length<<1,u.push(w=>m.dynamicSlot(w)));l[v.id]=u.length<<1,u.push(m=>T_(m,v,p))}}let d=u.map(f=>f(l));return new ga(e,o,d,l,a,r)}}function O_(s,e,t){let i=[[],[],[],[],[]],n=new Map;function r(o,l){let a=n.get(o);if(a!=null){if(a<=l)return;let u=i[a].indexOf(o);u>-1&&i[a].splice(u,1),o instanceof Tu&&t.delete(o.compartment)}if(n.set(o,l),Array.isArray(o))for(let u of o)r(u,l);else if(o instanceof Tu){if(t.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(o.compartment)||o.inner;t.set(o.compartment,u),r(u,l)}else if(o instanceof D0)r(o.inner,o.prec);else if(o instanceof Yt)i[l].push(o),o.provides&&r(o.provides,l);else if(o instanceof Yl)i[l].push(o),o.facet.extensions&&r(o.facet.extensions,An.default);else{let u=o.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);r(u,l)}}return r(s,An.default),i.reduce((o,l)=>o.concat(l))}function ho(s,e){if(e&1)return 2;let t=e>>1,i=s.status[t];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;s.status[t]=4;let n=s.computeSlot(s,s.config.dynamicSlots[t]);return s.status[t]=2|n}function va(s,e){return e&1?s.config.staticValues[e>>1]:s.values[e>>1]}const E0=Te.define(),Ou=Te.define({combine:s=>s.some(e=>e),static:!0}),T0=Te.define({combine:s=>s.length?s[0]:void 0,static:!0}),O0=Te.define(),P0=Te.define(),j0=Te.define(),$0=Te.define({combine:s=>s.length?s[0]:!1});class Bi{constructor(e,t){this.type=e,this.value=t}static define(){return new P_}}class P_{of(e){return new Bi(this,e)}}class j_{constructor(e){this.map=e}of(e){return new Xe(this,e)}}class Xe{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new Xe(this.type,t)}is(e){return this.type==e}static define(e={}){return new j_(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let i=[];for(let n of e){let r=n.map(t);r&&i.push(r)}return i}}Xe.reconfigure=Xe.define();Xe.appendConfig=Xe.define();class Vt{constructor(e,t,i,n,r,o){this.startState=e,this.changes=t,this.selection=i,this.effects=n,this.annotations=r,this.scrollIntoView=o,this._doc=null,this._state=null,i&&M0(i,t.newLength),r.some(l=>l.type==Vt.time)||(this.annotations=r.concat(Vt.time.of(Date.now())))}static create(e,t,i,n,r,o){return new Vt(e,t,i,n,r,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Vt.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}Vt.time=Bi.define();Vt.userEvent=Bi.define();Vt.addToHistory=Bi.define();Vt.remote=Bi.define();function $_(s,e){let t=[];for(let i=0,n=0;;){let r,o;if(i<s.length&&(n==e.length||e[n]>=s[i]))r=s[i++],o=s[i++];else if(n<e.length)r=e[n++],o=e[n++];else return t;!t.length||t[t.length-1]<r?t.push(r,o):t[t.length-1]<o&&(t[t.length-1]=o)}}function R0(s,e,t){var i;let n,r,o;return t?(n=e.changes,r=Lt.empty(e.changes.length),o=s.changes.compose(e.changes)):(n=e.changes.map(s.changes),r=s.changes.mapDesc(e.changes,!0),o=s.changes.compose(n)),{changes:o,selection:e.selection?e.selection.map(r):(i=s.selection)===null||i===void 0?void 0:i.map(n),effects:Xe.mapEffects(s.effects,n).concat(Xe.mapEffects(e.effects,r)),annotations:s.annotations.length?s.annotations.concat(e.annotations):e.annotations,scrollIntoView:s.scrollIntoView||e.scrollIntoView}}function Pu(s,e,t){let i=e.selection,n=ur(e.annotations);return e.userEvent&&(n=n.concat(Vt.userEvent.of(e.userEvent))),{changes:e.changes instanceof Lt?e.changes:Lt.of(e.changes||[],t,s.facet(T0)),selection:i&&(i instanceof ue?i:ue.single(i.anchor,i.head)),effects:ur(e.effects),annotations:n,scrollIntoView:!!e.scrollIntoView}}function L0(s,e,t){let i=Pu(s,e.length?e[0]:{},s.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let r=1;r<e.length;r++){e[r].filter===!1&&(t=!1);let o=!!e[r].sequential;i=R0(i,Pu(s,e[r],o?i.changes.newLength:s.doc.length),o)}let n=Vt.create(s,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return L_(t?R_(n):n)}function R_(s){let e=s.startState,t=!0;for(let n of e.facet(O0)){let r=n(s);if(r===!1){t=!1;break}Array.isArray(r)&&(t=t===!0?r:$_(t,r))}if(t!==!0){let n,r;if(t===!1)r=s.changes.invertedDesc,n=Lt.empty(e.doc.length);else{let o=s.changes.filter(t);n=o.changes,r=o.filtered.mapDesc(o.changes).invertedDesc}s=Vt.create(e,n,s.selection&&s.selection.map(r),Xe.mapEffects(s.effects,r),s.annotations,s.scrollIntoView)}let i=e.facet(P0);for(let n=i.length-1;n>=0;n--){let r=i[n](s);r instanceof Vt?s=r:Array.isArray(r)&&r.length==1&&r[0]instanceof Vt?s=r[0]:s=L0(e,ur(r),!1)}return s}function L_(s){let e=s.startState,t=e.facet(j0),i=s;for(let n=t.length-1;n>=0;n--){let r=t[n](s);r&&Object.keys(r).length&&(i=R0(i,Pu(e,r,s.changes.newLength),!0))}return i==s?s:Vt.create(e,s.changes,s.selection,i.effects,i.annotations,i.scrollIntoView)}const V_=[];function ur(s){return s==null?V_:Array.isArray(s)?s:[s]}var Ct=(function(s){return s[s.Word=0]="Word",s[s.Space=1]="Space",s[s.Other=2]="Other",s})(Ct||(Ct={}));const B_=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let ju;try{ju=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function I_(s){if(ju)return ju.test(s);for(let e=0;e<s.length;e++){let t=s[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||B_.test(t)))return!0}return!1}function N_(s){return e=>{if(!/\S/.test(e))return Ct.Space;if(I_(e))return Ct.Word;for(let t=0;t<s.length;t++)if(e.indexOf(s[t])>-1)return Ct.Word;return Ct.Other}}class st{constructor(e,t,i,n,r,o){this.config=e,this.doc=t,this.selection=i,this.values=n,this.status=e.statusTemplate.slice(),this.computeSlot=r,o&&(o._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)ho(this,l<<1);this.computeSlot=null}field(e,t=!0){let i=this.config.address[e.id];if(i==null){if(t)throw new RangeError("Field is not present in this state");return}return ho(this,i),va(this,i)}update(...e){return L0(this,e,!0)}applyTransaction(e){let t=this.config,{base:i,compartments:n}=t;for(let l of e.effects)l.is(sc.reconfigure)?(t&&(n=new Map,t.compartments.forEach((a,u)=>n.set(u,a)),t=null),n.set(l.value.compartment,l.value.extension)):l.is(Xe.reconfigure)?(t=null,i=l.value):l.is(Xe.appendConfig)&&(t=null,i=ur(i).concat(l.value));let r;t?r=e.startState.values.slice():(t=ga.resolve(i,n,this),r=new st(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(a,u)=>u.reconfigure(a,this),null).values);let o=e.startState.facet(Ou)?e.newSelection:e.newSelection.asSingle();new st(t,e.newDoc,o,r,(l,a)=>a.update(l,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:ue.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,i=e(t.ranges[0]),n=this.changes(i.changes),r=[i.range],o=ur(i.effects);for(let l=1;l<t.ranges.length;l++){let a=e(t.ranges[l]),u=this.changes(a.changes),c=u.map(n);for(let f=0;f<l;f++)r[f]=r[f].map(c);let d=n.mapDesc(u,!0);r.push(a.range.map(d)),n=n.compose(c),o=Xe.mapEffects(o,c).concat(Xe.mapEffects(ur(a.effects),d))}return{changes:n,selection:ue.create(r,t.mainIndex),effects:o}}changes(e=[]){return e instanceof Lt?e:Lt.of(e,this.doc.length,this.facet(st.lineSeparator))}toText(e){return nt.of(e.split(this.facet(st.lineSeparator)||Au))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(ho(this,t),va(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let n=e[i];n instanceof Yt&&this.config.address[n.id]!=null&&(t[i]=n.spec.toJSON(this.field(e[i]),this))}return t}static fromJSON(e,t={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let n=[];if(i){for(let r in i)if(Object.prototype.hasOwnProperty.call(e,r)){let o=i[r],l=e[r];n.push(o.init(a=>o.spec.fromJSON(l,a)))}}return st.create({doc:e.doc,selection:ue.fromJSON(e.selection),extensions:t.extensions?n.concat([t.extensions]):n})}static create(e={}){let t=ga.resolve(e.extensions||[],new Map),i=e.doc instanceof nt?e.doc:nt.of((e.doc||"").split(t.staticFacet(st.lineSeparator)||Au)),n=e.selection?e.selection instanceof ue?e.selection:ue.single(e.selection.anchor,e.selection.head):ue.single(0);return M0(n,i.length),t.staticFacet(Ou)||(n=n.asSingle()),new st(t,i,n,t.dynamicSlots.map(()=>null),(r,o)=>o.create(r),null)}get tabSize(){return this.facet(st.tabSize)}get lineBreak(){return this.facet(st.lineSeparator)||`
`}get readOnly(){return this.facet($0)}phrase(e,...t){for(let i of this.facet(st.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(i,n)=>{if(n=="$")return"$";let r=+(n||1);return!r||r>t.length?i:t[r-1]})),e}languageDataAt(e,t,i=-1){let n=[];for(let r of this.facet(E0))for(let o of r(this,t,i))Object.prototype.hasOwnProperty.call(o,e)&&n.push(o[e]);return n}charCategorizer(e){return N_(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:i,length:n}=this.doc.lineAt(e),r=this.charCategorizer(e),o=e-i,l=e-i;for(;o>0;){let a=Jt(t,o,!1);if(r(t.slice(a,o))!=Ct.Word)break;o=a}for(;l<n;){let a=Jt(t,l);if(r(t.slice(l,a))!=Ct.Word)break;l=a}return o==l?null:ue.range(o+i,l+i)}}st.allowMultipleSelections=Ou;st.tabSize=Te.define({combine:s=>s.length?s[0]:4});st.lineSeparator=T0;st.readOnly=$0;st.phrases=Te.define({compare(s,e){let t=Object.keys(s),i=Object.keys(e);return t.length==i.length&&t.every(n=>s[n]==e[n])}});st.languageData=E0;st.changeFilter=O0;st.transactionFilter=P0;st.transactionExtender=j0;sc.reconfigure=Xe.define();function ki(s,e,t={}){let i={};for(let n of s)for(let r of Object.keys(n)){let o=n[r],l=i[r];if(l===void 0)i[r]=o;else if(!(l===o||o===void 0))if(Object.hasOwnProperty.call(t,r))i[r]=t[r](l,o);else throw new Error("Config merge conflict for field "+r)}for(let n in e)i[n]===void 0&&(i[n]=e[n]);return i}class Ln{eq(e){return this==e}range(e,t=e){return $u.create(e,t,this)}}Ln.prototype.startSide=Ln.prototype.endSide=0;Ln.prototype.point=!1;Ln.prototype.mapMode=hs.TrackDel;let $u=class V0{constructor(e,t,i){this.from=e,this.to=t,this.value=i}static create(e,t,i){return new V0(e,t,i)}};function Ru(s,e){return s.from-e.from||s.value.startSide-e.value.startSide}class Gd{constructor(e,t,i,n){this.from=e,this.to=t,this.value=i,this.maxPoint=n}get length(){return this.to[this.to.length-1]}findIndex(e,t,i,n=0){let r=i?this.to:this.from;for(let o=n,l=r.length;;){if(o==l)return o;let a=o+l>>1,u=r[a]-e||(i?this.value[a].endSide:this.value[a].startSide)-t;if(a==o)return u>=0?o:l;u>=0?l=a:o=a+1}}between(e,t,i,n){for(let r=this.findIndex(t,-1e9,!0),o=this.findIndex(i,1e9,!1,r);r<o;r++)if(n(this.from[r]+e,this.to[r]+e,this.value[r])===!1)return!1}map(e,t){let i=[],n=[],r=[],o=-1,l=-1;for(let a=0;a<this.value.length;a++){let u=this.value[a],c=this.from[a]+e,d=this.to[a]+e,f,p;if(c==d){let v=t.mapPos(c,u.startSide,u.mapMode);if(v==null||(f=p=v,u.startSide!=u.endSide&&(p=t.mapPos(c,u.endSide),p<f)))continue}else if(f=t.mapPos(c,u.startSide),p=t.mapPos(d,u.endSide),f>p||f==p&&u.startSide>0&&u.endSide<=0)continue;(p-f||u.endSide-u.startSide)<0||(o<0&&(o=f),u.point&&(l=Math.max(l,p-f)),i.push(u),n.push(f-o),r.push(p-o))}return{mapped:i.length?new Gd(n,r,i,l):null,pos:o}}}class it{constructor(e,t,i,n){this.chunkPos=e,this.chunk=t,this.nextLayer=i,this.maxPoint=n}static create(e,t,i,n){return new it(e,t,i,n)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:i=!1,filterFrom:n=0,filterTo:r=this.length}=e,o=e.filter;if(t.length==0&&!o)return this;if(i&&(t=t.slice().sort(Ru)),this.isEmpty)return t.length?it.of(t):this;let l=new B0(this,null,-1).goto(0),a=0,u=[],c=new $i;for(;l.value||a<t.length;)if(a<t.length&&(l.from-t[a].from||l.startSide-t[a].value.startSide)>=0){let d=t[a++];c.addInner(d.from,d.to,d.value)||u.push(d)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(a==t.length||this.chunkEnd(l.chunkIndex)<t[a].from)&&(!o||n>this.chunkEnd(l.chunkIndex)||r<this.chunkPos[l.chunkIndex])&&c.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!o||n>l.to||r<l.from||o(l.from,l.to,l.value))&&(c.addInner(l.from,l.to,l.value)||u.push($u.create(l.from,l.to,l.value))),l.next());return c.finishInner(this.nextLayer.isEmpty&&!u.length?it.empty:this.nextLayer.update({add:u,filter:o,filterFrom:n,filterTo:r}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],i=[],n=-1;for(let o=0;o<this.chunk.length;o++){let l=this.chunkPos[o],a=this.chunk[o],u=e.touchesRange(l,l+a.length);if(u===!1)n=Math.max(n,a.maxPoint),t.push(a),i.push(e.mapPos(l));else if(u===!0){let{mapped:c,pos:d}=a.map(l,e);c&&(n=Math.max(n,c.maxPoint),t.push(c),i.push(d))}}let r=this.nextLayer.map(e);return t.length==0?r:new it(i,t,r||it.empty,n)}between(e,t,i){if(!this.isEmpty){for(let n=0;n<this.chunk.length;n++){let r=this.chunkPos[n],o=this.chunk[n];if(t>=r&&e<=r+o.length&&o.between(r,e-r,t-r,i)===!1)return}this.nextLayer.between(e,t,i)}}iter(e=0){return Oo.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return Oo.from(e).goto(t)}static compare(e,t,i,n,r=-1){let o=e.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=r),l=t.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=r),a=rp(o,l,i),u=new Kr(o,a,r),c=new Kr(l,a,r);i.iterGaps((d,f,p)=>op(u,d,c,f,p,n)),i.empty&&i.length==0&&op(u,0,c,0,0,n)}static eq(e,t,i=0,n){n==null&&(n=999999999);let r=e.filter(c=>!c.isEmpty&&t.indexOf(c)<0),o=t.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(r.length!=o.length)return!1;if(!r.length)return!0;let l=rp(r,o),a=new Kr(r,l,0).goto(i),u=new Kr(o,l,0).goto(i);for(;;){if(a.to!=u.to||!Lu(a.active,u.active)||a.point&&(!u.point||!a.point.eq(u.point)))return!1;if(a.to>n)return!0;a.next(),u.next()}}static spans(e,t,i,n,r=-1){let o=new Kr(e,null,r).goto(t),l=t,a=o.openStart;for(;;){let u=Math.min(o.to,i);if(o.point){let c=o.activeForPoint(o.to),d=o.pointFrom<t?c.length+1:o.point.startSide<0?c.length:Math.min(c.length,a);n.point(l,u,o.point,c,d,o.pointRank),a=Math.min(o.openEnd(u),c.length)}else u>l&&(n.span(l,u,o.active,a),a=o.openEnd(u));if(o.to>i)return a+(o.point&&o.to>i?1:0);l=o.to,o.next()}}static of(e,t=!1){let i=new $i;for(let n of e instanceof $u?[e]:t?F_(e):e)i.add(n.from,n.to,n.value);return i.finish()}static join(e){if(!e.length)return it.empty;let t=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let n=e[i];n!=it.empty;n=n.nextLayer)t=new it(n.chunkPos,n.chunk,t,Math.max(n.maxPoint,t.maxPoint));return t}}it.empty=new it([],[],null,-1);function F_(s){if(s.length>1)for(let e=s[0],t=1;t<s.length;t++){let i=s[t];if(Ru(e,i)>0)return s.slice().sort(Ru);e=i}return s}it.empty.nextLayer=it.empty;class $i{finishChunk(e){this.chunks.push(new Gd(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new $i)).add(e,t,i)}addInner(e,t,i){let n=e-this.lastTo||i.startSide-this.last.endSide;if(n<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return n<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(it.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=it.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function rp(s,e,t){let i=new Map;for(let r of s)for(let o=0;o<r.chunk.length;o++)r.chunk[o].maxPoint<=0&&i.set(r.chunk[o],r.chunkPos[o]);let n=new Set;for(let r of e)for(let o=0;o<r.chunk.length;o++){let l=i.get(r.chunk[o]);l!=null&&(t?t.mapPos(l):l)==r.chunkPos[o]&&!t?.touchesRange(l,l+r.chunk[o].length)&&n.add(r.chunk[o])}return n}class B0{constructor(e,t,i,n=0){this.layer=e,this.skip=t,this.minPoint=i,this.rank=n}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let n=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(n)||this.layer.chunkEnd(this.chunkIndex)<e||n.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let n=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!i||this.rangeIndex<n)&&this.setRangeIndex(n)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],i=e+t.from[this.rangeIndex];if(this.from=i,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Oo{constructor(e){this.heap=e}static from(e,t=null,i=-1){let n=[];for(let r=0;r<e.length;r++)for(let o=e[r];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&n.push(new B0(o,t,i,r));return n.length==1?n[0]:new Oo(n)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let i of this.heap)i.goto(e,t);for(let i=this.heap.length>>1;i>=0;i--)jc(this.heap,i);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let i=this.heap.length>>1;i>=0;i--)jc(this.heap,i);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),jc(this.heap,0)}}}function jc(s,e){for(let t=s[e];;){let i=(e<<1)+1;if(i>=s.length)break;let n=s[i];if(i+1<s.length&&n.compare(s[i+1])>=0&&(n=s[i+1],i++),t.compare(n)<0)break;s[i]=t,s[e]=n,e=i}}class Kr{constructor(e,t,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Oo.from(e,t,i)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){wl(this.active,e),wl(this.activeTo,e),wl(this.activeRank,e),this.minActive=lp(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:n,rank:r}=this.cursor;for(;t<this.activeRank.length&&(r-this.activeRank[t]||n-this.activeTo[t])>0;)t++;Sl(this.active,t,i),Sl(this.activeTo,t,n),Sl(this.activeRank,t,r),e&&Sl(e,t,this.cursor.from),this.minActive=lp(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let n=this.minActive;if(n>-1&&(this.activeTo[n]-this.cursor.from||this.active[n].endSide-this.cursor.startSide)<0){if(this.activeTo[n]>e){this.to=this.activeTo[n],this.endSide=this.active[n].endSide;break}this.removeActive(n),i&&wl(i,n)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let r=this.cursor.value;if(!r.point)this.addActive(i),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=r,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=r.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let n=i.length-1;n>=0&&i[n]<e;n--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&t.push(this.active[i]);return t.reverse()}openEnd(e){let t=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)t++;return t}}function op(s,e,t,i,n,r){s.goto(e),t.goto(i);let o=i+n,l=i,a=i-e;for(;;){let u=s.to+a-t.to,c=u||s.endSide-t.endSide,d=c<0?s.to+a:t.to,f=Math.min(d,o);if(s.point||t.point?s.point&&t.point&&(s.point==t.point||s.point.eq(t.point))&&Lu(s.activeForPoint(s.to),t.activeForPoint(t.to))||r.comparePoint(l,f,s.point,t.point):f>l&&!Lu(s.active,t.active)&&r.compareRange(l,f,s.active,t.active),d>o)break;(u||s.openEnd!=t.openEnd)&&r.boundChange&&r.boundChange(d),l=d,c<=0&&s.next(),c>=0&&t.next()}}function Lu(s,e){if(s.length!=e.length)return!1;for(let t=0;t<s.length;t++)if(s[t]!=e[t]&&!s[t].eq(e[t]))return!1;return!0}function wl(s,e){for(let t=e,i=s.length-1;t<i;t++)s[t]=s[t+1];s.pop()}function Sl(s,e,t){for(let i=s.length-1;i>=e;i--)s[i+1]=s[i];s[e]=t}function lp(s,e){let t=-1,i=1e9;for(let n=0;n<e.length;n++)(e[n]-i||s[n].endSide-s[t].endSide)<0&&(t=n,i=e[n]);return t}function Or(s,e,t=s.length){let i=0;for(let n=0;n<t&&n<s.length;)s.charCodeAt(n)==9?(i+=e-i%e,n++):(i++,n=Jt(s,n));return i}function Vu(s,e,t,i){for(let n=0,r=0;;){if(r>=e)return n;if(n==s.length)break;r+=s.charCodeAt(n)==9?t-r%t:1,n=Jt(s,n)}return i===!0?-1:s.length}const Bu="",ap=typeof Symbol>"u"?"__"+Bu:Symbol.for(Bu),Iu=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),cp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class ln{constructor(e,t){this.rules=[];let{finish:i}=t||{};function n(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function r(o,l,a,u){let c=[],d=/^@(\w+)\b/.exec(o[0]),f=d&&d[1]=="keyframes";if(d&&l==null)return a.push(o[0]+";");for(let p in l){let v=l[p];if(/&/.test(p))r(p.split(/,\s*/).map(k=>o.map(m=>k.replace(/&/,m))).reduce((k,m)=>k.concat(m)),v,a);else if(v&&typeof v=="object"){if(!d)throw new RangeError("The value of a property ("+p+") should be a primitive value.");r(n(p),v,c,f)}else v!=null&&c.push(p.replace(/_.*/,"").replace(/[A-Z]/g,k=>"-"+k.toLowerCase())+": "+v+";")}(c.length||f)&&a.push((i&&!d&&!u?o.map(i):o).join(", ")+" {"+c.join(" ")+"}")}for(let o in e)r(n(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=cp[ap]||1;return cp[ap]=e+1,Bu+e.toString(36)}static mount(e,t,i){let n=e[Iu],r=i&&i.nonce;n?r&&n.setNonce(r):n=new z_(e,r),n.mount(Array.isArray(t)?t:[t],e)}}let up=new Map;class z_{constructor(e,t){let i=e.ownerDocument||e,n=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&n.CSSStyleSheet){let r=up.get(i);if(r)return e[Iu]=r;this.sheet=new n.CSSStyleSheet,up.set(i,this)}else this.styleTag=i.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[Iu]=this}mount(e,t){let i=this.sheet,n=0,r=0;for(let o=0;o<e.length;o++){let l=e[o],a=this.modules.indexOf(l);if(a<r&&a>-1&&(this.modules.splice(a,1),r--,a=-1),a==-1){if(this.modules.splice(r++,0,l),i)for(let u=0;u<l.rules.length;u++)i.insertRule(l.rules[u],n++)}else{for(;r<a;)n+=this.modules[r++].rules.length;n+=l.rules.length,r++}}if(i)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let o="";for(let a=0;a<this.modules.length;a++)o+=this.modules[a].getRules()+`
`;this.styleTag.textContent=o;let l=t.head||t;this.styleTag.parentNode!=l&&l.insertBefore(this.styleTag,l.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var an={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Po={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},U_=typeof navigator<"u"&&/Mac/.test(navigator.platform),H_=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Kt=0;Kt<10;Kt++)an[48+Kt]=an[96+Kt]=String(Kt);for(var Kt=1;Kt<=24;Kt++)an[Kt+111]="F"+Kt;for(var Kt=65;Kt<=90;Kt++)an[Kt]=String.fromCharCode(Kt+32),Po[Kt]=String.fromCharCode(Kt);for(var $c in an)Po.hasOwnProperty($c)||(Po[$c]=an[$c]);function W_(s){var e=U_&&s.metaKey&&s.shiftKey&&!s.ctrlKey&&!s.altKey||H_&&s.shiftKey&&s.key&&s.key.length==1||s.key=="Unidentified",t=!e&&s.key||(s.shiftKey?Po:an)[s.keyCode]||s.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function gt(){var s=arguments[0];typeof s=="string"&&(s=document.createElement(s));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var n=t[i];typeof n=="string"?s.setAttribute(i,n):n!=null&&(s[i]=n)}e++}for(;e<arguments.length;e++)I0(s,arguments[e]);return s}function I0(s,e){if(typeof e=="string")s.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)s.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)I0(s,e[t]);else throw new RangeError("Unsupported child node: "+e)}let ds=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Nu=typeof document<"u"?document:{documentElement:{style:{}}};const Fu=/Edge\/(\d+)/.exec(ds.userAgent),N0=/MSIE \d/.test(ds.userAgent),zu=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ds.userAgent),ic=!!(N0||zu||Fu),dp=!ic&&/gecko\/(\d+)/i.test(ds.userAgent),Rc=!ic&&/Chrome\/(\d+)/.exec(ds.userAgent),K_="webkitFontSmoothing"in Nu.documentElement.style,Uu=!ic&&/Apple Computer/.test(ds.vendor),fp=Uu&&(/Mobile\/\w+/.test(ds.userAgent)||ds.maxTouchPoints>2);var De={mac:fp||/Mac/.test(ds.platform),windows:/Win/.test(ds.platform),linux:/Linux|X11/.test(ds.platform),ie:ic,ie_version:N0?Nu.documentMode||6:zu?+zu[1]:Fu?+Fu[1]:0,gecko:dp,gecko_version:dp?+(/Firefox\/(\d+)/.exec(ds.userAgent)||[0,0])[1]:0,chrome:!!Rc,chrome_version:Rc?+Rc[1]:0,ios:fp,android:/Android\b/.test(ds.userAgent),webkit_version:K_?+(/\bAppleWebKit\/(\d+)/.exec(ds.userAgent)||[0,0])[1]:0,safari:Uu,safari_version:Uu?+(/\bVersion\/(\d+(\.\d+)?)/.exec(ds.userAgent)||[0,0])[1]:0,tabSize:Nu.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function jo(s){let e;return s.nodeType==11?e=s.getSelection?s:s.ownerDocument:e=s,e.getSelection()}function Hu(s,e){return e?s==e||s.contains(e.nodeType!=1?e.parentNode:e):!1}function Ql(s,e){if(!e.anchorNode)return!1;try{return Hu(s,e.anchorNode)}catch{return!1}}function $o(s){return s.nodeType==3?Bn(s,0,s.nodeValue.length).getClientRects():s.nodeType==1?s.getClientRects():[]}function po(s,e,t,i){return t?hp(s,e,t,i,-1)||hp(s,e,t,i,1):!1}function Vn(s){for(var e=0;;e++)if(s=s.previousSibling,!s)return e}function ya(s){return s.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(s.nodeName)}function hp(s,e,t,i,n){for(;;){if(s==t&&e==i)return!0;if(e==(n<0?0:bi(s))){if(s.nodeName=="DIV")return!1;let r=s.parentNode;if(!r||r.nodeType!=1)return!1;e=Vn(s)+(n<0?0:1),s=r}else if(s.nodeType==1){if(s=s.childNodes[e+(n<0?-1:0)],s.nodeType==1&&s.contentEditable=="false")return!1;e=n<0?bi(s):0}else return!1}}function bi(s){return s.nodeType==3?s.nodeValue.length:s.childNodes.length}function nc(s,e){let t=e?s.left:s.right;return{left:t,right:t,top:s.top,bottom:s.bottom}}function q_(s){let e=s.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:s.innerWidth,top:0,bottom:s.innerHeight}}function F0(s,e){let t=e.width/s.offsetWidth,i=e.height/s.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-s.offsetWidth)<1)&&(t=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-s.offsetHeight)<1)&&(i=1),{scaleX:t,scaleY:i}}function G_(s,e,t,i,n,r,o,l){let a=s.ownerDocument,u=a.defaultView||window;for(let c=s,d=!1;c&&!d;)if(c.nodeType==1){let f,p=c==a.body,v=1,k=1;if(p)f=q_(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(d=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let L=c.getBoundingClientRect();({scaleX:v,scaleY:k}=F0(c,L)),f={left:L.left,right:L.left+c.clientWidth*v,top:L.top,bottom:L.top+c.clientHeight*k}}let m=0,w=0;if(n=="nearest")e.top<f.top?(w=e.top-(f.top+o),t>0&&e.bottom>f.bottom+w&&(w=e.bottom-f.bottom+o)):e.bottom>f.bottom&&(w=e.bottom-f.bottom+o,t<0&&e.top-w<f.top&&(w=e.top-(f.top+o)));else{let L=e.bottom-e.top,I=f.bottom-f.top;w=(n=="center"&&L<=I?e.top+L/2-I/2:n=="start"||n=="center"&&t<0?e.top-o:e.bottom-I+o)-f.top}if(i=="nearest"?e.left<f.left?(m=e.left-(f.left+r),t>0&&e.right>f.right+m&&(m=e.right-f.right+r)):e.right>f.right&&(m=e.right-f.right+r,t<0&&e.left<f.left+m&&(m=e.left-(f.left+r))):m=(i=="center"?e.left+(e.right-e.left)/2-(f.right-f.left)/2:i=="start"==l?e.left-r:e.right-(f.right-f.left)+r)-f.left,m||w)if(p)u.scrollBy(m,w);else{let L=0,I=0;if(w){let H=c.scrollTop;c.scrollTop+=w/k,I=(c.scrollTop-H)*k}if(m){let H=c.scrollLeft;c.scrollLeft+=m/v,L=(c.scrollLeft-H)*v}e={left:e.left-L,top:e.top-I,right:e.right-L,bottom:e.bottom-I},L&&Math.abs(L-m)<1&&(i="nearest"),I&&Math.abs(I-w)<1&&(n="nearest")}if(p)break;(e.top<f.top||e.bottom>f.bottom||e.left<f.left||e.right>f.right)&&(e={left:Math.max(e.left,f.left),right:Math.min(e.right,f.right),top:Math.max(e.top,f.top),bottom:Math.min(e.bottom,f.bottom)}),c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function J_(s){let e=s.ownerDocument,t,i;for(let n=s.parentNode;n&&!(n==e.body||t&&i);)if(n.nodeType==1)!i&&n.scrollHeight>n.clientHeight&&(i=n),!t&&n.scrollWidth>n.clientWidth&&(t=n),n=n.assignedSlot||n.parentNode;else if(n.nodeType==11)n=n.host;else break;return{x:t,y:i}}class Y_{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:i}=e;this.set(t,Math.min(e.anchorOffset,t?bi(t):0),i,Math.min(e.focusOffset,i?bi(i):0))}set(e,t,i,n){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=n}}let Cn=null;De.safari&&De.safari_version>=26&&(Cn=!1);function z0(s){if(s.setActive)return s.setActive();if(Cn)return s.focus(Cn);let e=[];for(let t=s;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(s.focus(Cn==null?{get preventScroll(){return Cn={preventScroll:!0},!0}}:void 0),!Cn){Cn=!1;for(let t=0;t<e.length;){let i=e[t++],n=e[t++],r=e[t++];i.scrollTop!=n&&(i.scrollTop=n),i.scrollLeft!=r&&(i.scrollLeft=r)}}}let pp;function Bn(s,e,t=e){let i=pp||(pp=document.createRange());return i.setEnd(s,t),i.setStart(s,e),i}function dr(s,e,t,i){let n={key:e,code:e,keyCode:t,which:t,cancelable:!0};i&&({altKey:n.altKey,ctrlKey:n.ctrlKey,shiftKey:n.shiftKey,metaKey:n.metaKey}=i);let r=new KeyboardEvent("keydown",n);r.synthetic=!0,s.dispatchEvent(r);let o=new KeyboardEvent("keyup",n);return o.synthetic=!0,s.dispatchEvent(o),r.defaultPrevented||o.defaultPrevented}function Q_(s){for(;s;){if(s&&(s.nodeType==9||s.nodeType==11&&s.host))return s;s=s.assignedSlot||s.parentNode}return null}function U0(s){for(;s.attributes.length;)s.removeAttributeNode(s.attributes[0])}function X_(s,e){let t=e.focusNode,i=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=i)return!1;for(i=Math.min(i,bi(t));;)if(i){if(t.nodeType!=1)return!1;let n=t.childNodes[i-1];n.contentEditable=="false"?i--:(t=n,i=bi(t))}else{if(t==s)return!0;i=Vn(t),t=t.parentNode}}function H0(s){return s.scrollTop>Math.max(1,s.scrollHeight-s.clientHeight-4)}function W0(s,e){for(let t=s,i=e;;){if(t.nodeType==3&&i>0)return{node:t,offset:i};if(t.nodeType==1&&i>0){if(t.contentEditable=="false")return null;t=t.childNodes[i-1],i=bi(t)}else if(t.parentNode&&!ya(t))i=Vn(t),t=t.parentNode;else return null}}function K0(s,e){for(let t=s,i=e;;){if(t.nodeType==3&&i<t.nodeValue.length)return{node:t,offset:i};if(t.nodeType==1&&i<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[i],i=0}else if(t.parentNode&&!ya(t))i=Vn(t)+1,t=t.parentNode;else return null}}class ts{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new ts(e.parentNode,Vn(e),t)}static after(e,t){return new ts(e.parentNode,Vn(e)+1,t)}}const Jd=[];class pt{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let i of this.children){if(i==e)return t;t+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let i=this.dom,n=null,r;for(let o of this.children){if(o.flags&7){if(!o.dom&&(r=n?n.nextSibling:i.firstChild)){let l=pt.get(r);(!l||!l.parent&&l.canReuseDOM(o))&&o.reuseDOM(r)}o.sync(e,t),o.flags&=-8}if(r=n?n.nextSibling:i.firstChild,t&&!t.written&&t.node==i&&r!=o.dom&&(t.written=!0),o.dom.parentNode==i)for(;r&&r!=o.dom;)r=mp(r);else i.insertBefore(o.dom,r);n=o.dom}for(r=n?n.nextSibling:i.firstChild,r&&t&&t.node==i&&(t.written=!0);r;)r=mp(r)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,t),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let i;if(e==this.dom)i=this.dom.childNodes[t];else{let n=bi(e)==0?0:t==0?-1:1;for(;;){let r=e.parentNode;if(r==this.dom)break;n==0&&r.firstChild!=r.lastChild&&(e==r.firstChild?n=-1:n=1),e=r}n<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!pt.get(i);)i=i.nextSibling;if(!i)return this.length;for(let n=0,r=0;;n++){let o=this.children[n];if(o.dom==i)return r;r+=o.length+o.breakAfter}}domBoundsAround(e,t,i=0){let n=-1,r=-1,o=-1,l=-1;for(let a=0,u=i,c=i;a<this.children.length;a++){let d=this.children[a],f=u+d.length;if(u<e&&f>t)return d.domBoundsAround(e,t,u);if(f>=e&&n==-1&&(n=a,r=u),u>t&&d.dom.parentNode==this.dom){o=a,l=c;break}c=f,u=f+d.breakAfter}return{from:r,to:l<0?i+this.length:l,startDOM:(n?this.children[n-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,i=Jd){this.markDirty();for(let n=e;n<t;n++){let r=this.children[n];r.parent==this&&i.indexOf(r)<0&&r.destroy()}i.length<250?this.children.splice(e,t-e,...i):this.children=[].concat(this.children.slice(0,e),i,this.children.slice(t));for(let n=0;n<i.length;n++)i[n].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new q0(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,i,n,r,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}pt.prototype.breakAfter=0;function mp(s){let e=s.nextSibling;return s.parentNode.removeChild(s),e}class q0{constructor(e,t,i){this.children=e,this.pos=t,this.i=i,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function G0(s,e,t,i,n,r,o,l,a){let{children:u}=s,c=u.length?u[e]:null,d=r.length?r[r.length-1]:null,f=d?d.breakAfter:o;if(!(e==i&&c&&!o&&!f&&r.length<2&&c.merge(t,n,r.length?d:null,t==0,l,a))){if(i<u.length){let p=u[i];p&&(n<p.length||p.breakAfter&&d?.breakAfter)?(e==i&&(p=p.split(n),n=0),!f&&d&&p.merge(0,n,d,!0,0,a)?r[r.length-1]=p:((n||p.children.length&&!p.children[0].length)&&p.merge(0,n,null,!1,0,a),r.push(p))):p?.breakAfter&&(d?d.breakAfter=1:o=1),i++}for(c&&(c.breakAfter=o,t>0&&(!o&&r.length&&c.merge(t,c.length,r[0],!1,l,0)?c.breakAfter=r.shift().breakAfter:(t<c.length||c.children.length&&c.children[c.children.length-1].length==0)&&c.merge(t,c.length,null,!1,l,0),e++));e<i&&r.length;)if(u[i-1].become(r[r.length-1]))i--,r.pop(),a=r.length?0:l;else if(u[e].become(r[0]))e++,r.shift(),l=r.length?0:a;else break;!r.length&&e&&i<u.length&&!u[e-1].breakAfter&&u[i].merge(0,0,u[e-1],!1,l,a)&&e--,(e<i||r.length)&&s.replaceChildren(e,i,r)}}function J0(s,e,t,i,n,r){let o=s.childCursor(),{i:l,off:a}=o.findPos(t,1),{i:u,off:c}=o.findPos(e,-1),d=e-t;for(let f of i)d+=f.length;s.length+=d,G0(s,u,c,l,a,i,0,n,r)}const Z_=256;class Xs extends pt{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,i){return this.flags&8||i&&(!(i instanceof Xs)||this.length-(t-e)+i.length>Z_||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new Xs(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new ts(this.dom,e)}domBoundsAround(e,t,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return e4(this.dom,e,t)}}class Ri extends pt{constructor(e,t=[],i=0){super(),this.mark=e,this.children=t,this.length=i;for(let n of t)n.setParent(this)}setAttrs(e){if(U0(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,i,n,r,o){return i&&(!(i instanceof Ri&&i.mark.eq(this.mark))||e&&r<=0||t<this.length&&o<=0)?!1:(J0(this,e,t,i?i.children.slice():[],r-1,o-1),this.markDirty(),!0)}split(e){let t=[],i=0,n=-1,r=0;for(let l of this.children){let a=i+l.length;a>e&&t.push(i<e?l.split(e-i):l),n<0&&i>=e&&(n=r),i=a,r++}let o=this.length-e;return this.length=e,n>-1&&(this.children.length=n,this.markDirty()),new Ri(this.mark,t,o)}domAtPos(e){return Y0(this,e)}coordsAt(e,t){return X0(this,e,t)}}function e4(s,e,t){let i=s.nodeValue.length;e>i&&(e=i);let n=e,r=e,o=0;e==0&&t<0||e==i&&t>=0?De.chrome||De.gecko||(e?(n--,o=1):r<i&&(r++,o=-1)):t<0?n--:r<i&&r++;let l=Bn(s,n,r).getClientRects();if(!l.length)return null;let a=l[(o?o<0:t>=0)?0:l.length-1];return De.safari&&!o&&a.width==0&&(a=Array.prototype.find.call(l,u=>u.width)||a),o?nc(a,o<0):a||null}class Qi extends pt{static create(e,t,i){return new Qi(e,t,i)}constructor(e,t,i){super(),this.widget=e,this.length=t,this.side=i,this.prevWidget=null}split(e){let t=Qi.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,i,n,r,o){return i&&(!(i instanceof Qi)||!this.widget.compare(i.widget)||e>0&&r<=0||t<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}become(e){return e instanceof Qi&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return nt.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,i=t&&t.state.doc,n=this.posAtStart;return i?i.slice(n,n+this.length):nt.empty}domAtPos(e){return(this.length?e==0:this.side>0)?ts.before(this.dom):ts.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let i=this.widget.coordsAt(this.dom,e,t);if(i)return i;let n=this.dom.getClientRects(),r=null;if(!n.length)return null;let o=this.side?this.side<0:e>0;for(let l=o?n.length-1:0;r=n[l],!(e>0?l==0:l==n.length-1||r.top<r.bottom);l+=o?-1:1);return nc(r,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class kr extends pt{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof kr&&e.side==this.side}split(){return new kr(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?ts.before(this.dom):ts.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return nt.empty}get isHidden(){return!0}}Xs.prototype.children=Qi.prototype.children=kr.prototype.children=Jd;function Y0(s,e){let t=s.dom,{children:i}=s,n=0;for(let r=0;n<i.length;n++){let o=i[n],l=r+o.length;if(!(l==r&&o.getSide()<=0)){if(e>r&&e<l&&o.dom.parentNode==t)return o.domAtPos(e-r);if(e<=r)break;r=l}}for(let r=n;r>0;r--){let o=i[r-1];if(o.dom.parentNode==t)return o.domAtPos(o.length)}for(let r=n;r<i.length;r++){let o=i[r];if(o.dom.parentNode==t)return o.domAtPos(0)}return new ts(t,0)}function Q0(s,e,t){let i,{children:n}=s;t>0&&e instanceof Ri&&n.length&&(i=n[n.length-1])instanceof Ri&&i.mark.eq(e.mark)?Q0(i,e.children[0],t-1):(n.push(e),e.setParent(s)),s.length+=e.length}function X0(s,e,t){let i=null,n=-1,r=null,o=-1;function l(u,c){for(let d=0,f=0;d<u.children.length&&f<=c;d++){let p=u.children[d],v=f+p.length;v>=c&&(p.children.length?l(p,c-f):(!r||r.isHidden&&(t>0||s4(r,p)))&&(v>c||f==v&&p.getSide()>0)?(r=p,o=c-f):(f<c||f==v&&p.getSide()<0&&!p.isHidden)&&(i=p,n=c-f)),f=v}}l(s,e);let a=(t<0?i:r)||i||r;return a?a.coordsAt(Math.max(0,a==i?n:o),t):t4(s)}function t4(s){let e=s.dom.lastChild;if(!e)return s.dom.getBoundingClientRect();let t=$o(e);return t[t.length-1]||null}function s4(s,e){let t=s.coordsAt(0,1),i=e.coordsAt(0,1);return t&&i&&i.top<t.bottom}function Wu(s,e){for(let t in s)t=="class"&&e.class?e.class+=" "+s.class:t=="style"&&e.style?e.style+=";"+s.style:e[t]=s[t];return e}const gp=Object.create(null);function ba(s,e,t){if(s==e)return!0;s||(s=gp),e||(e=gp);let i=Object.keys(s),n=Object.keys(e);if(i.length-(t&&i.indexOf(t)>-1?1:0)!=n.length-(t&&n.indexOf(t)>-1?1:0))return!1;for(let r of i)if(r!=t&&(n.indexOf(r)==-1||s[r]!==e[r]))return!1;return!0}function Ku(s,e,t){let i=!1;if(e)for(let n in e)t&&n in t||(i=!0,n=="style"?s.style.cssText="":s.removeAttribute(n));if(t)for(let n in t)e&&e[n]==t[n]||(i=!0,n=="style"?s.style.cssText=t[n]:s.setAttribute(n,t[n]));return i}function i4(s){let e=Object.create(null);for(let t=0;t<s.attributes.length;t++){let i=s.attributes[t];e[i.name]=i.value}return e}class fn{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var ps=(function(s){return s[s.Text=0]="Text",s[s.WidgetBefore=1]="WidgetBefore",s[s.WidgetAfter=2]="WidgetAfter",s[s.WidgetRange=3]="WidgetRange",s})(ps||(ps={}));class Fe extends Ln{constructor(e,t,i,n){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=n}get heightRelevant(){return!1}static mark(e){return new Qo(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return t+=i&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new cn(e,t,t,i,e.widget||null,!1)}static replace(e){let t=!!e.block,i,n;if(e.isBlockGap)i=-5e8,n=4e8;else{let{start:r,end:o}=Z0(e,t);i=(r?t?-3e8:-1:5e8)-1,n=(o?t?2e8:1:-6e8)+1}return new cn(e,i,n,t,e.widget||null,!0)}static line(e){return new Xo(e)}static set(e,t=!1){return it.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Fe.none=it.empty;class Qo extends Fe{constructor(e){let{start:t,end:i}=Z0(e);super(t?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,i;return this==e||e instanceof Qo&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&ba(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}Qo.prototype.point=!1;class Xo extends Fe{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Xo&&this.spec.class==e.spec.class&&ba(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}Xo.prototype.mapMode=hs.TrackBefore;Xo.prototype.point=!0;class cn extends Fe{constructor(e,t,i,n,r,o){super(t,i,r,e),this.block=n,this.isReplace=o,this.mapMode=n?t<=0?hs.TrackBefore:hs.TrackAfter:hs.TrackDel}get type(){return this.startSide!=this.endSide?ps.WidgetRange:this.startSide<=0?ps.WidgetBefore:ps.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof cn&&n4(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}cn.prototype.point=!0;function Z0(s,e=!1){let{inclusiveStart:t,inclusiveEnd:i}=s;return t==null&&(t=s.inclusive),i==null&&(i=s.inclusive),{start:t??e,end:i??e}}function n4(s,e){return s==e||!!(s&&e&&s.compare(e))}function Xl(s,e,t,i=0){let n=t.length-1;n>=0&&t[n]+i>=s?t[n]=Math.max(t[n],e):t.push(s,e)}class Ot extends pt{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,i,n,r,o){if(i){if(!(i instanceof Ot))return!1;this.dom||i.transferDOM(this)}return n&&this.setDeco(i?i.attrs:null),J0(this,e,t,i?i.children.slice():[],r,o),!0}split(e){let t=new Ot;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i,off:n}=this.childPos(e);n&&(t.append(this.children[i].split(n),0),this.children[i].merge(n,this.children[i].length,null,!1,0,0),i++);for(let r=i;r<this.children.length;r++)t.append(this.children[r],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){ba(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){Q0(this,e,t)}addLineDeco(e){let t=e.spec.attributes,i=e.spec.class;t&&(this.attrs=Wu(t,this.attrs||{})),i&&(this.attrs=Wu({class:i},this.attrs||{}))}domAtPos(e){return Y0(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var i;this.dom?this.flags&4&&(U0(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(Ku(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let n=this.dom.lastChild;for(;n&&pt.get(n)instanceof Ri;)n=n.lastChild;if(!n||!this.length||n.nodeName!="BR"&&((i=pt.get(n))===null||i===void 0?void 0:i.isEditable)==!1&&(!De.ios||!this.children.some(r=>r instanceof Xs))){let r=document.createElement("BR");r.cmIgnore=!0,this.dom.appendChild(r)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let i of this.children){if(!(i instanceof Xs)||/[^ -~]/.test(i.text))return null;let n=$o(i.dom);if(n.length!=1)return null;e+=n[0].width,t=n[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let i=X0(this,e,t);if(!this.children.length&&i&&this.parent){let{heightOracle:n}=this.parent.view.viewState,r=i.bottom-i.top;if(Math.abs(r-n.lineHeight)<2&&n.textHeight<r){let o=(r-n.textHeight)/2;return{top:i.top+o,bottom:i.bottom-o,left:i.left,right:i.left}}}return i}become(e){return e instanceof Ot&&this.children.length==0&&e.children.length==0&&ba(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let i=0,n=0;i<e.children.length;i++){let r=e.children[i],o=n+r.length;if(o>=t){if(r instanceof Ot)return r;if(o>t)break}n=o+r.breakAfter}return null}}class Oi extends pt{constructor(e,t,i){super(),this.widget=e,this.length=t,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,t,i,n,r,o){return i&&(!(i instanceof Oi)||!this.widget.compare(i.widget)||e>0&&r<=0||t<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?ts.before(this.dom):ts.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let i=new Oi(this.widget,t,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return Jd}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):nt.empty}domBoundsAround(){return null}become(e){return e instanceof Oi&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){let i=this.widget.coordsAt(this.dom,e,t);return i||(this.widget instanceof qu?null:nc(this.dom.getBoundingClientRect(),this.length?e==0:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:i}=this.deco;return t==i?!1:e<0?t<0:i>0}}class qu extends fn{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class mo{constructor(e,t,i,n){this.doc=e,this.pos=t,this.end=i,this.disallowBlockEffectsFor=n,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Oi&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Ot),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Cl(new kr(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Oi)&&this.getLine()}buildText(e,t,i){for(;e>0;){if(this.textOff==this.text.length){let{value:o,lineBreak:l,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(l){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=o,this.textOff=0}let n=Math.min(this.text.length-this.textOff,e),r=Math.min(n,512);this.flushBuffer(t.slice(t.length-i)),this.getLine().append(Cl(new Xs(this.text.slice(this.textOff,this.textOff+r)),t),i),this.atCursorPos=!0,this.textOff+=r,e-=r,i=n<=r?0:t.length}}span(e,t,i,n){this.buildText(t-e,i,n),this.pos=t,this.openStart<0&&(this.openStart=n)}point(e,t,i,n,r,o){if(this.disallowBlockEffectsFor[o]&&i instanceof cn){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=t-e;if(i instanceof cn)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Oi(i.widget||xr.block,l,i));else{let a=Qi.create(i.widget||xr.inline,l,l?0:i.startSide),u=this.atCursorPos&&!a.isEditable&&r<=n.length&&(e<t||i.startSide>0),c=!a.isEditable&&(e<t||r>n.length||i.startSide<=0),d=this.getLine();this.pendingBuffer==2&&!u&&!a.isEditable&&(this.pendingBuffer=0),this.flushBuffer(n),u&&(d.append(Cl(new kr(1),n),r),r=n.length+Math.max(0,r-n.length)),d.append(Cl(a,n),r),this.atCursorPos=c,this.pendingBuffer=c?e<t||r>n.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=n.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=r)}static build(e,t,i,n,r){let o=new mo(e,t,i,r);return o.openEnd=it.spans(n,t,i,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function Cl(s,e){for(let t of e)s=new Ri(t,[s],s.length);return s}class xr extends fn{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}xr.inline=new xr("span");xr.block=new xr("div");var St=(function(s){return s[s.LTR=0]="LTR",s[s.RTL=1]="RTL",s})(St||(St={}));const In=St.LTR,Yd=St.RTL;function ev(s){let e=[];for(let t=0;t<s.length;t++)e.push(1<<+s[t]);return e}const r4=ev("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),o4=ev("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Gu=Object.create(null),oi=[];for(let s of["()","[]","{}"]){let e=s.charCodeAt(0),t=s.charCodeAt(1);Gu[e]=t,Gu[t]=-e}function tv(s){return s<=247?r4[s]:1424<=s&&s<=1524?2:1536<=s&&s<=1785?o4[s-1536]:1774<=s&&s<=2220?4:8192<=s&&s<=8204?256:64336<=s&&s<=65023?4:1}const l4=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Xi{get dir(){return this.level%2?Yd:In}constructor(e,t,i){this.from=e,this.to=t,this.level=i}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,i,n){let r=-1;for(let o=0;o<e.length;o++){let l=e[o];if(l.from<=t&&l.to>=t){if(l.level==i)return o;(r<0||(n!=0?n<0?l.from<t:l.to>t:e[r].level>l.level))&&(r=o)}}if(r<0)throw new RangeError("Index out of range");return r}}function sv(s,e){if(s.length!=e.length)return!1;for(let t=0;t<s.length;t++){let i=s[t],n=e[t];if(i.from!=n.from||i.to!=n.to||i.direction!=n.direction||!sv(i.inner,n.inner))return!1}return!0}const vt=[];function a4(s,e,t,i,n){for(let r=0;r<=i.length;r++){let o=r?i[r-1].to:e,l=r<i.length?i[r].from:t,a=r?256:n;for(let u=o,c=a,d=a;u<l;u++){let f=tv(s.charCodeAt(u));f==512?f=c:f==8&&d==4&&(f=16),vt[u]=f==4?2:f,f&7&&(d=f),c=f}for(let u=o,c=a,d=a;u<l;u++){let f=vt[u];if(f==128)u<l-1&&c==vt[u+1]&&c&24?f=vt[u]=c:vt[u]=256;else if(f==64){let p=u+1;for(;p<l&&vt[p]==64;)p++;let v=u&&c==8||p<t&&vt[p]==8?d==1?1:8:256;for(let k=u;k<p;k++)vt[k]=v;u=p-1}else f==8&&d==1&&(vt[u]=1);c=f,f&7&&(d=f)}}}function c4(s,e,t,i,n){let r=n==1?2:1;for(let o=0,l=0,a=0;o<=i.length;o++){let u=o?i[o-1].to:e,c=o<i.length?i[o].from:t;for(let d=u,f,p,v;d<c;d++)if(p=Gu[f=s.charCodeAt(d)])if(p<0){for(let k=l-3;k>=0;k-=3)if(oi[k+1]==-p){let m=oi[k+2],w=m&2?n:m&4?m&1?r:n:0;w&&(vt[d]=vt[oi[k]]=w),l=k;break}}else{if(oi.length==189)break;oi[l++]=d,oi[l++]=f,oi[l++]=a}else if((v=vt[d])==2||v==1){let k=v==n;a=k?0:1;for(let m=l-3;m>=0;m-=3){let w=oi[m+2];if(w&2)break;if(k)oi[m+2]|=2;else{if(w&4)break;oi[m+2]|=4}}}}}function u4(s,e,t,i){for(let n=0,r=i;n<=t.length;n++){let o=n?t[n-1].to:s,l=n<t.length?t[n].from:e;for(let a=o;a<l;){let u=vt[a];if(u==256){let c=a+1;for(;;)if(c==l){if(n==t.length)break;c=t[n++].to,l=n<t.length?t[n].from:e}else if(vt[c]==256)c++;else break;let d=r==1,f=(c<e?vt[c]:i)==1,p=d==f?d?1:2:i;for(let v=c,k=n,m=k?t[k-1].to:s;v>a;)v==m&&(v=t[--k].from,m=k?t[k-1].to:s),vt[--v]=p;a=c}else r=u,a++}}}function Ju(s,e,t,i,n,r,o){let l=i%2?2:1;if(i%2==n%2)for(let a=e,u=0;a<t;){let c=!0,d=!1;if(u==r.length||a<r[u].from){let k=vt[a];k!=l&&(c=!1,d=k==16)}let f=!c&&l==1?[]:null,p=c?i:i+1,v=a;e:for(;;)if(u<r.length&&v==r[u].from){if(d)break e;let k=r[u];if(!c)for(let m=k.to,w=u+1;;){if(m==t)break e;if(w<r.length&&r[w].from==m)m=r[w++].to;else{if(vt[m]==l)break e;break}}if(u++,f)f.push(k);else{k.from>a&&o.push(new Xi(a,k.from,p));let m=k.direction==In!=!(p%2);Yu(s,m?i+1:i,n,k.inner,k.from,k.to,o),a=k.to}v=k.to}else{if(v==t||(c?vt[v]!=l:vt[v]==l))break;v++}f?Ju(s,a,v,i+1,n,f,o):a<v&&o.push(new Xi(a,v,p)),a=v}else for(let a=t,u=r.length;a>e;){let c=!0,d=!1;if(!u||a>r[u-1].to){let k=vt[a-1];k!=l&&(c=!1,d=k==16)}let f=!c&&l==1?[]:null,p=c?i:i+1,v=a;e:for(;;)if(u&&v==r[u-1].to){if(d)break e;let k=r[--u];if(!c)for(let m=k.from,w=u;;){if(m==e)break e;if(w&&r[w-1].to==m)m=r[--w].from;else{if(vt[m-1]==l)break e;break}}if(f)f.push(k);else{k.to<a&&o.push(new Xi(k.to,a,p));let m=k.direction==In!=!(p%2);Yu(s,m?i+1:i,n,k.inner,k.from,k.to,o),a=k.from}v=k.from}else{if(v==e||(c?vt[v-1]!=l:vt[v-1]==l))break;v--}f?Ju(s,v,a,i+1,n,f,o):v<a&&o.push(new Xi(v,a,p)),a=v}}function Yu(s,e,t,i,n,r,o){let l=e%2?2:1;a4(s,n,r,i,l),c4(s,n,r,i,l),u4(n,r,i,l),Ju(s,n,r,e,t,i,o)}function d4(s,e,t){if(!s)return[new Xi(0,0,e==Yd?1:0)];if(e==In&&!t.length&&!l4.test(s))return iv(s.length);if(t.length)for(;s.length>vt.length;)vt[vt.length]=256;let i=[],n=e==In?0:1;return Yu(s,n,n,t,0,s.length,i),i}function iv(s){return[new Xi(0,s,0)]}let nv="";function f4(s,e,t,i,n){var r;let o=i.head-s.from,l=Xi.find(e,o,(r=i.bidiLevel)!==null&&r!==void 0?r:-1,i.assoc),a=e[l],u=a.side(n,t);if(o==u){let f=l+=n?1:-1;if(f<0||f>=e.length)return null;a=e[l=f],o=a.side(!n,t),u=a.side(n,t)}let c=Jt(s.text,o,a.forward(n,t));(c<a.from||c>a.to)&&(c=u),nv=s.text.slice(Math.min(o,c),Math.max(o,c));let d=l==(n?e.length-1:0)?null:e[l+(n?1:-1)];return d&&c==u&&d.level+(n?0:1)<a.level?ue.cursor(d.side(!n,t)+s.from,d.forward(n,t)?1:-1,d.level):ue.cursor(c+s.from,a.forward(n,t)?-1:1,a.level)}function h4(s,e,t){for(let i=e;i<t;i++){let n=tv(s.charCodeAt(i));if(n==1)return In;if(n==2||n==4)return Yd}return In}const rv=Te.define(),ov=Te.define(),lv=Te.define(),av=Te.define(),Qu=Te.define(),cv=Te.define(),uv=Te.define(),Qd=Te.define(),Xd=Te.define(),dv=Te.define({combine:s=>s.some(e=>e)}),fv=Te.define({combine:s=>s.some(e=>e)}),hv=Te.define();class fr{constructor(e,t="nearest",i="nearest",n=5,r=5,o=!1){this.range=e,this.y=t,this.x=i,this.yMargin=n,this.xMargin=r,this.isSnapshot=o}map(e){return e.empty?this:new fr(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new fr(ue.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const _l=Xe.define({map:(s,e)=>s.map(e)}),pv=Xe.define();function ks(s,e,t){let i=s.facet(av);i.length?i[0](e):window.onerror&&window.onerror(String(e),t,void 0,void 0,e)||(t?console.error(t+":",e):console.error(e))}const Ti=Te.define({combine:s=>s.length?s[0]:!0});let p4=0;const Zn=Te.define({combine(s){return s.filter((e,t)=>{for(let i=0;i<t;i++)if(s[i].plugin==e.plugin)return!1;return!0})}});class Pt{constructor(e,t,i,n,r){this.id=e,this.create=t,this.domEventHandlers=i,this.domEventObservers=n,this.baseExtensions=r(this),this.extension=this.baseExtensions.concat(Zn.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(Zn.of({plugin:this,arg:e}))}static define(e,t){const{eventHandlers:i,eventObservers:n,provide:r,decorations:o}=t||{};return new Pt(p4++,e,i,n,l=>{let a=[];return o&&a.push(Ro.of(u=>{let c=u.plugin(l);return c?o(c):Fe.none})),r&&a.push(r(l)),a})}static fromClass(e,t){return Pt.define((i,n)=>new e(i,n),t)}}class Lc{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(i){if(ks(t.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(t){ks(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(i){ks(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const mv=Te.define(),Zd=Te.define(),Ro=Te.define(),gv=Te.define(),Zo=Te.define(),vv=Te.define();function vp(s,e){let t=s.state.facet(vv);if(!t.length)return t;let i=t.map(r=>r instanceof Function?r(s):r),n=[];return it.spans(i,e.from,e.to,{point(){},span(r,o,l,a){let u=r-e.from,c=o-e.from,d=n;for(let f=l.length-1;f>=0;f--,a--){let p=l[f].spec.bidiIsolate,v;if(p==null&&(p=h4(e.text,u,c)),a>0&&d.length&&(v=d[d.length-1]).to==u&&v.direction==p)v.to=c,d=v.inner;else{let k={from:u,to:c,direction:p,inner:[]};d.push(k),d=k.inner}}}}),n}const yv=Te.define();function ef(s){let e=0,t=0,i=0,n=0;for(let r of s.state.facet(yv)){let o=r(s);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(t=Math.max(t,o.right)),o.top!=null&&(i=Math.max(i,o.top)),o.bottom!=null&&(n=Math.max(n,o.bottom)))}return{left:e,right:t,top:i,bottom:n}}const Xr=Te.define();class Ns{constructor(e,t,i,n){this.fromA=e,this.toA=t,this.fromB=i,this.toB=n}join(e){return new Ns(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let n=e[t-1];if(!(n.fromA>i.toA)){if(n.toA<i.fromA)break;i=i.join(n),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(t.length==0)return e;let i=[];for(let n=0,r=0,o=0,l=0;;n++){let a=n==e.length?null:e[n],u=o-l,c=a?a.fromB:1e9;for(;r<t.length&&t[r]<c;){let d=t[r],f=t[r+1],p=Math.max(l,d),v=Math.min(c,f);if(p<=v&&new Ns(p+u,v+u,p,v).addToSet(i),f>c)break;r+=2}if(!a)return i;new Ns(a.fromA,a.toA,a.fromB,a.toB).addToSet(i),o=a.toA,l=a.toB}}}class ka{constructor(e,t,i){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=Lt.empty(this.startState.doc.length);for(let r of i)this.changes=this.changes.compose(r.changes);let n=[];this.changes.iterChangedRanges((r,o,l,a)=>n.push(new Ns(r,o,l,a))),this.changedRanges=n}static create(e,t,i){return new ka(e,t,i)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class yp extends pt{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Fe.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Ot],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Ns(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:u,toA:c})=>c<this.minWidthFrom||u>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let n=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?n=this.domChanged.newSel.head:!x4(e.changes,this.hasComposition)&&!e.selectionSet&&(n=e.state.selection.main.head));let r=n>-1?g4(this.view,e.changes,n):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:u,to:c}=this.hasComposition;i=new Ns(u,c,e.changes.mapPos(u,-1),e.changes.mapPos(c,1)).addToSet(i.slice())}this.hasComposition=r?{from:r.range.fromB,to:r.range.toB}:null,(De.ie||De.chrome)&&!r&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,l=this.updateDeco(),a=b4(o,l,e.changes);return i=Ns.extendWithRanges(i,a),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,e.startState.doc.length,r),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,i);let{observer:n}=this.view;n.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=De.chrome||De.ios?{node:n.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||n.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof Oi&&o.widget instanceof qu&&r.push(o.dom);n.updateGaps(r)}updateChildren(e,t,i){let n=i?i.range.addToSet(e.slice()):e,r=this.childCursor(t);for(let o=n.length-1;;o--){let l=o>=0?n[o]:null;if(!l)break;let{fromA:a,toA:u,fromB:c,toB:d}=l,f,p,v,k;if(i&&i.range.fromB<d&&i.range.toB>c){let H=mo.build(this.view.state.doc,c,i.range.fromB,this.decorations,this.dynamicDecorationMap),N=mo.build(this.view.state.doc,i.range.toB,d,this.decorations,this.dynamicDecorationMap);p=H.breakAtStart,v=H.openStart,k=N.openEnd;let P=this.compositionView(i);N.breakAtStart?P.breakAfter=1:N.content.length&&P.merge(P.length,P.length,N.content[0],!1,N.openStart,0)&&(P.breakAfter=N.content[0].breakAfter,N.content.shift()),H.content.length&&P.merge(0,0,H.content[H.content.length-1],!0,0,H.openEnd)&&H.content.pop(),f=H.content.concat(P).concat(N.content)}else({content:f,breakAtStart:p,openStart:v,openEnd:k}=mo.build(this.view.state.doc,c,d,this.decorations,this.dynamicDecorationMap));let{i:m,off:w}=r.findPos(u,1),{i:L,off:I}=r.findPos(a,-1);G0(this,L,I,m,w,f,p,v,k)}i&&this.fixCompositionDOM(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let i of t.effects)i.is(pv)&&(this.editContextFormatting=i.value)}compositionView(e){let t=new Xs(e.text.nodeValue);t.flags|=8;for(let{deco:n}of e.marks)t=new Ri(n,[t],t.length);let i=new Ot;return i.append(t,0),i}fixCompositionDOM(e){let t=(r,o)=>{o.flags|=8|(o.children.some(a=>a.flags&7)?1:0),this.markedForComposition.add(o);let l=pt.get(r);l&&l!=o&&(l.dom=null),o.setDOM(r)},i=this.childPos(e.range.fromB,1),n=this.children[i.i];t(e.line,n);for(let r=e.marks.length-1;r>=-1;r--)i=n.childPos(i.off,1),n=n.children[i.i],t(r>=0?e.marks[r].node:e.text,n)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,n=i==this.dom,r=!n&&!(this.view.state.facet(Ti)||this.dom.tabIndex>-1)&&Ql(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(n||t||r))return;let o=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(l.anchor)),u=l.empty?a:this.moveToLine(this.domAtPos(l.head));if(De.gecko&&l.empty&&!this.hasComposition&&m4(a)){let d=document.createTextNode("");this.view.observer.ignore(()=>a.node.insertBefore(d,a.node.childNodes[a.offset]||null)),a=u=new ts(d,0),o=!0}let c=this.view.observer.selectionRange;(o||!c.focusNode||(!po(a.node,a.offset,c.anchorNode,c.anchorOffset)||!po(u.node,u.offset,c.focusNode,c.focusOffset))&&!this.suppressWidgetCursorChange(c,l))&&(this.view.observer.ignore(()=>{De.android&&De.chrome&&this.dom.contains(c.focusNode)&&k4(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let d=jo(this.view.root);if(d)if(l.empty){if(De.gecko){let f=v4(a.node,a.offset);if(f&&f!=3){let p=(f==1?W0:K0)(a.node,a.offset);p&&(a=new ts(p.node,p.offset))}}d.collapse(a.node,a.offset),l.bidiLevel!=null&&d.caretBidiLevel!==void 0&&(d.caretBidiLevel=l.bidiLevel)}else if(d.extend){d.collapse(a.node,a.offset);try{d.extend(u.node,u.offset)}catch{}}else{let f=document.createRange();l.anchor>l.head&&([a,u]=[u,a]),f.setEnd(u.node,u.offset),f.setStart(a.node,a.offset),d.removeAllRanges(),d.addRange(f)}r&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(a,u)),this.impreciseAnchor=a.precise?null:new ts(c.anchorNode,c.anchorOffset),this.impreciseHead=u.precise?null:new ts(c.focusNode,c.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&po(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,i=jo(e.root),{anchorNode:n,anchorOffset:r}=e.observer.selectionRange;if(!i||!t.empty||!t.assoc||!i.modify)return;let o=Ot.find(this,t.head);if(!o)return;let l=o.posAtStart;if(t.head==l||t.head==l+o.length)return;let a=this.coordsAt(t.head,-1),u=this.coordsAt(t.head,1);if(!a||!u||a.bottom>u.top)return;let c=this.domAtPos(t.head+t.assoc);i.collapse(c.node,c.offset),i.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let d=e.observer.selectionRange;e.docView.posFromDOM(d.anchorNode,d.anchorOffset)!=t.from&&i.collapse(n,r)}moveToLine(e){let t=this.dom,i;if(e.node!=t)return e;for(let n=e.offset;!i&&n<t.childNodes.length;n++){let r=pt.get(t.childNodes[n]);r instanceof Ot&&(i=r.domAtPos(0))}for(let n=e.offset-1;!i&&n>=0;n--){let r=pt.get(t.childNodes[n]);r instanceof Ot&&(i=r.domAtPos(r.length))}return i?new ts(i.node,i.offset,!0):e}nearest(e){for(let t=e;t;){let i=pt.get(t);if(i&&i.rootView==this)return i;t=t.parentNode}return null}posFromDOM(e,t){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,t)+i.posAtStart}domAtPos(e){let{i:t,off:i}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let n=this.children[t];if(i<n.length||n instanceof Ot)break;t++,i=0}return this.children[t].domAtPos(i)}coordsAt(e,t){let i=null,n=0;for(let r=this.length,o=this.children.length-1;o>=0;o--){let l=this.children[o],a=r-l.breakAfter,u=a-l.length;if(a<e)break;if(u<=e&&(u<e||l.covers(-1))&&(a>e||l.covers(1))&&(!i||l instanceof Ot&&!(i instanceof Ot&&t>=0)))i=l,n=u;else if(i&&u==e&&a==e&&l instanceof Oi&&Math.abs(t)<2){if(l.deco.startSide<0)break;o&&(i=null)}r=u}return i?i.coordsAt(e-n,t):null}coordsForChar(e){let{i:t,off:i}=this.childPos(e,1),n=this.children[t];if(!(n instanceof Ot))return null;for(;n.children.length;){let{i:l,off:a}=n.childPos(i,1);for(;;l++){if(l==n.children.length)return null;if((n=n.children[l]).length)break}i=a}if(!(n instanceof Xs))return null;let r=Jt(n.text,i);if(r==i)return null;let o=Bn(n.dom,i,r).getClientRects();for(let l=0;l<o.length;l++){let a=o[l];if(l==o.length-1||a.top<a.bottom&&a.left<a.right)return a}return null}measureVisibleLineHeights(e){let t=[],{from:i,to:n}=e,r=this.view.contentDOM.clientWidth,o=r>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,a=this.view.textDirection==St.LTR;for(let u=0,c=0;c<this.children.length;c++){let d=this.children[c],f=u+d.length;if(f>n)break;if(u>=i){let p=d.dom.getBoundingClientRect();if(t.push(p.height),o){let v=d.dom.lastChild,k=v?$o(v):[];if(k.length){let m=k[k.length-1],w=a?m.right-p.left:p.right-m.left;w>l&&(l=w,this.minWidth=r,this.minWidthFrom=u,this.minWidthTo=f)}}}u=f+d.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?St.RTL:St.LTR}measureTextSize(){for(let r of this.children)if(r instanceof Ot){let o=r.measureTextSize();if(o)return o}let e=document.createElement("div"),t,i,n;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let r=$o(e.firstChild)[0];t=e.getBoundingClientRect().height,i=r?r.width/27:7,n=r?r.height:t,e.remove()}),{lineHeight:t,charWidth:i,textHeight:n}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new q0(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,n=0;;n++){let r=n==t.viewports.length?null:t.viewports[n],o=r?r.from-1:this.length;if(o>i){let l=(t.lineBlockAt(o).bottom-t.lineBlockAt(i).top)/this.view.scaleY;e.push(Fe.replace({widget:new qu(l),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!r)break;i=r.to+1}return Fe.set(e)}updateDeco(){let e=1,t=this.view.state.facet(Ro).map(r=>(this.dynamicDecorationMap[e++]=typeof r=="function")?r(this.view):r),i=!1,n=this.view.state.facet(gv).map((r,o)=>{let l=typeof r=="function";return l&&(i=!0),l?r(this.view):r});for(n.length&&(this.dynamicDecorationMap[e++]=i,t.push(it.join(n))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let u=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=u.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let u of this.view.state.facet(hv))try{if(u(this.view,e.range,e))return!0}catch(c){ks(this.view.state,c,"scroll handler")}let{range:t}=e,i=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),n;if(!i)return;!t.empty&&(n=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(i={left:Math.min(i.left,n.left),top:Math.min(i.top,n.top),right:Math.max(i.right,n.right),bottom:Math.max(i.bottom,n.bottom)});let r=ef(this.view),o={left:i.left-r.left,top:i.top-r.top,right:i.right+r.right,bottom:i.bottom+r.bottom},{offsetWidth:l,offsetHeight:a}=this.view.scrollDOM;G_(this.view.scrollDOM,o,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,l),-l),Math.max(Math.min(e.yMargin,a),-a),this.view.textDirection==St.LTR)}}function m4(s){return s.node.nodeType==1&&s.node.firstChild&&(s.offset==0||s.node.childNodes[s.offset-1].contentEditable=="false")&&(s.offset==s.node.childNodes.length||s.node.childNodes[s.offset].contentEditable=="false")}function bv(s,e){let t=s.observer.selectionRange;if(!t.focusNode)return null;let i=W0(t.focusNode,t.focusOffset),n=K0(t.focusNode,t.focusOffset),r=i||n;if(n&&i&&n.node!=i.node){let l=pt.get(n.node);if(!l||l instanceof Xs&&l.text!=n.node.nodeValue)r=n;else if(s.docView.lastCompositionAfterCursor){let a=pt.get(i.node);!a||a instanceof Xs&&a.text!=i.node.nodeValue||(r=n)}}if(s.docView.lastCompositionAfterCursor=r!=i,!r)return null;let o=e-r.offset;return{from:o,to:o+r.node.nodeValue.length,node:r.node}}function g4(s,e,t){let i=bv(s,t);if(!i)return null;let{node:n,from:r,to:o}=i,l=n.nodeValue;if(/[\n\r]/.test(l)||s.state.doc.sliceString(i.from,i.to)!=l)return null;let a=e.invertedDesc,u=new Ns(a.mapPos(r),a.mapPos(o),r,o),c=[];for(let d=n.parentNode;;d=d.parentNode){let f=pt.get(d);if(f instanceof Ri)c.push({node:d,deco:f.mark});else{if(f instanceof Ot||d.nodeName=="DIV"&&d.parentNode==s.contentDOM)return{range:u,text:n,marks:c,line:d};if(d!=s.contentDOM)c.push({node:d,deco:new Qo({inclusive:!0,attributes:i4(d),tagName:d.tagName.toLowerCase()})});else return null}}}function v4(s,e){return s.nodeType!=1?0:(e&&s.childNodes[e-1].contentEditable=="false"?1:0)|(e<s.childNodes.length&&s.childNodes[e].contentEditable=="false"?2:0)}let y4=class{constructor(){this.changes=[]}compareRange(e,t){Xl(e,t,this.changes)}comparePoint(e,t){Xl(e,t,this.changes)}boundChange(e){Xl(e,e,this.changes)}};function b4(s,e,t){let i=new y4;return it.compare(s,e,t,i),i.changes}function k4(s,e){for(let t=s;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function x4(s,e){let t=!1;return e&&s.iterChangedRanges((i,n)=>{i<e.to&&n>e.from&&(t=!0)}),t}function w4(s,e,t=1){let i=s.charCategorizer(e),n=s.doc.lineAt(e),r=e-n.from;if(n.length==0)return ue.cursor(e);r==0?t=1:r==n.length&&(t=-1);let o=r,l=r;t<0?o=Jt(n.text,r,!1):l=Jt(n.text,r);let a=i(n.text.slice(o,l));for(;o>0;){let u=Jt(n.text,o,!1);if(i(n.text.slice(u,o))!=a)break;o=u}for(;l<n.length;){let u=Jt(n.text,l);if(i(n.text.slice(l,u))!=a)break;l=u}return ue.range(o+n.from,l+n.from)}function S4(s,e){return e.left>s?e.left-s:Math.max(0,s-e.right)}function C4(s,e){return e.top>s?e.top-s:Math.max(0,s-e.bottom)}function Vc(s,e){return s.top<e.bottom-1&&s.bottom>e.top+1}function bp(s,e){return e<s.top?{top:e,left:s.left,right:s.right,bottom:s.bottom}:s}function kp(s,e){return e>s.bottom?{top:s.top,left:s.left,right:s.right,bottom:e}:s}function Xu(s,e,t){let i,n,r,o,l=!1,a,u,c,d;for(let v=s.firstChild;v;v=v.nextSibling){let k=$o(v);for(let m=0;m<k.length;m++){let w=k[m];n&&Vc(n,w)&&(w=bp(kp(w,n.bottom),n.top));let L=S4(e,w),I=C4(t,w);if(L==0&&I==0)return v.nodeType==3?xp(v,e,t):Xu(v,e,t);(!i||o>I||o==I&&r>L)&&(i=v,n=w,r=L,o=I,l=L?e<w.left?m>0:m<k.length-1:!0),L==0?t>w.bottom&&(!c||c.bottom<w.bottom)?(a=v,c=w):t<w.top&&(!d||d.top>w.top)&&(u=v,d=w):c&&Vc(c,w)?c=kp(c,w.bottom):d&&Vc(d,w)&&(d=bp(d,w.top))}}if(c&&c.bottom>=t?(i=a,n=c):d&&d.top<=t&&(i=u,n=d),!i)return{node:s,offset:0};let f=Math.max(n.left,Math.min(n.right,e));if(i.nodeType==3)return xp(i,f,t);if(l&&i.contentEditable!="false")return Xu(i,f,t);let p=Array.prototype.indexOf.call(s.childNodes,i)+(e>=(n.left+n.right)/2?1:0);return{node:s,offset:p}}function xp(s,e,t){let i=s.nodeValue.length,n=-1,r=1e9,o=0;for(let l=0;l<i;l++){let a=Bn(s,l,l+1).getClientRects();for(let u=0;u<a.length;u++){let c=a[u];if(c.top==c.bottom)continue;o||(o=e-c.left);let d=(c.top>t?c.top-t:t-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&d<r){let f=e>=(c.left+c.right)/2,p=f;if((De.chrome||De.gecko)&&Bn(s,l).getBoundingClientRect().left==c.right&&(p=!f),d<=0)return{node:s,offset:l+(p?1:0)};n=l+(p?1:0),r=d}}}return{node:s,offset:n>-1?n:o>0?s.nodeValue.length:0}}function kv(s,e,t,i=-1){var n,r;let o=s.contentDOM.getBoundingClientRect(),l=o.top+s.viewState.paddingTop,a,{docHeight:u}=s.viewState,{x:c,y:d}=e,f=d-l;if(f<0)return 0;if(f>u)return s.state.doc.length;for(let H=s.viewState.heightOracle.textHeight/2,N=!1;a=s.elementAtHeight(f),a.type!=ps.Text;)for(;f=i>0?a.bottom+H:a.top-H,!(f>=0&&f<=u);){if(N)return t?null:0;N=!0,i=-i}d=l+f;let p=a.from;if(p<s.viewport.from)return s.viewport.from==0?0:t?null:wp(s,o,a,c,d);if(p>s.viewport.to)return s.viewport.to==s.state.doc.length?s.state.doc.length:t?null:wp(s,o,a,c,d);let v=s.dom.ownerDocument,k=s.root.elementFromPoint?s.root:v,m=k.elementFromPoint(c,d);m&&!s.contentDOM.contains(m)&&(m=null),m||(c=Math.max(o.left+1,Math.min(o.right-1,c)),m=k.elementFromPoint(c,d),m&&!s.contentDOM.contains(m)&&(m=null));let w,L=-1;if(m&&((n=s.docView.nearest(m))===null||n===void 0?void 0:n.isEditable)!=!1){if(v.caretPositionFromPoint){let H=v.caretPositionFromPoint(c,d);H&&({offsetNode:w,offset:L}=H)}else if(v.caretRangeFromPoint){let H=v.caretRangeFromPoint(c,d);H&&({startContainer:w,startOffset:L}=H)}w&&(!s.contentDOM.contains(w)||De.safari&&_4(w,L,c)||De.chrome&&A4(w,L,c))&&(w=void 0),w&&(L=Math.min(bi(w),L))}if(!w||!s.docView.dom.contains(w)){let H=Ot.find(s.docView,p);if(!H)return f>a.top+a.height/2?a.to:a.from;({node:w,offset:L}=Xu(H.dom,c,d))}let I=s.docView.nearest(w);if(!I)return null;if(I.isWidget&&((r=I.dom)===null||r===void 0?void 0:r.nodeType)==1){let H=I.dom.getBoundingClientRect();return e.y<H.top||e.y<=H.bottom&&e.x<=(H.left+H.right)/2?I.posAtStart:I.posAtEnd}else return I.localPosFromDOM(w,L)+I.posAtStart}function wp(s,e,t,i,n){let r=Math.round((i-e.left)*s.defaultCharacterWidth);if(s.lineWrapping&&t.height>s.defaultLineHeight*1.5){let l=s.viewState.heightOracle.textHeight,a=Math.floor((n-t.top-(s.defaultLineHeight-l)*.5)/l);r+=a*s.viewState.heightOracle.lineLength}let o=s.state.sliceDoc(t.from,t.to);return t.from+Vu(o,r,s.state.tabSize)}function xv(s,e,t){let i,n=s;if(s.nodeType!=3||e!=(i=s.nodeValue.length))return!1;for(;;){let r=n.nextSibling;if(r){if(r.nodeName=="BR")break;return!1}else{let o=n.parentNode;if(!o||o.nodeName=="DIV")break;n=o}}return Bn(s,i-1,i).getBoundingClientRect().right>t}function _4(s,e,t){return xv(s,e,t)}function A4(s,e,t){if(e!=0)return xv(s,e,t);for(let n=s;;){let r=n.parentNode;if(!r||r.nodeType!=1||r.firstChild!=n)return!1;if(r.classList.contains("cm-line"))break;n=r}let i=s.nodeType==1?s.getBoundingClientRect():Bn(s,0,Math.max(s.nodeValue.length,1)).getBoundingClientRect();return t-i.left>5}function Zu(s,e,t){let i=s.lineBlockAt(e);if(Array.isArray(i.type)){let n;for(let r of i.type){if(r.from>e)break;if(!(r.to<e)){if(r.from<e&&r.to>e)return r;(!n||r.type==ps.Text&&(n.type!=r.type||(t<0?r.from<e:r.to>e)))&&(n=r)}}return n||i}return i}function M4(s,e,t,i){let n=Zu(s,e.head,e.assoc||-1),r=!i||n.type!=ps.Text||!(s.lineWrapping||n.widgetLineBreaks)?null:s.coordsAtPos(e.assoc<0&&e.head>n.from?e.head-1:e.head);if(r){let o=s.dom.getBoundingClientRect(),l=s.textDirectionAt(n.from),a=s.posAtCoords({x:t==(l==St.LTR)?o.right-1:o.left+1,y:(r.top+r.bottom)/2});if(a!=null)return ue.cursor(a,t?-1:1)}return ue.cursor(t?n.to:n.from,t?-1:1)}function Sp(s,e,t,i){let n=s.state.doc.lineAt(e.head),r=s.bidiSpans(n),o=s.textDirectionAt(n.from);for(let l=e,a=null;;){let u=f4(n,r,o,l,t),c=nv;if(!u){if(n.number==(t?s.state.doc.lines:1))return l;c=`
`,n=s.state.doc.line(n.number+(t?1:-1)),r=s.bidiSpans(n),u=s.visualLineSide(n,!t)}if(a){if(!a(c))return l}else{if(!i)return u;a=i(c)}l=u}}function D4(s,e,t){let i=s.state.charCategorizer(e),n=i(t);return r=>{let o=i(r);return n==Ct.Space&&(n=o),n==o}}function E4(s,e,t,i){let n=e.head,r=t?1:-1;if(n==(t?s.state.doc.length:0))return ue.cursor(n,e.assoc);let o=e.goalColumn,l,a=s.contentDOM.getBoundingClientRect(),u=s.coordsAtPos(n,e.assoc||-1),c=s.documentTop;if(u)o==null&&(o=u.left-a.left),l=r<0?u.top:u.bottom;else{let p=s.viewState.lineBlockAt(n);o==null&&(o=Math.min(a.right-a.left,s.defaultCharacterWidth*(n-p.from))),l=(r<0?p.top:p.bottom)+c}let d=a.left+o,f=i??s.viewState.heightOracle.textHeight>>1;for(let p=0;;p+=10){let v=l+(f+p)*r,k=kv(s,{x:d,y:v},!1,r);if(v<a.top||v>a.bottom||(r<0?k<n:k>n)){let m=s.docView.coordsForChar(k),w=!m||v<m.top?-1:1;return ue.cursor(k,w,void 0,o)}}}function go(s,e,t){for(;;){let i=0;for(let n of s)n.between(e-1,e+1,(r,o,l)=>{if(e>r&&e<o){let a=i||t||(e-r<o-e?-1:1);e=a<0?r:o,i=a}});if(!i)return e}}function wv(s,e){let t=null;for(let i=0;i<e.ranges.length;i++){let n=e.ranges[i],r=null;if(n.empty){let o=go(s,n.from,0);o!=n.from&&(r=ue.cursor(o,-1))}else{let o=go(s,n.from,-1),l=go(s,n.to,1);(o!=n.from||l!=n.to)&&(r=ue.range(n.from==n.anchor?o:l,n.from==n.head?o:l))}r&&(t||(t=e.ranges.slice()),t[i]=r)}return t?ue.create(t,e.mainIndex):e}function Bc(s,e,t){let i=go(s.state.facet(Zo).map(n=>n(s)),t.from,e.head>t.from?-1:1);return i==t.from?t:ue.cursor(i,i<t.from?1:-1)}const Zr="";class T4{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(st.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Zr}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let n=e;;){this.findPointBefore(i,n);let r=this.text.length;this.readNode(n);let o=n.nextSibling;if(o==t)break;let l=pt.get(n),a=pt.get(o);(l&&a?l.breakAfter:(l?l.breakAfter:ya(n))||ya(o)&&(n.nodeName!="BR"||n.cmIgnore)&&this.text.length>r)&&!P4(o,t)&&this.lineBreak(),n=o}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,n=this.lineSeparator?null:/\r\n?|\n/g;;){let r=-1,o=1,l;if(this.lineSeparator?(r=t.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(l=n.exec(t))&&(r=l.index,o=l[0].length),this.append(t.slice(i,r<0?t.length:r)),r<0)break;if(this.lineBreak(),o>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=o-1);i=r+o}}readNode(e){if(e.cmIgnore)return;let t=pt.get(e),i=t&&t.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let n=i.iter();!n.next().done;)n.lineBreak?this.lineBreak():this.append(n.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(O4(e,i.node,i.offset)?t:0))}}function O4(s,e,t){for(;;){if(!e||t<bi(e))return!1;if(e==s)return!0;t=Vn(e)+1,e=e.parentNode}}function P4(s,e){let t;for(;!(s==e||!s);s=s.nextSibling){let i=pt.get(s);if(!(i?.isWidget||s.cmIgnore))return!1;i&&(t||(t=[])).push(i)}if(t)for(let i of t){let n=i.overrideDOMText;if(n?.length)return!1}return!0}class Cp{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class j4{constructor(e,t,i,n){this.typeOver=n,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:r,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,i,0))){let l=r||o?[]:R4(e),a=new T4(l,e.state);a.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=a.text,this.newSel=L4(l,this.bounds.from)}else{let l=e.observer.selectionRange,a=r&&r.node==l.focusNode&&r.offset==l.focusOffset||!Hu(e.contentDOM,l.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(l.focusNode,l.focusOffset),u=o&&o.node==l.anchorNode&&o.offset==l.anchorOffset||!Hu(e.contentDOM,l.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(l.anchorNode,l.anchorOffset),c=e.viewport;if((De.ios||De.chrome)&&e.state.selection.main.empty&&a!=u&&(c.from>0||c.to<e.state.doc.length)){let d=Math.min(a,u),f=Math.max(a,u),p=c.from-d,v=c.to-f;(p==0||p==1||d==0)&&(v==0||v==-1||f==e.state.doc.length)&&(a=0,u=e.state.doc.length)}this.newSel=ue.single(u,a)}}}function Sv(s,e){let t,{newSel:i}=e,n=s.state.selection.main,r=s.inputState.lastKeyTime>Date.now()-100?s.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:l}=e.bounds,a=n.from,u=null;(r===8||De.android&&e.text.length<l-o)&&(a=n.to,u="end");let c=Cv(s.state.doc.sliceString(o,l,Zr),e.text,a-o,u);c&&(De.chrome&&r==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==Zr+Zr&&c.toB--,t={from:o+c.from,to:o+c.toA,insert:nt.of(e.text.slice(c.from,c.toB).split(Zr))})}else i&&(!s.hasFocus&&s.state.facet(Ti)||i.main.eq(n))&&(i=null);if(!t&&!i)return!1;if(!t&&e.typeOver&&!n.empty&&i&&i.main.empty?t={from:n.from,to:n.to,insert:s.state.doc.slice(n.from,n.to)}:(De.mac||De.android)&&t&&t.from==t.to&&t.from==n.head-1&&/^\. ?$/.test(t.insert.toString())&&s.contentDOM.getAttribute("autocorrect")=="off"?(i&&t.insert.length==2&&(i=ue.single(i.main.anchor-1,i.main.head-1)),t={from:t.from,to:t.to,insert:nt.of([t.insert.toString().replace("."," ")])}):t&&t.from>=n.from&&t.to<=n.to&&(t.from!=n.from||t.to!=n.to)&&n.to-n.from-(t.to-t.from)<=4?t={from:n.from,to:n.to,insert:s.state.doc.slice(n.from,t.from).append(t.insert).append(s.state.doc.slice(t.to,n.to))}:De.chrome&&t&&t.from==t.to&&t.from==n.head&&t.insert.toString()==`
 `&&s.lineWrapping&&(i&&(i=ue.single(i.main.anchor-1,i.main.head-1)),t={from:n.from,to:n.to,insert:nt.of([" "])}),t)return tf(s,t,i,r);if(i&&!i.main.eq(n)){let o=!1,l="select";return s.inputState.lastSelectionTime>Date.now()-50&&(s.inputState.lastSelectionOrigin=="select"&&(o=!0),l=s.inputState.lastSelectionOrigin,l=="select.pointer"&&(i=wv(s.state.facet(Zo).map(a=>a(s)),i))),s.dispatch({selection:i,scrollIntoView:o,userEvent:l}),!0}else return!1}function tf(s,e,t,i=-1){if(De.ios&&s.inputState.flushIOSKey(e))return!0;let n=s.state.selection.main;if(De.android&&(e.to==n.to&&(e.from==n.from||e.from==n.from-1&&s.state.sliceDoc(e.from,n.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&dr(s.contentDOM,"Enter",13)||(e.from==n.from-1&&e.to==n.to&&e.insert.length==0||i==8&&e.insert.length<e.to-e.from&&e.to>n.head)&&dr(s.contentDOM,"Backspace",8)||e.from==n.from&&e.to==n.to+1&&e.insert.length==0&&dr(s.contentDOM,"Delete",46)))return!0;let r=e.insert.toString();s.inputState.composing>=0&&s.inputState.composing++;let o,l=()=>o||(o=$4(s,e,t));return s.state.facet(cv).some(a=>a(s,e.from,e.to,r,l))||s.dispatch(l()),!0}function $4(s,e,t){let i,n=s.state,r=n.selection.main,o=-1;if(e.from==e.to&&e.from<r.from||e.from>r.to){let a=e.from<r.from?-1:1,u=a<0?r.from:r.to,c=go(n.facet(Zo).map(d=>d(s)),u,a);e.from==c&&(o=c)}if(o>-1)i={changes:e,selection:ue.cursor(e.from+e.insert.length,-1)};else if(e.from>=r.from&&e.to<=r.to&&e.to-e.from>=(r.to-r.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&s.inputState.composing<0){let a=r.from<e.from?n.sliceDoc(r.from,e.from):"",u=r.to>e.to?n.sliceDoc(e.to,r.to):"";i=n.replaceSelection(s.state.toText(a+e.insert.sliceString(0,void 0,s.state.lineBreak)+u))}else{let a=n.changes(e),u=t&&t.main.to<=a.newLength?t.main:void 0;if(n.selection.ranges.length>1&&s.inputState.composing>=0&&e.to<=r.to&&e.to>=r.to-10){let c=s.state.sliceDoc(e.from,e.to),d,f=t&&bv(s,t.main.head);if(f){let k=e.insert.length-(e.to-e.from);d={from:f.from,to:f.to-k}}else d=s.state.doc.lineAt(r.head);let p=r.to-e.to,v=r.to-r.from;i=n.changeByRange(k=>{if(k.from==r.from&&k.to==r.to)return{changes:a,range:u||k.map(a)};let m=k.to-p,w=m-c.length;if(k.to-k.from!=v||s.state.sliceDoc(w,m)!=c||k.to>=d.from&&k.from<=d.to)return{range:k};let L=n.changes({from:w,to:m,insert:e.insert}),I=k.to-r.to;return{changes:L,range:u?ue.range(Math.max(0,u.anchor+I),Math.max(0,u.head+I)):k.map(L)}})}else i={changes:a,selection:u&&n.selection.replaceRange(u)}}let l="input.type";return(s.composing||s.inputState.compositionPendingChange&&s.inputState.compositionEndedAt>Date.now()-50)&&(s.inputState.compositionPendingChange=!1,l+=".compose",s.inputState.compositionFirstChange&&(l+=".start",s.inputState.compositionFirstChange=!1)),n.update(i,{userEvent:l,scrollIntoView:!0})}function Cv(s,e,t,i){let n=Math.min(s.length,e.length),r=0;for(;r<n&&s.charCodeAt(r)==e.charCodeAt(r);)r++;if(r==n&&s.length==e.length)return null;let o=s.length,l=e.length;for(;o>0&&l>0&&s.charCodeAt(o-1)==e.charCodeAt(l-1);)o--,l--;if(i=="end"){let a=Math.max(0,r-Math.min(o,l));t-=o+a-r}if(o<r&&s.length<e.length){let a=t<=r&&t>=o?r-t:0;r-=a,l=r+(l-o),o=r}else if(l<r){let a=t<=r&&t>=l?r-t:0;r-=a,o=r+(o-l),l=r}return{from:r,toA:o,toB:l}}function R4(s){let e=[];if(s.root.activeElement!=s.contentDOM)return e;let{anchorNode:t,anchorOffset:i,focusNode:n,focusOffset:r}=s.observer.selectionRange;return t&&(e.push(new Cp(t,i)),(n!=t||r!=i)&&e.push(new Cp(n,r))),e}function L4(s,e){if(s.length==0)return null;let t=s[0].pos,i=s.length==2?s[1].pos:t;return t>-1&&i>-1?ue.single(t+e,i+e):null}class V4{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,De.safari&&e.contentDOM.addEventListener("input",()=>null),De.gecko&&Z4(e.contentDOM.ownerDocument)}handleEvent(e){!W4(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,t){let i=this.handlers[e];if(i){for(let n of i.observers)n(this.view,t);for(let n of i.handlers){if(t.defaultPrevented)break;if(n(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=B4(e),i=this.handlers,n=this.view.contentDOM;for(let r in t)if(r!="scroll"){let o=!t[r].handlers.length,l=i[r];l&&o!=!l.handlers.length&&(n.removeEventListener(r,this.handleEvent),l=null),l||n.addEventListener(r,this.handleEvent,{passive:o})}for(let r in i)r!="scroll"&&!t[r]&&n.removeEventListener(r,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&Av.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),De.android&&De.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return De.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=_v.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||I4.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,dr(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return!/^key/.test(e.type)||e.synthetic?!1:this.composing>0?!0:De.safari&&!De.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function _p(s,e){return(t,i)=>{try{return e.call(s,i,t)}catch(n){ks(t.state,n)}}}function B4(s){let e=Object.create(null);function t(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of s){let n=i.spec,r=n&&n.plugin.domEventHandlers,o=n&&n.plugin.domEventObservers;if(r)for(let l in r){let a=r[l];a&&t(l).handlers.push(_p(i.value,a))}if(o)for(let l in o){let a=o[l];a&&t(l).observers.push(_p(i.value,a))}}for(let i in Zs)t(i).handlers.push(Zs[i]);for(let i in Us)t(i).observers.push(Us[i]);return e}const _v=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],I4="dthko",Av=[16,17,18,20,91,92,224,225],Al=6;function Ml(s){return Math.max(0,s)*.7+8}function N4(s,e){return Math.max(Math.abs(s.clientX-e.clientX),Math.abs(s.clientY-e.clientY))}class F4{constructor(e,t,i,n){this.view=e,this.startEvent=t,this.style=i,this.mustSelect=n,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=J_(e.contentDOM),this.atoms=e.state.facet(Zo).map(o=>o(e));let r=e.contentDOM.ownerDocument;r.addEventListener("mousemove",this.move=this.move.bind(this)),r.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(st.allowMultipleSelections)&&z4(e,t),this.dragging=H4(e,t)&&Ev(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&N4(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,i=0,n=0,r=0,o=this.view.win.innerWidth,l=this.view.win.innerHeight;this.scrollParents.x&&({left:n,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:r,bottom:l}=this.scrollParents.y.getBoundingClientRect());let a=ef(this.view);e.clientX-a.left<=n+Al?t=-Ml(n-e.clientX):e.clientX+a.right>=o-Al&&(t=Ml(e.clientX-o)),e.clientY-a.top<=r+Al?i=-Ml(r-e.clientY):e.clientY+a.bottom>=l-Al&&(i=Ml(e.clientY-l)),this.setScrollSpeed(t,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:t}=this,i=wv(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function z4(s,e){let t=s.state.facet(rv);return t.length?t[0](e):De.mac?e.metaKey:e.ctrlKey}function U4(s,e){let t=s.state.facet(ov);return t.length?t[0](e):De.mac?!e.altKey:!e.ctrlKey}function H4(s,e){let{main:t}=s.state.selection;if(t.empty)return!1;let i=jo(s.root);if(!i||i.rangeCount==0)return!0;let n=i.getRangeAt(0).getClientRects();for(let r=0;r<n.length;r++){let o=n[r];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function W4(s,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,i;t!=s.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(i=pt.get(t))&&i.ignoreEvent(e))return!1;return!0}const Zs=Object.create(null),Us=Object.create(null),Mv=De.ie&&De.ie_version<15||De.ios&&De.webkit_version<604;function K4(s){let e=s.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{s.focus(),t.remove(),Dv(s,t.value)},50)}function rc(s,e,t){for(let i of s.facet(e))t=i(t,s);return t}function Dv(s,e){e=rc(s.state,Qd,e);let{state:t}=s,i,n=1,r=t.toText(e),o=r.lines==t.selection.ranges.length;if(ed!=null&&t.selection.ranges.every(a=>a.empty)&&ed==r.toString()){let a=-1;i=t.changeByRange(u=>{let c=t.doc.lineAt(u.from);if(c.from==a)return{range:u};a=c.from;let d=t.toText((o?r.line(n++).text:e)+t.lineBreak);return{changes:{from:c.from,insert:d},range:ue.cursor(u.from+d.length)}})}else o?i=t.changeByRange(a=>{let u=r.line(n++);return{changes:{from:a.from,to:a.to,insert:u.text},range:ue.cursor(a.from+u.length)}}):i=t.replaceSelection(r);s.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}Us.scroll=s=>{s.inputState.lastScrollTop=s.scrollDOM.scrollTop,s.inputState.lastScrollLeft=s.scrollDOM.scrollLeft};Zs.keydown=(s,e)=>(s.inputState.setSelectionOrigin("select"),e.keyCode==27&&s.inputState.tabFocusMode!=0&&(s.inputState.tabFocusMode=Date.now()+2e3),!1);Us.touchstart=(s,e)=>{s.inputState.lastTouchTime=Date.now(),s.inputState.setSelectionOrigin("select.pointer")};Us.touchmove=s=>{s.inputState.setSelectionOrigin("select.pointer")};Zs.mousedown=(s,e)=>{if(s.observer.flush(),s.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let i of s.state.facet(lv))if(t=i(s,e),t)break;if(!t&&e.button==0&&(t=J4(s,e)),t){let i=!s.hasFocus;s.inputState.startMouseSelection(new F4(s,e,t,i)),i&&s.observer.ignore(()=>{z0(s.contentDOM);let r=s.root.activeElement;r&&!r.contains(s.contentDOM)&&r.blur()});let n=s.inputState.mouseSelection;if(n)return n.start(e),n.dragging===!1}else s.inputState.setSelectionOrigin("select.pointer");return!1};function Ap(s,e,t,i){if(i==1)return ue.cursor(e,t);if(i==2)return w4(s.state,e,t);{let n=Ot.find(s.docView,e),r=s.state.doc.lineAt(n?n.posAtEnd:e),o=n?n.posAtStart:r.from,l=n?n.posAtEnd:r.to;return l<s.state.doc.length&&l==r.to&&l++,ue.range(o,l)}}let Mp=(s,e,t)=>e>=t.top&&e<=t.bottom&&s>=t.left&&s<=t.right;function q4(s,e,t,i){let n=Ot.find(s.docView,e);if(!n)return 1;let r=e-n.posAtStart;if(r==0)return 1;if(r==n.length)return-1;let o=n.coordsAt(r,-1);if(o&&Mp(t,i,o))return-1;let l=n.coordsAt(r,1);return l&&Mp(t,i,l)?1:o&&o.bottom>=i?-1:1}function Dp(s,e){let t=s.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:q4(s,t,e.clientX,e.clientY)}}const G4=De.ie&&De.ie_version<=11;let Ep=null,Tp=0,Op=0;function Ev(s){if(!G4)return s.detail;let e=Ep,t=Op;return Ep=s,Op=Date.now(),Tp=!e||t>Date.now()-400&&Math.abs(e.clientX-s.clientX)<2&&Math.abs(e.clientY-s.clientY)<2?(Tp+1)%3:1}function J4(s,e){let t=Dp(s,e),i=Ev(e),n=s.state.selection;return{update(r){r.docChanged&&(t.pos=r.changes.mapPos(t.pos),n=n.map(r.changes))},get(r,o,l){let a=Dp(s,r),u,c=Ap(s,a.pos,a.bias,i);if(t.pos!=a.pos&&!o){let d=Ap(s,t.pos,t.bias,i),f=Math.min(d.from,c.from),p=Math.max(d.to,c.to);c=f<c.from?ue.range(f,p):ue.range(p,f)}return o?n.replaceRange(n.main.extend(c.from,c.to)):l&&i==1&&n.ranges.length>1&&(u=Y4(n,a.pos))?u:l?n.addRange(c):ue.create([c])}}}function Y4(s,e){for(let t=0;t<s.ranges.length;t++){let{from:i,to:n}=s.ranges[t];if(i<=e&&n>=e)return ue.create(s.ranges.slice(0,t).concat(s.ranges.slice(t+1)),s.mainIndex==t?0:s.mainIndex-(s.mainIndex>t?1:0))}return null}Zs.dragstart=(s,e)=>{let{selection:{main:t}}=s.state;if(e.target.draggable){let n=s.docView.nearest(e.target);if(n&&n.isWidget){let r=n.posAtStart,o=r+n.length;(r>=t.to||o<=t.from)&&(t=ue.range(r,o))}}let{inputState:i}=s;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",rc(s.state,Xd,s.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Zs.dragend=s=>(s.inputState.draggedContent=null,!1);function Pp(s,e,t,i){if(t=rc(s.state,Qd,t),!t)return;let n=s.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:r}=s.inputState,o=i&&r&&U4(s,e)?{from:r.from,to:r.to}:null,l={from:n,insert:t},a=s.state.changes(o?[o,l]:l);s.focus(),s.dispatch({changes:a,selection:{anchor:a.mapPos(n,-1),head:a.mapPos(n,1)},userEvent:o?"move.drop":"input.drop"}),s.inputState.draggedContent=null}Zs.drop=(s,e)=>{if(!e.dataTransfer)return!1;if(s.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let i=Array(t.length),n=0,r=()=>{++n==t.length&&Pp(s,e,i.filter(o=>o!=null).join(s.state.lineBreak),!1)};for(let o=0;o<t.length;o++){let l=new FileReader;l.onerror=r,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(i[o]=l.result),r()},l.readAsText(t[o])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return Pp(s,e,i,!0),!0}return!1};Zs.paste=(s,e)=>{if(s.state.readOnly)return!0;s.observer.flush();let t=Mv?null:e.clipboardData;return t?(Dv(s,t.getData("text/plain")||t.getData("text/uri-list")),!0):(K4(s),!1)};function Q4(s,e){let t=s.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),s.focus()},50)}function X4(s){let e=[],t=[],i=!1;for(let n of s.selection.ranges)n.empty||(e.push(s.sliceDoc(n.from,n.to)),t.push(n));if(!e.length){let n=-1;for(let{from:r}of s.selection.ranges){let o=s.doc.lineAt(r);o.number>n&&(e.push(o.text),t.push({from:o.from,to:Math.min(s.doc.length,o.to+1)})),n=o.number}i=!0}return{text:rc(s,Xd,e.join(s.lineBreak)),ranges:t,linewise:i}}let ed=null;Zs.copy=Zs.cut=(s,e)=>{let{text:t,ranges:i,linewise:n}=X4(s.state);if(!t&&!n)return!1;ed=n?t:null,e.type=="cut"&&!s.state.readOnly&&s.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let r=Mv?null:e.clipboardData;return r?(r.clearData(),r.setData("text/plain",t),!0):(Q4(s,t),!1)};const Tv=Bi.define();function Ov(s,e){let t=[];for(let i of s.facet(uv)){let n=i(s,e);n&&t.push(n)}return t.length?s.update({effects:t,annotations:Tv.of(!0)}):null}function Pv(s){setTimeout(()=>{let e=s.hasFocus;if(e!=s.inputState.notifiedFocused){let t=Ov(s.state,e);t?s.dispatch(t):s.update([])}},10)}Us.focus=s=>{s.inputState.lastFocusTime=Date.now(),!s.scrollDOM.scrollTop&&(s.inputState.lastScrollTop||s.inputState.lastScrollLeft)&&(s.scrollDOM.scrollTop=s.inputState.lastScrollTop,s.scrollDOM.scrollLeft=s.inputState.lastScrollLeft),Pv(s)};Us.blur=s=>{s.observer.clearSelectionRange(),Pv(s)};Us.compositionstart=Us.compositionupdate=s=>{s.observer.editContext||(s.inputState.compositionFirstChange==null&&(s.inputState.compositionFirstChange=!0),s.inputState.composing<0&&(s.inputState.composing=0))};Us.compositionend=s=>{s.observer.editContext||(s.inputState.composing=-1,s.inputState.compositionEndedAt=Date.now(),s.inputState.compositionPendingKey=!0,s.inputState.compositionPendingChange=s.observer.pendingRecords().length>0,s.inputState.compositionFirstChange=null,De.chrome&&De.android?s.observer.flushSoon():s.inputState.compositionPendingChange?Promise.resolve().then(()=>s.observer.flush()):setTimeout(()=>{s.inputState.composing<0&&s.docView.hasComposition&&s.update([])},50))};Us.contextmenu=s=>{s.inputState.lastContextMenu=Date.now()};Zs.beforeinput=(s,e)=>{var t,i;if(e.inputType=="insertReplacementText"&&s.observer.editContext){let r=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),o=e.getTargetRanges();if(r&&o.length){let l=o[0],a=s.posAtDOM(l.startContainer,l.startOffset),u=s.posAtDOM(l.endContainer,l.endOffset);return tf(s,{from:a,to:u,insert:s.state.toText(r)},null),!0}}let n;if(De.chrome&&De.android&&(n=_v.find(r=>r.inputType==e.inputType))&&(s.observer.delayAndroidKey(n.key,n.keyCode),n.key=="Backspace"||n.key=="Delete")){let r=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>r+10&&s.hasFocus&&(s.contentDOM.blur(),s.focus())},100)}return De.ios&&e.inputType=="deleteContentForward"&&s.observer.flushSoon(),De.safari&&e.inputType=="insertText"&&s.inputState.composing>=0&&setTimeout(()=>Us.compositionend(s,e),20),!1};const jp=new Set;function Z4(s){jp.has(s)||(jp.add(s),s.addEventListener("copy",()=>{}),s.addEventListener("cut",()=>{}))}const $p=["pre-wrap","normal","pre-line","break-spaces"];let wr=!1;function Rp(){wr=!1}class e5{constructor(e){this.lineWrapping=e,this.doc=nt.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return $p.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let n=e[i];n<0?i++:this.heightSamples[Math.floor(n*10)]||(t=!0,this.heightSamples[Math.floor(n*10)]=!0)}return t}refresh(e,t,i,n,r,o){let l=$p.indexOf(e)>-1,a=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=l;if(this.lineWrapping=l,this.lineHeight=t,this.charWidth=i,this.textHeight=n,this.lineLength=r,a){this.heightSamples={};for(let u=0;u<o.length;u++){let c=o[u];c<0?u++:this.heightSamples[Math.floor(c*10)]=!0}}return a}}class t5{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class pi{constructor(e,t,i,n,r){this.from=e,this.length=t,this.top=i,this.height=n,this._content=r}get type(){return typeof this._content=="number"?ps.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof cn?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new pi(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var wt=(function(s){return s[s.ByPos=0]="ByPos",s[s.ByHeight=1]="ByHeight",s[s.ByPosNoHeight=2]="ByPosNoHeight",s})(wt||(wt={}));const Zl=.001;class ms{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>Zl&&(wr=!0),this.height=e)}replace(e,t,i){return ms.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,n){let r=this,o=i.doc;for(let l=n.length-1;l>=0;l--){let{fromA:a,toA:u,fromB:c,toB:d}=n[l],f=r.lineAt(a,wt.ByPosNoHeight,i.setDoc(t),0,0),p=f.to>=u?f:r.lineAt(u,wt.ByPosNoHeight,i,0,0);for(d+=p.to-u,u=p.to;l>0&&f.from<=n[l-1].toA;)a=n[l-1].fromA,c=n[l-1].fromB,l--,a<f.from&&(f=r.lineAt(a,wt.ByPosNoHeight,i,0,0));c+=f.from-a,a=f.from;let v=sf.build(i.setDoc(o),e,c,d);r=xa(r,r.replace(a,u,v))}return r.updateHeight(i,0)}static empty(){return new As(0,0)}static of(e){if(e.length==1)return e[0];let t=0,i=e.length,n=0,r=0;for(;;)if(t==i)if(n>r*2){let l=e[t-1];l.break?e.splice(--t,1,l.left,null,l.right):e.splice(--t,1,l.left,l.right),i+=1+l.break,n-=l.size}else if(r>n*2){let l=e[i];l.break?e.splice(i,1,l.left,null,l.right):e.splice(i,1,l.left,l.right),i+=2+l.break,r-=l.size}else break;else if(n<r){let l=e[t++];l&&(n+=l.size)}else{let l=e[--i];l&&(r+=l.size)}let o=0;return e[t-1]==null?(o=1,t--):e[t]==null&&(o=1,i++),new s5(ms.of(e.slice(0,t)),o,ms.of(e.slice(i)))}}function xa(s,e){return s==e?s:(s.constructor!=e.constructor&&(wr=!0),e)}ms.prototype.size=1;class jv extends ms{constructor(e,t,i){super(e,t),this.deco=i}blockAt(e,t,i,n){return new pi(n,this.length,i,this.height,this.deco||0)}lineAt(e,t,i,n,r){return this.blockAt(0,i,n,r)}forEachLine(e,t,i,n,r,o){e<=r+this.length&&t>=r&&o(this.blockAt(0,i,n,r))}updateHeight(e,t=0,i=!1,n){return n&&n.from<=t&&n.more&&this.setHeight(n.heights[n.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class As extends jv{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,i,n){return new pi(n,this.length,i,this.height,this.breaks)}replace(e,t,i){let n=i[0];return i.length==1&&(n instanceof As||n instanceof Ht&&n.flags&4)&&Math.abs(this.length-n.length)<10?(n instanceof Ht?n=new As(n.length,this.height):n.height=this.height,this.outdated||(n.outdated=!1),n):ms.of(i)}updateHeight(e,t=0,i=!1,n){return n&&n.from<=t&&n.more?this.setHeight(n.heights[n.index++]):(i||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Ht extends ms{constructor(e){super(e,0)}heightMetrics(e,t){let i=e.doc.lineAt(t).number,n=e.doc.lineAt(t+this.length).number,r=n-i+1,o,l=0;if(e.lineWrapping){let a=Math.min(this.height,e.lineHeight*r);o=a/r,this.length>r+1&&(l=(this.height-a)/(this.length-r-1))}else o=this.height/r;return{firstLine:i,lastLine:n,perLine:o,perChar:l}}blockAt(e,t,i,n){let{firstLine:r,lastLine:o,perLine:l,perChar:a}=this.heightMetrics(t,n);if(t.lineWrapping){let u=n+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),c=t.doc.lineAt(u),d=l+c.length*a,f=Math.max(i,e-d/2);return new pi(c.from,c.length,f,d,0)}else{let u=Math.max(0,Math.min(o-r,Math.floor((e-i)/l))),{from:c,length:d}=t.doc.line(r+u);return new pi(c,d,i+l*u,l,0)}}lineAt(e,t,i,n,r){if(t==wt.ByHeight)return this.blockAt(e,i,n,r);if(t==wt.ByPosNoHeight){let{from:p,to:v}=i.doc.lineAt(e);return new pi(p,v-p,0,0,0)}let{firstLine:o,perLine:l,perChar:a}=this.heightMetrics(i,r),u=i.doc.lineAt(e),c=l+u.length*a,d=u.number-o,f=n+l*d+a*(u.from-r-d);return new pi(u.from,u.length,Math.max(n,Math.min(f,n+this.height-c)),c,0)}forEachLine(e,t,i,n,r,o){e=Math.max(e,r),t=Math.min(t,r+this.length);let{firstLine:l,perLine:a,perChar:u}=this.heightMetrics(i,r);for(let c=e,d=n;c<=t;){let f=i.doc.lineAt(c);if(c==e){let v=f.number-l;d+=a*v+u*(e-r-v)}let p=a+u*f.length;o(new pi(f.from,f.length,d,p,0)),d+=p,c=f.to+1}}replace(e,t,i){let n=this.length-t;if(n>0){let r=i[i.length-1];r instanceof Ht?i[i.length-1]=new Ht(r.length+n):i.push(null,new Ht(n-1))}if(e>0){let r=i[0];r instanceof Ht?i[0]=new Ht(e+r.length):i.unshift(new Ht(e-1),null)}return ms.of(i)}decomposeLeft(e,t){t.push(new Ht(e-1),null)}decomposeRight(e,t){t.push(null,new Ht(this.length-e-1))}updateHeight(e,t=0,i=!1,n){let r=t+this.length;if(n&&n.from<=t+this.length&&n.more){let o=[],l=Math.max(t,n.from),a=-1;for(n.from>t&&o.push(new Ht(n.from-t-1).updateHeight(e,t));l<=r&&n.more;){let c=e.doc.lineAt(l).length;o.length&&o.push(null);let d=n.heights[n.index++];a==-1?a=d:Math.abs(d-a)>=Zl&&(a=-2);let f=new As(c,d);f.outdated=!1,o.push(f),l+=c+1}l<=r&&o.push(null,new Ht(r-l).updateHeight(e,l));let u=ms.of(o);return(a<0||Math.abs(u.height-this.height)>=Zl||Math.abs(a-this.heightMetrics(e,t).perLine)>=Zl)&&(wr=!0),xa(this,u)}else(i||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class s5 extends ms{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,t,i,n){let r=i+this.left.height;return e<r?this.left.blockAt(e,t,i,n):this.right.blockAt(e,t,r,n+this.left.length+this.break)}lineAt(e,t,i,n,r){let o=n+this.left.height,l=r+this.left.length+this.break,a=t==wt.ByHeight?e<o:e<l,u=a?this.left.lineAt(e,t,i,n,r):this.right.lineAt(e,t,i,o,l);if(this.break||(a?u.to<l:u.from>l))return u;let c=t==wt.ByPosNoHeight?wt.ByPosNoHeight:wt.ByPos;return a?u.join(this.right.lineAt(l,c,i,o,l)):this.left.lineAt(l,c,i,n,r).join(u)}forEachLine(e,t,i,n,r,o){let l=n+this.left.height,a=r+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,t,i,n,r,o),t>=a&&this.right.forEachLine(e,t,i,l,a,o);else{let u=this.lineAt(a,wt.ByPos,i,n,r);e<u.from&&this.left.forEachLine(e,u.from-1,i,n,r,o),u.to>=e&&u.from<=t&&o(u),t>u.to&&this.right.forEachLine(u.to+1,t,i,l,a,o)}}replace(e,t,i){let n=this.left.length+this.break;if(t<n)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-n,t-n,i));let r=[];e>0&&this.decomposeLeft(e,r);let o=r.length;for(let l of i)r.push(l);if(e>0&&Lp(r,o-1),t<this.length){let l=r.length;this.decomposeRight(t,r),Lp(r,l)}return ms.of(r)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,n=i+this.break;if(e>=n)return this.right.decomposeRight(e-n,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<n&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?ms.of(this.break?[e,null,t]:[e,t]):(this.left=xa(this.left,e),this.right=xa(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,n){let{left:r,right:o}=this,l=t+r.length+this.break,a=null;return n&&n.from<=t+r.length&&n.more?a=r=r.updateHeight(e,t,i,n):r.updateHeight(e,t,i),n&&n.from<=l+o.length&&n.more?a=o=o.updateHeight(e,l,i,n):o.updateHeight(e,l,i),a?this.balanced(r,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Lp(s,e){let t,i;s[e]==null&&(t=s[e-1])instanceof Ht&&(i=s[e+1])instanceof Ht&&s.splice(e-1,3,new Ht(t.length+1+i.length))}const i5=5;class sf{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let i=Math.min(t,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof As?n.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new As(i-this.pos,-1)),this.writtenTo=i,t>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let n=i.widget?i.widget.estimatedHeight:0,r=i.widget?i.widget.lineBreaks:0;n<0&&(n=this.oracle.lineHeight);let o=t-e;i.block?this.addBlock(new jv(o,n,i)):(o||r||n>=i5)&&this.addLineDeco(n,r,o)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new As(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let i=new Ht(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof As)return e;let t=new As(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,i){let n=this.ensureLine();n.length+=i,n.collapsed+=i,n.widgetHeight=Math.max(n.widgetHeight,e),n.breaks+=t,this.writtenTo=this.pos=this.pos+i}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof As)&&!this.isCovered?this.nodes.push(new As(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let n of this.nodes)n instanceof As&&n.updateHeight(this.oracle,i),i+=n?n.length:1;return this.nodes}static build(e,t,i,n){let r=new sf(i,e);return it.spans(t,i,n,r,0),r.finish(i)}}function n5(s,e,t){let i=new r5;return it.compare(s,e,t,i,0),i.changes}class r5{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,n){(e<t||i&&i.heightRelevant||n&&n.heightRelevant)&&Xl(e,t,this.changes,5)}}function o5(s,e){let t=s.getBoundingClientRect(),i=s.ownerDocument,n=i.defaultView||window,r=Math.max(0,t.left),o=Math.min(n.innerWidth,t.right),l=Math.max(0,t.top),a=Math.min(n.innerHeight,t.bottom);for(let u=s.parentNode;u&&u!=i.body;)if(u.nodeType==1){let c=u,d=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&d.overflow!="visible"){let f=c.getBoundingClientRect();r=Math.max(r,f.left),o=Math.min(o,f.right),l=Math.max(l,f.top),a=Math.min(u==s.parentNode?n.innerHeight:a,f.bottom)}u=d.position=="absolute"||d.position=="fixed"?c.offsetParent:c.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:r-t.left,right:Math.max(r,o)-t.left,top:l-(t.top+e),bottom:Math.max(l,a)-(t.top+e)}}function l5(s){let e=s.getBoundingClientRect(),t=s.ownerDocument.defaultView||window;return e.left<t.innerWidth&&e.right>0&&e.top<t.innerHeight&&e.bottom>0}function a5(s,e){let t=s.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class Ic{constructor(e,t,i,n){this.from=e,this.to=t,this.size=i,this.displaySize=n}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let n=e[i],r=t[i];if(n.from!=r.from||n.to!=r.to||n.size!=r.size)return!1}return!0}draw(e,t){return Fe.replace({widget:new c5(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class c5 extends fn{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class Vp{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=Bp,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=St.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(Zd).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new e5(t),this.stateDeco=e.facet(Ro).filter(i=>typeof i!="function"),this.heightMap=ms.empty().applyChanges(this.stateDeco,nt.empty,this.heightOracle.setDoc(e.doc),[new Ns(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Fe.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let n=i?t.head:t.anchor;if(!e.some(({from:r,to:o})=>n>=r&&n<=o)){let{from:r,to:o}=this.lineBlockAt(n);e.push(new Dl(r,o))}}return this.viewports=e.sort((i,n)=>i.from-n.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?Bp:new nf(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(eo(e,this.scaler))})}update(e,t=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(Ro).filter(c=>typeof c!="function");let n=e.changedRanges,r=Ns.extendWithRanges(n,n5(i,this.stateDeco,e?e.changes:Lt.empty(this.state.doc.length))),o=this.heightMap.height,l=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);Rp(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),r),(this.heightMap.height!=o||wr)&&(e.flags|=2),l?(this.scrollAnchorPos=e.changes.mapPos(l.from,-1),this.scrollAnchorHeight=l.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let a=r.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<a.from||t.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,t));let u=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,e.flags|=this.updateForViewport(),(u||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(fv)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,i=window.getComputedStyle(t),n=this.heightOracle,r=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?St.RTL:St.LTR;let o=this.heightOracle.mustRefreshForWrapping(r),l=t.getBoundingClientRect(),a=o||this.mustMeasureContent||this.contentDOMHeight!=l.height;this.contentDOMHeight=l.height,this.mustMeasureContent=!1;let u=0,c=0;if(l.width&&l.height){let{scaleX:H,scaleY:N}=F0(t,l);(H>.005&&Math.abs(this.scaleX-H)>.005||N>.005&&Math.abs(this.scaleY-N)>.005)&&(this.scaleX=H,this.scaleY=N,u|=16,o=a=!0)}let d=(parseInt(i.paddingTop)||0)*this.scaleY,f=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=d||this.paddingBottom!=f)&&(this.paddingTop=d,this.paddingBottom=f,u|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(n.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=16);let p=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=p&&(this.scrollAnchorHeight=-1,this.scrollTop=p),this.scrolledToBottom=H0(e.scrollDOM);let v=(this.printing?a5:o5)(t,this.paddingTop),k=v.top-this.pixelViewport.top,m=v.bottom-this.pixelViewport.bottom;this.pixelViewport=v;let w=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(w!=this.inView&&(this.inView=w,w&&(a=!0)),!this.inView&&!this.scrollTarget&&!l5(e.dom))return 0;let L=l.width;if((this.contentDOMWidth!=L||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=l.width,this.editorHeight=e.scrollDOM.clientHeight,u|=16),a){let H=e.docView.measureVisibleLineHeights(this.viewport);if(n.mustRefreshForHeights(H)&&(o=!0),o||n.lineWrapping&&Math.abs(L-this.contentDOMWidth)>n.charWidth){let{lineHeight:N,charWidth:P,textHeight:S}=e.docView.measureTextSize();o=N>0&&n.refresh(r,N,P,S,Math.max(5,L/P),H),o&&(e.docView.minWidth=0,u|=16)}k>0&&m>0?c=Math.max(k,m):k<0&&m<0&&(c=Math.min(k,m)),Rp();for(let N of this.viewports){let P=N.from==this.viewport.from?H:e.docView.measureVisibleLineHeights(N);this.heightMap=(o?ms.empty().applyChanges(this.stateDeco,nt.empty,this.heightOracle,[new Ns(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(n,0,o,new t5(N.from,P))}wr&&(u|=2)}let I=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return I&&(u&2&&(u|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),u|=this.updateForViewport()),(u&2||I)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),n=this.heightMap,r=this.heightOracle,{visibleTop:o,visibleBottom:l}=this,a=new Dl(n.lineAt(o-i*1e3,wt.ByHeight,r,0,0).from,n.lineAt(l+(1-i)*1e3,wt.ByHeight,r,0,0).to);if(t){let{head:u}=t.range;if(u<a.from||u>a.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),d=n.lineAt(u,wt.ByPos,r,0,0),f;t.y=="center"?f=(d.top+d.bottom)/2-c/2:t.y=="start"||t.y=="nearest"&&u<a.from?f=d.top:f=d.bottom-c,a=new Dl(n.lineAt(f-1e3/2,wt.ByHeight,r,0,0).from,n.lineAt(f+c+1e3/2,wt.ByHeight,r,0,0).to)}}return a}mapViewport(e,t){let i=t.mapPos(e.from,-1),n=t.mapPos(e.to,1);return new Dl(this.heightMap.lineAt(i,wt.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(n,wt.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){if(!this.inView)return!0;let{top:n}=this.heightMap.lineAt(e,wt.ByPos,this.heightOracle,0,0),{bottom:r}=this.heightMap.lineAt(t,wt.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:l}=this;return(e==0||n<=o-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||r>=l+Math.max(10,Math.min(i,250)))&&n>o-2*1e3&&r<l+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let n of e)t.touchesRange(n.from,n.to)||i.push(new Ic(t.mapPos(n.from),t.mapPos(n.to),n.size,n.displaySize));return i}ensureLineGaps(e,t){let i=this.heightOracle.lineWrapping,n=i?1e4:2e3,r=n>>1,o=n<<1;if(this.defaultTextDirection!=St.LTR&&!i)return[];let l=[],a=(c,d,f,p)=>{if(d-c<r)return;let v=this.state.selection.main,k=[v.from];v.empty||k.push(v.to);for(let w of k)if(w>c&&w<d){a(c,w-10,f,p),a(w+10,d,f,p);return}let m=d5(e,w=>w.from>=f.from&&w.to<=f.to&&Math.abs(w.from-c)<r&&Math.abs(w.to-d)<r&&!k.some(L=>w.from<L&&w.to>L));if(!m){if(d<f.to&&t&&i&&t.visibleRanges.some(I=>I.from<=d&&I.to>=d)){let I=t.moveToLineBoundary(ue.cursor(d),!1,!0).head;I>c&&(d=I)}let w=this.gapSize(f,c,d,p),L=i||w<2e6?w:2e6;m=new Ic(c,d,w,L)}l.push(m)},u=c=>{if(c.length<o||c.type!=ps.Text)return;let d=u5(c.from,c.to,this.stateDeco);if(d.total<o)return;let f=this.scrollTarget?this.scrollTarget.range.head:null,p,v;if(i){let k=n/this.heightOracle.lineLength*this.heightOracle.lineHeight,m,w;if(f!=null){let L=Tl(d,f),I=((this.visibleBottom-this.visibleTop)/2+k)/c.height;m=L-I,w=L+I}else m=(this.visibleTop-c.top-k)/c.height,w=(this.visibleBottom-c.top+k)/c.height;p=El(d,m),v=El(d,w)}else{let k=d.total*this.heightOracle.charWidth,m=n*this.heightOracle.charWidth,w=0;if(k>2e6)for(let P of e)P.from>=c.from&&P.from<c.to&&P.size!=P.displaySize&&P.from*this.heightOracle.charWidth+w<this.pixelViewport.left&&(w=P.size-P.displaySize);let L=this.pixelViewport.left+w,I=this.pixelViewport.right+w,H,N;if(f!=null){let P=Tl(d,f),S=((I-L)/2+m)/k;H=P-S,N=P+S}else H=(L-m)/k,N=(I+m)/k;p=El(d,H),v=El(d,N)}p>c.from&&a(c.from,p,c,d),v<c.to&&a(v,c.to,c,d)};for(let c of this.viewportLines)Array.isArray(c.type)?c.type.forEach(u):u(c);return l}gapSize(e,t,i,n){let r=Tl(n,i)-Tl(n,t);return this.heightOracle.lineWrapping?e.height*r:n.total*this.heightOracle.charWidth*r}updateLineGaps(e){Ic.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Fe.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let i=[];it.spans(t,this.viewport.from,this.viewport.to,{span(r,o){i.push({from:r,to:o})},point(){}},20);let n=0;if(i.length!=this.visibleRanges.length)n=12;else for(let r=0;r<i.length&&!(n&8);r++){let o=this.visibleRanges[r],l=i[r];(o.from!=l.from||o.to!=l.to)&&(n|=4,e&&e.mapPos(o.from,-1)==l.from&&e.mapPos(o.to,1)==l.to||(n|=8))}return this.visibleRanges=i,n}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||eo(this.heightMap.lineAt(e,wt.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||eo(this.heightMap.lineAt(this.scaler.fromDOM(e),wt.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return eo(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Dl{constructor(e,t){this.from=e,this.to=t}}function u5(s,e,t){let i=[],n=s,r=0;return it.spans(t,s,e,{span(){},point(o,l){o>n&&(i.push({from:n,to:o}),r+=o-n),n=l}},20),n<e&&(i.push({from:n,to:e}),r+=e-n),{total:r,ranges:i}}function El({total:s,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let i=Math.floor(s*t);for(let n=0;;n++){let{from:r,to:o}=e[n],l=o-r;if(i<=l)return r+i;i-=l}}function Tl(s,e){let t=0;for(let{from:i,to:n}of s.ranges){if(e<=n){t+=e-i;break}t+=n-i}return t/s.total}function d5(s,e){for(let t of s)if(e(t))return t}const Bp={toDOM(s){return s},fromDOM(s){return s},scale:1,eq(s){return s==this}};class nf{constructor(e,t,i){let n=0,r=0,o=0;this.viewports=i.map(({from:l,to:a})=>{let u=t.lineAt(l,wt.ByPos,e,0,0).top,c=t.lineAt(a,wt.ByPos,e,0,0).bottom;return n+=c-u,{from:l,to:a,top:u,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-n)/(t.height-n);for(let l of this.viewports)l.domTop=o+(l.top-r)*this.scale,o=l.domBottom=l.domTop+(l.bottom-l.top),r=l.bottom}toDOM(e){for(let t=0,i=0,n=0;;t++){let r=t<this.viewports.length?this.viewports[t]:null;if(!r||e<r.top)return n+(e-i)*this.scale;if(e<=r.bottom)return r.domTop+(e-r.top);i=r.bottom,n=r.domBottom}}fromDOM(e){for(let t=0,i=0,n=0;;t++){let r=t<this.viewports.length?this.viewports[t]:null;if(!r||e<r.domTop)return i+(e-n)/this.scale;if(e<=r.domBottom)return r.top+(e-r.domTop);i=r.bottom,n=r.domBottom}}eq(e){return e instanceof nf?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,i)=>t.from==e.viewports[i].from&&t.to==e.viewports[i].to):!1}}function eo(s,e){if(e.scale==1)return s;let t=e.toDOM(s.top),i=e.toDOM(s.bottom);return new pi(s.from,s.length,t,i-t,Array.isArray(s._content)?s._content.map(n=>eo(n,e)):s._content)}const Ol=Te.define({combine:s=>s.join(" ")}),td=Te.define({combine:s=>s.indexOf(!0)>-1}),sd=ln.newName(),$v=ln.newName(),Rv=ln.newName(),Lv={"&light":"."+$v,"&dark":"."+Rv};function id(s,e,t){return new ln(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,n=>{if(n=="&")return s;if(!t||!t[n])throw new RangeError(`Unsupported selector: ${n}`);return t[n]}):s+" "+i}})}const f5=id("."+sd,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Lv),h5={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Nc=De.ie&&De.ie_version<=11;class p5{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new Y_,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let i of t)this.queue.push(i);(De.ie&&De.ie_version<=11||De.ios&&e.composing)&&t.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&De.android&&e.constructor.EDIT_CONTEXT!==!1&&!(De.chrome&&De.chrome_version<126)&&(this.editContext=new g5(e),e.state.facet(Ti)&&(e.contentDOM.editContext=this.editContext.editContext)),Nc&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,i)=>t!=e[i]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,n=this.selectionRange;if(i.state.facet(Ti)?i.root.activeElement!=this.dom:!Ql(this.dom,n))return;let r=n.anchorNode&&i.docView.nearest(n.anchorNode);if(r&&r.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(De.ie&&De.ie_version<=11||De.android&&De.chrome)&&!i.state.selection.main.empty&&n.focusNode&&po(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=jo(e.root);if(!t)return!1;let i=De.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&m5(this.view,t)||t;if(!i||this.selectionRange.eq(i))return!1;let n=Ql(this.dom,i);return n&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&X_(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),n&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(i.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=t)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,h5),Nc&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Nc&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var i;if(!this.delayedAndroidKey){let n=()=>{let r=this.delayedAndroidKey;r&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=r.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&r.force&&dr(this.dom,r.key,r.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(n)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,i=-1,n=!1;for(let r of e){let o=this.readMutation(r);o&&(o.typeOver&&(n=!0),t==-1?{from:t,to:i}=o:(t=Math.min(o.from,t),i=Math.max(o.to,i)))}return{from:t,to:i,typeOver:n}}readChange(){let{from:e,to:t,typeOver:i}=this.processRecords(),n=this.selectionChanged&&Ql(this.dom,this.selectionRange);if(e<0&&!n)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let r=new j4(this.view,e,t,i);return this.view.docView.domChanged={newSel:r.newSel?r.newSel.main:null},r}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let i=this.view.state,n=Sv(this.view,t);return this.view.state==i&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),n}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let i=Ip(t,e.previousSibling||e.target.previousSibling,-1),n=Ip(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:n?t.posBefore(n):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Ti)!=e.state.facet(Ti)&&(e.view.contentDOM.editContext=e.state.facet(Ti)?this.editContext.editContext:null))}destroy(){var e,t,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function Ip(s,e,t){for(;e;){let i=pt.get(e);if(i&&i.parent==s)return i;let n=e.parentNode;e=n!=s.dom?n:t>0?e.nextSibling:e.previousSibling}return null}function Np(s,e){let t=e.startContainer,i=e.startOffset,n=e.endContainer,r=e.endOffset,o=s.docView.domAtPos(s.state.selection.main.anchor);return po(o.node,o.offset,n,r)&&([t,i,n,r]=[n,r,t,i]),{anchorNode:t,anchorOffset:i,focusNode:n,focusOffset:r}}function m5(s,e){if(e.getComposedRanges){let n=e.getComposedRanges(s.root)[0];if(n)return Np(s,n)}let t=null;function i(n){n.preventDefault(),n.stopImmediatePropagation(),t=n.getTargetRanges()[0]}return s.contentDOM.addEventListener("beforeinput",i,!0),s.dom.ownerDocument.execCommand("indent"),s.contentDOM.removeEventListener("beforeinput",i,!0),t?Np(s,t):null}class g5{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let n=e.state.selection.main,{anchor:r,head:o}=n,l=this.toEditorPos(i.updateRangeStart),a=this.toEditorPos(i.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:l,drifted:!1});let u=a-l>i.text.length;l==this.from&&r<this.from?l=r:a==this.to&&r>this.to&&(a=r);let c=Cv(e.state.sliceDoc(l,a),i.text,(u?n.from:n.to)-l,u?"end":null);if(!c){let f=ue.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd));f.main.eq(n)||e.dispatch({selection:f,userEvent:"select"});return}let d={from:c.from+l,to:c.toA+l,insert:nt.of(i.text.slice(c.from,c.toB).split(`
`))};if((De.mac||De.android)&&d.from==o-1&&/^\. ?$/.test(i.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(d={from:l,to:a,insert:nt.of([i.text.replace("."," ")])}),this.pendingContextChange=d,!e.state.readOnly){let f=this.to-this.from+(d.to-d.from+d.insert.length);tf(e,d,ue.single(this.toEditorPos(i.selectionStart,f),this.toEditorPos(i.selectionEnd,f)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),d.from<d.to&&!d.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(t.text.slice(Math.max(0,i.updateRangeStart-1),Math.min(t.text.length,i.updateRangeStart+1)))&&this.handlers.compositionend(i)},this.handlers.characterboundsupdate=i=>{let n=[],r=null;for(let o=this.toEditorPos(i.rangeStart),l=this.toEditorPos(i.rangeEnd);o<l;o++){let a=e.coordsForChar(o);r=a&&new DOMRect(a.left,a.top,a.right-a.left,a.bottom-a.top)||r||new DOMRect,n.push(r)}t.updateCharacterBounds(i.rangeStart,n)},this.handlers.textformatupdate=i=>{let n=[];for(let r of i.getTextFormats()){let o=r.underlineStyle,l=r.underlineThickness;if(!/none/i.test(o)&&!/none/i.test(l)){let a=this.toEditorPos(r.rangeStart),u=this.toEditorPos(r.rangeEnd);if(a<u){let c=`text-decoration: underline ${/^[a-z]/.test(o)?o+" ":o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${/thin/i.test(l)?1:2}px`;n.push(Fe.mark({attributes:{style:c}}).range(a,u))}}}e.dispatch({effects:pv.of(Fe.set(n))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:i}=this.composing;this.composing=null,i&&this.reset(e.state)}};for(let i in this.handlers)t.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let n=jo(i.root);n&&n.rangeCount&&this.editContext.updateSelectionBounds(n.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,i=!1,n=this.pendingContextChange;return e.changes.iterChanges((r,o,l,a,u)=>{if(i)return;let c=u.length-(o-r);if(n&&o>=n.to)if(n.from==r&&n.to==o&&n.insert.eq(u)){n=this.pendingContextChange=null,t+=c,this.to+=c;return}else n=null,this.revertPending(e.state);if(r+=t,o+=t,o<=this.from)this.from+=c,this.to+=c;else if(r<this.to){if(r<this.from||o>this.to||this.to-this.from+u.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(r),this.toContextPos(o),u.toString()),this.to+=c}t+=c}),n&&!i&&this.revertPending(e.state),!i}update(e){let t=this.pendingContextChange,i=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(i.from,i.to)&&e.transactions.some(n=>!n.isUserEvent("input.type")&&n.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),n=this.toContextPos(t.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=n)&&this.editContext.updateSelection(i,n)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let i=this.composing;return i&&i.drifted?i.editorBase+(e-i.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class Ee{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(n=>n.forEach(r=>i(r,this)))||(n=>this.update(n)),this.dispatch=this.dispatch.bind(this),this._root=e.root||Q_(e.parent)||document,this.viewState=new Vp(e.state||st.create(e)),e.scrollTo&&e.scrollTo.is(_l)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Zn).map(n=>new Lc(n));for(let n of this.plugins)n.update(this);this.observer=new p5(this),this.inputState=new V4(this),this.inputState.ensureHandlers(this.plugins),this.docView=new yp(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=e.length==1&&e[0]instanceof Vt?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,i=!1,n,r=this.state;for(let f of e){if(f.startState!=r)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");r=f.state}if(this.destroyed){this.viewState.state=r;return}let o=this.hasFocus,l=0,a=null;e.some(f=>f.annotation(Tv))?(this.inputState.notifiedFocused=o,l=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,a=Ov(r,o),a||(l=1));let u=this.observer.delayedAndroidKey,c=null;if(u?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(r.doc)||!this.state.selection.eq(r.selection))&&(c=null)):this.observer.clear(),r.facet(st.phrases)!=this.state.facet(st.phrases))return this.setState(r);n=ka.create(this,r,e),n.flags|=l;let d=this.viewState.scrollTarget;try{this.updateState=2;for(let f of e){if(d&&(d=d.map(f.changes)),f.scrollIntoView){let{main:p}=f.state.selection;d=new fr(p.empty?p:ue.cursor(p.head,p.head>p.anchor?-1:1))}for(let p of f.effects)p.is(_l)&&(d=p.value.clip(this.state))}this.viewState.update(n,d),this.bidiCache=wa.update(this.bidiCache,n.changes),n.empty||(this.updatePlugins(n),this.inputState.update(n)),t=this.docView.update(n),this.state.facet(Xr)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(f=>f.isUserEvent("select.pointer")))}finally{this.updateState=0}if(n.startState.facet(Ol)!=n.state.facet(Ol)&&(this.viewState.mustMeasureContent=!0),(t||i||d||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!n.empty)for(let f of this.state.facet(Qu))try{f(n)}catch(p){ks(this.state,p,"update listener")}(a||c)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),c&&!Sv(this,c)&&u.force&&dr(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new Vp(e),this.plugins=e.facet(Zn).map(i=>new Lc(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new yp(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(Zn),i=e.state.facet(Zn);if(t!=i){let n=[];for(let r of i){let o=t.indexOf(r);if(o<0)n.push(new Lc(r));else{let l=this.plugins[o];l.mustUpdate=e,n.push(l)}}for(let r of this.plugins)r.mustUpdate!=e&&r.destroy(this);this.plugins=n,this.pluginMap.clear()}else for(let n of this.plugins)n.mustUpdate=e;for(let n=0;n<this.plugins.length;n++)this.plugins[n].update(this);t!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(i){ks(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,i=this.scrollDOM,n=i.scrollTop*this.scaleY,{scrollAnchorPos:r,scrollAnchorHeight:o}=this.viewState;Math.abs(n-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let l=0;;l++){if(o<0)if(H0(i))r=-1,o=this.viewState.heightMap.height;else{let p=this.viewState.scrollAnchorAt(n);r=p.from,o=p.top}this.updateState=1;let a=this.viewState.measure(this);if(!a&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];a&4||([this.measureRequests,u]=[u,this.measureRequests]);let c=u.map(p=>{try{return p.read(this)}catch(v){return ks(this.state,v),Fp}}),d=ka.create(this,this.state,[]),f=!1;d.flags|=a,t?t.flags|=a:t=d,this.updateState=2,d.empty||(this.updatePlugins(d),this.inputState.update(d),this.updateAttrs(),f=this.docView.update(d),f&&this.docViewUpdate());for(let p=0;p<u.length;p++)if(c[p]!=Fp)try{let v=u[p];v.write&&v.write(c[p],this)}catch(v){ks(this.state,v)}if(f&&this.docView.updateSelection(!0),!d.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let v=(r<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(r).top)-o;if(v>1||v<-1){n=n+v,i.scrollTop=n/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let l of this.state.facet(Qu))l(t)}get themeClasses(){return sd+" "+(this.state.facet(td)?Rv:$v)+" "+this.state.facet(Ol)}updateAttrs(){let e=zp(this,mv,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(Ti)?"true":"false",class:"cm-content",style:`${De.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),zp(this,Zd,t);let i=this.observer.ignore(()=>{let n=Ku(this.contentDOM,this.contentAttrs,t),r=Ku(this.dom,this.editorAttrs,e);return n||r});return this.editorAttrs=e,this.contentAttrs=t,i}showAnnouncements(e){let t=!0;for(let i of e)for(let n of i.effects)if(n.is(Ee.announce)){t&&(this.announceDOM.textContent=""),t=!1;let r=this.announceDOM.appendChild(document.createElement("div"));r.textContent=n.value}}mountStyles(){this.styleModules=this.state.facet(Xr);let e=this.state.facet(Ee.cspNonce);ln.mount(this.root,this.styleModules.concat(f5).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.plugin!=e)&&this.pluginMap.set(e,t=this.plugins.find(i=>i.plugin==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return Bc(this,e,Sp(this,e,t,i))}moveByGroup(e,t){return Bc(this,e,Sp(this,e,t,i=>D4(this,e.head,i)))}visualLineSide(e,t){let i=this.bidiSpans(e),n=this.textDirectionAt(e.from),r=i[t?i.length-1:0];return ue.cursor(r.side(t,n)+e.from,r.forward(!t,n)?1:-1)}moveToLineBoundary(e,t,i=!0){return M4(this,e,t,i)}moveVertically(e,t,i){return Bc(this,e,E4(this,e,t,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),kv(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let n=this.state.doc.lineAt(e),r=this.bidiSpans(n),o=r[Xi.find(r,e-n.from,-1,t)];return nc(i,o.dir==St.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(dv)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>v5)return iv(e.length);let t=this.textDirectionAt(e.from),i;for(let r of this.bidiCache)if(r.from==e.from&&r.dir==t&&(r.fresh||sv(r.isolates,i=vp(this,e))))return r.order;i||(i=vp(this,e));let n=d4(e.text,t,i);return this.bidiCache.push(new wa(e.from,e.to,t,i,!0,n)),n}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||De.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{z0(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return _l.of(new fr(typeof e=="number"?ue.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return _l.of(new fr(ue.cursor(i.from),"start","start",i.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return Pt.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Pt.define(()=>({}),{eventObservers:e})}static theme(e,t){let i=ln.newName(),n=[Ol.of(i),Xr.of(id(`.${i}`,e))];return t&&t.dark&&n.push(td.of(!0)),n}static baseTheme(e){return Un.lowest(Xr.of(id("."+sd,e,Lv)))}static findFromDOM(e){var t;let i=e.querySelector(".cm-content"),n=i&&pt.get(i)||pt.get(e);return((t=n?.rootView)===null||t===void 0?void 0:t.view)||null}}Ee.styleModule=Xr;Ee.inputHandler=cv;Ee.clipboardInputFilter=Qd;Ee.clipboardOutputFilter=Xd;Ee.scrollHandler=hv;Ee.focusChangeEffect=uv;Ee.perLineTextDirection=dv;Ee.exceptionSink=av;Ee.updateListener=Qu;Ee.editable=Ti;Ee.mouseSelectionStyle=lv;Ee.dragMovesSelection=ov;Ee.clickAddsSelectionRange=rv;Ee.decorations=Ro;Ee.outerDecorations=gv;Ee.atomicRanges=Zo;Ee.bidiIsolatedRanges=vv;Ee.scrollMargins=yv;Ee.darkTheme=td;Ee.cspNonce=Te.define({combine:s=>s.length?s[0]:""});Ee.contentAttributes=Zd;Ee.editorAttributes=mv;Ee.lineWrapping=Ee.contentAttributes.of({class:"cm-lineWrapping"});Ee.announce=Xe.define();const v5=4096,Fp={};class wa{constructor(e,t,i,n,r,o){this.from=e,this.to=t,this.dir=i,this.isolates=n,this.fresh=r,this.order=o}static update(e,t){if(t.empty&&!e.some(r=>r.fresh))return e;let i=[],n=e.length?e[e.length-1].dir:St.LTR;for(let r=Math.max(0,e.length-10);r<e.length;r++){let o=e[r];o.dir==n&&!t.touchesRange(o.from,o.to)&&i.push(new wa(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return i}}function zp(s,e,t){for(let i=s.state.facet(e),n=i.length-1;n>=0;n--){let r=i[n],o=typeof r=="function"?r(s):r;o&&Wu(o,t)}return t}const y5=De.mac?"mac":De.windows?"win":De.linux?"linux":"key";function b5(s,e){const t=s.split(/-(?!$)/);let i=t[t.length-1];i=="Space"&&(i=" ");let n,r,o,l;for(let a=0;a<t.length-1;++a){const u=t[a];if(/^(cmd|meta|m)$/i.test(u))l=!0;else if(/^a(lt)?$/i.test(u))n=!0;else if(/^(c|ctrl|control)$/i.test(u))r=!0;else if(/^s(hift)?$/i.test(u))o=!0;else if(/^mod$/i.test(u))e=="mac"?l=!0:r=!0;else throw new Error("Unrecognized modifier name: "+u)}return n&&(i="Alt-"+i),r&&(i="Ctrl-"+i),l&&(i="Meta-"+i),o&&(i="Shift-"+i),i}function Pl(s,e,t){return e.altKey&&(s="Alt-"+s),e.ctrlKey&&(s="Ctrl-"+s),e.metaKey&&(s="Meta-"+s),t!==!1&&e.shiftKey&&(s="Shift-"+s),s}const k5=Un.default(Ee.domEventHandlers({keydown(s,e){return Bv(Vv(e.state),s,e,"editor")}})),rf=Te.define({enables:k5}),Up=new WeakMap;function Vv(s){let e=s.facet(rf),t=Up.get(e);return t||Up.set(e,t=S5(e.reduce((i,n)=>i.concat(n),[]))),t}function x5(s,e,t){return Bv(Vv(s.state),e,s,t)}let Gi=null;const w5=4e3;function S5(s,e=y5){let t=Object.create(null),i=Object.create(null),n=(o,l)=>{let a=i[o];if(a==null)i[o]=l;else if(a!=l)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},r=(o,l,a,u,c)=>{var d,f;let p=t[o]||(t[o]=Object.create(null)),v=l.split(/ (?!$)/).map(w=>b5(w,e));for(let w=1;w<v.length;w++){let L=v.slice(0,w).join(" ");n(L,!0),p[L]||(p[L]={preventDefault:!0,stopPropagation:!1,run:[I=>{let H=Gi={view:I,prefix:L,scope:o};return setTimeout(()=>{Gi==H&&(Gi=null)},w5),!0}]})}let k=v.join(" ");n(k,!1);let m=p[k]||(p[k]={preventDefault:!1,stopPropagation:!1,run:((f=(d=p._any)===null||d===void 0?void 0:d.run)===null||f===void 0?void 0:f.slice())||[]});a&&m.run.push(a),u&&(m.preventDefault=!0),c&&(m.stopPropagation=!0)};for(let o of s){let l=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let u of l){let c=t[u]||(t[u]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:d}=o;for(let f in c)c[f].run.push(p=>d(p,nd))}let a=o[e]||o.key;if(a)for(let u of l)r(u,a,o.run,o.preventDefault,o.stopPropagation),o.shift&&r(u,"Shift-"+a,o.shift,o.preventDefault,o.stopPropagation)}return t}let nd=null;function Bv(s,e,t,i){nd=e;let n=W_(e),r=ys(n,0),o=hi(r)==n.length&&n!=" ",l="",a=!1,u=!1,c=!1;Gi&&Gi.view==t&&Gi.scope==i&&(l=Gi.prefix+" ",Av.indexOf(e.keyCode)<0&&(u=!0,Gi=null));let d=new Set,f=m=>{if(m){for(let w of m.run)if(!d.has(w)&&(d.add(w),w(t)))return m.stopPropagation&&(c=!0),!0;m.preventDefault&&(m.stopPropagation&&(c=!0),u=!0)}return!1},p=s[i],v,k;return p&&(f(p[l+Pl(n,e,!o)])?a=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(De.windows&&e.ctrlKey&&e.altKey)&&!(De.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(v=an[e.keyCode])&&v!=n?(f(p[l+Pl(v,e,!0)])||e.shiftKey&&(k=Po[e.keyCode])!=n&&k!=v&&f(p[l+Pl(k,e,!1)]))&&(a=!0):o&&e.shiftKey&&f(p[l+Pl(n,e,!0)])&&(a=!0),!a&&f(p._any)&&(a=!0)),u&&(a=!0),a&&c&&e.stopPropagation(),nd=null,a}class el{constructor(e,t,i,n,r){this.className=e,this.left=t,this.top=i,this.width=n,this.height=r}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,i){if(i.empty){let n=e.coordsAtPos(i.head,i.assoc||1);if(!n)return[];let r=Iv(e);return[new el(t,n.left-r.left,n.top-r.top,null,n.bottom-n.top)]}else return C5(e,t,i)}}function Iv(s){let e=s.scrollDOM.getBoundingClientRect();return{left:(s.textDirection==St.LTR?e.left:e.right-s.scrollDOM.clientWidth*s.scaleX)-s.scrollDOM.scrollLeft*s.scaleX,top:e.top-s.scrollDOM.scrollTop*s.scaleY}}function Hp(s,e,t,i){let n=s.coordsAtPos(e,t*2);if(!n)return i;let r=s.dom.getBoundingClientRect(),o=(n.top+n.bottom)/2,l=s.posAtCoords({x:r.left+1,y:o}),a=s.posAtCoords({x:r.right-1,y:o});return l==null||a==null?i:{from:Math.max(i.from,Math.min(l,a)),to:Math.min(i.to,Math.max(l,a))}}function C5(s,e,t){if(t.to<=s.viewport.from||t.from>=s.viewport.to)return[];let i=Math.max(t.from,s.viewport.from),n=Math.min(t.to,s.viewport.to),r=s.textDirection==St.LTR,o=s.contentDOM,l=o.getBoundingClientRect(),a=Iv(s),u=o.querySelector(".cm-line"),c=u&&window.getComputedStyle(u),d=l.left+(c?parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)):0),f=l.right-(c?parseInt(c.paddingRight):0),p=Zu(s,i,1),v=Zu(s,n,-1),k=p.type==ps.Text?p:null,m=v.type==ps.Text?v:null;if(k&&(s.lineWrapping||p.widgetLineBreaks)&&(k=Hp(s,i,1,k)),m&&(s.lineWrapping||v.widgetLineBreaks)&&(m=Hp(s,n,-1,m)),k&&m&&k.from==m.from&&k.to==m.to)return L(I(t.from,t.to,k));{let N=k?I(t.from,null,k):H(p,!1),P=m?I(null,t.to,m):H(v,!0),S=[];return(k||p).to<(m||v).from-(k&&m?1:0)||p.widgetLineBreaks>1&&N.bottom+s.defaultLineHeight/2<P.top?S.push(w(d,N.bottom,f,P.top)):N.bottom<P.top&&s.elementAtHeight((N.bottom+P.top)/2).type==ps.Text&&(N.bottom=P.top=(N.bottom+P.top)/2),L(N).concat(S).concat(L(P))}function w(N,P,S,O){return new el(e,N-a.left,P-a.top,S-N,O-P)}function L({top:N,bottom:P,horizontal:S}){let O=[];for(let W=0;W<S.length;W+=2)O.push(w(S[W],N,S[W+1],P));return O}function I(N,P,S){let O=1e9,W=-1e9,oe=[];function se(ee,$,q,Y,ce){let ge=s.coordsAtPos(ee,ee==S.to?-2:2),Ne=s.coordsAtPos(q,q==S.from?2:-2);!ge||!Ne||(O=Math.min(ge.top,Ne.top,O),W=Math.max(ge.bottom,Ne.bottom,W),ce==St.LTR?oe.push(r&&$?d:ge.left,r&&Y?f:Ne.right):oe.push(!r&&Y?d:Ne.left,!r&&$?f:ge.right))}let B=N??S.from,ae=P??S.to;for(let ee of s.visibleRanges)if(ee.to>B&&ee.from<ae)for(let $=Math.max(ee.from,B),q=Math.min(ee.to,ae);;){let Y=s.state.doc.lineAt($);for(let ce of s.bidiSpans(Y)){let ge=ce.from+Y.from,Ne=ce.to+Y.from;if(ge>=q)break;Ne>$&&se(Math.max(ge,$),N==null&&ge<=B,Math.min(Ne,q),P==null&&Ne>=ae,ce.dir)}if($=Y.to+1,$>=q)break}return oe.length==0&&se(B,N==null,ae,P==null,s.textDirection),{top:O,bottom:W,horizontal:oe}}function H(N,P){let S=l.top+(P?N.top:N.bottom);return{top:S,bottom:S,horizontal:[]}}}function _5(s,e){return s.constructor==e.constructor&&s.eq(e)}class A5{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(ea)!=e.state.facet(ea)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,i=e.facet(ea);for(;t<i.length&&i[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,i)=>!_5(t,this.drawn[i]))){let t=this.dom.firstChild,i=0;for(let n of e)n.update&&t&&n.constructor&&this.drawn[i].constructor&&n.update(t,this.drawn[i])?(t=t.nextSibling,i++):this.dom.insertBefore(n.draw(),t);for(;t;){let n=t.nextSibling;t.remove(),t=n}this.drawn=e,De.safari&&De.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const ea=Te.define();function Nv(s){return[Pt.define(e=>new A5(e,s)),ea.of(s)]}const Lo=Te.define({combine(s){return ki(s,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function M5(s={}){return[Lo.of(s),D5,E5,T5,fv.of(!0)]}function Fv(s){return s.startState.facet(Lo)!=s.state.facet(Lo)}const D5=Nv({above:!0,markers(s){let{state:e}=s,t=e.facet(Lo),i=[];for(let n of e.selection.ranges){let r=n==e.selection.main;if(n.empty||t.drawRangeCursor){let o=r?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",l=n.empty?n:ue.cursor(n.head,n.head>n.anchor?-1:1);for(let a of el.forRange(s,o,l))i.push(a)}}return i},update(s,e){s.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=Fv(s);return t&&Wp(s.state,e),s.docChanged||s.selectionSet||t},mount(s,e){Wp(e.state,s)},class:"cm-cursorLayer"});function Wp(s,e){e.style.animationDuration=s.facet(Lo).cursorBlinkRate+"ms"}const E5=Nv({above:!1,markers(s){return s.state.selection.ranges.map(e=>e.empty?[]:el.forRange(s,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(s,e){return s.docChanged||s.selectionSet||s.viewportChanged||Fv(s)},class:"cm-selectionLayer"}),T5=Un.highest(Ee.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),zv=Xe.define({map(s,e){return s==null?null:e.mapPos(s)}}),to=Yt.define({create(){return null},update(s,e){return s!=null&&(s=e.changes.mapPos(s)),e.effects.reduce((t,i)=>i.is(zv)?i.value:t,s)}}),O5=Pt.fromClass(class{constructor(s){this.view=s,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(s){var e;let t=s.state.field(to);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(s.startState.field(to)!=t||s.docChanged||s.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:s}=this,e=s.state.field(to),t=e!=null&&s.coordsAtPos(e);if(!t)return null;let i=s.scrollDOM.getBoundingClientRect();return{left:t.left-i.left+s.scrollDOM.scrollLeft*s.scaleX,top:t.top-i.top+s.scrollDOM.scrollTop*s.scaleY,height:t.bottom-t.top}}drawCursor(s){if(this.cursor){let{scaleX:e,scaleY:t}=this.view;s?(this.cursor.style.left=s.left/e+"px",this.cursor.style.top=s.top/t+"px",this.cursor.style.height=s.height/t+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(s){this.view.state.field(to)!=s&&this.view.dispatch({effects:zv.of(s)})}},{eventObservers:{dragover(s){this.setDropPos(this.view.posAtCoords({x:s.clientX,y:s.clientY}))},dragleave(s){(s.target==this.view.contentDOM||!this.view.contentDOM.contains(s.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function P5(){return[to,O5]}function Kp(s,e,t,i,n){e.lastIndex=0;for(let r=s.iterRange(t,i),o=t,l;!r.next().done;o+=r.value.length)if(!r.lineBreak)for(;l=e.exec(r.value);)n(o+l.index,l)}function j5(s,e){let t=s.visibleRanges;if(t.length==1&&t[0].from==s.viewport.from&&t[0].to==s.viewport.to)return t;let i=[];for(let{from:n,to:r}of t)n=Math.max(s.state.doc.lineAt(n).from,n-e),r=Math.min(s.state.doc.lineAt(r).to,r+e),i.length&&i[i.length-1].to>=n?i[i.length-1].to=r:i.push({from:n,to:r});return i}class $5{constructor(e){const{regexp:t,decoration:i,decorate:n,boundary:r,maxLength:o=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,n)this.addMatch=(l,a,u,c)=>n(c,u,u+l[0].length,l,a);else if(typeof i=="function")this.addMatch=(l,a,u,c)=>{let d=i(l,a,u);d&&c(u,u+l[0].length,d)};else if(i)this.addMatch=(l,a,u,c)=>c(u,u+l[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=r,this.maxLength=o}createDeco(e){let t=new $i,i=t.add.bind(t);for(let{from:n,to:r}of j5(e,this.maxLength))Kp(e.state.doc,this.regexp,n,r,(o,l)=>this.addMatch(l,e,o,i));return t.finish()}updateDeco(e,t){let i=1e9,n=-1;return e.docChanged&&e.changes.iterChanges((r,o,l,a)=>{a>=e.view.viewport.from&&l<=e.view.viewport.to&&(i=Math.min(l,i),n=Math.max(a,n))}),e.viewportMoved||n-i>1e3?this.createDeco(e.view):n>-1?this.updateRange(e.view,t.map(e.changes),i,n):t}updateRange(e,t,i,n){for(let r of e.visibleRanges){let o=Math.max(r.from,i),l=Math.min(r.to,n);if(l>=o){let a=e.state.doc.lineAt(o),u=a.to<l?e.state.doc.lineAt(l):a,c=Math.max(r.from,a.from),d=Math.min(r.to,u.to);if(this.boundary){for(;o>a.from;o--)if(this.boundary.test(a.text[o-1-a.from])){c=o;break}for(;l<u.to;l++)if(this.boundary.test(u.text[l-u.from])){d=l;break}}let f=[],p,v=(k,m,w)=>f.push(w.range(k,m));if(a==u)for(this.regexp.lastIndex=c-a.from;(p=this.regexp.exec(a.text))&&p.index<d-a.from;)this.addMatch(p,e,p.index+a.from,v);else Kp(e.state.doc,this.regexp,c,d,(k,m)=>this.addMatch(m,e,k,v));t=t.update({filterFrom:c,filterTo:d,filter:(k,m)=>k<c||m>d,add:f})}}return t}}const rd=/x/.unicode!=null?"gu":"g",R5=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,rd),L5={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Fc=null;function V5(){var s;if(Fc==null&&typeof document<"u"&&document.body){let e=document.body.style;Fc=((s=e.tabSize)!==null&&s!==void 0?s:e.MozTabSize)!=null}return Fc||!1}const ta=Te.define({combine(s){let e=ki(s,{render:null,specialChars:R5,addSpecialChars:null});return(e.replaceTabs=!V5())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,rd)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,rd)),e}});function B5(s={}){return[ta.of(s),I5()]}let qp=null;function I5(){return qp||(qp=Pt.fromClass(class{constructor(s){this.view=s,this.decorations=Fe.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(s.state.facet(ta)),this.decorations=this.decorator.createDeco(s)}makeDecorator(s){return new $5({regexp:s.specialChars,decoration:(e,t,i)=>{let{doc:n}=t.state,r=ys(e[0],0);if(r==9){let o=n.lineAt(i),l=t.state.tabSize,a=Or(o.text,l,i-o.from);return Fe.replace({widget:new U5((l-a%l)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[r]||(this.decorationCache[r]=Fe.replace({widget:new z5(s,r)}))},boundary:s.replaceTabs?void 0:/[^]/})}update(s){let e=s.state.facet(ta);s.startState.facet(ta)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(s.view)):this.decorations=this.decorator.updateDeco(s,this.decorations)}},{decorations:s=>s.decorations}))}const N5="";function F5(s){return s>=32?N5:s==10?"":String.fromCharCode(9216+s)}class z5 extends fn{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=F5(this.code),i=e.state.phrase("Control character")+" "+(L5[this.code]||"0x"+this.code.toString(16)),n=this.options.render&&this.options.render(this.code,i,t);if(n)return n;let r=document.createElement("span");return r.textContent=t,r.title=i,r.setAttribute("aria-label",i),r.className="cm-specialChar",r}ignoreEvent(){return!1}}class U5 extends fn{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function H5(){return K5}const W5=Fe.line({class:"cm-activeLine"}),K5=Pt.fromClass(class{constructor(s){this.decorations=this.getDeco(s)}update(s){(s.docChanged||s.selectionSet)&&(this.decorations=this.getDeco(s.view))}getDeco(s){let e=-1,t=[];for(let i of s.state.selection.ranges){let n=s.lineBlockAt(i.head);n.from>e&&(t.push(W5.range(n.from)),e=n.from)}return Fe.set(t)}},{decorations:s=>s.decorations}),od=2e3;function q5(s,e,t){let i=Math.min(e.line,t.line),n=Math.max(e.line,t.line),r=[];if(e.off>od||t.off>od||e.col<0||t.col<0){let o=Math.min(e.off,t.off),l=Math.max(e.off,t.off);for(let a=i;a<=n;a++){let u=s.doc.line(a);u.length<=l&&r.push(ue.range(u.from+o,u.to+l))}}else{let o=Math.min(e.col,t.col),l=Math.max(e.col,t.col);for(let a=i;a<=n;a++){let u=s.doc.line(a),c=Vu(u.text,o,s.tabSize,!0);if(c<0)r.push(ue.cursor(u.to));else{let d=Vu(u.text,l,s.tabSize);r.push(ue.range(u.from+c,u.from+d))}}}return r}function G5(s,e){let t=s.coordsAtPos(s.viewport.from);return t?Math.round(Math.abs((t.left-e)/s.defaultCharacterWidth)):-1}function Gp(s,e){let t=s.posAtCoords({x:e.clientX,y:e.clientY},!1),i=s.state.doc.lineAt(t),n=t-i.from,r=n>od?-1:n==i.length?G5(s,e.clientX):Or(i.text,s.state.tabSize,t-i.from);return{line:i.number,col:r,off:n}}function J5(s,e){let t=Gp(s,e),i=s.state.selection;return t?{update(n){if(n.docChanged){let r=n.changes.mapPos(n.startState.doc.line(t.line).from),o=n.state.doc.lineAt(r);t={line:o.number,col:t.col,off:Math.min(t.off,o.length)},i=i.map(n.changes)}},get(n,r,o){let l=Gp(s,n);if(!l)return i;let a=q5(s.state,t,l);return a.length?o?ue.create(a.concat(i.ranges)):ue.create(a):i}}:null}function Y5(s){let e=(t=>t.altKey&&t.button==0);return Ee.mouseSelectionStyle.of((t,i)=>e(i)?J5(t,i):null)}const Q5={Alt:[18,s=>!!s.altKey],Control:[17,s=>!!s.ctrlKey],Shift:[16,s=>!!s.shiftKey],Meta:[91,s=>!!s.metaKey]},X5={style:"cursor: crosshair"};function Z5(s={}){let[e,t]=Q5[s.key||"Alt"],i=Pt.fromClass(class{constructor(n){this.view=n,this.isDown=!1}set(n){this.isDown!=n&&(this.isDown=n,this.view.update([]))}},{eventObservers:{keydown(n){this.set(n.keyCode==e||t(n))},keyup(n){(n.keyCode==e||!t(n))&&this.set(!1)},mousemove(n){this.set(t(n))}}});return[i,Ee.contentAttributes.of(n=>{var r;return!((r=n.plugin(i))===null||r===void 0)&&r.isDown?X5:null})]}const qr="-10000px";class Uv{constructor(e,t,i,n){this.facet=t,this.createTooltipView=i,this.removeTooltipView=n,this.input=e.state.facet(t),this.tooltips=this.input.filter(o=>o);let r=null;this.tooltipViews=this.tooltips.map(o=>r=i(o,r))}update(e,t){var i;let n=e.state.facet(this.facet),r=n.filter(a=>a);if(n===this.input){for(let a of this.tooltipViews)a.update&&a.update(e);return!1}let o=[],l=t?[]:null;for(let a=0;a<r.length;a++){let u=r[a],c=-1;if(u){for(let d=0;d<this.tooltips.length;d++){let f=this.tooltips[d];f&&f.create==u.create&&(c=d)}if(c<0)o[a]=this.createTooltipView(u,a?o[a-1]:null),l&&(l[a]=!!u.above);else{let d=o[a]=this.tooltipViews[c];l&&(l[a]=t[c]),d.update&&d.update(e)}}}for(let a of this.tooltipViews)o.indexOf(a)<0&&(this.removeTooltipView(a),(i=a.destroy)===null||i===void 0||i.call(a));return t&&(l.forEach((a,u)=>t[u]=a),t.length=l.length),this.input=n,this.tooltips=r,this.tooltipViews=o,!0}}function e3(s){let e=s.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const zc=Te.define({combine:s=>{var e,t,i;return{position:De.ios?"absolute":((e=s.find(n=>n.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=s.find(n=>n.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((i=s.find(n=>n.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||e3}}}),Jp=new WeakMap,of=Pt.fromClass(class{constructor(s){this.view=s,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=s.state.facet(zc);this.position=e.position,this.parent=e.parent,this.classes=s.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new Uv(s,lf,(t,i)=>this.createTooltip(t,i),t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()}),this.above=this.manager.tooltips.map(t=>!!t.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),s.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let s of this.manager.tooltipViews)this.intersectionObserver.observe(s.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(s){s.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(s,this.above);e&&this.observeIntersection();let t=e||s.geometryChanged,i=s.state.facet(zc);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let n of this.manager.tooltipViews)n.dom.style.position=this.position;t=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let n of this.manager.tooltipViews)this.container.appendChild(n.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(s,e){let t=s.create(this.view),i=e?e.dom:null;if(t.dom.classList.add("cm-tooltip"),s.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let n=document.createElement("div");n.className="cm-tooltip-arrow",t.dom.appendChild(n)}return t.dom.style.position=this.position,t.dom.style.top=qr,t.dom.style.left="0px",this.container.insertBefore(t.dom,i),t.mount&&t.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(t.dom),t}destroy(){var s,e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(s=i.destroy)===null||s===void 0||s.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let s=1,e=1,t=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:r}=this.manager.tooltipViews[0];if(De.gecko)t=r.offsetParent!=this.container.ownerDocument.body;else if(r.style.top==qr&&r.style.left=="0px"){let o=r.getBoundingClientRect();t=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}}if(t||this.position=="absolute")if(this.parent){let r=this.parent.getBoundingClientRect();r.width&&r.height&&(s=r.width/this.parent.offsetWidth,e=r.height/this.parent.offsetHeight)}else({scaleX:s,scaleY:e}=this.view.viewState);let i=this.view.scrollDOM.getBoundingClientRect(),n=ef(this.view);return{visible:{left:i.left+n.left,top:i.top+n.top,right:i.right-n.right,bottom:i.bottom-n.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((r,o)=>{let l=this.manager.tooltipViews[o];return l.getCoords?l.getCoords(r.pos):this.view.coordsAtPos(r.pos)}),size:this.manager.tooltipViews.map(({dom:r})=>r.getBoundingClientRect()),space:this.view.state.facet(zc).tooltipSpace(this.view),scaleX:s,scaleY:e,makeAbsolute:t}}writeMeasure(s){var e;if(s.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let l of this.manager.tooltipViews)l.dom.style.position="absolute"}let{visible:t,space:i,scaleX:n,scaleY:r}=s,o=[];for(let l=0;l<this.manager.tooltips.length;l++){let a=this.manager.tooltips[l],u=this.manager.tooltipViews[l],{dom:c}=u,d=s.pos[l],f=s.size[l];if(!d||a.clip!==!1&&(d.bottom<=Math.max(t.top,i.top)||d.top>=Math.min(t.bottom,i.bottom)||d.right<Math.max(t.left,i.left)-.1||d.left>Math.min(t.right,i.right)+.1)){c.style.top=qr;continue}let p=a.arrow?u.dom.querySelector(".cm-tooltip-arrow"):null,v=p?7:0,k=f.right-f.left,m=(e=Jp.get(u))!==null&&e!==void 0?e:f.bottom-f.top,w=u.offset||s3,L=this.view.textDirection==St.LTR,I=f.width>i.right-i.left?L?i.left:i.right-f.width:L?Math.max(i.left,Math.min(d.left-(p?14:0)+w.x,i.right-k)):Math.min(Math.max(i.left,d.left-k+(p?14:0)-w.x),i.right-k),H=this.above[l];!a.strictSide&&(H?d.top-m-v-w.y<i.top:d.bottom+m+v+w.y>i.bottom)&&H==i.bottom-d.bottom>d.top-i.top&&(H=this.above[l]=!H);let N=(H?d.top-i.top:i.bottom-d.bottom)-v;if(N<m&&u.resize!==!1){if(N<this.view.defaultLineHeight){c.style.top=qr;continue}Jp.set(u,m),c.style.height=(m=N)/r+"px"}else c.style.height&&(c.style.height="");let P=H?d.top-m-v-w.y:d.bottom+v+w.y,S=I+k;if(u.overlap!==!0)for(let O of o)O.left<S&&O.right>I&&O.top<P+m&&O.bottom>P&&(P=H?O.top-m-2-v:O.bottom+v+2);if(this.position=="absolute"?(c.style.top=(P-s.parent.top)/r+"px",Yp(c,(I-s.parent.left)/n)):(c.style.top=P/r+"px",Yp(c,I/n)),p){let O=d.left+(L?w.x:-w.x)-(I+14-7);p.style.left=O/n+"px"}u.overlap!==!0&&o.push({left:I,top:P,right:S,bottom:P+m}),c.classList.toggle("cm-tooltip-above",H),c.classList.toggle("cm-tooltip-below",!H),u.positioned&&u.positioned(s.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let s of this.manager.tooltipViews)s.dom.style.top=qr}},{eventObservers:{scroll(){this.maybeMeasure()}}});function Yp(s,e){let t=parseInt(s.style.left,10);(isNaN(t)||Math.abs(e-t)>1)&&(s.style.left=e+"px")}const t3=Ee.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),s3={x:0,y:0},lf=Te.define({enables:[of,t3]}),Sa=Te.define({combine:s=>s.reduce((e,t)=>e.concat(t),[])});class oc{static create(e){return new oc(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new Uv(e,Sa,(t,i)=>this.createHostedView(t,i),t=>t.dom.remove())}createHostedView(e,t){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}passProp(e){let t;for(let i of this.manager.tooltipViews){let n=i[e];if(n!==void 0){if(t===void 0)t=n;else if(t!==n)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const i3=lf.compute([Sa],s=>{let e=s.facet(Sa);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.map(t=>{var i;return(i=t.end)!==null&&i!==void 0?i:t.pos})),create:oc.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class n3{constructor(e,t,i,n,r){this.view=e,this.source=t,this.field=i,this.setHover=n,this.hoverTime=r,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,i=e.docView.nearest(t.target);if(!i)return;let n,r=1;if(i instanceof Qi)n=i.posAtStart;else{if(n=e.posAtCoords(t),n==null)return;let l=e.coordsAtPos(n);if(!l||t.y<l.top||t.y>l.bottom||t.x<l.left-e.defaultCharacterWidth||t.x>l.right+e.defaultCharacterWidth)return;let a=e.bidiSpans(e.state.doc.lineAt(n)).find(c=>c.from<=n&&c.to>=n),u=a&&a.dir==St.RTL?-1:1;r=t.x<l.left?-u:u}let o=this.source(e,n,r);if(o?.then){let l=this.pending={pos:n};o.then(a=>{this.pending==l&&(this.pending=null,a&&!(Array.isArray(a)&&!a.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(a)?a:[a])}))},a=>ks(e.state,a,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(of),t=e?e.manager.tooltips.findIndex(i=>i.create==oc.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:n,tooltip:r}=this;if(n.length&&r&&!r3(r.dom,e)||this.pending){let{pos:o}=n[0]||this.pending,l=(i=(t=n[0])===null||t===void 0?void 0:t.end)!==null&&i!==void 0?i:o;(o==l?this.view.posAtCoords(this.lastMove)!=o:!o3(this.view,o,l,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=i=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const jl=4;function r3(s,e){let{left:t,right:i,top:n,bottom:r}=s.getBoundingClientRect(),o;if(o=s.querySelector(".cm-tooltip-arrow")){let l=o.getBoundingClientRect();n=Math.min(l.top,n),r=Math.max(l.bottom,r)}return e.clientX>=t-jl&&e.clientX<=i+jl&&e.clientY>=n-jl&&e.clientY<=r+jl}function o3(s,e,t,i,n,r){let o=s.scrollDOM.getBoundingClientRect(),l=s.documentTop+s.documentPadding.top+s.contentHeight;if(o.left>i||o.right<i||o.top>n||Math.min(o.bottom,l)<n)return!1;let a=s.posAtCoords({x:i,y:n},!1);return a>=e&&a<=t}function l3(s,e={}){let t=Xe.define(),i=Yt.define({create(){return[]},update(n,r){if(n.length&&(e.hideOnChange&&(r.docChanged||r.selection)?n=[]:e.hideOn&&(n=n.filter(o=>!e.hideOn(r,o))),r.docChanged)){let o=[];for(let l of n){let a=r.changes.mapPos(l.pos,-1,hs.TrackDel);if(a!=null){let u=Object.assign(Object.create(null),l);u.pos=a,u.end!=null&&(u.end=r.changes.mapPos(u.end)),o.push(u)}}n=o}for(let o of r.effects)o.is(t)&&(n=o.value),o.is(a3)&&(n=[]);return n},provide:n=>Sa.from(n)});return{active:i,extension:[i,Pt.define(n=>new n3(n,s,i,t,e.hoverTime||300)),i3]}}function Hv(s,e){let t=s.plugin(of);if(!t)return null;let i=t.manager.tooltips.indexOf(e);return i<0?null:t.manager.tooltipViews[i]}const a3=Xe.define(),Qp=Te.define({combine(s){let e,t;for(let i of s)e=e||i.topContainer,t=t||i.bottomContainer;return{topContainer:e,bottomContainer:t}}});function Vo(s,e){let t=s.plugin(Wv),i=t?t.specs.indexOf(e):-1;return i>-1?t.panels[i]:null}const Wv=Pt.fromClass(class{constructor(s){this.input=s.state.facet(Bo),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(s));let e=s.state.facet(Qp);this.top=new $l(s,!0,e.topContainer),this.bottom=new $l(s,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(s){let e=s.state.facet(Qp);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new $l(s.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new $l(s.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=s.state.facet(Bo);if(t!=this.input){let i=t.filter(a=>a),n=[],r=[],o=[],l=[];for(let a of i){let u=this.specs.indexOf(a),c;u<0?(c=a(s.view),l.push(c)):(c=this.panels[u],c.update&&c.update(s)),n.push(c),(c.top?r:o).push(c)}this.specs=i,this.panels=n,this.top.sync(r),this.bottom.sync(o);for(let a of l)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}else for(let i of this.panels)i.update&&i.update(s)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:s=>Ee.scrollMargins.of(e=>{let t=e.plugin(s);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class $l{constructor(e,t,i){this.view=e,this.top=t,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=Xp(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=Xp(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function Xp(s){let e=s.nextSibling;return s.remove(),e}const Bo=Te.define({enables:Wv});class Li extends Ln{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Li.prototype.elementClass="";Li.prototype.toDOM=void 0;Li.prototype.mapMode=hs.TrackBefore;Li.prototype.startSide=Li.prototype.endSide=-1;Li.prototype.point=!0;const sa=Te.define(),c3=Te.define(),u3={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>it.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},vo=Te.define();function d3(s){return[Kv(),vo.of({...u3,...s})]}const Zp=Te.define({combine:s=>s.some(e=>e)});function Kv(s){return[f3]}const f3=Pt.fromClass(class{constructor(s){this.view=s,this.domAfter=null,this.prevViewport=s.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=s.state.facet(vo).map(e=>new tm(s,e)),this.fixed=!s.state.facet(Zp);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),s.scrollDOM.insertBefore(this.dom,s.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(s){if(this.updateGutters(s)){let e=this.prevViewport,t=s.view.viewport,i=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(i<(t.to-t.from)*.8)}if(s.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(Zp)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=s.view.viewport}syncGutters(s){let e=this.dom.nextSibling;s&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let t=it.iter(this.view.state.facet(sa),this.view.viewport.from),i=[],n=this.gutters.map(r=>new h3(r,this.view.viewport,-this.view.documentPadding.top));for(let r of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(r.type)){let o=!0;for(let l of r.type)if(l.type==ps.Text&&o){ld(t,i,l.from);for(let a of n)a.line(this.view,l,i);o=!1}else if(l.widget)for(let a of n)a.widget(this.view,l)}else if(r.type==ps.Text){ld(t,i,r.from);for(let o of n)o.line(this.view,r,i)}else if(r.widget)for(let o of n)o.widget(this.view,r);for(let r of n)r.finish();s&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(s){let e=s.startState.facet(vo),t=s.state.facet(vo),i=s.docChanged||s.heightChanged||s.viewportChanged||!it.eq(s.startState.facet(sa),s.state.facet(sa),s.view.viewport.from,s.view.viewport.to);if(e==t)for(let n of this.gutters)n.update(s)&&(i=!0);else{i=!0;let n=[];for(let r of t){let o=e.indexOf(r);o<0?n.push(new tm(this.view,r)):(this.gutters[o].update(s),n.push(this.gutters[o]))}for(let r of this.gutters)r.dom.remove(),n.indexOf(r)<0&&r.destroy();for(let r of n)r.config.side=="after"?this.getDOMAfter().appendChild(r.dom):this.dom.appendChild(r.dom);this.gutters=n}return i}destroy(){for(let s of this.gutters)s.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:s=>Ee.scrollMargins.of(e=>{let t=e.plugin(s);if(!t||t.gutters.length==0||!t.fixed)return null;let i=t.dom.offsetWidth*e.scaleX,n=t.domAfter?t.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==St.LTR?{left:i,right:n}:{right:i,left:n}})});function em(s){return Array.isArray(s)?s:[s]}function ld(s,e,t){for(;s.value&&s.from<=t;)s.from==t&&e.push(s.value),s.next()}class h3{constructor(e,t,i){this.gutter=e,this.height=i,this.i=0,this.cursor=it.iter(e.markers,t.from)}addElement(e,t,i){let{gutter:n}=this,r=(t.top-this.height)/e.scaleY,o=t.height/e.scaleY;if(this.i==n.elements.length){let l=new qv(e,o,r,i);n.elements.push(l),n.dom.appendChild(l.dom)}else n.elements[this.i].update(e,o,r,i);this.height=t.bottom,this.i++}line(e,t,i){let n=[];ld(this.cursor,n,t.from),i.length&&(n=n.concat(i));let r=this.gutter.config.lineMarker(e,t,n);r&&n.unshift(r);let o=this.gutter;n.length==0&&!o.config.renderEmptyElements||this.addElement(e,t,n)}widget(e,t){let i=this.gutter.config.widgetMarker(e,t.widget,t),n=i?[i]:null;for(let r of e.state.facet(c3)){let o=r(e,t.widget,t);o&&(n||(n=[])).push(o)}n&&this.addElement(e,t,n)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class tm{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in t.domEventHandlers)this.dom.addEventListener(i,n=>{let r=n.target,o;if(r!=this.dom&&this.dom.contains(r)){for(;r.parentNode!=this.dom;)r=r.parentNode;let a=r.getBoundingClientRect();o=(a.top+a.bottom)/2}else o=n.clientY;let l=e.lineBlockAtHeight(o-e.documentTop);t.domEventHandlers[i](e,l,n)&&n.preventDefault()});this.markers=em(t.markers(e)),t.initialSpacer&&(this.spacer=new qv(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=em(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let n=this.config.updateSpacer(this.spacer.markers[0],e);n!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[n])}let i=e.view.viewport;return!it.eq(this.markers,t,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class qv{constructor(e,t,i,n){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,i,n)}update(e,t,i,n){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),p3(this.markers,n)||this.setMarkers(e,n)}setMarkers(e,t){let i="cm-gutterElement",n=this.dom.firstChild;for(let r=0,o=0;;){let l=o,a=r<t.length?t[r++]:null,u=!1;if(a){let c=a.elementClass;c&&(i+=" "+c);for(let d=o;d<this.markers.length;d++)if(this.markers[d].compare(a)){l=d,u=!0;break}}else l=this.markers.length;for(;o<l;){let c=this.markers[o++];if(c.toDOM){c.destroy(n);let d=n.nextSibling;n.remove(),n=d}}if(!a)break;a.toDOM&&(u?n=n.nextSibling:this.dom.insertBefore(a.toDOM(e),n)),u&&o++}this.dom.className=i,this.markers=t}destroy(){this.setMarkers(null,[])}}function p3(s,e){if(s.length!=e.length)return!1;for(let t=0;t<s.length;t++)if(!s[t].compare(e[t]))return!1;return!0}const m3=Te.define(),g3=Te.define(),er=Te.define({combine(s){return ki(s,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let i=Object.assign({},e);for(let n in t){let r=i[n],o=t[n];i[n]=r?(l,a,u)=>r(l,a,u)||o(l,a,u):o}return i}})}});class Uc extends Li{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Hc(s,e){return s.state.facet(er).formatNumber(e,s.state)}const v3=vo.compute([er],s=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(m3)},lineMarker(e,t,i){return i.some(n=>n.toDOM)?null:new Uc(Hc(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,i)=>{for(let n of e.state.facet(g3)){let r=n(e,t,i);if(r)return r}return null},lineMarkerChange:e=>e.startState.facet(er)!=e.state.facet(er),initialSpacer(e){return new Uc(Hc(e,sm(e.state.doc.lines)))},updateSpacer(e,t){let i=Hc(t.view,sm(t.view.state.doc.lines));return i==e.number?e:new Uc(i)},domEventHandlers:s.facet(er).domEventHandlers,side:"before"}));function y3(s={}){return[er.of(s),Kv(),v3]}function sm(s){let e=9;for(;e<s;)e=e*10+9;return e}const b3=new class extends Li{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},k3=sa.compute(["selection"],s=>{let e=[],t=-1;for(let i of s.selection.ranges){let n=s.doc.lineAt(i.head).from;n>t&&(t=n,e.push(b3.range(n)))}return it.of(e)});function x3(){return k3}const w3=1024;let S3=0;class Wc{constructor(e,t){this.from=e,this.to=t}}class et{constructor(e={}){this.id=S3++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Ss.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}}et.closedBy=new et({deserialize:s=>s.split(" ")});et.openedBy=new et({deserialize:s=>s.split(" ")});et.group=new et({deserialize:s=>s.split(" ")});et.isolate=new et({deserialize:s=>{if(s&&s!="rtl"&&s!="ltr"&&s!="auto")throw new RangeError("Invalid value for isolate: "+s);return s||"auto"}});et.contextHash=new et({perNode:!0});et.lookAhead=new et({perNode:!0});et.mounted=new et({perNode:!0});class Ca{constructor(e,t,i){this.tree=e,this.overlay=t,this.parser=i}static get(e){return e&&e.props&&e.props[et.mounted.id]}}const C3=Object.create(null);class Ss{constructor(e,t,i,n=0){this.name=e,this.props=t,this.id=i,this.flags=n}static define(e){let t=e.props&&e.props.length?Object.create(null):C3,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),n=new Ss(e.name||"",t,e.id,i);if(e.props){for(let r of e.props)if(Array.isArray(r)||(r=r(n)),r){if(r[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[r[0].id]=r[1]}}return n}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(et.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let n of i.split(" "))t[n]=e[i];return i=>{for(let n=i.prop(et.group),r=-1;r<(n?n.length:0);r++){let o=t[r<0?i.name:n[r]];if(o)return o}}}}Ss.none=new Ss("",Object.create(null),0,8);class af{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let n=null;for(let r of e){let o=r(i);if(o){n||(n=Object.assign({},i.props));let l=o[1],a=o[0];a.combine&&a.id in n&&(l=a.combine(n[a.id],l)),n[a.id]=l}}t.push(n?new Ss(i.name,n,i.id,i.flags):i)}return new af(t)}}const Rl=new WeakMap,im=new WeakMap;var qt;(function(s){s[s.ExcludeBuffers=1]="ExcludeBuffers",s[s.IncludeAnonymous=2]="IncludeAnonymous",s[s.IgnoreMounts=4]="IgnoreMounts",s[s.IgnoreOverlays=8]="IgnoreOverlays"})(qt||(qt={}));class _t{constructor(e,t,i,n,r){if(this.type=e,this.children=t,this.positions=i,this.length=n,this.props=null,r&&r.length){this.props=Object.create(null);for(let[o,l]of r)this.props[typeof o=="number"?o:o.id]=l}}toString(){let e=Ca.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let n=i.toString();n&&(t&&(t+=","),t+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new cd(this.topNode,e)}cursorAt(e,t=0,i=0){let n=Rl.get(this)||this.topNode,r=new cd(n);return r.moveTo(e,t),Rl.set(this,r._tree),r}get topNode(){return new Fs(this,0,0,null)}resolve(e,t=0){let i=Io(Rl.get(this)||this.topNode,e,t,!1);return Rl.set(this,i),i}resolveInner(e,t=0){let i=Io(im.get(this)||this.topNode,e,t,!0);return im.set(this,i),i}resolveStack(e,t=0){return M3(this,e,t)}iterate(e){let{enter:t,leave:i,from:n=0,to:r=this.length}=e,o=e.mode||0,l=(o&qt.IncludeAnonymous)>0;for(let a=this.cursor(o|qt.IncludeAnonymous);;){let u=!1;if(a.from<=r&&a.to>=n&&(!l&&a.type.isAnonymous||t(a)!==!1)){if(a.firstChild())continue;u=!0}for(;u&&i&&(l||!a.type.isAnonymous)&&i(a),!a.nextSibling();){if(!a.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:df(Ss.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,n)=>new _t(this.type,t,i,n,this.propValues),e.makeTree||((t,i,n)=>new _t(Ss.none,t,i,n)))}static build(e){return D3(e)}}_t.empty=new _t(Ss.none,[],[],0);class cf{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new cf(this.buffer,this.index)}}class un{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return Ss.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],n=this.set.types[t],r=n.name;if(/\W/.test(r)&&!n.isError&&(r=JSON.stringify(r)),e+=4,i==e)return r;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return r+"("+o.join(",")+")"}findChild(e,t,i,n,r){let{buffer:o}=this,l=-1;for(let a=e;a!=t&&!(Gv(r,n,o[a+1],o[a+2])&&(l=a,i>0));a=o[a+3]);return l}slice(e,t,i){let n=this.buffer,r=new Uint16Array(t-e),o=0;for(let l=e,a=0;l<t;){r[a++]=n[l++],r[a++]=n[l++]-i;let u=r[a++]=n[l++]-i;r[a++]=n[l++]-e,o=Math.max(o,u)}return new un(r,o,this.set)}}function Gv(s,e,t,i){switch(s){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function Io(s,e,t,i){for(var n;s.from==s.to||(t<1?s.from>=e:s.from>e)||(t>-1?s.to<=e:s.to<e);){let o=!i&&s instanceof Fs&&s.index<0?null:s.parent;if(!o)return s;s=o}let r=i?0:qt.IgnoreOverlays;if(i)for(let o=s,l=o.parent;l;o=l,l=o.parent)o instanceof Fs&&o.index<0&&((n=l.enter(e,t,r))===null||n===void 0?void 0:n.from)!=o.from&&(s=l);for(;;){let o=s.enter(e,t,r);if(!o)return s;s=o}}class Jv{cursor(e=0){return new cd(this,e)}getChild(e,t=null,i=null){let n=nm(this,e,t,i);return n.length?n[0]:null}getChildren(e,t=null,i=null){return nm(this,e,t,i)}resolve(e,t=0){return Io(this,e,t,!1)}resolveInner(e,t=0){return Io(this,e,t,!0)}matchContext(e){return ad(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),i=this;for(;t;){let n=t.lastChild;if(!n||n.to!=t.to)break;n.type.isError&&n.from==n.to?(i=t,t=n.prevSibling):t=n}return i}get node(){return this}get next(){return this.parent}}class Fs extends Jv{constructor(e,t,i,n){super(),this._tree=e,this.from=t,this.index=i,this._parent=n}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,n,r=0){for(let o=this;;){for(let{children:l,positions:a}=o._tree,u=t>0?l.length:-1;e!=u;e+=t){let c=l[e],d=a[e]+o.from;if(Gv(n,i,d,d+c.length)){if(c instanceof un){if(r&qt.ExcludeBuffers)continue;let f=c.findChild(0,c.buffer.length,t,i-d,n);if(f>-1)return new Zi(new _3(o,c,e,d),null,f)}else if(r&qt.IncludeAnonymous||!c.type.isAnonymous||uf(c)){let f;if(!(r&qt.IgnoreMounts)&&(f=Ca.get(c))&&!f.overlay)return new Fs(f.tree,d,e,o);let p=new Fs(c,d,e,o);return r&qt.IncludeAnonymous||!p.type.isAnonymous?p:p.nextChild(t<0?c.children.length-1:0,t,i,n)}}}if(r&qt.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let n;if(!(i&qt.IgnoreOverlays)&&(n=Ca.get(this._tree))&&n.overlay){let r=e-this.from;for(let{from:o,to:l}of n.overlay)if((t>0?o<=r:o<r)&&(t<0?l>=r:l>r))return new Fs(n.tree,n.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function nm(s,e,t,i){let n=s.cursor(),r=[];if(!n.firstChild())return r;if(t!=null){for(let o=!1;!o;)if(o=n.type.is(t),!n.nextSibling())return r}for(;;){if(i!=null&&n.type.is(i))return r;if(n.type.is(e)&&r.push(n.node),!n.nextSibling())return i==null?r:[]}}function ad(s,e,t=e.length-1){for(let i=s;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}class _3{constructor(e,t,i,n){this.parent=e,this.buffer=t,this.index=i,this.start=n}}class Zi extends Jv{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,i){super(),this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,t,i){let{buffer:n}=this.context,r=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.context.start,i);return r<0?null:new Zi(this.context,this,r)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&qt.ExcludeBuffers)return null;let{buffer:n}=this.context,r=n.findChild(this.index+4,n.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return r<0?null:new Zi(this.context,this,r)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Zi(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Zi(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,n=this.index+4,r=i.buffer[this.index+3];if(r>n){let o=i.buffer[this.index+1];e.push(i.slice(n,r,o)),t.push(0)}return new _t(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function Yv(s){if(!s.length)return null;let e=0,t=s[0];for(let r=1;r<s.length;r++){let o=s[r];(o.from>t.from||o.to<t.to)&&(t=o,e=r)}let i=t instanceof Fs&&t.index<0?null:t.parent,n=s.slice();return i?n[e]=i:n.splice(e,1),new A3(n,t)}class A3{constructor(e,t){this.heads=e,this.node=t}get next(){return Yv(this.heads)}}function M3(s,e,t){let i=s.resolveInner(e,t),n=null;for(let r=i instanceof Fs?i:i.context.parent;r;r=r.parent)if(r.index<0){let o=r.parent;(n||(n=[i])).push(o.resolve(e,t)),r=o}else{let o=Ca.get(r.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let l=new Fs(o.tree,o.overlay[0].from+r.from,-1,r);(n||(n=[i])).push(Io(l,e,t,!1))}}return n?Yv(n):i}class cd{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Fs)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:n}=this.buffer;return this.type=t||n.set.types[n.buffer[e]],this.from=i+n.buffer[e+1],this.to=i+n.buffer[e+2],!0}yield(e){return e?e instanceof Fs?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:n}=this.buffer,r=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.buffer.start,i);return r<0?!1:(this.stack.push(this.index),this.yieldBuf(r))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?i&qt.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&qt.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&qt.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let n=i<0?0:this.stack[i]+4;if(this.index!=n)return this.yieldBuf(t.findChild(n,this.index,-1,0,4))}else{let n=t.buffer[this.index+3];if(n<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(n)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:n}=this;if(n){if(e>0){if(this.index<n.buffer.buffer.length)return!1}else for(let r=0;r<this.index;r++)if(n.buffer.buffer[r+3]<this.index)return!1;({index:t,parent:i}=n)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let r=t+e,o=e<0?-1:i._tree.children.length;r!=o;r+=e){let l=i._tree.children[r];if(this.mode&qt.IncludeAnonymous||l instanceof un||!l.type.isAnonymous||uf(l))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer)e:for(let n=this.index,r=this.stack.length;r>=0;){for(let o=e;o;o=o._parent)if(o.index==n){if(n==this.index)return o;t=o,i=r+1;break e}n=this.stack[--r]}for(let n=i;n<this.stack.length;n++)t=new Zi(this.buffer,t,this.stack[n]);return this.bufferNode=new Zi(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let n=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(n=!0)}for(;;){if(n&&t&&t(this),n=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,n=!0}}}matchContext(e){if(!this.buffer)return ad(this.node.parent,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let n=e.length-1,r=this.stack.length-1;n>=0;r--){if(r<0)return ad(this._tree,e,n);let o=i[t.buffer[this.stack[r]]];if(!o.isAnonymous){if(e[n]&&e[n]!=o.name)return!1;n--}}return!0}}function uf(s){return s.children.some(e=>e instanceof un||!e.type.isAnonymous||uf(e))}function D3(s){var e;let{buffer:t,nodeSet:i,maxBufferLength:n=w3,reused:r=[],minRepeatType:o=i.types.length}=s,l=Array.isArray(t)?new cf(t,t.length):t,a=i.types,u=0,c=0;function d(N,P,S,O,W,oe){let{id:se,start:B,end:ae,size:ee}=l,$=c,q=u;if(ee<0)if(l.next(),ee==-1){let be=r[se];S.push(be),O.push(B-N);return}else if(ee==-3){u=se;return}else if(ee==-4){c=se;return}else throw new RangeError(`Unrecognized record size: ${ee}`);let Y=a[se],ce,ge,Ne=B-N;if(ae-B<=n&&(ge=m(l.pos-P,W))){let be=new Uint16Array(ge.size-ge.skip),ze=l.pos-ge.size,Ue=be.length;for(;l.pos>ze;)Ue=w(ge.start,be,Ue);ce=new un(be,ae-ge.start,i),Ne=ge.start-N}else{let be=l.pos-ee;l.next();let ze=[],Ue=[],Je=se>=o?se:-1,ht=0,rt=ae;for(;l.pos>be;)Je>=0&&l.id==Je&&l.size>=0?(l.end<=rt-n&&(v(ze,Ue,B,ht,l.end,rt,Je,$,q),ht=ze.length,rt=l.end),l.next()):oe>2500?f(B,be,ze,Ue):d(B,be,ze,Ue,Je,oe+1);if(Je>=0&&ht>0&&ht<ze.length&&v(ze,Ue,B,ht,B,rt,Je,$,q),ze.reverse(),Ue.reverse(),Je>-1&&ht>0){let te=p(Y,q);ce=df(Y,ze,Ue,0,ze.length,0,ae-B,te,te)}else ce=k(Y,ze,Ue,ae-B,$-ae,q)}S.push(ce),O.push(Ne)}function f(N,P,S,O){let W=[],oe=0,se=-1;for(;l.pos>P;){let{id:B,start:ae,end:ee,size:$}=l;if($>4)l.next();else{if(se>-1&&ae<se)break;se<0&&(se=ee-n),W.push(B,ae,ee),oe++,l.next()}}if(oe){let B=new Uint16Array(oe*4),ae=W[W.length-2];for(let ee=W.length-3,$=0;ee>=0;ee-=3)B[$++]=W[ee],B[$++]=W[ee+1]-ae,B[$++]=W[ee+2]-ae,B[$++]=$;S.push(new un(B,W[2]-ae,i)),O.push(ae-N)}}function p(N,P){return(S,O,W)=>{let oe=0,se=S.length-1,B,ae;if(se>=0&&(B=S[se])instanceof _t){if(!se&&B.type==N&&B.length==W)return B;(ae=B.prop(et.lookAhead))&&(oe=O[se]+B.length+ae)}return k(N,S,O,W,oe,P)}}function v(N,P,S,O,W,oe,se,B,ae){let ee=[],$=[];for(;N.length>O;)ee.push(N.pop()),$.push(P.pop()+S-W);N.push(k(i.types[se],ee,$,oe-W,B-oe,ae)),P.push(W-S)}function k(N,P,S,O,W,oe,se){if(oe){let B=[et.contextHash,oe];se=se?[B].concat(se):[B]}if(W>25){let B=[et.lookAhead,W];se=se?[B].concat(se):[B]}return new _t(N,P,S,O,se)}function m(N,P){let S=l.fork(),O=0,W=0,oe=0,se=S.end-n,B={size:0,start:0,skip:0};e:for(let ae=S.pos-N;S.pos>ae;){let ee=S.size;if(S.id==P&&ee>=0){B.size=O,B.start=W,B.skip=oe,oe+=4,O+=4,S.next();continue}let $=S.pos-ee;if(ee<0||$<ae||S.start<se)break;let q=S.id>=o?4:0,Y=S.start;for(S.next();S.pos>$;){if(S.size<0)if(S.size==-3)q+=4;else break e;else S.id>=o&&(q+=4);S.next()}W=Y,O+=ee,oe+=q}return(P<0||O==N)&&(B.size=O,B.start=W,B.skip=oe),B.size>4?B:void 0}function w(N,P,S){let{id:O,start:W,end:oe,size:se}=l;if(l.next(),se>=0&&O<o){let B=S;if(se>4){let ae=l.pos-(se-4);for(;l.pos>ae;)S=w(N,P,S)}P[--S]=B,P[--S]=oe-N,P[--S]=W-N,P[--S]=O}else se==-3?u=O:se==-4&&(c=O);return S}let L=[],I=[];for(;l.pos>0;)d(s.start||0,s.bufferStart||0,L,I,-1,0);let H=(e=s.length)!==null&&e!==void 0?e:L.length?I[0]+L[0].length:0;return new _t(a[s.topID],L.reverse(),I.reverse(),H)}const rm=new WeakMap;function ia(s,e){if(!s.isAnonymous||e instanceof un||e.type!=s)return 1;let t=rm.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=s||!(i instanceof _t)){t=1;break}t+=ia(s,i)}rm.set(e,t)}return t}function df(s,e,t,i,n,r,o,l,a){let u=0;for(let v=i;v<n;v++)u+=ia(s,e[v]);let c=Math.ceil(u*1.5/8),d=[],f=[];function p(v,k,m,w,L){for(let I=m;I<w;){let H=I,N=k[I],P=ia(s,v[I]);for(I++;I<w;I++){let S=ia(s,v[I]);if(P+S>=c)break;P+=S}if(I==H+1){if(P>c){let S=v[H];p(S.children,S.positions,0,S.children.length,k[H]+L);continue}d.push(v[H])}else{let S=k[I-1]+v[I-1].length-N;d.push(df(s,v,k,H,I,N,S,null,a))}f.push(N+L-r)}}return p(e,t,i,n,0),(l||a)(d,f,o)}class jn{constructor(e,t,i,n,r=!1,o=!1){this.from=e,this.to=t,this.tree=i,this.offset=n,this.open=(r?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],i=!1){let n=[new jn(0,e.length,e,0,!1,i)];for(let r of t)r.to>e.length&&n.push(r);return n}static applyChanges(e,t,i=128){if(!t.length)return e;let n=[],r=1,o=e.length?e[0]:null;for(let l=0,a=0,u=0;;l++){let c=l<t.length?t[l]:null,d=c?c.fromA:1e9;if(d-a>=i)for(;o&&o.from<d;){let f=o;if(a>=f.from||d<=f.to||u){let p=Math.max(f.from,a)-u,v=Math.min(f.to,d)-u;f=p>=v?null:new jn(p,v,f.tree,f.offset+u,l>0,!!c)}if(f&&n.push(f),o.to>d)break;o=r<e.length?e[r++]:null}if(!c)break;a=c.toA,u=c.toA-c.toB}return n}}class Qv{startParse(e,t,i){return typeof e=="string"&&(e=new E3(e)),i=i?i.length?i.map(n=>new Wc(n.from,n.to)):[new Wc(0,0)]:[new Wc(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let n=this.startParse(e,t,i);for(;;){let r=n.advance();if(r)return r}}}class E3{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new et({perNode:!0});let T3=0;class $s{constructor(e,t,i,n){this.name=e,this.set=t,this.base=i,this.modified=n,this.id=T3++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let i=typeof e=="string"?e:"?";if(e instanceof $s&&(t=e),t?.base)throw new Error("Can not derive from a modified tag");let n=new $s(i,[],null,[]);if(n.set.push(n),t)for(let r of t.set)n.set.push(r);return n}static defineModifier(e){let t=new _a(e);return i=>i.modified.indexOf(t)>-1?i:_a.get(i.base||i,i.modified.concat(t).sort((n,r)=>n.id-r.id))}}let O3=0;class _a{constructor(e){this.name=e,this.instances=[],this.id=O3++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find(l=>l.base==e&&P3(t,l.modified));if(i)return i;let n=[],r=new $s(e.name,n,e,t);for(let l of t)l.instances.push(r);let o=j3(t);for(let l of e.set)if(!l.modified.length)for(let a of o)n.push(_a.get(l,a));return r}}function P3(s,e){return s.length==e.length&&s.every((t,i)=>t==e[i])}function j3(s){let e=[[]];for(let t=0;t<s.length;t++)for(let i=0,n=e.length;i<n;i++)e.push(e[i].concat(s[t]));return e.sort((t,i)=>i.length-t.length)}function $3(s){let e=Object.create(null);for(let t in s){let i=s[t];Array.isArray(i)||(i=[i]);for(let n of t.split(" "))if(n){let r=[],o=2,l=n;for(let d=0;;){if(l=="..."&&d>0&&d+3==n.length){o=1;break}let f=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!f)throw new RangeError("Invalid path: "+n);if(r.push(f[0]=="*"?"":f[0][0]=='"'?JSON.parse(f[0]):f[0]),d+=f[0].length,d==n.length)break;let p=n[d++];if(d==n.length&&p=="!"){o=0;break}if(p!="/")throw new RangeError("Invalid path: "+n);l=n.slice(d)}let a=r.length-1,u=r[a];if(!u)throw new RangeError("Invalid path: "+n);let c=new No(i,o,a>0?r.slice(0,a):null);e[u]=c.sort(e[u])}}return Xv.add(e)}const Xv=new et({combine(s,e){let t,i,n;for(;s||e;){if(!s||e&&s.depth>=e.depth?(n=e,e=e.next):(n=s,s=s.next),t&&t.mode==n.mode&&!n.context&&!t.context)continue;let r=new No(n.tags,n.mode,n.context);t?t.next=r:i=r,t=r}return i}});class No{constructor(e,t,i,n){this.tags=e,this.mode=t,this.context=i,this.next=n}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}No.empty=new No([],2,null);function Zv(s,e){let t=Object.create(null);for(let r of s)if(!Array.isArray(r.tag))t[r.tag.id]=r.class;else for(let o of r.tag)t[o.id]=r.class;let{scope:i,all:n=null}=e||{};return{style:r=>{let o=n;for(let l of r)for(let a of l.set){let u=t[a.id];if(u){o=o?o+" "+u:u;break}}return o},scope:i}}function R3(s,e){let t=null;for(let i of s){let n=i.style(e);n&&(t=t?t+" "+n:n)}return t}function L3(s,e,t,i=0,n=s.length){let r=new V3(i,Array.isArray(e)?e:[e],t);r.highlightRange(s.cursor(),i,n,"",r.highlighters),r.flush(n)}class V3{constructor(e,t,i){this.at=e,this.highlighters=t,this.span=i,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,i,n,r){let{type:o,from:l,to:a}=e;if(l>=i||a<=t)return;o.isTop&&(r=this.highlighters.filter(p=>!p.scope||p.scope(o)));let u=n,c=B3(e)||No.empty,d=R3(r,c.tags);if(d&&(u&&(u+=" "),u+=d,c.mode==1&&(n+=(n?" ":"")+d)),this.startSpan(Math.max(t,l),u),c.opaque)return;let f=e.tree&&e.tree.prop(et.mounted);if(f&&f.overlay){let p=e.node.enter(f.overlay[0].from+l,1),v=this.highlighters.filter(m=>!m.scope||m.scope(f.tree.type)),k=e.firstChild();for(let m=0,w=l;;m++){let L=m<f.overlay.length?f.overlay[m]:null,I=L?L.from+l:a,H=Math.max(t,w),N=Math.min(i,I);if(H<N&&k)for(;e.from<N&&(this.highlightRange(e,H,N,n,r),this.startSpan(Math.min(N,e.to),u),!(e.to>=I||!e.nextSibling())););if(!L||I>i)break;w=L.to+l,w>t&&(this.highlightRange(p.cursor(),Math.max(t,L.from+l),Math.min(i,w),"",v),this.startSpan(Math.min(i,w),u))}k&&e.parent()}else if(e.firstChild()){f&&(n="");do if(!(e.to<=t)){if(e.from>=i)break;this.highlightRange(e,t,i,n,r),this.startSpan(Math.min(i,e.to),u)}while(e.nextSibling());e.parent()}}}function B3(s){let e=s.type.prop(Xv);for(;e&&e.context&&!s.matchContext(e.context);)e=e.next;return e||null}const Se=$s.define,Ll=Se(),Ki=Se(),om=Se(Ki),lm=Se(Ki),qi=Se(),Vl=Se(qi),Kc=Se(qi),ci=Se(),xn=Se(ci),li=Se(),ai=Se(),ud=Se(),Gr=Se(ud),Bl=Se(),Me={comment:Ll,lineComment:Se(Ll),blockComment:Se(Ll),docComment:Se(Ll),name:Ki,variableName:Se(Ki),typeName:om,tagName:Se(om),propertyName:lm,attributeName:Se(lm),className:Se(Ki),labelName:Se(Ki),namespace:Se(Ki),macroName:Se(Ki),literal:qi,string:Vl,docString:Se(Vl),character:Se(Vl),attributeValue:Se(Vl),number:Kc,integer:Se(Kc),float:Se(Kc),bool:Se(qi),regexp:Se(qi),escape:Se(qi),color:Se(qi),url:Se(qi),keyword:li,self:Se(li),null:Se(li),atom:Se(li),unit:Se(li),modifier:Se(li),operatorKeyword:Se(li),controlKeyword:Se(li),definitionKeyword:Se(li),moduleKeyword:Se(li),operator:ai,derefOperator:Se(ai),arithmeticOperator:Se(ai),logicOperator:Se(ai),bitwiseOperator:Se(ai),compareOperator:Se(ai),updateOperator:Se(ai),definitionOperator:Se(ai),typeOperator:Se(ai),controlOperator:Se(ai),punctuation:ud,separator:Se(ud),bracket:Gr,angleBracket:Se(Gr),squareBracket:Se(Gr),paren:Se(Gr),brace:Se(Gr),content:ci,heading:xn,heading1:Se(xn),heading2:Se(xn),heading3:Se(xn),heading4:Se(xn),heading5:Se(xn),heading6:Se(xn),contentSeparator:Se(ci),list:Se(ci),quote:Se(ci),emphasis:Se(ci),strong:Se(ci),link:Se(ci),monospace:Se(ci),strikethrough:Se(ci),inserted:Se(),deleted:Se(),changed:Se(),invalid:Se(),meta:Bl,documentMeta:Se(Bl),annotation:Se(Bl),processingInstruction:Se(Bl),definition:$s.defineModifier("definition"),constant:$s.defineModifier("constant"),function:$s.defineModifier("function"),standard:$s.defineModifier("standard"),local:$s.defineModifier("local"),special:$s.defineModifier("special")};for(let s in Me){let e=Me[s];e instanceof $s&&(e.name=s)}Zv([{tag:Me.link,class:"tok-link"},{tag:Me.heading,class:"tok-heading"},{tag:Me.emphasis,class:"tok-emphasis"},{tag:Me.strong,class:"tok-strong"},{tag:Me.keyword,class:"tok-keyword"},{tag:Me.atom,class:"tok-atom"},{tag:Me.bool,class:"tok-bool"},{tag:Me.url,class:"tok-url"},{tag:Me.labelName,class:"tok-labelName"},{tag:Me.inserted,class:"tok-inserted"},{tag:Me.deleted,class:"tok-deleted"},{tag:Me.literal,class:"tok-literal"},{tag:Me.string,class:"tok-string"},{tag:Me.number,class:"tok-number"},{tag:[Me.regexp,Me.escape,Me.special(Me.string)],class:"tok-string2"},{tag:Me.variableName,class:"tok-variableName"},{tag:Me.local(Me.variableName),class:"tok-variableName tok-local"},{tag:Me.definition(Me.variableName),class:"tok-variableName tok-definition"},{tag:Me.special(Me.variableName),class:"tok-variableName2"},{tag:Me.definition(Me.propertyName),class:"tok-propertyName tok-definition"},{tag:Me.typeName,class:"tok-typeName"},{tag:Me.namespace,class:"tok-namespace"},{tag:Me.className,class:"tok-className"},{tag:Me.macroName,class:"tok-macroName"},{tag:Me.propertyName,class:"tok-propertyName"},{tag:Me.operator,class:"tok-operator"},{tag:Me.comment,class:"tok-comment"},{tag:Me.meta,class:"tok-meta"},{tag:Me.invalid,class:"tok-invalid"},{tag:Me.punctuation,class:"tok-punctuation"}]);var qc;const tr=new et;function I3(s){return Te.define({combine:s?e=>e.concat(s):void 0})}const N3=new et;class Ws{constructor(e,t,i=[],n=""){this.data=e,this.name=n,st.prototype.hasOwnProperty("tree")||Object.defineProperty(st.prototype,"tree",{get(){return ns(this)}}),this.parser=t,this.extension=[dn.of(this),st.languageData.of((r,o,l)=>{let a=am(r,o,l),u=a.type.prop(tr);if(!u)return[];let c=r.facet(u),d=a.type.prop(N3);if(d){let f=a.resolve(o-a.from,l);for(let p of d)if(p.test(f,r)){let v=r.facet(p.facet);return p.type=="replace"?v:v.concat(c)}}return c})].concat(i)}isActiveAt(e,t,i=-1){return am(e,t,i).type.prop(tr)==this.data}findRegions(e){let t=e.facet(dn);if(t?.data==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[],n=(r,o)=>{if(r.prop(tr)==this.data){i.push({from:o,to:o+r.length});return}let l=r.prop(et.mounted);if(l){if(l.tree.prop(tr)==this.data){if(l.overlay)for(let a of l.overlay)i.push({from:a.from+o,to:a.to+o});else i.push({from:o,to:o+r.length});return}else if(l.overlay){let a=i.length;if(n(l.tree,l.overlay[0].from+o),i.length>a)return}}for(let a=0;a<r.children.length;a++){let u=r.children[a];u instanceof _t&&n(u,r.positions[a]+o)}};return n(ns(e),0),i}get allowsNesting(){return!0}}Ws.setState=Xe.define();function am(s,e,t){let i=s.facet(dn),n=ns(s).topNode;if(!i||i.allowsNesting)for(let r=n;r;r=r.enter(e,t,qt.ExcludeBuffers))r.type.isTop&&(n=r);return n}function ns(s){let e=s.field(Ws.state,!1);return e?e.tree:_t.empty}class F3{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}}let Jr=null;class Sr{constructor(e,t,i=[],n,r,o,l,a){this.parser=e,this.state=t,this.fragments=i,this.tree=n,this.treeLen=r,this.viewport=o,this.skipped=l,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,i){return new Sr(e,t,[],_t.empty,0,i,[],null)}startParse(){return this.parser.startParse(new F3(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=_t.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let n=Date.now()+e;e=()=>Date.now()>n}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let n=this.parse.advance();if(n)if(this.fragments=this.withoutTempSkipped(jn.addTree(n,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=n,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(jn.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=Jr;Jr=this;try{return e()}finally{Jr=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=cm(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:n,treeLen:r,viewport:o,skipped:l}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((u,c,d,f)=>a.push({fromA:u,toA:c,fromB:d,toB:f})),i=jn.applyChanges(i,a),n=_t.empty,r=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){l=[];for(let u of this.skipped){let c=e.mapPos(u.from,1),d=e.mapPos(u.to,-1);c<d&&l.push({from:c,to:d})}}}return new Sr(this.parser,t,i,n,r,o,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:n,to:r}=this.skipped[i];n<e.to&&r>e.from&&(this.fragments=cm(this.fragments,n,r),this.skipped.splice(i--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends Qv{createParse(t,i,n){let r=n[0].from,o=n[n.length-1].to;return{parsedPos:r,advance(){let a=Jr;if(a){for(let u of n)a.tempSkipped.push(u);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=o,new _t(Ss.none,[],[],o-r)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return Jr}}function cm(s,e,t){return jn.applyChanges(s,[{fromA:e,toA:t,fromB:e,toB:t}])}class Cr{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,i)||t.takeTree(),new Cr(t)}static init(e){let t=Math.min(3e3,e.doc.length),i=Sr.create(e.facet(dn).parser,e,{from:0,to:t});return i.work(20,t)||i.takeTree(),new Cr(i)}}Ws.state=Yt.define({create:Cr.init,update(s,e){for(let t of e.effects)if(t.is(Ws.setState))return t.value;return e.startState.facet(dn)!=e.state.facet(dn)?Cr.init(e.state):s.apply(e)}});let ey=s=>{let e=setTimeout(()=>s(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(ey=s=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(s,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const Gc=typeof navigator<"u"&&(!((qc=navigator.scheduling)===null||qc===void 0)&&qc.isInputPending)?()=>navigator.scheduling.isInputPending():null,z3=Pt.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Ws.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Ws.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=ey(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:n}}=this.view,r=i.field(Ws.state);if(r.tree==r.context.tree&&r.context.isDone(n+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!Gc?Math.max(25,e.timeRemaining()-5):1e9),l=r.context.treeLen<n&&i.doc.length>n+1e3,a=r.context.work(()=>Gc&&Gc()||Date.now()>o,n+(l?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(r.context.takeTree(),this.view.dispatch({effects:Ws.setState.of(new Cr(r.context))})),this.chunkBudget>0&&!(a&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(r.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>ks(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),dn=Te.define({combine(s){return s.length?s[0]:null},enables:s=>[Ws.state,z3,Ee.contentAttributes.compute([s],e=>{let t=e.facet(s);return t&&t.name?{"data-language":t.name}:{}})]}),U3=Te.define(),ff=Te.define({combine:s=>{if(!s.length)return"  ";let e=s[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(s[0]));return e}});function Nn(s){let e=s.facet(ff);return e.charCodeAt(0)==9?s.tabSize*e.length:e.length}function Fo(s,e){let t="",i=s.tabSize,n=s.facet(ff)[0];if(n=="	"){for(;e>=i;)t+="	",e-=i;n=" "}for(let r=0;r<e;r++)t+=n;return t}function hf(s,e){s instanceof st&&(s=new lc(s));for(let i of s.state.facet(U3)){let n=i(s,e);if(n!==void 0)return n}let t=ns(s.state);return t.length>=e?H3(s,t,e):null}class lc{constructor(e,t={}){this.state=e,this.options=t,this.unit=Nn(e)}lineAt(e,t=1){let i=this.state.doc.lineAt(e),{simulateBreak:n,simulateDoubleBreak:r}=this.options;return n!=null&&n>=i.from&&n<=i.to?r&&n==e?{text:"",from:e}:(t<0?n<e:n<=e)?{text:i.text.slice(n-i.from),from:n}:{text:i.text.slice(0,n-i.from),from:i.from}:i}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:n}=this.lineAt(e,t);return i.slice(e-n,Math.min(i.length,e+100-n))}column(e,t=1){let{text:i,from:n}=this.lineAt(e,t),r=this.countColumn(i,e-n),o=this.options.overrideIndentation?this.options.overrideIndentation(n):-1;return o>-1&&(r+=o-this.countColumn(i,i.search(/\S|$/))),r}countColumn(e,t=e.length){return Or(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:i,from:n}=this.lineAt(e,t),r=this.options.overrideIndentation;if(r){let o=r(n);if(o>-1)return o}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const ty=new et;function H3(s,e,t){let i=e.resolveStack(t),n=e.resolveInner(t,-1).resolve(t,0).enterUnfinishedNodesBefore(t);if(n!=i.node){let r=[];for(let o=n;o&&!(o.from<i.node.from||o.to>i.node.to||o.from==i.node.from&&o.type==i.node.type);o=o.parent)r.push(o);for(let o=r.length-1;o>=0;o--)i={node:r[o],next:i}}return sy(i,s,t)}function sy(s,e,t){for(let i=s;i;i=i.next){let n=K3(i.node);if(n)return n(pf.create(e,t,i))}return 0}function W3(s){return s.pos==s.options.simulateBreak&&s.options.simulateDoubleBreak}function K3(s){let e=s.type.prop(ty);if(e)return e;let t=s.firstChild,i;if(t&&(i=t.type.prop(et.closedBy))){let n=s.lastChild,r=n&&i.indexOf(n.name)>-1;return o=>Y3(o,!0,1,void 0,r&&!W3(o)?n.from:void 0)}return s.parent==null?q3:null}function q3(){return 0}class pf extends lc{constructor(e,t,i){super(e.state,e.options),this.base=e,this.pos=t,this.context=i}get node(){return this.context.node}static create(e,t,i){return new pf(e,t,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(t.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(G3(i,e))break;t=this.state.doc.lineAt(i.from)}return this.lineIndent(t.from)}continue(){return sy(this.context.next,this.base,this.pos)}}function G3(s,e){for(let t=e;t;t=t.parent)if(s==t)return!0;return!1}function J3(s){let e=s.node,t=e.childAfter(e.from),i=e.lastChild;if(!t)return null;let n=s.options.simulateBreak,r=s.state.doc.lineAt(t.from),o=n==null||n<=r.from?r.to:Math.min(r.to,n);for(let l=t.to;;){let a=e.childAfter(l);if(!a||a==i)return null;if(!a.type.isSkipped){if(a.from>=o)return null;let u=/^ */.exec(r.text.slice(t.to-r.from))[0].length;return{from:t.from,to:t.to+u}}l=a.to}}function Y3(s,e,t,i,n){let r=s.textAfter,o=r.match(/^\s*/)[0].length,l=i&&r.slice(o,o+i.length)==i||n==s.pos+o,a=J3(s);return a?l?s.column(a.from):s.column(a.to):s.baseIndent+(l?0:s.unit*t)}const Q3=200;function X3(){return st.transactionFilter.of(s=>{if(!s.docChanged||!s.isUserEvent("input.type")&&!s.isUserEvent("input.complete"))return s;let e=s.startState.languageDataAt("indentOnInput",s.startState.selection.main.head);if(!e.length)return s;let t=s.newDoc,{head:i}=s.newSelection.main,n=t.lineAt(i);if(i>n.from+Q3)return s;let r=t.sliceString(n.from,i);if(!e.some(u=>u.test(r)))return s;let{state:o}=s,l=-1,a=[];for(let{head:u}of o.selection.ranges){let c=o.doc.lineAt(u);if(c.from==l)continue;l=c.from;let d=hf(o,c.from);if(d==null)continue;let f=/^\s*/.exec(c.text)[0],p=Fo(o,d);f!=p&&a.push({from:c.from,to:c.from+f.length,insert:p})}return a.length?[s,{changes:a,sequential:!0}]:s})}const Z3=Te.define(),eA=new et;function tA(s,e,t){let i=ns(s);if(i.length<t)return null;let n=i.resolveStack(t,1),r=null;for(let o=n;o;o=o.next){let l=o.node;if(l.to<=t||l.from>t)continue;if(r&&l.from<e)break;let a=l.type.prop(eA);if(a&&(l.to<i.length-50||i.length==s.doc.length||!sA(l))){let u=a(l,s);u&&u.from<=t&&u.from>=e&&u.to>t&&(r=u)}}return r}function sA(s){let e=s.lastChild;return e&&e.to==s.to&&e.type.isError}function Aa(s,e,t){for(let i of s.facet(Z3)){let n=i(s,e,t);if(n)return n}return tA(s,e,t)}function iy(s,e){let t=e.mapPos(s.from,1),i=e.mapPos(s.to,-1);return t>=i?void 0:{from:t,to:i}}const ac=Xe.define({map:iy}),tl=Xe.define({map:iy});function ny(s){let e=[];for(let{head:t}of s.state.selection.ranges)e.some(i=>i.from<=t&&i.to>=t)||e.push(s.lineBlockAt(t));return e}const Fn=Yt.define({create(){return Fe.none},update(s,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((t,i)=>s=um(s,t,i)),s=s.map(e.changes);for(let t of e.effects)if(t.is(ac)&&!iA(s,t.value.from,t.value.to)){let{preparePlaceholder:i}=e.state.facet(ly),n=i?Fe.replace({widget:new uA(i(e.state,t.value))}):dm;s=s.update({add:[n.range(t.value.from,t.value.to)]})}else t.is(tl)&&(s=s.update({filter:(i,n)=>t.value.from!=i||t.value.to!=n,filterFrom:t.value.from,filterTo:t.value.to}));return e.selection&&(s=um(s,e.selection.main.head)),s},provide:s=>Ee.decorations.from(s),toJSON(s,e){let t=[];return s.between(0,e.doc.length,(i,n)=>{t.push(i,n)}),t},fromJSON(s){if(!Array.isArray(s)||s.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<s.length;){let i=s[t++],n=s[t++];if(typeof i!="number"||typeof n!="number")throw new RangeError("Invalid JSON for fold state");e.push(dm.range(i,n))}return Fe.set(e,!0)}});function um(s,e,t=e){let i=!1;return s.between(e,t,(n,r)=>{n<t&&r>e&&(i=!0)}),i?s.update({filterFrom:e,filterTo:t,filter:(n,r)=>n>=t||r<=e}):s}function Ma(s,e,t){var i;let n=null;return(i=s.field(Fn,!1))===null||i===void 0||i.between(e,t,(r,o)=>{(!n||n.from>r)&&(n={from:r,to:o})}),n}function iA(s,e,t){let i=!1;return s.between(e,e,(n,r)=>{n==e&&r==t&&(i=!0)}),i}function ry(s,e){return s.field(Fn,!1)?e:e.concat(Xe.appendConfig.of(ay()))}const nA=s=>{for(let e of ny(s)){let t=Aa(s.state,e.from,e.to);if(t)return s.dispatch({effects:ry(s.state,[ac.of(t),oy(s,t)])}),!0}return!1},rA=s=>{if(!s.state.field(Fn,!1))return!1;let e=[];for(let t of ny(s)){let i=Ma(s.state,t.from,t.to);i&&e.push(tl.of(i),oy(s,i,!1))}return e.length&&s.dispatch({effects:e}),e.length>0};function oy(s,e,t=!0){let i=s.state.doc.lineAt(e.from).number,n=s.state.doc.lineAt(e.to).number;return Ee.announce.of(`${s.state.phrase(t?"Folded lines":"Unfolded lines")} ${i} ${s.state.phrase("to")} ${n}.`)}const oA=s=>{let{state:e}=s,t=[];for(let i=0;i<e.doc.length;){let n=s.lineBlockAt(i),r=Aa(e,n.from,n.to);r&&t.push(ac.of(r)),i=(r?s.lineBlockAt(r.to):n).to+1}return t.length&&s.dispatch({effects:ry(s.state,t)}),!!t.length},lA=s=>{let e=s.state.field(Fn,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,s.state.doc.length,(i,n)=>{t.push(tl.of({from:i,to:n}))}),s.dispatch({effects:t}),!0},aA=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:nA},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:rA},{key:"Ctrl-Alt-[",run:oA},{key:"Ctrl-Alt-]",run:lA}],cA={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},ly=Te.define({combine(s){return ki(s,cA)}});function ay(s){return[Fn,hA]}function cy(s,e){let{state:t}=s,i=t.facet(ly),n=o=>{let l=s.lineBlockAt(s.posAtDOM(o.target)),a=Ma(s.state,l.from,l.to);a&&s.dispatch({effects:tl.of(a)}),o.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(s,n,e);let r=document.createElement("span");return r.textContent=i.placeholderText,r.setAttribute("aria-label",t.phrase("folded code")),r.title=t.phrase("unfold"),r.className="cm-foldPlaceholder",r.onclick=n,r}const dm=Fe.replace({widget:new class extends fn{toDOM(s){return cy(s,null)}}});class uA extends fn{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return cy(e,this.value)}}const dA={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class Jc extends Li{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function fA(s={}){let e={...dA,...s},t=new Jc(e,!0),i=new Jc(e,!1),n=Pt.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(dn)!=o.state.facet(dn)||o.startState.field(Fn,!1)!=o.state.field(Fn,!1)||ns(o.startState)!=ns(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let l=new $i;for(let a of o.viewportLineBlocks){let u=Ma(o.state,a.from,a.to)?i:Aa(o.state,a.from,a.to)?t:null;u&&l.add(a.from,a.from,u)}return l.finish()}}),{domEventHandlers:r}=e;return[n,d3({class:"cm-foldGutter",markers(o){var l;return((l=o.plugin(n))===null||l===void 0?void 0:l.markers)||it.empty},initialSpacer(){return new Jc(e,!1)},domEventHandlers:{...r,click:(o,l,a)=>{if(r.click&&r.click(o,l,a))return!0;let u=Ma(o.state,l.from,l.to);if(u)return o.dispatch({effects:tl.of(u)}),!0;let c=Aa(o.state,l.from,l.to);return c?(o.dispatch({effects:ac.of(c)}),!0):!1}}}),ay()]}const hA=Ee.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class sl{constructor(e,t){this.specs=e;let i;function n(l){let a=ln.newName();return(i||(i=Object.create(null)))["."+a]=l,a}const r=typeof t.all=="string"?t.all:t.all?n(t.all):void 0,o=t.scope;this.scope=o instanceof Ws?l=>l.prop(tr)==o.data:o?l=>l==o:void 0,this.style=Zv(e.map(l=>({tag:l.tag,class:l.class||n(Object.assign({},l,{tag:null}))})),{all:r}).style,this.module=i?new ln(i):null,this.themeType=t.themeType}static define(e,t){return new sl(e,t||{})}}const dd=Te.define(),uy=Te.define({combine(s){return s.length?[s[0]]:null}});function Yc(s){let e=s.facet(dd);return e.length?e:s.facet(uy)}function dy(s,e){let t=[mA],i;return s instanceof sl&&(s.module&&t.push(Ee.styleModule.of(s.module)),i=s.themeType),e?.fallback?t.push(uy.of(s)):i?t.push(dd.computeN([Ee.darkTheme],n=>n.facet(Ee.darkTheme)==(i=="dark")?[s]:[])):t.push(dd.of(s)),t}class pA{constructor(e){this.markCache=Object.create(null),this.tree=ns(e.state),this.decorations=this.buildDeco(e,Yc(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=ns(e.state),i=Yc(e.state),n=i!=Yc(e.startState),{viewport:r}=e.view,o=e.changes.mapPos(this.decoratedTo,1);t.length<r.to&&!n&&t.type==this.tree.type&&o>=r.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(t!=this.tree||e.viewportChanged||n)&&(this.tree=t,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=r.to)}buildDeco(e,t){if(!t||!this.tree.length)return Fe.none;let i=new $i;for(let{from:n,to:r}of e.visibleRanges)L3(this.tree,t,(o,l,a)=>{i.add(o,l,this.markCache[a]||(this.markCache[a]=Fe.mark({class:a})))},n,r);return i.finish()}}const mA=Un.high(Pt.fromClass(pA,{decorations:s=>s.decorations})),gA=sl.define([{tag:Me.meta,color:"#404740"},{tag:Me.link,textDecoration:"underline"},{tag:Me.heading,textDecoration:"underline",fontWeight:"bold"},{tag:Me.emphasis,fontStyle:"italic"},{tag:Me.strong,fontWeight:"bold"},{tag:Me.strikethrough,textDecoration:"line-through"},{tag:Me.keyword,color:"#708"},{tag:[Me.atom,Me.bool,Me.url,Me.contentSeparator,Me.labelName],color:"#219"},{tag:[Me.literal,Me.inserted],color:"#164"},{tag:[Me.string,Me.deleted],color:"#a11"},{tag:[Me.regexp,Me.escape,Me.special(Me.string)],color:"#e40"},{tag:Me.definition(Me.variableName),color:"#00f"},{tag:Me.local(Me.variableName),color:"#30a"},{tag:[Me.typeName,Me.namespace],color:"#085"},{tag:Me.className,color:"#167"},{tag:[Me.special(Me.variableName),Me.macroName],color:"#256"},{tag:Me.definition(Me.propertyName),color:"#00c"},{tag:Me.comment,color:"#940"},{tag:Me.invalid,color:"#f00"}]),vA=Ee.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),fy=1e4,hy="()[]{}",py=Te.define({combine(s){return ki(s,{afterCursor:!0,brackets:hy,maxScanDistance:fy,renderMatch:kA})}}),yA=Fe.mark({class:"cm-matchingBracket"}),bA=Fe.mark({class:"cm-nonmatchingBracket"});function kA(s){let e=[],t=s.matched?yA:bA;return e.push(t.range(s.start.from,s.start.to)),s.end&&e.push(t.range(s.end.from,s.end.to)),e}const xA=Yt.define({create(){return Fe.none},update(s,e){if(!e.docChanged&&!e.selection)return s;let t=[],i=e.state.facet(py);for(let n of e.state.selection.ranges){if(!n.empty)continue;let r=mi(e.state,n.head,-1,i)||n.head>0&&mi(e.state,n.head-1,1,i)||i.afterCursor&&(mi(e.state,n.head,1,i)||n.head<e.state.doc.length&&mi(e.state,n.head+1,-1,i));r&&(t=t.concat(i.renderMatch(r,e.state)))}return Fe.set(t,!0)},provide:s=>Ee.decorations.from(s)}),wA=[xA,vA];function SA(s={}){return[py.of(s),wA]}const CA=new et;function fd(s,e,t){let i=s.prop(e<0?et.openedBy:et.closedBy);if(i)return i;if(s.name.length==1){let n=t.indexOf(s.name);if(n>-1&&n%2==(e<0?1:0))return[t[n+e]]}return null}function hd(s){let e=s.type.prop(CA);return e?e(s.node):s}function mi(s,e,t,i={}){let n=i.maxScanDistance||fy,r=i.brackets||hy,o=ns(s),l=o.resolveInner(e,t);for(let a=l;a;a=a.parent){let u=fd(a.type,t,r);if(u&&a.from<a.to){let c=hd(a);if(c&&(t>0?e>=c.from&&e<c.to:e>c.from&&e<=c.to))return _A(s,e,t,a,c,u,r)}}return AA(s,e,t,o,l.type,n,r)}function _A(s,e,t,i,n,r,o){let l=i.parent,a={from:n.from,to:n.to},u=0,c=l?.cursor();if(c&&(t<0?c.childBefore(i.from):c.childAfter(i.to)))do if(t<0?c.to<=i.from:c.from>=i.to){if(u==0&&r.indexOf(c.type.name)>-1&&c.from<c.to){let d=hd(c);return{start:a,end:d?{from:d.from,to:d.to}:void 0,matched:!0}}else if(fd(c.type,t,o))u++;else if(fd(c.type,-t,o)){if(u==0){let d=hd(c);return{start:a,end:d&&d.from<d.to?{from:d.from,to:d.to}:void 0,matched:!1}}u--}}while(t<0?c.prevSibling():c.nextSibling());return{start:a,matched:!1}}function AA(s,e,t,i,n,r,o){let l=t<0?s.sliceDoc(e-1,e):s.sliceDoc(e,e+1),a=o.indexOf(l);if(a<0||a%2==0!=t>0)return null;let u={from:t<0?e-1:e,to:t>0?e+1:e},c=s.doc.iterRange(e,t>0?s.doc.length:0),d=0;for(let f=0;!c.next().done&&f<=r;){let p=c.value;t<0&&(f+=p.length);let v=e+f*t;for(let k=t>0?0:p.length-1,m=t>0?p.length:-1;k!=m;k+=t){let w=o.indexOf(p[k]);if(!(w<0||i.resolveInner(v+k,1).type!=n))if(w%2==0==t>0)d++;else{if(d==1)return{start:u,end:{from:v+k,to:v+k+1},matched:w>>1==a>>1};d--}}t>0&&(f+=p.length)}return c.done?{start:u,matched:!1}:null}function fm(s,e,t,i=0,n=0){e==null&&(e=s.search(/[^\s\u00a0]/),e==-1&&(e=s.length));let r=n;for(let o=i;o<e;o++)s.charCodeAt(o)==9?r+=t-r%t:r++;return r}class my{constructor(e,t,i,n){this.string=e,this.tabSize=t,this.indentUnit=i,this.overrideIndent=n,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let t=this.string.charAt(this.pos),i;if(typeof e=="string"?i=t==e:i=t&&(e instanceof RegExp?e.test(t):e(t)),i)return++this.pos,t}eatWhile(e){let t=this.pos;for(;this.eat(e););return this.pos>t}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=fm(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:fm(this.string,null,this.tabSize)}match(e,t,i){if(typeof e=="string"){let n=o=>i?o.toLowerCase():o,r=this.string.substr(this.pos,e.length);return n(r)==n(e)?(t!==!1&&(this.pos+=e.length),!0):null}else{let n=this.string.slice(this.pos).match(e);return n&&n.index>0?null:(n&&t!==!1&&(this.pos+=n[0].length),n)}}current(){return this.string.slice(this.start,this.pos)}}function MA(s){return{name:s.name||"",token:s.token,blankLine:s.blankLine||(()=>{}),startState:s.startState||(()=>!0),copyState:s.copyState||DA,indent:s.indent||(()=>null),languageData:s.languageData||{},tokenTable:s.tokenTable||vf,mergeTokens:s.mergeTokens!==!1}}function DA(s){if(typeof s!="object")return s;let e={};for(let t in s){let i=s[t];e[t]=i instanceof Array?i.slice():i}return e}const hm=new WeakMap;class mf extends Ws{constructor(e){let t=I3(e.languageData),i=MA(e),n,r=new class extends Qv{createParse(o,l,a){return new TA(n,o,l,a)}};super(t,r,[],e.name),this.topNode=jA(t,this),n=this,this.streamParser=i,this.stateAfter=new et({perNode:!0}),this.tokenTable=e.tokenTable?new by(i.tokenTable):PA}static define(e){return new mf(e)}getIndent(e){let t,{overrideIndentation:i}=e.options;i&&(t=hm.get(e.state),t!=null&&t<e.pos-1e4&&(t=void 0));let n=gf(this,e.node.tree,e.node.from,e.node.from,t??e.pos),r,o;if(n?(o=n.state,r=n.pos+1):(o=this.streamParser.startState(e.unit),r=e.node.from),e.pos-r>1e4)return null;for(;r<e.pos;){let a=e.state.doc.lineAt(r),u=Math.min(e.pos,a.to);if(a.length){let c=i?i(a.from):-1,d=new my(a.text,e.state.tabSize,e.unit,c<0?void 0:c);for(;d.pos<u-a.from;)vy(this.streamParser.token,d,o)}else this.streamParser.blankLine(o,e.unit);if(u==e.pos)break;r=a.to+1}let l=e.lineAt(e.pos);return i&&t==null&&hm.set(e.state,l.from),this.streamParser.indent(o,/^\s*(.*)/.exec(l.text)[1],e)}get allowsNesting(){return!1}}function gf(s,e,t,i,n){let r=t>=i&&t+e.length<=n&&e.prop(s.stateAfter);if(r)return{state:s.streamParser.copyState(r),pos:t+e.length};for(let o=e.children.length-1;o>=0;o--){let l=e.children[o],a=t+e.positions[o],u=l instanceof _t&&a<n&&gf(s,l,a,i,n);if(u)return u}return null}function gy(s,e,t,i,n){if(n&&t<=0&&i>=e.length)return e;!n&&t==0&&e.type==s.topNode&&(n=!0);for(let r=e.children.length-1;r>=0;r--){let o=e.positions[r],l=e.children[r],a;if(o<i&&l instanceof _t){if(!(a=gy(s,l,t-o,i-o,n)))break;return n?new _t(e.type,e.children.slice(0,r).concat(a),e.positions.slice(0,r+1),o+a.length):a}}return null}function EA(s,e,t,i,n){for(let r of e){let o=r.from+(r.openStart?25:0),l=r.to-(r.openEnd?25:0),a=o<=t&&l>t&&gf(s,r.tree,0-r.offset,t,l),u;if(a&&a.pos<=i&&(u=gy(s,r.tree,t+r.offset,a.pos+r.offset,!1)))return{state:a.state,tree:u}}return{state:s.streamParser.startState(n?Nn(n):4),tree:_t.empty}}class TA{constructor(e,t,i,n){this.lang=e,this.input=t,this.fragments=i,this.ranges=n,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=n[n.length-1].to;let r=Sr.get(),o=n[0].from,{state:l,tree:a}=EA(e,i,o,this.to,r?.state);this.state=l,this.parsedPos=this.chunkStart=o+a.length;for(let u=0;u<a.children.length;u++)this.chunks.push(a.children[u]),this.chunkPos.push(a.positions[u]);r&&this.parsedPos<r.viewport.from-1e5&&n.some(u=>u.from<=r.viewport.from&&u.to>=r.viewport.from)&&(this.state=this.lang.streamParser.startState(Nn(r.state)),r.skipUntilInView(this.parsedPos,r.viewport.from),this.parsedPos=r.viewport.from),this.moveRangeIndex()}advance(){let e=Sr.get(),t=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),i=Math.min(t,this.chunkStart+512);for(e&&(i=Math.min(i,e.viewport.to));this.parsedPos<i;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=t?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,t),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let t=this.input.chunk(e);if(this.input.lineChunks)t==`
`&&(t="");else{let i=t.indexOf(`
`);i>-1&&(t=t.slice(0,i))}return e+t.length<=this.to?t:t.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,t=this.lineAfter(e),i=e+t.length;for(let n=this.rangeIndex;;){let r=this.ranges[n].to;if(r>=i||(t=t.slice(0,r-(i-t.length)),n++,n==this.ranges.length))break;let o=this.ranges[n].from,l=this.lineAfter(o);t+=l,i=o+l.length}return{line:t,end:i}}skipGapsTo(e,t,i){for(;;){let n=this.ranges[this.rangeIndex].to,r=e+t;if(i>0?n>r:n>=r)break;let o=this.ranges[++this.rangeIndex].from;t+=o-n}return t}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,t,i,n){let r=4;if(this.ranges.length>1){n=this.skipGapsTo(t,n,1),t+=n;let l=this.chunk.length;n=this.skipGapsTo(i,n,-1),i+=n,r+=this.chunk.length-l}let o=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&r==4&&o>=0&&this.chunk[o]==e&&this.chunk[o+2]==t?this.chunk[o+2]=i:this.chunk.push(e,t,i,r),n}parseLine(e){let{line:t,end:i}=this.nextLine(),n=0,{streamParser:r}=this.lang,o=new my(t,e?e.state.tabSize:4,e?Nn(e.state):2);if(o.eol())r.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let l=vy(r.token,o,this.state);if(l&&(n=this.emitToken(this.lang.tokenTable.resolve(l),this.parsedPos+o.start,this.parsedPos+o.pos,n)),o.start>1e4)break}this.parsedPos=i,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=_t.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:OA,topID:0,maxBufferLength:512,reused:this.chunkReused});e=new _t(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new _t(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function vy(s,e,t){e.start=e.pos;for(let i=0;i<10;i++){let n=s(e,t);if(e.pos>e.start)return n}throw new Error("Stream parser failed to advance stream.")}const vf=Object.create(null),zo=[Ss.none],OA=new af(zo),pm=[],mm=Object.create(null),yy=Object.create(null);for(let[s,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])yy[s]=ky(vf,e);class by{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),yy)}resolve(e){return e?this.table[e]||(this.table[e]=ky(this.extra,e)):0}}const PA=new by(vf);function Qc(s,e){pm.indexOf(s)>-1||(pm.push(s),console.warn(e))}function ky(s,e){let t=[];for(let l of e.split(" ")){let a=[];for(let u of l.split(".")){let c=s[u]||Me[u];c?typeof c=="function"?a.length?a=a.map(c):Qc(u,`Modifier ${u} used at start of tag`):a.length?Qc(u,`Tag ${u} used as modifier`):a=Array.isArray(c)?c:[c]:Qc(u,`Unknown highlighting tag ${u}`)}for(let u of a)t.push(u)}if(!t.length)return 0;let i=e.replace(/ /g,"_"),n=i+" "+t.map(l=>l.id),r=mm[n];if(r)return r.id;let o=mm[n]=Ss.define({id:zo.length,name:i,props:[$3({[i]:t})]});return zo.push(o),o.id}function jA(s,e){let t=Ss.define({id:zo.length,name:"Document",props:[tr.add(()=>s),ty.add(()=>i=>e.getIndent(i))],top:!0});return zo.push(t),t}St.RTL,St.LTR;const $A=s=>{let{state:e}=s,t=e.doc.lineAt(e.selection.main.from),i=bf(s.state,t.from);return i.line?RA(s):i.block?VA(s):!1};function yf(s,e){return({state:t,dispatch:i})=>{if(t.readOnly)return!1;let n=s(e,t);return n?(i(t.update(n)),!0):!1}}const RA=yf(NA,0),LA=yf(xy,0),VA=yf((s,e)=>xy(s,e,IA(e)),0);function bf(s,e){let t=s.languageDataAt("commentTokens",e,1);return t.length?t[0]:{}}const Yr=50;function BA(s,{open:e,close:t},i,n){let r=s.sliceDoc(i-Yr,i),o=s.sliceDoc(n,n+Yr),l=/\s*$/.exec(r)[0].length,a=/^\s*/.exec(o)[0].length,u=r.length-l;if(r.slice(u-e.length,u)==e&&o.slice(a,a+t.length)==t)return{open:{pos:i-l,margin:l&&1},close:{pos:n+a,margin:a&&1}};let c,d;n-i<=2*Yr?c=d=s.sliceDoc(i,n):(c=s.sliceDoc(i,i+Yr),d=s.sliceDoc(n-Yr,n));let f=/^\s*/.exec(c)[0].length,p=/\s*$/.exec(d)[0].length,v=d.length-p-t.length;return c.slice(f,f+e.length)==e&&d.slice(v,v+t.length)==t?{open:{pos:i+f+e.length,margin:/\s/.test(c.charAt(f+e.length))?1:0},close:{pos:n-p-t.length,margin:/\s/.test(d.charAt(v-1))?1:0}}:null}function IA(s){let e=[];for(let t of s.selection.ranges){let i=s.doc.lineAt(t.from),n=t.to<=i.to?i:s.doc.lineAt(t.to);n.from>i.from&&n.from==t.to&&(n=t.to==i.to+1?i:s.doc.lineAt(t.to-1));let r=e.length-1;r>=0&&e[r].to>i.from?e[r].to=n.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:n.to})}return e}function xy(s,e,t=e.selection.ranges){let i=t.map(r=>bf(e,r.from).block);if(!i.every(r=>r))return null;let n=t.map((r,o)=>BA(e,i[o],r.from,r.to));if(s!=2&&!n.every(r=>r))return{changes:e.changes(t.map((r,o)=>n[o]?[]:[{from:r.from,insert:i[o].open+" "},{from:r.to,insert:" "+i[o].close}]))};if(s!=1&&n.some(r=>r)){let r=[];for(let o=0,l;o<n.length;o++)if(l=n[o]){let a=i[o],{open:u,close:c}=l;r.push({from:u.pos-a.open.length,to:u.pos+u.margin},{from:c.pos-c.margin,to:c.pos+a.close.length})}return{changes:r}}return null}function NA(s,e,t=e.selection.ranges){let i=[],n=-1;for(let{from:r,to:o}of t){let l=i.length,a=1e9,u=bf(e,r).line;if(u){for(let c=r;c<=o;){let d=e.doc.lineAt(c);if(d.from>n&&(r==o||o>d.from)){n=d.from;let f=/^\s*/.exec(d.text)[0].length,p=f==d.length,v=d.text.slice(f,f+u.length)==u?f:-1;f<d.text.length&&f<a&&(a=f),i.push({line:d,comment:v,token:u,indent:f,empty:p,single:!1})}c=d.to+1}if(a<1e9)for(let c=l;c<i.length;c++)i[c].indent<i[c].line.text.length&&(i[c].indent=a);i.length==l+1&&(i[l].single=!0)}}if(s!=2&&i.some(r=>r.comment<0&&(!r.empty||r.single))){let r=[];for(let{line:l,token:a,indent:u,empty:c,single:d}of i)(d||!c)&&r.push({from:l.from+u,insert:a+" "});let o=e.changes(r);return{changes:o,selection:e.selection.map(o,1)}}else if(s!=1&&i.some(r=>r.comment>=0)){let r=[];for(let{line:o,comment:l,token:a}of i)if(l>=0){let u=o.from+l,c=u+a.length;o.text[c-o.from]==" "&&c++,r.push({from:u,to:c})}return{changes:r}}return null}const pd=Bi.define(),FA=Bi.define(),zA=Te.define(),wy=Te.define({combine(s){return ki(s,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(i,n)=>e(i,n)||t(i,n)})}}),Sy=Yt.define({create(){return gi.empty},update(s,e){let t=e.state.facet(wy),i=e.annotation(pd);if(i){let a=xs.fromTransaction(e,i.selection),u=i.side,c=u==0?s.undone:s.done;return a?c=Da(c,c.length,t.minDepth,a):c=Ay(c,e.startState.selection),new gi(u==0?i.rest:c,u==0?c:i.rest)}let n=e.annotation(FA);if((n=="full"||n=="before")&&(s=s.isolate()),e.annotation(Vt.addToHistory)===!1)return e.changes.empty?s:s.addMapping(e.changes.desc);let r=xs.fromTransaction(e),o=e.annotation(Vt.time),l=e.annotation(Vt.userEvent);return r?s=s.addChanges(r,o,l,t,e):e.selection&&(s=s.addSelection(e.startState.selection,o,l,t.newGroupDelay)),(n=="full"||n=="after")&&(s=s.isolate()),s},toJSON(s){return{done:s.done.map(e=>e.toJSON()),undone:s.undone.map(e=>e.toJSON())}},fromJSON(s){return new gi(s.done.map(xs.fromJSON),s.undone.map(xs.fromJSON))}});function UA(s={}){return[Sy,wy.of(s),Ee.domEventHandlers({beforeinput(e,t){let i=e.inputType=="historyUndo"?Cy:e.inputType=="historyRedo"?md:null;return i?(e.preventDefault(),i(t)):!1}})]}function cc(s,e){return function({state:t,dispatch:i}){if(!e&&t.readOnly)return!1;let n=t.field(Sy,!1);if(!n)return!1;let r=n.pop(s,t,e);return r?(i(r),!0):!1}}const Cy=cc(0,!1),md=cc(1,!1),HA=cc(0,!0),WA=cc(1,!0);class xs{constructor(e,t,i,n,r){this.changes=e,this.effects=t,this.mapped=i,this.startSelection=n,this.selectionsAfter=r}setSelAfter(e){return new xs(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(n=>n.toJSON())}}static fromJSON(e){return new xs(e.changes&&Lt.fromJSON(e.changes),[],e.mapped&&yi.fromJSON(e.mapped),e.startSelection&&ue.fromJSON(e.startSelection),e.selectionsAfter.map(ue.fromJSON))}static fromTransaction(e,t){let i=Rs;for(let n of e.startState.facet(zA)){let r=n(e);r.length&&(i=i.concat(r))}return!i.length&&e.changes.empty?null:new xs(e.changes.invert(e.startState.doc),i,void 0,t||e.startState.selection,Rs)}static selection(e){return new xs(void 0,Rs,void 0,void 0,e)}}function Da(s,e,t,i){let n=e+1>t+20?e-t-1:0,r=s.slice(n,e);return r.push(i),r}function KA(s,e){let t=[],i=!1;return s.iterChangedRanges((n,r)=>t.push(n,r)),e.iterChangedRanges((n,r,o,l)=>{for(let a=0;a<t.length;){let u=t[a++],c=t[a++];l>=u&&o<=c&&(i=!0)}}),i}function qA(s,e){return s.ranges.length==e.ranges.length&&s.ranges.filter((t,i)=>t.empty!=e.ranges[i].empty).length===0}function _y(s,e){return s.length?e.length?s.concat(e):s:e}const Rs=[],GA=200;function Ay(s,e){if(s.length){let t=s[s.length-1],i=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-GA));return i.length&&i[i.length-1].eq(e)?s:(i.push(e),Da(s,s.length-1,1e9,t.setSelAfter(i)))}else return[xs.selection([e])]}function JA(s){let e=s[s.length-1],t=s.slice();return t[s.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function Xc(s,e){if(!s.length)return s;let t=s.length,i=Rs;for(;t;){let n=YA(s[t-1],e,i);if(n.changes&&!n.changes.empty||n.effects.length){let r=s.slice(0,t);return r[t-1]=n,r}else e=n.mapped,t--,i=n.selectionsAfter}return i.length?[xs.selection(i)]:Rs}function YA(s,e,t){let i=_y(s.selectionsAfter.length?s.selectionsAfter.map(l=>l.map(e)):Rs,t);if(!s.changes)return xs.selection(i);let n=s.changes.map(e),r=e.mapDesc(s.changes,!0),o=s.mapped?s.mapped.composeDesc(r):r;return new xs(n,Xe.mapEffects(s.effects,e),o,s.startSelection.map(r),i)}const QA=/^(input\.type|delete)($|\.)/;class gi{constructor(e,t,i=0,n=void 0){this.done=e,this.undone=t,this.prevTime=i,this.prevUserEvent=n}isolate(){return this.prevTime?new gi(this.done,this.undone):this}addChanges(e,t,i,n,r){let o=this.done,l=o[o.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!i||QA.test(i))&&(!l.selectionsAfter.length&&t-this.prevTime<n.newGroupDelay&&n.joinToEvent(r,KA(l.changes,e.changes))||i=="input.type.compose")?o=Da(o,o.length-1,n.minDepth,new xs(e.changes.compose(l.changes),_y(Xe.mapEffects(e.effects,l.changes),l.effects),l.mapped,l.startSelection,Rs)):o=Da(o,o.length,n.minDepth,e),new gi(o,Rs,t,i)}addSelection(e,t,i,n){let r=this.done.length?this.done[this.done.length-1].selectionsAfter:Rs;return r.length>0&&t-this.prevTime<n&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&qA(r[r.length-1],e)?this:new gi(Ay(this.done,e),this.undone,t,i)}addMapping(e){return new gi(Xc(this.done,e),Xc(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,i){let n=e==0?this.done:this.undone;if(n.length==0)return null;let r=n[n.length-1],o=r.selectionsAfter[0]||t.selection;if(i&&r.selectionsAfter.length)return t.update({selection:r.selectionsAfter[r.selectionsAfter.length-1],annotations:pd.of({side:e,rest:JA(n),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(r.changes){let l=n.length==1?Rs:n.slice(0,n.length-1);return r.mapped&&(l=Xc(l,r.mapped)),t.update({changes:r.changes,selection:r.startSelection,effects:r.effects,annotations:pd.of({side:e,rest:l,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}gi.empty=new gi(Rs,Rs);const XA=[{key:"Mod-z",run:Cy,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:md,preventDefault:!0},{linux:"Ctrl-Shift-z",run:md,preventDefault:!0},{key:"Mod-u",run:HA,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:WA,preventDefault:!0}];function Pr(s,e){return ue.create(s.ranges.map(e),s.mainIndex)}function ei(s,e){return s.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function ti({state:s,dispatch:e},t){let i=Pr(s.selection,t);return i.eq(s.selection,!0)?!1:(e(ei(s,i)),!0)}function uc(s,e){return ue.cursor(e?s.to:s.from)}function My(s,e){return ti(s,t=>t.empty?s.moveByChar(t,e):uc(t,e))}function rs(s){return s.textDirectionAt(s.state.selection.main.head)==St.LTR}const Dy=s=>My(s,!rs(s)),Ey=s=>My(s,rs(s));function Ty(s,e){return ti(s,t=>t.empty?s.moveByGroup(t,e):uc(t,e))}const ZA=s=>Ty(s,!rs(s)),eM=s=>Ty(s,rs(s));function tM(s,e,t){if(e.type.prop(t))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(s.sliceDoc(e.from,e.to)))||e.firstChild}function dc(s,e,t){let i=ns(s).resolveInner(e.head),n=t?et.closedBy:et.openedBy;for(let a=e.head;;){let u=t?i.childAfter(a):i.childBefore(a);if(!u)break;tM(s,u,n)?i=u:a=t?u.to:u.from}let r=i.type.prop(n),o,l;return r&&(o=t?mi(s,i.from,1):mi(s,i.to,-1))&&o.matched?l=t?o.end.to:o.end.from:l=t?i.to:i.from,ue.cursor(l,t?-1:1)}const sM=s=>ti(s,e=>dc(s.state,e,!rs(s))),iM=s=>ti(s,e=>dc(s.state,e,rs(s)));function Oy(s,e){return ti(s,t=>{if(!t.empty)return uc(t,e);let i=s.moveVertically(t,e);return i.head!=t.head?i:s.moveToLineBoundary(t,e)})}const Py=s=>Oy(s,!1),jy=s=>Oy(s,!0);function $y(s){let e=s.scrollDOM.clientHeight<s.scrollDOM.scrollHeight-2,t=0,i=0,n;if(e){for(let r of s.state.facet(Ee.scrollMargins)){let o=r(s);o?.top&&(t=Math.max(o?.top,t)),o?.bottom&&(i=Math.max(o?.bottom,i))}n=s.scrollDOM.clientHeight-t-i}else n=(s.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:i,selfScroll:e,height:Math.max(s.defaultLineHeight,n-5)}}function Ry(s,e){let t=$y(s),{state:i}=s,n=Pr(i.selection,o=>o.empty?s.moveVertically(o,e,t.height):uc(o,e));if(n.eq(i.selection))return!1;let r;if(t.selfScroll){let o=s.coordsAtPos(i.selection.main.head),l=s.scrollDOM.getBoundingClientRect(),a=l.top+t.marginTop,u=l.bottom-t.marginBottom;o&&o.top>a&&o.bottom<u&&(r=Ee.scrollIntoView(n.main.head,{y:"start",yMargin:o.top-a}))}return s.dispatch(ei(i,n),{effects:r}),!0}const gm=s=>Ry(s,!1),gd=s=>Ry(s,!0);function hn(s,e,t){let i=s.lineBlockAt(e.head),n=s.moveToLineBoundary(e,t);if(n.head==e.head&&n.head!=(t?i.to:i.from)&&(n=s.moveToLineBoundary(e,t,!1)),!t&&n.head==i.from&&i.length){let r=/^\s*/.exec(s.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;r&&e.head!=i.from+r&&(n=ue.cursor(i.from+r))}return n}const nM=s=>ti(s,e=>hn(s,e,!0)),rM=s=>ti(s,e=>hn(s,e,!1)),oM=s=>ti(s,e=>hn(s,e,!rs(s))),lM=s=>ti(s,e=>hn(s,e,rs(s))),aM=s=>ti(s,e=>ue.cursor(s.lineBlockAt(e.head).from,1)),cM=s=>ti(s,e=>ue.cursor(s.lineBlockAt(e.head).to,-1));function uM(s,e,t){let i=!1,n=Pr(s.selection,r=>{let o=mi(s,r.head,-1)||mi(s,r.head,1)||r.head>0&&mi(s,r.head-1,1)||r.head<s.doc.length&&mi(s,r.head+1,-1);if(!o||!o.end)return r;i=!0;let l=o.start.from==r.head?o.end.to:o.end.from;return ue.cursor(l)});return i?(e(ei(s,n)),!0):!1}const dM=({state:s,dispatch:e})=>uM(s,e);function Hs(s,e){let t=Pr(s.state.selection,i=>{let n=e(i);return ue.range(i.anchor,n.head,n.goalColumn,n.bidiLevel||void 0)});return t.eq(s.state.selection)?!1:(s.dispatch(ei(s.state,t)),!0)}function Ly(s,e){return Hs(s,t=>s.moveByChar(t,e))}const Vy=s=>Ly(s,!rs(s)),By=s=>Ly(s,rs(s));function Iy(s,e){return Hs(s,t=>s.moveByGroup(t,e))}const fM=s=>Iy(s,!rs(s)),hM=s=>Iy(s,rs(s)),pM=s=>Hs(s,e=>dc(s.state,e,!rs(s))),mM=s=>Hs(s,e=>dc(s.state,e,rs(s)));function Ny(s,e){return Hs(s,t=>s.moveVertically(t,e))}const Fy=s=>Ny(s,!1),zy=s=>Ny(s,!0);function Uy(s,e){return Hs(s,t=>s.moveVertically(t,e,$y(s).height))}const vm=s=>Uy(s,!1),ym=s=>Uy(s,!0),gM=s=>Hs(s,e=>hn(s,e,!0)),vM=s=>Hs(s,e=>hn(s,e,!1)),yM=s=>Hs(s,e=>hn(s,e,!rs(s))),bM=s=>Hs(s,e=>hn(s,e,rs(s))),kM=s=>Hs(s,e=>ue.cursor(s.lineBlockAt(e.head).from)),xM=s=>Hs(s,e=>ue.cursor(s.lineBlockAt(e.head).to)),bm=({state:s,dispatch:e})=>(e(ei(s,{anchor:0})),!0),km=({state:s,dispatch:e})=>(e(ei(s,{anchor:s.doc.length})),!0),xm=({state:s,dispatch:e})=>(e(ei(s,{anchor:s.selection.main.anchor,head:0})),!0),wm=({state:s,dispatch:e})=>(e(ei(s,{anchor:s.selection.main.anchor,head:s.doc.length})),!0),wM=({state:s,dispatch:e})=>(e(s.update({selection:{anchor:0,head:s.doc.length},userEvent:"select"})),!0),SM=({state:s,dispatch:e})=>{let t=fc(s).map(({from:i,to:n})=>ue.range(i,Math.min(n+1,s.doc.length)));return e(s.update({selection:ue.create(t),userEvent:"select"})),!0},CM=({state:s,dispatch:e})=>{let t=Pr(s.selection,i=>{let n=ns(s),r=n.resolveStack(i.from,1);if(i.empty){let o=n.resolveStack(i.from,-1);o.node.from>=r.node.from&&o.node.to<=r.node.to&&(r=o)}for(let o=r;o;o=o.next){let{node:l}=o;if((l.from<i.from&&l.to>=i.to||l.to>i.to&&l.from<=i.from)&&o.next)return ue.range(l.to,l.from)}return i});return t.eq(s.selection)?!1:(e(ei(s,t)),!0)};function Hy(s,e){let{state:t}=s,i=t.selection,n=t.selection.ranges.slice();for(let r of t.selection.ranges){let o=t.doc.lineAt(r.head);if(e?o.to<s.state.doc.length:o.from>0)for(let l=r;;){let a=s.moveVertically(l,e);if(a.head<o.from||a.head>o.to){n.some(u=>u.head==a.head)||n.push(a);break}else{if(a.head==l.head)break;l=a}}}return n.length==i.ranges.length?!1:(s.dispatch(ei(t,ue.create(n,n.length-1))),!0)}const _M=s=>Hy(s,!1),AM=s=>Hy(s,!0),MM=({state:s,dispatch:e})=>{let t=s.selection,i=null;return t.ranges.length>1?i=ue.create([t.main]):t.main.empty||(i=ue.create([ue.cursor(t.main.head)])),i?(e(ei(s,i)),!0):!1};function il(s,e){if(s.state.readOnly)return!1;let t="delete.selection",{state:i}=s,n=i.changeByRange(r=>{let{from:o,to:l}=r;if(o==l){let a=e(r);a<o?(t="delete.backward",a=Il(s,a,!1)):a>o&&(t="delete.forward",a=Il(s,a,!0)),o=Math.min(o,a),l=Math.max(l,a)}else o=Il(s,o,!1),l=Il(s,l,!0);return o==l?{range:r}:{changes:{from:o,to:l},range:ue.cursor(o,o<r.head?-1:1)}});return n.changes.empty?!1:(s.dispatch(i.update(n,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?Ee.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function Il(s,e,t){if(s instanceof Ee)for(let i of s.state.facet(Ee.atomicRanges).map(n=>n(s)))i.between(e,e,(n,r)=>{n<e&&r>e&&(e=t?r:n)});return e}const Wy=(s,e,t)=>il(s,i=>{let n=i.from,{state:r}=s,o=r.doc.lineAt(n),l,a;if(t&&!e&&n>o.from&&n<o.from+200&&!/[^ \t]/.test(l=o.text.slice(0,n-o.from))){if(l[l.length-1]=="	")return n-1;let u=Or(l,r.tabSize),c=u%Nn(r)||Nn(r);for(let d=0;d<c&&l[l.length-1-d]==" ";d++)n--;a=n}else a=Jt(o.text,n-o.from,e,e)+o.from,a==n&&o.number!=(e?r.doc.lines:1)?a+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(a-o.from,n-o.from))&&(a=Jt(o.text,a-o.from,!1,!1)+o.from);return a}),vd=s=>Wy(s,!1,!0),Ky=s=>Wy(s,!0,!1),qy=(s,e)=>il(s,t=>{let i=t.head,{state:n}=s,r=n.doc.lineAt(i),o=n.charCategorizer(i);for(let l=null;;){if(i==(e?r.to:r.from)){i==t.head&&r.number!=(e?n.doc.lines:1)&&(i+=e?1:-1);break}let a=Jt(r.text,i-r.from,e)+r.from,u=r.text.slice(Math.min(i,a)-r.from,Math.max(i,a)-r.from),c=o(u);if(l!=null&&c!=l)break;(u!=" "||i!=t.head)&&(l=c),i=a}return i}),Gy=s=>qy(s,!1),DM=s=>qy(s,!0),EM=s=>il(s,e=>{let t=s.lineBlockAt(e.head).to;return e.head<t?t:Math.min(s.state.doc.length,e.head+1)}),TM=s=>il(s,e=>{let t=s.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),OM=s=>il(s,e=>{let t=s.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(s.state.doc.length,e.head+1)}),PM=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let t=s.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:nt.of(["",""])},range:ue.cursor(i.from)}));return e(s.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},jM=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let t=s.changeByRange(i=>{if(!i.empty||i.from==0||i.from==s.doc.length)return{range:i};let n=i.from,r=s.doc.lineAt(n),o=n==r.from?n-1:Jt(r.text,n-r.from,!1)+r.from,l=n==r.to?n+1:Jt(r.text,n-r.from,!0)+r.from;return{changes:{from:o,to:l,insert:s.doc.slice(n,l).append(s.doc.slice(o,n))},range:ue.cursor(l)}});return t.changes.empty?!1:(e(s.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function fc(s){let e=[],t=-1;for(let i of s.selection.ranges){let n=s.doc.lineAt(i.from),r=s.doc.lineAt(i.to);if(!i.empty&&i.to==r.from&&(r=s.doc.lineAt(i.to-1)),t>=n.number){let o=e[e.length-1];o.to=r.to,o.ranges.push(i)}else e.push({from:n.from,to:r.to,ranges:[i]});t=r.number+1}return e}function Jy(s,e,t){if(s.readOnly)return!1;let i=[],n=[];for(let r of fc(s)){if(t?r.to==s.doc.length:r.from==0)continue;let o=s.doc.lineAt(t?r.to+1:r.from-1),l=o.length+1;if(t){i.push({from:r.to,to:o.to},{from:r.from,insert:o.text+s.lineBreak});for(let a of r.ranges)n.push(ue.range(Math.min(s.doc.length,a.anchor+l),Math.min(s.doc.length,a.head+l)))}else{i.push({from:o.from,to:r.from},{from:r.to,insert:s.lineBreak+o.text});for(let a of r.ranges)n.push(ue.range(a.anchor-l,a.head-l))}}return i.length?(e(s.update({changes:i,scrollIntoView:!0,selection:ue.create(n,s.selection.mainIndex),userEvent:"move.line"})),!0):!1}const $M=({state:s,dispatch:e})=>Jy(s,e,!1),RM=({state:s,dispatch:e})=>Jy(s,e,!0);function Yy(s,e,t){if(s.readOnly)return!1;let i=[];for(let n of fc(s))t?i.push({from:n.from,insert:s.doc.slice(n.from,n.to)+s.lineBreak}):i.push({from:n.to,insert:s.lineBreak+s.doc.slice(n.from,n.to)});return e(s.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const LM=({state:s,dispatch:e})=>Yy(s,e,!1),VM=({state:s,dispatch:e})=>Yy(s,e,!0),BM=s=>{if(s.state.readOnly)return!1;let{state:e}=s,t=e.changes(fc(e).map(({from:n,to:r})=>(n>0?n--:r<e.doc.length&&r++,{from:n,to:r}))),i=Pr(e.selection,n=>{let r;if(s.lineWrapping){let o=s.lineBlockAt(n.head),l=s.coordsAtPos(n.head,n.assoc||1);l&&(r=o.bottom+s.documentTop-l.bottom+s.defaultLineHeight/2)}return s.moveVertically(n,!0,r)}).map(t);return s.dispatch({changes:t,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function IM(s,e){if(/\(\)|\[\]|\{\}/.test(s.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=ns(s).resolveInner(e),i=t.childBefore(e),n=t.childAfter(e),r;return i&&n&&i.to<=e&&n.from>=e&&(r=i.type.prop(et.closedBy))&&r.indexOf(n.name)>-1&&s.doc.lineAt(i.to).from==s.doc.lineAt(n.from).from&&!/\S/.test(s.sliceDoc(i.to,n.from))?{from:i.to,to:n.from}:null}const Sm=Qy(!1),NM=Qy(!0);function Qy(s){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange(n=>{let{from:r,to:o}=n,l=e.doc.lineAt(r),a=!s&&r==o&&IM(e,r);s&&(r=o=(o<=l.to?l:e.doc.lineAt(o)).to);let u=new lc(e,{simulateBreak:r,simulateDoubleBreak:!!a}),c=hf(u,r);for(c==null&&(c=Or(/^\s*/.exec(e.doc.lineAt(r).text)[0],e.tabSize));o<l.to&&/\s/.test(l.text[o-l.from]);)o++;a?{from:r,to:o}=a:r>l.from&&r<l.from+100&&!/\S/.test(l.text.slice(0,r))&&(r=l.from);let d=["",Fo(e,c)];return a&&d.push(Fo(e,u.lineIndent(l.from,-1))),{changes:{from:r,to:o,insert:nt.of(d)},range:ue.cursor(r+1+d[1].length)}});return t(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function kf(s,e){let t=-1;return s.changeByRange(i=>{let n=[];for(let o=i.from;o<=i.to;){let l=s.doc.lineAt(o);l.number>t&&(i.empty||i.to>l.from)&&(e(l,n,i),t=l.number),o=l.to+1}let r=s.changes(n);return{changes:n,range:ue.range(r.mapPos(i.anchor,1),r.mapPos(i.head,1))}})}const FM=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let t=Object.create(null),i=new lc(s,{overrideIndentation:r=>{let o=t[r];return o??-1}}),n=kf(s,(r,o,l)=>{let a=hf(i,r.from);if(a==null)return;/\S/.test(r.text)||(a=0);let u=/^\s*/.exec(r.text)[0],c=Fo(s,a);(u!=c||l.from<r.from+u.length)&&(t[r.from]=a,o.push({from:r.from,to:r.from+u.length,insert:c}))});return n.changes.empty||e(s.update(n,{userEvent:"indent"})),!0},zM=({state:s,dispatch:e})=>s.readOnly?!1:(e(s.update(kf(s,(t,i)=>{i.push({from:t.from,insert:s.facet(ff)})}),{userEvent:"input.indent"})),!0),UM=({state:s,dispatch:e})=>s.readOnly?!1:(e(s.update(kf(s,(t,i)=>{let n=/^\s*/.exec(t.text)[0];if(!n)return;let r=Or(n,s.tabSize),o=0,l=Fo(s,Math.max(0,r-Nn(s)));for(;o<n.length&&o<l.length&&n.charCodeAt(o)==l.charCodeAt(o);)o++;i.push({from:t.from+o,to:t.from+n.length,insert:l.slice(o)})}),{userEvent:"delete.dedent"})),!0),HM=s=>(s.setTabFocusMode(),!0),WM=[{key:"Ctrl-b",run:Dy,shift:Vy,preventDefault:!0},{key:"Ctrl-f",run:Ey,shift:By},{key:"Ctrl-p",run:Py,shift:Fy},{key:"Ctrl-n",run:jy,shift:zy},{key:"Ctrl-a",run:aM,shift:kM},{key:"Ctrl-e",run:cM,shift:xM},{key:"Ctrl-d",run:Ky},{key:"Ctrl-h",run:vd},{key:"Ctrl-k",run:EM},{key:"Ctrl-Alt-h",run:Gy},{key:"Ctrl-o",run:PM},{key:"Ctrl-t",run:jM},{key:"Ctrl-v",run:gd}],KM=[{key:"ArrowLeft",run:Dy,shift:Vy,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:ZA,shift:fM,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:oM,shift:yM,preventDefault:!0},{key:"ArrowRight",run:Ey,shift:By,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:eM,shift:hM,preventDefault:!0},{mac:"Cmd-ArrowRight",run:lM,shift:bM,preventDefault:!0},{key:"ArrowUp",run:Py,shift:Fy,preventDefault:!0},{mac:"Cmd-ArrowUp",run:bm,shift:xm},{mac:"Ctrl-ArrowUp",run:gm,shift:vm},{key:"ArrowDown",run:jy,shift:zy,preventDefault:!0},{mac:"Cmd-ArrowDown",run:km,shift:wm},{mac:"Ctrl-ArrowDown",run:gd,shift:ym},{key:"PageUp",run:gm,shift:vm},{key:"PageDown",run:gd,shift:ym},{key:"Home",run:rM,shift:vM,preventDefault:!0},{key:"Mod-Home",run:bm,shift:xm},{key:"End",run:nM,shift:gM,preventDefault:!0},{key:"Mod-End",run:km,shift:wm},{key:"Enter",run:Sm,shift:Sm},{key:"Mod-a",run:wM},{key:"Backspace",run:vd,shift:vd,preventDefault:!0},{key:"Delete",run:Ky,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Gy,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:DM,preventDefault:!0},{mac:"Mod-Backspace",run:TM,preventDefault:!0},{mac:"Mod-Delete",run:OM,preventDefault:!0}].concat(WM.map(s=>({mac:s.key,run:s.run,shift:s.shift}))),qM=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:sM,shift:pM},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:iM,shift:mM},{key:"Alt-ArrowUp",run:$M},{key:"Shift-Alt-ArrowUp",run:LM},{key:"Alt-ArrowDown",run:RM},{key:"Shift-Alt-ArrowDown",run:VM},{key:"Mod-Alt-ArrowUp",run:_M},{key:"Mod-Alt-ArrowDown",run:AM},{key:"Escape",run:MM},{key:"Mod-Enter",run:NM},{key:"Alt-l",mac:"Ctrl-l",run:SM},{key:"Mod-i",run:CM,preventDefault:!0},{key:"Mod-[",run:UM},{key:"Mod-]",run:zM},{key:"Mod-Alt-\\",run:FM},{key:"Shift-Mod-k",run:BM},{key:"Shift-Mod-\\",run:dM},{key:"Mod-/",run:$A},{key:"Alt-A",run:LA},{key:"Ctrl-m",mac:"Shift-Alt-m",run:HM}].concat(KM),Cm=typeof String.prototype.normalize=="function"?s=>s.normalize("NFKD"):s=>s;class _r{constructor(e,t,i=0,n=e.length,r,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,n),this.bufferStart=i,this.normalize=r?l=>r(Cm(l)):Cm,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return ys(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=Wd(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=hi(e);let n=this.normalize(t);if(n.length)for(let r=0,o=i;;r++){let l=n.charCodeAt(r),a=this.match(l,o,this.bufferPos+this.bufferStart);if(r==n.length-1){if(a)return this.value=a,this;break}o==i&&r<t.length&&t.charCodeAt(r)==l&&o++}}}match(e,t,i){let n=null;for(let r=0;r<this.matches.length;r+=2){let o=this.matches[r],l=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?n={from:this.matches[r+1],to:i}:(this.matches[r]++,l=!0)),l||(this.matches.splice(r,2),r-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?n={from:t,to:i}:this.matches.push(1,t)),n&&this.test&&!this.test(n.from,n.to,this.buffer,this.bufferStart)&&(n=null),n}}typeof Symbol<"u"&&(_r.prototype[Symbol.iterator]=function(){return this});const Xy={from:-1,to:-1,match:/.*/.exec("")},xf="gm"+(/x/.unicode==null?"":"u");class Zy{constructor(e,t,i,n=0,r=e.length){if(this.text=e,this.to=r,this.curLine="",this.done=!1,this.value=Xy,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new eb(e,t,i,n,r);this.re=new RegExp(t,xf+(i?.ignoreCase?"i":"")),this.test=i?.test,this.iter=e.iter();let o=e.lineAt(n);this.curLineStart=o.from,this.matchPos=Ea(e,n),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let i=this.curLineStart+t.index,n=i+t[0].length;if(this.matchPos=Ea(this.text,n+(i==n?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<n||i>this.value.to)&&(!this.test||this.test(i,n,t)))return this.value={from:i,to:n,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const Zc=new WeakMap;class hr{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,i){let n=Zc.get(e);if(!n||n.from>=i||n.to<=t){let l=new hr(t,e.sliceString(t,i));return Zc.set(e,l),l}if(n.from==t&&n.to==i)return n;let{text:r,from:o}=n;return o>t&&(r=e.sliceString(t,o)+r,o=t),n.to<i&&(r+=e.sliceString(n.to,i)),Zc.set(e,new hr(o,r)),new hr(t,r.slice(t-o,i-o))}}class eb{constructor(e,t,i,n,r){this.text=e,this.to=r,this.done=!1,this.value=Xy,this.matchPos=Ea(e,n),this.re=new RegExp(t,xf+(i?.ignoreCase?"i":"")),this.test=i?.test,this.flat=hr.get(e,n,this.chunkEnd(n+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let i=this.flat.from+t.index,n=i+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,n,t)))return this.value={from:i,to:n,match:t},this.matchPos=Ea(this.text,n+(i==n?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=hr.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(Zy.prototype[Symbol.iterator]=eb.prototype[Symbol.iterator]=function(){return this});function GM(s){try{return new RegExp(s,xf),!0}catch{return!1}}function Ea(s,e){if(e>=s.length)return e;let t=s.lineAt(e),i;for(;e<t.to&&(i=t.text.charCodeAt(e-t.from))>=56320&&i<57344;)e++;return e}function yd(s){let e=String(s.state.doc.lineAt(s.state.selection.main.head).number),t=gt("input",{class:"cm-textfield",name:"line",value:e}),i=gt("form",{class:"cm-gotoLine",onkeydown:r=>{r.keyCode==27?(r.preventDefault(),s.dispatch({effects:yo.of(!1)}),s.focus()):r.keyCode==13&&(r.preventDefault(),n())},onsubmit:r=>{r.preventDefault(),n()}},gt("label",s.state.phrase("Go to line"),": ",t)," ",gt("button",{class:"cm-button",type:"submit"},s.state.phrase("go")),gt("button",{name:"close",onclick:()=>{s.dispatch({effects:yo.of(!1)}),s.focus()},"aria-label":s.state.phrase("close"),type:"button"},[""]));function n(){let r=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!r)return;let{state:o}=s,l=o.doc.lineAt(o.selection.main.head),[,a,u,c,d]=r,f=c?+c.slice(1):0,p=u?+u:l.number;if(u&&d){let m=p/100;a&&(m=m*(a=="-"?-1:1)+l.number/o.doc.lines),p=Math.round(o.doc.lines*m)}else u&&a&&(p=p*(a=="-"?-1:1)+l.number);let v=o.doc.line(Math.max(1,Math.min(o.doc.lines,p))),k=ue.cursor(v.from+Math.max(0,Math.min(f,v.length)));s.dispatch({effects:[yo.of(!1),Ee.scrollIntoView(k.from,{y:"center"})],selection:k}),s.focus()}return{dom:i}}const yo=Xe.define(),_m=Yt.define({create(){return!0},update(s,e){for(let t of e.effects)t.is(yo)&&(s=t.value);return s},provide:s=>Bo.from(s,e=>e?yd:null)}),JM=s=>{let e=Vo(s,yd);if(!e){let t=[yo.of(!0)];s.state.field(_m,!1)==null&&t.push(Xe.appendConfig.of([_m,YM])),s.dispatch({effects:t}),e=Vo(s,yd)}return e&&e.dom.querySelector("input").select(),!0},YM=Ee.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),QM={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},XM=Te.define({combine(s){return ki(s,QM,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function ZM(s){return[nD,iD]}const eD=Fe.mark({class:"cm-selectionMatch"}),tD=Fe.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function Am(s,e,t,i){return(t==0||s(e.sliceDoc(t-1,t))!=Ct.Word)&&(i==e.doc.length||s(e.sliceDoc(i,i+1))!=Ct.Word)}function sD(s,e,t,i){return s(e.sliceDoc(t,t+1))==Ct.Word&&s(e.sliceDoc(i-1,i))==Ct.Word}const iD=Pt.fromClass(class{constructor(s){this.decorations=this.getDeco(s)}update(s){(s.selectionSet||s.docChanged||s.viewportChanged)&&(this.decorations=this.getDeco(s.view))}getDeco(s){let e=s.state.facet(XM),{state:t}=s,i=t.selection;if(i.ranges.length>1)return Fe.none;let n=i.main,r,o=null;if(n.empty){if(!e.highlightWordAroundCursor)return Fe.none;let a=t.wordAt(n.head);if(!a)return Fe.none;o=t.charCategorizer(n.head),r=t.sliceDoc(a.from,a.to)}else{let a=n.to-n.from;if(a<e.minSelectionLength||a>200)return Fe.none;if(e.wholeWords){if(r=t.sliceDoc(n.from,n.to),o=t.charCategorizer(n.head),!(Am(o,t,n.from,n.to)&&sD(o,t,n.from,n.to)))return Fe.none}else if(r=t.sliceDoc(n.from,n.to),!r)return Fe.none}let l=[];for(let a of s.visibleRanges){let u=new _r(t.doc,r,a.from,a.to);for(;!u.next().done;){let{from:c,to:d}=u.value;if((!o||Am(o,t,c,d))&&(n.empty&&c<=n.from&&d>=n.to?l.push(tD.range(c,d)):(c>=n.to||d<=n.from)&&l.push(eD.range(c,d)),l.length>e.maxMatches))return Fe.none}}return Fe.set(l)}},{decorations:s=>s.decorations}),nD=Ee.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),rD=({state:s,dispatch:e})=>{let{selection:t}=s,i=ue.create(t.ranges.map(n=>s.wordAt(n.head)||ue.cursor(n.head)),t.mainIndex);return i.eq(t)?!1:(e(s.update({selection:i})),!0)};function oD(s,e){let{main:t,ranges:i}=s.selection,n=s.wordAt(t.head),r=n&&n.from==t.from&&n.to==t.to;for(let o=!1,l=new _r(s.doc,e,i[i.length-1].to);;)if(l.next(),l.done){if(o)return null;l=new _r(s.doc,e,0,Math.max(0,i[i.length-1].from-1)),o=!0}else{if(o&&i.some(a=>a.from==l.value.from))continue;if(r){let a=s.wordAt(l.value.from);if(!a||a.from!=l.value.from||a.to!=l.value.to)continue}return l.value}}const lD=({state:s,dispatch:e})=>{let{ranges:t}=s.selection;if(t.some(r=>r.from===r.to))return rD({state:s,dispatch:e});let i=s.sliceDoc(t[0].from,t[0].to);if(s.selection.ranges.some(r=>s.sliceDoc(r.from,r.to)!=i))return!1;let n=oD(s,i);return n?(e(s.update({selection:s.selection.addRange(ue.range(n.from,n.to),!1),effects:Ee.scrollIntoView(n.to)})),!0):!1},jr=Te.define({combine(s){return ki(s,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new bD(e),scrollToMatch:e=>Ee.scrollIntoView(e)})}});class tb{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||GM(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new dD(this):new cD(this)}getCursor(e,t=0,i){let n=e.doc?e:st.create({doc:e});return i==null&&(i=n.doc.length),this.regexp?Xn(this,n,t,i):Qn(this,n,t,i)}}class sb{constructor(e){this.spec=e}}function Qn(s,e,t,i){return new _r(e.doc,s.unquoted,t,i,s.caseSensitive?void 0:n=>n.toLowerCase(),s.wholeWord?aD(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function aD(s,e){return(t,i,n,r)=>((r>t||r+n.length<i)&&(r=Math.max(0,t-2),n=s.sliceString(r,Math.min(s.length,i+2))),(e(Ta(n,t-r))!=Ct.Word||e(Oa(n,t-r))!=Ct.Word)&&(e(Oa(n,i-r))!=Ct.Word||e(Ta(n,i-r))!=Ct.Word))}class cD extends sb{constructor(e){super(e)}nextMatch(e,t,i){let n=Qn(this.spec,e,i,e.doc.length).nextOverlapping();if(n.done){let r=Math.min(e.doc.length,t+this.spec.unquoted.length);n=Qn(this.spec,e,0,r).nextOverlapping()}return n.done||n.value.from==t&&n.value.to==i?null:n.value}prevMatchInRange(e,t,i){for(let n=i;;){let r=Math.max(t,n-1e4-this.spec.unquoted.length),o=Qn(this.spec,e,r,n),l=null;for(;!o.nextOverlapping().done;)l=o.value;if(l)return l;if(r==t)return null;n-=1e4}}prevMatch(e,t,i){let n=this.prevMatchInRange(e,0,t);return n||(n=this.prevMatchInRange(e,Math.max(0,i-this.spec.unquoted.length),e.doc.length)),n&&(n.from!=t||n.to!=i)?n:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let i=Qn(this.spec,e,0,e.doc.length),n=[];for(;!i.next().done;){if(n.length>=t)return null;n.push(i.value)}return n}highlight(e,t,i,n){let r=Qn(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!r.next().done;)n(r.value.from,r.value.to)}}function Xn(s,e,t,i){return new Zy(e.doc,s.search,{ignoreCase:!s.caseSensitive,test:s.wholeWord?uD(e.charCategorizer(e.selection.main.head)):void 0},t,i)}function Ta(s,e){return s.slice(Jt(s,e,!1),e)}function Oa(s,e){return s.slice(e,Jt(s,e))}function uD(s){return(e,t,i)=>!i[0].length||(s(Ta(i.input,i.index))!=Ct.Word||s(Oa(i.input,i.index))!=Ct.Word)&&(s(Oa(i.input,i.index+i[0].length))!=Ct.Word||s(Ta(i.input,i.index+i[0].length))!=Ct.Word)}class dD extends sb{nextMatch(e,t,i){let n=Xn(this.spec,e,i,e.doc.length).next();return n.done&&(n=Xn(this.spec,e,0,t).next()),n.done?null:n.value}prevMatchInRange(e,t,i){for(let n=1;;n++){let r=Math.max(t,i-n*1e4),o=Xn(this.spec,e,r,i),l=null;for(;!o.next().done;)l=o.value;if(l&&(r==t||l.from>r+10))return l;if(r==t)return null}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(t,i)=>{if(i=="&")return e.match[0];if(i=="$")return"$";for(let n=i.length;n>0;n--){let r=+i.slice(0,n);if(r>0&&r<e.match.length)return e.match[r]+i.slice(n)}return t})}matchAll(e,t){let i=Xn(this.spec,e,0,e.doc.length),n=[];for(;!i.next().done;){if(n.length>=t)return null;n.push(i.value)}return n}highlight(e,t,i,n){let r=Xn(this.spec,e,Math.max(0,t-250),Math.min(i+250,e.doc.length));for(;!r.next().done;)n(r.value.from,r.value.to)}}const Uo=Xe.define(),wf=Xe.define(),sn=Yt.define({create(s){return new eu(bd(s).create(),null)},update(s,e){for(let t of e.effects)t.is(Uo)?s=new eu(t.value.create(),s.panel):t.is(wf)&&(s=new eu(s.query,t.value?Sf:null));return s},provide:s=>Bo.from(s,e=>e.panel)});class eu{constructor(e,t){this.query=e,this.panel=t}}const fD=Fe.mark({class:"cm-searchMatch"}),hD=Fe.mark({class:"cm-searchMatch cm-searchMatch-selected"}),pD=Pt.fromClass(class{constructor(s){this.view=s,this.decorations=this.highlight(s.state.field(sn))}update(s){let e=s.state.field(sn);(e!=s.startState.field(sn)||s.docChanged||s.selectionSet||s.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:s,panel:e}){if(!e||!s.spec.valid)return Fe.none;let{view:t}=this,i=new $i;for(let n=0,r=t.visibleRanges,o=r.length;n<o;n++){let{from:l,to:a}=r[n];for(;n<o-1&&a>r[n+1].from-500;)a=r[++n].to;s.highlight(t.state,l,a,(u,c)=>{let d=t.state.selection.ranges.some(f=>f.from==u&&f.to==c);i.add(u,c,d?hD:fD)})}return i.finish()}},{decorations:s=>s.decorations});function nl(s){return e=>{let t=e.state.field(sn,!1);return t&&t.query.spec.valid?s(e,t):rb(e)}}const Pa=nl((s,{query:e})=>{let{to:t}=s.state.selection.main,i=e.nextMatch(s.state,t,t);if(!i)return!1;let n=ue.single(i.from,i.to),r=s.state.facet(jr);return s.dispatch({selection:n,effects:[Cf(s,i),r.scrollToMatch(n.main,s)],userEvent:"select.search"}),nb(s),!0}),ja=nl((s,{query:e})=>{let{state:t}=s,{from:i}=t.selection.main,n=e.prevMatch(t,i,i);if(!n)return!1;let r=ue.single(n.from,n.to),o=s.state.facet(jr);return s.dispatch({selection:r,effects:[Cf(s,n),o.scrollToMatch(r.main,s)],userEvent:"select.search"}),nb(s),!0}),mD=nl((s,{query:e})=>{let t=e.matchAll(s.state,1e3);return!t||!t.length?!1:(s.dispatch({selection:ue.create(t.map(i=>ue.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),gD=({state:s,dispatch:e})=>{let t=s.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:i,to:n}=t.main,r=[],o=0;for(let l=new _r(s.doc,s.sliceDoc(i,n));!l.next().done;){if(r.length>1e3)return!1;l.value.from==i&&(o=r.length),r.push(ue.range(l.value.from,l.value.to))}return e(s.update({selection:ue.create(r,o),userEvent:"select.search.matches"})),!0},Mm=nl((s,{query:e})=>{let{state:t}=s,{from:i,to:n}=t.selection.main;if(t.readOnly)return!1;let r=e.nextMatch(t,i,i);if(!r)return!1;let o=r,l=[],a,u,c=[];o.from==i&&o.to==n&&(u=t.toText(e.getReplacement(o)),l.push({from:o.from,to:o.to,insert:u}),o=e.nextMatch(t,o.from,o.to),c.push(Ee.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(i).number)+".")));let d=s.state.changes(l);return o&&(a=ue.single(o.from,o.to).map(d),c.push(Cf(s,o)),c.push(t.facet(jr).scrollToMatch(a.main,s))),s.dispatch({changes:d,selection:a,effects:c,userEvent:"input.replace"}),!0}),vD=nl((s,{query:e})=>{if(s.state.readOnly)return!1;let t=e.matchAll(s.state,1e9).map(n=>{let{from:r,to:o}=n;return{from:r,to:o,insert:e.getReplacement(n)}});if(!t.length)return!1;let i=s.state.phrase("replaced $ matches",t.length)+".";return s.dispatch({changes:t,effects:Ee.announce.of(i),userEvent:"input.replace.all"}),!0});function Sf(s){return s.state.facet(jr).createPanel(s)}function bd(s,e){var t,i,n,r,o;let l=s.selection.main,a=l.empty||l.to>l.from+100?"":s.sliceDoc(l.from,l.to);if(e&&!a)return e;let u=s.facet(jr);return new tb({search:((t=e?.literal)!==null&&t!==void 0?t:u.literal)?a:a.replace(/\n/g,"\\n"),caseSensitive:(i=e?.caseSensitive)!==null&&i!==void 0?i:u.caseSensitive,literal:(n=e?.literal)!==null&&n!==void 0?n:u.literal,regexp:(r=e?.regexp)!==null&&r!==void 0?r:u.regexp,wholeWord:(o=e?.wholeWord)!==null&&o!==void 0?o:u.wholeWord})}function ib(s){let e=Vo(s,Sf);return e&&e.dom.querySelector("[main-field]")}function nb(s){let e=ib(s);e&&e==s.root.activeElement&&e.select()}const rb=s=>{let e=s.state.field(sn,!1);if(e&&e.panel){let t=ib(s);if(t&&t!=s.root.activeElement){let i=bd(s.state,e.query.spec);i.valid&&s.dispatch({effects:Uo.of(i)}),t.focus(),t.select()}}else s.dispatch({effects:[wf.of(!0),e?Uo.of(bd(s.state,e.query.spec)):Xe.appendConfig.of(xD)]});return!0},ob=s=>{let e=s.state.field(sn,!1);if(!e||!e.panel)return!1;let t=Vo(s,Sf);return t&&t.dom.contains(s.root.activeElement)&&s.focus(),s.dispatch({effects:wf.of(!1)}),!0},yD=[{key:"Mod-f",run:rb,scope:"editor search-panel"},{key:"F3",run:Pa,shift:ja,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Pa,shift:ja,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:ob,scope:"editor search-panel"},{key:"Mod-Shift-l",run:gD},{key:"Mod-Alt-g",run:JM},{key:"Mod-d",run:lD,preventDefault:!0}];class bD{constructor(e){this.view=e;let t=this.query=e.state.field(sn).query.spec;this.commit=this.commit.bind(this),this.searchField=gt("input",{value:t.search,placeholder:Cs(e,"Find"),"aria-label":Cs(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=gt("input",{value:t.replace,placeholder:Cs(e,"Replace"),"aria-label":Cs(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=gt("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=gt("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=gt("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function i(n,r,o){return gt("button",{class:"cm-button",name:n,onclick:r,type:"button"},o)}this.dom=gt("div",{onkeydown:n=>this.keydown(n),class:"cm-search"},[this.searchField,i("next",()=>Pa(e),[Cs(e,"next")]),i("prev",()=>ja(e),[Cs(e,"previous")]),i("select",()=>mD(e),[Cs(e,"all")]),gt("label",null,[this.caseField,Cs(e,"match case")]),gt("label",null,[this.reField,Cs(e,"regexp")]),gt("label",null,[this.wordField,Cs(e,"by word")]),...e.state.readOnly?[]:[gt("br"),this.replaceField,i("replace",()=>Mm(e),[Cs(e,"replace")]),i("replaceAll",()=>vD(e),[Cs(e,"replace all")])],gt("button",{name:"close",onclick:()=>ob(e),"aria-label":Cs(e,"close"),type:"button"},[""])])}commit(){let e=new tb({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Uo.of(e)}))}keydown(e){x5(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?ja:Pa)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),Mm(this.view))}update(e){for(let t of e.transactions)for(let i of t.effects)i.is(Uo)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(jr).top}}function Cs(s,e){return s.state.phrase(e)}const Nl=30,Fl=/[\s\.,:;?!]/;function Cf(s,{from:e,to:t}){let i=s.state.doc.lineAt(e),n=s.state.doc.lineAt(t).to,r=Math.max(i.from,e-Nl),o=Math.min(n,t+Nl),l=s.state.sliceDoc(r,o);if(r!=i.from){for(let a=0;a<Nl;a++)if(!Fl.test(l[a+1])&&Fl.test(l[a])){l=l.slice(a);break}}if(o!=n){for(let a=l.length-1;a>l.length-Nl;a--)if(!Fl.test(l[a-1])&&Fl.test(l[a])){l=l.slice(0,a);break}}return Ee.announce.of(`${s.state.phrase("current match")}. ${l} ${s.state.phrase("on line")} ${i.number}.`)}const kD=Ee.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),xD=[sn,Un.low(pD),kD];class lb{constructor(e,t,i,n){this.state=e,this.pos=t,this.explicit=i,this.view=n,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=ns(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),i=Math.max(t.from,this.pos-250),n=t.text.slice(i-t.from,this.pos-t.from),r=n.search(ab(e,!1));return r<0?null:{from:i+r,to:this.pos,text:n.slice(r)}}get aborted(){return this.abortListeners==null}addEventListener(e,t,i){e=="abort"&&this.abortListeners&&(this.abortListeners.push(t),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function Dm(s){let e=Object.keys(s).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function wD(s){let e=Object.create(null),t=Object.create(null);for(let{label:n}of s){e[n[0]]=!0;for(let r=1;r<n.length;r++)t[n[r]]=!0}let i=Dm(e)+Dm(t)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function SD(s){let e=s.map(n=>typeof n=="string"?{label:n}:n),[t,i]=e.every(n=>/^\w+$/.test(n.label))?[/\w*$/,/\w+$/]:wD(e);return n=>{let r=n.matchBefore(i);return r||n.explicit?{from:r?r.from:n.pos,options:e,validFor:t}:null}}class Em{constructor(e,t,i,n){this.completion=e,this.source=t,this.match=i,this.score=n}}function $n(s){return s.selection.main.from}function ab(s,e){var t;let{source:i}=s,n=e&&i[0]!="^",r=i[i.length-1]!="$";return!n&&!r?s:new RegExp(`${n?"^":""}(?:${i})${r?"$":""}`,(t=s.flags)!==null&&t!==void 0?t:s.ignoreCase?"i":"")}const cb=Bi.define();function CD(s,e,t,i){let{main:n}=s.selection,r=t-n.from,o=i-n.from;return{...s.changeByRange(l=>{if(l!=n&&t!=i&&s.sliceDoc(l.from+r,l.from+o)!=s.sliceDoc(t,i))return{range:l};let a=s.toText(e);return{changes:{from:l.from+r,to:i==n.from?l.to:l.from+o,insert:a},range:ue.cursor(l.from+r+a.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}const Tm=new WeakMap;function _D(s){if(!Array.isArray(s))return s;let e=Tm.get(s);return e||Tm.set(s,e=SD(s)),e}const $a=Xe.define(),Ho=Xe.define();class AD{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let i=ys(e,t),n=hi(i);this.chars.push(i);let r=e.slice(t,t+n),o=r.toUpperCase();this.folded.push(ys(o==r?r.toLowerCase():o,0)),t+=n}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:i,any:n,precise:r,byWord:o}=this;if(t.length==1){let L=ys(e,0),I=hi(L),H=I==e.length?0:-100;if(L!=t[0])if(L==i[0])H+=-200;else return null;return this.ret(H,[0,I])}let l=e.indexOf(this.pattern);if(l==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let a=t.length,u=0;if(l<0){for(let L=0,I=Math.min(e.length,200);L<I&&u<a;){let H=ys(e,L);(H==t[u]||H==i[u])&&(n[u++]=L),L+=hi(H)}if(u<a)return null}let c=0,d=0,f=!1,p=0,v=-1,k=-1,m=/[a-z]/.test(e),w=!0;for(let L=0,I=Math.min(e.length,200),H=0;L<I&&d<a;){let N=ys(e,L);l<0&&(c<a&&N==t[c]&&(r[c++]=L),p<a&&(N==t[p]||N==i[p]?(p==0&&(v=L),k=L+1,p++):p=0));let P,S=N<255?N>=48&&N<=57||N>=97&&N<=122?2:N>=65&&N<=90?1:0:(P=Wd(N))!=P.toLowerCase()?1:P!=P.toUpperCase()?2:0;(!L||S==1&&m||H==0&&S!=0)&&(t[d]==N||i[d]==N&&(f=!0)?o[d++]=L:o.length&&(w=!1)),H=S,L+=hi(N)}return d==a&&o[0]==0&&w?this.result(-100+(f?-200:0),o,e):p==a&&v==0?this.ret(-200-e.length+(k==e.length?0:-100),[0,k]):l>-1?this.ret(-700-e.length,[l,l+this.pattern.length]):p==a?this.ret(-900-e.length,[v,k]):d==a?this.result(-100+(f?-200:0)+-700+(w?0:-1100),o,e):t.length==2?null:this.result((n[0]?-700:0)+-200+-1100,n,e)}result(e,t,i){let n=[],r=0;for(let o of t){let l=o+(this.astral?hi(ys(i,o)):1);r&&n[r-1]==o?n[r-1]=l:(n[r++]=o,n[r++]=l)}return this.ret(e-i.length,n)}}class MD{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),i=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,t.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const Ft=Te.define({combine(s){return ki(s,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:DD,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>i=>Om(e(i),t(i)),optionClass:(e,t)=>i=>Om(e(i),t(i)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})}});function Om(s,e){return s?e?s+" "+e:s:e}function DD(s,e,t,i,n,r){let o=s.textDirection==St.RTL,l=o,a=!1,u="top",c,d,f=e.left-n.left,p=n.right-e.right,v=i.right-i.left,k=i.bottom-i.top;if(l&&f<Math.min(v,p)?l=!1:!l&&p<Math.min(v,f)&&(l=!0),v<=(l?f:p))c=Math.max(n.top,Math.min(t.top,n.bottom-k))-e.top,d=Math.min(400,l?f:p);else{a=!0,d=Math.min(400,(o?e.right:n.right-e.left)-30);let L=n.bottom-e.bottom;L>=k||L>e.top?c=t.bottom-e.top:(u="bottom",c=e.bottom-t.top)}let m=(e.bottom-e.top)/r.offsetHeight,w=(e.right-e.left)/r.offsetWidth;return{style:`${u}: ${c/m}px; max-width: ${d/w}px`,class:"cm-completionInfo-"+(a?o?"left-narrow":"right-narrow":l?"left":"right")}}function ED(s){let e=s.addToOptions.slice();return s.icons&&e.push({render(t){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),t.type&&i.classList.add(...t.type.split(/\s+/g).map(n=>"cm-completionIcon-"+n)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(t,i,n,r){let o=document.createElement("span");o.className="cm-completionLabel";let l=t.displayLabel||t.label,a=0;for(let u=0;u<r.length;){let c=r[u++],d=r[u++];c>a&&o.appendChild(document.createTextNode(l.slice(a,c)));let f=o.appendChild(document.createElement("span"));f.appendChild(document.createTextNode(l.slice(c,d))),f.className="cm-completionMatchedText",a=d}return a<l.length&&o.appendChild(document.createTextNode(l.slice(a))),o},position:50},{render(t){if(!t.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=t.detail,i},position:80}),e.sort((t,i)=>t.position-i.position).map(t=>t.render)}function tu(s,e,t){if(s<=t)return{from:0,to:s};if(e<0&&(e=0),e<=s>>1){let n=Math.floor(e/t);return{from:n*t,to:(n+1)*t}}let i=Math.floor((s-e)/t);return{from:s-(i+1)*t,to:s-i*t}}class TD{constructor(e,t,i){this.view=e,this.stateField=t,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:a=>this.placeInfo(a),key:this},this.space=null,this.currentClass="";let n=e.state.field(t),{options:r,selected:o}=n.open,l=e.state.facet(Ft);this.optionContent=ED(l),this.optionClass=l.optionClass,this.tooltipClass=l.tooltipClass,this.range=tu(r.length,o,l.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",a=>{let{options:u}=e.state.field(t).open;for(let c=a.target,d;c&&c!=this.dom;c=c.parentNode)if(c.nodeName=="LI"&&(d=/-(\d+)$/.exec(c.id))&&+d[1]<u.length){this.applyCompletion(e,u[+d[1]]),a.preventDefault();return}}),this.dom.addEventListener("focusout",a=>{let u=e.state.field(this.stateField,!1);u&&u.tooltip&&e.state.facet(Ft).closeOnBlur&&a.relatedTarget!=e.contentDOM&&e.dispatch({effects:Ho.of(null)})}),this.showOptions(r,n.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let i=e.state.field(this.stateField),n=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=n){let{options:r,selected:o,disabled:l}=i.open;(!n.open||n.open.options!=r)&&(this.range=tu(r.length,o,e.state.facet(Ft).maxRenderedOptions),this.showOptions(r,i.id)),this.updateSel(),l!=((t=n.open)===null||t===void 0?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!l)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of t.split(" "))i&&this.dom.classList.add(i);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;(t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=tu(t.options.length,t.selected,this.view.state.facet(Ft).maxRenderedOptions),this.showOptions(t.options,e.id));let i=this.updateSelectedOption(t.selected);if(i){this.destroyInfo();let{completion:n}=t.options[t.selected],{info:r}=n;if(!r)return;let o=typeof r=="string"?document.createTextNode(r):r(n);if(!o)return;"then"in o?o.then(l=>{l&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(l,n)}).catch(l=>ks(this.view.state,l,"completion info")):(this.addInfoPane(o,n),i.setAttribute("aria-describedby",this.info.id))}}addInfoPane(e,t){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",i.id="cm-completionInfo-"+Math.floor(Math.random()*65535).toString(16),e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:n,destroy:r}=e;i.appendChild(n),this.infoDestroy=r||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let i=this.list.firstChild,n=this.range.from;i;i=i.nextSibling,n++)i.nodeName!="LI"||!i.id?n--:n==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),t=i):i.hasAttribute("aria-selected")&&(i.removeAttribute("aria-selected"),i.removeAttribute("aria-describedby"));return t&&PD(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),n=e.getBoundingClientRect(),r=this.space;if(!r){let o=this.dom.ownerDocument.documentElement;r={left:0,top:0,right:o.clientWidth,bottom:o.clientHeight}}return n.top>Math.min(r.bottom,t.bottom)-10||n.bottom<Math.max(r.top,t.top)+10?null:this.view.state.facet(Ft).positionInfo(this.view,t,n,i,r,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,i){const n=document.createElement("ul");n.id=t,n.setAttribute("role","listbox"),n.setAttribute("aria-expanded","true"),n.setAttribute("aria-label",this.view.state.phrase("Completions")),n.addEventListener("mousedown",o=>{o.target==n&&o.preventDefault()});let r=null;for(let o=i.from;o<i.to;o++){let{completion:l,match:a}=e[o],{section:u}=l;if(u){let f=typeof u=="string"?u:u.name;if(f!=r&&(o>i.from||i.from==0))if(r=f,typeof u!="string"&&u.header)n.appendChild(u.header(u));else{let p=n.appendChild(document.createElement("completion-section"));p.textContent=f}}const c=n.appendChild(document.createElement("li"));c.id=t+"-"+o,c.setAttribute("role","option");let d=this.optionClass(l);d&&(c.className=d);for(let f of this.optionContent){let p=f(l,this.view.state,this.view,a);p&&c.appendChild(p)}}return i.from&&n.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&n.classList.add("cm-completionListIncompleteBottom"),n}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function OD(s,e){return t=>new TD(t,s,e)}function PD(s,e){let t=s.getBoundingClientRect(),i=e.getBoundingClientRect(),n=t.height/s.offsetHeight;i.top<t.top?s.scrollTop-=(t.top-i.top)/n:i.bottom>t.bottom&&(s.scrollTop+=(i.bottom-t.bottom)/n)}function Pm(s){return(s.boost||0)*100+(s.apply?10:0)+(s.info?5:0)+(s.type?1:0)}function jD(s,e){let t=[],i=null,n=null,r=c=>{t.push(c);let{section:d}=c.completion;if(d){i||(i=[]);let f=typeof d=="string"?d:d.name;i.some(p=>p.name==f)||i.push(typeof d=="string"?{name:f}:d)}},o=e.facet(Ft);for(let c of s)if(c.hasResult()){let d=c.result.getMatch;if(c.result.filter===!1)for(let f of c.result.options)r(new Em(f,c.source,d?d(f):[],1e9-t.length));else{let f=e.sliceDoc(c.from,c.to),p,v=o.filterStrict?new MD(f):new AD(f);for(let k of c.result.options)if(p=v.match(k.label)){let m=k.displayLabel?d?d(k,p.matched):[]:p.matched,w=p.score+(k.boost||0);if(r(new Em(k,c.source,m,w)),typeof k.section=="object"&&k.section.rank==="dynamic"){let{name:L}=k.section;n||(n=Object.create(null)),n[L]=Math.max(w,n[L]||-1e9)}}}}if(i){let c=Object.create(null),d=0,f=(p,v)=>(p.rank==="dynamic"&&v.rank==="dynamic"?n[v.name]-n[p.name]:0)||(typeof p.rank=="number"?p.rank:1e9)-(typeof v.rank=="number"?v.rank:1e9)||(p.name<v.name?-1:1);for(let p of i.sort(f))d-=1e5,c[p.name]=d;for(let p of t){let{section:v}=p.completion;v&&(p.score+=c[typeof v=="string"?v:v.name])}}let l=[],a=null,u=o.compareCompletions;for(let c of t.sort((d,f)=>f.score-d.score||u(d.completion,f.completion))){let d=c.completion;!a||a.label!=d.label||a.detail!=d.detail||a.type!=null&&d.type!=null&&a.type!=d.type||a.apply!=d.apply||a.boost!=d.boost?l.push(c):Pm(c.completion)>Pm(a)&&(l[l.length-1]=c),a=c.completion}return l}class sr{constructor(e,t,i,n,r,o){this.options=e,this.attrs=t,this.tooltip=i,this.timestamp=n,this.selected=r,this.disabled=o}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new sr(this.options,jm(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,i,n,r,o){if(n&&!o&&e.some(u=>u.isPending))return n.setDisabled();let l=jD(e,t);if(!l.length)return n&&e.some(u=>u.isPending)?n.setDisabled():null;let a=t.facet(Ft).selectOnOpen?0:-1;if(n&&n.selected!=a&&n.selected!=-1){let u=n.options[n.selected].completion;for(let c=0;c<l.length;c++)if(l[c].completion==u){a=c;break}}return new sr(l,jm(i,a),{pos:e.reduce((u,c)=>c.hasResult()?Math.min(u,c.from):u,1e8),create:ID,above:r.aboveCursor},n?n.timestamp:Date.now(),a,!1)}map(e){return new sr(this.options,this.attrs,{...this.tooltip,pos:e.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new sr(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class Ra{constructor(e,t,i){this.active=e,this.id=t,this.open=i}static start(){return new Ra(VD,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,i=t.facet(Ft),r=(i.override||t.languageDataAt("autocomplete",$n(t)).map(_D)).map(a=>(this.active.find(c=>c.source==a)||new Ls(a,this.active.some(c=>c.state!=0)?1:0)).update(e,i));r.length==this.active.length&&r.every((a,u)=>a==this.active[u])&&(r=this.active);let o=this.open,l=e.effects.some(a=>a.is(_f));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||r.some(a=>a.hasResult()&&e.changes.touchesRange(a.from,a.to))||!$D(r,this.active)||l?o=sr.build(r,t,this.id,o,i,l):o&&o.disabled&&!r.some(a=>a.isPending)&&(o=null),!o&&r.every(a=>!a.isPending)&&r.some(a=>a.hasResult())&&(r=r.map(a=>a.hasResult()?new Ls(a.source,0):a));for(let a of e.effects)a.is(db)&&(o=o&&o.setSelected(a.value,this.id));return r==this.active&&o==this.open?this:new Ra(r,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?RD:LD}}function $D(s,e){if(s==e)return!0;for(let t=0,i=0;;){for(;t<s.length&&!s[t].hasResult();)t++;for(;i<e.length&&!e[i].hasResult();)i++;let n=t==s.length,r=i==e.length;if(n||r)return n==r;if(s[t++].result!=e[i++].result)return!1}}const RD={"aria-autocomplete":"list"},LD={};function jm(s,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":s};return e>-1&&(t["aria-activedescendant"]=s+"-"+e),t}const VD=[];function ub(s,e){if(s.isUserEvent("input.complete")){let i=s.annotation(cb);if(i&&e.activateOnCompletion(i))return 12}let t=s.isUserEvent("input.type");return t&&e.activateOnTyping?5:t?1:s.isUserEvent("delete.backward")?2:s.selection?8:s.docChanged?16:0}class Ls{constructor(e,t,i=!1){this.source=e,this.state=t,this.explicit=i}hasResult(){return!1}get isPending(){return this.state==1}update(e,t){let i=ub(e,t),n=this;(i&8||i&16&&this.touches(e))&&(n=new Ls(n.source,0)),i&4&&n.state==0&&(n=new Ls(this.source,1)),n=n.updateFor(e,i);for(let r of e.effects)if(r.is($a))n=new Ls(n.source,1,r.value);else if(r.is(Ho))n=new Ls(n.source,0);else if(r.is(_f))for(let o of r.value)o.source==n.source&&(n=o);return n}updateFor(e,t){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange($n(e.state))}}class pr extends Ls{constructor(e,t,i,n,r,o){super(e,3,t),this.limit=i,this.result=n,this.from=r,this.to=o}hasResult(){return!0}updateFor(e,t){var i;if(!(t&3))return this.map(e.changes);let n=this.result;n.map&&!e.changes.empty&&(n=n.map(n,e.changes));let r=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),l=$n(e.state);if(l>o||!n||t&2&&($n(e.startState)==this.from||l<this.limit))return new Ls(this.source,t&4?1:0);let a=e.changes.mapPos(this.limit);return BD(n.validFor,e.state,r,o)?new pr(this.source,this.explicit,a,n,r,o):n.update&&(n=n.update(n,r,o,new lb(e.state,l,!1)))?new pr(this.source,this.explicit,a,n,n.from,(i=n.to)!==null&&i!==void 0?i:$n(e.state)):new Ls(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new pr(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new Ls(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function BD(s,e,t,i){if(!s)return!1;let n=e.sliceDoc(t,i);return typeof s=="function"?s(n,t,i,e):ab(s,!0).test(n)}const _f=Xe.define({map(s,e){return s.map(t=>t.map(e))}}),db=Xe.define(),bs=Yt.define({create(){return Ra.start()},update(s,e){return s.update(e)},provide:s=>[lf.from(s,e=>e.tooltip),Ee.contentAttributes.from(s,e=>e.attrs)]});function Af(s,e){const t=e.completion.apply||e.completion.label;let i=s.state.field(bs).active.find(n=>n.source==e.source);return i instanceof pr?(typeof t=="string"?s.dispatch({...CD(s.state,t,i.from,i.to),annotations:cb.of(e.completion)}):t(s,e.completion,i.from,i.to),!0):!1}const ID=OD(bs,Af);function zl(s,e="option"){return t=>{let i=t.state.field(bs,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<t.state.facet(Ft).interactionDelay)return!1;let n=1,r;e=="page"&&(r=Hv(t,i.open.tooltip))&&(n=Math.max(2,Math.floor(r.dom.offsetHeight/r.dom.querySelector("li").offsetHeight)-1));let{length:o}=i.open.options,l=i.open.selected>-1?i.open.selected+n*(s?1:-1):s?0:o-1;return l<0?l=e=="page"?0:o-1:l>=o&&(l=e=="page"?o-1:0),t.dispatch({effects:db.of(l)}),!0}}const ND=s=>{let e=s.state.field(bs,!1);return s.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<s.state.facet(Ft).interactionDelay?!1:Af(s,e.open.options[e.open.selected])},su=s=>s.state.field(bs,!1)?(s.dispatch({effects:$a.of(!0)}),!0):!1,FD=s=>{let e=s.state.field(bs,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(s.dispatch({effects:Ho.of(null)}),!0)};class zD{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const UD=50,HD=1e3,WD=Pt.fromClass(class{constructor(s){this.view=s,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of s.state.field(bs).active)e.isPending&&this.startQuery(e)}update(s){let e=s.state.field(bs),t=s.state.facet(Ft);if(!s.selectionSet&&!s.docChanged&&s.startState.field(bs)==e)return;let i=s.transactions.some(r=>{let o=ub(r,t);return o&8||(r.selection||r.docChanged)&&!(o&3)});for(let r=0;r<this.running.length;r++){let o=this.running[r];if(i||o.context.abortOnDocChange&&s.docChanged||o.updates.length+s.transactions.length>UD&&Date.now()-o.time>HD){for(let l of o.context.abortListeners)try{l()}catch(a){ks(this.view.state,a)}o.context.abortListeners=null,this.running.splice(r--,1)}else o.updates.push(...s.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),s.transactions.some(r=>r.effects.some(o=>o.is($a)))&&(this.pendingStart=!0);let n=this.pendingStart?50:t.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(r=>r.isPending&&!this.running.some(o=>o.active.source==r.source))?setTimeout(()=>this.startUpdate(),n):-1,this.composing!=0)for(let r of s.transactions)r.isUserEvent("input.type")?this.composing=2:this.composing==2&&r.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:s}=this.view,e=s.field(bs);for(let t of e.active)t.isPending&&!this.running.some(i=>i.active.source==t.source)&&this.startQuery(t);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Ft).updateSyncTime))}startQuery(s){let{state:e}=this.view,t=$n(e),i=new lb(e,t,s.explicit,this.view),n=new zD(s,i);this.running.push(n),Promise.resolve(s.source(i)).then(r=>{n.context.aborted||(n.done=r||null,this.scheduleAccept())},r=>{this.view.dispatch({effects:Ho.of(null)}),ks(this.view.state,r)})}scheduleAccept(){this.running.every(s=>s.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Ft).updateSyncTime))}accept(){var s;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(Ft),i=this.view.state.field(bs);for(let n=0;n<this.running.length;n++){let r=this.running[n];if(r.done===void 0)continue;if(this.running.splice(n--,1),r.done){let l=$n(r.updates.length?r.updates[0].startState:this.view.state),a=Math.min(l,r.done.from+(r.active.explicit?0:1)),u=new pr(r.active.source,r.active.explicit,a,r.done,r.done.from,(s=r.done.to)!==null&&s!==void 0?s:l);for(let c of r.updates)u=u.update(c,t);if(u.hasResult()){e.push(u);continue}}let o=i.active.find(l=>l.source==r.active.source);if(o&&o.isPending)if(r.done==null){let l=new Ls(r.active.source,0);for(let a of r.updates)l=l.update(a,t);l.isPending||e.push(l)}else this.startQuery(o)}(e.length||i.open&&i.open.disabled)&&this.view.dispatch({effects:_f.of(e)})}},{eventHandlers:{blur(s){let e=this.view.state.field(bs,!1);if(e&&e.tooltip&&this.view.state.facet(Ft).closeOnBlur){let t=e.open&&Hv(this.view,e.open.tooltip);(!t||!t.dom.contains(s.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:Ho.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:$a.of(!1)}),20),this.composing=0}}}),KD=typeof navigator=="object"&&/Win/.test(navigator.platform),qD=Un.highest(Ee.domEventHandlers({keydown(s,e){let t=e.state.field(bs,!1);if(!t||!t.open||t.open.disabled||t.open.selected<0||s.key.length>1||s.ctrlKey&&!(KD&&s.altKey)||s.metaKey)return!1;let i=t.open.options[t.open.selected],n=t.active.find(o=>o.source==i.source),r=i.completion.commitCharacters||n.result.commitCharacters;return r&&r.indexOf(s.key)>-1&&Af(e,i),!1}})),GD=Ee.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),Wo={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},On=Xe.define({map(s,e){let t=e.mapPos(s,-1,hs.TrackAfter);return t??void 0}}),Mf=new class extends Ln{};Mf.startSide=1;Mf.endSide=-1;const fb=Yt.define({create(){return it.empty},update(s,e){if(s=s.map(e.changes),e.selection){let t=e.state.doc.lineAt(e.selection.main.head);s=s.update({filter:i=>i>=t.from&&i<=t.to})}for(let t of e.effects)t.is(On)&&(s=s.update({add:[Mf.range(t.value,t.value+1)]}));return s}});function JD(){return[QD,fb]}const iu="()[]{}<>";function hb(s){for(let e=0;e<iu.length;e+=2)if(iu.charCodeAt(e)==s)return iu.charAt(e+1);return Wd(s<128?s:s+1)}function pb(s,e){return s.languageDataAt("closeBrackets",e)[0]||Wo}const YD=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),QD=Ee.inputHandler.of((s,e,t,i)=>{if((YD?s.composing:s.compositionStarted)||s.state.readOnly)return!1;let n=s.state.selection.main;if(i.length>2||i.length==2&&hi(ys(i,0))==1||e!=n.from||t!=n.to)return!1;let r=e8(s.state,i);return r?(s.dispatch(r),!0):!1}),XD=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let i=pb(s,s.selection.main.head).brackets||Wo.brackets,n=null,r=s.changeByRange(o=>{if(o.empty){let l=t8(s.doc,o.head);for(let a of i)if(a==l&&hc(s.doc,o.head)==hb(ys(a,0)))return{changes:{from:o.head-a.length,to:o.head+a.length},range:ue.cursor(o.head-a.length)}}return{range:n=o}});return n||e(s.update(r,{scrollIntoView:!0,userEvent:"delete.backward"})),!n},ZD=[{key:"Backspace",run:XD}];function e8(s,e){let t=pb(s,s.selection.main.head),i=t.brackets||Wo.brackets;for(let n of i){let r=hb(ys(n,0));if(e==n)return r==n?n8(s,n,i.indexOf(n+n+n)>-1,t):s8(s,n,r,t.before||Wo.before);if(e==r&&mb(s,s.selection.main.from))return i8(s,n,r)}return null}function mb(s,e){let t=!1;return s.field(fb).between(0,s.doc.length,i=>{i==e&&(t=!0)}),t}function hc(s,e){let t=s.sliceString(e,e+2);return t.slice(0,hi(ys(t,0)))}function t8(s,e){let t=s.sliceString(e-2,e);return hi(ys(t,0))==t.length?t:t.slice(1)}function s8(s,e,t,i){let n=null,r=s.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:t,from:o.to}],effects:On.of(o.to+e.length),range:ue.range(o.anchor+e.length,o.head+e.length)};let l=hc(s.doc,o.head);return!l||/\s/.test(l)||i.indexOf(l)>-1?{changes:{insert:e+t,from:o.head},effects:On.of(o.head+e.length),range:ue.cursor(o.head+e.length)}:{range:n=o}});return n?null:s.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function i8(s,e,t){let i=null,n=s.changeByRange(r=>r.empty&&hc(s.doc,r.head)==t?{changes:{from:r.head,to:r.head+t.length,insert:t},range:ue.cursor(r.head+t.length)}:i={range:r});return i?null:s.update(n,{scrollIntoView:!0,userEvent:"input.type"})}function n8(s,e,t,i){let n=i.stringPrefixes||Wo.stringPrefixes,r=null,o=s.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:e,from:l.to}],effects:On.of(l.to+e.length),range:ue.range(l.anchor+e.length,l.head+e.length)};let a=l.head,u=hc(s.doc,a),c;if(u==e){if($m(s,a))return{changes:{insert:e+e,from:a},effects:On.of(a+e.length),range:ue.cursor(a+e.length)};if(mb(s,a)){let f=t&&s.sliceDoc(a,a+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:a,to:a+f.length,insert:f},range:ue.cursor(a+f.length)}}}else{if(t&&s.sliceDoc(a-2*e.length,a)==e+e&&(c=Rm(s,a-2*e.length,n))>-1&&$m(s,c))return{changes:{insert:e+e+e+e,from:a},effects:On.of(a+e.length),range:ue.cursor(a+e.length)};if(s.charCategorizer(a)(u)!=Ct.Word&&Rm(s,a,n)>-1&&!r8(s,a,e,n))return{changes:{insert:e+e,from:a},effects:On.of(a+e.length),range:ue.cursor(a+e.length)}}return{range:r=l}});return r?null:s.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function $m(s,e){let t=ns(s).resolveInner(e+1);return t.parent&&t.from==e}function r8(s,e,t,i){let n=ns(s).resolveInner(e,-1),r=i.reduce((o,l)=>Math.max(o,l.length),0);for(let o=0;o<5;o++){let l=s.sliceDoc(n.from,Math.min(n.to,n.from+t.length+r)),a=l.indexOf(t);if(!a||a>-1&&i.indexOf(l.slice(0,a))>-1){let c=n.firstChild;for(;c&&c.from==n.from&&c.to-c.from>t.length+a;){if(s.sliceDoc(c.to-t.length,c.to)==t)return!1;c=c.firstChild}return!0}let u=n.to==e&&n.parent;if(!u)break;n=u}return!1}function Rm(s,e,t){let i=s.charCategorizer(e);if(i(s.sliceDoc(e-1,e))!=Ct.Word)return e;for(let n of t){let r=e-n.length;if(s.sliceDoc(r,e)==n&&i(s.sliceDoc(r-1,r))!=Ct.Word)return r}return-1}function o8(s={}){return[qD,bs,Ft.of(s),WD,l8,GD]}const gb=[{key:"Ctrl-Space",run:su},{mac:"Alt-`",run:su},{mac:"Alt-i",run:su},{key:"Escape",run:FD},{key:"ArrowDown",run:zl(!0)},{key:"ArrowUp",run:zl(!1)},{key:"PageDown",run:zl(!0,"page")},{key:"PageUp",run:zl(!1,"page")},{key:"Enter",run:ND}],l8=Un.highest(rf.computeN([Ft],s=>s.facet(Ft).defaultKeymap?[gb]:[]));class Lm{constructor(e,t,i){this.from=e,this.to=t,this.diagnostic=i}}class Mn{constructor(e,t,i){this.diagnostics=e,this.panel=t,this.selected=i}static init(e,t,i){let n=i.facet(Ko).markerFilter;n&&(e=n(e,i));let r=e.slice().sort((p,v)=>p.from-v.from||p.to-v.to),o=new $i,l=[],a=0,u=i.doc.iter(),c=0,d=i.doc.length;for(let p=0;;){let v=p==r.length?null:r[p];if(!v&&!l.length)break;let k,m;if(l.length)k=a,m=l.reduce((I,H)=>Math.min(I,H.to),v&&v.from>k?v.from:1e8);else{if(k=v.from,k>d)break;m=v.to,l.push(v),p++}for(;p<r.length;){let I=r[p];if(I.from==k&&(I.to>I.from||I.to==k))l.push(I),p++,m=Math.min(I.to,m);else{m=Math.min(I.from,m);break}}m=Math.min(m,d);let w=!1;if(l.some(I=>I.from==k&&(I.to==m||m==d))&&(w=k==m,!w&&m-k<10)){let I=k-(c+u.value.length);I>0&&(u.next(I),c=k);for(let H=k;;){if(H>=m){w=!0;break}if(!u.lineBreak&&c+u.value.length>H)break;H=c+u.value.length,c+=u.value.length,u.next()}}let L=k8(l);if(w)o.add(k,k,Fe.widget({widget:new g8(L),diagnostics:l.slice()}));else{let I=l.reduce((H,N)=>N.markClass?H+" "+N.markClass:H,"");o.add(k,m,Fe.mark({class:"cm-lintRange cm-lintRange-"+L+I,diagnostics:l.slice(),inclusiveEnd:l.some(H=>H.to>m)}))}if(a=m,a==d)break;for(let I=0;I<l.length;I++)l[I].to<=a&&l.splice(I--,1)}let f=o.finish();return new Mn(f,t,Ar(f))}}function Ar(s,e=null,t=0){let i=null;return s.between(t,1e9,(n,r,{spec:o})=>{if(!(e&&o.diagnostics.indexOf(e)<0))if(!i)i=new Lm(n,r,e||o.diagnostics[0]);else{if(o.diagnostics.indexOf(i.diagnostic)<0)return!1;i=new Lm(i.from,r,i.diagnostic)}}),i}function a8(s,e){let t=e.pos,i=e.end||t,n=s.state.facet(Ko).hideOn(s,t,i);if(n!=null)return n;let r=s.startState.doc.lineAt(e.pos);return!!(s.effects.some(o=>o.is(vb))||s.changes.touchesRange(r.from,Math.max(r.to,i)))}function c8(s,e){return s.field(Es,!1)?e:e.concat(Xe.appendConfig.of(x8))}const vb=Xe.define(),Df=Xe.define(),yb=Xe.define(),Es=Yt.define({create(){return new Mn(Fe.none,null,null)},update(s,e){if(e.docChanged&&s.diagnostics.size){let t=s.diagnostics.map(e.changes),i=null,n=s.panel;if(s.selected){let r=e.changes.mapPos(s.selected.from,1);i=Ar(t,s.selected.diagnostic,r)||Ar(t,null,r)}!t.size&&n&&e.state.facet(Ko).autoPanel&&(n=null),s=new Mn(t,n,i)}for(let t of e.effects)if(t.is(vb)){let i=e.state.facet(Ko).autoPanel?t.value.length?qo.open:null:s.panel;s=Mn.init(t.value,i,e.state)}else t.is(Df)?s=new Mn(s.diagnostics,t.value?qo.open:null,s.selected):t.is(yb)&&(s=new Mn(s.diagnostics,s.panel,t.value));return s},provide:s=>[Bo.from(s,e=>e.panel),Ee.decorations.from(s,e=>e.diagnostics)]}),u8=Fe.mark({class:"cm-lintRange cm-lintRange-active"});function d8(s,e,t){let{diagnostics:i}=s.state.field(Es),n,r=-1,o=-1;i.between(e-(t<0?1:0),e+(t>0?1:0),(a,u,{spec:c})=>{if(e>=a&&e<=u&&(a==u||(e>a||t>0)&&(e<u||t<0)))return n=c.diagnostics,r=a,o=u,!1});let l=s.state.facet(Ko).tooltipFilter;return n&&l&&(n=l(n,s.state)),n?{pos:r,end:o,above:s.state.doc.lineAt(r).to<o,create(){return{dom:f8(s,n)}}}:null}function f8(s,e){return gt("ul",{class:"cm-tooltip-lint"},e.map(t=>kb(s,t,!1)))}const h8=s=>{let e=s.state.field(Es,!1);(!e||!e.panel)&&s.dispatch({effects:c8(s.state,[Df.of(!0)])});let t=Vo(s,qo.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},Vm=s=>{let e=s.state.field(Es,!1);return!e||!e.panel?!1:(s.dispatch({effects:Df.of(!1)}),!0)},p8=s=>{let e=s.state.field(Es,!1);if(!e)return!1;let t=s.state.selection.main,i=e.diagnostics.iter(t.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==t.from&&i.to==t.to)?!1:(s.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},m8=[{key:"Mod-Shift-m",run:h8,preventDefault:!0},{key:"F8",run:p8}],Ko=Te.define({combine(s){return{sources:s.map(e=>e.source).filter(e=>e!=null),...ki(s.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:Bm,tooltipFilter:Bm,needsRefresh:(e,t)=>e?t?i=>e(i)||t(i):e:t,hideOn:(e,t)=>e?t?(i,n,r)=>e(i,n,r)||t(i,n,r):e:t,autoPanel:(e,t)=>e||t})}}});function Bm(s,e){return s?e?(t,i)=>e(s(t,i),i):s:e}function bb(s){let e=[];if(s)e:for(let{name:t}of s){for(let i=0;i<t.length;i++){let n=t[i];if(/[a-zA-Z]/.test(n)&&!e.some(r=>r.toLowerCase()==n.toLowerCase())){e.push(n);continue e}}e.push("")}return e}function kb(s,e,t){var i;let n=t?bb(e.actions):[];return gt("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},gt("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(s):e.message),(i=e.actions)===null||i===void 0?void 0:i.map((r,o)=>{let l=!1,a=p=>{if(p.preventDefault(),l)return;l=!0;let v=Ar(s.state.field(Es).diagnostics,e);v&&r.apply(s,v.from,v.to)},{name:u}=r,c=n[o]?u.indexOf(n[o]):-1,d=c<0?u:[u.slice(0,c),gt("u",u.slice(c,c+1)),u.slice(c+1)],f=r.markClass?" "+r.markClass:"";return gt("button",{type:"button",class:"cm-diagnosticAction"+f,onclick:a,onmousedown:a,"aria-label":` Action: ${u}${c<0?"":` (access key "${n[o]})"`}.`},d)}),e.source&&gt("div",{class:"cm-diagnosticSource"},e.source))}class g8 extends fn{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return gt("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class Im{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=kb(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class qo{constructor(e){this.view=e,this.items=[];let t=n=>{if(n.keyCode==27)Vm(this.view),this.view.focus();else if(n.keyCode==38||n.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(n.keyCode==40||n.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(n.keyCode==36)this.moveSelection(0);else if(n.keyCode==35)this.moveSelection(this.items.length-1);else if(n.keyCode==13)this.view.focus();else if(n.keyCode>=65&&n.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:r}=this.items[this.selectedIndex],o=bb(r.actions);for(let l=0;l<o.length;l++)if(o[l].toUpperCase().charCodeAt(0)==n.keyCode){let a=Ar(this.view.state.field(Es).diagnostics,r);a&&r.actions[l].apply(e,a.from,a.to)}}else return;n.preventDefault()},i=n=>{for(let r=0;r<this.items.length;r++)this.items[r].dom.contains(n.target)&&this.moveSelection(r)};this.list=gt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:i}),this.dom=gt("div",{class:"cm-panel-lint"},this.list,gt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>Vm(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(Es).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(Es),i=0,n=!1,r=null,o=new Set;for(e.between(0,this.view.state.doc.length,(l,a,{spec:u})=>{for(let c of u.diagnostics){if(o.has(c))continue;o.add(c);let d=-1,f;for(let p=i;p<this.items.length;p++)if(this.items[p].diagnostic==c){d=p;break}d<0?(f=new Im(this.view,c),this.items.splice(i,0,f),n=!0):(f=this.items[d],d>i&&(this.items.splice(i,d-i),n=!0)),t&&f.diagnostic==t.diagnostic?f.dom.hasAttribute("aria-selected")||(f.dom.setAttribute("aria-selected","true"),r=f):f.dom.hasAttribute("aria-selected")&&f.dom.removeAttribute("aria-selected"),i++}});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)n=!0,this.items.pop();this.items.length==0&&(this.items.push(new Im(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),n=!0),r?(this.list.setAttribute("aria-activedescendant",r.id),this.view.requestMeasure({key:this,read:()=>({sel:r.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:l,panel:a})=>{let u=a.height/this.list.offsetHeight;l.top<a.top?this.list.scrollTop-=(a.top-l.top)/u:l.bottom>a.bottom&&(this.list.scrollTop+=(l.bottom-a.bottom)/u)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),n&&this.sync()}sync(){let e=this.list.firstChild;function t(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)t();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(Es),i=Ar(t.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:yb.of(i)})}static open(e){return new qo(e)}}function v8(s,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(s)}</svg>')`}function Ul(s){return v8(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${s}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const y8=Ee.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Ul("#d11")},".cm-lintRange-warning":{backgroundImage:Ul("orange")},".cm-lintRange-info":{backgroundImage:Ul("#999")},".cm-lintRange-hint":{backgroundImage:Ul("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function b8(s){return s=="error"?4:s=="warning"?3:s=="info"?2:1}function k8(s){let e="hint",t=1;for(let i of s){let n=b8(i.severity);n>t&&(t=n,e=i.severity)}return e}const x8=[Es,Ee.decorations.compute([Es],s=>{let{selected:e,panel:t}=s.field(Es);return!e||!t||e.from==e.to?Fe.none:Fe.set([u8.range(e.from,e.to)])}),l3(d8,{hideOn:a8}),y8],w8=[y3(),x3(),B5(),UA(),fA(),M5(),P5(),st.allowMultipleSelections.of(!0),X3(),dy(gA,{fallback:!0}),SA(),JD(),o8(),Y5(),Z5(),H5(),ZM(),rf.of([...ZD,...qM,...yD,...XA,...aA,...gb,...m8])],S8={class:"rounded-lg border border-gray-300 overflow-hidden dark:border-gray-600"},xb={__name:"CodeEditor",props:{modelValue:{type:String,default:""},language:{type:String,default:"r",validator:s=>["r","markdown","text","gitignore"].includes(s)},minHeight:{type:String,default:"400px"},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:""}},emits:["update:modelValue"],setup(s,{emit:e}){const t=s,i=e,n=ie(null);let r=null;const o=mf.define({token(u){return u.sol()&&u.match(/^#/)?(u.skipToEnd(),"comment"):(u.skipToEnd(),null)}}),l=dy(sl.define([{tag:Me.comment,color:"#16a34a"}])),a=()=>[o,l];return is(()=>{if(!n.value)return;const u=Ee.updateListener.of(f=>{f.docChanged&&i("update:modelValue",f.state.doc.toString())}),c=[w8,a(),u,Ee.lineWrapping,Ee.theme({"&":{minHeight:t.minHeight,fontSize:"13px",fontFamily:'ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, "Liberation Mono", monospace'},".cm-scroller":{fontFamily:'ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, "Liberation Mono", monospace'},".cm-content":{padding:"12px 0"},".cm-line":{padding:"0 12px"}})],d=st.create({doc:t.modelValue||"",extensions:c});r=new Ee({state:d,parent:n.value})}),Re(()=>t.modelValue,u=>{r&&u!==r.state.doc.toString()&&r.dispatch({changes:{from:0,to:r.state.doc.length,insert:u}})}),(u,c)=>(g(),b("div",S8,[h("div",{ref_key:"editorRef",ref:n},null,512)]))}},C8={class:"relative"},_8={key:0,class:"absolute z-10 mt-1 w-full max-h-64 overflow-y-auto border border-gray-200 dark:border-gray-700 rounded-md bg-white dark:bg-gray-800 shadow-lg"},A8=["onClick","onMouseenter"],M8={class:"flex items-center justify-between gap-3"},D8={class:"flex-1 min-w-0"},E8={class:"font-medium text-gray-900 dark:text-white"},T8={class:"text-xs text-gray-500 dark:text-gray-400 truncate"},O8={class:"ml-3 text-xs text-gray-400 dark:text-gray-500 shrink-0 flex items-center gap-1.5"},P8={class:"text-[10px] font-medium"},j8={key:1,class:"absolute right-3 top-9 text-gray-400"},wb={__name:"PackageAutocomplete",props:{modelValue:{type:String,default:""},label:{type:String,default:"Search Packages"},placeholder:{type:String,default:"Type to search..."},source:{type:String,default:"cran",validator:s=>["cran","bioconductor","github"].includes(s)}},emits:["update:modelValue","select"],setup(s,{emit:e}){const t=s,i=e,n=z({get:()=>t.modelValue,set:f=>i("update:modelValue",f)}),r=ie([]),o=ie(!1),l=ie(-1);let a=null;Re(n,f=>{if(a&&clearTimeout(a),f.length<2){r.value=[],l.value=-1;return}a=setTimeout(()=>{u(f)},300)});const u=async f=>{o.value=!0;try{const v=await(await fetch(`/api/packages/search?q=${encodeURIComponent(f)}&source=${encodeURIComponent(t.source)}`)).json();r.value=v.packages||[],l.value=r.value.length>0?0:-1}catch(p){console.error("Failed to search packages:",p),r.value=[],l.value=-1}finally{o.value=!1}},c=f=>{r.value.length!==0&&(f.key==="ArrowDown"?(f.preventDefault(),l.value=Math.min(l.value+1,r.value.length-1)):f.key==="ArrowUp"?(f.preventDefault(),l.value=Math.max(l.value-1,0)):f.key==="Enter"&&l.value>=0?(f.preventDefault(),d(r.value[l.value])):f.key==="Escape"&&(r.value=[],l.value=-1))},d=f=>{i("update:modelValue",f.name),i("select",f),r.value=[],l.value=-1};return(f,p)=>(g(),b("div",C8,[A(Ae,{modelValue:n.value,"onUpdate:modelValue":p[0]||(p[0]=v=>n.value=v),label:s.label,placeholder:s.placeholder,onKeydown:c},null,8,["modelValue","label","placeholder"]),r.value.length>0?(g(),b("div",_8,[(g(!0),b(ye,null,$e(r.value,(v,k)=>(g(),b("button",{key:v.name,onClick:m=>d(v),onMouseenter:m=>l.value=k,class:xe(["w-full px-3 py-2 text-left border-b border-gray-200 dark:border-gray-700 last:border-b-0 transition",l.value===k?"bg-sky-50 dark:bg-sky-900/20":"hover:bg-gray-50 dark:hover:bg-gray-700"])},[h("div",M8,[h("div",D8,[h("div",E8,X(v.name),1),h("div",T8,X(v.title),1)]),h("div",O8,[h("span",P8,X(v.source==="cran"?"CRAN":v.source==="bioconductor"?"Bioconductor":v.source),1),p[1]||(p[1]=h("span",null,"",-1)),h("span",null,"v"+X(v.version),1)])])],42,A8))),128))])):G("",!0),o.value?(g(),b("div",j8,[...p[2]||(p[2]=[h("svg",{class:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[h("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),h("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):G("",!0)]))}},$8={class:"flex items-center justify-between"},R8={class:"flex-1"},L8={class:"text-xs text-gray-500 dark:text-gray-400 mb-1"},V8={class:"text-sm text-gray-900 dark:text-white"},B8={__name:"OverviewCard",props:{title:{type:String,required:!0}},emits:["click"],setup(s){return(e,t)=>(g(),b("button",{onClick:t[0]||(t[0]=i=>e.$emit("click")),class:"w-full text-left px-4 py-3 rounded-md bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 hover:border-sky-300 dark:hover:border-sky-700 transition"},[h("div",$8,[h("div",R8,[h("div",L8,X(s.title),1),h("div",V8,[dt(e.$slots,"default")])]),t[1]||(t[1]=h("svg",{class:"h-5 w-5 text-gray-400 shrink-0 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))])]))}},I8={class:"space-y-3"},N8=["innerHTML"],Ef={__name:"OverviewSummary",props:{cards:{type:Array,required:!0}},emits:["navigate"],setup(s){return(e,t)=>(g(),b("div",I8,[(g(!0),b(ye,null,$e(s.cards,i=>(g(),_e(B8,{key:i.id,title:i.title,onClick:n=>e.$emit("navigate",i.section)},{default:Z(()=>[typeof i.content=="object"?(g(),_e(ws(i.content),{key:0})):(g(),b("span",{key:1,innerHTML:i.content},null,8,N8))]),_:2},1032,["title","onClick"]))),128))]))}},F8={class:"pt-4 pb-2"},z8={class:"px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider dark:text-gray-400"},La={__name:"NavigationSectionHeading",setup(s){return(e,t)=>(g(),b("div",F8,[h("h3",z8,[dt(e.$slots,"default")])]))}},U8={class:"rounded-lg bg-gray-50 dark:bg-gray-800/50"},H8={class:"space-y-5"},Tf={__name:"AuthorInformationPanel",props:{modelValue:{type:Object,required:!0,validator:s=>typeof s.name=="string"&&typeof s.email=="string"&&typeof s.affiliation=="string"}},emits:["update:modelValue"],setup(s,{emit:e}){const t=s,i=e,n=ie({name:t.modelValue.name??"",email:t.modelValue.email??"",affiliation:t.modelValue.affiliation??""});Re(()=>t.modelValue,u=>{n.value={name:u.name??"",email:u.email??"",affiliation:u.affiliation??""}},{deep:!0});const r=()=>{i("update:modelValue",{...n.value})},o=u=>{n.value.name=u,r()},l=u=>{n.value.email=u,r()},a=u=>{n.value.affiliation=u,r()};return(u,c)=>(g(),b("div",U8,[c[0]||(c[0]=h("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-2"}," Author Information ",-1)),c[1]||(c[1]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-5"}," Used as defaults when creating notebook author settings and similar tasks. ",-1)),h("div",H8,[A(Ae,{"model-value":n.value.name,"onUpdate:modelValue":o,label:"Your Name",placeholder:"Your Name"},null,8,["model-value"]),A(Ae,{"model-value":n.value.email,"onUpdate:modelValue":l,type:"email",label:"Email",placeholder:"your.email@example.com"},null,8,["model-value"]),A(Ae,{"model-value":n.value.affiliation,"onUpdate:modelValue":a,label:"Affiliation",placeholder:"Organization"},null,8,["model-value"])])]))}},W8={class:"space-y-6"},K8={key:0,class:"space-y-3"},q8={class:"flex flex-col gap-3"},G8={class:"grid gap-3 grid-cols-[1fr_160px]"},J8={class:"flex items-center justify-between"},Y8={key:1,class:"text-xs text-gray-500 dark:text-gray-400 mb-4"},Q8={class:"mt-4"},Sb={__name:"PackagesEditor",props:{modelValue:{type:Object,required:!0},showRenvToggle:{type:Boolean,default:!0},flush:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(s,{emit:e}){const t=s,i=z(()=>t.flush?"":"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"),n=z(()=>t.flush?"":"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"),r=e,o=ie({use_renv:t.modelValue.use_renv??!1,default_packages:t.modelValue.default_packages??[]});Re(()=>t.modelValue,v=>{o.value={use_renv:v.use_renv??!1,default_packages:v.default_packages??[]}},{deep:!0});const l=()=>{r("update:modelValue",{...o.value})},a=v=>{o.value.use_renv=v,l()},u=(v,k)=>{o.value.default_packages[v].name=k,l()},c=(v,k)=>{o.value.default_packages[v].source=k,l()},d=(v,k)=>{o.value.default_packages[v].auto_attach=k,l()},f=()=>{o.value.default_packages.push({name:"",source:"cran",auto_attach:!0}),l()},p=v=>{o.value.default_packages.splice(v,1),l()};return(v,k)=>(g(),b("div",W8,[s.showRenvToggle?(g(),b("div",{key:0,class:xe(i.value)},[A(tt,{"model-value":o.value.use_renv,"onUpdate:modelValue":a,label:"Enable renv",description:"Create renv environments for new projects."},null,8,["model-value"])],2)):G("",!0),h("div",{class:xe(n.value)},[k[3]||(k[3]=h("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-2"}," Default packages ",-1)),k[4]||(k[4]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Installed (and optionally attached) when scaffold() runs. ",-1)),k[5]||(k[5]=h("p",{class:"text-xs text-gray-600 dark:text-gray-400 mb-4"}," Use this list to preseed notebooks with your preferred helpers. ",-1)),o.value.default_packages&&o.value.default_packages.length?(g(),b("div",K8,[(g(!0),b(ye,null,$e(o.value.default_packages,(m,w)=>(g(),b("div",{key:`pkg-${w}`,class:"rounded-md border border-gray-200 p-4 dark:border-gray-700"},[h("div",q8,[h("div",G8,[m.source==="cran"||m.source==="bioconductor"?(g(),_e(wb,{key:0,"model-value":m.name,"onUpdate:modelValue":L=>u(w,L),source:m.source,label:"Package",placeholder:m.source==="cran"?"Search CRAN...":"Search Bioconductor...",onSelect:L=>u(w,L.name)},null,8,["model-value","onUpdate:modelValue","source","placeholder","onSelect"])):(g(),_e(Ae,{key:1,"model-value":m.name,"onUpdate:modelValue":L=>u(w,L),label:"Package",placeholder:"user/repo"},null,8,["model-value","onUpdate:modelValue"])),A(Qs,{"model-value":m.source,"onUpdate:modelValue":L=>c(w,L),label:"Source"},{default:Z(()=>[...k[0]||(k[0]=[h("option",{value:"cran"},"CRAN",-1),h("option",{value:"github"},"GitHub",-1),h("option",{value:"bioconductor"},"Bioconductor",-1)])]),_:1},8,["model-value","onUpdate:modelValue"])]),h("div",J8,[A(tt,{"model-value":m.auto_attach,"onUpdate:modelValue":L=>d(w,L),label:"Auto-Attach",description:"Call library() when scaffold() runs."},null,8,["model-value","onUpdate:modelValue"]),A(Ke,{size:"sm",variant:"secondary",onClick:L=>p(w)},{default:Z(()=>[...k[1]||(k[1]=[de("Remove",-1)])]),_:1},8,["onClick"])])])]))),128))])):(g(),b("p",Y8," No packages configured. Add packages to include tidyverse helpers or internal utilities automatically. ")),h("div",Q8,[A(Ke,{size:"sm",variant:"secondary",onClick:f},{default:Z(()=>[...k[2]||(k[2]=[de("Add Package",-1)])]),_:1})])],2)]))}},X8={class:"space-y-6"},Z8={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},eE={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},tE={class:"space-y-2"},sE={key:0,class:"pt-6 border-t border-gray-200 dark:border-gray-700"},iE={class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},nE={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-2"},Cb={__name:"AIAssistantsPanel",props:{modelValue:{type:Object,required:!0},flush:{type:Boolean,default:!1},showEditor:{type:Boolean,default:!0},editorHeight:{type:String,default:"500px"},editorDisabled:{type:Boolean,default:!1},editorLoading:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(s,{emit:e}){const t=s,i=e,n=ie(Math.random().toString(36).substring(7)),r=[{id:"claude",label:"Claude Code",description:"Anthropic's IDE-focused assistant."},{id:"copilot",label:"GitHub Copilot",description:"Complements VS Code and JetBrains editors."},{id:"agents",label:"Multi-Agent (OpenAI Codex, Cursor, etc.)",description:"Shared instructions for multi-model orchestrators."}],o=()=>({enabled:t.modelValue?.enabled??!1,canonical_file:t.modelValue?.canonical_file??"CLAUDE.md",assistants:Array.isArray(t.modelValue?.assistants)?t.modelValue.assistants:[],canonical_content:t.modelValue?.canonical_content??""}),l=z(()=>t.flush?"space-y-6":"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 space-y-6"),a=z(o),u=d=>{const f=o(),p=d.assistants!==void 0?d.assistants:f.assistants;i("update:modelValue",{...f,...d,assistants:p})},c=(d,f)=>{const p=[...a.value.assistants];if(f)p.includes(d)||p.push(d);else{const v=p.indexOf(d);v!==-1&&p.splice(v,1)}u({assistants:p})};return(d,f)=>(g(),b("div",{class:xe(l.value)},[h("div",X8,[h("div",null,[A(tt,{"model-value":a.value.enabled,label:"Enable AI Support",description:"Generate and sync assistant-specific context files.","onUpdate:modelValue":f[0]||(f[0]=p=>u({enabled:p}))},null,8,["model-value"])]),a.value.enabled?(g(),b(ye,{key:0},[h("div",Z8,[f[4]||(f[4]=h("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Canonical context file",-1)),f[5]||(f[5]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," This file is the source of truth; other instructions files are synced to it when AI hooks run. ",-1)),A(Qs,{"model-value":a.value.canonical_file,label:"Canonical Context File","onUpdate:modelValue":f[1]||(f[1]=p=>u({canonical_file:p}))},{default:Z(()=>[...f[3]||(f[3]=[h("option",{value:"AGENTS.md"},"AGENTS.md (multi-agent orchestrator)",-1),h("option",{value:"CLAUDE.md"},"CLAUDE.md",-1),h("option",{value:".github/copilot-instructions.md"},".github/copilot-instructions.md",-1)])]),_:1},8,["model-value"])]),h("div",eE,[f[6]||(f[6]=h("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Assistants",-1)),f[7]||(f[7]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Choose which assistants receive context updates. ",-1)),h("div",tE,[(g(),b(ye,null,$e(r,p=>A(Ji,{key:p.id,id:`ai-${p.id}-${n.value}`,"model-value":a.value.assistants.includes(p.id),"onUpdate:modelValue":v=>c(p.id,v),description:p.description},{default:Z(()=>[de(X(p.label),1)]),_:2},1032,["id","model-value","onUpdate:modelValue","description"])),64))])]),s.showEditor?(g(),b("div",sE,[f[9]||(f[9]=h("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Canonical instructions",-1)),h("p",iE,[dt(d.$slots,"editor-description",{},()=>[f[8]||(f[8]=de(" Edit the canonical file directly. Framework mirrors this content to other assistant files. ",-1))])]),dt(d.$slots,"editor-alert"),A(xb,{"model-value":a.value.canonical_content,language:"markdown","min-height":s.editorHeight,disabled:s.editorDisabled,"onUpdate:modelValue":f[2]||(f[2]=p=>u({canonical_content:p}))},null,8,["model-value","min-height","disabled"]),dt(d.$slots,"editor-actions"),s.editorLoading?(g(),b("p",nE," Loading "+X(a.value.canonical_file)+" ",1)):G("",!0)])):G("",!0)],64)):G("",!0)])],2))}},rE={class:"space-y-3"},oE={class:"grid gap-4 sm:grid-cols-2"},lE={class:"space-y-3"},aE={class:"space-y-4"},cE={class:"text-xs text-gray-500 dark:text-gray-400"},Of={__name:"GitHooksPanel",props:{modelValue:{type:Object,required:!0},flush:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(s,{emit:e}){const t=s,i=e,n=()=>({initialize:t.modelValue?.initialize??!0,user_name:t.modelValue?.user_name??"",user_email:t.modelValue?.user_email??"",hooks:{ai_sync:t.modelValue?.hooks?.ai_sync??!1,data_security:t.modelValue?.hooks?.data_security??!1,check_sensitive_dirs:t.modelValue?.hooks?.check_sensitive_dirs??!1}}),r=z(()=>t.flush?"space-y-6":"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 space-y-6"),o=z(n),l=u=>{const c=n(),d={...c.hooks,...u?.hooks||{}};i("update:modelValue",{...c,...u,hooks:d})},a=(u,c)=>{l({hooks:{[u]:c}})};return(u,c)=>(g(),b("div",{class:xe(r.value)},[A(tt,{"model-value":o.value.initialize,label:"Initialize Git",description:"Run git init for every new project.","onUpdate:modelValue":c[0]||(c[0]=d=>l({initialize:d}))},null,8,["model-value"]),h("div",rE,[c[6]||(c[6]=h("div",null,[h("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"Git identity"),h("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Overrides Author Information when provided. ")],-1)),h("div",oE,[A(Ae,{"model-value":o.value.user_name,label:"Git Name",placeholder:"Jane Analyst",disabled:!o.value.initialize,"onUpdate:modelValue":c[1]||(c[1]=d=>l({user_name:d}))},null,8,["model-value","disabled"]),A(Ae,{"model-value":o.value.user_email,label:"Git Email",placeholder:"jane@example.com",hint:"Used for git config user.email during project setup.",disabled:!o.value.initialize,"onUpdate:modelValue":c[2]||(c[2]=d=>l({user_email:d}))},null,8,["model-value","disabled"])])]),h("div",lE,[c[8]||(c[8]=h("div",null,[h("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"Git Hooks"),h("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Pre-commit hooks that run automatically before each commit. ")],-1)),h("div",aE,[A(tt,{"model-value":o.value.hooks.ai_sync,label:"Sync AI Files Before Commit",description:"Update non-canonical files so assistants share the same instructions.",disabled:!o.value.initialize,"onUpdate:modelValue":c[3]||(c[3]=d=>a("ai_sync",d))},null,8,["model-value","disabled"]),A(tt,{"model-value":o.value.hooks.data_security,label:"Check for Secrets",description:"Run a lightweight scan for API keys and credentials before commits.",disabled:!o.value.initialize,"onUpdate:modelValue":c[4]||(c[4]=d=>a("data_security",d))},null,8,["model-value","disabled"]),A(tt,{"model-value":o.value.hooks.check_sensitive_dirs,label:"Warn About Unignored Sensitive Directories",description:"Block commits if directories with sensitive names aren't gitignored.",disabled:!o.value.initialize,"onUpdate:modelValue":c[5]||(c[5]=d=>a("check_sensitive_dirs",d))},null,8,["model-value","disabled"])]),h("p",cE,[dt(u.$slots,"note",{},()=>[c[7]||(c[7]=de(" Project-specific .gitignore templates can be customized in Project Defaults. ",-1))])])])],2))}},uE={class:"space-y-5"},Pf={__name:"ScaffoldBehaviorPanel",props:{modelValue:{type:Object,required:!0},flush:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(s,{emit:e}){const t=s,i=e,n=(u,c="")=>u==null?c:typeof u=="number"||typeof u=="string"?String(u):c,r=()=>({source_all_functions:t.modelValue?.source_all_functions??!0,set_theme_on_scaffold:t.modelValue?.set_theme_on_scaffold??!0,ggplot_theme:t.modelValue?.ggplot_theme??"theme_minimal",seed_on_scaffold:t.modelValue?.seed_on_scaffold??!1,seed:n(t.modelValue?.seed,"")}),o=z(r),l=z(()=>t.flush?"space-y-5":"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 space-y-5"),a=u=>{const c=r();i("update:modelValue",{...c,...u})};return(u,c)=>(g(),b("div",{class:xe(l.value)},[h("div",uE,[h("div",null,[c[5]||(c[5]=h("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Auto-Load Functions",-1)),A(tt,{"model-value":o.value.source_all_functions,label:"Source all R files from functions/ directory",description:"Automatically loads all helper functions when scaffold() runs","onUpdate:modelValue":c[0]||(c[0]=d=>a({source_all_functions:d}))},null,8,["model-value"])]),h("div",null,[c[7]||(c[7]=h("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"ggplot2 Theme",-1)),A(tt,{"model-value":o.value.set_theme_on_scaffold,label:"Set ggplot2 theme when scaffold() runs",description:"Automatically sets ggplot2 theme for consistent plot styling","onUpdate:modelValue":c[1]||(c[1]=d=>a({set_theme_on_scaffold:d}))},null,8,["model-value"]),o.value.set_theme_on_scaffold?(g(),_e(Qs,{key:0,"model-value":o.value.ggplot_theme,label:"Theme",class:"mt-4","onUpdate:modelValue":c[2]||(c[2]=d=>a({ggplot_theme:d}))},{default:Z(()=>[...c[6]||(c[6]=[h("option",{value:""},"None",-1),h("option",{value:"theme_minimal"},"Minimal",-1),h("option",{value:"theme_bw"},"Black & White",-1),h("option",{value:"theme_classic"},"Classic",-1),h("option",{value:"theme_gray"},"Gray (default)",-1),h("option",{value:"theme_light"},"Light",-1),h("option",{value:"theme_dark"},"Dark",-1),h("option",{value:"theme_void"},"Void",-1)])]),_:1},8,["model-value"])):G("",!0)]),h("div",null,[c[8]||(c[8]=h("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Random Seed",-1)),A(tt,{"model-value":o.value.seed_on_scaffold,label:"Set random seed when scaffold() runs",description:"Ensures deterministic behavior for reproducibility","onUpdate:modelValue":c[3]||(c[3]=d=>a({seed_on_scaffold:d}))},null,8,["model-value"]),o.value.seed_on_scaffold?(g(),_e(Ae,{key:0,"model-value":o.value.seed,label:"Seed Value",placeholder:"e.g., 1234 or 20241107",hint:"Leave empty to use global default",class:"mt-4","onUpdate:modelValue":c[4]||(c[4]=d=>a({seed:d}))},null,8,["model-value"])):G("",!0)])])],2))}},dE={class:"space-y-6"},fE={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},hE={class:"mb-4 rounded-md border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900 p-4"},pE={class:"flex items-center justify-between mb-3"},mE={class:"flex items-center gap-2"},gE={class:"space-y-3"},vE={class:"grid grid-cols-2 gap-3"},yE={class:"flex items-center gap-2"},bE=["id","checked","onChange"],kE=["for"],xE={key:0},wE={key:1,class:"space-y-3"},SE={class:"grid grid-cols-2 gap-3"},CE={class:"grid grid-cols-2 gap-3"},_E={class:"grid grid-cols-2 gap-3"},AE={key:2,class:"space-y-3"},ME={class:"grid grid-cols-2 gap-3"},DE={class:"grid grid-cols-2 gap-3"},EE={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},TE={class:"space-y-3"},OE={class:"flex items-center gap-2"},PE=["id","checked","onChange"],jE=["for"],$E={class:"grid grid-cols-2 gap-3"},RE={class:"grid grid-cols-2 gap-3"},jf={__name:"ConnectionsPanel",props:{databaseConnections:{type:Array,required:!0},s3Connections:{type:Array,required:!0},defaultDatabase:{type:String,default:null},defaultStorageBucket:{type:String,default:null}},emits:["update:databaseConnections","update:s3Connections","update:defaultDatabase","update:defaultStorageBucket"],setup(s){const e=s,t=(l,a)=>!l||l.trim()===""?"Connection name is required":l==="framework_db"?"framework_db is reserved for system use":e.databaseConnections.findIndex((d,f)=>f!==a&&d.name===l)!==-1?"Connection name must be unique":e.s3Connections.findIndex(d=>d.name===l)!==-1?"Connection name must be unique across all connections":null,i=(l,a)=>!l||l.trim()===""?"Connection name is required":l==="framework_db"?"framework_db is reserved for system use":e.s3Connections.findIndex((d,f)=>f!==a&&d.name===l)!==-1?"Connection name must be unique":e.databaseConnections.findIndex(d=>d.name===l)!==-1?"Connection name must be unique across all connections":null,n=(l,a)=>{let u=1,c=l;for(;a.includes(c)||c==="framework_db";)u+=1,c=`${l}_${u}`;return c},r=()=>{const l=e.databaseConnections.map(f=>f.name);let a="postgres",u="database";l.some(f=>f.startsWith("postgres"))?l.some(f=>f.startsWith("mysql"))?l.some(f=>f.startsWith("sqlserver"))||(a="sqlserver",u="sqlserver"):(a="mysql",u="mysql"):(a="postgres",u="postgres");const c=n(u,l),d={_id:Date.now(),name:c,driver:a};return a==="postgres"?{...d,host:'env("POSTGRES_HOST", "localhost")',port:'env("POSTGRES_PORT", "5432")',database:'env("POSTGRES_DB", "mydb")',schema:'env("POSTGRES_SCHEMA", "public")',user:'env("POSTGRES_USER", "postgres")',password:'env("POSTGRES_PASSWORD", "")'}:a==="mysql"?{...d,host:'env("MYSQL_HOST", "localhost")',port:'env("MYSQL_PORT", "3306")',database:'env("MYSQL_DB", "mydb")',user:'env("MYSQL_USER", "root")',password:'env("MYSQL_PASSWORD", "")'}:a==="sqlserver"?{...d,host:'env("SQLSERVER_HOST", "localhost")',port:'env("SQLSERVER_PORT", "1433")',database:'env("SQLSERVER_DB", "mydb")',user:'env("SQLSERVER_USER", "sa")',password:'env("SQLSERVER_PASSWORD", "")'}:d},o=()=>({_id:Date.now(),name:n("s3_bucket",e.s3Connections.map(l=>l.name)),bucket:'env("S3_BUCKET", "my-bucket")',region:'env("S3_REGION", "us-east-1")',endpoint:'env("S3_ENDPOINT", "")',access_key:'env("S3_ACCESS_KEY", "")',secret_key:'env("S3_SECRET_KEY", "")'});return(l,a)=>(g(),b("div",dE,[h("div",fE,[a[7]||(a[7]=h("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Databases",-1)),h("div",hE,[h("div",pE,[h("div",mE,[A(tc,{variant:"gray",size:"sm"},{default:Z(()=>[...a[2]||(a[2]=[de("System",-1)])]),_:1}),a[3]||(a[3]=h("span",{class:"text-sm font-medium text-gray-900 dark:text-gray-100 font-mono"},"framework_db",-1))]),a[4]||(a[4]=h("span",{class:"text-xs text-gray-500 dark:text-gray-400"},"SQLite - Framework metadata",-1))]),a[5]||(a[5]=h("div",{class:"text-sm text-gray-600 dark:text-gray-400 font-mono"}," framework.db ",-1))]),A(En,{"model-value":s.databaseConnections,"onUpdate:modelValue":a[0]||(a[0]=u=>l.$emit("update:databaseConnections",u)),"add-label":"Add Database","default-item":r},{default:Z(({item:u,index:c,update:d})=>[h("div",gE,[h("div",vE,[A(Ae,{"model-value":u.name,"onUpdate:modelValue":f=>d("name",f),label:"Connection Name",error:t(u.name,c),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),A(Qs,{"model-value":u.driver,"onUpdate:modelValue":f=>d("driver",f),label:"Driver",size:"sm"},{default:Z(()=>[...a[6]||(a[6]=[h("option",{value:"sqlite"},"SQLite",-1),h("option",{value:"postgres"},"PostgreSQL",-1),h("option",{value:"mysql"},"MySQL",-1),h("option",{value:"sqlserver"},"SQL Server",-1)])]),_:1},8,["model-value","onUpdate:modelValue"])]),h("div",yE,[h("input",{type:"radio",id:`default-db-${u._id}`,checked:s.defaultDatabase===u.name,onChange:f=>l.$emit("update:defaultDatabase",u.name),class:"h-4 w-4 text-sky-600 focus:ring-sky-500"},null,40,bE),h("label",{for:`default-db-${u._id}`,class:"text-sm text-gray-700 dark:text-gray-300"}," Default database ",8,kE)]),u.driver==="sqlite"?(g(),b("div",xE,[A(Ae,{"model-value":u.database,"onUpdate:modelValue":f=>d("database",f),label:"Database Path",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])):u.driver==="postgres"||u.driver==="postgresql"?(g(),b("div",wE,[h("div",SE,[A(Ae,{"model-value":u.host,"onUpdate:modelValue":f=>d("host",f),label:"Host",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),A(Ae,{"model-value":u.port,"onUpdate:modelValue":f=>d("port",f),label:"Port",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])]),h("div",CE,[A(Ae,{"model-value":u.database,"onUpdate:modelValue":f=>d("database",f),label:"Database",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),A(Ae,{"model-value":u.schema,"onUpdate:modelValue":f=>d("schema",f),label:"Schema",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])]),h("div",_E,[A(Ae,{"model-value":u.user,"onUpdate:modelValue":f=>d("user",f),label:"User",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),A(Ae,{"model-value":u.password,"onUpdate:modelValue":f=>d("password",f),label:"Password",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])])):u.driver==="mysql"||u.driver==="sqlserver"?(g(),b("div",AE,[h("div",ME,[A(Ae,{"model-value":u.host,"onUpdate:modelValue":f=>d("host",f),label:"Host",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),A(Ae,{"model-value":u.port,"onUpdate:modelValue":f=>d("port",f),label:"Port",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])]),A(Ae,{"model-value":u.database,"onUpdate:modelValue":f=>d("database",f),label:"Database",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),h("div",DE,[A(Ae,{"model-value":u.user,"onUpdate:modelValue":f=>d("user",f),label:"User",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),A(Ae,{"model-value":u.password,"onUpdate:modelValue":f=>d("password",f),label:"Password",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])])):G("",!0)])]),_:1},8,["model-value"])]),h("div",EE,[a[8]||(a[8]=h("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"S3-compatible Storage",-1)),A(En,{"model-value":s.s3Connections,"onUpdate:modelValue":a[1]||(a[1]=u=>l.$emit("update:s3Connections",u)),"add-label":"Add Bucket","default-item":o},{default:Z(({item:u,index:c,update:d})=>[h("div",TE,[A(Ae,{"model-value":u.name,"onUpdate:modelValue":f=>d("name",f),label:"Connection Name",error:i(u.name,c),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),h("div",OE,[h("input",{type:"radio",id:`default-s3-${u._id}`,checked:s.defaultStorageBucket===u.name,onChange:f=>l.$emit("update:defaultStorageBucket",u.name),class:"h-4 w-4 text-sky-600 focus:ring-sky-500"},null,40,PE),h("label",{for:`default-s3-${u._id}`,class:"text-sm text-gray-700 dark:text-gray-300"}," Default storage bucket ",8,jE)]),h("div",$E,[A(Ae,{"model-value":u.bucket,"onUpdate:modelValue":f=>d("bucket",f),label:"Bucket",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),A(Ae,{"model-value":u.region,"onUpdate:modelValue":f=>d("region",f),label:"Region",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])]),A(Ae,{"model-value":u.endpoint,"onUpdate:modelValue":f=>d("endpoint",f),label:"Endpoint",hint:"Leave empty for AWS S3, or specify custom endpoint for MinIO, etc.",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),h("div",RE,[A(Ae,{"model-value":u.access_key,"onUpdate:modelValue":f=>d("access_key",f),label:"Access Key",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),A(Ae,{"model-value":u.secret_key,"onUpdate:modelValue":f=>d("secret_key",f),label:"Secret Key",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])])]),_:1},8,["model-value"])])]))}},LE={key:0,class:"space-y-2"},VE={key:0,class:"text-lg font-semibold text-gray-900 dark:text-white"},BE={key:1,class:"text-sm text-gray-600 dark:text-gray-400"},IE={class:"space-y-6"},Ms={__name:"SettingsPanel",props:{title:{type:String,default:""},description:{type:String,default:""},flush:{type:Boolean,default:!1}},setup(s){return(e,t)=>(g(),b("section",{class:xe(["space-y-6",s.flush?"":"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"])},[s.title||s.description?(g(),b("header",LE,[s.title?(g(),b("h2",VE,X(s.title),1)):G("",!0),s.description?(g(),b("p",BE,X(s.description),1)):G("",!0)])):G("",!0),h("div",IE,[dt(e.$slots,"default")]),e.$slots.actions?(g(),b("div",{key:1,class:xe(["flex justify-end",s.flush?"":"pt-4 border-t border-gray-200 dark:border-gray-700"])},[dt(e.$slots,"actions")],2)):G("",!0)],2))}},NE={class:"space-y-3"},FE={key:0,class:"space-y-1"},zE={key:0,class:"text-sm font-semibold text-gray-900 dark:text-white"},UE={key:1,class:"text-xs text-gray-600 dark:text-gray-400"},HE={class:"space-y-3"},bo={__name:"SettingsBlock",props:{title:{type:String,default:""},description:{type:String,default:""}},setup(s){return(e,t)=>(g(),b("div",NE,[s.title||s.description?(g(),b("div",FE,[s.title?(g(),b("h3",zE,X(s.title),1)):G("",!0),s.description?(g(),b("p",UE,X(s.description),1)):G("",!0)])):G("",!0),h("div",HE,[dt(e.$slots,"default")])]))}},WE={class:"space-y-5"},KE={key:0,class:"grid grid-cols-2 gap-3"},qE={key:0,class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},GE={class:"grid grid-cols-2 gap-3"},JE={__name:"CourseDirectoriesPanel",props:{directoriesEnabled:{type:Object,required:!0},directories:{type:Object,required:!0},renderDirs:{type:Object,default:()=>({})},catalog:{type:Object,default:()=>({})},extraDirectoriesEnabled:{type:Object,default:()=>({})},extraDirectories:{type:Array,default:()=>[]},projectCustomDirectories:{type:Array,default:()=>[]},allowCustomDirectories:{type:Boolean,default:!1},flush:{type:Boolean,default:!1}},emits:["update:directoriesEnabled","update:directories","update:renderDirs","update:extraDirectoriesEnabled","update:projectCustomDirectories"],setup(s,{emit:e}){const t=s,i=e,n=ie(Math.random().toString(36).substring(7)),r=["slides","assignments","course_docs","notebooks"],o=["readings","data"],l=["functions","scripts"],a=z(()=>t.flush?"":"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"),u=P=>P in t.directoriesEnabled?t.directoriesEnabled[P]:t.catalog?.directories?.[P]?.enabled_by_default??!1,c=(P,S)=>{i("update:directoriesEnabled",{...t.directoriesEnabled,[P]:S})},d=P=>t.directories[P]||"",f=(P,S)=>{i("update:directories",{...t.directories,[P]:S})},p=P=>{const S=P==="notebooks"?"modules":P;return t.renderDirs[S]?t.renderDirs[S]:t.catalog?.render_dirs?.[S]?.default||""},v=(P,S)=>{const O=P==="notebooks"?"modules":P;i("update:renderDirs",{...t.renderDirs,[O]:S})},k=P=>{if(!t.catalog||typeof t.catalog!="object")return"";const S=P==="notebooks"?"modules":P;return(t.catalog.render_dirs||{})[S]?.default||`rendered/${S}`},m=P=>!t.catalog||typeof t.catalog!="object"?P.charAt(0).toUpperCase()+P.slice(1):(t.catalog.directories||{})[P]?.label||P.charAt(0).toUpperCase()+P.slice(1),w=P=>!t.catalog||typeof t.catalog!="object"?"":(t.catalog.directories||{})[P]?.hint||"",L=P=>!t.catalog||typeof t.catalog!="object"?P:(t.catalog.directories||{})[P]?.default||P,I=P=>t.extraDirectoriesEnabled[P]??!1,H=(P,S)=>{i("update:extraDirectoriesEnabled",{...t.extraDirectoriesEnabled,[P]:S})},N=(P,S)=>{console.warn("Extra directory paths are managed in global settings")};return(P,S)=>(g(),b("div",{class:xe(a.value)},[S[3]||(S[3]=h("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"},"Materials",-1)),S[4]||(S[4]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Slides, assignments, readings, and course documentation with automatic rendering to web-ready formats. ",-1)),h("div",WE,[(g(),b(ye,null,$e(r,O=>h("div",{key:O},[A(tt,{id:`course-${O}-${n.value}`,"model-value":u(O),"onUpdate:modelValue":W=>c(O,W),label:m(O),description:w(O),class:"mb-2"},null,8,["id","model-value","onUpdate:modelValue","label","description"]),u(O)?(g(),b("div",KE,[A(Ae,{"model-value":d(O),"onUpdate:modelValue":W=>f(O,W),placeholder:L(O),label:"Source files",prefix:"/",monospace:""},null,8,["model-value","onUpdate:modelValue","placeholder"]),A(Ae,{"model-value":p(O),"onUpdate:modelValue":W=>v(O,W),placeholder:k(O),label:"Quarto render directory",prefix:"/",monospace:""},null,8,["model-value","onUpdate:modelValue","placeholder"])])):G("",!0)])),64)),(g(),b(ye,null,$e(o,O=>h("div",{key:O},[A(tt,{id:`course-${O}-${n.value}`,"model-value":u(O),"onUpdate:modelValue":W=>c(O,W),label:m(O),description:w(O),class:"mb-2"},null,8,["id","model-value","onUpdate:modelValue","label","description"]),u(O)?(g(),_e(Ae,{key:0,"model-value":d(O),"onUpdate:modelValue":W=>f(O,W),placeholder:L(O),prefix:"/",monospace:""},null,8,["model-value","onUpdate:modelValue","placeholder"])):G("",!0)])),64)),(g(),b(ye,null,$e(l,O=>h("div",{key:O},[A(tt,{id:`course-${O}-${n.value}`,"model-value":u(O),"onUpdate:modelValue":W=>c(O,W),label:m(O),description:w(O),class:"mb-2"},null,8,["id","model-value","onUpdate:modelValue","label","description"]),u(O)?(g(),_e(Ae,{key:0,"model-value":d(O),"onUpdate:modelValue":W=>f(O,W),placeholder:L(O),prefix:"/",monospace:""},null,8,["model-value","onUpdate:modelValue","placeholder"])):G("",!0)])),64)),(g(!0),b(ye,null,$e(s.extraDirectories,O=>(g(),b("div",{key:`extra-${O.key}`,class:"space-y-1.5"},[A(tt,{id:`extra-course-${O.key}-${n.value}`,"model-value":I(O.key),"onUpdate:modelValue":W=>H(O.key,W),label:O.label,description:`Custom: ${O.path}`,class:"mb-2"},null,8,["id","model-value","onUpdate:modelValue","label","description"]),I(O.key)?(g(),_e(Ae,{key:0,"model-value":O.path,"onUpdate:modelValue":W=>N(O.key),placeholder:O.path,prefix:"/",monospace:"",readonly:""},null,8,["model-value","onUpdate:modelValue","placeholder"])):G("",!0)]))),128))]),s.allowCustomDirectories?(g(),b("div",qE,[S[1]||(S[1]=h("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"}," Add Custom Course Directories ",-1)),S[2]||(S[2]=h("p",{class:"text-xs text-gray-600 dark:text-gray-400 mb-3"}," Add directories specific to this course only. ",-1)),A(En,{"model-value":s.projectCustomDirectories,"onUpdate:modelValue":S[0]||(S[0]=O=>P.$emit("update:projectCustomDirectories",O)),"add-label":"Add Course Directory","default-item":()=>({key:"",label:"",path:"",type:"course",_id:Date.now()})},{default:Z(({item:O,index:W,update:oe})=>[h("div",GE,[A(Ae,{"model-value":O.key,"onUpdate:modelValue":se=>oe("key",se),label:"Key",placeholder:"e.g., course_videos",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),A(Ae,{"model-value":O.label,"onUpdate:modelValue":se=>oe("label",se),label:"Label",placeholder:"e.g., Videos",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),A(Ae,{"model-value":O.path,"onUpdate:modelValue":se=>oe("path",se),label:"Path",placeholder:"e.g., videos",prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])):G("",!0)],2))}},YE={class:"space-y-6"},QE={class:"space-y-5"},XE=["value"],ZE={class:"flex flex-wrap items-center justify-between gap-3"},eT={class:"flex flex-wrap gap-2 text-xs font-medium text-gray-600 dark:text-gray-400"},tT={key:1,id:"section-primary-files"},sT={class:"space-y-4"},iT={key:2,id:"section-optional-directories"},nT={class:"space-y-4"},rT={class:"space-y-2"},oT={class:"space-y-2"},lT={class:"space-y-2"},aT={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},cT={class:"space-y-3"},uT={key:3,id:"section-materials"},dT={key:4,id:"section-inputs"},fT={key:0},hT={class:"space-y-5"},pT={class:"space-y-2"},mT={class:"space-y-2"},gT={key:1,class:"space-y-5"},vT={key:2,class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},yT={key:0,class:"space-y-3 mb-4"},bT={class:"space-y-3"},kT={key:5,id:"section-workspaces"},xT={class:"space-y-5"},wT={key:0,class:"grid grid-cols-2 gap-3"},ST={key:0,class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},CT={key:0,class:"space-y-3 mb-4"},_T={class:"space-y-3"},AT={key:6,id:"section-outputs"},MT={key:0},DT={class:"space-y-5"},ET={class:"space-y-2"},TT={class:"space-y-2"},OT={key:1,class:"space-y-5"},PT={key:2,class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},jT={key:0,class:"space-y-3 mb-4"},$T={class:"space-y-3"},RT={key:7,id:"section-utility"},LT={class:"space-y-5"},VT={id:"section-gitignore"},$f={__name:"ProjectStructureEditor",props:{projectType:{type:String,required:!0},directories:{type:Object,required:!0},renderDirs:{type:Object,default:()=>({})},enabled:{type:Object,required:!0},extraDirectories:{type:Array,default:()=>[]},settings:{type:Object,default:()=>({})},gitignore:{type:String,default:""},catalog:{type:Object,required:!0},newExtraIds:{type:Set,default:()=>new Set},disabled:{type:Boolean,default:!1},allowDestruction:{type:Boolean,default:!0}},emits:["update:directories","update:renderDirs","update:enabled","update:extraDirectories","update:settings","update:gitignore","update:newExtraIds","reset"],setup(s,{emit:e}){const t=s,i=e,n=ie({...t.directories}),r=ie({...t.renderDirs}),o=ie({...t.enabled}),l=ie({...t.settings}),a=ie(t.gitignore),u=Q=>n.value[Q]?n.value[Q]:t.catalog?.directories?.[Q]?.default||"",c=Q=>r.value[Q]?r.value[Q]:t.catalog?.render_dirs?.[Q]?.default||"";Re(()=>t.directories,Q=>{n.value={...Q}},{deep:!0}),Re(()=>t.renderDirs,Q=>{r.value={...Q}},{deep:!0}),Re(()=>t.enabled,Q=>{o.value={...Q}},{deep:!0}),Re(()=>t.settings,Q=>{l.value={...Q}},{deep:!0}),Re(()=>t.gitignore,Q=>{a.value=Q}),Re(()=>t.extraDirectories,Q=>{if(Q.some(T=>T.label&&!T.key)){const T=[...t.catalog?.directories?Object.keys(t.catalog.directories):[],...Q.filter(_=>_.key).map(_=>_.key)],x=Q.map(_=>{if(_.label&&!_.key){const U=Ne(_.label,T);return T.push(U),console.log("[DEBUG] Auto-generated key:",{label:_.label,key:U}),{..._,key:U}}return _});i("update:extraDirectories",x)}},{deep:!0});const d=[{key:"notebooks",label:"Notebooks",hint:"Quarto or R Markdown notebooks for analysis.",defaultRenderDir:"outputs/notebooks"},{key:"docs",label:"Documentation",hint:"Codebooks, documentation, and other reference materials.",defaultRenderDir:"outputs/docs"}],f=[{key:"functions",label:"Functions",hint:"R files here are sourced by scaffold(), so helper functions are available in every project session."},{key:"scripts",label:"Scripts",hint:"Reusable R scripts, job runners, or automation tasks."}],p=[{key:"inputs_raw",label:"Raw data",hint:"Read-only exports from source systems."},{key:"inputs_intermediate",label:"Intermediate data",hint:"Data after light cleaning or pre-processing steps."},{key:"inputs_final",label:"Analysis-ready data",hint:"Final inputs ready for modeling or reporting."}],v=[{key:"outputs_tables",label:"Tables",hint:"Publishable tables ready for reports or manuscripts."},{key:"outputs_figures",label:"Figures",hint:"Final plots and graphics."},{key:"outputs_models",label:"Models",hint:"Serialized models or model summaries."},{key:"outputs_reports",label:"Reports",hint:"Final reports and deliverables ready for publication."}],k=[{key:"cache",label:"Cache",hint:"Temporary artifacts (gitignored)."},{key:"scratch",label:"Scratch",hint:"Short-lived explorations (gitignored)."}],m=Q=>t.catalog?.directories?.[Q]||{},w=Q=>Q.map(J=>{const T=m(J.key),x=t.catalog?.render_dirs?.[J.key]||{};return{key:J.key,label:T.label||J.label,hint:T.hint||J.hint||"",defaultRenderDir:x.default||J.defaultRenderDir||""}}),L=z(()=>t.projectType==="project_sensitive"),I=z(()=>t.projectType==="presentation"),H=z(()=>t.projectType==="course"),N=(Q,J)=>Q.map(T=>{const x=`${J}_private_${T.key.replace(J+"_","")}`,_=`${J}_public_${T.key.replace(J+"_","")}`,U=m(x),ne=m(_);return{privateKey:x,publicKey:_,privateLabel:U.label||`${T.label} (private)`,publicLabel:ne.label||`${T.label} (public)`,hint:T.hint||""}}),P=z(()=>w(d)),S=z(()=>w(f)),O=z(()=>[...P.value,...S.value]),W=z(()=>L.value?N(p,"inputs"):w(p)),oe=z(()=>L.value?N(v,"outputs"):w(v)),se=z(()=>w(k)),B=z(()=>t.catalog?.settings||[]),ae=z(()=>t.extraDirectories.filter(Q=>Q.type==="input"&&!t.newExtraIds.has(Q._id))),ee=z(()=>t.extraDirectories.filter(Q=>Q.type==="workspace"&&!t.newExtraIds.has(Q._id))),$=z(()=>t.extraDirectories.filter(Q=>Q.type==="output"&&!t.newExtraIds.has(Q._id))),q=z(()=>t.extraDirectories.filter(Q=>Q.type==="input"&&t.newExtraIds.has(Q._id))),Y=z(()=>t.extraDirectories.filter(Q=>Q.type==="workspace"&&t.newExtraIds.has(Q._id))),ce=z(()=>t.extraDirectories.filter(Q=>Q.type==="output"&&t.newExtraIds.has(Q._id))),ge=Q=>t.extraDirectories.filter(J=>J.type===Q),Ne=(Q,J=[])=>{if(!Q)return"";let T=Q.toLowerCase().trim().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,"").replace(/_+/g,"_").replace(/^_|_$/g,""),x=T,_=2;for(;J.includes(x);)x=`${T}_${_}`,_++;return x},be=(Q,J)=>{n.value[Q]=J,i("update:directories",{...n.value})},ze=(Q,J)=>{r.value[Q]=J,i("update:renderDirs",{...r.value})},Ue=(Q,J)=>{!t.allowDestruction&&o.value[Q]===!0&&J===!1||(o.value[Q]=J,i("update:enabled",{...o.value}))},Je=Q=>!!(t.disabled||!t.allowDestruction&&o.value[Q]===!0),ht=(Q,J)=>{l.value[Q]=J,i("update:settings",{...l.value})},rt=(Q,J)=>{const T=t.extraDirectories.map(x=>x.key===Q?{...x,path:J}:x);i("update:extraDirectories",T)},te=(Q,J)=>{console.log("[DEBUG] updateNewExtras called:",{type:Q,newItems:JSON.parse(JSON.stringify(J)),itemCount:J.length});const T=t.extraDirectories.filter(E=>E.type===Q&&!t.newExtraIds.has(E._id)),_=t.extraDirectories.filter(E=>E.type===Q&&t.newExtraIds.has(E._id)).filter(E=>!J.some(j=>j._id===E._id)),U=new Set(t.newExtraIds);_.forEach(E=>{E._id&&U.delete(E._id)}),J.forEach(E=>{E._id&&U.add(E._id)}),i("update:newExtraIds",U);const ne={...o.value};let le=!1;J.forEach(E=>{if(E.key){const j=T.some(K=>K.key===E.key),re=t.catalog?.directories&&Object.keys(t.catalog.directories).includes(E.key);!ne.hasOwnProperty(E.key)&&!j&&!re&&(ne[E.key]=!0,le=!0)}}),le&&i("update:enabled",ne);const C=t.extraDirectories.filter(E=>E.type!==Q);i("update:extraDirectories",[...C,...T,...J])},ve=Q=>{const J=document.getElementById(`section-${Q}`);J&&J.scrollIntoView({behavior:"smooth",block:"start"})};return(Q,J)=>(g(),b("div",YE,[B.value.length>0?(g(),_e(Ms,{key:0,title:"Project Settings",description:"Default settings applied when creating new projects of this type."},{default:Z(()=>[A(bo,null,{default:Z(()=>[h("div",QE,[(g(!0),b(ye,null,$e(B.value,T=>(g(),b(ye,{key:T.id},[T.control==="toggle"?(g(),_e(tt,{key:0,"model-value":l.value[T.id],"onUpdate:modelValue":x=>ht(T.id,x),label:T.label,description:T.description,disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","label","description","disabled"])):T.control==="select"?(g(),_e(Qs,{key:1,"model-value":l.value[T.id],"onUpdate:modelValue":x=>ht(T.id,x),label:T.label,hint:T.hint},{default:Z(()=>[(g(!0),b(ye,null,$e(T.options,x=>(g(),b("option",{key:x.value,value:x.value},X(x.label),9,XE))),128))]),_:2},1032,["model-value","onUpdate:modelValue","label","hint"])):T.control==="text"?(g(),_e(Ae,{key:2,"model-value":l.value[T.id],"onUpdate:modelValue":x=>ht(T.id,x),label:T.label,hint:T.hint,placeholder:T.placeholder},null,8,["model-value","onUpdate:modelValue","label","hint","placeholder"])):G("",!0)],64))),128))])]),_:1})]),_:1})):G("",!0),h("div",ZE,[h("div",eT,[I.value?(g(),b("button",{key:0,type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:J[0]||(J[0]=T=>ve("primary-files"))}," Primary Files ")):G("",!0),I.value?(g(),b("button",{key:1,type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:J[1]||(J[1]=T=>ve("optional-directories"))}," Optional Directories ")):G("",!0),H.value?(g(),b("button",{key:2,type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:J[2]||(J[2]=T=>ve("materials"))}," Materials ")):G("",!0),!I.value&&!H.value&&W.value.length>0?(g(),b("button",{key:3,type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:J[3]||(J[3]=T=>ve("inputs"))}," Inputs ")):G("",!0),!I.value&&!H.value&&O.value.length>0?(g(),b("button",{key:4,type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:J[4]||(J[4]=T=>ve("workspaces"))}," Workspaces ")):G("",!0),!I.value&&!H.value&&oe.value.length>0?(g(),b("button",{key:5,type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:J[5]||(J[5]=T=>ve("outputs"))}," Outputs ")):G("",!0),!I.value&&!H.value&&se.value.length>0?(g(),b("button",{key:6,type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:J[6]||(J[6]=T=>ve("utility"))}," Utility ")):G("",!0),h("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:J[7]||(J[7]=T=>ve("gitignore"))}," .gitignore ")]),!s.disabled&&s.allowDestruction?(g(),_e(Ke,{key:0,variant:"secondary",size:"sm",class:"mt-3 sm:mt-0",onClick:J[8]||(J[8]=T=>Q.$emit("reset"))},{default:Z(()=>[...J[25]||(J[25]=[de(" Reset to Defaults ",-1)])]),_:1})):G("",!0)]),I.value?(g(),b("div",tT,[A(Ms,{title:"Primary Files",description:"The main presentation file and where rendered slides are output."},{default:Z(()=>[h("div",sT,[A(Ae,{"model-value":n.value.presentation_source,"onUpdate:modelValue":J[9]||(J[9]=T=>be("presentation_source",T)),label:"Presentation source file",placeholder:"presentation.qmd",hint:"Main Quarto file for your slides",disabled:s.disabled},null,8,["model-value","disabled"]),A(Ae,{"model-value":n.value.rendered_slides,"onUpdate:modelValue":J[10]||(J[10]=T=>be("rendered_slides",T)),label:"Rendered slides directory",placeholder:".",hint:"Rendered slides write to the project root by default (.)",prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","disabled"])])]),_:1})])):G("",!0),I.value?(g(),b("div",iT,[A(Ms,{title:"Optional Directories",description:"Toggle extra scaffolding when you need supporting data, scripts, or helper utilities."},{default:Z(()=>[h("div",nT,[h("div",rT,[A(tt,{"model-value":o.value.data,"onUpdate:modelValue":J[11]||(J[11]=T=>Ue("data",T)),label:"Include data directory",description:"Adds a /data folder for sample data used in the presentation.",disabled:Je("data")},null,8,["model-value","disabled"]),o.value.data?(g(),_e(Ae,{key:0,"model-value":u("data"),"onUpdate:modelValue":J[12]||(J[12]=T=>be("data",T)),prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","disabled"])):G("",!0)]),h("div",oT,[A(tt,{"model-value":o.value.scripts,"onUpdate:modelValue":J[13]||(J[13]=T=>Ue("scripts",T)),label:"Include scripts directory",description:"Adds a scripts/ folder for demo code or automation.",disabled:Je("scripts")},null,8,["model-value","disabled"]),o.value.scripts?(g(),_e(Ae,{key:0,"model-value":u("scripts"),"onUpdate:modelValue":J[14]||(J[14]=T=>be("scripts",T)),prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","disabled"])):G("",!0)]),h("div",lT,[A(tt,{"model-value":o.value.functions,"onUpdate:modelValue":J[15]||(J[15]=T=>Ue("functions",T)),label:"Include functions directory",description:"Adds functions/ for helper utilities that should load automatically.",disabled:Je("functions")},null,8,["model-value","disabled"]),o.value.functions?(g(),_e(Ae,{key:0,"model-value":u("functions"),"onUpdate:modelValue":J[16]||(J[16]=T=>be("functions",T)),prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","disabled"])):G("",!0)]),h("div",aT,[J[26]||(J[26]=h("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Add Custom Directories",-1)),s.disabled?G("",!0):(g(),_e(En,{key:0,"model-value":ge("workspace"),"onUpdate:modelValue":J[17]||(J[17]=T=>te("workspace",T)),"add-label":"Add Directory","default-item":()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:Z(({item:T,update:x})=>[h("div",cT,[A(Ae,{"model-value":T.label,"onUpdate:modelValue":_=>x("label",_),label:"Label",placeholder:"e.g., Assets"},null,8,["model-value","onUpdate:modelValue"]),A(Ae,{"model-value":T.path,"onUpdate:modelValue":_=>x("path",_),label:"Path",placeholder:"e.g., assets",prefix:"/",monospace:""},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"]))])])]),_:1})])):G("",!0),H.value?(g(),b("div",uT,[A(JE,{"directories-enabled":o.value,"onUpdate:directoriesEnabled":J[18]||(J[18]=T=>{o.value=T,i("update:enabled",T)}),directories:n.value,"onUpdate:directories":J[19]||(J[19]=T=>{n.value=T,i("update:directories",T)}),"render-dirs":r.value,"onUpdate:renderDirs":J[20]||(J[20]=T=>{r.value=T,i("update:renderDirs",T)}),catalog:s.catalog,"extra-directories":s.extraDirectories.filter(T=>T.type==="course"),"extra-directories-enabled":{},"onUpdate:extraDirectoriesEnabled":()=>{},"project-custom-directories":[],"onUpdate:projectCustomDirectories":()=>{},"allow-custom-directories":!1,flush:!1},null,8,["directories-enabled","directories","render-dirs","catalog","extra-directories"])])):G("",!0),!I.value&&!H.value&&W.value.length>0?(g(),b("div",dT,[A(Ms,{title:"Inputs",description:L.value?"Keep private inputs compartmentalized; publish processed outputs into public folders when ready.":"Define the read-only locations where raw and prepared data live."},{default:Z(()=>[L.value?(g(),b("div",fT,[J[27]||(J[27]=h("div",{class:"grid gap-4 sm:grid-cols-2 text-xs font-semibold uppercase text-gray-500 dark:text-gray-400 mb-4"},[h("div",null,"Private"),h("div",null,"Public")],-1)),h("div",hT,[(g(!0),b(ye,null,$e(W.value,T=>(g(),b("div",{key:T.privateKey,class:"grid gap-4 sm:grid-cols-2"},[h("div",pT,[A(tt,{"model-value":o.value[T.privateKey],"onUpdate:modelValue":x=>Ue(T.privateKey,x),label:T.privateLabel,disabled:Je(T.privateKey)},null,8,["model-value","onUpdate:modelValue","label","disabled"]),o.value[T.privateKey]!==!1?(g(),_e(Ae,{key:0,"model-value":u(T.privateKey),"onUpdate:modelValue":x=>be(T.privateKey,x),prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):G("",!0)]),h("div",mT,[A(tt,{"model-value":o.value[T.publicKey],"onUpdate:modelValue":x=>Ue(T.publicKey,x),label:T.publicLabel,disabled:Je(T.publicKey)},null,8,["model-value","onUpdate:modelValue","label","disabled"]),o.value[T.publicKey]!==!1?(g(),_e(Ae,{key:0,"model-value":u(T.publicKey),"onUpdate:modelValue":x=>be(T.publicKey,x),prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):G("",!0)])]))),128))])])):(g(),b("div",gT,[(g(!0),b(ye,null,$e(W.value,T=>(g(),b("div",{key:T.key,class:"space-y-1.5"},[A(tt,{"model-value":o.value[T.key],"onUpdate:modelValue":x=>Ue(T.key,x),label:T.label,description:T.hint,disabled:Je(T.key)},null,8,["model-value","onUpdate:modelValue","label","description","disabled"]),o.value[T.key]!==!1?(g(),_e(Ae,{key:0,"model-value":u(T.key),"onUpdate:modelValue":x=>be(T.key,x),prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):G("",!0)]))),128))])),(ae.value.length>0,g(),b("div",vT,[J[28]||(J[28]=h("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Input Directories",-1)),ae.value.length>0?(g(),b("div",yT,[(g(!0),b(ye,null,$e(ae.value,T=>(g(),b("div",{key:T.key,class:"space-y-1.5"},[A(tt,{"model-value":o.value[T.key],"onUpdate:modelValue":x=>Ue(T.key,x),label:T.label,disabled:Je(T.key)},null,8,["model-value","onUpdate:modelValue","label","disabled"]),o.value[T.key]!==!1?(g(),_e(Ae,{key:0,"model-value":T.path,"onUpdate:modelValue":x=>rt(T.key,x),prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):G("",!0)]))),128))])):G("",!0),s.disabled?G("",!0):(g(),_e(En,{key:1,"model-value":q.value,"onUpdate:modelValue":J[21]||(J[21]=T=>te("input",T)),addLabel:"Add Input Directory",defaultItem:()=>({key:"",label:"",path:"",type:"input",_id:Date.now()})},{default:Z(({item:T,update:x})=>[h("div",bT,[A(Ae,{"model-value":T.label,"onUpdate:modelValue":_=>x("label",_),label:"Label",placeholder:"Archive"},null,8,["model-value","onUpdate:modelValue"]),A(Ae,{"model-value":T.path,"onUpdate:modelValue":_=>x("path",_),label:"Path",prefix:"/",placeholder:"inputs/archive",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])])]),_:1},8,["model-value","defaultItem"]))]))]),_:1},8,["description"])])):G("",!0),!I.value&&!H.value&&O.value.length>0?(g(),b("div",kT,[A(Ms,{title:"Workspaces",description:"Functions, notebooks, and scripts scaffolded into every project."},{default:Z(()=>[h("div",xT,[(g(!0),b(ye,null,$e(P.value,T=>(g(),b("div",{key:T.key,class:"space-y-1.5"},[A(tt,{"model-value":o.value[T.key],"onUpdate:modelValue":x=>Ue(T.key,x),label:T.label,description:T.hint,disabled:Je(T.key)},null,8,["model-value","onUpdate:modelValue","label","description","disabled"]),o.value[T.key]!==!1?(g(),b("div",wT,[A(Ae,{"model-value":u(T.key),"onUpdate:modelValue":x=>be(T.key,x),label:"Source files",prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"]),A(Ae,{"model-value":c(T.key),"onUpdate:modelValue":x=>ze(T.key,x),label:"Quarto render directory",prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])])):G("",!0)]))),128)),(g(!0),b(ye,null,$e(S.value,T=>(g(),b("div",{key:T.key,class:"space-y-1.5"},[A(tt,{"model-value":o.value[T.key],"onUpdate:modelValue":x=>Ue(T.key,x),label:T.label,description:T.hint,disabled:Je(T.key)},null,8,["model-value","onUpdate:modelValue","label","description","disabled"]),o.value[T.key]!==!1?(g(),_e(Ae,{key:0,"model-value":u(T.key),"onUpdate:modelValue":x=>be(T.key,x),prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):G("",!0)]))),128))]),(ee.value.length>0,g(),b("div",ST,[J[29]||(J[29]=h("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Workspace Directories",-1)),ee.value.length>0?(g(),b("div",CT,[(g(!0),b(ye,null,$e(ee.value,T=>(g(),b("div",{key:T.key,class:"space-y-1.5"},[A(tt,{"model-value":o.value[T.key],"onUpdate:modelValue":x=>Ue(T.key,x),label:T.label,disabled:Je(T.key)},null,8,["model-value","onUpdate:modelValue","label","disabled"]),o.value[T.key]!==!1?(g(),_e(Ae,{key:0,"model-value":T.path,"onUpdate:modelValue":x=>rt(T.key,x),prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):G("",!0)]))),128))])):G("",!0),s.disabled?G("",!0):(g(),_e(En,{key:1,"model-value":Y.value,"onUpdate:modelValue":J[22]||(J[22]=T=>te("workspace",T)),addLabel:"Add Workspace Directory",defaultItem:()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:Z(({item:T,update:x})=>[h("div",_T,[A(Ae,{"model-value":T.label,"onUpdate:modelValue":_=>x("label",_),label:"Label",placeholder:"Templates"},null,8,["model-value","onUpdate:modelValue"]),A(Ae,{"model-value":T.path,"onUpdate:modelValue":_=>x("path",_),label:"Path",prefix:"/",placeholder:"templates",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])])]),_:1},8,["model-value","defaultItem"]))]))]),_:1})])):G("",!0),!I.value&&!H.value&&oe.value.length>0?(g(),b("div",AT,[A(Ms,{title:"Outputs",description:L.value?"Review outputs before promotion; private folders remain gitignored while public copies are ready to share.":"Results, figures, models, and reports generated by your analysis."},{default:Z(()=>[L.value?(g(),b("div",MT,[J[30]||(J[30]=h("div",{class:"grid gap-4 sm:grid-cols-2 text-xs font-semibold uppercase text-gray-500 dark:text-gray-400 mb-4"},[h("div",null,"Private"),h("div",null,"Public")],-1)),h("div",DT,[(g(!0),b(ye,null,$e(oe.value,T=>(g(),b("div",{key:T.privateKey,class:"grid gap-4 sm:grid-cols-2"},[h("div",ET,[A(tt,{"model-value":o.value[T.privateKey],"onUpdate:modelValue":x=>Ue(T.privateKey,x),label:T.privateLabel,disabled:Je(T.privateKey)},null,8,["model-value","onUpdate:modelValue","label","disabled"]),o.value[T.privateKey]!==!1?(g(),_e(Ae,{key:0,"model-value":u(T.privateKey),"onUpdate:modelValue":x=>be(T.privateKey,x),prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):G("",!0)]),h("div",TT,[A(tt,{"model-value":o.value[T.publicKey],"onUpdate:modelValue":x=>Ue(T.publicKey,x),label:T.publicLabel,disabled:Je(T.publicKey)},null,8,["model-value","onUpdate:modelValue","label","disabled"]),o.value[T.publicKey]!==!1?(g(),_e(Ae,{key:0,"model-value":u(T.publicKey),"onUpdate:modelValue":x=>be(T.publicKey,x),prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):G("",!0)])]))),128))])])):(g(),b("div",OT,[(g(!0),b(ye,null,$e(oe.value,T=>(g(),b("div",{key:T.key,class:"space-y-1.5"},[A(tt,{"model-value":o.value[T.key],"onUpdate:modelValue":x=>Ue(T.key,x),label:T.label,description:T.hint,disabled:Je(T.key)},null,8,["model-value","onUpdate:modelValue","label","description","disabled"]),o.value[T.key]!==!1?(g(),_e(Ae,{key:0,"model-value":u(T.key),"onUpdate:modelValue":x=>be(T.key,x),prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):G("",!0)]))),128))])),($.value.length>0,g(),b("div",PT,[J[31]||(J[31]=h("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Output Directories",-1)),$.value.length>0?(g(),b("div",jT,[(g(!0),b(ye,null,$e($.value,T=>(g(),b("div",{key:T.key,class:"space-y-1.5"},[A(tt,{"model-value":o.value[T.key],"onUpdate:modelValue":x=>Ue(T.key,x),label:T.label,disabled:Je(T.key)},null,8,["model-value","onUpdate:modelValue","label","disabled"]),o.value[T.key]!==!1?(g(),_e(Ae,{key:0,"model-value":T.path,"onUpdate:modelValue":x=>rt(T.key,x),prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):G("",!0)]))),128))])):G("",!0),s.disabled?G("",!0):(g(),_e(En,{key:1,"model-value":ce.value,"onUpdate:modelValue":J[23]||(J[23]=T=>te("output",T)),addLabel:"Add Output Directory",defaultItem:()=>({key:"",label:"",path:"",type:"output",_id:Date.now()})},{default:Z(({item:T,update:x})=>[h("div",$T,[A(Ae,{"model-value":T.label,"onUpdate:modelValue":_=>x("label",_),label:"Label",placeholder:"Archive"},null,8,["model-value","onUpdate:modelValue"]),A(Ae,{"model-value":T.path,"onUpdate:modelValue":_=>x("path",_),label:"Path",prefix:"/",placeholder:"outputs/archive",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])])]),_:1},8,["model-value","defaultItem"]))]))]),_:1},8,["description"])])):G("",!0),!I.value&&!H.value&&se.value.length>0?(g(),b("div",RT,[A(Ms,{title:"Utility",description:"Cache, scratch space, and other temporary directories (gitignored by default)."},{default:Z(()=>[h("div",LT,[(g(!0),b(ye,null,$e(se.value,T=>(g(),b("div",{key:T.key,class:"space-y-1.5"},[A(tt,{"model-value":o.value[T.key],"onUpdate:modelValue":x=>Ue(T.key,x),label:T.label,description:T.hint,disabled:Je(T.key)},null,8,["model-value","onUpdate:modelValue","label","description","disabled"]),o.value[T.key]!==!1?(g(),_e(Ae,{key:0,"model-value":u(T.key),"onUpdate:modelValue":x=>be(T.key,x),prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):G("",!0)]))),128))])]),_:1})])):G("",!0),h("div",VT,[A(Ms,{title:".gitignore Patterns",description:"Define which files and directories Git should ignore."},{default:Z(()=>[A(bo,null,{default:Z(()=>[A(xb,{"model-value":a.value,"onUpdate:modelValue":J[24]||(J[24]=T=>Q.$emit("update:gitignore",T)),language:"gitignore","min-height":"500px",disabled:s.disabled,placeholder:`# Framework gitignore patterns
cache/
scratch/
*.log`},null,8,["model-value","disabled"])]),_:1})]),_:1})])]))}},BT=["onClick","aria-current"],IT={class:"mt-4"},NT={__name:"Tabs",props:{modelValue:{type:[String,Number],required:!0},tabs:{type:Array,required:!0,validator:s=>s.every(e=>e.id&&e.label)},variant:{type:String,default:"pills",validator:s=>["pills","underline"].includes(s)},size:{type:String,default:"md",validator:s=>["sm","md","lg"].includes(s)}},emits:["update:modelValue","change"],setup(s,{emit:e}){const t=s,i=e,n=z(()=>t.variant==="underline"?"border-b border-gray-200 dark:border-white/10":""),r=z(()=>{const a=["flex","gap-2"];return t.variant==="underline"?a.push("-mb-px"):a.push("p-1","bg-gray-100","dark:bg-white/5","rounded-lg"),a.join(" ")}),o=a=>{const u=t.modelValue===a,c=["inline-flex","items-center","gap-2","font-medium","transition-colors"],d={sm:"px-2.5 py-1.5 text-xs",md:"px-3 py-2 text-sm",lg:"px-4 py-2.5 text-base"};return c.push(d[t.size]),t.variant==="pills"?(c.push("rounded-md"),u?c.push("bg-white","text-gray-900","shadow-xs","dark:bg-white/10","dark:text-white"):c.push("text-gray-600","hover:text-gray-900","dark:text-gray-400","dark:hover:text-white")):(c.push("border-b-2","pb-3"),u?c.push("border-sky-600","text-sky-600","dark:border-sky-500","dark:text-sky-400"):c.push("border-transparent","text-gray-600","hover:border-gray-300","hover:text-gray-900","dark:text-gray-400","dark:hover:border-gray-600","dark:hover:text-white")),c.join(" ")},l=a=>{i("update:modelValue",a),i("change",a)};return(a,u)=>(g(),b("div",null,[h("div",{class:xe(n.value)},[h("nav",{class:xe(r.value),"aria-label":"Tabs"},[(g(!0),b(ye,null,$e(s.tabs,c=>(g(),b("button",{key:c.id,type:"button",onClick:d=>l(c.id),class:xe(o(c.id)),"aria-current":s.modelValue===c.id?"page":void 0},[c.icon?(g(),_e(ws(c.icon),{key:0,class:"size-5"})):G("",!0),de(" "+X(c.label)+" ",1),c.badge?(g(),_e(tc,{key:1,variant:s.modelValue===c.id?"emerald":"gray",pill:""},{default:Z(()=>[de(X(c.badge),1)]),_:2},1032,["variant"])):G("",!0)],10,BT))),128))],2)],2),h("div",IT,[dt(a.$slots,"default")])]))}},FT={key:0,class:"mb-4"},zT={key:1,class:"mb-4"},UT={key:2,class:"space-y-6"},HT={key:0,class:"rounded-lg bg-gray-50 p-8 text-center dark:bg-gray-800/40"},WT={key:1,class:"space-y-5"},KT={class:"mb-4"},qT={class:"text-sm font-semibold text-gray-900 dark:text-white"},GT={class:"text-xs text-gray-500 dark:text-gray-400"},JT={class:"space-y-3"},YT={class:"flex items-start gap-3"},QT={class:"grid flex-1 grid-cols-2 gap-3"},XT=["value","onInput","disabled"],ZT={class:"relative"},e6=["onUpdate:modelValue","type","placeholder","disabled"],t6=["onClick"],s6=["onClick"],i6={key:0,class:"mt-4"},n6={key:2,class:"rounded-lg border border-gray-200 bg-gray-50 p-4 text-sm dark:border-gray-700 dark:bg-gray-800/60"},r6={key:3,class:"space-y-3"},o6=["disabled"],l6={key:4,class:"mt-4 flex justify-end"},Rf={__name:"EnvEditor",props:{loading:{type:Boolean,default:!1},error:{type:String,default:""},showSecurityAlert:{type:Boolean,default:!0},allowAdd:{type:Boolean,default:!0},allowRemove:{type:Boolean,default:!0},allowShowValuesToggle:{type:Boolean,default:!0},allowRegroupOption:{type:Boolean,default:!0},showSaveButton:{type:Boolean,default:!0},saveLabel:{type:String,default:"Save .env"},groups:{type:Object,default:()=>({})},variables:{type:Object,default:()=>({})},rawContent:{type:String,default:""},viewMode:{type:String,default:"grouped"},regroupOnSave:{type:Boolean,default:!1}},emits:["update:variables","update:rawContent","update:viewMode","update:regroupOnSave","save"],setup(s,{emit:e}){const t=s,i=e,n=O=>JSON.parse(JSON.stringify(O||{})),r=ie(n(t.variables)),o=ie(t.rawContent||""),l=ie(t.viewMode||"grouped"),a=ie(!!t.regroupOnSave),u=ie(!1),c=ie({});let d=!1,f=!1;Re(()=>t.variables,O=>{d=!0,r.value=n(O),qs(()=>{d=!1})},{deep:!0}),Re(()=>t.rawContent,O=>{f=!0,o.value=O||"",qs(()=>{f=!1})},{immediate:!0}),Re(()=>t.viewMode,O=>{l.value=O||"grouped"}),Re(()=>t.regroupOnSave,O=>{a.value=!!O}),Re(r,O=>{d||(i("update:variables",n(O)),l.value!=="raw"&&(o.value=m(o.value,O,a.value),i("update:rawContent",o.value)))},{deep:!0}),Re(o,O=>{if(!f&&l.value==="raw"){i("update:rawContent",O);const W=p(O);r.value=W,i("update:variables",n(W))}}),Re(l,(O,W)=>{i("update:viewMode",O),O==="raw"&&W!=="raw"&&(Object.keys(r.value).length>0?o.value=m(o.value,r.value,a.value):!o.value&&t.rawContent&&(o.value=t.rawContent))}),Re(a,O=>{i("update:regroupOnSave",O)});const p=O=>{const W=(O||"").split(/\r?\n/),oe={};return W.forEach(se=>{const B=se.trim();if(!B||B.startsWith("#")||!B.includes("="))return;const[ae,...ee]=B.split("=");oe[ae.trim()]=ee.join("=").replace(/^"|"$/g,"")}),oe},v=O=>{const W=Object.entries(O||{});return W.length?W.reduce((oe,[se,B])=>{const ae=se.includes("_")?se.split("_")[0]:"Other";return oe[ae]||(oe[ae]={}),oe[ae][se]={defined:!!B,used:!1,used_in:[],value:B},oe},{}):{}},k=z(()=>{const O=t.groups||{};return Object.keys(O).length?O:v(r.value)}),m=(O,W,oe=!1)=>{if(oe){const $={};for(const[ce,ge]of Object.entries(W)){const Ne=ce.includes("_")?ce.split("_")[0]:"Other";$[Ne]||($[Ne]=[]),$[Ne].push([ce,ge])}const q=[],Y=Object.keys($).sort();for(let ce=0;ce<Y.length;ce++){const ge=Y[ce],Ne=$[ge];ce>0&&(q.push(""),q.push("")),q.push(`# ${ge==="Other"?"Other variables":ge.toUpperCase()}`);for(const[be,ze]of Ne)q.push(`${be}=${ze??""}`)}return q.join(`
`)}const se=(O||"").split(/\r?\n/),B=new Set,ae=[];for(const $ of se){const q=$.trim();if(!q||q.startsWith("#")||!q.includes("=")){ae.push($);continue}const[Y,...ce]=q.split("="),ge=Y.trim(),Ne=ce.join("=").trim();if(ge in W){const be=W[ge]??"";ae.push(`${ge}=${be}`),B.add(ge)}else(Object.keys(W).length===0||Ne==="")&&ae.push($)}const ee=Object.entries(W).filter(([$])=>!B.has($));if(ee.length>0){const $={};for(const[q,Y]of ee){const ce=q.includes("_")?q.split("_")[0]:"Other";$[ce]||($[ce]=[]),$[ce].push([q,Y])}for(const[q,Y]of Object.entries($)){ae.length>0&&ae[ae.length-1]!==""&&(ae.push(""),ae.push("")),ae.push(`# ${q==="Other"?"Other variables":q.toUpperCase()}`);for(const[ce,ge]of Y)ae.push(`${ce}=${ge??""}`)}}return ae.join(`
`)},w=()=>{if(!t.allowAdd)return;const O="NEW_VARIABLE";let W=1,oe=`${O}_${W}`;for(;r.value[oe];)W+=1,oe=`${O}_${W}`;r.value={...r.value,[oe]:""}},L=O=>{if(!t.allowRemove)return;const W=n(r.value);delete W[O],r.value=W},I=(O,W)=>{if(!W||O===W)return;const oe=W.replace(/[^A-Z0-9_]/gi,"").toUpperCase();if(!oe)return;const se=n(r.value);se[oe]||(se[oe]=se[O],delete se[O],r.value=se)},H=O=>{const W=["PASSWORD","SECRET","KEY","TOKEN"],oe=O.toUpperCase();return W.some(se=>oe.includes(se))},N=O=>u.value||c.value[O]||!H(O),P=O=>{c.value[O]=!c.value[O]},S=()=>{u.value=!u.value};return(O,W)=>(g(),b("div",null,[s.error?(g(),b("div",FT,[A(_s,{type:"error",title:"Error",description:s.error},null,8,["description"])])):G("",!0),s.showSecurityAlert?(g(),b("div",zT,[A(_s,{type:"warning",title:" Contains Sensitive Data"},{actions:Z(()=>[s.viewMode==="grouped"&&s.allowShowValuesToggle?(g(),_e(Ke,{key:0,variant:"soft",size:"sm",onClick:S},{default:Z(()=>[de(X(u.value?"Hide Values":"Show Values"),1)]),_:1})):G("",!0)]),default:Z(()=>[W[4]||(W[4]=de(" This file can include passwords and secrets. Keep it out of version control. ",-1))]),_:1})])):G("",!0),A(NT,{modelValue:l.value,"onUpdate:modelValue":W[0]||(W[0]=oe=>l.value=oe),tabs:[{id:"grouped",label:"Key/Value Editor"},{id:"raw",label:"Raw .env"}],variant:"pills",class:"mb-4"},null,8,["modelValue"]),l.value==="grouped"?(g(),b("div",UT,[Object.keys(k.value).length===0?(g(),b("div",HT,[A(ft(Za),{class:"mx-auto mb-3 h-10 w-10 text-gray-400"}),W[6]||(W[6]=h("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"No environment variables yet.",-1)),s.allowAdd?(g(),_e(Ke,{key:0,variant:"primary",class:"mt-4",onClick:w},{default:Z(()=>[...W[5]||(W[5]=[de(" Add Variable ",-1)])]),_:1})):G("",!0)])):(g(),b("div",WT,[(g(!0),b(ye,null,$e(k.value,(oe,se)=>(g(),b("div",{key:se,class:"rounded-lg bg-gray-50 p-5 dark:bg-gray-800/40"},[h("div",KT,[h("p",qT,X(se==="Other"?"Uncategorized":se.toUpperCase()),1),h("p",GT,"Variables with the "+X(se)+" prefix.",1)]),h("div",JT,[(g(!0),b(ye,null,$e(oe,(B,ae)=>(g(),b("div",{key:ae,class:"space-y-2"},[h("div",YT,[h("div",QT,[h("input",{value:ae,onInput:ee=>I(ae,ee.target.value),type:"text",class:"w-full rounded-md border border-gray-300 bg-white px-3 py-2 font-mono text-sm uppercase text-gray-900 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-100",disabled:s.loading},null,40,XT),h("div",ZT,[Ze(h("input",{"onUpdate:modelValue":ee=>r.value[ae]=ee,type:N(ae)?"text":"password",placeholder:B.defined?"value":"(not set)",class:"w-full rounded-md border border-gray-300 bg-white px-3 py-2 font-mono text-sm text-gray-900 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-100",disabled:s.loading},null,8,e6),[[dx,r.value[ae]]]),H(ae)&&s.allowShowValuesToggle?(g(),b("button",{key:0,type:"button",class:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300",onClick:ee=>P(ae)},[N(ae)?(g(),_e(ft($w),{key:0,class:"h-4 w-4"})):(g(),_e(ft(Rw),{key:1,class:"h-4 w-4"}))],8,t6)):G("",!0)])]),s.allowRemove?(g(),b("button",{key:0,type:"button",class:"mt-2 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300",onClick:ee=>L(ae)},[...W[7]||(W[7]=[h("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,s6)):G("",!0)])]))),128))]),s.allowAdd?(g(),b("div",i6,[A(Ke,{variant:"secondary",size:"sm",onClick:w},{default:Z(()=>[...W[8]||(W[8]=[de(" + Add Variable ",-1)])]),_:1})])):G("",!0)]))),128))])),s.allowRegroupOption?(g(),b("div",n6,[A(tt,{modelValue:a.value,"onUpdate:modelValue":W[1]||(W[1]=oe=>a.value=oe),label:"Regroup .env file by prefix when saving",description:"Rewrites the file grouped by prefix and strips comments."},null,8,["modelValue"])])):G("",!0)])):(g(),b("div",r6,[Ze(h("textarea",{"onUpdate:modelValue":W[2]||(W[2]=oe=>o.value=oe),class:"h-80 w-full rounded-md border border-gray-300 bg-white px-3 py-2 font-mono text-sm text-gray-900 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-100",disabled:s.loading},null,8,o6),[[mr,o.value]]),W[9]||(W[9]=h("p",{class:"text-xs text-gray-500"},"Edit the .env file directly. Comments and formatting are preserved.",-1))])),s.showSaveButton?(g(),b("div",l6,[A(Ke,{disabled:s.loading,variant:"primary",onClick:W[3]||(W[3]=oe=>O.$emit("save"))},{default:Z(()=>[de(X(s.saveLabel),1)]),_:1},8,["disabled"])])):G("",!0)]))}},a6={class:"flex min-h-screen"},c6={class:"w-64 shrink-0 border-r border-gray-200 p-6 dark:border-gray-800"},u6={class:"space-y-1 mb-6"},d6=["onClick"],f6=["fill","viewBox","stroke"],h6=["stroke-linecap","stroke-linejoin","stroke-width","fill","d"],p6={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},m6={class:"flex-1 p-10"},g6={class:"mt-8 space-y-6"},v6={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},y6={class:"space-y-5"},b6={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},k6={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 space-y-6"},x6={class:"space-y-6"},w6={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},S6={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},C6={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},_6={__name:"NewProjectView",setup(s){const e=Qa(),t=Er(),i=ec(),n=Bs("loadProjects"),r=ie(null),o=ie(null),l=ie(!0),a=C=>C?Array.isArray(C)?Array.from(new Set(C.map(E=>String(E)))):typeof C=="string"?[C]:[]:[],u=()=>{Array.isArray(m.value.ai.assistants)||(m.value.ai.assistants=a(m.value.ai.assistants))},c=[{id:"overview",label:"Overview",icon:Xa},{id:"basics",label:"Basics",icon:zd},{id:"structure",label:"Project Structure",icon:ma},{id:"packages",label:"Packages",icon:Ud},{id:"ai",label:"AI Assistants",svgIcon:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"},{id:"git",label:"Git & Hooks",svgIcon:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"},{id:"connections",label:"Connections",icon:Hd},{id:"env",label:".env Defaults",icon:Za},{id:"scaffold",label:"Scaffold Behavior",svgIcon:"M256 64L576 64L576 576L64 576L64 192L256 192L256 64zM256 224L96 224L96 544L256 544L256 224zM288 544L544 544L544 96L288 96L288 544zM440 152L488 152L488 200L440 200L440 152zM392 152L392 200L344 200L344 152L392 152zM440 248L488 248L488 296L440 296L440 248zM392 248L392 296L344 296L344 248L392 248zM152 280L200 280L200 328L152 328L152 280zM392 344L392 392L344 392L344 344L392 344zM152 376L200 376L200 424L152 424L152 376zM488 344L488 392L440 392L440 344L488 344z",svgViewBox:"0 0 640 640",svgFill:"currentColor",svgStroke:"none",svgStrokeWidth:0,svgPathFill:"currentColor"}],d=ie("basics"),f=ie(!1),p=ie(null),v=ie(!0),k=ie(new Set),m=ie({name:"",location:"",type:"project",author:{name:"",email:"",affiliation:""},scaffold:{seed_on_scaffold:!1,seed:"",set_theme_on_scaffold:!0,ggplot_theme:"theme_minimal",source_all_functions:!0,notebook_format:"quarto",ide:"vscode",positron:!1},packages:{use_renv:!1,default_packages:[]},ai:{enabled:!0,assistants:[],canonical_file:"CLAUDE.md",canonical_content:""},git:{initialize:!0,gitignore_template:"gitignore-project",gitignore_content:"",user_name:"",user_email:"",hooks:{ai_sync:!1,data_security:!1,check_sensitive_dirs:!1}},connections:{databaseConnections:[],s3Connections:[],defaultDatabase:null,defaultStorageBucket:null},env:{variables:{},rawContent:`# Framework environment defaults
# Populate these values before running scaffold() or publishing.

# PostgreSQL connection
POSTGRES_HOST=127.0.0.1
POSTGRES_PORT=5432
POSTGRES_DB=postgres
POSTGRES_SCHEMA=public
POSTGRES_USER=postgres
POSTGRES_PASSWORD=

# S3-compatible storage (AWS S3, MinIO, etc.)
S3_ACCESS_KEY=
S3_SECRET_KEY=
S3_BUCKET=
S3_REGION=us-east-1
S3_ENDPOINT=`,viewMode:"grouped",regroupOnSave:!1,groups:{}},directories_enabled:{},directories:{},render_dirs:{},extra_directories:[],extra_directories_enabled:{}}),w=()=>{const C=t.query.section;C&&["overview","author","scaffold","structure","connections","env","packages","ai","git"].includes(C)&&(d.value=C)};Re(()=>t.query.section,C=>{C&&["overview","author","scaffold","structure","connections","env","packages","ai","git"].includes(C)?d.value=C:C||(d.value="overview")}),Re(d,C=>{t.query.section!==C&&e.replace({query:{...t.query,section:C}})}),is(async()=>{console.log("[DEBUG] NewProjectView mounted - starting initialization"),w();try{console.log("[DEBUG] Fetching global settings from /api/settings");const C=await fetch("/api/settings");if(console.log("[DEBUG] Settings response status:",C.status,C.ok),C.ok&&(r.value=await C.json(),r.value)){if(r.value.global?.projects_root&&(m.value.location=r.value.global.projects_root),m.value.author={...r.value.author},r.value.defaults?.project_type&&(m.value.type=r.value.defaults.project_type),r.value.defaults?.scaffold&&(m.value.scaffold={...m.value.scaffold,...r.value.defaults.scaffold}),r.value.defaults?.notebook_format&&(m.value.scaffold.notebook_format=r.value.defaults.notebook_format),m.value.scaffold.notebook_format||(m.value.scaffold.notebook_format="quarto"),r.value.defaults?.positron!==void 0&&(m.value.scaffold.positron=r.value.defaults.positron),r.value.defaults?.packages)if(Array.isArray(r.value.defaults.packages)){const K=r.value.defaults.packages.map(Ce=>({name:Ce.name||"",source:Ce.source||"cran",auto_attach:Ce.auto_attach!==!1}));m.value.packages.default_packages.splice(0,m.value.packages.default_packages.length,...K)}else r.value.defaults.packages.default_packages&&(m.value.packages={use_renv:r.value.defaults.packages.use_renv||!1,default_packages:(r.value.defaults.packages.default_packages||[]).map(K=>({name:K.name||"",source:K.source||"cran",auto_attach:K.auto_attach!==!1}))});const j=a(r.value.defaults?.ai_assistants);if(m.value.ai={enabled:r.value.defaults?.ai_support!==!1,assistants:j.length>0?j:["claude"],canonical_file:r.value.defaults?.ai_canonical_file||"CLAUDE.md",canonical_content:""},u(),m.value.ai.enabled&&m.value.ai.canonical_file&&q(m.value.ai.canonical_file,m.value.type),m.value.git.initialize=r.value.defaults?.use_git!==!1,m.value.git.user_name=r.value.git?.user_name||"",m.value.git.user_email=r.value.git?.user_email||"",r.value.defaults?.git_hooks&&(m.value.git.hooks={...r.value.defaults.git_hooks}),r.value.defaults?.env){const K=r.value.defaults.env;typeof K=="string"?m.value.env.rawContent=K:K?.raw&&(m.value.env.rawContent=K.raw)}const re={project:"gitignore-project",project_sensitive:"gitignore-project_sensitive",course:"gitignore-course",presentation:"gitignore-presentation"};m.value.git.gitignore_template=re[m.value.type]||"gitignore-project",m.value.git.gitignore_template&&$(m.value.git.gitignore_template)}const E=await fetch("/api/settings-catalog");E.ok&&(o.value=await E.json()),L(),P()}catch(C){console.error("[DEBUG] Failed to load settings:",C),console.error("[DEBUG] Error details:",C.message,C.stack),i.error("Load Error","Could not load default settings")}finally{console.log("[DEBUG] Initialization complete, loading =",l.value),l.value=!1,setTimeout(()=>{if(p.value&&p.value.$el){const C=p.value.$el.querySelector("input");C&&C.focus()}},100)}}),Re(()=>m.value.type,C=>{L();const E={project:"gitignore-project",project_sensitive:"gitignore-project_sensitive",course:"gitignore-course",presentation:"gitignore-presentation"};m.value.git.gitignore_template=E[C]||"gitignore-project"}),Re(()=>m.value.git.gitignore_template,C=>{C&&$(C)}),Re(()=>m.value.name,()=>{r.value?.global?.projects_root&&U()}),Re(()=>m.value.ai.enabled,C=>{C&&m.value.ai.canonical_file&&q(m.value.ai.canonical_file,m.value.type)}),Re(()=>m.value.ai.canonical_file,C=>{C&&m.value.ai.enabled&&q(C,m.value.type)}),Re(()=>m.value.type,C=>{m.value.ai.canonical_file==="CLAUDE.md"&&m.value.ai.enabled&&q("CLAUDE.md",C)});const L=()=>{if(!o.value?.project_types)return;const C=o.value.project_types[m.value.type];if(!C?.directories)return;const E=r.value?.project_types?.[m.value.type];if(!m.value.git.gitignore_template||m.value.git.gitignore_template==="gitignore-project"){const j={project:"gitignore-project",project_sensitive:"gitignore-sensitive",course:"gitignore-course",presentation:"gitignore-presentation"};m.value.git.gitignore_template=j[m.value.type]||"gitignore-project"}$(m.value.git.gitignore_template),m.value.directories_enabled=Object.entries(C.directories).reduce((j,[re,K])=>(E?.directories_enabled?.[re]!==void 0?j[re]=E.directories_enabled[re]:j[re]=K.enabled_by_default===!0,j),{}),m.value.directories=Object.entries(C.directories).reduce((j,[re,K])=>(j[re]=E?.directories?.[re]||K.default||"",j),{}),C.render_dirs?m.value.render_dirs=Object.entries(C.render_dirs).reduce((j,[re,K])=>(j[re]=E?.render_dirs?.[re]||K.default||"",j),{}):m.value.render_dirs={},E?.extra_directories&&Array.isArray(E.extra_directories)?(m.value.extra_directories=E.extra_directories.map(j=>({...j,_source:"global"})),m.value.extra_directories_enabled=E.extra_directories.reduce((j,re)=>(re.key&&(j[re.key]=!0),j),{})):(m.value.extra_directories=[],m.value.extra_directories_enabled={}),console.log("[DEBUG] loadProjectTypeDefaults() finished - packages still:",m.value.packages.default_packages)},I=C=>o.value?.project_types?.[C]?.label||C,H=(C="")=>{const E={};return C.split(/\r?\n/).forEach(j=>{const re=j.trim();if(!re||re.startsWith("#")||!re.includes("="))return;const[K,...Ce]=re.split("=");E[K.trim()]=Ce.join("=").replace(/^"|"$/g,"")}),E},N=(C={})=>{const E=Object.entries(C);return E.length?E.reduce((j,[re,K])=>{const Ce=re.includes("_")?re.split("_")[0]:"Other";return j[Ce]||(j[Ce]={}),j[Ce][re]={defined:!!K,used:!1,used_in:[],value:K},j},{}):{}};Re(()=>m.value.env.variables,C=>{m.value.env.groups=N(C||{})},{deep:!0});const P=()=>{m.value.env.rawContent&&(m.value.env.variables=H(m.value.env.rawContent),m.value.env.groups=N(m.value.env.variables))},S=z(()=>({overview:"Overview",basics:"Basics",author:"Author & Metadata",scaffold:"Scaffold Behavior",structure:"Project Structure",connections:"Connections",env:".env Defaults",packages:"Packages & Dependencies",ai:"AI Assistants",git:"Git & Hooks",review:"Review & Create"})[d.value]||"New Project"),O=z(()=>({overview:"Quick overview of your project settings. We used your Framework Project Defaults as a starting point.",basics:"Essential project settings including name, location, type, and editor support.",author:"Configure author information embedded in project templates.",scaffold:"Runtime settings that control what happens when scaffold() runs.",structure:"Customize which directories to create for this project type.",connections:"Database and storage connections for this project.",env:"Environment variables template for this project.",packages:"Configure package management and default packages.",ai:"Configure AI assistant integration for this project.",git:"Configure version control and git hooks.",review:"Review your project configuration and create the project."})[d.value]||"");z(()=>({vscode:"Positron / VS Code",rstudio:"RStudio","rstudio,vscode":"Both",none:"Other"})[m.value.scaffold.ide]||m.value.scaffold.ide),z(()=>{const C=[];return m.value.git.hooks.ai_sync&&C.push("Sync AI files"),m.value.git.hooks.data_security&&C.push("Check for secrets"),m.value.git.hooks.check_sensitive_dirs&&C.push("Warn about sensitive dirs"),C});const W=z(()=>{const C=m.value.connections.databaseConnections.length,E=m.value.connections.s3Connections.length;return{databases:C,buckets:E}}),oe=z(()=>{const C=m.value.env?.variables||{};return Object.keys(C).length}),se=z(()=>{const C=m.value.name||"Untitled Project",E=m.value.author?.name||"",j=ae.value,re=I(m.value.type),K=ge("workspace"),Ce=ge("input"),pe=ge("output"),ke=m.value.packages?.default_packages?.length||0,Oe=m.value.packages?.use_renv||!1,Be=oe.value,Ye=m.value.ai?.enabled||!1,Qe=m.value.ai?.assistants?.[0]?m.value.ai.assistants.map(si=>si.charAt(0).toUpperCase()+si.slice(1)).join(", "):"",bt=m.value.ai?.canonical_file||"",Le=m.value.git?.initialize||!1,ot=W.value.databases,jt=W.value.buckets,Ts=ot>0||jt>0?`${ot} database${ot!==1?"s":""}${jt>0?`  ${jt} bucket${jt!==1?"s":""}`:""}`:"framework_db only";return[{id:"basics",title:"Basics",section:"basics",content:`<div>${C}  ${E}  ${re}</div><div class="text-sm text-gray-600 dark:text-gray-400 mt-1">${j}</div>`},{id:"structure",title:"Project Structure",section:"structure",content:`${re}  ${K} workspace  ${Ce} input  ${pe} output`},{id:"packages",title:"Packages",section:"packages",content:ke>0?`${ke} packages  renv ${Oe?"enabled":"disabled"}`:`renv: ${Oe?"enabled":"disabled"}`},{id:"env",title:".env Defaults",section:"env",content:Be>0?`${Be} variable${Be===1?"":"s"}`:"No variables defined"},{id:"ai",title:"AI Assistants",section:"ai",content:Ye?`<span class="text-green-600 dark:text-green-400">${Qe}  ${bt}</span>`:'<span class="text-gray-600 dark:text-gray-400">Disabled</span>'},{id:"git",title:"Git & Hooks",section:"git",content:`Git: ${Le?"enabled":"disabled"}`},{id:"connections",title:"Connections",section:"connections",content:Ts},{id:"scaffold",title:"Scaffold Behavior",section:"scaffold",content:`${m.value.scaffold?.source_all_functions?"Functions loaded from functions/":"Does not load functions"}  ${m.value.scaffold?.set_theme_on_scaffold?`ggplot2: ${(m.value.scaffold.ggplot_theme||"theme_minimal").replace("theme_","")}`:"No ggplot theme"}  ${m.value.scaffold?.set_seed?`Seed: ${m.value.scaffold.seed}`:"No random seed"}`}]}),B=z({get(){const C=m.value.git.hooks||{};return{initialize:m.value.git.initialize,user_name:m.value.git.user_name||"",user_email:m.value.git.user_email||"",hooks:{ai_sync:C.ai_sync||!1,data_security:C.data_security||!1,check_sensitive_dirs:C.check_sensitive_dirs||!1}}},set(C){m.value.git.initialize=C.initialize,m.value.git.user_name=C.user_name,m.value.git.user_email=C.user_email,m.value.git.hooks={ai_sync:C.hooks.ai_sync,data_security:C.hooks.data_security,check_sensitive_dirs:C.hooks.check_sensitive_dirs}}}),ae=z(()=>{const C=m.value.location,E=r.value?.global?.projects_root;return!C||C===E?"(not set)":C}),ee=C=>{m.value.location=C;const E=r.value?.global?.projects_root||"",j=typeof C=="string"?C.trim():"";!j||E&&j===E?(v.value=!0,U()):v.value=!1},$=async C=>{try{const E=await fetch(`/api/templates/${C}`);if(E.ok){const j=await E.json();j.success&&j.contents&&(m.value.git.gitignore_content=j.contents)}}catch(E){console.error("Failed to load gitignore template:",E)}},q=async(C,E)=>{try{let j;if(C==="CLAUDE.md")switch(E){case"project_sensitive":j="ai_claude_sensitive";break;case"course":j="ai_claude_course";break;case"presentation":j="ai_claude_presentation";break;default:j="ai_claude_project"}else C==="AGENTS.md"?j="ai_agents":C===".github/copilot-instructions.md"&&(j="ai_copilot");const re=await fetch(`/api/templates/${j}`);if(re.ok){const K=await re.json();K.success&&K.contents&&(m.value.ai.canonical_content=K.contents)}}catch(j){console.error("Failed to load AI template:",j)}};z(()=>o.value?.project_types?o.value.project_types[m.value.type]?.directories||{}:{}),z(()=>{if(!o.value?.project_types)return[];const C=o.value.project_types[m.value.type];return C?.directories?Object.keys(C.directories).filter(E=>{const j=C.directories[E];return j&&j.enabled_by_default===!1}):[]}),z(()=>Object.values(m.value.directories_enabled).filter(C=>C).length);const Y=z(()=>(m.value.extra_directories||[]).filter(C=>C.type==="input"&&C._source==="global"));z(()=>Y.value.filter(C=>C.scope==="private")),z(()=>Y.value.filter(C=>C.scope==="public")),z(()=>(m.value.extra_directories||[]).filter(C=>C.type==="workspace"&&C._source==="global"));const ce=z(()=>(m.value.extra_directories||[]).filter(C=>C.type==="output"&&C._source==="global"));z(()=>ce.value.filter(C=>C.scope==="private")),z(()=>ce.value.filter(C=>C.scope==="public"));const ge=C=>Object.keys(m.value.directories_enabled).filter(j=>m.value.directories_enabled[j]?C==="workspace"?j==="notebooks"||j==="scripts"||j==="functions":C==="input"?j.startsWith("inputs_"):C==="output"?j.startsWith("outputs_"):C==="temporary"?j==="cache"||j==="scratch":!1:!1).length,Ne=[{key:"notebooks",label:"Notebooks",hint:"Quarto or R Markdown notebooks for analysis.",defaultRenderDir:"outputs/notebooks"},{key:"docs",label:"Documentation",hint:"Codebooks, documentation, and other reference materials.",defaultRenderDir:"outputs/docs"}],be=[{key:"functions",label:"Functions",hint:"R files here are sourced by scaffold(), so helper functions are available in every project session."},{key:"scripts",label:"Scripts",hint:"Reusable R scripts, job runners, or automation tasks."}],ze=[{key:"inputs_raw",label:"Raw data",hint:"Read-only exports from source systems."},{key:"inputs_intermediate",label:"Intermediate data",hint:"Data after light cleaning or pre-processing steps."},{key:"inputs_final",label:"Analysis-ready data",hint:"Final inputs ready for modeling or reporting."}],Ue=[{key:"outputs_tables",label:"Tables",hint:"Publishable tables ready for reports or manuscripts."},{key:"outputs_figures",label:"Figures",hint:"Final plots and graphics."},{key:"outputs_models",label:"Models",hint:"Serialized models or model summaries."},{key:"outputs_reports",label:"Reports",hint:"Final reports and deliverables ready for publication."}],Je=[{key:"cache",label:"Cache",hint:"Temporary artifacts (gitignored)."},{key:"scratch",label:"Scratch",hint:"Short-lived explorations (gitignored)."}],ht=[{privateKey:"inputs_private_raw",publicKey:"inputs_public_raw",label:"Raw data",privateLabel:"Raw data (private)",publicLabel:"Raw data (public)"},{privateKey:"inputs_private_intermediate",publicKey:"inputs_public_intermediate",label:"Intermediate data",privateLabel:"Intermediate data (private)",publicLabel:"Intermediate data (public)"},{privateKey:"inputs_private_final",publicKey:"inputs_public_final",label:"Analysis-ready data",privateLabel:"Analysis-ready data (private)",publicLabel:"Analysis-ready data (public)"}],rt=[{privateKey:"outputs_private_tables",publicKey:"outputs_public_tables",label:"Tables",privateLabel:"Tables (private)",publicLabel:"Tables (public)"},{privateKey:"outputs_private_figures",publicKey:"outputs_public_figures",label:"Figures",privateLabel:"Figures (private)",publicLabel:"Figures (public)"},{privateKey:"outputs_private_models",publicKey:"outputs_public_models",label:"Models",privateLabel:"Models (private)",publicLabel:"Models (public)"},{privateKey:"outputs_private_reports",publicKey:"outputs_public_reports",label:"Reports",privateLabel:"Reports (private)",publicLabel:"Reports (public)"}],te=(C,E)=>o.value?.project_types?.[C]?.directories?.[E]||{},ve=(C,E)=>E.map(j=>{const re=te(C,j.key);return{key:j.key,label:re.label||j.label,hint:re.hint||j.hint||""}});z(()=>ve("project",Ne).map(C=>({...C,defaultRenderDir:Ne.find(E=>E.key===C.key)?.defaultRenderDir||""}))),z(()=>ve("project",be)),z(()=>ve("project",ze)),z(()=>ve("project",Ue)),z(()=>ve("project",Je));const Q=C=>C.map(E=>{const j=te("project_sensitive",E.privateKey),re=te("project_sensitive",E.publicKey);return{...E,privateLabel:j.label||E.privateLabel,publicLabel:re.label||E.publicLabel}});z(()=>Q(ht)),z(()=>Q(rt));const J=z(()=>Array.isArray(m.value.extra_directories)?m.value.extra_directories:[]),T=C=>{m.value.extra_directories=C},x=()=>{if(!o.value?.project_types?.[m.value.type])return;const C=o.value.project_types[m.value.type];C.directories&&(m.value.directories={},Object.keys(C.directories).forEach(E=>{m.value.directories[E]=C.directories[E].default})),C.directories&&(m.value.directories_enabled={},Object.keys(C.directories).forEach(E=>{m.value.directories_enabled[E]=C.directories[E].enabled_by_default===!0})),m.value.render_dirs={},C.gitignore_template&&(m.value.git.gitignore_content=C.gitignore_template)},_=C=>{e.push({query:{...t.query,section:C}})},U=()=>{if(!v.value||!m.value.name||!m.value.name.trim())return;const C=r.value?.global?.projects_root||"";if(!C)return;const E=(m.value.location||"").trim();if(E&&!E.startsWith(C))return;const j=m.value.name.toLowerCase().trim().replace(/[\s_]+/g,"-").replace(/[^a-z0-9-]/g,"").replace(/-+/g,"-").replace(/^-|-$/g,"");if(!j){m.value.location=C;return}const re=C.replace(/\/+$/,"");m.value.location=`${re}/${j}`},ne=async()=>{if(!m.value.name||!m.value.name.trim()){i.error("Validation Error","Project name is required"),_("overview");return}if(!m.value.location||!m.value.location.trim()){i.error("Validation Error","Project location is required"),_("overview");return}try{f.value=!0;const C=o.value?.project_types?.[m.value.type],E={};C?.directories&&Object.entries(C.directories).forEach(([ke,Oe])=>{m.value.directories_enabled[ke]&&(E[ke]=m.value.directories[ke]||Oe.default)});const j={};m.value.connections.databaseConnections.forEach(ke=>{const{_id:Oe,name:Be,...Ye}=ke;j[Be]=Ye});const re={};m.value.connections.s3Connections.forEach(ke=>{const{_id:Oe,name:Be,...Ye}=ke;re[Be]=Ye});const K={name:m.value.name.trim(),location:m.value.location.trim(),type:m.value.type,author:m.value.author,scaffold:m.value.scaffold,packages:m.value.packages,ai:m.value.ai,git:m.value.git,connections:{default_database:m.value.connections.defaultDatabase,default_storage_bucket:m.value.connections.defaultStorageBucket,databases:j,storage_buckets:re},env:{raw:m.value.env.rawContent||""},directories:E,render_dirs:m.value.render_dirs||{},extra_directories:(m.value.extra_directories||[]).filter(ke=>{const Oe=ke.key&&ke.key.trim()&&ke.label&&ke.label.trim()&&ke.path&&ke.path.trim(),Be=m.value.extra_directories_enabled?.[ke.key]!==!1;return Oe&&Be}),extra_directories_enabled:m.value.extra_directories_enabled||{}},Ce=await fetch("/api/projects/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(K)});if(!Ce.ok){const ke=await Ce.json();throw new Error(ke.message||"Failed to create project")}const pe=await Ce.json();if(pe.success===!1)throw new Error(pe.error||"Project creation failed");i.success("Project Created",`${m.value.name} has been created successfully`),await n(),e.push("/projects")}catch(C){console.error("Failed to create project:",C),i.error("Creation Failed",C.message||"Could not create the project")}finally{f.value=!1}},le=C=>{(C.metaKey||C.ctrlKey)&&C.key==="s"&&(C.preventDefault(),ne())};return is(()=>{window.addEventListener("keydown",le)}),Dr(()=>{window.removeEventListener("keydown",le)}),(C,E)=>(g(),b("div",a6,[h("nav",c6,[E[28]||(E[28]=h("h2",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"New Project",-1)),h("div",u6,[(g(),b(ye,null,$e(c,j=>(g(),b(ye,{key:j.id},[j.id==="basics"?(g(),_e(La,{key:0},{default:Z(()=>[...E[27]||(E[27]=[de("Settings",-1)])]),_:1})):G("",!0),h("a",{href:"#",onClick:Nt(re=>d.value=j.id,["prevent"]),class:xe(["flex items-center gap-2 px-3 py-2 rounded-md text-sm transition",d.value===j.id?"bg-sky-50 text-sky-700 font-medium dark:bg-sky-900/20 dark:text-sky-400":"text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-800"])},[j.icon?(g(),_e(ws(j.icon),{key:0,class:"h-4 w-4"})):j.svgIcon?(g(),b("svg",{key:1,class:"h-4 w-4",fill:j.svgFill??"none",viewBox:j.svgViewBox??"0 0 24 24",stroke:j.svgStroke??"currentColor"},[h("path",{"stroke-linecap":j.svgStrokeLinecap??"round","stroke-linejoin":j.svgStrokeLinejoin??"round","stroke-width":j.svgStrokeWidth??2,fill:j.svgPathFill??"none",d:j.svgIcon},null,8,h6)],8,f6)):G("",!0),de(" "+X(j.label),1)],10,d6)],64))),64))]),h("div",p6,[A(Ke,{variant:"primary",size:"md",class:"w-full",disabled:f.value||!m.value.name||!m.value.location,onClick:ne},{default:Z(()=>[de(X(f.value?"Creating...":"Create Project"),1)]),_:1},8,["disabled"])])]),h("div",m6,[A(Tr,{title:S.value,description:O.value},null,8,["title","description"]),h("div",g6,[Ze(h("div",null,[A(Ef,{cards:se.value,onNavigate:E[0]||(E[0]=j=>d.value=j)},null,8,["cards"])],512),[[ut,d.value==="overview"]]),Ze(h("div",null,[h("div",v6,[h("div",y6,[A(Ae,{ref_key:"projectNameInput",ref:p,modelValue:m.value.name,"onUpdate:modelValue":E[1]||(E[1]=j=>m.value.name=j),label:"Project Name",hint:"Human-readable name for your project",placeholder:"My Analysis Project",required:""},null,8,["modelValue"]),A(Ae,{"model-value":m.value.location,"onUpdate:modelValue":ee,label:"Project Location",hint:"Directory where the project will be created",placeholder:"e.g., ~/projects or /Users/yourname/code"},null,8,["model-value"]),A(Qs,{modelValue:m.value.type,"onUpdate:modelValue":E[2]||(E[2]=j=>m.value.type=j),label:"Project Type",hint:"Choose the template structure for your project"},{default:Z(()=>[...E[29]||(E[29]=[h("option",{value:"project"},"Standard Project",-1),h("option",{value:"project_sensitive"},"Privacy Sensitive Project",-1),h("option",{value:"course"},"Course",-1),h("option",{value:"presentation"},"Presentation",-1)])]),_:1},8,["modelValue"]),h("div",null,[E[31]||(E[31]=h("label",{class:"block text-sm font-semibold text-gray-900 dark:text-white mb-3"}," Supported Editors ",-1)),A(Ji,{modelValue:m.value.scaffold.positron,"onUpdate:modelValue":E[3]||(E[3]=j=>m.value.scaffold.positron=j),id:"support-positron",description:"Enable Positron-specific workspace and settings files"},{default:Z(()=>[...E[30]||(E[30]=[de(" Positron ",-1)])]),_:1},8,["modelValue"]),E[32]||(E[32]=h("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-3"}," RStudio supported by default ",-1))]),A(Qs,{modelValue:m.value.scaffold.notebook_format,"onUpdate:modelValue":E[4]||(E[4]=j=>m.value.scaffold.notebook_format=j),label:"Default Notebook Format",hint:"Format used when creating new notebooks"},{default:Z(()=>[...E[33]||(E[33]=[h("option",{value:"quarto"},"Quarto (.qmd)",-1),h("option",{value:"rmarkdown"},"R Markdown (.Rmd)",-1)])]),_:1},8,["modelValue"]),h("div",b6,[A(Tf,{modelValue:m.value.author,"onUpdate:modelValue":E[5]||(E[5]=j=>m.value.author=j)},null,8,["modelValue"])])])])],512),[[ut,d.value==="basics"]]),Ze(h("div",null,[h("div",k6,[E[34]||(E[34]=h("div",null,[h("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"}," Scaffold Behavior "),h("p",{class:"text-sm text-gray-600 dark:text-gray-400"},[de(" Automatic actions when "),h("code",{class:"px-1.5 py-0.5 bg-gray-200 dark:bg-gray-700 rounded text-xs"},"scaffold()"),de(" runs to initialize your project environment. ")])],-1)),A(Pf,{modelValue:m.value.scaffold,"onUpdate:modelValue":E[6]||(E[6]=j=>m.value.scaffold=j),flush:""},null,8,["modelValue"])])],512),[[ut,d.value==="scaffold"]]),Ze(h("div",x6,[h("div",w6,[A(y_,{legend:"Project Type",description:"Select a project type to customize the directory structure."},{default:Z(()=>[A(kl,{modelValue:m.value.type,"onUpdate:modelValue":E[7]||(E[7]=j=>m.value.type=j),id:"type-project",name:"project-type",value:"project"},{default:Z(()=>[...E[35]||(E[35]=[h("div",null,[h("div",{class:"font-medium text-sm"},"Standard Project"),h("div",{class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5"}," Full-featured with organized data, work, and output directories ")],-1)])]),_:1},8,["modelValue"]),A(kl,{modelValue:m.value.type,"onUpdate:modelValue":E[8]||(E[8]=j=>m.value.type=j),id:"type-sensitive",name:"project-type",value:"project_sensitive"},{default:Z(()=>[...E[36]||(E[36]=[h("div",null,[h("div",{class:"font-medium text-sm"},"Privacy Sensitive Project"),h("div",{class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5"}," Enhanced privacy controls with separate private/public flows ")],-1)])]),_:1},8,["modelValue"]),A(kl,{modelValue:m.value.type,"onUpdate:modelValue":E[9]||(E[9]=j=>m.value.type=j),id:"type-course",name:"project-type",value:"course"},{default:Z(()=>[...E[37]||(E[37]=[h("div",null,[h("div",{class:"font-medium text-sm"},"Course/Teaching"),h("div",{class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5"}," Simplified structure for teaching materials ")],-1)])]),_:1},8,["modelValue"]),A(kl,{modelValue:m.value.type,"onUpdate:modelValue":E[10]||(E[10]=j=>m.value.type=j),id:"type-presentation",name:"project-type",value:"presentation"},{default:Z(()=>[...E[38]||(E[38]=[h("div",null,[h("div",{class:"font-medium text-sm"},"Presentation"),h("div",{class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5"}," Minimal structure for slides and presentations ")],-1)])]),_:1},8,["modelValue"])]),_:1})]),o.value?(g(),_e($f,{key:0,"project-type":m.value.type,directories:m.value.directories,"render-dirs":m.value.render_dirs,enabled:m.value.directories_enabled,"extra-directories":J.value,settings:m.value,gitignore:m.value.git.gitignore_content,catalog:o.value.project_types?.[m.value.type],"new-extra-ids":k.value,"allow-destruction":!0,"onUpdate:directories":E[11]||(E[11]=j=>m.value.directories=j),"onUpdate:renderDirs":E[12]||(E[12]=j=>m.value.render_dirs=j),"onUpdate:enabled":E[13]||(E[13]=j=>m.value.directories_enabled=j),"onUpdate:extraDirectories":T,"onUpdate:gitignore":E[14]||(E[14]=j=>m.value.git.gitignore_content=j),"onUpdate:newExtraIds":E[15]||(E[15]=j=>k.value=j),onReset:x},null,8,["project-type","directories","render-dirs","enabled","extra-directories","settings","gitignore","catalog","new-extra-ids"])):G("",!0)],512),[[ut,d.value==="structure"]]),Ze(h("div",null,[A(jf,{"database-connections":m.value.connections.databaseConnections,"onUpdate:databaseConnections":E[16]||(E[16]=j=>m.value.connections.databaseConnections=j),"s3-connections":m.value.connections.s3Connections,"onUpdate:s3Connections":E[17]||(E[17]=j=>m.value.connections.s3Connections=j),"default-database":m.value.connections.defaultDatabase,"onUpdate:defaultDatabase":E[18]||(E[18]=j=>m.value.connections.defaultDatabase=j),"default-storage-bucket":m.value.connections.defaultStorageBucket,"onUpdate:defaultStorageBucket":E[19]||(E[19]=j=>m.value.connections.defaultStorageBucket=j)},null,8,["database-connections","s3-connections","default-database","default-storage-bucket"])],512),[[ut,d.value==="connections"]]),Ze(h("div",null,[h("div",S6,[E[39]||(E[39]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Environment variables template for this project. These defaults help connections work immediately. ",-1)),A(Rf,{groups:m.value.env.groups,variables:m.value.env.variables,"onUpdate:variables":E[20]||(E[20]=j=>m.value.env.variables=j),"raw-content":m.value.env.rawContent,"onUpdate:rawContent":E[21]||(E[21]=j=>m.value.env.rawContent=j),"view-mode":m.value.env.viewMode,"onUpdate:viewMode":E[22]||(E[22]=j=>m.value.env.viewMode=j),"regroup-on-save":m.value.env.regroupOnSave,"onUpdate:regroupOnSave":E[23]||(E[23]=j=>m.value.env.regroupOnSave=j),"show-save-button":!1,"allow-show-values-toggle":!0},null,8,["groups","variables","raw-content","view-mode","regroup-on-save"])])],512),[[ut,d.value==="env"]]),Ze(h("div",null,[A(Sb,{modelValue:m.value.packages,"onUpdate:modelValue":E[24]||(E[24]=j=>m.value.packages=j),"show-renv-toggle":!0,flush:!1},null,8,["modelValue"])],512),[[ut,d.value==="packages"]]),Ze(h("div",null,[h("div",C6,[E[41]||(E[41]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Framework maintains context files for selected assistants and keeps them in sync before commits. ",-1)),A(Cb,{modelValue:m.value.ai,"onUpdate:modelValue":E[25]||(E[25]=j=>m.value.ai=j),flush:!0,"show-editor":!0,"editor-height":"500px"},{"editor-description":Z(()=>[...E[40]||(E[40]=[de(" Edit the canonical file directly. This will be pre-populated when the project is created. ",-1)])]),_:1},8,["modelValue"])])],512),[[ut,d.value==="ai"]]),Ze(h("div",null,[A(Of,{modelValue:B.value,"onUpdate:modelValue":E[26]||(E[26]=j=>B.value=j)},{note:Z(()=>[...E[42]||(E[42]=[de(" Project-specific .gitignore templates can be customized in Project Defaults. ",-1)])]),_:1},8,["modelValue"])],512),[[ut,d.value==="git"]])])])]))}},A6={class:"mt-2 block text-sm font-semibold text-gray-900 dark:text-white"},M6={key:0,class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},D6={class:"mt-2 text-sm font-semibold text-gray-900 dark:text-white"},E6={key:0,class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},T6={key:1,class:"mt-6"},O6={__name:"EmptyState",props:{title:{type:String,required:!0},description:{type:String,default:null},icon:{type:String,default:null,validator:s=>["database","folder","document","users","inbox","photo"].includes(s)},action:{type:Boolean,default:!1}},emits:["click"],setup(s,{emit:e}){const t=s,i=e,n=z(()=>{const l=["relative","block","w-full","rounded-lg","border-2","border-dashed","border-gray-300","p-12","text-center","dark:border-white/15"];return t.action&&l.push("hover:border-gray-400","focus:outline-2","focus:outline-offset-2","focus:outline-sky-600","dark:hover:border-white/25","dark:focus:outline-sky-500","transition-colors"),l.join(" ")}),r=z(()=>({database:()=>Tt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Tt("path",{d:"M8 14v20c0 4.418 7.163 8 16 8 1.381 0 2.721-.087 4-.252M8 14c0 4.418 7.163 8 16 8s16-3.582 16-8M8 14c0-4.418 7.163-8 16-8s16 3.582 16 8m0 0v14m0-4c0 4.418-7.163 8-16 8S8 28.418 8 24m32 10v6m0 0v6m0-6h6m-6 0h-6"})]),folder:()=>Tt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Tt("path",{d:"M3 7v30a4 4 0 004 4h34a4 4 0 004-4V13a4 4 0 00-4-4H23.343a4 4 0 01-2.829-1.172l-2.828-2.828A4 4 0 0014.858 4H7a4 4 0 00-4 4v0zM37 17v6m0 0v6m0-6h6m-6 0h-6"})]),document:()=>Tt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Tt("path",{d:"M8 4a4 4 0 00-4 4v32a4 4 0 004 4h32a4 4 0 004-4V8a4 4 0 00-4-4H8zm24 16v6m0 0v6m0-6h6m-6 0h-6"})]),users:()=>Tt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Tt("path",{d:"M17 21a5 5 0 110-10 5 5 0 010 10zm-6.5 8a7.5 7.5 0 0115 0H10.5zM31 21a5 5 0 110-10 5 5 0 010 10zm-6.5 8a7.5 7.5 0 0115 0H24.5z"})]),inbox:()=>Tt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Tt("path",{d:"M4 8h40M4 8v28a4 4 0 004 4h32a4 4 0 004-4V8M4 8l18 14a2 2 0 002.4 0L44 8"})]),photo:()=>Tt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Tt("path",{d:"M4 8a4 4 0 014-4h32a4 4 0 014 4v32a4 4 0 01-4 4H8a4 4 0 01-4-4V8zm10 6a3 3 0 100-6 3 3 0 000 6zM4 40l12-12 8 8 8-8L44 40"})])})[t.icon]||null),o=()=>{t.action&&i("click")};return(l,a)=>s.action?(g(),b("button",{key:0,type:"button",onClick:o,class:xe(n.value)},[dt(l.$slots,"icon",{},()=>[s.icon?(g(),_e(ws(r.value),{key:0,class:"mx-auto size-12 text-gray-400 dark:text-gray-500"})):G("",!0)]),h("span",A6,X(s.title),1),s.description?(g(),b("p",M6,X(s.description),1)):G("",!0)],2)):(g(),b("div",{key:1,class:xe(n.value.replace("hover:border-gray-400","").replace("focus:outline-2",""))},[dt(l.$slots,"icon",{},()=>[s.icon?(g(),_e(ws(r.value),{key:0,class:"mx-auto size-12 text-gray-400 dark:text-gray-500"})):G("",!0)]),h("h3",D6,X(s.title),1),s.description?(g(),b("p",E6,X(s.description),1)):G("",!0),l.$slots.actions?(g(),b("div",T6,[dt(l.$slots,"actions")])):G("",!0)],2))}},P6=["for"],j6={class:"mt-2"},$6=["id","value","placeholder","rows","required","disabled"],R6={key:1,class:"mt-2 text-sm text-gray-500 dark:text-gray-400"},kd={__name:"Textarea",props:{id:{type:String,default:()=>`textarea-${Math.random().toString(36).substr(2,9)}`},modelValue:{type:String,default:""},label:{type:String,default:null},placeholder:{type:String,default:""},rows:{type:Number,default:4},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},hint:{type:String,default:null},monospace:{type:Boolean,default:!1},textareaClass:{type:[String,Array,Object],default:""}},emits:["update:modelValue"],setup(s){const e=s,t=z(()=>["block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-sky-600 sm:text-sm/6 dark:bg-white/5 dark:text-white dark:outline-white/10 dark:placeholder:text-gray-500 dark:focus:outline-sky-500",e.monospace?"font-mono text-sm leading-6":"",e.textareaClass]);return(i,n)=>(g(),b("div",null,[s.label?(g(),b("label",{key:0,for:s.id,class:"block text-sm/6 font-medium text-gray-900 dark:text-white"},X(s.label),9,P6)):G("",!0),h("div",j6,[h("textarea",{id:s.id,value:s.modelValue,placeholder:s.placeholder,rows:s.rows,required:s.required,disabled:s.disabled,onInput:n[0]||(n[0]=r=>i.$emit("update:modelValue",r.target.value)),class:xe(t.value)},null,42,$6)]),s.hint?(g(),b("p",R6,X(s.hint),1)):G("",!0)]))}},L6={class:"space-y-6"},V6={key:0},B6={class:"mt-1 font-mono text-sm text-gray-900 dark:text-gray-100 break-words"},I6={key:1},N6={class:"grid gap-4 sm:grid-cols-2"},F6=["value"],z6={class:"sm:col-span-2"},U6={key:0,class:"sm:col-span-2"},H6={class:"space-y-3"},W6={class:"flex items-center justify-between"},K6={key:0,class:"rounded-md border border-dashed border-gray-300 p-4 text-sm text-gray-500 dark:border-gray-600 dark:text-gray-400"},q6={class:"grid gap-3 sm:grid-cols-[1fr_auto] sm:items-start"},G6={class:"mt-3"},J6={key:0,class:"mt-2 text-xs text-gray-500 dark:text-gray-400"},Y6={class:"mt-2 flex justify-end"},Q6={key:2,class:"text-sm text-red-600 dark:text-red-400"},X6={key:3,class:"text-sm text-red-600 dark:text-red-400"},Z6={key:4,class:"text-sm text-red-600 dark:text-red-400"},eO='{"source": "data-catalog"}',tO={__name:"DataCatalogEditModal",props:{modelValue:{type:Boolean,default:!1},mode:{type:String,default:"edit",validator:s=>["edit","create"].includes(s)},entry:{type:Object,default:null},saving:{type:Boolean,default:!1},error:{type:String,default:null}},emits:["update:modelValue","save"],setup(s,{emit:e}){const t=s,i=e,n=Object.freeze([{value:"csv",label:"CSV (comma-separated)"},{value:"tsv",label:"TSV (tab-separated)"},{value:"csv_custom",label:"Delimited text (custom)"},{value:"rds",label:"RDS (R serialized)"},{value:"excel",label:"Excel (.xlsx / .xls)"},{value:"stata",label:"Stata (.dta)"},{value:"spss",label:"SPSS (.sav / .zsav)"},{value:"spss_por",label:"SPSS Portable (.por)"},{value:"sas",label:"SAS (.sas7bdat / .sas7bcat)"},{value:"sas_xpt",label:"SAS Transport (.xpt)"}]),r=["path","type","description","locked","delimiter"],o=ie(null),l=ie(!1),a=ie(!1),u=z(()=>t.mode==="create"),c=js({path:"",fullKey:"",type:"",description:"",delimiter:"",locked:!1,additionalFields:[]}),d=z(()=>c.type==="csv_custom"),f=z(()=>{if(!t.entry&&!u.value)return null;const q=W();return q.length>0?`Duplicate metadata keys: ${q.join(", ")}`:c.additionalFields.some(Y=>!Y.key.trim())?"Metadata keys cannot be empty.":null}),p=z(()=>c.path.trim()?null:"File path is required"),v=z(()=>u.value?a.value?p.value:null:p.value);Re(()=>t.entry,q=>{if(!q){N();return}H(q)},{immediate:!0}),Re(()=>c.path,q=>{if(l.value)return;const Y=L(q);Y&&(Y.type==="csv"?(c.type="csv",c.delimiter=m("csv")):Y.type==="tsv"?(c.type="tsv",c.delimiter=m("tsv")):(c.type=Y.type,c.delimiter=""))}),Re(()=>c.type,q=>{q&&(q==="csv"?c.delimiter=m("csv"):q==="tsv"?c.delimiter=m("tsv"):q!=="csv_custom"&&(c.delimiter=""))});function k(){return`field-${Math.random().toString(36).slice(2,9)}`}function m(q){return q==="csv"?"comma":q==="tsv"?"tab":""}function w(q,Y){if(!q)return!1;const ce=q.toLowerCase();return Y==="csv"?ce==="comma"||q===",":Y==="tsv"?ce==="tab"||q==="	":!1}function L(q){if(!q)return null;const Y=q.toLowerCase();return Y.endsWith(".csv")?{type:"csv",delimiter:"comma"}:Y.endsWith(".tsv")||Y.endsWith(".txt")||Y.endsWith(".dat")?{type:"tsv",delimiter:"tab"}:Y.endsWith(".rds")?{type:"rds",delimiter:""}:Y.endsWith(".xlsx")||Y.endsWith(".xls")?{type:"excel",delimiter:""}:Y.endsWith(".dta")?{type:"stata",delimiter:""}:Y.endsWith(".sav")||Y.endsWith(".zsav")?{type:"spss",delimiter:""}:Y.endsWith(".por")?{type:"spss_por",delimiter:""}:Y.endsWith(".sas7bdat")||Y.endsWith(".sas7bcat")?{type:"sas",delimiter:""}:Y.endsWith(".xpt")?{type:"sas_xpt",delimiter:""}:null}function I(q){if(!q){c.type="",c.delimiter="",l.value=!1;return}c.type=q,l.value=!0,q==="csv"?c.delimiter=m("csv"):q==="tsv"?c.delimiter=m("tsv"):c.delimiter=""}function H(q){if(N(),a.value=!1,u.value){const be=q?.data||{};c.fullKey=q?.fullKey||"",c.path=be.path||"",c.type=be.type||"",c.description=be.description||"",c.locked=!!be.locked,c.delimiter=be.delimiter||"",l.value=!1;return}const Y=q.data||{};c.fullKey=q.fullKey||"",c.path=Y.path||"";const ce=L(c.path),ge=Y.type||ce?.type||"";if(c.description=Y.description||"",c.locked=!!Y.locked,ge==="csv"){const be=Y.delimiter||ce?.delimiter||m("csv");w(be,"csv")?(c.type="csv",c.delimiter=m("csv")):be?(c.type="csv_custom",c.delimiter=be):(c.type="csv",c.delimiter=m("csv"))}else ge==="tsv"?(c.type="tsv",c.delimiter=m("tsv")):(c.type=ge,c.delimiter=d.value&&Y.delimiter||"");!c.type&&ce?.type&&(c.type=ce.type,c.delimiter=ce.delimiter||m(ce.type)),l.value=!!Y.type||c.type==="csv_custom";const Ne=Object.entries(Y).filter(([be])=>!r.includes(be)).map(([be,ze])=>({id:k(),key:be,valueInput:P(ze),valueType:S(ze),isMultiline:typeof ze=="object"&&ze!==null}));c.additionalFields=Ne,o.value=null}function N(){c.path="",c.fullKey="",c.type="",c.description="",c.delimiter="",c.locked=!1,c.additionalFields=[],o.value=null,l.value=!1}function P(q){if(typeof q=="object"&&q!==null)try{return JSON.stringify(q,null,2)}catch{return""}return q==null?"":String(q)}function S(q){return Array.isArray(q)||typeof q=="object"&&q!==null?"object":typeof q=="boolean"?"boolean":typeof q=="number"?"number":"string"}function O(q){if(q.valueType==="object"){if(!q.valueInput.trim())return null;try{return JSON.parse(q.valueInput)}catch{throw new Error(`Invalid JSON for field "${q.key}"`)}}if(q.valueType==="number"){const Y=Number(q.valueInput);if(Number.isNaN(Y))throw new Error(`Value for "${q.key}" must be a number`);return Y}if(q.valueType==="boolean"){const Y=q.valueInput.trim().toLowerCase();if(["true","false"].includes(Y))return Y==="true";throw new Error(`Value for "${q.key}" must be "true" or "false"`)}return q.valueInput}function W(){const q=new Set,Y=[];return c.additionalFields.forEach(ce=>{const ge=ce.key.trim();ge&&(q.has(ge)||r.includes(ge)?Y.push(ge):q.add(ge))}),Y}function oe(q){return q.key.trim()?r.includes(q.key.trim())?"Reserved key name":c.additionalFields.some(Y=>Y!==q&&Y.key.trim()===q.key.trim())?"Duplicate key":null:"Key is required"}function se(){c.additionalFields.push({id:k(),key:"",valueInput:"",valueType:"string",isMultiline:!1}),o.value=null}function B(q){c.additionalFields=c.additionalFields.filter(Y=>Y.id!==q)}function ae(q){q.isMultiline=!q.isMultiline,q.isMultiline?(q.valueType="object",q.valueInput&&!q.valueInput.trim().startsWith("{")&&(q.valueInput="")):(q.valueType="string",q.valueInput=q.valueInput!=null?String(q.valueInput):"")}const ee=()=>{if(o.value=null,a.value=!0,!(p.value||f.value)&&!(!u.value&&!t.entry))try{const q=$();i("save",q)}catch(q){o.value=q.message}},$=()=>{if(!c.path.trim())throw new Error("File path is required");const q={};q.path=c.path.trim();const Y=c.type==="csv_custom"?"csv":c.type.trim();if(Y&&(q.type=Y),c.description.trim()&&(q.description=c.description.trim()),c.type==="csv_custom"){if(!c.delimiter.trim())throw new Error("Delimiter is required for custom delimited text sources");q.delimiter=c.delimiter.trim()}else c.delimiter.trim()&&!w(c.delimiter.trim(),c.type)&&(q.delimiter=c.delimiter.trim());c.locked&&(q.locked=!0);for(const ge of c.additionalFields){const Ne=ge.key.trim();if(!Ne||r.includes(Ne))continue;const be=O({...ge,valueType:ge.valueType??"string"});be===null||be===""||(q[Ne]=be)}const ce=(u.value?c.fullKey:t.entry.fullKey||"").trim();if(!ce)throw new Error("Dot notation key is required");return{fullKey:ce,data:q,isNew:u.value}};return(q,Y)=>(g(),_e(tn,{"model-value":s.modelValue,variant:"left",size:"lg",title:"Edit Data Entry","onUpdate:modelValue":Y[6]||(Y[6]=ce=>i("update:modelValue",ce))},J1({_:2},[s.entry||u.value?{name:"default",fn:Z(()=>[h("div",L6,[u.value?(g(),b("div",I6,[A(Ae,{modelValue:c.fullKey,"onUpdate:modelValue":Y[0]||(Y[0]=ce=>c.fullKey=ce),label:"Dot Notation Key",placeholder:"e.g., inputs.raw.custom_dataset",hint:"Use dot notation to place this entry within the catalog hierarchy."},null,8,["modelValue"])])):(g(),b("div",V6,[Y[7]||(Y[7]=h("p",{class:"text-xs font-medium uppercase tracking-wide text-gray-500 dark:text-gray-400"}," Data Key ",-1)),h("p",B6,X(s.entry.fullKey),1)])),A(Ae,{modelValue:c.path,"onUpdate:modelValue":Y[1]||(Y[1]=ce=>c.path=ce),label:"File Path",placeholder:"inputs/raw/example.csv",required:"",error:v.value,monospace:"",hint:"Provide a path relative to the project root (e.g., inputs/raw/data.csv) or an absolute path."},null,8,["modelValue","error"]),h("div",N6,[A(Qs,{"model-value":c.type,label:"Type","onUpdate:modelValue":I},{default:Z(()=>[Y[8]||(Y[8]=h("option",{disabled:"",value:""},"Select file type",-1)),(g(!0),b(ye,null,$e(ft(n),ce=>(g(),b("option",{key:ce.value,value:ce.value},X(ce.label),9,F6))),128))]),_:1},8,["model-value"]),h("div",z6,[A(tt,{modelValue:c.locked,"onUpdate:modelValue":Y[2]||(Y[2]=ce=>c.locked=ce),label:"Locked",description:"Treat this data source as read-only."},null,8,["modelValue"])]),d.value?(g(),b("div",U6,[A(Ae,{modelValue:c.delimiter,"onUpdate:modelValue":Y[3]||(Y[3]=ce=>c.delimiter=ce),label:"Delimiter",placeholder:"e.g., tab or |",hint:"Use keywords 'tab', 'comma', 'semicolon', 'space' or supply a single character (e.g., |). Keywords map to their respective delimiters."},null,8,["modelValue"])])):G("",!0)]),A(kd,{modelValue:c.description,"onUpdate:modelValue":Y[4]||(Y[4]=ce=>c.description=ce),label:"Description",placeholder:"Explain what this source contains or how it was produced.",rows:4},null,8,["modelValue"]),h("div",H6,[h("div",W6,[Y[10]||(Y[10]=h("h4",{class:"text-sm font-semibold text-gray-900 dark:text-gray-100"}," Additional Metadata ",-1)),A(Ke,{size:"sm",variant:"secondary",class:"shadow-none",onClick:se},{default:Z(()=>[...Y[9]||(Y[9]=[de(" Add Field ",-1)])]),_:1})]),Y[12]||(Y[12]=h("p",{class:"text-xs text-gray-500 dark:text-gray-400"}," Store any extra properties (e.g., source, codebook details). Complex values can be provided as JSON. ",-1)),c.additionalFields.length===0?(g(),b("div",K6," No additional metadata fields. ")):G("",!0),(g(!0),b(ye,null,$e(c.additionalFields,ce=>(g(),b("div",{key:ce.id,class:"rounded-md border border-gray-200 bg-white/80 p-4 dark:border-gray-700 dark:bg-gray-900/40"},[h("div",q6,[A(Ae,{modelValue:ce.key,"onUpdate:modelValue":ge=>ce.key=ge,label:"Key",placeholder:"e.g., source",error:oe(ce)},null,8,["modelValue","onUpdate:modelValue","error"]),A(Ke,{size:"sm",variant:"secondary",class:"shadow-none",onClick:ge=>B(ce.id)},{default:Z(()=>[...Y[11]||(Y[11]=[de(" Remove ",-1)])]),_:1},8,["onClick"])]),h("div",G6,[(g(),_e(ws(ce.isMultiline?kd:Ae),{modelValue:ce.valueInput,"onUpdate:modelValue":ge=>ce.valueInput=ge,label:ce.isMultiline?"Value (JSON)":"Value",rows:ce.isMultiline?4:void 0,placeholder:ce.isMultiline?eO:"comma",monospace:ce.isMultiline?void 0:!1},null,8,["modelValue","onUpdate:modelValue","label","rows","placeholder","monospace"])),ce.isMultiline?(g(),b("p",J6," Provide valid JSON to store complex data structures. ")):G("",!0),h("div",Y6,[A(Ke,{size:"xs",variant:"soft",onClick:ge=>ae(ce)},{default:Z(()=>[de(X(ce.isMultiline?"Use single-line value":"Use JSON value"),1)]),_:2},1032,["onClick"])])])]))),128))]),f.value?(g(),b("p",Q6,X(f.value),1)):G("",!0),o.value?(g(),b("p",X6,X(o.value),1)):G("",!0),s.error?(g(),b("p",Z6,X(s.error),1)):G("",!0)])]),key:"0"}:void 0,s.entry?{name:"actions",fn:Z(()=>[A(Ke,{size:"sm",variant:"secondary",class:"shadow-none",onClick:Y[5]||(Y[5]=ce=>i("update:modelValue",!1))},{default:Z(()=>[...Y[13]||(Y[13]=[de(" Cancel ",-1)])]),_:1}),A(Ke,{size:"sm",disabled:s.saving,onClick:ee},{default:Z(()=>[de(X(s.saving?"Saving":"Save Entry"),1)]),_:1},8,["disabled"])]),key:"1"}:void 0]),1032,["model-value"]))}},_b=(s="")=>{const t=String(s??"").trim().replace(/[^a-zA-Z0-9]+/g,"-").replace(/^-+|-+$/g,"").toLowerCase();return t?`data-node-${t}`:"data-node-root"},sO=["id"],iO=["aria-expanded"],nO={class:"flex-1"},rO={key:0,class:"rounded bg-amber-200/70 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},oO={key:1},lO={class:"mt-1 text-xs text-zinc-500 dark:text-zinc-400"},aO={class:"text-xs font-medium uppercase tracking-wide text-zinc-500 dark:text-zinc-400"},cO={class:"flex items-start gap-3"},uO={class:"flex-1"},dO={key:0,class:"rounded bg-amber-200/70 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},fO={key:1},hO={class:"mt-1 text-xs text-zinc-500 dark:text-zinc-400"},pO=["id"],mO={class:"flex items-start justify-between gap-4"},gO={class:"min-w-0 flex items-center gap-2"},vO={class:"text-sm font-semibold text-gray-900 dark:text-white"},yO={key:0,class:"rounded bg-amber-200/70 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},bO={key:1},kO={key:0,class:"inline-flex items-center rounded-full border border-gray-200 bg-white px-2.5 py-1 text-xs font-medium text-gray-700 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-100"},xO={class:"flex items-center gap-2 shrink-0"},wO={class:"mt-5 space-y-4"},SO={key:0,class:"space-y-2"},CO={class:"text-sm leading-relaxed text-gray-600 dark:text-zinc-300"},_O={key:1,class:"flex items-start gap-3"},AO={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},MO={key:1,class:"h-4 w-4 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},DO={class:"min-w-0 flex-1"},EO={class:"mt-1 font-mono text-sm leading-relaxed text-gray-900 dark:text-zinc-100"},TO={key:0,class:"rounded bg-amber-200/60 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},OO={key:1},PO={key:1,class:"text-zinc-500"},jO={class:"flex items-start gap-3 pt-4 border-t border-gray-200 dark:border-zinc-700"},$O={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},RO={key:1,class:"h-4 w-4 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},LO={class:"min-w-0 flex-1"},VO={class:"mt-1 font-mono text-sm leading-relaxed text-gray-900 dark:text-zinc-100"},BO={key:0,class:"rounded bg-amber-200/60 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},IO={key:1},NO={key:1,class:"text-zinc-500"},FO={class:"min-w-0"},zO={class:"text-xs font-medium uppercase tracking-wide text-gray-600 dark:text-zinc-200"},UO={class:"mt-1 whitespace-pre-wrap break-words font-mono text-[13px] text-gray-800 dark:text-zinc-200"},HO={class:"flex items-start gap-3 pt-4 border-t border-gray-200 dark:border-zinc-700"},WO={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},KO={key:1,class:"h-4 w-4 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},qO={class:"min-w-0 flex-1"},GO=["title"],nu="mt-1.5 inline-flex h-10 w-10 items-center justify-center rounded-md border border-gray-200 bg-white text-gray-500 transition hover:border-gray-300 hover:text-gray-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-500 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-300 dark:hover:border-gray-500 dark:hover:text-gray-100",JO=Object.assign({name:"DataCatalogTree"},{__name:"DataCatalogTree",props:{node:{type:Object,required:!0},depth:{type:Number,default:0},expandedKeys:{type:Object,required:!0},autoExpandedKeys:{type:Object,required:!0},toggleGroup:{type:Function,required:!0},searchTerm:{type:String,default:""},hierarchical:{type:Boolean,default:!0},pendingDeletes:{type:Object,default:null}},emits:["edit","delete"],setup(s,{emit:e}){const t=e,i=s,n=z(()=>i.node?.type==="group"),r=z(()=>i.depth===0),o=z(()=>{if(!n.value)return!1;if(!i.hierarchical)return!0;const se=i.node?.fullKey;if(!se)return!1;const B=i.expandedKeys,ae=i.autoExpandedKeys,ee=typeof B?.has=="function"?B.has(se):!!B?.[se],$=typeof ae?.has=="function"?ae.has(se):!!ae?.[se];return ee||$}),l=z(()=>{const se=i.node?.leafCount||0;return`${se} ${se===1?"entry":"entries"}`}),a=z(()=>r.value?"mb-4 rounded-xl border border-gray-200 bg-white p-6 transition hover:border-gray-300 scroll-mt-16 dark:border-gray-700/70 dark:bg-gray-900 dark:hover:border-gray-600":"mb-3 rounded-lg border border-gray-200 bg-white p-4 transition hover:border-gray-300 dark:border-gray-700/60 dark:bg-gray-900/60 dark:hover:border-gray-600"),u=z(()=>r.value?"text-lg font-semibold text-zinc-900 dark:text-white":"text-sm font-semibold text-zinc-900 dark:text-white"),c=z(()=>r.value?"mt-4 space-y-3":"mt-3 space-y-3"),d=z(()=>i.pendingDeletes instanceof Set?i.pendingDeletes:i.pendingDeletes&&typeof i.pendingDeletes=="object"&&i.pendingDeletes.value instanceof Set?i.pendingDeletes.value:new Set),f=z(()=>d.value.has(i.node?.fullKey)),p=z(()=>{const se=i.node?.data||{},B=new Set(["path","type","description","locked","delimiter"]);return Object.keys(se).filter(ae=>!B.has(ae)).reduce((ae,ee)=>(ae[ee]=se[ee],ae),{})}),v=z(()=>{const se="relative rounded-lg p-6 transition focus-within:ring-2",B=r.value?"scroll-mt-16":"";return f.value?`${se} border border-red-200 bg-red-50 hover:bg-red-100 focus-within:ring-red-300 ${B} dark:border-red-500/40 dark:bg-red-900/30 dark:hover:bg-red-900/40 dark:focus-within:ring-red-500/40`:`${se} border border-gray-200 bg-gray-50 hover:bg-gray-100 focus-within:ring-sky-200 ${B} dark:border-gray-700/50 dark:bg-gray-800/50 dark:hover:bg-gray-800/60 dark:focus-within:ring-sky-500/40`}),k=z(()=>f.value?"shadow-none border border-red-200 text-red-700 hover:bg-red-50 dark:border-red-500/40 dark:text-red-200 dark:hover:bg-red-900/30":"shadow-none"),m=z(()=>i.searchTerm.trim().toLowerCase()),w=(se="")=>{const B=se??"",ae=m.value;if(!ae)return[{text:B,highlight:!1}];const ee=B.toLowerCase(),$=[];let q=0,Y=ee.indexOf(ae);for(;Y!==-1;)Y>q&&$.push({text:B.slice(q,Y),highlight:!1}),$.push({text:B.slice(Y,Y+ae.length),highlight:!0}),q=Y+ae.length,Y=ee.indexOf(ae,q);return q<B.length&&$.push({text:B.slice(q),highlight:!1}),$.length>0?$:[{text:B,highlight:!1}]},L=z(()=>i.node?.displayName||i.node?.name||""),I=z(()=>w(L.value)),H=z(()=>w(i.node?.data?.path||"")),N=z(()=>w(i.node?.fullKey||"")),P=z(()=>{const se=i.node?.fullKey||"";return se?`data_read('${se}')`:"data_read()"}),S=(se="")=>se.replace(/_/g," "),O=se=>se==null?"":typeof se=="object"?JSON.stringify(se,null,2):String(se),W=z(()=>{if(!r.value)return null;const se=i.node?.fullKey||i.node?.name;return se?_b(se):null}),oe=()=>{!n.value||!i.hierarchical||i.toggleGroup(i.node.fullKey)};return(se,B)=>{const ae=ua("DataCatalogTree",!0);return g(),b("div",null,[n.value?(g(),b("div",{key:0,id:W.value||void 0,class:xe(a.value)},[s.hierarchical?(g(),b(ye,{key:0},[h("button",{type:"button",class:"flex w-full items-start gap-3 text-left transition hover:text-zinc-900 focus:outline-none",onClick:oe,"aria-expanded":o.value},[A(ft(Ow),{class:xe(["mt-1.5 h-4 w-4 shrink-0 text-zinc-400 transition-transform",{"rotate-90 text-sky-500":o.value}])},null,8,["class"]),h("div",nO,[h("p",{class:xe(u.value)},[(g(!0),b(ye,null,$e(I.value,(ee,$)=>(g(),b(ye,{key:$},[ee.highlight?(g(),b("mark",rO,X(ee.text),1)):(g(),b("span",oO,X(ee.text),1))],64))),128))],2),h("p",lO,X(l.value),1)]),h("span",aO,X(o.value?"Hide":"Show"),1)],8,iO),A(Id,{name:"catalog-collapse"},{default:Z(()=>[Ze(h("div",{class:xe(c.value)},[(g(!0),b(ye,null,$e(s.node.children,ee=>(g(),_e(ae,{key:ee.fullKey,node:ee,depth:s.depth+1,"expanded-keys":s.expandedKeys,"auto-expanded-keys":s.autoExpandedKeys,"toggle-group":s.toggleGroup,"search-term":s.searchTerm,hierarchical:s.hierarchical,"pending-deletes":s.pendingDeletes,onEdit:B[0]||(B[0]=$=>t("edit",$)),onDelete:B[1]||(B[1]=$=>t("delete",$))},null,8,["node","depth","expanded-keys","auto-expanded-keys","toggle-group","search-term","hierarchical","pending-deletes"]))),128))],2),[[ut,o.value]])]),_:1})],64)):(g(),b(ye,{key:1},[h("div",cO,[h("div",uO,[h("p",{class:xe(u.value)},[(g(!0),b(ye,null,$e(I.value,(ee,$)=>(g(),b(ye,{key:$},[ee.highlight?(g(),b("mark",dO,X(ee.text),1)):(g(),b("span",fO,X(ee.text),1))],64))),128))],2),h("p",hO,X(l.value),1)])]),h("div",{class:xe(c.value)},[(g(!0),b(ye,null,$e(s.node.children,ee=>(g(),_e(ae,{key:ee.fullKey,node:ee,depth:s.depth+1,"expanded-keys":s.expandedKeys,"auto-expanded-keys":s.autoExpandedKeys,"toggle-group":s.toggleGroup,"search-term":s.searchTerm,hierarchical:s.hierarchical,"pending-deletes":s.pendingDeletes,onEdit:B[2]||(B[2]=$=>t("edit",$)),onDelete:B[3]||(B[3]=$=>t("delete",$))},null,8,["node","depth","expanded-keys","auto-expanded-keys","toggle-group","search-term","hierarchical","pending-deletes"]))),128))],2)],64))],10,sO)):(g(),b("div",{key:1,id:W.value||void 0,class:xe(v.value)},[h("div",mO,[h("div",gO,[h("h3",vO,[(g(!0),b(ye,null,$e(I.value,(ee,$)=>(g(),b(ye,{key:`leaf-${$}`},[ee.highlight?(g(),b("mark",yO,X(ee.text),1)):(g(),b("span",bO,X(ee.text),1))],64))),128))]),s.node.data?.type?(g(),b("span",kO,X(s.node.data.type),1)):G("",!0)]),h("div",xO,[A(Ke,{size:"sm",variant:"secondary",class:xe(k.value),onClick:B[4]||(B[4]=Nt(ee=>t("delete",s.node),["stop"]))},{default:Z(()=>[de(X(f.value?"Undo":"Delete"),1)]),_:1},8,["class"]),A(Ke,{size:"sm",variant:"secondary",class:"shadow-none",onClick:B[5]||(B[5]=ee=>t("edit",s.node))},{default:Z(()=>[...B[6]||(B[6]=[de(" Edit ",-1)])]),_:1})])]),h("div",wO,[s.node.data?.description?(g(),b("div",SO,[B[7]||(B[7]=h("p",{class:"text-xs font-medium text-gray-600 dark:text-zinc-200"}," Description ",-1)),h("p",CO,X(s.node.data.description),1)])):G("",!0),s.node.fullKey?(g(),b("div",_O,[A(cr,{value:s.node.fullKey||"",successMessage:"Dot notation copied",variant:"bare",class:xe(nu),title:"Copy dot notation"},{default:Z(({copied:ee})=>[ee?(g(),b("svg",MO,[...B[9]||(B[9]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(g(),b("svg",AO,[...B[8]||(B[8]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"},null,-1)])]))]),_:1},8,["value"]),h("div",DO,[B[10]||(B[10]=h("p",{class:"text-xs font-medium text-gray-700 dark:text-zinc-100"}," Location (in Dot Notation) ",-1)),h("p",EO,[N.value.length>0?(g(!0),b(ye,{key:0},$e(N.value,(ee,$)=>(g(),b(ye,{key:`key-${$}`},[ee.highlight?(g(),b("mark",TO,X(ee.text),1)):(g(),b("span",OO,X(ee.text),1))],64))),128)):(g(),b("span",PO,""))])])])):G("",!0),h("div",jO,[A(cr,{value:s.node.data?.path||"",successMessage:"Path copied",variant:"bare",class:xe(nu),title:"Copy path"},{default:Z(({copied:ee})=>[ee?(g(),b("svg",RO,[...B[12]||(B[12]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(g(),b("svg",$O,[...B[11]||(B[11]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"},null,-1)])]))]),_:1},8,["value"]),h("div",LO,[B[13]||(B[13]=h("p",{class:"text-xs font-medium text-gray-700 dark:text-zinc-100"}," File Path ",-1)),h("p",VO,[H.value.length>0?(g(!0),b(ye,{key:0},$e(H.value,(ee,$)=>(g(),b(ye,{key:`path-${$}`},[ee.highlight?(g(),b("mark",BO,X(ee.text),1)):(g(),b("span",IO,X(ee.text),1))],64))),128)):(g(),b("span",NO,""))])])]),(g(!0),b(ye,null,$e(p.value,(ee,$)=>(g(),b("div",{key:`meta-${$}`,class:"flex items-start justify-between gap-3 border-t border-gray-200 pt-4 text-sm dark:border-zinc-700"},[h("div",FO,[h("p",zO,X(S($)),1),h("pre",UO,X(O(ee)),1)])]))),128)),h("div",HO,[A(cr,{value:P.value,successMessage:"data_read() command copied",variant:"bare",class:xe([nu,"w-10"]),title:"Copy data_read() helper","aria-label":`Copy ${P.value}`},{default:Z(({copied:ee})=>[ee?(g(),b("svg",KO,[...B[15]||(B[15]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(g(),b("svg",WO,[...B[14]||(B[14]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8z"},null,-1)])]))]),_:1},8,["value","class","aria-label"]),h("div",qO,[B[16]||(B[16]=h("p",{class:"text-xs font-medium text-gray-700 dark:text-zinc-100"}," Usage ",-1)),h("p",{class:"mt-1 font-mono text-sm leading-relaxed text-gray-900 dark:text-zinc-100 truncate",title:P.value},X(P.value),9,GO)])])])],10,pO))])}}}),YO=b0(JO,[["__scopeId","data-v-20f9f092"]]),QO={key:0,class:"flex items-center justify-center h-96"},XO={key:1,class:"flex-1 p-10"},ZO={key:2,class:"flex min-h-screen"},eP={class:"w-64 shrink-0 border-r border-gray-200 p-6 dark:border-gray-800 flex flex-col"},tP={class:"mb-4"},sP={class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},iP={class:"flex items-center gap-2"},nP={class:"text-xs text-gray-500 dark:text-gray-400 font-mono truncate"},rP={class:"space-y-1"},oP={key:0,class:"ml-6 mt-1 space-y-0.5"},lP=["href","onClick"],aP={class:"truncate"},cP={key:0,class:"shrink-0 rounded-full bg-gray-100 px-2 py-0.5 text-[10px] font-medium text-gray-500 dark:bg-gray-800 dark:text-gray-300"},uP={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},dP={class:"mt-auto pt-4 border-t border-gray-200 dark:border-gray-700"},fP={class:"text-center py-3"},hP={class:"flex-1 p-10"},pP={id:"overview"},mP={id:"basics"},gP={key:0},vP={key:1},yP={key:2},bP={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},kP={key:0,class:"space-y-5"},xP={class:"flex items-center gap-2"},wP={class:"flex-1 px-3 py-2 text-sm font-mono text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-md"},SP={key:0,class:"pt-6 border-t border-gray-200 dark:border-gray-700"},CP={id:"settings"},_P={key:0},AP={key:1},MP={key:2},DP={class:"text-sm text-gray-600 dark:text-gray-400 mb-6"},EP={id:"notebooks"},TP={class:"rounded-lg bg-gray-50 p-12 dark:bg-gray-800/50 text-center"},OP={id:"data"},PP={class:"mb-6 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},jP={class:"mb-6"},$P={key:0,class:"space-y-4"},RP={key:1,class:"mt-4 rounded-lg border border-red-200 bg-red-50 p-4 dark:border-red-500/40 dark:bg-red-900/20"},LP={class:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"},VP={class:"text-sm font-medium text-red-700 dark:text-red-200"},BP={class:"flex gap-2"},IP={class:"mt-3 list-disc space-y-1 pl-5 text-xs font-mono text-red-700 dark:text-red-200/90"},NP={key:2,class:"rounded-xl border border-dashed border-zinc-300 bg-white/70 p-10 text-center dark:border-zinc-700 dark:bg-zinc-900/40"},FP={class:"text-sm font-medium text-zinc-700 dark:text-zinc-200"},zP={id:"connections"},UP={id:"packages"},HP={key:0},WP={key:1},KP={key:2},qP={id:"ai"},GP={key:0},JP={key:1},YP={key:2},QP={id:"git"},XP={key:0},ZP={key:1},ej={key:2},tj={id:"scaffold"},sj={key:0},ij={key:1},nj={key:2},rj={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},oj={id:"env"},lj={class:"space-y-6"},aj={key:0,class:"max-h-64 overflow-y-auto border border-gray-200 dark:border-gray-700 rounded-md"},cj=["onClick","onMouseenter"],uj={class:"flex items-start justify-between gap-2"},dj={class:"flex-1 min-w-0"},fj={class:"text-sm font-mono font-medium text-gray-900 dark:text-gray-100"},hj={key:0,class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5 line-clamp-1"},pj={key:1,class:"text-xs text-gray-500 dark:text-gray-500 mt-0.5"},mj={class:"text-xs text-gray-500 dark:text-gray-500 font-mono shrink-0"},gj={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},vj={key:1,class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},yj={class:"relative"},bj={class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},kj={class:"space-y-4 text-left"},xj={class:"flex items-start gap-3"},wj={class:"flex items-start gap-3"},Sj={key:0,class:"mt-4"},Cj={class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},_j={class:"font-mono font-bold"},Aj={__name:"ProjectDetailView",setup(s){const e=Er(),t=Qa(),i=ec(),n=ie(null),r=ie(!0),o=ie(null),l=ie("overview"),a=["overview","basics","settings","notebooks","connections","data","packages","ai","git","scaffold","env"],u=ie(null),c=ie(""),d=ie(new Set),f=ie(!1),p=ie(null),v=ie(!1),k=ie(null),m=ie(!1),w=ie(new Set),L=ie(!1),I=ie(null),H=ie(null),N=ie({}),P=ie(!1),S=ie(null),O=ie(new Set),W=ie(!1),oe=ie({initialize:!0,user_name:"",user_email:"",hooks:{ai_sync:!1,data_security:!1,check_sensitive_dirs:!1}}),se=ie(!1),B=ie(null),ae=ie(!1),ee=ie(!1);ie([]),ie([]),ie([]),ie(!1);const $=ie([]),q=ie([]),Y=ie(null),ce=ie(null),ge=ie(!1),Ne=ie([]),be=ie({use_renv:!1,default_packages:[]}),ze=ie(!1),Ue=ie(null),Je=ie(!1),ht=ie(!1),rt=ie(!1),te=ie("untrack"),ve=ie(""),Q=ie(""),J=ie([]),T=ie(!1),x=ie(-1),_=ie({name:"",source:"cran",auto_attach:!0}),U=ie({}),ne=ie({}),le=ie(""),C=ie(!1),E=ie(null),j=ie(!1),re=ie(!1),K=ie("grouped"),Ce=ie(!1),pe=ie({enabled:!1,canonical_file:"CLAUDE.md",canonical_content:"",assistants:[]}),ke=ie(!1),Oe=ie(null),Be=ie(!1),Ye=ie(!1),Qe=ie(!1),bt=ie({file:"CLAUDE.md",exists:!0}),Le=z(()=>Object.keys(U.value||{}).length),ot=z(()=>{const M=n.value?.name||"Untitled",y=n.value?.path||"",V=N.value?.author?.name||I.value?.author?.name||n.value?.author||"";return{name:M,path:y,author:V}}),jt=z(()=>n.value?.type||I.value?.project_type||"Not set"),Ts=z(()=>N.value?.scaffold?.notebook_format||I.value?.scaffold?.notebook_format||"quarto"),si=M=>M?M.charAt(0).toUpperCase()+M.slice(1):"";z(()=>{if(!pe.value.enabled)return"Disabled";const M=Array.isArray(pe.value.assistants)?pe.value.assistants:[],y=M.length?M.map(si).join(", "):"Enabled",V=pe.value.canonical_file||"CLAUDE.md";return`${y}  ${V}`});const Ut={ai_sync:"AI sync",data_security:"Secret scan",check_sensitive_dirs:"Sensitive dirs"},Bt=z(()=>{const M=oe.value?.hooks||{};return Object.entries(M).filter(([,y])=>!!y).map(([y])=>Ut[y]||y)});z(()=>{const M=oe.value.initialize?"Auto-initialize repositories":"Manual initialization";return Bt.value.length?`${M}  ${Bt.value.join(", ")}`:M});const It=z(()=>be.value?.default_packages?.length||0);z(()=>{const M=be.value?.use_renv?"renv enabled":"renv disabled";return It.value>0?`${It.value} package${It.value===1?"":"s"}  ${M}`:`No default packages  ${M}`}),z(()=>Le.value>0?`${Le.value} variable${Le.value===1?"":"s"}`:"No variables defined");const pn=z(()=>{const M=ot.value.name,y=ot.value.path,V=ot.value.author;jt.value;const we=Ts.value,je=pe.value.enabled,We=pe.value.enabled?Array.isArray(pe.value.assistants)?pe.value.assistants.map(si).join(", "):"Enabled":"",Dt=pe.value.canonical_file||"CLAUDE.md",Ge=oe.value.initialize,$t=Bt.value,gs=It.value,qn=be.value?.use_renv||!1,gc=Le.value;return[{id:"basics",title:"Basics",section:"basics",content:`<div>${M}  ${V}</div><div class="text-sm text-gray-600 dark:text-gray-400 mt-1">${y}</div>`},{id:"structure",title:"Project Structure",section:"settings",content:`${me.value}  ${Object.keys(fe.value).length} workspace  ${Object.keys(he.value).length} input  ${Object.keys(Ve.value).length} output`},{id:"notebooks",title:"Notebooks & Scripts",section:"scaffold",content:we},{id:"packages",title:"Packages",section:"packages",content:gs>0?`${gs} packages  renv ${qn?"enabled":"disabled"}`:`renv: ${qn?"enabled":"disabled"}`},{id:"env",title:".env",section:"env",content:gc>0?`${gc} variable${gc===1?"":"s"}`:"No variables defined"},{id:"ai",title:"AI Assistants",section:"ai",content:je?`<span class="text-green-600 dark:text-green-400">${We}  ${Dt}</span>`:'<span class="text-gray-600 dark:text-gray-400">Disabled</span>'},{id:"git",title:"Git & Hooks",section:"git",content:Ge?`Auto-initialize repositories${$t.length?`  ${$t.join(", ")}`:""}`:"Manual initialization"}]}),os=M=>["flex items-center gap-2 px-3 py-2 rounded-md text-sm transition",l.value===M?"bg-sky-50 text-sky-700 font-medium dark:bg-sky-900/20 dark:text-sky-400":"text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-800"],rl=()=>{const M=e.query.section;M&&a.includes(M)?(l.value=M,M==="env"&&(Kn(),qs(()=>Nf()))):l.value="overview"};Re(l,M=>{t.replace({query:{...e.query,section:M}}),(M==="settings"||M==="basics"||M==="scaffold")&&!I.value&&ul(),M==="connections"&&$.value.length===0&&q.value.length===0&&Bb(),M==="packages"&&Ne.value.length===0&&dl(),M==="git"&&!ae.value&&hl(),M==="ai"&&!Be.value&&fl(),M==="env"&&!j.value&&Kn()}),Re(()=>e.query.section,M=>{M&&a.includes(M)?(l.value=M,M==="env"&&(qs(()=>Nf()),j.value||Kn())):M||(l.value="overview")});let Ii=!1,Ni=!1;Re(()=>pe.value.canonical_file,(M,y)=>{Ii||Be.value&&(!M||M===y||Wb(M))}),Re(U,M=>{Ni||console.log("[envVariables watcher] Value changed (not suppressed)")},{deep:!0}),Re(ne,M=>{Ni||console.log("[envGroups watcher] Value changed (not suppressed)")},{deep:!0}),Re(le,M=>{Ni||console.log("[envRawContent watcher] Value changed (not suppressed)")});let $r=null;Re(Q,()=>{$r&&clearTimeout($r),$r=setTimeout(()=>{Ib()},300)});const Hn=(M="")=>M.split(/[._-]/).filter(Boolean).map(y=>y.charAt(0).toUpperCase()+y.slice(1)).join(" "),Os=M=>JSON.parse(JSON.stringify(M)),ol=M=>Array.isArray(M)?M.map((y,V)=>[String(V),y]):Object.entries(M),ll=(M,y="",V=0)=>!M||typeof M!="object"?[]:ol(M).reduce((we,[je,We])=>{if(We==null)return we;const Dt=y?`${y}.${je}`:je;if(typeof We=="object"&&!Array.isArray(We)&&We.path)return we.push({type:"leaf",name:je,displayName:Hn(je),fullKey:Dt,data:We,leafCount:1,depth:V}),we;if(typeof We=="object"){const Ge=ll(We,Dt,V+1);if(Ge.length>0){const $t=Ge.reduce((gs,qn)=>gs+(qn.leafCount||0),0);we.push({type:"group",name:je,displayName:Hn(je),fullKey:Dt,children:Ge,leafCount:$t,depth:V})}}return we},[]),Rr=M=>M.slice().sort((y,V)=>y.displayName.localeCompare(V.displayName,void 0,{sensitivity:"base",numeric:!0})).map(y=>y.type==="group"?{...y,children:Rr(y.children)}:y),Lr=(M,y)=>{if(!y)return!0;const V=y.toLowerCase(),we=[M.displayName,M.name,M.fullKey];return M.type==="leaf"&&M.data?.path&&we.push(M.data.path),we.some(je=>je&&je.toLowerCase().includes(V))},Vr=(M,y)=>{if(!y)return{nodes:M,matchedKeys:new Set};const V=[],we=new Set;return M.forEach(je=>{if(je.type==="leaf"){Lr(je,y)&&(V.push(je),we.add(je.fullKey));return}const We=Vr(je.children,y);if(Lr(je,y)||We.nodes.length>0){const Ge=We.nodes,$t=Ge.reduce((gs,qn)=>gs+(qn.leafCount||0),0);V.push({...je,children:Ge,leafCount:$t||je.leafCount}),we.add(je.fullKey),We.matchedKeys.forEach(gs=>we.add(gs))}}),{nodes:V,matchedKeys:we}},mn=z(()=>{const M=u.value;return!M||typeof M!="object"?[]:!Array.isArray(M)&&M.path?[{type:"leaf",name:M.name||"data",displayName:Hn(M.name||"data"),fullKey:M.name||"data",data:M,leafCount:1,depth:0}]:Rr(ll(M))}),ii=z(()=>c.value.trim().toLowerCase()),ls=z(()=>{const M=ii.value;return M?Vr(mn.value,M):{nodes:mn.value,matchedKeys:new Set}}),ni=z(()=>ls.value.nodes),al=z(()=>ls.value.matchedKeys),cl=z(()=>ii.value.length>0),Br=z(()=>cl.value?[]:(mn.value||[]).filter(M=>(M.depth||0)===0).map(M=>{const y=M.fullKey||M.name||"";return{anchorId:y?_b(y):null,label:M.displayName||Hn(M.name||y||"data source"),count:M.leafCount||(M.type==="leaf"?1:0),nodeKey:y}}).filter(M=>M.anchorId&&M.label)),Wn=z(()=>w.value.size>0),Ir=z(()=>w.value.size),Nr=z(()=>Array.from(w.value)),R=M=>{let y=0;return M.forEach(V=>{y=Math.max(y,V.depth||0),V.type==="group"&&V.children&&(y=Math.max(y,R(V.children)))}),y},D=z(()=>R(mn.value)),F=z(()=>D.value>2),fe=z(()=>{const M=N.value.directories||{},y={},V=["functions","notebooks","scripts"];return Object.keys(M).forEach(we=>{V.includes(we)&&(y[we]=M[we])}),y}),he=z(()=>{const M=N.value.directories||{},y={};return Object.keys(M).forEach(V=>{(V.startsWith("inputs_")||V.includes("_raw")||V.includes("_intermediate")||V.includes("_final"))&&(y[V]=M[V])}),y}),Ve=z(()=>{const M=N.value.directories||{},y={};return Object.keys(M).forEach(V=>{(V.startsWith("outputs_")||V.includes("_figures")||V.includes("_tables")||V.includes("_models")||V.includes("_reports")||V==="cache"||V==="scratch")&&!V.startsWith("inputs_")&&(y[V]=M[V])}),y});z(()=>(N.value.extra_directories||[]).filter(y=>y.type==="input")),z(()=>(N.value.extra_directories||[]).filter(y=>y.type==="output")),z(()=>(N.value.extra_directories||[]).filter(y=>y.type==="workspace"));const me=z(()=>{const M=n.value?.type;return M?{project:"Standard Project Structure",project_sensitive:"Privacy Sensitive Project Structure",presentation:"Presentation Structure",course:"Course Structure"}[M]||M:"Standard Project Structure"}),Pe=z(()=>{if(!I.value?.directories)return{};const M={},y=I.value.directories||{},V=H.value?.project_types?.[n.value.type]?.directories||{};return Object.keys(V).forEach(we=>{M[we]=we in y}),I.value.extra_directories&&I.value.extra_directories.forEach(we=>{M[we.key]=!0}),M}),kt=z(()=>te.value==="untrack"?!0:te.value==="delete"?ve.value===n.value?.name:!1),He=(M,y,V)=>{const we=y.split(".").filter(Boolean);if(we.length===0)return null;const je=Os(M||{});let We=je;for(let Dt=0;Dt<we.length-1;Dt++){const Ge=we[Dt];(!We[Ge]||typeof We[Ge]!="object"||Array.isArray(We[Ge]))&&(We[Ge]={}),We=We[Ge]}return We[we[we.length-1]]=Os(V),je},gn=(M,y)=>{if(!M||!y)return null;const V=y.split(".").filter(Boolean);if(V.length===0)return null;let we=M;for(let je=0;je<V.length;je++){const We=V[je];if(!we||typeof we!="object"||!(We in we))return null;we=we[We]}return we},Lf=M=>{const y=M.split(".").filter(Boolean);if(y.length<=1)return;const V=new Set(d.value);let we="";for(let je=0;je<y.length-1;je++)we=we?`${we}.${y[je]}`:y[je],V.add(we);d.value=V},Ab=async(M,y)=>{if(!M)return;if(y){Lf(y);const we=new Set(d.value);we.add(y),d.value=we}await qs();const V=document.getElementById(M);V&&V.scrollIntoView({behavior:"smooth",block:"start"})},Vf=async M=>{const y=await fetch(`/api/project/${e.params.id}/data`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:M})}),V=await y.json();if(!y.ok||V.error)throw new Error(V.error||"Failed to save data catalog")},Mb=M=>{M&&(m.value=!1,p.value={fullKey:M.fullKey,name:M.name,data:Os(M.data||{})},k.value=null,f.value=!0)},Db=()=>{m.value=!0,p.value={fullKey:"",data:{}},k.value=null,f.value=!0},Eb=M=>{f.value=M,M||(p.value=null,k.value=null,v.value=!1,m.value=!1)},Tb=async M=>{if(!M||!M.fullKey||!M.data){k.value=M?.error||"Invalid data entry payload";return}const y=M.fullKey.trim(),V=!!M.isNew;if(!y){k.value="Dot notation key is required";return}if(V&&gn(u.value,y)){k.value="A data source with this key already exists";return}const we=Os(u.value),je=He(u.value,y,M.data);if(!je){k.value="Unable to write data entry to catalog";return}u.value=je,v.value=!0,k.value=null;try{if(await Vf(je),Lf(y),i.success(V?"Data Source Added":"Data Catalog Updated",V?"Data entry created successfully":"Data entry saved successfully"),f.value=!1,p.value=null,m.value=!1,w.value.has(y)){const We=new Set(w.value);We.delete(y),w.value=We}}catch(We){u.value=we,k.value=We.message||"Failed to save data catalog",i.error("Save Failed",We.message||"Failed to save data catalog")}finally{v.value=!1}},Ob=(M,y)=>{if(!M||!y)return null;const V=y.split(".").filter(Boolean);if(V.length===0)return null;const we=Os(M),je=[];let We=we;for(let Ge=0;Ge<V.length;Ge++){const $t=V[Ge];if(!We||typeof We!="object"||!($t in We))return null;je.push({parent:We,key:$t}),We=We[$t]}const Dt=je.pop();if(!Dt)return null;delete Dt.parent[Dt.key];for(let Ge=je.length-1;Ge>=0;Ge--){const{parent:$t,key:gs}=je[Ge];$t[gs]&&typeof $t[gs]=="object"&&!Array.isArray($t[gs])&&Object.keys($t[gs]).length===0&&delete $t[gs]}return we},Pb=async()=>{if(!Wn.value)return;L.value=!0;const M=Os(u.value);let y=Os(M);for(const V of w.value){const we=Ob(y,V);if(!we){i.error("Delete Failed",`Unable to locate ${V} in catalog`),L.value=!1;return}y=we}try{await Vf(y),u.value=y,i.success("Data Catalog Updated","Staged deletions have been saved"),w.value=new Set}catch(V){i.error("Delete Failed",V.message||"Failed to save catalog changes")}finally{L.value=!1}},jb=M=>{if(!M||!M.fullKey)return;const y=new Set(w.value);y.has(M.fullKey)?y.delete(M.fullKey):y.add(M.fullKey),w.value=y},$b=()=>{w.value=new Set},Rb=M=>{const y=new Set(d.value);y.has(M)?y.delete(M):y.add(M),d.value=y},Bf=async()=>{r.value=!0,o.value=null;try{const y=await(await fetch(`/api/project/${e.params.id}`)).json();y.error?o.value=y.error:n.value=y}catch(M){o.value="Failed to load project: "+M.message}finally{r.value=!1}},If=async()=>{try{const y=await(await fetch(`/api/project/${e.params.id}/data`)).json();y.error||(u.value=y.data||y)}catch(M){console.error("Failed to load data catalog:",M)}},ul=async()=>{P.value=!0,S.value=null;try{const[M,y]=await Promise.all([fetch(`/api/project/${e.params.id}/settings`),fetch("/api/settings/catalog")]),V=await M.json(),we=await y.json();H.value=we,V.error?S.value=V.error:(console.log("[DEBUG] Loaded project settings:",V.settings),console.log("[DEBUG] extra_directories:",V.settings.extra_directories),I.value=V.settings,N.value=JSON.parse(JSON.stringify(V.settings)),N.value.scaffold||(N.value.scaffold={notebook_format:"quarto",positron:!1}))}catch(M){S.value="Failed to load settings: "+M.message}finally{P.value=!1}},Lb=async()=>{switch(l.value){case"author":case"settings":await pc();break;case"packages":await Ff();break;case"scaffold":await pc();break;case"git":await Gf();break;case"connections":await zf();break;case"ai":await qf();break;case"env":await mc();break;case"overview":case"notebooks":case"data":i.info("No Changes to Save","This section has no editable settings");break;default:i.info("No Changes to Save","This section has no editable settings")}},pc=async()=>{console.log("[DEBUG] saveSettings called! Stack trace:",new Error().stack),W.value=!0;try{const M=(N.value.extra_directories||[]).filter(Ge=>O.value.has(Ge._id));if(M.length>0){const $t=await(await fetch(`/api/project/${e.params.id}/directories`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({directories:M})})).json();if(!$t.success){i.error("Directory Creation Failed",$t.error||"Failed to create directories"),W.value=!1;return}O.value=new Set}const y=new Set,V=H.value?.project_types?.[n.value.type];V?.directories&&Object.keys(V.directories).forEach(Ge=>y.add(Ge)),N.value.extra_directories&&N.value.extra_directories.forEach(Ge=>{Ge.key&&y.add(Ge.key)});const we={};Object.keys(N.value.enabled||{}).forEach(Ge=>{y.has(Ge)&&(we[Ge]=N.value.enabled[Ge])});const je={...N.value,enabled:we};console.log("[DEBUG] Saving settings with extra_directories:",je.extra_directories),console.log("[DEBUG] Cleaned enabled state:",we),console.log("[DEBUG] Removed invalid keys:",Object.keys(N.value.enabled).filter(Ge=>!y.has(Ge)));const Dt=await(await fetch(`/api/project/${e.params.id}/settings`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(je)})).json();if(Dt.success){const Ge=M.length>0?`Settings updated and ${M.length} director${M.length===1?"y":"ies"} created`:"Project settings have been updated";i.success("Settings Saved",Ge),I.value=JSON.parse(JSON.stringify(N.value)),await ul()}else i.error("Save Failed",Dt.error||"Failed to save settings")}catch(M){i.error("Save Failed",M.message)}finally{W.value=!1}},Vb=M=>{M&&Ab(M.anchorId,M.nodeKey)},Nf=()=>{const M=document.getElementById("env");M&&M.scrollIntoView({behavior:"smooth",block:"start"})},Bb=async()=>{try{const y=await(await fetch(`/api/project/${e.params.id}/connections`)).json();if(y.error)console.error("Failed to load connections:",y.error);else{const V=Object.entries(y.databases||{}).map(([je,We])=>({_id:je,name:je,...We})),we=Object.entries(y.storage_buckets||{}).map(([je,We])=>({_id:je,name:je,...We}));$.value=V,q.value=we,Y.value=y.default_database||null,ce.value=y.default_storage_bucket||null}}catch(M){console.error("Failed to load connections:",M.message)}},dl=async()=>{ze.value=!0,Ue.value=null;try{const y=await(await fetch(`/api/project/${e.params.id}/packages`)).json();y.error?Ue.value=y.error:(Ne.value=(y.packages||[]).map(V=>({name:V.name||"",source:V.source||"cran",auto_attach:V.auto_attach!==void 0?V.auto_attach:!0,ref:V.ref||""})),be.value={use_renv:y.use_renv||!1,default_packages:JSON.parse(JSON.stringify(Ne.value))})}catch(M){Ue.value="Failed to load packages: "+M.message}finally{ze.value=!1}},Ff=async()=>{Je.value=!0;try{const y=await(await fetch(`/api/project/${e.params.id}/packages`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({use_renv:be.value.use_renv,packages:be.value.default_packages})})).json();y.success?(i.success("Packages Saved","Package configuration has been updated"),await dl()):i.error("Save Failed",y.error||"Failed to save packages")}catch(M){i.error("Save Failed",M.message)}finally{Je.value=!1}},zf=async()=>{ge.value=!0;try{const M={};$.value.forEach(je=>{const{_id:We,name:Dt,...Ge}=je;M[Dt]=Ge});const y={};q.value.forEach(je=>{const{_id:We,name:Dt,...Ge}=je;y[Dt]=Ge});const we=await(await fetch(`/api/project/${e.params.id}/connections`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({default_database:Y.value,default_storage_bucket:ce.value,databases:M,storage_buckets:y})})).json();we.success?i.success("Connections Saved","Connection configuration has been updated"):i.error("Save Failed",we.error||"Failed to save connections")}catch(M){i.error("Save Failed",M.message)}finally{ge.value=!1}},Ib=async()=>{if(Q.value.length<2){J.value=[],x.value=-1;return}T.value=!0;try{const y=await(await fetch(`/api/packages/search?q=${encodeURIComponent(Q.value)}`)).json();console.log("Package search results:",y),J.value=y.packages||[],x.value=J.value.length>0?0:-1}catch(M){console.error("Failed to search packages:",M),J.value=[],x.value=-1}finally{T.value=!1}},Nb=M=>{J.value.length!==0&&(M.key==="ArrowDown"?(M.preventDefault(),x.value=Math.min(x.value+1,J.value.length-1)):M.key==="ArrowUp"?(M.preventDefault(),x.value=Math.max(x.value-1,0)):M.key==="Enter"&&x.value>=0?(M.preventDefault(),Uf(J.value[x.value])):M.key==="Escape"&&(J.value=[],x.value=-1))},Uf=M=>{_.value.name=M.name,_.value.source=M.source,Q.value="",J.value=[],x.value=-1},Fb=()=>{_.value.name.trim()&&(Ne.value.push({name:_.value.name.trim(),source:_.value.source,auto_attach:_.value.auto_attach}),ht.value=!1,i.success("Package Added",`${_.value.name} added to package list`))},zb=()=>{rt.value=!1,te.value="untrack",ve.value=""},Ub=async()=>{if(!kt.value){console.log("[DELETE] Cannot delete - canDelete is false");return}console.log("[DELETE] Starting delete with option:",te.value),console.log("[DELETE] Project ID:",e.params.id);try{const M=te.value==="delete"?`/api/projects/${e.params.id}/delete`:`/api/projects/${e.params.id}/untrack`;console.log("[DELETE] Calling endpoint:",M);const y=await fetch(M,{method:"POST",headers:{"Content-Type":"application/json"}});if(console.log("[DELETE] Response status:",y.status),!y.ok){const je=await y.json();throw console.error("[DELETE] Error response:",je),new Error(je.message||"Failed to delete project")}const V=await y.json();console.log("[DELETE] Success result:",V);const we=te.value==="delete"?"deleted":"removed from Framework";i.success("Project Removed",`${n.value.name} has been ${we}`),setTimeout(()=>{window.location.href="/projects"},500)}catch(M){console.error("[DELETE] Failed to delete project:",M),i.error("Delete Failed",M.message||"Could not delete project")}},Hb=M=>M?Array.isArray(M)?Array.from(new Set(M.map(y=>String(y)))):typeof M=="string"?[M]:[]:[],Hf=async M=>{let y=`/api/project/${e.params.id}/ai`;if(M){const we=new URLSearchParams;we.set("canonical_file",M),y+=`?${we.toString()}`}const V=await fetch(y);if(!V.ok)throw new Error("Failed to load AI settings");return V.json()},fl=async()=>{ke.value=!0,Oe.value=null;try{const M=await Hf();if(M.error){Oe.value=M.error,Be.value=!1;return}const y=M.ai||{};Ii=!0;const V={enabled:!!y.enabled,canonical_file:y.canonical_file||"CLAUDE.md",canonical_content:y.canonical_content||"",assistants:Hb(y.assistants)};pe.value=V,bt.value={file:y.content_file||y.canonical_file||"CLAUDE.md",exists:!!y.content_exists},Ii=!1,await Kf(V.canonical_file,{preserveContentIfMissing:!1}),Be.value=!0}catch(M){Oe.value=M.message||"Failed to load AI settings",Be.value=!1}finally{Ii=!1,ke.value=!1,Qe.value=!1}},hl=async()=>{se.value=!0,B.value=null;try{const y=await(await fetch(`/api/project/${e.params.id}/git`)).json();if(y.error){B.value=y.error,ae.value=!1;return}const V=y.git||{};oe.value={initialize:V.initialize!==void 0?!!V.initialize:!0,user_name:V.user_name||"",user_email:V.user_email||"",hooks:{ai_sync:V.hooks?.ai_sync||!1,data_security:V.hooks?.data_security||!1,check_sensitive_dirs:V.hooks?.check_sensitive_dirs||!1}},ae.value=!0}catch(M){B.value=M.message||"Failed to load Git settings",ae.value=!1}finally{se.value=!1}},Wf=z({get(){return{initialize:oe.value.initialize,user_name:oe.value.user_name||"",user_email:oe.value.user_email||"",hooks:{ai_sync:oe.value.hooks?.ai_sync||!1,data_security:oe.value.hooks?.data_security||!1,check_sensitive_dirs:oe.value.hooks?.check_sensitive_dirs||!1}}},set(M){oe.value={initialize:M.initialize,user_name:M.user_name,user_email:M.user_email,hooks:{ai_sync:M.hooks.ai_sync,data_security:M.hooks.data_security,check_sensitive_dirs:M.hooks.check_sensitive_dirs}}}}),Kf=async(M,{preserveContentIfMissing:y=!0}={})=>{if(M){Qe.value=!0;try{const V=await Hf(M);if(V.error){i.error("Load Failed",V.error);return}const we=V.ai||{};bt.value={file:we.content_file||M,exists:!!we.content_exists},(we.content_exists||!y)&&(pe.value.canonical_content=we.canonical_content||"")}catch(V){i.error("Load Failed",V.message||"Unable to load canonical file")}finally{Qe.value=!1}}},Wb=M=>{const y=typeof M=="string"&&M.length>0?M:"CLAUDE.md";Kf(y,{preserveContentIfMissing:!0})},qf=async()=>{Ye.value=!0;try{const y=await(await fetch(`/api/project/${e.params.id}/ai`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:pe.value.enabled,canonical_file:pe.value.canonical_file,assistants:pe.value.assistants,canonical_content:pe.value.canonical_content})})).json();y.success?(i.success("AI Settings Saved","AI assistant configuration has been updated"),Be.value=!1,await fl()):i.error("Save Failed",y.error||"Failed to save AI settings")}catch(M){i.error("Save Failed",M.message||"Failed to save AI settings")}finally{Ye.value=!1}},Gf=async()=>{ee.value=!0;try{const y=await(await fetch(`/api/project/${e.params.id}/git`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({initialize:oe.value.initialize,user_name:oe.value.user_name,user_email:oe.value.user_email,hooks:oe.value.hooks})})).json();y.success?(i.success("Git Settings Saved","Repository configuration has been updated"),ae.value=!1,await hl()):i.error("Save Failed",y.error||"Failed to save Git settings")}catch(M){i.error("Save Failed",M.message||"Failed to save Git settings")}finally{ee.value=!1}},Kn=async()=>{if(C.value||j.value){console.log("[loadEnv] Blocked: already loading or loaded",{loading:C.value,loaded:j.value});return}C.value=!0,E.value=null;try{const y=await(await fetch(`/api/project/${e.params.id}/env`)).json();y.error?(E.value=y.error,j.value=!1):(Ni=!0,console.log("[loadEnv] Updating env values with suppressEnvWatch = true"),j.value=!0,U.value=y.variables||{},ne.value=y.groups||{},le.value=y.raw_content||"",Ni=!1,console.log("[loadEnv] Env values updated, suppressEnvWatch = false"))}catch(M){E.value="Failed to load .env: "+M.message,j.value=!1}finally{Ni=!1,C.value=!1}},mc=async()=>{re.value=!0;try{const M=K.value==="raw"?{raw_content:le.value}:{variables:U.value,regroup:Ce.value},V=await(await fetch(`/api/project/${e.params.id}/env`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(M)})).json();V.success?(i.success(".env Saved","Environment variables have been updated"),j.value=!1,await Kn()):i.error("Save Failed",V.error||"Failed to save .env")}catch(M){i.error("Save Failed",M.message)}finally{re.value=!1}},Jf=M=>{(M.metaKey||M.ctrlKey)&&M.key==="s"&&(M.preventDefault(),l.value==="settings"||l.value==="scaffold"?pc():l.value==="connections"?zf():l.value==="packages"?Ff():l.value==="git"?Gf():l.value==="ai"?qf():l.value==="directories"?saveDirectories():l.value==="env"&&mc())};return is(()=>{rl(),Bf(),If(),ul(),dl(),fl(),hl(),Kn(),window.addEventListener("keydown",Jf)}),Dr(()=>{window.removeEventListener("keydown",Jf)}),Re(()=>e.params.id,(M,y)=>{M&&M!==y&&(l.value="overview",n.value=null,I.value=null,N.value={},S.value=null,P.value=!1,Ne.value=[],be.value={use_renv:!1,default_packages:[]},Ue.value=null,ze.value=!1,u.value=null,w.value=new Set,k.value=null,p.value=null,U.value={},ne.value={},le.value="",E.value=null,C.value=!1,K.value="grouped",Ce.value=!1,oe.value={initialize:!0,user_name:"",user_email:"",hooks:{ai_sync:!1,data_security:!1,check_sensitive_dirs:!1}},ae.value=!1,B.value=null,se.value=!1,Ii=!0,pe.value={enabled:!1,canonical_file:"CLAUDE.md",canonical_content:"",assistants:[]},bt.value={file:"CLAUDE.md",exists:!0},Be.value=!1,Oe.value=null,ke.value=!1,Qe.value=!1,Ii=!1,j.value=!1,E.value=null,C.value=!1,u.value=null,rl(),Bf(),If(),ul(),dl(),fl(),hl(),Kn())}),(M,y)=>(g(),b("div",null,[r.value?(g(),b("div",QO,[...y[47]||(y[47]=[h("div",{class:"text-zinc-600 dark:text-zinc-400"},"Loading project...",-1)])])):o.value?(g(),b("div",XO,[A(_s,{type:"error",title:"Error Loading Project",description:o.value},null,8,["description"])])):n.value?(g(),b("div",ZO,[h("nav",eP,[h("div",tP,[h("h2",sP,X(n.value.name),1),h("div",iP,[h("span",nP,X(n.value.path),1),A(cr,{value:n.value.path,variant:"ghost",successMessage:"Path copied",class:"shrink-0"},null,8,["value"])])]),h("div",rP,[h("a",{href:"#overview",onClick:y[0]||(y[0]=Nt(V=>l.value="overview",["prevent"])),class:xe(os("overview"))},[A(ft(Xa),{class:"h-4 w-4"}),y[48]||(y[48]=de(" Overview ",-1))],2),A(La,null,{default:Z(()=>[...y[49]||(y[49]=[de("Settings",-1)])]),_:1}),h("a",{href:"#basics",onClick:y[1]||(y[1]=Nt(V=>l.value="basics",["prevent"])),class:xe(os("basics"))},[A(ft(zd),{class:"h-4 w-4"}),y[50]||(y[50]=de(" Basics ",-1))],2),h("a",{href:"#settings",onClick:y[2]||(y[2]=Nt(V=>l.value="settings",["prevent"])),class:xe(os("settings"))},[A(ft(ma),{class:"h-4 w-4"}),y[51]||(y[51]=de(" Project Structure ",-1))],2),h("a",{href:"#packages",onClick:y[3]||(y[3]=Nt(V=>l.value="packages",["prevent"])),class:xe(os("packages"))},[A(ft(Ud),{class:"h-4 w-4"}),y[52]||(y[52]=de(" Packages ",-1))],2),h("a",{href:"#ai",onClick:y[4]||(y[4]=Nt(V=>l.value="ai",["prevent"])),class:xe(os("ai"))},[A(ft(Vw),{class:"h-4 w-4"}),y[53]||(y[53]=de(" AI Assistants ",-1))],2),h("a",{href:"#git",onClick:y[5]||(y[5]=Nt(V=>l.value="git",["prevent"])),class:xe(os("git"))},[...y[54]||(y[54]=[h("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})],-1),de(" Git & Hooks ",-1)])],2),h("a",{href:"#connections",onClick:y[6]||(y[6]=Nt(V=>l.value="connections",["prevent"])),class:xe(os("connections"))},[A(ft(Hd),{class:"h-4 w-4"}),y[55]||(y[55]=de(" Connections ",-1))],2),h("a",{href:"#env",onClick:y[7]||(y[7]=Nt(V=>l.value="env",["prevent"])),class:xe(os("env"))},[A(ft(Za),{class:"h-4 w-4"}),y[56]||(y[56]=de(" .env Defaults ",-1))],2),h("a",{href:"#scaffold",onClick:y[8]||(y[8]=Nt(V=>l.value="scaffold",["prevent"])),class:xe(os("scaffold"))},[A(ft(Ew),{class:"h-4 w-4"}),y[57]||(y[57]=de(" Scaffold Behavior ",-1))],2),A(La,null,{default:Z(()=>[...y[58]||(y[58]=[de("Project",-1)])]),_:1}),h("a",{href:"#data",onClick:y[9]||(y[9]=Nt(V=>l.value="data",["prevent"])),class:xe(os("data"))},[A(ft(Pw),{class:"h-4 w-4"}),y[59]||(y[59]=de(" Data ",-1))],2),l.value==="data"&&Br.value.length?(g(),b("div",oP,[(g(!0),b(ye,null,$e(Br.value,V=>(g(),b("a",{key:V.anchorId,href:`#${V.anchorId}`,onClick:Nt(we=>Vb(V),["prevent"]),class:"flex items-center justify-between gap-2 rounded-md px-3 py-1 text-xs text-gray-600 transition hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-gray-800"},[h("span",aP,X(V.label),1),V.count?(g(),b("span",cP,X(V.count),1)):G("",!0)],8,lP))),128))])):G("",!0),h("a",{href:"#notebooks",onClick:y[10]||(y[10]=Nt(V=>l.value="notebooks",["prevent"])),class:xe(os("notebooks"))},[A(ft(Cu),{class:"h-4 w-4"}),y[60]||(y[60]=de(" Notebooks ",-1))],2)]),h("div",uP,[A(Ke,{variant:"primary",onClick:Lb,disabled:W.value||Je.value||re.value||Ye.value||ee.value||ge.value,class:"w-full"},{default:Z(()=>[de(X(W.value||Je.value||re.value||Ye.value||ee.value||ge.value?"Saving...":"Save"),1)]),_:1},8,["disabled"])]),h("div",dP,[h("div",fP,[h("button",{onClick:y[11]||(y[11]=V=>rt.value=!0),class:"text-xs text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-400 transition"}," Delete Project ")])])]),h("div",hP,[Ze(h("div",pP,[y[61]||(y[61]=h("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Overview",-1)),y[62]||(y[62]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Quick overview of your project settings. ",-1)),A(Ef,{cards:pn.value,onNavigate:y[12]||(y[12]=V=>l.value=V)},null,8,["cards"])],512),[[ut,l.value==="overview"]]),Ze(h("div",mP,[P.value?(g(),b("div",gP,[...y[63]||(y[63]=[h("div",{class:"text-center py-12 text-zinc-500 dark:text-zinc-400"}," Loading settings... ",-1)])])):S.value?(g(),b("div",vP,[A(_s,{type:"error",title:"Error Loading Settings",description:S.value},null,8,["description"])])):(g(),b("div",yP,[y[69]||(y[69]=h("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Basics",-1)),y[70]||(y[70]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Essential project settings. ",-1)),h("div",bP,[N.value.scaffold?(g(),b("div",kP,[A(Ae,{modelValue:n.value.name,"onUpdate:modelValue":y[13]||(y[13]=V=>n.value.name=V),label:"Project Name",hint:"Changing this will rename the project directory"},null,8,["modelValue"]),h("div",null,[y[64]||(y[64]=h("label",{class:"block text-sm font-semibold text-gray-900 dark:text-white mb-2"}," Filesystem Location ",-1)),h("div",xP,[h("code",wP,X(n.value.path),1),A(cr,{value:n.value.path,successMessage:"Path copied"},null,8,["value"])])]),h("div",null,[y[66]||(y[66]=h("label",{class:"block text-sm font-semibold text-gray-900 dark:text-white mb-3"}," Supported Editors ",-1)),A(Ji,{modelValue:N.value.scaffold.positron,"onUpdate:modelValue":y[14]||(y[14]=V=>N.value.scaffold.positron=V),id:"support-positron-edit",description:"Enable Positron-specific workspace and settings files"},{default:Z(()=>[...y[65]||(y[65]=[de(" Positron ",-1)])]),_:1},8,["modelValue"]),y[67]||(y[67]=h("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-3"}," RStudio supported by default ",-1))]),A(Qs,{modelValue:N.value.scaffold.notebook_format,"onUpdate:modelValue":y[15]||(y[15]=V=>N.value.scaffold.notebook_format=V),label:"Default Notebook Format",hint:"Format used when creating new notebooks"},{default:Z(()=>[...y[68]||(y[68]=[h("option",{value:"quarto"},"Quarto (.qmd)",-1),h("option",{value:"rmarkdown"},"R Markdown (.Rmd)",-1)])]),_:1},8,["modelValue"]),N.value.author?(g(),b("div",SP,[A(Tf,{modelValue:N.value.author,"onUpdate:modelValue":y[16]||(y[16]=V=>N.value.author=V)},null,8,["modelValue"])])):G("",!0)])):G("",!0)])]))],512),[[ut,l.value==="basics"]]),Ze(h("div",CP,[P.value?(g(),b("div",_P,[...y[71]||(y[71]=[h("div",{class:"text-center py-12 text-zinc-500 dark:text-zinc-400"}," Loading settings... ",-1)])])):S.value?(g(),b("div",AP,[A(_s,{type:"error",title:"Error Loading Settings",description:S.value},null,8,["description"])])):I.value?(g(),b("div",MP,[y[74]||(y[74]=h("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Project Structure",-1)),h("p",DP,[y[72]||(y[72]=de(" This project uses the ",-1)),h("strong",null,X(me.value),1),y[73]||(y[73]=de(" structure. ",-1))]),A(_s,{type:"info",title:"Append-Only Mode",description:"You can enable disabled directories and add new custom directories. Directories that are already enabled cannot be turned off to prevent accidental data loss.",class:"mb-6"}),A($f,{"project-type":n.value.type,directories:N.value.directories||{},"render-dirs":N.value.render_dirs||{},enabled:N.value.enabled||Pe.value,"extra-directories":N.value.extra_directories||[],settings:N.value,gitignore:N.value.gitignore||"",catalog:H.value?.project_types?.[n.value.type]||{},"new-extra-ids":O.value,"allow-destruction":!1,"onUpdate:directories":y[17]||(y[17]=V=>N.value.directories=V),"onUpdate:renderDirs":y[18]||(y[18]=V=>N.value.render_dirs=V),"onUpdate:enabled":y[19]||(y[19]=V=>N.value.enabled=V),"onUpdate:extraDirectories":y[20]||(y[20]=V=>N.value.extra_directories=V),"onUpdate:gitignore":y[21]||(y[21]=V=>N.value.gitignore=V),"onUpdate:newExtraIds":y[22]||(y[22]=V=>O.value=V)},null,8,["project-type","directories","render-dirs","enabled","extra-directories","settings","gitignore","catalog","new-extra-ids"])])):G("",!0)],512),[[ut,l.value==="settings"]]),Ze(h("div",EP,[y[76]||(y[76]=h("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Rendered Notebooks",-1)),y[77]||(y[77]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Browse and access your rendered Quarto/RMarkdown notebooks. ",-1)),h("div",TP,[A(ft(Cu),{class:"h-12 w-12 mx-auto mb-4 text-gray-400"}),y[75]||(y[75]=h("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Notebook browser coming soon... ",-1))])],512),[[ut,l.value==="notebooks"]]),Ze(h("div",OP,[h("div",PP,[y[79]||(y[79]=h("div",null,[h("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white"},"Data Catalog"),h("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Browse your project's data sources with copy commands. ")],-1)),A(Ke,{variant:"primary",size:"sm",class:"inline-flex items-center gap-2",onClick:Db},{default:Z(()=>[A(ft(Lw),{class:"h-4 w-4"}),y[78]||(y[78]=de(" Add Data Source ",-1))]),_:1})]),h("div",jP,[A(Ae,{modelValue:c.value,"onUpdate:modelValue":y[23]||(y[23]=V=>c.value=V),label:"Search data sources",placeholder:"Filter by name, prefix, or file path"},null,8,["modelValue"])]),ni.value.length>0?(g(),b("div",$P,[(g(!0),b(ye,null,$e(ni.value,V=>(g(),_e(YO,{key:V.fullKey,node:V,"expanded-keys":d.value,"auto-expanded-keys":al.value,"toggle-group":Rb,"search-term":c.value,hierarchical:F.value,"pending-deletes":w.value,onEdit:Mb,onDelete:jb},null,8,["node","expanded-keys","auto-expanded-keys","search-term","hierarchical","pending-deletes"]))),128))])):G("",!0),Wn.value?(g(),b("div",RP,[h("div",LP,[h("div",null,[h("p",VP,X(Ir.value)+" data source"+X(Ir.value===1?"":"s")+" marked for deletion. ",1),y[80]||(y[80]=h("p",{class:"text-xs text-red-600 dark:text-red-200/80"}," Changes will be applied when you save. ",-1))]),h("div",BP,[A(Ke,{variant:"secondary",size:"sm",class:"shadow-none",disabled:L.value,onClick:$b},{default:Z(()=>[...y[81]||(y[81]=[de(" Cancel ",-1)])]),_:1},8,["disabled"]),A(Ke,{size:"sm",class:"bg-red-600 text-white hover:bg-red-500 focus-visible:outline-red-600 dark:bg-red-500 dark:hover:bg-red-400",disabled:L.value,onClick:Pb},{default:Z(()=>[de(X(L.value?"Saving":"Save Changes"),1)]),_:1},8,["disabled"])])]),h("ul",IP,[(g(!0),b(ye,null,$e(Nr.value,V=>(g(),b("li",{key:V},X(V),1))),128))])])):cl.value?(g(),b("div",NP,[h("p",FP,' No data sources match "'+X(c.value)+'". ',1),y[82]||(y[82]=h("p",{class:"mt-2 text-xs text-zinc-500 dark:text-zinc-400"}," Try adjusting your search terms or clearing the filter. ",-1))])):(g(),b(ye,{key:3},[!Wn.value&&(!u.value||Object.keys(u.value||{}).length===0)?(g(),_e(O6,{key:0,title:"No Data Sources",description:"This project doesn't have any data sources defined in its settings",icon:"database"})):G("",!0)],64))],512),[[ut,l.value==="data"]]),A(tO,{mode:m.value?"create":"edit",modelValue:f.value,"onUpdate:modelValue":[y[24]||(y[24]=V=>f.value=V),Eb],entry:p.value,saving:v.value,error:k.value,onSave:Tb},null,8,["mode","modelValue","entry","saving","error"]),Ze(h("div",zP,[y[83]||(y[83]=h("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Connections",-1)),y[84]||(y[84]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Database and storage connections for this project. ",-1)),A(jf,{"database-connections":$.value,"onUpdate:databaseConnections":y[25]||(y[25]=V=>$.value=V),"s3-connections":q.value,"onUpdate:s3Connections":y[26]||(y[26]=V=>q.value=V),"default-database":Y.value,"onUpdate:defaultDatabase":y[27]||(y[27]=V=>Y.value=V),"default-storage-bucket":ce.value,"onUpdate:defaultStorageBucket":y[28]||(y[28]=V=>ce.value=V)},null,8,["database-connections","s3-connections","default-database","default-storage-bucket"])],512),[[ut,l.value==="connections"]]),Ze(h("div",UP,[ze.value?(g(),b("div",HP,[...y[85]||(y[85]=[h("div",{class:"text-center py-12"},[h("div",{class:"text-sm text-gray-500 dark:text-gray-400"},"Loading packages...")],-1)])])):Ue.value?(g(),b("div",WP,[A(_s,{type:"error",title:"Error Loading Packages",description:Ue.value},null,8,["description"])])):(g(),b("div",KP,[y[86]||(y[86]=h("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Packages & Dependencies",-1)),y[87]||(y[87]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Configure package management and default packages for this project. ",-1)),A(Sb,{modelValue:be.value,"onUpdate:modelValue":y[29]||(y[29]=V=>be.value=V),"show-renv-toggle":!0,flush:!1},null,8,["modelValue"])]))],512),[[ut,l.value==="packages"]]),Ze(h("div",qP,[ke.value?(g(),b("div",GP,[...y[88]||(y[88]=[h("div",{class:"text-center py-12 text-sm text-gray-500 dark:text-gray-400"},"Loading AI settings...",-1)])])):Oe.value?(g(),b("div",JP,[A(_s,{type:"error",title:"Error Loading AI Settings",description:Oe.value},null,8,["description"])])):(g(),b("div",YP,[y[89]||(y[89]=h("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"AI Assistants",-1)),y[90]||(y[90]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Framework maintains context files for selected assistants and keeps them in sync before commits. ",-1)),A(Cb,{modelValue:pe.value,"onUpdate:modelValue":y[30]||(y[30]=V=>pe.value=V),flush:!1,"show-editor":!0,"editor-height":"400px","editor-disabled":Qe.value,"editor-loading":Qe.value},{"editor-alert":Z(()=>[bt.value.exists?G("",!0):(g(),_e(_s,{key:0,type:"info",title:"New canonical file",description:`Saving copies the current instructions into ${pe.value.canonical_file||"CLAUDE.md"}. The original file stays on disk; if AI sync hooks are enabled they mirror everything from the new canonical file.`,class:"mb-4"},null,8,["description"]))]),_:1},8,["modelValue","editor-disabled","editor-loading"])]))],512),[[ut,l.value==="ai"]]),Ze(h("div",QP,[se.value?(g(),b("div",XP,[...y[91]||(y[91]=[h("div",{class:"text-center py-12 text-sm text-gray-500 dark:text-gray-400"},"Loading git settings...",-1)])])):B.value?(g(),b("div",ZP,[A(_s,{type:"error",title:"Error Loading Git Settings",description:B.value},null,8,["description"])])):(g(),b("div",ej,[y[93]||(y[93]=h("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Git & Hooks",-1)),y[94]||(y[94]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Configure repository initialization, commit identity, git hooks, and security scanning. ",-1)),A(Of,{modelValue:Wf.value,"onUpdate:modelValue":y[31]||(y[31]=V=>Wf.value=V)},{note:Z(()=>[...y[92]||(y[92]=[de(" Project-specific .gitignore templates can be customized in Project Defaults. ",-1)])]),_:1},8,["modelValue"])]))],512),[[ut,l.value==="git"]]),Ze(h("div",tj,[P.value?(g(),b("div",sj,[...y[95]||(y[95]=[h("div",{class:"text-center py-12 text-zinc-500 dark:text-zinc-400"}," Loading settings... ",-1)])])):S.value?(g(),b("div",ij,[A(_s,{type:"error",title:"Error Loading Settings",description:S.value},null,8,["description"])])):(g(),b("div",nj,[y[96]||(y[96]=h("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Scaffold Behavior",-1)),y[97]||(y[97]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"},[de(" Automatic actions when "),h("code",{class:"px-1.5 py-0.5 bg-gray-200 dark:bg-gray-700 rounded text-xs"},"scaffold()"),de(" runs to initialize your project environment. ")],-1)),h("div",rj,[N.value.scaffold?(g(),_e(Pf,{key:0,modelValue:N.value.scaffold,"onUpdate:modelValue":y[32]||(y[32]=V=>N.value.scaffold=V),flush:""},null,8,["modelValue"])):G("",!0)])]))],512),[[ut,l.value==="scaffold"]]),Ze(h("div",oj,[y[98]||(y[98]=h("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Environment Variables",-1)),y[99]||(y[99]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Manage environment variables for this project (.env file). ",-1)),A(Rf,{loading:C.value,error:E.value,groups:ne.value,variables:U.value,"onUpdate:variables":y[33]||(y[33]=V=>U.value=V),"raw-content":le.value,"onUpdate:rawContent":y[34]||(y[34]=V=>le.value=V),"view-mode":K.value,"onUpdate:viewMode":y[35]||(y[35]=V=>K.value=V),"regroup-on-save":Ce.value,"onUpdate:regroupOnSave":y[36]||(y[36]=V=>Ce.value=V),onSave:mc},null,8,["loading","error","groups","variables","raw-content","view-mode","regroup-on-save"])],512),[[ut,l.value==="env"]])])])):G("",!0),A(tn,{modelValue:ht.value,"onUpdate:modelValue":y[42]||(y[42]=V=>ht.value=V),title:"Add Package",size:"md",variant:"left"},{actions:Z(()=>[A(Ke,{variant:"primary",onClick:Fb,disabled:!_.value.name.trim()},{default:Z(()=>[...y[105]||(y[105]=[de(" Add Package ",-1)])]),_:1},8,["disabled"]),A(Ke,{variant:"secondary",onClick:y[41]||(y[41]=V=>ht.value=!1)},{default:Z(()=>[...y[106]||(y[106]=[de(" Cancel ",-1)])]),_:1})]),default:Z(()=>[h("div",lj,[h("div",null,[y[100]||(y[100]=h("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Search CRAN Packages ",-1)),Ze(h("input",{"onUpdate:modelValue":y[37]||(y[37]=V=>Q.value=V),onKeydown:Nb,type:"text",placeholder:"Type to search CRAN...",class:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 px-3 py-2 text-sm text-gray-900 dark:text-gray-100 font-mono focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500"},null,544),[[mr,Q.value]])]),J.value.length>0?(g(),b("div",aj,[(g(!0),b(ye,null,$e(J.value,(V,we)=>(g(),b("button",{key:V.name,onClick:je=>Uf(V),onMouseenter:je=>x.value=we,class:xe(["w-full px-3 py-2 text-left border-b border-gray-200 dark:border-gray-700 last:border-b-0 transition",x.value===we?"bg-sky-50 dark:bg-sky-900/20":"hover:bg-gray-50 dark:hover:bg-gray-800"])},[h("div",uj,[h("div",dj,[h("div",fj,X(V.name),1),V.title?(g(),b("div",hj,X(V.title),1)):G("",!0),V.author?(g(),b("div",pj,X(V.author),1)):G("",!0)]),h("div",mj," v"+X(V.version),1)])],42,cj))),128))])):G("",!0),h("div",null,[y[101]||(y[101]=h("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Package Name ",-1)),Ze(h("input",{"onUpdate:modelValue":y[38]||(y[38]=V=>_.value.name=V),type:"text",placeholder:"dplyr",class:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 px-3 py-2 text-sm text-gray-900 dark:text-gray-100 font-mono focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500"},null,512),[[mr,_.value.name]]),_.value.source==="github"?(g(),b("p",gj," GitHub: user/repo (e.g., tidyverse/dplyr) ")):G("",!0),_.value.source==="bioc"?(g(),b("p",vj," Bioconductor: name only (e.g., DESeq2) ")):G("",!0)]),h("div",null,[y[104]||(y[104]=h("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Source ",-1)),h("div",yj,[Ze(h("select",{"onUpdate:modelValue":y[39]||(y[39]=V=>_.value.source=V),class:"w-full appearance-none rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 pl-3 pr-10 py-2 text-sm text-gray-900 dark:text-gray-100 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500"},[...y[102]||(y[102]=[h("option",{value:"cran"},"CRAN",-1),h("option",{value:"github"},"GitHub",-1),h("option",{value:"bioc"},"Bioconductor",-1)])],512),[[r0,_.value.source]]),y[103]||(y[103]=h("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},[h("svg",{class:"h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),h("p",bj,[_.value.source==="cran"?(g(),b(ye,{key:0},[de("CRAN: name only (e.g., dplyr)")],64)):_.value.source==="github"?(g(),b(ye,{key:1},[de("GitHub: user/repo (e.g., tidyverse/dplyr)")],64)):_.value.source==="bioc"?(g(),b(ye,{key:2},[de("Bioconductor: name only (e.g., DESeq2)")],64)):G("",!0)])]),h("div",null,[A(tt,{modelValue:_.value.auto_attach,"onUpdate:modelValue":y[40]||(y[40]=V=>_.value.auto_attach=V),label:"Auto-attach on scaffold()"},null,8,["modelValue"])])])]),_:1},8,["modelValue"]),A(tn,{modelValue:rt.value,"onUpdate:modelValue":y[46]||(y[46]=V=>rt.value=V),title:"Delete Project",size:"md"},{actions:Z(()=>[A(Ke,{variant:"secondary",onClick:zb},{default:Z(()=>[...y[112]||(y[112]=[de(" Cancel ",-1)])]),_:1}),A(Ke,{variant:"primary",onClick:Ub,disabled:!kt.value,class:"bg-red-600 hover:bg-red-500 focus-visible:outline-red-600 dark:bg-red-500 dark:hover:bg-red-400"},{default:Z(()=>[de(X(te.value==="delete"?"Delete Project":"Remove from Framework"),1)]),_:1},8,["disabled"])]),default:Z(()=>[h("div",kj,[y[111]||(y[111]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Choose how you want to remove this project: ",-1)),h("label",{class:xe(["block cursor-pointer rounded-lg border-2 p-4 transition",te.value==="untrack"?"border-sky-500 bg-sky-50 dark:border-sky-600 dark:bg-sky-950/30":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"])},[h("div",xj,[Ze(h("input",{type:"radio",id:"delete-untrack",value:"untrack","onUpdate:modelValue":y[43]||(y[43]=V=>te.value=V),class:"mt-1"},null,512),[[bu,te.value]]),y[107]||(y[107]=h("div",{class:"flex-1"},[h("div",{class:"font-medium text-gray-900 dark:text-white"}," Remove from Framework "),h("div",{class:"text-sm text-gray-600 dark:text-gray-400 mt-1"}," Stop tracking this project in Framework. Files remain on disk. ")],-1))])],2),h("label",{class:xe(["block cursor-pointer rounded-lg border-2 p-4 transition",te.value==="delete"?"border-red-500 bg-red-50 dark:border-red-700 dark:bg-red-950/30":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"])},[h("div",wj,[Ze(h("input",{type:"radio",id:"delete-files",value:"delete","onUpdate:modelValue":y[44]||(y[44]=V=>te.value=V),class:"mt-1"},null,512),[[bu,te.value]]),y[108]||(y[108]=h("div",{class:"flex-1"},[h("div",{class:"font-medium text-red-700 dark:text-red-400"}," Delete Entire Project "),h("div",{class:"text-sm text-gray-600 dark:text-gray-400 mt-1"}," Permanently delete all files and folders. This cannot be undone. ")],-1))]),te.value==="delete"?(g(),b("div",Sj,[h("div",Cj,[y[109]||(y[109]=de(" Type ",-1)),h("span",_j,X(n.value?.name),1),y[110]||(y[110]=de(" to confirm: ",-1))]),A(Ae,{modelValue:ve.value,"onUpdate:modelValue":y[45]||(y[45]=V=>ve.value=V),placeholder:"Project name",class:"font-mono"},null,8,["modelValue"])])):G("",!0)],2)])]),_:1},8,["modelValue"])]))}},Mj={class:"space-y-5"},Dj={__name:"EditorAndNotebookPanel",props:{positron:{type:Boolean,default:!1},notebookFormat:{type:String,default:"quarto"}},emits:["update:positron","update:notebookFormat"],setup(s){return(e,t)=>(g(),b("div",Mj,[h("div",null,[t[3]||(t[3]=h("label",{class:"block text-sm font-semibold text-gray-900 dark:text-white mb-3"}," Supported Editors ",-1)),A(Ji,{"model-value":s.positron,"onUpdate:modelValue":t[0]||(t[0]=i=>e.$emit("update:positron",i)),id:"support-positron",description:"Enable Positron-specific workspace and settings files"},{default:Z(()=>[...t[2]||(t[2]=[de(" Positron ",-1)])]),_:1},8,["model-value"]),t[4]||(t[4]=h("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-3"}," RStudio supported by default ",-1))]),A(Qs,{"model-value":s.notebookFormat,"onUpdate:modelValue":t[1]||(t[1]=i=>e.$emit("update:notebookFormat",i)),label:"Default Notebook Format",hint:"Format used when creating new notebooks"},{default:Z(()=>[...t[5]||(t[5]=[h("option",{value:"quarto"},"Quarto (.qmd)",-1),h("option",{value:"rmarkdown"},"R Markdown (.Rmd)",-1)])]),_:1},8,["model-value"])]))}},Ej={class:"flex min-h-screen"},Tj={class:"w-64 shrink-0 border-r border-gray-200 p-6 dark:border-gray-800"},Oj={class:"space-y-1"},Pj=["href","onClick"],jj=["fill","viewBox","stroke"],$j=["stroke-linecap","stroke-linejoin","stroke-width","fill","d"],Rj={key:1,class:"ml-4 mt-2 space-y-0.5 border-l border-gray-200 pl-3 dark:border-gray-700"},Lj=["href","onClick"],Vj={key:2,class:"ml-4 mt-2 space-y-0.5 border-l border-gray-200 pl-3 dark:border-gray-700"},Bj=["href","onClick"],Ij={class:"rounded-md bg-gray-900 p-4 text-xs text-gray-200"},Nj={class:"mt-4 flex justify-end"},Fj={class:"mt-6 px-3"},zj={key:0,class:"flex-1 flex items-center justify-center"},Uj={class:"flex-1 p-10 pb-24"},Hj={class:"mt-8 space-y-10"},Wj={id:"overview"},Kj={id:"connections-defaults"},qj={id:"env-defaults"},Gj={class:"mt-6 flex justify-end"},Jj={id:"basics"},Yj={class:"space-y-5"},Qj={class:"pt-4 border-t border-gray-200 dark:border-gray-700"},Xj={id:"structure",class:"space-y-8"},Zj={key:0,class:"space-y-6"},e$={class:"space-y-3"},t$=["onClick"],s$={class:"flex items-start gap-3"},i$={class:"font-semibold text-gray-900 dark:text-white"},n$={class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},r$={key:1},o$={id:"git"},l$={id:"scaffold"},a$={id:"packages"},c$={key:0,class:"space-y-3"},u$={class:"flex flex-col gap-3"},d$={class:"grid gap-3 grid-cols-[1fr_160px]"},f$={class:"flex items-center justify-between"},h$={key:1,class:"text-xs text-gray-500 dark:text-gray-400 mb-4"},p$={class:"mt-4"},m$={class:"text-sm text-gray-600 dark:text-gray-300 mb-4"},g$={class:"flex gap-3 justify-end"},v$={class:"text-sm text-gray-600 dark:text-gray-300"},y$={class:"flex gap-3 justify-end"},ru="overview",Nm="project",b$="Settings",k$="Manage defaults shared across new projects.",x$=`# Framework environment defaults
# Populate these values before running scaffold() or publishing.

# PostgreSQL connection
POSTGRES_HOST=127.0.0.1
POSTGRES_PORT=5432
POSTGRES_DB=postgres
POSTGRES_SCHEMA=public
POSTGRES_USER=postgres
POSTGRES_PASSWORD=


# S3-compatible storage (AWS S3, MinIO, etc.)
S3_ACCESS_KEY=
S3_SECRET_KEY=
S3_BUCKET=
S3_REGION=us-east-1
S3_ENDPOINT=`,w$={__name:"SettingsView",setup(s){const e=ec(),t=Qa(),i=Er(),n=[{id:"overview",label:"Overview",slug:"overview",icon:Xa},{id:"basics",label:"Basics",slug:"basics",icon:zd},{id:"structure",label:"Project Structure",slug:"project-structure",icon:ma},{id:"packages",label:"Packages",slug:"packages-dependencies",icon:Ud},{id:"ai",label:"AI Assistants",slug:"ai-assistants",svgIcon:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"},{id:"git",label:"Git & Hooks",slug:"git-hooks",svgIcon:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"},{id:"connections-defaults",label:"Connections",slug:"connections",icon:Hd},{id:"env-defaults",label:".env Defaults",slug:"env",icon:Za},{id:"scaffold",label:"Scaffold Behavior",slug:"scaffold-behavior",svgIcon:"M256 64L576 64L576 576L64 576L64 192L256 192L256 64zM256 224L96 224L96 544L256 544L256 224zM288 544L544 544L544 96L288 96L288 544zM440 152L488 152L488 200L440 200L440 152zM392 152L392 200L344 200L344 152L392 152zM440 248L488 248L488 296L440 296L440 248zM392 248L392 296L344 296L344 248L392 248zM152 280L200 280L200 328L152 328L152 280zM392 344L392 392L344 392L344 344L392 344zM152 376L200 376L200 424L152 424L152 376zM488 344L488 392L440 392L440 344L488 344z",svgViewBox:"0 0 640 640",svgFill:"currentColor",svgStroke:"none",svgStrokeWidth:0,svgPathFill:"currentColor"},{id:"templates",label:"Templates",slug:"templates",icon:Cu}],r=Object.fromEntries(n.map(({id:R,slug:D})=>[R,D])),o=Object.fromEntries(n.map(({id:R,slug:D})=>[D,R])),l={project:{label:"Standard Project Structure",description:"General-purpose analysis project with notebooks, scripts, and shared outputs.",directories:{functions:"R/functions",notebooks:"notebooks",scripts:"scripts",inputs_raw:"inputs/raw",inputs_intermediate:"inputs/intermediate",inputs_final:"inputs/final",docs:"docs",outputs_tables:"outputs/tables",outputs_figures:"outputs/figures",outputs_models:"outputs/models",outputs_reports:"outputs/reports",cache:"outputs/cache",scratch:"scratch"},render_dirs:{notebooks:"outputs/notebooks",docs:"outputs/docs"},quarto:{render_dir:"outputs/notebooks"},notebook_template:"notebook",extra_directories:[]},project_sensitive:{label:"Privacy Sensitive Project Structure",description:"Projects handling PHI/PII with dedicated private/public data flows.",directories:{functions:"R/functions",notebooks:"notebooks",scripts:"scripts",inputs_private_raw:"inputs/private/raw",inputs_private_intermediate:"inputs/private/intermediate",inputs_private_final:"inputs/private/final",inputs_public_raw:"inputs/public/raw",inputs_public_intermediate:"inputs/public/intermediate",inputs_public_final:"inputs/public/final",outputs_private_tables:"outputs/private/tables",outputs_private_figures:"outputs/private/figures",outputs_private_models:"outputs/private/models",outputs_private_docs:"outputs/private/docs",outputs_private_data_final:"outputs/private/data_final",outputs_public_tables:"outputs/public/tables",outputs_public_figures:"outputs/public/figures",outputs_public_models:"outputs/public/models",outputs_public_docs:"outputs/public/docs",outputs_public_data_final:"outputs/public/data_final",cache:"outputs/private/cache",scratch:"scratch"},quarto:{render_dir:"outputs/public/docs"},notebook_template:"notebook",extra_directories:[]},presentation:{label:"Presentation Structure",description:"Single talk or slide deck with minimal analysis scaffolding.",directories:{presentation_source:"presentation.qmd",rendered_slides:"."},quarto:{render_dir:"."},notebook_template:"notebook",extra_directories:[]},course:{label:"Course Structure",description:"Courses with modules, assignments, and lecture materials.",directories:{data:"data",slides:"slides",assignments:"assignments",course_docs:"course_docs",readings:"readings",notebooks:"modules"},quarto:{render_dir:"course_docs"},notebook_template:"notebook",extra_directories:[]}},a=ie(JSON.parse(JSON.stringify(l))),u={project:"project",project_sensitive:"sensitive-project",presentation:"presentation",course:"course"},c=Object.fromEntries(Object.entries(u).map(([R,D])=>[D,R])),d={project:"Tune the standard analysis layoutfunctions, notebooks, inputs, and outputs live here by default.",project_sensitive:"Private and public inputs stay separate so sensitive data never leaves restricted folders.",presentation:"Control where your presentation source lives and where rendered slides are written.",course:"Adjust the folders used for slides, assignments, readings, and course documentation."},f=R=>String(R).replace(/_/g," ").replace(/\b\w/g,D=>D.toUpperCase()),p=ie(null),v=[{key:"notebooks",label:"Notebooks",hint:"Quarto or R Markdown notebooks for analysis.",defaultRenderDir:"outputs/notebooks"},{key:"docs",label:"Documentation",hint:"Codebooks, documentation, and other reference materials.",defaultRenderDir:"outputs/docs"}],k=[{key:"functions",label:"Functions",hint:"R files here are sourced by scaffold(), so helper functions are available in every project session."},{key:"scripts",label:"Scripts",hint:"Reusable R scripts, job runners, or automation tasks."}],m=[...v,...k],w=[{key:"inputs_raw",label:"Raw data",hint:"Read-only exports from source systems."},{key:"inputs_intermediate",label:"Intermediate data",hint:"Data after light cleaning or pre-processing steps."},{key:"inputs_final",label:"Analysis-ready data",hint:"Final inputs ready for modeling or reporting."}],L=[{key:"outputs_tables",label:"Tables",hint:"Publishable tables ready for reports or manuscripts."},{key:"outputs_figures",label:"Figures",hint:"Final plots and graphics."},{key:"outputs_models",label:"Models",hint:"Serialized models or model summaries."},{key:"outputs_reports",label:"Reports",hint:"Final reports and deliverables ready for publication."}],I=[{key:"cache",label:"Cache",hint:"Temporary artifacts (gitignored)."},{key:"scratch",label:"Scratch",hint:"Short-lived explorations (gitignored)."}],H=[{privateKey:"inputs_private_raw",publicKey:"inputs_public_raw",label:"Raw data",privateLabel:"Raw data (private)",publicLabel:"Raw data (public)"},{privateKey:"inputs_private_intermediate",publicKey:"inputs_public_intermediate",label:"Intermediate data",privateLabel:"Intermediate data (private)",publicLabel:"Intermediate data (public)"},{privateKey:"inputs_private_final",publicKey:"inputs_public_final",label:"Analysis-ready data",privateLabel:"Analysis-ready data (private)",publicLabel:"Analysis-ready data (public)"}],N=[{privateKey:"outputs_private_tables",publicKey:"outputs_public_tables",label:"Tables",privateLabel:"Tables (private)",publicLabel:"Tables (public)"},{privateKey:"outputs_private_figures",publicKey:"outputs_public_figures",label:"Figures",privateLabel:"Figures (private)",publicLabel:"Figures (public)"},{privateKey:"outputs_private_models",publicKey:"outputs_public_models",label:"Models",privateLabel:"Models (private)",publicLabel:"Models (public)"},{privateKey:"outputs_private_reports",publicKey:"outputs_public_reports",label:"Reports",privateLabel:"Reports (private)",publicLabel:"Reports (public)"}],P=(R,D)=>p.value?.project_types?.[R]?.directories?.[D]||{},S=(R,D)=>D.map(F=>{const fe=P(R,F.key);return{key:F.key,label:fe.label||F.label,hint:fe.hint||F.hint||""}});z(()=>S("project",m)),z(()=>S("project",v).map(R=>({...R,defaultRenderDir:v.find(D=>D.key===R.key)?.defaultRenderDir||""}))),z(()=>S("project",k)),z(()=>S("project",w)),z(()=>S("project",L)),z(()=>S("project",I));const O=R=>R.map(D=>{const F=P("project_sensitive",D.privateKey),fe=P("project_sensitive",D.publicKey);return{...D,privateLabel:F.label||D.privateLabel,publicLabel:fe.label||D.publicLabel}});z(()=>O(H)),z(()=>O(N)),z(()=>{const R=K.value;return!R||!p.value?.project_types?.[R]?.settings?[]:p.value.project_types[R].settings});const W={include_inputs:"data",include_scripts:"scripts",include_functions:"functions"},oe=z(()=>{const R=p.value?.project_types?.presentation?.optional_toggles||{};return{inputs:R.include_inputs?.default_path||W.include_inputs,scripts:R.include_scripts?.default_path||W.include_scripts,functions:R.include_functions?.default_path||W.include_functions}}),se={"CLAUDE.md":"ai_claude","AGENTS.md":"ai_agents",".github/copilot-instructions.md":"ai_copilot"},B=ie(ru),ae=ie(!1),ee=ie(new Set),$=ie({projects_root:"",project_types:JSON.parse(JSON.stringify(a.value)),author:{name:"",email:"",affiliation:""},defaults:{project_type:"project",notebook_format:"quarto",ide:"vscode",positron:!1,use_git:!0,use_renv:!1,seed:"",seed_on_scaffold:!1,ai_support:!0,ai_assistants:["claude"],ai_canonical_file:"CLAUDE.md",scaffold:{source_all_functions:!0,set_theme_on_scaffold:!0,ggplot_theme:"theme_minimal",seed_on_scaffold:!1,seed:""},directories:JSON.parse(JSON.stringify(a.value.project.directories)),git_hooks:{ai_sync:!1,data_security:!1,check_sensitive_dirs:!1},packages:{use_renv:!1,default_packages:[{name:"dplyr",source:"cran",auto_attach:!0},{name:"ggplot2",source:"cran",auto_attach:!0}]},env:{raw:""}},git:{user_name:"",user_email:""},privacy:{secret_scan:!1,gitignore_template:"gitignore"}}),q=js({includeInputs:!1,includeScripts:!1,includeFunctions:!1}),Y=js({project:{},project_sensitive:{},course:{},presentation:{}}),ce=R=>(Y[R]||(Y[R]={}),Y[R]),ge=ie(!1),Ne=js({claude:!0,agents:!1,copilot:!1}),be=js({open:!1,name:"",title:"",description:"",contents:"",loading:!1}),ze=ie(""),Ue=ie({}),Je=ie("grouped"),ht=ie(!1),rt=ie({}),te=ie(!1),ve=z(()=>Object.keys(Ue.value||{}).length),Q=R=>p.value?.project_types?.[R]?.label||R,J=z(()=>{const R=$.value.projects_root||"",D=$.value.author?.name||"",F=$.value.defaults?.project_type||"project",fe=Q(F),he=$.value.defaults?.notebook_format||"quarto",Ve=$.value.ai_config?.enabled||!1,me=$.value.ai_config?.provider||"",Pe=$.value.ai_config?.canonical_file||"",kt=$.value.git?.auto_init||!1,He=$.value.packages?.length||0,gn=ve.value;return[{id:"basics",title:"Basics",section:"basics",content:`${R}  ${D}`},{id:"structure",title:"Project Structure",section:"structure",content:fe},{id:"notebooks",title:"Notebooks & Scripts",section:"scaffold",content:he},{id:"packages",title:"Packages",section:"packages",content:He===0?"No default packages":`${He} packages`},{id:"env",title:".env Defaults",section:"env-defaults",content:`${gn} variables`},{id:"ai",title:"AI Assistants",section:"ai",content:Ve?`<span class="text-green-600 dark:text-green-400">${me}  ${Pe}</span>`:'<span class="text-gray-600 dark:text-gray-400">Disabled</span>'},{id:"git",title:"Git & Hooks",section:"git",content:kt?"Auto-initialize repositories":"Manual initialization"}]}),T=ie([]),x=ie([]),_=ie(null),U=ie(null),ne=js({open:!1,projectTypeKey:null,projectTypeName:""}),le=js({notebook:{loading:!1,contents:""},script:{loading:!1,contents:""},presentation:{loading:!1,contents:""},canonical:{loading:!1,contents:""},gitignore_project:{loading:!1,contents:""},gitignore_project_sensitive:{loading:!1,contents:""},gitignore_course:{loading:!1,contents:""},gitignore_presentation:{loading:!1,contents:""}}),C=z(()=>Object.entries($.value.project_types||{})),E=z(()=>C.value.map(([R,D])=>({key:R,label:(D.label||f(R)).replace(/ Structure$/i,""),slug:u[R]||R}))),j=[{id:"templates-notebook",label:"Notebook"},{id:"templates-script",label:"Script"},{id:"templates-presentation",label:"Presentation"}],re=z(()=>"# Connections section temporarily disabled for debugging"),K=z(()=>{const R=i.params.subsection;return R?c[R]||Nm:null}),Ce=z(()=>{const R=K.value;return R&&$.value.project_types?.[R]||null}),pe={overview:{title:"Overview",description:"Overview of your Framework global settings and preferences."},"connections-defaults":{title:"Connections",description:"Database and storage connections that every new project will inherit."},basics:{title:"Basics",description:"Essential settings for new projects."},author:{title:"Author Information",description:"Defaults that populate README files and notebook headers when scaffold() runs."},workflow:{title:"Editor & Workflow",description:"Control how Framework scaffolds projects in your preferred tools."},structure:{title:"Project Structure Defaults",description:"Choose a project type to configure its directory structure and default settings."},templates:{title:"Templates",description:"Edit the starter templates Framework uses for notebooks, scripts, and presentations."},ai:{title:"AI Assistants",description:"Manage assistant support, canonical context files, and sync hooks."},git:{title:"Git & Hooks",description:"Configure repository initialization, commit identity, git hooks, and security scanning."},scaffold:{title:"Scaffold Behavior",description:"Automatic actions Framework performs when scaffold() runs."},packages:{title:"Packages & Dependencies",description:"Define dependency defaults and auto-attach behavior for new projects."},"env-defaults":{title:".env Defaults",description:"Template applied to every new project so core connections work immediately."}},ke=z(()=>pe[B.value]||{title:b$,description:k$}),Oe=z(()=>B.value==="structure"&&Ce.value?Ce.value.label||f(K.value):ke.value.title),Be=z(()=>B.value==="structure"&&Ce.value&&(Ce.value.description||d[K.value])||ke.value.description);z(()=>$.value.privacy.gitignore_template||"gitignore"),z(()=>{const R=new Set,D=$.value.project_types||{},F=D.project_sensitive?.directories||{};for(const he of Object.values(F))typeof he=="string"&&he.trim()&&he.includes("private")&&R.add(he.replace(/^\/+/,""));const fe=D.project?.directories||{};return["cache","scratch"].forEach(he=>{const Ve=fe[he];typeof Ve=="string"&&Ve.trim()&&R.add(Ve.replace(/^\/+/,""))}),Array.from(R).sort()});const Ye=z(()=>se[$.value.defaults.ai_canonical_file]||"ai_claude"),Qe=(R,D)=>{const F={section:R||void 0};return D&&(F.subsection=D),t.resolve({name:"settings",params:F}).href},bt=(R,D)=>{const F={};R&&(F.section=R),D&&(F.subsection=D);const fe=i.params.section||void 0,he=i.params.subsection||void 0,Ve=F.section||void 0,me=F.subsection||void 0;return fe===Ve&&he===me?Promise.resolve():t.replace({name:"settings",params:F}).catch(()=>{})};Re(()=>i.params.section,R=>{if(!R){bt(r[ru],void 0);return}const D=o[R]||ru;if(B.value=D,!o[R]){bt(r[D],void 0);return}},{immediate:!0});const Le=(R,D="")=>Array.isArray(R)?R.length>0?Le(R[0],D):D:R??D,ot=(R,D=!1)=>{const F=Le(R,D);return typeof F=="boolean"?F:typeof F=="string"?["true","1","yes"].includes(F.toLowerCase()):!!F},jt=R=>Array.isArray(R)?R.flatMap(D=>Array.isArray(D)?D:[D]).filter(Boolean):[],Ts=(R={},D={})=>{const F={...D};for(const[fe,he]of Object.entries(R||{})){const Ve=Le(he,null);Ve===null||Ve===""?delete F[fe]:F[fe]=Ve}return F},si=(R,D)=>{const F=a.value[R]||{render_dirs:{},quarto:{},extra_directories:[]};return{label:Le(D?.label,F.label||f(R)),description:Le(D?.description,F.description||""),ggplot_theme:Le(D?.ggplot_theme,"theme_minimal"),set_theme_on_scaffold:ot(D?.set_theme_on_scaffold,!0),directories:Ts(D?.directories,{}),render_dirs:Ts(D?.render_dirs,F.render_dirs||{}),quarto:{render_dir:Le(D?.quarto?.render_dir,F.quarto?.render_dir||".")},notebook_template:Le(D?.notebook_template,F.notebook_template||"notebook"),extra_directories:Array.isArray(D?.extra_directories)?D.extra_directories:F.extra_directories||[],gitignore:Le(D?.gitignore,F.gitignore||"")}},Ut=R=>{if(!R||!R.project_types)return;console.log("[DEBUG] hydrateDefaultsFromCatalog - catalogData.project_types:",R.project_types),console.log("[DEBUG] project gitignore from catalog:",R.project_types.project?.gitignore?.substring(0,100));const D={};for(const[F,fe]of Object.entries(R.project_types)){const he=l[F]||{},Ve={};for(const[Pe,kt]of Object.entries(fe.directories||{})){const He=he.directories?.[Pe]||"";Ve[Pe]=Le(kt?.default,He)}const me={};for(const[Pe,kt]of Object.entries(fe.render_dirs||{})){const He=he.render_dirs?.[Pe]||"";me[Pe]=Le(kt?.default,He)}D[F]={label:Le(fe.label,he.label||f(F)),description:Le(fe.description,he.description||""),directories:Ve,render_dirs:me,quarto:{render_dir:Le(fe.quarto?.render_dir?.default,he.quarto?.render_dir||".")},notebook_template:Le(fe.notebook_template?.default,he.notebook_template||"notebook"),optional_toggles:fe.optional_toggles||{},gitignore:Le(fe.gitignore,he.gitignore||"")},console.log(`[DEBUG] Normalized ${F} - gitignore length:`,D[F].gitignore?.length)}for(const[F,fe]of Object.entries(l))D[F]||(D[F]=JSON.parse(JSON.stringify(fe)));a.value=D},Bt=(R,D,F)=>{if(!$.value.project_types?.presentation)return;const fe=$.value.project_types.presentation.directories||($.value.project_types.presentation.directories={});D?(!fe[R]||fe[R]==="")&&(fe[R]=F):Object.prototype.hasOwnProperty.call(fe,R)&&delete fe[R]},It=async(R,D=R)=>{if(le[D]){le[D].loading=!0;try{const F=await fetch(`/api/templates/${R}`);if(!F.ok)throw new Error("Request failed");const fe=await F.json();le[D].contents=fe.contents||""}catch{e.error("Template Error","Unable to load template contents.")}finally{le[D].loading=!1}}};Re(Ne,R=>{if(ge.value){console.log("[watch:aiAssistants] Skipped - loading");return}console.log("[watch:aiAssistants] Triggered",R);const D=[];R.claude&&D.push("claude"),R.copilot&&D.push("copilot"),R.agents&&D.push("agents"),$.value.defaults.ai_assistants=D},{deep:!0}),Re(()=>$.value.defaults.ai_canonical_file,async()=>{ge.value||await It(Ye.value,"canonical")}),Re(()=>$.value.defaults.git_hooks.data_security,R=>{ge.value||$.value.privacy.secret_scan!==R&&($.value.privacy.secret_scan=R)}),Re(()=>$.value.privacy.secret_scan,R=>{ge.value||$.value.defaults.git_hooks.data_security!==R&&($.value.defaults.git_hooks.data_security=R)}),Re(()=>q.includeInputs,R=>{ge.value||Bt("inputs",R,oe.value.inputs)}),Re(()=>q.includeScripts,R=>{ge.value||Bt("scripts",R,oe.value.scripts)}),Re(()=>q.includeFunctions,R=>{ge.value||Bt("functions",R,oe.value.functions)}),Re(Y,R=>{if(!ge.value)for(const[D,F]of Object.entries(R)){if(!$.value.project_types?.[D])continue;const fe=$.value.project_types[D].directories||{},he=$.value.project_types[D].render_dirs||{},Ve=p.value?.project_types?.[D]?.directories||{},me=p.value?.project_types?.[D]?.render_dirs||{};for(const[Pe,kt]of Object.entries(F))if(kt===!1)Object.prototype.hasOwnProperty.call(fe,Pe)&&delete $.value.project_types[D].directories[Pe],Object.prototype.hasOwnProperty.call(he,Pe)&&delete $.value.project_types[D].render_dirs[Pe];else if(kt===!0){if(!Object.prototype.hasOwnProperty.call(fe,Pe)){const He=Ve[Pe]?.default||"";$.value.project_types[D].directories[Pe]=He}if(me[Pe]&&!Object.prototype.hasOwnProperty.call(he,Pe)){const He=me[Pe]?.default||"";He&&($.value.project_types[D].render_dirs[Pe]=He)}}}},{deep:!0}),Re(Ue,R=>{ge.value||(rt.value=Br(R))},{deep:!0});const pn=R=>{(R.metaKey||R.ctrlKey)&&R.key==="s"&&(R.preventDefault(),Nr())},os=(R,D)=>{const F=$.value.project_types?.[R]?.directories;return!!F&&Object.prototype.hasOwnProperty.call(F,D)},rl=R=>{a.value[R]&&(ne.projectTypeKey=R,ne.projectTypeName=$.value.project_types[R]?.label||f(R),ne.open=!0)},Ii=()=>{const R=ne.projectTypeKey;a.value[R]&&($.value.project_types[R]=JSON.parse(JSON.stringify(a.value[R])),R==="presentation"&&(q.includeInputs=!1,q.includeScripts=!1,q.includeFunctions=!1),ne.open=!1,e.success("Reset Complete",`${ne.projectTypeName} has been reset to defaults`))},Ni=async()=>{try{be.loading=!0,await fetch(`/api/templates/${be.name}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:be.contents})}),e.success("Template Saved","Your changes have been saved."),be.open=!1}catch{e.error("Save Failed","Could not save template changes.")}finally{be.loading=!1}},$r=()=>{$.value.defaults.packages.default_packages||($.value.defaults.packages.default_packages=[]),$.value.defaults.packages.default_packages.push({name:"",source:"cran",auto_attach:!1})},Hn=R=>{$.value.defaults.packages.default_packages.splice(R,1)},Os=R=>{const D=document.getElementById(R);D&&D.scrollIntoView({behavior:"smooth",block:"start"})},ol=R=>{switch(R){case"project":return`project-${R}-inputs`;case"project_sensitive":return`project-${R}-workspaces`;case"presentation":return`project-${R}-primary`;case"course":return`project-${R}-core`;default:return`project-${R}`}},ll=async R=>{const D=n.find(fe=>fe.id===R);if(!D)return;const F=(D.id==="structure",void 0);await bt(D.slug,F),await qs(),Os(D.id)},Rr=async R=>{const D=u[R]||u[Nm];await bt("project-structure",D),await qs(),Os(ol(R))};Re(()=>K.value,(R,D)=>{B.value==="structure"&&(!R||R===D||qs(()=>Os(ol(R))))});const Lr=async()=>{try{console.log("[loadSettings] Starting load, setting isLoadingSettings = true"),ge.value=!0;const[R,D]=await Promise.all([fetch("/api/settings/catalog"),fetch("/api/settings/get")]);if(!R.ok)throw new Error("Failed to load settings catalog");if(!D.ok)throw new Error("Failed to load settings payload");console.log("[loadSettings] Responses received, parsing JSON");const F=await R.json();p.value=F,Ut(F);const fe=await D.json();if(console.log("[loadSettings] Settings data:",fe),$.value.projects_root=Le(fe.global?.projects_root||fe.projects_root,""),fe.project_types){const he={},Ve={...a.value,...fe.project_types};for(const[me,Pe]of Object.entries(Ve))he[me]=si(me,Pe);$.value.project_types=he;for(const me of Object.keys($.value.project_types))$.value.project_types[me].render_dirs||($.value.project_types[me].render_dirs={})}q.includeInputs=os("presentation","inputs"),q.includeScripts=os("presentation","scripts"),q.includeFunctions=os("presentation","functions");for(const he of["project","project_sensitive","course","presentation"]){const Ve=$.value.project_types?.[he]?.directories||{},me=F?.project_types?.[he]?.directories||{},Pe=ce(he);for(const He of Object.keys(me))Pe[He]=Object.prototype.hasOwnProperty.call(Ve,He);for(const He of Object.keys(Ve))Object.prototype.hasOwnProperty.call(me,He)||(Pe[He]=!0);($.value.project_types?.[he]?.extra_directories||[]).forEach(He=>{He.key&&($.value.project_types[he].directories_enabled&&$.value.project_types[he].directories_enabled[He.key]===!1?Pe[He.key]=!1:Pe[He.key]=!0)})}if(fe.author&&($.value.author={name:Le(fe.author.name,""),email:Le(fe.author.email,""),affiliation:Le(fe.author.affiliation,"")}),fe.defaults){const he=fe.defaults;$.value.defaults.project_type=Le(he.project_type,"project"),$.value.defaults.notebook_format=Le(he.notebook_format,"quarto"),$.value.defaults.ide=Le(he.ide,"vscode"),$.value.defaults.positron=ot(he.positron,!1),$.value.defaults.use_git=ot(he.use_git,!0),$.value.defaults.use_renv=ot(he.use_renv,!1),$.value.defaults.ai_support=ot(he.ai_support,!0),$.value.defaults.ai_canonical_file=Le(he.ai_canonical_file,"CLAUDE.md");const Ve=jt(he.ai_assistants);Ve.length&&($.value.defaults.ai_assistants=Ve,Ne.claude=Ve.includes("claude"),Ne.copilot=Ve.includes("copilot"),Ne.agents=Ve.includes("agents")),he.git_hooks&&($.value.defaults.git_hooks={...$.value.defaults.git_hooks,...Object.fromEntries(Object.entries(he.git_hooks).map(([me,Pe])=>[me,ot(Pe,$.value.defaults.git_hooks[me])]))},$.value.privacy.secret_scan=$.value.defaults.git_hooks.data_security),he.scaffold&&($.value.defaults.scaffold={source_all_functions:ot(he.scaffold.source_all_functions,!0),set_theme_on_scaffold:ot(he.scaffold.set_theme_on_scaffold,!0),ggplot_theme:Le(he.scaffold.ggplot_theme,"theme_minimal"),seed_on_scaffold:ot(he.scaffold.seed_on_scaffold,!1),seed:Le(he.scaffold.seed,"")}),he.packages&&(he.packages.default_packages?$.value.defaults.packages={use_renv:ot(he.packages.use_renv,!1),default_packages:(he.packages.default_packages||[]).map(me=>({name:Le(me.name,""),source:Le(me.source,"cran"),auto_attach:ot(me.auto_attach,!1)}))}:Array.isArray(he.packages)&&($.value.defaults.packages={use_renv:!1,default_packages:he.packages.map(me=>({name:Le(me.name,""),source:Le(me.source,"cran"),auto_attach:ot(me.auto_attach,!1)}))})),he.directories?$.value.defaults.directories={...$.value.defaults.directories,...Object.fromEntries(Object.entries(he.directories).map(([me,Pe])=>[me,Le(Pe,$.value.defaults.directories[me]||"")]))}:$.value.project_types.project&&($.value.defaults.directories={...$.value.defaults.directories,...$.value.project_types.project.directories}),Wn(he.env),Ir(he.connections)}fe.defaults||(Wn(null),Ir(null)),fe.git&&($.value.git={user_name:Le(fe.git.user_name,""),user_email:Le(fe.git.user_email,"")}),fe.privacy?($.value.privacy.secret_scan=ot(fe.privacy.secret_scan,$.value.defaults.git_hooks.data_security),$.value.privacy.gitignore_template=Le(fe.privacy.gitignore_template,"gitignore")):$.value.privacy.secret_scan=$.value.defaults.git_hooks.data_security,await It(Ye.value,"canonical"),console.log("[loadSettings] Load complete, about to set isLoadingSettings = false")}catch(R){console.error("[loadSettings] Error during load:",R),e.error("Load Failed","Unable to load current settings.")}finally{ge.value=!1,console.log("[loadSettings] isLoadingSettings now false")}},Vr=z({get(){const R=$.value.defaults||{},D=R.git_hooks||{},F=$.value.git||{};return{initialize:R.use_git!==!1,user_name:F.user_name||"",user_email:F.user_email||"",hooks:{ai_sync:D.ai_sync||!1,data_security:D.data_security||!1,check_sensitive_dirs:D.check_sensitive_dirs||!1}}},set(R){if(ge.value){console.log("[gitPanelModel setter] Blocked during load");return}$.value.defaults.use_git=R.initialize,$.value.git=$.value.git||{},$.value.git.user_name=R.user_name,$.value.git.user_email=R.user_email,$.value.defaults.git_hooks=$.value.defaults.git_hooks||{},$.value.defaults.git_hooks.ai_sync=R.hooks.ai_sync,$.value.defaults.git_hooks.data_security=R.hooks.data_security,$.value.defaults.git_hooks.check_sensitive_dirs=R.hooks.check_sensitive_dirs}}),mn=z({get(){const R=$.value.defaults?.scaffold||{};return{source_all_functions:R.source_all_functions!==!1,set_theme_on_scaffold:R.set_theme_on_scaffold!==!1,ggplot_theme:R.ggplot_theme||"theme_minimal",seed_on_scaffold:R.seed_on_scaffold||!1,seed:R.seed||""}},set(R){if(ge.value){console.log("[scaffoldPanelModel setter] Blocked during load");return}$.value.defaults.scaffold={...$.value.defaults.scaffold||{},source_all_functions:R.source_all_functions,set_theme_on_scaffold:R.set_theme_on_scaffold,ggplot_theme:R.ggplot_theme,seed_on_scaffold:R.seed_on_scaffold,seed:R.seed}}}),ii=(R,D)=>{const F=$.value.project_types[R];return!F||!Array.isArray(F.extra_directories)?[]:F.extra_directories.filter(fe=>fe.type===D&&!ee.value.has(fe._id))},ls=(R,D)=>{const F=$.value.project_types[R];return!F||!Array.isArray(F.extra_directories)?[]:F.extra_directories.filter(fe=>fe.type===D&&ee.value.has(fe._id))},ni=(R,D,F)=>{const fe=$.value.project_types[R];if(!fe)return;Array.isArray(fe.extra_directories)||(fe.extra_directories=[]);const he=fe.extra_directories.filter(me=>me&&me.type!==D),Ve=F.map(me=>({...me,type:D}));fe.extra_directories=[...he,...Ve]};z({get(){return ls(K.value,"input_private")},set(R){if(!$.value.project_types[K.value])return;ls(K.value,"input_private").filter(me=>!R.some(Pe=>Pe._id===me._id)).forEach(me=>{me._id&&ee.value.delete(me._id)});const Ve=[...ii(K.value,"input_private"),...R];ni(K.value,"input_private",Ve),R.forEach(me=>{me._id&&!ee.value.has(me._id)&&ee.value.add(me._id)})}}),z({get(){return ls(K.value,"input_public")},set(R){if(!$.value.project_types[K.value])return;ls(K.value,"input_public").filter(me=>!R.some(Pe=>Pe._id===me._id)).forEach(me=>{me._id&&ee.value.delete(me._id)});const Ve=[...ii(K.value,"input_public"),...R];ni(K.value,"input_public",Ve),R.forEach(me=>{me._id&&!ee.value.has(me._id)&&ee.value.add(me._id)})}}),z({get(){return ls(K.value,"output_private")},set(R){if(!$.value.project_types[K.value])return;const fe=[...ii(K.value,"output_private"),...R];ni(K.value,"output_private",fe),R.forEach(he=>{he._id&&!ee.value.has(he._id)&&ee.value.add(he._id)})}}),z({get(){return ls(K.value,"output_public")},set(R){if(!$.value.project_types[K.value])return;const fe=[...ii(K.value,"output_public"),...R];ni(K.value,"output_public",fe),R.forEach(he=>{he._id&&!ee.value.has(he._id)&&ee.value.add(he._id)})}}),z({get(){return ls(K.value,"workspace")},set(R){if(!$.value.project_types[K.value])return;ls(K.value,"workspace").filter(me=>!R.some(Pe=>Pe._id===me._id)).forEach(me=>{me._id&&ee.value.delete(me._id)});const Ve=[...ii(K.value,"workspace"),...R];ni(K.value,"workspace",Ve),R.forEach(me=>{me._id&&!ee.value.has(me._id)&&ee.value.add(me._id)})}}),z({get(){return ls(K.value,"input")},set(R){if(!$.value.project_types[K.value])return;ls(K.value,"input").filter(me=>!R.some(Pe=>Pe._id===me._id)).forEach(me=>{me._id&&ee.value.delete(me._id)});const Ve=[...ii(K.value,"input"),...R];ni(K.value,"input",Ve),R.forEach(me=>{me._id&&!ee.value.has(me._id)&&ee.value.add(me._id)})}}),z({get(){return ls(K.value,"output")},set(R){if(!$.value.project_types[K.value])return;ls(K.value,"output").filter(me=>!R.some(Pe=>Pe._id===me._id)).forEach(me=>{me._id&&ee.value.delete(me._id)});const Ve=[...ii(K.value,"output"),...R];ni(K.value,"output",Ve),R.forEach(me=>{me._id&&!ee.value.has(me._id)&&ee.value.add(me._id)})}});const al=(R="")=>{const D={};return R.split(/\r?\n/).forEach(F=>{const fe=F.trim();if(!fe||fe.startsWith("#")||!fe.includes("="))return;const[he,...Ve]=fe.split("=");D[he.trim()]=Ve.join("=").replace(/^"|"$/g,"")}),D},cl=(R={})=>Object.entries(R).map(([D,F])=>`${D}=${F??""}`).join(`
`);function Br(R={}){const D=Object.entries(R);return D.length?D.reduce((F,[fe,he])=>{const Ve=fe.includes("_")?fe.split("_")[0]:"Other";return F[Ve]||(F[Ve]={}),F[Ve][fe]={defined:!!he,used:!1,used_in:[],value:he},F},{}):{}}const Wn=R=>{let D=x$;typeof R=="string"?D=R:R?.raw?D=R.raw:R?.variables&&(D=cl(R.variables)),ze.value=D,Ue.value=al(D),rt.value=Br(al(D)),Je.value="grouped"},Ir=R=>{const D=R?.databases||{},F=R?.storage_buckets||{};_.value=R?.default_database||null,U.value=R?.default_storage_bucket||null;const fe=Object.entries(D).filter(([Ve])=>Ve!=="framework_db").map(([Ve,me])=>({_id:Ve,name:Ve,...me})),he=Object.entries(F).map(([Ve,me])=>({_id:Ve,name:Ve,...me}));T.value=fe,x.value=he},Nr=async()=>{try{ae.value=!0;const R=$.value.projects_root?.trim()||"",D=JSON.parse(JSON.stringify($.value));D.global||(D.global={}),D.global.projects_root=R||null,delete D.projects_root,D.defaults.scaffold&&(D.defaults.scaffold.seed=D.defaults.scaffold.seed===""?null:D.defaults.scaffold.seed),D.defaults.seed=D.defaults.seed===""?null:D.defaults.seed,D.defaults.packages&&D.defaults.packages.default_packages&&(D.defaults.packages.default_packages=(D.defaults.packages.default_packages||[]).filter(Pe=>Pe.name&&Pe.name.trim()!=="")),D.defaults.env={raw:ze.value||""};const F={};T.value.forEach(Pe=>{const{_id:kt,name:He,...gn}=Pe;F[He]=gn});const fe={};x.value.forEach(Pe=>{const{_id:kt,name:He,...gn}=Pe;fe[He]=gn}),D.defaults.connections={default_database:_.value,default_storage_bucket:U.value,databases:F,storage_buckets:fe},D.defaults.directories=D.project_types?.project?.directories||D.defaults.directories,D.defaults.git_hooks.data_security=D.privacy.secret_scan,D.git=D.git||{user_name:"",user_email:""};for(const Pe in Y)D.project_types[Pe]&&(D.project_types[Pe].directories_enabled={...Y[Pe]});for(const Pe in D.project_types){const kt=D.project_types[Pe];kt.extra_directories&&Array.isArray(kt.extra_directories)&&(console.log(`[Save] Before filter (${Pe}):`,{count:kt.extra_directories.length,items:kt.extra_directories.map(He=>({key:He.key,enabled:kt.directories_enabled?.[He.key]}))}),kt.extra_directories=kt.extra_directories.filter(He=>!He.key||He.key.trim()===""||!He.label||He.label.trim()===""||!He.path||He.path.trim()===""||!He.type||He.type.trim()===""?(console.log("[Save] Filtering out incomplete item:",He.key),!1):kt.directories_enabled&&kt.directories_enabled[He.key]===!1?(console.log("[Save] Filtering out disabled item:",He.key),!1):!0),console.log(`[Save] After filter (${Pe}):`,{count:kt.extra_directories.length,items:kt.extra_directories.map(He=>He.key)}))}const he=await fetch("/api/settings/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(D)});if(!he.ok){const Pe=await he.text();throw new Error("Failed to save settings")}const Ve=await he.json();if((await Promise.all([fetch("/api/templates/notebook",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:le.notebook.contents})}),fetch("/api/templates/script",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:le.script.contents})}),fetch("/api/templates/presentation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:le.presentation.contents})}),fetch("/api/templates/gitignore-project",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:le.gitignore_project.contents})}),fetch("/api/templates/gitignore-project_sensitive",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:le.gitignore_project_sensitive.contents})}),fetch("/api/templates/gitignore-course",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:le.gitignore_course.contents})}),fetch("/api/templates/gitignore-presentation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:le.gitignore_presentation.contents})})])).some(Pe=>!Pe.ok))throw new Error("Template save failed");ee.value.clear(),await Lr(),e.success("Settings Saved","Your global defaults were updated.")}catch(R){console.error("Failed to save settings:",R),e.error("Save Failed",R?.message||"Review your changes and try again.")}finally{ae.value=!1}};return is(()=>{Lr(),It("notebook"),It("script"),It("presentation"),It("gitignore-project","gitignore_project"),It("gitignore-project_sensitive","gitignore_project_sensitive"),It("gitignore-course","gitignore_course"),It("gitignore-presentation","gitignore_presentation"),It(Ye.value,"canonical"),window.addEventListener("keydown",pn)}),Dr(()=>{window.removeEventListener("keydown",pn)}),(R,D)=>(g(),b("div",Ej,[h("nav",Tj,[D[34]||(D[34]=h("h2",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"New Project Defaults",-1)),h("div",Oj,[(g(),b(ye,null,$e(n,F=>h("div",{key:F.id},[F.id==="basics"?(g(),_e(La,{key:0},{default:Z(()=>[...D[31]||(D[31]=[de("Settings",-1)])]),_:1})):G("",!0),h("a",{href:Qe(F.slug),onClick:Nt(fe=>ll(F.id),["prevent"]),class:xe(["flex items-center gap-2 px-3 py-2 rounded-md text-sm transition",B.value===F.id?"bg-sky-50 text-sky-700 font-medium dark:bg-sky-900/20 dark:text-sky-400":"text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-800"])},[F.icon?(g(),_e(ws(F.icon),{key:0,class:"h-4 w-4"})):F.svgIcon?(g(),b("svg",{key:1,class:"h-4 w-4",fill:F.svgFill??"none",viewBox:F.svgViewBox??"0 0 24 24",stroke:F.svgStroke??"currentColor"},[h("path",{"stroke-linecap":F.svgStrokeLinecap??"round","stroke-linejoin":F.svgStrokeLinejoin??"round","stroke-width":F.svgStrokeWidth??2,fill:F.svgPathFill??"none",d:F.svgIcon},null,8,$j)],8,jj)):G("",!0),de(" "+X(F.label),1)],10,Pj),F.id==="structure"&&B.value==="structure"?(g(),b("div",Rj,[(g(!0),b(ye,null,$e(E.value,fe=>(g(),b("a",{key:fe.key,href:Qe("project-structure",fe.slug),onClick:Nt(he=>Rr(fe.key),["prevent"]),class:xe(["block rounded-md py-1 pl-4 pr-2 text-xs font-medium transition",K.value===fe.key?"bg-sky-100 text-sky-700 dark:bg-sky-900/30 dark:text-sky-300":"text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-800"])},X(fe.label),11,Lj))),128))])):F.id==="templates"&&B.value==="templates"?(g(),b("div",Vj,[(g(),b(ye,null,$e(j,fe=>h("a",{key:fe.id,href:`#${fe.id}`,onClick:Nt(he=>Os(fe.id),["prevent"]),class:"block rounded-md py-1 pl-4 pr-2 text-xs font-medium text-gray-600 transition hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-800"},X(fe.label),9,Bj)),64))])):G("",!0)])),64)),A(tn,{modelValue:te.value,"onUpdate:modelValue":D[1]||(D[1]=F=>te.value=F),title:".env Variables Preview"},{default:Z(()=>[D[33]||(D[33]=h("p",{class:"mb-3 text-sm text-gray-600 dark:text-gray-400"},[de(" Copy these entries into your projects "),h("code",null,".env"),de(" file so the connections above resolve properly. ")],-1)),h("pre",Ij,X(re.value),1),h("div",Nj,[A(Ke,{variant:"primary",onClick:D[0]||(D[0]=F=>te.value=!1)},{default:Z(()=>[...D[32]||(D[32]=[de("Close",-1)])]),_:1})])]),_:1},8,["modelValue"])]),h("div",Fj,[A(Ke,{variant:"primary",size:"md",disabled:ae.value,onClick:Nr,class:"w-full"},{default:Z(()=>[de(X(ae.value?"Saving":"Save Changes"),1)]),_:1},8,["disabled"])])]),ge.value?(g(),b("div",zj,[...D[35]||(D[35]=[h("div",{class:"text-center"},[h("div",{class:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-sky-600 border-r-transparent"}),h("p",{class:"mt-4 text-sm text-gray-600 dark:text-gray-400"},"Loading settings...")],-1)])])):G("",!0),Ze(h("div",Uj,[A(Tr,{title:Oe.value,description:Be.value},null,8,["title","description"]),h("div",Hj,[Ze(h("div",Wj,[A(Ef,{cards:J.value,onNavigate:D[2]||(D[2]=F=>B.value=F)},null,8,["cards"])],512),[[ut,B.value==="overview"]]),Ze(h("div",Kj,[A(jf,{"database-connections":T.value,"onUpdate:databaseConnections":D[3]||(D[3]=F=>T.value=F),"s3-connections":x.value,"onUpdate:s3Connections":D[4]||(D[4]=F=>x.value=F),"default-database":_.value,"onUpdate:defaultDatabase":D[5]||(D[5]=F=>_.value=F),"default-storage-bucket":U.value,"onUpdate:defaultStorageBucket":D[6]||(D[6]=F=>U.value=F)},null,8,["database-connections","s3-connections","default-database","default-storage-bucket"])],512),[[ut,B.value==="connections-defaults"]]),Ze(h("div",qj,[A(Ms,{flush:""},{default:Z(()=>[A(Rf,{groups:rt.value,variables:Ue.value,"onUpdate:variables":D[7]||(D[7]=F=>Ue.value=F),"raw-content":ze.value,"onUpdate:rawContent":D[8]||(D[8]=F=>ze.value=F),"view-mode":Je.value,"onUpdate:viewMode":D[9]||(D[9]=F=>Je.value=F),"regroup-on-save":ht.value,"onUpdate:regroupOnSave":D[10]||(D[10]=F=>ht.value=F),"show-save-button":!1,"allow-show-values-toggle":!0},null,8,["groups","variables","raw-content","view-mode","regroup-on-save"]),h("div",Gj,[A(Ke,{variant:"primary",onClick:Nr,disabled:ae.value},{default:Z(()=>[de(X(ae.value?"Saving":"Save Changes"),1)]),_:1},8,["disabled"])])]),_:1})],512),[[ut,B.value==="env-defaults"]]),Ze(h("div",Jj,[A(Ms,null,{default:Z(()=>[A(bo,null,{default:Z(()=>[h("div",Yj,[A(Ae,{modelValue:$.value.projects_root,"onUpdate:modelValue":D[11]||(D[11]=F=>$.value.projects_root=F),label:"Default Projects Directory",hint:"New projects will be created in this directory by default",placeholder:"e.g., ~/projects or /Users/yourname/code"},null,8,["modelValue"]),A(Dj,{positron:$.value.defaults.positron,"onUpdate:positron":D[12]||(D[12]=F=>$.value.defaults.positron=F),"notebook-format":$.value.defaults.notebook_format,"onUpdate:notebookFormat":D[13]||(D[13]=F=>$.value.defaults.notebook_format=F)},null,8,["positron","notebook-format"]),h("div",Qj,[A(Tf,{modelValue:$.value.author,"onUpdate:modelValue":D[14]||(D[14]=F=>$.value.author=F)},null,8,["modelValue"])])])]),_:1})]),_:1})],512),[[ut,B.value==="basics"]]),Ze(h("div",Xj,[K.value?Ce.value&&p.value?(g(),b("div",r$,[A($f,{"project-type":K.value,directories:$.value.project_types[K.value].directories,"onUpdate:directories":D[15]||(D[15]=F=>$.value.project_types[K.value].directories=F),"render-dirs":$.value.project_types[K.value].render_dirs,"onUpdate:renderDirs":D[16]||(D[16]=F=>$.value.project_types[K.value].render_dirs=F),enabled:Y[K.value],"onUpdate:enabled":D[17]||(D[17]=F=>Y[K.value]=F),"extra-directories":$.value.project_types[K.value].extra_directories,"onUpdate:extraDirectories":D[18]||(D[18]=F=>$.value.project_types[K.value].extra_directories=F),settings:$.value.project_types[K.value],"onUpdate:settings":D[19]||(D[19]=F=>$.value.project_types[K.value]=F),gitignore:$.value.project_types[K.value].gitignore,"onUpdate:gitignore":D[20]||(D[20]=F=>$.value.project_types[K.value].gitignore=F),catalog:p.value.project_types[K.value]||{},"new-extra-ids":ee.value,"onUpdate:newExtraIds":D[21]||(D[21]=F=>ee.value=F),onReset:D[22]||(D[22]=F=>rl(K.value))},null,8,["project-type","directories","render-dirs","enabled","extra-directories","settings","gitignore","catalog","new-extra-ids"])])):G("",!0):(g(),b("div",Zj,[h("div",e$,[(g(!0),b(ye,null,$e(E.value,F=>(g(),b("button",{key:F.key,onClick:fe=>Rr(F.key),class:"group relative w-full rounded-lg border border-gray-200 p-6 text-left transition hover:border-sky-300 dark:border-gray-700 dark:hover:border-sky-600"},[h("div",s$,[A(ft(ma),{class:"h-6 w-6 flex-shrink-0 text-gray-400 transition group-hover:text-sky-600 dark:group-hover:text-sky-400"}),h("div",null,[h("h3",i$,X(F.label),1),h("p",n$,X($.value.project_types[F.key]?.description||""),1)])])],8,t$))),128))])]))],512),[[ut,B.value==="structure"]]),Ze(h("div",o$,[A(Ms,null,{default:Z(()=>[A(Of,{modelValue:Vr.value,"onUpdate:modelValue":D[23]||(D[23]=F=>Vr.value=F),flush:""},{note:Z(()=>[...D[36]||(D[36]=[de(" Project-specific .gitignore templates can be customized in ",-1),h("a",{href:"#/settings/project-defaults",class:"text-sky-600 dark:text-sky-400 hover:underline"}," Project Defaults ",-1),de(". ",-1)])]),_:1},8,["modelValue"])]),_:1})],512),[[ut,B.value==="git"]]),Ze(h("div",l$,[A(Ms,null,{default:Z(()=>[D[37]||(D[37]=h("div",null,[h("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Scaffold Behavior"),h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"},[de(" Automatic actions when "),h("code",{class:"px-1.5 py-0.5 bg-gray-200 dark:bg-gray-700 rounded text-xs"},"scaffold()"),de(" runs to initialize your project environment. ")])],-1)),A(Pf,{modelValue:mn.value,"onUpdate:modelValue":D[24]||(D[24]=F=>mn.value=F),flush:""},null,8,["modelValue"])]),_:1})],512),[[ut,B.value==="scaffold"]]),Ze(h("div",a$,[A(Ms,null,{default:Z(()=>[A(bo,null,{default:Z(()=>[A(tt,{modelValue:$.value.defaults.packages.use_renv,"onUpdate:modelValue":D[25]||(D[25]=F=>$.value.defaults.packages.use_renv=F),label:"Enable renv",description:"Create renv environments for new projects."},null,8,["modelValue"])]),_:1}),A(bo,{title:"Default packages",description:"Installed (and optionally attached) when scaffold() runs."},{default:Z(()=>[D[41]||(D[41]=h("p",{class:"text-xs text-gray-600 dark:text-gray-400 mb-4"},"Use this list to preseed notebooks with your preferred helpers.",-1)),$.value.defaults.packages.default_packages&&$.value.defaults.packages.default_packages.length?(g(),b("div",c$,[(g(!0),b(ye,null,$e($.value.defaults.packages.default_packages,(F,fe)=>(g(),b("div",{key:`pkg-${fe}`,class:"rounded-md border border-gray-200 p-4 dark:border-gray-700"},[h("div",u$,[h("div",d$,[F.source==="cran"||F.source==="bioconductor"?(g(),_e(wb,{key:0,modelValue:F.name,"onUpdate:modelValue":he=>F.name=he,source:F.source,label:"Package",placeholder:F.source==="cran"?"Search CRAN...":"Search Bioconductor...",onSelect:he=>F.name=he.name},null,8,["modelValue","onUpdate:modelValue","source","placeholder","onSelect"])):(g(),_e(Ae,{key:1,modelValue:F.name,"onUpdate:modelValue":he=>F.name=he,label:"Package",placeholder:"user/repo"},null,8,["modelValue","onUpdate:modelValue"])),A(Qs,{modelValue:F.source,"onUpdate:modelValue":he=>F.source=he,label:"Source"},{default:Z(()=>[...D[38]||(D[38]=[h("option",{value:"cran"},"CRAN",-1),h("option",{value:"github"},"GitHub",-1),h("option",{value:"bioconductor"},"Bioconductor",-1)])]),_:1},8,["modelValue","onUpdate:modelValue"])]),h("div",f$,[A(tt,{modelValue:F.auto_attach,"onUpdate:modelValue":he=>F.auto_attach=he,label:"Auto-Attach",description:"Call library() when scaffold() runs."},null,8,["modelValue","onUpdate:modelValue"]),A(Ke,{size:"sm",variant:"secondary",onClick:he=>Hn(fe)},{default:Z(()=>[...D[39]||(D[39]=[de("Remove",-1)])]),_:1},8,["onClick"])])])]))),128))])):(g(),b("p",h$,"No packages configured. Add packages to include tidyverse helpers or internal utilities automatically.")),h("div",p$,[A(Ke,{size:"sm",variant:"secondary",onClick:$r},{default:Z(()=>[...D[40]||(D[40]=[de("Add Package",-1)])]),_:1})])]),_:1})]),_:1})],512),[[ut,B.value==="packages"]])])],512),[[ut,!ge.value]]),A(tn,{modelValue:be.open,"onUpdate:modelValue":D[28]||(D[28]=F=>be.open=F),size:"lg",title:be.title},{default:Z(()=>[h("p",m$,X(be.description),1),A(kd,{modelValue:be.contents,"onUpdate:modelValue":D[26]||(D[26]=F=>be.contents=F),rows:18,monospace:""},null,8,["modelValue"])]),actions:Z(()=>[h("div",g$,[A(Ke,{variant:"secondary",onClick:D[27]||(D[27]=F=>be.open=!1)},{default:Z(()=>[...D[42]||(D[42]=[de("Cancel",-1)])]),_:1}),A(Ke,{variant:"primary",disabled:be.loading,onClick:Ni},{default:Z(()=>[de(X(be.loading?"Saving":"Save Template"),1)]),_:1},8,["disabled"])])]),_:1},8,["modelValue","title"]),A(tn,{modelValue:ne.open,"onUpdate:modelValue":D[30]||(D[30]=F=>ne.open=F),size:"md",title:"Reset to Defaults",icon:"warning"},{default:Z(()=>[h("p",v$,[D[43]||(D[43]=de(" Are you sure you want to reset ",-1)),h("strong",null,X(ne.projectTypeName),1),D[44]||(D[44]=de(" to default settings? This will discard all your customizations for this project type. ",-1))])]),actions:Z(()=>[h("div",y$,[A(Ke,{variant:"secondary",onClick:D[29]||(D[29]=F=>ne.open=!1)},{default:Z(()=>[...D[45]||(D[45]=[de("Cancel",-1)])]),_:1}),A(Ke,{variant:"primary",onClick:Ii},{default:Z(()=>[...D[46]||(D[46]=[de(" Reset to Defaults ",-1)])]),_:1})])]),_:1},8,["modelValue"])]))}},S$={class:"mx-auto max-w-5xl p-10"},C$={__name:"ProjectPackagesView",setup(s){return ie([]),is(async()=>{}),(e,t)=>(g(),b("div",S$,[A(Tr,{title:"Packages",description:"Manage R packages for this project."}),t[0]||(t[0]=qa('<div class="mt-10 rounded-2xl border border-zinc-200 bg-white p-8 shadow-sm dark:border-zinc-800 dark:bg-zinc-900"><div class="flex items-center gap-3 border-b border-zinc-100 pb-6 dark:border-zinc-800"><div class="flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-sky-500 to-sky-600 shadow-lg shadow-sky-500/20"><svg class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg></div><h3 class="text-xl font-bold text-zinc-900 dark:text-white">Package Configuration</h3></div><div class="mt-8"><p class="text-sm text-zinc-600 dark:text-zinc-400"> Package management interface coming soon. This page will allow you to: </p><ul class="mt-4 space-y-2 text-sm text-zinc-600 dark:text-zinc-400"><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Add and remove project packages </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Specify package versions </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Toggle renv integration </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Install and update packages </li></ul></div></div>',1))]))}},_$={class:"mx-auto max-w-5xl p-10"},A$={__name:"ProjectDataView",setup(s){return ie([]),is(async()=>{}),(e,t)=>(g(),b("div",_$,[A(Tr,{title:"Data",description:"Manage data catalog and sources for this project."}),t[0]||(t[0]=qa('<div class="mt-10 rounded-2xl border border-zinc-200 bg-white p-8 shadow-sm dark:border-zinc-800 dark:bg-zinc-900"><div class="flex items-center gap-3 border-b border-zinc-100 pb-6 dark:border-zinc-800"><div class="flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-sky-500 to-sky-600 shadow-lg shadow-sky-500/20"><svg class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"></path></svg></div><h3 class="text-xl font-bold text-zinc-900 dark:text-white">Data Catalog</h3></div><div class="mt-8"><p class="text-sm text-zinc-600 dark:text-zinc-400"> Data catalog management interface coming soon. This page will allow you to: </p><ul class="mt-4 space-y-2 text-sm text-zinc-600 dark:text-zinc-400"><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Define data sources in the catalog </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Specify data formats (CSV, RDS, etc.) </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Configure encryption settings </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Track data integrity via digests </li></ul></div></div>',1))]))}},M$={class:"mx-auto max-w-5xl p-10"},D$={__name:"ProjectConnectionsView",setup(s){return ie([]),is(async()=>{}),(e,t)=>(g(),b("div",M$,[A(Tr,{title:"Connections",description:"Manage database connections for this project."}),t[0]||(t[0]=qa('<div class="mt-10 rounded-2xl border border-zinc-200 bg-white p-8 shadow-sm dark:border-zinc-800 dark:bg-zinc-900"><div class="flex items-center gap-3 border-b border-zinc-100 pb-6 dark:border-zinc-800"><div class="flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-sky-500 to-sky-600 shadow-lg shadow-sky-500/20"><svg class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg></div><h3 class="text-xl font-bold text-zinc-900 dark:text-white">Database Connections</h3></div><div class="mt-8"><p class="text-sm text-zinc-600 dark:text-zinc-400"> Connection management interface coming soon. This page will allow you to: </p><ul class="mt-4 space-y-2 text-sm text-zinc-600 dark:text-zinc-400"><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Configure database connections (SQLite, PostgreSQL) </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Store connection credentials securely </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Test database connectivity </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Manage connection pooling settings </li></ul></div></div>',1))]))}},E$=[{path:"/",redirect:"/projects"},{path:"/docs",name:"docs",component:Zh},{path:"/docs/:functionName",name:"doc-detail",component:Zh,props:!0},{path:"/projects",name:"projects",component:s_},{path:"/projects/new",name:"project-create",component:_6},{path:"/project/:id",name:"project-detail",component:Aj,props:!0},{path:"/settings/:section?/:subsection?",name:"settings",component:w$,props:!0},{path:"/project/packages",name:"project-packages",component:C$},{path:"/project/data",name:"project-data",component:A$},{path:"/project/connections",name:"project-connections",component:D$}],T$=Mw({history:rw(),routes:E$});vx(p2).use(T$).mount("#app");
