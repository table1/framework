(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function s(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(n){if(n.ep)return;n.ep=!0;const r=s(n);fetch(n.href,r)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function mc(t){const e=Object.create(null);for(const s of t.split(","))e[s]=1;return s=>s in e}const ht={},tr=[],vi=()=>{},Vm=()=>!1,$a=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),gc=t=>t.startsWith("onUpdate:"),Nt=Object.assign,vc=(t,e)=>{const s=t.indexOf(e);s>-1&&t.splice(s,1)},g1=Object.prototype.hasOwnProperty,ot=(t,e)=>g1.call(t,e),Ue=Array.isArray,sr=t=>Io(t)==="[object Map]",Cr=t=>Io(t)==="[object Set]",Lf=t=>Io(t)==="[object Date]",We=t=>typeof t=="function",_t=t=>typeof t=="string",Ys=t=>typeof t=="symbol",dt=t=>t!==null&&typeof t=="object",Mm=t=>(dt(t)||We(t))&&We(t.then)&&We(t.catch),Dm=Object.prototype.toString,Io=t=>Dm.call(t),v1=t=>Io(t).slice(8,-1),Tm=t=>Io(t)==="[object Object]",yc=t=>_t(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Jr=mc(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ea=t=>{const e=Object.create(null);return(s=>e[s]||(e[s]=t(s)))},y1=/-\w/g,zs=Ea(t=>t.replace(y1,e=>e.slice(1).toUpperCase())),b1=/\B([A-Z])/g,Nn=Ea(t=>t.replace(b1,"-$1").toLowerCase()),Oa=Ea(t=>t.charAt(0).toUpperCase()+t.slice(1)),fu=Ea(t=>t?`on${Oa(t)}`:""),Qi=(t,e)=>!Object.is(t,e),Rl=(t,...e)=>{for(let s=0;s<t.length;s++)t[s](...e)},$m=(t,e,s,i=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:i,value:s})},Zl=t=>{const e=parseFloat(t);return isNaN(e)?t:e},x1=t=>{const e=_t(t)?Number(t):NaN;return isNaN(e)?t:e};let Rf;const Pa=()=>Rf||(Rf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function co(t){if(Ue(t)){const e={};for(let s=0;s<t.length;s++){const i=t[s],n=_t(i)?S1(i):co(i);if(n)for(const r in n)e[r]=n[r]}return e}else if(_t(t)||dt(t))return t}const k1=/;(?![^(]*\))/g,w1=/:([^]+)/,_1=/\/\*[^]*?\*\//g;function S1(t){const e={};return t.replace(_1,"").split(k1).forEach(s=>{if(s){const i=s.split(w1);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function Te(t){let e="";if(_t(t))e=t;else if(Ue(t))for(let s=0;s<t.length;s++){const i=Te(t[s]);i&&(e+=i+" ")}else if(dt(t))for(const s in t)t[s]&&(e+=s+" ");return e.trim()}const C1="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",A1=mc(C1);function Em(t){return!!t||t===""}function V1(t,e){if(t.length!==e.length)return!1;let s=!0;for(let i=0;s&&i<t.length;i++)s=On(t[i],e[i]);return s}function On(t,e){if(t===e)return!0;let s=Lf(t),i=Lf(e);if(s||i)return s&&i?t.getTime()===e.getTime():!1;if(s=Ys(t),i=Ys(e),s||i)return t===e;if(s=Ue(t),i=Ue(e),s||i)return s&&i?V1(t,e):!1;if(s=dt(t),i=dt(e),s||i){if(!s||!i)return!1;const n=Object.keys(t).length,r=Object.keys(e).length;if(n!==r)return!1;for(const o in t){const l=t.hasOwnProperty(o),a=e.hasOwnProperty(o);if(l&&!a||!l&&a||!On(t[o],e[o]))return!1}}return String(t)===String(e)}function bc(t,e){return t.findIndex(s=>On(s,e))}const Om=t=>!!(t&&t.__v_isRef===!0),z=t=>_t(t)?t:t==null?"":Ue(t)||dt(t)&&(t.toString===Dm||!We(t.toString))?Om(t)?z(t.value):JSON.stringify(t,Pm,2):String(t),Pm=(t,e)=>Om(e)?Pm(t,e.value):sr(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((s,[i,n],r)=>(s[hu(i,r)+" =>"]=n,s),{})}:Cr(e)?{[`Set(${e.size})`]:[...e.values()].map(s=>hu(s))}:Ys(e)?hu(e):dt(e)&&!Ue(e)&&!Tm(e)?String(e):e,hu=(t,e="")=>{var s;return Ys(t)?`Symbol(${(s=t.description)!=null?s:e})`:t};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ps;class M1{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ps,!e&&ps&&(this.index=(ps.scopes||(ps.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].pause();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].resume();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].resume()}}run(e){if(this._active){const s=ps;try{return ps=this,e()}finally{ps=s}}}on(){++this._on===1&&(this.prevScope=ps,ps=this)}off(){this._on>0&&--this._on===0&&(ps=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let s,i;for(s=0,i=this.effects.length;s<i;s++)this.effects[s].stop();for(this.effects.length=0,s=0,i=this.cleanups.length;s<i;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,i=this.scopes.length;s<i;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function D1(){return ps}let mt;const pu=new WeakSet;class jm{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ps&&ps.active&&ps.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,pu.has(this)&&(pu.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Rm(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Bf(this),Bm(this);const e=mt,s=Gs;mt=this,Gs=!0;try{return this.fn()}finally{Im(this),mt=e,Gs=s,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)wc(e);this.deps=this.depsTail=void 0,Bf(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?pu.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){td(this)&&this.run()}get dirty(){return td(this)}}let Lm=0,Yr,Xr;function Rm(t,e=!1){if(t.flags|=8,e){t.next=Xr,Xr=t;return}t.next=Yr,Yr=t}function xc(){Lm++}function kc(){if(--Lm>0)return;if(Xr){let e=Xr;for(Xr=void 0;e;){const s=e.next;e.next=void 0,e.flags&=-9,e=s}}let t;for(;Yr;){let e=Yr;for(Yr=void 0;e;){const s=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(i){t||(t=i)}e=s}}if(t)throw t}function Bm(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Im(t){let e,s=t.depsTail,i=s;for(;i;){const n=i.prevDep;i.version===-1?(i===s&&(s=n),wc(i),T1(i)):e=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=n}t.deps=e,t.depsTail=s}function td(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Nm(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Nm(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===fo)||(t.globalVersion=fo,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!td(t))))return;t.flags|=2;const e=t.dep,s=mt,i=Gs;mt=t,Gs=!0;try{Bm(t);const n=t.fn(t._value);(e.version===0||Qi(n,t._value))&&(t.flags|=128,t._value=n,e.version++)}catch(n){throw e.version++,n}finally{mt=s,Gs=i,Im(t),t.flags&=-3}}function wc(t,e=!1){const{dep:s,prevSub:i,nextSub:n}=t;if(i&&(i.nextSub=n,t.prevSub=void 0),n&&(n.prevSub=i,t.nextSub=void 0),s.subs===t&&(s.subs=i,!i&&s.computed)){s.computed.flags&=-5;for(let r=s.computed.deps;r;r=r.nextDep)wc(r,!0)}!e&&!--s.sc&&s.map&&s.map.delete(s.key)}function T1(t){const{prevDep:e,nextDep:s}=t;e&&(e.nextDep=s,t.prevDep=void 0),s&&(s.prevDep=e,t.nextDep=void 0)}let Gs=!0;const Um=[];function Ei(){Um.push(Gs),Gs=!1}function Oi(){const t=Um.pop();Gs=t===void 0?!0:t}function Bf(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const s=mt;mt=void 0;try{e()}finally{mt=s}}}let fo=0;class $1{constructor(e,s){this.sub=e,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class _c{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!mt||!Gs||mt===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==mt)s=this.activeLink=new $1(mt,this),mt.deps?(s.prevDep=mt.depsTail,mt.depsTail.nextDep=s,mt.depsTail=s):mt.deps=mt.depsTail=s,zm(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const i=s.nextDep;i.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=i),s.prevDep=mt.depsTail,s.nextDep=void 0,mt.depsTail.nextDep=s,mt.depsTail=s,mt.deps===s&&(mt.deps=i)}return s}trigger(e){this.version++,fo++,this.notify(e)}notify(e){xc();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{kc()}}}function zm(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let i=e.deps;i;i=i.nextDep)zm(i)}const s=t.dep.subs;s!==t&&(t.prevSub=s,s&&(s.nextSub=t)),t.dep.subs=t}}const sd=new WeakMap,Mn=Symbol(""),id=Symbol(""),ho=Symbol("");function Xt(t,e,s){if(Gs&&mt){let i=sd.get(t);i||sd.set(t,i=new Map);let n=i.get(s);n||(i.set(s,n=new _c),n.map=i,n.key=s),n.track()}}function Vi(t,e,s,i,n,r){const o=sd.get(t);if(!o){fo++;return}const l=a=>{a&&a.trigger()};if(xc(),e==="clear")o.forEach(l);else{const a=Ue(t),d=a&&yc(s);if(a&&s==="length"){const u=Number(i);o.forEach((f,h)=>{(h==="length"||h===ho||!Ys(h)&&h>=u)&&l(f)})}else switch((s!==void 0||o.has(void 0))&&l(o.get(s)),d&&l(o.get(ho)),e){case"add":a?d&&l(o.get("length")):(l(o.get(Mn)),sr(t)&&l(o.get(id)));break;case"delete":a||(l(o.get(Mn)),sr(t)&&l(o.get(id)));break;case"set":sr(t)&&l(o.get(Mn));break}}kc()}function qn(t){const e=it(t);return e===t?e:(Xt(e,"iterate",ho),Bs(t)?e:e.map(Ft))}function ja(t){return Xt(t=it(t),"iterate",ho),t}const E1={__proto__:null,[Symbol.iterator](){return mu(this,Symbol.iterator,Ft)},concat(...t){return qn(this).concat(...t.map(e=>Ue(e)?qn(e):e))},entries(){return mu(this,"entries",t=>(t[1]=Ft(t[1]),t))},every(t,e){return ki(this,"every",t,e,void 0,arguments)},filter(t,e){return ki(this,"filter",t,e,s=>s.map(Ft),arguments)},find(t,e){return ki(this,"find",t,e,Ft,arguments)},findIndex(t,e){return ki(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return ki(this,"findLast",t,e,Ft,arguments)},findLastIndex(t,e){return ki(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return ki(this,"forEach",t,e,void 0,arguments)},includes(...t){return gu(this,"includes",t)},indexOf(...t){return gu(this,"indexOf",t)},join(t){return qn(this).join(t)},lastIndexOf(...t){return gu(this,"lastIndexOf",t)},map(t,e){return ki(this,"map",t,e,void 0,arguments)},pop(){return Pr(this,"pop")},push(...t){return Pr(this,"push",t)},reduce(t,...e){return If(this,"reduce",t,e)},reduceRight(t,...e){return If(this,"reduceRight",t,e)},shift(){return Pr(this,"shift")},some(t,e){return ki(this,"some",t,e,void 0,arguments)},splice(...t){return Pr(this,"splice",t)},toReversed(){return qn(this).toReversed()},toSorted(t){return qn(this).toSorted(t)},toSpliced(...t){return qn(this).toSpliced(...t)},unshift(...t){return Pr(this,"unshift",t)},values(){return mu(this,"values",Ft)}};function mu(t,e,s){const i=ja(t),n=i[e]();return i!==t&&!Bs(t)&&(n._next=n.next,n.next=()=>{const r=n._next();return r.done||(r.value=s(r.value)),r}),n}const O1=Array.prototype;function ki(t,e,s,i,n,r){const o=ja(t),l=o!==t&&!Bs(t),a=o[e];if(a!==O1[e]){const f=a.apply(t,r);return l?Ft(f):f}let d=s;o!==t&&(l?d=function(f,h){return s.call(this,Ft(f),h,t)}:s.length>2&&(d=function(f,h){return s.call(this,f,h,t)}));const u=a.call(o,d,i);return l&&n?n(u):u}function If(t,e,s,i){const n=ja(t);let r=s;return n!==t&&(Bs(t)?s.length>3&&(r=function(o,l,a){return s.call(this,o,l,a,t)}):r=function(o,l,a){return s.call(this,o,Ft(l),a,t)}),n[e](r,...i)}function gu(t,e,s){const i=it(t);Xt(i,"iterate",ho);const n=i[e](...s);return(n===-1||n===!1)&&Ac(s[0])?(s[0]=it(s[0]),i[e](...s)):n}function Pr(t,e,s=[]){Ei(),xc();const i=it(t)[e].apply(t,s);return kc(),Oi(),i}const P1=mc("__proto__,__v_isRef,__isVue"),Fm=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Ys));function j1(t){Ys(t)||(t=String(t));const e=it(this);return Xt(e,"has",t),e.hasOwnProperty(t)}class Hm{constructor(e=!1,s=!1){this._isReadonly=e,this._isShallow=s}get(e,s,i){if(s==="__v_skip")return e.__v_skip;const n=this._isReadonly,r=this._isShallow;if(s==="__v_isReactive")return!n;if(s==="__v_isReadonly")return n;if(s==="__v_isShallow")return r;if(s==="__v_raw")return i===(n?r?W1:Gm:r?Km:qm).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(i)?e:void 0;const o=Ue(e);if(!n){let a;if(o&&(a=E1[s]))return a;if(s==="hasOwnProperty")return j1}const l=Reflect.get(e,s,ts(e)?e:i);if((Ys(s)?Fm.has(s):P1(s))||(n||Xt(e,"get",s),r))return l;if(ts(l)){const a=o&&yc(s)?l:l.value;return n&&dt(a)?rd(a):a}return dt(l)?n?rd(l):qs(l):l}}class Wm extends Hm{constructor(e=!1){super(!1,e)}set(e,s,i,n){let r=e[s];if(!this._isShallow){const a=tn(r);if(!Bs(i)&&!tn(i)&&(r=it(r),i=it(i)),!Ue(e)&&ts(r)&&!ts(i))return a||(r.value=i),!0}const o=Ue(e)&&yc(s)?Number(s)<e.length:ot(e,s),l=Reflect.set(e,s,i,ts(e)?e:n);return e===it(n)&&(o?Qi(i,r)&&Vi(e,"set",s,i):Vi(e,"add",s,i)),l}deleteProperty(e,s){const i=ot(e,s);e[s];const n=Reflect.deleteProperty(e,s);return n&&i&&Vi(e,"delete",s,void 0),n}has(e,s){const i=Reflect.has(e,s);return(!Ys(s)||!Fm.has(s))&&Xt(e,"has",s),i}ownKeys(e){return Xt(e,"iterate",Ue(e)?"length":Mn),Reflect.ownKeys(e)}}class L1 extends Hm{constructor(e=!1){super(!0,e)}set(e,s){return!0}deleteProperty(e,s){return!0}}const R1=new Wm,B1=new L1,I1=new Wm(!0);const nd=t=>t,ll=t=>Reflect.getPrototypeOf(t);function N1(t,e,s){return function(...i){const n=this.__v_raw,r=it(n),o=sr(r),l=t==="entries"||t===Symbol.iterator&&o,a=t==="keys"&&o,d=n[t](...i),u=s?nd:e?Ql:Ft;return!e&&Xt(r,"iterate",a?id:Mn),{next(){const{value:f,done:h}=d.next();return h?{value:f,done:h}:{value:l?[u(f[0]),u(f[1])]:u(f),done:h}},[Symbol.iterator](){return this}}}}function al(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function U1(t,e){const s={get(n){const r=this.__v_raw,o=it(r),l=it(n);t||(Qi(n,l)&&Xt(o,"get",n),Xt(o,"get",l));const{has:a}=ll(o),d=e?nd:t?Ql:Ft;if(a.call(o,n))return d(r.get(n));if(a.call(o,l))return d(r.get(l));r!==o&&r.get(n)},get size(){const n=this.__v_raw;return!t&&Xt(it(n),"iterate",Mn),n.size},has(n){const r=this.__v_raw,o=it(r),l=it(n);return t||(Qi(n,l)&&Xt(o,"has",n),Xt(o,"has",l)),n===l?r.has(n):r.has(n)||r.has(l)},forEach(n,r){const o=this,l=o.__v_raw,a=it(l),d=e?nd:t?Ql:Ft;return!t&&Xt(a,"iterate",Mn),l.forEach((u,f)=>n.call(r,d(u),d(f),o))}};return Nt(s,t?{add:al("add"),set:al("set"),delete:al("delete"),clear:al("clear")}:{add(n){!e&&!Bs(n)&&!tn(n)&&(n=it(n));const r=it(this);return ll(r).has.call(r,n)||(r.add(n),Vi(r,"add",n,n)),this},set(n,r){!e&&!Bs(r)&&!tn(r)&&(r=it(r));const o=it(this),{has:l,get:a}=ll(o);let d=l.call(o,n);d||(n=it(n),d=l.call(o,n));const u=a.call(o,n);return o.set(n,r),d?Qi(r,u)&&Vi(o,"set",n,r):Vi(o,"add",n,r),this},delete(n){const r=it(this),{has:o,get:l}=ll(r);let a=o.call(r,n);a||(n=it(n),a=o.call(r,n)),l&&l.call(r,n);const d=r.delete(n);return a&&Vi(r,"delete",n,void 0),d},clear(){const n=it(this),r=n.size!==0,o=n.clear();return r&&Vi(n,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(n=>{s[n]=N1(n,t,e)}),s}function Sc(t,e){const s=U1(t,e);return(i,n,r)=>n==="__v_isReactive"?!t:n==="__v_isReadonly"?t:n==="__v_raw"?i:Reflect.get(ot(s,n)&&n in i?s:i,n,r)}const z1={get:Sc(!1,!1)},F1={get:Sc(!1,!0)},H1={get:Sc(!0,!1)};const qm=new WeakMap,Km=new WeakMap,Gm=new WeakMap,W1=new WeakMap;function q1(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function K1(t){return t.__v_skip||!Object.isExtensible(t)?0:q1(v1(t))}function qs(t){return tn(t)?t:Cc(t,!1,R1,z1,qm)}function Jm(t){return Cc(t,!1,I1,F1,Km)}function rd(t){return Cc(t,!0,B1,H1,Gm)}function Cc(t,e,s,i,n){if(!dt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const r=K1(t);if(r===0)return t;const o=n.get(t);if(o)return o;const l=new Proxy(t,r===2?i:s);return n.set(t,l),l}function ir(t){return tn(t)?ir(t.__v_raw):!!(t&&t.__v_isReactive)}function tn(t){return!!(t&&t.__v_isReadonly)}function Bs(t){return!!(t&&t.__v_isShallow)}function Ac(t){return t?!!t.__v_raw:!1}function it(t){const e=t&&t.__v_raw;return e?it(e):t}function G1(t){return!ot(t,"__v_skip")&&Object.isExtensible(t)&&$m(t,"__v_skip",!0),t}const Ft=t=>dt(t)?qs(t):t,Ql=t=>dt(t)?rd(t):t;function ts(t){return t?t.__v_isRef===!0:!1}function ce(t){return Ym(t,!1)}function J1(t){return Ym(t,!0)}function Ym(t,e){return ts(t)?t:new Y1(t,e)}class Y1{constructor(e,s){this.dep=new _c,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?e:it(e),this._value=s?e:Ft(e),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(e){const s=this._rawValue,i=this.__v_isShallow||Bs(e)||tn(e);e=i?e:it(e),Qi(e,s)&&(this._rawValue=e,this._value=i?e:Ft(e),this.dep.trigger())}}function lt(t){return ts(t)?t.value:t}const X1={get:(t,e,s)=>e==="__v_raw"?t:lt(Reflect.get(t,e,s)),set:(t,e,s,i)=>{const n=t[e];return ts(n)&&!ts(s)?(n.value=s,!0):Reflect.set(t,e,s,i)}};function Xm(t){return ir(t)?t:new Proxy(t,X1)}class Z1{constructor(e,s,i){this.fn=e,this.setter=s,this._value=void 0,this.dep=new _c(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=fo-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&mt!==this)return Rm(this,!0),!0}get value(){const e=this.dep.track();return Nm(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Q1(t,e,s=!1){let i,n;return We(t)?i=t:(i=t.get,n=t.set),new Z1(i,n,s)}const ul={},ea=new WeakMap;let bn;function eb(t,e=!1,s=bn){if(s){let i=ea.get(s);i||ea.set(s,i=[]),i.push(t)}}function tb(t,e,s=ht){const{immediate:i,deep:n,once:r,scheduler:o,augmentJob:l,call:a}=s,d=F=>n?F:Bs(F)||n===!1||n===0?Mi(F,1):Mi(F);let u,f,h,m,_=!1,p=!1;if(ts(t)?(f=()=>t.value,_=Bs(t)):ir(t)?(f=()=>d(t),_=!0):Ue(t)?(p=!0,_=t.some(F=>ir(F)||Bs(F)),f=()=>t.map(F=>{if(ts(F))return F.value;if(ir(F))return d(F);if(We(F))return a?a(F,2):F()})):We(t)?e?f=a?()=>a(t,2):t:f=()=>{if(h){Ei();try{h()}finally{Oi()}}const F=bn;bn=u;try{return a?a(t,3,[m]):t(m)}finally{bn=F}}:f=vi,e&&n){const F=f,j=n===!0?1/0:n;f=()=>Mi(F(),j)}const C=D1(),M=()=>{u.stop(),C&&C.active&&vc(C.effects,u)};if(r&&e){const F=e;e=(...j)=>{F(...j),M()}}let U=p?new Array(t.length).fill(ul):ul;const B=F=>{if(!(!(u.flags&1)||!u.dirty&&!F))if(e){const j=u.run();if(n||_||(p?j.some((T,A)=>Qi(T,U[A])):Qi(j,U))){h&&h();const T=bn;bn=u;try{const A=[j,U===ul?void 0:p&&U[0]===ul?[]:U,m];U=j,a?a(e,3,A):e(...A)}finally{bn=T}}}else u.run()};return l&&l(B),u=new jm(f),u.scheduler=o?()=>o(B,!1):B,m=F=>eb(F,!1,u),h=u.onStop=()=>{const F=ea.get(u);if(F){if(a)a(F,4);else for(const j of F)j();ea.delete(u)}},e?i?B(!0):U=u.run():o?o(B.bind(null,!0),!0):u.run(),M.pause=u.pause.bind(u),M.resume=u.resume.bind(u),M.stop=M,M}function Mi(t,e=1/0,s){if(e<=0||!dt(t)||t.__v_skip||(s=s||new Map,(s.get(t)||0)>=e))return t;if(s.set(t,e),e--,ts(t))Mi(t.value,e,s);else if(Ue(t))for(let i=0;i<t.length;i++)Mi(t[i],e,s);else if(Cr(t)||sr(t))t.forEach(i=>{Mi(i,e,s)});else if(Tm(t)){for(const i in t)Mi(t[i],e,s);for(const i of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,i)&&Mi(t[i],e,s)}return t}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function No(t,e,s,i){try{return i?t(...i):t()}catch(n){La(n,e,s)}}function Xs(t,e,s,i){if(We(t)){const n=No(t,e,s,i);return n&&Mm(n)&&n.catch(r=>{La(r,e,s)}),n}if(Ue(t)){const n=[];for(let r=0;r<t.length;r++)n.push(Xs(t[r],e,s,i));return n}}function La(t,e,s,i=!0){const n=e?e.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||ht;if(e){let l=e.parent;const a=e.proxy,d=`https://vuejs.org/error-reference/#runtime-${s}`;for(;l;){const u=l.ec;if(u){for(let f=0;f<u.length;f++)if(u[f](t,a,d)===!1)return}l=l.parent}if(r){Ei(),No(r,null,10,[t,a,d]),Oi();return}}sb(t,s,n,i,o)}function sb(t,e,s,i=!0,n=!1){if(n)throw t;console.error(t)}const ds=[];let ui=-1;const nr=[];let zi=null,Kn=0;const Zm=Promise.resolve();let ta=null;function Dn(t){const e=ta||Zm;return t?e.then(this?t.bind(this):t):e}function ib(t){let e=ui+1,s=ds.length;for(;e<s;){const i=e+s>>>1,n=ds[i],r=po(n);r<t||r===t&&n.flags&2?e=i+1:s=i}return e}function Vc(t){if(!(t.flags&1)){const e=po(t),s=ds[ds.length-1];!s||!(t.flags&2)&&e>=po(s)?ds.push(t):ds.splice(ib(e),0,t),t.flags|=1,Qm()}}function Qm(){ta||(ta=Zm.then(tg))}function nb(t){Ue(t)?nr.push(...t):zi&&t.id===-1?zi.splice(Kn+1,0,t):t.flags&1||(nr.push(t),t.flags|=1),Qm()}function Nf(t,e,s=ui+1){for(;s<ds.length;s++){const i=ds[s];if(i&&i.flags&2){if(t&&i.id!==t.uid)continue;ds.splice(s,1),s--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function eg(t){if(nr.length){const e=[...new Set(nr)].sort((s,i)=>po(s)-po(i));if(nr.length=0,zi){zi.push(...e);return}for(zi=e,Kn=0;Kn<zi.length;Kn++){const s=zi[Kn];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}zi=null,Kn=0}}const po=t=>t.id==null?t.flags&2?-1:1/0:t.id;function tg(t){try{for(ui=0;ui<ds.length;ui++){const e=ds[ui];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),No(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;ui<ds.length;ui++){const e=ds[ui];e&&(e.flags&=-2)}ui=-1,ds.length=0,eg(),ta=null,(ds.length||nr.length)&&tg()}}let qt=null,sg=null;function sa(t){const e=qt;return qt=t,sg=t&&t.type.__scopeId||null,e}function R(t,e=qt,s){if(!e||t._n)return t;const i=(...n)=>{i._d&&oa(-1);const r=sa(e);let o;try{o=t(...n)}finally{sa(r),i._d&&oa(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function Ye(t,e){if(qt===null)return t;const s=za(qt),i=t.dirs||(t.dirs=[]);for(let n=0;n<e.length;n++){let[r,o,l,a=ht]=e[n];r&&(We(r)&&(r={mounted:r,updated:r}),r.deep&&Mi(o),i.push({dir:r,instance:s,value:o,oldValue:void 0,arg:l,modifiers:a}))}return t}function pn(t,e,s,i){const n=t.dirs,r=e&&e.dirs;for(let o=0;o<n.length;o++){const l=n[o];r&&(l.oldValue=r[o].value);let a=l.dir[i];a&&(Ei(),Xs(a,s,8,[t.el,l,t,e]),Oi())}}const ig=Symbol("_vte"),ng=t=>t.__isTeleport,Zr=t=>t&&(t.disabled||t.disabled===""),Uf=t=>t&&(t.defer||t.defer===""),zf=t=>typeof SVGElement<"u"&&t instanceof SVGElement,Ff=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,od=(t,e)=>{const s=t&&t.to;return _t(s)?e?e(s):null:s},rg={name:"Teleport",__isTeleport:!0,process(t,e,s,i,n,r,o,l,a,d){const{mc:u,pc:f,pbc:h,o:{insert:m,querySelector:_,createText:p,createComment:C}}=d,M=Zr(e.props);let{shapeFlag:U,children:B,dynamicChildren:F}=e;if(t==null){const j=e.el=p(""),T=e.anchor=p("");m(j,s,i),m(T,s,i);const A=(ie,ge)=>{U&16&&u(B,ie,ge,n,r,o,l,a)},J=()=>{const ie=e.target=od(e.props,_),ge=lg(ie,e,p,m);ie&&(o!=="svg"&&zf(ie)?o="svg":o!=="mathml"&&Ff(ie)&&(o="mathml"),n&&n.isCE&&(n.ce._teleportTargets||(n.ce._teleportTargets=new Set)).add(ie),M||(A(ie,ge),Bl(e,!1)))};M&&(A(s,T),Bl(e,!0)),Uf(e.props)?(e.el.__isMounted=!1,ls(()=>{J(),delete e.el.__isMounted},r)):J()}else{if(Uf(e.props)&&t.el.__isMounted===!1){ls(()=>{rg.process(t,e,s,i,n,r,o,l,a,d)},r);return}e.el=t.el,e.targetStart=t.targetStart;const j=e.anchor=t.anchor,T=e.target=t.target,A=e.targetAnchor=t.targetAnchor,J=Zr(t.props),ie=J?s:T,ge=J?j:A;if(o==="svg"||zf(T)?o="svg":(o==="mathml"||Ff(T))&&(o="mathml"),F?(h(t.dynamicChildren,F,ie,n,r,o,l),Tc(t,e,!0)):a||f(t,e,ie,ge,n,r,o,l,!1),M)J?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):dl(e,s,j,d,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const le=e.target=od(e.props,_);le&&dl(e,le,null,d,0)}else J&&dl(e,T,A,d,1);Bl(e,M)}},remove(t,e,s,{um:i,o:{remove:n}},r){const{shapeFlag:o,children:l,anchor:a,targetStart:d,targetAnchor:u,target:f,props:h}=t;if(f&&(n(d),n(u)),r&&n(a),o&16){const m=r||!Zr(h);for(let _=0;_<l.length;_++){const p=l[_];i(p,e,s,m,!!p.dynamicChildren)}}},move:dl,hydrate:rb};function dl(t,e,s,{o:{insert:i},m:n},r=2){r===0&&i(t.targetAnchor,e,s);const{el:o,anchor:l,shapeFlag:a,children:d,props:u}=t,f=r===2;if(f&&i(o,e,s),(!f||Zr(u))&&a&16)for(let h=0;h<d.length;h++)n(d[h],e,s,2);f&&i(l,e,s)}function rb(t,e,s,i,n,r,{o:{nextSibling:o,parentNode:l,querySelector:a,insert:d,createText:u}},f){function h(p,C,M,U){C.anchor=f(o(p),C,l(p),s,i,n,r),C.targetStart=M,C.targetAnchor=U}const m=e.target=od(e.props,a),_=Zr(e.props);if(m){const p=m._lpa||m.firstChild;if(e.shapeFlag&16)if(_)h(t,e,p,p&&o(p));else{e.anchor=o(t);let C=p;for(;C;){if(C&&C.nodeType===8){if(C.data==="teleport start anchor")e.targetStart=C;else if(C.data==="teleport anchor"){e.targetAnchor=C,m._lpa=e.targetAnchor&&o(e.targetAnchor);break}}C=o(C)}e.targetAnchor||lg(m,e,u,d),f(p&&o(p),e,m,s,i,n,r)}Bl(e,_)}else _&&e.shapeFlag&16&&h(t,e,t,o(t));return e.anchor&&o(e.anchor)}const og=rg;function Bl(t,e){const s=t.ctx;if(s&&s.ut){let i,n;for(e?(i=t.el,n=t.anchor):(i=t.targetStart,n=t.targetAnchor);i&&i!==n;)i.nodeType===1&&i.setAttribute("data-v-owner",s.uid),i=i.nextSibling;s.ut()}}function lg(t,e,s,i){const n=e.targetStart=s(""),r=e.targetAnchor=s("");return n[ig]=r,t&&(i(n,t),i(r,t)),r}const Ai=Symbol("_leaveCb"),cl=Symbol("_enterCb");function ob(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ss(()=>{t.isMounted=!0}),gg(()=>{t.isUnmounting=!0}),t}const Es=[Function,Array],ag={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Es,onEnter:Es,onAfterEnter:Es,onEnterCancelled:Es,onBeforeLeave:Es,onLeave:Es,onAfterLeave:Es,onLeaveCancelled:Es,onBeforeAppear:Es,onAppear:Es,onAfterAppear:Es,onAppearCancelled:Es},ug=t=>{const e=t.subTree;return e.component?ug(e.component):e},lb={name:"BaseTransition",props:ag,setup(t,{slots:e}){const s=Ec(),i=ob();return()=>{const n=e.default&&fg(e.default(),!0);if(!n||!n.length)return;const r=dg(n),o=it(t),{mode:l}=o;if(i.isLeaving)return vu(r);const a=Hf(r);if(!a)return vu(r);let d=ld(a,o,i,s,f=>d=f);a.type!==Zt&&mo(a,d);let u=s.subTree&&Hf(s.subTree);if(u&&u.type!==Zt&&!wn(u,a)&&ug(s).type!==Zt){let f=ld(u,o,i,s);if(mo(u,f),l==="out-in"&&a.type!==Zt)return i.isLeaving=!0,f.afterLeave=()=>{i.isLeaving=!1,s.job.flags&8||s.update(),delete f.afterLeave,u=void 0},vu(r);l==="in-out"&&a.type!==Zt?f.delayLeave=(h,m,_)=>{const p=cg(i,u);p[String(u.key)]=u,h[Ai]=()=>{m(),h[Ai]=void 0,delete d.delayedLeave,u=void 0},d.delayedLeave=()=>{_(),delete d.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return r}}};function dg(t){let e=t[0];if(t.length>1){for(const s of t)if(s.type!==Zt){e=s;break}}return e}const ab=lb;function cg(t,e){const{leavingVNodes:s}=t;let i=s.get(e.type);return i||(i=Object.create(null),s.set(e.type,i)),i}function ld(t,e,s,i,n){const{appear:r,mode:o,persisted:l=!1,onBeforeEnter:a,onEnter:d,onAfterEnter:u,onEnterCancelled:f,onBeforeLeave:h,onLeave:m,onAfterLeave:_,onLeaveCancelled:p,onBeforeAppear:C,onAppear:M,onAfterAppear:U,onAppearCancelled:B}=e,F=String(t.key),j=cg(s,t),T=(ie,ge)=>{ie&&Xs(ie,i,9,ge)},A=(ie,ge)=>{const le=ge[1];T(ie,ge),Ue(ie)?ie.every(W=>W.length<=1)&&le():ie.length<=1&&le()},J={mode:o,persisted:l,beforeEnter(ie){let ge=a;if(!s.isMounted)if(r)ge=C||a;else return;ie[Ai]&&ie[Ai](!0);const le=j[F];le&&wn(t,le)&&le.el[Ai]&&le.el[Ai](),T(ge,[ie])},enter(ie){let ge=d,le=u,W=f;if(!s.isMounted)if(r)ge=M||d,le=U||u,W=B||f;else return;let he=!1;const te=ie[cl]=we=>{he||(he=!0,we?T(W,[ie]):T(le,[ie]),J.delayedLeave&&J.delayedLeave(),ie[cl]=void 0)};ge?A(ge,[ie,te]):te()},leave(ie,ge){const le=String(t.key);if(ie[cl]&&ie[cl](!0),s.isUnmounting)return ge();T(h,[ie]);let W=!1;const he=ie[Ai]=te=>{W||(W=!0,ge(),te?T(p,[ie]):T(_,[ie]),ie[Ai]=void 0,j[le]===t&&delete j[le])};j[le]=t,m?A(m,[ie,he]):he()},clone(ie){const ge=ld(ie,e,s,i,n);return n&&n(ge),ge}};return J}function vu(t){if(Ra(t))return t=sn(t),t.children=null,t}function Hf(t){if(!Ra(t))return ng(t.type)&&t.children?dg(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:s}=t;if(s){if(e&16)return s[0];if(e&32&&We(s.default))return s.default()}}function mo(t,e){t.shapeFlag&6&&t.component?(t.transition=e,mo(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function fg(t,e=!1,s){let i=[],n=0;for(let r=0;r<t.length;r++){let o=t[r];const l=s==null?o.key:String(s)+String(o.key!=null?o.key:r);o.type===ee?(o.patchFlag&128&&n++,i=i.concat(fg(o.children,e,l))):(e||o.type!==Zt)&&i.push(l!=null?sn(o,{key:l}):o)}if(n>1)for(let r=0;r<i.length;r++)i[r].patchFlag=-2;return i}function hg(t,e){return We(t)?Nt({name:t.name},e,{setup:t}):t}function pg(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const ia=new WeakMap;function Qr(t,e,s,i,n=!1){if(Ue(t)){t.forEach((_,p)=>Qr(_,e&&(Ue(e)?e[p]:e),s,i,n));return}if(rr(i)&&!n){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&Qr(t,e,s,i.component.subTree);return}const r=i.shapeFlag&4?za(i.component):i.el,o=n?null:r,{i:l,r:a}=t,d=e&&e.r,u=l.refs===ht?l.refs={}:l.refs,f=l.setupState,h=it(f),m=f===ht?Vm:_=>ot(h,_);if(d!=null&&d!==a){if(Wf(e),_t(d))u[d]=null,m(d)&&(f[d]=null);else if(ts(d)){d.value=null;const _=e;_.k&&(u[_.k]=null)}}if(We(a))No(a,l,12,[o,u]);else{const _=_t(a),p=ts(a);if(_||p){const C=()=>{if(t.f){const M=_?m(a)?f[a]:u[a]:a.value;if(n)Ue(M)&&vc(M,r);else if(Ue(M))M.includes(r)||M.push(r);else if(_)u[a]=[r],m(a)&&(f[a]=u[a]);else{const U=[r];a.value=U,t.k&&(u[t.k]=U)}}else _?(u[a]=o,m(a)&&(f[a]=o)):p&&(a.value=o,t.k&&(u[t.k]=o))};if(o){const M=()=>{C(),ia.delete(t)};M.id=-1,ia.set(t,M),ls(M,s)}else Wf(t),C()}}}function Wf(t){const e=ia.get(t);e&&(e.flags|=8,ia.delete(t))}Pa().requestIdleCallback;Pa().cancelIdleCallback;const rr=t=>!!t.type.__asyncLoader,Ra=t=>t.type.__isKeepAlive;function ub(t,e){mg(t,"a",e)}function db(t,e){mg(t,"da",e)}function mg(t,e,s=Qt){const i=t.__wdc||(t.__wdc=()=>{let n=s;for(;n;){if(n.isDeactivated)return;n=n.parent}return t()});if(Ba(e,i,s),s){let n=s.parent;for(;n&&n.parent;)Ra(n.parent.vnode)&&cb(i,e,s,n),n=n.parent}}function cb(t,e,s,i){const n=Ba(e,t,i,!0);Ar(()=>{vc(i[e],n)},s)}function Ba(t,e,s=Qt,i=!1){if(s){const n=s[t]||(s[t]=[]),r=e.__weh||(e.__weh=(...o)=>{Ei();const l=Uo(s),a=Xs(e,s,t,o);return l(),Oi(),a});return i?n.unshift(r):n.push(r),r}}const Ri=t=>(e,s=Qt)=>{(!yo||t==="sp")&&Ba(t,(...i)=>e(...i),s)},fb=Ri("bm"),ss=Ri("m"),hb=Ri("bu"),pb=Ri("u"),gg=Ri("bum"),Ar=Ri("um"),mb=Ri("sp"),gb=Ri("rtg"),vb=Ri("rtc");function yb(t,e=Qt){Ba("ec",t,e)}const vg="components";function na(t,e){return bg(vg,t,!0,e)||t}const yg=Symbol.for("v-ndc");function Cs(t){return _t(t)?bg(vg,t,!1)||t:t||yg}function bg(t,e,s=!0,i=!1){const n=qt||Qt;if(n){const r=n.type;{const l=lx(r,!1);if(l&&(l===e||l===zs(e)||l===Oa(zs(e))))return r}const o=qf(n[t]||r[t],e)||qf(n.appContext[t],e);return!o&&i?r:o}}function qf(t,e){return t&&(t[e]||t[zs(e)]||t[Oa(zs(e))])}function ke(t,e,s,i){let n;const r=s,o=Ue(t);if(o||_t(t)){const l=o&&ir(t);let a=!1,d=!1;l&&(a=!Bs(t),d=tn(t),t=ja(t)),n=new Array(t.length);for(let u=0,f=t.length;u<f;u++)n[u]=e(a?d?Ql(Ft(t[u])):Ft(t[u]):t[u],u,void 0,r)}else if(typeof t=="number"){n=new Array(t);for(let l=0;l<t;l++)n[l]=e(l+1,l,void 0,r)}else if(dt(t))if(t[Symbol.iterator])n=Array.from(t,(l,a)=>e(l,a,void 0,r));else{const l=Object.keys(t);n=new Array(l.length);for(let a=0,d=l.length;a<d;a++){const u=l[a];n[a]=e(t[u],u,a,r)}}else n=[];return n}function bb(t,e){for(let s=0;s<e.length;s++){const i=e[s];if(Ue(i))for(let n=0;n<i.length;n++)t[i[n].name]=i[n].fn;else i&&(t[i.name]=i.key?(...n)=>{const r=i.fn(...n);return r&&(r.key=i.key),r}:i.fn)}return t}function gt(t,e,s={},i,n){if(qt.ce||qt.parent&&rr(qt.parent)&&qt.parent.ce){const d=Object.keys(s).length>0;return e!=="default"&&(s.name=e),g(),me(ee,null,[k("slot",s,i&&i())],d?-2:64)}let r=t[e];r&&r._c&&(r._d=!1),g();const o=r&&xg(r(s)),l=s.key||o&&o.key,a=me(ee,{key:(l&&!Ys(l)?l:`_${e}`)+(!o&&i?"_fb":"")},o||(i?i():[]),o&&t._===1?64:-2);return!n&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),r&&r._c&&(r._d=!0),a}function xg(t){return t.some(e=>vo(e)?!(e.type===Zt||e.type===ee&&!xg(e.children)):!0)?t:null}const ad=t=>t?Ig(t)?za(t):ad(t.parent):null,eo=Nt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>ad(t.parent),$root:t=>ad(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>wg(t),$forceUpdate:t=>t.f||(t.f=()=>{Vc(t.update)}),$nextTick:t=>t.n||(t.n=Dn.bind(t.proxy)),$watch:t=>zb.bind(t)}),yu=(t,e)=>t!==ht&&!t.__isScriptSetup&&ot(t,e),xb={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:s,setupState:i,data:n,props:r,accessCache:o,type:l,appContext:a}=t;let d;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return i[e];case 2:return n[e];case 4:return s[e];case 3:return r[e]}else{if(yu(i,e))return o[e]=1,i[e];if(n!==ht&&ot(n,e))return o[e]=2,n[e];if((d=t.propsOptions[0])&&ot(d,e))return o[e]=3,r[e];if(s!==ht&&ot(s,e))return o[e]=4,s[e];ud&&(o[e]=0)}}const u=eo[e];let f,h;if(u)return e==="$attrs"&&Xt(t.attrs,"get",""),u(t);if((f=l.__cssModules)&&(f=f[e]))return f;if(s!==ht&&ot(s,e))return o[e]=4,s[e];if(h=a.config.globalProperties,ot(h,e))return h[e]},set({_:t},e,s){const{data:i,setupState:n,ctx:r}=t;return yu(n,e)?(n[e]=s,!0):i!==ht&&ot(i,e)?(i[e]=s,!0):ot(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(r[e]=s,!0)},has({_:{data:t,setupState:e,accessCache:s,ctx:i,appContext:n,propsOptions:r,type:o}},l){let a,d;return!!(s[l]||t!==ht&&l[0]!=="$"&&ot(t,l)||yu(e,l)||(a=r[0])&&ot(a,l)||ot(i,l)||ot(eo,l)||ot(n.config.globalProperties,l)||(d=o.__cssModules)&&d[l])},defineProperty(t,e,s){return s.get!=null?t._.accessCache[e]=0:ot(s,"value")&&this.set(t,e,s.value,null),Reflect.defineProperty(t,e,s)}};function kb(){return wb().slots}function wb(t){const e=Ec();return e.setupContext||(e.setupContext=Ug(e))}function Kf(t){return Ue(t)?t.reduce((e,s)=>(e[s]=null,e),{}):t}let ud=!0;function _b(t){const e=wg(t),s=t.proxy,i=t.ctx;ud=!1,e.beforeCreate&&Gf(e.beforeCreate,t,"bc");const{data:n,computed:r,methods:o,watch:l,provide:a,inject:d,created:u,beforeMount:f,mounted:h,beforeUpdate:m,updated:_,activated:p,deactivated:C,beforeDestroy:M,beforeUnmount:U,destroyed:B,unmounted:F,render:j,renderTracked:T,renderTriggered:A,errorCaptured:J,serverPrefetch:ie,expose:ge,inheritAttrs:le,components:W,directives:he,filters:te}=e;if(d&&Sb(d,i,null),o)for(const X in o){const se=o[X];We(se)&&(i[X]=se.bind(s))}if(n){const X=n.call(s,s);dt(X)&&(t.data=qs(X))}if(ud=!0,r)for(const X in r){const se=r[X],Re=We(se)?se.bind(s,s):We(se.get)?se.get.bind(s,s):vi,$=!We(se)&&We(se.set)?se.set.bind(s):vi,Pe=re({get:Re,set:$});Object.defineProperty(i,X,{enumerable:!0,configurable:!0,get:()=>Pe.value,set:Le=>Pe.value=Le})}if(l)for(const X in l)kg(l[X],i,s,X);if(a){const X=We(a)?a.call(s):a;Reflect.ownKeys(X).forEach(se=>{Il(se,X[se])})}u&&Gf(u,t,"c");function G(X,se){Ue(se)?se.forEach(Re=>X(Re.bind(s))):se&&X(se.bind(s))}if(G(fb,f),G(ss,h),G(hb,m),G(pb,_),G(ub,p),G(db,C),G(yb,J),G(vb,T),G(gb,A),G(gg,U),G(Ar,F),G(mb,ie),Ue(ge))if(ge.length){const X=t.exposed||(t.exposed={});ge.forEach(se=>{Object.defineProperty(X,se,{get:()=>s[se],set:Re=>s[se]=Re,enumerable:!0})})}else t.exposed||(t.exposed={});j&&t.render===vi&&(t.render=j),le!=null&&(t.inheritAttrs=le),W&&(t.components=W),he&&(t.directives=he),ie&&pg(t)}function Sb(t,e,s=vi){Ue(t)&&(t=dd(t));for(const i in t){const n=t[i];let r;dt(n)?"default"in n?r=Js(n.from||i,n.default,!0):r=Js(n.from||i):r=Js(n),ts(r)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):e[i]=r}}function Gf(t,e,s){Xs(Ue(t)?t.map(i=>i.bind(e.proxy)):t.bind(e.proxy),e,s)}function kg(t,e,s,i){let n=i.includes(".")?Pg(s,i):()=>s[i];if(_t(t)){const r=e[t];We(r)&&He(n,r)}else if(We(t))He(n,t.bind(s));else if(dt(t))if(Ue(t))t.forEach(r=>kg(r,e,s,i));else{const r=We(t.handler)?t.handler.bind(s):e[t.handler];We(r)&&He(n,r,t)}}function wg(t){const e=t.type,{mixins:s,extends:i}=e,{mixins:n,optionsCache:r,config:{optionMergeStrategies:o}}=t.appContext,l=r.get(e);let a;return l?a=l:!n.length&&!s&&!i?a=e:(a={},n.length&&n.forEach(d=>ra(a,d,o,!0)),ra(a,e,o)),dt(e)&&r.set(e,a),a}function ra(t,e,s,i=!1){const{mixins:n,extends:r}=e;r&&ra(t,r,s,!0),n&&n.forEach(o=>ra(t,o,s,!0));for(const o in e)if(!(i&&o==="expose")){const l=Cb[o]||s&&s[o];t[o]=l?l(t[o],e[o]):e[o]}return t}const Cb={data:Jf,props:Yf,emits:Yf,methods:Hr,computed:Hr,beforeCreate:os,created:os,beforeMount:os,mounted:os,beforeUpdate:os,updated:os,beforeDestroy:os,beforeUnmount:os,destroyed:os,unmounted:os,activated:os,deactivated:os,errorCaptured:os,serverPrefetch:os,components:Hr,directives:Hr,watch:Vb,provide:Jf,inject:Ab};function Jf(t,e){return e?t?function(){return Nt(We(t)?t.call(this,this):t,We(e)?e.call(this,this):e)}:e:t}function Ab(t,e){return Hr(dd(t),dd(e))}function dd(t){if(Ue(t)){const e={};for(let s=0;s<t.length;s++)e[t[s]]=t[s];return e}return t}function os(t,e){return t?[...new Set([].concat(t,e))]:e}function Hr(t,e){return t?Nt(Object.create(null),t,e):e}function Yf(t,e){return t?Ue(t)&&Ue(e)?[...new Set([...t,...e])]:Nt(Object.create(null),Kf(t),Kf(e??{})):e}function Vb(t,e){if(!t)return e;if(!e)return t;const s=Nt(Object.create(null),t);for(const i in e)s[i]=os(t[i],e[i]);return s}function _g(){return{app:null,config:{isNativeTag:Vm,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Mb=0;function Db(t,e){return function(i,n=null){We(i)||(i=Nt({},i)),n!=null&&!dt(n)&&(n=null);const r=_g(),o=new WeakSet,l=[];let a=!1;const d=r.app={_uid:Mb++,_component:i,_props:n,_container:null,_context:r,_instance:null,version:ux,get config(){return r.config},set config(u){},use(u,...f){return o.has(u)||(u&&We(u.install)?(o.add(u),u.install(d,...f)):We(u)&&(o.add(u),u(d,...f))),d},mixin(u){return r.mixins.includes(u)||r.mixins.push(u),d},component(u,f){return f?(r.components[u]=f,d):r.components[u]},directive(u,f){return f?(r.directives[u]=f,d):r.directives[u]},mount(u,f,h){if(!a){const m=d._ceVNode||k(i,n);return m.appContext=r,h===!0?h="svg":h===!1&&(h=void 0),t(m,u,h),a=!0,d._container=u,u.__vue_app__=d,za(m.component)}},onUnmount(u){l.push(u)},unmount(){a&&(Xs(l,d._instance,16),t(null,d._container),delete d._container.__vue_app__)},provide(u,f){return r.provides[u]=f,d},runWithContext(u){const f=or;or=d;try{return u()}finally{or=f}}};return d}}let or=null;function Il(t,e){if(Qt){let s=Qt.provides;const i=Qt.parent&&Qt.parent.provides;i===s&&(s=Qt.provides=Object.create(i)),s[t]=e}}function Js(t,e,s=!1){const i=Ec();if(i||or){let n=or?or._context.provides:i?i.parent==null||i.ce?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(n&&t in n)return n[t];if(arguments.length>1)return s&&We(e)?e.call(i&&i.proxy):e}}const Sg={},Cg=()=>Object.create(Sg),Ag=t=>Object.getPrototypeOf(t)===Sg;function Tb(t,e,s,i=!1){const n={},r=Cg();t.propsDefaults=Object.create(null),Vg(t,e,n,r);for(const o in t.propsOptions[0])o in n||(n[o]=void 0);s?t.props=i?n:Jm(n):t.type.props?t.props=n:t.props=r,t.attrs=r}function $b(t,e,s,i){const{props:n,attrs:r,vnode:{patchFlag:o}}=t,l=it(n),[a]=t.propsOptions;let d=!1;if((i||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let f=0;f<u.length;f++){let h=u[f];if(Ia(t.emitsOptions,h))continue;const m=e[h];if(a)if(ot(r,h))m!==r[h]&&(r[h]=m,d=!0);else{const _=zs(h);n[_]=cd(a,l,_,m,t,!1)}else m!==r[h]&&(r[h]=m,d=!0)}}}else{Vg(t,e,n,r)&&(d=!0);let u;for(const f in l)(!e||!ot(e,f)&&((u=Nn(f))===f||!ot(e,u)))&&(a?s&&(s[f]!==void 0||s[u]!==void 0)&&(n[f]=cd(a,l,f,void 0,t,!0)):delete n[f]);if(r!==l)for(const f in r)(!e||!ot(e,f))&&(delete r[f],d=!0)}d&&Vi(t.attrs,"set","")}function Vg(t,e,s,i){const[n,r]=t.propsOptions;let o=!1,l;if(e)for(let a in e){if(Jr(a))continue;const d=e[a];let u;n&&ot(n,u=zs(a))?!r||!r.includes(u)?s[u]=d:(l||(l={}))[u]=d:Ia(t.emitsOptions,a)||(!(a in i)||d!==i[a])&&(i[a]=d,o=!0)}if(r){const a=it(s),d=l||ht;for(let u=0;u<r.length;u++){const f=r[u];s[f]=cd(n,a,f,d[f],t,!ot(d,f))}}return o}function cd(t,e,s,i,n,r){const o=t[s];if(o!=null){const l=ot(o,"default");if(l&&i===void 0){const a=o.default;if(o.type!==Function&&!o.skipFactory&&We(a)){const{propsDefaults:d}=n;if(s in d)i=d[s];else{const u=Uo(n);i=d[s]=a.call(null,e),u()}}else i=a;n.ce&&n.ce._setProp(s,i)}o[0]&&(r&&!l?i=!1:o[1]&&(i===""||i===Nn(s))&&(i=!0))}return i}const Eb=new WeakMap;function Mg(t,e,s=!1){const i=s?Eb:e.propsCache,n=i.get(t);if(n)return n;const r=t.props,o={},l=[];let a=!1;if(!We(t)){const u=f=>{a=!0;const[h,m]=Mg(f,e,!0);Nt(o,h),m&&l.push(...m)};!s&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!r&&!a)return dt(t)&&i.set(t,tr),tr;if(Ue(r))for(let u=0;u<r.length;u++){const f=zs(r[u]);Xf(f)&&(o[f]=ht)}else if(r)for(const u in r){const f=zs(u);if(Xf(f)){const h=r[u],m=o[f]=Ue(h)||We(h)?{type:h}:Nt({},h),_=m.type;let p=!1,C=!0;if(Ue(_))for(let M=0;M<_.length;++M){const U=_[M],B=We(U)&&U.name;if(B==="Boolean"){p=!0;break}else B==="String"&&(C=!1)}else p=We(_)&&_.name==="Boolean";m[0]=p,m[1]=C,(p||ot(m,"default"))&&l.push(f)}}const d=[o,l];return dt(t)&&i.set(t,d),d}function Xf(t){return t[0]!=="$"&&!Jr(t)}const Mc=t=>t==="_"||t==="_ctx"||t==="$stable",Dc=t=>Ue(t)?t.map(di):[di(t)],Ob=(t,e,s)=>{if(e._n)return e;const i=R((...n)=>Dc(e(...n)),s);return i._c=!1,i},Dg=(t,e,s)=>{const i=t._ctx;for(const n in t){if(Mc(n))continue;const r=t[n];if(We(r))e[n]=Ob(n,r,i);else if(r!=null){const o=Dc(r);e[n]=()=>o}}},Tg=(t,e)=>{const s=Dc(e);t.slots.default=()=>s},$g=(t,e,s)=>{for(const i in e)(s||!Mc(i))&&(t[i]=e[i])},Pb=(t,e,s)=>{const i=t.slots=Cg();if(t.vnode.shapeFlag&32){const n=e._;n?($g(i,e,s),s&&$m(i,"_",n,!0)):Dg(e,i)}else e&&Tg(t,e)},jb=(t,e,s)=>{const{vnode:i,slots:n}=t;let r=!0,o=ht;if(i.shapeFlag&32){const l=e._;l?s&&l===1?r=!1:$g(n,e,s):(r=!e.$stable,Dg(e,n)),o=e}else e&&(Tg(t,e),o={default:1});if(r)for(const l in n)!Mc(l)&&o[l]==null&&delete n[l]},ls=Yb;function Lb(t){return Rb(t)}function Rb(t,e){const s=Pa();s.__VUE__=!0;const{insert:i,remove:n,patchProp:r,createElement:o,createText:l,createComment:a,setText:d,setElementText:u,parentNode:f,nextSibling:h,setScopeId:m=vi,insertStaticContent:_}=t,p=(D,P,K,V=null,ae=null,oe=null,_e=void 0,Se=null,ye=!!P.dynamicChildren)=>{if(D===P)return;D&&!wn(D,P)&&(V=N(D),Le(D,ae,oe,!0),D=null),P.patchFlag===-2&&(ye=!1,P.dynamicChildren=null);const{type:pe,ref:je,shapeFlag:Ve}=P;switch(pe){case Na:C(D,P,K,V);break;case Zt:M(D,P,K,V);break;case Nl:D==null&&U(P,K,V,_e);break;case ee:W(D,P,K,V,ae,oe,_e,Se,ye);break;default:Ve&1?j(D,P,K,V,ae,oe,_e,Se,ye):Ve&6?he(D,P,K,V,ae,oe,_e,Se,ye):(Ve&64||Ve&128)&&pe.process(D,P,K,V,ae,oe,_e,Se,ye,ve)}je!=null&&ae?Qr(je,D&&D.ref,oe,P||D,!P):je==null&&D&&D.ref!=null&&Qr(D.ref,null,oe,D,!0)},C=(D,P,K,V)=>{if(D==null)i(P.el=l(P.children),K,V);else{const ae=P.el=D.el;P.children!==D.children&&d(ae,P.children)}},M=(D,P,K,V)=>{D==null?i(P.el=a(P.children||""),K,V):P.el=D.el},U=(D,P,K,V)=>{[D.el,D.anchor]=_(D.children,P,K,V,D.el,D.anchor)},B=({el:D,anchor:P},K,V)=>{let ae;for(;D&&D!==P;)ae=h(D),i(D,K,V),D=ae;i(P,K,V)},F=({el:D,anchor:P})=>{let K;for(;D&&D!==P;)K=h(D),n(D),D=K;n(P)},j=(D,P,K,V,ae,oe,_e,Se,ye)=>{P.type==="svg"?_e="svg":P.type==="math"&&(_e="mathml"),D==null?T(P,K,V,ae,oe,_e,Se,ye):ie(D,P,ae,oe,_e,Se,ye)},T=(D,P,K,V,ae,oe,_e,Se)=>{let ye,pe;const{props:je,shapeFlag:Ve,transition:be,dirs:Be}=D;if(ye=D.el=o(D.type,oe,je&&je.is,je),Ve&8?u(ye,D.children):Ve&16&&J(D.children,ye,null,V,ae,bu(D,oe),_e,Se),Be&&pn(D,null,V,"created"),A(ye,D,D.scopeId,_e,V),je){for(const Xe in je)Xe!=="value"&&!Jr(Xe)&&r(ye,Xe,null,je[Xe],oe,V);"value"in je&&r(ye,"value",null,je.value,oe),(pe=je.onVnodeBeforeMount)&&ni(pe,V,D)}Be&&pn(D,null,V,"beforeMount");const Ke=Bb(ae,be);Ke&&be.beforeEnter(ye),i(ye,P,K),((pe=je&&je.onVnodeMounted)||Ke||Be)&&ls(()=>{pe&&ni(pe,V,D),Ke&&be.enter(ye),Be&&pn(D,null,V,"mounted")},ae)},A=(D,P,K,V,ae)=>{if(K&&m(D,K),V)for(let oe=0;oe<V.length;oe++)m(D,V[oe]);if(ae){let oe=ae.subTree;if(P===oe||Lg(oe.type)&&(oe.ssContent===P||oe.ssFallback===P)){const _e=ae.vnode;A(D,_e,_e.scopeId,_e.slotScopeIds,ae.parent)}}},J=(D,P,K,V,ae,oe,_e,Se,ye=0)=>{for(let pe=ye;pe<D.length;pe++){const je=D[pe]=Se?Fi(D[pe]):di(D[pe]);p(null,je,P,K,V,ae,oe,_e,Se)}},ie=(D,P,K,V,ae,oe,_e)=>{const Se=P.el=D.el;let{patchFlag:ye,dynamicChildren:pe,dirs:je}=P;ye|=D.patchFlag&16;const Ve=D.props||ht,be=P.props||ht;let Be;if(K&&mn(K,!1),(Be=be.onVnodeBeforeUpdate)&&ni(Be,K,P,D),je&&pn(P,D,K,"beforeUpdate"),K&&mn(K,!0),(Ve.innerHTML&&be.innerHTML==null||Ve.textContent&&be.textContent==null)&&u(Se,""),pe?ge(D.dynamicChildren,pe,Se,K,V,bu(P,ae),oe):_e||se(D,P,Se,null,K,V,bu(P,ae),oe,!1),ye>0){if(ye&16)le(Se,Ve,be,K,ae);else if(ye&2&&Ve.class!==be.class&&r(Se,"class",null,be.class,ae),ye&4&&r(Se,"style",Ve.style,be.style,ae),ye&8){const Ke=P.dynamicProps;for(let Xe=0;Xe<Ke.length;Xe++){const Qe=Ke[Xe],Ot=Ve[Qe],Ct=be[Qe];(Ct!==Ot||Qe==="value")&&r(Se,Qe,Ot,Ct,ae,K)}}ye&1&&D.children!==P.children&&u(Se,P.children)}else!_e&&pe==null&&le(Se,Ve,be,K,ae);((Be=be.onVnodeUpdated)||je)&&ls(()=>{Be&&ni(Be,K,P,D),je&&pn(P,D,K,"updated")},V)},ge=(D,P,K,V,ae,oe,_e)=>{for(let Se=0;Se<P.length;Se++){const ye=D[Se],pe=P[Se],je=ye.el&&(ye.type===ee||!wn(ye,pe)||ye.shapeFlag&198)?f(ye.el):K;p(ye,pe,je,null,V,ae,oe,_e,!0)}},le=(D,P,K,V,ae)=>{if(P!==K){if(P!==ht)for(const oe in P)!Jr(oe)&&!(oe in K)&&r(D,oe,P[oe],null,ae,V);for(const oe in K){if(Jr(oe))continue;const _e=K[oe],Se=P[oe];_e!==Se&&oe!=="value"&&r(D,oe,Se,_e,ae,V)}"value"in K&&r(D,"value",P.value,K.value,ae)}},W=(D,P,K,V,ae,oe,_e,Se,ye)=>{const pe=P.el=D?D.el:l(""),je=P.anchor=D?D.anchor:l("");let{patchFlag:Ve,dynamicChildren:be,slotScopeIds:Be}=P;Be&&(Se=Se?Se.concat(Be):Be),D==null?(i(pe,K,V),i(je,K,V),J(P.children||[],K,je,ae,oe,_e,Se,ye)):Ve>0&&Ve&64&&be&&D.dynamicChildren?(ge(D.dynamicChildren,be,K,ae,oe,_e,Se),(P.key!=null||ae&&P===ae.subTree)&&Tc(D,P,!0)):se(D,P,K,je,ae,oe,_e,Se,ye)},he=(D,P,K,V,ae,oe,_e,Se,ye)=>{P.slotScopeIds=Se,D==null?P.shapeFlag&512?ae.ctx.activate(P,K,V,_e,ye):te(P,K,V,ae,oe,_e,ye):we(D,P,ye)},te=(D,P,K,V,ae,oe,_e)=>{const Se=D.component=ix(D,V,ae);if(Ra(D)&&(Se.ctx.renderer=ve),nx(Se,!1,_e),Se.asyncDep){if(ae&&ae.registerDep(Se,G,_e),!D.el){const ye=Se.subTree=k(Zt);M(null,ye,P,K),D.placeholder=ye.el}}else G(Se,D,P,K,ae,oe,_e)},we=(D,P,K)=>{const V=P.component=D.component;if(Gb(D,P,K))if(V.asyncDep&&!V.asyncResolved){X(V,P,K);return}else V.next=P,V.update();else P.el=D.el,V.vnode=P},G=(D,P,K,V,ae,oe,_e)=>{const Se=()=>{if(D.isMounted){let{next:Ve,bu:be,u:Be,parent:Ke,vnode:Xe}=D;{const Pt=Eg(D);if(Pt){Ve&&(Ve.el=Xe.el,X(D,Ve,_e)),Pt.asyncDep.then(()=>{D.isUnmounted||Se()});return}}let Qe=Ve,Ot;mn(D,!1),Ve?(Ve.el=Xe.el,X(D,Ve,_e)):Ve=Xe,be&&Rl(be),(Ot=Ve.props&&Ve.props.onVnodeBeforeUpdate)&&ni(Ot,Ke,Ve,Xe),mn(D,!0);const Ct=Qf(D),vt=D.subTree;D.subTree=Ct,p(vt,Ct,f(vt.el),N(vt),D,ae,oe),Ve.el=Ct.el,Qe===null&&Jb(D,Ct.el),Be&&ls(Be,ae),(Ot=Ve.props&&Ve.props.onVnodeUpdated)&&ls(()=>ni(Ot,Ke,Ve,Xe),ae)}else{let Ve;const{el:be,props:Be}=P,{bm:Ke,m:Xe,parent:Qe,root:Ot,type:Ct}=D,vt=rr(P);mn(D,!1),Ke&&Rl(Ke),!vt&&(Ve=Be&&Be.onVnodeBeforeMount)&&ni(Ve,Qe,P),mn(D,!0);{Ot.ce&&Ot.ce._def.shadowRoot!==!1&&Ot.ce._injectChildStyle(Ct);const Pt=D.subTree=Qf(D);p(null,Pt,K,V,D,ae,oe),P.el=Pt.el}if(Xe&&ls(Xe,ae),!vt&&(Ve=Be&&Be.onVnodeMounted)){const Pt=P;ls(()=>ni(Ve,Qe,Pt),ae)}(P.shapeFlag&256||Qe&&rr(Qe.vnode)&&Qe.vnode.shapeFlag&256)&&D.a&&ls(D.a,ae),D.isMounted=!0,P=K=V=null}};D.scope.on();const ye=D.effect=new jm(Se);D.scope.off();const pe=D.update=ye.run.bind(ye),je=D.job=ye.runIfDirty.bind(ye);je.i=D,je.id=D.uid,ye.scheduler=()=>Vc(je),mn(D,!0),pe()},X=(D,P,K)=>{P.component=D;const V=D.vnode.props;D.vnode=P,D.next=null,$b(D,P.props,V,K),jb(D,P.children,K),Ei(),Nf(D),Oi()},se=(D,P,K,V,ae,oe,_e,Se,ye=!1)=>{const pe=D&&D.children,je=D?D.shapeFlag:0,Ve=P.children,{patchFlag:be,shapeFlag:Be}=P;if(be>0){if(be&128){$(pe,Ve,K,V,ae,oe,_e,Se,ye);return}else if(be&256){Re(pe,Ve,K,V,ae,oe,_e,Se,ye);return}}Be&8?(je&16&&H(pe,ae,oe),Ve!==pe&&u(K,Ve)):je&16?Be&16?$(pe,Ve,K,V,ae,oe,_e,Se,ye):H(pe,ae,oe,!0):(je&8&&u(K,""),Be&16&&J(Ve,K,V,ae,oe,_e,Se,ye))},Re=(D,P,K,V,ae,oe,_e,Se,ye)=>{D=D||tr,P=P||tr;const pe=D.length,je=P.length,Ve=Math.min(pe,je);let be;for(be=0;be<Ve;be++){const Be=P[be]=ye?Fi(P[be]):di(P[be]);p(D[be],Be,K,null,ae,oe,_e,Se,ye)}pe>je?H(D,ae,oe,!0,!1,Ve):J(P,K,V,ae,oe,_e,Se,ye,Ve)},$=(D,P,K,V,ae,oe,_e,Se,ye)=>{let pe=0;const je=P.length;let Ve=D.length-1,be=je-1;for(;pe<=Ve&&pe<=be;){const Be=D[pe],Ke=P[pe]=ye?Fi(P[pe]):di(P[pe]);if(wn(Be,Ke))p(Be,Ke,K,null,ae,oe,_e,Se,ye);else break;pe++}for(;pe<=Ve&&pe<=be;){const Be=D[Ve],Ke=P[be]=ye?Fi(P[be]):di(P[be]);if(wn(Be,Ke))p(Be,Ke,K,null,ae,oe,_e,Se,ye);else break;Ve--,be--}if(pe>Ve){if(pe<=be){const Be=be+1,Ke=Be<je?P[Be].el:V;for(;pe<=be;)p(null,P[pe]=ye?Fi(P[pe]):di(P[pe]),K,Ke,ae,oe,_e,Se,ye),pe++}}else if(pe>be)for(;pe<=Ve;)Le(D[pe],ae,oe,!0),pe++;else{const Be=pe,Ke=pe,Xe=new Map;for(pe=Ke;pe<=be;pe++){const nt=P[pe]=ye?Fi(P[pe]):di(P[pe]);nt.key!=null&&Xe.set(nt.key,pe)}let Qe,Ot=0;const Ct=be-Ke+1;let vt=!1,Pt=0;const As=new Array(Ct);for(pe=0;pe<Ct;pe++)As[pe]=0;for(pe=Be;pe<=Ve;pe++){const nt=D[pe];if(Ot>=Ct){Le(nt,ae,oe,!0);continue}let Bt;if(nt.key!=null)Bt=Xe.get(nt.key);else for(Qe=Ke;Qe<=be;Qe++)if(As[Qe-Ke]===0&&wn(nt,P[Qe])){Bt=Qe;break}Bt===void 0?Le(nt,ae,oe,!0):(As[Bt-Ke]=pe+1,Bt>=Pt?Pt=Bt:vt=!0,p(nt,P[Bt],K,null,ae,oe,_e,Se,ye),Ot++)}const Ii=vt?Ib(As):tr;for(Qe=Ii.length-1,pe=Ct-1;pe>=0;pe--){const nt=Ke+pe,Bt=P[nt],zn=P[nt+1],hn=nt+1<je?zn.el||zn.placeholder:V;As[pe]===0?p(null,Bt,K,hn,ae,oe,_e,Se,ye):vt&&(Qe<0||pe!==Ii[Qe]?Pe(Bt,K,hn,2):Qe--)}}},Pe=(D,P,K,V,ae=null)=>{const{el:oe,type:_e,transition:Se,children:ye,shapeFlag:pe}=D;if(pe&6){Pe(D.component.subTree,P,K,V);return}if(pe&128){D.suspense.move(P,K,V);return}if(pe&64){_e.move(D,P,K,ve);return}if(_e===ee){i(oe,P,K);for(let Ve=0;Ve<ye.length;Ve++)Pe(ye[Ve],P,K,V);i(D.anchor,P,K);return}if(_e===Nl){B(D,P,K);return}if(V!==2&&pe&1&&Se)if(V===0)Se.beforeEnter(oe),i(oe,P,K),ls(()=>Se.enter(oe),ae);else{const{leave:Ve,delayLeave:be,afterLeave:Be}=Se,Ke=()=>{D.ctx.isUnmounted?n(oe):i(oe,P,K)},Xe=()=>{oe._isLeaving&&oe[Ai](!0),Ve(oe,()=>{Ke(),Be&&Be()})};be?be(oe,Ke,Xe):Xe()}else i(oe,P,K)},Le=(D,P,K,V=!1,ae=!1)=>{const{type:oe,props:_e,ref:Se,children:ye,dynamicChildren:pe,shapeFlag:je,patchFlag:Ve,dirs:be,cacheIndex:Be}=D;if(Ve===-2&&(ae=!1),Se!=null&&(Ei(),Qr(Se,null,K,D,!0),Oi()),Be!=null&&(P.renderCache[Be]=void 0),je&256){P.ctx.deactivate(D);return}const Ke=je&1&&be,Xe=!rr(D);let Qe;if(Xe&&(Qe=_e&&_e.onVnodeBeforeUnmount)&&ni(Qe,P,D),je&6)v(D.component,K,V);else{if(je&128){D.suspense.unmount(K,V);return}Ke&&pn(D,null,P,"beforeUnmount"),je&64?D.type.remove(D,P,K,ve,V):pe&&!pe.hasOnce&&(oe!==ee||Ve>0&&Ve&64)?H(pe,P,K,!1,!0):(oe===ee&&Ve&384||!ae&&je&16)&&H(ye,P,K),V&&Z(D)}(Xe&&(Qe=_e&&_e.onVnodeUnmounted)||Ke)&&ls(()=>{Qe&&ni(Qe,P,D),Ke&&pn(D,null,P,"unmounted")},K)},Z=D=>{const{type:P,el:K,anchor:V,transition:ae}=D;if(P===ee){S(K,V);return}if(P===Nl){F(D);return}const oe=()=>{n(K),ae&&!ae.persisted&&ae.afterLeave&&ae.afterLeave()};if(D.shapeFlag&1&&ae&&!ae.persisted){const{leave:_e,delayLeave:Se}=ae,ye=()=>_e(K,oe);Se?Se(D.el,oe,ye):ye()}else oe()},S=(D,P)=>{let K;for(;D!==P;)K=h(D),n(D),D=K;n(P)},v=(D,P,K)=>{const{bum:V,scope:ae,job:oe,subTree:_e,um:Se,m:ye,a:pe}=D;Zf(ye),Zf(pe),V&&Rl(V),ae.stop(),oe&&(oe.flags|=8,Le(_e,D,P,K)),Se&&ls(Se,P),ls(()=>{D.isUnmounted=!0},P)},H=(D,P,K,V=!1,ae=!1,oe=0)=>{for(let _e=oe;_e<D.length;_e++)Le(D[_e],P,K,V,ae)},N=D=>{if(D.shapeFlag&6)return N(D.component.subTree);if(D.shapeFlag&128)return D.suspense.next();const P=h(D.anchor||D.el),K=P&&P[ig];return K?h(K):P};let Q=!1;const xe=(D,P,K)=>{D==null?P._vnode&&Le(P._vnode,null,null,!0):p(P._vnode||null,D,P,null,null,null,K),P._vnode=D,Q||(Q=!0,Nf(),eg(),Q=!1)},ve={p,um:Le,m:Pe,r:Z,mt:te,mc:J,pc:se,pbc:ge,n:N,o:t};return{render:xe,hydrate:void 0,createApp:Db(xe)}}function bu({type:t,props:e},s){return s==="svg"&&t==="foreignObject"||s==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:s}function mn({effect:t,job:e},s){s?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function Bb(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Tc(t,e,s=!1){const i=t.children,n=e.children;if(Ue(i)&&Ue(n))for(let r=0;r<i.length;r++){const o=i[r];let l=n[r];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=n[r]=Fi(n[r]),l.el=o.el),!s&&l.patchFlag!==-2&&Tc(o,l)),l.type===Na&&l.patchFlag!==-1&&(l.el=o.el),l.type===Zt&&!l.el&&(l.el=o.el)}}function Ib(t){const e=t.slice(),s=[0];let i,n,r,o,l;const a=t.length;for(i=0;i<a;i++){const d=t[i];if(d!==0){if(n=s[s.length-1],t[n]<d){e[i]=n,s.push(i);continue}for(r=0,o=s.length-1;r<o;)l=r+o>>1,t[s[l]]<d?r=l+1:o=l;d<t[s[r]]&&(r>0&&(e[i]=s[r-1]),s[r]=i)}}for(r=s.length,o=s[r-1];r-- >0;)s[r]=o,o=e[o];return s}function Eg(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Eg(e)}function Zf(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const Nb=Symbol.for("v-scx"),Ub=()=>Js(Nb);function He(t,e,s){return Og(t,e,s)}function Og(t,e,s=ht){const{immediate:i,deep:n,flush:r,once:o}=s,l=Nt({},s),a=e&&i||!e&&r!=="post";let d;if(yo){if(r==="sync"){const m=Ub();d=m.__watcherHandles||(m.__watcherHandles=[])}else if(!a){const m=()=>{};return m.stop=vi,m.resume=vi,m.pause=vi,m}}const u=Qt;l.call=(m,_,p)=>Xs(m,u,_,p);let f=!1;r==="post"?l.scheduler=m=>{ls(m,u&&u.suspense)}:r!=="sync"&&(f=!0,l.scheduler=(m,_)=>{_?m():Vc(m)}),l.augmentJob=m=>{e&&(m.flags|=4),f&&(m.flags|=2,u&&(m.id=u.uid,m.i=u))};const h=tb(t,e,l);return yo&&(d?d.push(h):a&&h()),h}function zb(t,e,s){const i=this.proxy,n=_t(t)?t.includes(".")?Pg(i,t):()=>i[t]:t.bind(i,i);let r;We(e)?r=e:(r=e.handler,s=e);const o=Uo(this),l=Og(n,r.bind(i),s);return o(),l}function Pg(t,e){const s=e.split(".");return()=>{let i=t;for(let n=0;n<s.length&&i;n++)i=i[s[n]];return i}}const Fb=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${zs(e)}Modifiers`]||t[`${Nn(e)}Modifiers`];function Hb(t,e,...s){if(t.isUnmounted)return;const i=t.vnode.props||ht;let n=s;const r=e.startsWith("update:"),o=r&&Fb(i,e.slice(7));o&&(o.trim&&(n=s.map(u=>_t(u)?u.trim():u)),o.number&&(n=s.map(Zl)));let l,a=i[l=fu(e)]||i[l=fu(zs(e))];!a&&r&&(a=i[l=fu(Nn(e))]),a&&Xs(a,t,6,n);const d=i[l+"Once"];if(d){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,Xs(d,t,6,n)}}const Wb=new WeakMap;function jg(t,e,s=!1){const i=s?Wb:e.emitsCache,n=i.get(t);if(n!==void 0)return n;const r=t.emits;let o={},l=!1;if(!We(t)){const a=d=>{const u=jg(d,e,!0);u&&(l=!0,Nt(o,u))};!s&&e.mixins.length&&e.mixins.forEach(a),t.extends&&a(t.extends),t.mixins&&t.mixins.forEach(a)}return!r&&!l?(dt(t)&&i.set(t,null),null):(Ue(r)?r.forEach(a=>o[a]=null):Nt(o,r),dt(t)&&i.set(t,o),o)}function Ia(t,e){return!t||!$a(e)?!1:(e=e.slice(2).replace(/Once$/,""),ot(t,e[0].toLowerCase()+e.slice(1))||ot(t,Nn(e))||ot(t,e))}function Qf(t){const{type:e,vnode:s,proxy:i,withProxy:n,propsOptions:[r],slots:o,attrs:l,emit:a,render:d,renderCache:u,props:f,data:h,setupState:m,ctx:_,inheritAttrs:p}=t,C=sa(t);let M,U;try{if(s.shapeFlag&4){const F=n||i,j=F;M=di(d.call(j,F,u,f,m,h,_)),U=l}else{const F=e;M=di(F.length>1?F(f,{attrs:l,slots:o,emit:a}):F(f,null)),U=e.props?l:qb(l)}}catch(F){to.length=0,La(F,t,1),M=k(Zt)}let B=M;if(U&&p!==!1){const F=Object.keys(U),{shapeFlag:j}=B;F.length&&j&7&&(r&&F.some(gc)&&(U=Kb(U,r)),B=sn(B,U,!1,!0))}return s.dirs&&(B=sn(B,null,!1,!0),B.dirs=B.dirs?B.dirs.concat(s.dirs):s.dirs),s.transition&&mo(B,s.transition),M=B,sa(C),M}const qb=t=>{let e;for(const s in t)(s==="class"||s==="style"||$a(s))&&((e||(e={}))[s]=t[s]);return e},Kb=(t,e)=>{const s={};for(const i in t)(!gc(i)||!(i.slice(9)in e))&&(s[i]=t[i]);return s};function Gb(t,e,s){const{props:i,children:n,component:r}=t,{props:o,children:l,patchFlag:a}=e,d=r.emitsOptions;if(e.dirs||e.transition)return!0;if(s&&a>=0){if(a&1024)return!0;if(a&16)return i?eh(i,o,d):!!o;if(a&8){const u=e.dynamicProps;for(let f=0;f<u.length;f++){const h=u[f];if(o[h]!==i[h]&&!Ia(d,h))return!0}}}else return(n||l)&&(!l||!l.$stable)?!0:i===o?!1:i?o?eh(i,o,d):!0:!!o;return!1}function eh(t,e,s){const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!0;for(let n=0;n<i.length;n++){const r=i[n];if(e[r]!==t[r]&&!Ia(s,r))return!0}return!1}function Jb({vnode:t,parent:e},s){for(;e;){const i=e.subTree;if(i.suspense&&i.suspense.activeBranch===t&&(i.el=t.el),i===t)(t=e.vnode).el=s,e=e.parent;else break}}const Lg=t=>t.__isSuspense;function Yb(t,e){e&&e.pendingBranch?Ue(t)?e.effects.push(...t):e.effects.push(t):nb(t)}const ee=Symbol.for("v-fgt"),Na=Symbol.for("v-txt"),Zt=Symbol.for("v-cmt"),Nl=Symbol.for("v-stc"),to=[];let _s=null;function g(t=!1){to.push(_s=t?null:[])}function Xb(){to.pop(),_s=to[to.length-1]||null}let go=1;function oa(t,e=!1){go+=t,t<0&&_s&&e&&(_s.hasOnce=!0)}function Rg(t){return t.dynamicChildren=go>0?_s||tr:null,Xb(),go>0&&_s&&_s.push(t),t}function b(t,e,s,i,n,r){return Rg(c(t,e,s,i,n,r,!0))}function me(t,e,s,i,n){return Rg(k(t,e,s,i,n,!0))}function vo(t){return t?t.__v_isVNode===!0:!1}function wn(t,e){return t.type===e.type&&t.key===e.key}const Bg=({key:t})=>t??null,Ul=({ref:t,ref_key:e,ref_for:s})=>(typeof t=="number"&&(t=""+t),t!=null?_t(t)||ts(t)||We(t)?{i:qt,r:t,k:e,f:!!s}:t:null);function c(t,e=null,s=null,i=0,n=null,r=t===ee?0:1,o=!1,l=!1){const a={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Bg(e),ref:e&&Ul(e),scopeId:sg,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:i,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:qt};return l?($c(a,s),r&128&&t.normalize(a)):s&&(a.shapeFlag|=_t(s)?8:16),go>0&&!o&&_s&&(a.patchFlag>0||r&6)&&a.patchFlag!==32&&_s.push(a),a}const k=Zb;function Zb(t,e=null,s=null,i=0,n=null,r=!1){if((!t||t===yg)&&(t=Zt),vo(t)){const l=sn(t,e,!0);return s&&$c(l,s),go>0&&!r&&_s&&(l.shapeFlag&6?_s[_s.indexOf(t)]=l:_s.push(l)),l.patchFlag=-2,l}if(ax(t)&&(t=t.__vccOpts),e){e=Qb(e);let{class:l,style:a}=e;l&&!_t(l)&&(e.class=Te(l)),dt(a)&&(Ac(a)&&!Ue(a)&&(a=Nt({},a)),e.style=co(a))}const o=_t(t)?1:Lg(t)?128:ng(t)?64:dt(t)?4:We(t)?2:0;return c(t,e,s,i,n,o,r,!0)}function Qb(t){return t?Ac(t)||Ag(t)?Nt({},t):t:null}function sn(t,e,s=!1,i=!1){const{props:n,ref:r,patchFlag:o,children:l,transition:a}=t,d=e?ex(n||{},e):n,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:d,key:d&&Bg(d),ref:e&&e.ref?s&&r?Ue(r)?r.concat(Ul(e)):[r,Ul(e)]:Ul(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==ee?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:a,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&sn(t.ssContent),ssFallback:t.ssFallback&&sn(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return a&&i&&mo(u,a.clone(u)),u}function ne(t=" ",e=0){return k(Na,null,t,e)}function Ua(t,e){const s=k(Nl,null,t);return s.staticCount=e,s}function I(t="",e=!1){return e?(g(),me(Zt,null,t)):k(Zt,null,t)}function di(t){return t==null||typeof t=="boolean"?k(Zt):Ue(t)?k(ee,null,t.slice()):vo(t)?Fi(t):k(Na,null,String(t))}function Fi(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:sn(t)}function $c(t,e){let s=0;const{shapeFlag:i}=t;if(e==null)e=null;else if(Ue(e))s=16;else if(typeof e=="object")if(i&65){const n=e.default;n&&(n._c&&(n._d=!1),$c(t,n()),n._c&&(n._d=!0));return}else{s=32;const n=e._;!n&&!Ag(e)?e._ctx=qt:n===3&&qt&&(qt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else We(e)?(e={default:e,_ctx:qt},s=32):(e=String(e),i&64?(s=16,e=[ne(e)]):s=8);t.children=e,t.shapeFlag|=s}function ex(...t){const e={};for(let s=0;s<t.length;s++){const i=t[s];for(const n in i)if(n==="class")e.class!==i.class&&(e.class=Te([e.class,i.class]));else if(n==="style")e.style=co([e.style,i.style]);else if($a(n)){const r=e[n],o=i[n];o&&r!==o&&!(Ue(r)&&r.includes(o))&&(e[n]=r?[].concat(r,o):o)}else n!==""&&(e[n]=i[n])}return e}function ni(t,e,s,i=null){Xs(t,e,7,[s,i])}const tx=_g();let sx=0;function ix(t,e,s){const i=t.type,n=(e?e.appContext:t.appContext)||tx,r={uid:sx++,vnode:t,type:i,parent:e,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new M1(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(n.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Mg(i,n),emitsOptions:jg(i,n),emit:null,emitted:null,propsDefaults:ht,inheritAttrs:i.inheritAttrs,ctx:ht,data:ht,props:ht,attrs:ht,slots:ht,refs:ht,setupState:ht,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=Hb.bind(null,r),t.ce&&t.ce(r),r}let Qt=null;const Ec=()=>Qt||qt;let la,fd;{const t=Pa(),e=(s,i)=>{let n;return(n=t[s])||(n=t[s]=[]),n.push(i),r=>{n.length>1?n.forEach(o=>o(r)):n[0](r)}};la=e("__VUE_INSTANCE_SETTERS__",s=>Qt=s),fd=e("__VUE_SSR_SETTERS__",s=>yo=s)}const Uo=t=>{const e=Qt;return la(t),t.scope.on(),()=>{t.scope.off(),la(e)}},th=()=>{Qt&&Qt.scope.off(),la(null)};function Ig(t){return t.vnode.shapeFlag&4}let yo=!1;function nx(t,e=!1,s=!1){e&&fd(e);const{props:i,children:n}=t.vnode,r=Ig(t);Tb(t,i,r,e),Pb(t,n,s||e);const o=r?rx(t,e):void 0;return e&&fd(!1),o}function rx(t,e){const s=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,xb);const{setup:i}=s;if(i){Ei();const n=t.setupContext=i.length>1?Ug(t):null,r=Uo(t),o=No(i,t,0,[t.props,n]),l=Mm(o);if(Oi(),r(),(l||t.sp)&&!rr(t)&&pg(t),l){if(o.then(th,th),e)return o.then(a=>{sh(t,a)}).catch(a=>{La(a,t,0)});t.asyncDep=o}else sh(t,o)}else Ng(t)}function sh(t,e,s){We(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:dt(e)&&(t.setupState=Xm(e)),Ng(t)}function Ng(t,e,s){const i=t.type;t.render||(t.render=i.render||vi);{const n=Uo(t);Ei();try{_b(t)}finally{Oi(),n()}}}const ox={get(t,e){return Xt(t,"get",""),t[e]}};function Ug(t){const e=s=>{t.exposed=s||{}};return{attrs:new Proxy(t.attrs,ox),slots:t.slots,emit:t.emit,expose:e}}function za(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Xm(G1(t.exposed)),{get(e,s){if(s in e)return e[s];if(s in eo)return eo[s](t)},has(e,s){return s in e||s in eo}})):t.proxy}function lx(t,e=!0){return We(t)?t.displayName||t.name:t.name||e&&t.__name}function ax(t){return We(t)&&"__vccOpts"in t}const re=(t,e)=>Q1(t,e,yo);function Tt(t,e,s){try{oa(-1);const i=arguments.length;return i===2?dt(e)&&!Ue(e)?vo(e)?k(t,null,[e]):k(t,e):k(t,null,e):(i>3?s=Array.prototype.slice.call(arguments,2):i===3&&vo(s)&&(s=[s]),k(t,e,s))}finally{oa(1)}}const ux="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let hd;const ih=typeof window<"u"&&window.trustedTypes;if(ih)try{hd=ih.createPolicy("vue",{createHTML:t=>t})}catch{}const zg=hd?t=>hd.createHTML(t):t=>t,dx="http://www.w3.org/2000/svg",cx="http://www.w3.org/1998/Math/MathML",Ci=typeof document<"u"?document:null,nh=Ci&&Ci.createElement("template"),fx={insert:(t,e,s)=>{e.insertBefore(t,s||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,s,i)=>{const n=e==="svg"?Ci.createElementNS(dx,t):e==="mathml"?Ci.createElementNS(cx,t):s?Ci.createElement(t,{is:s}):Ci.createElement(t);return t==="select"&&i&&i.multiple!=null&&n.setAttribute("multiple",i.multiple),n},createText:t=>Ci.createTextNode(t),createComment:t=>Ci.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Ci.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,s,i,n,r){const o=s?s.previousSibling:e.lastChild;if(n&&(n===r||n.nextSibling))for(;e.insertBefore(n.cloneNode(!0),s),!(n===r||!(n=n.nextSibling)););else{nh.innerHTML=zg(i==="svg"?`<svg>${t}</svg>`:i==="mathml"?`<math>${t}</math>`:t);const l=nh.content;if(i==="svg"||i==="mathml"){const a=l.firstChild;for(;a.firstChild;)l.appendChild(a.firstChild);l.removeChild(a)}e.insertBefore(l,s)}return[o?o.nextSibling:e.firstChild,s?s.previousSibling:e.lastChild]}},Ni="transition",jr="animation",bo=Symbol("_vtc"),Fg={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},hx=Nt({},ag,Fg),px=t=>(t.displayName="Transition",t.props=hx,t),Oc=px((t,{slots:e})=>Tt(ab,mx(t),e)),gn=(t,e=[])=>{Ue(t)?t.forEach(s=>s(...e)):t&&t(...e)},rh=t=>t?Ue(t)?t.some(e=>e.length>1):t.length>1:!1;function mx(t){const e={};for(const W in t)W in Fg||(e[W]=t[W]);if(t.css===!1)return e;const{name:s="v",type:i,duration:n,enterFromClass:r=`${s}-enter-from`,enterActiveClass:o=`${s}-enter-active`,enterToClass:l=`${s}-enter-to`,appearFromClass:a=r,appearActiveClass:d=o,appearToClass:u=l,leaveFromClass:f=`${s}-leave-from`,leaveActiveClass:h=`${s}-leave-active`,leaveToClass:m=`${s}-leave-to`}=t,_=gx(n),p=_&&_[0],C=_&&_[1],{onBeforeEnter:M,onEnter:U,onEnterCancelled:B,onLeave:F,onLeaveCancelled:j,onBeforeAppear:T=M,onAppear:A=U,onAppearCancelled:J=B}=e,ie=(W,he,te,we)=>{W._enterCancelled=we,vn(W,he?u:l),vn(W,he?d:o),te&&te()},ge=(W,he)=>{W._isLeaving=!1,vn(W,f),vn(W,m),vn(W,h),he&&he()},le=W=>(he,te)=>{const we=W?A:U,G=()=>ie(he,W,te);gn(we,[he,G]),oh(()=>{vn(he,W?a:r),wi(he,W?u:l),rh(we)||lh(he,i,p,G)})};return Nt(e,{onBeforeEnter(W){gn(M,[W]),wi(W,r),wi(W,o)},onBeforeAppear(W){gn(T,[W]),wi(W,a),wi(W,d)},onEnter:le(!1),onAppear:le(!0),onLeave(W,he){W._isLeaving=!0;const te=()=>ge(W,he);wi(W,f),W._enterCancelled?(wi(W,h),dh(W)):(dh(W),wi(W,h)),oh(()=>{W._isLeaving&&(vn(W,f),wi(W,m),rh(F)||lh(W,i,C,te))}),gn(F,[W,te])},onEnterCancelled(W){ie(W,!1,void 0,!0),gn(B,[W])},onAppearCancelled(W){ie(W,!0,void 0,!0),gn(J,[W])},onLeaveCancelled(W){ge(W),gn(j,[W])}})}function gx(t){if(t==null)return null;if(dt(t))return[xu(t.enter),xu(t.leave)];{const e=xu(t);return[e,e]}}function xu(t){return x1(t)}function wi(t,e){e.split(/\s+/).forEach(s=>s&&t.classList.add(s)),(t[bo]||(t[bo]=new Set)).add(e)}function vn(t,e){e.split(/\s+/).forEach(i=>i&&t.classList.remove(i));const s=t[bo];s&&(s.delete(e),s.size||(t[bo]=void 0))}function oh(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let vx=0;function lh(t,e,s,i){const n=t._endId=++vx,r=()=>{n===t._endId&&i()};if(s!=null)return setTimeout(r,s);const{type:o,timeout:l,propCount:a}=yx(t,e);if(!o)return i();const d=o+"end";let u=0;const f=()=>{t.removeEventListener(d,h),r()},h=m=>{m.target===t&&++u>=a&&f()};setTimeout(()=>{u<a&&f()},l+1),t.addEventListener(d,h)}function yx(t,e){const s=window.getComputedStyle(t),i=_=>(s[_]||"").split(", "),n=i(`${Ni}Delay`),r=i(`${Ni}Duration`),o=ah(n,r),l=i(`${jr}Delay`),a=i(`${jr}Duration`),d=ah(l,a);let u=null,f=0,h=0;e===Ni?o>0&&(u=Ni,f=o,h=r.length):e===jr?d>0&&(u=jr,f=d,h=a.length):(f=Math.max(o,d),u=f>0?o>d?Ni:jr:null,h=u?u===Ni?r.length:a.length:0);const m=u===Ni&&/\b(?:transform|all)(?:,|$)/.test(i(`${Ni}Property`).toString());return{type:u,timeout:f,propCount:h,hasTransform:m}}function ah(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((s,i)=>uh(s)+uh(t[i])))}function uh(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function dh(t){return(t?t.ownerDocument:document).body.offsetHeight}function bx(t,e,s){const i=t[bo];i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?t.removeAttribute("class"):s?t.setAttribute("class",e):t.className=e}const aa=Symbol("_vod"),Hg=Symbol("_vsh"),at={name:"show",beforeMount(t,{value:e},{transition:s}){t[aa]=t.style.display==="none"?"":t.style.display,s&&e?s.beforeEnter(t):Lr(t,e)},mounted(t,{value:e},{transition:s}){s&&e&&s.enter(t)},updated(t,{value:e,oldValue:s},{transition:i}){!e!=!s&&(i?e?(i.beforeEnter(t),Lr(t,!0),i.enter(t)):i.leave(t,()=>{Lr(t,!1)}):Lr(t,e))},beforeUnmount(t,{value:e}){Lr(t,e)}};function Lr(t,e){t.style.display=e?t[aa]:"none",t[Hg]=!e}const xx=Symbol(""),kx=/(?:^|;)\s*display\s*:/;function wx(t,e,s){const i=t.style,n=_t(s);let r=!1;if(s&&!n){if(e)if(_t(e))for(const o of e.split(";")){const l=o.slice(0,o.indexOf(":")).trim();s[l]==null&&zl(i,l,"")}else for(const o in e)s[o]==null&&zl(i,o,"");for(const o in s)o==="display"&&(r=!0),zl(i,o,s[o])}else if(n){if(e!==s){const o=i[xx];o&&(s+=";"+o),i.cssText=s,r=kx.test(s)}}else e&&t.removeAttribute("style");aa in t&&(t[aa]=r?i.display:"",t[Hg]&&(i.display="none"))}const ch=/\s*!important$/;function zl(t,e,s){if(Ue(s))s.forEach(i=>zl(t,e,i));else if(s==null&&(s=""),e.startsWith("--"))t.setProperty(e,s);else{const i=_x(t,e);ch.test(s)?t.setProperty(Nn(i),s.replace(ch,""),"important"):t[i]=s}}const fh=["Webkit","Moz","ms"],ku={};function _x(t,e){const s=ku[e];if(s)return s;let i=zs(e);if(i!=="filter"&&i in t)return ku[e]=i;i=Oa(i);for(let n=0;n<fh.length;n++){const r=fh[n]+i;if(r in t)return ku[e]=r}return e}const hh="http://www.w3.org/1999/xlink";function ph(t,e,s,i,n,r=A1(e)){i&&e.startsWith("xlink:")?s==null?t.removeAttributeNS(hh,e.slice(6,e.length)):t.setAttributeNS(hh,e,s):s==null||r&&!Em(s)?t.removeAttribute(e):t.setAttribute(e,r?"":Ys(s)?String(s):s)}function mh(t,e,s,i,n){if(e==="innerHTML"||e==="textContent"){s!=null&&(t[e]=e==="innerHTML"?zg(s):s);return}const r=t.tagName;if(e==="value"&&r!=="PROGRESS"&&!r.includes("-")){const l=r==="OPTION"?t.getAttribute("value")||"":t.value,a=s==null?t.type==="checkbox"?"on":"":String(s);(l!==a||!("_value"in t))&&(t.value=a),s==null&&t.removeAttribute(e),t._value=s;return}let o=!1;if(s===""||s==null){const l=typeof t[e];l==="boolean"?s=Em(s):s==null&&l==="string"?(s="",o=!0):l==="number"&&(s=0,o=!0)}try{t[e]=s}catch{}o&&t.removeAttribute(n||e)}function Di(t,e,s,i){t.addEventListener(e,s,i)}function Sx(t,e,s,i){t.removeEventListener(e,s,i)}const gh=Symbol("_vei");function Cx(t,e,s,i,n=null){const r=t[gh]||(t[gh]={}),o=r[e];if(i&&o)o.value=i;else{const[l,a]=Ax(e);if(i){const d=r[e]=Dx(i,n);Di(t,l,d,a)}else o&&(Sx(t,l,o,a),r[e]=void 0)}}const vh=/(?:Once|Passive|Capture)$/;function Ax(t){let e;if(vh.test(t)){e={};let i;for(;i=t.match(vh);)t=t.slice(0,t.length-i[0].length),e[i[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Nn(t.slice(2)),e]}let wu=0;const Vx=Promise.resolve(),Mx=()=>wu||(Vx.then(()=>wu=0),wu=Date.now());function Dx(t,e){const s=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=s.attached)return;Xs(Tx(i,s.value),e,5,[i])};return s.value=t,s.attached=Mx(),s}function Tx(t,e){if(Ue(e)){const s=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{s.call(t),t._stopped=!0},e.map(i=>n=>!n._stopped&&i&&i(n))}else return e}const yh=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,$x=(t,e,s,i,n,r)=>{const o=n==="svg";e==="class"?bx(t,i,o):e==="style"?wx(t,s,i):$a(e)?gc(e)||Cx(t,e,s,i,r):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Ex(t,e,i,o))?(mh(t,e,i),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&ph(t,e,i,o,r,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!_t(i))?mh(t,zs(e),i,r,e):(e==="true-value"?t._trueValue=i:e==="false-value"&&(t._falseValue=i),ph(t,e,i,o))};function Ex(t,e,s,i){if(i)return!!(e==="innerHTML"||e==="textContent"||e in t&&yh(e)&&We(s));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const n=t.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return yh(e)&&_t(s)?!1:e in t}const nn=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Ue(e)?s=>Rl(e,s):e};function Ox(t){t.target.composing=!0}function bh(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Is=Symbol("_assign"),rn={created(t,{modifiers:{lazy:e,trim:s,number:i}},n){t[Is]=nn(n);const r=i||n.props&&n.props.type==="number";Di(t,e?"change":"input",o=>{if(o.target.composing)return;let l=t.value;s&&(l=l.trim()),r&&(l=Zl(l)),t[Is](l)}),s&&Di(t,"change",()=>{t.value=t.value.trim()}),e||(Di(t,"compositionstart",Ox),Di(t,"compositionend",bh),Di(t,"change",bh))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:s,modifiers:{lazy:i,trim:n,number:r}},o){if(t[Is]=nn(o),t.composing)return;const l=(r||t.type==="number")&&!/^0\d/.test(t.value)?Zl(t.value):t.value,a=e??"";l!==a&&(document.activeElement===t&&t.type!=="range"&&(i&&e===s||n&&t.value.trim()===a)||(t.value=a))}},Px={deep:!0,created(t,e,s){t[Is]=nn(s),Di(t,"change",()=>{const i=t._modelValue,n=pr(t),r=t.checked,o=t[Is];if(Ue(i)){const l=bc(i,n),a=l!==-1;if(r&&!a)o(i.concat(n));else if(!r&&a){const d=[...i];d.splice(l,1),o(d)}}else if(Cr(i)){const l=new Set(i);r?l.add(n):l.delete(n),o(l)}else o(qg(t,r))})},mounted:xh,beforeUpdate(t,e,s){t[Is]=nn(s),xh(t,e,s)}};function xh(t,{value:e,oldValue:s},i){t._modelValue=e;let n;if(Ue(e))n=bc(e,i.props.value)>-1;else if(Cr(e))n=e.has(i.props.value);else{if(e===s)return;n=On(e,qg(t,!0))}t.checked!==n&&(t.checked=n)}const jx={created(t,{value:e},s){t.checked=On(e,s.props.value),t[Is]=nn(s),Di(t,"change",()=>{t[Is](pr(t))})},beforeUpdate(t,{value:e,oldValue:s},i){t[Is]=nn(i),e!==s&&(t.checked=On(e,i.props.value))}},Wg={deep:!0,created(t,{value:e,modifiers:{number:s}},i){const n=Cr(e);Di(t,"change",()=>{const r=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>s?Zl(pr(o)):pr(o));t[Is](t.multiple?n?new Set(r):r:r[0]),t._assigning=!0,Dn(()=>{t._assigning=!1})}),t[Is]=nn(i)},mounted(t,{value:e}){kh(t,e)},beforeUpdate(t,e,s){t[Is]=nn(s)},updated(t,{value:e}){t._assigning||kh(t,e)}};function kh(t,e){const s=t.multiple,i=Ue(e);if(!(s&&!i&&!Cr(e))){for(let n=0,r=t.options.length;n<r;n++){const o=t.options[n],l=pr(o);if(s)if(i){const a=typeof l;a==="string"||a==="number"?o.selected=e.some(d=>String(d)===String(l)):o.selected=bc(e,l)>-1}else o.selected=e.has(l);else if(On(pr(o),e)){t.selectedIndex!==n&&(t.selectedIndex=n);return}}!s&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function pr(t){return"_value"in t?t._value:t.value}function qg(t,e){const s=e?"_trueValue":"_falseValue";return s in t?t[s]:e}const Lx={created(t,e,s){fl(t,e,s,null,"created")},mounted(t,e,s){fl(t,e,s,null,"mounted")},beforeUpdate(t,e,s,i){fl(t,e,s,i,"beforeUpdate")},updated(t,e,s,i){fl(t,e,s,i,"updated")}};function Rx(t,e){switch(t){case"SELECT":return Wg;case"TEXTAREA":return rn;default:switch(e){case"checkbox":return Px;case"radio":return jx;default:return rn}}}function fl(t,e,s,i,n){const o=Rx(t.tagName,s.props&&s.props.type)[n];o&&o(t,e,s,i)}const Bx=["ctrl","shift","alt","meta"],Ix={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>Bx.some(s=>t[`${s}Key`]&&!e.includes(s))},Ut=(t,e)=>{const s=t._withMods||(t._withMods={}),i=e.join(".");return s[i]||(s[i]=((n,...r)=>{for(let o=0;o<e.length;o++){const l=Ix[e[o]];if(l&&l(n,e))return}return t(n,...r)}))},Nx=Nt({patchProp:$x},fx);let wh;function Ux(){return wh||(wh=Lb(Nx))}const zx=((...t)=>{const e=Ux().createApp(...t),{mount:s}=e;return e.mount=i=>{const n=Hx(i);if(!n)return;const r=e._component;!We(r)&&!r.render&&!r.template&&(r.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const o=s(n,!1,Fx(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),o},e});function Fx(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Hx(t){return _t(t)?document.querySelector(t):t}const Wx="/framework-logo.png";/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const Gn=typeof document<"u";function Kg(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function qx(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&Kg(t.default)}const rt=Object.assign;function _u(t,e){const s={};for(const i in e){const n=e[i];s[i]=Zs(n)?n.map(t):t(n)}return s}const so=()=>{},Zs=Array.isArray;function _h(t,e){const s={};for(const i in t)s[i]=i in e?e[i]:t[i];return s}const Gg=/#/g,Kx=/&/g,Gx=/\//g,Jx=/=/g,Yx=/\?/g,Jg=/\+/g,Xx=/%5B/g,Zx=/%5D/g,Yg=/%5E/g,Qx=/%60/g,Xg=/%7B/g,ek=/%7C/g,Zg=/%7D/g,tk=/%20/g;function Pc(t){return t==null?"":encodeURI(""+t).replace(ek,"|").replace(Xx,"[").replace(Zx,"]")}function sk(t){return Pc(t).replace(Xg,"{").replace(Zg,"}").replace(Yg,"^")}function pd(t){return Pc(t).replace(Jg,"%2B").replace(tk,"+").replace(Gg,"%23").replace(Kx,"%26").replace(Qx,"`").replace(Xg,"{").replace(Zg,"}").replace(Yg,"^")}function ik(t){return pd(t).replace(Jx,"%3D")}function nk(t){return Pc(t).replace(Gg,"%23").replace(Yx,"%3F")}function rk(t){return nk(t).replace(Gx,"%2F")}function xo(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const ok=/\/$/,lk=t=>t.replace(ok,"");function Su(t,e,s="/"){let i,n={},r="",o="";const l=e.indexOf("#");let a=e.indexOf("?");return a=l>=0&&a>l?-1:a,a>=0&&(i=e.slice(0,a),r=e.slice(a,l>0?l:e.length),n=t(r.slice(1))),l>=0&&(i=i||e.slice(0,l),o=e.slice(l,e.length)),i=ck(i??e,s),{fullPath:i+r+o,path:i,query:n,hash:xo(o)}}function ak(t,e){const s=e.query?t(e.query):"";return e.path+(s&&"?")+s+(e.hash||"")}function Sh(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function uk(t,e,s){const i=e.matched.length-1,n=s.matched.length-1;return i>-1&&i===n&&mr(e.matched[i],s.matched[n])&&Qg(e.params,s.params)&&t(e.query)===t(s.query)&&e.hash===s.hash}function mr(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Qg(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const s in t)if(!dk(t[s],e[s]))return!1;return!0}function dk(t,e){return Zs(t)?Ch(t,e):Zs(e)?Ch(e,t):t===e}function Ch(t,e){return Zs(e)?t.length===e.length&&t.every((s,i)=>s===e[i]):t.length===1&&t[0]===e}function ck(t,e){if(t.startsWith("/"))return t;if(!t)return e;const s=e.split("/"),i=t.split("/"),n=i[i.length-1];(n===".."||n===".")&&i.push("");let r=s.length-1,o,l;for(o=0;o<i.length;o++)if(l=i[o],l!==".")if(l==="..")r>1&&r--;else break;return s.slice(0,r).join("/")+"/"+i.slice(o).join("/")}const Ui={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let md=(function(t){return t.pop="pop",t.push="push",t})({}),Cu=(function(t){return t.back="back",t.forward="forward",t.unknown="",t})({});function fk(t){if(!t)if(Gn){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),lk(t)}const hk=/^[^#]+#/;function pk(t,e){return t.replace(hk,"#")+e}function mk(t,e){const s=document.documentElement.getBoundingClientRect(),i=t.getBoundingClientRect();return{behavior:e.behavior,left:i.left-s.left-(e.left||0),top:i.top-s.top-(e.top||0)}}const Fa=()=>({left:window.scrollX,top:window.scrollY});function gk(t){let e;if("el"in t){const s=t.el,i=typeof s=="string"&&s.startsWith("#"),n=typeof s=="string"?i?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!n)return;e=mk(n,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Ah(t,e){return(history.state?history.state.position-e:-1)+t}const gd=new Map;function vk(t,e){gd.set(t,e)}function yk(t){const e=gd.get(t);return gd.delete(t),e}function bk(t){return typeof t=="string"||t&&typeof t=="object"}function e0(t){return typeof t=="string"||typeof t=="symbol"}let St=(function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t})({});const t0=Symbol("");St.MATCHER_NOT_FOUND+"",St.NAVIGATION_GUARD_REDIRECT+"",St.NAVIGATION_ABORTED+"",St.NAVIGATION_CANCELLED+"",St.NAVIGATION_DUPLICATED+"";function gr(t,e){return rt(new Error,{type:t,[t0]:!0},e)}function _i(t,e){return t instanceof Error&&t0 in t&&(e==null||!!(t.type&e))}const xk=["params","query","hash"];function kk(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const s of xk)s in t&&(e[s]=t[s]);return JSON.stringify(e,null,2)}function wk(t){const e={};if(t===""||t==="?")return e;const s=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<s.length;++i){const n=s[i].replace(Jg," "),r=n.indexOf("="),o=xo(r<0?n:n.slice(0,r)),l=r<0?null:xo(n.slice(r+1));if(o in e){let a=e[o];Zs(a)||(a=e[o]=[a]),a.push(l)}else e[o]=l}return e}function Vh(t){let e="";for(let s in t){const i=t[s];if(s=ik(s),i==null){i!==void 0&&(e+=(e.length?"&":"")+s);continue}(Zs(i)?i.map(n=>n&&pd(n)):[i&&pd(i)]).forEach(n=>{n!==void 0&&(e+=(e.length?"&":"")+s,n!=null&&(e+="="+n))})}return e}function _k(t){const e={};for(const s in t){const i=t[s];i!==void 0&&(e[s]=Zs(i)?i.map(n=>n==null?null:""+n):i==null?i:""+i)}return e}const Sk=Symbol(""),Mh=Symbol(""),Ha=Symbol(""),jc=Symbol(""),vd=Symbol("");function Rr(){let t=[];function e(i){return t.push(i),()=>{const n=t.indexOf(i);n>-1&&t.splice(n,1)}}function s(){t=[]}return{add:e,list:()=>t.slice(),reset:s}}function Hi(t,e,s,i,n,r=o=>o()){const o=i&&(i.enterCallbacks[n]=i.enterCallbacks[n]||[]);return()=>new Promise((l,a)=>{const d=h=>{h===!1?a(gr(St.NAVIGATION_ABORTED,{from:s,to:e})):h instanceof Error?a(h):bk(h)?a(gr(St.NAVIGATION_GUARD_REDIRECT,{from:e,to:h})):(o&&i.enterCallbacks[n]===o&&typeof h=="function"&&o.push(h),l())},u=r(()=>t.call(i&&i.instances[n],e,s,d));let f=Promise.resolve(u);t.length<3&&(f=f.then(d)),f.catch(h=>a(h))})}function Au(t,e,s,i,n=r=>r()){const r=[];for(const o of t)for(const l in o.components){let a=o.components[l];if(!(e!=="beforeRouteEnter"&&!o.instances[l]))if(Kg(a)){const d=(a.__vccOpts||a)[e];d&&r.push(Hi(d,s,i,o,l,n))}else{let d=a();r.push(()=>d.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${l}" at "${o.path}"`);const f=qx(u)?u.default:u;o.mods[l]=u,o.components[l]=f;const h=(f.__vccOpts||f)[e];return h&&Hi(h,s,i,o,l,n)()}))}}return r}function Ck(t,e){const s=[],i=[],n=[],r=Math.max(e.matched.length,t.matched.length);for(let o=0;o<r;o++){const l=e.matched[o];l&&(t.matched.find(d=>mr(d,l))?i.push(l):s.push(l));const a=t.matched[o];a&&(e.matched.find(d=>mr(d,a))||n.push(a))}return[s,i,n]}/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Ak=()=>location.protocol+"//"+location.host;function s0(t,e){const{pathname:s,search:i,hash:n}=e,r=t.indexOf("#");if(r>-1){let o=n.includes(t.slice(r))?t.slice(r).length:1,l=n.slice(o);return l[0]!=="/"&&(l="/"+l),Sh(l,"")}return Sh(s,t)+i+n}function Vk(t,e,s,i){let n=[],r=[],o=null;const l=({state:h})=>{const m=s0(t,location),_=s.value,p=e.value;let C=0;if(h){if(s.value=m,e.value=h,o&&o===_){o=null;return}C=p?h.position-p.position:0}else i(m);n.forEach(M=>{M(s.value,_,{delta:C,type:md.pop,direction:C?C>0?Cu.forward:Cu.back:Cu.unknown})})};function a(){o=s.value}function d(h){n.push(h);const m=()=>{const _=n.indexOf(h);_>-1&&n.splice(_,1)};return r.push(m),m}function u(){if(document.visibilityState==="hidden"){const{history:h}=window;if(!h.state)return;h.replaceState(rt({},h.state,{scroll:Fa()}),"")}}function f(){for(const h of r)h();r=[],window.removeEventListener("popstate",l),window.removeEventListener("pagehide",u),document.removeEventListener("visibilitychange",u)}return window.addEventListener("popstate",l),window.addEventListener("pagehide",u),document.addEventListener("visibilitychange",u),{pauseListeners:a,listen:d,destroy:f}}function Dh(t,e,s,i=!1,n=!1){return{back:t,current:e,forward:s,replaced:i,position:window.history.length,scroll:n?Fa():null}}function Mk(t){const{history:e,location:s}=window,i={value:s0(t,s)},n={value:e.state};n.value||r(i.value,{back:null,current:i.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function r(a,d,u){const f=t.indexOf("#"),h=f>-1?(s.host&&document.querySelector("base")?t:t.slice(f))+a:Ak()+t+a;try{e[u?"replaceState":"pushState"](d,"",h),n.value=d}catch(m){console.error(m),s[u?"replace":"assign"](h)}}function o(a,d){r(a,rt({},e.state,Dh(n.value.back,a,n.value.forward,!0),d,{position:n.value.position}),!0),i.value=a}function l(a,d){const u=rt({},n.value,e.state,{forward:a,scroll:Fa()});r(u.current,u,!0),r(a,rt({},Dh(i.value,a,null),{position:u.position+1},d),!1),i.value=a}return{location:i,state:n,push:l,replace:o}}function Dk(t){t=fk(t);const e=Mk(t),s=Vk(t,e.state,e.location,e.replace);function i(r,o=!0){o||s.pauseListeners(),history.go(r)}const n=rt({location:"",base:t,go:i,createHref:pk.bind(null,t)},e,s);return Object.defineProperty(n,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(n,"state",{enumerable:!0,get:()=>e.state.value}),n}function Tk(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),Dk(t)}let Cn=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t})({});var jt=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t})(jt||{});const $k={type:Cn.Static,value:""},Ek=/[a-zA-Z0-9_]/;function Ok(t){if(!t)return[[]];if(t==="/")return[[$k]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(m){throw new Error(`ERR (${s})/"${d}": ${m}`)}let s=jt.Static,i=s;const n=[];let r;function o(){r&&n.push(r),r=[]}let l=0,a,d="",u="";function f(){d&&(s===jt.Static?r.push({type:Cn.Static,value:d}):s===jt.Param||s===jt.ParamRegExp||s===jt.ParamRegExpEnd?(r.length>1&&(a==="*"||a==="+")&&e(`A repeatable param (${d}) must be alone in its segment. eg: '/:ids+.`),r.push({type:Cn.Param,value:d,regexp:u,repeatable:a==="*"||a==="+",optional:a==="*"||a==="?"})):e("Invalid state to consume buffer"),d="")}function h(){d+=a}for(;l<t.length;){if(a=t[l++],a==="\\"&&s!==jt.ParamRegExp){i=s,s=jt.EscapeNext;continue}switch(s){case jt.Static:a==="/"?(d&&f(),o()):a===":"?(f(),s=jt.Param):h();break;case jt.EscapeNext:h(),s=i;break;case jt.Param:a==="("?s=jt.ParamRegExp:Ek.test(a)?h():(f(),s=jt.Static,a!=="*"&&a!=="?"&&a!=="+"&&l--);break;case jt.ParamRegExp:a===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+a:s=jt.ParamRegExpEnd:u+=a;break;case jt.ParamRegExpEnd:f(),s=jt.Static,a!=="*"&&a!=="?"&&a!=="+"&&l--,u="";break;default:e("Unknown state");break}}return s===jt.ParamRegExp&&e(`Unfinished custom RegExp for param "${d}"`),f(),o(),n}const Th="[^/]+?",Pk={sensitive:!1,strict:!1,start:!0,end:!0};var as=(function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t})(as||{});const jk=/[.+*?^${}()[\]/\\]/g;function Lk(t,e){const s=rt({},Pk,e),i=[];let n=s.start?"^":"";const r=[];for(const d of t){const u=d.length?[]:[as.Root];s.strict&&!d.length&&(n+="/");for(let f=0;f<d.length;f++){const h=d[f];let m=as.Segment+(s.sensitive?as.BonusCaseSensitive:0);if(h.type===Cn.Static)f||(n+="/"),n+=h.value.replace(jk,"\\$&"),m+=as.Static;else if(h.type===Cn.Param){const{value:_,repeatable:p,optional:C,regexp:M}=h;r.push({name:_,repeatable:p,optional:C});const U=M||Th;if(U!==Th){m+=as.BonusCustomRegExp;try{`${U}`}catch(F){throw new Error(`Invalid custom RegExp for param "${_}" (${U}): `+F.message)}}let B=p?`((?:${U})(?:/(?:${U}))*)`:`(${U})`;f||(B=C&&d.length<2?`(?:/${B})`:"/"+B),C&&(B+="?"),n+=B,m+=as.Dynamic,C&&(m+=as.BonusOptional),p&&(m+=as.BonusRepeatable),U===".*"&&(m+=as.BonusWildcard)}u.push(m)}i.push(u)}if(s.strict&&s.end){const d=i.length-1;i[d][i[d].length-1]+=as.BonusStrict}s.strict||(n+="/?"),s.end?n+="$":s.strict&&!n.endsWith("/")&&(n+="(?:/|$)");const o=new RegExp(n,s.sensitive?"":"i");function l(d){const u=d.match(o),f={};if(!u)return null;for(let h=1;h<u.length;h++){const m=u[h]||"",_=r[h-1];f[_.name]=m&&_.repeatable?m.split("/"):m}return f}function a(d){let u="",f=!1;for(const h of t){(!f||!u.endsWith("/"))&&(u+="/"),f=!1;for(const m of h)if(m.type===Cn.Static)u+=m.value;else if(m.type===Cn.Param){const{value:_,repeatable:p,optional:C}=m,M=_ in d?d[_]:"";if(Zs(M)&&!p)throw new Error(`Provided param "${_}" is an array but it is not repeatable (* or + modifiers)`);const U=Zs(M)?M.join("/"):M;if(!U)if(C)h.length<2&&(u.endsWith("/")?u=u.slice(0,-1):f=!0);else throw new Error(`Missing required param "${_}"`);u+=U}}return u||"/"}return{re:o,score:i,keys:r,parse:l,stringify:a}}function Rk(t,e){let s=0;for(;s<t.length&&s<e.length;){const i=e[s]-t[s];if(i)return i;s++}return t.length<e.length?t.length===1&&t[0]===as.Static+as.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===as.Static+as.Segment?1:-1:0}function i0(t,e){let s=0;const i=t.score,n=e.score;for(;s<i.length&&s<n.length;){const r=Rk(i[s],n[s]);if(r)return r;s++}if(Math.abs(n.length-i.length)===1){if($h(i))return 1;if($h(n))return-1}return n.length-i.length}function $h(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const Bk={strict:!1,end:!0,sensitive:!1};function Ik(t,e,s){const i=Lk(Ok(t.path),s),n=rt(i,{record:t,parent:e,children:[],alias:[]});return e&&!n.record.aliasOf==!e.record.aliasOf&&e.children.push(n),n}function Nk(t,e){const s=[],i=new Map;e=_h(Bk,e);function n(f){return i.get(f)}function r(f,h,m){const _=!m,p=Oh(f);p.aliasOf=m&&m.record;const C=_h(e,f),M=[p];if("alias"in f){const F=typeof f.alias=="string"?[f.alias]:f.alias;for(const j of F)M.push(Oh(rt({},p,{components:m?m.record.components:p.components,path:j,aliasOf:m?m.record:p})))}let U,B;for(const F of M){const{path:j}=F;if(h&&j[0]!=="/"){const T=h.record.path,A=T[T.length-1]==="/"?"":"/";F.path=h.record.path+(j&&A+j)}if(U=Ik(F,h,C),m?m.alias.push(U):(B=B||U,B!==U&&B.alias.push(U),_&&f.name&&!Ph(U)&&o(f.name)),n0(U)&&a(U),p.children){const T=p.children;for(let A=0;A<T.length;A++)r(T[A],U,m&&m.children[A])}m=m||U}return B?()=>{o(B)}:so}function o(f){if(e0(f)){const h=i.get(f);h&&(i.delete(f),s.splice(s.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=s.indexOf(f);h>-1&&(s.splice(h,1),f.record.name&&i.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function l(){return s}function a(f){const h=Fk(f,s);s.splice(h,0,f),f.record.name&&!Ph(f)&&i.set(f.record.name,f)}function d(f,h){let m,_={},p,C;if("name"in f&&f.name){if(m=i.get(f.name),!m)throw gr(St.MATCHER_NOT_FOUND,{location:f});C=m.record.name,_=rt(Eh(h.params,m.keys.filter(B=>!B.optional).concat(m.parent?m.parent.keys.filter(B=>B.optional):[]).map(B=>B.name)),f.params&&Eh(f.params,m.keys.map(B=>B.name))),p=m.stringify(_)}else if(f.path!=null)p=f.path,m=s.find(B=>B.re.test(p)),m&&(_=m.parse(p),C=m.record.name);else{if(m=h.name?i.get(h.name):s.find(B=>B.re.test(h.path)),!m)throw gr(St.MATCHER_NOT_FOUND,{location:f,currentLocation:h});C=m.record.name,_=rt({},h.params,f.params),p=m.stringify(_)}const M=[];let U=m;for(;U;)M.unshift(U.record),U=U.parent;return{name:C,path:p,params:_,matched:M,meta:zk(M)}}t.forEach(f=>r(f));function u(){s.length=0,i.clear()}return{addRoute:r,resolve:d,removeRoute:o,clearRoutes:u,getRoutes:l,getRecordMatcher:n}}function Eh(t,e){const s={};for(const i of e)i in t&&(s[i]=t[i]);return s}function Oh(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:Uk(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function Uk(t){const e={},s=t.props||!1;if("component"in t)e.default=s;else for(const i in t.components)e[i]=typeof s=="object"?s[i]:s;return e}function Ph(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function zk(t){return t.reduce((e,s)=>rt(e,s.meta),{})}function Fk(t,e){let s=0,i=e.length;for(;s!==i;){const r=s+i>>1;i0(t,e[r])<0?i=r:s=r+1}const n=Hk(t);return n&&(i=e.lastIndexOf(n,i-1)),i}function Hk(t){let e=t;for(;e=e.parent;)if(n0(e)&&i0(t,e)===0)return e}function n0({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function jh(t){const e=Js(Ha),s=Js(jc),i=re(()=>{const a=lt(t.to);return e.resolve(a)}),n=re(()=>{const{matched:a}=i.value,{length:d}=a,u=a[d-1],f=s.matched;if(!u||!f.length)return-1;const h=f.findIndex(mr.bind(null,u));if(h>-1)return h;const m=Lh(a[d-2]);return d>1&&Lh(u)===m&&f[f.length-1].path!==m?f.findIndex(mr.bind(null,a[d-2])):h}),r=re(()=>n.value>-1&&Jk(s.params,i.value.params)),o=re(()=>n.value>-1&&n.value===s.matched.length-1&&Qg(s.params,i.value.params));function l(a={}){if(Gk(a)){const d=e[lt(t.replace)?"replace":"push"](lt(t.to)).catch(so);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>d),d}return Promise.resolve()}return{route:i,href:re(()=>i.value.href),isActive:r,isExactActive:o,navigate:l}}function Wk(t){return t.length===1?t[0]:t}const qk=hg({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:jh,setup(t,{slots:e}){const s=qs(jh(t)),{options:i}=Js(Ha),n=re(()=>({[Rh(t.activeClass,i.linkActiveClass,"router-link-active")]:s.isActive,[Rh(t.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const r=e.default&&Wk(e.default(s));return t.custom?r:Tt("a",{"aria-current":s.isExactActive?t.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:n.value},r)}}}),Kk=qk;function Gk(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function Jk(t,e){for(const s in e){const i=e[s],n=t[s];if(typeof i=="string"){if(i!==n)return!1}else if(!Zs(n)||n.length!==i.length||i.some((r,o)=>r!==n[o]))return!1}return!0}function Lh(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Rh=(t,e,s)=>t??e??s,Yk=hg({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:s}){const i=Js(vd),n=re(()=>t.route||i.value),r=Js(Mh,0),o=re(()=>{let d=lt(r);const{matched:u}=n.value;let f;for(;(f=u[d])&&!f.components;)d++;return d}),l=re(()=>n.value.matched[o.value]);Il(Mh,re(()=>o.value+1)),Il(Sk,l),Il(vd,n);const a=ce();return He(()=>[a.value,l.value,t.name],([d,u,f],[h,m,_])=>{u&&(u.instances[f]=d,m&&m!==u&&d&&d===h&&(u.leaveGuards.size||(u.leaveGuards=m.leaveGuards),u.updateGuards.size||(u.updateGuards=m.updateGuards))),d&&u&&(!m||!mr(u,m)||!h)&&(u.enterCallbacks[f]||[]).forEach(p=>p(d))},{flush:"post"}),()=>{const d=n.value,u=t.name,f=l.value,h=f&&f.components[u];if(!h)return Bh(s.default,{Component:h,route:d});const m=f.props[u],_=m?m===!0?d.params:typeof m=="function"?m(d):m:null,C=Tt(h,rt({},_,e,{onVnodeUnmounted:M=>{M.component.isUnmounted&&(f.instances[u]=null)},ref:a}));return Bh(s.default,{Component:C,route:d})||C}}});function Bh(t,e){if(!t)return null;const s=t(e);return s.length===1?s[0]:s}const Xk=Yk;function Zk(t){const e=Nk(t.routes,t),s=t.parseQuery||wk,i=t.stringifyQuery||Vh,n=t.history,r=Rr(),o=Rr(),l=Rr(),a=J1(Ui);let d=Ui;Gn&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=_u.bind(null,N=>""+N),f=_u.bind(null,rk),h=_u.bind(null,xo);function m(N,Q){let xe,ve;return e0(N)?(xe=e.getRecordMatcher(N),ve=Q):ve=N,e.addRoute(ve,xe)}function _(N){const Q=e.getRecordMatcher(N);Q&&e.removeRoute(Q)}function p(){return e.getRoutes().map(N=>N.record)}function C(N){return!!e.getRecordMatcher(N)}function M(N,Q){if(Q=rt({},Q||a.value),typeof N=="string"){const K=Su(s,N,Q.path),V=e.resolve({path:K.path},Q),ae=n.createHref(K.fullPath);return rt(K,V,{params:h(V.params),hash:xo(K.hash),redirectedFrom:void 0,href:ae})}let xe;if(N.path!=null)xe=rt({},N,{path:Su(s,N.path,Q.path).path});else{const K=rt({},N.params);for(const V in K)K[V]==null&&delete K[V];xe=rt({},N,{params:f(K)}),Q.params=f(Q.params)}const ve=e.resolve(xe,Q),qe=N.hash||"";ve.params=u(h(ve.params));const D=ak(i,rt({},N,{hash:sk(qe),path:ve.path})),P=n.createHref(D);return rt({fullPath:D,hash:qe,query:i===Vh?_k(N.query):N.query||{}},ve,{redirectedFrom:void 0,href:P})}function U(N){return typeof N=="string"?Su(s,N,a.value.path):rt({},N)}function B(N,Q){if(d!==N)return gr(St.NAVIGATION_CANCELLED,{from:Q,to:N})}function F(N){return A(N)}function j(N){return F(rt(U(N),{replace:!0}))}function T(N,Q){const xe=N.matched[N.matched.length-1];if(xe&&xe.redirect){const{redirect:ve}=xe;let qe=typeof ve=="function"?ve(N,Q):ve;return typeof qe=="string"&&(qe=qe.includes("?")||qe.includes("#")?qe=U(qe):{path:qe},qe.params={}),rt({query:N.query,hash:N.hash,params:qe.path!=null?{}:N.params},qe)}}function A(N,Q){const xe=d=M(N),ve=a.value,qe=N.state,D=N.force,P=N.replace===!0,K=T(xe,ve);if(K)return A(rt(U(K),{state:typeof K=="object"?rt({},qe,K.state):qe,force:D,replace:P}),Q||xe);const V=xe;V.redirectedFrom=Q;let ae;return!D&&uk(i,ve,xe)&&(ae=gr(St.NAVIGATION_DUPLICATED,{to:V,from:ve}),Pe(ve,ve,!0,!1)),(ae?Promise.resolve(ae):ge(V,ve)).catch(oe=>_i(oe)?_i(oe,St.NAVIGATION_GUARD_REDIRECT)?oe:$(oe):se(oe,V,ve)).then(oe=>{if(oe){if(_i(oe,St.NAVIGATION_GUARD_REDIRECT))return A(rt({replace:P},U(oe.to),{state:typeof oe.to=="object"?rt({},qe,oe.to.state):qe,force:D}),Q||V)}else oe=W(V,ve,!0,P,qe);return le(V,ve,oe),oe})}function J(N,Q){const xe=B(N,Q);return xe?Promise.reject(xe):Promise.resolve()}function ie(N){const Q=S.values().next().value;return Q&&typeof Q.runWithContext=="function"?Q.runWithContext(N):N()}function ge(N,Q){let xe;const[ve,qe,D]=Ck(N,Q);xe=Au(ve.reverse(),"beforeRouteLeave",N,Q);for(const K of ve)K.leaveGuards.forEach(V=>{xe.push(Hi(V,N,Q))});const P=J.bind(null,N,Q);return xe.push(P),H(xe).then(()=>{xe=[];for(const K of r.list())xe.push(Hi(K,N,Q));return xe.push(P),H(xe)}).then(()=>{xe=Au(qe,"beforeRouteUpdate",N,Q);for(const K of qe)K.updateGuards.forEach(V=>{xe.push(Hi(V,N,Q))});return xe.push(P),H(xe)}).then(()=>{xe=[];for(const K of D)if(K.beforeEnter)if(Zs(K.beforeEnter))for(const V of K.beforeEnter)xe.push(Hi(V,N,Q));else xe.push(Hi(K.beforeEnter,N,Q));return xe.push(P),H(xe)}).then(()=>(N.matched.forEach(K=>K.enterCallbacks={}),xe=Au(D,"beforeRouteEnter",N,Q,ie),xe.push(P),H(xe))).then(()=>{xe=[];for(const K of o.list())xe.push(Hi(K,N,Q));return xe.push(P),H(xe)}).catch(K=>_i(K,St.NAVIGATION_CANCELLED)?K:Promise.reject(K))}function le(N,Q,xe){l.list().forEach(ve=>ie(()=>ve(N,Q,xe)))}function W(N,Q,xe,ve,qe){const D=B(N,Q);if(D)return D;const P=Q===Ui,K=Gn?history.state:{};xe&&(ve||P?n.replace(N.fullPath,rt({scroll:P&&K&&K.scroll},qe)):n.push(N.fullPath,qe)),a.value=N,Pe(N,Q,xe,P),$()}let he;function te(){he||(he=n.listen((N,Q,xe)=>{if(!v.listening)return;const ve=M(N),qe=T(ve,v.currentRoute.value);if(qe){A(rt(qe,{replace:!0,force:!0}),ve).catch(so);return}d=ve;const D=a.value;Gn&&vk(Ah(D.fullPath,xe.delta),Fa()),ge(ve,D).catch(P=>_i(P,St.NAVIGATION_ABORTED|St.NAVIGATION_CANCELLED)?P:_i(P,St.NAVIGATION_GUARD_REDIRECT)?(A(rt(U(P.to),{force:!0}),ve).then(K=>{_i(K,St.NAVIGATION_ABORTED|St.NAVIGATION_DUPLICATED)&&!xe.delta&&xe.type===md.pop&&n.go(-1,!1)}).catch(so),Promise.reject()):(xe.delta&&n.go(-xe.delta,!1),se(P,ve,D))).then(P=>{P=P||W(ve,D,!1),P&&(xe.delta&&!_i(P,St.NAVIGATION_CANCELLED)?n.go(-xe.delta,!1):xe.type===md.pop&&_i(P,St.NAVIGATION_ABORTED|St.NAVIGATION_DUPLICATED)&&n.go(-1,!1)),le(ve,D,P)}).catch(so)}))}let we=Rr(),G=Rr(),X;function se(N,Q,xe){$(N);const ve=G.list();return ve.length?ve.forEach(qe=>qe(N,Q,xe)):console.error(N),Promise.reject(N)}function Re(){return X&&a.value!==Ui?Promise.resolve():new Promise((N,Q)=>{we.add([N,Q])})}function $(N){return X||(X=!N,te(),we.list().forEach(([Q,xe])=>N?xe(N):Q()),we.reset()),N}function Pe(N,Q,xe,ve){const{scrollBehavior:qe}=t;if(!Gn||!qe)return Promise.resolve();const D=!xe&&yk(Ah(N.fullPath,0))||(ve||!xe)&&history.state&&history.state.scroll||null;return Dn().then(()=>qe(N,Q,D)).then(P=>P&&gk(P)).catch(P=>se(P,N,Q))}const Le=N=>n.go(N);let Z;const S=new Set,v={currentRoute:a,listening:!0,addRoute:m,removeRoute:_,clearRoutes:e.clearRoutes,hasRoute:C,getRoutes:p,resolve:M,options:t,push:F,replace:j,go:Le,back:()=>Le(-1),forward:()=>Le(1),beforeEach:r.add,beforeResolve:o.add,afterEach:l.add,onError:G.add,isReady:Re,install(N){N.component("RouterLink",Kk),N.component("RouterView",Xk),N.config.globalProperties.$router=v,Object.defineProperty(N.config.globalProperties,"$route",{enumerable:!0,get:()=>lt(a)}),Gn&&!Z&&a.value===Ui&&(Z=!0,F(n.location).catch(ve=>{}));const Q={};for(const ve in Ui)Object.defineProperty(Q,ve,{get:()=>a.value[ve],enumerable:!0});N.provide(Ha,v),N.provide(jc,Jm(Q)),N.provide(vd,a);const xe=N.unmount;S.add(N),N.unmount=function(){S.delete(N),S.size<1&&(d=Ui,he&&he(),he=null,a.value=Ui,Z=!1,X=!1),xe()}}};function H(N){return N.reduce((Q,xe)=>Q.then(()=>ie(xe)),Promise.resolve())}return v}function Wa(){return Js(Ha)}function Vr(t){return Js(jc)}const Si=ce(!1);function Qk(){const t=()=>{Si.value=!Si.value},e=()=>{Si.value=!0},s=()=>{Si.value=!1};return He(Si,i=>{i?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},{immediate:!1}),ss(()=>{const i=localStorage.getItem("theme");i?Si.value=i==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches&&(Si.value=!0),Si.value?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}),{isDark:Si,toggle:t,enable:e,disable:s}}function e2(t,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 13.5V3.75m0 9.75a1.5 1.5 0 0 1 0 3m0-3a1.5 1.5 0 0 0 0 3m0 3.75V16.5m12-3V3.75m0 9.75a1.5 1.5 0 0 1 0 3m0-3a1.5 1.5 0 0 0 0 3m0 3.75V16.5m-6-9V3.75m0 3.75a1.5 1.5 0 0 1 0 3m0-3a1.5 1.5 0 0 0 0 3m0 9.75V10.5"})])}function t2(t,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function s2(t,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})])}function i2(t,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125"})])}function Lc(t,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}function Rc(t,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"})])}function n2(t,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.125 2.25h-4.5c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125v-9M10.125 2.25h.375a9 9 0 0 1 9 9v.375M10.125 2.25A3.375 3.375 0 0 1 13.5 5.625v1.5c0 .621.504 1.125 1.125 1.125h1.5a3.375 3.375 0 0 1 3.375 3.375M9 15l2.25 2.25L15 12"})])}function yd(t,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}function r2(t,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})])}function o2(t,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"})])}function l2(t,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}function ua(t,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"})])}function qa(t,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"})])}function r0(t,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"})])}function a2(t,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})])}function u2(t,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5.25 14.25h13.5m-13.5 0a3 3 0 0 1-3-3m3 3a3 3 0 1 0 0 6h13.5a3 3 0 1 0 0-6m-16.5-3a3 3 0 0 1 3-3h13.5a3 3 0 0 1 3 3m-19.5 0a4.5 4.5 0 0 1 .9-2.7L5.737 5.1a3.375 3.375 0 0 1 2.7-1.35h7.126c1.062 0 2.062.5 2.7 1.35l2.587 3.45a4.5 4.5 0 0 1 .9 2.7m0 0a3 3 0 0 1-3 3m0 3h.008v.008h-.008v-.008Zm0-6h.008v.008h-.008v-.008Zm-3 6h.008v.008h-.008v-.008Zm0-6h.008v.008h-.008v-.008Z"})])}function d2(t,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"})])}function c2(t,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}const f2={key:0,class:"pointer-events-auto w-full max-w-sm rounded-lg bg-white shadow-lg outline-1 outline-black/5 dark:bg-gray-800 dark:-outline-offset-1 dark:outline-white/10"},h2={class:"p-4"},p2={key:0,class:"shrink-0"},m2={key:0,class:"w-0 flex-1 text-sm font-medium text-gray-900 dark:text-white"},g2={class:"text-sm font-medium text-gray-900 dark:text-white"},v2={key:0,class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},y2={__name:"Toast",props:{title:{type:String,required:!0},description:{type:String,default:null},type:{type:String,default:"success",validator:t=>["success","error","warning","info"].includes(t)},variant:{type:String,default:"regular",validator:t=>["regular","condensed"].includes(t)},action:{type:String,default:null},duration:{type:Number,default:5e3},autoClose:{type:Boolean,default:!0}},emits:["close","action"],setup(t,{emit:e}){const s=t,i=e,n=ce(!1);let r=null;const o=re(()=>{const d={success:t2,error:c2,warning:r2,info:qa},u={success:"text-sky-400",error:"text-red-400",warning:"text-yellow-400",info:"text-blue-400"},f=d[s.type],h=u[s.type];return()=>Tt(f,{class:`size-6 ${h}`})}),l=()=>{n.value=!1,r&&clearTimeout(r),setTimeout(()=>i("close"),200)},a=()=>{i("action"),l()};return ss(()=>{n.value=!0,s.autoClose&&s.duration>0&&(r=setTimeout(l,s.duration))}),He(()=>s.duration,d=>{r&&clearTimeout(r),s.autoClose&&d>0&&(r=setTimeout(l,d))}),(d,u)=>(g(),me(Oc,{"enter-active-class":"transform transition duration-300 ease-out","enter-from-class":"translate-y-2 opacity-0 sm:translate-x-2 sm:translate-y-0","enter-to-class":"translate-y-0 opacity-100 sm:translate-x-0","leave-active-class":"transition duration-200 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:R(()=>[n.value?(g(),b("div",f2,[c("div",h2,[c("div",{class:Te(t.variant==="condensed"?"flex items-center":"flex items-start")},[t.variant==="regular"?(g(),b("div",p2,[(g(),me(Cs(o.value),{class:"size-6"}))])):I("",!0),c("div",{class:Te([t.variant==="regular"?"ml-3 w-0 flex-1 pt-0.5":"flex w-0 flex-1 justify-between"])},[t.variant==="condensed"?(g(),b("p",m2,z(t.title),1)):(g(),b(ee,{key:1},[c("p",g2,z(t.title),1),t.description?(g(),b("p",v2,z(t.description),1)):I("",!0)],64)),t.variant==="condensed"&&t.action?(g(),b("button",{key:2,type:"button",onClick:a,class:"ml-3 shrink-0 rounded-md bg-white text-sm font-medium text-sky-600 hover:text-sky-500 focus:outline-2 focus:outline-offset-2 focus:outline-sky-500 dark:bg-gray-800 dark:text-sky-400 dark:hover:text-sky-300 dark:focus:outline-sky-400"},z(t.action),1)):I("",!0)],2),c("div",{class:"ml-4 flex shrink-0"},[c("button",{type:"button",onClick:l,class:"inline-flex rounded-md text-gray-400 hover:text-gray-500 focus:outline-2 focus:outline-offset-2 focus:outline-sky-600 dark:hover:text-white dark:focus:outline-sky-500"},[...u[0]||(u[0]=[c("span",{class:"sr-only"},"Close",-1),c("svg",{viewBox:"0 0 20 20",fill:"currentColor",class:"size-5"},[c("path",{d:"M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z"})],-1)])])])],2)])])):I("",!0)]),_:1}))}},b2={"aria-live":"assertive",class:"pointer-events-none fixed inset-0 flex items-end px-4 py-6 sm:items-start sm:p-6 z-50"},x2={class:"flex w-full flex-col items-center space-y-4 sm:items-end"},k2={__name:"ToastContainer",setup(t,{expose:e}){const s=ce([]);let i=1;const n=a=>{const d={id:i++,title:a.title,description:a.description||null,type:a.type||"success",variant:a.variant||"regular",action:a.action||null,duration:a.duration!==void 0?a.duration:5e3,autoClose:a.autoClose!==void 0?a.autoClose:!0,onAction:a.onAction||null};return s.value.push(d),d.id},r=a=>{const d=s.value.findIndex(u=>u.id===a);d>-1&&s.value.splice(d,1)},o=a=>{a.onAction&&a.onAction()};return e({addToast:n,removeToast:r,clearAll:()=>{s.value=[]}}),(a,d)=>(g(),me(og,{to:"body"},[c("div",b2,[c("div",x2,[(g(!0),b(ee,null,ke(s.value,u=>(g(),me(y2,{key:u.id,title:u.title,description:u.description,type:u.type,variant:u.variant,action:u.action,duration:u.duration,"auto-close":u.autoClose,onClose:f=>r(u.id),onAction:f=>o(u)},null,8,["title","description","type","variant","action","duration","auto-close","onClose","onAction"]))),128))])])]))}};let xn=null;function w2(t){xn=t}function Ka(){const t=l=>{if(!xn){console.warn('ToastContainer not initialized. Add <ToastContainer ref="toastContainer" /> to your App.vue');return}return xn.addToast(l)};return{show:t,success:(l,a=null,d={})=>t({title:l,description:a,type:"success",...d}),error:(l,a=null,d={})=>t({title:l,description:a,type:"error",...d}),warning:(l,a=null,d={})=>t({title:l,description:a,type:"warning",...d}),info:(l,a=null,d={})=>t({title:l,description:a,type:"info",...d}),remove:l=>{xn&&xn.removeToast(l)},clearAll:()=>{xn&&xn.clearAll()}}}const _2={class:"flex min-h-screen bg-white dark:bg-zinc-900"},S2={class:"hidden lg:fixed lg:inset-y-0 lg:z-50 lg:flex lg:w-72 lg:flex-col xl:w-80"},C2={class:"flex grow flex-col overflow-y-auto border-r border-zinc-900/10 px-6 pb-8 pt-4 dark:border-white/10"},A2={key:0,class:"mt-6"},V2={class:"mt-10"},M2={role:"list"},D2={class:"relative mt-6"},T2={class:"relative mt-3 pl-2"},$2={role:"list",class:"border-l border-transparent"},E2={class:"truncate"},O2={key:0,class:"relative mt-6"},P2={class:"relative mt-3 pl-2"},j2={role:"list",class:"border-l border-transparent"},L2={class:"truncate"},R2={key:0,class:"text-xs text-zinc-400 dark:text-zinc-500"},B2={class:"sticky bottom-0 mt-6 border-t border-zinc-900/10 pt-6 dark:border-white/10"},I2={class:"lg:pl-72 xl:pl-80 w-full"},N2={class:"h-screen overflow-auto"},U2={__name:"App",setup(t){const e=ce(null),s=Vr(),{isDark:i,toggle:n}=Qk(),r=ce([]),o=h=>f.findIndex(_=>_.to==="/projects"&&s.path==="/projects/new"?!1:s.path.startsWith(_.to)),l=()=>r.value.findIndex(h=>s.path===`/project/${h.id}`),a=h=>h.to==="/projects"&&s.path==="/projects/new"?!1:s.path.startsWith(h.to),d=()=>Tt("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[Tt("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})]),u=()=>Tt("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[Tt("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})]),f=[{id:"projects",label:"Projects",to:"/projects"},{id:"settings",label:"New Project Defaults",to:"/settings"}];return ss(async()=>{w2(e.value);try{const m=await(await fetch("/api/settings/get")).json();r.value=m.projects||[]}catch(h){console.error("Failed to load projects:",h)}}),(h,m)=>{const _=na("router-link"),p=na("router-view");return g(),b("div",_2,[c("div",S2,[c("div",C2,[k(_,{to:"/",class:"flex items-center gap-3"},{default:R(()=>[...m[1]||(m[1]=[c("img",{src:Wx,alt:"Framework",class:"h-10 w-10"},null,-1),c("span",{class:"text-lg font-semibold text-zinc-900 dark:text-white"},"Framework",-1)])]),_:1}),h.$route.path!=="/projects/new"?(g(),b("div",A2,[k(_,{to:"/projects/new",class:"flex w-full items-center justify-center gap-2 rounded-lg bg-white px-4 py-2.5 text-sm font-medium text-zinc-900 ring-1 ring-zinc-900/10 transition hover:bg-zinc-50 hover:ring-zinc-900/20 dark:bg-white/5 dark:text-white dark:ring-white/10 dark:hover:bg-white/10"},{default:R(()=>[...m[2]||(m[2]=[c("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),ne(" New Project ",-1)])]),_:1})])):I("",!0),c("nav",V2,[c("ul",M2,[c("li",D2,[m[4]||(m[4]=c("h2",{class:"text-xs font-semibold text-zinc-900 dark:text-white"}," Framework ",-1)),c("div",T2,[m[3]||(m[3]=c("div",{class:"absolute inset-y-0 left-2 w-px bg-zinc-900/10 dark:bg-white/5"},null,-1)),o()>=0?(g(),b("div",{key:0,class:"absolute left-2 h-6 w-px bg-sky-500 transition-all duration-200",style:co({top:`${o()*32+4}px`})},null,4)):I("",!0),c("ul",$2,[(g(),b(ee,null,ke(f,C=>c("li",{key:C.id,class:"relative"},[k(_,{to:C.to,class:Te(["flex justify-between gap-2 py-1 pl-4 pr-3 text-sm transition",a(C)?"text-zinc-900 dark:text-white":"text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white"])},{default:R(()=>[c("span",E2,z(C.label),1)]),_:2},1032,["to","class"])])),64))])])]),r.value.length>0?(g(),b("li",O2,[m[6]||(m[6]=c("h2",{class:"text-xs font-semibold text-zinc-900 dark:text-white"}," Your Projects ",-1)),c("div",P2,[m[5]||(m[5]=c("div",{class:"absolute inset-y-0 left-2 w-px bg-zinc-900/10 dark:bg-white/5"},null,-1)),l()>=0?(g(),b("div",{key:0,class:"absolute left-2 h-6 w-px bg-sky-500 transition-all duration-200",style:co({top:`${l()*32+4}px`})},null,4)):I("",!0),c("ul",j2,[(g(!0),b(ee,null,ke(r.value,C=>(g(),b("li",{key:C.id,class:"relative"},[k(_,{to:`/project/${C.id}`,class:Te(["flex justify-between gap-2 py-1 pl-4 pr-3 text-sm transition",h.$route.path===`/project/${C.id}`?"text-zinc-900 dark:text-white":"text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white"])},{default:R(()=>[c("span",L2,z(C.name),1),C.type?(g(),b("span",R2,z(C.type==="project"?"":C.type==="course"?"":""),1)):I("",!0)]),_:2},1032,["to","class"])]))),128))])])])):I("",!0),c("li",B2,[c("button",{onClick:m[0]||(m[0]=(...C)=>lt(n)&&lt(n)(...C)),class:"flex w-full items-center gap-3 text-sm text-zinc-600 transition hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white"},[(g(),me(Cs(lt(i)?u:d),{class:"h-5 w-5 shrink-0"})),ne(" "+z(lt(i)?"Light Mode":"Dark Mode"),1)])])])])])]),c("div",I2,[c("main",N2,[k(p)])]),k(k2,{ref_key:"toastContainer",ref:e},null,512)])}}},z2={key:0,class:"flex items-center justify-center py-12"},F2={key:1,class:"max-w-4xl prose prose-slate dark:prose-invert"},H2={class:"not-prose mb-8"},W2={class:"flex items-center gap-3 mb-2"},q2={class:"px-3 py-1 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded text-sm font-medium"},K2={class:"text-4xl font-bold text-slate-900 dark:text-white mb-4"},G2={class:"text-lg text-slate-600 dark:text-slate-400"},J2={class:"not-prose mb-8"},Y2={class:"bg-slate-900 dark:bg-slate-950 rounded-lg p-4 overflow-x-auto"},X2={class:"text-sm text-slate-100"},Z2={key:0,class:"not-prose mb-8"},Q2={class:"space-y-4"},ew={class:"flex items-baseline gap-2 mb-1"},tw={class:"text-base font-mono font-semibold text-slate-900 dark:text-white"},sw={class:"text-sm text-slate-500 dark:text-slate-400"},iw={key:0,class:"text-xs text-red-600 dark:text-red-400 font-medium"},nw={key:1,class:"text-xs text-slate-500 dark:text-slate-400"},rw={class:"text-sm text-slate-600 dark:text-slate-400"},ow={class:"not-prose mb-8"},lw={class:"text-slate-700 dark:text-slate-300"},aw={key:1,class:"not-prose mb-8"},uw={class:"text-slate-700 dark:text-slate-300 whitespace-pre-line"},dw={key:2,class:"not-prose mb-8"},cw={class:"space-y-6"},fw={class:"bg-slate-900 dark:bg-slate-950 rounded-lg p-4 overflow-x-auto mb-2"},hw={class:"text-sm text-slate-100"},pw={class:"text-sm text-slate-600 dark:text-slate-400"},mw={key:3,class:"not-prose mb-8"},gw={class:"space-y-2"},vw={class:"text-indigo-600 dark:text-indigo-400 font-mono font-semibold"},yw={class:"text-slate-700 dark:text-slate-300"},bw={key:4,class:"not-prose mb-8"},xw={class:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4"},kw={class:"list-disc list-inside space-y-1 text-sm text-amber-800 dark:text-amber-300"},ww={key:5,class:"not-prose"},_w={class:"flex items-center gap-2 flex-wrap"},Sw={key:2,class:"text-center py-12"},Cw={__name:"DocViewer",props:{functionName:{type:String,required:!0}},setup(t){const e=t,s=ce(null),i=ce(!0),n=async()=>{i.value=!0;try{const r=await fetch(`/docs/${e.functionName}.json`);r.ok?s.value=await r.json():s.value=null}catch(r){console.error("Failed to load documentation:",r),s.value=null}finally{i.value=!1}};return He(()=>e.functionName,n),ss(n),(r,o)=>i.value?(g(),b("div",z2,[...o[0]||(o[0]=[c("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"},null,-1)])])):s.value?(g(),b("div",F2,[c("div",H2,[c("div",W2,[c("span",q2,z(s.value.category),1)]),c("h1",K2,z(s.value.title),1),c("p",G2,z(s.value.description),1)]),c("div",J2,[o[1]||(o[1]=c("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white mb-4"},"Usage",-1)),c("div",Y2,[c("pre",X2,[c("code",null,z(s.value.usage),1)])])]),s.value.params&&s.value.params.length>0?(g(),b("div",Z2,[o[3]||(o[3]=c("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white mb-4"},"Parameters",-1)),c("div",Q2,[(g(!0),b(ee,null,ke(s.value.params,l=>(g(),b("div",{key:l.name,class:"border-l-4 border-indigo-500 pl-4"},[c("div",ew,[c("code",tw,z(l.name),1),c("span",sw,z(l.type),1),l.required?(g(),b("span",iw," required ")):I("",!0),l.default?(g(),b("span",nw,[o[2]||(o[2]=ne(" default: ",-1)),c("code",null,z(l.default),1)])):I("",!0)]),c("p",rw,z(l.description),1)]))),128))])])):I("",!0),c("div",ow,[o[4]||(o[4]=c("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white mb-4"},"Returns",-1)),c("p",lw,z(s.value.returns),1)]),s.value.details?(g(),b("div",aw,[o[5]||(o[5]=c("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white mb-4"},"Details",-1)),c("div",uw,z(s.value.details),1)])):I("",!0),s.value.examples&&s.value.examples.length>0?(g(),b("div",dw,[o[6]||(o[6]=c("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white mb-4"},"Examples",-1)),c("div",cw,[(g(!0),b(ee,null,ke(s.value.examples,(l,a)=>(g(),b("div",{key:a},[c("div",fw,[c("pre",hw,[c("code",null,z(l.code),1)])]),c("p",pw,z(l.description),1)]))),128))])])):I("",!0),s.value.see_also&&s.value.see_also.length>0?(g(),b("div",mw,[o[7]||(o[7]=c("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white mb-4"},"See Also",-1)),c("ul",gw,[(g(!0),b(ee,null,ke(s.value.see_also,l=>(g(),b("li",{key:l.name},[c("code",vw,z(l.name)+"() ",1),c("span",yw," - "+z(l.description),1)]))),128))])])):I("",!0),s.value.notes&&s.value.notes.length>0?(g(),b("div",bw,[c("div",xw,[o[8]||(o[8]=c("h3",{class:"text-lg font-semibold text-amber-900 dark:text-amber-200 mb-2"},"Notes",-1)),c("ul",kw,[(g(!0),b(ee,null,ke(s.value.notes,(l,a)=>(g(),b("li",{key:a},z(l),1))),128))])])])):I("",!0),s.value.tags&&s.value.tags.length>0?(g(),b("div",ww,[c("div",_w,[o[9]||(o[9]=c("span",{class:"text-sm text-slate-500 dark:text-slate-400"},"Tags:",-1)),(g(!0),b(ee,null,ke(s.value.tags,l=>(g(),b("span",{key:l,class:"px-2 py-1 bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 rounded text-xs"},z(l),1))),128))])])):I("",!0)])):(g(),b("div",Sw,[...o[10]||(o[10]=[c("p",{class:"text-slate-600 dark:text-slate-400"},"Documentation not found.",-1)])]))}},Aw={class:"flex h-full"},Vw={class:"w-64 flex-shrink-0 border-r border-zinc-900/10 dark:border-white/10 overflow-y-auto"},Mw={class:"p-4"},Dw={class:"mt-3 space-y-1"},Tw={class:"mt-3 space-y-1"},$w={class:"mt-3 space-y-1"},Ew={class:"flex-1 overflow-y-auto"},Ow={key:1,class:"flex h-full items-center justify-center p-8"},Ih={__name:"DocsView",setup(t){const e=Vr(),s=re(()=>e.params.functionName),i=[{name:"scaffold",title:"scaffold()"}],n=[{name:"data_load",title:"data_load()"}],r=[{name:"cache_get",title:"cache_get()"}];return(o,l)=>{const a=na("router-link");return g(),b("div",Aw,[c("div",Vw,[c("div",Mw,[l[0]||(l[0]=c("h2",{class:"text-xs font-semibold uppercase tracking-wide text-zinc-500 dark:text-zinc-400"}," Core Functions ",-1)),c("ul",Dw,[(g(),b(ee,null,ke(i,d=>c("li",{key:d.name},[k(a,{to:`/docs/${d.name}`,class:Te(["block rounded-md px-3 py-2 text-sm font-medium hover:bg-zinc-50 dark:hover:bg-zinc-800",s.value===d.name?"bg-sky-50 text-sky-600 dark:bg-sky-400/10 dark:text-sky-400":"text-zinc-700 dark:text-zinc-300"])},{default:R(()=>[ne(z(d.title),1)]),_:2},1032,["to","class"])])),64))]),l[1]||(l[1]=c("h2",{class:"mt-6 text-xs font-semibold uppercase tracking-wide text-zinc-500 dark:text-zinc-400"}," Data Functions ",-1)),c("ul",Tw,[(g(),b(ee,null,ke(n,d=>c("li",{key:d.name},[k(a,{to:`/docs/${d.name}`,class:Te(["block rounded-md px-3 py-2 text-sm font-medium hover:bg-zinc-50 dark:hover:bg-zinc-800",s.value===d.name?"bg-sky-50 text-sky-600 dark:bg-sky-400/10 dark:text-sky-400":"text-zinc-700 dark:text-zinc-300"])},{default:R(()=>[ne(z(d.title),1)]),_:2},1032,["to","class"])])),64))]),l[2]||(l[2]=c("h2",{class:"mt-6 text-xs font-semibold uppercase tracking-wide text-zinc-500 dark:text-zinc-400"}," Cache Functions ",-1)),c("ul",$w,[(g(),b(ee,null,ke(r,d=>c("li",{key:d.name},[k(a,{to:`/docs/${d.name}`,class:Te(["block rounded-md px-3 py-2 text-sm font-medium hover:bg-zinc-50 dark:hover:bg-zinc-800",s.value===d.name?"bg-sky-50 text-sky-600 dark:bg-sky-400/10 dark:text-sky-400":"text-zinc-700 dark:text-zinc-300"])},{default:R(()=>[ne(z(d.title),1)]),_:2},1032,["to","class"])])),64))])])]),c("div",Ew,[s.value?(g(),me(Cw,{key:0,functionName:s.value},null,8,["functionName"])):(g(),b("div",Ow,[...l[3]||(l[3]=[c("div",{class:"text-center"},[c("h2",{class:"text-2xl font-bold text-zinc-900 dark:text-white"},"Framework Documentation"),c("p",{class:"mt-2 text-zinc-600 dark:text-zinc-400"}," Select a function from the sidebar to view its documentation. ")],-1)])]))])])}}},Pw={key:0,class:"px-4 py-5 sm:px-6"},jw={class:"px-4 py-5 sm:p-6"},Lw={key:1,class:"px-4 py-4 sm:px-6"},Rw={__name:"Card",setup(t){const e=kb(),s=re(()=>{const i=["overflow-hidden","rounded-lg","bg-white","shadow-sm","dark:bg-gray-800/50","dark:shadow-none","dark:outline","dark:-outline-offset-1","dark:outline-white/10"];return(e.header||e.footer)&&i.push("divide-y","divide-gray-200","dark:divide-white/10"),i.join(" ")});return(i,n)=>(g(),b("div",{class:Te(s.value)},[i.$slots.header?(g(),b("div",Pw,[gt(i.$slots,"header")])):I("",!0),c("div",jw,[gt(i.$slots,"default")]),i.$slots.footer?(g(),b("div",Lw,[gt(i.$slots,"footer")])):I("",!0)],2))}},Ie={__name:"Button",props:{variant:{type:String,default:"primary",validator:t=>["primary","secondary","soft"].includes(t)},size:{type:String,default:"md",validator:t=>["xs","sm","md","lg","xl"].includes(t)},rounded:{type:String,default:"md",validator:t=>["sm","md","full"].includes(t)},type:{type:String,default:"button"},href:{type:String,default:null},icon:{type:[Object,Function],default:null},iconPosition:{type:String,default:"left",validator:t=>["left","right"].includes(t)},iconOnly:{type:Boolean,default:!1}},emits:["click"],setup(t,{emit:e}){const s=t,i=e,n=l=>{i("click",l)},r=re(()=>{const l=["font-semibold","focus-visible:outline-2","focus-visible:outline-offset-2"],a={xs:s.iconOnly?"p-2":"px-3 py-2 text-xs",sm:s.iconOnly?"p-2.5":"px-3 py-2 text-sm",md:s.iconOnly?"p-3":"px-3.5 py-2.5 text-sm",lg:s.iconOnly?"p-3":"px-4 py-3 text-sm",xl:s.iconOnly?"p-3.5":"px-4.5 py-3.5 text-sm"};l.push(a[s.size]);const d={sm:"rounded-sm",md:"rounded-md",full:"rounded-full"};return l.push(d[s.rounded]),s.variant==="primary"?l.push("bg-sky-600","text-white","shadow-xs","hover:bg-sky-500","focus-visible:outline-sky-600","dark:bg-sky-500","dark:shadow-none","dark:hover:bg-sky-400","dark:focus-visible:outline-sky-500"):s.variant==="secondary"?l.push("bg-white","text-gray-900","shadow-xs","inset-ring","inset-ring-gray-300","hover:bg-gray-50","dark:bg-white/10","dark:text-white","dark:shadow-none","dark:inset-ring-white/5","dark:hover:bg-white/20"):s.variant==="soft"&&l.push("bg-sky-50","text-sky-600","shadow-xs","hover:bg-sky-100","dark:bg-sky-500/20","dark:text-sky-400","dark:shadow-none","dark:hover:bg-sky-500/30"),s.icon&&!s.iconOnly&&(l.push("inline-flex","items-center"),l.push(s.size==="xl"?"gap-x-2":"gap-x-1.5")),l.join(" ")}),o=re(()=>{const l=[];return s.iconOnly?l.push("size-5"):(l.push("size-5"),s.iconPosition==="left"?l.push("-ml-0.5"):l.push("-mr-0.5")),l.join(" ")});return(l,a)=>(g(),me(Cs(t.href?"a":"button"),{href:t.href,type:t.href?void 0:t.type,class:Te(r.value),onClick:n},{default:R(()=>[t.icon&&t.iconPosition==="left"?(g(),b("svg",{key:0,viewBox:"0 0 20 20",fill:"currentColor","data-slot":"icon","aria-hidden":"true",class:Te(o.value)},[(g(),me(Cs(t.icon)))],2)):I("",!0),gt(l.$slots,"default"),t.icon&&t.iconPosition==="right"?(g(),b("svg",{key:1,viewBox:"0 0 20 20",fill:"currentColor","data-slot":"icon","aria-hidden":"true",class:Te(o.value)},[(g(),me(Cs(t.icon)))],2)):I("",!0)]),_:3},8,["href","type","class"]))}},Bw=["for"],Iw={key:1,class:"mt-2 flex"},Nw={class:"flex shrink-0 items-center rounded-l-md bg-gray-100 px-2 text-base text-gray-500 outline-1 -outline-offset-1 outline-gray-300 sm:text-sm/6 dark:bg-white/5 dark:text-gray-400 dark:outline-white/10 font-mono"},Uw=["id","type","value","placeholder","required","disabled","aria-invalid","aria-describedby"],zw={key:2,class:"mt-2"},Fw=["id","type","value","placeholder","required","disabled","aria-invalid","aria-describedby"],Hw={key:0,viewBox:"0 0 16 16",fill:"currentColor","data-slot":"icon","aria-hidden":"true",class:"pointer-events-none col-start-1 row-start-1 mr-3 size-5 self-center justify-self-end text-red-500 sm:size-4 dark:text-red-400"},Ww=["id"],qw=["id"],Y={__name:"Input",props:{id:{type:String,default:()=>`input-${Math.random().toString(36).substr(2,9)}`},modelValue:{type:[String,Number],default:""},type:{type:String,default:"text"},label:{type:String,default:null},placeholder:{type:String,default:""},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},error:{type:String,default:null},hint:{type:String,default:null},monospace:{type:Boolean,default:!1},prefix:{type:String,default:null}},emits:["update:modelValue","blur"],setup(t){const e=t,s=re(()=>{const n=["block","w-full","rounded-md","bg-white","px-3","py-1.5","text-base","outline-1","-outline-offset-1","placeholder:text-gray-400","focus:outline-2","focus:-outline-offset-2","sm:text-sm/6","dark:bg-white/5","dark:placeholder:text-gray-500"];return e.monospace&&n.push("font-mono"),e.error?n.push("col-start-1","row-start-1","pr-10","pl-3","text-red-900","outline-red-300","placeholder:text-red-300","focus:outline-red-600","sm:pr-9","dark:text-red-400","dark:outline-red-500/50","dark:placeholder:text-red-400/70","dark:focus:outline-red-400"):n.push("text-gray-900","outline-gray-300","focus:outline-sky-600","dark:text-white","dark:outline-white/10","dark:focus:outline-sky-500"),n.join(" ")}),i=re(()=>{const n=["-ml-px","block","w-full","grow","rounded-r-md","bg-white","px-3","py-1.5","text-base","outline-1","-outline-offset-1","placeholder:text-gray-400","focus:outline-2","focus:-outline-offset-2","sm:text-sm/6","dark:bg-white/5","dark:placeholder:text-gray-500"];return e.monospace&&n.push("font-mono"),e.error?n.push("text-red-900","outline-red-300","placeholder:text-red-300","focus:outline-red-600","dark:text-red-400","dark:outline-red-500/50","dark:placeholder:text-red-400/70","dark:focus:outline-red-400"):n.push("text-gray-900","outline-gray-300","focus:outline-sky-600","dark:text-white","dark:outline-white/10","dark:focus:outline-sky-500"),n.join(" ")});return(n,r)=>(g(),b("div",null,[t.label?(g(),b("label",{key:0,for:t.id,class:"block text-sm/6 font-medium text-gray-900 dark:text-white"},z(t.label),9,Bw)):I("",!0),t.prefix?(g(),b("div",Iw,[c("div",Nw,z(t.prefix),1),c("input",{id:t.id,type:t.type,value:t.modelValue,placeholder:t.placeholder,required:t.required,disabled:t.disabled,"aria-invalid":t.error?"true":void 0,"aria-describedby":t.error?`${t.id}-error`:t.hint?`${t.id}-description`:void 0,onInput:r[0]||(r[0]=o=>n.$emit("update:modelValue",o.target.value)),onBlur:r[1]||(r[1]=o=>n.$emit("blur",o)),class:Te(i.value)},null,42,Uw)])):(g(),b("div",zw,[c("input",{id:t.id,type:t.type,value:t.modelValue,placeholder:t.placeholder,required:t.required,disabled:t.disabled,"aria-invalid":t.error?"true":void 0,"aria-describedby":t.error?`${t.id}-error`:t.hint?`${t.id}-description`:void 0,onInput:r[2]||(r[2]=o=>n.$emit("update:modelValue",o.target.value)),onBlur:r[3]||(r[3]=o=>n.$emit("blur",o)),class:Te(s.value)},null,42,Fw),t.error?(g(),b("svg",Hw,[...r[4]||(r[4]=[c("path",{d:"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14ZM8 4a.75.75 0 0 1 .75.75v3a.75.75 0 0 1-1.5 0v-3A.75.75 0 0 1 8 4Zm0 8a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z","clip-rule":"evenodd","fill-rule":"evenodd"},null,-1)])])):I("",!0)])),t.error?(g(),b("p",{key:3,id:`${t.id}-error`,class:"mt-2 text-sm text-red-600 dark:text-red-400"},z(t.error),9,Ww)):I("",!0),t.hint&&!t.error?(g(),b("p",{key:4,id:`${t.id}-description`,class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},z(t.hint),9,qw)):I("",!0)]))}},Kw={class:"flex gap-3"},Gw={class:"flex h-6 shrink-0 items-center"},Jw={class:"group grid size-4 grid-cols-1"},Yw=["id","name","checked","aria-describedby"],Xw={class:"text-sm/6"},Zw=["for"],Qw=["id"],pi={__name:"Checkbox",props:{id:{type:String,required:!0},name:{type:String,default:null},modelValue:{type:Boolean,default:!1},description:{type:String,default:null}},emits:["update:modelValue"],setup(t){return(e,s)=>(g(),b("div",Kw,[c("div",Gw,[c("div",Jw,[c("input",{id:t.id,type:"checkbox",name:t.name,checked:t.modelValue,"aria-describedby":t.description?`${t.id}-description`:void 0,onChange:s[0]||(s[0]=i=>e.$emit("update:modelValue",i.target.checked)),class:"col-start-1 row-start-1 appearance-none rounded-sm border border-gray-300 bg-white checked:border-sky-600 checked:bg-sky-600 indeterminate:border-sky-600 indeterminate:bg-sky-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:checked:bg-gray-100 dark:border-white/10 dark:bg-white/5 dark:checked:border-sky-500 dark:checked:bg-sky-500 dark:indeterminate:border-sky-500 dark:indeterminate:bg-sky-500 dark:focus-visible:outline-sky-500 dark:disabled:border-white/5 dark:disabled:bg-white/10 dark:disabled:checked:bg-white/10 forced-colors:appearance-auto"},null,40,Yw),s[1]||(s[1]=c("svg",{viewBox:"0 0 14 14",fill:"none",class:"pointer-events-none col-start-1 row-start-1 size-3.5 self-center justify-self-center stroke-white group-has-disabled:stroke-gray-950/25 dark:group-has-disabled:stroke-white/25"},[c("path",{d:"M3 8L6 11L11 3.5","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"opacity-0 group-has-checked:opacity-100"}),c("path",{d:"M3 7H11","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"opacity-0 group-has-indeterminate:opacity-100"})],-1))])]),c("div",Xw,[c("label",{for:t.id,class:"font-medium text-gray-900 dark:text-white"},[gt(e.$slots,"default")],8,Zw),t.description?(g(),b("p",{key:0,id:`${t.id}-description`,class:"text-gray-500 dark:text-gray-400"},z(t.description),9,Qw)):I("",!0)])]))}};function e_(t,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z","clip-rule":"evenodd"})])}function t_(t,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"fill-rule":"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z","clip-rule":"evenodd"})])}function s_(t,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 0 1 .67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 1 1-.671-1.34l.041-.022ZM12 9a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z","clip-rule":"evenodd"})])}function i_(t,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-1.72 6.97a.75.75 0 1 0-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 1 0 1.06 1.06L12 13.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L13.06 12l1.72-1.72a.75.75 0 1 0-1.06-1.06L12 10.94l-1.72-1.72Z","clip-rule":"evenodd"})])}const n_={class:"flex gap-3"},r_={class:"flex-1"},Os={__name:"Alert",props:{type:{type:String,default:"info",validator:t=>["success","error","warning","info"].includes(t)},title:{type:String,default:null},description:{type:String,default:null},dismissible:{type:Boolean,default:!1}},emits:["dismiss"],setup(t,{emit:e}){const s=t,i=e,n={success:{container:"bg-sky-50 dark:bg-sky-900/20 inset-ring inset-ring-sky-200 dark:inset-ring-sky-800",icon:"text-sky-600 dark:text-sky-400",title:"text-sky-800 dark:text-sky-200",description:"text-sky-700 dark:text-sky-300",dismiss:"text-sky-600 hover:text-sky-700 dark:text-sky-400 dark:hover:text-sky-300"},error:{container:"bg-red-50 dark:bg-red-900/20 inset-ring inset-ring-red-200 dark:inset-ring-red-800",icon:"text-red-600 dark:text-red-400",title:"text-red-800 dark:text-red-200",description:"text-red-700 dark:text-red-300",dismiss:"text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300"},warning:{container:"bg-yellow-50 dark:bg-yellow-900/20 inset-ring inset-ring-yellow-200 dark:inset-ring-yellow-800",icon:"text-yellow-600 dark:text-yellow-400",title:"text-yellow-800 dark:text-yellow-200",description:"text-yellow-700 dark:text-yellow-300",dismiss:"text-yellow-600 hover:text-yellow-700 dark:text-yellow-400 dark:hover:text-yellow-300"},info:{container:"bg-blue-50 dark:bg-blue-900/20 inset-ring inset-ring-blue-200 dark:inset-ring-blue-800",icon:"text-blue-600 dark:text-blue-400",title:"text-blue-800 dark:text-blue-200",description:"text-blue-700 dark:text-blue-300",dismiss:"text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300"}},r=re(()=>`rounded-lg p-4 ${n[s.type].container}`),o=re(()=>`text-sm font-medium ${n[s.type].title}`),l=re(()=>{const f=[`text-sm ${n[s.type].description}`];return s.title&&f.push("mt-1"),f.join(" ")}),a=re(()=>`rounded-md p-1 ${n[s.type].dismiss} focus:outline-2 focus:outline-offset-2`),d=re(()=>({success:e_,error:i_,warning:t_,info:s_})[s.type]),u=()=>{i("dismiss")};return(f,h)=>(g(),b("div",{class:Te(r.value),role:"alert"},[c("div",n_,[(g(),me(Cs(d.value),{class:Te(["h-5 w-5 shrink-0",n[t.type].icon])},null,8,["class"])),c("div",r_,[t.title?(g(),b("p",{key:0,class:Te(o.value)},z(t.title),3)):I("",!0),t.description||f.$slots.default?(g(),b("p",{key:1,class:Te(l.value)},[gt(f.$slots,"default",{},()=>[ne(z(t.description),1)])],2)):I("",!0)]),t.dismissible?(g(),b("button",{key:0,type:"button",onClick:u,class:Te(a.value)},[...h[0]||(h[0]=[c("span",{class:"sr-only"},"Dismiss",-1),c("svg",{viewBox:"0 0 20 20",fill:"currentColor",class:"size-5"},[c("path",{d:"M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z"})],-1)])],2)):I("",!0)])],2))}},o_={class:"flex items-center justify-between"},l_={class:"space-y-6"},a_={key:0,class:"text-xs text-gray-500 dark:text-gray-400 space-y-1"},u_={key:0},d_={class:"font-mono"},c_={key:1},f_={class:"font-mono"},h_={class:"space-y-2"},p_=["onClick"],m_={class:"flex items-start gap-3"},g_={class:"text-2xl mt-0.5"},v_={class:"flex-1"},y_={class:"font-semibold text-gray-900 dark:text-white"},b_={class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},x_={key:0,class:"text-sky-600 dark:text-sky-400"},k_={key:1,class:"bg-gray-50 dark:bg-gray-800/50 rounded-lg p-4"},w_={class:"space-y-3"},__={class:"list-decimal list-inside mt-1 space-y-1"},S_={class:"flex items-center justify-end gap-3"},C_={__name:"ProjectWizard",props:{mode:{type:String,default:"modal",validator:t=>["modal","page"].includes(t)},projectsRoot:{type:String,default:""}},emits:["close","created"],setup(t,{emit:e}){const s=t,i=e,n=re(()=>s.mode==="modal"),r=re(()=>(s.projectsRoot||"").trim()),o=T=>/^([A-Za-z]:[\\/]|\\\\|\/|~)/.test(T),l=(T,A)=>{if(!T)return A;const J=A.replace(/^[\\/]+/,"");if(!J)return T;if(T.endsWith("/")||T.endsWith("\\"))return`${T}${J}`;const ie=T.includes("\\")&&!T.includes("/")?"\\":"/";return`${T}${ie}${J}`},a=re(()=>n.value?"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4":"flex w-full justify-center"),d=re(()=>n.value?"max-w-2xl w-full max-h-[90vh] overflow-y-auto":"w-full max-w-2xl shadow-xl"),u=qs({directory:"",name:"",type:"project",sensitive:!1,use_git:!0,use_renv:!1,attach_defaults:!0}),f=re(()=>{const T=u.directory.trim();return T?o(T)||!r.value?T:l(r.value,T):r.value||""}),h=re(()=>{const T=u.directory.trim();return T?r.value.length>0||o(T):!1}),m=re(()=>r.value?`Folder will be created inside ${r.value}`:"The directory where your project will be created"),_=re(()=>r.value?"analytics-project":"my-analysis"),p=[{id:"project",title:"Data Analysis",description:"Full-featured project with notebooks, scripts, data management, and results tracking",icon:""},{id:"course",title:"Course Materials",description:"Teaching materials with slides, assignments, and course documentation",icon:""},{id:"presentation",title:"Presentation",description:"Single talk or presentation with minimal structure",icon:""}],C=ce(!1),M=ce(""),U=ce(!1),B=()=>{n.value&&i("close")},F=()=>{!u.name&&u.directory&&(u.name=u.directory.split(/[-_]/).map(T=>T.charAt(0).toUpperCase()+T.slice(1)).join(" "))},j=async()=>{M.value="",U.value=!1,C.value=!0;try{const T=f.value||u.directory,A=await fetch("/api/project/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_dir:T,project_name:u.name||u.directory,type:u.type,sensitive:u.sensitive,use_git:u.use_git,use_renv:u.use_renv,attach_defaults:u.attach_defaults})}),J=await A.json();A.ok&&J.success?(U.value=!0,J&&!J.path&&(J.path=T),i("created",J),n.value&&setTimeout(()=>{i("close")},3e3)):M.value=J.error||"Failed to create project"}catch(T){M.value="Network error: "+T.message}finally{C.value=!1}};return(T,A)=>(g(),b("div",{class:Te(a.value),onClick:Ut(B,["self"])},[k(Rw,{class:Te(d.value)},{header:R(()=>[c("div",o_,[A[9]||(A[9]=c("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Create New Project",-1)),n.value?(g(),b("button",{key:0,onClick:A[0]||(A[0]=J=>T.$emit("close")),class:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition"},[...A[8]||(A[8]=[c("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])):I("",!0)])]),footer:R(()=>[c("div",S_,[k(Ie,{variant:"secondary",onClick:A[7]||(A[7]=J=>T.$emit("close"))},{default:R(()=>[...A[23]||(A[23]=[ne(" Cancel ",-1)])]),_:1}),k(Ie,{variant:"primary",onClick:j,disabled:C.value||!u.directory},{default:R(()=>[ne(z(C.value?"Creating...":"Create Project"),1)]),_:1},8,["disabled"])])]),default:R(()=>[c("div",l_,[k(Y,{modelValue:u.directory,"onUpdate:modelValue":A[1]||(A[1]=J=>u.directory=J),label:"Project Directory",placeholder:_.value,hint:m.value,onInput:F},null,8,["modelValue","placeholder","hint"]),r.value||h.value?(g(),b("div",a_,[r.value?(g(),b("p",u_,[A[10]||(A[10]=ne(" Projects will be created inside ",-1)),c("span",d_,z(r.value),1),A[11]||(A[11]=ne(". ",-1))])):I("",!0),h.value?(g(),b("p",c_,[A[12]||(A[12]=ne(" Full path: ",-1)),c("span",f_,z(f.value),1)])):I("",!0)])):I("",!0),k(Y,{modelValue:u.name,"onUpdate:modelValue":A[2]||(A[2]=J=>u.name=J),label:"Project Name",placeholder:"My Analysis"},null,8,["modelValue"]),c("div",null,[A[14]||(A[14]=c("label",{class:"block text-sm/6 font-medium text-gray-900 dark:text-white mb-3"}," Project Type ",-1)),c("div",h_,[(g(),b(ee,null,ke(p,J=>c("div",{key:J.id,onClick:ie=>u.type=J.id,class:Te(["border-2 rounded-lg p-4 cursor-pointer transition",u.type===J.id?"border-sky-600 bg-sky-50 dark:bg-sky-900/20 dark:border-sky-500":"border-gray-200 dark:border-gray-700 hover:border-sky-300 dark:hover:border-sky-600"])},[c("div",m_,[c("div",g_,z(J.icon),1),c("div",v_,[c("h3",y_,z(J.title),1),c("p",b_,z(J.description),1)]),u.type===J.id?(g(),b("div",x_,[...A[13]||(A[13]=[c("svg",{class:"h-6 w-6",fill:"currentColor",viewBox:"0 0 20 20"},[c("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1)])])):I("",!0)])],10,p_)),64))])]),u.type==="project"?(g(),b("div",k_,[k(pi,{modelValue:u.sensitive,"onUpdate:modelValue":A[3]||(A[3]=J=>u.sensitive=J),id:"sensitive",description:"Creates separate public/private directories for inputs, reference materials, and outputs. Recommended for PHI, PII, or IRB-restricted data."},{default:R(()=>[...A[15]||(A[15]=[ne(" Privacy-first mode ",-1)])]),_:1},8,["modelValue"])])):I("",!0),c("div",w_,[k(pi,{modelValue:u.use_git,"onUpdate:modelValue":A[4]||(A[4]=J=>u.use_git=J),id:"use_git"},{default:R(()=>[...A[16]||(A[16]=[ne(" Initialize git repository ",-1)])]),_:1},8,["modelValue"]),k(pi,{modelValue:u.use_renv,"onUpdate:modelValue":A[5]||(A[5]=J=>u.use_renv=J),id:"use_renv"},{default:R(()=>[...A[17]||(A[17]=[ne(" Enable renv for package management ",-1)])]),_:1},8,["modelValue"]),k(pi,{modelValue:u.attach_defaults,"onUpdate:modelValue":A[6]||(A[6]=J=>u.attach_defaults=J),id:"attach_defaults"},{default:R(()=>[...A[18]||(A[18]=[ne(" Auto-load common packages (dplyr, tidyr, ggplot2) ",-1)])]),_:1},8,["modelValue"])]),M.value?(g(),me(Os,{key:2,type:"error",description:M.value},null,8,["description"])):I("",!0),U.value?(g(),me(Os,{key:3,type:"success",title:"Project created successfully!"},{default:R(()=>[A[22]||(A[22]=c("p",{class:"mt-2"},"Next steps:",-1)),c("ol",__,[c("li",null,"cd "+z(f.value),1),A[19]||(A[19]=c("li",null,"R",-1)),A[20]||(A[20]=c("li",null,"library(framework)",-1)),A[21]||(A[21]=c("li",null,"scaffold()",-1))])]),_:1})):I("",!0)])]),_:1},8,["class"])],2))}},A_={class:"flex items-start justify-between"},V_={class:"text-3xl font-bold tracking-tight text-gray-900 dark:text-white"},M_={key:0,class:"mt-2 text-sm text-gray-600 dark:text-gray-400"},D_={key:0},Mr={__name:"PageHeader",props:{title:{type:String,required:!0},description:{type:String,default:null}},setup(t){return(e,s)=>(g(),b("div",A_,[c("div",null,[c("h1",V_,z(t.title),1),t.description?(g(),b("p",M_,z(t.description),1)):I("",!0)]),e.$slots.actions?(g(),b("div",D_,[gt(e.$slots,"actions")])):I("",!0)]))}},lr={__name:"Badge",props:{variant:{type:String,default:"gray",validator:t=>["gray","red","yellow","green","blue","indigo","purple","pink","sky"].includes(t)},pill:{type:Boolean,default:!1},dot:{type:Boolean,default:!1}},setup(t){const e=t,s=re(()=>{const n=["inline-flex","items-center","px-2","py-1","text-xs","font-medium","inset-ring"];n.push(e.pill?"rounded-full":"rounded-md"),e.dot&&n.push("gap-x-1.5");const o={gray:{bg:"bg-gray-50",text:"text-gray-600",ring:"inset-ring-gray-500/10",darkBg:"dark:bg-gray-400/10",darkText:e.dot?"dark:text-gray-200":"dark:text-gray-400",darkRing:e.dot?"dark:inset-ring-white/10":"dark:inset-ring-gray-400/20"},red:{bg:"bg-red-50",text:"text-red-700",ring:"inset-ring-red-600/10",darkBg:"dark:bg-red-400/10",darkText:"dark:text-red-400",darkRing:"dark:inset-ring-red-400/20"},yellow:{bg:"bg-yellow-50",text:"text-yellow-800",ring:"inset-ring-yellow-600/20",darkBg:"dark:bg-yellow-400/10",darkText:"dark:text-yellow-500",darkRing:"dark:inset-ring-yellow-400/20"},green:{bg:"bg-green-50",text:"text-green-700",ring:"inset-ring-green-600/20",darkBg:"dark:bg-green-400/10",darkText:"dark:text-green-400",darkRing:"dark:inset-ring-green-500/20"},sky:{bg:"bg-sky-50",text:"text-sky-700",ring:"inset-ring-sky-600/20",darkBg:"dark:bg-sky-400/10",darkText:"dark:text-sky-400",darkRing:"dark:inset-ring-sky-500/20"},blue:{bg:"bg-blue-50",text:"text-blue-700",ring:"inset-ring-blue-700/10",darkBg:"dark:bg-blue-400/10",darkText:"dark:text-blue-400",darkRing:"dark:inset-ring-blue-400/30"},indigo:{bg:"bg-indigo-50",text:"text-indigo-700",ring:"inset-ring-indigo-700/10",darkBg:"dark:bg-indigo-400/10",darkText:"dark:text-indigo-400",darkRing:"dark:inset-ring-indigo-400/30"},purple:{bg:"bg-purple-50",text:"text-purple-700",ring:"inset-ring-purple-700/10",darkBg:"dark:bg-purple-400/10",darkText:"dark:text-purple-400",darkRing:"dark:inset-ring-purple-400/30"},pink:{bg:"bg-pink-50",text:"text-pink-700",ring:"inset-ring-pink-700/10",darkBg:"dark:bg-pink-400/10",darkText:"dark:text-pink-400",darkRing:"dark:inset-ring-pink-400/20"}}[e.variant];return e.dot?n.push("text-gray-900","inset-ring-gray-200","dark:text-white","dark:inset-ring-white/10"):n.push(o.bg,o.text,o.ring,o.darkBg,o.darkText,o.darkRing),n.join(" ")}),i=re(()=>`size-1.5 ${{gray:"fill-gray-500 dark:fill-gray-400",red:"fill-red-500 dark:fill-red-400",yellow:"fill-yellow-500 dark:fill-yellow-400",green:"fill-green-500 dark:fill-green-400",sky:"fill-sky-500 dark:fill-sky-400",blue:"fill-blue-500 dark:fill-blue-400",indigo:"fill-indigo-500 dark:fill-indigo-400",purple:"fill-purple-500 dark:fill-purple-400",pink:"fill-pink-500 dark:fill-pink-400"}[e.variant]}`);return(n,r)=>(g(),b("span",{class:Te(s.value)},[t.dot?(g(),b("svg",{key:0,viewBox:"0 0 6 6","aria-hidden":"true",class:Te(i.value)},[...r[0]||(r[0]=[c("circle",{r:"3",cx:"3",cy:"3"},null,-1)])],2)):I("",!0),gt(n.$slots,"default")],2))}},o0=(t,e)=>{const s=t.__vccOpts||t;for(const[i,n]of e)s[i]=n;return s},T_={key:0,class:"relative z-50"},$_={class:"fixed inset-0 z-10 overflow-y-auto"},E_={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},O_=["aria-labelledby"],P_=["id"],j_={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},L_={__name:"Modal",props:{modelValue:{type:Boolean,default:!1},title:{type:String,default:null},description:{type:String,default:null},icon:{type:String,default:null,validator:t=>["success","error","warning","info"].includes(t)},size:{type:String,default:"md",validator:t=>["sm","md","lg","xl"].includes(t)},variant:{type:String,default:"centered",validator:t=>["centered","side-icon","left"].includes(t)},closeOnBackdrop:{type:Boolean,default:!0}},emits:["update:modelValue","close"],setup(t,{expose:e,emit:s}){const i=t,n=s,r=re(()=>`modal-title-${Math.random().toString(36).substr(2,9)}`),o={sm:"sm:max-w-sm",md:"sm:max-w-lg",lg:"sm:max-w-2xl",xl:"sm:max-w-4xl"},l=re(()=>["relative","transform","overflow-hidden","rounded-lg","bg-white","px-4","pt-5","pb-4","text-left","shadow-xl","transition-all","sm:my-8","sm:w-full","sm:p-6","dark:bg-gray-800","dark:outline","dark:-outline-offset-1","dark:outline-white/10",o[i.size]].join(" ")),a=re(()=>{const M=["flex","items-center","justify-center","rounded-full"];i.variant==="centered"?M.push("mx-auto","size-12"):M.push("shrink-0","sm:mx-0","sm:size-10");const U={success:"bg-sky-100 text-sky-600 dark:bg-sky-500/10 dark:text-sky-400",error:"bg-red-100 text-red-600 dark:bg-red-500/10 dark:text-red-400",warning:"bg-yellow-100 text-yellow-600 dark:bg-yellow-500/10 dark:text-yellow-400",info:"bg-blue-100 text-blue-600 dark:bg-blue-500/10 dark:text-blue-400"};return i.icon&&M.push(U[i.icon]),M.join(" ")}),d=re(()=>{const M=[];return i.variant==="centered"?M.push("mt-3","text-center","sm:mt-5"):i.variant==="left"?M.push("text-left"):M.push("mt-3","text-center","sm:mt-0","sm:ml-4","sm:text-left"),i.variant==="side-icon"&&(i.icon||i.$slots.icon)&&M.push("sm:flex","sm:items-start"),M.join(" ")}),u=re(()=>i.variant==="left"?"text-lg font-bold text-gray-900 dark:text-white mb-4":"text-base font-semibold text-gray-900 dark:text-white"),f=re(()=>(i.variant==="centered","mt-2")),h=re(()=>i.variant==="left"?"mt-6 pt-4 border-t border-gray-200 dark:border-gray-700 flex gap-3 justify-between":i.variant==="centered"?"mt-5 sm:mt-6 flex gap-3 justify-end":"mt-5 sm:mt-4 flex gap-3 justify-end"),m=re(()=>i.icon==="success"?{template:`
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="m4.5 12.75 6 6 9-13.5" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      `}:i.icon==="error"||i.icon==="warning"?{template:`
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      `}:i.icon==="info"?{template:`
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      `}:null),_=()=>{i.closeOnBackdrop&&C()},p=M=>{M.key==="Escape"&&i.modelValue&&C()},C=()=>{n("update:modelValue",!1),n("close")};return ss(()=>{window.addEventListener("keydown",p)}),Ar(()=>{window.removeEventListener("keydown",p)}),e({close:C}),(M,U)=>(g(),me(og,{to:"body"},[k(Oc,{name:"modal"},{default:R(()=>[t.modelValue?(g(),b("div",T_,[c("div",{class:"fixed inset-0 bg-gray-500/75 transition-opacity dark:bg-gray-900/50",onClick:_}),c("div",$_,[c("div",E_,[c("div",{class:Te(l.value),role:"dialog","aria-modal":"true","aria-labelledby":r.value},[M.$slots.icon||t.icon?(g(),b("div",{key:0,class:Te(a.value)},[gt(M.$slots,"icon",{},()=>[t.icon?(g(),me(Cs(m.value),{key:0,class:"size-6"})):I("",!0)],!0)],2)):I("",!0),c("div",{class:Te(d.value)},[t.title?(g(),b("h3",{key:0,id:r.value,class:Te(u.value)},z(t.title),11,P_)):I("",!0),t.description||M.$slots.default?(g(),b("div",{key:1,class:Te(f.value)},[t.description?(g(),b("p",j_,z(t.description),1)):gt(M.$slots,"default",{key:1},void 0,!0)],2)):I("",!0)],2),M.$slots.actions?(g(),b("div",{key:1,class:Te(h.value)},[gt(M.$slots,"actions",{},void 0,!0)],2)):I("",!0)],10,O_)])])])):I("",!0)]),_:3})]))}},Tn=o0(L_,[["__scopeId","data-v-2e078ad9"]]),R_=["title"],B_={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},I_={key:1,class:"h-4 w-4 text-sky-600 dark:text-sky-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},N_={key:2},ar={__name:"CopyButton",props:{value:{type:String,required:!0},showLabel:{type:Boolean,default:!1},variant:{type:String,default:"default",validator:t=>["default","ghost","bare"].includes(t)},successMessage:{type:String,default:"Copied to clipboard"}},setup(t){const e=t,s=Ka(),i=ce(!1);let n=null;const r=re(()=>e.variant==="bare"?"inline-flex items-center text-sm font-medium transition-all":"inline-flex items-center gap-1.5 rounded-md px-2.5 py-1.5 text-sm font-medium transition-all"),o=re(()=>e.variant==="ghost"?"text-zinc-600 hover:bg-zinc-100 dark:text-zinc-400 dark:hover:bg-zinc-800":e.variant==="bare"?"gap-2 rounded-lg transition-all focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-1 focus-visible:outline-sky-500":"bg-zinc-100 text-zinc-700 hover:bg-zinc-200 dark:bg-zinc-800 dark:text-zinc-300 dark:hover:bg-zinc-700"),l=async()=>{try{await navigator.clipboard.writeText(e.value),i.value=!0,s.success("Copied!",e.successMessage),n&&clearTimeout(n),n=setTimeout(()=>{i.value=!1},2e3)}catch(a){s.error("Copy failed","Could not copy to clipboard"),console.error("Failed to copy:",a)}};return(a,d)=>(g(),b("button",{type:"button",onClick:l,class:Te([r.value,o.value,i.value&&"ring-2 ring-sky-500/20"]),title:i.value?"Copied!":"Copy to clipboard"},[gt(a.$slots,"default",{copied:i.value},()=>[i.value?(g(),b("svg",I_,[...d[1]||(d[1]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(g(),b("svg",B_,[...d[0]||(d[0]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"},null,-1)])])),t.showLabel?(g(),b("span",N_,z(i.value?"Copied!":"Copy"),1)):I("",!0)])],10,R_))}},U_={class:"mx-auto max-w-5xl p-10"},z_={class:"flex gap-3"},F_={key:0,class:"mt-6 flex flex-col gap-3 rounded-2xl border border-zinc-200 bg-white p-5 shadow-sm dark:border-zinc-800 dark:bg-zinc-900 sm:flex-row sm:items-center sm:justify-between"},H_={class:"min-w-0"},W_={class:"mt-1 font-mono text-sm text-zinc-600 dark:text-zinc-400 truncate"},q_={class:"flex items-center gap-2"},K_={key:1,class:"mt-10 grid gap-6 sm:grid-cols-2"},G_={class:"relative"},J_={class:"flex items-start justify-between"},Y_={class:"flex-1"},X_={class:"flex items-center gap-3"},Z_={class:"flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-sky-500 to-sky-600 shadow-lg shadow-sky-500/20"},Q_={key:0,class:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},e4={key:1,class:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},t4={key:2,class:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},s4={class:"mt-4 text-xl font-bold text-zinc-900 dark:text-white"},i4={class:"mt-2 text-sm text-zinc-600 dark:text-zinc-400 font-mono truncate"},n4={key:0,class:"mt-3 flex items-center gap-2 text-xs text-zinc-600 dark:text-zinc-400"},r4={key:0,class:"text-zinc-400 dark:text-zinc-500"},o4={key:1,class:"truncate"},l4={class:"mt-3 flex items-center gap-2 text-xs text-zinc-500 dark:text-zinc-500"},a4={class:"mt-6 flex gap-2"},u4={key:2,class:"mt-12 overflow-hidden rounded-3xl bg-gradient-to-br from-sky-600 via-sky-500 to-teal-500 p-12 shadow-2xl shadow-sky-500/20"},d4={class:"space-y-4"},c4={key:0,class:"mt-2 text-sm text-red-600 dark:text-red-400"},f4={class:"flex gap-3 justify-end"},h4={key:0,class:"space-y-6"},p4={class:"text-lg font-semibold text-zinc-900 dark:text-white mb-3"},m4={class:"grid gap-4"},g4={class:"text-sm text-zinc-600 dark:text-zinc-400 font-mono bg-zinc-50 dark:bg-zinc-800 px-3 py-2 rounded-lg"},v4={key:0,class:"grid grid-cols-2 gap-4"},y4={class:"text-sm text-zinc-600 dark:text-zinc-400"},b4={key:0},x4={class:"text-sm text-zinc-600 dark:text-zinc-400"},k4={class:"text-sm text-zinc-600 dark:text-zinc-400"},w4={class:"flex gap-3 justify-end"},_4={__name:"ProjectsView",setup(t){const e=Wa(),s=Vr(),i=ce(!1),n=ce(!1),r=ce(!1),o=ce(""),l=ce(""),a=ce(!1),d=ce(null),u=ce({projects:[]}),f=ce(""),h=ce(null),m=T=>{if(!T)return"Unknown";const A=h.value?.project_types?.[T]?.label;return A||T.split("_").map(J=>J.charAt(0).toUpperCase()+J.slice(1)).join(" ")},_=async()=>{try{const A=await(await fetch("/api/settings/get")).json();u.value.projects=A.projects||[],f.value=A.projects_root&&A.projects_root!==""?A.projects_root:""}catch(T){console.error("Failed to load settings:",T)}},p=()=>{s.path==="/projects/new"?i.value=!0:e.push("/projects/new")},C=()=>{i.value=!1,s.path==="/projects/new"&&e.push("/projects")},M=T=>{i.value=!1,_(),T?.id?e.push(`/project/${T.id}`):e.push("/projects")},U=()=>{n.value=!1,o.value="",l.value=""},B=T=>{d.value=T,r.value=!0},F=async()=>{l.value="",a.value=!0;try{const T=await fetch("/api/project/import",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_dir:o.value})}),A=await T.text();if(!A){l.value="Server returned empty response",a.value=!1;return}const J=JSON.parse(A);T.ok?(U(),_()):l.value=J.error||"Failed to import project"}catch(T){l.value="Network error: "+T.message}finally{a.value=!1}},j=async()=>{try{const A=await(await fetch("/api/settings-catalog")).json();A.error||(h.value=A)}catch(T){console.error("Failed to load settings catalog:",T)}};return ss(()=>{_(),j(),i.value=s.path==="/projects/new"}),He(()=>s.path,T=>{i.value=T==="/projects/new"},{immediate:!0}),(T,A)=>(g(),b("div",U_,[k(Mr,{title:"Your Projects",description:"Framework projects you've created."},{actions:R(()=>[c("div",z_,[k(Ie,{size:"lg",variant:"secondary",onClick:A[0]||(A[0]=J=>n.value=!0)},{default:R(()=>[...A[7]||(A[7]=[ne(" Import Project ",-1)])]),_:1}),k(Ie,{size:"lg",onClick:p},{default:R(()=>[...A[8]||(A[8]=[ne(" New Project ",-1)])]),_:1})])]),_:1}),f.value?(g(),b("div",F_,[c("div",H_,[A[9]||(A[9]=c("p",{class:"text-sm font-medium text-zinc-700 dark:text-zinc-200"},"Projects Root",-1)),c("p",W_,z(f.value),1)]),c("div",q_,[k(ar,{value:f.value,variant:"ghost","show-label":"","success-message":"Root path copied"},null,8,["value"]),k(Ie,{size:"sm",variant:"secondary",onClick:A[1]||(A[1]=J=>lt(e).push("/settings"))},{default:R(()=>[...A[10]||(A[10]=[ne(" Edit ",-1)])]),_:1})])])):I("",!0),u.value.projects&&u.value.projects.length>0?(g(),b("div",K_,[(g(!0),b(ee,null,ke(u.value.projects,(J,ie)=>(g(),b("div",{key:ie,class:"group relative overflow-hidden rounded-2xl border border-zinc-200 bg-white p-6 shadow-sm transition-all duration-300 hover:shadow-xl hover:shadow-zinc-900/5 dark:border-zinc-800 dark:bg-zinc-900 dark:hover:shadow-sky-500/5"},[A[18]||(A[18]=c("div",{class:"absolute -right-6 -top-6 h-24 w-24 rounded-full bg-gradient-to-br from-sky-500/10 to-sky-600/10 blur-2xl transition-all duration-300 group-hover:scale-150"},null,-1)),c("div",G_,[c("div",J_,[c("div",Y_,[c("div",X_,[c("div",Z_,[J.type==="project"?(g(),b("svg",Q_,[...A[11]||(A[11]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)])])):J.type==="course"?(g(),b("svg",e4,[...A[12]||(A[12]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"},null,-1)])])):(g(),b("svg",t4,[...A[13]||(A[13]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"},null,-1)])]))]),k(lr,{variant:"sky"},{default:R(()=>[ne(z(m(J.type)),1)]),_:2},1024)]),c("h3",s4,z(J.name),1),c("p",i4,z(J.path),1),J.author?(g(),b("div",n4,[A[14]||(A[14]=c("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),c("span",null,z(J.author),1),J.author_email?(g(),b("span",r4,"")):I("",!0),J.author_email?(g(),b("span",o4,z(J.author_email),1)):I("",!0)])):I("",!0),c("div",l4,[A[15]||(A[15]=c("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),c("span",null,"Created "+z(J.created),1)])])]),c("div",a4,[k(Ie,{variant:"primary",size:"md",onClick:ge=>T.$router.push(`/project/${J.id}`),class:"flex-1"},{default:R(()=>[...A[16]||(A[16]=[ne(" View Project ",-1)])]),_:1},8,["onClick"]),k(Ie,{variant:"secondary",size:"md",onClick:ge=>B(J),class:"flex-1"},{default:R(()=>[...A[17]||(A[17]=[ne(" See More ",-1)])]),_:1},8,["onClick"])])])]))),128))])):(g(),b("div",u4,[c("div",{class:"relative"},[A[21]||(A[21]=c("div",{class:"absolute -right-10 -top-10 h-40 w-40 rounded-full bg-white/10 blur-3xl"},null,-1)),A[22]||(A[22]=c("div",{class:"absolute -bottom-10 -left-10 h-40 w-40 rounded-full bg-white/10 blur-3xl"},null,-1)),c("div",{class:"relative text-center"},[A[20]||(A[20]=Ua('<div class="mx-auto flex h-16 w-16 items-center justify-center rounded-2xl bg-white/20 backdrop-blur-sm"><svg class="h-8 w-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg></div><h2 class="mt-6 text-3xl font-bold text-white">Ready to start?</h2><p class="mt-3 text-lg text-sky-50"> Create a new Framework project with beautiful structure and best practices built-in. </p>',3)),c("button",{onClick:p,class:"mt-8 inline-flex items-center gap-2 rounded-xl bg-white px-6 py-3 text-base font-semibold text-sky-600 shadow-xl transition-all duration-200 hover:scale-105 hover:shadow-2xl focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-white"},[...A[19]||(A[19]=[c("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),ne(" Create Your First Project ",-1)])])])])])),i.value?(g(),me(C_,{key:3,"projects-root":f.value,onClose:C,onCreated:M},null,8,["projects-root"])):I("",!0),k(Tn,{modelValue:n.value,"onUpdate:modelValue":A[3]||(A[3]=J=>n.value=J),title:"Import Existing Project",size:"md"},{actions:R(()=>[c("div",f4,[k(Ie,{variant:"secondary",onClick:U},{default:R(()=>[...A[26]||(A[26]=[ne(" Cancel ",-1)])]),_:1}),k(Ie,{variant:"primary",onClick:F,disabled:!o.value||a.value},{default:R(()=>[ne(z(a.value?"Importing...":"Import"),1)]),_:1},8,["disabled"])])]),default:R(()=>[c("div",d4,[A[25]||(A[25]=c("p",{class:"text-sm text-zinc-600 dark:text-zinc-400"}," Import an existing Framework project that isn't in your registry yet. ",-1)),c("div",null,[A[23]||(A[23]=c("label",{for:"import-path",class:"block text-sm font-medium text-zinc-900 dark:text-white mb-2"}," Project Directory Path ",-1)),Ye(c("input",{id:"import-path","onUpdate:modelValue":A[2]||(A[2]=J=>o.value=J),type:"text",placeholder:"/Users/you/projects/my-framework-project",class:Te(["block w-full rounded-lg border-0 px-4 py-2.5 text-zinc-900 shadow-sm ring-1 ring-inset ring-zinc-300 placeholder:text-zinc-400 focus:ring-2 focus:ring-inset focus:ring-sky-600 dark:bg-zinc-800 dark:text-white dark:ring-zinc-700 dark:placeholder:text-zinc-500 dark:focus:ring-sky-500 sm:text-sm sm:leading-6 font-mono",{"ring-red-500 dark:ring-red-500":l.value}])},null,2),[[rn,o.value]]),A[24]||(A[24]=c("p",{class:"mt-2 text-xs text-zinc-500 dark:text-zinc-500"}," Enter the full path to the Framework project directory ",-1)),l.value?(g(),b("p",c4,z(l.value),1)):I("",!0)])])]),_:1},8,["modelValue"]),k(Tn,{modelValue:r.value,"onUpdate:modelValue":A[6]||(A[6]=J=>r.value=J),title:"Project Details",size:"lg"},{actions:R(()=>[c("div",w4,[k(Ie,{variant:"secondary",onClick:A[4]||(A[4]=J=>r.value=!1)},{default:R(()=>[...A[31]||(A[31]=[ne(" Close ",-1)])]),_:1}),k(Ie,{variant:"primary",onClick:A[5]||(A[5]=J=>{T.$router.push(`/project/${d.value.id}`),r.value=!1})},{default:R(()=>[...A[32]||(A[32]=[ne(" View Full Details ",-1)])]),_:1})])]),default:R(()=>[d.value?(g(),b("div",h4,[c("div",null,[c("h3",p4,z(d.value.name),1),k(lr,{variant:"sky",class:"mb-4"},{default:R(()=>[ne(z(d.value.type),1)]),_:1})]),c("div",m4,[c("div",null,[A[27]||(A[27]=c("label",{class:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1"}," Location ",-1)),c("p",g4,z(d.value.path),1)]),d.value.author?(g(),b("div",v4,[c("div",null,[A[28]||(A[28]=c("label",{class:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1"}," Author ",-1)),c("p",y4,z(d.value.author),1)]),d.value.author_email?(g(),b("div",b4,[A[29]||(A[29]=c("label",{class:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1"}," Email ",-1)),c("p",x4,z(d.value.author_email),1)])):I("",!0)])):I("",!0),c("div",null,[A[30]||(A[30]=c("label",{class:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1"}," Created ",-1)),c("p",k4,z(d.value.created),1)])])])):I("",!0)]),_:1},8,["modelValue"])]))}},S4=["for"],C4={class:"mt-2 grid grid-cols-1"},A4=["id","value"],Jt={__name:"Select",props:{id:{type:String,default:()=>`select-${Math.random().toString(36).substr(2,9)}`},modelValue:{type:[String,Number],default:""},label:{type:String,default:null}},emits:["update:modelValue"],setup(t){return(e,s)=>(g(),b("div",null,[t.label?(g(),b("label",{key:0,for:t.id,class:"block text-sm/6 font-medium text-gray-900 dark:text-white"},z(t.label),9,S4)):I("",!0),c("div",C4,[c("select",{id:t.id,value:t.modelValue,onChange:s[0]||(s[0]=i=>e.$emit("update:modelValue",i.target.value)),class:"col-start-1 row-start-1 w-full appearance-none rounded-md bg-white py-1.5 pr-8 pl-3 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 focus-visible:outline-2 focus-visible:-outline-offset-2 focus-visible:outline-sky-600 sm:text-sm/6 dark:bg-white/5 dark:text-white dark:outline-white/10 dark:*:bg-gray-800 dark:focus-visible:outline-sky-500"},[gt(e.$slots,"default")],40,A4),s[1]||(s[1]=c("svg",{viewBox:"0 0 16 16",fill:"currentColor","data-slot":"icon","aria-hidden":"true",class:"pointer-events-none col-start-1 row-start-1 mr-2 size-5 self-center justify-self-end text-gray-500 sm:size-4 dark:text-gray-400"},[c("path",{d:"M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z","clip-rule":"evenodd","fill-rule":"evenodd"})],-1))])]))}},V4={class:"flex items-center gap-3"},M4=["id","name","checked","disabled","aria-label"],D4={key:0,class:"text-sm/6"},T4=["for"],$4=["id"],Ne={__name:"Toggle",props:{id:{type:String,default:()=>`toggle-${Math.random().toString(36).substr(2,9)}`},name:{type:String,default:null},modelValue:{type:Boolean,default:!1},label:{type:String,default:null},description:{type:String,default:null},ariaLabel:{type:String,default:null},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(t,{emit:e}){const s=t,i=e,n=r=>{if(!s.disabled){const o=r.target.checked;i("update:modelValue",o),i("change",o)}};return(r,o)=>(g(),b("div",V4,[c("div",{class:Te(["group relative inline-flex w-11 shrink-0 rounded-full p-0.5 inset-ring inset-ring-gray-900/5 outline-offset-2 transition-colors duration-200 ease-in-out dark:inset-ring-white/10",[t.modelValue?"bg-sky-600 outline-sky-600 dark:bg-sky-500 dark:outline-sky-500":"bg-gray-200 outline-sky-600 dark:bg-white/5 dark:outline-sky-500"]])},[c("span",{class:Te(["size-5 rounded-full bg-white shadow-xs ring-1 ring-gray-900/5 transition-transform duration-200 ease-in-out",{"translate-x-5":t.modelValue}])},null,2),c("input",{id:t.id,type:"checkbox",name:t.name,checked:t.modelValue,disabled:t.disabled,"aria-label":t.ariaLabel||t.label,class:"absolute inset-0 appearance-none focus:outline-hidden cursor-pointer disabled:cursor-not-allowed",onChange:n},null,40,M4)],2),t.label||t.description?(g(),b("div",D4,[t.label?(g(),b("label",{key:0,for:t.id,class:Te(["font-medium text-gray-900 cursor-pointer dark:text-white",{"cursor-not-allowed opacity-50":t.disabled}])},z(t.label),11,T4)):I("",!0),t.description?(g(),b("p",{key:1,id:`${t.id}-description`,class:"text-gray-500 dark:text-gray-400"},z(t.description),9,$4)):I("",!0)])):I("",!0)]))}},E4={class:"flex items-center"},O4=["id","name","value","checked"],P4=["for"],hl={__name:"Radio",props:{id:{type:String,required:!0},name:{type:String,required:!0},value:{type:[String,Number,Boolean],required:!0},modelValue:{type:[String,Number,Boolean],default:null}},emits:["update:modelValue"],setup(t){return(e,s)=>(g(),b("div",E4,[c("input",{id:t.id,type:"radio",name:t.name,value:t.value,checked:t.modelValue===t.value,onChange:s[0]||(s[0]=i=>e.$emit("update:modelValue",t.value)),class:"relative size-4 appearance-none rounded-full border border-gray-300 bg-white before:absolute before:inset-1 before:rounded-full before:bg-white not-checked:before:hidden checked:border-sky-600 checked:bg-sky-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:before:bg-gray-400 dark:border-white/10 dark:bg-white/5 dark:checked:border-sky-500 dark:checked:bg-sky-500 dark:focus-visible:outline-sky-500 dark:disabled:border-white/5 dark:disabled:bg-white/10 dark:disabled:before:bg-white/20 forced-colors:appearance-auto forced-colors:before:hidden"},null,40,O4),c("label",{for:t.id,class:"ml-3 block text-sm/6 font-medium text-gray-900 dark:text-white"},[gt(e.$slots,"default")],8,P4)]))}},j4={class:"text-sm/6 font-semibold text-gray-900 dark:text-white"},L4={key:0,class:"mt-1 text-sm/6 text-gray-600 dark:text-gray-400"},R4={class:"mt-6 space-y-6"},B4={__name:"RadioGroup",props:{legend:{type:String,required:!0},description:{type:String,default:null}},setup(t){return(e,s)=>(g(),b("fieldset",null,[c("legend",j4,z(t.legend),1),t.description?(g(),b("p",L4,z(t.description),1)):I("",!0),c("div",R4,[gt(e.$slots,"default")])]))}},I4={class:"space-y-4"},N4={class:"flex items-start gap-4"},U4={class:"flex-1"},z4=["onClick"],xt={__name:"Repeater",props:{modelValue:{type:Array,default:()=>[]},addLabel:{type:String,default:"Add Item"},defaultItem:{type:[Object,Function],default:()=>({})}},emits:["update:modelValue"],setup(t,{emit:e}){const s=t,i=e,n=()=>{const l=typeof s.defaultItem=="function"?s.defaultItem():{...s.defaultItem,_id:Date.now()};i("update:modelValue",[...s.modelValue,l])},r=l=>{const a=s.modelValue.filter((d,u)=>u!==l);i("update:modelValue",a)},o=(l,a,d)=>{const u=[...s.modelValue];u[l]={...u[l],[a]:d},i("update:modelValue",u)};return(l,a)=>(g(),b("div",I4,[(g(!0),b(ee,null,ke(t.modelValue,(d,u)=>(g(),b("div",{key:d._id||u,class:"rounded-lg border border-gray-200 p-4 dark:border-gray-700"},[c("div",N4,[c("div",U4,[gt(l.$slots,"default",{item:d,index:u,update:(f,h)=>o(u,f,h)})]),c("button",{type:"button",onClick:f=>r(u),class:"shrink-0 rounded-md p-1.5 text-gray-400 transition hover:bg-red-50 hover:text-red-600 dark:hover:bg-red-900/20 dark:hover:text-red-400",title:"Remove"},[...a[0]||(a[0]=[c("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,z4)])]))),128)),k(Ie,{variant:"secondary",size:"sm",onClick:n,class:"inline-flex items-center"},{default:R(()=>[a[1]||(a[1]=c("svg",{class:"mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)),ne(" "+z(t.addLabel),1)]),_:1})]))}};let bd=[],l0=[];(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,s=0;e<t.length;e++)(e%2?l0:bd).push(s=s+t[e])})();function F4(t){if(t<768)return!1;for(let e=0,s=bd.length;;){let i=e+s>>1;if(t<bd[i])s=i;else if(t>=l0[i])e=i+1;else return!0;if(e==s)return!1}}function Nh(t){return t>=127462&&t<=127487}const Uh=8205;function H4(t,e,s=!0,i=!0){return(s?a0:W4)(t,e,i)}function a0(t,e,s){if(e==t.length)return e;e&&u0(t.charCodeAt(e))&&d0(t.charCodeAt(e-1))&&e--;let i=Vu(t,e);for(e+=zh(i);e<t.length;){let n=Vu(t,e);if(i==Uh||n==Uh||s&&F4(n))e+=zh(n),i=n;else if(Nh(n)){let r=0,o=e-2;for(;o>=0&&Nh(Vu(t,o));)r++,o-=2;if(r%2==0)break;e+=2}else break}return e}function W4(t,e,s){for(;e>0;){let i=a0(t,e-2,s);if(i<e)return i;e--}return 0}function Vu(t,e){let s=t.charCodeAt(e);if(!d0(s)||e+1==t.length)return s;let i=t.charCodeAt(e+1);return u0(i)?(s-55296<<10)+(i-56320)+65536:s}function u0(t){return t>=56320&&t<57344}function d0(t){return t>=55296&&t<56320}function zh(t){return t<65536?1:2}class st{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,s,i){[e,s]=vr(this,e,s);let n=[];return this.decompose(0,e,n,2),i.length&&i.decompose(0,i.length,n,3),this.decompose(s,this.length,n,1),ci.from(n,this.length-(s-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,s=this.length){[e,s]=vr(this,e,s);let i=[];return this.decompose(e,s,i,0),ci.from(i,s-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let s=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),n=new io(this),r=new io(e);for(let o=s,l=s;;){if(n.next(o),r.next(o),o=0,n.lineBreak!=r.lineBreak||n.done!=r.done||n.value!=r.value)return!1;if(l+=n.value.length,n.done||l>=i)return!0}}iter(e=1){return new io(this,e)}iterRange(e,s=this.length){return new c0(this,e,s)}iterLines(e,s){let i;if(e==null)i=this.iter();else{s==null&&(s=this.lines+1);let n=this.line(e).from;i=this.iterRange(n,Math.max(n,s==this.lines+1?this.length:s<=1?0:this.line(s-1).to))}return new f0(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?st.empty:e.length<=32?new Vt(e):ci.from(Vt.split(e,[]))}}class Vt extends st{constructor(e,s=q4(e)){super(),this.text=e,this.length=s}get lines(){return this.text.length}get children(){return null}lineInner(e,s,i,n){for(let r=0;;r++){let o=this.text[r],l=n+o.length;if((s?i:l)>=e)return new K4(n,l,i,o);n=l+1,i++}}decompose(e,s,i,n){let r=e<=0&&s>=this.length?this:new Vt(Fh(this.text,e,s),Math.min(s,this.length)-Math.max(0,e));if(n&1){let o=i.pop(),l=Fl(r.text,o.text.slice(),0,r.length);if(l.length<=32)i.push(new Vt(l,o.length+r.length));else{let a=l.length>>1;i.push(new Vt(l.slice(0,a)),new Vt(l.slice(a)))}}else i.push(r)}replace(e,s,i){if(!(i instanceof Vt))return super.replace(e,s,i);[e,s]=vr(this,e,s);let n=Fl(this.text,Fl(i.text,Fh(this.text,0,e)),s),r=this.length+i.length-(s-e);return n.length<=32?new Vt(n,r):ci.from(Vt.split(n,[]),r)}sliceString(e,s=this.length,i=`
`){[e,s]=vr(this,e,s);let n="";for(let r=0,o=0;r<=s&&o<this.text.length;o++){let l=this.text[o],a=r+l.length;r>e&&o&&(n+=i),e<a&&s>r&&(n+=l.slice(Math.max(0,e-r),s-r)),r=a+1}return n}flatten(e){for(let s of this.text)e.push(s)}scanIdentical(){return 0}static split(e,s){let i=[],n=-1;for(let r of e)i.push(r),n+=r.length+1,i.length==32&&(s.push(new Vt(i,n)),i=[],n=-1);return n>-1&&s.push(new Vt(i,n)),s}}class ci extends st{constructor(e,s){super(),this.children=e,this.length=s,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,s,i,n){for(let r=0;;r++){let o=this.children[r],l=n+o.length,a=i+o.lines-1;if((s?a:l)>=e)return o.lineInner(e,s,i,n);n=l+1,i=a+1}}decompose(e,s,i,n){for(let r=0,o=0;o<=s&&r<this.children.length;r++){let l=this.children[r],a=o+l.length;if(e<=a&&s>=o){let d=n&((o<=e?1:0)|(a>=s?2:0));o>=e&&a<=s&&!d?i.push(l):l.decompose(e-o,s-o,i,d)}o=a+1}}replace(e,s,i){if([e,s]=vr(this,e,s),i.lines<this.lines)for(let n=0,r=0;n<this.children.length;n++){let o=this.children[n],l=r+o.length;if(e>=r&&s<=l){let a=o.replace(e-r,s-r,i),d=this.lines-o.lines+a.lines;if(a.lines<d>>4&&a.lines>d>>6){let u=this.children.slice();return u[n]=a,new ci(u,this.length-(s-e)+i.length)}return super.replace(r,l,a)}r=l+1}return super.replace(e,s,i)}sliceString(e,s=this.length,i=`
`){[e,s]=vr(this,e,s);let n="";for(let r=0,o=0;r<this.children.length&&o<=s;r++){let l=this.children[r],a=o+l.length;o>e&&r&&(n+=i),e<a&&s>o&&(n+=l.sliceString(e-o,s-o,i)),o=a+1}return n}flatten(e){for(let s of this.children)s.flatten(e)}scanIdentical(e,s){if(!(e instanceof ci))return 0;let i=0,[n,r,o,l]=s>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;n+=s,r+=s){if(n==o||r==l)return i;let a=this.children[n],d=e.children[r];if(a!=d)return i+a.scanIdentical(d,s);i+=a.length+1}}static from(e,s=e.reduce((i,n)=>i+n.length+1,-1)){let i=0;for(let m of e)i+=m.lines;if(i<32){let m=[];for(let _ of e)_.flatten(m);return new Vt(m,s)}let n=Math.max(32,i>>5),r=n<<1,o=n>>1,l=[],a=0,d=-1,u=[];function f(m){let _;if(m.lines>r&&m instanceof ci)for(let p of m.children)f(p);else m.lines>o&&(a>o||!a)?(h(),l.push(m)):m instanceof Vt&&a&&(_=u[u.length-1])instanceof Vt&&m.lines+_.lines<=32?(a+=m.lines,d+=m.length+1,u[u.length-1]=new Vt(_.text.concat(m.text),_.length+1+m.length)):(a+m.lines>n&&h(),a+=m.lines,d+=m.length+1,u.push(m))}function h(){a!=0&&(l.push(u.length==1?u[0]:ci.from(u,d)),d=-1,a=u.length=0)}for(let m of e)f(m);return h(),l.length==1?l[0]:new ci(l,s)}}st.empty=new Vt([""],0);function q4(t){let e=-1;for(let s of t)e+=s.length+1;return e}function Fl(t,e,s=0,i=1e9){for(let n=0,r=0,o=!0;r<t.length&&n<=i;r++){let l=t[r],a=n+l.length;a>=s&&(a>i&&(l=l.slice(0,i-n)),n<s&&(l=l.slice(s-n)),o?(e[e.length-1]+=l,o=!1):e.push(l)),n=a+1}return e}function Fh(t,e,s){return Fl(t,[""],e,s)}class io{constructor(e,s=1){this.dir=s,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[s>0?1:(e instanceof Vt?e.text.length:e.children.length)<<1]}nextInner(e,s){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,n=this.nodes[i],r=this.offsets[i],o=r>>1,l=n instanceof Vt?n.text.length:n.children.length;if(o==(s>0?l:0)){if(i==0)return this.done=!0,this.value="",this;s>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((r&1)==(s>0?0:1)){if(this.offsets[i]+=s,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(n instanceof Vt){let a=n.text[o+(s<0?-1:0)];if(this.offsets[i]+=s,a.length>Math.max(0,e))return this.value=e==0?a:s>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=n.children[o+(s<0?-1:0)];e>a.length?(e-=a.length,this.offsets[i]+=s):(s<0&&this.offsets[i]--,this.nodes.push(a),this.offsets.push(s>0?1:(a instanceof Vt?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class c0{constructor(e,s,i){this.value="",this.done=!1,this.cursor=new io(e,s>i?-1:1),this.pos=s>i?e.length:0,this.from=Math.min(s,i),this.to=Math.max(s,i)}nextInner(e,s){if(s<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,s<0?this.pos-this.to:this.from-this.pos);let i=s<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:n}=this.cursor.next(e);return this.pos+=(n.length+e)*s,this.value=n.length<=i?n:s<0?n.slice(n.length-i):n.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class f0{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:s,lineBreak:i,value:n}=this.inner.next(e);return s&&this.afterBreak?(this.value="",this.afterBreak=!1):s?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=n,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(st.prototype[Symbol.iterator]=function(){return this.iter()},io.prototype[Symbol.iterator]=c0.prototype[Symbol.iterator]=f0.prototype[Symbol.iterator]=function(){return this});class K4{constructor(e,s,i,n){this.from=e,this.to=s,this.number=i,this.text=n}get length(){return this.to-this.from}}function vr(t,e,s){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,s))]}function Kt(t,e,s=!0,i=!0){return H4(t,e,s,i)}function G4(t){return t>=56320&&t<57344}function J4(t){return t>=55296&&t<56320}function ms(t,e){let s=t.charCodeAt(e);if(!J4(s)||e+1==t.length)return s;let i=t.charCodeAt(e+1);return G4(i)?(s-55296<<10)+(i-56320)+65536:s}function Bc(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function fi(t){return t<65536?1:2}const xd=/\r\n?|\n/;var cs=(function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t})(cs||(cs={}));class yi{constructor(e){this.sections=e}get length(){let e=0;for(let s=0;s<this.sections.length;s+=2)e+=this.sections[s];return e}get newLength(){let e=0;for(let s=0;s<this.sections.length;s+=2){let i=this.sections[s+1];e+=i<0?this.sections[s]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let s=0,i=0,n=0;s<this.sections.length;){let r=this.sections[s++],o=this.sections[s++];o<0?(e(i,n,r),n+=r):n+=o,i+=r}}iterChangedRanges(e,s=!1){kd(this,e,s)}get invertedDesc(){let e=[];for(let s=0;s<this.sections.length;){let i=this.sections[s++],n=this.sections[s++];n<0?e.push(i,n):e.push(n,i)}return new yi(e)}composeDesc(e){return this.empty?e:e.empty?this:h0(this,e)}mapDesc(e,s=!1){return e.empty?this:wd(this,e,s)}mapPos(e,s=-1,i=cs.Simple){let n=0,r=0;for(let o=0;o<this.sections.length;){let l=this.sections[o++],a=this.sections[o++],d=n+l;if(a<0){if(d>e)return r+(e-n);r+=l}else{if(i!=cs.Simple&&d>=e&&(i==cs.TrackDel&&n<e&&d>e||i==cs.TrackBefore&&n<e||i==cs.TrackAfter&&d>e))return null;if(d>e||d==e&&s<0&&!l)return e==n||s<0?r:r+a;r+=a}n=d}if(e>n)throw new RangeError(`Position ${e} is out of range for changeset of length ${n}`);return r}touchesRange(e,s=e){for(let i=0,n=0;i<this.sections.length&&n<=s;){let r=this.sections[i++],o=this.sections[i++],l=n+r;if(o>=0&&n<=s&&l>=e)return n<e&&l>s?"cover":!0;n=l}return!1}toString(){let e="";for(let s=0;s<this.sections.length;){let i=this.sections[s++],n=this.sections[s++];e+=(e?" ":"")+i+(n>=0?":"+n:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(s=>typeof s!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new yi(e)}static create(e){return new yi(e)}}class Lt extends yi{constructor(e,s){super(e),this.inserted=s}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return kd(this,(s,i,n,r,o)=>e=e.replace(n,n+(i-s),o),!1),e}mapDesc(e,s=!1){return wd(this,e,s,!0)}invert(e){let s=this.sections.slice(),i=[];for(let n=0,r=0;n<s.length;n+=2){let o=s[n],l=s[n+1];if(l>=0){s[n]=l,s[n+1]=o;let a=n>>1;for(;i.length<a;)i.push(st.empty);i.push(o?e.slice(r,r+o):st.empty)}r+=o}return new Lt(s,i)}compose(e){return this.empty?e:e.empty?this:h0(this,e,!0)}map(e,s=!1){return e.empty?this:wd(this,e,s,!0)}iterChanges(e,s=!1){kd(this,e,s)}get desc(){return yi.create(this.sections)}filter(e){let s=[],i=[],n=[],r=new ko(this);e:for(let o=0,l=0;;){let a=o==e.length?1e9:e[o++];for(;l<a||l==a&&r.len==0;){if(r.done)break e;let u=Math.min(r.len,a-l);Yt(n,u,-1);let f=r.ins==-1?-1:r.off==0?r.ins:0;Yt(s,u,f),f>0&&Ji(i,s,r.text),r.forward(u),l+=u}let d=e[o++];for(;l<d;){if(r.done)break e;let u=Math.min(r.len,d-l);Yt(s,u,-1),Yt(n,u,r.ins==-1?-1:r.off==0?r.ins:0),r.forward(u),l+=u}}return{changes:new Lt(s,i),filtered:yi.create(n)}}toJSON(){let e=[];for(let s=0;s<this.sections.length;s+=2){let i=this.sections[s],n=this.sections[s+1];n<0?e.push(i):n==0?e.push([i]):e.push([i].concat(this.inserted[s>>1].toJSON()))}return e}static of(e,s,i){let n=[],r=[],o=0,l=null;function a(u=!1){if(!u&&!n.length)return;o<s&&Yt(n,s-o,-1);let f=new Lt(n,r);l=l?l.compose(f.map(l)):f,n=[],r=[],o=0}function d(u){if(Array.isArray(u))for(let f of u)d(f);else if(u instanceof Lt){if(u.length!=s)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${s})`);a(),l=l?l.compose(u.map(l)):u}else{let{from:f,to:h=f,insert:m}=u;if(f>h||f<0||h>s)throw new RangeError(`Invalid change range ${f} to ${h} (in doc of length ${s})`);let _=m?typeof m=="string"?st.of(m.split(i||xd)):m:st.empty,p=_.length;if(f==h&&p==0)return;f<o&&a(),f>o&&Yt(n,f-o,-1),Yt(n,h-f,p),Ji(r,n,_),o=h}}return d(e),a(!l),l}static empty(e){return new Lt(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let s=[],i=[];for(let n=0;n<e.length;n++){let r=e[n];if(typeof r=="number")s.push(r,-1);else{if(!Array.isArray(r)||typeof r[0]!="number"||r.some((o,l)=>l&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(r.length==1)s.push(r[0],0);else{for(;i.length<n;)i.push(st.empty);i[n]=st.of(r.slice(1)),s.push(r[0],i[n].length)}}}return new Lt(s,i)}static createSet(e,s){return new Lt(e,s)}}function Yt(t,e,s,i=!1){if(e==0&&s<=0)return;let n=t.length-2;n>=0&&s<=0&&s==t[n+1]?t[n]+=e:n>=0&&e==0&&t[n]==0?t[n+1]+=s:i?(t[n]+=e,t[n+1]+=s):t.push(e,s)}function Ji(t,e,s){if(s.length==0)return;let i=e.length-2>>1;if(i<t.length)t[t.length-1]=t[t.length-1].append(s);else{for(;t.length<i;)t.push(st.empty);t.push(s)}}function kd(t,e,s){let i=t.inserted;for(let n=0,r=0,o=0;o<t.sections.length;){let l=t.sections[o++],a=t.sections[o++];if(a<0)n+=l,r+=l;else{let d=n,u=r,f=st.empty;for(;d+=l,u+=a,a&&i&&(f=f.append(i[o-2>>1])),!(s||o==t.sections.length||t.sections[o+1]<0);)l=t.sections[o++],a=t.sections[o++];e(n,d,r,u,f),n=d,r=u}}}function wd(t,e,s,i=!1){let n=[],r=i?[]:null,o=new ko(t),l=new ko(e);for(let a=-1;;){if(o.done&&l.len||l.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&l.ins==-1){let d=Math.min(o.len,l.len);Yt(n,d,-1),o.forward(d),l.forward(d)}else if(l.ins>=0&&(o.ins<0||a==o.i||o.off==0&&(l.len<o.len||l.len==o.len&&!s))){let d=l.len;for(Yt(n,l.ins,-1);d;){let u=Math.min(o.len,d);o.ins>=0&&a<o.i&&o.len<=u&&(Yt(n,0,o.ins),r&&Ji(r,n,o.text),a=o.i),o.forward(u),d-=u}l.next()}else if(o.ins>=0){let d=0,u=o.len;for(;u;)if(l.ins==-1){let f=Math.min(u,l.len);d+=f,u-=f,l.forward(f)}else if(l.ins==0&&l.len<u)u-=l.len,l.next();else break;Yt(n,d,a<o.i?o.ins:0),r&&a<o.i&&Ji(r,n,o.text),a=o.i,o.forward(o.len-u)}else{if(o.done&&l.done)return r?Lt.createSet(n,r):yi.create(n);throw new Error("Mismatched change set lengths")}}}function h0(t,e,s=!1){let i=[],n=s?[]:null,r=new ko(t),o=new ko(e);for(let l=!1;;){if(r.done&&o.done)return n?Lt.createSet(i,n):yi.create(i);if(r.ins==0)Yt(i,r.len,0,l),r.next();else if(o.len==0&&!o.done)Yt(i,0,o.ins,l),n&&Ji(n,i,o.text),o.next();else{if(r.done||o.done)throw new Error("Mismatched change set lengths");{let a=Math.min(r.len2,o.len),d=i.length;if(r.ins==-1){let u=o.ins==-1?-1:o.off?0:o.ins;Yt(i,a,u,l),n&&u&&Ji(n,i,o.text)}else o.ins==-1?(Yt(i,r.off?0:r.len,a,l),n&&Ji(n,i,r.textBit(a))):(Yt(i,r.off?0:r.len,o.off?0:o.ins,l),n&&!o.off&&Ji(n,i,o.text));l=(r.ins>a||o.ins>=0&&o.len>a)&&(l||i.length>d),r.forward2(a),o.forward(a)}}}}class ko{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,s=this.i-2>>1;return s>=e.length?st.empty:e[s]}textBit(e){let{inserted:s}=this.set,i=this.i-2>>1;return i>=s.length&&!e?st.empty:s[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class An{constructor(e,s,i){this.from=e,this.to=s,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,s=-1){let i,n;return this.empty?i=n=e.mapPos(this.from,s):(i=e.mapPos(this.from,1),n=e.mapPos(this.to,-1)),i==this.from&&n==this.to?this:new An(i,n,this.flags)}extend(e,s=e){if(e<=this.anchor&&s>=this.anchor)return ue.range(e,s);let i=Math.abs(e-this.anchor)>Math.abs(s-this.anchor)?e:s;return ue.range(this.anchor,i)}eq(e,s=!1){return this.anchor==e.anchor&&this.head==e.head&&(!s||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return ue.range(e.anchor,e.head)}static create(e,s,i){return new An(e,s,i)}}class ue{constructor(e,s){this.ranges=e,this.mainIndex=s}map(e,s=-1){return e.empty?this:ue.create(this.ranges.map(i=>i.map(e,s)),this.mainIndex)}eq(e,s=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],s))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new ue([this.main],0)}addRange(e,s=!0){return ue.create([e].concat(this.ranges),s?0:this.mainIndex+1)}replaceRange(e,s=this.mainIndex){let i=this.ranges.slice();return i[s]=e,ue.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new ue(e.ranges.map(s=>An.fromJSON(s)),e.main)}static single(e,s=e){return new ue([ue.range(e,s)],0)}static create(e,s=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,n=0;n<e.length;n++){let r=e[n];if(r.empty?r.from<=i:r.from<i)return ue.normalized(e.slice(),s);i=r.to}return new ue(e,s)}static cursor(e,s=0,i,n){return An.create(e,e,(s==0?0:s<0?8:16)|(i==null?7:Math.min(6,i))|(n??16777215)<<6)}static range(e,s,i,n){let r=(i??16777215)<<6|(n==null?7:Math.min(6,n));return s<e?An.create(s,e,48|r):An.create(e,s,(s>e?8:0)|r)}static normalized(e,s=0){let i=e[s];e.sort((n,r)=>n.from-r.from),s=e.indexOf(i);for(let n=1;n<e.length;n++){let r=e[n],o=e[n-1];if(r.empty?r.from<=o.to:r.from<o.to){let l=o.from,a=Math.max(r.to,o.to);n<=s&&s--,e.splice(--n,2,r.anchor>r.head?ue.range(a,l):ue.range(l,a))}}return new ue(e,s)}}function p0(t,e){for(let s of t.ranges)if(s.to>e)throw new RangeError("Selection points outside of document")}let Ic=0;class Ee{constructor(e,s,i,n,r){this.combine=e,this.compareInput=s,this.compare=i,this.isStatic=n,this.id=Ic++,this.default=e([]),this.extensions=typeof r=="function"?r(this):r}get reader(){return this}static define(e={}){return new Ee(e.combine||(s=>s),e.compareInput||((s,i)=>s===i),e.compare||(e.combine?(s,i)=>s===i:Nc),!!e.static,e.enables)}of(e){return new Hl([],this,0,e)}compute(e,s){if(this.isStatic)throw new Error("Can't compute a static facet");return new Hl(e,this,1,s)}computeN(e,s){if(this.isStatic)throw new Error("Can't compute a static facet");return new Hl(e,this,2,s)}from(e,s){return s||(s=i=>i),this.compute([e],i=>s(i.field(e)))}}function Nc(t,e){return t==e||t.length==e.length&&t.every((s,i)=>s===e[i])}class Hl{constructor(e,s,i,n){this.dependencies=e,this.facet=s,this.type=i,this.value=n,this.id=Ic++}dynamicSlot(e){var s;let i=this.value,n=this.facet.compareInput,r=this.id,o=e[r]>>1,l=this.type==2,a=!1,d=!1,u=[];for(let f of this.dependencies)f=="doc"?a=!0:f=="selection"?d=!0:(((s=e[f.id])!==null&&s!==void 0?s:1)&1)==0&&u.push(e[f.id]);return{create(f){return f.values[o]=i(f),1},update(f,h){if(a&&h.docChanged||d&&(h.docChanged||h.selection)||_d(f,u)){let m=i(f);if(l?!Hh(m,f.values[o],n):!n(m,f.values[o]))return f.values[o]=m,1}return 0},reconfigure:(f,h)=>{let m,_=h.config.address[r];if(_!=null){let p=ca(h,_);if(this.dependencies.every(C=>C instanceof Ee?h.facet(C)===f.facet(C):C instanceof Gt?h.field(C,!1)==f.field(C,!1):!0)||(l?Hh(m=i(f),p,n):n(m=i(f),p)))return f.values[o]=p,0}else m=i(f);return f.values[o]=m,1}}}}function Hh(t,e,s){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!s(t[i],e[i]))return!1;return!0}function _d(t,e){let s=!1;for(let i of e)no(t,i)&1&&(s=!0);return s}function Y4(t,e,s){let i=s.map(a=>t[a.id]),n=s.map(a=>a.type),r=i.filter(a=>!(a&1)),o=t[e.id]>>1;function l(a){let d=[];for(let u=0;u<i.length;u++){let f=ca(a,i[u]);if(n[u]==2)for(let h of f)d.push(h);else d.push(f)}return e.combine(d)}return{create(a){for(let d of i)no(a,d);return a.values[o]=l(a),1},update(a,d){if(!_d(a,r))return 0;let u=l(a);return e.compare(u,a.values[o])?0:(a.values[o]=u,1)},reconfigure(a,d){let u=_d(a,i),f=d.config.facets[e.id],h=d.facet(e);if(f&&!u&&Nc(s,f))return a.values[o]=h,0;let m=l(a);return e.compare(m,h)?(a.values[o]=h,0):(a.values[o]=m,1)}}}const pl=Ee.define({static:!0});class Gt{constructor(e,s,i,n,r){this.id=e,this.createF=s,this.updateF=i,this.compareF=n,this.spec=r,this.provides=void 0}static define(e){let s=new Gt(Ic++,e.create,e.update,e.compare||((i,n)=>i===n),e);return e.provide&&(s.provides=e.provide(s)),s}create(e){let s=e.facet(pl).find(i=>i.field==this);return(s?.create||this.createF)(e)}slot(e){let s=e[this.id]>>1;return{create:i=>(i.values[s]=this.create(i),1),update:(i,n)=>{let r=i.values[s],o=this.updateF(r,n);return this.compareF(r,o)?0:(i.values[s]=o,1)},reconfigure:(i,n)=>{let r=i.facet(pl),o=n.facet(pl),l;return(l=r.find(a=>a.field==this))&&l!=o.find(a=>a.field==this)?(i.values[s]=l.create(i),1):n.config.address[this.id]!=null?(i.values[s]=n.field(this),0):(i.values[s]=this.create(i),1)}}}init(e){return[this,pl.of({field:this,create:e})]}get extension(){return this}}const _n={lowest:4,low:3,default:2,high:1,highest:0};function Br(t){return e=>new m0(e,t)}const Un={highest:Br(_n.highest),high:Br(_n.high),default:Br(_n.default),low:Br(_n.low),lowest:Br(_n.lowest)};class m0{constructor(e,s){this.inner=e,this.prec=s}}class Ga{of(e){return new Sd(this,e)}reconfigure(e){return Ga.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Sd{constructor(e,s){this.compartment=e,this.inner=s}}class da{constructor(e,s,i,n,r,o){for(this.base=e,this.compartments=s,this.dynamicSlots=i,this.address=n,this.staticValues=r,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let s=this.address[e.id];return s==null?e.default:this.staticValues[s>>1]}static resolve(e,s,i){let n=[],r=Object.create(null),o=new Map;for(let h of X4(e,s,o))h instanceof Gt?n.push(h):(r[h.facet.id]||(r[h.facet.id]=[])).push(h);let l=Object.create(null),a=[],d=[];for(let h of n)l[h.id]=d.length<<1,d.push(m=>h.slot(m));let u=i?.config.facets;for(let h in r){let m=r[h],_=m[0].facet,p=u&&u[h]||[];if(m.every(C=>C.type==0))if(l[_.id]=a.length<<1|1,Nc(p,m))a.push(i.facet(_));else{let C=_.combine(m.map(M=>M.value));a.push(i&&_.compare(C,i.facet(_))?i.facet(_):C)}else{for(let C of m)C.type==0?(l[C.id]=a.length<<1|1,a.push(C.value)):(l[C.id]=d.length<<1,d.push(M=>C.dynamicSlot(M)));l[_.id]=d.length<<1,d.push(C=>Y4(C,_,m))}}let f=d.map(h=>h(l));return new da(e,o,f,l,a,r)}}function X4(t,e,s){let i=[[],[],[],[],[]],n=new Map;function r(o,l){let a=n.get(o);if(a!=null){if(a<=l)return;let d=i[a].indexOf(o);d>-1&&i[a].splice(d,1),o instanceof Sd&&s.delete(o.compartment)}if(n.set(o,l),Array.isArray(o))for(let d of o)r(d,l);else if(o instanceof Sd){if(s.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let d=e.get(o.compartment)||o.inner;s.set(o.compartment,d),r(d,l)}else if(o instanceof m0)r(o.inner,o.prec);else if(o instanceof Gt)i[l].push(o),o.provides&&r(o.provides,l);else if(o instanceof Hl)i[l].push(o),o.facet.extensions&&r(o.facet.extensions,_n.default);else{let d=o.extension;if(!d)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);r(d,l)}}return r(t,_n.default),i.reduce((o,l)=>o.concat(l))}function no(t,e){if(e&1)return 2;let s=e>>1,i=t.status[s];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;t.status[s]=4;let n=t.computeSlot(t,t.config.dynamicSlots[s]);return t.status[s]=2|n}function ca(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const g0=Ee.define(),Cd=Ee.define({combine:t=>t.some(e=>e),static:!0}),v0=Ee.define({combine:t=>t.length?t[0]:void 0,static:!0}),y0=Ee.define(),b0=Ee.define(),x0=Ee.define(),k0=Ee.define({combine:t=>t.length?t[0]:!1});class Bi{constructor(e,s){this.type=e,this.value=s}static define(){return new Z4}}class Z4{of(e){return new Bi(this,e)}}class Q4{constructor(e){this.map=e}of(e){return new Ge(this,e)}}class Ge{constructor(e,s){this.type=e,this.value=s}map(e){let s=this.type.map(this.value,e);return s===void 0?void 0:s==this.value?this:new Ge(this.type,s)}is(e){return this.type==e}static define(e={}){return new Q4(e.map||(s=>s))}static mapEffects(e,s){if(!e.length)return e;let i=[];for(let n of e){let r=n.map(s);r&&i.push(r)}return i}}Ge.reconfigure=Ge.define();Ge.appendConfig=Ge.define();class Rt{constructor(e,s,i,n,r,o){this.startState=e,this.changes=s,this.selection=i,this.effects=n,this.annotations=r,this.scrollIntoView=o,this._doc=null,this._state=null,i&&p0(i,s.newLength),r.some(l=>l.type==Rt.time)||(this.annotations=r.concat(Rt.time.of(Date.now())))}static create(e,s,i,n,r,o){return new Rt(e,s,i,n,r,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let s of this.annotations)if(s.type==e)return s.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let s=this.annotation(Rt.userEvent);return!!(s&&(s==e||s.length>e.length&&s.slice(0,e.length)==e&&s[e.length]=="."))}}Rt.time=Bi.define();Rt.userEvent=Bi.define();Rt.addToHistory=Bi.define();Rt.remote=Bi.define();function eS(t,e){let s=[];for(let i=0,n=0;;){let r,o;if(i<t.length&&(n==e.length||e[n]>=t[i]))r=t[i++],o=t[i++];else if(n<e.length)r=e[n++],o=e[n++];else return s;!s.length||s[s.length-1]<r?s.push(r,o):s[s.length-1]<o&&(s[s.length-1]=o)}}function w0(t,e,s){var i;let n,r,o;return s?(n=e.changes,r=Lt.empty(e.changes.length),o=t.changes.compose(e.changes)):(n=e.changes.map(t.changes),r=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(n)),{changes:o,selection:e.selection?e.selection.map(r):(i=t.selection)===null||i===void 0?void 0:i.map(n),effects:Ge.mapEffects(t.effects,n).concat(Ge.mapEffects(e.effects,r)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function Ad(t,e,s){let i=e.selection,n=ur(e.annotations);return e.userEvent&&(n=n.concat(Rt.userEvent.of(e.userEvent))),{changes:e.changes instanceof Lt?e.changes:Lt.of(e.changes||[],s,t.facet(v0)),selection:i&&(i instanceof ue?i:ue.single(i.anchor,i.head)),effects:ur(e.effects),annotations:n,scrollIntoView:!!e.scrollIntoView}}function _0(t,e,s){let i=Ad(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(s=!1);for(let r=1;r<e.length;r++){e[r].filter===!1&&(s=!1);let o=!!e[r].sequential;i=w0(i,Ad(t,e[r],o?i.changes.newLength:t.doc.length),o)}let n=Rt.create(t,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return sS(s?tS(n):n)}function tS(t){let e=t.startState,s=!0;for(let n of e.facet(y0)){let r=n(t);if(r===!1){s=!1;break}Array.isArray(r)&&(s=s===!0?r:eS(s,r))}if(s!==!0){let n,r;if(s===!1)r=t.changes.invertedDesc,n=Lt.empty(e.doc.length);else{let o=t.changes.filter(s);n=o.changes,r=o.filtered.mapDesc(o.changes).invertedDesc}t=Rt.create(e,n,t.selection&&t.selection.map(r),Ge.mapEffects(t.effects,r),t.annotations,t.scrollIntoView)}let i=e.facet(b0);for(let n=i.length-1;n>=0;n--){let r=i[n](t);r instanceof Rt?t=r:Array.isArray(r)&&r.length==1&&r[0]instanceof Rt?t=r[0]:t=_0(e,ur(r),!1)}return t}function sS(t){let e=t.startState,s=e.facet(x0),i=t;for(let n=s.length-1;n>=0;n--){let r=s[n](t);r&&Object.keys(r).length&&(i=w0(i,Ad(e,r,t.changes.newLength),!0))}return i==t?t:Rt.create(e,t.changes,t.selection,i.effects,i.annotations,i.scrollIntoView)}const iS=[];function ur(t){return t==null?iS:Array.isArray(t)?t:[t]}var kt=(function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t})(kt||(kt={}));const nS=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Vd;try{Vd=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function rS(t){if(Vd)return Vd.test(t);for(let e=0;e<t.length;e++){let s=t[e];if(/\w/.test(s)||s>""&&(s.toUpperCase()!=s.toLowerCase()||nS.test(s)))return!0}return!1}function oS(t){return e=>{if(!/\S/.test(e))return kt.Space;if(rS(e))return kt.Word;for(let s=0;s<t.length;s++)if(e.indexOf(t[s])>-1)return kt.Word;return kt.Other}}class et{constructor(e,s,i,n,r,o){this.config=e,this.doc=s,this.selection=i,this.values=n,this.status=e.statusTemplate.slice(),this.computeSlot=r,o&&(o._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)no(this,l<<1);this.computeSlot=null}field(e,s=!0){let i=this.config.address[e.id];if(i==null){if(s)throw new RangeError("Field is not present in this state");return}return no(this,i),ca(this,i)}update(...e){return _0(this,e,!0)}applyTransaction(e){let s=this.config,{base:i,compartments:n}=s;for(let l of e.effects)l.is(Ga.reconfigure)?(s&&(n=new Map,s.compartments.forEach((a,d)=>n.set(d,a)),s=null),n.set(l.value.compartment,l.value.extension)):l.is(Ge.reconfigure)?(s=null,i=l.value):l.is(Ge.appendConfig)&&(s=null,i=ur(i).concat(l.value));let r;s?r=e.startState.values.slice():(s=da.resolve(i,n,this),r=new et(s,this.doc,this.selection,s.dynamicSlots.map(()=>null),(a,d)=>d.reconfigure(a,this),null).values);let o=e.startState.facet(Cd)?e.newSelection:e.newSelection.asSingle();new et(s,e.newDoc,o,r,(l,a)=>a.update(l,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(s=>({changes:{from:s.from,to:s.to,insert:e},range:ue.cursor(s.from+e.length)}))}changeByRange(e){let s=this.selection,i=e(s.ranges[0]),n=this.changes(i.changes),r=[i.range],o=ur(i.effects);for(let l=1;l<s.ranges.length;l++){let a=e(s.ranges[l]),d=this.changes(a.changes),u=d.map(n);for(let h=0;h<l;h++)r[h]=r[h].map(u);let f=n.mapDesc(d,!0);r.push(a.range.map(f)),n=n.compose(u),o=Ge.mapEffects(o,u).concat(Ge.mapEffects(ur(a.effects),f))}return{changes:n,selection:ue.create(r,s.mainIndex),effects:o}}changes(e=[]){return e instanceof Lt?e:Lt.of(e,this.doc.length,this.facet(et.lineSeparator))}toText(e){return st.of(e.split(this.facet(et.lineSeparator)||xd))}sliceDoc(e=0,s=this.doc.length){return this.doc.sliceString(e,s,this.lineBreak)}facet(e){let s=this.config.address[e.id];return s==null?e.default:(no(this,s),ca(this,s))}toJSON(e){let s={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let n=e[i];n instanceof Gt&&this.config.address[n.id]!=null&&(s[i]=n.spec.toJSON(this.field(e[i]),this))}return s}static fromJSON(e,s={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let n=[];if(i){for(let r in i)if(Object.prototype.hasOwnProperty.call(e,r)){let o=i[r],l=e[r];n.push(o.init(a=>o.spec.fromJSON(l,a)))}}return et.create({doc:e.doc,selection:ue.fromJSON(e.selection),extensions:s.extensions?n.concat([s.extensions]):n})}static create(e={}){let s=da.resolve(e.extensions||[],new Map),i=e.doc instanceof st?e.doc:st.of((e.doc||"").split(s.staticFacet(et.lineSeparator)||xd)),n=e.selection?e.selection instanceof ue?e.selection:ue.single(e.selection.anchor,e.selection.head):ue.single(0);return p0(n,i.length),s.staticFacet(Cd)||(n=n.asSingle()),new et(s,i,n,s.dynamicSlots.map(()=>null),(r,o)=>o.create(r),null)}get tabSize(){return this.facet(et.tabSize)}get lineBreak(){return this.facet(et.lineSeparator)||`
`}get readOnly(){return this.facet(k0)}phrase(e,...s){for(let i of this.facet(et.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return s.length&&(e=e.replace(/\$(\$|\d*)/g,(i,n)=>{if(n=="$")return"$";let r=+(n||1);return!r||r>s.length?i:s[r-1]})),e}languageDataAt(e,s,i=-1){let n=[];for(let r of this.facet(g0))for(let o of r(this,s,i))Object.prototype.hasOwnProperty.call(o,e)&&n.push(o[e]);return n}charCategorizer(e){return oS(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:s,from:i,length:n}=this.doc.lineAt(e),r=this.charCategorizer(e),o=e-i,l=e-i;for(;o>0;){let a=Kt(s,o,!1);if(r(s.slice(a,o))!=kt.Word)break;o=a}for(;l<n;){let a=Kt(s,l);if(r(s.slice(l,a))!=kt.Word)break;l=a}return o==l?null:ue.range(o+i,l+i)}}et.allowMultipleSelections=Cd;et.tabSize=Ee.define({combine:t=>t.length?t[0]:4});et.lineSeparator=v0;et.readOnly=k0;et.phrases=Ee.define({compare(t,e){let s=Object.keys(t),i=Object.keys(e);return s.length==i.length&&s.every(n=>t[n]==e[n])}});et.languageData=g0;et.changeFilter=y0;et.transactionFilter=b0;et.transactionExtender=x0;Ga.reconfigure=Ge.define();function xi(t,e,s={}){let i={};for(let n of t)for(let r of Object.keys(n)){let o=n[r],l=i[r];if(l===void 0)i[r]=o;else if(!(l===o||o===void 0))if(Object.hasOwnProperty.call(s,r))i[r]=s[r](l,o);else throw new Error("Config merge conflict for field "+r)}for(let n in e)i[n]===void 0&&(i[n]=e[n]);return i}class Pn{eq(e){return this==e}range(e,s=e){return Md.create(e,s,this)}}Pn.prototype.startSide=Pn.prototype.endSide=0;Pn.prototype.point=!1;Pn.prototype.mapMode=cs.TrackDel;let Md=class S0{constructor(e,s,i){this.from=e,this.to=s,this.value=i}static create(e,s,i){return new S0(e,s,i)}};function Dd(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class Uc{constructor(e,s,i,n){this.from=e,this.to=s,this.value=i,this.maxPoint=n}get length(){return this.to[this.to.length-1]}findIndex(e,s,i,n=0){let r=i?this.to:this.from;for(let o=n,l=r.length;;){if(o==l)return o;let a=o+l>>1,d=r[a]-e||(i?this.value[a].endSide:this.value[a].startSide)-s;if(a==o)return d>=0?o:l;d>=0?l=a:o=a+1}}between(e,s,i,n){for(let r=this.findIndex(s,-1e9,!0),o=this.findIndex(i,1e9,!1,r);r<o;r++)if(n(this.from[r]+e,this.to[r]+e,this.value[r])===!1)return!1}map(e,s){let i=[],n=[],r=[],o=-1,l=-1;for(let a=0;a<this.value.length;a++){let d=this.value[a],u=this.from[a]+e,f=this.to[a]+e,h,m;if(u==f){let _=s.mapPos(u,d.startSide,d.mapMode);if(_==null||(h=m=_,d.startSide!=d.endSide&&(m=s.mapPos(u,d.endSide),m<h)))continue}else if(h=s.mapPos(u,d.startSide),m=s.mapPos(f,d.endSide),h>m||h==m&&d.startSide>0&&d.endSide<=0)continue;(m-h||d.endSide-d.startSide)<0||(o<0&&(o=h),d.point&&(l=Math.max(l,m-h)),i.push(d),n.push(h-o),r.push(m-o))}return{mapped:i.length?new Uc(n,r,i,l):null,pos:o}}}class tt{constructor(e,s,i,n){this.chunkPos=e,this.chunk=s,this.nextLayer=i,this.maxPoint=n}static create(e,s,i,n){return new tt(e,s,i,n)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let s of this.chunk)e+=s.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:s=[],sort:i=!1,filterFrom:n=0,filterTo:r=this.length}=e,o=e.filter;if(s.length==0&&!o)return this;if(i&&(s=s.slice().sort(Dd)),this.isEmpty)return s.length?tt.of(s):this;let l=new C0(this,null,-1).goto(0),a=0,d=[],u=new Pi;for(;l.value||a<s.length;)if(a<s.length&&(l.from-s[a].from||l.startSide-s[a].value.startSide)>=0){let f=s[a++];u.addInner(f.from,f.to,f.value)||d.push(f)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(a==s.length||this.chunkEnd(l.chunkIndex)<s[a].from)&&(!o||n>this.chunkEnd(l.chunkIndex)||r<this.chunkPos[l.chunkIndex])&&u.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!o||n>l.to||r<l.from||o(l.from,l.to,l.value))&&(u.addInner(l.from,l.to,l.value)||d.push(Md.create(l.from,l.to,l.value))),l.next());return u.finishInner(this.nextLayer.isEmpty&&!d.length?tt.empty:this.nextLayer.update({add:d,filter:o,filterFrom:n,filterTo:r}))}map(e){if(e.empty||this.isEmpty)return this;let s=[],i=[],n=-1;for(let o=0;o<this.chunk.length;o++){let l=this.chunkPos[o],a=this.chunk[o],d=e.touchesRange(l,l+a.length);if(d===!1)n=Math.max(n,a.maxPoint),s.push(a),i.push(e.mapPos(l));else if(d===!0){let{mapped:u,pos:f}=a.map(l,e);u&&(n=Math.max(n,u.maxPoint),s.push(u),i.push(f))}}let r=this.nextLayer.map(e);return s.length==0?r:new tt(i,s,r||tt.empty,n)}between(e,s,i){if(!this.isEmpty){for(let n=0;n<this.chunk.length;n++){let r=this.chunkPos[n],o=this.chunk[n];if(s>=r&&e<=r+o.length&&o.between(r,e-r,s-r,i)===!1)return}this.nextLayer.between(e,s,i)}}iter(e=0){return wo.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,s=0){return wo.from(e).goto(s)}static compare(e,s,i,n,r=-1){let o=e.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=r),l=s.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=r),a=Wh(o,l,i),d=new Ir(o,a,r),u=new Ir(l,a,r);i.iterGaps((f,h,m)=>qh(d,f,u,h,m,n)),i.empty&&i.length==0&&qh(d,0,u,0,0,n)}static eq(e,s,i=0,n){n==null&&(n=999999999);let r=e.filter(u=>!u.isEmpty&&s.indexOf(u)<0),o=s.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(r.length!=o.length)return!1;if(!r.length)return!0;let l=Wh(r,o),a=new Ir(r,l,0).goto(i),d=new Ir(o,l,0).goto(i);for(;;){if(a.to!=d.to||!Td(a.active,d.active)||a.point&&(!d.point||!a.point.eq(d.point)))return!1;if(a.to>n)return!0;a.next(),d.next()}}static spans(e,s,i,n,r=-1){let o=new Ir(e,null,r).goto(s),l=s,a=o.openStart;for(;;){let d=Math.min(o.to,i);if(o.point){let u=o.activeForPoint(o.to),f=o.pointFrom<s?u.length+1:o.point.startSide<0?u.length:Math.min(u.length,a);n.point(l,d,o.point,u,f,o.pointRank),a=Math.min(o.openEnd(d),u.length)}else d>l&&(n.span(l,d,o.active,a),a=o.openEnd(d));if(o.to>i)return a+(o.point&&o.to>i?1:0);l=o.to,o.next()}}static of(e,s=!1){let i=new Pi;for(let n of e instanceof Md?[e]:s?lS(e):e)i.add(n.from,n.to,n.value);return i.finish()}static join(e){if(!e.length)return tt.empty;let s=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let n=e[i];n!=tt.empty;n=n.nextLayer)s=new tt(n.chunkPos,n.chunk,s,Math.max(n.maxPoint,s.maxPoint));return s}}tt.empty=new tt([],[],null,-1);function lS(t){if(t.length>1)for(let e=t[0],s=1;s<t.length;s++){let i=t[s];if(Dd(e,i)>0)return t.slice().sort(Dd);e=i}return t}tt.empty.nextLayer=tt.empty;class Pi{finishChunk(e){this.chunks.push(new Uc(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,s,i){this.addInner(e,s,i)||(this.nextLayer||(this.nextLayer=new Pi)).add(e,s,i)}addInner(e,s,i){let n=e-this.lastTo||i.startSide-this.last.endSide;if(n<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return n<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(s-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=s,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,s-e)),!0)}addChunk(e,s){if((e-this.lastTo||s.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,s.maxPoint),this.chunks.push(s),this.chunkPos.push(e);let i=s.value.length-1;return this.last=s.value[i],this.lastFrom=s.from[i]+e,this.lastTo=s.to[i]+e,!0}finish(){return this.finishInner(tt.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let s=tt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,s}}function Wh(t,e,s){let i=new Map;for(let r of t)for(let o=0;o<r.chunk.length;o++)r.chunk[o].maxPoint<=0&&i.set(r.chunk[o],r.chunkPos[o]);let n=new Set;for(let r of e)for(let o=0;o<r.chunk.length;o++){let l=i.get(r.chunk[o]);l!=null&&(s?s.mapPos(l):l)==r.chunkPos[o]&&!s?.touchesRange(l,l+r.chunk[o].length)&&n.add(r.chunk[o])}return n}class C0{constructor(e,s,i,n=0){this.layer=e,this.skip=s,this.minPoint=i,this.rank=n}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,s=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,s,!1),this}gotoInner(e,s,i){for(;this.chunkIndex<this.layer.chunk.length;){let n=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(n)||this.layer.chunkEnd(this.chunkIndex)<e||n.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let n=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],s,!0);(!i||this.rangeIndex<n)&&this.setRangeIndex(n)}this.next()}forward(e,s){(this.to-e||this.endSide-s)<0&&this.gotoInner(e,s,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],s=this.layer.chunk[this.chunkIndex],i=e+s.from[this.rangeIndex];if(this.from=i,this.to=e+s.to[this.rangeIndex],this.value=s.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class wo{constructor(e){this.heap=e}static from(e,s=null,i=-1){let n=[];for(let r=0;r<e.length;r++)for(let o=e[r];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&n.push(new C0(o,s,i,r));return n.length==1?n[0]:new wo(n)}get startSide(){return this.value?this.value.startSide:0}goto(e,s=-1e9){for(let i of this.heap)i.goto(e,s);for(let i=this.heap.length>>1;i>=0;i--)Mu(this.heap,i);return this.next(),this}forward(e,s){for(let i of this.heap)i.forward(e,s);for(let i=this.heap.length>>1;i>=0;i--)Mu(this.heap,i);(this.to-e||this.value.endSide-s)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Mu(this.heap,0)}}}function Mu(t,e){for(let s=t[e];;){let i=(e<<1)+1;if(i>=t.length)break;let n=t[i];if(i+1<t.length&&n.compare(t[i+1])>=0&&(n=t[i+1],i++),s.compare(n)<0)break;t[i]=s,t[e]=n,e=i}}class Ir{constructor(e,s,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=wo.from(e,s,i)}goto(e,s=-1e9){return this.cursor.goto(e,s),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=s,this.openStart=-1,this.next(),this}forward(e,s){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-s)<0;)this.removeActive(this.minActive);this.cursor.forward(e,s)}removeActive(e){ml(this.active,e),ml(this.activeTo,e),ml(this.activeRank,e),this.minActive=Kh(this.active,this.activeTo)}addActive(e){let s=0,{value:i,to:n,rank:r}=this.cursor;for(;s<this.activeRank.length&&(r-this.activeRank[s]||n-this.activeTo[s])>0;)s++;gl(this.active,s,i),gl(this.activeTo,s,n),gl(this.activeRank,s,r),e&&gl(e,s,this.cursor.from),this.minActive=Kh(this.active,this.activeTo)}next(){let e=this.to,s=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let n=this.minActive;if(n>-1&&(this.activeTo[n]-this.cursor.from||this.active[n].endSide-this.cursor.startSide)<0){if(this.activeTo[n]>e){this.to=this.activeTo[n],this.endSide=this.active[n].endSide;break}this.removeActive(n),i&&ml(i,n)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let r=this.cursor.value;if(!r.point)this.addActive(i),this.cursor.next();else if(s&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=r,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=r.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let n=i.length-1;n>=0&&i[n]<e;n--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let s=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&s.push(this.active[i]);return s.reverse()}openEnd(e){let s=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)s++;return s}}function qh(t,e,s,i,n,r){t.goto(e),s.goto(i);let o=i+n,l=i,a=i-e;for(;;){let d=t.to+a-s.to,u=d||t.endSide-s.endSide,f=u<0?t.to+a:s.to,h=Math.min(f,o);if(t.point||s.point?t.point&&s.point&&(t.point==s.point||t.point.eq(s.point))&&Td(t.activeForPoint(t.to),s.activeForPoint(s.to))||r.comparePoint(l,h,t.point,s.point):h>l&&!Td(t.active,s.active)&&r.compareRange(l,h,t.active,s.active),f>o)break;(d||t.openEnd!=s.openEnd)&&r.boundChange&&r.boundChange(f),l=f,u<=0&&t.next(),u>=0&&s.next()}}function Td(t,e){if(t.length!=e.length)return!1;for(let s=0;s<t.length;s++)if(t[s]!=e[s]&&!t[s].eq(e[s]))return!1;return!0}function ml(t,e){for(let s=e,i=t.length-1;s<i;s++)t[s]=t[s+1];t.pop()}function gl(t,e,s){for(let i=t.length-1;i>=e;i--)t[i+1]=t[i];t[e]=s}function Kh(t,e){let s=-1,i=1e9;for(let n=0;n<e.length;n++)(e[n]-i||t[n].endSide-t[s].endSide)<0&&(s=n,i=e[n]);return s}function Dr(t,e,s=t.length){let i=0;for(let n=0;n<s&&n<t.length;)t.charCodeAt(n)==9?(i+=e-i%e,n++):(i++,n=Kt(t,n));return i}function $d(t,e,s,i){for(let n=0,r=0;;){if(r>=e)return n;if(n==t.length)break;r+=t.charCodeAt(n)==9?s-r%s:1,n=Kt(t,n)}return i===!0?-1:t.length}const Ed="",Gh=typeof Symbol>"u"?"__"+Ed:Symbol.for(Ed),Od=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Jh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class on{constructor(e,s){this.rules=[];let{finish:i}=s||{};function n(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function r(o,l,a,d){let u=[],f=/^@(\w+)\b/.exec(o[0]),h=f&&f[1]=="keyframes";if(f&&l==null)return a.push(o[0]+";");for(let m in l){let _=l[m];if(/&/.test(m))r(m.split(/,\s*/).map(p=>o.map(C=>p.replace(/&/,C))).reduce((p,C)=>p.concat(C)),_,a);else if(_&&typeof _=="object"){if(!f)throw new RangeError("The value of a property ("+m+") should be a primitive value.");r(n(m),_,u,h)}else _!=null&&u.push(m.replace(/_.*/,"").replace(/[A-Z]/g,p=>"-"+p.toLowerCase())+": "+_+";")}(u.length||h)&&a.push((i&&!f&&!d?o.map(i):o).join(", ")+" {"+u.join(" ")+"}")}for(let o in e)r(n(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=Jh[Gh]||1;return Jh[Gh]=e+1,Ed+e.toString(36)}static mount(e,s,i){let n=e[Od],r=i&&i.nonce;n?r&&n.setNonce(r):n=new aS(e,r),n.mount(Array.isArray(s)?s:[s],e)}}let Yh=new Map;class aS{constructor(e,s){let i=e.ownerDocument||e,n=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&n.CSSStyleSheet){let r=Yh.get(i);if(r)return e[Od]=r;this.sheet=new n.CSSStyleSheet,Yh.set(i,this)}else this.styleTag=i.createElement("style"),s&&this.styleTag.setAttribute("nonce",s);this.modules=[],e[Od]=this}mount(e,s){let i=this.sheet,n=0,r=0;for(let o=0;o<e.length;o++){let l=e[o],a=this.modules.indexOf(l);if(a<r&&a>-1&&(this.modules.splice(a,1),r--,a=-1),a==-1){if(this.modules.splice(r++,0,l),i)for(let d=0;d<l.rules.length;d++)i.insertRule(l.rules[d],n++)}else{for(;r<a;)n+=this.modules[r++].rules.length;n+=l.rules.length,r++}}if(i)s.adoptedStyleSheets.indexOf(this.sheet)<0&&(s.adoptedStyleSheets=[this.sheet,...s.adoptedStyleSheets]);else{let o="";for(let a=0;a<this.modules.length;a++)o+=this.modules[a].getRules()+`
`;this.styleTag.textContent=o;let l=s.head||s;this.styleTag.parentNode!=l&&l.insertBefore(this.styleTag,l.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var ln={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},_o={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},uS=typeof navigator<"u"&&/Mac/.test(navigator.platform),dS=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Ht=0;Ht<10;Ht++)ln[48+Ht]=ln[96+Ht]=String(Ht);for(var Ht=1;Ht<=24;Ht++)ln[Ht+111]="F"+Ht;for(var Ht=65;Ht<=90;Ht++)ln[Ht]=String.fromCharCode(Ht+32),_o[Ht]=String.fromCharCode(Ht);for(var Du in ln)_o.hasOwnProperty(Du)||(_o[Du]=ln[Du]);function cS(t){var e=uS&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||dS&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",s=!e&&t.key||(t.shiftKey?_o:ln)[t.keyCode]||t.key||"Unidentified";return s=="Esc"&&(s="Escape"),s=="Del"&&(s="Delete"),s=="Left"&&(s="ArrowLeft"),s=="Up"&&(s="ArrowUp"),s=="Right"&&(s="ArrowRight"),s=="Down"&&(s="ArrowDown"),s}function ct(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,s=arguments[1];if(s&&typeof s=="object"&&s.nodeType==null&&!Array.isArray(s)){for(var i in s)if(Object.prototype.hasOwnProperty.call(s,i)){var n=s[i];typeof n=="string"?t.setAttribute(i,n):n!=null&&(t[i]=n)}e++}for(;e<arguments.length;e++)A0(t,arguments[e]);return t}function A0(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var s=0;s<e.length;s++)A0(t,e[s]);else throw new RangeError("Unsupported child node: "+e)}let us=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Pd=typeof document<"u"?document:{documentElement:{style:{}}};const jd=/Edge\/(\d+)/.exec(us.userAgent),V0=/MSIE \d/.test(us.userAgent),Ld=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(us.userAgent),Ja=!!(V0||Ld||jd),Xh=!Ja&&/gecko\/(\d+)/i.test(us.userAgent),Tu=!Ja&&/Chrome\/(\d+)/.exec(us.userAgent),fS="webkitFontSmoothing"in Pd.documentElement.style,Rd=!Ja&&/Apple Computer/.test(us.vendor),Zh=Rd&&(/Mobile\/\w+/.test(us.userAgent)||us.maxTouchPoints>2);var De={mac:Zh||/Mac/.test(us.platform),windows:/Win/.test(us.platform),linux:/Linux|X11/.test(us.platform),ie:Ja,ie_version:V0?Pd.documentMode||6:Ld?+Ld[1]:jd?+jd[1]:0,gecko:Xh,gecko_version:Xh?+(/Firefox\/(\d+)/.exec(us.userAgent)||[0,0])[1]:0,chrome:!!Tu,chrome_version:Tu?+Tu[1]:0,ios:Zh,android:/Android\b/.test(us.userAgent),webkit_version:fS?+(/\bAppleWebKit\/(\d+)/.exec(us.userAgent)||[0,0])[1]:0,safari:Rd,safari_version:Rd?+(/\bVersion\/(\d+(\.\d+)?)/.exec(us.userAgent)||[0,0])[1]:0,tabSize:Pd.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function So(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function Bd(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function Wl(t,e){if(!e.anchorNode)return!1;try{return Bd(t,e.anchorNode)}catch{return!1}}function Co(t){return t.nodeType==3?Ln(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function ro(t,e,s,i){return s?Qh(t,e,s,i,-1)||Qh(t,e,s,i,1):!1}function jn(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function fa(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function Qh(t,e,s,i,n){for(;;){if(t==s&&e==i)return!0;if(e==(n<0?0:bi(t))){if(t.nodeName=="DIV")return!1;let r=t.parentNode;if(!r||r.nodeType!=1)return!1;e=jn(t)+(n<0?0:1),t=r}else if(t.nodeType==1){if(t=t.childNodes[e+(n<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=n<0?bi(t):0}else return!1}}function bi(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Ya(t,e){let s=e?t.left:t.right;return{left:s,right:s,top:t.top,bottom:t.bottom}}function hS(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function M0(t,e){let s=e.width/t.offsetWidth,i=e.height/t.offsetHeight;return(s>.995&&s<1.005||!isFinite(s)||Math.abs(e.width-t.offsetWidth)<1)&&(s=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-t.offsetHeight)<1)&&(i=1),{scaleX:s,scaleY:i}}function pS(t,e,s,i,n,r,o,l){let a=t.ownerDocument,d=a.defaultView||window;for(let u=t,f=!1;u&&!f;)if(u.nodeType==1){let h,m=u==a.body,_=1,p=1;if(m)h=hS(d);else{if(/^(fixed|sticky)$/.test(getComputedStyle(u).position)&&(f=!0),u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let U=u.getBoundingClientRect();({scaleX:_,scaleY:p}=M0(u,U)),h={left:U.left,right:U.left+u.clientWidth*_,top:U.top,bottom:U.top+u.clientHeight*p}}let C=0,M=0;if(n=="nearest")e.top<h.top?(M=e.top-(h.top+o),s>0&&e.bottom>h.bottom+M&&(M=e.bottom-h.bottom+o)):e.bottom>h.bottom&&(M=e.bottom-h.bottom+o,s<0&&e.top-M<h.top&&(M=e.top-(h.top+o)));else{let U=e.bottom-e.top,B=h.bottom-h.top;M=(n=="center"&&U<=B?e.top+U/2-B/2:n=="start"||n=="center"&&s<0?e.top-o:e.bottom-B+o)-h.top}if(i=="nearest"?e.left<h.left?(C=e.left-(h.left+r),s>0&&e.right>h.right+C&&(C=e.right-h.right+r)):e.right>h.right&&(C=e.right-h.right+r,s<0&&e.left<h.left+C&&(C=e.left-(h.left+r))):C=(i=="center"?e.left+(e.right-e.left)/2-(h.right-h.left)/2:i=="start"==l?e.left-r:e.right-(h.right-h.left)+r)-h.left,C||M)if(m)d.scrollBy(C,M);else{let U=0,B=0;if(M){let F=u.scrollTop;u.scrollTop+=M/p,B=(u.scrollTop-F)*p}if(C){let F=u.scrollLeft;u.scrollLeft+=C/_,U=(u.scrollLeft-F)*_}e={left:e.left-U,top:e.top-B,right:e.right-U,bottom:e.bottom-B},U&&Math.abs(U-C)<1&&(i="nearest"),B&&Math.abs(B-M)<1&&(n="nearest")}if(m)break;(e.top<h.top||e.bottom>h.bottom||e.left<h.left||e.right>h.right)&&(e={left:Math.max(e.left,h.left),right:Math.min(e.right,h.right),top:Math.max(e.top,h.top),bottom:Math.min(e.bottom,h.bottom)}),u=u.assignedSlot||u.parentNode}else if(u.nodeType==11)u=u.host;else break}function mS(t){let e=t.ownerDocument,s,i;for(let n=t.parentNode;n&&!(n==e.body||s&&i);)if(n.nodeType==1)!i&&n.scrollHeight>n.clientHeight&&(i=n),!s&&n.scrollWidth>n.clientWidth&&(s=n),n=n.assignedSlot||n.parentNode;else if(n.nodeType==11)n=n.host;else break;return{x:s,y:i}}class gS{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:s,focusNode:i}=e;this.set(s,Math.min(e.anchorOffset,s?bi(s):0),i,Math.min(e.focusOffset,i?bi(i):0))}set(e,s,i,n){this.anchorNode=e,this.anchorOffset=s,this.focusNode=i,this.focusOffset=n}}let kn=null;De.safari&&De.safari_version>=26&&(kn=!1);function D0(t){if(t.setActive)return t.setActive();if(kn)return t.focus(kn);let e=[];for(let s=t;s&&(e.push(s,s.scrollTop,s.scrollLeft),s!=s.ownerDocument);s=s.parentNode);if(t.focus(kn==null?{get preventScroll(){return kn={preventScroll:!0},!0}}:void 0),!kn){kn=!1;for(let s=0;s<e.length;){let i=e[s++],n=e[s++],r=e[s++];i.scrollTop!=n&&(i.scrollTop=n),i.scrollLeft!=r&&(i.scrollLeft=r)}}}let ep;function Ln(t,e,s=e){let i=ep||(ep=document.createRange());return i.setEnd(t,s),i.setStart(t,e),i}function dr(t,e,s,i){let n={key:e,code:e,keyCode:s,which:s,cancelable:!0};i&&({altKey:n.altKey,ctrlKey:n.ctrlKey,shiftKey:n.shiftKey,metaKey:n.metaKey}=i);let r=new KeyboardEvent("keydown",n);r.synthetic=!0,t.dispatchEvent(r);let o=new KeyboardEvent("keyup",n);return o.synthetic=!0,t.dispatchEvent(o),r.defaultPrevented||o.defaultPrevented}function vS(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function T0(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function yS(t,e){let s=e.focusNode,i=e.focusOffset;if(!s||e.anchorNode!=s||e.anchorOffset!=i)return!1;for(i=Math.min(i,bi(s));;)if(i){if(s.nodeType!=1)return!1;let n=s.childNodes[i-1];n.contentEditable=="false"?i--:(s=n,i=bi(s))}else{if(s==t)return!0;i=jn(s),s=s.parentNode}}function $0(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function E0(t,e){for(let s=t,i=e;;){if(s.nodeType==3&&i>0)return{node:s,offset:i};if(s.nodeType==1&&i>0){if(s.contentEditable=="false")return null;s=s.childNodes[i-1],i=bi(s)}else if(s.parentNode&&!fa(s))i=jn(s),s=s.parentNode;else return null}}function O0(t,e){for(let s=t,i=e;;){if(s.nodeType==3&&i<s.nodeValue.length)return{node:s,offset:i};if(s.nodeType==1&&i<s.childNodes.length){if(s.contentEditable=="false")return null;s=s.childNodes[i],i=0}else if(s.parentNode&&!fa(s))i=jn(s)+1,s=s.parentNode;else return null}}class es{constructor(e,s,i=!0){this.node=e,this.offset=s,this.precise=i}static before(e,s){return new es(e.parentNode,jn(e),s)}static after(e,s){return new es(e.parentNode,jn(e)+1,s)}}const zc=[];class ut{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let s=this.posAtStart;for(let i of this.children){if(i==e)return s;s+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,s){if(this.flags&2){let i=this.dom,n=null,r;for(let o of this.children){if(o.flags&7){if(!o.dom&&(r=n?n.nextSibling:i.firstChild)){let l=ut.get(r);(!l||!l.parent&&l.canReuseDOM(o))&&o.reuseDOM(r)}o.sync(e,s),o.flags&=-8}if(r=n?n.nextSibling:i.firstChild,s&&!s.written&&s.node==i&&r!=o.dom&&(s.written=!0),o.dom.parentNode==i)for(;r&&r!=o.dom;)r=tp(r);else i.insertBefore(o.dom,r);n=o.dom}for(r=n?n.nextSibling:i.firstChild,r&&s&&s.node==i&&(s.written=!0);r;)r=tp(r)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,s),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,s){let i;if(e==this.dom)i=this.dom.childNodes[s];else{let n=bi(e)==0?0:s==0?-1:1;for(;;){let r=e.parentNode;if(r==this.dom)break;n==0&&r.firstChild!=r.lastChild&&(e==r.firstChild?n=-1:n=1),e=r}n<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!ut.get(i);)i=i.nextSibling;if(!i)return this.length;for(let n=0,r=0;;n++){let o=this.children[n];if(o.dom==i)return r;r+=o.length+o.breakAfter}}domBoundsAround(e,s,i=0){let n=-1,r=-1,o=-1,l=-1;for(let a=0,d=i,u=i;a<this.children.length;a++){let f=this.children[a],h=d+f.length;if(d<e&&h>s)return f.domBoundsAround(e,s,d);if(h>=e&&n==-1&&(n=a,r=d),d>s&&f.dom.parentNode==this.dom){o=a,l=u;break}u=h,d=h+f.breakAfter}return{from:r,to:l<0?i+this.length:l,startDOM:(n?this.children[n-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let s=this.parent;s;s=s.parent){if(e&&(s.flags|=2),s.flags&1)return;s.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let s=e.parent;if(!s)return e;e=s}}replaceChildren(e,s,i=zc){this.markDirty();for(let n=e;n<s;n++){let r=this.children[n];r.parent==this&&i.indexOf(r)<0&&r.destroy()}i.length<250?this.children.splice(e,s-e,...i):this.children=[].concat(this.children.slice(0,e),i,this.children.slice(s));for(let n=0;n<i.length;n++)i[n].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new P0(this.children,e,this.children.length)}childPos(e,s=1){return this.childCursor().findPos(e,s)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,s,i,n,r,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}ut.prototype.breakAfter=0;function tp(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class P0{constructor(e,s,i){this.children=e,this.pos=s,this.i=i,this.off=0}findPos(e,s=1){for(;;){if(e>this.pos||e==this.pos&&(s>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function j0(t,e,s,i,n,r,o,l,a){let{children:d}=t,u=d.length?d[e]:null,f=r.length?r[r.length-1]:null,h=f?f.breakAfter:o;if(!(e==i&&u&&!o&&!h&&r.length<2&&u.merge(s,n,r.length?f:null,s==0,l,a))){if(i<d.length){let m=d[i];m&&(n<m.length||m.breakAfter&&f?.breakAfter)?(e==i&&(m=m.split(n),n=0),!h&&f&&m.merge(0,n,f,!0,0,a)?r[r.length-1]=m:((n||m.children.length&&!m.children[0].length)&&m.merge(0,n,null,!1,0,a),r.push(m))):m?.breakAfter&&(f?f.breakAfter=1:o=1),i++}for(u&&(u.breakAfter=o,s>0&&(!o&&r.length&&u.merge(s,u.length,r[0],!1,l,0)?u.breakAfter=r.shift().breakAfter:(s<u.length||u.children.length&&u.children[u.children.length-1].length==0)&&u.merge(s,u.length,null,!1,l,0),e++));e<i&&r.length;)if(d[i-1].become(r[r.length-1]))i--,r.pop(),a=r.length?0:l;else if(d[e].become(r[0]))e++,r.shift(),l=r.length?0:a;else break;!r.length&&e&&i<d.length&&!d[e-1].breakAfter&&d[i].merge(0,0,d[e-1],!1,l,a)&&e--,(e<i||r.length)&&t.replaceChildren(e,i,r)}}function L0(t,e,s,i,n,r){let o=t.childCursor(),{i:l,off:a}=o.findPos(s,1),{i:d,off:u}=o.findPos(e,-1),f=e-s;for(let h of i)f+=h.length;t.length+=f,j0(t,d,u,l,a,i,0,n,r)}const bS=256;class Qs extends ut{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,s){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(s&&s.node==this.dom&&(s.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,s,i){return this.flags&8||i&&(!(i instanceof Qs)||this.length-(s-e)+i.length>bS||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(s),this.markDirty(),!0)}split(e){let s=new Qs(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),s.flags|=this.flags&8,s}localPosFromDOM(e,s){return e==this.dom?s:s?this.text.length:0}domAtPos(e){return new es(this.dom,e)}domBoundsAround(e,s,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,s){return xS(this.dom,e,s)}}class ji extends ut{constructor(e,s=[],i=0){super(),this.mark=e,this.children=s,this.length=i;for(let n of s)n.setParent(this)}setAttrs(e){if(T0(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let s in this.mark.attrs)e.setAttribute(s,this.mark.attrs[s]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,s){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,s)}merge(e,s,i,n,r,o){return i&&(!(i instanceof ji&&i.mark.eq(this.mark))||e&&r<=0||s<this.length&&o<=0)?!1:(L0(this,e,s,i?i.children.slice():[],r-1,o-1),this.markDirty(),!0)}split(e){let s=[],i=0,n=-1,r=0;for(let l of this.children){let a=i+l.length;a>e&&s.push(i<e?l.split(e-i):l),n<0&&i>=e&&(n=r),i=a,r++}let o=this.length-e;return this.length=e,n>-1&&(this.children.length=n,this.markDirty()),new ji(this.mark,s,o)}domAtPos(e){return R0(this,e)}coordsAt(e,s){return I0(this,e,s)}}function xS(t,e,s){let i=t.nodeValue.length;e>i&&(e=i);let n=e,r=e,o=0;e==0&&s<0||e==i&&s>=0?De.chrome||De.gecko||(e?(n--,o=1):r<i&&(r++,o=-1)):s<0?n--:r<i&&r++;let l=Ln(t,n,r).getClientRects();if(!l.length)return null;let a=l[(o?o<0:s>=0)?0:l.length-1];return De.safari&&!o&&a.width==0&&(a=Array.prototype.find.call(l,d=>d.width)||a),o?Ya(a,o<0):a||null}class Yi extends ut{static create(e,s,i){return new Yi(e,s,i)}constructor(e,s,i){super(),this.widget=e,this.length=s,this.side=i,this.prevWidget=null}split(e){let s=Yi.create(this.widget,this.length-e,this.side);return this.length-=e,s}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,s,i,n,r,o){return i&&(!(i instanceof Yi)||!this.widget.compare(i.widget)||e>0&&r<=0||s<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-s),!0)}become(e){return e instanceof Yi&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return st.empty;let e=this;for(;e.parent;)e=e.parent;let{view:s}=e,i=s&&s.state.doc,n=this.posAtStart;return i?i.slice(n,n+this.length):st.empty}domAtPos(e){return(this.length?e==0:this.side>0)?es.before(this.dom):es.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,s){let i=this.widget.coordsAt(this.dom,e,s);if(i)return i;let n=this.dom.getClientRects(),r=null;if(!n.length)return null;let o=this.side?this.side<0:e>0;for(let l=o?n.length-1:0;r=n[l],!(e>0?l==0:l==n.length-1||r.top<r.bottom);l+=o?-1:1);return Ya(r,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class yr extends ut{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof yr&&e.side==this.side}split(){return new yr(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?es.before(this.dom):es.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return st.empty}get isHidden(){return!0}}Qs.prototype.children=Yi.prototype.children=yr.prototype.children=zc;function R0(t,e){let s=t.dom,{children:i}=t,n=0;for(let r=0;n<i.length;n++){let o=i[n],l=r+o.length;if(!(l==r&&o.getSide()<=0)){if(e>r&&e<l&&o.dom.parentNode==s)return o.domAtPos(e-r);if(e<=r)break;r=l}}for(let r=n;r>0;r--){let o=i[r-1];if(o.dom.parentNode==s)return o.domAtPos(o.length)}for(let r=n;r<i.length;r++){let o=i[r];if(o.dom.parentNode==s)return o.domAtPos(0)}return new es(s,0)}function B0(t,e,s){let i,{children:n}=t;s>0&&e instanceof ji&&n.length&&(i=n[n.length-1])instanceof ji&&i.mark.eq(e.mark)?B0(i,e.children[0],s-1):(n.push(e),e.setParent(t)),t.length+=e.length}function I0(t,e,s){let i=null,n=-1,r=null,o=-1;function l(d,u){for(let f=0,h=0;f<d.children.length&&h<=u;f++){let m=d.children[f],_=h+m.length;_>=u&&(m.children.length?l(m,u-h):(!r||r.isHidden&&(s>0||wS(r,m)))&&(_>u||h==_&&m.getSide()>0)?(r=m,o=u-h):(h<u||h==_&&m.getSide()<0&&!m.isHidden)&&(i=m,n=u-h)),h=_}}l(t,e);let a=(s<0?i:r)||i||r;return a?a.coordsAt(Math.max(0,a==i?n:o),s):kS(t)}function kS(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let s=Co(e);return s[s.length-1]||null}function wS(t,e){let s=t.coordsAt(0,1),i=e.coordsAt(0,1);return s&&i&&i.top<s.bottom}function Id(t,e){for(let s in t)s=="class"&&e.class?e.class+=" "+t.class:s=="style"&&e.style?e.style+=";"+t.style:e[s]=t[s];return e}const sp=Object.create(null);function ha(t,e,s){if(t==e)return!0;t||(t=sp),e||(e=sp);let i=Object.keys(t),n=Object.keys(e);if(i.length-(s&&i.indexOf(s)>-1?1:0)!=n.length-(s&&n.indexOf(s)>-1?1:0))return!1;for(let r of i)if(r!=s&&(n.indexOf(r)==-1||t[r]!==e[r]))return!1;return!0}function Nd(t,e,s){let i=!1;if(e)for(let n in e)s&&n in s||(i=!0,n=="style"?t.style.cssText="":t.removeAttribute(n));if(s)for(let n in s)e&&e[n]==s[n]||(i=!0,n=="style"?t.style.cssText=s[n]:t.setAttribute(n,s[n]));return i}function _S(t){let e=Object.create(null);for(let s=0;s<t.attributes.length;s++){let i=t.attributes[s];e[i.name]=i.value}return e}class cn{eq(e){return!1}updateDOM(e,s){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,s,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var fs=(function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t})(fs||(fs={}));class Fe extends Pn{constructor(e,s,i,n){super(),this.startSide=e,this.endSide=s,this.widget=i,this.spec=n}get heightRelevant(){return!1}static mark(e){return new zo(e)}static widget(e){let s=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return s+=i&&!e.inlineOrder?s>0?3e8:-4e8:s>0?1e8:-1e8,new an(e,s,s,i,e.widget||null,!1)}static replace(e){let s=!!e.block,i,n;if(e.isBlockGap)i=-5e8,n=4e8;else{let{start:r,end:o}=N0(e,s);i=(r?s?-3e8:-1:5e8)-1,n=(o?s?2e8:1:-6e8)+1}return new an(e,i,n,s,e.widget||null,!0)}static line(e){return new Fo(e)}static set(e,s=!1){return tt.of(e,s)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Fe.none=tt.empty;class zo extends Fe{constructor(e){let{start:s,end:i}=N0(e);super(s?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var s,i;return this==e||e instanceof zo&&this.tagName==e.tagName&&(this.class||((s=this.attrs)===null||s===void 0?void 0:s.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&ha(this.attrs,e.attrs,"class")}range(e,s=e){if(e>=s)throw new RangeError("Mark decorations may not be empty");return super.range(e,s)}}zo.prototype.point=!1;class Fo extends Fe{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Fo&&this.spec.class==e.spec.class&&ha(this.spec.attributes,e.spec.attributes)}range(e,s=e){if(s!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,s)}}Fo.prototype.mapMode=cs.TrackBefore;Fo.prototype.point=!0;class an extends Fe{constructor(e,s,i,n,r,o){super(s,i,r,e),this.block=n,this.isReplace=o,this.mapMode=n?s<=0?cs.TrackBefore:cs.TrackAfter:cs.TrackDel}get type(){return this.startSide!=this.endSide?fs.WidgetRange:this.startSide<=0?fs.WidgetBefore:fs.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof an&&SS(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,s=e){if(this.isReplace&&(e>s||e==s&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&s!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,s)}}an.prototype.point=!0;function N0(t,e=!1){let{inclusiveStart:s,inclusiveEnd:i}=t;return s==null&&(s=t.inclusive),i==null&&(i=t.inclusive),{start:s??e,end:i??e}}function SS(t,e){return t==e||!!(t&&e&&t.compare(e))}function ql(t,e,s,i=0){let n=s.length-1;n>=0&&s[n]+i>=t?s[n]=Math.max(s[n],e):s.push(t,e)}class $t extends ut{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,s,i,n,r,o){if(i){if(!(i instanceof $t))return!1;this.dom||i.transferDOM(this)}return n&&this.setDeco(i?i.attrs:null),L0(this,e,s,i?i.children.slice():[],r,o),!0}split(e){let s=new $t;if(s.breakAfter=this.breakAfter,this.length==0)return s;let{i,off:n}=this.childPos(e);n&&(s.append(this.children[i].split(n),0),this.children[i].merge(n,this.children[i].length,null,!1,0,0),i++);for(let r=i;r<this.children.length;r++)s.append(this.children[r],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,s}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){ha(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,s){B0(this,e,s)}addLineDeco(e){let s=e.spec.attributes,i=e.spec.class;s&&(this.attrs=Id(s,this.attrs||{})),i&&(this.attrs=Id({class:i},this.attrs||{}))}domAtPos(e){return R0(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,s){var i;this.dom?this.flags&4&&(T0(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(Nd(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,s);let n=this.dom.lastChild;for(;n&&ut.get(n)instanceof ji;)n=n.lastChild;if(!n||!this.length||n.nodeName!="BR"&&((i=ut.get(n))===null||i===void 0?void 0:i.isEditable)==!1&&(!De.ios||!this.children.some(r=>r instanceof Qs))){let r=document.createElement("BR");r.cmIgnore=!0,this.dom.appendChild(r)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,s;for(let i of this.children){if(!(i instanceof Qs)||/[^ -~]/.test(i.text))return null;let n=Co(i.dom);if(n.length!=1)return null;e+=n[0].width,s=n[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:s}:null}coordsAt(e,s){let i=I0(this,e,s);if(!this.children.length&&i&&this.parent){let{heightOracle:n}=this.parent.view.viewState,r=i.bottom-i.top;if(Math.abs(r-n.lineHeight)<2&&n.textHeight<r){let o=(r-n.textHeight)/2;return{top:i.top+o,bottom:i.bottom-o,left:i.left,right:i.left}}}return i}become(e){return e instanceof $t&&this.children.length==0&&e.children.length==0&&ha(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,s){for(let i=0,n=0;i<e.children.length;i++){let r=e.children[i],o=n+r.length;if(o>=s){if(r instanceof $t)return r;if(o>s)break}n=o+r.breakAfter}return null}}class $i extends ut{constructor(e,s,i){super(),this.widget=e,this.length=s,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,s,i,n,r,o){return i&&(!(i instanceof $i)||!this.widget.compare(i.widget)||e>0&&r<=0||s<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-s),!0)}domAtPos(e){return e==0?es.before(this.dom):es.after(this.dom,e==this.length)}split(e){let s=this.length-e;this.length=e;let i=new $i(this.widget,s,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return zc}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):st.empty}domBoundsAround(){return null}become(e){return e instanceof $i&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,s){let i=this.widget.coordsAt(this.dom,e,s);return i||(this.widget instanceof Ud?null:Ya(this.dom.getBoundingClientRect(),this.length?e==0:s<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:s,endSide:i}=this.deco;return s==i?!1:e<0?s<0:i>0}}class Ud extends cn{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class oo{constructor(e,s,i,n){this.doc=e,this.pos=s,this.end=i,this.disallowBlockEffectsFor=n,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=s}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof $i&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new $t),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(vl(new yr(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof $i)&&this.getLine()}buildText(e,s,i){for(;e>0;){if(this.textOff==this.text.length){let{value:o,lineBreak:l,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(l){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=o,this.textOff=0}let n=Math.min(this.text.length-this.textOff,e),r=Math.min(n,512);this.flushBuffer(s.slice(s.length-i)),this.getLine().append(vl(new Qs(this.text.slice(this.textOff,this.textOff+r)),s),i),this.atCursorPos=!0,this.textOff+=r,e-=r,i=n<=r?0:s.length}}span(e,s,i,n){this.buildText(s-e,i,n),this.pos=s,this.openStart<0&&(this.openStart=n)}point(e,s,i,n,r,o){if(this.disallowBlockEffectsFor[o]&&i instanceof an){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(s>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=s-e;if(i instanceof an)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new $i(i.widget||br.block,l,i));else{let a=Yi.create(i.widget||br.inline,l,l?0:i.startSide),d=this.atCursorPos&&!a.isEditable&&r<=n.length&&(e<s||i.startSide>0),u=!a.isEditable&&(e<s||r>n.length||i.startSide<=0),f=this.getLine();this.pendingBuffer==2&&!d&&!a.isEditable&&(this.pendingBuffer=0),this.flushBuffer(n),d&&(f.append(vl(new yr(1),n),r),r=n.length+Math.max(0,r-n.length)),f.append(vl(a,n),r),this.atCursorPos=u,this.pendingBuffer=u?e<s||r>n.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=n.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=s),this.openStart<0&&(this.openStart=r)}static build(e,s,i,n,r){let o=new oo(e,s,i,r);return o.openEnd=tt.spans(n,s,i,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function vl(t,e){for(let s of e)t=new ji(s,[t],t.length);return t}class br extends cn{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}br.inline=new br("span");br.block=new br("div");var bt=(function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t})(bt||(bt={}));const Rn=bt.LTR,Fc=bt.RTL;function U0(t){let e=[];for(let s=0;s<t.length;s++)e.push(1<<+t[s]);return e}const CS=U0("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),AS=U0("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),zd=Object.create(null),ri=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),s=t.charCodeAt(1);zd[e]=s,zd[s]=-e}function z0(t){return t<=247?CS[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?AS[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const VS=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Xi{get dir(){return this.level%2?Fc:Rn}constructor(e,s,i){this.from=e,this.to=s,this.level=i}side(e,s){return this.dir==s==e?this.to:this.from}forward(e,s){return e==(this.dir==s)}static find(e,s,i,n){let r=-1;for(let o=0;o<e.length;o++){let l=e[o];if(l.from<=s&&l.to>=s){if(l.level==i)return o;(r<0||(n!=0?n<0?l.from<s:l.to>s:e[r].level>l.level))&&(r=o)}}if(r<0)throw new RangeError("Index out of range");return r}}function F0(t,e){if(t.length!=e.length)return!1;for(let s=0;s<t.length;s++){let i=t[s],n=e[s];if(i.from!=n.from||i.to!=n.to||i.direction!=n.direction||!F0(i.inner,n.inner))return!1}return!0}const ft=[];function MS(t,e,s,i,n){for(let r=0;r<=i.length;r++){let o=r?i[r-1].to:e,l=r<i.length?i[r].from:s,a=r?256:n;for(let d=o,u=a,f=a;d<l;d++){let h=z0(t.charCodeAt(d));h==512?h=u:h==8&&f==4&&(h=16),ft[d]=h==4?2:h,h&7&&(f=h),u=h}for(let d=o,u=a,f=a;d<l;d++){let h=ft[d];if(h==128)d<l-1&&u==ft[d+1]&&u&24?h=ft[d]=u:ft[d]=256;else if(h==64){let m=d+1;for(;m<l&&ft[m]==64;)m++;let _=d&&u==8||m<s&&ft[m]==8?f==1?1:8:256;for(let p=d;p<m;p++)ft[p]=_;d=m-1}else h==8&&f==1&&(ft[d]=1);u=h,h&7&&(f=h)}}}function DS(t,e,s,i,n){let r=n==1?2:1;for(let o=0,l=0,a=0;o<=i.length;o++){let d=o?i[o-1].to:e,u=o<i.length?i[o].from:s;for(let f=d,h,m,_;f<u;f++)if(m=zd[h=t.charCodeAt(f)])if(m<0){for(let p=l-3;p>=0;p-=3)if(ri[p+1]==-m){let C=ri[p+2],M=C&2?n:C&4?C&1?r:n:0;M&&(ft[f]=ft[ri[p]]=M),l=p;break}}else{if(ri.length==189)break;ri[l++]=f,ri[l++]=h,ri[l++]=a}else if((_=ft[f])==2||_==1){let p=_==n;a=p?0:1;for(let C=l-3;C>=0;C-=3){let M=ri[C+2];if(M&2)break;if(p)ri[C+2]|=2;else{if(M&4)break;ri[C+2]|=4}}}}}function TS(t,e,s,i){for(let n=0,r=i;n<=s.length;n++){let o=n?s[n-1].to:t,l=n<s.length?s[n].from:e;for(let a=o;a<l;){let d=ft[a];if(d==256){let u=a+1;for(;;)if(u==l){if(n==s.length)break;u=s[n++].to,l=n<s.length?s[n].from:e}else if(ft[u]==256)u++;else break;let f=r==1,h=(u<e?ft[u]:i)==1,m=f==h?f?1:2:i;for(let _=u,p=n,C=p?s[p-1].to:t;_>a;)_==C&&(_=s[--p].from,C=p?s[p-1].to:t),ft[--_]=m;a=u}else r=d,a++}}}function Fd(t,e,s,i,n,r,o){let l=i%2?2:1;if(i%2==n%2)for(let a=e,d=0;a<s;){let u=!0,f=!1;if(d==r.length||a<r[d].from){let p=ft[a];p!=l&&(u=!1,f=p==16)}let h=!u&&l==1?[]:null,m=u?i:i+1,_=a;e:for(;;)if(d<r.length&&_==r[d].from){if(f)break e;let p=r[d];if(!u)for(let C=p.to,M=d+1;;){if(C==s)break e;if(M<r.length&&r[M].from==C)C=r[M++].to;else{if(ft[C]==l)break e;break}}if(d++,h)h.push(p);else{p.from>a&&o.push(new Xi(a,p.from,m));let C=p.direction==Rn!=!(m%2);Hd(t,C?i+1:i,n,p.inner,p.from,p.to,o),a=p.to}_=p.to}else{if(_==s||(u?ft[_]!=l:ft[_]==l))break;_++}h?Fd(t,a,_,i+1,n,h,o):a<_&&o.push(new Xi(a,_,m)),a=_}else for(let a=s,d=r.length;a>e;){let u=!0,f=!1;if(!d||a>r[d-1].to){let p=ft[a-1];p!=l&&(u=!1,f=p==16)}let h=!u&&l==1?[]:null,m=u?i:i+1,_=a;e:for(;;)if(d&&_==r[d-1].to){if(f)break e;let p=r[--d];if(!u)for(let C=p.from,M=d;;){if(C==e)break e;if(M&&r[M-1].to==C)C=r[--M].from;else{if(ft[C-1]==l)break e;break}}if(h)h.push(p);else{p.to<a&&o.push(new Xi(p.to,a,m));let C=p.direction==Rn!=!(m%2);Hd(t,C?i+1:i,n,p.inner,p.from,p.to,o),a=p.from}_=p.from}else{if(_==e||(u?ft[_-1]!=l:ft[_-1]==l))break;_--}h?Fd(t,_,a,i+1,n,h,o):_<a&&o.push(new Xi(_,a,m)),a=_}}function Hd(t,e,s,i,n,r,o){let l=e%2?2:1;MS(t,n,r,i,l),DS(t,n,r,i,l),TS(n,r,i,l),Fd(t,n,r,e,s,i,o)}function $S(t,e,s){if(!t)return[new Xi(0,0,e==Fc?1:0)];if(e==Rn&&!s.length&&!VS.test(t))return H0(t.length);if(s.length)for(;t.length>ft.length;)ft[ft.length]=256;let i=[],n=e==Rn?0:1;return Hd(t,n,n,s,0,t.length,i),i}function H0(t){return[new Xi(0,t,0)]}let W0="";function ES(t,e,s,i,n){var r;let o=i.head-t.from,l=Xi.find(e,o,(r=i.bidiLevel)!==null&&r!==void 0?r:-1,i.assoc),a=e[l],d=a.side(n,s);if(o==d){let h=l+=n?1:-1;if(h<0||h>=e.length)return null;a=e[l=h],o=a.side(!n,s),d=a.side(n,s)}let u=Kt(t.text,o,a.forward(n,s));(u<a.from||u>a.to)&&(u=d),W0=t.text.slice(Math.min(o,u),Math.max(o,u));let f=l==(n?e.length-1:0)?null:e[l+(n?1:-1)];return f&&u==d&&f.level+(n?0:1)<a.level?ue.cursor(f.side(!n,s)+t.from,f.forward(n,s)?1:-1,f.level):ue.cursor(u+t.from,a.forward(n,s)?-1:1,a.level)}function OS(t,e,s){for(let i=e;i<s;i++){let n=z0(t.charCodeAt(i));if(n==1)return Rn;if(n==2||n==4)return Fc}return Rn}const q0=Ee.define(),K0=Ee.define(),G0=Ee.define(),J0=Ee.define(),Wd=Ee.define(),Y0=Ee.define(),X0=Ee.define(),Hc=Ee.define(),Wc=Ee.define(),Z0=Ee.define({combine:t=>t.some(e=>e)}),Q0=Ee.define({combine:t=>t.some(e=>e)}),ev=Ee.define();class cr{constructor(e,s="nearest",i="nearest",n=5,r=5,o=!1){this.range=e,this.y=s,this.x=i,this.yMargin=n,this.xMargin=r,this.isSnapshot=o}map(e){return e.empty?this:new cr(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new cr(ue.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const yl=Ge.define({map:(t,e)=>t.map(e)}),tv=Ge.define();function vs(t,e,s){let i=t.facet(J0);i.length?i[0](e):window.onerror&&window.onerror(String(e),s,void 0,void 0,e)||(s?console.error(s+":",e):console.error(e))}const Ti=Ee.define({combine:t=>t.length?t[0]:!0});let PS=0;const Xn=Ee.define({combine(t){return t.filter((e,s)=>{for(let i=0;i<s;i++)if(t[i].plugin==e.plugin)return!1;return!0})}});class Et{constructor(e,s,i,n,r){this.id=e,this.create=s,this.domEventHandlers=i,this.domEventObservers=n,this.baseExtensions=r(this),this.extension=this.baseExtensions.concat(Xn.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(Xn.of({plugin:this,arg:e}))}static define(e,s){const{eventHandlers:i,eventObservers:n,provide:r,decorations:o}=s||{};return new Et(PS++,e,i,n,l=>{let a=[];return o&&a.push(Ao.of(d=>{let u=d.plugin(l);return u?o(u):Fe.none})),r&&a.push(r(l)),a})}static fromClass(e,s){return Et.define((i,n)=>new e(i,n),s)}}class $u{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let s=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(s)}catch(i){if(vs(s.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(s){vs(e.state,s,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var s;if(!((s=this.value)===null||s===void 0)&&s.destroy)try{this.value.destroy()}catch(i){vs(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const sv=Ee.define(),qc=Ee.define(),Ao=Ee.define(),iv=Ee.define(),Ho=Ee.define(),nv=Ee.define();function ip(t,e){let s=t.state.facet(nv);if(!s.length)return s;let i=s.map(r=>r instanceof Function?r(t):r),n=[];return tt.spans(i,e.from,e.to,{point(){},span(r,o,l,a){let d=r-e.from,u=o-e.from,f=n;for(let h=l.length-1;h>=0;h--,a--){let m=l[h].spec.bidiIsolate,_;if(m==null&&(m=OS(e.text,d,u)),a>0&&f.length&&(_=f[f.length-1]).to==d&&_.direction==m)_.to=u,f=_.inner;else{let p={from:d,to:u,direction:m,inner:[]};f.push(p),f=p.inner}}}}),n}const rv=Ee.define();function Kc(t){let e=0,s=0,i=0,n=0;for(let r of t.state.facet(rv)){let o=r(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(s=Math.max(s,o.right)),o.top!=null&&(i=Math.max(i,o.top)),o.bottom!=null&&(n=Math.max(n,o.bottom)))}return{left:e,right:s,top:i,bottom:n}}const Wr=Ee.define();class Ns{constructor(e,s,i,n){this.fromA=e,this.toA=s,this.fromB=i,this.toB=n}join(e){return new Ns(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let s=e.length,i=this;for(;s>0;s--){let n=e[s-1];if(!(n.fromA>i.toA)){if(n.toA<i.fromA)break;i=i.join(n),e.splice(s-1,1)}}return e.splice(s,0,i),e}static extendWithRanges(e,s){if(s.length==0)return e;let i=[];for(let n=0,r=0,o=0,l=0;;n++){let a=n==e.length?null:e[n],d=o-l,u=a?a.fromB:1e9;for(;r<s.length&&s[r]<u;){let f=s[r],h=s[r+1],m=Math.max(l,f),_=Math.min(u,h);if(m<=_&&new Ns(m+d,_+d,m,_).addToSet(i),h>u)break;r+=2}if(!a)return i;new Ns(a.fromA,a.toA,a.fromB,a.toB).addToSet(i),o=a.toA,l=a.toB}}}class pa{constructor(e,s,i){this.view=e,this.state=s,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=Lt.empty(this.startState.doc.length);for(let r of i)this.changes=this.changes.compose(r.changes);let n=[];this.changes.iterChangedRanges((r,o,l,a)=>n.push(new Ns(r,o,l,a))),this.changedRanges=n}static create(e,s,i){return new pa(e,s,i)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class np extends ut{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Fe.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new $t],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Ns(0,0,0,e.state.doc.length)],0,null)}update(e){var s;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:d,toA:u})=>u<this.minWidthFrom||d>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let n=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((s=this.domChanged)===null||s===void 0)&&s.newSel?n=this.domChanged.newSel.head:!US(e.changes,this.hasComposition)&&!e.selectionSet&&(n=e.state.selection.main.head));let r=n>-1?LS(this.view,e.changes,n):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:d,to:u}=this.hasComposition;i=new Ns(d,u,e.changes.mapPos(d,-1),e.changes.mapPos(u,1)).addToSet(i.slice())}this.hasComposition=r?{from:r.range.fromB,to:r.range.toB}:null,(De.ie||De.chrome)&&!r&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,l=this.updateDeco(),a=IS(o,l,e.changes);return i=Ns.extendWithRanges(i,a),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,e.startState.doc.length,r),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,s,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,s,i);let{observer:n}=this.view;n.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=De.chrome||De.ios?{node:n.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||n.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof $i&&o.widget instanceof Ud&&r.push(o.dom);n.updateGaps(r)}updateChildren(e,s,i){let n=i?i.range.addToSet(e.slice()):e,r=this.childCursor(s);for(let o=n.length-1;;o--){let l=o>=0?n[o]:null;if(!l)break;let{fromA:a,toA:d,fromB:u,toB:f}=l,h,m,_,p;if(i&&i.range.fromB<f&&i.range.toB>u){let F=oo.build(this.view.state.doc,u,i.range.fromB,this.decorations,this.dynamicDecorationMap),j=oo.build(this.view.state.doc,i.range.toB,f,this.decorations,this.dynamicDecorationMap);m=F.breakAtStart,_=F.openStart,p=j.openEnd;let T=this.compositionView(i);j.breakAtStart?T.breakAfter=1:j.content.length&&T.merge(T.length,T.length,j.content[0],!1,j.openStart,0)&&(T.breakAfter=j.content[0].breakAfter,j.content.shift()),F.content.length&&T.merge(0,0,F.content[F.content.length-1],!0,0,F.openEnd)&&F.content.pop(),h=F.content.concat(T).concat(j.content)}else({content:h,breakAtStart:m,openStart:_,openEnd:p}=oo.build(this.view.state.doc,u,f,this.decorations,this.dynamicDecorationMap));let{i:C,off:M}=r.findPos(d,1),{i:U,off:B}=r.findPos(a,-1);j0(this,U,B,C,M,h,m,_,p)}i&&this.fixCompositionDOM(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let s of e.transactions)for(let i of s.effects)i.is(tv)&&(this.editContextFormatting=i.value)}compositionView(e){let s=new Qs(e.text.nodeValue);s.flags|=8;for(let{deco:n}of e.marks)s=new ji(n,[s],s.length);let i=new $t;return i.append(s,0),i}fixCompositionDOM(e){let s=(r,o)=>{o.flags|=8|(o.children.some(a=>a.flags&7)?1:0),this.markedForComposition.add(o);let l=ut.get(r);l&&l!=o&&(l.dom=null),o.setDOM(r)},i=this.childPos(e.range.fromB,1),n=this.children[i.i];s(e.line,n);for(let r=e.marks.length-1;r>=-1;r--)i=n.childPos(i.off,1),n=n.children[i.i],s(r>=0?e.marks[r].node:e.text,n)}updateSelection(e=!1,s=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,n=i==this.dom,r=!n&&!(this.view.state.facet(Ti)||this.dom.tabIndex>-1)&&Wl(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(n||s||r))return;let o=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(l.anchor)),d=l.empty?a:this.moveToLine(this.domAtPos(l.head));if(De.gecko&&l.empty&&!this.hasComposition&&jS(a)){let f=document.createTextNode("");this.view.observer.ignore(()=>a.node.insertBefore(f,a.node.childNodes[a.offset]||null)),a=d=new es(f,0),o=!0}let u=this.view.observer.selectionRange;(o||!u.focusNode||(!ro(a.node,a.offset,u.anchorNode,u.anchorOffset)||!ro(d.node,d.offset,u.focusNode,u.focusOffset))&&!this.suppressWidgetCursorChange(u,l))&&(this.view.observer.ignore(()=>{De.android&&De.chrome&&this.dom.contains(u.focusNode)&&NS(u.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let f=So(this.view.root);if(f)if(l.empty){if(De.gecko){let h=RS(a.node,a.offset);if(h&&h!=3){let m=(h==1?E0:O0)(a.node,a.offset);m&&(a=new es(m.node,m.offset))}}f.collapse(a.node,a.offset),l.bidiLevel!=null&&f.caretBidiLevel!==void 0&&(f.caretBidiLevel=l.bidiLevel)}else if(f.extend){f.collapse(a.node,a.offset);try{f.extend(d.node,d.offset)}catch{}}else{let h=document.createRange();l.anchor>l.head&&([a,d]=[d,a]),h.setEnd(d.node,d.offset),h.setStart(a.node,a.offset),f.removeAllRanges(),f.addRange(h)}r&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(a,d)),this.impreciseAnchor=a.precise?null:new es(u.anchorNode,u.anchorOffset),this.impreciseHead=d.precise?null:new es(u.focusNode,u.focusOffset)}suppressWidgetCursorChange(e,s){return this.hasComposition&&s.empty&&ro(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==s.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,s=e.state.selection.main,i=So(e.root),{anchorNode:n,anchorOffset:r}=e.observer.selectionRange;if(!i||!s.empty||!s.assoc||!i.modify)return;let o=$t.find(this,s.head);if(!o)return;let l=o.posAtStart;if(s.head==l||s.head==l+o.length)return;let a=this.coordsAt(s.head,-1),d=this.coordsAt(s.head,1);if(!a||!d||a.bottom>d.top)return;let u=this.domAtPos(s.head+s.assoc);i.collapse(u.node,u.offset),i.modify("move",s.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let f=e.observer.selectionRange;e.docView.posFromDOM(f.anchorNode,f.anchorOffset)!=s.from&&i.collapse(n,r)}moveToLine(e){let s=this.dom,i;if(e.node!=s)return e;for(let n=e.offset;!i&&n<s.childNodes.length;n++){let r=ut.get(s.childNodes[n]);r instanceof $t&&(i=r.domAtPos(0))}for(let n=e.offset-1;!i&&n>=0;n--){let r=ut.get(s.childNodes[n]);r instanceof $t&&(i=r.domAtPos(r.length))}return i?new es(i.node,i.offset,!0):e}nearest(e){for(let s=e;s;){let i=ut.get(s);if(i&&i.rootView==this)return i;s=s.parentNode}return null}posFromDOM(e,s){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,s)+i.posAtStart}domAtPos(e){let{i:s,off:i}=this.childCursor().findPos(e,-1);for(;s<this.children.length-1;){let n=this.children[s];if(i<n.length||n instanceof $t)break;s++,i=0}return this.children[s].domAtPos(i)}coordsAt(e,s){let i=null,n=0;for(let r=this.length,o=this.children.length-1;o>=0;o--){let l=this.children[o],a=r-l.breakAfter,d=a-l.length;if(a<e)break;if(d<=e&&(d<e||l.covers(-1))&&(a>e||l.covers(1))&&(!i||l instanceof $t&&!(i instanceof $t&&s>=0)))i=l,n=d;else if(i&&d==e&&a==e&&l instanceof $i&&Math.abs(s)<2){if(l.deco.startSide<0)break;o&&(i=null)}r=d}return i?i.coordsAt(e-n,s):null}coordsForChar(e){let{i:s,off:i}=this.childPos(e,1),n=this.children[s];if(!(n instanceof $t))return null;for(;n.children.length;){let{i:l,off:a}=n.childPos(i,1);for(;;l++){if(l==n.children.length)return null;if((n=n.children[l]).length)break}i=a}if(!(n instanceof Qs))return null;let r=Kt(n.text,i);if(r==i)return null;let o=Ln(n.dom,i,r).getClientRects();for(let l=0;l<o.length;l++){let a=o[l];if(l==o.length-1||a.top<a.bottom&&a.left<a.right)return a}return null}measureVisibleLineHeights(e){let s=[],{from:i,to:n}=e,r=this.view.contentDOM.clientWidth,o=r>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,a=this.view.textDirection==bt.LTR;for(let d=0,u=0;u<this.children.length;u++){let f=this.children[u],h=d+f.length;if(h>n)break;if(d>=i){let m=f.dom.getBoundingClientRect();if(s.push(m.height),o){let _=f.dom.lastChild,p=_?Co(_):[];if(p.length){let C=p[p.length-1],M=a?C.right-m.left:m.right-C.left;M>l&&(l=M,this.minWidth=r,this.minWidthFrom=d,this.minWidthTo=h)}}}d=h+f.breakAfter}return s}textDirectionAt(e){let{i:s}=this.childPos(e,1);return getComputedStyle(this.children[s].dom).direction=="rtl"?bt.RTL:bt.LTR}measureTextSize(){for(let r of this.children)if(r instanceof $t){let o=r.measureTextSize();if(o)return o}let e=document.createElement("div"),s,i,n;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let r=Co(e.firstChild)[0];s=e.getBoundingClientRect().height,i=r?r.width/27:7,n=r?r.height:s,e.remove()}),{lineHeight:s,charWidth:i,textHeight:n}}childCursor(e=this.length){let s=this.children.length;return s&&(e-=this.children[--s].length),new P0(this.children,e,s)}computeBlockGapDeco(){let e=[],s=this.view.viewState;for(let i=0,n=0;;n++){let r=n==s.viewports.length?null:s.viewports[n],o=r?r.from-1:this.length;if(o>i){let l=(s.lineBlockAt(o).bottom-s.lineBlockAt(i).top)/this.view.scaleY;e.push(Fe.replace({widget:new Ud(l),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!r)break;i=r.to+1}return Fe.set(e)}updateDeco(){let e=1,s=this.view.state.facet(Ao).map(r=>(this.dynamicDecorationMap[e++]=typeof r=="function")?r(this.view):r),i=!1,n=this.view.state.facet(iv).map((r,o)=>{let l=typeof r=="function";return l&&(i=!0),l?r(this.view):r});for(n.length&&(this.dynamicDecorationMap[e++]=i,s.push(tt.join(n))),this.decorations=[this.editContextFormatting,...s,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let d=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=d.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let d of this.view.state.facet(ev))try{if(d(this.view,e.range,e))return!0}catch(u){vs(this.view.state,u,"scroll handler")}let{range:s}=e,i=this.coordsAt(s.head,s.empty?s.assoc:s.head>s.anchor?-1:1),n;if(!i)return;!s.empty&&(n=this.coordsAt(s.anchor,s.anchor>s.head?-1:1))&&(i={left:Math.min(i.left,n.left),top:Math.min(i.top,n.top),right:Math.max(i.right,n.right),bottom:Math.max(i.bottom,n.bottom)});let r=Kc(this.view),o={left:i.left-r.left,top:i.top-r.top,right:i.right+r.right,bottom:i.bottom+r.bottom},{offsetWidth:l,offsetHeight:a}=this.view.scrollDOM;pS(this.view.scrollDOM,o,s.head<s.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,l),-l),Math.max(Math.min(e.yMargin,a),-a),this.view.textDirection==bt.LTR)}}function jS(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function ov(t,e){let s=t.observer.selectionRange;if(!s.focusNode)return null;let i=E0(s.focusNode,s.focusOffset),n=O0(s.focusNode,s.focusOffset),r=i||n;if(n&&i&&n.node!=i.node){let l=ut.get(n.node);if(!l||l instanceof Qs&&l.text!=n.node.nodeValue)r=n;else if(t.docView.lastCompositionAfterCursor){let a=ut.get(i.node);!a||a instanceof Qs&&a.text!=i.node.nodeValue||(r=n)}}if(t.docView.lastCompositionAfterCursor=r!=i,!r)return null;let o=e-r.offset;return{from:o,to:o+r.node.nodeValue.length,node:r.node}}function LS(t,e,s){let i=ov(t,s);if(!i)return null;let{node:n,from:r,to:o}=i,l=n.nodeValue;if(/[\n\r]/.test(l)||t.state.doc.sliceString(i.from,i.to)!=l)return null;let a=e.invertedDesc,d=new Ns(a.mapPos(r),a.mapPos(o),r,o),u=[];for(let f=n.parentNode;;f=f.parentNode){let h=ut.get(f);if(h instanceof ji)u.push({node:f,deco:h.mark});else{if(h instanceof $t||f.nodeName=="DIV"&&f.parentNode==t.contentDOM)return{range:d,text:n,marks:u,line:f};if(f!=t.contentDOM)u.push({node:f,deco:new zo({inclusive:!0,attributes:_S(f),tagName:f.tagName.toLowerCase()})});else return null}}}function RS(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let BS=class{constructor(){this.changes=[]}compareRange(e,s){ql(e,s,this.changes)}comparePoint(e,s){ql(e,s,this.changes)}boundChange(e){ql(e,e,this.changes)}};function IS(t,e,s){let i=new BS;return tt.compare(t,e,s,i),i.changes}function NS(t,e){for(let s=t;s&&s!=e;s=s.assignedSlot||s.parentNode)if(s.nodeType==1&&s.contentEditable=="false")return!0;return!1}function US(t,e){let s=!1;return e&&t.iterChangedRanges((i,n)=>{i<e.to&&n>e.from&&(s=!0)}),s}function zS(t,e,s=1){let i=t.charCategorizer(e),n=t.doc.lineAt(e),r=e-n.from;if(n.length==0)return ue.cursor(e);r==0?s=1:r==n.length&&(s=-1);let o=r,l=r;s<0?o=Kt(n.text,r,!1):l=Kt(n.text,r);let a=i(n.text.slice(o,l));for(;o>0;){let d=Kt(n.text,o,!1);if(i(n.text.slice(d,o))!=a)break;o=d}for(;l<n.length;){let d=Kt(n.text,l);if(i(n.text.slice(l,d))!=a)break;l=d}return ue.range(o+n.from,l+n.from)}function FS(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function HS(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function Eu(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function rp(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function op(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function qd(t,e,s){let i,n,r,o,l=!1,a,d,u,f;for(let _=t.firstChild;_;_=_.nextSibling){let p=Co(_);for(let C=0;C<p.length;C++){let M=p[C];n&&Eu(n,M)&&(M=rp(op(M,n.bottom),n.top));let U=FS(e,M),B=HS(s,M);if(U==0&&B==0)return _.nodeType==3?lp(_,e,s):qd(_,e,s);(!i||o>B||o==B&&r>U)&&(i=_,n=M,r=U,o=B,l=U?e<M.left?C>0:C<p.length-1:!0),U==0?s>M.bottom&&(!u||u.bottom<M.bottom)?(a=_,u=M):s<M.top&&(!f||f.top>M.top)&&(d=_,f=M):u&&Eu(u,M)?u=op(u,M.bottom):f&&Eu(f,M)&&(f=rp(f,M.top))}}if(u&&u.bottom>=s?(i=a,n=u):f&&f.top<=s&&(i=d,n=f),!i)return{node:t,offset:0};let h=Math.max(n.left,Math.min(n.right,e));if(i.nodeType==3)return lp(i,h,s);if(l&&i.contentEditable!="false")return qd(i,h,s);let m=Array.prototype.indexOf.call(t.childNodes,i)+(e>=(n.left+n.right)/2?1:0);return{node:t,offset:m}}function lp(t,e,s){let i=t.nodeValue.length,n=-1,r=1e9,o=0;for(let l=0;l<i;l++){let a=Ln(t,l,l+1).getClientRects();for(let d=0;d<a.length;d++){let u=a[d];if(u.top==u.bottom)continue;o||(o=e-u.left);let f=(u.top>s?u.top-s:s-u.bottom)-1;if(u.left-1<=e&&u.right+1>=e&&f<r){let h=e>=(u.left+u.right)/2,m=h;if((De.chrome||De.gecko)&&Ln(t,l).getBoundingClientRect().left==u.right&&(m=!h),f<=0)return{node:t,offset:l+(m?1:0)};n=l+(m?1:0),r=f}}}return{node:t,offset:n>-1?n:o>0?t.nodeValue.length:0}}function lv(t,e,s,i=-1){var n,r;let o=t.contentDOM.getBoundingClientRect(),l=o.top+t.viewState.paddingTop,a,{docHeight:d}=t.viewState,{x:u,y:f}=e,h=f-l;if(h<0)return 0;if(h>d)return t.state.doc.length;for(let F=t.viewState.heightOracle.textHeight/2,j=!1;a=t.elementAtHeight(h),a.type!=fs.Text;)for(;h=i>0?a.bottom+F:a.top-F,!(h>=0&&h<=d);){if(j)return s?null:0;j=!0,i=-i}f=l+h;let m=a.from;if(m<t.viewport.from)return t.viewport.from==0?0:s?null:ap(t,o,a,u,f);if(m>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:s?null:ap(t,o,a,u,f);let _=t.dom.ownerDocument,p=t.root.elementFromPoint?t.root:_,C=p.elementFromPoint(u,f);C&&!t.contentDOM.contains(C)&&(C=null),C||(u=Math.max(o.left+1,Math.min(o.right-1,u)),C=p.elementFromPoint(u,f),C&&!t.contentDOM.contains(C)&&(C=null));let M,U=-1;if(C&&((n=t.docView.nearest(C))===null||n===void 0?void 0:n.isEditable)!=!1){if(_.caretPositionFromPoint){let F=_.caretPositionFromPoint(u,f);F&&({offsetNode:M,offset:U}=F)}else if(_.caretRangeFromPoint){let F=_.caretRangeFromPoint(u,f);F&&({startContainer:M,startOffset:U}=F)}M&&(!t.contentDOM.contains(M)||De.safari&&WS(M,U,u)||De.chrome&&qS(M,U,u))&&(M=void 0),M&&(U=Math.min(bi(M),U))}if(!M||!t.docView.dom.contains(M)){let F=$t.find(t.docView,m);if(!F)return h>a.top+a.height/2?a.to:a.from;({node:M,offset:U}=qd(F.dom,u,f))}let B=t.docView.nearest(M);if(!B)return null;if(B.isWidget&&((r=B.dom)===null||r===void 0?void 0:r.nodeType)==1){let F=B.dom.getBoundingClientRect();return e.y<F.top||e.y<=F.bottom&&e.x<=(F.left+F.right)/2?B.posAtStart:B.posAtEnd}else return B.localPosFromDOM(M,U)+B.posAtStart}function ap(t,e,s,i,n){let r=Math.round((i-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&s.height>t.defaultLineHeight*1.5){let l=t.viewState.heightOracle.textHeight,a=Math.floor((n-s.top-(t.defaultLineHeight-l)*.5)/l);r+=a*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(s.from,s.to);return s.from+$d(o,r,t.state.tabSize)}function av(t,e,s){let i,n=t;if(t.nodeType!=3||e!=(i=t.nodeValue.length))return!1;for(;;){let r=n.nextSibling;if(r){if(r.nodeName=="BR")break;return!1}else{let o=n.parentNode;if(!o||o.nodeName=="DIV")break;n=o}}return Ln(t,i-1,i).getBoundingClientRect().right>s}function WS(t,e,s){return av(t,e,s)}function qS(t,e,s){if(e!=0)return av(t,e,s);for(let n=t;;){let r=n.parentNode;if(!r||r.nodeType!=1||r.firstChild!=n)return!1;if(r.classList.contains("cm-line"))break;n=r}let i=t.nodeType==1?t.getBoundingClientRect():Ln(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return s-i.left>5}function Kd(t,e,s){let i=t.lineBlockAt(e);if(Array.isArray(i.type)){let n;for(let r of i.type){if(r.from>e)break;if(!(r.to<e)){if(r.from<e&&r.to>e)return r;(!n||r.type==fs.Text&&(n.type!=r.type||(s<0?r.from<e:r.to>e)))&&(n=r)}}return n||i}return i}function KS(t,e,s,i){let n=Kd(t,e.head,e.assoc||-1),r=!i||n.type!=fs.Text||!(t.lineWrapping||n.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>n.from?e.head-1:e.head);if(r){let o=t.dom.getBoundingClientRect(),l=t.textDirectionAt(n.from),a=t.posAtCoords({x:s==(l==bt.LTR)?o.right-1:o.left+1,y:(r.top+r.bottom)/2});if(a!=null)return ue.cursor(a,s?-1:1)}return ue.cursor(s?n.to:n.from,s?-1:1)}function up(t,e,s,i){let n=t.state.doc.lineAt(e.head),r=t.bidiSpans(n),o=t.textDirectionAt(n.from);for(let l=e,a=null;;){let d=ES(n,r,o,l,s),u=W0;if(!d){if(n.number==(s?t.state.doc.lines:1))return l;u=`
`,n=t.state.doc.line(n.number+(s?1:-1)),r=t.bidiSpans(n),d=t.visualLineSide(n,!s)}if(a){if(!a(u))return l}else{if(!i)return d;a=i(u)}l=d}}function GS(t,e,s){let i=t.state.charCategorizer(e),n=i(s);return r=>{let o=i(r);return n==kt.Space&&(n=o),n==o}}function JS(t,e,s,i){let n=e.head,r=s?1:-1;if(n==(s?t.state.doc.length:0))return ue.cursor(n,e.assoc);let o=e.goalColumn,l,a=t.contentDOM.getBoundingClientRect(),d=t.coordsAtPos(n,e.assoc||-1),u=t.documentTop;if(d)o==null&&(o=d.left-a.left),l=r<0?d.top:d.bottom;else{let m=t.viewState.lineBlockAt(n);o==null&&(o=Math.min(a.right-a.left,t.defaultCharacterWidth*(n-m.from))),l=(r<0?m.top:m.bottom)+u}let f=a.left+o,h=i??t.viewState.heightOracle.textHeight>>1;for(let m=0;;m+=10){let _=l+(h+m)*r,p=lv(t,{x:f,y:_},!1,r);if(_<a.top||_>a.bottom||(r<0?p<n:p>n)){let C=t.docView.coordsForChar(p),M=!C||_<C.top?-1:1;return ue.cursor(p,M,void 0,o)}}}function lo(t,e,s){for(;;){let i=0;for(let n of t)n.between(e-1,e+1,(r,o,l)=>{if(e>r&&e<o){let a=i||s||(e-r<o-e?-1:1);e=a<0?r:o,i=a}});if(!i)return e}}function uv(t,e){let s=null;for(let i=0;i<e.ranges.length;i++){let n=e.ranges[i],r=null;if(n.empty){let o=lo(t,n.from,0);o!=n.from&&(r=ue.cursor(o,-1))}else{let o=lo(t,n.from,-1),l=lo(t,n.to,1);(o!=n.from||l!=n.to)&&(r=ue.range(n.from==n.anchor?o:l,n.from==n.head?o:l))}r&&(s||(s=e.ranges.slice()),s[i]=r)}return s?ue.create(s,e.mainIndex):e}function Ou(t,e,s){let i=lo(t.state.facet(Ho).map(n=>n(t)),s.from,e.head>s.from?-1:1);return i==s.from?s:ue.cursor(i,i<s.from?1:-1)}const qr="";class YS{constructor(e,s){this.points=e,this.text="",this.lineSeparator=s.facet(et.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=qr}readRange(e,s){if(!e)return this;let i=e.parentNode;for(let n=e;;){this.findPointBefore(i,n);let r=this.text.length;this.readNode(n);let o=n.nextSibling;if(o==s)break;let l=ut.get(n),a=ut.get(o);(l&&a?l.breakAfter:(l?l.breakAfter:fa(n))||fa(o)&&(n.nodeName!="BR"||n.cmIgnore)&&this.text.length>r)&&!ZS(o,s)&&this.lineBreak(),n=o}return this.findPointBefore(i,s),this}readTextNode(e){let s=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,s.length));for(let i=0,n=this.lineSeparator?null:/\r\n?|\n/g;;){let r=-1,o=1,l;if(this.lineSeparator?(r=s.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(l=n.exec(s))&&(r=l.index,o=l[0].length),this.append(s.slice(i,r<0?s.length:r)),r<0)break;if(this.lineBreak(),o>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=o-1);i=r+o}}readNode(e){if(e.cmIgnore)return;let s=ut.get(e),i=s&&s.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let n=i.iter();!n.next().done;)n.lineBreak?this.lineBreak():this.append(n.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,s){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==s&&(i.pos=this.text.length)}findPointInside(e,s){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(XS(e,i.node,i.offset)?s:0))}}function XS(t,e,s){for(;;){if(!e||s<bi(e))return!1;if(e==t)return!0;s=jn(e)+1,e=e.parentNode}}function ZS(t,e){let s;for(;!(t==e||!t);t=t.nextSibling){let i=ut.get(t);if(!(i?.isWidget||t.cmIgnore))return!1;i&&(s||(s=[])).push(i)}if(s)for(let i of s){let n=i.overrideDOMText;if(n?.length)return!1}return!0}class dp{constructor(e,s){this.node=e,this.offset=s,this.pos=-1}}class QS{constructor(e,s,i,n){this.typeOver=n,this.bounds=null,this.text="",this.domChanged=s>-1;let{impreciseHead:r,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&s>-1)this.newSel=null;else if(s>-1&&(this.bounds=e.docView.domBoundsAround(s,i,0))){let l=r||o?[]:tC(e),a=new YS(l,e.state);a.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=a.text,this.newSel=sC(l,this.bounds.from)}else{let l=e.observer.selectionRange,a=r&&r.node==l.focusNode&&r.offset==l.focusOffset||!Bd(e.contentDOM,l.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(l.focusNode,l.focusOffset),d=o&&o.node==l.anchorNode&&o.offset==l.anchorOffset||!Bd(e.contentDOM,l.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(l.anchorNode,l.anchorOffset),u=e.viewport;if((De.ios||De.chrome)&&e.state.selection.main.empty&&a!=d&&(u.from>0||u.to<e.state.doc.length)){let f=Math.min(a,d),h=Math.max(a,d),m=u.from-f,_=u.to-h;(m==0||m==1||f==0)&&(_==0||_==-1||h==e.state.doc.length)&&(a=0,d=e.state.doc.length)}this.newSel=ue.single(d,a)}}}function dv(t,e){let s,{newSel:i}=e,n=t.state.selection.main,r=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:l}=e.bounds,a=n.from,d=null;(r===8||De.android&&e.text.length<l-o)&&(a=n.to,d="end");let u=cv(t.state.doc.sliceString(o,l,qr),e.text,a-o,d);u&&(De.chrome&&r==13&&u.toB==u.from+2&&e.text.slice(u.from,u.toB)==qr+qr&&u.toB--,s={from:o+u.from,to:o+u.toA,insert:st.of(e.text.slice(u.from,u.toB).split(qr))})}else i&&(!t.hasFocus&&t.state.facet(Ti)||i.main.eq(n))&&(i=null);if(!s&&!i)return!1;if(!s&&e.typeOver&&!n.empty&&i&&i.main.empty?s={from:n.from,to:n.to,insert:t.state.doc.slice(n.from,n.to)}:(De.mac||De.android)&&s&&s.from==s.to&&s.from==n.head-1&&/^\. ?$/.test(s.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(i&&s.insert.length==2&&(i=ue.single(i.main.anchor-1,i.main.head-1)),s={from:s.from,to:s.to,insert:st.of([s.insert.toString().replace("."," ")])}):s&&s.from>=n.from&&s.to<=n.to&&(s.from!=n.from||s.to!=n.to)&&n.to-n.from-(s.to-s.from)<=4?s={from:n.from,to:n.to,insert:t.state.doc.slice(n.from,s.from).append(s.insert).append(t.state.doc.slice(s.to,n.to))}:De.chrome&&s&&s.from==s.to&&s.from==n.head&&s.insert.toString()==`
 `&&t.lineWrapping&&(i&&(i=ue.single(i.main.anchor-1,i.main.head-1)),s={from:n.from,to:n.to,insert:st.of([" "])}),s)return Gc(t,s,i,r);if(i&&!i.main.eq(n)){let o=!1,l="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),l=t.inputState.lastSelectionOrigin,l=="select.pointer"&&(i=uv(t.state.facet(Ho).map(a=>a(t)),i))),t.dispatch({selection:i,scrollIntoView:o,userEvent:l}),!0}else return!1}function Gc(t,e,s,i=-1){if(De.ios&&t.inputState.flushIOSKey(e))return!0;let n=t.state.selection.main;if(De.android&&(e.to==n.to&&(e.from==n.from||e.from==n.from-1&&t.state.sliceDoc(e.from,n.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&dr(t.contentDOM,"Enter",13)||(e.from==n.from-1&&e.to==n.to&&e.insert.length==0||i==8&&e.insert.length<e.to-e.from&&e.to>n.head)&&dr(t.contentDOM,"Backspace",8)||e.from==n.from&&e.to==n.to+1&&e.insert.length==0&&dr(t.contentDOM,"Delete",46)))return!0;let r=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let o,l=()=>o||(o=eC(t,e,s));return t.state.facet(Y0).some(a=>a(t,e.from,e.to,r,l))||t.dispatch(l()),!0}function eC(t,e,s){let i,n=t.state,r=n.selection.main,o=-1;if(e.from==e.to&&e.from<r.from||e.from>r.to){let a=e.from<r.from?-1:1,d=a<0?r.from:r.to,u=lo(n.facet(Ho).map(f=>f(t)),d,a);e.from==u&&(o=u)}if(o>-1)i={changes:e,selection:ue.cursor(e.from+e.insert.length,-1)};else if(e.from>=r.from&&e.to<=r.to&&e.to-e.from>=(r.to-r.from)/3&&(!s||s.main.empty&&s.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let a=r.from<e.from?n.sliceDoc(r.from,e.from):"",d=r.to>e.to?n.sliceDoc(e.to,r.to):"";i=n.replaceSelection(t.state.toText(a+e.insert.sliceString(0,void 0,t.state.lineBreak)+d))}else{let a=n.changes(e),d=s&&s.main.to<=a.newLength?s.main:void 0;if(n.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=r.to&&e.to>=r.to-10){let u=t.state.sliceDoc(e.from,e.to),f,h=s&&ov(t,s.main.head);if(h){let p=e.insert.length-(e.to-e.from);f={from:h.from,to:h.to-p}}else f=t.state.doc.lineAt(r.head);let m=r.to-e.to,_=r.to-r.from;i=n.changeByRange(p=>{if(p.from==r.from&&p.to==r.to)return{changes:a,range:d||p.map(a)};let C=p.to-m,M=C-u.length;if(p.to-p.from!=_||t.state.sliceDoc(M,C)!=u||p.to>=f.from&&p.from<=f.to)return{range:p};let U=n.changes({from:M,to:C,insert:e.insert}),B=p.to-r.to;return{changes:U,range:d?ue.range(Math.max(0,d.anchor+B),Math.max(0,d.head+B)):p.map(U)}})}else i={changes:a,selection:d&&n.selection.replaceRange(d)}}let l="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,l+=".compose",t.inputState.compositionFirstChange&&(l+=".start",t.inputState.compositionFirstChange=!1)),n.update(i,{userEvent:l,scrollIntoView:!0})}function cv(t,e,s,i){let n=Math.min(t.length,e.length),r=0;for(;r<n&&t.charCodeAt(r)==e.charCodeAt(r);)r++;if(r==n&&t.length==e.length)return null;let o=t.length,l=e.length;for(;o>0&&l>0&&t.charCodeAt(o-1)==e.charCodeAt(l-1);)o--,l--;if(i=="end"){let a=Math.max(0,r-Math.min(o,l));s-=o+a-r}if(o<r&&t.length<e.length){let a=s<=r&&s>=o?r-s:0;r-=a,l=r+(l-o),o=r}else if(l<r){let a=s<=r&&s>=l?r-s:0;r-=a,o=r+(o-l),l=r}return{from:r,toA:o,toB:l}}function tC(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:s,anchorOffset:i,focusNode:n,focusOffset:r}=t.observer.selectionRange;return s&&(e.push(new dp(s,i)),(n!=s||r!=i)&&e.push(new dp(n,r))),e}function sC(t,e){if(t.length==0)return null;let s=t[0].pos,i=t.length==2?t[1].pos:s;return s>-1&&i>-1?ue.single(s+e,i+e):null}class iC{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,De.safari&&e.contentDOM.addEventListener("input",()=>null),De.gecko&&bC(e.contentDOM.ownerDocument)}handleEvent(e){!cC(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,s){let i=this.handlers[e];if(i){for(let n of i.observers)n(this.view,s);for(let n of i.handlers){if(s.defaultPrevented)break;if(n(this.view,s)){s.preventDefault();break}}}}ensureHandlers(e){let s=nC(e),i=this.handlers,n=this.view.contentDOM;for(let r in s)if(r!="scroll"){let o=!s[r].handlers.length,l=i[r];l&&o!=!l.handlers.length&&(n.removeEventListener(r,this.handleEvent),l=null),l||n.addEventListener(r,this.handleEvent,{passive:o})}for(let r in i)r!="scroll"&&!s[r]&&n.removeEventListener(r,this.handleEvent);this.handlers=s}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&hv.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),De.android&&De.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let s;return De.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((s=fv.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||rC.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=s||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let s=this.pendingIOSKey;return!s||s.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,dr(this.view.contentDOM,s.key,s.keyCode,s instanceof KeyboardEvent?s:void 0))}ignoreDuringComposition(e){return!/^key/.test(e.type)||e.synthetic?!1:this.composing>0?!0:De.safari&&!De.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function cp(t,e){return(s,i)=>{try{return e.call(t,i,s)}catch(n){vs(s.state,n)}}}function nC(t){let e=Object.create(null);function s(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of t){let n=i.spec,r=n&&n.plugin.domEventHandlers,o=n&&n.plugin.domEventObservers;if(r)for(let l in r){let a=r[l];a&&s(l).handlers.push(cp(i.value,a))}if(o)for(let l in o){let a=o[l];a&&s(l).observers.push(cp(i.value,a))}}for(let i in ei)s(i).handlers.push(ei[i]);for(let i in Fs)s(i).observers.push(Fs[i]);return e}const fv=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],rC="dthko",hv=[16,17,18,20,91,92,224,225],bl=6;function xl(t){return Math.max(0,t)*.7+8}function oC(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class lC{constructor(e,s,i,n){this.view=e,this.startEvent=s,this.style=i,this.mustSelect=n,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=s,this.scrollParents=mS(e.contentDOM),this.atoms=e.state.facet(Ho).map(o=>o(e));let r=e.contentDOM.ownerDocument;r.addEventListener("mousemove",this.move=this.move.bind(this)),r.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=s.shiftKey,this.multiple=e.state.facet(et.allowMultipleSelections)&&aC(e,s),this.dragging=dC(e,s)&&gv(s)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&oC(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let s=0,i=0,n=0,r=0,o=this.view.win.innerWidth,l=this.view.win.innerHeight;this.scrollParents.x&&({left:n,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:r,bottom:l}=this.scrollParents.y.getBoundingClientRect());let a=Kc(this.view);e.clientX-a.left<=n+bl?s=-xl(n-e.clientX):e.clientX+a.right>=o-bl&&(s=xl(e.clientX-o)),e.clientY-a.top<=r+bl?i=-xl(r-e.clientY):e.clientY+a.bottom>=l-bl&&(i=xl(e.clientY-l)),this.setScrollSpeed(s,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,s){this.scrollSpeed={x:e,y:s},e||s?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:s}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),s&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=s,s=0),(e||s)&&this.view.win.scrollBy(e,s),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:s}=this,i=uv(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(s.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(s=>s.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function aC(t,e){let s=t.state.facet(q0);return s.length?s[0](e):De.mac?e.metaKey:e.ctrlKey}function uC(t,e){let s=t.state.facet(K0);return s.length?s[0](e):De.mac?!e.altKey:!e.ctrlKey}function dC(t,e){let{main:s}=t.state.selection;if(s.empty)return!1;let i=So(t.root);if(!i||i.rangeCount==0)return!0;let n=i.getRangeAt(0).getClientRects();for(let r=0;r<n.length;r++){let o=n[r];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function cC(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let s=e.target,i;s!=t.contentDOM;s=s.parentNode)if(!s||s.nodeType==11||(i=ut.get(s))&&i.ignoreEvent(e))return!1;return!0}const ei=Object.create(null),Fs=Object.create(null),pv=De.ie&&De.ie_version<15||De.ios&&De.webkit_version<604;function fC(t){let e=t.dom.parentNode;if(!e)return;let s=e.appendChild(document.createElement("textarea"));s.style.cssText="position: fixed; left: -10000px; top: 10px",s.focus(),setTimeout(()=>{t.focus(),s.remove(),mv(t,s.value)},50)}function Xa(t,e,s){for(let i of t.facet(e))s=i(s,t);return s}function mv(t,e){e=Xa(t.state,Hc,e);let{state:s}=t,i,n=1,r=s.toText(e),o=r.lines==s.selection.ranges.length;if(Gd!=null&&s.selection.ranges.every(a=>a.empty)&&Gd==r.toString()){let a=-1;i=s.changeByRange(d=>{let u=s.doc.lineAt(d.from);if(u.from==a)return{range:d};a=u.from;let f=s.toText((o?r.line(n++).text:e)+s.lineBreak);return{changes:{from:u.from,insert:f},range:ue.cursor(d.from+f.length)}})}else o?i=s.changeByRange(a=>{let d=r.line(n++);return{changes:{from:a.from,to:a.to,insert:d.text},range:ue.cursor(a.from+d.length)}}):i=s.replaceSelection(r);t.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}Fs.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};ei.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);Fs.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};Fs.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};ei.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let s=null;for(let i of t.state.facet(G0))if(s=i(t,e),s)break;if(!s&&e.button==0&&(s=mC(t,e)),s){let i=!t.hasFocus;t.inputState.startMouseSelection(new lC(t,e,s,i)),i&&t.observer.ignore(()=>{D0(t.contentDOM);let r=t.root.activeElement;r&&!r.contains(t.contentDOM)&&r.blur()});let n=t.inputState.mouseSelection;if(n)return n.start(e),n.dragging===!1}else t.inputState.setSelectionOrigin("select.pointer");return!1};function fp(t,e,s,i){if(i==1)return ue.cursor(e,s);if(i==2)return zS(t.state,e,s);{let n=$t.find(t.docView,e),r=t.state.doc.lineAt(n?n.posAtEnd:e),o=n?n.posAtStart:r.from,l=n?n.posAtEnd:r.to;return l<t.state.doc.length&&l==r.to&&l++,ue.range(o,l)}}let hp=(t,e,s)=>e>=s.top&&e<=s.bottom&&t>=s.left&&t<=s.right;function hC(t,e,s,i){let n=$t.find(t.docView,e);if(!n)return 1;let r=e-n.posAtStart;if(r==0)return 1;if(r==n.length)return-1;let o=n.coordsAt(r,-1);if(o&&hp(s,i,o))return-1;let l=n.coordsAt(r,1);return l&&hp(s,i,l)?1:o&&o.bottom>=i?-1:1}function pp(t,e){let s=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:s,bias:hC(t,s,e.clientX,e.clientY)}}const pC=De.ie&&De.ie_version<=11;let mp=null,gp=0,vp=0;function gv(t){if(!pC)return t.detail;let e=mp,s=vp;return mp=t,vp=Date.now(),gp=!e||s>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(gp+1)%3:1}function mC(t,e){let s=pp(t,e),i=gv(e),n=t.state.selection;return{update(r){r.docChanged&&(s.pos=r.changes.mapPos(s.pos),n=n.map(r.changes))},get(r,o,l){let a=pp(t,r),d,u=fp(t,a.pos,a.bias,i);if(s.pos!=a.pos&&!o){let f=fp(t,s.pos,s.bias,i),h=Math.min(f.from,u.from),m=Math.max(f.to,u.to);u=h<u.from?ue.range(h,m):ue.range(m,h)}return o?n.replaceRange(n.main.extend(u.from,u.to)):l&&i==1&&n.ranges.length>1&&(d=gC(n,a.pos))?d:l?n.addRange(u):ue.create([u])}}}function gC(t,e){for(let s=0;s<t.ranges.length;s++){let{from:i,to:n}=t.ranges[s];if(i<=e&&n>=e)return ue.create(t.ranges.slice(0,s).concat(t.ranges.slice(s+1)),t.mainIndex==s?0:t.mainIndex-(t.mainIndex>s?1:0))}return null}ei.dragstart=(t,e)=>{let{selection:{main:s}}=t.state;if(e.target.draggable){let n=t.docView.nearest(e.target);if(n&&n.isWidget){let r=n.posAtStart,o=r+n.length;(r>=s.to||o<=s.from)&&(s=ue.range(r,o))}}let{inputState:i}=t;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=s,e.dataTransfer&&(e.dataTransfer.setData("Text",Xa(t.state,Wc,t.state.sliceDoc(s.from,s.to))),e.dataTransfer.effectAllowed="copyMove"),!1};ei.dragend=t=>(t.inputState.draggedContent=null,!1);function yp(t,e,s,i){if(s=Xa(t.state,Hc,s),!s)return;let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:r}=t.inputState,o=i&&r&&uC(t,e)?{from:r.from,to:r.to}:null,l={from:n,insert:s},a=t.state.changes(o?[o,l]:l);t.focus(),t.dispatch({changes:a,selection:{anchor:a.mapPos(n,-1),head:a.mapPos(n,1)},userEvent:o?"move.drop":"input.drop"}),t.inputState.draggedContent=null}ei.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let s=e.dataTransfer.files;if(s&&s.length){let i=Array(s.length),n=0,r=()=>{++n==s.length&&yp(t,e,i.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<s.length;o++){let l=new FileReader;l.onerror=r,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(i[o]=l.result),r()},l.readAsText(s[o])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return yp(t,e,i,!0),!0}return!1};ei.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let s=pv?null:e.clipboardData;return s?(mv(t,s.getData("text/plain")||s.getData("text/uri-list")),!0):(fC(t),!1)};function vC(t,e){let s=t.dom.parentNode;if(!s)return;let i=s.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),t.focus()},50)}function yC(t){let e=[],s=[],i=!1;for(let n of t.selection.ranges)n.empty||(e.push(t.sliceDoc(n.from,n.to)),s.push(n));if(!e.length){let n=-1;for(let{from:r}of t.selection.ranges){let o=t.doc.lineAt(r);o.number>n&&(e.push(o.text),s.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),n=o.number}i=!0}return{text:Xa(t,Wc,e.join(t.lineBreak)),ranges:s,linewise:i}}let Gd=null;ei.copy=ei.cut=(t,e)=>{let{text:s,ranges:i,linewise:n}=yC(t.state);if(!s&&!n)return!1;Gd=n?s:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let r=pv?null:e.clipboardData;return r?(r.clearData(),r.setData("text/plain",s),!0):(vC(t,s),!1)};const vv=Bi.define();function yv(t,e){let s=[];for(let i of t.facet(X0)){let n=i(t,e);n&&s.push(n)}return s.length?t.update({effects:s,annotations:vv.of(!0)}):null}function bv(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let s=yv(t.state,e);s?t.dispatch(s):t.update([])}},10)}Fs.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),bv(t)};Fs.blur=t=>{t.observer.clearSelectionRange(),bv(t)};Fs.compositionstart=Fs.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};Fs.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,De.chrome&&De.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};Fs.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};ei.beforeinput=(t,e)=>{var s,i;if(e.inputType=="insertReplacementText"&&t.observer.editContext){let r=(s=e.dataTransfer)===null||s===void 0?void 0:s.getData("text/plain"),o=e.getTargetRanges();if(r&&o.length){let l=o[0],a=t.posAtDOM(l.startContainer,l.startOffset),d=t.posAtDOM(l.endContainer,l.endOffset);return Gc(t,{from:a,to:d,insert:t.state.toText(r)},null),!0}}let n;if(De.chrome&&De.android&&(n=fv.find(r=>r.inputType==e.inputType))&&(t.observer.delayAndroidKey(n.key,n.keyCode),n.key=="Backspace"||n.key=="Delete")){let r=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>r+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return De.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),De.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>Fs.compositionend(t,e),20),!1};const bp=new Set;function bC(t){bp.has(t)||(bp.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const xp=["pre-wrap","normal","pre-line","break-spaces"];let xr=!1;function kp(){xr=!1}class xC{constructor(e){this.lineWrapping=e,this.doc=st.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,s){let i=this.doc.lineAt(s).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((s-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return xp.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let s=!1;for(let i=0;i<e.length;i++){let n=e[i];n<0?i++:this.heightSamples[Math.floor(n*10)]||(s=!0,this.heightSamples[Math.floor(n*10)]=!0)}return s}refresh(e,s,i,n,r,o){let l=xp.indexOf(e)>-1,a=Math.round(s)!=Math.round(this.lineHeight)||this.lineWrapping!=l;if(this.lineWrapping=l,this.lineHeight=s,this.charWidth=i,this.textHeight=n,this.lineLength=r,a){this.heightSamples={};for(let d=0;d<o.length;d++){let u=o[d];u<0?d++:this.heightSamples[Math.floor(u*10)]=!0}}return a}}class kC{constructor(e,s){this.from=e,this.heights=s,this.index=0}get more(){return this.index<this.heights.length}}class hi{constructor(e,s,i,n,r){this.from=e,this.length=s,this.top=i,this.height=n,this._content=r}get type(){return typeof this._content=="number"?fs.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof an?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let s=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new hi(this.from,this.length+e.length,this.top,this.height+e.height,s)}}var yt=(function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t})(yt||(yt={}));const Kl=.001;class hs{constructor(e,s,i=2){this.length=e,this.height=s,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>Kl&&(xr=!0),this.height=e)}replace(e,s,i){return hs.of(i)}decomposeLeft(e,s){s.push(this)}decomposeRight(e,s){s.push(this)}applyChanges(e,s,i,n){let r=this,o=i.doc;for(let l=n.length-1;l>=0;l--){let{fromA:a,toA:d,fromB:u,toB:f}=n[l],h=r.lineAt(a,yt.ByPosNoHeight,i.setDoc(s),0,0),m=h.to>=d?h:r.lineAt(d,yt.ByPosNoHeight,i,0,0);for(f+=m.to-d,d=m.to;l>0&&h.from<=n[l-1].toA;)a=n[l-1].fromA,u=n[l-1].fromB,l--,a<h.from&&(h=r.lineAt(a,yt.ByPosNoHeight,i,0,0));u+=h.from-a,a=h.from;let _=Jc.build(i.setDoc(o),e,u,f);r=ma(r,r.replace(a,d,_))}return r.updateHeight(i,0)}static empty(){return new ws(0,0)}static of(e){if(e.length==1)return e[0];let s=0,i=e.length,n=0,r=0;for(;;)if(s==i)if(n>r*2){let l=e[s-1];l.break?e.splice(--s,1,l.left,null,l.right):e.splice(--s,1,l.left,l.right),i+=1+l.break,n-=l.size}else if(r>n*2){let l=e[i];l.break?e.splice(i,1,l.left,null,l.right):e.splice(i,1,l.left,l.right),i+=2+l.break,r-=l.size}else break;else if(n<r){let l=e[s++];l&&(n+=l.size)}else{let l=e[--i];l&&(r+=l.size)}let o=0;return e[s-1]==null?(o=1,s--):e[s]==null&&(o=1,i++),new wC(hs.of(e.slice(0,s)),o,hs.of(e.slice(i)))}}function ma(t,e){return t==e?t:(t.constructor!=e.constructor&&(xr=!0),e)}hs.prototype.size=1;class xv extends hs{constructor(e,s,i){super(e,s),this.deco=i}blockAt(e,s,i,n){return new hi(n,this.length,i,this.height,this.deco||0)}lineAt(e,s,i,n,r){return this.blockAt(0,i,n,r)}forEachLine(e,s,i,n,r,o){e<=r+this.length&&s>=r&&o(this.blockAt(0,i,n,r))}updateHeight(e,s=0,i=!1,n){return n&&n.from<=s&&n.more&&this.setHeight(n.heights[n.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class ws extends xv{constructor(e,s){super(e,s,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,s,i,n){return new hi(n,this.length,i,this.height,this.breaks)}replace(e,s,i){let n=i[0];return i.length==1&&(n instanceof ws||n instanceof zt&&n.flags&4)&&Math.abs(this.length-n.length)<10?(n instanceof zt?n=new ws(n.length,this.height):n.height=this.height,this.outdated||(n.outdated=!1),n):hs.of(i)}updateHeight(e,s=0,i=!1,n){return n&&n.from<=s&&n.more?this.setHeight(n.heights[n.index++]):(i||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class zt extends hs{constructor(e){super(e,0)}heightMetrics(e,s){let i=e.doc.lineAt(s).number,n=e.doc.lineAt(s+this.length).number,r=n-i+1,o,l=0;if(e.lineWrapping){let a=Math.min(this.height,e.lineHeight*r);o=a/r,this.length>r+1&&(l=(this.height-a)/(this.length-r-1))}else o=this.height/r;return{firstLine:i,lastLine:n,perLine:o,perChar:l}}blockAt(e,s,i,n){let{firstLine:r,lastLine:o,perLine:l,perChar:a}=this.heightMetrics(s,n);if(s.lineWrapping){let d=n+(e<s.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),u=s.doc.lineAt(d),f=l+u.length*a,h=Math.max(i,e-f/2);return new hi(u.from,u.length,h,f,0)}else{let d=Math.max(0,Math.min(o-r,Math.floor((e-i)/l))),{from:u,length:f}=s.doc.line(r+d);return new hi(u,f,i+l*d,l,0)}}lineAt(e,s,i,n,r){if(s==yt.ByHeight)return this.blockAt(e,i,n,r);if(s==yt.ByPosNoHeight){let{from:m,to:_}=i.doc.lineAt(e);return new hi(m,_-m,0,0,0)}let{firstLine:o,perLine:l,perChar:a}=this.heightMetrics(i,r),d=i.doc.lineAt(e),u=l+d.length*a,f=d.number-o,h=n+l*f+a*(d.from-r-f);return new hi(d.from,d.length,Math.max(n,Math.min(h,n+this.height-u)),u,0)}forEachLine(e,s,i,n,r,o){e=Math.max(e,r),s=Math.min(s,r+this.length);let{firstLine:l,perLine:a,perChar:d}=this.heightMetrics(i,r);for(let u=e,f=n;u<=s;){let h=i.doc.lineAt(u);if(u==e){let _=h.number-l;f+=a*_+d*(e-r-_)}let m=a+d*h.length;o(new hi(h.from,h.length,f,m,0)),f+=m,u=h.to+1}}replace(e,s,i){let n=this.length-s;if(n>0){let r=i[i.length-1];r instanceof zt?i[i.length-1]=new zt(r.length+n):i.push(null,new zt(n-1))}if(e>0){let r=i[0];r instanceof zt?i[0]=new zt(e+r.length):i.unshift(new zt(e-1),null)}return hs.of(i)}decomposeLeft(e,s){s.push(new zt(e-1),null)}decomposeRight(e,s){s.push(null,new zt(this.length-e-1))}updateHeight(e,s=0,i=!1,n){let r=s+this.length;if(n&&n.from<=s+this.length&&n.more){let o=[],l=Math.max(s,n.from),a=-1;for(n.from>s&&o.push(new zt(n.from-s-1).updateHeight(e,s));l<=r&&n.more;){let u=e.doc.lineAt(l).length;o.length&&o.push(null);let f=n.heights[n.index++];a==-1?a=f:Math.abs(f-a)>=Kl&&(a=-2);let h=new ws(u,f);h.outdated=!1,o.push(h),l+=u+1}l<=r&&o.push(null,new zt(r-l).updateHeight(e,l));let d=hs.of(o);return(a<0||Math.abs(d.height-this.height)>=Kl||Math.abs(a-this.heightMetrics(e,s).perLine)>=Kl)&&(xr=!0),ma(this,d)}else(i||this.outdated)&&(this.setHeight(e.heightForGap(s,s+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class wC extends hs{constructor(e,s,i){super(e.length+s+i.length,e.height+i.height,s|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,s,i,n){let r=i+this.left.height;return e<r?this.left.blockAt(e,s,i,n):this.right.blockAt(e,s,r,n+this.left.length+this.break)}lineAt(e,s,i,n,r){let o=n+this.left.height,l=r+this.left.length+this.break,a=s==yt.ByHeight?e<o:e<l,d=a?this.left.lineAt(e,s,i,n,r):this.right.lineAt(e,s,i,o,l);if(this.break||(a?d.to<l:d.from>l))return d;let u=s==yt.ByPosNoHeight?yt.ByPosNoHeight:yt.ByPos;return a?d.join(this.right.lineAt(l,u,i,o,l)):this.left.lineAt(l,u,i,n,r).join(d)}forEachLine(e,s,i,n,r,o){let l=n+this.left.height,a=r+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,s,i,n,r,o),s>=a&&this.right.forEachLine(e,s,i,l,a,o);else{let d=this.lineAt(a,yt.ByPos,i,n,r);e<d.from&&this.left.forEachLine(e,d.from-1,i,n,r,o),d.to>=e&&d.from<=s&&o(d),s>d.to&&this.right.forEachLine(d.to+1,s,i,l,a,o)}}replace(e,s,i){let n=this.left.length+this.break;if(s<n)return this.balanced(this.left.replace(e,s,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-n,s-n,i));let r=[];e>0&&this.decomposeLeft(e,r);let o=r.length;for(let l of i)r.push(l);if(e>0&&wp(r,o-1),s<this.length){let l=r.length;this.decomposeRight(s,r),wp(r,l)}return hs.of(r)}decomposeLeft(e,s){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,s);s.push(this.left),this.break&&(i++,e>=i&&s.push(null)),e>i&&this.right.decomposeLeft(e-i,s)}decomposeRight(e,s){let i=this.left.length,n=i+this.break;if(e>=n)return this.right.decomposeRight(e-n,s);e<i&&this.left.decomposeRight(e,s),this.break&&e<n&&s.push(null),s.push(this.right)}balanced(e,s){return e.size>2*s.size||s.size>2*e.size?hs.of(this.break?[e,null,s]:[e,s]):(this.left=ma(this.left,e),this.right=ma(this.right,s),this.setHeight(e.height+s.height),this.outdated=e.outdated||s.outdated,this.size=e.size+s.size,this.length=e.length+this.break+s.length,this)}updateHeight(e,s=0,i=!1,n){let{left:r,right:o}=this,l=s+r.length+this.break,a=null;return n&&n.from<=s+r.length&&n.more?a=r=r.updateHeight(e,s,i,n):r.updateHeight(e,s,i),n&&n.from<=l+o.length&&n.more?a=o=o.updateHeight(e,l,i,n):o.updateHeight(e,l,i),a?this.balanced(r,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function wp(t,e){let s,i;t[e]==null&&(s=t[e-1])instanceof zt&&(i=t[e+1])instanceof zt&&t.splice(e-1,3,new zt(s.length+1+i.length))}const _C=5;class Jc{constructor(e,s){this.pos=e,this.oracle=s,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,s){if(this.lineStart>-1){let i=Math.min(s,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof ws?n.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new ws(i-this.pos,-1)),this.writtenTo=i,s>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=s}point(e,s,i){if(e<s||i.heightRelevant){let n=i.widget?i.widget.estimatedHeight:0,r=i.widget?i.widget.lineBreaks:0;n<0&&(n=this.oracle.lineHeight);let o=s-e;i.block?this.addBlock(new xv(o,n,i)):(o||r||n>=_C)&&this.addLineDeco(n,r,o)}else s>e&&this.span(e,s);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:s}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=s,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new ws(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,s){let i=new zt(s-e);return this.oracle.doc.lineAt(e).to==s&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof ws)return e;let s=new ws(0,-1);return this.nodes.push(s),s}addBlock(e){this.enterLine();let s=e.deco;s&&s.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,s&&s.endSide>0&&(this.covering=e)}addLineDeco(e,s,i){let n=this.ensureLine();n.length+=i,n.collapsed+=i,n.widgetHeight=Math.max(n.widgetHeight,e),n.breaks+=s,this.writtenTo=this.pos=this.pos+i}finish(e){let s=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(s instanceof ws)&&!this.isCovered?this.nodes.push(new ws(0,-1)):(this.writtenTo<this.pos||s==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let n of this.nodes)n instanceof ws&&n.updateHeight(this.oracle,i),i+=n?n.length:1;return this.nodes}static build(e,s,i,n){let r=new Jc(i,e);return tt.spans(s,i,n,r,0),r.finish(i)}}function SC(t,e,s){let i=new CC;return tt.compare(t,e,s,i,0),i.changes}class CC{constructor(){this.changes=[]}compareRange(){}comparePoint(e,s,i,n){(e<s||i&&i.heightRelevant||n&&n.heightRelevant)&&ql(e,s,this.changes,5)}}function AC(t,e){let s=t.getBoundingClientRect(),i=t.ownerDocument,n=i.defaultView||window,r=Math.max(0,s.left),o=Math.min(n.innerWidth,s.right),l=Math.max(0,s.top),a=Math.min(n.innerHeight,s.bottom);for(let d=t.parentNode;d&&d!=i.body;)if(d.nodeType==1){let u=d,f=window.getComputedStyle(u);if((u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth)&&f.overflow!="visible"){let h=u.getBoundingClientRect();r=Math.max(r,h.left),o=Math.min(o,h.right),l=Math.max(l,h.top),a=Math.min(d==t.parentNode?n.innerHeight:a,h.bottom)}d=f.position=="absolute"||f.position=="fixed"?u.offsetParent:u.parentNode}else if(d.nodeType==11)d=d.host;else break;return{left:r-s.left,right:Math.max(r,o)-s.left,top:l-(s.top+e),bottom:Math.max(l,a)-(s.top+e)}}function VC(t){let e=t.getBoundingClientRect(),s=t.ownerDocument.defaultView||window;return e.left<s.innerWidth&&e.right>0&&e.top<s.innerHeight&&e.bottom>0}function MC(t,e){let s=t.getBoundingClientRect();return{left:0,right:s.right-s.left,top:e,bottom:s.bottom-(s.top+e)}}class Pu{constructor(e,s,i,n){this.from=e,this.to=s,this.size=i,this.displaySize=n}static same(e,s){if(e.length!=s.length)return!1;for(let i=0;i<e.length;i++){let n=e[i],r=s[i];if(n.from!=r.from||n.to!=r.to||n.size!=r.size)return!1}return!0}draw(e,s){return Fe.replace({widget:new DC(this.displaySize*(s?e.scaleY:e.scaleX),s)}).range(this.from,this.to)}}class DC extends cn{constructor(e,s){super(),this.size=e,this.vertical=s}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class _p{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=Sp,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=bt.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let s=e.facet(qc).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new xC(s),this.stateDeco=e.facet(Ao).filter(i=>typeof i!="function"),this.heightMap=hs.empty().applyChanges(this.stateDeco,st.empty,this.heightOracle.setDoc(e.doc),[new Ns(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Fe.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:s}=this.state.selection;for(let i=0;i<=1;i++){let n=i?s.head:s.anchor;if(!e.some(({from:r,to:o})=>n>=r&&n<=o)){let{from:r,to:o}=this.lineBlockAt(n);e.push(new kl(r,o))}}return this.viewports=e.sort((i,n)=>i.from-n.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?Sp:new Yc(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Kr(e,this.scaler))})}update(e,s=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(Ao).filter(u=>typeof u!="function");let n=e.changedRanges,r=Ns.extendWithRanges(n,SC(i,this.stateDeco,e?e.changes:Lt.empty(this.state.doc.length))),o=this.heightMap.height,l=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);kp(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),r),(this.heightMap.height!=o||xr)&&(e.flags|=2),l?(this.scrollAnchorPos=e.changes.mapPos(l.from,-1),this.scrollAnchorHeight=l.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let a=r.length?this.mapViewport(this.viewport,e.changes):this.viewport;(s&&(s.range.head<a.from||s.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,s));let d=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,e.flags|=this.updateForViewport(),(d||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),s&&(this.scrollTarget=s),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(Q0)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let s=e.contentDOM,i=window.getComputedStyle(s),n=this.heightOracle,r=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?bt.RTL:bt.LTR;let o=this.heightOracle.mustRefreshForWrapping(r),l=s.getBoundingClientRect(),a=o||this.mustMeasureContent||this.contentDOMHeight!=l.height;this.contentDOMHeight=l.height,this.mustMeasureContent=!1;let d=0,u=0;if(l.width&&l.height){let{scaleX:F,scaleY:j}=M0(s,l);(F>.005&&Math.abs(this.scaleX-F)>.005||j>.005&&Math.abs(this.scaleY-j)>.005)&&(this.scaleX=F,this.scaleY=j,d|=16,o=a=!0)}let f=(parseInt(i.paddingTop)||0)*this.scaleY,h=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=f||this.paddingBottom!=h)&&(this.paddingTop=f,this.paddingBottom=h,d|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(n.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,d|=16);let m=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=m&&(this.scrollAnchorHeight=-1,this.scrollTop=m),this.scrolledToBottom=$0(e.scrollDOM);let _=(this.printing?MC:AC)(s,this.paddingTop),p=_.top-this.pixelViewport.top,C=_.bottom-this.pixelViewport.bottom;this.pixelViewport=_;let M=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(M!=this.inView&&(this.inView=M,M&&(a=!0)),!this.inView&&!this.scrollTarget&&!VC(e.dom))return 0;let U=l.width;if((this.contentDOMWidth!=U||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=l.width,this.editorHeight=e.scrollDOM.clientHeight,d|=16),a){let F=e.docView.measureVisibleLineHeights(this.viewport);if(n.mustRefreshForHeights(F)&&(o=!0),o||n.lineWrapping&&Math.abs(U-this.contentDOMWidth)>n.charWidth){let{lineHeight:j,charWidth:T,textHeight:A}=e.docView.measureTextSize();o=j>0&&n.refresh(r,j,T,A,Math.max(5,U/T),F),o&&(e.docView.minWidth=0,d|=16)}p>0&&C>0?u=Math.max(p,C):p<0&&C<0&&(u=Math.min(p,C)),kp();for(let j of this.viewports){let T=j.from==this.viewport.from?F:e.docView.measureVisibleLineHeights(j);this.heightMap=(o?hs.empty().applyChanges(this.stateDeco,st.empty,this.heightOracle,[new Ns(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(n,0,o,new kC(j.from,T))}xr&&(d|=2)}let B=!this.viewportIsAppropriate(this.viewport,u)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return B&&(d&2&&(d|=this.updateScaler()),this.viewport=this.getViewport(u,this.scrollTarget),d|=this.updateForViewport()),(d&2||B)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),d|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),d}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,s){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),n=this.heightMap,r=this.heightOracle,{visibleTop:o,visibleBottom:l}=this,a=new kl(n.lineAt(o-i*1e3,yt.ByHeight,r,0,0).from,n.lineAt(l+(1-i)*1e3,yt.ByHeight,r,0,0).to);if(s){let{head:d}=s.range;if(d<a.from||d>a.to){let u=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),f=n.lineAt(d,yt.ByPos,r,0,0),h;s.y=="center"?h=(f.top+f.bottom)/2-u/2:s.y=="start"||s.y=="nearest"&&d<a.from?h=f.top:h=f.bottom-u,a=new kl(n.lineAt(h-1e3/2,yt.ByHeight,r,0,0).from,n.lineAt(h+u+1e3/2,yt.ByHeight,r,0,0).to)}}return a}mapViewport(e,s){let i=s.mapPos(e.from,-1),n=s.mapPos(e.to,1);return new kl(this.heightMap.lineAt(i,yt.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(n,yt.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:s},i=0){if(!this.inView)return!0;let{top:n}=this.heightMap.lineAt(e,yt.ByPos,this.heightOracle,0,0),{bottom:r}=this.heightMap.lineAt(s,yt.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:l}=this;return(e==0||n<=o-Math.max(10,Math.min(-i,250)))&&(s==this.state.doc.length||r>=l+Math.max(10,Math.min(i,250)))&&n>o-2*1e3&&r<l+2*1e3}mapLineGaps(e,s){if(!e.length||s.empty)return e;let i=[];for(let n of e)s.touchesRange(n.from,n.to)||i.push(new Pu(s.mapPos(n.from),s.mapPos(n.to),n.size,n.displaySize));return i}ensureLineGaps(e,s){let i=this.heightOracle.lineWrapping,n=i?1e4:2e3,r=n>>1,o=n<<1;if(this.defaultTextDirection!=bt.LTR&&!i)return[];let l=[],a=(u,f,h,m)=>{if(f-u<r)return;let _=this.state.selection.main,p=[_.from];_.empty||p.push(_.to);for(let M of p)if(M>u&&M<f){a(u,M-10,h,m),a(M+10,f,h,m);return}let C=$C(e,M=>M.from>=h.from&&M.to<=h.to&&Math.abs(M.from-u)<r&&Math.abs(M.to-f)<r&&!p.some(U=>M.from<U&&M.to>U));if(!C){if(f<h.to&&s&&i&&s.visibleRanges.some(B=>B.from<=f&&B.to>=f)){let B=s.moveToLineBoundary(ue.cursor(f),!1,!0).head;B>u&&(f=B)}let M=this.gapSize(h,u,f,m),U=i||M<2e6?M:2e6;C=new Pu(u,f,M,U)}l.push(C)},d=u=>{if(u.length<o||u.type!=fs.Text)return;let f=TC(u.from,u.to,this.stateDeco);if(f.total<o)return;let h=this.scrollTarget?this.scrollTarget.range.head:null,m,_;if(i){let p=n/this.heightOracle.lineLength*this.heightOracle.lineHeight,C,M;if(h!=null){let U=_l(f,h),B=((this.visibleBottom-this.visibleTop)/2+p)/u.height;C=U-B,M=U+B}else C=(this.visibleTop-u.top-p)/u.height,M=(this.visibleBottom-u.top+p)/u.height;m=wl(f,C),_=wl(f,M)}else{let p=f.total*this.heightOracle.charWidth,C=n*this.heightOracle.charWidth,M=0;if(p>2e6)for(let T of e)T.from>=u.from&&T.from<u.to&&T.size!=T.displaySize&&T.from*this.heightOracle.charWidth+M<this.pixelViewport.left&&(M=T.size-T.displaySize);let U=this.pixelViewport.left+M,B=this.pixelViewport.right+M,F,j;if(h!=null){let T=_l(f,h),A=((B-U)/2+C)/p;F=T-A,j=T+A}else F=(U-C)/p,j=(B+C)/p;m=wl(f,F),_=wl(f,j)}m>u.from&&a(u.from,m,u,f),_<u.to&&a(_,u.to,u,f)};for(let u of this.viewportLines)Array.isArray(u.type)?u.type.forEach(d):d(u);return l}gapSize(e,s,i,n){let r=_l(n,i)-_l(n,s);return this.heightOracle.lineWrapping?e.height*r:n.total*this.heightOracle.charWidth*r}updateLineGaps(e){Pu.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Fe.set(e.map(s=>s.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let s=this.stateDeco;this.lineGaps.length&&(s=s.concat(this.lineGapDeco));let i=[];tt.spans(s,this.viewport.from,this.viewport.to,{span(r,o){i.push({from:r,to:o})},point(){}},20);let n=0;if(i.length!=this.visibleRanges.length)n=12;else for(let r=0;r<i.length&&!(n&8);r++){let o=this.visibleRanges[r],l=i[r];(o.from!=l.from||o.to!=l.to)&&(n|=4,e&&e.mapPos(o.from,-1)==l.from&&e.mapPos(o.to,1)==l.to||(n|=8))}return this.visibleRanges=i,n}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(s=>s.from<=e&&s.to>=e)||Kr(this.heightMap.lineAt(e,yt.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(s=>s.top<=e&&s.bottom>=e)||Kr(this.heightMap.lineAt(this.scaler.fromDOM(e),yt.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let s=this.lineBlockAtHeight(e+8);return s.from>=this.viewport.from||this.viewportLines[0].top-e>200?s:this.viewportLines[0]}elementAtHeight(e){return Kr(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class kl{constructor(e,s){this.from=e,this.to=s}}function TC(t,e,s){let i=[],n=t,r=0;return tt.spans(s,t,e,{span(){},point(o,l){o>n&&(i.push({from:n,to:o}),r+=o-n),n=l}},20),n<e&&(i.push({from:n,to:e}),r+=e-n),{total:r,ranges:i}}function wl({total:t,ranges:e},s){if(s<=0)return e[0].from;if(s>=1)return e[e.length-1].to;let i=Math.floor(t*s);for(let n=0;;n++){let{from:r,to:o}=e[n],l=o-r;if(i<=l)return r+i;i-=l}}function _l(t,e){let s=0;for(let{from:i,to:n}of t.ranges){if(e<=n){s+=e-i;break}s+=n-i}return s/t.total}function $C(t,e){for(let s of t)if(e(s))return s}const Sp={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class Yc{constructor(e,s,i){let n=0,r=0,o=0;this.viewports=i.map(({from:l,to:a})=>{let d=s.lineAt(l,yt.ByPos,e,0,0).top,u=s.lineAt(a,yt.ByPos,e,0,0).bottom;return n+=u-d,{from:l,to:a,top:d,bottom:u,domTop:0,domBottom:0}}),this.scale=(7e6-n)/(s.height-n);for(let l of this.viewports)l.domTop=o+(l.top-r)*this.scale,o=l.domBottom=l.domTop+(l.bottom-l.top),r=l.bottom}toDOM(e){for(let s=0,i=0,n=0;;s++){let r=s<this.viewports.length?this.viewports[s]:null;if(!r||e<r.top)return n+(e-i)*this.scale;if(e<=r.bottom)return r.domTop+(e-r.top);i=r.bottom,n=r.domBottom}}fromDOM(e){for(let s=0,i=0,n=0;;s++){let r=s<this.viewports.length?this.viewports[s]:null;if(!r||e<r.domTop)return i+(e-n)/this.scale;if(e<=r.domBottom)return r.top+(e-r.domTop);i=r.bottom,n=r.domBottom}}eq(e){return e instanceof Yc?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((s,i)=>s.from==e.viewports[i].from&&s.to==e.viewports[i].to):!1}}function Kr(t,e){if(e.scale==1)return t;let s=e.toDOM(t.top),i=e.toDOM(t.bottom);return new hi(t.from,t.length,s,i-s,Array.isArray(t._content)?t._content.map(n=>Kr(n,e)):t._content)}const Sl=Ee.define({combine:t=>t.join(" ")}),Jd=Ee.define({combine:t=>t.indexOf(!0)>-1}),Yd=on.newName(),kv=on.newName(),wv=on.newName(),_v={"&light":"."+kv,"&dark":"."+wv};function Xd(t,e,s){return new on(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,n=>{if(n=="&")return t;if(!s||!s[n])throw new RangeError(`Unsupported selector: ${n}`);return s[n]}):t+" "+i}})}const EC=Xd("."+Yd,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},_v),OC={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},ju=De.ie&&De.ie_version<=11;class PC{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new gS,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(s=>{for(let i of s)this.queue.push(i);(De.ie&&De.ie_version<=11||De.ios&&e.composing)&&s.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&De.android&&e.constructor.EDIT_CONTEXT!==!1&&!(De.chrome&&De.chrome_version<126)&&(this.editContext=new LC(e),e.state.facet(Ti)&&(e.contentDOM.editContext=this.editContext.editContext)),ju&&(this.onCharData=s=>{this.queue.push({target:s.target,type:"characterData",oldValue:s.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var s;((s=this.view.docView)===null||s===void 0?void 0:s.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(s=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),s.length>0&&s[s.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(s=>{s.length>0&&s[s.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((s,i)=>s!=e[i]))){this.gapIntersection.disconnect();for(let s of e)this.gapIntersection.observe(s);this.gaps=e}}onSelectionChange(e){let s=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,n=this.selectionRange;if(i.state.facet(Ti)?i.root.activeElement!=this.dom:!Wl(this.dom,n))return;let r=n.anchorNode&&i.docView.nearest(n.anchorNode);if(r&&r.ignoreEvent(e)){s||(this.selectionChanged=!1);return}(De.ie&&De.ie_version<=11||De.android&&De.chrome)&&!i.state.selection.main.empty&&n.focusNode&&ro(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,s=So(e.root);if(!s)return!1;let i=De.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&jC(this.view,s)||s;if(!i||this.selectionRange.eq(i))return!1;let n=Wl(this.dom,i);return n&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&yS(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),n&&(this.selectionChanged=!0),!0)}setSelectionRange(e,s){this.selectionRange.set(e.node,e.offset,s.node,s.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,s=null;for(let i=this.dom;i;)if(i.nodeType==1)!s&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:s||(s=this.scrollTargets.slice(0,e)),s&&s.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!s&&(s=this.scrollTargets.slice(0,e)),s){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=s)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,OC),ju&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),ju&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,s){var i;if(!this.delayedAndroidKey){let n=()=>{let r=this.delayedAndroidKey;r&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=r.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&r.force&&dr(this.dom,r.key,r.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(n)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:s,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let s=-1,i=-1,n=!1;for(let r of e){let o=this.readMutation(r);o&&(o.typeOver&&(n=!0),s==-1?{from:s,to:i}=o:(s=Math.min(o.from,s),i=Math.max(o.to,i)))}return{from:s,to:i,typeOver:n}}readChange(){let{from:e,to:s,typeOver:i}=this.processRecords(),n=this.selectionChanged&&Wl(this.dom,this.selectionRange);if(e<0&&!n)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let r=new QS(this.view,e,s,i);return this.view.docView.domChanged={newSel:r.newSel?r.newSel.main:null},r}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let s=this.readChange();if(!s)return this.view.requestMeasure(),!1;let i=this.view.state,n=dv(this.view,s);return this.view.state==i&&(s.domChanged||s.newSel&&!s.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),n}readMutation(e){let s=this.view.docView.nearest(e.target);if(!s||s.ignoreMutation(e))return null;if(s.markDirty(e.type=="attributes"),e.type=="attributes"&&(s.flags|=4),e.type=="childList"){let i=Cp(s,e.previousSibling||e.target.previousSibling,-1),n=Cp(s,e.nextSibling||e.target.nextSibling,1);return{from:i?s.posAfter(i):s.posAtStart,to:n?s.posBefore(n):s.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:s.posAtStart,to:s.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Ti)!=e.state.facet(Ti)&&(e.view.contentDOM.editContext=e.state.facet(Ti)?this.editContext.editContext:null))}destroy(){var e,s,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(s=this.gapIntersection)===null||s===void 0||s.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function Cp(t,e,s){for(;e;){let i=ut.get(e);if(i&&i.parent==t)return i;let n=e.parentNode;e=n!=t.dom?n:s>0?e.nextSibling:e.previousSibling}return null}function Ap(t,e){let s=e.startContainer,i=e.startOffset,n=e.endContainer,r=e.endOffset,o=t.docView.domAtPos(t.state.selection.main.anchor);return ro(o.node,o.offset,n,r)&&([s,i,n,r]=[n,r,s,i]),{anchorNode:s,anchorOffset:i,focusNode:n,focusOffset:r}}function jC(t,e){if(e.getComposedRanges){let n=e.getComposedRanges(t.root)[0];if(n)return Ap(t,n)}let s=null;function i(n){n.preventDefault(),n.stopImmediatePropagation(),s=n.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",i,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",i,!0),s?Ap(t,s):null}class LC{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let s=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let n=e.state.selection.main,{anchor:r,head:o}=n,l=this.toEditorPos(i.updateRangeStart),a=this.toEditorPos(i.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:l,drifted:!1});let d=a-l>i.text.length;l==this.from&&r<this.from?l=r:a==this.to&&r>this.to&&(a=r);let u=cv(e.state.sliceDoc(l,a),i.text,(d?n.from:n.to)-l,d?"end":null);if(!u){let h=ue.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd));h.main.eq(n)||e.dispatch({selection:h,userEvent:"select"});return}let f={from:u.from+l,to:u.toA+l,insert:st.of(i.text.slice(u.from,u.toB).split(`
`))};if((De.mac||De.android)&&f.from==o-1&&/^\. ?$/.test(i.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(f={from:l,to:a,insert:st.of([i.text.replace("."," ")])}),this.pendingContextChange=f,!e.state.readOnly){let h=this.to-this.from+(f.to-f.from+f.insert.length);Gc(e,f,ue.single(this.toEditorPos(i.selectionStart,h),this.toEditorPos(i.selectionEnd,h)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),f.from<f.to&&!f.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(s.text.slice(Math.max(0,i.updateRangeStart-1),Math.min(s.text.length,i.updateRangeStart+1)))&&this.handlers.compositionend(i)},this.handlers.characterboundsupdate=i=>{let n=[],r=null;for(let o=this.toEditorPos(i.rangeStart),l=this.toEditorPos(i.rangeEnd);o<l;o++){let a=e.coordsForChar(o);r=a&&new DOMRect(a.left,a.top,a.right-a.left,a.bottom-a.top)||r||new DOMRect,n.push(r)}s.updateCharacterBounds(i.rangeStart,n)},this.handlers.textformatupdate=i=>{let n=[];for(let r of i.getTextFormats()){let o=r.underlineStyle,l=r.underlineThickness;if(!/none/i.test(o)&&!/none/i.test(l)){let a=this.toEditorPos(r.rangeStart),d=this.toEditorPos(r.rangeEnd);if(a<d){let u=`text-decoration: underline ${/^[a-z]/.test(o)?o+" ":o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${/thin/i.test(l)?1:2}px`;n.push(Fe.mark({attributes:{style:u}}).range(a,d))}}}e.dispatch({effects:tv.of(Fe.set(n))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:i}=this.composing;this.composing=null,i&&this.reset(e.state)}};for(let i in this.handlers)s.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let n=So(i.root);n&&n.rangeCount&&this.editContext.updateSelectionBounds(n.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let s=0,i=!1,n=this.pendingContextChange;return e.changes.iterChanges((r,o,l,a,d)=>{if(i)return;let u=d.length-(o-r);if(n&&o>=n.to)if(n.from==r&&n.to==o&&n.insert.eq(d)){n=this.pendingContextChange=null,s+=u,this.to+=u;return}else n=null,this.revertPending(e.state);if(r+=s,o+=s,o<=this.from)this.from+=u,this.to+=u;else if(r<this.to){if(r<this.from||o>this.to||this.to-this.from+d.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(r),this.toContextPos(o),d.toString()),this.to+=u}s+=u}),n&&!i&&this.revertPending(e.state),!i}update(e){let s=this.pendingContextChange,i=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(i.from,i.to)&&e.transactions.some(n=>!n.isUserEvent("input.type")&&n.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||s)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:s}=e.selection.main;this.from=Math.max(0,s-1e4),this.to=Math.min(e.doc.length,s+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let s=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(s.from),this.toContextPos(s.from+s.insert.length),e.doc.sliceString(s.from,s.to))}setSelection(e){let{main:s}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,s.anchor))),n=this.toContextPos(s.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=n)&&this.editContext.updateSelection(i,n)}rangeIsValid(e){let{head:s}=e.selection.main;return!(this.from>0&&s-this.from<500||this.to<e.doc.length&&this.to-s<500||this.to-this.from>1e4*3)}toEditorPos(e,s=this.to-this.from){e=Math.min(e,s);let i=this.composing;return i&&i.drifted?i.editorBase+(e-i.contextBase):e+this.from}toContextPos(e){let s=this.composing;return s&&s.drifted?s.contextBase+(e-s.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class $e{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var s;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(n=>n.forEach(r=>i(r,this)))||(n=>this.update(n)),this.dispatch=this.dispatch.bind(this),this._root=e.root||vS(e.parent)||document,this.viewState=new _p(e.state||et.create(e)),e.scrollTo&&e.scrollTo.is(yl)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Xn).map(n=>new $u(n));for(let n of this.plugins)n.update(this);this.observer=new PC(this),this.inputState=new iC(this),this.inputState.ensureHandlers(this.plugins),this.docView=new np(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((s=document.fonts)===null||s===void 0)&&s.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let s=e.length==1&&e[0]instanceof Rt?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(s,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let s=!1,i=!1,n,r=this.state;for(let h of e){if(h.startState!=r)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");r=h.state}if(this.destroyed){this.viewState.state=r;return}let o=this.hasFocus,l=0,a=null;e.some(h=>h.annotation(vv))?(this.inputState.notifiedFocused=o,l=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,a=yv(r,o),a||(l=1));let d=this.observer.delayedAndroidKey,u=null;if(d?(this.observer.clearDelayedAndroidKey(),u=this.observer.readChange(),(u&&!this.state.doc.eq(r.doc)||!this.state.selection.eq(r.selection))&&(u=null)):this.observer.clear(),r.facet(et.phrases)!=this.state.facet(et.phrases))return this.setState(r);n=pa.create(this,r,e),n.flags|=l;let f=this.viewState.scrollTarget;try{this.updateState=2;for(let h of e){if(f&&(f=f.map(h.changes)),h.scrollIntoView){let{main:m}=h.state.selection;f=new cr(m.empty?m:ue.cursor(m.head,m.head>m.anchor?-1:1))}for(let m of h.effects)m.is(yl)&&(f=m.value.clip(this.state))}this.viewState.update(n,f),this.bidiCache=ga.update(this.bidiCache,n.changes),n.empty||(this.updatePlugins(n),this.inputState.update(n)),s=this.docView.update(n),this.state.facet(Wr)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(s,e.some(h=>h.isUserEvent("select.pointer")))}finally{this.updateState=0}if(n.startState.facet(Sl)!=n.state.facet(Sl)&&(this.viewState.mustMeasureContent=!0),(s||i||f||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),s&&this.docViewUpdate(),!n.empty)for(let h of this.state.facet(Wd))try{h(n)}catch(m){vs(this.state,m,"update listener")}(a||u)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),u&&!dv(this,u)&&d.force&&dr(this.contentDOM,d.key,d.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let s=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new _p(e),this.plugins=e.facet(Xn).map(i=>new $u(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new np(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}s&&this.focus(),this.requestMeasure()}updatePlugins(e){let s=e.startState.facet(Xn),i=e.state.facet(Xn);if(s!=i){let n=[];for(let r of i){let o=s.indexOf(r);if(o<0)n.push(new $u(r));else{let l=this.plugins[o];l.mustUpdate=e,n.push(l)}}for(let r of this.plugins)r.mustUpdate!=e&&r.destroy(this);this.plugins=n,this.pluginMap.clear()}else for(let n of this.plugins)n.mustUpdate=e;for(let n=0;n<this.plugins.length;n++)this.plugins[n].update(this);s!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let s=e.value;if(s&&s.docViewUpdate)try{s.docViewUpdate(this)}catch(i){vs(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let s=null,i=this.scrollDOM,n=i.scrollTop*this.scaleY,{scrollAnchorPos:r,scrollAnchorHeight:o}=this.viewState;Math.abs(n-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let l=0;;l++){if(o<0)if($0(i))r=-1,o=this.viewState.heightMap.height;else{let m=this.viewState.scrollAnchorAt(n);r=m.from,o=m.top}this.updateState=1;let a=this.viewState.measure(this);if(!a&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let d=[];a&4||([this.measureRequests,d]=[d,this.measureRequests]);let u=d.map(m=>{try{return m.read(this)}catch(_){return vs(this.state,_),Vp}}),f=pa.create(this,this.state,[]),h=!1;f.flags|=a,s?s.flags|=a:s=f,this.updateState=2,f.empty||(this.updatePlugins(f),this.inputState.update(f),this.updateAttrs(),h=this.docView.update(f),h&&this.docViewUpdate());for(let m=0;m<d.length;m++)if(u[m]!=Vp)try{let _=d[m];_.write&&_.write(u[m],this)}catch(_){vs(this.state,_)}if(h&&this.docView.updateSelection(!0),!f.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let _=(r<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(r).top)-o;if(_>1||_<-1){n=n+_,i.scrollTop=n/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(s&&!s.empty)for(let l of this.state.facet(Wd))l(s)}get themeClasses(){return Yd+" "+(this.state.facet(Jd)?wv:kv)+" "+this.state.facet(Sl)}updateAttrs(){let e=Mp(this,sv,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),s={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(Ti)?"true":"false",class:"cm-content",style:`${De.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(s["aria-readonly"]="true"),Mp(this,qc,s);let i=this.observer.ignore(()=>{let n=Nd(this.contentDOM,this.contentAttrs,s),r=Nd(this.dom,this.editorAttrs,e);return n||r});return this.editorAttrs=e,this.contentAttrs=s,i}showAnnouncements(e){let s=!0;for(let i of e)for(let n of i.effects)if(n.is($e.announce)){s&&(this.announceDOM.textContent=""),s=!1;let r=this.announceDOM.appendChild(document.createElement("div"));r.textContent=n.value}}mountStyles(){this.styleModules=this.state.facet(Wr);let e=this.state.facet($e.cspNonce);on.mount(this.root,this.styleModules.concat(EC).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let s=0;s<this.measureRequests.length;s++)if(this.measureRequests[s].key===e.key){this.measureRequests[s]=e;return}}this.measureRequests.push(e)}}plugin(e){let s=this.pluginMap.get(e);return(s===void 0||s&&s.plugin!=e)&&this.pluginMap.set(e,s=this.plugins.find(i=>i.plugin==e)||null),s&&s.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,s,i){return Ou(this,e,up(this,e,s,i))}moveByGroup(e,s){return Ou(this,e,up(this,e,s,i=>GS(this,e.head,i)))}visualLineSide(e,s){let i=this.bidiSpans(e),n=this.textDirectionAt(e.from),r=i[s?i.length-1:0];return ue.cursor(r.side(s,n)+e.from,r.forward(!s,n)?1:-1)}moveToLineBoundary(e,s,i=!0){return KS(this,e,s,i)}moveVertically(e,s,i){return Ou(this,e,JS(this,e,s,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,s=0){return this.docView.posFromDOM(e,s)}posAtCoords(e,s=!0){return this.readMeasured(),lv(this,e,s)}coordsAtPos(e,s=1){this.readMeasured();let i=this.docView.coordsAt(e,s);if(!i||i.left==i.right)return i;let n=this.state.doc.lineAt(e),r=this.bidiSpans(n),o=r[Xi.find(r,e-n.from,-1,s)];return Ya(i,o.dir==bt.LTR==s>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(Z0)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>RC)return H0(e.length);let s=this.textDirectionAt(e.from),i;for(let r of this.bidiCache)if(r.from==e.from&&r.dir==s&&(r.fresh||F0(r.isolates,i=ip(this,e))))return r.order;i||(i=ip(this,e));let n=$S(e.text,s,i);return this.bidiCache.push(new ga(e.from,e.to,s,i,!0,n)),n}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||De.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{D0(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,s={}){return yl.of(new cr(typeof e=="number"?ue.cursor(e):e,s.y,s.x,s.yMargin,s.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:s}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return yl.of(new cr(ue.cursor(i.from),"start","start",i.top-e,s,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return Et.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Et.define(()=>({}),{eventObservers:e})}static theme(e,s){let i=on.newName(),n=[Sl.of(i),Wr.of(Xd(`.${i}`,e))];return s&&s.dark&&n.push(Jd.of(!0)),n}static baseTheme(e){return Un.lowest(Wr.of(Xd("."+Yd,e,_v)))}static findFromDOM(e){var s;let i=e.querySelector(".cm-content"),n=i&&ut.get(i)||ut.get(e);return((s=n?.rootView)===null||s===void 0?void 0:s.view)||null}}$e.styleModule=Wr;$e.inputHandler=Y0;$e.clipboardInputFilter=Hc;$e.clipboardOutputFilter=Wc;$e.scrollHandler=ev;$e.focusChangeEffect=X0;$e.perLineTextDirection=Z0;$e.exceptionSink=J0;$e.updateListener=Wd;$e.editable=Ti;$e.mouseSelectionStyle=G0;$e.dragMovesSelection=K0;$e.clickAddsSelectionRange=q0;$e.decorations=Ao;$e.outerDecorations=iv;$e.atomicRanges=Ho;$e.bidiIsolatedRanges=nv;$e.scrollMargins=rv;$e.darkTheme=Jd;$e.cspNonce=Ee.define({combine:t=>t.length?t[0]:""});$e.contentAttributes=qc;$e.editorAttributes=sv;$e.lineWrapping=$e.contentAttributes.of({class:"cm-lineWrapping"});$e.announce=Ge.define();const RC=4096,Vp={};class ga{constructor(e,s,i,n,r,o){this.from=e,this.to=s,this.dir=i,this.isolates=n,this.fresh=r,this.order=o}static update(e,s){if(s.empty&&!e.some(r=>r.fresh))return e;let i=[],n=e.length?e[e.length-1].dir:bt.LTR;for(let r=Math.max(0,e.length-10);r<e.length;r++){let o=e[r];o.dir==n&&!s.touchesRange(o.from,o.to)&&i.push(new ga(s.mapPos(o.from,1),s.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return i}}function Mp(t,e,s){for(let i=t.state.facet(e),n=i.length-1;n>=0;n--){let r=i[n],o=typeof r=="function"?r(t):r;o&&Id(o,s)}return s}const BC=De.mac?"mac":De.windows?"win":De.linux?"linux":"key";function IC(t,e){const s=t.split(/-(?!$)/);let i=s[s.length-1];i=="Space"&&(i=" ");let n,r,o,l;for(let a=0;a<s.length-1;++a){const d=s[a];if(/^(cmd|meta|m)$/i.test(d))l=!0;else if(/^a(lt)?$/i.test(d))n=!0;else if(/^(c|ctrl|control)$/i.test(d))r=!0;else if(/^s(hift)?$/i.test(d))o=!0;else if(/^mod$/i.test(d))e=="mac"?l=!0:r=!0;else throw new Error("Unrecognized modifier name: "+d)}return n&&(i="Alt-"+i),r&&(i="Ctrl-"+i),l&&(i="Meta-"+i),o&&(i="Shift-"+i),i}function Cl(t,e,s){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),s!==!1&&e.shiftKey&&(t="Shift-"+t),t}const NC=Un.default($e.domEventHandlers({keydown(t,e){return Cv(Sv(e.state),t,e,"editor")}})),Xc=Ee.define({enables:NC}),Dp=new WeakMap;function Sv(t){let e=t.facet(Xc),s=Dp.get(e);return s||Dp.set(e,s=FC(e.reduce((i,n)=>i.concat(n),[]))),s}function UC(t,e,s){return Cv(Sv(t.state),e,t,s)}let Ki=null;const zC=4e3;function FC(t,e=BC){let s=Object.create(null),i=Object.create(null),n=(o,l)=>{let a=i[o];if(a==null)i[o]=l;else if(a!=l)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},r=(o,l,a,d,u)=>{var f,h;let m=s[o]||(s[o]=Object.create(null)),_=l.split(/ (?!$)/).map(M=>IC(M,e));for(let M=1;M<_.length;M++){let U=_.slice(0,M).join(" ");n(U,!0),m[U]||(m[U]={preventDefault:!0,stopPropagation:!1,run:[B=>{let F=Ki={view:B,prefix:U,scope:o};return setTimeout(()=>{Ki==F&&(Ki=null)},zC),!0}]})}let p=_.join(" ");n(p,!1);let C=m[p]||(m[p]={preventDefault:!1,stopPropagation:!1,run:((h=(f=m._any)===null||f===void 0?void 0:f.run)===null||h===void 0?void 0:h.slice())||[]});a&&C.run.push(a),d&&(C.preventDefault=!0),u&&(C.stopPropagation=!0)};for(let o of t){let l=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let d of l){let u=s[d]||(s[d]=Object.create(null));u._any||(u._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:f}=o;for(let h in u)u[h].run.push(m=>f(m,Zd))}let a=o[e]||o.key;if(a)for(let d of l)r(d,a,o.run,o.preventDefault,o.stopPropagation),o.shift&&r(d,"Shift-"+a,o.shift,o.preventDefault,o.stopPropagation)}return s}let Zd=null;function Cv(t,e,s,i){Zd=e;let n=cS(e),r=ms(n,0),o=fi(r)==n.length&&n!=" ",l="",a=!1,d=!1,u=!1;Ki&&Ki.view==s&&Ki.scope==i&&(l=Ki.prefix+" ",hv.indexOf(e.keyCode)<0&&(d=!0,Ki=null));let f=new Set,h=C=>{if(C){for(let M of C.run)if(!f.has(M)&&(f.add(M),M(s)))return C.stopPropagation&&(u=!0),!0;C.preventDefault&&(C.stopPropagation&&(u=!0),d=!0)}return!1},m=t[i],_,p;return m&&(h(m[l+Cl(n,e,!o)])?a=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(De.windows&&e.ctrlKey&&e.altKey)&&!(De.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(_=ln[e.keyCode])&&_!=n?(h(m[l+Cl(_,e,!0)])||e.shiftKey&&(p=_o[e.keyCode])!=n&&p!=_&&h(m[l+Cl(p,e,!1)]))&&(a=!0):o&&e.shiftKey&&h(m[l+Cl(n,e,!0)])&&(a=!0),!a&&h(m._any)&&(a=!0)),d&&(a=!0),a&&u&&e.stopPropagation(),Zd=null,a}class Wo{constructor(e,s,i,n,r){this.className=e,this.left=s,this.top=i,this.width=n,this.height=r}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,s){return s.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,s,i){if(i.empty){let n=e.coordsAtPos(i.head,i.assoc||1);if(!n)return[];let r=Av(e);return[new Wo(s,n.left-r.left,n.top-r.top,null,n.bottom-n.top)]}else return HC(e,s,i)}}function Av(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==bt.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function Tp(t,e,s,i){let n=t.coordsAtPos(e,s*2);if(!n)return i;let r=t.dom.getBoundingClientRect(),o=(n.top+n.bottom)/2,l=t.posAtCoords({x:r.left+1,y:o}),a=t.posAtCoords({x:r.right-1,y:o});return l==null||a==null?i:{from:Math.max(i.from,Math.min(l,a)),to:Math.min(i.to,Math.max(l,a))}}function HC(t,e,s){if(s.to<=t.viewport.from||s.from>=t.viewport.to)return[];let i=Math.max(s.from,t.viewport.from),n=Math.min(s.to,t.viewport.to),r=t.textDirection==bt.LTR,o=t.contentDOM,l=o.getBoundingClientRect(),a=Av(t),d=o.querySelector(".cm-line"),u=d&&window.getComputedStyle(d),f=l.left+(u?parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)):0),h=l.right-(u?parseInt(u.paddingRight):0),m=Kd(t,i,1),_=Kd(t,n,-1),p=m.type==fs.Text?m:null,C=_.type==fs.Text?_:null;if(p&&(t.lineWrapping||m.widgetLineBreaks)&&(p=Tp(t,i,1,p)),C&&(t.lineWrapping||_.widgetLineBreaks)&&(C=Tp(t,n,-1,C)),p&&C&&p.from==C.from&&p.to==C.to)return U(B(s.from,s.to,p));{let j=p?B(s.from,null,p):F(m,!1),T=C?B(null,s.to,C):F(_,!0),A=[];return(p||m).to<(C||_).from-(p&&C?1:0)||m.widgetLineBreaks>1&&j.bottom+t.defaultLineHeight/2<T.top?A.push(M(f,j.bottom,h,T.top)):j.bottom<T.top&&t.elementAtHeight((j.bottom+T.top)/2).type==fs.Text&&(j.bottom=T.top=(j.bottom+T.top)/2),U(j).concat(A).concat(U(T))}function M(j,T,A,J){return new Wo(e,j-a.left,T-a.top,A-j,J-T)}function U({top:j,bottom:T,horizontal:A}){let J=[];for(let ie=0;ie<A.length;ie+=2)J.push(M(A[ie],j,A[ie+1],T));return J}function B(j,T,A){let J=1e9,ie=-1e9,ge=[];function le(te,we,G,X,se){let Re=t.coordsAtPos(te,te==A.to?-2:2),$=t.coordsAtPos(G,G==A.from?2:-2);!Re||!$||(J=Math.min(Re.top,$.top,J),ie=Math.max(Re.bottom,$.bottom,ie),se==bt.LTR?ge.push(r&&we?f:Re.left,r&&X?h:$.right):ge.push(!r&&X?f:$.left,!r&&we?h:Re.right))}let W=j??A.from,he=T??A.to;for(let te of t.visibleRanges)if(te.to>W&&te.from<he)for(let we=Math.max(te.from,W),G=Math.min(te.to,he);;){let X=t.state.doc.lineAt(we);for(let se of t.bidiSpans(X)){let Re=se.from+X.from,$=se.to+X.from;if(Re>=G)break;$>we&&le(Math.max(Re,we),j==null&&Re<=W,Math.min($,G),T==null&&$>=he,se.dir)}if(we=X.to+1,we>=G)break}return ge.length==0&&le(W,j==null,he,T==null,t.textDirection),{top:J,bottom:ie,horizontal:ge}}function F(j,T){let A=l.top+(T?j.top:j.bottom);return{top:A,bottom:A,horizontal:[]}}}function WC(t,e){return t.constructor==e.constructor&&t.eq(e)}class qC{constructor(e,s){this.view=e,this.layer=s,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),s.above&&this.dom.classList.add("cm-layer-above"),s.class&&this.dom.classList.add(s.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),s.mount&&s.mount(this.dom,e)}update(e){e.startState.facet(Gl)!=e.state.facet(Gl)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let s=0,i=e.facet(Gl);for(;s<i.length&&i[s]!=this.layer;)s++;this.dom.style.zIndex=String((this.layer.above?150:-1)-s)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:s}=this.view;(e!=this.scaleX||s!=this.scaleY)&&(this.scaleX=e,this.scaleY=s,this.dom.style.transform=`scale(${1/e}, ${1/s})`)}draw(e){if(e.length!=this.drawn.length||e.some((s,i)=>!WC(s,this.drawn[i]))){let s=this.dom.firstChild,i=0;for(let n of e)n.update&&s&&n.constructor&&this.drawn[i].constructor&&n.update(s,this.drawn[i])?(s=s.nextSibling,i++):this.dom.insertBefore(n.draw(),s);for(;s;){let n=s.nextSibling;s.remove(),s=n}this.drawn=e,De.safari&&De.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Gl=Ee.define();function Vv(t){return[Et.define(e=>new qC(e,t)),Gl.of(t)]}const Vo=Ee.define({combine(t){return xi(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,s)=>Math.min(e,s),drawRangeCursor:(e,s)=>e||s})}});function KC(t={}){return[Vo.of(t),GC,JC,YC,Q0.of(!0)]}function Mv(t){return t.startState.facet(Vo)!=t.state.facet(Vo)}const GC=Vv({above:!0,markers(t){let{state:e}=t,s=e.facet(Vo),i=[];for(let n of e.selection.ranges){let r=n==e.selection.main;if(n.empty||s.drawRangeCursor){let o=r?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",l=n.empty?n:ue.cursor(n.head,n.head>n.anchor?-1:1);for(let a of Wo.forRange(t,o,l))i.push(a)}}return i},update(t,e){t.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let s=Mv(t);return s&&$p(t.state,e),t.docChanged||t.selectionSet||s},mount(t,e){$p(e.state,t)},class:"cm-cursorLayer"});function $p(t,e){e.style.animationDuration=t.facet(Vo).cursorBlinkRate+"ms"}const JC=Vv({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:Wo.forRange(t,"cm-selectionBackground",e)).reduce((e,s)=>e.concat(s))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||Mv(t)},class:"cm-selectionLayer"}),YC=Un.highest($e.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),Dv=Ge.define({map(t,e){return t==null?null:e.mapPos(t)}}),Gr=Gt.define({create(){return null},update(t,e){return t!=null&&(t=e.changes.mapPos(t)),e.effects.reduce((s,i)=>i.is(Dv)?i.value:s,t)}}),XC=Et.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let s=t.state.field(Gr);s==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(Gr)!=s||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:t}=this,e=t.state.field(Gr),s=e!=null&&t.coordsAtPos(e);if(!s)return null;let i=t.scrollDOM.getBoundingClientRect();return{left:s.left-i.left+t.scrollDOM.scrollLeft*t.scaleX,top:s.top-i.top+t.scrollDOM.scrollTop*t.scaleY,height:s.bottom-s.top}}drawCursor(t){if(this.cursor){let{scaleX:e,scaleY:s}=this.view;t?(this.cursor.style.left=t.left/e+"px",this.cursor.style.top=t.top/s+"px",this.cursor.style.height=t.height/s+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(Gr)!=t&&this.view.dispatch({effects:Dv.of(t)})}},{eventObservers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){(t.target==this.view.contentDOM||!this.view.contentDOM.contains(t.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function ZC(){return[Gr,XC]}function Ep(t,e,s,i,n){e.lastIndex=0;for(let r=t.iterRange(s,i),o=s,l;!r.next().done;o+=r.value.length)if(!r.lineBreak)for(;l=e.exec(r.value);)n(o+l.index,l)}function QC(t,e){let s=t.visibleRanges;if(s.length==1&&s[0].from==t.viewport.from&&s[0].to==t.viewport.to)return s;let i=[];for(let{from:n,to:r}of s)n=Math.max(t.state.doc.lineAt(n).from,n-e),r=Math.min(t.state.doc.lineAt(r).to,r+e),i.length&&i[i.length-1].to>=n?i[i.length-1].to=r:i.push({from:n,to:r});return i}class e5{constructor(e){const{regexp:s,decoration:i,decorate:n,boundary:r,maxLength:o=1e3}=e;if(!s.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=s,n)this.addMatch=(l,a,d,u)=>n(u,d,d+l[0].length,l,a);else if(typeof i=="function")this.addMatch=(l,a,d,u)=>{let f=i(l,a,d);f&&u(d,d+l[0].length,f)};else if(i)this.addMatch=(l,a,d,u)=>u(d,d+l[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=r,this.maxLength=o}createDeco(e){let s=new Pi,i=s.add.bind(s);for(let{from:n,to:r}of QC(e,this.maxLength))Ep(e.state.doc,this.regexp,n,r,(o,l)=>this.addMatch(l,e,o,i));return s.finish()}updateDeco(e,s){let i=1e9,n=-1;return e.docChanged&&e.changes.iterChanges((r,o,l,a)=>{a>=e.view.viewport.from&&l<=e.view.viewport.to&&(i=Math.min(l,i),n=Math.max(a,n))}),e.viewportMoved||n-i>1e3?this.createDeco(e.view):n>-1?this.updateRange(e.view,s.map(e.changes),i,n):s}updateRange(e,s,i,n){for(let r of e.visibleRanges){let o=Math.max(r.from,i),l=Math.min(r.to,n);if(l>=o){let a=e.state.doc.lineAt(o),d=a.to<l?e.state.doc.lineAt(l):a,u=Math.max(r.from,a.from),f=Math.min(r.to,d.to);if(this.boundary){for(;o>a.from;o--)if(this.boundary.test(a.text[o-1-a.from])){u=o;break}for(;l<d.to;l++)if(this.boundary.test(d.text[l-d.from])){f=l;break}}let h=[],m,_=(p,C,M)=>h.push(M.range(p,C));if(a==d)for(this.regexp.lastIndex=u-a.from;(m=this.regexp.exec(a.text))&&m.index<f-a.from;)this.addMatch(m,e,m.index+a.from,_);else Ep(e.state.doc,this.regexp,u,f,(p,C)=>this.addMatch(C,e,p,_));s=s.update({filterFrom:u,filterTo:f,filter:(p,C)=>p<u||C>f,add:h})}}return s}}const Qd=/x/.unicode!=null?"gu":"g",t5=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,Qd),s5={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Lu=null;function i5(){var t;if(Lu==null&&typeof document<"u"&&document.body){let e=document.body.style;Lu=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return Lu||!1}const Jl=Ee.define({combine(t){let e=xi(t,{render:null,specialChars:t5,addSpecialChars:null});return(e.replaceTabs=!i5())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,Qd)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,Qd)),e}});function n5(t={}){return[Jl.of(t),r5()]}let Op=null;function r5(){return Op||(Op=Et.fromClass(class{constructor(t){this.view=t,this.decorations=Fe.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(Jl)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new e5({regexp:t.specialChars,decoration:(e,s,i)=>{let{doc:n}=s.state,r=ms(e[0],0);if(r==9){let o=n.lineAt(i),l=s.state.tabSize,a=Dr(o.text,l,i-o.from);return Fe.replace({widget:new u5((l-a%l)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[r]||(this.decorationCache[r]=Fe.replace({widget:new a5(t,r)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(Jl);t.startState.facet(Jl)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const o5="";function l5(t){return t>=32?o5:t==10?"":String.fromCharCode(9216+t)}class a5 extends cn{constructor(e,s){super(),this.options=e,this.code=s}eq(e){return e.code==this.code}toDOM(e){let s=l5(this.code),i=e.state.phrase("Control character")+" "+(s5[this.code]||"0x"+this.code.toString(16)),n=this.options.render&&this.options.render(this.code,i,s);if(n)return n;let r=document.createElement("span");return r.textContent=s,r.title=i,r.setAttribute("aria-label",i),r.className="cm-specialChar",r}ignoreEvent(){return!1}}class u5 extends cn{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function d5(){return f5}const c5=Fe.line({class:"cm-activeLine"}),f5=Et.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,s=[];for(let i of t.state.selection.ranges){let n=t.lineBlockAt(i.head);n.from>e&&(s.push(c5.range(n.from)),e=n.from)}return Fe.set(s)}},{decorations:t=>t.decorations}),ec=2e3;function h5(t,e,s){let i=Math.min(e.line,s.line),n=Math.max(e.line,s.line),r=[];if(e.off>ec||s.off>ec||e.col<0||s.col<0){let o=Math.min(e.off,s.off),l=Math.max(e.off,s.off);for(let a=i;a<=n;a++){let d=t.doc.line(a);d.length<=l&&r.push(ue.range(d.from+o,d.to+l))}}else{let o=Math.min(e.col,s.col),l=Math.max(e.col,s.col);for(let a=i;a<=n;a++){let d=t.doc.line(a),u=$d(d.text,o,t.tabSize,!0);if(u<0)r.push(ue.cursor(d.to));else{let f=$d(d.text,l,t.tabSize);r.push(ue.range(d.from+u,d.from+f))}}}return r}function p5(t,e){let s=t.coordsAtPos(t.viewport.from);return s?Math.round(Math.abs((s.left-e)/t.defaultCharacterWidth)):-1}function Pp(t,e){let s=t.posAtCoords({x:e.clientX,y:e.clientY},!1),i=t.state.doc.lineAt(s),n=s-i.from,r=n>ec?-1:n==i.length?p5(t,e.clientX):Dr(i.text,t.state.tabSize,s-i.from);return{line:i.number,col:r,off:n}}function m5(t,e){let s=Pp(t,e),i=t.state.selection;return s?{update(n){if(n.docChanged){let r=n.changes.mapPos(n.startState.doc.line(s.line).from),o=n.state.doc.lineAt(r);s={line:o.number,col:s.col,off:Math.min(s.off,o.length)},i=i.map(n.changes)}},get(n,r,o){let l=Pp(t,n);if(!l)return i;let a=h5(t.state,s,l);return a.length?o?ue.create(a.concat(i.ranges)):ue.create(a):i}}:null}function g5(t){let e=(s=>s.altKey&&s.button==0);return $e.mouseSelectionStyle.of((s,i)=>e(i)?m5(s,i):null)}const v5={Alt:[18,t=>!!t.altKey],Control:[17,t=>!!t.ctrlKey],Shift:[16,t=>!!t.shiftKey],Meta:[91,t=>!!t.metaKey]},y5={style:"cursor: crosshair"};function b5(t={}){let[e,s]=v5[t.key||"Alt"],i=Et.fromClass(class{constructor(n){this.view=n,this.isDown=!1}set(n){this.isDown!=n&&(this.isDown=n,this.view.update([]))}},{eventObservers:{keydown(n){this.set(n.keyCode==e||s(n))},keyup(n){(n.keyCode==e||!s(n))&&this.set(!1)},mousemove(n){this.set(s(n))}}});return[i,$e.contentAttributes.of(n=>{var r;return!((r=n.plugin(i))===null||r===void 0)&&r.isDown?y5:null})]}const Nr="-10000px";class Tv{constructor(e,s,i,n){this.facet=s,this.createTooltipView=i,this.removeTooltipView=n,this.input=e.state.facet(s),this.tooltips=this.input.filter(o=>o);let r=null;this.tooltipViews=this.tooltips.map(o=>r=i(o,r))}update(e,s){var i;let n=e.state.facet(this.facet),r=n.filter(a=>a);if(n===this.input){for(let a of this.tooltipViews)a.update&&a.update(e);return!1}let o=[],l=s?[]:null;for(let a=0;a<r.length;a++){let d=r[a],u=-1;if(d){for(let f=0;f<this.tooltips.length;f++){let h=this.tooltips[f];h&&h.create==d.create&&(u=f)}if(u<0)o[a]=this.createTooltipView(d,a?o[a-1]:null),l&&(l[a]=!!d.above);else{let f=o[a]=this.tooltipViews[u];l&&(l[a]=s[u]),f.update&&f.update(e)}}}for(let a of this.tooltipViews)o.indexOf(a)<0&&(this.removeTooltipView(a),(i=a.destroy)===null||i===void 0||i.call(a));return s&&(l.forEach((a,d)=>s[d]=a),s.length=l.length),this.input=n,this.tooltips=r,this.tooltipViews=o,!0}}function x5(t){let e=t.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const Ru=Ee.define({combine:t=>{var e,s,i;return{position:De.ios?"absolute":((e=t.find(n=>n.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((s=t.find(n=>n.parent))===null||s===void 0?void 0:s.parent)||null,tooltipSpace:((i=t.find(n=>n.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||x5}}}),jp=new WeakMap,Zc=Et.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(Ru);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new Tv(t,Qc,(s,i)=>this.createTooltip(s,i),s=>{this.resizeObserver&&this.resizeObserver.unobserve(s.dom),s.dom.remove()}),this.above=this.manager.tooltips.map(s=>!!s.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(s=>{Date.now()>this.lastTransaction-50&&s.length>0&&s[s.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let s=e||t.geometryChanged,i=t.state.facet(Ru);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let n of this.manager.tooltipViews)n.dom.style.position=this.position;s=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let n of this.manager.tooltipViews)this.container.appendChild(n.dom);s=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);s&&this.maybeMeasure()}createTooltip(t,e){let s=t.create(this.view),i=e?e.dom:null;if(s.dom.classList.add("cm-tooltip"),t.arrow&&!s.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let n=document.createElement("div");n.className="cm-tooltip-arrow",s.dom.appendChild(n)}return s.dom.style.position=this.position,s.dom.style.top=Nr,s.dom.style.left="0px",this.container.insertBefore(s.dom,i),s.mount&&s.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(s.dom),s}destroy(){var t,e,s;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(t=i.destroy)===null||t===void 0||t.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(s=this.intersectionObserver)===null||s===void 0||s.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=1,e=1,s=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:r}=this.manager.tooltipViews[0];if(De.gecko)s=r.offsetParent!=this.container.ownerDocument.body;else if(r.style.top==Nr&&r.style.left=="0px"){let o=r.getBoundingClientRect();s=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}}if(s||this.position=="absolute")if(this.parent){let r=this.parent.getBoundingClientRect();r.width&&r.height&&(t=r.width/this.parent.offsetWidth,e=r.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:e}=this.view.viewState);let i=this.view.scrollDOM.getBoundingClientRect(),n=Kc(this.view);return{visible:{left:i.left+n.left,top:i.top+n.top,right:i.right-n.right,bottom:i.bottom-n.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((r,o)=>{let l=this.manager.tooltipViews[o];return l.getCoords?l.getCoords(r.pos):this.view.coordsAtPos(r.pos)}),size:this.manager.tooltipViews.map(({dom:r})=>r.getBoundingClientRect()),space:this.view.state.facet(Ru).tooltipSpace(this.view),scaleX:t,scaleY:e,makeAbsolute:s}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let l of this.manager.tooltipViews)l.dom.style.position="absolute"}let{visible:s,space:i,scaleX:n,scaleY:r}=t,o=[];for(let l=0;l<this.manager.tooltips.length;l++){let a=this.manager.tooltips[l],d=this.manager.tooltipViews[l],{dom:u}=d,f=t.pos[l],h=t.size[l];if(!f||a.clip!==!1&&(f.bottom<=Math.max(s.top,i.top)||f.top>=Math.min(s.bottom,i.bottom)||f.right<Math.max(s.left,i.left)-.1||f.left>Math.min(s.right,i.right)+.1)){u.style.top=Nr;continue}let m=a.arrow?d.dom.querySelector(".cm-tooltip-arrow"):null,_=m?7:0,p=h.right-h.left,C=(e=jp.get(d))!==null&&e!==void 0?e:h.bottom-h.top,M=d.offset||w5,U=this.view.textDirection==bt.LTR,B=h.width>i.right-i.left?U?i.left:i.right-h.width:U?Math.max(i.left,Math.min(f.left-(m?14:0)+M.x,i.right-p)):Math.min(Math.max(i.left,f.left-p+(m?14:0)-M.x),i.right-p),F=this.above[l];!a.strictSide&&(F?f.top-C-_-M.y<i.top:f.bottom+C+_+M.y>i.bottom)&&F==i.bottom-f.bottom>f.top-i.top&&(F=this.above[l]=!F);let j=(F?f.top-i.top:i.bottom-f.bottom)-_;if(j<C&&d.resize!==!1){if(j<this.view.defaultLineHeight){u.style.top=Nr;continue}jp.set(d,C),u.style.height=(C=j)/r+"px"}else u.style.height&&(u.style.height="");let T=F?f.top-C-_-M.y:f.bottom+_+M.y,A=B+p;if(d.overlap!==!0)for(let J of o)J.left<A&&J.right>B&&J.top<T+C&&J.bottom>T&&(T=F?J.top-C-2-_:J.bottom+_+2);if(this.position=="absolute"?(u.style.top=(T-t.parent.top)/r+"px",Lp(u,(B-t.parent.left)/n)):(u.style.top=T/r+"px",Lp(u,B/n)),m){let J=f.left+(U?M.x:-M.x)-(B+14-7);m.style.left=J/n+"px"}d.overlap!==!0&&o.push({left:B,top:T,right:A,bottom:T+C}),u.classList.toggle("cm-tooltip-above",F),u.classList.toggle("cm-tooltip-below",!F),d.positioned&&d.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=Nr}},{eventObservers:{scroll(){this.maybeMeasure()}}});function Lp(t,e){let s=parseInt(t.style.left,10);(isNaN(s)||Math.abs(e-s)>1)&&(t.style.left=e+"px")}const k5=$e.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),w5={x:0,y:0},Qc=Ee.define({enables:[Zc,k5]}),va=Ee.define({combine:t=>t.reduce((e,s)=>e.concat(s),[])});class Za{static create(e){return new Za(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new Tv(e,va,(s,i)=>this.createHostedView(s,i),s=>s.dom.remove())}createHostedView(e,s){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,s?s.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let s of this.manager.tooltipViews)s.mount&&s.mount(e);this.mounted=!0}positioned(e){for(let s of this.manager.tooltipViews)s.positioned&&s.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let s of this.manager.tooltipViews)(e=s.destroy)===null||e===void 0||e.call(s)}passProp(e){let s;for(let i of this.manager.tooltipViews){let n=i[e];if(n!==void 0){if(s===void 0)s=n;else if(s!==n)return}}return s}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const _5=Qc.compute([va],t=>{let e=t.facet(va);return e.length===0?null:{pos:Math.min(...e.map(s=>s.pos)),end:Math.max(...e.map(s=>{var i;return(i=s.end)!==null&&i!==void 0?i:s.pos})),create:Za.create,above:e[0].above,arrow:e.some(s=>s.arrow)}});class S5{constructor(e,s,i,n,r){this.view=e,this.source=s,this.field=i,this.setHover=n,this.hoverTime=r,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:s}=this,i=e.docView.nearest(s.target);if(!i)return;let n,r=1;if(i instanceof Yi)n=i.posAtStart;else{if(n=e.posAtCoords(s),n==null)return;let l=e.coordsAtPos(n);if(!l||s.y<l.top||s.y>l.bottom||s.x<l.left-e.defaultCharacterWidth||s.x>l.right+e.defaultCharacterWidth)return;let a=e.bidiSpans(e.state.doc.lineAt(n)).find(u=>u.from<=n&&u.to>=n),d=a&&a.dir==bt.RTL?-1:1;r=s.x<l.left?-d:d}let o=this.source(e,n,r);if(o?.then){let l=this.pending={pos:n};o.then(a=>{this.pending==l&&(this.pending=null,a&&!(Array.isArray(a)&&!a.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(a)?a:[a])}))},a=>vs(e.state,a,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(Zc),s=e?e.manager.tooltips.findIndex(i=>i.create==Za.create):-1;return s>-1?e.manager.tooltipViews[s]:null}mousemove(e){var s,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:n,tooltip:r}=this;if(n.length&&r&&!C5(r.dom,e)||this.pending){let{pos:o}=n[0]||this.pending,l=(i=(s=n[0])===null||s===void 0?void 0:s.end)!==null&&i!==void 0?i:o;(o==l?this.view.posAtCoords(this.lastMove)!=o:!A5(this.view,o,l,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:s}=this;if(s.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let s=i=>{e.removeEventListener("mouseleave",s),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",s)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const Al=4;function C5(t,e){let{left:s,right:i,top:n,bottom:r}=t.getBoundingClientRect(),o;if(o=t.querySelector(".cm-tooltip-arrow")){let l=o.getBoundingClientRect();n=Math.min(l.top,n),r=Math.max(l.bottom,r)}return e.clientX>=s-Al&&e.clientX<=i+Al&&e.clientY>=n-Al&&e.clientY<=r+Al}function A5(t,e,s,i,n,r){let o=t.scrollDOM.getBoundingClientRect(),l=t.documentTop+t.documentPadding.top+t.contentHeight;if(o.left>i||o.right<i||o.top>n||Math.min(o.bottom,l)<n)return!1;let a=t.posAtCoords({x:i,y:n},!1);return a>=e&&a<=s}function V5(t,e={}){let s=Ge.define(),i=Gt.define({create(){return[]},update(n,r){if(n.length&&(e.hideOnChange&&(r.docChanged||r.selection)?n=[]:e.hideOn&&(n=n.filter(o=>!e.hideOn(r,o))),r.docChanged)){let o=[];for(let l of n){let a=r.changes.mapPos(l.pos,-1,cs.TrackDel);if(a!=null){let d=Object.assign(Object.create(null),l);d.pos=a,d.end!=null&&(d.end=r.changes.mapPos(d.end)),o.push(d)}}n=o}for(let o of r.effects)o.is(s)&&(n=o.value),o.is(M5)&&(n=[]);return n},provide:n=>va.from(n)});return{active:i,extension:[i,Et.define(n=>new S5(n,t,i,s,e.hoverTime||300)),_5]}}function $v(t,e){let s=t.plugin(Zc);if(!s)return null;let i=s.manager.tooltips.indexOf(e);return i<0?null:s.manager.tooltipViews[i]}const M5=Ge.define(),Rp=Ee.define({combine(t){let e,s;for(let i of t)e=e||i.topContainer,s=s||i.bottomContainer;return{topContainer:e,bottomContainer:s}}});function Mo(t,e){let s=t.plugin(Ev),i=s?s.specs.indexOf(e):-1;return i>-1?s.panels[i]:null}const Ev=Et.fromClass(class{constructor(t){this.input=t.state.facet(Do),this.specs=this.input.filter(s=>s),this.panels=this.specs.map(s=>s(t));let e=t.state.facet(Rp);this.top=new Vl(t,!0,e.topContainer),this.bottom=new Vl(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(s=>s.top)),this.bottom.sync(this.panels.filter(s=>!s.top));for(let s of this.panels)s.dom.classList.add("cm-panel"),s.mount&&s.mount()}update(t){let e=t.state.facet(Rp);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Vl(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Vl(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let s=t.state.facet(Do);if(s!=this.input){let i=s.filter(a=>a),n=[],r=[],o=[],l=[];for(let a of i){let d=this.specs.indexOf(a),u;d<0?(u=a(t.view),l.push(u)):(u=this.panels[d],u.update&&u.update(t)),n.push(u),(u.top?r:o).push(u)}this.specs=i,this.panels=n,this.top.sync(r),this.bottom.sync(o);for(let a of l)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}else for(let i of this.panels)i.update&&i.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>$e.scrollMargins.of(e=>{let s=e.plugin(t);return s&&{top:s.top.scrollMargin(),bottom:s.bottom.scrollMargin()}})});class Vl{constructor(e,s,i){this.view=e,this.top=s,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let s of this.panels)s.destroy&&e.indexOf(s)<0&&s.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let s=this.container||this.view.dom;s.insertBefore(this.dom,this.top?s.firstChild:null)}let e=this.dom.firstChild;for(let s of this.panels)if(s.dom.parentNode==this.dom){for(;e!=s.dom;)e=Bp(e);e=e.nextSibling}else this.dom.insertBefore(s.dom,e);for(;e;)e=Bp(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function Bp(t){let e=t.nextSibling;return t.remove(),e}const Do=Ee.define({enables:Ev});class Li extends Pn{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Li.prototype.elementClass="";Li.prototype.toDOM=void 0;Li.prototype.mapMode=cs.TrackBefore;Li.prototype.startSide=Li.prototype.endSide=-1;Li.prototype.point=!0;const Yl=Ee.define(),D5=Ee.define(),T5={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>tt.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},ao=Ee.define();function $5(t){return[Ov(),ao.of({...T5,...t})]}const Ip=Ee.define({combine:t=>t.some(e=>e)});function Ov(t){return[E5]}const E5=Et.fromClass(class{constructor(t){this.view=t,this.domAfter=null,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(ao).map(e=>new Up(t,e)),this.fixed=!t.state.facet(Ip);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(t){if(this.updateGutters(t)){let e=this.prevViewport,s=t.view.viewport,i=Math.min(e.to,s.to)-Math.max(e.from,s.from);this.syncGutters(i<(s.to-s.from)*.8)}if(t.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(Ip)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let s=tt.iter(this.view.state.facet(Yl),this.view.viewport.from),i=[],n=this.gutters.map(r=>new O5(r,this.view.viewport,-this.view.documentPadding.top));for(let r of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(r.type)){let o=!0;for(let l of r.type)if(l.type==fs.Text&&o){tc(s,i,l.from);for(let a of n)a.line(this.view,l,i);o=!1}else if(l.widget)for(let a of n)a.widget(this.view,l)}else if(r.type==fs.Text){tc(s,i,r.from);for(let o of n)o.line(this.view,r,i)}else if(r.widget)for(let o of n)o.widget(this.view,r);for(let r of n)r.finish();t&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(t){let e=t.startState.facet(ao),s=t.state.facet(ao),i=t.docChanged||t.heightChanged||t.viewportChanged||!tt.eq(t.startState.facet(Yl),t.state.facet(Yl),t.view.viewport.from,t.view.viewport.to);if(e==s)for(let n of this.gutters)n.update(t)&&(i=!0);else{i=!0;let n=[];for(let r of s){let o=e.indexOf(r);o<0?n.push(new Up(this.view,r)):(this.gutters[o].update(t),n.push(this.gutters[o]))}for(let r of this.gutters)r.dom.remove(),n.indexOf(r)<0&&r.destroy();for(let r of n)r.config.side=="after"?this.getDOMAfter().appendChild(r.dom):this.dom.appendChild(r.dom);this.gutters=n}return i}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:t=>$e.scrollMargins.of(e=>{let s=e.plugin(t);if(!s||s.gutters.length==0||!s.fixed)return null;let i=s.dom.offsetWidth*e.scaleX,n=s.domAfter?s.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==bt.LTR?{left:i,right:n}:{right:i,left:n}})});function Np(t){return Array.isArray(t)?t:[t]}function tc(t,e,s){for(;t.value&&t.from<=s;)t.from==s&&e.push(t.value),t.next()}class O5{constructor(e,s,i){this.gutter=e,this.height=i,this.i=0,this.cursor=tt.iter(e.markers,s.from)}addElement(e,s,i){let{gutter:n}=this,r=(s.top-this.height)/e.scaleY,o=s.height/e.scaleY;if(this.i==n.elements.length){let l=new Pv(e,o,r,i);n.elements.push(l),n.dom.appendChild(l.dom)}else n.elements[this.i].update(e,o,r,i);this.height=s.bottom,this.i++}line(e,s,i){let n=[];tc(this.cursor,n,s.from),i.length&&(n=n.concat(i));let r=this.gutter.config.lineMarker(e,s,n);r&&n.unshift(r);let o=this.gutter;n.length==0&&!o.config.renderEmptyElements||this.addElement(e,s,n)}widget(e,s){let i=this.gutter.config.widgetMarker(e,s.widget,s),n=i?[i]:null;for(let r of e.state.facet(D5)){let o=r(e,s.widget,s);o&&(n||(n=[])).push(o)}n&&this.addElement(e,s,n)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let s=e.elements.pop();e.dom.removeChild(s.dom),s.destroy()}}}class Up{constructor(e,s){this.view=e,this.config=s,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in s.domEventHandlers)this.dom.addEventListener(i,n=>{let r=n.target,o;if(r!=this.dom&&this.dom.contains(r)){for(;r.parentNode!=this.dom;)r=r.parentNode;let a=r.getBoundingClientRect();o=(a.top+a.bottom)/2}else o=n.clientY;let l=e.lineBlockAtHeight(o-e.documentTop);s.domEventHandlers[i](e,l,n)&&n.preventDefault()});this.markers=Np(s.markers(e)),s.initialSpacer&&(this.spacer=new Pv(e,0,0,[s.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let s=this.markers;if(this.markers=Np(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let n=this.config.updateSpacer(this.spacer.markers[0],e);n!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[n])}let i=e.view.viewport;return!tt.eq(this.markers,s,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class Pv{constructor(e,s,i,n){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,s,i,n)}update(e,s,i,n){this.height!=s&&(this.height=s,this.dom.style.height=s+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),P5(this.markers,n)||this.setMarkers(e,n)}setMarkers(e,s){let i="cm-gutterElement",n=this.dom.firstChild;for(let r=0,o=0;;){let l=o,a=r<s.length?s[r++]:null,d=!1;if(a){let u=a.elementClass;u&&(i+=" "+u);for(let f=o;f<this.markers.length;f++)if(this.markers[f].compare(a)){l=f,d=!0;break}}else l=this.markers.length;for(;o<l;){let u=this.markers[o++];if(u.toDOM){u.destroy(n);let f=n.nextSibling;n.remove(),n=f}}if(!a)break;a.toDOM&&(d?n=n.nextSibling:this.dom.insertBefore(a.toDOM(e),n)),d&&o++}this.dom.className=i,this.markers=s}destroy(){this.setMarkers(null,[])}}function P5(t,e){if(t.length!=e.length)return!1;for(let s=0;s<t.length;s++)if(!t[s].compare(e[s]))return!1;return!0}const j5=Ee.define(),L5=Ee.define(),Zn=Ee.define({combine(t){return xi(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,s){let i=Object.assign({},e);for(let n in s){let r=i[n],o=s[n];i[n]=r?(l,a,d)=>r(l,a,d)||o(l,a,d):o}return i}})}});class Bu extends Li{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Iu(t,e){return t.state.facet(Zn).formatNumber(e,t.state)}const R5=ao.compute([Zn],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(j5)},lineMarker(e,s,i){return i.some(n=>n.toDOM)?null:new Bu(Iu(e,e.state.doc.lineAt(s.from).number))},widgetMarker:(e,s,i)=>{for(let n of e.state.facet(L5)){let r=n(e,s,i);if(r)return r}return null},lineMarkerChange:e=>e.startState.facet(Zn)!=e.state.facet(Zn),initialSpacer(e){return new Bu(Iu(e,zp(e.state.doc.lines)))},updateSpacer(e,s){let i=Iu(s.view,zp(s.view.state.doc.lines));return i==e.number?e:new Bu(i)},domEventHandlers:t.facet(Zn).domEventHandlers,side:"before"}));function B5(t={}){return[Zn.of(t),Ov(),R5]}function zp(t){let e=9;for(;e<t;)e=e*10+9;return e}const I5=new class extends Li{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},N5=Yl.compute(["selection"],t=>{let e=[],s=-1;for(let i of t.selection.ranges){let n=t.doc.lineAt(i.head).from;n>s&&(s=n,e.push(I5.range(n)))}return tt.of(e)});function U5(){return N5}const z5=1024;let F5=0;class Nu{constructor(e,s){this.from=e,this.to=s}}class Ze{constructor(e={}){this.id=F5++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=bs.match(e)),s=>{let i=e(s);return i===void 0?null:[this,i]}}}Ze.closedBy=new Ze({deserialize:t=>t.split(" ")});Ze.openedBy=new Ze({deserialize:t=>t.split(" ")});Ze.group=new Ze({deserialize:t=>t.split(" ")});Ze.isolate=new Ze({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});Ze.contextHash=new Ze({perNode:!0});Ze.lookAhead=new Ze({perNode:!0});Ze.mounted=new Ze({perNode:!0});class ya{constructor(e,s,i){this.tree=e,this.overlay=s,this.parser=i}static get(e){return e&&e.props&&e.props[Ze.mounted.id]}}const H5=Object.create(null);class bs{constructor(e,s,i,n=0){this.name=e,this.props=s,this.id=i,this.flags=n}static define(e){let s=e.props&&e.props.length?Object.create(null):H5,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),n=new bs(e.name||"",s,e.id,i);if(e.props){for(let r of e.props)if(Array.isArray(r)||(r=r(n)),r){if(r[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");s[r[0].id]=r[1]}}return n}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let s=this.prop(Ze.group);return s?s.indexOf(e)>-1:!1}return this.id==e}static match(e){let s=Object.create(null);for(let i in e)for(let n of i.split(" "))s[n]=e[i];return i=>{for(let n=i.prop(Ze.group),r=-1;r<(n?n.length:0);r++){let o=s[r<0?i.name:n[r]];if(o)return o}}}}bs.none=new bs("",Object.create(null),0,8);class ef{constructor(e){this.types=e;for(let s=0;s<e.length;s++)if(e[s].id!=s)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let s=[];for(let i of this.types){let n=null;for(let r of e){let o=r(i);if(o){n||(n=Object.assign({},i.props));let l=o[1],a=o[0];a.combine&&a.id in n&&(l=a.combine(n[a.id],l)),n[a.id]=l}}s.push(n?new bs(i.name,n,i.id,i.flags):i)}return new ef(s)}}const Ml=new WeakMap,Fp=new WeakMap;var Wt;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(Wt||(Wt={}));class wt{constructor(e,s,i,n,r){if(this.type=e,this.children=s,this.positions=i,this.length=n,this.props=null,r&&r.length){this.props=Object.create(null);for(let[o,l]of r)this.props[typeof o=="number"?o:o.id]=l}}toString(){let e=ya.get(this);if(e&&!e.overlay)return e.tree.toString();let s="";for(let i of this.children){let n=i.toString();n&&(s&&(s+=","),s+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(s.length?"("+s+")":""):s}cursor(e=0){return new ic(this.topNode,e)}cursorAt(e,s=0,i=0){let n=Ml.get(this)||this.topNode,r=new ic(n);return r.moveTo(e,s),Ml.set(this,r._tree),r}get topNode(){return new Us(this,0,0,null)}resolve(e,s=0){let i=To(Ml.get(this)||this.topNode,e,s,!1);return Ml.set(this,i),i}resolveInner(e,s=0){let i=To(Fp.get(this)||this.topNode,e,s,!0);return Fp.set(this,i),i}resolveStack(e,s=0){return K5(this,e,s)}iterate(e){let{enter:s,leave:i,from:n=0,to:r=this.length}=e,o=e.mode||0,l=(o&Wt.IncludeAnonymous)>0;for(let a=this.cursor(o|Wt.IncludeAnonymous);;){let d=!1;if(a.from<=r&&a.to>=n&&(!l&&a.type.isAnonymous||s(a)!==!1)){if(a.firstChild())continue;d=!0}for(;d&&i&&(l||!a.type.isAnonymous)&&i(a),!a.nextSibling();){if(!a.parent())return;d=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let s in this.props)e.push([+s,this.props[s]]);return e}balance(e={}){return this.children.length<=8?this:nf(bs.none,this.children,this.positions,0,this.children.length,0,this.length,(s,i,n)=>new wt(this.type,s,i,n,this.propValues),e.makeTree||((s,i,n)=>new wt(bs.none,s,i,n)))}static build(e){return G5(e)}}wt.empty=new wt(bs.none,[],[],0);class tf{constructor(e,s){this.buffer=e,this.index=s}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new tf(this.buffer,this.index)}}class un{constructor(e,s,i){this.buffer=e,this.length=s,this.set=i}get type(){return bs.none}toString(){let e=[];for(let s=0;s<this.buffer.length;)e.push(this.childString(s)),s=this.buffer[s+3];return e.join(",")}childString(e){let s=this.buffer[e],i=this.buffer[e+3],n=this.set.types[s],r=n.name;if(/\W/.test(r)&&!n.isError&&(r=JSON.stringify(r)),e+=4,i==e)return r;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return r+"("+o.join(",")+")"}findChild(e,s,i,n,r){let{buffer:o}=this,l=-1;for(let a=e;a!=s&&!(jv(r,n,o[a+1],o[a+2])&&(l=a,i>0));a=o[a+3]);return l}slice(e,s,i){let n=this.buffer,r=new Uint16Array(s-e),o=0;for(let l=e,a=0;l<s;){r[a++]=n[l++],r[a++]=n[l++]-i;let d=r[a++]=n[l++]-i;r[a++]=n[l++]-e,o=Math.max(o,d)}return new un(r,o,this.set)}}function jv(t,e,s,i){switch(t){case-2:return s<e;case-1:return i>=e&&s<e;case 0:return s<e&&i>e;case 1:return s<=e&&i>e;case 2:return i>e;case 4:return!0}}function To(t,e,s,i){for(var n;t.from==t.to||(s<1?t.from>=e:t.from>e)||(s>-1?t.to<=e:t.to<e);){let o=!i&&t instanceof Us&&t.index<0?null:t.parent;if(!o)return t;t=o}let r=i?0:Wt.IgnoreOverlays;if(i)for(let o=t,l=o.parent;l;o=l,l=o.parent)o instanceof Us&&o.index<0&&((n=l.enter(e,s,r))===null||n===void 0?void 0:n.from)!=o.from&&(t=l);for(;;){let o=t.enter(e,s,r);if(!o)return t;t=o}}class Lv{cursor(e=0){return new ic(this,e)}getChild(e,s=null,i=null){let n=Hp(this,e,s,i);return n.length?n[0]:null}getChildren(e,s=null,i=null){return Hp(this,e,s,i)}resolve(e,s=0){return To(this,e,s,!1)}resolveInner(e,s=0){return To(this,e,s,!0)}matchContext(e){return sc(this.parent,e)}enterUnfinishedNodesBefore(e){let s=this.childBefore(e),i=this;for(;s;){let n=s.lastChild;if(!n||n.to!=s.to)break;n.type.isError&&n.from==n.to?(i=s,s=n.prevSibling):s=n}return i}get node(){return this}get next(){return this.parent}}class Us extends Lv{constructor(e,s,i,n){super(),this._tree=e,this.from=s,this.index=i,this._parent=n}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,s,i,n,r=0){for(let o=this;;){for(let{children:l,positions:a}=o._tree,d=s>0?l.length:-1;e!=d;e+=s){let u=l[e],f=a[e]+o.from;if(jv(n,i,f,f+u.length)){if(u instanceof un){if(r&Wt.ExcludeBuffers)continue;let h=u.findChild(0,u.buffer.length,s,i-f,n);if(h>-1)return new Zi(new W5(o,u,e,f),null,h)}else if(r&Wt.IncludeAnonymous||!u.type.isAnonymous||sf(u)){let h;if(!(r&Wt.IgnoreMounts)&&(h=ya.get(u))&&!h.overlay)return new Us(h.tree,f,e,o);let m=new Us(u,f,e,o);return r&Wt.IncludeAnonymous||!m.type.isAnonymous?m:m.nextChild(s<0?u.children.length-1:0,s,i,n)}}}if(r&Wt.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+s:e=s<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,s,i=0){let n;if(!(i&Wt.IgnoreOverlays)&&(n=ya.get(this._tree))&&n.overlay){let r=e-this.from;for(let{from:o,to:l}of n.overlay)if((s>0?o<=r:o<r)&&(s<0?l>=r:l>r))return new Us(n.tree,n.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,s,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function Hp(t,e,s,i){let n=t.cursor(),r=[];if(!n.firstChild())return r;if(s!=null){for(let o=!1;!o;)if(o=n.type.is(s),!n.nextSibling())return r}for(;;){if(i!=null&&n.type.is(i))return r;if(n.type.is(e)&&r.push(n.node),!n.nextSibling())return i==null?r:[]}}function sc(t,e,s=e.length-1){for(let i=t;s>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[s]&&e[s]!=i.name)return!1;s--}}return!0}class W5{constructor(e,s,i,n){this.parent=e,this.buffer=s,this.index=i,this.start=n}}class Zi extends Lv{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,s,i){super(),this.context=e,this._parent=s,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,s,i){let{buffer:n}=this.context,r=n.findChild(this.index+4,n.buffer[this.index+3],e,s-this.context.start,i);return r<0?null:new Zi(this.context,this,r)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,s,i=0){if(i&Wt.ExcludeBuffers)return null;let{buffer:n}=this.context,r=n.findChild(this.index+4,n.buffer[this.index+3],s>0?1:-1,e-this.context.start,s);return r<0?null:new Zi(this.context,this,r)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,s=e.buffer[this.index+3];return s<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Zi(this.context,this._parent,s):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,s=this._parent?this._parent.index+4:0;return this.index==s?this.externalSibling(-1):new Zi(this.context,this._parent,e.findChild(s,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],s=[],{buffer:i}=this.context,n=this.index+4,r=i.buffer[this.index+3];if(r>n){let o=i.buffer[this.index+1];e.push(i.slice(n,r,o)),s.push(0)}return new wt(this.type,e,s,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function Rv(t){if(!t.length)return null;let e=0,s=t[0];for(let r=1;r<t.length;r++){let o=t[r];(o.from>s.from||o.to<s.to)&&(s=o,e=r)}let i=s instanceof Us&&s.index<0?null:s.parent,n=t.slice();return i?n[e]=i:n.splice(e,1),new q5(n,s)}class q5{constructor(e,s){this.heads=e,this.node=s}get next(){return Rv(this.heads)}}function K5(t,e,s){let i=t.resolveInner(e,s),n=null;for(let r=i instanceof Us?i:i.context.parent;r;r=r.parent)if(r.index<0){let o=r.parent;(n||(n=[i])).push(o.resolve(e,s)),r=o}else{let o=ya.get(r.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let l=new Us(o.tree,o.overlay[0].from+r.from,-1,r);(n||(n=[i])).push(To(l,e,s,!1))}}return n?Rv(n):i}class ic{get name(){return this.type.name}constructor(e,s=0){if(this.mode=s,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Us)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,s){this.index=e;let{start:i,buffer:n}=this.buffer;return this.type=s||n.set.types[n.buffer[e]],this.from=i+n.buffer[e+1],this.to=i+n.buffer[e+2],!0}yield(e){return e?e instanceof Us?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,s,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,s,i,this.mode));let{buffer:n}=this.buffer,r=n.findChild(this.index+4,n.buffer[this.index+3],e,s-this.buffer.start,i);return r<0?!1:(this.stack.push(this.index),this.yieldBuf(r))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,s,i=this.mode){return this.buffer?i&Wt.ExcludeBuffers?!1:this.enterChild(1,e,s):this.yield(this._tree.enter(e,s,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Wt.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Wt.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:s}=this.buffer,i=this.stack.length-1;if(e<0){let n=i<0?0:this.stack[i]+4;if(this.index!=n)return this.yieldBuf(s.findChild(n,this.index,-1,0,4))}else{let n=s.buffer[this.index+3];if(n<(i<0?s.buffer.length:s.buffer[this.stack[i]+3]))return this.yieldBuf(n)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let s,i,{buffer:n}=this;if(n){if(e>0){if(this.index<n.buffer.buffer.length)return!1}else for(let r=0;r<this.index;r++)if(n.buffer.buffer[r+3]<this.index)return!1;({index:s,parent:i}=n)}else({index:s,_parent:i}=this._tree);for(;i;{index:s,_parent:i}=i)if(s>-1)for(let r=s+e,o=e<0?-1:i._tree.children.length;r!=o;r+=e){let l=i._tree.children[r];if(this.mode&Wt.IncludeAnonymous||l instanceof un||!l.type.isAnonymous||sf(l))return!1}return!0}move(e,s){if(s&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,s=0){for(;(this.from==this.to||(s<1?this.from>=e:this.from>e)||(s>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,s););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,s=null,i=0;if(e&&e.context==this.buffer)e:for(let n=this.index,r=this.stack.length;r>=0;){for(let o=e;o;o=o._parent)if(o.index==n){if(n==this.index)return o;s=o,i=r+1;break e}n=this.stack[--r]}for(let n=i;n<this.stack.length;n++)s=new Zi(this.buffer,s,this.stack[n]);return this.bufferNode=new Zi(this.buffer,s,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,s){for(let i=0;;){let n=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(n=!0)}for(;;){if(n&&s&&s(this),n=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,n=!0}}}matchContext(e){if(!this.buffer)return sc(this.node.parent,e);let{buffer:s}=this.buffer,{types:i}=s.set;for(let n=e.length-1,r=this.stack.length-1;n>=0;r--){if(r<0)return sc(this._tree,e,n);let o=i[s.buffer[this.stack[r]]];if(!o.isAnonymous){if(e[n]&&e[n]!=o.name)return!1;n--}}return!0}}function sf(t){return t.children.some(e=>e instanceof un||!e.type.isAnonymous||sf(e))}function G5(t){var e;let{buffer:s,nodeSet:i,maxBufferLength:n=z5,reused:r=[],minRepeatType:o=i.types.length}=t,l=Array.isArray(s)?new tf(s,s.length):s,a=i.types,d=0,u=0;function f(j,T,A,J,ie,ge){let{id:le,start:W,end:he,size:te}=l,we=u,G=d;if(te<0)if(l.next(),te==-1){let Pe=r[le];A.push(Pe),J.push(W-j);return}else if(te==-3){d=le;return}else if(te==-4){u=le;return}else throw new RangeError(`Unrecognized record size: ${te}`);let X=a[le],se,Re,$=W-j;if(he-W<=n&&(Re=C(l.pos-T,ie))){let Pe=new Uint16Array(Re.size-Re.skip),Le=l.pos-Re.size,Z=Pe.length;for(;l.pos>Le;)Z=M(Re.start,Pe,Z);se=new un(Pe,he-Re.start,i),$=Re.start-j}else{let Pe=l.pos-te;l.next();let Le=[],Z=[],S=le>=o?le:-1,v=0,H=he;for(;l.pos>Pe;)S>=0&&l.id==S&&l.size>=0?(l.end<=H-n&&(_(Le,Z,W,v,l.end,H,S,we,G),v=Le.length,H=l.end),l.next()):ge>2500?h(W,Pe,Le,Z):f(W,Pe,Le,Z,S,ge+1);if(S>=0&&v>0&&v<Le.length&&_(Le,Z,W,v,W,H,S,we,G),Le.reverse(),Z.reverse(),S>-1&&v>0){let N=m(X,G);se=nf(X,Le,Z,0,Le.length,0,he-W,N,N)}else se=p(X,Le,Z,he-W,we-he,G)}A.push(se),J.push($)}function h(j,T,A,J){let ie=[],ge=0,le=-1;for(;l.pos>T;){let{id:W,start:he,end:te,size:we}=l;if(we>4)l.next();else{if(le>-1&&he<le)break;le<0&&(le=te-n),ie.push(W,he,te),ge++,l.next()}}if(ge){let W=new Uint16Array(ge*4),he=ie[ie.length-2];for(let te=ie.length-3,we=0;te>=0;te-=3)W[we++]=ie[te],W[we++]=ie[te+1]-he,W[we++]=ie[te+2]-he,W[we++]=we;A.push(new un(W,ie[2]-he,i)),J.push(he-j)}}function m(j,T){return(A,J,ie)=>{let ge=0,le=A.length-1,W,he;if(le>=0&&(W=A[le])instanceof wt){if(!le&&W.type==j&&W.length==ie)return W;(he=W.prop(Ze.lookAhead))&&(ge=J[le]+W.length+he)}return p(j,A,J,ie,ge,T)}}function _(j,T,A,J,ie,ge,le,W,he){let te=[],we=[];for(;j.length>J;)te.push(j.pop()),we.push(T.pop()+A-ie);j.push(p(i.types[le],te,we,ge-ie,W-ge,he)),T.push(ie-A)}function p(j,T,A,J,ie,ge,le){if(ge){let W=[Ze.contextHash,ge];le=le?[W].concat(le):[W]}if(ie>25){let W=[Ze.lookAhead,ie];le=le?[W].concat(le):[W]}return new wt(j,T,A,J,le)}function C(j,T){let A=l.fork(),J=0,ie=0,ge=0,le=A.end-n,W={size:0,start:0,skip:0};e:for(let he=A.pos-j;A.pos>he;){let te=A.size;if(A.id==T&&te>=0){W.size=J,W.start=ie,W.skip=ge,ge+=4,J+=4,A.next();continue}let we=A.pos-te;if(te<0||we<he||A.start<le)break;let G=A.id>=o?4:0,X=A.start;for(A.next();A.pos>we;){if(A.size<0)if(A.size==-3)G+=4;else break e;else A.id>=o&&(G+=4);A.next()}ie=X,J+=te,ge+=G}return(T<0||J==j)&&(W.size=J,W.start=ie,W.skip=ge),W.size>4?W:void 0}function M(j,T,A){let{id:J,start:ie,end:ge,size:le}=l;if(l.next(),le>=0&&J<o){let W=A;if(le>4){let he=l.pos-(le-4);for(;l.pos>he;)A=M(j,T,A)}T[--A]=W,T[--A]=ge-j,T[--A]=ie-j,T[--A]=J}else le==-3?d=J:le==-4&&(u=J);return A}let U=[],B=[];for(;l.pos>0;)f(t.start||0,t.bufferStart||0,U,B,-1,0);let F=(e=t.length)!==null&&e!==void 0?e:U.length?B[0]+U[0].length:0;return new wt(a[t.topID],U.reverse(),B.reverse(),F)}const Wp=new WeakMap;function Xl(t,e){if(!t.isAnonymous||e instanceof un||e.type!=t)return 1;let s=Wp.get(e);if(s==null){s=1;for(let i of e.children){if(i.type!=t||!(i instanceof wt)){s=1;break}s+=Xl(t,i)}Wp.set(e,s)}return s}function nf(t,e,s,i,n,r,o,l,a){let d=0;for(let _=i;_<n;_++)d+=Xl(t,e[_]);let u=Math.ceil(d*1.5/8),f=[],h=[];function m(_,p,C,M,U){for(let B=C;B<M;){let F=B,j=p[B],T=Xl(t,_[B]);for(B++;B<M;B++){let A=Xl(t,_[B]);if(T+A>=u)break;T+=A}if(B==F+1){if(T>u){let A=_[F];m(A.children,A.positions,0,A.children.length,p[F]+U);continue}f.push(_[F])}else{let A=p[B-1]+_[B-1].length-j;f.push(nf(t,_,p,F,B,j,A,null,a))}h.push(j+U-r)}}return m(e,s,i,n,0),(l||a)(f,h,o)}class $n{constructor(e,s,i,n,r=!1,o=!1){this.from=e,this.to=s,this.tree=i,this.offset=n,this.open=(r?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,s=[],i=!1){let n=[new $n(0,e.length,e,0,!1,i)];for(let r of s)r.to>e.length&&n.push(r);return n}static applyChanges(e,s,i=128){if(!s.length)return e;let n=[],r=1,o=e.length?e[0]:null;for(let l=0,a=0,d=0;;l++){let u=l<s.length?s[l]:null,f=u?u.fromA:1e9;if(f-a>=i)for(;o&&o.from<f;){let h=o;if(a>=h.from||f<=h.to||d){let m=Math.max(h.from,a)-d,_=Math.min(h.to,f)-d;h=m>=_?null:new $n(m,_,h.tree,h.offset+d,l>0,!!u)}if(h&&n.push(h),o.to>f)break;o=r<e.length?e[r++]:null}if(!u)break;a=u.toA,d=u.toA-u.toB}return n}}class Bv{startParse(e,s,i){return typeof e=="string"&&(e=new J5(e)),i=i?i.length?i.map(n=>new Nu(n.from,n.to)):[new Nu(0,0)]:[new Nu(0,e.length)],this.createParse(e,s||[],i)}parse(e,s,i){let n=this.startParse(e,s,i);for(;;){let r=n.advance();if(r)return r}}}class J5{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,s){return this.string.slice(e,s)}}new Ze({perNode:!0});let Y5=0;class Ps{constructor(e,s,i,n){this.name=e,this.set=s,this.base=i,this.modified=n,this.id=Y5++}toString(){let{name:e}=this;for(let s of this.modified)s.name&&(e=`${s.name}(${e})`);return e}static define(e,s){let i=typeof e=="string"?e:"?";if(e instanceof Ps&&(s=e),s?.base)throw new Error("Can not derive from a modified tag");let n=new Ps(i,[],null,[]);if(n.set.push(n),s)for(let r of s.set)n.set.push(r);return n}static defineModifier(e){let s=new ba(e);return i=>i.modified.indexOf(s)>-1?i:ba.get(i.base||i,i.modified.concat(s).sort((n,r)=>n.id-r.id))}}let X5=0;class ba{constructor(e){this.name=e,this.instances=[],this.id=X5++}static get(e,s){if(!s.length)return e;let i=s[0].instances.find(l=>l.base==e&&Z5(s,l.modified));if(i)return i;let n=[],r=new Ps(e.name,n,e,s);for(let l of s)l.instances.push(r);let o=Q5(s);for(let l of e.set)if(!l.modified.length)for(let a of o)n.push(ba.get(l,a));return r}}function Z5(t,e){return t.length==e.length&&t.every((s,i)=>s==e[i])}function Q5(t){let e=[[]];for(let s=0;s<t.length;s++)for(let i=0,n=e.length;i<n;i++)e.push(e[i].concat(t[s]));return e.sort((s,i)=>i.length-s.length)}function e3(t){let e=Object.create(null);for(let s in t){let i=t[s];Array.isArray(i)||(i=[i]);for(let n of s.split(" "))if(n){let r=[],o=2,l=n;for(let f=0;;){if(l=="..."&&f>0&&f+3==n.length){o=1;break}let h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!h)throw new RangeError("Invalid path: "+n);if(r.push(h[0]=="*"?"":h[0][0]=='"'?JSON.parse(h[0]):h[0]),f+=h[0].length,f==n.length)break;let m=n[f++];if(f==n.length&&m=="!"){o=0;break}if(m!="/")throw new RangeError("Invalid path: "+n);l=n.slice(f)}let a=r.length-1,d=r[a];if(!d)throw new RangeError("Invalid path: "+n);let u=new $o(i,o,a>0?r.slice(0,a):null);e[d]=u.sort(e[d])}}return Iv.add(e)}const Iv=new Ze({combine(t,e){let s,i,n;for(;t||e;){if(!t||e&&t.depth>=e.depth?(n=e,e=e.next):(n=t,t=t.next),s&&s.mode==n.mode&&!n.context&&!s.context)continue;let r=new $o(n.tags,n.mode,n.context);s?s.next=r:i=r,s=r}return i}});class $o{constructor(e,s,i,n){this.tags=e,this.mode=s,this.context=i,this.next=n}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}$o.empty=new $o([],2,null);function Nv(t,e){let s=Object.create(null);for(let r of t)if(!Array.isArray(r.tag))s[r.tag.id]=r.class;else for(let o of r.tag)s[o.id]=r.class;let{scope:i,all:n=null}=e||{};return{style:r=>{let o=n;for(let l of r)for(let a of l.set){let d=s[a.id];if(d){o=o?o+" "+d:d;break}}return o},scope:i}}function t3(t,e){let s=null;for(let i of t){let n=i.style(e);n&&(s=s?s+" "+n:n)}return s}function s3(t,e,s,i=0,n=t.length){let r=new i3(i,Array.isArray(e)?e:[e],s);r.highlightRange(t.cursor(),i,n,"",r.highlighters),r.flush(n)}class i3{constructor(e,s,i){this.at=e,this.highlighters=s,this.span=i,this.class=""}startSpan(e,s){s!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=s)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,s,i,n,r){let{type:o,from:l,to:a}=e;if(l>=i||a<=s)return;o.isTop&&(r=this.highlighters.filter(m=>!m.scope||m.scope(o)));let d=n,u=n3(e)||$o.empty,f=t3(r,u.tags);if(f&&(d&&(d+=" "),d+=f,u.mode==1&&(n+=(n?" ":"")+f)),this.startSpan(Math.max(s,l),d),u.opaque)return;let h=e.tree&&e.tree.prop(Ze.mounted);if(h&&h.overlay){let m=e.node.enter(h.overlay[0].from+l,1),_=this.highlighters.filter(C=>!C.scope||C.scope(h.tree.type)),p=e.firstChild();for(let C=0,M=l;;C++){let U=C<h.overlay.length?h.overlay[C]:null,B=U?U.from+l:a,F=Math.max(s,M),j=Math.min(i,B);if(F<j&&p)for(;e.from<j&&(this.highlightRange(e,F,j,n,r),this.startSpan(Math.min(j,e.to),d),!(e.to>=B||!e.nextSibling())););if(!U||B>i)break;M=U.to+l,M>s&&(this.highlightRange(m.cursor(),Math.max(s,U.from+l),Math.min(i,M),"",_),this.startSpan(Math.min(i,M),d))}p&&e.parent()}else if(e.firstChild()){h&&(n="");do if(!(e.to<=s)){if(e.from>=i)break;this.highlightRange(e,s,i,n,r),this.startSpan(Math.min(i,e.to),d)}while(e.nextSibling());e.parent()}}}function n3(t){let e=t.type.prop(Iv);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const Ae=Ps.define,Dl=Ae(),Wi=Ae(),qp=Ae(Wi),Kp=Ae(Wi),qi=Ae(),Tl=Ae(qi),Uu=Ae(qi),ai=Ae(),yn=Ae(ai),oi=Ae(),li=Ae(),nc=Ae(),Ur=Ae(nc),$l=Ae(),Me={comment:Dl,lineComment:Ae(Dl),blockComment:Ae(Dl),docComment:Ae(Dl),name:Wi,variableName:Ae(Wi),typeName:qp,tagName:Ae(qp),propertyName:Kp,attributeName:Ae(Kp),className:Ae(Wi),labelName:Ae(Wi),namespace:Ae(Wi),macroName:Ae(Wi),literal:qi,string:Tl,docString:Ae(Tl),character:Ae(Tl),attributeValue:Ae(Tl),number:Uu,integer:Ae(Uu),float:Ae(Uu),bool:Ae(qi),regexp:Ae(qi),escape:Ae(qi),color:Ae(qi),url:Ae(qi),keyword:oi,self:Ae(oi),null:Ae(oi),atom:Ae(oi),unit:Ae(oi),modifier:Ae(oi),operatorKeyword:Ae(oi),controlKeyword:Ae(oi),definitionKeyword:Ae(oi),moduleKeyword:Ae(oi),operator:li,derefOperator:Ae(li),arithmeticOperator:Ae(li),logicOperator:Ae(li),bitwiseOperator:Ae(li),compareOperator:Ae(li),updateOperator:Ae(li),definitionOperator:Ae(li),typeOperator:Ae(li),controlOperator:Ae(li),punctuation:nc,separator:Ae(nc),bracket:Ur,angleBracket:Ae(Ur),squareBracket:Ae(Ur),paren:Ae(Ur),brace:Ae(Ur),content:ai,heading:yn,heading1:Ae(yn),heading2:Ae(yn),heading3:Ae(yn),heading4:Ae(yn),heading5:Ae(yn),heading6:Ae(yn),contentSeparator:Ae(ai),list:Ae(ai),quote:Ae(ai),emphasis:Ae(ai),strong:Ae(ai),link:Ae(ai),monospace:Ae(ai),strikethrough:Ae(ai),inserted:Ae(),deleted:Ae(),changed:Ae(),invalid:Ae(),meta:$l,documentMeta:Ae($l),annotation:Ae($l),processingInstruction:Ae($l),definition:Ps.defineModifier("definition"),constant:Ps.defineModifier("constant"),function:Ps.defineModifier("function"),standard:Ps.defineModifier("standard"),local:Ps.defineModifier("local"),special:Ps.defineModifier("special")};for(let t in Me){let e=Me[t];e instanceof Ps&&(e.name=t)}Nv([{tag:Me.link,class:"tok-link"},{tag:Me.heading,class:"tok-heading"},{tag:Me.emphasis,class:"tok-emphasis"},{tag:Me.strong,class:"tok-strong"},{tag:Me.keyword,class:"tok-keyword"},{tag:Me.atom,class:"tok-atom"},{tag:Me.bool,class:"tok-bool"},{tag:Me.url,class:"tok-url"},{tag:Me.labelName,class:"tok-labelName"},{tag:Me.inserted,class:"tok-inserted"},{tag:Me.deleted,class:"tok-deleted"},{tag:Me.literal,class:"tok-literal"},{tag:Me.string,class:"tok-string"},{tag:Me.number,class:"tok-number"},{tag:[Me.regexp,Me.escape,Me.special(Me.string)],class:"tok-string2"},{tag:Me.variableName,class:"tok-variableName"},{tag:Me.local(Me.variableName),class:"tok-variableName tok-local"},{tag:Me.definition(Me.variableName),class:"tok-variableName tok-definition"},{tag:Me.special(Me.variableName),class:"tok-variableName2"},{tag:Me.definition(Me.propertyName),class:"tok-propertyName tok-definition"},{tag:Me.typeName,class:"tok-typeName"},{tag:Me.namespace,class:"tok-namespace"},{tag:Me.className,class:"tok-className"},{tag:Me.macroName,class:"tok-macroName"},{tag:Me.propertyName,class:"tok-propertyName"},{tag:Me.operator,class:"tok-operator"},{tag:Me.comment,class:"tok-comment"},{tag:Me.meta,class:"tok-meta"},{tag:Me.invalid,class:"tok-invalid"},{tag:Me.punctuation,class:"tok-punctuation"}]);var zu;const Qn=new Ze;function r3(t){return Ee.define({combine:t?e=>e.concat(t):void 0})}const o3=new Ze;class Ks{constructor(e,s,i=[],n=""){this.data=e,this.name=n,et.prototype.hasOwnProperty("tree")||Object.defineProperty(et.prototype,"tree",{get(){return is(this)}}),this.parser=s,this.extension=[dn.of(this),et.languageData.of((r,o,l)=>{let a=Gp(r,o,l),d=a.type.prop(Qn);if(!d)return[];let u=r.facet(d),f=a.type.prop(o3);if(f){let h=a.resolve(o-a.from,l);for(let m of f)if(m.test(h,r)){let _=r.facet(m.facet);return m.type=="replace"?_:_.concat(u)}}return u})].concat(i)}isActiveAt(e,s,i=-1){return Gp(e,s,i).type.prop(Qn)==this.data}findRegions(e){let s=e.facet(dn);if(s?.data==this.data)return[{from:0,to:e.doc.length}];if(!s||!s.allowsNesting)return[];let i=[],n=(r,o)=>{if(r.prop(Qn)==this.data){i.push({from:o,to:o+r.length});return}let l=r.prop(Ze.mounted);if(l){if(l.tree.prop(Qn)==this.data){if(l.overlay)for(let a of l.overlay)i.push({from:a.from+o,to:a.to+o});else i.push({from:o,to:o+r.length});return}else if(l.overlay){let a=i.length;if(n(l.tree,l.overlay[0].from+o),i.length>a)return}}for(let a=0;a<r.children.length;a++){let d=r.children[a];d instanceof wt&&n(d,r.positions[a]+o)}};return n(is(e),0),i}get allowsNesting(){return!0}}Ks.setState=Ge.define();function Gp(t,e,s){let i=t.facet(dn),n=is(t).topNode;if(!i||i.allowsNesting)for(let r=n;r;r=r.enter(e,s,Wt.ExcludeBuffers))r.type.isTop&&(n=r);return n}function is(t){let e=t.field(Ks.state,!1);return e?e.tree:wt.empty}class l3{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,s){let i=this.cursorPos-this.string.length;return e<i||s>=this.cursorPos?this.doc.sliceString(e,s):this.string.slice(e-i,s-i)}}let zr=null;class kr{constructor(e,s,i=[],n,r,o,l,a){this.parser=e,this.state=s,this.fragments=i,this.tree=n,this.treeLen=r,this.viewport=o,this.skipped=l,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,s,i){return new kr(e,s,[],wt.empty,0,i,[],null)}startParse(){return this.parser.startParse(new l3(this.state.doc),this.fragments)}work(e,s){return s!=null&&s>=this.state.doc.length&&(s=void 0),this.tree!=wt.empty&&this.isDone(s??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let n=Date.now()+e;e=()=>Date.now()>n}for(this.parse||(this.parse=this.startParse()),s!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>s)&&s<this.state.doc.length&&this.parse.stopAt(s);;){let n=this.parse.advance();if(n)if(this.fragments=this.withoutTempSkipped($n.addTree(n,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=n,this.parse=null,this.treeLen<(s??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,s;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(s=this.parse.advance()););}),this.treeLen=e,this.tree=s,this.fragments=this.withoutTempSkipped($n.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let s=zr;zr=this;try{return e()}finally{zr=s}}withoutTempSkipped(e){for(let s;s=this.tempSkipped.pop();)e=Jp(e,s.from,s.to);return e}changes(e,s){let{fragments:i,tree:n,treeLen:r,viewport:o,skipped:l}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((d,u,f,h)=>a.push({fromA:d,toA:u,fromB:f,toB:h})),i=$n.applyChanges(i,a),n=wt.empty,r=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){l=[];for(let d of this.skipped){let u=e.mapPos(d.from,1),f=e.mapPos(d.to,-1);u<f&&l.push({from:u,to:f})}}}return new kr(this.parser,s,i,n,r,o,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let s=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:n,to:r}=this.skipped[i];n<e.to&&r>e.from&&(this.fragments=Jp(this.fragments,n,r),this.skipped.splice(i--,1))}return this.skipped.length>=s?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,s){this.skipped.push({from:e,to:s})}static getSkippingParser(e){return new class extends Bv{createParse(s,i,n){let r=n[0].from,o=n[n.length-1].to;return{parsedPos:r,advance(){let a=zr;if(a){for(let d of n)a.tempSkipped.push(d);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=o,new wt(bs.none,[],[],o-r)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let s=this.fragments;return this.treeLen>=e&&s.length&&s[0].from==0&&s[0].to>=e}static get(){return zr}}function Jp(t,e,s){return $n.applyChanges(t,[{fromA:e,toA:s,fromB:e,toB:s}])}class wr{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let s=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),s.viewport.to);return s.work(20,i)||s.takeTree(),new wr(s)}static init(e){let s=Math.min(3e3,e.doc.length),i=kr.create(e.facet(dn).parser,e,{from:0,to:s});return i.work(20,s)||i.takeTree(),new wr(i)}}Ks.state=Gt.define({create:wr.init,update(t,e){for(let s of e.effects)if(s.is(Ks.setState))return s.value;return e.startState.facet(dn)!=e.state.facet(dn)?wr.init(e.state):t.apply(e)}});let Uv=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(Uv=t=>{let e=-1,s=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(s):cancelIdleCallback(e)});const Fu=typeof navigator<"u"&&(!((zu=navigator.scheduling)===null||zu===void 0)&&zu.isInputPending)?()=>navigator.scheduling.isInputPending():null,a3=Et.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let s=this.view.state.field(Ks.state).context;(s.updateViewport(e.view.viewport)||this.view.viewport.to>s.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(s)}scheduleWork(){if(this.working)return;let{state:e}=this.view,s=e.field(Ks.state);(s.tree!=s.context.tree||!s.context.isDone(e.doc.length))&&(this.working=Uv(this.work))}work(e){this.working=null;let s=Date.now();if(this.chunkEnd<s&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=s+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:n}}=this.view,r=i.field(Ks.state);if(r.tree==r.context.tree&&r.context.isDone(n+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!Fu?Math.max(25,e.timeRemaining()-5):1e9),l=r.context.treeLen<n&&i.doc.length>n+1e3,a=r.context.work(()=>Fu&&Fu()||Date.now()>o,n+(l?0:1e5));this.chunkBudget-=Date.now()-s,(a||this.chunkBudget<=0)&&(r.context.takeTree(),this.view.dispatch({effects:Ks.setState.of(new wr(r.context))})),this.chunkBudget>0&&!(a&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(r.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(s=>vs(this.view.state,s)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),dn=Ee.define({combine(t){return t.length?t[0]:null},enables:t=>[Ks.state,a3,$e.contentAttributes.compute([t],e=>{let s=e.facet(t);return s&&s.name?{"data-language":s.name}:{}})]}),u3=Ee.define(),rf=Ee.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(s=>s!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function Bn(t){let e=t.facet(rf);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function Eo(t,e){let s="",i=t.tabSize,n=t.facet(rf)[0];if(n=="	"){for(;e>=i;)s+="	",e-=i;n=" "}for(let r=0;r<e;r++)s+=n;return s}function of(t,e){t instanceof et&&(t=new Qa(t));for(let i of t.state.facet(u3)){let n=i(t,e);if(n!==void 0)return n}let s=is(t.state);return s.length>=e?d3(t,s,e):null}class Qa{constructor(e,s={}){this.state=e,this.options=s,this.unit=Bn(e)}lineAt(e,s=1){let i=this.state.doc.lineAt(e),{simulateBreak:n,simulateDoubleBreak:r}=this.options;return n!=null&&n>=i.from&&n<=i.to?r&&n==e?{text:"",from:e}:(s<0?n<e:n<=e)?{text:i.text.slice(n-i.from),from:n}:{text:i.text.slice(0,n-i.from),from:i.from}:i}textAfterPos(e,s=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:n}=this.lineAt(e,s);return i.slice(e-n,Math.min(i.length,e+100-n))}column(e,s=1){let{text:i,from:n}=this.lineAt(e,s),r=this.countColumn(i,e-n),o=this.options.overrideIndentation?this.options.overrideIndentation(n):-1;return o>-1&&(r+=o-this.countColumn(i,i.search(/\S|$/))),r}countColumn(e,s=e.length){return Dr(e,this.state.tabSize,s)}lineIndent(e,s=1){let{text:i,from:n}=this.lineAt(e,s),r=this.options.overrideIndentation;if(r){let o=r(n);if(o>-1)return o}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const zv=new Ze;function d3(t,e,s){let i=e.resolveStack(s),n=e.resolveInner(s,-1).resolve(s,0).enterUnfinishedNodesBefore(s);if(n!=i.node){let r=[];for(let o=n;o&&!(o.from<i.node.from||o.to>i.node.to||o.from==i.node.from&&o.type==i.node.type);o=o.parent)r.push(o);for(let o=r.length-1;o>=0;o--)i={node:r[o],next:i}}return Fv(i,t,s)}function Fv(t,e,s){for(let i=t;i;i=i.next){let n=f3(i.node);if(n)return n(lf.create(e,s,i))}return 0}function c3(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function f3(t){let e=t.type.prop(zv);if(e)return e;let s=t.firstChild,i;if(s&&(i=s.type.prop(Ze.closedBy))){let n=t.lastChild,r=n&&i.indexOf(n.name)>-1;return o=>g3(o,!0,1,void 0,r&&!c3(o)?n.from:void 0)}return t.parent==null?h3:null}function h3(){return 0}class lf extends Qa{constructor(e,s,i){super(e.state,e.options),this.base=e,this.pos=s,this.context=i}get node(){return this.context.node}static create(e,s,i){return new lf(e,s,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let s=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(s.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(p3(i,e))break;s=this.state.doc.lineAt(i.from)}return this.lineIndent(s.from)}continue(){return Fv(this.context.next,this.base,this.pos)}}function p3(t,e){for(let s=e;s;s=s.parent)if(t==s)return!0;return!1}function m3(t){let e=t.node,s=e.childAfter(e.from),i=e.lastChild;if(!s)return null;let n=t.options.simulateBreak,r=t.state.doc.lineAt(s.from),o=n==null||n<=r.from?r.to:Math.min(r.to,n);for(let l=s.to;;){let a=e.childAfter(l);if(!a||a==i)return null;if(!a.type.isSkipped){if(a.from>=o)return null;let d=/^ */.exec(r.text.slice(s.to-r.from))[0].length;return{from:s.from,to:s.to+d}}l=a.to}}function g3(t,e,s,i,n){let r=t.textAfter,o=r.match(/^\s*/)[0].length,l=i&&r.slice(o,o+i.length)==i||n==t.pos+o,a=m3(t);return a?l?t.column(a.from):t.column(a.to):t.baseIndent+(l?0:t.unit*s)}const v3=200;function y3(){return et.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let s=t.newDoc,{head:i}=t.newSelection.main,n=s.lineAt(i);if(i>n.from+v3)return t;let r=s.sliceString(n.from,i);if(!e.some(d=>d.test(r)))return t;let{state:o}=t,l=-1,a=[];for(let{head:d}of o.selection.ranges){let u=o.doc.lineAt(d);if(u.from==l)continue;l=u.from;let f=of(o,u.from);if(f==null)continue;let h=/^\s*/.exec(u.text)[0],m=Eo(o,f);h!=m&&a.push({from:u.from,to:u.from+h.length,insert:m})}return a.length?[t,{changes:a,sequential:!0}]:t})}const b3=Ee.define(),x3=new Ze;function k3(t,e,s){let i=is(t);if(i.length<s)return null;let n=i.resolveStack(s,1),r=null;for(let o=n;o;o=o.next){let l=o.node;if(l.to<=s||l.from>s)continue;if(r&&l.from<e)break;let a=l.type.prop(x3);if(a&&(l.to<i.length-50||i.length==t.doc.length||!w3(l))){let d=a(l,t);d&&d.from<=s&&d.from>=e&&d.to>s&&(r=d)}}return r}function w3(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function xa(t,e,s){for(let i of t.facet(b3)){let n=i(t,e,s);if(n)return n}return k3(t,e,s)}function Hv(t,e){let s=e.mapPos(t.from,1),i=e.mapPos(t.to,-1);return s>=i?void 0:{from:s,to:i}}const eu=Ge.define({map:Hv}),qo=Ge.define({map:Hv});function Wv(t){let e=[];for(let{head:s}of t.state.selection.ranges)e.some(i=>i.from<=s&&i.to>=s)||e.push(t.lineBlockAt(s));return e}const In=Gt.define({create(){return Fe.none},update(t,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((s,i)=>t=Yp(t,s,i)),t=t.map(e.changes);for(let s of e.effects)if(s.is(eu)&&!_3(t,s.value.from,s.value.to)){let{preparePlaceholder:i}=e.state.facet(Gv),n=i?Fe.replace({widget:new T3(i(e.state,s.value))}):Xp;t=t.update({add:[n.range(s.value.from,s.value.to)]})}else s.is(qo)&&(t=t.update({filter:(i,n)=>s.value.from!=i||s.value.to!=n,filterFrom:s.value.from,filterTo:s.value.to}));return e.selection&&(t=Yp(t,e.selection.main.head)),t},provide:t=>$e.decorations.from(t),toJSON(t,e){let s=[];return t.between(0,e.doc.length,(i,n)=>{s.push(i,n)}),s},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let s=0;s<t.length;){let i=t[s++],n=t[s++];if(typeof i!="number"||typeof n!="number")throw new RangeError("Invalid JSON for fold state");e.push(Xp.range(i,n))}return Fe.set(e,!0)}});function Yp(t,e,s=e){let i=!1;return t.between(e,s,(n,r)=>{n<s&&r>e&&(i=!0)}),i?t.update({filterFrom:e,filterTo:s,filter:(n,r)=>n>=s||r<=e}):t}function ka(t,e,s){var i;let n=null;return(i=t.field(In,!1))===null||i===void 0||i.between(e,s,(r,o)=>{(!n||n.from>r)&&(n={from:r,to:o})}),n}function _3(t,e,s){let i=!1;return t.between(e,e,(n,r)=>{n==e&&r==s&&(i=!0)}),i}function qv(t,e){return t.field(In,!1)?e:e.concat(Ge.appendConfig.of(Jv()))}const S3=t=>{for(let e of Wv(t)){let s=xa(t.state,e.from,e.to);if(s)return t.dispatch({effects:qv(t.state,[eu.of(s),Kv(t,s)])}),!0}return!1},C3=t=>{if(!t.state.field(In,!1))return!1;let e=[];for(let s of Wv(t)){let i=ka(t.state,s.from,s.to);i&&e.push(qo.of(i),Kv(t,i,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function Kv(t,e,s=!0){let i=t.state.doc.lineAt(e.from).number,n=t.state.doc.lineAt(e.to).number;return $e.announce.of(`${t.state.phrase(s?"Folded lines":"Unfolded lines")} ${i} ${t.state.phrase("to")} ${n}.`)}const A3=t=>{let{state:e}=t,s=[];for(let i=0;i<e.doc.length;){let n=t.lineBlockAt(i),r=xa(e,n.from,n.to);r&&s.push(eu.of(r)),i=(r?t.lineBlockAt(r.to):n).to+1}return s.length&&t.dispatch({effects:qv(t.state,s)}),!!s.length},V3=t=>{let e=t.state.field(In,!1);if(!e||!e.size)return!1;let s=[];return e.between(0,t.state.doc.length,(i,n)=>{s.push(qo.of({from:i,to:n}))}),t.dispatch({effects:s}),!0},M3=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:S3},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:C3},{key:"Ctrl-Alt-[",run:A3},{key:"Ctrl-Alt-]",run:V3}],D3={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},Gv=Ee.define({combine(t){return xi(t,D3)}});function Jv(t){return[In,O3]}function Yv(t,e){let{state:s}=t,i=s.facet(Gv),n=o=>{let l=t.lineBlockAt(t.posAtDOM(o.target)),a=ka(t.state,l.from,l.to);a&&t.dispatch({effects:qo.of(a)}),o.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(t,n,e);let r=document.createElement("span");return r.textContent=i.placeholderText,r.setAttribute("aria-label",s.phrase("folded code")),r.title=s.phrase("unfold"),r.className="cm-foldPlaceholder",r.onclick=n,r}const Xp=Fe.replace({widget:new class extends cn{toDOM(t){return Yv(t,null)}}});class T3 extends cn{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return Yv(e,this.value)}}const $3={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class Hu extends Li{constructor(e,s){super(),this.config=e,this.open=s}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let s=document.createElement("span");return s.textContent=this.open?this.config.openText:this.config.closedText,s.title=e.state.phrase(this.open?"Fold line":"Unfold line"),s}}function E3(t={}){let e={...$3,...t},s=new Hu(e,!0),i=new Hu(e,!1),n=Et.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(dn)!=o.state.facet(dn)||o.startState.field(In,!1)!=o.state.field(In,!1)||is(o.startState)!=is(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let l=new Pi;for(let a of o.viewportLineBlocks){let d=ka(o.state,a.from,a.to)?i:xa(o.state,a.from,a.to)?s:null;d&&l.add(a.from,a.from,d)}return l.finish()}}),{domEventHandlers:r}=e;return[n,$5({class:"cm-foldGutter",markers(o){var l;return((l=o.plugin(n))===null||l===void 0?void 0:l.markers)||tt.empty},initialSpacer(){return new Hu(e,!1)},domEventHandlers:{...r,click:(o,l,a)=>{if(r.click&&r.click(o,l,a))return!0;let d=ka(o.state,l.from,l.to);if(d)return o.dispatch({effects:qo.of(d)}),!0;let u=xa(o.state,l.from,l.to);return u?(o.dispatch({effects:eu.of(u)}),!0):!1}}}),Jv()]}const O3=$e.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Ko{constructor(e,s){this.specs=e;let i;function n(l){let a=on.newName();return(i||(i=Object.create(null)))["."+a]=l,a}const r=typeof s.all=="string"?s.all:s.all?n(s.all):void 0,o=s.scope;this.scope=o instanceof Ks?l=>l.prop(Qn)==o.data:o?l=>l==o:void 0,this.style=Nv(e.map(l=>({tag:l.tag,class:l.class||n(Object.assign({},l,{tag:null}))})),{all:r}).style,this.module=i?new on(i):null,this.themeType=s.themeType}static define(e,s){return new Ko(e,s||{})}}const rc=Ee.define(),Xv=Ee.define({combine(t){return t.length?[t[0]]:null}});function Wu(t){let e=t.facet(rc);return e.length?e:t.facet(Xv)}function Zv(t,e){let s=[j3],i;return t instanceof Ko&&(t.module&&s.push($e.styleModule.of(t.module)),i=t.themeType),e?.fallback?s.push(Xv.of(t)):i?s.push(rc.computeN([$e.darkTheme],n=>n.facet($e.darkTheme)==(i=="dark")?[t]:[])):s.push(rc.of(t)),s}class P3{constructor(e){this.markCache=Object.create(null),this.tree=is(e.state),this.decorations=this.buildDeco(e,Wu(e.state)),this.decoratedTo=e.viewport.to}update(e){let s=is(e.state),i=Wu(e.state),n=i!=Wu(e.startState),{viewport:r}=e.view,o=e.changes.mapPos(this.decoratedTo,1);s.length<r.to&&!n&&s.type==this.tree.type&&o>=r.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(s!=this.tree||e.viewportChanged||n)&&(this.tree=s,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=r.to)}buildDeco(e,s){if(!s||!this.tree.length)return Fe.none;let i=new Pi;for(let{from:n,to:r}of e.visibleRanges)s3(this.tree,s,(o,l,a)=>{i.add(o,l,this.markCache[a]||(this.markCache[a]=Fe.mark({class:a})))},n,r);return i.finish()}}const j3=Un.high(Et.fromClass(P3,{decorations:t=>t.decorations})),L3=Ko.define([{tag:Me.meta,color:"#404740"},{tag:Me.link,textDecoration:"underline"},{tag:Me.heading,textDecoration:"underline",fontWeight:"bold"},{tag:Me.emphasis,fontStyle:"italic"},{tag:Me.strong,fontWeight:"bold"},{tag:Me.strikethrough,textDecoration:"line-through"},{tag:Me.keyword,color:"#708"},{tag:[Me.atom,Me.bool,Me.url,Me.contentSeparator,Me.labelName],color:"#219"},{tag:[Me.literal,Me.inserted],color:"#164"},{tag:[Me.string,Me.deleted],color:"#a11"},{tag:[Me.regexp,Me.escape,Me.special(Me.string)],color:"#e40"},{tag:Me.definition(Me.variableName),color:"#00f"},{tag:Me.local(Me.variableName),color:"#30a"},{tag:[Me.typeName,Me.namespace],color:"#085"},{tag:Me.className,color:"#167"},{tag:[Me.special(Me.variableName),Me.macroName],color:"#256"},{tag:Me.definition(Me.propertyName),color:"#00c"},{tag:Me.comment,color:"#940"},{tag:Me.invalid,color:"#f00"}]),R3=$e.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Qv=1e4,ey="()[]{}",ty=Ee.define({combine(t){return xi(t,{afterCursor:!0,brackets:ey,maxScanDistance:Qv,renderMatch:N3})}}),B3=Fe.mark({class:"cm-matchingBracket"}),I3=Fe.mark({class:"cm-nonmatchingBracket"});function N3(t){let e=[],s=t.matched?B3:I3;return e.push(s.range(t.start.from,t.start.to)),t.end&&e.push(s.range(t.end.from,t.end.to)),e}const U3=Gt.define({create(){return Fe.none},update(t,e){if(!e.docChanged&&!e.selection)return t;let s=[],i=e.state.facet(ty);for(let n of e.state.selection.ranges){if(!n.empty)continue;let r=mi(e.state,n.head,-1,i)||n.head>0&&mi(e.state,n.head-1,1,i)||i.afterCursor&&(mi(e.state,n.head,1,i)||n.head<e.state.doc.length&&mi(e.state,n.head+1,-1,i));r&&(s=s.concat(i.renderMatch(r,e.state)))}return Fe.set(s,!0)},provide:t=>$e.decorations.from(t)}),z3=[U3,R3];function F3(t={}){return[ty.of(t),z3]}const H3=new Ze;function oc(t,e,s){let i=t.prop(e<0?Ze.openedBy:Ze.closedBy);if(i)return i;if(t.name.length==1){let n=s.indexOf(t.name);if(n>-1&&n%2==(e<0?1:0))return[s[n+e]]}return null}function lc(t){let e=t.type.prop(H3);return e?e(t.node):t}function mi(t,e,s,i={}){let n=i.maxScanDistance||Qv,r=i.brackets||ey,o=is(t),l=o.resolveInner(e,s);for(let a=l;a;a=a.parent){let d=oc(a.type,s,r);if(d&&a.from<a.to){let u=lc(a);if(u&&(s>0?e>=u.from&&e<u.to:e>u.from&&e<=u.to))return W3(t,e,s,a,u,d,r)}}return q3(t,e,s,o,l.type,n,r)}function W3(t,e,s,i,n,r,o){let l=i.parent,a={from:n.from,to:n.to},d=0,u=l?.cursor();if(u&&(s<0?u.childBefore(i.from):u.childAfter(i.to)))do if(s<0?u.to<=i.from:u.from>=i.to){if(d==0&&r.indexOf(u.type.name)>-1&&u.from<u.to){let f=lc(u);return{start:a,end:f?{from:f.from,to:f.to}:void 0,matched:!0}}else if(oc(u.type,s,o))d++;else if(oc(u.type,-s,o)){if(d==0){let f=lc(u);return{start:a,end:f&&f.from<f.to?{from:f.from,to:f.to}:void 0,matched:!1}}d--}}while(s<0?u.prevSibling():u.nextSibling());return{start:a,matched:!1}}function q3(t,e,s,i,n,r,o){let l=s<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),a=o.indexOf(l);if(a<0||a%2==0!=s>0)return null;let d={from:s<0?e-1:e,to:s>0?e+1:e},u=t.doc.iterRange(e,s>0?t.doc.length:0),f=0;for(let h=0;!u.next().done&&h<=r;){let m=u.value;s<0&&(h+=m.length);let _=e+h*s;for(let p=s>0?0:m.length-1,C=s>0?m.length:-1;p!=C;p+=s){let M=o.indexOf(m[p]);if(!(M<0||i.resolveInner(_+p,1).type!=n))if(M%2==0==s>0)f++;else{if(f==1)return{start:d,end:{from:_+p,to:_+p+1},matched:M>>1==a>>1};f--}}s>0&&(h+=m.length)}return u.done?{start:d,matched:!1}:null}function Zp(t,e,s,i=0,n=0){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));let r=n;for(let o=i;o<e;o++)t.charCodeAt(o)==9?r+=s-r%s:r++;return r}class sy{constructor(e,s,i,n){this.string=e,this.tabSize=s,this.indentUnit=i,this.overrideIndent=n,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let s=this.string.charAt(this.pos),i;if(typeof e=="string"?i=s==e:i=s&&(e instanceof RegExp?e.test(s):e(s)),i)return++this.pos,s}eatWhile(e){let s=this.pos;for(;this.eat(e););return this.pos>s}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let s=this.string.indexOf(e,this.pos);if(s>-1)return this.pos=s,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Zp(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:Zp(this.string,null,this.tabSize)}match(e,s,i){if(typeof e=="string"){let n=o=>i?o.toLowerCase():o,r=this.string.substr(this.pos,e.length);return n(r)==n(e)?(s!==!1&&(this.pos+=e.length),!0):null}else{let n=this.string.slice(this.pos).match(e);return n&&n.index>0?null:(n&&s!==!1&&(this.pos+=n[0].length),n)}}current(){return this.string.slice(this.start,this.pos)}}function K3(t){return{name:t.name||"",token:t.token,blankLine:t.blankLine||(()=>{}),startState:t.startState||(()=>!0),copyState:t.copyState||G3,indent:t.indent||(()=>null),languageData:t.languageData||{},tokenTable:t.tokenTable||df,mergeTokens:t.mergeTokens!==!1}}function G3(t){if(typeof t!="object")return t;let e={};for(let s in t){let i=t[s];e[s]=i instanceof Array?i.slice():i}return e}const Qp=new WeakMap;class af extends Ks{constructor(e){let s=r3(e.languageData),i=K3(e),n,r=new class extends Bv{createParse(o,l,a){return new Y3(n,o,l,a)}};super(s,r,[],e.name),this.topNode=Q3(s,this),n=this,this.streamParser=i,this.stateAfter=new Ze({perNode:!0}),this.tokenTable=e.tokenTable?new oy(i.tokenTable):Z3}static define(e){return new af(e)}getIndent(e){let s,{overrideIndentation:i}=e.options;i&&(s=Qp.get(e.state),s!=null&&s<e.pos-1e4&&(s=void 0));let n=uf(this,e.node.tree,e.node.from,e.node.from,s??e.pos),r,o;if(n?(o=n.state,r=n.pos+1):(o=this.streamParser.startState(e.unit),r=e.node.from),e.pos-r>1e4)return null;for(;r<e.pos;){let a=e.state.doc.lineAt(r),d=Math.min(e.pos,a.to);if(a.length){let u=i?i(a.from):-1,f=new sy(a.text,e.state.tabSize,e.unit,u<0?void 0:u);for(;f.pos<d-a.from;)ny(this.streamParser.token,f,o)}else this.streamParser.blankLine(o,e.unit);if(d==e.pos)break;r=a.to+1}let l=e.lineAt(e.pos);return i&&s==null&&Qp.set(e.state,l.from),this.streamParser.indent(o,/^\s*(.*)/.exec(l.text)[1],e)}get allowsNesting(){return!1}}function uf(t,e,s,i,n){let r=s>=i&&s+e.length<=n&&e.prop(t.stateAfter);if(r)return{state:t.streamParser.copyState(r),pos:s+e.length};for(let o=e.children.length-1;o>=0;o--){let l=e.children[o],a=s+e.positions[o],d=l instanceof wt&&a<n&&uf(t,l,a,i,n);if(d)return d}return null}function iy(t,e,s,i,n){if(n&&s<=0&&i>=e.length)return e;!n&&s==0&&e.type==t.topNode&&(n=!0);for(let r=e.children.length-1;r>=0;r--){let o=e.positions[r],l=e.children[r],a;if(o<i&&l instanceof wt){if(!(a=iy(t,l,s-o,i-o,n)))break;return n?new wt(e.type,e.children.slice(0,r).concat(a),e.positions.slice(0,r+1),o+a.length):a}}return null}function J3(t,e,s,i,n){for(let r of e){let o=r.from+(r.openStart?25:0),l=r.to-(r.openEnd?25:0),a=o<=s&&l>s&&uf(t,r.tree,0-r.offset,s,l),d;if(a&&a.pos<=i&&(d=iy(t,r.tree,s+r.offset,a.pos+r.offset,!1)))return{state:a.state,tree:d}}return{state:t.streamParser.startState(n?Bn(n):4),tree:wt.empty}}class Y3{constructor(e,s,i,n){this.lang=e,this.input=s,this.fragments=i,this.ranges=n,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=n[n.length-1].to;let r=kr.get(),o=n[0].from,{state:l,tree:a}=J3(e,i,o,this.to,r?.state);this.state=l,this.parsedPos=this.chunkStart=o+a.length;for(let d=0;d<a.children.length;d++)this.chunks.push(a.children[d]),this.chunkPos.push(a.positions[d]);r&&this.parsedPos<r.viewport.from-1e5&&n.some(d=>d.from<=r.viewport.from&&d.to>=r.viewport.from)&&(this.state=this.lang.streamParser.startState(Bn(r.state)),r.skipUntilInView(this.parsedPos,r.viewport.from),this.parsedPos=r.viewport.from),this.moveRangeIndex()}advance(){let e=kr.get(),s=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),i=Math.min(s,this.chunkStart+512);for(e&&(i=Math.min(i,e.viewport.to));this.parsedPos<i;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=s?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,s),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let s=this.input.chunk(e);if(this.input.lineChunks)s==`
`&&(s="");else{let i=s.indexOf(`
`);i>-1&&(s=s.slice(0,i))}return e+s.length<=this.to?s:s.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,s=this.lineAfter(e),i=e+s.length;for(let n=this.rangeIndex;;){let r=this.ranges[n].to;if(r>=i||(s=s.slice(0,r-(i-s.length)),n++,n==this.ranges.length))break;let o=this.ranges[n].from,l=this.lineAfter(o);s+=l,i=o+l.length}return{line:s,end:i}}skipGapsTo(e,s,i){for(;;){let n=this.ranges[this.rangeIndex].to,r=e+s;if(i>0?n>r:n>=r)break;let o=this.ranges[++this.rangeIndex].from;s+=o-n}return s}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,s,i,n){let r=4;if(this.ranges.length>1){n=this.skipGapsTo(s,n,1),s+=n;let l=this.chunk.length;n=this.skipGapsTo(i,n,-1),i+=n,r+=this.chunk.length-l}let o=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&r==4&&o>=0&&this.chunk[o]==e&&this.chunk[o+2]==s?this.chunk[o+2]=i:this.chunk.push(e,s,i,r),n}parseLine(e){let{line:s,end:i}=this.nextLine(),n=0,{streamParser:r}=this.lang,o=new sy(s,e?e.state.tabSize:4,e?Bn(e.state):2);if(o.eol())r.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let l=ny(r.token,o,this.state);if(l&&(n=this.emitToken(this.lang.tokenTable.resolve(l),this.parsedPos+o.start,this.parsedPos+o.pos,n)),o.start>1e4)break}this.parsedPos=i,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=wt.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:X3,topID:0,maxBufferLength:512,reused:this.chunkReused});e=new wt(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new wt(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function ny(t,e,s){e.start=e.pos;for(let i=0;i<10;i++){let n=t(e,s);if(e.pos>e.start)return n}throw new Error("Stream parser failed to advance stream.")}const df=Object.create(null),Oo=[bs.none],X3=new ef(Oo),em=[],tm=Object.create(null),ry=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])ry[t]=ly(df,e);class oy{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),ry)}resolve(e){return e?this.table[e]||(this.table[e]=ly(this.extra,e)):0}}const Z3=new oy(df);function qu(t,e){em.indexOf(t)>-1||(em.push(t),console.warn(e))}function ly(t,e){let s=[];for(let l of e.split(" ")){let a=[];for(let d of l.split(".")){let u=t[d]||Me[d];u?typeof u=="function"?a.length?a=a.map(u):qu(d,`Modifier ${d} used at start of tag`):a.length?qu(d,`Tag ${d} used as modifier`):a=Array.isArray(u)?u:[u]:qu(d,`Unknown highlighting tag ${d}`)}for(let d of a)s.push(d)}if(!s.length)return 0;let i=e.replace(/ /g,"_"),n=i+" "+s.map(l=>l.id),r=tm[n];if(r)return r.id;let o=tm[n]=bs.define({id:Oo.length,name:i,props:[e3({[i]:s})]});return Oo.push(o),o.id}function Q3(t,e){let s=bs.define({id:Oo.length,name:"Document",props:[Qn.add(()=>t),zv.add(()=>i=>e.getIndent(i))],top:!0});return Oo.push(s),s}bt.RTL,bt.LTR;const eA=t=>{let{state:e}=t,s=e.doc.lineAt(e.selection.main.from),i=ff(t.state,s.from);return i.line?tA(t):i.block?iA(t):!1};function cf(t,e){return({state:s,dispatch:i})=>{if(s.readOnly)return!1;let n=t(e,s);return n?(i(s.update(n)),!0):!1}}const tA=cf(oA,0),sA=cf(ay,0),iA=cf((t,e)=>ay(t,e,rA(e)),0);function ff(t,e){let s=t.languageDataAt("commentTokens",e,1);return s.length?s[0]:{}}const Fr=50;function nA(t,{open:e,close:s},i,n){let r=t.sliceDoc(i-Fr,i),o=t.sliceDoc(n,n+Fr),l=/\s*$/.exec(r)[0].length,a=/^\s*/.exec(o)[0].length,d=r.length-l;if(r.slice(d-e.length,d)==e&&o.slice(a,a+s.length)==s)return{open:{pos:i-l,margin:l&&1},close:{pos:n+a,margin:a&&1}};let u,f;n-i<=2*Fr?u=f=t.sliceDoc(i,n):(u=t.sliceDoc(i,i+Fr),f=t.sliceDoc(n-Fr,n));let h=/^\s*/.exec(u)[0].length,m=/\s*$/.exec(f)[0].length,_=f.length-m-s.length;return u.slice(h,h+e.length)==e&&f.slice(_,_+s.length)==s?{open:{pos:i+h+e.length,margin:/\s/.test(u.charAt(h+e.length))?1:0},close:{pos:n-m-s.length,margin:/\s/.test(f.charAt(_-1))?1:0}}:null}function rA(t){let e=[];for(let s of t.selection.ranges){let i=t.doc.lineAt(s.from),n=s.to<=i.to?i:t.doc.lineAt(s.to);n.from>i.from&&n.from==s.to&&(n=s.to==i.to+1?i:t.doc.lineAt(s.to-1));let r=e.length-1;r>=0&&e[r].to>i.from?e[r].to=n.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:n.to})}return e}function ay(t,e,s=e.selection.ranges){let i=s.map(r=>ff(e,r.from).block);if(!i.every(r=>r))return null;let n=s.map((r,o)=>nA(e,i[o],r.from,r.to));if(t!=2&&!n.every(r=>r))return{changes:e.changes(s.map((r,o)=>n[o]?[]:[{from:r.from,insert:i[o].open+" "},{from:r.to,insert:" "+i[o].close}]))};if(t!=1&&n.some(r=>r)){let r=[];for(let o=0,l;o<n.length;o++)if(l=n[o]){let a=i[o],{open:d,close:u}=l;r.push({from:d.pos-a.open.length,to:d.pos+d.margin},{from:u.pos-u.margin,to:u.pos+a.close.length})}return{changes:r}}return null}function oA(t,e,s=e.selection.ranges){let i=[],n=-1;for(let{from:r,to:o}of s){let l=i.length,a=1e9,d=ff(e,r).line;if(d){for(let u=r;u<=o;){let f=e.doc.lineAt(u);if(f.from>n&&(r==o||o>f.from)){n=f.from;let h=/^\s*/.exec(f.text)[0].length,m=h==f.length,_=f.text.slice(h,h+d.length)==d?h:-1;h<f.text.length&&h<a&&(a=h),i.push({line:f,comment:_,token:d,indent:h,empty:m,single:!1})}u=f.to+1}if(a<1e9)for(let u=l;u<i.length;u++)i[u].indent<i[u].line.text.length&&(i[u].indent=a);i.length==l+1&&(i[l].single=!0)}}if(t!=2&&i.some(r=>r.comment<0&&(!r.empty||r.single))){let r=[];for(let{line:l,token:a,indent:d,empty:u,single:f}of i)(f||!u)&&r.push({from:l.from+d,insert:a+" "});let o=e.changes(r);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&i.some(r=>r.comment>=0)){let r=[];for(let{line:o,comment:l,token:a}of i)if(l>=0){let d=o.from+l,u=d+a.length;o.text[u-o.from]==" "&&u++,r.push({from:d,to:u})}return{changes:r}}return null}const ac=Bi.define(),lA=Bi.define(),aA=Ee.define(),uy=Ee.define({combine(t){return xi(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,s)=>s},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,s)=>(i,n)=>e(i,n)||s(i,n)})}}),dy=Gt.define({create(){return gi.empty},update(t,e){let s=e.state.facet(uy),i=e.annotation(ac);if(i){let a=ys.fromTransaction(e,i.selection),d=i.side,u=d==0?t.undone:t.done;return a?u=wa(u,u.length,s.minDepth,a):u=hy(u,e.startState.selection),new gi(d==0?i.rest:u,d==0?u:i.rest)}let n=e.annotation(lA);if((n=="full"||n=="before")&&(t=t.isolate()),e.annotation(Rt.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let r=ys.fromTransaction(e),o=e.annotation(Rt.time),l=e.annotation(Rt.userEvent);return r?t=t.addChanges(r,o,l,s,e):e.selection&&(t=t.addSelection(e.startState.selection,o,l,s.newGroupDelay)),(n=="full"||n=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new gi(t.done.map(ys.fromJSON),t.undone.map(ys.fromJSON))}});function uA(t={}){return[dy,uy.of(t),$e.domEventHandlers({beforeinput(e,s){let i=e.inputType=="historyUndo"?cy:e.inputType=="historyRedo"?uc:null;return i?(e.preventDefault(),i(s)):!1}})]}function tu(t,e){return function({state:s,dispatch:i}){if(!e&&s.readOnly)return!1;let n=s.field(dy,!1);if(!n)return!1;let r=n.pop(t,s,e);return r?(i(r),!0):!1}}const cy=tu(0,!1),uc=tu(1,!1),dA=tu(0,!0),cA=tu(1,!0);class ys{constructor(e,s,i,n,r){this.changes=e,this.effects=s,this.mapped=i,this.startSelection=n,this.selectionsAfter=r}setSelAfter(e){return new ys(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,s,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(s=this.mapped)===null||s===void 0?void 0:s.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(n=>n.toJSON())}}static fromJSON(e){return new ys(e.changes&&Lt.fromJSON(e.changes),[],e.mapped&&yi.fromJSON(e.mapped),e.startSelection&&ue.fromJSON(e.startSelection),e.selectionsAfter.map(ue.fromJSON))}static fromTransaction(e,s){let i=Ls;for(let n of e.startState.facet(aA)){let r=n(e);r.length&&(i=i.concat(r))}return!i.length&&e.changes.empty?null:new ys(e.changes.invert(e.startState.doc),i,void 0,s||e.startState.selection,Ls)}static selection(e){return new ys(void 0,Ls,void 0,void 0,e)}}function wa(t,e,s,i){let n=e+1>s+20?e-s-1:0,r=t.slice(n,e);return r.push(i),r}function fA(t,e){let s=[],i=!1;return t.iterChangedRanges((n,r)=>s.push(n,r)),e.iterChangedRanges((n,r,o,l)=>{for(let a=0;a<s.length;){let d=s[a++],u=s[a++];l>=d&&o<=u&&(i=!0)}}),i}function hA(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((s,i)=>s.empty!=e.ranges[i].empty).length===0}function fy(t,e){return t.length?e.length?t.concat(e):t:e}const Ls=[],pA=200;function hy(t,e){if(t.length){let s=t[t.length-1],i=s.selectionsAfter.slice(Math.max(0,s.selectionsAfter.length-pA));return i.length&&i[i.length-1].eq(e)?t:(i.push(e),wa(t,t.length-1,1e9,s.setSelAfter(i)))}else return[ys.selection([e])]}function mA(t){let e=t[t.length-1],s=t.slice();return s[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),s}function Ku(t,e){if(!t.length)return t;let s=t.length,i=Ls;for(;s;){let n=gA(t[s-1],e,i);if(n.changes&&!n.changes.empty||n.effects.length){let r=t.slice(0,s);return r[s-1]=n,r}else e=n.mapped,s--,i=n.selectionsAfter}return i.length?[ys.selection(i)]:Ls}function gA(t,e,s){let i=fy(t.selectionsAfter.length?t.selectionsAfter.map(l=>l.map(e)):Ls,s);if(!t.changes)return ys.selection(i);let n=t.changes.map(e),r=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(r):r;return new ys(n,Ge.mapEffects(t.effects,e),o,t.startSelection.map(r),i)}const vA=/^(input\.type|delete)($|\.)/;class gi{constructor(e,s,i=0,n=void 0){this.done=e,this.undone=s,this.prevTime=i,this.prevUserEvent=n}isolate(){return this.prevTime?new gi(this.done,this.undone):this}addChanges(e,s,i,n,r){let o=this.done,l=o[o.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!i||vA.test(i))&&(!l.selectionsAfter.length&&s-this.prevTime<n.newGroupDelay&&n.joinToEvent(r,fA(l.changes,e.changes))||i=="input.type.compose")?o=wa(o,o.length-1,n.minDepth,new ys(e.changes.compose(l.changes),fy(Ge.mapEffects(e.effects,l.changes),l.effects),l.mapped,l.startSelection,Ls)):o=wa(o,o.length,n.minDepth,e),new gi(o,Ls,s,i)}addSelection(e,s,i,n){let r=this.done.length?this.done[this.done.length-1].selectionsAfter:Ls;return r.length>0&&s-this.prevTime<n&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&hA(r[r.length-1],e)?this:new gi(hy(this.done,e),this.undone,s,i)}addMapping(e){return new gi(Ku(this.done,e),Ku(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,s,i){let n=e==0?this.done:this.undone;if(n.length==0)return null;let r=n[n.length-1],o=r.selectionsAfter[0]||s.selection;if(i&&r.selectionsAfter.length)return s.update({selection:r.selectionsAfter[r.selectionsAfter.length-1],annotations:ac.of({side:e,rest:mA(n),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(r.changes){let l=n.length==1?Ls:n.slice(0,n.length-1);return r.mapped&&(l=Ku(l,r.mapped)),s.update({changes:r.changes,selection:r.startSelection,effects:r.effects,annotations:ac.of({side:e,rest:l,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}gi.empty=new gi(Ls,Ls);const yA=[{key:"Mod-z",run:cy,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:uc,preventDefault:!0},{linux:"Ctrl-Shift-z",run:uc,preventDefault:!0},{key:"Mod-u",run:dA,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:cA,preventDefault:!0}];function Tr(t,e){return ue.create(t.ranges.map(e),t.mainIndex)}function ti(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function si({state:t,dispatch:e},s){let i=Tr(t.selection,s);return i.eq(t.selection,!0)?!1:(e(ti(t,i)),!0)}function su(t,e){return ue.cursor(e?t.to:t.from)}function py(t,e){return si(t,s=>s.empty?t.moveByChar(s,e):su(s,e))}function ns(t){return t.textDirectionAt(t.state.selection.main.head)==bt.LTR}const my=t=>py(t,!ns(t)),gy=t=>py(t,ns(t));function vy(t,e){return si(t,s=>s.empty?t.moveByGroup(s,e):su(s,e))}const bA=t=>vy(t,!ns(t)),xA=t=>vy(t,ns(t));function kA(t,e,s){if(e.type.prop(s))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function iu(t,e,s){let i=is(t).resolveInner(e.head),n=s?Ze.closedBy:Ze.openedBy;for(let a=e.head;;){let d=s?i.childAfter(a):i.childBefore(a);if(!d)break;kA(t,d,n)?i=d:a=s?d.to:d.from}let r=i.type.prop(n),o,l;return r&&(o=s?mi(t,i.from,1):mi(t,i.to,-1))&&o.matched?l=s?o.end.to:o.end.from:l=s?i.to:i.from,ue.cursor(l,s?-1:1)}const wA=t=>si(t,e=>iu(t.state,e,!ns(t))),_A=t=>si(t,e=>iu(t.state,e,ns(t)));function yy(t,e){return si(t,s=>{if(!s.empty)return su(s,e);let i=t.moveVertically(s,e);return i.head!=s.head?i:t.moveToLineBoundary(s,e)})}const by=t=>yy(t,!1),xy=t=>yy(t,!0);function ky(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,s=0,i=0,n;if(e){for(let r of t.state.facet($e.scrollMargins)){let o=r(t);o?.top&&(s=Math.max(o?.top,s)),o?.bottom&&(i=Math.max(o?.bottom,i))}n=t.scrollDOM.clientHeight-s-i}else n=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:s,marginBottom:i,selfScroll:e,height:Math.max(t.defaultLineHeight,n-5)}}function wy(t,e){let s=ky(t),{state:i}=t,n=Tr(i.selection,o=>o.empty?t.moveVertically(o,e,s.height):su(o,e));if(n.eq(i.selection))return!1;let r;if(s.selfScroll){let o=t.coordsAtPos(i.selection.main.head),l=t.scrollDOM.getBoundingClientRect(),a=l.top+s.marginTop,d=l.bottom-s.marginBottom;o&&o.top>a&&o.bottom<d&&(r=$e.scrollIntoView(n.main.head,{y:"start",yMargin:o.top-a}))}return t.dispatch(ti(i,n),{effects:r}),!0}const sm=t=>wy(t,!1),dc=t=>wy(t,!0);function fn(t,e,s){let i=t.lineBlockAt(e.head),n=t.moveToLineBoundary(e,s);if(n.head==e.head&&n.head!=(s?i.to:i.from)&&(n=t.moveToLineBoundary(e,s,!1)),!s&&n.head==i.from&&i.length){let r=/^\s*/.exec(t.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;r&&e.head!=i.from+r&&(n=ue.cursor(i.from+r))}return n}const SA=t=>si(t,e=>fn(t,e,!0)),CA=t=>si(t,e=>fn(t,e,!1)),AA=t=>si(t,e=>fn(t,e,!ns(t))),VA=t=>si(t,e=>fn(t,e,ns(t))),MA=t=>si(t,e=>ue.cursor(t.lineBlockAt(e.head).from,1)),DA=t=>si(t,e=>ue.cursor(t.lineBlockAt(e.head).to,-1));function TA(t,e,s){let i=!1,n=Tr(t.selection,r=>{let o=mi(t,r.head,-1)||mi(t,r.head,1)||r.head>0&&mi(t,r.head-1,1)||r.head<t.doc.length&&mi(t,r.head+1,-1);if(!o||!o.end)return r;i=!0;let l=o.start.from==r.head?o.end.to:o.end.from;return ue.cursor(l)});return i?(e(ti(t,n)),!0):!1}const $A=({state:t,dispatch:e})=>TA(t,e);function Hs(t,e){let s=Tr(t.state.selection,i=>{let n=e(i);return ue.range(i.anchor,n.head,n.goalColumn,n.bidiLevel||void 0)});return s.eq(t.state.selection)?!1:(t.dispatch(ti(t.state,s)),!0)}function _y(t,e){return Hs(t,s=>t.moveByChar(s,e))}const Sy=t=>_y(t,!ns(t)),Cy=t=>_y(t,ns(t));function Ay(t,e){return Hs(t,s=>t.moveByGroup(s,e))}const EA=t=>Ay(t,!ns(t)),OA=t=>Ay(t,ns(t)),PA=t=>Hs(t,e=>iu(t.state,e,!ns(t))),jA=t=>Hs(t,e=>iu(t.state,e,ns(t)));function Vy(t,e){return Hs(t,s=>t.moveVertically(s,e))}const My=t=>Vy(t,!1),Dy=t=>Vy(t,!0);function Ty(t,e){return Hs(t,s=>t.moveVertically(s,e,ky(t).height))}const im=t=>Ty(t,!1),nm=t=>Ty(t,!0),LA=t=>Hs(t,e=>fn(t,e,!0)),RA=t=>Hs(t,e=>fn(t,e,!1)),BA=t=>Hs(t,e=>fn(t,e,!ns(t))),IA=t=>Hs(t,e=>fn(t,e,ns(t))),NA=t=>Hs(t,e=>ue.cursor(t.lineBlockAt(e.head).from)),UA=t=>Hs(t,e=>ue.cursor(t.lineBlockAt(e.head).to)),rm=({state:t,dispatch:e})=>(e(ti(t,{anchor:0})),!0),om=({state:t,dispatch:e})=>(e(ti(t,{anchor:t.doc.length})),!0),lm=({state:t,dispatch:e})=>(e(ti(t,{anchor:t.selection.main.anchor,head:0})),!0),am=({state:t,dispatch:e})=>(e(ti(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),zA=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),FA=({state:t,dispatch:e})=>{let s=nu(t).map(({from:i,to:n})=>ue.range(i,Math.min(n+1,t.doc.length)));return e(t.update({selection:ue.create(s),userEvent:"select"})),!0},HA=({state:t,dispatch:e})=>{let s=Tr(t.selection,i=>{let n=is(t),r=n.resolveStack(i.from,1);if(i.empty){let o=n.resolveStack(i.from,-1);o.node.from>=r.node.from&&o.node.to<=r.node.to&&(r=o)}for(let o=r;o;o=o.next){let{node:l}=o;if((l.from<i.from&&l.to>=i.to||l.to>i.to&&l.from<=i.from)&&o.next)return ue.range(l.to,l.from)}return i});return s.eq(t.selection)?!1:(e(ti(t,s)),!0)};function $y(t,e){let{state:s}=t,i=s.selection,n=s.selection.ranges.slice();for(let r of s.selection.ranges){let o=s.doc.lineAt(r.head);if(e?o.to<t.state.doc.length:o.from>0)for(let l=r;;){let a=t.moveVertically(l,e);if(a.head<o.from||a.head>o.to){n.some(d=>d.head==a.head)||n.push(a);break}else{if(a.head==l.head)break;l=a}}}return n.length==i.ranges.length?!1:(t.dispatch(ti(s,ue.create(n,n.length-1))),!0)}const WA=t=>$y(t,!1),qA=t=>$y(t,!0),KA=({state:t,dispatch:e})=>{let s=t.selection,i=null;return s.ranges.length>1?i=ue.create([s.main]):s.main.empty||(i=ue.create([ue.cursor(s.main.head)])),i?(e(ti(t,i)),!0):!1};function Go(t,e){if(t.state.readOnly)return!1;let s="delete.selection",{state:i}=t,n=i.changeByRange(r=>{let{from:o,to:l}=r;if(o==l){let a=e(r);a<o?(s="delete.backward",a=El(t,a,!1)):a>o&&(s="delete.forward",a=El(t,a,!0)),o=Math.min(o,a),l=Math.max(l,a)}else o=El(t,o,!1),l=El(t,l,!0);return o==l?{range:r}:{changes:{from:o,to:l},range:ue.cursor(o,o<r.head?-1:1)}});return n.changes.empty?!1:(t.dispatch(i.update(n,{scrollIntoView:!0,userEvent:s,effects:s=="delete.selection"?$e.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function El(t,e,s){if(t instanceof $e)for(let i of t.state.facet($e.atomicRanges).map(n=>n(t)))i.between(e,e,(n,r)=>{n<e&&r>e&&(e=s?r:n)});return e}const Ey=(t,e,s)=>Go(t,i=>{let n=i.from,{state:r}=t,o=r.doc.lineAt(n),l,a;if(s&&!e&&n>o.from&&n<o.from+200&&!/[^ \t]/.test(l=o.text.slice(0,n-o.from))){if(l[l.length-1]=="	")return n-1;let d=Dr(l,r.tabSize),u=d%Bn(r)||Bn(r);for(let f=0;f<u&&l[l.length-1-f]==" ";f++)n--;a=n}else a=Kt(o.text,n-o.from,e,e)+o.from,a==n&&o.number!=(e?r.doc.lines:1)?a+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(a-o.from,n-o.from))&&(a=Kt(o.text,a-o.from,!1,!1)+o.from);return a}),cc=t=>Ey(t,!1,!0),Oy=t=>Ey(t,!0,!1),Py=(t,e)=>Go(t,s=>{let i=s.head,{state:n}=t,r=n.doc.lineAt(i),o=n.charCategorizer(i);for(let l=null;;){if(i==(e?r.to:r.from)){i==s.head&&r.number!=(e?n.doc.lines:1)&&(i+=e?1:-1);break}let a=Kt(r.text,i-r.from,e)+r.from,d=r.text.slice(Math.min(i,a)-r.from,Math.max(i,a)-r.from),u=o(d);if(l!=null&&u!=l)break;(d!=" "||i!=s.head)&&(l=u),i=a}return i}),jy=t=>Py(t,!1),GA=t=>Py(t,!0),JA=t=>Go(t,e=>{let s=t.lineBlockAt(e.head).to;return e.head<s?s:Math.min(t.state.doc.length,e.head+1)}),YA=t=>Go(t,e=>{let s=t.moveToLineBoundary(e,!1).head;return e.head>s?s:Math.max(0,e.head-1)}),XA=t=>Go(t,e=>{let s=t.moveToLineBoundary(e,!0).head;return e.head<s?s:Math.min(t.state.doc.length,e.head+1)}),ZA=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let s=t.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:st.of(["",""])},range:ue.cursor(i.from)}));return e(t.update(s,{scrollIntoView:!0,userEvent:"input"})),!0},QA=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let s=t.changeByRange(i=>{if(!i.empty||i.from==0||i.from==t.doc.length)return{range:i};let n=i.from,r=t.doc.lineAt(n),o=n==r.from?n-1:Kt(r.text,n-r.from,!1)+r.from,l=n==r.to?n+1:Kt(r.text,n-r.from,!0)+r.from;return{changes:{from:o,to:l,insert:t.doc.slice(n,l).append(t.doc.slice(o,n))},range:ue.cursor(l)}});return s.changes.empty?!1:(e(t.update(s,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function nu(t){let e=[],s=-1;for(let i of t.selection.ranges){let n=t.doc.lineAt(i.from),r=t.doc.lineAt(i.to);if(!i.empty&&i.to==r.from&&(r=t.doc.lineAt(i.to-1)),s>=n.number){let o=e[e.length-1];o.to=r.to,o.ranges.push(i)}else e.push({from:n.from,to:r.to,ranges:[i]});s=r.number+1}return e}function Ly(t,e,s){if(t.readOnly)return!1;let i=[],n=[];for(let r of nu(t)){if(s?r.to==t.doc.length:r.from==0)continue;let o=t.doc.lineAt(s?r.to+1:r.from-1),l=o.length+1;if(s){i.push({from:r.to,to:o.to},{from:r.from,insert:o.text+t.lineBreak});for(let a of r.ranges)n.push(ue.range(Math.min(t.doc.length,a.anchor+l),Math.min(t.doc.length,a.head+l)))}else{i.push({from:o.from,to:r.from},{from:r.to,insert:t.lineBreak+o.text});for(let a of r.ranges)n.push(ue.range(a.anchor-l,a.head-l))}}return i.length?(e(t.update({changes:i,scrollIntoView:!0,selection:ue.create(n,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const e8=({state:t,dispatch:e})=>Ly(t,e,!1),t8=({state:t,dispatch:e})=>Ly(t,e,!0);function Ry(t,e,s){if(t.readOnly)return!1;let i=[];for(let n of nu(t))s?i.push({from:n.from,insert:t.doc.slice(n.from,n.to)+t.lineBreak}):i.push({from:n.to,insert:t.lineBreak+t.doc.slice(n.from,n.to)});return e(t.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const s8=({state:t,dispatch:e})=>Ry(t,e,!1),i8=({state:t,dispatch:e})=>Ry(t,e,!0),n8=t=>{if(t.state.readOnly)return!1;let{state:e}=t,s=e.changes(nu(e).map(({from:n,to:r})=>(n>0?n--:r<e.doc.length&&r++,{from:n,to:r}))),i=Tr(e.selection,n=>{let r;if(t.lineWrapping){let o=t.lineBlockAt(n.head),l=t.coordsAtPos(n.head,n.assoc||1);l&&(r=o.bottom+t.documentTop-l.bottom+t.defaultLineHeight/2)}return t.moveVertically(n,!0,r)}).map(s);return t.dispatch({changes:s,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function r8(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let s=is(t).resolveInner(e),i=s.childBefore(e),n=s.childAfter(e),r;return i&&n&&i.to<=e&&n.from>=e&&(r=i.type.prop(Ze.closedBy))&&r.indexOf(n.name)>-1&&t.doc.lineAt(i.to).from==t.doc.lineAt(n.from).from&&!/\S/.test(t.sliceDoc(i.to,n.from))?{from:i.to,to:n.from}:null}const um=By(!1),o8=By(!0);function By(t){return({state:e,dispatch:s})=>{if(e.readOnly)return!1;let i=e.changeByRange(n=>{let{from:r,to:o}=n,l=e.doc.lineAt(r),a=!t&&r==o&&r8(e,r);t&&(r=o=(o<=l.to?l:e.doc.lineAt(o)).to);let d=new Qa(e,{simulateBreak:r,simulateDoubleBreak:!!a}),u=of(d,r);for(u==null&&(u=Dr(/^\s*/.exec(e.doc.lineAt(r).text)[0],e.tabSize));o<l.to&&/\s/.test(l.text[o-l.from]);)o++;a?{from:r,to:o}=a:r>l.from&&r<l.from+100&&!/\S/.test(l.text.slice(0,r))&&(r=l.from);let f=["",Eo(e,u)];return a&&f.push(Eo(e,d.lineIndent(l.from,-1))),{changes:{from:r,to:o,insert:st.of(f)},range:ue.cursor(r+1+f[1].length)}});return s(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function hf(t,e){let s=-1;return t.changeByRange(i=>{let n=[];for(let o=i.from;o<=i.to;){let l=t.doc.lineAt(o);l.number>s&&(i.empty||i.to>l.from)&&(e(l,n,i),s=l.number),o=l.to+1}let r=t.changes(n);return{changes:n,range:ue.range(r.mapPos(i.anchor,1),r.mapPos(i.head,1))}})}const l8=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let s=Object.create(null),i=new Qa(t,{overrideIndentation:r=>{let o=s[r];return o??-1}}),n=hf(t,(r,o,l)=>{let a=of(i,r.from);if(a==null)return;/\S/.test(r.text)||(a=0);let d=/^\s*/.exec(r.text)[0],u=Eo(t,a);(d!=u||l.from<r.from+d.length)&&(s[r.from]=a,o.push({from:r.from,to:r.from+d.length,insert:u}))});return n.changes.empty||e(t.update(n,{userEvent:"indent"})),!0},a8=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(hf(t,(s,i)=>{i.push({from:s.from,insert:t.facet(rf)})}),{userEvent:"input.indent"})),!0),u8=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(hf(t,(s,i)=>{let n=/^\s*/.exec(s.text)[0];if(!n)return;let r=Dr(n,t.tabSize),o=0,l=Eo(t,Math.max(0,r-Bn(t)));for(;o<n.length&&o<l.length&&n.charCodeAt(o)==l.charCodeAt(o);)o++;i.push({from:s.from+o,to:s.from+n.length,insert:l.slice(o)})}),{userEvent:"delete.dedent"})),!0),d8=t=>(t.setTabFocusMode(),!0),c8=[{key:"Ctrl-b",run:my,shift:Sy,preventDefault:!0},{key:"Ctrl-f",run:gy,shift:Cy},{key:"Ctrl-p",run:by,shift:My},{key:"Ctrl-n",run:xy,shift:Dy},{key:"Ctrl-a",run:MA,shift:NA},{key:"Ctrl-e",run:DA,shift:UA},{key:"Ctrl-d",run:Oy},{key:"Ctrl-h",run:cc},{key:"Ctrl-k",run:JA},{key:"Ctrl-Alt-h",run:jy},{key:"Ctrl-o",run:ZA},{key:"Ctrl-t",run:QA},{key:"Ctrl-v",run:dc}],f8=[{key:"ArrowLeft",run:my,shift:Sy,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:bA,shift:EA,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:AA,shift:BA,preventDefault:!0},{key:"ArrowRight",run:gy,shift:Cy,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:xA,shift:OA,preventDefault:!0},{mac:"Cmd-ArrowRight",run:VA,shift:IA,preventDefault:!0},{key:"ArrowUp",run:by,shift:My,preventDefault:!0},{mac:"Cmd-ArrowUp",run:rm,shift:lm},{mac:"Ctrl-ArrowUp",run:sm,shift:im},{key:"ArrowDown",run:xy,shift:Dy,preventDefault:!0},{mac:"Cmd-ArrowDown",run:om,shift:am},{mac:"Ctrl-ArrowDown",run:dc,shift:nm},{key:"PageUp",run:sm,shift:im},{key:"PageDown",run:dc,shift:nm},{key:"Home",run:CA,shift:RA,preventDefault:!0},{key:"Mod-Home",run:rm,shift:lm},{key:"End",run:SA,shift:LA,preventDefault:!0},{key:"Mod-End",run:om,shift:am},{key:"Enter",run:um,shift:um},{key:"Mod-a",run:zA},{key:"Backspace",run:cc,shift:cc,preventDefault:!0},{key:"Delete",run:Oy,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:jy,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:GA,preventDefault:!0},{mac:"Mod-Backspace",run:YA,preventDefault:!0},{mac:"Mod-Delete",run:XA,preventDefault:!0}].concat(c8.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),h8=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:wA,shift:PA},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:_A,shift:jA},{key:"Alt-ArrowUp",run:e8},{key:"Shift-Alt-ArrowUp",run:s8},{key:"Alt-ArrowDown",run:t8},{key:"Shift-Alt-ArrowDown",run:i8},{key:"Mod-Alt-ArrowUp",run:WA},{key:"Mod-Alt-ArrowDown",run:qA},{key:"Escape",run:KA},{key:"Mod-Enter",run:o8},{key:"Alt-l",mac:"Ctrl-l",run:FA},{key:"Mod-i",run:HA,preventDefault:!0},{key:"Mod-[",run:u8},{key:"Mod-]",run:a8},{key:"Mod-Alt-\\",run:l8},{key:"Shift-Mod-k",run:n8},{key:"Shift-Mod-\\",run:$A},{key:"Mod-/",run:eA},{key:"Alt-A",run:sA},{key:"Ctrl-m",mac:"Shift-Alt-m",run:d8}].concat(f8),dm=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class _r{constructor(e,s,i=0,n=e.length,r,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,n),this.bufferStart=i,this.normalize=r?l=>r(dm(l)):dm,this.query=this.normalize(s)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return ms(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let s=Bc(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=fi(e);let n=this.normalize(s);if(n.length)for(let r=0,o=i;;r++){let l=n.charCodeAt(r),a=this.match(l,o,this.bufferPos+this.bufferStart);if(r==n.length-1){if(a)return this.value=a,this;break}o==i&&r<s.length&&s.charCodeAt(r)==l&&o++}}}match(e,s,i){let n=null;for(let r=0;r<this.matches.length;r+=2){let o=this.matches[r],l=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?n={from:this.matches[r+1],to:i}:(this.matches[r]++,l=!0)),l||(this.matches.splice(r,2),r-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?n={from:s,to:i}:this.matches.push(1,s)),n&&this.test&&!this.test(n.from,n.to,this.buffer,this.bufferStart)&&(n=null),n}}typeof Symbol<"u"&&(_r.prototype[Symbol.iterator]=function(){return this});const Iy={from:-1,to:-1,match:/.*/.exec("")},pf="gm"+(/x/.unicode==null?"":"u");class Ny{constructor(e,s,i,n=0,r=e.length){if(this.text=e,this.to=r,this.curLine="",this.done=!1,this.value=Iy,/\\[sWDnr]|\n|\r|\[\^/.test(s))return new Uy(e,s,i,n,r);this.re=new RegExp(s,pf+(i?.ignoreCase?"i":"")),this.test=i?.test,this.iter=e.iter();let o=e.lineAt(n);this.curLineStart=o.from,this.matchPos=_a(e,n),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let s=this.matchPos<=this.to&&this.re.exec(this.curLine);if(s){let i=this.curLineStart+s.index,n=i+s[0].length;if(this.matchPos=_a(this.text,n+(i==n?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<n||i>this.value.to)&&(!this.test||this.test(i,n,s)))return this.value={from:i,to:n,match:s},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const Gu=new WeakMap;class fr{constructor(e,s){this.from=e,this.text=s}get to(){return this.from+this.text.length}static get(e,s,i){let n=Gu.get(e);if(!n||n.from>=i||n.to<=s){let l=new fr(s,e.sliceString(s,i));return Gu.set(e,l),l}if(n.from==s&&n.to==i)return n;let{text:r,from:o}=n;return o>s&&(r=e.sliceString(s,o)+r,o=s),n.to<i&&(r+=e.sliceString(n.to,i)),Gu.set(e,new fr(o,r)),new fr(s,r.slice(s-o,i-o))}}class Uy{constructor(e,s,i,n,r){this.text=e,this.to=r,this.done=!1,this.value=Iy,this.matchPos=_a(e,n),this.re=new RegExp(s,pf+(i?.ignoreCase?"i":"")),this.test=i?.test,this.flat=fr.get(e,n,this.chunkEnd(n+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,s=this.re.exec(this.flat.text);if(s&&!s[0]&&s.index==e&&(this.re.lastIndex=e+1,s=this.re.exec(this.flat.text)),s){let i=this.flat.from+s.index,n=i+s[0].length;if((this.flat.to>=this.to||s.index+s[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,n,s)))return this.value={from:i,to:n,match:s},this.matchPos=_a(this.text,n+(i==n?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=fr.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(Ny.prototype[Symbol.iterator]=Uy.prototype[Symbol.iterator]=function(){return this});function p8(t){try{return new RegExp(t,pf),!0}catch{return!1}}function _a(t,e){if(e>=t.length)return e;let s=t.lineAt(e),i;for(;e<s.to&&(i=s.text.charCodeAt(e-s.from))>=56320&&i<57344;)e++;return e}function fc(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),s=ct("input",{class:"cm-textfield",name:"line",value:e}),i=ct("form",{class:"cm-gotoLine",onkeydown:r=>{r.keyCode==27?(r.preventDefault(),t.dispatch({effects:uo.of(!1)}),t.focus()):r.keyCode==13&&(r.preventDefault(),n())},onsubmit:r=>{r.preventDefault(),n()}},ct("label",t.state.phrase("Go to line"),": ",s)," ",ct("button",{class:"cm-button",type:"submit"},t.state.phrase("go")),ct("button",{name:"close",onclick:()=>{t.dispatch({effects:uo.of(!1)}),t.focus()},"aria-label":t.state.phrase("close"),type:"button"},[""]));function n(){let r=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(s.value);if(!r)return;let{state:o}=t,l=o.doc.lineAt(o.selection.main.head),[,a,d,u,f]=r,h=u?+u.slice(1):0,m=d?+d:l.number;if(d&&f){let C=m/100;a&&(C=C*(a=="-"?-1:1)+l.number/o.doc.lines),m=Math.round(o.doc.lines*C)}else d&&a&&(m=m*(a=="-"?-1:1)+l.number);let _=o.doc.line(Math.max(1,Math.min(o.doc.lines,m))),p=ue.cursor(_.from+Math.max(0,Math.min(h,_.length)));t.dispatch({effects:[uo.of(!1),$e.scrollIntoView(p.from,{y:"center"})],selection:p}),t.focus()}return{dom:i}}const uo=Ge.define(),cm=Gt.define({create(){return!0},update(t,e){for(let s of e.effects)s.is(uo)&&(t=s.value);return t},provide:t=>Do.from(t,e=>e?fc:null)}),m8=t=>{let e=Mo(t,fc);if(!e){let s=[uo.of(!0)];t.state.field(cm,!1)==null&&s.push(Ge.appendConfig.of([cm,g8])),t.dispatch({effects:s}),e=Mo(t,fc)}return e&&e.dom.querySelector("input").select(),!0},g8=$e.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),v8={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},y8=Ee.define({combine(t){return xi(t,v8,{highlightWordAroundCursor:(e,s)=>e||s,minSelectionLength:Math.min,maxMatches:Math.min})}});function b8(t){return[S8,_8]}const x8=Fe.mark({class:"cm-selectionMatch"}),k8=Fe.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function fm(t,e,s,i){return(s==0||t(e.sliceDoc(s-1,s))!=kt.Word)&&(i==e.doc.length||t(e.sliceDoc(i,i+1))!=kt.Word)}function w8(t,e,s,i){return t(e.sliceDoc(s,s+1))==kt.Word&&t(e.sliceDoc(i-1,i))==kt.Word}const _8=Et.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.selectionSet||t.docChanged||t.viewportChanged)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=t.state.facet(y8),{state:s}=t,i=s.selection;if(i.ranges.length>1)return Fe.none;let n=i.main,r,o=null;if(n.empty){if(!e.highlightWordAroundCursor)return Fe.none;let a=s.wordAt(n.head);if(!a)return Fe.none;o=s.charCategorizer(n.head),r=s.sliceDoc(a.from,a.to)}else{let a=n.to-n.from;if(a<e.minSelectionLength||a>200)return Fe.none;if(e.wholeWords){if(r=s.sliceDoc(n.from,n.to),o=s.charCategorizer(n.head),!(fm(o,s,n.from,n.to)&&w8(o,s,n.from,n.to)))return Fe.none}else if(r=s.sliceDoc(n.from,n.to),!r)return Fe.none}let l=[];for(let a of t.visibleRanges){let d=new _r(s.doc,r,a.from,a.to);for(;!d.next().done;){let{from:u,to:f}=d.value;if((!o||fm(o,s,u,f))&&(n.empty&&u<=n.from&&f>=n.to?l.push(k8.range(u,f)):(u>=n.to||f<=n.from)&&l.push(x8.range(u,f)),l.length>e.maxMatches))return Fe.none}}return Fe.set(l)}},{decorations:t=>t.decorations}),S8=$e.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),C8=({state:t,dispatch:e})=>{let{selection:s}=t,i=ue.create(s.ranges.map(n=>t.wordAt(n.head)||ue.cursor(n.head)),s.mainIndex);return i.eq(s)?!1:(e(t.update({selection:i})),!0)};function A8(t,e){let{main:s,ranges:i}=t.selection,n=t.wordAt(s.head),r=n&&n.from==s.from&&n.to==s.to;for(let o=!1,l=new _r(t.doc,e,i[i.length-1].to);;)if(l.next(),l.done){if(o)return null;l=new _r(t.doc,e,0,Math.max(0,i[i.length-1].from-1)),o=!0}else{if(o&&i.some(a=>a.from==l.value.from))continue;if(r){let a=t.wordAt(l.value.from);if(!a||a.from!=l.value.from||a.to!=l.value.to)continue}return l.value}}const V8=({state:t,dispatch:e})=>{let{ranges:s}=t.selection;if(s.some(r=>r.from===r.to))return C8({state:t,dispatch:e});let i=t.sliceDoc(s[0].from,s[0].to);if(t.selection.ranges.some(r=>t.sliceDoc(r.from,r.to)!=i))return!1;let n=A8(t,i);return n?(e(t.update({selection:t.selection.addRange(ue.range(n.from,n.to),!1),effects:$e.scrollIntoView(n.to)})),!0):!1},$r=Ee.define({combine(t){return xi(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new I8(e),scrollToMatch:e=>$e.scrollIntoView(e)})}});class zy{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||p8(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(s,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new $8(this):new D8(this)}getCursor(e,s=0,i){let n=e.doc?e:et.create({doc:e});return i==null&&(i=n.doc.length),this.regexp?Yn(this,n,s,i):Jn(this,n,s,i)}}class Fy{constructor(e){this.spec=e}}function Jn(t,e,s,i){return new _r(e.doc,t.unquoted,s,i,t.caseSensitive?void 0:n=>n.toLowerCase(),t.wholeWord?M8(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function M8(t,e){return(s,i,n,r)=>((r>s||r+n.length<i)&&(r=Math.max(0,s-2),n=t.sliceString(r,Math.min(t.length,i+2))),(e(Sa(n,s-r))!=kt.Word||e(Ca(n,s-r))!=kt.Word)&&(e(Ca(n,i-r))!=kt.Word||e(Sa(n,i-r))!=kt.Word))}class D8 extends Fy{constructor(e){super(e)}nextMatch(e,s,i){let n=Jn(this.spec,e,i,e.doc.length).nextOverlapping();if(n.done){let r=Math.min(e.doc.length,s+this.spec.unquoted.length);n=Jn(this.spec,e,0,r).nextOverlapping()}return n.done||n.value.from==s&&n.value.to==i?null:n.value}prevMatchInRange(e,s,i){for(let n=i;;){let r=Math.max(s,n-1e4-this.spec.unquoted.length),o=Jn(this.spec,e,r,n),l=null;for(;!o.nextOverlapping().done;)l=o.value;if(l)return l;if(r==s)return null;n-=1e4}}prevMatch(e,s,i){let n=this.prevMatchInRange(e,0,s);return n||(n=this.prevMatchInRange(e,Math.max(0,i-this.spec.unquoted.length),e.doc.length)),n&&(n.from!=s||n.to!=i)?n:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,s){let i=Jn(this.spec,e,0,e.doc.length),n=[];for(;!i.next().done;){if(n.length>=s)return null;n.push(i.value)}return n}highlight(e,s,i,n){let r=Jn(this.spec,e,Math.max(0,s-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!r.next().done;)n(r.value.from,r.value.to)}}function Yn(t,e,s,i){return new Ny(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?T8(e.charCategorizer(e.selection.main.head)):void 0},s,i)}function Sa(t,e){return t.slice(Kt(t,e,!1),e)}function Ca(t,e){return t.slice(e,Kt(t,e))}function T8(t){return(e,s,i)=>!i[0].length||(t(Sa(i.input,i.index))!=kt.Word||t(Ca(i.input,i.index))!=kt.Word)&&(t(Ca(i.input,i.index+i[0].length))!=kt.Word||t(Sa(i.input,i.index+i[0].length))!=kt.Word)}class $8 extends Fy{nextMatch(e,s,i){let n=Yn(this.spec,e,i,e.doc.length).next();return n.done&&(n=Yn(this.spec,e,0,s).next()),n.done?null:n.value}prevMatchInRange(e,s,i){for(let n=1;;n++){let r=Math.max(s,i-n*1e4),o=Yn(this.spec,e,r,i),l=null;for(;!o.next().done;)l=o.value;if(l&&(r==s||l.from>r+10))return l;if(r==s)return null}}prevMatch(e,s,i){return this.prevMatchInRange(e,0,s)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(s,i)=>{if(i=="&")return e.match[0];if(i=="$")return"$";for(let n=i.length;n>0;n--){let r=+i.slice(0,n);if(r>0&&r<e.match.length)return e.match[r]+i.slice(n)}return s})}matchAll(e,s){let i=Yn(this.spec,e,0,e.doc.length),n=[];for(;!i.next().done;){if(n.length>=s)return null;n.push(i.value)}return n}highlight(e,s,i,n){let r=Yn(this.spec,e,Math.max(0,s-250),Math.min(i+250,e.doc.length));for(;!r.next().done;)n(r.value.from,r.value.to)}}const Po=Ge.define(),mf=Ge.define(),en=Gt.define({create(t){return new Ju(hc(t).create(),null)},update(t,e){for(let s of e.effects)s.is(Po)?t=new Ju(s.value.create(),t.panel):s.is(mf)&&(t=new Ju(t.query,s.value?gf:null));return t},provide:t=>Do.from(t,e=>e.panel)});class Ju{constructor(e,s){this.query=e,this.panel=s}}const E8=Fe.mark({class:"cm-searchMatch"}),O8=Fe.mark({class:"cm-searchMatch cm-searchMatch-selected"}),P8=Et.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(en))}update(t){let e=t.state.field(en);(e!=t.startState.field(en)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return Fe.none;let{view:s}=this,i=new Pi;for(let n=0,r=s.visibleRanges,o=r.length;n<o;n++){let{from:l,to:a}=r[n];for(;n<o-1&&a>r[n+1].from-500;)a=r[++n].to;t.highlight(s.state,l,a,(d,u)=>{let f=s.state.selection.ranges.some(h=>h.from==d&&h.to==u);i.add(d,u,f?O8:E8)})}return i.finish()}},{decorations:t=>t.decorations});function Jo(t){return e=>{let s=e.state.field(en,!1);return s&&s.query.spec.valid?t(e,s):qy(e)}}const Aa=Jo((t,{query:e})=>{let{to:s}=t.state.selection.main,i=e.nextMatch(t.state,s,s);if(!i)return!1;let n=ue.single(i.from,i.to),r=t.state.facet($r);return t.dispatch({selection:n,effects:[vf(t,i),r.scrollToMatch(n.main,t)],userEvent:"select.search"}),Wy(t),!0}),Va=Jo((t,{query:e})=>{let{state:s}=t,{from:i}=s.selection.main,n=e.prevMatch(s,i,i);if(!n)return!1;let r=ue.single(n.from,n.to),o=t.state.facet($r);return t.dispatch({selection:r,effects:[vf(t,n),o.scrollToMatch(r.main,t)],userEvent:"select.search"}),Wy(t),!0}),j8=Jo((t,{query:e})=>{let s=e.matchAll(t.state,1e3);return!s||!s.length?!1:(t.dispatch({selection:ue.create(s.map(i=>ue.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),L8=({state:t,dispatch:e})=>{let s=t.selection;if(s.ranges.length>1||s.main.empty)return!1;let{from:i,to:n}=s.main,r=[],o=0;for(let l=new _r(t.doc,t.sliceDoc(i,n));!l.next().done;){if(r.length>1e3)return!1;l.value.from==i&&(o=r.length),r.push(ue.range(l.value.from,l.value.to))}return e(t.update({selection:ue.create(r,o),userEvent:"select.search.matches"})),!0},hm=Jo((t,{query:e})=>{let{state:s}=t,{from:i,to:n}=s.selection.main;if(s.readOnly)return!1;let r=e.nextMatch(s,i,i);if(!r)return!1;let o=r,l=[],a,d,u=[];o.from==i&&o.to==n&&(d=s.toText(e.getReplacement(o)),l.push({from:o.from,to:o.to,insert:d}),o=e.nextMatch(s,o.from,o.to),u.push($e.announce.of(s.phrase("replaced match on line $",s.doc.lineAt(i).number)+".")));let f=t.state.changes(l);return o&&(a=ue.single(o.from,o.to).map(f),u.push(vf(t,o)),u.push(s.facet($r).scrollToMatch(a.main,t))),t.dispatch({changes:f,selection:a,effects:u,userEvent:"input.replace"}),!0}),R8=Jo((t,{query:e})=>{if(t.state.readOnly)return!1;let s=e.matchAll(t.state,1e9).map(n=>{let{from:r,to:o}=n;return{from:r,to:o,insert:e.getReplacement(n)}});if(!s.length)return!1;let i=t.state.phrase("replaced $ matches",s.length)+".";return t.dispatch({changes:s,effects:$e.announce.of(i),userEvent:"input.replace.all"}),!0});function gf(t){return t.state.facet($r).createPanel(t)}function hc(t,e){var s,i,n,r,o;let l=t.selection.main,a=l.empty||l.to>l.from+100?"":t.sliceDoc(l.from,l.to);if(e&&!a)return e;let d=t.facet($r);return new zy({search:((s=e?.literal)!==null&&s!==void 0?s:d.literal)?a:a.replace(/\n/g,"\\n"),caseSensitive:(i=e?.caseSensitive)!==null&&i!==void 0?i:d.caseSensitive,literal:(n=e?.literal)!==null&&n!==void 0?n:d.literal,regexp:(r=e?.regexp)!==null&&r!==void 0?r:d.regexp,wholeWord:(o=e?.wholeWord)!==null&&o!==void 0?o:d.wholeWord})}function Hy(t){let e=Mo(t,gf);return e&&e.dom.querySelector("[main-field]")}function Wy(t){let e=Hy(t);e&&e==t.root.activeElement&&e.select()}const qy=t=>{let e=t.state.field(en,!1);if(e&&e.panel){let s=Hy(t);if(s&&s!=t.root.activeElement){let i=hc(t.state,e.query.spec);i.valid&&t.dispatch({effects:Po.of(i)}),s.focus(),s.select()}}else t.dispatch({effects:[mf.of(!0),e?Po.of(hc(t.state,e.query.spec)):Ge.appendConfig.of(U8)]});return!0},Ky=t=>{let e=t.state.field(en,!1);if(!e||!e.panel)return!1;let s=Mo(t,gf);return s&&s.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:mf.of(!1)}),!0},B8=[{key:"Mod-f",run:qy,scope:"editor search-panel"},{key:"F3",run:Aa,shift:Va,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Aa,shift:Va,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Ky,scope:"editor search-panel"},{key:"Mod-Shift-l",run:L8},{key:"Mod-Alt-g",run:m8},{key:"Mod-d",run:V8,preventDefault:!0}];class I8{constructor(e){this.view=e;let s=this.query=e.state.field(en).query.spec;this.commit=this.commit.bind(this),this.searchField=ct("input",{value:s.search,placeholder:ks(e,"Find"),"aria-label":ks(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=ct("input",{value:s.replace,placeholder:ks(e,"Replace"),"aria-label":ks(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=ct("input",{type:"checkbox",name:"case",form:"",checked:s.caseSensitive,onchange:this.commit}),this.reField=ct("input",{type:"checkbox",name:"re",form:"",checked:s.regexp,onchange:this.commit}),this.wordField=ct("input",{type:"checkbox",name:"word",form:"",checked:s.wholeWord,onchange:this.commit});function i(n,r,o){return ct("button",{class:"cm-button",name:n,onclick:r,type:"button"},o)}this.dom=ct("div",{onkeydown:n=>this.keydown(n),class:"cm-search"},[this.searchField,i("next",()=>Aa(e),[ks(e,"next")]),i("prev",()=>Va(e),[ks(e,"previous")]),i("select",()=>j8(e),[ks(e,"all")]),ct("label",null,[this.caseField,ks(e,"match case")]),ct("label",null,[this.reField,ks(e,"regexp")]),ct("label",null,[this.wordField,ks(e,"by word")]),...e.state.readOnly?[]:[ct("br"),this.replaceField,i("replace",()=>hm(e),[ks(e,"replace")]),i("replaceAll",()=>R8(e),[ks(e,"replace all")])],ct("button",{name:"close",onclick:()=>Ky(e),"aria-label":ks(e,"close"),type:"button"},[""])])}commit(){let e=new zy({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Po.of(e)}))}keydown(e){UC(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Va:Aa)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),hm(this.view))}update(e){for(let s of e.transactions)for(let i of s.effects)i.is(Po)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet($r).top}}function ks(t,e){return t.state.phrase(e)}const Ol=30,Pl=/[\s\.,:;?!]/;function vf(t,{from:e,to:s}){let i=t.state.doc.lineAt(e),n=t.state.doc.lineAt(s).to,r=Math.max(i.from,e-Ol),o=Math.min(n,s+Ol),l=t.state.sliceDoc(r,o);if(r!=i.from){for(let a=0;a<Ol;a++)if(!Pl.test(l[a+1])&&Pl.test(l[a])){l=l.slice(a);break}}if(o!=n){for(let a=l.length-1;a>l.length-Ol;a--)if(!Pl.test(l[a-1])&&Pl.test(l[a])){l=l.slice(0,a);break}}return $e.announce.of(`${t.state.phrase("current match")}. ${l} ${t.state.phrase("on line")} ${i.number}.`)}const N8=$e.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),U8=[en,Un.low(P8),N8];class Gy{constructor(e,s,i,n){this.state=e,this.pos=s,this.explicit=i,this.view=n,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let s=is(this.state).resolveInner(this.pos,-1);for(;s&&e.indexOf(s.name)<0;)s=s.parent;return s?{from:s.from,to:this.pos,text:this.state.sliceDoc(s.from,this.pos),type:s.type}:null}matchBefore(e){let s=this.state.doc.lineAt(this.pos),i=Math.max(s.from,this.pos-250),n=s.text.slice(i-s.from,this.pos-s.from),r=n.search(Jy(e,!1));return r<0?null:{from:i+r,to:this.pos,text:n.slice(r)}}get aborted(){return this.abortListeners==null}addEventListener(e,s,i){e=="abort"&&this.abortListeners&&(this.abortListeners.push(s),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function pm(t){let e=Object.keys(t).join(""),s=/\w/.test(e);return s&&(e=e.replace(/\w/g,"")),`[${s?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function z8(t){let e=Object.create(null),s=Object.create(null);for(let{label:n}of t){e[n[0]]=!0;for(let r=1;r<n.length;r++)s[n[r]]=!0}let i=pm(e)+pm(s)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function F8(t){let e=t.map(n=>typeof n=="string"?{label:n}:n),[s,i]=e.every(n=>/^\w+$/.test(n.label))?[/\w*$/,/\w+$/]:z8(e);return n=>{let r=n.matchBefore(i);return r||n.explicit?{from:r?r.from:n.pos,options:e,validFor:s}:null}}class mm{constructor(e,s,i,n){this.completion=e,this.source=s,this.match=i,this.score=n}}function En(t){return t.selection.main.from}function Jy(t,e){var s;let{source:i}=t,n=e&&i[0]!="^",r=i[i.length-1]!="$";return!n&&!r?t:new RegExp(`${n?"^":""}(?:${i})${r?"$":""}`,(s=t.flags)!==null&&s!==void 0?s:t.ignoreCase?"i":"")}const Yy=Bi.define();function H8(t,e,s,i){let{main:n}=t.selection,r=s-n.from,o=i-n.from;return{...t.changeByRange(l=>{if(l!=n&&s!=i&&t.sliceDoc(l.from+r,l.from+o)!=t.sliceDoc(s,i))return{range:l};let a=t.toText(e);return{changes:{from:l.from+r,to:i==n.from?l.to:l.from+o,insert:a},range:ue.cursor(l.from+r+a.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}const gm=new WeakMap;function W8(t){if(!Array.isArray(t))return t;let e=gm.get(t);return e||gm.set(t,e=F8(t)),e}const Ma=Ge.define(),jo=Ge.define();class q8{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let s=0;s<e.length;){let i=ms(e,s),n=fi(i);this.chars.push(i);let r=e.slice(s,s+n),o=r.toUpperCase();this.folded.push(ms(o==r?r.toLowerCase():o,0)),s+=n}this.astral=e.length!=this.chars.length}ret(e,s){return this.score=e,this.matched=s,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:s,folded:i,any:n,precise:r,byWord:o}=this;if(s.length==1){let U=ms(e,0),B=fi(U),F=B==e.length?0:-100;if(U!=s[0])if(U==i[0])F+=-200;else return null;return this.ret(F,[0,B])}let l=e.indexOf(this.pattern);if(l==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let a=s.length,d=0;if(l<0){for(let U=0,B=Math.min(e.length,200);U<B&&d<a;){let F=ms(e,U);(F==s[d]||F==i[d])&&(n[d++]=U),U+=fi(F)}if(d<a)return null}let u=0,f=0,h=!1,m=0,_=-1,p=-1,C=/[a-z]/.test(e),M=!0;for(let U=0,B=Math.min(e.length,200),F=0;U<B&&f<a;){let j=ms(e,U);l<0&&(u<a&&j==s[u]&&(r[u++]=U),m<a&&(j==s[m]||j==i[m]?(m==0&&(_=U),p=U+1,m++):m=0));let T,A=j<255?j>=48&&j<=57||j>=97&&j<=122?2:j>=65&&j<=90?1:0:(T=Bc(j))!=T.toLowerCase()?1:T!=T.toUpperCase()?2:0;(!U||A==1&&C||F==0&&A!=0)&&(s[f]==j||i[f]==j&&(h=!0)?o[f++]=U:o.length&&(M=!1)),F=A,U+=fi(j)}return f==a&&o[0]==0&&M?this.result(-100+(h?-200:0),o,e):m==a&&_==0?this.ret(-200-e.length+(p==e.length?0:-100),[0,p]):l>-1?this.ret(-700-e.length,[l,l+this.pattern.length]):m==a?this.ret(-900-e.length,[_,p]):f==a?this.result(-100+(h?-200:0)+-700+(M?0:-1100),o,e):s.length==2?null:this.result((n[0]?-700:0)+-200+-1100,n,e)}result(e,s,i){let n=[],r=0;for(let o of s){let l=o+(this.astral?fi(ms(i,o)):1);r&&n[r-1]==o?n[r-1]=l:(n[r++]=o,n[r++]=l)}return this.ret(e-i.length,n)}}class K8{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let s=e.slice(0,this.pattern.length),i=s==this.pattern?0:s.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,s.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const It=Ee.define({combine(t){return xi(t,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:G8,filterStrict:!1,compareCompletions:(e,s)=>e.label.localeCompare(s.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,s)=>e&&s,closeOnBlur:(e,s)=>e&&s,icons:(e,s)=>e&&s,tooltipClass:(e,s)=>i=>vm(e(i),s(i)),optionClass:(e,s)=>i=>vm(e(i),s(i)),addToOptions:(e,s)=>e.concat(s),filterStrict:(e,s)=>e||s})}});function vm(t,e){return t?e?t+" "+e:t:e}function G8(t,e,s,i,n,r){let o=t.textDirection==bt.RTL,l=o,a=!1,d="top",u,f,h=e.left-n.left,m=n.right-e.right,_=i.right-i.left,p=i.bottom-i.top;if(l&&h<Math.min(_,m)?l=!1:!l&&m<Math.min(_,h)&&(l=!0),_<=(l?h:m))u=Math.max(n.top,Math.min(s.top,n.bottom-p))-e.top,f=Math.min(400,l?h:m);else{a=!0,f=Math.min(400,(o?e.right:n.right-e.left)-30);let U=n.bottom-e.bottom;U>=p||U>e.top?u=s.bottom-e.top:(d="bottom",u=e.bottom-s.top)}let C=(e.bottom-e.top)/r.offsetHeight,M=(e.right-e.left)/r.offsetWidth;return{style:`${d}: ${u/C}px; max-width: ${f/M}px`,class:"cm-completionInfo-"+(a?o?"left-narrow":"right-narrow":l?"left":"right")}}function J8(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(s){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),s.type&&i.classList.add(...s.type.split(/\s+/g).map(n=>"cm-completionIcon-"+n)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(s,i,n,r){let o=document.createElement("span");o.className="cm-completionLabel";let l=s.displayLabel||s.label,a=0;for(let d=0;d<r.length;){let u=r[d++],f=r[d++];u>a&&o.appendChild(document.createTextNode(l.slice(a,u)));let h=o.appendChild(document.createElement("span"));h.appendChild(document.createTextNode(l.slice(u,f))),h.className="cm-completionMatchedText",a=f}return a<l.length&&o.appendChild(document.createTextNode(l.slice(a))),o},position:50},{render(s){if(!s.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=s.detail,i},position:80}),e.sort((s,i)=>s.position-i.position).map(s=>s.render)}function Yu(t,e,s){if(t<=s)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let n=Math.floor(e/s);return{from:n*s,to:(n+1)*s}}let i=Math.floor((t-e)/s);return{from:t-(i+1)*s,to:t-i*s}}class Y8{constructor(e,s,i){this.view=e,this.stateField=s,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:a=>this.placeInfo(a),key:this},this.space=null,this.currentClass="";let n=e.state.field(s),{options:r,selected:o}=n.open,l=e.state.facet(It);this.optionContent=J8(l),this.optionClass=l.optionClass,this.tooltipClass=l.tooltipClass,this.range=Yu(r.length,o,l.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",a=>{let{options:d}=e.state.field(s).open;for(let u=a.target,f;u&&u!=this.dom;u=u.parentNode)if(u.nodeName=="LI"&&(f=/-(\d+)$/.exec(u.id))&&+f[1]<d.length){this.applyCompletion(e,d[+f[1]]),a.preventDefault();return}}),this.dom.addEventListener("focusout",a=>{let d=e.state.field(this.stateField,!1);d&&d.tooltip&&e.state.facet(It).closeOnBlur&&a.relatedTarget!=e.contentDOM&&e.dispatch({effects:jo.of(null)})}),this.showOptions(r,n.id)}mount(){this.updateSel()}showOptions(e,s){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,s,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var s;let i=e.state.field(this.stateField),n=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=n){let{options:r,selected:o,disabled:l}=i.open;(!n.open||n.open.options!=r)&&(this.range=Yu(r.length,o,e.state.facet(It).maxRenderedOptions),this.showOptions(r,i.id)),this.updateSel(),l!=((s=n.open)===null||s===void 0?void 0:s.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!l)}}updateTooltipClass(e){let s=this.tooltipClass(e);if(s!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of s.split(" "))i&&this.dom.classList.add(i);this.currentClass=s}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),s=e.open;(s.selected>-1&&s.selected<this.range.from||s.selected>=this.range.to)&&(this.range=Yu(s.options.length,s.selected,this.view.state.facet(It).maxRenderedOptions),this.showOptions(s.options,e.id));let i=this.updateSelectedOption(s.selected);if(i){this.destroyInfo();let{completion:n}=s.options[s.selected],{info:r}=n;if(!r)return;let o=typeof r=="string"?document.createTextNode(r):r(n);if(!o)return;"then"in o?o.then(l=>{l&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(l,n)}).catch(l=>vs(this.view.state,l,"completion info")):(this.addInfoPane(o,n),i.setAttribute("aria-describedby",this.info.id))}}addInfoPane(e,s){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",i.id="cm-completionInfo-"+Math.floor(Math.random()*65535).toString(16),e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:n,destroy:r}=e;i.appendChild(n),this.infoDestroy=r||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let s=null;for(let i=this.list.firstChild,n=this.range.from;i;i=i.nextSibling,n++)i.nodeName!="LI"||!i.id?n--:n==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),s=i):i.hasAttribute("aria-selected")&&(i.removeAttribute("aria-selected"),i.removeAttribute("aria-describedby"));return s&&Z8(this.list,s),s}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let s=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),n=e.getBoundingClientRect(),r=this.space;if(!r){let o=this.dom.ownerDocument.documentElement;r={left:0,top:0,right:o.clientWidth,bottom:o.clientHeight}}return n.top>Math.min(r.bottom,s.bottom)-10||n.bottom<Math.max(r.top,s.top)+10?null:this.view.state.facet(It).positionInfo(this.view,s,n,i,r,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,s,i){const n=document.createElement("ul");n.id=s,n.setAttribute("role","listbox"),n.setAttribute("aria-expanded","true"),n.setAttribute("aria-label",this.view.state.phrase("Completions")),n.addEventListener("mousedown",o=>{o.target==n&&o.preventDefault()});let r=null;for(let o=i.from;o<i.to;o++){let{completion:l,match:a}=e[o],{section:d}=l;if(d){let h=typeof d=="string"?d:d.name;if(h!=r&&(o>i.from||i.from==0))if(r=h,typeof d!="string"&&d.header)n.appendChild(d.header(d));else{let m=n.appendChild(document.createElement("completion-section"));m.textContent=h}}const u=n.appendChild(document.createElement("li"));u.id=s+"-"+o,u.setAttribute("role","option");let f=this.optionClass(l);f&&(u.className=f);for(let h of this.optionContent){let m=h(l,this.view.state,this.view,a);m&&u.appendChild(m)}}return i.from&&n.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&n.classList.add("cm-completionListIncompleteBottom"),n}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function X8(t,e){return s=>new Y8(s,t,e)}function Z8(t,e){let s=t.getBoundingClientRect(),i=e.getBoundingClientRect(),n=s.height/t.offsetHeight;i.top<s.top?t.scrollTop-=(s.top-i.top)/n:i.bottom>s.bottom&&(t.scrollTop+=(i.bottom-s.bottom)/n)}function ym(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function Q8(t,e){let s=[],i=null,n=null,r=u=>{s.push(u);let{section:f}=u.completion;if(f){i||(i=[]);let h=typeof f=="string"?f:f.name;i.some(m=>m.name==h)||i.push(typeof f=="string"?{name:h}:f)}},o=e.facet(It);for(let u of t)if(u.hasResult()){let f=u.result.getMatch;if(u.result.filter===!1)for(let h of u.result.options)r(new mm(h,u.source,f?f(h):[],1e9-s.length));else{let h=e.sliceDoc(u.from,u.to),m,_=o.filterStrict?new K8(h):new q8(h);for(let p of u.result.options)if(m=_.match(p.label)){let C=p.displayLabel?f?f(p,m.matched):[]:m.matched,M=m.score+(p.boost||0);if(r(new mm(p,u.source,C,M)),typeof p.section=="object"&&p.section.rank==="dynamic"){let{name:U}=p.section;n||(n=Object.create(null)),n[U]=Math.max(M,n[U]||-1e9)}}}}if(i){let u=Object.create(null),f=0,h=(m,_)=>(m.rank==="dynamic"&&_.rank==="dynamic"?n[_.name]-n[m.name]:0)||(typeof m.rank=="number"?m.rank:1e9)-(typeof _.rank=="number"?_.rank:1e9)||(m.name<_.name?-1:1);for(let m of i.sort(h))f-=1e5,u[m.name]=f;for(let m of s){let{section:_}=m.completion;_&&(m.score+=u[typeof _=="string"?_:_.name])}}let l=[],a=null,d=o.compareCompletions;for(let u of s.sort((f,h)=>h.score-f.score||d(f.completion,h.completion))){let f=u.completion;!a||a.label!=f.label||a.detail!=f.detail||a.type!=null&&f.type!=null&&a.type!=f.type||a.apply!=f.apply||a.boost!=f.boost?l.push(u):ym(u.completion)>ym(a)&&(l[l.length-1]=u),a=u.completion}return l}class er{constructor(e,s,i,n,r,o){this.options=e,this.attrs=s,this.tooltip=i,this.timestamp=n,this.selected=r,this.disabled=o}setSelected(e,s){return e==this.selected||e>=this.options.length?this:new er(this.options,bm(s,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,s,i,n,r,o){if(n&&!o&&e.some(d=>d.isPending))return n.setDisabled();let l=Q8(e,s);if(!l.length)return n&&e.some(d=>d.isPending)?n.setDisabled():null;let a=s.facet(It).selectOnOpen?0:-1;if(n&&n.selected!=a&&n.selected!=-1){let d=n.options[n.selected].completion;for(let u=0;u<l.length;u++)if(l[u].completion==d){a=u;break}}return new er(l,bm(i,a),{pos:e.reduce((d,u)=>u.hasResult()?Math.min(d,u.from):d,1e8),create:r6,above:r.aboveCursor},n?n.timestamp:Date.now(),a,!1)}map(e){return new er(this.options,this.attrs,{...this.tooltip,pos:e.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new er(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class Da{constructor(e,s,i){this.active=e,this.id=s,this.open=i}static start(){return new Da(i6,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:s}=e,i=s.facet(It),r=(i.override||s.languageDataAt("autocomplete",En(s)).map(W8)).map(a=>(this.active.find(u=>u.source==a)||new Rs(a,this.active.some(u=>u.state!=0)?1:0)).update(e,i));r.length==this.active.length&&r.every((a,d)=>a==this.active[d])&&(r=this.active);let o=this.open,l=e.effects.some(a=>a.is(yf));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||r.some(a=>a.hasResult()&&e.changes.touchesRange(a.from,a.to))||!e6(r,this.active)||l?o=er.build(r,s,this.id,o,i,l):o&&o.disabled&&!r.some(a=>a.isPending)&&(o=null),!o&&r.every(a=>!a.isPending)&&r.some(a=>a.hasResult())&&(r=r.map(a=>a.hasResult()?new Rs(a.source,0):a));for(let a of e.effects)a.is(Zy)&&(o=o&&o.setSelected(a.value,this.id));return r==this.active&&o==this.open?this:new Da(r,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?t6:s6}}function e6(t,e){if(t==e)return!0;for(let s=0,i=0;;){for(;s<t.length&&!t[s].hasResult();)s++;for(;i<e.length&&!e[i].hasResult();)i++;let n=s==t.length,r=i==e.length;if(n||r)return n==r;if(t[s++].result!=e[i++].result)return!1}}const t6={"aria-autocomplete":"list"},s6={};function bm(t,e){let s={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(s["aria-activedescendant"]=t+"-"+e),s}const i6=[];function Xy(t,e){if(t.isUserEvent("input.complete")){let i=t.annotation(Yy);if(i&&e.activateOnCompletion(i))return 12}let s=t.isUserEvent("input.type");return s&&e.activateOnTyping?5:s?1:t.isUserEvent("delete.backward")?2:t.selection?8:t.docChanged?16:0}class Rs{constructor(e,s,i=!1){this.source=e,this.state=s,this.explicit=i}hasResult(){return!1}get isPending(){return this.state==1}update(e,s){let i=Xy(e,s),n=this;(i&8||i&16&&this.touches(e))&&(n=new Rs(n.source,0)),i&4&&n.state==0&&(n=new Rs(this.source,1)),n=n.updateFor(e,i);for(let r of e.effects)if(r.is(Ma))n=new Rs(n.source,1,r.value);else if(r.is(jo))n=new Rs(n.source,0);else if(r.is(yf))for(let o of r.value)o.source==n.source&&(n=o);return n}updateFor(e,s){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(En(e.state))}}class hr extends Rs{constructor(e,s,i,n,r,o){super(e,3,s),this.limit=i,this.result=n,this.from=r,this.to=o}hasResult(){return!0}updateFor(e,s){var i;if(!(s&3))return this.map(e.changes);let n=this.result;n.map&&!e.changes.empty&&(n=n.map(n,e.changes));let r=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),l=En(e.state);if(l>o||!n||s&2&&(En(e.startState)==this.from||l<this.limit))return new Rs(this.source,s&4?1:0);let a=e.changes.mapPos(this.limit);return n6(n.validFor,e.state,r,o)?new hr(this.source,this.explicit,a,n,r,o):n.update&&(n=n.update(n,r,o,new Gy(e.state,l,!1)))?new hr(this.source,this.explicit,a,n,n.from,(i=n.to)!==null&&i!==void 0?i:En(e.state)):new Rs(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new hr(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new Rs(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function n6(t,e,s,i){if(!t)return!1;let n=e.sliceDoc(s,i);return typeof t=="function"?t(n,s,i,e):Jy(t,!0).test(n)}const yf=Ge.define({map(t,e){return t.map(s=>s.map(e))}}),Zy=Ge.define(),gs=Gt.define({create(){return Da.start()},update(t,e){return t.update(e)},provide:t=>[Qc.from(t,e=>e.tooltip),$e.contentAttributes.from(t,e=>e.attrs)]});function bf(t,e){const s=e.completion.apply||e.completion.label;let i=t.state.field(gs).active.find(n=>n.source==e.source);return i instanceof hr?(typeof s=="string"?t.dispatch({...H8(t.state,s,i.from,i.to),annotations:Yy.of(e.completion)}):s(t,e.completion,i.from,i.to),!0):!1}const r6=X8(gs,bf);function jl(t,e="option"){return s=>{let i=s.state.field(gs,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<s.state.facet(It).interactionDelay)return!1;let n=1,r;e=="page"&&(r=$v(s,i.open.tooltip))&&(n=Math.max(2,Math.floor(r.dom.offsetHeight/r.dom.querySelector("li").offsetHeight)-1));let{length:o}=i.open.options,l=i.open.selected>-1?i.open.selected+n*(t?1:-1):t?0:o-1;return l<0?l=e=="page"?0:o-1:l>=o&&(l=e=="page"?o-1:0),s.dispatch({effects:Zy.of(l)}),!0}}const o6=t=>{let e=t.state.field(gs,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(It).interactionDelay?!1:bf(t,e.open.options[e.open.selected])},Xu=t=>t.state.field(gs,!1)?(t.dispatch({effects:Ma.of(!0)}),!0):!1,l6=t=>{let e=t.state.field(gs,!1);return!e||!e.active.some(s=>s.state!=0)?!1:(t.dispatch({effects:jo.of(null)}),!0)};class a6{constructor(e,s){this.active=e,this.context=s,this.time=Date.now(),this.updates=[],this.done=void 0}}const u6=50,d6=1e3,c6=Et.fromClass(class{constructor(t){this.view=t,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of t.state.field(gs).active)e.isPending&&this.startQuery(e)}update(t){let e=t.state.field(gs),s=t.state.facet(It);if(!t.selectionSet&&!t.docChanged&&t.startState.field(gs)==e)return;let i=t.transactions.some(r=>{let o=Xy(r,s);return o&8||(r.selection||r.docChanged)&&!(o&3)});for(let r=0;r<this.running.length;r++){let o=this.running[r];if(i||o.context.abortOnDocChange&&t.docChanged||o.updates.length+t.transactions.length>u6&&Date.now()-o.time>d6){for(let l of o.context.abortListeners)try{l()}catch(a){vs(this.view.state,a)}o.context.abortListeners=null,this.running.splice(r--,1)}else o.updates.push(...t.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),t.transactions.some(r=>r.effects.some(o=>o.is(Ma)))&&(this.pendingStart=!0);let n=this.pendingStart?50:s.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(r=>r.isPending&&!this.running.some(o=>o.active.source==r.source))?setTimeout(()=>this.startUpdate(),n):-1,this.composing!=0)for(let r of t.transactions)r.isUserEvent("input.type")?this.composing=2:this.composing==2&&r.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:t}=this.view,e=t.field(gs);for(let s of e.active)s.isPending&&!this.running.some(i=>i.active.source==s.source)&&this.startQuery(s);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(It).updateSyncTime))}startQuery(t){let{state:e}=this.view,s=En(e),i=new Gy(e,s,t.explicit,this.view),n=new a6(t,i);this.running.push(n),Promise.resolve(t.source(i)).then(r=>{n.context.aborted||(n.done=r||null,this.scheduleAccept())},r=>{this.view.dispatch({effects:jo.of(null)}),vs(this.view.state,r)})}scheduleAccept(){this.running.every(t=>t.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(It).updateSyncTime))}accept(){var t;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],s=this.view.state.facet(It),i=this.view.state.field(gs);for(let n=0;n<this.running.length;n++){let r=this.running[n];if(r.done===void 0)continue;if(this.running.splice(n--,1),r.done){let l=En(r.updates.length?r.updates[0].startState:this.view.state),a=Math.min(l,r.done.from+(r.active.explicit?0:1)),d=new hr(r.active.source,r.active.explicit,a,r.done,r.done.from,(t=r.done.to)!==null&&t!==void 0?t:l);for(let u of r.updates)d=d.update(u,s);if(d.hasResult()){e.push(d);continue}}let o=i.active.find(l=>l.source==r.active.source);if(o&&o.isPending)if(r.done==null){let l=new Rs(r.active.source,0);for(let a of r.updates)l=l.update(a,s);l.isPending||e.push(l)}else this.startQuery(o)}(e.length||i.open&&i.open.disabled)&&this.view.dispatch({effects:yf.of(e)})}},{eventHandlers:{blur(t){let e=this.view.state.field(gs,!1);if(e&&e.tooltip&&this.view.state.facet(It).closeOnBlur){let s=e.open&&$v(this.view,e.open.tooltip);(!s||!s.dom.contains(t.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:jo.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Ma.of(!1)}),20),this.composing=0}}}),f6=typeof navigator=="object"&&/Win/.test(navigator.platform),h6=Un.highest($e.domEventHandlers({keydown(t,e){let s=e.state.field(gs,!1);if(!s||!s.open||s.open.disabled||s.open.selected<0||t.key.length>1||t.ctrlKey&&!(f6&&t.altKey)||t.metaKey)return!1;let i=s.open.options[s.open.selected],n=s.active.find(o=>o.source==i.source),r=i.completion.commitCharacters||n.result.commitCharacters;return r&&r.indexOf(t.key)>-1&&bf(e,i),!1}})),p6=$e.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),Lo={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Vn=Ge.define({map(t,e){let s=e.mapPos(t,-1,cs.TrackAfter);return s??void 0}}),xf=new class extends Pn{};xf.startSide=1;xf.endSide=-1;const Qy=Gt.define({create(){return tt.empty},update(t,e){if(t=t.map(e.changes),e.selection){let s=e.state.doc.lineAt(e.selection.main.head);t=t.update({filter:i=>i>=s.from&&i<=s.to})}for(let s of e.effects)s.is(Vn)&&(t=t.update({add:[xf.range(s.value,s.value+1)]}));return t}});function m6(){return[v6,Qy]}const Zu="()[]{}<>";function e1(t){for(let e=0;e<Zu.length;e+=2)if(Zu.charCodeAt(e)==t)return Zu.charAt(e+1);return Bc(t<128?t:t+1)}function t1(t,e){return t.languageDataAt("closeBrackets",e)[0]||Lo}const g6=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),v6=$e.inputHandler.of((t,e,s,i)=>{if((g6?t.composing:t.compositionStarted)||t.state.readOnly)return!1;let n=t.state.selection.main;if(i.length>2||i.length==2&&fi(ms(i,0))==1||e!=n.from||s!=n.to)return!1;let r=x6(t.state,i);return r?(t.dispatch(r),!0):!1}),y6=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let i=t1(t,t.selection.main.head).brackets||Lo.brackets,n=null,r=t.changeByRange(o=>{if(o.empty){let l=k6(t.doc,o.head);for(let a of i)if(a==l&&ru(t.doc,o.head)==e1(ms(a,0)))return{changes:{from:o.head-a.length,to:o.head+a.length},range:ue.cursor(o.head-a.length)}}return{range:n=o}});return n||e(t.update(r,{scrollIntoView:!0,userEvent:"delete.backward"})),!n},b6=[{key:"Backspace",run:y6}];function x6(t,e){let s=t1(t,t.selection.main.head),i=s.brackets||Lo.brackets;for(let n of i){let r=e1(ms(n,0));if(e==n)return r==n?S6(t,n,i.indexOf(n+n+n)>-1,s):w6(t,n,r,s.before||Lo.before);if(e==r&&s1(t,t.selection.main.from))return _6(t,n,r)}return null}function s1(t,e){let s=!1;return t.field(Qy).between(0,t.doc.length,i=>{i==e&&(s=!0)}),s}function ru(t,e){let s=t.sliceString(e,e+2);return s.slice(0,fi(ms(s,0)))}function k6(t,e){let s=t.sliceString(e-2,e);return fi(ms(s,0))==s.length?s:s.slice(1)}function w6(t,e,s,i){let n=null,r=t.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:s,from:o.to}],effects:Vn.of(o.to+e.length),range:ue.range(o.anchor+e.length,o.head+e.length)};let l=ru(t.doc,o.head);return!l||/\s/.test(l)||i.indexOf(l)>-1?{changes:{insert:e+s,from:o.head},effects:Vn.of(o.head+e.length),range:ue.cursor(o.head+e.length)}:{range:n=o}});return n?null:t.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function _6(t,e,s){let i=null,n=t.changeByRange(r=>r.empty&&ru(t.doc,r.head)==s?{changes:{from:r.head,to:r.head+s.length,insert:s},range:ue.cursor(r.head+s.length)}:i={range:r});return i?null:t.update(n,{scrollIntoView:!0,userEvent:"input.type"})}function S6(t,e,s,i){let n=i.stringPrefixes||Lo.stringPrefixes,r=null,o=t.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:e,from:l.to}],effects:Vn.of(l.to+e.length),range:ue.range(l.anchor+e.length,l.head+e.length)};let a=l.head,d=ru(t.doc,a),u;if(d==e){if(xm(t,a))return{changes:{insert:e+e,from:a},effects:Vn.of(a+e.length),range:ue.cursor(a+e.length)};if(s1(t,a)){let h=s&&t.sliceDoc(a,a+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:a,to:a+h.length,insert:h},range:ue.cursor(a+h.length)}}}else{if(s&&t.sliceDoc(a-2*e.length,a)==e+e&&(u=km(t,a-2*e.length,n))>-1&&xm(t,u))return{changes:{insert:e+e+e+e,from:a},effects:Vn.of(a+e.length),range:ue.cursor(a+e.length)};if(t.charCategorizer(a)(d)!=kt.Word&&km(t,a,n)>-1&&!C6(t,a,e,n))return{changes:{insert:e+e,from:a},effects:Vn.of(a+e.length),range:ue.cursor(a+e.length)}}return{range:r=l}});return r?null:t.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function xm(t,e){let s=is(t).resolveInner(e+1);return s.parent&&s.from==e}function C6(t,e,s,i){let n=is(t).resolveInner(e,-1),r=i.reduce((o,l)=>Math.max(o,l.length),0);for(let o=0;o<5;o++){let l=t.sliceDoc(n.from,Math.min(n.to,n.from+s.length+r)),a=l.indexOf(s);if(!a||a>-1&&i.indexOf(l.slice(0,a))>-1){let u=n.firstChild;for(;u&&u.from==n.from&&u.to-u.from>s.length+a;){if(t.sliceDoc(u.to-s.length,u.to)==s)return!1;u=u.firstChild}return!0}let d=n.to==e&&n.parent;if(!d)break;n=d}return!1}function km(t,e,s){let i=t.charCategorizer(e);if(i(t.sliceDoc(e-1,e))!=kt.Word)return e;for(let n of s){let r=e-n.length;if(t.sliceDoc(r,e)==n&&i(t.sliceDoc(r-1,r))!=kt.Word)return r}return-1}function A6(t={}){return[h6,gs,It.of(t),c6,V6,p6]}const i1=[{key:"Ctrl-Space",run:Xu},{mac:"Alt-`",run:Xu},{mac:"Alt-i",run:Xu},{key:"Escape",run:l6},{key:"ArrowDown",run:jl(!0)},{key:"ArrowUp",run:jl(!1)},{key:"PageDown",run:jl(!0,"page")},{key:"PageUp",run:jl(!1,"page")},{key:"Enter",run:o6}],V6=Un.highest(Xc.computeN([It],t=>t.facet(It).defaultKeymap?[i1]:[]));class wm{constructor(e,s,i){this.from=e,this.to=s,this.diagnostic=i}}class Sn{constructor(e,s,i){this.diagnostics=e,this.panel=s,this.selected=i}static init(e,s,i){let n=i.facet(Ro).markerFilter;n&&(e=n(e,i));let r=e.slice().sort((m,_)=>m.from-_.from||m.to-_.to),o=new Pi,l=[],a=0,d=i.doc.iter(),u=0,f=i.doc.length;for(let m=0;;){let _=m==r.length?null:r[m];if(!_&&!l.length)break;let p,C;if(l.length)p=a,C=l.reduce((B,F)=>Math.min(B,F.to),_&&_.from>p?_.from:1e8);else{if(p=_.from,p>f)break;C=_.to,l.push(_),m++}for(;m<r.length;){let B=r[m];if(B.from==p&&(B.to>B.from||B.to==p))l.push(B),m++,C=Math.min(B.to,C);else{C=Math.min(B.from,C);break}}C=Math.min(C,f);let M=!1;if(l.some(B=>B.from==p&&(B.to==C||C==f))&&(M=p==C,!M&&C-p<10)){let B=p-(u+d.value.length);B>0&&(d.next(B),u=p);for(let F=p;;){if(F>=C){M=!0;break}if(!d.lineBreak&&u+d.value.length>F)break;F=u+d.value.length,u+=d.value.length,d.next()}}let U=N6(l);if(M)o.add(p,p,Fe.widget({widget:new L6(U),diagnostics:l.slice()}));else{let B=l.reduce((F,j)=>j.markClass?F+" "+j.markClass:F,"");o.add(p,C,Fe.mark({class:"cm-lintRange cm-lintRange-"+U+B,diagnostics:l.slice(),inclusiveEnd:l.some(F=>F.to>C)}))}if(a=C,a==f)break;for(let B=0;B<l.length;B++)l[B].to<=a&&l.splice(B--,1)}let h=o.finish();return new Sn(h,s,Sr(h))}}function Sr(t,e=null,s=0){let i=null;return t.between(s,1e9,(n,r,{spec:o})=>{if(!(e&&o.diagnostics.indexOf(e)<0))if(!i)i=new wm(n,r,e||o.diagnostics[0]);else{if(o.diagnostics.indexOf(i.diagnostic)<0)return!1;i=new wm(i.from,r,i.diagnostic)}}),i}function M6(t,e){let s=e.pos,i=e.end||s,n=t.state.facet(Ro).hideOn(t,s,i);if(n!=null)return n;let r=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(o=>o.is(n1))||t.changes.touchesRange(r.from,Math.max(r.to,i)))}function D6(t,e){return t.field(Ss,!1)?e:e.concat(Ge.appendConfig.of(U6))}const n1=Ge.define(),kf=Ge.define(),r1=Ge.define(),Ss=Gt.define({create(){return new Sn(Fe.none,null,null)},update(t,e){if(e.docChanged&&t.diagnostics.size){let s=t.diagnostics.map(e.changes),i=null,n=t.panel;if(t.selected){let r=e.changes.mapPos(t.selected.from,1);i=Sr(s,t.selected.diagnostic,r)||Sr(s,null,r)}!s.size&&n&&e.state.facet(Ro).autoPanel&&(n=null),t=new Sn(s,n,i)}for(let s of e.effects)if(s.is(n1)){let i=e.state.facet(Ro).autoPanel?s.value.length?Bo.open:null:t.panel;t=Sn.init(s.value,i,e.state)}else s.is(kf)?t=new Sn(t.diagnostics,s.value?Bo.open:null,t.selected):s.is(r1)&&(t=new Sn(t.diagnostics,t.panel,s.value));return t},provide:t=>[Do.from(t,e=>e.panel),$e.decorations.from(t,e=>e.diagnostics)]}),T6=Fe.mark({class:"cm-lintRange cm-lintRange-active"});function $6(t,e,s){let{diagnostics:i}=t.state.field(Ss),n,r=-1,o=-1;i.between(e-(s<0?1:0),e+(s>0?1:0),(a,d,{spec:u})=>{if(e>=a&&e<=d&&(a==d||(e>a||s>0)&&(e<d||s<0)))return n=u.diagnostics,r=a,o=d,!1});let l=t.state.facet(Ro).tooltipFilter;return n&&l&&(n=l(n,t.state)),n?{pos:r,end:o,above:t.state.doc.lineAt(r).to<o,create(){return{dom:E6(t,n)}}}:null}function E6(t,e){return ct("ul",{class:"cm-tooltip-lint"},e.map(s=>l1(t,s,!1)))}const O6=t=>{let e=t.state.field(Ss,!1);(!e||!e.panel)&&t.dispatch({effects:D6(t.state,[kf.of(!0)])});let s=Mo(t,Bo.open);return s&&s.dom.querySelector(".cm-panel-lint ul").focus(),!0},_m=t=>{let e=t.state.field(Ss,!1);return!e||!e.panel?!1:(t.dispatch({effects:kf.of(!1)}),!0)},P6=t=>{let e=t.state.field(Ss,!1);if(!e)return!1;let s=t.state.selection.main,i=e.diagnostics.iter(s.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==s.from&&i.to==s.to)?!1:(t.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},j6=[{key:"Mod-Shift-m",run:O6,preventDefault:!0},{key:"F8",run:P6}],Ro=Ee.define({combine(t){return{sources:t.map(e=>e.source).filter(e=>e!=null),...xi(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:Sm,tooltipFilter:Sm,needsRefresh:(e,s)=>e?s?i=>e(i)||s(i):e:s,hideOn:(e,s)=>e?s?(i,n,r)=>e(i,n,r)||s(i,n,r):e:s,autoPanel:(e,s)=>e||s})}}});function Sm(t,e){return t?e?(s,i)=>e(t(s,i),i):t:e}function o1(t){let e=[];if(t)e:for(let{name:s}of t){for(let i=0;i<s.length;i++){let n=s[i];if(/[a-zA-Z]/.test(n)&&!e.some(r=>r.toLowerCase()==n.toLowerCase())){e.push(n);continue e}}e.push("")}return e}function l1(t,e,s){var i;let n=s?o1(e.actions):[];return ct("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},ct("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(t):e.message),(i=e.actions)===null||i===void 0?void 0:i.map((r,o)=>{let l=!1,a=m=>{if(m.preventDefault(),l)return;l=!0;let _=Sr(t.state.field(Ss).diagnostics,e);_&&r.apply(t,_.from,_.to)},{name:d}=r,u=n[o]?d.indexOf(n[o]):-1,f=u<0?d:[d.slice(0,u),ct("u",d.slice(u,u+1)),d.slice(u+1)],h=r.markClass?" "+r.markClass:"";return ct("button",{type:"button",class:"cm-diagnosticAction"+h,onclick:a,onmousedown:a,"aria-label":` Action: ${d}${u<0?"":` (access key "${n[o]})"`}.`},f)}),e.source&&ct("div",{class:"cm-diagnosticSource"},e.source))}class L6 extends cn{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return ct("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class Cm{constructor(e,s){this.diagnostic=s,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=l1(e,s,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Bo{constructor(e){this.view=e,this.items=[];let s=n=>{if(n.keyCode==27)_m(this.view),this.view.focus();else if(n.keyCode==38||n.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(n.keyCode==40||n.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(n.keyCode==36)this.moveSelection(0);else if(n.keyCode==35)this.moveSelection(this.items.length-1);else if(n.keyCode==13)this.view.focus();else if(n.keyCode>=65&&n.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:r}=this.items[this.selectedIndex],o=o1(r.actions);for(let l=0;l<o.length;l++)if(o[l].toUpperCase().charCodeAt(0)==n.keyCode){let a=Sr(this.view.state.field(Ss).diagnostics,r);a&&r.actions[l].apply(e,a.from,a.to)}}else return;n.preventDefault()},i=n=>{for(let r=0;r<this.items.length;r++)this.items[r].dom.contains(n.target)&&this.moveSelection(r)};this.list=ct("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:s,onclick:i}),this.dom=ct("div",{class:"cm-panel-lint"},this.list,ct("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>_m(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(Ss).selected;if(!e)return-1;for(let s=0;s<this.items.length;s++)if(this.items[s].diagnostic==e.diagnostic)return s;return-1}update(){let{diagnostics:e,selected:s}=this.view.state.field(Ss),i=0,n=!1,r=null,o=new Set;for(e.between(0,this.view.state.doc.length,(l,a,{spec:d})=>{for(let u of d.diagnostics){if(o.has(u))continue;o.add(u);let f=-1,h;for(let m=i;m<this.items.length;m++)if(this.items[m].diagnostic==u){f=m;break}f<0?(h=new Cm(this.view,u),this.items.splice(i,0,h),n=!0):(h=this.items[f],f>i&&(this.items.splice(i,f-i),n=!0)),s&&h.diagnostic==s.diagnostic?h.dom.hasAttribute("aria-selected")||(h.dom.setAttribute("aria-selected","true"),r=h):h.dom.hasAttribute("aria-selected")&&h.dom.removeAttribute("aria-selected"),i++}});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)n=!0,this.items.pop();this.items.length==0&&(this.items.push(new Cm(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),n=!0),r?(this.list.setAttribute("aria-activedescendant",r.id),this.view.requestMeasure({key:this,read:()=>({sel:r.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:l,panel:a})=>{let d=a.height/this.list.offsetHeight;l.top<a.top?this.list.scrollTop-=(a.top-l.top)/d:l.bottom>a.bottom&&(this.list.scrollTop+=(l.bottom-a.bottom)/d)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),n&&this.sync()}sync(){let e=this.list.firstChild;function s(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)s();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)s()}moveSelection(e){if(this.selectedIndex<0)return;let s=this.view.state.field(Ss),i=Sr(s.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:r1.of(i)})}static open(e){return new Bo(e)}}function R6(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function Ll(t){return R6(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const B6=$e.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Ll("#d11")},".cm-lintRange-warning":{backgroundImage:Ll("orange")},".cm-lintRange-info":{backgroundImage:Ll("#999")},".cm-lintRange-hint":{backgroundImage:Ll("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function I6(t){return t=="error"?4:t=="warning"?3:t=="info"?2:1}function N6(t){let e="hint",s=1;for(let i of t){let n=I6(i.severity);n>s&&(s=n,e=i.severity)}return e}const U6=[Ss,$e.decorations.compute([Ss],t=>{let{selected:e,panel:s}=t.field(Ss);return!e||!s||e.from==e.to?Fe.none:Fe.set([T6.range(e.from,e.to)])}),V5($6,{hideOn:M6}),B6],z6=[B5(),U5(),n5(),uA(),E3(),KC(),ZC(),et.allowMultipleSelections.of(!0),y3(),Zv(L3,{fallback:!0}),F3(),m6(),A6(),g5(),b5(),d5(),b8(),Xc.of([...b6,...h8,...B8,...yA,...M3,...i1,...j6])],F6={class:"rounded-lg border border-gray-300 overflow-hidden dark:border-gray-600"},Gi={__name:"CodeEditor",props:{modelValue:{type:String,default:""},language:{type:String,default:"r",validator:t=>["r","markdown","text","gitignore"].includes(t)},minHeight:{type:String,default:"400px"},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:""}},emits:["update:modelValue"],setup(t,{emit:e}){const s=t,i=e,n=ce(null);let r=null;const o=af.define({token(d){return d.sol()&&d.match(/^#/)?(d.skipToEnd(),"comment"):(d.skipToEnd(),null)}}),l=Zv(Ko.define([{tag:Me.comment,color:"#16a34a"}])),a=()=>[o,l];return ss(()=>{if(!n.value)return;const d=$e.updateListener.of(h=>{h.docChanged&&i("update:modelValue",h.state.doc.toString())}),u=[z6,a(),d,$e.lineWrapping,$e.theme({"&":{minHeight:s.minHeight,fontSize:"13px",fontFamily:'ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, "Liberation Mono", monospace'},".cm-scroller":{fontFamily:'ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, "Liberation Mono", monospace'},".cm-content":{padding:"12px 0"},".cm-line":{padding:"0 12px"}})],f=et.create({doc:s.modelValue||"",extensions:u});r=new $e({state:f,parent:n.value})}),He(()=>s.modelValue,d=>{r&&d!==r.state.doc.toString()&&r.dispatch({changes:{from:0,to:r.state.doc.length,insert:d}})}),(d,u)=>(g(),b("div",F6,[c("div",{ref_key:"editorRef",ref:n},null,512)]))}},H6={class:"relative"},W6={key:0,class:"absolute z-10 mt-1 w-full max-h-64 overflow-y-auto border border-gray-200 dark:border-gray-700 rounded-md bg-white dark:bg-gray-800 shadow-lg"},q6=["onClick","onMouseenter"],K6={class:"flex items-center justify-between gap-3"},G6={class:"flex-1 min-w-0"},J6={class:"font-medium text-gray-900 dark:text-white"},Y6={class:"text-xs text-gray-500 dark:text-gray-400 truncate"},X6={class:"ml-3 text-xs text-gray-400 dark:text-gray-500 shrink-0 flex items-center gap-1.5"},Z6={class:"text-[10px] font-medium"},Q6={key:1,class:"absolute right-3 top-9 text-gray-400"},wf={__name:"PackageAutocomplete",props:{modelValue:{type:String,default:""},label:{type:String,default:"Search Packages"},placeholder:{type:String,default:"Type to search..."},source:{type:String,default:"cran",validator:t=>["cran","bioconductor","github"].includes(t)}},emits:["update:modelValue","select"],setup(t,{emit:e}){const s=t,i=e,n=re({get:()=>s.modelValue,set:h=>i("update:modelValue",h)}),r=ce([]),o=ce(!1),l=ce(-1);let a=null;He(n,h=>{if(a&&clearTimeout(a),h.length<2){r.value=[],l.value=-1;return}a=setTimeout(()=>{d(h)},300)});const d=async h=>{o.value=!0;try{const _=await(await fetch(`/api/packages/search?q=${encodeURIComponent(h)}&source=${encodeURIComponent(s.source)}`)).json();r.value=_.packages||[],l.value=r.value.length>0?0:-1}catch(m){console.error("Failed to search packages:",m),r.value=[],l.value=-1}finally{o.value=!1}},u=h=>{r.value.length!==0&&(h.key==="ArrowDown"?(h.preventDefault(),l.value=Math.min(l.value+1,r.value.length-1)):h.key==="ArrowUp"?(h.preventDefault(),l.value=Math.max(l.value-1,0)):h.key==="Enter"&&l.value>=0?(h.preventDefault(),f(r.value[l.value])):h.key==="Escape"&&(r.value=[],l.value=-1))},f=h=>{i("update:modelValue",h.name),i("select",h),r.value=[],l.value=-1};return(h,m)=>(g(),b("div",H6,[k(Y,{modelValue:n.value,"onUpdate:modelValue":m[0]||(m[0]=_=>n.value=_),label:t.label,placeholder:t.placeholder,onKeydown:u},null,8,["modelValue","label","placeholder"]),r.value.length>0?(g(),b("div",W6,[(g(!0),b(ee,null,ke(r.value,(_,p)=>(g(),b("button",{key:_.name,onClick:C=>f(_),onMouseenter:C=>l.value=p,class:Te(["w-full px-3 py-2 text-left border-b border-gray-200 dark:border-gray-700 last:border-b-0 transition",l.value===p?"bg-sky-50 dark:bg-sky-900/20":"hover:bg-gray-50 dark:hover:bg-gray-700"])},[c("div",K6,[c("div",G6,[c("div",J6,z(_.name),1),c("div",Y6,z(_.title),1)]),c("div",X6,[c("span",Z6,z(_.source==="cran"?"CRAN":_.source==="bioconductor"?"Bioconductor":_.source),1),m[1]||(m[1]=c("span",null,"",-1)),c("span",null,"v"+z(_.version),1)])])],42,q6))),128))])):I("",!0),o.value?(g(),b("div",Q6,[...m[2]||(m[2]=[c("svg",{class:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[c("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),c("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):I("",!0)]))}},eV={class:"flex items-center justify-between"},tV={class:"flex-1"},sV={class:"text-xs text-gray-500 dark:text-gray-400 mb-1"},iV={class:"text-sm text-gray-900 dark:text-white"},js={__name:"OverviewCard",props:{title:{type:String,required:!0}},emits:["click"],setup(t){return(e,s)=>(g(),b("button",{onClick:s[0]||(s[0]=i=>e.$emit("click")),class:"w-full text-left px-4 py-3 rounded-md bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 hover:border-sky-300 dark:hover:border-sky-700 transition"},[c("div",eV,[c("div",tV,[c("div",sV,z(t.title),1),c("div",iV,[gt(e.$slots,"default")])]),s[1]||(s[1]=c("svg",{class:"h-5 w-5 text-gray-400 shrink-0 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))])]))}},nV={class:"pt-4 pb-2"},rV={class:"px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider dark:text-gray-400"},Ta={__name:"NavigationSectionHeading",setup(t){return(e,s)=>(g(),b("div",nV,[c("h3",rV,[gt(e.$slots,"default")])]))}},oV={class:"space-y-3"},lV={class:"grid gap-4 sm:grid-cols-2"},aV={class:"space-y-3"},uV={class:"space-y-4"},dV={class:"text-xs text-gray-500 dark:text-gray-400"},_f={__name:"GitHooksPanel",props:{modelValue:{type:Object,required:!0},flush:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{emit:e}){const s=t,i=e,n=()=>({initialize:s.modelValue?.initialize??!0,user_name:s.modelValue?.user_name??"",user_email:s.modelValue?.user_email??"",hooks:{ai_sync:s.modelValue?.hooks?.ai_sync??!1,data_security:s.modelValue?.hooks?.data_security??!1,check_sensitive_dirs:s.modelValue?.hooks?.check_sensitive_dirs??!1}}),r=re(()=>s.flush?"space-y-6":"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 space-y-6"),o=re(n),l=d=>{const u=n(),f={...u.hooks,...d?.hooks||{}};i("update:modelValue",{...u,...d,hooks:f})},a=(d,u)=>{l({hooks:{[d]:u}})};return(d,u)=>(g(),b("div",{class:Te(r.value)},[k(Ne,{"model-value":o.value.initialize,label:"Initialize Git",description:"Run git init for every new project.","onUpdate:modelValue":u[0]||(u[0]=f=>l({initialize:f}))},null,8,["model-value"]),c("div",oV,[u[6]||(u[6]=c("div",null,[c("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"Git identity"),c("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Overrides Author Information when provided. ")],-1)),c("div",lV,[k(Y,{"model-value":o.value.user_name,label:"Git Name",placeholder:"Jane Analyst",disabled:!o.value.initialize,"onUpdate:modelValue":u[1]||(u[1]=f=>l({user_name:f}))},null,8,["model-value","disabled"]),k(Y,{"model-value":o.value.user_email,label:"Git Email",placeholder:"jane@example.com",hint:"Used for git config user.email during project setup.",disabled:!o.value.initialize,"onUpdate:modelValue":u[2]||(u[2]=f=>l({user_email:f}))},null,8,["model-value","disabled"])])]),c("div",aV,[u[8]||(u[8]=c("div",null,[c("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"Git Hooks"),c("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Pre-commit hooks that run automatically before each commit. ")],-1)),c("div",uV,[k(Ne,{"model-value":o.value.hooks.ai_sync,label:"Sync AI Files Before Commit",description:"Update non-canonical files so assistants share the same instructions.",disabled:!o.value.initialize,"onUpdate:modelValue":u[3]||(u[3]=f=>a("ai_sync",f))},null,8,["model-value","disabled"]),k(Ne,{"model-value":o.value.hooks.data_security,label:"Check for Secrets",description:"Run a lightweight scan for API keys and credentials before commits.",disabled:!o.value.initialize,"onUpdate:modelValue":u[4]||(u[4]=f=>a("data_security",f))},null,8,["model-value","disabled"]),k(Ne,{"model-value":o.value.hooks.check_sensitive_dirs,label:"Warn About Unignored Sensitive Directories",description:"Block commits if directories with sensitive names aren't gitignored.",disabled:!o.value.initialize,"onUpdate:modelValue":u[5]||(u[5]=f=>a("check_sensitive_dirs",f))},null,8,["model-value","disabled"])]),c("p",dV,[gt(d.$slots,"note",{},()=>[u[7]||(u[7]=ne(" Project-specific .gitignore templates can be customized in Project Defaults. ",-1))])])])],2))}},cV={class:"space-y-5"},Sf={__name:"ScaffoldBehaviorPanel",props:{modelValue:{type:Object,required:!0},flush:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{emit:e}){const s=t,i=e,n=()=>({source_all_functions:s.modelValue?.source_all_functions??!0,set_theme_on_scaffold:s.modelValue?.set_theme_on_scaffold??!0,ggplot_theme:s.modelValue?.ggplot_theme??"theme_minimal",seed_on_scaffold:s.modelValue?.seed_on_scaffold??!1,seed:s.modelValue?.seed??""}),r=re(n),o=re(()=>s.flush?"space-y-5":"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 space-y-5"),l=a=>{const d=n();i("update:modelValue",{...d,...a})};return(a,d)=>(g(),b("div",{class:Te(o.value)},[c("div",cV,[c("div",null,[d[5]||(d[5]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Auto-Load Functions",-1)),k(Ne,{"model-value":r.value.source_all_functions,label:"Source all R files from functions/ directory",description:"Automatically loads all helper functions when scaffold() runs","onUpdate:modelValue":d[0]||(d[0]=u=>l({source_all_functions:u}))},null,8,["model-value"])]),c("div",null,[d[7]||(d[7]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"ggplot2 Theme",-1)),k(Ne,{"model-value":r.value.set_theme_on_scaffold,label:"Set ggplot2 theme when scaffold() runs",description:"Automatically sets ggplot2 theme for consistent plot styling","onUpdate:modelValue":d[1]||(d[1]=u=>l({set_theme_on_scaffold:u}))},null,8,["model-value"]),r.value.set_theme_on_scaffold?(g(),me(Jt,{key:0,"model-value":r.value.ggplot_theme,label:"Theme",class:"mt-4","onUpdate:modelValue":d[2]||(d[2]=u=>l({ggplot_theme:u}))},{default:R(()=>[...d[6]||(d[6]=[c("option",{value:""},"None",-1),c("option",{value:"theme_minimal"},"Minimal",-1),c("option",{value:"theme_bw"},"Black & White",-1),c("option",{value:"theme_classic"},"Classic",-1),c("option",{value:"theme_gray"},"Gray (default)",-1),c("option",{value:"theme_light"},"Light",-1),c("option",{value:"theme_dark"},"Dark",-1),c("option",{value:"theme_void"},"Void",-1)])]),_:1},8,["model-value"])):I("",!0)]),c("div",null,[d[8]||(d[8]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Random Seed",-1)),k(Ne,{"model-value":r.value.seed_on_scaffold,label:"Set random seed when scaffold() runs",description:"Ensures deterministic behavior for reproducibility","onUpdate:modelValue":d[3]||(d[3]=u=>l({seed_on_scaffold:u}))},null,8,["model-value"]),r.value.seed_on_scaffold?(g(),me(Y,{key:0,"model-value":r.value.seed,label:"Seed Value",placeholder:"e.g., 1234 or 20241107",hint:"Leave empty to use global default",class:"mt-4","onUpdate:modelValue":d[4]||(d[4]=u=>l({seed:u}))},null,8,["model-value"])):I("",!0)])])],2))}},fV={class:"flex min-h-screen"},hV={class:"w-64 shrink-0 border-r border-gray-200 p-6 dark:border-gray-800"},pV={class:"space-y-1 mb-6"},mV=["onClick"],gV=["fill","viewBox","stroke"],vV=["stroke-linecap","stroke-linejoin","stroke-width","fill","d"],yV={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},bV={class:"flex-1 p-10"},xV={class:"mt-8 space-y-6"},kV={class:"space-y-3"},wV={class:"text-gray-600 dark:text-gray-400"},_V={class:"text-gray-600 dark:text-gray-400"},SV={class:"text-gray-600 dark:text-gray-400"},CV={class:"text-gray-600 dark:text-gray-400"},AV={class:"text-gray-600 dark:text-gray-400"},VV={class:"text-gray-600 dark:text-gray-400"},MV={class:"text-gray-600 dark:text-gray-400"},DV={class:"text-gray-600 dark:text-gray-400"},TV={class:"text-gray-600 dark:text-gray-400"},$V={class:"text-gray-600 dark:text-gray-400"},EV={key:1,class:"text-gray-600 dark:text-gray-400"},OV={key:2,class:"text-gray-600 dark:text-gray-400"},PV={class:"text-gray-600 dark:text-gray-400"},jV={class:"text-gray-600 dark:text-gray-400"},LV={class:"text-gray-600 dark:text-gray-400"},RV={class:"text-gray-600 dark:text-gray-400"},BV={class:"text-gray-600 dark:text-gray-400"},IV={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},NV={class:"space-y-5"},UV={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},zV={class:"space-y-5"},FV={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 space-y-6"},HV={class:"space-y-6"},WV={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},qV={key:0,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},KV={key:1,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},GV={class:"space-y-3"},JV={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},YV={class:"grid grid-cols-2 gap-3"},XV={key:2,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},ZV={class:"space-y-3"},QV={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},eM={class:"grid grid-cols-2 gap-3"},tM={key:3,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},sM={class:"space-y-3"},iM={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},nM={class:"grid grid-cols-2 gap-3"},rM={key:4,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},oM={class:"space-y-3"},lM={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},aM={class:"grid grid-cols-2 gap-3"},uM={key:5,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},dM={class:"space-y-3"},cM={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},fM={class:"grid grid-cols-2 gap-3"},hM={key:6,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},pM={class:"space-y-3"},mM={key:7,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},gM={class:"space-y-3"},vM={key:8,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},yM={class:"space-y-3"},bM={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},xM={class:"grid grid-cols-2 gap-3"},kM={key:9,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},wM={class:"space-y-3"},_M={class:"flex items-start gap-3 mb-2"},SM={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},CM={class:"grid grid-cols-2 gap-3"},AM={key:10,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},VM={class:"space-y-4"},MM={class:"grid gap-4 sm:grid-cols-2"},DM={class:"p-3 rounded-md"},TM={class:"p-3 rounded-md"},$M={class:"grid gap-4 sm:grid-cols-2"},EM={class:"space-y-3"},OM={class:"space-y-3"},PM={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},jM={class:"grid gap-6 sm:grid-cols-2"},LM={class:"space-y-2"},RM={class:"space-y-2"},BM={key:11,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},IM={class:"space-y-4"},NM={class:"grid gap-4 sm:grid-cols-2"},UM={class:"p-3 rounded-md"},zM={class:"p-3 rounded-md"},FM={class:"grid gap-4 sm:grid-cols-2"},HM={class:"space-y-3"},WM={class:"space-y-3"},qM={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},KM={class:"grid gap-6 sm:grid-cols-2"},GM={class:"space-y-2"},JM={class:"space-y-2"},YM={key:12,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},XM={class:"space-y-3"},ZM={class:"flex items-start gap-3 mb-2"},QM={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},eD={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},tD={class:"space-y-5"},sD={class:"pt-4 border-t border-gray-200 dark:border-gray-700"},iD={class:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between mb-4"},nD={key:0,class:"space-y-3"},rD={class:"flex flex-col gap-3"},oD={class:"grid gap-3 grid-cols-[1fr_160px]"},lD={class:"flex items-center justify-between"},aD={key:1,class:"text-xs text-gray-500 dark:text-gray-400"},uD={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},dD={class:"space-y-6"},cD={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},fD={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},hD={class:"space-y-2"},pD={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},mD={__name:"NewProjectView",setup(t){const e=Wa(),s=Vr(),i=Ka(),n=ce(null),r=ce(null),o=ce(!0),l=[{id:"claude",label:"Claude Code",description:"Anthropic's IDE-focused assistant."},{id:"copilot",label:"GitHub Copilot",description:"Complements VS Code and JetBrains editors."},{id:"agents",label:"Multi-Agent (OpenAI Codex, Cursor, etc.)",description:"Shared instructions for multi-model orchestrators."}],a=Z=>Z?Array.isArray(Z)?Array.from(new Set(Z.map(S=>String(S)))):typeof Z=="string"?[Z]:[]:[],d=()=>{Array.isArray(p.value.ai.assistants)||(p.value.ai.assistants=a(p.value.ai.assistants))},u=[{id:"overview",label:"Overview",icon:qa},{id:"basics",label:"Basics",icon:Lc},{id:"structure",label:"Project Structure",icon:ua},{id:"packages",label:"Packages",icon:Rc},{id:"ai",label:"AI Assistants",svgIcon:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"},{id:"git",label:"Git & Hooks",svgIcon:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"},{id:"scaffold",label:"Scaffold Behavior",svgIcon:"M256 64L576 64L576 576L64 576L64 192L256 192L256 64zM256 224L96 224L96 544L256 544L256 224zM288 544L544 544L544 96L288 96L288 544zM440 152L488 152L488 200L440 200L440 152zM392 152L392 200L344 200L344 152L392 152zM440 248L488 248L488 296L440 296L440 248zM392 248L392 296L344 296L344 248L392 248zM152 280L200 280L200 328L152 328L152 280zM392 344L392 392L344 392L344 344L392 344zM152 376L200 376L200 424L152 424L152 376zM488 344L488 392L440 392L440 344L488 344z",svgViewBox:"0 0 640 640",svgFill:"currentColor",svgStroke:"none",svgStrokeWidth:0,svgPathFill:"currentColor"}],f=ce("basics"),h=ce(!1),m=ce(null),_=ce(!0),p=ce({name:"",location:"",type:"project",author:{name:"",email:"",affiliation:""},scaffold:{seed_on_scaffold:!1,seed:"",set_theme_on_scaffold:!0,ggplot_theme:"theme_minimal",source_all_functions:!0,notebook_format:"quarto",ide:"vscode",positron:!1},packages:{use_renv:!1,default_packages:[]},ai:{enabled:!0,assistants:[],canonical_file:"CLAUDE.md",canonical_content:""},git:{initialize:!0,gitignore_template:"gitignore-project",gitignore_content:"",user_name:"",user_email:"",hooks:{ai_sync:!1,data_security:!1,check_sensitive_dirs:!1}},directories_enabled:{},directories:{},extra_directories:[],extra_directories_enabled:{}}),C=()=>{const Z=s.query.section;Z&&["overview","author","scaffold","structure","packages","ai","git"].includes(Z)&&(f.value=Z)};He(()=>s.query.section,Z=>{Z&&["overview","author","scaffold","structure","packages","ai","git"].includes(Z)?f.value=Z:Z||(f.value="overview")}),He(f,Z=>{s.query.section!==Z&&e.replace({query:{...s.query,section:Z}})}),ss(async()=>{console.log("[DEBUG] NewProjectView mounted - starting initialization"),C();try{console.log("[DEBUG] Fetching global settings from /api/settings");const Z=await fetch("/api/settings");if(console.log("[DEBUG] Settings response status:",Z.status,Z.ok),Z.ok&&(n.value=await Z.json(),n.value)){if(n.value.global?.projects_root&&(p.value.location=n.value.global.projects_root),p.value.author={...n.value.author},n.value.defaults?.project_type&&(p.value.type=n.value.defaults.project_type),n.value.defaults?.scaffold&&(p.value.scaffold={...n.value.defaults.scaffold}),n.value.defaults?.packages)if(Array.isArray(n.value.defaults.packages)){const N=n.value.defaults.packages.map(Q=>({name:Q.name||"",source:Q.source||"cran",auto_attach:Q.auto_attach!==!1}));p.value.packages.default_packages.splice(0,p.value.packages.default_packages.length,...N)}else n.value.defaults.packages.default_packages&&(p.value.packages={use_renv:n.value.defaults.packages.use_renv||!1,default_packages:(n.value.defaults.packages.default_packages||[]).map(N=>({name:N.name||"",source:N.source||"cran",auto_attach:N.auto_attach!==!1}))});const v=a(n.value.defaults?.ai_assistants);p.value.ai={enabled:n.value.defaults?.ai_support!==!1,assistants:v.length>0?v:["claude"],canonical_file:n.value.defaults?.ai_canonical_file||"CLAUDE.md",canonical_content:""},d(),p.value.ai.enabled&&p.value.ai.canonical_file&&he(p.value.ai.canonical_file,p.value.type),p.value.git.initialize=n.value.defaults?.use_git!==!1,p.value.git.user_name=n.value.git?.user_name||"",p.value.git.user_email=n.value.git?.user_email||"",n.value.defaults?.git_hooks&&(p.value.git.hooks={...n.value.defaults.git_hooks});const H={project:"gitignore-project",project_sensitive:"gitignore-project_sensitive",course:"gitignore-course",presentation:"gitignore-presentation"};p.value.git.gitignore_template=H[p.value.type]||"gitignore-project",p.value.git.gitignore_template&&le(p.value.git.gitignore_template)}const S=await fetch("/api/settings-catalog");S.ok&&(r.value=await S.json()),M()}catch(Z){console.error("[DEBUG] Failed to load settings:",Z),console.error("[DEBUG] Error details:",Z.message,Z.stack),i.error("Load Error","Could not load default settings")}finally{console.log("[DEBUG] Initialization complete, loading =",o.value),o.value=!1,setTimeout(()=>{if(m.value&&m.value.$el){const Z=m.value.$el.querySelector("input");Z&&Z.focus()}},100)}}),He(()=>p.value.type,Z=>{M();const S={project:"gitignore-project",project_sensitive:"gitignore-project_sensitive",course:"gitignore-course",presentation:"gitignore-presentation"};p.value.git.gitignore_template=S[Z]||"gitignore-project"}),He(()=>p.value.packages.default_packages,(Z,S)=>{console.log("[DEBUG PACKAGES WATCH] Packages changed!"),console.log("[DEBUG PACKAGES WATCH] Old:",S),console.log("[DEBUG PACKAGES WATCH] New:",Z),console.trace("[DEBUG PACKAGES WATCH] Stack trace:")},{deep:!0}),He(()=>p.value.git.gitignore_template,Z=>{Z&&le(Z)}),He(()=>p.value.name,()=>{n.value?.global?.projects_root&&$()}),He(()=>p.value.ai.enabled,Z=>{Z&&p.value.ai.canonical_file&&he(p.value.ai.canonical_file,p.value.type)}),He(()=>p.value.ai.canonical_file,Z=>{Z&&p.value.ai.enabled&&he(Z,p.value.type)}),He(()=>p.value.type,Z=>{p.value.ai.canonical_file==="CLAUDE.md"&&p.value.ai.enabled&&he("CLAUDE.md",Z)});const M=()=>{if(!r.value?.project_types)return;const Z=r.value.project_types[p.value.type];if(!Z?.directories)return;const S=n.value?.project_types?.[p.value.type];if(!p.value.git.gitignore_template||p.value.git.gitignore_template==="gitignore-project"){const v={project:"gitignore-project",project_sensitive:"gitignore-sensitive",course:"gitignore-course",presentation:"gitignore-presentation"};p.value.git.gitignore_template=v[p.value.type]||"gitignore-project"}le(p.value.git.gitignore_template),p.value.directories_enabled=Object.entries(Z.directories).reduce((v,[H,N])=>(v[H]=N.enabled_by_default!==!1,v),{}),p.value.directories=Object.entries(Z.directories).reduce((v,[H,N])=>(v[H]=S?.directories?.[H]||N.default||"",v),{}),S?.extra_directories&&Array.isArray(S.extra_directories)?(p.value.extra_directories=S.extra_directories.map(v=>({...v,_source:"global"})),p.value.extra_directories_enabled=S.extra_directories.reduce((v,H)=>(H.key&&(v[H.key]=!0),v),{})):(p.value.extra_directories=[],p.value.extra_directories_enabled={}),console.log("[DEBUG] loadProjectTypeDefaults() finished - packages still:",p.value.packages.default_packages)},U=Z=>r.value?.project_types?.[Z]?.label||Z,B=re(()=>({overview:"Overview",basics:"Basics",author:"Author & Metadata",scaffold:"Scaffold Behavior",structure:"Project Structure",packages:"Packages & Dependencies",ai:"AI Assistants",git:"Git & Hooks",review:"Review & Create"})[f.value]||"New Project"),F=re(()=>({overview:"Quick overview of your project settings. We used your Framework Project Defaults as a starting point.",basics:"Essential project settings including name, location, type, and editor support.",author:"Configure author information embedded in project templates.",scaffold:"Runtime settings that control what happens when scaffold() runs.",structure:"Customize which directories to create for this project type.",packages:"Configure package management and default packages.",ai:"Configure AI assistant integration for this project.",git:"Configure version control and git hooks.",review:"Review your project configuration and create the project."})[f.value]||"");re(()=>({vscode:"Positron / VS Code",rstudio:"RStudio","rstudio,vscode":"Both",none:"Other"})[p.value.scaffold.ide]||p.value.scaffold.ide);const j=re(()=>{const Z=[];return p.value.git.hooks.ai_sync&&Z.push("Sync AI files"),p.value.git.hooks.data_security&&Z.push("Check for secrets"),p.value.git.hooks.check_sensitive_dirs&&Z.push("Warn about sensitive dirs"),Z}),T=re({get(){const Z=p.value.git.hooks||{};return{initialize:p.value.git.initialize,user_name:p.value.git.user_name||"",user_email:p.value.git.user_email||"",hooks:{ai_sync:Z.ai_sync||!1,data_security:Z.data_security||!1,check_sensitive_dirs:Z.check_sensitive_dirs||!1}}},set(Z){p.value.git.initialize=Z.initialize,p.value.git.user_name=Z.user_name,p.value.git.user_email=Z.user_email,p.value.git.hooks={ai_sync:Z.hooks.ai_sync,data_security:Z.hooks.data_security,check_sensitive_dirs:Z.hooks.check_sensitive_dirs}}});re(()=>{const Z=p.value.location,S=n.value?.global?.projects_root;return!Z||Z===S?"(not set)":Z});const A=(Z,S)=>{d(),S?p.value.ai.assistants.includes(Z)||p.value.ai.assistants.push(Z):p.value.ai.assistants=p.value.ai.assistants.filter(v=>v!==Z)},J=Z=>{p.value.location=Z;const S=n.value?.global?.projects_root||"",v=typeof Z=="string"?Z.trim():"";!v||S&&v===S?(_.value=!0,$()):_.value=!1},ie=()=>{p.value.packages.default_packages||(p.value.packages.default_packages=[]),p.value.packages.default_packages.push({name:"",source:"cran",auto_attach:!1})},ge=Z=>{p.value.packages.default_packages.splice(Z,1)},le=async Z=>{try{const S=await fetch(`/api/templates/${Z}`);if(S.ok){const v=await S.json();v.success&&v.contents&&(p.value.git.gitignore_content=v.contents)}}catch(S){console.error("Failed to load gitignore template:",S)}},W=async()=>{p.value.git.gitignore_template&&(await le(p.value.git.gitignore_template),i.success("Template Reset","Restored default .gitignore template"))},he=async(Z,S)=>{try{let v;if(Z==="CLAUDE.md")switch(S){case"project_sensitive":v="ai_claude_sensitive";break;case"course":v="ai_claude_course";break;case"presentation":v="ai_claude_presentation";break;default:v="ai_claude_project"}else Z==="AGENTS.md"?v="ai_agents":Z===".github/copilot-instructions.md"&&(v="ai_copilot");const H=await fetch(`/api/templates/${v}`);if(H.ok){const N=await H.json();N.success&&N.contents&&(p.value.ai.canonical_content=N.contents)}}catch(v){console.error("Failed to load AI template:",v)}},te=re(()=>r.value?.project_types?r.value.project_types[p.value.type]?.directories||{}:{});re(()=>Object.values(p.value.directories_enabled).filter(Z=>Z).length);const we=Z=>Object.keys(p.value.directories_enabled).filter(v=>p.value.directories_enabled[v]?Z==="workspace"?v==="notebooks"||v==="scripts"||v==="functions":Z==="input"?v.startsWith("inputs_"):Z==="output"?v.startsWith("outputs_"):Z==="temporary"?v==="cache"||v==="scratch":!1:!1).length,G=Z=>Array.isArray(p.value.extra_directories)?p.value.extra_directories.filter(S=>S.type===Z&&S._source==="global"):[],X=Z=>Array.isArray(p.value.extra_directories)?p.value.extra_directories.filter(S=>S.type===Z&&S._source!=="global"):[],se=(Z,S)=>{Array.isArray(p.value.extra_directories)||(p.value.extra_directories=[]);const v=p.value.extra_directories.filter(N=>N._source==="global"||N.type!==Z&&N._source!=="global"),H=S.map(N=>({...N,type:Z,_source:"project"}));p.value.extra_directories=[...v,...H],H.forEach(N=>{N.key&&!p.value.extra_directories_enabled[N.key]&&(p.value.extra_directories_enabled[N.key]=!0)})},Re=Z=>{e.push({query:{...s.query,section:Z}})},$=()=>{if(!_.value||!p.value.name||!p.value.name.trim())return;const Z=n.value?.global?.projects_root||"";if(!Z)return;const S=(p.value.location||"").trim();if(S&&!S.startsWith(Z))return;const v=p.value.name.toLowerCase().trim().replace(/[\s_]+/g,"-").replace(/[^a-z0-9-]/g,"").replace(/-+/g,"-").replace(/^-|-$/g,"");if(!v){p.value.location=Z;return}const H=Z.replace(/\/+$/,"");p.value.location=`${H}/${v}`},Pe=async()=>{if(!p.value.name||!p.value.name.trim()){i.error("Validation Error","Project name is required"),Re("overview");return}if(!p.value.location||!p.value.location.trim()){i.error("Validation Error","Project location is required"),Re("overview");return}try{h.value=!0;const Z=r.value?.project_types?.[p.value.type],S={};Z?.directories&&Object.entries(Z.directories).forEach(([Q,xe])=>{p.value.directories_enabled[Q]&&(S[Q]=xe.default)});const v={name:p.value.name.trim(),location:p.value.location.trim(),type:p.value.type,author:p.value.author,scaffold:p.value.scaffold,packages:p.value.packages,ai:p.value.ai,git:p.value.git,directories:S},H=await fetch("/api/projects/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)});if(!H.ok){const Q=await H.json();throw new Error(Q.message||"Failed to create project")}const N=await H.json();i.success("Project Created",`${p.value.name} has been created successfully`),e.push("/projects")}catch(Z){console.error("Failed to create project:",Z),i.error("Creation Failed",Z.message||"Could not create the project")}finally{h.value=!1}},Le=Z=>{(Z.metaKey||Z.ctrlKey)&&Z.key==="s"&&(Z.preventDefault(),Pe())};return ss(()=>{window.addEventListener("keydown",Le)}),Ar(()=>{window.removeEventListener("keydown",Le)}),(Z,S)=>(g(),b("div",fV,[c("nav",hV,[S[37]||(S[37]=c("h2",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"New Project",-1)),c("div",pV,[(g(),b(ee,null,ke(u,v=>(g(),b(ee,{key:v.id},[v.id==="basics"?(g(),me(Ta,{key:0},{default:R(()=>[...S[36]||(S[36]=[ne("Settings",-1)])]),_:1})):I("",!0),c("a",{href:"#",onClick:Ut(H=>f.value=v.id,["prevent"]),class:Te(["flex items-center gap-2 px-3 py-2 rounded-md text-sm transition",f.value===v.id?"bg-sky-50 text-sky-700 font-medium dark:bg-sky-900/20 dark:text-sky-400":"text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-800"])},[v.icon?(g(),me(Cs(v.icon),{key:0,class:"h-4 w-4"})):v.svgIcon?(g(),b("svg",{key:1,class:"h-4 w-4",fill:v.svgFill??"none",viewBox:v.svgViewBox??"0 0 24 24",stroke:v.svgStroke??"currentColor"},[c("path",{"stroke-linecap":v.svgStrokeLinecap??"round","stroke-linejoin":v.svgStrokeLinejoin??"round","stroke-width":v.svgStrokeWidth??2,fill:v.svgPathFill??"none",d:v.svgIcon},null,8,vV)],8,gV)):I("",!0),ne(" "+z(v.label),1)],10,mV)],64))),64))]),c("div",yV,[k(Ie,{variant:"primary",size:"md",class:"w-full",disabled:h.value||!p.value.name||!p.value.location,onClick:Pe},{default:R(()=>[ne(z(h.value?"Creating...":"Create Project"),1)]),_:1},8,["disabled"])])]),c("div",bV,[k(Mr,{title:B.value,description:F.value},null,8,["title","description"]),c("div",xV,[Ye(c("div",null,[c("div",kV,[k(js,{title:"Basics",onClick:S[0]||(S[0]=v=>f.value="basics")},{default:R(()=>[c("span",wV,z(p.value.name||"Untitled Project"),1),p.value.author.name?(g(),b(ee,{key:0},[S[38]||(S[38]=c("span",{class:"text-gray-400 dark:text-gray-500 mx-1"},"",-1)),c("span",_V,z(p.value.author.name),1)],64)):I("",!0),S[39]||(S[39]=c("span",{class:"text-gray-400 dark:text-gray-500 mx-1"},"",-1)),c("span",SV,z(U(p.value.type)),1)]),_:1}),k(js,{title:"Project Structure",onClick:S[1]||(S[1]=v=>f.value="structure")},{default:R(()=>[c("span",CV,z(U(p.value.type)),1),S[41]||(S[41]=c("span",{class:"text-gray-400 dark:text-gray-500 mx-1"},"",-1)),c("span",AV,z(we("workspace"))+" workspace",1),S[42]||(S[42]=c("span",{class:"text-gray-400 dark:text-gray-500 mx-1"},"",-1)),c("span",VV,z(we("input"))+" input",1),we("output")>0?(g(),b(ee,{key:0},[S[40]||(S[40]=c("span",{class:"text-gray-400 dark:text-gray-500 mx-1"},"",-1)),c("span",MV,z(we("output"))+" output",1)],64)):I("",!0)]),_:1}),k(js,{title:"Packages",onClick:S[2]||(S[2]=v=>f.value="packages")},{default:R(()=>[c("span",DV," renv: "+z(p.value.packages.use_renv?"enabled":"disabled"),1),p.value.packages.default_packages&&p.value.packages.default_packages.length>0?(g(),b(ee,{key:0},[S[43]||(S[43]=c("span",{class:"text-gray-400 dark:text-gray-500 mx-1"},"",-1)),c("span",TV,z(p.value.packages.default_packages.length)+" package"+z(p.value.packages.default_packages.length!==1?"s":""),1)],64)):I("",!0)]),_:1}),k(js,{title:"AI Assistants",onClick:S[3]||(S[3]=v=>f.value="ai")},{default:R(()=>[p.value.ai.enabled&&Array.isArray(p.value.ai.assistants)&&p.value.ai.assistants.length>0?(g(),b(ee,{key:0},[ne(z(p.value.ai.assistants.map(v=>v.charAt(0).toUpperCase()+v.slice(1)).join(", "))+" ",1),S[44]||(S[44]=c("span",{class:"text-gray-400 dark:text-gray-500 mx-1"},"",-1)),c("span",$V,z(p.value.ai.canonical_file),1)],64)):p.value.ai.enabled?(g(),b("span",EV,"Enabled (no assistants selected)")):(g(),b("span",OV,"Disabled"))]),_:1}),k(js,{title:"Git & Hooks",onClick:S[4]||(S[4]=v=>f.value="git")},{default:R(()=>[c("span",PV," Git: "+z(p.value.git.initialize?"enabled":"disabled"),1),p.value.git.initialize&&j.value.length>0?(g(),b(ee,{key:0},[S[45]||(S[45]=c("span",{class:"text-gray-400 dark:text-gray-500 mx-1"},"",-1)),c("span",jV,z(j.value.join(", ")),1)],64)):I("",!0)]),_:1}),k(js,{title:"Scaffold Behavior",onClick:S[5]||(S[5]=v=>f.value="scaffold")},{default:R(()=>[c("span",LV,[p.value.scaffold.source_all_functions?(g(),b(ee,{key:0},[S[46]||(S[46]=ne(" Functions loaded from ",-1)),S[47]||(S[47]=c("code",{class:"text-xs bg-gray-100 dark:bg-gray-800 px-1 rounded"},"functions/",-1))],64)):(g(),b(ee,{key:1},[ne(" Does not load functions ")],64))]),S[48]||(S[48]=c("span",{class:"text-gray-400 dark:text-gray-500 mx-1"},"",-1)),c("span",RV,[p.value.scaffold.set_theme_on_scaffold?(g(),b(ee,{key:0},[ne(" ggplot2: "+z((p.value.scaffold.ggplot_theme||"theme_minimal").replace("theme_","")),1)],64)):(g(),b(ee,{key:1},[ne(" No ggplot theme ")],64))]),S[49]||(S[49]=c("span",{class:"text-gray-400 dark:text-gray-500 mx-1"},"",-1)),c("span",BV,z(p.value.scaffold.seed_on_scaffold?"Seed: "+(p.value.scaffold.seed||"default"):"No random seed"),1)]),_:1})])],512),[[at,f.value==="overview"]]),Ye(c("div",null,[c("div",IV,[c("div",NV,[k(Y,{ref_key:"projectNameInput",ref:m,modelValue:p.value.name,"onUpdate:modelValue":S[6]||(S[6]=v=>p.value.name=v),label:"Project Name",hint:"Human-readable name for your project",placeholder:"My Analysis Project",required:""},null,8,["modelValue"]),k(Y,{"model-value":p.value.location,"onUpdate:modelValue":J,label:"Project Location",hint:"Directory where the project will be created",placeholder:"e.g., ~/projects or /Users/yourname/code"},null,8,["model-value"]),k(Jt,{modelValue:p.value.type,"onUpdate:modelValue":S[7]||(S[7]=v=>p.value.type=v),label:"Project Type",hint:"Choose the template structure for your project"},{default:R(()=>[...S[50]||(S[50]=[c("option",{value:"project"},"Research Project",-1),c("option",{value:"course"},"Course",-1),c("option",{value:"presentation"},"Presentation",-1)])]),_:1},8,["modelValue"]),c("div",null,[S[52]||(S[52]=c("label",{class:"block text-sm font-semibold text-gray-900 dark:text-white mb-3"}," Supported Editors ",-1)),k(pi,{modelValue:p.value.scaffold.positron,"onUpdate:modelValue":S[8]||(S[8]=v=>p.value.scaffold.positron=v),id:"support-positron",description:"Enable Positron-specific workspace and settings files"},{default:R(()=>[...S[51]||(S[51]=[ne(" Positron ",-1)])]),_:1},8,["modelValue"]),S[53]||(S[53]=c("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-3"}," RStudio supported by default ",-1))]),k(Jt,{modelValue:p.value.scaffold.notebook_format,"onUpdate:modelValue":S[9]||(S[9]=v=>p.value.scaffold.notebook_format=v),label:"Default Notebook Format",hint:"Format used when creating new notebooks"},{default:R(()=>[...S[54]||(S[54]=[c("option",{value:"quarto"},"Quarto (.qmd)",-1),c("option",{value:"rmarkdown"},"R Markdown (.Rmd)",-1)])]),_:1},8,["modelValue"]),c("div",UV,[S[55]||(S[55]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"}," Author Information ",-1)),S[56]||(S[56]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-5"}," Author information is embedded in project templates and documentation. ",-1)),c("div",zV,[k(Y,{modelValue:p.value.author.name,"onUpdate:modelValue":S[10]||(S[10]=v=>p.value.author.name=v),label:"Your Name",placeholder:"Your Name"},null,8,["modelValue"]),k(Y,{modelValue:p.value.author.email,"onUpdate:modelValue":S[11]||(S[11]=v=>p.value.author.email=v),type:"email",label:"Email",placeholder:"your.email@example.com"},null,8,["modelValue"]),k(Y,{modelValue:p.value.author.affiliation,"onUpdate:modelValue":S[12]||(S[12]=v=>p.value.author.affiliation=v),label:"Affiliation",placeholder:"Organization"},null,8,["modelValue"])])])])])],512),[[at,f.value==="basics"]]),Ye(c("div",null,[c("div",FV,[S[57]||(S[57]=c("div",null,[c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"}," Scaffold Behavior "),c("p",{class:"text-sm text-gray-600 dark:text-gray-400"},[ne(" Automatic actions when "),c("code",{class:"px-1.5 py-0.5 bg-gray-200 dark:bg-gray-700 rounded text-xs"},"scaffold()"),ne(" runs to initialize your project environment. ")])],-1)),k(Sf,{modelValue:p.value.scaffold,"onUpdate:modelValue":S[13]||(S[13]=v=>p.value.scaffold=v),flush:""},null,8,["modelValue"])])],512),[[at,f.value==="scaffold"]]),Ye(c("div",HV,[c("div",WV,[k(B4,{legend:"Project Type",description:"Select a project type to customize the directory structure."},{default:R(()=>[k(hl,{modelValue:p.value.type,"onUpdate:modelValue":S[14]||(S[14]=v=>p.value.type=v),id:"type-project",name:"project-type",value:"project"},{default:R(()=>[...S[58]||(S[58]=[c("div",null,[c("div",{class:"font-medium text-sm"},"Research Project"),c("div",{class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5"}," Full-featured with organized data, work, and output directories ")],-1)])]),_:1},8,["modelValue"]),k(hl,{modelValue:p.value.type,"onUpdate:modelValue":S[15]||(S[15]=v=>p.value.type=v),id:"type-sensitive",name:"project-type",value:"project_sensitive"},{default:R(()=>[...S[59]||(S[59]=[c("div",null,[c("div",{class:"font-medium text-sm"},"Privacy Sensitive Project"),c("div",{class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5"}," Enhanced privacy controls with separate private/public flows ")],-1)])]),_:1},8,["modelValue"]),k(hl,{modelValue:p.value.type,"onUpdate:modelValue":S[16]||(S[16]=v=>p.value.type=v),id:"type-presentation",name:"project-type",value:"presentation"},{default:R(()=>[...S[60]||(S[60]=[c("div",null,[c("div",{class:"font-medium text-sm"},"Presentation"),c("div",{class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5"}," Minimal structure for slides and presentations ")],-1)])]),_:1},8,["modelValue"]),k(hl,{modelValue:p.value.type,"onUpdate:modelValue":S[17]||(S[17]=v=>p.value.type=v),id:"type-course",name:"project-type",value:"course"},{default:R(()=>[...S[61]||(S[61]=[c("div",null,[c("div",{class:"font-medium text-sm"},"Course/Teaching"),c("div",{class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5"}," Simplified structure for teaching materials ")],-1)])]),_:1},8,["modelValue"])]),_:1})]),p.value.type==="presentation"?(g(),b("div",qV,[S[62]||(S[62]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Presentation File",-1)),k(Y,{modelValue:p.value.directories.presentation_source,"onUpdate:modelValue":S[18]||(S[18]=v=>p.value.directories.presentation_source=v),label:"Presentation source file",placeholder:"presentation.qmd",hint:"Main Quarto file for your slides"},null,8,["modelValue"])])):I("",!0),p.value.type==="project"?(g(),b("div",KV,[S[65]||(S[65]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Workspaces",-1)),S[66]||(S[66]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Functions, notebooks, and scripts scaffolded into every project.",-1)),c("div",GV,[(g(),b(ee,null,ke(["functions","notebooks","scripts"],v=>c("div",{key:v},[k(Ne,{id:`dir-${v}`,modelValue:p.value.directories_enabled[v],"onUpdate:modelValue":H=>p.value.directories_enabled[v]=H,label:te.value[v]?.label||v,description:te.value[v]?.hint,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),p.value.directories_enabled[v]?(g(),me(Y,{key:0,modelValue:p.value.directories[v],"onUpdate:modelValue":H=>p.value.directories[v]=H,placeholder:te.value[v]?.default,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)])),64)),(g(!0),b(ee,null,ke(G("workspace"),v=>(g(),b("div",{key:`extra-${v.key}`},[k(Ne,{id:`extra-dir-${v.key}`,modelValue:p.value.extra_directories_enabled[v.key],"onUpdate:modelValue":H=>p.value.extra_directories_enabled[v.key]=H,label:v.label,description:`Custom: ${v.path}`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),p.value.extra_directories_enabled[v.key]?(g(),me(Y,{key:0,modelValue:v.path,"onUpdate:modelValue":H=>v.path=H,placeholder:v.path,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]))),128))]),c("div",JV,[S[63]||(S[63]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Add Custom Workspace Directories",-1)),S[64]||(S[64]=c("p",{class:"text-xs text-gray-600 dark:text-gray-400 mb-3"},"Add directories specific to this project only.",-1)),k(xt,{"model-value":X("workspace"),"onUpdate:modelValue":S[19]||(S[19]=v=>se("workspace",v)),"add-label":"Add Workspace Directory","default-item":()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:R(({item:v,index:H,update:N})=>[c("div",YV,[k(Y,{"model-value":v.key,"onUpdate:modelValue":Q=>N("key",Q),label:"Key",placeholder:"e.g., tests",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(Y,{"model-value":v.label,"onUpdate:modelValue":Q=>N("label",Q),label:"Label",placeholder:"e.g., Tests",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(Y,{"model-value":v.path,"onUpdate:modelValue":Q=>N("path",Q),label:"Path",placeholder:"e.g., tests",prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])])):I("",!0),p.value.type==="project"?(g(),b("div",XV,[S[69]||(S[69]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Inputs",-1)),S[70]||(S[70]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Define the read-only locations where raw and prepared data live.",-1)),c("div",ZV,[(g(),b(ee,null,ke(["inputs_raw","inputs_intermediate","inputs_final","reference"],v=>c("div",{key:v},[k(Ne,{id:`dir-${v}`,modelValue:p.value.directories_enabled[v],"onUpdate:modelValue":H=>p.value.directories_enabled[v]=H,label:te.value[v]?.label||v,description:te.value[v]?.hint,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),p.value.directories_enabled[v]?(g(),me(Y,{key:0,modelValue:p.value.directories[v],"onUpdate:modelValue":H=>p.value.directories[v]=H,placeholder:te.value[v]?.default,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)])),64)),(g(!0),b(ee,null,ke(G("input"),v=>(g(),b("div",{key:`extra-${v.key}`},[k(Ne,{id:`extra-dir-${v.key}`,modelValue:p.value.extra_directories_enabled[v.key],"onUpdate:modelValue":H=>p.value.extra_directories_enabled[v.key]=H,label:v.label,description:`Custom: ${v.path}`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),p.value.extra_directories_enabled[v.key]?(g(),me(Y,{key:0,modelValue:v.path,"onUpdate:modelValue":H=>v.path=H,placeholder:v.path,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]))),128))]),c("div",QV,[S[67]||(S[67]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Add Custom Input Directories",-1)),S[68]||(S[68]=c("p",{class:"text-xs text-gray-600 dark:text-gray-400 mb-3"},"Add directories specific to this project only.",-1)),k(xt,{"model-value":X("input"),"onUpdate:modelValue":S[20]||(S[20]=v=>se("input",v)),"add-label":"Add Input Directory","default-item":()=>({key:"",label:"",path:"",type:"input",_id:Date.now()})},{default:R(({item:v,index:H,update:N})=>[c("div",eM,[k(Y,{"model-value":v.key,"onUpdate:modelValue":Q=>N("key",Q),label:"Key",placeholder:"e.g., inputs_archive",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(Y,{"model-value":v.label,"onUpdate:modelValue":Q=>N("label",Q),label:"Label",placeholder:"e.g., Archive",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(Y,{"model-value":v.path,"onUpdate:modelValue":Q=>N("path",Q),label:"Path",placeholder:"e.g., inputs/archive",prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])])):I("",!0),p.value.type==="project"?(g(),b("div",tM,[S[72]||(S[72]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Outputs",-1)),S[73]||(S[73]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Outputs are public by default so results are easy to share.",-1)),c("div",sM,[(g(),b(ee,null,ke(["outputs_notebooks","outputs_tables","outputs_figures","outputs_models","outputs_reports"],v=>c("div",{key:v},[k(Ne,{id:`dir-${v}`,modelValue:p.value.directories_enabled[v],"onUpdate:modelValue":H=>p.value.directories_enabled[v]=H,label:te.value[v]?.label||v,description:te.value[v]?.hint,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),p.value.directories_enabled[v]?(g(),me(Y,{key:0,modelValue:p.value.directories[v],"onUpdate:modelValue":H=>p.value.directories[v]=H,placeholder:te.value[v]?.default,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)])),64)),(g(!0),b(ee,null,ke(G("output"),v=>(g(),b("div",{key:`extra-${v.key}`},[k(Ne,{id:`extra-${v.key}`,modelValue:p.value.extra_directories_enabled[v.key],"onUpdate:modelValue":H=>p.value.extra_directories_enabled[v.key]=H,label:v.label,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label"]),p.value.extra_directories_enabled[v.key]?(g(),me(Y,{key:0,modelValue:v.path,"onUpdate:modelValue":H=>v.path=H,placeholder:v.path,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]))),128))]),c("div",iM,[S[71]||(S[71]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Add Custom Output Directories",-1)),k(xt,{"model-value":X("output"),"onUpdate:modelValue":S[21]||(S[21]=v=>se("output",v)),"add-label":"Add Output Directory","default-item":()=>({key:"",label:"",path:"",type:"output",_id:Date.now()})},{default:R(({item:v,index:H,update:N})=>[c("div",nM,[k(Y,{"model-value":v.key,"onUpdate:modelValue":Q=>N("key",Q),label:"Key",placeholder:"e.g., outputs_animations",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(Y,{"model-value":v.label,"onUpdate:modelValue":Q=>N("label",Q),label:"Label",placeholder:"e.g., Animations",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(Y,{"model-value":v.path,"onUpdate:modelValue":Q=>N("path",Q),label:"Path",placeholder:"e.g., outputs/animations",prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])])):I("",!0),p.value.type==="project"?(g(),b("div",rM,[S[75]||(S[75]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Temporary",-1)),S[76]||(S[76]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Scratch space and cache (gitignored by default).",-1)),c("div",oM,[(g(),b(ee,null,ke(["cache","scratch"],v=>c("div",{key:v},[k(Ne,{id:`dir-${v}`,modelValue:p.value.directories_enabled[v],"onUpdate:modelValue":H=>p.value.directories_enabled[v]=H,label:te.value[v]?.label||v,description:te.value[v]?.hint,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),p.value.directories_enabled[v]?(g(),me(Y,{key:0,modelValue:p.value.directories[v],"onUpdate:modelValue":H=>p.value.directories[v]=H,placeholder:te.value[v]?.default,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)])),64)),(g(!0),b(ee,null,ke(G("temporary"),v=>(g(),b("div",{key:`extra-${v.key}`},[k(Ne,{id:`extra-${v.key}`,modelValue:p.value.extra_directories_enabled[v.key],"onUpdate:modelValue":H=>p.value.extra_directories_enabled[v.key]=H,label:v.label,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label"]),p.value.extra_directories_enabled[v.key]?(g(),me(Y,{key:0,modelValue:v.path,"onUpdate:modelValue":H=>v.path=H,placeholder:v.path,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]))),128))]),c("div",lM,[S[74]||(S[74]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Add Custom Temporary Directories",-1)),k(xt,{"model-value":X("temporary"),"onUpdate:modelValue":S[22]||(S[22]=v=>se("temporary",v)),"add-label":"Add Temporary Directory","default-item":()=>({key:"",label:"",path:"",type:"temporary",_id:Date.now()})},{default:R(({item:v,index:H,update:N})=>[c("div",aM,[k(Y,{"model-value":v.key,"onUpdate:modelValue":Q=>N("key",Q),label:"Key",placeholder:"e.g., temp_downloads",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(Y,{"model-value":v.label,"onUpdate:modelValue":Q=>N("label",Q),label:"Label",placeholder:"e.g., Downloads",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(Y,{"model-value":v.path,"onUpdate:modelValue":Q=>N("path",Q),label:"Path",placeholder:"e.g., temp/downloads",prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])])):I("",!0),p.value.type==="course"?(g(),b("div",uM,[S[78]||(S[78]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Course Materials",-1)),S[79]||(S[79]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Slides, assignments, readings, and documentation.",-1)),c("div",dM,[(g(),b(ee,null,ke(["slides","assignments","readings","course_docs"],v=>c("div",{key:v},[k(Ne,{id:`dir-${v}`,modelValue:p.value.directories_enabled[v],"onUpdate:modelValue":H=>p.value.directories_enabled[v]=H,label:te.value[v]?.label||v,description:te.value[v]?.hint,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),p.value.directories_enabled[v]?(g(),me(Y,{key:0,modelValue:p.value.directories[v],"onUpdate:modelValue":H=>p.value.directories[v]=H,placeholder:te.value[v]?.default,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)])),64)),(g(!0),b(ee,null,ke(G("workspace"),v=>(g(),b("div",{key:`extra-${v.key}`},[k(Ne,{id:`extra-dir-${v.key}`,modelValue:p.value.extra_directories_enabled[v.key],"onUpdate:modelValue":H=>p.value.extra_directories_enabled[v.key]=H,label:v.label,description:`Custom: ${v.path}`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),p.value.extra_directories_enabled[v.key]?(g(),me(Y,{key:0,modelValue:v.path,"onUpdate:modelValue":H=>v.path=H,placeholder:v.path,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]))),128))]),c("div",cM,[S[77]||(S[77]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Add Custom Directories",-1)),k(xt,{"model-value":X("workspace"),"onUpdate:modelValue":S[23]||(S[23]=v=>se("workspace",v)),"add-label":"Add Directory","default-item":()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:R(({item:v,index:H,update:N})=>[c("div",fM,[k(Y,{"model-value":v.key,"onUpdate:modelValue":Q=>N("key",Q),label:"Key",placeholder:"e.g., exercises",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(Y,{"model-value":v.label,"onUpdate:modelValue":Q=>N("label",Q),label:"Label",placeholder:"e.g., Exercises",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(Y,{"model-value":v.path,"onUpdate:modelValue":Q=>N("path",Q),label:"Path",placeholder:"e.g., exercises",prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])])):I("",!0),p.value.type==="course"?(g(),b("div",hM,[S[80]||(S[80]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Workspaces",-1)),S[81]||(S[81]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Module notebooks, functions, and scripts.",-1)),c("div",pM,[(g(),b(ee,null,ke(["notebooks","functions","scripts"],v=>c("div",{key:v},[k(Ne,{id:`dir-${v}`,modelValue:p.value.directories_enabled[v],"onUpdate:modelValue":H=>p.value.directories_enabled[v]=H,label:te.value[v]?.label||v,description:te.value[v]?.hint,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),p.value.directories_enabled[v]?(g(),me(Y,{key:0,modelValue:p.value.directories[v],"onUpdate:modelValue":H=>p.value.directories[v]=H,placeholder:te.value[v]?.default,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)])),64))])])):I("",!0),p.value.type==="course"?(g(),b("div",mM,[S[82]||(S[82]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Data & Storage",-1)),S[83]||(S[83]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Course datasets and temporary files.",-1)),c("div",gM,[(g(),b(ee,null,ke(["data","inputs","outputs","cache"],v=>c("div",{key:v},[k(Ne,{id:`dir-${v}`,modelValue:p.value.directories_enabled[v],"onUpdate:modelValue":H=>p.value.directories_enabled[v]=H,label:te.value[v]?.label||v,description:te.value[v]?.hint,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),p.value.directories_enabled[v]?(g(),me(Y,{key:0,modelValue:p.value.directories[v],"onUpdate:modelValue":H=>p.value.directories[v]=H,placeholder:te.value[v]?.default,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)])),64))])])):I("",!0),p.value.type==="presentation"?(g(),b("div",vM,[S[85]||(S[85]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Optional Directories",-1)),S[86]||(S[86]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Add supporting directories for data, scripts, or helper functions.",-1)),c("div",yM,[(g(),b(ee,null,ke(["data","scripts","functions"],v=>c("div",{key:v},[k(Ne,{id:`dir-${v}`,modelValue:p.value.directories_enabled[v],"onUpdate:modelValue":H=>p.value.directories_enabled[v]=H,label:te.value[v]?.label||v,description:te.value[v]?.hint,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),p.value.directories_enabled[v]?(g(),me(Y,{key:0,modelValue:p.value.directories[v],"onUpdate:modelValue":H=>p.value.directories[v]=H,placeholder:te.value[v]?.default,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)])),64)),(g(!0),b(ee,null,ke(G("workspace"),v=>(g(),b("div",{key:`extra-${v.key}`},[k(Ne,{id:`extra-dir-${v.key}`,modelValue:p.value.extra_directories_enabled[v.key],"onUpdate:modelValue":H=>p.value.extra_directories_enabled[v.key]=H,label:v.label,description:`Custom: ${v.path}`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),p.value.extra_directories_enabled[v.key]?(g(),me(Y,{key:0,modelValue:v.path,"onUpdate:modelValue":H=>v.path=H,placeholder:v.path,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]))),128))]),c("div",bM,[S[84]||(S[84]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Add Custom Directories",-1)),k(xt,{"model-value":X("workspace"),"onUpdate:modelValue":S[24]||(S[24]=v=>se("workspace",v)),"add-label":"Add Directory","default-item":()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:R(({item:v,index:H,update:N})=>[c("div",xM,[k(Y,{"model-value":v.key,"onUpdate:modelValue":Q=>N("key",Q),label:"Key",placeholder:"e.g., assets",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(Y,{"model-value":v.label,"onUpdate:modelValue":Q=>N("label",Q),label:"Label",placeholder:"e.g., Assets",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(Y,{"model-value":v.path,"onUpdate:modelValue":Q=>N("path",Q),label:"Path",placeholder:"e.g., assets",prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])])):I("",!0),p.value.type==="project_sensitive"?(g(),b("div",kM,[S[88]||(S[88]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Work Directories",-1)),S[89]||(S[89]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Module locations for notebooks, scripts, and helper functions.",-1)),c("div",wM,[(g(),b(ee,null,ke(["functions","notebooks","scripts"],v=>c("div",{key:v},[c("div",_M,[k(Ne,{id:`dir-${v}`,modelValue:p.value.directories_enabled[v],"onUpdate:modelValue":H=>p.value.directories_enabled[v]=H,label:te.value[v]?.label||v,description:te.value[v]?.hint,class:"flex-1"},null,8,["id","modelValue","onUpdate:modelValue","label","description"])]),p.value.directories_enabled[v]?(g(),me(Y,{key:0,modelValue:p.value.directories[v],"onUpdate:modelValue":H=>p.value.directories[v]=H,placeholder:te.value[v]?.default,class:"mt-2",prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)])),64)),(g(!0),b(ee,null,ke(G("workspace"),v=>(g(),b("div",{key:`extra-${v.key}`},[k(Ne,{id:`extra-dir-${v.key}`,modelValue:p.value.extra_directories_enabled[v.key],"onUpdate:modelValue":H=>p.value.extra_directories_enabled[v.key]=H,label:v.label,description:`Custom: ${v.path}`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),p.value.extra_directories_enabled[v.key]?(g(),me(Y,{key:0,modelValue:v.path,"onUpdate:modelValue":H=>v.path=H,placeholder:v.path,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]))),128))]),c("div",SM,[S[87]||(S[87]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Add Custom Workspace Directories",-1)),k(xt,{"model-value":X("workspace"),"onUpdate:modelValue":S[25]||(S[25]=v=>se("workspace",v)),"add-label":"Add Workspace Directory","default-item":()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:R(({item:v,index:H,update:N})=>[c("div",CM,[k(Y,{"model-value":v.key,"onUpdate:modelValue":Q=>N("key",Q),label:"Key",placeholder:"e.g., helpers",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(Y,{"model-value":v.label,"onUpdate:modelValue":Q=>N("label",Q),label:"Label",placeholder:"e.g., Helper Functions",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(Y,{"model-value":v.path,"onUpdate:modelValue":Q=>N("path",Q),label:"Path",placeholder:"e.g., helpers",prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])])):I("",!0),p.value.type==="project_sensitive"?(g(),b("div",AM,[S[93]||(S[93]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Inputs",-1)),S[94]||(S[94]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Keep private inputs compartmentalized; publish processed data into public folders when ready. ",-1)),S[95]||(S[95]=c("div",{class:"grid gap-4 sm:grid-cols-2 text-xs font-semibold uppercase text-gray-500 dark:text-gray-400 mb-3"},[c("div",null,"Private"),c("div",null,"Public")],-1)),c("div",VM,[(g(),b(ee,null,ke(["raw","intermediate","final"],v=>c("div",{key:v},[c("div",MM,[c("div",DM,[k(Ne,{id:`dir-inputs_private_${v}`,modelValue:p.value.directories_enabled[`inputs_private_${v}`],"onUpdate:modelValue":H=>p.value.directories_enabled[`inputs_private_${v}`]=H,label:`${v.charAt(0).toUpperCase()+v.slice(1)} data`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label"]),p.value.directories_enabled[`inputs_private_${v}`]?(g(),me(Y,{key:0,modelValue:p.value.directories[`inputs_private_${v}`],"onUpdate:modelValue":H=>p.value.directories[`inputs_private_${v}`]=H,placeholder:`inputs/private/${v}`,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]),c("div",TM,[k(Ne,{id:`dir-inputs_public_${v}`,modelValue:p.value.directories_enabled[`inputs_public_${v}`],"onUpdate:modelValue":H=>p.value.directories_enabled[`inputs_public_${v}`]=H,label:`${v.charAt(0).toUpperCase()+v.slice(1)} data`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label"]),p.value.directories_enabled[`inputs_public_${v}`]?(g(),me(Y,{key:0,modelValue:p.value.directories[`inputs_public_${v}`],"onUpdate:modelValue":H=>p.value.directories[`inputs_public_${v}`]=H,placeholder:`inputs/public/${v}`,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)])])])),64)),c("div",$M,[c("div",EM,[(g(!0),b(ee,null,ke(G("input_private"),v=>(g(),b("div",{key:`extra-${v.key}`,class:"p-3 rounded-md"},[k(Ne,{id:`extra-dir-${v.key}`,modelValue:p.value.extra_directories_enabled[v.key],"onUpdate:modelValue":H=>p.value.extra_directories_enabled[v.key]=H,label:v.label,description:`Custom: ${v.path}`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),p.value.extra_directories_enabled[v.key]?(g(),me(Y,{key:0,modelValue:v.path,"onUpdate:modelValue":H=>v.path=H,placeholder:v.path,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]))),128))]),c("div",OM,[(g(!0),b(ee,null,ke(G("input_public"),v=>(g(),b("div",{key:`extra-${v.key}`,class:"p-3 rounded-md"},[k(Ne,{id:`extra-dir-${v.key}`,modelValue:p.value.extra_directories_enabled[v.key],"onUpdate:modelValue":H=>p.value.extra_directories_enabled[v.key]=H,label:v.label,description:`Custom: ${v.path}`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),p.value.extra_directories_enabled[v.key]?(g(),me(Y,{key:0,modelValue:v.path,"onUpdate:modelValue":H=>v.path=H,placeholder:v.path,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]))),128))])])]),c("div",PM,[S[92]||(S[92]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-4"},"Add Custom Input Directories",-1)),c("div",jM,[c("div",null,[S[90]||(S[90]=c("p",{class:"text-xs font-semibold uppercase text-gray-500 dark:text-gray-400 mb-3"},"Private",-1)),k(xt,{"model-value":X("input_private"),"onUpdate:modelValue":S[26]||(S[26]=v=>se("input_private",v)),"add-label":"Add Private Input","default-item":()=>({key:"",label:"",path:"",type:"input_private",_id:Date.now()})},{default:R(({item:v,index:H,update:N})=>[c("div",LM,[k(Y,{"model-value":v.key,"onUpdate:modelValue":Q=>N("key",Q),label:"Key",placeholder:"e.g., inputs_private_survey",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(Y,{"model-value":v.label,"onUpdate:modelValue":Q=>N("label",Q),label:"Label",placeholder:"e.g., Survey Data",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(Y,{"model-value":v.path,"onUpdate:modelValue":Q=>N("path",Q),label:"Path",placeholder:"e.g., inputs/private/survey",prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])]),c("div",null,[S[91]||(S[91]=c("p",{class:"text-xs font-semibold uppercase text-gray-500 dark:text-gray-400 mb-3"},"Public",-1)),k(xt,{"model-value":X("input_public"),"onUpdate:modelValue":S[27]||(S[27]=v=>se("input_public",v)),"add-label":"Add Public Input","default-item":()=>({key:"",label:"",path:"",type:"input_public",_id:Date.now()})},{default:R(({item:v,index:H,update:N})=>[c("div",RM,[k(Y,{"model-value":v.key,"onUpdate:modelValue":Q=>N("key",Q),label:"Key",placeholder:"e.g., inputs_public_survey",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(Y,{"model-value":v.label,"onUpdate:modelValue":Q=>N("label",Q),label:"Label",placeholder:"e.g., Survey Data",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(Y,{"model-value":v.path,"onUpdate:modelValue":Q=>N("path",Q),label:"Path",placeholder:"e.g., inputs/public/survey",prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])])])])):I("",!0),p.value.type==="project_sensitive"?(g(),b("div",BM,[S[99]||(S[99]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Outputs",-1)),S[100]||(S[100]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Review outputs before promotion; private folders remain gitignored while public copies are ready to share. ",-1)),S[101]||(S[101]=c("div",{class:"grid gap-4 sm:grid-cols-2 text-xs font-semibold uppercase text-gray-500 dark:text-gray-400 mb-3"},[c("div",null,"Private"),c("div",null,"Public")],-1)),c("div",IM,[(g(),b(ee,null,ke(["notebooks","tables","figures","models","reports"],v=>c("div",{key:v},[c("div",NM,[c("div",UM,[k(Ne,{id:`dir-outputs_private_${v}`,modelValue:p.value.directories_enabled[`outputs_private_${v}`],"onUpdate:modelValue":H=>p.value.directories_enabled[`outputs_private_${v}`]=H,label:v.replace("_"," ").charAt(0).toUpperCase()+v.replace("_"," ").slice(1),class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label"]),p.value.directories_enabled[`outputs_private_${v}`]?(g(),me(Y,{key:0,modelValue:p.value.directories[`outputs_private_${v}`],"onUpdate:modelValue":H=>p.value.directories[`outputs_private_${v}`]=H,placeholder:`outputs/private/${v}`,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]),c("div",zM,[k(Ne,{id:`dir-outputs_public_${v}`,modelValue:p.value.directories_enabled[`outputs_public_${v}`],"onUpdate:modelValue":H=>p.value.directories_enabled[`outputs_public_${v}`]=H,label:v.replace("_"," ").charAt(0).toUpperCase()+v.replace("_"," ").slice(1),class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label"]),p.value.directories_enabled[`outputs_public_${v}`]?(g(),me(Y,{key:0,modelValue:p.value.directories[`outputs_public_${v}`],"onUpdate:modelValue":H=>p.value.directories[`outputs_public_${v}`]=H,placeholder:`outputs/public/${v}`,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)])])])),64)),c("div",FM,[c("div",HM,[(g(!0),b(ee,null,ke(G("output_private"),v=>(g(),b("div",{key:`extra-${v.key}`,class:"p-3 rounded-md"},[k(Ne,{id:`extra-dir-${v.key}`,modelValue:p.value.extra_directories_enabled[v.key],"onUpdate:modelValue":H=>p.value.extra_directories_enabled[v.key]=H,label:v.label,description:`Custom: ${v.path}`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),p.value.extra_directories_enabled[v.key]?(g(),me(Y,{key:0,modelValue:v.path,"onUpdate:modelValue":H=>v.path=H,placeholder:v.path,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]))),128))]),c("div",WM,[(g(!0),b(ee,null,ke(G("output_public"),v=>(g(),b("div",{key:`extra-${v.key}`,class:"p-3 rounded-md"},[k(Ne,{id:`extra-dir-${v.key}`,modelValue:p.value.extra_directories_enabled[v.key],"onUpdate:modelValue":H=>p.value.extra_directories_enabled[v.key]=H,label:v.label,description:`Custom: ${v.path}`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),p.value.extra_directories_enabled[v.key]?(g(),me(Y,{key:0,modelValue:v.path,"onUpdate:modelValue":H=>v.path=H,placeholder:v.path,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]))),128))])])]),c("div",qM,[S[98]||(S[98]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-4"},"Add Custom Output Directories",-1)),c("div",KM,[c("div",null,[S[96]||(S[96]=c("p",{class:"text-xs font-semibold uppercase text-gray-500 dark:text-gray-400 mb-3"},"Private",-1)),k(xt,{"model-value":X("output_private"),"onUpdate:modelValue":S[28]||(S[28]=v=>se("output_private",v)),"add-label":"Add Private Output","default-item":()=>({key:"",label:"",path:"",type:"output_private",_id:Date.now()})},{default:R(({item:v,index:H,update:N})=>[c("div",GM,[k(Y,{"model-value":v.key,"onUpdate:modelValue":Q=>N("key",Q),label:"Key",placeholder:"e.g., outputs_private_videos",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(Y,{"model-value":v.label,"onUpdate:modelValue":Q=>N("label",Q),label:"Label",placeholder:"e.g., Videos",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(Y,{"model-value":v.path,"onUpdate:modelValue":Q=>N("path",Q),label:"Path",placeholder:"e.g., outputs/private/videos",prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])]),c("div",null,[S[97]||(S[97]=c("p",{class:"text-xs font-semibold uppercase text-gray-500 dark:text-gray-400 mb-3"},"Public",-1)),k(xt,{"model-value":X("output_public"),"onUpdate:modelValue":S[29]||(S[29]=v=>se("output_public",v)),"add-label":"Add Public Output","default-item":()=>({key:"",label:"",path:"",type:"output_public",_id:Date.now()})},{default:R(({item:v,index:H,update:N})=>[c("div",JM,[k(Y,{"model-value":v.key,"onUpdate:modelValue":Q=>N("key",Q),label:"Key",placeholder:"e.g., outputs_public_videos",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(Y,{"model-value":v.label,"onUpdate:modelValue":Q=>N("label",Q),label:"Label",placeholder:"e.g., Videos",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(Y,{"model-value":v.path,"onUpdate:modelValue":Q=>N("path",Q),label:"Path",placeholder:"e.g., outputs/public/videos",prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])])])])):I("",!0),p.value.type==="project_sensitive"?(g(),b("div",YM,[S[102]||(S[102]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Temporary",-1)),S[103]||(S[103]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Scratch space and cache (gitignored by default).",-1)),c("div",XM,[(g(),b(ee,null,ke(["cache","scratch"],v=>Ye(c("div",{key:v},[c("div",ZM,[k(Ne,{id:`dir-${v}`,modelValue:p.value.directories_enabled[v],"onUpdate:modelValue":H=>p.value.directories_enabled[v]=H,label:te.value[v]?.label,description:te.value[v]?.hint,class:"flex-1"},null,8,["id","modelValue","onUpdate:modelValue","label","description"])]),p.value.directories_enabled[v]?(g(),me(Y,{key:0,modelValue:p.value.directories[v],"onUpdate:modelValue":H=>p.value.directories[v]=H,placeholder:te.value[v]?.default,class:"mt-2",prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]),[[at,te.value[v]]])),64))])])):I("",!0),c("div",QM,[S[105]||(S[105]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},".gitignore Template",-1)),S[106]||(S[106]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Customize the .gitignore template for this project type. Uses pattern-based matching to catch sensitive directories anywhere in your project tree. ",-1)),k(Gi,{modelValue:p.value.git.gitignore_content,"onUpdate:modelValue":S[30]||(S[30]=v=>p.value.git.gitignore_content=v),language:"gitignore",class:"mb-4"},null,8,["modelValue"]),k(Ie,{variant:"secondary",size:"sm",onClick:W},{default:R(()=>[...S[104]||(S[104]=[ne(" Restore Default ",-1)])]),_:1})])],512),[[at,f.value==="structure"]]),Ye(c("div",null,[c("div",eD,[c("div",tD,[k(Ne,{modelValue:p.value.packages.use_renv,"onUpdate:modelValue":S[31]||(S[31]=v=>p.value.packages.use_renv=v),label:"Enable renv",description:"Use renv for package version management and reproducibility"},null,8,["modelValue"]),c("div",sD,[c("div",iD,[S[108]||(S[108]=c("div",null,[c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300"},"Default Packages"),c("p",{class:"text-xs text-gray-600 dark:text-gray-400 mt-1"},"Installed (and optionally attached) when scaffold() runs.")],-1)),k(Ie,{size:"sm",variant:"secondary",onClick:ie},{default:R(()=>[...S[107]||(S[107]=[ne("Add Package",-1)])]),_:1})]),p.value.packages.default_packages&&p.value.packages.default_packages.length?(g(),b("div",nD,[(g(!0),b(ee,null,ke(p.value.packages.default_packages,(v,H)=>(g(),b("div",{key:`pkg-${H}`,class:"rounded-md border border-gray-200 p-4 dark:border-gray-700"},[c("div",rD,[c("div",oD,[v.source==="cran"||v.source==="bioconductor"?(g(),me(wf,{key:0,modelValue:v.name,"onUpdate:modelValue":N=>v.name=N,source:v.source,label:"Package",placeholder:v.source==="cran"?"Search CRAN...":"Search Bioconductor...",onSelect:N=>v.name=N.name},null,8,["modelValue","onUpdate:modelValue","source","placeholder","onSelect"])):(g(),me(Y,{key:1,modelValue:v.name,"onUpdate:modelValue":N=>v.name=N,label:"Package",placeholder:"user/repo"},null,8,["modelValue","onUpdate:modelValue"])),k(Jt,{modelValue:v.source,"onUpdate:modelValue":N=>v.source=N,label:"Source"},{default:R(()=>[...S[109]||(S[109]=[c("option",{value:"cran"},"CRAN",-1),c("option",{value:"github"},"GitHub",-1),c("option",{value:"bioconductor"},"Bioconductor",-1)])]),_:1},8,["modelValue","onUpdate:modelValue"])]),c("div",lD,[k(Ne,{modelValue:v.auto_attach,"onUpdate:modelValue":N=>v.auto_attach=N,label:"Auto-Attach",description:"Call library() when scaffold() runs."},null,8,["modelValue","onUpdate:modelValue"]),k(Ie,{size:"sm",variant:"secondary",onClick:N=>ge(H)},{default:R(()=>[...S[110]||(S[110]=[ne("Remove",-1)])]),_:1},8,["onClick"])])])]))),128))])):(g(),b("p",aD,"No packages configured. Add packages to include tidyverse helpers or internal utilities automatically."))])])])],512),[[at,f.value==="packages"]]),Ye(c("div",null,[c("div",uD,[S[118]||(S[118]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Framework maintains context files for selected assistants and keeps them in sync before commits. ",-1)),c("div",dD,[c("div",null,[k(Ne,{modelValue:p.value.ai.enabled,"onUpdate:modelValue":S[32]||(S[32]=v=>p.value.ai.enabled=v),label:"Enable AI Support",description:"Generate and sync assistant-specific context files."},null,8,["modelValue"])]),p.value.ai.enabled?(g(),b(ee,{key:0},[c("div",cD,[S[112]||(S[112]=c("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Canonical context file",-1)),S[113]||(S[113]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," This file is the source of truth; other instructions files are synced to it when AI hooks run. ",-1)),k(Jt,{modelValue:p.value.ai.canonical_file,"onUpdate:modelValue":S[33]||(S[33]=v=>p.value.ai.canonical_file=v),label:"Canonical Context File"},{default:R(()=>[...S[111]||(S[111]=[c("option",{value:"AGENTS.md"},"AGENTS.md (multi-agent orchestrator)",-1),c("option",{value:"CLAUDE.md"},"CLAUDE.md",-1),c("option",{value:".github/copilot-instructions.md"},".github/copilot-instructions.md",-1)])]),_:1},8,["modelValue"])]),c("div",fD,[S[114]||(S[114]=c("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Assistants",-1)),S[115]||(S[115]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Choose which assistants receive context updates. ",-1)),c("div",hD,[(g(),b(ee,null,ke(l,v=>k(pi,{key:v.id,id:`ai-${v.id}`,"model-value":Array.isArray(p.value.ai.assistants)&&p.value.ai.assistants.includes(v.id),"onUpdate:modelValue":H=>A(v.id,H),description:v.description},{default:R(()=>[ne(z(v.label),1)]),_:2},1032,["id","model-value","onUpdate:modelValue","description"])),64))])]),c("div",pD,[S[116]||(S[116]=c("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Canonical instructions",-1)),S[117]||(S[117]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Edit the canonical file directly. This will be pre-populated when the project is created. ",-1)),k(Gi,{modelValue:p.value.ai.canonical_content,"onUpdate:modelValue":S[34]||(S[34]=v=>p.value.ai.canonical_content=v),language:"markdown","min-height":"500px"},null,8,["modelValue"])])],64)):I("",!0)])])],512),[[at,f.value==="ai"]]),Ye(c("div",null,[k(_f,{modelValue:T.value,"onUpdate:modelValue":S[35]||(S[35]=v=>T.value=v)},{note:R(()=>[...S[119]||(S[119]=[ne(" Project-specific .gitignore templates can be customized in Project Defaults. ",-1)])]),_:1},8,["modelValue"])],512),[[at,f.value==="git"]])])])]))}},gD={class:"mt-2 block text-sm font-semibold text-gray-900 dark:text-white"},vD={key:0,class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},yD={class:"mt-2 text-sm font-semibold text-gray-900 dark:text-white"},bD={key:0,class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},xD={key:1,class:"mt-6"},kD={__name:"EmptyState",props:{title:{type:String,required:!0},description:{type:String,default:null},icon:{type:String,default:null,validator:t=>["database","folder","document","users","inbox","photo"].includes(t)},action:{type:Boolean,default:!1}},emits:["click"],setup(t,{emit:e}){const s=t,i=e,n=re(()=>{const l=["relative","block","w-full","rounded-lg","border-2","border-dashed","border-gray-300","p-12","text-center","dark:border-white/15"];return s.action&&l.push("hover:border-gray-400","focus:outline-2","focus:outline-offset-2","focus:outline-sky-600","dark:hover:border-white/25","dark:focus:outline-sky-500","transition-colors"),l.join(" ")}),r=re(()=>({database:()=>Tt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Tt("path",{d:"M8 14v20c0 4.418 7.163 8 16 8 1.381 0 2.721-.087 4-.252M8 14c0 4.418 7.163 8 16 8s16-3.582 16-8M8 14c0-4.418 7.163-8 16-8s16 3.582 16 8m0 0v14m0-4c0 4.418-7.163 8-16 8S8 28.418 8 24m32 10v6m0 0v6m0-6h6m-6 0h-6"})]),folder:()=>Tt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Tt("path",{d:"M3 7v30a4 4 0 004 4h34a4 4 0 004-4V13a4 4 0 00-4-4H23.343a4 4 0 01-2.829-1.172l-2.828-2.828A4 4 0 0014.858 4H7a4 4 0 00-4 4v0zM37 17v6m0 0v6m0-6h6m-6 0h-6"})]),document:()=>Tt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Tt("path",{d:"M8 4a4 4 0 00-4 4v32a4 4 0 004 4h32a4 4 0 004-4V8a4 4 0 00-4-4H8zm24 16v6m0 0v6m0-6h6m-6 0h-6"})]),users:()=>Tt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Tt("path",{d:"M17 21a5 5 0 110-10 5 5 0 010 10zm-6.5 8a7.5 7.5 0 0115 0H10.5zM31 21a5 5 0 110-10 5 5 0 010 10zm-6.5 8a7.5 7.5 0 0115 0H24.5z"})]),inbox:()=>Tt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Tt("path",{d:"M4 8h40M4 8v28a4 4 0 004 4h32a4 4 0 004-4V8M4 8l18 14a2 2 0 002.4 0L44 8"})]),photo:()=>Tt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Tt("path",{d:"M4 8a4 4 0 014-4h32a4 4 0 014 4v32a4 4 0 01-4 4H8a4 4 0 01-4-4V8zm10 6a3 3 0 100-6 3 3 0 000 6zM4 40l12-12 8 8 8-8L44 40"})])})[s.icon]||null),o=()=>{s.action&&i("click")};return(l,a)=>t.action?(g(),b("button",{key:0,type:"button",onClick:o,class:Te(n.value)},[gt(l.$slots,"icon",{},()=>[t.icon?(g(),me(Cs(r.value),{key:0,class:"mx-auto size-12 text-gray-400 dark:text-gray-500"})):I("",!0)]),c("span",gD,z(t.title),1),t.description?(g(),b("p",vD,z(t.description),1)):I("",!0)],2)):(g(),b("div",{key:1,class:Te(n.value.replace("hover:border-gray-400","").replace("focus:outline-2",""))},[gt(l.$slots,"icon",{},()=>[t.icon?(g(),me(Cs(r.value),{key:0,class:"mx-auto size-12 text-gray-400 dark:text-gray-500"})):I("",!0)]),c("h3",yD,z(t.title),1),t.description?(g(),b("p",bD,z(t.description),1)):I("",!0),l.$slots.actions?(g(),b("div",xD,[gt(l.$slots,"actions")])):I("",!0)],2))}},wD=["onClick","aria-current"],_D={class:"mt-4"},SD={__name:"Tabs",props:{modelValue:{type:[String,Number],required:!0},tabs:{type:Array,required:!0,validator:t=>t.every(e=>e.id&&e.label)},variant:{type:String,default:"pills",validator:t=>["pills","underline"].includes(t)},size:{type:String,default:"md",validator:t=>["sm","md","lg"].includes(t)}},emits:["update:modelValue","change"],setup(t,{emit:e}){const s=t,i=e,n=re(()=>s.variant==="underline"?"border-b border-gray-200 dark:border-white/10":""),r=re(()=>{const a=["flex","gap-2"];return s.variant==="underline"?a.push("-mb-px"):a.push("p-1","bg-gray-100","dark:bg-white/5","rounded-lg"),a.join(" ")}),o=a=>{const d=s.modelValue===a,u=["inline-flex","items-center","gap-2","font-medium","transition-colors"],f={sm:"px-2.5 py-1.5 text-xs",md:"px-3 py-2 text-sm",lg:"px-4 py-2.5 text-base"};return u.push(f[s.size]),s.variant==="pills"?(u.push("rounded-md"),d?u.push("bg-white","text-gray-900","shadow-xs","dark:bg-white/10","dark:text-white"):u.push("text-gray-600","hover:text-gray-900","dark:text-gray-400","dark:hover:text-white")):(u.push("border-b-2","pb-3"),d?u.push("border-sky-600","text-sky-600","dark:border-sky-500","dark:text-sky-400"):u.push("border-transparent","text-gray-600","hover:border-gray-300","hover:text-gray-900","dark:text-gray-400","dark:hover:border-gray-600","dark:hover:text-white")),u.join(" ")},l=a=>{i("update:modelValue",a),i("change",a)};return(a,d)=>(g(),b("div",null,[c("div",{class:Te(n.value)},[c("nav",{class:Te(r.value),"aria-label":"Tabs"},[(g(!0),b(ee,null,ke(t.tabs,u=>(g(),b("button",{key:u.id,type:"button",onClick:f=>l(u.id),class:Te(o(u.id)),"aria-current":t.modelValue===u.id?"page":void 0},[u.icon?(g(),me(Cs(u.icon),{key:0,class:"size-5"})):I("",!0),ne(" "+z(u.label)+" ",1),u.badge?(g(),me(lr,{key:1,variant:t.modelValue===u.id?"emerald":"gray",pill:""},{default:R(()=>[ne(z(u.badge),1)]),_:2},1032,["variant"])):I("",!0)],10,wD))),128))],2)],2),c("div",_D,[gt(a.$slots,"default")])]))}},CD=["for"],AD={class:"mt-2"},VD=["id","value","placeholder","rows","required","disabled"],MD={key:1,class:"mt-2 text-sm text-gray-500 dark:text-gray-400"},pc={__name:"Textarea",props:{id:{type:String,default:()=>`textarea-${Math.random().toString(36).substr(2,9)}`},modelValue:{type:String,default:""},label:{type:String,default:null},placeholder:{type:String,default:""},rows:{type:Number,default:4},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},hint:{type:String,default:null},monospace:{type:Boolean,default:!1},textareaClass:{type:[String,Array,Object],default:""}},emits:["update:modelValue"],setup(t){const e=t,s=re(()=>["block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-sky-600 sm:text-sm/6 dark:bg-white/5 dark:text-white dark:outline-white/10 dark:placeholder:text-gray-500 dark:focus:outline-sky-500",e.monospace?"font-mono text-sm leading-6":"",e.textareaClass]);return(i,n)=>(g(),b("div",null,[t.label?(g(),b("label",{key:0,for:t.id,class:"block text-sm/6 font-medium text-gray-900 dark:text-white"},z(t.label),9,CD)):I("",!0),c("div",AD,[c("textarea",{id:t.id,value:t.modelValue,placeholder:t.placeholder,rows:t.rows,required:t.required,disabled:t.disabled,onInput:n[0]||(n[0]=r=>i.$emit("update:modelValue",r.target.value)),class:Te(s.value)},null,42,VD)]),t.hint?(g(),b("p",MD,z(t.hint),1)):I("",!0)]))}},DD={class:"space-y-6"},TD={key:0},$D={class:"mt-1 font-mono text-sm text-gray-900 dark:text-gray-100 break-words"},ED={key:1},OD={class:"grid gap-4 sm:grid-cols-2"},PD=["value"],jD={class:"sm:col-span-2"},LD={key:0,class:"sm:col-span-2"},RD={class:"space-y-3"},BD={class:"flex items-center justify-between"},ID={key:0,class:"rounded-md border border-dashed border-gray-300 p-4 text-sm text-gray-500 dark:border-gray-600 dark:text-gray-400"},ND={class:"grid gap-3 sm:grid-cols-[1fr_auto] sm:items-start"},UD={class:"mt-3"},zD={key:0,class:"mt-2 text-xs text-gray-500 dark:text-gray-400"},FD={class:"mt-2 flex justify-end"},HD={key:2,class:"text-sm text-red-600 dark:text-red-400"},WD={key:3,class:"text-sm text-red-600 dark:text-red-400"},qD={key:4,class:"text-sm text-red-600 dark:text-red-400"},KD='{"source": "data-catalog"}',GD={__name:"DataCatalogEditModal",props:{modelValue:{type:Boolean,default:!1},mode:{type:String,default:"edit",validator:t=>["edit","create"].includes(t)},entry:{type:Object,default:null},saving:{type:Boolean,default:!1},error:{type:String,default:null}},emits:["update:modelValue","save"],setup(t,{emit:e}){const s=t,i=e,n=Object.freeze([{value:"csv",label:"CSV (comma-separated)"},{value:"tsv",label:"TSV (tab-separated)"},{value:"csv_custom",label:"Delimited text (custom)"},{value:"rds",label:"RDS (R serialized)"},{value:"excel",label:"Excel (.xlsx / .xls)"},{value:"stata",label:"Stata (.dta)"},{value:"spss",label:"SPSS (.sav / .zsav)"},{value:"spss_por",label:"SPSS Portable (.por)"},{value:"sas",label:"SAS (.sas7bdat / .sas7bcat)"},{value:"sas_xpt",label:"SAS Transport (.xpt)"}]),r=["path","type","description","locked","delimiter"],o=ce(null),l=ce(!1),a=ce(!1),d=re(()=>s.mode==="create"),u=qs({path:"",fullKey:"",type:"",description:"",delimiter:"",locked:!1,additionalFields:[]}),f=re(()=>u.type==="csv_custom"),h=re(()=>{if(!s.entry&&!d.value)return null;const G=ie();return G.length>0?`Duplicate metadata keys: ${G.join(", ")}`:u.additionalFields.some(X=>!X.key.trim())?"Metadata keys cannot be empty.":null}),m=re(()=>u.path.trim()?null:"File path is required"),_=re(()=>d.value?a.value?m.value:null:m.value);He(()=>s.entry,G=>{if(!G){j();return}F(G)},{immediate:!0}),He(()=>u.path,G=>{if(l.value)return;const X=U(G);X&&(X.type==="csv"?(u.type="csv",u.delimiter=C("csv")):X.type==="tsv"?(u.type="tsv",u.delimiter=C("tsv")):(u.type=X.type,u.delimiter=""))}),He(()=>u.type,G=>{G&&(G==="csv"?u.delimiter=C("csv"):G==="tsv"?u.delimiter=C("tsv"):G!=="csv_custom"&&(u.delimiter=""))});function p(){return`field-${Math.random().toString(36).slice(2,9)}`}function C(G){return G==="csv"?"comma":G==="tsv"?"tab":""}function M(G,X){if(!G)return!1;const se=G.toLowerCase();return X==="csv"?se==="comma"||G===",":X==="tsv"?se==="tab"||G==="	":!1}function U(G){if(!G)return null;const X=G.toLowerCase();return X.endsWith(".csv")?{type:"csv",delimiter:"comma"}:X.endsWith(".tsv")||X.endsWith(".txt")||X.endsWith(".dat")?{type:"tsv",delimiter:"tab"}:X.endsWith(".rds")?{type:"rds",delimiter:""}:X.endsWith(".xlsx")||X.endsWith(".xls")?{type:"excel",delimiter:""}:X.endsWith(".dta")?{type:"stata",delimiter:""}:X.endsWith(".sav")||X.endsWith(".zsav")?{type:"spss",delimiter:""}:X.endsWith(".por")?{type:"spss_por",delimiter:""}:X.endsWith(".sas7bdat")||X.endsWith(".sas7bcat")?{type:"sas",delimiter:""}:X.endsWith(".xpt")?{type:"sas_xpt",delimiter:""}:null}function B(G){if(!G){u.type="",u.delimiter="",l.value=!1;return}u.type=G,l.value=!0,G==="csv"?u.delimiter=C("csv"):G==="tsv"?u.delimiter=C("tsv"):u.delimiter=""}function F(G){if(j(),a.value=!1,d.value){const Pe=G?.data||{};u.fullKey=G?.fullKey||"",u.path=Pe.path||"",u.type=Pe.type||"",u.description=Pe.description||"",u.locked=!!Pe.locked,u.delimiter=Pe.delimiter||"",l.value=!1;return}const X=G.data||{};u.fullKey=G.fullKey||"",u.path=X.path||"";const se=U(u.path),Re=X.type||se?.type||"";if(u.description=X.description||"",u.locked=!!X.locked,Re==="csv"){const Pe=X.delimiter||se?.delimiter||C("csv");M(Pe,"csv")?(u.type="csv",u.delimiter=C("csv")):Pe?(u.type="csv_custom",u.delimiter=Pe):(u.type="csv",u.delimiter=C("csv"))}else Re==="tsv"?(u.type="tsv",u.delimiter=C("tsv")):(u.type=Re,u.delimiter=f.value&&X.delimiter||"");!u.type&&se?.type&&(u.type=se.type,u.delimiter=se.delimiter||C(se.type)),l.value=!!X.type||u.type==="csv_custom";const $=Object.entries(X).filter(([Pe])=>!r.includes(Pe)).map(([Pe,Le])=>({id:p(),key:Pe,valueInput:T(Le),valueType:A(Le),isMultiline:typeof Le=="object"&&Le!==null}));u.additionalFields=$,o.value=null}function j(){u.path="",u.fullKey="",u.type="",u.description="",u.delimiter="",u.locked=!1,u.additionalFields=[],o.value=null,l.value=!1}function T(G){if(typeof G=="object"&&G!==null)try{return JSON.stringify(G,null,2)}catch{return""}return G==null?"":String(G)}function A(G){return Array.isArray(G)||typeof G=="object"&&G!==null?"object":typeof G=="boolean"?"boolean":typeof G=="number"?"number":"string"}function J(G){if(G.valueType==="object"){if(!G.valueInput.trim())return null;try{return JSON.parse(G.valueInput)}catch{throw new Error(`Invalid JSON for field "${G.key}"`)}}if(G.valueType==="number"){const X=Number(G.valueInput);if(Number.isNaN(X))throw new Error(`Value for "${G.key}" must be a number`);return X}if(G.valueType==="boolean"){const X=G.valueInput.trim().toLowerCase();if(["true","false"].includes(X))return X==="true";throw new Error(`Value for "${G.key}" must be "true" or "false"`)}return G.valueInput}function ie(){const G=new Set,X=[];return u.additionalFields.forEach(se=>{const Re=se.key.trim();Re&&(G.has(Re)||r.includes(Re)?X.push(Re):G.add(Re))}),X}function ge(G){return G.key.trim()?r.includes(G.key.trim())?"Reserved key name":u.additionalFields.some(X=>X!==G&&X.key.trim()===G.key.trim())?"Duplicate key":null:"Key is required"}function le(){u.additionalFields.push({id:p(),key:"",valueInput:"",valueType:"string",isMultiline:!1}),o.value=null}function W(G){u.additionalFields=u.additionalFields.filter(X=>X.id!==G)}function he(G){G.isMultiline=!G.isMultiline,G.isMultiline?(G.valueType="object",G.valueInput&&!G.valueInput.trim().startsWith("{")&&(G.valueInput="")):(G.valueType="string",G.valueInput=G.valueInput!=null?String(G.valueInput):"")}const te=()=>{if(o.value=null,a.value=!0,!(m.value||h.value)&&!(!d.value&&!s.entry))try{const G=we();i("save",G)}catch(G){o.value=G.message}},we=()=>{if(!u.path.trim())throw new Error("File path is required");const G={};G.path=u.path.trim();const X=u.type==="csv_custom"?"csv":u.type.trim();if(X&&(G.type=X),u.description.trim()&&(G.description=u.description.trim()),u.type==="csv_custom"){if(!u.delimiter.trim())throw new Error("Delimiter is required for custom delimited text sources");G.delimiter=u.delimiter.trim()}else u.delimiter.trim()&&!M(u.delimiter.trim(),u.type)&&(G.delimiter=u.delimiter.trim());u.locked&&(G.locked=!0);for(const Re of u.additionalFields){const $=Re.key.trim();if(!$||r.includes($))continue;const Pe=J({...Re,valueType:Re.valueType??"string"});Pe===null||Pe===""||(G[$]=Pe)}const se=(d.value?u.fullKey:s.entry.fullKey||"").trim();if(!se)throw new Error("Dot notation key is required");return{fullKey:se,data:G,isNew:d.value}};return(G,X)=>(g(),me(Tn,{"model-value":t.modelValue,variant:"left",size:"lg",title:"Edit Data Entry","onUpdate:modelValue":X[6]||(X[6]=se=>i("update:modelValue",se))},bb({_:2},[t.entry||d.value?{name:"default",fn:R(()=>[c("div",DD,[d.value?(g(),b("div",ED,[k(Y,{modelValue:u.fullKey,"onUpdate:modelValue":X[0]||(X[0]=se=>u.fullKey=se),label:"Dot Notation Key",placeholder:"e.g., inputs.raw.custom_dataset",hint:"Use dot notation to place this entry within the catalog hierarchy."},null,8,["modelValue"])])):(g(),b("div",TD,[X[7]||(X[7]=c("p",{class:"text-xs font-medium uppercase tracking-wide text-gray-500 dark:text-gray-400"}," Data Key ",-1)),c("p",$D,z(t.entry.fullKey),1)])),k(Y,{modelValue:u.path,"onUpdate:modelValue":X[1]||(X[1]=se=>u.path=se),label:"File Path",placeholder:"inputs/raw/example.csv",required:"",error:_.value,monospace:"",hint:"Provide a path relative to the project root (e.g., inputs/raw/data.csv) or an absolute path."},null,8,["modelValue","error"]),c("div",OD,[k(Jt,{"model-value":u.type,label:"Type","onUpdate:modelValue":B},{default:R(()=>[X[8]||(X[8]=c("option",{disabled:"",value:""},"Select file type",-1)),(g(!0),b(ee,null,ke(lt(n),se=>(g(),b("option",{key:se.value,value:se.value},z(se.label),9,PD))),128))]),_:1},8,["model-value"]),c("div",jD,[k(Ne,{modelValue:u.locked,"onUpdate:modelValue":X[2]||(X[2]=se=>u.locked=se),label:"Locked",description:"Treat this data source as read-only."},null,8,["modelValue"])]),f.value?(g(),b("div",LD,[k(Y,{modelValue:u.delimiter,"onUpdate:modelValue":X[3]||(X[3]=se=>u.delimiter=se),label:"Delimiter",placeholder:"e.g., tab or |",hint:"Use keywords 'tab', 'comma', 'semicolon', 'space' or supply a single character (e.g., |). Keywords map to their respective delimiters."},null,8,["modelValue"])])):I("",!0)]),k(pc,{modelValue:u.description,"onUpdate:modelValue":X[4]||(X[4]=se=>u.description=se),label:"Description",placeholder:"Explain what this source contains or how it was produced.",rows:4},null,8,["modelValue"]),c("div",RD,[c("div",BD,[X[10]||(X[10]=c("h4",{class:"text-sm font-semibold text-gray-900 dark:text-gray-100"}," Additional Metadata ",-1)),k(Ie,{size:"sm",variant:"secondary",class:"shadow-none",onClick:le},{default:R(()=>[...X[9]||(X[9]=[ne(" Add Field ",-1)])]),_:1})]),X[12]||(X[12]=c("p",{class:"text-xs text-gray-500 dark:text-gray-400"}," Store any extra properties (e.g., source, codebook details). Complex values can be provided as JSON. ",-1)),u.additionalFields.length===0?(g(),b("div",ID," No additional metadata fields. ")):I("",!0),(g(!0),b(ee,null,ke(u.additionalFields,se=>(g(),b("div",{key:se.id,class:"rounded-md border border-gray-200 bg-white/80 p-4 dark:border-gray-700 dark:bg-gray-900/40"},[c("div",ND,[k(Y,{modelValue:se.key,"onUpdate:modelValue":Re=>se.key=Re,label:"Key",placeholder:"e.g., source",error:ge(se)},null,8,["modelValue","onUpdate:modelValue","error"]),k(Ie,{size:"sm",variant:"secondary",class:"shadow-none",onClick:Re=>W(se.id)},{default:R(()=>[...X[11]||(X[11]=[ne(" Remove ",-1)])]),_:1},8,["onClick"])]),c("div",UD,[(g(),me(Cs(se.isMultiline?pc:Y),{modelValue:se.valueInput,"onUpdate:modelValue":Re=>se.valueInput=Re,label:se.isMultiline?"Value (JSON)":"Value",rows:se.isMultiline?4:void 0,placeholder:se.isMultiline?KD:"comma",monospace:se.isMultiline?void 0:!1},null,8,["modelValue","onUpdate:modelValue","label","rows","placeholder","monospace"])),se.isMultiline?(g(),b("p",zD," Provide valid JSON to store complex data structures. ")):I("",!0),c("div",FD,[k(Ie,{size:"xs",variant:"soft",onClick:Re=>he(se)},{default:R(()=>[ne(z(se.isMultiline?"Use single-line value":"Use JSON value"),1)]),_:2},1032,["onClick"])])])]))),128))]),h.value?(g(),b("p",HD,z(h.value),1)):I("",!0),o.value?(g(),b("p",WD,z(o.value),1)):I("",!0),t.error?(g(),b("p",qD,z(t.error),1)):I("",!0)])]),key:"0"}:void 0,t.entry?{name:"actions",fn:R(()=>[k(Ie,{size:"sm",variant:"secondary",class:"shadow-none",onClick:X[5]||(X[5]=se=>i("update:modelValue",!1))},{default:R(()=>[...X[13]||(X[13]=[ne(" Cancel ",-1)])]),_:1}),k(Ie,{size:"sm",disabled:t.saving,onClick:te},{default:R(()=>[ne(z(t.saving?"Saving":"Save Entry"),1)]),_:1},8,["disabled"])]),key:"1"}:void 0]),1032,["model-value"]))}},a1=(t="")=>{const s=String(t??"").trim().replace(/[^a-zA-Z0-9]+/g,"-").replace(/^-+|-+$/g,"").toLowerCase();return s?`data-node-${s}`:"data-node-root"},JD=["id"],YD=["aria-expanded"],XD={class:"flex-1"},ZD={key:0,class:"rounded bg-amber-200/70 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},QD={key:1},eT={class:"mt-1 text-xs text-zinc-500 dark:text-zinc-400"},tT={class:"text-xs font-medium uppercase tracking-wide text-zinc-500 dark:text-zinc-400"},sT={class:"flex items-start gap-3"},iT={class:"flex-1"},nT={key:0,class:"rounded bg-amber-200/70 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},rT={key:1},oT={class:"mt-1 text-xs text-zinc-500 dark:text-zinc-400"},lT=["id"],aT={class:"flex items-start justify-between gap-4"},uT={class:"min-w-0 flex items-center gap-2"},dT={class:"text-sm font-semibold text-gray-900 dark:text-white"},cT={key:0,class:"rounded bg-amber-200/70 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},fT={key:1},hT={key:0,class:"inline-flex items-center rounded-full border border-gray-200 bg-white px-2.5 py-1 text-xs font-medium text-gray-700 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-100"},pT={class:"flex items-center gap-2 shrink-0"},mT={class:"mt-5 space-y-4"},gT={key:0,class:"space-y-2"},vT={class:"text-sm leading-relaxed text-gray-600 dark:text-zinc-300"},yT={key:1,class:"flex items-start gap-3"},bT={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},xT={key:1,class:"h-4 w-4 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},kT={class:"min-w-0 flex-1"},wT={class:"mt-1 font-mono text-sm leading-relaxed text-gray-900 dark:text-zinc-100"},_T={key:0,class:"rounded bg-amber-200/60 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},ST={key:1},CT={key:1,class:"text-zinc-500"},AT={class:"flex items-start gap-3 pt-4 border-t border-gray-200 dark:border-zinc-700"},VT={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},MT={key:1,class:"h-4 w-4 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},DT={class:"min-w-0 flex-1"},TT={class:"mt-1 font-mono text-sm leading-relaxed text-gray-900 dark:text-zinc-100"},$T={key:0,class:"rounded bg-amber-200/60 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},ET={key:1},OT={key:1,class:"text-zinc-500"},PT={class:"min-w-0"},jT={class:"text-xs font-medium uppercase tracking-wide text-gray-600 dark:text-zinc-200"},LT={class:"mt-1 whitespace-pre-wrap break-words font-mono text-[13px] text-gray-800 dark:text-zinc-200"},RT={class:"flex items-start gap-3 pt-4 border-t border-gray-200 dark:border-zinc-700"},BT={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},IT={key:1,class:"h-4 w-4 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},NT={class:"min-w-0 flex-1"},UT=["title"],Qu="mt-1.5 inline-flex h-10 w-10 items-center justify-center rounded-md border border-gray-200 bg-white text-gray-500 transition hover:border-gray-300 hover:text-gray-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-500 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-300 dark:hover:border-gray-500 dark:hover:text-gray-100",zT=Object.assign({name:"DataCatalogTree"},{__name:"DataCatalogTree",props:{node:{type:Object,required:!0},depth:{type:Number,default:0},expandedKeys:{type:Object,required:!0},autoExpandedKeys:{type:Object,required:!0},toggleGroup:{type:Function,required:!0},searchTerm:{type:String,default:""},hierarchical:{type:Boolean,default:!0},pendingDeletes:{type:Object,default:null}},emits:["edit","delete"],setup(t,{emit:e}){const s=e,i=t,n=re(()=>i.node?.type==="group"),r=re(()=>i.depth===0),o=re(()=>{if(!n.value)return!1;if(!i.hierarchical)return!0;const le=i.node?.fullKey;if(!le)return!1;const W=i.expandedKeys,he=i.autoExpandedKeys,te=typeof W?.has=="function"?W.has(le):!!W?.[le],we=typeof he?.has=="function"?he.has(le):!!he?.[le];return te||we}),l=re(()=>{const le=i.node?.leafCount||0;return`${le} ${le===1?"entry":"entries"}`}),a=re(()=>r.value?"mb-4 rounded-xl border border-gray-200 bg-white p-6 transition hover:border-gray-300 scroll-mt-16 dark:border-gray-700/70 dark:bg-gray-900 dark:hover:border-gray-600":"mb-3 rounded-lg border border-gray-200 bg-white p-4 transition hover:border-gray-300 dark:border-gray-700/60 dark:bg-gray-900/60 dark:hover:border-gray-600"),d=re(()=>r.value?"text-lg font-semibold text-zinc-900 dark:text-white":"text-sm font-semibold text-zinc-900 dark:text-white"),u=re(()=>r.value?"mt-4 space-y-3":"mt-3 space-y-3"),f=re(()=>i.pendingDeletes instanceof Set?i.pendingDeletes:i.pendingDeletes&&typeof i.pendingDeletes=="object"&&i.pendingDeletes.value instanceof Set?i.pendingDeletes.value:new Set),h=re(()=>f.value.has(i.node?.fullKey)),m=re(()=>{const le=i.node?.data||{},W=new Set(["path","type","description","locked","delimiter"]);return Object.keys(le).filter(he=>!W.has(he)).reduce((he,te)=>(he[te]=le[te],he),{})}),_=re(()=>{const le="relative rounded-lg p-6 transition focus-within:ring-2",W=r.value?"scroll-mt-16":"";return h.value?`${le} border border-red-200 bg-red-50 hover:bg-red-100 focus-within:ring-red-300 ${W} dark:border-red-500/40 dark:bg-red-900/30 dark:hover:bg-red-900/40 dark:focus-within:ring-red-500/40`:`${le} border border-gray-200 bg-gray-50 hover:bg-gray-100 focus-within:ring-sky-200 ${W} dark:border-gray-700/50 dark:bg-gray-800/50 dark:hover:bg-gray-800/60 dark:focus-within:ring-sky-500/40`}),p=re(()=>h.value?"shadow-none border border-red-200 text-red-700 hover:bg-red-50 dark:border-red-500/40 dark:text-red-200 dark:hover:bg-red-900/30":"shadow-none"),C=re(()=>i.searchTerm.trim().toLowerCase()),M=(le="")=>{const W=le??"",he=C.value;if(!he)return[{text:W,highlight:!1}];const te=W.toLowerCase(),we=[];let G=0,X=te.indexOf(he);for(;X!==-1;)X>G&&we.push({text:W.slice(G,X),highlight:!1}),we.push({text:W.slice(X,X+he.length),highlight:!0}),G=X+he.length,X=te.indexOf(he,G);return G<W.length&&we.push({text:W.slice(G),highlight:!1}),we.length>0?we:[{text:W,highlight:!1}]},U=re(()=>i.node?.displayName||i.node?.name||""),B=re(()=>M(U.value)),F=re(()=>M(i.node?.data?.path||"")),j=re(()=>M(i.node?.fullKey||"")),T=re(()=>{const le=i.node?.fullKey||"";return le?`data_read('${le}')`:"data_read()"}),A=(le="")=>le.replace(/_/g," "),J=le=>le==null?"":typeof le=="object"?JSON.stringify(le,null,2):String(le),ie=re(()=>{if(!r.value)return null;const le=i.node?.fullKey||i.node?.name;return le?a1(le):null}),ge=()=>{!n.value||!i.hierarchical||i.toggleGroup(i.node.fullKey)};return(le,W)=>{const he=na("DataCatalogTree",!0);return g(),b("div",null,[n.value?(g(),b("div",{key:0,id:ie.value||void 0,class:Te(a.value)},[t.hierarchical?(g(),b(ee,{key:0},[c("button",{type:"button",class:"flex w-full items-start gap-3 text-left transition hover:text-zinc-900 focus:outline-none",onClick:ge,"aria-expanded":o.value},[k(lt(s2),{class:Te(["mt-1.5 h-4 w-4 shrink-0 text-zinc-400 transition-transform",{"rotate-90 text-sky-500":o.value}])},null,8,["class"]),c("div",XD,[c("p",{class:Te(d.value)},[(g(!0),b(ee,null,ke(B.value,(te,we)=>(g(),b(ee,{key:we},[te.highlight?(g(),b("mark",ZD,z(te.text),1)):(g(),b("span",QD,z(te.text),1))],64))),128))],2),c("p",eT,z(l.value),1)]),c("span",tT,z(o.value?"Hide":"Show"),1)],8,YD),k(Oc,{name:"catalog-collapse"},{default:R(()=>[Ye(c("div",{class:Te(u.value)},[(g(!0),b(ee,null,ke(t.node.children,te=>(g(),me(he,{key:te.fullKey,node:te,depth:t.depth+1,"expanded-keys":t.expandedKeys,"auto-expanded-keys":t.autoExpandedKeys,"toggle-group":t.toggleGroup,"search-term":t.searchTerm,hierarchical:t.hierarchical,"pending-deletes":t.pendingDeletes,onEdit:W[0]||(W[0]=we=>s("edit",we)),onDelete:W[1]||(W[1]=we=>s("delete",we))},null,8,["node","depth","expanded-keys","auto-expanded-keys","toggle-group","search-term","hierarchical","pending-deletes"]))),128))],2),[[at,o.value]])]),_:1})],64)):(g(),b(ee,{key:1},[c("div",sT,[c("div",iT,[c("p",{class:Te(d.value)},[(g(!0),b(ee,null,ke(B.value,(te,we)=>(g(),b(ee,{key:we},[te.highlight?(g(),b("mark",nT,z(te.text),1)):(g(),b("span",rT,z(te.text),1))],64))),128))],2),c("p",oT,z(l.value),1)])]),c("div",{class:Te(u.value)},[(g(!0),b(ee,null,ke(t.node.children,te=>(g(),me(he,{key:te.fullKey,node:te,depth:t.depth+1,"expanded-keys":t.expandedKeys,"auto-expanded-keys":t.autoExpandedKeys,"toggle-group":t.toggleGroup,"search-term":t.searchTerm,hierarchical:t.hierarchical,"pending-deletes":t.pendingDeletes,onEdit:W[2]||(W[2]=we=>s("edit",we)),onDelete:W[3]||(W[3]=we=>s("delete",we))},null,8,["node","depth","expanded-keys","auto-expanded-keys","toggle-group","search-term","hierarchical","pending-deletes"]))),128))],2)],64))],10,JD)):(g(),b("div",{key:1,id:ie.value||void 0,class:Te(_.value)},[c("div",aT,[c("div",uT,[c("h3",dT,[(g(!0),b(ee,null,ke(B.value,(te,we)=>(g(),b(ee,{key:`leaf-${we}`},[te.highlight?(g(),b("mark",cT,z(te.text),1)):(g(),b("span",fT,z(te.text),1))],64))),128))]),t.node.data?.type?(g(),b("span",hT,z(t.node.data.type),1)):I("",!0)]),c("div",pT,[k(Ie,{size:"sm",variant:"secondary",class:Te(p.value),onClick:W[4]||(W[4]=Ut(te=>s("delete",t.node),["stop"]))},{default:R(()=>[ne(z(h.value?"Undo":"Delete"),1)]),_:1},8,["class"]),k(Ie,{size:"sm",variant:"secondary",class:"shadow-none",onClick:W[5]||(W[5]=te=>s("edit",t.node))},{default:R(()=>[...W[6]||(W[6]=[ne(" Edit ",-1)])]),_:1})])]),c("div",mT,[t.node.data?.description?(g(),b("div",gT,[W[7]||(W[7]=c("p",{class:"text-xs font-medium text-gray-600 dark:text-zinc-200"}," Description ",-1)),c("p",vT,z(t.node.data.description),1)])):I("",!0),t.node.fullKey?(g(),b("div",yT,[k(ar,{value:t.node.fullKey||"",successMessage:"Dot notation copied",variant:"bare",class:Te(Qu),title:"Copy dot notation"},{default:R(({copied:te})=>[te?(g(),b("svg",xT,[...W[9]||(W[9]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(g(),b("svg",bT,[...W[8]||(W[8]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"},null,-1)])]))]),_:1},8,["value"]),c("div",kT,[W[10]||(W[10]=c("p",{class:"text-xs font-medium text-gray-700 dark:text-zinc-100"}," Location (in Dot Notation) ",-1)),c("p",wT,[j.value.length>0?(g(!0),b(ee,{key:0},ke(j.value,(te,we)=>(g(),b(ee,{key:`key-${we}`},[te.highlight?(g(),b("mark",_T,z(te.text),1)):(g(),b("span",ST,z(te.text),1))],64))),128)):(g(),b("span",CT,""))])])])):I("",!0),c("div",AT,[k(ar,{value:t.node.data?.path||"",successMessage:"Path copied",variant:"bare",class:Te(Qu),title:"Copy path"},{default:R(({copied:te})=>[te?(g(),b("svg",MT,[...W[12]||(W[12]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(g(),b("svg",VT,[...W[11]||(W[11]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"},null,-1)])]))]),_:1},8,["value"]),c("div",DT,[W[13]||(W[13]=c("p",{class:"text-xs font-medium text-gray-700 dark:text-zinc-100"}," File Path ",-1)),c("p",TT,[F.value.length>0?(g(!0),b(ee,{key:0},ke(F.value,(te,we)=>(g(),b(ee,{key:`path-${we}`},[te.highlight?(g(),b("mark",$T,z(te.text),1)):(g(),b("span",ET,z(te.text),1))],64))),128)):(g(),b("span",OT,""))])])]),(g(!0),b(ee,null,ke(m.value,(te,we)=>(g(),b("div",{key:`meta-${we}`,class:"flex items-start justify-between gap-3 border-t border-gray-200 pt-4 text-sm dark:border-zinc-700"},[c("div",PT,[c("p",jT,z(A(we)),1),c("pre",LT,z(J(te)),1)])]))),128)),c("div",RT,[k(ar,{value:T.value,successMessage:"data_read() command copied",variant:"bare",class:Te([Qu,"w-10"]),title:"Copy data_read() helper","aria-label":`Copy ${T.value}`},{default:R(({copied:te})=>[te?(g(),b("svg",IT,[...W[15]||(W[15]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(g(),b("svg",BT,[...W[14]||(W[14]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8z"},null,-1)])]))]),_:1},8,["value","class","aria-label"]),c("div",NT,[W[16]||(W[16]=c("p",{class:"text-xs font-medium text-gray-700 dark:text-zinc-100"}," Usage ",-1)),c("p",{class:"mt-1 font-mono text-sm leading-relaxed text-gray-900 dark:text-zinc-100 truncate",title:T.value},z(T.value),9,UT)])])])],10,lT))])}}}),FT=o0(zT,[["__scopeId","data-v-20f9f092"]]),HT={key:0,class:"mb-4"},WT={key:1,class:"mb-4"},qT={key:2,class:"space-y-6"},KT={key:0,class:"rounded-lg bg-gray-50 p-8 text-center dark:bg-gray-800/40"},GT={key:1,class:"space-y-5"},JT={class:"mb-4 flex items-center justify-between"},YT={class:"text-sm font-semibold text-gray-900 dark:text-white"},XT={class:"text-xs text-gray-500 dark:text-gray-400"},ZT={class:"space-y-3"},QT={class:"flex items-start gap-3"},e$={class:"mt-2 w-16"},t$={class:"grid flex-1 grid-cols-2 gap-3"},s$=["value","onInput","disabled"],i$={class:"relative"},n$=["onUpdate:modelValue","type","placeholder","disabled"],r$=["onClick"],o$={key:0,class:"ml-16 text-xs text-gray-500"},l$={key:1,class:"ml-16 text-xs text-gray-400"},a$={key:2,class:"rounded-lg border border-gray-200 bg-gray-50 p-4 text-sm dark:border-gray-700 dark:bg-gray-800/60"},u$={key:3,class:"space-y-3"},d$=["disabled"],c$={key:4,class:"mt-4 flex justify-end"},f$={__name:"EnvEditor",props:{loading:{type:Boolean,default:!1},error:{type:String,default:""},showSecurityAlert:{type:Boolean,default:!0},allowAdd:{type:Boolean,default:!0},allowRemove:{type:Boolean,default:!0},allowShowValuesToggle:{type:Boolean,default:!0},allowRegroupOption:{type:Boolean,default:!0},showSaveButton:{type:Boolean,default:!0},saveLabel:{type:String,default:"Save .env"},groups:{type:Object,default:()=>({})},variables:{type:Object,default:()=>({})},rawContent:{type:String,default:""},viewMode:{type:String,default:"grouped"},regroupOnSave:{type:Boolean,default:!1}},emits:["update:variables","update:rawContent","update:viewMode","update:regroupOnSave","save"],setup(t,{emit:e}){const s=t,i=e,n=j=>JSON.parse(JSON.stringify(j||{})),r=ce(n(s.variables)),o=ce(s.rawContent||""),l=ce(s.viewMode||"grouped"),a=ce(!!s.regroupOnSave),d=ce(!1),u=ce({});He(()=>s.variables,j=>{r.value=n(j)},{deep:!0}),He(()=>s.rawContent,j=>{l.value==="raw"&&(o.value=j||"")}),He(()=>s.viewMode,j=>{l.value=j||"grouped"}),He(()=>s.regroupOnSave,j=>{a.value=!!j}),He(r,j=>{i("update:variables",n(j)),l.value!=="raw"&&(o.value=Object.entries(j||{}).map(([T,A])=>`${T}=${A??""}`).join(`
`),i("update:rawContent",o.value))},{deep:!0}),He(o,j=>{if(l.value==="raw"){i("update:rawContent",j);const T=f(j);r.value=T,i("update:variables",n(T))}}),He(l,j=>{i("update:viewMode",j)}),He(a,j=>{i("update:regroupOnSave",j)});const f=j=>{const T=(j||"").split(/\r?\n/),A={};return T.forEach(J=>{const ie=J.trim();if(!ie||ie.startsWith("#")||!ie.includes("="))return;const[ge,...le]=ie.split("=");A[ge.trim()]=le.join("=").replace(/^"|"$/g,"")}),A},h=j=>{const T=Object.entries(j||{});return T.length?T.reduce((A,[J,ie])=>{const ge=J.includes("_")?J.split("_")[0]:"Other";return A[ge]||(A[ge]={}),A[ge][J]={defined:!!ie,used:!1,used_in:[],value:ie},A},{}):{}},m=re(()=>{const j=s.groups||{};return Object.keys(j).length?j:h(r.value)}),_=()=>{if(!s.allowAdd)return;const j="NEW_VARIABLE";let T=1,A=`${j}_${T}`;for(;r.value[A];)T+=1,A=`${j}_${T}`;r.value={...r.value,[A]:""}},p=j=>{if(!s.allowRemove)return;const T=n(r.value);delete T[j],r.value=T},C=(j,T)=>{if(!T||j===T)return;const A=T.replace(/[^A-Z0-9_]/gi,"").toUpperCase();if(!A)return;const J=n(r.value);J[A]||(J[A]=J[j],delete J[j],r.value=J)},M=j=>{const T=["PASSWORD","SECRET","KEY","TOKEN"],A=j.toUpperCase();return T.some(J=>A.includes(J))},U=j=>d.value||u.value[j]||!M(j),B=j=>{u.value[j]=!u.value[j]},F=()=>{d.value=!d.value};return(j,T)=>(g(),b("div",null,[t.error?(g(),b("div",HT,[k(Os,{type:"error",title:"Error",description:t.error},null,8,["description"])])):I("",!0),t.showSecurityAlert?(g(),b("div",WT,[k(Os,{type:"warning",title:" Contains Sensitive Data"},{actions:R(()=>[t.viewMode==="grouped"&&t.allowShowValuesToggle?(g(),me(Ie,{key:0,variant:"soft",size:"sm",onClick:F},{default:R(()=>[ne(z(d.value?"Hide Values":"Show Values"),1)]),_:1})):I("",!0)]),default:R(()=>[T[4]||(T[4]=ne(" This file can include passwords and secrets. Keep it out of version control. ",-1))]),_:1})])):I("",!0),k(SD,{modelValue:l.value,"onUpdate:modelValue":T[0]||(T[0]=A=>l.value=A),tabs:[{id:"grouped",label:"Key/Value Editor"},{id:"raw",label:"Raw .env"}],variant:"pills",class:"mb-4"},null,8,["modelValue"]),l.value==="grouped"?(g(),b("div",qT,[Object.keys(m.value).length===0?(g(),b("div",KT,[k(lt(r0),{class:"mx-auto mb-3 h-10 w-10 text-gray-400"}),T[6]||(T[6]=c("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"No environment variables yet.",-1)),t.allowAdd?(g(),me(Ie,{key:0,variant:"primary",class:"mt-4",onClick:_},{default:R(()=>[...T[5]||(T[5]=[ne(" Add Variable ",-1)])]),_:1})):I("",!0)])):(g(),b("div",GT,[(g(!0),b(ee,null,ke(m.value,(A,J)=>(g(),b("div",{key:J,class:"rounded-lg bg-gray-50 p-5 dark:bg-gray-800/40"},[c("div",JT,[c("div",null,[c("p",YT,z(J==="Other"?"Uncategorized":J.toUpperCase()),1),c("p",XT,"Variables with the "+z(J)+" prefix.",1)]),t.allowAdd?(g(),me(Ie,{key:0,variant:"soft",size:"sm",onClick:_},{default:R(()=>[...T[7]||(T[7]=[ne(" + Add ",-1)])]),_:1})):I("",!0)]),c("div",ZT,[(g(!0),b(ee,null,ke(A,(ie,ge)=>(g(),b("div",{key:ge,class:"space-y-2"},[c("div",QT,[c("div",e$,[ie.defined&&ie.used?(g(),me(lr,{key:0,variant:"green",class:"text-xs"},{default:R(()=>[...T[8]||(T[8]=[ne("",-1)])]),_:1})):!ie.defined&&ie.used?(g(),me(lr,{key:1,variant:"yellow",class:"text-xs"},{default:R(()=>[...T[9]||(T[9]=[ne("",-1)])]),_:1})):(g(),me(lr,{key:2,variant:"gray",class:"text-xs"},{default:R(()=>[...T[10]||(T[10]=[ne("",-1)])]),_:1}))]),c("div",t$,[c("input",{value:ge,onInput:le=>C(ge,le.target.value),type:"text",class:"w-full rounded-md border border-gray-300 bg-white px-3 py-2 font-mono text-sm uppercase text-gray-900 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-100",disabled:t.loading},null,40,s$),c("div",i$,[Ye(c("input",{"onUpdate:modelValue":le=>r.value[ge]=le,type:U(ge)?"text":"password",placeholder:ie.defined?"value":"(not set)",class:"w-full rounded-md border border-gray-300 bg-white px-3 py-2 font-mono text-sm text-gray-900 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-100",disabled:t.loading},null,8,n$),[[Lx,r.value[ge]]]),M(ge)&&t.allowShowValuesToggle?(g(),b("button",{key:0,type:"button",class:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300",onClick:le=>B(ge)},[U(ge)?(g(),me(lt(o2),{key:0,class:"h-4 w-4"})):(g(),me(lt(l2),{key:1,class:"h-4 w-4"}))],8,r$)):I("",!0)])]),t.allowRemove?(g(),me(Ie,{key:0,variant:"soft",size:"sm",class:"text-xs",onClick:le=>p(ge)},{default:R(()=>[...T[11]||(T[11]=[ne("  ",-1)])]),_:1},8,["onClick"])):I("",!0)]),ie.used&&ie.used_in?.length?(g(),b("p",o$," Used in: "+z(ie.used_in.join(", ")),1)):ie.defined&&!ie.used?(g(),b("p",l$,"Not referenced in any files")):I("",!0)]))),128))])]))),128))])),t.allowRegroupOption?(g(),b("div",a$,[k(Ne,{modelValue:a.value,"onUpdate:modelValue":T[1]||(T[1]=A=>a.value=A),label:"Regroup .env file by prefix when saving",description:"Rewrites the file grouped by prefix and strips comments."},null,8,["modelValue"])])):I("",!0)])):(g(),b("div",u$,[Ye(c("textarea",{"onUpdate:modelValue":T[2]||(T[2]=A=>j.internalRaw=A),class:"h-80 w-full rounded-md border border-gray-300 bg-white px-3 py-2 font-mono text-sm text-gray-900 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-100",disabled:t.loading},null,8,d$),[[rn,j.internalRaw]]),T[12]||(T[12]=c("p",{class:"text-xs text-gray-500"},"Edit the .env file directly. Comments and formatting are preserved.",-1))])),t.showSaveButton?(g(),b("div",c$,[k(Ie,{disabled:t.loading,variant:"primary",onClick:T[3]||(T[3]=A=>j.$emit("save"))},{default:R(()=>[ne(z(t.saveLabel),1)]),_:1},8,["disabled"])])):I("",!0)]))}},h$={key:0,class:"flex items-center justify-center h-96"},p$={key:1,class:"flex-1 p-10"},m$={key:2,class:"flex min-h-screen"},g$={class:"w-64 shrink-0 border-r border-gray-200 p-6 dark:border-gray-800"},v$={class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},y$={class:"flex items-center gap-2 mb-4"},b$={class:"text-xs text-gray-500 dark:text-gray-400 font-mono truncate"},x$={class:"space-y-1"},k$={key:0,class:"ml-6 mt-1 space-y-0.5"},w$=["href","onClick"],_$={class:"truncate"},S$={key:0,class:"shrink-0 rounded-full bg-gray-100 px-2 py-0.5 text-[10px] font-medium text-gray-500 dark:bg-gray-800 dark:text-gray-300"},C$={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},A$={class:"space-y-1"},V$={class:"flex-1 p-10"},M$={id:"overview"},D$={class:"space-y-3"},T$={class:"flex items-center justify-between"},$$={class:"flex-1"},E$={class:"text-sm text-gray-900 dark:text-white"},O$={class:"text-gray-600 dark:text-gray-400"},P$={class:"text-gray-600 dark:text-gray-400"},j$={id:"basics"},L$={key:0},R$={key:1},B$={key:2},I$={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},N$={key:0,class:"space-y-5"},U$={class:"flex items-center gap-2"},z$={class:"flex-1 px-3 py-2 text-sm font-mono text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-md"},F$={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},H$={key:0,class:"space-y-5"},W$={id:"settings"},q$={key:0},K$={key:1},G$={key:2},J$={class:"text-sm text-gray-600 dark:text-gray-400 mb-6"},Y$={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 mb-6"},X$={class:"space-y-4 mb-6"},Z$={class:"flex items-center gap-2 w-32 shrink-0"},Q$={class:"text-sm text-gray-700 dark:text-gray-300 capitalize"},e7={class:"flex-1"},t7={class:"border-t border-gray-200 dark:border-gray-700 pt-4"},s7={class:"space-y-3"},i7={key:0,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 mb-6"},n7={class:"space-y-4 mb-6"},r7={class:"flex items-center gap-2 w-32 shrink-0"},o7={class:"text-sm text-gray-700 dark:text-gray-300 capitalize"},l7={class:"flex-1"},a7={class:"border-t border-gray-200 dark:border-gray-700 pt-4"},u7={class:"space-y-3"},d7={key:1,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 mb-6"},c7={class:"space-y-4 mb-6"},f7={class:"flex items-center gap-2 w-32 shrink-0"},h7={class:"text-sm text-gray-700 dark:text-gray-300 capitalize"},p7={class:"flex-1"},m7={class:"border-t border-gray-200 dark:border-gray-700 pt-4"},g7={class:"space-y-3"},v7={id:"notebooks"},y7={class:"rounded-lg bg-gray-50 p-12 dark:bg-gray-800/50 text-center"},b7={id:"data"},x7={class:"mb-6 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},k7={class:"mb-6"},w7={key:0,class:"space-y-4"},_7={key:1,class:"mt-4 rounded-lg border border-red-200 bg-red-50 p-4 dark:border-red-500/40 dark:bg-red-900/20"},S7={class:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"},C7={class:"text-sm font-medium text-red-700 dark:text-red-200"},A7={class:"flex gap-2"},V7={class:"mt-3 list-disc space-y-1 pl-5 text-xs font-mono text-red-700 dark:text-red-200/90"},M7={key:2,class:"rounded-xl border border-dashed border-zinc-300 bg-white/70 p-10 text-center dark:border-zinc-700 dark:bg-zinc-900/40"},D7={class:"text-sm font-medium text-zinc-700 dark:text-zinc-200"},T7={id:"packages"},$7={key:0},E7={key:1},O7={key:2},P7={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},j7={class:"space-y-5"},L7={class:"pt-4 border-t border-gray-200 dark:border-gray-700"},R7={key:0,class:"space-y-3"},B7={class:"flex flex-col gap-3"},I7={class:"grid gap-3 grid-cols-[1fr_160px]"},N7={class:"flex items-center justify-between"},U7={key:1,class:"text-xs text-gray-500 dark:text-gray-400 mb-4"},z7={class:"mt-4"},F7={id:"ai"},H7={key:0},W7={key:1},q7={key:2},K7={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 space-y-6"},G7={key:0,class:"space-y-6 pt-6 border-t border-gray-200 dark:border-gray-700"},J7={class:"space-y-2"},Y7={key:1,class:"text-xs text-gray-500 dark:text-gray-400 mt-2"},X7={id:"git"},Z7={key:0},Q7={key:1},eE={key:2},tE={id:"scaffold"},sE={key:0},iE={key:1},nE={key:2},rE={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},oE={id:"env"},lE={class:"space-y-6"},aE={key:0,class:"max-h-64 overflow-y-auto border border-gray-200 dark:border-gray-700 rounded-md"},uE=["onClick","onMouseenter"],dE={class:"flex items-start justify-between gap-2"},cE={class:"flex-1 min-w-0"},fE={class:"text-sm font-mono font-medium text-gray-900 dark:text-gray-100"},hE={key:0,class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5 line-clamp-1"},pE={key:1,class:"text-xs text-gray-500 dark:text-gray-500 mt-0.5"},mE={class:"text-xs text-gray-500 dark:text-gray-500 font-mono shrink-0"},gE={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},vE={key:1,class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},yE={class:"relative"},bE={class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},xE={__name:"ProjectDetailView",setup(t){const e=Vr(),s=Wa(),i=Ka(),n=ce(null),r=ce(!0),o=ce(null),l=ce("overview"),a=ce(null),d=ce(""),u=ce(new Set),f=ce(!1),h=ce(null),m=ce(!1),_=ce(null),p=ce(!1),C=ce(new Set),M=ce(!1),U=ce(null),B=ce({}),F=ce(!1),j=ce(null),T=ce(!1),A=ce({initialize:!0,user_name:"",user_email:"",hooks:{ai_sync:!1,data_security:!1,check_sensitive_dirs:!1}}),J=ce(!1),ie=ce(null),ge=ce(!1),le=ce(!1),W=ce([]),he=ce([]),te=ce([]);ce(!1);const we=ce([]),G=ce({use_renv:!1,default_packages:[]}),X=ce(!1),se=ce(null),Re=ce(!1),$=ce(!1),Pe=ce(""),Le=ce([]),Z=ce(!1),S=ce(-1),v=ce({name:"",source:"cran",auto_attach:!0}),H=ce({}),N=ce({}),Q=ce(""),xe=ce(!1),ve=ce(null),qe=ce(!1),D=ce("grouped"),P=ce(!1),K=[{id:"claude",label:"Claude Code",description:"Anthropic's IDE-focused assistant."},{id:"copilot",label:"GitHub Copilot",description:"Complements VS Code and JetBrains editors."},{id:"agents",label:"Multi-Agent (OpenAI Codex, Cursor, etc.)",description:"Shared instructions for multi-model orchestrators."}],V=ce({enabled:!1,canonical_file:"CLAUDE.md",canonical_content:"",assistants:[]}),ae=ce(!1),oe=ce(null),_e=ce(!1),Se=ce(!1),ye=ce(!1),pe=ce({file:"CLAUDE.md",exists:!0}),je=E=>["flex items-center gap-2 px-3 py-2 rounded-md text-sm transition",l.value===E?"bg-sky-50 text-sky-700 font-medium dark:bg-sky-900/20 dark:text-sky-400":"text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-800"],Ve=()=>{const E=e.query.section;E&&["overview","settings","notebooks","data","packages","ai","git","scaffold","env"].includes(E)?l.value=E:l.value="overview"};He(l,E=>{s.replace({query:{...e.query,section:E}}),(E==="settings"||E==="basics"||E==="scaffold")&&!U.value&&fe(),E==="packages"&&we.value.length===0&&ii(),E==="git"&&!ge.value&&Mf(),E==="ai"&&!_e.value&&Vf(),E==="env"&&Object.keys(H.value).length===0&&Pf()}),He(()=>e.query.section,E=>{const w=["overview","settings","notebooks","data","packages","ai","git","scaffold","env"];E&&E!==l.value&&w.includes(E)&&(l.value=E)});let be=!1;He(()=>V.value.canonical_file,(E,w)=>{be||_e.value&&(!E||E===w||$f(E))});let Be=null;He(Pe,()=>{Be&&clearTimeout(Be),Be=setTimeout(()=>{d1()},300)});const Ke=(E="")=>E.split(/[._-]/).filter(Boolean).map(w=>w.charAt(0).toUpperCase()+w.slice(1)).join(" "),Xe=E=>JSON.parse(JSON.stringify(E)),Qe=E=>Array.isArray(E)?E.map((w,O)=>[String(O),w]):Object.entries(E),Ot=(E,w="",O=0)=>!E||typeof E!="object"?[]:Qe(E).reduce((Ce,[Oe,ze])=>{if(ze==null)return Ce;const $s=w?`${w}.${Oe}`:Oe;if(typeof ze=="object"&&!Array.isArray(ze)&&ze.path)return Ce.push({type:"leaf",name:Oe,displayName:Ke(Oe),fullKey:$s,data:ze,leafCount:1,depth:O}),Ce;if(typeof ze=="object"){const Dt=Ot(ze,$s,O+1);if(Dt.length>0){const xs=Dt.reduce((Ws,cu)=>Ws+(cu.leafCount||0),0);Ce.push({type:"group",name:Oe,displayName:Ke(Oe),fullKey:$s,children:Dt,leafCount:xs,depth:O})}}return Ce},[]),Ct=E=>E.slice().sort((w,O)=>w.displayName.localeCompare(O.displayName,void 0,{sensitivity:"base",numeric:!0})).map(w=>w.type==="group"?{...w,children:Ct(w.children)}:w),vt=(E,w)=>{if(!w)return!0;const O=w.toLowerCase(),Ce=[E.displayName,E.name,E.fullKey];return E.type==="leaf"&&E.data?.path&&Ce.push(E.data.path),Ce.some(Oe=>Oe&&Oe.toLowerCase().includes(O))},Pt=(E,w)=>{if(!w)return{nodes:E,matchedKeys:new Set};const O=[],Ce=new Set;return E.forEach(Oe=>{if(Oe.type==="leaf"){vt(Oe,w)&&(O.push(Oe),Ce.add(Oe.fullKey));return}const ze=Pt(Oe.children,w);if(vt(Oe,w)||ze.nodes.length>0){const Dt=ze.nodes,xs=Dt.reduce((Ws,cu)=>Ws+(cu.leafCount||0),0);O.push({...Oe,children:Dt,leafCount:xs||Oe.leafCount}),Ce.add(Oe.fullKey),ze.matchedKeys.forEach(Ws=>Ce.add(Ws))}}),{nodes:O,matchedKeys:Ce}},As=re(()=>{const E=a.value;return!E||typeof E!="object"?[]:!Array.isArray(E)&&E.path?[{type:"leaf",name:E.name||"data",displayName:Ke(E.name||"data"),fullKey:E.name||"data",data:E,leafCount:1,depth:0}]:Ct(Ot(E))}),Ii=re(()=>d.value.trim().toLowerCase()),nt=re(()=>{const E=Ii.value;return E?Pt(As.value,E):{nodes:As.value,matchedKeys:new Set}}),Bt=re(()=>nt.value.nodes),zn=re(()=>nt.value.matchedKeys),hn=re(()=>Ii.value.length>0),Yo=re(()=>hn.value?[]:(As.value||[]).filter(E=>(E.depth||0)===0).map(E=>{const w=E.fullKey||E.name||"";return{anchorId:w?a1(w):null,label:E.displayName||Ke(E.name||w||"data source"),count:E.leafCount||(E.type==="leaf"?1:0),nodeKey:w}}).filter(E=>E.anchorId&&E.label)),Er=re(()=>C.value.size>0),Mt=re(()=>C.value.size),Xo=re(()=>Array.from(C.value)),Zo=E=>{let w=0;return E.forEach(O=>{w=Math.max(w,O.depth||0),O.type==="group"&&O.children&&(w=Math.max(w,Zo(O.children)))}),w},Qo=re(()=>Zo(As.value)),ou=re(()=>Qo.value>2),el=re(()=>{const E=B.value.directories||{},w={},O=["functions","notebooks","scripts"];return Object.keys(E).forEach(Ce=>{O.includes(Ce)&&(w[Ce]=E[Ce])}),w}),Fn=re(()=>{const E=B.value.directories||{},w={};return Object.keys(E).forEach(O=>{(O.startsWith("inputs_")||O.includes("_raw")||O.includes("_intermediate")||O.includes("_final"))&&(w[O]=E[O])}),w}),Vs=re(()=>{const E=B.value.directories||{},w={};return Object.keys(E).forEach(O=>{(O.startsWith("outputs_")||O.includes("_figures")||O.includes("_tables")||O.includes("_models")||O.includes("_reports")||O==="cache"||O==="scratch")&&!O.startsWith("inputs_")&&(w[O]=E[O])}),w}),Ms=E=>E.replace(/_/g," ").replace(/\b\w/g,w=>w.toUpperCase()),Ds=re(()=>{const E=n.value?.type;return E?{project:"Standard Project Structure",project_sensitive:"Privacy Sensitive Project Structure",presentation:"Presentation Structure",course:"Course Structure"}[E]||E:"Standard Project Structure"}),Ts=(E,w,O)=>{const Ce=w.split(".").filter(Boolean);if(Ce.length===0)return null;const Oe=Xe(E||{});let ze=Oe;for(let $s=0;$s<Ce.length-1;$s++){const Dt=Ce[$s];(!ze[Dt]||typeof ze[Dt]!="object"||Array.isArray(ze[Dt]))&&(ze[Dt]={}),ze=ze[Dt]}return ze[Ce[Ce.length-1]]=Xe(O),Oe},lu=(E,w)=>{if(!E||!w)return null;const O=w.split(".").filter(Boolean);if(O.length===0)return null;let Ce=E;for(let Oe=0;Oe<O.length;Oe++){const ze=O[Oe];if(!Ce||typeof Ce!="object"||!(ze in Ce))return null;Ce=Ce[ze]}return Ce},Hn=E=>{const w=E.split(".").filter(Boolean);if(w.length<=1)return;const O=new Set(u.value);let Ce="";for(let Oe=0;Oe<w.length-1;Oe++)Ce=Ce?`${Ce}.${w[Oe]}`:w[Oe],O.add(Ce);u.value=O},tl=async(E,w)=>{if(!E)return;if(w){Hn(w);const Ce=new Set(u.value);Ce.add(w),u.value=Ce}await Dn();const O=document.getElementById(E);O&&O.scrollIntoView({behavior:"smooth",block:"start"})},Or=async E=>{const w=await fetch(`/api/project/${e.params.id}/data`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:E})}),O=await w.json();if(!w.ok||O.error)throw new Error(O.error||"Failed to save data catalog")},sl=E=>{E&&(p.value=!1,h.value={fullKey:E.fullKey,name:E.name,data:Xe(E.data||{})},_.value=null,f.value=!0)},au=()=>{p.value=!0,h.value={fullKey:"",data:{}},_.value=null,f.value=!0},uu=E=>{f.value=E,E||(h.value=null,_.value=null,m.value=!1,p.value=!1)},il=async E=>{if(!E||!E.fullKey||!E.data){_.value=E?.error||"Invalid data entry payload";return}const w=E.fullKey.trim(),O=!!E.isNew;if(!w){_.value="Dot notation key is required";return}if(O&&lu(a.value,w)){_.value="A data source with this key already exists";return}const Ce=Xe(a.value),Oe=Ts(a.value,w,E.data);if(!Oe){_.value="Unable to write data entry to catalog";return}a.value=Oe,m.value=!0,_.value=null;try{if(await Or(Oe),Hn(w),i.success(O?"Data Source Added":"Data Catalog Updated",O?"Data entry created successfully":"Data entry saved successfully"),f.value=!1,h.value=null,p.value=!1,C.value.has(w)){const ze=new Set(C.value);ze.delete(w),C.value=ze}}catch(ze){a.value=Ce,_.value=ze.message||"Failed to save data catalog",i.error("Save Failed",ze.message||"Failed to save data catalog")}finally{m.value=!1}},nl=(E,w)=>{if(!E||!w)return null;const O=w.split(".").filter(Boolean);if(O.length===0)return null;const Ce=Xe(E),Oe=[];let ze=Ce;for(let Dt=0;Dt<O.length;Dt++){const xs=O[Dt];if(!ze||typeof ze!="object"||!(xs in ze))return null;Oe.push({parent:ze,key:xs}),ze=ze[xs]}const $s=Oe.pop();if(!$s)return null;delete $s.parent[$s.key];for(let Dt=Oe.length-1;Dt>=0;Dt--){const{parent:xs,key:Ws}=Oe[Dt];xs[Ws]&&typeof xs[Ws]=="object"&&!Array.isArray(xs[Ws])&&Object.keys(xs[Ws]).length===0&&delete xs[Ws]}return Ce},rl=async()=>{if(!Er.value)return;M.value=!0;const E=Xe(a.value);let w=Xe(E);for(const O of C.value){const Ce=nl(w,O);if(!Ce){i.error("Delete Failed",`Unable to locate ${O} in catalog`),M.value=!1;return}w=Ce}try{await Or(w),a.value=w,i.success("Data Catalog Updated","Staged deletions have been saved"),C.value=new Set}catch(O){i.error("Delete Failed",O.message||"Failed to save catalog changes")}finally{M.value=!1}},L=E=>{if(!E||!E.fullKey)return;const w=new Set(C.value);w.has(E.fullKey)?w.delete(E.fullKey):w.add(E.fullKey),C.value=w},x=()=>{C.value=new Set},y=E=>{const w=new Set(u.value);w.has(E)?w.delete(E):w.add(E),u.value=w},q=async()=>{r.value=!0,o.value=null;try{const w=await(await fetch(`/api/project/${e.params.id}`)).json();w.error?o.value=w.error:n.value=w}catch(E){o.value="Failed to load project: "+E.message}finally{r.value=!1}},de=async()=>{try{const w=await(await fetch(`/api/project/${e.params.id}/data`)).json();w.error||(a.value=w.data||w)}catch(E){console.error("Failed to load data catalog:",E)}},fe=async()=>{F.value=!0,j.value=null;try{const w=await(await fetch(`/api/project/${e.params.id}/settings`)).json();w.error?j.value=w.error:(U.value=w.settings,B.value=JSON.parse(JSON.stringify(w.settings)),B.value.scaffold||(B.value.scaffold={notebook_format:"quarto",positron:!1}))}catch(E){j.value="Failed to load settings: "+E.message}finally{F.value=!1}},Je=async()=>{switch(l.value){case"author":case"settings":await At();break;case"packages":await ol();break;case"scaffold":await At();break;case"git":await Of();break;case"ai":await Ef();break;case"env":await du();break;case"overview":case"notebooks":case"data":i.info("No Changes to Save","This section has no editable settings");break;default:i.info("No Changes to Save","This section has no editable settings")}},At=async()=>{T.value=!0;try{const E=[...W.value,...he.value,...te.value];if(E.length>0){const Oe=await(await fetch(`/api/project/${e.params.id}/directories`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({directories:E})})).json();if(!Oe.success){i.error("Directory Creation Failed",Oe.error||"Failed to create directories"),T.value=!1;return}W.value=[],he.value=[],te.value=[]}const O=await(await fetch(`/api/project/${e.params.id}/settings`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(B.value)})).json();if(O.success){const Ce=E.length>0?`Settings updated and ${E.length} director${E.length===1?"y":"ies"} created`:"Project settings have been updated";i.success("Settings Saved",Ce),U.value=JSON.parse(JSON.stringify(B.value)),await fe()}else i.error("Save Failed",O.error||"Failed to save settings")}catch(E){i.error("Save Failed",E.message)}finally{T.value=!1}},Wn=E=>{E&&tl(E.anchorId,E.nodeKey)},ii=async()=>{X.value=!0,se.value=null;try{const w=await(await fetch(`/api/project/${e.params.id}/packages`)).json();w.error?se.value=w.error:(we.value=(w.packages||[]).map(O=>({name:O.name||"",source:O.source||"cran",auto_attach:O.auto_attach!==void 0?O.auto_attach:!0,ref:O.ref||""})),G.value={use_renv:w.use_renv||!1,default_packages:JSON.parse(JSON.stringify(we.value))})}catch(E){se.value="Failed to load packages: "+E.message}finally{X.value=!1}},ol=async()=>{Re.value=!0;try{const w=await(await fetch(`/api/project/${e.params.id}/packages`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({use_renv:G.value.use_renv,packages:G.value.default_packages})})).json();w.success?(i.success("Packages Saved","Package configuration has been updated"),await ii()):i.error("Save Failed",w.error||"Failed to save packages")}catch(E){i.error("Save Failed",E.message)}finally{Re.value=!1}},u1=()=>{G.value.default_packages||(G.value.default_packages=[]),G.value.default_packages.push({name:"",source:"cran",auto_attach:!0})},d1=async()=>{if(Pe.value.length<2){Le.value=[],S.value=-1;return}Z.value=!0;try{const w=await(await fetch(`/api/packages/search?q=${encodeURIComponent(Pe.value)}`)).json();console.log("Package search results:",w),Le.value=w.packages||[],S.value=Le.value.length>0?0:-1}catch(E){console.error("Failed to search packages:",E),Le.value=[],S.value=-1}finally{Z.value=!1}},c1=E=>{Le.value.length!==0&&(E.key==="ArrowDown"?(E.preventDefault(),S.value=Math.min(S.value+1,Le.value.length-1)):E.key==="ArrowUp"?(E.preventDefault(),S.value=Math.max(S.value-1,0)):E.key==="Enter"&&S.value>=0?(E.preventDefault(),Cf(Le.value[S.value])):E.key==="Escape"&&(Le.value=[],S.value=-1))},Cf=E=>{v.value.name=E.name,v.value.source=E.source,Pe.value="",Le.value=[],S.value=-1},f1=()=>{v.value.name.trim()&&(we.value.push({name:v.value.name.trim(),source:v.value.source,auto_attach:v.value.auto_attach}),$.value=!1,i.success("Package Added",`${v.value.name} added to package list`))},h1=E=>{G.value.default_packages.splice(E,1)},p1=E=>E?Array.isArray(E)?Array.from(new Set(E.map(w=>String(w)))):typeof E=="string"?[E]:[]:[],Af=async E=>{let w=`/api/project/${e.params.id}/ai`;if(E){const Ce=new URLSearchParams;Ce.set("canonical_file",E),w+=`?${Ce.toString()}`}const O=await fetch(w);if(!O.ok)throw new Error("Failed to load AI settings");return O.json()},Vf=async()=>{ae.value=!0,oe.value=null;try{const E=await Af();if(E.error){oe.value=E.error,_e.value=!1;return}const w=E.ai||{};be=!0;const O={enabled:!!w.enabled,canonical_file:w.canonical_file||"CLAUDE.md",canonical_content:w.canonical_content||"",assistants:p1(w.assistants)};V.value=O,pe.value={file:w.content_file||w.canonical_file||"CLAUDE.md",exists:!!w.content_exists},be=!1,await Tf(O.canonical_file,{preserveContentIfMissing:!1}),_e.value=!0}catch(E){oe.value=E.message||"Failed to load AI settings",_e.value=!1}finally{be=!1,ae.value=!1,ye.value=!1}},Mf=async()=>{J.value=!0,ie.value=null;try{const w=await(await fetch(`/api/project/${e.params.id}/git`)).json();if(w.error){ie.value=w.error,ge.value=!1;return}const O=w.git||{};A.value={initialize:O.initialize!==void 0?!!O.initialize:!0,user_name:O.user_name||"",user_email:O.user_email||"",hooks:{ai_sync:O.hooks?.ai_sync||!1,data_security:O.hooks?.data_security||!1,check_sensitive_dirs:O.hooks?.check_sensitive_dirs||!1}},ge.value=!0}catch(E){ie.value=E.message||"Failed to load Git settings",ge.value=!1}finally{J.value=!1}},Df=re({get(){return{initialize:A.value.initialize,user_name:A.value.user_name||"",user_email:A.value.user_email||"",hooks:{ai_sync:A.value.hooks?.ai_sync||!1,data_security:A.value.hooks?.data_security||!1,check_sensitive_dirs:A.value.hooks?.check_sensitive_dirs||!1}}},set(E){A.value={initialize:E.initialize,user_name:E.user_name,user_email:E.user_email,hooks:{ai_sync:E.hooks.ai_sync,data_security:E.hooks.data_security,check_sensitive_dirs:E.hooks.check_sensitive_dirs}}}}),Tf=async(E,{preserveContentIfMissing:w=!0}={})=>{if(E){ye.value=!0;try{const O=await Af(E);if(O.error){i.error("Load Failed",O.error);return}const Ce=O.ai||{};pe.value={file:Ce.content_file||E,exists:!!Ce.content_exists},(Ce.content_exists||!w)&&(V.value.canonical_content=Ce.canonical_content||"")}catch(O){i.error("Load Failed",O.message||"Unable to load canonical file")}finally{ye.value=!1}}},$f=E=>{const w=typeof E=="string"&&E.length>0?E:"CLAUDE.md";Tf(w,{preserveContentIfMissing:!0})},m1=(E,w)=>{if(!E)return;const O=new Set(V.value.assistants);w?O.add(E):O.delete(E),V.value.assistants=Array.from(O)},Ef=async()=>{Se.value=!0;try{const w=await(await fetch(`/api/project/${e.params.id}/ai`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:V.value.enabled,canonical_file:V.value.canonical_file,assistants:V.value.assistants,canonical_content:V.value.canonical_content})})).json();w.success?(i.success("AI Settings Saved","AI assistant configuration has been updated"),_e.value=!1,await Vf()):i.error("Save Failed",w.error||"Failed to save AI settings")}catch(E){i.error("Save Failed",E.message||"Failed to save AI settings")}finally{Se.value=!1}},Of=async()=>{le.value=!0;try{const w=await(await fetch(`/api/project/${e.params.id}/git`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({initialize:A.value.initialize,user_name:A.value.user_name,user_email:A.value.user_email,hooks:A.value.hooks})})).json();w.success?(i.success("Git Settings Saved","Repository configuration has been updated"),ge.value=!1,await Mf()):i.error("Save Failed",w.error||"Failed to save Git settings")}catch(E){i.error("Save Failed",E.message||"Failed to save Git settings")}finally{le.value=!1}},Pf=async()=>{xe.value=!0,ve.value=null;try{const w=await(await fetch(`/api/project/${e.params.id}/env`)).json();w.error?ve.value=w.error:(H.value=w.variables||{},N.value=w.groups||{},Q.value=w.raw_content||"")}catch(E){ve.value="Failed to load .env: "+E.message}finally{xe.value=!1}},du=async()=>{qe.value=!0;try{const E=D.value==="raw"?{raw_content:Q.value}:{variables:H.value,regroup:P.value},O=await(await fetch(`/api/project/${e.params.id}/env`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(E)})).json();O.success?(i.success(".env Saved","Environment variables have been updated"),await Pf()):i.error("Save Failed",O.error||"Failed to save .env")}catch(E){i.error("Save Failed",E.message)}finally{qe.value=!1}},jf=E=>{(E.metaKey||E.ctrlKey)&&E.key==="s"&&(E.preventDefault(),l.value==="settings"||l.value==="scaffold"?At():l.value==="packages"?ol():l.value==="git"?Of():l.value==="ai"?Ef():l.value==="directories"?saveDirectories():l.value==="env"&&du())};return ss(()=>{Ve(),q(),de(),window.addEventListener("keydown",jf)}),Ar(()=>{window.removeEventListener("keydown",jf)}),He(()=>e.params.id,(E,w)=>{E&&E!==w&&(l.value="overview",n.value=null,U.value=null,B.value={},j.value=null,F.value=!1,we.value=[],G.value={use_renv:!1,default_packages:[]},se.value=null,X.value=!1,a.value=null,C.value=new Set,_.value=null,h.value=null,H.value={},N.value={},Q.value="",ve.value=null,xe.value=!1,D.value="grouped",P.value=!1,A.value={initialize:!0,user_name:"",user_email:"",hooks:{ai_sync:!1,data_security:!1,check_sensitive_dirs:!1}},ge.value=!1,ie.value=null,J.value=!1,be=!0,V.value={enabled:!1,canonical_file:"CLAUDE.md",canonical_content:"",assistants:[]},pe.value={file:"CLAUDE.md",exists:!0},_e.value=!1,oe.value=null,ae.value=!1,ye.value=!1,be=!1,a.value=null,Ve(),q(),de())}),(E,w)=>(g(),b("div",null,[r.value?(g(),b("div",h$,[...w[39]||(w[39]=[c("div",{class:"text-zinc-600 dark:text-zinc-400"},"Loading project...",-1)])])):o.value?(g(),b("div",p$,[k(Os,{type:"error",title:"Error Loading Project",description:o.value},null,8,["description"])])):n.value?(g(),b("div",m$,[c("nav",g$,[c("h2",v$,z(n.value.name),1),c("div",y$,[c("span",b$,z(n.value.path),1),k(ar,{value:n.value.path,variant:"ghost",successMessage:"Path copied",class:"shrink-0"},null,8,["value"])]),c("div",x$,[c("a",{href:"#overview",onClick:w[0]||(w[0]=Ut(O=>l.value="overview",["prevent"])),class:Te(je("overview"))},[k(lt(qa),{class:"h-4 w-4"}),w[40]||(w[40]=ne(" Overview ",-1))],2),k(Ta,null,{default:R(()=>[...w[41]||(w[41]=[ne("Settings",-1)])]),_:1}),c("a",{href:"#basics",onClick:w[1]||(w[1]=Ut(O=>l.value="basics",["prevent"])),class:Te(je("basics"))},[k(lt(Lc),{class:"h-4 w-4"}),w[42]||(w[42]=ne(" Basics ",-1))],2),c("a",{href:"#settings",onClick:w[2]||(w[2]=Ut(O=>l.value="settings",["prevent"])),class:Te(je("settings"))},[k(lt(ua),{class:"h-4 w-4"}),w[43]||(w[43]=ne(" Project Structure ",-1))],2),c("a",{href:"#packages",onClick:w[3]||(w[3]=Ut(O=>l.value="packages",["prevent"])),class:Te(je("packages"))},[k(lt(Rc),{class:"h-4 w-4"}),w[44]||(w[44]=ne(" Packages ",-1))],2),c("a",{href:"#ai",onClick:w[4]||(w[4]=Ut(O=>l.value="ai",["prevent"])),class:Te(je("ai"))},[k(lt(d2),{class:"h-4 w-4"}),w[45]||(w[45]=ne(" AI Assistants ",-1))],2),c("a",{href:"#git",onClick:w[5]||(w[5]=Ut(O=>l.value="git",["prevent"])),class:Te(je("git"))},[k(lt(n2),{class:"h-4 w-4"}),w[46]||(w[46]=ne(" Git & Hooks ",-1))],2),c("a",{href:"#scaffold",onClick:w[6]||(w[6]=Ut(O=>l.value="scaffold",["prevent"])),class:Te(je("scaffold"))},[k(lt(e2),{class:"h-4 w-4"}),w[47]||(w[47]=ne(" Scaffold Behavior ",-1))],2),c("a",{href:"#data",onClick:w[7]||(w[7]=Ut(O=>l.value="data",["prevent"])),class:Te(je("data"))},[k(lt(i2),{class:"h-4 w-4"}),w[48]||(w[48]=ne(" Data ",-1))],2),l.value==="data"&&Yo.value.length?(g(),b("div",k$,[(g(!0),b(ee,null,ke(Yo.value,O=>(g(),b("a",{key:O.anchorId,href:`#${O.anchorId}`,onClick:Ut(Ce=>Wn(O),["prevent"]),class:"flex items-center justify-between gap-2 rounded-md px-3 py-1 text-xs text-gray-600 transition hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-gray-800"},[c("span",_$,z(O.label),1),O.count?(g(),b("span",S$,z(O.count),1)):I("",!0)],8,w$))),128))])):I("",!0),c("a",{href:"#env",onClick:w[8]||(w[8]=Ut(O=>l.value="env",["prevent"])),class:Te(je("env"))},[k(lt(r0),{class:"h-4 w-4"}),w[49]||(w[49]=ne(" .env ",-1))],2)]),c("div",C$,[k(Ie,{variant:"primary",onClick:Je,disabled:T.value||Re.value||qe.value||Se.value||le.value,class:"w-full"},{default:R(()=>[ne(z(T.value||Re.value||qe.value||Se.value||le.value?"Saving...":"Save"),1)]),_:1},8,["disabled"])]),c("div",A$,[k(Ta,null,{default:R(()=>[...w[50]||(w[50]=[ne("Outputs",-1)])]),_:1}),c("a",{href:"#notebooks",onClick:w[9]||(w[9]=Ut(O=>l.value="notebooks",["prevent"])),class:Te(je("notebooks"))},[k(lt(yd),{class:"h-4 w-4"}),w[51]||(w[51]=ne(" Notebooks ",-1))],2)])]),c("div",V$,[Ye(c("div",M$,[w[56]||(w[56]=c("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Overview",-1)),w[57]||(w[57]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Quick overview of your project settings. ",-1)),c("div",D$,[c("button",{onClick:w[10]||(w[10]=O=>l.value="basics"),class:"w-full text-left px-4 py-3 rounded-md bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 hover:border-sky-300 dark:hover:border-sky-700 transition"},[c("div",T$,[c("div",$$,[w[54]||(w[54]=c("div",{class:"text-xs text-gray-500 dark:text-gray-400 mb-1"},"Basics",-1)),c("div",E$,[c("span",null,z(n.value.name||"Untitled"),1),n.value.author?(g(),b(ee,{key:0},[w[52]||(w[52]=c("span",{class:"text-gray-400 dark:text-gray-500 mx-1"},"",-1)),c("span",O$,z(n.value.author),1)],64)):I("",!0),B.value.scaffold?.notebook_format?(g(),b(ee,{key:1},[w[53]||(w[53]=c("span",{class:"text-gray-400 dark:text-gray-500 mx-1"},"",-1)),c("span",P$,z(B.value.scaffold.notebook_format),1)],64)):I("",!0)])]),w[55]||(w[55]=c("svg",{class:"h-5 w-5 text-gray-400 shrink-0 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))])])])],512),[[at,l.value==="overview"]]),Ye(c("div",j$,[F.value?(g(),b("div",L$,[...w[58]||(w[58]=[c("div",{class:"text-center py-12 text-zinc-500 dark:text-zinc-400"}," Loading settings... ",-1)])])):j.value?(g(),b("div",R$,[k(Os,{type:"error",title:"Error Loading Settings",description:j.value},null,8,["description"])])):(g(),b("div",B$,[w[66]||(w[66]=c("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Basics",-1)),w[67]||(w[67]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Essential project settings. ",-1)),c("div",I$,[B.value.scaffold?(g(),b("div",N$,[k(Y,{modelValue:n.value.name,"onUpdate:modelValue":w[11]||(w[11]=O=>n.value.name=O),label:"Project Name",hint:"Changing this will rename the project directory"},null,8,["modelValue"]),c("div",null,[w[59]||(w[59]=c("label",{class:"block text-sm font-semibold text-gray-900 dark:text-white mb-2"}," Filesystem Location ",-1)),c("div",U$,[c("code",z$,z(n.value.path),1),k(ar,{value:n.value.path,successMessage:"Path copied"},null,8,["value"])])]),c("div",null,[w[61]||(w[61]=c("label",{class:"block text-sm font-semibold text-gray-900 dark:text-white mb-3"}," Supported Editors ",-1)),k(pi,{modelValue:B.value.scaffold.positron,"onUpdate:modelValue":w[12]||(w[12]=O=>B.value.scaffold.positron=O),id:"support-positron-edit",description:"Enable Positron-specific workspace and settings files"},{default:R(()=>[...w[60]||(w[60]=[ne(" Positron ",-1)])]),_:1},8,["modelValue"]),w[62]||(w[62]=c("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-3"}," RStudio supported by default ",-1))]),k(Jt,{modelValue:B.value.scaffold.notebook_format,"onUpdate:modelValue":w[13]||(w[13]=O=>B.value.scaffold.notebook_format=O),label:"Default Notebook Format",hint:"Format used when creating new notebooks"},{default:R(()=>[...w[63]||(w[63]=[c("option",{value:"quarto"},"Quarto (.qmd)",-1),c("option",{value:"rmarkdown"},"R Markdown (.Rmd)",-1)])]),_:1},8,["modelValue"]),c("div",F$,[w[64]||(w[64]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"}," Author Information ",-1)),w[65]||(w[65]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-5"}," Configure author details for this project. ",-1)),B.value.author?(g(),b("div",H$,[k(Y,{modelValue:B.value.author.name,"onUpdate:modelValue":w[14]||(w[14]=O=>B.value.author.name=O),label:"Author Name"},null,8,["modelValue"]),k(Y,{modelValue:B.value.author.email,"onUpdate:modelValue":w[15]||(w[15]=O=>B.value.author.email=O),label:"Email",type:"email"},null,8,["modelValue"]),k(Y,{modelValue:B.value.author.affiliation,"onUpdate:modelValue":w[16]||(w[16]=O=>B.value.author.affiliation=O),label:"Affiliation"},null,8,["modelValue"])])):I("",!0)])])):I("",!0)])]))],512),[[at,l.value==="basics"]]),Ye(c("div",W$,[F.value?(g(),b("div",q$,[...w[68]||(w[68]=[c("div",{class:"text-center py-12 text-zinc-500 dark:text-zinc-400"}," Loading settings... ",-1)])])):j.value?(g(),b("div",K$,[k(Os,{type:"error",title:"Error Loading Settings",description:j.value},null,8,["description"])])):(g(),b("div",G$,[w[77]||(w[77]=c("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Project Structure",-1)),c("p",J$,[w[69]||(w[69]=ne(" This project uses the ",-1)),c("strong",null,z(Ds.value),1),w[70]||(w[70]=ne(" structure. Existing directories cannot be renamed or removed, but you can add custom directories below. ",-1))]),c("div",Y$,[w[71]||(w[71]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Workspaces",-1)),w[72]||(w[72]=c("p",{class:"text-xs text-gray-600 dark:text-gray-400 mb-4"}," Functions, notebooks, and scripts scaffolded into every project. ",-1)),c("div",X$,[(g(!0),b(ee,null,ke(el.value,(O,Ce)=>(g(),b("div",{key:Ce,class:"flex items-start gap-4"},[c("div",Z$,[k(Ne,{"model-value":!0,disabled:"",class:"pointer-events-none opacity-50"}),c("label",Q$,z(Ms(Ce)),1)]),c("div",e7,[k(Y,{"model-value":O,disabled:"",prefix:"/",monospace:"",class:"opacity-75"},null,8,["model-value"])])]))),128))]),c("div",t7,[k(xt,{modelValue:W.value,"onUpdate:modelValue":w[17]||(w[17]=O=>W.value=O),"add-label":"Add Workspace Directory","default-item":()=>({key:"",label:"",path:"",category:"workspace",_id:Date.now()})},{default:R(({item:O,index:Ce,update:Oe})=>[c("div",s7,[k(Y,{"model-value":O.key,"onUpdate:modelValue":ze=>Oe("key",ze),label:"Key",placeholder:"e.g., helpers",size:"sm",monospace:""},null,8,["model-value","onUpdate:modelValue"]),k(Y,{"model-value":O.label,"onUpdate:modelValue":ze=>Oe("label",ze),label:"Label",placeholder:"e.g., Helper Scripts",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(Y,{"model-value":O.path,"onUpdate:modelValue":ze=>Oe("path",ze),label:"Path",placeholder:"e.g., helpers",prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["modelValue","default-item"])])]),Fn.value&&Object.keys(Fn.value).length>0?(g(),b("div",i7,[w[73]||(w[73]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Inputs",-1)),w[74]||(w[74]=c("p",{class:"text-xs text-gray-600 dark:text-gray-400 mb-4"}," Define the read-only locations where raw and prepared data live. ",-1)),c("div",n7,[(g(!0),b(ee,null,ke(Fn.value,(O,Ce)=>(g(),b("div",{key:Ce,class:"flex items-start gap-4"},[c("div",r7,[k(Ne,{"model-value":!0,disabled:"",class:"pointer-events-none opacity-50"}),c("label",o7,z(Ms(Ce)),1)]),c("div",l7,[k(Y,{"model-value":O,disabled:"",prefix:"/",monospace:"",class:"opacity-75"},null,8,["model-value"])])]))),128))]),c("div",a7,[k(xt,{modelValue:he.value,"onUpdate:modelValue":w[18]||(w[18]=O=>he.value=O),"add-label":"Add Input Directory","default-item":()=>({key:"",label:"",path:"",category:"input",_id:Date.now()})},{default:R(({item:O,index:Ce,update:Oe})=>[c("div",u7,[k(Y,{"model-value":O.key,"onUpdate:modelValue":ze=>Oe("key",ze),label:"Key",placeholder:"e.g., inputs_archive",size:"sm",monospace:""},null,8,["model-value","onUpdate:modelValue"]),k(Y,{"model-value":O.label,"onUpdate:modelValue":ze=>Oe("label",ze),label:"Label",placeholder:"e.g., Archived Inputs",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(Y,{"model-value":O.path,"onUpdate:modelValue":ze=>Oe("path",ze),label:"Path",placeholder:"e.g., inputs/archive",prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["modelValue","default-item"])])])):I("",!0),Vs.value&&Object.keys(Vs.value).length>0?(g(),b("div",d7,[w[75]||(w[75]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Outputs",-1)),w[76]||(w[76]=c("p",{class:"text-xs text-gray-600 dark:text-gray-400 mb-4"}," Results, figures, tables, and rendered outputs. ",-1)),c("div",c7,[(g(!0),b(ee,null,ke(Vs.value,(O,Ce)=>(g(),b("div",{key:Ce,class:"flex items-start gap-4"},[c("div",f7,[k(Ne,{"model-value":!0,disabled:"",class:"pointer-events-none opacity-50"}),c("label",h7,z(Ms(Ce)),1)]),c("div",p7,[k(Y,{"model-value":O,disabled:"",prefix:"/",monospace:"",class:"opacity-75"},null,8,["model-value"])])]))),128))]),c("div",m7,[k(xt,{modelValue:te.value,"onUpdate:modelValue":w[19]||(w[19]=O=>te.value=O),"add-label":"Add Output Directory","default-item":()=>({key:"",label:"",path:"",category:"output",_id:Date.now()})},{default:R(({item:O,index:Ce,update:Oe})=>[c("div",g7,[k(Y,{"model-value":O.key,"onUpdate:modelValue":ze=>Oe("key",ze),label:"Key",placeholder:"e.g., outputs_animations",size:"sm",monospace:""},null,8,["model-value","onUpdate:modelValue"]),k(Y,{"model-value":O.label,"onUpdate:modelValue":ze=>Oe("label",ze),label:"Label",placeholder:"e.g., Animations",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(Y,{"model-value":O.path,"onUpdate:modelValue":ze=>Oe("path",ze),label:"Path",placeholder:"e.g., outputs/animations",prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["modelValue","default-item"])])])):I("",!0)]))],512),[[at,l.value==="settings"]]),Ye(c("div",v7,[w[79]||(w[79]=c("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Rendered Notebooks",-1)),w[80]||(w[80]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Browse and access your rendered Quarto/RMarkdown notebooks. ",-1)),c("div",y7,[k(lt(yd),{class:"h-12 w-12 mx-auto mb-4 text-gray-400"}),w[78]||(w[78]=c("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Notebook browser coming soon... ",-1))])],512),[[at,l.value==="notebooks"]]),Ye(c("div",b7,[c("div",x7,[w[82]||(w[82]=c("div",null,[c("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white"},"Data Catalog"),c("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Browse your project's data sources with copy commands. ")],-1)),k(Ie,{variant:"primary",size:"sm",class:"inline-flex items-center gap-2",onClick:au},{default:R(()=>[k(lt(a2),{class:"h-4 w-4"}),w[81]||(w[81]=ne(" Add Data Source ",-1))]),_:1})]),c("div",k7,[k(Y,{modelValue:d.value,"onUpdate:modelValue":w[20]||(w[20]=O=>d.value=O),label:"Search data sources",placeholder:"Filter by name, prefix, or file path"},null,8,["modelValue"])]),Bt.value.length>0?(g(),b("div",w7,[(g(!0),b(ee,null,ke(Bt.value,O=>(g(),me(FT,{key:O.fullKey,node:O,"expanded-keys":u.value,"auto-expanded-keys":zn.value,"toggle-group":y,"search-term":d.value,hierarchical:ou.value,"pending-deletes":C.value,onEdit:sl,onDelete:L},null,8,["node","expanded-keys","auto-expanded-keys","search-term","hierarchical","pending-deletes"]))),128))])):I("",!0),Er.value?(g(),b("div",_7,[c("div",S7,[c("div",null,[c("p",C7,z(Mt.value)+" data source"+z(Mt.value===1?"":"s")+" marked for deletion. ",1),w[83]||(w[83]=c("p",{class:"text-xs text-red-600 dark:text-red-200/80"}," Changes will be applied when you save. ",-1))]),c("div",A7,[k(Ie,{variant:"secondary",size:"sm",class:"shadow-none",disabled:M.value,onClick:x},{default:R(()=>[...w[84]||(w[84]=[ne(" Cancel ",-1)])]),_:1},8,["disabled"]),k(Ie,{size:"sm",class:"bg-red-600 text-white hover:bg-red-500 focus-visible:outline-red-600 dark:bg-red-500 dark:hover:bg-red-400",disabled:M.value,onClick:rl},{default:R(()=>[ne(z(M.value?"Saving":"Save Changes"),1)]),_:1},8,["disabled"])])]),c("ul",V7,[(g(!0),b(ee,null,ke(Xo.value,O=>(g(),b("li",{key:O},z(O),1))),128))])])):hn.value?(g(),b("div",M7,[c("p",D7,' No data sources match "'+z(d.value)+'". ',1),w[85]||(w[85]=c("p",{class:"mt-2 text-xs text-zinc-500 dark:text-zinc-400"}," Try adjusting your search terms or clearing the filter. ",-1))])):(g(),b(ee,{key:3},[!Er.value&&(!a.value||Object.keys(a.value||{}).length===0)?(g(),me(kD,{key:0,title:"No Data Sources",description:"This project doesn't have any data sources defined in its settings",icon:"database"})):I("",!0)],64))],512),[[at,l.value==="data"]]),k(GD,{mode:p.value?"create":"edit",modelValue:f.value,"onUpdate:modelValue":[w[21]||(w[21]=O=>f.value=O),uu],entry:h.value,saving:m.value,error:_.value,onSave:il},null,8,["mode","modelValue","entry","saving","error"]),Ye(c("div",T7,[X.value?(g(),b("div",$7,[...w[86]||(w[86]=[c("div",{class:"text-center py-12"},[c("div",{class:"text-sm text-gray-500 dark:text-gray-400"},"Loading packages...")],-1)])])):se.value?(g(),b("div",E7,[k(Os,{type:"error",title:"Error Loading Packages",description:se.value},null,8,["description"])])):(g(),b("div",O7,[w[91]||(w[91]=c("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Packages & Dependencies",-1)),w[92]||(w[92]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Configure package management and default packages for this project. ",-1)),c("div",P7,[c("div",j7,[k(Ne,{modelValue:G.value.use_renv,"onUpdate:modelValue":w[22]||(w[22]=O=>G.value.use_renv=O),label:"Enable renv",description:"Use renv for package version management and reproducibility"},null,8,["modelValue"]),c("div",L7,[w[90]||(w[90]=c("p",{class:"text-xs text-gray-600 dark:text-gray-400 mb-4"},"Use this list to preseed notebooks with your preferred helpers.",-1)),G.value.default_packages&&G.value.default_packages.length?(g(),b("div",R7,[(g(!0),b(ee,null,ke(G.value.default_packages,(O,Ce)=>(g(),b("div",{key:`pkg-${Ce}`,class:"rounded-md border border-gray-200 p-4 dark:border-gray-700"},[c("div",B7,[c("div",I7,[O.source==="cran"||O.source==="bioconductor"?(g(),me(wf,{key:0,modelValue:O.name,"onUpdate:modelValue":Oe=>O.name=Oe,source:O.source,label:"Package",placeholder:O.source==="cran"?"Search CRAN...":"Search Bioconductor...",onSelect:Oe=>O.name=Oe.name},null,8,["modelValue","onUpdate:modelValue","source","placeholder","onSelect"])):(g(),me(Y,{key:1,modelValue:O.name,"onUpdate:modelValue":Oe=>O.name=Oe,label:"Package",placeholder:"user/repo"},null,8,["modelValue","onUpdate:modelValue"])),k(Jt,{modelValue:O.source,"onUpdate:modelValue":Oe=>O.source=Oe,label:"Source"},{default:R(()=>[...w[87]||(w[87]=[c("option",{value:"cran"},"CRAN",-1),c("option",{value:"github"},"GitHub",-1),c("option",{value:"bioconductor"},"Bioconductor",-1)])]),_:1},8,["modelValue","onUpdate:modelValue"])]),c("div",N7,[k(Ne,{modelValue:O.auto_attach,"onUpdate:modelValue":Oe=>O.auto_attach=Oe,label:"Auto-Attach",description:"Call library() when scaffold() runs."},null,8,["modelValue","onUpdate:modelValue"]),k(Ie,{size:"sm",variant:"secondary",onClick:Oe=>h1(Ce)},{default:R(()=>[...w[88]||(w[88]=[ne("Remove",-1)])]),_:1},8,["onClick"])])])]))),128))])):(g(),b("p",U7,"No packages configured. Add packages to include tidyverse helpers or internal utilities automatically.")),c("div",z7,[k(Ie,{size:"sm",variant:"secondary",onClick:u1},{default:R(()=>[...w[89]||(w[89]=[ne("Add Package",-1)])]),_:1})])])])])]))],512),[[at,l.value==="packages"]]),Ye(c("div",F7,[ae.value?(g(),b("div",H7,[...w[93]||(w[93]=[c("div",{class:"text-center py-12 text-sm text-gray-500 dark:text-gray-400"},"Loading AI settings...",-1)])])):oe.value?(g(),b("div",W7,[k(Os,{type:"error",title:"Error Loading AI Settings",description:oe.value},null,8,["description"])])):(g(),b("div",q7,[w[101]||(w[101]=c("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"AI Assistants",-1)),w[102]||(w[102]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Framework maintains context files for selected assistants and keeps them in sync before commits. ",-1)),c("div",K7,[k(Ne,{modelValue:V.value.enabled,"onUpdate:modelValue":w[23]||(w[23]=O=>V.value.enabled=O),label:"Enable AI Support",description:"Generate and sync assistant-specific context files."},null,8,["modelValue"]),V.value.enabled?(g(),b("div",G7,[c("div",null,[w[95]||(w[95]=c("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Canonical context file",-1)),w[96]||(w[96]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," This file is the source of truth; other instructions files are synced to it when AI hooks run. ",-1)),k(Jt,{modelValue:V.value.canonical_file,"onUpdate:modelValue":w[24]||(w[24]=O=>V.value.canonical_file=O),label:"Canonical Context File",onChange:w[25]||(w[25]=O=>$f(O?.target?.value))},{default:R(()=>[...w[94]||(w[94]=[c("option",{value:"AGENTS.md"},"AGENTS.md (multi-agent orchestrator)",-1),c("option",{value:"CLAUDE.md"},"CLAUDE.md",-1),c("option",{value:".github/copilot-instructions.md"},".github/copilot-instructions.md",-1)])]),_:1},8,["modelValue"])]),c("div",null,[w[97]||(w[97]=c("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Assistants",-1)),w[98]||(w[98]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Choose which assistants receive context updates. ",-1)),c("div",J7,[(g(),b(ee,null,ke(K,O=>k(pi,{key:O.id,id:`project-ai-${O.id}`,"model-value":V.value.assistants.includes(O.id),"onUpdate:modelValue":Ce=>m1(O.id,Ce),description:O.description},{default:R(()=>[ne(z(O.label),1)]),_:2},1032,["id","model-value","onUpdate:modelValue","description"])),64))])]),c("div",null,[w[99]||(w[99]=c("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Canonical instructions",-1)),w[100]||(w[100]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Edit the canonical file directly. Framework mirrors this content to other assistant files. ",-1)),pe.value.exists?I("",!0):(g(),me(Os,{key:0,type:"info",title:"New canonical file",description:`Saving copies the current instructions into ${V.value.canonical_file||"CLAUDE.md"}. The original file stays on disk; if AI sync hooks are enabled they mirror everything from the new canonical file.`,class:"mb-4"},null,8,["description"])),k(Gi,{modelValue:V.value.canonical_content,"onUpdate:modelValue":w[26]||(w[26]=O=>V.value.canonical_content=O),language:"markdown","min-height":"400px",disabled:ye.value},null,8,["modelValue","disabled"]),ye.value?(g(),b("p",Y7," Loading "+z(V.value.canonical_file)+" ",1)):I("",!0)])])):I("",!0)])]))],512),[[at,l.value==="ai"]]),Ye(c("div",X7,[J.value?(g(),b("div",Z7,[...w[103]||(w[103]=[c("div",{class:"text-center py-12 text-sm text-gray-500 dark:text-gray-400"},"Loading git settings...",-1)])])):ie.value?(g(),b("div",Q7,[k(Os,{type:"error",title:"Error Loading Git Settings",description:ie.value},null,8,["description"])])):(g(),b("div",eE,[w[105]||(w[105]=c("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Git & Hooks",-1)),w[106]||(w[106]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Configure repository initialization, commit identity, git hooks, and security scanning. ",-1)),k(_f,{modelValue:Df.value,"onUpdate:modelValue":w[27]||(w[27]=O=>Df.value=O)},{note:R(()=>[...w[104]||(w[104]=[ne(" Project-specific .gitignore templates can be customized in Project Defaults. ",-1)])]),_:1},8,["modelValue"])]))],512),[[at,l.value==="git"]]),Ye(c("div",tE,[F.value?(g(),b("div",sE,[...w[107]||(w[107]=[c("div",{class:"text-center py-12 text-zinc-500 dark:text-zinc-400"}," Loading settings... ",-1)])])):j.value?(g(),b("div",iE,[k(Os,{type:"error",title:"Error Loading Settings",description:j.value},null,8,["description"])])):(g(),b("div",nE,[w[108]||(w[108]=c("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Scaffold Behavior",-1)),w[109]||(w[109]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"},[ne(" Automatic actions when "),c("code",{class:"px-1.5 py-0.5 bg-gray-200 dark:bg-gray-700 rounded text-xs"},"scaffold()"),ne(" runs to initialize your project environment. ")],-1)),c("div",rE,[B.value.scaffold?(g(),me(Sf,{key:0,modelValue:B.value.scaffold,"onUpdate:modelValue":w[28]||(w[28]=O=>B.value.scaffold=O),flush:""},null,8,["modelValue"])):I("",!0)])]))],512),[[at,l.value==="scaffold"]]),Ye(c("div",oE,[w[110]||(w[110]=c("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Environment Variables",-1)),w[111]||(w[111]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Manage environment variables for this project (.env file). ",-1)),k(f$,{loading:xe.value,error:ve.value,groups:N.value,variables:H.value,"onUpdate:variables":w[29]||(w[29]=O=>H.value=O),"raw-content":Q.value,"onUpdate:rawContent":w[30]||(w[30]=O=>Q.value=O),"view-mode":D.value,"onUpdate:viewMode":w[31]||(w[31]=O=>D.value=O),"regroup-on-save":P.value,"onUpdate:regroupOnSave":w[32]||(w[32]=O=>P.value=O),onSave:du},null,8,["loading","error","groups","variables","raw-content","view-mode","regroup-on-save"])],512),[[at,l.value==="env"]])])])):I("",!0),k(Tn,{modelValue:$.value,"onUpdate:modelValue":w[38]||(w[38]=O=>$.value=O),title:"Add Package",size:"md",variant:"left"},{actions:R(()=>[k(Ie,{variant:"primary",onClick:f1,disabled:!v.value.name.trim()},{default:R(()=>[...w[117]||(w[117]=[ne(" Add Package ",-1)])]),_:1},8,["disabled"]),k(Ie,{variant:"secondary",onClick:w[37]||(w[37]=O=>$.value=!1)},{default:R(()=>[...w[118]||(w[118]=[ne(" Cancel ",-1)])]),_:1})]),default:R(()=>[c("div",lE,[c("div",null,[w[112]||(w[112]=c("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Search CRAN Packages ",-1)),Ye(c("input",{"onUpdate:modelValue":w[33]||(w[33]=O=>Pe.value=O),onKeydown:c1,type:"text",placeholder:"Type to search CRAN...",class:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 px-3 py-2 text-sm text-gray-900 dark:text-gray-100 font-mono focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500"},null,544),[[rn,Pe.value]])]),Le.value.length>0?(g(),b("div",aE,[(g(!0),b(ee,null,ke(Le.value,(O,Ce)=>(g(),b("button",{key:O.name,onClick:Oe=>Cf(O),onMouseenter:Oe=>S.value=Ce,class:Te(["w-full px-3 py-2 text-left border-b border-gray-200 dark:border-gray-700 last:border-b-0 transition",S.value===Ce?"bg-sky-50 dark:bg-sky-900/20":"hover:bg-gray-50 dark:hover:bg-gray-800"])},[c("div",dE,[c("div",cE,[c("div",fE,z(O.name),1),O.title?(g(),b("div",hE,z(O.title),1)):I("",!0),O.author?(g(),b("div",pE,z(O.author),1)):I("",!0)]),c("div",mE," v"+z(O.version),1)])],42,uE))),128))])):I("",!0),c("div",null,[w[113]||(w[113]=c("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Package Name ",-1)),Ye(c("input",{"onUpdate:modelValue":w[34]||(w[34]=O=>v.value.name=O),type:"text",placeholder:"dplyr",class:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 px-3 py-2 text-sm text-gray-900 dark:text-gray-100 font-mono focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500"},null,512),[[rn,v.value.name]]),v.value.source==="github"?(g(),b("p",gE," GitHub: user/repo (e.g., tidyverse/dplyr) ")):I("",!0),v.value.source==="bioc"?(g(),b("p",vE," Bioconductor: name only (e.g., DESeq2) ")):I("",!0)]),c("div",null,[w[116]||(w[116]=c("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Source ",-1)),c("div",yE,[Ye(c("select",{"onUpdate:modelValue":w[35]||(w[35]=O=>v.value.source=O),class:"w-full appearance-none rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 pl-3 pr-10 py-2 text-sm text-gray-900 dark:text-gray-100 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500"},[...w[114]||(w[114]=[c("option",{value:"cran"},"CRAN",-1),c("option",{value:"github"},"GitHub",-1),c("option",{value:"bioc"},"Bioconductor",-1)])],512),[[Wg,v.value.source]]),w[115]||(w[115]=c("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},[c("svg",{class:"h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),c("p",bE,[v.value.source==="cran"?(g(),b(ee,{key:0},[ne("CRAN: name only (e.g., dplyr)")],64)):v.value.source==="github"?(g(),b(ee,{key:1},[ne("GitHub: user/repo (e.g., tidyverse/dplyr)")],64)):v.value.source==="bioc"?(g(),b(ee,{key:2},[ne("Bioconductor: name only (e.g., DESeq2)")],64)):I("",!0)])]),c("div",null,[k(Ne,{modelValue:v.value.auto_attach,"onUpdate:modelValue":w[36]||(w[36]=O=>v.value.auto_attach=O),label:"Auto-attach on scaffold()"},null,8,["modelValue"])])])]),_:1},8,["modelValue"])]))}},kE={class:"rounded-lg bg-gray-50 p-6 space-y-6 dark:bg-gray-800/50"},wE={key:0,class:"space-y-2"},_E={key:0,class:"text-lg font-semibold text-gray-900 dark:text-white"},SE={key:1,class:"text-sm text-gray-600 dark:text-gray-400"},CE={class:"space-y-6"},AE={key:1,class:"flex justify-end pt-4 border-t border-gray-200 dark:border-gray-700"},pt={__name:"SettingsPanel",props:{title:{type:String,default:""},description:{type:String,default:""}},setup(t){return(e,s)=>(g(),b("section",kE,[t.title||t.description?(g(),b("header",wE,[t.title?(g(),b("h2",_E,z(t.title),1)):I("",!0),t.description?(g(),b("p",SE,z(t.description),1)):I("",!0)])):I("",!0),c("div",CE,[gt(e.$slots,"default")]),e.$slots.actions?(g(),b("div",AE,[gt(e.$slots,"actions")])):I("",!0)]))}},VE={class:"space-y-3"},ME={key:0,class:"space-y-1"},DE={key:0,class:"text-sm font-semibold text-gray-900 dark:text-white"},TE={key:1,class:"text-xs text-gray-600 dark:text-gray-400"},$E={class:"space-y-3"},rs={__name:"SettingsBlock",props:{title:{type:String,default:""},description:{type:String,default:""}},setup(t){return(e,s)=>(g(),b("div",VE,[t.title||t.description?(g(),b("div",ME,[t.title?(g(),b("h3",DE,z(t.title),1)):I("",!0),t.description?(g(),b("p",TE,z(t.description),1)):I("",!0)])):I("",!0),c("div",$E,[gt(e.$slots,"default")])]))}},EE={class:"flex min-h-screen"},OE={class:"w-64 shrink-0 border-r border-gray-200 p-6 dark:border-gray-800"},PE={class:"space-y-1"},jE=["href","onClick"],LE=["fill","viewBox","stroke"],RE=["stroke-linecap","stroke-linejoin","stroke-width","fill","d"],BE={key:1,class:"ml-4 mt-2 space-y-0.5 border-l border-gray-200 pl-3 dark:border-gray-700"},IE=["href","onClick"],NE={key:2,class:"ml-4 mt-2 space-y-0.5 border-l border-gray-200 pl-3 dark:border-gray-700"},UE=["href","onClick"],zE={class:"rounded-md bg-gray-900 p-4 text-xs text-gray-200"},FE={class:"mt-4 flex justify-end"},HE={class:"mt-6 px-3"},WE={key:0,class:"flex-1 flex items-center justify-center"},qE={class:"flex-1 p-10 pb-24"},KE={class:"mt-8 space-y-10"},GE={id:"overview"},JE={class:"space-y-3"},YE={key:0,class:"text-gray-600 dark:text-gray-400"},XE={key:1,class:"text-gray-400 dark:text-gray-500 mx-1"},ZE={key:2},QE={key:1,class:"text-gray-600 dark:text-gray-400"},eO={key:0},tO={key:1,class:"text-gray-600 dark:text-gray-400"},sO={key:0},iO={key:1,class:"text-gray-600 dark:text-gray-400"},nO={key:0,class:"text-green-600 dark:text-green-400"},rO={key:1,class:"text-gray-600 dark:text-gray-400"},oO={key:0,class:"text-green-600 dark:text-green-400"},lO={key:1,class:"text-gray-600 dark:text-gray-400"},aO={key:0},uO={key:1,class:"text-gray-600 dark:text-gray-400"},dO={id:"connections-defaults",class:"space-y-6"},cO={class:"mb-8"},fO={class:"flex items-center justify-between mb-4"},hO={class:"space-y-4"},pO={class:"flex items-center justify-between mb-3"},mO={class:"text-sm font-semibold text-gray-900 dark:text-white font-mono"},gO={class:"space-y-3"},vO={class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},yO=["onUpdate:modelValue","disabled"],bO={key:0,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 text-center"},xO={class:"flex items-center justify-between mb-4"},kO={class:"space-y-4"},wO={class:"flex items-center justify-between mb-3"},_O={class:"text-sm font-semibold text-gray-900 dark:text-white font-mono"},SO={class:"space-y-3"},CO={class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},AO=["onUpdate:modelValue"],VO={key:0,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 text-center"},MO={id:"basics"},DO={class:"space-y-5"},TO={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},$O={class:"space-y-5"},EO={id:"structure",class:"space-y-8"},OO={key:0,class:"space-y-6"},PO={class:"space-y-3"},jO=["onClick"],LO={class:"flex items-start gap-3"},RO={class:"font-semibold text-gray-900 dark:text-white"},BO={class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},IO={key:1,class:"space-y-6"},NO={key:0,class:"space-y-6"},UO={key:0},zO={class:"space-y-5"},FO=["value"],HO={class:"flex flex-wrap items-center justify-between gap-3"},WO={class:"flex flex-wrap gap-2 text-xs font-medium text-gray-600 dark:text-gray-400"},qO=["id"],KO={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},GO={class:"grid grid-cols-2 gap-3"},JO=["id"],YO={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},XO={class:"grid grid-cols-2 gap-3"},ZO=["id"],QO={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},eP={class:"grid grid-cols-2 gap-3"},tP=["id"],sP={key:1,class:"space-y-6"},iP={key:0},nP={class:"space-y-5"},rP=["value"],oP={class:"flex flex-wrap items-center justify-between gap-3"},lP={class:"flex flex-wrap gap-2 text-xs font-medium text-gray-600 dark:text-gray-400"},aP=["id"],uP={class:"space-y-3"},dP={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},cP={class:"grid grid-cols-2 gap-3"},fP=["id"],hP={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},pP={class:"grid gap-4 sm:grid-cols-2"},mP={class:"space-y-3"},gP={class:"space-y-3"},vP=["id"],yP={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},bP={class:"grid gap-4 sm:grid-cols-2"},xP={class:"space-y-3"},kP={class:"space-y-3"},wP=["id"],_P={class:"space-y-3"},SP={key:2,class:"space-y-6"},CP={key:0},AP={class:"space-y-5"},VP=["value"],MP={class:"flex flex-wrap items-center justify-between gap-3"},DP={class:"flex flex-wrap gap-2 text-xs font-medium text-gray-600 dark:text-gray-400"},TP=["id"],$P={class:"space-y-3"},EP=["id"],OP={class:"space-y-4"},PP={class:"space-y-2"},jP={class:"space-y-2"},LP={class:"space-y-2"},RP={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},BP={class:"grid grid-cols-2 gap-3"},IP={key:3,class:"space-y-6"},NP={key:0},UP={class:"space-y-5"},zP=["value"],FP={class:"flex flex-wrap items-center justify-between gap-3"},HP={class:"flex flex-wrap gap-2 text-xs font-medium text-gray-600 dark:text-gray-400"},WP=["id"],qP={class:"space-y-3"},KP=["id"],GP={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},JP={class:"grid grid-cols-2 gap-3"},YP=["id"],XP={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-2"},ZP={class:"flex justify-end mt-3"},QP={id:"templates",class:"space-y-8"},e9={id:"templates-notebook"},t9={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-2"},s9={class:"flex justify-end mt-3"},i9={id:"templates-script"},n9={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-2"},r9={class:"flex justify-end mt-3"},o9={id:"templates-presentation"},l9={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-2"},a9={class:"flex justify-end mt-3"},u9={id:"ai"},d9={class:"space-y-2"},c9={class:"flex justify-end mt-3"},f9={id:"git"},h9={id:"scaffold"},p9={id:"packages"},m9={key:0,class:"space-y-3"},g9={class:"flex flex-col gap-3"},v9={class:"grid gap-3 grid-cols-[1fr_160px]"},y9={class:"flex items-center justify-between"},b9={key:1,class:"text-xs text-gray-500 dark:text-gray-400 mb-4"},x9={class:"mt-4"},k9={class:"text-sm text-gray-600 dark:text-gray-300 mb-4"},w9={class:"flex gap-3 justify-end"},_9={class:"text-sm text-gray-600 dark:text-gray-300"},S9={class:"flex gap-3 justify-end"},ed="overview",Am="project",C9="Settings",A9="Manage defaults shared across new projects.",V9={__name:"SettingsView",setup(t){const e=Ka(),s=Wa(),i=Vr(),n=[{id:"overview",label:"Overview",slug:"overview",icon:qa},{id:"basics",label:"Basics",slug:"basics",icon:Lc},{id:"structure",label:"Project Structure",slug:"project-structure",icon:ua},{id:"packages",label:"Packages",slug:"packages-dependencies",icon:Rc},{id:"ai",label:"AI Assistants",slug:"ai-assistants",svgIcon:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"},{id:"git",label:"Git & Hooks",slug:"git-hooks",svgIcon:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"},{id:"connections-defaults",label:"Connections",slug:"connections",icon:u2},{id:"scaffold",label:"Scaffold Behavior",slug:"scaffold-behavior",svgIcon:"M256 64L576 64L576 576L64 576L64 192L256 192L256 64zM256 224L96 224L96 544L256 544L256 224zM288 544L544 544L544 96L288 96L288 544zM440 152L488 152L488 200L440 200L440 152zM392 152L392 200L344 200L344 152L392 152zM440 248L488 248L488 296L440 296L440 248zM392 248L392 296L344 296L344 248L392 248zM152 280L200 280L200 328L152 328L152 280zM392 344L392 392L344 392L344 344L392 344zM152 376L200 376L200 424L152 424L152 376zM488 344L488 392L440 392L440 344L488 344z",svgViewBox:"0 0 640 640",svgFill:"currentColor",svgStroke:"none",svgStrokeWidth:0,svgPathFill:"currentColor"},{id:"templates",label:"Templates",slug:"templates",icon:yd}],r=Object.fromEntries(n.map(({id:L,slug:x})=>[L,x])),o=Object.fromEntries(n.map(({id:L,slug:x})=>[x,L])),l={project:{label:"Standard Project Structure",description:"General-purpose analysis project with notebooks, scripts, and shared outputs.",directories:{functions:"R/functions",notebooks:"notebooks",scripts:"scripts",inputs_raw:"inputs/raw",inputs_intermediate:"inputs/intermediate",inputs_final:"inputs/final",reference:"reference",outputs_notebooks:"outputs/notebooks",outputs_tables:"outputs/tables",outputs_figures:"outputs/figures",outputs_models:"outputs/models",outputs_reports:"outputs/reports",cache:"outputs/cache",scratch:"scratch"},quarto:{render_dir:"outputs/notebooks"},notebook_template:"notebook",extra_directories:[]},project_sensitive:{label:"Privacy Sensitive Project Structure",description:"Projects handling PHI/PII with dedicated private/public data flows.",directories:{functions:"R/functions",notebooks:"notebooks",scripts:"scripts",inputs_private_raw:"inputs/private/raw",inputs_private_intermediate:"inputs/private/intermediate",inputs_private_final:"inputs/private/final",inputs_public_raw:"inputs/public/raw",inputs_public_intermediate:"inputs/public/intermediate",inputs_public_final:"inputs/public/final",outputs_private_tables:"outputs/private/tables",outputs_private_figures:"outputs/private/figures",outputs_private_models:"outputs/private/models",outputs_private_docs:"outputs/private/docs",outputs_private_data_final:"outputs/private/data_final",outputs_public_tables:"outputs/public/tables",outputs_public_figures:"outputs/public/figures",outputs_public_models:"outputs/public/models",outputs_public_docs:"outputs/public/docs",outputs_public_data_final:"outputs/public/data_final",cache:"outputs/private/cache",scratch:"scratch"},quarto:{render_dir:"outputs/public/docs"},notebook_template:"notebook",extra_directories:[]},presentation:{label:"Presentation Structure",description:"Single talk or slide deck with minimal analysis scaffolding.",directories:{presentation_source:"presentation.qmd",rendered_slides:"."},quarto:{render_dir:"."},notebook_template:"notebook",extra_directories:[]},course:{label:"Course Structure",description:"Courses with modules, assignments, and lecture materials.",directories:{data:"data",slides:"slides",assignments:"assignments",course_docs:"course_docs",readings:"readings",notebooks:"modules"},quarto:{render_dir:"course_docs"},notebook_template:"notebook",extra_directories:[]}},a=ce(JSON.parse(JSON.stringify(l))),d={project:"project",project_sensitive:"sensitive-project",presentation:"presentation",course:"course"},u=Object.fromEntries(Object.entries(d).map(([L,x])=>[x,L])),f={project:"Tune the standard analysis layoutfunctions, notebooks, inputs, and outputs live here by default.",project_sensitive:"Private and public inputs stay separate so sensitive data never leaves restricted folders.",presentation:"Control where your presentation source lives and where rendered slides are written.",course:"Adjust the folders used for slides, assignments, readings, and course documentation."},h=L=>String(L).replace(/_/g," ").replace(/\b\w/g,x=>x.toUpperCase()),m=ce(null),_=[{key:"functions",label:"Functions",hint:"R files here are sourced by scaffold(), so helper functions are available in every project session."},{key:"notebooks",label:"Notebooks",hint:"Where Quarto or R Markdown analysis notebooks live."},{key:"scripts",label:"Scripts",hint:"Reusable R scripts, job runners, or automation tasks."},{key:"reference",label:"Reference materials",hint:"Codebooks, documentation, and other background resources."}],p=[{key:"inputs_raw",label:"Raw data",hint:"Read-only exports from source systems."},{key:"inputs_intermediate",label:"Intermediate data",hint:"Data after light cleaning or pre-processing steps."},{key:"inputs_final",label:"Analysis-ready data",hint:"Final inputs ready for modeling or reporting."}],C=[{key:"outputs_notebooks",label:"Rendered notebooks",hint:"Compiled Quarto/R Markdown notebooks."},{key:"outputs_tables",label:"Tables",hint:"Publishable tables ready for reports or manuscripts."},{key:"outputs_figures",label:"Figures",hint:"Final plots and graphics."},{key:"outputs_models",label:"Models",hint:"Serialized models or model summaries."},{key:"outputs_reports",label:"Reports",hint:"Final reports and deliverables ready for publication."}],M=[{key:"cache",label:"Cache",hint:"Temporary artifacts (gitignored)."},{key:"scratch",label:"Scratch",hint:"Short-lived explorations (gitignored)."}],U=[{privateKey:"inputs_private_raw",publicKey:"inputs_public_raw",label:"Raw data",privateLabel:"Raw data (private)",publicLabel:"Raw data (public)"},{privateKey:"inputs_private_intermediate",publicKey:"inputs_public_intermediate",label:"Intermediate data",privateLabel:"Intermediate data (private)",publicLabel:"Intermediate data (public)"},{privateKey:"inputs_private_final",publicKey:"inputs_public_final",label:"Analysis-ready data",privateLabel:"Analysis-ready data (private)",publicLabel:"Analysis-ready data (public)"}],B=[{privateKey:"outputs_private_tables",publicKey:"outputs_public_tables",label:"Tables",privateLabel:"Tables (private)",publicLabel:"Tables (public)"},{privateKey:"outputs_private_figures",publicKey:"outputs_public_figures",label:"Figures",privateLabel:"Figures (private)",publicLabel:"Figures (public)"},{privateKey:"outputs_private_models",publicKey:"outputs_public_models",label:"Models",privateLabel:"Models (private)",publicLabel:"Models (public)"},{privateKey:"outputs_private_docs",publicKey:"outputs_public_docs",label:"Docs & reports",privateLabel:"Docs (private)",publicLabel:"Docs (public)"},{privateKey:"outputs_private_data_final",publicKey:"outputs_public_data_final",label:"Final data",privateLabel:"Final data (private)",publicLabel:"Final data (public)"}],F=(L,x)=>m.value?.project_types?.[L]?.directories?.[x]||{},j=(L,x)=>x.map(y=>{const q=F(L,y.key);return{key:y.key,label:q.label||y.label,hint:q.hint||y.hint||""}}),T=re(()=>j("project",_)),A=re(()=>j("project",p)),J=re(()=>j("project",C)),ie=re(()=>j("project",M)),ge=L=>L.map(x=>{const y=F("project_sensitive",x.privateKey),q=F("project_sensitive",x.publicKey);return{...x,privateLabel:y.label||x.privateLabel,publicLabel:q.label||x.publicLabel}}),le=re(()=>ge(U)),W=re(()=>ge(B)),he=re(()=>{const L=V.value;return!L||!m.value?.project_types?.[L]?.settings?[]:m.value.project_types[L].settings}),te={include_inputs:"inputs",include_scripts:"scripts",include_functions:"R/functions"},we=re(()=>{const L=m.value?.project_types?.presentation?.optional_toggles||{};return{inputs:L.include_inputs?.default_path||te.include_inputs,scripts:L.include_scripts?.default_path||te.include_scripts,functions:L.include_functions?.default_path||te.include_functions}}),G={"CLAUDE.md":"ai_claude","AGENTS.md":"ai_agents",".github/copilot-instructions.md":"ai_copilot"},X=[{id:"claude",label:"Claude Code",description:"Anthropic's IDE-focused assistant."},{id:"copilot",label:"GitHub Copilot",description:"Complements VS Code and JetBrains editors."},{id:"agents",label:"Multi-Agent (OpenAI Codex, Cursor, etc.)",description:"Shared instructions for multi-model orchestrators."}],se=ce(ed),Re=ce(!1),$=ce({projects_root:"",project_types:JSON.parse(JSON.stringify(a.value)),author:{name:"",email:"",affiliation:""},defaults:{project_type:"project",notebook_format:"quarto",ide:"vscode",ide_support_vscode:!1,use_git:!0,use_renv:!1,seed:"",seed_on_scaffold:!1,ai_support:!0,ai_assistants:["claude"],ai_canonical_file:"CLAUDE.md",directories:JSON.parse(JSON.stringify(a.value.project.directories)),git_hooks:{ai_sync:!1,data_security:!1,check_sensitive_dirs:!1},packages:{use_renv:!1,default_packages:[{name:"dplyr",source:"cran",auto_attach:!0},{name:"ggplot2",source:"cran",auto_attach:!0}]},env:{raw:""}},git:{user_name:"",user_email:""},privacy:{secret_scan:!1,gitignore_template:"gitignore"}}),Pe=qs({includeInputs:!1,includeScripts:!1,includeFunctions:!1}),Le=ce(!1),Z=qs({claude:!0,agents:!1,copilot:!1}),S=qs({open:!1,name:"",title:"",description:"",contents:"",loading:!1}),v=ce(!1),H=ce({framework:{driver:"sqlite",database:'env("FRAMEWORK_DB_PATH", "framework.db")'}}),N=re(()=>{const L={};for(const[x,y]of Object.entries(H.value))(y.driver==="sqlite"||y.driver==="postgres"||y.driver==="postgresql")&&(L[x]=y);return L}),Q=re(()=>{const L={};for(const[x,y]of Object.entries(H.value))y.driver==="s3"&&(L[x]=y);return L}),xe=qs({open:!1,projectTypeKey:null,projectTypeName:""}),ve=qs({notebook:{loading:!1,contents:""},script:{loading:!1,contents:""},presentation:{loading:!1,contents:""},canonical:{loading:!1,contents:""},gitignore_project:{loading:!1,contents:""},gitignore_project_sensitive:{loading:!1,contents:""},gitignore_course:{loading:!1,contents:""},gitignore_presentation:{loading:!1,contents:""}}),qe=re(()=>Object.entries($.value.project_types||{})),D=re(()=>qe.value.map(([L,x])=>({key:L,label:(x.label||h(L)).replace(/ Structure$/i,""),slug:d[L]||L}))),P=[{id:"templates-notebook",label:"Notebook"},{id:"templates-script",label:"Script"},{id:"templates-presentation",label:"Presentation"}],K=re(()=>"# Connections section temporarily disabled for debugging"),V=re(()=>{const L=i.params.subsection;return L?u[L]||Am:null}),ae=re(()=>{const L=V.value;return L&&$.value.project_types?.[L]||null}),oe={overview:{title:"Overview",description:"Overview of your Framework global settings and preferences."},"connections-defaults":{title:"Connections",description:"Database and storage connections that every new project will inherit."},basics:{title:"Basics",description:"Essential settings for new projects."},author:{title:"Author Information",description:"Defaults that populate README files and notebook headers when scaffold() runs."},workflow:{title:"Editor & Workflow",description:"Control how Framework scaffolds projects in your preferred tools."},structure:{title:"Project Structure Defaults",description:"Choose a project type to configure its directory structure and default settings."},templates:{title:"Templates",description:"Edit the starter templates Framework uses for notebooks, scripts, and presentations."},ai:{title:"AI Assistants",description:"Manage assistant support, canonical context files, and sync hooks."},git:{title:"Git & Hooks",description:"Configure repository initialization, commit identity, git hooks, and security scanning."},scaffold:{title:"Scaffold Behavior",description:"Automatic actions Framework performs when scaffold() runs."},packages:{title:"Packages & Dependencies",description:"Define dependency defaults and auto-attach behavior for new projects."},"env-defaults":{title:".env Defaults",description:"Template applied to every new project so core connections work immediately."}},_e=re(()=>oe[se.value]||{title:C9,description:A9}),Se=re(()=>se.value==="structure"&&ae.value?ae.value.label||h(V.value):_e.value.title),ye=re(()=>se.value==="structure"&&ae.value&&(ae.value.description||f[V.value])||_e.value.description);re(()=>$.value.privacy.gitignore_template||"gitignore"),re(()=>{const L=new Set,x=$.value.project_types||{},y=x.project_sensitive?.directories||{};for(const de of Object.values(y))typeof de=="string"&&de.trim()&&de.includes("private")&&L.add(de.replace(/^\/+/,""));const q=x.project?.directories||{};return["cache","scratch"].forEach(de=>{const fe=q[de];typeof fe=="string"&&fe.trim()&&L.add(fe.replace(/^\/+/,""))}),Array.from(L).sort()});const pe=re(()=>G[$.value.defaults.ai_canonical_file]||"ai_claude"),je=(L,x)=>{const y={section:L||void 0};return x&&(y.subsection=x),s.resolve({name:"settings",params:y}).href},Ve=(L,x)=>{const y={};L&&(y.section=L),x&&(y.subsection=x);const q=i.params.section||void 0,de=i.params.subsection||void 0,fe=y.section||void 0,Je=y.subsection||void 0;return q===fe&&de===Je?Promise.resolve():s.replace({name:"settings",params:y}).catch(()=>{})};He(()=>i.params.section,L=>{if(!L){Ve(r[ed],void 0);return}const x=o[L]||ed;if(se.value=x,!o[L]){Ve(r[x],void 0);return}},{immediate:!0});const be=(L,x="")=>Array.isArray(L)?L.length>0?be(L[0],x):x:L??x,Be=(L,x=!1)=>{const y=be(L,x);return typeof y=="boolean"?y:typeof y=="string"?["true","1","yes"].includes(y.toLowerCase()):!!y},Ke=L=>Array.isArray(L)?L.flatMap(x=>Array.isArray(x)?x:[x]).filter(Boolean):[],Xe=(L={},x={})=>{const y={...x};for(const[q,de]of Object.entries(L||{})){const fe=be(de,null);fe===null||fe===""?delete y[q]:y[q]=fe}return y},Qe=(L,x)=>{const y=a.value[L]||{directories:{},quarto:{},extra_directories:[]};return{label:be(x?.label,y.label||h(L)),description:be(x?.description,y.description||""),ggplot_theme:be(x?.ggplot_theme,"theme_minimal"),set_theme_on_scaffold:Be(x?.set_theme_on_scaffold,!0),directories:Xe(x?.directories,y.directories),quarto:{render_dir:be(x?.quarto?.render_dir,y.quarto?.render_dir||".")},notebook_template:be(x?.notebook_template,y.notebook_template||"notebook"),extra_directories:Array.isArray(x?.extra_directories)?x.extra_directories:y.extra_directories||[]}},Ot=L=>{if(!L||!L.project_types)return;const x={};for(const[y,q]of Object.entries(L.project_types)){const de=l[y]||{},fe={};for(const[Je,At]of Object.entries(q.directories||{})){const Wn=de.directories?.[Je]||"";fe[Je]=be(At?.default,Wn)}x[y]={label:be(q.label,de.label||h(y)),description:be(q.description,de.description||""),directories:fe,quarto:{render_dir:be(q.quarto?.render_dir?.default,de.quarto?.render_dir||".")},notebook_template:be(q.notebook_template?.default,de.notebook_template||"notebook"),optional_toggles:q.optional_toggles||{}}}for(const[y,q]of Object.entries(l))x[y]||(x[y]=JSON.parse(JSON.stringify(q)));a.value=x},Ct=(L,x,y)=>{if(!$.value.project_types?.presentation)return;const q=$.value.project_types.presentation.directories||($.value.project_types.presentation.directories={});x?(!q[L]||q[L]==="")&&(q[L]=y):Object.prototype.hasOwnProperty.call(q,L)&&delete q[L]},vt=async(L,x=L)=>{if(ve[x]){ve[x].loading=!0;try{const y=await fetch(`/api/templates/${L}`);if(!y.ok)throw new Error("Request failed");const q=await y.json();ve[x].contents=q.contents||""}catch{e.error("Template Error","Unable to load template contents.")}finally{ve[x].loading=!1}}},Pt=async(L,x=L)=>{if(ve[x])try{if(!(await fetch(`/api/templates/${L}`,{method:"DELETE"})).ok)throw new Error("Request failed");await vt(L,x),e.success("Template Reset","Restored the packaged default template.")}catch{e.error("Reset Failed","Unable to restore the default template.")}},As=()=>{Pt(pe.value,"canonical")};He(Z,L=>{if(Le.value){console.log("[watch:aiAssistants] Skipped - loading");return}console.log("[watch:aiAssistants] Triggered",L);const x=[];L.claude&&x.push("claude"),L.copilot&&x.push("copilot"),L.agents&&x.push("agents"),$.value.defaults.ai_assistants=x},{deep:!0}),He(()=>$.value.defaults.ai_canonical_file,async()=>{Le.value||await vt(pe.value,"canonical")}),He(()=>$.value.defaults.git_hooks.data_security,L=>{Le.value||$.value.privacy.secret_scan!==L&&($.value.privacy.secret_scan=L)}),He(()=>$.value.privacy.secret_scan,L=>{Le.value||$.value.defaults.git_hooks.data_security!==L&&($.value.defaults.git_hooks.data_security=L)}),He(()=>Pe.includeInputs,L=>{Le.value||Ct("inputs",L,we.value.inputs)}),He(()=>Pe.includeScripts,L=>{Le.value||Ct("scripts",L,we.value.scripts)}),He(()=>Pe.includeFunctions,L=>{Le.value||Ct("functions",L,we.value.functions)});const Ii=L=>{(L.metaKey||L.ctrlKey)&&L.key==="s"&&(L.preventDefault(),rl())},nt=(L,x)=>{const y=$.value.project_types?.[L]?.directories;return!!y&&Object.prototype.hasOwnProperty.call(y,x)},Bt=L=>{a.value[L]&&(xe.projectTypeKey=L,xe.projectTypeName=$.value.project_types[L]?.label||h(L),xe.open=!0)},zn=()=>{const L=xe.projectTypeKey;a.value[L]&&($.value.project_types[L]=JSON.parse(JSON.stringify(a.value[L])),L==="presentation"&&(Pe.includeInputs=!1,Pe.includeScripts=!1,Pe.includeFunctions=!1),xe.open=!1,e.success("Reset Complete",`${xe.projectTypeName} has been reset to defaults`))},hn=async()=>{try{S.loading=!0,await fetch(`/api/templates/${S.name}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:S.contents})}),e.success("Template Saved","Your changes have been saved."),S.open=!1}catch{e.error("Save Failed","Could not save template changes.")}finally{S.loading=!1}},Yo=()=>{$.value.defaults.packages.default_packages||($.value.defaults.packages.default_packages=[]),$.value.defaults.packages.default_packages.push({name:"",source:"cran",auto_attach:!1})},Er=L=>{$.value.defaults.packages.default_packages.splice(L,1)},Mt=L=>{const x=document.getElementById(L);x&&x.scrollIntoView({behavior:"smooth",block:"start"})},Xo=L=>{switch(L){case"project":return`project-${L}-inputs`;case"project_sensitive":return`project-${L}-workspaces`;case"presentation":return`project-${L}-primary`;case"course":return`project-${L}-core`;default:return`project-${L}`}},Zo=async L=>{const x=n.find(q=>q.id===L);if(!x)return;const y=(x.id==="structure",void 0);await Ve(x.slug,y),await Dn(),Mt(x.id)},Qo=async L=>{const x=d[L]||d[Am];await Ve("project-structure",x),await Dn(),Mt(Xo(L))};He(()=>V.value,(L,x)=>{se.value==="structure"&&(!L||L===x||Dn(()=>Mt(Xo(L))))});const ou=async()=>{try{console.log("[loadSettings] Starting load, setting isLoadingSettings = true"),Le.value=!0;const[L,x]=await Promise.all([fetch("/api/settings/catalog"),fetch("/api/settings/get")]);if(!L.ok)throw new Error("Failed to load settings catalog");if(!x.ok)throw new Error("Failed to load settings payload");console.log("[loadSettings] Responses received, parsing JSON");const y=await L.json();m.value=y,Ot(y);const q=await x.json();if(console.log("[loadSettings] Settings data:",q),$.value.projects_root=be(q.global?.projects_root||q.projects_root,""),q.project_types){const de={},fe={...a.value,...q.project_types};for(const[Je,At]of Object.entries(fe))de[Je]=Qe(Je,At);$.value.project_types=de}if(Pe.includeInputs=nt("presentation","inputs"),Pe.includeScripts=nt("presentation","scripts"),Pe.includeFunctions=nt("presentation","functions"),q.author&&($.value.author={name:be(q.author.name,""),email:be(q.author.email,""),affiliation:be(q.author.affiliation,"")}),q.defaults){const de=q.defaults;$.value.defaults.project_type=be(de.project_type,"project"),$.value.defaults.notebook_format=be(de.notebook_format,"quarto"),$.value.defaults.ide=be(de.ide,"vscode"),$.value.defaults.use_git=Be(de.use_git,!0),$.value.defaults.use_renv=Be(de.use_renv,!1),$.value.defaults.seed_on_scaffold=Be(de.seed_on_scaffold,!1),$.value.defaults.seed=be(de.seed,""),$.value.defaults.ai_support=Be(de.ai_support,!0),$.value.defaults.ai_canonical_file=be(de.ai_canonical_file,"CLAUDE.md");const fe=Ke(de.ai_assistants);fe.length&&($.value.defaults.ai_assistants=fe,Z.claude=fe.includes("claude"),Z.copilot=fe.includes("copilot"),Z.agents=fe.includes("agents")),de.git_hooks&&($.value.defaults.git_hooks={...$.value.defaults.git_hooks,...Object.fromEntries(Object.entries(de.git_hooks).map(([Je,At])=>[Je,Be(At,$.value.defaults.git_hooks[Je])]))},$.value.privacy.secret_scan=$.value.defaults.git_hooks.data_security),de.packages&&(de.packages.default_packages?$.value.defaults.packages={use_renv:Be(de.packages.use_renv,!1),default_packages:(de.packages.default_packages||[]).map(Je=>({name:be(Je.name,""),source:be(Je.source,"cran"),auto_attach:Be(Je.auto_attach,!1)}))}:Array.isArray(de.packages)&&($.value.defaults.packages={use_renv:!1,default_packages:de.packages.map(Je=>({name:be(Je.name,""),source:be(Je.source,"cran"),auto_attach:Be(Je.auto_attach,!1)}))})),de.directories?$.value.defaults.directories={...$.value.defaults.directories,...Object.fromEntries(Object.entries(de.directories).map(([Je,At])=>[Je,be(At,$.value.defaults.directories[Je]||"")]))}:$.value.project_types.project&&($.value.defaults.directories={...$.value.defaults.directories,...$.value.project_types.project.directories}),tl(de.env),Or(de.connections)}q.defaults||(tl(null),Or(null)),q.git&&($.value.git={user_name:be(q.git.user_name,""),user_email:be(q.git.user_email,"")}),q.privacy?($.value.privacy.secret_scan=Be(q.privacy.secret_scan,$.value.defaults.git_hooks.data_security),$.value.privacy.gitignore_template=be(q.privacy.gitignore_template,"gitignore")):$.value.privacy.secret_scan=$.value.defaults.git_hooks.data_security,await vt(pe.value,"canonical"),console.log("[loadSettings] Load complete, about to set isLoadingSettings = false")}catch(L){console.error("[loadSettings] Error during load:",L),e.error("Load Failed","Unable to load current settings.")}finally{Le.value=!1,console.log("[loadSettings] isLoadingSettings now false")}},el=re({get(){const L=$.value.defaults||{},x=L.git_hooks||{},y=$.value.git||{};return{initialize:L.use_git!==!1,user_name:y.user_name||"",user_email:y.user_email||"",hooks:{ai_sync:x.ai_sync||!1,data_security:x.data_security||!1,check_sensitive_dirs:x.check_sensitive_dirs||!1}}},set(L){if(Le.value){console.log("[gitPanelModel setter] Blocked during load");return}$.value.defaults.use_git=L.initialize,$.value.git=$.value.git||{},$.value.git.user_name=L.user_name,$.value.git.user_email=L.user_email,$.value.defaults.git_hooks=$.value.defaults.git_hooks||{},$.value.defaults.git_hooks.ai_sync=L.hooks.ai_sync,$.value.defaults.git_hooks.data_security=L.hooks.data_security,$.value.defaults.git_hooks.check_sensitive_dirs=L.hooks.check_sensitive_dirs}}),Fn=re({get(){const L=$.value.defaults?.scaffold||{};return{source_all_functions:L.source_all_functions!==!1,set_theme_on_scaffold:L.set_theme_on_scaffold!==!1,ggplot_theme:L.ggplot_theme||"theme_minimal",seed_on_scaffold:L.seed_on_scaffold||!1,seed:L.seed||""}},set(L){if(Le.value){console.log("[scaffoldPanelModel setter] Blocked during load");return}$.value.defaults.scaffold={...$.value.defaults.scaffold||{},source_all_functions:L.source_all_functions,set_theme_on_scaffold:L.set_theme_on_scaffold,ggplot_theme:L.ggplot_theme,seed_on_scaffold:L.seed_on_scaffold,seed:L.seed}}}),Vs=(L,x)=>{const y=$.value.project_types[L];return!y||!Array.isArray(y.extra_directories)?[]:y.extra_directories.filter(q=>q.type===x)},Ms=(L,x,y)=>{const q=$.value.project_types[L];if(!q)return;Array.isArray(q.extra_directories)||(q.extra_directories=[]);const de=q.extra_directories.filter(Je=>Je&&Je.type!==x),fe=y.map(Je=>({...Je,type:x}));q.extra_directories=[...de,...fe]},Ds=(L,x,y,q)=>{if(!L)return null;if(!/^[a-zA-Z0-9_]+$/.test(L))return"Only letters, numbers, and underscores allowed";const de=$.value.project_types[x];if(!de||!Array.isArray(de.extra_directories))return null;if(de.extra_directories.filter(ii=>ii.type===y).findIndex((ii,ol)=>ol!==q&&ii.key===L)!==-1)return"Duplicate key within this section";const Wn=de.extra_directories.filter(ii=>ii.type!==y).find(ii=>ii.key===L);return Wn?`Key already used in ${Wn.type} directories`:null},Ts=L=>!L||L.trim()===""?null:L.startsWith("/")?"Must be relative (no leading slash)":L.includes("..")?"Path traversal not allowed (..)":null,lu=(L={})=>Object.entries(L).map(([x,y])=>`${x}=${y??""}`).join(`
`),Hn=L=>JSON.parse(JSON.stringify(L||{})),tl=L=>{typeof L=="string"||(L?.raw?L.raw:L?.variables&&lu(L.variables))},Or=L=>{const x=L&&L.connections||{framework:{driver:"sqlite",database:'env("FRAMEWORK_DB_PATH", "framework.db")'}};H.value=Hn(x),sl()},sl=()=>{const L=H.value.framework;L?(L.driver="sqlite",L.database=L.database||'env("FRAMEWORK_DB_PATH", "framework.db")'):H.value.framework={driver:"sqlite",database:'env("FRAMEWORK_DB_PATH", "framework.db")'}},au={database:{driver:"postgres",host:'env("POSTGRES_HOST")',port:'env("POSTGRES_PORT", "5432")',database:'env("POSTGRES_DB")',schema:'env("POSTGRES_SCHEMA", "public")',user:'env("POSTGRES_USER")',password:'env("POSTGRES_PASSWORD")'},s3:{driver:"s3",bucket:'env("S3_BUCKET")',prefix:'env("S3_PREFIX", "")',region:'env("S3_REGION", "")',endpoint:'env("S3_ENDPOINT", "")',access_key:'env("S3_ACCESS_KEY")',secret_key:'env("S3_SECRET_KEY")',session_token:'env("S3_SESSION_TOKEN", "")'}},uu=L=>{let x=1,y=L;for(;H.value[y];)x+=1,y=`${L}_${x}`;return y},il=L=>{const x=au[L];if(!x)return;const q=uu(L==="s3"?"s3_bucket":"database");H.value[q]=Hn(x)},nl=L=>{L!=="framework"&&(delete H.value[L],sl())},rl=async()=>{try{Re.value=!0;const L=$.value.projects_root?.trim()||"",x=JSON.parse(JSON.stringify($.value));x.global||(x.global={}),x.global.projects_root=L||null,delete x.projects_root,x.defaults.seed=x.defaults.seed===""?null:x.defaults.seed,x.defaults.packages&&x.defaults.packages.default_packages&&(x.defaults.packages.default_packages=(x.defaults.packages.default_packages||[]).filter(fe=>fe.name&&fe.name.trim()!=="")),x.defaults.connections={options:{default_connection:"framework"},connections:Hn(H.value)},x.defaults.directories=x.project_types?.project?.directories||x.defaults.directories,x.defaults.git_hooks.data_security=x.privacy.secret_scan,x.git=x.git||{user_name:"",user_email:""};for(const fe in x.project_types){const Je=x.project_types[fe];Je.extra_directories&&Array.isArray(Je.extra_directories)&&(Je.extra_directories=Je.extra_directories.filter(At=>At.key&&At.key.trim()!==""&&At.label&&At.label.trim()!==""&&At.path&&At.path.trim()!==""&&At.type&&At.type.trim()!==""))}const y=await fetch("/api/settings/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)});if(!y.ok){const fe=await y.text();throw new Error("Failed to save settings")}const q=await y.json();if((await Promise.all([fetch("/api/templates/notebook",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:ve.notebook.contents})}),fetch("/api/templates/script",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:ve.script.contents})}),fetch("/api/templates/presentation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:ve.presentation.contents})}),fetch("/api/templates/gitignore-project",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:ve.gitignore_project.contents})}),fetch("/api/templates/gitignore-project_sensitive",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:ve.gitignore_project_sensitive.contents})}),fetch("/api/templates/gitignore-course",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:ve.gitignore_course.contents})}),fetch("/api/templates/gitignore-presentation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:ve.gitignore_presentation.contents})})])).some(fe=>!fe.ok))throw new Error("Template save failed");e.success("Settings Saved","Your global defaults were updated.")}catch(L){console.error("Failed to save settings:",L),e.error("Save Failed",L?.message||"Review your changes and try again.")}finally{Re.value=!1}};return ss(()=>{ou(),vt("notebook"),vt("script"),vt("presentation"),vt("gitignore-project","gitignore_project"),vt("gitignore-project_sensitive","gitignore_project_sensitive"),vt("gitignore-course","gitignore_course"),vt("gitignore-presentation","gitignore_presentation"),vt(pe.value,"canonical"),window.addEventListener("keydown",Ii)}),Ar(()=>{window.removeEventListener("keydown",Ii)}),(L,x)=>(g(),b("div",EE,[c("nav",OE,[x[82]||(x[82]=c("h2",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"New Project Defaults",-1)),c("div",PE,[(g(),b(ee,null,ke(n,y=>c("div",{key:y.id},[y.id==="basics"?(g(),me(Ta,{key:0},{default:R(()=>[...x[79]||(x[79]=[ne("Settings",-1)])]),_:1})):I("",!0),c("a",{href:je(y.slug),onClick:Ut(q=>Zo(y.id),["prevent"]),class:Te(["flex items-center gap-2 px-3 py-2 rounded-md text-sm transition",se.value===y.id?"bg-sky-50 text-sky-700 font-medium dark:bg-sky-900/20 dark:text-sky-400":"text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-800"])},[y.icon?(g(),me(Cs(y.icon),{key:0,class:"h-4 w-4"})):y.svgIcon?(g(),b("svg",{key:1,class:"h-4 w-4",fill:y.svgFill??"none",viewBox:y.svgViewBox??"0 0 24 24",stroke:y.svgStroke??"currentColor"},[c("path",{"stroke-linecap":y.svgStrokeLinecap??"round","stroke-linejoin":y.svgStrokeLinejoin??"round","stroke-width":y.svgStrokeWidth??2,fill:y.svgPathFill??"none",d:y.svgIcon},null,8,RE)],8,LE)):I("",!0),ne(" "+z(y.label),1)],10,jE),y.id==="structure"&&se.value==="structure"?(g(),b("div",BE,[(g(!0),b(ee,null,ke(D.value,q=>(g(),b("a",{key:q.key,href:je("project-structure",q.slug),onClick:Ut(de=>Qo(q.key),["prevent"]),class:Te(["block rounded-md py-1 pl-4 pr-2 text-xs font-medium transition",V.value===q.key?"bg-sky-100 text-sky-700 dark:bg-sky-900/30 dark:text-sky-300":"text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-800"])},z(q.label),11,IE))),128))])):y.id==="templates"&&se.value==="templates"?(g(),b("div",NE,[(g(),b(ee,null,ke(P,q=>c("a",{key:q.id,href:`#${q.id}`,onClick:Ut(de=>Mt(q.id),["prevent"]),class:"block rounded-md py-1 pl-4 pr-2 text-xs font-medium text-gray-600 transition hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-800"},z(q.label),9,UE)),64))])):I("",!0)])),64)),k(Tn,{modelValue:v.value,"onUpdate:modelValue":x[1]||(x[1]=y=>v.value=y),title:".env Variables Preview"},{default:R(()=>[x[81]||(x[81]=c("p",{class:"mb-3 text-sm text-gray-600 dark:text-gray-400"},[ne(" Copy these entries into your projects "),c("code",null,".env"),ne(" file so the connections above resolve properly. ")],-1)),c("pre",zE,z(K.value),1),c("div",FE,[k(Ie,{variant:"primary",onClick:x[0]||(x[0]=y=>v.value=!1)},{default:R(()=>[...x[80]||(x[80]=[ne("Close",-1)])]),_:1})])]),_:1},8,["modelValue"])]),c("div",HE,[k(Ie,{variant:"primary",size:"md",disabled:Re.value,onClick:rl,class:"w-full"},{default:R(()=>[ne(z(Re.value?"Saving":"Save Changes"),1)]),_:1},8,["disabled"])])]),Le.value?(g(),b("div",WE,[...x[83]||(x[83]=[c("div",{class:"text-center"},[c("div",{class:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-sky-600 border-r-transparent"}),c("p",{class:"mt-4 text-sm text-gray-600 dark:text-gray-400"},"Loading settings...")],-1)])])):I("",!0),Ye(c("div",qE,[k(Mr,{title:Se.value,description:ye.value},null,8,["title","description"]),c("div",KE,[Ye(c("div",GE,[c("div",JE,[k(js,{title:"Basics",onClick:x[2]||(x[2]=y=>se.value="basics")},{default:R(()=>[$.value.projects_root||$.value.author&&$.value.author.name?(g(),b(ee,{key:0},[$.value.projects_root?(g(),b("span",YE,z($.value.projects_root),1)):I("",!0),$.value.projects_root&&$.value.author&&$.value.author.name?(g(),b("span",XE,"")):I("",!0),$.value.author&&$.value.author.name?(g(),b("span",ZE,z($.value.author.name),1)):I("",!0)],64)):(g(),b("span",QE,"Not set"))]),_:1}),k(js,{title:"Project Structure",onClick:x[3]||(x[3]=y=>se.value="structure")},{default:R(()=>[$.value.defaults&&$.value.defaults.project_type?(g(),b("span",eO,z($.value.defaults.project_type),1)):(g(),b("span",tO,"Not set"))]),_:1}),k(js,{title:"Notebooks & Scripts",onClick:x[4]||(x[4]=y=>se.value="notebooksScripts")},{default:R(()=>[$.value.defaults&&$.value.defaults.notebook_format?(g(),b("span",sO,z($.value.defaults.notebook_format),1)):(g(),b("span",iO,"quarto"))]),_:1}),k(js,{title:"AI Assistants",onClick:x[5]||(x[5]=y=>se.value="ai")},{default:R(()=>[$.value.ai_config&&$.value.ai_config.enabled?(g(),b("span",nO,"Enabled")):(g(),b("span",rO,"Disabled"))]),_:1}),k(js,{title:"Git & Hooks",onClick:x[6]||(x[6]=y=>se.value="git")},{default:R(()=>[$.value.git&&$.value.git.auto_init?(g(),b("span",oO,"Auto-initialize repositories")):(g(),b("span",lO,"Manual initialization"))]),_:1}),k(js,{title:"Packages",onClick:x[7]||(x[7]=y=>se.value="packages")},{default:R(()=>[$.value.packages&&$.value.packages.length>0?(g(),b("span",aO,z($.value.packages.length)+" package"+z($.value.packages.length!==1?"s":""),1)):(g(),b("span",uO,"No default packages"))]),_:1})])],512),[[at,se.value==="overview"]]),Ye(c("div",dO,[k(pt,null,{default:R(()=>[k(rs,null,{default:R(()=>[c("div",cO,[c("div",fO,[x[85]||(x[85]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"Databases",-1)),k(Ie,{variant:"secondary",size:"sm",onClick:x[8]||(x[8]=y=>il("database"))},{default:R(()=>[...x[84]||(x[84]=[ne(" Add Database ",-1)])]),_:1})]),c("div",hO,[(g(!0),b(ee,null,ke(N.value,(y,q)=>(g(),b("div",{key:q,class:"rounded-lg bg-gray-50 p-4 dark:bg-gray-800/50"},[c("div",pO,[c("h4",mO,z(q),1),q!=="framework"?(g(),me(Ie,{key:0,variant:"secondary",size:"sm",onClick:de=>nl(q)},{default:R(()=>[...x[86]||(x[86]=[ne(" Remove ",-1)])]),_:1},8,["onClick"])):I("",!0)]),c("div",gO,[(g(!0),b(ee,null,ke(y,(de,fe)=>(g(),b("div",{key:fe},[c("label",vO,z(fe),1),Ye(c("input",{"onUpdate:modelValue":Je=>H.value[q][fe]=Je,type:"text",disabled:q==="framework"&&(fe==="driver"||fe==="database"),class:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 px-3 py-2 text-sm text-gray-900 dark:text-gray-100 font-mono focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500 disabled:opacity-50 disabled:cursor-not-allowed"},null,8,yO),[[rn,H.value[q][fe]]])]))),128))])]))),128)),Object.keys(N.value).length===0?(g(),b("div",bO,[...x[87]||(x[87]=[c("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"No database connections defined",-1)])])):I("",!0)])]),c("div",null,[c("div",xO,[x[89]||(x[89]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"S3-compatible Buckets",-1)),k(Ie,{variant:"secondary",size:"sm",onClick:x[9]||(x[9]=y=>il("s3"))},{default:R(()=>[...x[88]||(x[88]=[ne(" Add Bucket ",-1)])]),_:1})]),c("div",kO,[(g(!0),b(ee,null,ke(Q.value,(y,q)=>(g(),b("div",{key:q,class:"rounded-lg bg-gray-50 p-4 dark:bg-gray-800/50"},[c("div",wO,[c("h4",_O,z(q),1),k(Ie,{variant:"secondary",size:"sm",onClick:de=>nl(q)},{default:R(()=>[...x[90]||(x[90]=[ne(" Remove ",-1)])]),_:1},8,["onClick"])]),c("div",SO,[(g(!0),b(ee,null,ke(y,(de,fe)=>(g(),b("div",{key:fe},[c("label",CO,z(fe),1),Ye(c("input",{"onUpdate:modelValue":Je=>H.value[q][fe]=Je,type:"text",class:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 px-3 py-2 text-sm text-gray-900 dark:text-gray-100 font-mono focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500"},null,8,AO),[[rn,H.value[q][fe]]])]))),128))])]))),128)),Object.keys(Q.value).length===0?(g(),b("div",VO,[...x[91]||(x[91]=[c("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"No S3 buckets defined",-1)])])):I("",!0)])])]),_:1})]),_:1})],512),[[at,se.value==="connections-defaults"]]),Ye(c("div",MO,[k(pt,{description:"Essential project defaults that apply to all new projects."},{default:R(()=>[k(rs,null,{default:R(()=>[c("div",DO,[k(Y,{modelValue:$.value.projects_root,"onUpdate:modelValue":x[10]||(x[10]=y=>$.value.projects_root=y),label:"Default Projects Directory",hint:"New projects will be created in this directory by default",placeholder:"e.g., ~/projects or /Users/yourname/code"},null,8,["modelValue"]),c("div",null,[x[93]||(x[93]=c("label",{class:"block text-sm font-semibold text-gray-900 dark:text-white mb-3"}," Supported Editors ",-1)),k(pi,{modelValue:$.value.defaults.positron,"onUpdate:modelValue":x[11]||(x[11]=y=>$.value.defaults.positron=y),id:"support-positron-defaults",description:"Enable Positron-specific workspace and settings files"},{default:R(()=>[...x[92]||(x[92]=[ne(" Positron ",-1)])]),_:1},8,["modelValue"]),x[94]||(x[94]=c("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-3"}," RStudio supported by default ",-1))]),k(Jt,{modelValue:$.value.defaults.notebook_format,"onUpdate:modelValue":x[12]||(x[12]=y=>$.value.defaults.notebook_format=y),label:"Default Notebook Format",hint:"Format used when creating new notebooks"},{default:R(()=>[...x[95]||(x[95]=[c("option",{value:"quarto"},"Quarto (.qmd)",-1),c("option",{value:"rmarkdown"},"R Markdown (.Rmd)",-1)])]),_:1},8,["modelValue"]),c("div",TO,[x[96]||(x[96]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"}," Author Information ",-1)),x[97]||(x[97]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-5"}," Used as defaults when scaffold() creates README files and notebook headers, so every project starts with the right attribution. ",-1)),c("div",$O,[k(Y,{modelValue:$.value.author.name,"onUpdate:modelValue":x[13]||(x[13]=y=>$.value.author.name=y),label:"Your Name",placeholder:"Your Name"},null,8,["modelValue"]),k(Y,{modelValue:$.value.author.email,"onUpdate:modelValue":x[14]||(x[14]=y=>$.value.author.email=y),type:"email",label:"Email",placeholder:"your.email@example.com"},null,8,["modelValue"]),k(Y,{modelValue:$.value.author.affiliation,"onUpdate:modelValue":x[15]||(x[15]=y=>$.value.author.affiliation=y),label:"Affiliation",placeholder:"Organization"},null,8,["modelValue"])])])])]),_:1})]),_:1})],512),[[at,se.value==="basics"]]),Ye(c("div",EO,[V.value?ae.value?(g(),b("div",IO,[V.value==="project"?(g(),b("div",NO,[he.value&&he.value.length>0?(g(),b("div",UO,[k(pt,{title:"Project Settings",description:"Default settings applied when creating new projects of this type."},{default:R(()=>[k(rs,null,{default:R(()=>[c("div",zO,[(g(!0),b(ee,null,ke(he.value,y=>(g(),b(ee,{key:y.id},[y.control==="toggle"?(g(),me(Ne,{key:0,modelValue:$.value.project_types[V.value][y.id],"onUpdate:modelValue":q=>$.value.project_types[V.value][y.id]=q,label:y.label,description:y.description},null,8,["modelValue","onUpdate:modelValue","label","description"])):y.control==="select"?(g(),me(Jt,{key:1,modelValue:$.value.project_types[V.value][y.id],"onUpdate:modelValue":q=>$.value.project_types[V.value][y.id]=q,label:y.label,hint:y.hint},{default:R(()=>[(g(!0),b(ee,null,ke(y.options,q=>(g(),b("option",{key:q.value,value:q.value},z(q.label),9,FO))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","label","hint"])):y.control==="text"?(g(),me(Y,{key:2,modelValue:$.value.project_types[V.value][y.id],"onUpdate:modelValue":q=>$.value.project_types[V.value][y.id]=q,label:y.label,hint:y.hint,placeholder:y.placeholder},null,8,["modelValue","onUpdate:modelValue","label","hint","placeholder"])):I("",!0)],64))),128))])]),_:1})]),_:1})])):I("",!0),c("div",HO,[c("div",WO,[c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:x[16]||(x[16]=y=>Mt(`project-${V.value}-inputs`))}," Inputs "),c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:x[17]||(x[17]=y=>Mt(`project-${V.value}-workspaces`))}," Workspaces "),c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:x[18]||(x[18]=y=>Mt(`project-${V.value}-outputs`))}," Outputs "),c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:x[19]||(x[19]=y=>Mt(`project-${V.value}-utility`))}," Utility "),c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:x[20]||(x[20]=y=>Mt(`project-${V.value}-gitignore`))}," .gitignore ")]),k(Ie,{variant:"secondary",size:"sm",class:"mt-3 sm:mt-0",onClick:x[21]||(x[21]=y=>Bt(V.value))},{default:R(()=>[...x[98]||(x[98]=[ne(" Reset to Defaults ",-1)])]),_:1})]),c("div",{id:`project-${V.value}-inputs`},[k(pt,{title:"Inputs",description:"Define the read-only locations where raw and prepared data live."},{default:R(()=>[(g(!0),b(ee,null,ke(A.value,y=>(g(),b(ee,{key:y.key},[nt(V.value,y.key)?(g(),me(Y,{key:0,modelValue:$.value.project_types[V.value].directories[y.key],"onUpdate:modelValue":q=>$.value.project_types[V.value].directories[y.key]=q,label:y.label,hint:y.hint,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label","hint"])):I("",!0)],64))),128)),c("div",KO,[x[99]||(x[99]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Input Directories",-1)),k(xt,{"model-value":Vs(V.value,"input"),"onUpdate:modelValue":x[22]||(x[22]=y=>Ms(V.value,"input",y)),"add-label":"Add Input Directory","default-item":()=>({key:"",label:"",path:"",type:"input",_id:Date.now()})},{default:R(({item:y,index:q,update:de})=>[c("div",GO,[k(Y,{"model-value":y.key,"onUpdate:modelValue":fe=>de("key",fe),label:"Key",placeholder:"e.g., inputs_archive",error:Ds(y.key,V.value,"input",q),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),k(Y,{"model-value":y.label,"onUpdate:modelValue":fe=>de("label",fe),label:"Label",placeholder:"e.g., Archive",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(Y,{"model-value":y.path,"onUpdate:modelValue":fe=>de("path",fe),label:"Path",placeholder:"e.g., inputs/archive",error:Ts(y.path),prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])])]),_:1})],8,qO),c("div",{id:`project-${V.value}-workspaces`},[k(pt,{title:"Workspaces",description:"Functions, notebooks, and scripts scaffolded into every project."},{default:R(()=>[(g(!0),b(ee,null,ke(T.value,y=>(g(),b(ee,{key:y.key},[nt(V.value,y.key)?(g(),me(Y,{key:0,modelValue:$.value.project_types[V.value].directories[y.key],"onUpdate:modelValue":q=>$.value.project_types[V.value].directories[y.key]=q,label:y.label,hint:y.hint,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label","hint"])):I("",!0)],64))),128)),c("div",YO,[x[100]||(x[100]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Workspace Directories",-1)),k(xt,{"model-value":Vs(V.value,"workspace"),"onUpdate:modelValue":x[23]||(x[23]=y=>Ms(V.value,"workspace",y)),"add-label":"Add Workspace Directory","default-item":()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:R(({item:y,index:q,update:de})=>[c("div",XO,[k(Y,{"model-value":y.key,"onUpdate:modelValue":fe=>de("key",fe),label:"Key",placeholder:"e.g., tests",error:Ds(y.key,V.value,"workspace",q),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),k(Y,{"model-value":y.label,"onUpdate:modelValue":fe=>de("label",fe),label:"Label",placeholder:"e.g., Tests",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(Y,{"model-value":y.path,"onUpdate:modelValue":fe=>de("path",fe),label:"Path",placeholder:"e.g., tests",error:Ts(y.path),prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])])]),_:1})],8,JO),c("div",{id:`project-${V.value}-outputs`},[k(pt,{title:"Outputs",description:"Outputs are public by default so results are easy to share."},{default:R(()=>[(g(!0),b(ee,null,ke(J.value,y=>(g(),b(ee,{key:y.key},[nt(V.value,y.key)?(g(),me(Y,{key:0,modelValue:$.value.project_types[V.value].directories[y.key],"onUpdate:modelValue":q=>$.value.project_types[V.value].directories[y.key]=q,label:y.label,hint:y.hint,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label","hint"])):I("",!0)],64))),128)),k(Y,{modelValue:$.value.project_types[V.value].quarto.render_dir,"onUpdate:modelValue":x[24]||(x[24]=y=>$.value.project_types[V.value].quarto.render_dir=y),label:"Notebook output directory",hint:"Rendered notebooks and reports are written here by default.",prefix:"/",monospace:""},null,8,["modelValue"]),c("div",QO,[x[101]||(x[101]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Output Directories",-1)),k(xt,{"model-value":Vs(V.value,"output"),"onUpdate:modelValue":x[25]||(x[25]=y=>Ms(V.value,"output",y)),"add-label":"Add Output Directory","default-item":()=>({key:"",label:"",path:"",type:"output",_id:Date.now()})},{default:R(({item:y,index:q,update:de})=>[c("div",eP,[k(Y,{"model-value":y.key,"onUpdate:modelValue":fe=>de("key",fe),label:"Key",placeholder:"e.g., outputs_animations",error:Ds(y.key,V.value,"output",q),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),k(Y,{"model-value":y.label,"onUpdate:modelValue":fe=>de("label",fe),label:"Label",placeholder:"e.g., Animations",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(Y,{"model-value":y.path,"onUpdate:modelValue":fe=>de("path",fe),label:"Path",placeholder:"e.g., outputs/animations",error:Ts(y.path),prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])])]),_:1})],8,ZO),c("div",{id:`project-${V.value}-utility`},[k(pt,{title:"Utility directories",description:"Cache and scratch folders are gitignored so temporary artifacts never leak into version control."},{default:R(()=>[(g(!0),b(ee,null,ke(ie.value,y=>(g(),b(ee,{key:y.key},[nt(V.value,y.key)?(g(),me(Y,{key:0,modelValue:$.value.project_types[V.value].directories[y.key],"onUpdate:modelValue":q=>$.value.project_types[V.value].directories[y.key]=q,label:y.label,hint:y.hint,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label","hint"])):I("",!0)],64))),128))]),_:1})],8,tP)])):V.value==="project_sensitive"?(g(),b("div",sP,[he.value&&he.value.length>0?(g(),b("div",iP,[k(pt,{title:"Project Settings",description:"Default settings applied when creating new projects of this type."},{default:R(()=>[k(rs,null,{default:R(()=>[c("div",nP,[(g(!0),b(ee,null,ke(he.value,y=>(g(),b(ee,{key:y.id},[y.control==="toggle"?(g(),me(Ne,{key:0,modelValue:$.value.project_types[V.value][y.id],"onUpdate:modelValue":q=>$.value.project_types[V.value][y.id]=q,label:y.label,description:y.description},null,8,["modelValue","onUpdate:modelValue","label","description"])):y.control==="select"?(g(),me(Jt,{key:1,modelValue:$.value.project_types[V.value][y.id],"onUpdate:modelValue":q=>$.value.project_types[V.value][y.id]=q,label:y.label,hint:y.hint},{default:R(()=>[(g(!0),b(ee,null,ke(y.options,q=>(g(),b("option",{key:q.value,value:q.value},z(q.label),9,rP))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","label","hint"])):y.control==="text"?(g(),me(Y,{key:2,modelValue:$.value.project_types[V.value][y.id],"onUpdate:modelValue":q=>$.value.project_types[V.value][y.id]=q,label:y.label,hint:y.hint,placeholder:y.placeholder},null,8,["modelValue","onUpdate:modelValue","label","hint","placeholder"])):I("",!0)],64))),128))])]),_:1})]),_:1})])):I("",!0),c("div",oP,[c("div",lP,[c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:x[26]||(x[26]=y=>Mt(`project-${V.value}-workspaces`))}," Workspaces "),c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:x[27]||(x[27]=y=>Mt(`project-${V.value}-inputs-private`))}," Inputs "),c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:x[28]||(x[28]=y=>Mt(`project-${V.value}-outputs-private`))}," Outputs "),c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:x[29]||(x[29]=y=>Mt(`project-${V.value}-utility`))}," Utility ")]),k(Ie,{variant:"secondary",size:"sm",class:"mt-3 sm:mt-0",onClick:x[30]||(x[30]=y=>Bt(V.value))},{default:R(()=>[...x[102]||(x[102]=[ne(" Reset to Defaults ",-1)])]),_:1})]),c("div",{id:`project-${V.value}-workspaces`},[k(pt,{title:"Workspaces",description:"Module locations for notebooks, scripts, and helper functions."},{default:R(()=>[c("div",uP,[(g(!0),b(ee,null,ke(T.value,y=>(g(),b(ee,{key:`sensitive-${y.key}`},[nt(V.value,y.key)?(g(),me(Y,{key:0,modelValue:$.value.project_types[V.value].directories[y.key],"onUpdate:modelValue":q=>$.value.project_types[V.value].directories[y.key]=q,label:y.label,hint:y.hint,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label","hint"])):I("",!0)],64))),128))]),c("div",dP,[x[103]||(x[103]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Workspace Directories",-1)),k(xt,{"model-value":Vs(V.value,"workspace"),"onUpdate:modelValue":x[31]||(x[31]=y=>Ms(V.value,"workspace",y)),"add-label":"Add Workspace Directory","default-item":()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:R(({item:y,index:q,update:de})=>[c("div",cP,[k(Y,{"model-value":y.key,"onUpdate:modelValue":fe=>de("key",fe),label:"Key",placeholder:"e.g., tests",error:Ds(y.key,V.value,"workspace",q),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),k(Y,{"model-value":y.label,"onUpdate:modelValue":fe=>de("label",fe),label:"Label",placeholder:"e.g., Tests",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(Y,{"model-value":y.path,"onUpdate:modelValue":fe=>de("path",fe),label:"Path",placeholder:"e.g., tests",error:Ts(y.path),prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])])]),_:1})],8,aP),c("div",{id:`project-${V.value}-inputs-private`},[k(pt,{title:"Inputs",description:"Keep private inputs compartmentalized; publish processed outputs into public folders when ready."},{default:R(()=>[x[106]||(x[106]=c("div",{class:"grid gap-4 sm:grid-cols-2 text-xs font-semibold uppercase text-gray-500 dark:text-gray-400"},[c("div",null,"Private"),c("div",null,"Public")],-1)),(g(!0),b(ee,null,ke(le.value,y=>(g(),b("div",{key:y.privateKey,class:"grid gap-4 sm:grid-cols-2"},[nt(V.value,y.privateKey)?(g(),me(Y,{key:0,modelValue:$.value.project_types[V.value].directories[y.privateKey],"onUpdate:modelValue":q=>$.value.project_types[V.value].directories[y.privateKey]=q,label:y.privateLabel||`${y.label} (private)`,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label"])):I("",!0),nt(V.value,y.publicKey)?(g(),me(Y,{key:1,modelValue:$.value.project_types[V.value].directories[y.publicKey],"onUpdate:modelValue":q=>$.value.project_types[V.value].directories[y.publicKey]=q,label:y.publicLabel||`${y.label} (public)`,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label"])):I("",!0)]))),128)),c("div",hP,[c("div",pP,[c("div",null,[x[104]||(x[104]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Private Inputs",-1)),k(xt,{"model-value":Vs(V.value,"input_private"),"onUpdate:modelValue":x[32]||(x[32]=y=>Ms(V.value,"input_private",y)),"add-label":"Add Private Input","default-item":()=>({key:"",label:"",path:"",type:"input_private",_id:Date.now()})},{default:R(({item:y,index:q,update:de})=>[c("div",mP,[k(Y,{"model-value":y.key,"onUpdate:modelValue":fe=>de("key",fe),label:"Key",placeholder:"e.g., inputs_archive",error:Ds(y.key,V.value,"input_private",q),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),k(Y,{"model-value":y.label,"onUpdate:modelValue":fe=>de("label",fe),label:"Label",placeholder:"e.g., Archive",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(Y,{"model-value":y.path,"onUpdate:modelValue":fe=>de("path",fe),label:"Path",placeholder:"e.g., inputs/archive",error:Ts(y.path),prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])]),c("div",null,[x[105]||(x[105]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Public Inputs",-1)),k(xt,{"model-value":Vs(V.value,"input_public"),"onUpdate:modelValue":x[33]||(x[33]=y=>Ms(V.value,"input_public",y)),"add-label":"Add Public Input","default-item":()=>({key:"",label:"",path:"",type:"input_public",_id:Date.now()})},{default:R(({item:y,index:q,update:de})=>[c("div",gP,[k(Y,{"model-value":y.key,"onUpdate:modelValue":fe=>de("key",fe),label:"Key",placeholder:"e.g., inputs_public_archive",error:Ds(y.key,V.value,"input_public",q),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),k(Y,{"model-value":y.label,"onUpdate:modelValue":fe=>de("label",fe),label:"Label",placeholder:"e.g., Archive (Public)",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(Y,{"model-value":y.path,"onUpdate:modelValue":fe=>de("path",fe),label:"Path",placeholder:"e.g., inputs_public/archive",error:Ts(y.path),prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])])])])]),_:1})],8,fP),c("div",{id:`project-${V.value}-outputs-private`},[k(pt,{title:"Outputs",description:"Review outputs before promotion; private folders remain gitignored while public copies are ready to share."},{default:R(()=>[x[109]||(x[109]=c("div",{class:"grid gap-4 sm:grid-cols-2 text-xs font-semibold uppercase text-gray-500 dark:text-gray-400"},[c("div",null,"Private"),c("div",null,"Public")],-1)),(g(!0),b(ee,null,ke(W.value,y=>(g(),b("div",{key:y.privateKey,class:"grid gap-4 sm:grid-cols-2"},[nt(V.value,y.privateKey)?(g(),me(Y,{key:0,modelValue:$.value.project_types[V.value].directories[y.privateKey],"onUpdate:modelValue":q=>$.value.project_types[V.value].directories[y.privateKey]=q,label:y.privateLabel||`${y.label} (private)`,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label"])):I("",!0),nt(V.value,y.publicKey)?(g(),me(Y,{key:1,modelValue:$.value.project_types[V.value].directories[y.publicKey],"onUpdate:modelValue":q=>$.value.project_types[V.value].directories[y.publicKey]=q,label:y.publicLabel||`${y.label} (public)`,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label"])):I("",!0)]))),128)),k(Y,{modelValue:$.value.project_types[V.value].quarto.render_dir,"onUpdate:modelValue":x[34]||(x[34]=y=>$.value.project_types[V.value].quarto.render_dir=y),label:"Notebook output directory",hint:"Rendered docs default to a public location but can be moved if needed.",prefix:"/",monospace:""},null,8,["modelValue"]),c("div",yP,[c("div",bP,[c("div",null,[x[107]||(x[107]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Private Outputs",-1)),k(xt,{"model-value":Vs(V.value,"output_private"),"onUpdate:modelValue":x[35]||(x[35]=y=>Ms(V.value,"output_private",y)),"add-label":"Add Private Output","default-item":()=>({key:"",label:"",path:"",type:"output_private",_id:Date.now()})},{default:R(({item:y,index:q,update:de})=>[c("div",xP,[k(Y,{"model-value":y.key,"onUpdate:modelValue":fe=>de("key",fe),label:"Key",placeholder:"e.g., outputs_animations",error:Ds(y.key,V.value,"output_private",q),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),k(Y,{"model-value":y.label,"onUpdate:modelValue":fe=>de("label",fe),label:"Label",placeholder:"e.g., Animations",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(Y,{"model-value":y.path,"onUpdate:modelValue":fe=>de("path",fe),label:"Path",placeholder:"e.g., outputs/animations",error:Ts(y.path),prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])]),c("div",null,[x[108]||(x[108]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Public Outputs",-1)),k(xt,{"model-value":Vs(V.value,"output_public"),"onUpdate:modelValue":x[36]||(x[36]=y=>Ms(V.value,"output_public",y)),"add-label":"Add Public Output","default-item":()=>({key:"",label:"",path:"",type:"output_public",_id:Date.now()})},{default:R(({item:y,index:q,update:de})=>[c("div",kP,[k(Y,{"model-value":y.key,"onUpdate:modelValue":fe=>de("key",fe),label:"Key",placeholder:"e.g., outputs_public_animations",error:Ds(y.key,V.value,"output_public",q),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),k(Y,{"model-value":y.label,"onUpdate:modelValue":fe=>de("label",fe),label:"Label",placeholder:"e.g., Animations (Public)",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(Y,{"model-value":y.path,"onUpdate:modelValue":fe=>de("path",fe),label:"Path",placeholder:"e.g., outputs_public/animations",error:Ts(y.path),prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])])])])]),_:1})],8,vP),c("div",{id:`project-${V.value}-utility`},[k(pt,{title:"Utility directories",description:"Keep cache and scratch in private space for safety; both remain gitignored."},{default:R(()=>[c("div",_P,[(g(!0),b(ee,null,ke(ie.value,y=>(g(),b(ee,{key:`sensitive-${y.key}`},[nt(V.value,y.key)?(g(),me(Y,{key:0,modelValue:$.value.project_types[V.value].directories[y.key],"onUpdate:modelValue":q=>$.value.project_types[V.value].directories[y.key]=q,label:y.label,hint:y.hint,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label","hint"])):I("",!0)],64))),128))])]),_:1})],8,wP)])):V.value==="presentation"?(g(),b("div",SP,[he.value&&he.value.length>0?(g(),b("div",CP,[k(pt,{title:"Project Settings",description:"Default settings applied when creating new projects of this type."},{default:R(()=>[k(rs,null,{default:R(()=>[c("div",AP,[(g(!0),b(ee,null,ke(he.value,y=>(g(),b(ee,{key:y.id},[y.control==="toggle"?(g(),me(Ne,{key:0,modelValue:$.value.project_types[V.value][y.id],"onUpdate:modelValue":q=>$.value.project_types[V.value][y.id]=q,label:y.label,description:y.description},null,8,["modelValue","onUpdate:modelValue","label","description"])):y.control==="select"?(g(),me(Jt,{key:1,modelValue:$.value.project_types[V.value][y.id],"onUpdate:modelValue":q=>$.value.project_types[V.value][y.id]=q,label:y.label,hint:y.hint},{default:R(()=>[(g(!0),b(ee,null,ke(y.options,q=>(g(),b("option",{key:q.value,value:q.value},z(q.label),9,VP))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","label","hint"])):y.control==="text"?(g(),me(Y,{key:2,modelValue:$.value.project_types[V.value][y.id],"onUpdate:modelValue":q=>$.value.project_types[V.value][y.id]=q,label:y.label,hint:y.hint,placeholder:y.placeholder},null,8,["modelValue","onUpdate:modelValue","label","hint","placeholder"])):I("",!0)],64))),128))])]),_:1})]),_:1})])):I("",!0),c("div",MP,[c("div",DP,[c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:x[37]||(x[37]=y=>Mt(`project-${V.value}-primary`))}," Primary files "),c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:x[38]||(x[38]=y=>Mt(`project-${V.value}-optional`))}," Optional folders ")]),k(Ie,{variant:"secondary",size:"sm",class:"mt-3 sm:mt-0",onClick:x[39]||(x[39]=y=>Bt(V.value))},{default:R(()=>[...x[110]||(x[110]=[ne(" Reset to Defaults ",-1)])]),_:1})]),c("div",{id:`project-${V.value}-primary`},[k(pt,{title:"Primary files"},{default:R(()=>[c("div",$P,[k(Y,{modelValue:$.value.project_types[V.value].directories.presentation_source,"onUpdate:modelValue":x[40]||(x[40]=y=>$.value.project_types[V.value].directories.presentation_source=y),label:"Presentation source file",hint:"Relative path to your primary presentation.qmd.",monospace:""},null,8,["modelValue"]),k(Y,{modelValue:$.value.project_types[V.value].directories.rendered_slides,"onUpdate:modelValue":x[41]||(x[41]=y=>$.value.project_types[V.value].directories.rendered_slides=y),label:"Rendered slides directory",hint:"Rendered slides write to the project root by default ('.').",monospace:""},null,8,["modelValue"])])]),_:1})],8,TP),c("div",{id:`project-${V.value}-optional`},[k(pt,{title:"Optional folders",description:"Toggle extra scaffolding when you need supporting data, scripts, or helper utilities."},{default:R(()=>[c("div",OP,[c("div",PP,[k(Ne,{modelValue:Pe.includeInputs,"onUpdate:modelValue":x[42]||(x[42]=y=>Pe.includeInputs=y),label:"Include inputs directory",description:"Adds an inputs/ folder for sample data used in the presentation."},null,8,["modelValue"]),Pe.includeInputs?(g(),me(Y,{key:0,modelValue:$.value.project_types[V.value].directories.inputs,"onUpdate:modelValue":x[43]||(x[43]=y=>$.value.project_types[V.value].directories.inputs=y),label:"Inputs directory",prefix:"/",monospace:""},null,8,["modelValue"])):I("",!0)]),c("div",jP,[k(Ne,{modelValue:Pe.includeScripts,"onUpdate:modelValue":x[44]||(x[44]=y=>Pe.includeScripts=y),label:"Include scripts directory",description:"Adds a scripts/ folder for demo code or automation."},null,8,["modelValue"]),Pe.includeScripts?(g(),me(Y,{key:0,modelValue:$.value.project_types[V.value].directories.scripts,"onUpdate:modelValue":x[45]||(x[45]=y=>$.value.project_types[V.value].directories.scripts=y),label:"Scripts directory",prefix:"/",monospace:""},null,8,["modelValue"])):I("",!0)]),c("div",LP,[k(Ne,{modelValue:Pe.includeFunctions,"onUpdate:modelValue":x[46]||(x[46]=y=>Pe.includeFunctions=y),label:"Include functions directory",description:"Adds R/functions for helper utilities that should load automatically."},null,8,["modelValue"]),Pe.includeFunctions?(g(),me(Y,{key:0,modelValue:$.value.project_types[V.value].directories.functions,"onUpdate:modelValue":x[47]||(x[47]=y=>$.value.project_types[V.value].directories.functions=y),label:"Functions directory",prefix:"/",monospace:""},null,8,["modelValue"])):I("",!0)]),c("div",RP,[x[111]||(x[111]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Custom Directories",-1)),x[112]||(x[112]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Add any additional directories you need for your presentations.",-1)),k(xt,{"model-value":$.value.project_types[V.value].extra_directories||[],"onUpdate:modelValue":x[48]||(x[48]=y=>$.value.project_types[V.value].extra_directories=y),"add-label":"Add Directory","default-item":()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:R(({item:y,index:q,update:de})=>[c("div",BP,[k(Y,{"model-value":y.key,"onUpdate:modelValue":fe=>de("key",fe),label:"Key",placeholder:"e.g., assets",error:Ds(y.key,V.value,"workspace",q),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),k(Y,{"model-value":y.label,"onUpdate:modelValue":fe=>de("label",fe),label:"Label",placeholder:"e.g., Assets",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(Y,{"model-value":y.path,"onUpdate:modelValue":fe=>de("path",fe),label:"Path",placeholder:"e.g., assets",error:Ts(y.path),prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])])])]),_:1})],8,EP)])):V.value==="course"?(g(),b("div",IP,[he.value&&he.value.length>0?(g(),b("div",NP,[k(pt,{title:"Project Settings",description:"Default settings applied when creating new projects of this type."},{default:R(()=>[k(rs,null,{default:R(()=>[c("div",UP,[(g(!0),b(ee,null,ke(he.value,y=>(g(),b(ee,{key:y.id},[y.control==="toggle"?(g(),me(Ne,{key:0,modelValue:$.value.project_types[V.value][y.id],"onUpdate:modelValue":q=>$.value.project_types[V.value][y.id]=q,label:y.label,description:y.description},null,8,["modelValue","onUpdate:modelValue","label","description"])):y.control==="select"?(g(),me(Jt,{key:1,modelValue:$.value.project_types[V.value][y.id],"onUpdate:modelValue":q=>$.value.project_types[V.value][y.id]=q,label:y.label,hint:y.hint},{default:R(()=>[(g(!0),b(ee,null,ke(y.options,q=>(g(),b("option",{key:q.value,value:q.value},z(q.label),9,zP))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","label","hint"])):y.control==="text"?(g(),me(Y,{key:2,modelValue:$.value.project_types[V.value][y.id],"onUpdate:modelValue":q=>$.value.project_types[V.value][y.id]=q,label:y.label,hint:y.hint,placeholder:y.placeholder},null,8,["modelValue","onUpdate:modelValue","label","hint","placeholder"])):I("",!0)],64))),128))])]),_:1})]),_:1})])):I("",!0),c("div",FP,[c("div",HP,[c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:x[49]||(x[49]=y=>Mt(`project-${V.value}-core`))}," Core folders "),c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:x[50]||(x[50]=y=>Mt(`project-${V.value}-quarto`))}," Quarto render directory ")]),k(Ie,{variant:"secondary",size:"sm",class:"mt-3 sm:mt-0",onClick:x[51]||(x[51]=y=>Bt(V.value))},{default:R(()=>[...x[113]||(x[113]=[ne(" Reset to Defaults ",-1)])]),_:1})]),c("div",{id:`project-${V.value}-core`},[k(pt,{title:"Core folders",description:"Configure folders for course datasets, slide decks, assignments, and readings."},{default:R(()=>[c("div",qP,[k(Y,{modelValue:$.value.project_types[V.value].directories.data,"onUpdate:modelValue":x[52]||(x[52]=y=>$.value.project_types[V.value].directories.data=y),label:"Course data",prefix:"/",monospace:"",hint:"Shared datasets distributed with the course."},null,8,["modelValue"]),k(Y,{modelValue:$.value.project_types[V.value].directories.slides,"onUpdate:modelValue":x[53]||(x[53]=y=>$.value.project_types[V.value].directories.slides=y),label:"Slides",prefix:"/",monospace:"",hint:"Lecture slide sources."},null,8,["modelValue"]),k(Y,{modelValue:$.value.project_types[V.value].directories.assignments,"onUpdate:modelValue":x[54]||(x[54]=y=>$.value.project_types[V.value].directories.assignments=y),label:"Assignments",prefix:"/",monospace:"",hint:"Homework or lab materials."},null,8,["modelValue"]),k(Y,{modelValue:$.value.project_types[V.value].directories.course_docs,"onUpdate:modelValue":x[55]||(x[55]=y=>$.value.project_types[V.value].directories.course_docs=y),label:"Course documents",prefix:"/",monospace:"",hint:"Syllabus, policies, grading guides."},null,8,["modelValue"]),k(Y,{modelValue:$.value.project_types[V.value].directories.readings,"onUpdate:modelValue":x[56]||(x[56]=y=>$.value.project_types[V.value].directories.readings=y),label:"Readings",prefix:"/",monospace:"",hint:"Assigned readings and references."},null,8,["modelValue"]),k(Y,{modelValue:$.value.project_types[V.value].directories.notebooks,"onUpdate:modelValue":x[57]||(x[57]=y=>$.value.project_types[V.value].directories.notebooks=y),label:"Module notebooks",prefix:"/",monospace:"",hint:"Module notebooks or workshop materials."},null,8,["modelValue"])])]),_:1})],8,WP),c("div",{id:`project-${V.value}-quarto`},[k(pt,{title:"Quarto render directory",description:"Default location for rendered course documentation."},{default:R(()=>[k(Y,{modelValue:$.value.project_types[V.value].quarto.render_dir,"onUpdate:modelValue":x[58]||(x[58]=y=>$.value.project_types[V.value].quarto.render_dir=y),label:"Render directory",prefix:"/",monospace:""},null,8,["modelValue"])]),_:1}),c("div",GP,[x[114]||(x[114]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Custom Directories",-1)),x[115]||(x[115]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Add any additional directories you need for your courses.",-1)),k(xt,{"model-value":$.value.project_types[V.value].extra_directories||[],"onUpdate:modelValue":x[59]||(x[59]=y=>$.value.project_types[V.value].extra_directories=y),"add-label":"Add Directory","default-item":()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:R(({item:y,index:q,update:de})=>[c("div",JP,[k(Y,{"model-value":y.key,"onUpdate:modelValue":fe=>de("key",fe),label:"Key",placeholder:"e.g., resources",error:Ds(y.key,V.value,"workspace",q),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),k(Y,{"model-value":y.label,"onUpdate:modelValue":fe=>de("label",fe),label:"Label",placeholder:"e.g., Resources",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(Y,{"model-value":y.path,"onUpdate:modelValue":fe=>de("path",fe),label:"Path",placeholder:"e.g., resources",error:Ts(y.path),prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])])],8,KP)])):I("",!0),c("div",{id:`project-${V.value}-gitignore`},[k(pt,{title:".gitignore Template",description:"Patterns applied to all new projects of this type."},{default:R(()=>[k(Gi,{modelValue:ve[`gitignore_${V.value}`].contents,"onUpdate:modelValue":x[60]||(x[60]=y=>ve[`gitignore_${V.value}`].contents=y),language:"text","min-height":"400px",disabled:ve[`gitignore_${V.value}`].loading},null,8,["modelValue","disabled"]),ve[`gitignore_${V.value}`].loading?(g(),b("p",XP,"Loading .gitignore template")):I("",!0),c("div",ZP,[k(Ie,{size:"sm",variant:"secondary",onClick:x[61]||(x[61]=y=>Pt(`gitignore-${V.value}`,`gitignore_${V.value}`))},{default:R(()=>[...x[116]||(x[116]=[ne("Restore Default",-1)])]),_:1})])]),_:1})],8,YP)])):I("",!0):(g(),b("div",OO,[c("div",PO,[(g(!0),b(ee,null,ke(D.value,y=>(g(),b("button",{key:y.key,onClick:q=>Qo(y.key),class:"group relative w-full rounded-lg border border-gray-200 p-6 text-left transition hover:border-sky-300 dark:border-gray-700 dark:hover:border-sky-600"},[c("div",LO,[k(lt(ua),{class:"h-6 w-6 flex-shrink-0 text-gray-400 transition group-hover:text-sky-600 dark:group-hover:text-sky-400"}),c("div",null,[c("h3",RO,z(y.label),1),c("p",BO,z($.value.project_types[y.key]?.description||""),1)])])],8,jO))),128))])]))],512),[[at,se.value==="structure"]]),Ye(c("div",QP,[c("div",e9,[k(pt,null,{default:R(()=>[k(rs,{title:"Notebook Template",description:"Used by framework::make_notebook() to populate new notebooks."},{default:R(()=>[k(Gi,{modelValue:ve.notebook.contents,"onUpdate:modelValue":x[62]||(x[62]=y=>ve.notebook.contents=y),language:"markdown","min-height":"500px",disabled:ve.notebook.loading},null,8,["modelValue","disabled"]),ve.notebook.loading?(g(),b("p",t9,"Loading notebook template")):I("",!0),c("div",s9,[k(Ie,{size:"sm",variant:"secondary",onClick:x[63]||(x[63]=y=>Pt("notebook"))},{default:R(()=>[...x[117]||(x[117]=[ne("Restore Default",-1)])]),_:1})])]),_:1})]),_:1})]),c("div",i9,[k(pt,null,{default:R(()=>[k(rs,{title:"Script Template",description:"Used by framework::make_script() for quick task scaffolds."},{default:R(()=>[k(Gi,{modelValue:ve.script.contents,"onUpdate:modelValue":x[64]||(x[64]=y=>ve.script.contents=y),language:"r","min-height":"450px",disabled:ve.script.loading},null,8,["modelValue","disabled"]),ve.script.loading?(g(),b("p",n9,"Loading script template")):I("",!0),c("div",r9,[k(Ie,{size:"sm",variant:"secondary",onClick:x[65]||(x[65]=y=>Pt("script"))},{default:R(()=>[...x[118]||(x[118]=[ne("Restore Default",-1)])]),_:1})])]),_:1})]),_:1})]),c("div",o9,[k(pt,null,{default:R(()=>[k(rs,{title:"Presentation Template",description:"Used by framework::make_notebook(stub = 'revealjs') for slide decks."},{default:R(()=>[k(Gi,{modelValue:ve.presentation.contents,"onUpdate:modelValue":x[66]||(x[66]=y=>ve.presentation.contents=y),language:"markdown","min-height":"500px",disabled:ve.presentation.loading},null,8,["modelValue","disabled"]),ve.presentation.loading?(g(),b("p",l9,"Loading presentation template")):I("",!0),c("div",a9,[k(Ie,{size:"sm",variant:"secondary",onClick:x[67]||(x[67]=y=>Pt("presentation"))},{default:R(()=>[...x[119]||(x[119]=[ne("Restore Default",-1)])]),_:1})])]),_:1})]),_:1})])],512),[[at,se.value==="templates"]]),Ye(c("div",u9,[k(pt,{description:"Framework maintains context files for selected assistants and keeps them in sync before commits."},{default:R(()=>[k(rs,null,{default:R(()=>[k(Ne,{modelValue:$.value.defaults.ai_support,"onUpdate:modelValue":x[68]||(x[68]=y=>$.value.defaults.ai_support=y),label:"Enable AI Support",description:"Generate and sync assistant-specific context files."},null,8,["modelValue"])]),_:1}),k(rs,{title:"Canonical context file",description:"This file is the source of truth; other instructions files are synced to it when AI hooks run."},{default:R(()=>[k(Jt,{modelValue:$.value.defaults.ai_canonical_file,"onUpdate:modelValue":x[69]||(x[69]=y=>$.value.defaults.ai_canonical_file=y),disabled:!$.value.defaults.ai_support,label:"Canonical Context File"},{default:R(()=>[...x[120]||(x[120]=[c("option",{value:"AGENTS.md"},"AGENTS.md (multi-agent orchestrator)",-1),c("option",{value:"CLAUDE.md"},"CLAUDE.md",-1),c("option",{value:".github/copilot-instructions.md"},".github/copilot-instructions.md",-1)])]),_:1},8,["modelValue","disabled"])]),_:1}),$.value.defaults.ai_support?(g(),b(ee,{key:0},[k(rs,{title:"Assistants",description:"Choose which assistants receive context updates."},{default:R(()=>[c("div",d9,[(g(),b(ee,null,ke(X,y=>k(pi,{key:y.id,id:`ai-${y.id}`,modelValue:Z[y.id],"onUpdate:modelValue":q=>Z[y.id]=q,description:y.description},{default:R(()=>[ne(z(y.label),1)]),_:2},1032,["id","modelValue","onUpdate:modelValue","description"])),64))])]),_:1}),k(rs,{title:"Canonical instructions",description:"Edit the canonical file directly. Restore defaults if you want to start over."},{default:R(()=>[k(Gi,{modelValue:ve.canonical.contents,"onUpdate:modelValue":x[70]||(x[70]=y=>ve.canonical.contents=y),language:"markdown","min-height":"500px",disabled:ve.canonical.loading||!$.value.defaults.ai_support},null,8,["modelValue","disabled"]),c("div",c9,[k(Ie,{size:"sm",variant:"secondary",disabled:ve.canonical.loading,onClick:As},{default:R(()=>[...x[121]||(x[121]=[ne("Restore Default",-1)])]),_:1},8,["disabled"])])]),_:1})],64)):I("",!0)]),_:1})],512),[[at,se.value==="ai"]]),Ye(c("div",f9,[k(pt,null,{default:R(()=>[k(_f,{modelValue:el.value,"onUpdate:modelValue":x[71]||(x[71]=y=>el.value=y),flush:""},{note:R(()=>[...x[122]||(x[122]=[ne(" Project-specific .gitignore templates can be customized in ",-1),c("a",{href:"#/settings/project-defaults",class:"text-sky-600 dark:text-sky-400 hover:underline"}," Project Defaults ",-1),ne(". ",-1)])]),_:1},8,["modelValue"])]),_:1})],512),[[at,se.value==="git"]]),Ye(c("div",h9,[k(pt,null,{default:R(()=>[x[123]||(x[123]=c("div",null,[c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Scaffold Behavior"),c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"},[ne(" Automatic actions when "),c("code",{class:"px-1.5 py-0.5 bg-gray-200 dark:bg-gray-700 rounded text-xs"},"scaffold()"),ne(" runs to initialize your project environment. ")])],-1)),k(Sf,{modelValue:Fn.value,"onUpdate:modelValue":x[72]||(x[72]=y=>Fn.value=y),flush:""},null,8,["modelValue"])]),_:1})],512),[[at,se.value==="scaffold"]]),Ye(c("div",p9,[k(pt,null,{default:R(()=>[k(rs,null,{default:R(()=>[k(Ne,{modelValue:$.value.defaults.packages.use_renv,"onUpdate:modelValue":x[73]||(x[73]=y=>$.value.defaults.packages.use_renv=y),label:"Enable renv",description:"Create renv environments for new projects."},null,8,["modelValue"])]),_:1}),k(rs,{title:"Default packages",description:"Installed (and optionally attached) when scaffold() runs."},{default:R(()=>[x[127]||(x[127]=c("p",{class:"text-xs text-gray-600 dark:text-gray-400 mb-4"},"Use this list to preseed notebooks with your preferred helpers.",-1)),$.value.defaults.packages.default_packages&&$.value.defaults.packages.default_packages.length?(g(),b("div",m9,[(g(!0),b(ee,null,ke($.value.defaults.packages.default_packages,(y,q)=>(g(),b("div",{key:`pkg-${q}`,class:"rounded-md border border-gray-200 p-4 dark:border-gray-700"},[c("div",g9,[c("div",v9,[y.source==="cran"||y.source==="bioconductor"?(g(),me(wf,{key:0,modelValue:y.name,"onUpdate:modelValue":de=>y.name=de,source:y.source,label:"Package",placeholder:y.source==="cran"?"Search CRAN...":"Search Bioconductor...",onSelect:de=>y.name=de.name},null,8,["modelValue","onUpdate:modelValue","source","placeholder","onSelect"])):(g(),me(Y,{key:1,modelValue:y.name,"onUpdate:modelValue":de=>y.name=de,label:"Package",placeholder:"user/repo"},null,8,["modelValue","onUpdate:modelValue"])),k(Jt,{modelValue:y.source,"onUpdate:modelValue":de=>y.source=de,label:"Source"},{default:R(()=>[...x[124]||(x[124]=[c("option",{value:"cran"},"CRAN",-1),c("option",{value:"github"},"GitHub",-1),c("option",{value:"bioconductor"},"Bioconductor",-1)])]),_:1},8,["modelValue","onUpdate:modelValue"])]),c("div",y9,[k(Ne,{modelValue:y.auto_attach,"onUpdate:modelValue":de=>y.auto_attach=de,label:"Auto-Attach",description:"Call library() when scaffold() runs."},null,8,["modelValue","onUpdate:modelValue"]),k(Ie,{size:"sm",variant:"secondary",onClick:de=>Er(q)},{default:R(()=>[...x[125]||(x[125]=[ne("Remove",-1)])]),_:1},8,["onClick"])])])]))),128))])):(g(),b("p",b9,"No packages configured. Add packages to include tidyverse helpers or internal utilities automatically.")),c("div",x9,[k(Ie,{size:"sm",variant:"secondary",onClick:Yo},{default:R(()=>[...x[126]||(x[126]=[ne("Add Package",-1)])]),_:1})])]),_:1})]),_:1})],512),[[at,se.value==="packages"]])])],512),[[at,!Le.value]]),k(Tn,{modelValue:S.open,"onUpdate:modelValue":x[76]||(x[76]=y=>S.open=y),size:"lg",title:S.title},{default:R(()=>[c("p",k9,z(S.description),1),k(pc,{modelValue:S.contents,"onUpdate:modelValue":x[74]||(x[74]=y=>S.contents=y),rows:18,monospace:""},null,8,["modelValue"])]),actions:R(()=>[c("div",w9,[k(Ie,{variant:"secondary",onClick:x[75]||(x[75]=y=>S.open=!1)},{default:R(()=>[...x[128]||(x[128]=[ne("Cancel",-1)])]),_:1}),k(Ie,{variant:"primary",disabled:S.loading,onClick:hn},{default:R(()=>[ne(z(S.loading?"Saving":"Save Template"),1)]),_:1},8,["disabled"])])]),_:1},8,["modelValue","title"]),k(Tn,{modelValue:xe.open,"onUpdate:modelValue":x[78]||(x[78]=y=>xe.open=y),size:"md",title:"Reset to Defaults",icon:"warning"},{default:R(()=>[c("p",_9,[x[129]||(x[129]=ne(" Are you sure you want to reset ",-1)),c("strong",null,z(xe.projectTypeName),1),x[130]||(x[130]=ne(" to default settings? This will discard all your customizations for this project type. ",-1))])]),actions:R(()=>[c("div",S9,[k(Ie,{variant:"secondary",onClick:x[77]||(x[77]=y=>xe.open=!1)},{default:R(()=>[...x[131]||(x[131]=[ne("Cancel",-1)])]),_:1}),k(Ie,{variant:"primary",onClick:zn},{default:R(()=>[...x[132]||(x[132]=[ne(" Reset to Defaults ",-1)])]),_:1})])]),_:1},8,["modelValue"])]))}},M9={class:"mx-auto max-w-5xl p-10"},D9={__name:"ProjectPackagesView",setup(t){return ce([]),ss(async()=>{}),(e,s)=>(g(),b("div",M9,[k(Mr,{title:"Packages",description:"Manage R packages for this project."}),s[0]||(s[0]=Ua('<div class="mt-10 rounded-2xl border border-zinc-200 bg-white p-8 shadow-sm dark:border-zinc-800 dark:bg-zinc-900"><div class="flex items-center gap-3 border-b border-zinc-100 pb-6 dark:border-zinc-800"><div class="flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-sky-500 to-sky-600 shadow-lg shadow-sky-500/20"><svg class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg></div><h3 class="text-xl font-bold text-zinc-900 dark:text-white">Package Configuration</h3></div><div class="mt-8"><p class="text-sm text-zinc-600 dark:text-zinc-400"> Package management interface coming soon. This page will allow you to: </p><ul class="mt-4 space-y-2 text-sm text-zinc-600 dark:text-zinc-400"><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Add and remove project packages </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Specify package versions </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Toggle renv integration </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Install and update packages </li></ul></div></div>',1))]))}},T9={class:"mx-auto max-w-5xl p-10"},$9={__name:"ProjectDataView",setup(t){return ce([]),ss(async()=>{}),(e,s)=>(g(),b("div",T9,[k(Mr,{title:"Data",description:"Manage data catalog and sources for this project."}),s[0]||(s[0]=Ua('<div class="mt-10 rounded-2xl border border-zinc-200 bg-white p-8 shadow-sm dark:border-zinc-800 dark:bg-zinc-900"><div class="flex items-center gap-3 border-b border-zinc-100 pb-6 dark:border-zinc-800"><div class="flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-sky-500 to-sky-600 shadow-lg shadow-sky-500/20"><svg class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"></path></svg></div><h3 class="text-xl font-bold text-zinc-900 dark:text-white">Data Catalog</h3></div><div class="mt-8"><p class="text-sm text-zinc-600 dark:text-zinc-400"> Data catalog management interface coming soon. This page will allow you to: </p><ul class="mt-4 space-y-2 text-sm text-zinc-600 dark:text-zinc-400"><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Define data sources in the catalog </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Specify data formats (CSV, RDS, etc.) </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Configure encryption settings </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Track data integrity via digests </li></ul></div></div>',1))]))}},E9={class:"mx-auto max-w-5xl p-10"},O9={__name:"ProjectConnectionsView",setup(t){return ce([]),ss(async()=>{}),(e,s)=>(g(),b("div",E9,[k(Mr,{title:"Connections",description:"Manage database connections for this project."}),s[0]||(s[0]=Ua('<div class="mt-10 rounded-2xl border border-zinc-200 bg-white p-8 shadow-sm dark:border-zinc-800 dark:bg-zinc-900"><div class="flex items-center gap-3 border-b border-zinc-100 pb-6 dark:border-zinc-800"><div class="flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-sky-500 to-sky-600 shadow-lg shadow-sky-500/20"><svg class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg></div><h3 class="text-xl font-bold text-zinc-900 dark:text-white">Database Connections</h3></div><div class="mt-8"><p class="text-sm text-zinc-600 dark:text-zinc-400"> Connection management interface coming soon. This page will allow you to: </p><ul class="mt-4 space-y-2 text-sm text-zinc-600 dark:text-zinc-400"><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Configure database connections (SQLite, PostgreSQL) </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Store connection credentials securely </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Test database connectivity </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Manage connection pooling settings </li></ul></div></div>',1))]))}},P9=[{path:"/",redirect:"/projects"},{path:"/docs",name:"docs",component:Ih},{path:"/docs/:functionName",name:"doc-detail",component:Ih,props:!0},{path:"/projects",name:"projects",component:_4},{path:"/projects/new",name:"project-create",component:mD},{path:"/project/:id",name:"project-detail",component:xE,props:!0},{path:"/settings/:section?/:subsection?",name:"settings",component:V9,props:!0},{path:"/project/packages",name:"project-packages",component:D9},{path:"/project/data",name:"project-data",component:$9},{path:"/project/connections",name:"project-connections",component:O9}],j9=Zk({history:Tk(),routes:P9});zx(U2).use(j9).mount("#app");
