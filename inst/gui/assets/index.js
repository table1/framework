(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function s(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(n){if(n.ep)return;n.ep=!0;const r=s(n);fetch(n.href,r)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Qd(t){const e=Object.create(null);for(const s of t.split(","))e[s]=1;return s=>s in e}const ft={},Xn=[],fi=()=>{},fm=()=>!1,ga=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Zd=t=>t.startsWith("onUpdate:"),Bt=Object.assign,ec=(t,e)=>{const s=t.indexOf(e);s>-1&&t.splice(s,1)},l1=Object.prototype.hasOwnProperty,lt=(t,e)=>l1.call(t,e),Be=Array.isArray,Qn=t=>Po(t)==="[object Map]",wr=t=>Po(t)==="[object Set]",bh=t=>Po(t)==="[object Date]",ze=t=>typeof t=="function",St=t=>typeof t=="string",Gs=t=>typeof t=="symbol",dt=t=>t!==null&&typeof t=="object",pm=t=>(dt(t)||ze(t))&&ze(t.then)&&ze(t.catch),mm=Object.prototype.toString,Po=t=>mm.call(t),a1=t=>Po(t).slice(8,-1),gm=t=>Po(t)==="[object Object]",tc=t=>St(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Hr=Qd(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),va=t=>{const e=Object.create(null);return(s=>e[s]||(e[s]=t(s)))},u1=/-\w/g,Is=va(t=>t.replace(u1,e=>e.slice(1).toUpperCase())),d1=/\B([A-Z])/g,Bn=va(t=>t.replace(d1,"-$1").toLowerCase()),ya=va(t=>t.charAt(0).toUpperCase()+t.slice(1)),Ja=va(t=>t?`on${ya(t)}`:""),Yi=(t,e)=>!Object.is(t,e),wl=(t,...e)=>{for(let s=0;s<t.length;s++)t[s](...e)},vm=(t,e,s,i=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:i,value:s})},Ll=t=>{const e=parseFloat(t);return isNaN(e)?t:e},c1=t=>{const e=St(t)?Number(t):NaN;return isNaN(e)?t:e};let xh;const ba=()=>xh||(xh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ro(t){if(Be(t)){const e={};for(let s=0;s<t.length;s++){const i=t[s],n=St(i)?m1(i):ro(i);if(n)for(const r in n)e[r]=n[r]}return e}else if(St(t)||dt(t))return t}const h1=/;(?![^(]*\))/g,f1=/:([^]+)/,p1=/\/\*[^]*?\*\//g;function m1(t){const e={};return t.replace(p1,"").split(h1).forEach(s=>{if(s){const i=s.split(f1);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function De(t){let e="";if(St(t))e=t;else if(Be(t))for(let s=0;s<t.length;s++){const i=De(t[s]);i&&(e+=i+" ")}else if(dt(t))for(const s in t)t[s]&&(e+=s+" ");return e.trim()}const g1="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",v1=Qd(g1);function ym(t){return!!t||t===""}function y1(t,e){if(t.length!==e.length)return!1;let s=!0;for(let i=0;s&&i<t.length;i++)s=$n(t[i],e[i]);return s}function $n(t,e){if(t===e)return!0;let s=bh(t),i=bh(e);if(s||i)return s&&i?t.getTime()===e.getTime():!1;if(s=Gs(t),i=Gs(e),s||i)return t===e;if(s=Be(t),i=Be(e),s||i)return s&&i?y1(t,e):!1;if(s=dt(t),i=dt(e),s||i){if(!s||!i)return!1;const n=Object.keys(t).length,r=Object.keys(e).length;if(n!==r)return!1;for(const o in t){const l=t.hasOwnProperty(o),a=e.hasOwnProperty(o);if(l&&!a||!l&&a||!$n(t[o],e[o]))return!1}}return String(t)===String(e)}function sc(t,e){return t.findIndex(s=>$n(s,e))}const bm=t=>!!(t&&t.__v_isRef===!0),U=t=>St(t)?t:t==null?"":Be(t)||dt(t)&&(t.toString===mm||!ze(t.toString))?bm(t)?U(t.value):JSON.stringify(t,xm,2):String(t),xm=(t,e)=>bm(e)?xm(t,e.value):Qn(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((s,[i,n],r)=>(s[Ya(i,r)+" =>"]=n,s),{})}:wr(e)?{[`Set(${e.size})`]:[...e.values()].map(s=>Ya(s))}:Gs(e)?Ya(e):dt(e)&&!Be(e)&&!gm(e)?String(e):e,Ya=(t,e="")=>{var s;return Gs(t)?`Symbol(${(s=t.description)!=null?s:e})`:t};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ms;class b1{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ms,!e&&ms&&(this.index=(ms.scopes||(ms.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].pause();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].resume();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].resume()}}run(e){if(this._active){const s=ms;try{return ms=this,e()}finally{ms=s}}}on(){++this._on===1&&(this.prevScope=ms,ms=this)}off(){this._on>0&&--this._on===0&&(ms=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let s,i;for(s=0,i=this.effects.length;s<i;s++)this.effects[s].stop();for(this.effects.length=0,s=0,i=this.cleanups.length;s<i;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,i=this.scopes.length;s<i;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function x1(){return ms}let pt;const Xa=new WeakSet;class km{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ms&&ms.active&&ms.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Xa.has(this)&&(Xa.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||_m(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,kh(this),Sm(this);const e=pt,s=qs;pt=this,qs=!0;try{return this.fn()}finally{Cm(this),pt=e,qs=s,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)rc(e);this.deps=this.depsTail=void 0,kh(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Xa.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Bu(this)&&this.run()}get dirty(){return Bu(this)}}let wm=0,Wr,qr;function _m(t,e=!1){if(t.flags|=8,e){t.next=qr,qr=t;return}t.next=Wr,Wr=t}function ic(){wm++}function nc(){if(--wm>0)return;if(qr){let e=qr;for(qr=void 0;e;){const s=e.next;e.next=void 0,e.flags&=-9,e=s}}let t;for(;Wr;){let e=Wr;for(Wr=void 0;e;){const s=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(i){t||(t=i)}e=s}}if(t)throw t}function Sm(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Cm(t){let e,s=t.depsTail,i=s;for(;i;){const n=i.prevDep;i.version===-1?(i===s&&(s=n),rc(i),k1(i)):e=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=n}t.deps=e,t.depsTail=s}function Bu(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Am(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Am(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===oo)||(t.globalVersion=oo,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Bu(t))))return;t.flags|=2;const e=t.dep,s=pt,i=qs;pt=t,qs=!0;try{Sm(t);const n=t.fn(t._value);(e.version===0||Yi(n,t._value))&&(t.flags|=128,t._value=n,e.version++)}catch(n){throw e.version++,n}finally{pt=s,qs=i,Cm(t),t.flags&=-3}}function rc(t,e=!1){const{dep:s,prevSub:i,nextSub:n}=t;if(i&&(i.nextSub=n,t.prevSub=void 0),n&&(n.prevSub=i,t.nextSub=void 0),s.subs===t&&(s.subs=i,!i&&s.computed)){s.computed.flags&=-5;for(let r=s.computed.deps;r;r=r.nextDep)rc(r,!0)}!e&&!--s.sc&&s.map&&s.map.delete(s.key)}function k1(t){const{prevDep:e,nextDep:s}=t;e&&(e.nextDep=s,t.prevDep=void 0),s&&(s.prevDep=e,t.nextDep=void 0)}let qs=!0;const Vm=[];function $i(){Vm.push(qs),qs=!1}function Ei(){const t=Vm.pop();qs=t===void 0?!0:t}function kh(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const s=pt;pt=void 0;try{e()}finally{pt=s}}}let oo=0;class w1{constructor(e,s){this.sub=e,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class oc{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!pt||!qs||pt===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==pt)s=this.activeLink=new w1(pt,this),pt.deps?(s.prevDep=pt.depsTail,pt.depsTail.nextDep=s,pt.depsTail=s):pt.deps=pt.depsTail=s,Mm(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const i=s.nextDep;i.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=i),s.prevDep=pt.depsTail,s.nextDep=void 0,pt.depsTail.nextDep=s,pt.depsTail=s,pt.deps===s&&(pt.deps=i)}return s}trigger(e){this.version++,oo++,this.notify(e)}notify(e){ic();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{nc()}}}function Mm(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let i=e.deps;i;i=i.nextDep)Mm(i)}const s=t.dep.subs;s!==t&&(t.prevSub=s,s&&(s.nextSub=t)),t.dep.subs=t}}const Iu=new WeakMap,Vn=Symbol(""),Nu=Symbol(""),lo=Symbol("");function Jt(t,e,s){if(qs&&pt){let i=Iu.get(t);i||Iu.set(t,i=new Map);let n=i.get(s);n||(i.set(s,n=new oc),n.map=i,n.key=s),n.track()}}function Ci(t,e,s,i,n,r){const o=Iu.get(t);if(!o){oo++;return}const l=a=>{a&&a.trigger()};if(ic(),e==="clear")o.forEach(l);else{const a=Be(t),d=a&&tc(s);if(a&&s==="length"){const u=Number(i);o.forEach((f,c)=>{(c==="length"||c===lo||!Gs(c)&&c>=u)&&l(f)})}else switch((s!==void 0||o.has(void 0))&&l(o.get(s)),d&&l(o.get(lo)),e){case"add":a?d&&l(o.get("length")):(l(o.get(Vn)),Qn(t)&&l(o.get(Nu)));break;case"delete":a||(l(o.get(Vn)),Qn(t)&&l(o.get(Nu)));break;case"set":Qn(t)&&l(o.get(Vn));break}}nc()}function zn(t){const e=nt(t);return e===t?e:(Jt(e,"iterate",lo),js(t)?e:e.map(Nt))}function xa(t){return Jt(t=nt(t),"iterate",lo),t}const _1={__proto__:null,[Symbol.iterator](){return Qa(this,Symbol.iterator,Nt)},concat(...t){return zn(this).concat(...t.map(e=>Be(e)?zn(e):e))},entries(){return Qa(this,"entries",t=>(t[1]=Nt(t[1]),t))},every(t,e){return yi(this,"every",t,e,void 0,arguments)},filter(t,e){return yi(this,"filter",t,e,s=>s.map(Nt),arguments)},find(t,e){return yi(this,"find",t,e,Nt,arguments)},findIndex(t,e){return yi(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return yi(this,"findLast",t,e,Nt,arguments)},findLastIndex(t,e){return yi(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return yi(this,"forEach",t,e,void 0,arguments)},includes(...t){return Za(this,"includes",t)},indexOf(...t){return Za(this,"indexOf",t)},join(t){return zn(this).join(t)},lastIndexOf(...t){return Za(this,"lastIndexOf",t)},map(t,e){return yi(this,"map",t,e,void 0,arguments)},pop(){return Dr(this,"pop")},push(...t){return Dr(this,"push",t)},reduce(t,...e){return wh(this,"reduce",t,e)},reduceRight(t,...e){return wh(this,"reduceRight",t,e)},shift(){return Dr(this,"shift")},some(t,e){return yi(this,"some",t,e,void 0,arguments)},splice(...t){return Dr(this,"splice",t)},toReversed(){return zn(this).toReversed()},toSorted(t){return zn(this).toSorted(t)},toSpliced(...t){return zn(this).toSpliced(...t)},unshift(...t){return Dr(this,"unshift",t)},values(){return Qa(this,"values",Nt)}};function Qa(t,e,s){const i=xa(t),n=i[e]();return i!==t&&!js(t)&&(n._next=n.next,n.next=()=>{const r=n._next();return r.done||(r.value=s(r.value)),r}),n}const S1=Array.prototype;function yi(t,e,s,i,n,r){const o=xa(t),l=o!==t&&!js(t),a=o[e];if(a!==S1[e]){const f=a.apply(t,r);return l?Nt(f):f}let d=s;o!==t&&(l?d=function(f,c){return s.call(this,Nt(f),c,t)}:s.length>2&&(d=function(f,c){return s.call(this,f,c,t)}));const u=a.call(o,d,i);return l&&n?n(u):u}function wh(t,e,s,i){const n=xa(t);let r=s;return n!==t&&(js(t)?s.length>3&&(r=function(o,l,a){return s.call(this,o,l,a,t)}):r=function(o,l,a){return s.call(this,o,Nt(l),a,t)}),n[e](r,...i)}function Za(t,e,s){const i=nt(t);Jt(i,"iterate",lo);const n=i[e](...s);return(n===-1||n===!1)&&uc(s[0])?(s[0]=nt(s[0]),i[e](...s)):n}function Dr(t,e,s=[]){$i(),ic();const i=nt(t)[e].apply(t,s);return nc(),Ei(),i}const C1=Qd("__proto__,__v_isRef,__isVue"),Dm=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Gs));function A1(t){Gs(t)||(t=String(t));const e=nt(this);return Jt(e,"has",t),e.hasOwnProperty(t)}class Tm{constructor(e=!1,s=!1){this._isReadonly=e,this._isShallow=s}get(e,s,i){if(s==="__v_skip")return e.__v_skip;const n=this._isReadonly,r=this._isShallow;if(s==="__v_isReactive")return!n;if(s==="__v_isReadonly")return n;if(s==="__v_isShallow")return r;if(s==="__v_raw")return i===(n?r?R1:Pm:r?Om:Em).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(i)?e:void 0;const o=Be(e);if(!n){let a;if(o&&(a=_1[s]))return a;if(s==="hasOwnProperty")return A1}const l=Reflect.get(e,s,Zt(e)?e:i);if((Gs(s)?Dm.has(s):C1(s))||(n||Jt(e,"get",s),r))return l;if(Zt(l)){const a=o&&tc(s)?l:l.value;return n&&dt(a)?zu(a):a}return dt(l)?n?zu(l):Hs(l):l}}class $m extends Tm{constructor(e=!1){super(!1,e)}set(e,s,i,n){let r=e[s];if(!this._isShallow){const a=Qi(r);if(!js(i)&&!Qi(i)&&(r=nt(r),i=nt(i)),!Be(e)&&Zt(r)&&!Zt(i))return a||(r.value=i),!0}const o=Be(e)&&tc(s)?Number(s)<e.length:lt(e,s),l=Reflect.set(e,s,i,Zt(e)?e:n);return e===nt(n)&&(o?Yi(i,r)&&Ci(e,"set",s,i):Ci(e,"add",s,i)),l}deleteProperty(e,s){const i=lt(e,s);e[s];const n=Reflect.deleteProperty(e,s);return n&&i&&Ci(e,"delete",s,void 0),n}has(e,s){const i=Reflect.has(e,s);return(!Gs(s)||!Dm.has(s))&&Jt(e,"has",s),i}ownKeys(e){return Jt(e,"iterate",Be(e)?"length":Vn),Reflect.ownKeys(e)}}class V1 extends Tm{constructor(e=!1){super(!0,e)}set(e,s){return!0}deleteProperty(e,s){return!0}}const M1=new $m,D1=new V1,T1=new $m(!0);const Uu=t=>t,qo=t=>Reflect.getPrototypeOf(t);function $1(t,e,s){return function(...i){const n=this.__v_raw,r=nt(n),o=Qn(r),l=t==="entries"||t===Symbol.iterator&&o,a=t==="keys"&&o,d=n[t](...i),u=s?Uu:e?Bl:Nt;return!e&&Jt(r,"iterate",a?Nu:Vn),{next(){const{value:f,done:c}=d.next();return c?{value:f,done:c}:{value:l?[u(f[0]),u(f[1])]:u(f),done:c}},[Symbol.iterator](){return this}}}}function Ko(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function E1(t,e){const s={get(n){const r=this.__v_raw,o=nt(r),l=nt(n);t||(Yi(n,l)&&Jt(o,"get",n),Jt(o,"get",l));const{has:a}=qo(o),d=e?Uu:t?Bl:Nt;if(a.call(o,n))return d(r.get(n));if(a.call(o,l))return d(r.get(l));r!==o&&r.get(n)},get size(){const n=this.__v_raw;return!t&&Jt(nt(n),"iterate",Vn),n.size},has(n){const r=this.__v_raw,o=nt(r),l=nt(n);return t||(Yi(n,l)&&Jt(o,"has",n),Jt(o,"has",l)),n===l?r.has(n):r.has(n)||r.has(l)},forEach(n,r){const o=this,l=o.__v_raw,a=nt(l),d=e?Uu:t?Bl:Nt;return!t&&Jt(a,"iterate",Vn),l.forEach((u,f)=>n.call(r,d(u),d(f),o))}};return Bt(s,t?{add:Ko("add"),set:Ko("set"),delete:Ko("delete"),clear:Ko("clear")}:{add(n){!e&&!js(n)&&!Qi(n)&&(n=nt(n));const r=nt(this);return qo(r).has.call(r,n)||(r.add(n),Ci(r,"add",n,n)),this},set(n,r){!e&&!js(r)&&!Qi(r)&&(r=nt(r));const o=nt(this),{has:l,get:a}=qo(o);let d=l.call(o,n);d||(n=nt(n),d=l.call(o,n));const u=a.call(o,n);return o.set(n,r),d?Yi(r,u)&&Ci(o,"set",n,r):Ci(o,"add",n,r),this},delete(n){const r=nt(this),{has:o,get:l}=qo(r);let a=o.call(r,n);a||(n=nt(n),a=o.call(r,n)),l&&l.call(r,n);const d=r.delete(n);return a&&Ci(r,"delete",n,void 0),d},clear(){const n=nt(this),r=n.size!==0,o=n.clear();return r&&Ci(n,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(n=>{s[n]=$1(n,t,e)}),s}function lc(t,e){const s=E1(t,e);return(i,n,r)=>n==="__v_isReactive"?!t:n==="__v_isReadonly"?t:n==="__v_raw"?i:Reflect.get(lt(s,n)&&n in i?s:i,n,r)}const O1={get:lc(!1,!1)},P1={get:lc(!1,!0)},j1={get:lc(!0,!1)};const Em=new WeakMap,Om=new WeakMap,Pm=new WeakMap,R1=new WeakMap;function L1(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function B1(t){return t.__v_skip||!Object.isExtensible(t)?0:L1(a1(t))}function Hs(t){return Qi(t)?t:ac(t,!1,M1,O1,Em)}function jm(t){return ac(t,!1,T1,P1,Om)}function zu(t){return ac(t,!0,D1,j1,Pm)}function ac(t,e,s,i,n){if(!dt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const r=B1(t);if(r===0)return t;const o=n.get(t);if(o)return o;const l=new Proxy(t,r===2?i:s);return n.set(t,l),l}function Zn(t){return Qi(t)?Zn(t.__v_raw):!!(t&&t.__v_isReactive)}function Qi(t){return!!(t&&t.__v_isReadonly)}function js(t){return!!(t&&t.__v_isShallow)}function uc(t){return t?!!t.__v_raw:!1}function nt(t){const e=t&&t.__v_raw;return e?nt(e):t}function I1(t){return!lt(t,"__v_skip")&&Object.isExtensible(t)&&vm(t,"__v_skip",!0),t}const Nt=t=>dt(t)?Hs(t):t,Bl=t=>dt(t)?zu(t):t;function Zt(t){return t?t.__v_isRef===!0:!1}function ve(t){return Rm(t,!1)}function N1(t){return Rm(t,!0)}function Rm(t,e){return Zt(t)?t:new U1(t,e)}class U1{constructor(e,s){this.dep=new oc,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?e:nt(e),this._value=s?e:Nt(e),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(e){const s=this._rawValue,i=this.__v_isShallow||js(e)||Qi(e);e=i?e:nt(e),Yi(e,s)&&(this._rawValue=e,this._value=i?e:Nt(e),this.dep.trigger())}}function at(t){return Zt(t)?t.value:t}const z1={get:(t,e,s)=>e==="__v_raw"?t:at(Reflect.get(t,e,s)),set:(t,e,s,i)=>{const n=t[e];return Zt(n)&&!Zt(s)?(n.value=s,!0):Reflect.set(t,e,s,i)}};function Lm(t){return Zn(t)?t:new Proxy(t,z1)}class F1{constructor(e,s,i){this.fn=e,this.setter=s,this._value=void 0,this.dep=new oc(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=oo-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&pt!==this)return _m(this,!0),!0}get value(){const e=this.dep.track();return Am(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function H1(t,e,s=!1){let i,n;return ze(t)?i=t:(i=t.get,n=t.set),new F1(i,n,s)}const Go={},Il=new WeakMap;let gn;function W1(t,e=!1,s=gn){if(s){let i=Il.get(s);i||Il.set(s,i=[]),i.push(t)}}function q1(t,e,s=ft){const{immediate:i,deep:n,once:r,scheduler:o,augmentJob:l,call:a}=s,d=z=>n?z:js(z)||n===!1||n===0?Ai(z,1):Ai(z);let u,f,c,p,k=!1,C=!1;if(Zt(t)?(f=()=>t.value,k=js(t)):Zn(t)?(f=()=>d(t),k=!0):Be(t)?(C=!0,k=t.some(z=>Zn(z)||js(z)),f=()=>t.map(z=>{if(Zt(z))return z.value;if(Zn(z))return d(z);if(ze(z))return a?a(z,2):z()})):ze(t)?e?f=a?()=>a(t,2):t:f=()=>{if(c){$i();try{c()}finally{Ei()}}const z=gn;gn=u;try{return a?a(t,3,[p]):t(p)}finally{gn=z}}:f=fi,e&&n){const z=f,H=n===!0?1/0:n;f=()=>Ai(z(),H)}const A=x1(),V=()=>{u.stop(),A&&A.active&&ec(A.effects,u)};if(r&&e){const z=e;e=(...H)=>{z(...H),V()}}let R=C?new Array(t.length).fill(Go):Go;const P=z=>{if(!(!(u.flags&1)||!u.dirty&&!z))if(e){const H=u.run();if(n||k||(C?H.some((B,M)=>Yi(B,R[M])):Yi(H,R))){c&&c();const B=gn;gn=u;try{const M=[H,R===Go?void 0:C&&R[0]===Go?[]:R,p];R=H,a?a(e,3,M):e(...M)}finally{gn=B}}}else u.run()};return l&&l(P),u=new km(f),u.scheduler=o?()=>o(P,!1):P,p=z=>W1(z,!1,u),c=u.onStop=()=>{const z=Il.get(u);if(z){if(a)a(z,4);else for(const H of z)H();Il.delete(u)}},e?i?P(!0):R=u.run():o?o(P.bind(null,!0),!0):u.run(),V.pause=u.pause.bind(u),V.resume=u.resume.bind(u),V.stop=V,V}function Ai(t,e=1/0,s){if(e<=0||!dt(t)||t.__v_skip||(s=s||new Map,(s.get(t)||0)>=e))return t;if(s.set(t,e),e--,Zt(t))Ai(t.value,e,s);else if(Be(t))for(let i=0;i<t.length;i++)Ai(t[i],e,s);else if(wr(t)||Qn(t))t.forEach(i=>{Ai(i,e,s)});else if(gm(t)){for(const i in t)Ai(t[i],e,s);for(const i of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,i)&&Ai(t[i],e,s)}return t}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function jo(t,e,s,i){try{return i?t(...i):t()}catch(n){ka(n,e,s)}}function Js(t,e,s,i){if(ze(t)){const n=jo(t,e,s,i);return n&&pm(n)&&n.catch(r=>{ka(r,e,s)}),n}if(Be(t)){const n=[];for(let r=0;r<t.length;r++)n.push(Js(t[r],e,s,i));return n}}function ka(t,e,s,i=!0){const n=e?e.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||ft;if(e){let l=e.parent;const a=e.proxy,d=`https://vuejs.org/error-reference/#runtime-${s}`;for(;l;){const u=l.ec;if(u){for(let f=0;f<u.length;f++)if(u[f](t,a,d)===!1)return}l=l.parent}if(r){$i(),jo(r,null,10,[t,a,d]),Ei();return}}K1(t,s,n,i,o)}function K1(t,e,s,i=!0,n=!1){if(n)throw t;console.error(t)}const ds=[];let oi=-1;const er=[];let Ni=null,Fn=0;const Bm=Promise.resolve();let Nl=null;function Mn(t){const e=Nl||Bm;return t?e.then(this?t.bind(this):t):e}function G1(t){let e=oi+1,s=ds.length;for(;e<s;){const i=e+s>>>1,n=ds[i],r=ao(n);r<t||r===t&&n.flags&2?e=i+1:s=i}return e}function dc(t){if(!(t.flags&1)){const e=ao(t),s=ds[ds.length-1];!s||!(t.flags&2)&&e>=ao(s)?ds.push(t):ds.splice(G1(e),0,t),t.flags|=1,Im()}}function Im(){Nl||(Nl=Bm.then(Um))}function J1(t){Be(t)?er.push(...t):Ni&&t.id===-1?Ni.splice(Fn+1,0,t):t.flags&1||(er.push(t),t.flags|=1),Im()}function _h(t,e,s=oi+1){for(;s<ds.length;s++){const i=ds[s];if(i&&i.flags&2){if(t&&i.id!==t.uid)continue;ds.splice(s,1),s--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function Nm(t){if(er.length){const e=[...new Set(er)].sort((s,i)=>ao(s)-ao(i));if(er.length=0,Ni){Ni.push(...e);return}for(Ni=e,Fn=0;Fn<Ni.length;Fn++){const s=Ni[Fn];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}Ni=null,Fn=0}}const ao=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Um(t){try{for(oi=0;oi<ds.length;oi++){const e=ds[oi];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),jo(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;oi<ds.length;oi++){const e=ds[oi];e&&(e.flags&=-2)}oi=-1,ds.length=0,Nm(),Nl=null,(ds.length||er.length)&&Um()}}let Ft=null,zm=null;function Ul(t){const e=Ft;return Ft=t,zm=t&&t.type.__scopeId||null,e}function j(t,e=Ft,s){if(!e||t._n)return t;const i=(...n)=>{i._d&&Wl(-1);const r=Ul(e);let o;try{o=t(...n)}finally{Ul(r),i._d&&Wl(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function rt(t,e){if(Ft===null)return t;const s=Va(Ft),i=t.dirs||(t.dirs=[]);for(let n=0;n<e.length;n++){let[r,o,l,a=ft]=e[n];r&&(ze(r)&&(r={mounted:r,updated:r}),r.deep&&Ai(o),i.push({dir:r,instance:s,value:o,oldValue:void 0,arg:l,modifiers:a}))}return t}function cn(t,e,s,i){const n=t.dirs,r=e&&e.dirs;for(let o=0;o<n.length;o++){const l=n[o];r&&(l.oldValue=r[o].value);let a=l.dir[i];a&&($i(),Js(a,s,8,[t.el,l,t,e]),Ei())}}const Fm=Symbol("_vte"),Hm=t=>t.__isTeleport,Kr=t=>t&&(t.disabled||t.disabled===""),Sh=t=>t&&(t.defer||t.defer===""),Ch=t=>typeof SVGElement<"u"&&t instanceof SVGElement,Ah=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,Fu=(t,e)=>{const s=t&&t.to;return St(s)?e?e(s):null:s},Wm={name:"Teleport",__isTeleport:!0,process(t,e,s,i,n,r,o,l,a,d){const{mc:u,pc:f,pbc:c,o:{insert:p,querySelector:k,createText:C,createComment:A}}=d,V=Kr(e.props);let{shapeFlag:R,children:P,dynamicChildren:z}=e;if(t==null){const H=e.el=C(""),B=e.anchor=C("");p(H,s,i),p(B,s,i);const M=(X,he)=>{R&16&&u(P,X,he,n,r,o,l,a)},J=()=>{const X=e.target=Fu(e.props,k),he=Km(X,e,C,p);X&&(o!=="svg"&&Ch(X)?o="svg":o!=="mathml"&&Ah(X)&&(o="mathml"),n&&n.isCE&&(n.ce._teleportTargets||(n.ce._teleportTargets=new Set)).add(X),V||(M(X,he),_l(e,!1)))};V&&(M(s,B),_l(e,!0)),Sh(e.props)?(e.el.__isMounted=!1,os(()=>{J(),delete e.el.__isMounted},r)):J()}else{if(Sh(e.props)&&t.el.__isMounted===!1){os(()=>{Wm.process(t,e,s,i,n,r,o,l,a,d)},r);return}e.el=t.el,e.targetStart=t.targetStart;const H=e.anchor=t.anchor,B=e.target=t.target,M=e.targetAnchor=t.targetAnchor,J=Kr(t.props),X=J?s:B,he=J?H:M;if(o==="svg"||Ch(B)?o="svg":(o==="mathml"||Ah(B))&&(o="mathml"),z?(c(t.dynamicChildren,z,X,n,r,o,l),fc(t,e,!0)):a||f(t,e,X,he,n,r,o,l,!1),V)J?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):Jo(e,s,H,d,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const ie=e.target=Fu(e.props,k);ie&&Jo(e,ie,null,d,0)}else J&&Jo(e,B,M,d,1);_l(e,V)}},remove(t,e,s,{um:i,o:{remove:n}},r){const{shapeFlag:o,children:l,anchor:a,targetStart:d,targetAnchor:u,target:f,props:c}=t;if(f&&(n(d),n(u)),r&&n(a),o&16){const p=r||!Kr(c);for(let k=0;k<l.length;k++){const C=l[k];i(C,e,s,p,!!C.dynamicChildren)}}},move:Jo,hydrate:Y1};function Jo(t,e,s,{o:{insert:i},m:n},r=2){r===0&&i(t.targetAnchor,e,s);const{el:o,anchor:l,shapeFlag:a,children:d,props:u}=t,f=r===2;if(f&&i(o,e,s),(!f||Kr(u))&&a&16)for(let c=0;c<d.length;c++)n(d[c],e,s,2);f&&i(l,e,s)}function Y1(t,e,s,i,n,r,{o:{nextSibling:o,parentNode:l,querySelector:a,insert:d,createText:u}},f){function c(C,A,V,R){A.anchor=f(o(C),A,l(C),s,i,n,r),A.targetStart=V,A.targetAnchor=R}const p=e.target=Fu(e.props,a),k=Kr(e.props);if(p){const C=p._lpa||p.firstChild;if(e.shapeFlag&16)if(k)c(t,e,C,C&&o(C));else{e.anchor=o(t);let A=C;for(;A;){if(A&&A.nodeType===8){if(A.data==="teleport start anchor")e.targetStart=A;else if(A.data==="teleport anchor"){e.targetAnchor=A,p._lpa=e.targetAnchor&&o(e.targetAnchor);break}}A=o(A)}e.targetAnchor||Km(p,e,u,d),f(C&&o(C),e,p,s,i,n,r)}_l(e,k)}else k&&e.shapeFlag&16&&c(t,e,t,o(t));return e.anchor&&o(e.anchor)}const qm=Wm;function _l(t,e){const s=t.ctx;if(s&&s.ut){let i,n;for(e?(i=t.el,n=t.anchor):(i=t.targetStart,n=t.targetAnchor);i&&i!==n;)i.nodeType===1&&i.setAttribute("data-v-owner",s.uid),i=i.nextSibling;s.ut()}}function Km(t,e,s,i){const n=e.targetStart=s(""),r=e.targetAnchor=s("");return n[Fm]=r,t&&(i(n,t),i(r,t)),r}const Si=Symbol("_leaveCb"),Yo=Symbol("_enterCb");function X1(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return es(()=>{t.isMounted=!0}),sg(()=>{t.isUnmounting=!0}),t}const Ts=[Function,Array],Gm={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ts,onEnter:Ts,onAfterEnter:Ts,onEnterCancelled:Ts,onBeforeLeave:Ts,onLeave:Ts,onAfterLeave:Ts,onLeaveCancelled:Ts,onBeforeAppear:Ts,onAppear:Ts,onAfterAppear:Ts,onAppearCancelled:Ts},Jm=t=>{const e=t.subTree;return e.component?Jm(e.component):e},Q1={name:"BaseTransition",props:Gm,setup(t,{slots:e}){const s=mc(),i=X1();return()=>{const n=e.default&&Qm(e.default(),!0);if(!n||!n.length)return;const r=Ym(n),o=nt(t),{mode:l}=o;if(i.isLeaving)return eu(r);const a=Vh(r);if(!a)return eu(r);let d=Hu(a,o,i,s,f=>d=f);a.type!==Yt&&uo(a,d);let u=s.subTree&&Vh(s.subTree);if(u&&u.type!==Yt&&!bn(u,a)&&Jm(s).type!==Yt){let f=Hu(u,o,i,s);if(uo(u,f),l==="out-in"&&a.type!==Yt)return i.isLeaving=!0,f.afterLeave=()=>{i.isLeaving=!1,s.job.flags&8||s.update(),delete f.afterLeave,u=void 0},eu(r);l==="in-out"&&a.type!==Yt?f.delayLeave=(c,p,k)=>{const C=Xm(i,u);C[String(u.key)]=u,c[Si]=()=>{p(),c[Si]=void 0,delete d.delayedLeave,u=void 0},d.delayedLeave=()=>{k(),delete d.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return r}}};function Ym(t){let e=t[0];if(t.length>1){for(const s of t)if(s.type!==Yt){e=s;break}}return e}const Z1=Q1;function Xm(t,e){const{leavingVNodes:s}=t;let i=s.get(e.type);return i||(i=Object.create(null),s.set(e.type,i)),i}function Hu(t,e,s,i,n){const{appear:r,mode:o,persisted:l=!1,onBeforeEnter:a,onEnter:d,onAfterEnter:u,onEnterCancelled:f,onBeforeLeave:c,onLeave:p,onAfterLeave:k,onLeaveCancelled:C,onBeforeAppear:A,onAppear:V,onAfterAppear:R,onAppearCancelled:P}=e,z=String(t.key),H=Xm(s,t),B=(X,he)=>{X&&Js(X,i,9,he)},M=(X,he)=>{const ie=he[1];B(X,he),Be(X)?X.every(N=>N.length<=1)&&ie():X.length<=1&&ie()},J={mode:o,persisted:l,beforeEnter(X){let he=a;if(!s.isMounted)if(r)he=A||a;else return;X[Si]&&X[Si](!0);const ie=H[z];ie&&bn(t,ie)&&ie.el[Si]&&ie.el[Si](),B(he,[X])},enter(X){let he=d,ie=u,N=f;if(!s.isMounted)if(r)he=V||d,ie=R||u,N=P||f;else return;let ae=!1;const re=X[Yo]=ke=>{ae||(ae=!0,ke?B(N,[X]):B(ie,[X]),J.delayedLeave&&J.delayedLeave(),X[Yo]=void 0)};he?M(he,[X,re]):re()},leave(X,he){const ie=String(t.key);if(X[Yo]&&X[Yo](!0),s.isUnmounting)return he();B(c,[X]);let N=!1;const ae=X[Si]=re=>{N||(N=!0,he(),re?B(C,[X]):B(k,[X]),X[Si]=void 0,H[ie]===t&&delete H[ie])};H[ie]=t,p?M(p,[X,ae]):ae()},clone(X){const he=Hu(X,e,s,i,n);return n&&n(he),he}};return J}function eu(t){if(wa(t))return t=Zi(t),t.children=null,t}function Vh(t){if(!wa(t))return Hm(t.type)&&t.children?Ym(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:s}=t;if(s){if(e&16)return s[0];if(e&32&&ze(s.default))return s.default()}}function uo(t,e){t.shapeFlag&6&&t.component?(t.transition=e,uo(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Qm(t,e=!1,s){let i=[],n=0;for(let r=0;r<t.length;r++){let o=t[r];const l=s==null?o.key:String(s)+String(o.key!=null?o.key:r);o.type===Q?(o.patchFlag&128&&n++,i=i.concat(Qm(o.children,e,l))):(e||o.type!==Yt)&&i.push(l!=null?Zi(o,{key:l}):o)}if(n>1)for(let r=0;r<i.length;r++)i[r].patchFlag=-2;return i}function Zm(t,e){return ze(t)?Bt({name:t.name},e,{setup:t}):t}function eg(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const zl=new WeakMap;function Gr(t,e,s,i,n=!1){if(Be(t)){t.forEach((k,C)=>Gr(k,e&&(Be(e)?e[C]:e),s,i,n));return}if(tr(i)&&!n){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&Gr(t,e,s,i.component.subTree);return}const r=i.shapeFlag&4?Va(i.component):i.el,o=n?null:r,{i:l,r:a}=t,d=e&&e.r,u=l.refs===ft?l.refs={}:l.refs,f=l.setupState,c=nt(f),p=f===ft?fm:k=>lt(c,k);if(d!=null&&d!==a){if(Mh(e),St(d))u[d]=null,p(d)&&(f[d]=null);else if(Zt(d)){d.value=null;const k=e;k.k&&(u[k.k]=null)}}if(ze(a))jo(a,l,12,[o,u]);else{const k=St(a),C=Zt(a);if(k||C){const A=()=>{if(t.f){const V=k?p(a)?f[a]:u[a]:a.value;if(n)Be(V)&&ec(V,r);else if(Be(V))V.includes(r)||V.push(r);else if(k)u[a]=[r],p(a)&&(f[a]=u[a]);else{const R=[r];a.value=R,t.k&&(u[t.k]=R)}}else k?(u[a]=o,p(a)&&(f[a]=o)):C&&(a.value=o,t.k&&(u[t.k]=o))};if(o){const V=()=>{A(),zl.delete(t)};V.id=-1,zl.set(t,V),os(V,s)}else Mh(t),A()}}}function Mh(t){const e=zl.get(t);e&&(e.flags|=8,zl.delete(t))}ba().requestIdleCallback;ba().cancelIdleCallback;const tr=t=>!!t.type.__asyncLoader,wa=t=>t.type.__isKeepAlive;function eb(t,e){tg(t,"a",e)}function tb(t,e){tg(t,"da",e)}function tg(t,e,s=Xt){const i=t.__wdc||(t.__wdc=()=>{let n=s;for(;n;){if(n.isDeactivated)return;n=n.parent}return t()});if(_a(e,i,s),s){let n=s.parent;for(;n&&n.parent;)wa(n.parent.vnode)&&sb(i,e,s,n),n=n.parent}}function sb(t,e,s,i){const n=_a(e,t,i,!0);_r(()=>{ec(i[e],n)},s)}function _a(t,e,s=Xt,i=!1){if(s){const n=s[t]||(s[t]=[]),r=e.__weh||(e.__weh=(...o)=>{$i();const l=Ro(s),a=Js(e,s,t,o);return l(),Ei(),a});return i?n.unshift(r):n.push(r),r}}const Ri=t=>(e,s=Xt)=>{(!fo||t==="sp")&&_a(t,(...i)=>e(...i),s)},ib=Ri("bm"),es=Ri("m"),nb=Ri("bu"),rb=Ri("u"),sg=Ri("bum"),_r=Ri("um"),ob=Ri("sp"),lb=Ri("rtg"),ab=Ri("rtc");function ub(t,e=Xt){_a("ec",t,e)}const ig="components";function Fl(t,e){return rg(ig,t,!0,e)||t}const ng=Symbol.for("v-ndc");function As(t){return St(t)?rg(ig,t,!1)||t:t||ng}function rg(t,e,s=!0,i=!1){const n=Ft||Xt;if(n){const r=n.type;{const l=Qb(r,!1);if(l&&(l===e||l===Is(e)||l===ya(Is(e))))return r}const o=Dh(n[t]||r[t],e)||Dh(n.appContext[t],e);return!o&&i?r:o}}function Dh(t,e){return t&&(t[e]||t[Is(e)]||t[ya(Is(e))])}function xe(t,e,s,i){let n;const r=s,o=Be(t);if(o||St(t)){const l=o&&Zn(t);let a=!1,d=!1;l&&(a=!js(t),d=Qi(t),t=xa(t)),n=new Array(t.length);for(let u=0,f=t.length;u<f;u++)n[u]=e(a?d?Bl(Nt(t[u])):Nt(t[u]):t[u],u,void 0,r)}else if(typeof t=="number"){n=new Array(t);for(let l=0;l<t;l++)n[l]=e(l+1,l,void 0,r)}else if(dt(t))if(t[Symbol.iterator])n=Array.from(t,(l,a)=>e(l,a,void 0,r));else{const l=Object.keys(t);n=new Array(l.length);for(let a=0,d=l.length;a<d;a++){const u=l[a];n[a]=e(t[u],u,a,r)}}else n=[];return n}function db(t,e){for(let s=0;s<e.length;s++){const i=e[s];if(Be(i))for(let n=0;n<i.length;n++)t[i[n].name]=i[n].fn;else i&&(t[i.name]=i.key?(...n)=>{const r=i.fn(...n);return r&&(r.key=i.key),r}:i.fn)}return t}function vt(t,e,s={},i,n){if(Ft.ce||Ft.parent&&tr(Ft.parent)&&Ft.parent.ce){const d=Object.keys(s).length>0;return e!=="default"&&(s.name=e),g(),pe(Q,null,[x("slot",s,i&&i())],d?-2:64)}let r=t[e];r&&r._c&&(r._d=!1),g();const o=r&&og(r(s)),l=s.key||o&&o.key,a=pe(Q,{key:(l&&!Gs(l)?l:`_${e}`)+(!o&&i?"_fb":"")},o||(i?i():[]),o&&t._===1?64:-2);return!n&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),r&&r._c&&(r._d=!0),a}function og(t){return t.some(e=>ho(e)?!(e.type===Yt||e.type===Q&&!og(e.children)):!0)?t:null}const Wu=t=>t?Cg(t)?Va(t):Wu(t.parent):null,Jr=Bt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Wu(t.parent),$root:t=>Wu(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>ag(t),$forceUpdate:t=>t.f||(t.f=()=>{dc(t.update)}),$nextTick:t=>t.n||(t.n=Mn.bind(t.proxy)),$watch:t=>Ob.bind(t)}),tu=(t,e)=>t!==ft&&!t.__isScriptSetup&&lt(t,e),cb={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:s,setupState:i,data:n,props:r,accessCache:o,type:l,appContext:a}=t;let d;if(e[0]!=="$"){const p=o[e];if(p!==void 0)switch(p){case 1:return i[e];case 2:return n[e];case 4:return s[e];case 3:return r[e]}else{if(tu(i,e))return o[e]=1,i[e];if(n!==ft&&lt(n,e))return o[e]=2,n[e];if((d=t.propsOptions[0])&&lt(d,e))return o[e]=3,r[e];if(s!==ft&&lt(s,e))return o[e]=4,s[e];qu&&(o[e]=0)}}const u=Jr[e];let f,c;if(u)return e==="$attrs"&&Jt(t.attrs,"get",""),u(t);if((f=l.__cssModules)&&(f=f[e]))return f;if(s!==ft&&lt(s,e))return o[e]=4,s[e];if(c=a.config.globalProperties,lt(c,e))return c[e]},set({_:t},e,s){const{data:i,setupState:n,ctx:r}=t;return tu(n,e)?(n[e]=s,!0):i!==ft&&lt(i,e)?(i[e]=s,!0):lt(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(r[e]=s,!0)},has({_:{data:t,setupState:e,accessCache:s,ctx:i,appContext:n,propsOptions:r,type:o}},l){let a,d;return!!(s[l]||t!==ft&&l[0]!=="$"&&lt(t,l)||tu(e,l)||(a=r[0])&&lt(a,l)||lt(i,l)||lt(Jr,l)||lt(n.config.globalProperties,l)||(d=o.__cssModules)&&d[l])},defineProperty(t,e,s){return s.get!=null?t._.accessCache[e]=0:lt(s,"value")&&this.set(t,e,s.value,null),Reflect.defineProperty(t,e,s)}};function hb(){return fb().slots}function fb(t){const e=mc();return e.setupContext||(e.setupContext=Vg(e))}function Th(t){return Be(t)?t.reduce((e,s)=>(e[s]=null,e),{}):t}let qu=!0;function pb(t){const e=ag(t),s=t.proxy,i=t.ctx;qu=!1,e.beforeCreate&&$h(e.beforeCreate,t,"bc");const{data:n,computed:r,methods:o,watch:l,provide:a,inject:d,created:u,beforeMount:f,mounted:c,beforeUpdate:p,updated:k,activated:C,deactivated:A,beforeDestroy:V,beforeUnmount:R,destroyed:P,unmounted:z,render:H,renderTracked:B,renderTriggered:M,errorCaptured:J,serverPrefetch:X,expose:he,inheritAttrs:ie,components:N,directives:ae,filters:re}=e;if(d&&mb(d,i,null),o)for(const T in o){const b=o[T];ze(b)&&(i[T]=b.bind(s))}if(n){const T=n.call(s,s);dt(T)&&(t.data=Hs(T))}if(qu=!0,r)for(const T in r){const b=r[T],m=ze(b)?b.bind(s,s):ze(b.get)?b.get.bind(s,s):fi,w=!ze(b)&&ze(b.set)?b.set.bind(s):fi,Y=oe({get:m,set:w});Object.defineProperty(i,T,{enumerable:!0,configurable:!0,get:()=>Y.value,set:Z=>Y.value=Z})}if(l)for(const T in l)lg(l[T],i,s,T);if(a){const T=ze(a)?a.call(s):a;Reflect.ownKeys(T).forEach(b=>{Sl(b,T[b])})}u&&$h(u,t,"c");function K(T,b){Be(b)?b.forEach(m=>T(m.bind(s))):b&&T(b.bind(s))}if(K(ib,f),K(es,c),K(nb,p),K(rb,k),K(eb,C),K(tb,A),K(ub,J),K(ab,B),K(lb,M),K(sg,R),K(_r,z),K(ob,X),Be(he))if(he.length){const T=t.exposed||(t.exposed={});he.forEach(b=>{Object.defineProperty(T,b,{get:()=>s[b],set:m=>s[b]=m,enumerable:!0})})}else t.exposed||(t.exposed={});H&&t.render===fi&&(t.render=H),ie!=null&&(t.inheritAttrs=ie),N&&(t.components=N),ae&&(t.directives=ae),X&&eg(t)}function mb(t,e,s=fi){Be(t)&&(t=Ku(t));for(const i in t){const n=t[i];let r;dt(n)?"default"in n?r=Ks(n.from||i,n.default,!0):r=Ks(n.from||i):r=Ks(n),Zt(r)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):e[i]=r}}function $h(t,e,s){Js(Be(t)?t.map(i=>i.bind(e.proxy)):t.bind(e.proxy),e,s)}function lg(t,e,s,i){let n=i.includes(".")?xg(s,i):()=>s[i];if(St(t)){const r=e[t];ze(r)&&Ye(n,r)}else if(ze(t))Ye(n,t.bind(s));else if(dt(t))if(Be(t))t.forEach(r=>lg(r,e,s,i));else{const r=ze(t.handler)?t.handler.bind(s):e[t.handler];ze(r)&&Ye(n,r,t)}}function ag(t){const e=t.type,{mixins:s,extends:i}=e,{mixins:n,optionsCache:r,config:{optionMergeStrategies:o}}=t.appContext,l=r.get(e);let a;return l?a=l:!n.length&&!s&&!i?a=e:(a={},n.length&&n.forEach(d=>Hl(a,d,o,!0)),Hl(a,e,o)),dt(e)&&r.set(e,a),a}function Hl(t,e,s,i=!1){const{mixins:n,extends:r}=e;r&&Hl(t,r,s,!0),n&&n.forEach(o=>Hl(t,o,s,!0));for(const o in e)if(!(i&&o==="expose")){const l=gb[o]||s&&s[o];t[o]=l?l(t[o],e[o]):e[o]}return t}const gb={data:Eh,props:Oh,emits:Oh,methods:Ir,computed:Ir,beforeCreate:rs,created:rs,beforeMount:rs,mounted:rs,beforeUpdate:rs,updated:rs,beforeDestroy:rs,beforeUnmount:rs,destroyed:rs,unmounted:rs,activated:rs,deactivated:rs,errorCaptured:rs,serverPrefetch:rs,components:Ir,directives:Ir,watch:yb,provide:Eh,inject:vb};function Eh(t,e){return e?t?function(){return Bt(ze(t)?t.call(this,this):t,ze(e)?e.call(this,this):e)}:e:t}function vb(t,e){return Ir(Ku(t),Ku(e))}function Ku(t){if(Be(t)){const e={};for(let s=0;s<t.length;s++)e[t[s]]=t[s];return e}return t}function rs(t,e){return t?[...new Set([].concat(t,e))]:e}function Ir(t,e){return t?Bt(Object.create(null),t,e):e}function Oh(t,e){return t?Be(t)&&Be(e)?[...new Set([...t,...e])]:Bt(Object.create(null),Th(t),Th(e??{})):e}function yb(t,e){if(!t)return e;if(!e)return t;const s=Bt(Object.create(null),t);for(const i in e)s[i]=rs(t[i],e[i]);return s}function ug(){return{app:null,config:{isNativeTag:fm,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let bb=0;function xb(t,e){return function(i,n=null){ze(i)||(i=Bt({},i)),n!=null&&!dt(n)&&(n=null);const r=ug(),o=new WeakSet,l=[];let a=!1;const d=r.app={_uid:bb++,_component:i,_props:n,_container:null,_context:r,_instance:null,version:ex,get config(){return r.config},set config(u){},use(u,...f){return o.has(u)||(u&&ze(u.install)?(o.add(u),u.install(d,...f)):ze(u)&&(o.add(u),u(d,...f))),d},mixin(u){return r.mixins.includes(u)||r.mixins.push(u),d},component(u,f){return f?(r.components[u]=f,d):r.components[u]},directive(u,f){return f?(r.directives[u]=f,d):r.directives[u]},mount(u,f,c){if(!a){const p=d._ceVNode||x(i,n);return p.appContext=r,c===!0?c="svg":c===!1&&(c=void 0),t(p,u,c),a=!0,d._container=u,u.__vue_app__=d,Va(p.component)}},onUnmount(u){l.push(u)},unmount(){a&&(Js(l,d._instance,16),t(null,d._container),delete d._container.__vue_app__)},provide(u,f){return r.provides[u]=f,d},runWithContext(u){const f=sr;sr=d;try{return u()}finally{sr=f}}};return d}}let sr=null;function Sl(t,e){if(Xt){let s=Xt.provides;const i=Xt.parent&&Xt.parent.provides;i===s&&(s=Xt.provides=Object.create(i)),s[t]=e}}function Ks(t,e,s=!1){const i=mc();if(i||sr){let n=sr?sr._context.provides:i?i.parent==null||i.ce?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(n&&t in n)return n[t];if(arguments.length>1)return s&&ze(e)?e.call(i&&i.proxy):e}}const dg={},cg=()=>Object.create(dg),hg=t=>Object.getPrototypeOf(t)===dg;function kb(t,e,s,i=!1){const n={},r=cg();t.propsDefaults=Object.create(null),fg(t,e,n,r);for(const o in t.propsOptions[0])o in n||(n[o]=void 0);s?t.props=i?n:jm(n):t.type.props?t.props=n:t.props=r,t.attrs=r}function wb(t,e,s,i){const{props:n,attrs:r,vnode:{patchFlag:o}}=t,l=nt(n),[a]=t.propsOptions;let d=!1;if((i||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let f=0;f<u.length;f++){let c=u[f];if(Sa(t.emitsOptions,c))continue;const p=e[c];if(a)if(lt(r,c))p!==r[c]&&(r[c]=p,d=!0);else{const k=Is(c);n[k]=Gu(a,l,k,p,t,!1)}else p!==r[c]&&(r[c]=p,d=!0)}}}else{fg(t,e,n,r)&&(d=!0);let u;for(const f in l)(!e||!lt(e,f)&&((u=Bn(f))===f||!lt(e,u)))&&(a?s&&(s[f]!==void 0||s[u]!==void 0)&&(n[f]=Gu(a,l,f,void 0,t,!0)):delete n[f]);if(r!==l)for(const f in r)(!e||!lt(e,f))&&(delete r[f],d=!0)}d&&Ci(t.attrs,"set","")}function fg(t,e,s,i){const[n,r]=t.propsOptions;let o=!1,l;if(e)for(let a in e){if(Hr(a))continue;const d=e[a];let u;n&&lt(n,u=Is(a))?!r||!r.includes(u)?s[u]=d:(l||(l={}))[u]=d:Sa(t.emitsOptions,a)||(!(a in i)||d!==i[a])&&(i[a]=d,o=!0)}if(r){const a=nt(s),d=l||ft;for(let u=0;u<r.length;u++){const f=r[u];s[f]=Gu(n,a,f,d[f],t,!lt(d,f))}}return o}function Gu(t,e,s,i,n,r){const o=t[s];if(o!=null){const l=lt(o,"default");if(l&&i===void 0){const a=o.default;if(o.type!==Function&&!o.skipFactory&&ze(a)){const{propsDefaults:d}=n;if(s in d)i=d[s];else{const u=Ro(n);i=d[s]=a.call(null,e),u()}}else i=a;n.ce&&n.ce._setProp(s,i)}o[0]&&(r&&!l?i=!1:o[1]&&(i===""||i===Bn(s))&&(i=!0))}return i}const _b=new WeakMap;function pg(t,e,s=!1){const i=s?_b:e.propsCache,n=i.get(t);if(n)return n;const r=t.props,o={},l=[];let a=!1;if(!ze(t)){const u=f=>{a=!0;const[c,p]=pg(f,e,!0);Bt(o,c),p&&l.push(...p)};!s&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!r&&!a)return dt(t)&&i.set(t,Xn),Xn;if(Be(r))for(let u=0;u<r.length;u++){const f=Is(r[u]);Ph(f)&&(o[f]=ft)}else if(r)for(const u in r){const f=Is(u);if(Ph(f)){const c=r[u],p=o[f]=Be(c)||ze(c)?{type:c}:Bt({},c),k=p.type;let C=!1,A=!0;if(Be(k))for(let V=0;V<k.length;++V){const R=k[V],P=ze(R)&&R.name;if(P==="Boolean"){C=!0;break}else P==="String"&&(A=!1)}else C=ze(k)&&k.name==="Boolean";p[0]=C,p[1]=A,(C||lt(p,"default"))&&l.push(f)}}const d=[o,l];return dt(t)&&i.set(t,d),d}function Ph(t){return t[0]!=="$"&&!Hr(t)}const cc=t=>t==="_"||t==="_ctx"||t==="$stable",hc=t=>Be(t)?t.map(li):[li(t)],Sb=(t,e,s)=>{if(e._n)return e;const i=j((...n)=>hc(e(...n)),s);return i._c=!1,i},mg=(t,e,s)=>{const i=t._ctx;for(const n in t){if(cc(n))continue;const r=t[n];if(ze(r))e[n]=Sb(n,r,i);else if(r!=null){const o=hc(r);e[n]=()=>o}}},gg=(t,e)=>{const s=hc(e);t.slots.default=()=>s},vg=(t,e,s)=>{for(const i in e)(s||!cc(i))&&(t[i]=e[i])},Cb=(t,e,s)=>{const i=t.slots=cg();if(t.vnode.shapeFlag&32){const n=e._;n?(vg(i,e,s),s&&vm(i,"_",n,!0)):mg(e,i)}else e&&gg(t,e)},Ab=(t,e,s)=>{const{vnode:i,slots:n}=t;let r=!0,o=ft;if(i.shapeFlag&32){const l=e._;l?s&&l===1?r=!1:vg(n,e,s):(r=!e.$stable,mg(e,n)),o=e}else e&&(gg(t,e),o={default:1});if(r)for(const l in n)!cc(l)&&o[l]==null&&delete n[l]},os=Ub;function Vb(t){return Mb(t)}function Mb(t,e){const s=ba();s.__VUE__=!0;const{insert:i,remove:n,patchProp:r,createElement:o,createText:l,createComment:a,setText:d,setElementText:u,parentNode:f,nextSibling:c,setScopeId:p=fi,insertStaticContent:k}=t,C=(D,E,F,te=null,ne=null,se=null,de=void 0,me=null,be=!!E.dynamicChildren)=>{if(D===E)return;D&&!bn(D,E)&&(te=ee(D),Z(D,ne,se,!0),D=null),E.patchFlag===-2&&(be=!1,E.dynamicChildren=null);const{type:fe,ref:Le,shapeFlag:Ce}=E;switch(fe){case Ca:A(D,E,F,te);break;case Yt:V(D,E,F,te);break;case Cl:D==null&&R(E,F,te,de);break;case Q:N(D,E,F,te,ne,se,de,me,be);break;default:Ce&1?H(D,E,F,te,ne,se,de,me,be):Ce&6?ae(D,E,F,te,ne,se,de,me,be):(Ce&64||Ce&128)&&fe.process(D,E,F,te,ne,se,de,me,be,Oe)}Le!=null&&ne?Gr(Le,D&&D.ref,se,E||D,!E):Le==null&&D&&D.ref!=null&&Gr(D.ref,null,se,D,!0)},A=(D,E,F,te)=>{if(D==null)i(E.el=l(E.children),F,te);else{const ne=E.el=D.el;E.children!==D.children&&d(ne,E.children)}},V=(D,E,F,te)=>{D==null?i(E.el=a(E.children||""),F,te):E.el=D.el},R=(D,E,F,te)=>{[D.el,D.anchor]=k(D.children,E,F,te,D.el,D.anchor)},P=({el:D,anchor:E},F,te)=>{let ne;for(;D&&D!==E;)ne=c(D),i(D,F,te),D=ne;i(E,F,te)},z=({el:D,anchor:E})=>{let F;for(;D&&D!==E;)F=c(D),n(D),D=F;n(E)},H=(D,E,F,te,ne,se,de,me,be)=>{E.type==="svg"?de="svg":E.type==="math"&&(de="mathml"),D==null?B(E,F,te,ne,se,de,me,be):X(D,E,ne,se,de,me,be)},B=(D,E,F,te,ne,se,de,me)=>{let be,fe;const{props:Le,shapeFlag:Ce,transition:je,dirs:Pe}=D;if(be=D.el=o(D.type,se,Le&&Le.is,Le),Ce&8?u(be,D.children):Ce&16&&J(D.children,be,null,te,ne,su(D,se),de,me),Pe&&cn(D,null,te,"created"),M(be,D,D.scopeId,de,te),Le){for(const st in Le)st!=="value"&&!Hr(st)&&r(be,st,null,Le[st],se,te);"value"in Le&&r(be,"value",null,Le.value,se),(fe=Le.onVnodeBeforeMount)&&ti(fe,te,D)}Pe&&cn(D,null,te,"beforeMount");const Ue=Db(ne,je);Ue&&je.beforeEnter(be),i(be,E,F),((fe=Le&&Le.onVnodeMounted)||Ue||Pe)&&os(()=>{fe&&ti(fe,te,D),Ue&&je.enter(be),Pe&&cn(D,null,te,"mounted")},ne)},M=(D,E,F,te,ne)=>{if(F&&p(D,F),te)for(let se=0;se<te.length;se++)p(D,te[se]);if(ne){let se=ne.subTree;if(E===se||wg(se.type)&&(se.ssContent===E||se.ssFallback===E)){const de=ne.vnode;M(D,de,de.scopeId,de.slotScopeIds,ne.parent)}}},J=(D,E,F,te,ne,se,de,me,be=0)=>{for(let fe=be;fe<D.length;fe++){const Le=D[fe]=me?Ui(D[fe]):li(D[fe]);C(null,Le,E,F,te,ne,se,de,me)}},X=(D,E,F,te,ne,se,de)=>{const me=E.el=D.el;let{patchFlag:be,dynamicChildren:fe,dirs:Le}=E;be|=D.patchFlag&16;const Ce=D.props||ft,je=E.props||ft;let Pe;if(F&&hn(F,!1),(Pe=je.onVnodeBeforeUpdate)&&ti(Pe,F,E,D),Le&&cn(E,D,F,"beforeUpdate"),F&&hn(F,!0),(Ce.innerHTML&&je.innerHTML==null||Ce.textContent&&je.textContent==null)&&u(me,""),fe?he(D.dynamicChildren,fe,me,F,te,su(E,ne),se):de||b(D,E,me,null,F,te,su(E,ne),se,!1),be>0){if(be&16)ie(me,Ce,je,F,ne);else if(be&2&&Ce.class!==je.class&&r(me,"class",null,je.class,ne),be&4&&r(me,"style",Ce.style,je.style,ne),be&8){const Ue=E.dynamicProps;for(let st=0;st<Ue.length;st++){const Ge=Ue[st],it=Ce[Ge],At=je[Ge];(At!==it||Ge==="value")&&r(me,Ge,it,At,ne,F)}}be&1&&D.children!==E.children&&u(me,E.children)}else!de&&fe==null&&ie(me,Ce,je,F,ne);((Pe=je.onVnodeUpdated)||Le)&&os(()=>{Pe&&ti(Pe,F,E,D),Le&&cn(E,D,F,"updated")},te)},he=(D,E,F,te,ne,se,de)=>{for(let me=0;me<E.length;me++){const be=D[me],fe=E[me],Le=be.el&&(be.type===Q||!bn(be,fe)||be.shapeFlag&198)?f(be.el):F;C(be,fe,Le,null,te,ne,se,de,!0)}},ie=(D,E,F,te,ne)=>{if(E!==F){if(E!==ft)for(const se in E)!Hr(se)&&!(se in F)&&r(D,se,E[se],null,ne,te);for(const se in F){if(Hr(se))continue;const de=F[se],me=E[se];de!==me&&se!=="value"&&r(D,se,me,de,ne,te)}"value"in F&&r(D,"value",E.value,F.value,ne)}},N=(D,E,F,te,ne,se,de,me,be)=>{const fe=E.el=D?D.el:l(""),Le=E.anchor=D?D.anchor:l("");let{patchFlag:Ce,dynamicChildren:je,slotScopeIds:Pe}=E;Pe&&(me=me?me.concat(Pe):Pe),D==null?(i(fe,F,te),i(Le,F,te),J(E.children||[],F,Le,ne,se,de,me,be)):Ce>0&&Ce&64&&je&&D.dynamicChildren?(he(D.dynamicChildren,je,F,ne,se,de,me),(E.key!=null||ne&&E===ne.subTree)&&fc(D,E,!0)):b(D,E,F,Le,ne,se,de,me,be)},ae=(D,E,F,te,ne,se,de,me,be)=>{E.slotScopeIds=me,D==null?E.shapeFlag&512?ne.ctx.activate(E,F,te,de,be):re(E,F,te,ne,se,de,be):ke(D,E,be)},re=(D,E,F,te,ne,se,de)=>{const me=D.component=Gb(D,te,ne);if(wa(D)&&(me.ctx.renderer=Oe),Jb(me,!1,de),me.asyncDep){if(ne&&ne.registerDep(me,K,de),!D.el){const be=me.subTree=x(Yt);V(null,be,E,F),D.placeholder=be.el}}else K(me,D,E,F,ne,se,de)},ke=(D,E,F)=>{const te=E.component=D.component;if(Ib(D,E,F))if(te.asyncDep&&!te.asyncResolved){T(te,E,F);return}else te.next=E,te.update();else E.el=D.el,te.vnode=E},K=(D,E,F,te,ne,se,de)=>{const me=()=>{if(D.isMounted){let{next:Ce,bu:je,u:Pe,parent:Ue,vnode:st}=D;{const ns=yg(D);if(ns){Ce&&(Ce.el=st.el,T(D,Ce,de)),ns.asyncDep.then(()=>{D.isUnmounted||me()});return}}let Ge=Ce,it;hn(D,!1),Ce?(Ce.el=st.el,T(D,Ce,de)):Ce=st,je&&wl(je),(it=Ce.props&&Ce.props.onVnodeBeforeUpdate)&&ti(it,Ue,Ce,st),hn(D,!0);const At=Rh(D),is=D.subTree;D.subTree=At,C(is,At,f(is.el),ee(is),D,ne,se),Ce.el=At.el,Ge===null&&Nb(D,At.el),Pe&&os(Pe,ne),(it=Ce.props&&Ce.props.onVnodeUpdated)&&os(()=>ti(it,Ue,Ce,st),ne)}else{let Ce;const{el:je,props:Pe}=E,{bm:Ue,m:st,parent:Ge,root:it,type:At}=D,is=tr(E);hn(D,!1),Ue&&wl(Ue),!is&&(Ce=Pe&&Pe.onVnodeBeforeMount)&&ti(Ce,Ge,E),hn(D,!0);{it.ce&&it.ce._def.shadowRoot!==!1&&it.ce._injectChildStyle(At);const ns=D.subTree=Rh(D);C(null,ns,F,te,D,ne,se),E.el=ns.el}if(st&&os(st,ne),!is&&(Ce=Pe&&Pe.onVnodeMounted)){const ns=E;os(()=>ti(Ce,Ge,ns),ne)}(E.shapeFlag&256||Ge&&tr(Ge.vnode)&&Ge.vnode.shapeFlag&256)&&D.a&&os(D.a,ne),D.isMounted=!0,E=F=te=null}};D.scope.on();const be=D.effect=new km(me);D.scope.off();const fe=D.update=be.run.bind(be),Le=D.job=be.runIfDirty.bind(be);Le.i=D,Le.id=D.uid,be.scheduler=()=>dc(Le),hn(D,!0),fe()},T=(D,E,F)=>{E.component=D;const te=D.vnode.props;D.vnode=E,D.next=null,wb(D,E.props,te,F),Ab(D,E.children,F),$i(),_h(D),Ei()},b=(D,E,F,te,ne,se,de,me,be=!1)=>{const fe=D&&D.children,Le=D?D.shapeFlag:0,Ce=E.children,{patchFlag:je,shapeFlag:Pe}=E;if(je>0){if(je&128){w(fe,Ce,F,te,ne,se,de,me,be);return}else if(je&256){m(fe,Ce,F,te,ne,se,de,me,be);return}}Pe&8?(Le&16&&tt(fe,ne,se),Ce!==fe&&u(F,Ce)):Le&16?Pe&16?w(fe,Ce,F,te,ne,se,de,me,be):tt(fe,ne,se,!0):(Le&8&&u(F,""),Pe&16&&J(Ce,F,te,ne,se,de,me,be))},m=(D,E,F,te,ne,se,de,me,be)=>{D=D||Xn,E=E||Xn;const fe=D.length,Le=E.length,Ce=Math.min(fe,Le);let je;for(je=0;je<Ce;je++){const Pe=E[je]=be?Ui(E[je]):li(E[je]);C(D[je],Pe,F,null,ne,se,de,me,be)}fe>Le?tt(D,ne,se,!0,!1,Ce):J(E,F,te,ne,se,de,me,be,Ce)},w=(D,E,F,te,ne,se,de,me,be)=>{let fe=0;const Le=E.length;let Ce=D.length-1,je=Le-1;for(;fe<=Ce&&fe<=je;){const Pe=D[fe],Ue=E[fe]=be?Ui(E[fe]):li(E[fe]);if(bn(Pe,Ue))C(Pe,Ue,F,null,ne,se,de,me,be);else break;fe++}for(;fe<=Ce&&fe<=je;){const Pe=D[Ce],Ue=E[je]=be?Ui(E[je]):li(E[je]);if(bn(Pe,Ue))C(Pe,Ue,F,null,ne,se,de,me,be);else break;Ce--,je--}if(fe>Ce){if(fe<=je){const Pe=je+1,Ue=Pe<Le?E[Pe].el:te;for(;fe<=je;)C(null,E[fe]=be?Ui(E[fe]):li(E[fe]),F,Ue,ne,se,de,me,be),fe++}}else if(fe>je)for(;fe<=Ce;)Z(D[fe],ne,se,!0),fe++;else{const Pe=fe,Ue=fe,st=new Map;for(fe=Ue;fe<=je;fe++){const Xe=E[fe]=be?Ui(E[fe]):li(E[fe]);Xe.key!=null&&st.set(Xe.key,fe)}let Ge,it=0;const At=je-Ue+1;let is=!1,ns=0;const zs=new Array(At);for(fe=0;fe<At;fe++)zs[fe]=0;for(fe=Pe;fe<=Ce;fe++){const Xe=D[fe];if(it>=At){Z(Xe,ne,se,!0);continue}let qt;if(Xe.key!=null)qt=st.get(Xe.key);else for(Ge=Ue;Ge<=je;Ge++)if(zs[Ge-Ue]===0&&bn(Xe,E[Ge])){qt=Ge;break}qt===void 0?Z(Xe,ne,se,!0):(zs[qt-Ue]=fe+1,qt>=ns?ns=qt:is=!0,C(Xe,E[qt],F,null,ne,se,de,me,be),it++)}const un=is?Tb(zs):Xn;for(Ge=un.length-1,fe=At-1;fe>=0;fe--){const Xe=Ue+fe,qt=E[Xe],Nn=E[Xe+1],dn=Xe+1<Le?Nn.el||Nn.placeholder:te;zs[fe]===0?C(null,qt,F,dn,ne,se,de,me,be):is&&(Ge<0||fe!==un[Ge]?Y(qt,F,dn,2):Ge--)}}},Y=(D,E,F,te,ne=null)=>{const{el:se,type:de,transition:me,children:be,shapeFlag:fe}=D;if(fe&6){Y(D.component.subTree,E,F,te);return}if(fe&128){D.suspense.move(E,F,te);return}if(fe&64){de.move(D,E,F,Oe);return}if(de===Q){i(se,E,F);for(let Ce=0;Ce<be.length;Ce++)Y(be[Ce],E,F,te);i(D.anchor,E,F);return}if(de===Cl){P(D,E,F);return}if(te!==2&&fe&1&&me)if(te===0)me.beforeEnter(se),i(se,E,F),os(()=>me.enter(se),ne);else{const{leave:Ce,delayLeave:je,afterLeave:Pe}=me,Ue=()=>{D.ctx.isUnmounted?n(se):i(se,E,F)},st=()=>{se._isLeaving&&se[Si](!0),Ce(se,()=>{Ue(),Pe&&Pe()})};je?je(se,Ue,st):st()}else i(se,E,F)},Z=(D,E,F,te=!1,ne=!1)=>{const{type:se,props:de,ref:me,children:be,dynamicChildren:fe,shapeFlag:Le,patchFlag:Ce,dirs:je,cacheIndex:Pe}=D;if(Ce===-2&&(ne=!1),me!=null&&($i(),Gr(me,null,F,D,!0),Ei()),Pe!=null&&(E.renderCache[Pe]=void 0),Le&256){E.ctx.deactivate(D);return}const Ue=Le&1&&je,st=!tr(D);let Ge;if(st&&(Ge=de&&de.onVnodeBeforeUnmount)&&ti(Ge,E,D),Le&6)Ee(D.component,F,te);else{if(Le&128){D.suspense.unmount(F,te);return}Ue&&cn(D,null,E,"beforeUnmount"),Le&64?D.type.remove(D,E,F,Oe,te):fe&&!fe.hasOnce&&(se!==Q||Ce>0&&Ce&64)?tt(fe,E,F,!1,!0):(se===Q&&Ce&384||!ne&&Le&16)&&tt(be,E,F),te&&qe(D)}(st&&(Ge=de&&de.onVnodeUnmounted)||Ue)&&os(()=>{Ge&&ti(Ge,E,D),Ue&&cn(D,null,E,"unmounted")},F)},qe=D=>{const{type:E,el:F,anchor:te,transition:ne}=D;if(E===Q){We(F,te);return}if(E===Cl){z(D);return}const se=()=>{n(F),ne&&!ne.persisted&&ne.afterLeave&&ne.afterLeave()};if(D.shapeFlag&1&&ne&&!ne.persisted){const{leave:de,delayLeave:me}=ne,be=()=>de(F,se);me?me(D.el,se,be):be()}else se()},We=(D,E)=>{let F;for(;D!==E;)F=c(D),n(D),D=F;n(E)},Ee=(D,E,F)=>{const{bum:te,scope:ne,job:se,subTree:de,um:me,m:be,a:fe}=D;jh(be),jh(fe),te&&wl(te),ne.stop(),se&&(se.flags|=8,Z(de,D,E,F)),me&&os(me,E),os(()=>{D.isUnmounted=!0},E)},tt=(D,E,F,te=!1,ne=!1,se=0)=>{for(let de=se;de<D.length;de++)Z(D[de],E,F,te,ne)},ee=D=>{if(D.shapeFlag&6)return ee(D.component.subTree);if(D.shapeFlag&128)return D.suspense.next();const E=c(D.anchor||D.el),F=E&&E[Fm];return F?c(F):E};let Me=!1;const $=(D,E,F)=>{D==null?E._vnode&&Z(E._vnode,null,null,!0):C(E._vnode||null,D,E,null,null,null,F),E._vnode=D,Me||(Me=!0,_h(),Nm(),Me=!1)},Oe={p:C,um:Z,m:Y,r:qe,mt:re,mc:J,pc:b,pbc:he,n:ee,o:t};return{render:$,hydrate:void 0,createApp:xb($)}}function su({type:t,props:e},s){return s==="svg"&&t==="foreignObject"||s==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:s}function hn({effect:t,job:e},s){s?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function Db(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function fc(t,e,s=!1){const i=t.children,n=e.children;if(Be(i)&&Be(n))for(let r=0;r<i.length;r++){const o=i[r];let l=n[r];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=n[r]=Ui(n[r]),l.el=o.el),!s&&l.patchFlag!==-2&&fc(o,l)),l.type===Ca&&l.patchFlag!==-1&&(l.el=o.el),l.type===Yt&&!l.el&&(l.el=o.el)}}function Tb(t){const e=t.slice(),s=[0];let i,n,r,o,l;const a=t.length;for(i=0;i<a;i++){const d=t[i];if(d!==0){if(n=s[s.length-1],t[n]<d){e[i]=n,s.push(i);continue}for(r=0,o=s.length-1;r<o;)l=r+o>>1,t[s[l]]<d?r=l+1:o=l;d<t[s[r]]&&(r>0&&(e[i]=s[r-1]),s[r]=i)}}for(r=s.length,o=s[r-1];r-- >0;)s[r]=o,o=e[o];return s}function yg(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:yg(e)}function jh(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const $b=Symbol.for("v-scx"),Eb=()=>Ks($b);function Ye(t,e,s){return bg(t,e,s)}function bg(t,e,s=ft){const{immediate:i,deep:n,flush:r,once:o}=s,l=Bt({},s),a=e&&i||!e&&r!=="post";let d;if(fo){if(r==="sync"){const p=Eb();d=p.__watcherHandles||(p.__watcherHandles=[])}else if(!a){const p=()=>{};return p.stop=fi,p.resume=fi,p.pause=fi,p}}const u=Xt;l.call=(p,k,C)=>Js(p,u,k,C);let f=!1;r==="post"?l.scheduler=p=>{os(p,u&&u.suspense)}:r!=="sync"&&(f=!0,l.scheduler=(p,k)=>{k?p():dc(p)}),l.augmentJob=p=>{e&&(p.flags|=4),f&&(p.flags|=2,u&&(p.id=u.uid,p.i=u))};const c=q1(t,e,l);return fo&&(d?d.push(c):a&&c()),c}function Ob(t,e,s){const i=this.proxy,n=St(t)?t.includes(".")?xg(i,t):()=>i[t]:t.bind(i,i);let r;ze(e)?r=e:(r=e.handler,s=e);const o=Ro(this),l=bg(n,r.bind(i),s);return o(),l}function xg(t,e){const s=e.split(".");return()=>{let i=t;for(let n=0;n<s.length&&i;n++)i=i[s[n]];return i}}const Pb=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Is(e)}Modifiers`]||t[`${Bn(e)}Modifiers`];function jb(t,e,...s){if(t.isUnmounted)return;const i=t.vnode.props||ft;let n=s;const r=e.startsWith("update:"),o=r&&Pb(i,e.slice(7));o&&(o.trim&&(n=s.map(u=>St(u)?u.trim():u)),o.number&&(n=s.map(Ll)));let l,a=i[l=Ja(e)]||i[l=Ja(Is(e))];!a&&r&&(a=i[l=Ja(Bn(e))]),a&&Js(a,t,6,n);const d=i[l+"Once"];if(d){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,Js(d,t,6,n)}}const Rb=new WeakMap;function kg(t,e,s=!1){const i=s?Rb:e.emitsCache,n=i.get(t);if(n!==void 0)return n;const r=t.emits;let o={},l=!1;if(!ze(t)){const a=d=>{const u=kg(d,e,!0);u&&(l=!0,Bt(o,u))};!s&&e.mixins.length&&e.mixins.forEach(a),t.extends&&a(t.extends),t.mixins&&t.mixins.forEach(a)}return!r&&!l?(dt(t)&&i.set(t,null),null):(Be(r)?r.forEach(a=>o[a]=null):Bt(o,r),dt(t)&&i.set(t,o),o)}function Sa(t,e){return!t||!ga(e)?!1:(e=e.slice(2).replace(/Once$/,""),lt(t,e[0].toLowerCase()+e.slice(1))||lt(t,Bn(e))||lt(t,e))}function Rh(t){const{type:e,vnode:s,proxy:i,withProxy:n,propsOptions:[r],slots:o,attrs:l,emit:a,render:d,renderCache:u,props:f,data:c,setupState:p,ctx:k,inheritAttrs:C}=t,A=Ul(t);let V,R;try{if(s.shapeFlag&4){const z=n||i,H=z;V=li(d.call(H,z,u,f,p,c,k)),R=l}else{const z=e;V=li(z.length>1?z(f,{attrs:l,slots:o,emit:a}):z(f,null)),R=e.props?l:Lb(l)}}catch(z){Yr.length=0,ka(z,t,1),V=x(Yt)}let P=V;if(R&&C!==!1){const z=Object.keys(R),{shapeFlag:H}=P;z.length&&H&7&&(r&&z.some(Zd)&&(R=Bb(R,r)),P=Zi(P,R,!1,!0))}return s.dirs&&(P=Zi(P,null,!1,!0),P.dirs=P.dirs?P.dirs.concat(s.dirs):s.dirs),s.transition&&uo(P,s.transition),V=P,Ul(A),V}const Lb=t=>{let e;for(const s in t)(s==="class"||s==="style"||ga(s))&&((e||(e={}))[s]=t[s]);return e},Bb=(t,e)=>{const s={};for(const i in t)(!Zd(i)||!(i.slice(9)in e))&&(s[i]=t[i]);return s};function Ib(t,e,s){const{props:i,children:n,component:r}=t,{props:o,children:l,patchFlag:a}=e,d=r.emitsOptions;if(e.dirs||e.transition)return!0;if(s&&a>=0){if(a&1024)return!0;if(a&16)return i?Lh(i,o,d):!!o;if(a&8){const u=e.dynamicProps;for(let f=0;f<u.length;f++){const c=u[f];if(o[c]!==i[c]&&!Sa(d,c))return!0}}}else return(n||l)&&(!l||!l.$stable)?!0:i===o?!1:i?o?Lh(i,o,d):!0:!!o;return!1}function Lh(t,e,s){const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!0;for(let n=0;n<i.length;n++){const r=i[n];if(e[r]!==t[r]&&!Sa(s,r))return!0}return!1}function Nb({vnode:t,parent:e},s){for(;e;){const i=e.subTree;if(i.suspense&&i.suspense.activeBranch===t&&(i.el=t.el),i===t)(t=e.vnode).el=s,e=e.parent;else break}}const wg=t=>t.__isSuspense;function Ub(t,e){e&&e.pendingBranch?Be(t)?e.effects.push(...t):e.effects.push(t):J1(t)}const Q=Symbol.for("v-fgt"),Ca=Symbol.for("v-txt"),Yt=Symbol.for("v-cmt"),Cl=Symbol.for("v-stc"),Yr=[];let Ss=null;function g(t=!1){Yr.push(Ss=t?null:[])}function zb(){Yr.pop(),Ss=Yr[Yr.length-1]||null}let co=1;function Wl(t,e=!1){co+=t,t<0&&Ss&&e&&(Ss.hasOnce=!0)}function _g(t){return t.dynamicChildren=co>0?Ss||Xn:null,zb(),co>0&&Ss&&Ss.push(t),t}function y(t,e,s,i,n,r){return _g(h(t,e,s,i,n,r,!0))}function pe(t,e,s,i,n){return _g(x(t,e,s,i,n,!0))}function ho(t){return t?t.__v_isVNode===!0:!1}function bn(t,e){return t.type===e.type&&t.key===e.key}const Sg=({key:t})=>t??null,Al=({ref:t,ref_key:e,ref_for:s})=>(typeof t=="number"&&(t=""+t),t!=null?St(t)||Zt(t)||ze(t)?{i:Ft,r:t,k:e,f:!!s}:t:null);function h(t,e=null,s=null,i=0,n=null,r=t===Q?0:1,o=!1,l=!1){const a={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Sg(e),ref:e&&Al(e),scopeId:zm,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:i,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:Ft};return l?(pc(a,s),r&128&&t.normalize(a)):s&&(a.shapeFlag|=St(s)?8:16),co>0&&!o&&Ss&&(a.patchFlag>0||r&6)&&a.patchFlag!==32&&Ss.push(a),a}const x=Fb;function Fb(t,e=null,s=null,i=0,n=null,r=!1){if((!t||t===ng)&&(t=Yt),ho(t)){const l=Zi(t,e,!0);return s&&pc(l,s),co>0&&!r&&Ss&&(l.shapeFlag&6?Ss[Ss.indexOf(t)]=l:Ss.push(l)),l.patchFlag=-2,l}if(Zb(t)&&(t=t.__vccOpts),e){e=Hb(e);let{class:l,style:a}=e;l&&!St(l)&&(e.class=De(l)),dt(a)&&(uc(a)&&!Be(a)&&(a=Bt({},a)),e.style=ro(a))}const o=St(t)?1:wg(t)?128:Hm(t)?64:dt(t)?4:ze(t)?2:0;return h(t,e,s,i,n,o,r,!0)}function Hb(t){return t?uc(t)||hg(t)?Bt({},t):t:null}function Zi(t,e,s=!1,i=!1){const{props:n,ref:r,patchFlag:o,children:l,transition:a}=t,d=e?Wb(n||{},e):n,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:d,key:d&&Sg(d),ref:e&&e.ref?s&&r?Be(r)?r.concat(Al(e)):[r,Al(e)]:Al(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Q?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:a,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Zi(t.ssContent),ssFallback:t.ssFallback&&Zi(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return a&&i&&uo(u,a.clone(u)),u}function ue(t=" ",e=0){return x(Ca,null,t,e)}function Aa(t,e){const s=x(Cl,null,t);return s.staticCount=e,s}function I(t="",e=!1){return e?(g(),pe(Yt,null,t)):x(Yt,null,t)}function li(t){return t==null||typeof t=="boolean"?x(Yt):Be(t)?x(Q,null,t.slice()):ho(t)?Ui(t):x(Ca,null,String(t))}function Ui(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Zi(t)}function pc(t,e){let s=0;const{shapeFlag:i}=t;if(e==null)e=null;else if(Be(e))s=16;else if(typeof e=="object")if(i&65){const n=e.default;n&&(n._c&&(n._d=!1),pc(t,n()),n._c&&(n._d=!0));return}else{s=32;const n=e._;!n&&!hg(e)?e._ctx=Ft:n===3&&Ft&&(Ft.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else ze(e)?(e={default:e,_ctx:Ft},s=32):(e=String(e),i&64?(s=16,e=[ue(e)]):s=8);t.children=e,t.shapeFlag|=s}function Wb(...t){const e={};for(let s=0;s<t.length;s++){const i=t[s];for(const n in i)if(n==="class")e.class!==i.class&&(e.class=De([e.class,i.class]));else if(n==="style")e.style=ro([e.style,i.style]);else if(ga(n)){const r=e[n],o=i[n];o&&r!==o&&!(Be(r)&&r.includes(o))&&(e[n]=r?[].concat(r,o):o)}else n!==""&&(e[n]=i[n])}return e}function ti(t,e,s,i=null){Js(t,e,7,[s,i])}const qb=ug();let Kb=0;function Gb(t,e,s){const i=t.type,n=(e?e.appContext:t.appContext)||qb,r={uid:Kb++,vnode:t,type:i,parent:e,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new b1(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(n.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:pg(i,n),emitsOptions:kg(i,n),emit:null,emitted:null,propsDefaults:ft,inheritAttrs:i.inheritAttrs,ctx:ft,data:ft,props:ft,attrs:ft,slots:ft,refs:ft,setupState:ft,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=jb.bind(null,r),t.ce&&t.ce(r),r}let Xt=null;const mc=()=>Xt||Ft;let ql,Ju;{const t=ba(),e=(s,i)=>{let n;return(n=t[s])||(n=t[s]=[]),n.push(i),r=>{n.length>1?n.forEach(o=>o(r)):n[0](r)}};ql=e("__VUE_INSTANCE_SETTERS__",s=>Xt=s),Ju=e("__VUE_SSR_SETTERS__",s=>fo=s)}const Ro=t=>{const e=Xt;return ql(t),t.scope.on(),()=>{t.scope.off(),ql(e)}},Bh=()=>{Xt&&Xt.scope.off(),ql(null)};function Cg(t){return t.vnode.shapeFlag&4}let fo=!1;function Jb(t,e=!1,s=!1){e&&Ju(e);const{props:i,children:n}=t.vnode,r=Cg(t);kb(t,i,r,e),Cb(t,n,s||e);const o=r?Yb(t,e):void 0;return e&&Ju(!1),o}function Yb(t,e){const s=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,cb);const{setup:i}=s;if(i){$i();const n=t.setupContext=i.length>1?Vg(t):null,r=Ro(t),o=jo(i,t,0,[t.props,n]),l=pm(o);if(Ei(),r(),(l||t.sp)&&!tr(t)&&eg(t),l){if(o.then(Bh,Bh),e)return o.then(a=>{Ih(t,a)}).catch(a=>{ka(a,t,0)});t.asyncDep=o}else Ih(t,o)}else Ag(t)}function Ih(t,e,s){ze(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:dt(e)&&(t.setupState=Lm(e)),Ag(t)}function Ag(t,e,s){const i=t.type;t.render||(t.render=i.render||fi);{const n=Ro(t);$i();try{pb(t)}finally{Ei(),n()}}}const Xb={get(t,e){return Jt(t,"get",""),t[e]}};function Vg(t){const e=s=>{t.exposed=s||{}};return{attrs:new Proxy(t.attrs,Xb),slots:t.slots,emit:t.emit,expose:e}}function Va(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Lm(I1(t.exposed)),{get(e,s){if(s in e)return e[s];if(s in Jr)return Jr[s](t)},has(e,s){return s in e||s in Jr}})):t.proxy}function Qb(t,e=!0){return ze(t)?t.displayName||t.name:t.name||e&&t.__name}function Zb(t){return ze(t)&&"__vccOpts"in t}const oe=(t,e)=>H1(t,e,fo);function Dt(t,e,s){try{Wl(-1);const i=arguments.length;return i===2?dt(e)&&!Be(e)?ho(e)?x(t,null,[e]):x(t,e):x(t,null,e):(i>3?s=Array.prototype.slice.call(arguments,2):i===3&&ho(s)&&(s=[s]),x(t,e,s))}finally{Wl(1)}}const ex="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Yu;const Nh=typeof window<"u"&&window.trustedTypes;if(Nh)try{Yu=Nh.createPolicy("vue",{createHTML:t=>t})}catch{}const Mg=Yu?t=>Yu.createHTML(t):t=>t,tx="http://www.w3.org/2000/svg",sx="http://www.w3.org/1998/Math/MathML",wi=typeof document<"u"?document:null,Uh=wi&&wi.createElement("template"),ix={insert:(t,e,s)=>{e.insertBefore(t,s||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,s,i)=>{const n=e==="svg"?wi.createElementNS(tx,t):e==="mathml"?wi.createElementNS(sx,t):s?wi.createElement(t,{is:s}):wi.createElement(t);return t==="select"&&i&&i.multiple!=null&&n.setAttribute("multiple",i.multiple),n},createText:t=>wi.createTextNode(t),createComment:t=>wi.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>wi.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,s,i,n,r){const o=s?s.previousSibling:e.lastChild;if(n&&(n===r||n.nextSibling))for(;e.insertBefore(n.cloneNode(!0),s),!(n===r||!(n=n.nextSibling)););else{Uh.innerHTML=Mg(i==="svg"?`<svg>${t}</svg>`:i==="mathml"?`<math>${t}</math>`:t);const l=Uh.content;if(i==="svg"||i==="mathml"){const a=l.firstChild;for(;a.firstChild;)l.appendChild(a.firstChild);l.removeChild(a)}e.insertBefore(l,s)}return[o?o.nextSibling:e.firstChild,s?s.previousSibling:e.lastChild]}},Bi="transition",Tr="animation",po=Symbol("_vtc"),Dg={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},nx=Bt({},Gm,Dg),rx=t=>(t.displayName="Transition",t.props=nx,t),gc=rx((t,{slots:e})=>Dt(Z1,ox(t),e)),fn=(t,e=[])=>{Be(t)?t.forEach(s=>s(...e)):t&&t(...e)},zh=t=>t?Be(t)?t.some(e=>e.length>1):t.length>1:!1;function ox(t){const e={};for(const N in t)N in Dg||(e[N]=t[N]);if(t.css===!1)return e;const{name:s="v",type:i,duration:n,enterFromClass:r=`${s}-enter-from`,enterActiveClass:o=`${s}-enter-active`,enterToClass:l=`${s}-enter-to`,appearFromClass:a=r,appearActiveClass:d=o,appearToClass:u=l,leaveFromClass:f=`${s}-leave-from`,leaveActiveClass:c=`${s}-leave-active`,leaveToClass:p=`${s}-leave-to`}=t,k=lx(n),C=k&&k[0],A=k&&k[1],{onBeforeEnter:V,onEnter:R,onEnterCancelled:P,onLeave:z,onLeaveCancelled:H,onBeforeAppear:B=V,onAppear:M=R,onAppearCancelled:J=P}=e,X=(N,ae,re,ke)=>{N._enterCancelled=ke,pn(N,ae?u:l),pn(N,ae?d:o),re&&re()},he=(N,ae)=>{N._isLeaving=!1,pn(N,f),pn(N,p),pn(N,c),ae&&ae()},ie=N=>(ae,re)=>{const ke=N?M:R,K=()=>X(ae,N,re);fn(ke,[ae,K]),Fh(()=>{pn(ae,N?a:r),bi(ae,N?u:l),zh(ke)||Hh(ae,i,C,K)})};return Bt(e,{onBeforeEnter(N){fn(V,[N]),bi(N,r),bi(N,o)},onBeforeAppear(N){fn(B,[N]),bi(N,a),bi(N,d)},onEnter:ie(!1),onAppear:ie(!0),onLeave(N,ae){N._isLeaving=!0;const re=()=>he(N,ae);bi(N,f),N._enterCancelled?(bi(N,c),Kh(N)):(Kh(N),bi(N,c)),Fh(()=>{N._isLeaving&&(pn(N,f),bi(N,p),zh(z)||Hh(N,i,A,re))}),fn(z,[N,re])},onEnterCancelled(N){X(N,!1,void 0,!0),fn(P,[N])},onAppearCancelled(N){X(N,!0,void 0,!0),fn(J,[N])},onLeaveCancelled(N){he(N),fn(H,[N])}})}function lx(t){if(t==null)return null;if(dt(t))return[iu(t.enter),iu(t.leave)];{const e=iu(t);return[e,e]}}function iu(t){return c1(t)}function bi(t,e){e.split(/\s+/).forEach(s=>s&&t.classList.add(s)),(t[po]||(t[po]=new Set)).add(e)}function pn(t,e){e.split(/\s+/).forEach(i=>i&&t.classList.remove(i));const s=t[po];s&&(s.delete(e),s.size||(t[po]=void 0))}function Fh(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let ax=0;function Hh(t,e,s,i){const n=t._endId=++ax,r=()=>{n===t._endId&&i()};if(s!=null)return setTimeout(r,s);const{type:o,timeout:l,propCount:a}=ux(t,e);if(!o)return i();const d=o+"end";let u=0;const f=()=>{t.removeEventListener(d,c),r()},c=p=>{p.target===t&&++u>=a&&f()};setTimeout(()=>{u<a&&f()},l+1),t.addEventListener(d,c)}function ux(t,e){const s=window.getComputedStyle(t),i=k=>(s[k]||"").split(", "),n=i(`${Bi}Delay`),r=i(`${Bi}Duration`),o=Wh(n,r),l=i(`${Tr}Delay`),a=i(`${Tr}Duration`),d=Wh(l,a);let u=null,f=0,c=0;e===Bi?o>0&&(u=Bi,f=o,c=r.length):e===Tr?d>0&&(u=Tr,f=d,c=a.length):(f=Math.max(o,d),u=f>0?o>d?Bi:Tr:null,c=u?u===Bi?r.length:a.length:0);const p=u===Bi&&/\b(?:transform|all)(?:,|$)/.test(i(`${Bi}Property`).toString());return{type:u,timeout:f,propCount:c,hasTransform:p}}function Wh(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((s,i)=>qh(s)+qh(t[i])))}function qh(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function Kh(t){return(t?t.ownerDocument:document).body.offsetHeight}function dx(t,e,s){const i=t[po];i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?t.removeAttribute("class"):s?t.setAttribute("class",e):t.className=e}const Kl=Symbol("_vod"),Tg=Symbol("_vsh"),xt={name:"show",beforeMount(t,{value:e},{transition:s}){t[Kl]=t.style.display==="none"?"":t.style.display,s&&e?s.beforeEnter(t):$r(t,e)},mounted(t,{value:e},{transition:s}){s&&e&&s.enter(t)},updated(t,{value:e,oldValue:s},{transition:i}){!e!=!s&&(i?e?(i.beforeEnter(t),$r(t,!0),i.enter(t)):i.leave(t,()=>{$r(t,!1)}):$r(t,e))},beforeUnmount(t,{value:e}){$r(t,e)}};function $r(t,e){t.style.display=e?t[Kl]:"none",t[Tg]=!e}const cx=Symbol(""),hx=/(?:^|;)\s*display\s*:/;function fx(t,e,s){const i=t.style,n=St(s);let r=!1;if(s&&!n){if(e)if(St(e))for(const o of e.split(";")){const l=o.slice(0,o.indexOf(":")).trim();s[l]==null&&Vl(i,l,"")}else for(const o in e)s[o]==null&&Vl(i,o,"");for(const o in s)o==="display"&&(r=!0),Vl(i,o,s[o])}else if(n){if(e!==s){const o=i[cx];o&&(s+=";"+o),i.cssText=s,r=hx.test(s)}}else e&&t.removeAttribute("style");Kl in t&&(t[Kl]=r?i.display:"",t[Tg]&&(i.display="none"))}const Gh=/\s*!important$/;function Vl(t,e,s){if(Be(s))s.forEach(i=>Vl(t,e,i));else if(s==null&&(s=""),e.startsWith("--"))t.setProperty(e,s);else{const i=px(t,e);Gh.test(s)?t.setProperty(Bn(i),s.replace(Gh,""),"important"):t[i]=s}}const Jh=["Webkit","Moz","ms"],nu={};function px(t,e){const s=nu[e];if(s)return s;let i=Is(e);if(i!=="filter"&&i in t)return nu[e]=i;i=ya(i);for(let n=0;n<Jh.length;n++){const r=Jh[n]+i;if(r in t)return nu[e]=r}return e}const Yh="http://www.w3.org/1999/xlink";function Xh(t,e,s,i,n,r=v1(e)){i&&e.startsWith("xlink:")?s==null?t.removeAttributeNS(Yh,e.slice(6,e.length)):t.setAttributeNS(Yh,e,s):s==null||r&&!ym(s)?t.removeAttribute(e):t.setAttribute(e,r?"":Gs(s)?String(s):s)}function Qh(t,e,s,i,n){if(e==="innerHTML"||e==="textContent"){s!=null&&(t[e]=e==="innerHTML"?Mg(s):s);return}const r=t.tagName;if(e==="value"&&r!=="PROGRESS"&&!r.includes("-")){const l=r==="OPTION"?t.getAttribute("value")||"":t.value,a=s==null?t.type==="checkbox"?"on":"":String(s);(l!==a||!("_value"in t))&&(t.value=a),s==null&&t.removeAttribute(e),t._value=s;return}let o=!1;if(s===""||s==null){const l=typeof t[e];l==="boolean"?s=ym(s):s==null&&l==="string"?(s="",o=!0):l==="number"&&(s=0,o=!0)}try{t[e]=s}catch{}o&&t.removeAttribute(n||e)}function Vi(t,e,s,i){t.addEventListener(e,s,i)}function mx(t,e,s,i){t.removeEventListener(e,s,i)}const Zh=Symbol("_vei");function gx(t,e,s,i,n=null){const r=t[Zh]||(t[Zh]={}),o=r[e];if(i&&o)o.value=i;else{const[l,a]=vx(e);if(i){const d=r[e]=xx(i,n);Vi(t,l,d,a)}else o&&(mx(t,l,o,a),r[e]=void 0)}}const ef=/(?:Once|Passive|Capture)$/;function vx(t){let e;if(ef.test(t)){e={};let i;for(;i=t.match(ef);)t=t.slice(0,t.length-i[0].length),e[i[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Bn(t.slice(2)),e]}let ru=0;const yx=Promise.resolve(),bx=()=>ru||(yx.then(()=>ru=0),ru=Date.now());function xx(t,e){const s=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=s.attached)return;Js(kx(i,s.value),e,5,[i])};return s.value=t,s.attached=bx(),s}function kx(t,e){if(Be(e)){const s=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{s.call(t),t._stopped=!0},e.map(i=>n=>!n._stopped&&i&&i(n))}else return e}const tf=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,wx=(t,e,s,i,n,r)=>{const o=n==="svg";e==="class"?dx(t,i,o):e==="style"?fx(t,s,i):ga(e)?Zd(e)||gx(t,e,s,i,r):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):_x(t,e,i,o))?(Qh(t,e,i),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Xh(t,e,i,o,r,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!St(i))?Qh(t,Is(e),i,r,e):(e==="true-value"?t._trueValue=i:e==="false-value"&&(t._falseValue=i),Xh(t,e,i,o))};function _x(t,e,s,i){if(i)return!!(e==="innerHTML"||e==="textContent"||e in t&&tf(e)&&ze(s));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const n=t.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return tf(e)&&St(s)?!1:e in t}const en=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Be(e)?s=>wl(e,s):e};function Sx(t){t.target.composing=!0}function sf(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Rs=Symbol("_assign"),_n={created(t,{modifiers:{lazy:e,trim:s,number:i}},n){t[Rs]=en(n);const r=i||n.props&&n.props.type==="number";Vi(t,e?"change":"input",o=>{if(o.target.composing)return;let l=t.value;s&&(l=l.trim()),r&&(l=Ll(l)),t[Rs](l)}),s&&Vi(t,"change",()=>{t.value=t.value.trim()}),e||(Vi(t,"compositionstart",Sx),Vi(t,"compositionend",sf),Vi(t,"change",sf))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:s,modifiers:{lazy:i,trim:n,number:r}},o){if(t[Rs]=en(o),t.composing)return;const l=(r||t.type==="number")&&!/^0\d/.test(t.value)?Ll(t.value):t.value,a=e??"";l!==a&&(document.activeElement===t&&t.type!=="range"&&(i&&e===s||n&&t.value.trim()===a)||(t.value=a))}},Cx={deep:!0,created(t,e,s){t[Rs]=en(s),Vi(t,"change",()=>{const i=t._modelValue,n=dr(t),r=t.checked,o=t[Rs];if(Be(i)){const l=sc(i,n),a=l!==-1;if(r&&!a)o(i.concat(n));else if(!r&&a){const d=[...i];d.splice(l,1),o(d)}}else if(wr(i)){const l=new Set(i);r?l.add(n):l.delete(n),o(l)}else o(Eg(t,r))})},mounted:nf,beforeUpdate(t,e,s){t[Rs]=en(s),nf(t,e,s)}};function nf(t,{value:e,oldValue:s},i){t._modelValue=e;let n;if(Be(e))n=sc(e,i.props.value)>-1;else if(wr(e))n=e.has(i.props.value);else{if(e===s)return;n=$n(e,Eg(t,!0))}t.checked!==n&&(t.checked=n)}const Ax={created(t,{value:e},s){t.checked=$n(e,s.props.value),t[Rs]=en(s),Vi(t,"change",()=>{t[Rs](dr(t))})},beforeUpdate(t,{value:e,oldValue:s},i){t[Rs]=en(i),e!==s&&(t.checked=$n(e,i.props.value))}},$g={deep:!0,created(t,{value:e,modifiers:{number:s}},i){const n=wr(e);Vi(t,"change",()=>{const r=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>s?Ll(dr(o)):dr(o));t[Rs](t.multiple?n?new Set(r):r:r[0]),t._assigning=!0,Mn(()=>{t._assigning=!1})}),t[Rs]=en(i)},mounted(t,{value:e}){rf(t,e)},beforeUpdate(t,e,s){t[Rs]=en(s)},updated(t,{value:e}){t._assigning||rf(t,e)}};function rf(t,e){const s=t.multiple,i=Be(e);if(!(s&&!i&&!wr(e))){for(let n=0,r=t.options.length;n<r;n++){const o=t.options[n],l=dr(o);if(s)if(i){const a=typeof l;a==="string"||a==="number"?o.selected=e.some(d=>String(d)===String(l)):o.selected=sc(e,l)>-1}else o.selected=e.has(l);else if($n(dr(o),e)){t.selectedIndex!==n&&(t.selectedIndex=n);return}}!s&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function dr(t){return"_value"in t?t._value:t.value}function Eg(t,e){const s=e?"_trueValue":"_falseValue";return s in t?t[s]:e}const Vx={created(t,e,s){Xo(t,e,s,null,"created")},mounted(t,e,s){Xo(t,e,s,null,"mounted")},beforeUpdate(t,e,s,i){Xo(t,e,s,i,"beforeUpdate")},updated(t,e,s,i){Xo(t,e,s,i,"updated")}};function Mx(t,e){switch(t){case"SELECT":return $g;case"TEXTAREA":return _n;default:switch(e){case"checkbox":return Cx;case"radio":return Ax;default:return _n}}}function Xo(t,e,s,i,n){const o=Mx(t.tagName,s.props&&s.props.type)[n];o&&o(t,e,s,i)}const Dx=["ctrl","shift","alt","meta"],Tx={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>Dx.some(s=>t[`${s}Key`]&&!e.includes(s))},Kt=(t,e)=>{const s=t._withMods||(t._withMods={}),i=e.join(".");return s[i]||(s[i]=((n,...r)=>{for(let o=0;o<e.length;o++){const l=Tx[e[o]];if(l&&l(n,e))return}return t(n,...r)}))},$x=Bt({patchProp:wx},ix);let of;function Ex(){return of||(of=Vb($x))}const Ox=((...t)=>{const e=Ex().createApp(...t),{mount:s}=e;return e.mount=i=>{const n=jx(i);if(!n)return;const r=e._component;!ze(r)&&!r.render&&!r.template&&(r.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const o=s(n,!1,Px(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),o},e});function Px(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function jx(t){return St(t)?document.querySelector(t):t}const Rx="/framework-logo.png";/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const Hn=typeof document<"u";function Og(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Lx(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&Og(t.default)}const ot=Object.assign;function ou(t,e){const s={};for(const i in e){const n=e[i];s[i]=Ys(n)?n.map(t):t(n)}return s}const Xr=()=>{},Ys=Array.isArray;function lf(t,e){const s={};for(const i in t)s[i]=i in e?e[i]:t[i];return s}const Pg=/#/g,Bx=/&/g,Ix=/\//g,Nx=/=/g,Ux=/\?/g,jg=/\+/g,zx=/%5B/g,Fx=/%5D/g,Rg=/%5E/g,Hx=/%60/g,Lg=/%7B/g,Wx=/%7C/g,Bg=/%7D/g,qx=/%20/g;function vc(t){return t==null?"":encodeURI(""+t).replace(Wx,"|").replace(zx,"[").replace(Fx,"]")}function Kx(t){return vc(t).replace(Lg,"{").replace(Bg,"}").replace(Rg,"^")}function Xu(t){return vc(t).replace(jg,"%2B").replace(qx,"+").replace(Pg,"%23").replace(Bx,"%26").replace(Hx,"`").replace(Lg,"{").replace(Bg,"}").replace(Rg,"^")}function Gx(t){return Xu(t).replace(Nx,"%3D")}function Jx(t){return vc(t).replace(Pg,"%23").replace(Ux,"%3F")}function Yx(t){return Jx(t).replace(Ix,"%2F")}function mo(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const Xx=/\/$/,Qx=t=>t.replace(Xx,"");function lu(t,e,s="/"){let i,n={},r="",o="";const l=e.indexOf("#");let a=e.indexOf("?");return a=l>=0&&a>l?-1:a,a>=0&&(i=e.slice(0,a),r=e.slice(a,l>0?l:e.length),n=t(r.slice(1))),l>=0&&(i=i||e.slice(0,l),o=e.slice(l,e.length)),i=sk(i??e,s),{fullPath:i+r+o,path:i,query:n,hash:mo(o)}}function Zx(t,e){const s=e.query?t(e.query):"";return e.path+(s&&"?")+s+(e.hash||"")}function af(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function ek(t,e,s){const i=e.matched.length-1,n=s.matched.length-1;return i>-1&&i===n&&cr(e.matched[i],s.matched[n])&&Ig(e.params,s.params)&&t(e.query)===t(s.query)&&e.hash===s.hash}function cr(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Ig(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const s in t)if(!tk(t[s],e[s]))return!1;return!0}function tk(t,e){return Ys(t)?uf(t,e):Ys(e)?uf(e,t):t===e}function uf(t,e){return Ys(e)?t.length===e.length&&t.every((s,i)=>s===e[i]):t.length===1&&t[0]===e}function sk(t,e){if(t.startsWith("/"))return t;if(!t)return e;const s=e.split("/"),i=t.split("/"),n=i[i.length-1];(n===".."||n===".")&&i.push("");let r=s.length-1,o,l;for(o=0;o<i.length;o++)if(l=i[o],l!==".")if(l==="..")r>1&&r--;else break;return s.slice(0,r).join("/")+"/"+i.slice(o).join("/")}const Ii={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Qu=(function(t){return t.pop="pop",t.push="push",t})({}),au=(function(t){return t.back="back",t.forward="forward",t.unknown="",t})({});function ik(t){if(!t)if(Hn){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),Qx(t)}const nk=/^[^#]+#/;function rk(t,e){return t.replace(nk,"#")+e}function ok(t,e){const s=document.documentElement.getBoundingClientRect(),i=t.getBoundingClientRect();return{behavior:e.behavior,left:i.left-s.left-(e.left||0),top:i.top-s.top-(e.top||0)}}const Ma=()=>({left:window.scrollX,top:window.scrollY});function lk(t){let e;if("el"in t){const s=t.el,i=typeof s=="string"&&s.startsWith("#"),n=typeof s=="string"?i?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!n)return;e=ok(n,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function df(t,e){return(history.state?history.state.position-e:-1)+t}const Zu=new Map;function ak(t,e){Zu.set(t,e)}function uk(t){const e=Zu.get(t);return Zu.delete(t),e}function dk(t){return typeof t=="string"||t&&typeof t=="object"}function Ng(t){return typeof t=="string"||typeof t=="symbol"}let Ct=(function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t})({});const Ug=Symbol("");Ct.MATCHER_NOT_FOUND+"",Ct.NAVIGATION_GUARD_REDIRECT+"",Ct.NAVIGATION_ABORTED+"",Ct.NAVIGATION_CANCELLED+"",Ct.NAVIGATION_DUPLICATED+"";function hr(t,e){return ot(new Error,{type:t,[Ug]:!0},e)}function xi(t,e){return t instanceof Error&&Ug in t&&(e==null||!!(t.type&e))}const ck=["params","query","hash"];function hk(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const s of ck)s in t&&(e[s]=t[s]);return JSON.stringify(e,null,2)}function fk(t){const e={};if(t===""||t==="?")return e;const s=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<s.length;++i){const n=s[i].replace(jg," "),r=n.indexOf("="),o=mo(r<0?n:n.slice(0,r)),l=r<0?null:mo(n.slice(r+1));if(o in e){let a=e[o];Ys(a)||(a=e[o]=[a]),a.push(l)}else e[o]=l}return e}function cf(t){let e="";for(let s in t){const i=t[s];if(s=Gx(s),i==null){i!==void 0&&(e+=(e.length?"&":"")+s);continue}(Ys(i)?i.map(n=>n&&Xu(n)):[i&&Xu(i)]).forEach(n=>{n!==void 0&&(e+=(e.length?"&":"")+s,n!=null&&(e+="="+n))})}return e}function pk(t){const e={};for(const s in t){const i=t[s];i!==void 0&&(e[s]=Ys(i)?i.map(n=>n==null?null:""+n):i==null?i:""+i)}return e}const mk=Symbol(""),hf=Symbol(""),Da=Symbol(""),yc=Symbol(""),ed=Symbol("");function Er(){let t=[];function e(i){return t.push(i),()=>{const n=t.indexOf(i);n>-1&&t.splice(n,1)}}function s(){t=[]}return{add:e,list:()=>t.slice(),reset:s}}function zi(t,e,s,i,n,r=o=>o()){const o=i&&(i.enterCallbacks[n]=i.enterCallbacks[n]||[]);return()=>new Promise((l,a)=>{const d=c=>{c===!1?a(hr(Ct.NAVIGATION_ABORTED,{from:s,to:e})):c instanceof Error?a(c):dk(c)?a(hr(Ct.NAVIGATION_GUARD_REDIRECT,{from:e,to:c})):(o&&i.enterCallbacks[n]===o&&typeof c=="function"&&o.push(c),l())},u=r(()=>t.call(i&&i.instances[n],e,s,d));let f=Promise.resolve(u);t.length<3&&(f=f.then(d)),f.catch(c=>a(c))})}function uu(t,e,s,i,n=r=>r()){const r=[];for(const o of t)for(const l in o.components){let a=o.components[l];if(!(e!=="beforeRouteEnter"&&!o.instances[l]))if(Og(a)){const d=(a.__vccOpts||a)[e];d&&r.push(zi(d,s,i,o,l,n))}else{let d=a();r.push(()=>d.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${l}" at "${o.path}"`);const f=Lx(u)?u.default:u;o.mods[l]=u,o.components[l]=f;const c=(f.__vccOpts||f)[e];return c&&zi(c,s,i,o,l,n)()}))}}return r}function gk(t,e){const s=[],i=[],n=[],r=Math.max(e.matched.length,t.matched.length);for(let o=0;o<r;o++){const l=e.matched[o];l&&(t.matched.find(d=>cr(d,l))?i.push(l):s.push(l));const a=t.matched[o];a&&(e.matched.find(d=>cr(d,a))||n.push(a))}return[s,i,n]}/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let vk=()=>location.protocol+"//"+location.host;function zg(t,e){const{pathname:s,search:i,hash:n}=e,r=t.indexOf("#");if(r>-1){let o=n.includes(t.slice(r))?t.slice(r).length:1,l=n.slice(o);return l[0]!=="/"&&(l="/"+l),af(l,"")}return af(s,t)+i+n}function yk(t,e,s,i){let n=[],r=[],o=null;const l=({state:c})=>{const p=zg(t,location),k=s.value,C=e.value;let A=0;if(c){if(s.value=p,e.value=c,o&&o===k){o=null;return}A=C?c.position-C.position:0}else i(p);n.forEach(V=>{V(s.value,k,{delta:A,type:Qu.pop,direction:A?A>0?au.forward:au.back:au.unknown})})};function a(){o=s.value}function d(c){n.push(c);const p=()=>{const k=n.indexOf(c);k>-1&&n.splice(k,1)};return r.push(p),p}function u(){if(document.visibilityState==="hidden"){const{history:c}=window;if(!c.state)return;c.replaceState(ot({},c.state,{scroll:Ma()}),"")}}function f(){for(const c of r)c();r=[],window.removeEventListener("popstate",l),window.removeEventListener("pagehide",u),document.removeEventListener("visibilitychange",u)}return window.addEventListener("popstate",l),window.addEventListener("pagehide",u),document.addEventListener("visibilitychange",u),{pauseListeners:a,listen:d,destroy:f}}function ff(t,e,s,i=!1,n=!1){return{back:t,current:e,forward:s,replaced:i,position:window.history.length,scroll:n?Ma():null}}function bk(t){const{history:e,location:s}=window,i={value:zg(t,s)},n={value:e.state};n.value||r(i.value,{back:null,current:i.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function r(a,d,u){const f=t.indexOf("#"),c=f>-1?(s.host&&document.querySelector("base")?t:t.slice(f))+a:vk()+t+a;try{e[u?"replaceState":"pushState"](d,"",c),n.value=d}catch(p){console.error(p),s[u?"replace":"assign"](c)}}function o(a,d){r(a,ot({},e.state,ff(n.value.back,a,n.value.forward,!0),d,{position:n.value.position}),!0),i.value=a}function l(a,d){const u=ot({},n.value,e.state,{forward:a,scroll:Ma()});r(u.current,u,!0),r(a,ot({},ff(i.value,a,null),{position:u.position+1},d),!1),i.value=a}return{location:i,state:n,push:l,replace:o}}function xk(t){t=ik(t);const e=bk(t),s=yk(t,e.state,e.location,e.replace);function i(r,o=!0){o||s.pauseListeners(),history.go(r)}const n=ot({location:"",base:t,go:i,createHref:rk.bind(null,t)},e,s);return Object.defineProperty(n,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(n,"state",{enumerable:!0,get:()=>e.state.value}),n}function kk(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),xk(t)}let Sn=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t})({});var Ot=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t})(Ot||{});const wk={type:Sn.Static,value:""},_k=/[a-zA-Z0-9_]/;function Sk(t){if(!t)return[[]];if(t==="/")return[[wk]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(p){throw new Error(`ERR (${s})/"${d}": ${p}`)}let s=Ot.Static,i=s;const n=[];let r;function o(){r&&n.push(r),r=[]}let l=0,a,d="",u="";function f(){d&&(s===Ot.Static?r.push({type:Sn.Static,value:d}):s===Ot.Param||s===Ot.ParamRegExp||s===Ot.ParamRegExpEnd?(r.length>1&&(a==="*"||a==="+")&&e(`A repeatable param (${d}) must be alone in its segment. eg: '/:ids+.`),r.push({type:Sn.Param,value:d,regexp:u,repeatable:a==="*"||a==="+",optional:a==="*"||a==="?"})):e("Invalid state to consume buffer"),d="")}function c(){d+=a}for(;l<t.length;){if(a=t[l++],a==="\\"&&s!==Ot.ParamRegExp){i=s,s=Ot.EscapeNext;continue}switch(s){case Ot.Static:a==="/"?(d&&f(),o()):a===":"?(f(),s=Ot.Param):c();break;case Ot.EscapeNext:c(),s=i;break;case Ot.Param:a==="("?s=Ot.ParamRegExp:_k.test(a)?c():(f(),s=Ot.Static,a!=="*"&&a!=="?"&&a!=="+"&&l--);break;case Ot.ParamRegExp:a===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+a:s=Ot.ParamRegExpEnd:u+=a;break;case Ot.ParamRegExpEnd:f(),s=Ot.Static,a!=="*"&&a!=="?"&&a!=="+"&&l--,u="";break;default:e("Unknown state");break}}return s===Ot.ParamRegExp&&e(`Unfinished custom RegExp for param "${d}"`),f(),o(),n}const pf="[^/]+?",Ck={sensitive:!1,strict:!1,start:!0,end:!0};var ls=(function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t})(ls||{});const Ak=/[.+*?^${}()[\]/\\]/g;function Vk(t,e){const s=ot({},Ck,e),i=[];let n=s.start?"^":"";const r=[];for(const d of t){const u=d.length?[]:[ls.Root];s.strict&&!d.length&&(n+="/");for(let f=0;f<d.length;f++){const c=d[f];let p=ls.Segment+(s.sensitive?ls.BonusCaseSensitive:0);if(c.type===Sn.Static)f||(n+="/"),n+=c.value.replace(Ak,"\\$&"),p+=ls.Static;else if(c.type===Sn.Param){const{value:k,repeatable:C,optional:A,regexp:V}=c;r.push({name:k,repeatable:C,optional:A});const R=V||pf;if(R!==pf){p+=ls.BonusCustomRegExp;try{`${R}`}catch(z){throw new Error(`Invalid custom RegExp for param "${k}" (${R}): `+z.message)}}let P=C?`((?:${R})(?:/(?:${R}))*)`:`(${R})`;f||(P=A&&d.length<2?`(?:/${P})`:"/"+P),A&&(P+="?"),n+=P,p+=ls.Dynamic,A&&(p+=ls.BonusOptional),C&&(p+=ls.BonusRepeatable),R===".*"&&(p+=ls.BonusWildcard)}u.push(p)}i.push(u)}if(s.strict&&s.end){const d=i.length-1;i[d][i[d].length-1]+=ls.BonusStrict}s.strict||(n+="/?"),s.end?n+="$":s.strict&&!n.endsWith("/")&&(n+="(?:/|$)");const o=new RegExp(n,s.sensitive?"":"i");function l(d){const u=d.match(o),f={};if(!u)return null;for(let c=1;c<u.length;c++){const p=u[c]||"",k=r[c-1];f[k.name]=p&&k.repeatable?p.split("/"):p}return f}function a(d){let u="",f=!1;for(const c of t){(!f||!u.endsWith("/"))&&(u+="/"),f=!1;for(const p of c)if(p.type===Sn.Static)u+=p.value;else if(p.type===Sn.Param){const{value:k,repeatable:C,optional:A}=p,V=k in d?d[k]:"";if(Ys(V)&&!C)throw new Error(`Provided param "${k}" is an array but it is not repeatable (* or + modifiers)`);const R=Ys(V)?V.join("/"):V;if(!R)if(A)c.length<2&&(u.endsWith("/")?u=u.slice(0,-1):f=!0);else throw new Error(`Missing required param "${k}"`);u+=R}}return u||"/"}return{re:o,score:i,keys:r,parse:l,stringify:a}}function Mk(t,e){let s=0;for(;s<t.length&&s<e.length;){const i=e[s]-t[s];if(i)return i;s++}return t.length<e.length?t.length===1&&t[0]===ls.Static+ls.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===ls.Static+ls.Segment?1:-1:0}function Fg(t,e){let s=0;const i=t.score,n=e.score;for(;s<i.length&&s<n.length;){const r=Mk(i[s],n[s]);if(r)return r;s++}if(Math.abs(n.length-i.length)===1){if(mf(i))return 1;if(mf(n))return-1}return n.length-i.length}function mf(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const Dk={strict:!1,end:!0,sensitive:!1};function Tk(t,e,s){const i=Vk(Sk(t.path),s),n=ot(i,{record:t,parent:e,children:[],alias:[]});return e&&!n.record.aliasOf==!e.record.aliasOf&&e.children.push(n),n}function $k(t,e){const s=[],i=new Map;e=lf(Dk,e);function n(f){return i.get(f)}function r(f,c,p){const k=!p,C=vf(f);C.aliasOf=p&&p.record;const A=lf(e,f),V=[C];if("alias"in f){const z=typeof f.alias=="string"?[f.alias]:f.alias;for(const H of z)V.push(vf(ot({},C,{components:p?p.record.components:C.components,path:H,aliasOf:p?p.record:C})))}let R,P;for(const z of V){const{path:H}=z;if(c&&H[0]!=="/"){const B=c.record.path,M=B[B.length-1]==="/"?"":"/";z.path=c.record.path+(H&&M+H)}if(R=Tk(z,c,A),p?p.alias.push(R):(P=P||R,P!==R&&P.alias.push(R),k&&f.name&&!yf(R)&&o(f.name)),Hg(R)&&a(R),C.children){const B=C.children;for(let M=0;M<B.length;M++)r(B[M],R,p&&p.children[M])}p=p||R}return P?()=>{o(P)}:Xr}function o(f){if(Ng(f)){const c=i.get(f);c&&(i.delete(f),s.splice(s.indexOf(c),1),c.children.forEach(o),c.alias.forEach(o))}else{const c=s.indexOf(f);c>-1&&(s.splice(c,1),f.record.name&&i.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function l(){return s}function a(f){const c=Pk(f,s);s.splice(c,0,f),f.record.name&&!yf(f)&&i.set(f.record.name,f)}function d(f,c){let p,k={},C,A;if("name"in f&&f.name){if(p=i.get(f.name),!p)throw hr(Ct.MATCHER_NOT_FOUND,{location:f});A=p.record.name,k=ot(gf(c.params,p.keys.filter(P=>!P.optional).concat(p.parent?p.parent.keys.filter(P=>P.optional):[]).map(P=>P.name)),f.params&&gf(f.params,p.keys.map(P=>P.name))),C=p.stringify(k)}else if(f.path!=null)C=f.path,p=s.find(P=>P.re.test(C)),p&&(k=p.parse(C),A=p.record.name);else{if(p=c.name?i.get(c.name):s.find(P=>P.re.test(c.path)),!p)throw hr(Ct.MATCHER_NOT_FOUND,{location:f,currentLocation:c});A=p.record.name,k=ot({},c.params,f.params),C=p.stringify(k)}const V=[];let R=p;for(;R;)V.unshift(R.record),R=R.parent;return{name:A,path:C,params:k,matched:V,meta:Ok(V)}}t.forEach(f=>r(f));function u(){s.length=0,i.clear()}return{addRoute:r,resolve:d,removeRoute:o,clearRoutes:u,getRoutes:l,getRecordMatcher:n}}function gf(t,e){const s={};for(const i of e)i in t&&(s[i]=t[i]);return s}function vf(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:Ek(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function Ek(t){const e={},s=t.props||!1;if("component"in t)e.default=s;else for(const i in t.components)e[i]=typeof s=="object"?s[i]:s;return e}function yf(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function Ok(t){return t.reduce((e,s)=>ot(e,s.meta),{})}function Pk(t,e){let s=0,i=e.length;for(;s!==i;){const r=s+i>>1;Fg(t,e[r])<0?i=r:s=r+1}const n=jk(t);return n&&(i=e.lastIndexOf(n,i-1)),i}function jk(t){let e=t;for(;e=e.parent;)if(Hg(e)&&Fg(t,e)===0)return e}function Hg({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function bf(t){const e=Ks(Da),s=Ks(yc),i=oe(()=>{const a=at(t.to);return e.resolve(a)}),n=oe(()=>{const{matched:a}=i.value,{length:d}=a,u=a[d-1],f=s.matched;if(!u||!f.length)return-1;const c=f.findIndex(cr.bind(null,u));if(c>-1)return c;const p=xf(a[d-2]);return d>1&&xf(u)===p&&f[f.length-1].path!==p?f.findIndex(cr.bind(null,a[d-2])):c}),r=oe(()=>n.value>-1&&Nk(s.params,i.value.params)),o=oe(()=>n.value>-1&&n.value===s.matched.length-1&&Ig(s.params,i.value.params));function l(a={}){if(Ik(a)){const d=e[at(t.replace)?"replace":"push"](at(t.to)).catch(Xr);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>d),d}return Promise.resolve()}return{route:i,href:oe(()=>i.value.href),isActive:r,isExactActive:o,navigate:l}}function Rk(t){return t.length===1?t[0]:t}const Lk=Zm({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:bf,setup(t,{slots:e}){const s=Hs(bf(t)),{options:i}=Ks(Da),n=oe(()=>({[kf(t.activeClass,i.linkActiveClass,"router-link-active")]:s.isActive,[kf(t.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const r=e.default&&Rk(e.default(s));return t.custom?r:Dt("a",{"aria-current":s.isExactActive?t.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:n.value},r)}}}),Bk=Lk;function Ik(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function Nk(t,e){for(const s in e){const i=e[s],n=t[s];if(typeof i=="string"){if(i!==n)return!1}else if(!Ys(n)||n.length!==i.length||i.some((r,o)=>r!==n[o]))return!1}return!0}function xf(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const kf=(t,e,s)=>t??e??s,Uk=Zm({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:s}){const i=Ks(ed),n=oe(()=>t.route||i.value),r=Ks(hf,0),o=oe(()=>{let d=at(r);const{matched:u}=n.value;let f;for(;(f=u[d])&&!f.components;)d++;return d}),l=oe(()=>n.value.matched[o.value]);Sl(hf,oe(()=>o.value+1)),Sl(mk,l),Sl(ed,n);const a=ve();return Ye(()=>[a.value,l.value,t.name],([d,u,f],[c,p,k])=>{u&&(u.instances[f]=d,p&&p!==u&&d&&d===c&&(u.leaveGuards.size||(u.leaveGuards=p.leaveGuards),u.updateGuards.size||(u.updateGuards=p.updateGuards))),d&&u&&(!p||!cr(u,p)||!c)&&(u.enterCallbacks[f]||[]).forEach(C=>C(d))},{flush:"post"}),()=>{const d=n.value,u=t.name,f=l.value,c=f&&f.components[u];if(!c)return wf(s.default,{Component:c,route:d});const p=f.props[u],k=p?p===!0?d.params:typeof p=="function"?p(d):p:null,A=Dt(c,ot({},k,e,{onVnodeUnmounted:V=>{V.component.isUnmounted&&(f.instances[u]=null)},ref:a}));return wf(s.default,{Component:A,route:d})||A}}});function wf(t,e){if(!t)return null;const s=t(e);return s.length===1?s[0]:s}const zk=Uk;function Fk(t){const e=$k(t.routes,t),s=t.parseQuery||fk,i=t.stringifyQuery||cf,n=t.history,r=Er(),o=Er(),l=Er(),a=N1(Ii);let d=Ii;Hn&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=ou.bind(null,ee=>""+ee),f=ou.bind(null,Yx),c=ou.bind(null,mo);function p(ee,Me){let $,Oe;return Ng(ee)?($=e.getRecordMatcher(ee),Oe=Me):Oe=ee,e.addRoute(Oe,$)}function k(ee){const Me=e.getRecordMatcher(ee);Me&&e.removeRoute(Me)}function C(){return e.getRoutes().map(ee=>ee.record)}function A(ee){return!!e.getRecordMatcher(ee)}function V(ee,Me){if(Me=ot({},Me||a.value),typeof ee=="string"){const F=lu(s,ee,Me.path),te=e.resolve({path:F.path},Me),ne=n.createHref(F.fullPath);return ot(F,te,{params:c(te.params),hash:mo(F.hash),redirectedFrom:void 0,href:ne})}let $;if(ee.path!=null)$=ot({},ee,{path:lu(s,ee.path,Me.path).path});else{const F=ot({},ee.params);for(const te in F)F[te]==null&&delete F[te];$=ot({},ee,{params:f(F)}),Me.params=f(Me.params)}const Oe=e.resolve($,Me),Fe=ee.hash||"";Oe.params=u(c(Oe.params));const D=Zx(i,ot({},ee,{hash:Kx(Fe),path:Oe.path})),E=n.createHref(D);return ot({fullPath:D,hash:Fe,query:i===cf?pk(ee.query):ee.query||{}},Oe,{redirectedFrom:void 0,href:E})}function R(ee){return typeof ee=="string"?lu(s,ee,a.value.path):ot({},ee)}function P(ee,Me){if(d!==ee)return hr(Ct.NAVIGATION_CANCELLED,{from:Me,to:ee})}function z(ee){return M(ee)}function H(ee){return z(ot(R(ee),{replace:!0}))}function B(ee,Me){const $=ee.matched[ee.matched.length-1];if($&&$.redirect){const{redirect:Oe}=$;let Fe=typeof Oe=="function"?Oe(ee,Me):Oe;return typeof Fe=="string"&&(Fe=Fe.includes("?")||Fe.includes("#")?Fe=R(Fe):{path:Fe},Fe.params={}),ot({query:ee.query,hash:ee.hash,params:Fe.path!=null?{}:ee.params},Fe)}}function M(ee,Me){const $=d=V(ee),Oe=a.value,Fe=ee.state,D=ee.force,E=ee.replace===!0,F=B($,Oe);if(F)return M(ot(R(F),{state:typeof F=="object"?ot({},Fe,F.state):Fe,force:D,replace:E}),Me||$);const te=$;te.redirectedFrom=Me;let ne;return!D&&ek(i,Oe,$)&&(ne=hr(Ct.NAVIGATION_DUPLICATED,{to:te,from:Oe}),Y(Oe,Oe,!0,!1)),(ne?Promise.resolve(ne):he(te,Oe)).catch(se=>xi(se)?xi(se,Ct.NAVIGATION_GUARD_REDIRECT)?se:w(se):b(se,te,Oe)).then(se=>{if(se){if(xi(se,Ct.NAVIGATION_GUARD_REDIRECT))return M(ot({replace:E},R(se.to),{state:typeof se.to=="object"?ot({},Fe,se.to.state):Fe,force:D}),Me||te)}else se=N(te,Oe,!0,E,Fe);return ie(te,Oe,se),se})}function J(ee,Me){const $=P(ee,Me);return $?Promise.reject($):Promise.resolve()}function X(ee){const Me=We.values().next().value;return Me&&typeof Me.runWithContext=="function"?Me.runWithContext(ee):ee()}function he(ee,Me){let $;const[Oe,Fe,D]=gk(ee,Me);$=uu(Oe.reverse(),"beforeRouteLeave",ee,Me);for(const F of Oe)F.leaveGuards.forEach(te=>{$.push(zi(te,ee,Me))});const E=J.bind(null,ee,Me);return $.push(E),tt($).then(()=>{$=[];for(const F of r.list())$.push(zi(F,ee,Me));return $.push(E),tt($)}).then(()=>{$=uu(Fe,"beforeRouteUpdate",ee,Me);for(const F of Fe)F.updateGuards.forEach(te=>{$.push(zi(te,ee,Me))});return $.push(E),tt($)}).then(()=>{$=[];for(const F of D)if(F.beforeEnter)if(Ys(F.beforeEnter))for(const te of F.beforeEnter)$.push(zi(te,ee,Me));else $.push(zi(F.beforeEnter,ee,Me));return $.push(E),tt($)}).then(()=>(ee.matched.forEach(F=>F.enterCallbacks={}),$=uu(D,"beforeRouteEnter",ee,Me,X),$.push(E),tt($))).then(()=>{$=[];for(const F of o.list())$.push(zi(F,ee,Me));return $.push(E),tt($)}).catch(F=>xi(F,Ct.NAVIGATION_CANCELLED)?F:Promise.reject(F))}function ie(ee,Me,$){l.list().forEach(Oe=>X(()=>Oe(ee,Me,$)))}function N(ee,Me,$,Oe,Fe){const D=P(ee,Me);if(D)return D;const E=Me===Ii,F=Hn?history.state:{};$&&(Oe||E?n.replace(ee.fullPath,ot({scroll:E&&F&&F.scroll},Fe)):n.push(ee.fullPath,Fe)),a.value=ee,Y(ee,Me,$,E),w()}let ae;function re(){ae||(ae=n.listen((ee,Me,$)=>{if(!Ee.listening)return;const Oe=V(ee),Fe=B(Oe,Ee.currentRoute.value);if(Fe){M(ot(Fe,{replace:!0,force:!0}),Oe).catch(Xr);return}d=Oe;const D=a.value;Hn&&ak(df(D.fullPath,$.delta),Ma()),he(Oe,D).catch(E=>xi(E,Ct.NAVIGATION_ABORTED|Ct.NAVIGATION_CANCELLED)?E:xi(E,Ct.NAVIGATION_GUARD_REDIRECT)?(M(ot(R(E.to),{force:!0}),Oe).then(F=>{xi(F,Ct.NAVIGATION_ABORTED|Ct.NAVIGATION_DUPLICATED)&&!$.delta&&$.type===Qu.pop&&n.go(-1,!1)}).catch(Xr),Promise.reject()):($.delta&&n.go(-$.delta,!1),b(E,Oe,D))).then(E=>{E=E||N(Oe,D,!1),E&&($.delta&&!xi(E,Ct.NAVIGATION_CANCELLED)?n.go(-$.delta,!1):$.type===Qu.pop&&xi(E,Ct.NAVIGATION_ABORTED|Ct.NAVIGATION_DUPLICATED)&&n.go(-1,!1)),ie(Oe,D,E)}).catch(Xr)}))}let ke=Er(),K=Er(),T;function b(ee,Me,$){w(ee);const Oe=K.list();return Oe.length?Oe.forEach(Fe=>Fe(ee,Me,$)):console.error(ee),Promise.reject(ee)}function m(){return T&&a.value!==Ii?Promise.resolve():new Promise((ee,Me)=>{ke.add([ee,Me])})}function w(ee){return T||(T=!ee,re(),ke.list().forEach(([Me,$])=>ee?$(ee):Me()),ke.reset()),ee}function Y(ee,Me,$,Oe){const{scrollBehavior:Fe}=t;if(!Hn||!Fe)return Promise.resolve();const D=!$&&uk(df(ee.fullPath,0))||(Oe||!$)&&history.state&&history.state.scroll||null;return Mn().then(()=>Fe(ee,Me,D)).then(E=>E&&lk(E)).catch(E=>b(E,ee,Me))}const Z=ee=>n.go(ee);let qe;const We=new Set,Ee={currentRoute:a,listening:!0,addRoute:p,removeRoute:k,clearRoutes:e.clearRoutes,hasRoute:A,getRoutes:C,resolve:V,options:t,push:z,replace:H,go:Z,back:()=>Z(-1),forward:()=>Z(1),beforeEach:r.add,beforeResolve:o.add,afterEach:l.add,onError:K.add,isReady:m,install(ee){ee.component("RouterLink",Bk),ee.component("RouterView",zk),ee.config.globalProperties.$router=Ee,Object.defineProperty(ee.config.globalProperties,"$route",{enumerable:!0,get:()=>at(a)}),Hn&&!qe&&a.value===Ii&&(qe=!0,z(n.location).catch(Oe=>{}));const Me={};for(const Oe in Ii)Object.defineProperty(Me,Oe,{get:()=>a.value[Oe],enumerable:!0});ee.provide(Da,Ee),ee.provide(yc,jm(Me)),ee.provide(ed,a);const $=ee.unmount;We.add(ee),ee.unmount=function(){We.delete(ee),We.size<1&&(d=Ii,ae&&ae(),ae=null,a.value=Ii,qe=!1,T=!1),$()}}};function tt(ee){return ee.reduce((Me,$)=>Me.then(()=>X($)),Promise.resolve())}return Ee}function Ta(){return Ks(Da)}function Sr(t){return Ks(yc)}const ki=ve(!1);function Hk(){const t=()=>{ki.value=!ki.value},e=()=>{ki.value=!0},s=()=>{ki.value=!1};return Ye(ki,i=>{i?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},{immediate:!1}),es(()=>{const i=localStorage.getItem("theme");i?ki.value=i==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches&&(ki.value=!0),ki.value?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}),{isDark:ki,toggle:t,enable:e,disable:s}}function Wk(t,e){return g(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function qk(t,e){return g(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})])}function Kk(t,e){return g(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125"})])}function bc(t,e){return g(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}function xc(t,e){return g(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"})])}function td(t,e){return g(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}function Gk(t,e){return g(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})])}function Jk(t,e){return g(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"})])}function Yk(t,e){return g(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}function Gl(t,e){return g(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"})])}function $a(t,e){return g(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"})])}function _f(t,e){return g(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"})])}function Xk(t,e){return g(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})])}function Sf(t,e){return g(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21.75 17.25v-.228a4.5 4.5 0 0 0-.12-1.03l-2.268-9.64a3.375 3.375 0 0 0-3.285-2.602H7.923a3.375 3.375 0 0 0-3.285 2.602l-2.268 9.64a4.5 4.5 0 0 0-.12 1.03v.228m19.5 0a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3m19.5 0a3 3 0 0 0-3-3H5.25a3 3 0 0 0-3 3m16.5 0h.008v.008h-.008v-.008Zm-3 0h.008v.008h-.008v-.008Z"})])}function Qk(t,e){return g(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}const Zk={key:0,class:"pointer-events-auto w-full max-w-sm rounded-lg bg-white shadow-lg outline-1 outline-black/5 dark:bg-gray-800 dark:-outline-offset-1 dark:outline-white/10"},ew={class:"p-4"},tw={key:0,class:"shrink-0"},sw={key:0,class:"w-0 flex-1 text-sm font-medium text-gray-900 dark:text-white"},iw={class:"text-sm font-medium text-gray-900 dark:text-white"},nw={key:0,class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},rw={__name:"Toast",props:{title:{type:String,required:!0},description:{type:String,default:null},type:{type:String,default:"success",validator:t=>["success","error","warning","info"].includes(t)},variant:{type:String,default:"regular",validator:t=>["regular","condensed"].includes(t)},action:{type:String,default:null},duration:{type:Number,default:5e3},autoClose:{type:Boolean,default:!0}},emits:["close","action"],setup(t,{emit:e}){const s=t,i=e,n=ve(!1);let r=null;const o=oe(()=>{const d={success:Wk,error:Qk,warning:Gk,info:$a},u={success:"text-sky-400",error:"text-red-400",warning:"text-yellow-400",info:"text-blue-400"},f=d[s.type],c=u[s.type];return()=>Dt(f,{class:`size-6 ${c}`})}),l=()=>{n.value=!1,r&&clearTimeout(r),setTimeout(()=>i("close"),200)},a=()=>{i("action"),l()};return es(()=>{n.value=!0,s.autoClose&&s.duration>0&&(r=setTimeout(l,s.duration))}),Ye(()=>s.duration,d=>{r&&clearTimeout(r),s.autoClose&&d>0&&(r=setTimeout(l,d))}),(d,u)=>(g(),pe(gc,{"enter-active-class":"transform transition duration-300 ease-out","enter-from-class":"translate-y-2 opacity-0 sm:translate-x-2 sm:translate-y-0","enter-to-class":"translate-y-0 opacity-100 sm:translate-x-0","leave-active-class":"transition duration-200 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:j(()=>[n.value?(g(),y("div",Zk,[h("div",ew,[h("div",{class:De(t.variant==="condensed"?"flex items-center":"flex items-start")},[t.variant==="regular"?(g(),y("div",tw,[(g(),pe(As(o.value),{class:"size-6"}))])):I("",!0),h("div",{class:De([t.variant==="regular"?"ml-3 w-0 flex-1 pt-0.5":"flex w-0 flex-1 justify-between"])},[t.variant==="condensed"?(g(),y("p",sw,U(t.title),1)):(g(),y(Q,{key:1},[h("p",iw,U(t.title),1),t.description?(g(),y("p",nw,U(t.description),1)):I("",!0)],64)),t.variant==="condensed"&&t.action?(g(),y("button",{key:2,type:"button",onClick:a,class:"ml-3 shrink-0 rounded-md bg-white text-sm font-medium text-sky-600 hover:text-sky-500 focus:outline-2 focus:outline-offset-2 focus:outline-sky-500 dark:bg-gray-800 dark:text-sky-400 dark:hover:text-sky-300 dark:focus:outline-sky-400"},U(t.action),1)):I("",!0)],2),h("div",{class:"ml-4 flex shrink-0"},[h("button",{type:"button",onClick:l,class:"inline-flex rounded-md text-gray-400 hover:text-gray-500 focus:outline-2 focus:outline-offset-2 focus:outline-sky-600 dark:hover:text-white dark:focus:outline-sky-500"},[...u[0]||(u[0]=[h("span",{class:"sr-only"},"Close",-1),h("svg",{viewBox:"0 0 20 20",fill:"currentColor",class:"size-5"},[h("path",{d:"M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z"})],-1)])])])],2)])])):I("",!0)]),_:1}))}},ow={"aria-live":"assertive",class:"pointer-events-none fixed inset-0 flex items-end px-4 py-6 sm:items-start sm:p-6 z-50"},lw={class:"flex w-full flex-col items-center space-y-4 sm:items-end"},aw={__name:"ToastContainer",setup(t,{expose:e}){const s=ve([]);let i=1;const n=a=>{const d={id:i++,title:a.title,description:a.description||null,type:a.type||"success",variant:a.variant||"regular",action:a.action||null,duration:a.duration!==void 0?a.duration:5e3,autoClose:a.autoClose!==void 0?a.autoClose:!0,onAction:a.onAction||null};return s.value.push(d),d.id},r=a=>{const d=s.value.findIndex(u=>u.id===a);d>-1&&s.value.splice(d,1)},o=a=>{a.onAction&&a.onAction()};return e({addToast:n,removeToast:r,clearAll:()=>{s.value=[]}}),(a,d)=>(g(),pe(qm,{to:"body"},[h("div",ow,[h("div",lw,[(g(!0),y(Q,null,xe(s.value,u=>(g(),pe(rw,{key:u.id,title:u.title,description:u.description,type:u.type,variant:u.variant,action:u.action,duration:u.duration,"auto-close":u.autoClose,onClose:f=>r(u.id),onAction:f=>o(u)},null,8,["title","description","type","variant","action","duration","auto-close","onClose","onAction"]))),128))])])]))}};let vn=null;function uw(t){vn=t}function Ea(){const t=l=>{if(!vn){console.warn('ToastContainer not initialized. Add <ToastContainer ref="toastContainer" /> to your App.vue');return}return vn.addToast(l)};return{show:t,success:(l,a=null,d={})=>t({title:l,description:a,type:"success",...d}),error:(l,a=null,d={})=>t({title:l,description:a,type:"error",...d}),warning:(l,a=null,d={})=>t({title:l,description:a,type:"warning",...d}),info:(l,a=null,d={})=>t({title:l,description:a,type:"info",...d}),remove:l=>{vn&&vn.removeToast(l)},clearAll:()=>{vn&&vn.clearAll()}}}const dw={class:"flex min-h-screen bg-white dark:bg-zinc-900"},cw={class:"hidden lg:fixed lg:inset-y-0 lg:z-50 lg:flex lg:w-72 lg:flex-col xl:w-80"},hw={class:"flex grow flex-col overflow-y-auto border-r border-zinc-900/10 px-6 pb-8 pt-4 dark:border-white/10"},fw={key:0,class:"mt-6"},pw={class:"mt-10"},mw={role:"list"},gw={class:"relative mt-6"},vw={class:"relative mt-3 pl-2"},yw={role:"list",class:"border-l border-transparent"},bw={class:"truncate"},xw={key:0,class:"relative mt-6"},kw={class:"relative mt-3 pl-2"},ww={role:"list",class:"border-l border-transparent"},_w={class:"truncate"},Sw={key:0,class:"text-xs text-zinc-400 dark:text-zinc-500"},Cw={class:"sticky bottom-0 mt-6 border-t border-zinc-900/10 pt-6 dark:border-white/10"},Aw={class:"lg:pl-72 xl:pl-80 w-full"},Vw={class:"h-screen overflow-auto"},Mw={__name:"App",setup(t){const e=ve(null),s=Sr(),{isDark:i,toggle:n}=Hk(),r=ve([]),o=c=>f.findIndex(k=>k.to==="/projects"&&s.path==="/projects/new"?!1:s.path.startsWith(k.to)),l=()=>r.value.findIndex(c=>s.path===`/project/${c.id}`),a=c=>c.to==="/projects"&&s.path==="/projects/new"?!1:s.path.startsWith(c.to),d=()=>Dt("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[Dt("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})]),u=()=>Dt("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[Dt("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})]),f=[{id:"projects",label:"Projects",to:"/projects"},{id:"settings",label:"New Project Defaults",to:"/settings"}];return es(async()=>{uw(e.value);try{const p=await(await fetch("/api/settings/get")).json();r.value=p.projects||[]}catch(c){console.error("Failed to load projects:",c)}}),(c,p)=>{const k=Fl("router-link"),C=Fl("router-view");return g(),y("div",dw,[h("div",cw,[h("div",hw,[x(k,{to:"/",class:"flex items-center gap-3"},{default:j(()=>[...p[1]||(p[1]=[h("img",{src:Rx,alt:"Framework",class:"h-10 w-10"},null,-1),h("span",{class:"text-lg font-semibold text-zinc-900 dark:text-white"},"Framework",-1)])]),_:1}),c.$route.path!=="/projects/new"?(g(),y("div",fw,[x(k,{to:"/projects/new",class:"flex w-full items-center justify-center gap-2 rounded-lg bg-white px-4 py-2.5 text-sm font-medium text-zinc-900 ring-1 ring-zinc-900/10 transition hover:bg-zinc-50 hover:ring-zinc-900/20 dark:bg-white/5 dark:text-white dark:ring-white/10 dark:hover:bg-white/10"},{default:j(()=>[...p[2]||(p[2]=[h("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),ue(" New Project ",-1)])]),_:1})])):I("",!0),h("nav",pw,[h("ul",mw,[h("li",gw,[p[4]||(p[4]=h("h2",{class:"text-xs font-semibold text-zinc-900 dark:text-white"}," Framework ",-1)),h("div",vw,[p[3]||(p[3]=h("div",{class:"absolute inset-y-0 left-2 w-px bg-zinc-900/10 dark:bg-white/5"},null,-1)),o()>=0?(g(),y("div",{key:0,class:"absolute left-2 h-6 w-px bg-sky-500 transition-all duration-200",style:ro({top:`${o()*32+4}px`})},null,4)):I("",!0),h("ul",yw,[(g(),y(Q,null,xe(f,A=>h("li",{key:A.id,class:"relative"},[x(k,{to:A.to,class:De(["flex justify-between gap-2 py-1 pl-4 pr-3 text-sm transition",a(A)?"text-zinc-900 dark:text-white":"text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white"])},{default:j(()=>[h("span",bw,U(A.label),1)]),_:2},1032,["to","class"])])),64))])])]),r.value.length>0?(g(),y("li",xw,[p[6]||(p[6]=h("h2",{class:"text-xs font-semibold text-zinc-900 dark:text-white"}," Your Projects ",-1)),h("div",kw,[p[5]||(p[5]=h("div",{class:"absolute inset-y-0 left-2 w-px bg-zinc-900/10 dark:bg-white/5"},null,-1)),l()>=0?(g(),y("div",{key:0,class:"absolute left-2 h-6 w-px bg-sky-500 transition-all duration-200",style:ro({top:`${l()*32+4}px`})},null,4)):I("",!0),h("ul",ww,[(g(!0),y(Q,null,xe(r.value,A=>(g(),y("li",{key:A.id,class:"relative"},[x(k,{to:`/project/${A.id}`,class:De(["flex justify-between gap-2 py-1 pl-4 pr-3 text-sm transition",c.$route.path===`/project/${A.id}`?"text-zinc-900 dark:text-white":"text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white"])},{default:j(()=>[h("span",_w,U(A.name),1),A.type?(g(),y("span",Sw,U(A.type==="project"?"":A.type==="course"?"":""),1)):I("",!0)]),_:2},1032,["to","class"])]))),128))])])])):I("",!0),h("li",Cw,[h("button",{onClick:p[0]||(p[0]=(...A)=>at(n)&&at(n)(...A)),class:"flex w-full items-center gap-3 text-sm text-zinc-600 transition hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white"},[(g(),pe(As(at(i)?u:d),{class:"h-5 w-5 shrink-0"})),ue(" "+U(at(i)?"Light Mode":"Dark Mode"),1)])])])])])]),h("div",Aw,[h("main",Vw,[x(C)])]),x(aw,{ref_key:"toastContainer",ref:e},null,512)])}}},Dw={key:0,class:"flex items-center justify-center py-12"},Tw={key:1,class:"max-w-4xl prose prose-slate dark:prose-invert"},$w={class:"not-prose mb-8"},Ew={class:"flex items-center gap-3 mb-2"},Ow={class:"px-3 py-1 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded text-sm font-medium"},Pw={class:"text-4xl font-bold text-slate-900 dark:text-white mb-4"},jw={class:"text-lg text-slate-600 dark:text-slate-400"},Rw={class:"not-prose mb-8"},Lw={class:"bg-slate-900 dark:bg-slate-950 rounded-lg p-4 overflow-x-auto"},Bw={class:"text-sm text-slate-100"},Iw={key:0,class:"not-prose mb-8"},Nw={class:"space-y-4"},Uw={class:"flex items-baseline gap-2 mb-1"},zw={class:"text-base font-mono font-semibold text-slate-900 dark:text-white"},Fw={class:"text-sm text-slate-500 dark:text-slate-400"},Hw={key:0,class:"text-xs text-red-600 dark:text-red-400 font-medium"},Ww={key:1,class:"text-xs text-slate-500 dark:text-slate-400"},qw={class:"text-sm text-slate-600 dark:text-slate-400"},Kw={class:"not-prose mb-8"},Gw={class:"text-slate-700 dark:text-slate-300"},Jw={key:1,class:"not-prose mb-8"},Yw={class:"text-slate-700 dark:text-slate-300 whitespace-pre-line"},Xw={key:2,class:"not-prose mb-8"},Qw={class:"space-y-6"},Zw={class:"bg-slate-900 dark:bg-slate-950 rounded-lg p-4 overflow-x-auto mb-2"},e2={class:"text-sm text-slate-100"},t2={class:"text-sm text-slate-600 dark:text-slate-400"},s2={key:3,class:"not-prose mb-8"},i2={class:"space-y-2"},n2={class:"text-indigo-600 dark:text-indigo-400 font-mono font-semibold"},r2={class:"text-slate-700 dark:text-slate-300"},o2={key:4,class:"not-prose mb-8"},l2={class:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4"},a2={class:"list-disc list-inside space-y-1 text-sm text-amber-800 dark:text-amber-300"},u2={key:5,class:"not-prose"},d2={class:"flex items-center gap-2 flex-wrap"},c2={key:2,class:"text-center py-12"},h2={__name:"DocViewer",props:{functionName:{type:String,required:!0}},setup(t){const e=t,s=ve(null),i=ve(!0),n=async()=>{i.value=!0;try{const r=await fetch(`/docs/${e.functionName}.json`);r.ok?s.value=await r.json():s.value=null}catch(r){console.error("Failed to load documentation:",r),s.value=null}finally{i.value=!1}};return Ye(()=>e.functionName,n),es(n),(r,o)=>i.value?(g(),y("div",Dw,[...o[0]||(o[0]=[h("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"},null,-1)])])):s.value?(g(),y("div",Tw,[h("div",$w,[h("div",Ew,[h("span",Ow,U(s.value.category),1)]),h("h1",Pw,U(s.value.title),1),h("p",jw,U(s.value.description),1)]),h("div",Rw,[o[1]||(o[1]=h("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white mb-4"},"Usage",-1)),h("div",Lw,[h("pre",Bw,[h("code",null,U(s.value.usage),1)])])]),s.value.params&&s.value.params.length>0?(g(),y("div",Iw,[o[3]||(o[3]=h("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white mb-4"},"Parameters",-1)),h("div",Nw,[(g(!0),y(Q,null,xe(s.value.params,l=>(g(),y("div",{key:l.name,class:"border-l-4 border-indigo-500 pl-4"},[h("div",Uw,[h("code",zw,U(l.name),1),h("span",Fw,U(l.type),1),l.required?(g(),y("span",Hw," required ")):I("",!0),l.default?(g(),y("span",Ww,[o[2]||(o[2]=ue(" default: ",-1)),h("code",null,U(l.default),1)])):I("",!0)]),h("p",qw,U(l.description),1)]))),128))])])):I("",!0),h("div",Kw,[o[4]||(o[4]=h("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white mb-4"},"Returns",-1)),h("p",Gw,U(s.value.returns),1)]),s.value.details?(g(),y("div",Jw,[o[5]||(o[5]=h("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white mb-4"},"Details",-1)),h("div",Yw,U(s.value.details),1)])):I("",!0),s.value.examples&&s.value.examples.length>0?(g(),y("div",Xw,[o[6]||(o[6]=h("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white mb-4"},"Examples",-1)),h("div",Qw,[(g(!0),y(Q,null,xe(s.value.examples,(l,a)=>(g(),y("div",{key:a},[h("div",Zw,[h("pre",e2,[h("code",null,U(l.code),1)])]),h("p",t2,U(l.description),1)]))),128))])])):I("",!0),s.value.see_also&&s.value.see_also.length>0?(g(),y("div",s2,[o[7]||(o[7]=h("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white mb-4"},"See Also",-1)),h("ul",i2,[(g(!0),y(Q,null,xe(s.value.see_also,l=>(g(),y("li",{key:l.name},[h("code",n2,U(l.name)+"() ",1),h("span",r2," - "+U(l.description),1)]))),128))])])):I("",!0),s.value.notes&&s.value.notes.length>0?(g(),y("div",o2,[h("div",l2,[o[8]||(o[8]=h("h3",{class:"text-lg font-semibold text-amber-900 dark:text-amber-200 mb-2"},"Notes",-1)),h("ul",a2,[(g(!0),y(Q,null,xe(s.value.notes,(l,a)=>(g(),y("li",{key:a},U(l),1))),128))])])])):I("",!0),s.value.tags&&s.value.tags.length>0?(g(),y("div",u2,[h("div",d2,[o[9]||(o[9]=h("span",{class:"text-sm text-slate-500 dark:text-slate-400"},"Tags:",-1)),(g(!0),y(Q,null,xe(s.value.tags,l=>(g(),y("span",{key:l,class:"px-2 py-1 bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 rounded text-xs"},U(l),1))),128))])])):I("",!0)])):(g(),y("div",c2,[...o[10]||(o[10]=[h("p",{class:"text-slate-600 dark:text-slate-400"},"Documentation not found.",-1)])]))}},f2={class:"flex h-full"},p2={class:"w-64 flex-shrink-0 border-r border-zinc-900/10 dark:border-white/10 overflow-y-auto"},m2={class:"p-4"},g2={class:"mt-3 space-y-1"},v2={class:"mt-3 space-y-1"},y2={class:"mt-3 space-y-1"},b2={class:"flex-1 overflow-y-auto"},x2={key:1,class:"flex h-full items-center justify-center p-8"},Cf={__name:"DocsView",setup(t){const e=Sr(),s=oe(()=>e.params.functionName),i=[{name:"scaffold",title:"scaffold()"}],n=[{name:"data_load",title:"data_load()"}],r=[{name:"cache_get",title:"cache_get()"}];return(o,l)=>{const a=Fl("router-link");return g(),y("div",f2,[h("div",p2,[h("div",m2,[l[0]||(l[0]=h("h2",{class:"text-xs font-semibold uppercase tracking-wide text-zinc-500 dark:text-zinc-400"}," Core Functions ",-1)),h("ul",g2,[(g(),y(Q,null,xe(i,d=>h("li",{key:d.name},[x(a,{to:`/docs/${d.name}`,class:De(["block rounded-md px-3 py-2 text-sm font-medium hover:bg-zinc-50 dark:hover:bg-zinc-800",s.value===d.name?"bg-sky-50 text-sky-600 dark:bg-sky-400/10 dark:text-sky-400":"text-zinc-700 dark:text-zinc-300"])},{default:j(()=>[ue(U(d.title),1)]),_:2},1032,["to","class"])])),64))]),l[1]||(l[1]=h("h2",{class:"mt-6 text-xs font-semibold uppercase tracking-wide text-zinc-500 dark:text-zinc-400"}," Data Functions ",-1)),h("ul",v2,[(g(),y(Q,null,xe(n,d=>h("li",{key:d.name},[x(a,{to:`/docs/${d.name}`,class:De(["block rounded-md px-3 py-2 text-sm font-medium hover:bg-zinc-50 dark:hover:bg-zinc-800",s.value===d.name?"bg-sky-50 text-sky-600 dark:bg-sky-400/10 dark:text-sky-400":"text-zinc-700 dark:text-zinc-300"])},{default:j(()=>[ue(U(d.title),1)]),_:2},1032,["to","class"])])),64))]),l[2]||(l[2]=h("h2",{class:"mt-6 text-xs font-semibold uppercase tracking-wide text-zinc-500 dark:text-zinc-400"}," Cache Functions ",-1)),h("ul",y2,[(g(),y(Q,null,xe(r,d=>h("li",{key:d.name},[x(a,{to:`/docs/${d.name}`,class:De(["block rounded-md px-3 py-2 text-sm font-medium hover:bg-zinc-50 dark:hover:bg-zinc-800",s.value===d.name?"bg-sky-50 text-sky-600 dark:bg-sky-400/10 dark:text-sky-400":"text-zinc-700 dark:text-zinc-300"])},{default:j(()=>[ue(U(d.title),1)]),_:2},1032,["to","class"])])),64))])])]),h("div",b2,[s.value?(g(),pe(h2,{key:0,functionName:s.value},null,8,["functionName"])):(g(),y("div",x2,[...l[3]||(l[3]=[h("div",{class:"text-center"},[h("h2",{class:"text-2xl font-bold text-zinc-900 dark:text-white"},"Framework Documentation"),h("p",{class:"mt-2 text-zinc-600 dark:text-zinc-400"}," Select a function from the sidebar to view its documentation. ")],-1)])]))])])}}},k2={key:0,class:"px-4 py-5 sm:px-6"},w2={class:"px-4 py-5 sm:p-6"},_2={key:1,class:"px-4 py-4 sm:px-6"},S2={__name:"Card",setup(t){const e=hb(),s=oe(()=>{const i=["overflow-hidden","rounded-lg","bg-white","shadow-sm","dark:bg-gray-800/50","dark:shadow-none","dark:outline","dark:-outline-offset-1","dark:outline-white/10"];return(e.header||e.footer)&&i.push("divide-y","divide-gray-200","dark:divide-white/10"),i.join(" ")});return(i,n)=>(g(),y("div",{class:De(s.value)},[i.$slots.header?(g(),y("div",k2,[vt(i.$slots,"header")])):I("",!0),h("div",w2,[vt(i.$slots,"default")]),i.$slots.footer?(g(),y("div",_2,[vt(i.$slots,"footer")])):I("",!0)],2))}},Ie={__name:"Button",props:{variant:{type:String,default:"primary",validator:t=>["primary","secondary","soft"].includes(t)},size:{type:String,default:"md",validator:t=>["xs","sm","md","lg","xl"].includes(t)},rounded:{type:String,default:"md",validator:t=>["sm","md","full"].includes(t)},type:{type:String,default:"button"},href:{type:String,default:null},icon:{type:[Object,Function],default:null},iconPosition:{type:String,default:"left",validator:t=>["left","right"].includes(t)},iconOnly:{type:Boolean,default:!1}},emits:["click"],setup(t,{emit:e}){const s=t,i=e,n=l=>{i("click",l)},r=oe(()=>{const l=["font-semibold","focus-visible:outline-2","focus-visible:outline-offset-2"],a={xs:s.iconOnly?"p-2":"px-3 py-2 text-xs",sm:s.iconOnly?"p-2.5":"px-3 py-2 text-sm",md:s.iconOnly?"p-3":"px-3.5 py-2.5 text-sm",lg:s.iconOnly?"p-3":"px-4 py-3 text-sm",xl:s.iconOnly?"p-3.5":"px-4.5 py-3.5 text-sm"};l.push(a[s.size]);const d={sm:"rounded-sm",md:"rounded-md",full:"rounded-full"};return l.push(d[s.rounded]),s.variant==="primary"?l.push("bg-sky-600","text-white","shadow-xs","hover:bg-sky-500","focus-visible:outline-sky-600","dark:bg-sky-500","dark:shadow-none","dark:hover:bg-sky-400","dark:focus-visible:outline-sky-500"):s.variant==="secondary"?l.push("bg-white","text-gray-900","shadow-xs","inset-ring","inset-ring-gray-300","hover:bg-gray-50","dark:bg-white/10","dark:text-white","dark:shadow-none","dark:inset-ring-white/5","dark:hover:bg-white/20"):s.variant==="soft"&&l.push("bg-sky-50","text-sky-600","shadow-xs","hover:bg-sky-100","dark:bg-sky-500/20","dark:text-sky-400","dark:shadow-none","dark:hover:bg-sky-500/30"),s.icon&&!s.iconOnly&&(l.push("inline-flex","items-center"),l.push(s.size==="xl"?"gap-x-2":"gap-x-1.5")),l.join(" ")}),o=oe(()=>{const l=[];return s.iconOnly?l.push("size-5"):(l.push("size-5"),s.iconPosition==="left"?l.push("-ml-0.5"):l.push("-mr-0.5")),l.join(" ")});return(l,a)=>(g(),pe(As(t.href?"a":"button"),{href:t.href,type:t.href?void 0:t.type,class:De(r.value),onClick:n},{default:j(()=>[t.icon&&t.iconPosition==="left"?(g(),y("svg",{key:0,viewBox:"0 0 20 20",fill:"currentColor","data-slot":"icon","aria-hidden":"true",class:De(o.value)},[(g(),pe(As(t.icon)))],2)):I("",!0),vt(l.$slots,"default"),t.icon&&t.iconPosition==="right"?(g(),y("svg",{key:1,viewBox:"0 0 20 20",fill:"currentColor","data-slot":"icon","aria-hidden":"true",class:De(o.value)},[(g(),pe(As(t.icon)))],2)):I("",!0)]),_:3},8,["href","type","class"]))}},C2=["for"],A2={key:1,class:"mt-2 flex"},V2={class:"flex shrink-0 items-center rounded-l-md bg-gray-100 px-2 text-base text-gray-500 outline-1 -outline-offset-1 outline-gray-300 sm:text-sm/6 dark:bg-white/5 dark:text-gray-400 dark:outline-white/10 font-mono"},M2=["id","type","value","placeholder","required","disabled","aria-invalid","aria-describedby"],D2={key:2,class:"mt-2"},T2=["id","type","value","placeholder","required","disabled","aria-invalid","aria-describedby"],$2={key:0,viewBox:"0 0 16 16",fill:"currentColor","data-slot":"icon","aria-hidden":"true",class:"pointer-events-none col-start-1 row-start-1 mr-3 size-5 self-center justify-self-end text-red-500 sm:size-4 dark:text-red-400"},E2=["id"],O2=["id"],q={__name:"Input",props:{id:{type:String,default:()=>`input-${Math.random().toString(36).substr(2,9)}`},modelValue:{type:[String,Number],default:""},type:{type:String,default:"text"},label:{type:String,default:null},placeholder:{type:String,default:""},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},error:{type:String,default:null},hint:{type:String,default:null},monospace:{type:Boolean,default:!1},prefix:{type:String,default:null}},emits:["update:modelValue","blur"],setup(t){const e=t,s=oe(()=>{const n=["block","w-full","rounded-md","bg-white","px-3","py-1.5","text-base","outline-1","-outline-offset-1","placeholder:text-gray-400","focus:outline-2","focus:-outline-offset-2","sm:text-sm/6","dark:bg-white/5","dark:placeholder:text-gray-500"];return e.monospace&&n.push("font-mono"),e.error?n.push("col-start-1","row-start-1","pr-10","pl-3","text-red-900","outline-red-300","placeholder:text-red-300","focus:outline-red-600","sm:pr-9","dark:text-red-400","dark:outline-red-500/50","dark:placeholder:text-red-400/70","dark:focus:outline-red-400"):n.push("text-gray-900","outline-gray-300","focus:outline-sky-600","dark:text-white","dark:outline-white/10","dark:focus:outline-sky-500"),n.join(" ")}),i=oe(()=>{const n=["-ml-px","block","w-full","grow","rounded-r-md","bg-white","px-3","py-1.5","text-base","outline-1","-outline-offset-1","placeholder:text-gray-400","focus:outline-2","focus:-outline-offset-2","sm:text-sm/6","dark:bg-white/5","dark:placeholder:text-gray-500"];return e.monospace&&n.push("font-mono"),e.error?n.push("text-red-900","outline-red-300","placeholder:text-red-300","focus:outline-red-600","dark:text-red-400","dark:outline-red-500/50","dark:placeholder:text-red-400/70","dark:focus:outline-red-400"):n.push("text-gray-900","outline-gray-300","focus:outline-sky-600","dark:text-white","dark:outline-white/10","dark:focus:outline-sky-500"),n.join(" ")});return(n,r)=>(g(),y("div",null,[t.label?(g(),y("label",{key:0,for:t.id,class:"block text-sm/6 font-medium text-gray-900 dark:text-white"},U(t.label),9,C2)):I("",!0),t.prefix?(g(),y("div",A2,[h("div",V2,U(t.prefix),1),h("input",{id:t.id,type:t.type,value:t.modelValue,placeholder:t.placeholder,required:t.required,disabled:t.disabled,"aria-invalid":t.error?"true":void 0,"aria-describedby":t.error?`${t.id}-error`:t.hint?`${t.id}-description`:void 0,onInput:r[0]||(r[0]=o=>n.$emit("update:modelValue",o.target.value)),onBlur:r[1]||(r[1]=o=>n.$emit("blur",o)),class:De(i.value)},null,42,M2)])):(g(),y("div",D2,[h("input",{id:t.id,type:t.type,value:t.modelValue,placeholder:t.placeholder,required:t.required,disabled:t.disabled,"aria-invalid":t.error?"true":void 0,"aria-describedby":t.error?`${t.id}-error`:t.hint?`${t.id}-description`:void 0,onInput:r[2]||(r[2]=o=>n.$emit("update:modelValue",o.target.value)),onBlur:r[3]||(r[3]=o=>n.$emit("blur",o)),class:De(s.value)},null,42,T2),t.error?(g(),y("svg",$2,[...r[4]||(r[4]=[h("path",{d:"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14ZM8 4a.75.75 0 0 1 .75.75v3a.75.75 0 0 1-1.5 0v-3A.75.75 0 0 1 8 4Zm0 8a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z","clip-rule":"evenodd","fill-rule":"evenodd"},null,-1)])])):I("",!0)])),t.error?(g(),y("p",{key:3,id:`${t.id}-error`,class:"mt-2 text-sm text-red-600 dark:text-red-400"},U(t.error),9,E2)):I("",!0),t.hint&&!t.error?(g(),y("p",{key:4,id:`${t.id}-description`,class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},U(t.hint),9,O2)):I("",!0)]))}},P2={class:"flex gap-3"},j2={class:"flex h-6 shrink-0 items-center"},R2={class:"group grid size-4 grid-cols-1"},L2=["id","name","checked","aria-describedby"],B2={class:"text-sm/6"},I2=["for"],N2=["id"],Di={__name:"Checkbox",props:{id:{type:String,required:!0},name:{type:String,default:null},modelValue:{type:Boolean,default:!1},description:{type:String,default:null}},emits:["update:modelValue"],setup(t){return(e,s)=>(g(),y("div",P2,[h("div",j2,[h("div",R2,[h("input",{id:t.id,type:"checkbox",name:t.name,checked:t.modelValue,"aria-describedby":t.description?`${t.id}-description`:void 0,onChange:s[0]||(s[0]=i=>e.$emit("update:modelValue",i.target.checked)),class:"col-start-1 row-start-1 appearance-none rounded-sm border border-gray-300 bg-white checked:border-sky-600 checked:bg-sky-600 indeterminate:border-sky-600 indeterminate:bg-sky-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:checked:bg-gray-100 dark:border-white/10 dark:bg-white/5 dark:checked:border-sky-500 dark:checked:bg-sky-500 dark:indeterminate:border-sky-500 dark:indeterminate:bg-sky-500 dark:focus-visible:outline-sky-500 dark:disabled:border-white/5 dark:disabled:bg-white/10 dark:disabled:checked:bg-white/10 forced-colors:appearance-auto"},null,40,L2),s[1]||(s[1]=h("svg",{viewBox:"0 0 14 14",fill:"none",class:"pointer-events-none col-start-1 row-start-1 size-3.5 self-center justify-self-center stroke-white group-has-disabled:stroke-gray-950/25 dark:group-has-disabled:stroke-white/25"},[h("path",{d:"M3 8L6 11L11 3.5","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"opacity-0 group-has-checked:opacity-100"}),h("path",{d:"M3 7H11","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"opacity-0 group-has-indeterminate:opacity-100"})],-1))])]),h("div",B2,[h("label",{for:t.id,class:"font-medium text-gray-900 dark:text-white"},[vt(e.$slots,"default")],8,I2),t.description?(g(),y("p",{key:0,id:`${t.id}-description`,class:"text-gray-500 dark:text-gray-400"},U(t.description),9,N2)):I("",!0)])]))}};function U2(t,e){return g(),y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z","clip-rule":"evenodd"})])}function z2(t,e){return g(),y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"fill-rule":"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z","clip-rule":"evenodd"})])}function F2(t,e){return g(),y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 0 1 .67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 1 1-.671-1.34l.041-.022ZM12 9a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z","clip-rule":"evenodd"})])}function H2(t,e){return g(),y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[h("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-1.72 6.97a.75.75 0 1 0-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 1 0 1.06 1.06L12 13.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L13.06 12l1.72-1.72a.75.75 0 1 0-1.06-1.06L12 10.94l-1.72-1.72Z","clip-rule":"evenodd"})])}const W2={class:"flex gap-3"},q2={class:"flex-1"},_i={__name:"Alert",props:{type:{type:String,default:"info",validator:t=>["success","error","warning","info"].includes(t)},title:{type:String,default:null},description:{type:String,default:null},dismissible:{type:Boolean,default:!1}},emits:["dismiss"],setup(t,{emit:e}){const s=t,i=e,n={success:{container:"bg-sky-50 dark:bg-sky-900/20 inset-ring inset-ring-sky-200 dark:inset-ring-sky-800",icon:"text-sky-600 dark:text-sky-400",title:"text-sky-800 dark:text-sky-200",description:"text-sky-700 dark:text-sky-300",dismiss:"text-sky-600 hover:text-sky-700 dark:text-sky-400 dark:hover:text-sky-300"},error:{container:"bg-red-50 dark:bg-red-900/20 inset-ring inset-ring-red-200 dark:inset-ring-red-800",icon:"text-red-600 dark:text-red-400",title:"text-red-800 dark:text-red-200",description:"text-red-700 dark:text-red-300",dismiss:"text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300"},warning:{container:"bg-yellow-50 dark:bg-yellow-900/20 inset-ring inset-ring-yellow-200 dark:inset-ring-yellow-800",icon:"text-yellow-600 dark:text-yellow-400",title:"text-yellow-800 dark:text-yellow-200",description:"text-yellow-700 dark:text-yellow-300",dismiss:"text-yellow-600 hover:text-yellow-700 dark:text-yellow-400 dark:hover:text-yellow-300"},info:{container:"bg-blue-50 dark:bg-blue-900/20 inset-ring inset-ring-blue-200 dark:inset-ring-blue-800",icon:"text-blue-600 dark:text-blue-400",title:"text-blue-800 dark:text-blue-200",description:"text-blue-700 dark:text-blue-300",dismiss:"text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300"}},r=oe(()=>`rounded-lg p-4 ${n[s.type].container}`),o=oe(()=>`text-sm font-medium ${n[s.type].title}`),l=oe(()=>{const f=[`text-sm ${n[s.type].description}`];return s.title&&f.push("mt-1"),f.join(" ")}),a=oe(()=>`rounded-md p-1 ${n[s.type].dismiss} focus:outline-2 focus:outline-offset-2`),d=oe(()=>({success:U2,error:H2,warning:z2,info:F2})[s.type]),u=()=>{i("dismiss")};return(f,c)=>(g(),y("div",{class:De(r.value),role:"alert"},[h("div",W2,[(g(),pe(As(d.value),{class:"h-5 w-5 shrink-0"})),h("div",q2,[t.title?(g(),y("p",{key:0,class:De(o.value)},U(t.title),3)):I("",!0),t.description||f.$slots.default?(g(),y("p",{key:1,class:De(l.value)},[vt(f.$slots,"default",{},()=>[ue(U(t.description),1)])],2)):I("",!0)]),t.dismissible?(g(),y("button",{key:0,type:"button",onClick:u,class:De(a.value)},[...c[0]||(c[0]=[h("span",{class:"sr-only"},"Dismiss",-1),h("svg",{viewBox:"0 0 20 20",fill:"currentColor",class:"size-5"},[h("path",{d:"M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z"})],-1)])],2)):I("",!0)])],2))}},K2={class:"flex items-center justify-between"},G2={class:"space-y-6"},J2={key:0,class:"text-xs text-gray-500 dark:text-gray-400 space-y-1"},Y2={key:0},X2={class:"font-mono"},Q2={key:1},Z2={class:"font-mono"},e_={class:"space-y-2"},t_=["onClick"],s_={class:"flex items-start gap-3"},i_={class:"text-2xl mt-0.5"},n_={class:"flex-1"},r_={class:"font-semibold text-gray-900 dark:text-white"},o_={class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},l_={key:0,class:"text-sky-600 dark:text-sky-400"},a_={key:1,class:"bg-gray-50 dark:bg-gray-800/50 rounded-lg p-4"},u_={class:"space-y-3"},d_={class:"list-decimal list-inside mt-1 space-y-1"},c_={class:"flex items-center justify-end gap-3"},h_={__name:"ProjectWizard",props:{mode:{type:String,default:"modal",validator:t=>["modal","page"].includes(t)},projectsRoot:{type:String,default:""}},emits:["close","created"],setup(t,{emit:e}){const s=t,i=e,n=oe(()=>s.mode==="modal"),r=oe(()=>(s.projectsRoot||"").trim()),o=B=>/^([A-Za-z]:[\\/]|\\\\|\/|~)/.test(B),l=(B,M)=>{if(!B)return M;const J=M.replace(/^[\\/]+/,"");if(!J)return B;if(B.endsWith("/")||B.endsWith("\\"))return`${B}${J}`;const X=B.includes("\\")&&!B.includes("/")?"\\":"/";return`${B}${X}${J}`},a=oe(()=>n.value?"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4":"flex w-full justify-center"),d=oe(()=>n.value?"max-w-2xl w-full max-h-[90vh] overflow-y-auto":"w-full max-w-2xl shadow-xl"),u=Hs({directory:"",name:"",type:"project",sensitive:!1,use_git:!0,use_renv:!1,attach_defaults:!0}),f=oe(()=>{const B=u.directory.trim();return B?o(B)||!r.value?B:l(r.value,B):r.value||""}),c=oe(()=>{const B=u.directory.trim();return B?r.value.length>0||o(B):!1}),p=oe(()=>r.value?`Folder will be created inside ${r.value}`:"The directory where your project will be created"),k=oe(()=>r.value?"analytics-project":"my-analysis"),C=[{id:"project",title:"Data Analysis",description:"Full-featured project with notebooks, scripts, data management, and results tracking",icon:""},{id:"course",title:"Course Materials",description:"Teaching materials with slides, assignments, and course documentation",icon:""},{id:"presentation",title:"Presentation",description:"Single talk or presentation with minimal structure",icon:""}],A=ve(!1),V=ve(""),R=ve(!1),P=()=>{n.value&&i("close")},z=()=>{!u.name&&u.directory&&(u.name=u.directory.split(/[-_]/).map(B=>B.charAt(0).toUpperCase()+B.slice(1)).join(" "))},H=async()=>{V.value="",R.value=!1,A.value=!0;try{const B=f.value||u.directory,M=await fetch("/api/project/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_dir:B,project_name:u.name||u.directory,type:u.type,sensitive:u.sensitive,use_git:u.use_git,use_renv:u.use_renv,attach_defaults:u.attach_defaults})}),J=await M.json();M.ok&&J.success?(R.value=!0,J&&!J.path&&(J.path=B),i("created",J),n.value&&setTimeout(()=>{i("close")},3e3)):V.value=J.error||"Failed to create project"}catch(B){V.value="Network error: "+B.message}finally{A.value=!1}};return(B,M)=>(g(),y("div",{class:De(a.value),onClick:Kt(P,["self"])},[x(S2,{class:De(d.value)},{header:j(()=>[h("div",K2,[M[9]||(M[9]=h("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Create New Project",-1)),n.value?(g(),y("button",{key:0,onClick:M[0]||(M[0]=J=>B.$emit("close")),class:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition"},[...M[8]||(M[8]=[h("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])):I("",!0)])]),footer:j(()=>[h("div",c_,[x(Ie,{variant:"secondary",onClick:M[7]||(M[7]=J=>B.$emit("close"))},{default:j(()=>[...M[23]||(M[23]=[ue(" Cancel ",-1)])]),_:1}),x(Ie,{variant:"primary",onClick:H,disabled:A.value||!u.directory},{default:j(()=>[ue(U(A.value?"Creating...":"Create Project"),1)]),_:1},8,["disabled"])])]),default:j(()=>[h("div",G2,[x(q,{modelValue:u.directory,"onUpdate:modelValue":M[1]||(M[1]=J=>u.directory=J),label:"Project Directory",placeholder:k.value,hint:p.value,onInput:z},null,8,["modelValue","placeholder","hint"]),r.value||c.value?(g(),y("div",J2,[r.value?(g(),y("p",Y2,[M[10]||(M[10]=ue(" Projects will be created inside ",-1)),h("span",X2,U(r.value),1),M[11]||(M[11]=ue(". ",-1))])):I("",!0),c.value?(g(),y("p",Q2,[M[12]||(M[12]=ue(" Full path: ",-1)),h("span",Z2,U(f.value),1)])):I("",!0)])):I("",!0),x(q,{modelValue:u.name,"onUpdate:modelValue":M[2]||(M[2]=J=>u.name=J),label:"Project Name",placeholder:"My Analysis"},null,8,["modelValue"]),h("div",null,[M[14]||(M[14]=h("label",{class:"block text-sm/6 font-medium text-gray-900 dark:text-white mb-3"}," Project Type ",-1)),h("div",e_,[(g(),y(Q,null,xe(C,J=>h("div",{key:J.id,onClick:X=>u.type=J.id,class:De(["border-2 rounded-lg p-4 cursor-pointer transition",u.type===J.id?"border-sky-600 bg-sky-50 dark:bg-sky-900/20 dark:border-sky-500":"border-gray-200 dark:border-gray-700 hover:border-sky-300 dark:hover:border-sky-600"])},[h("div",s_,[h("div",i_,U(J.icon),1),h("div",n_,[h("h3",r_,U(J.title),1),h("p",o_,U(J.description),1)]),u.type===J.id?(g(),y("div",l_,[...M[13]||(M[13]=[h("svg",{class:"h-6 w-6",fill:"currentColor",viewBox:"0 0 20 20"},[h("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1)])])):I("",!0)])],10,t_)),64))])]),u.type==="project"?(g(),y("div",a_,[x(Di,{modelValue:u.sensitive,"onUpdate:modelValue":M[3]||(M[3]=J=>u.sensitive=J),id:"sensitive",description:"Creates separate public/private directories for inputs, reference materials, and outputs. Recommended for PHI, PII, or IRB-restricted data."},{default:j(()=>[...M[15]||(M[15]=[ue(" Privacy-first mode ",-1)])]),_:1},8,["modelValue"])])):I("",!0),h("div",u_,[x(Di,{modelValue:u.use_git,"onUpdate:modelValue":M[4]||(M[4]=J=>u.use_git=J),id:"use_git"},{default:j(()=>[...M[16]||(M[16]=[ue(" Initialize git repository ",-1)])]),_:1},8,["modelValue"]),x(Di,{modelValue:u.use_renv,"onUpdate:modelValue":M[5]||(M[5]=J=>u.use_renv=J),id:"use_renv"},{default:j(()=>[...M[17]||(M[17]=[ue(" Enable renv for package management ",-1)])]),_:1},8,["modelValue"]),x(Di,{modelValue:u.attach_defaults,"onUpdate:modelValue":M[6]||(M[6]=J=>u.attach_defaults=J),id:"attach_defaults"},{default:j(()=>[...M[18]||(M[18]=[ue(" Auto-load common packages (dplyr, tidyr, ggplot2) ",-1)])]),_:1},8,["modelValue"])]),V.value?(g(),pe(_i,{key:2,type:"error",description:V.value},null,8,["description"])):I("",!0),R.value?(g(),pe(_i,{key:3,type:"success",title:"Project created successfully!"},{default:j(()=>[M[22]||(M[22]=h("p",{class:"mt-2"},"Next steps:",-1)),h("ol",d_,[h("li",null,"cd "+U(f.value),1),M[19]||(M[19]=h("li",null,"R",-1)),M[20]||(M[20]=h("li",null,"library(framework)",-1)),M[21]||(M[21]=h("li",null,"scaffold()",-1))])]),_:1})):I("",!0)])]),_:1},8,["class"])],2))}},f_={class:"flex items-start justify-between"},p_={class:"text-3xl font-bold tracking-tight text-gray-900 dark:text-white"},m_={key:0,class:"mt-2 text-sm text-gray-600 dark:text-gray-400"},g_={key:0},Cr={__name:"PageHeader",props:{title:{type:String,required:!0},description:{type:String,default:null}},setup(t){return(e,s)=>(g(),y("div",f_,[h("div",null,[h("h1",p_,U(t.title),1),t.description?(g(),y("p",m_,U(t.description),1)):I("",!0)]),e.$slots.actions?(g(),y("div",g_,[vt(e.$slots,"actions")])):I("",!0)]))}},ir={__name:"Badge",props:{variant:{type:String,default:"gray",validator:t=>["gray","red","yellow","green","blue","indigo","purple","pink","sky"].includes(t)},pill:{type:Boolean,default:!1},dot:{type:Boolean,default:!1}},setup(t){const e=t,s=oe(()=>{const n=["inline-flex","items-center","px-2","py-1","text-xs","font-medium","inset-ring"];n.push(e.pill?"rounded-full":"rounded-md"),e.dot&&n.push("gap-x-1.5");const o={gray:{bg:"bg-gray-50",text:"text-gray-600",ring:"inset-ring-gray-500/10",darkBg:"dark:bg-gray-400/10",darkText:e.dot?"dark:text-gray-200":"dark:text-gray-400",darkRing:e.dot?"dark:inset-ring-white/10":"dark:inset-ring-gray-400/20"},red:{bg:"bg-red-50",text:"text-red-700",ring:"inset-ring-red-600/10",darkBg:"dark:bg-red-400/10",darkText:"dark:text-red-400",darkRing:"dark:inset-ring-red-400/20"},yellow:{bg:"bg-yellow-50",text:"text-yellow-800",ring:"inset-ring-yellow-600/20",darkBg:"dark:bg-yellow-400/10",darkText:"dark:text-yellow-500",darkRing:"dark:inset-ring-yellow-400/20"},green:{bg:"bg-green-50",text:"text-green-700",ring:"inset-ring-green-600/20",darkBg:"dark:bg-green-400/10",darkText:"dark:text-green-400",darkRing:"dark:inset-ring-green-500/20"},sky:{bg:"bg-sky-50",text:"text-sky-700",ring:"inset-ring-sky-600/20",darkBg:"dark:bg-sky-400/10",darkText:"dark:text-sky-400",darkRing:"dark:inset-ring-sky-500/20"},blue:{bg:"bg-blue-50",text:"text-blue-700",ring:"inset-ring-blue-700/10",darkBg:"dark:bg-blue-400/10",darkText:"dark:text-blue-400",darkRing:"dark:inset-ring-blue-400/30"},indigo:{bg:"bg-indigo-50",text:"text-indigo-700",ring:"inset-ring-indigo-700/10",darkBg:"dark:bg-indigo-400/10",darkText:"dark:text-indigo-400",darkRing:"dark:inset-ring-indigo-400/30"},purple:{bg:"bg-purple-50",text:"text-purple-700",ring:"inset-ring-purple-700/10",darkBg:"dark:bg-purple-400/10",darkText:"dark:text-purple-400",darkRing:"dark:inset-ring-purple-400/30"},pink:{bg:"bg-pink-50",text:"text-pink-700",ring:"inset-ring-pink-700/10",darkBg:"dark:bg-pink-400/10",darkText:"dark:text-pink-400",darkRing:"dark:inset-ring-pink-400/20"}}[e.variant];return e.dot?n.push("text-gray-900","inset-ring-gray-200","dark:text-white","dark:inset-ring-white/10"):n.push(o.bg,o.text,o.ring,o.darkBg,o.darkText,o.darkRing),n.join(" ")}),i=oe(()=>`size-1.5 ${{gray:"fill-gray-500 dark:fill-gray-400",red:"fill-red-500 dark:fill-red-400",yellow:"fill-yellow-500 dark:fill-yellow-400",green:"fill-green-500 dark:fill-green-400",sky:"fill-sky-500 dark:fill-sky-400",blue:"fill-blue-500 dark:fill-blue-400",indigo:"fill-indigo-500 dark:fill-indigo-400",purple:"fill-purple-500 dark:fill-purple-400",pink:"fill-pink-500 dark:fill-pink-400"}[e.variant]}`);return(n,r)=>(g(),y("span",{class:De(s.value)},[t.dot?(g(),y("svg",{key:0,viewBox:"0 0 6 6","aria-hidden":"true",class:De(i.value)},[...r[0]||(r[0]=[h("circle",{r:"3",cx:"3",cy:"3"},null,-1)])],2)):I("",!0),vt(n.$slots,"default")],2))}},Wg=(t,e)=>{const s=t.__vccOpts||t;for(const[i,n]of e)s[i]=n;return s},v_={key:0,class:"relative z-50"},y_={class:"fixed inset-0 z-10 overflow-y-auto"},b_={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},x_=["aria-labelledby"],k_=["id"],w_={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},__={__name:"Modal",props:{modelValue:{type:Boolean,default:!1},title:{type:String,default:null},description:{type:String,default:null},icon:{type:String,default:null,validator:t=>["success","error","warning","info"].includes(t)},size:{type:String,default:"md",validator:t=>["sm","md","lg","xl"].includes(t)},variant:{type:String,default:"centered",validator:t=>["centered","side-icon","left"].includes(t)},closeOnBackdrop:{type:Boolean,default:!0}},emits:["update:modelValue","close"],setup(t,{expose:e,emit:s}){const i=t,n=s,r=oe(()=>`modal-title-${Math.random().toString(36).substr(2,9)}`),o={sm:"sm:max-w-sm",md:"sm:max-w-lg",lg:"sm:max-w-2xl",xl:"sm:max-w-4xl"},l=oe(()=>["relative","transform","overflow-hidden","rounded-lg","bg-white","px-4","pt-5","pb-4","text-left","shadow-xl","transition-all","sm:my-8","sm:w-full","sm:p-6","dark:bg-gray-800","dark:outline","dark:-outline-offset-1","dark:outline-white/10",o[i.size]].join(" ")),a=oe(()=>{const V=["flex","items-center","justify-center","rounded-full"];i.variant==="centered"?V.push("mx-auto","size-12"):V.push("shrink-0","sm:mx-0","sm:size-10");const R={success:"bg-sky-100 text-sky-600 dark:bg-sky-500/10 dark:text-sky-400",error:"bg-red-100 text-red-600 dark:bg-red-500/10 dark:text-red-400",warning:"bg-yellow-100 text-yellow-600 dark:bg-yellow-500/10 dark:text-yellow-400",info:"bg-blue-100 text-blue-600 dark:bg-blue-500/10 dark:text-blue-400"};return i.icon&&V.push(R[i.icon]),V.join(" ")}),d=oe(()=>{const V=[];return i.variant==="centered"?V.push("mt-3","text-center","sm:mt-5"):i.variant==="left"?V.push("text-left"):V.push("mt-3","text-center","sm:mt-0","sm:ml-4","sm:text-left"),i.variant==="side-icon"&&(i.icon||i.$slots.icon)&&V.push("sm:flex","sm:items-start"),V.join(" ")}),u=oe(()=>i.variant==="left"?"text-lg font-bold text-gray-900 dark:text-white mb-4":"text-base font-semibold text-gray-900 dark:text-white"),f=oe(()=>(i.variant==="centered","mt-2")),c=oe(()=>i.variant==="left"?"mt-6 pt-4 border-t border-gray-200 dark:border-gray-700 flex gap-3 justify-between":i.variant==="centered"?"mt-5 sm:mt-6 flex gap-3 justify-end":"mt-5 sm:mt-4 flex gap-3 justify-end"),p=oe(()=>i.icon==="success"?{template:`
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="m4.5 12.75 6 6 9-13.5" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      `}:i.icon==="error"||i.icon==="warning"?{template:`
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      `}:i.icon==="info"?{template:`
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      `}:null),k=()=>{i.closeOnBackdrop&&A()},C=V=>{V.key==="Escape"&&i.modelValue&&A()},A=()=>{n("update:modelValue",!1),n("close")};return es(()=>{window.addEventListener("keydown",C)}),_r(()=>{window.removeEventListener("keydown",C)}),e({close:A}),(V,R)=>(g(),pe(qm,{to:"body"},[x(gc,{name:"modal"},{default:j(()=>[t.modelValue?(g(),y("div",v_,[h("div",{class:"fixed inset-0 bg-gray-500/75 transition-opacity dark:bg-gray-900/50",onClick:k}),h("div",y_,[h("div",b_,[h("div",{class:De(l.value),role:"dialog","aria-modal":"true","aria-labelledby":r.value},[V.$slots.icon||t.icon?(g(),y("div",{key:0,class:De(a.value)},[vt(V.$slots,"icon",{},()=>[t.icon?(g(),pe(As(p.value),{key:0,class:"size-6"})):I("",!0)],!0)],2)):I("",!0),h("div",{class:De(d.value)},[t.title?(g(),y("h3",{key:0,id:r.value,class:De(u.value)},U(t.title),11,k_)):I("",!0),t.description||V.$slots.default?(g(),y("div",{key:1,class:De(f.value)},[t.description?(g(),y("p",w_,U(t.description),1)):vt(V.$slots,"default",{key:1},void 0,!0)],2)):I("",!0)],2),V.$slots.actions?(g(),y("div",{key:1,class:De(c.value)},[vt(V.$slots,"actions",{},void 0,!0)],2)):I("",!0)],10,x_)])])])):I("",!0)]),_:3})]))}},fr=Wg(__,[["__scopeId","data-v-2e078ad9"]]),S_=["title"],C_={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},A_={key:1,class:"h-4 w-4 text-sky-600 dark:text-sky-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},V_={key:2},nr={__name:"CopyButton",props:{value:{type:String,required:!0},showLabel:{type:Boolean,default:!1},variant:{type:String,default:"default",validator:t=>["default","ghost","bare"].includes(t)},successMessage:{type:String,default:"Copied to clipboard"}},setup(t){const e=t,s=Ea(),i=ve(!1);let n=null;const r=oe(()=>e.variant==="bare"?"inline-flex items-center text-sm font-medium transition-all":"inline-flex items-center gap-1.5 rounded-md px-2.5 py-1.5 text-sm font-medium transition-all"),o=oe(()=>e.variant==="ghost"?"text-zinc-600 hover:bg-zinc-100 dark:text-zinc-400 dark:hover:bg-zinc-800":e.variant==="bare"?"gap-2 rounded-lg transition-all focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-1 focus-visible:outline-sky-500":"bg-zinc-100 text-zinc-700 hover:bg-zinc-200 dark:bg-zinc-800 dark:text-zinc-300 dark:hover:bg-zinc-700"),l=async()=>{try{await navigator.clipboard.writeText(e.value),i.value=!0,s.success("Copied!",e.successMessage),n&&clearTimeout(n),n=setTimeout(()=>{i.value=!1},2e3)}catch(a){s.error("Copy failed","Could not copy to clipboard"),console.error("Failed to copy:",a)}};return(a,d)=>(g(),y("button",{type:"button",onClick:l,class:De([r.value,o.value,i.value&&"ring-2 ring-sky-500/20"]),title:i.value?"Copied!":"Copy to clipboard"},[vt(a.$slots,"default",{copied:i.value},()=>[i.value?(g(),y("svg",A_,[...d[1]||(d[1]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(g(),y("svg",C_,[...d[0]||(d[0]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"},null,-1)])])),t.showLabel?(g(),y("span",V_,U(i.value?"Copied!":"Copy"),1)):I("",!0)])],10,S_))}},M_={class:"mx-auto max-w-5xl p-10"},D_={class:"flex gap-3"},T_={key:0,class:"mt-6 flex flex-col gap-3 rounded-2xl border border-zinc-200 bg-white p-5 shadow-sm dark:border-zinc-800 dark:bg-zinc-900 sm:flex-row sm:items-center sm:justify-between"},$_={class:"min-w-0"},E_={class:"mt-1 font-mono text-sm text-zinc-600 dark:text-zinc-400 truncate"},O_={class:"flex items-center gap-2"},P_={key:1,class:"mt-10 grid gap-6 sm:grid-cols-2"},j_={class:"relative"},R_={class:"flex items-start justify-between"},L_={class:"flex-1"},B_={class:"flex items-center gap-3"},I_={class:"flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-sky-500 to-sky-600 shadow-lg shadow-sky-500/20"},N_={key:0,class:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},U_={key:1,class:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},z_={key:2,class:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},F_={class:"mt-4 text-xl font-bold text-zinc-900 dark:text-white"},H_={class:"mt-2 text-sm text-zinc-600 dark:text-zinc-400 font-mono truncate"},W_={key:0,class:"mt-3 flex items-center gap-2 text-xs text-zinc-600 dark:text-zinc-400"},q_={key:0,class:"text-zinc-400 dark:text-zinc-500"},K_={key:1,class:"truncate"},G_={class:"mt-3 flex items-center gap-2 text-xs text-zinc-500 dark:text-zinc-500"},J_={class:"mt-6 flex gap-2"},Y_={key:2,class:"mt-12 overflow-hidden rounded-3xl bg-gradient-to-br from-sky-600 via-sky-500 to-teal-500 p-12 shadow-2xl shadow-sky-500/20"},X_={class:"space-y-4"},Q_={key:0,class:"mt-2 text-sm text-red-600 dark:text-red-400"},Z_={class:"flex gap-3 justify-end"},eS={key:0,class:"space-y-6"},tS={class:"text-lg font-semibold text-zinc-900 dark:text-white mb-3"},sS={class:"grid gap-4"},iS={class:"text-sm text-zinc-600 dark:text-zinc-400 font-mono bg-zinc-50 dark:bg-zinc-800 px-3 py-2 rounded-lg"},nS={key:0,class:"grid grid-cols-2 gap-4"},rS={class:"text-sm text-zinc-600 dark:text-zinc-400"},oS={key:0},lS={class:"text-sm text-zinc-600 dark:text-zinc-400"},aS={class:"text-sm text-zinc-600 dark:text-zinc-400"},uS={class:"flex gap-3 justify-end"},dS={__name:"ProjectsView",setup(t){const e=Ta(),s=Sr(),i=ve(!1),n=ve(!1),r=ve(!1),o=ve(""),l=ve(""),a=ve(!1),d=ve(null),u=ve({projects:[]}),f=ve(""),c=ve(null),p=B=>{if(!B)return"Unknown";const M=c.value?.project_types?.[B]?.label;return M||B.split("_").map(J=>J.charAt(0).toUpperCase()+J.slice(1)).join(" ")},k=async()=>{try{const M=await(await fetch("/api/settings/get")).json();u.value.projects=M.projects||[],f.value=M.projects_root&&M.projects_root!==""?M.projects_root:""}catch(B){console.error("Failed to load settings:",B)}},C=()=>{s.path==="/projects/new"?i.value=!0:e.push("/projects/new")},A=()=>{i.value=!1,s.path==="/projects/new"&&e.push("/projects")},V=B=>{i.value=!1,k(),B?.id?e.push(`/project/${B.id}`):e.push("/projects")},R=()=>{n.value=!1,o.value="",l.value=""},P=B=>{d.value=B,r.value=!0},z=async()=>{l.value="",a.value=!0;try{const B=await fetch("/api/project/import",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_dir:o.value})}),M=await B.text();if(!M){l.value="Server returned empty response",a.value=!1;return}const J=JSON.parse(M);B.ok?(R(),k()):l.value=J.error||"Failed to import project"}catch(B){l.value="Network error: "+B.message}finally{a.value=!1}},H=async()=>{try{const M=await(await fetch("/api/settings-catalog")).json();M.error||(c.value=M)}catch(B){console.error("Failed to load settings catalog:",B)}};return es(()=>{k(),H(),i.value=s.path==="/projects/new"}),Ye(()=>s.path,B=>{i.value=B==="/projects/new"},{immediate:!0}),(B,M)=>(g(),y("div",M_,[x(Cr,{title:"Your Projects",description:"Framework projects you've created."},{actions:j(()=>[h("div",D_,[x(Ie,{size:"lg",variant:"secondary",onClick:M[0]||(M[0]=J=>n.value=!0)},{default:j(()=>[...M[7]||(M[7]=[ue(" Import Project ",-1)])]),_:1}),x(Ie,{size:"lg",onClick:C},{default:j(()=>[...M[8]||(M[8]=[ue(" New Project ",-1)])]),_:1})])]),_:1}),f.value?(g(),y("div",T_,[h("div",$_,[M[9]||(M[9]=h("p",{class:"text-sm font-medium text-zinc-700 dark:text-zinc-200"},"Projects Root",-1)),h("p",E_,U(f.value),1)]),h("div",O_,[x(nr,{value:f.value,variant:"ghost","show-label":"","success-message":"Root path copied"},null,8,["value"]),x(Ie,{size:"sm",variant:"secondary",onClick:M[1]||(M[1]=J=>at(e).push("/settings"))},{default:j(()=>[...M[10]||(M[10]=[ue(" Edit ",-1)])]),_:1})])])):I("",!0),u.value.projects&&u.value.projects.length>0?(g(),y("div",P_,[(g(!0),y(Q,null,xe(u.value.projects,(J,X)=>(g(),y("div",{key:X,class:"group relative overflow-hidden rounded-2xl border border-zinc-200 bg-white p-6 shadow-sm transition-all duration-300 hover:shadow-xl hover:shadow-zinc-900/5 dark:border-zinc-800 dark:bg-zinc-900 dark:hover:shadow-sky-500/5"},[M[18]||(M[18]=h("div",{class:"absolute -right-6 -top-6 h-24 w-24 rounded-full bg-gradient-to-br from-sky-500/10 to-sky-600/10 blur-2xl transition-all duration-300 group-hover:scale-150"},null,-1)),h("div",j_,[h("div",R_,[h("div",L_,[h("div",B_,[h("div",I_,[J.type==="project"?(g(),y("svg",N_,[...M[11]||(M[11]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)])])):J.type==="course"?(g(),y("svg",U_,[...M[12]||(M[12]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"},null,-1)])])):(g(),y("svg",z_,[...M[13]||(M[13]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"},null,-1)])]))]),x(ir,{variant:"sky"},{default:j(()=>[ue(U(p(J.type)),1)]),_:2},1024)]),h("h3",F_,U(J.name),1),h("p",H_,U(J.path),1),J.author?(g(),y("div",W_,[M[14]||(M[14]=h("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),h("span",null,U(J.author),1),J.author_email?(g(),y("span",q_,"")):I("",!0),J.author_email?(g(),y("span",K_,U(J.author_email),1)):I("",!0)])):I("",!0),h("div",G_,[M[15]||(M[15]=h("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),h("span",null,"Created "+U(J.created),1)])])]),h("div",J_,[x(Ie,{variant:"primary",size:"md",onClick:he=>B.$router.push(`/project/${J.id}`),class:"flex-1"},{default:j(()=>[...M[16]||(M[16]=[ue(" View Project ",-1)])]),_:1},8,["onClick"]),x(Ie,{variant:"secondary",size:"md",onClick:he=>P(J),class:"flex-1"},{default:j(()=>[...M[17]||(M[17]=[ue(" See More ",-1)])]),_:1},8,["onClick"])])])]))),128))])):(g(),y("div",Y_,[h("div",{class:"relative"},[M[21]||(M[21]=h("div",{class:"absolute -right-10 -top-10 h-40 w-40 rounded-full bg-white/10 blur-3xl"},null,-1)),M[22]||(M[22]=h("div",{class:"absolute -bottom-10 -left-10 h-40 w-40 rounded-full bg-white/10 blur-3xl"},null,-1)),h("div",{class:"relative text-center"},[M[20]||(M[20]=Aa('<div class="mx-auto flex h-16 w-16 items-center justify-center rounded-2xl bg-white/20 backdrop-blur-sm"><svg class="h-8 w-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg></div><h2 class="mt-6 text-3xl font-bold text-white">Ready to start?</h2><p class="mt-3 text-lg text-sky-50"> Create a new Framework project with beautiful structure and best practices built-in. </p>',3)),h("button",{onClick:C,class:"mt-8 inline-flex items-center gap-2 rounded-xl bg-white px-6 py-3 text-base font-semibold text-sky-600 shadow-xl transition-all duration-200 hover:scale-105 hover:shadow-2xl focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-white"},[...M[19]||(M[19]=[h("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),ue(" Create Your First Project ",-1)])])])])])),i.value?(g(),pe(h_,{key:3,"projects-root":f.value,onClose:A,onCreated:V},null,8,["projects-root"])):I("",!0),x(fr,{modelValue:n.value,"onUpdate:modelValue":M[3]||(M[3]=J=>n.value=J),title:"Import Existing Project",size:"md"},{actions:j(()=>[h("div",Z_,[x(Ie,{variant:"secondary",onClick:R},{default:j(()=>[...M[26]||(M[26]=[ue(" Cancel ",-1)])]),_:1}),x(Ie,{variant:"primary",onClick:z,disabled:!o.value||a.value},{default:j(()=>[ue(U(a.value?"Importing...":"Import"),1)]),_:1},8,["disabled"])])]),default:j(()=>[h("div",X_,[M[25]||(M[25]=h("p",{class:"text-sm text-zinc-600 dark:text-zinc-400"}," Import an existing Framework project that isn't in your registry yet. ",-1)),h("div",null,[M[23]||(M[23]=h("label",{for:"import-path",class:"block text-sm font-medium text-zinc-900 dark:text-white mb-2"}," Project Directory Path ",-1)),rt(h("input",{id:"import-path","onUpdate:modelValue":M[2]||(M[2]=J=>o.value=J),type:"text",placeholder:"/Users/you/projects/my-framework-project",class:De(["block w-full rounded-lg border-0 px-4 py-2.5 text-zinc-900 shadow-sm ring-1 ring-inset ring-zinc-300 placeholder:text-zinc-400 focus:ring-2 focus:ring-inset focus:ring-sky-600 dark:bg-zinc-800 dark:text-white dark:ring-zinc-700 dark:placeholder:text-zinc-500 dark:focus:ring-sky-500 sm:text-sm sm:leading-6 font-mono",{"ring-red-500 dark:ring-red-500":l.value}])},null,2),[[_n,o.value]]),M[24]||(M[24]=h("p",{class:"mt-2 text-xs text-zinc-500 dark:text-zinc-500"}," Enter the full path to the Framework project directory ",-1)),l.value?(g(),y("p",Q_,U(l.value),1)):I("",!0)])])]),_:1},8,["modelValue"]),x(fr,{modelValue:r.value,"onUpdate:modelValue":M[6]||(M[6]=J=>r.value=J),title:"Project Details",size:"lg"},{actions:j(()=>[h("div",uS,[x(Ie,{variant:"secondary",onClick:M[4]||(M[4]=J=>r.value=!1)},{default:j(()=>[...M[31]||(M[31]=[ue(" Close ",-1)])]),_:1}),x(Ie,{variant:"primary",onClick:M[5]||(M[5]=J=>{B.$router.push(`/project/${d.value.id}`),r.value=!1})},{default:j(()=>[...M[32]||(M[32]=[ue(" View Full Details ",-1)])]),_:1})])]),default:j(()=>[d.value?(g(),y("div",eS,[h("div",null,[h("h3",tS,U(d.value.name),1),x(ir,{variant:"sky",class:"mb-4"},{default:j(()=>[ue(U(d.value.type),1)]),_:1})]),h("div",sS,[h("div",null,[M[27]||(M[27]=h("label",{class:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1"}," Location ",-1)),h("p",iS,U(d.value.path),1)]),d.value.author?(g(),y("div",nS,[h("div",null,[M[28]||(M[28]=h("label",{class:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1"}," Author ",-1)),h("p",rS,U(d.value.author),1)]),d.value.author_email?(g(),y("div",oS,[M[29]||(M[29]=h("label",{class:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1"}," Email ",-1)),h("p",lS,U(d.value.author_email),1)])):I("",!0)])):I("",!0),h("div",null,[M[30]||(M[30]=h("label",{class:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1"}," Created ",-1)),h("p",aS,U(d.value.created),1)])])])):I("",!0)]),_:1},8,["modelValue"])]))}},cS=["for"],hS={class:"mt-2 grid grid-cols-1"},fS=["id","value"],as={__name:"Select",props:{id:{type:String,default:()=>`select-${Math.random().toString(36).substr(2,9)}`},modelValue:{type:[String,Number],default:""},label:{type:String,default:null}},emits:["update:modelValue"],setup(t){return(e,s)=>(g(),y("div",null,[t.label?(g(),y("label",{key:0,for:t.id,class:"block text-sm/6 font-medium text-gray-900 dark:text-white"},U(t.label),9,cS)):I("",!0),h("div",hS,[h("select",{id:t.id,value:t.modelValue,onChange:s[0]||(s[0]=i=>e.$emit("update:modelValue",i.target.value)),class:"col-start-1 row-start-1 w-full appearance-none rounded-md bg-white py-1.5 pr-8 pl-3 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 focus-visible:outline-2 focus-visible:-outline-offset-2 focus-visible:outline-sky-600 sm:text-sm/6 dark:bg-white/5 dark:text-white dark:outline-white/10 dark:*:bg-gray-800 dark:focus-visible:outline-sky-500"},[vt(e.$slots,"default")],40,fS),s[1]||(s[1]=h("svg",{viewBox:"0 0 16 16",fill:"currentColor","data-slot":"icon","aria-hidden":"true",class:"pointer-events-none col-start-1 row-start-1 mr-2 size-5 self-center justify-self-end text-gray-500 sm:size-4 dark:text-gray-400"},[h("path",{d:"M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z","clip-rule":"evenodd","fill-rule":"evenodd"})],-1))])]))}},pS={class:"flex items-center gap-3"},mS=["id","name","checked","disabled","aria-label"],gS={key:0,class:"text-sm/6"},vS=["for"],yS=["id"],Re={__name:"Toggle",props:{id:{type:String,default:()=>`toggle-${Math.random().toString(36).substr(2,9)}`},name:{type:String,default:null},modelValue:{type:Boolean,default:!1},label:{type:String,default:null},description:{type:String,default:null},ariaLabel:{type:String,default:null},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(t,{emit:e}){const s=t,i=e,n=r=>{if(!s.disabled){const o=r.target.checked;i("update:modelValue",o),i("change",o)}};return(r,o)=>(g(),y("div",pS,[h("div",{class:De(["group relative inline-flex w-11 shrink-0 rounded-full p-0.5 inset-ring inset-ring-gray-900/5 outline-offset-2 transition-colors duration-200 ease-in-out dark:inset-ring-white/10",[t.modelValue?"bg-sky-600 outline-sky-600 dark:bg-sky-500 dark:outline-sky-500":"bg-gray-200 outline-sky-600 dark:bg-white/5 dark:outline-sky-500"]])},[h("span",{class:De(["size-5 rounded-full bg-white shadow-xs ring-1 ring-gray-900/5 transition-transform duration-200 ease-in-out",{"translate-x-5":t.modelValue}])},null,2),h("input",{id:t.id,type:"checkbox",name:t.name,checked:t.modelValue,disabled:t.disabled,"aria-label":t.ariaLabel||t.label,class:"absolute inset-0 appearance-none focus:outline-hidden cursor-pointer disabled:cursor-not-allowed",onChange:n},null,40,mS)],2),t.label||t.description?(g(),y("div",gS,[t.label?(g(),y("label",{key:0,for:t.id,class:De(["font-medium text-gray-900 cursor-pointer dark:text-white",{"cursor-not-allowed opacity-50":t.disabled}])},U(t.label),11,vS)):I("",!0),t.description?(g(),y("p",{key:1,id:`${t.id}-description`,class:"text-gray-500 dark:text-gray-400"},U(t.description),9,yS)):I("",!0)])):I("",!0)]))}},bS={class:"flex items-center"},xS=["id","name","value","checked"],kS=["for"],Qo={__name:"Radio",props:{id:{type:String,required:!0},name:{type:String,required:!0},value:{type:[String,Number,Boolean],required:!0},modelValue:{type:[String,Number,Boolean],default:null}},emits:["update:modelValue"],setup(t){return(e,s)=>(g(),y("div",bS,[h("input",{id:t.id,type:"radio",name:t.name,value:t.value,checked:t.modelValue===t.value,onChange:s[0]||(s[0]=i=>e.$emit("update:modelValue",t.value)),class:"relative size-4 appearance-none rounded-full border border-gray-300 bg-white before:absolute before:inset-1 before:rounded-full before:bg-white not-checked:before:hidden checked:border-sky-600 checked:bg-sky-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:before:bg-gray-400 dark:border-white/10 dark:bg-white/5 dark:checked:border-sky-500 dark:checked:bg-sky-500 dark:focus-visible:outline-sky-500 dark:disabled:border-white/5 dark:disabled:bg-white/10 dark:disabled:before:bg-white/20 forced-colors:appearance-auto forced-colors:before:hidden"},null,40,xS),h("label",{for:t.id,class:"ml-3 block text-sm/6 font-medium text-gray-900 dark:text-white"},[vt(e.$slots,"default")],8,kS)]))}},wS={class:"text-sm/6 font-semibold text-gray-900 dark:text-white"},_S={key:0,class:"mt-1 text-sm/6 text-gray-600 dark:text-gray-400"},SS={class:"mt-6 space-y-6"},CS={__name:"RadioGroup",props:{legend:{type:String,required:!0},description:{type:String,default:null}},setup(t){return(e,s)=>(g(),y("fieldset",null,[h("legend",wS,U(t.legend),1),t.description?(g(),y("p",_S,U(t.description),1)):I("",!0),h("div",SS,[vt(e.$slots,"default")])]))}},AS={class:"space-y-4"},VS={class:"flex items-start gap-4"},MS={class:"flex-1"},DS=["onClick"],bt={__name:"Repeater",props:{modelValue:{type:Array,default:()=>[]},addLabel:{type:String,default:"Add Item"},defaultItem:{type:[Object,Function],default:()=>({})}},emits:["update:modelValue"],setup(t,{emit:e}){const s=t,i=e,n=()=>{const l=typeof s.defaultItem=="function"?s.defaultItem():{...s.defaultItem,_id:Date.now()};i("update:modelValue",[...s.modelValue,l])},r=l=>{const a=s.modelValue.filter((d,u)=>u!==l);i("update:modelValue",a)},o=(l,a,d)=>{const u=[...s.modelValue];u[l]={...u[l],[a]:d},i("update:modelValue",u)};return(l,a)=>(g(),y("div",AS,[(g(!0),y(Q,null,xe(t.modelValue,(d,u)=>(g(),y("div",{key:d._id||u,class:"rounded-lg border border-gray-200 p-4 dark:border-gray-700"},[h("div",VS,[h("div",MS,[vt(l.$slots,"default",{item:d,index:u,update:(f,c)=>o(u,f,c)})]),h("button",{type:"button",onClick:f=>r(u),class:"shrink-0 rounded-md p-1.5 text-gray-400 transition hover:bg-red-50 hover:text-red-600 dark:hover:bg-red-900/20 dark:hover:text-red-400",title:"Remove"},[...a[0]||(a[0]=[h("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,DS)])]))),128)),x(Ie,{variant:"secondary",size:"sm",onClick:n,class:"inline-flex items-center"},{default:j(()=>[a[1]||(a[1]=h("svg",{class:"mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)),ue(" "+U(t.addLabel),1)]),_:1})]))}};let sd=[],qg=[];(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,s=0;e<t.length;e++)(e%2?qg:sd).push(s=s+t[e])})();function TS(t){if(t<768)return!1;for(let e=0,s=sd.length;;){let i=e+s>>1;if(t<sd[i])s=i;else if(t>=qg[i])e=i+1;else return!0;if(e==s)return!1}}function Af(t){return t>=127462&&t<=127487}const Vf=8205;function $S(t,e,s=!0,i=!0){return(s?Kg:ES)(t,e,i)}function Kg(t,e,s){if(e==t.length)return e;e&&Gg(t.charCodeAt(e))&&Jg(t.charCodeAt(e-1))&&e--;let i=du(t,e);for(e+=Mf(i);e<t.length;){let n=du(t,e);if(i==Vf||n==Vf||s&&TS(n))e+=Mf(n),i=n;else if(Af(n)){let r=0,o=e-2;for(;o>=0&&Af(du(t,o));)r++,o-=2;if(r%2==0)break;e+=2}else break}return e}function ES(t,e,s){for(;e>0;){let i=Kg(t,e-2,s);if(i<e)return i;e--}return 0}function du(t,e){let s=t.charCodeAt(e);if(!Jg(s)||e+1==t.length)return s;let i=t.charCodeAt(e+1);return Gg(i)?(s-55296<<10)+(i-56320)+65536:s}function Gg(t){return t>=56320&&t<57344}function Jg(t){return t>=55296&&t<56320}function Mf(t){return t<65536?1:2}class et{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,s,i){[e,s]=pr(this,e,s);let n=[];return this.decompose(0,e,n,2),i.length&&i.decompose(0,i.length,n,3),this.decompose(s,this.length,n,1),ai.from(n,this.length-(s-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,s=this.length){[e,s]=pr(this,e,s);let i=[];return this.decompose(e,s,i,0),ai.from(i,s-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let s=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),n=new Qr(this),r=new Qr(e);for(let o=s,l=s;;){if(n.next(o),r.next(o),o=0,n.lineBreak!=r.lineBreak||n.done!=r.done||n.value!=r.value)return!1;if(l+=n.value.length,n.done||l>=i)return!0}}iter(e=1){return new Qr(this,e)}iterRange(e,s=this.length){return new Yg(this,e,s)}iterLines(e,s){let i;if(e==null)i=this.iter();else{s==null&&(s=this.lines+1);let n=this.line(e).from;i=this.iterRange(n,Math.max(n,s==this.lines+1?this.length:s<=1?0:this.line(s-1).to))}return new Xg(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?et.empty:e.length<=32?new Mt(e):ai.from(Mt.split(e,[]))}}class Mt extends et{constructor(e,s=OS(e)){super(),this.text=e,this.length=s}get lines(){return this.text.length}get children(){return null}lineInner(e,s,i,n){for(let r=0;;r++){let o=this.text[r],l=n+o.length;if((s?i:l)>=e)return new PS(n,l,i,o);n=l+1,i++}}decompose(e,s,i,n){let r=e<=0&&s>=this.length?this:new Mt(Df(this.text,e,s),Math.min(s,this.length)-Math.max(0,e));if(n&1){let o=i.pop(),l=Ml(r.text,o.text.slice(),0,r.length);if(l.length<=32)i.push(new Mt(l,o.length+r.length));else{let a=l.length>>1;i.push(new Mt(l.slice(0,a)),new Mt(l.slice(a)))}}else i.push(r)}replace(e,s,i){if(!(i instanceof Mt))return super.replace(e,s,i);[e,s]=pr(this,e,s);let n=Ml(this.text,Ml(i.text,Df(this.text,0,e)),s),r=this.length+i.length-(s-e);return n.length<=32?new Mt(n,r):ai.from(Mt.split(n,[]),r)}sliceString(e,s=this.length,i=`
`){[e,s]=pr(this,e,s);let n="";for(let r=0,o=0;r<=s&&o<this.text.length;o++){let l=this.text[o],a=r+l.length;r>e&&o&&(n+=i),e<a&&s>r&&(n+=l.slice(Math.max(0,e-r),s-r)),r=a+1}return n}flatten(e){for(let s of this.text)e.push(s)}scanIdentical(){return 0}static split(e,s){let i=[],n=-1;for(let r of e)i.push(r),n+=r.length+1,i.length==32&&(s.push(new Mt(i,n)),i=[],n=-1);return n>-1&&s.push(new Mt(i,n)),s}}class ai extends et{constructor(e,s){super(),this.children=e,this.length=s,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,s,i,n){for(let r=0;;r++){let o=this.children[r],l=n+o.length,a=i+o.lines-1;if((s?a:l)>=e)return o.lineInner(e,s,i,n);n=l+1,i=a+1}}decompose(e,s,i,n){for(let r=0,o=0;o<=s&&r<this.children.length;r++){let l=this.children[r],a=o+l.length;if(e<=a&&s>=o){let d=n&((o<=e?1:0)|(a>=s?2:0));o>=e&&a<=s&&!d?i.push(l):l.decompose(e-o,s-o,i,d)}o=a+1}}replace(e,s,i){if([e,s]=pr(this,e,s),i.lines<this.lines)for(let n=0,r=0;n<this.children.length;n++){let o=this.children[n],l=r+o.length;if(e>=r&&s<=l){let a=o.replace(e-r,s-r,i),d=this.lines-o.lines+a.lines;if(a.lines<d>>4&&a.lines>d>>6){let u=this.children.slice();return u[n]=a,new ai(u,this.length-(s-e)+i.length)}return super.replace(r,l,a)}r=l+1}return super.replace(e,s,i)}sliceString(e,s=this.length,i=`
`){[e,s]=pr(this,e,s);let n="";for(let r=0,o=0;r<this.children.length&&o<=s;r++){let l=this.children[r],a=o+l.length;o>e&&r&&(n+=i),e<a&&s>o&&(n+=l.sliceString(e-o,s-o,i)),o=a+1}return n}flatten(e){for(let s of this.children)s.flatten(e)}scanIdentical(e,s){if(!(e instanceof ai))return 0;let i=0,[n,r,o,l]=s>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;n+=s,r+=s){if(n==o||r==l)return i;let a=this.children[n],d=e.children[r];if(a!=d)return i+a.scanIdentical(d,s);i+=a.length+1}}static from(e,s=e.reduce((i,n)=>i+n.length+1,-1)){let i=0;for(let p of e)i+=p.lines;if(i<32){let p=[];for(let k of e)k.flatten(p);return new Mt(p,s)}let n=Math.max(32,i>>5),r=n<<1,o=n>>1,l=[],a=0,d=-1,u=[];function f(p){let k;if(p.lines>r&&p instanceof ai)for(let C of p.children)f(C);else p.lines>o&&(a>o||!a)?(c(),l.push(p)):p instanceof Mt&&a&&(k=u[u.length-1])instanceof Mt&&p.lines+k.lines<=32?(a+=p.lines,d+=p.length+1,u[u.length-1]=new Mt(k.text.concat(p.text),k.length+1+p.length)):(a+p.lines>n&&c(),a+=p.lines,d+=p.length+1,u.push(p))}function c(){a!=0&&(l.push(u.length==1?u[0]:ai.from(u,d)),d=-1,a=u.length=0)}for(let p of e)f(p);return c(),l.length==1?l[0]:new ai(l,s)}}et.empty=new Mt([""],0);function OS(t){let e=-1;for(let s of t)e+=s.length+1;return e}function Ml(t,e,s=0,i=1e9){for(let n=0,r=0,o=!0;r<t.length&&n<=i;r++){let l=t[r],a=n+l.length;a>=s&&(a>i&&(l=l.slice(0,i-n)),n<s&&(l=l.slice(s-n)),o?(e[e.length-1]+=l,o=!1):e.push(l)),n=a+1}return e}function Df(t,e,s){return Ml(t,[""],e,s)}class Qr{constructor(e,s=1){this.dir=s,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[s>0?1:(e instanceof Mt?e.text.length:e.children.length)<<1]}nextInner(e,s){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,n=this.nodes[i],r=this.offsets[i],o=r>>1,l=n instanceof Mt?n.text.length:n.children.length;if(o==(s>0?l:0)){if(i==0)return this.done=!0,this.value="",this;s>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((r&1)==(s>0?0:1)){if(this.offsets[i]+=s,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(n instanceof Mt){let a=n.text[o+(s<0?-1:0)];if(this.offsets[i]+=s,a.length>Math.max(0,e))return this.value=e==0?a:s>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=n.children[o+(s<0?-1:0)];e>a.length?(e-=a.length,this.offsets[i]+=s):(s<0&&this.offsets[i]--,this.nodes.push(a),this.offsets.push(s>0?1:(a instanceof Mt?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class Yg{constructor(e,s,i){this.value="",this.done=!1,this.cursor=new Qr(e,s>i?-1:1),this.pos=s>i?e.length:0,this.from=Math.min(s,i),this.to=Math.max(s,i)}nextInner(e,s){if(s<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,s<0?this.pos-this.to:this.from-this.pos);let i=s<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:n}=this.cursor.next(e);return this.pos+=(n.length+e)*s,this.value=n.length<=i?n:s<0?n.slice(n.length-i):n.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class Xg{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:s,lineBreak:i,value:n}=this.inner.next(e);return s&&this.afterBreak?(this.value="",this.afterBreak=!1):s?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=n,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(et.prototype[Symbol.iterator]=function(){return this.iter()},Qr.prototype[Symbol.iterator]=Yg.prototype[Symbol.iterator]=Xg.prototype[Symbol.iterator]=function(){return this});class PS{constructor(e,s,i,n){this.from=e,this.to=s,this.number=i,this.text=n}get length(){return this.to-this.from}}function pr(t,e,s){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,s))]}function Ht(t,e,s=!0,i=!0){return $S(t,e,s,i)}function jS(t){return t>=56320&&t<57344}function RS(t){return t>=55296&&t<56320}function gs(t,e){let s=t.charCodeAt(e);if(!RS(s)||e+1==t.length)return s;let i=t.charCodeAt(e+1);return jS(i)?(s-55296<<10)+(i-56320)+65536:s}function kc(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function ui(t){return t<65536?1:2}const id=/\r\n?|\n/;var cs=(function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t})(cs||(cs={}));class pi{constructor(e){this.sections=e}get length(){let e=0;for(let s=0;s<this.sections.length;s+=2)e+=this.sections[s];return e}get newLength(){let e=0;for(let s=0;s<this.sections.length;s+=2){let i=this.sections[s+1];e+=i<0?this.sections[s]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let s=0,i=0,n=0;s<this.sections.length;){let r=this.sections[s++],o=this.sections[s++];o<0?(e(i,n,r),n+=r):n+=o,i+=r}}iterChangedRanges(e,s=!1){nd(this,e,s)}get invertedDesc(){let e=[];for(let s=0;s<this.sections.length;){let i=this.sections[s++],n=this.sections[s++];n<0?e.push(i,n):e.push(n,i)}return new pi(e)}composeDesc(e){return this.empty?e:e.empty?this:Qg(this,e)}mapDesc(e,s=!1){return e.empty?this:rd(this,e,s)}mapPos(e,s=-1,i=cs.Simple){let n=0,r=0;for(let o=0;o<this.sections.length;){let l=this.sections[o++],a=this.sections[o++],d=n+l;if(a<0){if(d>e)return r+(e-n);r+=l}else{if(i!=cs.Simple&&d>=e&&(i==cs.TrackDel&&n<e&&d>e||i==cs.TrackBefore&&n<e||i==cs.TrackAfter&&d>e))return null;if(d>e||d==e&&s<0&&!l)return e==n||s<0?r:r+a;r+=a}n=d}if(e>n)throw new RangeError(`Position ${e} is out of range for changeset of length ${n}`);return r}touchesRange(e,s=e){for(let i=0,n=0;i<this.sections.length&&n<=s;){let r=this.sections[i++],o=this.sections[i++],l=n+r;if(o>=0&&n<=s&&l>=e)return n<e&&l>s?"cover":!0;n=l}return!1}toString(){let e="";for(let s=0;s<this.sections.length;){let i=this.sections[s++],n=this.sections[s++];e+=(e?" ":"")+i+(n>=0?":"+n:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(s=>typeof s!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new pi(e)}static create(e){return new pi(e)}}class Pt extends pi{constructor(e,s){super(e),this.inserted=s}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return nd(this,(s,i,n,r,o)=>e=e.replace(n,n+(i-s),o),!1),e}mapDesc(e,s=!1){return rd(this,e,s,!0)}invert(e){let s=this.sections.slice(),i=[];for(let n=0,r=0;n<s.length;n+=2){let o=s[n],l=s[n+1];if(l>=0){s[n]=l,s[n+1]=o;let a=n>>1;for(;i.length<a;)i.push(et.empty);i.push(o?e.slice(r,r+o):et.empty)}r+=o}return new Pt(s,i)}compose(e){return this.empty?e:e.empty?this:Qg(this,e,!0)}map(e,s=!1){return e.empty?this:rd(this,e,s,!0)}iterChanges(e,s=!1){nd(this,e,s)}get desc(){return pi.create(this.sections)}filter(e){let s=[],i=[],n=[],r=new go(this);e:for(let o=0,l=0;;){let a=o==e.length?1e9:e[o++];for(;l<a||l==a&&r.len==0;){if(r.done)break e;let u=Math.min(r.len,a-l);Gt(n,u,-1);let f=r.ins==-1?-1:r.off==0?r.ins:0;Gt(s,u,f),f>0&&qi(i,s,r.text),r.forward(u),l+=u}let d=e[o++];for(;l<d;){if(r.done)break e;let u=Math.min(r.len,d-l);Gt(s,u,-1),Gt(n,u,r.ins==-1?-1:r.off==0?r.ins:0),r.forward(u),l+=u}}return{changes:new Pt(s,i),filtered:pi.create(n)}}toJSON(){let e=[];for(let s=0;s<this.sections.length;s+=2){let i=this.sections[s],n=this.sections[s+1];n<0?e.push(i):n==0?e.push([i]):e.push([i].concat(this.inserted[s>>1].toJSON()))}return e}static of(e,s,i){let n=[],r=[],o=0,l=null;function a(u=!1){if(!u&&!n.length)return;o<s&&Gt(n,s-o,-1);let f=new Pt(n,r);l=l?l.compose(f.map(l)):f,n=[],r=[],o=0}function d(u){if(Array.isArray(u))for(let f of u)d(f);else if(u instanceof Pt){if(u.length!=s)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${s})`);a(),l=l?l.compose(u.map(l)):u}else{let{from:f,to:c=f,insert:p}=u;if(f>c||f<0||c>s)throw new RangeError(`Invalid change range ${f} to ${c} (in doc of length ${s})`);let k=p?typeof p=="string"?et.of(p.split(i||id)):p:et.empty,C=k.length;if(f==c&&C==0)return;f<o&&a(),f>o&&Gt(n,f-o,-1),Gt(n,c-f,C),qi(r,n,k),o=c}}return d(e),a(!l),l}static empty(e){return new Pt(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let s=[],i=[];for(let n=0;n<e.length;n++){let r=e[n];if(typeof r=="number")s.push(r,-1);else{if(!Array.isArray(r)||typeof r[0]!="number"||r.some((o,l)=>l&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(r.length==1)s.push(r[0],0);else{for(;i.length<n;)i.push(et.empty);i[n]=et.of(r.slice(1)),s.push(r[0],i[n].length)}}}return new Pt(s,i)}static createSet(e,s){return new Pt(e,s)}}function Gt(t,e,s,i=!1){if(e==0&&s<=0)return;let n=t.length-2;n>=0&&s<=0&&s==t[n+1]?t[n]+=e:n>=0&&e==0&&t[n]==0?t[n+1]+=s:i?(t[n]+=e,t[n+1]+=s):t.push(e,s)}function qi(t,e,s){if(s.length==0)return;let i=e.length-2>>1;if(i<t.length)t[t.length-1]=t[t.length-1].append(s);else{for(;t.length<i;)t.push(et.empty);t.push(s)}}function nd(t,e,s){let i=t.inserted;for(let n=0,r=0,o=0;o<t.sections.length;){let l=t.sections[o++],a=t.sections[o++];if(a<0)n+=l,r+=l;else{let d=n,u=r,f=et.empty;for(;d+=l,u+=a,a&&i&&(f=f.append(i[o-2>>1])),!(s||o==t.sections.length||t.sections[o+1]<0);)l=t.sections[o++],a=t.sections[o++];e(n,d,r,u,f),n=d,r=u}}}function rd(t,e,s,i=!1){let n=[],r=i?[]:null,o=new go(t),l=new go(e);for(let a=-1;;){if(o.done&&l.len||l.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&l.ins==-1){let d=Math.min(o.len,l.len);Gt(n,d,-1),o.forward(d),l.forward(d)}else if(l.ins>=0&&(o.ins<0||a==o.i||o.off==0&&(l.len<o.len||l.len==o.len&&!s))){let d=l.len;for(Gt(n,l.ins,-1);d;){let u=Math.min(o.len,d);o.ins>=0&&a<o.i&&o.len<=u&&(Gt(n,0,o.ins),r&&qi(r,n,o.text),a=o.i),o.forward(u),d-=u}l.next()}else if(o.ins>=0){let d=0,u=o.len;for(;u;)if(l.ins==-1){let f=Math.min(u,l.len);d+=f,u-=f,l.forward(f)}else if(l.ins==0&&l.len<u)u-=l.len,l.next();else break;Gt(n,d,a<o.i?o.ins:0),r&&a<o.i&&qi(r,n,o.text),a=o.i,o.forward(o.len-u)}else{if(o.done&&l.done)return r?Pt.createSet(n,r):pi.create(n);throw new Error("Mismatched change set lengths")}}}function Qg(t,e,s=!1){let i=[],n=s?[]:null,r=new go(t),o=new go(e);for(let l=!1;;){if(r.done&&o.done)return n?Pt.createSet(i,n):pi.create(i);if(r.ins==0)Gt(i,r.len,0,l),r.next();else if(o.len==0&&!o.done)Gt(i,0,o.ins,l),n&&qi(n,i,o.text),o.next();else{if(r.done||o.done)throw new Error("Mismatched change set lengths");{let a=Math.min(r.len2,o.len),d=i.length;if(r.ins==-1){let u=o.ins==-1?-1:o.off?0:o.ins;Gt(i,a,u,l),n&&u&&qi(n,i,o.text)}else o.ins==-1?(Gt(i,r.off?0:r.len,a,l),n&&qi(n,i,r.textBit(a))):(Gt(i,r.off?0:r.len,o.off?0:o.ins,l),n&&!o.off&&qi(n,i,o.text));l=(r.ins>a||o.ins>=0&&o.len>a)&&(l||i.length>d),r.forward2(a),o.forward(a)}}}}class go{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,s=this.i-2>>1;return s>=e.length?et.empty:e[s]}textBit(e){let{inserted:s}=this.set,i=this.i-2>>1;return i>=s.length&&!e?et.empty:s[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Cn{constructor(e,s,i){this.from=e,this.to=s,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,s=-1){let i,n;return this.empty?i=n=e.mapPos(this.from,s):(i=e.mapPos(this.from,1),n=e.mapPos(this.to,-1)),i==this.from&&n==this.to?this:new Cn(i,n,this.flags)}extend(e,s=e){if(e<=this.anchor&&s>=this.anchor)return le.range(e,s);let i=Math.abs(e-this.anchor)>Math.abs(s-this.anchor)?e:s;return le.range(this.anchor,i)}eq(e,s=!1){return this.anchor==e.anchor&&this.head==e.head&&(!s||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return le.range(e.anchor,e.head)}static create(e,s,i){return new Cn(e,s,i)}}class le{constructor(e,s){this.ranges=e,this.mainIndex=s}map(e,s=-1){return e.empty?this:le.create(this.ranges.map(i=>i.map(e,s)),this.mainIndex)}eq(e,s=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],s))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new le([this.main],0)}addRange(e,s=!0){return le.create([e].concat(this.ranges),s?0:this.mainIndex+1)}replaceRange(e,s=this.mainIndex){let i=this.ranges.slice();return i[s]=e,le.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new le(e.ranges.map(s=>Cn.fromJSON(s)),e.main)}static single(e,s=e){return new le([le.range(e,s)],0)}static create(e,s=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,n=0;n<e.length;n++){let r=e[n];if(r.empty?r.from<=i:r.from<i)return le.normalized(e.slice(),s);i=r.to}return new le(e,s)}static cursor(e,s=0,i,n){return Cn.create(e,e,(s==0?0:s<0?8:16)|(i==null?7:Math.min(6,i))|(n??16777215)<<6)}static range(e,s,i,n){let r=(i??16777215)<<6|(n==null?7:Math.min(6,n));return s<e?Cn.create(s,e,48|r):Cn.create(e,s,(s>e?8:0)|r)}static normalized(e,s=0){let i=e[s];e.sort((n,r)=>n.from-r.from),s=e.indexOf(i);for(let n=1;n<e.length;n++){let r=e[n],o=e[n-1];if(r.empty?r.from<=o.to:r.from<o.to){let l=o.from,a=Math.max(r.to,o.to);n<=s&&s--,e.splice(--n,2,r.anchor>r.head?le.range(a,l):le.range(l,a))}}return new le(e,s)}}function Zg(t,e){for(let s of t.ranges)if(s.to>e)throw new RangeError("Selection points outside of document")}let wc=0;class $e{constructor(e,s,i,n,r){this.combine=e,this.compareInput=s,this.compare=i,this.isStatic=n,this.id=wc++,this.default=e([]),this.extensions=typeof r=="function"?r(this):r}get reader(){return this}static define(e={}){return new $e(e.combine||(s=>s),e.compareInput||((s,i)=>s===i),e.compare||(e.combine?(s,i)=>s===i:_c),!!e.static,e.enables)}of(e){return new Dl([],this,0,e)}compute(e,s){if(this.isStatic)throw new Error("Can't compute a static facet");return new Dl(e,this,1,s)}computeN(e,s){if(this.isStatic)throw new Error("Can't compute a static facet");return new Dl(e,this,2,s)}from(e,s){return s||(s=i=>i),this.compute([e],i=>s(i.field(e)))}}function _c(t,e){return t==e||t.length==e.length&&t.every((s,i)=>s===e[i])}class Dl{constructor(e,s,i,n){this.dependencies=e,this.facet=s,this.type=i,this.value=n,this.id=wc++}dynamicSlot(e){var s;let i=this.value,n=this.facet.compareInput,r=this.id,o=e[r]>>1,l=this.type==2,a=!1,d=!1,u=[];for(let f of this.dependencies)f=="doc"?a=!0:f=="selection"?d=!0:(((s=e[f.id])!==null&&s!==void 0?s:1)&1)==0&&u.push(e[f.id]);return{create(f){return f.values[o]=i(f),1},update(f,c){if(a&&c.docChanged||d&&(c.docChanged||c.selection)||od(f,u)){let p=i(f);if(l?!Tf(p,f.values[o],n):!n(p,f.values[o]))return f.values[o]=p,1}return 0},reconfigure:(f,c)=>{let p,k=c.config.address[r];if(k!=null){let C=Yl(c,k);if(this.dependencies.every(A=>A instanceof $e?c.facet(A)===f.facet(A):A instanceof Wt?c.field(A,!1)==f.field(A,!1):!0)||(l?Tf(p=i(f),C,n):n(p=i(f),C)))return f.values[o]=C,0}else p=i(f);return f.values[o]=p,1}}}}function Tf(t,e,s){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!s(t[i],e[i]))return!1;return!0}function od(t,e){let s=!1;for(let i of e)Zr(t,i)&1&&(s=!0);return s}function LS(t,e,s){let i=s.map(a=>t[a.id]),n=s.map(a=>a.type),r=i.filter(a=>!(a&1)),o=t[e.id]>>1;function l(a){let d=[];for(let u=0;u<i.length;u++){let f=Yl(a,i[u]);if(n[u]==2)for(let c of f)d.push(c);else d.push(f)}return e.combine(d)}return{create(a){for(let d of i)Zr(a,d);return a.values[o]=l(a),1},update(a,d){if(!od(a,r))return 0;let u=l(a);return e.compare(u,a.values[o])?0:(a.values[o]=u,1)},reconfigure(a,d){let u=od(a,i),f=d.config.facets[e.id],c=d.facet(e);if(f&&!u&&_c(s,f))return a.values[o]=c,0;let p=l(a);return e.compare(p,c)?(a.values[o]=c,0):(a.values[o]=p,1)}}}const Zo=$e.define({static:!0});class Wt{constructor(e,s,i,n,r){this.id=e,this.createF=s,this.updateF=i,this.compareF=n,this.spec=r,this.provides=void 0}static define(e){let s=new Wt(wc++,e.create,e.update,e.compare||((i,n)=>i===n),e);return e.provide&&(s.provides=e.provide(s)),s}create(e){let s=e.facet(Zo).find(i=>i.field==this);return(s?.create||this.createF)(e)}slot(e){let s=e[this.id]>>1;return{create:i=>(i.values[s]=this.create(i),1),update:(i,n)=>{let r=i.values[s],o=this.updateF(r,n);return this.compareF(r,o)?0:(i.values[s]=o,1)},reconfigure:(i,n)=>{let r=i.facet(Zo),o=n.facet(Zo),l;return(l=r.find(a=>a.field==this))&&l!=o.find(a=>a.field==this)?(i.values[s]=l.create(i),1):n.config.address[this.id]!=null?(i.values[s]=n.field(this),0):(i.values[s]=this.create(i),1)}}}init(e){return[this,Zo.of({field:this,create:e})]}get extension(){return this}}const xn={lowest:4,low:3,default:2,high:1,highest:0};function Or(t){return e=>new e0(e,t)}const In={highest:Or(xn.highest),high:Or(xn.high),default:Or(xn.default),low:Or(xn.low),lowest:Or(xn.lowest)};class e0{constructor(e,s){this.inner=e,this.prec=s}}class Oa{of(e){return new ld(this,e)}reconfigure(e){return Oa.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class ld{constructor(e,s){this.compartment=e,this.inner=s}}class Jl{constructor(e,s,i,n,r,o){for(this.base=e,this.compartments=s,this.dynamicSlots=i,this.address=n,this.staticValues=r,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let s=this.address[e.id];return s==null?e.default:this.staticValues[s>>1]}static resolve(e,s,i){let n=[],r=Object.create(null),o=new Map;for(let c of BS(e,s,o))c instanceof Wt?n.push(c):(r[c.facet.id]||(r[c.facet.id]=[])).push(c);let l=Object.create(null),a=[],d=[];for(let c of n)l[c.id]=d.length<<1,d.push(p=>c.slot(p));let u=i?.config.facets;for(let c in r){let p=r[c],k=p[0].facet,C=u&&u[c]||[];if(p.every(A=>A.type==0))if(l[k.id]=a.length<<1|1,_c(C,p))a.push(i.facet(k));else{let A=k.combine(p.map(V=>V.value));a.push(i&&k.compare(A,i.facet(k))?i.facet(k):A)}else{for(let A of p)A.type==0?(l[A.id]=a.length<<1|1,a.push(A.value)):(l[A.id]=d.length<<1,d.push(V=>A.dynamicSlot(V)));l[k.id]=d.length<<1,d.push(A=>LS(A,k,p))}}let f=d.map(c=>c(l));return new Jl(e,o,f,l,a,r)}}function BS(t,e,s){let i=[[],[],[],[],[]],n=new Map;function r(o,l){let a=n.get(o);if(a!=null){if(a<=l)return;let d=i[a].indexOf(o);d>-1&&i[a].splice(d,1),o instanceof ld&&s.delete(o.compartment)}if(n.set(o,l),Array.isArray(o))for(let d of o)r(d,l);else if(o instanceof ld){if(s.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let d=e.get(o.compartment)||o.inner;s.set(o.compartment,d),r(d,l)}else if(o instanceof e0)r(o.inner,o.prec);else if(o instanceof Wt)i[l].push(o),o.provides&&r(o.provides,l);else if(o instanceof Dl)i[l].push(o),o.facet.extensions&&r(o.facet.extensions,xn.default);else{let d=o.extension;if(!d)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);r(d,l)}}return r(t,xn.default),i.reduce((o,l)=>o.concat(l))}function Zr(t,e){if(e&1)return 2;let s=e>>1,i=t.status[s];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;t.status[s]=4;let n=t.computeSlot(t,t.config.dynamicSlots[s]);return t.status[s]=2|n}function Yl(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const t0=$e.define(),ad=$e.define({combine:t=>t.some(e=>e),static:!0}),s0=$e.define({combine:t=>t.length?t[0]:void 0,static:!0}),i0=$e.define(),n0=$e.define(),r0=$e.define(),o0=$e.define({combine:t=>t.length?t[0]:!1});class Li{constructor(e,s){this.type=e,this.value=s}static define(){return new IS}}class IS{of(e){return new Li(this,e)}}class NS{constructor(e){this.map=e}of(e){return new He(this,e)}}class He{constructor(e,s){this.type=e,this.value=s}map(e){let s=this.type.map(this.value,e);return s===void 0?void 0:s==this.value?this:new He(this.type,s)}is(e){return this.type==e}static define(e={}){return new NS(e.map||(s=>s))}static mapEffects(e,s){if(!e.length)return e;let i=[];for(let n of e){let r=n.map(s);r&&i.push(r)}return i}}He.reconfigure=He.define();He.appendConfig=He.define();class jt{constructor(e,s,i,n,r,o){this.startState=e,this.changes=s,this.selection=i,this.effects=n,this.annotations=r,this.scrollIntoView=o,this._doc=null,this._state=null,i&&Zg(i,s.newLength),r.some(l=>l.type==jt.time)||(this.annotations=r.concat(jt.time.of(Date.now())))}static create(e,s,i,n,r,o){return new jt(e,s,i,n,r,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let s of this.annotations)if(s.type==e)return s.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let s=this.annotation(jt.userEvent);return!!(s&&(s==e||s.length>e.length&&s.slice(0,e.length)==e&&s[e.length]=="."))}}jt.time=Li.define();jt.userEvent=Li.define();jt.addToHistory=Li.define();jt.remote=Li.define();function US(t,e){let s=[];for(let i=0,n=0;;){let r,o;if(i<t.length&&(n==e.length||e[n]>=t[i]))r=t[i++],o=t[i++];else if(n<e.length)r=e[n++],o=e[n++];else return s;!s.length||s[s.length-1]<r?s.push(r,o):s[s.length-1]<o&&(s[s.length-1]=o)}}function l0(t,e,s){var i;let n,r,o;return s?(n=e.changes,r=Pt.empty(e.changes.length),o=t.changes.compose(e.changes)):(n=e.changes.map(t.changes),r=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(n)),{changes:o,selection:e.selection?e.selection.map(r):(i=t.selection)===null||i===void 0?void 0:i.map(n),effects:He.mapEffects(t.effects,n).concat(He.mapEffects(e.effects,r)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function ud(t,e,s){let i=e.selection,n=rr(e.annotations);return e.userEvent&&(n=n.concat(jt.userEvent.of(e.userEvent))),{changes:e.changes instanceof Pt?e.changes:Pt.of(e.changes||[],s,t.facet(s0)),selection:i&&(i instanceof le?i:le.single(i.anchor,i.head)),effects:rr(e.effects),annotations:n,scrollIntoView:!!e.scrollIntoView}}function a0(t,e,s){let i=ud(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(s=!1);for(let r=1;r<e.length;r++){e[r].filter===!1&&(s=!1);let o=!!e[r].sequential;i=l0(i,ud(t,e[r],o?i.changes.newLength:t.doc.length),o)}let n=jt.create(t,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return FS(s?zS(n):n)}function zS(t){let e=t.startState,s=!0;for(let n of e.facet(i0)){let r=n(t);if(r===!1){s=!1;break}Array.isArray(r)&&(s=s===!0?r:US(s,r))}if(s!==!0){let n,r;if(s===!1)r=t.changes.invertedDesc,n=Pt.empty(e.doc.length);else{let o=t.changes.filter(s);n=o.changes,r=o.filtered.mapDesc(o.changes).invertedDesc}t=jt.create(e,n,t.selection&&t.selection.map(r),He.mapEffects(t.effects,r),t.annotations,t.scrollIntoView)}let i=e.facet(n0);for(let n=i.length-1;n>=0;n--){let r=i[n](t);r instanceof jt?t=r:Array.isArray(r)&&r.length==1&&r[0]instanceof jt?t=r[0]:t=a0(e,rr(r),!1)}return t}function FS(t){let e=t.startState,s=e.facet(r0),i=t;for(let n=s.length-1;n>=0;n--){let r=s[n](t);r&&Object.keys(r).length&&(i=l0(i,ud(e,r,t.changes.newLength),!0))}return i==t?t:jt.create(e,t.changes,t.selection,i.effects,i.annotations,i.scrollIntoView)}const HS=[];function rr(t){return t==null?HS:Array.isArray(t)?t:[t]}var kt=(function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t})(kt||(kt={}));const WS=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let dd;try{dd=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function qS(t){if(dd)return dd.test(t);for(let e=0;e<t.length;e++){let s=t[e];if(/\w/.test(s)||s>""&&(s.toUpperCase()!=s.toLowerCase()||WS.test(s)))return!0}return!1}function KS(t){return e=>{if(!/\S/.test(e))return kt.Space;if(qS(e))return kt.Word;for(let s=0;s<t.length;s++)if(e.indexOf(t[s])>-1)return kt.Word;return kt.Other}}class Qe{constructor(e,s,i,n,r,o){this.config=e,this.doc=s,this.selection=i,this.values=n,this.status=e.statusTemplate.slice(),this.computeSlot=r,o&&(o._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)Zr(this,l<<1);this.computeSlot=null}field(e,s=!0){let i=this.config.address[e.id];if(i==null){if(s)throw new RangeError("Field is not present in this state");return}return Zr(this,i),Yl(this,i)}update(...e){return a0(this,e,!0)}applyTransaction(e){let s=this.config,{base:i,compartments:n}=s;for(let l of e.effects)l.is(Oa.reconfigure)?(s&&(n=new Map,s.compartments.forEach((a,d)=>n.set(d,a)),s=null),n.set(l.value.compartment,l.value.extension)):l.is(He.reconfigure)?(s=null,i=l.value):l.is(He.appendConfig)&&(s=null,i=rr(i).concat(l.value));let r;s?r=e.startState.values.slice():(s=Jl.resolve(i,n,this),r=new Qe(s,this.doc,this.selection,s.dynamicSlots.map(()=>null),(a,d)=>d.reconfigure(a,this),null).values);let o=e.startState.facet(ad)?e.newSelection:e.newSelection.asSingle();new Qe(s,e.newDoc,o,r,(l,a)=>a.update(l,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(s=>({changes:{from:s.from,to:s.to,insert:e},range:le.cursor(s.from+e.length)}))}changeByRange(e){let s=this.selection,i=e(s.ranges[0]),n=this.changes(i.changes),r=[i.range],o=rr(i.effects);for(let l=1;l<s.ranges.length;l++){let a=e(s.ranges[l]),d=this.changes(a.changes),u=d.map(n);for(let c=0;c<l;c++)r[c]=r[c].map(u);let f=n.mapDesc(d,!0);r.push(a.range.map(f)),n=n.compose(u),o=He.mapEffects(o,u).concat(He.mapEffects(rr(a.effects),f))}return{changes:n,selection:le.create(r,s.mainIndex),effects:o}}changes(e=[]){return e instanceof Pt?e:Pt.of(e,this.doc.length,this.facet(Qe.lineSeparator))}toText(e){return et.of(e.split(this.facet(Qe.lineSeparator)||id))}sliceDoc(e=0,s=this.doc.length){return this.doc.sliceString(e,s,this.lineBreak)}facet(e){let s=this.config.address[e.id];return s==null?e.default:(Zr(this,s),Yl(this,s))}toJSON(e){let s={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let n=e[i];n instanceof Wt&&this.config.address[n.id]!=null&&(s[i]=n.spec.toJSON(this.field(e[i]),this))}return s}static fromJSON(e,s={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let n=[];if(i){for(let r in i)if(Object.prototype.hasOwnProperty.call(e,r)){let o=i[r],l=e[r];n.push(o.init(a=>o.spec.fromJSON(l,a)))}}return Qe.create({doc:e.doc,selection:le.fromJSON(e.selection),extensions:s.extensions?n.concat([s.extensions]):n})}static create(e={}){let s=Jl.resolve(e.extensions||[],new Map),i=e.doc instanceof et?e.doc:et.of((e.doc||"").split(s.staticFacet(Qe.lineSeparator)||id)),n=e.selection?e.selection instanceof le?e.selection:le.single(e.selection.anchor,e.selection.head):le.single(0);return Zg(n,i.length),s.staticFacet(ad)||(n=n.asSingle()),new Qe(s,i,n,s.dynamicSlots.map(()=>null),(r,o)=>o.create(r),null)}get tabSize(){return this.facet(Qe.tabSize)}get lineBreak(){return this.facet(Qe.lineSeparator)||`
`}get readOnly(){return this.facet(o0)}phrase(e,...s){for(let i of this.facet(Qe.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return s.length&&(e=e.replace(/\$(\$|\d*)/g,(i,n)=>{if(n=="$")return"$";let r=+(n||1);return!r||r>s.length?i:s[r-1]})),e}languageDataAt(e,s,i=-1){let n=[];for(let r of this.facet(t0))for(let o of r(this,s,i))Object.prototype.hasOwnProperty.call(o,e)&&n.push(o[e]);return n}charCategorizer(e){return KS(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:s,from:i,length:n}=this.doc.lineAt(e),r=this.charCategorizer(e),o=e-i,l=e-i;for(;o>0;){let a=Ht(s,o,!1);if(r(s.slice(a,o))!=kt.Word)break;o=a}for(;l<n;){let a=Ht(s,l);if(r(s.slice(l,a))!=kt.Word)break;l=a}return o==l?null:le.range(o+i,l+i)}}Qe.allowMultipleSelections=ad;Qe.tabSize=$e.define({combine:t=>t.length?t[0]:4});Qe.lineSeparator=s0;Qe.readOnly=o0;Qe.phrases=$e.define({compare(t,e){let s=Object.keys(t),i=Object.keys(e);return s.length==i.length&&s.every(n=>t[n]==e[n])}});Qe.languageData=t0;Qe.changeFilter=i0;Qe.transactionFilter=n0;Qe.transactionExtender=r0;Oa.reconfigure=He.define();function gi(t,e,s={}){let i={};for(let n of t)for(let r of Object.keys(n)){let o=n[r],l=i[r];if(l===void 0)i[r]=o;else if(!(l===o||o===void 0))if(Object.hasOwnProperty.call(s,r))i[r]=s[r](l,o);else throw new Error("Config merge conflict for field "+r)}for(let n in e)i[n]===void 0&&(i[n]=e[n]);return i}class En{eq(e){return this==e}range(e,s=e){return cd.create(e,s,this)}}En.prototype.startSide=En.prototype.endSide=0;En.prototype.point=!1;En.prototype.mapMode=cs.TrackDel;let cd=class u0{constructor(e,s,i){this.from=e,this.to=s,this.value=i}static create(e,s,i){return new u0(e,s,i)}};function hd(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class Sc{constructor(e,s,i,n){this.from=e,this.to=s,this.value=i,this.maxPoint=n}get length(){return this.to[this.to.length-1]}findIndex(e,s,i,n=0){let r=i?this.to:this.from;for(let o=n,l=r.length;;){if(o==l)return o;let a=o+l>>1,d=r[a]-e||(i?this.value[a].endSide:this.value[a].startSide)-s;if(a==o)return d>=0?o:l;d>=0?l=a:o=a+1}}between(e,s,i,n){for(let r=this.findIndex(s,-1e9,!0),o=this.findIndex(i,1e9,!1,r);r<o;r++)if(n(this.from[r]+e,this.to[r]+e,this.value[r])===!1)return!1}map(e,s){let i=[],n=[],r=[],o=-1,l=-1;for(let a=0;a<this.value.length;a++){let d=this.value[a],u=this.from[a]+e,f=this.to[a]+e,c,p;if(u==f){let k=s.mapPos(u,d.startSide,d.mapMode);if(k==null||(c=p=k,d.startSide!=d.endSide&&(p=s.mapPos(u,d.endSide),p<c)))continue}else if(c=s.mapPos(u,d.startSide),p=s.mapPos(f,d.endSide),c>p||c==p&&d.startSide>0&&d.endSide<=0)continue;(p-c||d.endSide-d.startSide)<0||(o<0&&(o=c),d.point&&(l=Math.max(l,p-c)),i.push(d),n.push(c-o),r.push(p-o))}return{mapped:i.length?new Sc(n,r,i,l):null,pos:o}}}class Ze{constructor(e,s,i,n){this.chunkPos=e,this.chunk=s,this.nextLayer=i,this.maxPoint=n}static create(e,s,i,n){return new Ze(e,s,i,n)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let s of this.chunk)e+=s.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:s=[],sort:i=!1,filterFrom:n=0,filterTo:r=this.length}=e,o=e.filter;if(s.length==0&&!o)return this;if(i&&(s=s.slice().sort(hd)),this.isEmpty)return s.length?Ze.of(s):this;let l=new d0(this,null,-1).goto(0),a=0,d=[],u=new Oi;for(;l.value||a<s.length;)if(a<s.length&&(l.from-s[a].from||l.startSide-s[a].value.startSide)>=0){let f=s[a++];u.addInner(f.from,f.to,f.value)||d.push(f)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(a==s.length||this.chunkEnd(l.chunkIndex)<s[a].from)&&(!o||n>this.chunkEnd(l.chunkIndex)||r<this.chunkPos[l.chunkIndex])&&u.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!o||n>l.to||r<l.from||o(l.from,l.to,l.value))&&(u.addInner(l.from,l.to,l.value)||d.push(cd.create(l.from,l.to,l.value))),l.next());return u.finishInner(this.nextLayer.isEmpty&&!d.length?Ze.empty:this.nextLayer.update({add:d,filter:o,filterFrom:n,filterTo:r}))}map(e){if(e.empty||this.isEmpty)return this;let s=[],i=[],n=-1;for(let o=0;o<this.chunk.length;o++){let l=this.chunkPos[o],a=this.chunk[o],d=e.touchesRange(l,l+a.length);if(d===!1)n=Math.max(n,a.maxPoint),s.push(a),i.push(e.mapPos(l));else if(d===!0){let{mapped:u,pos:f}=a.map(l,e);u&&(n=Math.max(n,u.maxPoint),s.push(u),i.push(f))}}let r=this.nextLayer.map(e);return s.length==0?r:new Ze(i,s,r||Ze.empty,n)}between(e,s,i){if(!this.isEmpty){for(let n=0;n<this.chunk.length;n++){let r=this.chunkPos[n],o=this.chunk[n];if(s>=r&&e<=r+o.length&&o.between(r,e-r,s-r,i)===!1)return}this.nextLayer.between(e,s,i)}}iter(e=0){return vo.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,s=0){return vo.from(e).goto(s)}static compare(e,s,i,n,r=-1){let o=e.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=r),l=s.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=r),a=$f(o,l,i),d=new Pr(o,a,r),u=new Pr(l,a,r);i.iterGaps((f,c,p)=>Ef(d,f,u,c,p,n)),i.empty&&i.length==0&&Ef(d,0,u,0,0,n)}static eq(e,s,i=0,n){n==null&&(n=999999999);let r=e.filter(u=>!u.isEmpty&&s.indexOf(u)<0),o=s.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(r.length!=o.length)return!1;if(!r.length)return!0;let l=$f(r,o),a=new Pr(r,l,0).goto(i),d=new Pr(o,l,0).goto(i);for(;;){if(a.to!=d.to||!fd(a.active,d.active)||a.point&&(!d.point||!a.point.eq(d.point)))return!1;if(a.to>n)return!0;a.next(),d.next()}}static spans(e,s,i,n,r=-1){let o=new Pr(e,null,r).goto(s),l=s,a=o.openStart;for(;;){let d=Math.min(o.to,i);if(o.point){let u=o.activeForPoint(o.to),f=o.pointFrom<s?u.length+1:o.point.startSide<0?u.length:Math.min(u.length,a);n.point(l,d,o.point,u,f,o.pointRank),a=Math.min(o.openEnd(d),u.length)}else d>l&&(n.span(l,d,o.active,a),a=o.openEnd(d));if(o.to>i)return a+(o.point&&o.to>i?1:0);l=o.to,o.next()}}static of(e,s=!1){let i=new Oi;for(let n of e instanceof cd?[e]:s?GS(e):e)i.add(n.from,n.to,n.value);return i.finish()}static join(e){if(!e.length)return Ze.empty;let s=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let n=e[i];n!=Ze.empty;n=n.nextLayer)s=new Ze(n.chunkPos,n.chunk,s,Math.max(n.maxPoint,s.maxPoint));return s}}Ze.empty=new Ze([],[],null,-1);function GS(t){if(t.length>1)for(let e=t[0],s=1;s<t.length;s++){let i=t[s];if(hd(e,i)>0)return t.slice().sort(hd);e=i}return t}Ze.empty.nextLayer=Ze.empty;class Oi{finishChunk(e){this.chunks.push(new Sc(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,s,i){this.addInner(e,s,i)||(this.nextLayer||(this.nextLayer=new Oi)).add(e,s,i)}addInner(e,s,i){let n=e-this.lastTo||i.startSide-this.last.endSide;if(n<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return n<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(s-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=s,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,s-e)),!0)}addChunk(e,s){if((e-this.lastTo||s.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,s.maxPoint),this.chunks.push(s),this.chunkPos.push(e);let i=s.value.length-1;return this.last=s.value[i],this.lastFrom=s.from[i]+e,this.lastTo=s.to[i]+e,!0}finish(){return this.finishInner(Ze.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let s=Ze.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,s}}function $f(t,e,s){let i=new Map;for(let r of t)for(let o=0;o<r.chunk.length;o++)r.chunk[o].maxPoint<=0&&i.set(r.chunk[o],r.chunkPos[o]);let n=new Set;for(let r of e)for(let o=0;o<r.chunk.length;o++){let l=i.get(r.chunk[o]);l!=null&&(s?s.mapPos(l):l)==r.chunkPos[o]&&!s?.touchesRange(l,l+r.chunk[o].length)&&n.add(r.chunk[o])}return n}class d0{constructor(e,s,i,n=0){this.layer=e,this.skip=s,this.minPoint=i,this.rank=n}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,s=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,s,!1),this}gotoInner(e,s,i){for(;this.chunkIndex<this.layer.chunk.length;){let n=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(n)||this.layer.chunkEnd(this.chunkIndex)<e||n.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let n=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],s,!0);(!i||this.rangeIndex<n)&&this.setRangeIndex(n)}this.next()}forward(e,s){(this.to-e||this.endSide-s)<0&&this.gotoInner(e,s,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],s=this.layer.chunk[this.chunkIndex],i=e+s.from[this.rangeIndex];if(this.from=i,this.to=e+s.to[this.rangeIndex],this.value=s.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class vo{constructor(e){this.heap=e}static from(e,s=null,i=-1){let n=[];for(let r=0;r<e.length;r++)for(let o=e[r];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&n.push(new d0(o,s,i,r));return n.length==1?n[0]:new vo(n)}get startSide(){return this.value?this.value.startSide:0}goto(e,s=-1e9){for(let i of this.heap)i.goto(e,s);for(let i=this.heap.length>>1;i>=0;i--)cu(this.heap,i);return this.next(),this}forward(e,s){for(let i of this.heap)i.forward(e,s);for(let i=this.heap.length>>1;i>=0;i--)cu(this.heap,i);(this.to-e||this.value.endSide-s)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),cu(this.heap,0)}}}function cu(t,e){for(let s=t[e];;){let i=(e<<1)+1;if(i>=t.length)break;let n=t[i];if(i+1<t.length&&n.compare(t[i+1])>=0&&(n=t[i+1],i++),s.compare(n)<0)break;t[i]=s,t[e]=n,e=i}}class Pr{constructor(e,s,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=vo.from(e,s,i)}goto(e,s=-1e9){return this.cursor.goto(e,s),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=s,this.openStart=-1,this.next(),this}forward(e,s){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-s)<0;)this.removeActive(this.minActive);this.cursor.forward(e,s)}removeActive(e){el(this.active,e),el(this.activeTo,e),el(this.activeRank,e),this.minActive=Of(this.active,this.activeTo)}addActive(e){let s=0,{value:i,to:n,rank:r}=this.cursor;for(;s<this.activeRank.length&&(r-this.activeRank[s]||n-this.activeTo[s])>0;)s++;tl(this.active,s,i),tl(this.activeTo,s,n),tl(this.activeRank,s,r),e&&tl(e,s,this.cursor.from),this.minActive=Of(this.active,this.activeTo)}next(){let e=this.to,s=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let n=this.minActive;if(n>-1&&(this.activeTo[n]-this.cursor.from||this.active[n].endSide-this.cursor.startSide)<0){if(this.activeTo[n]>e){this.to=this.activeTo[n],this.endSide=this.active[n].endSide;break}this.removeActive(n),i&&el(i,n)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let r=this.cursor.value;if(!r.point)this.addActive(i),this.cursor.next();else if(s&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=r,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=r.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let n=i.length-1;n>=0&&i[n]<e;n--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let s=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&s.push(this.active[i]);return s.reverse()}openEnd(e){let s=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)s++;return s}}function Ef(t,e,s,i,n,r){t.goto(e),s.goto(i);let o=i+n,l=i,a=i-e;for(;;){let d=t.to+a-s.to,u=d||t.endSide-s.endSide,f=u<0?t.to+a:s.to,c=Math.min(f,o);if(t.point||s.point?t.point&&s.point&&(t.point==s.point||t.point.eq(s.point))&&fd(t.activeForPoint(t.to),s.activeForPoint(s.to))||r.comparePoint(l,c,t.point,s.point):c>l&&!fd(t.active,s.active)&&r.compareRange(l,c,t.active,s.active),f>o)break;(d||t.openEnd!=s.openEnd)&&r.boundChange&&r.boundChange(f),l=f,u<=0&&t.next(),u>=0&&s.next()}}function fd(t,e){if(t.length!=e.length)return!1;for(let s=0;s<t.length;s++)if(t[s]!=e[s]&&!t[s].eq(e[s]))return!1;return!0}function el(t,e){for(let s=e,i=t.length-1;s<i;s++)t[s]=t[s+1];t.pop()}function tl(t,e,s){for(let i=t.length-1;i>=e;i--)t[i+1]=t[i];t[e]=s}function Of(t,e){let s=-1,i=1e9;for(let n=0;n<e.length;n++)(e[n]-i||t[n].endSide-t[s].endSide)<0&&(s=n,i=e[n]);return s}function Ar(t,e,s=t.length){let i=0;for(let n=0;n<s&&n<t.length;)t.charCodeAt(n)==9?(i+=e-i%e,n++):(i++,n=Ht(t,n));return i}function pd(t,e,s,i){for(let n=0,r=0;;){if(r>=e)return n;if(n==t.length)break;r+=t.charCodeAt(n)==9?s-r%s:1,n=Ht(t,n)}return i===!0?-1:t.length}const md="",Pf=typeof Symbol>"u"?"__"+md:Symbol.for(md),gd=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),jf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class tn{constructor(e,s){this.rules=[];let{finish:i}=s||{};function n(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function r(o,l,a,d){let u=[],f=/^@(\w+)\b/.exec(o[0]),c=f&&f[1]=="keyframes";if(f&&l==null)return a.push(o[0]+";");for(let p in l){let k=l[p];if(/&/.test(p))r(p.split(/,\s*/).map(C=>o.map(A=>C.replace(/&/,A))).reduce((C,A)=>C.concat(A)),k,a);else if(k&&typeof k=="object"){if(!f)throw new RangeError("The value of a property ("+p+") should be a primitive value.");r(n(p),k,u,c)}else k!=null&&u.push(p.replace(/_.*/,"").replace(/[A-Z]/g,C=>"-"+C.toLowerCase())+": "+k+";")}(u.length||c)&&a.push((i&&!f&&!d?o.map(i):o).join(", ")+" {"+u.join(" ")+"}")}for(let o in e)r(n(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=jf[Pf]||1;return jf[Pf]=e+1,md+e.toString(36)}static mount(e,s,i){let n=e[gd],r=i&&i.nonce;n?r&&n.setNonce(r):n=new JS(e,r),n.mount(Array.isArray(s)?s:[s],e)}}let Rf=new Map;class JS{constructor(e,s){let i=e.ownerDocument||e,n=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&n.CSSStyleSheet){let r=Rf.get(i);if(r)return e[gd]=r;this.sheet=new n.CSSStyleSheet,Rf.set(i,this)}else this.styleTag=i.createElement("style"),s&&this.styleTag.setAttribute("nonce",s);this.modules=[],e[gd]=this}mount(e,s){let i=this.sheet,n=0,r=0;for(let o=0;o<e.length;o++){let l=e[o],a=this.modules.indexOf(l);if(a<r&&a>-1&&(this.modules.splice(a,1),r--,a=-1),a==-1){if(this.modules.splice(r++,0,l),i)for(let d=0;d<l.rules.length;d++)i.insertRule(l.rules[d],n++)}else{for(;r<a;)n+=this.modules[r++].rules.length;n+=l.rules.length,r++}}if(i)s.adoptedStyleSheets.indexOf(this.sheet)<0&&(s.adoptedStyleSheets=[this.sheet,...s.adoptedStyleSheets]);else{let o="";for(let a=0;a<this.modules.length;a++)o+=this.modules[a].getRules()+`
`;this.styleTag.textContent=o;let l=s.head||s;this.styleTag.parentNode!=l&&l.insertBefore(this.styleTag,l.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var sn={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},yo={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},YS=typeof navigator<"u"&&/Mac/.test(navigator.platform),XS=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Ut=0;Ut<10;Ut++)sn[48+Ut]=sn[96+Ut]=String(Ut);for(var Ut=1;Ut<=24;Ut++)sn[Ut+111]="F"+Ut;for(var Ut=65;Ut<=90;Ut++)sn[Ut]=String.fromCharCode(Ut+32),yo[Ut]=String.fromCharCode(Ut);for(var hu in sn)yo.hasOwnProperty(hu)||(yo[hu]=sn[hu]);function QS(t){var e=YS&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||XS&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",s=!e&&t.key||(t.shiftKey?yo:sn)[t.keyCode]||t.key||"Unidentified";return s=="Esc"&&(s="Escape"),s=="Del"&&(s="Delete"),s=="Left"&&(s="ArrowLeft"),s=="Up"&&(s="ArrowUp"),s=="Right"&&(s="ArrowRight"),s=="Down"&&(s="ArrowDown"),s}function ct(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,s=arguments[1];if(s&&typeof s=="object"&&s.nodeType==null&&!Array.isArray(s)){for(var i in s)if(Object.prototype.hasOwnProperty.call(s,i)){var n=s[i];typeof n=="string"?t.setAttribute(i,n):n!=null&&(t[i]=n)}e++}for(;e<arguments.length;e++)c0(t,arguments[e]);return t}function c0(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var s=0;s<e.length;s++)c0(t,e[s]);else throw new RangeError("Unsupported child node: "+e)}let us=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},vd=typeof document<"u"?document:{documentElement:{style:{}}};const yd=/Edge\/(\d+)/.exec(us.userAgent),h0=/MSIE \d/.test(us.userAgent),bd=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(us.userAgent),Pa=!!(h0||bd||yd),Lf=!Pa&&/gecko\/(\d+)/i.test(us.userAgent),fu=!Pa&&/Chrome\/(\d+)/.exec(us.userAgent),ZS="webkitFontSmoothing"in vd.documentElement.style,xd=!Pa&&/Apple Computer/.test(us.vendor),Bf=xd&&(/Mobile\/\w+/.test(us.userAgent)||us.maxTouchPoints>2);var Ae={mac:Bf||/Mac/.test(us.platform),windows:/Win/.test(us.platform),linux:/Linux|X11/.test(us.platform),ie:Pa,ie_version:h0?vd.documentMode||6:bd?+bd[1]:yd?+yd[1]:0,gecko:Lf,gecko_version:Lf?+(/Firefox\/(\d+)/.exec(us.userAgent)||[0,0])[1]:0,chrome:!!fu,chrome_version:fu?+fu[1]:0,ios:Bf,android:/Android\b/.test(us.userAgent),webkit_version:ZS?+(/\bAppleWebKit\/(\d+)/.exec(us.userAgent)||[0,0])[1]:0,safari:xd,safari_version:xd?+(/\bVersion\/(\d+(\.\d+)?)/.exec(us.userAgent)||[0,0])[1]:0,tabSize:vd.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function bo(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function kd(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function Tl(t,e){if(!e.anchorNode)return!1;try{return kd(t,e.anchorNode)}catch{return!1}}function xo(t){return t.nodeType==3?Pn(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function eo(t,e,s,i){return s?If(t,e,s,i,-1)||If(t,e,s,i,1):!1}function On(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function Xl(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function If(t,e,s,i,n){for(;;){if(t==s&&e==i)return!0;if(e==(n<0?0:mi(t))){if(t.nodeName=="DIV")return!1;let r=t.parentNode;if(!r||r.nodeType!=1)return!1;e=On(t)+(n<0?0:1),t=r}else if(t.nodeType==1){if(t=t.childNodes[e+(n<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=n<0?mi(t):0}else return!1}}function mi(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function ja(t,e){let s=e?t.left:t.right;return{left:s,right:s,top:t.top,bottom:t.bottom}}function eC(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function f0(t,e){let s=e.width/t.offsetWidth,i=e.height/t.offsetHeight;return(s>.995&&s<1.005||!isFinite(s)||Math.abs(e.width-t.offsetWidth)<1)&&(s=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-t.offsetHeight)<1)&&(i=1),{scaleX:s,scaleY:i}}function tC(t,e,s,i,n,r,o,l){let a=t.ownerDocument,d=a.defaultView||window;for(let u=t,f=!1;u&&!f;)if(u.nodeType==1){let c,p=u==a.body,k=1,C=1;if(p)c=eC(d);else{if(/^(fixed|sticky)$/.test(getComputedStyle(u).position)&&(f=!0),u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let R=u.getBoundingClientRect();({scaleX:k,scaleY:C}=f0(u,R)),c={left:R.left,right:R.left+u.clientWidth*k,top:R.top,bottom:R.top+u.clientHeight*C}}let A=0,V=0;if(n=="nearest")e.top<c.top?(V=e.top-(c.top+o),s>0&&e.bottom>c.bottom+V&&(V=e.bottom-c.bottom+o)):e.bottom>c.bottom&&(V=e.bottom-c.bottom+o,s<0&&e.top-V<c.top&&(V=e.top-(c.top+o)));else{let R=e.bottom-e.top,P=c.bottom-c.top;V=(n=="center"&&R<=P?e.top+R/2-P/2:n=="start"||n=="center"&&s<0?e.top-o:e.bottom-P+o)-c.top}if(i=="nearest"?e.left<c.left?(A=e.left-(c.left+r),s>0&&e.right>c.right+A&&(A=e.right-c.right+r)):e.right>c.right&&(A=e.right-c.right+r,s<0&&e.left<c.left+A&&(A=e.left-(c.left+r))):A=(i=="center"?e.left+(e.right-e.left)/2-(c.right-c.left)/2:i=="start"==l?e.left-r:e.right-(c.right-c.left)+r)-c.left,A||V)if(p)d.scrollBy(A,V);else{let R=0,P=0;if(V){let z=u.scrollTop;u.scrollTop+=V/C,P=(u.scrollTop-z)*C}if(A){let z=u.scrollLeft;u.scrollLeft+=A/k,R=(u.scrollLeft-z)*k}e={left:e.left-R,top:e.top-P,right:e.right-R,bottom:e.bottom-P},R&&Math.abs(R-A)<1&&(i="nearest"),P&&Math.abs(P-V)<1&&(n="nearest")}if(p)break;(e.top<c.top||e.bottom>c.bottom||e.left<c.left||e.right>c.right)&&(e={left:Math.max(e.left,c.left),right:Math.min(e.right,c.right),top:Math.max(e.top,c.top),bottom:Math.min(e.bottom,c.bottom)}),u=u.assignedSlot||u.parentNode}else if(u.nodeType==11)u=u.host;else break}function sC(t){let e=t.ownerDocument,s,i;for(let n=t.parentNode;n&&!(n==e.body||s&&i);)if(n.nodeType==1)!i&&n.scrollHeight>n.clientHeight&&(i=n),!s&&n.scrollWidth>n.clientWidth&&(s=n),n=n.assignedSlot||n.parentNode;else if(n.nodeType==11)n=n.host;else break;return{x:s,y:i}}class iC{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:s,focusNode:i}=e;this.set(s,Math.min(e.anchorOffset,s?mi(s):0),i,Math.min(e.focusOffset,i?mi(i):0))}set(e,s,i,n){this.anchorNode=e,this.anchorOffset=s,this.focusNode=i,this.focusOffset=n}}let yn=null;Ae.safari&&Ae.safari_version>=26&&(yn=!1);function p0(t){if(t.setActive)return t.setActive();if(yn)return t.focus(yn);let e=[];for(let s=t;s&&(e.push(s,s.scrollTop,s.scrollLeft),s!=s.ownerDocument);s=s.parentNode);if(t.focus(yn==null?{get preventScroll(){return yn={preventScroll:!0},!0}}:void 0),!yn){yn=!1;for(let s=0;s<e.length;){let i=e[s++],n=e[s++],r=e[s++];i.scrollTop!=n&&(i.scrollTop=n),i.scrollLeft!=r&&(i.scrollLeft=r)}}}let Nf;function Pn(t,e,s=e){let i=Nf||(Nf=document.createRange());return i.setEnd(t,s),i.setStart(t,e),i}function or(t,e,s,i){let n={key:e,code:e,keyCode:s,which:s,cancelable:!0};i&&({altKey:n.altKey,ctrlKey:n.ctrlKey,shiftKey:n.shiftKey,metaKey:n.metaKey}=i);let r=new KeyboardEvent("keydown",n);r.synthetic=!0,t.dispatchEvent(r);let o=new KeyboardEvent("keyup",n);return o.synthetic=!0,t.dispatchEvent(o),r.defaultPrevented||o.defaultPrevented}function nC(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function m0(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function rC(t,e){let s=e.focusNode,i=e.focusOffset;if(!s||e.anchorNode!=s||e.anchorOffset!=i)return!1;for(i=Math.min(i,mi(s));;)if(i){if(s.nodeType!=1)return!1;let n=s.childNodes[i-1];n.contentEditable=="false"?i--:(s=n,i=mi(s))}else{if(s==t)return!0;i=On(s),s=s.parentNode}}function g0(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function v0(t,e){for(let s=t,i=e;;){if(s.nodeType==3&&i>0)return{node:s,offset:i};if(s.nodeType==1&&i>0){if(s.contentEditable=="false")return null;s=s.childNodes[i-1],i=mi(s)}else if(s.parentNode&&!Xl(s))i=On(s),s=s.parentNode;else return null}}function y0(t,e){for(let s=t,i=e;;){if(s.nodeType==3&&i<s.nodeValue.length)return{node:s,offset:i};if(s.nodeType==1&&i<s.childNodes.length){if(s.contentEditable=="false")return null;s=s.childNodes[i],i=0}else if(s.parentNode&&!Xl(s))i=On(s)+1,s=s.parentNode;else return null}}class Qt{constructor(e,s,i=!0){this.node=e,this.offset=s,this.precise=i}static before(e,s){return new Qt(e.parentNode,On(e),s)}static after(e,s){return new Qt(e.parentNode,On(e)+1,s)}}const Cc=[];class ut{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let s=this.posAtStart;for(let i of this.children){if(i==e)return s;s+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,s){if(this.flags&2){let i=this.dom,n=null,r;for(let o of this.children){if(o.flags&7){if(!o.dom&&(r=n?n.nextSibling:i.firstChild)){let l=ut.get(r);(!l||!l.parent&&l.canReuseDOM(o))&&o.reuseDOM(r)}o.sync(e,s),o.flags&=-8}if(r=n?n.nextSibling:i.firstChild,s&&!s.written&&s.node==i&&r!=o.dom&&(s.written=!0),o.dom.parentNode==i)for(;r&&r!=o.dom;)r=Uf(r);else i.insertBefore(o.dom,r);n=o.dom}for(r=n?n.nextSibling:i.firstChild,r&&s&&s.node==i&&(s.written=!0);r;)r=Uf(r)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,s),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,s){let i;if(e==this.dom)i=this.dom.childNodes[s];else{let n=mi(e)==0?0:s==0?-1:1;for(;;){let r=e.parentNode;if(r==this.dom)break;n==0&&r.firstChild!=r.lastChild&&(e==r.firstChild?n=-1:n=1),e=r}n<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!ut.get(i);)i=i.nextSibling;if(!i)return this.length;for(let n=0,r=0;;n++){let o=this.children[n];if(o.dom==i)return r;r+=o.length+o.breakAfter}}domBoundsAround(e,s,i=0){let n=-1,r=-1,o=-1,l=-1;for(let a=0,d=i,u=i;a<this.children.length;a++){let f=this.children[a],c=d+f.length;if(d<e&&c>s)return f.domBoundsAround(e,s,d);if(c>=e&&n==-1&&(n=a,r=d),d>s&&f.dom.parentNode==this.dom){o=a,l=u;break}u=c,d=c+f.breakAfter}return{from:r,to:l<0?i+this.length:l,startDOM:(n?this.children[n-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let s=this.parent;s;s=s.parent){if(e&&(s.flags|=2),s.flags&1)return;s.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let s=e.parent;if(!s)return e;e=s}}replaceChildren(e,s,i=Cc){this.markDirty();for(let n=e;n<s;n++){let r=this.children[n];r.parent==this&&i.indexOf(r)<0&&r.destroy()}i.length<250?this.children.splice(e,s-e,...i):this.children=[].concat(this.children.slice(0,e),i,this.children.slice(s));for(let n=0;n<i.length;n++)i[n].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new b0(this.children,e,this.children.length)}childPos(e,s=1){return this.childCursor().findPos(e,s)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,s,i,n,r,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}ut.prototype.breakAfter=0;function Uf(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class b0{constructor(e,s,i){this.children=e,this.pos=s,this.i=i,this.off=0}findPos(e,s=1){for(;;){if(e>this.pos||e==this.pos&&(s>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function x0(t,e,s,i,n,r,o,l,a){let{children:d}=t,u=d.length?d[e]:null,f=r.length?r[r.length-1]:null,c=f?f.breakAfter:o;if(!(e==i&&u&&!o&&!c&&r.length<2&&u.merge(s,n,r.length?f:null,s==0,l,a))){if(i<d.length){let p=d[i];p&&(n<p.length||p.breakAfter&&f?.breakAfter)?(e==i&&(p=p.split(n),n=0),!c&&f&&p.merge(0,n,f,!0,0,a)?r[r.length-1]=p:((n||p.children.length&&!p.children[0].length)&&p.merge(0,n,null,!1,0,a),r.push(p))):p?.breakAfter&&(f?f.breakAfter=1:o=1),i++}for(u&&(u.breakAfter=o,s>0&&(!o&&r.length&&u.merge(s,u.length,r[0],!1,l,0)?u.breakAfter=r.shift().breakAfter:(s<u.length||u.children.length&&u.children[u.children.length-1].length==0)&&u.merge(s,u.length,null,!1,l,0),e++));e<i&&r.length;)if(d[i-1].become(r[r.length-1]))i--,r.pop(),a=r.length?0:l;else if(d[e].become(r[0]))e++,r.shift(),l=r.length?0:a;else break;!r.length&&e&&i<d.length&&!d[e-1].breakAfter&&d[i].merge(0,0,d[e-1],!1,l,a)&&e--,(e<i||r.length)&&t.replaceChildren(e,i,r)}}function k0(t,e,s,i,n,r){let o=t.childCursor(),{i:l,off:a}=o.findPos(s,1),{i:d,off:u}=o.findPos(e,-1),f=e-s;for(let c of i)f+=c.length;t.length+=f,x0(t,d,u,l,a,i,0,n,r)}const oC=256;class Xs extends ut{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,s){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(s&&s.node==this.dom&&(s.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,s,i){return this.flags&8||i&&(!(i instanceof Xs)||this.length-(s-e)+i.length>oC||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(s),this.markDirty(),!0)}split(e){let s=new Xs(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),s.flags|=this.flags&8,s}localPosFromDOM(e,s){return e==this.dom?s:s?this.text.length:0}domAtPos(e){return new Qt(this.dom,e)}domBoundsAround(e,s,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,s){return lC(this.dom,e,s)}}class Pi extends ut{constructor(e,s=[],i=0){super(),this.mark=e,this.children=s,this.length=i;for(let n of s)n.setParent(this)}setAttrs(e){if(m0(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let s in this.mark.attrs)e.setAttribute(s,this.mark.attrs[s]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,s){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,s)}merge(e,s,i,n,r,o){return i&&(!(i instanceof Pi&&i.mark.eq(this.mark))||e&&r<=0||s<this.length&&o<=0)?!1:(k0(this,e,s,i?i.children.slice():[],r-1,o-1),this.markDirty(),!0)}split(e){let s=[],i=0,n=-1,r=0;for(let l of this.children){let a=i+l.length;a>e&&s.push(i<e?l.split(e-i):l),n<0&&i>=e&&(n=r),i=a,r++}let o=this.length-e;return this.length=e,n>-1&&(this.children.length=n,this.markDirty()),new Pi(this.mark,s,o)}domAtPos(e){return w0(this,e)}coordsAt(e,s){return S0(this,e,s)}}function lC(t,e,s){let i=t.nodeValue.length;e>i&&(e=i);let n=e,r=e,o=0;e==0&&s<0||e==i&&s>=0?Ae.chrome||Ae.gecko||(e?(n--,o=1):r<i&&(r++,o=-1)):s<0?n--:r<i&&r++;let l=Pn(t,n,r).getClientRects();if(!l.length)return null;let a=l[(o?o<0:s>=0)?0:l.length-1];return Ae.safari&&!o&&a.width==0&&(a=Array.prototype.find.call(l,d=>d.width)||a),o?ja(a,o<0):a||null}class Ki extends ut{static create(e,s,i){return new Ki(e,s,i)}constructor(e,s,i){super(),this.widget=e,this.length=s,this.side=i,this.prevWidget=null}split(e){let s=Ki.create(this.widget,this.length-e,this.side);return this.length-=e,s}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,s,i,n,r,o){return i&&(!(i instanceof Ki)||!this.widget.compare(i.widget)||e>0&&r<=0||s<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-s),!0)}become(e){return e instanceof Ki&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return et.empty;let e=this;for(;e.parent;)e=e.parent;let{view:s}=e,i=s&&s.state.doc,n=this.posAtStart;return i?i.slice(n,n+this.length):et.empty}domAtPos(e){return(this.length?e==0:this.side>0)?Qt.before(this.dom):Qt.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,s){let i=this.widget.coordsAt(this.dom,e,s);if(i)return i;let n=this.dom.getClientRects(),r=null;if(!n.length)return null;let o=this.side?this.side<0:e>0;for(let l=o?n.length-1:0;r=n[l],!(e>0?l==0:l==n.length-1||r.top<r.bottom);l+=o?-1:1);return ja(r,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class mr extends ut{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof mr&&e.side==this.side}split(){return new mr(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?Qt.before(this.dom):Qt.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return et.empty}get isHidden(){return!0}}Xs.prototype.children=Ki.prototype.children=mr.prototype.children=Cc;function w0(t,e){let s=t.dom,{children:i}=t,n=0;for(let r=0;n<i.length;n++){let o=i[n],l=r+o.length;if(!(l==r&&o.getSide()<=0)){if(e>r&&e<l&&o.dom.parentNode==s)return o.domAtPos(e-r);if(e<=r)break;r=l}}for(let r=n;r>0;r--){let o=i[r-1];if(o.dom.parentNode==s)return o.domAtPos(o.length)}for(let r=n;r<i.length;r++){let o=i[r];if(o.dom.parentNode==s)return o.domAtPos(0)}return new Qt(s,0)}function _0(t,e,s){let i,{children:n}=t;s>0&&e instanceof Pi&&n.length&&(i=n[n.length-1])instanceof Pi&&i.mark.eq(e.mark)?_0(i,e.children[0],s-1):(n.push(e),e.setParent(t)),t.length+=e.length}function S0(t,e,s){let i=null,n=-1,r=null,o=-1;function l(d,u){for(let f=0,c=0;f<d.children.length&&c<=u;f++){let p=d.children[f],k=c+p.length;k>=u&&(p.children.length?l(p,u-c):(!r||r.isHidden&&(s>0||uC(r,p)))&&(k>u||c==k&&p.getSide()>0)?(r=p,o=u-c):(c<u||c==k&&p.getSide()<0&&!p.isHidden)&&(i=p,n=u-c)),c=k}}l(t,e);let a=(s<0?i:r)||i||r;return a?a.coordsAt(Math.max(0,a==i?n:o),s):aC(t)}function aC(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let s=xo(e);return s[s.length-1]||null}function uC(t,e){let s=t.coordsAt(0,1),i=e.coordsAt(0,1);return s&&i&&i.top<s.bottom}function wd(t,e){for(let s in t)s=="class"&&e.class?e.class+=" "+t.class:s=="style"&&e.style?e.style+=";"+t.style:e[s]=t[s];return e}const zf=Object.create(null);function Ql(t,e,s){if(t==e)return!0;t||(t=zf),e||(e=zf);let i=Object.keys(t),n=Object.keys(e);if(i.length-(s&&i.indexOf(s)>-1?1:0)!=n.length-(s&&n.indexOf(s)>-1?1:0))return!1;for(let r of i)if(r!=s&&(n.indexOf(r)==-1||t[r]!==e[r]))return!1;return!0}function _d(t,e,s){let i=!1;if(e)for(let n in e)s&&n in s||(i=!0,n=="style"?t.style.cssText="":t.removeAttribute(n));if(s)for(let n in s)e&&e[n]==s[n]||(i=!0,n=="style"?t.style.cssText=s[n]:t.setAttribute(n,s[n]));return i}function dC(t){let e=Object.create(null);for(let s=0;s<t.attributes.length;s++){let i=t.attributes[s];e[i.name]=i.value}return e}class ln{eq(e){return!1}updateDOM(e,s){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,s,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var hs=(function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t})(hs||(hs={}));class Ne extends En{constructor(e,s,i,n){super(),this.startSide=e,this.endSide=s,this.widget=i,this.spec=n}get heightRelevant(){return!1}static mark(e){return new Lo(e)}static widget(e){let s=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return s+=i&&!e.inlineOrder?s>0?3e8:-4e8:s>0?1e8:-1e8,new nn(e,s,s,i,e.widget||null,!1)}static replace(e){let s=!!e.block,i,n;if(e.isBlockGap)i=-5e8,n=4e8;else{let{start:r,end:o}=C0(e,s);i=(r?s?-3e8:-1:5e8)-1,n=(o?s?2e8:1:-6e8)+1}return new nn(e,i,n,s,e.widget||null,!0)}static line(e){return new Bo(e)}static set(e,s=!1){return Ze.of(e,s)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Ne.none=Ze.empty;class Lo extends Ne{constructor(e){let{start:s,end:i}=C0(e);super(s?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var s,i;return this==e||e instanceof Lo&&this.tagName==e.tagName&&(this.class||((s=this.attrs)===null||s===void 0?void 0:s.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&Ql(this.attrs,e.attrs,"class")}range(e,s=e){if(e>=s)throw new RangeError("Mark decorations may not be empty");return super.range(e,s)}}Lo.prototype.point=!1;class Bo extends Ne{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Bo&&this.spec.class==e.spec.class&&Ql(this.spec.attributes,e.spec.attributes)}range(e,s=e){if(s!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,s)}}Bo.prototype.mapMode=cs.TrackBefore;Bo.prototype.point=!0;class nn extends Ne{constructor(e,s,i,n,r,o){super(s,i,r,e),this.block=n,this.isReplace=o,this.mapMode=n?s<=0?cs.TrackBefore:cs.TrackAfter:cs.TrackDel}get type(){return this.startSide!=this.endSide?hs.WidgetRange:this.startSide<=0?hs.WidgetBefore:hs.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof nn&&cC(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,s=e){if(this.isReplace&&(e>s||e==s&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&s!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,s)}}nn.prototype.point=!0;function C0(t,e=!1){let{inclusiveStart:s,inclusiveEnd:i}=t;return s==null&&(s=t.inclusive),i==null&&(i=t.inclusive),{start:s??e,end:i??e}}function cC(t,e){return t==e||!!(t&&e&&t.compare(e))}function $l(t,e,s,i=0){let n=s.length-1;n>=0&&s[n]+i>=t?s[n]=Math.max(s[n],e):s.push(t,e)}class Tt extends ut{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,s,i,n,r,o){if(i){if(!(i instanceof Tt))return!1;this.dom||i.transferDOM(this)}return n&&this.setDeco(i?i.attrs:null),k0(this,e,s,i?i.children.slice():[],r,o),!0}split(e){let s=new Tt;if(s.breakAfter=this.breakAfter,this.length==0)return s;let{i,off:n}=this.childPos(e);n&&(s.append(this.children[i].split(n),0),this.children[i].merge(n,this.children[i].length,null,!1,0,0),i++);for(let r=i;r<this.children.length;r++)s.append(this.children[r],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,s}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Ql(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,s){_0(this,e,s)}addLineDeco(e){let s=e.spec.attributes,i=e.spec.class;s&&(this.attrs=wd(s,this.attrs||{})),i&&(this.attrs=wd({class:i},this.attrs||{}))}domAtPos(e){return w0(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,s){var i;this.dom?this.flags&4&&(m0(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(_d(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,s);let n=this.dom.lastChild;for(;n&&ut.get(n)instanceof Pi;)n=n.lastChild;if(!n||!this.length||n.nodeName!="BR"&&((i=ut.get(n))===null||i===void 0?void 0:i.isEditable)==!1&&(!Ae.ios||!this.children.some(r=>r instanceof Xs))){let r=document.createElement("BR");r.cmIgnore=!0,this.dom.appendChild(r)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,s;for(let i of this.children){if(!(i instanceof Xs)||/[^ -~]/.test(i.text))return null;let n=xo(i.dom);if(n.length!=1)return null;e+=n[0].width,s=n[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:s}:null}coordsAt(e,s){let i=S0(this,e,s);if(!this.children.length&&i&&this.parent){let{heightOracle:n}=this.parent.view.viewState,r=i.bottom-i.top;if(Math.abs(r-n.lineHeight)<2&&n.textHeight<r){let o=(r-n.textHeight)/2;return{top:i.top+o,bottom:i.bottom-o,left:i.left,right:i.left}}}return i}become(e){return e instanceof Tt&&this.children.length==0&&e.children.length==0&&Ql(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,s){for(let i=0,n=0;i<e.children.length;i++){let r=e.children[i],o=n+r.length;if(o>=s){if(r instanceof Tt)return r;if(o>s)break}n=o+r.breakAfter}return null}}class Ti extends ut{constructor(e,s,i){super(),this.widget=e,this.length=s,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,s,i,n,r,o){return i&&(!(i instanceof Ti)||!this.widget.compare(i.widget)||e>0&&r<=0||s<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-s),!0)}domAtPos(e){return e==0?Qt.before(this.dom):Qt.after(this.dom,e==this.length)}split(e){let s=this.length-e;this.length=e;let i=new Ti(this.widget,s,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return Cc}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):et.empty}domBoundsAround(){return null}become(e){return e instanceof Ti&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,s){let i=this.widget.coordsAt(this.dom,e,s);return i||(this.widget instanceof Sd?null:ja(this.dom.getBoundingClientRect(),this.length?e==0:s<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:s,endSide:i}=this.deco;return s==i?!1:e<0?s<0:i>0}}class Sd extends ln{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class to{constructor(e,s,i,n){this.doc=e,this.pos=s,this.end=i,this.disallowBlockEffectsFor=n,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=s}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Ti&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Tt),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(sl(new mr(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Ti)&&this.getLine()}buildText(e,s,i){for(;e>0;){if(this.textOff==this.text.length){let{value:o,lineBreak:l,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(l){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=o,this.textOff=0}let n=Math.min(this.text.length-this.textOff,e),r=Math.min(n,512);this.flushBuffer(s.slice(s.length-i)),this.getLine().append(sl(new Xs(this.text.slice(this.textOff,this.textOff+r)),s),i),this.atCursorPos=!0,this.textOff+=r,e-=r,i=n<=r?0:s.length}}span(e,s,i,n){this.buildText(s-e,i,n),this.pos=s,this.openStart<0&&(this.openStart=n)}point(e,s,i,n,r,o){if(this.disallowBlockEffectsFor[o]&&i instanceof nn){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(s>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=s-e;if(i instanceof nn)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Ti(i.widget||gr.block,l,i));else{let a=Ki.create(i.widget||gr.inline,l,l?0:i.startSide),d=this.atCursorPos&&!a.isEditable&&r<=n.length&&(e<s||i.startSide>0),u=!a.isEditable&&(e<s||r>n.length||i.startSide<=0),f=this.getLine();this.pendingBuffer==2&&!d&&!a.isEditable&&(this.pendingBuffer=0),this.flushBuffer(n),d&&(f.append(sl(new mr(1),n),r),r=n.length+Math.max(0,r-n.length)),f.append(sl(a,n),r),this.atCursorPos=u,this.pendingBuffer=u?e<s||r>n.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=n.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=s),this.openStart<0&&(this.openStart=r)}static build(e,s,i,n,r){let o=new to(e,s,i,r);return o.openEnd=Ze.spans(n,s,i,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function sl(t,e){for(let s of e)t=new Pi(s,[t],t.length);return t}class gr extends ln{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}gr.inline=new gr("span");gr.block=new gr("div");var gt=(function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t})(gt||(gt={}));const jn=gt.LTR,Ac=gt.RTL;function A0(t){let e=[];for(let s=0;s<t.length;s++)e.push(1<<+t[s]);return e}const hC=A0("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),fC=A0("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Cd=Object.create(null),si=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),s=t.charCodeAt(1);Cd[e]=s,Cd[s]=-e}function V0(t){return t<=247?hC[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?fC[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const pC=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Gi{get dir(){return this.level%2?Ac:jn}constructor(e,s,i){this.from=e,this.to=s,this.level=i}side(e,s){return this.dir==s==e?this.to:this.from}forward(e,s){return e==(this.dir==s)}static find(e,s,i,n){let r=-1;for(let o=0;o<e.length;o++){let l=e[o];if(l.from<=s&&l.to>=s){if(l.level==i)return o;(r<0||(n!=0?n<0?l.from<s:l.to>s:e[r].level>l.level))&&(r=o)}}if(r<0)throw new RangeError("Index out of range");return r}}function M0(t,e){if(t.length!=e.length)return!1;for(let s=0;s<t.length;s++){let i=t[s],n=e[s];if(i.from!=n.from||i.to!=n.to||i.direction!=n.direction||!M0(i.inner,n.inner))return!1}return!0}const ht=[];function mC(t,e,s,i,n){for(let r=0;r<=i.length;r++){let o=r?i[r-1].to:e,l=r<i.length?i[r].from:s,a=r?256:n;for(let d=o,u=a,f=a;d<l;d++){let c=V0(t.charCodeAt(d));c==512?c=u:c==8&&f==4&&(c=16),ht[d]=c==4?2:c,c&7&&(f=c),u=c}for(let d=o,u=a,f=a;d<l;d++){let c=ht[d];if(c==128)d<l-1&&u==ht[d+1]&&u&24?c=ht[d]=u:ht[d]=256;else if(c==64){let p=d+1;for(;p<l&&ht[p]==64;)p++;let k=d&&u==8||p<s&&ht[p]==8?f==1?1:8:256;for(let C=d;C<p;C++)ht[C]=k;d=p-1}else c==8&&f==1&&(ht[d]=1);u=c,c&7&&(f=c)}}}function gC(t,e,s,i,n){let r=n==1?2:1;for(let o=0,l=0,a=0;o<=i.length;o++){let d=o?i[o-1].to:e,u=o<i.length?i[o].from:s;for(let f=d,c,p,k;f<u;f++)if(p=Cd[c=t.charCodeAt(f)])if(p<0){for(let C=l-3;C>=0;C-=3)if(si[C+1]==-p){let A=si[C+2],V=A&2?n:A&4?A&1?r:n:0;V&&(ht[f]=ht[si[C]]=V),l=C;break}}else{if(si.length==189)break;si[l++]=f,si[l++]=c,si[l++]=a}else if((k=ht[f])==2||k==1){let C=k==n;a=C?0:1;for(let A=l-3;A>=0;A-=3){let V=si[A+2];if(V&2)break;if(C)si[A+2]|=2;else{if(V&4)break;si[A+2]|=4}}}}}function vC(t,e,s,i){for(let n=0,r=i;n<=s.length;n++){let o=n?s[n-1].to:t,l=n<s.length?s[n].from:e;for(let a=o;a<l;){let d=ht[a];if(d==256){let u=a+1;for(;;)if(u==l){if(n==s.length)break;u=s[n++].to,l=n<s.length?s[n].from:e}else if(ht[u]==256)u++;else break;let f=r==1,c=(u<e?ht[u]:i)==1,p=f==c?f?1:2:i;for(let k=u,C=n,A=C?s[C-1].to:t;k>a;)k==A&&(k=s[--C].from,A=C?s[C-1].to:t),ht[--k]=p;a=u}else r=d,a++}}}function Ad(t,e,s,i,n,r,o){let l=i%2?2:1;if(i%2==n%2)for(let a=e,d=0;a<s;){let u=!0,f=!1;if(d==r.length||a<r[d].from){let C=ht[a];C!=l&&(u=!1,f=C==16)}let c=!u&&l==1?[]:null,p=u?i:i+1,k=a;e:for(;;)if(d<r.length&&k==r[d].from){if(f)break e;let C=r[d];if(!u)for(let A=C.to,V=d+1;;){if(A==s)break e;if(V<r.length&&r[V].from==A)A=r[V++].to;else{if(ht[A]==l)break e;break}}if(d++,c)c.push(C);else{C.from>a&&o.push(new Gi(a,C.from,p));let A=C.direction==jn!=!(p%2);Vd(t,A?i+1:i,n,C.inner,C.from,C.to,o),a=C.to}k=C.to}else{if(k==s||(u?ht[k]!=l:ht[k]==l))break;k++}c?Ad(t,a,k,i+1,n,c,o):a<k&&o.push(new Gi(a,k,p)),a=k}else for(let a=s,d=r.length;a>e;){let u=!0,f=!1;if(!d||a>r[d-1].to){let C=ht[a-1];C!=l&&(u=!1,f=C==16)}let c=!u&&l==1?[]:null,p=u?i:i+1,k=a;e:for(;;)if(d&&k==r[d-1].to){if(f)break e;let C=r[--d];if(!u)for(let A=C.from,V=d;;){if(A==e)break e;if(V&&r[V-1].to==A)A=r[--V].from;else{if(ht[A-1]==l)break e;break}}if(c)c.push(C);else{C.to<a&&o.push(new Gi(C.to,a,p));let A=C.direction==jn!=!(p%2);Vd(t,A?i+1:i,n,C.inner,C.from,C.to,o),a=C.from}k=C.from}else{if(k==e||(u?ht[k-1]!=l:ht[k-1]==l))break;k--}c?Ad(t,k,a,i+1,n,c,o):k<a&&o.push(new Gi(k,a,p)),a=k}}function Vd(t,e,s,i,n,r,o){let l=e%2?2:1;mC(t,n,r,i,l),gC(t,n,r,i,l),vC(n,r,i,l),Ad(t,n,r,e,s,i,o)}function yC(t,e,s){if(!t)return[new Gi(0,0,e==Ac?1:0)];if(e==jn&&!s.length&&!pC.test(t))return D0(t.length);if(s.length)for(;t.length>ht.length;)ht[ht.length]=256;let i=[],n=e==jn?0:1;return Vd(t,n,n,s,0,t.length,i),i}function D0(t){return[new Gi(0,t,0)]}let T0="";function bC(t,e,s,i,n){var r;let o=i.head-t.from,l=Gi.find(e,o,(r=i.bidiLevel)!==null&&r!==void 0?r:-1,i.assoc),a=e[l],d=a.side(n,s);if(o==d){let c=l+=n?1:-1;if(c<0||c>=e.length)return null;a=e[l=c],o=a.side(!n,s),d=a.side(n,s)}let u=Ht(t.text,o,a.forward(n,s));(u<a.from||u>a.to)&&(u=d),T0=t.text.slice(Math.min(o,u),Math.max(o,u));let f=l==(n?e.length-1:0)?null:e[l+(n?1:-1)];return f&&u==d&&f.level+(n?0:1)<a.level?le.cursor(f.side(!n,s)+t.from,f.forward(n,s)?1:-1,f.level):le.cursor(u+t.from,a.forward(n,s)?-1:1,a.level)}function xC(t,e,s){for(let i=e;i<s;i++){let n=V0(t.charCodeAt(i));if(n==1)return jn;if(n==2||n==4)return Ac}return jn}const $0=$e.define(),E0=$e.define(),O0=$e.define(),P0=$e.define(),Md=$e.define(),j0=$e.define(),R0=$e.define(),Vc=$e.define(),Mc=$e.define(),L0=$e.define({combine:t=>t.some(e=>e)}),B0=$e.define({combine:t=>t.some(e=>e)}),I0=$e.define();class lr{constructor(e,s="nearest",i="nearest",n=5,r=5,o=!1){this.range=e,this.y=s,this.x=i,this.yMargin=n,this.xMargin=r,this.isSnapshot=o}map(e){return e.empty?this:new lr(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new lr(le.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const il=He.define({map:(t,e)=>t.map(e)}),N0=He.define();function ys(t,e,s){let i=t.facet(P0);i.length?i[0](e):window.onerror&&window.onerror(String(e),s,void 0,void 0,e)||(s?console.error(s+":",e):console.error(e))}const Mi=$e.define({combine:t=>t.length?t[0]:!0});let kC=0;const Kn=$e.define({combine(t){return t.filter((e,s)=>{for(let i=0;i<s;i++)if(t[i].plugin==e.plugin)return!1;return!0})}});class $t{constructor(e,s,i,n,r){this.id=e,this.create=s,this.domEventHandlers=i,this.domEventObservers=n,this.baseExtensions=r(this),this.extension=this.baseExtensions.concat(Kn.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(Kn.of({plugin:this,arg:e}))}static define(e,s){const{eventHandlers:i,eventObservers:n,provide:r,decorations:o}=s||{};return new $t(kC++,e,i,n,l=>{let a=[];return o&&a.push(ko.of(d=>{let u=d.plugin(l);return u?o(u):Ne.none})),r&&a.push(r(l)),a})}static fromClass(e,s){return $t.define((i,n)=>new e(i,n),s)}}class pu{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let s=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(s)}catch(i){if(ys(s.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(s){ys(e.state,s,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var s;if(!((s=this.value)===null||s===void 0)&&s.destroy)try{this.value.destroy()}catch(i){ys(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const U0=$e.define(),Dc=$e.define(),ko=$e.define(),z0=$e.define(),Io=$e.define(),F0=$e.define();function Ff(t,e){let s=t.state.facet(F0);if(!s.length)return s;let i=s.map(r=>r instanceof Function?r(t):r),n=[];return Ze.spans(i,e.from,e.to,{point(){},span(r,o,l,a){let d=r-e.from,u=o-e.from,f=n;for(let c=l.length-1;c>=0;c--,a--){let p=l[c].spec.bidiIsolate,k;if(p==null&&(p=xC(e.text,d,u)),a>0&&f.length&&(k=f[f.length-1]).to==d&&k.direction==p)k.to=u,f=k.inner;else{let C={from:d,to:u,direction:p,inner:[]};f.push(C),f=C.inner}}}}),n}const H0=$e.define();function Tc(t){let e=0,s=0,i=0,n=0;for(let r of t.state.facet(H0)){let o=r(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(s=Math.max(s,o.right)),o.top!=null&&(i=Math.max(i,o.top)),o.bottom!=null&&(n=Math.max(n,o.bottom)))}return{left:e,right:s,top:i,bottom:n}}const Nr=$e.define();class Ls{constructor(e,s,i,n){this.fromA=e,this.toA=s,this.fromB=i,this.toB=n}join(e){return new Ls(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let s=e.length,i=this;for(;s>0;s--){let n=e[s-1];if(!(n.fromA>i.toA)){if(n.toA<i.fromA)break;i=i.join(n),e.splice(s-1,1)}}return e.splice(s,0,i),e}static extendWithRanges(e,s){if(s.length==0)return e;let i=[];for(let n=0,r=0,o=0,l=0;;n++){let a=n==e.length?null:e[n],d=o-l,u=a?a.fromB:1e9;for(;r<s.length&&s[r]<u;){let f=s[r],c=s[r+1],p=Math.max(l,f),k=Math.min(u,c);if(p<=k&&new Ls(p+d,k+d,p,k).addToSet(i),c>u)break;r+=2}if(!a)return i;new Ls(a.fromA,a.toA,a.fromB,a.toB).addToSet(i),o=a.toA,l=a.toB}}}class Zl{constructor(e,s,i){this.view=e,this.state=s,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=Pt.empty(this.startState.doc.length);for(let r of i)this.changes=this.changes.compose(r.changes);let n=[];this.changes.iterChangedRanges((r,o,l,a)=>n.push(new Ls(r,o,l,a))),this.changedRanges=n}static create(e,s,i){return new Zl(e,s,i)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class Hf extends ut{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Ne.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Tt],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Ls(0,0,0,e.state.doc.length)],0,null)}update(e){var s;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:d,toA:u})=>u<this.minWidthFrom||d>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let n=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((s=this.domChanged)===null||s===void 0)&&s.newSel?n=this.domChanged.newSel.head:!MC(e.changes,this.hasComposition)&&!e.selectionSet&&(n=e.state.selection.main.head));let r=n>-1?_C(this.view,e.changes,n):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:d,to:u}=this.hasComposition;i=new Ls(d,u,e.changes.mapPos(d,-1),e.changes.mapPos(u,1)).addToSet(i.slice())}this.hasComposition=r?{from:r.range.fromB,to:r.range.toB}:null,(Ae.ie||Ae.chrome)&&!r&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,l=this.updateDeco(),a=AC(o,l,e.changes);return i=Ls.extendWithRanges(i,a),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,e.startState.doc.length,r),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,s,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,s,i);let{observer:n}=this.view;n.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=Ae.chrome||Ae.ios?{node:n.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||n.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof Ti&&o.widget instanceof Sd&&r.push(o.dom);n.updateGaps(r)}updateChildren(e,s,i){let n=i?i.range.addToSet(e.slice()):e,r=this.childCursor(s);for(let o=n.length-1;;o--){let l=o>=0?n[o]:null;if(!l)break;let{fromA:a,toA:d,fromB:u,toB:f}=l,c,p,k,C;if(i&&i.range.fromB<f&&i.range.toB>u){let z=to.build(this.view.state.doc,u,i.range.fromB,this.decorations,this.dynamicDecorationMap),H=to.build(this.view.state.doc,i.range.toB,f,this.decorations,this.dynamicDecorationMap);p=z.breakAtStart,k=z.openStart,C=H.openEnd;let B=this.compositionView(i);H.breakAtStart?B.breakAfter=1:H.content.length&&B.merge(B.length,B.length,H.content[0],!1,H.openStart,0)&&(B.breakAfter=H.content[0].breakAfter,H.content.shift()),z.content.length&&B.merge(0,0,z.content[z.content.length-1],!0,0,z.openEnd)&&z.content.pop(),c=z.content.concat(B).concat(H.content)}else({content:c,breakAtStart:p,openStart:k,openEnd:C}=to.build(this.view.state.doc,u,f,this.decorations,this.dynamicDecorationMap));let{i:A,off:V}=r.findPos(d,1),{i:R,off:P}=r.findPos(a,-1);x0(this,R,P,A,V,c,p,k,C)}i&&this.fixCompositionDOM(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let s of e.transactions)for(let i of s.effects)i.is(N0)&&(this.editContextFormatting=i.value)}compositionView(e){let s=new Xs(e.text.nodeValue);s.flags|=8;for(let{deco:n}of e.marks)s=new Pi(n,[s],s.length);let i=new Tt;return i.append(s,0),i}fixCompositionDOM(e){let s=(r,o)=>{o.flags|=8|(o.children.some(a=>a.flags&7)?1:0),this.markedForComposition.add(o);let l=ut.get(r);l&&l!=o&&(l.dom=null),o.setDOM(r)},i=this.childPos(e.range.fromB,1),n=this.children[i.i];s(e.line,n);for(let r=e.marks.length-1;r>=-1;r--)i=n.childPos(i.off,1),n=n.children[i.i],s(r>=0?e.marks[r].node:e.text,n)}updateSelection(e=!1,s=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,n=i==this.dom,r=!n&&!(this.view.state.facet(Mi)||this.dom.tabIndex>-1)&&Tl(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(n||s||r))return;let o=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(l.anchor)),d=l.empty?a:this.moveToLine(this.domAtPos(l.head));if(Ae.gecko&&l.empty&&!this.hasComposition&&wC(a)){let f=document.createTextNode("");this.view.observer.ignore(()=>a.node.insertBefore(f,a.node.childNodes[a.offset]||null)),a=d=new Qt(f,0),o=!0}let u=this.view.observer.selectionRange;(o||!u.focusNode||(!eo(a.node,a.offset,u.anchorNode,u.anchorOffset)||!eo(d.node,d.offset,u.focusNode,u.focusOffset))&&!this.suppressWidgetCursorChange(u,l))&&(this.view.observer.ignore(()=>{Ae.android&&Ae.chrome&&this.dom.contains(u.focusNode)&&VC(u.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let f=bo(this.view.root);if(f)if(l.empty){if(Ae.gecko){let c=SC(a.node,a.offset);if(c&&c!=3){let p=(c==1?v0:y0)(a.node,a.offset);p&&(a=new Qt(p.node,p.offset))}}f.collapse(a.node,a.offset),l.bidiLevel!=null&&f.caretBidiLevel!==void 0&&(f.caretBidiLevel=l.bidiLevel)}else if(f.extend){f.collapse(a.node,a.offset);try{f.extend(d.node,d.offset)}catch{}}else{let c=document.createRange();l.anchor>l.head&&([a,d]=[d,a]),c.setEnd(d.node,d.offset),c.setStart(a.node,a.offset),f.removeAllRanges(),f.addRange(c)}r&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(a,d)),this.impreciseAnchor=a.precise?null:new Qt(u.anchorNode,u.anchorOffset),this.impreciseHead=d.precise?null:new Qt(u.focusNode,u.focusOffset)}suppressWidgetCursorChange(e,s){return this.hasComposition&&s.empty&&eo(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==s.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,s=e.state.selection.main,i=bo(e.root),{anchorNode:n,anchorOffset:r}=e.observer.selectionRange;if(!i||!s.empty||!s.assoc||!i.modify)return;let o=Tt.find(this,s.head);if(!o)return;let l=o.posAtStart;if(s.head==l||s.head==l+o.length)return;let a=this.coordsAt(s.head,-1),d=this.coordsAt(s.head,1);if(!a||!d||a.bottom>d.top)return;let u=this.domAtPos(s.head+s.assoc);i.collapse(u.node,u.offset),i.modify("move",s.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let f=e.observer.selectionRange;e.docView.posFromDOM(f.anchorNode,f.anchorOffset)!=s.from&&i.collapse(n,r)}moveToLine(e){let s=this.dom,i;if(e.node!=s)return e;for(let n=e.offset;!i&&n<s.childNodes.length;n++){let r=ut.get(s.childNodes[n]);r instanceof Tt&&(i=r.domAtPos(0))}for(let n=e.offset-1;!i&&n>=0;n--){let r=ut.get(s.childNodes[n]);r instanceof Tt&&(i=r.domAtPos(r.length))}return i?new Qt(i.node,i.offset,!0):e}nearest(e){for(let s=e;s;){let i=ut.get(s);if(i&&i.rootView==this)return i;s=s.parentNode}return null}posFromDOM(e,s){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,s)+i.posAtStart}domAtPos(e){let{i:s,off:i}=this.childCursor().findPos(e,-1);for(;s<this.children.length-1;){let n=this.children[s];if(i<n.length||n instanceof Tt)break;s++,i=0}return this.children[s].domAtPos(i)}coordsAt(e,s){let i=null,n=0;for(let r=this.length,o=this.children.length-1;o>=0;o--){let l=this.children[o],a=r-l.breakAfter,d=a-l.length;if(a<e)break;if(d<=e&&(d<e||l.covers(-1))&&(a>e||l.covers(1))&&(!i||l instanceof Tt&&!(i instanceof Tt&&s>=0)))i=l,n=d;else if(i&&d==e&&a==e&&l instanceof Ti&&Math.abs(s)<2){if(l.deco.startSide<0)break;o&&(i=null)}r=d}return i?i.coordsAt(e-n,s):null}coordsForChar(e){let{i:s,off:i}=this.childPos(e,1),n=this.children[s];if(!(n instanceof Tt))return null;for(;n.children.length;){let{i:l,off:a}=n.childPos(i,1);for(;;l++){if(l==n.children.length)return null;if((n=n.children[l]).length)break}i=a}if(!(n instanceof Xs))return null;let r=Ht(n.text,i);if(r==i)return null;let o=Pn(n.dom,i,r).getClientRects();for(let l=0;l<o.length;l++){let a=o[l];if(l==o.length-1||a.top<a.bottom&&a.left<a.right)return a}return null}measureVisibleLineHeights(e){let s=[],{from:i,to:n}=e,r=this.view.contentDOM.clientWidth,o=r>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,a=this.view.textDirection==gt.LTR;for(let d=0,u=0;u<this.children.length;u++){let f=this.children[u],c=d+f.length;if(c>n)break;if(d>=i){let p=f.dom.getBoundingClientRect();if(s.push(p.height),o){let k=f.dom.lastChild,C=k?xo(k):[];if(C.length){let A=C[C.length-1],V=a?A.right-p.left:p.right-A.left;V>l&&(l=V,this.minWidth=r,this.minWidthFrom=d,this.minWidthTo=c)}}}d=c+f.breakAfter}return s}textDirectionAt(e){let{i:s}=this.childPos(e,1);return getComputedStyle(this.children[s].dom).direction=="rtl"?gt.RTL:gt.LTR}measureTextSize(){for(let r of this.children)if(r instanceof Tt){let o=r.measureTextSize();if(o)return o}let e=document.createElement("div"),s,i,n;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let r=xo(e.firstChild)[0];s=e.getBoundingClientRect().height,i=r?r.width/27:7,n=r?r.height:s,e.remove()}),{lineHeight:s,charWidth:i,textHeight:n}}childCursor(e=this.length){let s=this.children.length;return s&&(e-=this.children[--s].length),new b0(this.children,e,s)}computeBlockGapDeco(){let e=[],s=this.view.viewState;for(let i=0,n=0;;n++){let r=n==s.viewports.length?null:s.viewports[n],o=r?r.from-1:this.length;if(o>i){let l=(s.lineBlockAt(o).bottom-s.lineBlockAt(i).top)/this.view.scaleY;e.push(Ne.replace({widget:new Sd(l),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!r)break;i=r.to+1}return Ne.set(e)}updateDeco(){let e=1,s=this.view.state.facet(ko).map(r=>(this.dynamicDecorationMap[e++]=typeof r=="function")?r(this.view):r),i=!1,n=this.view.state.facet(z0).map((r,o)=>{let l=typeof r=="function";return l&&(i=!0),l?r(this.view):r});for(n.length&&(this.dynamicDecorationMap[e++]=i,s.push(Ze.join(n))),this.decorations=[this.editContextFormatting,...s,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let d=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=d.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let d of this.view.state.facet(I0))try{if(d(this.view,e.range,e))return!0}catch(u){ys(this.view.state,u,"scroll handler")}let{range:s}=e,i=this.coordsAt(s.head,s.empty?s.assoc:s.head>s.anchor?-1:1),n;if(!i)return;!s.empty&&(n=this.coordsAt(s.anchor,s.anchor>s.head?-1:1))&&(i={left:Math.min(i.left,n.left),top:Math.min(i.top,n.top),right:Math.max(i.right,n.right),bottom:Math.max(i.bottom,n.bottom)});let r=Tc(this.view),o={left:i.left-r.left,top:i.top-r.top,right:i.right+r.right,bottom:i.bottom+r.bottom},{offsetWidth:l,offsetHeight:a}=this.view.scrollDOM;tC(this.view.scrollDOM,o,s.head<s.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,l),-l),Math.max(Math.min(e.yMargin,a),-a),this.view.textDirection==gt.LTR)}}function wC(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function W0(t,e){let s=t.observer.selectionRange;if(!s.focusNode)return null;let i=v0(s.focusNode,s.focusOffset),n=y0(s.focusNode,s.focusOffset),r=i||n;if(n&&i&&n.node!=i.node){let l=ut.get(n.node);if(!l||l instanceof Xs&&l.text!=n.node.nodeValue)r=n;else if(t.docView.lastCompositionAfterCursor){let a=ut.get(i.node);!a||a instanceof Xs&&a.text!=i.node.nodeValue||(r=n)}}if(t.docView.lastCompositionAfterCursor=r!=i,!r)return null;let o=e-r.offset;return{from:o,to:o+r.node.nodeValue.length,node:r.node}}function _C(t,e,s){let i=W0(t,s);if(!i)return null;let{node:n,from:r,to:o}=i,l=n.nodeValue;if(/[\n\r]/.test(l)||t.state.doc.sliceString(i.from,i.to)!=l)return null;let a=e.invertedDesc,d=new Ls(a.mapPos(r),a.mapPos(o),r,o),u=[];for(let f=n.parentNode;;f=f.parentNode){let c=ut.get(f);if(c instanceof Pi)u.push({node:f,deco:c.mark});else{if(c instanceof Tt||f.nodeName=="DIV"&&f.parentNode==t.contentDOM)return{range:d,text:n,marks:u,line:f};if(f!=t.contentDOM)u.push({node:f,deco:new Lo({inclusive:!0,attributes:dC(f),tagName:f.tagName.toLowerCase()})});else return null}}}function SC(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let CC=class{constructor(){this.changes=[]}compareRange(e,s){$l(e,s,this.changes)}comparePoint(e,s){$l(e,s,this.changes)}boundChange(e){$l(e,e,this.changes)}};function AC(t,e,s){let i=new CC;return Ze.compare(t,e,s,i),i.changes}function VC(t,e){for(let s=t;s&&s!=e;s=s.assignedSlot||s.parentNode)if(s.nodeType==1&&s.contentEditable=="false")return!0;return!1}function MC(t,e){let s=!1;return e&&t.iterChangedRanges((i,n)=>{i<e.to&&n>e.from&&(s=!0)}),s}function DC(t,e,s=1){let i=t.charCategorizer(e),n=t.doc.lineAt(e),r=e-n.from;if(n.length==0)return le.cursor(e);r==0?s=1:r==n.length&&(s=-1);let o=r,l=r;s<0?o=Ht(n.text,r,!1):l=Ht(n.text,r);let a=i(n.text.slice(o,l));for(;o>0;){let d=Ht(n.text,o,!1);if(i(n.text.slice(d,o))!=a)break;o=d}for(;l<n.length;){let d=Ht(n.text,l);if(i(n.text.slice(l,d))!=a)break;l=d}return le.range(o+n.from,l+n.from)}function TC(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function $C(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function mu(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function Wf(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function qf(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function Dd(t,e,s){let i,n,r,o,l=!1,a,d,u,f;for(let k=t.firstChild;k;k=k.nextSibling){let C=xo(k);for(let A=0;A<C.length;A++){let V=C[A];n&&mu(n,V)&&(V=Wf(qf(V,n.bottom),n.top));let R=TC(e,V),P=$C(s,V);if(R==0&&P==0)return k.nodeType==3?Kf(k,e,s):Dd(k,e,s);(!i||o>P||o==P&&r>R)&&(i=k,n=V,r=R,o=P,l=R?e<V.left?A>0:A<C.length-1:!0),R==0?s>V.bottom&&(!u||u.bottom<V.bottom)?(a=k,u=V):s<V.top&&(!f||f.top>V.top)&&(d=k,f=V):u&&mu(u,V)?u=qf(u,V.bottom):f&&mu(f,V)&&(f=Wf(f,V.top))}}if(u&&u.bottom>=s?(i=a,n=u):f&&f.top<=s&&(i=d,n=f),!i)return{node:t,offset:0};let c=Math.max(n.left,Math.min(n.right,e));if(i.nodeType==3)return Kf(i,c,s);if(l&&i.contentEditable!="false")return Dd(i,c,s);let p=Array.prototype.indexOf.call(t.childNodes,i)+(e>=(n.left+n.right)/2?1:0);return{node:t,offset:p}}function Kf(t,e,s){let i=t.nodeValue.length,n=-1,r=1e9,o=0;for(let l=0;l<i;l++){let a=Pn(t,l,l+1).getClientRects();for(let d=0;d<a.length;d++){let u=a[d];if(u.top==u.bottom)continue;o||(o=e-u.left);let f=(u.top>s?u.top-s:s-u.bottom)-1;if(u.left-1<=e&&u.right+1>=e&&f<r){let c=e>=(u.left+u.right)/2,p=c;if((Ae.chrome||Ae.gecko)&&Pn(t,l).getBoundingClientRect().left==u.right&&(p=!c),f<=0)return{node:t,offset:l+(p?1:0)};n=l+(p?1:0),r=f}}}return{node:t,offset:n>-1?n:o>0?t.nodeValue.length:0}}function q0(t,e,s,i=-1){var n,r;let o=t.contentDOM.getBoundingClientRect(),l=o.top+t.viewState.paddingTop,a,{docHeight:d}=t.viewState,{x:u,y:f}=e,c=f-l;if(c<0)return 0;if(c>d)return t.state.doc.length;for(let z=t.viewState.heightOracle.textHeight/2,H=!1;a=t.elementAtHeight(c),a.type!=hs.Text;)for(;c=i>0?a.bottom+z:a.top-z,!(c>=0&&c<=d);){if(H)return s?null:0;H=!0,i=-i}f=l+c;let p=a.from;if(p<t.viewport.from)return t.viewport.from==0?0:s?null:Gf(t,o,a,u,f);if(p>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:s?null:Gf(t,o,a,u,f);let k=t.dom.ownerDocument,C=t.root.elementFromPoint?t.root:k,A=C.elementFromPoint(u,f);A&&!t.contentDOM.contains(A)&&(A=null),A||(u=Math.max(o.left+1,Math.min(o.right-1,u)),A=C.elementFromPoint(u,f),A&&!t.contentDOM.contains(A)&&(A=null));let V,R=-1;if(A&&((n=t.docView.nearest(A))===null||n===void 0?void 0:n.isEditable)!=!1){if(k.caretPositionFromPoint){let z=k.caretPositionFromPoint(u,f);z&&({offsetNode:V,offset:R}=z)}else if(k.caretRangeFromPoint){let z=k.caretRangeFromPoint(u,f);z&&({startContainer:V,startOffset:R}=z)}V&&(!t.contentDOM.contains(V)||Ae.safari&&EC(V,R,u)||Ae.chrome&&OC(V,R,u))&&(V=void 0),V&&(R=Math.min(mi(V),R))}if(!V||!t.docView.dom.contains(V)){let z=Tt.find(t.docView,p);if(!z)return c>a.top+a.height/2?a.to:a.from;({node:V,offset:R}=Dd(z.dom,u,f))}let P=t.docView.nearest(V);if(!P)return null;if(P.isWidget&&((r=P.dom)===null||r===void 0?void 0:r.nodeType)==1){let z=P.dom.getBoundingClientRect();return e.y<z.top||e.y<=z.bottom&&e.x<=(z.left+z.right)/2?P.posAtStart:P.posAtEnd}else return P.localPosFromDOM(V,R)+P.posAtStart}function Gf(t,e,s,i,n){let r=Math.round((i-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&s.height>t.defaultLineHeight*1.5){let l=t.viewState.heightOracle.textHeight,a=Math.floor((n-s.top-(t.defaultLineHeight-l)*.5)/l);r+=a*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(s.from,s.to);return s.from+pd(o,r,t.state.tabSize)}function K0(t,e,s){let i,n=t;if(t.nodeType!=3||e!=(i=t.nodeValue.length))return!1;for(;;){let r=n.nextSibling;if(r){if(r.nodeName=="BR")break;return!1}else{let o=n.parentNode;if(!o||o.nodeName=="DIV")break;n=o}}return Pn(t,i-1,i).getBoundingClientRect().right>s}function EC(t,e,s){return K0(t,e,s)}function OC(t,e,s){if(e!=0)return K0(t,e,s);for(let n=t;;){let r=n.parentNode;if(!r||r.nodeType!=1||r.firstChild!=n)return!1;if(r.classList.contains("cm-line"))break;n=r}let i=t.nodeType==1?t.getBoundingClientRect():Pn(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return s-i.left>5}function Td(t,e,s){let i=t.lineBlockAt(e);if(Array.isArray(i.type)){let n;for(let r of i.type){if(r.from>e)break;if(!(r.to<e)){if(r.from<e&&r.to>e)return r;(!n||r.type==hs.Text&&(n.type!=r.type||(s<0?r.from<e:r.to>e)))&&(n=r)}}return n||i}return i}function PC(t,e,s,i){let n=Td(t,e.head,e.assoc||-1),r=!i||n.type!=hs.Text||!(t.lineWrapping||n.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>n.from?e.head-1:e.head);if(r){let o=t.dom.getBoundingClientRect(),l=t.textDirectionAt(n.from),a=t.posAtCoords({x:s==(l==gt.LTR)?o.right-1:o.left+1,y:(r.top+r.bottom)/2});if(a!=null)return le.cursor(a,s?-1:1)}return le.cursor(s?n.to:n.from,s?-1:1)}function Jf(t,e,s,i){let n=t.state.doc.lineAt(e.head),r=t.bidiSpans(n),o=t.textDirectionAt(n.from);for(let l=e,a=null;;){let d=bC(n,r,o,l,s),u=T0;if(!d){if(n.number==(s?t.state.doc.lines:1))return l;u=`
`,n=t.state.doc.line(n.number+(s?1:-1)),r=t.bidiSpans(n),d=t.visualLineSide(n,!s)}if(a){if(!a(u))return l}else{if(!i)return d;a=i(u)}l=d}}function jC(t,e,s){let i=t.state.charCategorizer(e),n=i(s);return r=>{let o=i(r);return n==kt.Space&&(n=o),n==o}}function RC(t,e,s,i){let n=e.head,r=s?1:-1;if(n==(s?t.state.doc.length:0))return le.cursor(n,e.assoc);let o=e.goalColumn,l,a=t.contentDOM.getBoundingClientRect(),d=t.coordsAtPos(n,e.assoc||-1),u=t.documentTop;if(d)o==null&&(o=d.left-a.left),l=r<0?d.top:d.bottom;else{let p=t.viewState.lineBlockAt(n);o==null&&(o=Math.min(a.right-a.left,t.defaultCharacterWidth*(n-p.from))),l=(r<0?p.top:p.bottom)+u}let f=a.left+o,c=i??t.viewState.heightOracle.textHeight>>1;for(let p=0;;p+=10){let k=l+(c+p)*r,C=q0(t,{x:f,y:k},!1,r);if(k<a.top||k>a.bottom||(r<0?C<n:C>n)){let A=t.docView.coordsForChar(C),V=!A||k<A.top?-1:1;return le.cursor(C,V,void 0,o)}}}function so(t,e,s){for(;;){let i=0;for(let n of t)n.between(e-1,e+1,(r,o,l)=>{if(e>r&&e<o){let a=i||s||(e-r<o-e?-1:1);e=a<0?r:o,i=a}});if(!i)return e}}function G0(t,e){let s=null;for(let i=0;i<e.ranges.length;i++){let n=e.ranges[i],r=null;if(n.empty){let o=so(t,n.from,0);o!=n.from&&(r=le.cursor(o,-1))}else{let o=so(t,n.from,-1),l=so(t,n.to,1);(o!=n.from||l!=n.to)&&(r=le.range(n.from==n.anchor?o:l,n.from==n.head?o:l))}r&&(s||(s=e.ranges.slice()),s[i]=r)}return s?le.create(s,e.mainIndex):e}function gu(t,e,s){let i=so(t.state.facet(Io).map(n=>n(t)),s.from,e.head>s.from?-1:1);return i==s.from?s:le.cursor(i,i<s.from?1:-1)}const Ur="";class LC{constructor(e,s){this.points=e,this.text="",this.lineSeparator=s.facet(Qe.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Ur}readRange(e,s){if(!e)return this;let i=e.parentNode;for(let n=e;;){this.findPointBefore(i,n);let r=this.text.length;this.readNode(n);let o=n.nextSibling;if(o==s)break;let l=ut.get(n),a=ut.get(o);(l&&a?l.breakAfter:(l?l.breakAfter:Xl(n))||Xl(o)&&(n.nodeName!="BR"||n.cmIgnore)&&this.text.length>r)&&!IC(o,s)&&this.lineBreak(),n=o}return this.findPointBefore(i,s),this}readTextNode(e){let s=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,s.length));for(let i=0,n=this.lineSeparator?null:/\r\n?|\n/g;;){let r=-1,o=1,l;if(this.lineSeparator?(r=s.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(l=n.exec(s))&&(r=l.index,o=l[0].length),this.append(s.slice(i,r<0?s.length:r)),r<0)break;if(this.lineBreak(),o>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=o-1);i=r+o}}readNode(e){if(e.cmIgnore)return;let s=ut.get(e),i=s&&s.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let n=i.iter();!n.next().done;)n.lineBreak?this.lineBreak():this.append(n.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,s){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==s&&(i.pos=this.text.length)}findPointInside(e,s){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(BC(e,i.node,i.offset)?s:0))}}function BC(t,e,s){for(;;){if(!e||s<mi(e))return!1;if(e==t)return!0;s=On(e)+1,e=e.parentNode}}function IC(t,e){let s;for(;!(t==e||!t);t=t.nextSibling){let i=ut.get(t);if(!(i?.isWidget||t.cmIgnore))return!1;i&&(s||(s=[])).push(i)}if(s)for(let i of s){let n=i.overrideDOMText;if(n?.length)return!1}return!0}class Yf{constructor(e,s){this.node=e,this.offset=s,this.pos=-1}}class NC{constructor(e,s,i,n){this.typeOver=n,this.bounds=null,this.text="",this.domChanged=s>-1;let{impreciseHead:r,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&s>-1)this.newSel=null;else if(s>-1&&(this.bounds=e.docView.domBoundsAround(s,i,0))){let l=r||o?[]:zC(e),a=new LC(l,e.state);a.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=a.text,this.newSel=FC(l,this.bounds.from)}else{let l=e.observer.selectionRange,a=r&&r.node==l.focusNode&&r.offset==l.focusOffset||!kd(e.contentDOM,l.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(l.focusNode,l.focusOffset),d=o&&o.node==l.anchorNode&&o.offset==l.anchorOffset||!kd(e.contentDOM,l.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(l.anchorNode,l.anchorOffset),u=e.viewport;if((Ae.ios||Ae.chrome)&&e.state.selection.main.empty&&a!=d&&(u.from>0||u.to<e.state.doc.length)){let f=Math.min(a,d),c=Math.max(a,d),p=u.from-f,k=u.to-c;(p==0||p==1||f==0)&&(k==0||k==-1||c==e.state.doc.length)&&(a=0,d=e.state.doc.length)}this.newSel=le.single(d,a)}}}function J0(t,e){let s,{newSel:i}=e,n=t.state.selection.main,r=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:l}=e.bounds,a=n.from,d=null;(r===8||Ae.android&&e.text.length<l-o)&&(a=n.to,d="end");let u=Y0(t.state.doc.sliceString(o,l,Ur),e.text,a-o,d);u&&(Ae.chrome&&r==13&&u.toB==u.from+2&&e.text.slice(u.from,u.toB)==Ur+Ur&&u.toB--,s={from:o+u.from,to:o+u.toA,insert:et.of(e.text.slice(u.from,u.toB).split(Ur))})}else i&&(!t.hasFocus&&t.state.facet(Mi)||i.main.eq(n))&&(i=null);if(!s&&!i)return!1;if(!s&&e.typeOver&&!n.empty&&i&&i.main.empty?s={from:n.from,to:n.to,insert:t.state.doc.slice(n.from,n.to)}:(Ae.mac||Ae.android)&&s&&s.from==s.to&&s.from==n.head-1&&/^\. ?$/.test(s.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(i&&s.insert.length==2&&(i=le.single(i.main.anchor-1,i.main.head-1)),s={from:s.from,to:s.to,insert:et.of([s.insert.toString().replace("."," ")])}):s&&s.from>=n.from&&s.to<=n.to&&(s.from!=n.from||s.to!=n.to)&&n.to-n.from-(s.to-s.from)<=4?s={from:n.from,to:n.to,insert:t.state.doc.slice(n.from,s.from).append(s.insert).append(t.state.doc.slice(s.to,n.to))}:Ae.chrome&&s&&s.from==s.to&&s.from==n.head&&s.insert.toString()==`
 `&&t.lineWrapping&&(i&&(i=le.single(i.main.anchor-1,i.main.head-1)),s={from:n.from,to:n.to,insert:et.of([" "])}),s)return $c(t,s,i,r);if(i&&!i.main.eq(n)){let o=!1,l="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),l=t.inputState.lastSelectionOrigin,l=="select.pointer"&&(i=G0(t.state.facet(Io).map(a=>a(t)),i))),t.dispatch({selection:i,scrollIntoView:o,userEvent:l}),!0}else return!1}function $c(t,e,s,i=-1){if(Ae.ios&&t.inputState.flushIOSKey(e))return!0;let n=t.state.selection.main;if(Ae.android&&(e.to==n.to&&(e.from==n.from||e.from==n.from-1&&t.state.sliceDoc(e.from,n.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&or(t.contentDOM,"Enter",13)||(e.from==n.from-1&&e.to==n.to&&e.insert.length==0||i==8&&e.insert.length<e.to-e.from&&e.to>n.head)&&or(t.contentDOM,"Backspace",8)||e.from==n.from&&e.to==n.to+1&&e.insert.length==0&&or(t.contentDOM,"Delete",46)))return!0;let r=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let o,l=()=>o||(o=UC(t,e,s));return t.state.facet(j0).some(a=>a(t,e.from,e.to,r,l))||t.dispatch(l()),!0}function UC(t,e,s){let i,n=t.state,r=n.selection.main,o=-1;if(e.from==e.to&&e.from<r.from||e.from>r.to){let a=e.from<r.from?-1:1,d=a<0?r.from:r.to,u=so(n.facet(Io).map(f=>f(t)),d,a);e.from==u&&(o=u)}if(o>-1)i={changes:e,selection:le.cursor(e.from+e.insert.length,-1)};else if(e.from>=r.from&&e.to<=r.to&&e.to-e.from>=(r.to-r.from)/3&&(!s||s.main.empty&&s.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let a=r.from<e.from?n.sliceDoc(r.from,e.from):"",d=r.to>e.to?n.sliceDoc(e.to,r.to):"";i=n.replaceSelection(t.state.toText(a+e.insert.sliceString(0,void 0,t.state.lineBreak)+d))}else{let a=n.changes(e),d=s&&s.main.to<=a.newLength?s.main:void 0;if(n.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=r.to&&e.to>=r.to-10){let u=t.state.sliceDoc(e.from,e.to),f,c=s&&W0(t,s.main.head);if(c){let C=e.insert.length-(e.to-e.from);f={from:c.from,to:c.to-C}}else f=t.state.doc.lineAt(r.head);let p=r.to-e.to,k=r.to-r.from;i=n.changeByRange(C=>{if(C.from==r.from&&C.to==r.to)return{changes:a,range:d||C.map(a)};let A=C.to-p,V=A-u.length;if(C.to-C.from!=k||t.state.sliceDoc(V,A)!=u||C.to>=f.from&&C.from<=f.to)return{range:C};let R=n.changes({from:V,to:A,insert:e.insert}),P=C.to-r.to;return{changes:R,range:d?le.range(Math.max(0,d.anchor+P),Math.max(0,d.head+P)):C.map(R)}})}else i={changes:a,selection:d&&n.selection.replaceRange(d)}}let l="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,l+=".compose",t.inputState.compositionFirstChange&&(l+=".start",t.inputState.compositionFirstChange=!1)),n.update(i,{userEvent:l,scrollIntoView:!0})}function Y0(t,e,s,i){let n=Math.min(t.length,e.length),r=0;for(;r<n&&t.charCodeAt(r)==e.charCodeAt(r);)r++;if(r==n&&t.length==e.length)return null;let o=t.length,l=e.length;for(;o>0&&l>0&&t.charCodeAt(o-1)==e.charCodeAt(l-1);)o--,l--;if(i=="end"){let a=Math.max(0,r-Math.min(o,l));s-=o+a-r}if(o<r&&t.length<e.length){let a=s<=r&&s>=o?r-s:0;r-=a,l=r+(l-o),o=r}else if(l<r){let a=s<=r&&s>=l?r-s:0;r-=a,o=r+(o-l),l=r}return{from:r,toA:o,toB:l}}function zC(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:s,anchorOffset:i,focusNode:n,focusOffset:r}=t.observer.selectionRange;return s&&(e.push(new Yf(s,i)),(n!=s||r!=i)&&e.push(new Yf(n,r))),e}function FC(t,e){if(t.length==0)return null;let s=t[0].pos,i=t.length==2?t[1].pos:s;return s>-1&&i>-1?le.single(s+e,i+e):null}class HC{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Ae.safari&&e.contentDOM.addEventListener("input",()=>null),Ae.gecko&&o4(e.contentDOM.ownerDocument)}handleEvent(e){!QC(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,s){let i=this.handlers[e];if(i){for(let n of i.observers)n(this.view,s);for(let n of i.handlers){if(s.defaultPrevented)break;if(n(this.view,s)){s.preventDefault();break}}}}ensureHandlers(e){let s=WC(e),i=this.handlers,n=this.view.contentDOM;for(let r in s)if(r!="scroll"){let o=!s[r].handlers.length,l=i[r];l&&o!=!l.handlers.length&&(n.removeEventListener(r,this.handleEvent),l=null),l||n.addEventListener(r,this.handleEvent,{passive:o})}for(let r in i)r!="scroll"&&!s[r]&&n.removeEventListener(r,this.handleEvent);this.handlers=s}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&Q0.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),Ae.android&&Ae.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let s;return Ae.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((s=X0.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||qC.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=s||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let s=this.pendingIOSKey;return!s||s.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,or(this.view.contentDOM,s.key,s.keyCode,s instanceof KeyboardEvent?s:void 0))}ignoreDuringComposition(e){return!/^key/.test(e.type)||e.synthetic?!1:this.composing>0?!0:Ae.safari&&!Ae.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function Xf(t,e){return(s,i)=>{try{return e.call(t,i,s)}catch(n){ys(s.state,n)}}}function WC(t){let e=Object.create(null);function s(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of t){let n=i.spec,r=n&&n.plugin.domEventHandlers,o=n&&n.plugin.domEventObservers;if(r)for(let l in r){let a=r[l];a&&s(l).handlers.push(Xf(i.value,a))}if(o)for(let l in o){let a=o[l];a&&s(l).observers.push(Xf(i.value,a))}}for(let i in Qs)s(i).handlers.push(Qs[i]);for(let i in Ns)s(i).observers.push(Ns[i]);return e}const X0=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],qC="dthko",Q0=[16,17,18,20,91,92,224,225],nl=6;function rl(t){return Math.max(0,t)*.7+8}function KC(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class GC{constructor(e,s,i,n){this.view=e,this.startEvent=s,this.style=i,this.mustSelect=n,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=s,this.scrollParents=sC(e.contentDOM),this.atoms=e.state.facet(Io).map(o=>o(e));let r=e.contentDOM.ownerDocument;r.addEventListener("mousemove",this.move=this.move.bind(this)),r.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=s.shiftKey,this.multiple=e.state.facet(Qe.allowMultipleSelections)&&JC(e,s),this.dragging=XC(e,s)&&tv(s)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&KC(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let s=0,i=0,n=0,r=0,o=this.view.win.innerWidth,l=this.view.win.innerHeight;this.scrollParents.x&&({left:n,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:r,bottom:l}=this.scrollParents.y.getBoundingClientRect());let a=Tc(this.view);e.clientX-a.left<=n+nl?s=-rl(n-e.clientX):e.clientX+a.right>=o-nl&&(s=rl(e.clientX-o)),e.clientY-a.top<=r+nl?i=-rl(r-e.clientY):e.clientY+a.bottom>=l-nl&&(i=rl(e.clientY-l)),this.setScrollSpeed(s,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,s){this.scrollSpeed={x:e,y:s},e||s?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:s}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),s&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=s,s=0),(e||s)&&this.view.win.scrollBy(e,s),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:s}=this,i=G0(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(s.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(s=>s.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function JC(t,e){let s=t.state.facet($0);return s.length?s[0](e):Ae.mac?e.metaKey:e.ctrlKey}function YC(t,e){let s=t.state.facet(E0);return s.length?s[0](e):Ae.mac?!e.altKey:!e.ctrlKey}function XC(t,e){let{main:s}=t.state.selection;if(s.empty)return!1;let i=bo(t.root);if(!i||i.rangeCount==0)return!0;let n=i.getRangeAt(0).getClientRects();for(let r=0;r<n.length;r++){let o=n[r];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function QC(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let s=e.target,i;s!=t.contentDOM;s=s.parentNode)if(!s||s.nodeType==11||(i=ut.get(s))&&i.ignoreEvent(e))return!1;return!0}const Qs=Object.create(null),Ns=Object.create(null),Z0=Ae.ie&&Ae.ie_version<15||Ae.ios&&Ae.webkit_version<604;function ZC(t){let e=t.dom.parentNode;if(!e)return;let s=e.appendChild(document.createElement("textarea"));s.style.cssText="position: fixed; left: -10000px; top: 10px",s.focus(),setTimeout(()=>{t.focus(),s.remove(),ev(t,s.value)},50)}function Ra(t,e,s){for(let i of t.facet(e))s=i(s,t);return s}function ev(t,e){e=Ra(t.state,Vc,e);let{state:s}=t,i,n=1,r=s.toText(e),o=r.lines==s.selection.ranges.length;if($d!=null&&s.selection.ranges.every(a=>a.empty)&&$d==r.toString()){let a=-1;i=s.changeByRange(d=>{let u=s.doc.lineAt(d.from);if(u.from==a)return{range:d};a=u.from;let f=s.toText((o?r.line(n++).text:e)+s.lineBreak);return{changes:{from:u.from,insert:f},range:le.cursor(d.from+f.length)}})}else o?i=s.changeByRange(a=>{let d=r.line(n++);return{changes:{from:a.from,to:a.to,insert:d.text},range:le.cursor(a.from+d.length)}}):i=s.replaceSelection(r);t.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}Ns.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};Qs.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);Ns.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};Ns.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};Qs.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let s=null;for(let i of t.state.facet(O0))if(s=i(t,e),s)break;if(!s&&e.button==0&&(s=s4(t,e)),s){let i=!t.hasFocus;t.inputState.startMouseSelection(new GC(t,e,s,i)),i&&t.observer.ignore(()=>{p0(t.contentDOM);let r=t.root.activeElement;r&&!r.contains(t.contentDOM)&&r.blur()});let n=t.inputState.mouseSelection;if(n)return n.start(e),n.dragging===!1}else t.inputState.setSelectionOrigin("select.pointer");return!1};function Qf(t,e,s,i){if(i==1)return le.cursor(e,s);if(i==2)return DC(t.state,e,s);{let n=Tt.find(t.docView,e),r=t.state.doc.lineAt(n?n.posAtEnd:e),o=n?n.posAtStart:r.from,l=n?n.posAtEnd:r.to;return l<t.state.doc.length&&l==r.to&&l++,le.range(o,l)}}let Zf=(t,e,s)=>e>=s.top&&e<=s.bottom&&t>=s.left&&t<=s.right;function e4(t,e,s,i){let n=Tt.find(t.docView,e);if(!n)return 1;let r=e-n.posAtStart;if(r==0)return 1;if(r==n.length)return-1;let o=n.coordsAt(r,-1);if(o&&Zf(s,i,o))return-1;let l=n.coordsAt(r,1);return l&&Zf(s,i,l)?1:o&&o.bottom>=i?-1:1}function ep(t,e){let s=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:s,bias:e4(t,s,e.clientX,e.clientY)}}const t4=Ae.ie&&Ae.ie_version<=11;let tp=null,sp=0,ip=0;function tv(t){if(!t4)return t.detail;let e=tp,s=ip;return tp=t,ip=Date.now(),sp=!e||s>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(sp+1)%3:1}function s4(t,e){let s=ep(t,e),i=tv(e),n=t.state.selection;return{update(r){r.docChanged&&(s.pos=r.changes.mapPos(s.pos),n=n.map(r.changes))},get(r,o,l){let a=ep(t,r),d,u=Qf(t,a.pos,a.bias,i);if(s.pos!=a.pos&&!o){let f=Qf(t,s.pos,s.bias,i),c=Math.min(f.from,u.from),p=Math.max(f.to,u.to);u=c<u.from?le.range(c,p):le.range(p,c)}return o?n.replaceRange(n.main.extend(u.from,u.to)):l&&i==1&&n.ranges.length>1&&(d=i4(n,a.pos))?d:l?n.addRange(u):le.create([u])}}}function i4(t,e){for(let s=0;s<t.ranges.length;s++){let{from:i,to:n}=t.ranges[s];if(i<=e&&n>=e)return le.create(t.ranges.slice(0,s).concat(t.ranges.slice(s+1)),t.mainIndex==s?0:t.mainIndex-(t.mainIndex>s?1:0))}return null}Qs.dragstart=(t,e)=>{let{selection:{main:s}}=t.state;if(e.target.draggable){let n=t.docView.nearest(e.target);if(n&&n.isWidget){let r=n.posAtStart,o=r+n.length;(r>=s.to||o<=s.from)&&(s=le.range(r,o))}}let{inputState:i}=t;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=s,e.dataTransfer&&(e.dataTransfer.setData("Text",Ra(t.state,Mc,t.state.sliceDoc(s.from,s.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Qs.dragend=t=>(t.inputState.draggedContent=null,!1);function np(t,e,s,i){if(s=Ra(t.state,Vc,s),!s)return;let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:r}=t.inputState,o=i&&r&&YC(t,e)?{from:r.from,to:r.to}:null,l={from:n,insert:s},a=t.state.changes(o?[o,l]:l);t.focus(),t.dispatch({changes:a,selection:{anchor:a.mapPos(n,-1),head:a.mapPos(n,1)},userEvent:o?"move.drop":"input.drop"}),t.inputState.draggedContent=null}Qs.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let s=e.dataTransfer.files;if(s&&s.length){let i=Array(s.length),n=0,r=()=>{++n==s.length&&np(t,e,i.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<s.length;o++){let l=new FileReader;l.onerror=r,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(i[o]=l.result),r()},l.readAsText(s[o])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return np(t,e,i,!0),!0}return!1};Qs.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let s=Z0?null:e.clipboardData;return s?(ev(t,s.getData("text/plain")||s.getData("text/uri-list")),!0):(ZC(t),!1)};function n4(t,e){let s=t.dom.parentNode;if(!s)return;let i=s.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),t.focus()},50)}function r4(t){let e=[],s=[],i=!1;for(let n of t.selection.ranges)n.empty||(e.push(t.sliceDoc(n.from,n.to)),s.push(n));if(!e.length){let n=-1;for(let{from:r}of t.selection.ranges){let o=t.doc.lineAt(r);o.number>n&&(e.push(o.text),s.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),n=o.number}i=!0}return{text:Ra(t,Mc,e.join(t.lineBreak)),ranges:s,linewise:i}}let $d=null;Qs.copy=Qs.cut=(t,e)=>{let{text:s,ranges:i,linewise:n}=r4(t.state);if(!s&&!n)return!1;$d=n?s:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let r=Z0?null:e.clipboardData;return r?(r.clearData(),r.setData("text/plain",s),!0):(n4(t,s),!1)};const sv=Li.define();function iv(t,e){let s=[];for(let i of t.facet(R0)){let n=i(t,e);n&&s.push(n)}return s.length?t.update({effects:s,annotations:sv.of(!0)}):null}function nv(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let s=iv(t.state,e);s?t.dispatch(s):t.update([])}},10)}Ns.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),nv(t)};Ns.blur=t=>{t.observer.clearSelectionRange(),nv(t)};Ns.compositionstart=Ns.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};Ns.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,Ae.chrome&&Ae.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};Ns.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};Qs.beforeinput=(t,e)=>{var s,i;if(e.inputType=="insertReplacementText"&&t.observer.editContext){let r=(s=e.dataTransfer)===null||s===void 0?void 0:s.getData("text/plain"),o=e.getTargetRanges();if(r&&o.length){let l=o[0],a=t.posAtDOM(l.startContainer,l.startOffset),d=t.posAtDOM(l.endContainer,l.endOffset);return $c(t,{from:a,to:d,insert:t.state.toText(r)},null),!0}}let n;if(Ae.chrome&&Ae.android&&(n=X0.find(r=>r.inputType==e.inputType))&&(t.observer.delayAndroidKey(n.key,n.keyCode),n.key=="Backspace"||n.key=="Delete")){let r=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>r+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return Ae.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),Ae.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>Ns.compositionend(t,e),20),!1};const rp=new Set;function o4(t){rp.has(t)||(rp.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const op=["pre-wrap","normal","pre-line","break-spaces"];let vr=!1;function lp(){vr=!1}class l4{constructor(e){this.lineWrapping=e,this.doc=et.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,s){let i=this.doc.lineAt(s).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((s-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return op.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let s=!1;for(let i=0;i<e.length;i++){let n=e[i];n<0?i++:this.heightSamples[Math.floor(n*10)]||(s=!0,this.heightSamples[Math.floor(n*10)]=!0)}return s}refresh(e,s,i,n,r,o){let l=op.indexOf(e)>-1,a=Math.round(s)!=Math.round(this.lineHeight)||this.lineWrapping!=l;if(this.lineWrapping=l,this.lineHeight=s,this.charWidth=i,this.textHeight=n,this.lineLength=r,a){this.heightSamples={};for(let d=0;d<o.length;d++){let u=o[d];u<0?d++:this.heightSamples[Math.floor(u*10)]=!0}}return a}}class a4{constructor(e,s){this.from=e,this.heights=s,this.index=0}get more(){return this.index<this.heights.length}}class di{constructor(e,s,i,n,r){this.from=e,this.length=s,this.top=i,this.height=n,this._content=r}get type(){return typeof this._content=="number"?hs.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof nn?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let s=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new di(this.from,this.length+e.length,this.top,this.height+e.height,s)}}var mt=(function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t})(mt||(mt={}));const El=.001;class fs{constructor(e,s,i=2){this.length=e,this.height=s,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>El&&(vr=!0),this.height=e)}replace(e,s,i){return fs.of(i)}decomposeLeft(e,s){s.push(this)}decomposeRight(e,s){s.push(this)}applyChanges(e,s,i,n){let r=this,o=i.doc;for(let l=n.length-1;l>=0;l--){let{fromA:a,toA:d,fromB:u,toB:f}=n[l],c=r.lineAt(a,mt.ByPosNoHeight,i.setDoc(s),0,0),p=c.to>=d?c:r.lineAt(d,mt.ByPosNoHeight,i,0,0);for(f+=p.to-d,d=p.to;l>0&&c.from<=n[l-1].toA;)a=n[l-1].fromA,u=n[l-1].fromB,l--,a<c.from&&(c=r.lineAt(a,mt.ByPosNoHeight,i,0,0));u+=c.from-a,a=c.from;let k=Ec.build(i.setDoc(o),e,u,f);r=ea(r,r.replace(a,d,k))}return r.updateHeight(i,0)}static empty(){return new _s(0,0)}static of(e){if(e.length==1)return e[0];let s=0,i=e.length,n=0,r=0;for(;;)if(s==i)if(n>r*2){let l=e[s-1];l.break?e.splice(--s,1,l.left,null,l.right):e.splice(--s,1,l.left,l.right),i+=1+l.break,n-=l.size}else if(r>n*2){let l=e[i];l.break?e.splice(i,1,l.left,null,l.right):e.splice(i,1,l.left,l.right),i+=2+l.break,r-=l.size}else break;else if(n<r){let l=e[s++];l&&(n+=l.size)}else{let l=e[--i];l&&(r+=l.size)}let o=0;return e[s-1]==null?(o=1,s--):e[s]==null&&(o=1,i++),new u4(fs.of(e.slice(0,s)),o,fs.of(e.slice(i)))}}function ea(t,e){return t==e?t:(t.constructor!=e.constructor&&(vr=!0),e)}fs.prototype.size=1;class rv extends fs{constructor(e,s,i){super(e,s),this.deco=i}blockAt(e,s,i,n){return new di(n,this.length,i,this.height,this.deco||0)}lineAt(e,s,i,n,r){return this.blockAt(0,i,n,r)}forEachLine(e,s,i,n,r,o){e<=r+this.length&&s>=r&&o(this.blockAt(0,i,n,r))}updateHeight(e,s=0,i=!1,n){return n&&n.from<=s&&n.more&&this.setHeight(n.heights[n.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class _s extends rv{constructor(e,s){super(e,s,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,s,i,n){return new di(n,this.length,i,this.height,this.breaks)}replace(e,s,i){let n=i[0];return i.length==1&&(n instanceof _s||n instanceof It&&n.flags&4)&&Math.abs(this.length-n.length)<10?(n instanceof It?n=new _s(n.length,this.height):n.height=this.height,this.outdated||(n.outdated=!1),n):fs.of(i)}updateHeight(e,s=0,i=!1,n){return n&&n.from<=s&&n.more?this.setHeight(n.heights[n.index++]):(i||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class It extends fs{constructor(e){super(e,0)}heightMetrics(e,s){let i=e.doc.lineAt(s).number,n=e.doc.lineAt(s+this.length).number,r=n-i+1,o,l=0;if(e.lineWrapping){let a=Math.min(this.height,e.lineHeight*r);o=a/r,this.length>r+1&&(l=(this.height-a)/(this.length-r-1))}else o=this.height/r;return{firstLine:i,lastLine:n,perLine:o,perChar:l}}blockAt(e,s,i,n){let{firstLine:r,lastLine:o,perLine:l,perChar:a}=this.heightMetrics(s,n);if(s.lineWrapping){let d=n+(e<s.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),u=s.doc.lineAt(d),f=l+u.length*a,c=Math.max(i,e-f/2);return new di(u.from,u.length,c,f,0)}else{let d=Math.max(0,Math.min(o-r,Math.floor((e-i)/l))),{from:u,length:f}=s.doc.line(r+d);return new di(u,f,i+l*d,l,0)}}lineAt(e,s,i,n,r){if(s==mt.ByHeight)return this.blockAt(e,i,n,r);if(s==mt.ByPosNoHeight){let{from:p,to:k}=i.doc.lineAt(e);return new di(p,k-p,0,0,0)}let{firstLine:o,perLine:l,perChar:a}=this.heightMetrics(i,r),d=i.doc.lineAt(e),u=l+d.length*a,f=d.number-o,c=n+l*f+a*(d.from-r-f);return new di(d.from,d.length,Math.max(n,Math.min(c,n+this.height-u)),u,0)}forEachLine(e,s,i,n,r,o){e=Math.max(e,r),s=Math.min(s,r+this.length);let{firstLine:l,perLine:a,perChar:d}=this.heightMetrics(i,r);for(let u=e,f=n;u<=s;){let c=i.doc.lineAt(u);if(u==e){let k=c.number-l;f+=a*k+d*(e-r-k)}let p=a+d*c.length;o(new di(c.from,c.length,f,p,0)),f+=p,u=c.to+1}}replace(e,s,i){let n=this.length-s;if(n>0){let r=i[i.length-1];r instanceof It?i[i.length-1]=new It(r.length+n):i.push(null,new It(n-1))}if(e>0){let r=i[0];r instanceof It?i[0]=new It(e+r.length):i.unshift(new It(e-1),null)}return fs.of(i)}decomposeLeft(e,s){s.push(new It(e-1),null)}decomposeRight(e,s){s.push(null,new It(this.length-e-1))}updateHeight(e,s=0,i=!1,n){let r=s+this.length;if(n&&n.from<=s+this.length&&n.more){let o=[],l=Math.max(s,n.from),a=-1;for(n.from>s&&o.push(new It(n.from-s-1).updateHeight(e,s));l<=r&&n.more;){let u=e.doc.lineAt(l).length;o.length&&o.push(null);let f=n.heights[n.index++];a==-1?a=f:Math.abs(f-a)>=El&&(a=-2);let c=new _s(u,f);c.outdated=!1,o.push(c),l+=u+1}l<=r&&o.push(null,new It(r-l).updateHeight(e,l));let d=fs.of(o);return(a<0||Math.abs(d.height-this.height)>=El||Math.abs(a-this.heightMetrics(e,s).perLine)>=El)&&(vr=!0),ea(this,d)}else(i||this.outdated)&&(this.setHeight(e.heightForGap(s,s+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class u4 extends fs{constructor(e,s,i){super(e.length+s+i.length,e.height+i.height,s|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,s,i,n){let r=i+this.left.height;return e<r?this.left.blockAt(e,s,i,n):this.right.blockAt(e,s,r,n+this.left.length+this.break)}lineAt(e,s,i,n,r){let o=n+this.left.height,l=r+this.left.length+this.break,a=s==mt.ByHeight?e<o:e<l,d=a?this.left.lineAt(e,s,i,n,r):this.right.lineAt(e,s,i,o,l);if(this.break||(a?d.to<l:d.from>l))return d;let u=s==mt.ByPosNoHeight?mt.ByPosNoHeight:mt.ByPos;return a?d.join(this.right.lineAt(l,u,i,o,l)):this.left.lineAt(l,u,i,n,r).join(d)}forEachLine(e,s,i,n,r,o){let l=n+this.left.height,a=r+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,s,i,n,r,o),s>=a&&this.right.forEachLine(e,s,i,l,a,o);else{let d=this.lineAt(a,mt.ByPos,i,n,r);e<d.from&&this.left.forEachLine(e,d.from-1,i,n,r,o),d.to>=e&&d.from<=s&&o(d),s>d.to&&this.right.forEachLine(d.to+1,s,i,l,a,o)}}replace(e,s,i){let n=this.left.length+this.break;if(s<n)return this.balanced(this.left.replace(e,s,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-n,s-n,i));let r=[];e>0&&this.decomposeLeft(e,r);let o=r.length;for(let l of i)r.push(l);if(e>0&&ap(r,o-1),s<this.length){let l=r.length;this.decomposeRight(s,r),ap(r,l)}return fs.of(r)}decomposeLeft(e,s){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,s);s.push(this.left),this.break&&(i++,e>=i&&s.push(null)),e>i&&this.right.decomposeLeft(e-i,s)}decomposeRight(e,s){let i=this.left.length,n=i+this.break;if(e>=n)return this.right.decomposeRight(e-n,s);e<i&&this.left.decomposeRight(e,s),this.break&&e<n&&s.push(null),s.push(this.right)}balanced(e,s){return e.size>2*s.size||s.size>2*e.size?fs.of(this.break?[e,null,s]:[e,s]):(this.left=ea(this.left,e),this.right=ea(this.right,s),this.setHeight(e.height+s.height),this.outdated=e.outdated||s.outdated,this.size=e.size+s.size,this.length=e.length+this.break+s.length,this)}updateHeight(e,s=0,i=!1,n){let{left:r,right:o}=this,l=s+r.length+this.break,a=null;return n&&n.from<=s+r.length&&n.more?a=r=r.updateHeight(e,s,i,n):r.updateHeight(e,s,i),n&&n.from<=l+o.length&&n.more?a=o=o.updateHeight(e,l,i,n):o.updateHeight(e,l,i),a?this.balanced(r,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function ap(t,e){let s,i;t[e]==null&&(s=t[e-1])instanceof It&&(i=t[e+1])instanceof It&&t.splice(e-1,3,new It(s.length+1+i.length))}const d4=5;class Ec{constructor(e,s){this.pos=e,this.oracle=s,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,s){if(this.lineStart>-1){let i=Math.min(s,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof _s?n.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new _s(i-this.pos,-1)),this.writtenTo=i,s>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=s}point(e,s,i){if(e<s||i.heightRelevant){let n=i.widget?i.widget.estimatedHeight:0,r=i.widget?i.widget.lineBreaks:0;n<0&&(n=this.oracle.lineHeight);let o=s-e;i.block?this.addBlock(new rv(o,n,i)):(o||r||n>=d4)&&this.addLineDeco(n,r,o)}else s>e&&this.span(e,s);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:s}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=s,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new _s(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,s){let i=new It(s-e);return this.oracle.doc.lineAt(e).to==s&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof _s)return e;let s=new _s(0,-1);return this.nodes.push(s),s}addBlock(e){this.enterLine();let s=e.deco;s&&s.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,s&&s.endSide>0&&(this.covering=e)}addLineDeco(e,s,i){let n=this.ensureLine();n.length+=i,n.collapsed+=i,n.widgetHeight=Math.max(n.widgetHeight,e),n.breaks+=s,this.writtenTo=this.pos=this.pos+i}finish(e){let s=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(s instanceof _s)&&!this.isCovered?this.nodes.push(new _s(0,-1)):(this.writtenTo<this.pos||s==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let n of this.nodes)n instanceof _s&&n.updateHeight(this.oracle,i),i+=n?n.length:1;return this.nodes}static build(e,s,i,n){let r=new Ec(i,e);return Ze.spans(s,i,n,r,0),r.finish(i)}}function c4(t,e,s){let i=new h4;return Ze.compare(t,e,s,i,0),i.changes}class h4{constructor(){this.changes=[]}compareRange(){}comparePoint(e,s,i,n){(e<s||i&&i.heightRelevant||n&&n.heightRelevant)&&$l(e,s,this.changes,5)}}function f4(t,e){let s=t.getBoundingClientRect(),i=t.ownerDocument,n=i.defaultView||window,r=Math.max(0,s.left),o=Math.min(n.innerWidth,s.right),l=Math.max(0,s.top),a=Math.min(n.innerHeight,s.bottom);for(let d=t.parentNode;d&&d!=i.body;)if(d.nodeType==1){let u=d,f=window.getComputedStyle(u);if((u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth)&&f.overflow!="visible"){let c=u.getBoundingClientRect();r=Math.max(r,c.left),o=Math.min(o,c.right),l=Math.max(l,c.top),a=Math.min(d==t.parentNode?n.innerHeight:a,c.bottom)}d=f.position=="absolute"||f.position=="fixed"?u.offsetParent:u.parentNode}else if(d.nodeType==11)d=d.host;else break;return{left:r-s.left,right:Math.max(r,o)-s.left,top:l-(s.top+e),bottom:Math.max(l,a)-(s.top+e)}}function p4(t){let e=t.getBoundingClientRect(),s=t.ownerDocument.defaultView||window;return e.left<s.innerWidth&&e.right>0&&e.top<s.innerHeight&&e.bottom>0}function m4(t,e){let s=t.getBoundingClientRect();return{left:0,right:s.right-s.left,top:e,bottom:s.bottom-(s.top+e)}}class vu{constructor(e,s,i,n){this.from=e,this.to=s,this.size=i,this.displaySize=n}static same(e,s){if(e.length!=s.length)return!1;for(let i=0;i<e.length;i++){let n=e[i],r=s[i];if(n.from!=r.from||n.to!=r.to||n.size!=r.size)return!1}return!0}draw(e,s){return Ne.replace({widget:new g4(this.displaySize*(s?e.scaleY:e.scaleX),s)}).range(this.from,this.to)}}class g4 extends ln{constructor(e,s){super(),this.size=e,this.vertical=s}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class up{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=dp,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=gt.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let s=e.facet(Dc).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new l4(s),this.stateDeco=e.facet(ko).filter(i=>typeof i!="function"),this.heightMap=fs.empty().applyChanges(this.stateDeco,et.empty,this.heightOracle.setDoc(e.doc),[new Ls(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Ne.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:s}=this.state.selection;for(let i=0;i<=1;i++){let n=i?s.head:s.anchor;if(!e.some(({from:r,to:o})=>n>=r&&n<=o)){let{from:r,to:o}=this.lineBlockAt(n);e.push(new ol(r,o))}}return this.viewports=e.sort((i,n)=>i.from-n.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?dp:new Oc(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(zr(e,this.scaler))})}update(e,s=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(ko).filter(u=>typeof u!="function");let n=e.changedRanges,r=Ls.extendWithRanges(n,c4(i,this.stateDeco,e?e.changes:Pt.empty(this.state.doc.length))),o=this.heightMap.height,l=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);lp(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),r),(this.heightMap.height!=o||vr)&&(e.flags|=2),l?(this.scrollAnchorPos=e.changes.mapPos(l.from,-1),this.scrollAnchorHeight=l.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let a=r.length?this.mapViewport(this.viewport,e.changes):this.viewport;(s&&(s.range.head<a.from||s.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,s));let d=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,e.flags|=this.updateForViewport(),(d||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),s&&(this.scrollTarget=s),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(B0)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let s=e.contentDOM,i=window.getComputedStyle(s),n=this.heightOracle,r=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?gt.RTL:gt.LTR;let o=this.heightOracle.mustRefreshForWrapping(r),l=s.getBoundingClientRect(),a=o||this.mustMeasureContent||this.contentDOMHeight!=l.height;this.contentDOMHeight=l.height,this.mustMeasureContent=!1;let d=0,u=0;if(l.width&&l.height){let{scaleX:z,scaleY:H}=f0(s,l);(z>.005&&Math.abs(this.scaleX-z)>.005||H>.005&&Math.abs(this.scaleY-H)>.005)&&(this.scaleX=z,this.scaleY=H,d|=16,o=a=!0)}let f=(parseInt(i.paddingTop)||0)*this.scaleY,c=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=f||this.paddingBottom!=c)&&(this.paddingTop=f,this.paddingBottom=c,d|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(n.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,d|=16);let p=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=p&&(this.scrollAnchorHeight=-1,this.scrollTop=p),this.scrolledToBottom=g0(e.scrollDOM);let k=(this.printing?m4:f4)(s,this.paddingTop),C=k.top-this.pixelViewport.top,A=k.bottom-this.pixelViewport.bottom;this.pixelViewport=k;let V=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(V!=this.inView&&(this.inView=V,V&&(a=!0)),!this.inView&&!this.scrollTarget&&!p4(e.dom))return 0;let R=l.width;if((this.contentDOMWidth!=R||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=l.width,this.editorHeight=e.scrollDOM.clientHeight,d|=16),a){let z=e.docView.measureVisibleLineHeights(this.viewport);if(n.mustRefreshForHeights(z)&&(o=!0),o||n.lineWrapping&&Math.abs(R-this.contentDOMWidth)>n.charWidth){let{lineHeight:H,charWidth:B,textHeight:M}=e.docView.measureTextSize();o=H>0&&n.refresh(r,H,B,M,Math.max(5,R/B),z),o&&(e.docView.minWidth=0,d|=16)}C>0&&A>0?u=Math.max(C,A):C<0&&A<0&&(u=Math.min(C,A)),lp();for(let H of this.viewports){let B=H.from==this.viewport.from?z:e.docView.measureVisibleLineHeights(H);this.heightMap=(o?fs.empty().applyChanges(this.stateDeco,et.empty,this.heightOracle,[new Ls(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(n,0,o,new a4(H.from,B))}vr&&(d|=2)}let P=!this.viewportIsAppropriate(this.viewport,u)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return P&&(d&2&&(d|=this.updateScaler()),this.viewport=this.getViewport(u,this.scrollTarget),d|=this.updateForViewport()),(d&2||P)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),d|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),d}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,s){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),n=this.heightMap,r=this.heightOracle,{visibleTop:o,visibleBottom:l}=this,a=new ol(n.lineAt(o-i*1e3,mt.ByHeight,r,0,0).from,n.lineAt(l+(1-i)*1e3,mt.ByHeight,r,0,0).to);if(s){let{head:d}=s.range;if(d<a.from||d>a.to){let u=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),f=n.lineAt(d,mt.ByPos,r,0,0),c;s.y=="center"?c=(f.top+f.bottom)/2-u/2:s.y=="start"||s.y=="nearest"&&d<a.from?c=f.top:c=f.bottom-u,a=new ol(n.lineAt(c-1e3/2,mt.ByHeight,r,0,0).from,n.lineAt(c+u+1e3/2,mt.ByHeight,r,0,0).to)}}return a}mapViewport(e,s){let i=s.mapPos(e.from,-1),n=s.mapPos(e.to,1);return new ol(this.heightMap.lineAt(i,mt.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(n,mt.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:s},i=0){if(!this.inView)return!0;let{top:n}=this.heightMap.lineAt(e,mt.ByPos,this.heightOracle,0,0),{bottom:r}=this.heightMap.lineAt(s,mt.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:l}=this;return(e==0||n<=o-Math.max(10,Math.min(-i,250)))&&(s==this.state.doc.length||r>=l+Math.max(10,Math.min(i,250)))&&n>o-2*1e3&&r<l+2*1e3}mapLineGaps(e,s){if(!e.length||s.empty)return e;let i=[];for(let n of e)s.touchesRange(n.from,n.to)||i.push(new vu(s.mapPos(n.from),s.mapPos(n.to),n.size,n.displaySize));return i}ensureLineGaps(e,s){let i=this.heightOracle.lineWrapping,n=i?1e4:2e3,r=n>>1,o=n<<1;if(this.defaultTextDirection!=gt.LTR&&!i)return[];let l=[],a=(u,f,c,p)=>{if(f-u<r)return;let k=this.state.selection.main,C=[k.from];k.empty||C.push(k.to);for(let V of C)if(V>u&&V<f){a(u,V-10,c,p),a(V+10,f,c,p);return}let A=y4(e,V=>V.from>=c.from&&V.to<=c.to&&Math.abs(V.from-u)<r&&Math.abs(V.to-f)<r&&!C.some(R=>V.from<R&&V.to>R));if(!A){if(f<c.to&&s&&i&&s.visibleRanges.some(P=>P.from<=f&&P.to>=f)){let P=s.moveToLineBoundary(le.cursor(f),!1,!0).head;P>u&&(f=P)}let V=this.gapSize(c,u,f,p),R=i||V<2e6?V:2e6;A=new vu(u,f,V,R)}l.push(A)},d=u=>{if(u.length<o||u.type!=hs.Text)return;let f=v4(u.from,u.to,this.stateDeco);if(f.total<o)return;let c=this.scrollTarget?this.scrollTarget.range.head:null,p,k;if(i){let C=n/this.heightOracle.lineLength*this.heightOracle.lineHeight,A,V;if(c!=null){let R=al(f,c),P=((this.visibleBottom-this.visibleTop)/2+C)/u.height;A=R-P,V=R+P}else A=(this.visibleTop-u.top-C)/u.height,V=(this.visibleBottom-u.top+C)/u.height;p=ll(f,A),k=ll(f,V)}else{let C=f.total*this.heightOracle.charWidth,A=n*this.heightOracle.charWidth,V=0;if(C>2e6)for(let B of e)B.from>=u.from&&B.from<u.to&&B.size!=B.displaySize&&B.from*this.heightOracle.charWidth+V<this.pixelViewport.left&&(V=B.size-B.displaySize);let R=this.pixelViewport.left+V,P=this.pixelViewport.right+V,z,H;if(c!=null){let B=al(f,c),M=((P-R)/2+A)/C;z=B-M,H=B+M}else z=(R-A)/C,H=(P+A)/C;p=ll(f,z),k=ll(f,H)}p>u.from&&a(u.from,p,u,f),k<u.to&&a(k,u.to,u,f)};for(let u of this.viewportLines)Array.isArray(u.type)?u.type.forEach(d):d(u);return l}gapSize(e,s,i,n){let r=al(n,i)-al(n,s);return this.heightOracle.lineWrapping?e.height*r:n.total*this.heightOracle.charWidth*r}updateLineGaps(e){vu.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Ne.set(e.map(s=>s.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let s=this.stateDeco;this.lineGaps.length&&(s=s.concat(this.lineGapDeco));let i=[];Ze.spans(s,this.viewport.from,this.viewport.to,{span(r,o){i.push({from:r,to:o})},point(){}},20);let n=0;if(i.length!=this.visibleRanges.length)n=12;else for(let r=0;r<i.length&&!(n&8);r++){let o=this.visibleRanges[r],l=i[r];(o.from!=l.from||o.to!=l.to)&&(n|=4,e&&e.mapPos(o.from,-1)==l.from&&e.mapPos(o.to,1)==l.to||(n|=8))}return this.visibleRanges=i,n}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(s=>s.from<=e&&s.to>=e)||zr(this.heightMap.lineAt(e,mt.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(s=>s.top<=e&&s.bottom>=e)||zr(this.heightMap.lineAt(this.scaler.fromDOM(e),mt.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let s=this.lineBlockAtHeight(e+8);return s.from>=this.viewport.from||this.viewportLines[0].top-e>200?s:this.viewportLines[0]}elementAtHeight(e){return zr(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class ol{constructor(e,s){this.from=e,this.to=s}}function v4(t,e,s){let i=[],n=t,r=0;return Ze.spans(s,t,e,{span(){},point(o,l){o>n&&(i.push({from:n,to:o}),r+=o-n),n=l}},20),n<e&&(i.push({from:n,to:e}),r+=e-n),{total:r,ranges:i}}function ll({total:t,ranges:e},s){if(s<=0)return e[0].from;if(s>=1)return e[e.length-1].to;let i=Math.floor(t*s);for(let n=0;;n++){let{from:r,to:o}=e[n],l=o-r;if(i<=l)return r+i;i-=l}}function al(t,e){let s=0;for(let{from:i,to:n}of t.ranges){if(e<=n){s+=e-i;break}s+=n-i}return s/t.total}function y4(t,e){for(let s of t)if(e(s))return s}const dp={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class Oc{constructor(e,s,i){let n=0,r=0,o=0;this.viewports=i.map(({from:l,to:a})=>{let d=s.lineAt(l,mt.ByPos,e,0,0).top,u=s.lineAt(a,mt.ByPos,e,0,0).bottom;return n+=u-d,{from:l,to:a,top:d,bottom:u,domTop:0,domBottom:0}}),this.scale=(7e6-n)/(s.height-n);for(let l of this.viewports)l.domTop=o+(l.top-r)*this.scale,o=l.domBottom=l.domTop+(l.bottom-l.top),r=l.bottom}toDOM(e){for(let s=0,i=0,n=0;;s++){let r=s<this.viewports.length?this.viewports[s]:null;if(!r||e<r.top)return n+(e-i)*this.scale;if(e<=r.bottom)return r.domTop+(e-r.top);i=r.bottom,n=r.domBottom}}fromDOM(e){for(let s=0,i=0,n=0;;s++){let r=s<this.viewports.length?this.viewports[s]:null;if(!r||e<r.domTop)return i+(e-n)/this.scale;if(e<=r.domBottom)return r.top+(e-r.domTop);i=r.bottom,n=r.domBottom}}eq(e){return e instanceof Oc?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((s,i)=>s.from==e.viewports[i].from&&s.to==e.viewports[i].to):!1}}function zr(t,e){if(e.scale==1)return t;let s=e.toDOM(t.top),i=e.toDOM(t.bottom);return new di(t.from,t.length,s,i-s,Array.isArray(t._content)?t._content.map(n=>zr(n,e)):t._content)}const ul=$e.define({combine:t=>t.join(" ")}),Ed=$e.define({combine:t=>t.indexOf(!0)>-1}),Od=tn.newName(),ov=tn.newName(),lv=tn.newName(),av={"&light":"."+ov,"&dark":"."+lv};function Pd(t,e,s){return new tn(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,n=>{if(n=="&")return t;if(!s||!s[n])throw new RangeError(`Unsupported selector: ${n}`);return s[n]}):t+" "+i}})}const b4=Pd("."+Od,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},av),x4={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},yu=Ae.ie&&Ae.ie_version<=11;class k4{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new iC,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(s=>{for(let i of s)this.queue.push(i);(Ae.ie&&Ae.ie_version<=11||Ae.ios&&e.composing)&&s.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&Ae.android&&e.constructor.EDIT_CONTEXT!==!1&&!(Ae.chrome&&Ae.chrome_version<126)&&(this.editContext=new _4(e),e.state.facet(Mi)&&(e.contentDOM.editContext=this.editContext.editContext)),yu&&(this.onCharData=s=>{this.queue.push({target:s.target,type:"characterData",oldValue:s.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var s;((s=this.view.docView)===null||s===void 0?void 0:s.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(s=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),s.length>0&&s[s.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(s=>{s.length>0&&s[s.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((s,i)=>s!=e[i]))){this.gapIntersection.disconnect();for(let s of e)this.gapIntersection.observe(s);this.gaps=e}}onSelectionChange(e){let s=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,n=this.selectionRange;if(i.state.facet(Mi)?i.root.activeElement!=this.dom:!Tl(this.dom,n))return;let r=n.anchorNode&&i.docView.nearest(n.anchorNode);if(r&&r.ignoreEvent(e)){s||(this.selectionChanged=!1);return}(Ae.ie&&Ae.ie_version<=11||Ae.android&&Ae.chrome)&&!i.state.selection.main.empty&&n.focusNode&&eo(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,s=bo(e.root);if(!s)return!1;let i=Ae.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&w4(this.view,s)||s;if(!i||this.selectionRange.eq(i))return!1;let n=Tl(this.dom,i);return n&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&rC(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),n&&(this.selectionChanged=!0),!0)}setSelectionRange(e,s){this.selectionRange.set(e.node,e.offset,s.node,s.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,s=null;for(let i=this.dom;i;)if(i.nodeType==1)!s&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:s||(s=this.scrollTargets.slice(0,e)),s&&s.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!s&&(s=this.scrollTargets.slice(0,e)),s){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=s)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,x4),yu&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),yu&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,s){var i;if(!this.delayedAndroidKey){let n=()=>{let r=this.delayedAndroidKey;r&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=r.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&r.force&&or(this.dom,r.key,r.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(n)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:s,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let s=-1,i=-1,n=!1;for(let r of e){let o=this.readMutation(r);o&&(o.typeOver&&(n=!0),s==-1?{from:s,to:i}=o:(s=Math.min(o.from,s),i=Math.max(o.to,i)))}return{from:s,to:i,typeOver:n}}readChange(){let{from:e,to:s,typeOver:i}=this.processRecords(),n=this.selectionChanged&&Tl(this.dom,this.selectionRange);if(e<0&&!n)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let r=new NC(this.view,e,s,i);return this.view.docView.domChanged={newSel:r.newSel?r.newSel.main:null},r}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let s=this.readChange();if(!s)return this.view.requestMeasure(),!1;let i=this.view.state,n=J0(this.view,s);return this.view.state==i&&(s.domChanged||s.newSel&&!s.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),n}readMutation(e){let s=this.view.docView.nearest(e.target);if(!s||s.ignoreMutation(e))return null;if(s.markDirty(e.type=="attributes"),e.type=="attributes"&&(s.flags|=4),e.type=="childList"){let i=cp(s,e.previousSibling||e.target.previousSibling,-1),n=cp(s,e.nextSibling||e.target.nextSibling,1);return{from:i?s.posAfter(i):s.posAtStart,to:n?s.posBefore(n):s.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:s.posAtStart,to:s.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Mi)!=e.state.facet(Mi)&&(e.view.contentDOM.editContext=e.state.facet(Mi)?this.editContext.editContext:null))}destroy(){var e,s,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(s=this.gapIntersection)===null||s===void 0||s.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function cp(t,e,s){for(;e;){let i=ut.get(e);if(i&&i.parent==t)return i;let n=e.parentNode;e=n!=t.dom?n:s>0?e.nextSibling:e.previousSibling}return null}function hp(t,e){let s=e.startContainer,i=e.startOffset,n=e.endContainer,r=e.endOffset,o=t.docView.domAtPos(t.state.selection.main.anchor);return eo(o.node,o.offset,n,r)&&([s,i,n,r]=[n,r,s,i]),{anchorNode:s,anchorOffset:i,focusNode:n,focusOffset:r}}function w4(t,e){if(e.getComposedRanges){let n=e.getComposedRanges(t.root)[0];if(n)return hp(t,n)}let s=null;function i(n){n.preventDefault(),n.stopImmediatePropagation(),s=n.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",i,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",i,!0),s?hp(t,s):null}class _4{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let s=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let n=e.state.selection.main,{anchor:r,head:o}=n,l=this.toEditorPos(i.updateRangeStart),a=this.toEditorPos(i.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:l,drifted:!1});let d=a-l>i.text.length;l==this.from&&r<this.from?l=r:a==this.to&&r>this.to&&(a=r);let u=Y0(e.state.sliceDoc(l,a),i.text,(d?n.from:n.to)-l,d?"end":null);if(!u){let c=le.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd));c.main.eq(n)||e.dispatch({selection:c,userEvent:"select"});return}let f={from:u.from+l,to:u.toA+l,insert:et.of(i.text.slice(u.from,u.toB).split(`
`))};if((Ae.mac||Ae.android)&&f.from==o-1&&/^\. ?$/.test(i.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(f={from:l,to:a,insert:et.of([i.text.replace("."," ")])}),this.pendingContextChange=f,!e.state.readOnly){let c=this.to-this.from+(f.to-f.from+f.insert.length);$c(e,f,le.single(this.toEditorPos(i.selectionStart,c),this.toEditorPos(i.selectionEnd,c)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),f.from<f.to&&!f.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(s.text.slice(Math.max(0,i.updateRangeStart-1),Math.min(s.text.length,i.updateRangeStart+1)))&&this.handlers.compositionend(i)},this.handlers.characterboundsupdate=i=>{let n=[],r=null;for(let o=this.toEditorPos(i.rangeStart),l=this.toEditorPos(i.rangeEnd);o<l;o++){let a=e.coordsForChar(o);r=a&&new DOMRect(a.left,a.top,a.right-a.left,a.bottom-a.top)||r||new DOMRect,n.push(r)}s.updateCharacterBounds(i.rangeStart,n)},this.handlers.textformatupdate=i=>{let n=[];for(let r of i.getTextFormats()){let o=r.underlineStyle,l=r.underlineThickness;if(!/none/i.test(o)&&!/none/i.test(l)){let a=this.toEditorPos(r.rangeStart),d=this.toEditorPos(r.rangeEnd);if(a<d){let u=`text-decoration: underline ${/^[a-z]/.test(o)?o+" ":o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${/thin/i.test(l)?1:2}px`;n.push(Ne.mark({attributes:{style:u}}).range(a,d))}}}e.dispatch({effects:N0.of(Ne.set(n))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:i}=this.composing;this.composing=null,i&&this.reset(e.state)}};for(let i in this.handlers)s.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let n=bo(i.root);n&&n.rangeCount&&this.editContext.updateSelectionBounds(n.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let s=0,i=!1,n=this.pendingContextChange;return e.changes.iterChanges((r,o,l,a,d)=>{if(i)return;let u=d.length-(o-r);if(n&&o>=n.to)if(n.from==r&&n.to==o&&n.insert.eq(d)){n=this.pendingContextChange=null,s+=u,this.to+=u;return}else n=null,this.revertPending(e.state);if(r+=s,o+=s,o<=this.from)this.from+=u,this.to+=u;else if(r<this.to){if(r<this.from||o>this.to||this.to-this.from+d.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(r),this.toContextPos(o),d.toString()),this.to+=u}s+=u}),n&&!i&&this.revertPending(e.state),!i}update(e){let s=this.pendingContextChange,i=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(i.from,i.to)&&e.transactions.some(n=>!n.isUserEvent("input.type")&&n.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||s)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:s}=e.selection.main;this.from=Math.max(0,s-1e4),this.to=Math.min(e.doc.length,s+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let s=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(s.from),this.toContextPos(s.from+s.insert.length),e.doc.sliceString(s.from,s.to))}setSelection(e){let{main:s}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,s.anchor))),n=this.toContextPos(s.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=n)&&this.editContext.updateSelection(i,n)}rangeIsValid(e){let{head:s}=e.selection.main;return!(this.from>0&&s-this.from<500||this.to<e.doc.length&&this.to-s<500||this.to-this.from>1e4*3)}toEditorPos(e,s=this.to-this.from){e=Math.min(e,s);let i=this.composing;return i&&i.drifted?i.editorBase+(e-i.contextBase):e+this.from}toContextPos(e){let s=this.composing;return s&&s.drifted?s.contextBase+(e-s.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class Te{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var s;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(n=>n.forEach(r=>i(r,this)))||(n=>this.update(n)),this.dispatch=this.dispatch.bind(this),this._root=e.root||nC(e.parent)||document,this.viewState=new up(e.state||Qe.create(e)),e.scrollTo&&e.scrollTo.is(il)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Kn).map(n=>new pu(n));for(let n of this.plugins)n.update(this);this.observer=new k4(this),this.inputState=new HC(this),this.inputState.ensureHandlers(this.plugins),this.docView=new Hf(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((s=document.fonts)===null||s===void 0)&&s.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let s=e.length==1&&e[0]instanceof jt?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(s,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let s=!1,i=!1,n,r=this.state;for(let c of e){if(c.startState!=r)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");r=c.state}if(this.destroyed){this.viewState.state=r;return}let o=this.hasFocus,l=0,a=null;e.some(c=>c.annotation(sv))?(this.inputState.notifiedFocused=o,l=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,a=iv(r,o),a||(l=1));let d=this.observer.delayedAndroidKey,u=null;if(d?(this.observer.clearDelayedAndroidKey(),u=this.observer.readChange(),(u&&!this.state.doc.eq(r.doc)||!this.state.selection.eq(r.selection))&&(u=null)):this.observer.clear(),r.facet(Qe.phrases)!=this.state.facet(Qe.phrases))return this.setState(r);n=Zl.create(this,r,e),n.flags|=l;let f=this.viewState.scrollTarget;try{this.updateState=2;for(let c of e){if(f&&(f=f.map(c.changes)),c.scrollIntoView){let{main:p}=c.state.selection;f=new lr(p.empty?p:le.cursor(p.head,p.head>p.anchor?-1:1))}for(let p of c.effects)p.is(il)&&(f=p.value.clip(this.state))}this.viewState.update(n,f),this.bidiCache=ta.update(this.bidiCache,n.changes),n.empty||(this.updatePlugins(n),this.inputState.update(n)),s=this.docView.update(n),this.state.facet(Nr)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(s,e.some(c=>c.isUserEvent("select.pointer")))}finally{this.updateState=0}if(n.startState.facet(ul)!=n.state.facet(ul)&&(this.viewState.mustMeasureContent=!0),(s||i||f||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),s&&this.docViewUpdate(),!n.empty)for(let c of this.state.facet(Md))try{c(n)}catch(p){ys(this.state,p,"update listener")}(a||u)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),u&&!J0(this,u)&&d.force&&or(this.contentDOM,d.key,d.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let s=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new up(e),this.plugins=e.facet(Kn).map(i=>new pu(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new Hf(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}s&&this.focus(),this.requestMeasure()}updatePlugins(e){let s=e.startState.facet(Kn),i=e.state.facet(Kn);if(s!=i){let n=[];for(let r of i){let o=s.indexOf(r);if(o<0)n.push(new pu(r));else{let l=this.plugins[o];l.mustUpdate=e,n.push(l)}}for(let r of this.plugins)r.mustUpdate!=e&&r.destroy(this);this.plugins=n,this.pluginMap.clear()}else for(let n of this.plugins)n.mustUpdate=e;for(let n=0;n<this.plugins.length;n++)this.plugins[n].update(this);s!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let s=e.value;if(s&&s.docViewUpdate)try{s.docViewUpdate(this)}catch(i){ys(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let s=null,i=this.scrollDOM,n=i.scrollTop*this.scaleY,{scrollAnchorPos:r,scrollAnchorHeight:o}=this.viewState;Math.abs(n-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let l=0;;l++){if(o<0)if(g0(i))r=-1,o=this.viewState.heightMap.height;else{let p=this.viewState.scrollAnchorAt(n);r=p.from,o=p.top}this.updateState=1;let a=this.viewState.measure(this);if(!a&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let d=[];a&4||([this.measureRequests,d]=[d,this.measureRequests]);let u=d.map(p=>{try{return p.read(this)}catch(k){return ys(this.state,k),fp}}),f=Zl.create(this,this.state,[]),c=!1;f.flags|=a,s?s.flags|=a:s=f,this.updateState=2,f.empty||(this.updatePlugins(f),this.inputState.update(f),this.updateAttrs(),c=this.docView.update(f),c&&this.docViewUpdate());for(let p=0;p<d.length;p++)if(u[p]!=fp)try{let k=d[p];k.write&&k.write(u[p],this)}catch(k){ys(this.state,k)}if(c&&this.docView.updateSelection(!0),!f.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let k=(r<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(r).top)-o;if(k>1||k<-1){n=n+k,i.scrollTop=n/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(s&&!s.empty)for(let l of this.state.facet(Md))l(s)}get themeClasses(){return Od+" "+(this.state.facet(Ed)?lv:ov)+" "+this.state.facet(ul)}updateAttrs(){let e=pp(this,U0,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),s={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(Mi)?"true":"false",class:"cm-content",style:`${Ae.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(s["aria-readonly"]="true"),pp(this,Dc,s);let i=this.observer.ignore(()=>{let n=_d(this.contentDOM,this.contentAttrs,s),r=_d(this.dom,this.editorAttrs,e);return n||r});return this.editorAttrs=e,this.contentAttrs=s,i}showAnnouncements(e){let s=!0;for(let i of e)for(let n of i.effects)if(n.is(Te.announce)){s&&(this.announceDOM.textContent=""),s=!1;let r=this.announceDOM.appendChild(document.createElement("div"));r.textContent=n.value}}mountStyles(){this.styleModules=this.state.facet(Nr);let e=this.state.facet(Te.cspNonce);tn.mount(this.root,this.styleModules.concat(b4).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let s=0;s<this.measureRequests.length;s++)if(this.measureRequests[s].key===e.key){this.measureRequests[s]=e;return}}this.measureRequests.push(e)}}plugin(e){let s=this.pluginMap.get(e);return(s===void 0||s&&s.plugin!=e)&&this.pluginMap.set(e,s=this.plugins.find(i=>i.plugin==e)||null),s&&s.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,s,i){return gu(this,e,Jf(this,e,s,i))}moveByGroup(e,s){return gu(this,e,Jf(this,e,s,i=>jC(this,e.head,i)))}visualLineSide(e,s){let i=this.bidiSpans(e),n=this.textDirectionAt(e.from),r=i[s?i.length-1:0];return le.cursor(r.side(s,n)+e.from,r.forward(!s,n)?1:-1)}moveToLineBoundary(e,s,i=!0){return PC(this,e,s,i)}moveVertically(e,s,i){return gu(this,e,RC(this,e,s,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,s=0){return this.docView.posFromDOM(e,s)}posAtCoords(e,s=!0){return this.readMeasured(),q0(this,e,s)}coordsAtPos(e,s=1){this.readMeasured();let i=this.docView.coordsAt(e,s);if(!i||i.left==i.right)return i;let n=this.state.doc.lineAt(e),r=this.bidiSpans(n),o=r[Gi.find(r,e-n.from,-1,s)];return ja(i,o.dir==gt.LTR==s>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(L0)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>S4)return D0(e.length);let s=this.textDirectionAt(e.from),i;for(let r of this.bidiCache)if(r.from==e.from&&r.dir==s&&(r.fresh||M0(r.isolates,i=Ff(this,e))))return r.order;i||(i=Ff(this,e));let n=yC(e.text,s,i);return this.bidiCache.push(new ta(e.from,e.to,s,i,!0,n)),n}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Ae.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{p0(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,s={}){return il.of(new lr(typeof e=="number"?le.cursor(e):e,s.y,s.x,s.yMargin,s.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:s}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return il.of(new lr(le.cursor(i.from),"start","start",i.top-e,s,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return $t.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return $t.define(()=>({}),{eventObservers:e})}static theme(e,s){let i=tn.newName(),n=[ul.of(i),Nr.of(Pd(`.${i}`,e))];return s&&s.dark&&n.push(Ed.of(!0)),n}static baseTheme(e){return In.lowest(Nr.of(Pd("."+Od,e,av)))}static findFromDOM(e){var s;let i=e.querySelector(".cm-content"),n=i&&ut.get(i)||ut.get(e);return((s=n?.rootView)===null||s===void 0?void 0:s.view)||null}}Te.styleModule=Nr;Te.inputHandler=j0;Te.clipboardInputFilter=Vc;Te.clipboardOutputFilter=Mc;Te.scrollHandler=I0;Te.focusChangeEffect=R0;Te.perLineTextDirection=L0;Te.exceptionSink=P0;Te.updateListener=Md;Te.editable=Mi;Te.mouseSelectionStyle=O0;Te.dragMovesSelection=E0;Te.clickAddsSelectionRange=$0;Te.decorations=ko;Te.outerDecorations=z0;Te.atomicRanges=Io;Te.bidiIsolatedRanges=F0;Te.scrollMargins=H0;Te.darkTheme=Ed;Te.cspNonce=$e.define({combine:t=>t.length?t[0]:""});Te.contentAttributes=Dc;Te.editorAttributes=U0;Te.lineWrapping=Te.contentAttributes.of({class:"cm-lineWrapping"});Te.announce=He.define();const S4=4096,fp={};class ta{constructor(e,s,i,n,r,o){this.from=e,this.to=s,this.dir=i,this.isolates=n,this.fresh=r,this.order=o}static update(e,s){if(s.empty&&!e.some(r=>r.fresh))return e;let i=[],n=e.length?e[e.length-1].dir:gt.LTR;for(let r=Math.max(0,e.length-10);r<e.length;r++){let o=e[r];o.dir==n&&!s.touchesRange(o.from,o.to)&&i.push(new ta(s.mapPos(o.from,1),s.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return i}}function pp(t,e,s){for(let i=t.state.facet(e),n=i.length-1;n>=0;n--){let r=i[n],o=typeof r=="function"?r(t):r;o&&wd(o,s)}return s}const C4=Ae.mac?"mac":Ae.windows?"win":Ae.linux?"linux":"key";function A4(t,e){const s=t.split(/-(?!$)/);let i=s[s.length-1];i=="Space"&&(i=" ");let n,r,o,l;for(let a=0;a<s.length-1;++a){const d=s[a];if(/^(cmd|meta|m)$/i.test(d))l=!0;else if(/^a(lt)?$/i.test(d))n=!0;else if(/^(c|ctrl|control)$/i.test(d))r=!0;else if(/^s(hift)?$/i.test(d))o=!0;else if(/^mod$/i.test(d))e=="mac"?l=!0:r=!0;else throw new Error("Unrecognized modifier name: "+d)}return n&&(i="Alt-"+i),r&&(i="Ctrl-"+i),l&&(i="Meta-"+i),o&&(i="Shift-"+i),i}function dl(t,e,s){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),s!==!1&&e.shiftKey&&(t="Shift-"+t),t}const V4=In.default(Te.domEventHandlers({keydown(t,e){return dv(uv(e.state),t,e,"editor")}})),Pc=$e.define({enables:V4}),mp=new WeakMap;function uv(t){let e=t.facet(Pc),s=mp.get(e);return s||mp.set(e,s=T4(e.reduce((i,n)=>i.concat(n),[]))),s}function M4(t,e,s){return dv(uv(t.state),e,t,s)}let Wi=null;const D4=4e3;function T4(t,e=C4){let s=Object.create(null),i=Object.create(null),n=(o,l)=>{let a=i[o];if(a==null)i[o]=l;else if(a!=l)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},r=(o,l,a,d,u)=>{var f,c;let p=s[o]||(s[o]=Object.create(null)),k=l.split(/ (?!$)/).map(V=>A4(V,e));for(let V=1;V<k.length;V++){let R=k.slice(0,V).join(" ");n(R,!0),p[R]||(p[R]={preventDefault:!0,stopPropagation:!1,run:[P=>{let z=Wi={view:P,prefix:R,scope:o};return setTimeout(()=>{Wi==z&&(Wi=null)},D4),!0}]})}let C=k.join(" ");n(C,!1);let A=p[C]||(p[C]={preventDefault:!1,stopPropagation:!1,run:((c=(f=p._any)===null||f===void 0?void 0:f.run)===null||c===void 0?void 0:c.slice())||[]});a&&A.run.push(a),d&&(A.preventDefault=!0),u&&(A.stopPropagation=!0)};for(let o of t){let l=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let d of l){let u=s[d]||(s[d]=Object.create(null));u._any||(u._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:f}=o;for(let c in u)u[c].run.push(p=>f(p,jd))}let a=o[e]||o.key;if(a)for(let d of l)r(d,a,o.run,o.preventDefault,o.stopPropagation),o.shift&&r(d,"Shift-"+a,o.shift,o.preventDefault,o.stopPropagation)}return s}let jd=null;function dv(t,e,s,i){jd=e;let n=QS(e),r=gs(n,0),o=ui(r)==n.length&&n!=" ",l="",a=!1,d=!1,u=!1;Wi&&Wi.view==s&&Wi.scope==i&&(l=Wi.prefix+" ",Q0.indexOf(e.keyCode)<0&&(d=!0,Wi=null));let f=new Set,c=A=>{if(A){for(let V of A.run)if(!f.has(V)&&(f.add(V),V(s)))return A.stopPropagation&&(u=!0),!0;A.preventDefault&&(A.stopPropagation&&(u=!0),d=!0)}return!1},p=t[i],k,C;return p&&(c(p[l+dl(n,e,!o)])?a=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Ae.windows&&e.ctrlKey&&e.altKey)&&!(Ae.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(k=sn[e.keyCode])&&k!=n?(c(p[l+dl(k,e,!0)])||e.shiftKey&&(C=yo[e.keyCode])!=n&&C!=k&&c(p[l+dl(C,e,!1)]))&&(a=!0):o&&e.shiftKey&&c(p[l+dl(n,e,!0)])&&(a=!0),!a&&c(p._any)&&(a=!0)),d&&(a=!0),a&&u&&e.stopPropagation(),jd=null,a}class No{constructor(e,s,i,n,r){this.className=e,this.left=s,this.top=i,this.width=n,this.height=r}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,s){return s.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,s,i){if(i.empty){let n=e.coordsAtPos(i.head,i.assoc||1);if(!n)return[];let r=cv(e);return[new No(s,n.left-r.left,n.top-r.top,null,n.bottom-n.top)]}else return $4(e,s,i)}}function cv(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==gt.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function gp(t,e,s,i){let n=t.coordsAtPos(e,s*2);if(!n)return i;let r=t.dom.getBoundingClientRect(),o=(n.top+n.bottom)/2,l=t.posAtCoords({x:r.left+1,y:o}),a=t.posAtCoords({x:r.right-1,y:o});return l==null||a==null?i:{from:Math.max(i.from,Math.min(l,a)),to:Math.min(i.to,Math.max(l,a))}}function $4(t,e,s){if(s.to<=t.viewport.from||s.from>=t.viewport.to)return[];let i=Math.max(s.from,t.viewport.from),n=Math.min(s.to,t.viewport.to),r=t.textDirection==gt.LTR,o=t.contentDOM,l=o.getBoundingClientRect(),a=cv(t),d=o.querySelector(".cm-line"),u=d&&window.getComputedStyle(d),f=l.left+(u?parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)):0),c=l.right-(u?parseInt(u.paddingRight):0),p=Td(t,i,1),k=Td(t,n,-1),C=p.type==hs.Text?p:null,A=k.type==hs.Text?k:null;if(C&&(t.lineWrapping||p.widgetLineBreaks)&&(C=gp(t,i,1,C)),A&&(t.lineWrapping||k.widgetLineBreaks)&&(A=gp(t,n,-1,A)),C&&A&&C.from==A.from&&C.to==A.to)return R(P(s.from,s.to,C));{let H=C?P(s.from,null,C):z(p,!1),B=A?P(null,s.to,A):z(k,!0),M=[];return(C||p).to<(A||k).from-(C&&A?1:0)||p.widgetLineBreaks>1&&H.bottom+t.defaultLineHeight/2<B.top?M.push(V(f,H.bottom,c,B.top)):H.bottom<B.top&&t.elementAtHeight((H.bottom+B.top)/2).type==hs.Text&&(H.bottom=B.top=(H.bottom+B.top)/2),R(H).concat(M).concat(R(B))}function V(H,B,M,J){return new No(e,H-a.left,B-a.top,M-H,J-B)}function R({top:H,bottom:B,horizontal:M}){let J=[];for(let X=0;X<M.length;X+=2)J.push(V(M[X],H,M[X+1],B));return J}function P(H,B,M){let J=1e9,X=-1e9,he=[];function ie(re,ke,K,T,b){let m=t.coordsAtPos(re,re==M.to?-2:2),w=t.coordsAtPos(K,K==M.from?2:-2);!m||!w||(J=Math.min(m.top,w.top,J),X=Math.max(m.bottom,w.bottom,X),b==gt.LTR?he.push(r&&ke?f:m.left,r&&T?c:w.right):he.push(!r&&T?f:w.left,!r&&ke?c:m.right))}let N=H??M.from,ae=B??M.to;for(let re of t.visibleRanges)if(re.to>N&&re.from<ae)for(let ke=Math.max(re.from,N),K=Math.min(re.to,ae);;){let T=t.state.doc.lineAt(ke);for(let b of t.bidiSpans(T)){let m=b.from+T.from,w=b.to+T.from;if(m>=K)break;w>ke&&ie(Math.max(m,ke),H==null&&m<=N,Math.min(w,K),B==null&&w>=ae,b.dir)}if(ke=T.to+1,ke>=K)break}return he.length==0&&ie(N,H==null,ae,B==null,t.textDirection),{top:J,bottom:X,horizontal:he}}function z(H,B){let M=l.top+(B?H.top:H.bottom);return{top:M,bottom:M,horizontal:[]}}}function E4(t,e){return t.constructor==e.constructor&&t.eq(e)}class O4{constructor(e,s){this.view=e,this.layer=s,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),s.above&&this.dom.classList.add("cm-layer-above"),s.class&&this.dom.classList.add(s.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),s.mount&&s.mount(this.dom,e)}update(e){e.startState.facet(Ol)!=e.state.facet(Ol)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let s=0,i=e.facet(Ol);for(;s<i.length&&i[s]!=this.layer;)s++;this.dom.style.zIndex=String((this.layer.above?150:-1)-s)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:s}=this.view;(e!=this.scaleX||s!=this.scaleY)&&(this.scaleX=e,this.scaleY=s,this.dom.style.transform=`scale(${1/e}, ${1/s})`)}draw(e){if(e.length!=this.drawn.length||e.some((s,i)=>!E4(s,this.drawn[i]))){let s=this.dom.firstChild,i=0;for(let n of e)n.update&&s&&n.constructor&&this.drawn[i].constructor&&n.update(s,this.drawn[i])?(s=s.nextSibling,i++):this.dom.insertBefore(n.draw(),s);for(;s;){let n=s.nextSibling;s.remove(),s=n}this.drawn=e,Ae.safari&&Ae.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Ol=$e.define();function hv(t){return[$t.define(e=>new O4(e,t)),Ol.of(t)]}const wo=$e.define({combine(t){return gi(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,s)=>Math.min(e,s),drawRangeCursor:(e,s)=>e||s})}});function P4(t={}){return[wo.of(t),j4,R4,L4,B0.of(!0)]}function fv(t){return t.startState.facet(wo)!=t.state.facet(wo)}const j4=hv({above:!0,markers(t){let{state:e}=t,s=e.facet(wo),i=[];for(let n of e.selection.ranges){let r=n==e.selection.main;if(n.empty||s.drawRangeCursor){let o=r?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",l=n.empty?n:le.cursor(n.head,n.head>n.anchor?-1:1);for(let a of No.forRange(t,o,l))i.push(a)}}return i},update(t,e){t.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let s=fv(t);return s&&vp(t.state,e),t.docChanged||t.selectionSet||s},mount(t,e){vp(e.state,t)},class:"cm-cursorLayer"});function vp(t,e){e.style.animationDuration=t.facet(wo).cursorBlinkRate+"ms"}const R4=hv({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:No.forRange(t,"cm-selectionBackground",e)).reduce((e,s)=>e.concat(s))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||fv(t)},class:"cm-selectionLayer"}),L4=In.highest(Te.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),pv=He.define({map(t,e){return t==null?null:e.mapPos(t)}}),Fr=Wt.define({create(){return null},update(t,e){return t!=null&&(t=e.changes.mapPos(t)),e.effects.reduce((s,i)=>i.is(pv)?i.value:s,t)}}),B4=$t.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let s=t.state.field(Fr);s==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(Fr)!=s||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:t}=this,e=t.state.field(Fr),s=e!=null&&t.coordsAtPos(e);if(!s)return null;let i=t.scrollDOM.getBoundingClientRect();return{left:s.left-i.left+t.scrollDOM.scrollLeft*t.scaleX,top:s.top-i.top+t.scrollDOM.scrollTop*t.scaleY,height:s.bottom-s.top}}drawCursor(t){if(this.cursor){let{scaleX:e,scaleY:s}=this.view;t?(this.cursor.style.left=t.left/e+"px",this.cursor.style.top=t.top/s+"px",this.cursor.style.height=t.height/s+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(Fr)!=t&&this.view.dispatch({effects:pv.of(t)})}},{eventObservers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){(t.target==this.view.contentDOM||!this.view.contentDOM.contains(t.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function I4(){return[Fr,B4]}function yp(t,e,s,i,n){e.lastIndex=0;for(let r=t.iterRange(s,i),o=s,l;!r.next().done;o+=r.value.length)if(!r.lineBreak)for(;l=e.exec(r.value);)n(o+l.index,l)}function N4(t,e){let s=t.visibleRanges;if(s.length==1&&s[0].from==t.viewport.from&&s[0].to==t.viewport.to)return s;let i=[];for(let{from:n,to:r}of s)n=Math.max(t.state.doc.lineAt(n).from,n-e),r=Math.min(t.state.doc.lineAt(r).to,r+e),i.length&&i[i.length-1].to>=n?i[i.length-1].to=r:i.push({from:n,to:r});return i}class U4{constructor(e){const{regexp:s,decoration:i,decorate:n,boundary:r,maxLength:o=1e3}=e;if(!s.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=s,n)this.addMatch=(l,a,d,u)=>n(u,d,d+l[0].length,l,a);else if(typeof i=="function")this.addMatch=(l,a,d,u)=>{let f=i(l,a,d);f&&u(d,d+l[0].length,f)};else if(i)this.addMatch=(l,a,d,u)=>u(d,d+l[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=r,this.maxLength=o}createDeco(e){let s=new Oi,i=s.add.bind(s);for(let{from:n,to:r}of N4(e,this.maxLength))yp(e.state.doc,this.regexp,n,r,(o,l)=>this.addMatch(l,e,o,i));return s.finish()}updateDeco(e,s){let i=1e9,n=-1;return e.docChanged&&e.changes.iterChanges((r,o,l,a)=>{a>=e.view.viewport.from&&l<=e.view.viewport.to&&(i=Math.min(l,i),n=Math.max(a,n))}),e.viewportMoved||n-i>1e3?this.createDeco(e.view):n>-1?this.updateRange(e.view,s.map(e.changes),i,n):s}updateRange(e,s,i,n){for(let r of e.visibleRanges){let o=Math.max(r.from,i),l=Math.min(r.to,n);if(l>=o){let a=e.state.doc.lineAt(o),d=a.to<l?e.state.doc.lineAt(l):a,u=Math.max(r.from,a.from),f=Math.min(r.to,d.to);if(this.boundary){for(;o>a.from;o--)if(this.boundary.test(a.text[o-1-a.from])){u=o;break}for(;l<d.to;l++)if(this.boundary.test(d.text[l-d.from])){f=l;break}}let c=[],p,k=(C,A,V)=>c.push(V.range(C,A));if(a==d)for(this.regexp.lastIndex=u-a.from;(p=this.regexp.exec(a.text))&&p.index<f-a.from;)this.addMatch(p,e,p.index+a.from,k);else yp(e.state.doc,this.regexp,u,f,(C,A)=>this.addMatch(A,e,C,k));s=s.update({filterFrom:u,filterTo:f,filter:(C,A)=>C<u||A>f,add:c})}}return s}}const Rd=/x/.unicode!=null?"gu":"g",z4=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,Rd),F4={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let bu=null;function H4(){var t;if(bu==null&&typeof document<"u"&&document.body){let e=document.body.style;bu=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return bu||!1}const Pl=$e.define({combine(t){let e=gi(t,{render:null,specialChars:z4,addSpecialChars:null});return(e.replaceTabs=!H4())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,Rd)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,Rd)),e}});function W4(t={}){return[Pl.of(t),q4()]}let bp=null;function q4(){return bp||(bp=$t.fromClass(class{constructor(t){this.view=t,this.decorations=Ne.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(Pl)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new U4({regexp:t.specialChars,decoration:(e,s,i)=>{let{doc:n}=s.state,r=gs(e[0],0);if(r==9){let o=n.lineAt(i),l=s.state.tabSize,a=Ar(o.text,l,i-o.from);return Ne.replace({widget:new Y4((l-a%l)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[r]||(this.decorationCache[r]=Ne.replace({widget:new J4(t,r)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(Pl);t.startState.facet(Pl)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const K4="";function G4(t){return t>=32?K4:t==10?"":String.fromCharCode(9216+t)}class J4 extends ln{constructor(e,s){super(),this.options=e,this.code=s}eq(e){return e.code==this.code}toDOM(e){let s=G4(this.code),i=e.state.phrase("Control character")+" "+(F4[this.code]||"0x"+this.code.toString(16)),n=this.options.render&&this.options.render(this.code,i,s);if(n)return n;let r=document.createElement("span");return r.textContent=s,r.title=i,r.setAttribute("aria-label",i),r.className="cm-specialChar",r}ignoreEvent(){return!1}}class Y4 extends ln{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function X4(){return Z4}const Q4=Ne.line({class:"cm-activeLine"}),Z4=$t.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,s=[];for(let i of t.state.selection.ranges){let n=t.lineBlockAt(i.head);n.from>e&&(s.push(Q4.range(n.from)),e=n.from)}return Ne.set(s)}},{decorations:t=>t.decorations}),Ld=2e3;function e5(t,e,s){let i=Math.min(e.line,s.line),n=Math.max(e.line,s.line),r=[];if(e.off>Ld||s.off>Ld||e.col<0||s.col<0){let o=Math.min(e.off,s.off),l=Math.max(e.off,s.off);for(let a=i;a<=n;a++){let d=t.doc.line(a);d.length<=l&&r.push(le.range(d.from+o,d.to+l))}}else{let o=Math.min(e.col,s.col),l=Math.max(e.col,s.col);for(let a=i;a<=n;a++){let d=t.doc.line(a),u=pd(d.text,o,t.tabSize,!0);if(u<0)r.push(le.cursor(d.to));else{let f=pd(d.text,l,t.tabSize);r.push(le.range(d.from+u,d.from+f))}}}return r}function t5(t,e){let s=t.coordsAtPos(t.viewport.from);return s?Math.round(Math.abs((s.left-e)/t.defaultCharacterWidth)):-1}function xp(t,e){let s=t.posAtCoords({x:e.clientX,y:e.clientY},!1),i=t.state.doc.lineAt(s),n=s-i.from,r=n>Ld?-1:n==i.length?t5(t,e.clientX):Ar(i.text,t.state.tabSize,s-i.from);return{line:i.number,col:r,off:n}}function s5(t,e){let s=xp(t,e),i=t.state.selection;return s?{update(n){if(n.docChanged){let r=n.changes.mapPos(n.startState.doc.line(s.line).from),o=n.state.doc.lineAt(r);s={line:o.number,col:s.col,off:Math.min(s.off,o.length)},i=i.map(n.changes)}},get(n,r,o){let l=xp(t,n);if(!l)return i;let a=e5(t.state,s,l);return a.length?o?le.create(a.concat(i.ranges)):le.create(a):i}}:null}function i5(t){let e=(s=>s.altKey&&s.button==0);return Te.mouseSelectionStyle.of((s,i)=>e(i)?s5(s,i):null)}const n5={Alt:[18,t=>!!t.altKey],Control:[17,t=>!!t.ctrlKey],Shift:[16,t=>!!t.shiftKey],Meta:[91,t=>!!t.metaKey]},r5={style:"cursor: crosshair"};function o5(t={}){let[e,s]=n5[t.key||"Alt"],i=$t.fromClass(class{constructor(n){this.view=n,this.isDown=!1}set(n){this.isDown!=n&&(this.isDown=n,this.view.update([]))}},{eventObservers:{keydown(n){this.set(n.keyCode==e||s(n))},keyup(n){(n.keyCode==e||!s(n))&&this.set(!1)},mousemove(n){this.set(s(n))}}});return[i,Te.contentAttributes.of(n=>{var r;return!((r=n.plugin(i))===null||r===void 0)&&r.isDown?r5:null})]}const jr="-10000px";class mv{constructor(e,s,i,n){this.facet=s,this.createTooltipView=i,this.removeTooltipView=n,this.input=e.state.facet(s),this.tooltips=this.input.filter(o=>o);let r=null;this.tooltipViews=this.tooltips.map(o=>r=i(o,r))}update(e,s){var i;let n=e.state.facet(this.facet),r=n.filter(a=>a);if(n===this.input){for(let a of this.tooltipViews)a.update&&a.update(e);return!1}let o=[],l=s?[]:null;for(let a=0;a<r.length;a++){let d=r[a],u=-1;if(d){for(let f=0;f<this.tooltips.length;f++){let c=this.tooltips[f];c&&c.create==d.create&&(u=f)}if(u<0)o[a]=this.createTooltipView(d,a?o[a-1]:null),l&&(l[a]=!!d.above);else{let f=o[a]=this.tooltipViews[u];l&&(l[a]=s[u]),f.update&&f.update(e)}}}for(let a of this.tooltipViews)o.indexOf(a)<0&&(this.removeTooltipView(a),(i=a.destroy)===null||i===void 0||i.call(a));return s&&(l.forEach((a,d)=>s[d]=a),s.length=l.length),this.input=n,this.tooltips=r,this.tooltipViews=o,!0}}function l5(t){let e=t.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const xu=$e.define({combine:t=>{var e,s,i;return{position:Ae.ios?"absolute":((e=t.find(n=>n.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((s=t.find(n=>n.parent))===null||s===void 0?void 0:s.parent)||null,tooltipSpace:((i=t.find(n=>n.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||l5}}}),kp=new WeakMap,jc=$t.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(xu);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new mv(t,Rc,(s,i)=>this.createTooltip(s,i),s=>{this.resizeObserver&&this.resizeObserver.unobserve(s.dom),s.dom.remove()}),this.above=this.manager.tooltips.map(s=>!!s.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(s=>{Date.now()>this.lastTransaction-50&&s.length>0&&s[s.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let s=e||t.geometryChanged,i=t.state.facet(xu);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let n of this.manager.tooltipViews)n.dom.style.position=this.position;s=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let n of this.manager.tooltipViews)this.container.appendChild(n.dom);s=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);s&&this.maybeMeasure()}createTooltip(t,e){let s=t.create(this.view),i=e?e.dom:null;if(s.dom.classList.add("cm-tooltip"),t.arrow&&!s.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let n=document.createElement("div");n.className="cm-tooltip-arrow",s.dom.appendChild(n)}return s.dom.style.position=this.position,s.dom.style.top=jr,s.dom.style.left="0px",this.container.insertBefore(s.dom,i),s.mount&&s.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(s.dom),s}destroy(){var t,e,s;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(t=i.destroy)===null||t===void 0||t.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(s=this.intersectionObserver)===null||s===void 0||s.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=1,e=1,s=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:r}=this.manager.tooltipViews[0];if(Ae.gecko)s=r.offsetParent!=this.container.ownerDocument.body;else if(r.style.top==jr&&r.style.left=="0px"){let o=r.getBoundingClientRect();s=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}}if(s||this.position=="absolute")if(this.parent){let r=this.parent.getBoundingClientRect();r.width&&r.height&&(t=r.width/this.parent.offsetWidth,e=r.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:e}=this.view.viewState);let i=this.view.scrollDOM.getBoundingClientRect(),n=Tc(this.view);return{visible:{left:i.left+n.left,top:i.top+n.top,right:i.right-n.right,bottom:i.bottom-n.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((r,o)=>{let l=this.manager.tooltipViews[o];return l.getCoords?l.getCoords(r.pos):this.view.coordsAtPos(r.pos)}),size:this.manager.tooltipViews.map(({dom:r})=>r.getBoundingClientRect()),space:this.view.state.facet(xu).tooltipSpace(this.view),scaleX:t,scaleY:e,makeAbsolute:s}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let l of this.manager.tooltipViews)l.dom.style.position="absolute"}let{visible:s,space:i,scaleX:n,scaleY:r}=t,o=[];for(let l=0;l<this.manager.tooltips.length;l++){let a=this.manager.tooltips[l],d=this.manager.tooltipViews[l],{dom:u}=d,f=t.pos[l],c=t.size[l];if(!f||a.clip!==!1&&(f.bottom<=Math.max(s.top,i.top)||f.top>=Math.min(s.bottom,i.bottom)||f.right<Math.max(s.left,i.left)-.1||f.left>Math.min(s.right,i.right)+.1)){u.style.top=jr;continue}let p=a.arrow?d.dom.querySelector(".cm-tooltip-arrow"):null,k=p?7:0,C=c.right-c.left,A=(e=kp.get(d))!==null&&e!==void 0?e:c.bottom-c.top,V=d.offset||u5,R=this.view.textDirection==gt.LTR,P=c.width>i.right-i.left?R?i.left:i.right-c.width:R?Math.max(i.left,Math.min(f.left-(p?14:0)+V.x,i.right-C)):Math.min(Math.max(i.left,f.left-C+(p?14:0)-V.x),i.right-C),z=this.above[l];!a.strictSide&&(z?f.top-A-k-V.y<i.top:f.bottom+A+k+V.y>i.bottom)&&z==i.bottom-f.bottom>f.top-i.top&&(z=this.above[l]=!z);let H=(z?f.top-i.top:i.bottom-f.bottom)-k;if(H<A&&d.resize!==!1){if(H<this.view.defaultLineHeight){u.style.top=jr;continue}kp.set(d,A),u.style.height=(A=H)/r+"px"}else u.style.height&&(u.style.height="");let B=z?f.top-A-k-V.y:f.bottom+k+V.y,M=P+C;if(d.overlap!==!0)for(let J of o)J.left<M&&J.right>P&&J.top<B+A&&J.bottom>B&&(B=z?J.top-A-2-k:J.bottom+k+2);if(this.position=="absolute"?(u.style.top=(B-t.parent.top)/r+"px",wp(u,(P-t.parent.left)/n)):(u.style.top=B/r+"px",wp(u,P/n)),p){let J=f.left+(R?V.x:-V.x)-(P+14-7);p.style.left=J/n+"px"}d.overlap!==!0&&o.push({left:P,top:B,right:M,bottom:B+A}),u.classList.toggle("cm-tooltip-above",z),u.classList.toggle("cm-tooltip-below",!z),d.positioned&&d.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=jr}},{eventObservers:{scroll(){this.maybeMeasure()}}});function wp(t,e){let s=parseInt(t.style.left,10);(isNaN(s)||Math.abs(e-s)>1)&&(t.style.left=e+"px")}const a5=Te.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),u5={x:0,y:0},Rc=$e.define({enables:[jc,a5]}),sa=$e.define({combine:t=>t.reduce((e,s)=>e.concat(s),[])});class La{static create(e){return new La(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new mv(e,sa,(s,i)=>this.createHostedView(s,i),s=>s.dom.remove())}createHostedView(e,s){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,s?s.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let s of this.manager.tooltipViews)s.mount&&s.mount(e);this.mounted=!0}positioned(e){for(let s of this.manager.tooltipViews)s.positioned&&s.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let s of this.manager.tooltipViews)(e=s.destroy)===null||e===void 0||e.call(s)}passProp(e){let s;for(let i of this.manager.tooltipViews){let n=i[e];if(n!==void 0){if(s===void 0)s=n;else if(s!==n)return}}return s}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const d5=Rc.compute([sa],t=>{let e=t.facet(sa);return e.length===0?null:{pos:Math.min(...e.map(s=>s.pos)),end:Math.max(...e.map(s=>{var i;return(i=s.end)!==null&&i!==void 0?i:s.pos})),create:La.create,above:e[0].above,arrow:e.some(s=>s.arrow)}});class c5{constructor(e,s,i,n,r){this.view=e,this.source=s,this.field=i,this.setHover=n,this.hoverTime=r,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:s}=this,i=e.docView.nearest(s.target);if(!i)return;let n,r=1;if(i instanceof Ki)n=i.posAtStart;else{if(n=e.posAtCoords(s),n==null)return;let l=e.coordsAtPos(n);if(!l||s.y<l.top||s.y>l.bottom||s.x<l.left-e.defaultCharacterWidth||s.x>l.right+e.defaultCharacterWidth)return;let a=e.bidiSpans(e.state.doc.lineAt(n)).find(u=>u.from<=n&&u.to>=n),d=a&&a.dir==gt.RTL?-1:1;r=s.x<l.left?-d:d}let o=this.source(e,n,r);if(o?.then){let l=this.pending={pos:n};o.then(a=>{this.pending==l&&(this.pending=null,a&&!(Array.isArray(a)&&!a.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(a)?a:[a])}))},a=>ys(e.state,a,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(jc),s=e?e.manager.tooltips.findIndex(i=>i.create==La.create):-1;return s>-1?e.manager.tooltipViews[s]:null}mousemove(e){var s,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:n,tooltip:r}=this;if(n.length&&r&&!h5(r.dom,e)||this.pending){let{pos:o}=n[0]||this.pending,l=(i=(s=n[0])===null||s===void 0?void 0:s.end)!==null&&i!==void 0?i:o;(o==l?this.view.posAtCoords(this.lastMove)!=o:!f5(this.view,o,l,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:s}=this;if(s.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let s=i=>{e.removeEventListener("mouseleave",s),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",s)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const cl=4;function h5(t,e){let{left:s,right:i,top:n,bottom:r}=t.getBoundingClientRect(),o;if(o=t.querySelector(".cm-tooltip-arrow")){let l=o.getBoundingClientRect();n=Math.min(l.top,n),r=Math.max(l.bottom,r)}return e.clientX>=s-cl&&e.clientX<=i+cl&&e.clientY>=n-cl&&e.clientY<=r+cl}function f5(t,e,s,i,n,r){let o=t.scrollDOM.getBoundingClientRect(),l=t.documentTop+t.documentPadding.top+t.contentHeight;if(o.left>i||o.right<i||o.top>n||Math.min(o.bottom,l)<n)return!1;let a=t.posAtCoords({x:i,y:n},!1);return a>=e&&a<=s}function p5(t,e={}){let s=He.define(),i=Wt.define({create(){return[]},update(n,r){if(n.length&&(e.hideOnChange&&(r.docChanged||r.selection)?n=[]:e.hideOn&&(n=n.filter(o=>!e.hideOn(r,o))),r.docChanged)){let o=[];for(let l of n){let a=r.changes.mapPos(l.pos,-1,cs.TrackDel);if(a!=null){let d=Object.assign(Object.create(null),l);d.pos=a,d.end!=null&&(d.end=r.changes.mapPos(d.end)),o.push(d)}}n=o}for(let o of r.effects)o.is(s)&&(n=o.value),o.is(m5)&&(n=[]);return n},provide:n=>sa.from(n)});return{active:i,extension:[i,$t.define(n=>new c5(n,t,i,s,e.hoverTime||300)),d5]}}function gv(t,e){let s=t.plugin(jc);if(!s)return null;let i=s.manager.tooltips.indexOf(e);return i<0?null:s.manager.tooltipViews[i]}const m5=He.define(),_p=$e.define({combine(t){let e,s;for(let i of t)e=e||i.topContainer,s=s||i.bottomContainer;return{topContainer:e,bottomContainer:s}}});function _o(t,e){let s=t.plugin(vv),i=s?s.specs.indexOf(e):-1;return i>-1?s.panels[i]:null}const vv=$t.fromClass(class{constructor(t){this.input=t.state.facet(So),this.specs=this.input.filter(s=>s),this.panels=this.specs.map(s=>s(t));let e=t.state.facet(_p);this.top=new hl(t,!0,e.topContainer),this.bottom=new hl(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(s=>s.top)),this.bottom.sync(this.panels.filter(s=>!s.top));for(let s of this.panels)s.dom.classList.add("cm-panel"),s.mount&&s.mount()}update(t){let e=t.state.facet(_p);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new hl(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new hl(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let s=t.state.facet(So);if(s!=this.input){let i=s.filter(a=>a),n=[],r=[],o=[],l=[];for(let a of i){let d=this.specs.indexOf(a),u;d<0?(u=a(t.view),l.push(u)):(u=this.panels[d],u.update&&u.update(t)),n.push(u),(u.top?r:o).push(u)}this.specs=i,this.panels=n,this.top.sync(r),this.bottom.sync(o);for(let a of l)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}else for(let i of this.panels)i.update&&i.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>Te.scrollMargins.of(e=>{let s=e.plugin(t);return s&&{top:s.top.scrollMargin(),bottom:s.bottom.scrollMargin()}})});class hl{constructor(e,s,i){this.view=e,this.top=s,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let s of this.panels)s.destroy&&e.indexOf(s)<0&&s.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let s=this.container||this.view.dom;s.insertBefore(this.dom,this.top?s.firstChild:null)}let e=this.dom.firstChild;for(let s of this.panels)if(s.dom.parentNode==this.dom){for(;e!=s.dom;)e=Sp(e);e=e.nextSibling}else this.dom.insertBefore(s.dom,e);for(;e;)e=Sp(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function Sp(t){let e=t.nextSibling;return t.remove(),e}const So=$e.define({enables:vv});class ji extends En{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}ji.prototype.elementClass="";ji.prototype.toDOM=void 0;ji.prototype.mapMode=cs.TrackBefore;ji.prototype.startSide=ji.prototype.endSide=-1;ji.prototype.point=!0;const jl=$e.define(),g5=$e.define(),v5={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Ze.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},io=$e.define();function y5(t){return[yv(),io.of({...v5,...t})]}const Cp=$e.define({combine:t=>t.some(e=>e)});function yv(t){return[b5]}const b5=$t.fromClass(class{constructor(t){this.view=t,this.domAfter=null,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(io).map(e=>new Vp(t,e)),this.fixed=!t.state.facet(Cp);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(t){if(this.updateGutters(t)){let e=this.prevViewport,s=t.view.viewport,i=Math.min(e.to,s.to)-Math.max(e.from,s.from);this.syncGutters(i<(s.to-s.from)*.8)}if(t.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(Cp)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let s=Ze.iter(this.view.state.facet(jl),this.view.viewport.from),i=[],n=this.gutters.map(r=>new x5(r,this.view.viewport,-this.view.documentPadding.top));for(let r of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(r.type)){let o=!0;for(let l of r.type)if(l.type==hs.Text&&o){Bd(s,i,l.from);for(let a of n)a.line(this.view,l,i);o=!1}else if(l.widget)for(let a of n)a.widget(this.view,l)}else if(r.type==hs.Text){Bd(s,i,r.from);for(let o of n)o.line(this.view,r,i)}else if(r.widget)for(let o of n)o.widget(this.view,r);for(let r of n)r.finish();t&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(t){let e=t.startState.facet(io),s=t.state.facet(io),i=t.docChanged||t.heightChanged||t.viewportChanged||!Ze.eq(t.startState.facet(jl),t.state.facet(jl),t.view.viewport.from,t.view.viewport.to);if(e==s)for(let n of this.gutters)n.update(t)&&(i=!0);else{i=!0;let n=[];for(let r of s){let o=e.indexOf(r);o<0?n.push(new Vp(this.view,r)):(this.gutters[o].update(t),n.push(this.gutters[o]))}for(let r of this.gutters)r.dom.remove(),n.indexOf(r)<0&&r.destroy();for(let r of n)r.config.side=="after"?this.getDOMAfter().appendChild(r.dom):this.dom.appendChild(r.dom);this.gutters=n}return i}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:t=>Te.scrollMargins.of(e=>{let s=e.plugin(t);if(!s||s.gutters.length==0||!s.fixed)return null;let i=s.dom.offsetWidth*e.scaleX,n=s.domAfter?s.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==gt.LTR?{left:i,right:n}:{right:i,left:n}})});function Ap(t){return Array.isArray(t)?t:[t]}function Bd(t,e,s){for(;t.value&&t.from<=s;)t.from==s&&e.push(t.value),t.next()}class x5{constructor(e,s,i){this.gutter=e,this.height=i,this.i=0,this.cursor=Ze.iter(e.markers,s.from)}addElement(e,s,i){let{gutter:n}=this,r=(s.top-this.height)/e.scaleY,o=s.height/e.scaleY;if(this.i==n.elements.length){let l=new bv(e,o,r,i);n.elements.push(l),n.dom.appendChild(l.dom)}else n.elements[this.i].update(e,o,r,i);this.height=s.bottom,this.i++}line(e,s,i){let n=[];Bd(this.cursor,n,s.from),i.length&&(n=n.concat(i));let r=this.gutter.config.lineMarker(e,s,n);r&&n.unshift(r);let o=this.gutter;n.length==0&&!o.config.renderEmptyElements||this.addElement(e,s,n)}widget(e,s){let i=this.gutter.config.widgetMarker(e,s.widget,s),n=i?[i]:null;for(let r of e.state.facet(g5)){let o=r(e,s.widget,s);o&&(n||(n=[])).push(o)}n&&this.addElement(e,s,n)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let s=e.elements.pop();e.dom.removeChild(s.dom),s.destroy()}}}class Vp{constructor(e,s){this.view=e,this.config=s,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in s.domEventHandlers)this.dom.addEventListener(i,n=>{let r=n.target,o;if(r!=this.dom&&this.dom.contains(r)){for(;r.parentNode!=this.dom;)r=r.parentNode;let a=r.getBoundingClientRect();o=(a.top+a.bottom)/2}else o=n.clientY;let l=e.lineBlockAtHeight(o-e.documentTop);s.domEventHandlers[i](e,l,n)&&n.preventDefault()});this.markers=Ap(s.markers(e)),s.initialSpacer&&(this.spacer=new bv(e,0,0,[s.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let s=this.markers;if(this.markers=Ap(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let n=this.config.updateSpacer(this.spacer.markers[0],e);n!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[n])}let i=e.view.viewport;return!Ze.eq(this.markers,s,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class bv{constructor(e,s,i,n){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,s,i,n)}update(e,s,i,n){this.height!=s&&(this.height=s,this.dom.style.height=s+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),k5(this.markers,n)||this.setMarkers(e,n)}setMarkers(e,s){let i="cm-gutterElement",n=this.dom.firstChild;for(let r=0,o=0;;){let l=o,a=r<s.length?s[r++]:null,d=!1;if(a){let u=a.elementClass;u&&(i+=" "+u);for(let f=o;f<this.markers.length;f++)if(this.markers[f].compare(a)){l=f,d=!0;break}}else l=this.markers.length;for(;o<l;){let u=this.markers[o++];if(u.toDOM){u.destroy(n);let f=n.nextSibling;n.remove(),n=f}}if(!a)break;a.toDOM&&(d?n=n.nextSibling:this.dom.insertBefore(a.toDOM(e),n)),d&&o++}this.dom.className=i,this.markers=s}destroy(){this.setMarkers(null,[])}}function k5(t,e){if(t.length!=e.length)return!1;for(let s=0;s<t.length;s++)if(!t[s].compare(e[s]))return!1;return!0}const w5=$e.define(),_5=$e.define(),Gn=$e.define({combine(t){return gi(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,s){let i=Object.assign({},e);for(let n in s){let r=i[n],o=s[n];i[n]=r?(l,a,d)=>r(l,a,d)||o(l,a,d):o}return i}})}});class ku extends ji{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function wu(t,e){return t.state.facet(Gn).formatNumber(e,t.state)}const S5=io.compute([Gn],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(w5)},lineMarker(e,s,i){return i.some(n=>n.toDOM)?null:new ku(wu(e,e.state.doc.lineAt(s.from).number))},widgetMarker:(e,s,i)=>{for(let n of e.state.facet(_5)){let r=n(e,s,i);if(r)return r}return null},lineMarkerChange:e=>e.startState.facet(Gn)!=e.state.facet(Gn),initialSpacer(e){return new ku(wu(e,Mp(e.state.doc.lines)))},updateSpacer(e,s){let i=wu(s.view,Mp(s.view.state.doc.lines));return i==e.number?e:new ku(i)},domEventHandlers:t.facet(Gn).domEventHandlers,side:"before"}));function C5(t={}){return[Gn.of(t),yv(),S5]}function Mp(t){let e=9;for(;e<t;)e=e*10+9;return e}const A5=new class extends ji{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},V5=jl.compute(["selection"],t=>{let e=[],s=-1;for(let i of t.selection.ranges){let n=t.doc.lineAt(i.head).from;n>s&&(s=n,e.push(A5.range(n)))}return Ze.of(e)});function M5(){return V5}const D5=1024;let T5=0;class _u{constructor(e,s){this.from=e,this.to=s}}class Ke{constructor(e={}){this.id=T5++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=xs.match(e)),s=>{let i=e(s);return i===void 0?null:[this,i]}}}Ke.closedBy=new Ke({deserialize:t=>t.split(" ")});Ke.openedBy=new Ke({deserialize:t=>t.split(" ")});Ke.group=new Ke({deserialize:t=>t.split(" ")});Ke.isolate=new Ke({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});Ke.contextHash=new Ke({perNode:!0});Ke.lookAhead=new Ke({perNode:!0});Ke.mounted=new Ke({perNode:!0});class ia{constructor(e,s,i){this.tree=e,this.overlay=s,this.parser=i}static get(e){return e&&e.props&&e.props[Ke.mounted.id]}}const $5=Object.create(null);class xs{constructor(e,s,i,n=0){this.name=e,this.props=s,this.id=i,this.flags=n}static define(e){let s=e.props&&e.props.length?Object.create(null):$5,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),n=new xs(e.name||"",s,e.id,i);if(e.props){for(let r of e.props)if(Array.isArray(r)||(r=r(n)),r){if(r[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");s[r[0].id]=r[1]}}return n}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let s=this.prop(Ke.group);return s?s.indexOf(e)>-1:!1}return this.id==e}static match(e){let s=Object.create(null);for(let i in e)for(let n of i.split(" "))s[n]=e[i];return i=>{for(let n=i.prop(Ke.group),r=-1;r<(n?n.length:0);r++){let o=s[r<0?i.name:n[r]];if(o)return o}}}}xs.none=new xs("",Object.create(null),0,8);class Lc{constructor(e){this.types=e;for(let s=0;s<e.length;s++)if(e[s].id!=s)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let s=[];for(let i of this.types){let n=null;for(let r of e){let o=r(i);if(o){n||(n=Object.assign({},i.props));let l=o[1],a=o[0];a.combine&&a.id in n&&(l=a.combine(n[a.id],l)),n[a.id]=l}}s.push(n?new xs(i.name,n,i.id,i.flags):i)}return new Lc(s)}}const fl=new WeakMap,Dp=new WeakMap;var zt;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(zt||(zt={}));class _t{constructor(e,s,i,n,r){if(this.type=e,this.children=s,this.positions=i,this.length=n,this.props=null,r&&r.length){this.props=Object.create(null);for(let[o,l]of r)this.props[typeof o=="number"?o:o.id]=l}}toString(){let e=ia.get(this);if(e&&!e.overlay)return e.tree.toString();let s="";for(let i of this.children){let n=i.toString();n&&(s&&(s+=","),s+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(s.length?"("+s+")":""):s}cursor(e=0){return new Nd(this.topNode,e)}cursorAt(e,s=0,i=0){let n=fl.get(this)||this.topNode,r=new Nd(n);return r.moveTo(e,s),fl.set(this,r._tree),r}get topNode(){return new Bs(this,0,0,null)}resolve(e,s=0){let i=Co(fl.get(this)||this.topNode,e,s,!1);return fl.set(this,i),i}resolveInner(e,s=0){let i=Co(Dp.get(this)||this.topNode,e,s,!0);return Dp.set(this,i),i}resolveStack(e,s=0){return P5(this,e,s)}iterate(e){let{enter:s,leave:i,from:n=0,to:r=this.length}=e,o=e.mode||0,l=(o&zt.IncludeAnonymous)>0;for(let a=this.cursor(o|zt.IncludeAnonymous);;){let d=!1;if(a.from<=r&&a.to>=n&&(!l&&a.type.isAnonymous||s(a)!==!1)){if(a.firstChild())continue;d=!0}for(;d&&i&&(l||!a.type.isAnonymous)&&i(a),!a.nextSibling();){if(!a.parent())return;d=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let s in this.props)e.push([+s,this.props[s]]);return e}balance(e={}){return this.children.length<=8?this:Nc(xs.none,this.children,this.positions,0,this.children.length,0,this.length,(s,i,n)=>new _t(this.type,s,i,n,this.propValues),e.makeTree||((s,i,n)=>new _t(xs.none,s,i,n)))}static build(e){return j5(e)}}_t.empty=new _t(xs.none,[],[],0);class Bc{constructor(e,s){this.buffer=e,this.index=s}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Bc(this.buffer,this.index)}}class rn{constructor(e,s,i){this.buffer=e,this.length=s,this.set=i}get type(){return xs.none}toString(){let e=[];for(let s=0;s<this.buffer.length;)e.push(this.childString(s)),s=this.buffer[s+3];return e.join(",")}childString(e){let s=this.buffer[e],i=this.buffer[e+3],n=this.set.types[s],r=n.name;if(/\W/.test(r)&&!n.isError&&(r=JSON.stringify(r)),e+=4,i==e)return r;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return r+"("+o.join(",")+")"}findChild(e,s,i,n,r){let{buffer:o}=this,l=-1;for(let a=e;a!=s&&!(xv(r,n,o[a+1],o[a+2])&&(l=a,i>0));a=o[a+3]);return l}slice(e,s,i){let n=this.buffer,r=new Uint16Array(s-e),o=0;for(let l=e,a=0;l<s;){r[a++]=n[l++],r[a++]=n[l++]-i;let d=r[a++]=n[l++]-i;r[a++]=n[l++]-e,o=Math.max(o,d)}return new rn(r,o,this.set)}}function xv(t,e,s,i){switch(t){case-2:return s<e;case-1:return i>=e&&s<e;case 0:return s<e&&i>e;case 1:return s<=e&&i>e;case 2:return i>e;case 4:return!0}}function Co(t,e,s,i){for(var n;t.from==t.to||(s<1?t.from>=e:t.from>e)||(s>-1?t.to<=e:t.to<e);){let o=!i&&t instanceof Bs&&t.index<0?null:t.parent;if(!o)return t;t=o}let r=i?0:zt.IgnoreOverlays;if(i)for(let o=t,l=o.parent;l;o=l,l=o.parent)o instanceof Bs&&o.index<0&&((n=l.enter(e,s,r))===null||n===void 0?void 0:n.from)!=o.from&&(t=l);for(;;){let o=t.enter(e,s,r);if(!o)return t;t=o}}class kv{cursor(e=0){return new Nd(this,e)}getChild(e,s=null,i=null){let n=Tp(this,e,s,i);return n.length?n[0]:null}getChildren(e,s=null,i=null){return Tp(this,e,s,i)}resolve(e,s=0){return Co(this,e,s,!1)}resolveInner(e,s=0){return Co(this,e,s,!0)}matchContext(e){return Id(this.parent,e)}enterUnfinishedNodesBefore(e){let s=this.childBefore(e),i=this;for(;s;){let n=s.lastChild;if(!n||n.to!=s.to)break;n.type.isError&&n.from==n.to?(i=s,s=n.prevSibling):s=n}return i}get node(){return this}get next(){return this.parent}}class Bs extends kv{constructor(e,s,i,n){super(),this._tree=e,this.from=s,this.index=i,this._parent=n}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,s,i,n,r=0){for(let o=this;;){for(let{children:l,positions:a}=o._tree,d=s>0?l.length:-1;e!=d;e+=s){let u=l[e],f=a[e]+o.from;if(xv(n,i,f,f+u.length)){if(u instanceof rn){if(r&zt.ExcludeBuffers)continue;let c=u.findChild(0,u.buffer.length,s,i-f,n);if(c>-1)return new Ji(new E5(o,u,e,f),null,c)}else if(r&zt.IncludeAnonymous||!u.type.isAnonymous||Ic(u)){let c;if(!(r&zt.IgnoreMounts)&&(c=ia.get(u))&&!c.overlay)return new Bs(c.tree,f,e,o);let p=new Bs(u,f,e,o);return r&zt.IncludeAnonymous||!p.type.isAnonymous?p:p.nextChild(s<0?u.children.length-1:0,s,i,n)}}}if(r&zt.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+s:e=s<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,s,i=0){let n;if(!(i&zt.IgnoreOverlays)&&(n=ia.get(this._tree))&&n.overlay){let r=e-this.from;for(let{from:o,to:l}of n.overlay)if((s>0?o<=r:o<r)&&(s<0?l>=r:l>r))return new Bs(n.tree,n.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,s,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function Tp(t,e,s,i){let n=t.cursor(),r=[];if(!n.firstChild())return r;if(s!=null){for(let o=!1;!o;)if(o=n.type.is(s),!n.nextSibling())return r}for(;;){if(i!=null&&n.type.is(i))return r;if(n.type.is(e)&&r.push(n.node),!n.nextSibling())return i==null?r:[]}}function Id(t,e,s=e.length-1){for(let i=t;s>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[s]&&e[s]!=i.name)return!1;s--}}return!0}class E5{constructor(e,s,i,n){this.parent=e,this.buffer=s,this.index=i,this.start=n}}class Ji extends kv{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,s,i){super(),this.context=e,this._parent=s,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,s,i){let{buffer:n}=this.context,r=n.findChild(this.index+4,n.buffer[this.index+3],e,s-this.context.start,i);return r<0?null:new Ji(this.context,this,r)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,s,i=0){if(i&zt.ExcludeBuffers)return null;let{buffer:n}=this.context,r=n.findChild(this.index+4,n.buffer[this.index+3],s>0?1:-1,e-this.context.start,s);return r<0?null:new Ji(this.context,this,r)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,s=e.buffer[this.index+3];return s<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Ji(this.context,this._parent,s):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,s=this._parent?this._parent.index+4:0;return this.index==s?this.externalSibling(-1):new Ji(this.context,this._parent,e.findChild(s,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],s=[],{buffer:i}=this.context,n=this.index+4,r=i.buffer[this.index+3];if(r>n){let o=i.buffer[this.index+1];e.push(i.slice(n,r,o)),s.push(0)}return new _t(this.type,e,s,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function wv(t){if(!t.length)return null;let e=0,s=t[0];for(let r=1;r<t.length;r++){let o=t[r];(o.from>s.from||o.to<s.to)&&(s=o,e=r)}let i=s instanceof Bs&&s.index<0?null:s.parent,n=t.slice();return i?n[e]=i:n.splice(e,1),new O5(n,s)}class O5{constructor(e,s){this.heads=e,this.node=s}get next(){return wv(this.heads)}}function P5(t,e,s){let i=t.resolveInner(e,s),n=null;for(let r=i instanceof Bs?i:i.context.parent;r;r=r.parent)if(r.index<0){let o=r.parent;(n||(n=[i])).push(o.resolve(e,s)),r=o}else{let o=ia.get(r.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let l=new Bs(o.tree,o.overlay[0].from+r.from,-1,r);(n||(n=[i])).push(Co(l,e,s,!1))}}return n?wv(n):i}class Nd{get name(){return this.type.name}constructor(e,s=0){if(this.mode=s,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Bs)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,s){this.index=e;let{start:i,buffer:n}=this.buffer;return this.type=s||n.set.types[n.buffer[e]],this.from=i+n.buffer[e+1],this.to=i+n.buffer[e+2],!0}yield(e){return e?e instanceof Bs?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,s,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,s,i,this.mode));let{buffer:n}=this.buffer,r=n.findChild(this.index+4,n.buffer[this.index+3],e,s-this.buffer.start,i);return r<0?!1:(this.stack.push(this.index),this.yieldBuf(r))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,s,i=this.mode){return this.buffer?i&zt.ExcludeBuffers?!1:this.enterChild(1,e,s):this.yield(this._tree.enter(e,s,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&zt.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&zt.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:s}=this.buffer,i=this.stack.length-1;if(e<0){let n=i<0?0:this.stack[i]+4;if(this.index!=n)return this.yieldBuf(s.findChild(n,this.index,-1,0,4))}else{let n=s.buffer[this.index+3];if(n<(i<0?s.buffer.length:s.buffer[this.stack[i]+3]))return this.yieldBuf(n)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let s,i,{buffer:n}=this;if(n){if(e>0){if(this.index<n.buffer.buffer.length)return!1}else for(let r=0;r<this.index;r++)if(n.buffer.buffer[r+3]<this.index)return!1;({index:s,parent:i}=n)}else({index:s,_parent:i}=this._tree);for(;i;{index:s,_parent:i}=i)if(s>-1)for(let r=s+e,o=e<0?-1:i._tree.children.length;r!=o;r+=e){let l=i._tree.children[r];if(this.mode&zt.IncludeAnonymous||l instanceof rn||!l.type.isAnonymous||Ic(l))return!1}return!0}move(e,s){if(s&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,s=0){for(;(this.from==this.to||(s<1?this.from>=e:this.from>e)||(s>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,s););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,s=null,i=0;if(e&&e.context==this.buffer)e:for(let n=this.index,r=this.stack.length;r>=0;){for(let o=e;o;o=o._parent)if(o.index==n){if(n==this.index)return o;s=o,i=r+1;break e}n=this.stack[--r]}for(let n=i;n<this.stack.length;n++)s=new Ji(this.buffer,s,this.stack[n]);return this.bufferNode=new Ji(this.buffer,s,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,s){for(let i=0;;){let n=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(n=!0)}for(;;){if(n&&s&&s(this),n=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,n=!0}}}matchContext(e){if(!this.buffer)return Id(this.node.parent,e);let{buffer:s}=this.buffer,{types:i}=s.set;for(let n=e.length-1,r=this.stack.length-1;n>=0;r--){if(r<0)return Id(this._tree,e,n);let o=i[s.buffer[this.stack[r]]];if(!o.isAnonymous){if(e[n]&&e[n]!=o.name)return!1;n--}}return!0}}function Ic(t){return t.children.some(e=>e instanceof rn||!e.type.isAnonymous||Ic(e))}function j5(t){var e;let{buffer:s,nodeSet:i,maxBufferLength:n=D5,reused:r=[],minRepeatType:o=i.types.length}=t,l=Array.isArray(s)?new Bc(s,s.length):s,a=i.types,d=0,u=0;function f(H,B,M,J,X,he){let{id:ie,start:N,end:ae,size:re}=l,ke=u,K=d;if(re<0)if(l.next(),re==-1){let Y=r[ie];M.push(Y),J.push(N-H);return}else if(re==-3){d=ie;return}else if(re==-4){u=ie;return}else throw new RangeError(`Unrecognized record size: ${re}`);let T=a[ie],b,m,w=N-H;if(ae-N<=n&&(m=A(l.pos-B,X))){let Y=new Uint16Array(m.size-m.skip),Z=l.pos-m.size,qe=Y.length;for(;l.pos>Z;)qe=V(m.start,Y,qe);b=new rn(Y,ae-m.start,i),w=m.start-H}else{let Y=l.pos-re;l.next();let Z=[],qe=[],We=ie>=o?ie:-1,Ee=0,tt=ae;for(;l.pos>Y;)We>=0&&l.id==We&&l.size>=0?(l.end<=tt-n&&(k(Z,qe,N,Ee,l.end,tt,We,ke,K),Ee=Z.length,tt=l.end),l.next()):he>2500?c(N,Y,Z,qe):f(N,Y,Z,qe,We,he+1);if(We>=0&&Ee>0&&Ee<Z.length&&k(Z,qe,N,Ee,N,tt,We,ke,K),Z.reverse(),qe.reverse(),We>-1&&Ee>0){let ee=p(T,K);b=Nc(T,Z,qe,0,Z.length,0,ae-N,ee,ee)}else b=C(T,Z,qe,ae-N,ke-ae,K)}M.push(b),J.push(w)}function c(H,B,M,J){let X=[],he=0,ie=-1;for(;l.pos>B;){let{id:N,start:ae,end:re,size:ke}=l;if(ke>4)l.next();else{if(ie>-1&&ae<ie)break;ie<0&&(ie=re-n),X.push(N,ae,re),he++,l.next()}}if(he){let N=new Uint16Array(he*4),ae=X[X.length-2];for(let re=X.length-3,ke=0;re>=0;re-=3)N[ke++]=X[re],N[ke++]=X[re+1]-ae,N[ke++]=X[re+2]-ae,N[ke++]=ke;M.push(new rn(N,X[2]-ae,i)),J.push(ae-H)}}function p(H,B){return(M,J,X)=>{let he=0,ie=M.length-1,N,ae;if(ie>=0&&(N=M[ie])instanceof _t){if(!ie&&N.type==H&&N.length==X)return N;(ae=N.prop(Ke.lookAhead))&&(he=J[ie]+N.length+ae)}return C(H,M,J,X,he,B)}}function k(H,B,M,J,X,he,ie,N,ae){let re=[],ke=[];for(;H.length>J;)re.push(H.pop()),ke.push(B.pop()+M-X);H.push(C(i.types[ie],re,ke,he-X,N-he,ae)),B.push(X-M)}function C(H,B,M,J,X,he,ie){if(he){let N=[Ke.contextHash,he];ie=ie?[N].concat(ie):[N]}if(X>25){let N=[Ke.lookAhead,X];ie=ie?[N].concat(ie):[N]}return new _t(H,B,M,J,ie)}function A(H,B){let M=l.fork(),J=0,X=0,he=0,ie=M.end-n,N={size:0,start:0,skip:0};e:for(let ae=M.pos-H;M.pos>ae;){let re=M.size;if(M.id==B&&re>=0){N.size=J,N.start=X,N.skip=he,he+=4,J+=4,M.next();continue}let ke=M.pos-re;if(re<0||ke<ae||M.start<ie)break;let K=M.id>=o?4:0,T=M.start;for(M.next();M.pos>ke;){if(M.size<0)if(M.size==-3)K+=4;else break e;else M.id>=o&&(K+=4);M.next()}X=T,J+=re,he+=K}return(B<0||J==H)&&(N.size=J,N.start=X,N.skip=he),N.size>4?N:void 0}function V(H,B,M){let{id:J,start:X,end:he,size:ie}=l;if(l.next(),ie>=0&&J<o){let N=M;if(ie>4){let ae=l.pos-(ie-4);for(;l.pos>ae;)M=V(H,B,M)}B[--M]=N,B[--M]=he-H,B[--M]=X-H,B[--M]=J}else ie==-3?d=J:ie==-4&&(u=J);return M}let R=[],P=[];for(;l.pos>0;)f(t.start||0,t.bufferStart||0,R,P,-1,0);let z=(e=t.length)!==null&&e!==void 0?e:R.length?P[0]+R[0].length:0;return new _t(a[t.topID],R.reverse(),P.reverse(),z)}const $p=new WeakMap;function Rl(t,e){if(!t.isAnonymous||e instanceof rn||e.type!=t)return 1;let s=$p.get(e);if(s==null){s=1;for(let i of e.children){if(i.type!=t||!(i instanceof _t)){s=1;break}s+=Rl(t,i)}$p.set(e,s)}return s}function Nc(t,e,s,i,n,r,o,l,a){let d=0;for(let k=i;k<n;k++)d+=Rl(t,e[k]);let u=Math.ceil(d*1.5/8),f=[],c=[];function p(k,C,A,V,R){for(let P=A;P<V;){let z=P,H=C[P],B=Rl(t,k[P]);for(P++;P<V;P++){let M=Rl(t,k[P]);if(B+M>=u)break;B+=M}if(P==z+1){if(B>u){let M=k[z];p(M.children,M.positions,0,M.children.length,C[z]+R);continue}f.push(k[z])}else{let M=C[P-1]+k[P-1].length-H;f.push(Nc(t,k,C,z,P,H,M,null,a))}c.push(H+R-r)}}return p(e,s,i,n,0),(l||a)(f,c,o)}class Dn{constructor(e,s,i,n,r=!1,o=!1){this.from=e,this.to=s,this.tree=i,this.offset=n,this.open=(r?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,s=[],i=!1){let n=[new Dn(0,e.length,e,0,!1,i)];for(let r of s)r.to>e.length&&n.push(r);return n}static applyChanges(e,s,i=128){if(!s.length)return e;let n=[],r=1,o=e.length?e[0]:null;for(let l=0,a=0,d=0;;l++){let u=l<s.length?s[l]:null,f=u?u.fromA:1e9;if(f-a>=i)for(;o&&o.from<f;){let c=o;if(a>=c.from||f<=c.to||d){let p=Math.max(c.from,a)-d,k=Math.min(c.to,f)-d;c=p>=k?null:new Dn(p,k,c.tree,c.offset+d,l>0,!!u)}if(c&&n.push(c),o.to>f)break;o=r<e.length?e[r++]:null}if(!u)break;a=u.toA,d=u.toA-u.toB}return n}}class _v{startParse(e,s,i){return typeof e=="string"&&(e=new R5(e)),i=i?i.length?i.map(n=>new _u(n.from,n.to)):[new _u(0,0)]:[new _u(0,e.length)],this.createParse(e,s||[],i)}parse(e,s,i){let n=this.startParse(e,s,i);for(;;){let r=n.advance();if(r)return r}}}class R5{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,s){return this.string.slice(e,s)}}new Ke({perNode:!0});let L5=0;class $s{constructor(e,s,i,n){this.name=e,this.set=s,this.base=i,this.modified=n,this.id=L5++}toString(){let{name:e}=this;for(let s of this.modified)s.name&&(e=`${s.name}(${e})`);return e}static define(e,s){let i=typeof e=="string"?e:"?";if(e instanceof $s&&(s=e),s?.base)throw new Error("Can not derive from a modified tag");let n=new $s(i,[],null,[]);if(n.set.push(n),s)for(let r of s.set)n.set.push(r);return n}static defineModifier(e){let s=new na(e);return i=>i.modified.indexOf(s)>-1?i:na.get(i.base||i,i.modified.concat(s).sort((n,r)=>n.id-r.id))}}let B5=0;class na{constructor(e){this.name=e,this.instances=[],this.id=B5++}static get(e,s){if(!s.length)return e;let i=s[0].instances.find(l=>l.base==e&&I5(s,l.modified));if(i)return i;let n=[],r=new $s(e.name,n,e,s);for(let l of s)l.instances.push(r);let o=N5(s);for(let l of e.set)if(!l.modified.length)for(let a of o)n.push(na.get(l,a));return r}}function I5(t,e){return t.length==e.length&&t.every((s,i)=>s==e[i])}function N5(t){let e=[[]];for(let s=0;s<t.length;s++)for(let i=0,n=e.length;i<n;i++)e.push(e[i].concat(t[s]));return e.sort((s,i)=>i.length-s.length)}function U5(t){let e=Object.create(null);for(let s in t){let i=t[s];Array.isArray(i)||(i=[i]);for(let n of s.split(" "))if(n){let r=[],o=2,l=n;for(let f=0;;){if(l=="..."&&f>0&&f+3==n.length){o=1;break}let c=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!c)throw new RangeError("Invalid path: "+n);if(r.push(c[0]=="*"?"":c[0][0]=='"'?JSON.parse(c[0]):c[0]),f+=c[0].length,f==n.length)break;let p=n[f++];if(f==n.length&&p=="!"){o=0;break}if(p!="/")throw new RangeError("Invalid path: "+n);l=n.slice(f)}let a=r.length-1,d=r[a];if(!d)throw new RangeError("Invalid path: "+n);let u=new Ao(i,o,a>0?r.slice(0,a):null);e[d]=u.sort(e[d])}}return Sv.add(e)}const Sv=new Ke({combine(t,e){let s,i,n;for(;t||e;){if(!t||e&&t.depth>=e.depth?(n=e,e=e.next):(n=t,t=t.next),s&&s.mode==n.mode&&!n.context&&!s.context)continue;let r=new Ao(n.tags,n.mode,n.context);s?s.next=r:i=r,s=r}return i}});class Ao{constructor(e,s,i,n){this.tags=e,this.mode=s,this.context=i,this.next=n}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Ao.empty=new Ao([],2,null);function Cv(t,e){let s=Object.create(null);for(let r of t)if(!Array.isArray(r.tag))s[r.tag.id]=r.class;else for(let o of r.tag)s[o.id]=r.class;let{scope:i,all:n=null}=e||{};return{style:r=>{let o=n;for(let l of r)for(let a of l.set){let d=s[a.id];if(d){o=o?o+" "+d:d;break}}return o},scope:i}}function z5(t,e){let s=null;for(let i of t){let n=i.style(e);n&&(s=s?s+" "+n:n)}return s}function F5(t,e,s,i=0,n=t.length){let r=new H5(i,Array.isArray(e)?e:[e],s);r.highlightRange(t.cursor(),i,n,"",r.highlighters),r.flush(n)}class H5{constructor(e,s,i){this.at=e,this.highlighters=s,this.span=i,this.class=""}startSpan(e,s){s!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=s)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,s,i,n,r){let{type:o,from:l,to:a}=e;if(l>=i||a<=s)return;o.isTop&&(r=this.highlighters.filter(p=>!p.scope||p.scope(o)));let d=n,u=W5(e)||Ao.empty,f=z5(r,u.tags);if(f&&(d&&(d+=" "),d+=f,u.mode==1&&(n+=(n?" ":"")+f)),this.startSpan(Math.max(s,l),d),u.opaque)return;let c=e.tree&&e.tree.prop(Ke.mounted);if(c&&c.overlay){let p=e.node.enter(c.overlay[0].from+l,1),k=this.highlighters.filter(A=>!A.scope||A.scope(c.tree.type)),C=e.firstChild();for(let A=0,V=l;;A++){let R=A<c.overlay.length?c.overlay[A]:null,P=R?R.from+l:a,z=Math.max(s,V),H=Math.min(i,P);if(z<H&&C)for(;e.from<H&&(this.highlightRange(e,z,H,n,r),this.startSpan(Math.min(H,e.to),d),!(e.to>=P||!e.nextSibling())););if(!R||P>i)break;V=R.to+l,V>s&&(this.highlightRange(p.cursor(),Math.max(s,R.from+l),Math.min(i,V),"",k),this.startSpan(Math.min(i,V),d))}C&&e.parent()}else if(e.firstChild()){c&&(n="");do if(!(e.to<=s)){if(e.from>=i)break;this.highlightRange(e,s,i,n,r),this.startSpan(Math.min(i,e.to),d)}while(e.nextSibling());e.parent()}}}function W5(t){let e=t.type.prop(Sv);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const _e=$s.define,pl=_e(),Fi=_e(),Ep=_e(Fi),Op=_e(Fi),Hi=_e(),ml=_e(Hi),Su=_e(Hi),ri=_e(),mn=_e(ri),ii=_e(),ni=_e(),Ud=_e(),Rr=_e(Ud),gl=_e(),Se={comment:pl,lineComment:_e(pl),blockComment:_e(pl),docComment:_e(pl),name:Fi,variableName:_e(Fi),typeName:Ep,tagName:_e(Ep),propertyName:Op,attributeName:_e(Op),className:_e(Fi),labelName:_e(Fi),namespace:_e(Fi),macroName:_e(Fi),literal:Hi,string:ml,docString:_e(ml),character:_e(ml),attributeValue:_e(ml),number:Su,integer:_e(Su),float:_e(Su),bool:_e(Hi),regexp:_e(Hi),escape:_e(Hi),color:_e(Hi),url:_e(Hi),keyword:ii,self:_e(ii),null:_e(ii),atom:_e(ii),unit:_e(ii),modifier:_e(ii),operatorKeyword:_e(ii),controlKeyword:_e(ii),definitionKeyword:_e(ii),moduleKeyword:_e(ii),operator:ni,derefOperator:_e(ni),arithmeticOperator:_e(ni),logicOperator:_e(ni),bitwiseOperator:_e(ni),compareOperator:_e(ni),updateOperator:_e(ni),definitionOperator:_e(ni),typeOperator:_e(ni),controlOperator:_e(ni),punctuation:Ud,separator:_e(Ud),bracket:Rr,angleBracket:_e(Rr),squareBracket:_e(Rr),paren:_e(Rr),brace:_e(Rr),content:ri,heading:mn,heading1:_e(mn),heading2:_e(mn),heading3:_e(mn),heading4:_e(mn),heading5:_e(mn),heading6:_e(mn),contentSeparator:_e(ri),list:_e(ri),quote:_e(ri),emphasis:_e(ri),strong:_e(ri),link:_e(ri),monospace:_e(ri),strikethrough:_e(ri),inserted:_e(),deleted:_e(),changed:_e(),invalid:_e(),meta:gl,documentMeta:_e(gl),annotation:_e(gl),processingInstruction:_e(gl),definition:$s.defineModifier("definition"),constant:$s.defineModifier("constant"),function:$s.defineModifier("function"),standard:$s.defineModifier("standard"),local:$s.defineModifier("local"),special:$s.defineModifier("special")};for(let t in Se){let e=Se[t];e instanceof $s&&(e.name=t)}Cv([{tag:Se.link,class:"tok-link"},{tag:Se.heading,class:"tok-heading"},{tag:Se.emphasis,class:"tok-emphasis"},{tag:Se.strong,class:"tok-strong"},{tag:Se.keyword,class:"tok-keyword"},{tag:Se.atom,class:"tok-atom"},{tag:Se.bool,class:"tok-bool"},{tag:Se.url,class:"tok-url"},{tag:Se.labelName,class:"tok-labelName"},{tag:Se.inserted,class:"tok-inserted"},{tag:Se.deleted,class:"tok-deleted"},{tag:Se.literal,class:"tok-literal"},{tag:Se.string,class:"tok-string"},{tag:Se.number,class:"tok-number"},{tag:[Se.regexp,Se.escape,Se.special(Se.string)],class:"tok-string2"},{tag:Se.variableName,class:"tok-variableName"},{tag:Se.local(Se.variableName),class:"tok-variableName tok-local"},{tag:Se.definition(Se.variableName),class:"tok-variableName tok-definition"},{tag:Se.special(Se.variableName),class:"tok-variableName2"},{tag:Se.definition(Se.propertyName),class:"tok-propertyName tok-definition"},{tag:Se.typeName,class:"tok-typeName"},{tag:Se.namespace,class:"tok-namespace"},{tag:Se.className,class:"tok-className"},{tag:Se.macroName,class:"tok-macroName"},{tag:Se.propertyName,class:"tok-propertyName"},{tag:Se.operator,class:"tok-operator"},{tag:Se.comment,class:"tok-comment"},{tag:Se.meta,class:"tok-meta"},{tag:Se.invalid,class:"tok-invalid"},{tag:Se.punctuation,class:"tok-punctuation"}]);var Cu;const Jn=new Ke;function q5(t){return $e.define({combine:t?e=>e.concat(t):void 0})}const K5=new Ke;class Ws{constructor(e,s,i=[],n=""){this.data=e,this.name=n,Qe.prototype.hasOwnProperty("tree")||Object.defineProperty(Qe.prototype,"tree",{get(){return ts(this)}}),this.parser=s,this.extension=[on.of(this),Qe.languageData.of((r,o,l)=>{let a=Pp(r,o,l),d=a.type.prop(Jn);if(!d)return[];let u=r.facet(d),f=a.type.prop(K5);if(f){let c=a.resolve(o-a.from,l);for(let p of f)if(p.test(c,r)){let k=r.facet(p.facet);return p.type=="replace"?k:k.concat(u)}}return u})].concat(i)}isActiveAt(e,s,i=-1){return Pp(e,s,i).type.prop(Jn)==this.data}findRegions(e){let s=e.facet(on);if(s?.data==this.data)return[{from:0,to:e.doc.length}];if(!s||!s.allowsNesting)return[];let i=[],n=(r,o)=>{if(r.prop(Jn)==this.data){i.push({from:o,to:o+r.length});return}let l=r.prop(Ke.mounted);if(l){if(l.tree.prop(Jn)==this.data){if(l.overlay)for(let a of l.overlay)i.push({from:a.from+o,to:a.to+o});else i.push({from:o,to:o+r.length});return}else if(l.overlay){let a=i.length;if(n(l.tree,l.overlay[0].from+o),i.length>a)return}}for(let a=0;a<r.children.length;a++){let d=r.children[a];d instanceof _t&&n(d,r.positions[a]+o)}};return n(ts(e),0),i}get allowsNesting(){return!0}}Ws.setState=He.define();function Pp(t,e,s){let i=t.facet(on),n=ts(t).topNode;if(!i||i.allowsNesting)for(let r=n;r;r=r.enter(e,s,zt.ExcludeBuffers))r.type.isTop&&(n=r);return n}function ts(t){let e=t.field(Ws.state,!1);return e?e.tree:_t.empty}class G5{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,s){let i=this.cursorPos-this.string.length;return e<i||s>=this.cursorPos?this.doc.sliceString(e,s):this.string.slice(e-i,s-i)}}let Lr=null;class yr{constructor(e,s,i=[],n,r,o,l,a){this.parser=e,this.state=s,this.fragments=i,this.tree=n,this.treeLen=r,this.viewport=o,this.skipped=l,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,s,i){return new yr(e,s,[],_t.empty,0,i,[],null)}startParse(){return this.parser.startParse(new G5(this.state.doc),this.fragments)}work(e,s){return s!=null&&s>=this.state.doc.length&&(s=void 0),this.tree!=_t.empty&&this.isDone(s??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let n=Date.now()+e;e=()=>Date.now()>n}for(this.parse||(this.parse=this.startParse()),s!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>s)&&s<this.state.doc.length&&this.parse.stopAt(s);;){let n=this.parse.advance();if(n)if(this.fragments=this.withoutTempSkipped(Dn.addTree(n,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=n,this.parse=null,this.treeLen<(s??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,s;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(s=this.parse.advance()););}),this.treeLen=e,this.tree=s,this.fragments=this.withoutTempSkipped(Dn.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let s=Lr;Lr=this;try{return e()}finally{Lr=s}}withoutTempSkipped(e){for(let s;s=this.tempSkipped.pop();)e=jp(e,s.from,s.to);return e}changes(e,s){let{fragments:i,tree:n,treeLen:r,viewport:o,skipped:l}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((d,u,f,c)=>a.push({fromA:d,toA:u,fromB:f,toB:c})),i=Dn.applyChanges(i,a),n=_t.empty,r=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){l=[];for(let d of this.skipped){let u=e.mapPos(d.from,1),f=e.mapPos(d.to,-1);u<f&&l.push({from:u,to:f})}}}return new yr(this.parser,s,i,n,r,o,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let s=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:n,to:r}=this.skipped[i];n<e.to&&r>e.from&&(this.fragments=jp(this.fragments,n,r),this.skipped.splice(i--,1))}return this.skipped.length>=s?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,s){this.skipped.push({from:e,to:s})}static getSkippingParser(e){return new class extends _v{createParse(s,i,n){let r=n[0].from,o=n[n.length-1].to;return{parsedPos:r,advance(){let a=Lr;if(a){for(let d of n)a.tempSkipped.push(d);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=o,new _t(xs.none,[],[],o-r)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let s=this.fragments;return this.treeLen>=e&&s.length&&s[0].from==0&&s[0].to>=e}static get(){return Lr}}function jp(t,e,s){return Dn.applyChanges(t,[{fromA:e,toA:s,fromB:e,toB:s}])}class br{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let s=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),s.viewport.to);return s.work(20,i)||s.takeTree(),new br(s)}static init(e){let s=Math.min(3e3,e.doc.length),i=yr.create(e.facet(on).parser,e,{from:0,to:s});return i.work(20,s)||i.takeTree(),new br(i)}}Ws.state=Wt.define({create:br.init,update(t,e){for(let s of e.effects)if(s.is(Ws.setState))return s.value;return e.startState.facet(on)!=e.state.facet(on)?br.init(e.state):t.apply(e)}});let Av=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(Av=t=>{let e=-1,s=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(s):cancelIdleCallback(e)});const Au=typeof navigator<"u"&&(!((Cu=navigator.scheduling)===null||Cu===void 0)&&Cu.isInputPending)?()=>navigator.scheduling.isInputPending():null,J5=$t.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let s=this.view.state.field(Ws.state).context;(s.updateViewport(e.view.viewport)||this.view.viewport.to>s.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(s)}scheduleWork(){if(this.working)return;let{state:e}=this.view,s=e.field(Ws.state);(s.tree!=s.context.tree||!s.context.isDone(e.doc.length))&&(this.working=Av(this.work))}work(e){this.working=null;let s=Date.now();if(this.chunkEnd<s&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=s+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:n}}=this.view,r=i.field(Ws.state);if(r.tree==r.context.tree&&r.context.isDone(n+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!Au?Math.max(25,e.timeRemaining()-5):1e9),l=r.context.treeLen<n&&i.doc.length>n+1e3,a=r.context.work(()=>Au&&Au()||Date.now()>o,n+(l?0:1e5));this.chunkBudget-=Date.now()-s,(a||this.chunkBudget<=0)&&(r.context.takeTree(),this.view.dispatch({effects:Ws.setState.of(new br(r.context))})),this.chunkBudget>0&&!(a&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(r.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(s=>ys(this.view.state,s)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),on=$e.define({combine(t){return t.length?t[0]:null},enables:t=>[Ws.state,J5,Te.contentAttributes.compute([t],e=>{let s=e.facet(t);return s&&s.name?{"data-language":s.name}:{}})]}),Y5=$e.define(),Uc=$e.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(s=>s!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function Rn(t){let e=t.facet(Uc);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function Vo(t,e){let s="",i=t.tabSize,n=t.facet(Uc)[0];if(n=="	"){for(;e>=i;)s+="	",e-=i;n=" "}for(let r=0;r<e;r++)s+=n;return s}function zc(t,e){t instanceof Qe&&(t=new Ba(t));for(let i of t.state.facet(Y5)){let n=i(t,e);if(n!==void 0)return n}let s=ts(t.state);return s.length>=e?X5(t,s,e):null}class Ba{constructor(e,s={}){this.state=e,this.options=s,this.unit=Rn(e)}lineAt(e,s=1){let i=this.state.doc.lineAt(e),{simulateBreak:n,simulateDoubleBreak:r}=this.options;return n!=null&&n>=i.from&&n<=i.to?r&&n==e?{text:"",from:e}:(s<0?n<e:n<=e)?{text:i.text.slice(n-i.from),from:n}:{text:i.text.slice(0,n-i.from),from:i.from}:i}textAfterPos(e,s=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:n}=this.lineAt(e,s);return i.slice(e-n,Math.min(i.length,e+100-n))}column(e,s=1){let{text:i,from:n}=this.lineAt(e,s),r=this.countColumn(i,e-n),o=this.options.overrideIndentation?this.options.overrideIndentation(n):-1;return o>-1&&(r+=o-this.countColumn(i,i.search(/\S|$/))),r}countColumn(e,s=e.length){return Ar(e,this.state.tabSize,s)}lineIndent(e,s=1){let{text:i,from:n}=this.lineAt(e,s),r=this.options.overrideIndentation;if(r){let o=r(n);if(o>-1)return o}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Vv=new Ke;function X5(t,e,s){let i=e.resolveStack(s),n=e.resolveInner(s,-1).resolve(s,0).enterUnfinishedNodesBefore(s);if(n!=i.node){let r=[];for(let o=n;o&&!(o.from<i.node.from||o.to>i.node.to||o.from==i.node.from&&o.type==i.node.type);o=o.parent)r.push(o);for(let o=r.length-1;o>=0;o--)i={node:r[o],next:i}}return Mv(i,t,s)}function Mv(t,e,s){for(let i=t;i;i=i.next){let n=Z5(i.node);if(n)return n(Fc.create(e,s,i))}return 0}function Q5(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function Z5(t){let e=t.type.prop(Vv);if(e)return e;let s=t.firstChild,i;if(s&&(i=s.type.prop(Ke.closedBy))){let n=t.lastChild,r=n&&i.indexOf(n.name)>-1;return o=>iA(o,!0,1,void 0,r&&!Q5(o)?n.from:void 0)}return t.parent==null?eA:null}function eA(){return 0}class Fc extends Ba{constructor(e,s,i){super(e.state,e.options),this.base=e,this.pos=s,this.context=i}get node(){return this.context.node}static create(e,s,i){return new Fc(e,s,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let s=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(s.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(tA(i,e))break;s=this.state.doc.lineAt(i.from)}return this.lineIndent(s.from)}continue(){return Mv(this.context.next,this.base,this.pos)}}function tA(t,e){for(let s=e;s;s=s.parent)if(t==s)return!0;return!1}function sA(t){let e=t.node,s=e.childAfter(e.from),i=e.lastChild;if(!s)return null;let n=t.options.simulateBreak,r=t.state.doc.lineAt(s.from),o=n==null||n<=r.from?r.to:Math.min(r.to,n);for(let l=s.to;;){let a=e.childAfter(l);if(!a||a==i)return null;if(!a.type.isSkipped){if(a.from>=o)return null;let d=/^ */.exec(r.text.slice(s.to-r.from))[0].length;return{from:s.from,to:s.to+d}}l=a.to}}function iA(t,e,s,i,n){let r=t.textAfter,o=r.match(/^\s*/)[0].length,l=i&&r.slice(o,o+i.length)==i||n==t.pos+o,a=sA(t);return a?l?t.column(a.from):t.column(a.to):t.baseIndent+(l?0:t.unit*s)}const nA=200;function rA(){return Qe.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let s=t.newDoc,{head:i}=t.newSelection.main,n=s.lineAt(i);if(i>n.from+nA)return t;let r=s.sliceString(n.from,i);if(!e.some(d=>d.test(r)))return t;let{state:o}=t,l=-1,a=[];for(let{head:d}of o.selection.ranges){let u=o.doc.lineAt(d);if(u.from==l)continue;l=u.from;let f=zc(o,u.from);if(f==null)continue;let c=/^\s*/.exec(u.text)[0],p=Vo(o,f);c!=p&&a.push({from:u.from,to:u.from+c.length,insert:p})}return a.length?[t,{changes:a,sequential:!0}]:t})}const oA=$e.define(),lA=new Ke;function aA(t,e,s){let i=ts(t);if(i.length<s)return null;let n=i.resolveStack(s,1),r=null;for(let o=n;o;o=o.next){let l=o.node;if(l.to<=s||l.from>s)continue;if(r&&l.from<e)break;let a=l.type.prop(lA);if(a&&(l.to<i.length-50||i.length==t.doc.length||!uA(l))){let d=a(l,t);d&&d.from<=s&&d.from>=e&&d.to>s&&(r=d)}}return r}function uA(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function ra(t,e,s){for(let i of t.facet(oA)){let n=i(t,e,s);if(n)return n}return aA(t,e,s)}function Dv(t,e){let s=e.mapPos(t.from,1),i=e.mapPos(t.to,-1);return s>=i?void 0:{from:s,to:i}}const Ia=He.define({map:Dv}),Uo=He.define({map:Dv});function Tv(t){let e=[];for(let{head:s}of t.state.selection.ranges)e.some(i=>i.from<=s&&i.to>=s)||e.push(t.lineBlockAt(s));return e}const Ln=Wt.define({create(){return Ne.none},update(t,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((s,i)=>t=Rp(t,s,i)),t=t.map(e.changes);for(let s of e.effects)if(s.is(Ia)&&!dA(t,s.value.from,s.value.to)){let{preparePlaceholder:i}=e.state.facet(Ov),n=i?Ne.replace({widget:new vA(i(e.state,s.value))}):Lp;t=t.update({add:[n.range(s.value.from,s.value.to)]})}else s.is(Uo)&&(t=t.update({filter:(i,n)=>s.value.from!=i||s.value.to!=n,filterFrom:s.value.from,filterTo:s.value.to}));return e.selection&&(t=Rp(t,e.selection.main.head)),t},provide:t=>Te.decorations.from(t),toJSON(t,e){let s=[];return t.between(0,e.doc.length,(i,n)=>{s.push(i,n)}),s},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let s=0;s<t.length;){let i=t[s++],n=t[s++];if(typeof i!="number"||typeof n!="number")throw new RangeError("Invalid JSON for fold state");e.push(Lp.range(i,n))}return Ne.set(e,!0)}});function Rp(t,e,s=e){let i=!1;return t.between(e,s,(n,r)=>{n<s&&r>e&&(i=!0)}),i?t.update({filterFrom:e,filterTo:s,filter:(n,r)=>n>=s||r<=e}):t}function oa(t,e,s){var i;let n=null;return(i=t.field(Ln,!1))===null||i===void 0||i.between(e,s,(r,o)=>{(!n||n.from>r)&&(n={from:r,to:o})}),n}function dA(t,e,s){let i=!1;return t.between(e,e,(n,r)=>{n==e&&r==s&&(i=!0)}),i}function $v(t,e){return t.field(Ln,!1)?e:e.concat(He.appendConfig.of(Pv()))}const cA=t=>{for(let e of Tv(t)){let s=ra(t.state,e.from,e.to);if(s)return t.dispatch({effects:$v(t.state,[Ia.of(s),Ev(t,s)])}),!0}return!1},hA=t=>{if(!t.state.field(Ln,!1))return!1;let e=[];for(let s of Tv(t)){let i=oa(t.state,s.from,s.to);i&&e.push(Uo.of(i),Ev(t,i,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function Ev(t,e,s=!0){let i=t.state.doc.lineAt(e.from).number,n=t.state.doc.lineAt(e.to).number;return Te.announce.of(`${t.state.phrase(s?"Folded lines":"Unfolded lines")} ${i} ${t.state.phrase("to")} ${n}.`)}const fA=t=>{let{state:e}=t,s=[];for(let i=0;i<e.doc.length;){let n=t.lineBlockAt(i),r=ra(e,n.from,n.to);r&&s.push(Ia.of(r)),i=(r?t.lineBlockAt(r.to):n).to+1}return s.length&&t.dispatch({effects:$v(t.state,s)}),!!s.length},pA=t=>{let e=t.state.field(Ln,!1);if(!e||!e.size)return!1;let s=[];return e.between(0,t.state.doc.length,(i,n)=>{s.push(Uo.of({from:i,to:n}))}),t.dispatch({effects:s}),!0},mA=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:cA},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:hA},{key:"Ctrl-Alt-[",run:fA},{key:"Ctrl-Alt-]",run:pA}],gA={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},Ov=$e.define({combine(t){return gi(t,gA)}});function Pv(t){return[Ln,xA]}function jv(t,e){let{state:s}=t,i=s.facet(Ov),n=o=>{let l=t.lineBlockAt(t.posAtDOM(o.target)),a=oa(t.state,l.from,l.to);a&&t.dispatch({effects:Uo.of(a)}),o.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(t,n,e);let r=document.createElement("span");return r.textContent=i.placeholderText,r.setAttribute("aria-label",s.phrase("folded code")),r.title=s.phrase("unfold"),r.className="cm-foldPlaceholder",r.onclick=n,r}const Lp=Ne.replace({widget:new class extends ln{toDOM(t){return jv(t,null)}}});class vA extends ln{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return jv(e,this.value)}}const yA={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class Vu extends ji{constructor(e,s){super(),this.config=e,this.open=s}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let s=document.createElement("span");return s.textContent=this.open?this.config.openText:this.config.closedText,s.title=e.state.phrase(this.open?"Fold line":"Unfold line"),s}}function bA(t={}){let e={...yA,...t},s=new Vu(e,!0),i=new Vu(e,!1),n=$t.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(on)!=o.state.facet(on)||o.startState.field(Ln,!1)!=o.state.field(Ln,!1)||ts(o.startState)!=ts(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let l=new Oi;for(let a of o.viewportLineBlocks){let d=oa(o.state,a.from,a.to)?i:ra(o.state,a.from,a.to)?s:null;d&&l.add(a.from,a.from,d)}return l.finish()}}),{domEventHandlers:r}=e;return[n,y5({class:"cm-foldGutter",markers(o){var l;return((l=o.plugin(n))===null||l===void 0?void 0:l.markers)||Ze.empty},initialSpacer(){return new Vu(e,!1)},domEventHandlers:{...r,click:(o,l,a)=>{if(r.click&&r.click(o,l,a))return!0;let d=oa(o.state,l.from,l.to);if(d)return o.dispatch({effects:Uo.of(d)}),!0;let u=ra(o.state,l.from,l.to);return u?(o.dispatch({effects:Ia.of(u)}),!0):!1}}}),Pv()]}const xA=Te.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class zo{constructor(e,s){this.specs=e;let i;function n(l){let a=tn.newName();return(i||(i=Object.create(null)))["."+a]=l,a}const r=typeof s.all=="string"?s.all:s.all?n(s.all):void 0,o=s.scope;this.scope=o instanceof Ws?l=>l.prop(Jn)==o.data:o?l=>l==o:void 0,this.style=Cv(e.map(l=>({tag:l.tag,class:l.class||n(Object.assign({},l,{tag:null}))})),{all:r}).style,this.module=i?new tn(i):null,this.themeType=s.themeType}static define(e,s){return new zo(e,s||{})}}const zd=$e.define(),Rv=$e.define({combine(t){return t.length?[t[0]]:null}});function Mu(t){let e=t.facet(zd);return e.length?e:t.facet(Rv)}function Lv(t,e){let s=[wA],i;return t instanceof zo&&(t.module&&s.push(Te.styleModule.of(t.module)),i=t.themeType),e?.fallback?s.push(Rv.of(t)):i?s.push(zd.computeN([Te.darkTheme],n=>n.facet(Te.darkTheme)==(i=="dark")?[t]:[])):s.push(zd.of(t)),s}class kA{constructor(e){this.markCache=Object.create(null),this.tree=ts(e.state),this.decorations=this.buildDeco(e,Mu(e.state)),this.decoratedTo=e.viewport.to}update(e){let s=ts(e.state),i=Mu(e.state),n=i!=Mu(e.startState),{viewport:r}=e.view,o=e.changes.mapPos(this.decoratedTo,1);s.length<r.to&&!n&&s.type==this.tree.type&&o>=r.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(s!=this.tree||e.viewportChanged||n)&&(this.tree=s,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=r.to)}buildDeco(e,s){if(!s||!this.tree.length)return Ne.none;let i=new Oi;for(let{from:n,to:r}of e.visibleRanges)F5(this.tree,s,(o,l,a)=>{i.add(o,l,this.markCache[a]||(this.markCache[a]=Ne.mark({class:a})))},n,r);return i.finish()}}const wA=In.high($t.fromClass(kA,{decorations:t=>t.decorations})),_A=zo.define([{tag:Se.meta,color:"#404740"},{tag:Se.link,textDecoration:"underline"},{tag:Se.heading,textDecoration:"underline",fontWeight:"bold"},{tag:Se.emphasis,fontStyle:"italic"},{tag:Se.strong,fontWeight:"bold"},{tag:Se.strikethrough,textDecoration:"line-through"},{tag:Se.keyword,color:"#708"},{tag:[Se.atom,Se.bool,Se.url,Se.contentSeparator,Se.labelName],color:"#219"},{tag:[Se.literal,Se.inserted],color:"#164"},{tag:[Se.string,Se.deleted],color:"#a11"},{tag:[Se.regexp,Se.escape,Se.special(Se.string)],color:"#e40"},{tag:Se.definition(Se.variableName),color:"#00f"},{tag:Se.local(Se.variableName),color:"#30a"},{tag:[Se.typeName,Se.namespace],color:"#085"},{tag:Se.className,color:"#167"},{tag:[Se.special(Se.variableName),Se.macroName],color:"#256"},{tag:Se.definition(Se.propertyName),color:"#00c"},{tag:Se.comment,color:"#940"},{tag:Se.invalid,color:"#f00"}]),SA=Te.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Bv=1e4,Iv="()[]{}",Nv=$e.define({combine(t){return gi(t,{afterCursor:!0,brackets:Iv,maxScanDistance:Bv,renderMatch:VA})}}),CA=Ne.mark({class:"cm-matchingBracket"}),AA=Ne.mark({class:"cm-nonmatchingBracket"});function VA(t){let e=[],s=t.matched?CA:AA;return e.push(s.range(t.start.from,t.start.to)),t.end&&e.push(s.range(t.end.from,t.end.to)),e}const MA=Wt.define({create(){return Ne.none},update(t,e){if(!e.docChanged&&!e.selection)return t;let s=[],i=e.state.facet(Nv);for(let n of e.state.selection.ranges){if(!n.empty)continue;let r=ci(e.state,n.head,-1,i)||n.head>0&&ci(e.state,n.head-1,1,i)||i.afterCursor&&(ci(e.state,n.head,1,i)||n.head<e.state.doc.length&&ci(e.state,n.head+1,-1,i));r&&(s=s.concat(i.renderMatch(r,e.state)))}return Ne.set(s,!0)},provide:t=>Te.decorations.from(t)}),DA=[MA,SA];function TA(t={}){return[Nv.of(t),DA]}const $A=new Ke;function Fd(t,e,s){let i=t.prop(e<0?Ke.openedBy:Ke.closedBy);if(i)return i;if(t.name.length==1){let n=s.indexOf(t.name);if(n>-1&&n%2==(e<0?1:0))return[s[n+e]]}return null}function Hd(t){let e=t.type.prop($A);return e?e(t.node):t}function ci(t,e,s,i={}){let n=i.maxScanDistance||Bv,r=i.brackets||Iv,o=ts(t),l=o.resolveInner(e,s);for(let a=l;a;a=a.parent){let d=Fd(a.type,s,r);if(d&&a.from<a.to){let u=Hd(a);if(u&&(s>0?e>=u.from&&e<u.to:e>u.from&&e<=u.to))return EA(t,e,s,a,u,d,r)}}return OA(t,e,s,o,l.type,n,r)}function EA(t,e,s,i,n,r,o){let l=i.parent,a={from:n.from,to:n.to},d=0,u=l?.cursor();if(u&&(s<0?u.childBefore(i.from):u.childAfter(i.to)))do if(s<0?u.to<=i.from:u.from>=i.to){if(d==0&&r.indexOf(u.type.name)>-1&&u.from<u.to){let f=Hd(u);return{start:a,end:f?{from:f.from,to:f.to}:void 0,matched:!0}}else if(Fd(u.type,s,o))d++;else if(Fd(u.type,-s,o)){if(d==0){let f=Hd(u);return{start:a,end:f&&f.from<f.to?{from:f.from,to:f.to}:void 0,matched:!1}}d--}}while(s<0?u.prevSibling():u.nextSibling());return{start:a,matched:!1}}function OA(t,e,s,i,n,r,o){let l=s<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),a=o.indexOf(l);if(a<0||a%2==0!=s>0)return null;let d={from:s<0?e-1:e,to:s>0?e+1:e},u=t.doc.iterRange(e,s>0?t.doc.length:0),f=0;for(let c=0;!u.next().done&&c<=r;){let p=u.value;s<0&&(c+=p.length);let k=e+c*s;for(let C=s>0?0:p.length-1,A=s>0?p.length:-1;C!=A;C+=s){let V=o.indexOf(p[C]);if(!(V<0||i.resolveInner(k+C,1).type!=n))if(V%2==0==s>0)f++;else{if(f==1)return{start:d,end:{from:k+C,to:k+C+1},matched:V>>1==a>>1};f--}}s>0&&(c+=p.length)}return u.done?{start:d,matched:!1}:null}function Bp(t,e,s,i=0,n=0){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));let r=n;for(let o=i;o<e;o++)t.charCodeAt(o)==9?r+=s-r%s:r++;return r}class Uv{constructor(e,s,i,n){this.string=e,this.tabSize=s,this.indentUnit=i,this.overrideIndent=n,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let s=this.string.charAt(this.pos),i;if(typeof e=="string"?i=s==e:i=s&&(e instanceof RegExp?e.test(s):e(s)),i)return++this.pos,s}eatWhile(e){let s=this.pos;for(;this.eat(e););return this.pos>s}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let s=this.string.indexOf(e,this.pos);if(s>-1)return this.pos=s,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Bp(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:Bp(this.string,null,this.tabSize)}match(e,s,i){if(typeof e=="string"){let n=o=>i?o.toLowerCase():o,r=this.string.substr(this.pos,e.length);return n(r)==n(e)?(s!==!1&&(this.pos+=e.length),!0):null}else{let n=this.string.slice(this.pos).match(e);return n&&n.index>0?null:(n&&s!==!1&&(this.pos+=n[0].length),n)}}current(){return this.string.slice(this.start,this.pos)}}function PA(t){return{name:t.name||"",token:t.token,blankLine:t.blankLine||(()=>{}),startState:t.startState||(()=>!0),copyState:t.copyState||jA,indent:t.indent||(()=>null),languageData:t.languageData||{},tokenTable:t.tokenTable||qc,mergeTokens:t.mergeTokens!==!1}}function jA(t){if(typeof t!="object")return t;let e={};for(let s in t){let i=t[s];e[s]=i instanceof Array?i.slice():i}return e}const Ip=new WeakMap;class Hc extends Ws{constructor(e){let s=q5(e.languageData),i=PA(e),n,r=new class extends _v{createParse(o,l,a){return new LA(n,o,l,a)}};super(s,r,[],e.name),this.topNode=NA(s,this),n=this,this.streamParser=i,this.stateAfter=new Ke({perNode:!0}),this.tokenTable=e.tokenTable?new Wv(i.tokenTable):IA}static define(e){return new Hc(e)}getIndent(e){let s,{overrideIndentation:i}=e.options;i&&(s=Ip.get(e.state),s!=null&&s<e.pos-1e4&&(s=void 0));let n=Wc(this,e.node.tree,e.node.from,e.node.from,s??e.pos),r,o;if(n?(o=n.state,r=n.pos+1):(o=this.streamParser.startState(e.unit),r=e.node.from),e.pos-r>1e4)return null;for(;r<e.pos;){let a=e.state.doc.lineAt(r),d=Math.min(e.pos,a.to);if(a.length){let u=i?i(a.from):-1,f=new Uv(a.text,e.state.tabSize,e.unit,u<0?void 0:u);for(;f.pos<d-a.from;)Fv(this.streamParser.token,f,o)}else this.streamParser.blankLine(o,e.unit);if(d==e.pos)break;r=a.to+1}let l=e.lineAt(e.pos);return i&&s==null&&Ip.set(e.state,l.from),this.streamParser.indent(o,/^\s*(.*)/.exec(l.text)[1],e)}get allowsNesting(){return!1}}function Wc(t,e,s,i,n){let r=s>=i&&s+e.length<=n&&e.prop(t.stateAfter);if(r)return{state:t.streamParser.copyState(r),pos:s+e.length};for(let o=e.children.length-1;o>=0;o--){let l=e.children[o],a=s+e.positions[o],d=l instanceof _t&&a<n&&Wc(t,l,a,i,n);if(d)return d}return null}function zv(t,e,s,i,n){if(n&&s<=0&&i>=e.length)return e;!n&&s==0&&e.type==t.topNode&&(n=!0);for(let r=e.children.length-1;r>=0;r--){let o=e.positions[r],l=e.children[r],a;if(o<i&&l instanceof _t){if(!(a=zv(t,l,s-o,i-o,n)))break;return n?new _t(e.type,e.children.slice(0,r).concat(a),e.positions.slice(0,r+1),o+a.length):a}}return null}function RA(t,e,s,i,n){for(let r of e){let o=r.from+(r.openStart?25:0),l=r.to-(r.openEnd?25:0),a=o<=s&&l>s&&Wc(t,r.tree,0-r.offset,s,l),d;if(a&&a.pos<=i&&(d=zv(t,r.tree,s+r.offset,a.pos+r.offset,!1)))return{state:a.state,tree:d}}return{state:t.streamParser.startState(n?Rn(n):4),tree:_t.empty}}class LA{constructor(e,s,i,n){this.lang=e,this.input=s,this.fragments=i,this.ranges=n,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=n[n.length-1].to;let r=yr.get(),o=n[0].from,{state:l,tree:a}=RA(e,i,o,this.to,r?.state);this.state=l,this.parsedPos=this.chunkStart=o+a.length;for(let d=0;d<a.children.length;d++)this.chunks.push(a.children[d]),this.chunkPos.push(a.positions[d]);r&&this.parsedPos<r.viewport.from-1e5&&n.some(d=>d.from<=r.viewport.from&&d.to>=r.viewport.from)&&(this.state=this.lang.streamParser.startState(Rn(r.state)),r.skipUntilInView(this.parsedPos,r.viewport.from),this.parsedPos=r.viewport.from),this.moveRangeIndex()}advance(){let e=yr.get(),s=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),i=Math.min(s,this.chunkStart+512);for(e&&(i=Math.min(i,e.viewport.to));this.parsedPos<i;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=s?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,s),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let s=this.input.chunk(e);if(this.input.lineChunks)s==`
`&&(s="");else{let i=s.indexOf(`
`);i>-1&&(s=s.slice(0,i))}return e+s.length<=this.to?s:s.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,s=this.lineAfter(e),i=e+s.length;for(let n=this.rangeIndex;;){let r=this.ranges[n].to;if(r>=i||(s=s.slice(0,r-(i-s.length)),n++,n==this.ranges.length))break;let o=this.ranges[n].from,l=this.lineAfter(o);s+=l,i=o+l.length}return{line:s,end:i}}skipGapsTo(e,s,i){for(;;){let n=this.ranges[this.rangeIndex].to,r=e+s;if(i>0?n>r:n>=r)break;let o=this.ranges[++this.rangeIndex].from;s+=o-n}return s}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,s,i,n){let r=4;if(this.ranges.length>1){n=this.skipGapsTo(s,n,1),s+=n;let l=this.chunk.length;n=this.skipGapsTo(i,n,-1),i+=n,r+=this.chunk.length-l}let o=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&r==4&&o>=0&&this.chunk[o]==e&&this.chunk[o+2]==s?this.chunk[o+2]=i:this.chunk.push(e,s,i,r),n}parseLine(e){let{line:s,end:i}=this.nextLine(),n=0,{streamParser:r}=this.lang,o=new Uv(s,e?e.state.tabSize:4,e?Rn(e.state):2);if(o.eol())r.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let l=Fv(r.token,o,this.state);if(l&&(n=this.emitToken(this.lang.tokenTable.resolve(l),this.parsedPos+o.start,this.parsedPos+o.pos,n)),o.start>1e4)break}this.parsedPos=i,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=_t.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:BA,topID:0,maxBufferLength:512,reused:this.chunkReused});e=new _t(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new _t(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function Fv(t,e,s){e.start=e.pos;for(let i=0;i<10;i++){let n=t(e,s);if(e.pos>e.start)return n}throw new Error("Stream parser failed to advance stream.")}const qc=Object.create(null),Mo=[xs.none],BA=new Lc(Mo),Np=[],Up=Object.create(null),Hv=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])Hv[t]=qv(qc,e);class Wv{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),Hv)}resolve(e){return e?this.table[e]||(this.table[e]=qv(this.extra,e)):0}}const IA=new Wv(qc);function Du(t,e){Np.indexOf(t)>-1||(Np.push(t),console.warn(e))}function qv(t,e){let s=[];for(let l of e.split(" ")){let a=[];for(let d of l.split(".")){let u=t[d]||Se[d];u?typeof u=="function"?a.length?a=a.map(u):Du(d,`Modifier ${d} used at start of tag`):a.length?Du(d,`Tag ${d} used as modifier`):a=Array.isArray(u)?u:[u]:Du(d,`Unknown highlighting tag ${d}`)}for(let d of a)s.push(d)}if(!s.length)return 0;let i=e.replace(/ /g,"_"),n=i+" "+s.map(l=>l.id),r=Up[n];if(r)return r.id;let o=Up[n]=xs.define({id:Mo.length,name:i,props:[U5({[i]:s})]});return Mo.push(o),o.id}function NA(t,e){let s=xs.define({id:Mo.length,name:"Document",props:[Jn.add(()=>t),Vv.add(()=>i=>e.getIndent(i))],top:!0});return Mo.push(s),s}gt.RTL,gt.LTR;const UA=t=>{let{state:e}=t,s=e.doc.lineAt(e.selection.main.from),i=Gc(t.state,s.from);return i.line?zA(t):i.block?HA(t):!1};function Kc(t,e){return({state:s,dispatch:i})=>{if(s.readOnly)return!1;let n=t(e,s);return n?(i(s.update(n)),!0):!1}}const zA=Kc(KA,0),FA=Kc(Kv,0),HA=Kc((t,e)=>Kv(t,e,qA(e)),0);function Gc(t,e){let s=t.languageDataAt("commentTokens",e,1);return s.length?s[0]:{}}const Br=50;function WA(t,{open:e,close:s},i,n){let r=t.sliceDoc(i-Br,i),o=t.sliceDoc(n,n+Br),l=/\s*$/.exec(r)[0].length,a=/^\s*/.exec(o)[0].length,d=r.length-l;if(r.slice(d-e.length,d)==e&&o.slice(a,a+s.length)==s)return{open:{pos:i-l,margin:l&&1},close:{pos:n+a,margin:a&&1}};let u,f;n-i<=2*Br?u=f=t.sliceDoc(i,n):(u=t.sliceDoc(i,i+Br),f=t.sliceDoc(n-Br,n));let c=/^\s*/.exec(u)[0].length,p=/\s*$/.exec(f)[0].length,k=f.length-p-s.length;return u.slice(c,c+e.length)==e&&f.slice(k,k+s.length)==s?{open:{pos:i+c+e.length,margin:/\s/.test(u.charAt(c+e.length))?1:0},close:{pos:n-p-s.length,margin:/\s/.test(f.charAt(k-1))?1:0}}:null}function qA(t){let e=[];for(let s of t.selection.ranges){let i=t.doc.lineAt(s.from),n=s.to<=i.to?i:t.doc.lineAt(s.to);n.from>i.from&&n.from==s.to&&(n=s.to==i.to+1?i:t.doc.lineAt(s.to-1));let r=e.length-1;r>=0&&e[r].to>i.from?e[r].to=n.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:n.to})}return e}function Kv(t,e,s=e.selection.ranges){let i=s.map(r=>Gc(e,r.from).block);if(!i.every(r=>r))return null;let n=s.map((r,o)=>WA(e,i[o],r.from,r.to));if(t!=2&&!n.every(r=>r))return{changes:e.changes(s.map((r,o)=>n[o]?[]:[{from:r.from,insert:i[o].open+" "},{from:r.to,insert:" "+i[o].close}]))};if(t!=1&&n.some(r=>r)){let r=[];for(let o=0,l;o<n.length;o++)if(l=n[o]){let a=i[o],{open:d,close:u}=l;r.push({from:d.pos-a.open.length,to:d.pos+d.margin},{from:u.pos-u.margin,to:u.pos+a.close.length})}return{changes:r}}return null}function KA(t,e,s=e.selection.ranges){let i=[],n=-1;for(let{from:r,to:o}of s){let l=i.length,a=1e9,d=Gc(e,r).line;if(d){for(let u=r;u<=o;){let f=e.doc.lineAt(u);if(f.from>n&&(r==o||o>f.from)){n=f.from;let c=/^\s*/.exec(f.text)[0].length,p=c==f.length,k=f.text.slice(c,c+d.length)==d?c:-1;c<f.text.length&&c<a&&(a=c),i.push({line:f,comment:k,token:d,indent:c,empty:p,single:!1})}u=f.to+1}if(a<1e9)for(let u=l;u<i.length;u++)i[u].indent<i[u].line.text.length&&(i[u].indent=a);i.length==l+1&&(i[l].single=!0)}}if(t!=2&&i.some(r=>r.comment<0&&(!r.empty||r.single))){let r=[];for(let{line:l,token:a,indent:d,empty:u,single:f}of i)(f||!u)&&r.push({from:l.from+d,insert:a+" "});let o=e.changes(r);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&i.some(r=>r.comment>=0)){let r=[];for(let{line:o,comment:l,token:a}of i)if(l>=0){let d=o.from+l,u=d+a.length;o.text[u-o.from]==" "&&u++,r.push({from:d,to:u})}return{changes:r}}return null}const Wd=Li.define(),GA=Li.define(),JA=$e.define(),Gv=$e.define({combine(t){return gi(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,s)=>s},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,s)=>(i,n)=>e(i,n)||s(i,n)})}}),Jv=Wt.define({create(){return hi.empty},update(t,e){let s=e.state.facet(Gv),i=e.annotation(Wd);if(i){let a=bs.fromTransaction(e,i.selection),d=i.side,u=d==0?t.undone:t.done;return a?u=la(u,u.length,s.minDepth,a):u=Qv(u,e.startState.selection),new hi(d==0?i.rest:u,d==0?u:i.rest)}let n=e.annotation(GA);if((n=="full"||n=="before")&&(t=t.isolate()),e.annotation(jt.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let r=bs.fromTransaction(e),o=e.annotation(jt.time),l=e.annotation(jt.userEvent);return r?t=t.addChanges(r,o,l,s,e):e.selection&&(t=t.addSelection(e.startState.selection,o,l,s.newGroupDelay)),(n=="full"||n=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new hi(t.done.map(bs.fromJSON),t.undone.map(bs.fromJSON))}});function YA(t={}){return[Jv,Gv.of(t),Te.domEventHandlers({beforeinput(e,s){let i=e.inputType=="historyUndo"?Yv:e.inputType=="historyRedo"?qd:null;return i?(e.preventDefault(),i(s)):!1}})]}function Na(t,e){return function({state:s,dispatch:i}){if(!e&&s.readOnly)return!1;let n=s.field(Jv,!1);if(!n)return!1;let r=n.pop(t,s,e);return r?(i(r),!0):!1}}const Yv=Na(0,!1),qd=Na(1,!1),XA=Na(0,!0),QA=Na(1,!0);class bs{constructor(e,s,i,n,r){this.changes=e,this.effects=s,this.mapped=i,this.startSelection=n,this.selectionsAfter=r}setSelAfter(e){return new bs(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,s,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(s=this.mapped)===null||s===void 0?void 0:s.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(n=>n.toJSON())}}static fromJSON(e){return new bs(e.changes&&Pt.fromJSON(e.changes),[],e.mapped&&pi.fromJSON(e.mapped),e.startSelection&&le.fromJSON(e.startSelection),e.selectionsAfter.map(le.fromJSON))}static fromTransaction(e,s){let i=Os;for(let n of e.startState.facet(JA)){let r=n(e);r.length&&(i=i.concat(r))}return!i.length&&e.changes.empty?null:new bs(e.changes.invert(e.startState.doc),i,void 0,s||e.startState.selection,Os)}static selection(e){return new bs(void 0,Os,void 0,void 0,e)}}function la(t,e,s,i){let n=e+1>s+20?e-s-1:0,r=t.slice(n,e);return r.push(i),r}function ZA(t,e){let s=[],i=!1;return t.iterChangedRanges((n,r)=>s.push(n,r)),e.iterChangedRanges((n,r,o,l)=>{for(let a=0;a<s.length;){let d=s[a++],u=s[a++];l>=d&&o<=u&&(i=!0)}}),i}function e3(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((s,i)=>s.empty!=e.ranges[i].empty).length===0}function Xv(t,e){return t.length?e.length?t.concat(e):t:e}const Os=[],t3=200;function Qv(t,e){if(t.length){let s=t[t.length-1],i=s.selectionsAfter.slice(Math.max(0,s.selectionsAfter.length-t3));return i.length&&i[i.length-1].eq(e)?t:(i.push(e),la(t,t.length-1,1e9,s.setSelAfter(i)))}else return[bs.selection([e])]}function s3(t){let e=t[t.length-1],s=t.slice();return s[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),s}function Tu(t,e){if(!t.length)return t;let s=t.length,i=Os;for(;s;){let n=i3(t[s-1],e,i);if(n.changes&&!n.changes.empty||n.effects.length){let r=t.slice(0,s);return r[s-1]=n,r}else e=n.mapped,s--,i=n.selectionsAfter}return i.length?[bs.selection(i)]:Os}function i3(t,e,s){let i=Xv(t.selectionsAfter.length?t.selectionsAfter.map(l=>l.map(e)):Os,s);if(!t.changes)return bs.selection(i);let n=t.changes.map(e),r=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(r):r;return new bs(n,He.mapEffects(t.effects,e),o,t.startSelection.map(r),i)}const n3=/^(input\.type|delete)($|\.)/;class hi{constructor(e,s,i=0,n=void 0){this.done=e,this.undone=s,this.prevTime=i,this.prevUserEvent=n}isolate(){return this.prevTime?new hi(this.done,this.undone):this}addChanges(e,s,i,n,r){let o=this.done,l=o[o.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!i||n3.test(i))&&(!l.selectionsAfter.length&&s-this.prevTime<n.newGroupDelay&&n.joinToEvent(r,ZA(l.changes,e.changes))||i=="input.type.compose")?o=la(o,o.length-1,n.minDepth,new bs(e.changes.compose(l.changes),Xv(He.mapEffects(e.effects,l.changes),l.effects),l.mapped,l.startSelection,Os)):o=la(o,o.length,n.minDepth,e),new hi(o,Os,s,i)}addSelection(e,s,i,n){let r=this.done.length?this.done[this.done.length-1].selectionsAfter:Os;return r.length>0&&s-this.prevTime<n&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&e3(r[r.length-1],e)?this:new hi(Qv(this.done,e),this.undone,s,i)}addMapping(e){return new hi(Tu(this.done,e),Tu(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,s,i){let n=e==0?this.done:this.undone;if(n.length==0)return null;let r=n[n.length-1],o=r.selectionsAfter[0]||s.selection;if(i&&r.selectionsAfter.length)return s.update({selection:r.selectionsAfter[r.selectionsAfter.length-1],annotations:Wd.of({side:e,rest:s3(n),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(r.changes){let l=n.length==1?Os:n.slice(0,n.length-1);return r.mapped&&(l=Tu(l,r.mapped)),s.update({changes:r.changes,selection:r.startSelection,effects:r.effects,annotations:Wd.of({side:e,rest:l,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}hi.empty=new hi(Os,Os);const r3=[{key:"Mod-z",run:Yv,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:qd,preventDefault:!0},{linux:"Ctrl-Shift-z",run:qd,preventDefault:!0},{key:"Mod-u",run:XA,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:QA,preventDefault:!0}];function Vr(t,e){return le.create(t.ranges.map(e),t.mainIndex)}function Zs(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function ei({state:t,dispatch:e},s){let i=Vr(t.selection,s);return i.eq(t.selection,!0)?!1:(e(Zs(t,i)),!0)}function Ua(t,e){return le.cursor(e?t.to:t.from)}function Zv(t,e){return ei(t,s=>s.empty?t.moveByChar(s,e):Ua(s,e))}function ss(t){return t.textDirectionAt(t.state.selection.main.head)==gt.LTR}const ey=t=>Zv(t,!ss(t)),ty=t=>Zv(t,ss(t));function sy(t,e){return ei(t,s=>s.empty?t.moveByGroup(s,e):Ua(s,e))}const o3=t=>sy(t,!ss(t)),l3=t=>sy(t,ss(t));function a3(t,e,s){if(e.type.prop(s))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function za(t,e,s){let i=ts(t).resolveInner(e.head),n=s?Ke.closedBy:Ke.openedBy;for(let a=e.head;;){let d=s?i.childAfter(a):i.childBefore(a);if(!d)break;a3(t,d,n)?i=d:a=s?d.to:d.from}let r=i.type.prop(n),o,l;return r&&(o=s?ci(t,i.from,1):ci(t,i.to,-1))&&o.matched?l=s?o.end.to:o.end.from:l=s?i.to:i.from,le.cursor(l,s?-1:1)}const u3=t=>ei(t,e=>za(t.state,e,!ss(t))),d3=t=>ei(t,e=>za(t.state,e,ss(t)));function iy(t,e){return ei(t,s=>{if(!s.empty)return Ua(s,e);let i=t.moveVertically(s,e);return i.head!=s.head?i:t.moveToLineBoundary(s,e)})}const ny=t=>iy(t,!1),ry=t=>iy(t,!0);function oy(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,s=0,i=0,n;if(e){for(let r of t.state.facet(Te.scrollMargins)){let o=r(t);o?.top&&(s=Math.max(o?.top,s)),o?.bottom&&(i=Math.max(o?.bottom,i))}n=t.scrollDOM.clientHeight-s-i}else n=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:s,marginBottom:i,selfScroll:e,height:Math.max(t.defaultLineHeight,n-5)}}function ly(t,e){let s=oy(t),{state:i}=t,n=Vr(i.selection,o=>o.empty?t.moveVertically(o,e,s.height):Ua(o,e));if(n.eq(i.selection))return!1;let r;if(s.selfScroll){let o=t.coordsAtPos(i.selection.main.head),l=t.scrollDOM.getBoundingClientRect(),a=l.top+s.marginTop,d=l.bottom-s.marginBottom;o&&o.top>a&&o.bottom<d&&(r=Te.scrollIntoView(n.main.head,{y:"start",yMargin:o.top-a}))}return t.dispatch(Zs(i,n),{effects:r}),!0}const zp=t=>ly(t,!1),Kd=t=>ly(t,!0);function an(t,e,s){let i=t.lineBlockAt(e.head),n=t.moveToLineBoundary(e,s);if(n.head==e.head&&n.head!=(s?i.to:i.from)&&(n=t.moveToLineBoundary(e,s,!1)),!s&&n.head==i.from&&i.length){let r=/^\s*/.exec(t.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;r&&e.head!=i.from+r&&(n=le.cursor(i.from+r))}return n}const c3=t=>ei(t,e=>an(t,e,!0)),h3=t=>ei(t,e=>an(t,e,!1)),f3=t=>ei(t,e=>an(t,e,!ss(t))),p3=t=>ei(t,e=>an(t,e,ss(t))),m3=t=>ei(t,e=>le.cursor(t.lineBlockAt(e.head).from,1)),g3=t=>ei(t,e=>le.cursor(t.lineBlockAt(e.head).to,-1));function v3(t,e,s){let i=!1,n=Vr(t.selection,r=>{let o=ci(t,r.head,-1)||ci(t,r.head,1)||r.head>0&&ci(t,r.head-1,1)||r.head<t.doc.length&&ci(t,r.head+1,-1);if(!o||!o.end)return r;i=!0;let l=o.start.from==r.head?o.end.to:o.end.from;return le.cursor(l)});return i?(e(Zs(t,n)),!0):!1}const y3=({state:t,dispatch:e})=>v3(t,e);function Us(t,e){let s=Vr(t.state.selection,i=>{let n=e(i);return le.range(i.anchor,n.head,n.goalColumn,n.bidiLevel||void 0)});return s.eq(t.state.selection)?!1:(t.dispatch(Zs(t.state,s)),!0)}function ay(t,e){return Us(t,s=>t.moveByChar(s,e))}const uy=t=>ay(t,!ss(t)),dy=t=>ay(t,ss(t));function cy(t,e){return Us(t,s=>t.moveByGroup(s,e))}const b3=t=>cy(t,!ss(t)),x3=t=>cy(t,ss(t)),k3=t=>Us(t,e=>za(t.state,e,!ss(t))),w3=t=>Us(t,e=>za(t.state,e,ss(t)));function hy(t,e){return Us(t,s=>t.moveVertically(s,e))}const fy=t=>hy(t,!1),py=t=>hy(t,!0);function my(t,e){return Us(t,s=>t.moveVertically(s,e,oy(t).height))}const Fp=t=>my(t,!1),Hp=t=>my(t,!0),_3=t=>Us(t,e=>an(t,e,!0)),S3=t=>Us(t,e=>an(t,e,!1)),C3=t=>Us(t,e=>an(t,e,!ss(t))),A3=t=>Us(t,e=>an(t,e,ss(t))),V3=t=>Us(t,e=>le.cursor(t.lineBlockAt(e.head).from)),M3=t=>Us(t,e=>le.cursor(t.lineBlockAt(e.head).to)),Wp=({state:t,dispatch:e})=>(e(Zs(t,{anchor:0})),!0),qp=({state:t,dispatch:e})=>(e(Zs(t,{anchor:t.doc.length})),!0),Kp=({state:t,dispatch:e})=>(e(Zs(t,{anchor:t.selection.main.anchor,head:0})),!0),Gp=({state:t,dispatch:e})=>(e(Zs(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),D3=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),T3=({state:t,dispatch:e})=>{let s=Fa(t).map(({from:i,to:n})=>le.range(i,Math.min(n+1,t.doc.length)));return e(t.update({selection:le.create(s),userEvent:"select"})),!0},$3=({state:t,dispatch:e})=>{let s=Vr(t.selection,i=>{let n=ts(t),r=n.resolveStack(i.from,1);if(i.empty){let o=n.resolveStack(i.from,-1);o.node.from>=r.node.from&&o.node.to<=r.node.to&&(r=o)}for(let o=r;o;o=o.next){let{node:l}=o;if((l.from<i.from&&l.to>=i.to||l.to>i.to&&l.from<=i.from)&&o.next)return le.range(l.to,l.from)}return i});return s.eq(t.selection)?!1:(e(Zs(t,s)),!0)};function gy(t,e){let{state:s}=t,i=s.selection,n=s.selection.ranges.slice();for(let r of s.selection.ranges){let o=s.doc.lineAt(r.head);if(e?o.to<t.state.doc.length:o.from>0)for(let l=r;;){let a=t.moveVertically(l,e);if(a.head<o.from||a.head>o.to){n.some(d=>d.head==a.head)||n.push(a);break}else{if(a.head==l.head)break;l=a}}}return n.length==i.ranges.length?!1:(t.dispatch(Zs(s,le.create(n,n.length-1))),!0)}const E3=t=>gy(t,!1),O3=t=>gy(t,!0),P3=({state:t,dispatch:e})=>{let s=t.selection,i=null;return s.ranges.length>1?i=le.create([s.main]):s.main.empty||(i=le.create([le.cursor(s.main.head)])),i?(e(Zs(t,i)),!0):!1};function Fo(t,e){if(t.state.readOnly)return!1;let s="delete.selection",{state:i}=t,n=i.changeByRange(r=>{let{from:o,to:l}=r;if(o==l){let a=e(r);a<o?(s="delete.backward",a=vl(t,a,!1)):a>o&&(s="delete.forward",a=vl(t,a,!0)),o=Math.min(o,a),l=Math.max(l,a)}else o=vl(t,o,!1),l=vl(t,l,!0);return o==l?{range:r}:{changes:{from:o,to:l},range:le.cursor(o,o<r.head?-1:1)}});return n.changes.empty?!1:(t.dispatch(i.update(n,{scrollIntoView:!0,userEvent:s,effects:s=="delete.selection"?Te.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function vl(t,e,s){if(t instanceof Te)for(let i of t.state.facet(Te.atomicRanges).map(n=>n(t)))i.between(e,e,(n,r)=>{n<e&&r>e&&(e=s?r:n)});return e}const vy=(t,e,s)=>Fo(t,i=>{let n=i.from,{state:r}=t,o=r.doc.lineAt(n),l,a;if(s&&!e&&n>o.from&&n<o.from+200&&!/[^ \t]/.test(l=o.text.slice(0,n-o.from))){if(l[l.length-1]=="	")return n-1;let d=Ar(l,r.tabSize),u=d%Rn(r)||Rn(r);for(let f=0;f<u&&l[l.length-1-f]==" ";f++)n--;a=n}else a=Ht(o.text,n-o.from,e,e)+o.from,a==n&&o.number!=(e?r.doc.lines:1)?a+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(a-o.from,n-o.from))&&(a=Ht(o.text,a-o.from,!1,!1)+o.from);return a}),Gd=t=>vy(t,!1,!0),yy=t=>vy(t,!0,!1),by=(t,e)=>Fo(t,s=>{let i=s.head,{state:n}=t,r=n.doc.lineAt(i),o=n.charCategorizer(i);for(let l=null;;){if(i==(e?r.to:r.from)){i==s.head&&r.number!=(e?n.doc.lines:1)&&(i+=e?1:-1);break}let a=Ht(r.text,i-r.from,e)+r.from,d=r.text.slice(Math.min(i,a)-r.from,Math.max(i,a)-r.from),u=o(d);if(l!=null&&u!=l)break;(d!=" "||i!=s.head)&&(l=u),i=a}return i}),xy=t=>by(t,!1),j3=t=>by(t,!0),R3=t=>Fo(t,e=>{let s=t.lineBlockAt(e.head).to;return e.head<s?s:Math.min(t.state.doc.length,e.head+1)}),L3=t=>Fo(t,e=>{let s=t.moveToLineBoundary(e,!1).head;return e.head>s?s:Math.max(0,e.head-1)}),B3=t=>Fo(t,e=>{let s=t.moveToLineBoundary(e,!0).head;return e.head<s?s:Math.min(t.state.doc.length,e.head+1)}),I3=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let s=t.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:et.of(["",""])},range:le.cursor(i.from)}));return e(t.update(s,{scrollIntoView:!0,userEvent:"input"})),!0},N3=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let s=t.changeByRange(i=>{if(!i.empty||i.from==0||i.from==t.doc.length)return{range:i};let n=i.from,r=t.doc.lineAt(n),o=n==r.from?n-1:Ht(r.text,n-r.from,!1)+r.from,l=n==r.to?n+1:Ht(r.text,n-r.from,!0)+r.from;return{changes:{from:o,to:l,insert:t.doc.slice(n,l).append(t.doc.slice(o,n))},range:le.cursor(l)}});return s.changes.empty?!1:(e(t.update(s,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Fa(t){let e=[],s=-1;for(let i of t.selection.ranges){let n=t.doc.lineAt(i.from),r=t.doc.lineAt(i.to);if(!i.empty&&i.to==r.from&&(r=t.doc.lineAt(i.to-1)),s>=n.number){let o=e[e.length-1];o.to=r.to,o.ranges.push(i)}else e.push({from:n.from,to:r.to,ranges:[i]});s=r.number+1}return e}function ky(t,e,s){if(t.readOnly)return!1;let i=[],n=[];for(let r of Fa(t)){if(s?r.to==t.doc.length:r.from==0)continue;let o=t.doc.lineAt(s?r.to+1:r.from-1),l=o.length+1;if(s){i.push({from:r.to,to:o.to},{from:r.from,insert:o.text+t.lineBreak});for(let a of r.ranges)n.push(le.range(Math.min(t.doc.length,a.anchor+l),Math.min(t.doc.length,a.head+l)))}else{i.push({from:o.from,to:r.from},{from:r.to,insert:t.lineBreak+o.text});for(let a of r.ranges)n.push(le.range(a.anchor-l,a.head-l))}}return i.length?(e(t.update({changes:i,scrollIntoView:!0,selection:le.create(n,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const U3=({state:t,dispatch:e})=>ky(t,e,!1),z3=({state:t,dispatch:e})=>ky(t,e,!0);function wy(t,e,s){if(t.readOnly)return!1;let i=[];for(let n of Fa(t))s?i.push({from:n.from,insert:t.doc.slice(n.from,n.to)+t.lineBreak}):i.push({from:n.to,insert:t.lineBreak+t.doc.slice(n.from,n.to)});return e(t.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const F3=({state:t,dispatch:e})=>wy(t,e,!1),H3=({state:t,dispatch:e})=>wy(t,e,!0),W3=t=>{if(t.state.readOnly)return!1;let{state:e}=t,s=e.changes(Fa(e).map(({from:n,to:r})=>(n>0?n--:r<e.doc.length&&r++,{from:n,to:r}))),i=Vr(e.selection,n=>{let r;if(t.lineWrapping){let o=t.lineBlockAt(n.head),l=t.coordsAtPos(n.head,n.assoc||1);l&&(r=o.bottom+t.documentTop-l.bottom+t.defaultLineHeight/2)}return t.moveVertically(n,!0,r)}).map(s);return t.dispatch({changes:s,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function q3(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let s=ts(t).resolveInner(e),i=s.childBefore(e),n=s.childAfter(e),r;return i&&n&&i.to<=e&&n.from>=e&&(r=i.type.prop(Ke.closedBy))&&r.indexOf(n.name)>-1&&t.doc.lineAt(i.to).from==t.doc.lineAt(n.from).from&&!/\S/.test(t.sliceDoc(i.to,n.from))?{from:i.to,to:n.from}:null}const Jp=_y(!1),K3=_y(!0);function _y(t){return({state:e,dispatch:s})=>{if(e.readOnly)return!1;let i=e.changeByRange(n=>{let{from:r,to:o}=n,l=e.doc.lineAt(r),a=!t&&r==o&&q3(e,r);t&&(r=o=(o<=l.to?l:e.doc.lineAt(o)).to);let d=new Ba(e,{simulateBreak:r,simulateDoubleBreak:!!a}),u=zc(d,r);for(u==null&&(u=Ar(/^\s*/.exec(e.doc.lineAt(r).text)[0],e.tabSize));o<l.to&&/\s/.test(l.text[o-l.from]);)o++;a?{from:r,to:o}=a:r>l.from&&r<l.from+100&&!/\S/.test(l.text.slice(0,r))&&(r=l.from);let f=["",Vo(e,u)];return a&&f.push(Vo(e,d.lineIndent(l.from,-1))),{changes:{from:r,to:o,insert:et.of(f)},range:le.cursor(r+1+f[1].length)}});return s(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function Jc(t,e){let s=-1;return t.changeByRange(i=>{let n=[];for(let o=i.from;o<=i.to;){let l=t.doc.lineAt(o);l.number>s&&(i.empty||i.to>l.from)&&(e(l,n,i),s=l.number),o=l.to+1}let r=t.changes(n);return{changes:n,range:le.range(r.mapPos(i.anchor,1),r.mapPos(i.head,1))}})}const G3=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let s=Object.create(null),i=new Ba(t,{overrideIndentation:r=>{let o=s[r];return o??-1}}),n=Jc(t,(r,o,l)=>{let a=zc(i,r.from);if(a==null)return;/\S/.test(r.text)||(a=0);let d=/^\s*/.exec(r.text)[0],u=Vo(t,a);(d!=u||l.from<r.from+d.length)&&(s[r.from]=a,o.push({from:r.from,to:r.from+d.length,insert:u}))});return n.changes.empty||e(t.update(n,{userEvent:"indent"})),!0},J3=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(Jc(t,(s,i)=>{i.push({from:s.from,insert:t.facet(Uc)})}),{userEvent:"input.indent"})),!0),Y3=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(Jc(t,(s,i)=>{let n=/^\s*/.exec(s.text)[0];if(!n)return;let r=Ar(n,t.tabSize),o=0,l=Vo(t,Math.max(0,r-Rn(t)));for(;o<n.length&&o<l.length&&n.charCodeAt(o)==l.charCodeAt(o);)o++;i.push({from:s.from+o,to:s.from+n.length,insert:l.slice(o)})}),{userEvent:"delete.dedent"})),!0),X3=t=>(t.setTabFocusMode(),!0),Q3=[{key:"Ctrl-b",run:ey,shift:uy,preventDefault:!0},{key:"Ctrl-f",run:ty,shift:dy},{key:"Ctrl-p",run:ny,shift:fy},{key:"Ctrl-n",run:ry,shift:py},{key:"Ctrl-a",run:m3,shift:V3},{key:"Ctrl-e",run:g3,shift:M3},{key:"Ctrl-d",run:yy},{key:"Ctrl-h",run:Gd},{key:"Ctrl-k",run:R3},{key:"Ctrl-Alt-h",run:xy},{key:"Ctrl-o",run:I3},{key:"Ctrl-t",run:N3},{key:"Ctrl-v",run:Kd}],Z3=[{key:"ArrowLeft",run:ey,shift:uy,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:o3,shift:b3,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:f3,shift:C3,preventDefault:!0},{key:"ArrowRight",run:ty,shift:dy,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:l3,shift:x3,preventDefault:!0},{mac:"Cmd-ArrowRight",run:p3,shift:A3,preventDefault:!0},{key:"ArrowUp",run:ny,shift:fy,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Wp,shift:Kp},{mac:"Ctrl-ArrowUp",run:zp,shift:Fp},{key:"ArrowDown",run:ry,shift:py,preventDefault:!0},{mac:"Cmd-ArrowDown",run:qp,shift:Gp},{mac:"Ctrl-ArrowDown",run:Kd,shift:Hp},{key:"PageUp",run:zp,shift:Fp},{key:"PageDown",run:Kd,shift:Hp},{key:"Home",run:h3,shift:S3,preventDefault:!0},{key:"Mod-Home",run:Wp,shift:Kp},{key:"End",run:c3,shift:_3,preventDefault:!0},{key:"Mod-End",run:qp,shift:Gp},{key:"Enter",run:Jp,shift:Jp},{key:"Mod-a",run:D3},{key:"Backspace",run:Gd,shift:Gd,preventDefault:!0},{key:"Delete",run:yy,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:xy,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:j3,preventDefault:!0},{mac:"Mod-Backspace",run:L3,preventDefault:!0},{mac:"Mod-Delete",run:B3,preventDefault:!0}].concat(Q3.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),e8=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:u3,shift:k3},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:d3,shift:w3},{key:"Alt-ArrowUp",run:U3},{key:"Shift-Alt-ArrowUp",run:F3},{key:"Alt-ArrowDown",run:z3},{key:"Shift-Alt-ArrowDown",run:H3},{key:"Mod-Alt-ArrowUp",run:E3},{key:"Mod-Alt-ArrowDown",run:O3},{key:"Escape",run:P3},{key:"Mod-Enter",run:K3},{key:"Alt-l",mac:"Ctrl-l",run:T3},{key:"Mod-i",run:$3,preventDefault:!0},{key:"Mod-[",run:Y3},{key:"Mod-]",run:J3},{key:"Mod-Alt-\\",run:G3},{key:"Shift-Mod-k",run:W3},{key:"Shift-Mod-\\",run:y3},{key:"Mod-/",run:UA},{key:"Alt-A",run:FA},{key:"Ctrl-m",mac:"Shift-Alt-m",run:X3}].concat(Z3),Yp=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class xr{constructor(e,s,i=0,n=e.length,r,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,n),this.bufferStart=i,this.normalize=r?l=>r(Yp(l)):Yp,this.query=this.normalize(s)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return gs(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let s=kc(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=ui(e);let n=this.normalize(s);if(n.length)for(let r=0,o=i;;r++){let l=n.charCodeAt(r),a=this.match(l,o,this.bufferPos+this.bufferStart);if(r==n.length-1){if(a)return this.value=a,this;break}o==i&&r<s.length&&s.charCodeAt(r)==l&&o++}}}match(e,s,i){let n=null;for(let r=0;r<this.matches.length;r+=2){let o=this.matches[r],l=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?n={from:this.matches[r+1],to:i}:(this.matches[r]++,l=!0)),l||(this.matches.splice(r,2),r-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?n={from:s,to:i}:this.matches.push(1,s)),n&&this.test&&!this.test(n.from,n.to,this.buffer,this.bufferStart)&&(n=null),n}}typeof Symbol<"u"&&(xr.prototype[Symbol.iterator]=function(){return this});const Sy={from:-1,to:-1,match:/.*/.exec("")},Yc="gm"+(/x/.unicode==null?"":"u");class Cy{constructor(e,s,i,n=0,r=e.length){if(this.text=e,this.to=r,this.curLine="",this.done=!1,this.value=Sy,/\\[sWDnr]|\n|\r|\[\^/.test(s))return new Ay(e,s,i,n,r);this.re=new RegExp(s,Yc+(i?.ignoreCase?"i":"")),this.test=i?.test,this.iter=e.iter();let o=e.lineAt(n);this.curLineStart=o.from,this.matchPos=aa(e,n),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let s=this.matchPos<=this.to&&this.re.exec(this.curLine);if(s){let i=this.curLineStart+s.index,n=i+s[0].length;if(this.matchPos=aa(this.text,n+(i==n?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<n||i>this.value.to)&&(!this.test||this.test(i,n,s)))return this.value={from:i,to:n,match:s},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const $u=new WeakMap;class ar{constructor(e,s){this.from=e,this.text=s}get to(){return this.from+this.text.length}static get(e,s,i){let n=$u.get(e);if(!n||n.from>=i||n.to<=s){let l=new ar(s,e.sliceString(s,i));return $u.set(e,l),l}if(n.from==s&&n.to==i)return n;let{text:r,from:o}=n;return o>s&&(r=e.sliceString(s,o)+r,o=s),n.to<i&&(r+=e.sliceString(n.to,i)),$u.set(e,new ar(o,r)),new ar(s,r.slice(s-o,i-o))}}class Ay{constructor(e,s,i,n,r){this.text=e,this.to=r,this.done=!1,this.value=Sy,this.matchPos=aa(e,n),this.re=new RegExp(s,Yc+(i?.ignoreCase?"i":"")),this.test=i?.test,this.flat=ar.get(e,n,this.chunkEnd(n+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,s=this.re.exec(this.flat.text);if(s&&!s[0]&&s.index==e&&(this.re.lastIndex=e+1,s=this.re.exec(this.flat.text)),s){let i=this.flat.from+s.index,n=i+s[0].length;if((this.flat.to>=this.to||s.index+s[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,n,s)))return this.value={from:i,to:n,match:s},this.matchPos=aa(this.text,n+(i==n?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=ar.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(Cy.prototype[Symbol.iterator]=Ay.prototype[Symbol.iterator]=function(){return this});function t8(t){try{return new RegExp(t,Yc),!0}catch{return!1}}function aa(t,e){if(e>=t.length)return e;let s=t.lineAt(e),i;for(;e<s.to&&(i=s.text.charCodeAt(e-s.from))>=56320&&i<57344;)e++;return e}function Jd(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),s=ct("input",{class:"cm-textfield",name:"line",value:e}),i=ct("form",{class:"cm-gotoLine",onkeydown:r=>{r.keyCode==27?(r.preventDefault(),t.dispatch({effects:no.of(!1)}),t.focus()):r.keyCode==13&&(r.preventDefault(),n())},onsubmit:r=>{r.preventDefault(),n()}},ct("label",t.state.phrase("Go to line"),": ",s)," ",ct("button",{class:"cm-button",type:"submit"},t.state.phrase("go")),ct("button",{name:"close",onclick:()=>{t.dispatch({effects:no.of(!1)}),t.focus()},"aria-label":t.state.phrase("close"),type:"button"},[""]));function n(){let r=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(s.value);if(!r)return;let{state:o}=t,l=o.doc.lineAt(o.selection.main.head),[,a,d,u,f]=r,c=u?+u.slice(1):0,p=d?+d:l.number;if(d&&f){let A=p/100;a&&(A=A*(a=="-"?-1:1)+l.number/o.doc.lines),p=Math.round(o.doc.lines*A)}else d&&a&&(p=p*(a=="-"?-1:1)+l.number);let k=o.doc.line(Math.max(1,Math.min(o.doc.lines,p))),C=le.cursor(k.from+Math.max(0,Math.min(c,k.length)));t.dispatch({effects:[no.of(!1),Te.scrollIntoView(C.from,{y:"center"})],selection:C}),t.focus()}return{dom:i}}const no=He.define(),Xp=Wt.define({create(){return!0},update(t,e){for(let s of e.effects)s.is(no)&&(t=s.value);return t},provide:t=>So.from(t,e=>e?Jd:null)}),s8=t=>{let e=_o(t,Jd);if(!e){let s=[no.of(!0)];t.state.field(Xp,!1)==null&&s.push(He.appendConfig.of([Xp,i8])),t.dispatch({effects:s}),e=_o(t,Jd)}return e&&e.dom.querySelector("input").select(),!0},i8=Te.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),n8={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},r8=$e.define({combine(t){return gi(t,n8,{highlightWordAroundCursor:(e,s)=>e||s,minSelectionLength:Math.min,maxMatches:Math.min})}});function o8(t){return[c8,d8]}const l8=Ne.mark({class:"cm-selectionMatch"}),a8=Ne.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function Qp(t,e,s,i){return(s==0||t(e.sliceDoc(s-1,s))!=kt.Word)&&(i==e.doc.length||t(e.sliceDoc(i,i+1))!=kt.Word)}function u8(t,e,s,i){return t(e.sliceDoc(s,s+1))==kt.Word&&t(e.sliceDoc(i-1,i))==kt.Word}const d8=$t.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.selectionSet||t.docChanged||t.viewportChanged)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=t.state.facet(r8),{state:s}=t,i=s.selection;if(i.ranges.length>1)return Ne.none;let n=i.main,r,o=null;if(n.empty){if(!e.highlightWordAroundCursor)return Ne.none;let a=s.wordAt(n.head);if(!a)return Ne.none;o=s.charCategorizer(n.head),r=s.sliceDoc(a.from,a.to)}else{let a=n.to-n.from;if(a<e.minSelectionLength||a>200)return Ne.none;if(e.wholeWords){if(r=s.sliceDoc(n.from,n.to),o=s.charCategorizer(n.head),!(Qp(o,s,n.from,n.to)&&u8(o,s,n.from,n.to)))return Ne.none}else if(r=s.sliceDoc(n.from,n.to),!r)return Ne.none}let l=[];for(let a of t.visibleRanges){let d=new xr(s.doc,r,a.from,a.to);for(;!d.next().done;){let{from:u,to:f}=d.value;if((!o||Qp(o,s,u,f))&&(n.empty&&u<=n.from&&f>=n.to?l.push(a8.range(u,f)):(u>=n.to||f<=n.from)&&l.push(l8.range(u,f)),l.length>e.maxMatches))return Ne.none}}return Ne.set(l)}},{decorations:t=>t.decorations}),c8=Te.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),h8=({state:t,dispatch:e})=>{let{selection:s}=t,i=le.create(s.ranges.map(n=>t.wordAt(n.head)||le.cursor(n.head)),s.mainIndex);return i.eq(s)?!1:(e(t.update({selection:i})),!0)};function f8(t,e){let{main:s,ranges:i}=t.selection,n=t.wordAt(s.head),r=n&&n.from==s.from&&n.to==s.to;for(let o=!1,l=new xr(t.doc,e,i[i.length-1].to);;)if(l.next(),l.done){if(o)return null;l=new xr(t.doc,e,0,Math.max(0,i[i.length-1].from-1)),o=!0}else{if(o&&i.some(a=>a.from==l.value.from))continue;if(r){let a=t.wordAt(l.value.from);if(!a||a.from!=l.value.from||a.to!=l.value.to)continue}return l.value}}const p8=({state:t,dispatch:e})=>{let{ranges:s}=t.selection;if(s.some(r=>r.from===r.to))return h8({state:t,dispatch:e});let i=t.sliceDoc(s[0].from,s[0].to);if(t.selection.ranges.some(r=>t.sliceDoc(r.from,r.to)!=i))return!1;let n=f8(t,i);return n?(e(t.update({selection:t.selection.addRange(le.range(n.from,n.to),!1),effects:Te.scrollIntoView(n.to)})),!0):!1},Mr=$e.define({combine(t){return gi(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new A8(e),scrollToMatch:e=>Te.scrollIntoView(e)})}});class Vy{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||t8(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(s,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new y8(this):new g8(this)}getCursor(e,s=0,i){let n=e.doc?e:Qe.create({doc:e});return i==null&&(i=n.doc.length),this.regexp?qn(this,n,s,i):Wn(this,n,s,i)}}class My{constructor(e){this.spec=e}}function Wn(t,e,s,i){return new xr(e.doc,t.unquoted,s,i,t.caseSensitive?void 0:n=>n.toLowerCase(),t.wholeWord?m8(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function m8(t,e){return(s,i,n,r)=>((r>s||r+n.length<i)&&(r=Math.max(0,s-2),n=t.sliceString(r,Math.min(t.length,i+2))),(e(ua(n,s-r))!=kt.Word||e(da(n,s-r))!=kt.Word)&&(e(da(n,i-r))!=kt.Word||e(ua(n,i-r))!=kt.Word))}class g8 extends My{constructor(e){super(e)}nextMatch(e,s,i){let n=Wn(this.spec,e,i,e.doc.length).nextOverlapping();if(n.done){let r=Math.min(e.doc.length,s+this.spec.unquoted.length);n=Wn(this.spec,e,0,r).nextOverlapping()}return n.done||n.value.from==s&&n.value.to==i?null:n.value}prevMatchInRange(e,s,i){for(let n=i;;){let r=Math.max(s,n-1e4-this.spec.unquoted.length),o=Wn(this.spec,e,r,n),l=null;for(;!o.nextOverlapping().done;)l=o.value;if(l)return l;if(r==s)return null;n-=1e4}}prevMatch(e,s,i){let n=this.prevMatchInRange(e,0,s);return n||(n=this.prevMatchInRange(e,Math.max(0,i-this.spec.unquoted.length),e.doc.length)),n&&(n.from!=s||n.to!=i)?n:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,s){let i=Wn(this.spec,e,0,e.doc.length),n=[];for(;!i.next().done;){if(n.length>=s)return null;n.push(i.value)}return n}highlight(e,s,i,n){let r=Wn(this.spec,e,Math.max(0,s-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!r.next().done;)n(r.value.from,r.value.to)}}function qn(t,e,s,i){return new Cy(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?v8(e.charCategorizer(e.selection.main.head)):void 0},s,i)}function ua(t,e){return t.slice(Ht(t,e,!1),e)}function da(t,e){return t.slice(e,Ht(t,e))}function v8(t){return(e,s,i)=>!i[0].length||(t(ua(i.input,i.index))!=kt.Word||t(da(i.input,i.index))!=kt.Word)&&(t(da(i.input,i.index+i[0].length))!=kt.Word||t(ua(i.input,i.index+i[0].length))!=kt.Word)}class y8 extends My{nextMatch(e,s,i){let n=qn(this.spec,e,i,e.doc.length).next();return n.done&&(n=qn(this.spec,e,0,s).next()),n.done?null:n.value}prevMatchInRange(e,s,i){for(let n=1;;n++){let r=Math.max(s,i-n*1e4),o=qn(this.spec,e,r,i),l=null;for(;!o.next().done;)l=o.value;if(l&&(r==s||l.from>r+10))return l;if(r==s)return null}}prevMatch(e,s,i){return this.prevMatchInRange(e,0,s)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(s,i)=>{if(i=="&")return e.match[0];if(i=="$")return"$";for(let n=i.length;n>0;n--){let r=+i.slice(0,n);if(r>0&&r<e.match.length)return e.match[r]+i.slice(n)}return s})}matchAll(e,s){let i=qn(this.spec,e,0,e.doc.length),n=[];for(;!i.next().done;){if(n.length>=s)return null;n.push(i.value)}return n}highlight(e,s,i,n){let r=qn(this.spec,e,Math.max(0,s-250),Math.min(i+250,e.doc.length));for(;!r.next().done;)n(r.value.from,r.value.to)}}const Do=He.define(),Xc=He.define(),Xi=Wt.define({create(t){return new Eu(Yd(t).create(),null)},update(t,e){for(let s of e.effects)s.is(Do)?t=new Eu(s.value.create(),t.panel):s.is(Xc)&&(t=new Eu(t.query,s.value?Qc:null));return t},provide:t=>So.from(t,e=>e.panel)});class Eu{constructor(e,s){this.query=e,this.panel=s}}const b8=Ne.mark({class:"cm-searchMatch"}),x8=Ne.mark({class:"cm-searchMatch cm-searchMatch-selected"}),k8=$t.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(Xi))}update(t){let e=t.state.field(Xi);(e!=t.startState.field(Xi)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return Ne.none;let{view:s}=this,i=new Oi;for(let n=0,r=s.visibleRanges,o=r.length;n<o;n++){let{from:l,to:a}=r[n];for(;n<o-1&&a>r[n+1].from-500;)a=r[++n].to;t.highlight(s.state,l,a,(d,u)=>{let f=s.state.selection.ranges.some(c=>c.from==d&&c.to==u);i.add(d,u,f?x8:b8)})}return i.finish()}},{decorations:t=>t.decorations});function Ho(t){return e=>{let s=e.state.field(Xi,!1);return s&&s.query.spec.valid?t(e,s):$y(e)}}const ca=Ho((t,{query:e})=>{let{to:s}=t.state.selection.main,i=e.nextMatch(t.state,s,s);if(!i)return!1;let n=le.single(i.from,i.to),r=t.state.facet(Mr);return t.dispatch({selection:n,effects:[Zc(t,i),r.scrollToMatch(n.main,t)],userEvent:"select.search"}),Ty(t),!0}),ha=Ho((t,{query:e})=>{let{state:s}=t,{from:i}=s.selection.main,n=e.prevMatch(s,i,i);if(!n)return!1;let r=le.single(n.from,n.to),o=t.state.facet(Mr);return t.dispatch({selection:r,effects:[Zc(t,n),o.scrollToMatch(r.main,t)],userEvent:"select.search"}),Ty(t),!0}),w8=Ho((t,{query:e})=>{let s=e.matchAll(t.state,1e3);return!s||!s.length?!1:(t.dispatch({selection:le.create(s.map(i=>le.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),_8=({state:t,dispatch:e})=>{let s=t.selection;if(s.ranges.length>1||s.main.empty)return!1;let{from:i,to:n}=s.main,r=[],o=0;for(let l=new xr(t.doc,t.sliceDoc(i,n));!l.next().done;){if(r.length>1e3)return!1;l.value.from==i&&(o=r.length),r.push(le.range(l.value.from,l.value.to))}return e(t.update({selection:le.create(r,o),userEvent:"select.search.matches"})),!0},Zp=Ho((t,{query:e})=>{let{state:s}=t,{from:i,to:n}=s.selection.main;if(s.readOnly)return!1;let r=e.nextMatch(s,i,i);if(!r)return!1;let o=r,l=[],a,d,u=[];o.from==i&&o.to==n&&(d=s.toText(e.getReplacement(o)),l.push({from:o.from,to:o.to,insert:d}),o=e.nextMatch(s,o.from,o.to),u.push(Te.announce.of(s.phrase("replaced match on line $",s.doc.lineAt(i).number)+".")));let f=t.state.changes(l);return o&&(a=le.single(o.from,o.to).map(f),u.push(Zc(t,o)),u.push(s.facet(Mr).scrollToMatch(a.main,t))),t.dispatch({changes:f,selection:a,effects:u,userEvent:"input.replace"}),!0}),S8=Ho((t,{query:e})=>{if(t.state.readOnly)return!1;let s=e.matchAll(t.state,1e9).map(n=>{let{from:r,to:o}=n;return{from:r,to:o,insert:e.getReplacement(n)}});if(!s.length)return!1;let i=t.state.phrase("replaced $ matches",s.length)+".";return t.dispatch({changes:s,effects:Te.announce.of(i),userEvent:"input.replace.all"}),!0});function Qc(t){return t.state.facet(Mr).createPanel(t)}function Yd(t,e){var s,i,n,r,o;let l=t.selection.main,a=l.empty||l.to>l.from+100?"":t.sliceDoc(l.from,l.to);if(e&&!a)return e;let d=t.facet(Mr);return new Vy({search:((s=e?.literal)!==null&&s!==void 0?s:d.literal)?a:a.replace(/\n/g,"\\n"),caseSensitive:(i=e?.caseSensitive)!==null&&i!==void 0?i:d.caseSensitive,literal:(n=e?.literal)!==null&&n!==void 0?n:d.literal,regexp:(r=e?.regexp)!==null&&r!==void 0?r:d.regexp,wholeWord:(o=e?.wholeWord)!==null&&o!==void 0?o:d.wholeWord})}function Dy(t){let e=_o(t,Qc);return e&&e.dom.querySelector("[main-field]")}function Ty(t){let e=Dy(t);e&&e==t.root.activeElement&&e.select()}const $y=t=>{let e=t.state.field(Xi,!1);if(e&&e.panel){let s=Dy(t);if(s&&s!=t.root.activeElement){let i=Yd(t.state,e.query.spec);i.valid&&t.dispatch({effects:Do.of(i)}),s.focus(),s.select()}}else t.dispatch({effects:[Xc.of(!0),e?Do.of(Yd(t.state,e.query.spec)):He.appendConfig.of(M8)]});return!0},Ey=t=>{let e=t.state.field(Xi,!1);if(!e||!e.panel)return!1;let s=_o(t,Qc);return s&&s.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:Xc.of(!1)}),!0},C8=[{key:"Mod-f",run:$y,scope:"editor search-panel"},{key:"F3",run:ca,shift:ha,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:ca,shift:ha,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Ey,scope:"editor search-panel"},{key:"Mod-Shift-l",run:_8},{key:"Mod-Alt-g",run:s8},{key:"Mod-d",run:p8,preventDefault:!0}];class A8{constructor(e){this.view=e;let s=this.query=e.state.field(Xi).query.spec;this.commit=this.commit.bind(this),this.searchField=ct("input",{value:s.search,placeholder:ws(e,"Find"),"aria-label":ws(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=ct("input",{value:s.replace,placeholder:ws(e,"Replace"),"aria-label":ws(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=ct("input",{type:"checkbox",name:"case",form:"",checked:s.caseSensitive,onchange:this.commit}),this.reField=ct("input",{type:"checkbox",name:"re",form:"",checked:s.regexp,onchange:this.commit}),this.wordField=ct("input",{type:"checkbox",name:"word",form:"",checked:s.wholeWord,onchange:this.commit});function i(n,r,o){return ct("button",{class:"cm-button",name:n,onclick:r,type:"button"},o)}this.dom=ct("div",{onkeydown:n=>this.keydown(n),class:"cm-search"},[this.searchField,i("next",()=>ca(e),[ws(e,"next")]),i("prev",()=>ha(e),[ws(e,"previous")]),i("select",()=>w8(e),[ws(e,"all")]),ct("label",null,[this.caseField,ws(e,"match case")]),ct("label",null,[this.reField,ws(e,"regexp")]),ct("label",null,[this.wordField,ws(e,"by word")]),...e.state.readOnly?[]:[ct("br"),this.replaceField,i("replace",()=>Zp(e),[ws(e,"replace")]),i("replaceAll",()=>S8(e),[ws(e,"replace all")])],ct("button",{name:"close",onclick:()=>Ey(e),"aria-label":ws(e,"close"),type:"button"},[""])])}commit(){let e=new Vy({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Do.of(e)}))}keydown(e){M4(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?ha:ca)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),Zp(this.view))}update(e){for(let s of e.transactions)for(let i of s.effects)i.is(Do)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Mr).top}}function ws(t,e){return t.state.phrase(e)}const yl=30,bl=/[\s\.,:;?!]/;function Zc(t,{from:e,to:s}){let i=t.state.doc.lineAt(e),n=t.state.doc.lineAt(s).to,r=Math.max(i.from,e-yl),o=Math.min(n,s+yl),l=t.state.sliceDoc(r,o);if(r!=i.from){for(let a=0;a<yl;a++)if(!bl.test(l[a+1])&&bl.test(l[a])){l=l.slice(a);break}}if(o!=n){for(let a=l.length-1;a>l.length-yl;a--)if(!bl.test(l[a-1])&&bl.test(l[a])){l=l.slice(0,a);break}}return Te.announce.of(`${t.state.phrase("current match")}. ${l} ${t.state.phrase("on line")} ${i.number}.`)}const V8=Te.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),M8=[Xi,In.low(k8),V8];class Oy{constructor(e,s,i,n){this.state=e,this.pos=s,this.explicit=i,this.view=n,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let s=ts(this.state).resolveInner(this.pos,-1);for(;s&&e.indexOf(s.name)<0;)s=s.parent;return s?{from:s.from,to:this.pos,text:this.state.sliceDoc(s.from,this.pos),type:s.type}:null}matchBefore(e){let s=this.state.doc.lineAt(this.pos),i=Math.max(s.from,this.pos-250),n=s.text.slice(i-s.from,this.pos-s.from),r=n.search(Py(e,!1));return r<0?null:{from:i+r,to:this.pos,text:n.slice(r)}}get aborted(){return this.abortListeners==null}addEventListener(e,s,i){e=="abort"&&this.abortListeners&&(this.abortListeners.push(s),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function em(t){let e=Object.keys(t).join(""),s=/\w/.test(e);return s&&(e=e.replace(/\w/g,"")),`[${s?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function D8(t){let e=Object.create(null),s=Object.create(null);for(let{label:n}of t){e[n[0]]=!0;for(let r=1;r<n.length;r++)s[n[r]]=!0}let i=em(e)+em(s)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function T8(t){let e=t.map(n=>typeof n=="string"?{label:n}:n),[s,i]=e.every(n=>/^\w+$/.test(n.label))?[/\w*$/,/\w+$/]:D8(e);return n=>{let r=n.matchBefore(i);return r||n.explicit?{from:r?r.from:n.pos,options:e,validFor:s}:null}}class tm{constructor(e,s,i,n){this.completion=e,this.source=s,this.match=i,this.score=n}}function Tn(t){return t.selection.main.from}function Py(t,e){var s;let{source:i}=t,n=e&&i[0]!="^",r=i[i.length-1]!="$";return!n&&!r?t:new RegExp(`${n?"^":""}(?:${i})${r?"$":""}`,(s=t.flags)!==null&&s!==void 0?s:t.ignoreCase?"i":"")}const jy=Li.define();function $8(t,e,s,i){let{main:n}=t.selection,r=s-n.from,o=i-n.from;return{...t.changeByRange(l=>{if(l!=n&&s!=i&&t.sliceDoc(l.from+r,l.from+o)!=t.sliceDoc(s,i))return{range:l};let a=t.toText(e);return{changes:{from:l.from+r,to:i==n.from?l.to:l.from+o,insert:a},range:le.cursor(l.from+r+a.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}const sm=new WeakMap;function E8(t){if(!Array.isArray(t))return t;let e=sm.get(t);return e||sm.set(t,e=T8(t)),e}const fa=He.define(),To=He.define();class O8{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let s=0;s<e.length;){let i=gs(e,s),n=ui(i);this.chars.push(i);let r=e.slice(s,s+n),o=r.toUpperCase();this.folded.push(gs(o==r?r.toLowerCase():o,0)),s+=n}this.astral=e.length!=this.chars.length}ret(e,s){return this.score=e,this.matched=s,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:s,folded:i,any:n,precise:r,byWord:o}=this;if(s.length==1){let R=gs(e,0),P=ui(R),z=P==e.length?0:-100;if(R!=s[0])if(R==i[0])z+=-200;else return null;return this.ret(z,[0,P])}let l=e.indexOf(this.pattern);if(l==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let a=s.length,d=0;if(l<0){for(let R=0,P=Math.min(e.length,200);R<P&&d<a;){let z=gs(e,R);(z==s[d]||z==i[d])&&(n[d++]=R),R+=ui(z)}if(d<a)return null}let u=0,f=0,c=!1,p=0,k=-1,C=-1,A=/[a-z]/.test(e),V=!0;for(let R=0,P=Math.min(e.length,200),z=0;R<P&&f<a;){let H=gs(e,R);l<0&&(u<a&&H==s[u]&&(r[u++]=R),p<a&&(H==s[p]||H==i[p]?(p==0&&(k=R),C=R+1,p++):p=0));let B,M=H<255?H>=48&&H<=57||H>=97&&H<=122?2:H>=65&&H<=90?1:0:(B=kc(H))!=B.toLowerCase()?1:B!=B.toUpperCase()?2:0;(!R||M==1&&A||z==0&&M!=0)&&(s[f]==H||i[f]==H&&(c=!0)?o[f++]=R:o.length&&(V=!1)),z=M,R+=ui(H)}return f==a&&o[0]==0&&V?this.result(-100+(c?-200:0),o,e):p==a&&k==0?this.ret(-200-e.length+(C==e.length?0:-100),[0,C]):l>-1?this.ret(-700-e.length,[l,l+this.pattern.length]):p==a?this.ret(-900-e.length,[k,C]):f==a?this.result(-100+(c?-200:0)+-700+(V?0:-1100),o,e):s.length==2?null:this.result((n[0]?-700:0)+-200+-1100,n,e)}result(e,s,i){let n=[],r=0;for(let o of s){let l=o+(this.astral?ui(gs(i,o)):1);r&&n[r-1]==o?n[r-1]=l:(n[r++]=o,n[r++]=l)}return this.ret(e-i.length,n)}}class P8{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let s=e.slice(0,this.pattern.length),i=s==this.pattern?0:s.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,s.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const Lt=$e.define({combine(t){return gi(t,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:j8,filterStrict:!1,compareCompletions:(e,s)=>e.label.localeCompare(s.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,s)=>e&&s,closeOnBlur:(e,s)=>e&&s,icons:(e,s)=>e&&s,tooltipClass:(e,s)=>i=>im(e(i),s(i)),optionClass:(e,s)=>i=>im(e(i),s(i)),addToOptions:(e,s)=>e.concat(s),filterStrict:(e,s)=>e||s})}});function im(t,e){return t?e?t+" "+e:t:e}function j8(t,e,s,i,n,r){let o=t.textDirection==gt.RTL,l=o,a=!1,d="top",u,f,c=e.left-n.left,p=n.right-e.right,k=i.right-i.left,C=i.bottom-i.top;if(l&&c<Math.min(k,p)?l=!1:!l&&p<Math.min(k,c)&&(l=!0),k<=(l?c:p))u=Math.max(n.top,Math.min(s.top,n.bottom-C))-e.top,f=Math.min(400,l?c:p);else{a=!0,f=Math.min(400,(o?e.right:n.right-e.left)-30);let R=n.bottom-e.bottom;R>=C||R>e.top?u=s.bottom-e.top:(d="bottom",u=e.bottom-s.top)}let A=(e.bottom-e.top)/r.offsetHeight,V=(e.right-e.left)/r.offsetWidth;return{style:`${d}: ${u/A}px; max-width: ${f/V}px`,class:"cm-completionInfo-"+(a?o?"left-narrow":"right-narrow":l?"left":"right")}}function R8(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(s){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),s.type&&i.classList.add(...s.type.split(/\s+/g).map(n=>"cm-completionIcon-"+n)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(s,i,n,r){let o=document.createElement("span");o.className="cm-completionLabel";let l=s.displayLabel||s.label,a=0;for(let d=0;d<r.length;){let u=r[d++],f=r[d++];u>a&&o.appendChild(document.createTextNode(l.slice(a,u)));let c=o.appendChild(document.createElement("span"));c.appendChild(document.createTextNode(l.slice(u,f))),c.className="cm-completionMatchedText",a=f}return a<l.length&&o.appendChild(document.createTextNode(l.slice(a))),o},position:50},{render(s){if(!s.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=s.detail,i},position:80}),e.sort((s,i)=>s.position-i.position).map(s=>s.render)}function Ou(t,e,s){if(t<=s)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let n=Math.floor(e/s);return{from:n*s,to:(n+1)*s}}let i=Math.floor((t-e)/s);return{from:t-(i+1)*s,to:t-i*s}}class L8{constructor(e,s,i){this.view=e,this.stateField=s,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:a=>this.placeInfo(a),key:this},this.space=null,this.currentClass="";let n=e.state.field(s),{options:r,selected:o}=n.open,l=e.state.facet(Lt);this.optionContent=R8(l),this.optionClass=l.optionClass,this.tooltipClass=l.tooltipClass,this.range=Ou(r.length,o,l.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",a=>{let{options:d}=e.state.field(s).open;for(let u=a.target,f;u&&u!=this.dom;u=u.parentNode)if(u.nodeName=="LI"&&(f=/-(\d+)$/.exec(u.id))&&+f[1]<d.length){this.applyCompletion(e,d[+f[1]]),a.preventDefault();return}}),this.dom.addEventListener("focusout",a=>{let d=e.state.field(this.stateField,!1);d&&d.tooltip&&e.state.facet(Lt).closeOnBlur&&a.relatedTarget!=e.contentDOM&&e.dispatch({effects:To.of(null)})}),this.showOptions(r,n.id)}mount(){this.updateSel()}showOptions(e,s){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,s,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var s;let i=e.state.field(this.stateField),n=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=n){let{options:r,selected:o,disabled:l}=i.open;(!n.open||n.open.options!=r)&&(this.range=Ou(r.length,o,e.state.facet(Lt).maxRenderedOptions),this.showOptions(r,i.id)),this.updateSel(),l!=((s=n.open)===null||s===void 0?void 0:s.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!l)}}updateTooltipClass(e){let s=this.tooltipClass(e);if(s!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of s.split(" "))i&&this.dom.classList.add(i);this.currentClass=s}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),s=e.open;(s.selected>-1&&s.selected<this.range.from||s.selected>=this.range.to)&&(this.range=Ou(s.options.length,s.selected,this.view.state.facet(Lt).maxRenderedOptions),this.showOptions(s.options,e.id));let i=this.updateSelectedOption(s.selected);if(i){this.destroyInfo();let{completion:n}=s.options[s.selected],{info:r}=n;if(!r)return;let o=typeof r=="string"?document.createTextNode(r):r(n);if(!o)return;"then"in o?o.then(l=>{l&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(l,n)}).catch(l=>ys(this.view.state,l,"completion info")):(this.addInfoPane(o,n),i.setAttribute("aria-describedby",this.info.id))}}addInfoPane(e,s){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",i.id="cm-completionInfo-"+Math.floor(Math.random()*65535).toString(16),e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:n,destroy:r}=e;i.appendChild(n),this.infoDestroy=r||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let s=null;for(let i=this.list.firstChild,n=this.range.from;i;i=i.nextSibling,n++)i.nodeName!="LI"||!i.id?n--:n==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),s=i):i.hasAttribute("aria-selected")&&(i.removeAttribute("aria-selected"),i.removeAttribute("aria-describedby"));return s&&I8(this.list,s),s}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let s=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),n=e.getBoundingClientRect(),r=this.space;if(!r){let o=this.dom.ownerDocument.documentElement;r={left:0,top:0,right:o.clientWidth,bottom:o.clientHeight}}return n.top>Math.min(r.bottom,s.bottom)-10||n.bottom<Math.max(r.top,s.top)+10?null:this.view.state.facet(Lt).positionInfo(this.view,s,n,i,r,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,s,i){const n=document.createElement("ul");n.id=s,n.setAttribute("role","listbox"),n.setAttribute("aria-expanded","true"),n.setAttribute("aria-label",this.view.state.phrase("Completions")),n.addEventListener("mousedown",o=>{o.target==n&&o.preventDefault()});let r=null;for(let o=i.from;o<i.to;o++){let{completion:l,match:a}=e[o],{section:d}=l;if(d){let c=typeof d=="string"?d:d.name;if(c!=r&&(o>i.from||i.from==0))if(r=c,typeof d!="string"&&d.header)n.appendChild(d.header(d));else{let p=n.appendChild(document.createElement("completion-section"));p.textContent=c}}const u=n.appendChild(document.createElement("li"));u.id=s+"-"+o,u.setAttribute("role","option");let f=this.optionClass(l);f&&(u.className=f);for(let c of this.optionContent){let p=c(l,this.view.state,this.view,a);p&&u.appendChild(p)}}return i.from&&n.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&n.classList.add("cm-completionListIncompleteBottom"),n}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function B8(t,e){return s=>new L8(s,t,e)}function I8(t,e){let s=t.getBoundingClientRect(),i=e.getBoundingClientRect(),n=s.height/t.offsetHeight;i.top<s.top?t.scrollTop-=(s.top-i.top)/n:i.bottom>s.bottom&&(t.scrollTop+=(i.bottom-s.bottom)/n)}function nm(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function N8(t,e){let s=[],i=null,n=null,r=u=>{s.push(u);let{section:f}=u.completion;if(f){i||(i=[]);let c=typeof f=="string"?f:f.name;i.some(p=>p.name==c)||i.push(typeof f=="string"?{name:c}:f)}},o=e.facet(Lt);for(let u of t)if(u.hasResult()){let f=u.result.getMatch;if(u.result.filter===!1)for(let c of u.result.options)r(new tm(c,u.source,f?f(c):[],1e9-s.length));else{let c=e.sliceDoc(u.from,u.to),p,k=o.filterStrict?new P8(c):new O8(c);for(let C of u.result.options)if(p=k.match(C.label)){let A=C.displayLabel?f?f(C,p.matched):[]:p.matched,V=p.score+(C.boost||0);if(r(new tm(C,u.source,A,V)),typeof C.section=="object"&&C.section.rank==="dynamic"){let{name:R}=C.section;n||(n=Object.create(null)),n[R]=Math.max(V,n[R]||-1e9)}}}}if(i){let u=Object.create(null),f=0,c=(p,k)=>(p.rank==="dynamic"&&k.rank==="dynamic"?n[k.name]-n[p.name]:0)||(typeof p.rank=="number"?p.rank:1e9)-(typeof k.rank=="number"?k.rank:1e9)||(p.name<k.name?-1:1);for(let p of i.sort(c))f-=1e5,u[p.name]=f;for(let p of s){let{section:k}=p.completion;k&&(p.score+=u[typeof k=="string"?k:k.name])}}let l=[],a=null,d=o.compareCompletions;for(let u of s.sort((f,c)=>c.score-f.score||d(f.completion,c.completion))){let f=u.completion;!a||a.label!=f.label||a.detail!=f.detail||a.type!=null&&f.type!=null&&a.type!=f.type||a.apply!=f.apply||a.boost!=f.boost?l.push(u):nm(u.completion)>nm(a)&&(l[l.length-1]=u),a=u.completion}return l}class Yn{constructor(e,s,i,n,r,o){this.options=e,this.attrs=s,this.tooltip=i,this.timestamp=n,this.selected=r,this.disabled=o}setSelected(e,s){return e==this.selected||e>=this.options.length?this:new Yn(this.options,rm(s,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,s,i,n,r,o){if(n&&!o&&e.some(d=>d.isPending))return n.setDisabled();let l=N8(e,s);if(!l.length)return n&&e.some(d=>d.isPending)?n.setDisabled():null;let a=s.facet(Lt).selectOnOpen?0:-1;if(n&&n.selected!=a&&n.selected!=-1){let d=n.options[n.selected].completion;for(let u=0;u<l.length;u++)if(l[u].completion==d){a=u;break}}return new Yn(l,rm(i,a),{pos:e.reduce((d,u)=>u.hasResult()?Math.min(d,u.from):d,1e8),create:q8,above:r.aboveCursor},n?n.timestamp:Date.now(),a,!1)}map(e){return new Yn(this.options,this.attrs,{...this.tooltip,pos:e.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new Yn(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class pa{constructor(e,s,i){this.active=e,this.id=s,this.open=i}static start(){return new pa(H8,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:s}=e,i=s.facet(Lt),r=(i.override||s.languageDataAt("autocomplete",Tn(s)).map(E8)).map(a=>(this.active.find(u=>u.source==a)||new Ps(a,this.active.some(u=>u.state!=0)?1:0)).update(e,i));r.length==this.active.length&&r.every((a,d)=>a==this.active[d])&&(r=this.active);let o=this.open,l=e.effects.some(a=>a.is(eh));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||r.some(a=>a.hasResult()&&e.changes.touchesRange(a.from,a.to))||!U8(r,this.active)||l?o=Yn.build(r,s,this.id,o,i,l):o&&o.disabled&&!r.some(a=>a.isPending)&&(o=null),!o&&r.every(a=>!a.isPending)&&r.some(a=>a.hasResult())&&(r=r.map(a=>a.hasResult()?new Ps(a.source,0):a));for(let a of e.effects)a.is(Ly)&&(o=o&&o.setSelected(a.value,this.id));return r==this.active&&o==this.open?this:new pa(r,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?z8:F8}}function U8(t,e){if(t==e)return!0;for(let s=0,i=0;;){for(;s<t.length&&!t[s].hasResult();)s++;for(;i<e.length&&!e[i].hasResult();)i++;let n=s==t.length,r=i==e.length;if(n||r)return n==r;if(t[s++].result!=e[i++].result)return!1}}const z8={"aria-autocomplete":"list"},F8={};function rm(t,e){let s={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(s["aria-activedescendant"]=t+"-"+e),s}const H8=[];function Ry(t,e){if(t.isUserEvent("input.complete")){let i=t.annotation(jy);if(i&&e.activateOnCompletion(i))return 12}let s=t.isUserEvent("input.type");return s&&e.activateOnTyping?5:s?1:t.isUserEvent("delete.backward")?2:t.selection?8:t.docChanged?16:0}class Ps{constructor(e,s,i=!1){this.source=e,this.state=s,this.explicit=i}hasResult(){return!1}get isPending(){return this.state==1}update(e,s){let i=Ry(e,s),n=this;(i&8||i&16&&this.touches(e))&&(n=new Ps(n.source,0)),i&4&&n.state==0&&(n=new Ps(this.source,1)),n=n.updateFor(e,i);for(let r of e.effects)if(r.is(fa))n=new Ps(n.source,1,r.value);else if(r.is(To))n=new Ps(n.source,0);else if(r.is(eh))for(let o of r.value)o.source==n.source&&(n=o);return n}updateFor(e,s){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(Tn(e.state))}}class ur extends Ps{constructor(e,s,i,n,r,o){super(e,3,s),this.limit=i,this.result=n,this.from=r,this.to=o}hasResult(){return!0}updateFor(e,s){var i;if(!(s&3))return this.map(e.changes);let n=this.result;n.map&&!e.changes.empty&&(n=n.map(n,e.changes));let r=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),l=Tn(e.state);if(l>o||!n||s&2&&(Tn(e.startState)==this.from||l<this.limit))return new Ps(this.source,s&4?1:0);let a=e.changes.mapPos(this.limit);return W8(n.validFor,e.state,r,o)?new ur(this.source,this.explicit,a,n,r,o):n.update&&(n=n.update(n,r,o,new Oy(e.state,l,!1)))?new ur(this.source,this.explicit,a,n,n.from,(i=n.to)!==null&&i!==void 0?i:Tn(e.state)):new Ps(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new ur(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new Ps(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function W8(t,e,s,i){if(!t)return!1;let n=e.sliceDoc(s,i);return typeof t=="function"?t(n,s,i,e):Py(t,!0).test(n)}const eh=He.define({map(t,e){return t.map(s=>s.map(e))}}),Ly=He.define(),vs=Wt.define({create(){return pa.start()},update(t,e){return t.update(e)},provide:t=>[Rc.from(t,e=>e.tooltip),Te.contentAttributes.from(t,e=>e.attrs)]});function th(t,e){const s=e.completion.apply||e.completion.label;let i=t.state.field(vs).active.find(n=>n.source==e.source);return i instanceof ur?(typeof s=="string"?t.dispatch({...$8(t.state,s,i.from,i.to),annotations:jy.of(e.completion)}):s(t,e.completion,i.from,i.to),!0):!1}const q8=B8(vs,th);function xl(t,e="option"){return s=>{let i=s.state.field(vs,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<s.state.facet(Lt).interactionDelay)return!1;let n=1,r;e=="page"&&(r=gv(s,i.open.tooltip))&&(n=Math.max(2,Math.floor(r.dom.offsetHeight/r.dom.querySelector("li").offsetHeight)-1));let{length:o}=i.open.options,l=i.open.selected>-1?i.open.selected+n*(t?1:-1):t?0:o-1;return l<0?l=e=="page"?0:o-1:l>=o&&(l=e=="page"?o-1:0),s.dispatch({effects:Ly.of(l)}),!0}}const K8=t=>{let e=t.state.field(vs,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(Lt).interactionDelay?!1:th(t,e.open.options[e.open.selected])},Pu=t=>t.state.field(vs,!1)?(t.dispatch({effects:fa.of(!0)}),!0):!1,G8=t=>{let e=t.state.field(vs,!1);return!e||!e.active.some(s=>s.state!=0)?!1:(t.dispatch({effects:To.of(null)}),!0)};class J8{constructor(e,s){this.active=e,this.context=s,this.time=Date.now(),this.updates=[],this.done=void 0}}const Y8=50,X8=1e3,Q8=$t.fromClass(class{constructor(t){this.view=t,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of t.state.field(vs).active)e.isPending&&this.startQuery(e)}update(t){let e=t.state.field(vs),s=t.state.facet(Lt);if(!t.selectionSet&&!t.docChanged&&t.startState.field(vs)==e)return;let i=t.transactions.some(r=>{let o=Ry(r,s);return o&8||(r.selection||r.docChanged)&&!(o&3)});for(let r=0;r<this.running.length;r++){let o=this.running[r];if(i||o.context.abortOnDocChange&&t.docChanged||o.updates.length+t.transactions.length>Y8&&Date.now()-o.time>X8){for(let l of o.context.abortListeners)try{l()}catch(a){ys(this.view.state,a)}o.context.abortListeners=null,this.running.splice(r--,1)}else o.updates.push(...t.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),t.transactions.some(r=>r.effects.some(o=>o.is(fa)))&&(this.pendingStart=!0);let n=this.pendingStart?50:s.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(r=>r.isPending&&!this.running.some(o=>o.active.source==r.source))?setTimeout(()=>this.startUpdate(),n):-1,this.composing!=0)for(let r of t.transactions)r.isUserEvent("input.type")?this.composing=2:this.composing==2&&r.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:t}=this.view,e=t.field(vs);for(let s of e.active)s.isPending&&!this.running.some(i=>i.active.source==s.source)&&this.startQuery(s);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Lt).updateSyncTime))}startQuery(t){let{state:e}=this.view,s=Tn(e),i=new Oy(e,s,t.explicit,this.view),n=new J8(t,i);this.running.push(n),Promise.resolve(t.source(i)).then(r=>{n.context.aborted||(n.done=r||null,this.scheduleAccept())},r=>{this.view.dispatch({effects:To.of(null)}),ys(this.view.state,r)})}scheduleAccept(){this.running.every(t=>t.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Lt).updateSyncTime))}accept(){var t;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],s=this.view.state.facet(Lt),i=this.view.state.field(vs);for(let n=0;n<this.running.length;n++){let r=this.running[n];if(r.done===void 0)continue;if(this.running.splice(n--,1),r.done){let l=Tn(r.updates.length?r.updates[0].startState:this.view.state),a=Math.min(l,r.done.from+(r.active.explicit?0:1)),d=new ur(r.active.source,r.active.explicit,a,r.done,r.done.from,(t=r.done.to)!==null&&t!==void 0?t:l);for(let u of r.updates)d=d.update(u,s);if(d.hasResult()){e.push(d);continue}}let o=i.active.find(l=>l.source==r.active.source);if(o&&o.isPending)if(r.done==null){let l=new Ps(r.active.source,0);for(let a of r.updates)l=l.update(a,s);l.isPending||e.push(l)}else this.startQuery(o)}(e.length||i.open&&i.open.disabled)&&this.view.dispatch({effects:eh.of(e)})}},{eventHandlers:{blur(t){let e=this.view.state.field(vs,!1);if(e&&e.tooltip&&this.view.state.facet(Lt).closeOnBlur){let s=e.open&&gv(this.view,e.open.tooltip);(!s||!s.dom.contains(t.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:To.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:fa.of(!1)}),20),this.composing=0}}}),Z8=typeof navigator=="object"&&/Win/.test(navigator.platform),eV=In.highest(Te.domEventHandlers({keydown(t,e){let s=e.state.field(vs,!1);if(!s||!s.open||s.open.disabled||s.open.selected<0||t.key.length>1||t.ctrlKey&&!(Z8&&t.altKey)||t.metaKey)return!1;let i=s.open.options[s.open.selected],n=s.active.find(o=>o.source==i.source),r=i.completion.commitCharacters||n.result.commitCharacters;return r&&r.indexOf(t.key)>-1&&th(e,i),!1}})),tV=Te.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),$o={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},An=He.define({map(t,e){let s=e.mapPos(t,-1,cs.TrackAfter);return s??void 0}}),sh=new class extends En{};sh.startSide=1;sh.endSide=-1;const By=Wt.define({create(){return Ze.empty},update(t,e){if(t=t.map(e.changes),e.selection){let s=e.state.doc.lineAt(e.selection.main.head);t=t.update({filter:i=>i>=s.from&&i<=s.to})}for(let s of e.effects)s.is(An)&&(t=t.update({add:[sh.range(s.value,s.value+1)]}));return t}});function sV(){return[nV,By]}const ju="()[]{}<>";function Iy(t){for(let e=0;e<ju.length;e+=2)if(ju.charCodeAt(e)==t)return ju.charAt(e+1);return kc(t<128?t:t+1)}function Ny(t,e){return t.languageDataAt("closeBrackets",e)[0]||$o}const iV=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),nV=Te.inputHandler.of((t,e,s,i)=>{if((iV?t.composing:t.compositionStarted)||t.state.readOnly)return!1;let n=t.state.selection.main;if(i.length>2||i.length==2&&ui(gs(i,0))==1||e!=n.from||s!=n.to)return!1;let r=lV(t.state,i);return r?(t.dispatch(r),!0):!1}),rV=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let i=Ny(t,t.selection.main.head).brackets||$o.brackets,n=null,r=t.changeByRange(o=>{if(o.empty){let l=aV(t.doc,o.head);for(let a of i)if(a==l&&Ha(t.doc,o.head)==Iy(gs(a,0)))return{changes:{from:o.head-a.length,to:o.head+a.length},range:le.cursor(o.head-a.length)}}return{range:n=o}});return n||e(t.update(r,{scrollIntoView:!0,userEvent:"delete.backward"})),!n},oV=[{key:"Backspace",run:rV}];function lV(t,e){let s=Ny(t,t.selection.main.head),i=s.brackets||$o.brackets;for(let n of i){let r=Iy(gs(n,0));if(e==n)return r==n?cV(t,n,i.indexOf(n+n+n)>-1,s):uV(t,n,r,s.before||$o.before);if(e==r&&Uy(t,t.selection.main.from))return dV(t,n,r)}return null}function Uy(t,e){let s=!1;return t.field(By).between(0,t.doc.length,i=>{i==e&&(s=!0)}),s}function Ha(t,e){let s=t.sliceString(e,e+2);return s.slice(0,ui(gs(s,0)))}function aV(t,e){let s=t.sliceString(e-2,e);return ui(gs(s,0))==s.length?s:s.slice(1)}function uV(t,e,s,i){let n=null,r=t.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:s,from:o.to}],effects:An.of(o.to+e.length),range:le.range(o.anchor+e.length,o.head+e.length)};let l=Ha(t.doc,o.head);return!l||/\s/.test(l)||i.indexOf(l)>-1?{changes:{insert:e+s,from:o.head},effects:An.of(o.head+e.length),range:le.cursor(o.head+e.length)}:{range:n=o}});return n?null:t.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function dV(t,e,s){let i=null,n=t.changeByRange(r=>r.empty&&Ha(t.doc,r.head)==s?{changes:{from:r.head,to:r.head+s.length,insert:s},range:le.cursor(r.head+s.length)}:i={range:r});return i?null:t.update(n,{scrollIntoView:!0,userEvent:"input.type"})}function cV(t,e,s,i){let n=i.stringPrefixes||$o.stringPrefixes,r=null,o=t.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:e,from:l.to}],effects:An.of(l.to+e.length),range:le.range(l.anchor+e.length,l.head+e.length)};let a=l.head,d=Ha(t.doc,a),u;if(d==e){if(om(t,a))return{changes:{insert:e+e,from:a},effects:An.of(a+e.length),range:le.cursor(a+e.length)};if(Uy(t,a)){let c=s&&t.sliceDoc(a,a+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:a,to:a+c.length,insert:c},range:le.cursor(a+c.length)}}}else{if(s&&t.sliceDoc(a-2*e.length,a)==e+e&&(u=lm(t,a-2*e.length,n))>-1&&om(t,u))return{changes:{insert:e+e+e+e,from:a},effects:An.of(a+e.length),range:le.cursor(a+e.length)};if(t.charCategorizer(a)(d)!=kt.Word&&lm(t,a,n)>-1&&!hV(t,a,e,n))return{changes:{insert:e+e,from:a},effects:An.of(a+e.length),range:le.cursor(a+e.length)}}return{range:r=l}});return r?null:t.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function om(t,e){let s=ts(t).resolveInner(e+1);return s.parent&&s.from==e}function hV(t,e,s,i){let n=ts(t).resolveInner(e,-1),r=i.reduce((o,l)=>Math.max(o,l.length),0);for(let o=0;o<5;o++){let l=t.sliceDoc(n.from,Math.min(n.to,n.from+s.length+r)),a=l.indexOf(s);if(!a||a>-1&&i.indexOf(l.slice(0,a))>-1){let u=n.firstChild;for(;u&&u.from==n.from&&u.to-u.from>s.length+a;){if(t.sliceDoc(u.to-s.length,u.to)==s)return!1;u=u.firstChild}return!0}let d=n.to==e&&n.parent;if(!d)break;n=d}return!1}function lm(t,e,s){let i=t.charCategorizer(e);if(i(t.sliceDoc(e-1,e))!=kt.Word)return e;for(let n of s){let r=e-n.length;if(t.sliceDoc(r,e)==n&&i(t.sliceDoc(r-1,r))!=kt.Word)return r}return-1}function fV(t={}){return[eV,vs,Lt.of(t),Q8,pV,tV]}const zy=[{key:"Ctrl-Space",run:Pu},{mac:"Alt-`",run:Pu},{mac:"Alt-i",run:Pu},{key:"Escape",run:G8},{key:"ArrowDown",run:xl(!0)},{key:"ArrowUp",run:xl(!1)},{key:"PageDown",run:xl(!0,"page")},{key:"PageUp",run:xl(!1,"page")},{key:"Enter",run:K8}],pV=In.highest(Pc.computeN([Lt],t=>t.facet(Lt).defaultKeymap?[zy]:[]));class am{constructor(e,s,i){this.from=e,this.to=s,this.diagnostic=i}}class kn{constructor(e,s,i){this.diagnostics=e,this.panel=s,this.selected=i}static init(e,s,i){let n=i.facet(Eo).markerFilter;n&&(e=n(e,i));let r=e.slice().sort((p,k)=>p.from-k.from||p.to-k.to),o=new Oi,l=[],a=0,d=i.doc.iter(),u=0,f=i.doc.length;for(let p=0;;){let k=p==r.length?null:r[p];if(!k&&!l.length)break;let C,A;if(l.length)C=a,A=l.reduce((P,z)=>Math.min(P,z.to),k&&k.from>C?k.from:1e8);else{if(C=k.from,C>f)break;A=k.to,l.push(k),p++}for(;p<r.length;){let P=r[p];if(P.from==C&&(P.to>P.from||P.to==C))l.push(P),p++,A=Math.min(P.to,A);else{A=Math.min(P.from,A);break}}A=Math.min(A,f);let V=!1;if(l.some(P=>P.from==C&&(P.to==A||A==f))&&(V=C==A,!V&&A-C<10)){let P=C-(u+d.value.length);P>0&&(d.next(P),u=C);for(let z=C;;){if(z>=A){V=!0;break}if(!d.lineBreak&&u+d.value.length>z)break;z=u+d.value.length,u+=d.value.length,d.next()}}let R=VV(l);if(V)o.add(C,C,Ne.widget({widget:new _V(R),diagnostics:l.slice()}));else{let P=l.reduce((z,H)=>H.markClass?z+" "+H.markClass:z,"");o.add(C,A,Ne.mark({class:"cm-lintRange cm-lintRange-"+R+P,diagnostics:l.slice(),inclusiveEnd:l.some(z=>z.to>A)}))}if(a=A,a==f)break;for(let P=0;P<l.length;P++)l[P].to<=a&&l.splice(P--,1)}let c=o.finish();return new kn(c,s,kr(c))}}function kr(t,e=null,s=0){let i=null;return t.between(s,1e9,(n,r,{spec:o})=>{if(!(e&&o.diagnostics.indexOf(e)<0))if(!i)i=new am(n,r,e||o.diagnostics[0]);else{if(o.diagnostics.indexOf(i.diagnostic)<0)return!1;i=new am(i.from,r,i.diagnostic)}}),i}function mV(t,e){let s=e.pos,i=e.end||s,n=t.state.facet(Eo).hideOn(t,s,i);if(n!=null)return n;let r=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(o=>o.is(Fy))||t.changes.touchesRange(r.from,Math.max(r.to,i)))}function gV(t,e){return t.field(Cs,!1)?e:e.concat(He.appendConfig.of(MV))}const Fy=He.define(),ih=He.define(),Hy=He.define(),Cs=Wt.define({create(){return new kn(Ne.none,null,null)},update(t,e){if(e.docChanged&&t.diagnostics.size){let s=t.diagnostics.map(e.changes),i=null,n=t.panel;if(t.selected){let r=e.changes.mapPos(t.selected.from,1);i=kr(s,t.selected.diagnostic,r)||kr(s,null,r)}!s.size&&n&&e.state.facet(Eo).autoPanel&&(n=null),t=new kn(s,n,i)}for(let s of e.effects)if(s.is(Fy)){let i=e.state.facet(Eo).autoPanel?s.value.length?Oo.open:null:t.panel;t=kn.init(s.value,i,e.state)}else s.is(ih)?t=new kn(t.diagnostics,s.value?Oo.open:null,t.selected):s.is(Hy)&&(t=new kn(t.diagnostics,t.panel,s.value));return t},provide:t=>[So.from(t,e=>e.panel),Te.decorations.from(t,e=>e.diagnostics)]}),vV=Ne.mark({class:"cm-lintRange cm-lintRange-active"});function yV(t,e,s){let{diagnostics:i}=t.state.field(Cs),n,r=-1,o=-1;i.between(e-(s<0?1:0),e+(s>0?1:0),(a,d,{spec:u})=>{if(e>=a&&e<=d&&(a==d||(e>a||s>0)&&(e<d||s<0)))return n=u.diagnostics,r=a,o=d,!1});let l=t.state.facet(Eo).tooltipFilter;return n&&l&&(n=l(n,t.state)),n?{pos:r,end:o,above:t.state.doc.lineAt(r).to<o,create(){return{dom:bV(t,n)}}}:null}function bV(t,e){return ct("ul",{class:"cm-tooltip-lint"},e.map(s=>qy(t,s,!1)))}const xV=t=>{let e=t.state.field(Cs,!1);(!e||!e.panel)&&t.dispatch({effects:gV(t.state,[ih.of(!0)])});let s=_o(t,Oo.open);return s&&s.dom.querySelector(".cm-panel-lint ul").focus(),!0},um=t=>{let e=t.state.field(Cs,!1);return!e||!e.panel?!1:(t.dispatch({effects:ih.of(!1)}),!0)},kV=t=>{let e=t.state.field(Cs,!1);if(!e)return!1;let s=t.state.selection.main,i=e.diagnostics.iter(s.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==s.from&&i.to==s.to)?!1:(t.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},wV=[{key:"Mod-Shift-m",run:xV,preventDefault:!0},{key:"F8",run:kV}],Eo=$e.define({combine(t){return{sources:t.map(e=>e.source).filter(e=>e!=null),...gi(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:dm,tooltipFilter:dm,needsRefresh:(e,s)=>e?s?i=>e(i)||s(i):e:s,hideOn:(e,s)=>e?s?(i,n,r)=>e(i,n,r)||s(i,n,r):e:s,autoPanel:(e,s)=>e||s})}}});function dm(t,e){return t?e?(s,i)=>e(t(s,i),i):t:e}function Wy(t){let e=[];if(t)e:for(let{name:s}of t){for(let i=0;i<s.length;i++){let n=s[i];if(/[a-zA-Z]/.test(n)&&!e.some(r=>r.toLowerCase()==n.toLowerCase())){e.push(n);continue e}}e.push("")}return e}function qy(t,e,s){var i;let n=s?Wy(e.actions):[];return ct("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},ct("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(t):e.message),(i=e.actions)===null||i===void 0?void 0:i.map((r,o)=>{let l=!1,a=p=>{if(p.preventDefault(),l)return;l=!0;let k=kr(t.state.field(Cs).diagnostics,e);k&&r.apply(t,k.from,k.to)},{name:d}=r,u=n[o]?d.indexOf(n[o]):-1,f=u<0?d:[d.slice(0,u),ct("u",d.slice(u,u+1)),d.slice(u+1)],c=r.markClass?" "+r.markClass:"";return ct("button",{type:"button",class:"cm-diagnosticAction"+c,onclick:a,onmousedown:a,"aria-label":` Action: ${d}${u<0?"":` (access key "${n[o]})"`}.`},f)}),e.source&&ct("div",{class:"cm-diagnosticSource"},e.source))}class _V extends ln{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return ct("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class cm{constructor(e,s){this.diagnostic=s,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=qy(e,s,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Oo{constructor(e){this.view=e,this.items=[];let s=n=>{if(n.keyCode==27)um(this.view),this.view.focus();else if(n.keyCode==38||n.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(n.keyCode==40||n.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(n.keyCode==36)this.moveSelection(0);else if(n.keyCode==35)this.moveSelection(this.items.length-1);else if(n.keyCode==13)this.view.focus();else if(n.keyCode>=65&&n.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:r}=this.items[this.selectedIndex],o=Wy(r.actions);for(let l=0;l<o.length;l++)if(o[l].toUpperCase().charCodeAt(0)==n.keyCode){let a=kr(this.view.state.field(Cs).diagnostics,r);a&&r.actions[l].apply(e,a.from,a.to)}}else return;n.preventDefault()},i=n=>{for(let r=0;r<this.items.length;r++)this.items[r].dom.contains(n.target)&&this.moveSelection(r)};this.list=ct("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:s,onclick:i}),this.dom=ct("div",{class:"cm-panel-lint"},this.list,ct("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>um(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(Cs).selected;if(!e)return-1;for(let s=0;s<this.items.length;s++)if(this.items[s].diagnostic==e.diagnostic)return s;return-1}update(){let{diagnostics:e,selected:s}=this.view.state.field(Cs),i=0,n=!1,r=null,o=new Set;for(e.between(0,this.view.state.doc.length,(l,a,{spec:d})=>{for(let u of d.diagnostics){if(o.has(u))continue;o.add(u);let f=-1,c;for(let p=i;p<this.items.length;p++)if(this.items[p].diagnostic==u){f=p;break}f<0?(c=new cm(this.view,u),this.items.splice(i,0,c),n=!0):(c=this.items[f],f>i&&(this.items.splice(i,f-i),n=!0)),s&&c.diagnostic==s.diagnostic?c.dom.hasAttribute("aria-selected")||(c.dom.setAttribute("aria-selected","true"),r=c):c.dom.hasAttribute("aria-selected")&&c.dom.removeAttribute("aria-selected"),i++}});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)n=!0,this.items.pop();this.items.length==0&&(this.items.push(new cm(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),n=!0),r?(this.list.setAttribute("aria-activedescendant",r.id),this.view.requestMeasure({key:this,read:()=>({sel:r.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:l,panel:a})=>{let d=a.height/this.list.offsetHeight;l.top<a.top?this.list.scrollTop-=(a.top-l.top)/d:l.bottom>a.bottom&&(this.list.scrollTop+=(l.bottom-a.bottom)/d)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),n&&this.sync()}sync(){let e=this.list.firstChild;function s(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)s();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)s()}moveSelection(e){if(this.selectedIndex<0)return;let s=this.view.state.field(Cs),i=kr(s.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:Hy.of(i)})}static open(e){return new Oo(e)}}function SV(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function kl(t){return SV(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const CV=Te.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:kl("#d11")},".cm-lintRange-warning":{backgroundImage:kl("orange")},".cm-lintRange-info":{backgroundImage:kl("#999")},".cm-lintRange-hint":{backgroundImage:kl("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function AV(t){return t=="error"?4:t=="warning"?3:t=="info"?2:1}function VV(t){let e="hint",s=1;for(let i of t){let n=AV(i.severity);n>s&&(s=n,e=i.severity)}return e}const MV=[Cs,Te.decorations.compute([Cs],t=>{let{selected:e,panel:s}=t.field(Cs);return!e||!s||e.from==e.to?Ne.none:Ne.set([vV.range(e.from,e.to)])}),p5(yV,{hideOn:mV}),CV],DV=[C5(),M5(),W4(),YA(),bA(),P4(),I4(),Qe.allowMultipleSelections.of(!0),rA(),Lv(_A,{fallback:!0}),TA(),sV(),fV(),i5(),o5(),X4(),o8(),Pc.of([...oV,...e8,...C8,...r3,...mA,...zy,...wV])],TV={class:"rounded-lg border border-gray-300 overflow-hidden dark:border-gray-600"},wn={__name:"CodeEditor",props:{modelValue:{type:String,default:""},language:{type:String,default:"r",validator:t=>["r","markdown","text","gitignore"].includes(t)},minHeight:{type:String,default:"400px"},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:""}},emits:["update:modelValue"],setup(t,{emit:e}){const s=t,i=e,n=ve(null);let r=null;const o=Hc.define({token(d){return d.sol()&&d.match(/^#/)?(d.skipToEnd(),"comment"):(d.skipToEnd(),null)}}),l=Lv(zo.define([{tag:Se.comment,color:"#16a34a"}])),a=()=>[o,l];return es(()=>{if(!n.value)return;const d=Te.updateListener.of(c=>{c.docChanged&&i("update:modelValue",c.state.doc.toString())}),u=[DV,a(),d,Te.lineWrapping,Te.theme({"&":{minHeight:s.minHeight,fontSize:"13px",fontFamily:'ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, "Liberation Mono", monospace'},".cm-scroller":{fontFamily:'ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, "Liberation Mono", monospace'},".cm-content":{padding:"12px 0"},".cm-line":{padding:"0 12px"}})],f=Qe.create({doc:s.modelValue||"",extensions:u});r=new Te({state:f,parent:n.value})}),Ye(()=>s.modelValue,d=>{r&&d!==r.state.doc.toString()&&r.dispatch({changes:{from:0,to:r.state.doc.length,insert:d}})}),(d,u)=>(g(),y("div",TV,[h("div",{ref_key:"editorRef",ref:n},null,512)]))}},$V={class:"relative"},EV={key:0,class:"absolute z-10 mt-1 w-full max-h-64 overflow-y-auto border border-gray-200 dark:border-gray-700 rounded-md bg-white dark:bg-gray-800 shadow-lg"},OV=["onClick","onMouseenter"],PV={class:"flex items-center justify-between gap-3"},jV={class:"flex-1 min-w-0"},RV={class:"font-medium text-gray-900 dark:text-white"},LV={class:"text-xs text-gray-500 dark:text-gray-400 truncate"},BV={class:"ml-3 text-xs text-gray-400 dark:text-gray-500 shrink-0 flex items-center gap-1.5"},IV={class:"text-[10px] font-medium"},NV={key:1,class:"absolute right-3 top-9 text-gray-400"},nh={__name:"PackageAutocomplete",props:{modelValue:{type:String,default:""},label:{type:String,default:"Search Packages"},placeholder:{type:String,default:"Type to search..."},source:{type:String,default:"cran",validator:t=>["cran","bioconductor","github"].includes(t)}},emits:["update:modelValue","select"],setup(t,{emit:e}){const s=t,i=e,n=oe({get:()=>s.modelValue,set:c=>i("update:modelValue",c)}),r=ve([]),o=ve(!1),l=ve(-1);let a=null;Ye(n,c=>{if(a&&clearTimeout(a),c.length<2){r.value=[],l.value=-1;return}a=setTimeout(()=>{d(c)},300)});const d=async c=>{o.value=!0;try{const k=await(await fetch(`/api/packages/search?q=${encodeURIComponent(c)}&source=${encodeURIComponent(s.source)}`)).json();r.value=k.packages||[],l.value=r.value.length>0?0:-1}catch(p){console.error("Failed to search packages:",p),r.value=[],l.value=-1}finally{o.value=!1}},u=c=>{r.value.length!==0&&(c.key==="ArrowDown"?(c.preventDefault(),l.value=Math.min(l.value+1,r.value.length-1)):c.key==="ArrowUp"?(c.preventDefault(),l.value=Math.max(l.value-1,0)):c.key==="Enter"&&l.value>=0?(c.preventDefault(),f(r.value[l.value])):c.key==="Escape"&&(r.value=[],l.value=-1))},f=c=>{i("update:modelValue",c.name),i("select",c),r.value=[],l.value=-1};return(c,p)=>(g(),y("div",$V,[x(q,{modelValue:n.value,"onUpdate:modelValue":p[0]||(p[0]=k=>n.value=k),label:t.label,placeholder:t.placeholder,onKeydown:u},null,8,["modelValue","label","placeholder"]),r.value.length>0?(g(),y("div",EV,[(g(!0),y(Q,null,xe(r.value,(k,C)=>(g(),y("button",{key:k.name,onClick:A=>f(k),onMouseenter:A=>l.value=C,class:De(["w-full px-3 py-2 text-left border-b border-gray-200 dark:border-gray-700 last:border-b-0 transition",l.value===C?"bg-sky-50 dark:bg-sky-900/20":"hover:bg-gray-50 dark:hover:bg-gray-700"])},[h("div",PV,[h("div",jV,[h("div",RV,U(k.name),1),h("div",LV,U(k.title),1)]),h("div",BV,[h("span",IV,U(k.source==="cran"?"CRAN":k.source==="bioconductor"?"Bioconductor":k.source),1),p[1]||(p[1]=h("span",null,"",-1)),h("span",null,"v"+U(k.version),1)])])],42,OV))),128))])):I("",!0),o.value?(g(),y("div",NV,[...p[2]||(p[2]=[h("svg",{class:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[h("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),h("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):I("",!0)]))}},UV={class:"flex items-center justify-between"},zV={class:"flex-1"},FV={class:"text-xs text-gray-500 dark:text-gray-400 mb-1"},HV={class:"text-sm text-gray-900 dark:text-white"},Es={__name:"OverviewCard",props:{title:{type:String,required:!0}},emits:["click"],setup(t){return(e,s)=>(g(),y("button",{onClick:s[0]||(s[0]=i=>e.$emit("click")),class:"w-full text-left px-4 py-3 rounded-md bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 hover:border-sky-300 dark:hover:border-sky-700 transition"},[h("div",UV,[h("div",zV,[h("div",FV,U(t.title),1),h("div",HV,[vt(e.$slots,"default")])]),s[1]||(s[1]=h("svg",{class:"h-5 w-5 text-gray-400 shrink-0 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))])]))}},WV={class:"pt-4 pb-2"},qV={class:"px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider dark:text-gray-400"},ma={__name:"NavigationSectionHeading",setup(t){return(e,s)=>(g(),y("div",WV,[h("h3",qV,[vt(e.$slots,"default")])]))}},KV={class:"flex min-h-screen"},GV={class:"w-64 shrink-0 border-r border-gray-200 p-6 dark:border-gray-800"},JV={class:"space-y-1 mb-6"},YV=["onClick"],XV={key:1,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},QV=["d"],ZV={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},e6={class:"flex-1 p-10"},t6={class:"mt-8 space-y-6"},s6={class:"space-y-3"},i6={class:"text-gray-600 dark:text-gray-400"},n6={class:"text-gray-600 dark:text-gray-400"},r6={class:"text-gray-600 dark:text-gray-400"},o6={class:"text-gray-600 dark:text-gray-400"},l6={class:"text-gray-600 dark:text-gray-400"},a6={class:"text-gray-600 dark:text-gray-400"},u6={class:"text-gray-600 dark:text-gray-400"},d6={class:"text-gray-600 dark:text-gray-400"},c6={class:"text-gray-600 dark:text-gray-400"},h6={class:"text-gray-600 dark:text-gray-400"},f6={key:1,class:"text-gray-600 dark:text-gray-400"},p6={key:2,class:"text-gray-600 dark:text-gray-400"},m6={class:"text-gray-600 dark:text-gray-400"},g6={class:"text-gray-600 dark:text-gray-400"},v6={class:"text-gray-600 dark:text-gray-400"},y6={class:"text-gray-600 dark:text-gray-400"},b6={class:"text-gray-600 dark:text-gray-400"},x6={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},k6={class:"space-y-5"},w6={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},_6={class:"space-y-5"},S6={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},C6={class:"space-y-5"},A6={class:"space-y-6"},V6={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},M6={key:0,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},D6={key:1,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},T6={class:"space-y-3"},$6={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},E6={class:"grid grid-cols-2 gap-3"},O6={key:2,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},P6={class:"space-y-3"},j6={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},R6={class:"grid grid-cols-2 gap-3"},L6={key:3,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},B6={class:"space-y-3"},I6={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},N6={class:"grid grid-cols-2 gap-3"},U6={key:4,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},z6={class:"space-y-3"},F6={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},H6={class:"grid grid-cols-2 gap-3"},W6={key:5,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},q6={class:"space-y-3"},K6={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},G6={class:"grid grid-cols-2 gap-3"},J6={key:6,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},Y6={class:"space-y-3"},X6={key:7,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},Q6={class:"space-y-3"},Z6={key:8,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},eM={class:"space-y-3"},tM={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},sM={class:"grid grid-cols-2 gap-3"},iM={key:9,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},nM={class:"space-y-3"},rM={class:"flex items-start gap-3 mb-2"},oM={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},lM={class:"grid grid-cols-2 gap-3"},aM={key:10,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},uM={class:"space-y-4"},dM={class:"grid gap-4 sm:grid-cols-2"},cM={class:"p-3 rounded-md"},hM={class:"p-3 rounded-md"},fM={class:"grid gap-4 sm:grid-cols-2"},pM={class:"space-y-3"},mM={class:"space-y-3"},gM={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},vM={class:"grid gap-6 sm:grid-cols-2"},yM={class:"space-y-2"},bM={class:"space-y-2"},xM={key:11,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},kM={class:"space-y-4"},wM={class:"grid gap-4 sm:grid-cols-2"},_M={class:"p-3 rounded-md"},SM={class:"p-3 rounded-md"},CM={class:"grid gap-4 sm:grid-cols-2"},AM={class:"space-y-3"},VM={class:"space-y-3"},MM={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},DM={class:"grid gap-6 sm:grid-cols-2"},TM={class:"space-y-2"},$M={class:"space-y-2"},EM={key:12,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},OM={class:"space-y-3"},PM={class:"flex items-start gap-3 mb-2"},jM={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},RM={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},LM={class:"space-y-5"},BM={class:"pt-4 border-t border-gray-200 dark:border-gray-700"},IM={class:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between mb-4"},NM={key:0,class:"space-y-3"},UM={class:"flex flex-col gap-3"},zM={class:"grid gap-3 grid-cols-[1fr_160px]"},FM={class:"flex items-center justify-between"},HM={key:1,class:"text-xs text-gray-500 dark:text-gray-400"},WM={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},qM={class:"space-y-6"},KM={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},GM={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},JM={class:"space-y-2"},YM={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},XM={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},QM={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},ZM={class:"space-y-5"},eD={key:0,class:"pt-4 border-t border-gray-200 dark:border-gray-700 space-y-5"},tD={class:"space-y-4"},sD={__name:"NewProjectView",setup(t){const e=Ta(),s=Sr(),i=Ea(),n=ve(null),r=ve(null),o=ve(!0),l=[{id:"claude",label:"Claude Code",description:"Anthropic's IDE-focused assistant."},{id:"copilot",label:"GitHub Copilot",description:"Complements VS Code and JetBrains editors."},{id:"agents",label:"Multi-Agent (OpenAI Codex, Cursor, etc.)",description:"Shared instructions for multi-model orchestrators."}],a=[{id:"overview",label:"Overview",icon:$a},{id:"basics",label:"Basics",icon:bc},{id:"structure",label:"Project Structure",icon:Gl},{id:"packages",label:"Packages",icon:xc},{id:"ai",label:"AI Assistants",svgIcon:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"},{id:"git",label:"Git & Hooks",svgIcon:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"},{id:"scaffold",label:"Scaffold Behavior",svgIcon:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"}],d=ve("basics"),u=ve(!1),f=ve(null),c=ve({name:"",location:"",type:"project",author:{name:"",email:"",affiliation:""},scaffold:{seed_on_scaffold:!1,seed:"",set_theme_on_scaffold:!0,ggplot_theme:"theme_minimal",source_all_functions:!0,notebook_format:"quarto",ide:"vscode",positron:!1},packages:{use_renv:!1,default_packages:[]},ai:{enabled:!0,assistants:[],canonical_file:"CLAUDE.md",canonical_content:""},git:{initialize:!0,gitignore_template:"gitignore-project",gitignore_content:"",hooks:{ai_sync:!1,data_security:!1,check_sensitive_dirs:!1}},directories_enabled:{},directories:{},extra_directories:[],extra_directories_enabled:{}}),p=()=>{const T=s.query.section;T&&["overview","author","scaffold","structure","packages","ai","git"].includes(T)&&(d.value=T)};Ye(()=>s.query.section,T=>{T&&["overview","author","scaffold","structure","packages","ai","git"].includes(T)?d.value=T:T||(d.value="overview")}),Ye(d,T=>{s.query.section!==T&&e.replace({query:{...s.query,section:T}})}),es(async()=>{console.log("[DEBUG] NewProjectView mounted - starting initialization"),p();try{console.log("[DEBUG] Fetching global settings from /api/settings");const T=await fetch("/api/settings");if(console.log("[DEBUG] Settings response status:",T.status,T.ok),T.ok&&(n.value=await T.json(),n.value)){if(n.value.global?.projects_root&&(c.value.location=n.value.global.projects_root),c.value.author={...n.value.author},n.value.defaults?.project_type&&(c.value.type=n.value.defaults.project_type),n.value.defaults?.scaffold&&(c.value.scaffold={...n.value.defaults.scaffold}),n.value.defaults?.packages)if(Array.isArray(n.value.defaults.packages)){const w=n.value.defaults.packages.map(Y=>({name:Y.name||"",source:Y.source||"cran",auto_attach:Y.auto_attach!==!1}));c.value.packages.default_packages.splice(0,c.value.packages.default_packages.length,...w)}else n.value.defaults.packages.default_packages&&(c.value.packages={use_renv:n.value.defaults.packages.use_renv||!1,default_packages:(n.value.defaults.packages.default_packages||[]).map(w=>({name:w.name||"",source:w.source||"cran",auto_attach:w.auto_attach!==!1}))});c.value.ai={enabled:n.value.defaults?.ai_support!==!1,assistants:n.value.defaults?.ai_assistants||["claude"],canonical_file:n.value.defaults?.ai_canonical_file||"CLAUDE.md",canonical_content:""},c.value.ai.enabled&&c.value.ai.canonical_file&&J(c.value.ai.canonical_file,c.value.type),c.value.git.initialize=n.value.defaults?.use_git!==!1,n.value.defaults?.git_hooks&&(c.value.git.hooks={...n.value.defaults.git_hooks});const m={project:"gitignore-project",project_sensitive:"gitignore-project_sensitive",course:"gitignore-course",presentation:"gitignore-presentation"};c.value.git.gitignore_template=m[c.value.type]||"gitignore-project",c.value.git.gitignore_template&&B(c.value.git.gitignore_template)}const b=await fetch("/api/settings-catalog");b.ok&&(r.value=await b.json()),k()}catch(T){console.error("[DEBUG] Failed to load settings:",T),console.error("[DEBUG] Error details:",T.message,T.stack),i.error("Load Error","Could not load default settings")}finally{console.log("[DEBUG] Initialization complete, loading =",o.value),o.value=!1,setTimeout(()=>{if(f.value&&f.value.$el){const T=f.value.$el.querySelector("input");T&&T.focus()}},100)}}),Ye(()=>c.value.type,T=>{k();const b={project:"gitignore-project",project_sensitive:"gitignore-project_sensitive",course:"gitignore-course",presentation:"gitignore-presentation"};c.value.git.gitignore_template=b[T]||"gitignore-project"}),Ye(()=>c.value.packages.default_packages,(T,b)=>{console.log("[DEBUG PACKAGES WATCH] Packages changed!"),console.log("[DEBUG PACKAGES WATCH] Old:",b),console.log("[DEBUG PACKAGES WATCH] New:",T),console.trace("[DEBUG PACKAGES WATCH] Stack trace:")},{deep:!0}),Ye(()=>c.value.git.gitignore_template,T=>{T&&B(T)}),Ye(()=>c.value.ai.enabled,T=>{T&&c.value.ai.canonical_file&&J(c.value.ai.canonical_file,c.value.type)}),Ye(()=>c.value.ai.canonical_file,T=>{T&&c.value.ai.enabled&&J(T,c.value.type)}),Ye(()=>c.value.type,T=>{c.value.ai.canonical_file==="CLAUDE.md"&&c.value.ai.enabled&&J("CLAUDE.md",T)});const k=()=>{if(!r.value?.project_types)return;const T=r.value.project_types[c.value.type];if(!T?.directories)return;const b=n.value?.project_types?.[c.value.type];if(!c.value.git.gitignore_template||c.value.git.gitignore_template==="gitignore-project"){const m={project:"gitignore-project",project_sensitive:"gitignore-sensitive",course:"gitignore-course",presentation:"gitignore-presentation"};c.value.git.gitignore_template=m[c.value.type]||"gitignore-project"}B(c.value.git.gitignore_template),c.value.directories_enabled=Object.entries(T.directories).reduce((m,[w,Y])=>(m[w]=Y.enabled_by_default!==!1,m),{}),c.value.directories=Object.entries(T.directories).reduce((m,[w,Y])=>(m[w]=b?.directories?.[w]||Y.default||"",m),{}),b?.extra_directories&&Array.isArray(b.extra_directories)?(c.value.extra_directories=b.extra_directories.map(m=>({...m,_source:"global"})),c.value.extra_directories_enabled=b.extra_directories.reduce((m,w)=>(w.key&&(m[w.key]=!0),m),{})):(c.value.extra_directories=[],c.value.extra_directories_enabled={}),console.log("[DEBUG] loadProjectTypeDefaults() finished - packages still:",c.value.packages.default_packages)},C=T=>r.value?.project_types?.[T]?.label||T,A=oe(()=>({overview:"Overview",basics:"Basics",author:"Author & Metadata",scaffold:"Scaffold Behavior",structure:"Project Structure",packages:"Packages & Dependencies",ai:"AI Assistants",git:"Git & Hooks",review:"Review & Create"})[d.value]||"New Project"),V=oe(()=>({overview:"Quick overview of your project settings. We used your Framework Project Defaults as a starting point.",basics:"Essential project settings including name, location, type, and editor support.",author:"Configure author information embedded in project templates.",scaffold:"Runtime settings that control what happens when scaffold() runs.",structure:"Customize which directories to create for this project type.",packages:"Configure package management and default packages.",ai:"Configure AI assistant integration for this project.",git:"Configure version control and git hooks.",review:"Review your project configuration and create the project."})[d.value]||"");oe(()=>({vscode:"Positron / VS Code",rstudio:"RStudio","rstudio,vscode":"Both",none:"Other"})[c.value.scaffold.ide]||c.value.scaffold.ide);const R=oe(()=>{const T=[];return c.value.git.hooks.ai_sync&&T.push("AI sync"),c.value.git.hooks.data_security&&T.push("data security"),c.value.git.hooks.check_sensitive_dirs&&T.push("check sensitive"),T});oe(()=>{const T=c.value.location,b=n.value?.global?.projects_root;return!T||T===b?"(not set)":T});const P=(T,b)=>{b?c.value.ai.assistants.includes(T)||c.value.ai.assistants.push(T):c.value.ai.assistants=c.value.ai.assistants.filter(m=>m!==T)},z=()=>{c.value.packages.default_packages||(c.value.packages.default_packages=[]),c.value.packages.default_packages.push({name:"",source:"cran",auto_attach:!1})},H=T=>{c.value.packages.default_packages.splice(T,1)},B=async T=>{try{const b=await fetch(`/api/templates/${T}`);if(b.ok){const m=await b.json();m.success&&m.contents&&(c.value.git.gitignore_content=m.contents)}}catch(b){console.error("Failed to load gitignore template:",b)}},M=async()=>{c.value.git.gitignore_template&&(await B(c.value.git.gitignore_template),i.success("Template Reset","Restored default .gitignore template"))},J=async(T,b)=>{try{let m;if(T==="CLAUDE.md")switch(b){case"project_sensitive":m="ai_claude_sensitive";break;case"course":m="ai_claude_course";break;case"presentation":m="ai_claude_presentation";break;default:m="ai_claude_project"}else T==="AGENTS.md"?m="ai_agents":T===".github/copilot-instructions.md"&&(m="ai_copilot");const w=await fetch(`/api/templates/${m}`);if(w.ok){const Y=await w.json();Y.success&&Y.contents&&(c.value.ai.canonical_content=Y.contents)}}catch(m){console.error("Failed to load AI template:",m)}},X=oe(()=>r.value?.project_types?r.value.project_types[c.value.type]?.directories||{}:{});oe(()=>Object.values(c.value.directories_enabled).filter(T=>T).length);const he=T=>Object.keys(c.value.directories_enabled).filter(m=>c.value.directories_enabled[m]?T==="workspace"?m==="notebooks"||m==="scripts"||m==="functions":T==="input"?m.startsWith("inputs_"):T==="output"?m.startsWith("outputs_"):T==="temporary"?m==="cache"||m==="scratch":!1:!1).length,ie=T=>Array.isArray(c.value.extra_directories)?c.value.extra_directories.filter(b=>b.type===T&&b._source==="global"):[],N=T=>Array.isArray(c.value.extra_directories)?c.value.extra_directories.filter(b=>b.type===T&&b._source!=="global"):[],ae=(T,b)=>{Array.isArray(c.value.extra_directories)||(c.value.extra_directories=[]);const m=c.value.extra_directories.filter(Y=>Y._source==="global"||Y.type!==T&&Y._source!=="global"),w=b.map(Y=>({...Y,type:T,_source:"project"}));c.value.extra_directories=[...m,...w],w.forEach(Y=>{Y.key&&!c.value.extra_directories_enabled[Y.key]&&(c.value.extra_directories_enabled[Y.key]=!0)})},re=T=>{e.push({query:{...s.query,section:T}})},ke=async()=>{if(!c.value.name||!c.value.name.trim()){i.error("Validation Error","Project name is required"),re("overview");return}if(!c.value.location||!c.value.location.trim()){i.error("Validation Error","Project location is required"),re("overview");return}try{u.value=!0;const T=r.value?.project_types?.[c.value.type],b={};T?.directories&&Object.entries(T.directories).forEach(([Z,qe])=>{c.value.directories_enabled[Z]&&(b[Z]=qe.default)});const m={name:c.value.name.trim(),location:c.value.location.trim(),type:c.value.type,author:c.value.author,scaffold:c.value.scaffold,packages:c.value.packages,ai:c.value.ai,git:c.value.git,directories:b},w=await fetch("/api/projects/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)});if(!w.ok){const Z=await w.json();throw new Error(Z.message||"Failed to create project")}const Y=await w.json();i.success("Project Created",`${c.value.name} has been created successfully`),e.push("/projects")}catch(T){console.error("Failed to create project:",T),i.error("Creation Failed",T.message||"Could not create the project")}finally{u.value=!1}},K=T=>{(T.metaKey||T.ctrlKey)&&T.key==="s"&&(T.preventDefault(),ke())};return es(()=>{window.addEventListener("keydown",K)}),_r(()=>{window.removeEventListener("keydown",K)}),(T,b)=>(g(),y("div",KV,[h("nav",GV,[b[46]||(b[46]=h("h2",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"New Project",-1)),h("div",JV,[(g(),y(Q,null,xe(a,m=>(g(),y(Q,{key:m.id},[m.id==="basics"?(g(),pe(ma,{key:0},{default:j(()=>[...b[45]||(b[45]=[ue("Settings",-1)])]),_:1})):I("",!0),h("a",{href:"#",onClick:Kt(w=>d.value=m.id,["prevent"]),class:De(["flex items-center gap-2 px-3 py-2 rounded-md text-sm transition",d.value===m.id?"bg-sky-50 text-sky-700 font-medium dark:bg-sky-900/20 dark:text-sky-400":"text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-800"])},[m.icon?(g(),pe(As(m.icon),{key:0,class:"h-4 w-4"})):m.svgIcon?(g(),y("svg",XV,[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:m.svgIcon},null,8,QV)])):I("",!0),ue(" "+U(m.label),1)],10,YV)],64))),64))]),h("div",ZV,[x(Ie,{variant:"primary",size:"md",class:"w-full",disabled:u.value||!c.value.name||!c.value.location,onClick:ke},{default:j(()=>[ue(U(u.value?"Creating...":"Create Project"),1)]),_:1},8,["disabled"])])]),h("div",e6,[x(Cr,{title:A.value,description:V.value},null,8,["title","description"]),h("div",t6,[rt(h("div",null,[h("div",s6,[x(Es,{title:"Basics",onClick:b[0]||(b[0]=m=>d.value="basics")},{default:j(()=>[h("span",i6,U(c.value.name||"Untitled Project"),1),c.value.author.name?(g(),y(Q,{key:0},[b[47]||(b[47]=h("span",{class:"text-gray-400 dark:text-gray-500 mx-1"},"",-1)),h("span",n6,U(c.value.author.name),1)],64)):I("",!0),b[48]||(b[48]=h("span",{class:"text-gray-400 dark:text-gray-500 mx-1"},"",-1)),h("span",r6,U(C(c.value.type)),1)]),_:1}),x(Es,{title:"Project Structure",onClick:b[1]||(b[1]=m=>d.value="structure")},{default:j(()=>[h("span",o6,U(C(c.value.type)),1),b[50]||(b[50]=h("span",{class:"text-gray-400 dark:text-gray-500 mx-1"},"",-1)),h("span",l6,U(he("workspace"))+" workspace",1),b[51]||(b[51]=h("span",{class:"text-gray-400 dark:text-gray-500 mx-1"},"",-1)),h("span",a6,U(he("input"))+" input",1),he("output")>0?(g(),y(Q,{key:0},[b[49]||(b[49]=h("span",{class:"text-gray-400 dark:text-gray-500 mx-1"},"",-1)),h("span",u6,U(he("output"))+" output",1)],64)):I("",!0)]),_:1}),x(Es,{title:"Packages",onClick:b[2]||(b[2]=m=>d.value="packages")},{default:j(()=>[h("span",d6," renv: "+U(c.value.packages.use_renv?"enabled":"disabled"),1),c.value.packages.default_packages&&c.value.packages.default_packages.length>0?(g(),y(Q,{key:0},[b[52]||(b[52]=h("span",{class:"text-gray-400 dark:text-gray-500 mx-1"},"",-1)),h("span",c6,U(c.value.packages.default_packages.length)+" package"+U(c.value.packages.default_packages.length!==1?"s":""),1)],64)):I("",!0)]),_:1}),x(Es,{title:"AI Assistants",onClick:b[3]||(b[3]=m=>d.value="ai")},{default:j(()=>[c.value.ai.enabled&&c.value.ai.assistants.length>0?(g(),y(Q,{key:0},[ue(U(c.value.ai.assistants.map(m=>m.charAt(0).toUpperCase()+m.slice(1)).join(", "))+" ",1),b[53]||(b[53]=h("span",{class:"text-gray-400 dark:text-gray-500 mx-1"},"",-1)),h("span",h6,U(c.value.ai.canonical_file),1)],64)):c.value.ai.enabled?(g(),y("span",f6,"Enabled (no assistants selected)")):(g(),y("span",p6,"Disabled"))]),_:1}),x(Es,{title:"Git & Hooks",onClick:b[4]||(b[4]=m=>d.value="git")},{default:j(()=>[h("span",m6," Git: "+U(c.value.git.initialize?"enabled":"disabled"),1),c.value.git.initialize&&R.value.length>0?(g(),y(Q,{key:0},[b[54]||(b[54]=h("span",{class:"text-gray-400 dark:text-gray-500 mx-1"},"",-1)),h("span",g6,U(R.value.join(", ")),1)],64)):I("",!0)]),_:1}),x(Es,{title:"Scaffold Behavior",onClick:b[5]||(b[5]=m=>d.value="scaffold")},{default:j(()=>[h("span",v6,[c.value.scaffold.source_all_functions?(g(),y(Q,{key:0},[b[55]||(b[55]=ue(" Functions loaded from ",-1)),b[56]||(b[56]=h("code",{class:"text-xs bg-gray-100 dark:bg-gray-800 px-1 rounded"},"functions/",-1))],64)):(g(),y(Q,{key:1},[ue(" Does not load functions ")],64))]),b[57]||(b[57]=h("span",{class:"text-gray-400 dark:text-gray-500 mx-1"},"",-1)),h("span",y6,[c.value.scaffold.set_theme_on_scaffold?(g(),y(Q,{key:0},[ue(" ggplot2: "+U((c.value.scaffold.ggplot_theme||"theme_minimal").replace("theme_","")),1)],64)):(g(),y(Q,{key:1},[ue(" No ggplot theme ")],64))]),b[58]||(b[58]=h("span",{class:"text-gray-400 dark:text-gray-500 mx-1"},"",-1)),h("span",b6,U(c.value.scaffold.seed_on_scaffold?"Seed: "+(c.value.scaffold.seed||"default"):"No random seed"),1)]),_:1})])],512),[[xt,d.value==="overview"]]),rt(h("div",null,[h("div",x6,[h("div",k6,[x(q,{ref_key:"projectNameInput",ref:f,modelValue:c.value.name,"onUpdate:modelValue":b[6]||(b[6]=m=>c.value.name=m),label:"Project Name",hint:"Human-readable name for your project",placeholder:"My Analysis Project",required:""},null,8,["modelValue"]),x(q,{modelValue:c.value.location,"onUpdate:modelValue":b[7]||(b[7]=m=>c.value.location=m),label:"Project Location",hint:"Directory where the project will be created",placeholder:"e.g., ~/projects or /Users/yourname/code"},null,8,["modelValue"]),x(as,{modelValue:c.value.type,"onUpdate:modelValue":b[8]||(b[8]=m=>c.value.type=m),label:"Project Type",hint:"Choose the template structure for your project"},{default:j(()=>[...b[59]||(b[59]=[h("option",{value:"project"},"Research Project",-1),h("option",{value:"course"},"Course",-1),h("option",{value:"presentation"},"Presentation",-1)])]),_:1},8,["modelValue"]),h("div",null,[b[61]||(b[61]=h("label",{class:"block text-sm font-semibold text-gray-900 dark:text-white mb-3"}," Supported Editors ",-1)),x(Di,{modelValue:c.value.scaffold.positron,"onUpdate:modelValue":b[9]||(b[9]=m=>c.value.scaffold.positron=m),id:"support-positron",description:"Enable Positron-specific workspace and settings files"},{default:j(()=>[...b[60]||(b[60]=[ue(" Positron ",-1)])]),_:1},8,["modelValue"]),b[62]||(b[62]=h("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-3"}," RStudio supported by default ",-1))]),x(as,{modelValue:c.value.scaffold.notebook_format,"onUpdate:modelValue":b[10]||(b[10]=m=>c.value.scaffold.notebook_format=m),label:"Default Notebook Format",hint:"Format used when creating new notebooks"},{default:j(()=>[...b[63]||(b[63]=[h("option",{value:"quarto"},"Quarto (.qmd)",-1),h("option",{value:"rmarkdown"},"R Markdown (.Rmd)",-1)])]),_:1},8,["modelValue"]),h("div",w6,[b[64]||(b[64]=h("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"}," Author Information ",-1)),b[65]||(b[65]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-5"}," Author information is embedded in project templates and documentation. ",-1)),h("div",_6,[x(q,{modelValue:c.value.author.name,"onUpdate:modelValue":b[11]||(b[11]=m=>c.value.author.name=m),label:"Your Name",placeholder:"Your Name"},null,8,["modelValue"]),x(q,{modelValue:c.value.author.email,"onUpdate:modelValue":b[12]||(b[12]=m=>c.value.author.email=m),type:"email",label:"Email",placeholder:"your.email@example.com"},null,8,["modelValue"]),x(q,{modelValue:c.value.author.affiliation,"onUpdate:modelValue":b[13]||(b[13]=m=>c.value.author.affiliation=m),label:"Affiliation",placeholder:"Organization"},null,8,["modelValue"])])])])])],512),[[xt,d.value==="basics"]]),rt(h("div",null,[h("div",S6,[b[70]||(b[70]=h("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"}," Scaffold Behavior ",-1)),b[71]||(b[71]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"},[ue(" Automatic actions when "),h("code",{class:"px-1.5 py-0.5 bg-gray-200 dark:bg-gray-700 rounded text-xs"},"scaffold()"),ue(" runs to initialize your project environment. ")],-1)),h("div",C6,[h("div",null,[b[66]||(b[66]=h("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Auto-Load Functions",-1)),x(Re,{modelValue:c.value.scaffold.source_all_functions,"onUpdate:modelValue":b[14]||(b[14]=m=>c.value.scaffold.source_all_functions=m),label:"Source all R files from functions/ directory",description:"Automatically loads all helper functions when scaffold() runs"},null,8,["modelValue"])]),h("div",null,[b[68]||(b[68]=h("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"ggplot2 Theme",-1)),x(Re,{modelValue:c.value.scaffold.set_theme_on_scaffold,"onUpdate:modelValue":b[15]||(b[15]=m=>c.value.scaffold.set_theme_on_scaffold=m),label:"Set ggplot2 theme when scaffold() runs",description:"Automatically sets ggplot2 theme for consistent plot styling"},null,8,["modelValue"]),c.value.scaffold.set_theme_on_scaffold?(g(),pe(as,{key:0,modelValue:c.value.scaffold.ggplot_theme,"onUpdate:modelValue":b[16]||(b[16]=m=>c.value.scaffold.ggplot_theme=m),label:"Theme",class:"mt-4"},{default:j(()=>[...b[67]||(b[67]=[h("option",{value:""},"None",-1),h("option",{value:"theme_minimal"},"Minimal",-1),h("option",{value:"theme_bw"},"Black & White",-1),h("option",{value:"theme_classic"},"Classic",-1),h("option",{value:"theme_gray"},"Gray (default)",-1),h("option",{value:"theme_light"},"Light",-1),h("option",{value:"theme_dark"},"Dark",-1),h("option",{value:"theme_void"},"Void",-1)])]),_:1},8,["modelValue"])):I("",!0)]),h("div",null,[b[69]||(b[69]=h("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Random Seed",-1)),x(Re,{modelValue:c.value.scaffold.seed_on_scaffold,"onUpdate:modelValue":b[17]||(b[17]=m=>c.value.scaffold.seed_on_scaffold=m),label:"Set random seed when scaffold() runs",description:"Ensures deterministic behavior for reproducibility"},null,8,["modelValue"]),c.value.scaffold.seed_on_scaffold?(g(),pe(q,{key:0,modelValue:c.value.scaffold.seed,"onUpdate:modelValue":b[18]||(b[18]=m=>c.value.scaffold.seed=m),label:"Seed Value",placeholder:"e.g., 1234 or 20241107",hint:"Leave empty to use global default",class:"mt-4"},null,8,["modelValue"])):I("",!0)])])])],512),[[xt,d.value==="scaffold"]]),rt(h("div",A6,[h("div",V6,[x(CS,{legend:"Project Type",description:"Select a project type to customize the directory structure."},{default:j(()=>[x(Qo,{modelValue:c.value.type,"onUpdate:modelValue":b[19]||(b[19]=m=>c.value.type=m),id:"type-project",name:"project-type",value:"project"},{default:j(()=>[...b[72]||(b[72]=[h("div",null,[h("div",{class:"font-medium text-sm"},"Research Project"),h("div",{class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5"}," Full-featured with organized data, work, and output directories ")],-1)])]),_:1},8,["modelValue"]),x(Qo,{modelValue:c.value.type,"onUpdate:modelValue":b[20]||(b[20]=m=>c.value.type=m),id:"type-sensitive",name:"project-type",value:"project_sensitive"},{default:j(()=>[...b[73]||(b[73]=[h("div",null,[h("div",{class:"font-medium text-sm"},"Privacy Sensitive Project"),h("div",{class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5"}," Enhanced privacy controls with separate private/public flows ")],-1)])]),_:1},8,["modelValue"]),x(Qo,{modelValue:c.value.type,"onUpdate:modelValue":b[21]||(b[21]=m=>c.value.type=m),id:"type-presentation",name:"project-type",value:"presentation"},{default:j(()=>[...b[74]||(b[74]=[h("div",null,[h("div",{class:"font-medium text-sm"},"Presentation"),h("div",{class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5"}," Minimal structure for slides and presentations ")],-1)])]),_:1},8,["modelValue"]),x(Qo,{modelValue:c.value.type,"onUpdate:modelValue":b[22]||(b[22]=m=>c.value.type=m),id:"type-course",name:"project-type",value:"course"},{default:j(()=>[...b[75]||(b[75]=[h("div",null,[h("div",{class:"font-medium text-sm"},"Course/Teaching"),h("div",{class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5"}," Simplified structure for teaching materials ")],-1)])]),_:1},8,["modelValue"])]),_:1})]),c.value.type==="presentation"?(g(),y("div",M6,[b[76]||(b[76]=h("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Presentation File",-1)),x(q,{modelValue:c.value.directories.presentation_source,"onUpdate:modelValue":b[23]||(b[23]=m=>c.value.directories.presentation_source=m),label:"Presentation source file",placeholder:"presentation.qmd",hint:"Main Quarto file for your slides"},null,8,["modelValue"])])):I("",!0),c.value.type==="project"?(g(),y("div",D6,[b[79]||(b[79]=h("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Workspaces",-1)),b[80]||(b[80]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Functions, notebooks, and scripts scaffolded into every project.",-1)),h("div",T6,[(g(),y(Q,null,xe(["functions","notebooks","scripts"],m=>h("div",{key:m},[x(Re,{id:`dir-${m}`,modelValue:c.value.directories_enabled[m],"onUpdate:modelValue":w=>c.value.directories_enabled[m]=w,label:X.value[m]?.label||m,description:X.value[m]?.hint,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),c.value.directories_enabled[m]?(g(),pe(q,{key:0,modelValue:c.value.directories[m],"onUpdate:modelValue":w=>c.value.directories[m]=w,placeholder:X.value[m]?.default,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)])),64)),(g(!0),y(Q,null,xe(ie("workspace"),m=>(g(),y("div",{key:`extra-${m.key}`},[x(Re,{id:`extra-dir-${m.key}`,modelValue:c.value.extra_directories_enabled[m.key],"onUpdate:modelValue":w=>c.value.extra_directories_enabled[m.key]=w,label:m.label,description:`Custom: ${m.path}`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),c.value.extra_directories_enabled[m.key]?(g(),pe(q,{key:0,modelValue:m.path,"onUpdate:modelValue":w=>m.path=w,placeholder:m.path,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]))),128))]),h("div",$6,[b[77]||(b[77]=h("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Add Custom Workspace Directories",-1)),b[78]||(b[78]=h("p",{class:"text-xs text-gray-600 dark:text-gray-400 mb-3"},"Add directories specific to this project only.",-1)),x(bt,{"model-value":N("workspace"),"onUpdate:modelValue":b[24]||(b[24]=m=>ae("workspace",m)),"add-label":"Add Workspace Directory","default-item":()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:j(({item:m,index:w,update:Y})=>[h("div",E6,[x(q,{"model-value":m.key,"onUpdate:modelValue":Z=>Y("key",Z),label:"Key",placeholder:"e.g., tests",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":m.label,"onUpdate:modelValue":Z=>Y("label",Z),label:"Label",placeholder:"e.g., Tests",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":m.path,"onUpdate:modelValue":Z=>Y("path",Z),label:"Path",placeholder:"e.g., tests",prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])])):I("",!0),c.value.type==="project"?(g(),y("div",O6,[b[83]||(b[83]=h("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Inputs",-1)),b[84]||(b[84]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Define the read-only locations where raw and prepared data live.",-1)),h("div",P6,[(g(),y(Q,null,xe(["inputs_raw","inputs_intermediate","inputs_final","reference"],m=>h("div",{key:m},[x(Re,{id:`dir-${m}`,modelValue:c.value.directories_enabled[m],"onUpdate:modelValue":w=>c.value.directories_enabled[m]=w,label:X.value[m]?.label||m,description:X.value[m]?.hint,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),c.value.directories_enabled[m]?(g(),pe(q,{key:0,modelValue:c.value.directories[m],"onUpdate:modelValue":w=>c.value.directories[m]=w,placeholder:X.value[m]?.default,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)])),64)),(g(!0),y(Q,null,xe(ie("input"),m=>(g(),y("div",{key:`extra-${m.key}`},[x(Re,{id:`extra-dir-${m.key}`,modelValue:c.value.extra_directories_enabled[m.key],"onUpdate:modelValue":w=>c.value.extra_directories_enabled[m.key]=w,label:m.label,description:`Custom: ${m.path}`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),c.value.extra_directories_enabled[m.key]?(g(),pe(q,{key:0,modelValue:m.path,"onUpdate:modelValue":w=>m.path=w,placeholder:m.path,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]))),128))]),h("div",j6,[b[81]||(b[81]=h("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Add Custom Input Directories",-1)),b[82]||(b[82]=h("p",{class:"text-xs text-gray-600 dark:text-gray-400 mb-3"},"Add directories specific to this project only.",-1)),x(bt,{"model-value":N("input"),"onUpdate:modelValue":b[25]||(b[25]=m=>ae("input",m)),"add-label":"Add Input Directory","default-item":()=>({key:"",label:"",path:"",type:"input",_id:Date.now()})},{default:j(({item:m,index:w,update:Y})=>[h("div",R6,[x(q,{"model-value":m.key,"onUpdate:modelValue":Z=>Y("key",Z),label:"Key",placeholder:"e.g., inputs_archive",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":m.label,"onUpdate:modelValue":Z=>Y("label",Z),label:"Label",placeholder:"e.g., Archive",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":m.path,"onUpdate:modelValue":Z=>Y("path",Z),label:"Path",placeholder:"e.g., inputs/archive",prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])])):I("",!0),c.value.type==="project"?(g(),y("div",L6,[b[86]||(b[86]=h("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Outputs",-1)),b[87]||(b[87]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Outputs are public by default so results are easy to share.",-1)),h("div",B6,[(g(),y(Q,null,xe(["outputs_notebooks","outputs_tables","outputs_figures","outputs_models","outputs_reports"],m=>h("div",{key:m},[x(Re,{id:`dir-${m}`,modelValue:c.value.directories_enabled[m],"onUpdate:modelValue":w=>c.value.directories_enabled[m]=w,label:X.value[m]?.label||m,description:X.value[m]?.hint,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),c.value.directories_enabled[m]?(g(),pe(q,{key:0,modelValue:c.value.directories[m],"onUpdate:modelValue":w=>c.value.directories[m]=w,placeholder:X.value[m]?.default,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)])),64)),(g(!0),y(Q,null,xe(ie("output"),m=>(g(),y("div",{key:`extra-${m.key}`},[x(Re,{id:`extra-${m.key}`,modelValue:c.value.extra_directories_enabled[m.key],"onUpdate:modelValue":w=>c.value.extra_directories_enabled[m.key]=w,label:m.label,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label"]),c.value.extra_directories_enabled[m.key]?(g(),pe(q,{key:0,modelValue:m.path,"onUpdate:modelValue":w=>m.path=w,placeholder:m.path,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]))),128))]),h("div",I6,[b[85]||(b[85]=h("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Add Custom Output Directories",-1)),x(bt,{"model-value":N("output"),"onUpdate:modelValue":b[26]||(b[26]=m=>ae("output",m)),"add-label":"Add Output Directory","default-item":()=>({key:"",label:"",path:"",type:"output",_id:Date.now()})},{default:j(({item:m,index:w,update:Y})=>[h("div",N6,[x(q,{"model-value":m.key,"onUpdate:modelValue":Z=>Y("key",Z),label:"Key",placeholder:"e.g., outputs_animations",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":m.label,"onUpdate:modelValue":Z=>Y("label",Z),label:"Label",placeholder:"e.g., Animations",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":m.path,"onUpdate:modelValue":Z=>Y("path",Z),label:"Path",placeholder:"e.g., outputs/animations",prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])])):I("",!0),c.value.type==="project"?(g(),y("div",U6,[b[89]||(b[89]=h("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Temporary",-1)),b[90]||(b[90]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Scratch space and cache (gitignored by default).",-1)),h("div",z6,[(g(),y(Q,null,xe(["cache","scratch"],m=>h("div",{key:m},[x(Re,{id:`dir-${m}`,modelValue:c.value.directories_enabled[m],"onUpdate:modelValue":w=>c.value.directories_enabled[m]=w,label:X.value[m]?.label||m,description:X.value[m]?.hint,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),c.value.directories_enabled[m]?(g(),pe(q,{key:0,modelValue:c.value.directories[m],"onUpdate:modelValue":w=>c.value.directories[m]=w,placeholder:X.value[m]?.default,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)])),64)),(g(!0),y(Q,null,xe(ie("temporary"),m=>(g(),y("div",{key:`extra-${m.key}`},[x(Re,{id:`extra-${m.key}`,modelValue:c.value.extra_directories_enabled[m.key],"onUpdate:modelValue":w=>c.value.extra_directories_enabled[m.key]=w,label:m.label,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label"]),c.value.extra_directories_enabled[m.key]?(g(),pe(q,{key:0,modelValue:m.path,"onUpdate:modelValue":w=>m.path=w,placeholder:m.path,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]))),128))]),h("div",F6,[b[88]||(b[88]=h("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Add Custom Temporary Directories",-1)),x(bt,{"model-value":N("temporary"),"onUpdate:modelValue":b[27]||(b[27]=m=>ae("temporary",m)),"add-label":"Add Temporary Directory","default-item":()=>({key:"",label:"",path:"",type:"temporary",_id:Date.now()})},{default:j(({item:m,index:w,update:Y})=>[h("div",H6,[x(q,{"model-value":m.key,"onUpdate:modelValue":Z=>Y("key",Z),label:"Key",placeholder:"e.g., temp_downloads",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":m.label,"onUpdate:modelValue":Z=>Y("label",Z),label:"Label",placeholder:"e.g., Downloads",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":m.path,"onUpdate:modelValue":Z=>Y("path",Z),label:"Path",placeholder:"e.g., temp/downloads",prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])])):I("",!0),c.value.type==="course"?(g(),y("div",W6,[b[92]||(b[92]=h("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Course Materials",-1)),b[93]||(b[93]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Slides, assignments, readings, and documentation.",-1)),h("div",q6,[(g(),y(Q,null,xe(["slides","assignments","readings","course_docs"],m=>h("div",{key:m},[x(Re,{id:`dir-${m}`,modelValue:c.value.directories_enabled[m],"onUpdate:modelValue":w=>c.value.directories_enabled[m]=w,label:X.value[m]?.label||m,description:X.value[m]?.hint,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),c.value.directories_enabled[m]?(g(),pe(q,{key:0,modelValue:c.value.directories[m],"onUpdate:modelValue":w=>c.value.directories[m]=w,placeholder:X.value[m]?.default,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)])),64)),(g(!0),y(Q,null,xe(ie("workspace"),m=>(g(),y("div",{key:`extra-${m.key}`},[x(Re,{id:`extra-dir-${m.key}`,modelValue:c.value.extra_directories_enabled[m.key],"onUpdate:modelValue":w=>c.value.extra_directories_enabled[m.key]=w,label:m.label,description:`Custom: ${m.path}`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),c.value.extra_directories_enabled[m.key]?(g(),pe(q,{key:0,modelValue:m.path,"onUpdate:modelValue":w=>m.path=w,placeholder:m.path,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]))),128))]),h("div",K6,[b[91]||(b[91]=h("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Add Custom Directories",-1)),x(bt,{"model-value":N("workspace"),"onUpdate:modelValue":b[28]||(b[28]=m=>ae("workspace",m)),"add-label":"Add Directory","default-item":()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:j(({item:m,index:w,update:Y})=>[h("div",G6,[x(q,{"model-value":m.key,"onUpdate:modelValue":Z=>Y("key",Z),label:"Key",placeholder:"e.g., exercises",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":m.label,"onUpdate:modelValue":Z=>Y("label",Z),label:"Label",placeholder:"e.g., Exercises",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":m.path,"onUpdate:modelValue":Z=>Y("path",Z),label:"Path",placeholder:"e.g., exercises",prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])])):I("",!0),c.value.type==="course"?(g(),y("div",J6,[b[94]||(b[94]=h("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Workspaces",-1)),b[95]||(b[95]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Module notebooks, functions, and scripts.",-1)),h("div",Y6,[(g(),y(Q,null,xe(["notebooks","functions","scripts"],m=>h("div",{key:m},[x(Re,{id:`dir-${m}`,modelValue:c.value.directories_enabled[m],"onUpdate:modelValue":w=>c.value.directories_enabled[m]=w,label:X.value[m]?.label||m,description:X.value[m]?.hint,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),c.value.directories_enabled[m]?(g(),pe(q,{key:0,modelValue:c.value.directories[m],"onUpdate:modelValue":w=>c.value.directories[m]=w,placeholder:X.value[m]?.default,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)])),64))])])):I("",!0),c.value.type==="course"?(g(),y("div",X6,[b[96]||(b[96]=h("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Data & Storage",-1)),b[97]||(b[97]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Course datasets and temporary files.",-1)),h("div",Q6,[(g(),y(Q,null,xe(["data","inputs","outputs","cache"],m=>h("div",{key:m},[x(Re,{id:`dir-${m}`,modelValue:c.value.directories_enabled[m],"onUpdate:modelValue":w=>c.value.directories_enabled[m]=w,label:X.value[m]?.label||m,description:X.value[m]?.hint,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),c.value.directories_enabled[m]?(g(),pe(q,{key:0,modelValue:c.value.directories[m],"onUpdate:modelValue":w=>c.value.directories[m]=w,placeholder:X.value[m]?.default,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)])),64))])])):I("",!0),c.value.type==="presentation"?(g(),y("div",Z6,[b[99]||(b[99]=h("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Optional Directories",-1)),b[100]||(b[100]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Add supporting directories for data, scripts, or helper functions.",-1)),h("div",eM,[(g(),y(Q,null,xe(["data","scripts","functions"],m=>h("div",{key:m},[x(Re,{id:`dir-${m}`,modelValue:c.value.directories_enabled[m],"onUpdate:modelValue":w=>c.value.directories_enabled[m]=w,label:X.value[m]?.label||m,description:X.value[m]?.hint,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),c.value.directories_enabled[m]?(g(),pe(q,{key:0,modelValue:c.value.directories[m],"onUpdate:modelValue":w=>c.value.directories[m]=w,placeholder:X.value[m]?.default,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)])),64)),(g(!0),y(Q,null,xe(ie("workspace"),m=>(g(),y("div",{key:`extra-${m.key}`},[x(Re,{id:`extra-dir-${m.key}`,modelValue:c.value.extra_directories_enabled[m.key],"onUpdate:modelValue":w=>c.value.extra_directories_enabled[m.key]=w,label:m.label,description:`Custom: ${m.path}`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),c.value.extra_directories_enabled[m.key]?(g(),pe(q,{key:0,modelValue:m.path,"onUpdate:modelValue":w=>m.path=w,placeholder:m.path,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]))),128))]),h("div",tM,[b[98]||(b[98]=h("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Add Custom Directories",-1)),x(bt,{"model-value":N("workspace"),"onUpdate:modelValue":b[29]||(b[29]=m=>ae("workspace",m)),"add-label":"Add Directory","default-item":()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:j(({item:m,index:w,update:Y})=>[h("div",sM,[x(q,{"model-value":m.key,"onUpdate:modelValue":Z=>Y("key",Z),label:"Key",placeholder:"e.g., assets",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":m.label,"onUpdate:modelValue":Z=>Y("label",Z),label:"Label",placeholder:"e.g., Assets",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":m.path,"onUpdate:modelValue":Z=>Y("path",Z),label:"Path",placeholder:"e.g., assets",prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])])):I("",!0),c.value.type==="project_sensitive"?(g(),y("div",iM,[b[102]||(b[102]=h("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Work Directories",-1)),b[103]||(b[103]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Module locations for notebooks, scripts, and helper functions.",-1)),h("div",nM,[(g(),y(Q,null,xe(["functions","notebooks","scripts"],m=>h("div",{key:m},[h("div",rM,[x(Re,{id:`dir-${m}`,modelValue:c.value.directories_enabled[m],"onUpdate:modelValue":w=>c.value.directories_enabled[m]=w,label:X.value[m]?.label||m,description:X.value[m]?.hint,class:"flex-1"},null,8,["id","modelValue","onUpdate:modelValue","label","description"])]),c.value.directories_enabled[m]?(g(),pe(q,{key:0,modelValue:c.value.directories[m],"onUpdate:modelValue":w=>c.value.directories[m]=w,placeholder:X.value[m]?.default,class:"mt-2",prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)])),64)),(g(!0),y(Q,null,xe(ie("workspace"),m=>(g(),y("div",{key:`extra-${m.key}`},[x(Re,{id:`extra-dir-${m.key}`,modelValue:c.value.extra_directories_enabled[m.key],"onUpdate:modelValue":w=>c.value.extra_directories_enabled[m.key]=w,label:m.label,description:`Custom: ${m.path}`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),c.value.extra_directories_enabled[m.key]?(g(),pe(q,{key:0,modelValue:m.path,"onUpdate:modelValue":w=>m.path=w,placeholder:m.path,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]))),128))]),h("div",oM,[b[101]||(b[101]=h("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Add Custom Workspace Directories",-1)),x(bt,{"model-value":N("workspace"),"onUpdate:modelValue":b[30]||(b[30]=m=>ae("workspace",m)),"add-label":"Add Workspace Directory","default-item":()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:j(({item:m,index:w,update:Y})=>[h("div",lM,[x(q,{"model-value":m.key,"onUpdate:modelValue":Z=>Y("key",Z),label:"Key",placeholder:"e.g., helpers",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":m.label,"onUpdate:modelValue":Z=>Y("label",Z),label:"Label",placeholder:"e.g., Helper Functions",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":m.path,"onUpdate:modelValue":Z=>Y("path",Z),label:"Path",placeholder:"e.g., helpers",prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])])):I("",!0),c.value.type==="project_sensitive"?(g(),y("div",aM,[b[107]||(b[107]=h("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Inputs",-1)),b[108]||(b[108]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Keep private inputs compartmentalized; publish processed data into public folders when ready. ",-1)),b[109]||(b[109]=h("div",{class:"grid gap-4 sm:grid-cols-2 text-xs font-semibold uppercase text-gray-500 dark:text-gray-400 mb-3"},[h("div",null,"Private"),h("div",null,"Public")],-1)),h("div",uM,[(g(),y(Q,null,xe(["raw","intermediate","final"],m=>h("div",{key:m},[h("div",dM,[h("div",cM,[x(Re,{id:`dir-inputs_private_${m}`,modelValue:c.value.directories_enabled[`inputs_private_${m}`],"onUpdate:modelValue":w=>c.value.directories_enabled[`inputs_private_${m}`]=w,label:`${m.charAt(0).toUpperCase()+m.slice(1)} data`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label"]),c.value.directories_enabled[`inputs_private_${m}`]?(g(),pe(q,{key:0,modelValue:c.value.directories[`inputs_private_${m}`],"onUpdate:modelValue":w=>c.value.directories[`inputs_private_${m}`]=w,placeholder:`inputs/private/${m}`,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]),h("div",hM,[x(Re,{id:`dir-inputs_public_${m}`,modelValue:c.value.directories_enabled[`inputs_public_${m}`],"onUpdate:modelValue":w=>c.value.directories_enabled[`inputs_public_${m}`]=w,label:`${m.charAt(0).toUpperCase()+m.slice(1)} data`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label"]),c.value.directories_enabled[`inputs_public_${m}`]?(g(),pe(q,{key:0,modelValue:c.value.directories[`inputs_public_${m}`],"onUpdate:modelValue":w=>c.value.directories[`inputs_public_${m}`]=w,placeholder:`inputs/public/${m}`,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)])])])),64)),h("div",fM,[h("div",pM,[(g(!0),y(Q,null,xe(ie("input_private"),m=>(g(),y("div",{key:`extra-${m.key}`,class:"p-3 rounded-md"},[x(Re,{id:`extra-dir-${m.key}`,modelValue:c.value.extra_directories_enabled[m.key],"onUpdate:modelValue":w=>c.value.extra_directories_enabled[m.key]=w,label:m.label,description:`Custom: ${m.path}`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),c.value.extra_directories_enabled[m.key]?(g(),pe(q,{key:0,modelValue:m.path,"onUpdate:modelValue":w=>m.path=w,placeholder:m.path,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]))),128))]),h("div",mM,[(g(!0),y(Q,null,xe(ie("input_public"),m=>(g(),y("div",{key:`extra-${m.key}`,class:"p-3 rounded-md"},[x(Re,{id:`extra-dir-${m.key}`,modelValue:c.value.extra_directories_enabled[m.key],"onUpdate:modelValue":w=>c.value.extra_directories_enabled[m.key]=w,label:m.label,description:`Custom: ${m.path}`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),c.value.extra_directories_enabled[m.key]?(g(),pe(q,{key:0,modelValue:m.path,"onUpdate:modelValue":w=>m.path=w,placeholder:m.path,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]))),128))])])]),h("div",gM,[b[106]||(b[106]=h("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-4"},"Add Custom Input Directories",-1)),h("div",vM,[h("div",null,[b[104]||(b[104]=h("p",{class:"text-xs font-semibold uppercase text-gray-500 dark:text-gray-400 mb-3"},"Private",-1)),x(bt,{"model-value":N("input_private"),"onUpdate:modelValue":b[31]||(b[31]=m=>ae("input_private",m)),"add-label":"Add Private Input","default-item":()=>({key:"",label:"",path:"",type:"input_private",_id:Date.now()})},{default:j(({item:m,index:w,update:Y})=>[h("div",yM,[x(q,{"model-value":m.key,"onUpdate:modelValue":Z=>Y("key",Z),label:"Key",placeholder:"e.g., inputs_private_survey",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":m.label,"onUpdate:modelValue":Z=>Y("label",Z),label:"Label",placeholder:"e.g., Survey Data",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":m.path,"onUpdate:modelValue":Z=>Y("path",Z),label:"Path",placeholder:"e.g., inputs/private/survey",prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])]),h("div",null,[b[105]||(b[105]=h("p",{class:"text-xs font-semibold uppercase text-gray-500 dark:text-gray-400 mb-3"},"Public",-1)),x(bt,{"model-value":N("input_public"),"onUpdate:modelValue":b[32]||(b[32]=m=>ae("input_public",m)),"add-label":"Add Public Input","default-item":()=>({key:"",label:"",path:"",type:"input_public",_id:Date.now()})},{default:j(({item:m,index:w,update:Y})=>[h("div",bM,[x(q,{"model-value":m.key,"onUpdate:modelValue":Z=>Y("key",Z),label:"Key",placeholder:"e.g., inputs_public_survey",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":m.label,"onUpdate:modelValue":Z=>Y("label",Z),label:"Label",placeholder:"e.g., Survey Data",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":m.path,"onUpdate:modelValue":Z=>Y("path",Z),label:"Path",placeholder:"e.g., inputs/public/survey",prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])])])])):I("",!0),c.value.type==="project_sensitive"?(g(),y("div",xM,[b[113]||(b[113]=h("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Outputs",-1)),b[114]||(b[114]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Review outputs before promotion; private folders remain gitignored while public copies are ready to share. ",-1)),b[115]||(b[115]=h("div",{class:"grid gap-4 sm:grid-cols-2 text-xs font-semibold uppercase text-gray-500 dark:text-gray-400 mb-3"},[h("div",null,"Private"),h("div",null,"Public")],-1)),h("div",kM,[(g(),y(Q,null,xe(["notebooks","tables","figures","models","reports"],m=>h("div",{key:m},[h("div",wM,[h("div",_M,[x(Re,{id:`dir-outputs_private_${m}`,modelValue:c.value.directories_enabled[`outputs_private_${m}`],"onUpdate:modelValue":w=>c.value.directories_enabled[`outputs_private_${m}`]=w,label:m.replace("_"," ").charAt(0).toUpperCase()+m.replace("_"," ").slice(1),class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label"]),c.value.directories_enabled[`outputs_private_${m}`]?(g(),pe(q,{key:0,modelValue:c.value.directories[`outputs_private_${m}`],"onUpdate:modelValue":w=>c.value.directories[`outputs_private_${m}`]=w,placeholder:`outputs/private/${m}`,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]),h("div",SM,[x(Re,{id:`dir-outputs_public_${m}`,modelValue:c.value.directories_enabled[`outputs_public_${m}`],"onUpdate:modelValue":w=>c.value.directories_enabled[`outputs_public_${m}`]=w,label:m.replace("_"," ").charAt(0).toUpperCase()+m.replace("_"," ").slice(1),class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label"]),c.value.directories_enabled[`outputs_public_${m}`]?(g(),pe(q,{key:0,modelValue:c.value.directories[`outputs_public_${m}`],"onUpdate:modelValue":w=>c.value.directories[`outputs_public_${m}`]=w,placeholder:`outputs/public/${m}`,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)])])])),64)),h("div",CM,[h("div",AM,[(g(!0),y(Q,null,xe(ie("output_private"),m=>(g(),y("div",{key:`extra-${m.key}`,class:"p-3 rounded-md"},[x(Re,{id:`extra-dir-${m.key}`,modelValue:c.value.extra_directories_enabled[m.key],"onUpdate:modelValue":w=>c.value.extra_directories_enabled[m.key]=w,label:m.label,description:`Custom: ${m.path}`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),c.value.extra_directories_enabled[m.key]?(g(),pe(q,{key:0,modelValue:m.path,"onUpdate:modelValue":w=>m.path=w,placeholder:m.path,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]))),128))]),h("div",VM,[(g(!0),y(Q,null,xe(ie("output_public"),m=>(g(),y("div",{key:`extra-${m.key}`,class:"p-3 rounded-md"},[x(Re,{id:`extra-dir-${m.key}`,modelValue:c.value.extra_directories_enabled[m.key],"onUpdate:modelValue":w=>c.value.extra_directories_enabled[m.key]=w,label:m.label,description:`Custom: ${m.path}`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),c.value.extra_directories_enabled[m.key]?(g(),pe(q,{key:0,modelValue:m.path,"onUpdate:modelValue":w=>m.path=w,placeholder:m.path,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]))),128))])])]),h("div",MM,[b[112]||(b[112]=h("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-4"},"Add Custom Output Directories",-1)),h("div",DM,[h("div",null,[b[110]||(b[110]=h("p",{class:"text-xs font-semibold uppercase text-gray-500 dark:text-gray-400 mb-3"},"Private",-1)),x(bt,{"model-value":N("output_private"),"onUpdate:modelValue":b[33]||(b[33]=m=>ae("output_private",m)),"add-label":"Add Private Output","default-item":()=>({key:"",label:"",path:"",type:"output_private",_id:Date.now()})},{default:j(({item:m,index:w,update:Y})=>[h("div",TM,[x(q,{"model-value":m.key,"onUpdate:modelValue":Z=>Y("key",Z),label:"Key",placeholder:"e.g., outputs_private_videos",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":m.label,"onUpdate:modelValue":Z=>Y("label",Z),label:"Label",placeholder:"e.g., Videos",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":m.path,"onUpdate:modelValue":Z=>Y("path",Z),label:"Path",placeholder:"e.g., outputs/private/videos",prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])]),h("div",null,[b[111]||(b[111]=h("p",{class:"text-xs font-semibold uppercase text-gray-500 dark:text-gray-400 mb-3"},"Public",-1)),x(bt,{"model-value":N("output_public"),"onUpdate:modelValue":b[34]||(b[34]=m=>ae("output_public",m)),"add-label":"Add Public Output","default-item":()=>({key:"",label:"",path:"",type:"output_public",_id:Date.now()})},{default:j(({item:m,index:w,update:Y})=>[h("div",$M,[x(q,{"model-value":m.key,"onUpdate:modelValue":Z=>Y("key",Z),label:"Key",placeholder:"e.g., outputs_public_videos",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":m.label,"onUpdate:modelValue":Z=>Y("label",Z),label:"Label",placeholder:"e.g., Videos",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":m.path,"onUpdate:modelValue":Z=>Y("path",Z),label:"Path",placeholder:"e.g., outputs/public/videos",prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])])])])):I("",!0),c.value.type==="project_sensitive"?(g(),y("div",EM,[b[116]||(b[116]=h("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Temporary",-1)),b[117]||(b[117]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Scratch space and cache (gitignored by default).",-1)),h("div",OM,[(g(),y(Q,null,xe(["cache","scratch"],m=>rt(h("div",{key:m},[h("div",PM,[x(Re,{id:`dir-${m}`,modelValue:c.value.directories_enabled[m],"onUpdate:modelValue":w=>c.value.directories_enabled[m]=w,label:X.value[m]?.label,description:X.value[m]?.hint,class:"flex-1"},null,8,["id","modelValue","onUpdate:modelValue","label","description"])]),c.value.directories_enabled[m]?(g(),pe(q,{key:0,modelValue:c.value.directories[m],"onUpdate:modelValue":w=>c.value.directories[m]=w,placeholder:X.value[m]?.default,class:"mt-2",prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]),[[xt,X.value[m]]])),64))])])):I("",!0),h("div",jM,[b[119]||(b[119]=h("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},".gitignore Template",-1)),b[120]||(b[120]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Customize the .gitignore template for this project type. Uses pattern-based matching to catch sensitive directories anywhere in your project tree. ",-1)),x(wn,{modelValue:c.value.git.gitignore_content,"onUpdate:modelValue":b[35]||(b[35]=m=>c.value.git.gitignore_content=m),language:"gitignore",class:"mb-4"},null,8,["modelValue"]),x(Ie,{variant:"secondary",size:"sm",onClick:M},{default:j(()=>[...b[118]||(b[118]=[ue(" Restore Default ",-1)])]),_:1})])],512),[[xt,d.value==="structure"]]),rt(h("div",null,[h("div",RM,[h("div",LM,[x(Re,{modelValue:c.value.packages.use_renv,"onUpdate:modelValue":b[36]||(b[36]=m=>c.value.packages.use_renv=m),label:"Enable renv",description:"Use renv for package version management and reproducibility"},null,8,["modelValue"]),h("div",BM,[h("div",IM,[b[122]||(b[122]=h("div",null,[h("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300"},"Default Packages"),h("p",{class:"text-xs text-gray-600 dark:text-gray-400 mt-1"},"Installed (and optionally attached) when scaffold() runs.")],-1)),x(Ie,{size:"sm",variant:"secondary",onClick:z},{default:j(()=>[...b[121]||(b[121]=[ue("Add Package",-1)])]),_:1})]),c.value.packages.default_packages&&c.value.packages.default_packages.length?(g(),y("div",NM,[(g(!0),y(Q,null,xe(c.value.packages.default_packages,(m,w)=>(g(),y("div",{key:`pkg-${w}`,class:"rounded-md border border-gray-200 p-4 dark:border-gray-700"},[h("div",UM,[h("div",zM,[m.source==="cran"||m.source==="bioconductor"?(g(),pe(nh,{key:0,modelValue:m.name,"onUpdate:modelValue":Y=>m.name=Y,source:m.source,label:"Package",placeholder:m.source==="cran"?"Search CRAN...":"Search Bioconductor...",onSelect:Y=>m.name=Y.name},null,8,["modelValue","onUpdate:modelValue","source","placeholder","onSelect"])):(g(),pe(q,{key:1,modelValue:m.name,"onUpdate:modelValue":Y=>m.name=Y,label:"Package",placeholder:"user/repo"},null,8,["modelValue","onUpdate:modelValue"])),x(as,{modelValue:m.source,"onUpdate:modelValue":Y=>m.source=Y,label:"Source"},{default:j(()=>[...b[123]||(b[123]=[h("option",{value:"cran"},"CRAN",-1),h("option",{value:"github"},"GitHub",-1),h("option",{value:"bioconductor"},"Bioconductor",-1)])]),_:1},8,["modelValue","onUpdate:modelValue"])]),h("div",FM,[x(Re,{modelValue:m.auto_attach,"onUpdate:modelValue":Y=>m.auto_attach=Y,label:"Auto-Attach",description:"Call library() when scaffold() runs."},null,8,["modelValue","onUpdate:modelValue"]),x(Ie,{size:"sm",variant:"secondary",onClick:Y=>H(w)},{default:j(()=>[...b[124]||(b[124]=[ue("Remove",-1)])]),_:1},8,["onClick"])])])]))),128))])):(g(),y("p",HM,"No packages configured. Add packages to include tidyverse helpers or internal utilities automatically."))])])])],512),[[xt,d.value==="packages"]]),rt(h("div",null,[h("div",WM,[b[132]||(b[132]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Framework maintains context files for selected assistants and keeps them in sync before commits. ",-1)),h("div",qM,[h("div",null,[x(Re,{modelValue:c.value.ai.enabled,"onUpdate:modelValue":b[37]||(b[37]=m=>c.value.ai.enabled=m),label:"Enable AI Support",description:"Generate and sync assistant-specific context files."},null,8,["modelValue"])]),c.value.ai.enabled?(g(),y(Q,{key:0},[h("div",KM,[b[126]||(b[126]=h("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Canonical context file",-1)),b[127]||(b[127]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," This file is the source of truth; other instructions files are synced to it when AI hooks run. ",-1)),x(as,{modelValue:c.value.ai.canonical_file,"onUpdate:modelValue":b[38]||(b[38]=m=>c.value.ai.canonical_file=m),label:"Canonical Context File"},{default:j(()=>[...b[125]||(b[125]=[h("option",{value:"AGENTS.md"},"AGENTS.md (multi-agent orchestrator)",-1),h("option",{value:"CLAUDE.md"},"CLAUDE.md",-1),h("option",{value:".github/copilot-instructions.md"},".github/copilot-instructions.md",-1)])]),_:1},8,["modelValue"])]),h("div",GM,[b[128]||(b[128]=h("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Assistants",-1)),b[129]||(b[129]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Choose which assistants receive context updates. ",-1)),h("div",JM,[(g(),y(Q,null,xe(l,m=>x(Di,{key:m.id,id:`ai-${m.id}`,"model-value":c.value.ai.assistants.includes(m.id),"onUpdate:modelValue":w=>P(m.id,w),description:m.description},{default:j(()=>[ue(U(m.label),1)]),_:2},1032,["id","model-value","onUpdate:modelValue","description"])),64))])]),h("div",YM,[x(Re,{modelValue:c.value.git.hooks.ai_sync,"onUpdate:modelValue":b[39]||(b[39]=m=>c.value.git.hooks.ai_sync=m),label:"Sync AI Files Before Commit",description:"Update non-canonical files so assistants share the same instructions."},null,8,["modelValue"])]),h("div",XM,[b[130]||(b[130]=h("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Canonical instructions",-1)),b[131]||(b[131]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Edit the canonical file directly. This will be pre-populated when the project is created. ",-1)),x(wn,{modelValue:c.value.ai.canonical_content,"onUpdate:modelValue":b[40]||(b[40]=m=>c.value.ai.canonical_content=m),language:"markdown","min-height":"500px"},null,8,["modelValue"])])],64)):I("",!0)])])],512),[[xt,d.value==="ai"]]),rt(h("div",null,[h("div",QM,[b[134]||(b[134]=h("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"}," Git & Hooks ",-1)),b[135]||(b[135]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Configure version control and git hooks for this project. ",-1)),h("div",ZM,[x(Re,{modelValue:c.value.git.initialize,"onUpdate:modelValue":b[41]||(b[41]=m=>c.value.git.initialize=m),label:"Initialize Git repository",description:"Run git init for this project"},null,8,["modelValue"]),c.value.git.initialize?(g(),y("div",eD,[h("div",null,[b[133]||(b[133]=h("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Git Hooks",-1)),h("div",tD,[x(Re,{id:"hook-ai-sync",modelValue:c.value.git.hooks.ai_sync,"onUpdate:modelValue":b[42]||(b[42]=m=>c.value.git.hooks.ai_sync=m),label:"AI Context File Mirroring",description:"Mirror and sync AI context files (CLAUDE.md, AGENTS.md, etc.) on commit"},null,8,["modelValue"]),x(Re,{id:"hook-data-security",modelValue:c.value.git.hooks.data_security,"onUpdate:modelValue":b[43]||(b[43]=m=>c.value.git.hooks.data_security=m),label:"Data Security Scan",description:"Scan for secrets before commit"},null,8,["modelValue"]),x(Re,{id:"hook-check-sensitive-dirs",modelValue:c.value.git.hooks.check_sensitive_dirs,"onUpdate:modelValue":b[44]||(b[44]=m=>c.value.git.hooks.check_sensitive_dirs=m),label:"Check Sensitive Directories",description:"Warn about unignored sensitive directories (private, cache, scratch, etc.)"},null,8,["modelValue"])])])])):I("",!0)])])],512),[[xt,d.value==="git"]])])])]))}},iD={class:"mt-2 block text-sm font-semibold text-gray-900 dark:text-white"},nD={key:0,class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},rD={class:"mt-2 text-sm font-semibold text-gray-900 dark:text-white"},oD={key:0,class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},lD={key:1,class:"mt-6"},aD={__name:"EmptyState",props:{title:{type:String,required:!0},description:{type:String,default:null},icon:{type:String,default:null,validator:t=>["database","folder","document","users","inbox","photo"].includes(t)},action:{type:Boolean,default:!1}},emits:["click"],setup(t,{emit:e}){const s=t,i=e,n=oe(()=>{const l=["relative","block","w-full","rounded-lg","border-2","border-dashed","border-gray-300","p-12","text-center","dark:border-white/15"];return s.action&&l.push("hover:border-gray-400","focus:outline-2","focus:outline-offset-2","focus:outline-sky-600","dark:hover:border-white/25","dark:focus:outline-sky-500","transition-colors"),l.join(" ")}),r=oe(()=>({database:()=>Dt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Dt("path",{d:"M8 14v20c0 4.418 7.163 8 16 8 1.381 0 2.721-.087 4-.252M8 14c0 4.418 7.163 8 16 8s16-3.582 16-8M8 14c0-4.418 7.163-8 16-8s16 3.582 16 8m0 0v14m0-4c0 4.418-7.163 8-16 8S8 28.418 8 24m32 10v6m0 0v6m0-6h6m-6 0h-6"})]),folder:()=>Dt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Dt("path",{d:"M3 7v30a4 4 0 004 4h34a4 4 0 004-4V13a4 4 0 00-4-4H23.343a4 4 0 01-2.829-1.172l-2.828-2.828A4 4 0 0014.858 4H7a4 4 0 00-4 4v0zM37 17v6m0 0v6m0-6h6m-6 0h-6"})]),document:()=>Dt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Dt("path",{d:"M8 4a4 4 0 00-4 4v32a4 4 0 004 4h32a4 4 0 004-4V8a4 4 0 00-4-4H8zm24 16v6m0 0v6m0-6h6m-6 0h-6"})]),users:()=>Dt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Dt("path",{d:"M17 21a5 5 0 110-10 5 5 0 010 10zm-6.5 8a7.5 7.5 0 0115 0H10.5zM31 21a5 5 0 110-10 5 5 0 010 10zm-6.5 8a7.5 7.5 0 0115 0H24.5z"})]),inbox:()=>Dt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Dt("path",{d:"M4 8h40M4 8v28a4 4 0 004 4h32a4 4 0 004-4V8M4 8l18 14a2 2 0 002.4 0L44 8"})]),photo:()=>Dt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Dt("path",{d:"M4 8a4 4 0 014-4h32a4 4 0 014 4v32a4 4 0 01-4 4H8a4 4 0 01-4-4V8zm10 6a3 3 0 100-6 3 3 0 000 6zM4 40l12-12 8 8 8-8L44 40"})])})[s.icon]||null),o=()=>{s.action&&i("click")};return(l,a)=>t.action?(g(),y("button",{key:0,type:"button",onClick:o,class:De(n.value)},[vt(l.$slots,"icon",{},()=>[t.icon?(g(),pe(As(r.value),{key:0,class:"mx-auto size-12 text-gray-400 dark:text-gray-500"})):I("",!0)]),h("span",iD,U(t.title),1),t.description?(g(),y("p",nD,U(t.description),1)):I("",!0)],2)):(g(),y("div",{key:1,class:De(n.value.replace("hover:border-gray-400","").replace("focus:outline-2",""))},[vt(l.$slots,"icon",{},()=>[t.icon?(g(),pe(As(r.value),{key:0,class:"mx-auto size-12 text-gray-400 dark:text-gray-500"})):I("",!0)]),h("h3",rD,U(t.title),1),t.description?(g(),y("p",oD,U(t.description),1)):I("",!0),l.$slots.actions?(g(),y("div",lD,[vt(l.$slots,"actions")])):I("",!0)],2))}},uD=["onClick","aria-current"],dD={class:"mt-4"},cD={__name:"Tabs",props:{modelValue:{type:[String,Number],required:!0},tabs:{type:Array,required:!0,validator:t=>t.every(e=>e.id&&e.label)},variant:{type:String,default:"pills",validator:t=>["pills","underline"].includes(t)},size:{type:String,default:"md",validator:t=>["sm","md","lg"].includes(t)}},emits:["update:modelValue","change"],setup(t,{emit:e}){const s=t,i=e,n=oe(()=>s.variant==="underline"?"border-b border-gray-200 dark:border-white/10":""),r=oe(()=>{const a=["flex","gap-2"];return s.variant==="underline"?a.push("-mb-px"):a.push("p-1","bg-gray-100","dark:bg-white/5","rounded-lg"),a.join(" ")}),o=a=>{const d=s.modelValue===a,u=["inline-flex","items-center","gap-2","font-medium","transition-colors"],f={sm:"px-2.5 py-1.5 text-xs",md:"px-3 py-2 text-sm",lg:"px-4 py-2.5 text-base"};return u.push(f[s.size]),s.variant==="pills"?(u.push("rounded-md"),d?u.push("bg-white","text-gray-900","shadow-xs","dark:bg-white/10","dark:text-white"):u.push("text-gray-600","hover:text-gray-900","dark:text-gray-400","dark:hover:text-white")):(u.push("border-b-2","pb-3"),d?u.push("border-sky-600","text-sky-600","dark:border-sky-500","dark:text-sky-400"):u.push("border-transparent","text-gray-600","hover:border-gray-300","hover:text-gray-900","dark:text-gray-400","dark:hover:border-gray-600","dark:hover:text-white")),u.join(" ")},l=a=>{i("update:modelValue",a),i("change",a)};return(a,d)=>(g(),y("div",null,[h("div",{class:De(n.value)},[h("nav",{class:De(r.value),"aria-label":"Tabs"},[(g(!0),y(Q,null,xe(t.tabs,u=>(g(),y("button",{key:u.id,type:"button",onClick:f=>l(u.id),class:De(o(u.id)),"aria-current":t.modelValue===u.id?"page":void 0},[u.icon?(g(),pe(As(u.icon),{key:0,class:"size-5"})):I("",!0),ue(" "+U(u.label)+" ",1),u.badge?(g(),pe(ir,{key:1,variant:t.modelValue===u.id?"emerald":"gray",pill:""},{default:j(()=>[ue(U(u.badge),1)]),_:2},1032,["variant"])):I("",!0)],10,uD))),128))],2)],2),h("div",dD,[vt(a.$slots,"default")])]))}},hD=["for"],fD={class:"mt-2"},pD=["id","value","placeholder","rows","required","disabled"],mD={key:1,class:"mt-2 text-sm text-gray-500 dark:text-gray-400"},Xd={__name:"Textarea",props:{id:{type:String,default:()=>`textarea-${Math.random().toString(36).substr(2,9)}`},modelValue:{type:String,default:""},label:{type:String,default:null},placeholder:{type:String,default:""},rows:{type:Number,default:4},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},hint:{type:String,default:null},monospace:{type:Boolean,default:!1},textareaClass:{type:[String,Array,Object],default:""}},emits:["update:modelValue"],setup(t){const e=t,s=oe(()=>["block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-sky-600 sm:text-sm/6 dark:bg-white/5 dark:text-white dark:outline-white/10 dark:placeholder:text-gray-500 dark:focus:outline-sky-500",e.monospace?"font-mono text-sm leading-6":"",e.textareaClass]);return(i,n)=>(g(),y("div",null,[t.label?(g(),y("label",{key:0,for:t.id,class:"block text-sm/6 font-medium text-gray-900 dark:text-white"},U(t.label),9,hD)):I("",!0),h("div",fD,[h("textarea",{id:t.id,value:t.modelValue,placeholder:t.placeholder,rows:t.rows,required:t.required,disabled:t.disabled,onInput:n[0]||(n[0]=r=>i.$emit("update:modelValue",r.target.value)),class:De(s.value)},null,42,pD)]),t.hint?(g(),y("p",mD,U(t.hint),1)):I("",!0)]))}},gD={class:"space-y-6"},vD={key:0},yD={class:"mt-1 font-mono text-sm text-gray-900 dark:text-gray-100 break-words"},bD={key:1},xD={class:"grid gap-4 sm:grid-cols-2"},kD=["value"],wD={class:"sm:col-span-2"},_D={key:0,class:"sm:col-span-2"},SD={class:"space-y-3"},CD={class:"flex items-center justify-between"},AD={key:0,class:"rounded-md border border-dashed border-gray-300 p-4 text-sm text-gray-500 dark:border-gray-600 dark:text-gray-400"},VD={class:"grid gap-3 sm:grid-cols-[1fr_auto] sm:items-start"},MD={class:"mt-3"},DD={key:0,class:"mt-2 text-xs text-gray-500 dark:text-gray-400"},TD={class:"mt-2 flex justify-end"},$D={key:2,class:"text-sm text-red-600 dark:text-red-400"},ED={key:3,class:"text-sm text-red-600 dark:text-red-400"},OD={key:4,class:"text-sm text-red-600 dark:text-red-400"},PD='{"source": "data-catalog"}',jD={__name:"DataCatalogEditModal",props:{modelValue:{type:Boolean,default:!1},mode:{type:String,default:"edit",validator:t=>["edit","create"].includes(t)},entry:{type:Object,default:null},saving:{type:Boolean,default:!1},error:{type:String,default:null}},emits:["update:modelValue","save"],setup(t,{emit:e}){const s=t,i=e,n=Object.freeze([{value:"csv",label:"CSV (comma-separated)"},{value:"tsv",label:"TSV (tab-separated)"},{value:"csv_custom",label:"Delimited text (custom)"},{value:"rds",label:"RDS (R serialized)"},{value:"excel",label:"Excel (.xlsx / .xls)"},{value:"stata",label:"Stata (.dta)"},{value:"spss",label:"SPSS (.sav / .zsav)"},{value:"spss_por",label:"SPSS Portable (.por)"},{value:"sas",label:"SAS (.sas7bdat / .sas7bcat)"},{value:"sas_xpt",label:"SAS Transport (.xpt)"}]),r=["path","type","description","locked","delimiter"],o=ve(null),l=ve(!1),a=ve(!1),d=oe(()=>s.mode==="create"),u=Hs({path:"",fullKey:"",type:"",description:"",delimiter:"",locked:!1,additionalFields:[]}),f=oe(()=>u.type==="csv_custom"),c=oe(()=>{if(!s.entry&&!d.value)return null;const K=X();return K.length>0?`Duplicate metadata keys: ${K.join(", ")}`:u.additionalFields.some(T=>!T.key.trim())?"Metadata keys cannot be empty.":null}),p=oe(()=>u.path.trim()?null:"File path is required"),k=oe(()=>d.value?a.value?p.value:null:p.value);Ye(()=>s.entry,K=>{if(!K){H();return}z(K)},{immediate:!0}),Ye(()=>u.path,K=>{if(l.value)return;const T=R(K);T&&(T.type==="csv"?(u.type="csv",u.delimiter=A("csv")):T.type==="tsv"?(u.type="tsv",u.delimiter=A("tsv")):(u.type=T.type,u.delimiter=""))}),Ye(()=>u.type,K=>{K&&(K==="csv"?u.delimiter=A("csv"):K==="tsv"?u.delimiter=A("tsv"):K!=="csv_custom"&&(u.delimiter=""))});function C(){return`field-${Math.random().toString(36).slice(2,9)}`}function A(K){return K==="csv"?"comma":K==="tsv"?"tab":""}function V(K,T){if(!K)return!1;const b=K.toLowerCase();return T==="csv"?b==="comma"||K===",":T==="tsv"?b==="tab"||K==="	":!1}function R(K){if(!K)return null;const T=K.toLowerCase();return T.endsWith(".csv")?{type:"csv",delimiter:"comma"}:T.endsWith(".tsv")||T.endsWith(".txt")||T.endsWith(".dat")?{type:"tsv",delimiter:"tab"}:T.endsWith(".rds")?{type:"rds",delimiter:""}:T.endsWith(".xlsx")||T.endsWith(".xls")?{type:"excel",delimiter:""}:T.endsWith(".dta")?{type:"stata",delimiter:""}:T.endsWith(".sav")||T.endsWith(".zsav")?{type:"spss",delimiter:""}:T.endsWith(".por")?{type:"spss_por",delimiter:""}:T.endsWith(".sas7bdat")||T.endsWith(".sas7bcat")?{type:"sas",delimiter:""}:T.endsWith(".xpt")?{type:"sas_xpt",delimiter:""}:null}function P(K){if(!K){u.type="",u.delimiter="",l.value=!1;return}u.type=K,l.value=!0,K==="csv"?u.delimiter=A("csv"):K==="tsv"?u.delimiter=A("tsv"):u.delimiter=""}function z(K){if(H(),a.value=!1,d.value){const Y=K?.data||{};u.fullKey=K?.fullKey||"",u.path=Y.path||"",u.type=Y.type||"",u.description=Y.description||"",u.locked=!!Y.locked,u.delimiter=Y.delimiter||"",l.value=!1;return}const T=K.data||{};u.fullKey=K.fullKey||"",u.path=T.path||"";const b=R(u.path),m=T.type||b?.type||"";if(u.description=T.description||"",u.locked=!!T.locked,m==="csv"){const Y=T.delimiter||b?.delimiter||A("csv");V(Y,"csv")?(u.type="csv",u.delimiter=A("csv")):Y?(u.type="csv_custom",u.delimiter=Y):(u.type="csv",u.delimiter=A("csv"))}else m==="tsv"?(u.type="tsv",u.delimiter=A("tsv")):(u.type=m,u.delimiter=f.value&&T.delimiter||"");!u.type&&b?.type&&(u.type=b.type,u.delimiter=b.delimiter||A(b.type)),l.value=!!T.type||u.type==="csv_custom";const w=Object.entries(T).filter(([Y])=>!r.includes(Y)).map(([Y,Z])=>({id:C(),key:Y,valueInput:B(Z),valueType:M(Z),isMultiline:typeof Z=="object"&&Z!==null}));u.additionalFields=w,o.value=null}function H(){u.path="",u.fullKey="",u.type="",u.description="",u.delimiter="",u.locked=!1,u.additionalFields=[],o.value=null,l.value=!1}function B(K){if(typeof K=="object"&&K!==null)try{return JSON.stringify(K,null,2)}catch{return""}return K==null?"":String(K)}function M(K){return Array.isArray(K)||typeof K=="object"&&K!==null?"object":typeof K=="boolean"?"boolean":typeof K=="number"?"number":"string"}function J(K){if(K.valueType==="object"){if(!K.valueInput.trim())return null;try{return JSON.parse(K.valueInput)}catch{throw new Error(`Invalid JSON for field "${K.key}"`)}}if(K.valueType==="number"){const T=Number(K.valueInput);if(Number.isNaN(T))throw new Error(`Value for "${K.key}" must be a number`);return T}if(K.valueType==="boolean"){const T=K.valueInput.trim().toLowerCase();if(["true","false"].includes(T))return T==="true";throw new Error(`Value for "${K.key}" must be "true" or "false"`)}return K.valueInput}function X(){const K=new Set,T=[];return u.additionalFields.forEach(b=>{const m=b.key.trim();m&&(K.has(m)||r.includes(m)?T.push(m):K.add(m))}),T}function he(K){return K.key.trim()?r.includes(K.key.trim())?"Reserved key name":u.additionalFields.some(T=>T!==K&&T.key.trim()===K.key.trim())?"Duplicate key":null:"Key is required"}function ie(){u.additionalFields.push({id:C(),key:"",valueInput:"",valueType:"string",isMultiline:!1}),o.value=null}function N(K){u.additionalFields=u.additionalFields.filter(T=>T.id!==K)}function ae(K){K.isMultiline=!K.isMultiline,K.isMultiline?(K.valueType="object",K.valueInput&&!K.valueInput.trim().startsWith("{")&&(K.valueInput="")):(K.valueType="string",K.valueInput=K.valueInput!=null?String(K.valueInput):"")}const re=()=>{if(o.value=null,a.value=!0,!(p.value||c.value)&&!(!d.value&&!s.entry))try{const K=ke();i("save",K)}catch(K){o.value=K.message}},ke=()=>{if(!u.path.trim())throw new Error("File path is required");const K={};K.path=u.path.trim();const T=u.type==="csv_custom"?"csv":u.type.trim();if(T&&(K.type=T),u.description.trim()&&(K.description=u.description.trim()),u.type==="csv_custom"){if(!u.delimiter.trim())throw new Error("Delimiter is required for custom delimited text sources");K.delimiter=u.delimiter.trim()}else u.delimiter.trim()&&!V(u.delimiter.trim(),u.type)&&(K.delimiter=u.delimiter.trim());u.locked&&(K.locked=!0);for(const m of u.additionalFields){const w=m.key.trim();if(!w||r.includes(w))continue;const Y=J({...m,valueType:m.valueType??"string"});Y===null||Y===""||(K[w]=Y)}const b=(d.value?u.fullKey:s.entry.fullKey||"").trim();if(!b)throw new Error("Dot notation key is required");return{fullKey:b,data:K,isNew:d.value}};return(K,T)=>(g(),pe(fr,{"model-value":t.modelValue,variant:"left",size:"lg",title:"Edit Data Entry","onUpdate:modelValue":T[6]||(T[6]=b=>i("update:modelValue",b))},db({_:2},[t.entry||d.value?{name:"default",fn:j(()=>[h("div",gD,[d.value?(g(),y("div",bD,[x(q,{modelValue:u.fullKey,"onUpdate:modelValue":T[0]||(T[0]=b=>u.fullKey=b),label:"Dot Notation Key",placeholder:"e.g., inputs.raw.custom_dataset",hint:"Use dot notation to place this entry within the catalog hierarchy."},null,8,["modelValue"])])):(g(),y("div",vD,[T[7]||(T[7]=h("p",{class:"text-xs font-medium uppercase tracking-wide text-gray-500 dark:text-gray-400"}," Data Key ",-1)),h("p",yD,U(t.entry.fullKey),1)])),x(q,{modelValue:u.path,"onUpdate:modelValue":T[1]||(T[1]=b=>u.path=b),label:"File Path",placeholder:"inputs/raw/example.csv",required:"",error:k.value,monospace:"",hint:"Provide a path relative to the project root (e.g., inputs/raw/data.csv) or an absolute path."},null,8,["modelValue","error"]),h("div",xD,[x(as,{"model-value":u.type,label:"Type","onUpdate:modelValue":P},{default:j(()=>[T[8]||(T[8]=h("option",{disabled:"",value:""},"Select file type",-1)),(g(!0),y(Q,null,xe(at(n),b=>(g(),y("option",{key:b.value,value:b.value},U(b.label),9,kD))),128))]),_:1},8,["model-value"]),h("div",wD,[x(Re,{modelValue:u.locked,"onUpdate:modelValue":T[2]||(T[2]=b=>u.locked=b),label:"Locked",description:"Treat this data source as read-only."},null,8,["modelValue"])]),f.value?(g(),y("div",_D,[x(q,{modelValue:u.delimiter,"onUpdate:modelValue":T[3]||(T[3]=b=>u.delimiter=b),label:"Delimiter",placeholder:"e.g., tab or |",hint:"Use keywords 'tab', 'comma', 'semicolon', 'space' or supply a single character (e.g., |). Keywords map to their respective delimiters."},null,8,["modelValue"])])):I("",!0)]),x(Xd,{modelValue:u.description,"onUpdate:modelValue":T[4]||(T[4]=b=>u.description=b),label:"Description",placeholder:"Explain what this source contains or how it was produced.",rows:4},null,8,["modelValue"]),h("div",SD,[h("div",CD,[T[10]||(T[10]=h("h4",{class:"text-sm font-semibold text-gray-900 dark:text-gray-100"}," Additional Metadata ",-1)),x(Ie,{size:"sm",variant:"secondary",class:"shadow-none",onClick:ie},{default:j(()=>[...T[9]||(T[9]=[ue(" Add Field ",-1)])]),_:1})]),T[12]||(T[12]=h("p",{class:"text-xs text-gray-500 dark:text-gray-400"}," Store any extra properties (e.g., source, codebook details). Complex values can be provided as JSON. ",-1)),u.additionalFields.length===0?(g(),y("div",AD," No additional metadata fields. ")):I("",!0),(g(!0),y(Q,null,xe(u.additionalFields,b=>(g(),y("div",{key:b.id,class:"rounded-md border border-gray-200 bg-white/80 p-4 dark:border-gray-700 dark:bg-gray-900/40"},[h("div",VD,[x(q,{modelValue:b.key,"onUpdate:modelValue":m=>b.key=m,label:"Key",placeholder:"e.g., source",error:he(b)},null,8,["modelValue","onUpdate:modelValue","error"]),x(Ie,{size:"sm",variant:"secondary",class:"shadow-none",onClick:m=>N(b.id)},{default:j(()=>[...T[11]||(T[11]=[ue(" Remove ",-1)])]),_:1},8,["onClick"])]),h("div",MD,[(g(),pe(As(b.isMultiline?Xd:q),{modelValue:b.valueInput,"onUpdate:modelValue":m=>b.valueInput=m,label:b.isMultiline?"Value (JSON)":"Value",rows:b.isMultiline?4:void 0,placeholder:b.isMultiline?PD:"comma",monospace:b.isMultiline?void 0:!1},null,8,["modelValue","onUpdate:modelValue","label","rows","placeholder","monospace"])),b.isMultiline?(g(),y("p",DD," Provide valid JSON to store complex data structures. ")):I("",!0),h("div",TD,[x(Ie,{size:"xs",variant:"soft",onClick:m=>ae(b)},{default:j(()=>[ue(U(b.isMultiline?"Use single-line value":"Use JSON value"),1)]),_:2},1032,["onClick"])])])]))),128))]),c.value?(g(),y("p",$D,U(c.value),1)):I("",!0),o.value?(g(),y("p",ED,U(o.value),1)):I("",!0),t.error?(g(),y("p",OD,U(t.error),1)):I("",!0)])]),key:"0"}:void 0,t.entry?{name:"actions",fn:j(()=>[x(Ie,{size:"sm",variant:"secondary",class:"shadow-none",onClick:T[5]||(T[5]=b=>i("update:modelValue",!1))},{default:j(()=>[...T[13]||(T[13]=[ue(" Cancel ",-1)])]),_:1}),x(Ie,{size:"sm",disabled:t.saving,onClick:re},{default:j(()=>[ue(U(t.saving?"Saving":"Save Entry"),1)]),_:1},8,["disabled"])]),key:"1"}:void 0]),1032,["model-value"]))}},Ky=(t="")=>{const s=String(t??"").trim().replace(/[^a-zA-Z0-9]+/g,"-").replace(/^-+|-+$/g,"").toLowerCase();return s?`data-node-${s}`:"data-node-root"},RD=["id"],LD=["aria-expanded"],BD={class:"flex-1"},ID={key:0,class:"rounded bg-amber-200/70 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},ND={key:1},UD={class:"mt-1 text-xs text-zinc-500 dark:text-zinc-400"},zD={class:"text-xs font-medium uppercase tracking-wide text-zinc-500 dark:text-zinc-400"},FD={class:"flex items-start gap-3"},HD={class:"flex-1"},WD={key:0,class:"rounded bg-amber-200/70 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},qD={key:1},KD={class:"mt-1 text-xs text-zinc-500 dark:text-zinc-400"},GD=["id"],JD={class:"flex items-start justify-between gap-4"},YD={class:"min-w-0 flex items-center gap-2"},XD={class:"text-sm font-semibold text-gray-900 dark:text-white"},QD={key:0,class:"rounded bg-amber-200/70 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},ZD={key:1},eT={key:0,class:"inline-flex items-center rounded-full border border-gray-200 bg-white px-2.5 py-1 text-xs font-medium text-gray-700 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-100"},tT={class:"flex items-center gap-2 shrink-0"},sT={class:"mt-5 space-y-4"},iT={key:0,class:"space-y-2"},nT={class:"text-sm leading-relaxed text-gray-600 dark:text-zinc-300"},rT={key:1,class:"flex items-start gap-3"},oT={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},lT={key:1,class:"h-4 w-4 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},aT={class:"min-w-0 flex-1"},uT={class:"mt-1 font-mono text-sm leading-relaxed text-gray-900 dark:text-zinc-100"},dT={key:0,class:"rounded bg-amber-200/60 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},cT={key:1},hT={key:1,class:"text-zinc-500"},fT={class:"flex items-start gap-3 pt-4 border-t border-gray-200 dark:border-zinc-700"},pT={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},mT={key:1,class:"h-4 w-4 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},gT={class:"min-w-0 flex-1"},vT={class:"mt-1 font-mono text-sm leading-relaxed text-gray-900 dark:text-zinc-100"},yT={key:0,class:"rounded bg-amber-200/60 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},bT={key:1},xT={key:1,class:"text-zinc-500"},kT={class:"min-w-0"},wT={class:"text-xs font-medium uppercase tracking-wide text-gray-600 dark:text-zinc-200"},_T={class:"mt-1 whitespace-pre-wrap break-words font-mono text-[13px] text-gray-800 dark:text-zinc-200"},ST={class:"flex items-start gap-3 pt-4 border-t border-gray-200 dark:border-zinc-700"},CT={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},AT={key:1,class:"h-4 w-4 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},VT={class:"min-w-0 flex-1"},MT=["title"],Ru="mt-1.5 inline-flex h-10 w-10 items-center justify-center rounded-md border border-gray-200 bg-white text-gray-500 transition hover:border-gray-300 hover:text-gray-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-500 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-300 dark:hover:border-gray-500 dark:hover:text-gray-100",DT=Object.assign({name:"DataCatalogTree"},{__name:"DataCatalogTree",props:{node:{type:Object,required:!0},depth:{type:Number,default:0},expandedKeys:{type:Object,required:!0},autoExpandedKeys:{type:Object,required:!0},toggleGroup:{type:Function,required:!0},searchTerm:{type:String,default:""},hierarchical:{type:Boolean,default:!0},pendingDeletes:{type:Object,default:null}},emits:["edit","delete"],setup(t,{emit:e}){const s=e,i=t,n=oe(()=>i.node?.type==="group"),r=oe(()=>i.depth===0),o=oe(()=>{if(!n.value)return!1;if(!i.hierarchical)return!0;const ie=i.node?.fullKey;if(!ie)return!1;const N=i.expandedKeys,ae=i.autoExpandedKeys,re=typeof N?.has=="function"?N.has(ie):!!N?.[ie],ke=typeof ae?.has=="function"?ae.has(ie):!!ae?.[ie];return re||ke}),l=oe(()=>{const ie=i.node?.leafCount||0;return`${ie} ${ie===1?"entry":"entries"}`}),a=oe(()=>r.value?"mb-4 rounded-xl border border-gray-200 bg-white p-6 transition hover:border-gray-300 scroll-mt-16 dark:border-gray-700/70 dark:bg-gray-900 dark:hover:border-gray-600":"mb-3 rounded-lg border border-gray-200 bg-white p-4 transition hover:border-gray-300 dark:border-gray-700/60 dark:bg-gray-900/60 dark:hover:border-gray-600"),d=oe(()=>r.value?"text-lg font-semibold text-zinc-900 dark:text-white":"text-sm font-semibold text-zinc-900 dark:text-white"),u=oe(()=>r.value?"mt-4 space-y-3":"mt-3 space-y-3"),f=oe(()=>i.pendingDeletes instanceof Set?i.pendingDeletes:i.pendingDeletes&&typeof i.pendingDeletes=="object"&&i.pendingDeletes.value instanceof Set?i.pendingDeletes.value:new Set),c=oe(()=>f.value.has(i.node?.fullKey)),p=oe(()=>{const ie=i.node?.data||{},N=new Set(["path","type","description","locked","delimiter"]);return Object.keys(ie).filter(ae=>!N.has(ae)).reduce((ae,re)=>(ae[re]=ie[re],ae),{})}),k=oe(()=>{const ie="relative rounded-lg p-6 transition focus-within:ring-2",N=r.value?"scroll-mt-16":"";return c.value?`${ie} border border-red-200 bg-red-50 hover:bg-red-100 focus-within:ring-red-300 ${N} dark:border-red-500/40 dark:bg-red-900/30 dark:hover:bg-red-900/40 dark:focus-within:ring-red-500/40`:`${ie} border border-gray-200 bg-gray-50 hover:bg-gray-100 focus-within:ring-sky-200 ${N} dark:border-gray-700/50 dark:bg-gray-800/50 dark:hover:bg-gray-800/60 dark:focus-within:ring-sky-500/40`}),C=oe(()=>c.value?"shadow-none border border-red-200 text-red-700 hover:bg-red-50 dark:border-red-500/40 dark:text-red-200 dark:hover:bg-red-900/30":"shadow-none"),A=oe(()=>i.searchTerm.trim().toLowerCase()),V=(ie="")=>{const N=ie??"",ae=A.value;if(!ae)return[{text:N,highlight:!1}];const re=N.toLowerCase(),ke=[];let K=0,T=re.indexOf(ae);for(;T!==-1;)T>K&&ke.push({text:N.slice(K,T),highlight:!1}),ke.push({text:N.slice(T,T+ae.length),highlight:!0}),K=T+ae.length,T=re.indexOf(ae,K);return K<N.length&&ke.push({text:N.slice(K),highlight:!1}),ke.length>0?ke:[{text:N,highlight:!1}]},R=oe(()=>i.node?.displayName||i.node?.name||""),P=oe(()=>V(R.value)),z=oe(()=>V(i.node?.data?.path||"")),H=oe(()=>V(i.node?.fullKey||"")),B=oe(()=>{const ie=i.node?.fullKey||"";return ie?`data_read('${ie}')`:"data_read()"}),M=(ie="")=>ie.replace(/_/g," "),J=ie=>ie==null?"":typeof ie=="object"?JSON.stringify(ie,null,2):String(ie),X=oe(()=>{if(!r.value)return null;const ie=i.node?.fullKey||i.node?.name;return ie?Ky(ie):null}),he=()=>{!n.value||!i.hierarchical||i.toggleGroup(i.node.fullKey)};return(ie,N)=>{const ae=Fl("DataCatalogTree",!0);return g(),y("div",null,[n.value?(g(),y("div",{key:0,id:X.value||void 0,class:De(a.value)},[t.hierarchical?(g(),y(Q,{key:0},[h("button",{type:"button",class:"flex w-full items-start gap-3 text-left transition hover:text-zinc-900 focus:outline-none",onClick:he,"aria-expanded":o.value},[x(at(qk),{class:De(["mt-1.5 h-4 w-4 shrink-0 text-zinc-400 transition-transform",{"rotate-90 text-sky-500":o.value}])},null,8,["class"]),h("div",BD,[h("p",{class:De(d.value)},[(g(!0),y(Q,null,xe(P.value,(re,ke)=>(g(),y(Q,{key:ke},[re.highlight?(g(),y("mark",ID,U(re.text),1)):(g(),y("span",ND,U(re.text),1))],64))),128))],2),h("p",UD,U(l.value),1)]),h("span",zD,U(o.value?"Hide":"Show"),1)],8,LD),x(gc,{name:"catalog-collapse"},{default:j(()=>[rt(h("div",{class:De(u.value)},[(g(!0),y(Q,null,xe(t.node.children,re=>(g(),pe(ae,{key:re.fullKey,node:re,depth:t.depth+1,"expanded-keys":t.expandedKeys,"auto-expanded-keys":t.autoExpandedKeys,"toggle-group":t.toggleGroup,"search-term":t.searchTerm,hierarchical:t.hierarchical,"pending-deletes":t.pendingDeletes,onEdit:N[0]||(N[0]=ke=>s("edit",ke)),onDelete:N[1]||(N[1]=ke=>s("delete",ke))},null,8,["node","depth","expanded-keys","auto-expanded-keys","toggle-group","search-term","hierarchical","pending-deletes"]))),128))],2),[[xt,o.value]])]),_:1})],64)):(g(),y(Q,{key:1},[h("div",FD,[h("div",HD,[h("p",{class:De(d.value)},[(g(!0),y(Q,null,xe(P.value,(re,ke)=>(g(),y(Q,{key:ke},[re.highlight?(g(),y("mark",WD,U(re.text),1)):(g(),y("span",qD,U(re.text),1))],64))),128))],2),h("p",KD,U(l.value),1)])]),h("div",{class:De(u.value)},[(g(!0),y(Q,null,xe(t.node.children,re=>(g(),pe(ae,{key:re.fullKey,node:re,depth:t.depth+1,"expanded-keys":t.expandedKeys,"auto-expanded-keys":t.autoExpandedKeys,"toggle-group":t.toggleGroup,"search-term":t.searchTerm,hierarchical:t.hierarchical,"pending-deletes":t.pendingDeletes,onEdit:N[2]||(N[2]=ke=>s("edit",ke)),onDelete:N[3]||(N[3]=ke=>s("delete",ke))},null,8,["node","depth","expanded-keys","auto-expanded-keys","toggle-group","search-term","hierarchical","pending-deletes"]))),128))],2)],64))],10,RD)):(g(),y("div",{key:1,id:X.value||void 0,class:De(k.value)},[h("div",JD,[h("div",YD,[h("h3",XD,[(g(!0),y(Q,null,xe(P.value,(re,ke)=>(g(),y(Q,{key:`leaf-${ke}`},[re.highlight?(g(),y("mark",QD,U(re.text),1)):(g(),y("span",ZD,U(re.text),1))],64))),128))]),t.node.data?.type?(g(),y("span",eT,U(t.node.data.type),1)):I("",!0)]),h("div",tT,[x(Ie,{size:"sm",variant:"secondary",class:De(C.value),onClick:N[4]||(N[4]=Kt(re=>s("delete",t.node),["stop"]))},{default:j(()=>[ue(U(c.value?"Undo":"Delete"),1)]),_:1},8,["class"]),x(Ie,{size:"sm",variant:"secondary",class:"shadow-none",onClick:N[5]||(N[5]=re=>s("edit",t.node))},{default:j(()=>[...N[6]||(N[6]=[ue(" Edit ",-1)])]),_:1})])]),h("div",sT,[t.node.data?.description?(g(),y("div",iT,[N[7]||(N[7]=h("p",{class:"text-xs font-medium text-gray-600 dark:text-zinc-200"}," Description ",-1)),h("p",nT,U(t.node.data.description),1)])):I("",!0),t.node.fullKey?(g(),y("div",rT,[x(nr,{value:t.node.fullKey||"",successMessage:"Dot notation copied",variant:"bare",class:De(Ru),title:"Copy dot notation"},{default:j(({copied:re})=>[re?(g(),y("svg",lT,[...N[9]||(N[9]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(g(),y("svg",oT,[...N[8]||(N[8]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"},null,-1)])]))]),_:1},8,["value"]),h("div",aT,[N[10]||(N[10]=h("p",{class:"text-xs font-medium text-gray-700 dark:text-zinc-100"}," Location (in Dot Notation) ",-1)),h("p",uT,[H.value.length>0?(g(!0),y(Q,{key:0},xe(H.value,(re,ke)=>(g(),y(Q,{key:`key-${ke}`},[re.highlight?(g(),y("mark",dT,U(re.text),1)):(g(),y("span",cT,U(re.text),1))],64))),128)):(g(),y("span",hT,""))])])])):I("",!0),h("div",fT,[x(nr,{value:t.node.data?.path||"",successMessage:"Path copied",variant:"bare",class:De(Ru),title:"Copy path"},{default:j(({copied:re})=>[re?(g(),y("svg",mT,[...N[12]||(N[12]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(g(),y("svg",pT,[...N[11]||(N[11]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"},null,-1)])]))]),_:1},8,["value"]),h("div",gT,[N[13]||(N[13]=h("p",{class:"text-xs font-medium text-gray-700 dark:text-zinc-100"}," File Path ",-1)),h("p",vT,[z.value.length>0?(g(!0),y(Q,{key:0},xe(z.value,(re,ke)=>(g(),y(Q,{key:`path-${ke}`},[re.highlight?(g(),y("mark",yT,U(re.text),1)):(g(),y("span",bT,U(re.text),1))],64))),128)):(g(),y("span",xT,""))])])]),(g(!0),y(Q,null,xe(p.value,(re,ke)=>(g(),y("div",{key:`meta-${ke}`,class:"flex items-start justify-between gap-3 border-t border-gray-200 pt-4 text-sm dark:border-zinc-700"},[h("div",kT,[h("p",wT,U(M(ke)),1),h("pre",_T,U(J(re)),1)])]))),128)),h("div",ST,[x(nr,{value:B.value,successMessage:"data_read() command copied",variant:"bare",class:De([Ru,"w-10"]),title:"Copy data_read() helper","aria-label":`Copy ${B.value}`},{default:j(({copied:re})=>[re?(g(),y("svg",AT,[...N[15]||(N[15]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(g(),y("svg",CT,[...N[14]||(N[14]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8z"},null,-1)])]))]),_:1},8,["value","class","aria-label"]),h("div",VT,[N[16]||(N[16]=h("p",{class:"text-xs font-medium text-gray-700 dark:text-zinc-100"}," Usage ",-1)),h("p",{class:"mt-1 font-mono text-sm leading-relaxed text-gray-900 dark:text-zinc-100 truncate",title:B.value},U(B.value),9,MT)])])])],10,GD))])}}}),TT=Wg(DT,[["__scopeId","data-v-20f9f092"]]),$T={key:0,class:"flex items-center justify-center h-96"},ET={key:1,class:"flex-1 p-10"},OT={key:2,class:"flex min-h-screen"},PT={class:"w-64 shrink-0 border-r border-gray-200 p-6 dark:border-gray-800"},jT={class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},RT={class:"flex items-center gap-2 mb-4"},LT={class:"text-xs text-gray-500 dark:text-gray-400 font-mono truncate"},BT={class:"space-y-1"},IT={key:0,class:"ml-6 space-y-0.5 mt-1"},NT=["href","onClick"],UT={key:1,class:"ml-6 mt-1 space-y-0.5"},zT=["href","onClick"],FT={class:"truncate"},HT={key:0,class:"shrink-0 rounded-full bg-gray-100 px-2 py-0.5 text-[10px] font-medium text-gray-500 dark:bg-gray-800 dark:text-gray-300"},WT={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},qT={class:"space-y-1"},KT={class:"flex-1 p-10"},GT={id:"overview"},JT={class:"space-y-3"},YT={class:"flex items-center justify-between"},XT={class:"flex-1"},QT={class:"text-sm text-gray-900 dark:text-white"},ZT={class:"text-gray-600 dark:text-gray-400"},e$={class:"text-gray-600 dark:text-gray-400"},t$={id:"basics"},s$={key:0},i$={key:1},n$={key:2},r$={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},o$={key:0,class:"space-y-5"},l$={class:"flex items-center gap-2"},a$={class:"flex-1 px-3 py-2 text-sm font-mono text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-md"},u$={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},d$={key:0,class:"space-y-5"},c$={id:"settings"},h$={key:0},f$={key:1},p$={key:2},m$={class:"text-sm text-gray-600 dark:text-gray-400 mb-6"},g$={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 mb-6"},v$={class:"space-y-4 mb-6"},y$={class:"flex items-center gap-2 w-32 shrink-0"},b$={class:"text-sm text-gray-700 dark:text-gray-300 capitalize"},x$={class:"flex-1"},k$={class:"border-t border-gray-200 dark:border-gray-700 pt-4"},w$={class:"space-y-3"},_$={key:0,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 mb-6"},S$={class:"space-y-4 mb-6"},C$={class:"flex items-center gap-2 w-32 shrink-0"},A$={class:"text-sm text-gray-700 dark:text-gray-300 capitalize"},V$={class:"flex-1"},M$={class:"border-t border-gray-200 dark:border-gray-700 pt-4"},D$={class:"space-y-3"},T$={key:1,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 mb-6"},$$={class:"space-y-4 mb-6"},E$={class:"flex items-center gap-2 w-32 shrink-0"},O$={class:"text-sm text-gray-700 dark:text-gray-300 capitalize"},P$={class:"flex-1"},j$={class:"border-t border-gray-200 dark:border-gray-700 pt-4"},R$={class:"space-y-3"},L$={id:"notebooks"},B$={class:"rounded-lg bg-gray-50 p-12 dark:bg-gray-800/50 text-center"},I$={id:"data"},N$={class:"mb-6 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},U$={class:"mb-6"},z$={key:0,class:"space-y-4"},F$={key:1,class:"mt-4 rounded-lg border border-red-200 bg-red-50 p-4 dark:border-red-500/40 dark:bg-red-900/20"},H$={class:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"},W$={class:"text-sm font-medium text-red-700 dark:text-red-200"},q$={class:"flex gap-2"},K$={class:"mt-3 list-disc space-y-1 pl-5 text-xs font-mono text-red-700 dark:text-red-200/90"},G$={key:2,class:"rounded-xl border border-dashed border-zinc-300 bg-white/70 p-10 text-center dark:border-zinc-700 dark:bg-zinc-900/40"},J$={class:"text-sm font-medium text-zinc-700 dark:text-zinc-200"},Y$={id:"connections"},X$={key:0},Q$={key:1},Z$={key:2},eE={class:"space-y-6"},tE={key:0,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},sE={key:1},iE={key:0,class:"rounded-lg bg-gray-50 p-12 dark:bg-gray-800/50 text-center"},nE={key:1,class:"space-y-4"},rE=["id"],oE=["onClick","title"],lE={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},aE={key:1,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},uE={class:"text-sm font-semibold text-gray-900 dark:text-white mb-4 font-mono pr-8"},dE={class:"space-y-4"},cE={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},hE=["onUpdate:modelValue","disabled"],fE={id:"packages"},pE={key:0},mE={key:1},gE={key:2},vE={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},yE={class:"space-y-5"},bE={class:"pt-4 border-t border-gray-200 dark:border-gray-700"},xE={key:0,class:"space-y-3"},kE={class:"flex flex-col gap-3"},wE={class:"grid gap-3 grid-cols-[1fr_160px]"},_E={class:"flex items-center justify-between"},SE={key:1,class:"text-xs text-gray-500 dark:text-gray-400 mb-4"},CE={class:"mt-4"},AE={id:"env"},VE={key:0},ME={key:1},DE={key:2},TE={key:0,class:"space-y-6"},$E={key:0,class:"rounded-lg bg-gray-50 p-12 dark:bg-gray-800/50 text-center"},EE={key:1,class:"space-y-6"},OE={class:"flex items-center justify-between mb-4"},PE={class:"text-sm font-semibold text-gray-900 dark:text-white"},jE={class:"space-y-4"},RE={class:"flex items-start gap-3"},LE={class:"mt-2"},BE={class:"flex-1 grid grid-cols-2 gap-3"},IE=["value","onInput"],NE={class:"relative"},UE=["onUpdate:modelValue","onInput","type","placeholder"],zE=["onClick"],FE={key:0,class:"ml-10 text-xs text-zinc-500 dark:text-zinc-400"},HE={key:1,class:"ml-10 text-xs text-zinc-400 dark:text-zinc-500"},WE={class:"rounded-lg bg-gray-50 p-4 dark:bg-gray-800/50 border border-zinc-200 dark:border-zinc-700"},qE={key:1,class:"space-y-6"},KE={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},GE={class:"space-y-6"},JE={key:0,class:"max-h-64 overflow-y-auto border border-gray-200 dark:border-gray-700 rounded-md"},YE=["onClick","onMouseenter"],XE={class:"flex items-start justify-between gap-2"},QE={class:"flex-1 min-w-0"},ZE={class:"text-sm font-mono font-medium text-gray-900 dark:text-gray-100"},e7={key:0,class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5 line-clamp-1"},t7={key:1,class:"text-xs text-gray-500 dark:text-gray-500 mt-0.5"},s7={class:"text-xs text-gray-500 dark:text-gray-500 font-mono shrink-0"},i7={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},n7={key:1,class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},r7={class:"relative"},o7={class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},l7={__name:"ProjectDetailView",setup(t){const e=Sr(),s=Ta(),i=Ea(),n=ve(null),r=ve(!0),o=ve(null),l=ve("overview"),a=ve(null),d=ve(""),u=ve(new Set),f=ve(!1),c=ve(null),p=ve(!1),k=ve(null),C=ve(!1),A=ve(new Set),V=ve(!1),R=ve(null),P=ve({}),z=ve(!1),H=ve(null),B=ve(!1),M=ve([]),J=ve([]),X=ve([]);ve(!1);const he=ve(null),ie=ve(!1),N=ve(null),ae=ve(!1),re=ve(new Set),ke=ve([]),K=ve({use_renv:!1,default_packages:[]}),T=ve(!1),b=ve(null),m=ve(!1),w=ve(!1),Y=ve(""),Z=ve([]),qe=ve(!1),We=ve(-1),Ee=ve({name:"",source:"cran",auto_attach:!0}),tt=ve({}),ee=ve({}),Me=ve(""),$=ve(!1),Oe=ve(null),Fe=ve(!1),D=ve(!1),E=ve({}),F=ve("grouped"),te=ve(!1),ne=O=>["flex items-center gap-2 px-3 py-2 rounded-md text-sm transition",l.value===O?"bg-sky-50 text-sky-700 font-medium dark:bg-sky-900/20 dark:text-sky-400":"text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-800"],se=()=>{const O=e.query.section;O&&["overview","settings","notebooks","data","connections","packages","env"].includes(O)?l.value=O:l.value="overview"};Ye(l,O=>{s.replace({query:{...e.query,section:O}}),(O==="settings"||O==="basics")&&!R.value&&lh(),O==="connections"&&!he.value&&uh(),O==="packages"&&ke.value.length===0&&ch(),O==="env"&&Object.keys(tt.value).length===0&&ph()}),Ye(()=>e.query.section,O=>{const S=["overview","settings","notebooks","data","connections","packages","env"];O&&O!==l.value&&S.includes(O)&&(l.value=O)});let de=null;Ye(Y,()=>{de&&clearTimeout(de),de=setTimeout(()=>{t1()},300)});const me=(O="")=>O.split(/[._-]/).filter(Boolean).map(S=>S.charAt(0).toUpperCase()+S.slice(1)).join(" "),be=O=>JSON.parse(JSON.stringify(O)),fe=O=>Array.isArray(O)?O.map((S,L)=>[String(L),S]):Object.entries(O),Le=(O,S="",L=0)=>!O||typeof O!="object"?[]:fe(O).reduce((ye,[we,Ve])=>{if(Ve==null)return ye;const Vt=S?`${S}.${we}`:we;if(typeof Ve=="object"&&!Array.isArray(Ve)&&Ve.path)return ye.push({type:"leaf",name:we,displayName:me(we),fullKey:Vt,data:Ve,leafCount:1,depth:L}),ye;if(typeof Ve=="object"){const wt=Le(Ve,Vt,L+1);if(wt.length>0){const ks=wt.reduce((Fs,Ga)=>Fs+(Ga.leafCount||0),0);ye.push({type:"group",name:we,displayName:me(we),fullKey:Vt,children:wt,leafCount:ks,depth:L})}}return ye},[]),Ce=O=>O.slice().sort((S,L)=>S.displayName.localeCompare(L.displayName,void 0,{sensitivity:"base",numeric:!0})).map(S=>S.type==="group"?{...S,children:Ce(S.children)}:S),je=(O,S)=>{if(!S)return!0;const L=S.toLowerCase(),ye=[O.displayName,O.name,O.fullKey];return O.type==="leaf"&&O.data?.path&&ye.push(O.data.path),ye.some(we=>we&&we.toLowerCase().includes(L))},Pe=(O,S)=>{if(!S)return{nodes:O,matchedKeys:new Set};const L=[],ye=new Set;return O.forEach(we=>{if(we.type==="leaf"){je(we,S)&&(L.push(we),ye.add(we.fullKey));return}const Ve=Pe(we.children,S);if(je(we,S)||Ve.nodes.length>0){const wt=Ve.nodes,ks=wt.reduce((Fs,Ga)=>Fs+(Ga.leafCount||0),0);L.push({...we,children:wt,leafCount:ks||we.leafCount}),ye.add(we.fullKey),Ve.matchedKeys.forEach(Fs=>ye.add(Fs))}}),{nodes:L,matchedKeys:ye}},Ue=oe(()=>{const O=a.value;return!O||typeof O!="object"?[]:!Array.isArray(O)&&O.path?[{type:"leaf",name:O.name||"data",displayName:me(O.name||"data"),fullKey:O.name||"data",data:O,leafCount:1,depth:0}]:Ce(Le(O))}),st=oe(()=>d.value.trim().toLowerCase()),Ge=oe(()=>{const O=st.value;return O?Pe(Ue.value,O):{nodes:Ue.value,matchedKeys:new Set}}),it=oe(()=>Ge.value.nodes),At=oe(()=>Ge.value.matchedKeys),is=oe(()=>st.value.length>0),ns=oe(()=>is.value?[]:(Ue.value||[]).filter(O=>(O.depth||0)===0).map(O=>{const S=O.fullKey||O.name||"";return{anchorId:S?Ky(S):null,label:O.displayName||me(O.name||S||"data source"),count:O.leafCount||(O.type==="leaf"?1:0),nodeKey:S}}).filter(O=>O.anchorId&&O.label)),zs=oe(()=>A.value.size>0),un=oe(()=>A.value.size),Xe=oe(()=>Array.from(A.value)),qt=O=>{let S=0;return O.forEach(L=>{S=Math.max(S,L.depth||0),L.type==="group"&&L.children&&(S=Math.max(S,qt(L.children)))}),S},Nn=oe(()=>qt(Ue.value)),dn=oe(()=>Nn.value>2),Wa=oe(()=>{const O=P.value.directories||{},S={},L=["functions","notebooks","scripts"];return Object.keys(O).forEach(ye=>{L.includes(ye)&&(S[ye]=O[ye])}),S}),Vs=oe(()=>{const O=P.value.directories||{},S={};return Object.keys(O).forEach(L=>{(L.startsWith("inputs_")||L.includes("_raw")||L.includes("_intermediate")||L.includes("_final"))&&(S[L]=O[L])}),S}),Ms=oe(()=>{const O=P.value.directories||{},S={};return Object.keys(O).forEach(L=>{(L.startsWith("outputs_")||L.includes("_figures")||L.includes("_tables")||L.includes("_models")||L.includes("_reports")||L==="cache"||L==="scratch")&&!L.startsWith("inputs_")&&(S[L]=O[L])}),S}),ps=O=>O.replace(/_/g," ").replace(/\b\w/g,S=>S.toUpperCase()),Ds=oe(()=>{const O=n.value?.type;return O?{project:"Standard Project Structure",project_sensitive:"Privacy Sensitive Project Structure",presentation:"Presentation Structure",course:"Course Structure"}[O]||O:"Standard Project Structure"}),Wo=(O,S,L)=>{const ye=S.split(".").filter(Boolean);if(ye.length===0)return null;const we=be(O||{});let Ve=we;for(let Vt=0;Vt<ye.length-1;Vt++){const wt=ye[Vt];(!Ve[wt]||typeof Ve[wt]!="object"||Array.isArray(Ve[wt]))&&(Ve[wt]={}),Ve=Ve[wt]}return Ve[ye[ye.length-1]]=be(L),we},G=(O,S)=>{if(!O||!S)return null;const L=S.split(".").filter(Boolean);if(L.length===0)return null;let ye=O;for(let we=0;we<L.length;we++){const Ve=L[we];if(!ye||typeof ye!="object"||!(Ve in ye))return null;ye=ye[Ve]}return ye},_=O=>{const S=O.split(".").filter(Boolean);if(S.length<=1)return;const L=new Set(u.value);let ye="";for(let we=0;we<S.length-1;we++)ye=ye?`${ye}.${S[we]}`:S[we],L.add(ye);u.value=L},v=async(O,S)=>{if(!O)return;if(S){_(S);const ye=new Set(u.value);ye.add(S),u.value=ye}await Mn();const L=document.getElementById(O);L&&L.scrollIntoView({behavior:"smooth",block:"start"})},W=async O=>{const S=await fetch(`/api/project/${e.params.id}/data`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:O})}),L=await S.json();if(!S.ok||L.error)throw new Error(L.error||"Failed to save data catalog")},ce=O=>{O&&(C.value=!1,c.value={fullKey:O.fullKey,name:O.name,data:be(O.data||{})},k.value=null,f.value=!0)},ge=()=>{C.value=!0,c.value={fullKey:"",data:{}},k.value=null,f.value=!0},Je=O=>{f.value=O,O||(c.value=null,k.value=null,p.value=!1,C.value=!1)},Et=async O=>{if(!O||!O.fullKey||!O.data){k.value=O?.error||"Invalid data entry payload";return}const S=O.fullKey.trim(),L=!!O.isNew;if(!S){k.value="Dot notation key is required";return}if(L&&G(a.value,S)){k.value="A data source with this key already exists";return}const ye=be(a.value),we=Wo(a.value,S,O.data);if(!we){k.value="Unable to write data entry to catalog";return}a.value=we,p.value=!0,k.value=null;try{if(await W(we),_(S),i.success(L?"Data Source Added":"Data Catalog Updated",L?"Data entry created successfully":"Data entry saved successfully"),f.value=!1,c.value=null,C.value=!1,A.value.has(S)){const Ve=new Set(A.value);Ve.delete(S),A.value=Ve}}catch(Ve){a.value=ye,k.value=Ve.message||"Failed to save data catalog",i.error("Save Failed",Ve.message||"Failed to save data catalog")}finally{p.value=!1}},Un=(O,S)=>{if(!O||!S)return null;const L=S.split(".").filter(Boolean);if(L.length===0)return null;const ye=be(O),we=[];let Ve=ye;for(let wt=0;wt<L.length;wt++){const ks=L[wt];if(!Ve||typeof Ve!="object"||!(ks in Ve))return null;we.push({parent:Ve,key:ks}),Ve=Ve[ks]}const Vt=we.pop();if(!Vt)return null;delete Vt.parent[Vt.key];for(let wt=we.length-1;wt>=0;wt--){const{parent:ks,key:Fs}=we[wt];ks[Fs]&&typeof ks[Fs]=="object"&&!Array.isArray(ks[Fs])&&Object.keys(ks[Fs]).length===0&&delete ks[Fs]}return ye},vi=async()=>{if(!zs.value)return;V.value=!0;const O=be(a.value);let S=be(O);for(const L of A.value){const ye=Un(S,L);if(!ye){i.error("Delete Failed",`Unable to locate ${L} in catalog`),V.value=!1;return}S=ye}try{await W(S),a.value=S,i.success("Data Catalog Updated","Staged deletions have been saved"),A.value=new Set}catch(L){i.error("Delete Failed",L.message||"Failed to save catalog changes")}finally{V.value=!1}},qa=O=>{if(!O||!O.fullKey)return;const S=new Set(A.value);S.has(O.fullKey)?S.delete(O.fullKey):S.add(O.fullKey),A.value=S},Gy=()=>{A.value=new Set},Jy=O=>{const S=new Set(u.value);S.has(O)?S.delete(O):S.add(O),u.value=S},rh=async()=>{r.value=!0,o.value=null;try{const S=await(await fetch(`/api/project/${e.params.id}`)).json();S.error?o.value=S.error:n.value=S}catch(O){o.value="Failed to load project: "+O.message}finally{r.value=!1}},oh=async()=>{try{const S=await(await fetch(`/api/project/${e.params.id}/data`)).json();S.error||(a.value=S.data||S)}catch(O){console.error("Failed to load data catalog:",O)}},lh=async()=>{z.value=!0,H.value=null;try{const S=await(await fetch(`/api/project/${e.params.id}/settings`)).json();S.error?H.value=S.error:(R.value=S.settings,P.value=JSON.parse(JSON.stringify(S.settings)),P.value.scaffold||(P.value.scaffold={notebook_format:"quarto",positron:!1}))}catch(O){H.value="Failed to load settings: "+O.message}finally{z.value=!1}},Yy=async()=>{switch(l.value){case"author":case"settings":await ah();break;case"packages":await hh();break;case"connections":await dh();break;case"env":await mh();break;case"overview":case"notebooks":case"data":i.info("No Changes to Save","This section has no editable settings");break;default:i.info("No Changes to Save","This section has no editable settings")}},ah=async()=>{B.value=!0;try{const O=[...M.value,...J.value,...X.value];if(O.length>0){const we=await(await fetch(`/api/project/${e.params.id}/directories`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({directories:O})})).json();if(!we.success){i.error("Directory Creation Failed",we.error||"Failed to create directories"),B.value=!1;return}M.value=[],J.value=[],X.value=[]}const L=await(await fetch(`/api/project/${e.params.id}/settings`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(P.value)})).json();if(L.success){const ye=O.length>0?`Settings updated and ${O.length} director${O.length===1?"y":"ies"} created`:"Project settings have been updated";i.success("Settings Saved",ye),R.value=JSON.parse(JSON.stringify(P.value)),await lh()}else i.error("Save Failed",L.error||"Failed to save settings")}catch(O){i.error("Save Failed",O.message)}finally{B.value=!1}},Xy=O=>{const S=document.getElementById(`connection-${O}`);S&&S.scrollIntoView({behavior:"smooth",block:"start"})},Qy=O=>{O&&v(O.anchorId,O.nodeKey)},uh=async()=>{ie.value=!0,N.value=null;try{const S=await(await fetch(`/api/project/${e.params.id}/connections`)).json();S.error?N.value=S.error:he.value=S}catch(O){N.value="Failed to load connections: "+O.message}finally{ie.value=!1}},Zy=O=>{re.value.has(O)?re.value.delete(O):re.value.add(O)},dh=async()=>{ae.value=!0;try{const O={...he.value};O.connections&&(O.connections=Object.fromEntries(Object.entries(O.connections).filter(([ye])=>!re.value.has(ye))));const L=await(await fetch(`/api/project/${e.params.id}/connections`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(O)})).json();L.success?(re.value.clear(),i.success("Connections Saved","Connection settings have been updated"),await uh()):i.error("Save Failed",L.error||"Failed to save connections")}catch(O){i.error("Save Failed",O.message)}finally{ae.value=!1}},ch=async()=>{T.value=!0,b.value=null;try{const S=await(await fetch(`/api/project/${e.params.id}/packages`)).json();S.error?b.value=S.error:(ke.value=(S.packages||[]).map(L=>({name:L.name||"",source:L.source||"cran",auto_attach:L.auto_attach!==void 0?L.auto_attach:!0,ref:L.ref||""})),K.value={use_renv:S.use_renv||!1,default_packages:JSON.parse(JSON.stringify(ke.value))})}catch(O){b.value="Failed to load packages: "+O.message}finally{T.value=!1}},hh=async()=>{m.value=!0;try{const S=await(await fetch(`/api/project/${e.params.id}/packages`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({use_renv:K.value.use_renv,packages:K.value.default_packages})})).json();S.success?(i.success("Packages Saved","Package configuration has been updated"),await ch()):i.error("Save Failed",S.error||"Failed to save packages")}catch(O){i.error("Save Failed",O.message)}finally{m.value=!1}},e1=()=>{K.value.default_packages||(K.value.default_packages=[]),K.value.default_packages.push({name:"",source:"cran",auto_attach:!0})},t1=async()=>{if(Y.value.length<2){Z.value=[],We.value=-1;return}qe.value=!0;try{const S=await(await fetch(`/api/packages/search?q=${encodeURIComponent(Y.value)}`)).json();console.log("Package search results:",S),Z.value=S.packages||[],We.value=Z.value.length>0?0:-1}catch(O){console.error("Failed to search packages:",O),Z.value=[],We.value=-1}finally{qe.value=!1}},s1=O=>{Z.value.length!==0&&(O.key==="ArrowDown"?(O.preventDefault(),We.value=Math.min(We.value+1,Z.value.length-1)):O.key==="ArrowUp"?(O.preventDefault(),We.value=Math.max(We.value-1,0)):O.key==="Enter"&&We.value>=0?(O.preventDefault(),fh(Z.value[We.value])):O.key==="Escape"&&(Z.value=[],We.value=-1))},fh=O=>{Ee.value.name=O.name,Ee.value.source=O.source,Y.value="",Z.value=[],We.value=-1},i1=()=>{Ee.value.name.trim()&&(ke.value.push({name:Ee.value.name.trim(),source:Ee.value.source,auto_attach:Ee.value.auto_attach}),w.value=!1,i.success("Package Added",`${Ee.value.name} added to package list`))},n1=O=>{K.value.default_packages.splice(O,1)},ph=async()=>{$.value=!0,Oe.value=null;try{const S=await(await fetch(`/api/project/${e.params.id}/env`)).json();S.error?Oe.value=S.error:(tt.value=S.variables||{},ee.value=S.groups||{},Me.value=S.raw_content||"")}catch(O){Oe.value="Failed to load .env: "+O.message}finally{$.value=!1}},mh=async()=>{Fe.value=!0;try{const O=F.value==="raw"?{raw_content:Me.value}:{variables:tt.value,regroup:te.value},L=await(await fetch(`/api/project/${e.params.id}/env`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(O)})).json();L.success?(i.success(".env Saved","Environment variables have been updated"),await ph()):i.error("Save Failed",L.error||"Failed to save .env")}catch(O){i.error("Save Failed",O.message)}finally{Fe.value=!1}},gh=()=>{const O=`NEW_VARIABLE_${Object.keys(tt.value).length+1}`;tt.value[O]=""},r1=O=>{delete tt.value[O]},Ka=O=>["PASSWORD","SECRET","KEY","TOKEN","CREDENTIAL"].some(L=>O.toUpperCase().includes(L)),o1=O=>{E.value[O]=!E.value[O]},vh=O=>D.value||E.value[O]||!Ka(O),yh=O=>{(O.metaKey||O.ctrlKey)&&O.key==="s"&&(O.preventDefault(),l.value==="settings"?ah():l.value==="connections"?dh():l.value==="packages"?hh():l.value==="directories"?saveDirectories():l.value==="env"&&mh())};return es(()=>{se(),rh(),oh(),window.addEventListener("keydown",yh)}),_r(()=>{window.removeEventListener("keydown",yh)}),Ye(()=>e.params.id,(O,S)=>{O&&O!==S&&(l.value="overview",n.value=null,P.value={},he.value=null,ke.value=[],directories.value={},a.value=null,se(),rh(),oh())}),(O,S)=>(g(),y("div",null,[r.value?(g(),y("div",$T,[...S[32]||(S[32]=[h("div",{class:"text-zinc-600 dark:text-zinc-400"},"Loading project...",-1)])])):o.value?(g(),y("div",ET,[x(_i,{type:"error",title:"Error Loading Project",description:o.value},null,8,["description"])])):n.value?(g(),y("div",OT,[h("nav",PT,[h("h2",jT,U(n.value.name),1),h("div",RT,[h("span",LT,U(n.value.path),1),x(nr,{value:n.value.path,variant:"ghost",successMessage:"Path copied",class:"shrink-0"},null,8,["value"])]),h("div",BT,[h("a",{href:"#overview",onClick:S[0]||(S[0]=Kt(L=>l.value="overview",["prevent"])),class:De(ne("overview"))},[x(at($a),{class:"h-4 w-4"}),S[33]||(S[33]=ue(" Overview ",-1))],2),x(ma,null,{default:j(()=>[...S[34]||(S[34]=[ue("Settings",-1)])]),_:1}),h("a",{href:"#basics",onClick:S[1]||(S[1]=Kt(L=>l.value="basics",["prevent"])),class:De(ne("basics"))},[x(at(bc),{class:"h-4 w-4"}),S[35]||(S[35]=ue(" Basics ",-1))],2),h("a",{href:"#settings",onClick:S[2]||(S[2]=Kt(L=>l.value="settings",["prevent"])),class:De(ne("settings"))},[x(at(Gl),{class:"h-4 w-4"}),S[36]||(S[36]=ue(" Project Structure ",-1))],2),h("a",{href:"#packages",onClick:S[3]||(S[3]=Kt(L=>l.value="packages",["prevent"])),class:De(ne("packages"))},[x(at(xc),{class:"h-4 w-4"}),S[37]||(S[37]=ue(" Packages ",-1))],2),h("a",{href:"#connections",onClick:S[4]||(S[4]=Kt(L=>l.value="connections",["prevent"])),class:De(ne("connections"))},[x(at(Sf),{class:"h-4 w-4"}),S[38]||(S[38]=ue(" Connections ",-1))],2),l.value==="connections"&&he.value&&he.value.connections?(g(),y("div",IT,[(g(!0),y(Q,null,xe(he.value.connections,(L,ye)=>(g(),y("a",{key:ye,href:`#connection-${ye}`,onClick:Kt(we=>Xy(ye),["prevent"]),class:"flex items-center gap-2 px-3 py-1 rounded-md text-xs text-gray-600 hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-gray-800 transition"},U(ye),9,NT))),128))])):I("",!0),h("a",{href:"#data",onClick:S[5]||(S[5]=Kt(L=>l.value="data",["prevent"])),class:De(ne("data"))},[x(at(Kk),{class:"h-4 w-4"}),S[39]||(S[39]=ue(" Data ",-1))],2),l.value==="data"&&ns.value.length?(g(),y("div",UT,[(g(!0),y(Q,null,xe(ns.value,L=>(g(),y("a",{key:L.anchorId,href:`#${L.anchorId}`,onClick:Kt(ye=>Qy(L),["prevent"]),class:"flex items-center justify-between gap-2 rounded-md px-3 py-1 text-xs text-gray-600 transition hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-gray-800"},[h("span",FT,U(L.label),1),L.count?(g(),y("span",HT,U(L.count),1)):I("",!0)],8,zT))),128))])):I("",!0),h("a",{href:"#env",onClick:S[6]||(S[6]=Kt(L=>l.value="env",["prevent"])),class:De(ne("env"))},[x(at(_f),{class:"h-4 w-4"}),S[40]||(S[40]=ue(" .env ",-1))],2)]),h("div",WT,[x(Ie,{variant:"primary",onClick:Yy,disabled:B.value||m.value||ae.value||Fe.value,class:"w-full"},{default:j(()=>[ue(U(B.value||m.value||ae.value||Fe.value?"Saving...":"Save"),1)]),_:1},8,["disabled"])]),h("div",qT,[x(ma,null,{default:j(()=>[...S[41]||(S[41]=[ue("Outputs",-1)])]),_:1}),h("a",{href:"#notebooks",onClick:S[7]||(S[7]=Kt(L=>l.value="notebooks",["prevent"])),class:De(ne("notebooks"))},[x(at(td),{class:"h-4 w-4"}),S[42]||(S[42]=ue(" Notebooks ",-1))],2)])]),h("div",KT,[rt(h("div",GT,[S[47]||(S[47]=h("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Overview",-1)),S[48]||(S[48]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Quick overview of your project settings. ",-1)),h("div",JT,[h("button",{onClick:S[8]||(S[8]=L=>l.value="basics"),class:"w-full text-left px-4 py-3 rounded-md bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 hover:border-sky-300 dark:hover:border-sky-700 transition"},[h("div",YT,[h("div",XT,[S[45]||(S[45]=h("div",{class:"text-xs text-gray-500 dark:text-gray-400 mb-1"},"Basics",-1)),h("div",QT,[h("span",null,U(n.value.name||"Untitled"),1),n.value.author?(g(),y(Q,{key:0},[S[43]||(S[43]=h("span",{class:"text-gray-400 dark:text-gray-500 mx-1"},"",-1)),h("span",ZT,U(n.value.author),1)],64)):I("",!0),P.value.scaffold?.notebook_format?(g(),y(Q,{key:1},[S[44]||(S[44]=h("span",{class:"text-gray-400 dark:text-gray-500 mx-1"},"",-1)),h("span",e$,U(P.value.scaffold.notebook_format),1)],64)):I("",!0)])]),S[46]||(S[46]=h("svg",{class:"h-5 w-5 text-gray-400 shrink-0 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))])])])],512),[[xt,l.value==="overview"]]),rt(h("div",t$,[z.value?(g(),y("div",s$,[...S[49]||(S[49]=[h("div",{class:"text-center py-12 text-zinc-500 dark:text-zinc-400"}," Loading settings... ",-1)])])):H.value?(g(),y("div",i$,[x(_i,{type:"error",title:"Error Loading Settings",description:H.value},null,8,["description"])])):(g(),y("div",n$,[S[57]||(S[57]=h("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Basics",-1)),S[58]||(S[58]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Essential project settings. ",-1)),h("div",r$,[P.value.scaffold?(g(),y("div",o$,[x(q,{modelValue:n.value.name,"onUpdate:modelValue":S[9]||(S[9]=L=>n.value.name=L),label:"Project Name",hint:"Changing this will rename the project directory"},null,8,["modelValue"]),h("div",null,[S[50]||(S[50]=h("label",{class:"block text-sm font-semibold text-gray-900 dark:text-white mb-2"}," Filesystem Location ",-1)),h("div",l$,[h("code",a$,U(n.value.path),1),x(nr,{value:n.value.path,successMessage:"Path copied"},null,8,["value"])])]),h("div",null,[S[52]||(S[52]=h("label",{class:"block text-sm font-semibold text-gray-900 dark:text-white mb-3"}," Supported Editors ",-1)),x(Di,{modelValue:P.value.scaffold.positron,"onUpdate:modelValue":S[10]||(S[10]=L=>P.value.scaffold.positron=L),id:"support-positron-edit",description:"Enable Positron-specific workspace and settings files"},{default:j(()=>[...S[51]||(S[51]=[ue(" Positron ",-1)])]),_:1},8,["modelValue"]),S[53]||(S[53]=h("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-3"}," RStudio supported by default ",-1))]),x(as,{modelValue:P.value.scaffold.notebook_format,"onUpdate:modelValue":S[11]||(S[11]=L=>P.value.scaffold.notebook_format=L),label:"Default Notebook Format",hint:"Format used when creating new notebooks"},{default:j(()=>[...S[54]||(S[54]=[h("option",{value:"quarto"},"Quarto (.qmd)",-1),h("option",{value:"rmarkdown"},"R Markdown (.Rmd)",-1)])]),_:1},8,["modelValue"]),h("div",u$,[S[55]||(S[55]=h("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"}," Author Information ",-1)),S[56]||(S[56]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-5"}," Configure author details for this project. ",-1)),P.value.author?(g(),y("div",d$,[x(q,{modelValue:P.value.author.name,"onUpdate:modelValue":S[12]||(S[12]=L=>P.value.author.name=L),label:"Author Name"},null,8,["modelValue"]),x(q,{modelValue:P.value.author.email,"onUpdate:modelValue":S[13]||(S[13]=L=>P.value.author.email=L),label:"Email",type:"email"},null,8,["modelValue"]),x(q,{modelValue:P.value.author.affiliation,"onUpdate:modelValue":S[14]||(S[14]=L=>P.value.author.affiliation=L),label:"Affiliation"},null,8,["modelValue"])])):I("",!0)])])):I("",!0)])]))],512),[[xt,l.value==="basics"]]),rt(h("div",c$,[z.value?(g(),y("div",h$,[...S[59]||(S[59]=[h("div",{class:"text-center py-12 text-zinc-500 dark:text-zinc-400"}," Loading settings... ",-1)])])):H.value?(g(),y("div",f$,[x(_i,{type:"error",title:"Error Loading Settings",description:H.value},null,8,["description"])])):(g(),y("div",p$,[S[68]||(S[68]=h("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Project Structure",-1)),h("p",m$,[S[60]||(S[60]=ue(" This project uses the ",-1)),h("strong",null,U(Ds.value),1),S[61]||(S[61]=ue(" structure. Existing directories cannot be renamed or removed, but you can add custom directories below. ",-1))]),h("div",g$,[S[62]||(S[62]=h("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Workspaces",-1)),S[63]||(S[63]=h("p",{class:"text-xs text-gray-600 dark:text-gray-400 mb-4"}," Functions, notebooks, and scripts scaffolded into every project. ",-1)),h("div",v$,[(g(!0),y(Q,null,xe(Wa.value,(L,ye)=>(g(),y("div",{key:ye,class:"flex items-start gap-4"},[h("div",y$,[x(Re,{"model-value":!0,disabled:"",class:"pointer-events-none opacity-50"}),h("label",b$,U(ps(ye)),1)]),h("div",x$,[x(q,{"model-value":L,disabled:"",prefix:"/",monospace:"",class:"opacity-75"},null,8,["model-value"])])]))),128))]),h("div",k$,[x(bt,{modelValue:M.value,"onUpdate:modelValue":S[15]||(S[15]=L=>M.value=L),"add-label":"Add Workspace Directory","default-item":()=>({key:"",label:"",path:"",category:"workspace",_id:Date.now()})},{default:j(({item:L,index:ye,update:we})=>[h("div",w$,[x(q,{"model-value":L.key,"onUpdate:modelValue":Ve=>we("key",Ve),label:"Key",placeholder:"e.g., helpers",size:"sm",monospace:""},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":L.label,"onUpdate:modelValue":Ve=>we("label",Ve),label:"Label",placeholder:"e.g., Helper Scripts",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":L.path,"onUpdate:modelValue":Ve=>we("path",Ve),label:"Path",placeholder:"e.g., helpers",prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["modelValue","default-item"])])]),Vs.value&&Object.keys(Vs.value).length>0?(g(),y("div",_$,[S[64]||(S[64]=h("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Inputs",-1)),S[65]||(S[65]=h("p",{class:"text-xs text-gray-600 dark:text-gray-400 mb-4"}," Define the read-only locations where raw and prepared data live. ",-1)),h("div",S$,[(g(!0),y(Q,null,xe(Vs.value,(L,ye)=>(g(),y("div",{key:ye,class:"flex items-start gap-4"},[h("div",C$,[x(Re,{"model-value":!0,disabled:"",class:"pointer-events-none opacity-50"}),h("label",A$,U(ps(ye)),1)]),h("div",V$,[x(q,{"model-value":L,disabled:"",prefix:"/",monospace:"",class:"opacity-75"},null,8,["model-value"])])]))),128))]),h("div",M$,[x(bt,{modelValue:J.value,"onUpdate:modelValue":S[16]||(S[16]=L=>J.value=L),"add-label":"Add Input Directory","default-item":()=>({key:"",label:"",path:"",category:"input",_id:Date.now()})},{default:j(({item:L,index:ye,update:we})=>[h("div",D$,[x(q,{"model-value":L.key,"onUpdate:modelValue":Ve=>we("key",Ve),label:"Key",placeholder:"e.g., inputs_archive",size:"sm",monospace:""},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":L.label,"onUpdate:modelValue":Ve=>we("label",Ve),label:"Label",placeholder:"e.g., Archived Inputs",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":L.path,"onUpdate:modelValue":Ve=>we("path",Ve),label:"Path",placeholder:"e.g., inputs/archive",prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["modelValue","default-item"])])])):I("",!0),Ms.value&&Object.keys(Ms.value).length>0?(g(),y("div",T$,[S[66]||(S[66]=h("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Outputs",-1)),S[67]||(S[67]=h("p",{class:"text-xs text-gray-600 dark:text-gray-400 mb-4"}," Results, figures, tables, and rendered outputs. ",-1)),h("div",$$,[(g(!0),y(Q,null,xe(Ms.value,(L,ye)=>(g(),y("div",{key:ye,class:"flex items-start gap-4"},[h("div",E$,[x(Re,{"model-value":!0,disabled:"",class:"pointer-events-none opacity-50"}),h("label",O$,U(ps(ye)),1)]),h("div",P$,[x(q,{"model-value":L,disabled:"",prefix:"/",monospace:"",class:"opacity-75"},null,8,["model-value"])])]))),128))]),h("div",j$,[x(bt,{modelValue:X.value,"onUpdate:modelValue":S[17]||(S[17]=L=>X.value=L),"add-label":"Add Output Directory","default-item":()=>({key:"",label:"",path:"",category:"output",_id:Date.now()})},{default:j(({item:L,index:ye,update:we})=>[h("div",R$,[x(q,{"model-value":L.key,"onUpdate:modelValue":Ve=>we("key",Ve),label:"Key",placeholder:"e.g., outputs_animations",size:"sm",monospace:""},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":L.label,"onUpdate:modelValue":Ve=>we("label",Ve),label:"Label",placeholder:"e.g., Animations",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":L.path,"onUpdate:modelValue":Ve=>we("path",Ve),label:"Path",placeholder:"e.g., outputs/animations",prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["modelValue","default-item"])])])):I("",!0)]))],512),[[xt,l.value==="settings"]]),rt(h("div",L$,[S[70]||(S[70]=h("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Rendered Notebooks",-1)),S[71]||(S[71]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Browse and access your rendered Quarto/RMarkdown notebooks. ",-1)),h("div",B$,[x(at(td),{class:"h-12 w-12 mx-auto mb-4 text-gray-400"}),S[69]||(S[69]=h("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Notebook browser coming soon... ",-1))])],512),[[xt,l.value==="notebooks"]]),rt(h("div",I$,[h("div",N$,[S[73]||(S[73]=h("div",null,[h("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white"},"Data Catalog"),h("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Browse your project's data sources with copy commands. ")],-1)),x(Ie,{variant:"primary",size:"sm",class:"inline-flex items-center gap-2",onClick:ge},{default:j(()=>[x(at(Xk),{class:"h-4 w-4"}),S[72]||(S[72]=ue(" Add Data Source ",-1))]),_:1})]),h("div",U$,[x(q,{modelValue:d.value,"onUpdate:modelValue":S[18]||(S[18]=L=>d.value=L),label:"Search data sources",placeholder:"Filter by name, prefix, or file path"},null,8,["modelValue"])]),it.value.length>0?(g(),y("div",z$,[(g(!0),y(Q,null,xe(it.value,L=>(g(),pe(TT,{key:L.fullKey,node:L,"expanded-keys":u.value,"auto-expanded-keys":At.value,"toggle-group":Jy,"search-term":d.value,hierarchical:dn.value,"pending-deletes":A.value,onEdit:ce,onDelete:qa},null,8,["node","expanded-keys","auto-expanded-keys","search-term","hierarchical","pending-deletes"]))),128))])):I("",!0),zs.value?(g(),y("div",F$,[h("div",H$,[h("div",null,[h("p",W$,U(un.value)+" data source"+U(un.value===1?"":"s")+" marked for deletion. ",1),S[74]||(S[74]=h("p",{class:"text-xs text-red-600 dark:text-red-200/80"}," Changes will be applied when you save. ",-1))]),h("div",q$,[x(Ie,{variant:"secondary",size:"sm",class:"shadow-none",disabled:V.value,onClick:Gy},{default:j(()=>[...S[75]||(S[75]=[ue(" Cancel ",-1)])]),_:1},8,["disabled"]),x(Ie,{size:"sm",class:"bg-red-600 text-white hover:bg-red-500 focus-visible:outline-red-600 dark:bg-red-500 dark:hover:bg-red-400",disabled:V.value,onClick:vi},{default:j(()=>[ue(U(V.value?"Saving":"Save Changes"),1)]),_:1},8,["disabled"])])]),h("ul",K$,[(g(!0),y(Q,null,xe(Xe.value,L=>(g(),y("li",{key:L},U(L),1))),128))])])):is.value?(g(),y("div",G$,[h("p",J$,' No data sources match "'+U(d.value)+'". ',1),S[76]||(S[76]=h("p",{class:"mt-2 text-xs text-zinc-500 dark:text-zinc-400"}," Try adjusting your search terms or clearing the filter. ",-1))])):(g(),y(Q,{key:3},[!zs.value&&(!a.value||Object.keys(a.value||{}).length===0)?(g(),pe(aD,{key:0,title:"No Data Sources",description:"This project doesn't have any data sources defined in its settings",icon:"database"})):I("",!0)],64))],512),[[xt,l.value==="data"]]),x(jD,{mode:C.value?"create":"edit",modelValue:f.value,"onUpdate:modelValue":[S[19]||(S[19]=L=>f.value=L),Je],entry:c.value,saving:p.value,error:k.value,onSave:Et},null,8,["mode","modelValue","entry","saving","error"]),rt(h("div",Y$,[ie.value?(g(),y("div",X$,[...S[77]||(S[77]=[h("div",{class:"text-center py-12 text-zinc-500 dark:text-zinc-400"}," Loading connections... ",-1)])])):N.value?(g(),y("div",Q$,[x(_i,{type:"error",title:"Error Loading Connections",description:N.value},null,8,["description"])])):(g(),y("div",Z$,[S[82]||(S[82]=h("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Connections",-1)),S[83]||(S[83]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Manage database and external service connections for this project. ",-1)),h("div",eE,[he.value&&he.value.options?(g(),y("div",tE,[S[78]||(S[78]=h("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Connection Options",-1)),x(q,{modelValue:he.value.options.default_connection,"onUpdate:modelValue":S[20]||(S[20]=L=>he.value.options.default_connection=L),label:"Default Connection",hint:"Name of the default connection to use"},null,8,["modelValue"])])):I("",!0),he.value&&he.value.connections?(g(),y("div",sE,[Object.keys(he.value.connections).length===0?(g(),y("div",iE,[x(at(Sf),{class:"h-12 w-12 mx-auto mb-4 text-gray-400"}),S[79]||(S[79]=h("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," No connections defined yet ",-1))])):(g(),y("div",nE,[(g(!0),y(Q,null,xe(he.value.connections,(L,ye)=>(g(),y("div",{key:ye,id:`connection-${ye}`,class:De(["rounded-lg p-6 scroll-mt-6 relative transition",re.value.has(ye)?"bg-red-50 dark:bg-red-900/10 opacity-60":"bg-gray-50 dark:bg-gray-800/50"])},[h("button",{onClick:we=>Zy(ye),class:De(["absolute top-3 right-3 p-1.5 rounded-md border border-gray-300 transition dark:border-gray-600",re.value.has(ye)?"text-gray-600 hover:bg-gray-100 hover:border-gray-400 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:border-gray-500":"text-red-700 hover:bg-gray-100 hover:border-red-600 dark:text-red-400 dark:hover:bg-gray-700 dark:hover:border-red-500"]),title:re.value.has(ye)?"Undo delete":"Delete connection"},[re.value.has(ye)?(g(),y("svg",lE,[...S[80]||(S[80]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3"},null,-1)])])):(g(),y("svg",aE,[...S[81]||(S[81]=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"},null,-1)])]))],10,oE),h("div",{class:De({"line-through opacity-50":re.value.has(ye)})},[h("h3",uE,U(ye),1),h("div",dE,[(g(!0),y(Q,null,xe(L,(we,Ve)=>(g(),y("div",{key:Ve},[h("label",cE,U(Ve),1),rt(h("input",{"onUpdate:modelValue":Vt=>he.value.connections[ye][Ve]=Vt,type:"text",disabled:re.value.has(ye),class:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 px-3 py-2 text-sm text-gray-900 dark:text-gray-100 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500 font-mono disabled:opacity-50 disabled:cursor-not-allowed"},null,8,hE),[[_n,he.value.connections[ye][Ve]]])]))),128))])],2)],10,rE))),128))]))])):I("",!0)])]))],512),[[xt,l.value==="connections"]]),rt(h("div",fE,[T.value?(g(),y("div",pE,[...S[84]||(S[84]=[h("div",{class:"text-center py-12"},[h("div",{class:"text-sm text-gray-500 dark:text-gray-400"},"Loading packages...")],-1)])])):b.value?(g(),y("div",mE,[x(_i,{type:"error",title:"Error Loading Packages",description:b.value},null,8,["description"])])):(g(),y("div",gE,[S[89]||(S[89]=h("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Packages & Dependencies",-1)),S[90]||(S[90]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Configure package management and default packages for this project. ",-1)),h("div",vE,[h("div",yE,[x(Re,{modelValue:K.value.use_renv,"onUpdate:modelValue":S[21]||(S[21]=L=>K.value.use_renv=L),label:"Enable renv",description:"Use renv for package version management and reproducibility"},null,8,["modelValue"]),h("div",bE,[S[88]||(S[88]=h("p",{class:"text-xs text-gray-600 dark:text-gray-400 mb-4"},"Use this list to preseed notebooks with your preferred helpers.",-1)),K.value.default_packages&&K.value.default_packages.length?(g(),y("div",xE,[(g(!0),y(Q,null,xe(K.value.default_packages,(L,ye)=>(g(),y("div",{key:`pkg-${ye}`,class:"rounded-md border border-gray-200 p-4 dark:border-gray-700"},[h("div",kE,[h("div",wE,[L.source==="cran"||L.source==="bioconductor"?(g(),pe(nh,{key:0,modelValue:L.name,"onUpdate:modelValue":we=>L.name=we,source:L.source,label:"Package",placeholder:L.source==="cran"?"Search CRAN...":"Search Bioconductor...",onSelect:we=>L.name=we.name},null,8,["modelValue","onUpdate:modelValue","source","placeholder","onSelect"])):(g(),pe(q,{key:1,modelValue:L.name,"onUpdate:modelValue":we=>L.name=we,label:"Package",placeholder:"user/repo"},null,8,["modelValue","onUpdate:modelValue"])),x(as,{modelValue:L.source,"onUpdate:modelValue":we=>L.source=we,label:"Source"},{default:j(()=>[...S[85]||(S[85]=[h("option",{value:"cran"},"CRAN",-1),h("option",{value:"github"},"GitHub",-1),h("option",{value:"bioconductor"},"Bioconductor",-1)])]),_:1},8,["modelValue","onUpdate:modelValue"])]),h("div",_E,[x(Re,{modelValue:L.auto_attach,"onUpdate:modelValue":we=>L.auto_attach=we,label:"Auto-Attach",description:"Call library() when scaffold() runs."},null,8,["modelValue","onUpdate:modelValue"]),x(Ie,{size:"sm",variant:"secondary",onClick:we=>n1(ye)},{default:j(()=>[...S[86]||(S[86]=[ue("Remove",-1)])]),_:1},8,["onClick"])])])]))),128))])):(g(),y("p",SE,"No packages configured. Add packages to include tidyverse helpers or internal utilities automatically.")),h("div",CE,[x(Ie,{size:"sm",variant:"secondary",onClick:e1},{default:j(()=>[...S[87]||(S[87]=[ue("Add Package",-1)])]),_:1})])])])])]))],512),[[xt,l.value==="packages"]]),rt(h("div",AE,[$.value?(g(),y("div",VE,[...S[91]||(S[91]=[h("div",{class:"text-center py-12 text-zinc-500 dark:text-zinc-400"}," Loading environment variables... ",-1)])])):Oe.value?(g(),y("div",ME,[x(_i,{type:"error",title:"Error Loading .env",description:Oe.value},null,8,["description"])])):(g(),y("div",DE,[S[102]||(S[102]=h("div",{class:"mb-6"},[h("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Environment Variables"),h("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Manage environment variables for this project (.env file). ")],-1)),x(_i,{type:"warning",title:" Contains Sensitive Data",class:"mb-6"},{actions:j(()=>[F.value==="grouped"?(g(),pe(Ie,{key:0,variant:"soft",size:"sm",onClick:S[22]||(S[22]=L=>D.value=!D.value)},{default:j(()=>[ue(U(D.value?"Hide Values":"Show Values"),1)]),_:1})):I("",!0)]),default:j(()=>[S[92]||(S[92]=ue(" This file contains passwords and secrets. It is automatically excluded from version control (.gitignore). ",-1))]),_:1}),x(cD,{modelValue:F.value,"onUpdate:modelValue":S[23]||(S[23]=L=>F.value=L),tabs:[{id:"grouped",label:"Grouped By Prefix"},{id:"raw",label:"Raw"}],variant:"pills",class:"mb-6"},null,8,["modelValue"]),F.value==="grouped"?(g(),y("div",TE,[Object.keys(ee.value).length===0?(g(),y("div",$E,[x(at(_f),{class:"h-12 w-12 mx-auto mb-4 text-gray-400"}),S[94]||(S[94]=h("p",{class:"text-sm text-gray-500 dark:text-gray-400 mb-4"}," No environment variables found ",-1)),x(Ie,{variant:"primary",onClick:gh},{default:j(()=>[...S[93]||(S[93]=[ue(" Add Your First Variable ",-1)])]),_:1})])):(g(),y("div",EE,[(g(!0),y(Q,null,xe(ee.value,(L,ye)=>(g(),y("div",{key:ye,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},[h("div",OE,[h("h3",PE,U(ye==="Other"?"Other Variables":ye.toUpperCase()+" Variables"),1),x(Ie,{variant:"soft",size:"sm",onClick:gh},{default:j(()=>[...S[95]||(S[95]=[ue(" + Add ",-1)])]),_:1})]),h("div",jE,[(g(!0),y(Q,null,xe(L,(we,Ve)=>(g(),y("div",{key:Ve,class:"space-y-2"},[h("div",RE,[h("div",LE,[we.defined&&we.used?(g(),pe(ir,{key:0,variant:"green",class:"text-xs"},{default:j(()=>[...S[96]||(S[96]=[ue("",-1)])]),_:1})):!we.defined&&we.used?(g(),pe(ir,{key:1,variant:"yellow",class:"text-xs"},{default:j(()=>[...S[97]||(S[97]=[ue("",-1)])]),_:1})):(g(),pe(ir,{key:2,variant:"gray",class:"text-xs"},{default:j(()=>[...S[98]||(S[98]=[ue("",-1)])]),_:1}))]),h("div",BE,[h("input",{value:Ve,onInput:Vt=>{const wt=Vt.target.value;wt!==Ve&&(tt.value[wt]=tt.value[Ve]||"",delete tt.value[Ve])},type:"text",placeholder:"VARIABLE_NAME",class:"w-full rounded-md border border-zinc-300 dark:border-zinc-600 bg-white dark:bg-zinc-800 px-3 py-2 text-sm text-zinc-900 dark:text-zinc-100 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500 font-mono uppercase"},null,40,IE),h("div",NE,[rt(h("input",{"onUpdate:modelValue":Vt=>tt.value[Ve]=Vt,onInput:Vt=>we.value=tt.value[Ve],type:vh(Ve)?"text":"password",placeholder:we.defined?"value":"(not set)",class:De(["w-full rounded-md border border-zinc-300 dark:border-zinc-600 bg-white dark:bg-zinc-800 px-3 py-2 text-sm text-zinc-900 dark:text-zinc-100 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500 font-mono",Ka(Ve)?"pr-10":""])},null,42,UE),[[Vx,tt.value[Ve]]]),Ka(Ve)?(g(),y("button",{key:0,onClick:Vt=>o1(Ve),type:"button",class:"absolute right-2 top-1/2 -translate-y-1/2 text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300"},[vh(Ve)?(g(),pe(at(Jk),{key:1,class:"h-4 w-4"})):(g(),pe(at(Yk),{key:0,class:"h-4 w-4"}))],8,zE)):I("",!0)])]),x(Ie,{variant:"soft",size:"sm",onClick:Vt=>r1(Ve)},{default:j(()=>[...S[99]||(S[99]=[ue("  ",-1)])]),_:1},8,["onClick"])]),we.used&&we.used_in.length>0?(g(),y("div",FE," Used in: "+U(we.used_in.join(", ")),1)):we.defined&&!we.used?(g(),y("div",HE," Not referenced in any files ")):I("",!0)]))),128))])]))),128))])),h("div",WE,[x(Re,{modelValue:te.value,"onUpdate:modelValue":S[24]||(S[24]=L=>te.value=L),label:"Regroup .env file by prefix when saving",description:" This will rewrite the entire file grouped by prefix and will lose all comments and original order."},null,8,["modelValue"])])])):F.value==="raw"?(g(),y("div",qE,[h("div",KE,[S[100]||(S[100]=h("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"}," Raw .env File ",-1)),rt(h("textarea",{"onUpdate:modelValue":S[25]||(S[25]=L=>Me.value=L),class:"w-full h-96 font-mono text-sm rounded-md border border-zinc-300 dark:border-zinc-600 bg-white dark:bg-zinc-800 px-3 py-2 text-zinc-900 dark:text-zinc-100 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500",placeholder:`# Environment variables
# Example:
# DB_HOST=localhost
# DB_PORT=5432
# API_KEY=your_key_here`},null,512),[[_n,Me.value]]),S[101]||(S[101]=h("p",{class:"mt-2 text-xs text-gray-500 dark:text-gray-400"}," Edit the .env file directly. Comments and formatting will be preserved. ",-1))])])):I("",!0)]))],512),[[xt,l.value==="env"]])])])):I("",!0),x(fr,{modelValue:w.value,"onUpdate:modelValue":S[31]||(S[31]=L=>w.value=L),title:"Add Package",size:"md",variant:"left"},{actions:j(()=>[x(Ie,{variant:"primary",onClick:i1,disabled:!Ee.value.name.trim()},{default:j(()=>[...S[108]||(S[108]=[ue(" Add Package ",-1)])]),_:1},8,["disabled"]),x(Ie,{variant:"secondary",onClick:S[30]||(S[30]=L=>w.value=!1)},{default:j(()=>[...S[109]||(S[109]=[ue(" Cancel ",-1)])]),_:1})]),default:j(()=>[h("div",GE,[h("div",null,[S[103]||(S[103]=h("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Search CRAN Packages ",-1)),rt(h("input",{"onUpdate:modelValue":S[26]||(S[26]=L=>Y.value=L),onKeydown:s1,type:"text",placeholder:"Type to search CRAN...",class:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 px-3 py-2 text-sm text-gray-900 dark:text-gray-100 font-mono focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500"},null,544),[[_n,Y.value]])]),Z.value.length>0?(g(),y("div",JE,[(g(!0),y(Q,null,xe(Z.value,(L,ye)=>(g(),y("button",{key:L.name,onClick:we=>fh(L),onMouseenter:we=>We.value=ye,class:De(["w-full px-3 py-2 text-left border-b border-gray-200 dark:border-gray-700 last:border-b-0 transition",We.value===ye?"bg-sky-50 dark:bg-sky-900/20":"hover:bg-gray-50 dark:hover:bg-gray-800"])},[h("div",XE,[h("div",QE,[h("div",ZE,U(L.name),1),L.title?(g(),y("div",e7,U(L.title),1)):I("",!0),L.author?(g(),y("div",t7,U(L.author),1)):I("",!0)]),h("div",s7," v"+U(L.version),1)])],42,YE))),128))])):I("",!0),h("div",null,[S[104]||(S[104]=h("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Package Name ",-1)),rt(h("input",{"onUpdate:modelValue":S[27]||(S[27]=L=>Ee.value.name=L),type:"text",placeholder:"dplyr",class:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 px-3 py-2 text-sm text-gray-900 dark:text-gray-100 font-mono focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500"},null,512),[[_n,Ee.value.name]]),Ee.value.source==="github"?(g(),y("p",i7," GitHub: user/repo (e.g., tidyverse/dplyr) ")):I("",!0),Ee.value.source==="bioc"?(g(),y("p",n7," Bioconductor: name only (e.g., DESeq2) ")):I("",!0)]),h("div",null,[S[107]||(S[107]=h("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Source ",-1)),h("div",r7,[rt(h("select",{"onUpdate:modelValue":S[28]||(S[28]=L=>Ee.value.source=L),class:"w-full appearance-none rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 pl-3 pr-10 py-2 text-sm text-gray-900 dark:text-gray-100 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500"},[...S[105]||(S[105]=[h("option",{value:"cran"},"CRAN",-1),h("option",{value:"github"},"GitHub",-1),h("option",{value:"bioc"},"Bioconductor",-1)])],512),[[$g,Ee.value.source]]),S[106]||(S[106]=h("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},[h("svg",{class:"h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),h("p",o7,[Ee.value.source==="cran"?(g(),y(Q,{key:0},[ue("CRAN: name only (e.g., dplyr)")],64)):Ee.value.source==="github"?(g(),y(Q,{key:1},[ue("GitHub: user/repo (e.g., tidyverse/dplyr)")],64)):Ee.value.source==="bioc"?(g(),y(Q,{key:2},[ue("Bioconductor: name only (e.g., DESeq2)")],64)):I("",!0)])]),h("div",null,[x(Re,{modelValue:Ee.value.auto_attach,"onUpdate:modelValue":S[29]||(S[29]=L=>Ee.value.auto_attach=L),label:"Auto-attach on scaffold()"},null,8,["modelValue"])])])]),_:1},8,["modelValue"])]))}},a7={class:"rounded-lg bg-gray-50 p-6 space-y-6 dark:bg-gray-800/50"},u7={key:0,class:"space-y-2"},d7={key:0,class:"text-lg font-semibold text-gray-900 dark:text-white"},c7={key:1,class:"text-sm text-gray-600 dark:text-gray-400"},h7={class:"space-y-6"},f7={key:1,class:"flex justify-end pt-4 border-t border-gray-200 dark:border-gray-700"},yt={__name:"SettingsPanel",props:{title:{type:String,default:""},description:{type:String,default:""}},setup(t){return(e,s)=>(g(),y("section",a7,[t.title||t.description?(g(),y("header",u7,[t.title?(g(),y("h2",d7,U(t.title),1)):I("",!0),t.description?(g(),y("p",c7,U(t.description),1)):I("",!0)])):I("",!0),h("div",h7,[vt(e.$slots,"default")]),e.$slots.actions?(g(),y("div",f7,[vt(e.$slots,"actions")])):I("",!0)]))}},p7={class:"space-y-3"},m7={key:0,class:"space-y-1"},g7={key:0,class:"text-sm font-semibold text-gray-900 dark:text-white"},v7={key:1,class:"text-xs text-gray-600 dark:text-gray-400"},y7={class:"space-y-3"},Rt={__name:"SettingsBlock",props:{title:{type:String,default:""},description:{type:String,default:""}},setup(t){return(e,s)=>(g(),y("div",p7,[t.title||t.description?(g(),y("div",m7,[t.title?(g(),y("h3",g7,U(t.title),1)):I("",!0),t.description?(g(),y("p",v7,U(t.description),1)):I("",!0)])):I("",!0),h("div",y7,[vt(e.$slots,"default")])]))}},b7={class:"flex min-h-screen"},x7={class:"w-64 shrink-0 border-r border-gray-200 p-6 dark:border-gray-800"},k7={class:"space-y-1"},w7=["href","onClick"],_7={key:1,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},S7=["d"],C7={key:1,class:"ml-4 mt-2 space-y-0.5 border-l border-gray-200 pl-3 dark:border-gray-700"},A7=["href","onClick"],V7={key:2,class:"ml-4 mt-2 space-y-0.5 border-l border-gray-200 pl-3 dark:border-gray-700"},M7=["href","onClick"],D7={class:"mt-6 px-3"},T7={class:"flex-1 p-10 pb-24"},$7={class:"mt-8 space-y-10"},E7={id:"overview"},O7={class:"space-y-3"},P7={key:0,class:"text-gray-600 dark:text-gray-400"},j7={key:1,class:"text-gray-400 dark:text-gray-500 mx-1"},R7={key:2},L7={key:1,class:"text-gray-600 dark:text-gray-400"},B7={key:0},I7={key:1,class:"text-gray-600 dark:text-gray-400"},N7={key:0},U7={key:1,class:"text-gray-600 dark:text-gray-400"},z7={key:0,class:"text-green-600 dark:text-green-400"},F7={key:1,class:"text-gray-600 dark:text-gray-400"},H7={key:0,class:"text-green-600 dark:text-green-400"},W7={key:1,class:"text-gray-600 dark:text-gray-400"},q7={key:0},K7={key:1,class:"text-gray-600 dark:text-gray-400"},G7={id:"basics"},J7={class:"space-y-5"},Y7={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},X7={class:"space-y-5"},Q7={id:"structure",class:"space-y-8"},Z7={key:0,class:"space-y-6"},eO={class:"space-y-3"},tO=["onClick"],sO={class:"flex items-start gap-3"},iO={class:"font-semibold text-gray-900 dark:text-white"},nO={class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},rO={key:1,class:"space-y-6"},oO={key:0,class:"space-y-6"},lO={key:0},aO={class:"space-y-5"},uO=["value"],dO={class:"flex flex-wrap items-center justify-between gap-3"},cO={class:"flex flex-wrap gap-2 text-xs font-medium text-gray-600 dark:text-gray-400"},hO=["id"],fO={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},pO={class:"grid grid-cols-2 gap-3"},mO=["id"],gO={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},vO={class:"grid grid-cols-2 gap-3"},yO=["id"],bO={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},xO={class:"grid grid-cols-2 gap-3"},kO=["id"],wO={key:1,class:"space-y-6"},_O={key:0},SO={class:"space-y-5"},CO=["value"],AO={class:"flex flex-wrap items-center justify-between gap-3"},VO={class:"flex flex-wrap gap-2 text-xs font-medium text-gray-600 dark:text-gray-400"},MO=["id"],DO={class:"space-y-3"},TO={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},$O={class:"grid grid-cols-2 gap-3"},EO=["id"],OO={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},PO={class:"grid gap-4 sm:grid-cols-2"},jO={class:"space-y-3"},RO={class:"space-y-3"},LO=["id"],BO={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},IO={class:"grid gap-4 sm:grid-cols-2"},NO={class:"space-y-3"},UO={class:"space-y-3"},zO=["id"],FO={class:"space-y-3"},HO={key:2,class:"space-y-6"},WO={key:0},qO={class:"space-y-5"},KO=["value"],GO={class:"flex flex-wrap items-center justify-between gap-3"},JO={class:"flex flex-wrap gap-2 text-xs font-medium text-gray-600 dark:text-gray-400"},YO=["id"],XO={class:"space-y-3"},QO=["id"],ZO={class:"space-y-4"},eP={class:"space-y-2"},tP={class:"space-y-2"},sP={class:"space-y-2"},iP={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},nP={class:"grid grid-cols-2 gap-3"},rP={key:3,class:"space-y-6"},oP={key:0},lP={class:"space-y-5"},aP=["value"],uP={class:"flex flex-wrap items-center justify-between gap-3"},dP={class:"flex flex-wrap gap-2 text-xs font-medium text-gray-600 dark:text-gray-400"},cP=["id"],hP={class:"space-y-3"},fP=["id"],pP={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},mP={class:"grid grid-cols-2 gap-3"},gP=["id"],vP={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-2"},yP={class:"flex justify-end mt-3"},bP={id:"templates",class:"space-y-8"},xP={id:"templates-notebook"},kP={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-2"},wP={class:"flex justify-end mt-3"},_P={id:"templates-script"},SP={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-2"},CP={class:"flex justify-end mt-3"},AP={id:"templates-presentation"},VP={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-2"},MP={class:"flex justify-end mt-3"},DP={id:"ai"},TP={class:"space-y-2"},$P={class:"flex justify-end mt-3"},EP={id:"git"},OP={class:"grid gap-4 sm:grid-cols-2"},PP={class:"space-y-4"},jP={id:"packages"},RP={key:0,class:"space-y-3"},LP={class:"flex flex-col gap-3"},BP={class:"grid gap-3 grid-cols-[1fr_160px]"},IP={class:"flex items-center justify-between"},NP={key:1,class:"text-xs text-gray-500 dark:text-gray-400 mb-4"},UP={class:"mt-4"},zP={class:"text-sm text-gray-600 dark:text-gray-300 mb-4"},FP={class:"flex gap-3 justify-end"},HP={class:"text-sm text-gray-600 dark:text-gray-300"},WP={class:"flex gap-3 justify-end"},Lu="overview",hm="project",qP="Settings",KP="Manage defaults shared across new projects.",GP={__name:"SettingsView",setup(t){const e=Ea(),s=Ta(),i=Sr(),n=[{id:"overview",label:"Overview",slug:"overview",icon:$a},{id:"basics",label:"Basics",slug:"basics",icon:bc},{id:"structure",label:"Project Structure",slug:"project-structure",icon:Gl},{id:"packages",label:"Packages",slug:"packages-dependencies",icon:xc},{id:"ai",label:"AI Assistants",slug:"ai-assistants",svgIcon:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"},{id:"git",label:"Git & Hooks",slug:"git-hooks",svgIcon:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"},{id:"templates",label:"Templates",slug:"templates",icon:td}],r=Object.fromEntries(n.map(({id:G,slug:_})=>[G,_])),o=Object.fromEntries(n.map(({id:G,slug:_})=>[_,G])),l={project:{label:"Standard Project Structure",description:"General-purpose analysis project with notebooks, scripts, and shared outputs.",directories:{functions:"R/functions",notebooks:"notebooks",scripts:"scripts",inputs_raw:"inputs/raw",inputs_intermediate:"inputs/intermediate",inputs_final:"inputs/final",reference:"reference",outputs_notebooks:"outputs/notebooks",outputs_tables:"outputs/tables",outputs_figures:"outputs/figures",outputs_models:"outputs/models",outputs_reports:"outputs/reports",cache:"outputs/cache",scratch:"scratch"},quarto:{render_dir:"outputs/notebooks"},notebook_template:"notebook",extra_directories:[]},project_sensitive:{label:"Privacy Sensitive Project Structure",description:"Projects handling PHI/PII with dedicated private/public data flows.",directories:{functions:"R/functions",notebooks:"notebooks",scripts:"scripts",inputs_private_raw:"inputs/private/raw",inputs_private_intermediate:"inputs/private/intermediate",inputs_private_final:"inputs/private/final",inputs_public_raw:"inputs/public/raw",inputs_public_intermediate:"inputs/public/intermediate",inputs_public_final:"inputs/public/final",outputs_private_tables:"outputs/private/tables",outputs_private_figures:"outputs/private/figures",outputs_private_models:"outputs/private/models",outputs_private_docs:"outputs/private/docs",outputs_private_data_final:"outputs/private/data_final",outputs_public_tables:"outputs/public/tables",outputs_public_figures:"outputs/public/figures",outputs_public_models:"outputs/public/models",outputs_public_docs:"outputs/public/docs",outputs_public_data_final:"outputs/public/data_final",cache:"outputs/private/cache",scratch:"scratch"},quarto:{render_dir:"outputs/public/docs"},notebook_template:"notebook",extra_directories:[]},presentation:{label:"Presentation Structure",description:"Single talk or slide deck with minimal analysis scaffolding.",directories:{presentation_source:"presentation.qmd",rendered_slides:"."},quarto:{render_dir:"."},notebook_template:"notebook",extra_directories:[]},course:{label:"Course Structure",description:"Courses with modules, assignments, and lecture materials.",directories:{data:"data",slides:"slides",assignments:"assignments",course_docs:"course_docs",readings:"readings",notebooks:"modules"},quarto:{render_dir:"course_docs"},notebook_template:"notebook",extra_directories:[]}},a=ve(JSON.parse(JSON.stringify(l))),d={project:"project",project_sensitive:"sensitive-project",presentation:"presentation",course:"course"},u=Object.fromEntries(Object.entries(d).map(([G,_])=>[_,G])),f={project:"Tune the standard analysis layoutfunctions, notebooks, inputs, and outputs live here by default.",project_sensitive:"Private and public inputs stay separate so sensitive data never leaves restricted folders.",presentation:"Control where your presentation source lives and where rendered slides are written.",course:"Adjust the folders used for slides, assignments, readings, and course documentation."},c=G=>String(G).replace(/_/g," ").replace(/\b\w/g,_=>_.toUpperCase()),p=ve(null),k=[{key:"functions",label:"Functions",hint:"R files here are sourced by scaffold(), so helper functions are available in every project session."},{key:"notebooks",label:"Notebooks",hint:"Where Quarto or R Markdown analysis notebooks live."},{key:"scripts",label:"Scripts",hint:"Reusable R scripts, job runners, or automation tasks."},{key:"reference",label:"Reference materials",hint:"Codebooks, documentation, and other background resources."}],C=[{key:"inputs_raw",label:"Raw data",hint:"Read-only exports from source systems."},{key:"inputs_intermediate",label:"Intermediate data",hint:"Data after light cleaning or pre-processing steps."},{key:"inputs_final",label:"Analysis-ready data",hint:"Final inputs ready for modeling or reporting."}],A=[{key:"outputs_notebooks",label:"Rendered notebooks",hint:"Compiled Quarto/R Markdown notebooks."},{key:"outputs_tables",label:"Tables",hint:"Publishable tables ready for reports or manuscripts."},{key:"outputs_figures",label:"Figures",hint:"Final plots and graphics."},{key:"outputs_models",label:"Models",hint:"Serialized models or model summaries."},{key:"outputs_reports",label:"Reports",hint:"Final reports and deliverables ready for publication."}],V=[{key:"cache",label:"Cache",hint:"Temporary artifacts (gitignored)."},{key:"scratch",label:"Scratch",hint:"Short-lived explorations (gitignored)."}],R=[{privateKey:"inputs_private_raw",publicKey:"inputs_public_raw",label:"Raw data",privateLabel:"Raw data (private)",publicLabel:"Raw data (public)"},{privateKey:"inputs_private_intermediate",publicKey:"inputs_public_intermediate",label:"Intermediate data",privateLabel:"Intermediate data (private)",publicLabel:"Intermediate data (public)"},{privateKey:"inputs_private_final",publicKey:"inputs_public_final",label:"Analysis-ready data",privateLabel:"Analysis-ready data (private)",publicLabel:"Analysis-ready data (public)"}],P=[{privateKey:"outputs_private_tables",publicKey:"outputs_public_tables",label:"Tables",privateLabel:"Tables (private)",publicLabel:"Tables (public)"},{privateKey:"outputs_private_figures",publicKey:"outputs_public_figures",label:"Figures",privateLabel:"Figures (private)",publicLabel:"Figures (public)"},{privateKey:"outputs_private_models",publicKey:"outputs_public_models",label:"Models",privateLabel:"Models (private)",publicLabel:"Models (public)"},{privateKey:"outputs_private_docs",publicKey:"outputs_public_docs",label:"Docs & reports",privateLabel:"Docs (private)",publicLabel:"Docs (public)"},{privateKey:"outputs_private_data_final",publicKey:"outputs_public_data_final",label:"Final data",privateLabel:"Final data (private)",publicLabel:"Final data (public)"}],z=(G,_)=>p.value?.project_types?.[G]?.directories?.[_]||{},H=(G,_)=>_.map(v=>{const W=z(G,v.key);return{key:v.key,label:W.label||v.label,hint:W.hint||v.hint||""}}),B=oe(()=>H("project",k)),M=oe(()=>H("project",C)),J=oe(()=>H("project",A)),X=oe(()=>H("project",V)),he=G=>G.map(_=>{const v=z("project_sensitive",_.privateKey),W=z("project_sensitive",_.publicKey);return{..._,privateLabel:v.label||_.privateLabel,publicLabel:W.label||_.publicLabel}}),ie=oe(()=>he(R)),N=oe(()=>he(P)),ae=oe(()=>{const G=$.value;return!G||!p.value?.project_types?.[G]?.settings?[]:p.value.project_types[G].settings}),re={include_inputs:"inputs",include_scripts:"scripts",include_functions:"R/functions"},ke=oe(()=>{const G=p.value?.project_types?.presentation?.optional_toggles||{};return{inputs:G.include_inputs?.default_path||re.include_inputs,scripts:G.include_scripts?.default_path||re.include_scripts,functions:G.include_functions?.default_path||re.include_functions}}),K={"CLAUDE.md":"ai_claude","AGENTS.md":"ai_agents",".github/copilot-instructions.md":"ai_copilot"},T=[{id:"claude",label:"Claude Code",description:"Anthropic's IDE-focused assistant."},{id:"copilot",label:"GitHub Copilot",description:"Complements VS Code and JetBrains editors."},{id:"agents",label:"Multi-Agent (OpenAI Codex, Cursor, etc.)",description:"Shared instructions for multi-model orchestrators."}],b=ve(Lu),m=ve(!1),w=ve({projects_root:"",project_types:JSON.parse(JSON.stringify(a.value)),author:{name:"",email:"",affiliation:""},defaults:{project_type:"project",notebook_format:"quarto",ide:"vscode",ide_support_vscode:!1,use_git:!0,use_renv:!1,seed:"",seed_on_scaffold:!1,ai_support:!0,ai_assistants:["claude"],ai_canonical_file:"CLAUDE.md",directories:JSON.parse(JSON.stringify(a.value.project.directories)),git_hooks:{ai_sync:!1,data_security:!1,check_sensitive_dirs:!1},packages:{use_renv:!1,default_packages:[{name:"dplyr",source:"cran",auto_attach:!0},{name:"ggplot2",source:"cran",auto_attach:!0}]}},git:{user_name:"",user_email:""},privacy:{secret_scan:!1,gitignore_template:"gitignore"}}),Y=Hs({includeInputs:!1,includeScripts:!1,includeFunctions:!1}),Z=Hs({claude:!0,agents:!1,copilot:!1}),qe=Hs({open:!1,name:"",title:"",description:"",contents:"",loading:!1}),We=Hs({open:!1,projectTypeKey:null,projectTypeName:""}),Ee=Hs({notebook:{loading:!1,contents:""},script:{loading:!1,contents:""},presentation:{loading:!1,contents:""},canonical:{loading:!1,contents:""},gitignore_project:{loading:!1,contents:""},gitignore_project_sensitive:{loading:!1,contents:""},gitignore_course:{loading:!1,contents:""},gitignore_presentation:{loading:!1,contents:""}}),tt=oe(()=>Object.entries(w.value.project_types||{})),ee=oe(()=>tt.value.map(([G,_])=>({key:G,label:(_.label||c(G)).replace(/ Structure$/i,""),slug:d[G]||G}))),Me=[{id:"templates-notebook",label:"Notebook"},{id:"templates-script",label:"Script"},{id:"templates-presentation",label:"Presentation"}],$=oe(()=>{const G=i.params.subsection;return G?u[G]||hm:null}),Oe=oe(()=>{const G=$.value;return G&&w.value.project_types?.[G]||null}),Fe={overview:{title:"Overview",description:"Overview of your Framework global settings and preferences."},basics:{title:"Basics",description:"Essential settings for new projects."},author:{title:"Author Information",description:"Defaults that populate README files and notebook headers when scaffold() runs."},workflow:{title:"Editor & Workflow",description:"Control how Framework scaffolds projects in your preferred tools."},structure:{title:"Project Structure Defaults",description:"Choose a project type to configure its directory structure and default settings."},templates:{title:"Templates",description:"Edit the starter templates Framework uses for notebooks, scripts, and presentations."},ai:{title:"AI Assistants",description:"Manage assistant support, canonical context files, and sync hooks."},git:{title:"Git & Hooks",description:"Configure repository initialization, commit identity, git hooks, and security scanning."},packages:{title:"Packages & Dependencies",description:"Define dependency defaults and auto-attach behavior for new projects."}},D=oe(()=>Fe[b.value]||{title:qP,description:KP}),E=oe(()=>b.value==="structure"&&Oe.value?Oe.value.label||c($.value):D.value.title),F=oe(()=>b.value==="structure"&&Oe.value&&(Oe.value.description||f[$.value])||D.value.description);oe(()=>w.value.privacy.gitignore_template||"gitignore"),oe(()=>{const G=new Set,_=w.value.project_types||{},v=_.project_sensitive?.directories||{};for(const ce of Object.values(v))typeof ce=="string"&&ce.trim()&&ce.includes("private")&&G.add(ce.replace(/^\/+/,""));const W=_.project?.directories||{};return["cache","scratch"].forEach(ce=>{const ge=W[ce];typeof ge=="string"&&ge.trim()&&G.add(ge.replace(/^\/+/,""))}),Array.from(G).sort()});const te=oe(()=>K[w.value.defaults.ai_canonical_file]||"ai_claude"),ne=(G,_)=>{const v={section:G||void 0};return _&&(v.subsection=_),s.resolve({name:"settings",params:v}).href},se=(G,_)=>{const v={};G&&(v.section=G),_&&(v.subsection=_);const W=i.params.section||void 0,ce=i.params.subsection||void 0,ge=v.section||void 0,Je=v.subsection||void 0;return W===ge&&ce===Je?Promise.resolve():s.replace({name:"settings",params:v}).catch(()=>{})};Ye(()=>i.params.section,G=>{if(!G){se(r[Lu],void 0);return}const _=o[G]||Lu;if(b.value=_,!o[G]){se(r[_],void 0);return}},{immediate:!0});const de=(G,_="")=>Array.isArray(G)?G.length>0?de(G[0],_):_:G??_,me=(G,_=!1)=>{const v=de(G,_);return typeof v=="boolean"?v:typeof v=="string"?["true","1","yes"].includes(v.toLowerCase()):!!v},be=G=>Array.isArray(G)?G.flatMap(_=>Array.isArray(_)?_:[_]).filter(Boolean):[],fe=(G={},_={})=>{const v={..._};for(const[W,ce]of Object.entries(G||{})){const ge=de(ce,null);ge===null||ge===""?delete v[W]:v[W]=ge}return v},Le=(G,_)=>{const v=a.value[G]||{directories:{},quarto:{},extra_directories:[]};return{label:de(_?.label,v.label||c(G)),description:de(_?.description,v.description||""),ggplot_theme:de(_?.ggplot_theme,"theme_minimal"),set_theme_on_scaffold:me(_?.set_theme_on_scaffold,!0),directories:fe(_?.directories,v.directories),quarto:{render_dir:de(_?.quarto?.render_dir,v.quarto?.render_dir||".")},notebook_template:de(_?.notebook_template,v.notebook_template||"notebook"),extra_directories:Array.isArray(_?.extra_directories)?_.extra_directories:v.extra_directories||[]}},Ce=G=>{if(!G||!G.project_types)return;const _={};for(const[v,W]of Object.entries(G.project_types)){const ce=l[v]||{},ge={};for(const[Je,Et]of Object.entries(W.directories||{})){const Un=ce.directories?.[Je]||"";ge[Je]=de(Et?.default,Un)}_[v]={label:de(W.label,ce.label||c(v)),description:de(W.description,ce.description||""),directories:ge,quarto:{render_dir:de(W.quarto?.render_dir?.default,ce.quarto?.render_dir||".")},notebook_template:de(W.notebook_template?.default,ce.notebook_template||"notebook"),optional_toggles:W.optional_toggles||{}}}for(const[v,W]of Object.entries(l))_[v]||(_[v]=JSON.parse(JSON.stringify(W)));a.value=_},je=(G,_,v)=>{if(!w.value.project_types?.presentation)return;const W=w.value.project_types.presentation.directories||(w.value.project_types.presentation.directories={});_?(!W[G]||W[G]==="")&&(W[G]=v):Object.prototype.hasOwnProperty.call(W,G)&&delete W[G]},Pe=async(G,_=G)=>{if(Ee[_]){Ee[_].loading=!0;try{const v=await fetch(`/api/templates/${G}`);if(!v.ok)throw new Error("Request failed");const W=await v.json();Ee[_].contents=W.contents||""}catch{e.error("Template Error","Unable to load template contents.")}finally{Ee[_].loading=!1}}},Ue=async(G,_=G)=>{if(Ee[_])try{if(!(await fetch(`/api/templates/${G}`,{method:"DELETE"})).ok)throw new Error("Request failed");await Pe(G,_),e.success("Template Reset","Restored the packaged default template.")}catch{e.error("Reset Failed","Unable to restore the default template.")}},st=()=>{Ue(te.value,"canonical")};Ye(Z,G=>{const _=[];G.claude&&_.push("claude"),G.copilot&&_.push("copilot"),G.agents&&_.push("agents"),w.value.defaults.ai_assistants=_},{deep:!0}),Ye(()=>w.value.defaults.ai_canonical_file,async()=>{await Pe(te.value,"canonical")}),Ye(()=>w.value.defaults.git_hooks.data_security,G=>{w.value.privacy.secret_scan=G}),Ye(()=>w.value.privacy.secret_scan,G=>{w.value.defaults.git_hooks.data_security=G}),Ye(()=>Y.includeInputs,G=>{je("inputs",G,ke.value.inputs)}),Ye(()=>Y.includeScripts,G=>{je("scripts",G,ke.value.scripts)}),Ye(()=>Y.includeFunctions,G=>{je("functions",G,ke.value.functions)});const Ge=G=>{(G.metaKey||G.ctrlKey)&&G.key==="s"&&(G.preventDefault(),Wo())},it=(G,_)=>{const v=w.value.project_types?.[G]?.directories;return!!v&&Object.prototype.hasOwnProperty.call(v,_)},At=G=>{a.value[G]&&(We.projectTypeKey=G,We.projectTypeName=w.value.project_types[G]?.label||c(G),We.open=!0)},is=()=>{const G=We.projectTypeKey;a.value[G]&&(w.value.project_types[G]=JSON.parse(JSON.stringify(a.value[G])),G==="presentation"&&(Y.includeInputs=!1,Y.includeScripts=!1,Y.includeFunctions=!1),We.open=!1,e.success("Reset Complete",`${We.projectTypeName} has been reset to defaults`))},ns=async()=>{try{qe.loading=!0,await fetch(`/api/templates/${qe.name}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:qe.contents})}),e.success("Template Saved","Your changes have been saved."),qe.open=!1}catch{e.error("Save Failed","Could not save template changes.")}finally{qe.loading=!1}},zs=()=>{w.value.defaults.packages.default_packages||(w.value.defaults.packages.default_packages=[]),w.value.defaults.packages.default_packages.push({name:"",source:"cran",auto_attach:!1})},un=G=>{w.value.defaults.packages.default_packages.splice(G,1)},Xe=G=>{const _=document.getElementById(G);_&&_.scrollIntoView({behavior:"smooth",block:"start"})},qt=G=>{switch(G){case"project":return`project-${G}-inputs`;case"project_sensitive":return`project-${G}-workspaces`;case"presentation":return`project-${G}-primary`;case"course":return`project-${G}-core`;default:return`project-${G}`}},Nn=async G=>{const _=n.find(W=>W.id===G);if(!_)return;const v=(_.id==="structure",void 0);await se(_.slug,v),await Mn(),Xe(_.id)},dn=async G=>{const _=d[G]||d[hm];await se("project-structure",_),await Mn(),Xe(qt(G))};Ye(()=>$.value,(G,_)=>{b.value==="structure"&&(!G||G===_||Mn(()=>Xe(qt(G))))});const Wa=async()=>{try{const[G,_]=await Promise.all([fetch("/api/settings/catalog"),fetch("/api/settings/get")]);if(!G.ok)throw new Error("Failed to load settings catalog");if(!_.ok)throw new Error("Failed to load settings payload");const v=await G.json();p.value=v,Ce(v);const W=await _.json();if(w.value.projects_root=de(W.global?.projects_root||W.projects_root,""),W.project_types){const ce={},ge={...a.value,...W.project_types};for(const[Je,Et]of Object.entries(ge))ce[Je]=Le(Je,Et);w.value.project_types=ce}if(Y.includeInputs=it("presentation","inputs"),Y.includeScripts=it("presentation","scripts"),Y.includeFunctions=it("presentation","functions"),W.author&&(w.value.author={name:de(W.author.name,""),email:de(W.author.email,""),affiliation:de(W.author.affiliation,"")}),W.defaults){const ce=W.defaults;w.value.defaults.project_type=de(ce.project_type,"project"),w.value.defaults.notebook_format=de(ce.notebook_format,"quarto"),w.value.defaults.ide=de(ce.ide,"vscode"),w.value.defaults.use_git=me(ce.use_git,!0),w.value.defaults.use_renv=me(ce.use_renv,!1),w.value.defaults.seed_on_scaffold=me(ce.seed_on_scaffold,!1),w.value.defaults.seed=de(ce.seed,""),w.value.defaults.ai_support=me(ce.ai_support,!0),w.value.defaults.ai_canonical_file=de(ce.ai_canonical_file,"CLAUDE.md");const ge=be(ce.ai_assistants);ge.length&&(w.value.defaults.ai_assistants=ge,Z.claude=ge.includes("claude"),Z.copilot=ge.includes("copilot"),Z.agents=ge.includes("agents")),ce.git_hooks&&(w.value.defaults.git_hooks={...w.value.defaults.git_hooks,...Object.fromEntries(Object.entries(ce.git_hooks).map(([Je,Et])=>[Je,me(Et,w.value.defaults.git_hooks[Je])]))},w.value.privacy.secret_scan=w.value.defaults.git_hooks.data_security),ce.packages&&(ce.packages.default_packages?w.value.defaults.packages={use_renv:me(ce.packages.use_renv,!1),default_packages:(ce.packages.default_packages||[]).map(Je=>({name:de(Je.name,""),source:de(Je.source,"cran"),auto_attach:me(Je.auto_attach,!1)}))}:Array.isArray(ce.packages)&&(w.value.defaults.packages={use_renv:!1,default_packages:ce.packages.map(Je=>({name:de(Je.name,""),source:de(Je.source,"cran"),auto_attach:me(Je.auto_attach,!1)}))})),ce.directories?w.value.defaults.directories={...w.value.defaults.directories,...Object.fromEntries(Object.entries(ce.directories).map(([Je,Et])=>[Je,de(Et,w.value.defaults.directories[Je]||"")]))}:w.value.project_types.project&&(w.value.defaults.directories={...w.value.defaults.directories,...w.value.project_types.project.directories})}W.git&&(w.value.git={user_name:de(W.git.user_name,""),user_email:de(W.git.user_email,"")}),W.privacy?(w.value.privacy.secret_scan=me(W.privacy.secret_scan,w.value.defaults.git_hooks.data_security),w.value.privacy.gitignore_template=de(W.privacy.gitignore_template,"gitignore")):w.value.privacy.secret_scan=w.value.defaults.git_hooks.data_security,await Pe(te.value,"canonical")}catch(G){console.error("Failed to load settings:",G),e.error("Load Failed","Unable to load current settings.")}},Vs=(G,_)=>{const v=w.value.project_types[G];return!v||!Array.isArray(v.extra_directories)?[]:v.extra_directories.filter(W=>W.type===_)},Ms=(G,_,v)=>{const W=w.value.project_types[G];if(!W)return;Array.isArray(W.extra_directories)||(W.extra_directories=[]);const ce=W.extra_directories.filter(Je=>Je&&Je.type!==_),ge=v.map(Je=>({...Je,type:_}));W.extra_directories=[...ce,...ge]},ps=(G,_,v,W)=>{if(!G)return null;if(!/^[a-zA-Z0-9_]+$/.test(G))return"Only letters, numbers, and underscores allowed";const ce=w.value.project_types[_];if(!ce||!Array.isArray(ce.extra_directories))return null;if(ce.extra_directories.filter(vi=>vi.type===v).findIndex((vi,qa)=>qa!==W&&vi.key===G)!==-1)return"Duplicate key within this section";const Un=ce.extra_directories.filter(vi=>vi.type!==v).find(vi=>vi.key===G);return Un?`Key already used in ${Un.type} directories`:null},Ds=G=>!G||G.trim()===""?null:G.startsWith("/")?"Must be relative (no leading slash)":G.includes("..")?"Path traversal not allowed (..)":null,Wo=async()=>{try{m.value=!0;const G=w.value.projects_root?.trim()||"",_=JSON.parse(JSON.stringify(w.value));_.global||(_.global={}),_.global.projects_root=G||null,delete _.projects_root,_.defaults.seed=_.defaults.seed===""?null:_.defaults.seed,_.defaults.packages&&_.defaults.packages.default_packages&&(_.defaults.packages.default_packages=(_.defaults.packages.default_packages||[]).filter(ge=>ge.name&&ge.name.trim()!=="")),_.defaults.directories=_.project_types?.project?.directories||_.defaults.directories,_.defaults.git_hooks.data_security=_.privacy.secret_scan,_.git=_.git||{user_name:"",user_email:""};for(const ge in _.project_types){const Je=_.project_types[ge];Je.extra_directories&&Array.isArray(Je.extra_directories)&&(Je.extra_directories=Je.extra_directories.filter(Et=>Et.key&&Et.key.trim()!==""&&Et.label&&Et.label.trim()!==""&&Et.path&&Et.path.trim()!==""&&Et.type&&Et.type.trim()!==""))}const v=await fetch("/api/settings/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_)});if(!v.ok){const ge=await v.text();throw new Error("Failed to save settings")}const W=await v.json();if((await Promise.all([fetch("/api/templates/notebook",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:Ee.notebook.contents})}),fetch("/api/templates/script",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:Ee.script.contents})}),fetch("/api/templates/presentation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:Ee.presentation.contents})}),fetch("/api/templates/gitignore-project",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:Ee.gitignore_project.contents})}),fetch("/api/templates/gitignore-project_sensitive",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:Ee.gitignore_project_sensitive.contents})}),fetch("/api/templates/gitignore-course",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:Ee.gitignore_course.contents})}),fetch("/api/templates/gitignore-presentation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:Ee.gitignore_presentation.contents})})])).some(ge=>!ge.ok))throw new Error("Template save failed");e.success("Settings Saved","Your global defaults were updated.")}catch(G){console.error("Failed to save settings:",G),e.error("Save Failed",G?.message||"Review your changes and try again.")}finally{m.value=!1}};return es(()=>{Wa(),Pe("notebook"),Pe("script"),Pe("presentation"),Pe("gitignore-project","gitignore_project"),Pe("gitignore-project_sensitive","gitignore_project_sensitive"),Pe("gitignore-course","gitignore_course"),Pe("gitignore-presentation","gitignore_presentation"),Pe(te.value,"canonical"),window.addEventListener("keydown",Ge)}),_r(()=>{window.removeEventListener("keydown",Ge)}),(G,_)=>(g(),y("div",b7,[h("nav",x7,[_[81]||(_[81]=h("h2",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"New Project Defaults",-1)),h("div",k7,[(g(),y(Q,null,xe(n,v=>h("div",{key:v.id},[v.id==="basics"?(g(),pe(ma,{key:0},{default:j(()=>[..._[80]||(_[80]=[ue("Settings",-1)])]),_:1})):I("",!0),h("a",{href:ne(v.slug),onClick:Kt(W=>Nn(v.id),["prevent"]),class:De(["flex items-center gap-2 px-3 py-2 rounded-md text-sm transition",b.value===v.id?"bg-sky-50 text-sky-700 font-medium dark:bg-sky-900/20 dark:text-sky-400":"text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-800"])},[v.icon?(g(),pe(As(v.icon),{key:0,class:"h-4 w-4"})):v.svgIcon?(g(),y("svg",_7,[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:v.svgIcon},null,8,S7)])):I("",!0),ue(" "+U(v.label),1)],10,w7),v.id==="structure"&&b.value==="structure"?(g(),y("div",C7,[(g(!0),y(Q,null,xe(ee.value,W=>(g(),y("a",{key:W.key,href:ne("project-structure",W.slug),onClick:Kt(ce=>dn(W.key),["prevent"]),class:De(["block rounded-md py-1 pl-4 pr-2 text-xs font-medium transition",$.value===W.key?"bg-sky-100 text-sky-700 dark:bg-sky-900/30 dark:text-sky-300":"text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-800"])},U(W.label),11,A7))),128))])):v.id==="templates"&&b.value==="templates"?(g(),y("div",V7,[(g(),y(Q,null,xe(Me,W=>h("a",{key:W.id,href:`#${W.id}`,onClick:Kt(ce=>Xe(W.id),["prevent"]),class:"block rounded-md py-1 pl-4 pr-2 text-xs font-medium text-gray-600 transition hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-800"},U(W.label),9,M7)),64))])):I("",!0)])),64))]),h("div",D7,[x(Ie,{variant:"primary",size:"md",disabled:m.value,onClick:Wo,class:"w-full"},{default:j(()=>[ue(U(m.value?"Saving":"Save Changes"),1)]),_:1},8,["disabled"])])]),h("div",T7,[x(Cr,{title:E.value,description:F.value},null,8,["title","description"]),h("div",$7,[rt(h("div",E7,[h("div",O7,[x(Es,{title:"Basics",onClick:_[0]||(_[0]=v=>b.value="basics")},{default:j(()=>[w.value.projects_root||w.value.author&&w.value.author.name?(g(),y(Q,{key:0},[w.value.projects_root?(g(),y("span",P7,U(w.value.projects_root),1)):I("",!0),w.value.projects_root&&w.value.author&&w.value.author.name?(g(),y("span",j7,"")):I("",!0),w.value.author&&w.value.author.name?(g(),y("span",R7,U(w.value.author.name),1)):I("",!0)],64)):(g(),y("span",L7,"Not set"))]),_:1}),x(Es,{title:"Project Structure",onClick:_[1]||(_[1]=v=>b.value="structure")},{default:j(()=>[w.value.defaults&&w.value.defaults.project_type?(g(),y("span",B7,U(w.value.defaults.project_type),1)):(g(),y("span",I7,"Not set"))]),_:1}),x(Es,{title:"Notebooks & Scripts",onClick:_[2]||(_[2]=v=>b.value="notebooksScripts")},{default:j(()=>[w.value.defaults&&w.value.defaults.notebook_format?(g(),y("span",N7,U(w.value.defaults.notebook_format),1)):(g(),y("span",U7,"quarto"))]),_:1}),x(Es,{title:"AI Assistants",onClick:_[3]||(_[3]=v=>b.value="ai")},{default:j(()=>[w.value.ai_config&&w.value.ai_config.enabled?(g(),y("span",z7,"Enabled")):(g(),y("span",F7,"Disabled"))]),_:1}),x(Es,{title:"Git & Hooks",onClick:_[4]||(_[4]=v=>b.value="git")},{default:j(()=>[w.value.git&&w.value.git.auto_init?(g(),y("span",H7,"Auto-initialize repositories")):(g(),y("span",W7,"Manual initialization"))]),_:1}),x(Es,{title:"Packages",onClick:_[5]||(_[5]=v=>b.value="packages")},{default:j(()=>[w.value.packages&&w.value.packages.length>0?(g(),y("span",q7,U(w.value.packages.length)+" package"+U(w.value.packages.length!==1?"s":""),1)):(g(),y("span",K7,"No default packages"))]),_:1})])],512),[[xt,b.value==="overview"]]),rt(h("div",G7,[x(yt,{description:"Essential project defaults that apply to all new projects."},{default:j(()=>[x(Rt,null,{default:j(()=>[h("div",J7,[x(q,{modelValue:w.value.projects_root,"onUpdate:modelValue":_[6]||(_[6]=v=>w.value.projects_root=v),label:"Default Projects Directory",hint:"New projects will be created in this directory by default",placeholder:"e.g., ~/projects or /Users/yourname/code"},null,8,["modelValue"]),h("div",null,[_[83]||(_[83]=h("label",{class:"block text-sm font-semibold text-gray-900 dark:text-white mb-3"}," Supported Editors ",-1)),x(Di,{modelValue:w.value.defaults.positron,"onUpdate:modelValue":_[7]||(_[7]=v=>w.value.defaults.positron=v),id:"support-positron-defaults",description:"Enable Positron-specific workspace and settings files"},{default:j(()=>[..._[82]||(_[82]=[ue(" Positron ",-1)])]),_:1},8,["modelValue"]),_[84]||(_[84]=h("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-3"}," RStudio supported by default ",-1))]),x(as,{modelValue:w.value.defaults.notebook_format,"onUpdate:modelValue":_[8]||(_[8]=v=>w.value.defaults.notebook_format=v),label:"Default Notebook Format",hint:"Format used when creating new notebooks"},{default:j(()=>[..._[85]||(_[85]=[h("option",{value:"quarto"},"Quarto (.qmd)",-1),h("option",{value:"rmarkdown"},"R Markdown (.Rmd)",-1)])]),_:1},8,["modelValue"]),h("div",Y7,[_[86]||(_[86]=h("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"}," Author Information ",-1)),_[87]||(_[87]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-5"}," Used as defaults when scaffold() creates README files and notebook headers, so every project starts with the right attribution. ",-1)),h("div",X7,[x(q,{modelValue:w.value.author.name,"onUpdate:modelValue":_[9]||(_[9]=v=>w.value.author.name=v),label:"Your Name",placeholder:"Your Name"},null,8,["modelValue"]),x(q,{modelValue:w.value.author.email,"onUpdate:modelValue":_[10]||(_[10]=v=>w.value.author.email=v),type:"email",label:"Email",placeholder:"your.email@example.com"},null,8,["modelValue"]),x(q,{modelValue:w.value.author.affiliation,"onUpdate:modelValue":_[11]||(_[11]=v=>w.value.author.affiliation=v),label:"Affiliation",placeholder:"Organization"},null,8,["modelValue"])])])])]),_:1})]),_:1})],512),[[xt,b.value==="basics"]]),rt(h("div",Q7,[$.value?Oe.value?(g(),y("div",rO,[$.value==="project"?(g(),y("div",oO,[ae.value&&ae.value.length>0?(g(),y("div",lO,[x(yt,{title:"Project Settings",description:"Default settings applied when creating new projects of this type."},{default:j(()=>[x(Rt,null,{default:j(()=>[h("div",aO,[(g(!0),y(Q,null,xe(ae.value,v=>(g(),y(Q,{key:v.id},[v.control==="toggle"?(g(),pe(Re,{key:0,modelValue:w.value.project_types[$.value][v.id],"onUpdate:modelValue":W=>w.value.project_types[$.value][v.id]=W,label:v.label,description:v.description},null,8,["modelValue","onUpdate:modelValue","label","description"])):v.control==="select"?(g(),pe(as,{key:1,modelValue:w.value.project_types[$.value][v.id],"onUpdate:modelValue":W=>w.value.project_types[$.value][v.id]=W,label:v.label,hint:v.hint},{default:j(()=>[(g(!0),y(Q,null,xe(v.options,W=>(g(),y("option",{key:W.value,value:W.value},U(W.label),9,uO))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","label","hint"])):v.control==="text"?(g(),pe(q,{key:2,modelValue:w.value.project_types[$.value][v.id],"onUpdate:modelValue":W=>w.value.project_types[$.value][v.id]=W,label:v.label,hint:v.hint,placeholder:v.placeholder},null,8,["modelValue","onUpdate:modelValue","label","hint","placeholder"])):I("",!0)],64))),128))])]),_:1})]),_:1})])):I("",!0),h("div",dO,[h("div",cO,[h("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:_[12]||(_[12]=v=>Xe(`project-${$.value}-inputs`))}," Inputs "),h("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:_[13]||(_[13]=v=>Xe(`project-${$.value}-workspaces`))}," Workspaces "),h("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:_[14]||(_[14]=v=>Xe(`project-${$.value}-outputs`))}," Outputs "),h("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:_[15]||(_[15]=v=>Xe(`project-${$.value}-utility`))}," Utility "),h("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:_[16]||(_[16]=v=>Xe(`project-${$.value}-gitignore`))}," .gitignore ")]),x(Ie,{variant:"secondary",size:"sm",class:"mt-3 sm:mt-0",onClick:_[17]||(_[17]=v=>At($.value))},{default:j(()=>[..._[88]||(_[88]=[ue(" Reset to Defaults ",-1)])]),_:1})]),h("div",{id:`project-${$.value}-inputs`},[x(yt,{title:"Inputs",description:"Define the read-only locations where raw and prepared data live."},{default:j(()=>[(g(!0),y(Q,null,xe(M.value,v=>(g(),y(Q,{key:v.key},[it($.value,v.key)?(g(),pe(q,{key:0,modelValue:w.value.project_types[$.value].directories[v.key],"onUpdate:modelValue":W=>w.value.project_types[$.value].directories[v.key]=W,label:v.label,hint:v.hint,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label","hint"])):I("",!0)],64))),128)),h("div",fO,[_[89]||(_[89]=h("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Input Directories",-1)),x(bt,{"model-value":Vs($.value,"input"),"onUpdate:modelValue":_[18]||(_[18]=v=>Ms($.value,"input",v)),"add-label":"Add Input Directory","default-item":()=>({key:"",label:"",path:"",type:"input",_id:Date.now()})},{default:j(({item:v,index:W,update:ce})=>[h("div",pO,[x(q,{"model-value":v.key,"onUpdate:modelValue":ge=>ce("key",ge),label:"Key",placeholder:"e.g., inputs_archive",error:ps(v.key,$.value,"input",W),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),x(q,{"model-value":v.label,"onUpdate:modelValue":ge=>ce("label",ge),label:"Label",placeholder:"e.g., Archive",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":v.path,"onUpdate:modelValue":ge=>ce("path",ge),label:"Path",placeholder:"e.g., inputs/archive",error:Ds(v.path),prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])])]),_:1})],8,hO),h("div",{id:`project-${$.value}-workspaces`},[x(yt,{title:"Workspaces",description:"Functions, notebooks, and scripts scaffolded into every project."},{default:j(()=>[(g(!0),y(Q,null,xe(B.value,v=>(g(),y(Q,{key:v.key},[it($.value,v.key)?(g(),pe(q,{key:0,modelValue:w.value.project_types[$.value].directories[v.key],"onUpdate:modelValue":W=>w.value.project_types[$.value].directories[v.key]=W,label:v.label,hint:v.hint,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label","hint"])):I("",!0)],64))),128)),h("div",gO,[_[90]||(_[90]=h("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Workspace Directories",-1)),x(bt,{"model-value":Vs($.value,"workspace"),"onUpdate:modelValue":_[19]||(_[19]=v=>Ms($.value,"workspace",v)),"add-label":"Add Workspace Directory","default-item":()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:j(({item:v,index:W,update:ce})=>[h("div",vO,[x(q,{"model-value":v.key,"onUpdate:modelValue":ge=>ce("key",ge),label:"Key",placeholder:"e.g., tests",error:ps(v.key,$.value,"workspace",W),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),x(q,{"model-value":v.label,"onUpdate:modelValue":ge=>ce("label",ge),label:"Label",placeholder:"e.g., Tests",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":v.path,"onUpdate:modelValue":ge=>ce("path",ge),label:"Path",placeholder:"e.g., tests",error:Ds(v.path),prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])])]),_:1})],8,mO),h("div",{id:`project-${$.value}-outputs`},[x(yt,{title:"Outputs",description:"Outputs are public by default so results are easy to share."},{default:j(()=>[(g(!0),y(Q,null,xe(J.value,v=>(g(),y(Q,{key:v.key},[it($.value,v.key)?(g(),pe(q,{key:0,modelValue:w.value.project_types[$.value].directories[v.key],"onUpdate:modelValue":W=>w.value.project_types[$.value].directories[v.key]=W,label:v.label,hint:v.hint,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label","hint"])):I("",!0)],64))),128)),x(q,{modelValue:w.value.project_types[$.value].quarto.render_dir,"onUpdate:modelValue":_[20]||(_[20]=v=>w.value.project_types[$.value].quarto.render_dir=v),label:"Notebook output directory",hint:"Rendered notebooks and reports are written here by default.",prefix:"/",monospace:""},null,8,["modelValue"]),h("div",bO,[_[91]||(_[91]=h("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Output Directories",-1)),x(bt,{"model-value":Vs($.value,"output"),"onUpdate:modelValue":_[21]||(_[21]=v=>Ms($.value,"output",v)),"add-label":"Add Output Directory","default-item":()=>({key:"",label:"",path:"",type:"output",_id:Date.now()})},{default:j(({item:v,index:W,update:ce})=>[h("div",xO,[x(q,{"model-value":v.key,"onUpdate:modelValue":ge=>ce("key",ge),label:"Key",placeholder:"e.g., outputs_animations",error:ps(v.key,$.value,"output",W),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),x(q,{"model-value":v.label,"onUpdate:modelValue":ge=>ce("label",ge),label:"Label",placeholder:"e.g., Animations",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":v.path,"onUpdate:modelValue":ge=>ce("path",ge),label:"Path",placeholder:"e.g., outputs/animations",error:Ds(v.path),prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])])]),_:1})],8,yO),h("div",{id:`project-${$.value}-utility`},[x(yt,{title:"Utility directories",description:"Cache and scratch folders are gitignored so temporary artifacts never leak into version control."},{default:j(()=>[(g(!0),y(Q,null,xe(X.value,v=>(g(),y(Q,{key:v.key},[it($.value,v.key)?(g(),pe(q,{key:0,modelValue:w.value.project_types[$.value].directories[v.key],"onUpdate:modelValue":W=>w.value.project_types[$.value].directories[v.key]=W,label:v.label,hint:v.hint,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label","hint"])):I("",!0)],64))),128))]),_:1})],8,kO)])):$.value==="project_sensitive"?(g(),y("div",wO,[ae.value&&ae.value.length>0?(g(),y("div",_O,[x(yt,{title:"Project Settings",description:"Default settings applied when creating new projects of this type."},{default:j(()=>[x(Rt,null,{default:j(()=>[h("div",SO,[(g(!0),y(Q,null,xe(ae.value,v=>(g(),y(Q,{key:v.id},[v.control==="toggle"?(g(),pe(Re,{key:0,modelValue:w.value.project_types[$.value][v.id],"onUpdate:modelValue":W=>w.value.project_types[$.value][v.id]=W,label:v.label,description:v.description},null,8,["modelValue","onUpdate:modelValue","label","description"])):v.control==="select"?(g(),pe(as,{key:1,modelValue:w.value.project_types[$.value][v.id],"onUpdate:modelValue":W=>w.value.project_types[$.value][v.id]=W,label:v.label,hint:v.hint},{default:j(()=>[(g(!0),y(Q,null,xe(v.options,W=>(g(),y("option",{key:W.value,value:W.value},U(W.label),9,CO))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","label","hint"])):v.control==="text"?(g(),pe(q,{key:2,modelValue:w.value.project_types[$.value][v.id],"onUpdate:modelValue":W=>w.value.project_types[$.value][v.id]=W,label:v.label,hint:v.hint,placeholder:v.placeholder},null,8,["modelValue","onUpdate:modelValue","label","hint","placeholder"])):I("",!0)],64))),128))])]),_:1})]),_:1})])):I("",!0),h("div",AO,[h("div",VO,[h("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:_[22]||(_[22]=v=>Xe(`project-${$.value}-workspaces`))}," Workspaces "),h("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:_[23]||(_[23]=v=>Xe(`project-${$.value}-inputs-private`))}," Inputs "),h("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:_[24]||(_[24]=v=>Xe(`project-${$.value}-outputs-private`))}," Outputs "),h("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:_[25]||(_[25]=v=>Xe(`project-${$.value}-utility`))}," Utility ")]),x(Ie,{variant:"secondary",size:"sm",class:"mt-3 sm:mt-0",onClick:_[26]||(_[26]=v=>At($.value))},{default:j(()=>[..._[92]||(_[92]=[ue(" Reset to Defaults ",-1)])]),_:1})]),h("div",{id:`project-${$.value}-workspaces`},[x(yt,{title:"Workspaces",description:"Module locations for notebooks, scripts, and helper functions."},{default:j(()=>[h("div",DO,[(g(!0),y(Q,null,xe(B.value,v=>(g(),y(Q,{key:`sensitive-${v.key}`},[it($.value,v.key)?(g(),pe(q,{key:0,modelValue:w.value.project_types[$.value].directories[v.key],"onUpdate:modelValue":W=>w.value.project_types[$.value].directories[v.key]=W,label:v.label,hint:v.hint,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label","hint"])):I("",!0)],64))),128))]),h("div",TO,[_[93]||(_[93]=h("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Workspace Directories",-1)),x(bt,{"model-value":Vs($.value,"workspace"),"onUpdate:modelValue":_[27]||(_[27]=v=>Ms($.value,"workspace",v)),"add-label":"Add Workspace Directory","default-item":()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:j(({item:v,index:W,update:ce})=>[h("div",$O,[x(q,{"model-value":v.key,"onUpdate:modelValue":ge=>ce("key",ge),label:"Key",placeholder:"e.g., tests",error:ps(v.key,$.value,"workspace",W),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),x(q,{"model-value":v.label,"onUpdate:modelValue":ge=>ce("label",ge),label:"Label",placeholder:"e.g., Tests",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":v.path,"onUpdate:modelValue":ge=>ce("path",ge),label:"Path",placeholder:"e.g., tests",error:Ds(v.path),prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])])]),_:1})],8,MO),h("div",{id:`project-${$.value}-inputs-private`},[x(yt,{title:"Inputs",description:"Keep private inputs compartmentalized; publish processed outputs into public folders when ready."},{default:j(()=>[_[96]||(_[96]=h("div",{class:"grid gap-4 sm:grid-cols-2 text-xs font-semibold uppercase text-gray-500 dark:text-gray-400"},[h("div",null,"Private"),h("div",null,"Public")],-1)),(g(!0),y(Q,null,xe(ie.value,v=>(g(),y("div",{key:v.privateKey,class:"grid gap-4 sm:grid-cols-2"},[it($.value,v.privateKey)?(g(),pe(q,{key:0,modelValue:w.value.project_types[$.value].directories[v.privateKey],"onUpdate:modelValue":W=>w.value.project_types[$.value].directories[v.privateKey]=W,label:v.privateLabel||`${v.label} (private)`,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label"])):I("",!0),it($.value,v.publicKey)?(g(),pe(q,{key:1,modelValue:w.value.project_types[$.value].directories[v.publicKey],"onUpdate:modelValue":W=>w.value.project_types[$.value].directories[v.publicKey]=W,label:v.publicLabel||`${v.label} (public)`,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label"])):I("",!0)]))),128)),h("div",OO,[h("div",PO,[h("div",null,[_[94]||(_[94]=h("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Private Inputs",-1)),x(bt,{"model-value":Vs($.value,"input_private"),"onUpdate:modelValue":_[28]||(_[28]=v=>Ms($.value,"input_private",v)),"add-label":"Add Private Input","default-item":()=>({key:"",label:"",path:"",type:"input_private",_id:Date.now()})},{default:j(({item:v,index:W,update:ce})=>[h("div",jO,[x(q,{"model-value":v.key,"onUpdate:modelValue":ge=>ce("key",ge),label:"Key",placeholder:"e.g., inputs_archive",error:ps(v.key,$.value,"input_private",W),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),x(q,{"model-value":v.label,"onUpdate:modelValue":ge=>ce("label",ge),label:"Label",placeholder:"e.g., Archive",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":v.path,"onUpdate:modelValue":ge=>ce("path",ge),label:"Path",placeholder:"e.g., inputs/archive",error:Ds(v.path),prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])]),h("div",null,[_[95]||(_[95]=h("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Public Inputs",-1)),x(bt,{"model-value":Vs($.value,"input_public"),"onUpdate:modelValue":_[29]||(_[29]=v=>Ms($.value,"input_public",v)),"add-label":"Add Public Input","default-item":()=>({key:"",label:"",path:"",type:"input_public",_id:Date.now()})},{default:j(({item:v,index:W,update:ce})=>[h("div",RO,[x(q,{"model-value":v.key,"onUpdate:modelValue":ge=>ce("key",ge),label:"Key",placeholder:"e.g., inputs_public_archive",error:ps(v.key,$.value,"input_public",W),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),x(q,{"model-value":v.label,"onUpdate:modelValue":ge=>ce("label",ge),label:"Label",placeholder:"e.g., Archive (Public)",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":v.path,"onUpdate:modelValue":ge=>ce("path",ge),label:"Path",placeholder:"e.g., inputs_public/archive",error:Ds(v.path),prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])])])])]),_:1})],8,EO),h("div",{id:`project-${$.value}-outputs-private`},[x(yt,{title:"Outputs",description:"Review outputs before promotion; private folders remain gitignored while public copies are ready to share."},{default:j(()=>[_[99]||(_[99]=h("div",{class:"grid gap-4 sm:grid-cols-2 text-xs font-semibold uppercase text-gray-500 dark:text-gray-400"},[h("div",null,"Private"),h("div",null,"Public")],-1)),(g(!0),y(Q,null,xe(N.value,v=>(g(),y("div",{key:v.privateKey,class:"grid gap-4 sm:grid-cols-2"},[it($.value,v.privateKey)?(g(),pe(q,{key:0,modelValue:w.value.project_types[$.value].directories[v.privateKey],"onUpdate:modelValue":W=>w.value.project_types[$.value].directories[v.privateKey]=W,label:v.privateLabel||`${v.label} (private)`,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label"])):I("",!0),it($.value,v.publicKey)?(g(),pe(q,{key:1,modelValue:w.value.project_types[$.value].directories[v.publicKey],"onUpdate:modelValue":W=>w.value.project_types[$.value].directories[v.publicKey]=W,label:v.publicLabel||`${v.label} (public)`,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label"])):I("",!0)]))),128)),x(q,{modelValue:w.value.project_types[$.value].quarto.render_dir,"onUpdate:modelValue":_[30]||(_[30]=v=>w.value.project_types[$.value].quarto.render_dir=v),label:"Notebook output directory",hint:"Rendered docs default to a public location but can be moved if needed.",prefix:"/",monospace:""},null,8,["modelValue"]),h("div",BO,[h("div",IO,[h("div",null,[_[97]||(_[97]=h("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Private Outputs",-1)),x(bt,{"model-value":Vs($.value,"output_private"),"onUpdate:modelValue":_[31]||(_[31]=v=>Ms($.value,"output_private",v)),"add-label":"Add Private Output","default-item":()=>({key:"",label:"",path:"",type:"output_private",_id:Date.now()})},{default:j(({item:v,index:W,update:ce})=>[h("div",NO,[x(q,{"model-value":v.key,"onUpdate:modelValue":ge=>ce("key",ge),label:"Key",placeholder:"e.g., outputs_animations",error:ps(v.key,$.value,"output_private",W),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),x(q,{"model-value":v.label,"onUpdate:modelValue":ge=>ce("label",ge),label:"Label",placeholder:"e.g., Animations",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":v.path,"onUpdate:modelValue":ge=>ce("path",ge),label:"Path",placeholder:"e.g., outputs/animations",error:Ds(v.path),prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])]),h("div",null,[_[98]||(_[98]=h("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Public Outputs",-1)),x(bt,{"model-value":Vs($.value,"output_public"),"onUpdate:modelValue":_[32]||(_[32]=v=>Ms($.value,"output_public",v)),"add-label":"Add Public Output","default-item":()=>({key:"",label:"",path:"",type:"output_public",_id:Date.now()})},{default:j(({item:v,index:W,update:ce})=>[h("div",UO,[x(q,{"model-value":v.key,"onUpdate:modelValue":ge=>ce("key",ge),label:"Key",placeholder:"e.g., outputs_public_animations",error:ps(v.key,$.value,"output_public",W),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),x(q,{"model-value":v.label,"onUpdate:modelValue":ge=>ce("label",ge),label:"Label",placeholder:"e.g., Animations (Public)",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":v.path,"onUpdate:modelValue":ge=>ce("path",ge),label:"Path",placeholder:"e.g., outputs_public/animations",error:Ds(v.path),prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])])])])]),_:1})],8,LO),h("div",{id:`project-${$.value}-utility`},[x(yt,{title:"Utility directories",description:"Keep cache and scratch in private space for safety; both remain gitignored."},{default:j(()=>[h("div",FO,[(g(!0),y(Q,null,xe(X.value,v=>(g(),y(Q,{key:`sensitive-${v.key}`},[it($.value,v.key)?(g(),pe(q,{key:0,modelValue:w.value.project_types[$.value].directories[v.key],"onUpdate:modelValue":W=>w.value.project_types[$.value].directories[v.key]=W,label:v.label,hint:v.hint,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label","hint"])):I("",!0)],64))),128))])]),_:1})],8,zO)])):$.value==="presentation"?(g(),y("div",HO,[ae.value&&ae.value.length>0?(g(),y("div",WO,[x(yt,{title:"Project Settings",description:"Default settings applied when creating new projects of this type."},{default:j(()=>[x(Rt,null,{default:j(()=>[h("div",qO,[(g(!0),y(Q,null,xe(ae.value,v=>(g(),y(Q,{key:v.id},[v.control==="toggle"?(g(),pe(Re,{key:0,modelValue:w.value.project_types[$.value][v.id],"onUpdate:modelValue":W=>w.value.project_types[$.value][v.id]=W,label:v.label,description:v.description},null,8,["modelValue","onUpdate:modelValue","label","description"])):v.control==="select"?(g(),pe(as,{key:1,modelValue:w.value.project_types[$.value][v.id],"onUpdate:modelValue":W=>w.value.project_types[$.value][v.id]=W,label:v.label,hint:v.hint},{default:j(()=>[(g(!0),y(Q,null,xe(v.options,W=>(g(),y("option",{key:W.value,value:W.value},U(W.label),9,KO))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","label","hint"])):v.control==="text"?(g(),pe(q,{key:2,modelValue:w.value.project_types[$.value][v.id],"onUpdate:modelValue":W=>w.value.project_types[$.value][v.id]=W,label:v.label,hint:v.hint,placeholder:v.placeholder},null,8,["modelValue","onUpdate:modelValue","label","hint","placeholder"])):I("",!0)],64))),128))])]),_:1})]),_:1})])):I("",!0),h("div",GO,[h("div",JO,[h("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:_[33]||(_[33]=v=>Xe(`project-${$.value}-primary`))}," Primary files "),h("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:_[34]||(_[34]=v=>Xe(`project-${$.value}-optional`))}," Optional folders ")]),x(Ie,{variant:"secondary",size:"sm",class:"mt-3 sm:mt-0",onClick:_[35]||(_[35]=v=>At($.value))},{default:j(()=>[..._[100]||(_[100]=[ue(" Reset to Defaults ",-1)])]),_:1})]),h("div",{id:`project-${$.value}-primary`},[x(yt,{title:"Primary files"},{default:j(()=>[h("div",XO,[x(q,{modelValue:w.value.project_types[$.value].directories.presentation_source,"onUpdate:modelValue":_[36]||(_[36]=v=>w.value.project_types[$.value].directories.presentation_source=v),label:"Presentation source file",hint:"Relative path to your primary presentation.qmd.",monospace:""},null,8,["modelValue"]),x(q,{modelValue:w.value.project_types[$.value].directories.rendered_slides,"onUpdate:modelValue":_[37]||(_[37]=v=>w.value.project_types[$.value].directories.rendered_slides=v),label:"Rendered slides directory",hint:"Rendered slides write to the project root by default ('.').",monospace:""},null,8,["modelValue"])])]),_:1})],8,YO),h("div",{id:`project-${$.value}-optional`},[x(yt,{title:"Optional folders",description:"Toggle extra scaffolding when you need supporting data, scripts, or helper utilities."},{default:j(()=>[h("div",ZO,[h("div",eP,[x(Re,{modelValue:Y.includeInputs,"onUpdate:modelValue":_[38]||(_[38]=v=>Y.includeInputs=v),label:"Include inputs directory",description:"Adds an inputs/ folder for sample data used in the presentation."},null,8,["modelValue"]),Y.includeInputs?(g(),pe(q,{key:0,modelValue:w.value.project_types[$.value].directories.inputs,"onUpdate:modelValue":_[39]||(_[39]=v=>w.value.project_types[$.value].directories.inputs=v),label:"Inputs directory",prefix:"/",monospace:""},null,8,["modelValue"])):I("",!0)]),h("div",tP,[x(Re,{modelValue:Y.includeScripts,"onUpdate:modelValue":_[40]||(_[40]=v=>Y.includeScripts=v),label:"Include scripts directory",description:"Adds a scripts/ folder for demo code or automation."},null,8,["modelValue"]),Y.includeScripts?(g(),pe(q,{key:0,modelValue:w.value.project_types[$.value].directories.scripts,"onUpdate:modelValue":_[41]||(_[41]=v=>w.value.project_types[$.value].directories.scripts=v),label:"Scripts directory",prefix:"/",monospace:""},null,8,["modelValue"])):I("",!0)]),h("div",sP,[x(Re,{modelValue:Y.includeFunctions,"onUpdate:modelValue":_[42]||(_[42]=v=>Y.includeFunctions=v),label:"Include functions directory",description:"Adds R/functions for helper utilities that should load automatically."},null,8,["modelValue"]),Y.includeFunctions?(g(),pe(q,{key:0,modelValue:w.value.project_types[$.value].directories.functions,"onUpdate:modelValue":_[43]||(_[43]=v=>w.value.project_types[$.value].directories.functions=v),label:"Functions directory",prefix:"/",monospace:""},null,8,["modelValue"])):I("",!0)]),h("div",iP,[_[101]||(_[101]=h("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Custom Directories",-1)),_[102]||(_[102]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Add any additional directories you need for your presentations.",-1)),x(bt,{"model-value":w.value.project_types[$.value].extra_directories||[],"onUpdate:modelValue":_[44]||(_[44]=v=>w.value.project_types[$.value].extra_directories=v),"add-label":"Add Directory","default-item":()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:j(({item:v,index:W,update:ce})=>[h("div",nP,[x(q,{"model-value":v.key,"onUpdate:modelValue":ge=>ce("key",ge),label:"Key",placeholder:"e.g., assets",error:ps(v.key,$.value,"workspace",W),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),x(q,{"model-value":v.label,"onUpdate:modelValue":ge=>ce("label",ge),label:"Label",placeholder:"e.g., Assets",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":v.path,"onUpdate:modelValue":ge=>ce("path",ge),label:"Path",placeholder:"e.g., assets",error:Ds(v.path),prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])])])]),_:1})],8,QO)])):$.value==="course"?(g(),y("div",rP,[ae.value&&ae.value.length>0?(g(),y("div",oP,[x(yt,{title:"Project Settings",description:"Default settings applied when creating new projects of this type."},{default:j(()=>[x(Rt,null,{default:j(()=>[h("div",lP,[(g(!0),y(Q,null,xe(ae.value,v=>(g(),y(Q,{key:v.id},[v.control==="toggle"?(g(),pe(Re,{key:0,modelValue:w.value.project_types[$.value][v.id],"onUpdate:modelValue":W=>w.value.project_types[$.value][v.id]=W,label:v.label,description:v.description},null,8,["modelValue","onUpdate:modelValue","label","description"])):v.control==="select"?(g(),pe(as,{key:1,modelValue:w.value.project_types[$.value][v.id],"onUpdate:modelValue":W=>w.value.project_types[$.value][v.id]=W,label:v.label,hint:v.hint},{default:j(()=>[(g(!0),y(Q,null,xe(v.options,W=>(g(),y("option",{key:W.value,value:W.value},U(W.label),9,aP))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","label","hint"])):v.control==="text"?(g(),pe(q,{key:2,modelValue:w.value.project_types[$.value][v.id],"onUpdate:modelValue":W=>w.value.project_types[$.value][v.id]=W,label:v.label,hint:v.hint,placeholder:v.placeholder},null,8,["modelValue","onUpdate:modelValue","label","hint","placeholder"])):I("",!0)],64))),128))])]),_:1})]),_:1})])):I("",!0),h("div",uP,[h("div",dP,[h("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:_[45]||(_[45]=v=>Xe(`project-${$.value}-core`))}," Core folders "),h("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:_[46]||(_[46]=v=>Xe(`project-${$.value}-quarto`))}," Quarto render directory ")]),x(Ie,{variant:"secondary",size:"sm",class:"mt-3 sm:mt-0",onClick:_[47]||(_[47]=v=>At($.value))},{default:j(()=>[..._[103]||(_[103]=[ue(" Reset to Defaults ",-1)])]),_:1})]),h("div",{id:`project-${$.value}-core`},[x(yt,{title:"Core folders",description:"Configure folders for course datasets, slide decks, assignments, and readings."},{default:j(()=>[h("div",hP,[x(q,{modelValue:w.value.project_types[$.value].directories.data,"onUpdate:modelValue":_[48]||(_[48]=v=>w.value.project_types[$.value].directories.data=v),label:"Course data",prefix:"/",monospace:"",hint:"Shared datasets distributed with the course."},null,8,["modelValue"]),x(q,{modelValue:w.value.project_types[$.value].directories.slides,"onUpdate:modelValue":_[49]||(_[49]=v=>w.value.project_types[$.value].directories.slides=v),label:"Slides",prefix:"/",monospace:"",hint:"Lecture slide sources."},null,8,["modelValue"]),x(q,{modelValue:w.value.project_types[$.value].directories.assignments,"onUpdate:modelValue":_[50]||(_[50]=v=>w.value.project_types[$.value].directories.assignments=v),label:"Assignments",prefix:"/",monospace:"",hint:"Homework or lab materials."},null,8,["modelValue"]),x(q,{modelValue:w.value.project_types[$.value].directories.course_docs,"onUpdate:modelValue":_[51]||(_[51]=v=>w.value.project_types[$.value].directories.course_docs=v),label:"Course documents",prefix:"/",monospace:"",hint:"Syllabus, policies, grading guides."},null,8,["modelValue"]),x(q,{modelValue:w.value.project_types[$.value].directories.readings,"onUpdate:modelValue":_[52]||(_[52]=v=>w.value.project_types[$.value].directories.readings=v),label:"Readings",prefix:"/",monospace:"",hint:"Assigned readings and references."},null,8,["modelValue"]),x(q,{modelValue:w.value.project_types[$.value].directories.notebooks,"onUpdate:modelValue":_[53]||(_[53]=v=>w.value.project_types[$.value].directories.notebooks=v),label:"Module notebooks",prefix:"/",monospace:"",hint:"Module notebooks or workshop materials."},null,8,["modelValue"])])]),_:1})],8,cP),h("div",{id:`project-${$.value}-quarto`},[x(yt,{title:"Quarto render directory",description:"Default location for rendered course documentation."},{default:j(()=>[x(q,{modelValue:w.value.project_types[$.value].quarto.render_dir,"onUpdate:modelValue":_[54]||(_[54]=v=>w.value.project_types[$.value].quarto.render_dir=v),label:"Render directory",prefix:"/",monospace:""},null,8,["modelValue"])]),_:1}),h("div",pP,[_[104]||(_[104]=h("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Custom Directories",-1)),_[105]||(_[105]=h("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Add any additional directories you need for your courses.",-1)),x(bt,{"model-value":w.value.project_types[$.value].extra_directories||[],"onUpdate:modelValue":_[55]||(_[55]=v=>w.value.project_types[$.value].extra_directories=v),"add-label":"Add Directory","default-item":()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:j(({item:v,index:W,update:ce})=>[h("div",mP,[x(q,{"model-value":v.key,"onUpdate:modelValue":ge=>ce("key",ge),label:"Key",placeholder:"e.g., resources",error:ps(v.key,$.value,"workspace",W),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),x(q,{"model-value":v.label,"onUpdate:modelValue":ge=>ce("label",ge),label:"Label",placeholder:"e.g., Resources",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),x(q,{"model-value":v.path,"onUpdate:modelValue":ge=>ce("path",ge),label:"Path",placeholder:"e.g., resources",error:Ds(v.path),prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])])],8,fP)])):I("",!0),h("div",{id:`project-${$.value}-gitignore`},[x(yt,{title:".gitignore Template",description:"Patterns applied to all new projects of this type."},{default:j(()=>[x(wn,{modelValue:Ee[`gitignore_${$.value}`].contents,"onUpdate:modelValue":_[56]||(_[56]=v=>Ee[`gitignore_${$.value}`].contents=v),language:"text","min-height":"400px",disabled:Ee[`gitignore_${$.value}`].loading},null,8,["modelValue","disabled"]),Ee[`gitignore_${$.value}`].loading?(g(),y("p",vP,"Loading .gitignore template")):I("",!0),h("div",yP,[x(Ie,{size:"sm",variant:"secondary",onClick:_[57]||(_[57]=v=>Ue(`gitignore-${$.value}`,`gitignore_${$.value}`))},{default:j(()=>[..._[106]||(_[106]=[ue("Restore Default",-1)])]),_:1})])]),_:1})],8,gP)])):I("",!0):(g(),y("div",Z7,[h("div",eO,[(g(!0),y(Q,null,xe(ee.value,v=>(g(),y("button",{key:v.key,onClick:W=>dn(v.key),class:"group relative w-full rounded-lg border border-gray-200 p-6 text-left transition hover:border-sky-300 dark:border-gray-700 dark:hover:border-sky-600"},[h("div",sO,[x(at(Gl),{class:"h-6 w-6 flex-shrink-0 text-gray-400 transition group-hover:text-sky-600 dark:group-hover:text-sky-400"}),h("div",null,[h("h3",iO,U(v.label),1),h("p",nO,U(w.value.project_types[v.key]?.description||""),1)])])],8,tO))),128))])]))],512),[[xt,b.value==="structure"]]),rt(h("div",bP,[h("div",xP,[x(yt,null,{default:j(()=>[x(Rt,{title:"Notebook Template",description:"Used by framework::make_notebook() to populate new notebooks."},{default:j(()=>[x(wn,{modelValue:Ee.notebook.contents,"onUpdate:modelValue":_[58]||(_[58]=v=>Ee.notebook.contents=v),language:"markdown","min-height":"500px",disabled:Ee.notebook.loading},null,8,["modelValue","disabled"]),Ee.notebook.loading?(g(),y("p",kP,"Loading notebook template")):I("",!0),h("div",wP,[x(Ie,{size:"sm",variant:"secondary",onClick:_[59]||(_[59]=v=>Ue("notebook"))},{default:j(()=>[..._[107]||(_[107]=[ue("Restore Default",-1)])]),_:1})])]),_:1})]),_:1})]),h("div",_P,[x(yt,null,{default:j(()=>[x(Rt,{title:"Script Template",description:"Used by framework::make_script() for quick task scaffolds."},{default:j(()=>[x(wn,{modelValue:Ee.script.contents,"onUpdate:modelValue":_[60]||(_[60]=v=>Ee.script.contents=v),language:"r","min-height":"450px",disabled:Ee.script.loading},null,8,["modelValue","disabled"]),Ee.script.loading?(g(),y("p",SP,"Loading script template")):I("",!0),h("div",CP,[x(Ie,{size:"sm",variant:"secondary",onClick:_[61]||(_[61]=v=>Ue("script"))},{default:j(()=>[..._[108]||(_[108]=[ue("Restore Default",-1)])]),_:1})])]),_:1})]),_:1})]),h("div",AP,[x(yt,null,{default:j(()=>[x(Rt,{title:"Presentation Template",description:"Used by framework::make_notebook(stub = 'revealjs') for slide decks."},{default:j(()=>[x(wn,{modelValue:Ee.presentation.contents,"onUpdate:modelValue":_[62]||(_[62]=v=>Ee.presentation.contents=v),language:"markdown","min-height":"500px",disabled:Ee.presentation.loading},null,8,["modelValue","disabled"]),Ee.presentation.loading?(g(),y("p",VP,"Loading presentation template")):I("",!0),h("div",MP,[x(Ie,{size:"sm",variant:"secondary",onClick:_[63]||(_[63]=v=>Ue("presentation"))},{default:j(()=>[..._[109]||(_[109]=[ue("Restore Default",-1)])]),_:1})])]),_:1})]),_:1})])],512),[[xt,b.value==="templates"]]),rt(h("div",DP,[x(yt,{description:"Framework maintains context files for selected assistants and keeps them in sync before commits."},{default:j(()=>[x(Rt,null,{default:j(()=>[x(Re,{modelValue:w.value.defaults.ai_support,"onUpdate:modelValue":_[64]||(_[64]=v=>w.value.defaults.ai_support=v),label:"Enable AI Support",description:"Generate and sync assistant-specific context files."},null,8,["modelValue"])]),_:1}),x(Rt,{title:"Canonical context file",description:"This file is the source of truth; other instructions files are synced to it when AI hooks run."},{default:j(()=>[x(as,{modelValue:w.value.defaults.ai_canonical_file,"onUpdate:modelValue":_[65]||(_[65]=v=>w.value.defaults.ai_canonical_file=v),disabled:!w.value.defaults.ai_support,label:"Canonical Context File"},{default:j(()=>[..._[110]||(_[110]=[h("option",{value:"AGENTS.md"},"AGENTS.md (multi-agent orchestrator)",-1),h("option",{value:"CLAUDE.md"},"CLAUDE.md",-1),h("option",{value:".github/copilot-instructions.md"},".github/copilot-instructions.md",-1)])]),_:1},8,["modelValue","disabled"])]),_:1}),w.value.defaults.ai_support?(g(),y(Q,{key:0},[x(Rt,{title:"Assistants",description:"Choose which assistants receive context updates."},{default:j(()=>[h("div",TP,[(g(),y(Q,null,xe(T,v=>x(Di,{key:v.id,id:`ai-${v.id}`,modelValue:Z[v.id],"onUpdate:modelValue":W=>Z[v.id]=W,description:v.description},{default:j(()=>[ue(U(v.label),1)]),_:2},1032,["id","modelValue","onUpdate:modelValue","description"])),64))])]),_:1}),x(Rt,null,{default:j(()=>[x(Re,{modelValue:w.value.defaults.git_hooks.ai_sync,"onUpdate:modelValue":_[66]||(_[66]=v=>w.value.defaults.git_hooks.ai_sync=v),label:"Sync AI Files Before Commit",description:"Update non-canonical files so assistants share the same instructions."},null,8,["modelValue"])]),_:1}),x(Rt,{title:"Canonical instructions",description:"Edit the canonical file directly. Restore defaults if you want to start over."},{default:j(()=>[x(wn,{modelValue:Ee.canonical.contents,"onUpdate:modelValue":_[67]||(_[67]=v=>Ee.canonical.contents=v),language:"markdown","min-height":"500px",disabled:Ee.canonical.loading||!w.value.defaults.ai_support},null,8,["modelValue","disabled"]),h("div",$P,[x(Ie,{size:"sm",variant:"secondary",disabled:Ee.canonical.loading,onClick:st},{default:j(()=>[..._[111]||(_[111]=[ue("Restore Default",-1)])]),_:1},8,["disabled"])])]),_:1})],64)):I("",!0)]),_:1})],512),[[xt,b.value==="ai"]]),rt(h("div",EP,[x(yt,{description:"Configure how Framework initializes repositories, commits, and pre-commit hooks."},{default:j(()=>[x(Rt,null,{default:j(()=>[x(Re,{modelValue:w.value.defaults.use_git,"onUpdate:modelValue":_[68]||(_[68]=v=>w.value.defaults.use_git=v),label:"Initialize Git",description:"Run git init for every new project."},null,8,["modelValue"])]),_:1}),x(Rt,{title:"Git identity",description:"Overrides Author Information when provided."},{default:j(()=>[h("div",OP,[x(q,{modelValue:w.value.git.user_name,"onUpdate:modelValue":_[69]||(_[69]=v=>w.value.git.user_name=v),label:"Git Name",placeholder:"Jane Analyst"},null,8,["modelValue"]),x(q,{modelValue:w.value.git.user_email,"onUpdate:modelValue":_[70]||(_[70]=v=>w.value.git.user_email=v),label:"Git Email",placeholder:"jane@example.com",hint:"Used for git config user.email during project setup."},null,8,["modelValue"])])]),_:1}),x(Rt,{title:"Git Hooks",description:"Pre-commit hooks that run automatically before each commit."},{default:j(()=>[h("div",PP,[x(Re,{modelValue:w.value.defaults.git_hooks.ai_sync,"onUpdate:modelValue":_[71]||(_[71]=v=>w.value.defaults.git_hooks.ai_sync=v),label:"Sync AI Files Before Commit",description:"Update non-canonical files so assistants share the same instructions."},null,8,["modelValue"]),x(Re,{modelValue:w.value.privacy.secret_scan,"onUpdate:modelValue":_[72]||(_[72]=v=>w.value.privacy.secret_scan=v),label:"Check for Secrets",description:"Run a lightweight scan for API keys and credentials before commits."},null,8,["modelValue"]),x(Re,{modelValue:w.value.defaults.git_hooks.check_sensitive_dirs,"onUpdate:modelValue":_[73]||(_[73]=v=>w.value.defaults.git_hooks.check_sensitive_dirs=v),label:"Warn About Unignored Sensitive Directories",description:"Block commits if directories with sensitive names aren't gitignored."},null,8,["modelValue"])]),_[112]||(_[112]=h("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-4"},[ue(" Project-specific .gitignore templates can be customized in "),h("a",{href:"#/settings/project-defaults",class:"text-sky-600 dark:text-sky-400 hover:underline"},"Project Defaults"),ue(". ")],-1))]),_:1})]),_:1})],512),[[xt,b.value==="git"]]),rt(h("div",jP,[x(yt,null,{default:j(()=>[x(Rt,null,{default:j(()=>[x(Re,{modelValue:w.value.defaults.packages.use_renv,"onUpdate:modelValue":_[74]||(_[74]=v=>w.value.defaults.packages.use_renv=v),label:"Enable renv",description:"Create renv environments for new projects."},null,8,["modelValue"])]),_:1}),x(Rt,{title:"Default packages",description:"Installed (and optionally attached) when scaffold() runs."},{default:j(()=>[_[116]||(_[116]=h("p",{class:"text-xs text-gray-600 dark:text-gray-400 mb-4"},"Use this list to preseed notebooks with your preferred helpers.",-1)),w.value.defaults.packages.default_packages&&w.value.defaults.packages.default_packages.length?(g(),y("div",RP,[(g(!0),y(Q,null,xe(w.value.defaults.packages.default_packages,(v,W)=>(g(),y("div",{key:`pkg-${W}`,class:"rounded-md border border-gray-200 p-4 dark:border-gray-700"},[h("div",LP,[h("div",BP,[v.source==="cran"||v.source==="bioconductor"?(g(),pe(nh,{key:0,modelValue:v.name,"onUpdate:modelValue":ce=>v.name=ce,source:v.source,label:"Package",placeholder:v.source==="cran"?"Search CRAN...":"Search Bioconductor...",onSelect:ce=>v.name=ce.name},null,8,["modelValue","onUpdate:modelValue","source","placeholder","onSelect"])):(g(),pe(q,{key:1,modelValue:v.name,"onUpdate:modelValue":ce=>v.name=ce,label:"Package",placeholder:"user/repo"},null,8,["modelValue","onUpdate:modelValue"])),x(as,{modelValue:v.source,"onUpdate:modelValue":ce=>v.source=ce,label:"Source"},{default:j(()=>[..._[113]||(_[113]=[h("option",{value:"cran"},"CRAN",-1),h("option",{value:"github"},"GitHub",-1),h("option",{value:"bioconductor"},"Bioconductor",-1)])]),_:1},8,["modelValue","onUpdate:modelValue"])]),h("div",IP,[x(Re,{modelValue:v.auto_attach,"onUpdate:modelValue":ce=>v.auto_attach=ce,label:"Auto-Attach",description:"Call library() when scaffold() runs."},null,8,["modelValue","onUpdate:modelValue"]),x(Ie,{size:"sm",variant:"secondary",onClick:ce=>un(W)},{default:j(()=>[..._[114]||(_[114]=[ue("Remove",-1)])]),_:1},8,["onClick"])])])]))),128))])):(g(),y("p",NP,"No packages configured. Add packages to include tidyverse helpers or internal utilities automatically.")),h("div",UP,[x(Ie,{size:"sm",variant:"secondary",onClick:zs},{default:j(()=>[..._[115]||(_[115]=[ue("Add Package",-1)])]),_:1})])]),_:1})]),_:1})],512),[[xt,b.value==="packages"]])])]),x(fr,{modelValue:qe.open,"onUpdate:modelValue":_[77]||(_[77]=v=>qe.open=v),size:"lg",title:qe.title},{default:j(()=>[h("p",zP,U(qe.description),1),x(Xd,{modelValue:qe.contents,"onUpdate:modelValue":_[75]||(_[75]=v=>qe.contents=v),rows:18,monospace:""},null,8,["modelValue"])]),actions:j(()=>[h("div",FP,[x(Ie,{variant:"secondary",onClick:_[76]||(_[76]=v=>qe.open=!1)},{default:j(()=>[..._[117]||(_[117]=[ue("Cancel",-1)])]),_:1}),x(Ie,{variant:"primary",disabled:qe.loading,onClick:ns},{default:j(()=>[ue(U(qe.loading?"Saving":"Save Template"),1)]),_:1},8,["disabled"])])]),_:1},8,["modelValue","title"]),x(fr,{modelValue:We.open,"onUpdate:modelValue":_[79]||(_[79]=v=>We.open=v),size:"md",title:"Reset to Defaults",icon:"warning"},{default:j(()=>[h("p",HP,[_[118]||(_[118]=ue(" Are you sure you want to reset ",-1)),h("strong",null,U(We.projectTypeName),1),_[119]||(_[119]=ue(" to default settings? This will discard all your customizations for this project type. ",-1))])]),actions:j(()=>[h("div",WP,[x(Ie,{variant:"secondary",onClick:_[78]||(_[78]=v=>We.open=!1)},{default:j(()=>[..._[120]||(_[120]=[ue("Cancel",-1)])]),_:1}),x(Ie,{variant:"primary",onClick:is},{default:j(()=>[..._[121]||(_[121]=[ue(" Reset to Defaults ",-1)])]),_:1})])]),_:1},8,["modelValue"])]))}},JP={class:"mx-auto max-w-5xl p-10"},YP={__name:"ProjectPackagesView",setup(t){return ve([]),es(async()=>{}),(e,s)=>(g(),y("div",JP,[x(Cr,{title:"Packages",description:"Manage R packages for this project."}),s[0]||(s[0]=Aa('<div class="mt-10 rounded-2xl border border-zinc-200 bg-white p-8 shadow-sm dark:border-zinc-800 dark:bg-zinc-900"><div class="flex items-center gap-3 border-b border-zinc-100 pb-6 dark:border-zinc-800"><div class="flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-sky-500 to-sky-600 shadow-lg shadow-sky-500/20"><svg class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg></div><h3 class="text-xl font-bold text-zinc-900 dark:text-white">Package Configuration</h3></div><div class="mt-8"><p class="text-sm text-zinc-600 dark:text-zinc-400"> Package management interface coming soon. This page will allow you to: </p><ul class="mt-4 space-y-2 text-sm text-zinc-600 dark:text-zinc-400"><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Add and remove project packages </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Specify package versions </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Toggle renv integration </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Install and update packages </li></ul></div></div>',1))]))}},XP={class:"mx-auto max-w-5xl p-10"},QP={__name:"ProjectDataView",setup(t){return ve([]),es(async()=>{}),(e,s)=>(g(),y("div",XP,[x(Cr,{title:"Data",description:"Manage data catalog and sources for this project."}),s[0]||(s[0]=Aa('<div class="mt-10 rounded-2xl border border-zinc-200 bg-white p-8 shadow-sm dark:border-zinc-800 dark:bg-zinc-900"><div class="flex items-center gap-3 border-b border-zinc-100 pb-6 dark:border-zinc-800"><div class="flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-sky-500 to-sky-600 shadow-lg shadow-sky-500/20"><svg class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"></path></svg></div><h3 class="text-xl font-bold text-zinc-900 dark:text-white">Data Catalog</h3></div><div class="mt-8"><p class="text-sm text-zinc-600 dark:text-zinc-400"> Data catalog management interface coming soon. This page will allow you to: </p><ul class="mt-4 space-y-2 text-sm text-zinc-600 dark:text-zinc-400"><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Define data sources in the catalog </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Specify data formats (CSV, RDS, etc.) </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Configure encryption settings </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Track data integrity via digests </li></ul></div></div>',1))]))}},ZP={class:"mx-auto max-w-5xl p-10"},ej={__name:"ProjectConnectionsView",setup(t){return ve([]),es(async()=>{}),(e,s)=>(g(),y("div",ZP,[x(Cr,{title:"Connections",description:"Manage database connections for this project."}),s[0]||(s[0]=Aa('<div class="mt-10 rounded-2xl border border-zinc-200 bg-white p-8 shadow-sm dark:border-zinc-800 dark:bg-zinc-900"><div class="flex items-center gap-3 border-b border-zinc-100 pb-6 dark:border-zinc-800"><div class="flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-sky-500 to-sky-600 shadow-lg shadow-sky-500/20"><svg class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg></div><h3 class="text-xl font-bold text-zinc-900 dark:text-white">Database Connections</h3></div><div class="mt-8"><p class="text-sm text-zinc-600 dark:text-zinc-400"> Connection management interface coming soon. This page will allow you to: </p><ul class="mt-4 space-y-2 text-sm text-zinc-600 dark:text-zinc-400"><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Configure database connections (SQLite, PostgreSQL) </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Store connection credentials securely </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Test database connectivity </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Manage connection pooling settings </li></ul></div></div>',1))]))}},tj=[{path:"/",redirect:"/projects"},{path:"/docs",name:"docs",component:Cf},{path:"/docs/:functionName",name:"doc-detail",component:Cf,props:!0},{path:"/projects",name:"projects",component:dS},{path:"/projects/new",name:"project-create",component:sD},{path:"/project/:id",name:"project-detail",component:l7,props:!0},{path:"/settings/:section?/:subsection?",name:"settings",component:GP,props:!0},{path:"/project/packages",name:"project-packages",component:YP},{path:"/project/data",name:"project-data",component:QP},{path:"/project/connections",name:"project-connections",component:ej}],sj=Fk({history:kk(),routes:tj});Ox(Mw).use(sj).mount("#app");
