(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function s(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(n){if(n.ep)return;n.ep=!0;const o=s(n);fetch(n.href,o)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function cc(t){const e=Object.create(null);for(const s of t.split(","))e[s]=1;return s=>s in e}const pt={},so=[],bi=()=>{},Tm=()=>!1,$a=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),fc=t=>t.startsWith("onUpdate:"),zt=Object.assign,hc=(t,e)=>{const s=t.indexOf(e);s>-1&&t.splice(s,1)},Cb=Object.prototype.hasOwnProperty,lt=(t,e)=>Cb.call(t,e),Ne=Array.isArray,io=t=>Nr(t)==="[object Map]",Vo=t=>Nr(t)==="[object Set]",Uf=t=>Nr(t)==="[object Date]",qe=t=>typeof t=="function",Ct=t=>typeof t=="string",Ys=t=>typeof t=="symbol",dt=t=>t!==null&&typeof t=="object",Em=t=>(dt(t)||qe(t))&&qe(t.then)&&qe(t.catch),Om=Object.prototype.toString,Nr=t=>Om.call(t),Ab=t=>Nr(t).slice(8,-1),Pm=t=>Nr(t)==="[object Object]",pc=t=>Ct(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Xo=cc(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ta=t=>{const e=Object.create(null);return(s=>e[s]||(e[s]=t(s)))},Vb=/-\w/g,zs=Ta(t=>t.replace(Vb,e=>e.slice(1).toUpperCase())),Mb=/\B([A-Z])/g,Fn=Ta(t=>t.replace(Mb,"-$1").toLowerCase()),Ea=Ta(t=>t.charAt(0).toUpperCase()+t.slice(1)),au=Ta(t=>t?`on${Ea(t)}`:""),tn=(t,e)=>!Object.is(t,e),jl=(t,...e)=>{for(let s=0;s<t.length;s++)t[s](...e)},Lm=(t,e,s,i=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:i,value:s})},Ql=t=>{const e=parseFloat(t);return isNaN(e)?t:e},Db=t=>{const e=Ct(t)?Number(t):NaN;return isNaN(e)?t:e};let Nf;const Oa=()=>Nf||(Nf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function hr(t){if(Ne(t)){const e={};for(let s=0;s<t.length;s++){const i=t[s],n=Ct(i)?Ob(i):hr(i);if(n)for(const o in n)e[o]=n[o]}return e}else if(Ct(t)||dt(t))return t}const $b=/;(?![^(]*\))/g,Tb=/:([^]+)/,Eb=/\/\*[^]*?\*\//g;function Ob(t){const e={};return t.replace(Eb,"").split($b).forEach(s=>{if(s){const i=s.split(Tb);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function Ee(t){let e="";if(Ct(t))e=t;else if(Ne(t))for(let s=0;s<t.length;s++){const i=Ee(t[s]);i&&(e+=i+" ")}else if(dt(t))for(const s in t)t[s]&&(e+=s+" ");return e.trim()}const Pb="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Lb=cc(Pb);function jm(t){return!!t||t===""}function jb(t,e){if(t.length!==e.length)return!1;let s=!0;for(let i=0;s&&i<t.length;i++)s=jn(t[i],e[i]);return s}function jn(t,e){if(t===e)return!0;let s=Uf(t),i=Uf(e);if(s||i)return s&&i?t.getTime()===e.getTime():!1;if(s=Ys(t),i=Ys(e),s||i)return t===e;if(s=Ne(t),i=Ne(e),s||i)return s&&i?jb(t,e):!1;if(s=dt(t),i=dt(e),s||i){if(!s||!i)return!1;const n=Object.keys(t).length,o=Object.keys(e).length;if(n!==o)return!1;for(const r in t){const l=t.hasOwnProperty(r),a=e.hasOwnProperty(r);if(l&&!a||!l&&a||!jn(t[r],e[r]))return!1}}return String(t)===String(e)}function mc(t,e){return t.findIndex(s=>jn(s,e))}const Rm=t=>!!(t&&t.__v_isRef===!0),z=t=>Ct(t)?t:t==null?"":Ne(t)||dt(t)&&(t.toString===Om||!qe(t.toString))?Rm(t)?z(t.value):JSON.stringify(t,Bm,2):String(t),Bm=(t,e)=>Rm(e)?Bm(t,e.value):io(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((s,[i,n],o)=>(s[uu(i,o)+" =>"]=n,s),{})}:Vo(e)?{[`Set(${e.size})`]:[...e.values()].map(s=>uu(s))}:Ys(e)?uu(e):dt(e)&&!Ne(e)&&!Pm(e)?String(e):e,uu=(t,e="")=>{var s;return Ys(t)?`Symbol(${(s=t.description)!=null?s:e})`:t};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let vs;class Rb{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=vs,!e&&vs&&(this.index=(vs.scopes||(vs.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].pause();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].resume();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].resume()}}run(e){if(this._active){const s=vs;try{return vs=this,e()}finally{vs=s}}}on(){++this._on===1&&(this.prevScope=vs,vs=this)}off(){this._on>0&&--this._on===0&&(vs=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let s,i;for(s=0,i=this.effects.length;s<i;s++)this.effects[s].stop();for(this.effects.length=0,s=0,i=this.cleanups.length;s<i;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,i=this.scopes.length;s<i;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function Bb(){return vs}let mt;const du=new WeakSet;class Im{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,vs&&vs.active&&vs.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,du.has(this)&&(du.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Nm(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,zf(this),zm(this);const e=mt,s=Gs;mt=this,Gs=!0;try{return this.fn()}finally{Fm(this),mt=e,Gs=s,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)yc(e);this.deps=this.depsTail=void 0,zf(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?du.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Qu(this)&&this.run()}get dirty(){return Qu(this)}}let Um=0,Zo,er;function Nm(t,e=!1){if(t.flags|=8,e){t.next=er,er=t;return}t.next=Zo,Zo=t}function gc(){Um++}function vc(){if(--Um>0)return;if(er){let e=er;for(er=void 0;e;){const s=e.next;e.next=void 0,e.flags&=-9,e=s}}let t;for(;Zo;){let e=Zo;for(Zo=void 0;e;){const s=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(i){t||(t=i)}e=s}}if(t)throw t}function zm(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Fm(t){let e,s=t.depsTail,i=s;for(;i;){const n=i.prevDep;i.version===-1?(i===s&&(s=n),yc(i),Ib(i)):e=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=n}t.deps=e,t.depsTail=s}function Qu(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Hm(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Hm(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===pr)||(t.globalVersion=pr,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Qu(t))))return;t.flags|=2;const e=t.dep,s=mt,i=Gs;mt=t,Gs=!0;try{zm(t);const n=t.fn(t._value);(e.version===0||tn(n,t._value))&&(t.flags|=128,t._value=n,e.version++)}catch(n){throw e.version++,n}finally{mt=s,Gs=i,Fm(t),t.flags&=-3}}function yc(t,e=!1){const{dep:s,prevSub:i,nextSub:n}=t;if(i&&(i.nextSub=n,t.prevSub=void 0),n&&(n.prevSub=i,t.nextSub=void 0),s.subs===t&&(s.subs=i,!i&&s.computed)){s.computed.flags&=-5;for(let o=s.computed.deps;o;o=o.nextDep)yc(o,!0)}!e&&!--s.sc&&s.map&&s.map.delete(s.key)}function Ib(t){const{prevDep:e,nextDep:s}=t;e&&(e.nextDep=s,t.prevDep=void 0),s&&(s.prevDep=e,t.nextDep=void 0)}let Gs=!0;const Wm=[];function Li(){Wm.push(Gs),Gs=!1}function ji(){const t=Wm.pop();Gs=t===void 0?!0:t}function zf(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const s=mt;mt=void 0;try{e()}finally{mt=s}}}let pr=0;class Ub{constructor(e,s){this.sub=e,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class bc{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!mt||!Gs||mt===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==mt)s=this.activeLink=new Ub(mt,this),mt.deps?(s.prevDep=mt.depsTail,mt.depsTail.nextDep=s,mt.depsTail=s):mt.deps=mt.depsTail=s,qm(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const i=s.nextDep;i.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=i),s.prevDep=mt.depsTail,s.nextDep=void 0,mt.depsTail.nextDep=s,mt.depsTail=s,mt.deps===s&&(mt.deps=i)}return s}trigger(e){this.version++,pr++,this.notify(e)}notify(e){gc();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{vc()}}}function qm(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let i=e.deps;i;i=i.nextDep)qm(i)}const s=t.dep.subs;s!==t&&(t.prevSub=s,s&&(s.nextSub=t)),t.dep.subs=t}}const Xu=new WeakMap,$n=Symbol(""),Zu=Symbol(""),mr=Symbol("");function Zt(t,e,s){if(Gs&&mt){let i=Xu.get(t);i||Xu.set(t,i=new Map);let n=i.get(s);n||(i.set(s,n=new bc),n.map=i,n.key=s),n.track()}}function $i(t,e,s,i,n,o){const r=Xu.get(t);if(!r){pr++;return}const l=a=>{a&&a.trigger()};if(gc(),e==="clear")r.forEach(l);else{const a=Ne(t),d=a&&pc(s);if(a&&s==="length"){const u=Number(i);r.forEach((f,h)=>{(h==="length"||h===mr||!Ys(h)&&h>=u)&&l(f)})}else switch((s!==void 0||r.has(void 0))&&l(r.get(s)),d&&l(r.get(mr)),e){case"add":a?d&&l(r.get("length")):(l(r.get($n)),io(t)&&l(r.get(Zu)));break;case"delete":a||(l(r.get($n)),io(t)&&l(r.get(Zu)));break;case"set":io(t)&&l(r.get($n));break}}vc()}function Kn(t){const e=it(t);return e===t?e:(Zt(e,"iterate",mr),Bs(t)?e:e.map(Wt))}function Pa(t){return Zt(t=it(t),"iterate",mr),t}const Nb={__proto__:null,[Symbol.iterator](){return cu(this,Symbol.iterator,Wt)},concat(...t){return Kn(this).concat(...t.map(e=>Ne(e)?Kn(e):e))},entries(){return cu(this,"entries",t=>(t[1]=Wt(t[1]),t))},every(t,e){return Si(this,"every",t,e,void 0,arguments)},filter(t,e){return Si(this,"filter",t,e,s=>s.map(Wt),arguments)},find(t,e){return Si(this,"find",t,e,Wt,arguments)},findIndex(t,e){return Si(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Si(this,"findLast",t,e,Wt,arguments)},findLastIndex(t,e){return Si(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Si(this,"forEach",t,e,void 0,arguments)},includes(...t){return fu(this,"includes",t)},indexOf(...t){return fu(this,"indexOf",t)},join(t){return Kn(this).join(t)},lastIndexOf(...t){return fu(this,"lastIndexOf",t)},map(t,e){return Si(this,"map",t,e,void 0,arguments)},pop(){return Ro(this,"pop")},push(...t){return Ro(this,"push",t)},reduce(t,...e){return Ff(this,"reduce",t,e)},reduceRight(t,...e){return Ff(this,"reduceRight",t,e)},shift(){return Ro(this,"shift")},some(t,e){return Si(this,"some",t,e,void 0,arguments)},splice(...t){return Ro(this,"splice",t)},toReversed(){return Kn(this).toReversed()},toSorted(t){return Kn(this).toSorted(t)},toSpliced(...t){return Kn(this).toSpliced(...t)},unshift(...t){return Ro(this,"unshift",t)},values(){return cu(this,"values",Wt)}};function cu(t,e,s){const i=Pa(t),n=i[e]();return i!==t&&!Bs(t)&&(n._next=n.next,n.next=()=>{const o=n._next();return o.done||(o.value=s(o.value)),o}),n}const zb=Array.prototype;function Si(t,e,s,i,n,o){const r=Pa(t),l=r!==t&&!Bs(t),a=r[e];if(a!==zb[e]){const f=a.apply(t,o);return l?Wt(f):f}let d=s;r!==t&&(l?d=function(f,h){return s.call(this,Wt(f),h,t)}:s.length>2&&(d=function(f,h){return s.call(this,f,h,t)}));const u=a.call(r,d,i);return l&&n?n(u):u}function Ff(t,e,s,i){const n=Pa(t);let o=s;return n!==t&&(Bs(t)?s.length>3&&(o=function(r,l,a){return s.call(this,r,l,a,t)}):o=function(r,l,a){return s.call(this,r,Wt(l),a,t)}),n[e](o,...i)}function fu(t,e,s){const i=it(t);Zt(i,"iterate",mr);const n=i[e](...s);return(n===-1||n===!1)&&wc(s[0])?(s[0]=it(s[0]),i[e](...s)):n}function Ro(t,e,s=[]){Li(),gc();const i=it(t)[e].apply(t,s);return vc(),ji(),i}const Fb=cc("__proto__,__v_isRef,__isVue"),Km=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Ys));function Hb(t){Ys(t)||(t=String(t));const e=it(this);return Zt(e,"has",t),e.hasOwnProperty(t)}class Gm{constructor(e=!1,s=!1){this._isReadonly=e,this._isShallow=s}get(e,s,i){if(s==="__v_skip")return e.__v_skip;const n=this._isReadonly,o=this._isShallow;if(s==="__v_isReactive")return!n;if(s==="__v_isReadonly")return n;if(s==="__v_isShallow")return o;if(s==="__v_raw")return i===(n?o?e1:Xm:o?Qm:Ym).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(i)?e:void 0;const r=Ne(e);if(!n){let a;if(r&&(a=Nb[s]))return a;if(s==="hasOwnProperty")return Hb}const l=Reflect.get(e,s,is(e)?e:i);if((Ys(s)?Km.has(s):Fb(s))||(n||Zt(e,"get",s),o))return l;if(is(l)){const a=r&&pc(s)?l:l.value;return n&&dt(a)?td(a):a}return dt(l)?n?td(l):qs(l):l}}class Jm extends Gm{constructor(e=!1){super(!1,e)}set(e,s,i,n){let o=e[s];if(!this._isShallow){const a=nn(o);if(!Bs(i)&&!nn(i)&&(o=it(o),i=it(i)),!Ne(e)&&is(o)&&!is(i))return a||(o.value=i),!0}const r=Ne(e)&&pc(s)?Number(s)<e.length:lt(e,s),l=Reflect.set(e,s,i,is(e)?e:n);return e===it(n)&&(r?tn(i,o)&&$i(e,"set",s,i):$i(e,"add",s,i)),l}deleteProperty(e,s){const i=lt(e,s);e[s];const n=Reflect.deleteProperty(e,s);return n&&i&&$i(e,"delete",s,void 0),n}has(e,s){const i=Reflect.has(e,s);return(!Ys(s)||!Km.has(s))&&Zt(e,"has",s),i}ownKeys(e){return Zt(e,"iterate",Ne(e)?"length":$n),Reflect.ownKeys(e)}}class Wb extends Gm{constructor(e=!1){super(!0,e)}set(e,s){return!0}deleteProperty(e,s){return!0}}const qb=new Jm,Kb=new Wb,Gb=new Jm(!0);const ed=t=>t,rl=t=>Reflect.getPrototypeOf(t);function Jb(t,e,s){return function(...i){const n=this.__v_raw,o=it(n),r=io(o),l=t==="entries"||t===Symbol.iterator&&r,a=t==="keys"&&r,d=n[t](...i),u=s?ed:e?Xl:Wt;return!e&&Zt(o,"iterate",a?Zu:$n),{next(){const{value:f,done:h}=d.next();return h?{value:f,done:h}:{value:l?[u(f[0]),u(f[1])]:u(f),done:h}},[Symbol.iterator](){return this}}}}function ll(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Yb(t,e){const s={get(n){const o=this.__v_raw,r=it(o),l=it(n);t||(tn(n,l)&&Zt(r,"get",n),Zt(r,"get",l));const{has:a}=rl(r),d=e?ed:t?Xl:Wt;if(a.call(r,n))return d(o.get(n));if(a.call(r,l))return d(o.get(l));o!==r&&o.get(n)},get size(){const n=this.__v_raw;return!t&&Zt(it(n),"iterate",$n),n.size},has(n){const o=this.__v_raw,r=it(o),l=it(n);return t||(tn(n,l)&&Zt(r,"has",n),Zt(r,"has",l)),n===l?o.has(n):o.has(n)||o.has(l)},forEach(n,o){const r=this,l=r.__v_raw,a=it(l),d=e?ed:t?Xl:Wt;return!t&&Zt(a,"iterate",$n),l.forEach((u,f)=>n.call(o,d(u),d(f),r))}};return zt(s,t?{add:ll("add"),set:ll("set"),delete:ll("delete"),clear:ll("clear")}:{add(n){!e&&!Bs(n)&&!nn(n)&&(n=it(n));const o=it(this);return rl(o).has.call(o,n)||(o.add(n),$i(o,"add",n,n)),this},set(n,o){!e&&!Bs(o)&&!nn(o)&&(o=it(o));const r=it(this),{has:l,get:a}=rl(r);let d=l.call(r,n);d||(n=it(n),d=l.call(r,n));const u=a.call(r,n);return r.set(n,o),d?tn(o,u)&&$i(r,"set",n,o):$i(r,"add",n,o),this},delete(n){const o=it(this),{has:r,get:l}=rl(o);let a=r.call(o,n);a||(n=it(n),a=r.call(o,n)),l&&l.call(o,n);const d=o.delete(n);return a&&$i(o,"delete",n,void 0),d},clear(){const n=it(this),o=n.size!==0,r=n.clear();return o&&$i(n,"clear",void 0,void 0),r}}),["keys","values","entries",Symbol.iterator].forEach(n=>{s[n]=Jb(n,t,e)}),s}function kc(t,e){const s=Yb(t,e);return(i,n,o)=>n==="__v_isReactive"?!t:n==="__v_isReadonly"?t:n==="__v_raw"?i:Reflect.get(lt(s,n)&&n in i?s:i,n,o)}const Qb={get:kc(!1,!1)},Xb={get:kc(!1,!0)},Zb={get:kc(!0,!1)};const Ym=new WeakMap,Qm=new WeakMap,Xm=new WeakMap,e1=new WeakMap;function t1(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function s1(t){return t.__v_skip||!Object.isExtensible(t)?0:t1(Ab(t))}function qs(t){return nn(t)?t:xc(t,!1,qb,Qb,Ym)}function Zm(t){return xc(t,!1,Gb,Xb,Qm)}function td(t){return xc(t,!0,Kb,Zb,Xm)}function xc(t,e,s,i,n){if(!dt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const o=s1(t);if(o===0)return t;const r=n.get(t);if(r)return r;const l=new Proxy(t,o===2?i:s);return n.set(t,l),l}function no(t){return nn(t)?no(t.__v_raw):!!(t&&t.__v_isReactive)}function nn(t){return!!(t&&t.__v_isReadonly)}function Bs(t){return!!(t&&t.__v_isShallow)}function wc(t){return t?!!t.__v_raw:!1}function it(t){const e=t&&t.__v_raw;return e?it(e):t}function i1(t){return!lt(t,"__v_skip")&&Object.isExtensible(t)&&Lm(t,"__v_skip",!0),t}const Wt=t=>dt(t)?qs(t):t,Xl=t=>dt(t)?td(t):t;function is(t){return t?t.__v_isRef===!0:!1}function ae(t){return eg(t,!1)}function n1(t){return eg(t,!0)}function eg(t,e){return is(t)?t:new o1(t,e)}class o1{constructor(e,s){this.dep=new bc,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?e:it(e),this._value=s?e:Wt(e),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(e){const s=this._rawValue,i=this.__v_isShallow||Bs(e)||nn(e);e=i?e:it(e),tn(e,s)&&(this._rawValue=e,this._value=i?e:Wt(e),this.dep.trigger())}}function at(t){return is(t)?t.value:t}const r1={get:(t,e,s)=>e==="__v_raw"?t:at(Reflect.get(t,e,s)),set:(t,e,s,i)=>{const n=t[e];return is(n)&&!is(s)?(n.value=s,!0):Reflect.set(t,e,s,i)}};function tg(t){return no(t)?t:new Proxy(t,r1)}class l1{constructor(e,s,i){this.fn=e,this.setter=s,this._value=void 0,this.dep=new bc(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=pr-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&mt!==this)return Nm(this,!0),!0}get value(){const e=this.dep.track();return Hm(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function a1(t,e,s=!1){let i,n;return qe(t)?i=t:(i=t.get,n=t.set),new l1(i,n,s)}const al={},Zl=new WeakMap;let xn;function u1(t,e=!1,s=xn){if(s){let i=Zl.get(s);i||Zl.set(s,i=[]),i.push(t)}}function d1(t,e,s=pt){const{immediate:i,deep:n,once:o,scheduler:r,augmentJob:l,call:a}=s,d=H=>n?H:Bs(H)||n===!1||n===0?Ti(H,1):Ti(H);let u,f,h,m,w=!1,p=!1;if(is(t)?(f=()=>t.value,w=Bs(t)):no(t)?(f=()=>d(t),w=!0):Ne(t)?(p=!0,w=t.some(H=>no(H)||Bs(H)),f=()=>t.map(H=>{if(is(H))return H.value;if(no(H))return d(H);if(qe(H))return a?a(H,2):H()})):qe(t)?e?f=a?()=>a(t,2):t:f=()=>{if(h){Li();try{h()}finally{ji()}}const H=xn;xn=u;try{return a?a(t,3,[m]):t(m)}finally{xn=H}}:f=bi,e&&n){const H=f,j=n===!0?1/0:n;f=()=>Ti(H(),j)}const C=Bb(),V=()=>{u.stop(),C&&C.active&&hc(C.effects,u)};if(o&&e){const H=e;e=(...j)=>{H(...j),V()}}let U=p?new Array(t.length).fill(al):al;const B=H=>{if(!(!(u.flags&1)||!u.dirty&&!H))if(e){const j=u.run();if(n||w||(p?j.some((T,A)=>tn(T,U[A])):tn(j,U))){h&&h();const T=xn;xn=u;try{const A=[j,U===al?void 0:p&&U[0]===al?[]:U,m];U=j,a?a(e,3,A):e(...A)}finally{xn=T}}}else u.run()};return l&&l(B),u=new Im(f),u.scheduler=r?()=>r(B,!1):B,m=H=>u1(H,!1,u),h=u.onStop=()=>{const H=Zl.get(u);if(H){if(a)a(H,4);else for(const j of H)j();Zl.delete(u)}},e?i?B(!0):U=u.run():r?r(B.bind(null,!0),!0):u.run(),V.pause=u.pause.bind(u),V.resume=u.resume.bind(u),V.stop=V,V}function Ti(t,e=1/0,s){if(e<=0||!dt(t)||t.__v_skip||(s=s||new Map,(s.get(t)||0)>=e))return t;if(s.set(t,e),e--,is(t))Ti(t.value,e,s);else if(Ne(t))for(let i=0;i<t.length;i++)Ti(t[i],e,s);else if(Vo(t)||io(t))t.forEach(i=>{Ti(i,e,s)});else if(Pm(t)){for(const i in t)Ti(t[i],e,s);for(const i of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,i)&&Ti(t[i],e,s)}return t}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function zr(t,e,s,i){try{return i?t(...i):t()}catch(n){La(n,e,s)}}function Qs(t,e,s,i){if(qe(t)){const n=zr(t,e,s,i);return n&&Em(n)&&n.catch(o=>{La(o,e,s)}),n}if(Ne(t)){const n=[];for(let o=0;o<t.length;o++)n.push(Qs(t[o],e,s,i));return n}}function La(t,e,s,i=!0){const n=e?e.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:r}=e&&e.appContext.config||pt;if(e){let l=e.parent;const a=e.proxy,d=`https://vuejs.org/error-reference/#runtime-${s}`;for(;l;){const u=l.ec;if(u){for(let f=0;f<u.length;f++)if(u[f](t,a,d)===!1)return}l=l.parent}if(o){Li(),zr(o,null,10,[t,a,d]),ji();return}}c1(t,s,n,i,r)}function c1(t,e,s,i=!0,n=!1){if(n)throw t;console.error(t)}const cs=[];let ci=-1;const oo=[];let Hi=null,Gn=0;const sg=Promise.resolve();let ea=null;function Tn(t){const e=ea||sg;return t?e.then(this?t.bind(this):t):e}function f1(t){let e=ci+1,s=cs.length;for(;e<s;){const i=e+s>>>1,n=cs[i],o=gr(n);o<t||o===t&&n.flags&2?e=i+1:s=i}return e}function _c(t){if(!(t.flags&1)){const e=gr(t),s=cs[cs.length-1];!s||!(t.flags&2)&&e>=gr(s)?cs.push(t):cs.splice(f1(e),0,t),t.flags|=1,ig()}}function ig(){ea||(ea=sg.then(og))}function h1(t){Ne(t)?oo.push(...t):Hi&&t.id===-1?Hi.splice(Gn+1,0,t):t.flags&1||(oo.push(t),t.flags|=1),ig()}function Hf(t,e,s=ci+1){for(;s<cs.length;s++){const i=cs[s];if(i&&i.flags&2){if(t&&i.id!==t.uid)continue;cs.splice(s,1),s--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function ng(t){if(oo.length){const e=[...new Set(oo)].sort((s,i)=>gr(s)-gr(i));if(oo.length=0,Hi){Hi.push(...e);return}for(Hi=e,Gn=0;Gn<Hi.length;Gn++){const s=Hi[Gn];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}Hi=null,Gn=0}}const gr=t=>t.id==null?t.flags&2?-1:1/0:t.id;function og(t){try{for(ci=0;ci<cs.length;ci++){const e=cs[ci];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),zr(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;ci<cs.length;ci++){const e=cs[ci];e&&(e.flags&=-2)}ci=-1,cs.length=0,ng(),ea=null,(cs.length||oo.length)&&og()}}let Gt=null,rg=null;function ta(t){const e=Gt;return Gt=t,rg=t&&t.type.__scopeId||null,e}function R(t,e=Gt,s){if(!e||t._n)return t;const i=(...n)=>{i._d&&oa(-1);const o=ta(e);let r;try{r=t(...n)}finally{ta(o),i._d&&oa(1)}return r};return i._n=!0,i._c=!0,i._d=!0,i}function Je(t,e){if(Gt===null)return t;const s=Na(Gt),i=t.dirs||(t.dirs=[]);for(let n=0;n<e.length;n++){let[o,r,l,a=pt]=e[n];o&&(qe(o)&&(o={mounted:o,updated:o}),o.deep&&Ti(r),i.push({dir:o,instance:s,value:r,oldValue:void 0,arg:l,modifiers:a}))}return t}function gn(t,e,s,i){const n=t.dirs,o=e&&e.dirs;for(let r=0;r<n.length;r++){const l=n[r];o&&(l.oldValue=o[r].value);let a=l.dir[i];a&&(Li(),Qs(a,s,8,[t.el,l,t,e]),ji())}}const lg=Symbol("_vte"),ag=t=>t.__isTeleport,tr=t=>t&&(t.disabled||t.disabled===""),Wf=t=>t&&(t.defer||t.defer===""),qf=t=>typeof SVGElement<"u"&&t instanceof SVGElement,Kf=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,sd=(t,e)=>{const s=t&&t.to;return Ct(s)?e?e(s):null:s},ug={name:"Teleport",__isTeleport:!0,process(t,e,s,i,n,o,r,l,a,d){const{mc:u,pc:f,pbc:h,o:{insert:m,querySelector:w,createText:p,createComment:C}}=d,V=tr(e.props);let{shapeFlag:U,children:B,dynamicChildren:H}=e;if(t==null){const j=e.el=p(""),T=e.anchor=p("");m(j,s,i),m(T,s,i);const A=(te,me)=>{U&16&&u(B,te,me,n,o,r,l,a)},Y=()=>{const te=e.target=sd(e.props,w),me=cg(te,e,p,m);te&&(r!=="svg"&&qf(te)?r="svg":r!=="mathml"&&Kf(te)&&(r="mathml"),n&&n.isCE&&(n.ce._teleportTargets||(n.ce._teleportTargets=new Set)).add(te),V||(A(te,me),Rl(e,!1)))};V&&(A(s,T),Rl(e,!0)),Wf(e.props)?(e.el.__isMounted=!1,as(()=>{Y(),delete e.el.__isMounted},o)):Y()}else{if(Wf(e.props)&&t.el.__isMounted===!1){as(()=>{ug.process(t,e,s,i,n,o,r,l,a,d)},o);return}e.el=t.el,e.targetStart=t.targetStart;const j=e.anchor=t.anchor,T=e.target=t.target,A=e.targetAnchor=t.targetAnchor,Y=tr(t.props),te=Y?s:T,me=Y?j:A;if(r==="svg"||qf(T)?r="svg":(r==="mathml"||Kf(T))&&(r="mathml"),H?(h(t.dynamicChildren,H,te,n,o,r,l),Ac(t,e,!0)):a||f(t,e,te,me,n,o,r,l,!1),V)Y?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):ul(e,s,j,d,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const le=e.target=sd(e.props,w);le&&ul(e,le,null,d,0)}else Y&&ul(e,T,A,d,1);Rl(e,V)}},remove(t,e,s,{um:i,o:{remove:n}},o){const{shapeFlag:r,children:l,anchor:a,targetStart:d,targetAnchor:u,target:f,props:h}=t;if(f&&(n(d),n(u)),o&&n(a),r&16){const m=o||!tr(h);for(let w=0;w<l.length;w++){const p=l[w];i(p,e,s,m,!!p.dynamicChildren)}}},move:ul,hydrate:p1};function ul(t,e,s,{o:{insert:i},m:n},o=2){o===0&&i(t.targetAnchor,e,s);const{el:r,anchor:l,shapeFlag:a,children:d,props:u}=t,f=o===2;if(f&&i(r,e,s),(!f||tr(u))&&a&16)for(let h=0;h<d.length;h++)n(d[h],e,s,2);f&&i(l,e,s)}function p1(t,e,s,i,n,o,{o:{nextSibling:r,parentNode:l,querySelector:a,insert:d,createText:u}},f){function h(p,C,V,U){C.anchor=f(r(p),C,l(p),s,i,n,o),C.targetStart=V,C.targetAnchor=U}const m=e.target=sd(e.props,a),w=tr(e.props);if(m){const p=m._lpa||m.firstChild;if(e.shapeFlag&16)if(w)h(t,e,p,p&&r(p));else{e.anchor=r(t);let C=p;for(;C;){if(C&&C.nodeType===8){if(C.data==="teleport start anchor")e.targetStart=C;else if(C.data==="teleport anchor"){e.targetAnchor=C,m._lpa=e.targetAnchor&&r(e.targetAnchor);break}}C=r(C)}e.targetAnchor||cg(m,e,u,d),f(p&&r(p),e,m,s,i,n,o)}Rl(e,w)}else w&&e.shapeFlag&16&&h(t,e,t,r(t));return e.anchor&&r(e.anchor)}const dg=ug;function Rl(t,e){const s=t.ctx;if(s&&s.ut){let i,n;for(e?(i=t.el,n=t.anchor):(i=t.targetStart,n=t.targetAnchor);i&&i!==n;)i.nodeType===1&&i.setAttribute("data-v-owner",s.uid),i=i.nextSibling;s.ut()}}function cg(t,e,s,i){const n=e.targetStart=s(""),o=e.targetAnchor=s("");return n[lg]=o,t&&(i(n,t),i(o,t)),o}const Di=Symbol("_leaveCb"),dl=Symbol("_enterCb");function m1(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ns(()=>{t.isMounted=!0}),kg(()=>{t.isUnmounting=!0}),t}const Os=[Function,Array],fg={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Os,onEnter:Os,onAfterEnter:Os,onEnterCancelled:Os,onBeforeLeave:Os,onLeave:Os,onAfterLeave:Os,onLeaveCancelled:Os,onBeforeAppear:Os,onAppear:Os,onAfterAppear:Os,onAppearCancelled:Os},hg=t=>{const e=t.subTree;return e.component?hg(e.component):e},g1={name:"BaseTransition",props:fg,setup(t,{slots:e}){const s=Mc(),i=m1();return()=>{const n=e.default&&gg(e.default(),!0);if(!n||!n.length)return;const o=pg(n),r=it(t),{mode:l}=r;if(i.isLeaving)return hu(o);const a=Gf(o);if(!a)return hu(o);let d=id(a,r,i,s,f=>d=f);a.type!==es&&vr(a,d);let u=s.subTree&&Gf(s.subTree);if(u&&u.type!==es&&!Sn(u,a)&&hg(s).type!==es){let f=id(u,r,i,s);if(vr(u,f),l==="out-in"&&a.type!==es)return i.isLeaving=!0,f.afterLeave=()=>{i.isLeaving=!1,s.job.flags&8||s.update(),delete f.afterLeave,u=void 0},hu(o);l==="in-out"&&a.type!==es?f.delayLeave=(h,m,w)=>{const p=mg(i,u);p[String(u.key)]=u,h[Di]=()=>{m(),h[Di]=void 0,delete d.delayedLeave,u=void 0},d.delayedLeave=()=>{w(),delete d.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return o}}};function pg(t){let e=t[0];if(t.length>1){for(const s of t)if(s.type!==es){e=s;break}}return e}const v1=g1;function mg(t,e){const{leavingVNodes:s}=t;let i=s.get(e.type);return i||(i=Object.create(null),s.set(e.type,i)),i}function id(t,e,s,i,n){const{appear:o,mode:r,persisted:l=!1,onBeforeEnter:a,onEnter:d,onAfterEnter:u,onEnterCancelled:f,onBeforeLeave:h,onLeave:m,onAfterLeave:w,onLeaveCancelled:p,onBeforeAppear:C,onAppear:V,onAfterAppear:U,onAppearCancelled:B}=e,H=String(t.key),j=mg(s,t),T=(te,me)=>{te&&Qs(te,i,9,me)},A=(te,me)=>{const le=me[1];T(te,me),Ne(te)?te.every(F=>F.length<=1)&&le():te.length<=1&&le()},Y={mode:r,persisted:l,beforeEnter(te){let me=a;if(!s.isMounted)if(o)me=C||a;else return;te[Di]&&te[Di](!0);const le=j[H];le&&Sn(t,le)&&le.el[Di]&&le.el[Di](),T(me,[te])},enter(te){let me=d,le=u,F=f;if(!s.isMounted)if(o)me=V||d,le=U||u,F=B||f;else return;let ge=!1;const ce=te[dl]=de=>{ge||(ge=!0,de?T(F,[te]):T(le,[te]),Y.delayedLeave&&Y.delayedLeave(),te[dl]=void 0)};me?A(me,[te,ce]):ce()},leave(te,me){const le=String(t.key);if(te[dl]&&te[dl](!0),s.isUnmounting)return me();T(h,[te]);let F=!1;const ge=te[Di]=ce=>{F||(F=!0,me(),ce?T(p,[te]):T(w,[te]),te[Di]=void 0,j[le]===t&&delete j[le])};j[le]=t,m?A(m,[te,ge]):ge()},clone(te){const me=id(te,e,s,i,n);return n&&n(me),me}};return Y}function hu(t){if(ja(t))return t=on(t),t.children=null,t}function Gf(t){if(!ja(t))return ag(t.type)&&t.children?pg(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:s}=t;if(s){if(e&16)return s[0];if(e&32&&qe(s.default))return s.default()}}function vr(t,e){t.shapeFlag&6&&t.component?(t.transition=e,vr(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function gg(t,e=!1,s){let i=[],n=0;for(let o=0;o<t.length;o++){let r=t[o];const l=s==null?r.key:String(s)+String(r.key!=null?r.key:o);r.type===ee?(r.patchFlag&128&&n++,i=i.concat(gg(r.children,e,l))):(e||r.type!==es)&&i.push(l!=null?on(r,{key:l}):r)}if(n>1)for(let o=0;o<i.length;o++)i[o].patchFlag=-2;return i}function vg(t,e){return qe(t)?zt({name:t.name},e,{setup:t}):t}function yg(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const sa=new WeakMap;function sr(t,e,s,i,n=!1){if(Ne(t)){t.forEach((w,p)=>sr(w,e&&(Ne(e)?e[p]:e),s,i,n));return}if(ro(i)&&!n){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&sr(t,e,s,i.component.subTree);return}const o=i.shapeFlag&4?Na(i.component):i.el,r=n?null:o,{i:l,r:a}=t,d=e&&e.r,u=l.refs===pt?l.refs={}:l.refs,f=l.setupState,h=it(f),m=f===pt?Tm:w=>lt(h,w);if(d!=null&&d!==a){if(Jf(e),Ct(d))u[d]=null,m(d)&&(f[d]=null);else if(is(d)){d.value=null;const w=e;w.k&&(u[w.k]=null)}}if(qe(a))zr(a,l,12,[r,u]);else{const w=Ct(a),p=is(a);if(w||p){const C=()=>{if(t.f){const V=w?m(a)?f[a]:u[a]:a.value;if(n)Ne(V)&&hc(V,o);else if(Ne(V))V.includes(o)||V.push(o);else if(w)u[a]=[o],m(a)&&(f[a]=u[a]);else{const U=[o];a.value=U,t.k&&(u[t.k]=U)}}else w?(u[a]=r,m(a)&&(f[a]=r)):p&&(a.value=r,t.k&&(u[t.k]=r))};if(r){const V=()=>{C(),sa.delete(t)};V.id=-1,sa.set(t,V),as(V,s)}else Jf(t),C()}}}function Jf(t){const e=sa.get(t);e&&(e.flags|=8,sa.delete(t))}Oa().requestIdleCallback;Oa().cancelIdleCallback;const ro=t=>!!t.type.__asyncLoader,ja=t=>t.type.__isKeepAlive;function y1(t,e){bg(t,"a",e)}function b1(t,e){bg(t,"da",e)}function bg(t,e,s=ts){const i=t.__wdc||(t.__wdc=()=>{let n=s;for(;n;){if(n.isDeactivated)return;n=n.parent}return t()});if(Ra(e,i,s),s){let n=s.parent;for(;n&&n.parent;)ja(n.parent.vnode)&&k1(i,e,s,n),n=n.parent}}function k1(t,e,s,i){const n=Ra(e,t,i,!0);Mo(()=>{hc(i[e],n)},s)}function Ra(t,e,s=ts,i=!1){if(s){const n=s[t]||(s[t]=[]),o=e.__weh||(e.__weh=(...r)=>{Li();const l=Fr(s),a=Qs(e,s,t,r);return l(),ji(),a});return i?n.unshift(o):n.push(o),o}}const Ui=t=>(e,s=ts)=>{(!kr||t==="sp")&&Ra(t,(...i)=>e(...i),s)},x1=Ui("bm"),ns=Ui("m"),w1=Ui("bu"),_1=Ui("u"),kg=Ui("bum"),Mo=Ui("um"),S1=Ui("sp"),C1=Ui("rtg"),A1=Ui("rtc");function V1(t,e=ts){Ra("ec",t,e)}const xg="components";function ia(t,e){return _g(xg,t,!0,e)||t}const wg=Symbol.for("v-ndc");function Ts(t){return Ct(t)?_g(xg,t,!1)||t:t||wg}function _g(t,e,s=!0,i=!1){const n=Gt||ts;if(n){const o=n.type;{const l=gk(o,!1);if(l&&(l===e||l===zs(e)||l===Ea(zs(e))))return o}const r=Yf(n[t]||o[t],e)||Yf(n.appContext[t],e);return!r&&i?o:r}}function Yf(t,e){return t&&(t[e]||t[zs(e)]||t[Ea(zs(e))])}function ke(t,e,s,i){let n;const o=s,r=Ne(t);if(r||Ct(t)){const l=r&&no(t);let a=!1,d=!1;l&&(a=!Bs(t),d=nn(t),t=Pa(t)),n=new Array(t.length);for(let u=0,f=t.length;u<f;u++)n[u]=e(a?d?Xl(Wt(t[u])):Wt(t[u]):t[u],u,void 0,o)}else if(typeof t=="number"){n=new Array(t);for(let l=0;l<t;l++)n[l]=e(l+1,l,void 0,o)}else if(dt(t))if(t[Symbol.iterator])n=Array.from(t,(l,a)=>e(l,a,void 0,o));else{const l=Object.keys(t);n=new Array(l.length);for(let a=0,d=l.length;a<d;a++){const u=l[a];n[a]=e(t[u],u,a,o)}}else n=[];return n}function M1(t,e){for(let s=0;s<e.length;s++){const i=e[s];if(Ne(i))for(let n=0;n<i.length;n++)t[i[n].name]=i[n].fn;else i&&(t[i.name]=i.key?(...n)=>{const o=i.fn(...n);return o&&(o.key=i.key),o}:i.fn)}return t}function vt(t,e,s={},i,n){if(Gt.ce||Gt.parent&&ro(Gt.parent)&&Gt.parent.ce){const d=Object.keys(s).length>0;return e!=="default"&&(s.name=e),g(),pe(ee,null,[k("slot",s,i&&i())],d?-2:64)}let o=t[e];o&&o._c&&(o._d=!1),g();const r=o&&Sg(o(s)),l=s.key||r&&r.key,a=pe(ee,{key:(l&&!Ys(l)?l:`_${e}`)+(!r&&i?"_fb":"")},r||(i?i():[]),r&&t._===1?64:-2);return!n&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),o&&o._c&&(o._d=!0),a}function Sg(t){return t.some(e=>br(e)?!(e.type===es||e.type===ee&&!Sg(e.children)):!0)?t:null}const nd=t=>t?Fg(t)?Na(t):nd(t.parent):null,ir=zt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>nd(t.parent),$root:t=>nd(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Ag(t),$forceUpdate:t=>t.f||(t.f=()=>{_c(t.update)}),$nextTick:t=>t.n||(t.n=Tn.bind(t.proxy)),$watch:t=>Q1.bind(t)}),pu=(t,e)=>t!==pt&&!t.__isScriptSetup&&lt(t,e),D1={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:s,setupState:i,data:n,props:o,accessCache:r,type:l,appContext:a}=t;let d;if(e[0]!=="$"){const m=r[e];if(m!==void 0)switch(m){case 1:return i[e];case 2:return n[e];case 4:return s[e];case 3:return o[e]}else{if(pu(i,e))return r[e]=1,i[e];if(n!==pt&&lt(n,e))return r[e]=2,n[e];if((d=t.propsOptions[0])&&lt(d,e))return r[e]=3,o[e];if(s!==pt&&lt(s,e))return r[e]=4,s[e];od&&(r[e]=0)}}const u=ir[e];let f,h;if(u)return e==="$attrs"&&Zt(t.attrs,"get",""),u(t);if((f=l.__cssModules)&&(f=f[e]))return f;if(s!==pt&&lt(s,e))return r[e]=4,s[e];if(h=a.config.globalProperties,lt(h,e))return h[e]},set({_:t},e,s){const{data:i,setupState:n,ctx:o}=t;return pu(n,e)?(n[e]=s,!0):i!==pt&&lt(i,e)?(i[e]=s,!0):lt(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(o[e]=s,!0)},has({_:{data:t,setupState:e,accessCache:s,ctx:i,appContext:n,propsOptions:o,type:r}},l){let a,d;return!!(s[l]||t!==pt&&l[0]!=="$"&&lt(t,l)||pu(e,l)||(a=o[0])&&lt(a,l)||lt(i,l)||lt(ir,l)||lt(n.config.globalProperties,l)||(d=r.__cssModules)&&d[l])},defineProperty(t,e,s){return s.get!=null?t._.accessCache[e]=0:lt(s,"value")&&this.set(t,e,s.value,null),Reflect.defineProperty(t,e,s)}};function $1(){return T1().slots}function T1(t){const e=Mc();return e.setupContext||(e.setupContext=Wg(e))}function Qf(t){return Ne(t)?t.reduce((e,s)=>(e[s]=null,e),{}):t}let od=!0;function E1(t){const e=Ag(t),s=t.proxy,i=t.ctx;od=!1,e.beforeCreate&&Xf(e.beforeCreate,t,"bc");const{data:n,computed:o,methods:r,watch:l,provide:a,inject:d,created:u,beforeMount:f,mounted:h,beforeUpdate:m,updated:w,activated:p,deactivated:C,beforeDestroy:V,beforeUnmount:U,destroyed:B,unmounted:H,render:j,renderTracked:T,renderTriggered:A,errorCaptured:Y,serverPrefetch:te,expose:me,inheritAttrs:le,components:F,directives:ge,filters:ce}=e;if(d&&O1(d,i,null),r)for(const Z in r){const se=r[Z];qe(se)&&(i[Z]=se.bind(s))}if(n){const Z=n.call(s,s);dt(Z)&&(t.data=qs(Z))}if(od=!0,o)for(const Z in o){const se=o[Z],Pe=qe(se)?se.bind(s,s):qe(se.get)?se.get.bind(s,s):bi,P=!qe(se)&&qe(se.set)?se.set.bind(s):bi,$e=ne({get:Pe,set:P});Object.defineProperty(i,Z,{enumerable:!0,configurable:!0,get:()=>$e.value,set:Ie=>$e.value=Ie})}if(l)for(const Z in l)Cg(l[Z],i,s,Z);if(a){const Z=qe(a)?a.call(s):a;Reflect.ownKeys(Z).forEach(se=>{Bl(se,Z[se])})}u&&Xf(u,t,"c");function X(Z,se){Ne(se)?se.forEach(Pe=>Z(Pe.bind(s))):se&&Z(se.bind(s))}if(X(x1,f),X(ns,h),X(w1,m),X(_1,w),X(y1,p),X(b1,C),X(V1,Y),X(A1,T),X(C1,A),X(kg,U),X(Mo,H),X(S1,te),Ne(me))if(me.length){const Z=t.exposed||(t.exposed={});me.forEach(se=>{Object.defineProperty(Z,se,{get:()=>s[se],set:Pe=>s[se]=Pe,enumerable:!0})})}else t.exposed||(t.exposed={});j&&t.render===bi&&(t.render=j),le!=null&&(t.inheritAttrs=le),F&&(t.components=F),ge&&(t.directives=ge),te&&yg(t)}function O1(t,e,s=bi){Ne(t)&&(t=rd(t));for(const i in t){const n=t[i];let o;dt(n)?"default"in n?o=Js(n.from||i,n.default,!0):o=Js(n.from||i):o=Js(n),is(o)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>o.value,set:r=>o.value=r}):e[i]=o}}function Xf(t,e,s){Qs(Ne(t)?t.map(i=>i.bind(e.proxy)):t.bind(e.proxy),e,s)}function Cg(t,e,s,i){let n=i.includes(".")?Bg(s,i):()=>s[i];if(Ct(t)){const o=e[t];qe(o)&&We(n,o)}else if(qe(t))We(n,t.bind(s));else if(dt(t))if(Ne(t))t.forEach(o=>Cg(o,e,s,i));else{const o=qe(t.handler)?t.handler.bind(s):e[t.handler];qe(o)&&We(n,o,t)}}function Ag(t){const e=t.type,{mixins:s,extends:i}=e,{mixins:n,optionsCache:o,config:{optionMergeStrategies:r}}=t.appContext,l=o.get(e);let a;return l?a=l:!n.length&&!s&&!i?a=e:(a={},n.length&&n.forEach(d=>na(a,d,r,!0)),na(a,e,r)),dt(e)&&o.set(e,a),a}function na(t,e,s,i=!1){const{mixins:n,extends:o}=e;o&&na(t,o,s,!0),n&&n.forEach(r=>na(t,r,s,!0));for(const r in e)if(!(i&&r==="expose")){const l=P1[r]||s&&s[r];t[r]=l?l(t[r],e[r]):e[r]}return t}const P1={data:Zf,props:eh,emits:eh,methods:Ko,computed:Ko,beforeCreate:ls,created:ls,beforeMount:ls,mounted:ls,beforeUpdate:ls,updated:ls,beforeDestroy:ls,beforeUnmount:ls,destroyed:ls,unmounted:ls,activated:ls,deactivated:ls,errorCaptured:ls,serverPrefetch:ls,components:Ko,directives:Ko,watch:j1,provide:Zf,inject:L1};function Zf(t,e){return e?t?function(){return zt(qe(t)?t.call(this,this):t,qe(e)?e.call(this,this):e)}:e:t}function L1(t,e){return Ko(rd(t),rd(e))}function rd(t){if(Ne(t)){const e={};for(let s=0;s<t.length;s++)e[t[s]]=t[s];return e}return t}function ls(t,e){return t?[...new Set([].concat(t,e))]:e}function Ko(t,e){return t?zt(Object.create(null),t,e):e}function eh(t,e){return t?Ne(t)&&Ne(e)?[...new Set([...t,...e])]:zt(Object.create(null),Qf(t),Qf(e??{})):e}function j1(t,e){if(!t)return e;if(!e)return t;const s=zt(Object.create(null),t);for(const i in e)s[i]=ls(t[i],e[i]);return s}function Vg(){return{app:null,config:{isNativeTag:Tm,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let R1=0;function B1(t,e){return function(i,n=null){qe(i)||(i=zt({},i)),n!=null&&!dt(n)&&(n=null);const o=Vg(),r=new WeakSet,l=[];let a=!1;const d=o.app={_uid:R1++,_component:i,_props:n,_container:null,_context:o,_instance:null,version:yk,get config(){return o.config},set config(u){},use(u,...f){return r.has(u)||(u&&qe(u.install)?(r.add(u),u.install(d,...f)):qe(u)&&(r.add(u),u(d,...f))),d},mixin(u){return o.mixins.includes(u)||o.mixins.push(u),d},component(u,f){return f?(o.components[u]=f,d):o.components[u]},directive(u,f){return f?(o.directives[u]=f,d):o.directives[u]},mount(u,f,h){if(!a){const m=d._ceVNode||k(i,n);return m.appContext=o,h===!0?h="svg":h===!1&&(h=void 0),t(m,u,h),a=!0,d._container=u,u.__vue_app__=d,Na(m.component)}},onUnmount(u){l.push(u)},unmount(){a&&(Qs(l,d._instance,16),t(null,d._container),delete d._container.__vue_app__)},provide(u,f){return o.provides[u]=f,d},runWithContext(u){const f=lo;lo=d;try{return u()}finally{lo=f}}};return d}}let lo=null;function Bl(t,e){if(ts){let s=ts.provides;const i=ts.parent&&ts.parent.provides;i===s&&(s=ts.provides=Object.create(i)),s[t]=e}}function Js(t,e,s=!1){const i=Mc();if(i||lo){let n=lo?lo._context.provides:i?i.parent==null||i.ce?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(n&&t in n)return n[t];if(arguments.length>1)return s&&qe(e)?e.call(i&&i.proxy):e}}const Mg={},Dg=()=>Object.create(Mg),$g=t=>Object.getPrototypeOf(t)===Mg;function I1(t,e,s,i=!1){const n={},o=Dg();t.propsDefaults=Object.create(null),Tg(t,e,n,o);for(const r in t.propsOptions[0])r in n||(n[r]=void 0);s?t.props=i?n:Zm(n):t.type.props?t.props=n:t.props=o,t.attrs=o}function U1(t,e,s,i){const{props:n,attrs:o,vnode:{patchFlag:r}}=t,l=it(n),[a]=t.propsOptions;let d=!1;if((i||r>0)&&!(r&16)){if(r&8){const u=t.vnode.dynamicProps;for(let f=0;f<u.length;f++){let h=u[f];if(Ba(t.emitsOptions,h))continue;const m=e[h];if(a)if(lt(o,h))m!==o[h]&&(o[h]=m,d=!0);else{const w=zs(h);n[w]=ld(a,l,w,m,t,!1)}else m!==o[h]&&(o[h]=m,d=!0)}}}else{Tg(t,e,n,o)&&(d=!0);let u;for(const f in l)(!e||!lt(e,f)&&((u=Fn(f))===f||!lt(e,u)))&&(a?s&&(s[f]!==void 0||s[u]!==void 0)&&(n[f]=ld(a,l,f,void 0,t,!0)):delete n[f]);if(o!==l)for(const f in o)(!e||!lt(e,f))&&(delete o[f],d=!0)}d&&$i(t.attrs,"set","")}function Tg(t,e,s,i){const[n,o]=t.propsOptions;let r=!1,l;if(e)for(let a in e){if(Xo(a))continue;const d=e[a];let u;n&&lt(n,u=zs(a))?!o||!o.includes(u)?s[u]=d:(l||(l={}))[u]=d:Ba(t.emitsOptions,a)||(!(a in i)||d!==i[a])&&(i[a]=d,r=!0)}if(o){const a=it(s),d=l||pt;for(let u=0;u<o.length;u++){const f=o[u];s[f]=ld(n,a,f,d[f],t,!lt(d,f))}}return r}function ld(t,e,s,i,n,o){const r=t[s];if(r!=null){const l=lt(r,"default");if(l&&i===void 0){const a=r.default;if(r.type!==Function&&!r.skipFactory&&qe(a)){const{propsDefaults:d}=n;if(s in d)i=d[s];else{const u=Fr(n);i=d[s]=a.call(null,e),u()}}else i=a;n.ce&&n.ce._setProp(s,i)}r[0]&&(o&&!l?i=!1:r[1]&&(i===""||i===Fn(s))&&(i=!0))}return i}const N1=new WeakMap;function Eg(t,e,s=!1){const i=s?N1:e.propsCache,n=i.get(t);if(n)return n;const o=t.props,r={},l=[];let a=!1;if(!qe(t)){const u=f=>{a=!0;const[h,m]=Eg(f,e,!0);zt(r,h),m&&l.push(...m)};!s&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!o&&!a)return dt(t)&&i.set(t,so),so;if(Ne(o))for(let u=0;u<o.length;u++){const f=zs(o[u]);th(f)&&(r[f]=pt)}else if(o)for(const u in o){const f=zs(u);if(th(f)){const h=o[u],m=r[f]=Ne(h)||qe(h)?{type:h}:zt({},h),w=m.type;let p=!1,C=!0;if(Ne(w))for(let V=0;V<w.length;++V){const U=w[V],B=qe(U)&&U.name;if(B==="Boolean"){p=!0;break}else B==="String"&&(C=!1)}else p=qe(w)&&w.name==="Boolean";m[0]=p,m[1]=C,(p||lt(m,"default"))&&l.push(f)}}const d=[r,l];return dt(t)&&i.set(t,d),d}function th(t){return t[0]!=="$"&&!Xo(t)}const Sc=t=>t==="_"||t==="_ctx"||t==="$stable",Cc=t=>Ne(t)?t.map(fi):[fi(t)],z1=(t,e,s)=>{if(e._n)return e;const i=R((...n)=>Cc(e(...n)),s);return i._c=!1,i},Og=(t,e,s)=>{const i=t._ctx;for(const n in t){if(Sc(n))continue;const o=t[n];if(qe(o))e[n]=z1(n,o,i);else if(o!=null){const r=Cc(o);e[n]=()=>r}}},Pg=(t,e)=>{const s=Cc(e);t.slots.default=()=>s},Lg=(t,e,s)=>{for(const i in e)(s||!Sc(i))&&(t[i]=e[i])},F1=(t,e,s)=>{const i=t.slots=Dg();if(t.vnode.shapeFlag&32){const n=e._;n?(Lg(i,e,s),s&&Lm(i,"_",n,!0)):Og(e,i)}else e&&Pg(t,e)},H1=(t,e,s)=>{const{vnode:i,slots:n}=t;let o=!0,r=pt;if(i.shapeFlag&32){const l=e._;l?s&&l===1?o=!1:Lg(n,e,s):(o=!e.$stable,Og(e,n)),r=e}else e&&(Pg(t,e),r={default:1});if(o)for(const l in n)!Sc(l)&&r[l]==null&&delete n[l]},as=ok;function W1(t){return q1(t)}function q1(t,e){const s=Oa();s.__VUE__=!0;const{insert:i,remove:n,patchProp:o,createElement:r,createText:l,createComment:a,setText:d,setElementText:u,parentNode:f,nextSibling:h,setScopeId:m=bi,insertStaticContent:w}=t,p=($,L,q,re=null,D=null,oe=null,Ce=void 0,xe=null,he=!!L.dynamicChildren)=>{if($===L)return;$&&!Sn($,L)&&(re=M($),Ie($,D,oe,!0),$=null),L.patchFlag===-2&&(he=!1,L.dynamicChildren=null);const{type:ve,ref:je,shapeFlag:Ae}=L;switch(ve){case Ia:C($,L,q,re);break;case es:V($,L,q,re);break;case Il:$==null&&U(L,q,re,Ce);break;case ee:F($,L,q,re,D,oe,Ce,xe,he);break;default:Ae&1?j($,L,q,re,D,oe,Ce,xe,he):Ae&6?ge($,L,q,re,D,oe,Ce,xe,he):(Ae&64||Ae&128)&&ve.process($,L,q,re,D,oe,Ce,xe,he,be)}je!=null&&D?sr(je,$&&$.ref,oe,L||$,!L):je==null&&$&&$.ref!=null&&sr($.ref,null,oe,$,!0)},C=($,L,q,re)=>{if($==null)i(L.el=l(L.children),q,re);else{const D=L.el=$.el;L.children!==$.children&&d(D,L.children)}},V=($,L,q,re)=>{$==null?i(L.el=a(L.children||""),q,re):L.el=$.el},U=($,L,q,re)=>{[$.el,$.anchor]=w($.children,L,q,re,$.el,$.anchor)},B=({el:$,anchor:L},q,re)=>{let D;for(;$&&$!==L;)D=h($),i($,q,re),$=D;i(L,q,re)},H=({el:$,anchor:L})=>{let q;for(;$&&$!==L;)q=h($),n($),$=q;n(L)},j=($,L,q,re,D,oe,Ce,xe,he)=>{L.type==="svg"?Ce="svg":L.type==="math"&&(Ce="mathml"),$==null?T(L,q,re,D,oe,Ce,xe,he):te($,L,D,oe,Ce,xe,he)},T=($,L,q,re,D,oe,Ce,xe)=>{let he,ve;const{props:je,shapeFlag:Ae,transition:Re,dirs:_e}=$;if(he=$.el=r($.type,oe,je&&je.is,je),Ae&8?u(he,$.children):Ae&16&&Y($.children,he,null,re,D,mu($,oe),Ce,xe),_e&&gn($,null,re,"created"),A(he,$,$.scopeId,Ce,re),je){for(const Ge in je)Ge!=="value"&&!Xo(Ge)&&o(he,Ge,null,je[Ge],oe,re);"value"in je&&o(he,"value",null,je.value,oe),(ve=je.onVnodeBeforeMount)&&ri(ve,re,$)}_e&&gn($,null,re,"beforeMount");const Fe=K1(D,Re);Fe&&Re.beforeEnter(he),i(he,L,q),((ve=je&&je.onVnodeMounted)||Fe||_e)&&as(()=>{ve&&ri(ve,re,$),Fe&&Re.enter(he),_e&&gn($,null,re,"mounted")},D)},A=($,L,q,re,D)=>{if(q&&m($,q),re)for(let oe=0;oe<re.length;oe++)m($,re[oe]);if(D){let oe=D.subTree;if(L===oe||Ug(oe.type)&&(oe.ssContent===L||oe.ssFallback===L)){const Ce=D.vnode;A($,Ce,Ce.scopeId,Ce.slotScopeIds,D.parent)}}},Y=($,L,q,re,D,oe,Ce,xe,he=0)=>{for(let ve=he;ve<$.length;ve++){const je=$[ve]=xe?Wi($[ve]):fi($[ve]);p(null,je,L,q,re,D,oe,Ce,xe)}},te=($,L,q,re,D,oe,Ce)=>{const xe=L.el=$.el;let{patchFlag:he,dynamicChildren:ve,dirs:je}=L;he|=$.patchFlag&16;const Ae=$.props||pt,Re=L.props||pt;let _e;if(q&&vn(q,!1),(_e=Re.onVnodeBeforeUpdate)&&ri(_e,q,L,$),je&&gn(L,$,q,"beforeUpdate"),q&&vn(q,!0),(Ae.innerHTML&&Re.innerHTML==null||Ae.textContent&&Re.textContent==null)&&u(xe,""),ve?me($.dynamicChildren,ve,xe,q,re,mu(L,D),oe):Ce||se($,L,xe,null,q,re,mu(L,D),oe,!1),he>0){if(he&16)le(xe,Ae,Re,q,D);else if(he&2&&Ae.class!==Re.class&&o(xe,"class",null,Re.class,D),he&4&&o(xe,"style",Ae.style,Re.style,D),he&8){const Fe=L.dynamicProps;for(let Ge=0;Ge<Fe.length;Ge++){const Xe=Fe[Ge],_t=Ae[Xe],$t=Re[Xe];($t!==_t||Xe==="value")&&o(xe,Xe,_t,$t,D,q)}}he&1&&$.children!==L.children&&u(xe,L.children)}else!Ce&&ve==null&&le(xe,Ae,Re,q,D);((_e=Re.onVnodeUpdated)||je)&&as(()=>{_e&&ri(_e,q,L,$),je&&gn(L,$,q,"updated")},re)},me=($,L,q,re,D,oe,Ce)=>{for(let xe=0;xe<L.length;xe++){const he=$[xe],ve=L[xe],je=he.el&&(he.type===ee||!Sn(he,ve)||he.shapeFlag&198)?f(he.el):q;p(he,ve,je,null,re,D,oe,Ce,!0)}},le=($,L,q,re,D)=>{if(L!==q){if(L!==pt)for(const oe in L)!Xo(oe)&&!(oe in q)&&o($,oe,L[oe],null,D,re);for(const oe in q){if(Xo(oe))continue;const Ce=q[oe],xe=L[oe];Ce!==xe&&oe!=="value"&&o($,oe,xe,Ce,D,re)}"value"in q&&o($,"value",L.value,q.value,D)}},F=($,L,q,re,D,oe,Ce,xe,he)=>{const ve=L.el=$?$.el:l(""),je=L.anchor=$?$.anchor:l("");let{patchFlag:Ae,dynamicChildren:Re,slotScopeIds:_e}=L;_e&&(xe=xe?xe.concat(_e):_e),$==null?(i(ve,q,re),i(je,q,re),Y(L.children||[],q,je,D,oe,Ce,xe,he)):Ae>0&&Ae&64&&Re&&$.dynamicChildren?(me($.dynamicChildren,Re,q,D,oe,Ce,xe),(L.key!=null||D&&L===D.subTree)&&Ac($,L,!0)):se($,L,q,je,D,oe,Ce,xe,he)},ge=($,L,q,re,D,oe,Ce,xe,he)=>{L.slotScopeIds=xe,$==null?L.shapeFlag&512?D.ctx.activate(L,q,re,Ce,he):ce(L,q,re,D,oe,Ce,he):de($,L,he)},ce=($,L,q,re,D,oe,Ce)=>{const xe=$.component=fk($,re,D);if(ja($)&&(xe.ctx.renderer=be),hk(xe,!1,Ce),xe.asyncDep){if(D&&D.registerDep(xe,X,Ce),!$.el){const he=xe.subTree=k(es);V(null,he,L,q),$.placeholder=he.el}}else X(xe,$,L,q,D,oe,Ce)},de=($,L,q)=>{const re=L.component=$.component;if(ik($,L,q))if(re.asyncDep&&!re.asyncResolved){Z(re,L,q);return}else re.next=L,re.update();else L.el=$.el,re.vnode=L},X=($,L,q,re,D,oe,Ce)=>{const xe=()=>{if($.isMounted){let{next:Ae,bu:Re,u:_e,parent:Fe,vnode:Ge}=$;{const ot=jg($);if(ot){Ae&&(Ae.el=Ge.el,Z($,Ae,Ce)),ot.asyncDep.then(()=>{$.isUnmounted||xe()});return}}let Xe=Ae,_t;vn($,!1),Ae?(Ae.el=Ge.el,Z($,Ae,Ce)):Ae=Ge,Re&&jl(Re),(_t=Ae.props&&Ae.props.onVnodeBeforeUpdate)&&ri(_t,Fe,Ae,Ge),vn($,!0);const $t=ih($),Pt=$.subTree;$.subTree=$t,p(Pt,$t,f(Pt.el),M(Pt),$,D,oe),Ae.el=$t.el,Xe===null&&nk($,$t.el),_e&&as(_e,D),(_t=Ae.props&&Ae.props.onVnodeUpdated)&&as(()=>ri(_t,Fe,Ae,Ge),D)}else{let Ae;const{el:Re,props:_e}=L,{bm:Fe,m:Ge,parent:Xe,root:_t,type:$t}=$,Pt=ro(L);vn($,!1),Fe&&jl(Fe),!Pt&&(Ae=_e&&_e.onVnodeBeforeMount)&&ri(Ae,Xe,L),vn($,!0);{_t.ce&&_t.ce._def.shadowRoot!==!1&&_t.ce._injectChildStyle($t);const ot=$.subTree=ih($);p(null,ot,q,re,$,D,oe),L.el=ot.el}if(Ge&&as(Ge,D),!Pt&&(Ae=_e&&_e.onVnodeMounted)){const ot=L;as(()=>ri(Ae,Xe,ot),D)}(L.shapeFlag&256||Xe&&ro(Xe.vnode)&&Xe.vnode.shapeFlag&256)&&$.a&&as($.a,D),$.isMounted=!0,L=q=re=null}};$.scope.on();const he=$.effect=new Im(xe);$.scope.off();const ve=$.update=he.run.bind(he),je=$.job=he.runIfDirty.bind(he);je.i=$,je.id=$.uid,he.scheduler=()=>_c(je),vn($,!0),ve()},Z=($,L,q)=>{L.component=$;const re=$.vnode.props;$.vnode=L,$.next=null,U1($,L.props,re,q),H1($,L.children,q),Li(),Hf($),ji()},se=($,L,q,re,D,oe,Ce,xe,he=!1)=>{const ve=$&&$.children,je=$?$.shapeFlag:0,Ae=L.children,{patchFlag:Re,shapeFlag:_e}=L;if(Re>0){if(Re&128){P(ve,Ae,q,re,D,oe,Ce,xe,he);return}else if(Re&256){Pe(ve,Ae,q,re,D,oe,Ce,xe,he);return}}_e&8?(je&16&&v(ve,D,oe),Ae!==ve&&u(q,Ae)):je&16?_e&16?P(ve,Ae,q,re,D,oe,Ce,xe,he):v(ve,D,oe,!0):(je&8&&u(q,""),_e&16&&Y(Ae,q,re,D,oe,Ce,xe,he))},Pe=($,L,q,re,D,oe,Ce,xe,he)=>{$=$||so,L=L||so;const ve=$.length,je=L.length,Ae=Math.min(ve,je);let Re;for(Re=0;Re<Ae;Re++){const _e=L[Re]=he?Wi(L[Re]):fi(L[Re]);p($[Re],_e,q,null,D,oe,Ce,xe,he)}ve>je?v($,D,oe,!0,!1,Ae):Y(L,q,re,D,oe,Ce,xe,he,Ae)},P=($,L,q,re,D,oe,Ce,xe,he)=>{let ve=0;const je=L.length;let Ae=$.length-1,Re=je-1;for(;ve<=Ae&&ve<=Re;){const _e=$[ve],Fe=L[ve]=he?Wi(L[ve]):fi(L[ve]);if(Sn(_e,Fe))p(_e,Fe,q,null,D,oe,Ce,xe,he);else break;ve++}for(;ve<=Ae&&ve<=Re;){const _e=$[Ae],Fe=L[Re]=he?Wi(L[Re]):fi(L[Re]);if(Sn(_e,Fe))p(_e,Fe,q,null,D,oe,Ce,xe,he);else break;Ae--,Re--}if(ve>Ae){if(ve<=Re){const _e=Re+1,Fe=_e<je?L[_e].el:re;for(;ve<=Re;)p(null,L[ve]=he?Wi(L[ve]):fi(L[ve]),q,Fe,D,oe,Ce,xe,he),ve++}}else if(ve>Re)for(;ve<=Ae;)Ie($[ve],D,oe,!0),ve++;else{const _e=ve,Fe=ve,Ge=new Map;for(ve=Fe;ve<=Re;ve++){const Lt=L[ve]=he?Wi(L[ve]):fi(L[ve]);Lt.key!=null&&Ge.set(Lt.key,ve)}let Xe,_t=0;const $t=Re-Fe+1;let Pt=!1,ot=0;const _s=new Array($t);for(ve=0;ve<$t;ve++)_s[ve]=0;for(ve=_e;ve<=Ae;ve++){const Lt=$[ve];if(_t>=$t){Ie(Lt,D,oe,!0);continue}let ct;if(Lt.key!=null)ct=Ge.get(Lt.key);else for(Xe=Fe;Xe<=Re;Xe++)if(_s[Xe-Fe]===0&&Sn(Lt,L[Xe])){ct=Xe;break}ct===void 0?Ie(Lt,D,oe,!0):(_s[ct-Fe]=ve+1,ct>=ot?ot=ct:Pt=!0,p(Lt,L[ct],q,null,D,oe,Ce,xe,he),_t++)}const pn=Pt?G1(_s):so;for(Xe=pn.length-1,ve=$t-1;ve>=0;ve--){const Lt=Fe+ve,ct=L[Lt],ii=L[Lt+1],_i=Lt+1<je?ii.el||ii.placeholder:re;_s[ve]===0?p(null,ct,q,_i,D,oe,Ce,xe,he):Pt&&(Xe<0||ve!==pn[Xe]?$e(ct,q,_i,2):Xe--)}}},$e=($,L,q,re,D=null)=>{const{el:oe,type:Ce,transition:xe,children:he,shapeFlag:ve}=$;if(ve&6){$e($.component.subTree,L,q,re);return}if(ve&128){$.suspense.move(L,q,re);return}if(ve&64){Ce.move($,L,q,be);return}if(Ce===ee){i(oe,L,q);for(let Ae=0;Ae<he.length;Ae++)$e(he[Ae],L,q,re);i($.anchor,L,q);return}if(Ce===Il){B($,L,q);return}if(re!==2&&ve&1&&xe)if(re===0)xe.beforeEnter(oe),i(oe,L,q),as(()=>xe.enter(oe),D);else{const{leave:Ae,delayLeave:Re,afterLeave:_e}=xe,Fe=()=>{$.ctx.isUnmounted?n(oe):i(oe,L,q)},Ge=()=>{oe._isLeaving&&oe[Di](!0),Ae(oe,()=>{Fe(),_e&&_e()})};Re?Re(oe,Fe,Ge):Ge()}else i(oe,L,q)},Ie=($,L,q,re=!1,D=!1)=>{const{type:oe,props:Ce,ref:xe,children:he,dynamicChildren:ve,shapeFlag:je,patchFlag:Ae,dirs:Re,cacheIndex:_e}=$;if(Ae===-2&&(D=!1),xe!=null&&(Li(),sr(xe,null,q,$,!0),ji()),_e!=null&&(L.renderCache[_e]=void 0),je&256){L.ctx.deactivate($);return}const Fe=je&1&&Re,Ge=!ro($);let Xe;if(Ge&&(Xe=Ce&&Ce.onVnodeBeforeUnmount)&&ri(Xe,L,$),je&6)S($.component,q,re);else{if(je&128){$.suspense.unmount(q,re);return}Fe&&gn($,null,L,"beforeUnmount"),je&64?$.type.remove($,L,q,be,re):ve&&!ve.hasOnce&&(oe!==ee||Ae>0&&Ae&64)?v(ve,L,q,!1,!0):(oe===ee&&Ae&384||!D&&je&16)&&v(he,L,q),re&&Qe($)}(Ge&&(Xe=Ce&&Ce.onVnodeUnmounted)||Fe)&&as(()=>{Xe&&ri(Xe,L,$),Fe&&gn($,null,L,"unmounted")},q)},Qe=$=>{const{type:L,el:q,anchor:re,transition:D}=$;if(L===ee){J(q,re);return}if(L===Il){H($);return}const oe=()=>{n(q),D&&!D.persisted&&D.afterLeave&&D.afterLeave()};if($.shapeFlag&1&&D&&!D.persisted){const{leave:Ce,delayLeave:xe}=D,he=()=>Ce(q,oe);xe?xe($.el,oe,he):he()}else oe()},J=($,L)=>{let q;for(;$!==L;)q=h($),n($),$=q;n(L)},S=($,L,q)=>{const{bum:re,scope:D,job:oe,subTree:Ce,um:xe,m:he,a:ve}=$;sh(he),sh(ve),re&&jl(re),D.stop(),oe&&(oe.flags|=8,Ie(Ce,$,L,q)),xe&&as(xe,L),as(()=>{$.isUnmounted=!0},L)},v=($,L,q,re=!1,D=!1,oe=0)=>{for(let Ce=oe;Ce<$.length;Ce++)Ie($[Ce],L,q,re,D)},M=$=>{if($.shapeFlag&6)return M($.component.subTree);if($.shapeFlag&128)return $.suspense.next();const L=h($.anchor||$.el),q=L&&L[lg];return q?h(q):L};let Q=!1;const G=($,L,q)=>{$==null?L._vnode&&Ie(L._vnode,null,null,!0):p(L._vnode||null,$,L,null,null,null,q),L._vnode=$,Q||(Q=!0,Hf(),ng(),Q=!1)},be={p,um:Ie,m:$e,r:Qe,mt:ce,mc:Y,pc:se,pbc:me,n:M,o:t};return{render:G,hydrate:void 0,createApp:B1(G)}}function mu({type:t,props:e},s){return s==="svg"&&t==="foreignObject"||s==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:s}function vn({effect:t,job:e},s){s?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function K1(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Ac(t,e,s=!1){const i=t.children,n=e.children;if(Ne(i)&&Ne(n))for(let o=0;o<i.length;o++){const r=i[o];let l=n[o];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=n[o]=Wi(n[o]),l.el=r.el),!s&&l.patchFlag!==-2&&Ac(r,l)),l.type===Ia&&l.patchFlag!==-1&&(l.el=r.el),l.type===es&&!l.el&&(l.el=r.el)}}function G1(t){const e=t.slice(),s=[0];let i,n,o,r,l;const a=t.length;for(i=0;i<a;i++){const d=t[i];if(d!==0){if(n=s[s.length-1],t[n]<d){e[i]=n,s.push(i);continue}for(o=0,r=s.length-1;o<r;)l=o+r>>1,t[s[l]]<d?o=l+1:r=l;d<t[s[o]]&&(o>0&&(e[i]=s[o-1]),s[o]=i)}}for(o=s.length,r=s[o-1];o-- >0;)s[o]=r,r=e[r];return s}function jg(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:jg(e)}function sh(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const J1=Symbol.for("v-scx"),Y1=()=>Js(J1);function We(t,e,s){return Rg(t,e,s)}function Rg(t,e,s=pt){const{immediate:i,deep:n,flush:o,once:r}=s,l=zt({},s),a=e&&i||!e&&o!=="post";let d;if(kr){if(o==="sync"){const m=Y1();d=m.__watcherHandles||(m.__watcherHandles=[])}else if(!a){const m=()=>{};return m.stop=bi,m.resume=bi,m.pause=bi,m}}const u=ts;l.call=(m,w,p)=>Qs(m,u,w,p);let f=!1;o==="post"?l.scheduler=m=>{as(m,u&&u.suspense)}:o!=="sync"&&(f=!0,l.scheduler=(m,w)=>{w?m():_c(m)}),l.augmentJob=m=>{e&&(m.flags|=4),f&&(m.flags|=2,u&&(m.id=u.uid,m.i=u))};const h=d1(t,e,l);return kr&&(d?d.push(h):a&&h()),h}function Q1(t,e,s){const i=this.proxy,n=Ct(t)?t.includes(".")?Bg(i,t):()=>i[t]:t.bind(i,i);let o;qe(e)?o=e:(o=e.handler,s=e);const r=Fr(this),l=Rg(n,o.bind(i),s);return r(),l}function Bg(t,e){const s=e.split(".");return()=>{let i=t;for(let n=0;n<s.length&&i;n++)i=i[s[n]];return i}}const X1=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${zs(e)}Modifiers`]||t[`${Fn(e)}Modifiers`];function Z1(t,e,...s){if(t.isUnmounted)return;const i=t.vnode.props||pt;let n=s;const o=e.startsWith("update:"),r=o&&X1(i,e.slice(7));r&&(r.trim&&(n=s.map(u=>Ct(u)?u.trim():u)),r.number&&(n=s.map(Ql)));let l,a=i[l=au(e)]||i[l=au(zs(e))];!a&&o&&(a=i[l=au(Fn(e))]),a&&Qs(a,t,6,n);const d=i[l+"Once"];if(d){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,Qs(d,t,6,n)}}const ek=new WeakMap;function Ig(t,e,s=!1){const i=s?ek:e.emitsCache,n=i.get(t);if(n!==void 0)return n;const o=t.emits;let r={},l=!1;if(!qe(t)){const a=d=>{const u=Ig(d,e,!0);u&&(l=!0,zt(r,u))};!s&&e.mixins.length&&e.mixins.forEach(a),t.extends&&a(t.extends),t.mixins&&t.mixins.forEach(a)}return!o&&!l?(dt(t)&&i.set(t,null),null):(Ne(o)?o.forEach(a=>r[a]=null):zt(r,o),dt(t)&&i.set(t,r),r)}function Ba(t,e){return!t||!$a(e)?!1:(e=e.slice(2).replace(/Once$/,""),lt(t,e[0].toLowerCase()+e.slice(1))||lt(t,Fn(e))||lt(t,e))}function ih(t){const{type:e,vnode:s,proxy:i,withProxy:n,propsOptions:[o],slots:r,attrs:l,emit:a,render:d,renderCache:u,props:f,data:h,setupState:m,ctx:w,inheritAttrs:p}=t,C=ta(t);let V,U;try{if(s.shapeFlag&4){const H=n||i,j=H;V=fi(d.call(j,H,u,f,m,h,w)),U=l}else{const H=e;V=fi(H.length>1?H(f,{attrs:l,slots:r,emit:a}):H(f,null)),U=e.props?l:tk(l)}}catch(H){nr.length=0,La(H,t,1),V=k(es)}let B=V;if(U&&p!==!1){const H=Object.keys(U),{shapeFlag:j}=B;H.length&&j&7&&(o&&H.some(fc)&&(U=sk(U,o)),B=on(B,U,!1,!0))}return s.dirs&&(B=on(B,null,!1,!0),B.dirs=B.dirs?B.dirs.concat(s.dirs):s.dirs),s.transition&&vr(B,s.transition),V=B,ta(C),V}const tk=t=>{let e;for(const s in t)(s==="class"||s==="style"||$a(s))&&((e||(e={}))[s]=t[s]);return e},sk=(t,e)=>{const s={};for(const i in t)(!fc(i)||!(i.slice(9)in e))&&(s[i]=t[i]);return s};function ik(t,e,s){const{props:i,children:n,component:o}=t,{props:r,children:l,patchFlag:a}=e,d=o.emitsOptions;if(e.dirs||e.transition)return!0;if(s&&a>=0){if(a&1024)return!0;if(a&16)return i?nh(i,r,d):!!r;if(a&8){const u=e.dynamicProps;for(let f=0;f<u.length;f++){const h=u[f];if(r[h]!==i[h]&&!Ba(d,h))return!0}}}else return(n||l)&&(!l||!l.$stable)?!0:i===r?!1:i?r?nh(i,r,d):!0:!!r;return!1}function nh(t,e,s){const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!0;for(let n=0;n<i.length;n++){const o=i[n];if(e[o]!==t[o]&&!Ba(s,o))return!0}return!1}function nk({vnode:t,parent:e},s){for(;e;){const i=e.subTree;if(i.suspense&&i.suspense.activeBranch===t&&(i.el=t.el),i===t)(t=e.vnode).el=s,e=e.parent;else break}}const Ug=t=>t.__isSuspense;function ok(t,e){e&&e.pendingBranch?Ne(t)?e.effects.push(...t):e.effects.push(t):h1(t)}const ee=Symbol.for("v-fgt"),Ia=Symbol.for("v-txt"),es=Symbol.for("v-cmt"),Il=Symbol.for("v-stc"),nr=[];let Ds=null;function g(t=!1){nr.push(Ds=t?null:[])}function rk(){nr.pop(),Ds=nr[nr.length-1]||null}let yr=1;function oa(t,e=!1){yr+=t,t<0&&Ds&&e&&(Ds.hasOnce=!0)}function Ng(t){return t.dynamicChildren=yr>0?Ds||so:null,rk(),yr>0&&Ds&&Ds.push(t),t}function b(t,e,s,i,n,o){return Ng(c(t,e,s,i,n,o,!0))}function pe(t,e,s,i,n){return Ng(k(t,e,s,i,n,!0))}function br(t){return t?t.__v_isVNode===!0:!1}function Sn(t,e){return t.type===e.type&&t.key===e.key}const zg=({key:t})=>t??null,Ul=({ref:t,ref_key:e,ref_for:s})=>(typeof t=="number"&&(t=""+t),t!=null?Ct(t)||is(t)||qe(t)?{i:Gt,r:t,k:e,f:!!s}:t:null);function c(t,e=null,s=null,i=0,n=null,o=t===ee?0:1,r=!1,l=!1){const a={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&zg(e),ref:e&&Ul(e),scopeId:rg,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:i,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:Gt};return l?(Vc(a,s),o&128&&t.normalize(a)):s&&(a.shapeFlag|=Ct(s)?8:16),yr>0&&!r&&Ds&&(a.patchFlag>0||o&6)&&a.patchFlag!==32&&Ds.push(a),a}const k=lk;function lk(t,e=null,s=null,i=0,n=null,o=!1){if((!t||t===wg)&&(t=es),br(t)){const l=on(t,e,!0);return s&&Vc(l,s),yr>0&&!o&&Ds&&(l.shapeFlag&6?Ds[Ds.indexOf(t)]=l:Ds.push(l)),l.patchFlag=-2,l}if(vk(t)&&(t=t.__vccOpts),e){e=ak(e);let{class:l,style:a}=e;l&&!Ct(l)&&(e.class=Ee(l)),dt(a)&&(wc(a)&&!Ne(a)&&(a=zt({},a)),e.style=hr(a))}const r=Ct(t)?1:Ug(t)?128:ag(t)?64:dt(t)?4:qe(t)?2:0;return c(t,e,s,i,n,r,o,!0)}function ak(t){return t?wc(t)||$g(t)?zt({},t):t:null}function on(t,e,s=!1,i=!1){const{props:n,ref:o,patchFlag:r,children:l,transition:a}=t,d=e?uk(n||{},e):n,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:d,key:d&&zg(d),ref:e&&e.ref?s&&o?Ne(o)?o.concat(Ul(e)):[o,Ul(e)]:Ul(e):o,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==ee?r===-1?16:r|16:r,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:a,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&on(t.ssContent),ssFallback:t.ssFallback&&on(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return a&&i&&vr(u,a.clone(u)),u}function ie(t=" ",e=0){return k(Ia,null,t,e)}function Ua(t,e){const s=k(Il,null,t);return s.staticCount=e,s}function I(t="",e=!1){return e?(g(),pe(es,null,t)):k(es,null,t)}function fi(t){return t==null||typeof t=="boolean"?k(es):Ne(t)?k(ee,null,t.slice()):br(t)?Wi(t):k(Ia,null,String(t))}function Wi(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:on(t)}function Vc(t,e){let s=0;const{shapeFlag:i}=t;if(e==null)e=null;else if(Ne(e))s=16;else if(typeof e=="object")if(i&65){const n=e.default;n&&(n._c&&(n._d=!1),Vc(t,n()),n._c&&(n._d=!0));return}else{s=32;const n=e._;!n&&!$g(e)?e._ctx=Gt:n===3&&Gt&&(Gt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else qe(e)?(e={default:e,_ctx:Gt},s=32):(e=String(e),i&64?(s=16,e=[ie(e)]):s=8);t.children=e,t.shapeFlag|=s}function uk(...t){const e={};for(let s=0;s<t.length;s++){const i=t[s];for(const n in i)if(n==="class")e.class!==i.class&&(e.class=Ee([e.class,i.class]));else if(n==="style")e.style=hr([e.style,i.style]);else if($a(n)){const o=e[n],r=i[n];r&&o!==r&&!(Ne(o)&&o.includes(r))&&(e[n]=o?[].concat(o,r):r)}else n!==""&&(e[n]=i[n])}return e}function ri(t,e,s,i=null){Qs(t,e,7,[s,i])}const dk=Vg();let ck=0;function fk(t,e,s){const i=t.type,n=(e?e.appContext:t.appContext)||dk,o={uid:ck++,vnode:t,type:i,parent:e,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Rb(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(n.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Eg(i,n),emitsOptions:Ig(i,n),emit:null,emitted:null,propsDefaults:pt,inheritAttrs:i.inheritAttrs,ctx:pt,data:pt,props:pt,attrs:pt,slots:pt,refs:pt,setupState:pt,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=Z1.bind(null,o),t.ce&&t.ce(o),o}let ts=null;const Mc=()=>ts||Gt;let ra,ad;{const t=Oa(),e=(s,i)=>{let n;return(n=t[s])||(n=t[s]=[]),n.push(i),o=>{n.length>1?n.forEach(r=>r(o)):n[0](o)}};ra=e("__VUE_INSTANCE_SETTERS__",s=>ts=s),ad=e("__VUE_SSR_SETTERS__",s=>kr=s)}const Fr=t=>{const e=ts;return ra(t),t.scope.on(),()=>{t.scope.off(),ra(e)}},oh=()=>{ts&&ts.scope.off(),ra(null)};function Fg(t){return t.vnode.shapeFlag&4}let kr=!1;function hk(t,e=!1,s=!1){e&&ad(e);const{props:i,children:n}=t.vnode,o=Fg(t);I1(t,i,o,e),F1(t,n,s||e);const r=o?pk(t,e):void 0;return e&&ad(!1),r}function pk(t,e){const s=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,D1);const{setup:i}=s;if(i){Li();const n=t.setupContext=i.length>1?Wg(t):null,o=Fr(t),r=zr(i,t,0,[t.props,n]),l=Em(r);if(ji(),o(),(l||t.sp)&&!ro(t)&&yg(t),l){if(r.then(oh,oh),e)return r.then(a=>{rh(t,a)}).catch(a=>{La(a,t,0)});t.asyncDep=r}else rh(t,r)}else Hg(t)}function rh(t,e,s){qe(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:dt(e)&&(t.setupState=tg(e)),Hg(t)}function Hg(t,e,s){const i=t.type;t.render||(t.render=i.render||bi);{const n=Fr(t);Li();try{E1(t)}finally{ji(),n()}}}const mk={get(t,e){return Zt(t,"get",""),t[e]}};function Wg(t){const e=s=>{t.exposed=s||{}};return{attrs:new Proxy(t.attrs,mk),slots:t.slots,emit:t.emit,expose:e}}function Na(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(tg(i1(t.exposed)),{get(e,s){if(s in e)return e[s];if(s in ir)return ir[s](t)},has(e,s){return s in e||s in ir}})):t.proxy}function gk(t,e=!0){return qe(t)?t.displayName||t.name:t.name||e&&t.__name}function vk(t){return qe(t)&&"__vccOpts"in t}const ne=(t,e)=>a1(t,e,kr);function Tt(t,e,s){try{oa(-1);const i=arguments.length;return i===2?dt(e)&&!Ne(e)?br(e)?k(t,null,[e]):k(t,e):k(t,null,e):(i>3?s=Array.prototype.slice.call(arguments,2):i===3&&br(s)&&(s=[s]),k(t,e,s))}finally{oa(1)}}const yk="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ud;const lh=typeof window<"u"&&window.trustedTypes;if(lh)try{ud=lh.createPolicy("vue",{createHTML:t=>t})}catch{}const qg=ud?t=>ud.createHTML(t):t=>t,bk="http://www.w3.org/2000/svg",kk="http://www.w3.org/1998/Math/MathML",Mi=typeof document<"u"?document:null,ah=Mi&&Mi.createElement("template"),xk={insert:(t,e,s)=>{e.insertBefore(t,s||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,s,i)=>{const n=e==="svg"?Mi.createElementNS(bk,t):e==="mathml"?Mi.createElementNS(kk,t):s?Mi.createElement(t,{is:s}):Mi.createElement(t);return t==="select"&&i&&i.multiple!=null&&n.setAttribute("multiple",i.multiple),n},createText:t=>Mi.createTextNode(t),createComment:t=>Mi.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Mi.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,s,i,n,o){const r=s?s.previousSibling:e.lastChild;if(n&&(n===o||n.nextSibling))for(;e.insertBefore(n.cloneNode(!0),s),!(n===o||!(n=n.nextSibling)););else{ah.innerHTML=qg(i==="svg"?`<svg>${t}</svg>`:i==="mathml"?`<math>${t}</math>`:t);const l=ah.content;if(i==="svg"||i==="mathml"){const a=l.firstChild;for(;a.firstChild;)l.appendChild(a.firstChild);l.removeChild(a)}e.insertBefore(l,s)}return[r?r.nextSibling:e.firstChild,s?s.previousSibling:e.lastChild]}},zi="transition",Bo="animation",xr=Symbol("_vtc"),Kg={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},wk=zt({},fg,Kg),_k=t=>(t.displayName="Transition",t.props=wk,t),Dc=_k((t,{slots:e})=>Tt(v1,Sk(t),e)),yn=(t,e=[])=>{Ne(t)?t.forEach(s=>s(...e)):t&&t(...e)},uh=t=>t?Ne(t)?t.some(e=>e.length>1):t.length>1:!1;function Sk(t){const e={};for(const F in t)F in Kg||(e[F]=t[F]);if(t.css===!1)return e;const{name:s="v",type:i,duration:n,enterFromClass:o=`${s}-enter-from`,enterActiveClass:r=`${s}-enter-active`,enterToClass:l=`${s}-enter-to`,appearFromClass:a=o,appearActiveClass:d=r,appearToClass:u=l,leaveFromClass:f=`${s}-leave-from`,leaveActiveClass:h=`${s}-leave-active`,leaveToClass:m=`${s}-leave-to`}=t,w=Ck(n),p=w&&w[0],C=w&&w[1],{onBeforeEnter:V,onEnter:U,onEnterCancelled:B,onLeave:H,onLeaveCancelled:j,onBeforeAppear:T=V,onAppear:A=U,onAppearCancelled:Y=B}=e,te=(F,ge,ce,de)=>{F._enterCancelled=de,bn(F,ge?u:l),bn(F,ge?d:r),ce&&ce()},me=(F,ge)=>{F._isLeaving=!1,bn(F,f),bn(F,m),bn(F,h),ge&&ge()},le=F=>(ge,ce)=>{const de=F?A:U,X=()=>te(ge,F,ce);yn(de,[ge,X]),dh(()=>{bn(ge,F?a:o),Ci(ge,F?u:l),uh(de)||ch(ge,i,p,X)})};return zt(e,{onBeforeEnter(F){yn(V,[F]),Ci(F,o),Ci(F,r)},onBeforeAppear(F){yn(T,[F]),Ci(F,a),Ci(F,d)},onEnter:le(!1),onAppear:le(!0),onLeave(F,ge){F._isLeaving=!0;const ce=()=>me(F,ge);Ci(F,f),F._enterCancelled?(Ci(F,h),ph(F)):(ph(F),Ci(F,h)),dh(()=>{F._isLeaving&&(bn(F,f),Ci(F,m),uh(H)||ch(F,i,C,ce))}),yn(H,[F,ce])},onEnterCancelled(F){te(F,!1,void 0,!0),yn(B,[F])},onAppearCancelled(F){te(F,!0,void 0,!0),yn(Y,[F])},onLeaveCancelled(F){me(F),yn(j,[F])}})}function Ck(t){if(t==null)return null;if(dt(t))return[gu(t.enter),gu(t.leave)];{const e=gu(t);return[e,e]}}function gu(t){return Db(t)}function Ci(t,e){e.split(/\s+/).forEach(s=>s&&t.classList.add(s)),(t[xr]||(t[xr]=new Set)).add(e)}function bn(t,e){e.split(/\s+/).forEach(i=>i&&t.classList.remove(i));const s=t[xr];s&&(s.delete(e),s.size||(t[xr]=void 0))}function dh(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let Ak=0;function ch(t,e,s,i){const n=t._endId=++Ak,o=()=>{n===t._endId&&i()};if(s!=null)return setTimeout(o,s);const{type:r,timeout:l,propCount:a}=Vk(t,e);if(!r)return i();const d=r+"end";let u=0;const f=()=>{t.removeEventListener(d,h),o()},h=m=>{m.target===t&&++u>=a&&f()};setTimeout(()=>{u<a&&f()},l+1),t.addEventListener(d,h)}function Vk(t,e){const s=window.getComputedStyle(t),i=w=>(s[w]||"").split(", "),n=i(`${zi}Delay`),o=i(`${zi}Duration`),r=fh(n,o),l=i(`${Bo}Delay`),a=i(`${Bo}Duration`),d=fh(l,a);let u=null,f=0,h=0;e===zi?r>0&&(u=zi,f=r,h=o.length):e===Bo?d>0&&(u=Bo,f=d,h=a.length):(f=Math.max(r,d),u=f>0?r>d?zi:Bo:null,h=u?u===zi?o.length:a.length:0);const m=u===zi&&/\b(?:transform|all)(?:,|$)/.test(i(`${zi}Property`).toString());return{type:u,timeout:f,propCount:h,hasTransform:m}}function fh(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((s,i)=>hh(s)+hh(t[i])))}function hh(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function ph(t){return(t?t.ownerDocument:document).body.offsetHeight}function Mk(t,e,s){const i=t[xr];i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?t.removeAttribute("class"):s?t.setAttribute("class",e):t.className=e}const la=Symbol("_vod"),Gg=Symbol("_vsh"),nt={name:"show",beforeMount(t,{value:e},{transition:s}){t[la]=t.style.display==="none"?"":t.style.display,s&&e?s.beforeEnter(t):Io(t,e)},mounted(t,{value:e},{transition:s}){s&&e&&s.enter(t)},updated(t,{value:e,oldValue:s},{transition:i}){!e!=!s&&(i?e?(i.beforeEnter(t),Io(t,!0),i.enter(t)):i.leave(t,()=>{Io(t,!1)}):Io(t,e))},beforeUnmount(t,{value:e}){Io(t,e)}};function Io(t,e){t.style.display=e?t[la]:"none",t[Gg]=!e}const Dk=Symbol(""),$k=/(?:^|;)\s*display\s*:/;function Tk(t,e,s){const i=t.style,n=Ct(s);let o=!1;if(s&&!n){if(e)if(Ct(e))for(const r of e.split(";")){const l=r.slice(0,r.indexOf(":")).trim();s[l]==null&&Nl(i,l,"")}else for(const r in e)s[r]==null&&Nl(i,r,"");for(const r in s)r==="display"&&(o=!0),Nl(i,r,s[r])}else if(n){if(e!==s){const r=i[Dk];r&&(s+=";"+r),i.cssText=s,o=$k.test(s)}}else e&&t.removeAttribute("style");la in t&&(t[la]=o?i.display:"",t[Gg]&&(i.display="none"))}const mh=/\s*!important$/;function Nl(t,e,s){if(Ne(s))s.forEach(i=>Nl(t,e,i));else if(s==null&&(s=""),e.startsWith("--"))t.setProperty(e,s);else{const i=Ek(t,e);mh.test(s)?t.setProperty(Fn(i),s.replace(mh,""),"important"):t[i]=s}}const gh=["Webkit","Moz","ms"],vu={};function Ek(t,e){const s=vu[e];if(s)return s;let i=zs(e);if(i!=="filter"&&i in t)return vu[e]=i;i=Ea(i);for(let n=0;n<gh.length;n++){const o=gh[n]+i;if(o in t)return vu[e]=o}return e}const vh="http://www.w3.org/1999/xlink";function yh(t,e,s,i,n,o=Lb(e)){i&&e.startsWith("xlink:")?s==null?t.removeAttributeNS(vh,e.slice(6,e.length)):t.setAttributeNS(vh,e,s):s==null||o&&!jm(s)?t.removeAttribute(e):t.setAttribute(e,o?"":Ys(s)?String(s):s)}function bh(t,e,s,i,n){if(e==="innerHTML"||e==="textContent"){s!=null&&(t[e]=e==="innerHTML"?qg(s):s);return}const o=t.tagName;if(e==="value"&&o!=="PROGRESS"&&!o.includes("-")){const l=o==="OPTION"?t.getAttribute("value")||"":t.value,a=s==null?t.type==="checkbox"?"on":"":String(s);(l!==a||!("_value"in t))&&(t.value=a),s==null&&t.removeAttribute(e),t._value=s;return}let r=!1;if(s===""||s==null){const l=typeof t[e];l==="boolean"?s=jm(s):s==null&&l==="string"?(s="",r=!0):l==="number"&&(s=0,r=!0)}try{t[e]=s}catch{}r&&t.removeAttribute(n||e)}function Ei(t,e,s,i){t.addEventListener(e,s,i)}function Ok(t,e,s,i){t.removeEventListener(e,s,i)}const kh=Symbol("_vei");function Pk(t,e,s,i,n=null){const o=t[kh]||(t[kh]={}),r=o[e];if(i&&r)r.value=i;else{const[l,a]=Lk(e);if(i){const d=o[e]=Bk(i,n);Ei(t,l,d,a)}else r&&(Ok(t,l,r,a),o[e]=void 0)}}const xh=/(?:Once|Passive|Capture)$/;function Lk(t){let e;if(xh.test(t)){e={};let i;for(;i=t.match(xh);)t=t.slice(0,t.length-i[0].length),e[i[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Fn(t.slice(2)),e]}let yu=0;const jk=Promise.resolve(),Rk=()=>yu||(jk.then(()=>yu=0),yu=Date.now());function Bk(t,e){const s=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=s.attached)return;Qs(Ik(i,s.value),e,5,[i])};return s.value=t,s.attached=Rk(),s}function Ik(t,e){if(Ne(e)){const s=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{s.call(t),t._stopped=!0},e.map(i=>n=>!n._stopped&&i&&i(n))}else return e}const wh=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Uk=(t,e,s,i,n,o)=>{const r=n==="svg";e==="class"?Mk(t,i,r):e==="style"?Tk(t,s,i):$a(e)?fc(e)||Pk(t,e,s,i,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Nk(t,e,i,r))?(bh(t,e,i),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&yh(t,e,i,r,o,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Ct(i))?bh(t,zs(e),i,o,e):(e==="true-value"?t._trueValue=i:e==="false-value"&&(t._falseValue=i),yh(t,e,i,r))};function Nk(t,e,s,i){if(i)return!!(e==="innerHTML"||e==="textContent"||e in t&&wh(e)&&qe(s));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const n=t.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return wh(e)&&Ct(s)?!1:e in t}const rn=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Ne(e)?s=>jl(e,s):e};function zk(t){t.target.composing=!0}function _h(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Is=Symbol("_assign"),mo={created(t,{modifiers:{lazy:e,trim:s,number:i}},n){t[Is]=rn(n);const o=i||n.props&&n.props.type==="number";Ei(t,e?"change":"input",r=>{if(r.target.composing)return;let l=t.value;s&&(l=l.trim()),o&&(l=Ql(l)),t[Is](l)}),s&&Ei(t,"change",()=>{t.value=t.value.trim()}),e||(Ei(t,"compositionstart",zk),Ei(t,"compositionend",_h),Ei(t,"change",_h))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:s,modifiers:{lazy:i,trim:n,number:o}},r){if(t[Is]=rn(r),t.composing)return;const l=(o||t.type==="number")&&!/^0\d/.test(t.value)?Ql(t.value):t.value,a=e??"";l!==a&&(document.activeElement===t&&t.type!=="range"&&(i&&e===s||n&&t.value.trim()===a)||(t.value=a))}},Fk={deep:!0,created(t,e,s){t[Is]=rn(s),Ei(t,"change",()=>{const i=t._modelValue,n=go(t),o=t.checked,r=t[Is];if(Ne(i)){const l=mc(i,n),a=l!==-1;if(o&&!a)r(i.concat(n));else if(!o&&a){const d=[...i];d.splice(l,1),r(d)}}else if(Vo(i)){const l=new Set(i);o?l.add(n):l.delete(n),r(l)}else r(Yg(t,o))})},mounted:Sh,beforeUpdate(t,e,s){t[Is]=rn(s),Sh(t,e,s)}};function Sh(t,{value:e,oldValue:s},i){t._modelValue=e;let n;if(Ne(e))n=mc(e,i.props.value)>-1;else if(Vo(e))n=e.has(i.props.value);else{if(e===s)return;n=jn(e,Yg(t,!0))}t.checked!==n&&(t.checked=n)}const Hk={created(t,{value:e},s){t.checked=jn(e,s.props.value),t[Is]=rn(s),Ei(t,"change",()=>{t[Is](go(t))})},beforeUpdate(t,{value:e,oldValue:s},i){t[Is]=rn(i),e!==s&&(t.checked=jn(e,i.props.value))}},Jg={deep:!0,created(t,{value:e,modifiers:{number:s}},i){const n=Vo(e);Ei(t,"change",()=>{const o=Array.prototype.filter.call(t.options,r=>r.selected).map(r=>s?Ql(go(r)):go(r));t[Is](t.multiple?n?new Set(o):o:o[0]),t._assigning=!0,Tn(()=>{t._assigning=!1})}),t[Is]=rn(i)},mounted(t,{value:e}){Ch(t,e)},beforeUpdate(t,e,s){t[Is]=rn(s)},updated(t,{value:e}){t._assigning||Ch(t,e)}};function Ch(t,e){const s=t.multiple,i=Ne(e);if(!(s&&!i&&!Vo(e))){for(let n=0,o=t.options.length;n<o;n++){const r=t.options[n],l=go(r);if(s)if(i){const a=typeof l;a==="string"||a==="number"?r.selected=e.some(d=>String(d)===String(l)):r.selected=mc(e,l)>-1}else r.selected=e.has(l);else if(jn(go(r),e)){t.selectedIndex!==n&&(t.selectedIndex=n);return}}!s&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function go(t){return"_value"in t?t._value:t.value}function Yg(t,e){const s=e?"_trueValue":"_falseValue";return s in t?t[s]:e}const Wk={created(t,e,s){cl(t,e,s,null,"created")},mounted(t,e,s){cl(t,e,s,null,"mounted")},beforeUpdate(t,e,s,i){cl(t,e,s,i,"beforeUpdate")},updated(t,e,s,i){cl(t,e,s,i,"updated")}};function qk(t,e){switch(t){case"SELECT":return Jg;case"TEXTAREA":return mo;default:switch(e){case"checkbox":return Fk;case"radio":return Hk;default:return mo}}}function cl(t,e,s,i,n){const r=qk(t.tagName,s.props&&s.props.type)[n];r&&r(t,e,s,i)}const Kk=["ctrl","shift","alt","meta"],Gk={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>Kk.some(s=>t[`${s}Key`]&&!e.includes(s))},Ut=(t,e)=>{const s=t._withMods||(t._withMods={}),i=e.join(".");return s[i]||(s[i]=((n,...o)=>{for(let r=0;r<e.length;r++){const l=Gk[e[r]];if(l&&l(n,e))return}return t(n,...o)}))},Jk=zt({patchProp:Uk},xk);let Ah;function Yk(){return Ah||(Ah=W1(Jk))}const Qk=((...t)=>{const e=Yk().createApp(...t),{mount:s}=e;return e.mount=i=>{const n=Zk(i);if(!n)return;const o=e._component;!qe(o)&&!o.render&&!o.template&&(o.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const r=s(n,!1,Xk(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),r},e});function Xk(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Zk(t){return Ct(t)?document.querySelector(t):t}const ex="/framework-logo.png";/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const Jn=typeof document<"u";function Qg(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function tx(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&Qg(t.default)}const rt=Object.assign;function bu(t,e){const s={};for(const i in e){const n=e[i];s[i]=Xs(n)?n.map(t):t(n)}return s}const or=()=>{},Xs=Array.isArray;function Vh(t,e){const s={};for(const i in t)s[i]=i in e?e[i]:t[i];return s}const Xg=/#/g,sx=/&/g,ix=/\//g,nx=/=/g,ox=/\?/g,Zg=/\+/g,rx=/%5B/g,lx=/%5D/g,e0=/%5E/g,ax=/%60/g,t0=/%7B/g,ux=/%7C/g,s0=/%7D/g,dx=/%20/g;function $c(t){return t==null?"":encodeURI(""+t).replace(ux,"|").replace(rx,"[").replace(lx,"]")}function cx(t){return $c(t).replace(t0,"{").replace(s0,"}").replace(e0,"^")}function dd(t){return $c(t).replace(Zg,"%2B").replace(dx,"+").replace(Xg,"%23").replace(sx,"%26").replace(ax,"`").replace(t0,"{").replace(s0,"}").replace(e0,"^")}function fx(t){return dd(t).replace(nx,"%3D")}function hx(t){return $c(t).replace(Xg,"%23").replace(ox,"%3F")}function px(t){return hx(t).replace(ix,"%2F")}function wr(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const mx=/\/$/,gx=t=>t.replace(mx,"");function ku(t,e,s="/"){let i,n={},o="",r="";const l=e.indexOf("#");let a=e.indexOf("?");return a=l>=0&&a>l?-1:a,a>=0&&(i=e.slice(0,a),o=e.slice(a,l>0?l:e.length),n=t(o.slice(1))),l>=0&&(i=i||e.slice(0,l),r=e.slice(l,e.length)),i=kx(i??e,s),{fullPath:i+o+r,path:i,query:n,hash:wr(r)}}function vx(t,e){const s=e.query?t(e.query):"";return e.path+(s&&"?")+s+(e.hash||"")}function Mh(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function yx(t,e,s){const i=e.matched.length-1,n=s.matched.length-1;return i>-1&&i===n&&vo(e.matched[i],s.matched[n])&&i0(e.params,s.params)&&t(e.query)===t(s.query)&&e.hash===s.hash}function vo(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function i0(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const s in t)if(!bx(t[s],e[s]))return!1;return!0}function bx(t,e){return Xs(t)?Dh(t,e):Xs(e)?Dh(e,t):t===e}function Dh(t,e){return Xs(e)?t.length===e.length&&t.every((s,i)=>s===e[i]):t.length===1&&t[0]===e}function kx(t,e){if(t.startsWith("/"))return t;if(!t)return e;const s=e.split("/"),i=t.split("/"),n=i[i.length-1];(n===".."||n===".")&&i.push("");let o=s.length-1,r,l;for(r=0;r<i.length;r++)if(l=i[r],l!==".")if(l==="..")o>1&&o--;else break;return s.slice(0,o).join("/")+"/"+i.slice(r).join("/")}const Fi={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let cd=(function(t){return t.pop="pop",t.push="push",t})({}),xu=(function(t){return t.back="back",t.forward="forward",t.unknown="",t})({});function xx(t){if(!t)if(Jn){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),gx(t)}const wx=/^[^#]+#/;function _x(t,e){return t.replace(wx,"#")+e}function Sx(t,e){const s=document.documentElement.getBoundingClientRect(),i=t.getBoundingClientRect();return{behavior:e.behavior,left:i.left-s.left-(e.left||0),top:i.top-s.top-(e.top||0)}}const za=()=>({left:window.scrollX,top:window.scrollY});function Cx(t){let e;if("el"in t){const s=t.el,i=typeof s=="string"&&s.startsWith("#"),n=typeof s=="string"?i?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!n)return;e=Sx(n,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function $h(t,e){return(history.state?history.state.position-e:-1)+t}const fd=new Map;function Ax(t,e){fd.set(t,e)}function Vx(t){const e=fd.get(t);return fd.delete(t),e}function Mx(t){return typeof t=="string"||t&&typeof t=="object"}function n0(t){return typeof t=="string"||typeof t=="symbol"}let Mt=(function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t})({});const o0=Symbol("");Mt.MATCHER_NOT_FOUND+"",Mt.NAVIGATION_GUARD_REDIRECT+"",Mt.NAVIGATION_ABORTED+"",Mt.NAVIGATION_CANCELLED+"",Mt.NAVIGATION_DUPLICATED+"";function yo(t,e){return rt(new Error,{type:t,[o0]:!0},e)}function Ai(t,e){return t instanceof Error&&o0 in t&&(e==null||!!(t.type&e))}const Dx=["params","query","hash"];function $x(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const s of Dx)s in t&&(e[s]=t[s]);return JSON.stringify(e,null,2)}function Tx(t){const e={};if(t===""||t==="?")return e;const s=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<s.length;++i){const n=s[i].replace(Zg," "),o=n.indexOf("="),r=wr(o<0?n:n.slice(0,o)),l=o<0?null:wr(n.slice(o+1));if(r in e){let a=e[r];Xs(a)||(a=e[r]=[a]),a.push(l)}else e[r]=l}return e}function Th(t){let e="";for(let s in t){const i=t[s];if(s=fx(s),i==null){i!==void 0&&(e+=(e.length?"&":"")+s);continue}(Xs(i)?i.map(n=>n&&dd(n)):[i&&dd(i)]).forEach(n=>{n!==void 0&&(e+=(e.length?"&":"")+s,n!=null&&(e+="="+n))})}return e}function Ex(t){const e={};for(const s in t){const i=t[s];i!==void 0&&(e[s]=Xs(i)?i.map(n=>n==null?null:""+n):i==null?i:""+i)}return e}const Ox=Symbol(""),Eh=Symbol(""),Fa=Symbol(""),Tc=Symbol(""),hd=Symbol("");function Uo(){let t=[];function e(i){return t.push(i),()=>{const n=t.indexOf(i);n>-1&&t.splice(n,1)}}function s(){t=[]}return{add:e,list:()=>t.slice(),reset:s}}function qi(t,e,s,i,n,o=r=>r()){const r=i&&(i.enterCallbacks[n]=i.enterCallbacks[n]||[]);return()=>new Promise((l,a)=>{const d=h=>{h===!1?a(yo(Mt.NAVIGATION_ABORTED,{from:s,to:e})):h instanceof Error?a(h):Mx(h)?a(yo(Mt.NAVIGATION_GUARD_REDIRECT,{from:e,to:h})):(r&&i.enterCallbacks[n]===r&&typeof h=="function"&&r.push(h),l())},u=o(()=>t.call(i&&i.instances[n],e,s,d));let f=Promise.resolve(u);t.length<3&&(f=f.then(d)),f.catch(h=>a(h))})}function wu(t,e,s,i,n=o=>o()){const o=[];for(const r of t)for(const l in r.components){let a=r.components[l];if(!(e!=="beforeRouteEnter"&&!r.instances[l]))if(Qg(a)){const d=(a.__vccOpts||a)[e];d&&o.push(qi(d,s,i,r,l,n))}else{let d=a();o.push(()=>d.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${l}" at "${r.path}"`);const f=tx(u)?u.default:u;r.mods[l]=u,r.components[l]=f;const h=(f.__vccOpts||f)[e];return h&&qi(h,s,i,r,l,n)()}))}}return o}function Px(t,e){const s=[],i=[],n=[],o=Math.max(e.matched.length,t.matched.length);for(let r=0;r<o;r++){const l=e.matched[r];l&&(t.matched.find(d=>vo(d,l))?i.push(l):s.push(l));const a=t.matched[r];a&&(e.matched.find(d=>vo(d,a))||n.push(a))}return[s,i,n]}/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Lx=()=>location.protocol+"//"+location.host;function r0(t,e){const{pathname:s,search:i,hash:n}=e,o=t.indexOf("#");if(o>-1){let r=n.includes(t.slice(o))?t.slice(o).length:1,l=n.slice(r);return l[0]!=="/"&&(l="/"+l),Mh(l,"")}return Mh(s,t)+i+n}function jx(t,e,s,i){let n=[],o=[],r=null;const l=({state:h})=>{const m=r0(t,location),w=s.value,p=e.value;let C=0;if(h){if(s.value=m,e.value=h,r&&r===w){r=null;return}C=p?h.position-p.position:0}else i(m);n.forEach(V=>{V(s.value,w,{delta:C,type:cd.pop,direction:C?C>0?xu.forward:xu.back:xu.unknown})})};function a(){r=s.value}function d(h){n.push(h);const m=()=>{const w=n.indexOf(h);w>-1&&n.splice(w,1)};return o.push(m),m}function u(){if(document.visibilityState==="hidden"){const{history:h}=window;if(!h.state)return;h.replaceState(rt({},h.state,{scroll:za()}),"")}}function f(){for(const h of o)h();o=[],window.removeEventListener("popstate",l),window.removeEventListener("pagehide",u),document.removeEventListener("visibilitychange",u)}return window.addEventListener("popstate",l),window.addEventListener("pagehide",u),document.addEventListener("visibilitychange",u),{pauseListeners:a,listen:d,destroy:f}}function Oh(t,e,s,i=!1,n=!1){return{back:t,current:e,forward:s,replaced:i,position:window.history.length,scroll:n?za():null}}function Rx(t){const{history:e,location:s}=window,i={value:r0(t,s)},n={value:e.state};n.value||o(i.value,{back:null,current:i.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function o(a,d,u){const f=t.indexOf("#"),h=f>-1?(s.host&&document.querySelector("base")?t:t.slice(f))+a:Lx()+t+a;try{e[u?"replaceState":"pushState"](d,"",h),n.value=d}catch(m){console.error(m),s[u?"replace":"assign"](h)}}function r(a,d){o(a,rt({},e.state,Oh(n.value.back,a,n.value.forward,!0),d,{position:n.value.position}),!0),i.value=a}function l(a,d){const u=rt({},n.value,e.state,{forward:a,scroll:za()});o(u.current,u,!0),o(a,rt({},Oh(i.value,a,null),{position:u.position+1},d),!1),i.value=a}return{location:i,state:n,push:l,replace:r}}function Bx(t){t=xx(t);const e=Rx(t),s=jx(t,e.state,e.location,e.replace);function i(o,r=!0){r||s.pauseListeners(),history.go(o)}const n=rt({location:"",base:t,go:i,createHref:_x.bind(null,t)},e,s);return Object.defineProperty(n,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(n,"state",{enumerable:!0,get:()=>e.state.value}),n}function Ix(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),Bx(t)}let Vn=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t})({});var Rt=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t})(Rt||{});const Ux={type:Vn.Static,value:""},Nx=/[a-zA-Z0-9_]/;function zx(t){if(!t)return[[]];if(t==="/")return[[Ux]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(m){throw new Error(`ERR (${s})/"${d}": ${m}`)}let s=Rt.Static,i=s;const n=[];let o;function r(){o&&n.push(o),o=[]}let l=0,a,d="",u="";function f(){d&&(s===Rt.Static?o.push({type:Vn.Static,value:d}):s===Rt.Param||s===Rt.ParamRegExp||s===Rt.ParamRegExpEnd?(o.length>1&&(a==="*"||a==="+")&&e(`A repeatable param (${d}) must be alone in its segment. eg: '/:ids+.`),o.push({type:Vn.Param,value:d,regexp:u,repeatable:a==="*"||a==="+",optional:a==="*"||a==="?"})):e("Invalid state to consume buffer"),d="")}function h(){d+=a}for(;l<t.length;){if(a=t[l++],a==="\\"&&s!==Rt.ParamRegExp){i=s,s=Rt.EscapeNext;continue}switch(s){case Rt.Static:a==="/"?(d&&f(),r()):a===":"?(f(),s=Rt.Param):h();break;case Rt.EscapeNext:h(),s=i;break;case Rt.Param:a==="("?s=Rt.ParamRegExp:Nx.test(a)?h():(f(),s=Rt.Static,a!=="*"&&a!=="?"&&a!=="+"&&l--);break;case Rt.ParamRegExp:a===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+a:s=Rt.ParamRegExpEnd:u+=a;break;case Rt.ParamRegExpEnd:f(),s=Rt.Static,a!=="*"&&a!=="?"&&a!=="+"&&l--,u="";break;default:e("Unknown state");break}}return s===Rt.ParamRegExp&&e(`Unfinished custom RegExp for param "${d}"`),f(),r(),n}const Ph="[^/]+?",Fx={sensitive:!1,strict:!1,start:!0,end:!0};var us=(function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t})(us||{});const Hx=/[.+*?^${}()[\]/\\]/g;function Wx(t,e){const s=rt({},Fx,e),i=[];let n=s.start?"^":"";const o=[];for(const d of t){const u=d.length?[]:[us.Root];s.strict&&!d.length&&(n+="/");for(let f=0;f<d.length;f++){const h=d[f];let m=us.Segment+(s.sensitive?us.BonusCaseSensitive:0);if(h.type===Vn.Static)f||(n+="/"),n+=h.value.replace(Hx,"\\$&"),m+=us.Static;else if(h.type===Vn.Param){const{value:w,repeatable:p,optional:C,regexp:V}=h;o.push({name:w,repeatable:p,optional:C});const U=V||Ph;if(U!==Ph){m+=us.BonusCustomRegExp;try{`${U}`}catch(H){throw new Error(`Invalid custom RegExp for param "${w}" (${U}): `+H.message)}}let B=p?`((?:${U})(?:/(?:${U}))*)`:`(${U})`;f||(B=C&&d.length<2?`(?:/${B})`:"/"+B),C&&(B+="?"),n+=B,m+=us.Dynamic,C&&(m+=us.BonusOptional),p&&(m+=us.BonusRepeatable),U===".*"&&(m+=us.BonusWildcard)}u.push(m)}i.push(u)}if(s.strict&&s.end){const d=i.length-1;i[d][i[d].length-1]+=us.BonusStrict}s.strict||(n+="/?"),s.end?n+="$":s.strict&&!n.endsWith("/")&&(n+="(?:/|$)");const r=new RegExp(n,s.sensitive?"":"i");function l(d){const u=d.match(r),f={};if(!u)return null;for(let h=1;h<u.length;h++){const m=u[h]||"",w=o[h-1];f[w.name]=m&&w.repeatable?m.split("/"):m}return f}function a(d){let u="",f=!1;for(const h of t){(!f||!u.endsWith("/"))&&(u+="/"),f=!1;for(const m of h)if(m.type===Vn.Static)u+=m.value;else if(m.type===Vn.Param){const{value:w,repeatable:p,optional:C}=m,V=w in d?d[w]:"";if(Xs(V)&&!p)throw new Error(`Provided param "${w}" is an array but it is not repeatable (* or + modifiers)`);const U=Xs(V)?V.join("/"):V;if(!U)if(C)h.length<2&&(u.endsWith("/")?u=u.slice(0,-1):f=!0);else throw new Error(`Missing required param "${w}"`);u+=U}}return u||"/"}return{re:r,score:i,keys:o,parse:l,stringify:a}}function qx(t,e){let s=0;for(;s<t.length&&s<e.length;){const i=e[s]-t[s];if(i)return i;s++}return t.length<e.length?t.length===1&&t[0]===us.Static+us.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===us.Static+us.Segment?1:-1:0}function l0(t,e){let s=0;const i=t.score,n=e.score;for(;s<i.length&&s<n.length;){const o=qx(i[s],n[s]);if(o)return o;s++}if(Math.abs(n.length-i.length)===1){if(Lh(i))return 1;if(Lh(n))return-1}return n.length-i.length}function Lh(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const Kx={strict:!1,end:!0,sensitive:!1};function Gx(t,e,s){const i=Wx(zx(t.path),s),n=rt(i,{record:t,parent:e,children:[],alias:[]});return e&&!n.record.aliasOf==!e.record.aliasOf&&e.children.push(n),n}function Jx(t,e){const s=[],i=new Map;e=Vh(Kx,e);function n(f){return i.get(f)}function o(f,h,m){const w=!m,p=Rh(f);p.aliasOf=m&&m.record;const C=Vh(e,f),V=[p];if("alias"in f){const H=typeof f.alias=="string"?[f.alias]:f.alias;for(const j of H)V.push(Rh(rt({},p,{components:m?m.record.components:p.components,path:j,aliasOf:m?m.record:p})))}let U,B;for(const H of V){const{path:j}=H;if(h&&j[0]!=="/"){const T=h.record.path,A=T[T.length-1]==="/"?"":"/";H.path=h.record.path+(j&&A+j)}if(U=Gx(H,h,C),m?m.alias.push(U):(B=B||U,B!==U&&B.alias.push(U),w&&f.name&&!Bh(U)&&r(f.name)),a0(U)&&a(U),p.children){const T=p.children;for(let A=0;A<T.length;A++)o(T[A],U,m&&m.children[A])}m=m||U}return B?()=>{r(B)}:or}function r(f){if(n0(f)){const h=i.get(f);h&&(i.delete(f),s.splice(s.indexOf(h),1),h.children.forEach(r),h.alias.forEach(r))}else{const h=s.indexOf(f);h>-1&&(s.splice(h,1),f.record.name&&i.delete(f.record.name),f.children.forEach(r),f.alias.forEach(r))}}function l(){return s}function a(f){const h=Xx(f,s);s.splice(h,0,f),f.record.name&&!Bh(f)&&i.set(f.record.name,f)}function d(f,h){let m,w={},p,C;if("name"in f&&f.name){if(m=i.get(f.name),!m)throw yo(Mt.MATCHER_NOT_FOUND,{location:f});C=m.record.name,w=rt(jh(h.params,m.keys.filter(B=>!B.optional).concat(m.parent?m.parent.keys.filter(B=>B.optional):[]).map(B=>B.name)),f.params&&jh(f.params,m.keys.map(B=>B.name))),p=m.stringify(w)}else if(f.path!=null)p=f.path,m=s.find(B=>B.re.test(p)),m&&(w=m.parse(p),C=m.record.name);else{if(m=h.name?i.get(h.name):s.find(B=>B.re.test(h.path)),!m)throw yo(Mt.MATCHER_NOT_FOUND,{location:f,currentLocation:h});C=m.record.name,w=rt({},h.params,f.params),p=m.stringify(w)}const V=[];let U=m;for(;U;)V.unshift(U.record),U=U.parent;return{name:C,path:p,params:w,matched:V,meta:Qx(V)}}t.forEach(f=>o(f));function u(){s.length=0,i.clear()}return{addRoute:o,resolve:d,removeRoute:r,clearRoutes:u,getRoutes:l,getRecordMatcher:n}}function jh(t,e){const s={};for(const i of e)i in t&&(s[i]=t[i]);return s}function Rh(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:Yx(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function Yx(t){const e={},s=t.props||!1;if("component"in t)e.default=s;else for(const i in t.components)e[i]=typeof s=="object"?s[i]:s;return e}function Bh(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function Qx(t){return t.reduce((e,s)=>rt(e,s.meta),{})}function Xx(t,e){let s=0,i=e.length;for(;s!==i;){const o=s+i>>1;l0(t,e[o])<0?i=o:s=o+1}const n=Zx(t);return n&&(i=e.lastIndexOf(n,i-1)),i}function Zx(t){let e=t;for(;e=e.parent;)if(a0(e)&&l0(t,e)===0)return e}function a0({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function Ih(t){const e=Js(Fa),s=Js(Tc),i=ne(()=>{const a=at(t.to);return e.resolve(a)}),n=ne(()=>{const{matched:a}=i.value,{length:d}=a,u=a[d-1],f=s.matched;if(!u||!f.length)return-1;const h=f.findIndex(vo.bind(null,u));if(h>-1)return h;const m=Uh(a[d-2]);return d>1&&Uh(u)===m&&f[f.length-1].path!==m?f.findIndex(vo.bind(null,a[d-2])):h}),o=ne(()=>n.value>-1&&n2(s.params,i.value.params)),r=ne(()=>n.value>-1&&n.value===s.matched.length-1&&i0(s.params,i.value.params));function l(a={}){if(i2(a)){const d=e[at(t.replace)?"replace":"push"](at(t.to)).catch(or);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>d),d}return Promise.resolve()}return{route:i,href:ne(()=>i.value.href),isActive:o,isExactActive:r,navigate:l}}function e2(t){return t.length===1?t[0]:t}const t2=vg({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Ih,setup(t,{slots:e}){const s=qs(Ih(t)),{options:i}=Js(Fa),n=ne(()=>({[Nh(t.activeClass,i.linkActiveClass,"router-link-active")]:s.isActive,[Nh(t.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const o=e.default&&e2(e.default(s));return t.custom?o:Tt("a",{"aria-current":s.isExactActive?t.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:n.value},o)}}}),s2=t2;function i2(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function n2(t,e){for(const s in e){const i=e[s],n=t[s];if(typeof i=="string"){if(i!==n)return!1}else if(!Xs(n)||n.length!==i.length||i.some((o,r)=>o!==n[r]))return!1}return!0}function Uh(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Nh=(t,e,s)=>t??e??s,o2=vg({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:s}){const i=Js(hd),n=ne(()=>t.route||i.value),o=Js(Eh,0),r=ne(()=>{let d=at(o);const{matched:u}=n.value;let f;for(;(f=u[d])&&!f.components;)d++;return d}),l=ne(()=>n.value.matched[r.value]);Bl(Eh,ne(()=>r.value+1)),Bl(Ox,l),Bl(hd,n);const a=ae();return We(()=>[a.value,l.value,t.name],([d,u,f],[h,m,w])=>{u&&(u.instances[f]=d,m&&m!==u&&d&&d===h&&(u.leaveGuards.size||(u.leaveGuards=m.leaveGuards),u.updateGuards.size||(u.updateGuards=m.updateGuards))),d&&u&&(!m||!vo(u,m)||!h)&&(u.enterCallbacks[f]||[]).forEach(p=>p(d))},{flush:"post"}),()=>{const d=n.value,u=t.name,f=l.value,h=f&&f.components[u];if(!h)return zh(s.default,{Component:h,route:d});const m=f.props[u],w=m?m===!0?d.params:typeof m=="function"?m(d):m:null,C=Tt(h,rt({},w,e,{onVnodeUnmounted:V=>{V.component.isUnmounted&&(f.instances[u]=null)},ref:a}));return zh(s.default,{Component:C,route:d})||C}}});function zh(t,e){if(!t)return null;const s=t(e);return s.length===1?s[0]:s}const r2=o2;function l2(t){const e=Jx(t.routes,t),s=t.parseQuery||Tx,i=t.stringifyQuery||Th,n=t.history,o=Uo(),r=Uo(),l=Uo(),a=n1(Fi);let d=Fi;Jn&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=bu.bind(null,M=>""+M),f=bu.bind(null,px),h=bu.bind(null,wr);function m(M,Q){let G,be;return n0(M)?(G=e.getRecordMatcher(M),be=Q):be=M,e.addRoute(be,G)}function w(M){const Q=e.getRecordMatcher(M);Q&&e.removeRoute(Q)}function p(){return e.getRoutes().map(M=>M.record)}function C(M){return!!e.getRecordMatcher(M)}function V(M,Q){if(Q=rt({},Q||a.value),typeof M=="string"){const q=ku(s,M,Q.path),re=e.resolve({path:q.path},Q),D=n.createHref(q.fullPath);return rt(q,re,{params:h(re.params),hash:wr(q.hash),redirectedFrom:void 0,href:D})}let G;if(M.path!=null)G=rt({},M,{path:ku(s,M.path,Q.path).path});else{const q=rt({},M.params);for(const re in q)q[re]==null&&delete q[re];G=rt({},M,{params:f(q)}),Q.params=f(Q.params)}const be=e.resolve(G,Q),we=M.hash||"";be.params=u(h(be.params));const $=vx(i,rt({},M,{hash:cx(we),path:be.path})),L=n.createHref($);return rt({fullPath:$,hash:we,query:i===Th?Ex(M.query):M.query||{}},be,{redirectedFrom:void 0,href:L})}function U(M){return typeof M=="string"?ku(s,M,a.value.path):rt({},M)}function B(M,Q){if(d!==M)return yo(Mt.NAVIGATION_CANCELLED,{from:Q,to:M})}function H(M){return A(M)}function j(M){return H(rt(U(M),{replace:!0}))}function T(M,Q){const G=M.matched[M.matched.length-1];if(G&&G.redirect){const{redirect:be}=G;let we=typeof be=="function"?be(M,Q):be;return typeof we=="string"&&(we=we.includes("?")||we.includes("#")?we=U(we):{path:we},we.params={}),rt({query:M.query,hash:M.hash,params:we.path!=null?{}:M.params},we)}}function A(M,Q){const G=d=V(M),be=a.value,we=M.state,$=M.force,L=M.replace===!0,q=T(G,be);if(q)return A(rt(U(q),{state:typeof q=="object"?rt({},we,q.state):we,force:$,replace:L}),Q||G);const re=G;re.redirectedFrom=Q;let D;return!$&&yx(i,be,G)&&(D=yo(Mt.NAVIGATION_DUPLICATED,{to:re,from:be}),$e(be,be,!0,!1)),(D?Promise.resolve(D):me(re,be)).catch(oe=>Ai(oe)?Ai(oe,Mt.NAVIGATION_GUARD_REDIRECT)?oe:P(oe):se(oe,re,be)).then(oe=>{if(oe){if(Ai(oe,Mt.NAVIGATION_GUARD_REDIRECT))return A(rt({replace:L},U(oe.to),{state:typeof oe.to=="object"?rt({},we,oe.to.state):we,force:$}),Q||re)}else oe=F(re,be,!0,L,we);return le(re,be,oe),oe})}function Y(M,Q){const G=B(M,Q);return G?Promise.reject(G):Promise.resolve()}function te(M){const Q=J.values().next().value;return Q&&typeof Q.runWithContext=="function"?Q.runWithContext(M):M()}function me(M,Q){let G;const[be,we,$]=Px(M,Q);G=wu(be.reverse(),"beforeRouteLeave",M,Q);for(const q of be)q.leaveGuards.forEach(re=>{G.push(qi(re,M,Q))});const L=Y.bind(null,M,Q);return G.push(L),v(G).then(()=>{G=[];for(const q of o.list())G.push(qi(q,M,Q));return G.push(L),v(G)}).then(()=>{G=wu(we,"beforeRouteUpdate",M,Q);for(const q of we)q.updateGuards.forEach(re=>{G.push(qi(re,M,Q))});return G.push(L),v(G)}).then(()=>{G=[];for(const q of $)if(q.beforeEnter)if(Xs(q.beforeEnter))for(const re of q.beforeEnter)G.push(qi(re,M,Q));else G.push(qi(q.beforeEnter,M,Q));return G.push(L),v(G)}).then(()=>(M.matched.forEach(q=>q.enterCallbacks={}),G=wu($,"beforeRouteEnter",M,Q,te),G.push(L),v(G))).then(()=>{G=[];for(const q of r.list())G.push(qi(q,M,Q));return G.push(L),v(G)}).catch(q=>Ai(q,Mt.NAVIGATION_CANCELLED)?q:Promise.reject(q))}function le(M,Q,G){l.list().forEach(be=>te(()=>be(M,Q,G)))}function F(M,Q,G,be,we){const $=B(M,Q);if($)return $;const L=Q===Fi,q=Jn?history.state:{};G&&(be||L?n.replace(M.fullPath,rt({scroll:L&&q&&q.scroll},we)):n.push(M.fullPath,we)),a.value=M,$e(M,Q,G,L),P()}let ge;function ce(){ge||(ge=n.listen((M,Q,G)=>{if(!S.listening)return;const be=V(M),we=T(be,S.currentRoute.value);if(we){A(rt(we,{replace:!0,force:!0}),be).catch(or);return}d=be;const $=a.value;Jn&&Ax($h($.fullPath,G.delta),za()),me(be,$).catch(L=>Ai(L,Mt.NAVIGATION_ABORTED|Mt.NAVIGATION_CANCELLED)?L:Ai(L,Mt.NAVIGATION_GUARD_REDIRECT)?(A(rt(U(L.to),{force:!0}),be).then(q=>{Ai(q,Mt.NAVIGATION_ABORTED|Mt.NAVIGATION_DUPLICATED)&&!G.delta&&G.type===cd.pop&&n.go(-1,!1)}).catch(or),Promise.reject()):(G.delta&&n.go(-G.delta,!1),se(L,be,$))).then(L=>{L=L||F(be,$,!1),L&&(G.delta&&!Ai(L,Mt.NAVIGATION_CANCELLED)?n.go(-G.delta,!1):G.type===cd.pop&&Ai(L,Mt.NAVIGATION_ABORTED|Mt.NAVIGATION_DUPLICATED)&&n.go(-1,!1)),le(be,$,L)}).catch(or)}))}let de=Uo(),X=Uo(),Z;function se(M,Q,G){P(M);const be=X.list();return be.length?be.forEach(we=>we(M,Q,G)):console.error(M),Promise.reject(M)}function Pe(){return Z&&a.value!==Fi?Promise.resolve():new Promise((M,Q)=>{de.add([M,Q])})}function P(M){return Z||(Z=!M,ce(),de.list().forEach(([Q,G])=>M?G(M):Q()),de.reset()),M}function $e(M,Q,G,be){const{scrollBehavior:we}=t;if(!Jn||!we)return Promise.resolve();const $=!G&&Vx($h(M.fullPath,0))||(be||!G)&&history.state&&history.state.scroll||null;return Tn().then(()=>we(M,Q,$)).then(L=>L&&Cx(L)).catch(L=>se(L,M,Q))}const Ie=M=>n.go(M);let Qe;const J=new Set,S={currentRoute:a,listening:!0,addRoute:m,removeRoute:w,clearRoutes:e.clearRoutes,hasRoute:C,getRoutes:p,resolve:V,options:t,push:H,replace:j,go:Ie,back:()=>Ie(-1),forward:()=>Ie(1),beforeEach:o.add,beforeResolve:r.add,afterEach:l.add,onError:X.add,isReady:Pe,install(M){M.component("RouterLink",s2),M.component("RouterView",r2),M.config.globalProperties.$router=S,Object.defineProperty(M.config.globalProperties,"$route",{enumerable:!0,get:()=>at(a)}),Jn&&!Qe&&a.value===Fi&&(Qe=!0,H(n.location).catch(be=>{}));const Q={};for(const be in Fi)Object.defineProperty(Q,be,{get:()=>a.value[be],enumerable:!0});M.provide(Fa,S),M.provide(Tc,Zm(Q)),M.provide(hd,a);const G=M.unmount;J.add(M),M.unmount=function(){J.delete(M),J.size<1&&(d=Fi,ge&&ge(),ge=null,a.value=Fi,Qe=!1,Z=!1),G()}}};function v(M){return M.reduce((Q,G)=>Q.then(()=>te(G)),Promise.resolve())}return S}function Ha(){return Js(Fa)}function Do(t){return Js(Tc)}const Vi=ae(!1);function a2(){const t=()=>{Vi.value=!Vi.value},e=()=>{Vi.value=!0},s=()=>{Vi.value=!1};return We(Vi,i=>{i?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},{immediate:!1}),ns(()=>{const i=localStorage.getItem("theme");i?Vi.value=i==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches&&(Vi.value=!0),Vi.value?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}),{isDark:Vi,toggle:t,enable:e,disable:s}}function u2(t,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 13.5V3.75m0 9.75a1.5 1.5 0 0 1 0 3m0-3a1.5 1.5 0 0 0 0 3m0 3.75V16.5m12-3V3.75m0 9.75a1.5 1.5 0 0 1 0 3m0-3a1.5 1.5 0 0 0 0 3m0 3.75V16.5m-6-9V3.75m0 3.75a1.5 1.5 0 0 1 0 3m0-3a1.5 1.5 0 0 0 0 3m0 9.75V10.5"})])}function d2(t,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function c2(t,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})])}function f2(t,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125"})])}function Ec(t,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}function Oc(t,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"})])}function pd(t,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}function h2(t,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})])}function p2(t,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"})])}function m2(t,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}function aa(t,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"})])}function Wa(t,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"})])}function u0(t,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"})])}function g2(t,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})])}function Pc(t,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5.25 14.25h13.5m-13.5 0a3 3 0 0 1-3-3m3 3a3 3 0 1 0 0 6h13.5a3 3 0 1 0 0-6m-16.5-3a3 3 0 0 1 3-3h13.5a3 3 0 0 1 3 3m-19.5 0a4.5 4.5 0 0 1 .9-2.7L5.737 5.1a3.375 3.375 0 0 1 2.7-1.35h7.126c1.062 0 2.062.5 2.7 1.35l2.587 3.45a4.5 4.5 0 0 1 .9 2.7m0 0a3 3 0 0 1-3 3m0 3h.008v.008h-.008v-.008Zm0-6h.008v.008h-.008v-.008Zm-3 6h.008v.008h-.008v-.008Zm0-6h.008v.008h-.008v-.008Z"})])}function v2(t,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"})])}function y2(t,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}const b2={key:0,class:"pointer-events-auto w-full max-w-sm rounded-lg bg-white shadow-lg outline-1 outline-black/5 dark:bg-gray-800 dark:-outline-offset-1 dark:outline-white/10"},k2={class:"p-4"},x2={key:0,class:"shrink-0"},w2={key:0,class:"w-0 flex-1 text-sm font-medium text-gray-900 dark:text-white"},_2={class:"text-sm font-medium text-gray-900 dark:text-white"},S2={key:0,class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},C2={__name:"Toast",props:{title:{type:String,required:!0},description:{type:String,default:null},type:{type:String,default:"success",validator:t=>["success","error","warning","info"].includes(t)},variant:{type:String,default:"regular",validator:t=>["regular","condensed"].includes(t)},action:{type:String,default:null},duration:{type:Number,default:5e3},autoClose:{type:Boolean,default:!0}},emits:["close","action"],setup(t,{emit:e}){const s=t,i=e,n=ae(!1);let o=null;const r=ne(()=>{const d={success:d2,error:y2,warning:h2,info:Wa},u={success:"text-sky-400",error:"text-red-400",warning:"text-yellow-400",info:"text-blue-400"},f=d[s.type],h=u[s.type];return()=>Tt(f,{class:`size-6 ${h}`})}),l=()=>{n.value=!1,o&&clearTimeout(o),setTimeout(()=>i("close"),200)},a=()=>{i("action"),l()};return ns(()=>{n.value=!0,s.autoClose&&s.duration>0&&(o=setTimeout(l,s.duration))}),We(()=>s.duration,d=>{o&&clearTimeout(o),s.autoClose&&d>0&&(o=setTimeout(l,d))}),(d,u)=>(g(),pe(Dc,{"enter-active-class":"transform transition duration-300 ease-out","enter-from-class":"translate-y-2 opacity-0 sm:translate-x-2 sm:translate-y-0","enter-to-class":"translate-y-0 opacity-100 sm:translate-x-0","leave-active-class":"transition duration-200 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:R(()=>[n.value?(g(),b("div",b2,[c("div",k2,[c("div",{class:Ee(t.variant==="condensed"?"flex items-center":"flex items-start")},[t.variant==="regular"?(g(),b("div",x2,[(g(),pe(Ts(r.value),{class:"size-6"}))])):I("",!0),c("div",{class:Ee([t.variant==="regular"?"ml-3 w-0 flex-1 pt-0.5":"flex w-0 flex-1 justify-between"])},[t.variant==="condensed"?(g(),b("p",w2,z(t.title),1)):(g(),b(ee,{key:1},[c("p",_2,z(t.title),1),t.description?(g(),b("p",S2,z(t.description),1)):I("",!0)],64)),t.variant==="condensed"&&t.action?(g(),b("button",{key:2,type:"button",onClick:a,class:"ml-3 shrink-0 rounded-md bg-white text-sm font-medium text-sky-600 hover:text-sky-500 focus:outline-2 focus:outline-offset-2 focus:outline-sky-500 dark:bg-gray-800 dark:text-sky-400 dark:hover:text-sky-300 dark:focus:outline-sky-400"},z(t.action),1)):I("",!0)],2),c("div",{class:"ml-4 flex shrink-0"},[c("button",{type:"button",onClick:l,class:"inline-flex rounded-md text-gray-400 hover:text-gray-500 focus:outline-2 focus:outline-offset-2 focus:outline-sky-600 dark:hover:text-white dark:focus:outline-sky-500"},[...u[0]||(u[0]=[c("span",{class:"sr-only"},"Close",-1),c("svg",{viewBox:"0 0 20 20",fill:"currentColor",class:"size-5"},[c("path",{d:"M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z"})],-1)])])])],2)])])):I("",!0)]),_:1}))}},A2={"aria-live":"assertive",class:"pointer-events-none fixed inset-0 flex items-end px-4 py-6 sm:items-start sm:p-6 z-50"},V2={class:"flex w-full flex-col items-center space-y-4 sm:items-end"},M2={__name:"ToastContainer",setup(t,{expose:e}){const s=ae([]);let i=1;const n=a=>{const d={id:i++,title:a.title,description:a.description||null,type:a.type||"success",variant:a.variant||"regular",action:a.action||null,duration:a.duration!==void 0?a.duration:5e3,autoClose:a.autoClose!==void 0?a.autoClose:!0,onAction:a.onAction||null};return s.value.push(d),d.id},o=a=>{const d=s.value.findIndex(u=>u.id===a);d>-1&&s.value.splice(d,1)},r=a=>{a.onAction&&a.onAction()};return e({addToast:n,removeToast:o,clearAll:()=>{s.value=[]}}),(a,d)=>(g(),pe(dg,{to:"body"},[c("div",A2,[c("div",V2,[(g(!0),b(ee,null,ke(s.value,u=>(g(),pe(C2,{key:u.id,title:u.title,description:u.description,type:u.type,variant:u.variant,action:u.action,duration:u.duration,"auto-close":u.autoClose,onClose:f=>o(u.id),onAction:f=>r(u)},null,8,["title","description","type","variant","action","duration","auto-close","onClose","onAction"]))),128))])])]))}};let wn=null;function D2(t){wn=t}function qa(){const t=l=>{if(!wn){console.warn('ToastContainer not initialized. Add <ToastContainer ref="toastContainer" /> to your App.vue');return}return wn.addToast(l)};return{show:t,success:(l,a=null,d={})=>t({title:l,description:a,type:"success",...d}),error:(l,a=null,d={})=>t({title:l,description:a,type:"error",...d}),warning:(l,a=null,d={})=>t({title:l,description:a,type:"warning",...d}),info:(l,a=null,d={})=>t({title:l,description:a,type:"info",...d}),remove:l=>{wn&&wn.removeToast(l)},clearAll:()=>{wn&&wn.clearAll()}}}const $2={class:"flex min-h-screen bg-white dark:bg-zinc-900"},T2={class:"hidden lg:fixed lg:inset-y-0 lg:z-50 lg:flex lg:w-72 lg:flex-col xl:w-80"},E2={class:"flex grow flex-col overflow-y-auto border-r border-zinc-900/10 px-6 pb-8 pt-4 dark:border-white/10"},O2={key:0,class:"mt-6"},P2={class:"mt-10"},L2={role:"list"},j2={class:"relative mt-6"},R2={class:"relative mt-3 pl-2"},B2={role:"list",class:"border-l border-transparent"},I2={class:"truncate"},U2={key:0,class:"relative mt-6"},N2={class:"relative mt-3 pl-2"},z2={role:"list",class:"border-l border-transparent"},F2={class:"truncate"},H2={key:0,class:"text-xs text-zinc-400 dark:text-zinc-500"},W2={class:"sticky bottom-0 mt-6 border-t border-zinc-900/10 pt-6 dark:border-white/10"},q2={class:"lg:pl-72 xl:pl-80 w-full"},K2={class:"h-screen overflow-auto"},G2={__name:"App",setup(t){const e=ae(null),s=Do(),{isDark:i,toggle:n}=a2(),o=ae([]),r=h=>f.findIndex(w=>w.to==="/projects"&&s.path==="/projects/new"?!1:s.path.startsWith(w.to)),l=()=>o.value.findIndex(h=>s.path===`/project/${h.id}`),a=h=>h.to==="/projects"&&s.path==="/projects/new"?!1:s.path.startsWith(h.to),d=()=>Tt("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[Tt("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})]),u=()=>Tt("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[Tt("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})]),f=[{id:"projects",label:"Projects",to:"/projects"},{id:"settings",label:"New Project Defaults",to:"/settings"}];return ns(async()=>{D2(e.value);try{const m=await(await fetch("/api/settings/get")).json();o.value=m.projects||[]}catch(h){console.error("Failed to load projects:",h)}}),(h,m)=>{const w=ia("router-link"),p=ia("router-view");return g(),b("div",$2,[c("div",T2,[c("div",E2,[k(w,{to:"/",class:"flex items-center gap-3"},{default:R(()=>[...m[1]||(m[1]=[c("img",{src:ex,alt:"Framework",class:"h-10 w-10"},null,-1),c("span",{class:"text-lg font-semibold text-zinc-900 dark:text-white"},"Framework",-1)])]),_:1}),h.$route.path!=="/projects/new"?(g(),b("div",O2,[k(w,{to:"/projects/new",class:"flex w-full items-center justify-center gap-2 rounded-lg bg-white px-4 py-2.5 text-sm font-medium text-zinc-900 ring-1 ring-zinc-900/10 transition hover:bg-zinc-50 hover:ring-zinc-900/20 dark:bg-white/5 dark:text-white dark:ring-white/10 dark:hover:bg-white/10"},{default:R(()=>[...m[2]||(m[2]=[c("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),ie(" New Project ",-1)])]),_:1})])):I("",!0),c("nav",P2,[c("ul",L2,[c("li",j2,[m[4]||(m[4]=c("h2",{class:"text-xs font-semibold text-zinc-900 dark:text-white"}," Framework ",-1)),c("div",R2,[m[3]||(m[3]=c("div",{class:"absolute inset-y-0 left-2 w-px bg-zinc-900/10 dark:bg-white/5"},null,-1)),r()>=0?(g(),b("div",{key:0,class:"absolute left-2 h-6 w-px bg-sky-500 transition-all duration-200",style:hr({top:`${r()*32+4}px`})},null,4)):I("",!0),c("ul",B2,[(g(),b(ee,null,ke(f,C=>c("li",{key:C.id,class:"relative"},[k(w,{to:C.to,class:Ee(["flex justify-between gap-2 py-1 pl-4 pr-3 text-sm transition",a(C)?"text-zinc-900 dark:text-white":"text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white"])},{default:R(()=>[c("span",I2,z(C.label),1)]),_:2},1032,["to","class"])])),64))])])]),o.value.length>0?(g(),b("li",U2,[m[6]||(m[6]=c("h2",{class:"text-xs font-semibold text-zinc-900 dark:text-white"}," Your Projects ",-1)),c("div",N2,[m[5]||(m[5]=c("div",{class:"absolute inset-y-0 left-2 w-px bg-zinc-900/10 dark:bg-white/5"},null,-1)),l()>=0?(g(),b("div",{key:0,class:"absolute left-2 h-6 w-px bg-sky-500 transition-all duration-200",style:hr({top:`${l()*32+4}px`})},null,4)):I("",!0),c("ul",z2,[(g(!0),b(ee,null,ke(o.value,C=>(g(),b("li",{key:C.id,class:"relative"},[k(w,{to:`/project/${C.id}`,class:Ee(["flex justify-between gap-2 py-1 pl-4 pr-3 text-sm transition",h.$route.path===`/project/${C.id}`?"text-zinc-900 dark:text-white":"text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white"])},{default:R(()=>[c("span",F2,z(C.name),1),C.type?(g(),b("span",H2,z(C.type==="project"?"":C.type==="course"?"":""),1)):I("",!0)]),_:2},1032,["to","class"])]))),128))])])])):I("",!0),c("li",W2,[c("button",{onClick:m[0]||(m[0]=(...C)=>at(n)&&at(n)(...C)),class:"flex w-full items-center gap-3 text-sm text-zinc-600 transition hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white"},[(g(),pe(Ts(at(i)?u:d),{class:"h-5 w-5 shrink-0"})),ie(" "+z(at(i)?"Light Mode":"Dark Mode"),1)])])])])])]),c("div",q2,[c("main",K2,[k(p)])]),k(M2,{ref_key:"toastContainer",ref:e},null,512)])}}},J2={key:0,class:"flex items-center justify-center py-12"},Y2={key:1,class:"max-w-4xl prose prose-slate dark:prose-invert"},Q2={class:"not-prose mb-8"},X2={class:"flex items-center gap-3 mb-2"},Z2={class:"px-3 py-1 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded text-sm font-medium"},ew={class:"text-4xl font-bold text-slate-900 dark:text-white mb-4"},tw={class:"text-lg text-slate-600 dark:text-slate-400"},sw={class:"not-prose mb-8"},iw={class:"bg-slate-900 dark:bg-slate-950 rounded-lg p-4 overflow-x-auto"},nw={class:"text-sm text-slate-100"},ow={key:0,class:"not-prose mb-8"},rw={class:"space-y-4"},lw={class:"flex items-baseline gap-2 mb-1"},aw={class:"text-base font-mono font-semibold text-slate-900 dark:text-white"},uw={class:"text-sm text-slate-500 dark:text-slate-400"},dw={key:0,class:"text-xs text-red-600 dark:text-red-400 font-medium"},cw={key:1,class:"text-xs text-slate-500 dark:text-slate-400"},fw={class:"text-sm text-slate-600 dark:text-slate-400"},hw={class:"not-prose mb-8"},pw={class:"text-slate-700 dark:text-slate-300"},mw={key:1,class:"not-prose mb-8"},gw={class:"text-slate-700 dark:text-slate-300 whitespace-pre-line"},vw={key:2,class:"not-prose mb-8"},yw={class:"space-y-6"},bw={class:"bg-slate-900 dark:bg-slate-950 rounded-lg p-4 overflow-x-auto mb-2"},kw={class:"text-sm text-slate-100"},xw={class:"text-sm text-slate-600 dark:text-slate-400"},ww={key:3,class:"not-prose mb-8"},_w={class:"space-y-2"},Sw={class:"text-indigo-600 dark:text-indigo-400 font-mono font-semibold"},Cw={class:"text-slate-700 dark:text-slate-300"},Aw={key:4,class:"not-prose mb-8"},Vw={class:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4"},Mw={class:"list-disc list-inside space-y-1 text-sm text-amber-800 dark:text-amber-300"},Dw={key:5,class:"not-prose"},$w={class:"flex items-center gap-2 flex-wrap"},Tw={key:2,class:"text-center py-12"},Ew={__name:"DocViewer",props:{functionName:{type:String,required:!0}},setup(t){const e=t,s=ae(null),i=ae(!0),n=async()=>{i.value=!0;try{const o=await fetch(`/docs/${e.functionName}.json`);o.ok?s.value=await o.json():s.value=null}catch(o){console.error("Failed to load documentation:",o),s.value=null}finally{i.value=!1}};return We(()=>e.functionName,n),ns(n),(o,r)=>i.value?(g(),b("div",J2,[...r[0]||(r[0]=[c("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"},null,-1)])])):s.value?(g(),b("div",Y2,[c("div",Q2,[c("div",X2,[c("span",Z2,z(s.value.category),1)]),c("h1",ew,z(s.value.title),1),c("p",tw,z(s.value.description),1)]),c("div",sw,[r[1]||(r[1]=c("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white mb-4"},"Usage",-1)),c("div",iw,[c("pre",nw,[c("code",null,z(s.value.usage),1)])])]),s.value.params&&s.value.params.length>0?(g(),b("div",ow,[r[3]||(r[3]=c("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white mb-4"},"Parameters",-1)),c("div",rw,[(g(!0),b(ee,null,ke(s.value.params,l=>(g(),b("div",{key:l.name,class:"border-l-4 border-indigo-500 pl-4"},[c("div",lw,[c("code",aw,z(l.name),1),c("span",uw,z(l.type),1),l.required?(g(),b("span",dw," required ")):I("",!0),l.default?(g(),b("span",cw,[r[2]||(r[2]=ie(" default: ",-1)),c("code",null,z(l.default),1)])):I("",!0)]),c("p",fw,z(l.description),1)]))),128))])])):I("",!0),c("div",hw,[r[4]||(r[4]=c("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white mb-4"},"Returns",-1)),c("p",pw,z(s.value.returns),1)]),s.value.details?(g(),b("div",mw,[r[5]||(r[5]=c("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white mb-4"},"Details",-1)),c("div",gw,z(s.value.details),1)])):I("",!0),s.value.examples&&s.value.examples.length>0?(g(),b("div",vw,[r[6]||(r[6]=c("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white mb-4"},"Examples",-1)),c("div",yw,[(g(!0),b(ee,null,ke(s.value.examples,(l,a)=>(g(),b("div",{key:a},[c("div",bw,[c("pre",kw,[c("code",null,z(l.code),1)])]),c("p",xw,z(l.description),1)]))),128))])])):I("",!0),s.value.see_also&&s.value.see_also.length>0?(g(),b("div",ww,[r[7]||(r[7]=c("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white mb-4"},"See Also",-1)),c("ul",_w,[(g(!0),b(ee,null,ke(s.value.see_also,l=>(g(),b("li",{key:l.name},[c("code",Sw,z(l.name)+"() ",1),c("span",Cw," - "+z(l.description),1)]))),128))])])):I("",!0),s.value.notes&&s.value.notes.length>0?(g(),b("div",Aw,[c("div",Vw,[r[8]||(r[8]=c("h3",{class:"text-lg font-semibold text-amber-900 dark:text-amber-200 mb-2"},"Notes",-1)),c("ul",Mw,[(g(!0),b(ee,null,ke(s.value.notes,(l,a)=>(g(),b("li",{key:a},z(l),1))),128))])])])):I("",!0),s.value.tags&&s.value.tags.length>0?(g(),b("div",Dw,[c("div",$w,[r[9]||(r[9]=c("span",{class:"text-sm text-slate-500 dark:text-slate-400"},"Tags:",-1)),(g(!0),b(ee,null,ke(s.value.tags,l=>(g(),b("span",{key:l,class:"px-2 py-1 bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 rounded text-xs"},z(l),1))),128))])])):I("",!0)])):(g(),b("div",Tw,[...r[10]||(r[10]=[c("p",{class:"text-slate-600 dark:text-slate-400"},"Documentation not found.",-1)])]))}},Ow={class:"flex h-full"},Pw={class:"w-64 flex-shrink-0 border-r border-zinc-900/10 dark:border-white/10 overflow-y-auto"},Lw={class:"p-4"},jw={class:"mt-3 space-y-1"},Rw={class:"mt-3 space-y-1"},Bw={class:"mt-3 space-y-1"},Iw={class:"flex-1 overflow-y-auto"},Uw={key:1,class:"flex h-full items-center justify-center p-8"},Fh={__name:"DocsView",setup(t){const e=Do(),s=ne(()=>e.params.functionName),i=[{name:"scaffold",title:"scaffold()"}],n=[{name:"data_load",title:"data_load()"}],o=[{name:"cache_get",title:"cache_get()"}];return(r,l)=>{const a=ia("router-link");return g(),b("div",Ow,[c("div",Pw,[c("div",Lw,[l[0]||(l[0]=c("h2",{class:"text-xs font-semibold uppercase tracking-wide text-zinc-500 dark:text-zinc-400"}," Core Functions ",-1)),c("ul",jw,[(g(),b(ee,null,ke(i,d=>c("li",{key:d.name},[k(a,{to:`/docs/${d.name}`,class:Ee(["block rounded-md px-3 py-2 text-sm font-medium hover:bg-zinc-50 dark:hover:bg-zinc-800",s.value===d.name?"bg-sky-50 text-sky-600 dark:bg-sky-400/10 dark:text-sky-400":"text-zinc-700 dark:text-zinc-300"])},{default:R(()=>[ie(z(d.title),1)]),_:2},1032,["to","class"])])),64))]),l[1]||(l[1]=c("h2",{class:"mt-6 text-xs font-semibold uppercase tracking-wide text-zinc-500 dark:text-zinc-400"}," Data Functions ",-1)),c("ul",Rw,[(g(),b(ee,null,ke(n,d=>c("li",{key:d.name},[k(a,{to:`/docs/${d.name}`,class:Ee(["block rounded-md px-3 py-2 text-sm font-medium hover:bg-zinc-50 dark:hover:bg-zinc-800",s.value===d.name?"bg-sky-50 text-sky-600 dark:bg-sky-400/10 dark:text-sky-400":"text-zinc-700 dark:text-zinc-300"])},{default:R(()=>[ie(z(d.title),1)]),_:2},1032,["to","class"])])),64))]),l[2]||(l[2]=c("h2",{class:"mt-6 text-xs font-semibold uppercase tracking-wide text-zinc-500 dark:text-zinc-400"}," Cache Functions ",-1)),c("ul",Bw,[(g(),b(ee,null,ke(o,d=>c("li",{key:d.name},[k(a,{to:`/docs/${d.name}`,class:Ee(["block rounded-md px-3 py-2 text-sm font-medium hover:bg-zinc-50 dark:hover:bg-zinc-800",s.value===d.name?"bg-sky-50 text-sky-600 dark:bg-sky-400/10 dark:text-sky-400":"text-zinc-700 dark:text-zinc-300"])},{default:R(()=>[ie(z(d.title),1)]),_:2},1032,["to","class"])])),64))])])]),c("div",Iw,[s.value?(g(),pe(Ew,{key:0,functionName:s.value},null,8,["functionName"])):(g(),b("div",Uw,[...l[3]||(l[3]=[c("div",{class:"text-center"},[c("h2",{class:"text-2xl font-bold text-zinc-900 dark:text-white"},"Framework Documentation"),c("p",{class:"mt-2 text-zinc-600 dark:text-zinc-400"}," Select a function from the sidebar to view its documentation. ")],-1)])]))])])}}},Nw={key:0,class:"px-4 py-5 sm:px-6"},zw={class:"px-4 py-5 sm:p-6"},Fw={key:1,class:"px-4 py-4 sm:px-6"},Hw={__name:"Card",setup(t){const e=$1(),s=ne(()=>{const i=["overflow-hidden","rounded-lg","bg-white","shadow-sm","dark:bg-gray-800/50","dark:shadow-none","dark:outline","dark:-outline-offset-1","dark:outline-white/10"];return(e.header||e.footer)&&i.push("divide-y","divide-gray-200","dark:divide-white/10"),i.join(" ")});return(i,n)=>(g(),b("div",{class:Ee(s.value)},[i.$slots.header?(g(),b("div",Nw,[vt(i.$slots,"header")])):I("",!0),c("div",zw,[vt(i.$slots,"default")]),i.$slots.footer?(g(),b("div",Fw,[vt(i.$slots,"footer")])):I("",!0)],2))}},ze={__name:"Button",props:{variant:{type:String,default:"primary",validator:t=>["primary","secondary","soft"].includes(t)},size:{type:String,default:"md",validator:t=>["xs","sm","md","lg","xl"].includes(t)},rounded:{type:String,default:"md",validator:t=>["sm","md","full"].includes(t)},type:{type:String,default:"button"},href:{type:String,default:null},icon:{type:[Object,Function],default:null},iconPosition:{type:String,default:"left",validator:t=>["left","right"].includes(t)},iconOnly:{type:Boolean,default:!1}},emits:["click"],setup(t,{emit:e}){const s=t,i=e,n=l=>{i("click",l)},o=ne(()=>{const l=["font-semibold","focus-visible:outline-2","focus-visible:outline-offset-2"],a={xs:s.iconOnly?"p-2":"px-3 py-2 text-xs",sm:s.iconOnly?"p-2.5":"px-3 py-2 text-sm",md:s.iconOnly?"p-3":"px-3.5 py-2.5 text-sm",lg:s.iconOnly?"p-3":"px-4 py-3 text-sm",xl:s.iconOnly?"p-3.5":"px-4.5 py-3.5 text-sm"};l.push(a[s.size]);const d={sm:"rounded-sm",md:"rounded-md",full:"rounded-full"};return l.push(d[s.rounded]),s.variant==="primary"?l.push("bg-sky-600","text-white","shadow-xs","hover:bg-sky-500","focus-visible:outline-sky-600","dark:bg-sky-500","dark:shadow-none","dark:hover:bg-sky-400","dark:focus-visible:outline-sky-500"):s.variant==="secondary"?l.push("bg-white","text-gray-900","shadow-xs","inset-ring","inset-ring-gray-300","hover:bg-gray-50","dark:bg-white/10","dark:text-white","dark:shadow-none","dark:inset-ring-white/5","dark:hover:bg-white/20"):s.variant==="soft"&&l.push("bg-sky-50","text-sky-600","shadow-xs","hover:bg-sky-100","dark:bg-sky-500/20","dark:text-sky-400","dark:shadow-none","dark:hover:bg-sky-500/30"),s.icon&&!s.iconOnly&&(l.push("inline-flex","items-center"),l.push(s.size==="xl"?"gap-x-2":"gap-x-1.5")),l.join(" ")}),r=ne(()=>{const l=[];return s.iconOnly?l.push("size-5"):(l.push("size-5"),s.iconPosition==="left"?l.push("-ml-0.5"):l.push("-mr-0.5")),l.join(" ")});return(l,a)=>(g(),pe(Ts(t.href?"a":"button"),{href:t.href,type:t.href?void 0:t.type,class:Ee(o.value),onClick:n},{default:R(()=>[t.icon&&t.iconPosition==="left"?(g(),b("svg",{key:0,viewBox:"0 0 20 20",fill:"currentColor","data-slot":"icon","aria-hidden":"true",class:Ee(r.value)},[(g(),pe(Ts(t.icon)))],2)):I("",!0),vt(l.$slots,"default"),t.icon&&t.iconPosition==="right"?(g(),b("svg",{key:1,viewBox:"0 0 20 20",fill:"currentColor","data-slot":"icon","aria-hidden":"true",class:Ee(r.value)},[(g(),pe(Ts(t.icon)))],2)):I("",!0)]),_:3},8,["href","type","class"]))}},Ww=["for"],qw={key:1,class:"mt-2 flex"},Kw={class:"flex shrink-0 items-center rounded-l-md bg-gray-100 px-2 text-base text-gray-500 outline-1 -outline-offset-1 outline-gray-300 sm:text-sm/6 dark:bg-white/5 dark:text-gray-400 dark:outline-white/10 font-mono"},Gw=["id","type","value","placeholder","required","disabled","aria-invalid","aria-describedby"],Jw={key:2,class:"mt-2"},Yw=["id","type","value","placeholder","required","disabled","aria-invalid","aria-describedby"],Qw={key:0,viewBox:"0 0 16 16",fill:"currentColor","data-slot":"icon","aria-hidden":"true",class:"pointer-events-none col-start-1 row-start-1 mr-3 size-5 self-center justify-self-end text-red-500 sm:size-4 dark:text-red-400"},Xw=["id"],Zw=["id"],W={__name:"Input",props:{id:{type:String,default:()=>`input-${Math.random().toString(36).substr(2,9)}`},modelValue:{type:[String,Number],default:""},type:{type:String,default:"text"},label:{type:String,default:null},placeholder:{type:String,default:""},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},error:{type:String,default:null},hint:{type:String,default:null},monospace:{type:Boolean,default:!1},prefix:{type:String,default:null}},emits:["update:modelValue","blur"],setup(t){const e=t,s=ne(()=>{const n=["block","w-full","rounded-md","bg-white","px-3","py-1.5","text-base","outline-1","-outline-offset-1","placeholder:text-gray-400","focus:outline-2","focus:-outline-offset-2","sm:text-sm/6","dark:bg-white/5","dark:placeholder:text-gray-500"];return e.monospace&&n.push("font-mono"),e.error?n.push("col-start-1","row-start-1","pr-10","pl-3","text-red-900","outline-red-300","placeholder:text-red-300","focus:outline-red-600","sm:pr-9","dark:text-red-400","dark:outline-red-500/50","dark:placeholder:text-red-400/70","dark:focus:outline-red-400"):n.push("text-gray-900","outline-gray-300","focus:outline-sky-600","dark:text-white","dark:outline-white/10","dark:focus:outline-sky-500"),n.join(" ")}),i=ne(()=>{const n=["-ml-px","block","w-full","grow","rounded-r-md","bg-white","px-3","py-1.5","text-base","outline-1","-outline-offset-1","placeholder:text-gray-400","focus:outline-2","focus:-outline-offset-2","sm:text-sm/6","dark:bg-white/5","dark:placeholder:text-gray-500"];return e.monospace&&n.push("font-mono"),e.error?n.push("text-red-900","outline-red-300","placeholder:text-red-300","focus:outline-red-600","dark:text-red-400","dark:outline-red-500/50","dark:placeholder:text-red-400/70","dark:focus:outline-red-400"):n.push("text-gray-900","outline-gray-300","focus:outline-sky-600","dark:text-white","dark:outline-white/10","dark:focus:outline-sky-500"),n.join(" ")});return(n,o)=>(g(),b("div",null,[t.label?(g(),b("label",{key:0,for:t.id,class:"block text-sm/6 font-medium text-gray-900 dark:text-white"},z(t.label),9,Ww)):I("",!0),t.prefix?(g(),b("div",qw,[c("div",Kw,z(t.prefix),1),c("input",{id:t.id,type:t.type,value:t.modelValue,placeholder:t.placeholder,required:t.required,disabled:t.disabled,"aria-invalid":t.error?"true":void 0,"aria-describedby":t.error?`${t.id}-error`:t.hint?`${t.id}-description`:void 0,onInput:o[0]||(o[0]=r=>n.$emit("update:modelValue",r.target.value)),onBlur:o[1]||(o[1]=r=>n.$emit("blur",r)),class:Ee(i.value)},null,42,Gw)])):(g(),b("div",Jw,[c("input",{id:t.id,type:t.type,value:t.modelValue,placeholder:t.placeholder,required:t.required,disabled:t.disabled,"aria-invalid":t.error?"true":void 0,"aria-describedby":t.error?`${t.id}-error`:t.hint?`${t.id}-description`:void 0,onInput:o[2]||(o[2]=r=>n.$emit("update:modelValue",r.target.value)),onBlur:o[3]||(o[3]=r=>n.$emit("blur",r)),class:Ee(s.value)},null,42,Yw),t.error?(g(),b("svg",Qw,[...o[4]||(o[4]=[c("path",{d:"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14ZM8 4a.75.75 0 0 1 .75.75v3a.75.75 0 0 1-1.5 0v-3A.75.75 0 0 1 8 4Zm0 8a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z","clip-rule":"evenodd","fill-rule":"evenodd"},null,-1)])])):I("",!0)])),t.error?(g(),b("p",{key:3,id:`${t.id}-error`,class:"mt-2 text-sm text-red-600 dark:text-red-400"},z(t.error),9,Xw)):I("",!0),t.hint&&!t.error?(g(),b("p",{key:4,id:`${t.id}-description`,class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},z(t.hint),9,Zw)):I("",!0)]))}},e_={class:"flex gap-3"},t_={class:"flex h-6 shrink-0 items-center"},s_={class:"group grid size-4 grid-cols-1"},i_=["id","name","checked","aria-describedby"],n_={class:"text-sm/6"},o_=["for"],r_=["id"],gi={__name:"Checkbox",props:{id:{type:String,required:!0},name:{type:String,default:null},modelValue:{type:Boolean,default:!1},description:{type:String,default:null}},emits:["update:modelValue"],setup(t){return(e,s)=>(g(),b("div",e_,[c("div",t_,[c("div",s_,[c("input",{id:t.id,type:"checkbox",name:t.name,checked:t.modelValue,"aria-describedby":t.description?`${t.id}-description`:void 0,onChange:s[0]||(s[0]=i=>e.$emit("update:modelValue",i.target.checked)),class:"col-start-1 row-start-1 appearance-none rounded-sm border border-gray-300 bg-white checked:border-sky-600 checked:bg-sky-600 indeterminate:border-sky-600 indeterminate:bg-sky-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:checked:bg-gray-100 dark:border-white/10 dark:bg-white/5 dark:checked:border-sky-500 dark:checked:bg-sky-500 dark:indeterminate:border-sky-500 dark:indeterminate:bg-sky-500 dark:focus-visible:outline-sky-500 dark:disabled:border-white/5 dark:disabled:bg-white/10 dark:disabled:checked:bg-white/10 forced-colors:appearance-auto"},null,40,i_),s[1]||(s[1]=c("svg",{viewBox:"0 0 14 14",fill:"none",class:"pointer-events-none col-start-1 row-start-1 size-3.5 self-center justify-self-center stroke-white group-has-disabled:stroke-gray-950/25 dark:group-has-disabled:stroke-white/25"},[c("path",{d:"M3 8L6 11L11 3.5","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"opacity-0 group-has-checked:opacity-100"}),c("path",{d:"M3 7H11","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"opacity-0 group-has-indeterminate:opacity-100"})],-1))])]),c("div",n_,[c("label",{for:t.id,class:"font-medium text-gray-900 dark:text-white"},[vt(e.$slots,"default")],8,o_),t.description?(g(),b("p",{key:0,id:`${t.id}-description`,class:"text-gray-500 dark:text-gray-400"},z(t.description),9,r_)):I("",!0)])]))}};function l_(t,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z","clip-rule":"evenodd"})])}function a_(t,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"fill-rule":"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z","clip-rule":"evenodd"})])}function u_(t,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 0 1 .67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 1 1-.671-1.34l.041-.022ZM12 9a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z","clip-rule":"evenodd"})])}function d_(t,e){return g(),b("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-1.72 6.97a.75.75 0 1 0-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 1 0 1.06 1.06L12 13.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L13.06 12l1.72-1.72a.75.75 0 1 0-1.06-1.06L12 10.94l-1.72-1.72Z","clip-rule":"evenodd"})])}const c_={class:"flex gap-3"},f_={class:"flex-1"},Ps={__name:"Alert",props:{type:{type:String,default:"info",validator:t=>["success","error","warning","info"].includes(t)},title:{type:String,default:null},description:{type:String,default:null},dismissible:{type:Boolean,default:!1}},emits:["dismiss"],setup(t,{emit:e}){const s=t,i=e,n={success:{container:"bg-sky-50 dark:bg-sky-900/20 inset-ring inset-ring-sky-200 dark:inset-ring-sky-800",icon:"text-sky-600 dark:text-sky-400",title:"text-sky-800 dark:text-sky-200",description:"text-sky-700 dark:text-sky-300",dismiss:"text-sky-600 hover:text-sky-700 dark:text-sky-400 dark:hover:text-sky-300"},error:{container:"bg-red-50 dark:bg-red-900/20 inset-ring inset-ring-red-200 dark:inset-ring-red-800",icon:"text-red-600 dark:text-red-400",title:"text-red-800 dark:text-red-200",description:"text-red-700 dark:text-red-300",dismiss:"text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300"},warning:{container:"bg-yellow-50 dark:bg-yellow-900/20 inset-ring inset-ring-yellow-200 dark:inset-ring-yellow-800",icon:"text-yellow-600 dark:text-yellow-400",title:"text-yellow-800 dark:text-yellow-200",description:"text-yellow-700 dark:text-yellow-300",dismiss:"text-yellow-600 hover:text-yellow-700 dark:text-yellow-400 dark:hover:text-yellow-300"},info:{container:"bg-blue-50 dark:bg-blue-900/20 inset-ring inset-ring-blue-200 dark:inset-ring-blue-800",icon:"text-blue-600 dark:text-blue-400",title:"text-blue-800 dark:text-blue-200",description:"text-blue-700 dark:text-blue-300",dismiss:"text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300"}},o=ne(()=>`rounded-lg p-4 ${n[s.type].container}`),r=ne(()=>`text-sm font-medium ${n[s.type].title}`),l=ne(()=>{const f=[`text-sm ${n[s.type].description}`];return s.title&&f.push("mt-1"),f.join(" ")}),a=ne(()=>`rounded-md p-1 ${n[s.type].dismiss} focus:outline-2 focus:outline-offset-2`),d=ne(()=>({success:l_,error:d_,warning:a_,info:u_})[s.type]),u=()=>{i("dismiss")};return(f,h)=>(g(),b("div",{class:Ee(o.value),role:"alert"},[c("div",c_,[(g(),pe(Ts(d.value),{class:Ee(["h-5 w-5 shrink-0",n[t.type].icon])},null,8,["class"])),c("div",f_,[t.title?(g(),b("p",{key:0,class:Ee(r.value)},z(t.title),3)):I("",!0),t.description||f.$slots.default?(g(),b("p",{key:1,class:Ee(l.value)},[vt(f.$slots,"default",{},()=>[ie(z(t.description),1)])],2)):I("",!0)]),t.dismissible?(g(),b("button",{key:0,type:"button",onClick:u,class:Ee(a.value)},[...h[0]||(h[0]=[c("span",{class:"sr-only"},"Dismiss",-1),c("svg",{viewBox:"0 0 20 20",fill:"currentColor",class:"size-5"},[c("path",{d:"M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z"})],-1)])],2)):I("",!0)])],2))}},h_={class:"flex items-center justify-between"},p_={class:"space-y-6"},m_={key:0,class:"text-xs text-gray-500 dark:text-gray-400 space-y-1"},g_={key:0},v_={class:"font-mono"},y_={key:1},b_={class:"font-mono"},k_={class:"space-y-2"},x_=["onClick"],w_={class:"flex items-start gap-3"},__={class:"text-2xl mt-0.5"},S_={class:"flex-1"},C_={class:"font-semibold text-gray-900 dark:text-white"},A_={class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},V_={key:0,class:"text-sky-600 dark:text-sky-400"},M_={key:1,class:"bg-gray-50 dark:bg-gray-800/50 rounded-lg p-4"},D_={class:"space-y-3"},$_={class:"list-decimal list-inside mt-1 space-y-1"},T_={class:"flex items-center justify-end gap-3"},E_={__name:"ProjectWizard",props:{mode:{type:String,default:"modal",validator:t=>["modal","page"].includes(t)},projectsRoot:{type:String,default:""}},emits:["close","created"],setup(t,{emit:e}){const s=t,i=e,n=ne(()=>s.mode==="modal"),o=ne(()=>(s.projectsRoot||"").trim()),r=T=>/^([A-Za-z]:[\\/]|\\\\|\/|~)/.test(T),l=(T,A)=>{if(!T)return A;const Y=A.replace(/^[\\/]+/,"");if(!Y)return T;if(T.endsWith("/")||T.endsWith("\\"))return`${T}${Y}`;const te=T.includes("\\")&&!T.includes("/")?"\\":"/";return`${T}${te}${Y}`},a=ne(()=>n.value?"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4":"flex w-full justify-center"),d=ne(()=>n.value?"max-w-2xl w-full max-h-[90vh] overflow-y-auto":"w-full max-w-2xl shadow-xl"),u=qs({directory:"",name:"",type:"project",sensitive:!1,use_git:!0,use_renv:!1,attach_defaults:!0}),f=ne(()=>{const T=u.directory.trim();return T?r(T)||!o.value?T:l(o.value,T):o.value||""}),h=ne(()=>{const T=u.directory.trim();return T?o.value.length>0||r(T):!1}),m=ne(()=>o.value?`Folder will be created inside ${o.value}`:"The directory where your project will be created"),w=ne(()=>o.value?"analytics-project":"my-analysis"),p=[{id:"project",title:"Data Analysis",description:"Full-featured project with notebooks, scripts, data management, and results tracking",icon:""},{id:"course",title:"Course Materials",description:"Teaching materials with slides, assignments, and course documentation",icon:""},{id:"presentation",title:"Presentation",description:"Single talk or presentation with minimal structure",icon:""}],C=ae(!1),V=ae(""),U=ae(!1),B=()=>{n.value&&i("close")},H=()=>{!u.name&&u.directory&&(u.name=u.directory.split(/[-_]/).map(T=>T.charAt(0).toUpperCase()+T.slice(1)).join(" "))},j=async()=>{V.value="",U.value=!1,C.value=!0;try{const T=f.value||u.directory,A=await fetch("/api/project/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_dir:T,project_name:u.name||u.directory,type:u.type,sensitive:u.sensitive,use_git:u.use_git,use_renv:u.use_renv,attach_defaults:u.attach_defaults})}),Y=await A.json();A.ok&&Y.success?(U.value=!0,Y&&!Y.path&&(Y.path=T),i("created",Y),n.value&&setTimeout(()=>{i("close")},3e3)):V.value=Y.error||"Failed to create project"}catch(T){V.value="Network error: "+T.message}finally{C.value=!1}};return(T,A)=>(g(),b("div",{class:Ee(a.value),onClick:Ut(B,["self"])},[k(Hw,{class:Ee(d.value)},{header:R(()=>[c("div",h_,[A[9]||(A[9]=c("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Create New Project",-1)),n.value?(g(),b("button",{key:0,onClick:A[0]||(A[0]=Y=>T.$emit("close")),class:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition"},[...A[8]||(A[8]=[c("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])):I("",!0)])]),footer:R(()=>[c("div",T_,[k(ze,{variant:"secondary",onClick:A[7]||(A[7]=Y=>T.$emit("close"))},{default:R(()=>[...A[23]||(A[23]=[ie(" Cancel ",-1)])]),_:1}),k(ze,{variant:"primary",onClick:j,disabled:C.value||!u.directory},{default:R(()=>[ie(z(C.value?"Creating...":"Create Project"),1)]),_:1},8,["disabled"])])]),default:R(()=>[c("div",p_,[k(W,{modelValue:u.directory,"onUpdate:modelValue":A[1]||(A[1]=Y=>u.directory=Y),label:"Project Directory",placeholder:w.value,hint:m.value,onInput:H},null,8,["modelValue","placeholder","hint"]),o.value||h.value?(g(),b("div",m_,[o.value?(g(),b("p",g_,[A[10]||(A[10]=ie(" Projects will be created inside ",-1)),c("span",v_,z(o.value),1),A[11]||(A[11]=ie(". ",-1))])):I("",!0),h.value?(g(),b("p",y_,[A[12]||(A[12]=ie(" Full path: ",-1)),c("span",b_,z(f.value),1)])):I("",!0)])):I("",!0),k(W,{modelValue:u.name,"onUpdate:modelValue":A[2]||(A[2]=Y=>u.name=Y),label:"Project Name",placeholder:"My Analysis"},null,8,["modelValue"]),c("div",null,[A[14]||(A[14]=c("label",{class:"block text-sm/6 font-medium text-gray-900 dark:text-white mb-3"}," Project Type ",-1)),c("div",k_,[(g(),b(ee,null,ke(p,Y=>c("div",{key:Y.id,onClick:te=>u.type=Y.id,class:Ee(["border-2 rounded-lg p-4 cursor-pointer transition",u.type===Y.id?"border-sky-600 bg-sky-50 dark:bg-sky-900/20 dark:border-sky-500":"border-gray-200 dark:border-gray-700 hover:border-sky-300 dark:hover:border-sky-600"])},[c("div",w_,[c("div",__,z(Y.icon),1),c("div",S_,[c("h3",C_,z(Y.title),1),c("p",A_,z(Y.description),1)]),u.type===Y.id?(g(),b("div",V_,[...A[13]||(A[13]=[c("svg",{class:"h-6 w-6",fill:"currentColor",viewBox:"0 0 20 20"},[c("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1)])])):I("",!0)])],10,x_)),64))])]),u.type==="project"?(g(),b("div",M_,[k(gi,{modelValue:u.sensitive,"onUpdate:modelValue":A[3]||(A[3]=Y=>u.sensitive=Y),id:"sensitive",description:"Creates separate public/private directories for inputs, reference materials, and outputs. Recommended for PHI, PII, or IRB-restricted data."},{default:R(()=>[...A[15]||(A[15]=[ie(" Privacy-first mode ",-1)])]),_:1},8,["modelValue"])])):I("",!0),c("div",D_,[k(gi,{modelValue:u.use_git,"onUpdate:modelValue":A[4]||(A[4]=Y=>u.use_git=Y),id:"use_git"},{default:R(()=>[...A[16]||(A[16]=[ie(" Initialize git repository ",-1)])]),_:1},8,["modelValue"]),k(gi,{modelValue:u.use_renv,"onUpdate:modelValue":A[5]||(A[5]=Y=>u.use_renv=Y),id:"use_renv"},{default:R(()=>[...A[17]||(A[17]=[ie(" Enable renv for package management ",-1)])]),_:1},8,["modelValue"]),k(gi,{modelValue:u.attach_defaults,"onUpdate:modelValue":A[6]||(A[6]=Y=>u.attach_defaults=Y),id:"attach_defaults"},{default:R(()=>[...A[18]||(A[18]=[ie(" Auto-load common packages (dplyr, tidyr, ggplot2) ",-1)])]),_:1},8,["modelValue"])]),V.value?(g(),pe(Ps,{key:2,type:"error",description:V.value},null,8,["description"])):I("",!0),U.value?(g(),pe(Ps,{key:3,type:"success",title:"Project created successfully!"},{default:R(()=>[A[22]||(A[22]=c("p",{class:"mt-2"},"Next steps:",-1)),c("ol",$_,[c("li",null,"cd "+z(f.value),1),A[19]||(A[19]=c("li",null,"R",-1)),A[20]||(A[20]=c("li",null,"library(framework)",-1)),A[21]||(A[21]=c("li",null,"scaffold()",-1))])]),_:1})):I("",!0)])]),_:1},8,["class"])],2))}},O_={class:"flex items-start justify-between"},P_={class:"text-3xl font-bold tracking-tight text-gray-900 dark:text-white"},L_={key:0,class:"mt-2 text-sm text-gray-600 dark:text-gray-400"},j_={key:0},$o={__name:"PageHeader",props:{title:{type:String,required:!0},description:{type:String,default:null}},setup(t){return(e,s)=>(g(),b("div",O_,[c("div",null,[c("h1",P_,z(t.title),1),t.description?(g(),b("p",L_,z(t.description),1)):I("",!0)]),e.$slots.actions?(g(),b("div",j_,[vt(e.$slots,"actions")])):I("",!0)]))}},En={__name:"Badge",props:{variant:{type:String,default:"gray",validator:t=>["gray","red","yellow","green","blue","indigo","purple","pink","sky"].includes(t)},pill:{type:Boolean,default:!1},dot:{type:Boolean,default:!1}},setup(t){const e=t,s=ne(()=>{const n=["inline-flex","items-center","px-2","py-1","text-xs","font-medium","inset-ring"];n.push(e.pill?"rounded-full":"rounded-md"),e.dot&&n.push("gap-x-1.5");const r={gray:{bg:"bg-gray-50",text:"text-gray-600",ring:"inset-ring-gray-500/10",darkBg:"dark:bg-gray-400/10",darkText:e.dot?"dark:text-gray-200":"dark:text-gray-400",darkRing:e.dot?"dark:inset-ring-white/10":"dark:inset-ring-gray-400/20"},red:{bg:"bg-red-50",text:"text-red-700",ring:"inset-ring-red-600/10",darkBg:"dark:bg-red-400/10",darkText:"dark:text-red-400",darkRing:"dark:inset-ring-red-400/20"},yellow:{bg:"bg-yellow-50",text:"text-yellow-800",ring:"inset-ring-yellow-600/20",darkBg:"dark:bg-yellow-400/10",darkText:"dark:text-yellow-500",darkRing:"dark:inset-ring-yellow-400/20"},green:{bg:"bg-green-50",text:"text-green-700",ring:"inset-ring-green-600/20",darkBg:"dark:bg-green-400/10",darkText:"dark:text-green-400",darkRing:"dark:inset-ring-green-500/20"},sky:{bg:"bg-sky-50",text:"text-sky-700",ring:"inset-ring-sky-600/20",darkBg:"dark:bg-sky-400/10",darkText:"dark:text-sky-400",darkRing:"dark:inset-ring-sky-500/20"},blue:{bg:"bg-blue-50",text:"text-blue-700",ring:"inset-ring-blue-700/10",darkBg:"dark:bg-blue-400/10",darkText:"dark:text-blue-400",darkRing:"dark:inset-ring-blue-400/30"},indigo:{bg:"bg-indigo-50",text:"text-indigo-700",ring:"inset-ring-indigo-700/10",darkBg:"dark:bg-indigo-400/10",darkText:"dark:text-indigo-400",darkRing:"dark:inset-ring-indigo-400/30"},purple:{bg:"bg-purple-50",text:"text-purple-700",ring:"inset-ring-purple-700/10",darkBg:"dark:bg-purple-400/10",darkText:"dark:text-purple-400",darkRing:"dark:inset-ring-purple-400/30"},pink:{bg:"bg-pink-50",text:"text-pink-700",ring:"inset-ring-pink-700/10",darkBg:"dark:bg-pink-400/10",darkText:"dark:text-pink-400",darkRing:"dark:inset-ring-pink-400/20"}}[e.variant];return e.dot?n.push("text-gray-900","inset-ring-gray-200","dark:text-white","dark:inset-ring-white/10"):n.push(r.bg,r.text,r.ring,r.darkBg,r.darkText,r.darkRing),n.join(" ")}),i=ne(()=>`size-1.5 ${{gray:"fill-gray-500 dark:fill-gray-400",red:"fill-red-500 dark:fill-red-400",yellow:"fill-yellow-500 dark:fill-yellow-400",green:"fill-green-500 dark:fill-green-400",sky:"fill-sky-500 dark:fill-sky-400",blue:"fill-blue-500 dark:fill-blue-400",indigo:"fill-indigo-500 dark:fill-indigo-400",purple:"fill-purple-500 dark:fill-purple-400",pink:"fill-pink-500 dark:fill-pink-400"}[e.variant]}`);return(n,o)=>(g(),b("span",{class:Ee(s.value)},[t.dot?(g(),b("svg",{key:0,viewBox:"0 0 6 6","aria-hidden":"true",class:Ee(i.value)},[...o[0]||(o[0]=[c("circle",{r:"3",cx:"3",cy:"3"},null,-1)])],2)):I("",!0),vt(n.$slots,"default")],2))}},d0=(t,e)=>{const s=t.__vccOpts||t;for(const[i,n]of e)s[i]=n;return s},R_={key:0,class:"relative z-50"},B_={class:"fixed inset-0 z-10 overflow-y-auto"},I_={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},U_=["aria-labelledby"],N_=["id"],z_={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},F_={__name:"Modal",props:{modelValue:{type:Boolean,default:!1},title:{type:String,default:null},description:{type:String,default:null},icon:{type:String,default:null,validator:t=>["success","error","warning","info"].includes(t)},size:{type:String,default:"md",validator:t=>["sm","md","lg","xl"].includes(t)},variant:{type:String,default:"centered",validator:t=>["centered","side-icon","left"].includes(t)},closeOnBackdrop:{type:Boolean,default:!0}},emits:["update:modelValue","close"],setup(t,{expose:e,emit:s}){const i=t,n=s,o=ne(()=>`modal-title-${Math.random().toString(36).substr(2,9)}`),r={sm:"sm:max-w-sm",md:"sm:max-w-lg",lg:"sm:max-w-2xl",xl:"sm:max-w-4xl"},l=ne(()=>["relative","transform","overflow-hidden","rounded-lg","bg-white","px-4","pt-5","pb-4","text-left","shadow-xl","transition-all","sm:my-8","sm:w-full","sm:p-6","dark:bg-gray-800","dark:outline","dark:-outline-offset-1","dark:outline-white/10",r[i.size]].join(" ")),a=ne(()=>{const V=["flex","items-center","justify-center","rounded-full"];i.variant==="centered"?V.push("mx-auto","size-12"):V.push("shrink-0","sm:mx-0","sm:size-10");const U={success:"bg-sky-100 text-sky-600 dark:bg-sky-500/10 dark:text-sky-400",error:"bg-red-100 text-red-600 dark:bg-red-500/10 dark:text-red-400",warning:"bg-yellow-100 text-yellow-600 dark:bg-yellow-500/10 dark:text-yellow-400",info:"bg-blue-100 text-blue-600 dark:bg-blue-500/10 dark:text-blue-400"};return i.icon&&V.push(U[i.icon]),V.join(" ")}),d=ne(()=>{const V=[];return i.variant==="centered"?V.push("mt-3","text-center","sm:mt-5"):i.variant==="left"?V.push("text-left"):V.push("mt-3","text-center","sm:mt-0","sm:ml-4","sm:text-left"),i.variant==="side-icon"&&(i.icon||i.$slots.icon)&&V.push("sm:flex","sm:items-start"),V.join(" ")}),u=ne(()=>i.variant==="left"?"text-lg font-bold text-gray-900 dark:text-white mb-4":"text-base font-semibold text-gray-900 dark:text-white"),f=ne(()=>(i.variant==="centered","mt-2")),h=ne(()=>i.variant==="left"?"mt-6 pt-4 border-t border-gray-200 dark:border-gray-700 flex gap-3 justify-between":i.variant==="centered"?"mt-5 sm:mt-6 flex gap-3 justify-end":"mt-5 sm:mt-4 flex gap-3 justify-end"),m=ne(()=>i.icon==="success"?{template:`
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="m4.5 12.75 6 6 9-13.5" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      `}:i.icon==="error"||i.icon==="warning"?{template:`
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      `}:i.icon==="info"?{template:`
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      `}:null),w=()=>{i.closeOnBackdrop&&C()},p=V=>{V.key==="Escape"&&i.modelValue&&C()},C=()=>{n("update:modelValue",!1),n("close")};return ns(()=>{window.addEventListener("keydown",p)}),Mo(()=>{window.removeEventListener("keydown",p)}),e({close:C}),(V,U)=>(g(),pe(dg,{to:"body"},[k(Dc,{name:"modal"},{default:R(()=>[t.modelValue?(g(),b("div",R_,[c("div",{class:"fixed inset-0 bg-gray-500/75 transition-opacity dark:bg-gray-900/50",onClick:w}),c("div",B_,[c("div",I_,[c("div",{class:Ee(l.value),role:"dialog","aria-modal":"true","aria-labelledby":o.value},[V.$slots.icon||t.icon?(g(),b("div",{key:0,class:Ee(a.value)},[vt(V.$slots,"icon",{},()=>[t.icon?(g(),pe(Ts(m.value),{key:0,class:"size-6"})):I("",!0)],!0)],2)):I("",!0),c("div",{class:Ee(d.value)},[t.title?(g(),b("h3",{key:0,id:o.value,class:Ee(u.value)},z(t.title),11,N_)):I("",!0),t.description||V.$slots.default?(g(),b("div",{key:1,class:Ee(f.value)},[t.description?(g(),b("p",z_,z(t.description),1)):vt(V.$slots,"default",{key:1},void 0,!0)],2)):I("",!0)],2),V.$slots.actions?(g(),b("div",{key:1,class:Ee(h.value)},[vt(V.$slots,"actions",{},void 0,!0)],2)):I("",!0)],10,U_)])])])):I("",!0)]),_:3})]))}},On=d0(F_,[["__scopeId","data-v-2e078ad9"]]),H_=["title"],W_={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},q_={key:1,class:"h-4 w-4 text-sky-600 dark:text-sky-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},K_={key:2},ao={__name:"CopyButton",props:{value:{type:String,required:!0},showLabel:{type:Boolean,default:!1},variant:{type:String,default:"default",validator:t=>["default","ghost","bare"].includes(t)},successMessage:{type:String,default:"Copied to clipboard"}},setup(t){const e=t,s=qa(),i=ae(!1);let n=null;const o=ne(()=>e.variant==="bare"?"inline-flex items-center text-sm font-medium transition-all":"inline-flex items-center gap-1.5 rounded-md px-2.5 py-1.5 text-sm font-medium transition-all"),r=ne(()=>e.variant==="ghost"?"text-zinc-600 hover:bg-zinc-100 dark:text-zinc-400 dark:hover:bg-zinc-800":e.variant==="bare"?"gap-2 rounded-lg transition-all focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-1 focus-visible:outline-sky-500":"bg-zinc-100 text-zinc-700 hover:bg-zinc-200 dark:bg-zinc-800 dark:text-zinc-300 dark:hover:bg-zinc-700"),l=async()=>{try{await navigator.clipboard.writeText(e.value),i.value=!0,s.success("Copied!",e.successMessage),n&&clearTimeout(n),n=setTimeout(()=>{i.value=!1},2e3)}catch(a){s.error("Copy failed","Could not copy to clipboard"),console.error("Failed to copy:",a)}};return(a,d)=>(g(),b("button",{type:"button",onClick:l,class:Ee([o.value,r.value,i.value&&"ring-2 ring-sky-500/20"]),title:i.value?"Copied!":"Copy to clipboard"},[vt(a.$slots,"default",{copied:i.value},()=>[i.value?(g(),b("svg",q_,[...d[1]||(d[1]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(g(),b("svg",W_,[...d[0]||(d[0]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"},null,-1)])])),t.showLabel?(g(),b("span",K_,z(i.value?"Copied!":"Copy"),1)):I("",!0)])],10,H_))}},G_={class:"mx-auto max-w-5xl p-10"},J_={class:"flex gap-3"},Y_={key:0,class:"mt-6 flex flex-col gap-3 rounded-2xl border border-zinc-200 bg-white p-5 shadow-sm dark:border-zinc-800 dark:bg-zinc-900 sm:flex-row sm:items-center sm:justify-between"},Q_={class:"min-w-0"},X_={class:"mt-1 font-mono text-sm text-zinc-600 dark:text-zinc-400 truncate"},Z_={class:"flex items-center gap-2"},e4={key:1,class:"mt-10 grid gap-6 sm:grid-cols-2"},t4={class:"relative"},s4={class:"flex items-start justify-between"},i4={class:"flex-1"},n4={class:"flex items-center gap-3"},o4={class:"flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-sky-500 to-sky-600 shadow-lg shadow-sky-500/20"},r4={key:0,class:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},l4={key:1,class:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},a4={key:2,class:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},u4={class:"mt-4 text-xl font-bold text-zinc-900 dark:text-white"},d4={class:"mt-2 text-sm text-zinc-600 dark:text-zinc-400 font-mono truncate"},c4={key:0,class:"mt-3 flex items-center gap-2 text-xs text-zinc-600 dark:text-zinc-400"},f4={key:0,class:"text-zinc-400 dark:text-zinc-500"},h4={key:1,class:"truncate"},p4={class:"mt-3 flex items-center gap-2 text-xs text-zinc-500 dark:text-zinc-500"},m4={class:"mt-6 flex gap-2"},g4={key:2,class:"mt-12 overflow-hidden rounded-3xl bg-gradient-to-br from-sky-600 via-sky-500 to-teal-500 p-12 shadow-2xl shadow-sky-500/20"},v4={class:"space-y-4"},y4={key:0,class:"mt-2 text-sm text-red-600 dark:text-red-400"},b4={class:"flex gap-3 justify-end"},k4={key:0,class:"space-y-6"},x4={class:"text-lg font-semibold text-zinc-900 dark:text-white mb-3"},w4={class:"grid gap-4"},_4={class:"text-sm text-zinc-600 dark:text-zinc-400 font-mono bg-zinc-50 dark:bg-zinc-800 px-3 py-2 rounded-lg"},S4={key:0,class:"grid grid-cols-2 gap-4"},C4={class:"text-sm text-zinc-600 dark:text-zinc-400"},A4={key:0},V4={class:"text-sm text-zinc-600 dark:text-zinc-400"},M4={class:"text-sm text-zinc-600 dark:text-zinc-400"},D4={class:"flex gap-3 justify-end"},$4={__name:"ProjectsView",setup(t){const e=Ha(),s=Do(),i=ae(!1),n=ae(!1),o=ae(!1),r=ae(""),l=ae(""),a=ae(!1),d=ae(null),u=ae({projects:[]}),f=ae(""),h=ae(null),m=T=>{if(!T)return"Unknown";const A=h.value?.project_types?.[T]?.label;return A||T.split("_").map(Y=>Y.charAt(0).toUpperCase()+Y.slice(1)).join(" ")},w=async()=>{try{const A=await(await fetch("/api/settings/get")).json();u.value.projects=A.projects||[],f.value=A.projects_root&&A.projects_root!==""?A.projects_root:""}catch(T){console.error("Failed to load settings:",T)}},p=()=>{s.path==="/projects/new"?i.value=!0:e.push("/projects/new")},C=()=>{i.value=!1,s.path==="/projects/new"&&e.push("/projects")},V=T=>{i.value=!1,w(),T?.id?e.push(`/project/${T.id}`):e.push("/projects")},U=()=>{n.value=!1,r.value="",l.value=""},B=T=>{d.value=T,o.value=!0},H=async()=>{l.value="",a.value=!0;try{const T=await fetch("/api/project/import",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_dir:r.value})}),A=await T.text();if(!A){l.value="Server returned empty response",a.value=!1;return}const Y=JSON.parse(A);T.ok?(U(),w()):l.value=Y.error||"Failed to import project"}catch(T){l.value="Network error: "+T.message}finally{a.value=!1}},j=async()=>{try{const A=await(await fetch("/api/settings-catalog")).json();A.error||(h.value=A)}catch(T){console.error("Failed to load settings catalog:",T)}};return ns(()=>{w(),j(),i.value=s.path==="/projects/new"}),We(()=>s.path,T=>{i.value=T==="/projects/new"},{immediate:!0}),(T,A)=>(g(),b("div",G_,[k($o,{title:"Your Projects",description:"Framework projects you've created."},{actions:R(()=>[c("div",J_,[k(ze,{size:"lg",variant:"secondary",onClick:A[0]||(A[0]=Y=>n.value=!0)},{default:R(()=>[...A[7]||(A[7]=[ie(" Import Project ",-1)])]),_:1}),k(ze,{size:"lg",onClick:p},{default:R(()=>[...A[8]||(A[8]=[ie(" New Project ",-1)])]),_:1})])]),_:1}),f.value?(g(),b("div",Y_,[c("div",Q_,[A[9]||(A[9]=c("p",{class:"text-sm font-medium text-zinc-700 dark:text-zinc-200"},"Projects Root",-1)),c("p",X_,z(f.value),1)]),c("div",Z_,[k(ao,{value:f.value,variant:"ghost","show-label":"","success-message":"Root path copied"},null,8,["value"]),k(ze,{size:"sm",variant:"secondary",onClick:A[1]||(A[1]=Y=>at(e).push("/settings"))},{default:R(()=>[...A[10]||(A[10]=[ie(" Edit ",-1)])]),_:1})])])):I("",!0),u.value.projects&&u.value.projects.length>0?(g(),b("div",e4,[(g(!0),b(ee,null,ke(u.value.projects,(Y,te)=>(g(),b("div",{key:te,class:"group relative overflow-hidden rounded-2xl border border-zinc-200 bg-white p-6 shadow-sm transition-all duration-300 hover:shadow-xl hover:shadow-zinc-900/5 dark:border-zinc-800 dark:bg-zinc-900 dark:hover:shadow-sky-500/5"},[A[18]||(A[18]=c("div",{class:"absolute -right-6 -top-6 h-24 w-24 rounded-full bg-gradient-to-br from-sky-500/10 to-sky-600/10 blur-2xl transition-all duration-300 group-hover:scale-150"},null,-1)),c("div",t4,[c("div",s4,[c("div",i4,[c("div",n4,[c("div",o4,[Y.type==="project"?(g(),b("svg",r4,[...A[11]||(A[11]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)])])):Y.type==="course"?(g(),b("svg",l4,[...A[12]||(A[12]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"},null,-1)])])):(g(),b("svg",a4,[...A[13]||(A[13]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"},null,-1)])]))]),k(En,{variant:"sky"},{default:R(()=>[ie(z(m(Y.type)),1)]),_:2},1024)]),c("h3",u4,z(Y.name),1),c("p",d4,z(Y.path),1),Y.author?(g(),b("div",c4,[A[14]||(A[14]=c("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),c("span",null,z(Y.author),1),Y.author_email?(g(),b("span",f4,"")):I("",!0),Y.author_email?(g(),b("span",h4,z(Y.author_email),1)):I("",!0)])):I("",!0),c("div",p4,[A[15]||(A[15]=c("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),c("span",null,"Created "+z(Y.created),1)])])]),c("div",m4,[k(ze,{variant:"primary",size:"md",onClick:me=>T.$router.push(`/project/${Y.id}`),class:"flex-1"},{default:R(()=>[...A[16]||(A[16]=[ie(" View Project ",-1)])]),_:1},8,["onClick"]),k(ze,{variant:"secondary",size:"md",onClick:me=>B(Y),class:"flex-1"},{default:R(()=>[...A[17]||(A[17]=[ie(" See More ",-1)])]),_:1},8,["onClick"])])])]))),128))])):(g(),b("div",g4,[c("div",{class:"relative"},[A[21]||(A[21]=c("div",{class:"absolute -right-10 -top-10 h-40 w-40 rounded-full bg-white/10 blur-3xl"},null,-1)),A[22]||(A[22]=c("div",{class:"absolute -bottom-10 -left-10 h-40 w-40 rounded-full bg-white/10 blur-3xl"},null,-1)),c("div",{class:"relative text-center"},[A[20]||(A[20]=Ua('<div class="mx-auto flex h-16 w-16 items-center justify-center rounded-2xl bg-white/20 backdrop-blur-sm"><svg class="h-8 w-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg></div><h2 class="mt-6 text-3xl font-bold text-white">Ready to start?</h2><p class="mt-3 text-lg text-sky-50"> Create a new Framework project with beautiful structure and best practices built-in. </p>',3)),c("button",{onClick:p,class:"mt-8 inline-flex items-center gap-2 rounded-xl bg-white px-6 py-3 text-base font-semibold text-sky-600 shadow-xl transition-all duration-200 hover:scale-105 hover:shadow-2xl focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-white"},[...A[19]||(A[19]=[c("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),ie(" Create Your First Project ",-1)])])])])])),i.value?(g(),pe(E_,{key:3,"projects-root":f.value,onClose:C,onCreated:V},null,8,["projects-root"])):I("",!0),k(On,{modelValue:n.value,"onUpdate:modelValue":A[3]||(A[3]=Y=>n.value=Y),title:"Import Existing Project",size:"md"},{actions:R(()=>[c("div",b4,[k(ze,{variant:"secondary",onClick:U},{default:R(()=>[...A[26]||(A[26]=[ie(" Cancel ",-1)])]),_:1}),k(ze,{variant:"primary",onClick:H,disabled:!r.value||a.value},{default:R(()=>[ie(z(a.value?"Importing...":"Import"),1)]),_:1},8,["disabled"])])]),default:R(()=>[c("div",v4,[A[25]||(A[25]=c("p",{class:"text-sm text-zinc-600 dark:text-zinc-400"}," Import an existing Framework project that isn't in your registry yet. ",-1)),c("div",null,[A[23]||(A[23]=c("label",{for:"import-path",class:"block text-sm font-medium text-zinc-900 dark:text-white mb-2"}," Project Directory Path ",-1)),Je(c("input",{id:"import-path","onUpdate:modelValue":A[2]||(A[2]=Y=>r.value=Y),type:"text",placeholder:"/Users/you/projects/my-framework-project",class:Ee(["block w-full rounded-lg border-0 px-4 py-2.5 text-zinc-900 shadow-sm ring-1 ring-inset ring-zinc-300 placeholder:text-zinc-400 focus:ring-2 focus:ring-inset focus:ring-sky-600 dark:bg-zinc-800 dark:text-white dark:ring-zinc-700 dark:placeholder:text-zinc-500 dark:focus:ring-sky-500 sm:text-sm sm:leading-6 font-mono",{"ring-red-500 dark:ring-red-500":l.value}])},null,2),[[mo,r.value]]),A[24]||(A[24]=c("p",{class:"mt-2 text-xs text-zinc-500 dark:text-zinc-500"}," Enter the full path to the Framework project directory ",-1)),l.value?(g(),b("p",y4,z(l.value),1)):I("",!0)])])]),_:1},8,["modelValue"]),k(On,{modelValue:o.value,"onUpdate:modelValue":A[6]||(A[6]=Y=>o.value=Y),title:"Project Details",size:"lg"},{actions:R(()=>[c("div",D4,[k(ze,{variant:"secondary",onClick:A[4]||(A[4]=Y=>o.value=!1)},{default:R(()=>[...A[31]||(A[31]=[ie(" Close ",-1)])]),_:1}),k(ze,{variant:"primary",onClick:A[5]||(A[5]=Y=>{T.$router.push(`/project/${d.value.id}`),o.value=!1})},{default:R(()=>[...A[32]||(A[32]=[ie(" View Full Details ",-1)])]),_:1})])]),default:R(()=>[d.value?(g(),b("div",k4,[c("div",null,[c("h3",x4,z(d.value.name),1),k(En,{variant:"sky",class:"mb-4"},{default:R(()=>[ie(z(d.value.type),1)]),_:1})]),c("div",w4,[c("div",null,[A[27]||(A[27]=c("label",{class:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1"}," Location ",-1)),c("p",_4,z(d.value.path),1)]),d.value.author?(g(),b("div",S4,[c("div",null,[A[28]||(A[28]=c("label",{class:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1"}," Author ",-1)),c("p",C4,z(d.value.author),1)]),d.value.author_email?(g(),b("div",A4,[A[29]||(A[29]=c("label",{class:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1"}," Email ",-1)),c("p",V4,z(d.value.author_email),1)])):I("",!0)])):I("",!0),c("div",null,[A[30]||(A[30]=c("label",{class:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1"}," Created ",-1)),c("p",M4,z(d.value.created),1)])])])):I("",!0)]),_:1},8,["modelValue"])]))}},T4=["for"],E4={class:"mt-2 grid grid-cols-1"},O4=["id","value"],Ht={__name:"Select",props:{id:{type:String,default:()=>`select-${Math.random().toString(36).substr(2,9)}`},modelValue:{type:[String,Number],default:""},label:{type:String,default:null}},emits:["update:modelValue"],setup(t){return(e,s)=>(g(),b("div",null,[t.label?(g(),b("label",{key:0,for:t.id,class:"block text-sm/6 font-medium text-gray-900 dark:text-white"},z(t.label),9,T4)):I("",!0),c("div",E4,[c("select",{id:t.id,value:t.modelValue,onChange:s[0]||(s[0]=i=>e.$emit("update:modelValue",i.target.value)),class:"col-start-1 row-start-1 w-full appearance-none rounded-md bg-white py-1.5 pr-8 pl-3 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 focus-visible:outline-2 focus-visible:-outline-offset-2 focus-visible:outline-sky-600 sm:text-sm/6 dark:bg-white/5 dark:text-white dark:outline-white/10 dark:*:bg-gray-800 dark:focus-visible:outline-sky-500"},[vt(e.$slots,"default")],40,O4),s[1]||(s[1]=c("svg",{viewBox:"0 0 16 16",fill:"currentColor","data-slot":"icon","aria-hidden":"true",class:"pointer-events-none col-start-1 row-start-1 mr-2 size-5 self-center justify-self-end text-gray-500 sm:size-4 dark:text-gray-400"},[c("path",{d:"M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z","clip-rule":"evenodd","fill-rule":"evenodd"})],-1))])]))}},P4={class:"flex items-center gap-3"},L4=["id","name","checked","disabled","aria-label"],j4={key:0,class:"text-sm/6"},R4=["for"],B4=["id"],Ue={__name:"Toggle",props:{id:{type:String,default:()=>`toggle-${Math.random().toString(36).substr(2,9)}`},name:{type:String,default:null},modelValue:{type:Boolean,default:!1},label:{type:String,default:null},description:{type:String,default:null},ariaLabel:{type:String,default:null},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(t,{emit:e}){const s=t,i=e,n=o=>{if(!s.disabled){const r=o.target.checked;i("update:modelValue",r),i("change",r)}};return(o,r)=>(g(),b("div",P4,[c("div",{class:Ee(["group relative inline-flex w-11 shrink-0 rounded-full p-0.5 inset-ring inset-ring-gray-900/5 outline-offset-2 transition-colors duration-200 ease-in-out dark:inset-ring-white/10",[t.modelValue?"bg-sky-600 outline-sky-600 dark:bg-sky-500 dark:outline-sky-500":"bg-gray-200 outline-sky-600 dark:bg-white/5 dark:outline-sky-500"]])},[c("span",{class:Ee(["size-5 rounded-full bg-white shadow-xs ring-1 ring-gray-900/5 transition-transform duration-200 ease-in-out",{"translate-x-5":t.modelValue}])},null,2),c("input",{id:t.id,type:"checkbox",name:t.name,checked:t.modelValue,disabled:t.disabled,"aria-label":t.ariaLabel||t.label,class:"absolute inset-0 appearance-none focus:outline-hidden cursor-pointer disabled:cursor-not-allowed",onChange:n},null,40,L4)],2),t.label||t.description?(g(),b("div",j4,[t.label?(g(),b("label",{key:0,for:t.id,class:Ee(["font-medium text-gray-900 cursor-pointer dark:text-white",{"cursor-not-allowed opacity-50":t.disabled}])},z(t.label),11,R4)):I("",!0),t.description?(g(),b("p",{key:1,id:`${t.id}-description`,class:"text-gray-500 dark:text-gray-400"},z(t.description),9,B4)):I("",!0)])):I("",!0)]))}},I4={class:"flex items-center"},U4=["id","name","value","checked"],N4=["for"],fl={__name:"Radio",props:{id:{type:String,required:!0},name:{type:String,required:!0},value:{type:[String,Number,Boolean],required:!0},modelValue:{type:[String,Number,Boolean],default:null}},emits:["update:modelValue"],setup(t){return(e,s)=>(g(),b("div",I4,[c("input",{id:t.id,type:"radio",name:t.name,value:t.value,checked:t.modelValue===t.value,onChange:s[0]||(s[0]=i=>e.$emit("update:modelValue",t.value)),class:"relative size-4 appearance-none rounded-full border border-gray-300 bg-white before:absolute before:inset-1 before:rounded-full before:bg-white not-checked:before:hidden checked:border-sky-600 checked:bg-sky-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:before:bg-gray-400 dark:border-white/10 dark:bg-white/5 dark:checked:border-sky-500 dark:checked:bg-sky-500 dark:focus-visible:outline-sky-500 dark:disabled:border-white/5 dark:disabled:bg-white/10 dark:disabled:before:bg-white/20 forced-colors:appearance-auto forced-colors:before:hidden"},null,40,U4),c("label",{for:t.id,class:"ml-3 block text-sm/6 font-medium text-gray-900 dark:text-white"},[vt(e.$slots,"default")],8,N4)]))}},z4={class:"text-sm/6 font-semibold text-gray-900 dark:text-white"},F4={key:0,class:"mt-1 text-sm/6 text-gray-600 dark:text-gray-400"},H4={class:"mt-6 space-y-6"},W4={__name:"RadioGroup",props:{legend:{type:String,required:!0},description:{type:String,default:null}},setup(t){return(e,s)=>(g(),b("fieldset",null,[c("legend",z4,z(t.legend),1),t.description?(g(),b("p",F4,z(t.description),1)):I("",!0),c("div",H4,[vt(e.$slots,"default")])]))}},q4={class:"space-y-4"},K4={class:"flex items-start gap-4"},G4={class:"flex-1"},J4=["onClick"],gt={__name:"Repeater",props:{modelValue:{type:Array,default:()=>[]},addLabel:{type:String,default:"Add Item"},defaultItem:{type:[Object,Function],default:()=>({})}},emits:["update:modelValue"],setup(t,{emit:e}){const s=t,i=e,n=()=>{const l=typeof s.defaultItem=="function"?s.defaultItem():{...s.defaultItem,_id:Date.now()};i("update:modelValue",[...s.modelValue,l])},o=l=>{const a=s.modelValue.filter((d,u)=>u!==l);i("update:modelValue",a)},r=(l,a,d)=>{const u=[...s.modelValue];u[l]={...u[l],[a]:d},i("update:modelValue",u)};return(l,a)=>(g(),b("div",q4,[(g(!0),b(ee,null,ke(t.modelValue,(d,u)=>(g(),b("div",{key:d._id||u,class:"rounded-lg border border-gray-200 p-4 dark:border-gray-700"},[c("div",K4,[c("div",G4,[vt(l.$slots,"default",{item:d,index:u,update:(f,h)=>r(u,f,h)})]),c("button",{type:"button",onClick:f=>o(u),class:"shrink-0 rounded-md p-1.5 text-gray-400 transition hover:bg-red-50 hover:text-red-600 dark:hover:bg-red-900/20 dark:hover:text-red-400",title:"Remove"},[...a[0]||(a[0]=[c("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,J4)])]))),128)),k(ze,{variant:"secondary",size:"sm",onClick:n,class:"inline-flex items-center"},{default:R(()=>[a[1]||(a[1]=c("svg",{class:"mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)),ie(" "+z(t.addLabel),1)]),_:1})]))}};let md=[],c0=[];(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,s=0;e<t.length;e++)(e%2?c0:md).push(s=s+t[e])})();function Y4(t){if(t<768)return!1;for(let e=0,s=md.length;;){let i=e+s>>1;if(t<md[i])s=i;else if(t>=c0[i])e=i+1;else return!0;if(e==s)return!1}}function Hh(t){return t>=127462&&t<=127487}const Wh=8205;function Q4(t,e,s=!0,i=!0){return(s?f0:X4)(t,e,i)}function f0(t,e,s){if(e==t.length)return e;e&&h0(t.charCodeAt(e))&&p0(t.charCodeAt(e-1))&&e--;let i=_u(t,e);for(e+=qh(i);e<t.length;){let n=_u(t,e);if(i==Wh||n==Wh||s&&Y4(n))e+=qh(n),i=n;else if(Hh(n)){let o=0,r=e-2;for(;r>=0&&Hh(_u(t,r));)o++,r-=2;if(o%2==0)break;e+=2}else break}return e}function X4(t,e,s){for(;e>0;){let i=f0(t,e-2,s);if(i<e)return i;e--}return 0}function _u(t,e){let s=t.charCodeAt(e);if(!p0(s)||e+1==t.length)return s;let i=t.charCodeAt(e+1);return h0(i)?(s-55296<<10)+(i-56320)+65536:s}function h0(t){return t>=56320&&t<57344}function p0(t){return t>=55296&&t<56320}function qh(t){return t<65536?1:2}class st{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,s,i){[e,s]=bo(this,e,s);let n=[];return this.decompose(0,e,n,2),i.length&&i.decompose(0,i.length,n,3),this.decompose(s,this.length,n,1),hi.from(n,this.length-(s-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,s=this.length){[e,s]=bo(this,e,s);let i=[];return this.decompose(e,s,i,0),hi.from(i,s-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let s=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),n=new rr(this),o=new rr(e);for(let r=s,l=s;;){if(n.next(r),o.next(r),r=0,n.lineBreak!=o.lineBreak||n.done!=o.done||n.value!=o.value)return!1;if(l+=n.value.length,n.done||l>=i)return!0}}iter(e=1){return new rr(this,e)}iterRange(e,s=this.length){return new m0(this,e,s)}iterLines(e,s){let i;if(e==null)i=this.iter();else{s==null&&(s=this.lines+1);let n=this.line(e).from;i=this.iterRange(n,Math.max(n,s==this.lines+1?this.length:s<=1?0:this.line(s-1).to))}return new g0(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?st.empty:e.length<=32?new Dt(e):hi.from(Dt.split(e,[]))}}class Dt extends st{constructor(e,s=Z4(e)){super(),this.text=e,this.length=s}get lines(){return this.text.length}get children(){return null}lineInner(e,s,i,n){for(let o=0;;o++){let r=this.text[o],l=n+r.length;if((s?i:l)>=e)return new eS(n,l,i,r);n=l+1,i++}}decompose(e,s,i,n){let o=e<=0&&s>=this.length?this:new Dt(Kh(this.text,e,s),Math.min(s,this.length)-Math.max(0,e));if(n&1){let r=i.pop(),l=zl(o.text,r.text.slice(),0,o.length);if(l.length<=32)i.push(new Dt(l,r.length+o.length));else{let a=l.length>>1;i.push(new Dt(l.slice(0,a)),new Dt(l.slice(a)))}}else i.push(o)}replace(e,s,i){if(!(i instanceof Dt))return super.replace(e,s,i);[e,s]=bo(this,e,s);let n=zl(this.text,zl(i.text,Kh(this.text,0,e)),s),o=this.length+i.length-(s-e);return n.length<=32?new Dt(n,o):hi.from(Dt.split(n,[]),o)}sliceString(e,s=this.length,i=`
`){[e,s]=bo(this,e,s);let n="";for(let o=0,r=0;o<=s&&r<this.text.length;r++){let l=this.text[r],a=o+l.length;o>e&&r&&(n+=i),e<a&&s>o&&(n+=l.slice(Math.max(0,e-o),s-o)),o=a+1}return n}flatten(e){for(let s of this.text)e.push(s)}scanIdentical(){return 0}static split(e,s){let i=[],n=-1;for(let o of e)i.push(o),n+=o.length+1,i.length==32&&(s.push(new Dt(i,n)),i=[],n=-1);return n>-1&&s.push(new Dt(i,n)),s}}class hi extends st{constructor(e,s){super(),this.children=e,this.length=s,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,s,i,n){for(let o=0;;o++){let r=this.children[o],l=n+r.length,a=i+r.lines-1;if((s?a:l)>=e)return r.lineInner(e,s,i,n);n=l+1,i=a+1}}decompose(e,s,i,n){for(let o=0,r=0;r<=s&&o<this.children.length;o++){let l=this.children[o],a=r+l.length;if(e<=a&&s>=r){let d=n&((r<=e?1:0)|(a>=s?2:0));r>=e&&a<=s&&!d?i.push(l):l.decompose(e-r,s-r,i,d)}r=a+1}}replace(e,s,i){if([e,s]=bo(this,e,s),i.lines<this.lines)for(let n=0,o=0;n<this.children.length;n++){let r=this.children[n],l=o+r.length;if(e>=o&&s<=l){let a=r.replace(e-o,s-o,i),d=this.lines-r.lines+a.lines;if(a.lines<d>>4&&a.lines>d>>6){let u=this.children.slice();return u[n]=a,new hi(u,this.length-(s-e)+i.length)}return super.replace(o,l,a)}o=l+1}return super.replace(e,s,i)}sliceString(e,s=this.length,i=`
`){[e,s]=bo(this,e,s);let n="";for(let o=0,r=0;o<this.children.length&&r<=s;o++){let l=this.children[o],a=r+l.length;r>e&&o&&(n+=i),e<a&&s>r&&(n+=l.sliceString(e-r,s-r,i)),r=a+1}return n}flatten(e){for(let s of this.children)s.flatten(e)}scanIdentical(e,s){if(!(e instanceof hi))return 0;let i=0,[n,o,r,l]=s>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;n+=s,o+=s){if(n==r||o==l)return i;let a=this.children[n],d=e.children[o];if(a!=d)return i+a.scanIdentical(d,s);i+=a.length+1}}static from(e,s=e.reduce((i,n)=>i+n.length+1,-1)){let i=0;for(let m of e)i+=m.lines;if(i<32){let m=[];for(let w of e)w.flatten(m);return new Dt(m,s)}let n=Math.max(32,i>>5),o=n<<1,r=n>>1,l=[],a=0,d=-1,u=[];function f(m){let w;if(m.lines>o&&m instanceof hi)for(let p of m.children)f(p);else m.lines>r&&(a>r||!a)?(h(),l.push(m)):m instanceof Dt&&a&&(w=u[u.length-1])instanceof Dt&&m.lines+w.lines<=32?(a+=m.lines,d+=m.length+1,u[u.length-1]=new Dt(w.text.concat(m.text),w.length+1+m.length)):(a+m.lines>n&&h(),a+=m.lines,d+=m.length+1,u.push(m))}function h(){a!=0&&(l.push(u.length==1?u[0]:hi.from(u,d)),d=-1,a=u.length=0)}for(let m of e)f(m);return h(),l.length==1?l[0]:new hi(l,s)}}st.empty=new Dt([""],0);function Z4(t){let e=-1;for(let s of t)e+=s.length+1;return e}function zl(t,e,s=0,i=1e9){for(let n=0,o=0,r=!0;o<t.length&&n<=i;o++){let l=t[o],a=n+l.length;a>=s&&(a>i&&(l=l.slice(0,i-n)),n<s&&(l=l.slice(s-n)),r?(e[e.length-1]+=l,r=!1):e.push(l)),n=a+1}return e}function Kh(t,e,s){return zl(t,[""],e,s)}class rr{constructor(e,s=1){this.dir=s,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[s>0?1:(e instanceof Dt?e.text.length:e.children.length)<<1]}nextInner(e,s){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,n=this.nodes[i],o=this.offsets[i],r=o>>1,l=n instanceof Dt?n.text.length:n.children.length;if(r==(s>0?l:0)){if(i==0)return this.done=!0,this.value="",this;s>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((o&1)==(s>0?0:1)){if(this.offsets[i]+=s,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(n instanceof Dt){let a=n.text[r+(s<0?-1:0)];if(this.offsets[i]+=s,a.length>Math.max(0,e))return this.value=e==0?a:s>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=n.children[r+(s<0?-1:0)];e>a.length?(e-=a.length,this.offsets[i]+=s):(s<0&&this.offsets[i]--,this.nodes.push(a),this.offsets.push(s>0?1:(a instanceof Dt?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class m0{constructor(e,s,i){this.value="",this.done=!1,this.cursor=new rr(e,s>i?-1:1),this.pos=s>i?e.length:0,this.from=Math.min(s,i),this.to=Math.max(s,i)}nextInner(e,s){if(s<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,s<0?this.pos-this.to:this.from-this.pos);let i=s<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:n}=this.cursor.next(e);return this.pos+=(n.length+e)*s,this.value=n.length<=i?n:s<0?n.slice(n.length-i):n.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class g0{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:s,lineBreak:i,value:n}=this.inner.next(e);return s&&this.afterBreak?(this.value="",this.afterBreak=!1):s?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=n,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(st.prototype[Symbol.iterator]=function(){return this.iter()},rr.prototype[Symbol.iterator]=m0.prototype[Symbol.iterator]=g0.prototype[Symbol.iterator]=function(){return this});class eS{constructor(e,s,i,n){this.from=e,this.to=s,this.number=i,this.text=n}get length(){return this.to-this.from}}function bo(t,e,s){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,s))]}function Jt(t,e,s=!0,i=!0){return Q4(t,e,s,i)}function tS(t){return t>=56320&&t<57344}function sS(t){return t>=55296&&t<56320}function ys(t,e){let s=t.charCodeAt(e);if(!sS(s)||e+1==t.length)return s;let i=t.charCodeAt(e+1);return tS(i)?(s-55296<<10)+(i-56320)+65536:s}function Lc(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function pi(t){return t<65536?1:2}const gd=/\r\n?|\n/;var fs=(function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t})(fs||(fs={}));class ki{constructor(e){this.sections=e}get length(){let e=0;for(let s=0;s<this.sections.length;s+=2)e+=this.sections[s];return e}get newLength(){let e=0;for(let s=0;s<this.sections.length;s+=2){let i=this.sections[s+1];e+=i<0?this.sections[s]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let s=0,i=0,n=0;s<this.sections.length;){let o=this.sections[s++],r=this.sections[s++];r<0?(e(i,n,o),n+=o):n+=r,i+=o}}iterChangedRanges(e,s=!1){vd(this,e,s)}get invertedDesc(){let e=[];for(let s=0;s<this.sections.length;){let i=this.sections[s++],n=this.sections[s++];n<0?e.push(i,n):e.push(n,i)}return new ki(e)}composeDesc(e){return this.empty?e:e.empty?this:v0(this,e)}mapDesc(e,s=!1){return e.empty?this:yd(this,e,s)}mapPos(e,s=-1,i=fs.Simple){let n=0,o=0;for(let r=0;r<this.sections.length;){let l=this.sections[r++],a=this.sections[r++],d=n+l;if(a<0){if(d>e)return o+(e-n);o+=l}else{if(i!=fs.Simple&&d>=e&&(i==fs.TrackDel&&n<e&&d>e||i==fs.TrackBefore&&n<e||i==fs.TrackAfter&&d>e))return null;if(d>e||d==e&&s<0&&!l)return e==n||s<0?o:o+a;o+=a}n=d}if(e>n)throw new RangeError(`Position ${e} is out of range for changeset of length ${n}`);return o}touchesRange(e,s=e){for(let i=0,n=0;i<this.sections.length&&n<=s;){let o=this.sections[i++],r=this.sections[i++],l=n+o;if(r>=0&&n<=s&&l>=e)return n<e&&l>s?"cover":!0;n=l}return!1}toString(){let e="";for(let s=0;s<this.sections.length;){let i=this.sections[s++],n=this.sections[s++];e+=(e?" ":"")+i+(n>=0?":"+n:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(s=>typeof s!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new ki(e)}static create(e){return new ki(e)}}class Bt extends ki{constructor(e,s){super(e),this.inserted=s}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return vd(this,(s,i,n,o,r)=>e=e.replace(n,n+(i-s),r),!1),e}mapDesc(e,s=!1){return yd(this,e,s,!0)}invert(e){let s=this.sections.slice(),i=[];for(let n=0,o=0;n<s.length;n+=2){let r=s[n],l=s[n+1];if(l>=0){s[n]=l,s[n+1]=r;let a=n>>1;for(;i.length<a;)i.push(st.empty);i.push(r?e.slice(o,o+r):st.empty)}o+=r}return new Bt(s,i)}compose(e){return this.empty?e:e.empty?this:v0(this,e,!0)}map(e,s=!1){return e.empty?this:yd(this,e,s,!0)}iterChanges(e,s=!1){vd(this,e,s)}get desc(){return ki.create(this.sections)}filter(e){let s=[],i=[],n=[],o=new _r(this);e:for(let r=0,l=0;;){let a=r==e.length?1e9:e[r++];for(;l<a||l==a&&o.len==0;){if(o.done)break e;let u=Math.min(o.len,a-l);Xt(n,u,-1);let f=o.ins==-1?-1:o.off==0?o.ins:0;Xt(s,u,f),f>0&&Qi(i,s,o.text),o.forward(u),l+=u}let d=e[r++];for(;l<d;){if(o.done)break e;let u=Math.min(o.len,d-l);Xt(s,u,-1),Xt(n,u,o.ins==-1?-1:o.off==0?o.ins:0),o.forward(u),l+=u}}return{changes:new Bt(s,i),filtered:ki.create(n)}}toJSON(){let e=[];for(let s=0;s<this.sections.length;s+=2){let i=this.sections[s],n=this.sections[s+1];n<0?e.push(i):n==0?e.push([i]):e.push([i].concat(this.inserted[s>>1].toJSON()))}return e}static of(e,s,i){let n=[],o=[],r=0,l=null;function a(u=!1){if(!u&&!n.length)return;r<s&&Xt(n,s-r,-1);let f=new Bt(n,o);l=l?l.compose(f.map(l)):f,n=[],o=[],r=0}function d(u){if(Array.isArray(u))for(let f of u)d(f);else if(u instanceof Bt){if(u.length!=s)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${s})`);a(),l=l?l.compose(u.map(l)):u}else{let{from:f,to:h=f,insert:m}=u;if(f>h||f<0||h>s)throw new RangeError(`Invalid change range ${f} to ${h} (in doc of length ${s})`);let w=m?typeof m=="string"?st.of(m.split(i||gd)):m:st.empty,p=w.length;if(f==h&&p==0)return;f<r&&a(),f>r&&Xt(n,f-r,-1),Xt(n,h-f,p),Qi(o,n,w),r=h}}return d(e),a(!l),l}static empty(e){return new Bt(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let s=[],i=[];for(let n=0;n<e.length;n++){let o=e[n];if(typeof o=="number")s.push(o,-1);else{if(!Array.isArray(o)||typeof o[0]!="number"||o.some((r,l)=>l&&typeof r!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(o.length==1)s.push(o[0],0);else{for(;i.length<n;)i.push(st.empty);i[n]=st.of(o.slice(1)),s.push(o[0],i[n].length)}}}return new Bt(s,i)}static createSet(e,s){return new Bt(e,s)}}function Xt(t,e,s,i=!1){if(e==0&&s<=0)return;let n=t.length-2;n>=0&&s<=0&&s==t[n+1]?t[n]+=e:n>=0&&e==0&&t[n]==0?t[n+1]+=s:i?(t[n]+=e,t[n+1]+=s):t.push(e,s)}function Qi(t,e,s){if(s.length==0)return;let i=e.length-2>>1;if(i<t.length)t[t.length-1]=t[t.length-1].append(s);else{for(;t.length<i;)t.push(st.empty);t.push(s)}}function vd(t,e,s){let i=t.inserted;for(let n=0,o=0,r=0;r<t.sections.length;){let l=t.sections[r++],a=t.sections[r++];if(a<0)n+=l,o+=l;else{let d=n,u=o,f=st.empty;for(;d+=l,u+=a,a&&i&&(f=f.append(i[r-2>>1])),!(s||r==t.sections.length||t.sections[r+1]<0);)l=t.sections[r++],a=t.sections[r++];e(n,d,o,u,f),n=d,o=u}}}function yd(t,e,s,i=!1){let n=[],o=i?[]:null,r=new _r(t),l=new _r(e);for(let a=-1;;){if(r.done&&l.len||l.done&&r.len)throw new Error("Mismatched change set lengths");if(r.ins==-1&&l.ins==-1){let d=Math.min(r.len,l.len);Xt(n,d,-1),r.forward(d),l.forward(d)}else if(l.ins>=0&&(r.ins<0||a==r.i||r.off==0&&(l.len<r.len||l.len==r.len&&!s))){let d=l.len;for(Xt(n,l.ins,-1);d;){let u=Math.min(r.len,d);r.ins>=0&&a<r.i&&r.len<=u&&(Xt(n,0,r.ins),o&&Qi(o,n,r.text),a=r.i),r.forward(u),d-=u}l.next()}else if(r.ins>=0){let d=0,u=r.len;for(;u;)if(l.ins==-1){let f=Math.min(u,l.len);d+=f,u-=f,l.forward(f)}else if(l.ins==0&&l.len<u)u-=l.len,l.next();else break;Xt(n,d,a<r.i?r.ins:0),o&&a<r.i&&Qi(o,n,r.text),a=r.i,r.forward(r.len-u)}else{if(r.done&&l.done)return o?Bt.createSet(n,o):ki.create(n);throw new Error("Mismatched change set lengths")}}}function v0(t,e,s=!1){let i=[],n=s?[]:null,o=new _r(t),r=new _r(e);for(let l=!1;;){if(o.done&&r.done)return n?Bt.createSet(i,n):ki.create(i);if(o.ins==0)Xt(i,o.len,0,l),o.next();else if(r.len==0&&!r.done)Xt(i,0,r.ins,l),n&&Qi(n,i,r.text),r.next();else{if(o.done||r.done)throw new Error("Mismatched change set lengths");{let a=Math.min(o.len2,r.len),d=i.length;if(o.ins==-1){let u=r.ins==-1?-1:r.off?0:r.ins;Xt(i,a,u,l),n&&u&&Qi(n,i,r.text)}else r.ins==-1?(Xt(i,o.off?0:o.len,a,l),n&&Qi(n,i,o.textBit(a))):(Xt(i,o.off?0:o.len,r.off?0:r.ins,l),n&&!r.off&&Qi(n,i,r.text));l=(o.ins>a||r.ins>=0&&r.len>a)&&(l||i.length>d),o.forward2(a),r.forward(a)}}}}class _r{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,s=this.i-2>>1;return s>=e.length?st.empty:e[s]}textBit(e){let{inserted:s}=this.set,i=this.i-2>>1;return i>=s.length&&!e?st.empty:s[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Mn{constructor(e,s,i){this.from=e,this.to=s,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,s=-1){let i,n;return this.empty?i=n=e.mapPos(this.from,s):(i=e.mapPos(this.from,1),n=e.mapPos(this.to,-1)),i==this.from&&n==this.to?this:new Mn(i,n,this.flags)}extend(e,s=e){if(e<=this.anchor&&s>=this.anchor)return ue.range(e,s);let i=Math.abs(e-this.anchor)>Math.abs(s-this.anchor)?e:s;return ue.range(this.anchor,i)}eq(e,s=!1){return this.anchor==e.anchor&&this.head==e.head&&(!s||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return ue.range(e.anchor,e.head)}static create(e,s,i){return new Mn(e,s,i)}}class ue{constructor(e,s){this.ranges=e,this.mainIndex=s}map(e,s=-1){return e.empty?this:ue.create(this.ranges.map(i=>i.map(e,s)),this.mainIndex)}eq(e,s=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],s))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new ue([this.main],0)}addRange(e,s=!0){return ue.create([e].concat(this.ranges),s?0:this.mainIndex+1)}replaceRange(e,s=this.mainIndex){let i=this.ranges.slice();return i[s]=e,ue.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new ue(e.ranges.map(s=>Mn.fromJSON(s)),e.main)}static single(e,s=e){return new ue([ue.range(e,s)],0)}static create(e,s=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,n=0;n<e.length;n++){let o=e[n];if(o.empty?o.from<=i:o.from<i)return ue.normalized(e.slice(),s);i=o.to}return new ue(e,s)}static cursor(e,s=0,i,n){return Mn.create(e,e,(s==0?0:s<0?8:16)|(i==null?7:Math.min(6,i))|(n??16777215)<<6)}static range(e,s,i,n){let o=(i??16777215)<<6|(n==null?7:Math.min(6,n));return s<e?Mn.create(s,e,48|o):Mn.create(e,s,(s>e?8:0)|o)}static normalized(e,s=0){let i=e[s];e.sort((n,o)=>n.from-o.from),s=e.indexOf(i);for(let n=1;n<e.length;n++){let o=e[n],r=e[n-1];if(o.empty?o.from<=r.to:o.from<r.to){let l=r.from,a=Math.max(o.to,r.to);n<=s&&s--,e.splice(--n,2,o.anchor>o.head?ue.range(a,l):ue.range(l,a))}}return new ue(e,s)}}function y0(t,e){for(let s of t.ranges)if(s.to>e)throw new RangeError("Selection points outside of document")}let jc=0;class Le{constructor(e,s,i,n,o){this.combine=e,this.compareInput=s,this.compare=i,this.isStatic=n,this.id=jc++,this.default=e([]),this.extensions=typeof o=="function"?o(this):o}get reader(){return this}static define(e={}){return new Le(e.combine||(s=>s),e.compareInput||((s,i)=>s===i),e.compare||(e.combine?(s,i)=>s===i:Rc),!!e.static,e.enables)}of(e){return new Fl([],this,0,e)}compute(e,s){if(this.isStatic)throw new Error("Can't compute a static facet");return new Fl(e,this,1,s)}computeN(e,s){if(this.isStatic)throw new Error("Can't compute a static facet");return new Fl(e,this,2,s)}from(e,s){return s||(s=i=>i),this.compute([e],i=>s(i.field(e)))}}function Rc(t,e){return t==e||t.length==e.length&&t.every((s,i)=>s===e[i])}class Fl{constructor(e,s,i,n){this.dependencies=e,this.facet=s,this.type=i,this.value=n,this.id=jc++}dynamicSlot(e){var s;let i=this.value,n=this.facet.compareInput,o=this.id,r=e[o]>>1,l=this.type==2,a=!1,d=!1,u=[];for(let f of this.dependencies)f=="doc"?a=!0:f=="selection"?d=!0:(((s=e[f.id])!==null&&s!==void 0?s:1)&1)==0&&u.push(e[f.id]);return{create(f){return f.values[r]=i(f),1},update(f,h){if(a&&h.docChanged||d&&(h.docChanged||h.selection)||bd(f,u)){let m=i(f);if(l?!Gh(m,f.values[r],n):!n(m,f.values[r]))return f.values[r]=m,1}return 0},reconfigure:(f,h)=>{let m,w=h.config.address[o];if(w!=null){let p=da(h,w);if(this.dependencies.every(C=>C instanceof Le?h.facet(C)===f.facet(C):C instanceof Yt?h.field(C,!1)==f.field(C,!1):!0)||(l?Gh(m=i(f),p,n):n(m=i(f),p)))return f.values[r]=p,0}else m=i(f);return f.values[r]=m,1}}}}function Gh(t,e,s){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!s(t[i],e[i]))return!1;return!0}function bd(t,e){let s=!1;for(let i of e)lr(t,i)&1&&(s=!0);return s}function iS(t,e,s){let i=s.map(a=>t[a.id]),n=s.map(a=>a.type),o=i.filter(a=>!(a&1)),r=t[e.id]>>1;function l(a){let d=[];for(let u=0;u<i.length;u++){let f=da(a,i[u]);if(n[u]==2)for(let h of f)d.push(h);else d.push(f)}return e.combine(d)}return{create(a){for(let d of i)lr(a,d);return a.values[r]=l(a),1},update(a,d){if(!bd(a,o))return 0;let u=l(a);return e.compare(u,a.values[r])?0:(a.values[r]=u,1)},reconfigure(a,d){let u=bd(a,i),f=d.config.facets[e.id],h=d.facet(e);if(f&&!u&&Rc(s,f))return a.values[r]=h,0;let m=l(a);return e.compare(m,h)?(a.values[r]=h,0):(a.values[r]=m,1)}}}const hl=Le.define({static:!0});class Yt{constructor(e,s,i,n,o){this.id=e,this.createF=s,this.updateF=i,this.compareF=n,this.spec=o,this.provides=void 0}static define(e){let s=new Yt(jc++,e.create,e.update,e.compare||((i,n)=>i===n),e);return e.provide&&(s.provides=e.provide(s)),s}create(e){let s=e.facet(hl).find(i=>i.field==this);return(s?.create||this.createF)(e)}slot(e){let s=e[this.id]>>1;return{create:i=>(i.values[s]=this.create(i),1),update:(i,n)=>{let o=i.values[s],r=this.updateF(o,n);return this.compareF(o,r)?0:(i.values[s]=r,1)},reconfigure:(i,n)=>{let o=i.facet(hl),r=n.facet(hl),l;return(l=o.find(a=>a.field==this))&&l!=r.find(a=>a.field==this)?(i.values[s]=l.create(i),1):n.config.address[this.id]!=null?(i.values[s]=n.field(this),0):(i.values[s]=this.create(i),1)}}}init(e){return[this,hl.of({field:this,create:e})]}get extension(){return this}}const Cn={lowest:4,low:3,default:2,high:1,highest:0};function No(t){return e=>new b0(e,t)}const Hn={highest:No(Cn.highest),high:No(Cn.high),default:No(Cn.default),low:No(Cn.low),lowest:No(Cn.lowest)};class b0{constructor(e,s){this.inner=e,this.prec=s}}class Ka{of(e){return new kd(this,e)}reconfigure(e){return Ka.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class kd{constructor(e,s){this.compartment=e,this.inner=s}}class ua{constructor(e,s,i,n,o,r){for(this.base=e,this.compartments=s,this.dynamicSlots=i,this.address=n,this.staticValues=o,this.facets=r,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let s=this.address[e.id];return s==null?e.default:this.staticValues[s>>1]}static resolve(e,s,i){let n=[],o=Object.create(null),r=new Map;for(let h of nS(e,s,r))h instanceof Yt?n.push(h):(o[h.facet.id]||(o[h.facet.id]=[])).push(h);let l=Object.create(null),a=[],d=[];for(let h of n)l[h.id]=d.length<<1,d.push(m=>h.slot(m));let u=i?.config.facets;for(let h in o){let m=o[h],w=m[0].facet,p=u&&u[h]||[];if(m.every(C=>C.type==0))if(l[w.id]=a.length<<1|1,Rc(p,m))a.push(i.facet(w));else{let C=w.combine(m.map(V=>V.value));a.push(i&&w.compare(C,i.facet(w))?i.facet(w):C)}else{for(let C of m)C.type==0?(l[C.id]=a.length<<1|1,a.push(C.value)):(l[C.id]=d.length<<1,d.push(V=>C.dynamicSlot(V)));l[w.id]=d.length<<1,d.push(C=>iS(C,w,m))}}let f=d.map(h=>h(l));return new ua(e,r,f,l,a,o)}}function nS(t,e,s){let i=[[],[],[],[],[]],n=new Map;function o(r,l){let a=n.get(r);if(a!=null){if(a<=l)return;let d=i[a].indexOf(r);d>-1&&i[a].splice(d,1),r instanceof kd&&s.delete(r.compartment)}if(n.set(r,l),Array.isArray(r))for(let d of r)o(d,l);else if(r instanceof kd){if(s.has(r.compartment))throw new RangeError("Duplicate use of compartment in extensions");let d=e.get(r.compartment)||r.inner;s.set(r.compartment,d),o(d,l)}else if(r instanceof b0)o(r.inner,r.prec);else if(r instanceof Yt)i[l].push(r),r.provides&&o(r.provides,l);else if(r instanceof Fl)i[l].push(r),r.facet.extensions&&o(r.facet.extensions,Cn.default);else{let d=r.extension;if(!d)throw new Error(`Unrecognized extension value in extension set (${r}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(d,l)}}return o(t,Cn.default),i.reduce((r,l)=>r.concat(l))}function lr(t,e){if(e&1)return 2;let s=e>>1,i=t.status[s];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;t.status[s]=4;let n=t.computeSlot(t,t.config.dynamicSlots[s]);return t.status[s]=2|n}function da(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const k0=Le.define(),xd=Le.define({combine:t=>t.some(e=>e),static:!0}),x0=Le.define({combine:t=>t.length?t[0]:void 0,static:!0}),w0=Le.define(),_0=Le.define(),S0=Le.define(),C0=Le.define({combine:t=>t.length?t[0]:!1});class Ni{constructor(e,s){this.type=e,this.value=s}static define(){return new oS}}class oS{of(e){return new Ni(this,e)}}class rS{constructor(e){this.map=e}of(e){return new Ke(this,e)}}class Ke{constructor(e,s){this.type=e,this.value=s}map(e){let s=this.type.map(this.value,e);return s===void 0?void 0:s==this.value?this:new Ke(this.type,s)}is(e){return this.type==e}static define(e={}){return new rS(e.map||(s=>s))}static mapEffects(e,s){if(!e.length)return e;let i=[];for(let n of e){let o=n.map(s);o&&i.push(o)}return i}}Ke.reconfigure=Ke.define();Ke.appendConfig=Ke.define();class It{constructor(e,s,i,n,o,r){this.startState=e,this.changes=s,this.selection=i,this.effects=n,this.annotations=o,this.scrollIntoView=r,this._doc=null,this._state=null,i&&y0(i,s.newLength),o.some(l=>l.type==It.time)||(this.annotations=o.concat(It.time.of(Date.now())))}static create(e,s,i,n,o,r){return new It(e,s,i,n,o,r)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let s of this.annotations)if(s.type==e)return s.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let s=this.annotation(It.userEvent);return!!(s&&(s==e||s.length>e.length&&s.slice(0,e.length)==e&&s[e.length]=="."))}}It.time=Ni.define();It.userEvent=Ni.define();It.addToHistory=Ni.define();It.remote=Ni.define();function lS(t,e){let s=[];for(let i=0,n=0;;){let o,r;if(i<t.length&&(n==e.length||e[n]>=t[i]))o=t[i++],r=t[i++];else if(n<e.length)o=e[n++],r=e[n++];else return s;!s.length||s[s.length-1]<o?s.push(o,r):s[s.length-1]<r&&(s[s.length-1]=r)}}function A0(t,e,s){var i;let n,o,r;return s?(n=e.changes,o=Bt.empty(e.changes.length),r=t.changes.compose(e.changes)):(n=e.changes.map(t.changes),o=t.changes.mapDesc(e.changes,!0),r=t.changes.compose(n)),{changes:r,selection:e.selection?e.selection.map(o):(i=t.selection)===null||i===void 0?void 0:i.map(n),effects:Ke.mapEffects(t.effects,n).concat(Ke.mapEffects(e.effects,o)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function wd(t,e,s){let i=e.selection,n=uo(e.annotations);return e.userEvent&&(n=n.concat(It.userEvent.of(e.userEvent))),{changes:e.changes instanceof Bt?e.changes:Bt.of(e.changes||[],s,t.facet(x0)),selection:i&&(i instanceof ue?i:ue.single(i.anchor,i.head)),effects:uo(e.effects),annotations:n,scrollIntoView:!!e.scrollIntoView}}function V0(t,e,s){let i=wd(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(s=!1);for(let o=1;o<e.length;o++){e[o].filter===!1&&(s=!1);let r=!!e[o].sequential;i=A0(i,wd(t,e[o],r?i.changes.newLength:t.doc.length),r)}let n=It.create(t,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return uS(s?aS(n):n)}function aS(t){let e=t.startState,s=!0;for(let n of e.facet(w0)){let o=n(t);if(o===!1){s=!1;break}Array.isArray(o)&&(s=s===!0?o:lS(s,o))}if(s!==!0){let n,o;if(s===!1)o=t.changes.invertedDesc,n=Bt.empty(e.doc.length);else{let r=t.changes.filter(s);n=r.changes,o=r.filtered.mapDesc(r.changes).invertedDesc}t=It.create(e,n,t.selection&&t.selection.map(o),Ke.mapEffects(t.effects,o),t.annotations,t.scrollIntoView)}let i=e.facet(_0);for(let n=i.length-1;n>=0;n--){let o=i[n](t);o instanceof It?t=o:Array.isArray(o)&&o.length==1&&o[0]instanceof It?t=o[0]:t=V0(e,uo(o),!1)}return t}function uS(t){let e=t.startState,s=e.facet(S0),i=t;for(let n=s.length-1;n>=0;n--){let o=s[n](t);o&&Object.keys(o).length&&(i=A0(i,wd(e,o,t.changes.newLength),!0))}return i==t?t:It.create(e,t.changes,t.selection,i.effects,i.annotations,i.scrollIntoView)}const dS=[];function uo(t){return t==null?dS:Array.isArray(t)?t:[t]}var wt=(function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t})(wt||(wt={}));const cS=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let _d;try{_d=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function fS(t){if(_d)return _d.test(t);for(let e=0;e<t.length;e++){let s=t[e];if(/\w/.test(s)||s>""&&(s.toUpperCase()!=s.toLowerCase()||cS.test(s)))return!0}return!1}function hS(t){return e=>{if(!/\S/.test(e))return wt.Space;if(fS(e))return wt.Word;for(let s=0;s<t.length;s++)if(e.indexOf(t[s])>-1)return wt.Word;return wt.Other}}class et{constructor(e,s,i,n,o,r){this.config=e,this.doc=s,this.selection=i,this.values=n,this.status=e.statusTemplate.slice(),this.computeSlot=o,r&&(r._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)lr(this,l<<1);this.computeSlot=null}field(e,s=!0){let i=this.config.address[e.id];if(i==null){if(s)throw new RangeError("Field is not present in this state");return}return lr(this,i),da(this,i)}update(...e){return V0(this,e,!0)}applyTransaction(e){let s=this.config,{base:i,compartments:n}=s;for(let l of e.effects)l.is(Ka.reconfigure)?(s&&(n=new Map,s.compartments.forEach((a,d)=>n.set(d,a)),s=null),n.set(l.value.compartment,l.value.extension)):l.is(Ke.reconfigure)?(s=null,i=l.value):l.is(Ke.appendConfig)&&(s=null,i=uo(i).concat(l.value));let o;s?o=e.startState.values.slice():(s=ua.resolve(i,n,this),o=new et(s,this.doc,this.selection,s.dynamicSlots.map(()=>null),(a,d)=>d.reconfigure(a,this),null).values);let r=e.startState.facet(xd)?e.newSelection:e.newSelection.asSingle();new et(s,e.newDoc,r,o,(l,a)=>a.update(l,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(s=>({changes:{from:s.from,to:s.to,insert:e},range:ue.cursor(s.from+e.length)}))}changeByRange(e){let s=this.selection,i=e(s.ranges[0]),n=this.changes(i.changes),o=[i.range],r=uo(i.effects);for(let l=1;l<s.ranges.length;l++){let a=e(s.ranges[l]),d=this.changes(a.changes),u=d.map(n);for(let h=0;h<l;h++)o[h]=o[h].map(u);let f=n.mapDesc(d,!0);o.push(a.range.map(f)),n=n.compose(u),r=Ke.mapEffects(r,u).concat(Ke.mapEffects(uo(a.effects),f))}return{changes:n,selection:ue.create(o,s.mainIndex),effects:r}}changes(e=[]){return e instanceof Bt?e:Bt.of(e,this.doc.length,this.facet(et.lineSeparator))}toText(e){return st.of(e.split(this.facet(et.lineSeparator)||gd))}sliceDoc(e=0,s=this.doc.length){return this.doc.sliceString(e,s,this.lineBreak)}facet(e){let s=this.config.address[e.id];return s==null?e.default:(lr(this,s),da(this,s))}toJSON(e){let s={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let n=e[i];n instanceof Yt&&this.config.address[n.id]!=null&&(s[i]=n.spec.toJSON(this.field(e[i]),this))}return s}static fromJSON(e,s={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let n=[];if(i){for(let o in i)if(Object.prototype.hasOwnProperty.call(e,o)){let r=i[o],l=e[o];n.push(r.init(a=>r.spec.fromJSON(l,a)))}}return et.create({doc:e.doc,selection:ue.fromJSON(e.selection),extensions:s.extensions?n.concat([s.extensions]):n})}static create(e={}){let s=ua.resolve(e.extensions||[],new Map),i=e.doc instanceof st?e.doc:st.of((e.doc||"").split(s.staticFacet(et.lineSeparator)||gd)),n=e.selection?e.selection instanceof ue?e.selection:ue.single(e.selection.anchor,e.selection.head):ue.single(0);return y0(n,i.length),s.staticFacet(xd)||(n=n.asSingle()),new et(s,i,n,s.dynamicSlots.map(()=>null),(o,r)=>r.create(o),null)}get tabSize(){return this.facet(et.tabSize)}get lineBreak(){return this.facet(et.lineSeparator)||`
`}get readOnly(){return this.facet(C0)}phrase(e,...s){for(let i of this.facet(et.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return s.length&&(e=e.replace(/\$(\$|\d*)/g,(i,n)=>{if(n=="$")return"$";let o=+(n||1);return!o||o>s.length?i:s[o-1]})),e}languageDataAt(e,s,i=-1){let n=[];for(let o of this.facet(k0))for(let r of o(this,s,i))Object.prototype.hasOwnProperty.call(r,e)&&n.push(r[e]);return n}charCategorizer(e){return hS(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:s,from:i,length:n}=this.doc.lineAt(e),o=this.charCategorizer(e),r=e-i,l=e-i;for(;r>0;){let a=Jt(s,r,!1);if(o(s.slice(a,r))!=wt.Word)break;r=a}for(;l<n;){let a=Jt(s,l);if(o(s.slice(l,a))!=wt.Word)break;l=a}return r==l?null:ue.range(r+i,l+i)}}et.allowMultipleSelections=xd;et.tabSize=Le.define({combine:t=>t.length?t[0]:4});et.lineSeparator=x0;et.readOnly=C0;et.phrases=Le.define({compare(t,e){let s=Object.keys(t),i=Object.keys(e);return s.length==i.length&&s.every(n=>t[n]==e[n])}});et.languageData=k0;et.changeFilter=w0;et.transactionFilter=_0;et.transactionExtender=S0;Ka.reconfigure=Ke.define();function wi(t,e,s={}){let i={};for(let n of t)for(let o of Object.keys(n)){let r=n[o],l=i[o];if(l===void 0)i[o]=r;else if(!(l===r||r===void 0))if(Object.hasOwnProperty.call(s,o))i[o]=s[o](l,r);else throw new Error("Config merge conflict for field "+o)}for(let n in e)i[n]===void 0&&(i[n]=e[n]);return i}class Rn{eq(e){return this==e}range(e,s=e){return Sd.create(e,s,this)}}Rn.prototype.startSide=Rn.prototype.endSide=0;Rn.prototype.point=!1;Rn.prototype.mapMode=fs.TrackDel;let Sd=class M0{constructor(e,s,i){this.from=e,this.to=s,this.value=i}static create(e,s,i){return new M0(e,s,i)}};function Cd(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class Bc{constructor(e,s,i,n){this.from=e,this.to=s,this.value=i,this.maxPoint=n}get length(){return this.to[this.to.length-1]}findIndex(e,s,i,n=0){let o=i?this.to:this.from;for(let r=n,l=o.length;;){if(r==l)return r;let a=r+l>>1,d=o[a]-e||(i?this.value[a].endSide:this.value[a].startSide)-s;if(a==r)return d>=0?r:l;d>=0?l=a:r=a+1}}between(e,s,i,n){for(let o=this.findIndex(s,-1e9,!0),r=this.findIndex(i,1e9,!1,o);o<r;o++)if(n(this.from[o]+e,this.to[o]+e,this.value[o])===!1)return!1}map(e,s){let i=[],n=[],o=[],r=-1,l=-1;for(let a=0;a<this.value.length;a++){let d=this.value[a],u=this.from[a]+e,f=this.to[a]+e,h,m;if(u==f){let w=s.mapPos(u,d.startSide,d.mapMode);if(w==null||(h=m=w,d.startSide!=d.endSide&&(m=s.mapPos(u,d.endSide),m<h)))continue}else if(h=s.mapPos(u,d.startSide),m=s.mapPos(f,d.endSide),h>m||h==m&&d.startSide>0&&d.endSide<=0)continue;(m-h||d.endSide-d.startSide)<0||(r<0&&(r=h),d.point&&(l=Math.max(l,m-h)),i.push(d),n.push(h-r),o.push(m-r))}return{mapped:i.length?new Bc(n,o,i,l):null,pos:r}}}class tt{constructor(e,s,i,n){this.chunkPos=e,this.chunk=s,this.nextLayer=i,this.maxPoint=n}static create(e,s,i,n){return new tt(e,s,i,n)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let s of this.chunk)e+=s.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:s=[],sort:i=!1,filterFrom:n=0,filterTo:o=this.length}=e,r=e.filter;if(s.length==0&&!r)return this;if(i&&(s=s.slice().sort(Cd)),this.isEmpty)return s.length?tt.of(s):this;let l=new D0(this,null,-1).goto(0),a=0,d=[],u=new Ri;for(;l.value||a<s.length;)if(a<s.length&&(l.from-s[a].from||l.startSide-s[a].value.startSide)>=0){let f=s[a++];u.addInner(f.from,f.to,f.value)||d.push(f)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(a==s.length||this.chunkEnd(l.chunkIndex)<s[a].from)&&(!r||n>this.chunkEnd(l.chunkIndex)||o<this.chunkPos[l.chunkIndex])&&u.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!r||n>l.to||o<l.from||r(l.from,l.to,l.value))&&(u.addInner(l.from,l.to,l.value)||d.push(Sd.create(l.from,l.to,l.value))),l.next());return u.finishInner(this.nextLayer.isEmpty&&!d.length?tt.empty:this.nextLayer.update({add:d,filter:r,filterFrom:n,filterTo:o}))}map(e){if(e.empty||this.isEmpty)return this;let s=[],i=[],n=-1;for(let r=0;r<this.chunk.length;r++){let l=this.chunkPos[r],a=this.chunk[r],d=e.touchesRange(l,l+a.length);if(d===!1)n=Math.max(n,a.maxPoint),s.push(a),i.push(e.mapPos(l));else if(d===!0){let{mapped:u,pos:f}=a.map(l,e);u&&(n=Math.max(n,u.maxPoint),s.push(u),i.push(f))}}let o=this.nextLayer.map(e);return s.length==0?o:new tt(i,s,o||tt.empty,n)}between(e,s,i){if(!this.isEmpty){for(let n=0;n<this.chunk.length;n++){let o=this.chunkPos[n],r=this.chunk[n];if(s>=o&&e<=o+r.length&&r.between(o,e-o,s-o,i)===!1)return}this.nextLayer.between(e,s,i)}}iter(e=0){return Sr.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,s=0){return Sr.from(e).goto(s)}static compare(e,s,i,n,o=-1){let r=e.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=o),l=s.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=o),a=Jh(r,l,i),d=new zo(r,a,o),u=new zo(l,a,o);i.iterGaps((f,h,m)=>Yh(d,f,u,h,m,n)),i.empty&&i.length==0&&Yh(d,0,u,0,0,n)}static eq(e,s,i=0,n){n==null&&(n=999999999);let o=e.filter(u=>!u.isEmpty&&s.indexOf(u)<0),r=s.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(o.length!=r.length)return!1;if(!o.length)return!0;let l=Jh(o,r),a=new zo(o,l,0).goto(i),d=new zo(r,l,0).goto(i);for(;;){if(a.to!=d.to||!Ad(a.active,d.active)||a.point&&(!d.point||!a.point.eq(d.point)))return!1;if(a.to>n)return!0;a.next(),d.next()}}static spans(e,s,i,n,o=-1){let r=new zo(e,null,o).goto(s),l=s,a=r.openStart;for(;;){let d=Math.min(r.to,i);if(r.point){let u=r.activeForPoint(r.to),f=r.pointFrom<s?u.length+1:r.point.startSide<0?u.length:Math.min(u.length,a);n.point(l,d,r.point,u,f,r.pointRank),a=Math.min(r.openEnd(d),u.length)}else d>l&&(n.span(l,d,r.active,a),a=r.openEnd(d));if(r.to>i)return a+(r.point&&r.to>i?1:0);l=r.to,r.next()}}static of(e,s=!1){let i=new Ri;for(let n of e instanceof Sd?[e]:s?pS(e):e)i.add(n.from,n.to,n.value);return i.finish()}static join(e){if(!e.length)return tt.empty;let s=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let n=e[i];n!=tt.empty;n=n.nextLayer)s=new tt(n.chunkPos,n.chunk,s,Math.max(n.maxPoint,s.maxPoint));return s}}tt.empty=new tt([],[],null,-1);function pS(t){if(t.length>1)for(let e=t[0],s=1;s<t.length;s++){let i=t[s];if(Cd(e,i)>0)return t.slice().sort(Cd);e=i}return t}tt.empty.nextLayer=tt.empty;class Ri{finishChunk(e){this.chunks.push(new Bc(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,s,i){this.addInner(e,s,i)||(this.nextLayer||(this.nextLayer=new Ri)).add(e,s,i)}addInner(e,s,i){let n=e-this.lastTo||i.startSide-this.last.endSide;if(n<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return n<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(s-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=s,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,s-e)),!0)}addChunk(e,s){if((e-this.lastTo||s.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,s.maxPoint),this.chunks.push(s),this.chunkPos.push(e);let i=s.value.length-1;return this.last=s.value[i],this.lastFrom=s.from[i]+e,this.lastTo=s.to[i]+e,!0}finish(){return this.finishInner(tt.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let s=tt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,s}}function Jh(t,e,s){let i=new Map;for(let o of t)for(let r=0;r<o.chunk.length;r++)o.chunk[r].maxPoint<=0&&i.set(o.chunk[r],o.chunkPos[r]);let n=new Set;for(let o of e)for(let r=0;r<o.chunk.length;r++){let l=i.get(o.chunk[r]);l!=null&&(s?s.mapPos(l):l)==o.chunkPos[r]&&!s?.touchesRange(l,l+o.chunk[r].length)&&n.add(o.chunk[r])}return n}class D0{constructor(e,s,i,n=0){this.layer=e,this.skip=s,this.minPoint=i,this.rank=n}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,s=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,s,!1),this}gotoInner(e,s,i){for(;this.chunkIndex<this.layer.chunk.length;){let n=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(n)||this.layer.chunkEnd(this.chunkIndex)<e||n.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let n=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],s,!0);(!i||this.rangeIndex<n)&&this.setRangeIndex(n)}this.next()}forward(e,s){(this.to-e||this.endSide-s)<0&&this.gotoInner(e,s,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],s=this.layer.chunk[this.chunkIndex],i=e+s.from[this.rangeIndex];if(this.from=i,this.to=e+s.to[this.rangeIndex],this.value=s.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Sr{constructor(e){this.heap=e}static from(e,s=null,i=-1){let n=[];for(let o=0;o<e.length;o++)for(let r=e[o];!r.isEmpty;r=r.nextLayer)r.maxPoint>=i&&n.push(new D0(r,s,i,o));return n.length==1?n[0]:new Sr(n)}get startSide(){return this.value?this.value.startSide:0}goto(e,s=-1e9){for(let i of this.heap)i.goto(e,s);for(let i=this.heap.length>>1;i>=0;i--)Su(this.heap,i);return this.next(),this}forward(e,s){for(let i of this.heap)i.forward(e,s);for(let i=this.heap.length>>1;i>=0;i--)Su(this.heap,i);(this.to-e||this.value.endSide-s)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Su(this.heap,0)}}}function Su(t,e){for(let s=t[e];;){let i=(e<<1)+1;if(i>=t.length)break;let n=t[i];if(i+1<t.length&&n.compare(t[i+1])>=0&&(n=t[i+1],i++),s.compare(n)<0)break;t[i]=s,t[e]=n,e=i}}class zo{constructor(e,s,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Sr.from(e,s,i)}goto(e,s=-1e9){return this.cursor.goto(e,s),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=s,this.openStart=-1,this.next(),this}forward(e,s){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-s)<0;)this.removeActive(this.minActive);this.cursor.forward(e,s)}removeActive(e){pl(this.active,e),pl(this.activeTo,e),pl(this.activeRank,e),this.minActive=Qh(this.active,this.activeTo)}addActive(e){let s=0,{value:i,to:n,rank:o}=this.cursor;for(;s<this.activeRank.length&&(o-this.activeRank[s]||n-this.activeTo[s])>0;)s++;ml(this.active,s,i),ml(this.activeTo,s,n),ml(this.activeRank,s,o),e&&ml(e,s,this.cursor.from),this.minActive=Qh(this.active,this.activeTo)}next(){let e=this.to,s=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let n=this.minActive;if(n>-1&&(this.activeTo[n]-this.cursor.from||this.active[n].endSide-this.cursor.startSide)<0){if(this.activeTo[n]>e){this.to=this.activeTo[n],this.endSide=this.active[n].endSide;break}this.removeActive(n),i&&pl(i,n)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let o=this.cursor.value;if(!o.point)this.addActive(i),this.cursor.next();else if(s&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=o,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=o.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let n=i.length-1;n>=0&&i[n]<e;n--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let s=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&s.push(this.active[i]);return s.reverse()}openEnd(e){let s=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)s++;return s}}function Yh(t,e,s,i,n,o){t.goto(e),s.goto(i);let r=i+n,l=i,a=i-e;for(;;){let d=t.to+a-s.to,u=d||t.endSide-s.endSide,f=u<0?t.to+a:s.to,h=Math.min(f,r);if(t.point||s.point?t.point&&s.point&&(t.point==s.point||t.point.eq(s.point))&&Ad(t.activeForPoint(t.to),s.activeForPoint(s.to))||o.comparePoint(l,h,t.point,s.point):h>l&&!Ad(t.active,s.active)&&o.compareRange(l,h,t.active,s.active),f>r)break;(d||t.openEnd!=s.openEnd)&&o.boundChange&&o.boundChange(f),l=f,u<=0&&t.next(),u>=0&&s.next()}}function Ad(t,e){if(t.length!=e.length)return!1;for(let s=0;s<t.length;s++)if(t[s]!=e[s]&&!t[s].eq(e[s]))return!1;return!0}function pl(t,e){for(let s=e,i=t.length-1;s<i;s++)t[s]=t[s+1];t.pop()}function ml(t,e,s){for(let i=t.length-1;i>=e;i--)t[i+1]=t[i];t[e]=s}function Qh(t,e){let s=-1,i=1e9;for(let n=0;n<e.length;n++)(e[n]-i||t[n].endSide-t[s].endSide)<0&&(s=n,i=e[n]);return s}function To(t,e,s=t.length){let i=0;for(let n=0;n<s&&n<t.length;)t.charCodeAt(n)==9?(i+=e-i%e,n++):(i++,n=Jt(t,n));return i}function Vd(t,e,s,i){for(let n=0,o=0;;){if(o>=e)return n;if(n==t.length)break;o+=t.charCodeAt(n)==9?s-o%s:1,n=Jt(t,n)}return i===!0?-1:t.length}const Md="",Xh=typeof Symbol>"u"?"__"+Md:Symbol.for(Md),Dd=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Zh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class ln{constructor(e,s){this.rules=[];let{finish:i}=s||{};function n(r){return/^@/.test(r)?[r]:r.split(/,\s*/)}function o(r,l,a,d){let u=[],f=/^@(\w+)\b/.exec(r[0]),h=f&&f[1]=="keyframes";if(f&&l==null)return a.push(r[0]+";");for(let m in l){let w=l[m];if(/&/.test(m))o(m.split(/,\s*/).map(p=>r.map(C=>p.replace(/&/,C))).reduce((p,C)=>p.concat(C)),w,a);else if(w&&typeof w=="object"){if(!f)throw new RangeError("The value of a property ("+m+") should be a primitive value.");o(n(m),w,u,h)}else w!=null&&u.push(m.replace(/_.*/,"").replace(/[A-Z]/g,p=>"-"+p.toLowerCase())+": "+w+";")}(u.length||h)&&a.push((i&&!f&&!d?r.map(i):r).join(", ")+" {"+u.join(" ")+"}")}for(let r in e)o(n(r),e[r],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=Zh[Xh]||1;return Zh[Xh]=e+1,Md+e.toString(36)}static mount(e,s,i){let n=e[Dd],o=i&&i.nonce;n?o&&n.setNonce(o):n=new mS(e,o),n.mount(Array.isArray(s)?s:[s],e)}}let ep=new Map;class mS{constructor(e,s){let i=e.ownerDocument||e,n=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&n.CSSStyleSheet){let o=ep.get(i);if(o)return e[Dd]=o;this.sheet=new n.CSSStyleSheet,ep.set(i,this)}else this.styleTag=i.createElement("style"),s&&this.styleTag.setAttribute("nonce",s);this.modules=[],e[Dd]=this}mount(e,s){let i=this.sheet,n=0,o=0;for(let r=0;r<e.length;r++){let l=e[r],a=this.modules.indexOf(l);if(a<o&&a>-1&&(this.modules.splice(a,1),o--,a=-1),a==-1){if(this.modules.splice(o++,0,l),i)for(let d=0;d<l.rules.length;d++)i.insertRule(l.rules[d],n++)}else{for(;o<a;)n+=this.modules[o++].rules.length;n+=l.rules.length,o++}}if(i)s.adoptedStyleSheets.indexOf(this.sheet)<0&&(s.adoptedStyleSheets=[this.sheet,...s.adoptedStyleSheets]);else{let r="";for(let a=0;a<this.modules.length;a++)r+=this.modules[a].getRules()+`
`;this.styleTag.textContent=r;let l=s.head||s;this.styleTag.parentNode!=l&&l.insertBefore(this.styleTag,l.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var an={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Cr={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},gS=typeof navigator<"u"&&/Mac/.test(navigator.platform),vS=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var qt=0;qt<10;qt++)an[48+qt]=an[96+qt]=String(qt);for(var qt=1;qt<=24;qt++)an[qt+111]="F"+qt;for(var qt=65;qt<=90;qt++)an[qt]=String.fromCharCode(qt+32),Cr[qt]=String.fromCharCode(qt);for(var Cu in an)Cr.hasOwnProperty(Cu)||(Cr[Cu]=an[Cu]);function yS(t){var e=gS&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||vS&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",s=!e&&t.key||(t.shiftKey?Cr:an)[t.keyCode]||t.key||"Unidentified";return s=="Esc"&&(s="Escape"),s=="Del"&&(s="Delete"),s=="Left"&&(s="ArrowLeft"),s=="Up"&&(s="ArrowUp"),s=="Right"&&(s="ArrowRight"),s=="Down"&&(s="ArrowDown"),s}function ft(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,s=arguments[1];if(s&&typeof s=="object"&&s.nodeType==null&&!Array.isArray(s)){for(var i in s)if(Object.prototype.hasOwnProperty.call(s,i)){var n=s[i];typeof n=="string"?t.setAttribute(i,n):n!=null&&(t[i]=n)}e++}for(;e<arguments.length;e++)$0(t,arguments[e]);return t}function $0(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var s=0;s<e.length;s++)$0(t,e[s]);else throw new RangeError("Unsupported child node: "+e)}let ds=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},$d=typeof document<"u"?document:{documentElement:{style:{}}};const Td=/Edge\/(\d+)/.exec(ds.userAgent),T0=/MSIE \d/.test(ds.userAgent),Ed=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ds.userAgent),Ga=!!(T0||Ed||Td),tp=!Ga&&/gecko\/(\d+)/i.test(ds.userAgent),Au=!Ga&&/Chrome\/(\d+)/.exec(ds.userAgent),bS="webkitFontSmoothing"in $d.documentElement.style,Od=!Ga&&/Apple Computer/.test(ds.vendor),sp=Od&&(/Mobile\/\w+/.test(ds.userAgent)||ds.maxTouchPoints>2);var Te={mac:sp||/Mac/.test(ds.platform),windows:/Win/.test(ds.platform),linux:/Linux|X11/.test(ds.platform),ie:Ga,ie_version:T0?$d.documentMode||6:Ed?+Ed[1]:Td?+Td[1]:0,gecko:tp,gecko_version:tp?+(/Firefox\/(\d+)/.exec(ds.userAgent)||[0,0])[1]:0,chrome:!!Au,chrome_version:Au?+Au[1]:0,ios:sp,android:/Android\b/.test(ds.userAgent),webkit_version:bS?+(/\bAppleWebKit\/(\d+)/.exec(ds.userAgent)||[0,0])[1]:0,safari:Od,safari_version:Od?+(/\bVersion\/(\d+(\.\d+)?)/.exec(ds.userAgent)||[0,0])[1]:0,tabSize:$d.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function Ar(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function Pd(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function Hl(t,e){if(!e.anchorNode)return!1;try{return Pd(t,e.anchorNode)}catch{return!1}}function Vr(t){return t.nodeType==3?In(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function ar(t,e,s,i){return s?ip(t,e,s,i,-1)||ip(t,e,s,i,1):!1}function Bn(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function ca(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function ip(t,e,s,i,n){for(;;){if(t==s&&e==i)return!0;if(e==(n<0?0:xi(t))){if(t.nodeName=="DIV")return!1;let o=t.parentNode;if(!o||o.nodeType!=1)return!1;e=Bn(t)+(n<0?0:1),t=o}else if(t.nodeType==1){if(t=t.childNodes[e+(n<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=n<0?xi(t):0}else return!1}}function xi(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Ja(t,e){let s=e?t.left:t.right;return{left:s,right:s,top:t.top,bottom:t.bottom}}function kS(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function E0(t,e){let s=e.width/t.offsetWidth,i=e.height/t.offsetHeight;return(s>.995&&s<1.005||!isFinite(s)||Math.abs(e.width-t.offsetWidth)<1)&&(s=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-t.offsetHeight)<1)&&(i=1),{scaleX:s,scaleY:i}}function xS(t,e,s,i,n,o,r,l){let a=t.ownerDocument,d=a.defaultView||window;for(let u=t,f=!1;u&&!f;)if(u.nodeType==1){let h,m=u==a.body,w=1,p=1;if(m)h=kS(d);else{if(/^(fixed|sticky)$/.test(getComputedStyle(u).position)&&(f=!0),u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let U=u.getBoundingClientRect();({scaleX:w,scaleY:p}=E0(u,U)),h={left:U.left,right:U.left+u.clientWidth*w,top:U.top,bottom:U.top+u.clientHeight*p}}let C=0,V=0;if(n=="nearest")e.top<h.top?(V=e.top-(h.top+r),s>0&&e.bottom>h.bottom+V&&(V=e.bottom-h.bottom+r)):e.bottom>h.bottom&&(V=e.bottom-h.bottom+r,s<0&&e.top-V<h.top&&(V=e.top-(h.top+r)));else{let U=e.bottom-e.top,B=h.bottom-h.top;V=(n=="center"&&U<=B?e.top+U/2-B/2:n=="start"||n=="center"&&s<0?e.top-r:e.bottom-B+r)-h.top}if(i=="nearest"?e.left<h.left?(C=e.left-(h.left+o),s>0&&e.right>h.right+C&&(C=e.right-h.right+o)):e.right>h.right&&(C=e.right-h.right+o,s<0&&e.left<h.left+C&&(C=e.left-(h.left+o))):C=(i=="center"?e.left+(e.right-e.left)/2-(h.right-h.left)/2:i=="start"==l?e.left-o:e.right-(h.right-h.left)+o)-h.left,C||V)if(m)d.scrollBy(C,V);else{let U=0,B=0;if(V){let H=u.scrollTop;u.scrollTop+=V/p,B=(u.scrollTop-H)*p}if(C){let H=u.scrollLeft;u.scrollLeft+=C/w,U=(u.scrollLeft-H)*w}e={left:e.left-U,top:e.top-B,right:e.right-U,bottom:e.bottom-B},U&&Math.abs(U-C)<1&&(i="nearest"),B&&Math.abs(B-V)<1&&(n="nearest")}if(m)break;(e.top<h.top||e.bottom>h.bottom||e.left<h.left||e.right>h.right)&&(e={left:Math.max(e.left,h.left),right:Math.min(e.right,h.right),top:Math.max(e.top,h.top),bottom:Math.min(e.bottom,h.bottom)}),u=u.assignedSlot||u.parentNode}else if(u.nodeType==11)u=u.host;else break}function wS(t){let e=t.ownerDocument,s,i;for(let n=t.parentNode;n&&!(n==e.body||s&&i);)if(n.nodeType==1)!i&&n.scrollHeight>n.clientHeight&&(i=n),!s&&n.scrollWidth>n.clientWidth&&(s=n),n=n.assignedSlot||n.parentNode;else if(n.nodeType==11)n=n.host;else break;return{x:s,y:i}}class _S{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:s,focusNode:i}=e;this.set(s,Math.min(e.anchorOffset,s?xi(s):0),i,Math.min(e.focusOffset,i?xi(i):0))}set(e,s,i,n){this.anchorNode=e,this.anchorOffset=s,this.focusNode=i,this.focusOffset=n}}let _n=null;Te.safari&&Te.safari_version>=26&&(_n=!1);function O0(t){if(t.setActive)return t.setActive();if(_n)return t.focus(_n);let e=[];for(let s=t;s&&(e.push(s,s.scrollTop,s.scrollLeft),s!=s.ownerDocument);s=s.parentNode);if(t.focus(_n==null?{get preventScroll(){return _n={preventScroll:!0},!0}}:void 0),!_n){_n=!1;for(let s=0;s<e.length;){let i=e[s++],n=e[s++],o=e[s++];i.scrollTop!=n&&(i.scrollTop=n),i.scrollLeft!=o&&(i.scrollLeft=o)}}}let np;function In(t,e,s=e){let i=np||(np=document.createRange());return i.setEnd(t,s),i.setStart(t,e),i}function co(t,e,s,i){let n={key:e,code:e,keyCode:s,which:s,cancelable:!0};i&&({altKey:n.altKey,ctrlKey:n.ctrlKey,shiftKey:n.shiftKey,metaKey:n.metaKey}=i);let o=new KeyboardEvent("keydown",n);o.synthetic=!0,t.dispatchEvent(o);let r=new KeyboardEvent("keyup",n);return r.synthetic=!0,t.dispatchEvent(r),o.defaultPrevented||r.defaultPrevented}function SS(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function P0(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function CS(t,e){let s=e.focusNode,i=e.focusOffset;if(!s||e.anchorNode!=s||e.anchorOffset!=i)return!1;for(i=Math.min(i,xi(s));;)if(i){if(s.nodeType!=1)return!1;let n=s.childNodes[i-1];n.contentEditable=="false"?i--:(s=n,i=xi(s))}else{if(s==t)return!0;i=Bn(s),s=s.parentNode}}function L0(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function j0(t,e){for(let s=t,i=e;;){if(s.nodeType==3&&i>0)return{node:s,offset:i};if(s.nodeType==1&&i>0){if(s.contentEditable=="false")return null;s=s.childNodes[i-1],i=xi(s)}else if(s.parentNode&&!ca(s))i=Bn(s),s=s.parentNode;else return null}}function R0(t,e){for(let s=t,i=e;;){if(s.nodeType==3&&i<s.nodeValue.length)return{node:s,offset:i};if(s.nodeType==1&&i<s.childNodes.length){if(s.contentEditable=="false")return null;s=s.childNodes[i],i=0}else if(s.parentNode&&!ca(s))i=Bn(s)+1,s=s.parentNode;else return null}}class ss{constructor(e,s,i=!0){this.node=e,this.offset=s,this.precise=i}static before(e,s){return new ss(e.parentNode,Bn(e),s)}static after(e,s){return new ss(e.parentNode,Bn(e)+1,s)}}const Ic=[];class ut{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let s=this.posAtStart;for(let i of this.children){if(i==e)return s;s+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,s){if(this.flags&2){let i=this.dom,n=null,o;for(let r of this.children){if(r.flags&7){if(!r.dom&&(o=n?n.nextSibling:i.firstChild)){let l=ut.get(o);(!l||!l.parent&&l.canReuseDOM(r))&&r.reuseDOM(o)}r.sync(e,s),r.flags&=-8}if(o=n?n.nextSibling:i.firstChild,s&&!s.written&&s.node==i&&o!=r.dom&&(s.written=!0),r.dom.parentNode==i)for(;o&&o!=r.dom;)o=op(o);else i.insertBefore(r.dom,o);n=r.dom}for(o=n?n.nextSibling:i.firstChild,o&&s&&s.node==i&&(s.written=!0);o;)o=op(o)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,s),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,s){let i;if(e==this.dom)i=this.dom.childNodes[s];else{let n=xi(e)==0?0:s==0?-1:1;for(;;){let o=e.parentNode;if(o==this.dom)break;n==0&&o.firstChild!=o.lastChild&&(e==o.firstChild?n=-1:n=1),e=o}n<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!ut.get(i);)i=i.nextSibling;if(!i)return this.length;for(let n=0,o=0;;n++){let r=this.children[n];if(r.dom==i)return o;o+=r.length+r.breakAfter}}domBoundsAround(e,s,i=0){let n=-1,o=-1,r=-1,l=-1;for(let a=0,d=i,u=i;a<this.children.length;a++){let f=this.children[a],h=d+f.length;if(d<e&&h>s)return f.domBoundsAround(e,s,d);if(h>=e&&n==-1&&(n=a,o=d),d>s&&f.dom.parentNode==this.dom){r=a,l=u;break}u=h,d=h+f.breakAfter}return{from:o,to:l<0?i+this.length:l,startDOM:(n?this.children[n-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:r<this.children.length&&r>=0?this.children[r].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let s=this.parent;s;s=s.parent){if(e&&(s.flags|=2),s.flags&1)return;s.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let s=e.parent;if(!s)return e;e=s}}replaceChildren(e,s,i=Ic){this.markDirty();for(let n=e;n<s;n++){let o=this.children[n];o.parent==this&&i.indexOf(o)<0&&o.destroy()}i.length<250?this.children.splice(e,s-e,...i):this.children=[].concat(this.children.slice(0,e),i,this.children.slice(s));for(let n=0;n<i.length;n++)i[n].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new B0(this.children,e,this.children.length)}childPos(e,s=1){return this.childCursor().findPos(e,s)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,s,i,n,o,r){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}ut.prototype.breakAfter=0;function op(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class B0{constructor(e,s,i){this.children=e,this.pos=s,this.i=i,this.off=0}findPos(e,s=1){for(;;){if(e>this.pos||e==this.pos&&(s>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function I0(t,e,s,i,n,o,r,l,a){let{children:d}=t,u=d.length?d[e]:null,f=o.length?o[o.length-1]:null,h=f?f.breakAfter:r;if(!(e==i&&u&&!r&&!h&&o.length<2&&u.merge(s,n,o.length?f:null,s==0,l,a))){if(i<d.length){let m=d[i];m&&(n<m.length||m.breakAfter&&f?.breakAfter)?(e==i&&(m=m.split(n),n=0),!h&&f&&m.merge(0,n,f,!0,0,a)?o[o.length-1]=m:((n||m.children.length&&!m.children[0].length)&&m.merge(0,n,null,!1,0,a),o.push(m))):m?.breakAfter&&(f?f.breakAfter=1:r=1),i++}for(u&&(u.breakAfter=r,s>0&&(!r&&o.length&&u.merge(s,u.length,o[0],!1,l,0)?u.breakAfter=o.shift().breakAfter:(s<u.length||u.children.length&&u.children[u.children.length-1].length==0)&&u.merge(s,u.length,null,!1,l,0),e++));e<i&&o.length;)if(d[i-1].become(o[o.length-1]))i--,o.pop(),a=o.length?0:l;else if(d[e].become(o[0]))e++,o.shift(),l=o.length?0:a;else break;!o.length&&e&&i<d.length&&!d[e-1].breakAfter&&d[i].merge(0,0,d[e-1],!1,l,a)&&e--,(e<i||o.length)&&t.replaceChildren(e,i,o)}}function U0(t,e,s,i,n,o){let r=t.childCursor(),{i:l,off:a}=r.findPos(s,1),{i:d,off:u}=r.findPos(e,-1),f=e-s;for(let h of i)f+=h.length;t.length+=f,I0(t,d,u,l,a,i,0,n,o)}const AS=256;class Zs extends ut{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,s){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(s&&s.node==this.dom&&(s.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,s,i){return this.flags&8||i&&(!(i instanceof Zs)||this.length-(s-e)+i.length>AS||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(s),this.markDirty(),!0)}split(e){let s=new Zs(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),s.flags|=this.flags&8,s}localPosFromDOM(e,s){return e==this.dom?s:s?this.text.length:0}domAtPos(e){return new ss(this.dom,e)}domBoundsAround(e,s,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,s){return VS(this.dom,e,s)}}class Bi extends ut{constructor(e,s=[],i=0){super(),this.mark=e,this.children=s,this.length=i;for(let n of s)n.setParent(this)}setAttrs(e){if(P0(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let s in this.mark.attrs)e.setAttribute(s,this.mark.attrs[s]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,s){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,s)}merge(e,s,i,n,o,r){return i&&(!(i instanceof Bi&&i.mark.eq(this.mark))||e&&o<=0||s<this.length&&r<=0)?!1:(U0(this,e,s,i?i.children.slice():[],o-1,r-1),this.markDirty(),!0)}split(e){let s=[],i=0,n=-1,o=0;for(let l of this.children){let a=i+l.length;a>e&&s.push(i<e?l.split(e-i):l),n<0&&i>=e&&(n=o),i=a,o++}let r=this.length-e;return this.length=e,n>-1&&(this.children.length=n,this.markDirty()),new Bi(this.mark,s,r)}domAtPos(e){return N0(this,e)}coordsAt(e,s){return F0(this,e,s)}}function VS(t,e,s){let i=t.nodeValue.length;e>i&&(e=i);let n=e,o=e,r=0;e==0&&s<0||e==i&&s>=0?Te.chrome||Te.gecko||(e?(n--,r=1):o<i&&(o++,r=-1)):s<0?n--:o<i&&o++;let l=In(t,n,o).getClientRects();if(!l.length)return null;let a=l[(r?r<0:s>=0)?0:l.length-1];return Te.safari&&!r&&a.width==0&&(a=Array.prototype.find.call(l,d=>d.width)||a),r?Ja(a,r<0):a||null}class Xi extends ut{static create(e,s,i){return new Xi(e,s,i)}constructor(e,s,i){super(),this.widget=e,this.length=s,this.side=i,this.prevWidget=null}split(e){let s=Xi.create(this.widget,this.length-e,this.side);return this.length-=e,s}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,s,i,n,o,r){return i&&(!(i instanceof Xi)||!this.widget.compare(i.widget)||e>0&&o<=0||s<this.length&&r<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-s),!0)}become(e){return e instanceof Xi&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return st.empty;let e=this;for(;e.parent;)e=e.parent;let{view:s}=e,i=s&&s.state.doc,n=this.posAtStart;return i?i.slice(n,n+this.length):st.empty}domAtPos(e){return(this.length?e==0:this.side>0)?ss.before(this.dom):ss.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,s){let i=this.widget.coordsAt(this.dom,e,s);if(i)return i;let n=this.dom.getClientRects(),o=null;if(!n.length)return null;let r=this.side?this.side<0:e>0;for(let l=r?n.length-1:0;o=n[l],!(e>0?l==0:l==n.length-1||o.top<o.bottom);l+=r?-1:1);return Ja(o,!r)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class ko extends ut{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof ko&&e.side==this.side}split(){return new ko(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?ss.before(this.dom):ss.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return st.empty}get isHidden(){return!0}}Zs.prototype.children=Xi.prototype.children=ko.prototype.children=Ic;function N0(t,e){let s=t.dom,{children:i}=t,n=0;for(let o=0;n<i.length;n++){let r=i[n],l=o+r.length;if(!(l==o&&r.getSide()<=0)){if(e>o&&e<l&&r.dom.parentNode==s)return r.domAtPos(e-o);if(e<=o)break;o=l}}for(let o=n;o>0;o--){let r=i[o-1];if(r.dom.parentNode==s)return r.domAtPos(r.length)}for(let o=n;o<i.length;o++){let r=i[o];if(r.dom.parentNode==s)return r.domAtPos(0)}return new ss(s,0)}function z0(t,e,s){let i,{children:n}=t;s>0&&e instanceof Bi&&n.length&&(i=n[n.length-1])instanceof Bi&&i.mark.eq(e.mark)?z0(i,e.children[0],s-1):(n.push(e),e.setParent(t)),t.length+=e.length}function F0(t,e,s){let i=null,n=-1,o=null,r=-1;function l(d,u){for(let f=0,h=0;f<d.children.length&&h<=u;f++){let m=d.children[f],w=h+m.length;w>=u&&(m.children.length?l(m,u-h):(!o||o.isHidden&&(s>0||DS(o,m)))&&(w>u||h==w&&m.getSide()>0)?(o=m,r=u-h):(h<u||h==w&&m.getSide()<0&&!m.isHidden)&&(i=m,n=u-h)),h=w}}l(t,e);let a=(s<0?i:o)||i||o;return a?a.coordsAt(Math.max(0,a==i?n:r),s):MS(t)}function MS(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let s=Vr(e);return s[s.length-1]||null}function DS(t,e){let s=t.coordsAt(0,1),i=e.coordsAt(0,1);return s&&i&&i.top<s.bottom}function Ld(t,e){for(let s in t)s=="class"&&e.class?e.class+=" "+t.class:s=="style"&&e.style?e.style+=";"+t.style:e[s]=t[s];return e}const rp=Object.create(null);function fa(t,e,s){if(t==e)return!0;t||(t=rp),e||(e=rp);let i=Object.keys(t),n=Object.keys(e);if(i.length-(s&&i.indexOf(s)>-1?1:0)!=n.length-(s&&n.indexOf(s)>-1?1:0))return!1;for(let o of i)if(o!=s&&(n.indexOf(o)==-1||t[o]!==e[o]))return!1;return!0}function jd(t,e,s){let i=!1;if(e)for(let n in e)s&&n in s||(i=!0,n=="style"?t.style.cssText="":t.removeAttribute(n));if(s)for(let n in s)e&&e[n]==s[n]||(i=!0,n=="style"?t.style.cssText=s[n]:t.setAttribute(n,s[n]));return i}function $S(t){let e=Object.create(null);for(let s=0;s<t.attributes.length;s++){let i=t.attributes[s];e[i.name]=i.value}return e}class fn{eq(e){return!1}updateDOM(e,s){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,s,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var hs=(function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t})(hs||(hs={}));class He extends Rn{constructor(e,s,i,n){super(),this.startSide=e,this.endSide=s,this.widget=i,this.spec=n}get heightRelevant(){return!1}static mark(e){return new Hr(e)}static widget(e){let s=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return s+=i&&!e.inlineOrder?s>0?3e8:-4e8:s>0?1e8:-1e8,new un(e,s,s,i,e.widget||null,!1)}static replace(e){let s=!!e.block,i,n;if(e.isBlockGap)i=-5e8,n=4e8;else{let{start:o,end:r}=H0(e,s);i=(o?s?-3e8:-1:5e8)-1,n=(r?s?2e8:1:-6e8)+1}return new un(e,i,n,s,e.widget||null,!0)}static line(e){return new Wr(e)}static set(e,s=!1){return tt.of(e,s)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}He.none=tt.empty;class Hr extends He{constructor(e){let{start:s,end:i}=H0(e);super(s?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var s,i;return this==e||e instanceof Hr&&this.tagName==e.tagName&&(this.class||((s=this.attrs)===null||s===void 0?void 0:s.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&fa(this.attrs,e.attrs,"class")}range(e,s=e){if(e>=s)throw new RangeError("Mark decorations may not be empty");return super.range(e,s)}}Hr.prototype.point=!1;class Wr extends He{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Wr&&this.spec.class==e.spec.class&&fa(this.spec.attributes,e.spec.attributes)}range(e,s=e){if(s!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,s)}}Wr.prototype.mapMode=fs.TrackBefore;Wr.prototype.point=!0;class un extends He{constructor(e,s,i,n,o,r){super(s,i,o,e),this.block=n,this.isReplace=r,this.mapMode=n?s<=0?fs.TrackBefore:fs.TrackAfter:fs.TrackDel}get type(){return this.startSide!=this.endSide?hs.WidgetRange:this.startSide<=0?hs.WidgetBefore:hs.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof un&&TS(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,s=e){if(this.isReplace&&(e>s||e==s&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&s!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,s)}}un.prototype.point=!0;function H0(t,e=!1){let{inclusiveStart:s,inclusiveEnd:i}=t;return s==null&&(s=t.inclusive),i==null&&(i=t.inclusive),{start:s??e,end:i??e}}function TS(t,e){return t==e||!!(t&&e&&t.compare(e))}function Wl(t,e,s,i=0){let n=s.length-1;n>=0&&s[n]+i>=t?s[n]=Math.max(s[n],e):s.push(t,e)}class Et extends ut{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,s,i,n,o,r){if(i){if(!(i instanceof Et))return!1;this.dom||i.transferDOM(this)}return n&&this.setDeco(i?i.attrs:null),U0(this,e,s,i?i.children.slice():[],o,r),!0}split(e){let s=new Et;if(s.breakAfter=this.breakAfter,this.length==0)return s;let{i,off:n}=this.childPos(e);n&&(s.append(this.children[i].split(n),0),this.children[i].merge(n,this.children[i].length,null,!1,0,0),i++);for(let o=i;o<this.children.length;o++)s.append(this.children[o],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,s}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){fa(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,s){z0(this,e,s)}addLineDeco(e){let s=e.spec.attributes,i=e.spec.class;s&&(this.attrs=Ld(s,this.attrs||{})),i&&(this.attrs=Ld({class:i},this.attrs||{}))}domAtPos(e){return N0(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,s){var i;this.dom?this.flags&4&&(P0(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(jd(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,s);let n=this.dom.lastChild;for(;n&&ut.get(n)instanceof Bi;)n=n.lastChild;if(!n||!this.length||n.nodeName!="BR"&&((i=ut.get(n))===null||i===void 0?void 0:i.isEditable)==!1&&(!Te.ios||!this.children.some(o=>o instanceof Zs))){let o=document.createElement("BR");o.cmIgnore=!0,this.dom.appendChild(o)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,s;for(let i of this.children){if(!(i instanceof Zs)||/[^ -~]/.test(i.text))return null;let n=Vr(i.dom);if(n.length!=1)return null;e+=n[0].width,s=n[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:s}:null}coordsAt(e,s){let i=F0(this,e,s);if(!this.children.length&&i&&this.parent){let{heightOracle:n}=this.parent.view.viewState,o=i.bottom-i.top;if(Math.abs(o-n.lineHeight)<2&&n.textHeight<o){let r=(o-n.textHeight)/2;return{top:i.top+r,bottom:i.bottom-r,left:i.left,right:i.left}}}return i}become(e){return e instanceof Et&&this.children.length==0&&e.children.length==0&&fa(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,s){for(let i=0,n=0;i<e.children.length;i++){let o=e.children[i],r=n+o.length;if(r>=s){if(o instanceof Et)return o;if(r>s)break}n=r+o.breakAfter}return null}}class Pi extends ut{constructor(e,s,i){super(),this.widget=e,this.length=s,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,s,i,n,o,r){return i&&(!(i instanceof Pi)||!this.widget.compare(i.widget)||e>0&&o<=0||s<this.length&&r<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-s),!0)}domAtPos(e){return e==0?ss.before(this.dom):ss.after(this.dom,e==this.length)}split(e){let s=this.length-e;this.length=e;let i=new Pi(this.widget,s,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return Ic}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):st.empty}domBoundsAround(){return null}become(e){return e instanceof Pi&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,s){let i=this.widget.coordsAt(this.dom,e,s);return i||(this.widget instanceof Rd?null:Ja(this.dom.getBoundingClientRect(),this.length?e==0:s<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:s,endSide:i}=this.deco;return s==i?!1:e<0?s<0:i>0}}class Rd extends fn{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class ur{constructor(e,s,i,n){this.doc=e,this.pos=s,this.end=i,this.disallowBlockEffectsFor=n,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=s}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Pi&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Et),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(gl(new ko(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Pi)&&this.getLine()}buildText(e,s,i){for(;e>0;){if(this.textOff==this.text.length){let{value:r,lineBreak:l,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(l){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=r,this.textOff=0}let n=Math.min(this.text.length-this.textOff,e),o=Math.min(n,512);this.flushBuffer(s.slice(s.length-i)),this.getLine().append(gl(new Zs(this.text.slice(this.textOff,this.textOff+o)),s),i),this.atCursorPos=!0,this.textOff+=o,e-=o,i=n<=o?0:s.length}}span(e,s,i,n){this.buildText(s-e,i,n),this.pos=s,this.openStart<0&&(this.openStart=n)}point(e,s,i,n,o,r){if(this.disallowBlockEffectsFor[r]&&i instanceof un){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(s>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=s-e;if(i instanceof un)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Pi(i.widget||xo.block,l,i));else{let a=Xi.create(i.widget||xo.inline,l,l?0:i.startSide),d=this.atCursorPos&&!a.isEditable&&o<=n.length&&(e<s||i.startSide>0),u=!a.isEditable&&(e<s||o>n.length||i.startSide<=0),f=this.getLine();this.pendingBuffer==2&&!d&&!a.isEditable&&(this.pendingBuffer=0),this.flushBuffer(n),d&&(f.append(gl(new ko(1),n),o),o=n.length+Math.max(0,o-n.length)),f.append(gl(a,n),o),this.atCursorPos=u,this.pendingBuffer=u?e<s||o>n.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=n.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=s),this.openStart<0&&(this.openStart=o)}static build(e,s,i,n,o){let r=new ur(e,s,i,o);return r.openEnd=tt.spans(n,s,i,r),r.openStart<0&&(r.openStart=r.openEnd),r.finish(r.openEnd),r}}function gl(t,e){for(let s of e)t=new Bi(s,[t],t.length);return t}class xo extends fn{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}xo.inline=new xo("span");xo.block=new xo("div");var kt=(function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t})(kt||(kt={}));const Un=kt.LTR,Uc=kt.RTL;function W0(t){let e=[];for(let s=0;s<t.length;s++)e.push(1<<+t[s]);return e}const ES=W0("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),OS=W0("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Bd=Object.create(null),li=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),s=t.charCodeAt(1);Bd[e]=s,Bd[s]=-e}function q0(t){return t<=247?ES[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?OS[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const PS=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Zi{get dir(){return this.level%2?Uc:Un}constructor(e,s,i){this.from=e,this.to=s,this.level=i}side(e,s){return this.dir==s==e?this.to:this.from}forward(e,s){return e==(this.dir==s)}static find(e,s,i,n){let o=-1;for(let r=0;r<e.length;r++){let l=e[r];if(l.from<=s&&l.to>=s){if(l.level==i)return r;(o<0||(n!=0?n<0?l.from<s:l.to>s:e[o].level>l.level))&&(o=r)}}if(o<0)throw new RangeError("Index out of range");return o}}function K0(t,e){if(t.length!=e.length)return!1;for(let s=0;s<t.length;s++){let i=t[s],n=e[s];if(i.from!=n.from||i.to!=n.to||i.direction!=n.direction||!K0(i.inner,n.inner))return!1}return!0}const ht=[];function LS(t,e,s,i,n){for(let o=0;o<=i.length;o++){let r=o?i[o-1].to:e,l=o<i.length?i[o].from:s,a=o?256:n;for(let d=r,u=a,f=a;d<l;d++){let h=q0(t.charCodeAt(d));h==512?h=u:h==8&&f==4&&(h=16),ht[d]=h==4?2:h,h&7&&(f=h),u=h}for(let d=r,u=a,f=a;d<l;d++){let h=ht[d];if(h==128)d<l-1&&u==ht[d+1]&&u&24?h=ht[d]=u:ht[d]=256;else if(h==64){let m=d+1;for(;m<l&&ht[m]==64;)m++;let w=d&&u==8||m<s&&ht[m]==8?f==1?1:8:256;for(let p=d;p<m;p++)ht[p]=w;d=m-1}else h==8&&f==1&&(ht[d]=1);u=h,h&7&&(f=h)}}}function jS(t,e,s,i,n){let o=n==1?2:1;for(let r=0,l=0,a=0;r<=i.length;r++){let d=r?i[r-1].to:e,u=r<i.length?i[r].from:s;for(let f=d,h,m,w;f<u;f++)if(m=Bd[h=t.charCodeAt(f)])if(m<0){for(let p=l-3;p>=0;p-=3)if(li[p+1]==-m){let C=li[p+2],V=C&2?n:C&4?C&1?o:n:0;V&&(ht[f]=ht[li[p]]=V),l=p;break}}else{if(li.length==189)break;li[l++]=f,li[l++]=h,li[l++]=a}else if((w=ht[f])==2||w==1){let p=w==n;a=p?0:1;for(let C=l-3;C>=0;C-=3){let V=li[C+2];if(V&2)break;if(p)li[C+2]|=2;else{if(V&4)break;li[C+2]|=4}}}}}function RS(t,e,s,i){for(let n=0,o=i;n<=s.length;n++){let r=n?s[n-1].to:t,l=n<s.length?s[n].from:e;for(let a=r;a<l;){let d=ht[a];if(d==256){let u=a+1;for(;;)if(u==l){if(n==s.length)break;u=s[n++].to,l=n<s.length?s[n].from:e}else if(ht[u]==256)u++;else break;let f=o==1,h=(u<e?ht[u]:i)==1,m=f==h?f?1:2:i;for(let w=u,p=n,C=p?s[p-1].to:t;w>a;)w==C&&(w=s[--p].from,C=p?s[p-1].to:t),ht[--w]=m;a=u}else o=d,a++}}}function Id(t,e,s,i,n,o,r){let l=i%2?2:1;if(i%2==n%2)for(let a=e,d=0;a<s;){let u=!0,f=!1;if(d==o.length||a<o[d].from){let p=ht[a];p!=l&&(u=!1,f=p==16)}let h=!u&&l==1?[]:null,m=u?i:i+1,w=a;e:for(;;)if(d<o.length&&w==o[d].from){if(f)break e;let p=o[d];if(!u)for(let C=p.to,V=d+1;;){if(C==s)break e;if(V<o.length&&o[V].from==C)C=o[V++].to;else{if(ht[C]==l)break e;break}}if(d++,h)h.push(p);else{p.from>a&&r.push(new Zi(a,p.from,m));let C=p.direction==Un!=!(m%2);Ud(t,C?i+1:i,n,p.inner,p.from,p.to,r),a=p.to}w=p.to}else{if(w==s||(u?ht[w]!=l:ht[w]==l))break;w++}h?Id(t,a,w,i+1,n,h,r):a<w&&r.push(new Zi(a,w,m)),a=w}else for(let a=s,d=o.length;a>e;){let u=!0,f=!1;if(!d||a>o[d-1].to){let p=ht[a-1];p!=l&&(u=!1,f=p==16)}let h=!u&&l==1?[]:null,m=u?i:i+1,w=a;e:for(;;)if(d&&w==o[d-1].to){if(f)break e;let p=o[--d];if(!u)for(let C=p.from,V=d;;){if(C==e)break e;if(V&&o[V-1].to==C)C=o[--V].from;else{if(ht[C-1]==l)break e;break}}if(h)h.push(p);else{p.to<a&&r.push(new Zi(p.to,a,m));let C=p.direction==Un!=!(m%2);Ud(t,C?i+1:i,n,p.inner,p.from,p.to,r),a=p.from}w=p.from}else{if(w==e||(u?ht[w-1]!=l:ht[w-1]==l))break;w--}h?Id(t,w,a,i+1,n,h,r):w<a&&r.push(new Zi(w,a,m)),a=w}}function Ud(t,e,s,i,n,o,r){let l=e%2?2:1;LS(t,n,o,i,l),jS(t,n,o,i,l),RS(n,o,i,l),Id(t,n,o,e,s,i,r)}function BS(t,e,s){if(!t)return[new Zi(0,0,e==Uc?1:0)];if(e==Un&&!s.length&&!PS.test(t))return G0(t.length);if(s.length)for(;t.length>ht.length;)ht[ht.length]=256;let i=[],n=e==Un?0:1;return Ud(t,n,n,s,0,t.length,i),i}function G0(t){return[new Zi(0,t,0)]}let J0="";function IS(t,e,s,i,n){var o;let r=i.head-t.from,l=Zi.find(e,r,(o=i.bidiLevel)!==null&&o!==void 0?o:-1,i.assoc),a=e[l],d=a.side(n,s);if(r==d){let h=l+=n?1:-1;if(h<0||h>=e.length)return null;a=e[l=h],r=a.side(!n,s),d=a.side(n,s)}let u=Jt(t.text,r,a.forward(n,s));(u<a.from||u>a.to)&&(u=d),J0=t.text.slice(Math.min(r,u),Math.max(r,u));let f=l==(n?e.length-1:0)?null:e[l+(n?1:-1)];return f&&u==d&&f.level+(n?0:1)<a.level?ue.cursor(f.side(!n,s)+t.from,f.forward(n,s)?1:-1,f.level):ue.cursor(u+t.from,a.forward(n,s)?-1:1,a.level)}function US(t,e,s){for(let i=e;i<s;i++){let n=q0(t.charCodeAt(i));if(n==1)return Un;if(n==2||n==4)return Uc}return Un}const Y0=Le.define(),Q0=Le.define(),X0=Le.define(),Z0=Le.define(),Nd=Le.define(),ev=Le.define(),tv=Le.define(),Nc=Le.define(),zc=Le.define(),sv=Le.define({combine:t=>t.some(e=>e)}),iv=Le.define({combine:t=>t.some(e=>e)}),nv=Le.define();class fo{constructor(e,s="nearest",i="nearest",n=5,o=5,r=!1){this.range=e,this.y=s,this.x=i,this.yMargin=n,this.xMargin=o,this.isSnapshot=r}map(e){return e.empty?this:new fo(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new fo(ue.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const vl=Ke.define({map:(t,e)=>t.map(e)}),ov=Ke.define();function ks(t,e,s){let i=t.facet(Z0);i.length?i[0](e):window.onerror&&window.onerror(String(e),s,void 0,void 0,e)||(s?console.error(s+":",e):console.error(e))}const Oi=Le.define({combine:t=>t.length?t[0]:!0});let NS=0;const Xn=Le.define({combine(t){return t.filter((e,s)=>{for(let i=0;i<s;i++)if(t[i].plugin==e.plugin)return!1;return!0})}});class Ot{constructor(e,s,i,n,o){this.id=e,this.create=s,this.domEventHandlers=i,this.domEventObservers=n,this.baseExtensions=o(this),this.extension=this.baseExtensions.concat(Xn.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(Xn.of({plugin:this,arg:e}))}static define(e,s){const{eventHandlers:i,eventObservers:n,provide:o,decorations:r}=s||{};return new Ot(NS++,e,i,n,l=>{let a=[];return r&&a.push(Mr.of(d=>{let u=d.plugin(l);return u?r(u):He.none})),o&&a.push(o(l)),a})}static fromClass(e,s){return Ot.define((i,n)=>new e(i,n),s)}}class Vu{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let s=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(s)}catch(i){if(ks(s.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(s){ks(e.state,s,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var s;if(!((s=this.value)===null||s===void 0)&&s.destroy)try{this.value.destroy()}catch(i){ks(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const rv=Le.define(),Fc=Le.define(),Mr=Le.define(),lv=Le.define(),qr=Le.define(),av=Le.define();function lp(t,e){let s=t.state.facet(av);if(!s.length)return s;let i=s.map(o=>o instanceof Function?o(t):o),n=[];return tt.spans(i,e.from,e.to,{point(){},span(o,r,l,a){let d=o-e.from,u=r-e.from,f=n;for(let h=l.length-1;h>=0;h--,a--){let m=l[h].spec.bidiIsolate,w;if(m==null&&(m=US(e.text,d,u)),a>0&&f.length&&(w=f[f.length-1]).to==d&&w.direction==m)w.to=u,f=w.inner;else{let p={from:d,to:u,direction:m,inner:[]};f.push(p),f=p.inner}}}}),n}const uv=Le.define();function Hc(t){let e=0,s=0,i=0,n=0;for(let o of t.state.facet(uv)){let r=o(t);r&&(r.left!=null&&(e=Math.max(e,r.left)),r.right!=null&&(s=Math.max(s,r.right)),r.top!=null&&(i=Math.max(i,r.top)),r.bottom!=null&&(n=Math.max(n,r.bottom)))}return{left:e,right:s,top:i,bottom:n}}const Go=Le.define();class Us{constructor(e,s,i,n){this.fromA=e,this.toA=s,this.fromB=i,this.toB=n}join(e){return new Us(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let s=e.length,i=this;for(;s>0;s--){let n=e[s-1];if(!(n.fromA>i.toA)){if(n.toA<i.fromA)break;i=i.join(n),e.splice(s-1,1)}}return e.splice(s,0,i),e}static extendWithRanges(e,s){if(s.length==0)return e;let i=[];for(let n=0,o=0,r=0,l=0;;n++){let a=n==e.length?null:e[n],d=r-l,u=a?a.fromB:1e9;for(;o<s.length&&s[o]<u;){let f=s[o],h=s[o+1],m=Math.max(l,f),w=Math.min(u,h);if(m<=w&&new Us(m+d,w+d,m,w).addToSet(i),h>u)break;o+=2}if(!a)return i;new Us(a.fromA,a.toA,a.fromB,a.toB).addToSet(i),r=a.toA,l=a.toB}}}class ha{constructor(e,s,i){this.view=e,this.state=s,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=Bt.empty(this.startState.doc.length);for(let o of i)this.changes=this.changes.compose(o.changes);let n=[];this.changes.iterChangedRanges((o,r,l,a)=>n.push(new Us(o,r,l,a))),this.changedRanges=n}static create(e,s,i){return new ha(e,s,i)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class ap extends ut{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=He.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Et],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Us(0,0,0,e.state.doc.length)],0,null)}update(e){var s;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:d,toA:u})=>u<this.minWidthFrom||d>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let n=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((s=this.domChanged)===null||s===void 0)&&s.newSel?n=this.domChanged.newSel.head:!GS(e.changes,this.hasComposition)&&!e.selectionSet&&(n=e.state.selection.main.head));let o=n>-1?FS(this.view,e.changes,n):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:d,to:u}=this.hasComposition;i=new Us(d,u,e.changes.mapPos(d,-1),e.changes.mapPos(u,1)).addToSet(i.slice())}this.hasComposition=o?{from:o.range.fromB,to:o.range.toB}:null,(Te.ie||Te.chrome)&&!o&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let r=this.decorations,l=this.updateDeco(),a=qS(r,l,e.changes);return i=Us.extendWithRanges(i,a),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,e.startState.doc.length,o),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,s,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,s,i);let{observer:n}=this.view;n.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let r=Te.chrome||Te.ios?{node:n.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,r),this.flags&=-8,r&&(r.written||n.selectionRange.focusNode!=r.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(r=>r.flags&=-9);let o=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let r of this.children)r instanceof Pi&&r.widget instanceof Rd&&o.push(r.dom);n.updateGaps(o)}updateChildren(e,s,i){let n=i?i.range.addToSet(e.slice()):e,o=this.childCursor(s);for(let r=n.length-1;;r--){let l=r>=0?n[r]:null;if(!l)break;let{fromA:a,toA:d,fromB:u,toB:f}=l,h,m,w,p;if(i&&i.range.fromB<f&&i.range.toB>u){let H=ur.build(this.view.state.doc,u,i.range.fromB,this.decorations,this.dynamicDecorationMap),j=ur.build(this.view.state.doc,i.range.toB,f,this.decorations,this.dynamicDecorationMap);m=H.breakAtStart,w=H.openStart,p=j.openEnd;let T=this.compositionView(i);j.breakAtStart?T.breakAfter=1:j.content.length&&T.merge(T.length,T.length,j.content[0],!1,j.openStart,0)&&(T.breakAfter=j.content[0].breakAfter,j.content.shift()),H.content.length&&T.merge(0,0,H.content[H.content.length-1],!0,0,H.openEnd)&&H.content.pop(),h=H.content.concat(T).concat(j.content)}else({content:h,breakAtStart:m,openStart:w,openEnd:p}=ur.build(this.view.state.doc,u,f,this.decorations,this.dynamicDecorationMap));let{i:C,off:V}=o.findPos(d,1),{i:U,off:B}=o.findPos(a,-1);I0(this,U,B,C,V,h,m,w,p)}i&&this.fixCompositionDOM(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let s of e.transactions)for(let i of s.effects)i.is(ov)&&(this.editContextFormatting=i.value)}compositionView(e){let s=new Zs(e.text.nodeValue);s.flags|=8;for(let{deco:n}of e.marks)s=new Bi(n,[s],s.length);let i=new Et;return i.append(s,0),i}fixCompositionDOM(e){let s=(o,r)=>{r.flags|=8|(r.children.some(a=>a.flags&7)?1:0),this.markedForComposition.add(r);let l=ut.get(o);l&&l!=r&&(l.dom=null),r.setDOM(o)},i=this.childPos(e.range.fromB,1),n=this.children[i.i];s(e.line,n);for(let o=e.marks.length-1;o>=-1;o--)i=n.childPos(i.off,1),n=n.children[i.i],s(o>=0?e.marks[o].node:e.text,n)}updateSelection(e=!1,s=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,n=i==this.dom,o=!n&&!(this.view.state.facet(Oi)||this.dom.tabIndex>-1)&&Hl(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(n||s||o))return;let r=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(l.anchor)),d=l.empty?a:this.moveToLine(this.domAtPos(l.head));if(Te.gecko&&l.empty&&!this.hasComposition&&zS(a)){let f=document.createTextNode("");this.view.observer.ignore(()=>a.node.insertBefore(f,a.node.childNodes[a.offset]||null)),a=d=new ss(f,0),r=!0}let u=this.view.observer.selectionRange;(r||!u.focusNode||(!ar(a.node,a.offset,u.anchorNode,u.anchorOffset)||!ar(d.node,d.offset,u.focusNode,u.focusOffset))&&!this.suppressWidgetCursorChange(u,l))&&(this.view.observer.ignore(()=>{Te.android&&Te.chrome&&this.dom.contains(u.focusNode)&&KS(u.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let f=Ar(this.view.root);if(f)if(l.empty){if(Te.gecko){let h=HS(a.node,a.offset);if(h&&h!=3){let m=(h==1?j0:R0)(a.node,a.offset);m&&(a=new ss(m.node,m.offset))}}f.collapse(a.node,a.offset),l.bidiLevel!=null&&f.caretBidiLevel!==void 0&&(f.caretBidiLevel=l.bidiLevel)}else if(f.extend){f.collapse(a.node,a.offset);try{f.extend(d.node,d.offset)}catch{}}else{let h=document.createRange();l.anchor>l.head&&([a,d]=[d,a]),h.setEnd(d.node,d.offset),h.setStart(a.node,a.offset),f.removeAllRanges(),f.addRange(h)}o&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(a,d)),this.impreciseAnchor=a.precise?null:new ss(u.anchorNode,u.anchorOffset),this.impreciseHead=d.precise?null:new ss(u.focusNode,u.focusOffset)}suppressWidgetCursorChange(e,s){return this.hasComposition&&s.empty&&ar(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==s.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,s=e.state.selection.main,i=Ar(e.root),{anchorNode:n,anchorOffset:o}=e.observer.selectionRange;if(!i||!s.empty||!s.assoc||!i.modify)return;let r=Et.find(this,s.head);if(!r)return;let l=r.posAtStart;if(s.head==l||s.head==l+r.length)return;let a=this.coordsAt(s.head,-1),d=this.coordsAt(s.head,1);if(!a||!d||a.bottom>d.top)return;let u=this.domAtPos(s.head+s.assoc);i.collapse(u.node,u.offset),i.modify("move",s.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let f=e.observer.selectionRange;e.docView.posFromDOM(f.anchorNode,f.anchorOffset)!=s.from&&i.collapse(n,o)}moveToLine(e){let s=this.dom,i;if(e.node!=s)return e;for(let n=e.offset;!i&&n<s.childNodes.length;n++){let o=ut.get(s.childNodes[n]);o instanceof Et&&(i=o.domAtPos(0))}for(let n=e.offset-1;!i&&n>=0;n--){let o=ut.get(s.childNodes[n]);o instanceof Et&&(i=o.domAtPos(o.length))}return i?new ss(i.node,i.offset,!0):e}nearest(e){for(let s=e;s;){let i=ut.get(s);if(i&&i.rootView==this)return i;s=s.parentNode}return null}posFromDOM(e,s){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,s)+i.posAtStart}domAtPos(e){let{i:s,off:i}=this.childCursor().findPos(e,-1);for(;s<this.children.length-1;){let n=this.children[s];if(i<n.length||n instanceof Et)break;s++,i=0}return this.children[s].domAtPos(i)}coordsAt(e,s){let i=null,n=0;for(let o=this.length,r=this.children.length-1;r>=0;r--){let l=this.children[r],a=o-l.breakAfter,d=a-l.length;if(a<e)break;if(d<=e&&(d<e||l.covers(-1))&&(a>e||l.covers(1))&&(!i||l instanceof Et&&!(i instanceof Et&&s>=0)))i=l,n=d;else if(i&&d==e&&a==e&&l instanceof Pi&&Math.abs(s)<2){if(l.deco.startSide<0)break;r&&(i=null)}o=d}return i?i.coordsAt(e-n,s):null}coordsForChar(e){let{i:s,off:i}=this.childPos(e,1),n=this.children[s];if(!(n instanceof Et))return null;for(;n.children.length;){let{i:l,off:a}=n.childPos(i,1);for(;;l++){if(l==n.children.length)return null;if((n=n.children[l]).length)break}i=a}if(!(n instanceof Zs))return null;let o=Jt(n.text,i);if(o==i)return null;let r=In(n.dom,i,o).getClientRects();for(let l=0;l<r.length;l++){let a=r[l];if(l==r.length-1||a.top<a.bottom&&a.left<a.right)return a}return null}measureVisibleLineHeights(e){let s=[],{from:i,to:n}=e,o=this.view.contentDOM.clientWidth,r=o>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,a=this.view.textDirection==kt.LTR;for(let d=0,u=0;u<this.children.length;u++){let f=this.children[u],h=d+f.length;if(h>n)break;if(d>=i){let m=f.dom.getBoundingClientRect();if(s.push(m.height),r){let w=f.dom.lastChild,p=w?Vr(w):[];if(p.length){let C=p[p.length-1],V=a?C.right-m.left:m.right-C.left;V>l&&(l=V,this.minWidth=o,this.minWidthFrom=d,this.minWidthTo=h)}}}d=h+f.breakAfter}return s}textDirectionAt(e){let{i:s}=this.childPos(e,1);return getComputedStyle(this.children[s].dom).direction=="rtl"?kt.RTL:kt.LTR}measureTextSize(){for(let o of this.children)if(o instanceof Et){let r=o.measureTextSize();if(r)return r}let e=document.createElement("div"),s,i,n;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let o=Vr(e.firstChild)[0];s=e.getBoundingClientRect().height,i=o?o.width/27:7,n=o?o.height:s,e.remove()}),{lineHeight:s,charWidth:i,textHeight:n}}childCursor(e=this.length){let s=this.children.length;return s&&(e-=this.children[--s].length),new B0(this.children,e,s)}computeBlockGapDeco(){let e=[],s=this.view.viewState;for(let i=0,n=0;;n++){let o=n==s.viewports.length?null:s.viewports[n],r=o?o.from-1:this.length;if(r>i){let l=(s.lineBlockAt(r).bottom-s.lineBlockAt(i).top)/this.view.scaleY;e.push(He.replace({widget:new Rd(l),block:!0,inclusive:!0,isBlockGap:!0}).range(i,r))}if(!o)break;i=o.to+1}return He.set(e)}updateDeco(){let e=1,s=this.view.state.facet(Mr).map(o=>(this.dynamicDecorationMap[e++]=typeof o=="function")?o(this.view):o),i=!1,n=this.view.state.facet(lv).map((o,r)=>{let l=typeof o=="function";return l&&(i=!0),l?o(this.view):o});for(n.length&&(this.dynamicDecorationMap[e++]=i,s.push(tt.join(n))),this.decorations=[this.editContextFormatting,...s,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let d=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=d.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let d of this.view.state.facet(nv))try{if(d(this.view,e.range,e))return!0}catch(u){ks(this.view.state,u,"scroll handler")}let{range:s}=e,i=this.coordsAt(s.head,s.empty?s.assoc:s.head>s.anchor?-1:1),n;if(!i)return;!s.empty&&(n=this.coordsAt(s.anchor,s.anchor>s.head?-1:1))&&(i={left:Math.min(i.left,n.left),top:Math.min(i.top,n.top),right:Math.max(i.right,n.right),bottom:Math.max(i.bottom,n.bottom)});let o=Hc(this.view),r={left:i.left-o.left,top:i.top-o.top,right:i.right+o.right,bottom:i.bottom+o.bottom},{offsetWidth:l,offsetHeight:a}=this.view.scrollDOM;xS(this.view.scrollDOM,r,s.head<s.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,l),-l),Math.max(Math.min(e.yMargin,a),-a),this.view.textDirection==kt.LTR)}}function zS(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function dv(t,e){let s=t.observer.selectionRange;if(!s.focusNode)return null;let i=j0(s.focusNode,s.focusOffset),n=R0(s.focusNode,s.focusOffset),o=i||n;if(n&&i&&n.node!=i.node){let l=ut.get(n.node);if(!l||l instanceof Zs&&l.text!=n.node.nodeValue)o=n;else if(t.docView.lastCompositionAfterCursor){let a=ut.get(i.node);!a||a instanceof Zs&&a.text!=i.node.nodeValue||(o=n)}}if(t.docView.lastCompositionAfterCursor=o!=i,!o)return null;let r=e-o.offset;return{from:r,to:r+o.node.nodeValue.length,node:o.node}}function FS(t,e,s){let i=dv(t,s);if(!i)return null;let{node:n,from:o,to:r}=i,l=n.nodeValue;if(/[\n\r]/.test(l)||t.state.doc.sliceString(i.from,i.to)!=l)return null;let a=e.invertedDesc,d=new Us(a.mapPos(o),a.mapPos(r),o,r),u=[];for(let f=n.parentNode;;f=f.parentNode){let h=ut.get(f);if(h instanceof Bi)u.push({node:f,deco:h.mark});else{if(h instanceof Et||f.nodeName=="DIV"&&f.parentNode==t.contentDOM)return{range:d,text:n,marks:u,line:f};if(f!=t.contentDOM)u.push({node:f,deco:new Hr({inclusive:!0,attributes:$S(f),tagName:f.tagName.toLowerCase()})});else return null}}}function HS(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let WS=class{constructor(){this.changes=[]}compareRange(e,s){Wl(e,s,this.changes)}comparePoint(e,s){Wl(e,s,this.changes)}boundChange(e){Wl(e,e,this.changes)}};function qS(t,e,s){let i=new WS;return tt.compare(t,e,s,i),i.changes}function KS(t,e){for(let s=t;s&&s!=e;s=s.assignedSlot||s.parentNode)if(s.nodeType==1&&s.contentEditable=="false")return!0;return!1}function GS(t,e){let s=!1;return e&&t.iterChangedRanges((i,n)=>{i<e.to&&n>e.from&&(s=!0)}),s}function JS(t,e,s=1){let i=t.charCategorizer(e),n=t.doc.lineAt(e),o=e-n.from;if(n.length==0)return ue.cursor(e);o==0?s=1:o==n.length&&(s=-1);let r=o,l=o;s<0?r=Jt(n.text,o,!1):l=Jt(n.text,o);let a=i(n.text.slice(r,l));for(;r>0;){let d=Jt(n.text,r,!1);if(i(n.text.slice(d,r))!=a)break;r=d}for(;l<n.length;){let d=Jt(n.text,l);if(i(n.text.slice(l,d))!=a)break;l=d}return ue.range(r+n.from,l+n.from)}function YS(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function QS(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function Mu(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function up(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function dp(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function zd(t,e,s){let i,n,o,r,l=!1,a,d,u,f;for(let w=t.firstChild;w;w=w.nextSibling){let p=Vr(w);for(let C=0;C<p.length;C++){let V=p[C];n&&Mu(n,V)&&(V=up(dp(V,n.bottom),n.top));let U=YS(e,V),B=QS(s,V);if(U==0&&B==0)return w.nodeType==3?cp(w,e,s):zd(w,e,s);(!i||r>B||r==B&&o>U)&&(i=w,n=V,o=U,r=B,l=U?e<V.left?C>0:C<p.length-1:!0),U==0?s>V.bottom&&(!u||u.bottom<V.bottom)?(a=w,u=V):s<V.top&&(!f||f.top>V.top)&&(d=w,f=V):u&&Mu(u,V)?u=dp(u,V.bottom):f&&Mu(f,V)&&(f=up(f,V.top))}}if(u&&u.bottom>=s?(i=a,n=u):f&&f.top<=s&&(i=d,n=f),!i)return{node:t,offset:0};let h=Math.max(n.left,Math.min(n.right,e));if(i.nodeType==3)return cp(i,h,s);if(l&&i.contentEditable!="false")return zd(i,h,s);let m=Array.prototype.indexOf.call(t.childNodes,i)+(e>=(n.left+n.right)/2?1:0);return{node:t,offset:m}}function cp(t,e,s){let i=t.nodeValue.length,n=-1,o=1e9,r=0;for(let l=0;l<i;l++){let a=In(t,l,l+1).getClientRects();for(let d=0;d<a.length;d++){let u=a[d];if(u.top==u.bottom)continue;r||(r=e-u.left);let f=(u.top>s?u.top-s:s-u.bottom)-1;if(u.left-1<=e&&u.right+1>=e&&f<o){let h=e>=(u.left+u.right)/2,m=h;if((Te.chrome||Te.gecko)&&In(t,l).getBoundingClientRect().left==u.right&&(m=!h),f<=0)return{node:t,offset:l+(m?1:0)};n=l+(m?1:0),o=f}}}return{node:t,offset:n>-1?n:r>0?t.nodeValue.length:0}}function cv(t,e,s,i=-1){var n,o;let r=t.contentDOM.getBoundingClientRect(),l=r.top+t.viewState.paddingTop,a,{docHeight:d}=t.viewState,{x:u,y:f}=e,h=f-l;if(h<0)return 0;if(h>d)return t.state.doc.length;for(let H=t.viewState.heightOracle.textHeight/2,j=!1;a=t.elementAtHeight(h),a.type!=hs.Text;)for(;h=i>0?a.bottom+H:a.top-H,!(h>=0&&h<=d);){if(j)return s?null:0;j=!0,i=-i}f=l+h;let m=a.from;if(m<t.viewport.from)return t.viewport.from==0?0:s?null:fp(t,r,a,u,f);if(m>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:s?null:fp(t,r,a,u,f);let w=t.dom.ownerDocument,p=t.root.elementFromPoint?t.root:w,C=p.elementFromPoint(u,f);C&&!t.contentDOM.contains(C)&&(C=null),C||(u=Math.max(r.left+1,Math.min(r.right-1,u)),C=p.elementFromPoint(u,f),C&&!t.contentDOM.contains(C)&&(C=null));let V,U=-1;if(C&&((n=t.docView.nearest(C))===null||n===void 0?void 0:n.isEditable)!=!1){if(w.caretPositionFromPoint){let H=w.caretPositionFromPoint(u,f);H&&({offsetNode:V,offset:U}=H)}else if(w.caretRangeFromPoint){let H=w.caretRangeFromPoint(u,f);H&&({startContainer:V,startOffset:U}=H)}V&&(!t.contentDOM.contains(V)||Te.safari&&XS(V,U,u)||Te.chrome&&ZS(V,U,u))&&(V=void 0),V&&(U=Math.min(xi(V),U))}if(!V||!t.docView.dom.contains(V)){let H=Et.find(t.docView,m);if(!H)return h>a.top+a.height/2?a.to:a.from;({node:V,offset:U}=zd(H.dom,u,f))}let B=t.docView.nearest(V);if(!B)return null;if(B.isWidget&&((o=B.dom)===null||o===void 0?void 0:o.nodeType)==1){let H=B.dom.getBoundingClientRect();return e.y<H.top||e.y<=H.bottom&&e.x<=(H.left+H.right)/2?B.posAtStart:B.posAtEnd}else return B.localPosFromDOM(V,U)+B.posAtStart}function fp(t,e,s,i,n){let o=Math.round((i-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&s.height>t.defaultLineHeight*1.5){let l=t.viewState.heightOracle.textHeight,a=Math.floor((n-s.top-(t.defaultLineHeight-l)*.5)/l);o+=a*t.viewState.heightOracle.lineLength}let r=t.state.sliceDoc(s.from,s.to);return s.from+Vd(r,o,t.state.tabSize)}function fv(t,e,s){let i,n=t;if(t.nodeType!=3||e!=(i=t.nodeValue.length))return!1;for(;;){let o=n.nextSibling;if(o){if(o.nodeName=="BR")break;return!1}else{let r=n.parentNode;if(!r||r.nodeName=="DIV")break;n=r}}return In(t,i-1,i).getBoundingClientRect().right>s}function XS(t,e,s){return fv(t,e,s)}function ZS(t,e,s){if(e!=0)return fv(t,e,s);for(let n=t;;){let o=n.parentNode;if(!o||o.nodeType!=1||o.firstChild!=n)return!1;if(o.classList.contains("cm-line"))break;n=o}let i=t.nodeType==1?t.getBoundingClientRect():In(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return s-i.left>5}function Fd(t,e,s){let i=t.lineBlockAt(e);if(Array.isArray(i.type)){let n;for(let o of i.type){if(o.from>e)break;if(!(o.to<e)){if(o.from<e&&o.to>e)return o;(!n||o.type==hs.Text&&(n.type!=o.type||(s<0?o.from<e:o.to>e)))&&(n=o)}}return n||i}return i}function eC(t,e,s,i){let n=Fd(t,e.head,e.assoc||-1),o=!i||n.type!=hs.Text||!(t.lineWrapping||n.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>n.from?e.head-1:e.head);if(o){let r=t.dom.getBoundingClientRect(),l=t.textDirectionAt(n.from),a=t.posAtCoords({x:s==(l==kt.LTR)?r.right-1:r.left+1,y:(o.top+o.bottom)/2});if(a!=null)return ue.cursor(a,s?-1:1)}return ue.cursor(s?n.to:n.from,s?-1:1)}function hp(t,e,s,i){let n=t.state.doc.lineAt(e.head),o=t.bidiSpans(n),r=t.textDirectionAt(n.from);for(let l=e,a=null;;){let d=IS(n,o,r,l,s),u=J0;if(!d){if(n.number==(s?t.state.doc.lines:1))return l;u=`
`,n=t.state.doc.line(n.number+(s?1:-1)),o=t.bidiSpans(n),d=t.visualLineSide(n,!s)}if(a){if(!a(u))return l}else{if(!i)return d;a=i(u)}l=d}}function tC(t,e,s){let i=t.state.charCategorizer(e),n=i(s);return o=>{let r=i(o);return n==wt.Space&&(n=r),n==r}}function sC(t,e,s,i){let n=e.head,o=s?1:-1;if(n==(s?t.state.doc.length:0))return ue.cursor(n,e.assoc);let r=e.goalColumn,l,a=t.contentDOM.getBoundingClientRect(),d=t.coordsAtPos(n,e.assoc||-1),u=t.documentTop;if(d)r==null&&(r=d.left-a.left),l=o<0?d.top:d.bottom;else{let m=t.viewState.lineBlockAt(n);r==null&&(r=Math.min(a.right-a.left,t.defaultCharacterWidth*(n-m.from))),l=(o<0?m.top:m.bottom)+u}let f=a.left+r,h=i??t.viewState.heightOracle.textHeight>>1;for(let m=0;;m+=10){let w=l+(h+m)*o,p=cv(t,{x:f,y:w},!1,o);if(w<a.top||w>a.bottom||(o<0?p<n:p>n)){let C=t.docView.coordsForChar(p),V=!C||w<C.top?-1:1;return ue.cursor(p,V,void 0,r)}}}function dr(t,e,s){for(;;){let i=0;for(let n of t)n.between(e-1,e+1,(o,r,l)=>{if(e>o&&e<r){let a=i||s||(e-o<r-e?-1:1);e=a<0?o:r,i=a}});if(!i)return e}}function hv(t,e){let s=null;for(let i=0;i<e.ranges.length;i++){let n=e.ranges[i],o=null;if(n.empty){let r=dr(t,n.from,0);r!=n.from&&(o=ue.cursor(r,-1))}else{let r=dr(t,n.from,-1),l=dr(t,n.to,1);(r!=n.from||l!=n.to)&&(o=ue.range(n.from==n.anchor?r:l,n.from==n.head?r:l))}o&&(s||(s=e.ranges.slice()),s[i]=o)}return s?ue.create(s,e.mainIndex):e}function Du(t,e,s){let i=dr(t.state.facet(qr).map(n=>n(t)),s.from,e.head>s.from?-1:1);return i==s.from?s:ue.cursor(i,i<s.from?1:-1)}const Jo="";class iC{constructor(e,s){this.points=e,this.text="",this.lineSeparator=s.facet(et.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Jo}readRange(e,s){if(!e)return this;let i=e.parentNode;for(let n=e;;){this.findPointBefore(i,n);let o=this.text.length;this.readNode(n);let r=n.nextSibling;if(r==s)break;let l=ut.get(n),a=ut.get(r);(l&&a?l.breakAfter:(l?l.breakAfter:ca(n))||ca(r)&&(n.nodeName!="BR"||n.cmIgnore)&&this.text.length>o)&&!oC(r,s)&&this.lineBreak(),n=r}return this.findPointBefore(i,s),this}readTextNode(e){let s=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,s.length));for(let i=0,n=this.lineSeparator?null:/\r\n?|\n/g;;){let o=-1,r=1,l;if(this.lineSeparator?(o=s.indexOf(this.lineSeparator,i),r=this.lineSeparator.length):(l=n.exec(s))&&(o=l.index,r=l[0].length),this.append(s.slice(i,o<0?s.length:o)),o<0)break;if(this.lineBreak(),r>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=r-1);i=o+r}}readNode(e){if(e.cmIgnore)return;let s=ut.get(e),i=s&&s.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let n=i.iter();!n.next().done;)n.lineBreak?this.lineBreak():this.append(n.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,s){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==s&&(i.pos=this.text.length)}findPointInside(e,s){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(nC(e,i.node,i.offset)?s:0))}}function nC(t,e,s){for(;;){if(!e||s<xi(e))return!1;if(e==t)return!0;s=Bn(e)+1,e=e.parentNode}}function oC(t,e){let s;for(;!(t==e||!t);t=t.nextSibling){let i=ut.get(t);if(!(i?.isWidget||t.cmIgnore))return!1;i&&(s||(s=[])).push(i)}if(s)for(let i of s){let n=i.overrideDOMText;if(n?.length)return!1}return!0}class pp{constructor(e,s){this.node=e,this.offset=s,this.pos=-1}}class rC{constructor(e,s,i,n){this.typeOver=n,this.bounds=null,this.text="",this.domChanged=s>-1;let{impreciseHead:o,impreciseAnchor:r}=e.docView;if(e.state.readOnly&&s>-1)this.newSel=null;else if(s>-1&&(this.bounds=e.docView.domBoundsAround(s,i,0))){let l=o||r?[]:aC(e),a=new iC(l,e.state);a.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=a.text,this.newSel=uC(l,this.bounds.from)}else{let l=e.observer.selectionRange,a=o&&o.node==l.focusNode&&o.offset==l.focusOffset||!Pd(e.contentDOM,l.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(l.focusNode,l.focusOffset),d=r&&r.node==l.anchorNode&&r.offset==l.anchorOffset||!Pd(e.contentDOM,l.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(l.anchorNode,l.anchorOffset),u=e.viewport;if((Te.ios||Te.chrome)&&e.state.selection.main.empty&&a!=d&&(u.from>0||u.to<e.state.doc.length)){let f=Math.min(a,d),h=Math.max(a,d),m=u.from-f,w=u.to-h;(m==0||m==1||f==0)&&(w==0||w==-1||h==e.state.doc.length)&&(a=0,d=e.state.doc.length)}this.newSel=ue.single(d,a)}}}function pv(t,e){let s,{newSel:i}=e,n=t.state.selection.main,o=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:r,to:l}=e.bounds,a=n.from,d=null;(o===8||Te.android&&e.text.length<l-r)&&(a=n.to,d="end");let u=mv(t.state.doc.sliceString(r,l,Jo),e.text,a-r,d);u&&(Te.chrome&&o==13&&u.toB==u.from+2&&e.text.slice(u.from,u.toB)==Jo+Jo&&u.toB--,s={from:r+u.from,to:r+u.toA,insert:st.of(e.text.slice(u.from,u.toB).split(Jo))})}else i&&(!t.hasFocus&&t.state.facet(Oi)||i.main.eq(n))&&(i=null);if(!s&&!i)return!1;if(!s&&e.typeOver&&!n.empty&&i&&i.main.empty?s={from:n.from,to:n.to,insert:t.state.doc.slice(n.from,n.to)}:(Te.mac||Te.android)&&s&&s.from==s.to&&s.from==n.head-1&&/^\. ?$/.test(s.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(i&&s.insert.length==2&&(i=ue.single(i.main.anchor-1,i.main.head-1)),s={from:s.from,to:s.to,insert:st.of([s.insert.toString().replace("."," ")])}):s&&s.from>=n.from&&s.to<=n.to&&(s.from!=n.from||s.to!=n.to)&&n.to-n.from-(s.to-s.from)<=4?s={from:n.from,to:n.to,insert:t.state.doc.slice(n.from,s.from).append(s.insert).append(t.state.doc.slice(s.to,n.to))}:Te.chrome&&s&&s.from==s.to&&s.from==n.head&&s.insert.toString()==`
 `&&t.lineWrapping&&(i&&(i=ue.single(i.main.anchor-1,i.main.head-1)),s={from:n.from,to:n.to,insert:st.of([" "])}),s)return Wc(t,s,i,o);if(i&&!i.main.eq(n)){let r=!1,l="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(r=!0),l=t.inputState.lastSelectionOrigin,l=="select.pointer"&&(i=hv(t.state.facet(qr).map(a=>a(t)),i))),t.dispatch({selection:i,scrollIntoView:r,userEvent:l}),!0}else return!1}function Wc(t,e,s,i=-1){if(Te.ios&&t.inputState.flushIOSKey(e))return!0;let n=t.state.selection.main;if(Te.android&&(e.to==n.to&&(e.from==n.from||e.from==n.from-1&&t.state.sliceDoc(e.from,n.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&co(t.contentDOM,"Enter",13)||(e.from==n.from-1&&e.to==n.to&&e.insert.length==0||i==8&&e.insert.length<e.to-e.from&&e.to>n.head)&&co(t.contentDOM,"Backspace",8)||e.from==n.from&&e.to==n.to+1&&e.insert.length==0&&co(t.contentDOM,"Delete",46)))return!0;let o=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let r,l=()=>r||(r=lC(t,e,s));return t.state.facet(ev).some(a=>a(t,e.from,e.to,o,l))||t.dispatch(l()),!0}function lC(t,e,s){let i,n=t.state,o=n.selection.main,r=-1;if(e.from==e.to&&e.from<o.from||e.from>o.to){let a=e.from<o.from?-1:1,d=a<0?o.from:o.to,u=dr(n.facet(qr).map(f=>f(t)),d,a);e.from==u&&(r=u)}if(r>-1)i={changes:e,selection:ue.cursor(e.from+e.insert.length,-1)};else if(e.from>=o.from&&e.to<=o.to&&e.to-e.from>=(o.to-o.from)/3&&(!s||s.main.empty&&s.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let a=o.from<e.from?n.sliceDoc(o.from,e.from):"",d=o.to>e.to?n.sliceDoc(e.to,o.to):"";i=n.replaceSelection(t.state.toText(a+e.insert.sliceString(0,void 0,t.state.lineBreak)+d))}else{let a=n.changes(e),d=s&&s.main.to<=a.newLength?s.main:void 0;if(n.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=o.to&&e.to>=o.to-10){let u=t.state.sliceDoc(e.from,e.to),f,h=s&&dv(t,s.main.head);if(h){let p=e.insert.length-(e.to-e.from);f={from:h.from,to:h.to-p}}else f=t.state.doc.lineAt(o.head);let m=o.to-e.to,w=o.to-o.from;i=n.changeByRange(p=>{if(p.from==o.from&&p.to==o.to)return{changes:a,range:d||p.map(a)};let C=p.to-m,V=C-u.length;if(p.to-p.from!=w||t.state.sliceDoc(V,C)!=u||p.to>=f.from&&p.from<=f.to)return{range:p};let U=n.changes({from:V,to:C,insert:e.insert}),B=p.to-o.to;return{changes:U,range:d?ue.range(Math.max(0,d.anchor+B),Math.max(0,d.head+B)):p.map(U)}})}else i={changes:a,selection:d&&n.selection.replaceRange(d)}}let l="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,l+=".compose",t.inputState.compositionFirstChange&&(l+=".start",t.inputState.compositionFirstChange=!1)),n.update(i,{userEvent:l,scrollIntoView:!0})}function mv(t,e,s,i){let n=Math.min(t.length,e.length),o=0;for(;o<n&&t.charCodeAt(o)==e.charCodeAt(o);)o++;if(o==n&&t.length==e.length)return null;let r=t.length,l=e.length;for(;r>0&&l>0&&t.charCodeAt(r-1)==e.charCodeAt(l-1);)r--,l--;if(i=="end"){let a=Math.max(0,o-Math.min(r,l));s-=r+a-o}if(r<o&&t.length<e.length){let a=s<=o&&s>=r?o-s:0;o-=a,l=o+(l-r),r=o}else if(l<o){let a=s<=o&&s>=l?o-s:0;o-=a,r=o+(r-l),l=o}return{from:o,toA:r,toB:l}}function aC(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:s,anchorOffset:i,focusNode:n,focusOffset:o}=t.observer.selectionRange;return s&&(e.push(new pp(s,i)),(n!=s||o!=i)&&e.push(new pp(n,o))),e}function uC(t,e){if(t.length==0)return null;let s=t[0].pos,i=t.length==2?t[1].pos:s;return s>-1&&i>-1?ue.single(s+e,i+e):null}class dC{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Te.safari&&e.contentDOM.addEventListener("input",()=>null),Te.gecko&&AC(e.contentDOM.ownerDocument)}handleEvent(e){!yC(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,s){let i=this.handlers[e];if(i){for(let n of i.observers)n(this.view,s);for(let n of i.handlers){if(s.defaultPrevented)break;if(n(this.view,s)){s.preventDefault();break}}}}ensureHandlers(e){let s=cC(e),i=this.handlers,n=this.view.contentDOM;for(let o in s)if(o!="scroll"){let r=!s[o].handlers.length,l=i[o];l&&r!=!l.handlers.length&&(n.removeEventListener(o,this.handleEvent),l=null),l||n.addEventListener(o,this.handleEvent,{passive:r})}for(let o in i)o!="scroll"&&!s[o]&&n.removeEventListener(o,this.handleEvent);this.handlers=s}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&vv.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),Te.android&&Te.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let s;return Te.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((s=gv.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||fC.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=s||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let s=this.pendingIOSKey;return!s||s.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,co(this.view.contentDOM,s.key,s.keyCode,s instanceof KeyboardEvent?s:void 0))}ignoreDuringComposition(e){return!/^key/.test(e.type)||e.synthetic?!1:this.composing>0?!0:Te.safari&&!Te.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function mp(t,e){return(s,i)=>{try{return e.call(t,i,s)}catch(n){ks(s.state,n)}}}function cC(t){let e=Object.create(null);function s(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of t){let n=i.spec,o=n&&n.plugin.domEventHandlers,r=n&&n.plugin.domEventObservers;if(o)for(let l in o){let a=o[l];a&&s(l).handlers.push(mp(i.value,a))}if(r)for(let l in r){let a=r[l];a&&s(l).observers.push(mp(i.value,a))}}for(let i in ei)s(i).handlers.push(ei[i]);for(let i in Fs)s(i).observers.push(Fs[i]);return e}const gv=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],fC="dthko",vv=[16,17,18,20,91,92,224,225],yl=6;function bl(t){return Math.max(0,t)*.7+8}function hC(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class pC{constructor(e,s,i,n){this.view=e,this.startEvent=s,this.style=i,this.mustSelect=n,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=s,this.scrollParents=wS(e.contentDOM),this.atoms=e.state.facet(qr).map(r=>r(e));let o=e.contentDOM.ownerDocument;o.addEventListener("mousemove",this.move=this.move.bind(this)),o.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=s.shiftKey,this.multiple=e.state.facet(et.allowMultipleSelections)&&mC(e,s),this.dragging=vC(e,s)&&kv(s)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&hC(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let s=0,i=0,n=0,o=0,r=this.view.win.innerWidth,l=this.view.win.innerHeight;this.scrollParents.x&&({left:n,right:r}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:o,bottom:l}=this.scrollParents.y.getBoundingClientRect());let a=Hc(this.view);e.clientX-a.left<=n+yl?s=-bl(n-e.clientX):e.clientX+a.right>=r-yl&&(s=bl(e.clientX-r)),e.clientY-a.top<=o+yl?i=-bl(o-e.clientY):e.clientY+a.bottom>=l-yl&&(i=bl(e.clientY-l)),this.setScrollSpeed(s,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,s){this.scrollSpeed={x:e,y:s},e||s?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:s}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),s&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=s,s=0),(e||s)&&this.view.win.scrollBy(e,s),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:s}=this,i=hv(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(s.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(s=>s.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function mC(t,e){let s=t.state.facet(Y0);return s.length?s[0](e):Te.mac?e.metaKey:e.ctrlKey}function gC(t,e){let s=t.state.facet(Q0);return s.length?s[0](e):Te.mac?!e.altKey:!e.ctrlKey}function vC(t,e){let{main:s}=t.state.selection;if(s.empty)return!1;let i=Ar(t.root);if(!i||i.rangeCount==0)return!0;let n=i.getRangeAt(0).getClientRects();for(let o=0;o<n.length;o++){let r=n[o];if(r.left<=e.clientX&&r.right>=e.clientX&&r.top<=e.clientY&&r.bottom>=e.clientY)return!0}return!1}function yC(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let s=e.target,i;s!=t.contentDOM;s=s.parentNode)if(!s||s.nodeType==11||(i=ut.get(s))&&i.ignoreEvent(e))return!1;return!0}const ei=Object.create(null),Fs=Object.create(null),yv=Te.ie&&Te.ie_version<15||Te.ios&&Te.webkit_version<604;function bC(t){let e=t.dom.parentNode;if(!e)return;let s=e.appendChild(document.createElement("textarea"));s.style.cssText="position: fixed; left: -10000px; top: 10px",s.focus(),setTimeout(()=>{t.focus(),s.remove(),bv(t,s.value)},50)}function Ya(t,e,s){for(let i of t.facet(e))s=i(s,t);return s}function bv(t,e){e=Ya(t.state,Nc,e);let{state:s}=t,i,n=1,o=s.toText(e),r=o.lines==s.selection.ranges.length;if(Hd!=null&&s.selection.ranges.every(a=>a.empty)&&Hd==o.toString()){let a=-1;i=s.changeByRange(d=>{let u=s.doc.lineAt(d.from);if(u.from==a)return{range:d};a=u.from;let f=s.toText((r?o.line(n++).text:e)+s.lineBreak);return{changes:{from:u.from,insert:f},range:ue.cursor(d.from+f.length)}})}else r?i=s.changeByRange(a=>{let d=o.line(n++);return{changes:{from:a.from,to:a.to,insert:d.text},range:ue.cursor(a.from+d.length)}}):i=s.replaceSelection(o);t.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}Fs.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};ei.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);Fs.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};Fs.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};ei.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let s=null;for(let i of t.state.facet(X0))if(s=i(t,e),s)break;if(!s&&e.button==0&&(s=wC(t,e)),s){let i=!t.hasFocus;t.inputState.startMouseSelection(new pC(t,e,s,i)),i&&t.observer.ignore(()=>{O0(t.contentDOM);let o=t.root.activeElement;o&&!o.contains(t.contentDOM)&&o.blur()});let n=t.inputState.mouseSelection;if(n)return n.start(e),n.dragging===!1}else t.inputState.setSelectionOrigin("select.pointer");return!1};function gp(t,e,s,i){if(i==1)return ue.cursor(e,s);if(i==2)return JS(t.state,e,s);{let n=Et.find(t.docView,e),o=t.state.doc.lineAt(n?n.posAtEnd:e),r=n?n.posAtStart:o.from,l=n?n.posAtEnd:o.to;return l<t.state.doc.length&&l==o.to&&l++,ue.range(r,l)}}let vp=(t,e,s)=>e>=s.top&&e<=s.bottom&&t>=s.left&&t<=s.right;function kC(t,e,s,i){let n=Et.find(t.docView,e);if(!n)return 1;let o=e-n.posAtStart;if(o==0)return 1;if(o==n.length)return-1;let r=n.coordsAt(o,-1);if(r&&vp(s,i,r))return-1;let l=n.coordsAt(o,1);return l&&vp(s,i,l)?1:r&&r.bottom>=i?-1:1}function yp(t,e){let s=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:s,bias:kC(t,s,e.clientX,e.clientY)}}const xC=Te.ie&&Te.ie_version<=11;let bp=null,kp=0,xp=0;function kv(t){if(!xC)return t.detail;let e=bp,s=xp;return bp=t,xp=Date.now(),kp=!e||s>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(kp+1)%3:1}function wC(t,e){let s=yp(t,e),i=kv(e),n=t.state.selection;return{update(o){o.docChanged&&(s.pos=o.changes.mapPos(s.pos),n=n.map(o.changes))},get(o,r,l){let a=yp(t,o),d,u=gp(t,a.pos,a.bias,i);if(s.pos!=a.pos&&!r){let f=gp(t,s.pos,s.bias,i),h=Math.min(f.from,u.from),m=Math.max(f.to,u.to);u=h<u.from?ue.range(h,m):ue.range(m,h)}return r?n.replaceRange(n.main.extend(u.from,u.to)):l&&i==1&&n.ranges.length>1&&(d=_C(n,a.pos))?d:l?n.addRange(u):ue.create([u])}}}function _C(t,e){for(let s=0;s<t.ranges.length;s++){let{from:i,to:n}=t.ranges[s];if(i<=e&&n>=e)return ue.create(t.ranges.slice(0,s).concat(t.ranges.slice(s+1)),t.mainIndex==s?0:t.mainIndex-(t.mainIndex>s?1:0))}return null}ei.dragstart=(t,e)=>{let{selection:{main:s}}=t.state;if(e.target.draggable){let n=t.docView.nearest(e.target);if(n&&n.isWidget){let o=n.posAtStart,r=o+n.length;(o>=s.to||r<=s.from)&&(s=ue.range(o,r))}}let{inputState:i}=t;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=s,e.dataTransfer&&(e.dataTransfer.setData("Text",Ya(t.state,zc,t.state.sliceDoc(s.from,s.to))),e.dataTransfer.effectAllowed="copyMove"),!1};ei.dragend=t=>(t.inputState.draggedContent=null,!1);function wp(t,e,s,i){if(s=Ya(t.state,Nc,s),!s)return;let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:o}=t.inputState,r=i&&o&&gC(t,e)?{from:o.from,to:o.to}:null,l={from:n,insert:s},a=t.state.changes(r?[r,l]:l);t.focus(),t.dispatch({changes:a,selection:{anchor:a.mapPos(n,-1),head:a.mapPos(n,1)},userEvent:r?"move.drop":"input.drop"}),t.inputState.draggedContent=null}ei.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let s=e.dataTransfer.files;if(s&&s.length){let i=Array(s.length),n=0,o=()=>{++n==s.length&&wp(t,e,i.filter(r=>r!=null).join(t.state.lineBreak),!1)};for(let r=0;r<s.length;r++){let l=new FileReader;l.onerror=o,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(i[r]=l.result),o()},l.readAsText(s[r])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return wp(t,e,i,!0),!0}return!1};ei.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let s=yv?null:e.clipboardData;return s?(bv(t,s.getData("text/plain")||s.getData("text/uri-list")),!0):(bC(t),!1)};function SC(t,e){let s=t.dom.parentNode;if(!s)return;let i=s.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),t.focus()},50)}function CC(t){let e=[],s=[],i=!1;for(let n of t.selection.ranges)n.empty||(e.push(t.sliceDoc(n.from,n.to)),s.push(n));if(!e.length){let n=-1;for(let{from:o}of t.selection.ranges){let r=t.doc.lineAt(o);r.number>n&&(e.push(r.text),s.push({from:r.from,to:Math.min(t.doc.length,r.to+1)})),n=r.number}i=!0}return{text:Ya(t,zc,e.join(t.lineBreak)),ranges:s,linewise:i}}let Hd=null;ei.copy=ei.cut=(t,e)=>{let{text:s,ranges:i,linewise:n}=CC(t.state);if(!s&&!n)return!1;Hd=n?s:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let o=yv?null:e.clipboardData;return o?(o.clearData(),o.setData("text/plain",s),!0):(SC(t,s),!1)};const xv=Ni.define();function wv(t,e){let s=[];for(let i of t.facet(tv)){let n=i(t,e);n&&s.push(n)}return s.length?t.update({effects:s,annotations:xv.of(!0)}):null}function _v(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let s=wv(t.state,e);s?t.dispatch(s):t.update([])}},10)}Fs.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),_v(t)};Fs.blur=t=>{t.observer.clearSelectionRange(),_v(t)};Fs.compositionstart=Fs.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};Fs.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,Te.chrome&&Te.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};Fs.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};ei.beforeinput=(t,e)=>{var s,i;if(e.inputType=="insertReplacementText"&&t.observer.editContext){let o=(s=e.dataTransfer)===null||s===void 0?void 0:s.getData("text/plain"),r=e.getTargetRanges();if(o&&r.length){let l=r[0],a=t.posAtDOM(l.startContainer,l.startOffset),d=t.posAtDOM(l.endContainer,l.endOffset);return Wc(t,{from:a,to:d,insert:t.state.toText(o)},null),!0}}let n;if(Te.chrome&&Te.android&&(n=gv.find(o=>o.inputType==e.inputType))&&(t.observer.delayAndroidKey(n.key,n.keyCode),n.key=="Backspace"||n.key=="Delete")){let o=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var r;(((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0)>o+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return Te.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),Te.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>Fs.compositionend(t,e),20),!1};const _p=new Set;function AC(t){_p.has(t)||(_p.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const Sp=["pre-wrap","normal","pre-line","break-spaces"];let wo=!1;function Cp(){wo=!1}class VC{constructor(e){this.lineWrapping=e,this.doc=st.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,s){let i=this.doc.lineAt(s).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((s-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return Sp.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let s=!1;for(let i=0;i<e.length;i++){let n=e[i];n<0?i++:this.heightSamples[Math.floor(n*10)]||(s=!0,this.heightSamples[Math.floor(n*10)]=!0)}return s}refresh(e,s,i,n,o,r){let l=Sp.indexOf(e)>-1,a=Math.round(s)!=Math.round(this.lineHeight)||this.lineWrapping!=l;if(this.lineWrapping=l,this.lineHeight=s,this.charWidth=i,this.textHeight=n,this.lineLength=o,a){this.heightSamples={};for(let d=0;d<r.length;d++){let u=r[d];u<0?d++:this.heightSamples[Math.floor(u*10)]=!0}}return a}}class MC{constructor(e,s){this.from=e,this.heights=s,this.index=0}get more(){return this.index<this.heights.length}}class mi{constructor(e,s,i,n,o){this.from=e,this.length=s,this.top=i,this.height=n,this._content=o}get type(){return typeof this._content=="number"?hs.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof un?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let s=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new mi(this.from,this.length+e.length,this.top,this.height+e.height,s)}}var bt=(function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t})(bt||(bt={}));const ql=.001;class ps{constructor(e,s,i=2){this.length=e,this.height=s,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>ql&&(wo=!0),this.height=e)}replace(e,s,i){return ps.of(i)}decomposeLeft(e,s){s.push(this)}decomposeRight(e,s){s.push(this)}applyChanges(e,s,i,n){let o=this,r=i.doc;for(let l=n.length-1;l>=0;l--){let{fromA:a,toA:d,fromB:u,toB:f}=n[l],h=o.lineAt(a,bt.ByPosNoHeight,i.setDoc(s),0,0),m=h.to>=d?h:o.lineAt(d,bt.ByPosNoHeight,i,0,0);for(f+=m.to-d,d=m.to;l>0&&h.from<=n[l-1].toA;)a=n[l-1].fromA,u=n[l-1].fromB,l--,a<h.from&&(h=o.lineAt(a,bt.ByPosNoHeight,i,0,0));u+=h.from-a,a=h.from;let w=qc.build(i.setDoc(r),e,u,f);o=pa(o,o.replace(a,d,w))}return o.updateHeight(i,0)}static empty(){return new Vs(0,0)}static of(e){if(e.length==1)return e[0];let s=0,i=e.length,n=0,o=0;for(;;)if(s==i)if(n>o*2){let l=e[s-1];l.break?e.splice(--s,1,l.left,null,l.right):e.splice(--s,1,l.left,l.right),i+=1+l.break,n-=l.size}else if(o>n*2){let l=e[i];l.break?e.splice(i,1,l.left,null,l.right):e.splice(i,1,l.left,l.right),i+=2+l.break,o-=l.size}else break;else if(n<o){let l=e[s++];l&&(n+=l.size)}else{let l=e[--i];l&&(o+=l.size)}let r=0;return e[s-1]==null?(r=1,s--):e[s]==null&&(r=1,i++),new DC(ps.of(e.slice(0,s)),r,ps.of(e.slice(i)))}}function pa(t,e){return t==e?t:(t.constructor!=e.constructor&&(wo=!0),e)}ps.prototype.size=1;class Sv extends ps{constructor(e,s,i){super(e,s),this.deco=i}blockAt(e,s,i,n){return new mi(n,this.length,i,this.height,this.deco||0)}lineAt(e,s,i,n,o){return this.blockAt(0,i,n,o)}forEachLine(e,s,i,n,o,r){e<=o+this.length&&s>=o&&r(this.blockAt(0,i,n,o))}updateHeight(e,s=0,i=!1,n){return n&&n.from<=s&&n.more&&this.setHeight(n.heights[n.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Vs extends Sv{constructor(e,s){super(e,s,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,s,i,n){return new mi(n,this.length,i,this.height,this.breaks)}replace(e,s,i){let n=i[0];return i.length==1&&(n instanceof Vs||n instanceof Ft&&n.flags&4)&&Math.abs(this.length-n.length)<10?(n instanceof Ft?n=new Vs(n.length,this.height):n.height=this.height,this.outdated||(n.outdated=!1),n):ps.of(i)}updateHeight(e,s=0,i=!1,n){return n&&n.from<=s&&n.more?this.setHeight(n.heights[n.index++]):(i||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Ft extends ps{constructor(e){super(e,0)}heightMetrics(e,s){let i=e.doc.lineAt(s).number,n=e.doc.lineAt(s+this.length).number,o=n-i+1,r,l=0;if(e.lineWrapping){let a=Math.min(this.height,e.lineHeight*o);r=a/o,this.length>o+1&&(l=(this.height-a)/(this.length-o-1))}else r=this.height/o;return{firstLine:i,lastLine:n,perLine:r,perChar:l}}blockAt(e,s,i,n){let{firstLine:o,lastLine:r,perLine:l,perChar:a}=this.heightMetrics(s,n);if(s.lineWrapping){let d=n+(e<s.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),u=s.doc.lineAt(d),f=l+u.length*a,h=Math.max(i,e-f/2);return new mi(u.from,u.length,h,f,0)}else{let d=Math.max(0,Math.min(r-o,Math.floor((e-i)/l))),{from:u,length:f}=s.doc.line(o+d);return new mi(u,f,i+l*d,l,0)}}lineAt(e,s,i,n,o){if(s==bt.ByHeight)return this.blockAt(e,i,n,o);if(s==bt.ByPosNoHeight){let{from:m,to:w}=i.doc.lineAt(e);return new mi(m,w-m,0,0,0)}let{firstLine:r,perLine:l,perChar:a}=this.heightMetrics(i,o),d=i.doc.lineAt(e),u=l+d.length*a,f=d.number-r,h=n+l*f+a*(d.from-o-f);return new mi(d.from,d.length,Math.max(n,Math.min(h,n+this.height-u)),u,0)}forEachLine(e,s,i,n,o,r){e=Math.max(e,o),s=Math.min(s,o+this.length);let{firstLine:l,perLine:a,perChar:d}=this.heightMetrics(i,o);for(let u=e,f=n;u<=s;){let h=i.doc.lineAt(u);if(u==e){let w=h.number-l;f+=a*w+d*(e-o-w)}let m=a+d*h.length;r(new mi(h.from,h.length,f,m,0)),f+=m,u=h.to+1}}replace(e,s,i){let n=this.length-s;if(n>0){let o=i[i.length-1];o instanceof Ft?i[i.length-1]=new Ft(o.length+n):i.push(null,new Ft(n-1))}if(e>0){let o=i[0];o instanceof Ft?i[0]=new Ft(e+o.length):i.unshift(new Ft(e-1),null)}return ps.of(i)}decomposeLeft(e,s){s.push(new Ft(e-1),null)}decomposeRight(e,s){s.push(null,new Ft(this.length-e-1))}updateHeight(e,s=0,i=!1,n){let o=s+this.length;if(n&&n.from<=s+this.length&&n.more){let r=[],l=Math.max(s,n.from),a=-1;for(n.from>s&&r.push(new Ft(n.from-s-1).updateHeight(e,s));l<=o&&n.more;){let u=e.doc.lineAt(l).length;r.length&&r.push(null);let f=n.heights[n.index++];a==-1?a=f:Math.abs(f-a)>=ql&&(a=-2);let h=new Vs(u,f);h.outdated=!1,r.push(h),l+=u+1}l<=o&&r.push(null,new Ft(o-l).updateHeight(e,l));let d=ps.of(r);return(a<0||Math.abs(d.height-this.height)>=ql||Math.abs(a-this.heightMetrics(e,s).perLine)>=ql)&&(wo=!0),pa(this,d)}else(i||this.outdated)&&(this.setHeight(e.heightForGap(s,s+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class DC extends ps{constructor(e,s,i){super(e.length+s+i.length,e.height+i.height,s|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,s,i,n){let o=i+this.left.height;return e<o?this.left.blockAt(e,s,i,n):this.right.blockAt(e,s,o,n+this.left.length+this.break)}lineAt(e,s,i,n,o){let r=n+this.left.height,l=o+this.left.length+this.break,a=s==bt.ByHeight?e<r:e<l,d=a?this.left.lineAt(e,s,i,n,o):this.right.lineAt(e,s,i,r,l);if(this.break||(a?d.to<l:d.from>l))return d;let u=s==bt.ByPosNoHeight?bt.ByPosNoHeight:bt.ByPos;return a?d.join(this.right.lineAt(l,u,i,r,l)):this.left.lineAt(l,u,i,n,o).join(d)}forEachLine(e,s,i,n,o,r){let l=n+this.left.height,a=o+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,s,i,n,o,r),s>=a&&this.right.forEachLine(e,s,i,l,a,r);else{let d=this.lineAt(a,bt.ByPos,i,n,o);e<d.from&&this.left.forEachLine(e,d.from-1,i,n,o,r),d.to>=e&&d.from<=s&&r(d),s>d.to&&this.right.forEachLine(d.to+1,s,i,l,a,r)}}replace(e,s,i){let n=this.left.length+this.break;if(s<n)return this.balanced(this.left.replace(e,s,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-n,s-n,i));let o=[];e>0&&this.decomposeLeft(e,o);let r=o.length;for(let l of i)o.push(l);if(e>0&&Ap(o,r-1),s<this.length){let l=o.length;this.decomposeRight(s,o),Ap(o,l)}return ps.of(o)}decomposeLeft(e,s){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,s);s.push(this.left),this.break&&(i++,e>=i&&s.push(null)),e>i&&this.right.decomposeLeft(e-i,s)}decomposeRight(e,s){let i=this.left.length,n=i+this.break;if(e>=n)return this.right.decomposeRight(e-n,s);e<i&&this.left.decomposeRight(e,s),this.break&&e<n&&s.push(null),s.push(this.right)}balanced(e,s){return e.size>2*s.size||s.size>2*e.size?ps.of(this.break?[e,null,s]:[e,s]):(this.left=pa(this.left,e),this.right=pa(this.right,s),this.setHeight(e.height+s.height),this.outdated=e.outdated||s.outdated,this.size=e.size+s.size,this.length=e.length+this.break+s.length,this)}updateHeight(e,s=0,i=!1,n){let{left:o,right:r}=this,l=s+o.length+this.break,a=null;return n&&n.from<=s+o.length&&n.more?a=o=o.updateHeight(e,s,i,n):o.updateHeight(e,s,i),n&&n.from<=l+r.length&&n.more?a=r=r.updateHeight(e,l,i,n):r.updateHeight(e,l,i),a?this.balanced(o,r):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Ap(t,e){let s,i;t[e]==null&&(s=t[e-1])instanceof Ft&&(i=t[e+1])instanceof Ft&&t.splice(e-1,3,new Ft(s.length+1+i.length))}const $C=5;class qc{constructor(e,s){this.pos=e,this.oracle=s,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,s){if(this.lineStart>-1){let i=Math.min(s,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof Vs?n.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new Vs(i-this.pos,-1)),this.writtenTo=i,s>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=s}point(e,s,i){if(e<s||i.heightRelevant){let n=i.widget?i.widget.estimatedHeight:0,o=i.widget?i.widget.lineBreaks:0;n<0&&(n=this.oracle.lineHeight);let r=s-e;i.block?this.addBlock(new Sv(r,n,i)):(r||o||n>=$C)&&this.addLineDeco(n,o,r)}else s>e&&this.span(e,s);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:s}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=s,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Vs(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,s){let i=new Ft(s-e);return this.oracle.doc.lineAt(e).to==s&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Vs)return e;let s=new Vs(0,-1);return this.nodes.push(s),s}addBlock(e){this.enterLine();let s=e.deco;s&&s.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,s&&s.endSide>0&&(this.covering=e)}addLineDeco(e,s,i){let n=this.ensureLine();n.length+=i,n.collapsed+=i,n.widgetHeight=Math.max(n.widgetHeight,e),n.breaks+=s,this.writtenTo=this.pos=this.pos+i}finish(e){let s=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(s instanceof Vs)&&!this.isCovered?this.nodes.push(new Vs(0,-1)):(this.writtenTo<this.pos||s==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let n of this.nodes)n instanceof Vs&&n.updateHeight(this.oracle,i),i+=n?n.length:1;return this.nodes}static build(e,s,i,n){let o=new qc(i,e);return tt.spans(s,i,n,o,0),o.finish(i)}}function TC(t,e,s){let i=new EC;return tt.compare(t,e,s,i,0),i.changes}class EC{constructor(){this.changes=[]}compareRange(){}comparePoint(e,s,i,n){(e<s||i&&i.heightRelevant||n&&n.heightRelevant)&&Wl(e,s,this.changes,5)}}function OC(t,e){let s=t.getBoundingClientRect(),i=t.ownerDocument,n=i.defaultView||window,o=Math.max(0,s.left),r=Math.min(n.innerWidth,s.right),l=Math.max(0,s.top),a=Math.min(n.innerHeight,s.bottom);for(let d=t.parentNode;d&&d!=i.body;)if(d.nodeType==1){let u=d,f=window.getComputedStyle(u);if((u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth)&&f.overflow!="visible"){let h=u.getBoundingClientRect();o=Math.max(o,h.left),r=Math.min(r,h.right),l=Math.max(l,h.top),a=Math.min(d==t.parentNode?n.innerHeight:a,h.bottom)}d=f.position=="absolute"||f.position=="fixed"?u.offsetParent:u.parentNode}else if(d.nodeType==11)d=d.host;else break;return{left:o-s.left,right:Math.max(o,r)-s.left,top:l-(s.top+e),bottom:Math.max(l,a)-(s.top+e)}}function PC(t){let e=t.getBoundingClientRect(),s=t.ownerDocument.defaultView||window;return e.left<s.innerWidth&&e.right>0&&e.top<s.innerHeight&&e.bottom>0}function LC(t,e){let s=t.getBoundingClientRect();return{left:0,right:s.right-s.left,top:e,bottom:s.bottom-(s.top+e)}}class $u{constructor(e,s,i,n){this.from=e,this.to=s,this.size=i,this.displaySize=n}static same(e,s){if(e.length!=s.length)return!1;for(let i=0;i<e.length;i++){let n=e[i],o=s[i];if(n.from!=o.from||n.to!=o.to||n.size!=o.size)return!1}return!0}draw(e,s){return He.replace({widget:new jC(this.displaySize*(s?e.scaleY:e.scaleX),s)}).range(this.from,this.to)}}class jC extends fn{constructor(e,s){super(),this.size=e,this.vertical=s}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class Vp{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=Mp,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=kt.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let s=e.facet(Fc).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new VC(s),this.stateDeco=e.facet(Mr).filter(i=>typeof i!="function"),this.heightMap=ps.empty().applyChanges(this.stateDeco,st.empty,this.heightOracle.setDoc(e.doc),[new Us(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=He.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:s}=this.state.selection;for(let i=0;i<=1;i++){let n=i?s.head:s.anchor;if(!e.some(({from:o,to:r})=>n>=o&&n<=r)){let{from:o,to:r}=this.lineBlockAt(n);e.push(new kl(o,r))}}return this.viewports=e.sort((i,n)=>i.from-n.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?Mp:new Kc(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Yo(e,this.scaler))})}update(e,s=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(Mr).filter(u=>typeof u!="function");let n=e.changedRanges,o=Us.extendWithRanges(n,TC(i,this.stateDeco,e?e.changes:Bt.empty(this.state.doc.length))),r=this.heightMap.height,l=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);Cp(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),o),(this.heightMap.height!=r||wo)&&(e.flags|=2),l?(this.scrollAnchorPos=e.changes.mapPos(l.from,-1),this.scrollAnchorHeight=l.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=r);let a=o.length?this.mapViewport(this.viewport,e.changes):this.viewport;(s&&(s.range.head<a.from||s.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,s));let d=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,e.flags|=this.updateForViewport(),(d||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),s&&(this.scrollTarget=s),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(iv)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let s=e.contentDOM,i=window.getComputedStyle(s),n=this.heightOracle,o=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?kt.RTL:kt.LTR;let r=this.heightOracle.mustRefreshForWrapping(o),l=s.getBoundingClientRect(),a=r||this.mustMeasureContent||this.contentDOMHeight!=l.height;this.contentDOMHeight=l.height,this.mustMeasureContent=!1;let d=0,u=0;if(l.width&&l.height){let{scaleX:H,scaleY:j}=E0(s,l);(H>.005&&Math.abs(this.scaleX-H)>.005||j>.005&&Math.abs(this.scaleY-j)>.005)&&(this.scaleX=H,this.scaleY=j,d|=16,r=a=!0)}let f=(parseInt(i.paddingTop)||0)*this.scaleY,h=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=f||this.paddingBottom!=h)&&(this.paddingTop=f,this.paddingBottom=h,d|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(n.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,d|=16);let m=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=m&&(this.scrollAnchorHeight=-1,this.scrollTop=m),this.scrolledToBottom=L0(e.scrollDOM);let w=(this.printing?LC:OC)(s,this.paddingTop),p=w.top-this.pixelViewport.top,C=w.bottom-this.pixelViewport.bottom;this.pixelViewport=w;let V=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(V!=this.inView&&(this.inView=V,V&&(a=!0)),!this.inView&&!this.scrollTarget&&!PC(e.dom))return 0;let U=l.width;if((this.contentDOMWidth!=U||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=l.width,this.editorHeight=e.scrollDOM.clientHeight,d|=16),a){let H=e.docView.measureVisibleLineHeights(this.viewport);if(n.mustRefreshForHeights(H)&&(r=!0),r||n.lineWrapping&&Math.abs(U-this.contentDOMWidth)>n.charWidth){let{lineHeight:j,charWidth:T,textHeight:A}=e.docView.measureTextSize();r=j>0&&n.refresh(o,j,T,A,Math.max(5,U/T),H),r&&(e.docView.minWidth=0,d|=16)}p>0&&C>0?u=Math.max(p,C):p<0&&C<0&&(u=Math.min(p,C)),Cp();for(let j of this.viewports){let T=j.from==this.viewport.from?H:e.docView.measureVisibleLineHeights(j);this.heightMap=(r?ps.empty().applyChanges(this.stateDeco,st.empty,this.heightOracle,[new Us(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(n,0,r,new MC(j.from,T))}wo&&(d|=2)}let B=!this.viewportIsAppropriate(this.viewport,u)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return B&&(d&2&&(d|=this.updateScaler()),this.viewport=this.getViewport(u,this.scrollTarget),d|=this.updateForViewport()),(d&2||B)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(r?[]:this.lineGaps,e)),d|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),d}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,s){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),n=this.heightMap,o=this.heightOracle,{visibleTop:r,visibleBottom:l}=this,a=new kl(n.lineAt(r-i*1e3,bt.ByHeight,o,0,0).from,n.lineAt(l+(1-i)*1e3,bt.ByHeight,o,0,0).to);if(s){let{head:d}=s.range;if(d<a.from||d>a.to){let u=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),f=n.lineAt(d,bt.ByPos,o,0,0),h;s.y=="center"?h=(f.top+f.bottom)/2-u/2:s.y=="start"||s.y=="nearest"&&d<a.from?h=f.top:h=f.bottom-u,a=new kl(n.lineAt(h-1e3/2,bt.ByHeight,o,0,0).from,n.lineAt(h+u+1e3/2,bt.ByHeight,o,0,0).to)}}return a}mapViewport(e,s){let i=s.mapPos(e.from,-1),n=s.mapPos(e.to,1);return new kl(this.heightMap.lineAt(i,bt.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(n,bt.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:s},i=0){if(!this.inView)return!0;let{top:n}=this.heightMap.lineAt(e,bt.ByPos,this.heightOracle,0,0),{bottom:o}=this.heightMap.lineAt(s,bt.ByPos,this.heightOracle,0,0),{visibleTop:r,visibleBottom:l}=this;return(e==0||n<=r-Math.max(10,Math.min(-i,250)))&&(s==this.state.doc.length||o>=l+Math.max(10,Math.min(i,250)))&&n>r-2*1e3&&o<l+2*1e3}mapLineGaps(e,s){if(!e.length||s.empty)return e;let i=[];for(let n of e)s.touchesRange(n.from,n.to)||i.push(new $u(s.mapPos(n.from),s.mapPos(n.to),n.size,n.displaySize));return i}ensureLineGaps(e,s){let i=this.heightOracle.lineWrapping,n=i?1e4:2e3,o=n>>1,r=n<<1;if(this.defaultTextDirection!=kt.LTR&&!i)return[];let l=[],a=(u,f,h,m)=>{if(f-u<o)return;let w=this.state.selection.main,p=[w.from];w.empty||p.push(w.to);for(let V of p)if(V>u&&V<f){a(u,V-10,h,m),a(V+10,f,h,m);return}let C=BC(e,V=>V.from>=h.from&&V.to<=h.to&&Math.abs(V.from-u)<o&&Math.abs(V.to-f)<o&&!p.some(U=>V.from<U&&V.to>U));if(!C){if(f<h.to&&s&&i&&s.visibleRanges.some(B=>B.from<=f&&B.to>=f)){let B=s.moveToLineBoundary(ue.cursor(f),!1,!0).head;B>u&&(f=B)}let V=this.gapSize(h,u,f,m),U=i||V<2e6?V:2e6;C=new $u(u,f,V,U)}l.push(C)},d=u=>{if(u.length<r||u.type!=hs.Text)return;let f=RC(u.from,u.to,this.stateDeco);if(f.total<r)return;let h=this.scrollTarget?this.scrollTarget.range.head:null,m,w;if(i){let p=n/this.heightOracle.lineLength*this.heightOracle.lineHeight,C,V;if(h!=null){let U=wl(f,h),B=((this.visibleBottom-this.visibleTop)/2+p)/u.height;C=U-B,V=U+B}else C=(this.visibleTop-u.top-p)/u.height,V=(this.visibleBottom-u.top+p)/u.height;m=xl(f,C),w=xl(f,V)}else{let p=f.total*this.heightOracle.charWidth,C=n*this.heightOracle.charWidth,V=0;if(p>2e6)for(let T of e)T.from>=u.from&&T.from<u.to&&T.size!=T.displaySize&&T.from*this.heightOracle.charWidth+V<this.pixelViewport.left&&(V=T.size-T.displaySize);let U=this.pixelViewport.left+V,B=this.pixelViewport.right+V,H,j;if(h!=null){let T=wl(f,h),A=((B-U)/2+C)/p;H=T-A,j=T+A}else H=(U-C)/p,j=(B+C)/p;m=xl(f,H),w=xl(f,j)}m>u.from&&a(u.from,m,u,f),w<u.to&&a(w,u.to,u,f)};for(let u of this.viewportLines)Array.isArray(u.type)?u.type.forEach(d):d(u);return l}gapSize(e,s,i,n){let o=wl(n,i)-wl(n,s);return this.heightOracle.lineWrapping?e.height*o:n.total*this.heightOracle.charWidth*o}updateLineGaps(e){$u.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=He.set(e.map(s=>s.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let s=this.stateDeco;this.lineGaps.length&&(s=s.concat(this.lineGapDeco));let i=[];tt.spans(s,this.viewport.from,this.viewport.to,{span(o,r){i.push({from:o,to:r})},point(){}},20);let n=0;if(i.length!=this.visibleRanges.length)n=12;else for(let o=0;o<i.length&&!(n&8);o++){let r=this.visibleRanges[o],l=i[o];(r.from!=l.from||r.to!=l.to)&&(n|=4,e&&e.mapPos(r.from,-1)==l.from&&e.mapPos(r.to,1)==l.to||(n|=8))}return this.visibleRanges=i,n}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(s=>s.from<=e&&s.to>=e)||Yo(this.heightMap.lineAt(e,bt.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(s=>s.top<=e&&s.bottom>=e)||Yo(this.heightMap.lineAt(this.scaler.fromDOM(e),bt.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let s=this.lineBlockAtHeight(e+8);return s.from>=this.viewport.from||this.viewportLines[0].top-e>200?s:this.viewportLines[0]}elementAtHeight(e){return Yo(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class kl{constructor(e,s){this.from=e,this.to=s}}function RC(t,e,s){let i=[],n=t,o=0;return tt.spans(s,t,e,{span(){},point(r,l){r>n&&(i.push({from:n,to:r}),o+=r-n),n=l}},20),n<e&&(i.push({from:n,to:e}),o+=e-n),{total:o,ranges:i}}function xl({total:t,ranges:e},s){if(s<=0)return e[0].from;if(s>=1)return e[e.length-1].to;let i=Math.floor(t*s);for(let n=0;;n++){let{from:o,to:r}=e[n],l=r-o;if(i<=l)return o+i;i-=l}}function wl(t,e){let s=0;for(let{from:i,to:n}of t.ranges){if(e<=n){s+=e-i;break}s+=n-i}return s/t.total}function BC(t,e){for(let s of t)if(e(s))return s}const Mp={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class Kc{constructor(e,s,i){let n=0,o=0,r=0;this.viewports=i.map(({from:l,to:a})=>{let d=s.lineAt(l,bt.ByPos,e,0,0).top,u=s.lineAt(a,bt.ByPos,e,0,0).bottom;return n+=u-d,{from:l,to:a,top:d,bottom:u,domTop:0,domBottom:0}}),this.scale=(7e6-n)/(s.height-n);for(let l of this.viewports)l.domTop=r+(l.top-o)*this.scale,r=l.domBottom=l.domTop+(l.bottom-l.top),o=l.bottom}toDOM(e){for(let s=0,i=0,n=0;;s++){let o=s<this.viewports.length?this.viewports[s]:null;if(!o||e<o.top)return n+(e-i)*this.scale;if(e<=o.bottom)return o.domTop+(e-o.top);i=o.bottom,n=o.domBottom}}fromDOM(e){for(let s=0,i=0,n=0;;s++){let o=s<this.viewports.length?this.viewports[s]:null;if(!o||e<o.domTop)return i+(e-n)/this.scale;if(e<=o.domBottom)return o.top+(e-o.domTop);i=o.bottom,n=o.domBottom}}eq(e){return e instanceof Kc?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((s,i)=>s.from==e.viewports[i].from&&s.to==e.viewports[i].to):!1}}function Yo(t,e){if(e.scale==1)return t;let s=e.toDOM(t.top),i=e.toDOM(t.bottom);return new mi(t.from,t.length,s,i-s,Array.isArray(t._content)?t._content.map(n=>Yo(n,e)):t._content)}const _l=Le.define({combine:t=>t.join(" ")}),Wd=Le.define({combine:t=>t.indexOf(!0)>-1}),qd=ln.newName(),Cv=ln.newName(),Av=ln.newName(),Vv={"&light":"."+Cv,"&dark":"."+Av};function Kd(t,e,s){return new ln(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,n=>{if(n=="&")return t;if(!s||!s[n])throw new RangeError(`Unsupported selector: ${n}`);return s[n]}):t+" "+i}})}const IC=Kd("."+qd,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Vv),UC={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Tu=Te.ie&&Te.ie_version<=11;class NC{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new _S,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(s=>{for(let i of s)this.queue.push(i);(Te.ie&&Te.ie_version<=11||Te.ios&&e.composing)&&s.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&Te.android&&e.constructor.EDIT_CONTEXT!==!1&&!(Te.chrome&&Te.chrome_version<126)&&(this.editContext=new FC(e),e.state.facet(Oi)&&(e.contentDOM.editContext=this.editContext.editContext)),Tu&&(this.onCharData=s=>{this.queue.push({target:s.target,type:"characterData",oldValue:s.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var s;((s=this.view.docView)===null||s===void 0?void 0:s.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(s=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),s.length>0&&s[s.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(s=>{s.length>0&&s[s.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((s,i)=>s!=e[i]))){this.gapIntersection.disconnect();for(let s of e)this.gapIntersection.observe(s);this.gaps=e}}onSelectionChange(e){let s=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,n=this.selectionRange;if(i.state.facet(Oi)?i.root.activeElement!=this.dom:!Hl(this.dom,n))return;let o=n.anchorNode&&i.docView.nearest(n.anchorNode);if(o&&o.ignoreEvent(e)){s||(this.selectionChanged=!1);return}(Te.ie&&Te.ie_version<=11||Te.android&&Te.chrome)&&!i.state.selection.main.empty&&n.focusNode&&ar(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,s=Ar(e.root);if(!s)return!1;let i=Te.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&zC(this.view,s)||s;if(!i||this.selectionRange.eq(i))return!1;let n=Hl(this.dom,i);return n&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&CS(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),n&&(this.selectionChanged=!0),!0)}setSelectionRange(e,s){this.selectionRange.set(e.node,e.offset,s.node,s.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,s=null;for(let i=this.dom;i;)if(i.nodeType==1)!s&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:s||(s=this.scrollTargets.slice(0,e)),s&&s.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!s&&(s=this.scrollTargets.slice(0,e)),s){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=s)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,UC),Tu&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Tu&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,s){var i;if(!this.delayedAndroidKey){let n=()=>{let o=this.delayedAndroidKey;o&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=o.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&o.force&&co(this.dom,o.key,o.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(n)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:s,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let s=-1,i=-1,n=!1;for(let o of e){let r=this.readMutation(o);r&&(r.typeOver&&(n=!0),s==-1?{from:s,to:i}=r:(s=Math.min(r.from,s),i=Math.max(r.to,i)))}return{from:s,to:i,typeOver:n}}readChange(){let{from:e,to:s,typeOver:i}=this.processRecords(),n=this.selectionChanged&&Hl(this.dom,this.selectionRange);if(e<0&&!n)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let o=new rC(this.view,e,s,i);return this.view.docView.domChanged={newSel:o.newSel?o.newSel.main:null},o}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let s=this.readChange();if(!s)return this.view.requestMeasure(),!1;let i=this.view.state,n=pv(this.view,s);return this.view.state==i&&(s.domChanged||s.newSel&&!s.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),n}readMutation(e){let s=this.view.docView.nearest(e.target);if(!s||s.ignoreMutation(e))return null;if(s.markDirty(e.type=="attributes"),e.type=="attributes"&&(s.flags|=4),e.type=="childList"){let i=Dp(s,e.previousSibling||e.target.previousSibling,-1),n=Dp(s,e.nextSibling||e.target.nextSibling,1);return{from:i?s.posAfter(i):s.posAtStart,to:n?s.posBefore(n):s.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:s.posAtStart,to:s.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Oi)!=e.state.facet(Oi)&&(e.view.contentDOM.editContext=e.state.facet(Oi)?this.editContext.editContext:null))}destroy(){var e,s,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(s=this.gapIntersection)===null||s===void 0||s.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function Dp(t,e,s){for(;e;){let i=ut.get(e);if(i&&i.parent==t)return i;let n=e.parentNode;e=n!=t.dom?n:s>0?e.nextSibling:e.previousSibling}return null}function $p(t,e){let s=e.startContainer,i=e.startOffset,n=e.endContainer,o=e.endOffset,r=t.docView.domAtPos(t.state.selection.main.anchor);return ar(r.node,r.offset,n,o)&&([s,i,n,o]=[n,o,s,i]),{anchorNode:s,anchorOffset:i,focusNode:n,focusOffset:o}}function zC(t,e){if(e.getComposedRanges){let n=e.getComposedRanges(t.root)[0];if(n)return $p(t,n)}let s=null;function i(n){n.preventDefault(),n.stopImmediatePropagation(),s=n.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",i,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",i,!0),s?$p(t,s):null}class FC{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let s=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let n=e.state.selection.main,{anchor:o,head:r}=n,l=this.toEditorPos(i.updateRangeStart),a=this.toEditorPos(i.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:l,drifted:!1});let d=a-l>i.text.length;l==this.from&&o<this.from?l=o:a==this.to&&o>this.to&&(a=o);let u=mv(e.state.sliceDoc(l,a),i.text,(d?n.from:n.to)-l,d?"end":null);if(!u){let h=ue.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd));h.main.eq(n)||e.dispatch({selection:h,userEvent:"select"});return}let f={from:u.from+l,to:u.toA+l,insert:st.of(i.text.slice(u.from,u.toB).split(`
`))};if((Te.mac||Te.android)&&f.from==r-1&&/^\. ?$/.test(i.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(f={from:l,to:a,insert:st.of([i.text.replace("."," ")])}),this.pendingContextChange=f,!e.state.readOnly){let h=this.to-this.from+(f.to-f.from+f.insert.length);Wc(e,f,ue.single(this.toEditorPos(i.selectionStart,h),this.toEditorPos(i.selectionEnd,h)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),f.from<f.to&&!f.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(s.text.slice(Math.max(0,i.updateRangeStart-1),Math.min(s.text.length,i.updateRangeStart+1)))&&this.handlers.compositionend(i)},this.handlers.characterboundsupdate=i=>{let n=[],o=null;for(let r=this.toEditorPos(i.rangeStart),l=this.toEditorPos(i.rangeEnd);r<l;r++){let a=e.coordsForChar(r);o=a&&new DOMRect(a.left,a.top,a.right-a.left,a.bottom-a.top)||o||new DOMRect,n.push(o)}s.updateCharacterBounds(i.rangeStart,n)},this.handlers.textformatupdate=i=>{let n=[];for(let o of i.getTextFormats()){let r=o.underlineStyle,l=o.underlineThickness;if(!/none/i.test(r)&&!/none/i.test(l)){let a=this.toEditorPos(o.rangeStart),d=this.toEditorPos(o.rangeEnd);if(a<d){let u=`text-decoration: underline ${/^[a-z]/.test(r)?r+" ":r=="Dashed"?"dashed ":r=="Squiggle"?"wavy ":""}${/thin/i.test(l)?1:2}px`;n.push(He.mark({attributes:{style:u}}).range(a,d))}}}e.dispatch({effects:ov.of(He.set(n))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:i}=this.composing;this.composing=null,i&&this.reset(e.state)}};for(let i in this.handlers)s.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let n=Ar(i.root);n&&n.rangeCount&&this.editContext.updateSelectionBounds(n.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let s=0,i=!1,n=this.pendingContextChange;return e.changes.iterChanges((o,r,l,a,d)=>{if(i)return;let u=d.length-(r-o);if(n&&r>=n.to)if(n.from==o&&n.to==r&&n.insert.eq(d)){n=this.pendingContextChange=null,s+=u,this.to+=u;return}else n=null,this.revertPending(e.state);if(o+=s,r+=s,r<=this.from)this.from+=u,this.to+=u;else if(o<this.to){if(o<this.from||r>this.to||this.to-this.from+d.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(o),this.toContextPos(r),d.toString()),this.to+=u}s+=u}),n&&!i&&this.revertPending(e.state),!i}update(e){let s=this.pendingContextChange,i=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(i.from,i.to)&&e.transactions.some(n=>!n.isUserEvent("input.type")&&n.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||s)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:s}=e.selection.main;this.from=Math.max(0,s-1e4),this.to=Math.min(e.doc.length,s+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let s=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(s.from),this.toContextPos(s.from+s.insert.length),e.doc.sliceString(s.from,s.to))}setSelection(e){let{main:s}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,s.anchor))),n=this.toContextPos(s.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=n)&&this.editContext.updateSelection(i,n)}rangeIsValid(e){let{head:s}=e.selection.main;return!(this.from>0&&s-this.from<500||this.to<e.doc.length&&this.to-s<500||this.to-this.from>1e4*3)}toEditorPos(e,s=this.to-this.from){e=Math.min(e,s);let i=this.composing;return i&&i.drifted?i.editorBase+(e-i.contextBase):e+this.from}toContextPos(e){let s=this.composing;return s&&s.drifted?s.contextBase+(e-s.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class Oe{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var s;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(n=>n.forEach(o=>i(o,this)))||(n=>this.update(n)),this.dispatch=this.dispatch.bind(this),this._root=e.root||SS(e.parent)||document,this.viewState=new Vp(e.state||et.create(e)),e.scrollTo&&e.scrollTo.is(vl)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Xn).map(n=>new Vu(n));for(let n of this.plugins)n.update(this);this.observer=new NC(this),this.inputState=new dC(this),this.inputState.ensureHandlers(this.plugins),this.docView=new ap(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((s=document.fonts)===null||s===void 0)&&s.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let s=e.length==1&&e[0]instanceof It?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(s,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let s=!1,i=!1,n,o=this.state;for(let h of e){if(h.startState!=o)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");o=h.state}if(this.destroyed){this.viewState.state=o;return}let r=this.hasFocus,l=0,a=null;e.some(h=>h.annotation(xv))?(this.inputState.notifiedFocused=r,l=1):r!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=r,a=wv(o,r),a||(l=1));let d=this.observer.delayedAndroidKey,u=null;if(d?(this.observer.clearDelayedAndroidKey(),u=this.observer.readChange(),(u&&!this.state.doc.eq(o.doc)||!this.state.selection.eq(o.selection))&&(u=null)):this.observer.clear(),o.facet(et.phrases)!=this.state.facet(et.phrases))return this.setState(o);n=ha.create(this,o,e),n.flags|=l;let f=this.viewState.scrollTarget;try{this.updateState=2;for(let h of e){if(f&&(f=f.map(h.changes)),h.scrollIntoView){let{main:m}=h.state.selection;f=new fo(m.empty?m:ue.cursor(m.head,m.head>m.anchor?-1:1))}for(let m of h.effects)m.is(vl)&&(f=m.value.clip(this.state))}this.viewState.update(n,f),this.bidiCache=ma.update(this.bidiCache,n.changes),n.empty||(this.updatePlugins(n),this.inputState.update(n)),s=this.docView.update(n),this.state.facet(Go)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(s,e.some(h=>h.isUserEvent("select.pointer")))}finally{this.updateState=0}if(n.startState.facet(_l)!=n.state.facet(_l)&&(this.viewState.mustMeasureContent=!0),(s||i||f||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),s&&this.docViewUpdate(),!n.empty)for(let h of this.state.facet(Nd))try{h(n)}catch(m){ks(this.state,m,"update listener")}(a||u)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),u&&!pv(this,u)&&d.force&&co(this.contentDOM,d.key,d.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let s=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new Vp(e),this.plugins=e.facet(Xn).map(i=>new Vu(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new ap(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}s&&this.focus(),this.requestMeasure()}updatePlugins(e){let s=e.startState.facet(Xn),i=e.state.facet(Xn);if(s!=i){let n=[];for(let o of i){let r=s.indexOf(o);if(r<0)n.push(new Vu(o));else{let l=this.plugins[r];l.mustUpdate=e,n.push(l)}}for(let o of this.plugins)o.mustUpdate!=e&&o.destroy(this);this.plugins=n,this.pluginMap.clear()}else for(let n of this.plugins)n.mustUpdate=e;for(let n=0;n<this.plugins.length;n++)this.plugins[n].update(this);s!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let s=e.value;if(s&&s.docViewUpdate)try{s.docViewUpdate(this)}catch(i){ks(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let s=null,i=this.scrollDOM,n=i.scrollTop*this.scaleY,{scrollAnchorPos:o,scrollAnchorHeight:r}=this.viewState;Math.abs(n-this.viewState.scrollTop)>1&&(r=-1),this.viewState.scrollAnchorHeight=-1;try{for(let l=0;;l++){if(r<0)if(L0(i))o=-1,r=this.viewState.heightMap.height;else{let m=this.viewState.scrollAnchorAt(n);o=m.from,r=m.top}this.updateState=1;let a=this.viewState.measure(this);if(!a&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let d=[];a&4||([this.measureRequests,d]=[d,this.measureRequests]);let u=d.map(m=>{try{return m.read(this)}catch(w){return ks(this.state,w),Tp}}),f=ha.create(this,this.state,[]),h=!1;f.flags|=a,s?s.flags|=a:s=f,this.updateState=2,f.empty||(this.updatePlugins(f),this.inputState.update(f),this.updateAttrs(),h=this.docView.update(f),h&&this.docViewUpdate());for(let m=0;m<d.length;m++)if(u[m]!=Tp)try{let w=d[m];w.write&&w.write(u[m],this)}catch(w){ks(this.state,w)}if(h&&this.docView.updateSelection(!0),!f.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,r=-1;continue}else{let w=(o<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(o).top)-r;if(w>1||w<-1){n=n+w,i.scrollTop=n/this.scaleY,r=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(s&&!s.empty)for(let l of this.state.facet(Nd))l(s)}get themeClasses(){return qd+" "+(this.state.facet(Wd)?Av:Cv)+" "+this.state.facet(_l)}updateAttrs(){let e=Ep(this,rv,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),s={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(Oi)?"true":"false",class:"cm-content",style:`${Te.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(s["aria-readonly"]="true"),Ep(this,Fc,s);let i=this.observer.ignore(()=>{let n=jd(this.contentDOM,this.contentAttrs,s),o=jd(this.dom,this.editorAttrs,e);return n||o});return this.editorAttrs=e,this.contentAttrs=s,i}showAnnouncements(e){let s=!0;for(let i of e)for(let n of i.effects)if(n.is(Oe.announce)){s&&(this.announceDOM.textContent=""),s=!1;let o=this.announceDOM.appendChild(document.createElement("div"));o.textContent=n.value}}mountStyles(){this.styleModules=this.state.facet(Go);let e=this.state.facet(Oe.cspNonce);ln.mount(this.root,this.styleModules.concat(IC).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let s=0;s<this.measureRequests.length;s++)if(this.measureRequests[s].key===e.key){this.measureRequests[s]=e;return}}this.measureRequests.push(e)}}plugin(e){let s=this.pluginMap.get(e);return(s===void 0||s&&s.plugin!=e)&&this.pluginMap.set(e,s=this.plugins.find(i=>i.plugin==e)||null),s&&s.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,s,i){return Du(this,e,hp(this,e,s,i))}moveByGroup(e,s){return Du(this,e,hp(this,e,s,i=>tC(this,e.head,i)))}visualLineSide(e,s){let i=this.bidiSpans(e),n=this.textDirectionAt(e.from),o=i[s?i.length-1:0];return ue.cursor(o.side(s,n)+e.from,o.forward(!s,n)?1:-1)}moveToLineBoundary(e,s,i=!0){return eC(this,e,s,i)}moveVertically(e,s,i){return Du(this,e,sC(this,e,s,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,s=0){return this.docView.posFromDOM(e,s)}posAtCoords(e,s=!0){return this.readMeasured(),cv(this,e,s)}coordsAtPos(e,s=1){this.readMeasured();let i=this.docView.coordsAt(e,s);if(!i||i.left==i.right)return i;let n=this.state.doc.lineAt(e),o=this.bidiSpans(n),r=o[Zi.find(o,e-n.from,-1,s)];return Ja(i,r.dir==kt.LTR==s>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(sv)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>HC)return G0(e.length);let s=this.textDirectionAt(e.from),i;for(let o of this.bidiCache)if(o.from==e.from&&o.dir==s&&(o.fresh||K0(o.isolates,i=lp(this,e))))return o.order;i||(i=lp(this,e));let n=BS(e.text,s,i);return this.bidiCache.push(new ma(e.from,e.to,s,i,!0,n)),n}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Te.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{O0(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,s={}){return vl.of(new fo(typeof e=="number"?ue.cursor(e):e,s.y,s.x,s.yMargin,s.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:s}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return vl.of(new fo(ue.cursor(i.from),"start","start",i.top-e,s,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return Ot.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Ot.define(()=>({}),{eventObservers:e})}static theme(e,s){let i=ln.newName(),n=[_l.of(i),Go.of(Kd(`.${i}`,e))];return s&&s.dark&&n.push(Wd.of(!0)),n}static baseTheme(e){return Hn.lowest(Go.of(Kd("."+qd,e,Vv)))}static findFromDOM(e){var s;let i=e.querySelector(".cm-content"),n=i&&ut.get(i)||ut.get(e);return((s=n?.rootView)===null||s===void 0?void 0:s.view)||null}}Oe.styleModule=Go;Oe.inputHandler=ev;Oe.clipboardInputFilter=Nc;Oe.clipboardOutputFilter=zc;Oe.scrollHandler=nv;Oe.focusChangeEffect=tv;Oe.perLineTextDirection=sv;Oe.exceptionSink=Z0;Oe.updateListener=Nd;Oe.editable=Oi;Oe.mouseSelectionStyle=X0;Oe.dragMovesSelection=Q0;Oe.clickAddsSelectionRange=Y0;Oe.decorations=Mr;Oe.outerDecorations=lv;Oe.atomicRanges=qr;Oe.bidiIsolatedRanges=av;Oe.scrollMargins=uv;Oe.darkTheme=Wd;Oe.cspNonce=Le.define({combine:t=>t.length?t[0]:""});Oe.contentAttributes=Fc;Oe.editorAttributes=rv;Oe.lineWrapping=Oe.contentAttributes.of({class:"cm-lineWrapping"});Oe.announce=Ke.define();const HC=4096,Tp={};class ma{constructor(e,s,i,n,o,r){this.from=e,this.to=s,this.dir=i,this.isolates=n,this.fresh=o,this.order=r}static update(e,s){if(s.empty&&!e.some(o=>o.fresh))return e;let i=[],n=e.length?e[e.length-1].dir:kt.LTR;for(let o=Math.max(0,e.length-10);o<e.length;o++){let r=e[o];r.dir==n&&!s.touchesRange(r.from,r.to)&&i.push(new ma(s.mapPos(r.from,1),s.mapPos(r.to,-1),r.dir,r.isolates,!1,r.order))}return i}}function Ep(t,e,s){for(let i=t.state.facet(e),n=i.length-1;n>=0;n--){let o=i[n],r=typeof o=="function"?o(t):o;r&&Ld(r,s)}return s}const WC=Te.mac?"mac":Te.windows?"win":Te.linux?"linux":"key";function qC(t,e){const s=t.split(/-(?!$)/);let i=s[s.length-1];i=="Space"&&(i=" ");let n,o,r,l;for(let a=0;a<s.length-1;++a){const d=s[a];if(/^(cmd|meta|m)$/i.test(d))l=!0;else if(/^a(lt)?$/i.test(d))n=!0;else if(/^(c|ctrl|control)$/i.test(d))o=!0;else if(/^s(hift)?$/i.test(d))r=!0;else if(/^mod$/i.test(d))e=="mac"?l=!0:o=!0;else throw new Error("Unrecognized modifier name: "+d)}return n&&(i="Alt-"+i),o&&(i="Ctrl-"+i),l&&(i="Meta-"+i),r&&(i="Shift-"+i),i}function Sl(t,e,s){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),s!==!1&&e.shiftKey&&(t="Shift-"+t),t}const KC=Hn.default(Oe.domEventHandlers({keydown(t,e){return Dv(Mv(e.state),t,e,"editor")}})),Gc=Le.define({enables:KC}),Op=new WeakMap;function Mv(t){let e=t.facet(Gc),s=Op.get(e);return s||Op.set(e,s=YC(e.reduce((i,n)=>i.concat(n),[]))),s}function GC(t,e,s){return Dv(Mv(t.state),e,t,s)}let Ji=null;const JC=4e3;function YC(t,e=WC){let s=Object.create(null),i=Object.create(null),n=(r,l)=>{let a=i[r];if(a==null)i[r]=l;else if(a!=l)throw new Error("Key binding "+r+" is used both as a regular binding and as a multi-stroke prefix")},o=(r,l,a,d,u)=>{var f,h;let m=s[r]||(s[r]=Object.create(null)),w=l.split(/ (?!$)/).map(V=>qC(V,e));for(let V=1;V<w.length;V++){let U=w.slice(0,V).join(" ");n(U,!0),m[U]||(m[U]={preventDefault:!0,stopPropagation:!1,run:[B=>{let H=Ji={view:B,prefix:U,scope:r};return setTimeout(()=>{Ji==H&&(Ji=null)},JC),!0}]})}let p=w.join(" ");n(p,!1);let C=m[p]||(m[p]={preventDefault:!1,stopPropagation:!1,run:((h=(f=m._any)===null||f===void 0?void 0:f.run)===null||h===void 0?void 0:h.slice())||[]});a&&C.run.push(a),d&&(C.preventDefault=!0),u&&(C.stopPropagation=!0)};for(let r of t){let l=r.scope?r.scope.split(" "):["editor"];if(r.any)for(let d of l){let u=s[d]||(s[d]=Object.create(null));u._any||(u._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:f}=r;for(let h in u)u[h].run.push(m=>f(m,Gd))}let a=r[e]||r.key;if(a)for(let d of l)o(d,a,r.run,r.preventDefault,r.stopPropagation),r.shift&&o(d,"Shift-"+a,r.shift,r.preventDefault,r.stopPropagation)}return s}let Gd=null;function Dv(t,e,s,i){Gd=e;let n=yS(e),o=ys(n,0),r=pi(o)==n.length&&n!=" ",l="",a=!1,d=!1,u=!1;Ji&&Ji.view==s&&Ji.scope==i&&(l=Ji.prefix+" ",vv.indexOf(e.keyCode)<0&&(d=!0,Ji=null));let f=new Set,h=C=>{if(C){for(let V of C.run)if(!f.has(V)&&(f.add(V),V(s)))return C.stopPropagation&&(u=!0),!0;C.preventDefault&&(C.stopPropagation&&(u=!0),d=!0)}return!1},m=t[i],w,p;return m&&(h(m[l+Sl(n,e,!r)])?a=!0:r&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Te.windows&&e.ctrlKey&&e.altKey)&&!(Te.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(w=an[e.keyCode])&&w!=n?(h(m[l+Sl(w,e,!0)])||e.shiftKey&&(p=Cr[e.keyCode])!=n&&p!=w&&h(m[l+Sl(p,e,!1)]))&&(a=!0):r&&e.shiftKey&&h(m[l+Sl(n,e,!0)])&&(a=!0),!a&&h(m._any)&&(a=!0)),d&&(a=!0),a&&u&&e.stopPropagation(),Gd=null,a}class Kr{constructor(e,s,i,n,o){this.className=e,this.left=s,this.top=i,this.width=n,this.height=o}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,s){return s.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,s,i){if(i.empty){let n=e.coordsAtPos(i.head,i.assoc||1);if(!n)return[];let o=$v(e);return[new Kr(s,n.left-o.left,n.top-o.top,null,n.bottom-n.top)]}else return QC(e,s,i)}}function $v(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==kt.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function Pp(t,e,s,i){let n=t.coordsAtPos(e,s*2);if(!n)return i;let o=t.dom.getBoundingClientRect(),r=(n.top+n.bottom)/2,l=t.posAtCoords({x:o.left+1,y:r}),a=t.posAtCoords({x:o.right-1,y:r});return l==null||a==null?i:{from:Math.max(i.from,Math.min(l,a)),to:Math.min(i.to,Math.max(l,a))}}function QC(t,e,s){if(s.to<=t.viewport.from||s.from>=t.viewport.to)return[];let i=Math.max(s.from,t.viewport.from),n=Math.min(s.to,t.viewport.to),o=t.textDirection==kt.LTR,r=t.contentDOM,l=r.getBoundingClientRect(),a=$v(t),d=r.querySelector(".cm-line"),u=d&&window.getComputedStyle(d),f=l.left+(u?parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)):0),h=l.right-(u?parseInt(u.paddingRight):0),m=Fd(t,i,1),w=Fd(t,n,-1),p=m.type==hs.Text?m:null,C=w.type==hs.Text?w:null;if(p&&(t.lineWrapping||m.widgetLineBreaks)&&(p=Pp(t,i,1,p)),C&&(t.lineWrapping||w.widgetLineBreaks)&&(C=Pp(t,n,-1,C)),p&&C&&p.from==C.from&&p.to==C.to)return U(B(s.from,s.to,p));{let j=p?B(s.from,null,p):H(m,!1),T=C?B(null,s.to,C):H(w,!0),A=[];return(p||m).to<(C||w).from-(p&&C?1:0)||m.widgetLineBreaks>1&&j.bottom+t.defaultLineHeight/2<T.top?A.push(V(f,j.bottom,h,T.top)):j.bottom<T.top&&t.elementAtHeight((j.bottom+T.top)/2).type==hs.Text&&(j.bottom=T.top=(j.bottom+T.top)/2),U(j).concat(A).concat(U(T))}function V(j,T,A,Y){return new Kr(e,j-a.left,T-a.top,A-j,Y-T)}function U({top:j,bottom:T,horizontal:A}){let Y=[];for(let te=0;te<A.length;te+=2)Y.push(V(A[te],j,A[te+1],T));return Y}function B(j,T,A){let Y=1e9,te=-1e9,me=[];function le(ce,de,X,Z,se){let Pe=t.coordsAtPos(ce,ce==A.to?-2:2),P=t.coordsAtPos(X,X==A.from?2:-2);!Pe||!P||(Y=Math.min(Pe.top,P.top,Y),te=Math.max(Pe.bottom,P.bottom,te),se==kt.LTR?me.push(o&&de?f:Pe.left,o&&Z?h:P.right):me.push(!o&&Z?f:P.left,!o&&de?h:Pe.right))}let F=j??A.from,ge=T??A.to;for(let ce of t.visibleRanges)if(ce.to>F&&ce.from<ge)for(let de=Math.max(ce.from,F),X=Math.min(ce.to,ge);;){let Z=t.state.doc.lineAt(de);for(let se of t.bidiSpans(Z)){let Pe=se.from+Z.from,P=se.to+Z.from;if(Pe>=X)break;P>de&&le(Math.max(Pe,de),j==null&&Pe<=F,Math.min(P,X),T==null&&P>=ge,se.dir)}if(de=Z.to+1,de>=X)break}return me.length==0&&le(F,j==null,ge,T==null,t.textDirection),{top:Y,bottom:te,horizontal:me}}function H(j,T){let A=l.top+(T?j.top:j.bottom);return{top:A,bottom:A,horizontal:[]}}}function XC(t,e){return t.constructor==e.constructor&&t.eq(e)}class ZC{constructor(e,s){this.view=e,this.layer=s,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),s.above&&this.dom.classList.add("cm-layer-above"),s.class&&this.dom.classList.add(s.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),s.mount&&s.mount(this.dom,e)}update(e){e.startState.facet(Kl)!=e.state.facet(Kl)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let s=0,i=e.facet(Kl);for(;s<i.length&&i[s]!=this.layer;)s++;this.dom.style.zIndex=String((this.layer.above?150:-1)-s)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:s}=this.view;(e!=this.scaleX||s!=this.scaleY)&&(this.scaleX=e,this.scaleY=s,this.dom.style.transform=`scale(${1/e}, ${1/s})`)}draw(e){if(e.length!=this.drawn.length||e.some((s,i)=>!XC(s,this.drawn[i]))){let s=this.dom.firstChild,i=0;for(let n of e)n.update&&s&&n.constructor&&this.drawn[i].constructor&&n.update(s,this.drawn[i])?(s=s.nextSibling,i++):this.dom.insertBefore(n.draw(),s);for(;s;){let n=s.nextSibling;s.remove(),s=n}this.drawn=e,Te.safari&&Te.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Kl=Le.define();function Tv(t){return[Ot.define(e=>new ZC(e,t)),Kl.of(t)]}const Dr=Le.define({combine(t){return wi(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,s)=>Math.min(e,s),drawRangeCursor:(e,s)=>e||s})}});function e5(t={}){return[Dr.of(t),t5,s5,i5,iv.of(!0)]}function Ev(t){return t.startState.facet(Dr)!=t.state.facet(Dr)}const t5=Tv({above:!0,markers(t){let{state:e}=t,s=e.facet(Dr),i=[];for(let n of e.selection.ranges){let o=n==e.selection.main;if(n.empty||s.drawRangeCursor){let r=o?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",l=n.empty?n:ue.cursor(n.head,n.head>n.anchor?-1:1);for(let a of Kr.forRange(t,r,l))i.push(a)}}return i},update(t,e){t.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let s=Ev(t);return s&&Lp(t.state,e),t.docChanged||t.selectionSet||s},mount(t,e){Lp(e.state,t)},class:"cm-cursorLayer"});function Lp(t,e){e.style.animationDuration=t.facet(Dr).cursorBlinkRate+"ms"}const s5=Tv({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:Kr.forRange(t,"cm-selectionBackground",e)).reduce((e,s)=>e.concat(s))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||Ev(t)},class:"cm-selectionLayer"}),i5=Hn.highest(Oe.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),Ov=Ke.define({map(t,e){return t==null?null:e.mapPos(t)}}),Qo=Yt.define({create(){return null},update(t,e){return t!=null&&(t=e.changes.mapPos(t)),e.effects.reduce((s,i)=>i.is(Ov)?i.value:s,t)}}),n5=Ot.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let s=t.state.field(Qo);s==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(Qo)!=s||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:t}=this,e=t.state.field(Qo),s=e!=null&&t.coordsAtPos(e);if(!s)return null;let i=t.scrollDOM.getBoundingClientRect();return{left:s.left-i.left+t.scrollDOM.scrollLeft*t.scaleX,top:s.top-i.top+t.scrollDOM.scrollTop*t.scaleY,height:s.bottom-s.top}}drawCursor(t){if(this.cursor){let{scaleX:e,scaleY:s}=this.view;t?(this.cursor.style.left=t.left/e+"px",this.cursor.style.top=t.top/s+"px",this.cursor.style.height=t.height/s+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(Qo)!=t&&this.view.dispatch({effects:Ov.of(t)})}},{eventObservers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){(t.target==this.view.contentDOM||!this.view.contentDOM.contains(t.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function o5(){return[Qo,n5]}function jp(t,e,s,i,n){e.lastIndex=0;for(let o=t.iterRange(s,i),r=s,l;!o.next().done;r+=o.value.length)if(!o.lineBreak)for(;l=e.exec(o.value);)n(r+l.index,l)}function r5(t,e){let s=t.visibleRanges;if(s.length==1&&s[0].from==t.viewport.from&&s[0].to==t.viewport.to)return s;let i=[];for(let{from:n,to:o}of s)n=Math.max(t.state.doc.lineAt(n).from,n-e),o=Math.min(t.state.doc.lineAt(o).to,o+e),i.length&&i[i.length-1].to>=n?i[i.length-1].to=o:i.push({from:n,to:o});return i}class l5{constructor(e){const{regexp:s,decoration:i,decorate:n,boundary:o,maxLength:r=1e3}=e;if(!s.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=s,n)this.addMatch=(l,a,d,u)=>n(u,d,d+l[0].length,l,a);else if(typeof i=="function")this.addMatch=(l,a,d,u)=>{let f=i(l,a,d);f&&u(d,d+l[0].length,f)};else if(i)this.addMatch=(l,a,d,u)=>u(d,d+l[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=o,this.maxLength=r}createDeco(e){let s=new Ri,i=s.add.bind(s);for(let{from:n,to:o}of r5(e,this.maxLength))jp(e.state.doc,this.regexp,n,o,(r,l)=>this.addMatch(l,e,r,i));return s.finish()}updateDeco(e,s){let i=1e9,n=-1;return e.docChanged&&e.changes.iterChanges((o,r,l,a)=>{a>=e.view.viewport.from&&l<=e.view.viewport.to&&(i=Math.min(l,i),n=Math.max(a,n))}),e.viewportMoved||n-i>1e3?this.createDeco(e.view):n>-1?this.updateRange(e.view,s.map(e.changes),i,n):s}updateRange(e,s,i,n){for(let o of e.visibleRanges){let r=Math.max(o.from,i),l=Math.min(o.to,n);if(l>=r){let a=e.state.doc.lineAt(r),d=a.to<l?e.state.doc.lineAt(l):a,u=Math.max(o.from,a.from),f=Math.min(o.to,d.to);if(this.boundary){for(;r>a.from;r--)if(this.boundary.test(a.text[r-1-a.from])){u=r;break}for(;l<d.to;l++)if(this.boundary.test(d.text[l-d.from])){f=l;break}}let h=[],m,w=(p,C,V)=>h.push(V.range(p,C));if(a==d)for(this.regexp.lastIndex=u-a.from;(m=this.regexp.exec(a.text))&&m.index<f-a.from;)this.addMatch(m,e,m.index+a.from,w);else jp(e.state.doc,this.regexp,u,f,(p,C)=>this.addMatch(C,e,p,w));s=s.update({filterFrom:u,filterTo:f,filter:(p,C)=>p<u||C>f,add:h})}}return s}}const Jd=/x/.unicode!=null?"gu":"g",a5=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,Jd),u5={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Eu=null;function d5(){var t;if(Eu==null&&typeof document<"u"&&document.body){let e=document.body.style;Eu=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return Eu||!1}const Gl=Le.define({combine(t){let e=wi(t,{render:null,specialChars:a5,addSpecialChars:null});return(e.replaceTabs=!d5())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,Jd)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,Jd)),e}});function c5(t={}){return[Gl.of(t),f5()]}let Rp=null;function f5(){return Rp||(Rp=Ot.fromClass(class{constructor(t){this.view=t,this.decorations=He.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(Gl)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new l5({regexp:t.specialChars,decoration:(e,s,i)=>{let{doc:n}=s.state,o=ys(e[0],0);if(o==9){let r=n.lineAt(i),l=s.state.tabSize,a=To(r.text,l,i-r.from);return He.replace({widget:new g5((l-a%l)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[o]||(this.decorationCache[o]=He.replace({widget:new m5(t,o)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(Gl);t.startState.facet(Gl)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const h5="";function p5(t){return t>=32?h5:t==10?"":String.fromCharCode(9216+t)}class m5 extends fn{constructor(e,s){super(),this.options=e,this.code=s}eq(e){return e.code==this.code}toDOM(e){let s=p5(this.code),i=e.state.phrase("Control character")+" "+(u5[this.code]||"0x"+this.code.toString(16)),n=this.options.render&&this.options.render(this.code,i,s);if(n)return n;let o=document.createElement("span");return o.textContent=s,o.title=i,o.setAttribute("aria-label",i),o.className="cm-specialChar",o}ignoreEvent(){return!1}}class g5 extends fn{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function v5(){return b5}const y5=He.line({class:"cm-activeLine"}),b5=Ot.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,s=[];for(let i of t.state.selection.ranges){let n=t.lineBlockAt(i.head);n.from>e&&(s.push(y5.range(n.from)),e=n.from)}return He.set(s)}},{decorations:t=>t.decorations}),Yd=2e3;function k5(t,e,s){let i=Math.min(e.line,s.line),n=Math.max(e.line,s.line),o=[];if(e.off>Yd||s.off>Yd||e.col<0||s.col<0){let r=Math.min(e.off,s.off),l=Math.max(e.off,s.off);for(let a=i;a<=n;a++){let d=t.doc.line(a);d.length<=l&&o.push(ue.range(d.from+r,d.to+l))}}else{let r=Math.min(e.col,s.col),l=Math.max(e.col,s.col);for(let a=i;a<=n;a++){let d=t.doc.line(a),u=Vd(d.text,r,t.tabSize,!0);if(u<0)o.push(ue.cursor(d.to));else{let f=Vd(d.text,l,t.tabSize);o.push(ue.range(d.from+u,d.from+f))}}}return o}function x5(t,e){let s=t.coordsAtPos(t.viewport.from);return s?Math.round(Math.abs((s.left-e)/t.defaultCharacterWidth)):-1}function Bp(t,e){let s=t.posAtCoords({x:e.clientX,y:e.clientY},!1),i=t.state.doc.lineAt(s),n=s-i.from,o=n>Yd?-1:n==i.length?x5(t,e.clientX):To(i.text,t.state.tabSize,s-i.from);return{line:i.number,col:o,off:n}}function w5(t,e){let s=Bp(t,e),i=t.state.selection;return s?{update(n){if(n.docChanged){let o=n.changes.mapPos(n.startState.doc.line(s.line).from),r=n.state.doc.lineAt(o);s={line:r.number,col:s.col,off:Math.min(s.off,r.length)},i=i.map(n.changes)}},get(n,o,r){let l=Bp(t,n);if(!l)return i;let a=k5(t.state,s,l);return a.length?r?ue.create(a.concat(i.ranges)):ue.create(a):i}}:null}function _5(t){let e=(s=>s.altKey&&s.button==0);return Oe.mouseSelectionStyle.of((s,i)=>e(i)?w5(s,i):null)}const S5={Alt:[18,t=>!!t.altKey],Control:[17,t=>!!t.ctrlKey],Shift:[16,t=>!!t.shiftKey],Meta:[91,t=>!!t.metaKey]},C5={style:"cursor: crosshair"};function A5(t={}){let[e,s]=S5[t.key||"Alt"],i=Ot.fromClass(class{constructor(n){this.view=n,this.isDown=!1}set(n){this.isDown!=n&&(this.isDown=n,this.view.update([]))}},{eventObservers:{keydown(n){this.set(n.keyCode==e||s(n))},keyup(n){(n.keyCode==e||!s(n))&&this.set(!1)},mousemove(n){this.set(s(n))}}});return[i,Oe.contentAttributes.of(n=>{var o;return!((o=n.plugin(i))===null||o===void 0)&&o.isDown?C5:null})]}const Fo="-10000px";class Pv{constructor(e,s,i,n){this.facet=s,this.createTooltipView=i,this.removeTooltipView=n,this.input=e.state.facet(s),this.tooltips=this.input.filter(r=>r);let o=null;this.tooltipViews=this.tooltips.map(r=>o=i(r,o))}update(e,s){var i;let n=e.state.facet(this.facet),o=n.filter(a=>a);if(n===this.input){for(let a of this.tooltipViews)a.update&&a.update(e);return!1}let r=[],l=s?[]:null;for(let a=0;a<o.length;a++){let d=o[a],u=-1;if(d){for(let f=0;f<this.tooltips.length;f++){let h=this.tooltips[f];h&&h.create==d.create&&(u=f)}if(u<0)r[a]=this.createTooltipView(d,a?r[a-1]:null),l&&(l[a]=!!d.above);else{let f=r[a]=this.tooltipViews[u];l&&(l[a]=s[u]),f.update&&f.update(e)}}}for(let a of this.tooltipViews)r.indexOf(a)<0&&(this.removeTooltipView(a),(i=a.destroy)===null||i===void 0||i.call(a));return s&&(l.forEach((a,d)=>s[d]=a),s.length=l.length),this.input=n,this.tooltips=o,this.tooltipViews=r,!0}}function V5(t){let e=t.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const Ou=Le.define({combine:t=>{var e,s,i;return{position:Te.ios?"absolute":((e=t.find(n=>n.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((s=t.find(n=>n.parent))===null||s===void 0?void 0:s.parent)||null,tooltipSpace:((i=t.find(n=>n.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||V5}}}),Ip=new WeakMap,Jc=Ot.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(Ou);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new Pv(t,Yc,(s,i)=>this.createTooltip(s,i),s=>{this.resizeObserver&&this.resizeObserver.unobserve(s.dom),s.dom.remove()}),this.above=this.manager.tooltips.map(s=>!!s.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(s=>{Date.now()>this.lastTransaction-50&&s.length>0&&s[s.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let s=e||t.geometryChanged,i=t.state.facet(Ou);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let n of this.manager.tooltipViews)n.dom.style.position=this.position;s=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let n of this.manager.tooltipViews)this.container.appendChild(n.dom);s=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);s&&this.maybeMeasure()}createTooltip(t,e){let s=t.create(this.view),i=e?e.dom:null;if(s.dom.classList.add("cm-tooltip"),t.arrow&&!s.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let n=document.createElement("div");n.className="cm-tooltip-arrow",s.dom.appendChild(n)}return s.dom.style.position=this.position,s.dom.style.top=Fo,s.dom.style.left="0px",this.container.insertBefore(s.dom,i),s.mount&&s.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(s.dom),s}destroy(){var t,e,s;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(t=i.destroy)===null||t===void 0||t.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(s=this.intersectionObserver)===null||s===void 0||s.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=1,e=1,s=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:o}=this.manager.tooltipViews[0];if(Te.gecko)s=o.offsetParent!=this.container.ownerDocument.body;else if(o.style.top==Fo&&o.style.left=="0px"){let r=o.getBoundingClientRect();s=Math.abs(r.top+1e4)>1||Math.abs(r.left)>1}}if(s||this.position=="absolute")if(this.parent){let o=this.parent.getBoundingClientRect();o.width&&o.height&&(t=o.width/this.parent.offsetWidth,e=o.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:e}=this.view.viewState);let i=this.view.scrollDOM.getBoundingClientRect(),n=Hc(this.view);return{visible:{left:i.left+n.left,top:i.top+n.top,right:i.right-n.right,bottom:i.bottom-n.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((o,r)=>{let l=this.manager.tooltipViews[r];return l.getCoords?l.getCoords(o.pos):this.view.coordsAtPos(o.pos)}),size:this.manager.tooltipViews.map(({dom:o})=>o.getBoundingClientRect()),space:this.view.state.facet(Ou).tooltipSpace(this.view),scaleX:t,scaleY:e,makeAbsolute:s}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let l of this.manager.tooltipViews)l.dom.style.position="absolute"}let{visible:s,space:i,scaleX:n,scaleY:o}=t,r=[];for(let l=0;l<this.manager.tooltips.length;l++){let a=this.manager.tooltips[l],d=this.manager.tooltipViews[l],{dom:u}=d,f=t.pos[l],h=t.size[l];if(!f||a.clip!==!1&&(f.bottom<=Math.max(s.top,i.top)||f.top>=Math.min(s.bottom,i.bottom)||f.right<Math.max(s.left,i.left)-.1||f.left>Math.min(s.right,i.right)+.1)){u.style.top=Fo;continue}let m=a.arrow?d.dom.querySelector(".cm-tooltip-arrow"):null,w=m?7:0,p=h.right-h.left,C=(e=Ip.get(d))!==null&&e!==void 0?e:h.bottom-h.top,V=d.offset||D5,U=this.view.textDirection==kt.LTR,B=h.width>i.right-i.left?U?i.left:i.right-h.width:U?Math.max(i.left,Math.min(f.left-(m?14:0)+V.x,i.right-p)):Math.min(Math.max(i.left,f.left-p+(m?14:0)-V.x),i.right-p),H=this.above[l];!a.strictSide&&(H?f.top-C-w-V.y<i.top:f.bottom+C+w+V.y>i.bottom)&&H==i.bottom-f.bottom>f.top-i.top&&(H=this.above[l]=!H);let j=(H?f.top-i.top:i.bottom-f.bottom)-w;if(j<C&&d.resize!==!1){if(j<this.view.defaultLineHeight){u.style.top=Fo;continue}Ip.set(d,C),u.style.height=(C=j)/o+"px"}else u.style.height&&(u.style.height="");let T=H?f.top-C-w-V.y:f.bottom+w+V.y,A=B+p;if(d.overlap!==!0)for(let Y of r)Y.left<A&&Y.right>B&&Y.top<T+C&&Y.bottom>T&&(T=H?Y.top-C-2-w:Y.bottom+w+2);if(this.position=="absolute"?(u.style.top=(T-t.parent.top)/o+"px",Up(u,(B-t.parent.left)/n)):(u.style.top=T/o+"px",Up(u,B/n)),m){let Y=f.left+(U?V.x:-V.x)-(B+14-7);m.style.left=Y/n+"px"}d.overlap!==!0&&r.push({left:B,top:T,right:A,bottom:T+C}),u.classList.toggle("cm-tooltip-above",H),u.classList.toggle("cm-tooltip-below",!H),d.positioned&&d.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=Fo}},{eventObservers:{scroll(){this.maybeMeasure()}}});function Up(t,e){let s=parseInt(t.style.left,10);(isNaN(s)||Math.abs(e-s)>1)&&(t.style.left=e+"px")}const M5=Oe.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),D5={x:0,y:0},Yc=Le.define({enables:[Jc,M5]}),ga=Le.define({combine:t=>t.reduce((e,s)=>e.concat(s),[])});class Qa{static create(e){return new Qa(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new Pv(e,ga,(s,i)=>this.createHostedView(s,i),s=>s.dom.remove())}createHostedView(e,s){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,s?s.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let s of this.manager.tooltipViews)s.mount&&s.mount(e);this.mounted=!0}positioned(e){for(let s of this.manager.tooltipViews)s.positioned&&s.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let s of this.manager.tooltipViews)(e=s.destroy)===null||e===void 0||e.call(s)}passProp(e){let s;for(let i of this.manager.tooltipViews){let n=i[e];if(n!==void 0){if(s===void 0)s=n;else if(s!==n)return}}return s}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const $5=Yc.compute([ga],t=>{let e=t.facet(ga);return e.length===0?null:{pos:Math.min(...e.map(s=>s.pos)),end:Math.max(...e.map(s=>{var i;return(i=s.end)!==null&&i!==void 0?i:s.pos})),create:Qa.create,above:e[0].above,arrow:e.some(s=>s.arrow)}});class T5{constructor(e,s,i,n,o){this.view=e,this.source=s,this.field=i,this.setHover=n,this.hoverTime=o,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:s}=this,i=e.docView.nearest(s.target);if(!i)return;let n,o=1;if(i instanceof Xi)n=i.posAtStart;else{if(n=e.posAtCoords(s),n==null)return;let l=e.coordsAtPos(n);if(!l||s.y<l.top||s.y>l.bottom||s.x<l.left-e.defaultCharacterWidth||s.x>l.right+e.defaultCharacterWidth)return;let a=e.bidiSpans(e.state.doc.lineAt(n)).find(u=>u.from<=n&&u.to>=n),d=a&&a.dir==kt.RTL?-1:1;o=s.x<l.left?-d:d}let r=this.source(e,n,o);if(r?.then){let l=this.pending={pos:n};r.then(a=>{this.pending==l&&(this.pending=null,a&&!(Array.isArray(a)&&!a.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(a)?a:[a])}))},a=>ks(e.state,a,"hover tooltip"))}else r&&!(Array.isArray(r)&&!r.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(r)?r:[r])})}get tooltip(){let e=this.view.plugin(Jc),s=e?e.manager.tooltips.findIndex(i=>i.create==Qa.create):-1;return s>-1?e.manager.tooltipViews[s]:null}mousemove(e){var s,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:n,tooltip:o}=this;if(n.length&&o&&!E5(o.dom,e)||this.pending){let{pos:r}=n[0]||this.pending,l=(i=(s=n[0])===null||s===void 0?void 0:s.end)!==null&&i!==void 0?i:r;(r==l?this.view.posAtCoords(this.lastMove)!=r:!O5(this.view,r,l,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:s}=this;if(s.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let s=i=>{e.removeEventListener("mouseleave",s),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",s)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const Cl=4;function E5(t,e){let{left:s,right:i,top:n,bottom:o}=t.getBoundingClientRect(),r;if(r=t.querySelector(".cm-tooltip-arrow")){let l=r.getBoundingClientRect();n=Math.min(l.top,n),o=Math.max(l.bottom,o)}return e.clientX>=s-Cl&&e.clientX<=i+Cl&&e.clientY>=n-Cl&&e.clientY<=o+Cl}function O5(t,e,s,i,n,o){let r=t.scrollDOM.getBoundingClientRect(),l=t.documentTop+t.documentPadding.top+t.contentHeight;if(r.left>i||r.right<i||r.top>n||Math.min(r.bottom,l)<n)return!1;let a=t.posAtCoords({x:i,y:n},!1);return a>=e&&a<=s}function P5(t,e={}){let s=Ke.define(),i=Yt.define({create(){return[]},update(n,o){if(n.length&&(e.hideOnChange&&(o.docChanged||o.selection)?n=[]:e.hideOn&&(n=n.filter(r=>!e.hideOn(o,r))),o.docChanged)){let r=[];for(let l of n){let a=o.changes.mapPos(l.pos,-1,fs.TrackDel);if(a!=null){let d=Object.assign(Object.create(null),l);d.pos=a,d.end!=null&&(d.end=o.changes.mapPos(d.end)),r.push(d)}}n=r}for(let r of o.effects)r.is(s)&&(n=r.value),r.is(L5)&&(n=[]);return n},provide:n=>ga.from(n)});return{active:i,extension:[i,Ot.define(n=>new T5(n,t,i,s,e.hoverTime||300)),$5]}}function Lv(t,e){let s=t.plugin(Jc);if(!s)return null;let i=s.manager.tooltips.indexOf(e);return i<0?null:s.manager.tooltipViews[i]}const L5=Ke.define(),Np=Le.define({combine(t){let e,s;for(let i of t)e=e||i.topContainer,s=s||i.bottomContainer;return{topContainer:e,bottomContainer:s}}});function $r(t,e){let s=t.plugin(jv),i=s?s.specs.indexOf(e):-1;return i>-1?s.panels[i]:null}const jv=Ot.fromClass(class{constructor(t){this.input=t.state.facet(Tr),this.specs=this.input.filter(s=>s),this.panels=this.specs.map(s=>s(t));let e=t.state.facet(Np);this.top=new Al(t,!0,e.topContainer),this.bottom=new Al(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(s=>s.top)),this.bottom.sync(this.panels.filter(s=>!s.top));for(let s of this.panels)s.dom.classList.add("cm-panel"),s.mount&&s.mount()}update(t){let e=t.state.facet(Np);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Al(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Al(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let s=t.state.facet(Tr);if(s!=this.input){let i=s.filter(a=>a),n=[],o=[],r=[],l=[];for(let a of i){let d=this.specs.indexOf(a),u;d<0?(u=a(t.view),l.push(u)):(u=this.panels[d],u.update&&u.update(t)),n.push(u),(u.top?o:r).push(u)}this.specs=i,this.panels=n,this.top.sync(o),this.bottom.sync(r);for(let a of l)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}else for(let i of this.panels)i.update&&i.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>Oe.scrollMargins.of(e=>{let s=e.plugin(t);return s&&{top:s.top.scrollMargin(),bottom:s.bottom.scrollMargin()}})});class Al{constructor(e,s,i){this.view=e,this.top=s,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let s of this.panels)s.destroy&&e.indexOf(s)<0&&s.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let s=this.container||this.view.dom;s.insertBefore(this.dom,this.top?s.firstChild:null)}let e=this.dom.firstChild;for(let s of this.panels)if(s.dom.parentNode==this.dom){for(;e!=s.dom;)e=zp(e);e=e.nextSibling}else this.dom.insertBefore(s.dom,e);for(;e;)e=zp(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function zp(t){let e=t.nextSibling;return t.remove(),e}const Tr=Le.define({enables:jv});class Ii extends Rn{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Ii.prototype.elementClass="";Ii.prototype.toDOM=void 0;Ii.prototype.mapMode=fs.TrackBefore;Ii.prototype.startSide=Ii.prototype.endSide=-1;Ii.prototype.point=!0;const Jl=Le.define(),j5=Le.define(),R5={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>tt.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},cr=Le.define();function B5(t){return[Rv(),cr.of({...R5,...t})]}const Fp=Le.define({combine:t=>t.some(e=>e)});function Rv(t){return[I5]}const I5=Ot.fromClass(class{constructor(t){this.view=t,this.domAfter=null,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(cr).map(e=>new Wp(t,e)),this.fixed=!t.state.facet(Fp);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(t){if(this.updateGutters(t)){let e=this.prevViewport,s=t.view.viewport,i=Math.min(e.to,s.to)-Math.max(e.from,s.from);this.syncGutters(i<(s.to-s.from)*.8)}if(t.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(Fp)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let s=tt.iter(this.view.state.facet(Jl),this.view.viewport.from),i=[],n=this.gutters.map(o=>new U5(o,this.view.viewport,-this.view.documentPadding.top));for(let o of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(o.type)){let r=!0;for(let l of o.type)if(l.type==hs.Text&&r){Qd(s,i,l.from);for(let a of n)a.line(this.view,l,i);r=!1}else if(l.widget)for(let a of n)a.widget(this.view,l)}else if(o.type==hs.Text){Qd(s,i,o.from);for(let r of n)r.line(this.view,o,i)}else if(o.widget)for(let r of n)r.widget(this.view,o);for(let o of n)o.finish();t&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(t){let e=t.startState.facet(cr),s=t.state.facet(cr),i=t.docChanged||t.heightChanged||t.viewportChanged||!tt.eq(t.startState.facet(Jl),t.state.facet(Jl),t.view.viewport.from,t.view.viewport.to);if(e==s)for(let n of this.gutters)n.update(t)&&(i=!0);else{i=!0;let n=[];for(let o of s){let r=e.indexOf(o);r<0?n.push(new Wp(this.view,o)):(this.gutters[r].update(t),n.push(this.gutters[r]))}for(let o of this.gutters)o.dom.remove(),n.indexOf(o)<0&&o.destroy();for(let o of n)o.config.side=="after"?this.getDOMAfter().appendChild(o.dom):this.dom.appendChild(o.dom);this.gutters=n}return i}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:t=>Oe.scrollMargins.of(e=>{let s=e.plugin(t);if(!s||s.gutters.length==0||!s.fixed)return null;let i=s.dom.offsetWidth*e.scaleX,n=s.domAfter?s.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==kt.LTR?{left:i,right:n}:{right:i,left:n}})});function Hp(t){return Array.isArray(t)?t:[t]}function Qd(t,e,s){for(;t.value&&t.from<=s;)t.from==s&&e.push(t.value),t.next()}class U5{constructor(e,s,i){this.gutter=e,this.height=i,this.i=0,this.cursor=tt.iter(e.markers,s.from)}addElement(e,s,i){let{gutter:n}=this,o=(s.top-this.height)/e.scaleY,r=s.height/e.scaleY;if(this.i==n.elements.length){let l=new Bv(e,r,o,i);n.elements.push(l),n.dom.appendChild(l.dom)}else n.elements[this.i].update(e,r,o,i);this.height=s.bottom,this.i++}line(e,s,i){let n=[];Qd(this.cursor,n,s.from),i.length&&(n=n.concat(i));let o=this.gutter.config.lineMarker(e,s,n);o&&n.unshift(o);let r=this.gutter;n.length==0&&!r.config.renderEmptyElements||this.addElement(e,s,n)}widget(e,s){let i=this.gutter.config.widgetMarker(e,s.widget,s),n=i?[i]:null;for(let o of e.state.facet(j5)){let r=o(e,s.widget,s);r&&(n||(n=[])).push(r)}n&&this.addElement(e,s,n)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let s=e.elements.pop();e.dom.removeChild(s.dom),s.destroy()}}}class Wp{constructor(e,s){this.view=e,this.config=s,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in s.domEventHandlers)this.dom.addEventListener(i,n=>{let o=n.target,r;if(o!=this.dom&&this.dom.contains(o)){for(;o.parentNode!=this.dom;)o=o.parentNode;let a=o.getBoundingClientRect();r=(a.top+a.bottom)/2}else r=n.clientY;let l=e.lineBlockAtHeight(r-e.documentTop);s.domEventHandlers[i](e,l,n)&&n.preventDefault()});this.markers=Hp(s.markers(e)),s.initialSpacer&&(this.spacer=new Bv(e,0,0,[s.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let s=this.markers;if(this.markers=Hp(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let n=this.config.updateSpacer(this.spacer.markers[0],e);n!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[n])}let i=e.view.viewport;return!tt.eq(this.markers,s,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class Bv{constructor(e,s,i,n){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,s,i,n)}update(e,s,i,n){this.height!=s&&(this.height=s,this.dom.style.height=s+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),N5(this.markers,n)||this.setMarkers(e,n)}setMarkers(e,s){let i="cm-gutterElement",n=this.dom.firstChild;for(let o=0,r=0;;){let l=r,a=o<s.length?s[o++]:null,d=!1;if(a){let u=a.elementClass;u&&(i+=" "+u);for(let f=r;f<this.markers.length;f++)if(this.markers[f].compare(a)){l=f,d=!0;break}}else l=this.markers.length;for(;r<l;){let u=this.markers[r++];if(u.toDOM){u.destroy(n);let f=n.nextSibling;n.remove(),n=f}}if(!a)break;a.toDOM&&(d?n=n.nextSibling:this.dom.insertBefore(a.toDOM(e),n)),d&&r++}this.dom.className=i,this.markers=s}destroy(){this.setMarkers(null,[])}}function N5(t,e){if(t.length!=e.length)return!1;for(let s=0;s<t.length;s++)if(!t[s].compare(e[s]))return!1;return!0}const z5=Le.define(),F5=Le.define(),Zn=Le.define({combine(t){return wi(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,s){let i=Object.assign({},e);for(let n in s){let o=i[n],r=s[n];i[n]=o?(l,a,d)=>o(l,a,d)||r(l,a,d):r}return i}})}});class Pu extends Ii{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Lu(t,e){return t.state.facet(Zn).formatNumber(e,t.state)}const H5=cr.compute([Zn],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(z5)},lineMarker(e,s,i){return i.some(n=>n.toDOM)?null:new Pu(Lu(e,e.state.doc.lineAt(s.from).number))},widgetMarker:(e,s,i)=>{for(let n of e.state.facet(F5)){let o=n(e,s,i);if(o)return o}return null},lineMarkerChange:e=>e.startState.facet(Zn)!=e.state.facet(Zn),initialSpacer(e){return new Pu(Lu(e,qp(e.state.doc.lines)))},updateSpacer(e,s){let i=Lu(s.view,qp(s.view.state.doc.lines));return i==e.number?e:new Pu(i)},domEventHandlers:t.facet(Zn).domEventHandlers,side:"before"}));function W5(t={}){return[Zn.of(t),Rv(),H5]}function qp(t){let e=9;for(;e<t;)e=e*10+9;return e}const q5=new class extends Ii{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},K5=Jl.compute(["selection"],t=>{let e=[],s=-1;for(let i of t.selection.ranges){let n=t.doc.lineAt(i.head).from;n>s&&(s=n,e.push(q5.range(n)))}return tt.of(e)});function G5(){return K5}const J5=1024;let Y5=0;class ju{constructor(e,s){this.from=e,this.to=s}}class Ye{constructor(e={}){this.id=Y5++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=ws.match(e)),s=>{let i=e(s);return i===void 0?null:[this,i]}}}Ye.closedBy=new Ye({deserialize:t=>t.split(" ")});Ye.openedBy=new Ye({deserialize:t=>t.split(" ")});Ye.group=new Ye({deserialize:t=>t.split(" ")});Ye.isolate=new Ye({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});Ye.contextHash=new Ye({perNode:!0});Ye.lookAhead=new Ye({perNode:!0});Ye.mounted=new Ye({perNode:!0});class va{constructor(e,s,i){this.tree=e,this.overlay=s,this.parser=i}static get(e){return e&&e.props&&e.props[Ye.mounted.id]}}const Q5=Object.create(null);class ws{constructor(e,s,i,n=0){this.name=e,this.props=s,this.id=i,this.flags=n}static define(e){let s=e.props&&e.props.length?Object.create(null):Q5,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),n=new ws(e.name||"",s,e.id,i);if(e.props){for(let o of e.props)if(Array.isArray(o)||(o=o(n)),o){if(o[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");s[o[0].id]=o[1]}}return n}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let s=this.prop(Ye.group);return s?s.indexOf(e)>-1:!1}return this.id==e}static match(e){let s=Object.create(null);for(let i in e)for(let n of i.split(" "))s[n]=e[i];return i=>{for(let n=i.prop(Ye.group),o=-1;o<(n?n.length:0);o++){let r=s[o<0?i.name:n[o]];if(r)return r}}}}ws.none=new ws("",Object.create(null),0,8);class Qc{constructor(e){this.types=e;for(let s=0;s<e.length;s++)if(e[s].id!=s)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let s=[];for(let i of this.types){let n=null;for(let o of e){let r=o(i);if(r){n||(n=Object.assign({},i.props));let l=r[1],a=r[0];a.combine&&a.id in n&&(l=a.combine(n[a.id],l)),n[a.id]=l}}s.push(n?new ws(i.name,n,i.id,i.flags):i)}return new Qc(s)}}const Vl=new WeakMap,Kp=new WeakMap;var Kt;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(Kt||(Kt={}));class St{constructor(e,s,i,n,o){if(this.type=e,this.children=s,this.positions=i,this.length=n,this.props=null,o&&o.length){this.props=Object.create(null);for(let[r,l]of o)this.props[typeof r=="number"?r:r.id]=l}}toString(){let e=va.get(this);if(e&&!e.overlay)return e.tree.toString();let s="";for(let i of this.children){let n=i.toString();n&&(s&&(s+=","),s+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(s.length?"("+s+")":""):s}cursor(e=0){return new Zd(this.topNode,e)}cursorAt(e,s=0,i=0){let n=Vl.get(this)||this.topNode,o=new Zd(n);return o.moveTo(e,s),Vl.set(this,o._tree),o}get topNode(){return new Ns(this,0,0,null)}resolve(e,s=0){let i=Er(Vl.get(this)||this.topNode,e,s,!1);return Vl.set(this,i),i}resolveInner(e,s=0){let i=Er(Kp.get(this)||this.topNode,e,s,!0);return Kp.set(this,i),i}resolveStack(e,s=0){return e3(this,e,s)}iterate(e){let{enter:s,leave:i,from:n=0,to:o=this.length}=e,r=e.mode||0,l=(r&Kt.IncludeAnonymous)>0;for(let a=this.cursor(r|Kt.IncludeAnonymous);;){let d=!1;if(a.from<=o&&a.to>=n&&(!l&&a.type.isAnonymous||s(a)!==!1)){if(a.firstChild())continue;d=!0}for(;d&&i&&(l||!a.type.isAnonymous)&&i(a),!a.nextSibling();){if(!a.parent())return;d=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let s in this.props)e.push([+s,this.props[s]]);return e}balance(e={}){return this.children.length<=8?this:ef(ws.none,this.children,this.positions,0,this.children.length,0,this.length,(s,i,n)=>new St(this.type,s,i,n,this.propValues),e.makeTree||((s,i,n)=>new St(ws.none,s,i,n)))}static build(e){return t3(e)}}St.empty=new St(ws.none,[],[],0);class Xc{constructor(e,s){this.buffer=e,this.index=s}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Xc(this.buffer,this.index)}}class dn{constructor(e,s,i){this.buffer=e,this.length=s,this.set=i}get type(){return ws.none}toString(){let e=[];for(let s=0;s<this.buffer.length;)e.push(this.childString(s)),s=this.buffer[s+3];return e.join(",")}childString(e){let s=this.buffer[e],i=this.buffer[e+3],n=this.set.types[s],o=n.name;if(/\W/.test(o)&&!n.isError&&(o=JSON.stringify(o)),e+=4,i==e)return o;let r=[];for(;e<i;)r.push(this.childString(e)),e=this.buffer[e+3];return o+"("+r.join(",")+")"}findChild(e,s,i,n,o){let{buffer:r}=this,l=-1;for(let a=e;a!=s&&!(Iv(o,n,r[a+1],r[a+2])&&(l=a,i>0));a=r[a+3]);return l}slice(e,s,i){let n=this.buffer,o=new Uint16Array(s-e),r=0;for(let l=e,a=0;l<s;){o[a++]=n[l++],o[a++]=n[l++]-i;let d=o[a++]=n[l++]-i;o[a++]=n[l++]-e,r=Math.max(r,d)}return new dn(o,r,this.set)}}function Iv(t,e,s,i){switch(t){case-2:return s<e;case-1:return i>=e&&s<e;case 0:return s<e&&i>e;case 1:return s<=e&&i>e;case 2:return i>e;case 4:return!0}}function Er(t,e,s,i){for(var n;t.from==t.to||(s<1?t.from>=e:t.from>e)||(s>-1?t.to<=e:t.to<e);){let r=!i&&t instanceof Ns&&t.index<0?null:t.parent;if(!r)return t;t=r}let o=i?0:Kt.IgnoreOverlays;if(i)for(let r=t,l=r.parent;l;r=l,l=r.parent)r instanceof Ns&&r.index<0&&((n=l.enter(e,s,o))===null||n===void 0?void 0:n.from)!=r.from&&(t=l);for(;;){let r=t.enter(e,s,o);if(!r)return t;t=r}}class Uv{cursor(e=0){return new Zd(this,e)}getChild(e,s=null,i=null){let n=Gp(this,e,s,i);return n.length?n[0]:null}getChildren(e,s=null,i=null){return Gp(this,e,s,i)}resolve(e,s=0){return Er(this,e,s,!1)}resolveInner(e,s=0){return Er(this,e,s,!0)}matchContext(e){return Xd(this.parent,e)}enterUnfinishedNodesBefore(e){let s=this.childBefore(e),i=this;for(;s;){let n=s.lastChild;if(!n||n.to!=s.to)break;n.type.isError&&n.from==n.to?(i=s,s=n.prevSibling):s=n}return i}get node(){return this}get next(){return this.parent}}class Ns extends Uv{constructor(e,s,i,n){super(),this._tree=e,this.from=s,this.index=i,this._parent=n}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,s,i,n,o=0){for(let r=this;;){for(let{children:l,positions:a}=r._tree,d=s>0?l.length:-1;e!=d;e+=s){let u=l[e],f=a[e]+r.from;if(Iv(n,i,f,f+u.length)){if(u instanceof dn){if(o&Kt.ExcludeBuffers)continue;let h=u.findChild(0,u.buffer.length,s,i-f,n);if(h>-1)return new en(new X5(r,u,e,f),null,h)}else if(o&Kt.IncludeAnonymous||!u.type.isAnonymous||Zc(u)){let h;if(!(o&Kt.IgnoreMounts)&&(h=va.get(u))&&!h.overlay)return new Ns(h.tree,f,e,r);let m=new Ns(u,f,e,r);return o&Kt.IncludeAnonymous||!m.type.isAnonymous?m:m.nextChild(s<0?u.children.length-1:0,s,i,n)}}}if(o&Kt.IncludeAnonymous||!r.type.isAnonymous||(r.index>=0?e=r.index+s:e=s<0?-1:r._parent._tree.children.length,r=r._parent,!r))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,s,i=0){let n;if(!(i&Kt.IgnoreOverlays)&&(n=va.get(this._tree))&&n.overlay){let o=e-this.from;for(let{from:r,to:l}of n.overlay)if((s>0?r<=o:r<o)&&(s<0?l>=o:l>o))return new Ns(n.tree,n.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,s,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function Gp(t,e,s,i){let n=t.cursor(),o=[];if(!n.firstChild())return o;if(s!=null){for(let r=!1;!r;)if(r=n.type.is(s),!n.nextSibling())return o}for(;;){if(i!=null&&n.type.is(i))return o;if(n.type.is(e)&&o.push(n.node),!n.nextSibling())return i==null?o:[]}}function Xd(t,e,s=e.length-1){for(let i=t;s>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[s]&&e[s]!=i.name)return!1;s--}}return!0}class X5{constructor(e,s,i,n){this.parent=e,this.buffer=s,this.index=i,this.start=n}}class en extends Uv{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,s,i){super(),this.context=e,this._parent=s,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,s,i){let{buffer:n}=this.context,o=n.findChild(this.index+4,n.buffer[this.index+3],e,s-this.context.start,i);return o<0?null:new en(this.context,this,o)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,s,i=0){if(i&Kt.ExcludeBuffers)return null;let{buffer:n}=this.context,o=n.findChild(this.index+4,n.buffer[this.index+3],s>0?1:-1,e-this.context.start,s);return o<0?null:new en(this.context,this,o)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,s=e.buffer[this.index+3];return s<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new en(this.context,this._parent,s):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,s=this._parent?this._parent.index+4:0;return this.index==s?this.externalSibling(-1):new en(this.context,this._parent,e.findChild(s,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],s=[],{buffer:i}=this.context,n=this.index+4,o=i.buffer[this.index+3];if(o>n){let r=i.buffer[this.index+1];e.push(i.slice(n,o,r)),s.push(0)}return new St(this.type,e,s,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function Nv(t){if(!t.length)return null;let e=0,s=t[0];for(let o=1;o<t.length;o++){let r=t[o];(r.from>s.from||r.to<s.to)&&(s=r,e=o)}let i=s instanceof Ns&&s.index<0?null:s.parent,n=t.slice();return i?n[e]=i:n.splice(e,1),new Z5(n,s)}class Z5{constructor(e,s){this.heads=e,this.node=s}get next(){return Nv(this.heads)}}function e3(t,e,s){let i=t.resolveInner(e,s),n=null;for(let o=i instanceof Ns?i:i.context.parent;o;o=o.parent)if(o.index<0){let r=o.parent;(n||(n=[i])).push(r.resolve(e,s)),o=r}else{let r=va.get(o.tree);if(r&&r.overlay&&r.overlay[0].from<=e&&r.overlay[r.overlay.length-1].to>=e){let l=new Ns(r.tree,r.overlay[0].from+o.from,-1,o);(n||(n=[i])).push(Er(l,e,s,!1))}}return n?Nv(n):i}class Zd{get name(){return this.type.name}constructor(e,s=0){if(this.mode=s,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Ns)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,s){this.index=e;let{start:i,buffer:n}=this.buffer;return this.type=s||n.set.types[n.buffer[e]],this.from=i+n.buffer[e+1],this.to=i+n.buffer[e+2],!0}yield(e){return e?e instanceof Ns?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,s,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,s,i,this.mode));let{buffer:n}=this.buffer,o=n.findChild(this.index+4,n.buffer[this.index+3],e,s-this.buffer.start,i);return o<0?!1:(this.stack.push(this.index),this.yieldBuf(o))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,s,i=this.mode){return this.buffer?i&Kt.ExcludeBuffers?!1:this.enterChild(1,e,s):this.yield(this._tree.enter(e,s,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Kt.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Kt.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:s}=this.buffer,i=this.stack.length-1;if(e<0){let n=i<0?0:this.stack[i]+4;if(this.index!=n)return this.yieldBuf(s.findChild(n,this.index,-1,0,4))}else{let n=s.buffer[this.index+3];if(n<(i<0?s.buffer.length:s.buffer[this.stack[i]+3]))return this.yieldBuf(n)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let s,i,{buffer:n}=this;if(n){if(e>0){if(this.index<n.buffer.buffer.length)return!1}else for(let o=0;o<this.index;o++)if(n.buffer.buffer[o+3]<this.index)return!1;({index:s,parent:i}=n)}else({index:s,_parent:i}=this._tree);for(;i;{index:s,_parent:i}=i)if(s>-1)for(let o=s+e,r=e<0?-1:i._tree.children.length;o!=r;o+=e){let l=i._tree.children[o];if(this.mode&Kt.IncludeAnonymous||l instanceof dn||!l.type.isAnonymous||Zc(l))return!1}return!0}move(e,s){if(s&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,s=0){for(;(this.from==this.to||(s<1?this.from>=e:this.from>e)||(s>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,s););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,s=null,i=0;if(e&&e.context==this.buffer)e:for(let n=this.index,o=this.stack.length;o>=0;){for(let r=e;r;r=r._parent)if(r.index==n){if(n==this.index)return r;s=r,i=o+1;break e}n=this.stack[--o]}for(let n=i;n<this.stack.length;n++)s=new en(this.buffer,s,this.stack[n]);return this.bufferNode=new en(this.buffer,s,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,s){for(let i=0;;){let n=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(n=!0)}for(;;){if(n&&s&&s(this),n=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,n=!0}}}matchContext(e){if(!this.buffer)return Xd(this.node.parent,e);let{buffer:s}=this.buffer,{types:i}=s.set;for(let n=e.length-1,o=this.stack.length-1;n>=0;o--){if(o<0)return Xd(this._tree,e,n);let r=i[s.buffer[this.stack[o]]];if(!r.isAnonymous){if(e[n]&&e[n]!=r.name)return!1;n--}}return!0}}function Zc(t){return t.children.some(e=>e instanceof dn||!e.type.isAnonymous||Zc(e))}function t3(t){var e;let{buffer:s,nodeSet:i,maxBufferLength:n=J5,reused:o=[],minRepeatType:r=i.types.length}=t,l=Array.isArray(s)?new Xc(s,s.length):s,a=i.types,d=0,u=0;function f(j,T,A,Y,te,me){let{id:le,start:F,end:ge,size:ce}=l,de=u,X=d;if(ce<0)if(l.next(),ce==-1){let $e=o[le];A.push($e),Y.push(F-j);return}else if(ce==-3){d=le;return}else if(ce==-4){u=le;return}else throw new RangeError(`Unrecognized record size: ${ce}`);let Z=a[le],se,Pe,P=F-j;if(ge-F<=n&&(Pe=C(l.pos-T,te))){let $e=new Uint16Array(Pe.size-Pe.skip),Ie=l.pos-Pe.size,Qe=$e.length;for(;l.pos>Ie;)Qe=V(Pe.start,$e,Qe);se=new dn($e,ge-Pe.start,i),P=Pe.start-j}else{let $e=l.pos-ce;l.next();let Ie=[],Qe=[],J=le>=r?le:-1,S=0,v=ge;for(;l.pos>$e;)J>=0&&l.id==J&&l.size>=0?(l.end<=v-n&&(w(Ie,Qe,F,S,l.end,v,J,de,X),S=Ie.length,v=l.end),l.next()):me>2500?h(F,$e,Ie,Qe):f(F,$e,Ie,Qe,J,me+1);if(J>=0&&S>0&&S<Ie.length&&w(Ie,Qe,F,S,F,v,J,de,X),Ie.reverse(),Qe.reverse(),J>-1&&S>0){let M=m(Z,X);se=ef(Z,Ie,Qe,0,Ie.length,0,ge-F,M,M)}else se=p(Z,Ie,Qe,ge-F,de-ge,X)}A.push(se),Y.push(P)}function h(j,T,A,Y){let te=[],me=0,le=-1;for(;l.pos>T;){let{id:F,start:ge,end:ce,size:de}=l;if(de>4)l.next();else{if(le>-1&&ge<le)break;le<0&&(le=ce-n),te.push(F,ge,ce),me++,l.next()}}if(me){let F=new Uint16Array(me*4),ge=te[te.length-2];for(let ce=te.length-3,de=0;ce>=0;ce-=3)F[de++]=te[ce],F[de++]=te[ce+1]-ge,F[de++]=te[ce+2]-ge,F[de++]=de;A.push(new dn(F,te[2]-ge,i)),Y.push(ge-j)}}function m(j,T){return(A,Y,te)=>{let me=0,le=A.length-1,F,ge;if(le>=0&&(F=A[le])instanceof St){if(!le&&F.type==j&&F.length==te)return F;(ge=F.prop(Ye.lookAhead))&&(me=Y[le]+F.length+ge)}return p(j,A,Y,te,me,T)}}function w(j,T,A,Y,te,me,le,F,ge){let ce=[],de=[];for(;j.length>Y;)ce.push(j.pop()),de.push(T.pop()+A-te);j.push(p(i.types[le],ce,de,me-te,F-me,ge)),T.push(te-A)}function p(j,T,A,Y,te,me,le){if(me){let F=[Ye.contextHash,me];le=le?[F].concat(le):[F]}if(te>25){let F=[Ye.lookAhead,te];le=le?[F].concat(le):[F]}return new St(j,T,A,Y,le)}function C(j,T){let A=l.fork(),Y=0,te=0,me=0,le=A.end-n,F={size:0,start:0,skip:0};e:for(let ge=A.pos-j;A.pos>ge;){let ce=A.size;if(A.id==T&&ce>=0){F.size=Y,F.start=te,F.skip=me,me+=4,Y+=4,A.next();continue}let de=A.pos-ce;if(ce<0||de<ge||A.start<le)break;let X=A.id>=r?4:0,Z=A.start;for(A.next();A.pos>de;){if(A.size<0)if(A.size==-3)X+=4;else break e;else A.id>=r&&(X+=4);A.next()}te=Z,Y+=ce,me+=X}return(T<0||Y==j)&&(F.size=Y,F.start=te,F.skip=me),F.size>4?F:void 0}function V(j,T,A){let{id:Y,start:te,end:me,size:le}=l;if(l.next(),le>=0&&Y<r){let F=A;if(le>4){let ge=l.pos-(le-4);for(;l.pos>ge;)A=V(j,T,A)}T[--A]=F,T[--A]=me-j,T[--A]=te-j,T[--A]=Y}else le==-3?d=Y:le==-4&&(u=Y);return A}let U=[],B=[];for(;l.pos>0;)f(t.start||0,t.bufferStart||0,U,B,-1,0);let H=(e=t.length)!==null&&e!==void 0?e:U.length?B[0]+U[0].length:0;return new St(a[t.topID],U.reverse(),B.reverse(),H)}const Jp=new WeakMap;function Yl(t,e){if(!t.isAnonymous||e instanceof dn||e.type!=t)return 1;let s=Jp.get(e);if(s==null){s=1;for(let i of e.children){if(i.type!=t||!(i instanceof St)){s=1;break}s+=Yl(t,i)}Jp.set(e,s)}return s}function ef(t,e,s,i,n,o,r,l,a){let d=0;for(let w=i;w<n;w++)d+=Yl(t,e[w]);let u=Math.ceil(d*1.5/8),f=[],h=[];function m(w,p,C,V,U){for(let B=C;B<V;){let H=B,j=p[B],T=Yl(t,w[B]);for(B++;B<V;B++){let A=Yl(t,w[B]);if(T+A>=u)break;T+=A}if(B==H+1){if(T>u){let A=w[H];m(A.children,A.positions,0,A.children.length,p[H]+U);continue}f.push(w[H])}else{let A=p[B-1]+w[B-1].length-j;f.push(ef(t,w,p,H,B,j,A,null,a))}h.push(j+U-o)}}return m(e,s,i,n,0),(l||a)(f,h,r)}class Pn{constructor(e,s,i,n,o=!1,r=!1){this.from=e,this.to=s,this.tree=i,this.offset=n,this.open=(o?1:0)|(r?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,s=[],i=!1){let n=[new Pn(0,e.length,e,0,!1,i)];for(let o of s)o.to>e.length&&n.push(o);return n}static applyChanges(e,s,i=128){if(!s.length)return e;let n=[],o=1,r=e.length?e[0]:null;for(let l=0,a=0,d=0;;l++){let u=l<s.length?s[l]:null,f=u?u.fromA:1e9;if(f-a>=i)for(;r&&r.from<f;){let h=r;if(a>=h.from||f<=h.to||d){let m=Math.max(h.from,a)-d,w=Math.min(h.to,f)-d;h=m>=w?null:new Pn(m,w,h.tree,h.offset+d,l>0,!!u)}if(h&&n.push(h),r.to>f)break;r=o<e.length?e[o++]:null}if(!u)break;a=u.toA,d=u.toA-u.toB}return n}}class zv{startParse(e,s,i){return typeof e=="string"&&(e=new s3(e)),i=i?i.length?i.map(n=>new ju(n.from,n.to)):[new ju(0,0)]:[new ju(0,e.length)],this.createParse(e,s||[],i)}parse(e,s,i){let n=this.startParse(e,s,i);for(;;){let o=n.advance();if(o)return o}}}class s3{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,s){return this.string.slice(e,s)}}new Ye({perNode:!0});let i3=0;class Ls{constructor(e,s,i,n){this.name=e,this.set=s,this.base=i,this.modified=n,this.id=i3++}toString(){let{name:e}=this;for(let s of this.modified)s.name&&(e=`${s.name}(${e})`);return e}static define(e,s){let i=typeof e=="string"?e:"?";if(e instanceof Ls&&(s=e),s?.base)throw new Error("Can not derive from a modified tag");let n=new Ls(i,[],null,[]);if(n.set.push(n),s)for(let o of s.set)n.set.push(o);return n}static defineModifier(e){let s=new ya(e);return i=>i.modified.indexOf(s)>-1?i:ya.get(i.base||i,i.modified.concat(s).sort((n,o)=>n.id-o.id))}}let n3=0;class ya{constructor(e){this.name=e,this.instances=[],this.id=n3++}static get(e,s){if(!s.length)return e;let i=s[0].instances.find(l=>l.base==e&&o3(s,l.modified));if(i)return i;let n=[],o=new Ls(e.name,n,e,s);for(let l of s)l.instances.push(o);let r=r3(s);for(let l of e.set)if(!l.modified.length)for(let a of r)n.push(ya.get(l,a));return o}}function o3(t,e){return t.length==e.length&&t.every((s,i)=>s==e[i])}function r3(t){let e=[[]];for(let s=0;s<t.length;s++)for(let i=0,n=e.length;i<n;i++)e.push(e[i].concat(t[s]));return e.sort((s,i)=>i.length-s.length)}function l3(t){let e=Object.create(null);for(let s in t){let i=t[s];Array.isArray(i)||(i=[i]);for(let n of s.split(" "))if(n){let o=[],r=2,l=n;for(let f=0;;){if(l=="..."&&f>0&&f+3==n.length){r=1;break}let h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!h)throw new RangeError("Invalid path: "+n);if(o.push(h[0]=="*"?"":h[0][0]=='"'?JSON.parse(h[0]):h[0]),f+=h[0].length,f==n.length)break;let m=n[f++];if(f==n.length&&m=="!"){r=0;break}if(m!="/")throw new RangeError("Invalid path: "+n);l=n.slice(f)}let a=o.length-1,d=o[a];if(!d)throw new RangeError("Invalid path: "+n);let u=new Or(i,r,a>0?o.slice(0,a):null);e[d]=u.sort(e[d])}}return Fv.add(e)}const Fv=new Ye({combine(t,e){let s,i,n;for(;t||e;){if(!t||e&&t.depth>=e.depth?(n=e,e=e.next):(n=t,t=t.next),s&&s.mode==n.mode&&!n.context&&!s.context)continue;let o=new Or(n.tags,n.mode,n.context);s?s.next=o:i=o,s=o}return i}});class Or{constructor(e,s,i,n){this.tags=e,this.mode=s,this.context=i,this.next=n}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Or.empty=new Or([],2,null);function Hv(t,e){let s=Object.create(null);for(let o of t)if(!Array.isArray(o.tag))s[o.tag.id]=o.class;else for(let r of o.tag)s[r.id]=o.class;let{scope:i,all:n=null}=e||{};return{style:o=>{let r=n;for(let l of o)for(let a of l.set){let d=s[a.id];if(d){r=r?r+" "+d:d;break}}return r},scope:i}}function a3(t,e){let s=null;for(let i of t){let n=i.style(e);n&&(s=s?s+" "+n:n)}return s}function u3(t,e,s,i=0,n=t.length){let o=new d3(i,Array.isArray(e)?e:[e],s);o.highlightRange(t.cursor(),i,n,"",o.highlighters),o.flush(n)}class d3{constructor(e,s,i){this.at=e,this.highlighters=s,this.span=i,this.class=""}startSpan(e,s){s!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=s)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,s,i,n,o){let{type:r,from:l,to:a}=e;if(l>=i||a<=s)return;r.isTop&&(o=this.highlighters.filter(m=>!m.scope||m.scope(r)));let d=n,u=c3(e)||Or.empty,f=a3(o,u.tags);if(f&&(d&&(d+=" "),d+=f,u.mode==1&&(n+=(n?" ":"")+f)),this.startSpan(Math.max(s,l),d),u.opaque)return;let h=e.tree&&e.tree.prop(Ye.mounted);if(h&&h.overlay){let m=e.node.enter(h.overlay[0].from+l,1),w=this.highlighters.filter(C=>!C.scope||C.scope(h.tree.type)),p=e.firstChild();for(let C=0,V=l;;C++){let U=C<h.overlay.length?h.overlay[C]:null,B=U?U.from+l:a,H=Math.max(s,V),j=Math.min(i,B);if(H<j&&p)for(;e.from<j&&(this.highlightRange(e,H,j,n,o),this.startSpan(Math.min(j,e.to),d),!(e.to>=B||!e.nextSibling())););if(!U||B>i)break;V=U.to+l,V>s&&(this.highlightRange(m.cursor(),Math.max(s,U.from+l),Math.min(i,V),"",w),this.startSpan(Math.min(i,V),d))}p&&e.parent()}else if(e.firstChild()){h&&(n="");do if(!(e.to<=s)){if(e.from>=i)break;this.highlightRange(e,s,i,n,o),this.startSpan(Math.min(i,e.to),d)}while(e.nextSibling());e.parent()}}}function c3(t){let e=t.type.prop(Fv);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const Me=Ls.define,Ml=Me(),Ki=Me(),Yp=Me(Ki),Qp=Me(Ki),Gi=Me(),Dl=Me(Gi),Ru=Me(Gi),di=Me(),kn=Me(di),ai=Me(),ui=Me(),ec=Me(),Ho=Me(ec),$l=Me(),De={comment:Ml,lineComment:Me(Ml),blockComment:Me(Ml),docComment:Me(Ml),name:Ki,variableName:Me(Ki),typeName:Yp,tagName:Me(Yp),propertyName:Qp,attributeName:Me(Qp),className:Me(Ki),labelName:Me(Ki),namespace:Me(Ki),macroName:Me(Ki),literal:Gi,string:Dl,docString:Me(Dl),character:Me(Dl),attributeValue:Me(Dl),number:Ru,integer:Me(Ru),float:Me(Ru),bool:Me(Gi),regexp:Me(Gi),escape:Me(Gi),color:Me(Gi),url:Me(Gi),keyword:ai,self:Me(ai),null:Me(ai),atom:Me(ai),unit:Me(ai),modifier:Me(ai),operatorKeyword:Me(ai),controlKeyword:Me(ai),definitionKeyword:Me(ai),moduleKeyword:Me(ai),operator:ui,derefOperator:Me(ui),arithmeticOperator:Me(ui),logicOperator:Me(ui),bitwiseOperator:Me(ui),compareOperator:Me(ui),updateOperator:Me(ui),definitionOperator:Me(ui),typeOperator:Me(ui),controlOperator:Me(ui),punctuation:ec,separator:Me(ec),bracket:Ho,angleBracket:Me(Ho),squareBracket:Me(Ho),paren:Me(Ho),brace:Me(Ho),content:di,heading:kn,heading1:Me(kn),heading2:Me(kn),heading3:Me(kn),heading4:Me(kn),heading5:Me(kn),heading6:Me(kn),contentSeparator:Me(di),list:Me(di),quote:Me(di),emphasis:Me(di),strong:Me(di),link:Me(di),monospace:Me(di),strikethrough:Me(di),inserted:Me(),deleted:Me(),changed:Me(),invalid:Me(),meta:$l,documentMeta:Me($l),annotation:Me($l),processingInstruction:Me($l),definition:Ls.defineModifier("definition"),constant:Ls.defineModifier("constant"),function:Ls.defineModifier("function"),standard:Ls.defineModifier("standard"),local:Ls.defineModifier("local"),special:Ls.defineModifier("special")};for(let t in De){let e=De[t];e instanceof Ls&&(e.name=t)}Hv([{tag:De.link,class:"tok-link"},{tag:De.heading,class:"tok-heading"},{tag:De.emphasis,class:"tok-emphasis"},{tag:De.strong,class:"tok-strong"},{tag:De.keyword,class:"tok-keyword"},{tag:De.atom,class:"tok-atom"},{tag:De.bool,class:"tok-bool"},{tag:De.url,class:"tok-url"},{tag:De.labelName,class:"tok-labelName"},{tag:De.inserted,class:"tok-inserted"},{tag:De.deleted,class:"tok-deleted"},{tag:De.literal,class:"tok-literal"},{tag:De.string,class:"tok-string"},{tag:De.number,class:"tok-number"},{tag:[De.regexp,De.escape,De.special(De.string)],class:"tok-string2"},{tag:De.variableName,class:"tok-variableName"},{tag:De.local(De.variableName),class:"tok-variableName tok-local"},{tag:De.definition(De.variableName),class:"tok-variableName tok-definition"},{tag:De.special(De.variableName),class:"tok-variableName2"},{tag:De.definition(De.propertyName),class:"tok-propertyName tok-definition"},{tag:De.typeName,class:"tok-typeName"},{tag:De.namespace,class:"tok-namespace"},{tag:De.className,class:"tok-className"},{tag:De.macroName,class:"tok-macroName"},{tag:De.propertyName,class:"tok-propertyName"},{tag:De.operator,class:"tok-operator"},{tag:De.comment,class:"tok-comment"},{tag:De.meta,class:"tok-meta"},{tag:De.invalid,class:"tok-invalid"},{tag:De.punctuation,class:"tok-punctuation"}]);var Bu;const eo=new Ye;function f3(t){return Le.define({combine:t?e=>e.concat(t):void 0})}const h3=new Ye;class Ks{constructor(e,s,i=[],n=""){this.data=e,this.name=n,et.prototype.hasOwnProperty("tree")||Object.defineProperty(et.prototype,"tree",{get(){return os(this)}}),this.parser=s,this.extension=[cn.of(this),et.languageData.of((o,r,l)=>{let a=Xp(o,r,l),d=a.type.prop(eo);if(!d)return[];let u=o.facet(d),f=a.type.prop(h3);if(f){let h=a.resolve(r-a.from,l);for(let m of f)if(m.test(h,o)){let w=o.facet(m.facet);return m.type=="replace"?w:w.concat(u)}}return u})].concat(i)}isActiveAt(e,s,i=-1){return Xp(e,s,i).type.prop(eo)==this.data}findRegions(e){let s=e.facet(cn);if(s?.data==this.data)return[{from:0,to:e.doc.length}];if(!s||!s.allowsNesting)return[];let i=[],n=(o,r)=>{if(o.prop(eo)==this.data){i.push({from:r,to:r+o.length});return}let l=o.prop(Ye.mounted);if(l){if(l.tree.prop(eo)==this.data){if(l.overlay)for(let a of l.overlay)i.push({from:a.from+r,to:a.to+r});else i.push({from:r,to:r+o.length});return}else if(l.overlay){let a=i.length;if(n(l.tree,l.overlay[0].from+r),i.length>a)return}}for(let a=0;a<o.children.length;a++){let d=o.children[a];d instanceof St&&n(d,o.positions[a]+r)}};return n(os(e),0),i}get allowsNesting(){return!0}}Ks.setState=Ke.define();function Xp(t,e,s){let i=t.facet(cn),n=os(t).topNode;if(!i||i.allowsNesting)for(let o=n;o;o=o.enter(e,s,Kt.ExcludeBuffers))o.type.isTop&&(n=o);return n}function os(t){let e=t.field(Ks.state,!1);return e?e.tree:St.empty}class p3{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,s){let i=this.cursorPos-this.string.length;return e<i||s>=this.cursorPos?this.doc.sliceString(e,s):this.string.slice(e-i,s-i)}}let Wo=null;class _o{constructor(e,s,i=[],n,o,r,l,a){this.parser=e,this.state=s,this.fragments=i,this.tree=n,this.treeLen=o,this.viewport=r,this.skipped=l,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,s,i){return new _o(e,s,[],St.empty,0,i,[],null)}startParse(){return this.parser.startParse(new p3(this.state.doc),this.fragments)}work(e,s){return s!=null&&s>=this.state.doc.length&&(s=void 0),this.tree!=St.empty&&this.isDone(s??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let n=Date.now()+e;e=()=>Date.now()>n}for(this.parse||(this.parse=this.startParse()),s!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>s)&&s<this.state.doc.length&&this.parse.stopAt(s);;){let n=this.parse.advance();if(n)if(this.fragments=this.withoutTempSkipped(Pn.addTree(n,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=n,this.parse=null,this.treeLen<(s??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,s;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(s=this.parse.advance()););}),this.treeLen=e,this.tree=s,this.fragments=this.withoutTempSkipped(Pn.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let s=Wo;Wo=this;try{return e()}finally{Wo=s}}withoutTempSkipped(e){for(let s;s=this.tempSkipped.pop();)e=Zp(e,s.from,s.to);return e}changes(e,s){let{fragments:i,tree:n,treeLen:o,viewport:r,skipped:l}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((d,u,f,h)=>a.push({fromA:d,toA:u,fromB:f,toB:h})),i=Pn.applyChanges(i,a),n=St.empty,o=0,r={from:e.mapPos(r.from,-1),to:e.mapPos(r.to,1)},this.skipped.length){l=[];for(let d of this.skipped){let u=e.mapPos(d.from,1),f=e.mapPos(d.to,-1);u<f&&l.push({from:u,to:f})}}}return new _o(this.parser,s,i,n,o,r,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let s=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:n,to:o}=this.skipped[i];n<e.to&&o>e.from&&(this.fragments=Zp(this.fragments,n,o),this.skipped.splice(i--,1))}return this.skipped.length>=s?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,s){this.skipped.push({from:e,to:s})}static getSkippingParser(e){return new class extends zv{createParse(s,i,n){let o=n[0].from,r=n[n.length-1].to;return{parsedPos:o,advance(){let a=Wo;if(a){for(let d of n)a.tempSkipped.push(d);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=r,new St(ws.none,[],[],r-o)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let s=this.fragments;return this.treeLen>=e&&s.length&&s[0].from==0&&s[0].to>=e}static get(){return Wo}}function Zp(t,e,s){return Pn.applyChanges(t,[{fromA:e,toA:s,fromB:e,toB:s}])}class So{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let s=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),s.viewport.to);return s.work(20,i)||s.takeTree(),new So(s)}static init(e){let s=Math.min(3e3,e.doc.length),i=_o.create(e.facet(cn).parser,e,{from:0,to:s});return i.work(20,s)||i.takeTree(),new So(i)}}Ks.state=Yt.define({create:So.init,update(t,e){for(let s of e.effects)if(s.is(Ks.setState))return s.value;return e.startState.facet(cn)!=e.state.facet(cn)?So.init(e.state):t.apply(e)}});let Wv=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(Wv=t=>{let e=-1,s=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(s):cancelIdleCallback(e)});const Iu=typeof navigator<"u"&&(!((Bu=navigator.scheduling)===null||Bu===void 0)&&Bu.isInputPending)?()=>navigator.scheduling.isInputPending():null,m3=Ot.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let s=this.view.state.field(Ks.state).context;(s.updateViewport(e.view.viewport)||this.view.viewport.to>s.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(s)}scheduleWork(){if(this.working)return;let{state:e}=this.view,s=e.field(Ks.state);(s.tree!=s.context.tree||!s.context.isDone(e.doc.length))&&(this.working=Wv(this.work))}work(e){this.working=null;let s=Date.now();if(this.chunkEnd<s&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=s+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:n}}=this.view,o=i.field(Ks.state);if(o.tree==o.context.tree&&o.context.isDone(n+1e5))return;let r=Date.now()+Math.min(this.chunkBudget,100,e&&!Iu?Math.max(25,e.timeRemaining()-5):1e9),l=o.context.treeLen<n&&i.doc.length>n+1e3,a=o.context.work(()=>Iu&&Iu()||Date.now()>r,n+(l?0:1e5));this.chunkBudget-=Date.now()-s,(a||this.chunkBudget<=0)&&(o.context.takeTree(),this.view.dispatch({effects:Ks.setState.of(new So(o.context))})),this.chunkBudget>0&&!(a&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(o.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(s=>ks(this.view.state,s)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),cn=Le.define({combine(t){return t.length?t[0]:null},enables:t=>[Ks.state,m3,Oe.contentAttributes.compute([t],e=>{let s=e.facet(t);return s&&s.name?{"data-language":s.name}:{}})]}),g3=Le.define(),tf=Le.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(s=>s!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function Nn(t){let e=t.facet(tf);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function Pr(t,e){let s="",i=t.tabSize,n=t.facet(tf)[0];if(n=="	"){for(;e>=i;)s+="	",e-=i;n=" "}for(let o=0;o<e;o++)s+=n;return s}function sf(t,e){t instanceof et&&(t=new Xa(t));for(let i of t.state.facet(g3)){let n=i(t,e);if(n!==void 0)return n}let s=os(t.state);return s.length>=e?v3(t,s,e):null}class Xa{constructor(e,s={}){this.state=e,this.options=s,this.unit=Nn(e)}lineAt(e,s=1){let i=this.state.doc.lineAt(e),{simulateBreak:n,simulateDoubleBreak:o}=this.options;return n!=null&&n>=i.from&&n<=i.to?o&&n==e?{text:"",from:e}:(s<0?n<e:n<=e)?{text:i.text.slice(n-i.from),from:n}:{text:i.text.slice(0,n-i.from),from:i.from}:i}textAfterPos(e,s=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:n}=this.lineAt(e,s);return i.slice(e-n,Math.min(i.length,e+100-n))}column(e,s=1){let{text:i,from:n}=this.lineAt(e,s),o=this.countColumn(i,e-n),r=this.options.overrideIndentation?this.options.overrideIndentation(n):-1;return r>-1&&(o+=r-this.countColumn(i,i.search(/\S|$/))),o}countColumn(e,s=e.length){return To(e,this.state.tabSize,s)}lineIndent(e,s=1){let{text:i,from:n}=this.lineAt(e,s),o=this.options.overrideIndentation;if(o){let r=o(n);if(r>-1)return r}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const qv=new Ye;function v3(t,e,s){let i=e.resolveStack(s),n=e.resolveInner(s,-1).resolve(s,0).enterUnfinishedNodesBefore(s);if(n!=i.node){let o=[];for(let r=n;r&&!(r.from<i.node.from||r.to>i.node.to||r.from==i.node.from&&r.type==i.node.type);r=r.parent)o.push(r);for(let r=o.length-1;r>=0;r--)i={node:o[r],next:i}}return Kv(i,t,s)}function Kv(t,e,s){for(let i=t;i;i=i.next){let n=b3(i.node);if(n)return n(nf.create(e,s,i))}return 0}function y3(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function b3(t){let e=t.type.prop(qv);if(e)return e;let s=t.firstChild,i;if(s&&(i=s.type.prop(Ye.closedBy))){let n=t.lastChild,o=n&&i.indexOf(n.name)>-1;return r=>_3(r,!0,1,void 0,o&&!y3(r)?n.from:void 0)}return t.parent==null?k3:null}function k3(){return 0}class nf extends Xa{constructor(e,s,i){super(e.state,e.options),this.base=e,this.pos=s,this.context=i}get node(){return this.context.node}static create(e,s,i){return new nf(e,s,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let s=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(s.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(x3(i,e))break;s=this.state.doc.lineAt(i.from)}return this.lineIndent(s.from)}continue(){return Kv(this.context.next,this.base,this.pos)}}function x3(t,e){for(let s=e;s;s=s.parent)if(t==s)return!0;return!1}function w3(t){let e=t.node,s=e.childAfter(e.from),i=e.lastChild;if(!s)return null;let n=t.options.simulateBreak,o=t.state.doc.lineAt(s.from),r=n==null||n<=o.from?o.to:Math.min(o.to,n);for(let l=s.to;;){let a=e.childAfter(l);if(!a||a==i)return null;if(!a.type.isSkipped){if(a.from>=r)return null;let d=/^ */.exec(o.text.slice(s.to-o.from))[0].length;return{from:s.from,to:s.to+d}}l=a.to}}function _3(t,e,s,i,n){let o=t.textAfter,r=o.match(/^\s*/)[0].length,l=i&&o.slice(r,r+i.length)==i||n==t.pos+r,a=w3(t);return a?l?t.column(a.from):t.column(a.to):t.baseIndent+(l?0:t.unit*s)}const S3=200;function C3(){return et.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let s=t.newDoc,{head:i}=t.newSelection.main,n=s.lineAt(i);if(i>n.from+S3)return t;let o=s.sliceString(n.from,i);if(!e.some(d=>d.test(o)))return t;let{state:r}=t,l=-1,a=[];for(let{head:d}of r.selection.ranges){let u=r.doc.lineAt(d);if(u.from==l)continue;l=u.from;let f=sf(r,u.from);if(f==null)continue;let h=/^\s*/.exec(u.text)[0],m=Pr(r,f);h!=m&&a.push({from:u.from,to:u.from+h.length,insert:m})}return a.length?[t,{changes:a,sequential:!0}]:t})}const A3=Le.define(),V3=new Ye;function M3(t,e,s){let i=os(t);if(i.length<s)return null;let n=i.resolveStack(s,1),o=null;for(let r=n;r;r=r.next){let l=r.node;if(l.to<=s||l.from>s)continue;if(o&&l.from<e)break;let a=l.type.prop(V3);if(a&&(l.to<i.length-50||i.length==t.doc.length||!D3(l))){let d=a(l,t);d&&d.from<=s&&d.from>=e&&d.to>s&&(o=d)}}return o}function D3(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function ba(t,e,s){for(let i of t.facet(A3)){let n=i(t,e,s);if(n)return n}return M3(t,e,s)}function Gv(t,e){let s=e.mapPos(t.from,1),i=e.mapPos(t.to,-1);return s>=i?void 0:{from:s,to:i}}const Za=Ke.define({map:Gv}),Gr=Ke.define({map:Gv});function Jv(t){let e=[];for(let{head:s}of t.state.selection.ranges)e.some(i=>i.from<=s&&i.to>=s)||e.push(t.lineBlockAt(s));return e}const zn=Yt.define({create(){return He.none},update(t,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((s,i)=>t=em(t,s,i)),t=t.map(e.changes);for(let s of e.effects)if(s.is(Za)&&!$3(t,s.value.from,s.value.to)){let{preparePlaceholder:i}=e.state.facet(Xv),n=i?He.replace({widget:new R3(i(e.state,s.value))}):tm;t=t.update({add:[n.range(s.value.from,s.value.to)]})}else s.is(Gr)&&(t=t.update({filter:(i,n)=>s.value.from!=i||s.value.to!=n,filterFrom:s.value.from,filterTo:s.value.to}));return e.selection&&(t=em(t,e.selection.main.head)),t},provide:t=>Oe.decorations.from(t),toJSON(t,e){let s=[];return t.between(0,e.doc.length,(i,n)=>{s.push(i,n)}),s},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let s=0;s<t.length;){let i=t[s++],n=t[s++];if(typeof i!="number"||typeof n!="number")throw new RangeError("Invalid JSON for fold state");e.push(tm.range(i,n))}return He.set(e,!0)}});function em(t,e,s=e){let i=!1;return t.between(e,s,(n,o)=>{n<s&&o>e&&(i=!0)}),i?t.update({filterFrom:e,filterTo:s,filter:(n,o)=>n>=s||o<=e}):t}function ka(t,e,s){var i;let n=null;return(i=t.field(zn,!1))===null||i===void 0||i.between(e,s,(o,r)=>{(!n||n.from>o)&&(n={from:o,to:r})}),n}function $3(t,e,s){let i=!1;return t.between(e,e,(n,o)=>{n==e&&o==s&&(i=!0)}),i}function Yv(t,e){return t.field(zn,!1)?e:e.concat(Ke.appendConfig.of(Zv()))}const T3=t=>{for(let e of Jv(t)){let s=ba(t.state,e.from,e.to);if(s)return t.dispatch({effects:Yv(t.state,[Za.of(s),Qv(t,s)])}),!0}return!1},E3=t=>{if(!t.state.field(zn,!1))return!1;let e=[];for(let s of Jv(t)){let i=ka(t.state,s.from,s.to);i&&e.push(Gr.of(i),Qv(t,i,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function Qv(t,e,s=!0){let i=t.state.doc.lineAt(e.from).number,n=t.state.doc.lineAt(e.to).number;return Oe.announce.of(`${t.state.phrase(s?"Folded lines":"Unfolded lines")} ${i} ${t.state.phrase("to")} ${n}.`)}const O3=t=>{let{state:e}=t,s=[];for(let i=0;i<e.doc.length;){let n=t.lineBlockAt(i),o=ba(e,n.from,n.to);o&&s.push(Za.of(o)),i=(o?t.lineBlockAt(o.to):n).to+1}return s.length&&t.dispatch({effects:Yv(t.state,s)}),!!s.length},P3=t=>{let e=t.state.field(zn,!1);if(!e||!e.size)return!1;let s=[];return e.between(0,t.state.doc.length,(i,n)=>{s.push(Gr.of({from:i,to:n}))}),t.dispatch({effects:s}),!0},L3=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:T3},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:E3},{key:"Ctrl-Alt-[",run:O3},{key:"Ctrl-Alt-]",run:P3}],j3={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},Xv=Le.define({combine(t){return wi(t,j3)}});function Zv(t){return[zn,U3]}function ey(t,e){let{state:s}=t,i=s.facet(Xv),n=r=>{let l=t.lineBlockAt(t.posAtDOM(r.target)),a=ka(t.state,l.from,l.to);a&&t.dispatch({effects:Gr.of(a)}),r.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(t,n,e);let o=document.createElement("span");return o.textContent=i.placeholderText,o.setAttribute("aria-label",s.phrase("folded code")),o.title=s.phrase("unfold"),o.className="cm-foldPlaceholder",o.onclick=n,o}const tm=He.replace({widget:new class extends fn{toDOM(t){return ey(t,null)}}});class R3 extends fn{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return ey(e,this.value)}}const B3={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class Uu extends Ii{constructor(e,s){super(),this.config=e,this.open=s}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let s=document.createElement("span");return s.textContent=this.open?this.config.openText:this.config.closedText,s.title=e.state.phrase(this.open?"Fold line":"Unfold line"),s}}function I3(t={}){let e={...B3,...t},s=new Uu(e,!0),i=new Uu(e,!1),n=Ot.fromClass(class{constructor(r){this.from=r.viewport.from,this.markers=this.buildMarkers(r)}update(r){(r.docChanged||r.viewportChanged||r.startState.facet(cn)!=r.state.facet(cn)||r.startState.field(zn,!1)!=r.state.field(zn,!1)||os(r.startState)!=os(r.state)||e.foldingChanged(r))&&(this.markers=this.buildMarkers(r.view))}buildMarkers(r){let l=new Ri;for(let a of r.viewportLineBlocks){let d=ka(r.state,a.from,a.to)?i:ba(r.state,a.from,a.to)?s:null;d&&l.add(a.from,a.from,d)}return l.finish()}}),{domEventHandlers:o}=e;return[n,B5({class:"cm-foldGutter",markers(r){var l;return((l=r.plugin(n))===null||l===void 0?void 0:l.markers)||tt.empty},initialSpacer(){return new Uu(e,!1)},domEventHandlers:{...o,click:(r,l,a)=>{if(o.click&&o.click(r,l,a))return!0;let d=ka(r.state,l.from,l.to);if(d)return r.dispatch({effects:Gr.of(d)}),!0;let u=ba(r.state,l.from,l.to);return u?(r.dispatch({effects:Za.of(u)}),!0):!1}}}),Zv()]}const U3=Oe.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Jr{constructor(e,s){this.specs=e;let i;function n(l){let a=ln.newName();return(i||(i=Object.create(null)))["."+a]=l,a}const o=typeof s.all=="string"?s.all:s.all?n(s.all):void 0,r=s.scope;this.scope=r instanceof Ks?l=>l.prop(eo)==r.data:r?l=>l==r:void 0,this.style=Hv(e.map(l=>({tag:l.tag,class:l.class||n(Object.assign({},l,{tag:null}))})),{all:o}).style,this.module=i?new ln(i):null,this.themeType=s.themeType}static define(e,s){return new Jr(e,s||{})}}const tc=Le.define(),ty=Le.define({combine(t){return t.length?[t[0]]:null}});function Nu(t){let e=t.facet(tc);return e.length?e:t.facet(ty)}function sy(t,e){let s=[z3],i;return t instanceof Jr&&(t.module&&s.push(Oe.styleModule.of(t.module)),i=t.themeType),e?.fallback?s.push(ty.of(t)):i?s.push(tc.computeN([Oe.darkTheme],n=>n.facet(Oe.darkTheme)==(i=="dark")?[t]:[])):s.push(tc.of(t)),s}class N3{constructor(e){this.markCache=Object.create(null),this.tree=os(e.state),this.decorations=this.buildDeco(e,Nu(e.state)),this.decoratedTo=e.viewport.to}update(e){let s=os(e.state),i=Nu(e.state),n=i!=Nu(e.startState),{viewport:o}=e.view,r=e.changes.mapPos(this.decoratedTo,1);s.length<o.to&&!n&&s.type==this.tree.type&&r>=o.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=r):(s!=this.tree||e.viewportChanged||n)&&(this.tree=s,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=o.to)}buildDeco(e,s){if(!s||!this.tree.length)return He.none;let i=new Ri;for(let{from:n,to:o}of e.visibleRanges)u3(this.tree,s,(r,l,a)=>{i.add(r,l,this.markCache[a]||(this.markCache[a]=He.mark({class:a})))},n,o);return i.finish()}}const z3=Hn.high(Ot.fromClass(N3,{decorations:t=>t.decorations})),F3=Jr.define([{tag:De.meta,color:"#404740"},{tag:De.link,textDecoration:"underline"},{tag:De.heading,textDecoration:"underline",fontWeight:"bold"},{tag:De.emphasis,fontStyle:"italic"},{tag:De.strong,fontWeight:"bold"},{tag:De.strikethrough,textDecoration:"line-through"},{tag:De.keyword,color:"#708"},{tag:[De.atom,De.bool,De.url,De.contentSeparator,De.labelName],color:"#219"},{tag:[De.literal,De.inserted],color:"#164"},{tag:[De.string,De.deleted],color:"#a11"},{tag:[De.regexp,De.escape,De.special(De.string)],color:"#e40"},{tag:De.definition(De.variableName),color:"#00f"},{tag:De.local(De.variableName),color:"#30a"},{tag:[De.typeName,De.namespace],color:"#085"},{tag:De.className,color:"#167"},{tag:[De.special(De.variableName),De.macroName],color:"#256"},{tag:De.definition(De.propertyName),color:"#00c"},{tag:De.comment,color:"#940"},{tag:De.invalid,color:"#f00"}]),H3=Oe.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),iy=1e4,ny="()[]{}",oy=Le.define({combine(t){return wi(t,{afterCursor:!0,brackets:ny,maxScanDistance:iy,renderMatch:K3})}}),W3=He.mark({class:"cm-matchingBracket"}),q3=He.mark({class:"cm-nonmatchingBracket"});function K3(t){let e=[],s=t.matched?W3:q3;return e.push(s.range(t.start.from,t.start.to)),t.end&&e.push(s.range(t.end.from,t.end.to)),e}const G3=Yt.define({create(){return He.none},update(t,e){if(!e.docChanged&&!e.selection)return t;let s=[],i=e.state.facet(oy);for(let n of e.state.selection.ranges){if(!n.empty)continue;let o=vi(e.state,n.head,-1,i)||n.head>0&&vi(e.state,n.head-1,1,i)||i.afterCursor&&(vi(e.state,n.head,1,i)||n.head<e.state.doc.length&&vi(e.state,n.head+1,-1,i));o&&(s=s.concat(i.renderMatch(o,e.state)))}return He.set(s,!0)},provide:t=>Oe.decorations.from(t)}),J3=[G3,H3];function Y3(t={}){return[oy.of(t),J3]}const Q3=new Ye;function sc(t,e,s){let i=t.prop(e<0?Ye.openedBy:Ye.closedBy);if(i)return i;if(t.name.length==1){let n=s.indexOf(t.name);if(n>-1&&n%2==(e<0?1:0))return[s[n+e]]}return null}function ic(t){let e=t.type.prop(Q3);return e?e(t.node):t}function vi(t,e,s,i={}){let n=i.maxScanDistance||iy,o=i.brackets||ny,r=os(t),l=r.resolveInner(e,s);for(let a=l;a;a=a.parent){let d=sc(a.type,s,o);if(d&&a.from<a.to){let u=ic(a);if(u&&(s>0?e>=u.from&&e<u.to:e>u.from&&e<=u.to))return X3(t,e,s,a,u,d,o)}}return Z3(t,e,s,r,l.type,n,o)}function X3(t,e,s,i,n,o,r){let l=i.parent,a={from:n.from,to:n.to},d=0,u=l?.cursor();if(u&&(s<0?u.childBefore(i.from):u.childAfter(i.to)))do if(s<0?u.to<=i.from:u.from>=i.to){if(d==0&&o.indexOf(u.type.name)>-1&&u.from<u.to){let f=ic(u);return{start:a,end:f?{from:f.from,to:f.to}:void 0,matched:!0}}else if(sc(u.type,s,r))d++;else if(sc(u.type,-s,r)){if(d==0){let f=ic(u);return{start:a,end:f&&f.from<f.to?{from:f.from,to:f.to}:void 0,matched:!1}}d--}}while(s<0?u.prevSibling():u.nextSibling());return{start:a,matched:!1}}function Z3(t,e,s,i,n,o,r){let l=s<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),a=r.indexOf(l);if(a<0||a%2==0!=s>0)return null;let d={from:s<0?e-1:e,to:s>0?e+1:e},u=t.doc.iterRange(e,s>0?t.doc.length:0),f=0;for(let h=0;!u.next().done&&h<=o;){let m=u.value;s<0&&(h+=m.length);let w=e+h*s;for(let p=s>0?0:m.length-1,C=s>0?m.length:-1;p!=C;p+=s){let V=r.indexOf(m[p]);if(!(V<0||i.resolveInner(w+p,1).type!=n))if(V%2==0==s>0)f++;else{if(f==1)return{start:d,end:{from:w+p,to:w+p+1},matched:V>>1==a>>1};f--}}s>0&&(h+=m.length)}return u.done?{start:d,matched:!1}:null}function sm(t,e,s,i=0,n=0){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));let o=n;for(let r=i;r<e;r++)t.charCodeAt(r)==9?o+=s-o%s:o++;return o}class ry{constructor(e,s,i,n){this.string=e,this.tabSize=s,this.indentUnit=i,this.overrideIndent=n,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let s=this.string.charAt(this.pos),i;if(typeof e=="string"?i=s==e:i=s&&(e instanceof RegExp?e.test(s):e(s)),i)return++this.pos,s}eatWhile(e){let s=this.pos;for(;this.eat(e););return this.pos>s}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let s=this.string.indexOf(e,this.pos);if(s>-1)return this.pos=s,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=sm(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:sm(this.string,null,this.tabSize)}match(e,s,i){if(typeof e=="string"){let n=r=>i?r.toLowerCase():r,o=this.string.substr(this.pos,e.length);return n(o)==n(e)?(s!==!1&&(this.pos+=e.length),!0):null}else{let n=this.string.slice(this.pos).match(e);return n&&n.index>0?null:(n&&s!==!1&&(this.pos+=n[0].length),n)}}current(){return this.string.slice(this.start,this.pos)}}function eA(t){return{name:t.name||"",token:t.token,blankLine:t.blankLine||(()=>{}),startState:t.startState||(()=>!0),copyState:t.copyState||tA,indent:t.indent||(()=>null),languageData:t.languageData||{},tokenTable:t.tokenTable||lf,mergeTokens:t.mergeTokens!==!1}}function tA(t){if(typeof t!="object")return t;let e={};for(let s in t){let i=t[s];e[s]=i instanceof Array?i.slice():i}return e}const im=new WeakMap;class of extends Ks{constructor(e){let s=f3(e.languageData),i=eA(e),n,o=new class extends zv{createParse(r,l,a){return new iA(n,r,l,a)}};super(s,o,[],e.name),this.topNode=rA(s,this),n=this,this.streamParser=i,this.stateAfter=new Ye({perNode:!0}),this.tokenTable=e.tokenTable?new dy(i.tokenTable):oA}static define(e){return new of(e)}getIndent(e){let s,{overrideIndentation:i}=e.options;i&&(s=im.get(e.state),s!=null&&s<e.pos-1e4&&(s=void 0));let n=rf(this,e.node.tree,e.node.from,e.node.from,s??e.pos),o,r;if(n?(r=n.state,o=n.pos+1):(r=this.streamParser.startState(e.unit),o=e.node.from),e.pos-o>1e4)return null;for(;o<e.pos;){let a=e.state.doc.lineAt(o),d=Math.min(e.pos,a.to);if(a.length){let u=i?i(a.from):-1,f=new ry(a.text,e.state.tabSize,e.unit,u<0?void 0:u);for(;f.pos<d-a.from;)ay(this.streamParser.token,f,r)}else this.streamParser.blankLine(r,e.unit);if(d==e.pos)break;o=a.to+1}let l=e.lineAt(e.pos);return i&&s==null&&im.set(e.state,l.from),this.streamParser.indent(r,/^\s*(.*)/.exec(l.text)[1],e)}get allowsNesting(){return!1}}function rf(t,e,s,i,n){let o=s>=i&&s+e.length<=n&&e.prop(t.stateAfter);if(o)return{state:t.streamParser.copyState(o),pos:s+e.length};for(let r=e.children.length-1;r>=0;r--){let l=e.children[r],a=s+e.positions[r],d=l instanceof St&&a<n&&rf(t,l,a,i,n);if(d)return d}return null}function ly(t,e,s,i,n){if(n&&s<=0&&i>=e.length)return e;!n&&s==0&&e.type==t.topNode&&(n=!0);for(let o=e.children.length-1;o>=0;o--){let r=e.positions[o],l=e.children[o],a;if(r<i&&l instanceof St){if(!(a=ly(t,l,s-r,i-r,n)))break;return n?new St(e.type,e.children.slice(0,o).concat(a),e.positions.slice(0,o+1),r+a.length):a}}return null}function sA(t,e,s,i,n){for(let o of e){let r=o.from+(o.openStart?25:0),l=o.to-(o.openEnd?25:0),a=r<=s&&l>s&&rf(t,o.tree,0-o.offset,s,l),d;if(a&&a.pos<=i&&(d=ly(t,o.tree,s+o.offset,a.pos+o.offset,!1)))return{state:a.state,tree:d}}return{state:t.streamParser.startState(n?Nn(n):4),tree:St.empty}}class iA{constructor(e,s,i,n){this.lang=e,this.input=s,this.fragments=i,this.ranges=n,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=n[n.length-1].to;let o=_o.get(),r=n[0].from,{state:l,tree:a}=sA(e,i,r,this.to,o?.state);this.state=l,this.parsedPos=this.chunkStart=r+a.length;for(let d=0;d<a.children.length;d++)this.chunks.push(a.children[d]),this.chunkPos.push(a.positions[d]);o&&this.parsedPos<o.viewport.from-1e5&&n.some(d=>d.from<=o.viewport.from&&d.to>=o.viewport.from)&&(this.state=this.lang.streamParser.startState(Nn(o.state)),o.skipUntilInView(this.parsedPos,o.viewport.from),this.parsedPos=o.viewport.from),this.moveRangeIndex()}advance(){let e=_o.get(),s=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),i=Math.min(s,this.chunkStart+512);for(e&&(i=Math.min(i,e.viewport.to));this.parsedPos<i;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=s?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,s),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let s=this.input.chunk(e);if(this.input.lineChunks)s==`
`&&(s="");else{let i=s.indexOf(`
`);i>-1&&(s=s.slice(0,i))}return e+s.length<=this.to?s:s.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,s=this.lineAfter(e),i=e+s.length;for(let n=this.rangeIndex;;){let o=this.ranges[n].to;if(o>=i||(s=s.slice(0,o-(i-s.length)),n++,n==this.ranges.length))break;let r=this.ranges[n].from,l=this.lineAfter(r);s+=l,i=r+l.length}return{line:s,end:i}}skipGapsTo(e,s,i){for(;;){let n=this.ranges[this.rangeIndex].to,o=e+s;if(i>0?n>o:n>=o)break;let r=this.ranges[++this.rangeIndex].from;s+=r-n}return s}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,s,i,n){let o=4;if(this.ranges.length>1){n=this.skipGapsTo(s,n,1),s+=n;let l=this.chunk.length;n=this.skipGapsTo(i,n,-1),i+=n,o+=this.chunk.length-l}let r=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&o==4&&r>=0&&this.chunk[r]==e&&this.chunk[r+2]==s?this.chunk[r+2]=i:this.chunk.push(e,s,i,o),n}parseLine(e){let{line:s,end:i}=this.nextLine(),n=0,{streamParser:o}=this.lang,r=new ry(s,e?e.state.tabSize:4,e?Nn(e.state):2);if(r.eol())o.blankLine(this.state,r.indentUnit);else for(;!r.eol();){let l=ay(o.token,r,this.state);if(l&&(n=this.emitToken(this.lang.tokenTable.resolve(l),this.parsedPos+r.start,this.parsedPos+r.pos,n)),r.start>1e4)break}this.parsedPos=i,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=St.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:nA,topID:0,maxBufferLength:512,reused:this.chunkReused});e=new St(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new St(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function ay(t,e,s){e.start=e.pos;for(let i=0;i<10;i++){let n=t(e,s);if(e.pos>e.start)return n}throw new Error("Stream parser failed to advance stream.")}const lf=Object.create(null),Lr=[ws.none],nA=new Qc(Lr),nm=[],om=Object.create(null),uy=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])uy[t]=cy(lf,e);class dy{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),uy)}resolve(e){return e?this.table[e]||(this.table[e]=cy(this.extra,e)):0}}const oA=new dy(lf);function zu(t,e){nm.indexOf(t)>-1||(nm.push(t),console.warn(e))}function cy(t,e){let s=[];for(let l of e.split(" ")){let a=[];for(let d of l.split(".")){let u=t[d]||De[d];u?typeof u=="function"?a.length?a=a.map(u):zu(d,`Modifier ${d} used at start of tag`):a.length?zu(d,`Tag ${d} used as modifier`):a=Array.isArray(u)?u:[u]:zu(d,`Unknown highlighting tag ${d}`)}for(let d of a)s.push(d)}if(!s.length)return 0;let i=e.replace(/ /g,"_"),n=i+" "+s.map(l=>l.id),o=om[n];if(o)return o.id;let r=om[n]=ws.define({id:Lr.length,name:i,props:[l3({[i]:s})]});return Lr.push(r),r.id}function rA(t,e){let s=ws.define({id:Lr.length,name:"Document",props:[eo.add(()=>t),qv.add(()=>i=>e.getIndent(i))],top:!0});return Lr.push(s),s}kt.RTL,kt.LTR;const lA=t=>{let{state:e}=t,s=e.doc.lineAt(e.selection.main.from),i=uf(t.state,s.from);return i.line?aA(t):i.block?dA(t):!1};function af(t,e){return({state:s,dispatch:i})=>{if(s.readOnly)return!1;let n=t(e,s);return n?(i(s.update(n)),!0):!1}}const aA=af(hA,0),uA=af(fy,0),dA=af((t,e)=>fy(t,e,fA(e)),0);function uf(t,e){let s=t.languageDataAt("commentTokens",e,1);return s.length?s[0]:{}}const qo=50;function cA(t,{open:e,close:s},i,n){let o=t.sliceDoc(i-qo,i),r=t.sliceDoc(n,n+qo),l=/\s*$/.exec(o)[0].length,a=/^\s*/.exec(r)[0].length,d=o.length-l;if(o.slice(d-e.length,d)==e&&r.slice(a,a+s.length)==s)return{open:{pos:i-l,margin:l&&1},close:{pos:n+a,margin:a&&1}};let u,f;n-i<=2*qo?u=f=t.sliceDoc(i,n):(u=t.sliceDoc(i,i+qo),f=t.sliceDoc(n-qo,n));let h=/^\s*/.exec(u)[0].length,m=/\s*$/.exec(f)[0].length,w=f.length-m-s.length;return u.slice(h,h+e.length)==e&&f.slice(w,w+s.length)==s?{open:{pos:i+h+e.length,margin:/\s/.test(u.charAt(h+e.length))?1:0},close:{pos:n-m-s.length,margin:/\s/.test(f.charAt(w-1))?1:0}}:null}function fA(t){let e=[];for(let s of t.selection.ranges){let i=t.doc.lineAt(s.from),n=s.to<=i.to?i:t.doc.lineAt(s.to);n.from>i.from&&n.from==s.to&&(n=s.to==i.to+1?i:t.doc.lineAt(s.to-1));let o=e.length-1;o>=0&&e[o].to>i.from?e[o].to=n.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:n.to})}return e}function fy(t,e,s=e.selection.ranges){let i=s.map(o=>uf(e,o.from).block);if(!i.every(o=>o))return null;let n=s.map((o,r)=>cA(e,i[r],o.from,o.to));if(t!=2&&!n.every(o=>o))return{changes:e.changes(s.map((o,r)=>n[r]?[]:[{from:o.from,insert:i[r].open+" "},{from:o.to,insert:" "+i[r].close}]))};if(t!=1&&n.some(o=>o)){let o=[];for(let r=0,l;r<n.length;r++)if(l=n[r]){let a=i[r],{open:d,close:u}=l;o.push({from:d.pos-a.open.length,to:d.pos+d.margin},{from:u.pos-u.margin,to:u.pos+a.close.length})}return{changes:o}}return null}function hA(t,e,s=e.selection.ranges){let i=[],n=-1;for(let{from:o,to:r}of s){let l=i.length,a=1e9,d=uf(e,o).line;if(d){for(let u=o;u<=r;){let f=e.doc.lineAt(u);if(f.from>n&&(o==r||r>f.from)){n=f.from;let h=/^\s*/.exec(f.text)[0].length,m=h==f.length,w=f.text.slice(h,h+d.length)==d?h:-1;h<f.text.length&&h<a&&(a=h),i.push({line:f,comment:w,token:d,indent:h,empty:m,single:!1})}u=f.to+1}if(a<1e9)for(let u=l;u<i.length;u++)i[u].indent<i[u].line.text.length&&(i[u].indent=a);i.length==l+1&&(i[l].single=!0)}}if(t!=2&&i.some(o=>o.comment<0&&(!o.empty||o.single))){let o=[];for(let{line:l,token:a,indent:d,empty:u,single:f}of i)(f||!u)&&o.push({from:l.from+d,insert:a+" "});let r=e.changes(o);return{changes:r,selection:e.selection.map(r,1)}}else if(t!=1&&i.some(o=>o.comment>=0)){let o=[];for(let{line:r,comment:l,token:a}of i)if(l>=0){let d=r.from+l,u=d+a.length;r.text[u-r.from]==" "&&u++,o.push({from:d,to:u})}return{changes:o}}return null}const nc=Ni.define(),pA=Ni.define(),mA=Le.define(),hy=Le.define({combine(t){return wi(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,s)=>s},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,s)=>(i,n)=>e(i,n)||s(i,n)})}}),py=Yt.define({create(){return yi.empty},update(t,e){let s=e.state.facet(hy),i=e.annotation(nc);if(i){let a=xs.fromTransaction(e,i.selection),d=i.side,u=d==0?t.undone:t.done;return a?u=xa(u,u.length,s.minDepth,a):u=vy(u,e.startState.selection),new yi(d==0?i.rest:u,d==0?u:i.rest)}let n=e.annotation(pA);if((n=="full"||n=="before")&&(t=t.isolate()),e.annotation(It.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let o=xs.fromTransaction(e),r=e.annotation(It.time),l=e.annotation(It.userEvent);return o?t=t.addChanges(o,r,l,s,e):e.selection&&(t=t.addSelection(e.startState.selection,r,l,s.newGroupDelay)),(n=="full"||n=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new yi(t.done.map(xs.fromJSON),t.undone.map(xs.fromJSON))}});function gA(t={}){return[py,hy.of(t),Oe.domEventHandlers({beforeinput(e,s){let i=e.inputType=="historyUndo"?my:e.inputType=="historyRedo"?oc:null;return i?(e.preventDefault(),i(s)):!1}})]}function eu(t,e){return function({state:s,dispatch:i}){if(!e&&s.readOnly)return!1;let n=s.field(py,!1);if(!n)return!1;let o=n.pop(t,s,e);return o?(i(o),!0):!1}}const my=eu(0,!1),oc=eu(1,!1),vA=eu(0,!0),yA=eu(1,!0);class xs{constructor(e,s,i,n,o){this.changes=e,this.effects=s,this.mapped=i,this.startSelection=n,this.selectionsAfter=o}setSelAfter(e){return new xs(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,s,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(s=this.mapped)===null||s===void 0?void 0:s.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(n=>n.toJSON())}}static fromJSON(e){return new xs(e.changes&&Bt.fromJSON(e.changes),[],e.mapped&&ki.fromJSON(e.mapped),e.startSelection&&ue.fromJSON(e.startSelection),e.selectionsAfter.map(ue.fromJSON))}static fromTransaction(e,s){let i=js;for(let n of e.startState.facet(mA)){let o=n(e);o.length&&(i=i.concat(o))}return!i.length&&e.changes.empty?null:new xs(e.changes.invert(e.startState.doc),i,void 0,s||e.startState.selection,js)}static selection(e){return new xs(void 0,js,void 0,void 0,e)}}function xa(t,e,s,i){let n=e+1>s+20?e-s-1:0,o=t.slice(n,e);return o.push(i),o}function bA(t,e){let s=[],i=!1;return t.iterChangedRanges((n,o)=>s.push(n,o)),e.iterChangedRanges((n,o,r,l)=>{for(let a=0;a<s.length;){let d=s[a++],u=s[a++];l>=d&&r<=u&&(i=!0)}}),i}function kA(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((s,i)=>s.empty!=e.ranges[i].empty).length===0}function gy(t,e){return t.length?e.length?t.concat(e):t:e}const js=[],xA=200;function vy(t,e){if(t.length){let s=t[t.length-1],i=s.selectionsAfter.slice(Math.max(0,s.selectionsAfter.length-xA));return i.length&&i[i.length-1].eq(e)?t:(i.push(e),xa(t,t.length-1,1e9,s.setSelAfter(i)))}else return[xs.selection([e])]}function wA(t){let e=t[t.length-1],s=t.slice();return s[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),s}function Fu(t,e){if(!t.length)return t;let s=t.length,i=js;for(;s;){let n=_A(t[s-1],e,i);if(n.changes&&!n.changes.empty||n.effects.length){let o=t.slice(0,s);return o[s-1]=n,o}else e=n.mapped,s--,i=n.selectionsAfter}return i.length?[xs.selection(i)]:js}function _A(t,e,s){let i=gy(t.selectionsAfter.length?t.selectionsAfter.map(l=>l.map(e)):js,s);if(!t.changes)return xs.selection(i);let n=t.changes.map(e),o=e.mapDesc(t.changes,!0),r=t.mapped?t.mapped.composeDesc(o):o;return new xs(n,Ke.mapEffects(t.effects,e),r,t.startSelection.map(o),i)}const SA=/^(input\.type|delete)($|\.)/;class yi{constructor(e,s,i=0,n=void 0){this.done=e,this.undone=s,this.prevTime=i,this.prevUserEvent=n}isolate(){return this.prevTime?new yi(this.done,this.undone):this}addChanges(e,s,i,n,o){let r=this.done,l=r[r.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!i||SA.test(i))&&(!l.selectionsAfter.length&&s-this.prevTime<n.newGroupDelay&&n.joinToEvent(o,bA(l.changes,e.changes))||i=="input.type.compose")?r=xa(r,r.length-1,n.minDepth,new xs(e.changes.compose(l.changes),gy(Ke.mapEffects(e.effects,l.changes),l.effects),l.mapped,l.startSelection,js)):r=xa(r,r.length,n.minDepth,e),new yi(r,js,s,i)}addSelection(e,s,i,n){let o=this.done.length?this.done[this.done.length-1].selectionsAfter:js;return o.length>0&&s-this.prevTime<n&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&kA(o[o.length-1],e)?this:new yi(vy(this.done,e),this.undone,s,i)}addMapping(e){return new yi(Fu(this.done,e),Fu(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,s,i){let n=e==0?this.done:this.undone;if(n.length==0)return null;let o=n[n.length-1],r=o.selectionsAfter[0]||s.selection;if(i&&o.selectionsAfter.length)return s.update({selection:o.selectionsAfter[o.selectionsAfter.length-1],annotations:nc.of({side:e,rest:wA(n),selection:r}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(o.changes){let l=n.length==1?js:n.slice(0,n.length-1);return o.mapped&&(l=Fu(l,o.mapped)),s.update({changes:o.changes,selection:o.startSelection,effects:o.effects,annotations:nc.of({side:e,rest:l,selection:r}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}yi.empty=new yi(js,js);const CA=[{key:"Mod-z",run:my,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:oc,preventDefault:!0},{linux:"Ctrl-Shift-z",run:oc,preventDefault:!0},{key:"Mod-u",run:vA,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:yA,preventDefault:!0}];function Eo(t,e){return ue.create(t.ranges.map(e),t.mainIndex)}function ti(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function si({state:t,dispatch:e},s){let i=Eo(t.selection,s);return i.eq(t.selection,!0)?!1:(e(ti(t,i)),!0)}function tu(t,e){return ue.cursor(e?t.to:t.from)}function yy(t,e){return si(t,s=>s.empty?t.moveByChar(s,e):tu(s,e))}function rs(t){return t.textDirectionAt(t.state.selection.main.head)==kt.LTR}const by=t=>yy(t,!rs(t)),ky=t=>yy(t,rs(t));function xy(t,e){return si(t,s=>s.empty?t.moveByGroup(s,e):tu(s,e))}const AA=t=>xy(t,!rs(t)),VA=t=>xy(t,rs(t));function MA(t,e,s){if(e.type.prop(s))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function su(t,e,s){let i=os(t).resolveInner(e.head),n=s?Ye.closedBy:Ye.openedBy;for(let a=e.head;;){let d=s?i.childAfter(a):i.childBefore(a);if(!d)break;MA(t,d,n)?i=d:a=s?d.to:d.from}let o=i.type.prop(n),r,l;return o&&(r=s?vi(t,i.from,1):vi(t,i.to,-1))&&r.matched?l=s?r.end.to:r.end.from:l=s?i.to:i.from,ue.cursor(l,s?-1:1)}const DA=t=>si(t,e=>su(t.state,e,!rs(t))),$A=t=>si(t,e=>su(t.state,e,rs(t)));function wy(t,e){return si(t,s=>{if(!s.empty)return tu(s,e);let i=t.moveVertically(s,e);return i.head!=s.head?i:t.moveToLineBoundary(s,e)})}const _y=t=>wy(t,!1),Sy=t=>wy(t,!0);function Cy(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,s=0,i=0,n;if(e){for(let o of t.state.facet(Oe.scrollMargins)){let r=o(t);r?.top&&(s=Math.max(r?.top,s)),r?.bottom&&(i=Math.max(r?.bottom,i))}n=t.scrollDOM.clientHeight-s-i}else n=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:s,marginBottom:i,selfScroll:e,height:Math.max(t.defaultLineHeight,n-5)}}function Ay(t,e){let s=Cy(t),{state:i}=t,n=Eo(i.selection,r=>r.empty?t.moveVertically(r,e,s.height):tu(r,e));if(n.eq(i.selection))return!1;let o;if(s.selfScroll){let r=t.coordsAtPos(i.selection.main.head),l=t.scrollDOM.getBoundingClientRect(),a=l.top+s.marginTop,d=l.bottom-s.marginBottom;r&&r.top>a&&r.bottom<d&&(o=Oe.scrollIntoView(n.main.head,{y:"start",yMargin:r.top-a}))}return t.dispatch(ti(i,n),{effects:o}),!0}const rm=t=>Ay(t,!1),rc=t=>Ay(t,!0);function hn(t,e,s){let i=t.lineBlockAt(e.head),n=t.moveToLineBoundary(e,s);if(n.head==e.head&&n.head!=(s?i.to:i.from)&&(n=t.moveToLineBoundary(e,s,!1)),!s&&n.head==i.from&&i.length){let o=/^\s*/.exec(t.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;o&&e.head!=i.from+o&&(n=ue.cursor(i.from+o))}return n}const TA=t=>si(t,e=>hn(t,e,!0)),EA=t=>si(t,e=>hn(t,e,!1)),OA=t=>si(t,e=>hn(t,e,!rs(t))),PA=t=>si(t,e=>hn(t,e,rs(t))),LA=t=>si(t,e=>ue.cursor(t.lineBlockAt(e.head).from,1)),jA=t=>si(t,e=>ue.cursor(t.lineBlockAt(e.head).to,-1));function RA(t,e,s){let i=!1,n=Eo(t.selection,o=>{let r=vi(t,o.head,-1)||vi(t,o.head,1)||o.head>0&&vi(t,o.head-1,1)||o.head<t.doc.length&&vi(t,o.head+1,-1);if(!r||!r.end)return o;i=!0;let l=r.start.from==o.head?r.end.to:r.end.from;return ue.cursor(l)});return i?(e(ti(t,n)),!0):!1}const BA=({state:t,dispatch:e})=>RA(t,e);function Hs(t,e){let s=Eo(t.state.selection,i=>{let n=e(i);return ue.range(i.anchor,n.head,n.goalColumn,n.bidiLevel||void 0)});return s.eq(t.state.selection)?!1:(t.dispatch(ti(t.state,s)),!0)}function Vy(t,e){return Hs(t,s=>t.moveByChar(s,e))}const My=t=>Vy(t,!rs(t)),Dy=t=>Vy(t,rs(t));function $y(t,e){return Hs(t,s=>t.moveByGroup(s,e))}const IA=t=>$y(t,!rs(t)),UA=t=>$y(t,rs(t)),NA=t=>Hs(t,e=>su(t.state,e,!rs(t))),zA=t=>Hs(t,e=>su(t.state,e,rs(t)));function Ty(t,e){return Hs(t,s=>t.moveVertically(s,e))}const Ey=t=>Ty(t,!1),Oy=t=>Ty(t,!0);function Py(t,e){return Hs(t,s=>t.moveVertically(s,e,Cy(t).height))}const lm=t=>Py(t,!1),am=t=>Py(t,!0),FA=t=>Hs(t,e=>hn(t,e,!0)),HA=t=>Hs(t,e=>hn(t,e,!1)),WA=t=>Hs(t,e=>hn(t,e,!rs(t))),qA=t=>Hs(t,e=>hn(t,e,rs(t))),KA=t=>Hs(t,e=>ue.cursor(t.lineBlockAt(e.head).from)),GA=t=>Hs(t,e=>ue.cursor(t.lineBlockAt(e.head).to)),um=({state:t,dispatch:e})=>(e(ti(t,{anchor:0})),!0),dm=({state:t,dispatch:e})=>(e(ti(t,{anchor:t.doc.length})),!0),cm=({state:t,dispatch:e})=>(e(ti(t,{anchor:t.selection.main.anchor,head:0})),!0),fm=({state:t,dispatch:e})=>(e(ti(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),JA=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),YA=({state:t,dispatch:e})=>{let s=iu(t).map(({from:i,to:n})=>ue.range(i,Math.min(n+1,t.doc.length)));return e(t.update({selection:ue.create(s),userEvent:"select"})),!0},QA=({state:t,dispatch:e})=>{let s=Eo(t.selection,i=>{let n=os(t),o=n.resolveStack(i.from,1);if(i.empty){let r=n.resolveStack(i.from,-1);r.node.from>=o.node.from&&r.node.to<=o.node.to&&(o=r)}for(let r=o;r;r=r.next){let{node:l}=r;if((l.from<i.from&&l.to>=i.to||l.to>i.to&&l.from<=i.from)&&r.next)return ue.range(l.to,l.from)}return i});return s.eq(t.selection)?!1:(e(ti(t,s)),!0)};function Ly(t,e){let{state:s}=t,i=s.selection,n=s.selection.ranges.slice();for(let o of s.selection.ranges){let r=s.doc.lineAt(o.head);if(e?r.to<t.state.doc.length:r.from>0)for(let l=o;;){let a=t.moveVertically(l,e);if(a.head<r.from||a.head>r.to){n.some(d=>d.head==a.head)||n.push(a);break}else{if(a.head==l.head)break;l=a}}}return n.length==i.ranges.length?!1:(t.dispatch(ti(s,ue.create(n,n.length-1))),!0)}const XA=t=>Ly(t,!1),ZA=t=>Ly(t,!0),e8=({state:t,dispatch:e})=>{let s=t.selection,i=null;return s.ranges.length>1?i=ue.create([s.main]):s.main.empty||(i=ue.create([ue.cursor(s.main.head)])),i?(e(ti(t,i)),!0):!1};function Yr(t,e){if(t.state.readOnly)return!1;let s="delete.selection",{state:i}=t,n=i.changeByRange(o=>{let{from:r,to:l}=o;if(r==l){let a=e(o);a<r?(s="delete.backward",a=Tl(t,a,!1)):a>r&&(s="delete.forward",a=Tl(t,a,!0)),r=Math.min(r,a),l=Math.max(l,a)}else r=Tl(t,r,!1),l=Tl(t,l,!0);return r==l?{range:o}:{changes:{from:r,to:l},range:ue.cursor(r,r<o.head?-1:1)}});return n.changes.empty?!1:(t.dispatch(i.update(n,{scrollIntoView:!0,userEvent:s,effects:s=="delete.selection"?Oe.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function Tl(t,e,s){if(t instanceof Oe)for(let i of t.state.facet(Oe.atomicRanges).map(n=>n(t)))i.between(e,e,(n,o)=>{n<e&&o>e&&(e=s?o:n)});return e}const jy=(t,e,s)=>Yr(t,i=>{let n=i.from,{state:o}=t,r=o.doc.lineAt(n),l,a;if(s&&!e&&n>r.from&&n<r.from+200&&!/[^ \t]/.test(l=r.text.slice(0,n-r.from))){if(l[l.length-1]=="	")return n-1;let d=To(l,o.tabSize),u=d%Nn(o)||Nn(o);for(let f=0;f<u&&l[l.length-1-f]==" ";f++)n--;a=n}else a=Jt(r.text,n-r.from,e,e)+r.from,a==n&&r.number!=(e?o.doc.lines:1)?a+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(r.text.slice(a-r.from,n-r.from))&&(a=Jt(r.text,a-r.from,!1,!1)+r.from);return a}),lc=t=>jy(t,!1,!0),Ry=t=>jy(t,!0,!1),By=(t,e)=>Yr(t,s=>{let i=s.head,{state:n}=t,o=n.doc.lineAt(i),r=n.charCategorizer(i);for(let l=null;;){if(i==(e?o.to:o.from)){i==s.head&&o.number!=(e?n.doc.lines:1)&&(i+=e?1:-1);break}let a=Jt(o.text,i-o.from,e)+o.from,d=o.text.slice(Math.min(i,a)-o.from,Math.max(i,a)-o.from),u=r(d);if(l!=null&&u!=l)break;(d!=" "||i!=s.head)&&(l=u),i=a}return i}),Iy=t=>By(t,!1),t8=t=>By(t,!0),s8=t=>Yr(t,e=>{let s=t.lineBlockAt(e.head).to;return e.head<s?s:Math.min(t.state.doc.length,e.head+1)}),i8=t=>Yr(t,e=>{let s=t.moveToLineBoundary(e,!1).head;return e.head>s?s:Math.max(0,e.head-1)}),n8=t=>Yr(t,e=>{let s=t.moveToLineBoundary(e,!0).head;return e.head<s?s:Math.min(t.state.doc.length,e.head+1)}),o8=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let s=t.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:st.of(["",""])},range:ue.cursor(i.from)}));return e(t.update(s,{scrollIntoView:!0,userEvent:"input"})),!0},r8=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let s=t.changeByRange(i=>{if(!i.empty||i.from==0||i.from==t.doc.length)return{range:i};let n=i.from,o=t.doc.lineAt(n),r=n==o.from?n-1:Jt(o.text,n-o.from,!1)+o.from,l=n==o.to?n+1:Jt(o.text,n-o.from,!0)+o.from;return{changes:{from:r,to:l,insert:t.doc.slice(n,l).append(t.doc.slice(r,n))},range:ue.cursor(l)}});return s.changes.empty?!1:(e(t.update(s,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function iu(t){let e=[],s=-1;for(let i of t.selection.ranges){let n=t.doc.lineAt(i.from),o=t.doc.lineAt(i.to);if(!i.empty&&i.to==o.from&&(o=t.doc.lineAt(i.to-1)),s>=n.number){let r=e[e.length-1];r.to=o.to,r.ranges.push(i)}else e.push({from:n.from,to:o.to,ranges:[i]});s=o.number+1}return e}function Uy(t,e,s){if(t.readOnly)return!1;let i=[],n=[];for(let o of iu(t)){if(s?o.to==t.doc.length:o.from==0)continue;let r=t.doc.lineAt(s?o.to+1:o.from-1),l=r.length+1;if(s){i.push({from:o.to,to:r.to},{from:o.from,insert:r.text+t.lineBreak});for(let a of o.ranges)n.push(ue.range(Math.min(t.doc.length,a.anchor+l),Math.min(t.doc.length,a.head+l)))}else{i.push({from:r.from,to:o.from},{from:o.to,insert:t.lineBreak+r.text});for(let a of o.ranges)n.push(ue.range(a.anchor-l,a.head-l))}}return i.length?(e(t.update({changes:i,scrollIntoView:!0,selection:ue.create(n,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const l8=({state:t,dispatch:e})=>Uy(t,e,!1),a8=({state:t,dispatch:e})=>Uy(t,e,!0);function Ny(t,e,s){if(t.readOnly)return!1;let i=[];for(let n of iu(t))s?i.push({from:n.from,insert:t.doc.slice(n.from,n.to)+t.lineBreak}):i.push({from:n.to,insert:t.lineBreak+t.doc.slice(n.from,n.to)});return e(t.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const u8=({state:t,dispatch:e})=>Ny(t,e,!1),d8=({state:t,dispatch:e})=>Ny(t,e,!0),c8=t=>{if(t.state.readOnly)return!1;let{state:e}=t,s=e.changes(iu(e).map(({from:n,to:o})=>(n>0?n--:o<e.doc.length&&o++,{from:n,to:o}))),i=Eo(e.selection,n=>{let o;if(t.lineWrapping){let r=t.lineBlockAt(n.head),l=t.coordsAtPos(n.head,n.assoc||1);l&&(o=r.bottom+t.documentTop-l.bottom+t.defaultLineHeight/2)}return t.moveVertically(n,!0,o)}).map(s);return t.dispatch({changes:s,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function f8(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let s=os(t).resolveInner(e),i=s.childBefore(e),n=s.childAfter(e),o;return i&&n&&i.to<=e&&n.from>=e&&(o=i.type.prop(Ye.closedBy))&&o.indexOf(n.name)>-1&&t.doc.lineAt(i.to).from==t.doc.lineAt(n.from).from&&!/\S/.test(t.sliceDoc(i.to,n.from))?{from:i.to,to:n.from}:null}const hm=zy(!1),h8=zy(!0);function zy(t){return({state:e,dispatch:s})=>{if(e.readOnly)return!1;let i=e.changeByRange(n=>{let{from:o,to:r}=n,l=e.doc.lineAt(o),a=!t&&o==r&&f8(e,o);t&&(o=r=(r<=l.to?l:e.doc.lineAt(r)).to);let d=new Xa(e,{simulateBreak:o,simulateDoubleBreak:!!a}),u=sf(d,o);for(u==null&&(u=To(/^\s*/.exec(e.doc.lineAt(o).text)[0],e.tabSize));r<l.to&&/\s/.test(l.text[r-l.from]);)r++;a?{from:o,to:r}=a:o>l.from&&o<l.from+100&&!/\S/.test(l.text.slice(0,o))&&(o=l.from);let f=["",Pr(e,u)];return a&&f.push(Pr(e,d.lineIndent(l.from,-1))),{changes:{from:o,to:r,insert:st.of(f)},range:ue.cursor(o+1+f[1].length)}});return s(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function df(t,e){let s=-1;return t.changeByRange(i=>{let n=[];for(let r=i.from;r<=i.to;){let l=t.doc.lineAt(r);l.number>s&&(i.empty||i.to>l.from)&&(e(l,n,i),s=l.number),r=l.to+1}let o=t.changes(n);return{changes:n,range:ue.range(o.mapPos(i.anchor,1),o.mapPos(i.head,1))}})}const p8=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let s=Object.create(null),i=new Xa(t,{overrideIndentation:o=>{let r=s[o];return r??-1}}),n=df(t,(o,r,l)=>{let a=sf(i,o.from);if(a==null)return;/\S/.test(o.text)||(a=0);let d=/^\s*/.exec(o.text)[0],u=Pr(t,a);(d!=u||l.from<o.from+d.length)&&(s[o.from]=a,r.push({from:o.from,to:o.from+d.length,insert:u}))});return n.changes.empty||e(t.update(n,{userEvent:"indent"})),!0},m8=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(df(t,(s,i)=>{i.push({from:s.from,insert:t.facet(tf)})}),{userEvent:"input.indent"})),!0),g8=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(df(t,(s,i)=>{let n=/^\s*/.exec(s.text)[0];if(!n)return;let o=To(n,t.tabSize),r=0,l=Pr(t,Math.max(0,o-Nn(t)));for(;r<n.length&&r<l.length&&n.charCodeAt(r)==l.charCodeAt(r);)r++;i.push({from:s.from+r,to:s.from+n.length,insert:l.slice(r)})}),{userEvent:"delete.dedent"})),!0),v8=t=>(t.setTabFocusMode(),!0),y8=[{key:"Ctrl-b",run:by,shift:My,preventDefault:!0},{key:"Ctrl-f",run:ky,shift:Dy},{key:"Ctrl-p",run:_y,shift:Ey},{key:"Ctrl-n",run:Sy,shift:Oy},{key:"Ctrl-a",run:LA,shift:KA},{key:"Ctrl-e",run:jA,shift:GA},{key:"Ctrl-d",run:Ry},{key:"Ctrl-h",run:lc},{key:"Ctrl-k",run:s8},{key:"Ctrl-Alt-h",run:Iy},{key:"Ctrl-o",run:o8},{key:"Ctrl-t",run:r8},{key:"Ctrl-v",run:rc}],b8=[{key:"ArrowLeft",run:by,shift:My,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:AA,shift:IA,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:OA,shift:WA,preventDefault:!0},{key:"ArrowRight",run:ky,shift:Dy,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:VA,shift:UA,preventDefault:!0},{mac:"Cmd-ArrowRight",run:PA,shift:qA,preventDefault:!0},{key:"ArrowUp",run:_y,shift:Ey,preventDefault:!0},{mac:"Cmd-ArrowUp",run:um,shift:cm},{mac:"Ctrl-ArrowUp",run:rm,shift:lm},{key:"ArrowDown",run:Sy,shift:Oy,preventDefault:!0},{mac:"Cmd-ArrowDown",run:dm,shift:fm},{mac:"Ctrl-ArrowDown",run:rc,shift:am},{key:"PageUp",run:rm,shift:lm},{key:"PageDown",run:rc,shift:am},{key:"Home",run:EA,shift:HA,preventDefault:!0},{key:"Mod-Home",run:um,shift:cm},{key:"End",run:TA,shift:FA,preventDefault:!0},{key:"Mod-End",run:dm,shift:fm},{key:"Enter",run:hm,shift:hm},{key:"Mod-a",run:JA},{key:"Backspace",run:lc,shift:lc,preventDefault:!0},{key:"Delete",run:Ry,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Iy,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:t8,preventDefault:!0},{mac:"Mod-Backspace",run:i8,preventDefault:!0},{mac:"Mod-Delete",run:n8,preventDefault:!0}].concat(y8.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),k8=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:DA,shift:NA},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:$A,shift:zA},{key:"Alt-ArrowUp",run:l8},{key:"Shift-Alt-ArrowUp",run:u8},{key:"Alt-ArrowDown",run:a8},{key:"Shift-Alt-ArrowDown",run:d8},{key:"Mod-Alt-ArrowUp",run:XA},{key:"Mod-Alt-ArrowDown",run:ZA},{key:"Escape",run:e8},{key:"Mod-Enter",run:h8},{key:"Alt-l",mac:"Ctrl-l",run:YA},{key:"Mod-i",run:QA,preventDefault:!0},{key:"Mod-[",run:g8},{key:"Mod-]",run:m8},{key:"Mod-Alt-\\",run:p8},{key:"Shift-Mod-k",run:c8},{key:"Shift-Mod-\\",run:BA},{key:"Mod-/",run:lA},{key:"Alt-A",run:uA},{key:"Ctrl-m",mac:"Shift-Alt-m",run:v8}].concat(b8),pm=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class Co{constructor(e,s,i=0,n=e.length,o,r){this.test=r,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,n),this.bufferStart=i,this.normalize=o?l=>o(pm(l)):pm,this.query=this.normalize(s)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return ys(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let s=Lc(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=pi(e);let n=this.normalize(s);if(n.length)for(let o=0,r=i;;o++){let l=n.charCodeAt(o),a=this.match(l,r,this.bufferPos+this.bufferStart);if(o==n.length-1){if(a)return this.value=a,this;break}r==i&&o<s.length&&s.charCodeAt(o)==l&&r++}}}match(e,s,i){let n=null;for(let o=0;o<this.matches.length;o+=2){let r=this.matches[o],l=!1;this.query.charCodeAt(r)==e&&(r==this.query.length-1?n={from:this.matches[o+1],to:i}:(this.matches[o]++,l=!0)),l||(this.matches.splice(o,2),o-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?n={from:s,to:i}:this.matches.push(1,s)),n&&this.test&&!this.test(n.from,n.to,this.buffer,this.bufferStart)&&(n=null),n}}typeof Symbol<"u"&&(Co.prototype[Symbol.iterator]=function(){return this});const Fy={from:-1,to:-1,match:/.*/.exec("")},cf="gm"+(/x/.unicode==null?"":"u");class Hy{constructor(e,s,i,n=0,o=e.length){if(this.text=e,this.to=o,this.curLine="",this.done=!1,this.value=Fy,/\\[sWDnr]|\n|\r|\[\^/.test(s))return new Wy(e,s,i,n,o);this.re=new RegExp(s,cf+(i?.ignoreCase?"i":"")),this.test=i?.test,this.iter=e.iter();let r=e.lineAt(n);this.curLineStart=r.from,this.matchPos=wa(e,n),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let s=this.matchPos<=this.to&&this.re.exec(this.curLine);if(s){let i=this.curLineStart+s.index,n=i+s[0].length;if(this.matchPos=wa(this.text,n+(i==n?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<n||i>this.value.to)&&(!this.test||this.test(i,n,s)))return this.value={from:i,to:n,match:s},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const Hu=new WeakMap;class ho{constructor(e,s){this.from=e,this.text=s}get to(){return this.from+this.text.length}static get(e,s,i){let n=Hu.get(e);if(!n||n.from>=i||n.to<=s){let l=new ho(s,e.sliceString(s,i));return Hu.set(e,l),l}if(n.from==s&&n.to==i)return n;let{text:o,from:r}=n;return r>s&&(o=e.sliceString(s,r)+o,r=s),n.to<i&&(o+=e.sliceString(n.to,i)),Hu.set(e,new ho(r,o)),new ho(s,o.slice(s-r,i-r))}}class Wy{constructor(e,s,i,n,o){this.text=e,this.to=o,this.done=!1,this.value=Fy,this.matchPos=wa(e,n),this.re=new RegExp(s,cf+(i?.ignoreCase?"i":"")),this.test=i?.test,this.flat=ho.get(e,n,this.chunkEnd(n+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,s=this.re.exec(this.flat.text);if(s&&!s[0]&&s.index==e&&(this.re.lastIndex=e+1,s=this.re.exec(this.flat.text)),s){let i=this.flat.from+s.index,n=i+s[0].length;if((this.flat.to>=this.to||s.index+s[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,n,s)))return this.value={from:i,to:n,match:s},this.matchPos=wa(this.text,n+(i==n?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=ho.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(Hy.prototype[Symbol.iterator]=Wy.prototype[Symbol.iterator]=function(){return this});function x8(t){try{return new RegExp(t,cf),!0}catch{return!1}}function wa(t,e){if(e>=t.length)return e;let s=t.lineAt(e),i;for(;e<s.to&&(i=s.text.charCodeAt(e-s.from))>=56320&&i<57344;)e++;return e}function ac(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),s=ft("input",{class:"cm-textfield",name:"line",value:e}),i=ft("form",{class:"cm-gotoLine",onkeydown:o=>{o.keyCode==27?(o.preventDefault(),t.dispatch({effects:fr.of(!1)}),t.focus()):o.keyCode==13&&(o.preventDefault(),n())},onsubmit:o=>{o.preventDefault(),n()}},ft("label",t.state.phrase("Go to line"),": ",s)," ",ft("button",{class:"cm-button",type:"submit"},t.state.phrase("go")),ft("button",{name:"close",onclick:()=>{t.dispatch({effects:fr.of(!1)}),t.focus()},"aria-label":t.state.phrase("close"),type:"button"},[""]));function n(){let o=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(s.value);if(!o)return;let{state:r}=t,l=r.doc.lineAt(r.selection.main.head),[,a,d,u,f]=o,h=u?+u.slice(1):0,m=d?+d:l.number;if(d&&f){let C=m/100;a&&(C=C*(a=="-"?-1:1)+l.number/r.doc.lines),m=Math.round(r.doc.lines*C)}else d&&a&&(m=m*(a=="-"?-1:1)+l.number);let w=r.doc.line(Math.max(1,Math.min(r.doc.lines,m))),p=ue.cursor(w.from+Math.max(0,Math.min(h,w.length)));t.dispatch({effects:[fr.of(!1),Oe.scrollIntoView(p.from,{y:"center"})],selection:p}),t.focus()}return{dom:i}}const fr=Ke.define(),mm=Yt.define({create(){return!0},update(t,e){for(let s of e.effects)s.is(fr)&&(t=s.value);return t},provide:t=>Tr.from(t,e=>e?ac:null)}),w8=t=>{let e=$r(t,ac);if(!e){let s=[fr.of(!0)];t.state.field(mm,!1)==null&&s.push(Ke.appendConfig.of([mm,_8])),t.dispatch({effects:s}),e=$r(t,ac)}return e&&e.dom.querySelector("input").select(),!0},_8=Oe.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),S8={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},C8=Le.define({combine(t){return wi(t,S8,{highlightWordAroundCursor:(e,s)=>e||s,minSelectionLength:Math.min,maxMatches:Math.min})}});function A8(t){return[T8,$8]}const V8=He.mark({class:"cm-selectionMatch"}),M8=He.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function gm(t,e,s,i){return(s==0||t(e.sliceDoc(s-1,s))!=wt.Word)&&(i==e.doc.length||t(e.sliceDoc(i,i+1))!=wt.Word)}function D8(t,e,s,i){return t(e.sliceDoc(s,s+1))==wt.Word&&t(e.sliceDoc(i-1,i))==wt.Word}const $8=Ot.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.selectionSet||t.docChanged||t.viewportChanged)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=t.state.facet(C8),{state:s}=t,i=s.selection;if(i.ranges.length>1)return He.none;let n=i.main,o,r=null;if(n.empty){if(!e.highlightWordAroundCursor)return He.none;let a=s.wordAt(n.head);if(!a)return He.none;r=s.charCategorizer(n.head),o=s.sliceDoc(a.from,a.to)}else{let a=n.to-n.from;if(a<e.minSelectionLength||a>200)return He.none;if(e.wholeWords){if(o=s.sliceDoc(n.from,n.to),r=s.charCategorizer(n.head),!(gm(r,s,n.from,n.to)&&D8(r,s,n.from,n.to)))return He.none}else if(o=s.sliceDoc(n.from,n.to),!o)return He.none}let l=[];for(let a of t.visibleRanges){let d=new Co(s.doc,o,a.from,a.to);for(;!d.next().done;){let{from:u,to:f}=d.value;if((!r||gm(r,s,u,f))&&(n.empty&&u<=n.from&&f>=n.to?l.push(M8.range(u,f)):(u>=n.to||f<=n.from)&&l.push(V8.range(u,f)),l.length>e.maxMatches))return He.none}}return He.set(l)}},{decorations:t=>t.decorations}),T8=Oe.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),E8=({state:t,dispatch:e})=>{let{selection:s}=t,i=ue.create(s.ranges.map(n=>t.wordAt(n.head)||ue.cursor(n.head)),s.mainIndex);return i.eq(s)?!1:(e(t.update({selection:i})),!0)};function O8(t,e){let{main:s,ranges:i}=t.selection,n=t.wordAt(s.head),o=n&&n.from==s.from&&n.to==s.to;for(let r=!1,l=new Co(t.doc,e,i[i.length-1].to);;)if(l.next(),l.done){if(r)return null;l=new Co(t.doc,e,0,Math.max(0,i[i.length-1].from-1)),r=!0}else{if(r&&i.some(a=>a.from==l.value.from))continue;if(o){let a=t.wordAt(l.value.from);if(!a||a.from!=l.value.from||a.to!=l.value.to)continue}return l.value}}const P8=({state:t,dispatch:e})=>{let{ranges:s}=t.selection;if(s.some(o=>o.from===o.to))return E8({state:t,dispatch:e});let i=t.sliceDoc(s[0].from,s[0].to);if(t.selection.ranges.some(o=>t.sliceDoc(o.from,o.to)!=i))return!1;let n=O8(t,i);return n?(e(t.update({selection:t.selection.addRange(ue.range(n.from,n.to),!1),effects:Oe.scrollIntoView(n.to)})),!0):!1},Oo=Le.define({combine(t){return wi(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new q8(e),scrollToMatch:e=>Oe.scrollIntoView(e)})}});class qy{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||x8(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(s,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new B8(this):new j8(this)}getCursor(e,s=0,i){let n=e.doc?e:et.create({doc:e});return i==null&&(i=n.doc.length),this.regexp?Qn(this,n,s,i):Yn(this,n,s,i)}}class Ky{constructor(e){this.spec=e}}function Yn(t,e,s,i){return new Co(e.doc,t.unquoted,s,i,t.caseSensitive?void 0:n=>n.toLowerCase(),t.wholeWord?L8(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function L8(t,e){return(s,i,n,o)=>((o>s||o+n.length<i)&&(o=Math.max(0,s-2),n=t.sliceString(o,Math.min(t.length,i+2))),(e(_a(n,s-o))!=wt.Word||e(Sa(n,s-o))!=wt.Word)&&(e(Sa(n,i-o))!=wt.Word||e(_a(n,i-o))!=wt.Word))}class j8 extends Ky{constructor(e){super(e)}nextMatch(e,s,i){let n=Yn(this.spec,e,i,e.doc.length).nextOverlapping();if(n.done){let o=Math.min(e.doc.length,s+this.spec.unquoted.length);n=Yn(this.spec,e,0,o).nextOverlapping()}return n.done||n.value.from==s&&n.value.to==i?null:n.value}prevMatchInRange(e,s,i){for(let n=i;;){let o=Math.max(s,n-1e4-this.spec.unquoted.length),r=Yn(this.spec,e,o,n),l=null;for(;!r.nextOverlapping().done;)l=r.value;if(l)return l;if(o==s)return null;n-=1e4}}prevMatch(e,s,i){let n=this.prevMatchInRange(e,0,s);return n||(n=this.prevMatchInRange(e,Math.max(0,i-this.spec.unquoted.length),e.doc.length)),n&&(n.from!=s||n.to!=i)?n:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,s){let i=Yn(this.spec,e,0,e.doc.length),n=[];for(;!i.next().done;){if(n.length>=s)return null;n.push(i.value)}return n}highlight(e,s,i,n){let o=Yn(this.spec,e,Math.max(0,s-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!o.next().done;)n(o.value.from,o.value.to)}}function Qn(t,e,s,i){return new Hy(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?R8(e.charCategorizer(e.selection.main.head)):void 0},s,i)}function _a(t,e){return t.slice(Jt(t,e,!1),e)}function Sa(t,e){return t.slice(e,Jt(t,e))}function R8(t){return(e,s,i)=>!i[0].length||(t(_a(i.input,i.index))!=wt.Word||t(Sa(i.input,i.index))!=wt.Word)&&(t(Sa(i.input,i.index+i[0].length))!=wt.Word||t(_a(i.input,i.index+i[0].length))!=wt.Word)}class B8 extends Ky{nextMatch(e,s,i){let n=Qn(this.spec,e,i,e.doc.length).next();return n.done&&(n=Qn(this.spec,e,0,s).next()),n.done?null:n.value}prevMatchInRange(e,s,i){for(let n=1;;n++){let o=Math.max(s,i-n*1e4),r=Qn(this.spec,e,o,i),l=null;for(;!r.next().done;)l=r.value;if(l&&(o==s||l.from>o+10))return l;if(o==s)return null}}prevMatch(e,s,i){return this.prevMatchInRange(e,0,s)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(s,i)=>{if(i=="&")return e.match[0];if(i=="$")return"$";for(let n=i.length;n>0;n--){let o=+i.slice(0,n);if(o>0&&o<e.match.length)return e.match[o]+i.slice(n)}return s})}matchAll(e,s){let i=Qn(this.spec,e,0,e.doc.length),n=[];for(;!i.next().done;){if(n.length>=s)return null;n.push(i.value)}return n}highlight(e,s,i,n){let o=Qn(this.spec,e,Math.max(0,s-250),Math.min(i+250,e.doc.length));for(;!o.next().done;)n(o.value.from,o.value.to)}}const jr=Ke.define(),ff=Ke.define(),sn=Yt.define({create(t){return new Wu(uc(t).create(),null)},update(t,e){for(let s of e.effects)s.is(jr)?t=new Wu(s.value.create(),t.panel):s.is(ff)&&(t=new Wu(t.query,s.value?hf:null));return t},provide:t=>Tr.from(t,e=>e.panel)});class Wu{constructor(e,s){this.query=e,this.panel=s}}const I8=He.mark({class:"cm-searchMatch"}),U8=He.mark({class:"cm-searchMatch cm-searchMatch-selected"}),N8=Ot.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(sn))}update(t){let e=t.state.field(sn);(e!=t.startState.field(sn)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return He.none;let{view:s}=this,i=new Ri;for(let n=0,o=s.visibleRanges,r=o.length;n<r;n++){let{from:l,to:a}=o[n];for(;n<r-1&&a>o[n+1].from-500;)a=o[++n].to;t.highlight(s.state,l,a,(d,u)=>{let f=s.state.selection.ranges.some(h=>h.from==d&&h.to==u);i.add(d,u,f?U8:I8)})}return i.finish()}},{decorations:t=>t.decorations});function Qr(t){return e=>{let s=e.state.field(sn,!1);return s&&s.query.spec.valid?t(e,s):Yy(e)}}const Ca=Qr((t,{query:e})=>{let{to:s}=t.state.selection.main,i=e.nextMatch(t.state,s,s);if(!i)return!1;let n=ue.single(i.from,i.to),o=t.state.facet(Oo);return t.dispatch({selection:n,effects:[pf(t,i),o.scrollToMatch(n.main,t)],userEvent:"select.search"}),Jy(t),!0}),Aa=Qr((t,{query:e})=>{let{state:s}=t,{from:i}=s.selection.main,n=e.prevMatch(s,i,i);if(!n)return!1;let o=ue.single(n.from,n.to),r=t.state.facet(Oo);return t.dispatch({selection:o,effects:[pf(t,n),r.scrollToMatch(o.main,t)],userEvent:"select.search"}),Jy(t),!0}),z8=Qr((t,{query:e})=>{let s=e.matchAll(t.state,1e3);return!s||!s.length?!1:(t.dispatch({selection:ue.create(s.map(i=>ue.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),F8=({state:t,dispatch:e})=>{let s=t.selection;if(s.ranges.length>1||s.main.empty)return!1;let{from:i,to:n}=s.main,o=[],r=0;for(let l=new Co(t.doc,t.sliceDoc(i,n));!l.next().done;){if(o.length>1e3)return!1;l.value.from==i&&(r=o.length),o.push(ue.range(l.value.from,l.value.to))}return e(t.update({selection:ue.create(o,r),userEvent:"select.search.matches"})),!0},vm=Qr((t,{query:e})=>{let{state:s}=t,{from:i,to:n}=s.selection.main;if(s.readOnly)return!1;let o=e.nextMatch(s,i,i);if(!o)return!1;let r=o,l=[],a,d,u=[];r.from==i&&r.to==n&&(d=s.toText(e.getReplacement(r)),l.push({from:r.from,to:r.to,insert:d}),r=e.nextMatch(s,r.from,r.to),u.push(Oe.announce.of(s.phrase("replaced match on line $",s.doc.lineAt(i).number)+".")));let f=t.state.changes(l);return r&&(a=ue.single(r.from,r.to).map(f),u.push(pf(t,r)),u.push(s.facet(Oo).scrollToMatch(a.main,t))),t.dispatch({changes:f,selection:a,effects:u,userEvent:"input.replace"}),!0}),H8=Qr((t,{query:e})=>{if(t.state.readOnly)return!1;let s=e.matchAll(t.state,1e9).map(n=>{let{from:o,to:r}=n;return{from:o,to:r,insert:e.getReplacement(n)}});if(!s.length)return!1;let i=t.state.phrase("replaced $ matches",s.length)+".";return t.dispatch({changes:s,effects:Oe.announce.of(i),userEvent:"input.replace.all"}),!0});function hf(t){return t.state.facet(Oo).createPanel(t)}function uc(t,e){var s,i,n,o,r;let l=t.selection.main,a=l.empty||l.to>l.from+100?"":t.sliceDoc(l.from,l.to);if(e&&!a)return e;let d=t.facet(Oo);return new qy({search:((s=e?.literal)!==null&&s!==void 0?s:d.literal)?a:a.replace(/\n/g,"\\n"),caseSensitive:(i=e?.caseSensitive)!==null&&i!==void 0?i:d.caseSensitive,literal:(n=e?.literal)!==null&&n!==void 0?n:d.literal,regexp:(o=e?.regexp)!==null&&o!==void 0?o:d.regexp,wholeWord:(r=e?.wholeWord)!==null&&r!==void 0?r:d.wholeWord})}function Gy(t){let e=$r(t,hf);return e&&e.dom.querySelector("[main-field]")}function Jy(t){let e=Gy(t);e&&e==t.root.activeElement&&e.select()}const Yy=t=>{let e=t.state.field(sn,!1);if(e&&e.panel){let s=Gy(t);if(s&&s!=t.root.activeElement){let i=uc(t.state,e.query.spec);i.valid&&t.dispatch({effects:jr.of(i)}),s.focus(),s.select()}}else t.dispatch({effects:[ff.of(!0),e?jr.of(uc(t.state,e.query.spec)):Ke.appendConfig.of(G8)]});return!0},Qy=t=>{let e=t.state.field(sn,!1);if(!e||!e.panel)return!1;let s=$r(t,hf);return s&&s.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:ff.of(!1)}),!0},W8=[{key:"Mod-f",run:Yy,scope:"editor search-panel"},{key:"F3",run:Ca,shift:Aa,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Ca,shift:Aa,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Qy,scope:"editor search-panel"},{key:"Mod-Shift-l",run:F8},{key:"Mod-Alt-g",run:w8},{key:"Mod-d",run:P8,preventDefault:!0}];class q8{constructor(e){this.view=e;let s=this.query=e.state.field(sn).query.spec;this.commit=this.commit.bind(this),this.searchField=ft("input",{value:s.search,placeholder:As(e,"Find"),"aria-label":As(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=ft("input",{value:s.replace,placeholder:As(e,"Replace"),"aria-label":As(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=ft("input",{type:"checkbox",name:"case",form:"",checked:s.caseSensitive,onchange:this.commit}),this.reField=ft("input",{type:"checkbox",name:"re",form:"",checked:s.regexp,onchange:this.commit}),this.wordField=ft("input",{type:"checkbox",name:"word",form:"",checked:s.wholeWord,onchange:this.commit});function i(n,o,r){return ft("button",{class:"cm-button",name:n,onclick:o,type:"button"},r)}this.dom=ft("div",{onkeydown:n=>this.keydown(n),class:"cm-search"},[this.searchField,i("next",()=>Ca(e),[As(e,"next")]),i("prev",()=>Aa(e),[As(e,"previous")]),i("select",()=>z8(e),[As(e,"all")]),ft("label",null,[this.caseField,As(e,"match case")]),ft("label",null,[this.reField,As(e,"regexp")]),ft("label",null,[this.wordField,As(e,"by word")]),...e.state.readOnly?[]:[ft("br"),this.replaceField,i("replace",()=>vm(e),[As(e,"replace")]),i("replaceAll",()=>H8(e),[As(e,"replace all")])],ft("button",{name:"close",onclick:()=>Qy(e),"aria-label":As(e,"close"),type:"button"},[""])])}commit(){let e=new qy({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:jr.of(e)}))}keydown(e){GC(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Aa:Ca)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),vm(this.view))}update(e){for(let s of e.transactions)for(let i of s.effects)i.is(jr)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Oo).top}}function As(t,e){return t.state.phrase(e)}const El=30,Ol=/[\s\.,:;?!]/;function pf(t,{from:e,to:s}){let i=t.state.doc.lineAt(e),n=t.state.doc.lineAt(s).to,o=Math.max(i.from,e-El),r=Math.min(n,s+El),l=t.state.sliceDoc(o,r);if(o!=i.from){for(let a=0;a<El;a++)if(!Ol.test(l[a+1])&&Ol.test(l[a])){l=l.slice(a);break}}if(r!=n){for(let a=l.length-1;a>l.length-El;a--)if(!Ol.test(l[a-1])&&Ol.test(l[a])){l=l.slice(0,a);break}}return Oe.announce.of(`${t.state.phrase("current match")}. ${l} ${t.state.phrase("on line")} ${i.number}.`)}const K8=Oe.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),G8=[sn,Hn.low(N8),K8];class Xy{constructor(e,s,i,n){this.state=e,this.pos=s,this.explicit=i,this.view=n,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let s=os(this.state).resolveInner(this.pos,-1);for(;s&&e.indexOf(s.name)<0;)s=s.parent;return s?{from:s.from,to:this.pos,text:this.state.sliceDoc(s.from,this.pos),type:s.type}:null}matchBefore(e){let s=this.state.doc.lineAt(this.pos),i=Math.max(s.from,this.pos-250),n=s.text.slice(i-s.from,this.pos-s.from),o=n.search(Zy(e,!1));return o<0?null:{from:i+o,to:this.pos,text:n.slice(o)}}get aborted(){return this.abortListeners==null}addEventListener(e,s,i){e=="abort"&&this.abortListeners&&(this.abortListeners.push(s),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function ym(t){let e=Object.keys(t).join(""),s=/\w/.test(e);return s&&(e=e.replace(/\w/g,"")),`[${s?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function J8(t){let e=Object.create(null),s=Object.create(null);for(let{label:n}of t){e[n[0]]=!0;for(let o=1;o<n.length;o++)s[n[o]]=!0}let i=ym(e)+ym(s)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function Y8(t){let e=t.map(n=>typeof n=="string"?{label:n}:n),[s,i]=e.every(n=>/^\w+$/.test(n.label))?[/\w*$/,/\w+$/]:J8(e);return n=>{let o=n.matchBefore(i);return o||n.explicit?{from:o?o.from:n.pos,options:e,validFor:s}:null}}class bm{constructor(e,s,i,n){this.completion=e,this.source=s,this.match=i,this.score=n}}function Ln(t){return t.selection.main.from}function Zy(t,e){var s;let{source:i}=t,n=e&&i[0]!="^",o=i[i.length-1]!="$";return!n&&!o?t:new RegExp(`${n?"^":""}(?:${i})${o?"$":""}`,(s=t.flags)!==null&&s!==void 0?s:t.ignoreCase?"i":"")}const eb=Ni.define();function Q8(t,e,s,i){let{main:n}=t.selection,o=s-n.from,r=i-n.from;return{...t.changeByRange(l=>{if(l!=n&&s!=i&&t.sliceDoc(l.from+o,l.from+r)!=t.sliceDoc(s,i))return{range:l};let a=t.toText(e);return{changes:{from:l.from+o,to:i==n.from?l.to:l.from+r,insert:a},range:ue.cursor(l.from+o+a.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}const km=new WeakMap;function X8(t){if(!Array.isArray(t))return t;let e=km.get(t);return e||km.set(t,e=Y8(t)),e}const Va=Ke.define(),Rr=Ke.define();class Z8{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let s=0;s<e.length;){let i=ys(e,s),n=pi(i);this.chars.push(i);let o=e.slice(s,s+n),r=o.toUpperCase();this.folded.push(ys(r==o?o.toLowerCase():r,0)),s+=n}this.astral=e.length!=this.chars.length}ret(e,s){return this.score=e,this.matched=s,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:s,folded:i,any:n,precise:o,byWord:r}=this;if(s.length==1){let U=ys(e,0),B=pi(U),H=B==e.length?0:-100;if(U!=s[0])if(U==i[0])H+=-200;else return null;return this.ret(H,[0,B])}let l=e.indexOf(this.pattern);if(l==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let a=s.length,d=0;if(l<0){for(let U=0,B=Math.min(e.length,200);U<B&&d<a;){let H=ys(e,U);(H==s[d]||H==i[d])&&(n[d++]=U),U+=pi(H)}if(d<a)return null}let u=0,f=0,h=!1,m=0,w=-1,p=-1,C=/[a-z]/.test(e),V=!0;for(let U=0,B=Math.min(e.length,200),H=0;U<B&&f<a;){let j=ys(e,U);l<0&&(u<a&&j==s[u]&&(o[u++]=U),m<a&&(j==s[m]||j==i[m]?(m==0&&(w=U),p=U+1,m++):m=0));let T,A=j<255?j>=48&&j<=57||j>=97&&j<=122?2:j>=65&&j<=90?1:0:(T=Lc(j))!=T.toLowerCase()?1:T!=T.toUpperCase()?2:0;(!U||A==1&&C||H==0&&A!=0)&&(s[f]==j||i[f]==j&&(h=!0)?r[f++]=U:r.length&&(V=!1)),H=A,U+=pi(j)}return f==a&&r[0]==0&&V?this.result(-100+(h?-200:0),r,e):m==a&&w==0?this.ret(-200-e.length+(p==e.length?0:-100),[0,p]):l>-1?this.ret(-700-e.length,[l,l+this.pattern.length]):m==a?this.ret(-900-e.length,[w,p]):f==a?this.result(-100+(h?-200:0)+-700+(V?0:-1100),r,e):s.length==2?null:this.result((n[0]?-700:0)+-200+-1100,n,e)}result(e,s,i){let n=[],o=0;for(let r of s){let l=r+(this.astral?pi(ys(i,r)):1);o&&n[o-1]==r?n[o-1]=l:(n[o++]=r,n[o++]=l)}return this.ret(e-i.length,n)}}class e6{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let s=e.slice(0,this.pattern.length),i=s==this.pattern?0:s.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,s.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const Nt=Le.define({combine(t){return wi(t,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:t6,filterStrict:!1,compareCompletions:(e,s)=>e.label.localeCompare(s.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,s)=>e&&s,closeOnBlur:(e,s)=>e&&s,icons:(e,s)=>e&&s,tooltipClass:(e,s)=>i=>xm(e(i),s(i)),optionClass:(e,s)=>i=>xm(e(i),s(i)),addToOptions:(e,s)=>e.concat(s),filterStrict:(e,s)=>e||s})}});function xm(t,e){return t?e?t+" "+e:t:e}function t6(t,e,s,i,n,o){let r=t.textDirection==kt.RTL,l=r,a=!1,d="top",u,f,h=e.left-n.left,m=n.right-e.right,w=i.right-i.left,p=i.bottom-i.top;if(l&&h<Math.min(w,m)?l=!1:!l&&m<Math.min(w,h)&&(l=!0),w<=(l?h:m))u=Math.max(n.top,Math.min(s.top,n.bottom-p))-e.top,f=Math.min(400,l?h:m);else{a=!0,f=Math.min(400,(r?e.right:n.right-e.left)-30);let U=n.bottom-e.bottom;U>=p||U>e.top?u=s.bottom-e.top:(d="bottom",u=e.bottom-s.top)}let C=(e.bottom-e.top)/o.offsetHeight,V=(e.right-e.left)/o.offsetWidth;return{style:`${d}: ${u/C}px; max-width: ${f/V}px`,class:"cm-completionInfo-"+(a?r?"left-narrow":"right-narrow":l?"left":"right")}}function s6(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(s){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),s.type&&i.classList.add(...s.type.split(/\s+/g).map(n=>"cm-completionIcon-"+n)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(s,i,n,o){let r=document.createElement("span");r.className="cm-completionLabel";let l=s.displayLabel||s.label,a=0;for(let d=0;d<o.length;){let u=o[d++],f=o[d++];u>a&&r.appendChild(document.createTextNode(l.slice(a,u)));let h=r.appendChild(document.createElement("span"));h.appendChild(document.createTextNode(l.slice(u,f))),h.className="cm-completionMatchedText",a=f}return a<l.length&&r.appendChild(document.createTextNode(l.slice(a))),r},position:50},{render(s){if(!s.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=s.detail,i},position:80}),e.sort((s,i)=>s.position-i.position).map(s=>s.render)}function qu(t,e,s){if(t<=s)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let n=Math.floor(e/s);return{from:n*s,to:(n+1)*s}}let i=Math.floor((t-e)/s);return{from:t-(i+1)*s,to:t-i*s}}class i6{constructor(e,s,i){this.view=e,this.stateField=s,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:a=>this.placeInfo(a),key:this},this.space=null,this.currentClass="";let n=e.state.field(s),{options:o,selected:r}=n.open,l=e.state.facet(Nt);this.optionContent=s6(l),this.optionClass=l.optionClass,this.tooltipClass=l.tooltipClass,this.range=qu(o.length,r,l.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",a=>{let{options:d}=e.state.field(s).open;for(let u=a.target,f;u&&u!=this.dom;u=u.parentNode)if(u.nodeName=="LI"&&(f=/-(\d+)$/.exec(u.id))&&+f[1]<d.length){this.applyCompletion(e,d[+f[1]]),a.preventDefault();return}}),this.dom.addEventListener("focusout",a=>{let d=e.state.field(this.stateField,!1);d&&d.tooltip&&e.state.facet(Nt).closeOnBlur&&a.relatedTarget!=e.contentDOM&&e.dispatch({effects:Rr.of(null)})}),this.showOptions(o,n.id)}mount(){this.updateSel()}showOptions(e,s){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,s,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var s;let i=e.state.field(this.stateField),n=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=n){let{options:o,selected:r,disabled:l}=i.open;(!n.open||n.open.options!=o)&&(this.range=qu(o.length,r,e.state.facet(Nt).maxRenderedOptions),this.showOptions(o,i.id)),this.updateSel(),l!=((s=n.open)===null||s===void 0?void 0:s.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!l)}}updateTooltipClass(e){let s=this.tooltipClass(e);if(s!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of s.split(" "))i&&this.dom.classList.add(i);this.currentClass=s}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),s=e.open;(s.selected>-1&&s.selected<this.range.from||s.selected>=this.range.to)&&(this.range=qu(s.options.length,s.selected,this.view.state.facet(Nt).maxRenderedOptions),this.showOptions(s.options,e.id));let i=this.updateSelectedOption(s.selected);if(i){this.destroyInfo();let{completion:n}=s.options[s.selected],{info:o}=n;if(!o)return;let r=typeof o=="string"?document.createTextNode(o):o(n);if(!r)return;"then"in r?r.then(l=>{l&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(l,n)}).catch(l=>ks(this.view.state,l,"completion info")):(this.addInfoPane(r,n),i.setAttribute("aria-describedby",this.info.id))}}addInfoPane(e,s){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",i.id="cm-completionInfo-"+Math.floor(Math.random()*65535).toString(16),e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:n,destroy:o}=e;i.appendChild(n),this.infoDestroy=o||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let s=null;for(let i=this.list.firstChild,n=this.range.from;i;i=i.nextSibling,n++)i.nodeName!="LI"||!i.id?n--:n==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),s=i):i.hasAttribute("aria-selected")&&(i.removeAttribute("aria-selected"),i.removeAttribute("aria-describedby"));return s&&o6(this.list,s),s}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let s=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),n=e.getBoundingClientRect(),o=this.space;if(!o){let r=this.dom.ownerDocument.documentElement;o={left:0,top:0,right:r.clientWidth,bottom:r.clientHeight}}return n.top>Math.min(o.bottom,s.bottom)-10||n.bottom<Math.max(o.top,s.top)+10?null:this.view.state.facet(Nt).positionInfo(this.view,s,n,i,o,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,s,i){const n=document.createElement("ul");n.id=s,n.setAttribute("role","listbox"),n.setAttribute("aria-expanded","true"),n.setAttribute("aria-label",this.view.state.phrase("Completions")),n.addEventListener("mousedown",r=>{r.target==n&&r.preventDefault()});let o=null;for(let r=i.from;r<i.to;r++){let{completion:l,match:a}=e[r],{section:d}=l;if(d){let h=typeof d=="string"?d:d.name;if(h!=o&&(r>i.from||i.from==0))if(o=h,typeof d!="string"&&d.header)n.appendChild(d.header(d));else{let m=n.appendChild(document.createElement("completion-section"));m.textContent=h}}const u=n.appendChild(document.createElement("li"));u.id=s+"-"+r,u.setAttribute("role","option");let f=this.optionClass(l);f&&(u.className=f);for(let h of this.optionContent){let m=h(l,this.view.state,this.view,a);m&&u.appendChild(m)}}return i.from&&n.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&n.classList.add("cm-completionListIncompleteBottom"),n}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function n6(t,e){return s=>new i6(s,t,e)}function o6(t,e){let s=t.getBoundingClientRect(),i=e.getBoundingClientRect(),n=s.height/t.offsetHeight;i.top<s.top?t.scrollTop-=(s.top-i.top)/n:i.bottom>s.bottom&&(t.scrollTop+=(i.bottom-s.bottom)/n)}function wm(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function r6(t,e){let s=[],i=null,n=null,o=u=>{s.push(u);let{section:f}=u.completion;if(f){i||(i=[]);let h=typeof f=="string"?f:f.name;i.some(m=>m.name==h)||i.push(typeof f=="string"?{name:h}:f)}},r=e.facet(Nt);for(let u of t)if(u.hasResult()){let f=u.result.getMatch;if(u.result.filter===!1)for(let h of u.result.options)o(new bm(h,u.source,f?f(h):[],1e9-s.length));else{let h=e.sliceDoc(u.from,u.to),m,w=r.filterStrict?new e6(h):new Z8(h);for(let p of u.result.options)if(m=w.match(p.label)){let C=p.displayLabel?f?f(p,m.matched):[]:m.matched,V=m.score+(p.boost||0);if(o(new bm(p,u.source,C,V)),typeof p.section=="object"&&p.section.rank==="dynamic"){let{name:U}=p.section;n||(n=Object.create(null)),n[U]=Math.max(V,n[U]||-1e9)}}}}if(i){let u=Object.create(null),f=0,h=(m,w)=>(m.rank==="dynamic"&&w.rank==="dynamic"?n[w.name]-n[m.name]:0)||(typeof m.rank=="number"?m.rank:1e9)-(typeof w.rank=="number"?w.rank:1e9)||(m.name<w.name?-1:1);for(let m of i.sort(h))f-=1e5,u[m.name]=f;for(let m of s){let{section:w}=m.completion;w&&(m.score+=u[typeof w=="string"?w:w.name])}}let l=[],a=null,d=r.compareCompletions;for(let u of s.sort((f,h)=>h.score-f.score||d(f.completion,h.completion))){let f=u.completion;!a||a.label!=f.label||a.detail!=f.detail||a.type!=null&&f.type!=null&&a.type!=f.type||a.apply!=f.apply||a.boost!=f.boost?l.push(u):wm(u.completion)>wm(a)&&(l[l.length-1]=u),a=u.completion}return l}class to{constructor(e,s,i,n,o,r){this.options=e,this.attrs=s,this.tooltip=i,this.timestamp=n,this.selected=o,this.disabled=r}setSelected(e,s){return e==this.selected||e>=this.options.length?this:new to(this.options,_m(s,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,s,i,n,o,r){if(n&&!r&&e.some(d=>d.isPending))return n.setDisabled();let l=r6(e,s);if(!l.length)return n&&e.some(d=>d.isPending)?n.setDisabled():null;let a=s.facet(Nt).selectOnOpen?0:-1;if(n&&n.selected!=a&&n.selected!=-1){let d=n.options[n.selected].completion;for(let u=0;u<l.length;u++)if(l[u].completion==d){a=u;break}}return new to(l,_m(i,a),{pos:e.reduce((d,u)=>u.hasResult()?Math.min(d,u.from):d,1e8),create:f6,above:o.aboveCursor},n?n.timestamp:Date.now(),a,!1)}map(e){return new to(this.options,this.attrs,{...this.tooltip,pos:e.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new to(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class Ma{constructor(e,s,i){this.active=e,this.id=s,this.open=i}static start(){return new Ma(d6,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:s}=e,i=s.facet(Nt),o=(i.override||s.languageDataAt("autocomplete",Ln(s)).map(X8)).map(a=>(this.active.find(u=>u.source==a)||new Rs(a,this.active.some(u=>u.state!=0)?1:0)).update(e,i));o.length==this.active.length&&o.every((a,d)=>a==this.active[d])&&(o=this.active);let r=this.open,l=e.effects.some(a=>a.is(mf));r&&e.docChanged&&(r=r.map(e.changes)),e.selection||o.some(a=>a.hasResult()&&e.changes.touchesRange(a.from,a.to))||!l6(o,this.active)||l?r=to.build(o,s,this.id,r,i,l):r&&r.disabled&&!o.some(a=>a.isPending)&&(r=null),!r&&o.every(a=>!a.isPending)&&o.some(a=>a.hasResult())&&(o=o.map(a=>a.hasResult()?new Rs(a.source,0):a));for(let a of e.effects)a.is(sb)&&(r=r&&r.setSelected(a.value,this.id));return o==this.active&&r==this.open?this:new Ma(o,this.id,r)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?a6:u6}}function l6(t,e){if(t==e)return!0;for(let s=0,i=0;;){for(;s<t.length&&!t[s].hasResult();)s++;for(;i<e.length&&!e[i].hasResult();)i++;let n=s==t.length,o=i==e.length;if(n||o)return n==o;if(t[s++].result!=e[i++].result)return!1}}const a6={"aria-autocomplete":"list"},u6={};function _m(t,e){let s={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(s["aria-activedescendant"]=t+"-"+e),s}const d6=[];function tb(t,e){if(t.isUserEvent("input.complete")){let i=t.annotation(eb);if(i&&e.activateOnCompletion(i))return 12}let s=t.isUserEvent("input.type");return s&&e.activateOnTyping?5:s?1:t.isUserEvent("delete.backward")?2:t.selection?8:t.docChanged?16:0}class Rs{constructor(e,s,i=!1){this.source=e,this.state=s,this.explicit=i}hasResult(){return!1}get isPending(){return this.state==1}update(e,s){let i=tb(e,s),n=this;(i&8||i&16&&this.touches(e))&&(n=new Rs(n.source,0)),i&4&&n.state==0&&(n=new Rs(this.source,1)),n=n.updateFor(e,i);for(let o of e.effects)if(o.is(Va))n=new Rs(n.source,1,o.value);else if(o.is(Rr))n=new Rs(n.source,0);else if(o.is(mf))for(let r of o.value)r.source==n.source&&(n=r);return n}updateFor(e,s){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(Ln(e.state))}}class po extends Rs{constructor(e,s,i,n,o,r){super(e,3,s),this.limit=i,this.result=n,this.from=o,this.to=r}hasResult(){return!0}updateFor(e,s){var i;if(!(s&3))return this.map(e.changes);let n=this.result;n.map&&!e.changes.empty&&(n=n.map(n,e.changes));let o=e.changes.mapPos(this.from),r=e.changes.mapPos(this.to,1),l=Ln(e.state);if(l>r||!n||s&2&&(Ln(e.startState)==this.from||l<this.limit))return new Rs(this.source,s&4?1:0);let a=e.changes.mapPos(this.limit);return c6(n.validFor,e.state,o,r)?new po(this.source,this.explicit,a,n,o,r):n.update&&(n=n.update(n,o,r,new Xy(e.state,l,!1)))?new po(this.source,this.explicit,a,n,n.from,(i=n.to)!==null&&i!==void 0?i:Ln(e.state)):new Rs(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new po(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new Rs(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function c6(t,e,s,i){if(!t)return!1;let n=e.sliceDoc(s,i);return typeof t=="function"?t(n,s,i,e):Zy(t,!0).test(n)}const mf=Ke.define({map(t,e){return t.map(s=>s.map(e))}}),sb=Ke.define(),bs=Yt.define({create(){return Ma.start()},update(t,e){return t.update(e)},provide:t=>[Yc.from(t,e=>e.tooltip),Oe.contentAttributes.from(t,e=>e.attrs)]});function gf(t,e){const s=e.completion.apply||e.completion.label;let i=t.state.field(bs).active.find(n=>n.source==e.source);return i instanceof po?(typeof s=="string"?t.dispatch({...Q8(t.state,s,i.from,i.to),annotations:eb.of(e.completion)}):s(t,e.completion,i.from,i.to),!0):!1}const f6=n6(bs,gf);function Pl(t,e="option"){return s=>{let i=s.state.field(bs,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<s.state.facet(Nt).interactionDelay)return!1;let n=1,o;e=="page"&&(o=Lv(s,i.open.tooltip))&&(n=Math.max(2,Math.floor(o.dom.offsetHeight/o.dom.querySelector("li").offsetHeight)-1));let{length:r}=i.open.options,l=i.open.selected>-1?i.open.selected+n*(t?1:-1):t?0:r-1;return l<0?l=e=="page"?0:r-1:l>=r&&(l=e=="page"?r-1:0),s.dispatch({effects:sb.of(l)}),!0}}const h6=t=>{let e=t.state.field(bs,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(Nt).interactionDelay?!1:gf(t,e.open.options[e.open.selected])},Ku=t=>t.state.field(bs,!1)?(t.dispatch({effects:Va.of(!0)}),!0):!1,p6=t=>{let e=t.state.field(bs,!1);return!e||!e.active.some(s=>s.state!=0)?!1:(t.dispatch({effects:Rr.of(null)}),!0)};class m6{constructor(e,s){this.active=e,this.context=s,this.time=Date.now(),this.updates=[],this.done=void 0}}const g6=50,v6=1e3,y6=Ot.fromClass(class{constructor(t){this.view=t,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of t.state.field(bs).active)e.isPending&&this.startQuery(e)}update(t){let e=t.state.field(bs),s=t.state.facet(Nt);if(!t.selectionSet&&!t.docChanged&&t.startState.field(bs)==e)return;let i=t.transactions.some(o=>{let r=tb(o,s);return r&8||(o.selection||o.docChanged)&&!(r&3)});for(let o=0;o<this.running.length;o++){let r=this.running[o];if(i||r.context.abortOnDocChange&&t.docChanged||r.updates.length+t.transactions.length>g6&&Date.now()-r.time>v6){for(let l of r.context.abortListeners)try{l()}catch(a){ks(this.view.state,a)}r.context.abortListeners=null,this.running.splice(o--,1)}else r.updates.push(...t.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),t.transactions.some(o=>o.effects.some(r=>r.is(Va)))&&(this.pendingStart=!0);let n=this.pendingStart?50:s.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(o=>o.isPending&&!this.running.some(r=>r.active.source==o.source))?setTimeout(()=>this.startUpdate(),n):-1,this.composing!=0)for(let o of t.transactions)o.isUserEvent("input.type")?this.composing=2:this.composing==2&&o.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:t}=this.view,e=t.field(bs);for(let s of e.active)s.isPending&&!this.running.some(i=>i.active.source==s.source)&&this.startQuery(s);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Nt).updateSyncTime))}startQuery(t){let{state:e}=this.view,s=Ln(e),i=new Xy(e,s,t.explicit,this.view),n=new m6(t,i);this.running.push(n),Promise.resolve(t.source(i)).then(o=>{n.context.aborted||(n.done=o||null,this.scheduleAccept())},o=>{this.view.dispatch({effects:Rr.of(null)}),ks(this.view.state,o)})}scheduleAccept(){this.running.every(t=>t.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Nt).updateSyncTime))}accept(){var t;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],s=this.view.state.facet(Nt),i=this.view.state.field(bs);for(let n=0;n<this.running.length;n++){let o=this.running[n];if(o.done===void 0)continue;if(this.running.splice(n--,1),o.done){let l=Ln(o.updates.length?o.updates[0].startState:this.view.state),a=Math.min(l,o.done.from+(o.active.explicit?0:1)),d=new po(o.active.source,o.active.explicit,a,o.done,o.done.from,(t=o.done.to)!==null&&t!==void 0?t:l);for(let u of o.updates)d=d.update(u,s);if(d.hasResult()){e.push(d);continue}}let r=i.active.find(l=>l.source==o.active.source);if(r&&r.isPending)if(o.done==null){let l=new Rs(o.active.source,0);for(let a of o.updates)l=l.update(a,s);l.isPending||e.push(l)}else this.startQuery(r)}(e.length||i.open&&i.open.disabled)&&this.view.dispatch({effects:mf.of(e)})}},{eventHandlers:{blur(t){let e=this.view.state.field(bs,!1);if(e&&e.tooltip&&this.view.state.facet(Nt).closeOnBlur){let s=e.open&&Lv(this.view,e.open.tooltip);(!s||!s.dom.contains(t.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:Rr.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Va.of(!1)}),20),this.composing=0}}}),b6=typeof navigator=="object"&&/Win/.test(navigator.platform),k6=Hn.highest(Oe.domEventHandlers({keydown(t,e){let s=e.state.field(bs,!1);if(!s||!s.open||s.open.disabled||s.open.selected<0||t.key.length>1||t.ctrlKey&&!(b6&&t.altKey)||t.metaKey)return!1;let i=s.open.options[s.open.selected],n=s.active.find(r=>r.source==i.source),o=i.completion.commitCharacters||n.result.commitCharacters;return o&&o.indexOf(t.key)>-1&&gf(e,i),!1}})),x6=Oe.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),Br={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Dn=Ke.define({map(t,e){let s=e.mapPos(t,-1,fs.TrackAfter);return s??void 0}}),vf=new class extends Rn{};vf.startSide=1;vf.endSide=-1;const ib=Yt.define({create(){return tt.empty},update(t,e){if(t=t.map(e.changes),e.selection){let s=e.state.doc.lineAt(e.selection.main.head);t=t.update({filter:i=>i>=s.from&&i<=s.to})}for(let s of e.effects)s.is(Dn)&&(t=t.update({add:[vf.range(s.value,s.value+1)]}));return t}});function w6(){return[S6,ib]}const Gu="()[]{}<>";function nb(t){for(let e=0;e<Gu.length;e+=2)if(Gu.charCodeAt(e)==t)return Gu.charAt(e+1);return Lc(t<128?t:t+1)}function ob(t,e){return t.languageDataAt("closeBrackets",e)[0]||Br}const _6=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),S6=Oe.inputHandler.of((t,e,s,i)=>{if((_6?t.composing:t.compositionStarted)||t.state.readOnly)return!1;let n=t.state.selection.main;if(i.length>2||i.length==2&&pi(ys(i,0))==1||e!=n.from||s!=n.to)return!1;let o=V6(t.state,i);return o?(t.dispatch(o),!0):!1}),C6=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let i=ob(t,t.selection.main.head).brackets||Br.brackets,n=null,o=t.changeByRange(r=>{if(r.empty){let l=M6(t.doc,r.head);for(let a of i)if(a==l&&nu(t.doc,r.head)==nb(ys(a,0)))return{changes:{from:r.head-a.length,to:r.head+a.length},range:ue.cursor(r.head-a.length)}}return{range:n=r}});return n||e(t.update(o,{scrollIntoView:!0,userEvent:"delete.backward"})),!n},A6=[{key:"Backspace",run:C6}];function V6(t,e){let s=ob(t,t.selection.main.head),i=s.brackets||Br.brackets;for(let n of i){let o=nb(ys(n,0));if(e==n)return o==n?T6(t,n,i.indexOf(n+n+n)>-1,s):D6(t,n,o,s.before||Br.before);if(e==o&&rb(t,t.selection.main.from))return $6(t,n,o)}return null}function rb(t,e){let s=!1;return t.field(ib).between(0,t.doc.length,i=>{i==e&&(s=!0)}),s}function nu(t,e){let s=t.sliceString(e,e+2);return s.slice(0,pi(ys(s,0)))}function M6(t,e){let s=t.sliceString(e-2,e);return pi(ys(s,0))==s.length?s:s.slice(1)}function D6(t,e,s,i){let n=null,o=t.changeByRange(r=>{if(!r.empty)return{changes:[{insert:e,from:r.from},{insert:s,from:r.to}],effects:Dn.of(r.to+e.length),range:ue.range(r.anchor+e.length,r.head+e.length)};let l=nu(t.doc,r.head);return!l||/\s/.test(l)||i.indexOf(l)>-1?{changes:{insert:e+s,from:r.head},effects:Dn.of(r.head+e.length),range:ue.cursor(r.head+e.length)}:{range:n=r}});return n?null:t.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function $6(t,e,s){let i=null,n=t.changeByRange(o=>o.empty&&nu(t.doc,o.head)==s?{changes:{from:o.head,to:o.head+s.length,insert:s},range:ue.cursor(o.head+s.length)}:i={range:o});return i?null:t.update(n,{scrollIntoView:!0,userEvent:"input.type"})}function T6(t,e,s,i){let n=i.stringPrefixes||Br.stringPrefixes,o=null,r=t.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:e,from:l.to}],effects:Dn.of(l.to+e.length),range:ue.range(l.anchor+e.length,l.head+e.length)};let a=l.head,d=nu(t.doc,a),u;if(d==e){if(Sm(t,a))return{changes:{insert:e+e,from:a},effects:Dn.of(a+e.length),range:ue.cursor(a+e.length)};if(rb(t,a)){let h=s&&t.sliceDoc(a,a+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:a,to:a+h.length,insert:h},range:ue.cursor(a+h.length)}}}else{if(s&&t.sliceDoc(a-2*e.length,a)==e+e&&(u=Cm(t,a-2*e.length,n))>-1&&Sm(t,u))return{changes:{insert:e+e+e+e,from:a},effects:Dn.of(a+e.length),range:ue.cursor(a+e.length)};if(t.charCategorizer(a)(d)!=wt.Word&&Cm(t,a,n)>-1&&!E6(t,a,e,n))return{changes:{insert:e+e,from:a},effects:Dn.of(a+e.length),range:ue.cursor(a+e.length)}}return{range:o=l}});return o?null:t.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function Sm(t,e){let s=os(t).resolveInner(e+1);return s.parent&&s.from==e}function E6(t,e,s,i){let n=os(t).resolveInner(e,-1),o=i.reduce((r,l)=>Math.max(r,l.length),0);for(let r=0;r<5;r++){let l=t.sliceDoc(n.from,Math.min(n.to,n.from+s.length+o)),a=l.indexOf(s);if(!a||a>-1&&i.indexOf(l.slice(0,a))>-1){let u=n.firstChild;for(;u&&u.from==n.from&&u.to-u.from>s.length+a;){if(t.sliceDoc(u.to-s.length,u.to)==s)return!1;u=u.firstChild}return!0}let d=n.to==e&&n.parent;if(!d)break;n=d}return!1}function Cm(t,e,s){let i=t.charCategorizer(e);if(i(t.sliceDoc(e-1,e))!=wt.Word)return e;for(let n of s){let o=e-n.length;if(t.sliceDoc(o,e)==n&&i(t.sliceDoc(o-1,o))!=wt.Word)return o}return-1}function O6(t={}){return[k6,bs,Nt.of(t),y6,P6,x6]}const lb=[{key:"Ctrl-Space",run:Ku},{mac:"Alt-`",run:Ku},{mac:"Alt-i",run:Ku},{key:"Escape",run:p6},{key:"ArrowDown",run:Pl(!0)},{key:"ArrowUp",run:Pl(!1)},{key:"PageDown",run:Pl(!0,"page")},{key:"PageUp",run:Pl(!1,"page")},{key:"Enter",run:h6}],P6=Hn.highest(Gc.computeN([Nt],t=>t.facet(Nt).defaultKeymap?[lb]:[]));class Am{constructor(e,s,i){this.from=e,this.to=s,this.diagnostic=i}}class An{constructor(e,s,i){this.diagnostics=e,this.panel=s,this.selected=i}static init(e,s,i){let n=i.facet(Ir).markerFilter;n&&(e=n(e,i));let o=e.slice().sort((m,w)=>m.from-w.from||m.to-w.to),r=new Ri,l=[],a=0,d=i.doc.iter(),u=0,f=i.doc.length;for(let m=0;;){let w=m==o.length?null:o[m];if(!w&&!l.length)break;let p,C;if(l.length)p=a,C=l.reduce((B,H)=>Math.min(B,H.to),w&&w.from>p?w.from:1e8);else{if(p=w.from,p>f)break;C=w.to,l.push(w),m++}for(;m<o.length;){let B=o[m];if(B.from==p&&(B.to>B.from||B.to==p))l.push(B),m++,C=Math.min(B.to,C);else{C=Math.min(B.from,C);break}}C=Math.min(C,f);let V=!1;if(l.some(B=>B.from==p&&(B.to==C||C==f))&&(V=p==C,!V&&C-p<10)){let B=p-(u+d.value.length);B>0&&(d.next(B),u=p);for(let H=p;;){if(H>=C){V=!0;break}if(!d.lineBreak&&u+d.value.length>H)break;H=u+d.value.length,u+=d.value.length,d.next()}}let U=K6(l);if(V)r.add(p,p,He.widget({widget:new F6(U),diagnostics:l.slice()}));else{let B=l.reduce((H,j)=>j.markClass?H+" "+j.markClass:H,"");r.add(p,C,He.mark({class:"cm-lintRange cm-lintRange-"+U+B,diagnostics:l.slice(),inclusiveEnd:l.some(H=>H.to>C)}))}if(a=C,a==f)break;for(let B=0;B<l.length;B++)l[B].to<=a&&l.splice(B--,1)}let h=r.finish();return new An(h,s,Ao(h))}}function Ao(t,e=null,s=0){let i=null;return t.between(s,1e9,(n,o,{spec:r})=>{if(!(e&&r.diagnostics.indexOf(e)<0))if(!i)i=new Am(n,o,e||r.diagnostics[0]);else{if(r.diagnostics.indexOf(i.diagnostic)<0)return!1;i=new Am(i.from,o,i.diagnostic)}}),i}function L6(t,e){let s=e.pos,i=e.end||s,n=t.state.facet(Ir).hideOn(t,s,i);if(n!=null)return n;let o=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(r=>r.is(ab))||t.changes.touchesRange(o.from,Math.max(o.to,i)))}function j6(t,e){return t.field($s,!1)?e:e.concat(Ke.appendConfig.of(G6))}const ab=Ke.define(),yf=Ke.define(),ub=Ke.define(),$s=Yt.define({create(){return new An(He.none,null,null)},update(t,e){if(e.docChanged&&t.diagnostics.size){let s=t.diagnostics.map(e.changes),i=null,n=t.panel;if(t.selected){let o=e.changes.mapPos(t.selected.from,1);i=Ao(s,t.selected.diagnostic,o)||Ao(s,null,o)}!s.size&&n&&e.state.facet(Ir).autoPanel&&(n=null),t=new An(s,n,i)}for(let s of e.effects)if(s.is(ab)){let i=e.state.facet(Ir).autoPanel?s.value.length?Ur.open:null:t.panel;t=An.init(s.value,i,e.state)}else s.is(yf)?t=new An(t.diagnostics,s.value?Ur.open:null,t.selected):s.is(ub)&&(t=new An(t.diagnostics,t.panel,s.value));return t},provide:t=>[Tr.from(t,e=>e.panel),Oe.decorations.from(t,e=>e.diagnostics)]}),R6=He.mark({class:"cm-lintRange cm-lintRange-active"});function B6(t,e,s){let{diagnostics:i}=t.state.field($s),n,o=-1,r=-1;i.between(e-(s<0?1:0),e+(s>0?1:0),(a,d,{spec:u})=>{if(e>=a&&e<=d&&(a==d||(e>a||s>0)&&(e<d||s<0)))return n=u.diagnostics,o=a,r=d,!1});let l=t.state.facet(Ir).tooltipFilter;return n&&l&&(n=l(n,t.state)),n?{pos:o,end:r,above:t.state.doc.lineAt(o).to<r,create(){return{dom:I6(t,n)}}}:null}function I6(t,e){return ft("ul",{class:"cm-tooltip-lint"},e.map(s=>cb(t,s,!1)))}const U6=t=>{let e=t.state.field($s,!1);(!e||!e.panel)&&t.dispatch({effects:j6(t.state,[yf.of(!0)])});let s=$r(t,Ur.open);return s&&s.dom.querySelector(".cm-panel-lint ul").focus(),!0},Vm=t=>{let e=t.state.field($s,!1);return!e||!e.panel?!1:(t.dispatch({effects:yf.of(!1)}),!0)},N6=t=>{let e=t.state.field($s,!1);if(!e)return!1;let s=t.state.selection.main,i=e.diagnostics.iter(s.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==s.from&&i.to==s.to)?!1:(t.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},z6=[{key:"Mod-Shift-m",run:U6,preventDefault:!0},{key:"F8",run:N6}],Ir=Le.define({combine(t){return{sources:t.map(e=>e.source).filter(e=>e!=null),...wi(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:Mm,tooltipFilter:Mm,needsRefresh:(e,s)=>e?s?i=>e(i)||s(i):e:s,hideOn:(e,s)=>e?s?(i,n,o)=>e(i,n,o)||s(i,n,o):e:s,autoPanel:(e,s)=>e||s})}}});function Mm(t,e){return t?e?(s,i)=>e(t(s,i),i):t:e}function db(t){let e=[];if(t)e:for(let{name:s}of t){for(let i=0;i<s.length;i++){let n=s[i];if(/[a-zA-Z]/.test(n)&&!e.some(o=>o.toLowerCase()==n.toLowerCase())){e.push(n);continue e}}e.push("")}return e}function cb(t,e,s){var i;let n=s?db(e.actions):[];return ft("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},ft("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(t):e.message),(i=e.actions)===null||i===void 0?void 0:i.map((o,r)=>{let l=!1,a=m=>{if(m.preventDefault(),l)return;l=!0;let w=Ao(t.state.field($s).diagnostics,e);w&&o.apply(t,w.from,w.to)},{name:d}=o,u=n[r]?d.indexOf(n[r]):-1,f=u<0?d:[d.slice(0,u),ft("u",d.slice(u,u+1)),d.slice(u+1)],h=o.markClass?" "+o.markClass:"";return ft("button",{type:"button",class:"cm-diagnosticAction"+h,onclick:a,onmousedown:a,"aria-label":` Action: ${d}${u<0?"":` (access key "${n[r]})"`}.`},f)}),e.source&&ft("div",{class:"cm-diagnosticSource"},e.source))}class F6 extends fn{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return ft("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class Dm{constructor(e,s){this.diagnostic=s,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=cb(e,s,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Ur{constructor(e){this.view=e,this.items=[];let s=n=>{if(n.keyCode==27)Vm(this.view),this.view.focus();else if(n.keyCode==38||n.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(n.keyCode==40||n.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(n.keyCode==36)this.moveSelection(0);else if(n.keyCode==35)this.moveSelection(this.items.length-1);else if(n.keyCode==13)this.view.focus();else if(n.keyCode>=65&&n.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:o}=this.items[this.selectedIndex],r=db(o.actions);for(let l=0;l<r.length;l++)if(r[l].toUpperCase().charCodeAt(0)==n.keyCode){let a=Ao(this.view.state.field($s).diagnostics,o);a&&o.actions[l].apply(e,a.from,a.to)}}else return;n.preventDefault()},i=n=>{for(let o=0;o<this.items.length;o++)this.items[o].dom.contains(n.target)&&this.moveSelection(o)};this.list=ft("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:s,onclick:i}),this.dom=ft("div",{class:"cm-panel-lint"},this.list,ft("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>Vm(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field($s).selected;if(!e)return-1;for(let s=0;s<this.items.length;s++)if(this.items[s].diagnostic==e.diagnostic)return s;return-1}update(){let{diagnostics:e,selected:s}=this.view.state.field($s),i=0,n=!1,o=null,r=new Set;for(e.between(0,this.view.state.doc.length,(l,a,{spec:d})=>{for(let u of d.diagnostics){if(r.has(u))continue;r.add(u);let f=-1,h;for(let m=i;m<this.items.length;m++)if(this.items[m].diagnostic==u){f=m;break}f<0?(h=new Dm(this.view,u),this.items.splice(i,0,h),n=!0):(h=this.items[f],f>i&&(this.items.splice(i,f-i),n=!0)),s&&h.diagnostic==s.diagnostic?h.dom.hasAttribute("aria-selected")||(h.dom.setAttribute("aria-selected","true"),o=h):h.dom.hasAttribute("aria-selected")&&h.dom.removeAttribute("aria-selected"),i++}});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)n=!0,this.items.pop();this.items.length==0&&(this.items.push(new Dm(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),n=!0),o?(this.list.setAttribute("aria-activedescendant",o.id),this.view.requestMeasure({key:this,read:()=>({sel:o.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:l,panel:a})=>{let d=a.height/this.list.offsetHeight;l.top<a.top?this.list.scrollTop-=(a.top-l.top)/d:l.bottom>a.bottom&&(this.list.scrollTop+=(l.bottom-a.bottom)/d)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),n&&this.sync()}sync(){let e=this.list.firstChild;function s(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)s();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)s()}moveSelection(e){if(this.selectedIndex<0)return;let s=this.view.state.field($s),i=Ao(s.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:ub.of(i)})}static open(e){return new Ur(e)}}function H6(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function Ll(t){return H6(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const W6=Oe.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Ll("#d11")},".cm-lintRange-warning":{backgroundImage:Ll("orange")},".cm-lintRange-info":{backgroundImage:Ll("#999")},".cm-lintRange-hint":{backgroundImage:Ll("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function q6(t){return t=="error"?4:t=="warning"?3:t=="info"?2:1}function K6(t){let e="hint",s=1;for(let i of t){let n=q6(i.severity);n>s&&(s=n,e=i.severity)}return e}const G6=[$s,Oe.decorations.compute([$s],t=>{let{selected:e,panel:s}=t.field($s);return!e||!s||e.from==e.to?He.none:He.set([R6.range(e.from,e.to)])}),P5(B6,{hideOn:L6}),W6],J6=[W5(),G5(),c5(),gA(),I3(),e5(),o5(),et.allowMultipleSelections.of(!0),C3(),sy(F3,{fallback:!0}),Y3(),w6(),O6(),_5(),A5(),v5(),A8(),Gc.of([...A6,...k8,...W8,...CA,...L3,...lb,...z6])],Y6={class:"rounded-lg border border-gray-300 overflow-hidden dark:border-gray-600"},Yi={__name:"CodeEditor",props:{modelValue:{type:String,default:""},language:{type:String,default:"r",validator:t=>["r","markdown","text","gitignore"].includes(t)},minHeight:{type:String,default:"400px"},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:""}},emits:["update:modelValue"],setup(t,{emit:e}){const s=t,i=e,n=ae(null);let o=null;const r=of.define({token(d){return d.sol()&&d.match(/^#/)?(d.skipToEnd(),"comment"):(d.skipToEnd(),null)}}),l=sy(Jr.define([{tag:De.comment,color:"#16a34a"}])),a=()=>[r,l];return ns(()=>{if(!n.value)return;const d=Oe.updateListener.of(h=>{h.docChanged&&i("update:modelValue",h.state.doc.toString())}),u=[J6,a(),d,Oe.lineWrapping,Oe.theme({"&":{minHeight:s.minHeight,fontSize:"13px",fontFamily:'ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, "Liberation Mono", monospace'},".cm-scroller":{fontFamily:'ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, "Liberation Mono", monospace'},".cm-content":{padding:"12px 0"},".cm-line":{padding:"0 12px"}})],f=et.create({doc:s.modelValue||"",extensions:u});o=new Oe({state:f,parent:n.value})}),We(()=>s.modelValue,d=>{o&&d!==o.state.doc.toString()&&o.dispatch({changes:{from:0,to:o.state.doc.length,insert:d}})}),(d,u)=>(g(),b("div",Y6,[c("div",{ref_key:"editorRef",ref:n},null,512)]))}},Q6={class:"relative"},X6={key:0,class:"absolute z-10 mt-1 w-full max-h-64 overflow-y-auto border border-gray-200 dark:border-gray-700 rounded-md bg-white dark:bg-gray-800 shadow-lg"},Z6=["onClick","onMouseenter"],eV={class:"flex items-center justify-between gap-3"},tV={class:"flex-1 min-w-0"},sV={class:"font-medium text-gray-900 dark:text-white"},iV={class:"text-xs text-gray-500 dark:text-gray-400 truncate"},nV={class:"ml-3 text-xs text-gray-400 dark:text-gray-500 shrink-0 flex items-center gap-1.5"},oV={class:"text-[10px] font-medium"},rV={key:1,class:"absolute right-3 top-9 text-gray-400"},bf={__name:"PackageAutocomplete",props:{modelValue:{type:String,default:""},label:{type:String,default:"Search Packages"},placeholder:{type:String,default:"Type to search..."},source:{type:String,default:"cran",validator:t=>["cran","bioconductor","github"].includes(t)}},emits:["update:modelValue","select"],setup(t,{emit:e}){const s=t,i=e,n=ne({get:()=>s.modelValue,set:h=>i("update:modelValue",h)}),o=ae([]),r=ae(!1),l=ae(-1);let a=null;We(n,h=>{if(a&&clearTimeout(a),h.length<2){o.value=[],l.value=-1;return}a=setTimeout(()=>{d(h)},300)});const d=async h=>{r.value=!0;try{const w=await(await fetch(`/api/packages/search?q=${encodeURIComponent(h)}&source=${encodeURIComponent(s.source)}`)).json();o.value=w.packages||[],l.value=o.value.length>0?0:-1}catch(m){console.error("Failed to search packages:",m),o.value=[],l.value=-1}finally{r.value=!1}},u=h=>{o.value.length!==0&&(h.key==="ArrowDown"?(h.preventDefault(),l.value=Math.min(l.value+1,o.value.length-1)):h.key==="ArrowUp"?(h.preventDefault(),l.value=Math.max(l.value-1,0)):h.key==="Enter"&&l.value>=0?(h.preventDefault(),f(o.value[l.value])):h.key==="Escape"&&(o.value=[],l.value=-1))},f=h=>{i("update:modelValue",h.name),i("select",h),o.value=[],l.value=-1};return(h,m)=>(g(),b("div",Q6,[k(W,{modelValue:n.value,"onUpdate:modelValue":m[0]||(m[0]=w=>n.value=w),label:t.label,placeholder:t.placeholder,onKeydown:u},null,8,["modelValue","label","placeholder"]),o.value.length>0?(g(),b("div",X6,[(g(!0),b(ee,null,ke(o.value,(w,p)=>(g(),b("button",{key:w.name,onClick:C=>f(w),onMouseenter:C=>l.value=p,class:Ee(["w-full px-3 py-2 text-left border-b border-gray-200 dark:border-gray-700 last:border-b-0 transition",l.value===p?"bg-sky-50 dark:bg-sky-900/20":"hover:bg-gray-50 dark:hover:bg-gray-700"])},[c("div",eV,[c("div",tV,[c("div",sV,z(w.name),1),c("div",iV,z(w.title),1)]),c("div",nV,[c("span",oV,z(w.source==="cran"?"CRAN":w.source==="bioconductor"?"Bioconductor":w.source),1),m[1]||(m[1]=c("span",null,"",-1)),c("span",null,"v"+z(w.version),1)])])],42,Z6))),128))])):I("",!0),r.value?(g(),b("div",rV,[...m[2]||(m[2]=[c("svg",{class:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[c("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),c("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):I("",!0)]))}},lV={class:"flex items-center justify-between"},aV={class:"flex-1"},uV={class:"text-xs text-gray-500 dark:text-gray-400 mb-1"},dV={class:"text-sm text-gray-900 dark:text-white"},Ms={__name:"OverviewCard",props:{title:{type:String,required:!0}},emits:["click"],setup(t){return(e,s)=>(g(),b("button",{onClick:s[0]||(s[0]=i=>e.$emit("click")),class:"w-full text-left px-4 py-3 rounded-md bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 hover:border-sky-300 dark:hover:border-sky-700 transition"},[c("div",lV,[c("div",aV,[c("div",uV,z(t.title),1),c("div",dV,[vt(e.$slots,"default")])]),s[1]||(s[1]=c("svg",{class:"h-5 w-5 text-gray-400 shrink-0 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))])]))}},cV={class:"pt-4 pb-2"},fV={class:"px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider dark:text-gray-400"},Da={__name:"NavigationSectionHeading",setup(t){return(e,s)=>(g(),b("div",cV,[c("h3",fV,[vt(e.$slots,"default")])]))}},hV={class:"space-y-3"},pV={class:"grid gap-4 sm:grid-cols-2"},mV={class:"space-y-3"},gV={class:"space-y-4"},vV={class:"text-xs text-gray-500 dark:text-gray-400"},kf={__name:"GitHooksPanel",props:{modelValue:{type:Object,required:!0},flush:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{emit:e}){const s=t,i=e,n=()=>({initialize:s.modelValue?.initialize??!0,user_name:s.modelValue?.user_name??"",user_email:s.modelValue?.user_email??"",hooks:{ai_sync:s.modelValue?.hooks?.ai_sync??!1,data_security:s.modelValue?.hooks?.data_security??!1,check_sensitive_dirs:s.modelValue?.hooks?.check_sensitive_dirs??!1}}),o=ne(()=>s.flush?"space-y-6":"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 space-y-6"),r=ne(n),l=d=>{const u=n(),f={...u.hooks,...d?.hooks||{}};i("update:modelValue",{...u,...d,hooks:f})},a=(d,u)=>{l({hooks:{[d]:u}})};return(d,u)=>(g(),b("div",{class:Ee(o.value)},[k(Ue,{"model-value":r.value.initialize,label:"Initialize Git",description:"Run git init for every new project.","onUpdate:modelValue":u[0]||(u[0]=f=>l({initialize:f}))},null,8,["model-value"]),c("div",hV,[u[6]||(u[6]=c("div",null,[c("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"Git identity"),c("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Overrides Author Information when provided. ")],-1)),c("div",pV,[k(W,{"model-value":r.value.user_name,label:"Git Name",placeholder:"Jane Analyst",disabled:!r.value.initialize,"onUpdate:modelValue":u[1]||(u[1]=f=>l({user_name:f}))},null,8,["model-value","disabled"]),k(W,{"model-value":r.value.user_email,label:"Git Email",placeholder:"jane@example.com",hint:"Used for git config user.email during project setup.",disabled:!r.value.initialize,"onUpdate:modelValue":u[2]||(u[2]=f=>l({user_email:f}))},null,8,["model-value","disabled"])])]),c("div",mV,[u[8]||(u[8]=c("div",null,[c("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"Git Hooks"),c("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Pre-commit hooks that run automatically before each commit. ")],-1)),c("div",gV,[k(Ue,{"model-value":r.value.hooks.ai_sync,label:"Sync AI Files Before Commit",description:"Update non-canonical files so assistants share the same instructions.",disabled:!r.value.initialize,"onUpdate:modelValue":u[3]||(u[3]=f=>a("ai_sync",f))},null,8,["model-value","disabled"]),k(Ue,{"model-value":r.value.hooks.data_security,label:"Check for Secrets",description:"Run a lightweight scan for API keys and credentials before commits.",disabled:!r.value.initialize,"onUpdate:modelValue":u[4]||(u[4]=f=>a("data_security",f))},null,8,["model-value","disabled"]),k(Ue,{"model-value":r.value.hooks.check_sensitive_dirs,label:"Warn About Unignored Sensitive Directories",description:"Block commits if directories with sensitive names aren't gitignored.",disabled:!r.value.initialize,"onUpdate:modelValue":u[5]||(u[5]=f=>a("check_sensitive_dirs",f))},null,8,["model-value","disabled"])]),c("p",vV,[vt(d.$slots,"note",{},()=>[u[7]||(u[7]=ie(" Project-specific .gitignore templates can be customized in Project Defaults. ",-1))])])])],2))}},yV={class:"space-y-5"},xf={__name:"ScaffoldBehaviorPanel",props:{modelValue:{type:Object,required:!0},flush:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{emit:e}){const s=t,i=e,n=()=>({source_all_functions:s.modelValue?.source_all_functions??!0,set_theme_on_scaffold:s.modelValue?.set_theme_on_scaffold??!0,ggplot_theme:s.modelValue?.ggplot_theme??"theme_minimal",seed_on_scaffold:s.modelValue?.seed_on_scaffold??!1,seed:s.modelValue?.seed??""}),o=ne(n),r=ne(()=>s.flush?"space-y-5":"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 space-y-5"),l=a=>{const d=n();i("update:modelValue",{...d,...a})};return(a,d)=>(g(),b("div",{class:Ee(r.value)},[c("div",yV,[c("div",null,[d[5]||(d[5]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Auto-Load Functions",-1)),k(Ue,{"model-value":o.value.source_all_functions,label:"Source all R files from functions/ directory",description:"Automatically loads all helper functions when scaffold() runs","onUpdate:modelValue":d[0]||(d[0]=u=>l({source_all_functions:u}))},null,8,["model-value"])]),c("div",null,[d[7]||(d[7]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"ggplot2 Theme",-1)),k(Ue,{"model-value":o.value.set_theme_on_scaffold,label:"Set ggplot2 theme when scaffold() runs",description:"Automatically sets ggplot2 theme for consistent plot styling","onUpdate:modelValue":d[1]||(d[1]=u=>l({set_theme_on_scaffold:u}))},null,8,["model-value"]),o.value.set_theme_on_scaffold?(g(),pe(Ht,{key:0,"model-value":o.value.ggplot_theme,label:"Theme",class:"mt-4","onUpdate:modelValue":d[2]||(d[2]=u=>l({ggplot_theme:u}))},{default:R(()=>[...d[6]||(d[6]=[c("option",{value:""},"None",-1),c("option",{value:"theme_minimal"},"Minimal",-1),c("option",{value:"theme_bw"},"Black & White",-1),c("option",{value:"theme_classic"},"Classic",-1),c("option",{value:"theme_gray"},"Gray (default)",-1),c("option",{value:"theme_light"},"Light",-1),c("option",{value:"theme_dark"},"Dark",-1),c("option",{value:"theme_void"},"Void",-1)])]),_:1},8,["model-value"])):I("",!0)]),c("div",null,[d[8]||(d[8]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Random Seed",-1)),k(Ue,{"model-value":o.value.seed_on_scaffold,label:"Set random seed when scaffold() runs",description:"Ensures deterministic behavior for reproducibility","onUpdate:modelValue":d[3]||(d[3]=u=>l({seed_on_scaffold:u}))},null,8,["model-value"]),o.value.seed_on_scaffold?(g(),pe(W,{key:0,"model-value":o.value.seed,label:"Seed Value",placeholder:"e.g., 1234 or 20241107",hint:"Leave empty to use global default",class:"mt-4","onUpdate:modelValue":d[4]||(d[4]=u=>l({seed:u}))},null,8,["model-value"])):I("",!0)])])],2))}},bV={class:"space-y-6"},kV={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},xV={class:"mb-4 rounded-md border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900 p-4"},wV={class:"flex items-center justify-between mb-3"},_V={class:"flex items-center gap-2"},SV={class:"space-y-3"},CV={class:"grid grid-cols-2 gap-3"},AV={class:"flex items-center gap-2"},VV=["id","checked","onChange"],MV=["for"],DV={key:0},$V={key:1,class:"space-y-3"},TV={class:"grid grid-cols-2 gap-3"},EV={class:"grid grid-cols-2 gap-3"},OV={class:"grid grid-cols-2 gap-3"},PV={key:2,class:"space-y-3"},LV={class:"grid grid-cols-2 gap-3"},jV={class:"grid grid-cols-2 gap-3"},RV={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},BV={class:"space-y-3"},IV={class:"flex items-center gap-2"},UV=["id","checked","onChange"],NV=["for"],zV={class:"grid grid-cols-2 gap-3"},FV={class:"grid grid-cols-2 gap-3"},wf={__name:"ConnectionsPanel",props:{databaseConnections:{type:Array,required:!0},s3Connections:{type:Array,required:!0},defaultDatabase:{type:String,default:null},defaultStorageBucket:{type:String,default:null}},emits:["update:databaseConnections","update:s3Connections","update:defaultDatabase","update:defaultStorageBucket"],setup(t){const e=t,s=(l,a)=>!l||l.trim()===""?"Connection name is required":l==="framework_db"?"framework_db is reserved for system use":e.databaseConnections.findIndex((f,h)=>h!==a&&f.name===l)!==-1?"Connection name must be unique":e.s3Connections.findIndex(f=>f.name===l)!==-1?"Connection name must be unique across all connections":null,i=(l,a)=>!l||l.trim()===""?"Connection name is required":l==="framework_db"?"framework_db is reserved for system use":e.s3Connections.findIndex((f,h)=>h!==a&&f.name===l)!==-1?"Connection name must be unique":e.databaseConnections.findIndex(f=>f.name===l)!==-1?"Connection name must be unique across all connections":null,n=(l,a)=>{let d=1,u=l;for(;a.includes(u)||u==="framework_db";)d+=1,u=`${l}_${d}`;return u},o=()=>{const l=e.databaseConnections.map(h=>h.name);let a="postgres",d="database";l.some(h=>h.startsWith("postgres"))?l.some(h=>h.startsWith("mysql"))?l.some(h=>h.startsWith("sqlserver"))||(a="sqlserver",d="sqlserver"):(a="mysql",d="mysql"):(a="postgres",d="postgres");const u=n(d,l),f={_id:Date.now(),name:u,driver:a};return a==="postgres"?{...f,host:'env("POSTGRES_HOST", "localhost")',port:'env("POSTGRES_PORT", "5432")',database:'env("POSTGRES_DB", "mydb")',schema:'env("POSTGRES_SCHEMA", "public")',user:'env("POSTGRES_USER", "postgres")',password:'env("POSTGRES_PASSWORD", "")'}:a==="mysql"?{...f,host:'env("MYSQL_HOST", "localhost")',port:'env("MYSQL_PORT", "3306")',database:'env("MYSQL_DB", "mydb")',user:'env("MYSQL_USER", "root")',password:'env("MYSQL_PASSWORD", "")'}:a==="sqlserver"?{...f,host:'env("SQLSERVER_HOST", "localhost")',port:'env("SQLSERVER_PORT", "1433")',database:'env("SQLSERVER_DB", "mydb")',user:'env("SQLSERVER_USER", "sa")',password:'env("SQLSERVER_PASSWORD", "")'}:f},r=()=>({_id:Date.now(),name:n("s3_bucket",e.s3Connections.map(l=>l.name)),bucket:'env("S3_BUCKET", "my-bucket")',region:'env("S3_REGION", "us-east-1")',endpoint:'env("S3_ENDPOINT", "")',access_key:'env("S3_ACCESS_KEY", "")',secret_key:'env("S3_SECRET_KEY", "")'});return(l,a)=>(g(),b("div",bV,[c("div",kV,[a[7]||(a[7]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Databases",-1)),c("div",xV,[c("div",wV,[c("div",_V,[k(En,{variant:"gray",size:"sm"},{default:R(()=>[...a[2]||(a[2]=[ie("System",-1)])]),_:1}),a[3]||(a[3]=c("span",{class:"text-sm font-medium text-gray-900 dark:text-gray-100 font-mono"},"framework_db",-1))]),a[4]||(a[4]=c("span",{class:"text-xs text-gray-500 dark:text-gray-400"},"SQLite - Framework metadata",-1))]),a[5]||(a[5]=c("div",{class:"text-sm text-gray-600 dark:text-gray-400 font-mono"}," framework.db ",-1))]),k(gt,{"model-value":t.databaseConnections,"onUpdate:modelValue":a[0]||(a[0]=d=>l.$emit("update:databaseConnections",d)),"add-label":"Add Database","default-item":o},{default:R(({item:d,index:u,update:f})=>[c("div",SV,[c("div",CV,[k(W,{"model-value":d.name,"onUpdate:modelValue":h=>f("name",h),label:"Connection Name",error:s(d.name,u),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),k(Ht,{"model-value":d.driver,"onUpdate:modelValue":h=>f("driver",h),label:"Driver",size:"sm"},{default:R(()=>[...a[6]||(a[6]=[c("option",{value:"sqlite"},"SQLite",-1),c("option",{value:"postgres"},"PostgreSQL",-1),c("option",{value:"mysql"},"MySQL",-1),c("option",{value:"sqlserver"},"SQL Server",-1)])]),_:1},8,["model-value","onUpdate:modelValue"])]),c("div",AV,[c("input",{type:"radio",id:`default-db-${d._id}`,checked:t.defaultDatabase===d.name,onChange:h=>l.$emit("update:defaultDatabase",d.name),class:"h-4 w-4 text-sky-600 focus:ring-sky-500"},null,40,VV),c("label",{for:`default-db-${d._id}`,class:"text-sm text-gray-700 dark:text-gray-300"}," Default database ",8,MV)]),d.driver==="sqlite"?(g(),b("div",DV,[k(W,{"model-value":d.database,"onUpdate:modelValue":h=>f("database",h),label:"Database Path",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])):d.driver==="postgres"||d.driver==="postgresql"?(g(),b("div",$V,[c("div",TV,[k(W,{"model-value":d.host,"onUpdate:modelValue":h=>f("host",h),label:"Host",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":d.port,"onUpdate:modelValue":h=>f("port",h),label:"Port",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])]),c("div",EV,[k(W,{"model-value":d.database,"onUpdate:modelValue":h=>f("database",h),label:"Database",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":d.schema,"onUpdate:modelValue":h=>f("schema",h),label:"Schema",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])]),c("div",OV,[k(W,{"model-value":d.user,"onUpdate:modelValue":h=>f("user",h),label:"User",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":d.password,"onUpdate:modelValue":h=>f("password",h),label:"Password",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])])):d.driver==="mysql"||d.driver==="sqlserver"?(g(),b("div",PV,[c("div",LV,[k(W,{"model-value":d.host,"onUpdate:modelValue":h=>f("host",h),label:"Host",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":d.port,"onUpdate:modelValue":h=>f("port",h),label:"Port",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])]),k(W,{"model-value":d.database,"onUpdate:modelValue":h=>f("database",h),label:"Database",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),c("div",jV,[k(W,{"model-value":d.user,"onUpdate:modelValue":h=>f("user",h),label:"User",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":d.password,"onUpdate:modelValue":h=>f("password",h),label:"Password",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])])):I("",!0)])]),_:1},8,["model-value"])]),c("div",RV,[a[8]||(a[8]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"S3-compatible Storage",-1)),k(gt,{"model-value":t.s3Connections,"onUpdate:modelValue":a[1]||(a[1]=d=>l.$emit("update:s3Connections",d)),"add-label":"Add Bucket","default-item":r},{default:R(({item:d,index:u,update:f})=>[c("div",BV,[k(W,{"model-value":d.name,"onUpdate:modelValue":h=>f("name",h),label:"Connection Name",error:i(d.name,u),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),c("div",IV,[c("input",{type:"radio",id:`default-s3-${d._id}`,checked:t.defaultStorageBucket===d.name,onChange:h=>l.$emit("update:defaultStorageBucket",d.name),class:"h-4 w-4 text-sky-600 focus:ring-sky-500"},null,40,UV),c("label",{for:`default-s3-${d._id}`,class:"text-sm text-gray-700 dark:text-gray-300"}," Default storage bucket ",8,NV)]),c("div",zV,[k(W,{"model-value":d.bucket,"onUpdate:modelValue":h=>f("bucket",h),label:"Bucket",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":d.region,"onUpdate:modelValue":h=>f("region",h),label:"Region",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])]),k(W,{"model-value":d.endpoint,"onUpdate:modelValue":h=>f("endpoint",h),label:"Endpoint",hint:"Leave empty for AWS S3, or specify custom endpoint for MinIO, etc.",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),c("div",FV,[k(W,{"model-value":d.access_key,"onUpdate:modelValue":h=>f("access_key",h),label:"Access Key",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":d.secret_key,"onUpdate:modelValue":h=>f("secret_key",h),label:"Secret Key",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])])]),_:1},8,["model-value"])])]))}},HV={class:"flex min-h-screen"},WV={class:"w-64 shrink-0 border-r border-gray-200 p-6 dark:border-gray-800"},qV={class:"space-y-1 mb-6"},KV=["onClick"],GV=["fill","viewBox","stroke"],JV=["stroke-linecap","stroke-linejoin","stroke-width","fill","d"],YV={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},QV={class:"flex-1 p-10"},XV={class:"mt-8 space-y-6"},ZV={class:"space-y-3"},eM={class:"text-gray-600 dark:text-gray-400"},tM={class:"text-gray-600 dark:text-gray-400"},sM={class:"text-gray-600 dark:text-gray-400"},iM={class:"text-gray-600 dark:text-gray-400"},nM={class:"text-gray-600 dark:text-gray-400"},oM={class:"text-gray-600 dark:text-gray-400"},rM={class:"text-gray-600 dark:text-gray-400"},lM={class:"text-gray-600 dark:text-gray-400"},aM={class:"text-gray-600 dark:text-gray-400"},uM={class:"text-gray-600 dark:text-gray-400"},dM={key:1,class:"text-gray-600 dark:text-gray-400"},cM={key:2,class:"text-gray-600 dark:text-gray-400"},fM={class:"text-gray-600 dark:text-gray-400"},hM={class:"text-gray-600 dark:text-gray-400"},pM={class:"text-gray-600 dark:text-gray-400"},mM={class:"text-gray-600 dark:text-gray-400"},gM={key:1,class:"text-gray-600 dark:text-gray-400"},vM={class:"text-gray-600 dark:text-gray-400"},yM={class:"text-gray-600 dark:text-gray-400"},bM={class:"text-gray-600 dark:text-gray-400"},kM={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},xM={class:"space-y-5"},wM={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},_M={class:"space-y-5"},SM={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 space-y-6"},CM={class:"space-y-6"},AM={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},VM={key:0,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},MM={key:1,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},DM={class:"space-y-3"},$M={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},TM={class:"grid grid-cols-2 gap-3"},EM={key:2,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},OM={class:"space-y-3"},PM={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},LM={class:"grid grid-cols-2 gap-3"},jM={key:3,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},RM={class:"space-y-3"},BM={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},IM={class:"grid grid-cols-2 gap-3"},UM={key:4,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},NM={class:"space-y-3"},zM={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},FM={class:"grid grid-cols-2 gap-3"},HM={key:5,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},WM={class:"space-y-3"},qM={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},KM={class:"grid grid-cols-2 gap-3"},GM={key:6,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},JM={class:"space-y-3"},YM={key:7,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},QM={class:"space-y-3"},XM={key:8,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},ZM={class:"space-y-3"},eD={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},tD={class:"grid grid-cols-2 gap-3"},sD={key:9,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},iD={class:"space-y-3"},nD={class:"flex items-start gap-3 mb-2"},oD={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},rD={class:"grid grid-cols-2 gap-3"},lD={key:10,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},aD={class:"space-y-4"},uD={class:"grid gap-4 sm:grid-cols-2"},dD={class:"p-3 rounded-md"},cD={class:"p-3 rounded-md"},fD={class:"grid gap-4 sm:grid-cols-2"},hD={class:"space-y-3"},pD={class:"space-y-3"},mD={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},gD={class:"grid gap-6 sm:grid-cols-2"},vD={class:"space-y-2"},yD={class:"space-y-2"},bD={key:11,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},kD={class:"space-y-4"},xD={class:"grid gap-4 sm:grid-cols-2"},wD={class:"p-3 rounded-md"},_D={class:"p-3 rounded-md"},SD={class:"grid gap-4 sm:grid-cols-2"},CD={class:"space-y-3"},AD={class:"space-y-3"},VD={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},MD={class:"grid gap-6 sm:grid-cols-2"},DD={class:"space-y-2"},$D={class:"space-y-2"},TD={key:12,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},ED={class:"space-y-3"},OD={class:"flex items-start gap-3 mb-2"},PD={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},LD={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},jD={class:"space-y-5"},RD={class:"pt-4 border-t border-gray-200 dark:border-gray-700"},BD={class:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between mb-4"},ID={key:0,class:"space-y-3"},UD={class:"flex flex-col gap-3"},ND={class:"grid gap-3 grid-cols-[1fr_160px]"},zD={class:"flex items-center justify-between"},FD={key:1,class:"text-xs text-gray-500 dark:text-gray-400"},HD={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},WD={class:"space-y-6"},qD={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},KD={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},GD={class:"space-y-2"},JD={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},YD={__name:"NewProjectView",setup(t){const e=Ha(),s=Do(),i=qa(),n=ae(null),o=ae(null),r=ae(!0),l=[{id:"claude",label:"Claude Code",description:"Anthropic's IDE-focused assistant."},{id:"copilot",label:"GitHub Copilot",description:"Complements VS Code and JetBrains editors."},{id:"agents",label:"Multi-Agent (OpenAI Codex, Cursor, etc.)",description:"Shared instructions for multi-model orchestrators."}],a=J=>J?Array.isArray(J)?Array.from(new Set(J.map(S=>String(S)))):typeof J=="string"?[J]:[]:[],d=()=>{Array.isArray(p.value.ai.assistants)||(p.value.ai.assistants=a(p.value.ai.assistants))},u=[{id:"overview",label:"Overview",icon:Wa},{id:"basics",label:"Basics",icon:Ec},{id:"structure",label:"Project Structure",icon:aa},{id:"packages",label:"Packages",icon:Oc},{id:"ai",label:"AI Assistants",svgIcon:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"},{id:"git",label:"Git & Hooks",svgIcon:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"},{id:"connections",label:"Connections",icon:Pc},{id:"scaffold",label:"Scaffold Behavior",svgIcon:"M256 64L576 64L576 576L64 576L64 192L256 192L256 64zM256 224L96 224L96 544L256 544L256 224zM288 544L544 544L544 96L288 96L288 544zM440 152L488 152L488 200L440 200L440 152zM392 152L392 200L344 200L344 152L392 152zM440 248L488 248L488 296L440 296L440 248zM392 248L392 296L344 296L344 248L392 248zM152 280L200 280L200 328L152 328L152 280zM392 344L392 392L344 392L344 344L392 344zM152 376L200 376L200 424L152 424L152 376zM488 344L488 392L440 392L440 344L488 344z",svgViewBox:"0 0 640 640",svgFill:"currentColor",svgStroke:"none",svgStrokeWidth:0,svgPathFill:"currentColor"}],f=ae("basics"),h=ae(!1),m=ae(null),w=ae(!0),p=ae({name:"",location:"",type:"project",author:{name:"",email:"",affiliation:""},scaffold:{seed_on_scaffold:!1,seed:"",set_theme_on_scaffold:!0,ggplot_theme:"theme_minimal",source_all_functions:!0,notebook_format:"quarto",ide:"vscode",positron:!1},packages:{use_renv:!1,default_packages:[]},ai:{enabled:!0,assistants:[],canonical_file:"CLAUDE.md",canonical_content:""},git:{initialize:!0,gitignore_template:"gitignore-project",gitignore_content:"",user_name:"",user_email:"",hooks:{ai_sync:!1,data_security:!1,check_sensitive_dirs:!1}},connections:{databaseConnections:[],s3Connections:[],defaultDatabase:null,defaultStorageBucket:null},directories_enabled:{},directories:{},extra_directories:[],extra_directories_enabled:{}}),C=()=>{const J=s.query.section;J&&["overview","author","scaffold","structure","packages","ai","git"].includes(J)&&(f.value=J)};We(()=>s.query.section,J=>{J&&["overview","author","scaffold","structure","packages","ai","git"].includes(J)?f.value=J:J||(f.value="overview")}),We(f,J=>{s.query.section!==J&&e.replace({query:{...s.query,section:J}})}),ns(async()=>{console.log("[DEBUG] NewProjectView mounted - starting initialization"),C();try{console.log("[DEBUG] Fetching global settings from /api/settings");const J=await fetch("/api/settings");if(console.log("[DEBUG] Settings response status:",J.status,J.ok),J.ok&&(n.value=await J.json(),n.value)){if(n.value.global?.projects_root&&(p.value.location=n.value.global.projects_root),p.value.author={...n.value.author},n.value.defaults?.project_type&&(p.value.type=n.value.defaults.project_type),n.value.defaults?.scaffold&&(p.value.scaffold={...n.value.defaults.scaffold}),n.value.defaults?.packages)if(Array.isArray(n.value.defaults.packages)){const Q=n.value.defaults.packages.map(G=>({name:G.name||"",source:G.source||"cran",auto_attach:G.auto_attach!==!1}));p.value.packages.default_packages.splice(0,p.value.packages.default_packages.length,...Q)}else n.value.defaults.packages.default_packages&&(p.value.packages={use_renv:n.value.defaults.packages.use_renv||!1,default_packages:(n.value.defaults.packages.default_packages||[]).map(Q=>({name:Q.name||"",source:Q.source||"cran",auto_attach:Q.auto_attach!==!1}))});const v=a(n.value.defaults?.ai_assistants);p.value.ai={enabled:n.value.defaults?.ai_support!==!1,assistants:v.length>0?v:["claude"],canonical_file:n.value.defaults?.ai_canonical_file||"CLAUDE.md",canonical_content:""},d(),p.value.ai.enabled&&p.value.ai.canonical_file&&ce(p.value.ai.canonical_file,p.value.type),p.value.git.initialize=n.value.defaults?.use_git!==!1,p.value.git.user_name=n.value.git?.user_name||"",p.value.git.user_email=n.value.git?.user_email||"",n.value.defaults?.git_hooks&&(p.value.git.hooks={...n.value.defaults.git_hooks});const M={project:"gitignore-project",project_sensitive:"gitignore-project_sensitive",course:"gitignore-course",presentation:"gitignore-presentation"};p.value.git.gitignore_template=M[p.value.type]||"gitignore-project",p.value.git.gitignore_template&&F(p.value.git.gitignore_template)}const S=await fetch("/api/settings-catalog");S.ok&&(o.value=await S.json()),V()}catch(J){console.error("[DEBUG] Failed to load settings:",J),console.error("[DEBUG] Error details:",J.message,J.stack),i.error("Load Error","Could not load default settings")}finally{console.log("[DEBUG] Initialization complete, loading =",r.value),r.value=!1,setTimeout(()=>{if(m.value&&m.value.$el){const J=m.value.$el.querySelector("input");J&&J.focus()}},100)}}),We(()=>p.value.type,J=>{V();const S={project:"gitignore-project",project_sensitive:"gitignore-project_sensitive",course:"gitignore-course",presentation:"gitignore-presentation"};p.value.git.gitignore_template=S[J]||"gitignore-project"}),We(()=>p.value.packages.default_packages,(J,S)=>{console.log("[DEBUG PACKAGES WATCH] Packages changed!"),console.log("[DEBUG PACKAGES WATCH] Old:",S),console.log("[DEBUG PACKAGES WATCH] New:",J),console.trace("[DEBUG PACKAGES WATCH] Stack trace:")},{deep:!0}),We(()=>p.value.git.gitignore_template,J=>{J&&F(J)}),We(()=>p.value.name,()=>{n.value?.global?.projects_root&&$e()}),We(()=>p.value.ai.enabled,J=>{J&&p.value.ai.canonical_file&&ce(p.value.ai.canonical_file,p.value.type)}),We(()=>p.value.ai.canonical_file,J=>{J&&p.value.ai.enabled&&ce(J,p.value.type)}),We(()=>p.value.type,J=>{p.value.ai.canonical_file==="CLAUDE.md"&&p.value.ai.enabled&&ce("CLAUDE.md",J)});const V=()=>{if(!o.value?.project_types)return;const J=o.value.project_types[p.value.type];if(!J?.directories)return;const S=n.value?.project_types?.[p.value.type];if(!p.value.git.gitignore_template||p.value.git.gitignore_template==="gitignore-project"){const v={project:"gitignore-project",project_sensitive:"gitignore-sensitive",course:"gitignore-course",presentation:"gitignore-presentation"};p.value.git.gitignore_template=v[p.value.type]||"gitignore-project"}F(p.value.git.gitignore_template),p.value.directories_enabled=Object.entries(J.directories).reduce((v,[M,Q])=>(v[M]=Q.enabled_by_default!==!1,v),{}),p.value.directories=Object.entries(J.directories).reduce((v,[M,Q])=>(v[M]=S?.directories?.[M]||Q.default||"",v),{}),S?.extra_directories&&Array.isArray(S.extra_directories)?(p.value.extra_directories=S.extra_directories.map(v=>({...v,_source:"global"})),p.value.extra_directories_enabled=S.extra_directories.reduce((v,M)=>(M.key&&(v[M.key]=!0),v),{})):(p.value.extra_directories=[],p.value.extra_directories_enabled={}),console.log("[DEBUG] loadProjectTypeDefaults() finished - packages still:",p.value.packages.default_packages)},U=J=>o.value?.project_types?.[J]?.label||J,B=ne(()=>({overview:"Overview",basics:"Basics",author:"Author & Metadata",scaffold:"Scaffold Behavior",structure:"Project Structure",connections:"Connections",packages:"Packages & Dependencies",ai:"AI Assistants",git:"Git & Hooks",review:"Review & Create"})[f.value]||"New Project"),H=ne(()=>({overview:"Quick overview of your project settings. We used your Framework Project Defaults as a starting point.",basics:"Essential project settings including name, location, type, and editor support.",author:"Configure author information embedded in project templates.",scaffold:"Runtime settings that control what happens when scaffold() runs.",structure:"Customize which directories to create for this project type.",connections:"Database and storage connections for this project.",packages:"Configure package management and default packages.",ai:"Configure AI assistant integration for this project.",git:"Configure version control and git hooks.",review:"Review your project configuration and create the project."})[f.value]||"");ne(()=>({vscode:"Positron / VS Code",rstudio:"RStudio","rstudio,vscode":"Both",none:"Other"})[p.value.scaffold.ide]||p.value.scaffold.ide);const j=ne(()=>{const J=[];return p.value.git.hooks.ai_sync&&J.push("Sync AI files"),p.value.git.hooks.data_security&&J.push("Check for secrets"),p.value.git.hooks.check_sensitive_dirs&&J.push("Warn about sensitive dirs"),J}),T=ne(()=>{const J=p.value.connections.databaseConnections.length,S=p.value.connections.s3Connections.length;return{databases:J,buckets:S}}),A=ne({get(){const J=p.value.git.hooks||{};return{initialize:p.value.git.initialize,user_name:p.value.git.user_name||"",user_email:p.value.git.user_email||"",hooks:{ai_sync:J.ai_sync||!1,data_security:J.data_security||!1,check_sensitive_dirs:J.check_sensitive_dirs||!1}}},set(J){p.value.git.initialize=J.initialize,p.value.git.user_name=J.user_name,p.value.git.user_email=J.user_email,p.value.git.hooks={ai_sync:J.hooks.ai_sync,data_security:J.hooks.data_security,check_sensitive_dirs:J.hooks.check_sensitive_dirs}}});ne(()=>{const J=p.value.location,S=n.value?.global?.projects_root;return!J||J===S?"(not set)":J});const Y=(J,S)=>{d(),S?p.value.ai.assistants.includes(J)||p.value.ai.assistants.push(J):p.value.ai.assistants=p.value.ai.assistants.filter(v=>v!==J)},te=J=>{p.value.location=J;const S=n.value?.global?.projects_root||"",v=typeof J=="string"?J.trim():"";!v||S&&v===S?(w.value=!0,$e()):w.value=!1},me=()=>{p.value.packages.default_packages||(p.value.packages.default_packages=[]),p.value.packages.default_packages.push({name:"",source:"cran",auto_attach:!1})},le=J=>{p.value.packages.default_packages.splice(J,1)},F=async J=>{try{const S=await fetch(`/api/templates/${J}`);if(S.ok){const v=await S.json();v.success&&v.contents&&(p.value.git.gitignore_content=v.contents)}}catch(S){console.error("Failed to load gitignore template:",S)}},ge=async()=>{p.value.git.gitignore_template&&(await F(p.value.git.gitignore_template),i.success("Template Reset","Restored default .gitignore template"))},ce=async(J,S)=>{try{let v;if(J==="CLAUDE.md")switch(S){case"project_sensitive":v="ai_claude_sensitive";break;case"course":v="ai_claude_course";break;case"presentation":v="ai_claude_presentation";break;default:v="ai_claude_project"}else J==="AGENTS.md"?v="ai_agents":J===".github/copilot-instructions.md"&&(v="ai_copilot");const M=await fetch(`/api/templates/${v}`);if(M.ok){const Q=await M.json();Q.success&&Q.contents&&(p.value.ai.canonical_content=Q.contents)}}catch(v){console.error("Failed to load AI template:",v)}},de=ne(()=>o.value?.project_types?o.value.project_types[p.value.type]?.directories||{}:{});ne(()=>Object.values(p.value.directories_enabled).filter(J=>J).length);const X=J=>Object.keys(p.value.directories_enabled).filter(v=>p.value.directories_enabled[v]?J==="workspace"?v==="notebooks"||v==="scripts"||v==="functions":J==="input"?v.startsWith("inputs_"):J==="output"?v.startsWith("outputs_"):J==="temporary"?v==="cache"||v==="scratch":!1:!1).length,Z=J=>Array.isArray(p.value.extra_directories)?p.value.extra_directories.filter(S=>S.type===J&&S._source==="global"):[],se=J=>Array.isArray(p.value.extra_directories)?p.value.extra_directories.filter(S=>S.type===J&&S._source!=="global"):[],Pe=(J,S)=>{Array.isArray(p.value.extra_directories)||(p.value.extra_directories=[]);const v=p.value.extra_directories.filter(Q=>Q._source==="global"||Q.type!==J&&Q._source!=="global"),M=S.map(Q=>({...Q,type:J,_source:"project"}));p.value.extra_directories=[...v,...M],M.forEach(Q=>{Q.key&&!p.value.extra_directories_enabled[Q.key]&&(p.value.extra_directories_enabled[Q.key]=!0)})},P=J=>{e.push({query:{...s.query,section:J}})},$e=()=>{if(!w.value||!p.value.name||!p.value.name.trim())return;const J=n.value?.global?.projects_root||"";if(!J)return;const S=(p.value.location||"").trim();if(S&&!S.startsWith(J))return;const v=p.value.name.toLowerCase().trim().replace(/[\s_]+/g,"-").replace(/[^a-z0-9-]/g,"").replace(/-+/g,"-").replace(/^-|-$/g,"");if(!v){p.value.location=J;return}const M=J.replace(/\/+$/,"");p.value.location=`${M}/${v}`},Ie=async()=>{if(!p.value.name||!p.value.name.trim()){i.error("Validation Error","Project name is required"),P("overview");return}if(!p.value.location||!p.value.location.trim()){i.error("Validation Error","Project location is required"),P("overview");return}try{h.value=!0;const J=o.value?.project_types?.[p.value.type],S={};J?.directories&&Object.entries(J.directories).forEach(([we,$])=>{p.value.directories_enabled[we]&&(S[we]=$.default)});const v={};p.value.connections.databaseConnections.forEach(we=>{const{_id:$,name:L,...q}=we;v[L]=q});const M={};p.value.connections.s3Connections.forEach(we=>{const{_id:$,name:L,...q}=we;M[L]=q});const Q={name:p.value.name.trim(),location:p.value.location.trim(),type:p.value.type,author:p.value.author,scaffold:p.value.scaffold,packages:p.value.packages,ai:p.value.ai,git:p.value.git,connections:{default_database:p.value.connections.defaultDatabase,default_storage_bucket:p.value.connections.defaultStorageBucket,databases:v,storage_buckets:M},directories:S},G=await fetch("/api/projects/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Q)});if(!G.ok){const we=await G.json();throw new Error(we.message||"Failed to create project")}const be=await G.json();i.success("Project Created",`${p.value.name} has been created successfully`),e.push("/projects")}catch(J){console.error("Failed to create project:",J),i.error("Creation Failed",J.message||"Could not create the project")}finally{h.value=!1}},Qe=J=>{(J.metaKey||J.ctrlKey)&&J.key==="s"&&(J.preventDefault(),Ie())};return ns(()=>{window.addEventListener("keydown",Qe)}),Mo(()=>{window.removeEventListener("keydown",Qe)}),(J,S)=>(g(),b("div",HV,[c("nav",WV,[S[42]||(S[42]=c("h2",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"New Project",-1)),c("div",qV,[(g(),b(ee,null,ke(u,v=>(g(),b(ee,{key:v.id},[v.id==="basics"?(g(),pe(Da,{key:0},{default:R(()=>[...S[41]||(S[41]=[ie("Settings",-1)])]),_:1})):I("",!0),c("a",{href:"#",onClick:Ut(M=>f.value=v.id,["prevent"]),class:Ee(["flex items-center gap-2 px-3 py-2 rounded-md text-sm transition",f.value===v.id?"bg-sky-50 text-sky-700 font-medium dark:bg-sky-900/20 dark:text-sky-400":"text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-800"])},[v.icon?(g(),pe(Ts(v.icon),{key:0,class:"h-4 w-4"})):v.svgIcon?(g(),b("svg",{key:1,class:"h-4 w-4",fill:v.svgFill??"none",viewBox:v.svgViewBox??"0 0 24 24",stroke:v.svgStroke??"currentColor"},[c("path",{"stroke-linecap":v.svgStrokeLinecap??"round","stroke-linejoin":v.svgStrokeLinejoin??"round","stroke-width":v.svgStrokeWidth??2,fill:v.svgPathFill??"none",d:v.svgIcon},null,8,JV)],8,GV)):I("",!0),ie(" "+z(v.label),1)],10,KV)],64))),64))]),c("div",YV,[k(ze,{variant:"primary",size:"md",class:"w-full",disabled:h.value||!p.value.name||!p.value.location,onClick:Ie},{default:R(()=>[ie(z(h.value?"Creating...":"Create Project"),1)]),_:1},8,["disabled"])])]),c("div",QV,[k($o,{title:B.value,description:H.value},null,8,["title","description"]),c("div",XV,[Je(c("div",null,[c("div",ZV,[k(Ms,{title:"Basics",onClick:S[0]||(S[0]=v=>f.value="basics")},{default:R(()=>[c("span",eM,z(p.value.name||"Untitled Project"),1),p.value.author.name?(g(),b(ee,{key:0},[S[43]||(S[43]=c("span",{class:"text-gray-400 dark:text-gray-500 mx-1"},"",-1)),c("span",tM,z(p.value.author.name),1)],64)):I("",!0),S[44]||(S[44]=c("span",{class:"text-gray-400 dark:text-gray-500 mx-1"},"",-1)),c("span",sM,z(U(p.value.type)),1)]),_:1}),k(Ms,{title:"Project Structure",onClick:S[1]||(S[1]=v=>f.value="structure")},{default:R(()=>[c("span",iM,z(U(p.value.type)),1),S[46]||(S[46]=c("span",{class:"text-gray-400 dark:text-gray-500 mx-1"},"",-1)),c("span",nM,z(X("workspace"))+" workspace",1),S[47]||(S[47]=c("span",{class:"text-gray-400 dark:text-gray-500 mx-1"},"",-1)),c("span",oM,z(X("input"))+" input",1),X("output")>0?(g(),b(ee,{key:0},[S[45]||(S[45]=c("span",{class:"text-gray-400 dark:text-gray-500 mx-1"},"",-1)),c("span",rM,z(X("output"))+" output",1)],64)):I("",!0)]),_:1}),k(Ms,{title:"Packages",onClick:S[2]||(S[2]=v=>f.value="packages")},{default:R(()=>[c("span",lM," renv: "+z(p.value.packages.use_renv?"enabled":"disabled"),1),p.value.packages.default_packages&&p.value.packages.default_packages.length>0?(g(),b(ee,{key:0},[S[48]||(S[48]=c("span",{class:"text-gray-400 dark:text-gray-500 mx-1"},"",-1)),c("span",aM,z(p.value.packages.default_packages.length)+" package"+z(p.value.packages.default_packages.length!==1?"s":""),1)],64)):I("",!0)]),_:1}),k(Ms,{title:"AI Assistants",onClick:S[3]||(S[3]=v=>f.value="ai")},{default:R(()=>[p.value.ai.enabled&&Array.isArray(p.value.ai.assistants)&&p.value.ai.assistants.length>0?(g(),b(ee,{key:0},[ie(z(p.value.ai.assistants.map(v=>v.charAt(0).toUpperCase()+v.slice(1)).join(", "))+" ",1),S[49]||(S[49]=c("span",{class:"text-gray-400 dark:text-gray-500 mx-1"},"",-1)),c("span",uM,z(p.value.ai.canonical_file),1)],64)):p.value.ai.enabled?(g(),b("span",dM,"Enabled (no assistants selected)")):(g(),b("span",cM,"Disabled"))]),_:1}),k(Ms,{title:"Git & Hooks",onClick:S[4]||(S[4]=v=>f.value="git")},{default:R(()=>[c("span",fM," Git: "+z(p.value.git.initialize?"enabled":"disabled"),1),p.value.git.initialize&&j.value.length>0?(g(),b(ee,{key:0},[S[50]||(S[50]=c("span",{class:"text-gray-400 dark:text-gray-500 mx-1"},"",-1)),c("span",hM,z(j.value.join(", ")),1)],64)):I("",!0)]),_:1}),k(Ms,{title:"Connections",onClick:S[5]||(S[5]=v=>f.value="connections")},{default:R(()=>[T.value.databases>0||T.value.buckets>0?(g(),b(ee,{key:0},[c("span",pM,z(T.value.databases)+" database"+z(T.value.databases!==1?"s":""),1),T.value.buckets>0?(g(),b(ee,{key:0},[S[51]||(S[51]=c("span",{class:"text-gray-400 dark:text-gray-500 mx-1"},"",-1)),c("span",mM,z(T.value.buckets)+" bucket"+z(T.value.buckets!==1?"s":""),1)],64)):I("",!0)],64)):(g(),b("span",gM,"framework_db only"))]),_:1}),k(Ms,{title:"Scaffold Behavior",onClick:S[6]||(S[6]=v=>f.value="scaffold")},{default:R(()=>[c("span",vM,[p.value.scaffold.source_all_functions?(g(),b(ee,{key:0},[S[52]||(S[52]=ie(" Functions loaded from ",-1)),S[53]||(S[53]=c("code",{class:"text-xs bg-gray-100 dark:bg-gray-800 px-1 rounded"},"functions/",-1))],64)):(g(),b(ee,{key:1},[ie(" Does not load functions ")],64))]),S[54]||(S[54]=c("span",{class:"text-gray-400 dark:text-gray-500 mx-1"},"",-1)),c("span",yM,[p.value.scaffold.set_theme_on_scaffold?(g(),b(ee,{key:0},[ie(" ggplot2: "+z((p.value.scaffold.ggplot_theme||"theme_minimal").replace("theme_","")),1)],64)):(g(),b(ee,{key:1},[ie(" No ggplot theme ")],64))]),S[55]||(S[55]=c("span",{class:"text-gray-400 dark:text-gray-500 mx-1"},"",-1)),c("span",bM,z(p.value.scaffold.seed_on_scaffold?"Seed: "+(p.value.scaffold.seed||"default"):"No random seed"),1)]),_:1})])],512),[[nt,f.value==="overview"]]),Je(c("div",null,[c("div",kM,[c("div",xM,[k(W,{ref_key:"projectNameInput",ref:m,modelValue:p.value.name,"onUpdate:modelValue":S[7]||(S[7]=v=>p.value.name=v),label:"Project Name",hint:"Human-readable name for your project",placeholder:"My Analysis Project",required:""},null,8,["modelValue"]),k(W,{"model-value":p.value.location,"onUpdate:modelValue":te,label:"Project Location",hint:"Directory where the project will be created",placeholder:"e.g., ~/projects or /Users/yourname/code"},null,8,["model-value"]),k(Ht,{modelValue:p.value.type,"onUpdate:modelValue":S[8]||(S[8]=v=>p.value.type=v),label:"Project Type",hint:"Choose the template structure for your project"},{default:R(()=>[...S[56]||(S[56]=[c("option",{value:"project"},"Research Project",-1),c("option",{value:"course"},"Course",-1),c("option",{value:"presentation"},"Presentation",-1)])]),_:1},8,["modelValue"]),c("div",null,[S[58]||(S[58]=c("label",{class:"block text-sm font-semibold text-gray-900 dark:text-white mb-3"}," Supported Editors ",-1)),k(gi,{modelValue:p.value.scaffold.positron,"onUpdate:modelValue":S[9]||(S[9]=v=>p.value.scaffold.positron=v),id:"support-positron",description:"Enable Positron-specific workspace and settings files"},{default:R(()=>[...S[57]||(S[57]=[ie(" Positron ",-1)])]),_:1},8,["modelValue"]),S[59]||(S[59]=c("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-3"}," RStudio supported by default ",-1))]),k(Ht,{modelValue:p.value.scaffold.notebook_format,"onUpdate:modelValue":S[10]||(S[10]=v=>p.value.scaffold.notebook_format=v),label:"Default Notebook Format",hint:"Format used when creating new notebooks"},{default:R(()=>[...S[60]||(S[60]=[c("option",{value:"quarto"},"Quarto (.qmd)",-1),c("option",{value:"rmarkdown"},"R Markdown (.Rmd)",-1)])]),_:1},8,["modelValue"]),c("div",wM,[S[61]||(S[61]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"}," Author Information ",-1)),S[62]||(S[62]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-5"}," Author information is embedded in project templates and documentation. ",-1)),c("div",_M,[k(W,{modelValue:p.value.author.name,"onUpdate:modelValue":S[11]||(S[11]=v=>p.value.author.name=v),label:"Your Name",placeholder:"Your Name"},null,8,["modelValue"]),k(W,{modelValue:p.value.author.email,"onUpdate:modelValue":S[12]||(S[12]=v=>p.value.author.email=v),type:"email",label:"Email",placeholder:"your.email@example.com"},null,8,["modelValue"]),k(W,{modelValue:p.value.author.affiliation,"onUpdate:modelValue":S[13]||(S[13]=v=>p.value.author.affiliation=v),label:"Affiliation",placeholder:"Organization"},null,8,["modelValue"])])])])])],512),[[nt,f.value==="basics"]]),Je(c("div",null,[c("div",SM,[S[63]||(S[63]=c("div",null,[c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"}," Scaffold Behavior "),c("p",{class:"text-sm text-gray-600 dark:text-gray-400"},[ie(" Automatic actions when "),c("code",{class:"px-1.5 py-0.5 bg-gray-200 dark:bg-gray-700 rounded text-xs"},"scaffold()"),ie(" runs to initialize your project environment. ")])],-1)),k(xf,{modelValue:p.value.scaffold,"onUpdate:modelValue":S[14]||(S[14]=v=>p.value.scaffold=v),flush:""},null,8,["modelValue"])])],512),[[nt,f.value==="scaffold"]]),Je(c("div",CM,[c("div",AM,[k(W4,{legend:"Project Type",description:"Select a project type to customize the directory structure."},{default:R(()=>[k(fl,{modelValue:p.value.type,"onUpdate:modelValue":S[15]||(S[15]=v=>p.value.type=v),id:"type-project",name:"project-type",value:"project"},{default:R(()=>[...S[64]||(S[64]=[c("div",null,[c("div",{class:"font-medium text-sm"},"Research Project"),c("div",{class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5"}," Full-featured with organized data, work, and output directories ")],-1)])]),_:1},8,["modelValue"]),k(fl,{modelValue:p.value.type,"onUpdate:modelValue":S[16]||(S[16]=v=>p.value.type=v),id:"type-sensitive",name:"project-type",value:"project_sensitive"},{default:R(()=>[...S[65]||(S[65]=[c("div",null,[c("div",{class:"font-medium text-sm"},"Privacy Sensitive Project"),c("div",{class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5"}," Enhanced privacy controls with separate private/public flows ")],-1)])]),_:1},8,["modelValue"]),k(fl,{modelValue:p.value.type,"onUpdate:modelValue":S[17]||(S[17]=v=>p.value.type=v),id:"type-presentation",name:"project-type",value:"presentation"},{default:R(()=>[...S[66]||(S[66]=[c("div",null,[c("div",{class:"font-medium text-sm"},"Presentation"),c("div",{class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5"}," Minimal structure for slides and presentations ")],-1)])]),_:1},8,["modelValue"]),k(fl,{modelValue:p.value.type,"onUpdate:modelValue":S[18]||(S[18]=v=>p.value.type=v),id:"type-course",name:"project-type",value:"course"},{default:R(()=>[...S[67]||(S[67]=[c("div",null,[c("div",{class:"font-medium text-sm"},"Course/Teaching"),c("div",{class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5"}," Simplified structure for teaching materials ")],-1)])]),_:1},8,["modelValue"])]),_:1})]),p.value.type==="presentation"?(g(),b("div",VM,[S[68]||(S[68]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Presentation File",-1)),k(W,{modelValue:p.value.directories.presentation_source,"onUpdate:modelValue":S[19]||(S[19]=v=>p.value.directories.presentation_source=v),label:"Presentation source file",placeholder:"presentation.qmd",hint:"Main Quarto file for your slides"},null,8,["modelValue"])])):I("",!0),p.value.type==="project"?(g(),b("div",MM,[S[71]||(S[71]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Workspaces",-1)),S[72]||(S[72]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Functions, notebooks, and scripts scaffolded into every project.",-1)),c("div",DM,[(g(),b(ee,null,ke(["functions","notebooks","scripts"],v=>c("div",{key:v},[k(Ue,{id:`dir-${v}`,modelValue:p.value.directories_enabled[v],"onUpdate:modelValue":M=>p.value.directories_enabled[v]=M,label:de.value[v]?.label||v,description:de.value[v]?.hint,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),p.value.directories_enabled[v]?(g(),pe(W,{key:0,modelValue:p.value.directories[v],"onUpdate:modelValue":M=>p.value.directories[v]=M,placeholder:de.value[v]?.default,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)])),64)),(g(!0),b(ee,null,ke(Z("workspace"),v=>(g(),b("div",{key:`extra-${v.key}`},[k(Ue,{id:`extra-dir-${v.key}`,modelValue:p.value.extra_directories_enabled[v.key],"onUpdate:modelValue":M=>p.value.extra_directories_enabled[v.key]=M,label:v.label,description:`Custom: ${v.path}`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),p.value.extra_directories_enabled[v.key]?(g(),pe(W,{key:0,modelValue:v.path,"onUpdate:modelValue":M=>v.path=M,placeholder:v.path,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]))),128))]),c("div",$M,[S[69]||(S[69]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Add Custom Workspace Directories",-1)),S[70]||(S[70]=c("p",{class:"text-xs text-gray-600 dark:text-gray-400 mb-3"},"Add directories specific to this project only.",-1)),k(gt,{"model-value":se("workspace"),"onUpdate:modelValue":S[20]||(S[20]=v=>Pe("workspace",v)),"add-label":"Add Workspace Directory","default-item":()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:R(({item:v,index:M,update:Q})=>[c("div",TM,[k(W,{"model-value":v.key,"onUpdate:modelValue":G=>Q("key",G),label:"Key",placeholder:"e.g., tests",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":v.label,"onUpdate:modelValue":G=>Q("label",G),label:"Label",placeholder:"e.g., Tests",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":v.path,"onUpdate:modelValue":G=>Q("path",G),label:"Path",placeholder:"e.g., tests",prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])])):I("",!0),p.value.type==="project"?(g(),b("div",EM,[S[75]||(S[75]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Inputs",-1)),S[76]||(S[76]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Define the read-only locations where raw and prepared data live.",-1)),c("div",OM,[(g(),b(ee,null,ke(["inputs_raw","inputs_intermediate","inputs_final","reference"],v=>c("div",{key:v},[k(Ue,{id:`dir-${v}`,modelValue:p.value.directories_enabled[v],"onUpdate:modelValue":M=>p.value.directories_enabled[v]=M,label:de.value[v]?.label||v,description:de.value[v]?.hint,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),p.value.directories_enabled[v]?(g(),pe(W,{key:0,modelValue:p.value.directories[v],"onUpdate:modelValue":M=>p.value.directories[v]=M,placeholder:de.value[v]?.default,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)])),64)),(g(!0),b(ee,null,ke(Z("input"),v=>(g(),b("div",{key:`extra-${v.key}`},[k(Ue,{id:`extra-dir-${v.key}`,modelValue:p.value.extra_directories_enabled[v.key],"onUpdate:modelValue":M=>p.value.extra_directories_enabled[v.key]=M,label:v.label,description:`Custom: ${v.path}`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),p.value.extra_directories_enabled[v.key]?(g(),pe(W,{key:0,modelValue:v.path,"onUpdate:modelValue":M=>v.path=M,placeholder:v.path,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]))),128))]),c("div",PM,[S[73]||(S[73]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Add Custom Input Directories",-1)),S[74]||(S[74]=c("p",{class:"text-xs text-gray-600 dark:text-gray-400 mb-3"},"Add directories specific to this project only.",-1)),k(gt,{"model-value":se("input"),"onUpdate:modelValue":S[21]||(S[21]=v=>Pe("input",v)),"add-label":"Add Input Directory","default-item":()=>({key:"",label:"",path:"",type:"input",_id:Date.now()})},{default:R(({item:v,index:M,update:Q})=>[c("div",LM,[k(W,{"model-value":v.key,"onUpdate:modelValue":G=>Q("key",G),label:"Key",placeholder:"e.g., inputs_archive",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":v.label,"onUpdate:modelValue":G=>Q("label",G),label:"Label",placeholder:"e.g., Archive",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":v.path,"onUpdate:modelValue":G=>Q("path",G),label:"Path",placeholder:"e.g., inputs/archive",prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])])):I("",!0),p.value.type==="project"?(g(),b("div",jM,[S[78]||(S[78]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Outputs",-1)),S[79]||(S[79]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Outputs are public by default so results are easy to share.",-1)),c("div",RM,[(g(),b(ee,null,ke(["outputs_notebooks","outputs_tables","outputs_figures","outputs_models","outputs_reports"],v=>c("div",{key:v},[k(Ue,{id:`dir-${v}`,modelValue:p.value.directories_enabled[v],"onUpdate:modelValue":M=>p.value.directories_enabled[v]=M,label:de.value[v]?.label||v,description:de.value[v]?.hint,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),p.value.directories_enabled[v]?(g(),pe(W,{key:0,modelValue:p.value.directories[v],"onUpdate:modelValue":M=>p.value.directories[v]=M,placeholder:de.value[v]?.default,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)])),64)),(g(!0),b(ee,null,ke(Z("output"),v=>(g(),b("div",{key:`extra-${v.key}`},[k(Ue,{id:`extra-${v.key}`,modelValue:p.value.extra_directories_enabled[v.key],"onUpdate:modelValue":M=>p.value.extra_directories_enabled[v.key]=M,label:v.label,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label"]),p.value.extra_directories_enabled[v.key]?(g(),pe(W,{key:0,modelValue:v.path,"onUpdate:modelValue":M=>v.path=M,placeholder:v.path,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]))),128))]),c("div",BM,[S[77]||(S[77]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Add Custom Output Directories",-1)),k(gt,{"model-value":se("output"),"onUpdate:modelValue":S[22]||(S[22]=v=>Pe("output",v)),"add-label":"Add Output Directory","default-item":()=>({key:"",label:"",path:"",type:"output",_id:Date.now()})},{default:R(({item:v,index:M,update:Q})=>[c("div",IM,[k(W,{"model-value":v.key,"onUpdate:modelValue":G=>Q("key",G),label:"Key",placeholder:"e.g., outputs_animations",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":v.label,"onUpdate:modelValue":G=>Q("label",G),label:"Label",placeholder:"e.g., Animations",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":v.path,"onUpdate:modelValue":G=>Q("path",G),label:"Path",placeholder:"e.g., outputs/animations",prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])])):I("",!0),p.value.type==="project"?(g(),b("div",UM,[S[81]||(S[81]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Temporary",-1)),S[82]||(S[82]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Scratch space and cache (gitignored by default).",-1)),c("div",NM,[(g(),b(ee,null,ke(["cache","scratch"],v=>c("div",{key:v},[k(Ue,{id:`dir-${v}`,modelValue:p.value.directories_enabled[v],"onUpdate:modelValue":M=>p.value.directories_enabled[v]=M,label:de.value[v]?.label||v,description:de.value[v]?.hint,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),p.value.directories_enabled[v]?(g(),pe(W,{key:0,modelValue:p.value.directories[v],"onUpdate:modelValue":M=>p.value.directories[v]=M,placeholder:de.value[v]?.default,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)])),64)),(g(!0),b(ee,null,ke(Z("temporary"),v=>(g(),b("div",{key:`extra-${v.key}`},[k(Ue,{id:`extra-${v.key}`,modelValue:p.value.extra_directories_enabled[v.key],"onUpdate:modelValue":M=>p.value.extra_directories_enabled[v.key]=M,label:v.label,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label"]),p.value.extra_directories_enabled[v.key]?(g(),pe(W,{key:0,modelValue:v.path,"onUpdate:modelValue":M=>v.path=M,placeholder:v.path,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]))),128))]),c("div",zM,[S[80]||(S[80]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Add Custom Temporary Directories",-1)),k(gt,{"model-value":se("temporary"),"onUpdate:modelValue":S[23]||(S[23]=v=>Pe("temporary",v)),"add-label":"Add Temporary Directory","default-item":()=>({key:"",label:"",path:"",type:"temporary",_id:Date.now()})},{default:R(({item:v,index:M,update:Q})=>[c("div",FM,[k(W,{"model-value":v.key,"onUpdate:modelValue":G=>Q("key",G),label:"Key",placeholder:"e.g., temp_downloads",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":v.label,"onUpdate:modelValue":G=>Q("label",G),label:"Label",placeholder:"e.g., Downloads",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":v.path,"onUpdate:modelValue":G=>Q("path",G),label:"Path",placeholder:"e.g., temp/downloads",prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])])):I("",!0),p.value.type==="course"?(g(),b("div",HM,[S[84]||(S[84]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Course Materials",-1)),S[85]||(S[85]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Slides, assignments, readings, and documentation.",-1)),c("div",WM,[(g(),b(ee,null,ke(["slides","assignments","readings","course_docs"],v=>c("div",{key:v},[k(Ue,{id:`dir-${v}`,modelValue:p.value.directories_enabled[v],"onUpdate:modelValue":M=>p.value.directories_enabled[v]=M,label:de.value[v]?.label||v,description:de.value[v]?.hint,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),p.value.directories_enabled[v]?(g(),pe(W,{key:0,modelValue:p.value.directories[v],"onUpdate:modelValue":M=>p.value.directories[v]=M,placeholder:de.value[v]?.default,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)])),64)),(g(!0),b(ee,null,ke(Z("workspace"),v=>(g(),b("div",{key:`extra-${v.key}`},[k(Ue,{id:`extra-dir-${v.key}`,modelValue:p.value.extra_directories_enabled[v.key],"onUpdate:modelValue":M=>p.value.extra_directories_enabled[v.key]=M,label:v.label,description:`Custom: ${v.path}`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),p.value.extra_directories_enabled[v.key]?(g(),pe(W,{key:0,modelValue:v.path,"onUpdate:modelValue":M=>v.path=M,placeholder:v.path,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]))),128))]),c("div",qM,[S[83]||(S[83]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Add Custom Directories",-1)),k(gt,{"model-value":se("workspace"),"onUpdate:modelValue":S[24]||(S[24]=v=>Pe("workspace",v)),"add-label":"Add Directory","default-item":()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:R(({item:v,index:M,update:Q})=>[c("div",KM,[k(W,{"model-value":v.key,"onUpdate:modelValue":G=>Q("key",G),label:"Key",placeholder:"e.g., exercises",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":v.label,"onUpdate:modelValue":G=>Q("label",G),label:"Label",placeholder:"e.g., Exercises",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":v.path,"onUpdate:modelValue":G=>Q("path",G),label:"Path",placeholder:"e.g., exercises",prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])])):I("",!0),p.value.type==="course"?(g(),b("div",GM,[S[86]||(S[86]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Workspaces",-1)),S[87]||(S[87]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Module notebooks, functions, and scripts.",-1)),c("div",JM,[(g(),b(ee,null,ke(["notebooks","functions","scripts"],v=>c("div",{key:v},[k(Ue,{id:`dir-${v}`,modelValue:p.value.directories_enabled[v],"onUpdate:modelValue":M=>p.value.directories_enabled[v]=M,label:de.value[v]?.label||v,description:de.value[v]?.hint,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),p.value.directories_enabled[v]?(g(),pe(W,{key:0,modelValue:p.value.directories[v],"onUpdate:modelValue":M=>p.value.directories[v]=M,placeholder:de.value[v]?.default,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)])),64))])])):I("",!0),p.value.type==="course"?(g(),b("div",YM,[S[88]||(S[88]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Data & Storage",-1)),S[89]||(S[89]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Course datasets and temporary files.",-1)),c("div",QM,[(g(),b(ee,null,ke(["data","inputs","outputs","cache"],v=>c("div",{key:v},[k(Ue,{id:`dir-${v}`,modelValue:p.value.directories_enabled[v],"onUpdate:modelValue":M=>p.value.directories_enabled[v]=M,label:de.value[v]?.label||v,description:de.value[v]?.hint,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),p.value.directories_enabled[v]?(g(),pe(W,{key:0,modelValue:p.value.directories[v],"onUpdate:modelValue":M=>p.value.directories[v]=M,placeholder:de.value[v]?.default,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)])),64))])])):I("",!0),p.value.type==="presentation"?(g(),b("div",XM,[S[91]||(S[91]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Optional Directories",-1)),S[92]||(S[92]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Add supporting directories for data, scripts, or helper functions.",-1)),c("div",ZM,[(g(),b(ee,null,ke(["data","scripts","functions"],v=>c("div",{key:v},[k(Ue,{id:`dir-${v}`,modelValue:p.value.directories_enabled[v],"onUpdate:modelValue":M=>p.value.directories_enabled[v]=M,label:de.value[v]?.label||v,description:de.value[v]?.hint,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),p.value.directories_enabled[v]?(g(),pe(W,{key:0,modelValue:p.value.directories[v],"onUpdate:modelValue":M=>p.value.directories[v]=M,placeholder:de.value[v]?.default,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)])),64)),(g(!0),b(ee,null,ke(Z("workspace"),v=>(g(),b("div",{key:`extra-${v.key}`},[k(Ue,{id:`extra-dir-${v.key}`,modelValue:p.value.extra_directories_enabled[v.key],"onUpdate:modelValue":M=>p.value.extra_directories_enabled[v.key]=M,label:v.label,description:`Custom: ${v.path}`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),p.value.extra_directories_enabled[v.key]?(g(),pe(W,{key:0,modelValue:v.path,"onUpdate:modelValue":M=>v.path=M,placeholder:v.path,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]))),128))]),c("div",eD,[S[90]||(S[90]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Add Custom Directories",-1)),k(gt,{"model-value":se("workspace"),"onUpdate:modelValue":S[25]||(S[25]=v=>Pe("workspace",v)),"add-label":"Add Directory","default-item":()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:R(({item:v,index:M,update:Q})=>[c("div",tD,[k(W,{"model-value":v.key,"onUpdate:modelValue":G=>Q("key",G),label:"Key",placeholder:"e.g., assets",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":v.label,"onUpdate:modelValue":G=>Q("label",G),label:"Label",placeholder:"e.g., Assets",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":v.path,"onUpdate:modelValue":G=>Q("path",G),label:"Path",placeholder:"e.g., assets",prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])])):I("",!0),p.value.type==="project_sensitive"?(g(),b("div",sD,[S[94]||(S[94]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Work Directories",-1)),S[95]||(S[95]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Module locations for notebooks, scripts, and helper functions.",-1)),c("div",iD,[(g(),b(ee,null,ke(["functions","notebooks","scripts"],v=>c("div",{key:v},[c("div",nD,[k(Ue,{id:`dir-${v}`,modelValue:p.value.directories_enabled[v],"onUpdate:modelValue":M=>p.value.directories_enabled[v]=M,label:de.value[v]?.label||v,description:de.value[v]?.hint,class:"flex-1"},null,8,["id","modelValue","onUpdate:modelValue","label","description"])]),p.value.directories_enabled[v]?(g(),pe(W,{key:0,modelValue:p.value.directories[v],"onUpdate:modelValue":M=>p.value.directories[v]=M,placeholder:de.value[v]?.default,class:"mt-2",prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)])),64)),(g(!0),b(ee,null,ke(Z("workspace"),v=>(g(),b("div",{key:`extra-${v.key}`},[k(Ue,{id:`extra-dir-${v.key}`,modelValue:p.value.extra_directories_enabled[v.key],"onUpdate:modelValue":M=>p.value.extra_directories_enabled[v.key]=M,label:v.label,description:`Custom: ${v.path}`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),p.value.extra_directories_enabled[v.key]?(g(),pe(W,{key:0,modelValue:v.path,"onUpdate:modelValue":M=>v.path=M,placeholder:v.path,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]))),128))]),c("div",oD,[S[93]||(S[93]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Add Custom Workspace Directories",-1)),k(gt,{"model-value":se("workspace"),"onUpdate:modelValue":S[26]||(S[26]=v=>Pe("workspace",v)),"add-label":"Add Workspace Directory","default-item":()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:R(({item:v,index:M,update:Q})=>[c("div",rD,[k(W,{"model-value":v.key,"onUpdate:modelValue":G=>Q("key",G),label:"Key",placeholder:"e.g., helpers",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":v.label,"onUpdate:modelValue":G=>Q("label",G),label:"Label",placeholder:"e.g., Helper Functions",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":v.path,"onUpdate:modelValue":G=>Q("path",G),label:"Path",placeholder:"e.g., helpers",prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])])):I("",!0),p.value.type==="project_sensitive"?(g(),b("div",lD,[S[99]||(S[99]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Inputs",-1)),S[100]||(S[100]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Keep private inputs compartmentalized; publish processed data into public folders when ready. ",-1)),S[101]||(S[101]=c("div",{class:"grid gap-4 sm:grid-cols-2 text-xs font-semibold uppercase text-gray-500 dark:text-gray-400 mb-3"},[c("div",null,"Private"),c("div",null,"Public")],-1)),c("div",aD,[(g(),b(ee,null,ke(["raw","intermediate","final"],v=>c("div",{key:v},[c("div",uD,[c("div",dD,[k(Ue,{id:`dir-inputs_private_${v}`,modelValue:p.value.directories_enabled[`inputs_private_${v}`],"onUpdate:modelValue":M=>p.value.directories_enabled[`inputs_private_${v}`]=M,label:`${v.charAt(0).toUpperCase()+v.slice(1)} data`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label"]),p.value.directories_enabled[`inputs_private_${v}`]?(g(),pe(W,{key:0,modelValue:p.value.directories[`inputs_private_${v}`],"onUpdate:modelValue":M=>p.value.directories[`inputs_private_${v}`]=M,placeholder:`inputs/private/${v}`,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]),c("div",cD,[k(Ue,{id:`dir-inputs_public_${v}`,modelValue:p.value.directories_enabled[`inputs_public_${v}`],"onUpdate:modelValue":M=>p.value.directories_enabled[`inputs_public_${v}`]=M,label:`${v.charAt(0).toUpperCase()+v.slice(1)} data`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label"]),p.value.directories_enabled[`inputs_public_${v}`]?(g(),pe(W,{key:0,modelValue:p.value.directories[`inputs_public_${v}`],"onUpdate:modelValue":M=>p.value.directories[`inputs_public_${v}`]=M,placeholder:`inputs/public/${v}`,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)])])])),64)),c("div",fD,[c("div",hD,[(g(!0),b(ee,null,ke(Z("input_private"),v=>(g(),b("div",{key:`extra-${v.key}`,class:"p-3 rounded-md"},[k(Ue,{id:`extra-dir-${v.key}`,modelValue:p.value.extra_directories_enabled[v.key],"onUpdate:modelValue":M=>p.value.extra_directories_enabled[v.key]=M,label:v.label,description:`Custom: ${v.path}`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),p.value.extra_directories_enabled[v.key]?(g(),pe(W,{key:0,modelValue:v.path,"onUpdate:modelValue":M=>v.path=M,placeholder:v.path,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]))),128))]),c("div",pD,[(g(!0),b(ee,null,ke(Z("input_public"),v=>(g(),b("div",{key:`extra-${v.key}`,class:"p-3 rounded-md"},[k(Ue,{id:`extra-dir-${v.key}`,modelValue:p.value.extra_directories_enabled[v.key],"onUpdate:modelValue":M=>p.value.extra_directories_enabled[v.key]=M,label:v.label,description:`Custom: ${v.path}`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),p.value.extra_directories_enabled[v.key]?(g(),pe(W,{key:0,modelValue:v.path,"onUpdate:modelValue":M=>v.path=M,placeholder:v.path,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]))),128))])])]),c("div",mD,[S[98]||(S[98]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-4"},"Add Custom Input Directories",-1)),c("div",gD,[c("div",null,[S[96]||(S[96]=c("p",{class:"text-xs font-semibold uppercase text-gray-500 dark:text-gray-400 mb-3"},"Private",-1)),k(gt,{"model-value":se("input_private"),"onUpdate:modelValue":S[27]||(S[27]=v=>Pe("input_private",v)),"add-label":"Add Private Input","default-item":()=>({key:"",label:"",path:"",type:"input_private",_id:Date.now()})},{default:R(({item:v,index:M,update:Q})=>[c("div",vD,[k(W,{"model-value":v.key,"onUpdate:modelValue":G=>Q("key",G),label:"Key",placeholder:"e.g., inputs_private_survey",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":v.label,"onUpdate:modelValue":G=>Q("label",G),label:"Label",placeholder:"e.g., Survey Data",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":v.path,"onUpdate:modelValue":G=>Q("path",G),label:"Path",placeholder:"e.g., inputs/private/survey",prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])]),c("div",null,[S[97]||(S[97]=c("p",{class:"text-xs font-semibold uppercase text-gray-500 dark:text-gray-400 mb-3"},"Public",-1)),k(gt,{"model-value":se("input_public"),"onUpdate:modelValue":S[28]||(S[28]=v=>Pe("input_public",v)),"add-label":"Add Public Input","default-item":()=>({key:"",label:"",path:"",type:"input_public",_id:Date.now()})},{default:R(({item:v,index:M,update:Q})=>[c("div",yD,[k(W,{"model-value":v.key,"onUpdate:modelValue":G=>Q("key",G),label:"Key",placeholder:"e.g., inputs_public_survey",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":v.label,"onUpdate:modelValue":G=>Q("label",G),label:"Label",placeholder:"e.g., Survey Data",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":v.path,"onUpdate:modelValue":G=>Q("path",G),label:"Path",placeholder:"e.g., inputs/public/survey",prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])])])])):I("",!0),p.value.type==="project_sensitive"?(g(),b("div",bD,[S[105]||(S[105]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Outputs",-1)),S[106]||(S[106]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Review outputs before promotion; private folders remain gitignored while public copies are ready to share. ",-1)),S[107]||(S[107]=c("div",{class:"grid gap-4 sm:grid-cols-2 text-xs font-semibold uppercase text-gray-500 dark:text-gray-400 mb-3"},[c("div",null,"Private"),c("div",null,"Public")],-1)),c("div",kD,[(g(),b(ee,null,ke(["notebooks","tables","figures","models","reports"],v=>c("div",{key:v},[c("div",xD,[c("div",wD,[k(Ue,{id:`dir-outputs_private_${v}`,modelValue:p.value.directories_enabled[`outputs_private_${v}`],"onUpdate:modelValue":M=>p.value.directories_enabled[`outputs_private_${v}`]=M,label:v.replace("_"," ").charAt(0).toUpperCase()+v.replace("_"," ").slice(1),class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label"]),p.value.directories_enabled[`outputs_private_${v}`]?(g(),pe(W,{key:0,modelValue:p.value.directories[`outputs_private_${v}`],"onUpdate:modelValue":M=>p.value.directories[`outputs_private_${v}`]=M,placeholder:`outputs/private/${v}`,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]),c("div",_D,[k(Ue,{id:`dir-outputs_public_${v}`,modelValue:p.value.directories_enabled[`outputs_public_${v}`],"onUpdate:modelValue":M=>p.value.directories_enabled[`outputs_public_${v}`]=M,label:v.replace("_"," ").charAt(0).toUpperCase()+v.replace("_"," ").slice(1),class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label"]),p.value.directories_enabled[`outputs_public_${v}`]?(g(),pe(W,{key:0,modelValue:p.value.directories[`outputs_public_${v}`],"onUpdate:modelValue":M=>p.value.directories[`outputs_public_${v}`]=M,placeholder:`outputs/public/${v}`,prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)])])])),64)),c("div",SD,[c("div",CD,[(g(!0),b(ee,null,ke(Z("output_private"),v=>(g(),b("div",{key:`extra-${v.key}`,class:"p-3 rounded-md"},[k(Ue,{id:`extra-dir-${v.key}`,modelValue:p.value.extra_directories_enabled[v.key],"onUpdate:modelValue":M=>p.value.extra_directories_enabled[v.key]=M,label:v.label,description:`Custom: ${v.path}`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),p.value.extra_directories_enabled[v.key]?(g(),pe(W,{key:0,modelValue:v.path,"onUpdate:modelValue":M=>v.path=M,placeholder:v.path,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]))),128))]),c("div",AD,[(g(!0),b(ee,null,ke(Z("output_public"),v=>(g(),b("div",{key:`extra-${v.key}`,class:"p-3 rounded-md"},[k(Ue,{id:`extra-dir-${v.key}`,modelValue:p.value.extra_directories_enabled[v.key],"onUpdate:modelValue":M=>p.value.extra_directories_enabled[v.key]=M,label:v.label,description:`Custom: ${v.path}`,class:"mb-2"},null,8,["id","modelValue","onUpdate:modelValue","label","description"]),p.value.extra_directories_enabled[v.key]?(g(),pe(W,{key:0,modelValue:v.path,"onUpdate:modelValue":M=>v.path=M,placeholder:v.path,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]))),128))])])]),c("div",VD,[S[104]||(S[104]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-4"},"Add Custom Output Directories",-1)),c("div",MD,[c("div",null,[S[102]||(S[102]=c("p",{class:"text-xs font-semibold uppercase text-gray-500 dark:text-gray-400 mb-3"},"Private",-1)),k(gt,{"model-value":se("output_private"),"onUpdate:modelValue":S[29]||(S[29]=v=>Pe("output_private",v)),"add-label":"Add Private Output","default-item":()=>({key:"",label:"",path:"",type:"output_private",_id:Date.now()})},{default:R(({item:v,index:M,update:Q})=>[c("div",DD,[k(W,{"model-value":v.key,"onUpdate:modelValue":G=>Q("key",G),label:"Key",placeholder:"e.g., outputs_private_videos",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":v.label,"onUpdate:modelValue":G=>Q("label",G),label:"Label",placeholder:"e.g., Videos",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":v.path,"onUpdate:modelValue":G=>Q("path",G),label:"Path",placeholder:"e.g., outputs/private/videos",prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])]),c("div",null,[S[103]||(S[103]=c("p",{class:"text-xs font-semibold uppercase text-gray-500 dark:text-gray-400 mb-3"},"Public",-1)),k(gt,{"model-value":se("output_public"),"onUpdate:modelValue":S[30]||(S[30]=v=>Pe("output_public",v)),"add-label":"Add Public Output","default-item":()=>({key:"",label:"",path:"",type:"output_public",_id:Date.now()})},{default:R(({item:v,index:M,update:Q})=>[c("div",$D,[k(W,{"model-value":v.key,"onUpdate:modelValue":G=>Q("key",G),label:"Key",placeholder:"e.g., outputs_public_videos",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":v.label,"onUpdate:modelValue":G=>Q("label",G),label:"Label",placeholder:"e.g., Videos",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":v.path,"onUpdate:modelValue":G=>Q("path",G),label:"Path",placeholder:"e.g., outputs/public/videos",prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])])])])):I("",!0),p.value.type==="project_sensitive"?(g(),b("div",TD,[S[108]||(S[108]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Temporary",-1)),S[109]||(S[109]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Scratch space and cache (gitignored by default).",-1)),c("div",ED,[(g(),b(ee,null,ke(["cache","scratch"],v=>Je(c("div",{key:v},[c("div",OD,[k(Ue,{id:`dir-${v}`,modelValue:p.value.directories_enabled[v],"onUpdate:modelValue":M=>p.value.directories_enabled[v]=M,label:de.value[v]?.label,description:de.value[v]?.hint,class:"flex-1"},null,8,["id","modelValue","onUpdate:modelValue","label","description"])]),p.value.directories_enabled[v]?(g(),pe(W,{key:0,modelValue:p.value.directories[v],"onUpdate:modelValue":M=>p.value.directories[v]=M,placeholder:de.value[v]?.default,class:"mt-2",prefix:"/"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]),[[nt,de.value[v]]])),64))])])):I("",!0),c("div",PD,[S[111]||(S[111]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},".gitignore Template",-1)),S[112]||(S[112]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Customize the .gitignore template for this project type. Uses pattern-based matching to catch sensitive directories anywhere in your project tree. ",-1)),k(Yi,{modelValue:p.value.git.gitignore_content,"onUpdate:modelValue":S[31]||(S[31]=v=>p.value.git.gitignore_content=v),language:"gitignore",class:"mb-4"},null,8,["modelValue"]),k(ze,{variant:"secondary",size:"sm",onClick:ge},{default:R(()=>[...S[110]||(S[110]=[ie(" Restore Default ",-1)])]),_:1})])],512),[[nt,f.value==="structure"]]),Je(c("div",null,[k(wf,{"database-connections":p.value.connections.databaseConnections,"onUpdate:databaseConnections":S[32]||(S[32]=v=>p.value.connections.databaseConnections=v),"s3-connections":p.value.connections.s3Connections,"onUpdate:s3Connections":S[33]||(S[33]=v=>p.value.connections.s3Connections=v),"default-database":p.value.connections.defaultDatabase,"onUpdate:defaultDatabase":S[34]||(S[34]=v=>p.value.connections.defaultDatabase=v),"default-storage-bucket":p.value.connections.defaultStorageBucket,"onUpdate:defaultStorageBucket":S[35]||(S[35]=v=>p.value.connections.defaultStorageBucket=v)},null,8,["database-connections","s3-connections","default-database","default-storage-bucket"])],512),[[nt,f.value==="connections"]]),Je(c("div",null,[c("div",LD,[c("div",jD,[k(Ue,{modelValue:p.value.packages.use_renv,"onUpdate:modelValue":S[36]||(S[36]=v=>p.value.packages.use_renv=v),label:"Enable renv",description:"Use renv for package version management and reproducibility"},null,8,["modelValue"]),c("div",RD,[c("div",BD,[S[114]||(S[114]=c("div",null,[c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300"},"Default Packages"),c("p",{class:"text-xs text-gray-600 dark:text-gray-400 mt-1"},"Installed (and optionally attached) when scaffold() runs.")],-1)),k(ze,{size:"sm",variant:"secondary",onClick:me},{default:R(()=>[...S[113]||(S[113]=[ie("Add Package",-1)])]),_:1})]),p.value.packages.default_packages&&p.value.packages.default_packages.length?(g(),b("div",ID,[(g(!0),b(ee,null,ke(p.value.packages.default_packages,(v,M)=>(g(),b("div",{key:`pkg-${M}`,class:"rounded-md border border-gray-200 p-4 dark:border-gray-700"},[c("div",UD,[c("div",ND,[v.source==="cran"||v.source==="bioconductor"?(g(),pe(bf,{key:0,modelValue:v.name,"onUpdate:modelValue":Q=>v.name=Q,source:v.source,label:"Package",placeholder:v.source==="cran"?"Search CRAN...":"Search Bioconductor...",onSelect:Q=>v.name=Q.name},null,8,["modelValue","onUpdate:modelValue","source","placeholder","onSelect"])):(g(),pe(W,{key:1,modelValue:v.name,"onUpdate:modelValue":Q=>v.name=Q,label:"Package",placeholder:"user/repo"},null,8,["modelValue","onUpdate:modelValue"])),k(Ht,{modelValue:v.source,"onUpdate:modelValue":Q=>v.source=Q,label:"Source"},{default:R(()=>[...S[115]||(S[115]=[c("option",{value:"cran"},"CRAN",-1),c("option",{value:"github"},"GitHub",-1),c("option",{value:"bioconductor"},"Bioconductor",-1)])]),_:1},8,["modelValue","onUpdate:modelValue"])]),c("div",zD,[k(Ue,{modelValue:v.auto_attach,"onUpdate:modelValue":Q=>v.auto_attach=Q,label:"Auto-Attach",description:"Call library() when scaffold() runs."},null,8,["modelValue","onUpdate:modelValue"]),k(ze,{size:"sm",variant:"secondary",onClick:Q=>le(M)},{default:R(()=>[...S[116]||(S[116]=[ie("Remove",-1)])]),_:1},8,["onClick"])])])]))),128))])):(g(),b("p",FD,"No packages configured. Add packages to include tidyverse helpers or internal utilities automatically."))])])])],512),[[nt,f.value==="packages"]]),Je(c("div",null,[c("div",HD,[S[124]||(S[124]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Framework maintains context files for selected assistants and keeps them in sync before commits. ",-1)),c("div",WD,[c("div",null,[k(Ue,{modelValue:p.value.ai.enabled,"onUpdate:modelValue":S[37]||(S[37]=v=>p.value.ai.enabled=v),label:"Enable AI Support",description:"Generate and sync assistant-specific context files."},null,8,["modelValue"])]),p.value.ai.enabled?(g(),b(ee,{key:0},[c("div",qD,[S[118]||(S[118]=c("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Canonical context file",-1)),S[119]||(S[119]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," This file is the source of truth; other instructions files are synced to it when AI hooks run. ",-1)),k(Ht,{modelValue:p.value.ai.canonical_file,"onUpdate:modelValue":S[38]||(S[38]=v=>p.value.ai.canonical_file=v),label:"Canonical Context File"},{default:R(()=>[...S[117]||(S[117]=[c("option",{value:"AGENTS.md"},"AGENTS.md (multi-agent orchestrator)",-1),c("option",{value:"CLAUDE.md"},"CLAUDE.md",-1),c("option",{value:".github/copilot-instructions.md"},".github/copilot-instructions.md",-1)])]),_:1},8,["modelValue"])]),c("div",KD,[S[120]||(S[120]=c("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Assistants",-1)),S[121]||(S[121]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Choose which assistants receive context updates. ",-1)),c("div",GD,[(g(),b(ee,null,ke(l,v=>k(gi,{key:v.id,id:`ai-${v.id}`,"model-value":Array.isArray(p.value.ai.assistants)&&p.value.ai.assistants.includes(v.id),"onUpdate:modelValue":M=>Y(v.id,M),description:v.description},{default:R(()=>[ie(z(v.label),1)]),_:2},1032,["id","model-value","onUpdate:modelValue","description"])),64))])]),c("div",JD,[S[122]||(S[122]=c("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Canonical instructions",-1)),S[123]||(S[123]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Edit the canonical file directly. This will be pre-populated when the project is created. ",-1)),k(Yi,{modelValue:p.value.ai.canonical_content,"onUpdate:modelValue":S[39]||(S[39]=v=>p.value.ai.canonical_content=v),language:"markdown","min-height":"500px"},null,8,["modelValue"])])],64)):I("",!0)])])],512),[[nt,f.value==="ai"]]),Je(c("div",null,[k(kf,{modelValue:A.value,"onUpdate:modelValue":S[40]||(S[40]=v=>A.value=v)},{note:R(()=>[...S[125]||(S[125]=[ie(" Project-specific .gitignore templates can be customized in Project Defaults. ",-1)])]),_:1},8,["modelValue"])],512),[[nt,f.value==="git"]])])])]))}},QD={class:"mt-2 block text-sm font-semibold text-gray-900 dark:text-white"},XD={key:0,class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},ZD={class:"mt-2 text-sm font-semibold text-gray-900 dark:text-white"},e$={key:0,class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},t$={key:1,class:"mt-6"},s$={__name:"EmptyState",props:{title:{type:String,required:!0},description:{type:String,default:null},icon:{type:String,default:null,validator:t=>["database","folder","document","users","inbox","photo"].includes(t)},action:{type:Boolean,default:!1}},emits:["click"],setup(t,{emit:e}){const s=t,i=e,n=ne(()=>{const l=["relative","block","w-full","rounded-lg","border-2","border-dashed","border-gray-300","p-12","text-center","dark:border-white/15"];return s.action&&l.push("hover:border-gray-400","focus:outline-2","focus:outline-offset-2","focus:outline-sky-600","dark:hover:border-white/25","dark:focus:outline-sky-500","transition-colors"),l.join(" ")}),o=ne(()=>({database:()=>Tt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Tt("path",{d:"M8 14v20c0 4.418 7.163 8 16 8 1.381 0 2.721-.087 4-.252M8 14c0 4.418 7.163 8 16 8s16-3.582 16-8M8 14c0-4.418 7.163-8 16-8s16 3.582 16 8m0 0v14m0-4c0 4.418-7.163 8-16 8S8 28.418 8 24m32 10v6m0 0v6m0-6h6m-6 0h-6"})]),folder:()=>Tt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Tt("path",{d:"M3 7v30a4 4 0 004 4h34a4 4 0 004-4V13a4 4 0 00-4-4H23.343a4 4 0 01-2.829-1.172l-2.828-2.828A4 4 0 0014.858 4H7a4 4 0 00-4 4v0zM37 17v6m0 0v6m0-6h6m-6 0h-6"})]),document:()=>Tt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Tt("path",{d:"M8 4a4 4 0 00-4 4v32a4 4 0 004 4h32a4 4 0 004-4V8a4 4 0 00-4-4H8zm24 16v6m0 0v6m0-6h6m-6 0h-6"})]),users:()=>Tt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Tt("path",{d:"M17 21a5 5 0 110-10 5 5 0 010 10zm-6.5 8a7.5 7.5 0 0115 0H10.5zM31 21a5 5 0 110-10 5 5 0 010 10zm-6.5 8a7.5 7.5 0 0115 0H24.5z"})]),inbox:()=>Tt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Tt("path",{d:"M4 8h40M4 8v28a4 4 0 004 4h32a4 4 0 004-4V8M4 8l18 14a2 2 0 002.4 0L44 8"})]),photo:()=>Tt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Tt("path",{d:"M4 8a4 4 0 014-4h32a4 4 0 014 4v32a4 4 0 01-4 4H8a4 4 0 01-4-4V8zm10 6a3 3 0 100-6 3 3 0 000 6zM4 40l12-12 8 8 8-8L44 40"})])})[s.icon]||null),r=()=>{s.action&&i("click")};return(l,a)=>t.action?(g(),b("button",{key:0,type:"button",onClick:r,class:Ee(n.value)},[vt(l.$slots,"icon",{},()=>[t.icon?(g(),pe(Ts(o.value),{key:0,class:"mx-auto size-12 text-gray-400 dark:text-gray-500"})):I("",!0)]),c("span",QD,z(t.title),1),t.description?(g(),b("p",XD,z(t.description),1)):I("",!0)],2)):(g(),b("div",{key:1,class:Ee(n.value.replace("hover:border-gray-400","").replace("focus:outline-2",""))},[vt(l.$slots,"icon",{},()=>[t.icon?(g(),pe(Ts(o.value),{key:0,class:"mx-auto size-12 text-gray-400 dark:text-gray-500"})):I("",!0)]),c("h3",ZD,z(t.title),1),t.description?(g(),b("p",e$,z(t.description),1)):I("",!0),l.$slots.actions?(g(),b("div",t$,[vt(l.$slots,"actions")])):I("",!0)],2))}},i$=["onClick","aria-current"],n$={class:"mt-4"},o$={__name:"Tabs",props:{modelValue:{type:[String,Number],required:!0},tabs:{type:Array,required:!0,validator:t=>t.every(e=>e.id&&e.label)},variant:{type:String,default:"pills",validator:t=>["pills","underline"].includes(t)},size:{type:String,default:"md",validator:t=>["sm","md","lg"].includes(t)}},emits:["update:modelValue","change"],setup(t,{emit:e}){const s=t,i=e,n=ne(()=>s.variant==="underline"?"border-b border-gray-200 dark:border-white/10":""),o=ne(()=>{const a=["flex","gap-2"];return s.variant==="underline"?a.push("-mb-px"):a.push("p-1","bg-gray-100","dark:bg-white/5","rounded-lg"),a.join(" ")}),r=a=>{const d=s.modelValue===a,u=["inline-flex","items-center","gap-2","font-medium","transition-colors"],f={sm:"px-2.5 py-1.5 text-xs",md:"px-3 py-2 text-sm",lg:"px-4 py-2.5 text-base"};return u.push(f[s.size]),s.variant==="pills"?(u.push("rounded-md"),d?u.push("bg-white","text-gray-900","shadow-xs","dark:bg-white/10","dark:text-white"):u.push("text-gray-600","hover:text-gray-900","dark:text-gray-400","dark:hover:text-white")):(u.push("border-b-2","pb-3"),d?u.push("border-sky-600","text-sky-600","dark:border-sky-500","dark:text-sky-400"):u.push("border-transparent","text-gray-600","hover:border-gray-300","hover:text-gray-900","dark:text-gray-400","dark:hover:border-gray-600","dark:hover:text-white")),u.join(" ")},l=a=>{i("update:modelValue",a),i("change",a)};return(a,d)=>(g(),b("div",null,[c("div",{class:Ee(n.value)},[c("nav",{class:Ee(o.value),"aria-label":"Tabs"},[(g(!0),b(ee,null,ke(t.tabs,u=>(g(),b("button",{key:u.id,type:"button",onClick:f=>l(u.id),class:Ee(r(u.id)),"aria-current":t.modelValue===u.id?"page":void 0},[u.icon?(g(),pe(Ts(u.icon),{key:0,class:"size-5"})):I("",!0),ie(" "+z(u.label)+" ",1),u.badge?(g(),pe(En,{key:1,variant:t.modelValue===u.id?"emerald":"gray",pill:""},{default:R(()=>[ie(z(u.badge),1)]),_:2},1032,["variant"])):I("",!0)],10,i$))),128))],2)],2),c("div",n$,[vt(a.$slots,"default")])]))}},r$=["for"],l$={class:"mt-2"},a$=["id","value","placeholder","rows","required","disabled"],u$={key:1,class:"mt-2 text-sm text-gray-500 dark:text-gray-400"},dc={__name:"Textarea",props:{id:{type:String,default:()=>`textarea-${Math.random().toString(36).substr(2,9)}`},modelValue:{type:String,default:""},label:{type:String,default:null},placeholder:{type:String,default:""},rows:{type:Number,default:4},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},hint:{type:String,default:null},monospace:{type:Boolean,default:!1},textareaClass:{type:[String,Array,Object],default:""}},emits:["update:modelValue"],setup(t){const e=t,s=ne(()=>["block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-sky-600 sm:text-sm/6 dark:bg-white/5 dark:text-white dark:outline-white/10 dark:placeholder:text-gray-500 dark:focus:outline-sky-500",e.monospace?"font-mono text-sm leading-6":"",e.textareaClass]);return(i,n)=>(g(),b("div",null,[t.label?(g(),b("label",{key:0,for:t.id,class:"block text-sm/6 font-medium text-gray-900 dark:text-white"},z(t.label),9,r$)):I("",!0),c("div",l$,[c("textarea",{id:t.id,value:t.modelValue,placeholder:t.placeholder,rows:t.rows,required:t.required,disabled:t.disabled,onInput:n[0]||(n[0]=o=>i.$emit("update:modelValue",o.target.value)),class:Ee(s.value)},null,42,a$)]),t.hint?(g(),b("p",u$,z(t.hint),1)):I("",!0)]))}},d$={class:"space-y-6"},c$={key:0},f$={class:"mt-1 font-mono text-sm text-gray-900 dark:text-gray-100 break-words"},h$={key:1},p$={class:"grid gap-4 sm:grid-cols-2"},m$=["value"],g$={class:"sm:col-span-2"},v$={key:0,class:"sm:col-span-2"},y$={class:"space-y-3"},b$={class:"flex items-center justify-between"},k$={key:0,class:"rounded-md border border-dashed border-gray-300 p-4 text-sm text-gray-500 dark:border-gray-600 dark:text-gray-400"},x$={class:"grid gap-3 sm:grid-cols-[1fr_auto] sm:items-start"},w$={class:"mt-3"},_$={key:0,class:"mt-2 text-xs text-gray-500 dark:text-gray-400"},S$={class:"mt-2 flex justify-end"},C$={key:2,class:"text-sm text-red-600 dark:text-red-400"},A$={key:3,class:"text-sm text-red-600 dark:text-red-400"},V$={key:4,class:"text-sm text-red-600 dark:text-red-400"},M$='{"source": "data-catalog"}',D$={__name:"DataCatalogEditModal",props:{modelValue:{type:Boolean,default:!1},mode:{type:String,default:"edit",validator:t=>["edit","create"].includes(t)},entry:{type:Object,default:null},saving:{type:Boolean,default:!1},error:{type:String,default:null}},emits:["update:modelValue","save"],setup(t,{emit:e}){const s=t,i=e,n=Object.freeze([{value:"csv",label:"CSV (comma-separated)"},{value:"tsv",label:"TSV (tab-separated)"},{value:"csv_custom",label:"Delimited text (custom)"},{value:"rds",label:"RDS (R serialized)"},{value:"excel",label:"Excel (.xlsx / .xls)"},{value:"stata",label:"Stata (.dta)"},{value:"spss",label:"SPSS (.sav / .zsav)"},{value:"spss_por",label:"SPSS Portable (.por)"},{value:"sas",label:"SAS (.sas7bdat / .sas7bcat)"},{value:"sas_xpt",label:"SAS Transport (.xpt)"}]),o=["path","type","description","locked","delimiter"],r=ae(null),l=ae(!1),a=ae(!1),d=ne(()=>s.mode==="create"),u=qs({path:"",fullKey:"",type:"",description:"",delimiter:"",locked:!1,additionalFields:[]}),f=ne(()=>u.type==="csv_custom"),h=ne(()=>{if(!s.entry&&!d.value)return null;const X=te();return X.length>0?`Duplicate metadata keys: ${X.join(", ")}`:u.additionalFields.some(Z=>!Z.key.trim())?"Metadata keys cannot be empty.":null}),m=ne(()=>u.path.trim()?null:"File path is required"),w=ne(()=>d.value?a.value?m.value:null:m.value);We(()=>s.entry,X=>{if(!X){j();return}H(X)},{immediate:!0}),We(()=>u.path,X=>{if(l.value)return;const Z=U(X);Z&&(Z.type==="csv"?(u.type="csv",u.delimiter=C("csv")):Z.type==="tsv"?(u.type="tsv",u.delimiter=C("tsv")):(u.type=Z.type,u.delimiter=""))}),We(()=>u.type,X=>{X&&(X==="csv"?u.delimiter=C("csv"):X==="tsv"?u.delimiter=C("tsv"):X!=="csv_custom"&&(u.delimiter=""))});function p(){return`field-${Math.random().toString(36).slice(2,9)}`}function C(X){return X==="csv"?"comma":X==="tsv"?"tab":""}function V(X,Z){if(!X)return!1;const se=X.toLowerCase();return Z==="csv"?se==="comma"||X===",":Z==="tsv"?se==="tab"||X==="	":!1}function U(X){if(!X)return null;const Z=X.toLowerCase();return Z.endsWith(".csv")?{type:"csv",delimiter:"comma"}:Z.endsWith(".tsv")||Z.endsWith(".txt")||Z.endsWith(".dat")?{type:"tsv",delimiter:"tab"}:Z.endsWith(".rds")?{type:"rds",delimiter:""}:Z.endsWith(".xlsx")||Z.endsWith(".xls")?{type:"excel",delimiter:""}:Z.endsWith(".dta")?{type:"stata",delimiter:""}:Z.endsWith(".sav")||Z.endsWith(".zsav")?{type:"spss",delimiter:""}:Z.endsWith(".por")?{type:"spss_por",delimiter:""}:Z.endsWith(".sas7bdat")||Z.endsWith(".sas7bcat")?{type:"sas",delimiter:""}:Z.endsWith(".xpt")?{type:"sas_xpt",delimiter:""}:null}function B(X){if(!X){u.type="",u.delimiter="",l.value=!1;return}u.type=X,l.value=!0,X==="csv"?u.delimiter=C("csv"):X==="tsv"?u.delimiter=C("tsv"):u.delimiter=""}function H(X){if(j(),a.value=!1,d.value){const $e=X?.data||{};u.fullKey=X?.fullKey||"",u.path=$e.path||"",u.type=$e.type||"",u.description=$e.description||"",u.locked=!!$e.locked,u.delimiter=$e.delimiter||"",l.value=!1;return}const Z=X.data||{};u.fullKey=X.fullKey||"",u.path=Z.path||"";const se=U(u.path),Pe=Z.type||se?.type||"";if(u.description=Z.description||"",u.locked=!!Z.locked,Pe==="csv"){const $e=Z.delimiter||se?.delimiter||C("csv");V($e,"csv")?(u.type="csv",u.delimiter=C("csv")):$e?(u.type="csv_custom",u.delimiter=$e):(u.type="csv",u.delimiter=C("csv"))}else Pe==="tsv"?(u.type="tsv",u.delimiter=C("tsv")):(u.type=Pe,u.delimiter=f.value&&Z.delimiter||"");!u.type&&se?.type&&(u.type=se.type,u.delimiter=se.delimiter||C(se.type)),l.value=!!Z.type||u.type==="csv_custom";const P=Object.entries(Z).filter(([$e])=>!o.includes($e)).map(([$e,Ie])=>({id:p(),key:$e,valueInput:T(Ie),valueType:A(Ie),isMultiline:typeof Ie=="object"&&Ie!==null}));u.additionalFields=P,r.value=null}function j(){u.path="",u.fullKey="",u.type="",u.description="",u.delimiter="",u.locked=!1,u.additionalFields=[],r.value=null,l.value=!1}function T(X){if(typeof X=="object"&&X!==null)try{return JSON.stringify(X,null,2)}catch{return""}return X==null?"":String(X)}function A(X){return Array.isArray(X)||typeof X=="object"&&X!==null?"object":typeof X=="boolean"?"boolean":typeof X=="number"?"number":"string"}function Y(X){if(X.valueType==="object"){if(!X.valueInput.trim())return null;try{return JSON.parse(X.valueInput)}catch{throw new Error(`Invalid JSON for field "${X.key}"`)}}if(X.valueType==="number"){const Z=Number(X.valueInput);if(Number.isNaN(Z))throw new Error(`Value for "${X.key}" must be a number`);return Z}if(X.valueType==="boolean"){const Z=X.valueInput.trim().toLowerCase();if(["true","false"].includes(Z))return Z==="true";throw new Error(`Value for "${X.key}" must be "true" or "false"`)}return X.valueInput}function te(){const X=new Set,Z=[];return u.additionalFields.forEach(se=>{const Pe=se.key.trim();Pe&&(X.has(Pe)||o.includes(Pe)?Z.push(Pe):X.add(Pe))}),Z}function me(X){return X.key.trim()?o.includes(X.key.trim())?"Reserved key name":u.additionalFields.some(Z=>Z!==X&&Z.key.trim()===X.key.trim())?"Duplicate key":null:"Key is required"}function le(){u.additionalFields.push({id:p(),key:"",valueInput:"",valueType:"string",isMultiline:!1}),r.value=null}function F(X){u.additionalFields=u.additionalFields.filter(Z=>Z.id!==X)}function ge(X){X.isMultiline=!X.isMultiline,X.isMultiline?(X.valueType="object",X.valueInput&&!X.valueInput.trim().startsWith("{")&&(X.valueInput="")):(X.valueType="string",X.valueInput=X.valueInput!=null?String(X.valueInput):"")}const ce=()=>{if(r.value=null,a.value=!0,!(m.value||h.value)&&!(!d.value&&!s.entry))try{const X=de();i("save",X)}catch(X){r.value=X.message}},de=()=>{if(!u.path.trim())throw new Error("File path is required");const X={};X.path=u.path.trim();const Z=u.type==="csv_custom"?"csv":u.type.trim();if(Z&&(X.type=Z),u.description.trim()&&(X.description=u.description.trim()),u.type==="csv_custom"){if(!u.delimiter.trim())throw new Error("Delimiter is required for custom delimited text sources");X.delimiter=u.delimiter.trim()}else u.delimiter.trim()&&!V(u.delimiter.trim(),u.type)&&(X.delimiter=u.delimiter.trim());u.locked&&(X.locked=!0);for(const Pe of u.additionalFields){const P=Pe.key.trim();if(!P||o.includes(P))continue;const $e=Y({...Pe,valueType:Pe.valueType??"string"});$e===null||$e===""||(X[P]=$e)}const se=(d.value?u.fullKey:s.entry.fullKey||"").trim();if(!se)throw new Error("Dot notation key is required");return{fullKey:se,data:X,isNew:d.value}};return(X,Z)=>(g(),pe(On,{"model-value":t.modelValue,variant:"left",size:"lg",title:"Edit Data Entry","onUpdate:modelValue":Z[6]||(Z[6]=se=>i("update:modelValue",se))},M1({_:2},[t.entry||d.value?{name:"default",fn:R(()=>[c("div",d$,[d.value?(g(),b("div",h$,[k(W,{modelValue:u.fullKey,"onUpdate:modelValue":Z[0]||(Z[0]=se=>u.fullKey=se),label:"Dot Notation Key",placeholder:"e.g., inputs.raw.custom_dataset",hint:"Use dot notation to place this entry within the catalog hierarchy."},null,8,["modelValue"])])):(g(),b("div",c$,[Z[7]||(Z[7]=c("p",{class:"text-xs font-medium uppercase tracking-wide text-gray-500 dark:text-gray-400"}," Data Key ",-1)),c("p",f$,z(t.entry.fullKey),1)])),k(W,{modelValue:u.path,"onUpdate:modelValue":Z[1]||(Z[1]=se=>u.path=se),label:"File Path",placeholder:"inputs/raw/example.csv",required:"",error:w.value,monospace:"",hint:"Provide a path relative to the project root (e.g., inputs/raw/data.csv) or an absolute path."},null,8,["modelValue","error"]),c("div",p$,[k(Ht,{"model-value":u.type,label:"Type","onUpdate:modelValue":B},{default:R(()=>[Z[8]||(Z[8]=c("option",{disabled:"",value:""},"Select file type",-1)),(g(!0),b(ee,null,ke(at(n),se=>(g(),b("option",{key:se.value,value:se.value},z(se.label),9,m$))),128))]),_:1},8,["model-value"]),c("div",g$,[k(Ue,{modelValue:u.locked,"onUpdate:modelValue":Z[2]||(Z[2]=se=>u.locked=se),label:"Locked",description:"Treat this data source as read-only."},null,8,["modelValue"])]),f.value?(g(),b("div",v$,[k(W,{modelValue:u.delimiter,"onUpdate:modelValue":Z[3]||(Z[3]=se=>u.delimiter=se),label:"Delimiter",placeholder:"e.g., tab or |",hint:"Use keywords 'tab', 'comma', 'semicolon', 'space' or supply a single character (e.g., |). Keywords map to their respective delimiters."},null,8,["modelValue"])])):I("",!0)]),k(dc,{modelValue:u.description,"onUpdate:modelValue":Z[4]||(Z[4]=se=>u.description=se),label:"Description",placeholder:"Explain what this source contains or how it was produced.",rows:4},null,8,["modelValue"]),c("div",y$,[c("div",b$,[Z[10]||(Z[10]=c("h4",{class:"text-sm font-semibold text-gray-900 dark:text-gray-100"}," Additional Metadata ",-1)),k(ze,{size:"sm",variant:"secondary",class:"shadow-none",onClick:le},{default:R(()=>[...Z[9]||(Z[9]=[ie(" Add Field ",-1)])]),_:1})]),Z[12]||(Z[12]=c("p",{class:"text-xs text-gray-500 dark:text-gray-400"}," Store any extra properties (e.g., source, codebook details). Complex values can be provided as JSON. ",-1)),u.additionalFields.length===0?(g(),b("div",k$," No additional metadata fields. ")):I("",!0),(g(!0),b(ee,null,ke(u.additionalFields,se=>(g(),b("div",{key:se.id,class:"rounded-md border border-gray-200 bg-white/80 p-4 dark:border-gray-700 dark:bg-gray-900/40"},[c("div",x$,[k(W,{modelValue:se.key,"onUpdate:modelValue":Pe=>se.key=Pe,label:"Key",placeholder:"e.g., source",error:me(se)},null,8,["modelValue","onUpdate:modelValue","error"]),k(ze,{size:"sm",variant:"secondary",class:"shadow-none",onClick:Pe=>F(se.id)},{default:R(()=>[...Z[11]||(Z[11]=[ie(" Remove ",-1)])]),_:1},8,["onClick"])]),c("div",w$,[(g(),pe(Ts(se.isMultiline?dc:W),{modelValue:se.valueInput,"onUpdate:modelValue":Pe=>se.valueInput=Pe,label:se.isMultiline?"Value (JSON)":"Value",rows:se.isMultiline?4:void 0,placeholder:se.isMultiline?M$:"comma",monospace:se.isMultiline?void 0:!1},null,8,["modelValue","onUpdate:modelValue","label","rows","placeholder","monospace"])),se.isMultiline?(g(),b("p",_$," Provide valid JSON to store complex data structures. ")):I("",!0),c("div",S$,[k(ze,{size:"xs",variant:"soft",onClick:Pe=>ge(se)},{default:R(()=>[ie(z(se.isMultiline?"Use single-line value":"Use JSON value"),1)]),_:2},1032,["onClick"])])])]))),128))]),h.value?(g(),b("p",C$,z(h.value),1)):I("",!0),r.value?(g(),b("p",A$,z(r.value),1)):I("",!0),t.error?(g(),b("p",V$,z(t.error),1)):I("",!0)])]),key:"0"}:void 0,t.entry?{name:"actions",fn:R(()=>[k(ze,{size:"sm",variant:"secondary",class:"shadow-none",onClick:Z[5]||(Z[5]=se=>i("update:modelValue",!1))},{default:R(()=>[...Z[13]||(Z[13]=[ie(" Cancel ",-1)])]),_:1}),k(ze,{size:"sm",disabled:t.saving,onClick:ce},{default:R(()=>[ie(z(t.saving?"Saving":"Save Entry"),1)]),_:1},8,["disabled"])]),key:"1"}:void 0]),1032,["model-value"]))}},fb=(t="")=>{const s=String(t??"").trim().replace(/[^a-zA-Z0-9]+/g,"-").replace(/^-+|-+$/g,"").toLowerCase();return s?`data-node-${s}`:"data-node-root"},$$=["id"],T$=["aria-expanded"],E$={class:"flex-1"},O$={key:0,class:"rounded bg-amber-200/70 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},P$={key:1},L$={class:"mt-1 text-xs text-zinc-500 dark:text-zinc-400"},j$={class:"text-xs font-medium uppercase tracking-wide text-zinc-500 dark:text-zinc-400"},R$={class:"flex items-start gap-3"},B$={class:"flex-1"},I$={key:0,class:"rounded bg-amber-200/70 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},U$={key:1},N$={class:"mt-1 text-xs text-zinc-500 dark:text-zinc-400"},z$=["id"],F$={class:"flex items-start justify-between gap-4"},H$={class:"min-w-0 flex items-center gap-2"},W$={class:"text-sm font-semibold text-gray-900 dark:text-white"},q$={key:0,class:"rounded bg-amber-200/70 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},K$={key:1},G$={key:0,class:"inline-flex items-center rounded-full border border-gray-200 bg-white px-2.5 py-1 text-xs font-medium text-gray-700 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-100"},J$={class:"flex items-center gap-2 shrink-0"},Y$={class:"mt-5 space-y-4"},Q$={key:0,class:"space-y-2"},X$={class:"text-sm leading-relaxed text-gray-600 dark:text-zinc-300"},Z$={key:1,class:"flex items-start gap-3"},eT={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},tT={key:1,class:"h-4 w-4 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},sT={class:"min-w-0 flex-1"},iT={class:"mt-1 font-mono text-sm leading-relaxed text-gray-900 dark:text-zinc-100"},nT={key:0,class:"rounded bg-amber-200/60 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},oT={key:1},rT={key:1,class:"text-zinc-500"},lT={class:"flex items-start gap-3 pt-4 border-t border-gray-200 dark:border-zinc-700"},aT={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},uT={key:1,class:"h-4 w-4 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},dT={class:"min-w-0 flex-1"},cT={class:"mt-1 font-mono text-sm leading-relaxed text-gray-900 dark:text-zinc-100"},fT={key:0,class:"rounded bg-amber-200/60 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},hT={key:1},pT={key:1,class:"text-zinc-500"},mT={class:"min-w-0"},gT={class:"text-xs font-medium uppercase tracking-wide text-gray-600 dark:text-zinc-200"},vT={class:"mt-1 whitespace-pre-wrap break-words font-mono text-[13px] text-gray-800 dark:text-zinc-200"},yT={class:"flex items-start gap-3 pt-4 border-t border-gray-200 dark:border-zinc-700"},bT={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},kT={key:1,class:"h-4 w-4 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},xT={class:"min-w-0 flex-1"},wT=["title"],Ju="mt-1.5 inline-flex h-10 w-10 items-center justify-center rounded-md border border-gray-200 bg-white text-gray-500 transition hover:border-gray-300 hover:text-gray-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-500 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-300 dark:hover:border-gray-500 dark:hover:text-gray-100",_T=Object.assign({name:"DataCatalogTree"},{__name:"DataCatalogTree",props:{node:{type:Object,required:!0},depth:{type:Number,default:0},expandedKeys:{type:Object,required:!0},autoExpandedKeys:{type:Object,required:!0},toggleGroup:{type:Function,required:!0},searchTerm:{type:String,default:""},hierarchical:{type:Boolean,default:!0},pendingDeletes:{type:Object,default:null}},emits:["edit","delete"],setup(t,{emit:e}){const s=e,i=t,n=ne(()=>i.node?.type==="group"),o=ne(()=>i.depth===0),r=ne(()=>{if(!n.value)return!1;if(!i.hierarchical)return!0;const le=i.node?.fullKey;if(!le)return!1;const F=i.expandedKeys,ge=i.autoExpandedKeys,ce=typeof F?.has=="function"?F.has(le):!!F?.[le],de=typeof ge?.has=="function"?ge.has(le):!!ge?.[le];return ce||de}),l=ne(()=>{const le=i.node?.leafCount||0;return`${le} ${le===1?"entry":"entries"}`}),a=ne(()=>o.value?"mb-4 rounded-xl border border-gray-200 bg-white p-6 transition hover:border-gray-300 scroll-mt-16 dark:border-gray-700/70 dark:bg-gray-900 dark:hover:border-gray-600":"mb-3 rounded-lg border border-gray-200 bg-white p-4 transition hover:border-gray-300 dark:border-gray-700/60 dark:bg-gray-900/60 dark:hover:border-gray-600"),d=ne(()=>o.value?"text-lg font-semibold text-zinc-900 dark:text-white":"text-sm font-semibold text-zinc-900 dark:text-white"),u=ne(()=>o.value?"mt-4 space-y-3":"mt-3 space-y-3"),f=ne(()=>i.pendingDeletes instanceof Set?i.pendingDeletes:i.pendingDeletes&&typeof i.pendingDeletes=="object"&&i.pendingDeletes.value instanceof Set?i.pendingDeletes.value:new Set),h=ne(()=>f.value.has(i.node?.fullKey)),m=ne(()=>{const le=i.node?.data||{},F=new Set(["path","type","description","locked","delimiter"]);return Object.keys(le).filter(ge=>!F.has(ge)).reduce((ge,ce)=>(ge[ce]=le[ce],ge),{})}),w=ne(()=>{const le="relative rounded-lg p-6 transition focus-within:ring-2",F=o.value?"scroll-mt-16":"";return h.value?`${le} border border-red-200 bg-red-50 hover:bg-red-100 focus-within:ring-red-300 ${F} dark:border-red-500/40 dark:bg-red-900/30 dark:hover:bg-red-900/40 dark:focus-within:ring-red-500/40`:`${le} border border-gray-200 bg-gray-50 hover:bg-gray-100 focus-within:ring-sky-200 ${F} dark:border-gray-700/50 dark:bg-gray-800/50 dark:hover:bg-gray-800/60 dark:focus-within:ring-sky-500/40`}),p=ne(()=>h.value?"shadow-none border border-red-200 text-red-700 hover:bg-red-50 dark:border-red-500/40 dark:text-red-200 dark:hover:bg-red-900/30":"shadow-none"),C=ne(()=>i.searchTerm.trim().toLowerCase()),V=(le="")=>{const F=le??"",ge=C.value;if(!ge)return[{text:F,highlight:!1}];const ce=F.toLowerCase(),de=[];let X=0,Z=ce.indexOf(ge);for(;Z!==-1;)Z>X&&de.push({text:F.slice(X,Z),highlight:!1}),de.push({text:F.slice(Z,Z+ge.length),highlight:!0}),X=Z+ge.length,Z=ce.indexOf(ge,X);return X<F.length&&de.push({text:F.slice(X),highlight:!1}),de.length>0?de:[{text:F,highlight:!1}]},U=ne(()=>i.node?.displayName||i.node?.name||""),B=ne(()=>V(U.value)),H=ne(()=>V(i.node?.data?.path||"")),j=ne(()=>V(i.node?.fullKey||"")),T=ne(()=>{const le=i.node?.fullKey||"";return le?`data_read('${le}')`:"data_read()"}),A=(le="")=>le.replace(/_/g," "),Y=le=>le==null?"":typeof le=="object"?JSON.stringify(le,null,2):String(le),te=ne(()=>{if(!o.value)return null;const le=i.node?.fullKey||i.node?.name;return le?fb(le):null}),me=()=>{!n.value||!i.hierarchical||i.toggleGroup(i.node.fullKey)};return(le,F)=>{const ge=ia("DataCatalogTree",!0);return g(),b("div",null,[n.value?(g(),b("div",{key:0,id:te.value||void 0,class:Ee(a.value)},[t.hierarchical?(g(),b(ee,{key:0},[c("button",{type:"button",class:"flex w-full items-start gap-3 text-left transition hover:text-zinc-900 focus:outline-none",onClick:me,"aria-expanded":r.value},[k(at(c2),{class:Ee(["mt-1.5 h-4 w-4 shrink-0 text-zinc-400 transition-transform",{"rotate-90 text-sky-500":r.value}])},null,8,["class"]),c("div",E$,[c("p",{class:Ee(d.value)},[(g(!0),b(ee,null,ke(B.value,(ce,de)=>(g(),b(ee,{key:de},[ce.highlight?(g(),b("mark",O$,z(ce.text),1)):(g(),b("span",P$,z(ce.text),1))],64))),128))],2),c("p",L$,z(l.value),1)]),c("span",j$,z(r.value?"Hide":"Show"),1)],8,T$),k(Dc,{name:"catalog-collapse"},{default:R(()=>[Je(c("div",{class:Ee(u.value)},[(g(!0),b(ee,null,ke(t.node.children,ce=>(g(),pe(ge,{key:ce.fullKey,node:ce,depth:t.depth+1,"expanded-keys":t.expandedKeys,"auto-expanded-keys":t.autoExpandedKeys,"toggle-group":t.toggleGroup,"search-term":t.searchTerm,hierarchical:t.hierarchical,"pending-deletes":t.pendingDeletes,onEdit:F[0]||(F[0]=de=>s("edit",de)),onDelete:F[1]||(F[1]=de=>s("delete",de))},null,8,["node","depth","expanded-keys","auto-expanded-keys","toggle-group","search-term","hierarchical","pending-deletes"]))),128))],2),[[nt,r.value]])]),_:1})],64)):(g(),b(ee,{key:1},[c("div",R$,[c("div",B$,[c("p",{class:Ee(d.value)},[(g(!0),b(ee,null,ke(B.value,(ce,de)=>(g(),b(ee,{key:de},[ce.highlight?(g(),b("mark",I$,z(ce.text),1)):(g(),b("span",U$,z(ce.text),1))],64))),128))],2),c("p",N$,z(l.value),1)])]),c("div",{class:Ee(u.value)},[(g(!0),b(ee,null,ke(t.node.children,ce=>(g(),pe(ge,{key:ce.fullKey,node:ce,depth:t.depth+1,"expanded-keys":t.expandedKeys,"auto-expanded-keys":t.autoExpandedKeys,"toggle-group":t.toggleGroup,"search-term":t.searchTerm,hierarchical:t.hierarchical,"pending-deletes":t.pendingDeletes,onEdit:F[2]||(F[2]=de=>s("edit",de)),onDelete:F[3]||(F[3]=de=>s("delete",de))},null,8,["node","depth","expanded-keys","auto-expanded-keys","toggle-group","search-term","hierarchical","pending-deletes"]))),128))],2)],64))],10,$$)):(g(),b("div",{key:1,id:te.value||void 0,class:Ee(w.value)},[c("div",F$,[c("div",H$,[c("h3",W$,[(g(!0),b(ee,null,ke(B.value,(ce,de)=>(g(),b(ee,{key:`leaf-${de}`},[ce.highlight?(g(),b("mark",q$,z(ce.text),1)):(g(),b("span",K$,z(ce.text),1))],64))),128))]),t.node.data?.type?(g(),b("span",G$,z(t.node.data.type),1)):I("",!0)]),c("div",J$,[k(ze,{size:"sm",variant:"secondary",class:Ee(p.value),onClick:F[4]||(F[4]=Ut(ce=>s("delete",t.node),["stop"]))},{default:R(()=>[ie(z(h.value?"Undo":"Delete"),1)]),_:1},8,["class"]),k(ze,{size:"sm",variant:"secondary",class:"shadow-none",onClick:F[5]||(F[5]=ce=>s("edit",t.node))},{default:R(()=>[...F[6]||(F[6]=[ie(" Edit ",-1)])]),_:1})])]),c("div",Y$,[t.node.data?.description?(g(),b("div",Q$,[F[7]||(F[7]=c("p",{class:"text-xs font-medium text-gray-600 dark:text-zinc-200"}," Description ",-1)),c("p",X$,z(t.node.data.description),1)])):I("",!0),t.node.fullKey?(g(),b("div",Z$,[k(ao,{value:t.node.fullKey||"",successMessage:"Dot notation copied",variant:"bare",class:Ee(Ju),title:"Copy dot notation"},{default:R(({copied:ce})=>[ce?(g(),b("svg",tT,[...F[9]||(F[9]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(g(),b("svg",eT,[...F[8]||(F[8]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"},null,-1)])]))]),_:1},8,["value"]),c("div",sT,[F[10]||(F[10]=c("p",{class:"text-xs font-medium text-gray-700 dark:text-zinc-100"}," Location (in Dot Notation) ",-1)),c("p",iT,[j.value.length>0?(g(!0),b(ee,{key:0},ke(j.value,(ce,de)=>(g(),b(ee,{key:`key-${de}`},[ce.highlight?(g(),b("mark",nT,z(ce.text),1)):(g(),b("span",oT,z(ce.text),1))],64))),128)):(g(),b("span",rT,""))])])])):I("",!0),c("div",lT,[k(ao,{value:t.node.data?.path||"",successMessage:"Path copied",variant:"bare",class:Ee(Ju),title:"Copy path"},{default:R(({copied:ce})=>[ce?(g(),b("svg",uT,[...F[12]||(F[12]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(g(),b("svg",aT,[...F[11]||(F[11]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"},null,-1)])]))]),_:1},8,["value"]),c("div",dT,[F[13]||(F[13]=c("p",{class:"text-xs font-medium text-gray-700 dark:text-zinc-100"}," File Path ",-1)),c("p",cT,[H.value.length>0?(g(!0),b(ee,{key:0},ke(H.value,(ce,de)=>(g(),b(ee,{key:`path-${de}`},[ce.highlight?(g(),b("mark",fT,z(ce.text),1)):(g(),b("span",hT,z(ce.text),1))],64))),128)):(g(),b("span",pT,""))])])]),(g(!0),b(ee,null,ke(m.value,(ce,de)=>(g(),b("div",{key:`meta-${de}`,class:"flex items-start justify-between gap-3 border-t border-gray-200 pt-4 text-sm dark:border-zinc-700"},[c("div",mT,[c("p",gT,z(A(de)),1),c("pre",vT,z(Y(ce)),1)])]))),128)),c("div",yT,[k(ao,{value:T.value,successMessage:"data_read() command copied",variant:"bare",class:Ee([Ju,"w-10"]),title:"Copy data_read() helper","aria-label":`Copy ${T.value}`},{default:R(({copied:ce})=>[ce?(g(),b("svg",kT,[...F[15]||(F[15]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(g(),b("svg",bT,[...F[14]||(F[14]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8z"},null,-1)])]))]),_:1},8,["value","class","aria-label"]),c("div",xT,[F[16]||(F[16]=c("p",{class:"text-xs font-medium text-gray-700 dark:text-zinc-100"}," Usage ",-1)),c("p",{class:"mt-1 font-mono text-sm leading-relaxed text-gray-900 dark:text-zinc-100 truncate",title:T.value},z(T.value),9,wT)])])])],10,z$))])}}}),ST=d0(_T,[["__scopeId","data-v-20f9f092"]]),CT={key:0,class:"mb-4"},AT={key:1,class:"mb-4"},VT={key:2,class:"space-y-6"},MT={key:0,class:"rounded-lg bg-gray-50 p-8 text-center dark:bg-gray-800/40"},DT={key:1,class:"space-y-5"},$T={class:"mb-4 flex items-center justify-between"},TT={class:"text-sm font-semibold text-gray-900 dark:text-white"},ET={class:"text-xs text-gray-500 dark:text-gray-400"},OT={class:"space-y-3"},PT={class:"flex items-start gap-3"},LT={class:"mt-2 w-16"},jT={class:"grid flex-1 grid-cols-2 gap-3"},RT=["value","onInput","disabled"],BT={class:"relative"},IT=["onUpdate:modelValue","type","placeholder","disabled"],UT=["onClick"],NT={key:0,class:"ml-16 text-xs text-gray-500"},zT={key:1,class:"ml-16 text-xs text-gray-400"},FT={key:2,class:"rounded-lg border border-gray-200 bg-gray-50 p-4 text-sm dark:border-gray-700 dark:bg-gray-800/60"},HT={key:3,class:"space-y-3"},WT=["disabled"],qT={key:4,class:"mt-4 flex justify-end"},KT={__name:"EnvEditor",props:{loading:{type:Boolean,default:!1},error:{type:String,default:""},showSecurityAlert:{type:Boolean,default:!0},allowAdd:{type:Boolean,default:!0},allowRemove:{type:Boolean,default:!0},allowShowValuesToggle:{type:Boolean,default:!0},allowRegroupOption:{type:Boolean,default:!0},showSaveButton:{type:Boolean,default:!0},saveLabel:{type:String,default:"Save .env"},groups:{type:Object,default:()=>({})},variables:{type:Object,default:()=>({})},rawContent:{type:String,default:""},viewMode:{type:String,default:"grouped"},regroupOnSave:{type:Boolean,default:!1}},emits:["update:variables","update:rawContent","update:viewMode","update:regroupOnSave","save"],setup(t,{emit:e}){const s=t,i=e,n=j=>JSON.parse(JSON.stringify(j||{})),o=ae(n(s.variables)),r=ae(s.rawContent||""),l=ae(s.viewMode||"grouped"),a=ae(!!s.regroupOnSave),d=ae(!1),u=ae({});We(()=>s.variables,j=>{o.value=n(j)},{deep:!0}),We(()=>s.rawContent,j=>{l.value==="raw"&&(r.value=j||"")}),We(()=>s.viewMode,j=>{l.value=j||"grouped"}),We(()=>s.regroupOnSave,j=>{a.value=!!j}),We(o,j=>{i("update:variables",n(j)),l.value!=="raw"&&(r.value=Object.entries(j||{}).map(([T,A])=>`${T}=${A??""}`).join(`
`),i("update:rawContent",r.value))},{deep:!0}),We(r,j=>{if(l.value==="raw"){i("update:rawContent",j);const T=f(j);o.value=T,i("update:variables",n(T))}}),We(l,j=>{i("update:viewMode",j)}),We(a,j=>{i("update:regroupOnSave",j)});const f=j=>{const T=(j||"").split(/\r?\n/),A={};return T.forEach(Y=>{const te=Y.trim();if(!te||te.startsWith("#")||!te.includes("="))return;const[me,...le]=te.split("=");A[me.trim()]=le.join("=").replace(/^"|"$/g,"")}),A},h=j=>{const T=Object.entries(j||{});return T.length?T.reduce((A,[Y,te])=>{const me=Y.includes("_")?Y.split("_")[0]:"Other";return A[me]||(A[me]={}),A[me][Y]={defined:!!te,used:!1,used_in:[],value:te},A},{}):{}},m=ne(()=>{const j=s.groups||{};return Object.keys(j).length?j:h(o.value)}),w=()=>{if(!s.allowAdd)return;const j="NEW_VARIABLE";let T=1,A=`${j}_${T}`;for(;o.value[A];)T+=1,A=`${j}_${T}`;o.value={...o.value,[A]:""}},p=j=>{if(!s.allowRemove)return;const T=n(o.value);delete T[j],o.value=T},C=(j,T)=>{if(!T||j===T)return;const A=T.replace(/[^A-Z0-9_]/gi,"").toUpperCase();if(!A)return;const Y=n(o.value);Y[A]||(Y[A]=Y[j],delete Y[j],o.value=Y)},V=j=>{const T=["PASSWORD","SECRET","KEY","TOKEN"],A=j.toUpperCase();return T.some(Y=>A.includes(Y))},U=j=>d.value||u.value[j]||!V(j),B=j=>{u.value[j]=!u.value[j]},H=()=>{d.value=!d.value};return(j,T)=>(g(),b("div",null,[t.error?(g(),b("div",CT,[k(Ps,{type:"error",title:"Error",description:t.error},null,8,["description"])])):I("",!0),t.showSecurityAlert?(g(),b("div",AT,[k(Ps,{type:"warning",title:" Contains Sensitive Data"},{actions:R(()=>[t.viewMode==="grouped"&&t.allowShowValuesToggle?(g(),pe(ze,{key:0,variant:"soft",size:"sm",onClick:H},{default:R(()=>[ie(z(d.value?"Hide Values":"Show Values"),1)]),_:1})):I("",!0)]),default:R(()=>[T[4]||(T[4]=ie(" This file can include passwords and secrets. Keep it out of version control. ",-1))]),_:1})])):I("",!0),k(o$,{modelValue:l.value,"onUpdate:modelValue":T[0]||(T[0]=A=>l.value=A),tabs:[{id:"grouped",label:"Key/Value Editor"},{id:"raw",label:"Raw .env"}],variant:"pills",class:"mb-4"},null,8,["modelValue"]),l.value==="grouped"?(g(),b("div",VT,[Object.keys(m.value).length===0?(g(),b("div",MT,[k(at(u0),{class:"mx-auto mb-3 h-10 w-10 text-gray-400"}),T[6]||(T[6]=c("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"No environment variables yet.",-1)),t.allowAdd?(g(),pe(ze,{key:0,variant:"primary",class:"mt-4",onClick:w},{default:R(()=>[...T[5]||(T[5]=[ie(" Add Variable ",-1)])]),_:1})):I("",!0)])):(g(),b("div",DT,[(g(!0),b(ee,null,ke(m.value,(A,Y)=>(g(),b("div",{key:Y,class:"rounded-lg bg-gray-50 p-5 dark:bg-gray-800/40"},[c("div",$T,[c("div",null,[c("p",TT,z(Y==="Other"?"Uncategorized":Y.toUpperCase()),1),c("p",ET,"Variables with the "+z(Y)+" prefix.",1)]),t.allowAdd?(g(),pe(ze,{key:0,variant:"soft",size:"sm",onClick:w},{default:R(()=>[...T[7]||(T[7]=[ie(" + Add ",-1)])]),_:1})):I("",!0)]),c("div",OT,[(g(!0),b(ee,null,ke(A,(te,me)=>(g(),b("div",{key:me,class:"space-y-2"},[c("div",PT,[c("div",LT,[te.defined&&te.used?(g(),pe(En,{key:0,variant:"green",class:"text-xs"},{default:R(()=>[...T[8]||(T[8]=[ie("",-1)])]),_:1})):!te.defined&&te.used?(g(),pe(En,{key:1,variant:"yellow",class:"text-xs"},{default:R(()=>[...T[9]||(T[9]=[ie("",-1)])]),_:1})):(g(),pe(En,{key:2,variant:"gray",class:"text-xs"},{default:R(()=>[...T[10]||(T[10]=[ie("",-1)])]),_:1}))]),c("div",jT,[c("input",{value:me,onInput:le=>C(me,le.target.value),type:"text",class:"w-full rounded-md border border-gray-300 bg-white px-3 py-2 font-mono text-sm uppercase text-gray-900 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-100",disabled:t.loading},null,40,RT),c("div",BT,[Je(c("input",{"onUpdate:modelValue":le=>o.value[me]=le,type:U(me)?"text":"password",placeholder:te.defined?"value":"(not set)",class:"w-full rounded-md border border-gray-300 bg-white px-3 py-2 font-mono text-sm text-gray-900 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-100",disabled:t.loading},null,8,IT),[[Wk,o.value[me]]]),V(me)&&t.allowShowValuesToggle?(g(),b("button",{key:0,type:"button",class:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300",onClick:le=>B(me)},[U(me)?(g(),pe(at(p2),{key:0,class:"h-4 w-4"})):(g(),pe(at(m2),{key:1,class:"h-4 w-4"}))],8,UT)):I("",!0)])]),t.allowRemove?(g(),pe(ze,{key:0,variant:"soft",size:"sm",class:"text-xs",onClick:le=>p(me)},{default:R(()=>[...T[11]||(T[11]=[ie("  ",-1)])]),_:1},8,["onClick"])):I("",!0)]),te.used&&te.used_in?.length?(g(),b("p",NT," Used in: "+z(te.used_in.join(", ")),1)):te.defined&&!te.used?(g(),b("p",zT,"Not referenced in any files")):I("",!0)]))),128))])]))),128))])),t.allowRegroupOption?(g(),b("div",FT,[k(Ue,{modelValue:a.value,"onUpdate:modelValue":T[1]||(T[1]=A=>a.value=A),label:"Regroup .env file by prefix when saving",description:"Rewrites the file grouped by prefix and strips comments."},null,8,["modelValue"])])):I("",!0)])):(g(),b("div",HT,[Je(c("textarea",{"onUpdate:modelValue":T[2]||(T[2]=A=>j.internalRaw=A),class:"h-80 w-full rounded-md border border-gray-300 bg-white px-3 py-2 font-mono text-sm text-gray-900 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-100",disabled:t.loading},null,8,WT),[[mo,j.internalRaw]]),T[12]||(T[12]=c("p",{class:"text-xs text-gray-500"},"Edit the .env file directly. Comments and formatting are preserved.",-1))])),t.showSaveButton?(g(),b("div",qT,[k(ze,{disabled:t.loading,variant:"primary",onClick:T[3]||(T[3]=A=>j.$emit("save"))},{default:R(()=>[ie(z(t.saveLabel),1)]),_:1},8,["disabled"])])):I("",!0)]))}},GT={key:0,class:"flex items-center justify-center h-96"},JT={key:1,class:"flex-1 p-10"},YT={key:2,class:"flex min-h-screen"},QT={class:"w-64 shrink-0 border-r border-gray-200 p-6 dark:border-gray-800"},XT={class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},ZT={class:"flex items-center gap-2 mb-4"},eE={class:"text-xs text-gray-500 dark:text-gray-400 font-mono truncate"},tE={class:"space-y-1"},sE={key:0,class:"ml-6 mt-1 space-y-0.5"},iE=["href","onClick"],nE={class:"truncate"},oE={key:0,class:"shrink-0 rounded-full bg-gray-100 px-2 py-0.5 text-[10px] font-medium text-gray-500 dark:bg-gray-800 dark:text-gray-300"},rE={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},lE={class:"flex-1 p-10"},aE={id:"overview"},uE={class:"space-y-3"},dE={class:"flex items-center justify-between"},cE={class:"flex-1"},fE={class:"text-sm text-gray-900 dark:text-white"},hE={class:"text-gray-600 dark:text-gray-400"},pE={class:"text-gray-600 dark:text-gray-400"},mE={id:"basics"},gE={key:0},vE={key:1},yE={key:2},bE={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},kE={key:0,class:"space-y-5"},xE={class:"flex items-center gap-2"},wE={class:"flex-1 px-3 py-2 text-sm font-mono text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-md"},_E={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},SE={key:0,class:"space-y-5"},CE={id:"settings"},AE={key:0},VE={key:1},ME={key:2},DE={class:"text-sm text-gray-600 dark:text-gray-400 mb-6"},$E={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 mb-6"},TE={class:"space-y-4 mb-6"},EE={class:"flex items-center gap-2 w-32 shrink-0"},OE={class:"text-sm text-gray-700 dark:text-gray-300 capitalize"},PE={class:"flex-1"},LE={class:"border-t border-gray-200 dark:border-gray-700 pt-4"},jE={class:"space-y-3"},RE={key:0,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 mb-6"},BE={class:"space-y-4 mb-6"},IE={class:"flex items-center gap-2 w-32 shrink-0"},UE={class:"text-sm text-gray-700 dark:text-gray-300 capitalize"},NE={class:"flex-1"},zE={class:"border-t border-gray-200 dark:border-gray-700 pt-4"},FE={class:"space-y-3"},HE={key:1,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 mb-6"},WE={class:"space-y-4 mb-6"},qE={class:"flex items-center gap-2 w-32 shrink-0"},KE={class:"text-sm text-gray-700 dark:text-gray-300 capitalize"},GE={class:"flex-1"},JE={class:"border-t border-gray-200 dark:border-gray-700 pt-4"},YE={class:"space-y-3"},QE={id:"notebooks"},XE={class:"rounded-lg bg-gray-50 p-12 dark:bg-gray-800/50 text-center"},ZE={id:"data"},e7={class:"mb-6 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},t7={class:"mb-6"},s7={key:0,class:"space-y-4"},i7={key:1,class:"mt-4 rounded-lg border border-red-200 bg-red-50 p-4 dark:border-red-500/40 dark:bg-red-900/20"},n7={class:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"},o7={class:"text-sm font-medium text-red-700 dark:text-red-200"},r7={class:"flex gap-2"},l7={class:"mt-3 list-disc space-y-1 pl-5 text-xs font-mono text-red-700 dark:text-red-200/90"},a7={key:2,class:"rounded-xl border border-dashed border-zinc-300 bg-white/70 p-10 text-center dark:border-zinc-700 dark:bg-zinc-900/40"},u7={class:"text-sm font-medium text-zinc-700 dark:text-zinc-200"},d7={id:"connections"},c7={id:"packages"},f7={key:0},h7={key:1},p7={key:2},m7={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},g7={class:"space-y-5"},v7={class:"pt-4 border-t border-gray-200 dark:border-gray-700"},y7={key:0,class:"space-y-3"},b7={class:"flex flex-col gap-3"},k7={class:"grid gap-3 grid-cols-[1fr_160px]"},x7={class:"flex items-center justify-between"},w7={key:1,class:"text-xs text-gray-500 dark:text-gray-400 mb-4"},_7={class:"mt-4"},S7={id:"ai"},C7={key:0},A7={key:1},V7={key:2},M7={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 space-y-6"},D7={key:0,class:"space-y-6 pt-6 border-t border-gray-200 dark:border-gray-700"},$7={class:"space-y-2"},T7={key:1,class:"text-xs text-gray-500 dark:text-gray-400 mt-2"},E7={id:"git"},O7={key:0},P7={key:1},L7={key:2},j7={id:"scaffold"},R7={key:0},B7={key:1},I7={key:2},U7={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},N7={id:"env"},z7={class:"space-y-6"},F7={key:0,class:"max-h-64 overflow-y-auto border border-gray-200 dark:border-gray-700 rounded-md"},H7=["onClick","onMouseenter"],W7={class:"flex items-start justify-between gap-2"},q7={class:"flex-1 min-w-0"},K7={class:"text-sm font-mono font-medium text-gray-900 dark:text-gray-100"},G7={key:0,class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5 line-clamp-1"},J7={key:1,class:"text-xs text-gray-500 dark:text-gray-500 mt-0.5"},Y7={class:"text-xs text-gray-500 dark:text-gray-500 font-mono shrink-0"},Q7={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},X7={key:1,class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},Z7={class:"relative"},eO={class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},tO={__name:"ProjectDetailView",setup(t){const e=Do(),s=Ha(),i=qa(),n=ae(null),o=ae(!0),r=ae(null),l=ae("overview"),a=ae(null),d=ae(""),u=ae(new Set),f=ae(!1),h=ae(null),m=ae(!1),w=ae(null),p=ae(!1),C=ae(new Set),V=ae(!1),U=ae(null),B=ae({}),H=ae(!1),j=ae(null),T=ae(!1),A=ae({initialize:!0,user_name:"",user_email:"",hooks:{ai_sync:!1,data_security:!1,check_sensitive_dirs:!1}}),Y=ae(!1),te=ae(null),me=ae(!1),le=ae(!1),F=ae([]),ge=ae([]),ce=ae([]);ae(!1);const de=ae([]),X=ae([]),Z=ae(null),se=ae(null),Pe=ae(!1),P=ae([]),$e=ae({use_renv:!1,default_packages:[]}),Ie=ae(!1),Qe=ae(null),J=ae(!1),S=ae(!1),v=ae(""),M=ae([]),Q=ae(!1),G=ae(-1),be=ae({name:"",source:"cran",auto_attach:!0}),we=ae({}),$=ae({}),L=ae(""),q=ae(!1),re=ae(null),D=ae(!1),oe=ae("grouped"),Ce=ae(!1),xe=[{id:"claude",label:"Claude Code",description:"Anthropic's IDE-focused assistant."},{id:"copilot",label:"GitHub Copilot",description:"Complements VS Code and JetBrains editors."},{id:"agents",label:"Multi-Agent (OpenAI Codex, Cursor, etc.)",description:"Shared instructions for multi-model orchestrators."}],he=ae({enabled:!1,canonical_file:"CLAUDE.md",canonical_content:"",assistants:[]}),ve=ae(!1),je=ae(null),Ae=ae(!1),Re=ae(!1),_e=ae(!1),Fe=ae({file:"CLAUDE.md",exists:!0}),Ge=E=>["flex items-center gap-2 px-3 py-2 rounded-md text-sm transition",l.value===E?"bg-sky-50 text-sky-700 font-medium dark:bg-sky-900/20 dark:text-sky-400":"text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-800"],Xe=()=>{const E=e.query.section;E&&["overview","basics","settings","notebooks","connections","data","packages","ai","git","scaffold","env"].includes(E)?l.value=E:l.value="overview"};We(l,E=>{s.replace({query:{...e.query,section:E}}),(E==="settings"||E==="basics"||E==="scaffold")&&!U.value&&Cf(),E==="connections"&&de.value.length===0&&X.value.length===0&&vb(),E==="packages"&&P.value.length===0&&Af(),E==="git"&&!me.value&&Ef(),E==="ai"&&!Ae.value&&Tf(),E==="env"&&Object.keys(we.value).length===0&&Bf()}),We(()=>e.query.section,E=>{const x=["overview","basics","settings","notebooks","connections","data","packages","ai","git","scaffold","env"];E&&E!==l.value&&x.includes(E)&&(l.value=E)});let _t=!1;We(()=>he.value.canonical_file,(E,x)=>{_t||Ae.value&&(!E||E===x||Lf(E))});let $t=null;We(v,()=>{$t&&clearTimeout($t),$t=setTimeout(()=>{bb()},300)});const Pt=(E="")=>E.split(/[._-]/).filter(Boolean).map(x=>x.charAt(0).toUpperCase()+x.slice(1)).join(" "),ot=E=>JSON.parse(JSON.stringify(E)),_s=E=>Array.isArray(E)?E.map((x,O)=>[String(O),x]):Object.entries(E),pn=(E,x="",O=0)=>!E||typeof E!="object"?[]:_s(E).reduce((Se,[Ve,Be])=>{if(Be==null)return Se;const Qt=x?`${x}.${Ve}`:Ve;if(typeof Be=="object"&&!Array.isArray(Be)&&Be.path)return Se.push({type:"leaf",name:Ve,displayName:Pt(Ve),fullKey:Qt,data:Be,leafCount:1,depth:O}),Se;if(typeof Be=="object"){const xt=pn(Be,Qt,O+1);if(xt.length>0){const Cs=xt.reduce((Ws,lu)=>Ws+(lu.leafCount||0),0);Se.push({type:"group",name:Ve,displayName:Pt(Ve),fullKey:Qt,children:xt,leafCount:Cs,depth:O})}}return Se},[]),Lt=E=>E.slice().sort((x,O)=>x.displayName.localeCompare(O.displayName,void 0,{sensitivity:"base",numeric:!0})).map(x=>x.type==="group"?{...x,children:Lt(x.children)}:x),ct=(E,x)=>{if(!x)return!0;const O=x.toLowerCase(),Se=[E.displayName,E.name,E.fullKey];return E.type==="leaf"&&E.data?.path&&Se.push(E.data.path),Se.some(Ve=>Ve&&Ve.toLowerCase().includes(O))},ii=(E,x)=>{if(!x)return{nodes:E,matchedKeys:new Set};const O=[],Se=new Set;return E.forEach(Ve=>{if(Ve.type==="leaf"){ct(Ve,x)&&(O.push(Ve),Se.add(Ve.fullKey));return}const Be=ii(Ve.children,x);if(ct(Ve,x)||Be.nodes.length>0){const xt=Be.nodes,Cs=xt.reduce((Ws,lu)=>Ws+(lu.leafCount||0),0);O.push({...Ve,children:xt,leafCount:Cs||Ve.leafCount}),Se.add(Ve.fullKey),Be.matchedKeys.forEach(Ws=>Se.add(Ws))}}),{nodes:O,matchedKeys:Se}},_i=ne(()=>{const E=a.value;return!E||typeof E!="object"?[]:!Array.isArray(E)&&E.path?[{type:"leaf",name:E.name||"data",displayName:Pt(E.name||"data"),fullKey:E.name||"data",data:E,leafCount:1,depth:0}]:Lt(pn(E))}),Xr=ne(()=>d.value.trim().toLowerCase()),Zr=ne(()=>{const E=Xr.value;return E?ii(_i.value,E):{nodes:_i.value,matchedKeys:new Set}}),el=ne(()=>Zr.value.nodes),jt=ne(()=>Zr.value.matchedKeys),Po=ne(()=>Xr.value.length>0),tl=ne(()=>Po.value?[]:(_i.value||[]).filter(E=>(E.depth||0)===0).map(E=>{const x=E.fullKey||E.name||"";return{anchorId:x?fb(x):null,label:E.displayName||Pt(E.name||x||"data source"),count:E.leafCount||(E.type==="leaf"?1:0),nodeKey:x}}).filter(E=>E.anchorId&&E.label)),Wn=ne(()=>C.value.size>0),sl=ne(()=>C.value.size),il=ne(()=>Array.from(C.value)),Lo=E=>{let x=0;return E.forEach(O=>{x=Math.max(x,O.depth||0),O.type==="group"&&O.children&&(x=Math.max(x,Lo(O.children)))}),x},ni=ne(()=>Lo(_i.value)),oi=ne(()=>ni.value>2),Es=ne(()=>{const E=B.value.directories||{},x={},O=["functions","notebooks","scripts"];return Object.keys(E).forEach(Se=>{O.includes(Se)&&(x[Se]=E[Se])}),x}),ms=ne(()=>{const E=B.value.directories||{},x={};return Object.keys(E).forEach(O=>{(O.startsWith("inputs_")||O.includes("_raw")||O.includes("_intermediate")||O.includes("_final"))&&(x[O]=E[O])}),x}),jo=ne(()=>{const E=B.value.directories||{},x={};return Object.keys(E).forEach(O=>{(O.startsWith("outputs_")||O.includes("_figures")||O.includes("_tables")||O.includes("_models")||O.includes("_reports")||O==="cache"||O==="scratch")&&!O.startsWith("inputs_")&&(x[O]=E[O])}),x}),qn=E=>E.replace(/_/g," ").replace(/\b\w/g,x=>x.toUpperCase()),nl=ne(()=>{const E=n.value?.type;return E?{project:"Standard Project Structure",project_sensitive:"Privacy Sensitive Project Structure",presentation:"Presentation Structure",course:"Course Structure"}[E]||E:"Standard Project Structure"}),ol=(E,x,O)=>{const Se=x.split(".").filter(Boolean);if(Se.length===0)return null;const Ve=ot(E||{});let Be=Ve;for(let Qt=0;Qt<Se.length-1;Qt++){const xt=Se[Qt];(!Be[xt]||typeof Be[xt]!="object"||Array.isArray(Be[xt]))&&(Be[xt]={}),Be=Be[xt]}return Be[Se[Se.length-1]]=ot(O),Ve},N=(E,x)=>{if(!E||!x)return null;const O=x.split(".").filter(Boolean);if(O.length===0)return null;let Se=E;for(let Ve=0;Ve<O.length;Ve++){const Be=O[Ve];if(!Se||typeof Se!="object"||!(Be in Se))return null;Se=Se[Be]}return Se},_=E=>{const x=E.split(".").filter(Boolean);if(x.length<=1)return;const O=new Set(u.value);let Se="";for(let Ve=0;Ve<x.length-1;Ve++)Se=Se?`${Se}.${x[Ve]}`:x[Ve],O.add(Se);u.value=O},y=async(E,x)=>{if(!E)return;if(x){_(x);const Se=new Set(u.value);Se.add(x),u.value=Se}await Tn();const O=document.getElementById(E);O&&O.scrollIntoView({behavior:"smooth",block:"start"})},K=async E=>{const x=await fetch(`/api/project/${e.params.id}/data`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:E})}),O=await x.json();if(!x.ok||O.error)throw new Error(O.error||"Failed to save data catalog")},fe=E=>{E&&(p.value=!1,h.value={fullKey:E.fullKey,name:E.name,data:ot(E.data||{})},w.value=null,f.value=!0)},ye=()=>{p.value=!0,h.value={fullKey:"",data:{}},w.value=null,f.value=!0},Ze=E=>{f.value=E,E||(h.value=null,w.value=null,m.value=!1,p.value=!1)},At=async E=>{if(!E||!E.fullKey||!E.data){w.value=E?.error||"Invalid data entry payload";return}const x=E.fullKey.trim(),O=!!E.isNew;if(!x){w.value="Dot notation key is required";return}if(O&&N(a.value,x)){w.value="A data source with this key already exists";return}const Se=ot(a.value),Ve=ol(a.value,x,E.data);if(!Ve){w.value="Unable to write data entry to catalog";return}a.value=Ve,m.value=!0,w.value=null;try{if(await K(Ve),_(x),i.success(O?"Data Source Added":"Data Catalog Updated",O?"Data entry created successfully":"Data entry saved successfully"),f.value=!1,h.value=null,p.value=!1,C.value.has(x)){const Be=new Set(C.value);Be.delete(x),C.value=Be}}catch(Be){a.value=Se,w.value=Be.message||"Failed to save data catalog",i.error("Save Failed",Be.message||"Failed to save data catalog")}finally{m.value=!1}},Ss=(E,x)=>{if(!E||!x)return null;const O=x.split(".").filter(Boolean);if(O.length===0)return null;const Se=ot(E),Ve=[];let Be=Se;for(let xt=0;xt<O.length;xt++){const Cs=O[xt];if(!Be||typeof Be!="object"||!(Cs in Be))return null;Ve.push({parent:Be,key:Cs}),Be=Be[Cs]}const Qt=Ve.pop();if(!Qt)return null;delete Qt.parent[Qt.key];for(let xt=Ve.length-1;xt>=0;xt--){const{parent:Cs,key:Ws}=Ve[xt];Cs[Ws]&&typeof Cs[Ws]=="object"&&!Array.isArray(Cs[Ws])&&Object.keys(Cs[Ws]).length===0&&delete Cs[Ws]}return Se},Vt=async()=>{if(!Wn.value)return;V.value=!0;const E=ot(a.value);let x=ot(E);for(const O of C.value){const Se=Ss(x,O);if(!Se){i.error("Delete Failed",`Unable to locate ${O} in catalog`),V.value=!1;return}x=Se}try{await K(x),a.value=x,i.success("Data Catalog Updated","Staged deletions have been saved"),C.value=new Set}catch(O){i.error("Delete Failed",O.message||"Failed to save catalog changes")}finally{V.value=!1}},mn=E=>{if(!E||!E.fullKey)return;const x=new Set(C.value);x.has(E.fullKey)?x.delete(E.fullKey):x.add(E.fullKey),C.value=x},hb=()=>{C.value=new Set},pb=E=>{const x=new Set(u.value);x.has(E)?x.delete(E):x.add(E),u.value=x},_f=async()=>{o.value=!0,r.value=null;try{const x=await(await fetch(`/api/project/${e.params.id}`)).json();x.error?r.value=x.error:n.value=x}catch(E){r.value="Failed to load project: "+E.message}finally{o.value=!1}},Sf=async()=>{try{const x=await(await fetch(`/api/project/${e.params.id}/data`)).json();x.error||(a.value=x.data||x)}catch(E){console.error("Failed to load data catalog:",E)}},Cf=async()=>{H.value=!0,j.value=null;try{const x=await(await fetch(`/api/project/${e.params.id}/settings`)).json();x.error?j.value=x.error:(U.value=x.settings,B.value=JSON.parse(JSON.stringify(x.settings)),B.value.scaffold||(B.value.scaffold={notebook_format:"quarto",positron:!1}))}catch(E){j.value="Failed to load settings: "+E.message}finally{H.value=!1}},mb=async()=>{switch(l.value){case"author":case"settings":await ou();break;case"packages":await Vf();break;case"scaffold":await ou();break;case"git":await Rf();break;case"connections":await Mf();break;case"ai":await jf();break;case"env":await ru();break;case"overview":case"notebooks":case"data":i.info("No Changes to Save","This section has no editable settings");break;default:i.info("No Changes to Save","This section has no editable settings")}},ou=async()=>{T.value=!0;try{const E=[...F.value,...ge.value,...ce.value];if(E.length>0){const Ve=await(await fetch(`/api/project/${e.params.id}/directories`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({directories:E})})).json();if(!Ve.success){i.error("Directory Creation Failed",Ve.error||"Failed to create directories"),T.value=!1;return}F.value=[],ge.value=[],ce.value=[]}const O=await(await fetch(`/api/project/${e.params.id}/settings`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(B.value)})).json();if(O.success){const Se=E.length>0?`Settings updated and ${E.length} director${E.length===1?"y":"ies"} created`:"Project settings have been updated";i.success("Settings Saved",Se),U.value=JSON.parse(JSON.stringify(B.value)),await Cf()}else i.error("Save Failed",O.error||"Failed to save settings")}catch(E){i.error("Save Failed",E.message)}finally{T.value=!1}},gb=E=>{E&&y(E.anchorId,E.nodeKey)},vb=async()=>{try{const x=await(await fetch(`/api/project/${e.params.id}/connections`)).json();if(x.error)console.error("Failed to load connections:",x.error);else{const O=Object.entries(x.databases||{}).map(([Ve,Be])=>({_id:Ve,name:Ve,...Be})),Se=Object.entries(x.storage_buckets||{}).map(([Ve,Be])=>({_id:Ve,name:Ve,...Be}));de.value=O,X.value=Se,Z.value=x.default_database||null,se.value=x.default_storage_bucket||null}}catch(E){console.error("Failed to load connections:",E.message)}},Af=async()=>{Ie.value=!0,Qe.value=null;try{const x=await(await fetch(`/api/project/${e.params.id}/packages`)).json();x.error?Qe.value=x.error:(P.value=(x.packages||[]).map(O=>({name:O.name||"",source:O.source||"cran",auto_attach:O.auto_attach!==void 0?O.auto_attach:!0,ref:O.ref||""})),$e.value={use_renv:x.use_renv||!1,default_packages:JSON.parse(JSON.stringify(P.value))})}catch(E){Qe.value="Failed to load packages: "+E.message}finally{Ie.value=!1}},Vf=async()=>{J.value=!0;try{const x=await(await fetch(`/api/project/${e.params.id}/packages`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({use_renv:$e.value.use_renv,packages:$e.value.default_packages})})).json();x.success?(i.success("Packages Saved","Package configuration has been updated"),await Af()):i.error("Save Failed",x.error||"Failed to save packages")}catch(E){i.error("Save Failed",E.message)}finally{J.value=!1}},Mf=async()=>{Pe.value=!0;try{const E={};de.value.forEach(Ve=>{const{_id:Be,name:Qt,...xt}=Ve;E[Qt]=xt});const x={};X.value.forEach(Ve=>{const{_id:Be,name:Qt,...xt}=Ve;x[Qt]=xt});const Se=await(await fetch(`/api/project/${e.params.id}/connections`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({default_database:Z.value,default_storage_bucket:se.value,databases:E,storage_buckets:x})})).json();Se.success?i.success("Connections Saved","Connection configuration has been updated"):i.error("Save Failed",Se.error||"Failed to save connections")}catch(E){i.error("Save Failed",E.message)}finally{Pe.value=!1}},yb=()=>{$e.value.default_packages||($e.value.default_packages=[]),$e.value.default_packages.push({name:"",source:"cran",auto_attach:!0})},bb=async()=>{if(v.value.length<2){M.value=[],G.value=-1;return}Q.value=!0;try{const x=await(await fetch(`/api/packages/search?q=${encodeURIComponent(v.value)}`)).json();console.log("Package search results:",x),M.value=x.packages||[],G.value=M.value.length>0?0:-1}catch(E){console.error("Failed to search packages:",E),M.value=[],G.value=-1}finally{Q.value=!1}},kb=E=>{M.value.length!==0&&(E.key==="ArrowDown"?(E.preventDefault(),G.value=Math.min(G.value+1,M.value.length-1)):E.key==="ArrowUp"?(E.preventDefault(),G.value=Math.max(G.value-1,0)):E.key==="Enter"&&G.value>=0?(E.preventDefault(),Df(M.value[G.value])):E.key==="Escape"&&(M.value=[],G.value=-1))},Df=E=>{be.value.name=E.name,be.value.source=E.source,v.value="",M.value=[],G.value=-1},xb=()=>{be.value.name.trim()&&(P.value.push({name:be.value.name.trim(),source:be.value.source,auto_attach:be.value.auto_attach}),S.value=!1,i.success("Package Added",`${be.value.name} added to package list`))},wb=E=>{$e.value.default_packages.splice(E,1)},_b=E=>E?Array.isArray(E)?Array.from(new Set(E.map(x=>String(x)))):typeof E=="string"?[E]:[]:[],$f=async E=>{let x=`/api/project/${e.params.id}/ai`;if(E){const Se=new URLSearchParams;Se.set("canonical_file",E),x+=`?${Se.toString()}`}const O=await fetch(x);if(!O.ok)throw new Error("Failed to load AI settings");return O.json()},Tf=async()=>{ve.value=!0,je.value=null;try{const E=await $f();if(E.error){je.value=E.error,Ae.value=!1;return}const x=E.ai||{};_t=!0;const O={enabled:!!x.enabled,canonical_file:x.canonical_file||"CLAUDE.md",canonical_content:x.canonical_content||"",assistants:_b(x.assistants)};he.value=O,Fe.value={file:x.content_file||x.canonical_file||"CLAUDE.md",exists:!!x.content_exists},_t=!1,await Pf(O.canonical_file,{preserveContentIfMissing:!1}),Ae.value=!0}catch(E){je.value=E.message||"Failed to load AI settings",Ae.value=!1}finally{_t=!1,ve.value=!1,_e.value=!1}},Ef=async()=>{Y.value=!0,te.value=null;try{const x=await(await fetch(`/api/project/${e.params.id}/git`)).json();if(x.error){te.value=x.error,me.value=!1;return}const O=x.git||{};A.value={initialize:O.initialize!==void 0?!!O.initialize:!0,user_name:O.user_name||"",user_email:O.user_email||"",hooks:{ai_sync:O.hooks?.ai_sync||!1,data_security:O.hooks?.data_security||!1,check_sensitive_dirs:O.hooks?.check_sensitive_dirs||!1}},me.value=!0}catch(E){te.value=E.message||"Failed to load Git settings",me.value=!1}finally{Y.value=!1}},Of=ne({get(){return{initialize:A.value.initialize,user_name:A.value.user_name||"",user_email:A.value.user_email||"",hooks:{ai_sync:A.value.hooks?.ai_sync||!1,data_security:A.value.hooks?.data_security||!1,check_sensitive_dirs:A.value.hooks?.check_sensitive_dirs||!1}}},set(E){A.value={initialize:E.initialize,user_name:E.user_name,user_email:E.user_email,hooks:{ai_sync:E.hooks.ai_sync,data_security:E.hooks.data_security,check_sensitive_dirs:E.hooks.check_sensitive_dirs}}}}),Pf=async(E,{preserveContentIfMissing:x=!0}={})=>{if(E){_e.value=!0;try{const O=await $f(E);if(O.error){i.error("Load Failed",O.error);return}const Se=O.ai||{};Fe.value={file:Se.content_file||E,exists:!!Se.content_exists},(Se.content_exists||!x)&&(he.value.canonical_content=Se.canonical_content||"")}catch(O){i.error("Load Failed",O.message||"Unable to load canonical file")}finally{_e.value=!1}}},Lf=E=>{const x=typeof E=="string"&&E.length>0?E:"CLAUDE.md";Pf(x,{preserveContentIfMissing:!0})},Sb=(E,x)=>{if(!E)return;const O=new Set(he.value.assistants);x?O.add(E):O.delete(E),he.value.assistants=Array.from(O)},jf=async()=>{Re.value=!0;try{const x=await(await fetch(`/api/project/${e.params.id}/ai`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:he.value.enabled,canonical_file:he.value.canonical_file,assistants:he.value.assistants,canonical_content:he.value.canonical_content})})).json();x.success?(i.success("AI Settings Saved","AI assistant configuration has been updated"),Ae.value=!1,await Tf()):i.error("Save Failed",x.error||"Failed to save AI settings")}catch(E){i.error("Save Failed",E.message||"Failed to save AI settings")}finally{Re.value=!1}},Rf=async()=>{le.value=!0;try{const x=await(await fetch(`/api/project/${e.params.id}/git`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({initialize:A.value.initialize,user_name:A.value.user_name,user_email:A.value.user_email,hooks:A.value.hooks})})).json();x.success?(i.success("Git Settings Saved","Repository configuration has been updated"),me.value=!1,await Ef()):i.error("Save Failed",x.error||"Failed to save Git settings")}catch(E){i.error("Save Failed",E.message||"Failed to save Git settings")}finally{le.value=!1}},Bf=async()=>{q.value=!0,re.value=null;try{const x=await(await fetch(`/api/project/${e.params.id}/env`)).json();x.error?re.value=x.error:(we.value=x.variables||{},$.value=x.groups||{},L.value=x.raw_content||"")}catch(E){re.value="Failed to load .env: "+E.message}finally{q.value=!1}},ru=async()=>{D.value=!0;try{const E=oe.value==="raw"?{raw_content:L.value}:{variables:we.value,regroup:Ce.value},O=await(await fetch(`/api/project/${e.params.id}/env`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(E)})).json();O.success?(i.success(".env Saved","Environment variables have been updated"),await Bf()):i.error("Save Failed",O.error||"Failed to save .env")}catch(E){i.error("Save Failed",E.message)}finally{D.value=!1}},If=E=>{(E.metaKey||E.ctrlKey)&&E.key==="s"&&(E.preventDefault(),l.value==="settings"||l.value==="scaffold"?ou():l.value==="connections"?Mf():l.value==="packages"?Vf():l.value==="git"?Rf():l.value==="ai"?jf():l.value==="directories"?saveDirectories():l.value==="env"&&ru())};return ns(()=>{Xe(),_f(),Sf(),window.addEventListener("keydown",If)}),Mo(()=>{window.removeEventListener("keydown",If)}),We(()=>e.params.id,(E,x)=>{E&&E!==x&&(l.value="overview",n.value=null,U.value=null,B.value={},j.value=null,H.value=!1,P.value=[],$e.value={use_renv:!1,default_packages:[]},Qe.value=null,Ie.value=!1,a.value=null,C.value=new Set,w.value=null,h.value=null,we.value={},$.value={},L.value="",re.value=null,q.value=!1,oe.value="grouped",Ce.value=!1,A.value={initialize:!0,user_name:"",user_email:"",hooks:{ai_sync:!1,data_security:!1,check_sensitive_dirs:!1}},me.value=!1,te.value=null,Y.value=!1,_t=!0,he.value={enabled:!1,canonical_file:"CLAUDE.md",canonical_content:"",assistants:[]},Fe.value={file:"CLAUDE.md",exists:!0},Ae.value=!1,je.value=null,ve.value=!1,_e.value=!1,_t=!1,a.value=null,Xe(),_f(),Sf())}),(E,x)=>(g(),b("div",null,[o.value?(g(),b("div",GT,[...x[44]||(x[44]=[c("div",{class:"text-zinc-600 dark:text-zinc-400"},"Loading project...",-1)])])):r.value?(g(),b("div",JT,[k(Ps,{type:"error",title:"Error Loading Project",description:r.value},null,8,["description"])])):n.value?(g(),b("div",YT,[c("nav",QT,[c("h2",XT,z(n.value.name),1),c("div",ZT,[c("span",eE,z(n.value.path),1),k(ao,{value:n.value.path,variant:"ghost",successMessage:"Path copied",class:"shrink-0"},null,8,["value"])]),c("div",tE,[c("a",{href:"#overview",onClick:x[0]||(x[0]=Ut(O=>l.value="overview",["prevent"])),class:Ee(Ge("overview"))},[k(at(Wa),{class:"h-4 w-4"}),x[45]||(x[45]=ie(" Overview ",-1))],2),k(Da,null,{default:R(()=>[...x[46]||(x[46]=[ie("Settings",-1)])]),_:1}),c("a",{href:"#basics",onClick:x[1]||(x[1]=Ut(O=>l.value="basics",["prevent"])),class:Ee(Ge("basics"))},[k(at(Ec),{class:"h-4 w-4"}),x[47]||(x[47]=ie(" Basics ",-1))],2),c("a",{href:"#settings",onClick:x[2]||(x[2]=Ut(O=>l.value="settings",["prevent"])),class:Ee(Ge("settings"))},[k(at(aa),{class:"h-4 w-4"}),x[48]||(x[48]=ie(" Project Structure ",-1))],2),c("a",{href:"#packages",onClick:x[3]||(x[3]=Ut(O=>l.value="packages",["prevent"])),class:Ee(Ge("packages"))},[k(at(Oc),{class:"h-4 w-4"}),x[49]||(x[49]=ie(" Packages ",-1))],2),c("a",{href:"#ai",onClick:x[4]||(x[4]=Ut(O=>l.value="ai",["prevent"])),class:Ee(Ge("ai"))},[k(at(v2),{class:"h-4 w-4"}),x[50]||(x[50]=ie(" AI Assistants ",-1))],2),c("a",{href:"#git",onClick:x[5]||(x[5]=Ut(O=>l.value="git",["prevent"])),class:Ee(Ge("git"))},[...x[51]||(x[51]=[c("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})],-1),ie(" Git & Hooks ",-1)])],2),c("a",{href:"#connections",onClick:x[6]||(x[6]=Ut(O=>l.value="connections",["prevent"])),class:Ee(Ge("connections"))},[k(at(Pc),{class:"h-4 w-4"}),x[52]||(x[52]=ie(" Connections ",-1))],2),c("a",{href:"#scaffold",onClick:x[7]||(x[7]=Ut(O=>l.value="scaffold",["prevent"])),class:Ee(Ge("scaffold"))},[k(at(u2),{class:"h-4 w-4"}),x[53]||(x[53]=ie(" Scaffold Behavior ",-1))],2),k(Da,null,{default:R(()=>[...x[54]||(x[54]=[ie("Project",-1)])]),_:1}),c("a",{href:"#data",onClick:x[8]||(x[8]=Ut(O=>l.value="data",["prevent"])),class:Ee(Ge("data"))},[k(at(f2),{class:"h-4 w-4"}),x[55]||(x[55]=ie(" Data ",-1))],2),l.value==="data"&&tl.value.length?(g(),b("div",sE,[(g(!0),b(ee,null,ke(tl.value,O=>(g(),b("a",{key:O.anchorId,href:`#${O.anchorId}`,onClick:Ut(Se=>gb(O),["prevent"]),class:"flex items-center justify-between gap-2 rounded-md px-3 py-1 text-xs text-gray-600 transition hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-gray-800"},[c("span",nE,z(O.label),1),O.count?(g(),b("span",oE,z(O.count),1)):I("",!0)],8,iE))),128))])):I("",!0),c("a",{href:"#notebooks",onClick:x[9]||(x[9]=Ut(O=>l.value="notebooks",["prevent"])),class:Ee(Ge("notebooks"))},[k(at(pd),{class:"h-4 w-4"}),x[56]||(x[56]=ie(" Notebooks ",-1))],2),c("a",{href:"#env",onClick:x[10]||(x[10]=Ut(O=>l.value="env",["prevent"])),class:Ee(Ge("env"))},[k(at(u0),{class:"h-4 w-4"}),x[57]||(x[57]=ie(" .env ",-1))],2)]),c("div",rE,[k(ze,{variant:"primary",onClick:mb,disabled:T.value||J.value||D.value||Re.value||le.value||Pe.value,class:"w-full"},{default:R(()=>[ie(z(T.value||J.value||D.value||Re.value||le.value||Pe.value?"Saving...":"Save"),1)]),_:1},8,["disabled"])])]),c("div",lE,[Je(c("div",aE,[x[62]||(x[62]=c("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Overview",-1)),x[63]||(x[63]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Quick overview of your project settings. ",-1)),c("div",uE,[c("button",{onClick:x[11]||(x[11]=O=>l.value="basics"),class:"w-full text-left px-4 py-3 rounded-md bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 hover:border-sky-300 dark:hover:border-sky-700 transition"},[c("div",dE,[c("div",cE,[x[60]||(x[60]=c("div",{class:"text-xs text-gray-500 dark:text-gray-400 mb-1"},"Basics",-1)),c("div",fE,[c("span",null,z(n.value.name||"Untitled"),1),n.value.author?(g(),b(ee,{key:0},[x[58]||(x[58]=c("span",{class:"text-gray-400 dark:text-gray-500 mx-1"},"",-1)),c("span",hE,z(n.value.author),1)],64)):I("",!0),B.value.scaffold?.notebook_format?(g(),b(ee,{key:1},[x[59]||(x[59]=c("span",{class:"text-gray-400 dark:text-gray-500 mx-1"},"",-1)),c("span",pE,z(B.value.scaffold.notebook_format),1)],64)):I("",!0)])]),x[61]||(x[61]=c("svg",{class:"h-5 w-5 text-gray-400 shrink-0 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))])])])],512),[[nt,l.value==="overview"]]),Je(c("div",mE,[H.value?(g(),b("div",gE,[...x[64]||(x[64]=[c("div",{class:"text-center py-12 text-zinc-500 dark:text-zinc-400"}," Loading settings... ",-1)])])):j.value?(g(),b("div",vE,[k(Ps,{type:"error",title:"Error Loading Settings",description:j.value},null,8,["description"])])):(g(),b("div",yE,[x[72]||(x[72]=c("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Basics",-1)),x[73]||(x[73]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Essential project settings. ",-1)),c("div",bE,[B.value.scaffold?(g(),b("div",kE,[k(W,{modelValue:n.value.name,"onUpdate:modelValue":x[12]||(x[12]=O=>n.value.name=O),label:"Project Name",hint:"Changing this will rename the project directory"},null,8,["modelValue"]),c("div",null,[x[65]||(x[65]=c("label",{class:"block text-sm font-semibold text-gray-900 dark:text-white mb-2"}," Filesystem Location ",-1)),c("div",xE,[c("code",wE,z(n.value.path),1),k(ao,{value:n.value.path,successMessage:"Path copied"},null,8,["value"])])]),c("div",null,[x[67]||(x[67]=c("label",{class:"block text-sm font-semibold text-gray-900 dark:text-white mb-3"}," Supported Editors ",-1)),k(gi,{modelValue:B.value.scaffold.positron,"onUpdate:modelValue":x[13]||(x[13]=O=>B.value.scaffold.positron=O),id:"support-positron-edit",description:"Enable Positron-specific workspace and settings files"},{default:R(()=>[...x[66]||(x[66]=[ie(" Positron ",-1)])]),_:1},8,["modelValue"]),x[68]||(x[68]=c("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-3"}," RStudio supported by default ",-1))]),k(Ht,{modelValue:B.value.scaffold.notebook_format,"onUpdate:modelValue":x[14]||(x[14]=O=>B.value.scaffold.notebook_format=O),label:"Default Notebook Format",hint:"Format used when creating new notebooks"},{default:R(()=>[...x[69]||(x[69]=[c("option",{value:"quarto"},"Quarto (.qmd)",-1),c("option",{value:"rmarkdown"},"R Markdown (.Rmd)",-1)])]),_:1},8,["modelValue"]),c("div",_E,[x[70]||(x[70]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"}," Author Information ",-1)),x[71]||(x[71]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-5"}," Configure author details for this project. ",-1)),B.value.author?(g(),b("div",SE,[k(W,{modelValue:B.value.author.name,"onUpdate:modelValue":x[15]||(x[15]=O=>B.value.author.name=O),label:"Author Name"},null,8,["modelValue"]),k(W,{modelValue:B.value.author.email,"onUpdate:modelValue":x[16]||(x[16]=O=>B.value.author.email=O),label:"Email",type:"email"},null,8,["modelValue"]),k(W,{modelValue:B.value.author.affiliation,"onUpdate:modelValue":x[17]||(x[17]=O=>B.value.author.affiliation=O),label:"Affiliation"},null,8,["modelValue"])])):I("",!0)])])):I("",!0)])]))],512),[[nt,l.value==="basics"]]),Je(c("div",CE,[H.value?(g(),b("div",AE,[...x[74]||(x[74]=[c("div",{class:"text-center py-12 text-zinc-500 dark:text-zinc-400"}," Loading settings... ",-1)])])):j.value?(g(),b("div",VE,[k(Ps,{type:"error",title:"Error Loading Settings",description:j.value},null,8,["description"])])):(g(),b("div",ME,[x[83]||(x[83]=c("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Project Structure",-1)),c("p",DE,[x[75]||(x[75]=ie(" This project uses the ",-1)),c("strong",null,z(nl.value),1),x[76]||(x[76]=ie(" structure. Existing directories cannot be renamed or removed, but you can add custom directories below. ",-1))]),c("div",$E,[x[77]||(x[77]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Workspaces",-1)),x[78]||(x[78]=c("p",{class:"text-xs text-gray-600 dark:text-gray-400 mb-4"}," Functions, notebooks, and scripts scaffolded into every project. ",-1)),c("div",TE,[(g(!0),b(ee,null,ke(Es.value,(O,Se)=>(g(),b("div",{key:Se,class:"flex items-start gap-4"},[c("div",EE,[k(Ue,{"model-value":!0,disabled:"",class:"pointer-events-none opacity-50"}),c("label",OE,z(qn(Se)),1)]),c("div",PE,[k(W,{"model-value":O,disabled:"",prefix:"/",monospace:"",class:"opacity-75"},null,8,["model-value"])])]))),128))]),c("div",LE,[k(gt,{modelValue:F.value,"onUpdate:modelValue":x[18]||(x[18]=O=>F.value=O),"add-label":"Add Workspace Directory","default-item":()=>({key:"",label:"",path:"",category:"workspace",_id:Date.now()})},{default:R(({item:O,index:Se,update:Ve})=>[c("div",jE,[k(W,{"model-value":O.key,"onUpdate:modelValue":Be=>Ve("key",Be),label:"Key",placeholder:"e.g., helpers",size:"sm",monospace:""},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":O.label,"onUpdate:modelValue":Be=>Ve("label",Be),label:"Label",placeholder:"e.g., Helper Scripts",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":O.path,"onUpdate:modelValue":Be=>Ve("path",Be),label:"Path",placeholder:"e.g., helpers",prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["modelValue","default-item"])])]),ms.value&&Object.keys(ms.value).length>0?(g(),b("div",RE,[x[79]||(x[79]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Inputs",-1)),x[80]||(x[80]=c("p",{class:"text-xs text-gray-600 dark:text-gray-400 mb-4"}," Define the read-only locations where raw and prepared data live. ",-1)),c("div",BE,[(g(!0),b(ee,null,ke(ms.value,(O,Se)=>(g(),b("div",{key:Se,class:"flex items-start gap-4"},[c("div",IE,[k(Ue,{"model-value":!0,disabled:"",class:"pointer-events-none opacity-50"}),c("label",UE,z(qn(Se)),1)]),c("div",NE,[k(W,{"model-value":O,disabled:"",prefix:"/",monospace:"",class:"opacity-75"},null,8,["model-value"])])]))),128))]),c("div",zE,[k(gt,{modelValue:ge.value,"onUpdate:modelValue":x[19]||(x[19]=O=>ge.value=O),"add-label":"Add Input Directory","default-item":()=>({key:"",label:"",path:"",category:"input",_id:Date.now()})},{default:R(({item:O,index:Se,update:Ve})=>[c("div",FE,[k(W,{"model-value":O.key,"onUpdate:modelValue":Be=>Ve("key",Be),label:"Key",placeholder:"e.g., inputs_archive",size:"sm",monospace:""},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":O.label,"onUpdate:modelValue":Be=>Ve("label",Be),label:"Label",placeholder:"e.g., Archived Inputs",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":O.path,"onUpdate:modelValue":Be=>Ve("path",Be),label:"Path",placeholder:"e.g., inputs/archive",prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["modelValue","default-item"])])])):I("",!0),jo.value&&Object.keys(jo.value).length>0?(g(),b("div",HE,[x[81]||(x[81]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Outputs",-1)),x[82]||(x[82]=c("p",{class:"text-xs text-gray-600 dark:text-gray-400 mb-4"}," Results, figures, tables, and rendered outputs. ",-1)),c("div",WE,[(g(!0),b(ee,null,ke(jo.value,(O,Se)=>(g(),b("div",{key:Se,class:"flex items-start gap-4"},[c("div",qE,[k(Ue,{"model-value":!0,disabled:"",class:"pointer-events-none opacity-50"}),c("label",KE,z(qn(Se)),1)]),c("div",GE,[k(W,{"model-value":O,disabled:"",prefix:"/",monospace:"",class:"opacity-75"},null,8,["model-value"])])]))),128))]),c("div",JE,[k(gt,{modelValue:ce.value,"onUpdate:modelValue":x[20]||(x[20]=O=>ce.value=O),"add-label":"Add Output Directory","default-item":()=>({key:"",label:"",path:"",category:"output",_id:Date.now()})},{default:R(({item:O,index:Se,update:Ve})=>[c("div",YE,[k(W,{"model-value":O.key,"onUpdate:modelValue":Be=>Ve("key",Be),label:"Key",placeholder:"e.g., outputs_animations",size:"sm",monospace:""},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":O.label,"onUpdate:modelValue":Be=>Ve("label",Be),label:"Label",placeholder:"e.g., Animations",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":O.path,"onUpdate:modelValue":Be=>Ve("path",Be),label:"Path",placeholder:"e.g., outputs/animations",prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["modelValue","default-item"])])])):I("",!0)]))],512),[[nt,l.value==="settings"]]),Je(c("div",QE,[x[85]||(x[85]=c("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Rendered Notebooks",-1)),x[86]||(x[86]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Browse and access your rendered Quarto/RMarkdown notebooks. ",-1)),c("div",XE,[k(at(pd),{class:"h-12 w-12 mx-auto mb-4 text-gray-400"}),x[84]||(x[84]=c("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Notebook browser coming soon... ",-1))])],512),[[nt,l.value==="notebooks"]]),Je(c("div",ZE,[c("div",e7,[x[88]||(x[88]=c("div",null,[c("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white"},"Data Catalog"),c("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Browse your project's data sources with copy commands. ")],-1)),k(ze,{variant:"primary",size:"sm",class:"inline-flex items-center gap-2",onClick:ye},{default:R(()=>[k(at(g2),{class:"h-4 w-4"}),x[87]||(x[87]=ie(" Add Data Source ",-1))]),_:1})]),c("div",t7,[k(W,{modelValue:d.value,"onUpdate:modelValue":x[21]||(x[21]=O=>d.value=O),label:"Search data sources",placeholder:"Filter by name, prefix, or file path"},null,8,["modelValue"])]),el.value.length>0?(g(),b("div",s7,[(g(!0),b(ee,null,ke(el.value,O=>(g(),pe(ST,{key:O.fullKey,node:O,"expanded-keys":u.value,"auto-expanded-keys":jt.value,"toggle-group":pb,"search-term":d.value,hierarchical:oi.value,"pending-deletes":C.value,onEdit:fe,onDelete:mn},null,8,["node","expanded-keys","auto-expanded-keys","search-term","hierarchical","pending-deletes"]))),128))])):I("",!0),Wn.value?(g(),b("div",i7,[c("div",n7,[c("div",null,[c("p",o7,z(sl.value)+" data source"+z(sl.value===1?"":"s")+" marked for deletion. ",1),x[89]||(x[89]=c("p",{class:"text-xs text-red-600 dark:text-red-200/80"}," Changes will be applied when you save. ",-1))]),c("div",r7,[k(ze,{variant:"secondary",size:"sm",class:"shadow-none",disabled:V.value,onClick:hb},{default:R(()=>[...x[90]||(x[90]=[ie(" Cancel ",-1)])]),_:1},8,["disabled"]),k(ze,{size:"sm",class:"bg-red-600 text-white hover:bg-red-500 focus-visible:outline-red-600 dark:bg-red-500 dark:hover:bg-red-400",disabled:V.value,onClick:Vt},{default:R(()=>[ie(z(V.value?"Saving":"Save Changes"),1)]),_:1},8,["disabled"])])]),c("ul",l7,[(g(!0),b(ee,null,ke(il.value,O=>(g(),b("li",{key:O},z(O),1))),128))])])):Po.value?(g(),b("div",a7,[c("p",u7,' No data sources match "'+z(d.value)+'". ',1),x[91]||(x[91]=c("p",{class:"mt-2 text-xs text-zinc-500 dark:text-zinc-400"}," Try adjusting your search terms or clearing the filter. ",-1))])):(g(),b(ee,{key:3},[!Wn.value&&(!a.value||Object.keys(a.value||{}).length===0)?(g(),pe(s$,{key:0,title:"No Data Sources",description:"This project doesn't have any data sources defined in its settings",icon:"database"})):I("",!0)],64))],512),[[nt,l.value==="data"]]),k(D$,{mode:p.value?"create":"edit",modelValue:f.value,"onUpdate:modelValue":[x[22]||(x[22]=O=>f.value=O),Ze],entry:h.value,saving:m.value,error:w.value,onSave:At},null,8,["mode","modelValue","entry","saving","error"]),Je(c("div",d7,[x[92]||(x[92]=c("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Connections",-1)),x[93]||(x[93]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Database and storage connections for this project. ",-1)),k(wf,{"database-connections":de.value,"onUpdate:databaseConnections":x[23]||(x[23]=O=>de.value=O),"s3-connections":X.value,"onUpdate:s3Connections":x[24]||(x[24]=O=>X.value=O),"default-database":Z.value,"onUpdate:defaultDatabase":x[25]||(x[25]=O=>Z.value=O),"default-storage-bucket":se.value,"onUpdate:defaultStorageBucket":x[26]||(x[26]=O=>se.value=O)},null,8,["database-connections","s3-connections","default-database","default-storage-bucket"])],512),[[nt,l.value==="connections"]]),Je(c("div",c7,[Ie.value?(g(),b("div",f7,[...x[94]||(x[94]=[c("div",{class:"text-center py-12"},[c("div",{class:"text-sm text-gray-500 dark:text-gray-400"},"Loading packages...")],-1)])])):Qe.value?(g(),b("div",h7,[k(Ps,{type:"error",title:"Error Loading Packages",description:Qe.value},null,8,["description"])])):(g(),b("div",p7,[x[99]||(x[99]=c("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Packages & Dependencies",-1)),x[100]||(x[100]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Configure package management and default packages for this project. ",-1)),c("div",m7,[c("div",g7,[k(Ue,{modelValue:$e.value.use_renv,"onUpdate:modelValue":x[27]||(x[27]=O=>$e.value.use_renv=O),label:"Enable renv",description:"Use renv for package version management and reproducibility"},null,8,["modelValue"]),c("div",v7,[x[98]||(x[98]=c("p",{class:"text-xs text-gray-600 dark:text-gray-400 mb-4"},"Use this list to preseed notebooks with your preferred helpers.",-1)),$e.value.default_packages&&$e.value.default_packages.length?(g(),b("div",y7,[(g(!0),b(ee,null,ke($e.value.default_packages,(O,Se)=>(g(),b("div",{key:`pkg-${Se}`,class:"rounded-md border border-gray-200 p-4 dark:border-gray-700"},[c("div",b7,[c("div",k7,[O.source==="cran"||O.source==="bioconductor"?(g(),pe(bf,{key:0,modelValue:O.name,"onUpdate:modelValue":Ve=>O.name=Ve,source:O.source,label:"Package",placeholder:O.source==="cran"?"Search CRAN...":"Search Bioconductor...",onSelect:Ve=>O.name=Ve.name},null,8,["modelValue","onUpdate:modelValue","source","placeholder","onSelect"])):(g(),pe(W,{key:1,modelValue:O.name,"onUpdate:modelValue":Ve=>O.name=Ve,label:"Package",placeholder:"user/repo"},null,8,["modelValue","onUpdate:modelValue"])),k(Ht,{modelValue:O.source,"onUpdate:modelValue":Ve=>O.source=Ve,label:"Source"},{default:R(()=>[...x[95]||(x[95]=[c("option",{value:"cran"},"CRAN",-1),c("option",{value:"github"},"GitHub",-1),c("option",{value:"bioconductor"},"Bioconductor",-1)])]),_:1},8,["modelValue","onUpdate:modelValue"])]),c("div",x7,[k(Ue,{modelValue:O.auto_attach,"onUpdate:modelValue":Ve=>O.auto_attach=Ve,label:"Auto-Attach",description:"Call library() when scaffold() runs."},null,8,["modelValue","onUpdate:modelValue"]),k(ze,{size:"sm",variant:"secondary",onClick:Ve=>wb(Se)},{default:R(()=>[...x[96]||(x[96]=[ie("Remove",-1)])]),_:1},8,["onClick"])])])]))),128))])):(g(),b("p",w7,"No packages configured. Add packages to include tidyverse helpers or internal utilities automatically.")),c("div",_7,[k(ze,{size:"sm",variant:"secondary",onClick:yb},{default:R(()=>[...x[97]||(x[97]=[ie("Add Package",-1)])]),_:1})])])])])]))],512),[[nt,l.value==="packages"]]),Je(c("div",S7,[ve.value?(g(),b("div",C7,[...x[101]||(x[101]=[c("div",{class:"text-center py-12 text-sm text-gray-500 dark:text-gray-400"},"Loading AI settings...",-1)])])):je.value?(g(),b("div",A7,[k(Ps,{type:"error",title:"Error Loading AI Settings",description:je.value},null,8,["description"])])):(g(),b("div",V7,[x[109]||(x[109]=c("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"AI Assistants",-1)),x[110]||(x[110]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Framework maintains context files for selected assistants and keeps them in sync before commits. ",-1)),c("div",M7,[k(Ue,{modelValue:he.value.enabled,"onUpdate:modelValue":x[28]||(x[28]=O=>he.value.enabled=O),label:"Enable AI Support",description:"Generate and sync assistant-specific context files."},null,8,["modelValue"]),he.value.enabled?(g(),b("div",D7,[c("div",null,[x[103]||(x[103]=c("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Canonical context file",-1)),x[104]||(x[104]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," This file is the source of truth; other instructions files are synced to it when AI hooks run. ",-1)),k(Ht,{modelValue:he.value.canonical_file,"onUpdate:modelValue":x[29]||(x[29]=O=>he.value.canonical_file=O),label:"Canonical Context File",onChange:x[30]||(x[30]=O=>Lf(O?.target?.value))},{default:R(()=>[...x[102]||(x[102]=[c("option",{value:"AGENTS.md"},"AGENTS.md (multi-agent orchestrator)",-1),c("option",{value:"CLAUDE.md"},"CLAUDE.md",-1),c("option",{value:".github/copilot-instructions.md"},".github/copilot-instructions.md",-1)])]),_:1},8,["modelValue"])]),c("div",null,[x[105]||(x[105]=c("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Assistants",-1)),x[106]||(x[106]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Choose which assistants receive context updates. ",-1)),c("div",$7,[(g(),b(ee,null,ke(xe,O=>k(gi,{key:O.id,id:`project-ai-${O.id}`,"model-value":he.value.assistants.includes(O.id),"onUpdate:modelValue":Se=>Sb(O.id,Se),description:O.description},{default:R(()=>[ie(z(O.label),1)]),_:2},1032,["id","model-value","onUpdate:modelValue","description"])),64))])]),c("div",null,[x[107]||(x[107]=c("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Canonical instructions",-1)),x[108]||(x[108]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Edit the canonical file directly. Framework mirrors this content to other assistant files. ",-1)),Fe.value.exists?I("",!0):(g(),pe(Ps,{key:0,type:"info",title:"New canonical file",description:`Saving copies the current instructions into ${he.value.canonical_file||"CLAUDE.md"}. The original file stays on disk; if AI sync hooks are enabled they mirror everything from the new canonical file.`,class:"mb-4"},null,8,["description"])),k(Yi,{modelValue:he.value.canonical_content,"onUpdate:modelValue":x[31]||(x[31]=O=>he.value.canonical_content=O),language:"markdown","min-height":"400px",disabled:_e.value},null,8,["modelValue","disabled"]),_e.value?(g(),b("p",T7," Loading "+z(he.value.canonical_file)+" ",1)):I("",!0)])])):I("",!0)])]))],512),[[nt,l.value==="ai"]]),Je(c("div",E7,[Y.value?(g(),b("div",O7,[...x[111]||(x[111]=[c("div",{class:"text-center py-12 text-sm text-gray-500 dark:text-gray-400"},"Loading git settings...",-1)])])):te.value?(g(),b("div",P7,[k(Ps,{type:"error",title:"Error Loading Git Settings",description:te.value},null,8,["description"])])):(g(),b("div",L7,[x[113]||(x[113]=c("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Git & Hooks",-1)),x[114]||(x[114]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Configure repository initialization, commit identity, git hooks, and security scanning. ",-1)),k(kf,{modelValue:Of.value,"onUpdate:modelValue":x[32]||(x[32]=O=>Of.value=O)},{note:R(()=>[...x[112]||(x[112]=[ie(" Project-specific .gitignore templates can be customized in Project Defaults. ",-1)])]),_:1},8,["modelValue"])]))],512),[[nt,l.value==="git"]]),Je(c("div",j7,[H.value?(g(),b("div",R7,[...x[115]||(x[115]=[c("div",{class:"text-center py-12 text-zinc-500 dark:text-zinc-400"}," Loading settings... ",-1)])])):j.value?(g(),b("div",B7,[k(Ps,{type:"error",title:"Error Loading Settings",description:j.value},null,8,["description"])])):(g(),b("div",I7,[x[116]||(x[116]=c("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Scaffold Behavior",-1)),x[117]||(x[117]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"},[ie(" Automatic actions when "),c("code",{class:"px-1.5 py-0.5 bg-gray-200 dark:bg-gray-700 rounded text-xs"},"scaffold()"),ie(" runs to initialize your project environment. ")],-1)),c("div",U7,[B.value.scaffold?(g(),pe(xf,{key:0,modelValue:B.value.scaffold,"onUpdate:modelValue":x[33]||(x[33]=O=>B.value.scaffold=O),flush:""},null,8,["modelValue"])):I("",!0)])]))],512),[[nt,l.value==="scaffold"]]),Je(c("div",N7,[x[118]||(x[118]=c("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Environment Variables",-1)),x[119]||(x[119]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Manage environment variables for this project (.env file). ",-1)),k(KT,{loading:q.value,error:re.value,groups:$.value,variables:we.value,"onUpdate:variables":x[34]||(x[34]=O=>we.value=O),"raw-content":L.value,"onUpdate:rawContent":x[35]||(x[35]=O=>L.value=O),"view-mode":oe.value,"onUpdate:viewMode":x[36]||(x[36]=O=>oe.value=O),"regroup-on-save":Ce.value,"onUpdate:regroupOnSave":x[37]||(x[37]=O=>Ce.value=O),onSave:ru},null,8,["loading","error","groups","variables","raw-content","view-mode","regroup-on-save"])],512),[[nt,l.value==="env"]])])])):I("",!0),k(On,{modelValue:S.value,"onUpdate:modelValue":x[43]||(x[43]=O=>S.value=O),title:"Add Package",size:"md",variant:"left"},{actions:R(()=>[k(ze,{variant:"primary",onClick:xb,disabled:!be.value.name.trim()},{default:R(()=>[...x[125]||(x[125]=[ie(" Add Package ",-1)])]),_:1},8,["disabled"]),k(ze,{variant:"secondary",onClick:x[42]||(x[42]=O=>S.value=!1)},{default:R(()=>[...x[126]||(x[126]=[ie(" Cancel ",-1)])]),_:1})]),default:R(()=>[c("div",z7,[c("div",null,[x[120]||(x[120]=c("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Search CRAN Packages ",-1)),Je(c("input",{"onUpdate:modelValue":x[38]||(x[38]=O=>v.value=O),onKeydown:kb,type:"text",placeholder:"Type to search CRAN...",class:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 px-3 py-2 text-sm text-gray-900 dark:text-gray-100 font-mono focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500"},null,544),[[mo,v.value]])]),M.value.length>0?(g(),b("div",F7,[(g(!0),b(ee,null,ke(M.value,(O,Se)=>(g(),b("button",{key:O.name,onClick:Ve=>Df(O),onMouseenter:Ve=>G.value=Se,class:Ee(["w-full px-3 py-2 text-left border-b border-gray-200 dark:border-gray-700 last:border-b-0 transition",G.value===Se?"bg-sky-50 dark:bg-sky-900/20":"hover:bg-gray-50 dark:hover:bg-gray-800"])},[c("div",W7,[c("div",q7,[c("div",K7,z(O.name),1),O.title?(g(),b("div",G7,z(O.title),1)):I("",!0),O.author?(g(),b("div",J7,z(O.author),1)):I("",!0)]),c("div",Y7," v"+z(O.version),1)])],42,H7))),128))])):I("",!0),c("div",null,[x[121]||(x[121]=c("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Package Name ",-1)),Je(c("input",{"onUpdate:modelValue":x[39]||(x[39]=O=>be.value.name=O),type:"text",placeholder:"dplyr",class:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 px-3 py-2 text-sm text-gray-900 dark:text-gray-100 font-mono focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500"},null,512),[[mo,be.value.name]]),be.value.source==="github"?(g(),b("p",Q7," GitHub: user/repo (e.g., tidyverse/dplyr) ")):I("",!0),be.value.source==="bioc"?(g(),b("p",X7," Bioconductor: name only (e.g., DESeq2) ")):I("",!0)]),c("div",null,[x[124]||(x[124]=c("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Source ",-1)),c("div",Z7,[Je(c("select",{"onUpdate:modelValue":x[40]||(x[40]=O=>be.value.source=O),class:"w-full appearance-none rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 pl-3 pr-10 py-2 text-sm text-gray-900 dark:text-gray-100 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500"},[...x[122]||(x[122]=[c("option",{value:"cran"},"CRAN",-1),c("option",{value:"github"},"GitHub",-1),c("option",{value:"bioc"},"Bioconductor",-1)])],512),[[Jg,be.value.source]]),x[123]||(x[123]=c("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},[c("svg",{class:"h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),c("p",eO,[be.value.source==="cran"?(g(),b(ee,{key:0},[ie("CRAN: name only (e.g., dplyr)")],64)):be.value.source==="github"?(g(),b(ee,{key:1},[ie("GitHub: user/repo (e.g., tidyverse/dplyr)")],64)):be.value.source==="bioc"?(g(),b(ee,{key:2},[ie("Bioconductor: name only (e.g., DESeq2)")],64)):I("",!0)])]),c("div",null,[k(Ue,{modelValue:be.value.auto_attach,"onUpdate:modelValue":x[41]||(x[41]=O=>be.value.auto_attach=O),label:"Auto-attach on scaffold()"},null,8,["modelValue"])])])]),_:1},8,["modelValue"])]))}},sO={class:"rounded-lg bg-gray-50 p-6 space-y-6 dark:bg-gray-800/50"},iO={key:0,class:"space-y-2"},nO={key:0,class:"text-lg font-semibold text-gray-900 dark:text-white"},oO={key:1,class:"text-sm text-gray-600 dark:text-gray-400"},rO={class:"space-y-6"},lO={key:1,class:"flex justify-end pt-4 border-t border-gray-200 dark:border-gray-700"},yt={__name:"SettingsPanel",props:{title:{type:String,default:""},description:{type:String,default:""}},setup(t){return(e,s)=>(g(),b("section",sO,[t.title||t.description?(g(),b("header",iO,[t.title?(g(),b("h2",nO,z(t.title),1)):I("",!0),t.description?(g(),b("p",oO,z(t.description),1)):I("",!0)])):I("",!0),c("div",rO,[vt(e.$slots,"default")]),e.$slots.actions?(g(),b("div",lO,[vt(e.$slots,"actions")])):I("",!0)]))}},aO={class:"space-y-3"},uO={key:0,class:"space-y-1"},dO={key:0,class:"text-sm font-semibold text-gray-900 dark:text-white"},cO={key:1,class:"text-xs text-gray-600 dark:text-gray-400"},fO={class:"space-y-3"},gs={__name:"SettingsBlock",props:{title:{type:String,default:""},description:{type:String,default:""}},setup(t){return(e,s)=>(g(),b("div",aO,[t.title||t.description?(g(),b("div",uO,[t.title?(g(),b("h3",dO,z(t.title),1)):I("",!0),t.description?(g(),b("p",cO,z(t.description),1)):I("",!0)])):I("",!0),c("div",fO,[vt(e.$slots,"default")])]))}},hO={class:"flex min-h-screen"},pO={class:"w-64 shrink-0 border-r border-gray-200 p-6 dark:border-gray-800"},mO={class:"space-y-1"},gO=["href","onClick"],vO=["fill","viewBox","stroke"],yO=["stroke-linecap","stroke-linejoin","stroke-width","fill","d"],bO={key:1,class:"ml-4 mt-2 space-y-0.5 border-l border-gray-200 pl-3 dark:border-gray-700"},kO=["href","onClick"],xO={key:2,class:"ml-4 mt-2 space-y-0.5 border-l border-gray-200 pl-3 dark:border-gray-700"},wO=["href","onClick"],_O={class:"rounded-md bg-gray-900 p-4 text-xs text-gray-200"},SO={class:"mt-4 flex justify-end"},CO={class:"mt-6 px-3"},AO={key:0,class:"flex-1 flex items-center justify-center"},VO={class:"flex-1 p-10 pb-24"},MO={class:"mt-8 space-y-10"},DO={id:"overview"},$O={class:"space-y-3"},TO={key:0,class:"text-gray-600 dark:text-gray-400"},EO={key:1,class:"text-gray-400 dark:text-gray-500 mx-1"},OO={key:2},PO={key:1,class:"text-gray-600 dark:text-gray-400"},LO={key:0},jO={key:1,class:"text-gray-600 dark:text-gray-400"},RO={key:0},BO={key:1,class:"text-gray-600 dark:text-gray-400"},IO={key:0,class:"text-green-600 dark:text-green-400"},UO={key:1,class:"text-gray-600 dark:text-gray-400"},NO={key:0,class:"text-green-600 dark:text-green-400"},zO={key:1,class:"text-gray-600 dark:text-gray-400"},FO={key:0},HO={key:1,class:"text-gray-600 dark:text-gray-400"},WO={id:"connections-defaults"},qO={id:"basics"},KO={class:"space-y-5"},GO={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},JO={class:"space-y-5"},YO={id:"structure",class:"space-y-8"},QO={key:0,class:"space-y-6"},XO={class:"space-y-3"},ZO=["onClick"],eP={class:"flex items-start gap-3"},tP={class:"font-semibold text-gray-900 dark:text-white"},sP={class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},iP={key:1,class:"space-y-6"},nP={key:0,class:"space-y-6"},oP={key:0},rP={class:"space-y-5"},lP=["value"],aP={class:"flex flex-wrap items-center justify-between gap-3"},uP={class:"flex flex-wrap gap-2 text-xs font-medium text-gray-600 dark:text-gray-400"},dP=["id"],cP={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},fP={class:"grid grid-cols-2 gap-3"},hP=["id"],pP={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},mP={class:"grid grid-cols-2 gap-3"},gP=["id"],vP={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},yP={class:"grid grid-cols-2 gap-3"},bP=["id"],kP={key:1,class:"space-y-6"},xP={key:0},wP={class:"space-y-5"},_P=["value"],SP={class:"flex flex-wrap items-center justify-between gap-3"},CP={class:"flex flex-wrap gap-2 text-xs font-medium text-gray-600 dark:text-gray-400"},AP=["id"],VP={class:"space-y-3"},MP={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},DP={class:"grid grid-cols-2 gap-3"},$P=["id"],TP={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},EP={class:"grid gap-4 sm:grid-cols-2"},OP={class:"space-y-3"},PP={class:"space-y-3"},LP=["id"],jP={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},RP={class:"grid gap-4 sm:grid-cols-2"},BP={class:"space-y-3"},IP={class:"space-y-3"},UP=["id"],NP={class:"space-y-3"},zP={key:2,class:"space-y-6"},FP={key:0},HP={class:"space-y-5"},WP=["value"],qP={class:"flex flex-wrap items-center justify-between gap-3"},KP={class:"flex flex-wrap gap-2 text-xs font-medium text-gray-600 dark:text-gray-400"},GP=["id"],JP={class:"space-y-3"},YP=["id"],QP={class:"space-y-4"},XP={class:"space-y-2"},ZP={class:"space-y-2"},eL={class:"space-y-2"},tL={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},sL={class:"grid grid-cols-2 gap-3"},iL={key:3,class:"space-y-6"},nL={key:0},oL={class:"space-y-5"},rL=["value"],lL={class:"flex flex-wrap items-center justify-between gap-3"},aL={class:"flex flex-wrap gap-2 text-xs font-medium text-gray-600 dark:text-gray-400"},uL=["id"],dL={class:"space-y-3"},cL=["id"],fL={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},hL={class:"grid grid-cols-2 gap-3"},pL=["id"],mL={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-2"},gL={class:"flex justify-end mt-3"},vL={id:"templates",class:"space-y-8"},yL={id:"templates-notebook"},bL={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-2"},kL={class:"flex justify-end mt-3"},xL={id:"templates-script"},wL={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-2"},_L={class:"flex justify-end mt-3"},SL={id:"templates-presentation"},CL={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-2"},AL={class:"flex justify-end mt-3"},VL={id:"ai"},ML={class:"space-y-2"},DL={class:"flex justify-end mt-3"},$L={id:"git"},TL={id:"scaffold"},EL={id:"packages"},OL={key:0,class:"space-y-3"},PL={class:"flex flex-col gap-3"},LL={class:"grid gap-3 grid-cols-[1fr_160px]"},jL={class:"flex items-center justify-between"},RL={key:1,class:"text-xs text-gray-500 dark:text-gray-400 mb-4"},BL={class:"mt-4"},IL={class:"text-sm text-gray-600 dark:text-gray-300 mb-4"},UL={class:"flex gap-3 justify-end"},NL={class:"text-sm text-gray-600 dark:text-gray-300"},zL={class:"flex gap-3 justify-end"},Yu="overview",$m="project",FL="Settings",HL="Manage defaults shared across new projects.",WL={__name:"SettingsView",setup(t){const e=qa(),s=Ha(),i=Do(),n=[{id:"overview",label:"Overview",slug:"overview",icon:Wa},{id:"basics",label:"Basics",slug:"basics",icon:Ec},{id:"structure",label:"Project Structure",slug:"project-structure",icon:aa},{id:"packages",label:"Packages",slug:"packages-dependencies",icon:Oc},{id:"ai",label:"AI Assistants",slug:"ai-assistants",svgIcon:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"},{id:"git",label:"Git & Hooks",slug:"git-hooks",svgIcon:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"},{id:"connections-defaults",label:"Connections",slug:"connections",icon:Pc},{id:"scaffold",label:"Scaffold Behavior",slug:"scaffold-behavior",svgIcon:"M256 64L576 64L576 576L64 576L64 192L256 192L256 64zM256 224L96 224L96 544L256 544L256 224zM288 544L544 544L544 96L288 96L288 544zM440 152L488 152L488 200L440 200L440 152zM392 152L392 200L344 200L344 152L392 152zM440 248L488 248L488 296L440 296L440 248zM392 248L392 296L344 296L344 248L392 248zM152 280L200 280L200 328L152 328L152 280zM392 344L392 392L344 392L344 344L392 344zM152 376L200 376L200 424L152 424L152 376zM488 344L488 392L440 392L440 344L488 344z",svgViewBox:"0 0 640 640",svgFill:"currentColor",svgStroke:"none",svgStrokeWidth:0,svgPathFill:"currentColor"},{id:"templates",label:"Templates",slug:"templates",icon:pd}],o=Object.fromEntries(n.map(({id:N,slug:_})=>[N,_])),r=Object.fromEntries(n.map(({id:N,slug:_})=>[_,N])),l={project:{label:"Standard Project Structure",description:"General-purpose analysis project with notebooks, scripts, and shared outputs.",directories:{functions:"R/functions",notebooks:"notebooks",scripts:"scripts",inputs_raw:"inputs/raw",inputs_intermediate:"inputs/intermediate",inputs_final:"inputs/final",reference:"reference",outputs_notebooks:"outputs/notebooks",outputs_tables:"outputs/tables",outputs_figures:"outputs/figures",outputs_models:"outputs/models",outputs_reports:"outputs/reports",cache:"outputs/cache",scratch:"scratch"},quarto:{render_dir:"outputs/notebooks"},notebook_template:"notebook",extra_directories:[]},project_sensitive:{label:"Privacy Sensitive Project Structure",description:"Projects handling PHI/PII with dedicated private/public data flows.",directories:{functions:"R/functions",notebooks:"notebooks",scripts:"scripts",inputs_private_raw:"inputs/private/raw",inputs_private_intermediate:"inputs/private/intermediate",inputs_private_final:"inputs/private/final",inputs_public_raw:"inputs/public/raw",inputs_public_intermediate:"inputs/public/intermediate",inputs_public_final:"inputs/public/final",outputs_private_tables:"outputs/private/tables",outputs_private_figures:"outputs/private/figures",outputs_private_models:"outputs/private/models",outputs_private_docs:"outputs/private/docs",outputs_private_data_final:"outputs/private/data_final",outputs_public_tables:"outputs/public/tables",outputs_public_figures:"outputs/public/figures",outputs_public_models:"outputs/public/models",outputs_public_docs:"outputs/public/docs",outputs_public_data_final:"outputs/public/data_final",cache:"outputs/private/cache",scratch:"scratch"},quarto:{render_dir:"outputs/public/docs"},notebook_template:"notebook",extra_directories:[]},presentation:{label:"Presentation Structure",description:"Single talk or slide deck with minimal analysis scaffolding.",directories:{presentation_source:"presentation.qmd",rendered_slides:"."},quarto:{render_dir:"."},notebook_template:"notebook",extra_directories:[]},course:{label:"Course Structure",description:"Courses with modules, assignments, and lecture materials.",directories:{data:"data",slides:"slides",assignments:"assignments",course_docs:"course_docs",readings:"readings",notebooks:"modules"},quarto:{render_dir:"course_docs"},notebook_template:"notebook",extra_directories:[]}},a=ae(JSON.parse(JSON.stringify(l))),d={project:"project",project_sensitive:"sensitive-project",presentation:"presentation",course:"course"},u=Object.fromEntries(Object.entries(d).map(([N,_])=>[_,N])),f={project:"Tune the standard analysis layoutfunctions, notebooks, inputs, and outputs live here by default.",project_sensitive:"Private and public inputs stay separate so sensitive data never leaves restricted folders.",presentation:"Control where your presentation source lives and where rendered slides are written.",course:"Adjust the folders used for slides, assignments, readings, and course documentation."},h=N=>String(N).replace(/_/g," ").replace(/\b\w/g,_=>_.toUpperCase()),m=ae(null),w=[{key:"functions",label:"Functions",hint:"R files here are sourced by scaffold(), so helper functions are available in every project session."},{key:"notebooks",label:"Notebooks",hint:"Where Quarto or R Markdown analysis notebooks live."},{key:"scripts",label:"Scripts",hint:"Reusable R scripts, job runners, or automation tasks."},{key:"reference",label:"Reference materials",hint:"Codebooks, documentation, and other background resources."}],p=[{key:"inputs_raw",label:"Raw data",hint:"Read-only exports from source systems."},{key:"inputs_intermediate",label:"Intermediate data",hint:"Data after light cleaning or pre-processing steps."},{key:"inputs_final",label:"Analysis-ready data",hint:"Final inputs ready for modeling or reporting."}],C=[{key:"outputs_notebooks",label:"Rendered notebooks",hint:"Compiled Quarto/R Markdown notebooks."},{key:"outputs_tables",label:"Tables",hint:"Publishable tables ready for reports or manuscripts."},{key:"outputs_figures",label:"Figures",hint:"Final plots and graphics."},{key:"outputs_models",label:"Models",hint:"Serialized models or model summaries."},{key:"outputs_reports",label:"Reports",hint:"Final reports and deliverables ready for publication."}],V=[{key:"cache",label:"Cache",hint:"Temporary artifacts (gitignored)."},{key:"scratch",label:"Scratch",hint:"Short-lived explorations (gitignored)."}],U=[{privateKey:"inputs_private_raw",publicKey:"inputs_public_raw",label:"Raw data",privateLabel:"Raw data (private)",publicLabel:"Raw data (public)"},{privateKey:"inputs_private_intermediate",publicKey:"inputs_public_intermediate",label:"Intermediate data",privateLabel:"Intermediate data (private)",publicLabel:"Intermediate data (public)"},{privateKey:"inputs_private_final",publicKey:"inputs_public_final",label:"Analysis-ready data",privateLabel:"Analysis-ready data (private)",publicLabel:"Analysis-ready data (public)"}],B=[{privateKey:"outputs_private_tables",publicKey:"outputs_public_tables",label:"Tables",privateLabel:"Tables (private)",publicLabel:"Tables (public)"},{privateKey:"outputs_private_figures",publicKey:"outputs_public_figures",label:"Figures",privateLabel:"Figures (private)",publicLabel:"Figures (public)"},{privateKey:"outputs_private_models",publicKey:"outputs_public_models",label:"Models",privateLabel:"Models (private)",publicLabel:"Models (public)"},{privateKey:"outputs_private_docs",publicKey:"outputs_public_docs",label:"Docs & reports",privateLabel:"Docs (private)",publicLabel:"Docs (public)"},{privateKey:"outputs_private_data_final",publicKey:"outputs_public_data_final",label:"Final data",privateLabel:"Final data (private)",publicLabel:"Final data (public)"}],H=(N,_)=>m.value?.project_types?.[N]?.directories?.[_]||{},j=(N,_)=>_.map(y=>{const K=H(N,y.key);return{key:y.key,label:K.label||y.label,hint:K.hint||y.hint||""}}),T=ne(()=>j("project",w)),A=ne(()=>j("project",p)),Y=ne(()=>j("project",C)),te=ne(()=>j("project",V)),me=N=>N.map(_=>{const y=H("project_sensitive",_.privateKey),K=H("project_sensitive",_.publicKey);return{..._,privateLabel:y.label||_.privateLabel,publicLabel:K.label||_.publicLabel}}),le=ne(()=>me(U)),F=ne(()=>me(B)),ge=ne(()=>{const N=D.value;return!N||!m.value?.project_types?.[N]?.settings?[]:m.value.project_types[N].settings}),ce={include_inputs:"inputs",include_scripts:"scripts",include_functions:"R/functions"},de=ne(()=>{const N=m.value?.project_types?.presentation?.optional_toggles||{};return{inputs:N.include_inputs?.default_path||ce.include_inputs,scripts:N.include_scripts?.default_path||ce.include_scripts,functions:N.include_functions?.default_path||ce.include_functions}}),X={"CLAUDE.md":"ai_claude","AGENTS.md":"ai_agents",".github/copilot-instructions.md":"ai_copilot"},Z=[{id:"claude",label:"Claude Code",description:"Anthropic's IDE-focused assistant."},{id:"copilot",label:"GitHub Copilot",description:"Complements VS Code and JetBrains editors."},{id:"agents",label:"Multi-Agent (OpenAI Codex, Cursor, etc.)",description:"Shared instructions for multi-model orchestrators."}],se=ae(Yu),Pe=ae(!1),P=ae({projects_root:"",project_types:JSON.parse(JSON.stringify(a.value)),author:{name:"",email:"",affiliation:""},defaults:{project_type:"project",notebook_format:"quarto",ide:"vscode",ide_support_vscode:!1,use_git:!0,use_renv:!1,seed:"",seed_on_scaffold:!1,ai_support:!0,ai_assistants:["claude"],ai_canonical_file:"CLAUDE.md",directories:JSON.parse(JSON.stringify(a.value.project.directories)),git_hooks:{ai_sync:!1,data_security:!1,check_sensitive_dirs:!1},packages:{use_renv:!1,default_packages:[{name:"dplyr",source:"cran",auto_attach:!0},{name:"ggplot2",source:"cran",auto_attach:!0}]},env:{raw:""}},git:{user_name:"",user_email:""},privacy:{secret_scan:!1,gitignore_template:"gitignore"}}),$e=qs({includeInputs:!1,includeScripts:!1,includeFunctions:!1}),Ie=ae(!1),Qe=qs({claude:!0,agents:!1,copilot:!1}),J=qs({open:!1,name:"",title:"",description:"",contents:"",loading:!1}),S=ae(!1),v=ae([]),M=ae([]),Q=ae(null),G=ae(null),be=qs({open:!1,projectTypeKey:null,projectTypeName:""}),we=qs({notebook:{loading:!1,contents:""},script:{loading:!1,contents:""},presentation:{loading:!1,contents:""},canonical:{loading:!1,contents:""},gitignore_project:{loading:!1,contents:""},gitignore_project_sensitive:{loading:!1,contents:""},gitignore_course:{loading:!1,contents:""},gitignore_presentation:{loading:!1,contents:""}}),$=ne(()=>Object.entries(P.value.project_types||{})),L=ne(()=>$.value.map(([N,_])=>({key:N,label:(_.label||h(N)).replace(/ Structure$/i,""),slug:d[N]||N}))),q=[{id:"templates-notebook",label:"Notebook"},{id:"templates-script",label:"Script"},{id:"templates-presentation",label:"Presentation"}],re=ne(()=>"# Connections section temporarily disabled for debugging"),D=ne(()=>{const N=i.params.subsection;return N?u[N]||$m:null}),oe=ne(()=>{const N=D.value;return N&&P.value.project_types?.[N]||null}),Ce={overview:{title:"Overview",description:"Overview of your Framework global settings and preferences."},"connections-defaults":{title:"Connections",description:"Database and storage connections that every new project will inherit."},basics:{title:"Basics",description:"Essential settings for new projects."},author:{title:"Author Information",description:"Defaults that populate README files and notebook headers when scaffold() runs."},workflow:{title:"Editor & Workflow",description:"Control how Framework scaffolds projects in your preferred tools."},structure:{title:"Project Structure Defaults",description:"Choose a project type to configure its directory structure and default settings."},templates:{title:"Templates",description:"Edit the starter templates Framework uses for notebooks, scripts, and presentations."},ai:{title:"AI Assistants",description:"Manage assistant support, canonical context files, and sync hooks."},git:{title:"Git & Hooks",description:"Configure repository initialization, commit identity, git hooks, and security scanning."},scaffold:{title:"Scaffold Behavior",description:"Automatic actions Framework performs when scaffold() runs."},packages:{title:"Packages & Dependencies",description:"Define dependency defaults and auto-attach behavior for new projects."},"env-defaults":{title:".env Defaults",description:"Template applied to every new project so core connections work immediately."}},xe=ne(()=>Ce[se.value]||{title:FL,description:HL}),he=ne(()=>se.value==="structure"&&oe.value?oe.value.label||h(D.value):xe.value.title),ve=ne(()=>se.value==="structure"&&oe.value&&(oe.value.description||f[D.value])||xe.value.description);ne(()=>P.value.privacy.gitignore_template||"gitignore"),ne(()=>{const N=new Set,_=P.value.project_types||{},y=_.project_sensitive?.directories||{};for(const fe of Object.values(y))typeof fe=="string"&&fe.trim()&&fe.includes("private")&&N.add(fe.replace(/^\/+/,""));const K=_.project?.directories||{};return["cache","scratch"].forEach(fe=>{const ye=K[fe];typeof ye=="string"&&ye.trim()&&N.add(ye.replace(/^\/+/,""))}),Array.from(N).sort()});const je=ne(()=>X[P.value.defaults.ai_canonical_file]||"ai_claude"),Ae=(N,_)=>{const y={section:N||void 0};return _&&(y.subsection=_),s.resolve({name:"settings",params:y}).href},Re=(N,_)=>{const y={};N&&(y.section=N),_&&(y.subsection=_);const K=i.params.section||void 0,fe=i.params.subsection||void 0,ye=y.section||void 0,Ze=y.subsection||void 0;return K===ye&&fe===Ze?Promise.resolve():s.replace({name:"settings",params:y}).catch(()=>{})};We(()=>i.params.section,N=>{if(!N){Re(o[Yu],void 0);return}const _=r[N]||Yu;if(se.value=_,!r[N]){Re(o[_],void 0);return}},{immediate:!0});const _e=(N,_="")=>Array.isArray(N)?N.length>0?_e(N[0],_):_:N??_,Fe=(N,_=!1)=>{const y=_e(N,_);return typeof y=="boolean"?y:typeof y=="string"?["true","1","yes"].includes(y.toLowerCase()):!!y},Ge=N=>Array.isArray(N)?N.flatMap(_=>Array.isArray(_)?_:[_]).filter(Boolean):[],Xe=(N={},_={})=>{const y={..._};for(const[K,fe]of Object.entries(N||{})){const ye=_e(fe,null);ye===null||ye===""?delete y[K]:y[K]=ye}return y},_t=(N,_)=>{const y=a.value[N]||{directories:{},quarto:{},extra_directories:[]};return{label:_e(_?.label,y.label||h(N)),description:_e(_?.description,y.description||""),ggplot_theme:_e(_?.ggplot_theme,"theme_minimal"),set_theme_on_scaffold:Fe(_?.set_theme_on_scaffold,!0),directories:Xe(_?.directories,y.directories),quarto:{render_dir:_e(_?.quarto?.render_dir,y.quarto?.render_dir||".")},notebook_template:_e(_?.notebook_template,y.notebook_template||"notebook"),extra_directories:Array.isArray(_?.extra_directories)?_.extra_directories:y.extra_directories||[]}},$t=N=>{if(!N||!N.project_types)return;const _={};for(const[y,K]of Object.entries(N.project_types)){const fe=l[y]||{},ye={};for(const[Ze,At]of Object.entries(K.directories||{})){const Ss=fe.directories?.[Ze]||"";ye[Ze]=_e(At?.default,Ss)}_[y]={label:_e(K.label,fe.label||h(y)),description:_e(K.description,fe.description||""),directories:ye,quarto:{render_dir:_e(K.quarto?.render_dir?.default,fe.quarto?.render_dir||".")},notebook_template:_e(K.notebook_template?.default,fe.notebook_template||"notebook"),optional_toggles:K.optional_toggles||{}}}for(const[y,K]of Object.entries(l))_[y]||(_[y]=JSON.parse(JSON.stringify(K)));a.value=_},Pt=(N,_,y)=>{if(!P.value.project_types?.presentation)return;const K=P.value.project_types.presentation.directories||(P.value.project_types.presentation.directories={});_?(!K[N]||K[N]==="")&&(K[N]=y):Object.prototype.hasOwnProperty.call(K,N)&&delete K[N]},ot=async(N,_=N)=>{if(we[_]){we[_].loading=!0;try{const y=await fetch(`/api/templates/${N}`);if(!y.ok)throw new Error("Request failed");const K=await y.json();we[_].contents=K.contents||""}catch{e.error("Template Error","Unable to load template contents.")}finally{we[_].loading=!1}}},_s=async(N,_=N)=>{if(we[_])try{if(!(await fetch(`/api/templates/${N}`,{method:"DELETE"})).ok)throw new Error("Request failed");await ot(N,_),e.success("Template Reset","Restored the packaged default template.")}catch{e.error("Reset Failed","Unable to restore the default template.")}},pn=()=>{_s(je.value,"canonical")};We(Qe,N=>{if(Ie.value){console.log("[watch:aiAssistants] Skipped - loading");return}console.log("[watch:aiAssistants] Triggered",N);const _=[];N.claude&&_.push("claude"),N.copilot&&_.push("copilot"),N.agents&&_.push("agents"),P.value.defaults.ai_assistants=_},{deep:!0}),We(()=>P.value.defaults.ai_canonical_file,async()=>{Ie.value||await ot(je.value,"canonical")}),We(()=>P.value.defaults.git_hooks.data_security,N=>{Ie.value||P.value.privacy.secret_scan!==N&&(P.value.privacy.secret_scan=N)}),We(()=>P.value.privacy.secret_scan,N=>{Ie.value||P.value.defaults.git_hooks.data_security!==N&&(P.value.defaults.git_hooks.data_security=N)}),We(()=>$e.includeInputs,N=>{Ie.value||Pt("inputs",N,de.value.inputs)}),We(()=>$e.includeScripts,N=>{Ie.value||Pt("scripts",N,de.value.scripts)}),We(()=>$e.includeFunctions,N=>{Ie.value||Pt("functions",N,de.value.functions)});const Lt=N=>{(N.metaKey||N.ctrlKey)&&N.key==="s"&&(N.preventDefault(),ol())},ct=(N,_)=>{const y=P.value.project_types?.[N]?.directories;return!!y&&Object.prototype.hasOwnProperty.call(y,_)},ii=N=>{a.value[N]&&(be.projectTypeKey=N,be.projectTypeName=P.value.project_types[N]?.label||h(N),be.open=!0)},_i=()=>{const N=be.projectTypeKey;a.value[N]&&(P.value.project_types[N]=JSON.parse(JSON.stringify(a.value[N])),N==="presentation"&&($e.includeInputs=!1,$e.includeScripts=!1,$e.includeFunctions=!1),be.open=!1,e.success("Reset Complete",`${be.projectTypeName} has been reset to defaults`))},Xr=async()=>{try{J.loading=!0,await fetch(`/api/templates/${J.name}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:J.contents})}),e.success("Template Saved","Your changes have been saved."),J.open=!1}catch{e.error("Save Failed","Could not save template changes.")}finally{J.loading=!1}},Zr=()=>{P.value.defaults.packages.default_packages||(P.value.defaults.packages.default_packages=[]),P.value.defaults.packages.default_packages.push({name:"",source:"cran",auto_attach:!1})},el=N=>{P.value.defaults.packages.default_packages.splice(N,1)},jt=N=>{const _=document.getElementById(N);_&&_.scrollIntoView({behavior:"smooth",block:"start"})},Po=N=>{switch(N){case"project":return`project-${N}-inputs`;case"project_sensitive":return`project-${N}-workspaces`;case"presentation":return`project-${N}-primary`;case"course":return`project-${N}-core`;default:return`project-${N}`}},tl=async N=>{const _=n.find(K=>K.id===N);if(!_)return;const y=(_.id==="structure",void 0);await Re(_.slug,y),await Tn(),jt(_.id)},Wn=async N=>{const _=d[N]||d[$m];await Re("project-structure",_),await Tn(),jt(Po(N))};We(()=>D.value,(N,_)=>{se.value==="structure"&&(!N||N===_||Tn(()=>jt(Po(N))))});const sl=async()=>{try{console.log("[loadSettings] Starting load, setting isLoadingSettings = true"),Ie.value=!0;const[N,_]=await Promise.all([fetch("/api/settings/catalog"),fetch("/api/settings/get")]);if(!N.ok)throw new Error("Failed to load settings catalog");if(!_.ok)throw new Error("Failed to load settings payload");console.log("[loadSettings] Responses received, parsing JSON");const y=await N.json();m.value=y,$t(y);const K=await _.json();if(console.log("[loadSettings] Settings data:",K),P.value.projects_root=_e(K.global?.projects_root||K.projects_root,""),K.project_types){const fe={},ye={...a.value,...K.project_types};for(const[Ze,At]of Object.entries(ye))fe[Ze]=_t(Ze,At);P.value.project_types=fe}if($e.includeInputs=ct("presentation","inputs"),$e.includeScripts=ct("presentation","scripts"),$e.includeFunctions=ct("presentation","functions"),K.author&&(P.value.author={name:_e(K.author.name,""),email:_e(K.author.email,""),affiliation:_e(K.author.affiliation,"")}),K.defaults){const fe=K.defaults;P.value.defaults.project_type=_e(fe.project_type,"project"),P.value.defaults.notebook_format=_e(fe.notebook_format,"quarto"),P.value.defaults.ide=_e(fe.ide,"vscode"),P.value.defaults.use_git=Fe(fe.use_git,!0),P.value.defaults.use_renv=Fe(fe.use_renv,!1),P.value.defaults.seed_on_scaffold=Fe(fe.seed_on_scaffold,!1),P.value.defaults.seed=_e(fe.seed,""),P.value.defaults.ai_support=Fe(fe.ai_support,!0),P.value.defaults.ai_canonical_file=_e(fe.ai_canonical_file,"CLAUDE.md");const ye=Ge(fe.ai_assistants);ye.length&&(P.value.defaults.ai_assistants=ye,Qe.claude=ye.includes("claude"),Qe.copilot=ye.includes("copilot"),Qe.agents=ye.includes("agents")),fe.git_hooks&&(P.value.defaults.git_hooks={...P.value.defaults.git_hooks,...Object.fromEntries(Object.entries(fe.git_hooks).map(([Ze,At])=>[Ze,Fe(At,P.value.defaults.git_hooks[Ze])]))},P.value.privacy.secret_scan=P.value.defaults.git_hooks.data_security),fe.packages&&(fe.packages.default_packages?P.value.defaults.packages={use_renv:Fe(fe.packages.use_renv,!1),default_packages:(fe.packages.default_packages||[]).map(Ze=>({name:_e(Ze.name,""),source:_e(Ze.source,"cran"),auto_attach:Fe(Ze.auto_attach,!1)}))}:Array.isArray(fe.packages)&&(P.value.defaults.packages={use_renv:!1,default_packages:fe.packages.map(Ze=>({name:_e(Ze.name,""),source:_e(Ze.source,"cran"),auto_attach:Fe(Ze.auto_attach,!1)}))})),fe.directories?P.value.defaults.directories={...P.value.defaults.directories,...Object.fromEntries(Object.entries(fe.directories).map(([Ze,At])=>[Ze,_e(At,P.value.defaults.directories[Ze]||"")]))}:P.value.project_types.project&&(P.value.defaults.directories={...P.value.defaults.directories,...P.value.project_types.project.directories}),qn(fe.env),nl(fe.connections)}K.defaults||(qn(null),nl(null)),K.git&&(P.value.git={user_name:_e(K.git.user_name,""),user_email:_e(K.git.user_email,"")}),K.privacy?(P.value.privacy.secret_scan=Fe(K.privacy.secret_scan,P.value.defaults.git_hooks.data_security),P.value.privacy.gitignore_template=_e(K.privacy.gitignore_template,"gitignore")):P.value.privacy.secret_scan=P.value.defaults.git_hooks.data_security,await ot(je.value,"canonical"),console.log("[loadSettings] Load complete, about to set isLoadingSettings = false")}catch(N){console.error("[loadSettings] Error during load:",N),e.error("Load Failed","Unable to load current settings.")}finally{Ie.value=!1,console.log("[loadSettings] isLoadingSettings now false")}},il=ne({get(){const N=P.value.defaults||{},_=N.git_hooks||{},y=P.value.git||{};return{initialize:N.use_git!==!1,user_name:y.user_name||"",user_email:y.user_email||"",hooks:{ai_sync:_.ai_sync||!1,data_security:_.data_security||!1,check_sensitive_dirs:_.check_sensitive_dirs||!1}}},set(N){if(Ie.value){console.log("[gitPanelModel setter] Blocked during load");return}P.value.defaults.use_git=N.initialize,P.value.git=P.value.git||{},P.value.git.user_name=N.user_name,P.value.git.user_email=N.user_email,P.value.defaults.git_hooks=P.value.defaults.git_hooks||{},P.value.defaults.git_hooks.ai_sync=N.hooks.ai_sync,P.value.defaults.git_hooks.data_security=N.hooks.data_security,P.value.defaults.git_hooks.check_sensitive_dirs=N.hooks.check_sensitive_dirs}}),Lo=ne({get(){const N=P.value.defaults?.scaffold||{};return{source_all_functions:N.source_all_functions!==!1,set_theme_on_scaffold:N.set_theme_on_scaffold!==!1,ggplot_theme:N.ggplot_theme||"theme_minimal",seed_on_scaffold:N.seed_on_scaffold||!1,seed:N.seed||""}},set(N){if(Ie.value){console.log("[scaffoldPanelModel setter] Blocked during load");return}P.value.defaults.scaffold={...P.value.defaults.scaffold||{},source_all_functions:N.source_all_functions,set_theme_on_scaffold:N.set_theme_on_scaffold,ggplot_theme:N.ggplot_theme,seed_on_scaffold:N.seed_on_scaffold,seed:N.seed}}}),ni=(N,_)=>{const y=P.value.project_types[N];return!y||!Array.isArray(y.extra_directories)?[]:y.extra_directories.filter(K=>K.type===_)},oi=(N,_,y)=>{const K=P.value.project_types[N];if(!K)return;Array.isArray(K.extra_directories)||(K.extra_directories=[]);const fe=K.extra_directories.filter(Ze=>Ze&&Ze.type!==_),ye=y.map(Ze=>({...Ze,type:_}));K.extra_directories=[...fe,...ye]},Es=(N,_,y,K)=>{if(!N)return null;if(!/^[a-zA-Z0-9_]+$/.test(N))return"Only letters, numbers, and underscores allowed";const fe=P.value.project_types[_];if(!fe||!Array.isArray(fe.extra_directories))return null;if(fe.extra_directories.filter(Vt=>Vt.type===y).findIndex((Vt,mn)=>mn!==K&&Vt.key===N)!==-1)return"Duplicate key within this section";const Ss=fe.extra_directories.filter(Vt=>Vt.type!==y).find(Vt=>Vt.key===N);return Ss?`Key already used in ${Ss.type} directories`:null},ms=N=>!N||N.trim()===""?null:N.startsWith("/")?"Must be relative (no leading slash)":N.includes("..")?"Path traversal not allowed (..)":null,jo=(N={})=>Object.entries(N).map(([_,y])=>`${_}=${y??""}`).join(`
`),qn=N=>{typeof N=="string"||(N?.raw?N.raw:N?.variables&&jo(N.variables))},nl=N=>{const _=N?.databases||{},y=N?.storage_buckets||{};Q.value=N?.default_database||null,G.value=N?.default_storage_bucket||null;const K=Object.entries(_).filter(([ye])=>ye!=="framework_db").map(([ye,Ze])=>({_id:ye,name:ye,...Ze})),fe=Object.entries(y).map(([ye,Ze])=>({_id:ye,name:ye,...Ze}));v.value=K,M.value=fe},ol=async()=>{try{Pe.value=!0;const N=P.value.projects_root?.trim()||"",_=JSON.parse(JSON.stringify(P.value));_.global||(_.global={}),_.global.projects_root=N||null,delete _.projects_root,_.defaults.seed=_.defaults.seed===""?null:_.defaults.seed,_.defaults.packages&&_.defaults.packages.default_packages&&(_.defaults.packages.default_packages=(_.defaults.packages.default_packages||[]).filter(At=>At.name&&At.name.trim()!==""));const y={};v.value.forEach(At=>{const{_id:Ss,name:Vt,...mn}=At;y[Vt]=mn});const K={};M.value.forEach(At=>{const{_id:Ss,name:Vt,...mn}=At;K[Vt]=mn}),_.defaults.connections={default_database:Q.value,default_storage_bucket:G.value,databases:y,storage_buckets:K},_.defaults.directories=_.project_types?.project?.directories||_.defaults.directories,_.defaults.git_hooks.data_security=_.privacy.secret_scan,_.git=_.git||{user_name:"",user_email:""};for(const At in _.project_types){const Ss=_.project_types[At];Ss.extra_directories&&Array.isArray(Ss.extra_directories)&&(Ss.extra_directories=Ss.extra_directories.filter(Vt=>Vt.key&&Vt.key.trim()!==""&&Vt.label&&Vt.label.trim()!==""&&Vt.path&&Vt.path.trim()!==""&&Vt.type&&Vt.type.trim()!==""))}const fe=await fetch("/api/settings/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_)});if(!fe.ok){const At=await fe.text();throw new Error("Failed to save settings")}const ye=await fe.json();if((await Promise.all([fetch("/api/templates/notebook",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:we.notebook.contents})}),fetch("/api/templates/script",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:we.script.contents})}),fetch("/api/templates/presentation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:we.presentation.contents})}),fetch("/api/templates/gitignore-project",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:we.gitignore_project.contents})}),fetch("/api/templates/gitignore-project_sensitive",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:we.gitignore_project_sensitive.contents})}),fetch("/api/templates/gitignore-course",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:we.gitignore_course.contents})}),fetch("/api/templates/gitignore-presentation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:we.gitignore_presentation.contents})})])).some(At=>!At.ok))throw new Error("Template save failed");e.success("Settings Saved","Your global defaults were updated.")}catch(N){console.error("Failed to save settings:",N),e.error("Save Failed",N?.message||"Review your changes and try again.")}finally{Pe.value=!1}};return ns(()=>{sl(),ot("notebook"),ot("script"),ot("presentation"),ot("gitignore-project","gitignore_project"),ot("gitignore-project_sensitive","gitignore_project_sensitive"),ot("gitignore-course","gitignore_course"),ot("gitignore-presentation","gitignore_presentation"),ot(je.value,"canonical"),window.addEventListener("keydown",Lt)}),Mo(()=>{window.removeEventListener("keydown",Lt)}),(N,_)=>(g(),b("div",hO,[c("nav",pO,[_[84]||(_[84]=c("h2",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"New Project Defaults",-1)),c("div",mO,[(g(),b(ee,null,ke(n,y=>c("div",{key:y.id},[y.id==="basics"?(g(),pe(Da,{key:0},{default:R(()=>[..._[81]||(_[81]=[ie("Settings",-1)])]),_:1})):I("",!0),c("a",{href:Ae(y.slug),onClick:Ut(K=>tl(y.id),["prevent"]),class:Ee(["flex items-center gap-2 px-3 py-2 rounded-md text-sm transition",se.value===y.id?"bg-sky-50 text-sky-700 font-medium dark:bg-sky-900/20 dark:text-sky-400":"text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-800"])},[y.icon?(g(),pe(Ts(y.icon),{key:0,class:"h-4 w-4"})):y.svgIcon?(g(),b("svg",{key:1,class:"h-4 w-4",fill:y.svgFill??"none",viewBox:y.svgViewBox??"0 0 24 24",stroke:y.svgStroke??"currentColor"},[c("path",{"stroke-linecap":y.svgStrokeLinecap??"round","stroke-linejoin":y.svgStrokeLinejoin??"round","stroke-width":y.svgStrokeWidth??2,fill:y.svgPathFill??"none",d:y.svgIcon},null,8,yO)],8,vO)):I("",!0),ie(" "+z(y.label),1)],10,gO),y.id==="structure"&&se.value==="structure"?(g(),b("div",bO,[(g(!0),b(ee,null,ke(L.value,K=>(g(),b("a",{key:K.key,href:Ae("project-structure",K.slug),onClick:Ut(fe=>Wn(K.key),["prevent"]),class:Ee(["block rounded-md py-1 pl-4 pr-2 text-xs font-medium transition",D.value===K.key?"bg-sky-100 text-sky-700 dark:bg-sky-900/30 dark:text-sky-300":"text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-800"])},z(K.label),11,kO))),128))])):y.id==="templates"&&se.value==="templates"?(g(),b("div",xO,[(g(),b(ee,null,ke(q,K=>c("a",{key:K.id,href:`#${K.id}`,onClick:Ut(fe=>jt(K.id),["prevent"]),class:"block rounded-md py-1 pl-4 pr-2 text-xs font-medium text-gray-600 transition hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-800"},z(K.label),9,wO)),64))])):I("",!0)])),64)),k(On,{modelValue:S.value,"onUpdate:modelValue":_[1]||(_[1]=y=>S.value=y),title:".env Variables Preview"},{default:R(()=>[_[83]||(_[83]=c("p",{class:"mb-3 text-sm text-gray-600 dark:text-gray-400"},[ie(" Copy these entries into your projects "),c("code",null,".env"),ie(" file so the connections above resolve properly. ")],-1)),c("pre",_O,z(re.value),1),c("div",SO,[k(ze,{variant:"primary",onClick:_[0]||(_[0]=y=>S.value=!1)},{default:R(()=>[..._[82]||(_[82]=[ie("Close",-1)])]),_:1})])]),_:1},8,["modelValue"])]),c("div",CO,[k(ze,{variant:"primary",size:"md",disabled:Pe.value,onClick:ol,class:"w-full"},{default:R(()=>[ie(z(Pe.value?"Saving":"Save Changes"),1)]),_:1},8,["disabled"])])]),Ie.value?(g(),b("div",AO,[..._[85]||(_[85]=[c("div",{class:"text-center"},[c("div",{class:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-sky-600 border-r-transparent"}),c("p",{class:"mt-4 text-sm text-gray-600 dark:text-gray-400"},"Loading settings...")],-1)])])):I("",!0),Je(c("div",VO,[k($o,{title:he.value,description:ve.value},null,8,["title","description"]),c("div",MO,[Je(c("div",DO,[c("div",$O,[k(Ms,{title:"Basics",onClick:_[2]||(_[2]=y=>se.value="basics")},{default:R(()=>[P.value.projects_root||P.value.author&&P.value.author.name?(g(),b(ee,{key:0},[P.value.projects_root?(g(),b("span",TO,z(P.value.projects_root),1)):I("",!0),P.value.projects_root&&P.value.author&&P.value.author.name?(g(),b("span",EO,"")):I("",!0),P.value.author&&P.value.author.name?(g(),b("span",OO,z(P.value.author.name),1)):I("",!0)],64)):(g(),b("span",PO,"Not set"))]),_:1}),k(Ms,{title:"Project Structure",onClick:_[3]||(_[3]=y=>se.value="structure")},{default:R(()=>[P.value.defaults&&P.value.defaults.project_type?(g(),b("span",LO,z(P.value.defaults.project_type),1)):(g(),b("span",jO,"Not set"))]),_:1}),k(Ms,{title:"Notebooks & Scripts",onClick:_[4]||(_[4]=y=>se.value="notebooksScripts")},{default:R(()=>[P.value.defaults&&P.value.defaults.notebook_format?(g(),b("span",RO,z(P.value.defaults.notebook_format),1)):(g(),b("span",BO,"quarto"))]),_:1}),k(Ms,{title:"AI Assistants",onClick:_[5]||(_[5]=y=>se.value="ai")},{default:R(()=>[P.value.ai_config&&P.value.ai_config.enabled?(g(),b("span",IO,"Enabled")):(g(),b("span",UO,"Disabled"))]),_:1}),k(Ms,{title:"Git & Hooks",onClick:_[6]||(_[6]=y=>se.value="git")},{default:R(()=>[P.value.git&&P.value.git.auto_init?(g(),b("span",NO,"Auto-initialize repositories")):(g(),b("span",zO,"Manual initialization"))]),_:1}),k(Ms,{title:"Packages",onClick:_[7]||(_[7]=y=>se.value="packages")},{default:R(()=>[P.value.packages&&P.value.packages.length>0?(g(),b("span",FO,z(P.value.packages.length)+" package"+z(P.value.packages.length!==1?"s":""),1)):(g(),b("span",HO,"No default packages"))]),_:1})])],512),[[nt,se.value==="overview"]]),Je(c("div",WO,[k(wf,{"database-connections":v.value,"onUpdate:databaseConnections":_[8]||(_[8]=y=>v.value=y),"s3-connections":M.value,"onUpdate:s3Connections":_[9]||(_[9]=y=>M.value=y),"default-database":Q.value,"onUpdate:defaultDatabase":_[10]||(_[10]=y=>Q.value=y),"default-storage-bucket":G.value,"onUpdate:defaultStorageBucket":_[11]||(_[11]=y=>G.value=y)},null,8,["database-connections","s3-connections","default-database","default-storage-bucket"])],512),[[nt,se.value==="connections-defaults"]]),Je(c("div",qO,[k(yt,{description:"Essential project defaults that apply to all new projects."},{default:R(()=>[k(gs,null,{default:R(()=>[c("div",KO,[k(W,{modelValue:P.value.projects_root,"onUpdate:modelValue":_[12]||(_[12]=y=>P.value.projects_root=y),label:"Default Projects Directory",hint:"New projects will be created in this directory by default",placeholder:"e.g., ~/projects or /Users/yourname/code"},null,8,["modelValue"]),c("div",null,[_[87]||(_[87]=c("label",{class:"block text-sm font-semibold text-gray-900 dark:text-white mb-3"}," Supported Editors ",-1)),k(gi,{modelValue:P.value.defaults.positron,"onUpdate:modelValue":_[13]||(_[13]=y=>P.value.defaults.positron=y),id:"support-positron-defaults",description:"Enable Positron-specific workspace and settings files"},{default:R(()=>[..._[86]||(_[86]=[ie(" Positron ",-1)])]),_:1},8,["modelValue"]),_[88]||(_[88]=c("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-3"}," RStudio supported by default ",-1))]),k(Ht,{modelValue:P.value.defaults.notebook_format,"onUpdate:modelValue":_[14]||(_[14]=y=>P.value.defaults.notebook_format=y),label:"Default Notebook Format",hint:"Format used when creating new notebooks"},{default:R(()=>[..._[89]||(_[89]=[c("option",{value:"quarto"},"Quarto (.qmd)",-1),c("option",{value:"rmarkdown"},"R Markdown (.Rmd)",-1)])]),_:1},8,["modelValue"]),c("div",GO,[_[90]||(_[90]=c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"}," Author Information ",-1)),_[91]||(_[91]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-5"}," Used as defaults when scaffold() creates README files and notebook headers, so every project starts with the right attribution. ",-1)),c("div",JO,[k(W,{modelValue:P.value.author.name,"onUpdate:modelValue":_[15]||(_[15]=y=>P.value.author.name=y),label:"Your Name",placeholder:"Your Name"},null,8,["modelValue"]),k(W,{modelValue:P.value.author.email,"onUpdate:modelValue":_[16]||(_[16]=y=>P.value.author.email=y),type:"email",label:"Email",placeholder:"your.email@example.com"},null,8,["modelValue"]),k(W,{modelValue:P.value.author.affiliation,"onUpdate:modelValue":_[17]||(_[17]=y=>P.value.author.affiliation=y),label:"Affiliation",placeholder:"Organization"},null,8,["modelValue"])])])])]),_:1})]),_:1})],512),[[nt,se.value==="basics"]]),Je(c("div",YO,[D.value?oe.value?(g(),b("div",iP,[D.value==="project"?(g(),b("div",nP,[ge.value&&ge.value.length>0?(g(),b("div",oP,[k(yt,{title:"Project Settings",description:"Default settings applied when creating new projects of this type."},{default:R(()=>[k(gs,null,{default:R(()=>[c("div",rP,[(g(!0),b(ee,null,ke(ge.value,y=>(g(),b(ee,{key:y.id},[y.control==="toggle"?(g(),pe(Ue,{key:0,modelValue:P.value.project_types[D.value][y.id],"onUpdate:modelValue":K=>P.value.project_types[D.value][y.id]=K,label:y.label,description:y.description},null,8,["modelValue","onUpdate:modelValue","label","description"])):y.control==="select"?(g(),pe(Ht,{key:1,modelValue:P.value.project_types[D.value][y.id],"onUpdate:modelValue":K=>P.value.project_types[D.value][y.id]=K,label:y.label,hint:y.hint},{default:R(()=>[(g(!0),b(ee,null,ke(y.options,K=>(g(),b("option",{key:K.value,value:K.value},z(K.label),9,lP))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","label","hint"])):y.control==="text"?(g(),pe(W,{key:2,modelValue:P.value.project_types[D.value][y.id],"onUpdate:modelValue":K=>P.value.project_types[D.value][y.id]=K,label:y.label,hint:y.hint,placeholder:y.placeholder},null,8,["modelValue","onUpdate:modelValue","label","hint","placeholder"])):I("",!0)],64))),128))])]),_:1})]),_:1})])):I("",!0),c("div",aP,[c("div",uP,[c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:_[18]||(_[18]=y=>jt(`project-${D.value}-inputs`))}," Inputs "),c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:_[19]||(_[19]=y=>jt(`project-${D.value}-workspaces`))}," Workspaces "),c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:_[20]||(_[20]=y=>jt(`project-${D.value}-outputs`))}," Outputs "),c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:_[21]||(_[21]=y=>jt(`project-${D.value}-utility`))}," Utility "),c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:_[22]||(_[22]=y=>jt(`project-${D.value}-gitignore`))}," .gitignore ")]),k(ze,{variant:"secondary",size:"sm",class:"mt-3 sm:mt-0",onClick:_[23]||(_[23]=y=>ii(D.value))},{default:R(()=>[..._[92]||(_[92]=[ie(" Reset to Defaults ",-1)])]),_:1})]),c("div",{id:`project-${D.value}-inputs`},[k(yt,{title:"Inputs",description:"Define the read-only locations where raw and prepared data live."},{default:R(()=>[(g(!0),b(ee,null,ke(A.value,y=>(g(),b(ee,{key:y.key},[ct(D.value,y.key)?(g(),pe(W,{key:0,modelValue:P.value.project_types[D.value].directories[y.key],"onUpdate:modelValue":K=>P.value.project_types[D.value].directories[y.key]=K,label:y.label,hint:y.hint,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label","hint"])):I("",!0)],64))),128)),c("div",cP,[_[93]||(_[93]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Input Directories",-1)),k(gt,{"model-value":ni(D.value,"input"),"onUpdate:modelValue":_[24]||(_[24]=y=>oi(D.value,"input",y)),"add-label":"Add Input Directory","default-item":()=>({key:"",label:"",path:"",type:"input",_id:Date.now()})},{default:R(({item:y,index:K,update:fe})=>[c("div",fP,[k(W,{"model-value":y.key,"onUpdate:modelValue":ye=>fe("key",ye),label:"Key",placeholder:"e.g., inputs_archive",error:Es(y.key,D.value,"input",K),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),k(W,{"model-value":y.label,"onUpdate:modelValue":ye=>fe("label",ye),label:"Label",placeholder:"e.g., Archive",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":y.path,"onUpdate:modelValue":ye=>fe("path",ye),label:"Path",placeholder:"e.g., inputs/archive",error:ms(y.path),prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])])]),_:1})],8,dP),c("div",{id:`project-${D.value}-workspaces`},[k(yt,{title:"Workspaces",description:"Functions, notebooks, and scripts scaffolded into every project."},{default:R(()=>[(g(!0),b(ee,null,ke(T.value,y=>(g(),b(ee,{key:y.key},[ct(D.value,y.key)?(g(),pe(W,{key:0,modelValue:P.value.project_types[D.value].directories[y.key],"onUpdate:modelValue":K=>P.value.project_types[D.value].directories[y.key]=K,label:y.label,hint:y.hint,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label","hint"])):I("",!0)],64))),128)),c("div",pP,[_[94]||(_[94]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Workspace Directories",-1)),k(gt,{"model-value":ni(D.value,"workspace"),"onUpdate:modelValue":_[25]||(_[25]=y=>oi(D.value,"workspace",y)),"add-label":"Add Workspace Directory","default-item":()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:R(({item:y,index:K,update:fe})=>[c("div",mP,[k(W,{"model-value":y.key,"onUpdate:modelValue":ye=>fe("key",ye),label:"Key",placeholder:"e.g., tests",error:Es(y.key,D.value,"workspace",K),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),k(W,{"model-value":y.label,"onUpdate:modelValue":ye=>fe("label",ye),label:"Label",placeholder:"e.g., Tests",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":y.path,"onUpdate:modelValue":ye=>fe("path",ye),label:"Path",placeholder:"e.g., tests",error:ms(y.path),prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])])]),_:1})],8,hP),c("div",{id:`project-${D.value}-outputs`},[k(yt,{title:"Outputs",description:"Outputs are public by default so results are easy to share."},{default:R(()=>[(g(!0),b(ee,null,ke(Y.value,y=>(g(),b(ee,{key:y.key},[ct(D.value,y.key)?(g(),pe(W,{key:0,modelValue:P.value.project_types[D.value].directories[y.key],"onUpdate:modelValue":K=>P.value.project_types[D.value].directories[y.key]=K,label:y.label,hint:y.hint,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label","hint"])):I("",!0)],64))),128)),k(W,{modelValue:P.value.project_types[D.value].quarto.render_dir,"onUpdate:modelValue":_[26]||(_[26]=y=>P.value.project_types[D.value].quarto.render_dir=y),label:"Notebook output directory",hint:"Rendered notebooks and reports are written here by default.",prefix:"/",monospace:""},null,8,["modelValue"]),c("div",vP,[_[95]||(_[95]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Output Directories",-1)),k(gt,{"model-value":ni(D.value,"output"),"onUpdate:modelValue":_[27]||(_[27]=y=>oi(D.value,"output",y)),"add-label":"Add Output Directory","default-item":()=>({key:"",label:"",path:"",type:"output",_id:Date.now()})},{default:R(({item:y,index:K,update:fe})=>[c("div",yP,[k(W,{"model-value":y.key,"onUpdate:modelValue":ye=>fe("key",ye),label:"Key",placeholder:"e.g., outputs_animations",error:Es(y.key,D.value,"output",K),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),k(W,{"model-value":y.label,"onUpdate:modelValue":ye=>fe("label",ye),label:"Label",placeholder:"e.g., Animations",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":y.path,"onUpdate:modelValue":ye=>fe("path",ye),label:"Path",placeholder:"e.g., outputs/animations",error:ms(y.path),prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])])]),_:1})],8,gP),c("div",{id:`project-${D.value}-utility`},[k(yt,{title:"Utility directories",description:"Cache and scratch folders are gitignored so temporary artifacts never leak into version control."},{default:R(()=>[(g(!0),b(ee,null,ke(te.value,y=>(g(),b(ee,{key:y.key},[ct(D.value,y.key)?(g(),pe(W,{key:0,modelValue:P.value.project_types[D.value].directories[y.key],"onUpdate:modelValue":K=>P.value.project_types[D.value].directories[y.key]=K,label:y.label,hint:y.hint,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label","hint"])):I("",!0)],64))),128))]),_:1})],8,bP)])):D.value==="project_sensitive"?(g(),b("div",kP,[ge.value&&ge.value.length>0?(g(),b("div",xP,[k(yt,{title:"Project Settings",description:"Default settings applied when creating new projects of this type."},{default:R(()=>[k(gs,null,{default:R(()=>[c("div",wP,[(g(!0),b(ee,null,ke(ge.value,y=>(g(),b(ee,{key:y.id},[y.control==="toggle"?(g(),pe(Ue,{key:0,modelValue:P.value.project_types[D.value][y.id],"onUpdate:modelValue":K=>P.value.project_types[D.value][y.id]=K,label:y.label,description:y.description},null,8,["modelValue","onUpdate:modelValue","label","description"])):y.control==="select"?(g(),pe(Ht,{key:1,modelValue:P.value.project_types[D.value][y.id],"onUpdate:modelValue":K=>P.value.project_types[D.value][y.id]=K,label:y.label,hint:y.hint},{default:R(()=>[(g(!0),b(ee,null,ke(y.options,K=>(g(),b("option",{key:K.value,value:K.value},z(K.label),9,_P))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","label","hint"])):y.control==="text"?(g(),pe(W,{key:2,modelValue:P.value.project_types[D.value][y.id],"onUpdate:modelValue":K=>P.value.project_types[D.value][y.id]=K,label:y.label,hint:y.hint,placeholder:y.placeholder},null,8,["modelValue","onUpdate:modelValue","label","hint","placeholder"])):I("",!0)],64))),128))])]),_:1})]),_:1})])):I("",!0),c("div",SP,[c("div",CP,[c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:_[28]||(_[28]=y=>jt(`project-${D.value}-workspaces`))}," Workspaces "),c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:_[29]||(_[29]=y=>jt(`project-${D.value}-inputs-private`))}," Inputs "),c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:_[30]||(_[30]=y=>jt(`project-${D.value}-outputs-private`))}," Outputs "),c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:_[31]||(_[31]=y=>jt(`project-${D.value}-utility`))}," Utility ")]),k(ze,{variant:"secondary",size:"sm",class:"mt-3 sm:mt-0",onClick:_[32]||(_[32]=y=>ii(D.value))},{default:R(()=>[..._[96]||(_[96]=[ie(" Reset to Defaults ",-1)])]),_:1})]),c("div",{id:`project-${D.value}-workspaces`},[k(yt,{title:"Workspaces",description:"Module locations for notebooks, scripts, and helper functions."},{default:R(()=>[c("div",VP,[(g(!0),b(ee,null,ke(T.value,y=>(g(),b(ee,{key:`sensitive-${y.key}`},[ct(D.value,y.key)?(g(),pe(W,{key:0,modelValue:P.value.project_types[D.value].directories[y.key],"onUpdate:modelValue":K=>P.value.project_types[D.value].directories[y.key]=K,label:y.label,hint:y.hint,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label","hint"])):I("",!0)],64))),128))]),c("div",MP,[_[97]||(_[97]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Workspace Directories",-1)),k(gt,{"model-value":ni(D.value,"workspace"),"onUpdate:modelValue":_[33]||(_[33]=y=>oi(D.value,"workspace",y)),"add-label":"Add Workspace Directory","default-item":()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:R(({item:y,index:K,update:fe})=>[c("div",DP,[k(W,{"model-value":y.key,"onUpdate:modelValue":ye=>fe("key",ye),label:"Key",placeholder:"e.g., tests",error:Es(y.key,D.value,"workspace",K),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),k(W,{"model-value":y.label,"onUpdate:modelValue":ye=>fe("label",ye),label:"Label",placeholder:"e.g., Tests",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":y.path,"onUpdate:modelValue":ye=>fe("path",ye),label:"Path",placeholder:"e.g., tests",error:ms(y.path),prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])])]),_:1})],8,AP),c("div",{id:`project-${D.value}-inputs-private`},[k(yt,{title:"Inputs",description:"Keep private inputs compartmentalized; publish processed outputs into public folders when ready."},{default:R(()=>[_[100]||(_[100]=c("div",{class:"grid gap-4 sm:grid-cols-2 text-xs font-semibold uppercase text-gray-500 dark:text-gray-400"},[c("div",null,"Private"),c("div",null,"Public")],-1)),(g(!0),b(ee,null,ke(le.value,y=>(g(),b("div",{key:y.privateKey,class:"grid gap-4 sm:grid-cols-2"},[ct(D.value,y.privateKey)?(g(),pe(W,{key:0,modelValue:P.value.project_types[D.value].directories[y.privateKey],"onUpdate:modelValue":K=>P.value.project_types[D.value].directories[y.privateKey]=K,label:y.privateLabel||`${y.label} (private)`,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label"])):I("",!0),ct(D.value,y.publicKey)?(g(),pe(W,{key:1,modelValue:P.value.project_types[D.value].directories[y.publicKey],"onUpdate:modelValue":K=>P.value.project_types[D.value].directories[y.publicKey]=K,label:y.publicLabel||`${y.label} (public)`,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label"])):I("",!0)]))),128)),c("div",TP,[c("div",EP,[c("div",null,[_[98]||(_[98]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Private Inputs",-1)),k(gt,{"model-value":ni(D.value,"input_private"),"onUpdate:modelValue":_[34]||(_[34]=y=>oi(D.value,"input_private",y)),"add-label":"Add Private Input","default-item":()=>({key:"",label:"",path:"",type:"input_private",_id:Date.now()})},{default:R(({item:y,index:K,update:fe})=>[c("div",OP,[k(W,{"model-value":y.key,"onUpdate:modelValue":ye=>fe("key",ye),label:"Key",placeholder:"e.g., inputs_archive",error:Es(y.key,D.value,"input_private",K),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),k(W,{"model-value":y.label,"onUpdate:modelValue":ye=>fe("label",ye),label:"Label",placeholder:"e.g., Archive",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":y.path,"onUpdate:modelValue":ye=>fe("path",ye),label:"Path",placeholder:"e.g., inputs/archive",error:ms(y.path),prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])]),c("div",null,[_[99]||(_[99]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Public Inputs",-1)),k(gt,{"model-value":ni(D.value,"input_public"),"onUpdate:modelValue":_[35]||(_[35]=y=>oi(D.value,"input_public",y)),"add-label":"Add Public Input","default-item":()=>({key:"",label:"",path:"",type:"input_public",_id:Date.now()})},{default:R(({item:y,index:K,update:fe})=>[c("div",PP,[k(W,{"model-value":y.key,"onUpdate:modelValue":ye=>fe("key",ye),label:"Key",placeholder:"e.g., inputs_public_archive",error:Es(y.key,D.value,"input_public",K),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),k(W,{"model-value":y.label,"onUpdate:modelValue":ye=>fe("label",ye),label:"Label",placeholder:"e.g., Archive (Public)",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":y.path,"onUpdate:modelValue":ye=>fe("path",ye),label:"Path",placeholder:"e.g., inputs_public/archive",error:ms(y.path),prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])])])])]),_:1})],8,$P),c("div",{id:`project-${D.value}-outputs-private`},[k(yt,{title:"Outputs",description:"Review outputs before promotion; private folders remain gitignored while public copies are ready to share."},{default:R(()=>[_[103]||(_[103]=c("div",{class:"grid gap-4 sm:grid-cols-2 text-xs font-semibold uppercase text-gray-500 dark:text-gray-400"},[c("div",null,"Private"),c("div",null,"Public")],-1)),(g(!0),b(ee,null,ke(F.value,y=>(g(),b("div",{key:y.privateKey,class:"grid gap-4 sm:grid-cols-2"},[ct(D.value,y.privateKey)?(g(),pe(W,{key:0,modelValue:P.value.project_types[D.value].directories[y.privateKey],"onUpdate:modelValue":K=>P.value.project_types[D.value].directories[y.privateKey]=K,label:y.privateLabel||`${y.label} (private)`,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label"])):I("",!0),ct(D.value,y.publicKey)?(g(),pe(W,{key:1,modelValue:P.value.project_types[D.value].directories[y.publicKey],"onUpdate:modelValue":K=>P.value.project_types[D.value].directories[y.publicKey]=K,label:y.publicLabel||`${y.label} (public)`,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label"])):I("",!0)]))),128)),k(W,{modelValue:P.value.project_types[D.value].quarto.render_dir,"onUpdate:modelValue":_[36]||(_[36]=y=>P.value.project_types[D.value].quarto.render_dir=y),label:"Notebook output directory",hint:"Rendered docs default to a public location but can be moved if needed.",prefix:"/",monospace:""},null,8,["modelValue"]),c("div",jP,[c("div",RP,[c("div",null,[_[101]||(_[101]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Private Outputs",-1)),k(gt,{"model-value":ni(D.value,"output_private"),"onUpdate:modelValue":_[37]||(_[37]=y=>oi(D.value,"output_private",y)),"add-label":"Add Private Output","default-item":()=>({key:"",label:"",path:"",type:"output_private",_id:Date.now()})},{default:R(({item:y,index:K,update:fe})=>[c("div",BP,[k(W,{"model-value":y.key,"onUpdate:modelValue":ye=>fe("key",ye),label:"Key",placeholder:"e.g., outputs_animations",error:Es(y.key,D.value,"output_private",K),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),k(W,{"model-value":y.label,"onUpdate:modelValue":ye=>fe("label",ye),label:"Label",placeholder:"e.g., Animations",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":y.path,"onUpdate:modelValue":ye=>fe("path",ye),label:"Path",placeholder:"e.g., outputs/animations",error:ms(y.path),prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])]),c("div",null,[_[102]||(_[102]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Public Outputs",-1)),k(gt,{"model-value":ni(D.value,"output_public"),"onUpdate:modelValue":_[38]||(_[38]=y=>oi(D.value,"output_public",y)),"add-label":"Add Public Output","default-item":()=>({key:"",label:"",path:"",type:"output_public",_id:Date.now()})},{default:R(({item:y,index:K,update:fe})=>[c("div",IP,[k(W,{"model-value":y.key,"onUpdate:modelValue":ye=>fe("key",ye),label:"Key",placeholder:"e.g., outputs_public_animations",error:Es(y.key,D.value,"output_public",K),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),k(W,{"model-value":y.label,"onUpdate:modelValue":ye=>fe("label",ye),label:"Label",placeholder:"e.g., Animations (Public)",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":y.path,"onUpdate:modelValue":ye=>fe("path",ye),label:"Path",placeholder:"e.g., outputs_public/animations",error:ms(y.path),prefix:"/",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])])])])]),_:1})],8,LP),c("div",{id:`project-${D.value}-utility`},[k(yt,{title:"Utility directories",description:"Keep cache and scratch in private space for safety; both remain gitignored."},{default:R(()=>[c("div",NP,[(g(!0),b(ee,null,ke(te.value,y=>(g(),b(ee,{key:`sensitive-${y.key}`},[ct(D.value,y.key)?(g(),pe(W,{key:0,modelValue:P.value.project_types[D.value].directories[y.key],"onUpdate:modelValue":K=>P.value.project_types[D.value].directories[y.key]=K,label:y.label,hint:y.hint,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue","label","hint"])):I("",!0)],64))),128))])]),_:1})],8,UP)])):D.value==="presentation"?(g(),b("div",zP,[ge.value&&ge.value.length>0?(g(),b("div",FP,[k(yt,{title:"Project Settings",description:"Default settings applied when creating new projects of this type."},{default:R(()=>[k(gs,null,{default:R(()=>[c("div",HP,[(g(!0),b(ee,null,ke(ge.value,y=>(g(),b(ee,{key:y.id},[y.control==="toggle"?(g(),pe(Ue,{key:0,modelValue:P.value.project_types[D.value][y.id],"onUpdate:modelValue":K=>P.value.project_types[D.value][y.id]=K,label:y.label,description:y.description},null,8,["modelValue","onUpdate:modelValue","label","description"])):y.control==="select"?(g(),pe(Ht,{key:1,modelValue:P.value.project_types[D.value][y.id],"onUpdate:modelValue":K=>P.value.project_types[D.value][y.id]=K,label:y.label,hint:y.hint},{default:R(()=>[(g(!0),b(ee,null,ke(y.options,K=>(g(),b("option",{key:K.value,value:K.value},z(K.label),9,WP))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","label","hint"])):y.control==="text"?(g(),pe(W,{key:2,modelValue:P.value.project_types[D.value][y.id],"onUpdate:modelValue":K=>P.value.project_types[D.value][y.id]=K,label:y.label,hint:y.hint,placeholder:y.placeholder},null,8,["modelValue","onUpdate:modelValue","label","hint","placeholder"])):I("",!0)],64))),128))])]),_:1})]),_:1})])):I("",!0),c("div",qP,[c("div",KP,[c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:_[39]||(_[39]=y=>jt(`project-${D.value}-primary`))}," Primary files "),c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:_[40]||(_[40]=y=>jt(`project-${D.value}-optional`))}," Optional folders ")]),k(ze,{variant:"secondary",size:"sm",class:"mt-3 sm:mt-0",onClick:_[41]||(_[41]=y=>ii(D.value))},{default:R(()=>[..._[104]||(_[104]=[ie(" Reset to Defaults ",-1)])]),_:1})]),c("div",{id:`project-${D.value}-primary`},[k(yt,{title:"Primary files"},{default:R(()=>[c("div",JP,[k(W,{modelValue:P.value.project_types[D.value].directories.presentation_source,"onUpdate:modelValue":_[42]||(_[42]=y=>P.value.project_types[D.value].directories.presentation_source=y),label:"Presentation source file",hint:"Relative path to your primary presentation.qmd.",monospace:""},null,8,["modelValue"]),k(W,{modelValue:P.value.project_types[D.value].directories.rendered_slides,"onUpdate:modelValue":_[43]||(_[43]=y=>P.value.project_types[D.value].directories.rendered_slides=y),label:"Rendered slides directory",hint:"Rendered slides write to the project root by default ('.').",monospace:""},null,8,["modelValue"])])]),_:1})],8,GP),c("div",{id:`project-${D.value}-optional`},[k(yt,{title:"Optional folders",description:"Toggle extra scaffolding when you need supporting data, scripts, or helper utilities."},{default:R(()=>[c("div",QP,[c("div",XP,[k(Ue,{modelValue:$e.includeInputs,"onUpdate:modelValue":_[44]||(_[44]=y=>$e.includeInputs=y),label:"Include inputs directory",description:"Adds an inputs/ folder for sample data used in the presentation."},null,8,["modelValue"]),$e.includeInputs?(g(),pe(W,{key:0,modelValue:P.value.project_types[D.value].directories.inputs,"onUpdate:modelValue":_[45]||(_[45]=y=>P.value.project_types[D.value].directories.inputs=y),label:"Inputs directory",prefix:"/",monospace:""},null,8,["modelValue"])):I("",!0)]),c("div",ZP,[k(Ue,{modelValue:$e.includeScripts,"onUpdate:modelValue":_[46]||(_[46]=y=>$e.includeScripts=y),label:"Include scripts directory",description:"Adds a scripts/ folder for demo code or automation."},null,8,["modelValue"]),$e.includeScripts?(g(),pe(W,{key:0,modelValue:P.value.project_types[D.value].directories.scripts,"onUpdate:modelValue":_[47]||(_[47]=y=>P.value.project_types[D.value].directories.scripts=y),label:"Scripts directory",prefix:"/",monospace:""},null,8,["modelValue"])):I("",!0)]),c("div",eL,[k(Ue,{modelValue:$e.includeFunctions,"onUpdate:modelValue":_[48]||(_[48]=y=>$e.includeFunctions=y),label:"Include functions directory",description:"Adds R/functions for helper utilities that should load automatically."},null,8,["modelValue"]),$e.includeFunctions?(g(),pe(W,{key:0,modelValue:P.value.project_types[D.value].directories.functions,"onUpdate:modelValue":_[49]||(_[49]=y=>P.value.project_types[D.value].directories.functions=y),label:"Functions directory",prefix:"/",monospace:""},null,8,["modelValue"])):I("",!0)]),c("div",tL,[_[105]||(_[105]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Custom Directories",-1)),_[106]||(_[106]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Add any additional directories you need for your presentations.",-1)),k(gt,{"model-value":P.value.project_types[D.value].extra_directories||[],"onUpdate:modelValue":_[50]||(_[50]=y=>P.value.project_types[D.value].extra_directories=y),"add-label":"Add Directory","default-item":()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:R(({item:y,index:K,update:fe})=>[c("div",sL,[k(W,{"model-value":y.key,"onUpdate:modelValue":ye=>fe("key",ye),label:"Key",placeholder:"e.g., assets",error:Es(y.key,D.value,"workspace",K),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),k(W,{"model-value":y.label,"onUpdate:modelValue":ye=>fe("label",ye),label:"Label",placeholder:"e.g., Assets",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":y.path,"onUpdate:modelValue":ye=>fe("path",ye),label:"Path",placeholder:"e.g., assets",error:ms(y.path),prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])])])]),_:1})],8,YP)])):D.value==="course"?(g(),b("div",iL,[ge.value&&ge.value.length>0?(g(),b("div",nL,[k(yt,{title:"Project Settings",description:"Default settings applied when creating new projects of this type."},{default:R(()=>[k(gs,null,{default:R(()=>[c("div",oL,[(g(!0),b(ee,null,ke(ge.value,y=>(g(),b(ee,{key:y.id},[y.control==="toggle"?(g(),pe(Ue,{key:0,modelValue:P.value.project_types[D.value][y.id],"onUpdate:modelValue":K=>P.value.project_types[D.value][y.id]=K,label:y.label,description:y.description},null,8,["modelValue","onUpdate:modelValue","label","description"])):y.control==="select"?(g(),pe(Ht,{key:1,modelValue:P.value.project_types[D.value][y.id],"onUpdate:modelValue":K=>P.value.project_types[D.value][y.id]=K,label:y.label,hint:y.hint},{default:R(()=>[(g(!0),b(ee,null,ke(y.options,K=>(g(),b("option",{key:K.value,value:K.value},z(K.label),9,rL))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","label","hint"])):y.control==="text"?(g(),pe(W,{key:2,modelValue:P.value.project_types[D.value][y.id],"onUpdate:modelValue":K=>P.value.project_types[D.value][y.id]=K,label:y.label,hint:y.hint,placeholder:y.placeholder},null,8,["modelValue","onUpdate:modelValue","label","hint","placeholder"])):I("",!0)],64))),128))])]),_:1})]),_:1})])):I("",!0),c("div",lL,[c("div",aL,[c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:_[51]||(_[51]=y=>jt(`project-${D.value}-core`))}," Core folders "),c("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:_[52]||(_[52]=y=>jt(`project-${D.value}-quarto`))}," Quarto render directory ")]),k(ze,{variant:"secondary",size:"sm",class:"mt-3 sm:mt-0",onClick:_[53]||(_[53]=y=>ii(D.value))},{default:R(()=>[..._[107]||(_[107]=[ie(" Reset to Defaults ",-1)])]),_:1})]),c("div",{id:`project-${D.value}-core`},[k(yt,{title:"Core folders",description:"Configure folders for course datasets, slide decks, assignments, and readings."},{default:R(()=>[c("div",dL,[k(W,{modelValue:P.value.project_types[D.value].directories.data,"onUpdate:modelValue":_[54]||(_[54]=y=>P.value.project_types[D.value].directories.data=y),label:"Course data",prefix:"/",monospace:"",hint:"Shared datasets distributed with the course."},null,8,["modelValue"]),k(W,{modelValue:P.value.project_types[D.value].directories.slides,"onUpdate:modelValue":_[55]||(_[55]=y=>P.value.project_types[D.value].directories.slides=y),label:"Slides",prefix:"/",monospace:"",hint:"Lecture slide sources."},null,8,["modelValue"]),k(W,{modelValue:P.value.project_types[D.value].directories.assignments,"onUpdate:modelValue":_[56]||(_[56]=y=>P.value.project_types[D.value].directories.assignments=y),label:"Assignments",prefix:"/",monospace:"",hint:"Homework or lab materials."},null,8,["modelValue"]),k(W,{modelValue:P.value.project_types[D.value].directories.course_docs,"onUpdate:modelValue":_[57]||(_[57]=y=>P.value.project_types[D.value].directories.course_docs=y),label:"Course documents",prefix:"/",monospace:"",hint:"Syllabus, policies, grading guides."},null,8,["modelValue"]),k(W,{modelValue:P.value.project_types[D.value].directories.readings,"onUpdate:modelValue":_[58]||(_[58]=y=>P.value.project_types[D.value].directories.readings=y),label:"Readings",prefix:"/",monospace:"",hint:"Assigned readings and references."},null,8,["modelValue"]),k(W,{modelValue:P.value.project_types[D.value].directories.notebooks,"onUpdate:modelValue":_[59]||(_[59]=y=>P.value.project_types[D.value].directories.notebooks=y),label:"Module notebooks",prefix:"/",monospace:"",hint:"Module notebooks or workshop materials."},null,8,["modelValue"])])]),_:1})],8,uL),c("div",{id:`project-${D.value}-quarto`},[k(yt,{title:"Quarto render directory",description:"Default location for rendered course documentation."},{default:R(()=>[k(W,{modelValue:P.value.project_types[D.value].quarto.render_dir,"onUpdate:modelValue":_[60]||(_[60]=y=>P.value.project_types[D.value].quarto.render_dir=y),label:"Render directory",prefix:"/",monospace:""},null,8,["modelValue"])]),_:1}),c("div",fL,[_[108]||(_[108]=c("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Custom Directories",-1)),_[109]||(_[109]=c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Add any additional directories you need for your courses.",-1)),k(gt,{"model-value":P.value.project_types[D.value].extra_directories||[],"onUpdate:modelValue":_[61]||(_[61]=y=>P.value.project_types[D.value].extra_directories=y),"add-label":"Add Directory","default-item":()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:R(({item:y,index:K,update:fe})=>[c("div",hL,[k(W,{"model-value":y.key,"onUpdate:modelValue":ye=>fe("key",ye),label:"Key",placeholder:"e.g., resources",error:Es(y.key,D.value,"workspace",K),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),k(W,{"model-value":y.label,"onUpdate:modelValue":ye=>fe("label",ye),label:"Label",placeholder:"e.g., Resources",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),k(W,{"model-value":y.path,"onUpdate:modelValue":ye=>fe("path",ye),label:"Path",placeholder:"e.g., resources",error:ms(y.path),prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue","error"])])]),_:1},8,["model-value","default-item"])])],8,cL)])):I("",!0),c("div",{id:`project-${D.value}-gitignore`},[k(yt,{title:".gitignore Template",description:"Patterns applied to all new projects of this type."},{default:R(()=>[k(Yi,{modelValue:we[`gitignore_${D.value}`].contents,"onUpdate:modelValue":_[62]||(_[62]=y=>we[`gitignore_${D.value}`].contents=y),language:"text","min-height":"400px",disabled:we[`gitignore_${D.value}`].loading},null,8,["modelValue","disabled"]),we[`gitignore_${D.value}`].loading?(g(),b("p",mL,"Loading .gitignore template")):I("",!0),c("div",gL,[k(ze,{size:"sm",variant:"secondary",onClick:_[63]||(_[63]=y=>_s(`gitignore-${D.value}`,`gitignore_${D.value}`))},{default:R(()=>[..._[110]||(_[110]=[ie("Restore Default",-1)])]),_:1})])]),_:1})],8,pL)])):I("",!0):(g(),b("div",QO,[c("div",XO,[(g(!0),b(ee,null,ke(L.value,y=>(g(),b("button",{key:y.key,onClick:K=>Wn(y.key),class:"group relative w-full rounded-lg border border-gray-200 p-6 text-left transition hover:border-sky-300 dark:border-gray-700 dark:hover:border-sky-600"},[c("div",eP,[k(at(aa),{class:"h-6 w-6 flex-shrink-0 text-gray-400 transition group-hover:text-sky-600 dark:group-hover:text-sky-400"}),c("div",null,[c("h3",tP,z(y.label),1),c("p",sP,z(P.value.project_types[y.key]?.description||""),1)])])],8,ZO))),128))])]))],512),[[nt,se.value==="structure"]]),Je(c("div",vL,[c("div",yL,[k(yt,null,{default:R(()=>[k(gs,{title:"Notebook Template",description:"Used by framework::make_notebook() to populate new notebooks."},{default:R(()=>[k(Yi,{modelValue:we.notebook.contents,"onUpdate:modelValue":_[64]||(_[64]=y=>we.notebook.contents=y),language:"markdown","min-height":"500px",disabled:we.notebook.loading},null,8,["modelValue","disabled"]),we.notebook.loading?(g(),b("p",bL,"Loading notebook template")):I("",!0),c("div",kL,[k(ze,{size:"sm",variant:"secondary",onClick:_[65]||(_[65]=y=>_s("notebook"))},{default:R(()=>[..._[111]||(_[111]=[ie("Restore Default",-1)])]),_:1})])]),_:1})]),_:1})]),c("div",xL,[k(yt,null,{default:R(()=>[k(gs,{title:"Script Template",description:"Used by framework::make_script() for quick task scaffolds."},{default:R(()=>[k(Yi,{modelValue:we.script.contents,"onUpdate:modelValue":_[66]||(_[66]=y=>we.script.contents=y),language:"r","min-height":"450px",disabled:we.script.loading},null,8,["modelValue","disabled"]),we.script.loading?(g(),b("p",wL,"Loading script template")):I("",!0),c("div",_L,[k(ze,{size:"sm",variant:"secondary",onClick:_[67]||(_[67]=y=>_s("script"))},{default:R(()=>[..._[112]||(_[112]=[ie("Restore Default",-1)])]),_:1})])]),_:1})]),_:1})]),c("div",SL,[k(yt,null,{default:R(()=>[k(gs,{title:"Presentation Template",description:"Used by framework::make_notebook(stub = 'revealjs') for slide decks."},{default:R(()=>[k(Yi,{modelValue:we.presentation.contents,"onUpdate:modelValue":_[68]||(_[68]=y=>we.presentation.contents=y),language:"markdown","min-height":"500px",disabled:we.presentation.loading},null,8,["modelValue","disabled"]),we.presentation.loading?(g(),b("p",CL,"Loading presentation template")):I("",!0),c("div",AL,[k(ze,{size:"sm",variant:"secondary",onClick:_[69]||(_[69]=y=>_s("presentation"))},{default:R(()=>[..._[113]||(_[113]=[ie("Restore Default",-1)])]),_:1})])]),_:1})]),_:1})])],512),[[nt,se.value==="templates"]]),Je(c("div",VL,[k(yt,{description:"Framework maintains context files for selected assistants and keeps them in sync before commits."},{default:R(()=>[k(gs,null,{default:R(()=>[k(Ue,{modelValue:P.value.defaults.ai_support,"onUpdate:modelValue":_[70]||(_[70]=y=>P.value.defaults.ai_support=y),label:"Enable AI Support",description:"Generate and sync assistant-specific context files."},null,8,["modelValue"])]),_:1}),k(gs,{title:"Canonical context file",description:"This file is the source of truth; other instructions files are synced to it when AI hooks run."},{default:R(()=>[k(Ht,{modelValue:P.value.defaults.ai_canonical_file,"onUpdate:modelValue":_[71]||(_[71]=y=>P.value.defaults.ai_canonical_file=y),disabled:!P.value.defaults.ai_support,label:"Canonical Context File"},{default:R(()=>[..._[114]||(_[114]=[c("option",{value:"AGENTS.md"},"AGENTS.md (multi-agent orchestrator)",-1),c("option",{value:"CLAUDE.md"},"CLAUDE.md",-1),c("option",{value:".github/copilot-instructions.md"},".github/copilot-instructions.md",-1)])]),_:1},8,["modelValue","disabled"])]),_:1}),P.value.defaults.ai_support?(g(),b(ee,{key:0},[k(gs,{title:"Assistants",description:"Choose which assistants receive context updates."},{default:R(()=>[c("div",ML,[(g(),b(ee,null,ke(Z,y=>k(gi,{key:y.id,id:`ai-${y.id}`,modelValue:Qe[y.id],"onUpdate:modelValue":K=>Qe[y.id]=K,description:y.description},{default:R(()=>[ie(z(y.label),1)]),_:2},1032,["id","modelValue","onUpdate:modelValue","description"])),64))])]),_:1}),k(gs,{title:"Canonical instructions",description:"Edit the canonical file directly. Restore defaults if you want to start over."},{default:R(()=>[k(Yi,{modelValue:we.canonical.contents,"onUpdate:modelValue":_[72]||(_[72]=y=>we.canonical.contents=y),language:"markdown","min-height":"500px",disabled:we.canonical.loading||!P.value.defaults.ai_support},null,8,["modelValue","disabled"]),c("div",DL,[k(ze,{size:"sm",variant:"secondary",disabled:we.canonical.loading,onClick:pn},{default:R(()=>[..._[115]||(_[115]=[ie("Restore Default",-1)])]),_:1},8,["disabled"])])]),_:1})],64)):I("",!0)]),_:1})],512),[[nt,se.value==="ai"]]),Je(c("div",$L,[k(yt,null,{default:R(()=>[k(kf,{modelValue:il.value,"onUpdate:modelValue":_[73]||(_[73]=y=>il.value=y),flush:""},{note:R(()=>[..._[116]||(_[116]=[ie(" Project-specific .gitignore templates can be customized in ",-1),c("a",{href:"#/settings/project-defaults",class:"text-sky-600 dark:text-sky-400 hover:underline"}," Project Defaults ",-1),ie(". ",-1)])]),_:1},8,["modelValue"])]),_:1})],512),[[nt,se.value==="git"]]),Je(c("div",TL,[k(yt,null,{default:R(()=>[_[117]||(_[117]=c("div",null,[c("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Scaffold Behavior"),c("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"},[ie(" Automatic actions when "),c("code",{class:"px-1.5 py-0.5 bg-gray-200 dark:bg-gray-700 rounded text-xs"},"scaffold()"),ie(" runs to initialize your project environment. ")])],-1)),k(xf,{modelValue:Lo.value,"onUpdate:modelValue":_[74]||(_[74]=y=>Lo.value=y),flush:""},null,8,["modelValue"])]),_:1})],512),[[nt,se.value==="scaffold"]]),Je(c("div",EL,[k(yt,null,{default:R(()=>[k(gs,null,{default:R(()=>[k(Ue,{modelValue:P.value.defaults.packages.use_renv,"onUpdate:modelValue":_[75]||(_[75]=y=>P.value.defaults.packages.use_renv=y),label:"Enable renv",description:"Create renv environments for new projects."},null,8,["modelValue"])]),_:1}),k(gs,{title:"Default packages",description:"Installed (and optionally attached) when scaffold() runs."},{default:R(()=>[_[121]||(_[121]=c("p",{class:"text-xs text-gray-600 dark:text-gray-400 mb-4"},"Use this list to preseed notebooks with your preferred helpers.",-1)),P.value.defaults.packages.default_packages&&P.value.defaults.packages.default_packages.length?(g(),b("div",OL,[(g(!0),b(ee,null,ke(P.value.defaults.packages.default_packages,(y,K)=>(g(),b("div",{key:`pkg-${K}`,class:"rounded-md border border-gray-200 p-4 dark:border-gray-700"},[c("div",PL,[c("div",LL,[y.source==="cran"||y.source==="bioconductor"?(g(),pe(bf,{key:0,modelValue:y.name,"onUpdate:modelValue":fe=>y.name=fe,source:y.source,label:"Package",placeholder:y.source==="cran"?"Search CRAN...":"Search Bioconductor...",onSelect:fe=>y.name=fe.name},null,8,["modelValue","onUpdate:modelValue","source","placeholder","onSelect"])):(g(),pe(W,{key:1,modelValue:y.name,"onUpdate:modelValue":fe=>y.name=fe,label:"Package",placeholder:"user/repo"},null,8,["modelValue","onUpdate:modelValue"])),k(Ht,{modelValue:y.source,"onUpdate:modelValue":fe=>y.source=fe,label:"Source"},{default:R(()=>[..._[118]||(_[118]=[c("option",{value:"cran"},"CRAN",-1),c("option",{value:"github"},"GitHub",-1),c("option",{value:"bioconductor"},"Bioconductor",-1)])]),_:1},8,["modelValue","onUpdate:modelValue"])]),c("div",jL,[k(Ue,{modelValue:y.auto_attach,"onUpdate:modelValue":fe=>y.auto_attach=fe,label:"Auto-Attach",description:"Call library() when scaffold() runs."},null,8,["modelValue","onUpdate:modelValue"]),k(ze,{size:"sm",variant:"secondary",onClick:fe=>el(K)},{default:R(()=>[..._[119]||(_[119]=[ie("Remove",-1)])]),_:1},8,["onClick"])])])]))),128))])):(g(),b("p",RL,"No packages configured. Add packages to include tidyverse helpers or internal utilities automatically.")),c("div",BL,[k(ze,{size:"sm",variant:"secondary",onClick:Zr},{default:R(()=>[..._[120]||(_[120]=[ie("Add Package",-1)])]),_:1})])]),_:1})]),_:1})],512),[[nt,se.value==="packages"]])])],512),[[nt,!Ie.value]]),k(On,{modelValue:J.open,"onUpdate:modelValue":_[78]||(_[78]=y=>J.open=y),size:"lg",title:J.title},{default:R(()=>[c("p",IL,z(J.description),1),k(dc,{modelValue:J.contents,"onUpdate:modelValue":_[76]||(_[76]=y=>J.contents=y),rows:18,monospace:""},null,8,["modelValue"])]),actions:R(()=>[c("div",UL,[k(ze,{variant:"secondary",onClick:_[77]||(_[77]=y=>J.open=!1)},{default:R(()=>[..._[122]||(_[122]=[ie("Cancel",-1)])]),_:1}),k(ze,{variant:"primary",disabled:J.loading,onClick:Xr},{default:R(()=>[ie(z(J.loading?"Saving":"Save Template"),1)]),_:1},8,["disabled"])])]),_:1},8,["modelValue","title"]),k(On,{modelValue:be.open,"onUpdate:modelValue":_[80]||(_[80]=y=>be.open=y),size:"md",title:"Reset to Defaults",icon:"warning"},{default:R(()=>[c("p",NL,[_[123]||(_[123]=ie(" Are you sure you want to reset ",-1)),c("strong",null,z(be.projectTypeName),1),_[124]||(_[124]=ie(" to default settings? This will discard all your customizations for this project type. ",-1))])]),actions:R(()=>[c("div",zL,[k(ze,{variant:"secondary",onClick:_[79]||(_[79]=y=>be.open=!1)},{default:R(()=>[..._[125]||(_[125]=[ie("Cancel",-1)])]),_:1}),k(ze,{variant:"primary",onClick:_i},{default:R(()=>[..._[126]||(_[126]=[ie(" Reset to Defaults ",-1)])]),_:1})])]),_:1},8,["modelValue"])]))}},qL={class:"mx-auto max-w-5xl p-10"},KL={__name:"ProjectPackagesView",setup(t){return ae([]),ns(async()=>{}),(e,s)=>(g(),b("div",qL,[k($o,{title:"Packages",description:"Manage R packages for this project."}),s[0]||(s[0]=Ua('<div class="mt-10 rounded-2xl border border-zinc-200 bg-white p-8 shadow-sm dark:border-zinc-800 dark:bg-zinc-900"><div class="flex items-center gap-3 border-b border-zinc-100 pb-6 dark:border-zinc-800"><div class="flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-sky-500 to-sky-600 shadow-lg shadow-sky-500/20"><svg class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg></div><h3 class="text-xl font-bold text-zinc-900 dark:text-white">Package Configuration</h3></div><div class="mt-8"><p class="text-sm text-zinc-600 dark:text-zinc-400"> Package management interface coming soon. This page will allow you to: </p><ul class="mt-4 space-y-2 text-sm text-zinc-600 dark:text-zinc-400"><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Add and remove project packages </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Specify package versions </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Toggle renv integration </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Install and update packages </li></ul></div></div>',1))]))}},GL={class:"mx-auto max-w-5xl p-10"},JL={__name:"ProjectDataView",setup(t){return ae([]),ns(async()=>{}),(e,s)=>(g(),b("div",GL,[k($o,{title:"Data",description:"Manage data catalog and sources for this project."}),s[0]||(s[0]=Ua('<div class="mt-10 rounded-2xl border border-zinc-200 bg-white p-8 shadow-sm dark:border-zinc-800 dark:bg-zinc-900"><div class="flex items-center gap-3 border-b border-zinc-100 pb-6 dark:border-zinc-800"><div class="flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-sky-500 to-sky-600 shadow-lg shadow-sky-500/20"><svg class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"></path></svg></div><h3 class="text-xl font-bold text-zinc-900 dark:text-white">Data Catalog</h3></div><div class="mt-8"><p class="text-sm text-zinc-600 dark:text-zinc-400"> Data catalog management interface coming soon. This page will allow you to: </p><ul class="mt-4 space-y-2 text-sm text-zinc-600 dark:text-zinc-400"><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Define data sources in the catalog </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Specify data formats (CSV, RDS, etc.) </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Configure encryption settings </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Track data integrity via digests </li></ul></div></div>',1))]))}},YL={class:"mx-auto max-w-5xl p-10"},QL={__name:"ProjectConnectionsView",setup(t){return ae([]),ns(async()=>{}),(e,s)=>(g(),b("div",YL,[k($o,{title:"Connections",description:"Manage database connections for this project."}),s[0]||(s[0]=Ua('<div class="mt-10 rounded-2xl border border-zinc-200 bg-white p-8 shadow-sm dark:border-zinc-800 dark:bg-zinc-900"><div class="flex items-center gap-3 border-b border-zinc-100 pb-6 dark:border-zinc-800"><div class="flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-sky-500 to-sky-600 shadow-lg shadow-sky-500/20"><svg class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg></div><h3 class="text-xl font-bold text-zinc-900 dark:text-white">Database Connections</h3></div><div class="mt-8"><p class="text-sm text-zinc-600 dark:text-zinc-400"> Connection management interface coming soon. This page will allow you to: </p><ul class="mt-4 space-y-2 text-sm text-zinc-600 dark:text-zinc-400"><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Configure database connections (SQLite, PostgreSQL) </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Store connection credentials securely </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Test database connectivity </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Manage connection pooling settings </li></ul></div></div>',1))]))}},XL=[{path:"/",redirect:"/projects"},{path:"/docs",name:"docs",component:Fh},{path:"/docs/:functionName",name:"doc-detail",component:Fh,props:!0},{path:"/projects",name:"projects",component:$4},{path:"/projects/new",name:"project-create",component:YD},{path:"/project/:id",name:"project-detail",component:tO,props:!0},{path:"/settings/:section?/:subsection?",name:"settings",component:WL,props:!0},{path:"/project/packages",name:"project-packages",component:KL},{path:"/project/data",name:"project-data",component:JL},{path:"/project/connections",name:"project-connections",component:QL}],ZL=l2({history:Ix(),routes:XL});Qk(G2).use(ZL).mount("#app");
